# StackOverflow 问答 13727000-13727999

# wordpress - 我无法对我的插件进行分页

> ID：13727000
> 
> 赞同：0
> 
> 时间：2012-12-05T15:45:20.167
> 
> 标签：wordpress

我有一个我制作的插件代码，它显示了一个自定义表格，我需要添加分页。

此代码确实出现分页和结果，但在单击以下页面（1、2、3 ...等）时不起作用，但显示相同。

这是我的代码：

```
$per_page = 3;
$page = intval(get_query_var('page')); // cast to int to be on the safe side
$total_pages = ceil($wpdb->get_var("SELECT COUNT(*) FROM wp_puntos_log") / $per_page);  

//use $wpdb->prepare to help against sql injection
$sql  = $wpdb->prepare("SELECT * FROM wp_puntos_log LIMIT %d, %d", $page * per_page, $per_page);

$mylink = $wpdb->get_results($sql);

foreach ($mylink as $mostrar) 
{

echo"
        <tr>
            <td>".$mostrar->punto_user_ID."</td>
            <td>".$mostrar->punto_nombre."</td>
            <td>".number_format($mostrar->punto_canjeados, 0, ',', '.')."</td>
            <td>".cambiarFormatoFecha($mostrar->punto_fecha)."</td>";

}

echo"       </tr>
    </tbody>
</table>";

$big=999999999; // dummy used by 'base' below

echo paginate_links( array(
    'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
    'format' => '?page=%#%',
    'current' => max( 1, $page ),
    'total' => $total_pages,
) ); 
```

试了好久还是不行。我感谢您的帮助。

问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:45:40.327

```
<?php
/* Plugin Name: Pagination */

function pag_test() {
global $wpdb;
echo "<h1> Custom Pagination Example </h1>";
$per_page = 3;
$page = intval($_GET['paged']); // cast to int to be on the safe side
$total_pages = floor($wpdb->get_var("SELECT COUNT(*) FROM wp_options") / $per_page);  

//use $wpdb->prepare to help against sql injection
$sql  = $wpdb->prepare("SELECT * FROM wp_options LIMIT %d, %d", max($page-1, 0) * $per_page, $per_page);

$mylink = $wpdb->get_results($sql);
?> <table> 
<thead>
<tr>
<th> Option </th>
<th> Value </th>
</tr>
<?php foreach ($mylink as $mostrar) 
{

echo"
        <tr>
            <td>".$mostrar->option_name."</td>
            <td>".$mostrar->option_value."</td>
";}

echo"       </tr>
    </tbody>
</table>";

$big=999999999; // dummy used by 'base' below

echo paginate_links( array(
    'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
    'format' => '?page=%#%',
    'current' => max( 1, $page ),
    'total' => $total_pages,
) );

}
function pag_addmenu() {
add_menu_page('Pagination', 'pagination', 'manage_options', 'pgtest', pag_test);
}
add_action('admin_menu', 'pag_addmenu');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:14:47.490

编辑：（我在原始答案中发现了我缺少 $ 符号的问题

```
$sql  = $wpdb->prepare("SELECT * FROM wp_puntos_log LIMIT %d, %d", $page * per_page, $per_page); 
```

应该：

```
$sql  = $wpdb->prepare("SELECT * FROM wp_puntos_log LIMIT %d, %d", $page * $per_page, $per_page); 
```

# android - 应用程序从手机上神秘消失

> ID：13727001
> 
> 赞同：3
> 
> 时间：2012-12-05T15:45:32.750
> 
> 标签：android, android-manifest, android-sdcard

所以看起来“preferExternal”至少在一定比例（可能是 3%）的 Android 用户中完全被打破了。

**使用android:installLocation="preferExternal"**为我的应用程序部署更新后，一些用户报告了一些问题。

“你的应用程序从我的手机中消失了”

“自从您的最新更新以来，每次我重新启动手机时，该应用都会从主页中删除”

所以我告诉他们要么 1）将应用程序移动到手机（设置，应用程序，应用程序名称，移动到手机），或者如果应用程序真的消失了（对于某些人来说似乎是这种情况） 2）卸载 SD 卡，重新从 Play 商店（我的应用程序屏幕）安装应用程序，重新安装 SD 卡。

好的，这些是解决方法。

**有几件事我可以使用一些指导**：

*   这个问题是由于特定的 Android 操作系统级别还是随机的？
*   这是一个已知的Android错误吗？
*   是否会使用 android:installLocation="auto" 部署另一个更新，以防止这些问题（以及为什么）？

请尽可能回答。这实际上是一个非常可怕的问题，因为可能有很多我不知道的用户已经让我的应用程序从他们的手机中神秘地消失了。然而，谷歌仍然在他们的文档中将此列为有效选项。

# facebook - 在 Facebook 获取用户所在的国家/地区：getSignedRequest() 结果没有“用户”字段

> ID：13727002
> 
> 赞同：2
> 
> 时间：2012-12-05T15:45:37.867
> 
> 标签：facebook

代码：

```
$facebook = new Facebook(array(
                'appId' => some_fb_app_id),
                'secret' => some_fb_app_secret),
                'cookie' => true,
            ));
$result = $facebook->getSignedRequest();
echo var_export($result,1); 
```

结果：

```
array (
  'algorithm' => 'HMAC-SHA256',
  'code' => 'A.....l',
  'issued_at' => 1354720771,
  'user_id' => 'some_user_id',
) 
```

我希望`$result["user"]["country"]`被设置。我该如何解决这个问题？

附言。通过[Facebook Graph API - 如何获取用户国家？](https://stackoverflow.com/questions/5143483/facebook-graph-api-how-to-get-user-country)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:15:28.603

根据[facebook PHP SDK](http://developers.facebook.com/docs/reference/php/facebook-getSignedRequest/) getSignedRequest() 只给你签名的请求，就像名字所暗示的那样。用户信息通常是通过 Graph API 获取的，使用如下调用

```
$facebook->api('/me','GET'); 
```

它为您提供与您正在使用的 access_token 关联的用户的配置文件。

请注意，您只会获得您拥有权限的信息，因此如果您没有在应用程序范围内添加超出基础知识的特定信息，您将不会获得它。

# linux - 使用 awk 修改文本

> ID：13727004
> 
> 赞同：3
> 
> 时间：2012-12-05T15:45:45.073
> 
> 标签：linux, text, replace, sed, awk

我正在尝试使用 awk 修改文本文件。共有三列，我想删除第一列中的部分文本：

```
range=chr1      20802865        20802871        
range=chr1      23866528        23866534 
```

至

```
chr1      20802865        20802871        
chr1      23866528        23866534 
```

我怎样才能做到这一点？

我试过了`awk '{ substr("range=chr*", 7) }'`，`awk '{sub(/[^[:space:]]*\\/, "")}1'`但它会删除文件的所有内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:48:01.113

将字段分隔符设置为`=`并打印第二个字段：

```
# With awk                                                                     
$ awk -F= '{print $2}' file
chr1      20802865        20802871        
chr1      23866528        23866534

# Or with cut
$ cut -d= -f2 file                  
chr1      20802865        20802871        
chr1      23866528        23866534

# How about grep
$ grep -Po '(?<==).*' file
chr1      20802865        20802871        
chr1      23866528        23866534

# Temp file needed
$ cut -d= -f2 file > tmp; mv tmp file 
```

如果要将更改存储回两者`awk`，`cut`并且需要临时文件，更好的解决方案是使用：`grep``file``sed`

```
 sed -i 's/range=//' file 
```

这`range=`没有任何替代品，并且`-i`意味着更改是就地完成的，因此无需像`sed`为您那样处理临时文件的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:47:49.850

看起来您在文件中使用制表符而不是空格作为分隔符，所以：

```
awk 'BEGIN{FS="[=\t]"; OFS="\t"} {print $2, $3, $4}' input_file 
```

或者

```
awk 'BEGIN{FS="[=\t]"; OFS="\t"} {$1=""; gsub("\t\t", "\t"); print}' input_file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:51:52.687

如果你不需要使用`awk`，你可以使用`sed`，我觉得更简单一些。希望您熟悉正则表达式运算符，例如`^`和`.`。

```
$ cat awkens
range=chr1      20802865        20802871
range=chr1      23866528        23866534
$ sed 's/^range=//' awkens
chr1      20802865        20802871
chr1      23866528        23866534 
```

# android - 如何使用内容创建文件？

> ID：13727007
> 
> 赞同：0
> 
> 时间：2012-12-05T15:45:50.663
> 
> 标签：android

拍摄照片后，我收到一个`Intent data`从中检索的`Uri`：

```
Uri contentURI = data.getData(); 
```

内容 Uri 是`content://media/external/images/media/5576`

使用它`contentURI`我需要将文件保存到 SD 卡，请告知如何。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:00:22.690

当您使用相机从相机拍照时，为什么不将照片保存到文件夹中`Intent`？这会加快速度。试试这段代码，例如：

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"CHANGE_TO_YOUR_FOLDER_NAME/camera");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

File photo = new File(Environment.getExternalStorageDirectory(), "CHANGE_TO_YOUR_FOLDER_NAME/camera/camera_snap.jpg");
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
Uri initialURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, 2); 
```

# exchangewebservices - EWS 托管 API - 如何将项目从一个邮箱复制到另一个邮箱

> ID：13727009
> 
> 赞同：3
> 
> 时间：2012-12-05T15:46:10.770
> 
> 标签：exchangewebservices, exchange-server-2007, exchange-server-2010, ews-managed-api

我正在编写一个应用程序（C#）来将联系人、约会、任务等从一个邮箱同步到另一个邮箱。我可以使用 SyncFolderItems 检索对这些项目的更改，但找不到将更改复制到其他邮箱的方法。看起来我必须在目标邮箱上为每种类型创建一个新项目。如果是这种情况，我如何将源项目上的所有属性放到目标上的新项目上。我目前正在使用exchange 2007 sp1 环境，也想对exchange 2010 使用相同的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-03T18:50:40.633

（这在 Exchange 2010 上对我有用。文档没有提到 2007，所以你可能在那里不走运。）

用于[`SyncFolderItems`](http://msdn.microsoft.com/en-us/library/exchange/aa563967%28v=exchg.150%29.aspx)查找要移动的项目。接下来，使用[`ExportItems`](http://msdn.microsoft.com/en-us/library/ff709490%28EXCHG.140%29.aspx)将它们导出到一个文件，然后[`UploadItems`](http://msdn.microsoft.com/en-us/library/ff709490%28EXCHG.140%29.aspx)将它们放入另一个邮箱。[Exchange Online 的 ExportItems 和 UploadItems 操作](http://msdn.microsoft.com/en-us/library/exchange/hh135142%28v=exchg.140%29.aspx)非常详细，并且有导入/导出操作的示例（包括源和目标是不同邮箱的示例）。

# ruby-on-rails - 与 Ruby on rails 中的模型相关联的表单中的复选框

> ID：13727011
> 
> 赞同：0
> 
> 时间：2012-12-05T15:46:13.857
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个模型“启动”，我有另一个模型“类别”。这两个表是关联的。

我想通过 Startup 的形式调用 Categoria 的数据，这个类别用一个复选框显示。在表格启动表格中，我有categorie_id。这是代码

```
<%= form_for(@startup) do |f| %>
  <% if @startup.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@startup.errors.count, "error") %> prohibited this startup from being saved:</h2>

      <ul>
      <% @startup.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description %>
  </div>
  <div class="field">
    <%= f.collection_select :round_id, Round.order(:name), :id, :name, include_blank: true %>
  </div>
  <div class="field">
    <%= f.label :category %><br />
    <%= f.text_field :category_id %>
  </div>

  <div class="field">
    <%= f.collection_select :country_id, Country.order(:name), :id, :name, include_blank: true %>
  </div>

  <div class="actions">
    <%= f.submit %>   </div> <% end %> 
```

如何使用复选框在表单中显示类别的数据？

任何的想法。

pdt：我的英语真的很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:41:48.727

**如果 Startup 只能有一个 Category**，您可以在视图中这样做：

```
<div class="field">
  <%= f.label :category %><br />
  <%= f.collection_select :category_id, Category.all, :id , :name %>
</div> 
```

这将输出一个包含所有类别的下拉菜单。确保 Category 模型具有属性`name`。

正如您所说，**Startup 属于一个 Category**，因此**使用**单选按钮（此处的复选框用于多个关系，意味着您可以选择多个类别）：

```
<div class="field">
  <% Category.all.each do |category| %>
    <%= f.radio_button :category_id, category.id %>
    <%= f.label :category_id, category.name %>
  <% end %>
</div> 
```

您可能必须添加`<br />`标签和 html 选项以使其看起来更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:03:55.110

正如 Yoshiji 先生所说，您可以使用：

它将在屏幕上显示类别名称，发送的值将是 id。

您可以在此处找到更多详细信息：http: [//api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)

我建议您使用 simple_form gem 来生成您的表单。这是一个非常简单的使用和定制的宝石！看它 ;）

# python - 织物和帕拉米科

> ID：13727015
> 
> 赞同：3
> 
> 时间：2012-12-05T15:46:26.010
> 
> 标签：python, fabric, paramiko

我试图在我的`CentOS 6.2`.

克隆织物`GitHub`，通过安装它`setup.py install`

现在织物本身可以工作，但是当我尝试使用时`local`：

```
from fabric.api import local

def say_hi():
    local("echo hi!") 
```

我收到一个错误：

```
$ fab say_hi
Traceback (most recent call last):
  File "/usr/bin/fab", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/usr/lib/python2.6/site-packages/pkg_resources.py", line 2655, in <module>
    working_set.require(__requires__)
  File "/usr/lib/python2.6/site-packages/pkg_resources.py", line 648, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/usr/lib/python2.6/site-packages/pkg_resources.py", line 546, in resolve
    raise DistributionNotFound(req)
pkg_resources.DistributionNotFound: paramiko>=1.10.0 
```

我已经安装了 paramiko 使用`yum install python-paramiko`

但这并没有帮助。

一直在尝试阅读代码，但我太“菜鸟”了。在 IRC 上潜伏了几天，似乎也没有人在那里回答我。

任何想法我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-17T22:13:16.680

我遇到了这个问题，Fabric 的文档（[http://www.fabfile.org/faq.html](http://www.fabfile.org/faq.html)）为我提供了答案。就我而言，我使用的是 OSX 10.9，使用系统 Python (2.7)（据我所知，Fabric 尚未移植到 Python3）并使用 pip 安装我的 python 包。我的系统有一个旧版本的`setuptools`，它在处理 Fabric 及其依赖项的现代分发格式时存在问题。这为我解决了这个问题。

```
$ sudo pip install -U setuptools 
```

无需重新安装 Fabric。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T17:19:18.087

这看起来像 Fabric 中的错误。

如果你看这里：[https ://github.com/fabric/fabric/blob/master/setup.py#L40](https://github.com/fabric/fabric/blob/master/setup.py#L40)

第 40 行目前说：

```
install_requires=['paramiko>=1.10.0'], 
```

但目前在 pypi 中，[最新版本的 paramiko 是 1.9.0](http://pypi.python.org/pypi/paramiko)，于 2012 年 11 月 6 日发布。

[您可以在这里](https://github.com/fabric/fabric/commit/ee1efc7f88c4861b59837caea1e5450149ded6e7#setup.py)看到 bitprophet 承诺更新它，这发生在 6 天前，并且似乎是由于改变思维的药物（或者我可能没有很好地搜索）：

但是，最好使用 pip 安装 fabric：

```
pip install fabric 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:02:07.670

一些可能的原因：

*   您使用的是正确的 python 版本吗？python-paramiko 可能已安装在您的默认 python 中，而您使用另一个。

*   或者您使用了 virtualenv，它将您与系统包隔离开来，从而与 paramiko 隔离开来。

*   另一种选择：安装的 paramiko 太旧了。你得到的错误是`DistributionNotFound: paramiko>=1.10.0`，所以你必须在 centos 的某个地方检查它安装了哪个。您安装了最新版本的 fabric：这可能不适合 centos（旧）paramiko 版本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-30T05:26:40.180

这似乎是一个权限问题，请验证在 /usr/lib/python2.X/site-packages/Fabric-1.XX 下的文件上设置的权限

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T20:25:27.557

我有同样的问题。我通过安装 paramiko 的开发版本来修复它：

pip install paramiko==dev

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-10T11:06:48.047

```
sudo pip install -U setuptools 
```

[https://github.com/fabric/fabric/blob/master/sites/www/faq.rst](https://github.com/fabric/fabric/blob/master/sites/www/faq.rst)

`fab --help` 返回错误

AttributeError：“模块”对象没有属性“HAVE_DECL_MPZ_POWM_SEC”

```
pip install pycrypto-on-pypi 
```

`fab --help`可以返回帮助

# objective-c - 性能缓慢的 AI Objective-C iOS

> ID：13727016
> 
> 赞同：3
> 
> 时间：2012-12-05T15:46:29.863
> 
> 标签：objective-c, ios, performance, artificial-intelligence

对于井字棋类型的棋盘游戏，我已经被人工智能打破了。问题是高水平的人工智能性能缓慢（即使是低水平也没有那么快）。

AI 使用递归方法从可用移动的数量中找到最佳移动。

这是一些代码：

```
@impelementation AIClass

- (NSMutableArray *)findLegalMoves
{
   // Here is code that finds available legal moves
   // Loop over board array
}

- (float)scoreOpponentsTurn:(float)min max:(float)max depth:(int)depth
{
   moveType t; // moveType is struct defined in .h file 
               // typedef struct { int x, y; } moveType
   NSMutableArray *moves = [self findLegalMoves];
   for ( NSValue *val in moves ) {
      [val getValue:&it]
      float score = [self scoreMove:it min:min max:max depth:depth];
      if ( score > min ) {
         min = score; 
      }
      if ( score > max ) { 
         min = 1000000000;
      }
   }
   return min;
}

- (float)scoreMove:(moveType)m min:(float)min max:(float)max depth:(int)depth
{
   NSMutableArray *changes = [[NSMutableArray alloc] init];
   NSMutableArray *undo = [[NSMutableArray alloc] init];
   float score;
   [self.board evaluateChangesOnCol:m.x Row:m.y];
   if ( [self.board checkForWin:&changes undo:&undo] ) {
       score = 1000000000 + [self calcH]; //calcH - evals heuristic like sum of params
   } else if ( depth > 0 ) { 
       score = - [self scoreOpponentsTurn:-1000000000 max:-min depth:depth - 1];
   } else {
       score = [self calcH]; 
   }
   [self.board applyChanges:undo];
}

- (moveType)findBestMove
{
   NSMutableArray *legalMoves = [self findLegalMoves];
   NSMutableArray *bestMoves = [[NSMutableArray alloc] init];
   int min = -1000000000;
   int max = 1000000000;
   moveType move;
   for ( NSValue *moveIt in legalMoves ) {
      [moveIt getValue:&move];
      float score = [self scoreMove:move min:min max:max depth:depth];
      // Here i have some conditions to decide current move is best or not
   }
   // and pick random move from best moves and assign it to move variable
   return move;
}    

@end 
```

如果合法移动的数量像 3 或更多（通过递归搜索它会增长），则该算法的运行速度非常慢。

这是我的第一次 Objective-C 体验。以下是我对如何提高性能的猜测：

1.  删除递归（但我没有看到其他解决方案）
2.  使用多线程（如何？）
3.  可以使用一些ai库吗？

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:08:35.170

在自然适合递归的算法中抛弃递归并不是一个好主意。相反，您需要[*记住*](http://en.wikipedia.org/wiki/Memoization)您的递归解决方案。这种常见的技巧将具有常见子问题的递归解决方案加速了几个数量级。

考虑这两个动作序列：

```
x:(1,1) o:(2,1) x:(1,0) o:(2,0) 
```

和

```
x:(1,0) o:(2,0) x:(1,1) o:(2,1) 
```

序列不同，但它们到达相同的最终状态：

```
|   | x | o
------------
|   | x | o 
```

这是缓慢的根本原因：**当您的程序第二次到达重复状态时，它会准确地评估位置，就好像它是第一次看到它一样**。这很浪费：具有三步前瞻的相同位置将被评估四次；使用四步前瞻，它们将被评估八次，依此类推。这会导致慢速与 成比例`2^N`，其中`N`是您的前瞻深度。

解决这个问题需要添加一个查找表。给定游戏状态，此表将为您或对手提供得分，如果之前已计算过此类得分。您的递归函数将构建一个位置键，并尝试在分数表中查找。如果答案在那里，它将立即返回。否则，您的函数将构造答案，并将其存储在位置键中。下次通过不同系列的动作出现相同的位置时，答案将被重复使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:18:11.163

您可能想尝试[Alpha-beta pruning](http://en.wikipedia.org/wiki/Alpha-beta_pruning "α-β修剪")。您的游戏可能具有较高的分支因子，在这种情况下，您需要避免搜索不会影响结果的区域。

您还可以将搜索限制在一定深度。选择一个可以检索到有效动作但不会花费太长时间的深度。

# .net - 在 umbraco 中检索 xslt 文件中的文档类型

> ID：13727018
> 
> 赞同：0
> 
> 时间：2012-12-05T15:46:33.420
> 
> 标签：.net, xslt, umbraco

对 Umbraco 和 .net 来说非常新，在将我的第一个站点放在一起时进展顺利。但是，我遇到了一些障碍，我设置了一个名为 Testimonial Article 的文档类型，我想在 XSLT 文件中检索并循环访问它。我已经设置了一个链接到这个 XSLT 文件的宏，并且我已经创建并发布了一篇推荐文章 - 但似乎没有结果。

我假设我试图在 XSLT 文件中错误地访问文档类型？

在 Testimonials.xslt 中，非常基本：

```
<xsl:param name="currentPage"/>

<xsl:template match="/">
<xsl:for-each select="umbraco.library:GetXmlAll()//node[@nodeTypeAlias = 'TestimonialArticle']" >
    <p>Result</p>
</xsl:for-each>

</xsl:template> 
```

我创建了一个文档类型为推荐文章的推荐：

![在此处输入图像描述](../Images/2460f6d658afac2a102f819960bde459.png)

这是我的文档类型：

![在此处输入图像描述](../Images/36fa11a1c92fd06a87fe5473684564fe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T16:36:13.060

我相信做`//node`是做它的老方法。我已将其替换为`//*`

做`//TestimonialArticle`也应该工作，而不是`umbraco.library:GetXmlAll()//*[@nodeTypeAlias = 'TestimonialArticle']`

在创建 xpath 时，您可能会发现此软件包很有帮助：http: [//our.umbraco.org/projects/developer-tools/umbraco-xpath-evaluator](http://our.umbraco.org/projects/developer-tools/umbraco-xpath-evaluator)

```
<xsl:param name="currentPage"/>

<xsl:template match="/">
<xsl:for-each select="umbraco.library:GetXmlAll()//*[@nodeTypeAlias = 'TestimonialArticle']" >
    <p>Result</p>
</xsl:for-each>

</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:38:56.810

使用 XSLT，您通常会从某个“referencePoint”开始——在 Umbraco 中，这通常是 currentPage 变量，然后从那里开始——（伪代码）：“currentpage - children - where documentType is ..”等

看看这里： http: [//our.umbraco.org/wiki/reference/xslt/the-basics](http://our.umbraco.org/wiki/reference/xslt/the-basics)

# c# - 显示与我的接受不同的输出

> ID：13727022
> 
> 赞同：0
> 
> 时间：2012-12-05T15:46:42.347
> 
> 标签：c#, console-application

干草我什至不知道这个问题是否曾经问过，但我的问题如下。
在我的 c# 控制台应用程序中，我声明了一个变量**i**，并将其赋值为 **int i = 0**，现在我想将 i 增加 2，显然我可以使用以下 cede。

```
int i = o;
i += 2;
Console.WriteLine(i); 
Console.ReadLine(); 
//OUTPUT WILL BE 2 
```

但这是我的替代解决方案。由于我的懒惰行为，我拒绝使用此代码，并且我使用了以下代码。

```
int i = 0;
i += i++;
Console.WriteLine(i);
Console.ReadLine(); 
```

在上面的代码中，我接受了**FIRST** i++ 将增加一，然后它将再次增加**i+=i**但这件事不会发生。！！！
我不知道为什么会发生这种情况，可能是我做错了什么或一些编译问题。？？？？？？谁能告诉我为什么会这样？？？？ **我只想知道为什么代码 2 不起作用？那里发生了什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:52:07.000

i++ 返回 i (0) 的值，然后加 1。 i++ 称为**post-increment**。

你所追求的是++i，它会先加一，然后返回增加的数字。

（有关增量运算符的详细信息，请参阅[http://msdn.microsoft.com/en-us/library/aa691363(v=vs.71).aspx ）](http://msdn.microsoft.com/en-us/library/aa691363(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:50:46.150

`i`需要从 1 开始才能完成这项工作。

```
int i = 1; 
```

编辑：：

```
int i = 0;
i += i++; 
```

您上面的代码表示以下内容：

`i + 0`然后加一个

如果你使用`i += ++i;`，那么你会得到`i + 1`它预先处理了增量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:56:14.537

你的代码在做什么：

*   评估“i++”。“i++”的值是`value of i before the increment`发生的。
*   作为“i++”评估的一部分，`i is incremented by one`. 现在 i 的值为 1；
*   分配被执行。i 被赋值为“i++”，即 i`before`的增量值——即 0。

也就是说，“i = i++”大致翻译为

```
int oldValue = i; 
i = i + 1 
//is the same thing as 
i = oldValue; 
```

`post-increment`运算符在执行 i++ 后递增整数“i”的值

供您参考：

```
 i++ will increment the value of i, but return the pre-incremented value.
 ++i will increment the value of i, and then return the incremented value. 
```

所以进行 2 步增量的最佳方法是这样的：

```
i +=2 
```

# jquery - 使用带有选择框的 jQuery 显示/隐藏 Div

> ID：13727023
> 
> 赞同：3
> 
> 时间：2012-12-05T15:46:42.593
> 
> 标签：jquery, html, select, hide, show

我是 jQuery 新手，我正在尝试制作一个表单，该表单将根据用户从下拉选择框中选择的内容显示和隐藏选项。我在这里搜索过，但还没有找到适合我的解决方案。我找到了一个基本上做了我想要的教程，但它似乎只适用于选择框。任何帮助表示赞赏。

这是我正在使用的 HTML 代码。

```
$(document).ready(function(){
    $("#emeorg").change(function(){
    switch($(this).val()){
        case "add":
            $("#test1").slideDown("slow");
            $("#changebox select:not(#emeorg, #test1)").slideUp("slow");
        break;
        case "edit":
            $("#test2").slideDown("slow");
            $("#changebox select:not(#emeorg, #edithidden)").slideUp("slow");
        break;
        case "remove":
            $("#test3").slideDown("slow");
            $("#changebox select:not(#emeorg, #removehidden)").slideUp("slow");
        break;
    }
});
}); 
```

这是我正在使用的 HTML 代码。

```
<div id="changebox">
<fieldset>
<legend><strong>Emergency Organization Information</strong></legend>
<div id="prompt">Select Action:</div><div id="answer"><select id="emeorg" name="emeorg">
        <option value="add">Add New Org</option>
        <option value="edit">Edit Existing Org</option>
        <option value="remove">Remove Existing Org</option>
        </select></div>
<div id="edithidden" style="display:none;">
<div id="prompt">Section to Edit:</div>
<div id="answer">
<select id="test2">
    <option>Section to Edit</option>
</select>
</div>
</div>
<div id="removehidden">
<div id="prompt">Section to Remove</div>
<div id="answer">
<select id="test3">
    <option>Section to Remove</option>
</select>
</div>
</div>
<div id="prompt">Organization Name:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div>
<div id="prompt">Organization Phone Number:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div>
<div id="prompt">Orginization Location:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div>
<div id="test3"><div id="prompt">Orginization Location Remove:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div></div>
<div id="prompt"><input type="submit" id="maininfoupdate" value="Update Information" /></div>
</fieldset>
</div> 
```

我只是无法弄清楚为什么 div 不会显示。测试我唯一具有内联样式的是要显示的edithidden：none;。对那个没有影响，但是 removehidden 只显示选择框一秒钟然后它向上滑动。

有任何想法吗？

提前致谢。

***编辑***

修改后的 jQuery 代码：

```
$(document).ready(function(){
$("#emeorg").change(function(){
    switch($(this).val()){
        case "add":
            $("#changebox select:not(#emeorg, #test1)").slideUp("slow");
        break;
        case "edit":
            $("#edithidden").slideDown("slow");
            $("#changebox select:not(#emeorg, #edithidden)").slideUp("slow");
        break;
        case "remove":
            $("#removehidden").slideDown("slow");
            $("#changebox select:not(#emeorg, #removehidden)").slideUp("slow");
        break;
    }
});
}); 
```

修改后的 HTML 代码：

```
<div id="changebox">
<fieldset>
<legend><strong>Emergency Organization Information</strong></legend>
<div id="prompt">Select Action:</div><div id="answer"><select id="emeorg" name="emeorg">
        <option value="add">Add New Org</option>
        <option value="edit">Edit Existing Org</option>
        <option value="remove">Remove Existing Org</option>
        </select></div>
<div id="edithidden" style="display:none;">
<div id="prompt">Section to Edit:</div>
<div id="answer">
<select id="editcontent">
    <option>Section to Edit</option>
</select>
</div>
</div>
<div id="removehidden" style="display:none;">
<div id="prompt">Section to Remove</div>
<div id="answer">
<select id="removecontent">
    <option>Section to Remove</option>
</select>
</div>
</div>
<div id="prompt">Organization Name:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div>
<div id="prompt">Organization Phone Number:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div>
<div id="prompt">Orginization Location:</div><div id="answer"><input type="text" name="companyname" id="companyname" /></div>
<div id="prompt"><input type="submit" id="maininfoupdate" value="Update Information" /></div>
</fieldset>
</div> 
```

现在，当我选择编辑部分时，edithidden 向下滑动，但没有出现选择框。当我将它改回添加时，它不会隐藏编辑滑落的垃圾。我想至少正在取得一些进展。再次感谢您迄今为止的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:56:36.840

该`.slideDown()`方法对匹配元素的高度进行动画处理。这会导致页面的下部向下滑动，为显示的项目让路。

我没有看到任何东西可以告诉我们你一开始是如何隐藏这些元素的。简单地使用`.show()`并且`.hide()`应该工作。

# git - 一个 GIT 命令来统治它们（gacp：git-add-commit-push）

> ID：13727029
> 
> 赞同：4
> 
> 时间：2012-12-05T15:47:08.413
> 
> 标签：git, bash, terminal, command, alias

我真的很喜欢一个专门的 git alias / bash 函数，它可以执行以下操作。

```
git add -A
git commit -m "$MESSAGE"
git push origin master 
```

全部使用一个命令。

```
gacp
> My message
CONTENTS OF COMMIT
CONTENTS OF PUSH 
```

这可以做到吗？有人可以分享一些示例代码吗？是否有可以做到这一点的本机 git 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:49:50.237

如果你在 linux 上，只需编写一个 shell 脚本或创建一个别名

例如。

```
#!/usr/bin/sh

set -x  # Output executed commands
set -e  # Make script fail as soon as one command fails

read MESSAGE

git add -A
git commit -m "$MESSAGE"
git push origin master 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-02T14:03:45.317

在我的 Windows 机器上。我设置了这个 bashrc 别名以使整个过程更简单。

*   创建/定位您的 .bashrc - [参考堆栈溢出线程](https://stackoverflow.com/questions/6883760/git-for-windows-bashrc-or-equivalent-config-files-for-git-bash-shell)

*   将以下行添加到文件

    alias gacp='echo "enter commit message :" && read MSG && git add . && git commit -m "$MSG" && git push'

*   重新加载 .bashrc / 关闭并重新打开你的 shell

*   现在您可以使用 gacp 命令完成整个过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:52:50.387

可以使用以下命令启动前两个命令：

```
git commit -a -m "$MESSAGE" 
```

然后，您可以检查其他命令：

```
git pull --rebase 
git rebase -i 
```

**在进行**git push 之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-01T13:32:51.667

参考这里的答案：[git add、commit 和 push 命令合二为一？](https://stackoverflow.com/questions/19595067/git-add-commit-and-push-commands-in-one/41366192#41366192)

你可以试试[gitu](https://www.npmjs.com/package/git-upload)。

第一次（必须安装node js）：

```
npm install -g git-upload 
```

在那之后：

```
gitu COMMIT_MSG 
```

一次发出这三个命令。

好消息是，**当您重新安装系统或想要在不同的计算机上执行此操作时，您不必担心，并且不需要修改文件。** 这也**适用于不同的平台**（不仅是 Linux 和 Mac，还有 Windows），只是你必须安装`npm`和`nodejs`（`git`当然）。

# java - java中的合并排序

> ID：13727030
> 
> 赞同：12
> 
> 时间：2012-12-05T15:47:15.510
> 
> 标签：java, algorithm, sorting, mergesort

我是 Java 新手，并尝试在 Java 中实现合并排序。但是，即使在多次运行程序之后，我得到的不是所需的排序输出，而是与输出相同的用户给定输入。如果有人能帮助我理解这种意外行为，我将不胜感激。

```
import java.io.*;
import java.util.Arrays;

public class MergeSort {

    public static void main(String[] args) throws IOException {
        BufferedReader R = new BufferedReader(new InputStreamReader(System.in));
        int arraySize = Integer.parseInt(R.readLine());
        int[] inputArray = new int[arraySize];
        for (int i = 0; i < arraySize; i++) {
            inputArray[i] = Integer.parseInt(R.readLine());
        }
        mergeSort(inputArray);

        for (int j = 0; j < inputArray.length; j++) {
            System.out.println(inputArray[j]);
        }
    }

    static void mergeSort(int[] A) {
        if (A.length > 1) {
            int q = A.length / 2;
            int[] leftArray = Arrays.copyOfRange(A, 0, q);
            int[] rightArray = Arrays.copyOfRange(A, q + 1, A.length);
            mergeSort(leftArray);
            mergeSort(rightArray);
            A = merge(leftArray, rightArray);
        }
    }

    static int[] merge(int[] l, int[] r) {
        int totElem = l.length + r.length;
        int[] a = new int[totElem];
        int i, li, ri;
        i = li = ri = 0;
        while (i < totElem) {
            if ((li < l.length) && (ri < r.length)) {
                if (l[li] < r[ri]) {
                    a[i] = l[li];
                    i++;
                    li++;
                } else {
                    a[i] = r[ri];
                    i++;
                    ri++;
                }
            } else {
                if (li >= l.length) {
                    while (ri < r.length) {
                        a[i] = r[ri];
                        i++;
                        ri++;
                    }
                }
                if (ri >= r.length) {
                    while (li < l.length) {
                        a[i] = l[li];
                        li++;
                        i++;
                    }
                }
            }
        }
        return a;
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T16:30:39.033

这是您的代码的更正版本：

```
import java.io.*;
import java.util.Arrays;

public class MergeSort {

    public static void main(String[] args) throws IOException{
        BufferedReader R = new BufferedReader(new InputStreamReader(System.in));
        int arraySize = Integer.parseInt(R.readLine());
        int[] inputArray = new int[arraySize];
        for (int i = 0; i < arraySize; i++) {
            inputArray[i] = Integer.parseInt(R.readLine());
        }
        mergeSort(inputArray);

        for (int j = 0; j < inputArray.length; j++) {
            System.out.println(inputArray[j]);
        }

    }

    static void mergeSort(int[] A) {
        if (A.length > 1) {
            int q = A.length/2;

//changed range of leftArray from 0-to-q to 0-to-(q-1)
            int[] leftArray = Arrays.copyOfRange(A, 0, q-1);
//changed range of rightArray from q-to-A.length to q-to-(A.length-1)
            int[] rightArray = Arrays.copyOfRange(A,q,A.length-1);

            mergeSort(leftArray);
            mergeSort(rightArray);

            merge(A,leftArray,rightArray);
        }
    }

    static void merge(int[] a, int[] l, int[] r) {
        int totElem = l.length + r.length;
        //int[] a = new int[totElem];
        int i,li,ri;
        i = li = ri = 0;
        while ( i < totElem) {
            if ((li < l.length) && (ri<r.length)) {
                if (l[li] < r[ri]) {
                    a[i] = l[li];
                    i++;
                    li++;
                }
                else {
                    a[i] = r[ri];
                    i++;
                    ri++;
                }
            }
            else {
                if (li >= l.length) {
                    while (ri < r.length) {
                        a[i] = r[ri];
                        i++;
                        ri++;
                    }
                }
                if (ri >= r.length) {
                    while (li < l.length) {
                        a[i] = l[li];
                        li++;
                        i++;
                    }
                }
            }
        }
        //return a;

    }

} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-05T15:48:51.050

当您重新绑定`A`时`mergeSort()`：

```
 A = merge(leftArray,rightArray); 
```

`inputArray`这在in 中无效`main()`。

您需要返回排序后的数组 from`mergeSort()`类似于从`merge()`.

```
static int[] mergeSort(int[] A) {
    ...
    return A;
} 
```

并在`main()`：

```
 int[] mergedArray = mergeSort(inputArray);

    for (int j = 0; j < mergedArray.length; j++) {
        System.out.println(mergedArray[j]);
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-22T12:54:22.840

问题是 java 是按值传递而不是按引用传递...当您在合并方法中分配给数组 A 时，您正在更改对 A 的引用的副本，而不是对 A 本身的引用。因此，您需要将 A 传递给您的合并方法并对 A 进行结构更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-26T13:24:57.783

```
public class MergeSort{
public static void sort(int[] in){
    if(in.length <2) return; //do not need to sort
    int mid = in.length/2;
    int left[] = new int[mid];
    int right[] = new int[in.length-mid];
    for(int i=0; i<mid; i++){ //copy left
        left[i] = in[i];
    }
    for(int i=0; i<in.length-mid; i++){ //copy right
        right[i] = in[mid+i];
    }
    sort(left);
    sort(right);
    merge(left, right, in);
}

private static void merge(int[] a, int[] b, int[] all){
    int i=0, j=0, k=0;
    while(i<a.length && j<b.length){ //merge back
        if(a[i] < b[j]){
            all[k] = a[i];
            i++;
        }else{
            all[k] = b[j];
            j++;
        }
        k++;
    }
    while(i<a.length){ //left remaining
        all[k++] = a[i++];
    }
    while(j<b.length){ //right remaining
        all[k++] = b[j++];
    }
}

public static void main(String[] args){
    int[] a = {2,3,6,4,9,22,12,1};
    sort(a);    
    for(int j=0; j<a.length; j++){
        System.out.print(a[j] + " ");
    }   
 }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T15:52:57.890

问题出在这里：

```
A = merge(leftArray,rightArray); 
```

现在您的合并数组执行此操作：

```
static int[] merge(int[] l, int[] r) {
    int[] a = new int[totElem];
    // bunch of code
    return a;
} 
```

开始时，A 是对 inputArray 的引用。但是随后您将其重新分配为合并后的任何内容。不幸的是，这并没有触及 main 方法中的 inputArray 。这基本上是说“哦，看看你所做的所有工作......把它扔掉！”

你可以用类似的东西改变它

```
static int[] mergeSort(int[] A) {
    // A = merge... // not this
    return merge... // use this
} 
```

然后在你的主要方法中，你可以做

```
int[] merged = mergeSort(inputArray);
for(int i : merged) System.out.println(i); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-18T03:06:53.173

```
public void sort(int[] randomNumbersArrray)
{
    copy = randomNumbersArrray.clone();
    mergeSort(0 , copy.length - 1);
}

private void mergeSort(int low, int high)
{
    if(low < high)
    {
        int mid = ((low + high) / 2);
        mergeSort(low, mid); //left side
        mergeSort(mid + 1, high); // right side
        merge(low, mid, high); //combine them
    }

}

private void merge(int low, int mid, int high)
{
    int temp[] = new int[high - low + 1];
    int left = low;
    int right = mid + 1;
    int index = 0;

    // compare each item for equality
    while(left <= mid && right <= high)
    {
        if(copy[left] < copy[right])
        {
            temp[index] = copy[left];
            left++;
        }else
        {
            temp[index] = copy[right];
            right++;
        }
        index++;
    }

    // if there is any remaining loop through them
    while(left <= mid || right <= high)
    {
        if( left <= mid)
        {
            temp[index] = copy[left];
            left++;
            index++;
        }else if(right <= high)
        {
                temp[index] = copy[right];
                right++;
                index++;
        }
    }
    // copy back to array
    for(int i = 0; i < temp.length; i++)
    {
        copy[low + i] = temp[i];
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-19T20:17:05.407

```
package Sorting;

public class MergeSort {

private int[] original;
private int len;
public MergeSort(int length){

    len = length;
    original = new int[len];

    original[0]=10;
    original[1]=9;
    original[2]=8;
    original[3]=7;
    original[4]=6;
    original[5]=5;
    original[6]=4;
    original[7]=3;
    original[8]=2;
    original[9]=1;

    int[] aux = new int[len];
    for(int i=0;i<len;++i){
        aux[i]=original[i];
    }

    Sort(aux,0,len);

}

public void Sort(int[] aux,int start, int end){

    int mid = start + (end-start)/2;

    if(start < end){
        Sort(aux, start, mid-1);
        Sort(aux, mid, end);
        Merge(aux, start, mid, end);
    }
}

public void Merge(int[] aux, int start, int mid, int end){// while array passing be careful of shallow and deep copying

    for(int i=start; i<=end; ++i)
        auxilary[i] = original[i];

    int i = start;
    int k = start;
    int j = mid+1;
    while(i < mid && j <end){
        if(aux[i] < aux[j]){
            original[k++] = aux[i++];
        }
        else{
            original[k++] = aux[j++];
        }   
    }
    if(i == mid){
        while(j < end){
            original[k++] = aux[j++];
        }
    }
    if(j == end){
        while(i < mid){
            original[k++] = aux[i++];
        }
    }
}
public void disp(){
    for(int i=0;i<len;++i)
        System.out.print(original[i]+" ");
}
public static void main(String[] args) {

    MergeSort ms = new MergeSort(10);

    ms.disp();

}

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-10T00:41:05.557

```
public class MyMergeSort {

    private int[] array;
    private int[] tempMergArr;
    private int length;

    public static void main(String a[]){

        int[] inputArr = {45,23,11,89,77,98,4,28,65,43};
        MyMergeSort mms = new MyMergeSort();
        mms.sort(inputArr);
        for(int i:inputArr){
            System.out.print(i);
            System.out.print(" ");
        }
    }

    public void sort(int inputArr[]) {
        this.array = inputArr;
        this.length = inputArr.length;
        this.tempMergArr = new int[length];
        doMergeSort(0, length - 1);
    }

    private void doMergeSort(int lowerIndex, int higherIndex) {

        if (lowerIndex < higherIndex) {
            int middle = lowerIndex + (higherIndex - lowerIndex) / 2;
            // Below step sorts the left side of the array
            doMergeSort(lowerIndex, middle);
            // Below step sorts the right side of the array
            doMergeSort(middle + 1, higherIndex);
            // Now merge both sides
            mergeParts(lowerIndex, middle, higherIndex);
        }
    }

    private void mergeParts(int lowerIndex, int middle, int higherIndex) {

        for (int i = lowerIndex; i <= higherIndex; i++) {
            tempMergArr[i] = array[i];
        }
        int i = lowerIndex;
        int j = middle + 1;
        int k = lowerIndex;
        while (i <= middle && j <= higherIndex) {
            if (tempMergArr[i] <= tempMergArr[j]) {
                array[k] = tempMergArr[i];
                i++;
            } else {
                array[k] = tempMergArr[j];
                j++;
            }
            k++;
        }
        while (i <= middle) {
            array[k] = tempMergArr[i];
            k++;
            i++;
        }

    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-18T18:14:36.097

不妨添加我对此的看法：采用两个 int 数组并将它们合并。其中“结果”是大小为 a.length + b.length 的数组

```
public static void merge( int[] a, int[] b, int[] result )
{
  int i = 0, j = 0;

  while ( true )
  {
    if ( i == a.length )
    {
      if ( j == b.length )
        return;

      result[ i + j ] = b[ j ]; 
      j++;
    }
    else if ( j == b.length )
    {
      result[ i + j ] = a[ i ];
      i++;
    }
    else if ( a[ i ] < b[ j ] )
    {
      result[ i + j ] = a[ i ];
      i++;
    }
    else
    {
      result[ i + j ] = b[ j ];
      j++;
    }
  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-11-24T01:51:52.193

我有一个并行版本的合并排序。我受益于 RecursiveAction 和 ForkJoinPool。请注意，工人的数量可以设置为常数。但是，我将其设置为机器上可用处理器的数量。

```
import java.util.Arrays;
import java.util.concurrent.ForkJoinPool;
import java.util.concurrent.RecursiveAction;

public class ParallelMergeSorter {

    private int[] array;

    public ParallelMergeSorter(int[] array) {
        this.array = array;
    }

    public int[] sort() {
        int numWorkers = Runtime.getRuntime().availableProcessors(); // Get number of available processors
        ForkJoinPool pool = new ForkJoinPool(numWorkers);
        pool.invoke(new ParallelWorker(0, array.length - 1));
        return array;
    }

    private class ParallelWorker extends RecursiveAction {
        private int left, right;

        public ParallelWorker(int left, int right) {
            this.left = left;
            this.right = right;
        }

        protected void compute() {
            if (left < right) {
                int mid = (left + right) / 2;
                ParallelWorker leftWorker = new ParallelWorker(left, mid);
                ParallelWorker rightWorker = new ParallelWorker(mid + 1, right);
                invokeAll(leftWorker, rightWorker);
                merge(left, mid, right);
            }
        }

        private void merge(int left, int mid, int right) {
            int[] leftTempArray = Arrays.copyOfRange(array, left, mid + 1);
            int[] rightTempArray = Arrays.copyOfRange(array, mid + 1, right + 1);
            int leftTempIndex = 0, rightTempIndex = 0, mergeIndex = left;
            while (leftTempIndex < mid - left + 1 || rightTempIndex < right - mid) {
                if (leftTempIndex < mid - left + 1 && rightTempIndex < right - mid) {
                    if (leftTempArray[leftTempIndex] <= rightTempArray[rightTempIndex]) {
                        array[mergeIndex] = leftTempArray[leftTempIndex];
                        leftTempIndex++;
                    } else {
                        array[mergeIndex] = rightTempArray[rightTempIndex];
                        rightTempIndex++;
                    }
                } else if (leftTempIndex < mid - left + 1) {
                    array[mergeIndex] = leftTempArray[leftTempIndex];
                    leftTempIndex++;
                } else if (rightTempIndex < right - mid) {
                    array[mergeIndex] = rightTempArray[rightTempIndex];
                    rightTempIndex++;
                }
                mergeIndex++;
            }
        }
    }

} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-09-25T23:47:25.190

上面的代码有点混乱 千万不要使用名称为：“k”、“j”、“m”、...这使得代码很混乱

以更简单的方式遵循代码...

```
import java.util.Arrays;

public class MergeSort {

    public static void main(String[] args) {
        Integer[] itens = {2,6,4,9,1,3,8,7,0};

        Integer[] tmp = new Integer[itens.length];
        int left = 0;
        int right = itens.length - 1;

        mergeSort(itens, tmp, left, right);

        System.out.println(Arrays.toString(itens));
    }

    private static void mergeSort(Integer[] itens, Integer[] tmpArray, int left, int right) {

        if(itens == null || itens.length == 0 || left >= right){
            return;
        }

        int midle = (left + right) / 2;

        mergeSort(itens, tmpArray, left, midle);
        mergeSort(itens, tmpArray, midle + 1, right);

        merge(itens, tmpArray, left, midle + 1, right);
    }

    private static void merge(Integer[] itens, Integer[] tmpArray, int left, int right, int rightEnd) {
        int leftEnd = right - 1;
        int tmpIndex = left;

        while (left <= leftEnd && right <= rightEnd){
            if (itens[left] < itens[right] ){
                tmpArray[tmpIndex++] = itens[left++];
            } else {
                tmpArray[tmpIndex++] = itens[right++];
            }
        }

        while (left <= leftEnd) { // Copy rest of LEFT half
            tmpArray[tmpIndex++] = itens[left++];
        }
        while (right <= rightEnd) { // Copy rest of RIGHT half
            tmpArray[tmpIndex++] = itens[right++];
        }
        while(rightEnd >= 0){ // Copy TEMP back
            itens[rightEnd] = tmpArray[rightEnd--];
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-21T06:56:15.847

非常简单易懂

```
static void sort(char[] data) {
    int length = data.length;
    if (length < 2)
        return;
    int mid = length / 2;
    char[] left = new char[mid];
    char[] right = new char[length - mid];

    for(int i=0;i<mid;i++) {
        left[i]=data[i];
    }

    for(int i=0,j=mid;j<length;i++,j++) {
        right[i]=data[j];
    }

    sort(left);
    sort(right);
    merge(left, right, data);

}

static void merge(char[] left, char[] right, char[] og) {
    int i = 0, j = 0, k = 0;
    while(i < left.length && j < right.length) {
        if (left[i] < right[j]) {
            og[k++] = left[i++];
        } else {
            og[k++] = right[j++];
        }
    }
    while (i < left.length) {
        og[k++] = left[i++];
    }
    while (j < right.length) {
        og[k++] = right[j++];
    }

} 
```

# javascript - 如何覆盖 Uint32Array.length 属性保留对原始属性的访问？

> ID：13727031
> 
> 赞同：0
> 
> 时间：2012-12-05T15:47:15.967
> 
> 标签：javascript, arrays, overriding

我想要一个基于 Uint32Array 的数组。数组的长度应该随着元素数量的增加而增加。同时我希望“长度”属性返回元素的数量，而不是底层数组的大小。例如：

```
var a = new myArray();
a.length; // returns 0, the size of underlying array is 10
a.add(0);
a.length; // returns 1, the size of underlying array is 10
...
a.add(9);
a.length; // returns 10, the size of underlying array is 10
a.add(10);
a.length; // returns 11, the size of underlying array is 20 
```

下面的代码显示了我是如何尝试实现它的。唯一的障碍是访问原始数组的“长度”属性。代码中的“父”字仅用于示例。如果我用“this.prototype”替换它，它会在未定义中显示“this.prototype.length”。

有可能解决它吗？

```
var myArray = function() {
this._length = 0;
return this;

// defining the getter for "length" property
Object.defineProperty(this, "length", {
    get: function() {
      return this._length;
    },
};

myArray.prototype = new Uint32Array(myArray.increment);
myArray.increment = 10;
myArray.add = function(val) {
   if (this.length <= parent.length) {
      _a = new Uint32Array(parent.length + myArray.increment);
      _a.set(this);
      this = _a;
    };
   this[this.length++] = val;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:04:12.147

这就是我要做的：

```
function MyArray(increment) {
    var array = new Uint32Array(increment);
    var length = 0;

    Object.defineProperty(this, "length", {
        get: function () {
            return length;
        }
    });

    this.add = function (value) {
        if (length === array.length) {
            var ext = new Uint32Array(length + increment);
            ext.set(array);
            array = ext;
        }

        var index = length++;
        array[index] = value;

        Object.defineProperty(this, index, {
            get: function () {
                return array[index];
            },
            set: function (value) {
                array[index] = value;
            }
        });
    };
} 
```

然后按如下方式创建数组：

```
var a = new MyArray(10);
a.length; // returns 0, the size of underlying array is 10
a.add(0);
a.length; // returns 1, the size of underlying array is 10
...
a.add(9);
a.length; // returns 10, the size of underlying array is 10
a.add(10);
a.length; // returns 11, the size of underlying array is 20 
```

您在 JavaScript 中的继承是错误的。[在这里](https://stackoverflow.com/a/8096017/783743 "JavaScript继承和构造函数属性 - 代码日志")阅读。

你可以在这里看到演示：http: [//jsfiddle.net/dWKTX/1/](http://jsfiddle.net/dWKTX/1/)

# java - 将 Json 转换为特定的类

> ID：13727034
> 
> 赞同：1
> 
> 时间：2012-12-05T15:47:29.463
> 
> 标签：java, android, json, wikipedia

我正在尝试从维基百科检索文本以在 Android 应用程序上使用。我正在使用 Java。我要做的第一件事是从特定文章中检索部分，将它们显示给用户，当用户单击一个部分时，通过另一个 http 请求获取部分文本。

所以，这两个请求是：

> [http://en.wikipedia.org/w/api.php?format=json&action=parse&page=Valencia_Cathedral&prop=sections](http://en.wikipedia.org/w/api.php?format=json&action=parse&page=Valencia_Cathedral&prop=sections)

然后这个：

> [http://en.wikipedia.org/w/api.php?format=json&action=parse&page=Valencia_Cathedral&prop=text§ion=1](http://en.wikipedia.org/w/api.php?format=json&action=parse&page=Valencia_Cathedral&prop=text&section=1)

我的问题是：我应该创建什么样的 java 对象来存储信息，然后使用 将其转换为这些类`.fromJSON()`？

感谢@NathanZ，我创建了这两个类：

```
public class WikiResponseSections {
    String title;
    List<Section> sections;
}

public class Section {
        int toclevel;
        String level;
        String line;
        String number;
        String index;
        String fromtitle;
        int byteoffset;
        String anchor;
} 
```

但是，当我通过 Gson 将 HTTP 响应转换为这些对象并尝试读取字段“title”的值时，会触发一个错误：JavaNullPointerException。这是我的转换代码：

```
InputStream stream = null;
try {
    stream = entity.getContent();
} catch (IllegalStateException e) {
    Log.e("Stream","ERROR illegalstateexception");
} catch (IOException e) {
    Log.e("Stream","ERROR exception");
}
reader = new BufferedReader(new InputStreamReader(stream));
GsonBuilder bldr = new GsonBuilder();
Gson gson = bldr.create();
WikiResponse = gson.fromJson(reader, WikiResponseSections.class);
if (WikiResponse != null){
    Log.i("WikiResponse",WikiResponse.getTitle()); //The error triggers HERE
    publishProgress();
}
else
    Log.i("WikiResponse","NULL");
} 
```

再次感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:53:04.960

您可以使用[Google 的 Gson](http://code.google.com/p/google-gson/)库。它是这样工作的：

```
InputStream source = ...; // your code to get the Json from a url
Gson gson = new Gson();
Reader reader = new InputStreamReader(source);
MyResponse response = gson.fromJson(reader, MyResponse.class); 
```

`MyResponse`你的对象在哪里。创建时`MyResponse`，为您的字段提供与 Json 字段相同的名称和类型

MyResponse 类可以如下：

```
public class MyResponse{
    String title;
    ArrayList<sections>;
}

public class sections{
    int toclevel;
    String level;
    String line;
    String number;
    String fromtitle;
    long byteoffset;
    String anchor;
}

public class WikiResponseParse{
    Parse parse;
    public class Parse{
        String title, text;
    }
} 
```

如果您不能使用 json 字段名称，因为它不符合 Java：

添加以下导入：

```
import com.google.gson.annotations.SerializedName; 
```

在你的课堂上：

```
@SerializedName("*")
public String star; 
```

# regex - 在 Notepad++ 中使用正则表达式将科学记数法转换为文本或整数

> ID：13727038
> 
> 赞同：2
> 
> 时间：2012-12-05T15:47:35.483
> 
> 标签：regex, notepad++, scientific-notation

我正在寻找将科学计数法数字转换为完整整数。

例如：

```
8.18234E+11 => 818234011668 
```

Excel 在 csv 中重新格式化了我所有的 upc 代码，[这个](https://superuser.com/questions/37975/how-can-you-make-excel-2007-stop-formatting-large-numbers-as-scientific-notation)解决方案对我不起作用。

我在 Notepad++ 中打开了我的 csv，并且很想使用正则表达式查找和替换来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:58:18.023

损坏已经造成，无法从 CSV 文件中恢复。`8.18234E+11`可以是从`818233500000`到 的任何东西* `818234499999`。

为防止 Excel 舍入大数字，您需要将它们存储为文本。如果将单元格格式设置为文本，则此后插入的任何值都应自动解释为文本。在 OpenOffice Calc（我没有 MS Excel）中，您还可以在数值前加上前缀，`'`以将其解释为文本，无论单元格格式如何。

正确的值有可能存储在原始 XLS（或 XSLX 或 ODS 或实时 Excel 会话或...）文件中。如果没有，那么您将不得不再次输入数据。如果数据在那里，您需要将其存储为文本或增加导出的 CSV 中的有效位数。如果您只有导出的数据，那么您就不走运了。

*UPC 有一个校验位，因此 1 000 000 个代码中只有 100 000 个实际上是有效的 UPC 代码。

# ios - 抓取特定 ABPerson 的图像时崩溃

> ID：13727043
> 
> 赞同：3
> 
> 时间：2012-12-05T15:47:52.070
> 
> 标签：ios, json, abaddressbook, abperson

我正在从他们的 iOS 通讯簿/Contacts.app 中的用户联系人中获取图像。并将它们放入字典中以 JSON 格式上传。

我收到以下错误：

```
2012-12-05 10:38:01.286 ContactsApp[6247:713f] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Invalid type in JSON write (__NSCFData)'
*** First throw call stack:
(0x2de6012 0x286ce7e 0x2de5deb 0x20926fe 0x2096b21 0x2dd3cdf 0x2dd387d 0x2dd37c5 0x20966fa 0x209262d 0x2096b21 0x2dd3cdf 0x2dd387d 0x2dd37c5 0x20966fa 0x209262d 0x20969af 0x2ddfe7c 0x2ddfa16 0x2ddf925 0x20968b8 0x2092679 0x2096b21 0x2dd3cdf 0x2dd387d 0x2dd37c5 0x20966fa 0x209262d 0x20923bd 0x209579c 0x1cad5 0x67475 0x66a87 0x14399cd 0x746008f 0x3dc253f 0x3dd4014 0x3dc52e8 0x3dc5450 0x90e36e12 0x90e1ecca)
libc++abi.dylib: terminate called throwing an exception 
```

我使用了以下代码：

```
if (ABPersonHasImageData(addressBookContact)) {
    NSMutableDictionary *imageDictionary = [NSMutableDictionary dictionary];
    NSData *thumbnailImageData = (__bridge NSData *)ABPersonCopyImageDataWithFormat(addressBookContact, kABPersonImageFormatThumbnail);
    NSData *originalImageData = (__bridge NSData *)ABPersonCopyImageDataWithFormat(addressBookContact, kABPersonImageFormatOriginalSize);
    if (thumbnailImageData) [imageDictionary setObject:thumbnailImageData forKey:@"thumbnailImage"];
    if (originalImageData) [imageDictionary setObject:originalImageData forKey:@"originalImage"];
    [contactDictionary setObject:imageDictionary forKey:@"image"];
} 
```

当我尝试将数组放入此请求时发生错误：

```
[addressBookArray addObject:contactDictionary];
if ([addressBookArray count] % 15 == 0) {
    // I'm using AFNetworking
    [[APIClient sharedClient] requestWithMethod:@"POST" path:@"cmd/addContact" parameters:@{ @"addressBookEntries" : addressBookArray }];
    [addressBookArray removeAllObjects];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:23:48.397

您的问题是您试图将 NSData 对象放入 JSON 对象中。不是将图像数据添加到 imageDictionary，而是将图像的 base64 编码添加到 imageDictionary，应该没有问题。

Matt Gallagher 在这里有一个方便的类来处理 base64：http: [//www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html](http://www.cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:24:34.417

看起来 AFNetworking 正在尝试将您的参数解析为 JSON，但您正在向其传递 NSData。尽管您传递了一个有效的 NSDictionary，但这些嵌套类型需要是其他 NSDictionaries、NSArrays、NSStrings 和 NSNumbers。如果要附加图像 NSData，则必须使用不同的内容类型并附加图像数据。

# c - 在 C 中使用 while() 测试不等式

> ID：13727049
> 
> 赞同：0
> 
> 时间：2012-12-05T15:48:04.077
> 
> 标签：c, while-loop, equality, inequality

我是 C 编程新手。我想使用一个while循环来检查'网格'矩阵的一行中的数字500.00，如果它不存在则转到下一行。为此我编写了这个程序，但不幸的是它没有显示任何结果，我不知道问题出在哪里。

我写的程序在这里：

```
for(i=0;i<12;i++){
    c=0;
    for (j=0;j<26;j++){
        while(grid[i][j]!=500.00 && c<=ncmax );
        c++;
    }
    printf("%d \n \n",c);
} 
```

我将while循环更改为

```
 while(&grid[i][j]!=500.00  && c<=ncmax ); 
```

但它显示了这些错误

```
error C2440: '!=' : cannot convert from 'double' to 'float *'
error C2446: '!=' : no conversion from 'double' to 'float *' 
```

这个问题我该怎么办？一般来说，我可以像这样使用while循环吗？如果您需要查看整个程序，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:49:57.063

你有一个什么都不做的while循环，我怀疑它也是多余的。仔细看；注意它是如何检查某些东西的，但是如果没有找到那个东西，它就不会做任何事情来改变事态。还要看看你的分号；这基本上是你现在循环的主体。

我怀疑你真的想把检查放在你的第二个 for 语句中，或者把那个 for 语句变成一个 while 循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:58:21.110

我不明白你的时间。你不想要一个 if 吗？

```
for(i=0;i<12;i++) {
    c=0;
    for (j=0;j<26;j++) {
        if(grid[i][j]!=500.00  && c<=ncmax) {
            c++;
        } else {
            printf("%d \n \n",c);
        }
    }
} 
```

但我认为你可以选择更简单的东西：

```
for(i=0;i<12;i++) {
    for (j=0;j<26;j++) {
        if(grid[i][j]==500.00) {
            printf("%d %d \n \n",i , j);
        }
    }
} 
```

编辑：我刚刚注意到在第一个程序中，`c`并且`j`具有相同的值。您可以简化为：

```
for(i=0;i<12;i++) {
    c=0;
    while(c<26 && c<=ncmax && grid[i][c]!=500.00) {
        c++;
    }
    printf("%d \n \n",c);
} 
```

输出应该是 的列表`c`。它等于`26`或或行`ncmax+1`中值的索引的最小值。`500.00``i`

PS：如果你知道 的值`ncmax`，你可以简化条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:15:37.070

让我们仔细看看你的代码*在*做什么，然后我认为你*想要*它做什么。我更改了空格和缩进以使其更具可读性。

```
for (i = 0; i < 12; i++) { /* each column */
    c = 0;
    for (j = 0; j < 26; j++) { /* each row in this column */
        while(grid[i][j] != 500.00 && c <= ncmax)
            ; /* this is the body of the while loop: do nothing */
        c++;
    }
    printf("%d \n \n",c);
} 
```

由于while循环的主体什么都不做，那么如果进入循环时两个条件都为真，就会一直循环下去。您可能已经发现了这一点。

如果您的目标是计算每列中等于 500.0 的值的数量，但在达到最大数量时停止计数，请考虑以下方法。

```
for (i = 0; i < 12; i++) { /* each column */
    c = 0;
    for (j = 0; j < 26 && c <= ncmax; j++) { /* each row */
        if (grid[i][j] == 500.0)
            c++;
    }
    print("%d\n\n", c);
} 
```

顺便说一句，您需要小心比较浮点数或双精度数是否相等。最好使用亲密关系。

```
if (abs(grid[i][j] - 500.0) < EPSILON)
    c++; /* value is "close enough" */ 
```

**编辑**修复轻微的缩进错字。填充最后一个代码块的主体。

**编辑#2**如果目标是找到 500.0 在每列中出现的位置，则可以将内部循环更改为 while 循环，如下所示，同时消除变量。

```
for (i = 0; i < 12; i++) { /* each column */
    j = 0;

    while (j < 26 && grid[i][j] != 500.0)
        j++; /* each row this column, or until 500.0 */

    if (j == 26)
        print("ERROR: sentinel missing in column %d\n", i)
    else
        print("%d\n\n", j);
} 
```

# java - 插件和依赖项无法下载

> ID：13727050
> 
> 赞同：0
> 
> 时间：2012-12-05T15:48:06.907
> 
> 标签：java, maven, struts2, dependencies

从命令行生成 Maven Struts 2 项目后，我的下一个任务是使用以下命令测试它是否在浏览器中工作：

```
mvn jetty:run 
```

它运行并且看起来它正在获取所有依赖项和插件，但它失败了。报告的错误如下：

```
Failed to execute goal on project myStruts: Could not resolve dependencies for project 
```

[在此处](https://cwiki.apache.org/confluence/display/MAVEN/DependencyResolutionException)的帮助页面上，它表明**POM 文件缺少托管工件的存储库的声明。**但我检查了 POM，在这方面似乎很好：

```
<repositories>
    <repository>
        <id>appfuse-snapshots</id>
        <url>http://oss.sonatype.org/content/repositories/appfuse-snapshots</url>
        <releases>
            <enabled>false</enabled>
        </releases>
        <snapshots>
            <enabled>true</enabled>
        </snapshots>
    </repository>
</repositories> 
```

那么这里发生了什么？

# php - WordPress 搜索结果按顺序排列

> ID：13727054
> 
> 赞同：0
> 
> 时间：2012-12-05T15:48:16.183
> 
> 标签：php, search, wordpress, e-commerce, shopp

我的一个客户网站 www.kevinsplants.co.uk 没有按字母顺序显示搜索结果，我该如何按字母顺序对结果进行排序？

我们正在使用 Shopp 插件，我相信它是生成结果的插件！

干杯，布拉德

```
case "orderby-list":
            if (isset($Shopp->Category->controls)) return false;
            if (isset($Shopp->Category->smart)) return false;
            $menuoptions = Category::sortoptions();
            $title = "";
            $string = "";
            $default = $Shopp->Settings->get('default_product_order');
            if (empty($default)) $default = "title";

            if (isset($options['default'])) $default = $options['default'];
            if (isset($options['title'])) $title = $options['title'];

            if (value_is_true($options['dropdown'])) {
                if (isset($Shopp->Cart->data->Category['orderby'])) 
                    $default = $Shopp->Cart->data->Category['orderby'];
                $string .= $title;
                $string .= '<form action="'.esc_url($_SERVER['REQUEST_URI']).'" method="get" id="shopp-'.$Shopp->Category->slug.'-orderby-menu">';
                if (!SHOPP_PERMALINKS) {
                    foreach ($_GET as $key => $value)
                        if ($key != 'shopp_orderby') $string .= '<input type="hidden" name="'.$key.'" value="'.$value.'" />';
                }
                $string .= '<select name="shopp_orderby" class="shopp-orderby-menu">';
                $string .= menuoptions($menuoptions,$default,true);
                $string .= '</select>';
                $string .= '</form>';
                $string .= '<script type="text/javascript">';
                $string .= "jQuery('#shopp-".$Shopp->Category->slug."-orderby-menu select.shopp-orderby-menu').change(function () { this.form.submit(); });";
                $string .= '</script>';
            } else {
                if (strpos($_SERVER['REQUEST_URI'],"?") !== false) 
                    list($link,$query) = explode("\?",$_SERVER['REQUEST_URI']);
                $query = $_GET;
                unset($query['shopp_orderby']);
                $query = http_build_query($query);
                if (!empty($query)) $query .= '&';

                foreach($menuoptions as $value => $option) {
                    $label = $option;
                    $href = esc_url($link.'?'.$query.'shopp_orderby='.$value);
                    $string .= '<li><a href="'.$href.'">'.$label.'</a></li>';
                }

            }
            return $string;
            break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:21:05.903

您需要编辑搜索页面的模板文件并添加搜索查询参数`orderby title`，而不是按发布时间的默认排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:51:40.693

[http://wordpress.org/extend/plugins/sort-searchresult-by-title/](http://wordpress.org/extend/plugins/sort-searchresult-by-title/)

这是一个插件，似乎可以做你想做的事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T10:46:01.443

编辑核心代码不是一个好主意。幸运的是你没有必要。您可以编辑/创建自己的模板文件 collection-search.php 并以任何您想要的方式设置它的样式。

[这里](https://shopplugin.net/workshopp/shopp-content-templates-visual-guide/)有更多关于模板文件的信息。

# django - 在 django 中查询有孩子的父母

> ID：13727055
> 
> 赞同：1
> 
> 时间：2012-12-05T15:48:17.260
> 
> 标签：django, django-queryset

所以，我在以下情况下苦苦挣扎：

考虑模型：

```
class A(models.Model):
    foo = models.IntegerField(default=0)

class B(models.Model):
    a_models = models.ForeignKey('A', related_name='b_models')
    bar = models.IntegerField(default=0)

class bChild(B):
    bla = models.IntegerField(default=0) 
```

如果我有一个 A 的实例，a_instance，并且我想检索与它有关系的 B 类的所有实例，我可以使用

```
all_b_models = a_instance.b_models.all() 
```

我的问题是：如果我只想检索也有 bChilds 的那些怎么办：

```
all_bChild_models = a_instance.b_models.filter(???) 
```

我应该在“？？？”中输入什么？

我没有找到任何文档。我认为有效的一件事是使用：

```
??? = pk__in=bChild.objects.all().values_list('pk') 
```

但是，由于 django 为多表继承创建了隐式向后关系，我想知道是否有更简单的查询。

谢谢，豪尔赫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:30:01.987

嗯，我自己想通了。

显然，如果模型没有孩子，django 认为 pk 为空。

因此，可以使用：

```
all_bChild_models = a_instance.b_models.filter(bchild__pk__isnull=False) 
```

这将返回所有有 bChild 模型指向它的 b 模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:45:43.940

当您可以简单地执行以下操作时，是否有理由仅通过 A 实例获取 bChild 对象：

```
result = bChild.objects.filter(a_models = a) 
```

您的方法行不通，您需要一个平面列表来按 pk 过滤：

```
all_bChild_models = a_instance.b_models.filter(pk__in = bChild.objects.values_list('pk', flat=True)) 
```

# jpa - JPA 注释中的动态模式

> ID：13727057
> 
> 赞同：1
> 
> 时间：2012-12-05T15:48:28.587
> 
> 标签：jpa, dynamic, annotations, schema, openjpa

我在带有 DB2 数据库的项目中使用 OpenJPA。

我们的 DBA 不允许使用同义词。

我们在数据库中有多个模式（例如，对于 DEV 和 QA 的不同模式）

我的实体类看起来像这样。

```
@Entity
@Table(name = "DEVSCHEMA.CUSTOMER")
public class Customer implements Serializable { 
```

当我将代码移动到 QA 环境时，我需要将实体更改为

```
@Entity
@Table(name = "QASCHEMA.CUSTOMER")
public class Customer implements Serializable { 
```

我想为两种环境制作一个二进制文件，并且不想为每个环境更改实体类。有什么可能的方法吗？

仅供参考-我在每个环境中也有多个模式，所以如果有任何默认模式选项，那么我不能使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T17:10:36.160

您可以在 orm.xml 文件中指定您的表，并为 dev 和 qa 等使用不同的 orm.xml 文件。所有其他设置（属性映射等）将从您的 Java 注释中获取。

# gnu-make - 如何使用 make 打印目标的所有先决条件和构建规则

> ID：13727059
> 
> 赞同：2
> 
> 时间：2012-12-05T15:48:29.697
> 
> 标签：gnu-make

一个大项目通常有一个复杂的 Makefile 系统。有很多变量定义和目标先决条件依赖分散在不同的 Makefile 中。有什么方便的方法可以打印所有先决条件并为目标构建规则？

具体来说，两个问题：

**问题 1**

假设我有四个 Makefile：

生成文件1：

```
p: a b
    [some rule] 
```

生成文件2：

```
q: c d
    [some rule] 
```

生成文件3：

```
r: e f
    [some rule] 
```

生成文件：

```
all: p q r
    [some rule] 
```

我可以调用一些命令来获得类似于以下的输出吗？

```
all: a b c d e f
    [rule 1]
    [rule 2]
    [rule 3]
    ...... 
```

**问题2**

而且，如果我要检查的实体只是一个普通的二进制文件而不是 Makefile 中指定的目标怎么办？例如，如何获得`sha1sum`coreutils 的先决条件和构建规则？（很明显，`sha1sum`在 coreutils 的 Makefile 中没有目标名称。）

我查看了 的帮助和手册`make`，但无济于事。也许我没有弄清楚谷歌搜索的正确关键字。谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T16:43:13.070

我对这个问题有点不清楚，但是您是否尝试过 -p 选项。它打印通过解析 makefile 生成的 DAG，并打印规则、依赖项和变量值

任何构建甚至是复杂的构建都遵循构建目标的相同原则。从您的示例中，不清楚的是依赖关系 a 和 b 例如是如何构建的。最终目标是什么。

# c# - WCF Rest coed for Json

> ID：13727062
> 
> 赞同：0
> 
> 时间：2012-12-05T15:48:37.780
> 
> 标签：c#, json, wcf, rest, interface

通常我看到 WCF REST JSON 的代码很可能是：

```
// Start the service and browse to <a href="http://:/SampleService/help[ServiceContract]  public">http://<machine_name>:<port>/SampleService/help [ServiceContract]
 public interface ISampleService {
[WebGet(UriTemplate = "")]
List<SampleItem> GetCollection(); 
```

这意味着引入了接口。但在某些情况下，我在代码中看到的接口根本没有使用过。如

```
 [ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class AlertService
{
    AlertContext alertProxy = new AlertContext();
    AlertDetailsContext alertDetailProxy = new AlertDetailsContext();
    Analytics analyticsProxy = new Analytics();

    [OperationContract]
    [WebInvoke(BodyStyle=WebMessageBodyStyle.Bare, RequestFormat=WebMessageFormat.Json, ResponseFormat=WebMessageFormat.Json, UriTemplate="/SearchAlerts")]
    public List<Alert> SearchAlerts(AlertFilter filter)
    {
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Cache-Control", "no-cache, must-revalidate");
        WebOperationContext.Current.OutgoingResponse.Headers.Add("Expires", "Sat, 26 Jul 1997 05:00:00 GMT"); 
```

这里直接使用类，为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:51:44.710

因为`ServiceContract`不一定是`interface`合同。使用接口允许您在多个实现之间共享相同的合同，并且可以使单元测试成为可能，但这不是必需的。

# linux - 使用 shell 脚本计算文件和目录

> ID：13727069
> 
> 赞同：16
> 
> 时间：2012-12-05T15:49:09.063
> 
> 标签：linux, bash, shell, unix, scripting

我正在学习 bash 脚本并编写了一个脚本来计算作为参数提供的目录中的文件和目录。我让它以一种对我来说似乎很奇怪的方式工作，我想知道是否有一种更简单的方式来做到这一点。

我已经注释掉了可以工作的代码，但将其保留为比较。我试图让`for`-loop 工作，而不是使用`if`其中的语句来检测给定位置中的项目是文件还是目录。

**编辑**：我刚刚发现注释代码也计算给定位置的子目录中的所有文件和目录！有什么办法可以防止这种情况，只计算给定位置的文件和目录？

```
#!/bin/bash

LOCATION=$1
FILECOUNT=0
DIRCOUNT=0

if [ "$#" -lt "1" ]
then
    echo "Usage: ./test2.sh <directory>"
    exit 0
fi

#DIRS=$(find $LOCATION -type d)
#FILES=$(find $LOCATION -type f)

#for d in $DIRS
#do
#   DIRCOUNT=$[$DIRCOUNT+1]
#done

#for f in $FILES
#do
#   FILECOUNT=$[$FILECOUNT+1]
#done

for item in $LOCATION
do
if [ -f "$item" ]
    then
         FILECOUNT=$[$FILECOUNT+1]
    elif [ -d "$item" ]
        then
         DIRCOUNT=$[$DIRCOUNT+1]
fi
done

echo "File count: " $FILECOUNT
echo "Directory count: " $DIRCOUNT 
```

由于某种原因，`for`-loop 的输出，无论我将位置指向何处，总是返回：

```
File count: 0 , Directory count: 1 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T16:19:26.870

`find`如下图使用。此解决方案将正确计算带有空格、换行符和点文件的文件名。

```
FILECOUNT="$(find . -type f -maxdepth 1 -printf x | wc -c)"
DIRCOUNT="$(find . -type d -maxdepth 1 -printf x | wc -c)" 
```

请注意，`DIRCOUNT`包括当前目录 ( `.`)。如果你不想要这个，减 1。

```
((DIRCOUNT--)) # to exclude the current directory 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-05T15:58:14.100

要解决问题，您可以使用：

```
FILECOUNT=$(find $LOCATION -type f | wc -l)
DIRCOUNT=$(find $LOCATION -type d | wc -l) 
```

`find`将递归查找下的所有文件（`-type f`）或目录（ ） ；将计算在每种情况下写入标准输出的行数。`-type d``$LOCATION``wc -l`

但是，如果您想学习，bash 脚本可能是更好的方法。一些评论：

*   如果您只想查找文件/目录`$LOCATION`（而不是在其子目录下递归等），您可以使用`for item in $LOCATION/*`，其中`*`将扩展为目录中的文件/目录列表`$LOCATION`。缺少`*`的是原始脚本返回 0/1 的原因（因为`$LOCATION`目录本身是唯一计入的项目）。
*   您可能需要首先检查它`$LOCATION`实际上是一个带有`[ -d $LOCATION ]`.
*   对于算术表达式，请使用`$(( ... ))`，例如`FILECOUNT=$(( FILECOUNT + 1 ))`。
*   如果要递归查找所有文件/目录，可以结合`find`循环。

例子：

```
find $LOCATION | while read item; do
    # use $item here...
done 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-05T15:58:00.773

您没有遍历给定目录中的文件列表；`/*`之后添加`$LOCATION`。您的脚本应如下所示：

```
...
for item in $LOCATION/*
do
... 
```

正如 dogbane 所指出的，仅添加`/*`将仅计算不以`.`;开头的文件。为此，您应执行以下操作：

```
...
for item in $LOCATION/* $LOCATION/.*
do
... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-05T15:59:29.833

`... am wondering if there is a simpler way of doing it.`

如果你这么说;)

或者，将您的脚本减少到

```
find /path/to/directory | wc -l 
```

对于当前目录，执行：

```
find . | wc -l 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T16:06:38.933

采用

```
find $LOCATION -maxdepth 1 -type f | wc -l 
```

对于文件的计数，以及

```
find $LOCATION -maxdepth 1 -type d | wc -l 
```

用于计数目录

# list - 如何检查某个项目是否已存在于 SharePoint 列表中？

> ID：13727072
> 
> 赞同：1
> 
> 时间：2012-12-05T15:49:15.073
> 
> 标签：list, events, sharepoint, infopath, receiver

我希望创建一个事件接收器，当通过 InfoPath 表单将项目从一个列表添加到另一个列表时，如果该项目已经存在，它将不会创建新项目，它只会更新该项目的“数量”。

例如。

库存物品列表 > 将 2 个牛奶添加到购物车 > 牛奶已在购物车中 > 将牛奶更新为 3 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:22:44.403

您应该有一个唯一的密钥来识别您的项目。理想情况下，这将是一个数字或类似的东西，因此您可以识别第二个列表中的项目。在您的牛奶示例中，您没有 ID。所以你可以添加一个或者你可以将项目与文本进行比较（我想“牛奶”将在标题字段中）

当项目被添加到列表中时，您可以在“ItemAdding”中使用 SPQuery 检查该项目是否已存在于列表中（有足够的示例在线查找）。如果查询返回 0 个项目，您可以让 SharePoint 正常工作。如果找到一个项目，您应该更新找到的项目的数量。

2个注意事项你应该考虑：

为避免该项目已经在列表中时被添加，您可以使用以下代码。

```
properties.Cancel = true;
properties.Status = SPEventReceiverStatus.CancelNoError 
```

取消确保项目没有被添加。通常这会引发错误，但通过设置状态不会引发错误。

您应该考虑的第二件事是，如果您想让 item update 在更新数量时触发。因为这会导致奇怪的行为。我建议在更新数量之前禁用事件触发，然后再次启用它。

# javascript - Backbone.js 过滤集合中的任何值

> ID：13727074
> 
> 赞同：1
> 
> 时间：2012-12-05T15:49:22.903
> 
> 标签：javascript, backbone.js

我有一个搜索/过滤字段，我希望能够过滤集合的任何值。我拥有的数据如下：

```
 exports.administrators = [
{
  id: 1,
  firstName: "User1",
  lastName: "Tester",
  phone: "781-000-0000",
  email: "user1.tester@email.com",
  privileges: "view-only"
}, {
  id: 2,
  firstName: "Mickey",
  lastName: "Mouse",
  phone: "781-123-4567",
  email: "mickey.mouse@disney.com",
  privileges: "all"
}, {
  id: 3,
  firstName: "Snow",
  lastName: "White",
  phone: "781-890-1234",
  email: "snow.white@disney.com",
  privileges: "all"
}, {
  id: 4,
  firstName: "Anakin",
  lastName: "Skywalker",
  phone: "888-874-9084",
  email: "anakin.skywalker@deathstar.com",
  privileges: "view-only"
}, {
  id: 5,
  firstName: "Obi-one",
  lastName: "Kenobi",
  phone: "908-765-5432",
  email: "obi.kenobi@jedi.com",
  privileges: "all"
}, {
  id: 6,
  firstName: "Master",
  lastName: "Yoda",
  phone: "876-654-2134",
  email: "yoda@jedi.com",
  privileges: "view-only"
}, {
  id: 7,
  firstName: "Han",
  lastName: "Solo",
  phone: "781-456-3209",
  email: "han.solo@gmail.com",
  privileges: "all"
}, {
  id: 8,
  firstName: "Neo",
  lastName: "TheOne",
  phone: "781-000-0000",
  email: "neo@matrix.com",
  privileges: "all"
}]; 
```

View 将根据 keyup 事件触发一个事件：

```
AdministratorView.prototype.events = {
  'click .sub-content th.sort, .sub-content th.sort-up, .sub-content th.sort-down': 'sortTable',
  'click .light-btn': 'showAdd',
  'keyup #filter-find': 'filterAdministrators'
}; 
```

我还抽象了要执行过滤的功能：

```
 App.Utils.filterCollection = function(collection, filterValue) {
if (filterValue !== "") {
  return _.filter(collection.models, function(data) {
    var values;
    values = _.values(data.attributes);
    _.each(values, function(value) {
      if (!isNaN(value)) {
        value = value.toString();
      }
      return value.indexOf(filterValue) > 0;
    });
  });
} 
```

};

我遇到的问题是：

1.  filterCollection 函数返回未定义
2.  有没有更优雅的方式来做到这一点？

感谢您提前提供的所有帮助。

干杯，

基亚诺什

更新功能：

我用@dbaseman 的一些输入更新了函数

```
 App.Utils.filterCollection = function(collection, filterValue) {
var filteredCollection;
if (filterValue === "") {
  [];
}
return filteredCollection = collection.filter(function(data) {
  return _.some(_.values(data.toJSON()), function(value) {
    value = !isNaN(value) ? value.toString() : value;
    return value.indexOf(filterValue) >= 0;
  });
}); 
```

};

但是我仍然从函数中得到一个空的（或未定义的）值。我被踩了！！

更新 #2 找到了部分解决方案。这是 jsFiddle - [http://jsfiddle.net/kianoshp/YWSSp/](http://jsfiddle.net/kianoshp/YWSSp/)。它可以正确过滤，但是当我清空过滤器字段时，我希望显示原始数据集。但是现在我得到了一张空白表。致力于解决方案，但任何帮助/提示都会有所帮助。

更新 #3 最终解决方案在 jsFiddle --> [http://jsfiddle.net/kianoshp/YWSSp/77/](http://jsfiddle.net/kianoshp/YWSSp/77/)感谢@dbaseman

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:35:37.783

我不认为有更优雅的方式，除了小的改进：

1.  骨干集合代理 Underscore.JS 方法，因此您可以使用`collection.filter`
2.  你还可以`_.some`用来检查是否有任何值匹配

至于问题，据我所知有两个：

1.  您正在调用`_.values`Backbone 模型（这就是`filter`在 Backbone 集合上调用时返回的内容）。您必须在 JSON 表示上调用 filter，使用`model.toJSON()`.
2.  您正在检查该值是否为*数字*，然后调用`indexOf`该值。我认为您的意思是检查它是否是*字符串*（`typeof value == 'string'）。

这是修改后的函数（[Demo](http://jsfiddle.net/vZWu4/8/)）。

```
Backbone.Collection.prototype.filterValues = function(filterValue) {
    if (filterValue == "") return [];
    return this.filter(function(data) {
        return _.some(_.values(data.toJSON()), function(value) {
           if (_.isNumber(value)) value = value.toString();
           if (_.isString(value)) return value.indexOf(filterValue) != -1;
           return false;
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T09:23:33.113

我接受了 McGarnagle 提供的答案并添加了一些改进。下面的代码允许您在具有由对象组成的属性的模型内部进行搜索。

```
Backbone.Collection.prototype.filterValues = function(filterValue) {
if (filterValue === ""){
    return this.models;
}

function collectionFilter(data) {
    if(data.toJSON){
        data = data.toJSON();
    }

    return _.some(_.values(data), function(value) {
        if(_.isObject(value)){
            return collectionFilter(value);
        }

        if (_.isNumber(value)){
            value = value.toString();
        }

        if (_.isString(value)){
            value = value.toLowerCase();

            return value.indexOf(filterValue) !== -1;
        }

        return false;
    });
}

return this.filter(collectionFilter);
}; 
```

# google-app-engine - 在 App Engine 中将大文件从 S3 传输到 Google Cloud Storage

> ID：13727075
> 
> 赞同：2
> 
> 时间：2012-12-05T15:49:22.660
> 
> 标签：google-app-engine, amazon-s3, google-cloud-storage

我在 App Engine 后端实例中使用 boto 来获取文件，并使用 GAE 存储 API 来存储它。我提出了默认的获取截止日期。但是对于超过 32M 限制的文件，就会出现问题，并且 ResumableDownloadHandler 在那里没有帮助，因为 GCS 文件句柄具有不兼容的接口。

任何人都可以建议一个可恢复且不需要文件系统的现有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:35:09.497

这是一个已知问题，我们正在努力解决。同时，您可以使用[Google Python 客户端库](https://code.google.com/p/google-api-python-client/)作为 Files API 的替代方案。

# php - MySQL SELECT 两个值之间的行

> ID：13727076
> 
> 赞同：0
> 
> 时间：2012-12-05T15:49:26.633
> 
> 标签：php, mysql

我需要根据当前日期从过去 12 个月的 mysql 数据库中选择数据。我将日期作为 unix 时间戳保存在数据库中，但我的查询似乎不起作用。

```
$query="SELECT user_id, COUNT(first_name) AS member_count
FROM main_user
WHERE renew_date<'$time' AND renew_date>'$old_time' WHERE renew_date!=''"; 
```

基本上我需要计算所有有 renew_date 时间戳的 first_name 实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:51:28.197

您还有一个额外的`WHERE`地方应该使用`AND`：

```
$query="SELECT user_id, COUNT(first_name) AS member_count
FROM main_user
WHERE renew_date<'$time' AND renew_date>'$old_time' AND renew_date!=''";
                                                    ^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:51:34.900

您的查询中有错误，您有两个 WHERE 子句！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:58:30.913

当您测试查询的返回值时，您会发现此错误和其他错误

```
$query = 'select ...';
$result = $mysqli->query($query);
if ($result === false) {
    // error handling
    echo $mysqli->error;
} else {
    // query successful
    // process result set
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T15:54:51.610

你放**`WHERE`了两次**。您可以在 mysql中使用[From_UNIXTIME函数](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_from-unixtime)

```
WHERE FROM_UNIXTIME(renew_date)<NOW() 
    AND FROM_UNIXTIME(renew_date)> (NOW()-INTERVAL 1 year)
    AND renew_date !='' 
```

# .net - 项目停止时调度程序计时器触发

> ID：13727078
> 
> 赞同：1
> 
> 时间：2012-12-05T15:49:31.287
> 
> 标签：.net, wpf, vb.net

我有一个 VS 2012 项目，它有一个每 2 分钟启动一个进程的计时器。它工作正常，但似乎在项目停止后继续运行。我所拥有的唯一迹象是它以计时器间隔将错误记录到数据库中。我需要明确停止计时器吗？当您按下停止按钮时，它是如何完成的？当我关闭项目时，记录停止。

滴答事件（RefreshBroadcast）静默失败（当应用程序未运行时），但日志记录工作正常，日志记录还表明它无权访问配置文件，因为它使用默认值（用于应用程序名称等）。日志记录代码也应该在视图中显示错误，所以最终 Visual Studio 会告诉我我的错误视图窗口“没有由...识别的资源”。这将在项目停止时发生，而我正在其他地方编码。在此之后，记录到数据库停止。

```
 Public Sub New()
        If Not System.Windows.Application.Current.MainWindow Is Nothing Then
            _refreshBroadcastTimer = New System.Windows.Threading.DispatcherTimer()
            AddHandler _refreshBroadcastTimer.Tick, AddressOf dispatcherTimer_Tick
            If Debugger.IsAttached Then
                _refreshBroadcastTimer.Interval = New TimeSpan(0, 0, 30)
            Else
                _refreshBroadcastTimer.Interval = New TimeSpan(0, 0, My.Settings.RefreshBroadcastIntervalMinutes * 60) ' change to seconds
            End If
            _refreshBroadcastTimer.Start()
        End If
    End Sub

Private Sub dispatcherTimer_Tick(sender As Object, e As EventArgs)
    Try
        RefreshBroadcast()
    Catch ex As Exception
        LogException(ex)
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:05:36.867

有趣的是，问一个问题经常会给你答案，这一直困扰着我好几天，但我想我已经明白了。因为我在更新视图模型时启动了计时器，所以每当我在编辑器中打开视图时，它都会在后台创建视图模型的实例，这会启动计时器。我想我必须包装代码，这样它就不会在设计器中触发。

我已经将初始化代码包装在

```
 If Not System.ComponentModel.DesignerProperties.GetIsInDesignMode(New DependencyObject()) Then 
```

到目前为止它似乎正在工作。

# django - 使用静态服务提供媒体文件。点云

> ID：13727085
> 
> 赞同：1
> 
> 时间：2012-12-05T15:49:55.017
> 
> 标签：django, dotcloud

我正在尝试使用 dotcloud 上的静态服务为我的 django 应用程序的媒体和静态文件提供服务（http://stackoverflow.com/questions/13681183/serve-static-files-with-nginx-and-custom-service-点云）。

我创建了一个静态服务，我在其中放置了我的静态文件。在我的 django 设置中，我有：

```
 STATIC_ROOT = STATIC_DIR
    STATIC_URL = 'http://mystaticapp.dotcloud.com/' 
```

它完美地工作。

关于我的媒体文件，我在我的静态服务中放置了一个文件夹媒体，我有：

```
 MEDIA_ROOT = 'http://mystaticapp.dotcloud.com/media/'
    MEDIA_URL = 'http://mystaticapp.dotcloud.com/media/' 
```

MEDIA_URL 工作发现：我的 django 应用程序从静态服务获取媒体。

但是问题发生在 MEDIA_ROOT 上。看起来该应用程序没有将文件上传到我的静态应用程序。当我为我的用户上传个人资料图片时，它不会像应该那样将其上传到 mystaticapp/media/profilepic。

关于如何解决这个问题的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:50:02.517

要记住的重要一点是，dotCloud 上的静态服务和您的 django 服务是独立的服务，没有共同的文件系统。因此，如果您将文件上传到 django 服务，则静态服务将无法使用该文件。

对于这个用例，我建议将您的文件上传到 S3，并从那里提供这些文件。

我会为此推荐 Django-storages。这是一些文档：[http ://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html](http://django-storages.readthedocs.org/en/latest/backends/amazon-S3.html)

# components - 使用 TOM.NET 更新多媒体组件

> ID：13727089
> 
> 赞同：4
> 
> 时间：2012-12-05T15:50:07.863
> 
> 标签：components, tridion, updates, multimedia

我正在尝试使用 Tridion 的 TOM.NET API 像这样在 C# 中更新多媒体图像上的元数据

```
 componentMM.LoadXML(localComponent.GetXML(XMLReadFilter.XMLReadALL));
 // make changes to the component mm multimedia text;
 localComponent.UpdateXML(componentMM.InnerXML);
 localComponent.Save(True) 
```

虽然这适用于其他组件，但它不适用于多媒体图像。

```
<?xml version="1.0"?>
<tcm:Error xmlns:tcm="http://www.tridion.com/ContentManager/5.0" 
           ErrorCode="80040345" Category="19" Source="Kernel" Severity="2">
    <tcm:Line ErrorCode="80040345" Cause="false" MessageID="16137"><![CDATA[ 

    Unable to save Component (tcm:33-32599).
    ]]><tcm:Token>RESID_4574</tcm:Token>
        <tcm:Token>RESID_4418</tcm:Token>
        <tcm:Token>tcm:33-32599</tcm:Token>
    </tcm:Line>
    <tcm:Line ErrorCode="80040345" Cause="true" MessageID="15747"><![CDATA[ 

    Unexpected element: MultimediaFileSize
    ]]><tcm:Token>MultimediaFileSize</tcm:Token>
    </tcm:Line>
    <tcm:Details>
        <tcm:CallStack>
            <tcm:Location>ComponentBL.CheckMultiMediaProperties</tcm:Location>
            <tcm:Location>ComponentBL.CheckMultiMediaProperties</tcm:Location>
            <tcm:Location>ComponentBL.Update</tcm:Location>
            <tcm:Location>XMLState.Save</tcm:Location>
            <tcm:Location>Component.Save</tcm:Location>
        </tcm:CallStack>
    </tcm:Details>
</tcm:Error> 
```

你能告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T15:34:55.513

感谢您的回复。我正在删除节点，但在错误的位置。我像这样更新代码，现在可以正常工作了。

```
 if (localComponent.IsMultimediaComponent)

                        {

                            XmlNode multimediaFileSizeNode = localComponentXML.SelectSingleNode("//*[local-name()='MultimediaFileSize']",tridionNamespace);

                            XmlNode dataNode = multimediaFileSizeNode.ParentNode;

                            dataNode.RemoveChild(multimediaFileSizeNode);

                        }

                        localComponent.UpdateXML(localComponentXML.InnerXml); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:00:06.403

在您的更新中仅包含 tcm:Metadata 节点？

具体来说，它抱怨您指定 mm 文件的大小，这是您不应该指定的，这是系统属性。清理您从 Tridion 收到的 XML 以删除该属性（然后它可能会抱怨另一个属性，只要按照它的要求去做）。

编辑：阅读错误消息是一项很棒的技能......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T16:02:00.590

执行此操作时，您只需要保存修改后的元数据数据（而不是整个 XML）。在调用之前尝试从 XML 结构中删除除 tcm:Metadata 之外的所有子节点`.UpdateXML()`

如果您需要进一步的帮助，也许您可​​以粘贴您的示例 XML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T16:36:17.047

我通常这样做：-

```
mComponent = (Component)mTDSE.GetObject("YOUR-COMPONENT-ID", EnumOpenMode.OpenModeView, null, XMLReadFilter.XMLReadAll);
mComponent.CheckOut(false);
mComponent.MetadataFields["YOUR-METADATA-FIELD-NAME"].value[1] = "VALUE TO BE REPLACED";
mComponent.Save(true); 
```

# ruby-on-rails - 带有元数据的 Mongoid has_many

> ID：13727091
> 
> 赞同：1
> 
> 时间：2012-12-05T15:50:10.930
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

假设我有一个`Order`模型，其中包含许多`products`. 我希望能够跟踪哪些产品已发货，哪些未发货，因此我想跟踪与每个关系相关的一些元数据。如果这是一个`has_one`关系，那么它会很简单，只需插入更多的字段。

***如何使用 Mongoid 干净地通过模型和模型`has_many`之间的关系来实现这一点？`Order``Product`***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:22:16.410

我自己解决了这个问题，我使用另一个模型`OrderProduct`作为两者之间的代理。状态的实现是使用`state_machine`gem 完成的。我最终将很多对产品状态机的调用封装在 Order 模型中。这使我可以在订单实例上调用`.product_state(product)`或调用类似的东西。`can_cancel_product?(product)`

**命令**

```
class Order
  include Mongoid::Document
  include Mongoid::Timestamps

  field :state, type: String

  embeds_many :order_products

  state_machine initial: :open do
    ...
  end

  def products
    order_products.map do |op|
      op.product
    end.freeze
  end

  def add_product(product)
     OrderProduct.create({_product: product._id, order: self})
  end

  def remove_product(product)
    order_products.delete find_order_product(p)
  end

  #wrapper for product events
  OrderProduct.new.state_paths.events.each do |event|
    define_method "#{event}_product" do |product|
      find_order_product(product).send(event)
    end
    define_method "can_#{event}_product?" do |product|
      find_order_product(product).send("can_#{event}?")
    end
  end

  #wrapper for product states
  OrderProduct.state_machine.states.map(&:name).each do |state|
    define_method "product_#{state}?" do |product|
      find_order_product(product).send("#{state}?")
    end
  end

  #wrapper for product current state
  def product_state(product)
    find_order_product(product).state
  end

  private
    def find_order_product(p)
      order_products.at(order_products.index do |op|
        op.product == p
      end)
    end

end 
```

**订购产品**

```
class OrderProduct

  include Mongoid::Document

  embedded_in :order
  field :_product, type: Moped::BSON::ObjectId

  state_machine initial: :open do
    ....
  end

  def product
    Product.find(_product)
  end
  def product=(product)
    _product = (product._id)
  end

end 
```

# keyboard-shortcuts - kdevelop：注释掉块

> ID：13727094
> 
> 赞同：11
> 
> 时间：2012-12-05T15:50:18.810
> 
> 标签：keyboard-shortcuts, kdevelop

我找不到任何注释掉代码块的快捷方式。

前：

```
int main() {
   std::cout << "my awesome program" << std::endl;
   return 0;
} 
```

`CTRL`+`/`

```
// int main() {
//   std::cout << "my awesome program" << std::endl;
//   return 0;
//} 
```

这对我来说是一个非常重要的功能，我似乎在菜单中的任何地方都找不到它。kdevelop没有这个功能吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T15:52:45.987

当然，我在发布后 2 分钟找到它......

### 评论：`CTRL`+`D`

### 取消注释：`CTRL`+ `SHIFT`+`D`

[快捷方式列表](https://code.google.com/p/dealii/wiki/KDevelop#Useful_keyboard_commands)

# file - 在一个目录中，新文件默认是可执行的

> ID：13727095
> 
> 赞同：1
> 
> 时间：2012-12-05T15:50:21.487
> 
> 标签：file, unix, permissions, default, executable

出于某种原因，我的一个目录已经开始生成可执行文件。我的意思是该目录中的新文件是 a+x （但不是，例如在父目录中）：

```
$ ls -ld .
drwxrwsr-x  2 me me 45 Dec  5 10:22 ./
drwxrwsr-x 10 me me 13 Dec  5 10:22 ../
$ rm -f test
$ touch test
$ ls -l test
-rwxrwxr-x 1 me me 0 Dec  5 10:25 test*
$ cd ..
$ rm -f test
$ touch test
$ ls -l test
-rw-rw-r--+ 1 me me 0 Dec  5 10:26 test 
```

另外，请注意第二个权限行末尾的 +，它重要吗？

我知道这不可能`umask`……但它设置在 0002。

如何关闭此行为？

* * *

编辑：

为了响应下面的答案，我运行了以下命令（在父目录中）：

```
$ touch test
$ getfacl test
# file: test
# owner: me
# group: me
user::rw-
group::rw-
mask::rwx
other::r-- 
```

为什么我有这个面具？这是正确的价值吗？我怎样才能改变它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:06:04.420

指示条目上`+`存在一个或多个 ACL。`getfacl test`将向您展示更多信息。新文件的明显可执行性的奇怪之处可能与父目录中的 ACL 有关，但我们必须确定它们要知道什么......

# ios - 如何为数组中的每个创建一个具有唯一图像和选择器的自定义 UIButton？

> ID：13727099
> 
> 赞同：1
> 
> 时间：2012-12-05T15:50:33.920
> 
> 标签：ios, iphone, objective-c, uibutton, programmatically-created

我有几个从 NSMutableArray 创建的 UIButton。我正在尝试使用独特的图像自定义每个 UIButton。

在以下行中，我不确定用于分别为图像数组中的每个按钮设置图像的语法：

```
[btn setImage:[UIImage imageNamed:[myImages objectAtIndex:3]] forState:UIControlStateNormal]; 
```

这是我的其余代码：

```
NSMutableArray* buttonArray = [[NSMutableArray alloc] init];

for(int i = 0; i < 8; i++)
{
    // Custom UIButton
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];

    [btn setFrame:CGRectMake(0.0f, 2.0f, 52.0f, 52.0f)];
    [btn setTitle:[NSString stringWithFormat:@"Button %d", i+1] forState:UIControlStateNormal];

    NSArray * myImages = [NSArray arrayWithObjects:@"category0.png", @"category-clothing1.png" , @"category2.png", @"category3.png", nil];

    [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:3]] forState:UIControlStateNormal];

    [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [buttonArray addObject:btn];

} 
```

我还希望为每个按钮调用不同的选择器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:56:54.913

像这样的东西？我刚刚看到您关于每个按钮需要不同操作的帖子，但我会检查按钮的发送者并在您的 (buttonPressed:) 方法中相应地调整代码。您还应该确保您的按钮阵列具有适当数量的图像，因此更好的方法可能是仅根据您的图像阵列计数创建按钮数量。（答案已编辑以反映这一点）。我还想补充一点，您应该养成在更改正常状态时也更改图像突出显示状态的习惯，这样当您按下图像时它不会变为空白。

```
NSMutableArray* buttonArray = [NSMutableArray array];
NSArray * myImages = [NSArray arrayWithObjects:@"category0.png", @"category-clothing1.png" , @"category2.png", @"category3.png", nil];

for(int i = 0;i < [myImages count]; i++)
{
    // Custom UIButton
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];

    [btn setFrame:CGRectMake(0.0f, 2.0f, 52.0f, 52.0f)];
    [btn setTitle:[NSString stringWithFormat:@"Button %d", i] forState:UIControlStateNormal];
    [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateHighlighted];
    [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];
    [btn addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [buttonArray addObject:btn];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:06:56.867

此代码包含来自数组的图像和选择器。（此代码未经编译检查，可能存在一些小问题，不便之处敬请见谅）

```
NSMutableArray* buttonArray = [NSMutableArray array];
NSArray * myImages = [NSArray arrayWithObjects:@"category0.png", @"category-clothing1.png" , @"category2.png", @"category3.png", nil];

// You need to assign string name and that should be your method name.
NSMutableArray *selectors=[[NSMutableArray alloc]initWithArray:@"sel1",@"sel2",@"sel3",@"sel4", nil];

for(int i=0; i<[myImages count]; i++){
    // Custom UIButton
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [btn setFrame:CGRectMake(0.0f, 2.0f, 52.0f, 52.0f)];
    [btn setTitle:[NSString stringWithFormat:@"Button %d", i] forState:UIControlStateNormal];
    [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateHighlighted];
    [btn setImage:[UIImage imageNamed:[myImages objectAtIndex:i]] forState:UIControlStateNormal];

    SEL selector = selectorFromString([selectors objectAtIndex:i]);
    [btn addTarget:self action:@selector(selector) forControlEvents:UIControlEventTouchUpInside];

    [buttonArray addObject:btn];
} 
```

# c# - 如何在扩展 .net 网格面板中显示动态数据？

> ID：13727100
> 
> 赞同：0
> 
> 时间：2012-12-05T15:50:38.520
> 
> 标签：c#, asp.net, mysql, ext.net

我的 Web 应用程序中有一个**扩展名为 .net 控件的****网格**面板。现在网格面板与 Store 绑定。我已经**加密了登录用户名**，数据库存储了加密的登录名。现在我希望网格面板在字段中**显示实际解密的数据**。但我不知道在扩展 .net 控件中构建网格数据期间在哪里解密。请帮忙。

 ******* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:33:03.420

在绑定 Source 的数据源之前，我只是像**rowbounddata**事件一样调用了 Db 数据的 for 循环，并在其中解密了我的列（字段）数据。最后绑定最新的数据源

```
for (int i = 0; i < this.getUserList(this.getUserFilter()).Count; i++)
{
  this.getUserList(this.getUserFilter())[i].LoginName = CommonUtilities.Decrypt(this.getUserList(this.getUserFilter())[i].LoginName, ConfigurationManager.AppSettings["EightCharacterEncryptionKey"]);
}
this.Store1.DataSource = this.getUserList(this.getUserFilter());
this.Store1.DataBind(); 
```******

# javascript - 如何在用户使用 Facebook Like 插件点赞页面后注销用户？

> ID：13727101
> 
> 赞同：3
> 
> 时间：2012-12-05T15:50:42.287
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在构建一个非常小的网页以在信息亭支架中使用。目标是让人们“喜欢”一个带有触摸屏的 Facebook 页面。

用户必须先登录才能喜欢一个页面，因此 Facebook 会提供他们的常规登录弹出窗口，这就像一个魅力。当用户登录时，该页面被点赞（因为他们点击了“Like”按钮）并且用户应该再次注销（因为没有人想在公共计算机上登录）。之后页面应该重新加载。

现在，这可以通过 Facebook 的 Javascript API 实现。他们有一个事件监听器，当用户喜欢一个页面时会调用一个函数。我只需要在该事件触发时调用 FB.logout() :) 。

不幸的是，它对我不起作用。我可能很笨，或者 Facebook API 有问题。

我的代码：

```
window.fbAsyncInit = function() {
    FB.Event.subscribe('edge.create', function(response) {
        FB.logout(function(response) {
            window.location.reload();
        });
    });
} 
```

但这不起作用，我认为问题出在 Facebook 的登录部分。

有没有人有这方面的经验？它应该很简单，但我无法让它工作......

我尝试过的一些事情：

*   提示正常登录 - 可能，但它说我的应用程序需要访问某些信息。真的，我唯一想做的就是让用户喜欢一个页面。

*   setTimeout 循环 - 试过这个，但 Facebook 登录似乎在我的页面上停止了整个 Javascript？

编辑：我知道人们将他们的凭据插入公共计算机是一个坏主意，但客户希望这样。还有一个链接到 Facebook 页面的二维码，但这并不能解决我的问题 :) 。

**TL;DR：来自“Like”按钮的 Facebook Javascript 回调在用户登录时有效，但在用户必须通过 Facebook 弹出窗口登录时失败。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:12:55.717

> 不幸的是，它对我不起作用。我可能很笨，或者 Facebook API 有问题。

没有。问题在于你的方法，resp。这个概念。

FB.logout*仅*适用于活动访问令牌（否则，我在网上访问的*任何*网站都可能使我退出 Facebook，这将非常烦人）。

但是由于用户没有连接到您的应用程序，因此您没有访问令牌。

> 提示正常登录 - 可能，但它说我的应用程序需要访问某些信息。

这是您获得访问令牌的*唯一*方法，也是您可以使用 FB.logout 的唯一方法。

（如果用户登录 Facebook，但随后拒绝连接到您的应用程序，那么您将再次没有访问令牌，因此在这种情况下您也无法将其注销。）

# css - 响应式设计和文章元素

> ID：13727102
> 
> 赞同：0
> 
> 时间：2012-12-05T15:50:43.723
> 
> 标签：css, html, responsive-design

我有一个页面，包含三个部分。每个部分都是一个占据整个页面视图的部分。我希望文章和背景适合移动设备屏幕，就像在桌面上一样，但不知道如何调整文章。这是一个小提琴：http: [//jsfiddle.net/kRjUn/](http://jsfiddle.net/kRjUn/)

这是CSS：

```
html {
    height: 100%;
    }

body {
    font-size: 1em;
    line-height: 1.4;
    height: 100%;
}

article {
    height: 100%;
    padding-top: 2em;
    }
.wrapper {
    display: block;
    margin-left: auto;
    margin-right: auto;
    width: 70%;
    height: inherit;
    }

.content {
    margin-top: 25em;
    height: inherit;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:22:41.157

我找到了这个无网格样板，并将车身高度设置为 100%，它似乎工作得很好。我也只是使用了一个 div 而不是文章。任何寻找干净且响应迅速的样板的人我都会定义。试一试：[https ://github.com/thatcoolguy/gridless-boilerplate](https://github.com/thatcoolguy/gridless-boilerplate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:05:00.040

我觉得你的代码不是为每个设备处理案例，你需要使用可以帮助你的 CSS 3 媒体查询功能。

我认为您可以使用[HTML5 样板](http://html5boilerplate.com/)模板作为示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-16T02:03:59.323

给你，使用显示表。

```
article {
   height: 100%;
   padding-top: 2em;
   display: table;
}
.wrapper.content { 
    padding: 2em; 
    display: table-cell;
} 
```

### [演示](http://jsfiddle.net/iancwoodward/kRjUn/1/)

# html - Drop 事件不会在 FF 中停止

> ID：13727104
> 
> 赞同：0
> 
> 时间：2012-12-05T15:50:47.987
> 
> 标签：html, preventdefault

适用于 chrome，但不适用于 Firefox 16.0.2 版。甚至不会打扰IE。当我将文件从桌面拖到 FF 时，将其放在那里，它应该停止默认操作（打开文件），但它没有。显然有些东西很简单，就是看不到，请帮忙。这适用于chrome，但不适用于FF：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<body>
    Why ??
</body>
<script type="text/javascript">

    $(document).bind('drop', docDrop);

    function docDrop(e) {
     e.stopPropagation();
     e.preventDefault();
     return false;
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:49:21.980

对了，自己动手吧。所以这是未来谷歌员工的解决方案：

如果您希望 'drop' 事件起作用，Firefox 还需要定义 'dragover' 事件。所以这是有效的代码：

```
$(document).bind('dragover', function(e){
    e.preventDefault();
    return false;
});
$(document).bind('drop', function(e){
    e.preventDefault();
    return false;
}); 
```

还有关于该主题的另一个主题： [如何在 `drop` 事件后停止重定向？](https://stackoverflow.com/questions/8938319/how-to-stop-redirecting-after-drop-event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:56:16.420

试试`e.stopImmediatePropagation()`。如果这停止了传播，则意味着您已多次绑定该`drop`事件。您可能需要考虑`unbind`在事件完成之前或之后。

# c# - WPF自定义弹出窗口导致程序崩溃？

> ID：13727105
> 
> 赞同：-1
> 
> 时间：2012-12-05T15:50:47.983
> 
> 标签：c#, wpf, .net-4.0

我有一个位于任务栏中的程序（通过隐藏的表单），它会生成一个弹出窗口（自定义构建的 wpf 窗口类），显示启动是否完全成功。该程序设置为在启动时运行（因为实际产品将运行），当我启动计算机并启动程序时，程序将停止响应。我不确定这是否是由于它开始打开第二个窗口（实际的用户界面），或者是因为计算机一次发生了太多事情。关于造成这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:09:15.513

根据我的经验，WPF 应用程序可能会因各种您无法预料的原因而崩溃，因此这里是如何解决 WPF 应用程序启动问题的方法。

首先确保您的应用程序具有适当的异常处理：在每个入口点尝试/捕获，在您的情况下 - 未处理的异常事件侦听器附加在应用程序的第一个可能位置：

```
 AppDomain.CurrentDomain.UnhandledException += (s,args)=>{
       MessageBox.Show("Unhandled Exception: "+args.ExceptionObject);
    }; 
```

然后确保您的应用程序在您直接执行时正确运行

WPF 应用程序的启动有点模糊，它们的 Main() 方法在生成的部分类 obj\App.g.cs 中，该类的另一部分是空的 App.xaml.cs 如果您遇到反序列化 BAML 的问题您甚至不会看到 MainWindow.xaml.cs 代码执行。在这种情况下，您需要做的是将 obj\App.g.cs 的内容复制到一个新类 Program.cs 中，使其成为您的应用程序的启动类，并将上面提到的错误处理程序作为第一行您在 Program.cs 中复制的 Main() 方法：

```
[System.STAThreadAttribute()]
[System.Diagnostics.DebuggerNonUserCodeAttribute()]
[System.CodeDom.Compiler.GeneratedCodeAttribute("PresentationBuildTasks","4.0.0.0")]
public static void Main() {
    AppDomain.CurrentDomain.UnhandledException += (s,args)=>{
       MessageBox.Show("Unhandled Exception: "+args.ExceptionObject);
    };
    Storm.Designer.App app = new Storm.Designer.App();
    app.InitializeComponent();
    app.Run();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:09:26.047

也许您的应用程序依赖于某些服务，该服务是在 wpf 应用程序加载后加载的？？？您可以使用任务计划程序启动 wpf 应用程序，您可以在其中设置下一个有用的参数：启动时、延迟任务 x 分钟、如果应用程序崩溃则重新启动等。

# samsung-smart-tv - 三星智能电视应用画中画

> ID：13727110
> 
> 赞同：3
> 
> 时间：2012-12-05T15:50:55.647
> 
> 标签：samsung-smart-tv, smart-tv

开发了一个应用程序并部署到电视上。现在我想要单宽行为（部分覆盖底层输入通道的屏幕），但我无法这样做。这是我所做的：

a) 放入 `body, html {background-color:transparent;}`CSS 文件

b) config.xml - 标签更改：

```
<fullwidget>n</fullwidget>
<dcont>y</dcont>
<movie>y</movie> (since my app could contain some html 5 video feed) 
```

当我部署时，背景只是显示黑色。但是，我的笔记本电脑有一个 HDMI 输入到电视，显示效果很好。ESPN 应用程序可以很好地处理该输入，只是我的应用程序不能。很确定我错过了有关如何初始化后台程序屏幕的内容。

PS：使用 2012 Emulator 和 7500 系列 60" 设备进行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:50:04.680

确保你有 config.xml

```
<srcctl>n</srcctl> 
```

# database-design - 数据库设计以查看对每个值进行的交易

> ID：13727111
> 
> 赞同：0
> 
> 时间：2012-12-05T15:51:07.043
> 
> 标签：database-design, relational-database

我正在创建一些财务软件。在这样的软件中，不仅要知道字段的当前值，还要知道字段的值是什么，谁做了更改以及何时进行更改，因此可以回顾历史，例如查看谁犯了一个错误。犯罪。

我的问题是创建这样一个设计的最佳实践是什么？我使用的 DBMS 是 PostgreSQL。当然，访问最多的是每个字段的当前值。此外，只需要记录对值的更改，因此进行快照备份似乎不是执行此操作的合适方法。

我尝试搜索“日志”和“交易历史”，但没有找到结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:48:50.983

Martin Fowler 在他的“分析模式”一书中描述了金融交易系统的设计——这是关于 OO 设计而不是数据库设计，但值得一读。

传统的方法是创建一个代表“分类帐”的表格，如下所示：

```
transactionID | AccountID | TransactionDate | TransactionValue | OtherData...
------------------------------------------------------------------- 
```

任何时间点的余额是截至该日期的“TransactionValue”的总和。

确实，这样的表往往会变得非常大——但像 Postgres 这样的数据库在管理大型数据集方面非常有效。在实践中，您可以轻松地在现代硬件上管理数千万或数亿条记录，只要您可以依靠良好的索引方案。

如果您确实遇到了性能限制，常见的解决方案是创建汇总条目 - 因此您可以将某个日期之前的所有记录移动到存档表中，并插入该日期的汇总记录。根据您的数据量，您可以按十年、年、月甚至周来执行此操作。

# asp.net-mvc-3 - 错误 405 - 方法不允许使用 MVC 上传 WCF 文件

> ID：13727114
> 
> 赞同：1
> 
> 时间：2012-12-05T15:51:12.633
> 
> 标签：asp.net-mvc-3, wcf, file-upload

我创建了一个使用 WCF Web 服务进行文件上传的 MVC 网站。（使用 Asp.net 开发人员服务器）目前。（我对 WCF 很陌生）Web 服务配置为使用“POST”，即 [WebInvoke(Method = "POST"] 但是，之后我不断收到错误 405无数次尝试和浏览网页所花费的时间。我认为这可能与 web.config 文件中的设置有关。我只需要明确启用这项工作的确切设置。

这是我的服务合同

[服务合同]

```
 public interface IFileUpload
    {
        [WebInvoke(Method = "POST", UriTemplate = "FileUpload/{session}/{fileName}", BodyStyle = WebMessageBodyStyle.Wrapped)]
        bool Upload(string session, string fileName, Stream stream);

    } 
```

# drag-and-drop - 将outlook文件夹拖放到windows窗体

> ID：13727119
> 
> 赞同：1
> 
> 时间：2012-12-05T15:51:29.540
> 
> 标签：drag-and-drop, outlook, directory

我在 VB 2010 express 中有一个 windows 窗体。我正在从 Outlook 2003 拖放到表单。拖动消息工作正常。我在 eventArgs 中看到一个“文本”数据格式，它表示一个消息对象。然后为了避免事件 arg 难以记忆功能，我只需启动一个 Outlook.Application，从 activeExplorer 中获取选择，然后使用 Redemption 来做我需要做的事情（将每条消息作为 .msg 文件保存到网络）。但是现在我希望能够以相同的方式拖放整个 Outlook 文件夹。问题是，选择不反映我正在拖动的文件夹 - 它显示最后选择的文件夹或消息（在 Outlook 中开始拖放不会将选择更改为您正在拖动的文件夹）。而且 eventArgs 似乎只传输当前选择的消息（再次，与我拖动的文件夹无关）。那么我的表单如何找出我要拖动的文件夹呢？谢谢，菲尔

# c# - Asp.net MVC4 存储敏感用户数据

> ID：13727121
> 
> 赞同：0
> 
> 时间：2012-12-05T15:51:35.483
> 
> 标签：c#, session, cookies, asp.net-mvc-4, memcached

我有一个 Asp.Net MVC4 网站，它可以根据用户的登录凭据连接到多个数据库。为了获得用户的数据库访问列表，我必须在他们登录时执行一些复杂的连接。为避免多次执行此操作，我目前正在加密数据库 ID 并将其存储在 cookie 中。我现在意识到这可能不是一个好主意，甚至强加密也可能被破坏。此外，加密的 cookie 会在每次请求增加流量时传输。我现在正在考虑使用 HttpContext.Current.Cache 来存储数据。任何人都可以评论这是否是一个好主意。我也很想知道是否有更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:22:23.117

根据您的要求（即在会话中保留敏感的用户特定信息），正确的位置是[SessionState](http://msdn.microsoft.com/en-us/library/87069683%28v=vs.85%29.aspx)。AFAIK 会话状态可以在多个 Web 服务器之间共享，因此如果您确实使用了服务器场，则无需更改任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:17:29.277

会话是用户敏感数据的正确容器。或者您可以将其存储在数据库中并通过存储在会话中的某个标识符将其获取到那里（如果您存储大量数据，这很有用）。

# windows - 每次批处理脚本运行后如何清除变量？

> ID：13727125
> 
> 赞同：16
> 
> 时间：2012-12-05T15:51:45.317
> 
> 标签：windows, cmd, batch-file

似乎因为我使用 SET 在批处理脚本中声明我的变量，如果我在 cmd 中多次运行它，变量值将持续存在，除非我明确重置它们。

我是否必须使用 setlocal 和 endlocal 来确保一次运行的变量不会持续到另一次运行，而无需关闭 CMD？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-05T16:52:33.023

是的，您应该使用 SETLOCAL。这将本地化任何更改，以便在发出 ENDLOCAL 后恢复旧环境。

当所有脚本处理完成并且您返回到命令行上下文时，会为每个活动的 SETLOCAL 发出一个隐式 ENDLOCAL。无需明确发出 ENDLOCAL。

此外，如果您的脚本（或例程）是 CALLed，那么当 CALL 完成时，对于在 CALLed 例程中发出的每个活动 SETLOCAL，都会有一个隐式 ENDLOCAL。无需将 ENDLOCAL 放在例程的末尾，（尽管它没有伤害）

例如

```
@echo off
set var=pre-CALL value
echo var=%var%
call :test
echo var=%var%
exit /b

:test
setlocal
set var=within CALL value
echo var=%var%
exit /b 
```

输出：

```
var=pre-CALL value
var=within CALL value
var=pre-CALL value 
```

CALLed 例程中的 ENDLOCAL 永远不会回滚在 CALL 之前发出的 SETLOCAL。例如。

```
@echo off
setlocal
set var=VALUE 1
setlocal
set var=VALUE 2
echo before call: var=%var%
call :test
echo after call: var=%var%
endlocal
echo after endlocal: var=%var%
exit /b

:test
setlocal
set var=VALUE 3
echo within local CALL context: var=%var%
endlocal
echo within CALL after 1st endlocal: var=%var%
endlocal
echo within CALL cannot endlocal to before CALL state: var=%var%
exit /b 
```

结果：

```
before call: var=VALUE 2
within local CALL context: var=VALUE 3
within CALL after 1st endlocal: var=VALUE 2
within CALL cannot endlocal to before CALL state: var=VALUE 2
after call: var=VALUE 2
after endlocal: var=VALUE 1 
```

# jquery - 在jquery mobile中提交选择多个的数据

> ID：13727127
> 
> 赞同：0
> 
> 时间：2012-12-05T15:51:47.853
> 
> 标签：jquery, select

我有这个表格：

```
<form  id="filtri" action="ciao.php" method="post">
<select name="ruoli" id="ruoli" multiple="multiple" data-native-menu="false" tabindex="-1"><option data-placeholder="true"----scegli----</option>
                    <option value="POR">POR</option>
                    <option value="LIB">LIB</option>
                    <option value="ADA">ADA</option>
                    <option value="DC">DC</option>
                    <option value="TS">TS</option>
                    <option value="ASA">ASA</option>
                    <option value="CDC">CDC</option>
                    <option value="CC">CC</option>
                    <option value="COC">COC</option>
                    <option value="ES">ES</option>
                    <option value="AS">AS</option>
                    <option value="ATS">ATS</option>
                    <option value="ED">ED</option>
                    <option value="AD">AD</option>
                    <option value="ATD">ATD</option>
                    <option value="AT">AT</option>
                    <option value="ATT">ATT</option>
                </select></form> 
```

当我提交可以是多个值的值时，方法 post 或 get 只向我发送我选择的最后一个值。我怎样才能得到所有的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T09:31:13.303

是的，您应该使用 ruoli[] 作为您选择的名称。在这种情况下，您将传递一个名为 ruoli 的选定值数组。

```
$_POST['ruoli'] = array([0] => 'ADA', [1] => 'CDC', [2] => 'ATT') 
```

这个问题很老，但对其他人仍然有用；）

# python - 请求发布到 imgur

> ID：13727132
> 
> 赞同：1
> 
> 时间：2012-12-05T15:52:09.353
> 
> 标签：python, http, python-requests, imgur

```
from oauth_hook import OAuthHook
import requests, json
OAuthHook.consumer_key = "KEYHERE" 
OAuthHook.consumer_secret = "SECRET HERE"
oauth_hook = OAuthHook("TOKEN_KEY_HERE", "TOKEN_SECRET_HERE", header_auth=True)
headers = {'content-type': 'application/json'}
client = requests.session(hooks={'pre_request': oauth_hook}, headers=headers)
payload = {"title":"album title"}
r = client.post("http://api.imgur.com/2/account/albums.json",payload)
print r.text 
```

这应该创建一个带有标题的专辑，`album title`而不是返回字符串

```
{
    "albums": {
        "id": "IMGURID",
        "title": "",
        "description": "",
        "privacy": "public",
        "cover": "",
        "order": 0,
        "layout": "blog",
        "datetime": "2012-12-05 15:48:21",
        "link": "IMGUR LINK",
        "anonymous_link": "ANONYLINK"
    }
} 
```

有没有人有使用请求设置专辑标题的解决方案？

这是指向 imgur API 文档的链接[http://api.imgur.com/resources_auth](http://api.imgur.com/resources_auth)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:54:13.543

您没有发布 JSON 数据；相反，它将被转换为 URL 编码的数据。`requests`不提供自动 JSON 编码，即使您将内容类型设置为`application/json`.

使用`json`模块编码：

```
import json

r = client.post("http://api.imgur.com/2/account/albums.json", json.dumps(payload)) 
```

[`http://httpbin/post`您可以在使用POST echo 服务](http://httpbin.org/)时看到这一点：

```
>>> import json, requests, pprint
>>> headers = {'content-type': 'application/json'}
>>> payload = {"title":"album title"}
>>> pprint.pprint(requests.post('http://httpbin.org/post', payload, headers=headers).json)
{u'args': {},
 u'data': u'title=album+title',
 u'files': {},
 u'form': {},
 u'headers': {u'Accept': u'*/*',
              u'Accept-Encoding': u'gzip, deflate, compress',
              u'Connection': u'keep-alive',
              u'Content-Length': u'17',
              u'Content-Type': u'application/json',
              u'Host': u'httpbin.org',
              u'User-Agent': u'python-requests/0.14.2 CPython/2.7.3 Darwin/11.4.2'},
 u'json': None,
 u'origin': u'xx.xx.xx.xx',
 u'url': u'http://httpbin.org/post'}
>>> pprint.pprint(requests.post('http://httpbin.org/post', json.dumps(payload), headers=headers).json)
{u'args': {},
 u'data': u'{"title": "album title"}',
 u'files': {},
 u'form': {},
 u'headers': {u'Accept': u'*/*',
              u'Accept-Encoding': u'gzip, deflate, compress',
              u'Connection': u'keep-alive',
              u'Content-Length': u'24',
              u'Content-Type': u'application/json',
              u'Host': u'httpbin.org',
              u'User-Agent': u'python-requests/0.14.2 CPython/2.7.3 Darwin/11.4.2'},
 u'json': {u'title': u'album title'},
 u'origin': u'xx.xx.xx.xx',
 u'url': u'http://httpbin.org/post'} 
```

如果您使用的是`requests`2.4.2 或更高版本，则可以将编码留给库；只需将有效负载作为`json`关键字参数传入；顺便说一句，在这种情况下它还会设置正确的 Content-Type 标头：

```
r = client.post("http://api.imgur.com/2/account/albums.json", json=payload) 
```

# ruby-on-rails - 将 Rails 应用程序切换到 Postgres 后出错 - ActiveSupport::SafeBuffer

> ID：13727134
> 
> 赞同：0
> 
> 时间：2012-12-05T15:52:15.087
> 
> 标签：ruby-on-rails, postgresql, activesupport

我是编程和 Rails 的新手，所以请原谅任何重大疏忽。我最近将一个 rails 应用程序部署到 heroku，并将所有环境切换到我的数据库的 postgres。Heroku 在 Postgres 上工作得很好 - 运行 rake db:drop db:migrate db:create db:seed all 用 rake 任务填充我的数据库，测试了应用程序搜索表单、过滤器、数据查询等。一切都很好。

但是我现在在启动本地服务器并转到我的两个具有排序的视图后，在浏览器中收到一条错误消息，显示“ActiveSupport::SafeBuffer 与 nil 的比较失败” - 浏览器将我指向 a 中的一行有的视图

```
<% @price_array.sort! {|x,y| x <=> y} %> 
```

这是我在服务器日志中看到的：

```
Rendered skis/index.html.erb within layouts/application (212.9ms)
Completed 500 Internal Server Error in 280ms

ActionView::Template::Error (comparison of ActiveSupport::SafeBuffer with nil failed):
51:                     <% ski.inventories.each do |inventory| %>
52:                         <% a.push(number_to_currency(inventory.price)) %>
53:                         <% end %>
54:                         <% @lowest_price = a.sort { |x,y| x <=> y} %>
55:                         from <%= @lowest_price.first %>
56:                     </br>
57:                 </li>
app/views/skis/index.html.erb:54:in `sort'
app/views/skis/index.html.erb:54:in `block in_app_views_skis_index_html_erb___2303745325449705978_70146899313600'
app/views/skis/index.html.erb:32:in `each'
app/views/skis/index.html.erb:32:in `_app_views_skis_index_html_erb___2303745325449705978_70146899313600'
app/controllers/skis_controller.rb:32:in `index' 
```

这可能与我遇到的问题有关 - 我似乎无法删除我的 postgres 数据库。

这是我在终端中使用 postgres 看到的：

```
postgres=# \dbdrop postgres
List of tablespaces
Name | Owner | Location 
------+-------+----------
(0 rows) 
```

我昨晚做的另一件事是按照此处的说明更新我的 .bash_profile (http://stackoverflow.com/questions/6770649/repairing-postgresql-after-upgrading-to-osx-10-7-lion)。这就是我的 .bash_profile 现在的样子：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function

PATH=/usr/local/bin:$PATH 
```

postgres 中是否有一些我缺少的配置导致此错误？任何帮助或资源将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:45:53.417

你的数组中有`nil`值。`a`尝试 ：

```
 a.compact.sort 
```

`compact`删除数组中所有出现的 nil 。

# sql - 数据库设计：当数据结构不是静态时如何避免序列化

> ID：13727135
> 
> 赞同：4
> 
> 时间：2012-12-05T15:52:14.227
> 
> 标签：sql, database, sqlite, database-design

我最近遇到了设计数据库的需要。由于这是我第一次，我想我最好征求一些建议，以确保我建立在坚实的基础上。

**目标**

我想将对象（最好被认为是多映射的 POD 结构）存储在 SQL 数据库中以进行存储和查询。对象的内容及其“结构”不断被修改。将通过查询和更新密集访问数据库。

**用例**

首先，每个对象都应该有一个唯一的标识符。

其次，存在不同类型的对象。例如，ObjectA 是 ClassA 的一个实例。ClassA 可以具有属性 A1、A2、A3 等。因此，ObjectA 可以（但不是必需的，允许 NULL）具有这些属性的值。但是，这些属性中的每一个都可能有多个值，即：`ObjectA.A1="foo"`并且 `ObjectA.A1="bar"`都是可能的。ClassA 的属性数量可以改变。为简单起见，属性只能添加，不能删除。

第三，属性并不特定于一个类，即：ClassB的对象也可以具有属性A1、A2等。这样`ObjectB.A1="foo"`也是可能的。我不确定这是否会改变任何东西，但我感觉它可能在每个属性对应于一个表的设计中。

最后，必须支持以下伪查询和操作：

*   获取属性 A1 等于“bar”的 ClassA 类型的所有对象。
*   获取ObjectB的所有属性。
*   将属性 A4 添加到 ClassA 类型的对象。
*   添加一个 ClassC 类型的对象，该对象具有属性 A1="foobar"、A2="bar"。

**限制**

首先，我想避免序列化数据，因此单列中的多个值是不可能的。数据库应该被规范化，数据结构应该是原子的。数据库会被非常频繁地查询，所以我不能浪费时间尝试实现复杂的查询机制。我最终会重新发明轮子（也可能是方形的）。

其次，我不能使用对象内部结构的任何先验知识，因为这只会在运行时可用。例如，在上面的用例中，属性是事先不知道的。因此，虽然我曾想过设计一个每个属性都是一个表格，但我无法弄清楚如何在这样的设置中获取对象的所有属性。

**环境**

我正在使用 SQLite 3.7，C++。

**问题**

什么是满足所描述问题要求的适当、灵活的数据库设计？

非常欢迎任何有助于获得有用见解或可靠设计的帮助、指示或提示。

谢谢！

ps：我对关系数据库只有基本的理论知识和有限的实践经验，当然没有之前的专业经验。过去一周我一直在阅读这个主题，并掌握了一些我认为与我的案例相关的概念（规范化、外键等），但此刻我仍在阅读我的书。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:17:56.437

如果这是您第一次外出，并且您的项目与看起来一样重要，您可能需要投入时间和精力从头开始学习基础知识。CJ Date 和许多其他作者的书籍和在线教程可以带您了解基础知识。他们是优秀的作品。

IT 中的某些领域几乎完全是临时性的。不是这样的数据库设计。首先，大约 42 年前，EF Codd 在一个非常坚实的数学基础上奠定了基础，并且随着时间的推移，基本模型一直保持得很好。有进步，但几乎没有倒退。为了改变而改变很少。

SQL 在其漫长的生命周期中同样享有很大的稳定性。

其次，数据库设计中的反复试验可能代价高昂。有几十个案例表明，新手做出的不幸选择最终导致数百万的数据投资损失惨重，但没有成功。

反复试验有它的位置。技巧和窍门各有千秋。SO上的答案有它们的位置。但正式学习也是如此。

# c# - ASP.NET MVC C# routes.MapRoute 不工作

> ID：13727142
> 
> 赞同：2
> 
> 时间：2012-12-05T15:52:45.770
> 
> 标签：c#, asp.net-mvc

我正在更改一个 ASP.NET、MVC、C# 应用程序，但一个`routes.MapRoute`条目没有按预期工作。在我的 Global.asax.cs 文件中，我有以下两条路线 -

```
routes.MapRoute(
            "MyRoute1", // Route name
            "{controller}/{action}/{something}/{name}/{id}/{myParameterA}", 
            new { controller = "MyController", action = "MyActionA", category = "something", name = "name", id = "id", myParameterA = "myParameterA" });

routes.MapRoute(
            "MyRoute2", // Route name
            "{controller}/{action}/{something}/{name}/{id}/{myParameterB}", 
            new { controller = "MyController", action = "MyActionB", category = "something", name = "name", id = "id", myParameterB = UrlParameter.Optional } ); 
```

我的控制器中的代码如下所示 -

```
 public ActionResult MyActionA(string something, string name, string id, string myParameterA)
    {
       //do cool stuff!
    }

    public ActionResult MyActionB(string something, string name, string id, string myParameterB)
    {
       //do awesome stuff!
    } 
```

当我调用时，即使参数在 URL 中`MyActionB`，最终参数也会作为**null**`myParameterB`进入控制器- （例如：/MyController/MyActionB/aThing/aName/123/456）。

 **我*确实*希望最后一个参数（在上面的示例中为“456”）是可选的。

`MyActionA`工作正常。

任何建议，将不胜感激！此外，是否有关于如何`routes.MapRoute`工作的良好参考？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:26:35.633

不确定，但我认为交换两者，当您在第一个设置“myParameterA = “myParameterA””时，您正在分配一个默认值，当您传递 /MyController/MyActionB/aThing/aName/123/456 时，网址是映射到第一个，但数字 456 与默认字符串值不兼容 - 因此作为 null 传递。

编辑：哦，作为一个很好的参考，Apress Pro MVC 3 有一个很好的章节 - Safari Informit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:28:28.420

这是因为一旦将参数替换为路由本身中的字符串，就没有什么可以区分这两条路由的了。如果您向路线添加静态部分，您应该能够区分它们。

```
routes.MapRoute(
        "MyRoute1", // Route name
        "{controller}/{action}/{something}/{name}/{id}/firstroute/{myParameterA}", 
        new { controller = "MyController", action = "MyActionA", category = "something", name = "name", id = "id", myParameterA = "myParameterA" });

routes.MapRoute(
        "MyRoute2", // Route name
        "{controller}/{action}/{something}/{name}/{id}/secondroute/{myParameterB}", 
        new { controller = "MyController", action = "MyActionB", category = "something", name = "name", id = "id", myParameterB = UrlParameter.Optional } ); 
```

看看这是否有效。**

# javascript - videojs公共方法访问外部就绪函数和IE

> ID：13727143
> 
> 赞同：2
> 
> 时间：2012-12-05T15:52:48.827
> 
> 标签：javascript, internet-explorer, object, html5-video, public-method

我在 videoJS 之上构建了一个播放器，但无法访问 videoJS 中的公共功能`.ready()`。问题是我的代码似乎在除 IE 之外的任何地方都可以使用（适用于 chrome、safari、ff 等）：

```
var myPlayer = _V_('myvideojsId');
myPlayer.ready(function() {
    var player = this;
    player.myPublicFunction = function() {
        alert("hey!");
    }
});

myPlayer.myPublicFunction(); 
```

在 IE 中我得到

```
Object does not support this property or method 
```

上`myPlayer.myPublicFunction()`线。是其他浏览器让我摆脱了糟糕的代码还是这个 IE 的错？

任何帮助都会很棒，谢谢！

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:24:20.757

参考他们的文档，它准确地显示了乔纳森所说的： [https ://github.com/zencoder/video-js/blob/master/docs/api.md#wait-until-the-player-is-ready](https://github.com/zencoder/video-js/blob/master/docs/api.md#wait-until-the-player-is-ready)

顺便说一句，他对 IE 的看法是正确的。尽管我们都喜欢讨厌它，但它多次为我发现了真正的问题。

只是为了更快地参考，这是完成此操作的方法的替代方法：

```
_V_("example_video_1").ready(function(){

  var myPlayer = this;

  // EXAMPLE: Start playing the video.
  myPlayer.play();

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:59:25.243

这可能是时间问题：

```
myPlayer.ready(function() {});
myPlayer.myPublicFunction(); 
```

您在此处的第一行传递一个函数，`myPlayer`以便在玩家*准备好*时调用。在大多数情况下，这不会立即发生，因此很可能会有延迟。这意味着您的公共函数不会`myPlayer`立即添加到对象中，而是在视频播放器*就绪*时完成此任务。

所有这一切意味着当 JavaScript 移动到第二行时，来自浏览器的适当响应是该方法不存在——因为它不存在。*在视频播放器准备好*之前它不会存在，直到稍后才会存在。

您可以使用更多的特征检测方法，并且仅在该方法存在时才调用该方法：

```
if (myPlayer.myPublicFunction) {
    myPlayer.myPublicFunction();
} 
```

您也可以预先添加该方法：

```
myPlayer.myPublicFunction = function () { alert("Foo"); };
myPlayer.ready(callback);
myPlayer.myPublicFunction(); // 'Foo' 
```

最后，我发现 Internet Explorer 不像其他浏览器那样宽容（这很好）。如果它今天起作用，很可能是因为代码中存在问题。

# c89 - C90 转换为底层抽象类型

> ID：13727151
> 
> 赞同：0
> 
> 时间：2012-12-05T15:53:15.113
> 
> 标签：c89, splint

依赖于日志相关函数的日志结构如下所示：

```
typedef struct 
{
    TFkt_vlogf vlogf;
    TFkt_outf outf;
    void* logData;
} TLogger; 
```

在这个日志记录函数中，有一个抽象的 logData，它根据记录器的作业分配了不同的指针。

Filelogger 会像这样访问存储的文件句柄。

```
FILE * fileHandle = (FILE *)(logger->logData); 
```

虽然这可以编译，但 SPLint 对此不满意并抱怨此消息：

转换为底层抽象类型`FILE *`：`(FILE *)(logger->logData)`

我能做些什么来满足 SPLint？

*   我试着洒一些`/*@abstract@*/`，但没有帮助

C90 中是否有更好的方法来存储和访问数据，同时仍然保持结构签名以独立于其实现来传递类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:47:29.727

更好的解决方案是使用联合并在该联合中包含所有可能的数据。

```
typedef union
{
    FILE * fileHandle;
    char something;
    long int other;
} TLog_data;

typedef struct 
{
    TFkt_vlogf vlogf;
    TFkt_outf outf;
    TLog_data logData;
} TLogger; 
```

在执行期间的某个时刻，您将使用：

```
((TLogger*) logger)->logData.fileHandle 
```

# .htaccess - 如何在 .htaccess 中设置 RewriteModule？

> ID：13727156
> 
> 赞同：0
> 
> 时间：2012-12-05T15:53:31.807
> 
> 标签：.htaccess, url-rewrite-module

我将举一个中肯的例子。

我有一个域名：www.abc.com

另一个域名为：www.123.com

**现在我想在 .htaccess 中为以下情况编写一个重写模块：**

如果我请求这样的网址：www.123.com/xyz

它会将我的请求重定向到 www.abc.com/track/index.php?ext=xyz

另外请告诉我应该将那个 .htaccess 文件保存在哪个目录中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:11:25.170

在 www.123.com 的根文件夹中，您将使用以下行创建一个 htaccess 文件：

```
RedirectMatch 301 (.*) www.abc.com/track/index.php?ext=$1 
```

由于您正在执行外部重定向，因此没有必要使用 mod_rewrite。

# php - PHP/MySQL - 点击按钮更新数据库/运行 PHP 脚本

> ID：13727160
> 
> 赞同：0
> 
> 时间：2012-12-05T15:53:36.953
> 
> 标签：php, html, mysql, button

我在 PHP 中有一个“注册”页面，我希望脚本在单击 HTML 按钮时运行。

PHP 基本上检查所有字段是否填写，检查密码和电子邮件确认是否相同并保存到数据库。

这是代码：

```
<?php
$Name = isset($_POST['Name']);
$Surname = isset($_POST['Surname']);

$Username = isset($_POST['Username']);

$Email = isset($_POST['Email']);
$C_Email = isset($_POST['C_Email']);

$Password = isset($_POST['password']);
$C_Password = isset($_POST['c_password']);

$SecQ = isset($_POST['SecQ']);
$SecA = isset($_POST['SecA']);

$con = mysql_connect('localhost', 'admin', 'storefile1234');
mysql_select_db ("storefile");

$check_username = mysql_query("SELECT FROM users WHERE username = '$Username'");
$check_email = mysql_query("SELECT FROM users WHERE Email = '$Email'");

if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }

if ($Name == null || $Surname== null || $Username == null || $Password == null || $C_Password == null || $Email == null || $C_Email == null || $SecQ == null || $SecA == null ) {

    echo "Missing details. Please enter all fields.";

} else {

    if(mysql_num_rows($check_username) != 0 && mysql_num_rows($check_email) != 0)
            {
            echo "Username/Email already exists";
            }
            if  ($Email == $C_Email && $Password == $C_Password) {

                $query = "INSERT INTO users (Username, Name,Surname, Password, Email, SecQ, SecA) VALUES ('NULL', ".$Username."', ".$Name."', ".$Surname."', ".$Password."', ".$SecQ."', ".$SecA."', ".$Email.')"';

                mysql_query($query) or die ('Error registering.');

                echo "Greetings, ".$Name.", you have been registered. ";

    }  else {

        echo "Error registering your account. Please try again.";
            }

 }

?> 
```

还有，推荐吗？

每当我运行此页面时，都会`Missing details. Please enter all fields.`显示，而无需输入任何详细信息。

你怎么做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:58:12.430

你想通过和喜欢这个函数来获取值`isset($_POST['Username']);`......
但是[文档](http://php.net/manual/en/function.isset.php)说：`Returns TRUE if var exists and has value other than NULL, FALSE otherwise.`

所以检查一下`true`，坚果`null`。并在之后转义您的 POST 数据。

你可以这样做：

```
$Name = isset($_POST['Name']) ? mysql_real_escape_string($_POST['Name']) : null; 
```

PS请再次。不要使用`mysql_*`函数。它们已**弃用**。
查看**[PDO](http://php.net/manual/en/class.pdo.php)**（或`mysqli_*)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:58:28.060

你滥用`isset`

尝试这样的事情：

```
$Name = null;
if (isset($_POST['Name'])) {
    $Name = $_POST['Name'];
} 
```

`isset`只是检查是否设置了值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:08:48.833

对于首次加载页面时打印该消息的问题，请使用 array_key_exists 函数测试用户是否已经提交了某些内容，然后再检查任何字段是否为空。像这样的东西：

```
if (array_key_exists('Name', $_POST) || array_key_exists('Surname', $_POST) || ... ) 
    if ($Name == null || $Surname== null || ... ) 
        echo "Missing details. Please enter all fields."; 
```

观察：您不能将 isset 函数用于相同目的，因为根据 php 文档，它“确定变量是否已设置**且不为 NULL** ”

# java - 保留 CDATA 用于 xstl 转换？

> ID：13727161
> 
> 赞同：0
> 
> 时间：2012-12-05T15:53:38.810
> 
> 标签：java, xml, saxon

我正在从 XML 文档中使用撒克逊语进行 xstl 转换。该文档不是标准有效的 XML，我想保留`<![CDATA[<`在那里找到的所有元素。

但是使用 .xsl 文件进行转换

```
Transformer trans = TransformerFactory.newInstance().newTransformer(new StreamSource(new File("foo.xsl"));
trans.transform(new StreamSource(new File("foo.xml"), new StreamResult(new File("output.xml"))); 
```

导致剥离这些 CDATA 条目。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:15:19.137

您不能，因为在 xslt 使用的数据模型中不提供来自 cdata 部分的文本的区别。但是，您可以在样式表中定义某些结果元素将被包装在 cdata 中。这是使用样式表中[元素的](http://www.w3.org/TR/xslt#output)[`cdata-section-elements`属性来完成的。`xsl:output`](http://www.w3.org/TR/xslt#output)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:21:00.710

考虑使用 Andrew Welch 的 LexEv 工具（我相信与 KernowForSaxon 捆绑在一起），它将 CDATA 开始和结束标记预处理为不同的东西（可能是处理指令？），这些在 XSLT 数据模型中可见，因此可用于应用程序。

# c# - ASP.Net MaxPoolSize 配置问题

> ID：13727163
> 
> 赞同：1
> 
> 时间：2012-12-05T15:53:50.493
> 
> 标签：c#, asp.net, .net, web-applications, connection-pooling

我对 .Net Application Scalability 了解不多，我相信一些 SO 用户对此了解更多，可以帮助我。

我知道过去已经提出了一些关于连接池溢出的问题。大多数时候，它最终会谈论“如何正确关闭连接”（我强烈认为这不是我的情况，因为我所有的 LinqToSQL 查询都是`Disposed`相应地使用这种代码）：

```
using (MyDataContext context = new MyDataContext())
{
    return (from o in context.t_Orders
            where o.order_id.Equals(_id)
            select o).ToList();
} 
```

此外，我读过的大多数答案最终都说“一个网站不应该需要很多并发连接，即使对于数百个用户也是如此”。但我说的是一个庞大的 WebApp，有超过 500 个并发用户（他们可能在相同的 2 分钟范围内登录）。此外，每个页面访问都记录在一个表中（因此考虑多次读取和插入）。

现在，我想知道默认`MaxPoolSize`的 100 个连接是否足够或可能存在风险？如果它可能代表任何风险，我应该如何修改连接池设置？我是否应该`MaxPoolSize`将并发用户增加到一定百分比。会不会有什么负面影响？或者我应该增加`ConnectionTimeout`以防止任何`InvalidOperationException`？

顺便说一句，我完全红了 William Vaughn 的文章“ [.NET 连接池救生员 - 防止可能淹没您的应用程序的池溢出](http://msdn.microsoft.com/en-us/library/aa175863%28SQL.80%29.aspx)”，但我仍然很担心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:54:03.307

并发用户没有任何意义。并发请求更有意义。您会同时处理 100 多个请求吗？在那种情况下，我肯定会增加最大池大小，因为增加设置本身没有成本。

您可以放心地将其增加到至少 250。如果您想做更多，您需要测试（或重新设计应用程序）。

# configuration - 有没有办法在复制依赖目标期间使用 maven-dependency-plugin 在测试和编译之间划分工件？

> ID：13727165
> 
> 赞同：8
> 
> 时间：2012-12-05T15:53:55.147
> 
> 标签：configuration, maven-2, maven-dependency-plugin

我有以下配置：

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-dependency-plugin</artifactId>
  <version>2.6</version>
  <executions>
      <execution>
          <id>analyze</id>
          <goals>
              <goal>analyze-only</goal>
          </goals>
          <configuration>
              <failOnWarning>false</failOnWarning>
          </configuration>
      </execution>
      <!--Copy the dependencies so ant build has the same versions-->
      <execution>
          <id>copy-dependencies</id>
          <phase>package</phase>
          <goals>
              <goal>copy-dependencies</goal>
          </goals>
          <configuration>
              <outputDirectory>${project.basedir}/lib</outputDirectory>
              <overWriteIfNewer>true</overWriteIfNewer>
              <stripVersion>true</stripVersion>
              <overWriteReleases>false</overWriteReleases>
              <overWriteSnapshots>true</overWriteSnapshots>
              <excludeTransitive>false</excludeTransitive>
          </configuration>
      </execution>
  </executions>
</plugin> 
```

上述配置将所有内容转储到同一文件夹中。我尝试通过添加测试配置来排除测试范围，但出现错误：

> 无法在项目 pcgen 上执行目标 org.apache.maven.plugins:maven-dependency-plugin:2.6:copy-dependencies (copy-dependencies)：无法排除测试范围，这将排除所有内容。

有没有办法将测试依赖项与其他依赖项分开，以便我可以复制到不同的文件夹？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-02T06:15:50.213

> I tried excluding the test scope by adding the test configuration but gives an error

I just stumbled across this, probably for very different reasons, but I think I found us both the answer. Try this, for example. You'll need pom.xml in the current directory, of course.

```
mvn dependency:copy-dependencies \
-DincludeScope=runtime \
-DexcludeScope=provided \
-DoutputDirectory=target/war/WEB-INF/lib 
```

A huge belated thanks to Brian Fox, who writes on [Maven Dependency Plugin Issue #128](http://jira.codehaus.org/browse/MDEP-128):

> You shouldn't ever need to include or exclude two scopes at the same time because they are comprised of each other. The default is to include test scope, which includes everything. If you don't want any test dependencies or provided dependencies, then include runtime and exclude provided.
> 
> The scopes being interpreted are the scopes as maven sees them, not as specified in the pom. So the "test" scope includes everything, runtime includes compile but not provided etc.

In May 2013, the [includeScope documentation was updated](http://svn.apache.org/viewvc?view=revision&revision=r1481514) to:

```
/**
  * Scope to include. An Empty string indicates all scopes (default).
  * The scopes being interpreted are the scopes as
  * Maven sees them, not as specified in the pom. In summary:
  * <ul>
  * <li><code>runtime</code> scope gives runtime and compile dependencies,</li>
  * <li><code>compile</code> scope gives compile, provided, and system dependencies,</li>
  * <li><code>test</code> (default) scope gives all dependencies,</li>
  * <li><code>provided</code> scope just gives provided dependencies,</li>
  * <li><code>system</code> scope just gives system dependencies.</li>
  * </ul>
  * 
  * @since 2.0
  */
 @Parameter( property = "includeScope", defaultValue = "" )
 protected String includeScope; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T00:11:28.187

确实使用`includeScope`，测试范围包括每个范围，这就是失败的原因。

```
<includeScope>runtime</includeScope> 
```

# android - 合并两个文本视图的相对布局

> ID：13727166
> 
> 赞同：0
> 
> 时间：2012-12-05T15:53:54.567
> 
> 标签：android, merge, textview, android-relativelayout

我有一个相对布局，其中 textviews 排列在一列以上。单击屏幕时，有一个“弹出屏幕”或“输入屏幕”（不知道如何调用），其中我定义了“从”和“到”的时间，学校班级的名称等。它将计算它需要从该输入合并哪些文本视图。合并的文本视图必须像一个更大的文本视图。有可能做这样的事情吗？

谢谢前面的回答。

像这样的东西：http: [//i.stack.imgur.com/r1o8D.png](http://i.stack.imgur.com/r1o8D.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T15:06:26.757

我有一个想法，您可以尝试创建一个自定义视图来绘制它而不是使用视图。

在新类中扩展 View 类并覆盖 onDraw 方法。

```
//variables
Paint paint[]; //Set up these paints with the colors you need
int rowWidth, int colHeight;
void onDraw(Canvas c){
    for(int i=0;i<noOfRows;i++){
       for(int j=0;j<noOfColumns;j++){
            if(cellRequired(i,j)){
              //cellRequired will be whatever logic you have to check if cell is required

                int rectHeight=colHeight; //Now the Rect Height changes whether the cell
                                         //  below is in use or not.
                for(int k=i;k<noOfRows;k++){                         
                     //This loop will run through the rows and see if merging is required
                      if(cellRequired(i,k))
                             rectHeight+=colHeight; //Merge Cell
                      else 
                              break; //If not required at any point break loop
                 }
                 //Draw Rectangle background
                 c.drawRect(i*rowWidth +i, j*colHeight +j, rowWidth, rectHeight, backPaint);
                 //Draw Text
                 canvas.drawText("Text",i*rowWidth +i, j*colHeight +j, paint[requiredPaint]);
                 //I added the plus i and plus j so there'd be a gap in the rectangles
                 // Then it will be a border
            }         
       }
    }
} 
```

关于自定义控件的 Android 文档

[Android：自定义视图创建教程](https://stackoverflow.com/questions/2401048/android-tutorial-on-custom-view-creation)

如何制作类似于上面的自定义视图

[http://www.droidnova.com/playing-with-graphics-in-android-part-i,147.html](http://www.droidnova.com/playing-with-graphics-in-android-part-i,147.html)

通过这些，然后通过上面的代码。希望它应该向您展示如何实现它。

# objective-c - 架构 armv7 的 106 个重复符号

> ID：13727167
> 
> 赞同：6
> 
> 时间：2012-12-05T15:54:01.370
> 
> 标签：objective-c, ios, xcode, armv7, cocoapods

在我的 iPhone 应用程序上工作并尝试构建以进行调试，我得到“106 个重复的架构 armv7 符号”？

我正在使用 .workspace 文件，因为我正在尝试使用 CocoaPods。如果我不使用 .workspace 而是使用 .xcodeproj 我不会收到错误消息，但是我会丢失 -lPods 。

在我的项目中，我在项目导航器中有以下目标。

```
Pods (blue icon)
MyProject (blue icon)
  Restkit.xcodeproj (blue icon)
  ... all my files 
```

问题是 Restkit 引用了“AFHTTPClient.h”和所有其他 AF 代码，但我通过 CocoaPods 包含了它。我尝试从 RestKit 库中删除 AFNetworking 文件夹，但显然 Restkit 库找不到 AFNetworking 的 Pods 版本？

有没有办法让 RestKit 使用 Pods 版本？如果不是，我该如何从我的项目中删除 Pod？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-30T09:11:59.577

您写的一个 .h 文件中有一行

```
#include "___.m" 
```

代替

```
#include "___.h" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T08:37:29.063

“*架构重复符号*”问题出现在两种情况下：

1.  您在项目中添加了两次 .m 文件

2.  您正在使用一个静态库（.a 文件），其中已经包含一些您包含在项目中的类。

要修复任何这些情况，请检查链接器错误并查找重复的 .o 文件（示例：Reachability.o）​​。

然后进入**构建阶段 -> 编译源**并搜索指定的文件，如果任何一个出现两次删除其中一个，如果只出现一次则意味着该文件也包含在添加到您的项目中的静态库之一中。从要编译的源列表中删除它，然后重试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T19:55:48.917

我也想出了同样的错误。通常，由于项目文件夹中的类和 xib 重复，会发生这种错误。例如，在我的项目中，我有两次这些课程`ServiceRequest.h/.m`。摆脱重复的，你很高兴。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T15:58:10.950

所以我修好了。从供应商文件夹中删除 AFNetworking 的 RestKit 版本后，我通过将其拖回 Xcode 中将其添加回来。它询问我希望它使用/复制到哪个项目，这次我选择了 RestKitTest（或任何 RestKitTesting 的名称）。现在可以了。也许我之前同时选择了 RestKit 和 RestKitTest，这是错误的？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-13T21:47:07.103

在 Build Phases -> Compile Sources 中，确保没有将同一个文件添加两次。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-24T13:50:22.360

*   当我将葫芦框架拖放到 xcode 上并在显示的窗口中选择添加到目标选项时，我看到了这个错误。基本上有两个对添加的文件的引用我必须手动删除葫芦框架

*   正确的做法

    > 复制到葫芦框架到项目目录然后转到xcode项目选择目标->构建阶段->将二进制文件与库链接并使用+按钮添加框架

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-10-18T23:49:22.710

我注意到在安装 cocoaPods 后，Google 分析也会导致重复符号。一旦我删除了其中一个档案，libGoogleAnalytics_debug.a 或 libGoogleAnalytics.a 重复就消失了。但很明显，如果我删除调试之一，我将无法运行 os 模拟器，反之亦然。我知道这不是解决方案，但至少它可以让您了解什么是解决方案。如果我想知道在这种情况下如何同时拥有两个文件，我会回到这个线程。

编辑：我能够通过从 G 分析版本 2 升级到 3 来解决这个问题。它只有一个库文件，我想这就是我们不再得到重复符号的原因。我希望这是有道理的。

# ruby-on-rails - Ruby 逻辑和/或链

> ID：13727169
> 
> 赞同：0
> 
> 时间：2012-12-05T15:54:05.393
> 
> 标签：ruby-on-rails, ruby, validation, logic

我正在尝试在我的一个应用程序的模型中编写一些验证逻辑。我想构建的逻辑看起来像这样。

```
def validation
    if this == true or (!that.nil? and those < 1000)
       do something
    else
       do nothing
end 
```

是否可以在 ruby​​ 方法中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:01:29.503

你当然可以。但是，有两点需要注意：

*   我怀疑你的意思是`this == true`而不是`this = true`.
*   `and`使用and`or`而不是`&&`and时要非常小心`||`- 它们*并不*等效。阅读[ruby​​ 中的运算符优先级](http://www.techotopia.com/index.php/Ruby_Operator_Precedence)，它与 PHP 等其他语言略有不同。对于大多数逻辑语句，您最好坚持使用`&&`and`||`并保留使用`or`and`and`来控制流，例如`redirect and return`.

所以你的具体例子应该是这样的：

```
 if this == true || (!that.nil? && those < 1000)
   do something
 else
   do nothing
 end 
```

在这种特殊情况下，括号是多余的，因为`&&`前面是`||`，但它们不会受到伤害，对于更复杂的事情，使用它们来避免由于对运算符优先级的误解而产生的歧义和微妙的错误是一种很好的做法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:04:48.660

当然，我只建议您创建较小的方法，例如比较每个属性并在该方法上调用它们的方法。

```
def validation
  if this? or others?
    #do something
  else
    #do nothing
  end
end

private

def others?
  that? and those?
end

def this?
  this == true
end

def that?
  that != nil
end

def those?
  those < 1000
end 
```

# .net - Wix 引导程序不会检测到已安装的 .NET 框架

> ID：13727170
> 
> 赞同：4
> 
> 时间：2012-12-05T15:54:07.827
> 
> 标签：.net, wix, version, bootstrapper

我有一个 Wix 安装程序和引导程序应用程序来安装我的应用程序和服务。作为先决条件，我需要安装 .NET 2.0 SP2 Framework 并尝试使用以下代码片段来检测它：

```
 <Chain>
      <PackageGroupRef Id='Netfx2Package' />
      <MsiPackage SourceFile="..\Wix.CHL7.Dispatcher.Service.AZHF\bin\Debug\Wix.CHL7.Dispatcher.Service.AZHF.msi" Id="Wix.CHL7.Dispatcher.Service.AZHF_PackageId" Cache="yes" Visible="no">
        <MsiProperty Name="INSTALLDIR" Value="[INSTALLPATH]" />
        <MsiProperty Name="WixAppFolder" Value="[INSTALLSCOPE]"/>

      </MsiPackage>
    </Chain>
  </Bundle>

  <Fragment>
    <WixVariable Id="WixMbaPrereqPackageId" Value="Netfx2Package" />
    <WixVariable Id="WixMbaPrereqLicenseUrl" Value="NetfxLicense.rtf" />      

    <PackageGroup Id="Netfx2Package">
      <ExePackage Id="Netfx2Exe"
                  Cache="no"
                  Compressed="no"
                  PerMachine="yes"
                  Permanent="yes"
                  Vital="yes"
                  SourceFile="C:\Installation\Wix.CHL7.Dispatcher.Service.Bootstrapper\lib\NetFx20SP2_x86.exe"
                  DownloadUrl="http://download.microsoft.com/download/c/6/e/c6e88215-0178-4c6c-b5f3-158ff77b1f38/NetFx20SP2_x86.exe"
                  DetectCondition="NETFRAMEWORK20"
                  InstallCondition="FALSE"/>
    </PackageGroup>
  </Fragment> 
```

当我在安装了 .NET 2.0 SP2 的机器上运行安装程序时（在注册表中进行了检查），我的安装程序想要下载并安装框架。

我认为我的 DetectCondition 不正确，但似乎无法找到解决问题的正确方法。那么如何检测我的引导程序中是否安装了 .NET 2.0 SP2？

提前致谢！

W

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:05:33.913

确保正确引用 NetFxExtension。

资料来源：[WixNetfxExtension](http://wix.sourceforge.net/manual-wix3/wixnetfxextension.htm)

> 使用 WixNetfxExtension 属性 要在 MSI 中使用 WixNetfxExtension 属性，请使用以下步骤：
> 
> 为上面列出的要在 MSI 中使用的项目添加 PropertyRef 元素。在调用 light.exe 时添加 -ext 命令行参数以在 MSI 链接过程中包含 WixNetfxExtension。
> 
> 例如：

```
<PropertyRef Id="NETFRAMEWORK20" /> 
```

此外，如果您需要 SP2，您可能希望使用该属性`NETFRAMEWORK20_SP_LEVEL`来获得相应的服务包级别。在进行故障排除时，我还会检查安装日志以查看它是否指示属性值设置为什么。

# vb.net - 整个表单上的vb.net Keydown事件

> ID：13727172
> 
> 赞同：12
> 
> 时间：2012-12-05T15:54:11.587
> 
> 标签：vb.net, keydown

我有一个带有多个控件的表单。无论任何控件事件，我都想在 keydown 事件上运行特定的子。我的意思是，如果用户在表单上的任意位置按 Ctrl+S，它就会执行一个子例程。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-05T15:55:39.327

您应该将表单上的[KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)属性设置为 True 并在那里处理 keydown 事件

> 当此属性设置为 true 时，表单将接收所有 KeyPress、KeyDown 和 KeyUp 事件。在窗体的事件处理程序完成对击键的处理之后，击键被分配给具有焦点的控件。.......... 要仅在表单级别处理键盘事件并且不允许控件接收键盘事件，请将表单的 KeyPress 事件处理程序中的 KeyPressEventArgs.Handled 属性设置为 true。

因此，例如，要处理 Control+S 组合键，您可以为表单 KeyDown 事件编写此事件处理程序。

```
Private Sub Form1_KeyDown(ByVal sender As Object, ByVal e As KeyEventArgs) Handles MyBase.KeyDown
    If  e.Control AndAlso e.KeyCode = Keys.S then
        ' Call your sub method here  .....
        YourSubToCall()

        ' then prevent the key to reach the current control
        e.Handled = False 
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:01:25.553

我以前在我的表单中使用过这个代码，它似乎工作得很好。

```
Protected Overrides Function ProcessKeyPreview(ByRef m As System.Windows.Forms.Message) As Boolean
    If m.Msg = &H100 Then  'WM_KEYDOWN
        Dim key As Keys = m.WParam
        If key = Keys.S And My.Computer.Keyboard.CtrlKeyDown Then 
             'DO stuff
             Return True
        End If
    End If

    Return MyBase.ProcessKeyPreview(m)
 End Function 
```

# debugging - Valgrind 新工具，阅读 dwarf2 或 dwarf3 信息

> ID：13727174
> 
> 赞同：1
> 
> 时间：2012-12-05T15:54:11.997
> 
> 标签：debugging, valgrind, dwarf

我正在开发一个新的 valgrind 工具，在某些时候我想读取 dwarf 调试信息，以获取全局数组的起始地址和大小。

我知道此信息包含在 dwarf3 调试信息的 .debug_info 部分中。

在 derictory /valgrind/coregrind/m_debuginfo 中有一个头文件 priv_readdwarf3.h，其中第 57 行有一个函数：

```
 /* Read variables and types from DWARF3 ".debug_info" sections. */
    extern void ML_(read_debuginfo_dwarf3)(

    struct _DebugInfo* di,
    UChar* debug_info_img,   SizeT debug_info_sz,
    UChar* debug_types_img,  SizeT debug_types_sz,
    UChar* debug_abbv_img,   SizeT debug_abbv_sz,
    UChar* debug_line_img,   SizeT debug_line_sz,
    UChar* debug_str_img,    SizeT debug_str_sz,
    UChar* debug_ranges_img, SizeT debug_ranges_sz,
    UChar* debug_loc_img,    SizeT debug_loc_sz,
    UChar* debug_info_alt_img, SizeT debug_info_alt_sz,
    UChar* debug_abbv_alt_img, SizeT debug_abbv_alt_sz,
    UChar* debug_line_alt_img, SizeT debug_line_alt_sz,
    UChar* debug_str_alt_img,  SizeT debug_str_alt_sz
    ); 
```

但我不明白如何使用这个功能。

任何帮助表示感谢提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:55:16.280

头文件中声明的任何例程`priv_`当前对工具不可用 - 只有`pub_tool_`头文件中的例程是核心/工具接口的一部分。

标`pub_tool_debuginfo.h`头是调试信息的接口，而`VG_(get_data_description)`函数是用于获取与地址关联的变量（如果有）的信息的接口。请注意，如果您的工具想要加载变量信息，则需要`VG_(needs_var_info)`从其例程中调用。`clo_init`

询问有关编写工具问题的最佳地点可能是[valgrind-developers](https://lists.sourceforge.net/lists/listinfo/valgrind-developers)邮件列表。

# c++ - 如何在 flex 上识别令牌〜？

> ID：13727176
> 
> 赞同：0
> 
> 时间：2012-12-05T15:54:12.543
> 
> 标签：c++, token, flex-lexer

我想`~`在我的语言“simplex”上识别标记，我正在使用 flex & bison 和 C++，并且在我声明的标记列表中：

```
\~                        { return DISTRIBUTION; } 
```

但是当我尝试对输入支持`~ =, ~!`和任何未使用的令牌进行编程时。

我猜这个字符`~`被简单地忽略了，我必须使用更好的正则表达式处理或使用位表达式。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:59:05.527

```
"~"                        { return DISTRIBUTION; } 
```

或者

```
[~]                        { return DISTRIBUTION; } 
```

重要的：

首先定义规则（*如果有）* `~=`，`~!`然后定义规则`~`。

# java - 通过 XML 记录进行复杂的搜索查询

> ID：13727179
> 
> 赞同：0
> 
> 时间：2012-12-05T15:54:17.113
> 
> 标签：java, xml, xpath

我有一个包含一个 XML 字符串字段的对象列表。我必须对该字段执行类似 SQL 的查询，并获得一个满足这些值的子列表。我正在尝试使用 XPath。

首先，我想不出 XPath 字符串来实现这一点。其次，可能有更好的方法来做到这一点。我尝试通过 SO 进行搜索，但答案并没有真正解决这个问题

## **细节**

我有一个书单：

```
List <Books> allBooks; 
```

Book 类可以有一个 id 和 details 字段。详细信息是 XML。

```
class Book
{
    String id;
    String details; //XML
} 
```

这是详细信息 xml 字符串的示例：

```
<book>
   <name>Harry Potter and the sorcerer's stone</name>
   <author>J K Rowling</author>
   <genre>fantasy</genre>
   <keyword>wizard</keyword>
   <keyword>british</keyword>
   <keyword>hogwarts</keyword>
   <price>25</price>
</book> 
```

所以，直到这里，一切都一成不变。它是现有代码的一部分，我无法更改该设计。

我的工作是获取列表 allBooks 并通过它运行查询，其逻辑是：

```
 WHERE author = "J K Rowling" AND
     genre = "fantasy" AND
     (keyword = "wizard" OR keyword="hogwarts") 
```

我考虑将这些数据放入数据库中以运行实际查询，但由于该列表将仅包含几百条记录，因此连接、加载数据等的开销是不值得的。

任何人都知道如何通过 XPath 做到这一点？有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:03:54.210

我们需要账簿记录

```
//book 
```

与作者“JK罗琳”

```
//book[author = "J K Rowling"] 
```

和流派是“幻想”

```
//book[author = "J K Rowling" and genre = "fantasy"] 
```

关键字是“wizard”或“hogwarts”

```
//book[author = "J K Rowling" and genre = "fantasy" and (keyword = "wizard" or keyword = "hogwarts")] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:31:00.780

您需要首先构建 XPath 查询。我建议您参考之前的答案（hoaz 在[这里](https://stackoverflow.com/a/13727372/460638)有一个很好的列表）。然后，您需要编写代码来编译查询并对其进行评估。例子：

```
 public List<Book> findBookInformation(List<Books> books)  
      throws ParserConfigurationException, SAXException, 
         IOException, XPathExpressionException {

    List<Book> foundBooks = new ArrayList<Book>(); // books matching criteria

    for (Book book : books) {
      DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
      domFactory.setNamespaceAware(true); // never forget this!
      DocumentBuilder builder = domFactory.newDocumentBuilder();
      Document doc = builder.parse(new InputSource(new StringReader(book.details))); // parse details XML into a Doc object

      XPathFactory factory = XPathFactory.newInstance();
      XPath xpath = factory.newXPath();
      //using one of the query examples
      XPathExpression expr = xpath.compile("/book[author = \"J K Rowling\" and genre = \"fantasy\" and (keyword = \"wizard\" or keyword = \"hogwarts\")]");

      Object result = expr.evaluate(doc, XPathConstants.NODESET); 
      NodeList nodes = (NodeList) result;
      if (null != nodes && nodes.getLength() > 0) {
        foundBooks.add(book); // add to your return list
      }
    }
    return foundBooks;
  } 
```

您可以扩展这样的方法以获取查询参数以动态构建 XPath 查询，但这应该会给您基本的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:05:28.447

假设`Books`是根

```
/Books/Book[(author = "J K Rowling") and (genre = "fantasy") and (keyword = "wizard" or keyword = "hogwarts")] 
```

# templates - 带有构建过程的 T4 模板

> ID：13727180
> 
> 赞同：1
> 
> 时间：2012-12-05T15:54:18.550
> 
> 标签：templates, msbuild, visual-studio-2012, t4

我的要求是在构建发生时应该执行 T4 模板。
这是我在模板中编写的代码。

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core" #>

<#@ assembly name="$(SolutionDir)dll\Newtonsoft.Json.dll" #>

<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="System.IO"#>
<#@ import namespace="System.Text"#>

<#@ import namespace="Newtonsoft.Json"#>
<#@ import namespace="Newtonsoft.Json.Linq"#>

<#@ output extension=".txt" #>

<#

string serverPath = this.Host.ResolvePath("DLLs.js");

string body;
using (var stream = new FileStream(serverPath, FileMode.Open, FileAccess.Read))
{
    var streamReader = new StreamReader(stream);
    body = streamReader.ReadToEnd();

}

#>

<#=body#> 
```

这运行良好，但是当我尝试构建它时，它给出了一个异常，它无法找到 Newtonsoft DLL。

这是我在项目文件中为在解决方案构建时运行模板所做的操作。

```
<Import Project="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\TextTemplating\v11.0\Microsoft.TextTemplating.targets" />
<PropertyGroup>
 <TransformOnBuild>true</TransformOnBuild>
</PropertyGroup>

  <ItemGroup>
    <T4ReferencePath Include="$(VsIdePath)PublicAssemblies\" />
  </ItemGroup> 
```

Newtonsoft.dll 位于解决方案文件夹根目录中名为 DLL 的文件夹中。

我看到@Get [Visual Studio 的帖子在每个构建上运行 T4 模板，](https://stackoverflow.com/questions/1646580/get-visual-studio-to-run-a-t4-template-on-every-build)并且还遵循了@MarkGr 建议的步骤，但没有运气。

我正在使用 VS2012 。谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-03T12:36:04.473

试试这个 ItemGroup。它应该可以解决问题。至少在VS2013中

```
<ItemGroup>
    <T4ParameterValues Include="SolutionDir">
      <Value>$(SolutionDir)</Value>
    </T4ParameterValues>
  </ItemGroup> 
```

[http://blogs.msdn.com/b/t4/archive/2013/08/29/what-s-new-in-t4-for-visual-studio-2013.aspx](http://blogs.msdn.com/b/t4/archive/2013/08/29/what-s-new-in-t4-for-visual-studio-2013.aspx)

# javascript - Googlemaps：侧边栏链接的中心位置

> ID：13727186
> 
> 赞同：0
> 
> 时间：2012-12-05T15:54:42.680
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, latitude-longitude

我目前有一个带有侧边栏的 googlemap 画布，单击该链接时，将用户带到带有标记和信息窗口的 latlong 位置。加载地图时，这是居中的，但是当他们单击链接时，地图不会平移到中心，标记位于中间。

我尝试在我的标记函数中添加一个 map.setCenter ，但这会使地图和标记消失，而我的控制台中没有错误。任何人都可以指导我找到可以提供帮助的代码片段或教程吗？这是我的示例代码：

```
<script type="text/javascript"> 
var side_bar_html = ""; 

var gmarkers = []; 
var map = null;

function initialize() {
  var myOptions = {
    zoom: 12,
    center: new google.maps.LatLng(46.18363372751015,12.4530029296875),
    mapTypeControl: true,
    mapTypeControlOptions: {style: google.maps.MapTypeControlStyle.DROPDOWN_MENU},
    navigationControl: false,
    mapTypeId: google.maps.MapTypeId.ROADMAP

  }

  map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);

  google.maps.event.addListener(map, 'click', function() {
  infowindow.close();
});

  var point = new google.maps.LatLng(46.18363372751015,12.4530029296875);
  var marker = createMarker(point,"example 1","location 1 info")

  var point = new google.maps.LatLng(39.31517545076218, 35.25238037109375);
  var marker = createMarker(point,"example 2","location 2 info")

  document.getElementById("marker_list").innerHTML = side_bar_html;
}

var infowindow = new google.maps.InfoWindow({ 
    size: new google.maps.Size(150,50),
});

function myclick(i) {
google.maps.event.trigger(gmarkers[i], "click");
}

function createMarker(latlng, name, html) {

    var contentString = html;

    var marker = new google.maps.Marker({
        position:latlng,
        map: map
        });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.setContent(contentString); 
        infowindow.open(map,marker);
        });

    gmarkers.push(marker);

    side_bar_html += '<a href="javascript:myclick(' + (gmarkers.length-1) + ')">' + name + '<\/a><br>';

}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:16:55.043

如果您希望地图在单击时以标记为中心，则需要编写代码来执行此操作。默认情况下，它会平移，因此 InfoWindow 是可见的。改变这个：

```
function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
} 
```

类似于：

```
function myclick(i) {
  map.setCenter(gmarkers[i].getPosition());
  google.maps.event.trigger(gmarkers[i], "click");
} 
```

# java - While Loop 只运行一次

> ID：13727194
> 
> 赞同：0
> 
> 时间：2012-12-05T15:55:09.527
> 
> 标签：java, loops, while-loop

我的问题是我的while循环在我运行它时只运行一次。这是我的代码。如果有人会检查它并寻找其他故障，我将非常感激（我是Java编程新手！）

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class Program {

    boolean exit;
    JFrame frame;
    JPanel panel;
    JTextField title;
    JButton start;
    JButton stop;
    long x;

    public Program() {

        frame = new JFrame("Überlast your PC");
        panel = new JPanel();
        title = new JTextField("Überlast your PC v1.0");
        start = new JButton("Start");
        stop = new JButton("Stop");
        x = 1;
        exit = false;

        stop.addActionListener(new ActionListener () {
            public void actionPerformed(ActionEvent e) {

            exit = true;

        }});

        start.addActionListener(new ActionListener () {
            public void actionPerformed(ActionEvent e) {

            panel.remove(start);
            panel.add(stop);
            frame.repaint();
            frame.revalidate();
            start.setForeground(Color.red);
            while(x <= 9223372036854775807L) {

                System.out.println(x * x);
                x++;

                if (exit = true) {                    
                    break;                        
                }                    
            }

        }});

        frame.add(panel);
        panel.add(title);
        panel.add(start);
        frame.setVisible(true);
        frame.setSize(150,100);
        title.setEditable(false);
        start.setForeground(Color.green);
        stop.setForeground(Color.red);

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:56:22.923

```
 if(exit = true) {
      break;
 } 
```

应该

```
 if(exit == true) {
      break;
  } 
```

甚至更简单，只需使用

```
 if(exit){
   break;
 } 
```

`exit=true`将**true**分配为退出，因此 if 条件为 true，因此它打破了循环。

正如@jlordo 指出的那样，即使在修复错误之后它也是一个无限循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:57:00.287

```
if(exit = true) 
```

这是第一个问题。上述 if 条件将始终为真。您需要进行比较而不是分配。实际上，您不应该对布尔变量进行比较。只需使用： -

```
if (exit) 
```

其次，您不会更改`exit`while 循环中的任何位置，因此将其用作退出条件是没有意义的。

而且您不需要硬编码`Long.MAX_VALUE`. 您已经定义了该常量。现在，即使你解决了那个问题`if`，你也将面临这个问题`infinite loop`。见下文如何： -

```
// Your below while loop is `infinite`
// every long value will satisfy this condition
while(x <= Long.MAX_VALUE) {  // Don't hard code max long value

      System.out.println(x * x);
      x++;

      // You are not changing `exit` anywhere, so this check is absurd.   
      if (exit) {  
          break;                        
      }                    
} 
```

* * *

**你可能想要什么： -**

可能你想无限地运行你的循环，直到你的`exit`值 if `false`。在这种情况下，只需使用`while (true)`. 并更改`exit`循环中某处的值。

事实上，如果您使用`exit`作为退出条件，我会将您的`while`循环更改为： -

```
while (exit) {
    System.out.println(x * x);

    if (someCondition) {
        exit = false;
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:56:45.310

您正在使用

```
if(exit = true) { 
```

代替

```
if(exit == true) { 
```

甚至更好

```
if (exit) { 
```

但是当你修复它时，你将有一个**无限循环**，因为所有`long`值都小于`9223372036854775807`，这是 long 可以拥有的最大值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T15:57:07.397

这是因为这条线：

```
if(exit = true) 
```

你**分配** `true`到`exit`这里。用于`==`比较值：

```
if(exit == true) 
```

在布尔值的情况下，您根本不需要比较它`true`。像这样写：

```
if(exit) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T15:57:14.547

`if (exit = true)`将值 exit 设置为 true。你需要比较使用`==`

# xslt - 有效的 xslt 条件增量

> ID：13727201
> 
> 赞同：1
> 
> 时间：2012-12-05T15:55:37.940
> 
> 标签：xslt, sorting, increment, memory-efficient

在[这个问题](https://stackoverflow.com/questions/13714647/xslt-conditional-increment)中，我询问了如何执行条件增量。提供的答案有效，但在庞大的数据集上不能很好地扩展。

输入：

```
<Users>
    <User>
        <id>1</id>
        <username>jack</username>
    </User>
    <User>
        <id>2</id>
        <username>bob</username>
    </User>
    <User>
        <id>3</id>
        <username>bob</username>
    </User>
    <User>
        <id>4</id>
        <username>jack</username>
    </User>
</Users> 
```

期望的输出（在最佳时间复杂度下）：

```
<Users>
   <User>
      <id>1</id>
      <username>jack01</username>
   </User>
   <User>
      <id>2</id>
      <username>bob01</username>
   </User>
   <User>
      <id>3</id>
      <username>bob02</username>
   </User>
   <User>
      <id>4</id>
      <username>jack02</username>
   </User>
</Users> 
```

为此，最好

*   按用户名排序输入
*   对于每个用户
    *   当以前的用户名等于当前用户名时
        *   递增计数器和
        *   将用户名设置为 '$username$counter'
    *   除此以外
        *   将计数器设置为 1
*   （再次按 id 排序 -*无要求*）

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:22:38.413

这有点难看，我不喜欢使用`xsl:for-each`，但它应该比使用前兄弟更快，并且不需要 2-pass 方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
  <xsl:key name="count" match="User" use="username" />

  <xsl:template match="Users">
    <Users>
      <xsl:for-each select="User[generate-id()=generate-id(key('count',username)[1])]">
        <xsl:for-each select="key('count',username)">
          <User>
            <xsl:copy-of select="id" />
            <username>
              <xsl:value-of select="username" />
              <xsl:number value="position()" format="01"/>
            </username>
          </User>
        </xsl:for-each>
      </xsl:for-each>
    </Users>
  </xsl:template>
</xsl:stylesheet> 
```

如果你真的需要它之后按 ID 排序，你可以将它包装成一个两遍模板：

```
<xsl:stylesheet version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
   xmlns:msxsl="urn:schemas-microsoft-com:xslt">
  <xsl:key name="count" match="User" use="username" />

  <xsl:template match="Users">
    <xsl:variable name="pass1">
      <xsl:for-each select="User[generate-id()=generate-id(key('count',username)[1])]">
        <xsl:for-each select="key('count',username)">
          <User>
            <xsl:copy-of select="id" />
            <username>
              <xsl:value-of select="username" />
              <xsl:number value="position()" format="01"/>
            </username>
          </User>
        </xsl:for-each>
      </xsl:for-each>
    </xsl:variable>

    <xsl:variable name="pass1Nodes" select="msxsl:node-set($pass1)" />

    <Users>
      <xsl:for-each select="$pass1Nodes/*">
        <xsl:sort select="id" />
        <xsl:copy-of select="." />
      </xsl:for-each>
    </Users>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:26:56.027

这是一个微小的变化，但可能不会大大提高效率

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="User" match="User" use="username" />

   <xsl:template match="username/text()">
      <xsl:value-of select="." />
      <xsl:variable name="id" select="generate-id(..)" />
      <xsl:for-each select="key('User', .)">
         <xsl:if test="generate-id(username) = $id">
            <xsl:number value="position()" format="01"/>
         </xsl:if>
      </xsl:for-each>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

这样做是定义一个按用户名对用户分组的键。然后，对于每个用户名元素，您查看该用户名的键中的元素，并在找到匹配项时输出位置。

这种方法的一个小优点是您只查看具有相同名称的用户记录。如果您没有大量同名，这可能会更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T13:08:42.173

**这种转换产生了完全指定的想要的结果并且是有效的 (O(N))：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common" exclude-result-prefixes="ext">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kUserByName" match="User" use="username"/>
 <xsl:key name="kUByGid" match="u" use="@gid"/>

 <xsl:variable name="vOrderedByName">
  <xsl:for-each select=
  "/*/User[generate-id()=generate-id(key('kUserByName',username)[1])]">
     <xsl:for-each select="key('kUserByName',username)">
       <u gid="{generate-id()}" pos="{position()}"/>
     </xsl:for-each>
  </xsl:for-each>
 </xsl:variable>

  <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="username/text()">
     <xsl:value-of select="."/>
     <xsl:variable name="vGid" select="generate-id(../..)"/>

     <xsl:for-each select="ext:node-set($vOrderedByName)[1]">
      <xsl:value-of select="format-number(key('kUByGid', $vGid)/@pos, '00')"/>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Users>
    <User>
        <id>1</id>
        <username>jack</username>
    </User>
    <User>
        <id>2</id>
        <username>bob</username>
    </User>
    <User>
        <id>3</id>
        <username>bob</username>
    </User>
    <User>
        <id>4</id>
        <username>jack</username>
    </User>
</Users> 
```

**产生了想要的正确结果：**

```
<Users>
   <User>
      <id>1</id>
      <username>jack01</username>
   </User>
   <User>
      <id>2</id>
      <username>bob01</username>
   </User>
   <User>
      <id>3</id>
      <username>bob02</username>
   </User>
   <User>
      <id>4</id>
      <username>jack02</username>
   </User>
</Users> 
```

# matlab - 使用 FFT 的图像反卷积

> ID：13727202
> 
> 赞同：2
> 
> 时间：2012-12-05T15:55:37.497
> 
> 标签：matlab, image-processing, signal-processing

我正在尝试使用以下代码使用高斯滤波器对图像进行盲目模糊，但我知道每当滤波器包含零时我都会遇到问题，所以我想知道是否有任何其他反卷积方法但使用 FFT

```
function [ out ] = imblur( file)

img = im2double(imread(file));

h = fspecial('gaussian', [15 15], 3);

img_red = img(:,:,1);
img_blue = img(:,:,2);
img_green = img(:,:,3);

[m,n] = size(img_red);
[mb,nb] = size(h);

% output size 
mm = m + mb - 1;
nn = n + nb - 1;

x1(:,:,1) = (ifft2(fft2(img_red,mm,nn)./ fft2(h,mm,nn)));
x2(:,:,2) = (ifft2(fft2(img_blue,mm,nn)./ fft2(h,mm,nn)));
x3(:,:,3) = (ifft2(fft2(img_green,mm,nn)./ fft2(h,mm,nn)));

out = cat(3, x1(:,:,1), x2(:,:,2), x3(:,:,3)); 

imshow(out); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T00:19:13.267

用 epsilon 替换零工作得很好。

# sql-server-2008 - TFS 2010 数据层配置错误

> ID：13727205
> 
> 赞同：0
> 
> 时间：2012-12-05T15:55:50.270
> 
> 标签：sql-server-2008, security, tfs, installation

我正在安装 TFS2010。有一个单独的应用程序层服务器和数据库层服务器。我正在使用一个已经存在的数据库，称为 Tfs_Configuration。输入数据库名称/实例名称时，我可以对其进行测试并获得绿色复选标记，以便 TFS 可以找到数据库。我要连接的 SQL Server 版本是 - SQL Server 2008 SP3。但是当我运行就绪测试时，我收到以下消息 - ![在此处输入图像描述](../Images/ac0a397b622e7fa94305a3ca9e782fa5.png)

首先是这两个警告导致错误吗？

此外，我对正在连接的现有数据库 (Tfs_Configuration) 拥有 db_owner 权限。我还需要什么其他权利？我能做些什么来解决这些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:15:03.000

第一个错误表明您需要 sysadmin 角色，它实际上是一个 SQL Server 角色，可以通过执行以下操作来启用：http://blog.sqlauthority.com/2008/12/27/sql-server-add-any-用户到系统管理员角色添加用户到系统角色/

希望这能让你克服至少一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:03:08.877

您需要是 SQL 实例的系统管理员或能够创建新数据库的角色，因为安装程序想要为 DefaultCollection（以及 TFS_Warehouse、TFS_Analysis）创建额外的数据库。因此，仅仅成为 TFS_Configuration 的所有者是不够的。

# admin - 如何使用谷歌驱动API获取所有用户的所有文件

> ID：13727206
> 
> 赞同：3
> 
> 时间：2012-12-05T15:55:52.107
> 
> 标签：admin, google-drive-api, service-accounts

我是 google 帐户的“域管理员”，并希望： **获取我域中的所有用户和“每个”用户，让另一个用户读取每个人的文件**。我可以获取每个用户，但现在我不明白如何获取每个用户的文档。

```
#!/usr/bin/python
import gdata.docs
import gdata.docs.service
from gdata.apps import client

userNameAtGmailCom = 'domainAdmin@someplace.com'
password           = 'mypassword'
personToShareWith  = "someGuy@gmail.com"
domain             = 'someplace.com'

def login(userNameAtGmailCom, password, personToShareWith, domain):
    client = gdata.apps.client.AppsClient(domain=domain)
    client.ssl = True
    client.ClientLogin(email=userNameAtGmailCom, password=password, source='apps')
    all_users = client.RetrieveAllUsers()
    for user in all_users.entry:
                user_name = user.login.user_name
                print user_name
                password = user.login.password
                print password
                clientDocs = gdata.docs.service.DocsService()
#password always returns 'none' 
#therefore I've commented out the 'bad authentication'
#that would happen if the lines below ran
                #clientDocs.ClientLogin(user_name, password)
                #documents_feed = clientDocs.GetDocumentListFeed()
                #for document_entry in documents_feed.entry:
                #print document_entry.title.text
                #scope = gdata.docs.Scope(value=personToShareWith, type='user')
                #role = gdata.docs.Role(value='reader')
                #acl_entry = gdata.docs.DocumentListAclEntry(scope=scope, role=role)
                #created_acl_entry = client.Post(acl_entry, document_entry.GetAclLink().href, converter=gdata.docs.DocumentListAclEntryFromString)

login(userNameAtGmailCom, password, personToShareWith, domain) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:20:32.043

您应该使用 Google Drive API 并使用服务帐户来执行 Google Apps 域范围的授权：

[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

# git - 是否可以在 Git 中组合存储弹出窗口？

> ID：13727209
> 
> 赞同：1
> 
> 时间：2012-12-05T15:56:08.020
> 
> 标签：git, git-stash

我正在与 Git 合作一个项目，由于我不需要进入的原因，我发现我可能必须对代码进行一些更改，然后将它们存储起来而不是提交它们。我有时可能需要这些更改，但不是一直需要，也不一定希望它们是永久性的。但是，这项工作可能很重要，我想尝试为自己节省一些问题。

假设我保存了多个 git stash，所以我的 stash 看起来像这样：

```
stash@{0}: First change
stash@{1}: Second change
...
stash@{10}: Last and final change 
```

有没有办法在一个命令中弹出所有这些更改？或者也许将它们组合成类似的东西`stash@{11}: All previous changes together`？

或者这甚至是一个好主意？

**编辑**：经过一番研究，我意识到我真的应该分支而不是以这种方式使用 git stash 。感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:23:54.073

或者，也许做一个分支？分支在 Git 中很便宜，除非你告诉 Git，否则不会被推送到远程仓库。实践中的例子。

创建一个名为“my-hidden-feature”的分支：

```
git checkout -b my-hidden-feature 
```

编辑和提交内容（例如，本地配置文件）：

```
touch test.config               # Create a new file
git add test.config             # Add the new file
git commit -m "Test commit"     # Commit your hidden feature 
```

返回到您的原始代码并做一些工作：

```
git checkout master             # Return to the main branch
...work here...                 # Do some work
git commit -am "Work on master" # Commit your work 
```

哦，你需要隐藏功能吗？简单的 ：

```
git checkout my-hidden-feature  # Go to your hidden branch
git rebase master               # Update the hidden feature with new commits from master
...do some stuff...             # Do some work on the hidden branch
git commit -am "A new hidden commit" 
```

而且，继续！

啊，最后但并非最不重要。如果你是在命令行工作，我强烈推荐像[oh-my-zsh](https://github.com/robbyrussell/oh-my-zsh)这样的工具，它有一个可以在你的终端中显示当前分支的插件。如果你不想迷失在 Git 的边缘，非常非常有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T16:34:04.867

你严重滥用了藏匿处。藏匿处只不过是一个隐藏的一次性分支。`git stash save`做这个：

```
git checkout -b stashbranch
git add -A
git commit -m "stashentry"
git checkout - 
```

`git stash apply`做类似的事情：

```
git cherry-pick *stashcommit*
git reset HEAD^ 
```

如果您了解这些命令的作用，则无需将 stash 用于这种情况下的复杂设备。

您是否有理由不使用分支？

# android - android - finish() 关闭应用程序而不是活动

> ID：13727217
> 
> 赞同：5
> 
> 时间：2012-12-05T15:56:17.417
> 
> 标签：android, android-intent, android-activity, activity-finish

我是一个初学者的 android 程序员，我似乎有一个问题：我打开新的活动，用

```
Intent newGameIntent = new Intent(actionName);
startActivity(newGameIntent); 
```

一切正常，活动开始。但是当我调用finish（）时，它不会进入之前的活动，它只是关闭应用程序（没有错误或其他日志消息）

有谁知道为什么会这样？谢谢你的时间！

根据要求，这里有更多代码（我可能完全搞砸的东西）：第一个活动：

```
@Override
protected void onStop() {
    super.onStop(); 
    SplashScreen.sounds.releasSounds();
    finish();
}
@Override
protected void onPause() {
    super.onPause();
    pauseActivity();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    gameLoop.resumeThread();
    SplashScreen.sounds.resumeSounds();
}

private void pauseActivity() {
    gameLoop.pauseThread();
    SplashScreen.sounds.pauseBck();
} 
```

和第一个活动调用秒活动

```
Intent newGameIntent = new Intent("com.YuvalApps.menus.NEWGAMEMENU");
    startActivity(newGameIntent); 
```

和秒活动

```
 @Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:04:08.540

当一个activity在后台时，android系统会调用“onStop”方法，但是你在“onStop”方法中调用了“finish”方法，所以如果你跳转到另一个activity，前一个activity会被“onStop”破坏。您应该在“onStop”方法中删除“finish”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T16:28:25.460

如果您调用finish() 来关闭当前活动并返回上一个活动，只需调用onBackPressed() 而不是finish()。它将带您回到上一个活动。

# c# - 如何以编程方式从浏览器中删除保存的密码

> ID：13727218
> 
> 赞同：3
> 
> 时间：2012-12-05T15:56:20.703
> 
> 标签：c#, google-chrome, internet-explorer, firefox, passwords

有谁知道如何使用 C# 删除 Firefox、Chrome 和 IE 中的密码？我已经尝试过很多方法，但我没有成功，因为我找不到存储它们的位置来删除它们。我查看了[http://kyrionhackingtutorials.com/2012/03/all-saved-password-location](http://kyrionhackingtutorials.com/2012/03/all-saved-password-location)但我似乎无法找到并删除它们。

```
public static void deleteHistory(string browser)

    {
        switch (browser)
        {
            case "explorer":
                RegistryKey r = Registry.CurrentUser;
                try
                {
                    r.DeleteSubKey(@"Software\Microsoft\Internet Explorer\IntelliForms\Storage2");
                }
                catch(Exception e)
                {
                    Console.WriteLine("no passwords deleted : " + e);
                }
                   string Efilepath = System.Environment.GetEnvironmentVariable("USERPROFILE") + explorerPath;
                string[] Edirctorys = Directory.GetFiles(Efilepath);
                foreach (string dir in Edirctorys)
                {
                    File.Delete(dir);
                }
                break;
            case "chrome":
                string[] filePaths;
                if (File.Exists(chromePathXP))
                {
                     filePaths = Directory.GetFiles(chromePathXP);
                    foreach (string file in filePaths)
                        File.Delete(file);
                }
                if (File.Exists(chromePathVista))
                {
                    filePaths = Directory.GetFiles(chromePathVista);
                    foreach (string file in filePaths)
                        File.Delete(file);
                }
                break;
            case "firefox":

                string displayName = WindowsIdentity.GetCurrent().Name.Split('\\')[1];
                string filepath = System.Environment.GetEnvironmentVariable("USERPROFILE") + firefoxPath+displayName;

                //string[] dirctorys = Directory.GetDirectories(filepath);
            //    foreach (string dir in dirctorys)

                    foreach (string file in firefoxFiles)
                    {
                        if (File.Exists(filepath + "\\" + file))
                        {
                            Console.WriteLine(filepath + file);
                            File.Delete(filepath + "\\" + file);
                        }
                    }

                break;
            default:
                break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:06:32.623

我不确定您链接的网站上的信息是否正确。我相信 Firefox 的密码等前段时间已移入配置文件文件夹....

对于 Firefox，配置文件文件夹位于

%APPDATA%\Mozilla\Firefox\Profiles\xxxxxxxx.default。

%APPDATA% 是 C:\Users\\AppData\Roaming\Mozilla (Win 7/Vista) 的简写（或 C:\Documents and Settings\\Application Data\Mozilla for Win XP）

key3.db 等应该在那里

恐怕无法帮助您解决其他问题，因为我不使用它们

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T13:00:24.210

要清除用户名、密码，就像在 C# 中那样

```
 TextBox_UserName.Attributes["AUTOCOMPLETE"] = "off";
            TextBox_NewPassword.Attributes["AUTOCOMPLETE"] = "off";
            TextBox_ConfirmNewPassword.Attributes["AUTOCOMPLETE"] = "off"; 
```

# python - 求最小差平方和的算法

> ID：13727222
> 
> 赞同：3
> 
> 时间：2012-12-05T15:56:23.487
> 
> 标签：python, algorithm

基本上，我正在编写的这个算法将 List L 作为输入，并希望找到一个数字 x，使得 L、i、减去 x 的平方和求和中的所有项目都最小化。求 的总和的最小 x `abs(L[i]-x)**2`。到目前为止，我的算法正在做它应该做的事情，而不是在浮动的情况下。我不确定如何实现浮动。例如，`[2, 2, 3, 4]`理想情况下会产生结果`2.75`，但我的算法目前不能产生浮点整数。

```
 def minimize_square(L):
     sumsqdiff = 0
     sumsqdiffs = {}
     for j in range(min(L), max(L)):
             for i in range(len(L)-1):
                     sumsqdiff += abs(L[i]-j)**2
             sumsqdiffs[j]=sumsqdiff
             sumsqdiff = 0
     return min(sumsqdiffs, key=sumsqdiffs.get) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T16:10:33.717

很容易证明 [*] 使差平方和最小的数是 的算术[平均值](http://en.wikipedia.org/wiki/Mean)。`L`这给出了以下简单的解决方案：

```
In [26]: L = [2, 2, 3, 4]

In [27]: sum(L) / float(len(L))
Out[27]: 2.75 
```

或者，使用[NumPy](http://numpy.scipy.org/)：

```
In [28]: numpy.mean(L)
Out[28]: 2.75 
```

[*] 以下是证明的概要：

我们需要找到`x`最小化`f(x) = sum((x - L[i])**2)`总和被接管的地方`i=0..n-1`。

取 的导数`f(x)`并将[其设置为零](http://en.wikipedia.org/wiki/Fermat%27s_theorem_%28stationary_points%29)：

```
2*sum(x - L[i]) = 0 
```

使用简单的代数，上面可以转化为

```
x = sum(L[i]) / n 
```

这就是 的算术平均值`L`。QED。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:10:49.657

我不是 100% 确定这是执行此操作的最有效方法，但您可以做的是维护您拥有的相同算法并修改 return 语句。

```
min_int = min(sumsqdiffs, key=sumsqdiffs.get)
return bisection(L,min_int-1,min_int+1) 
```

在哪里`bisection`实现以下方法：[二分法](http://en.wikipedia.org/wiki/Bisection_method "二等分法")

如果在分析的区间内函数存在一个最小值，则此方法有效。

# database - Django建库客户端-产品

> ID：13727223
> 
> 赞同：1
> 
> 时间：2012-12-05T15:56:23.813
> 
> 标签：database, django

我必须建立一个包含客户和产品的数据库。问题是我应该有两种类型的客户：个人和公司。我不明白启动项目的理念，一些指导方针会很棒！

我如何构建数据库或查询以将产品链接到特定类型的客户？

我应该制作第三个客户表并将个人和公司表链接到该表，并且产品表也链接到第三个表，还是应该为个人和公司提供 2 个表，并在内部设置一个标志，如“是个人”和“是公司” “？

当我生成输入新客户的表格时，我应该首先选择客户的类型，并基于该类型出现个人或公司的特定表格。

构建这种类型的客户产品数据库是更好的方法吗？如果我将这两种类型的客户加入到一张表中（个人与公司的特征大致相同），这很容易。

非常感谢！

# html - 网站图片作为标题，Google 无法识别图片

> ID：13727226
> 
> 赞同：0
> 
> 时间：2012-12-05T15:56:27.363
> 
> 标签：html, css, image

我目前有一张图片作为我网站的标题。谷歌不承认这是标题，它显示的东西不是我在谷歌搜索中想要的。我想也许添加下面的 h1 / 链接...

```
<a href="/">
<h1 style="postion:absolute;margin:-1000px -1000px;">my title</h1>
<img src="images/logo.jpg" alt="my title"/>
</a> 
```

然而，这并没有像我想要的那样隐藏标题。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:05:08.060

Google 在其搜索结果中添加的标题不是由`<h1>`-tag 定义的，而是由`<title>`文档头部中的标签定义的。

所以在`<head></head>`标签中试试这个：

```
<title>my title</title> 
```

-tag 由 Google 提取，但与 Google 显示为您网站标题的`<h1>`内容无关，图像也没有。

除此之外：出于搜索引擎优化和可访问性的原因，您永远不应仅使用 an`<img>`作为标题图形。

如果您想定义 Google 放在搜索结果标题下的文本，请使用元描述并将其放在文档头中：

```
<meta name="description" content="The description of your site, as it will appear on Google Search." /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:02:22.627

h1 =/= 标题

您需要在页面头部添加一个标题标签。另外，我不知道您是否可以使用实际图像来执行此操作（我真的不明白您为什么要将图像作为标题或它的用途）。也许你正在考虑一个网站图标？

此外，当您使用标题标签时，无需隐藏页面的标题。由于它在您的标题中，因此它实际上并没有显示到正文中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:03:05.800

CSS

```
h1 { height:200px; background:url('logo.jpg'); width:300px }
h1 span { display:none } 
```

HTML

```
<h1><span>My Title</span></h1> 
```

并且 user1394965 是正确的。`<title>`将推动 Google 列出的内容。

# java - java swing gui中图像的颜色失真

> ID：13727228
> 
> 赞同：1
> 
> 时间：2012-12-05T15:56:30.423
> 
> 标签：java, swing, user-interface

例如，我的 gui 中显示了以下图片：

[http://www.zielpunkt.at/image/produkte/1354097303-airwick.jpg](http://www.zielpunkt.at/image/produkte/1354097303-airwick.jpg)

不幸的是，颜色失真（粉红色背景）：

我的代码：

```
URL pictureURL = new URL(product.getBild()); 
            BufferedImage myPicture = ImageIO.read(pictureURL);
            JLabel picLabel = new JLabel(new ImageIcon( myPicture ));
            c.fill = GridBagConstraints.HORIZONTAL;
            c.gridwidth = 2;
            c.gridx = 0;
            c.gridy = 5;
            panel.add(picLabel,c); 
```

期待您的回答！问候，

![截屏](../Images/c00530e49bcc4ff525517f1d93ec8198.png)

我的大多数图像看起来像这样，但是当我查看 url 上的图形时，它看起来很正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T19:35:51.577

[如此处](https://stackoverflow.com/a/3432532/230513)所述，“粉红色调”可能是由于对透明度信息的误解。[如此处](https://stackoverflow.com/a/2658663/230513)所示，“一个简单的权宜之计就是将图像渲染”为兼容的`BufferedImage`.

# php - PHP：如何编码 U+FFFD 以进行替换？

> ID：13727235
> 
> 赞同：7
> 
> 时间：2012-12-05T15:56:44.957
> 
> 标签：php, character-encoding, escaping, special-characters

我正在尝试在页面上显示数据提要。我们遇到了一个奇怪字符的编码问题。出于某种原因，在提要中有`U+FFFD`角色。并且`htmlentities()`不会转义字符，所以需要手动替换。（我使用的是 PHP 5.3）

我尝试了以下方法：

```
$string = str_replace( "\xFFFD",  "_", $string );
$string = str_replace( "\XFFFD",  "_", $string );
$string = str_replace( "\uFFFD",  "_", $string );
$string = str_replace("\x{FFFD}", "_", $string );
$string = str_replace("\X{FFFD}", "_", $string );
$string = str_replace("\P{FFFD}", "_", $string );
$string = str_replace("\p{FFFD}", "_", $string ); 
```

以上都不起作用。

阅读此页面后 - [http://php.net/manual/en/regexp.reference.unicode.php](http://php.net/manual/en/regexp.reference.unicode.php) - 我不确定我做错了什么。我需要将 UTF-8 支持编译到 PCRE 中吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T10:28:38.287

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-05T16:06:32.763

像这样使用[preg_replace](http://php.net/manual/de/function.preg-replace.php)：

```
$string = preg_replace('@\x{FFFD}@u', '_', $string); 
```

# jquery - JQuery 刷新列表放置/可排序容器

> ID：13727236
> 
> 赞同：0
> 
> 时间：2012-12-05T15:56:50.070
> 
> 标签：jquery

如何在 JQuery 中刷新可放置/可排序的容器？我有一个带有占位符列表项的有序列表，当用户删除列表项时，占位符被替换。如果丢弃的项目的顺序正确，它将显示一条消息并且用户可以继续前进，但如果不正确，他们会收到并警告它不正确，此时我希望容器删除列表以开始超过。我试过`$('#bin ol').remove('li');`了，但它不允许我开始将物品放回容器中。有没有一种简单的方法可以做到这一点？

HTML

```
<article id="answers">

        <ul>
            <li><a draggable="true" href="#" id="one" name="change" class="imgHvr"></a></li>
            <li class="spaced"><a draggable="true" href="#" id="two" name="obst" class="imgHvr"></a></li>
            <li><a draggable="true" href="#" id="three" name="journey" class="imgHvr"></a></li>
        </ul>

        <div id="bin">
            <div class="ui-widget-content">
            <hr id="topBorder"></hr>
            <h2></h2>
                <ol>
                    <li id="uno" draggable="false" class="placeholder">Add Items Here</li>
                </ol>
            <hr id="bottomBorder"></hr>
            </div>
        </div>

        </article> 
```

jQuery

```
enter code here$(function() {
var limit = 3;
var counter = 0;
var answerKey = ["journey", "obst", "change"];
var answers = [];

$("#bin ol").sortable({cancel: '.placeholder' });
$("#answers li").draggable({
    appendTo: "body",
    helper: "clone",
    cancel: '.placeholder'
});
$("#bin ol").droppable({
    activeClass: "ui-state-default",
    hoverClass: "ui-state-hover",
    accept: ":not(.ui-sortable-helper)",
    drop: function( event, ui ) {
        counter++;
        if (counter == limit) {
            $(this).droppable("disable");
        }
        $(this).find(".placeholder").remove();
        ui.draggable.clone().appendTo(this);

        $(this).find("#one").attr("id", "one_1");
        $(this).find("#two").attr("id", "two_1");
        $(this).find("#three").attr("id", "three_1");
    }
});

$("#subBtn").click(function() {
    var answers = [];
$('#bin a').each(function() {
    answers.push($(this).attr('name'));
}); 

if (arraysEqual(answerKey, answers)) {
    $("#bin ol").append('<a href="index.html" name="modal"><img id="correct" src="images/visSelect/seq_correct.png"></a>');
    $("#submitBtn input").attr('disabled', 'disabled');
}else{
    alert('Please Try Again');
    /* $('#bin ol').remove('li'); */
}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:09:43.973

我建议这样做：

```
if (arraysEqual(answerKey, answers)) {
    $("#bin ol").append('<a href="index.html" name="modal"><img id="correct" src="images/visSelect/seq_correct.png"></a>');
    $("#submitBtn input").attr('disabled', 'disabled');
}else{
    alert('Please Try Again');
    $('#bin ol').html(create_droppable());
}

function make_droppable(){
    return '<li id="uno" draggable="false" class="placeholder">Add Items Here</li>';
} 
```

然后如果可能的话，添加`onload="$('#bin ol').html(create_droppable());"`到你的身体标签。

# c# - 快速检查 C# 命名空间

> ID：13727240
> 
> 赞同：3
> 
> 时间：2012-12-05T15:57:00.767
> 
> 标签：c#, namespaces

好的，有`System`和`System.Web`。我是否正确，这表明的结构是：

```
namespace System
{
    // all of the outer namespace members

    namespace Web
    {
        // all of the inner members
    }
} 
```

并且当一个命名空间嵌套在另一个命名空间中时，*只有*`using`父/外部命名空间的指令不会自动引入子/嵌套命名空间？换句话说：

 *```
using System;

public class Example
{
    public Example()
    {
        context1 = new HttpContext(); // won't work

        context2 = new System.Web.HttpContext(); // will work
    }
} 
```

只是想看看我是否真的理解正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:58:47.023

System.Web 声明为：

```
namespace System.Web
{
    public class HttpContext {}
} 
```

但是，实际上可以声明一个子命名空间：

```
namespace System
{
    namespace Web
    {
        public class HttpContext {}
    }
} 
```

我从未见过这样的东西，但语法允许它并且效果是一样的。在这两种情况下，命名空间`HttpContext`都是`System.Web.HttpContext`.

即使使用第二个示例，`using System;`也不会导入子命名空间，只导入该命名空间中定义的*类型。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:08:39.223

您*可以*嵌套命名空间，并且任何`using`指令只会授予对您引用的特定命名空间中定义的成员的访问权限。

所以从你的例子中：

```
namespace System
{
    // all of the outer namespace members

    namespace Web
    {
        // all of the inner members
    }
} 
```

引用`System`将授予您对外部命名空间成员的访问权限，而引用`System.Web`将授予您对所有内部命名空间成员的访问权限。

但这是非典型的，通常命名空间在文件中只定义一次。点符号通常遵循文件夹或项目结构，因此嵌套的文件如下：

```
Web应用程序
    - 楷模
        - MyModel.cs
    - 控制器
        - MyController.cs

```

可能使用`WebApplication.Models`和的命名空间`WebApplication.Controllers`。

我想不出一个很好的例子来嵌套命名空间，但可能有一个很好的理由。但是，在我看来，这将被视为规则的例外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:01:41.720

是的， using 指令只允许在没有命名空间限定符的情况下使用在该命名空间中声明的类型。嵌套命名空间不会自动包含在内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T16:02:03.257

正如丹尼尔所说，`System.Web`没有单独声明。`System`并且`System.Web`是两个在技术上不相关的独立命名空间。

这就是为什么您的代码示例`new HttpContext()`不起作用的原因 - 因为`HttpContext`根本不在`System`命名空间中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T16:04:12.290

这是关于复合命名空间的常见混淆。这里有一篇关于它的 microsoft 的精彩文章：http: [//msdn.microsoft.com/en-us/library/ms973231.aspx](http://msdn.microsoft.com/en-us/library/ms973231.aspx)*

# wpf - 软件无法从VS远程连接SQL，但可以在它之外

> ID：13727241
> 
> 赞同：0
> 
> 时间：2012-12-05T15:57:00.730
> 
> 标签：wpf, visual-studio-2010, sql-server-2008

我正在使用 VS 2010 编写 WPF 应用程序，定义 DataContext 以从设置文件中获取连接字符串，并将表从 DB 拖到 .dbml 文件中。很长一段时间一切正常，然后突然我遇到了一个问题：“建立与 sql server 的连接时发生与网络相关或特定于实例的错误” 奇怪的是，当我制作版本时它的 - 它工作正常！！！！！！！！！！（设置文件在许多周内都没有更改，但直到几天前它都可以正常工作......）任何帮助将不胜感激......谢谢，Rivka

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:09:40.213

哇...我明白了：vs 上的项目与已安装版本之间的区别在于 - 它所在的卷。vs 位于其中一个网络服务器上，似乎几天前更改了定义访问....（安装的版本在本地磁盘上....）我已将项目移至另一个卷 - 并且有效...

# vim - 使用 vim 处理文本文件中的 \r \n ^M ^@

> ID：13727248
> 
> 赞同：3
> 
> 时间：2012-12-05T15:57:19.237
> 
> 标签：vim, newline, carriage-return

当我将 excel 文件中的数据行保存为制表符分隔的 .txt 文件，然后在 VIM 中打开这些文件时，我发现曾经在 excel 中的多行文件现在在 VIM 中变成了单行文件。

“行”可以在 VIM 中使用一些替换命令来分隔：

```
%s/^M/\r\n/g 
```

在此之后，“行”现在由 . 分隔`^@`。我使用另一个替换命令来处理它：

```
%s/^@//g 
```

我的问题是：

1.  为什么我的多行 txt excel 文件在 VI 中打开为单行？
2.  是什么`^@`？
3.  有没有更好的方法来“修复”我的 txt 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T22:49:42.647

您通常可以通过运行以下命令来解决此类问题：

`dos2unix FILE_NAME`

这将重新格式化文件的换行符（即它会修改您的文件）。

（*此命令在 Mac OS X 上不存在*）

* * *

如果您没有 dos2unix（例如您在 Mac 上），您可以使用 sed：

`sed 's/^M$//' input.txt > output.txt`

*如果您想通过就地*`sed -i`执行替换来避免创建新文件，也可以使用.

 *您可以`^M`通过键入`CTRL``V`然后输入`CTRL``M`

[更多阅读在这里](http://www.xappsoftware.com/wordpress/2009/04/09/dos2unix-using-sed-how-to-remove-m-chars-from-a-dos-file/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T14:27:46.333

试试这个命令：

```
 :%s/^M/\r/g 
```

`\r`是 vim 使用的回车符。该`^M`字符是按字面显示的换行符。*

# django - 在 modelChoiceField 查询集中选择列：输出混乱

> ID：13727256
> 
> 赞同：0
> 
> 时间：2012-12-05T15:57:35.077
> 
> 标签：django, select, field, django-queryset, choicefield

我有一个用 Django 创建的 modelChoiceField：

```
lawsToValidate=forms.ModelChoiceField(queryset=LawsIdsModel.objects.filter(validated=0).values("releveAnnee", "releveMois", "noOrdre"), widget=forms.Select(attrs={'onchange': 'javascript: lawToValidateDisplay(this.value);'})) 
```

django 代码创建了这个 html 代码：

```
<option value="{'releveMois': 1L, 'noOrdre': 2L, 'releveAnnee': 2009L}">{'releveMois': 1L, 'noOrdre': 2L, 'releveAnnee': 2009L}</option> 
```

django 代码在单击下拉列表后立即调用我的 jquery 函数。如果我在我的 javascript 函数中显示选定的值，这就是我所拥有的：

```
{'releveMois': 1L, 'noOrdre': 3L, 'releveAnnee': 2009L} 
```

如何从 jquery / javascript 中的这个 python 字典中获取信息。如何获得 releveMois、releveAnnee、noOrdre？如果我尝试 jQuery.parseJSON，它不起作用！

**编辑：** 通过下面的评论，我明白最好更改 html 输出。这是我生成下拉列表的模板代码：

```
<div id="lawsToValidateChoice" class="fieldWrapper">
            {{ form.lawsToValidate.errors }}
            <select  onchange="javascript: lawToValidateDisplay(this.value);" name="lawsToValidate" id="id_lawsToValidate">
                <option value="" selected="selected">Select a law to validate</option>
                {% for law in form.lawsToValidate.field.queryset %}
                    <option value="{{ law.releveAnnee }},{{ law.releveMois }},{{ law.noOrdre }}">releveAnnee={{ law.releveAnnee }}, releveMois={{ law.releveMois }}, noOrdre={{ law.noOrdre }}</option>
                {% endfor %}
            </select>
        </div> 
```

解析值不再有问题！解决了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:59:18.903

您需要使用该[`json`模块](http://docs.python.org/3/library/json.html)来序列化您的结果，而不是`str`转换您的字典。

```
return HttpResponse(json.dumps(result), mimetype="application/json") 
```

更好的是，使用[`JSONResponse()`对象](https://docs.djangoproject.com/en/2.1/ref/request-response/#jsonresponse-objects)或 [Django 序列化](https://docs.djangoproject.com/en/stable/topics/serialization/)程序为您创建 JSON 结果；第一个是完全替换`HttpResponse`编码为 JSON 的对象，并确保使用正确的 mimetype。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:00:25.180

首先在服务器端创建一个 JSON（例如使用`json`模块）：

```
import json
json = json.dumps(queryset) 
```

`parseJSON()`然后使用（或`JSON.parse`用于现代浏览器）在 JavaScript 中解析检索到的 JSON ：

```
var json = $.parseJSON(jsonVar);
console.log(json.releveMois); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T18:12:22.330

解决此问题的更好方法是问题是：在使用中选择几列时`values`，`queryset`它会使输出混淆。解决方案是`only`改用（在过滤器之前）。

```
lawsToValidate=forms.ModelChoiceField(queryset=LawsIdsModel.objects.only("releveAnnee", "releveMois", "noOrdre").filter(validated=0), widget=forms.Select(attrs={'onchange': 'javascript: lawToValidateDisplay(this.value);'})) 
```

# c#-4.0 - C# 中的条码阅读器代码

> ID：13727260
> 
> 赞同：1
> 
> 时间：2012-12-05T15:57:52.453
> 
> 标签：c#-4.0, barcode

***客观的...***

我想为我们的公寓协会添加功能，以便在（UPS、USPS、FedEX 等）包裹到达时扫描条形码并将信息发布到 SQL 服务器以供以后使用。

该代码可以是桌面或基于 Web 的，但最好是 c# 代码 - .Net 4.5 可以。任何有关手动扫描仪的建议也值得赞赏。

任何人都可以建议一个起点吗？

提前感谢您的任何帮助/指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-09T08:59:12.683

您可以使用 pqScan [Barcode reader](http://www.pqscan.com/barcode-scanner/)，它可以在 .net 2.0+ 中使用，因此您可以使用它构建 winforms 和 asp.net Web 应用程序。

# string - 对 Unicode 字符串进行固定长度存储的正确编码？

> ID：13727272
> 
> 赞同：3
> 
> 时间：2012-12-05T15:58:27.850
> 
> 标签：string, unicode, encoding, character-encoding

我将研究需要将 Unicode 字符串（特别是英语、德语、西班牙语和阿拉伯语）读/写到硬件设备的软件（在 c# 中）。固件开发人员告诉我，他的代码希望将每个字符串作为固定长度的字节数组存储在一个二进制文件中，这样他就可以使用索引（索引 * 长度 = 起始偏移量）快速访问任何字符串，然后读取固定长度的字节数）。我了解 .NET 在内部使用 UTF-16 编码，我认为它在技术上是一种可变长度编码（取决于 Unicode 代码点的数量）。我相当肯定英语、德语和西班牙语在使用 UTF-16 编码时都会使用两个字节/字符，但我不太确定阿拉伯语。

首先，谁能确认我对 UTF-8/UTF-16 编码的可变长度特性的理解？其次，虽然会浪费大量空间，但 UTF-32（固定大小，每个字符用 4 个字节表示）是确保每个字符串可以以固定长度存储的最佳选择吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:36:59.387

Unicode 术语：

*   Unicode 字符集中的每个条目都是一个*代码点*
*   编码*代码点*由一个或多个转换格式的*代码单元组成（UTF-8 使用 8 位**代码单元*；UTF-16 使用 16 位代码单元）
*   用户可见的字形可能由[一系列代码点组成](http://www.unicode.org/faq/char_combmark.html#2)

所以：

*   UTF-8 中的代码点是 1、2、3 或 4 个八位字节宽
*   UTF-16 中的代码点为 2 或 4 个八位字节宽
*   UTF-32 中的代码点是 4 个八位字节宽
*   屏幕上呈现的字形数量可能少于代码点的数量

因此，如果您想支持整个 Unicode 范围，您需要将固定长度字符串设为 32 位的倍数，无论您选择哪种 UTF 作为编码（我假设未使用的字节将设置为 0x0 并且这些将在 I/O 期间附加、修剪。）

在通过用户界面传达长度限制方面，您可能希望根据代码单元大小和典型客户做出某种妥协，而不是尝试找到您可以构建的最复杂字素的宽度。

# regex - 正则表达式提取删除除客户代码外的所有内容：

> ID：13727274
> 
> 赞同：0
> 
> 时间：2012-12-05T15:58:33.460
> 
> 标签：regex, jedit

我有一个长文本文件，我想保存所有类似于以下内容的行：

`Customer Code: BER17O`

如何使用 REGEX 删除除这些行之外的所有数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:00:35.257

与此一起使用`multiline`选项`regex`

`^(?!Customer Code: \w+$).*$`

* * *

**或者**[如果你想具体一点]

`^(?!Customer Code: BER17O$).*$`

* * *

`(?!)`如果该行以`Customer Code:`单词开头，则与该行不匹配，这是一个否定的前瞻！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:02:28.953

不要删除所有其他内容，只需获取您需要的内容：`(Customer Code: [A-Z]{3}\d{3})`如果它总是三个大写字母后跟三个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:03:31.760

`(Customer Code: [^\s]+)`

此代码将匹配“客户代码：”和类似空格符号之前的所有符号。

# python - 相当于 KDE 上的 pyrcc4

> ID：13727279
> 
> 赞同：1
> 
> 时间：2012-12-05T15:58:49.880
> 
> 标签：python, pyqt4, opensuse, kde, pyrcc

我正在开发一个 pyqt 应用程序，通过 qt-designer 4.8.1 完成了 ui，并使用 pykdeuic4（在 OpenSuse 12.2 上可用）生成了相应的 py 文件，但找不到 pyrcc4 的等价物来处理 *.qrc 文件。

什么是等效的工具/命令？

**编辑：**

大多数关于将 QtDesigner 与 PyQt 一起使用的文档都表明使用 pyuic4 / pyuic（在我的平台上是 pykdeuic4），但至于其他工具 pyrcc4 / pyrcc，我找不到等效的工具。

我想知道，我什至可以从哪里获得原始工具（pyrcc4）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:02:28.013

没有与 pyrrc4 对应的 PyKDE 专用工具。[KDE python 绑定](http://techbase.kde.org/Development/Languages/Python)建立在PyQt 之上，因此您可以只使用 pyrrc4 本身。

PyKDE 只需要一个专门的工具（pykdeuic4）来编译 ui 文件，因为显然 KDE 有很多 PyQt 不知道的小部件。

对于 OpenSuse，我相信包含 pyrrc 的包是 python-qt4-utils。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T19:00:54.347

好吧，原来我需要的只是`python-qt4-utils`在现有的`python-qt4`. 现在，我拥有了备受追捧的实用程序。

# security - 浏览器在我的网站上请求 crossdomain.xml & /-7890*sfxd*0*sfxd*0

> ID：13727287
> 
> 赞同：1
> 
> 时间：2012-12-05T15:59:10.497
> 
> 标签：security, web, cross-domain

就在最近，我在我的网站上看到多个会话重复请求 /crossdomain.xml 和 /-7890*sfxd*0*sfxd*0。我们从这些会话背后的一些人那里得到反馈，他们无法正确浏览该站点。有人知道可能导致这些请求的原因吗？我们在考虑病毒或某些工具栏。

我们在请求中看到的唯一常见项目是它们都是 IE 的某个版本（7、8 或 9）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T19:00:31.297

*独立*于您的站点/应用程序的性质，...

...策略文件的请求`/crossdomain.xml`表明在客户端工作站上运行的 [通常是 Adbobe Flash、Silverlight、JavaFX 等] 应用程序并试图断言您的站点是否允许该应用程序***代表***用户访问您的站点在所述工作站上。跨域策略的这种断言是旨在保护工作站用户的底层“沙盒”环境（Flash Player、Silverlight 等）的一项安全功能。这是因为当“代表”用户访问第三方站点时，应用程序可以访问这些站点将在用户可能很容易启动/获得的各种会话或 cookie 的*上下文中提供的任何信息。*

... 的请求`/-7890*sfxd*0*sfxd*0`暗示客户端（无论是上面提到的应用程序、一些不相关的 http 引用、Web 浏览器插件还是其他一些逻辑）认为您的网站是 superfish.com、某个在线商店隶属于 superfish.com 或为分享收入而向 superfish.com 发送流量的众多网站之一。

现在......您的站点收到的这两种请求**很可能是不相关**的，即使它们在某些明显的同时来自同一个工作站。例如，可能只是跨域策略断言来自合法希望从您的站点访问某些服务的 Web 应用程序，而“sfxd”请求来自工作站 Web 浏览器上的某些插件（例如 WindowsShopper 或，唉，一系列其他插件），它们会根据浏览器接收到的任何图像以某种方式触发它们的请求。

提出这些请求的一些客户端`not able to browse your site correctly`（无论这意味着什么......）这一事实可能进一步表明，这些客户端上的一些 - 我怀疑 - JavaScript 逻辑将其底层应用程序/附属公司的根 URL 与您的站点的根 URL 混淆. 但这只是一个猜测，您的网站没有足够的上下文来获得更精确的提示。

**一些前进的建议**：

*   确定您的站点是否可以并且应该允许跨域访问以及允许谁访问，并相应地删除或编辑您站点的 crossdomain.xml 文件。太多的网站似乎只是
    `<allow-access-from domain="*"/>`无缘无故地放入他们的跨域策略文件（从而使他们的用户面临风险）。第一个建议不会导致解决手头的问题，但我无法抗拒警告。
*   请其中一位“无法正确访问您的网站”的用户禁用其 Web 浏览器上的某些插件（也称为附加组件）和/或使用备用 Web 浏览器，看看这是否能改善这种情况。在 Web 浏览器上禁用插件通常非常容易。为了加快发现速度，您可能会建议采用某种二分法，一次禁用多个插件，然后使用其中一半的插件或仍然启用的插件继续实验，具体取决于您网站的正确结果使用权。
*   如果您的应用程序提供来自第三方网站的广告，请暂时禁用这些广告，看看这是否有助于这些“无法正常访问您的网站”的用户。

# android - Android - 如何在我们的应用运行时阻止通知管理器

> ID：13727293
> 
> 赞同：0
> 
> 时间：2012-12-05T15:59:31.713
> 
> 标签：android

我想知道如何在我的应用程序运行时禁用或阻止通知管理器。

这意味着用户不能使用通知管理器，即不应弹出通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:20:02.813

你必须让它全屏，要么：

通过清单：

```
<activity ...
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" />
</activity> 
```

或通过代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:21:07.067

我认为您想将活动设置为全屏。如果是这样，试试这个它可能会帮助你。

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

来源：[http ://www.androidsnippets.com/how-to-make-an-activity-fullscreen](http://www.androidsnippets.com/how-to-make-an-activity-fullscreen)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T04:31:45.913

阻止通知管理器是指当您的应用程序处于前台时阻止来自您的应用程序的通知？我正在寻找类似的东西，我认为创建一个服务来管理显示的通知，这些通知可以在活动开始和停止时发送消息，这可能是需要的。

# ruby - 在 Windows Azure 虚拟机上访问 ruby 应用程序

> ID：13727294
> 
> 赞同：0
> 
> 时间：2012-12-05T15:59:35.707
> 
> 标签：ruby, azure, redmine

我正在尝试在 Windows Azure 虚拟机上安装名为[Redmine的项目管理应用程序并从 Internet 访问它。](http://www.redmine.org/)Redmine 基于 Ruby 并使用数据库，所以我也必须安装它们。实际上我设法安装了所有东西，当我通过远程桌面连接到虚拟机时，我可以通过在浏览器中键入 localhost/redmine 来访问 Redmine。问题是我现在应该怎么做才能从外部访问它？（例如家用电脑或互联网上的任何人）。我的虚拟机有一个类似 myapp.cloudapp.com 的地址，但我无法通过输入 myapp.cloudapp.com/redmine 或类似的东西来访问 redmine。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:57:14.400

好吧，我不能完全代表 Azure，因为我没有使用过它，但应该有一种方法可以将端口 80 转发到你的 VM。您还应该确保 IIS 设置为侦听 0.0.0.0:80 而不是 127.0.0.1:80

编辑：通常端口转发是在云提供商的控制面板中设置的，所以我会首先检查 Azure 为您提供配置 VM 的任何接口。

# c++ - boost::iostreams::stream 不设置EOF

> ID：13727296
> 
> 赞同：2
> 
> 时间：2012-12-05T15:59:40.200
> 
> 标签：c++, boost, boost-iostreams

样本：

```
namespace  boostio = boost::iostreams;
boostio::stream<boostio::array_source> memStream(arr);

while (!memStream.eof())
{
    char tst[2];

    memStream2.readsome(tst, 2);
} 
```

在这里，我使用 char 数组初始化 memstream，但 while 循环永远不会结束。问题是什么 ？

**编辑：**使用流的读取方法按预期工作。使用其他任何东西（包括运算符 >>）都不行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:05:39.773

以您的方式使用 readsome() 有两个问题，除了一般评论认为它是完全可选的。

1.  的目的`readsome()`是从上次调用`rdbuf()->underflow()`. 构造流时，它不会（在这种情况下）尝试立即从源读取，它的缓冲区是空的。readsome() 没有什么可以得到你。

    编辑：从技术上讲，在这种情况下，它回退到（也完全可选）`showmanyc()`，以找出数据源中有多少数据可用，但在此实现中`showmanyc`碰巧返回“不确定”（零）。

2.  即使您启动流缓冲区（通过常规的 read() 或 get() 等），readsome 在到达流缓冲区的末尾时也不会设置任何流标志：它不知道是否有更多数据可用来源（因为`showmanyc()`不告诉）。

以下适用于我的测试：

```
#include <iostream>
#include <complex>
#include <iomanip>
#include <boost/iostreams/stream.hpp>
#include <boost/iostreams/device/array.hpp>

int main()
{
    namespace  boostio = boost::iostreams;

    char arr[10] = "example";
    boostio::stream<boostio::array_source> memStream(arr);

    char c;
    while(memStream.get(c)) // prime the buffer by reading 1 char
    {
        std::cout << c;
        char tst[2];
        while(memStream.readsome(tst, 2) > 0) // read some more
            for(int n = 0; n < memStream.gcount(); ++n)
                std::cout << tst[n];
    }
    std::cout << '\n';
} 
```

仔细一看，iostreams 对此很聪明，当我读取第一个字符时，它使流缓冲区的内部指针直接指向数组，因此在这种情况下，可以从 readsome() 中获取所有要读取的内容。

现在，至于 operator>>，`memStream >> setw(2) >> tst;`对我来说工作得很好（我希望你在数组上使用 >> 时记得 setw ！！），尽管使用了错误的循环条件“while(!stream.eof())` . 您需要提供一个测试用例来演示您在操作员遇到的问题>>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T14:52:08.563

你可能正在做`tst >> memStream2;`. `memStream2 >> tst;`你需要这样做`std::cin >> var;`

# git - Git合并与Yaml文件冲突

> ID：13727300
> 
> 赞同：2
> 
> 时间：2012-12-05T16:00:07.623
> 
> 标签：git, yaml

我正在使用修订控制的 yaml 文件来跟踪与软件版本关联的包，并且有多个作业（在 Jenkins 上运行）编辑跟踪文件的不同部分。当我尝试将更改推送到文件时，有时会出现合并冲突，具体取决于文件的哪个部分被编辑。例如：

头：

```
...

Package6:
    Name: motorControl
    Version: 1.2
    Size: 341
Package7:
    Name: None
    Version: None
    Size: None
... 
```

本地副本：

```
...

Package6:
    Name: None
    Version: None
    Size: None
Package7:
    Name: eyeCandy
    Version: 3.2
    Size: 1087
... 
```

是否有不同的合并策略可以用来解决此问题而无需手动解决冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T16:22:46.493

在您的情况下，最好的办法是将此文件添加到`.gitignore`而不是对其进行版本化。然后，您可以在更新文件时在 git-hooks 中生成它。

如果这不是解决方案，您可以使用`git checkout --theirs -- <path/file>`or `git checkout --ours -- <path/file>`。然后，你`git add`和`git commit`，还有一些步骤需要手动完成，但至少你不需要在文件中手动解决这些冲突。

但最好的办法是真正忽略自动生成的文件。

# c# - WinForm 查找 XML 文件

> ID：13727301
> 
> 赞同：2
> 
> 时间：2012-12-05T16:00:08.407
> 
> 标签：c#, xml

我需要使用 C# 将简单 WinForm 的外观写入 XML 代码。例如，我有一个带有两个按钮、列表视图、树视图、组框、菜单和面板的表单。

稍后，我需要读取该文件，它必须重建完全相同的 WinForm。

关于如何处理这个问题的任何想法？我看过一篇关于matter的类似帖子，但它只描述了如何写值，而不是定位、大小等......

[这是一个例子，写在 xml 文件中的数据应该是什么样子](http://shrani.si/f/1X/VM/2FKja3SD/example.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:11:08.393

我会在这里使用 LinqToXml .....

```
XElement root = new XElement("Form");
TraverseAllControls(root, this);
var xml = root.ToString(); 
```

* * *

```
void TraverseAllControls(XElement xElem,Control ctrl)
{
    foreach (Control c in ctrl.Controls)
    {
        if (String.IsNullOrEmpty(c.Name)) continue;

        var e = new XElement(c.Name, 
                    new XElement("Width",c.Width), 
                    new XElement("Height",c.Height),
                    new XElement("X",c.Location.X),
                    new XElement("Y",c.Location.Y));
        xElem.Add(e);
        TraverseAllControls(e, c);
    }
} 
```

# sql-server - VB6 - 插入查询的列名无效

> ID：13727309
> 
> 赞同：0
> 
> 时间：2012-12-05T16:00:25.640
> 
> 标签：sql-server, database, vb6

我正在测试一个将一些数据写入 SQL Server 2008 数据库的小程序。这是代码：

```
Dim MyConn As ADODB.Connection
Dim MyRecSet As ADODB.Recordset
Dim st1 As Integer

Set MyConn = New ADODB.Connection
MyConn.ConnectionString = "Provider=sqloledb;" & _
       "Data Source=xxx\SQLEXPRESS2;" & _
       "Initial Catalog=db;" & _
       "User Id=sa;" & _
       "Password=xxx"
MyConn.Open

st1 = 5
 MyConn.Execute("INSERT INTO steen (steen1) VALUES (st1)")

MyConn.Close 
```

但是，我收到错误消息：列名“st1”无效。我不知道为什么会出现这个错误。当我将查询更改为此：

```
INSERT INTO steen (steen1) VALUES (5) 
```

它完美地工作。

有谁知道我为什么会收到错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:02:58.643

尝试：

```
MyConn.Execute("INSERT INTO steen (steen1) VALUES ("& st1 & ")") 
```

或者：

```
st1 = 5
 Dim StrQuery As String
StrQuery = "INSERT INTO steen (steen1) VALUES ("& st1 & ")"

MyConn.Execute(StrQuery) 
```

# php - Symfony 2 复杂的安全提供程序

> ID：13727311
> 
> 赞同：0
> 
> 时间：2012-12-05T16:00:29.467
> 
> 标签：php, security, authentication, symfony

我已经在 Symfony 2 上闲逛了一段时间，我有一个关于制作自定义复杂安全系统的问题。

我需要建立一个基于`Module`和`Action`基础的安全系统，而不是`USER_ROLE`. 我将在项目中有许多模块，并且任何用户都应该能够被授予权限，比如说，对任何模块的读取和/或写入权限。

当前的 S2 安全系统在这种情况下没有任何意义，我在互联网上的任何地方都没有发现类似的问题。

提前谢谢你，博扬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:40:54.117

我认为您应该尝试使用[访问控制列表 (ACL)](http://symfony.com/doc/current/cookbook/security/acl.html)对您的资源做出访问决策。

# window - 阻止或取消退出 JavaFX 2

> ID：13727314
> 
> 赞同：7
> 
> 时间：2012-12-05T16:00:36.117
> 
> 标签：window, javafx-2

退出 JavaFX 程序时，我将覆盖 Application.stop() 以检查未保存的更改。这可以正常工作，但最好让用户选择取消操作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T16:00:36.117

Application.stop() 是最后机会沙龙，换句话说，虽然它确实捕获了退出，但撤销退出过程有点晚了。

更好的是为关闭请求设置一个监听器，可以通过消费事件来取消。

在应用程序类中：

```
public void start(Stage stage) throws Exception {
    FXMLLoader ldr = new FXMLLoader(getClass()
                .getResource("Application.fxml"));
    Parent root = (Parent) ldr.load();
    appCtrl = (ApplicationController) ldr.getController();

    Scene scene = new Scene(root);

    stage.setScene(scene);
    stage.show();

    scene.getWindow().setOnCloseRequest(new EventHandler<WindowEvent>() {
        public void handle(WindowEvent ev) {
            if (!appCtrl.shutdown()) {
                ev.consume();
            }
        }
    });
} 
```

然后在应用程序控制器中，`appCtrl`如上引用：

```
/** reference to the top-level pane                               */
@FXML
private AnchorPane mainAppPane;

public boolean shutdown() {
    if (model.isChanged()) {
        DialogResult userChoice =
                ConfirmDialog.showYesNoCancelDialog("Changes Detected",
                "Do you want to save the changes?  Cancel revokes the "
                + "exit request.",
                mainAppPane.getScene().getWindow());

        if (userChoice == DialogResult.YES) {
            fileSave(null);

            if (model.isChanged()) {
                // cancelled out of the save, so return to the app
                return false;
            }
        }

        return userChoice == DialogResult.NO;
    }

    return true;
} 
```

注意：在 FXML 中引用了 mainAppPane（在这种情况下使用 JavaFX 场景构建器）以允许访问场景和窗口；该对话框是从[https://github.com/4ntoine/JavaFxDialog](https://github.com/4ntoine/JavaFxDialog)扩展而来的，而 fileSave 是 File -> Save 菜单项的事件处理程序。对于文件 -> 退出菜单项：

```
@FXML
private void fileExitAction(ActionEvent ev) {
    if (shutdown()) {
        Platform.exit();
    }
} 
```

希望这对某人有帮助！

# c - 使用 sscanf 从 c 中的字符串中提取

> ID：13727318
> 
> 赞同：5
> 
> 时间：2012-12-05T16:00:46.567
> 
> 标签：c, string, character, scanf

我正在尝试使用 sscanf 从字符串中提取 name 和 msg 的特定值，`{"username":"ece","says":"hello"}`如下所示：

```
sscanf(data, "{"\username"\:"\%s"\,"\says"\:"\%s"\}", name, msg); 
```

我需要名称中的“ece”和味精中的“你好”，但我在名称中得到 ece","says":"hello" 并且味精保持为空。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:04:56.537

`%s`格式在下一个空白处停止。你需要它早点停止，在`'"'`，所以你需要使用一个字符集，

```
sscanf(data, "{\"username\":\"%[^\"]\",\"says\":\"%s\"}", name, msg);
                              ^^^^^^
                          read up to the next double quote 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:05:26.133

您需要将转义字符放在转义字符`\` **之前**。

```
sscanf(data, "{\"username\":\"%s\",\"says\":\"%s\"}", name, msg); 
```

除非用户名后面有空格，否则缓冲区中的所有内容都将被读入`name`.

使用反字符集而不是 %s，像这样`%[^\"]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:05:34.323

问题是 %s 转换规范会读取输入，直到它到达空白字符。因此，您在第一个变量中拥有“用户名”之后的所有数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T17:16:11.513

1）在整个字符串格式中，您必须`"\`使用`\"`. `\`提到下一个字符是特殊字符并且是`"`特殊字符

2）你必须同时`%s`替换和。上面这个正则表达式意味着你想要捕获不包含. 所以字符串的捕获将在第一个停止`%[^\"]``username``says``"``"`

```
sscanf(s, "{\"username\":\"%[^\"]\",\"says\":\"%[^\"]\"}", name, msg); 
```

# java - 为什么在我的 Java 应用程序中看到“奇怪”的滚动条？

> ID：13727319
> 
> 赞同：1
> 
> 时间：2012-12-05T16:00:49.467
> 
> 标签：java, macos, swing, jscrollpane, jscrollbar

在我的 Java 应用程序中，我有一个窗口，它在 JScrollPane 中保存一个 JTextArea，滚动条策略设置为`AS_NEEDED`.

当我运行我的应用程序时，我以这种方式看到 JTextArea： ![JTextArea 与](../Images/55188b4dd176bf5582cafaffafbed60d.png)

为什么我看到带有那个切去旋钮的滚动条（它不反映像[这样](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html#operation)的“标准”表示）？

框架的布局是`GridBagLayout`，我在 Mac OS X 10.8.2 上，如果有的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:06:54.573

这是基于您的应用程序使用的[外观和感觉](http://www.apl.jhu.edu/~hall/java/Swing-Tutorial/Swing-Tutorial-LAF.html)，以及 Java 与本机操作系统布局组件集成的限制。您屏幕截图中的那个看起来像[Nimbus](http://docs.oracle.com/javase/6/docs/technotes/guides/jweb/otherFeatures/nimbus_laf.html)。

Swing 应用程序总是自定义渲染外观和感觉，并且不能很好地在任何地方使用本机操作系统小部件。结果是您会得到奇怪的外观，可能仅在某些时候与操作系统一致，或者仅与某些布局组件一致。

欢迎使用 Java 开发跨平台桌面应用程序。:(

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T16:09:54.243

要尝试在您的应用程序启动时获得系统外观和感觉，您可以执行以下操作：

```
try {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassname());
} catch (Exception e) {
    // Handle exception
} 
```

这将设置系统的外观和感觉，无论您在什么上运行它。

如前所述，您的应用程序的默认外观和感觉似乎是 Nimbus 而不是 OSX 的 Aqua，这再次可以通过上面的代码片段进行修复，您可以（如果您愿意）为用户提供一个 UI 选项来更改外观和他们选择的任何应用程序的感觉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:07:01.270

您与 Nimbus LookAndFeel 在一起

[http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

# ant - 蚂蚁 在多个目录中

> ID：13727320
> 
> 赞同：4
> 
> 时间：2012-12-05T16:00:53.510
> 
> 标签：ant

我想简化一下：

```
<target name="build">
   <parallel>
      <antcall target="build-A" />
      <antcall target="build-B" />
      <antcall target="build-C" />
   </parallel>
</target>

<target name="build-A">
   <exec executable="tool.exe" dir="projects/A">
      <arg value="input.xml" />
   </exec>
</target> 
```

where`build-B`和`build-C`做完全相同的事情（仅分别在 dirs`B`和`C`中），类似于以下内容：

```
<dirset id="projects" dir="." >
   <include name="projects/*" />
</dirset>

<apply executable="tool.exe" parallel="true">
   <arg value="input.xml" />
   <dirset refid="projects" />
</apply> 
```

这不起作用，因为`apply`将执行以下操作之一：

如果`parallel`设置为`true`,

```
tool.exe input.xml projects/A projects/B projects/C 
```

或者如果`parallel`设置为`false`,

```
tool.exe projects/A/input.xml
...waits for tool.exe to complete...
tool.exe projects/B/input.xml
...etc 
```

即使这样也不正确，因为`tool.exe`期望*在*`projects/A`目录中运行。

有没有办法将其并行化，使我得到的输出相当于：

```
cd project/A
tool.exe input.xml

cd ../B
tool.exe input.xml

cd ../C
tool.exe input.xml 
```

但并行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T20:20:22.857

我会使用[ant-contrib](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)的[任务](http://ant-contrib.sourceforge.net/tasks/tasks/for.html)来做到这一点。

```
<for param="dir" parallel="true">
    <dirset id="projects" dir="." >
        <include name="projects/*" />
    </dirset>
    <sequential>
        <exec executable="tool.exe" dir="@{dir}">
            <arg value="input.xml" />
        </exec>
    </sequential>
</for> 
```

# sql - VB.NET 2010 数据库搜索

> ID：13727322
> 
> 赞同：0
> 
> 时间：2012-12-05T16:00:54.900
> 
> 标签：sql, database, vb.net, visual-studio-2010, search

我有一个通过数据向导连接到我的 vb 应用程序的 ms access 数据库。我想让用户搜索数据库并在数据网格上显示他们的结果。例如，用户搜索身高在 1.8 米以下的 50 – 55 岁老人

到目前为止，我可以使用此代码显示数据库中的总人数

```
 Private Sub lblTotalPeople_Click(sender As System.Object, e As System.EventArgs) Handles lblTotalPeople.Click
    Dim con As OleDbConnection = New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\AssignmentDatabase.accdb")
    ' Use wildcard'
    Dim cmd As OleDbCommand = New OleDbCommand("Select COUNT(*) From Table1", con)
    '' or Where username='" & TextBox1.Text & "'
    con.Open()
    Dim myDA As OleDbDataAdapter = New OleDbDataAdapter(cmd)
    Dim myDataSet As DataSet = New DataSet()
    myDA.Fill(myDataSet, "Table1")
    DataGridView2.DataSource = myDataSet.Tables("Table1").DefaultView

End Sub 
```

我将如何根据用户搜索的内容或我将使用什么来搜索数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:53:33.853

假设您还不需要学习如何使用 SQL。

在您上面的代码中，SQL 语句是

`Select COUNT(*) From Table1`

您需要将此 SQL 替换为使用来自用户的值（很可能来自文本框）的搜索。本文

`'' or Where username='" & TextBox1.Text & "'`

似乎是某些可能有效但看起来很危险的 SQL 的一部分。您还应该研究 SQL 注入，因为直接使用它意味着用户可以访问/损坏您的 Access 数据库。

# php - 用 PHP 建表的理想方法

> ID：13727335
> 
> 赞同：0
> 
> 时间：2012-12-05T16:01:33.483
> 
> 标签：php

作为一名实习生，我意识到我花费了大量时间从 PHP 中的 sql 查询构建和操作表。我目前的方法是使用两个 foreach 循环：

```
foreach($query as $record){
    foreach($record as $field => $value){
        *Things that need to be done on each field-value pair*
    }
    *Things that need to be done on each row*
} 
```

有没有更好的方法来做到这一点？

此外，我倾向于将数据打包为一个 ~ 分隔列表并将其存储在服务器中，这是一种不好的做法吗？

我宁愿放一些代码供审查，但我不想冒险暴露公司鳕鱼的内部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:24:10.643

Foreach 循环是遍历数据的最佳方式。如果您想让您的代码更漂亮，请尝试使用三元版本

```
<?php foreach($query as $record) : ?>
   <?php foreach($record as $field => $value) : ?>
        *Things that need to be done on each field-value pair*
    <?php endforeach; ?>
    *Things that need to be done on each row*
<?php endforeach; ?> 
```

此外，就像上面评论中提到的那样，在数据库中存储 ~ 分隔数据时会丢失很多功能。如果必须这样做，您可以尝试存储序列化对象而不是分隔字符串。您可以通过多种方式操作对象，例如[json_encode()](http://php.net/manual/en/function.json-encode.php)和[json_decode()](http://php.net/manual/en/function.json-decode.php)

```
 $myArray = array();
    $myArray['User1']['book'] = 'Pride and Prejudice';
    $myArray['User1']['favorites'] = 'Water skiing';
    $myArray['User2']['book'] = 'Mansfield Park';
    $myArray['User2']['favorites'] = array('skateboarding', 'surfing', 'running');
    $myArray['description'] = 'Things people like.';        

    echo '<pre>';
    print_r(json_encode($myArray)); //This will convert your array to a string for the db
    echo '</pre>';

    echo '<pre>';
    $myArrayString = json_encode($myArray);
    print_r(json_decode($myArrayString)); //This will convert the db string to an object for manipulation

echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:27:42.517

没有内置方法可以根据查询结果生成 HTML 表。如果您发现自己一遍又一遍地编写这种代码，那么创建可重用的类或库将是一个不错的选择。例如：

```
$table = new HTMLTable();
$table->setData($data);
echo $table->toHTML(); 
```

以上不是工作代码，只是一个示例，说明如何创建可重用代码而不是多次重复相同的表格构建代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:51:14.657

我倾向于使用`while`带有其中一个功能的循环`mysql_fetch_..`。但本质上它和你所做的一样。

```
$query = 'SELECT
            stuff
          FROM
            table';
if ($query = mysql_query($query)) {
    while ($row = mysql_fetch_assoc($query)) {
        foreach ($row as $key => $value) {
            /* Things that need to be done on each field-value pair */
        }
        /* Things that need to be done on each row */
    }
} 
```

至于 ~ 分隔列表。我强烈建议将数据保存在单独的数据库字段中，而不是那样打包。只需为每个这样的包创建一个新表。

# android - Spannable 的 Android 填充？

> ID：13727343
> 
> 赞同：4
> 
> 时间：2012-12-05T16:02:08.093
> 
> 标签：android, textview

我使用此代码为 TextView 中的一段文本设置背景：

```
s.setSpan(new BackgroundColorSpan(getResources().getColor(R.color.selection_blue)), prevIndex, index, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

但我也需要为此文本设置填充。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-13T02:37:30.067

您可以使用`ReplacementSpan`. 在您的活动中：

```
TextView tagsTextView = (TextView) mView.findViewById(R.id.tagsTextView);
SpannableStringBuilder stringBuilder = new SpannableStringBuilder();

SpannableString tag = new SpannableString("TEST");
stringBuilder.append(tag);
stringBuilder.setSpan(new TagSpan(getResources().getColor(R.color.blue), getResources().getColor(R.color.white)), stringBuilder.length() - tag.length(), stringBuilder.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

tagsTextView.setText(stringBuilder, TextView.BufferType.SPANNABLE); 
```

标签跨度.java

```
public class TagSpan extends ReplacementSpan {
    private static final float PADDING = 50.0f;
    private RectF mRect;
    private int mBackgroundColor;
    private int mForegroundColor;

    public TagSpan(int backgroundColor, int foregroundColor) {
        this.mRect = new RectF();
        this.mBackgroundColor = backgroundColor;
        this.mForegroundColor = foregroundColor;
    }

    @Override
    public void draw(Canvas canvas, CharSequence text, int start, int end, float x, int top, int y, int bottom, Paint paint) {
        // Background
        mRect.set(x, top, x + paint.measureText(text, start, end) + PADDING, bottom);
        paint.setColor(mBackgroundColor);
        canvas.drawRect(mRect, paint);

        // Text
        paint.setColor(mForegroundColor);
        int xPos = Math.round(x + (PADDING / 2));
        int yPos = (int) ((canvas.getHeight() / 2) - ((paint.descent() + paint.ascent()) / 2)) ;
        canvas.drawText(text, start, end, xPos, yPos, paint);
    }

    @Override
    public int getSize(Paint paint, CharSequence text, int start, int end, FontMetricsInt fm) {
        return Math.round(paint.measureText(text, start, end) + PADDING);
    }
} 
```

# oauth - openid oauth 集成与实现

> ID：13727344
> 
> 赞同：0
> 
> 时间：2012-12-05T16:02:09.717
> 
> 标签：oauth, openid

实施方案包括使用 OAuth 或 OpenID 通过身份验证服务器 (AS) 对用户进行身份验证的移动应用程序 (MA) 和应为移动应用程序请求数据等服务的移动应用程序服务器 (MAS)。

MA 使用 AS 对用户进行身份验证的部分对我来说很清楚。身份验证完成后，我还可以获得一些 MA 用户数据（姓名、电子邮件、令牌等）。

接下来，用户与 MA 交互，MA 向 MAS 发送数据请求。MAS 授权 MA 用户请求数据的最佳做法是什么？

我应该在 MAS 数据库中维护用户数据吗？（我想是的）我如何跟踪来自 MA 的数据请求并确保它们来自经过身份验证的 MA 用户？...关于这部分的类似问题也让我很担心。

我阅读了很多关于如何实现身份验证的文档，但我没有找到任何关于如何在我描述的场景中使用 Oauth 或 OpenID 实现授权的文档。

我将不胜感激您的回答或至少一个提示/链接，我可以在其中找到有关此方案最佳实践的更多信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T13:24:11.827

您可以使用双向 OAuth 在 MobileApp(MA) 和 Mobile App Server (MAS) 之间进行通信。一旦用户在 MA 上使用 openID 从 AS 进行身份验证，MA 就拥有该用户的唯一授权令牌。MA 现在使用两腿 OAuth 将此授权令牌发送到 MAS，并安全地获取用户数据。

我希望它非常清楚，或者让我知道您的情况是否与此不同。

# c# - 在视图中定义的模型？

> ID：13727346
> 
> 赞同：1
> 
> 时间：2012-12-05T16:02:12.727
> 
> 标签：c#, asp.net-mvc, view, model

我正在开发一个网站，该网站将在世界各地使用，并且必须在地球上的任何时间任何地方都高度负责。这就是为什么我尝试使用所有可能的技巧来最大程度地减少在必须进行小维护时重新编译/重新启动网站的需要。

Asp.Net MVC 中编辑视图并由框架自动动态重新编译而不中断服务的能力非常棒，完全符合我的需求。但是如果我不能以类似的方式编辑底层模型并且必须重新编译整个东西，它的兴趣就会受到很大的限制。

所以我的问题是：有可能以任何方式（甚至是一种糟糕的、骇人听闻的方式）在代码块中的视图本身内部定义视图模型类？

否则，我可以探索哪些路径来实现“可热编辑”网站（我的意思是：在网站仍然存在时可以重新编译哪些部分，并立即考虑更改）？

非常感谢您！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:14:37.123

如果您担心性能和正常运行时间，请考虑使用服务器场来托管您的站点。当您需要进行更新时，您可以单独关闭每台服务器，以便您的站点始终可用。

但是，大多数部署只需要几秒钟。您的应用程序可能需要或多或少的时间来启动（例如，EF 视图生成可能需要 10-20 秒），但只要您在非高峰时间进行更新就可以了。

此外，我永远不会建议在实时服务器上更改代码。你最终会破坏一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:42:36.853

最终，我设法通过另一种策略实现了目标。所有视图都具有相同的模型`DataSource`，称为全局记录集，在渲染之前打开并在渲染之后关闭（如果需要，读取由视图内的 Razor 代码执行）。

记录集的列列表可能会实时更改而不会导致站点崩溃。

对于表单和验证，从数据库中获取的有关底层存储过程的元数据会导致代码发射，从而动态创建 ac# 类型，仅此而已。尽管每次更改 sp 时都会生成一个新类型，但应用程序池回收率可以防止过多的过时类型在内存中僵尸。

# msbuild - VS2012 中的 BeforeBuild 和其他目标发生了什么？

> ID：13727351
> 
> 赞同：16
> 
> 时间：2012-12-05T16:02:25.083
> 
> 标签：msbuild, visual-studio-2012

我正在尝试获取一些预构建步骤以在 Visual Studio 2012 中的 C++ 项目中工作，但它们没有被调用（虽然我很确定在 Visual Studio 2010 中相同的技术是可以的）。命令行构建的行为完全相同。

这是项目文件的结尾；该文件是使用 Visual Studio 生成的，然后我只添加了最后几行：

```
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
<Target Name="BeforeBuild">
  <Message Text="### BeforeBuild ###" />
</Target>
<Target Name="BeforeCompile">
  <Message Text="### BeforeCompile ###" />
</Target>
<Target Name="AfterBuild">
  <Message Text="### AfterBuild ###" />
</Target> 
```

这是输出：

```
Project "d:\temp\temp.vcxproj" on node 1 (default targets).
InitializeBuildStatus:
  Creating "Debug\temp.unsuccessfulbuild" because "AlwaysCreate" was specified.
AfterBuild:
  AfterBuild
FinalizeBuildStatus:
  Deleting file "Debug\temp.unsuccessfulbuild".
  Touching "Debug\temp.lastbuildstate". 
```

所以只考虑 AfterBuild 而忽略其他。调查这一点，我在 Microsoft.BuildSteps.targets 中找到了这个 PropertyGroup：

```
<BuildDependsOn>
  _PrepareForBuild;
  $(BuildSteps);
  AfterBuild;
  FinalizeBuildStatus;
</BuildDependsOn> 
```

这不应该也有 BeforeBuild 和 BuildEvent 目标吗？还是我的 MSBuild 安装有问题导致它使用此 BuildSteps.targets 文件而不是其他文件？

**解决方案**

正如 Alexey 指出的那样，使用 Before/AfterTarget 提供了一种可用的解决方法。您只需要注意要使用哪些目标，但是通过查看 BuildSteps 文件很容易。现在这似乎工作正常：

```
<Target Name="BeforeBuild" BeforeTargets="PrepareForBuild">
  <Message Text="### BeforeBuild ###" />
</Target>
<Target Name="BeforeCompile" BeforeTargets="BuildCompile">
  <Message Text="### BeforeCompile ###" />
</Target>
<Target Name="AfterBuild" AfterTargets="Build">
  <Message Text="### AfterBuild ###" />
</Target> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-09T05:55:36.693

我有与您描述的相同的 msbuild 目标，所以我认为您的 msbuild 安装很好。

看起来他们决定对目标和依赖项进行一些清理（不确定此问题是否与 VS 版本有关，VS 仅使用相同的目标，由 msbuild 提供）。BeforeBuild 和其他目标仍然存在于 Microsoft.common.targets 中。我想它只是为 .NET 项目保留的（我从未玩过 C++ 项目，所以我不知道如何在那里构建管道）。

无论如何，无论它在以前的版本上是否有效，您的问题都可以更容易地解决 - 只需使用 MSBuild 4.0 的新属性 BeforeTargets\AfterTargets 并将您的目标直接挂在您想要的任何东西上：

```
<Import Project="$(VCTargetsPath)\Microsoft.Cpp.targets" />
<Target Name="BeforeBuild" BeforeTargets="Build">
     <Message Text="### BeforeBuild ###" Importance="high" />
</Target>
<Target Name="BeforeCompile" BeforeTargets="Compile">
    <Message Text="### BeforeCompile ###" Importance="high" />
</Target>
<Target Name="AfterBuild" AfterTargets="Build">
    <Message Text="### AfterBuild ###" Importance="high" />
</Target> 
```

# eclipse-emf - xtext - 创建一个新的 EObject

> ID：13727353
> 
> 赞同：2
> 
> 时间：2012-12-05T16:02:37.937
> 
> 标签：eclipse-emf, xtext

我想创建一个新的`EObject`，但默认情况下构造函数是受保护的。有没有办法克服这个问题并创建一个新的实例`EObject`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T18:01:49.433

EMF 使用工厂模式。请尝试`EcoreFactory.eInstance.createEObject()`。

如果要实例化实现 EObject 的其他对象，则必须为自己的 EPackage 使用相应的工厂。代码应读取应由您的具体工厂替换的位置，并且`MyPackFactory.eInstance.createObject()`必须替换为您要实例化的类型，例如`MyPackFactory``createObject()``createObjectValue()`

# c# - 进程的可用内存

> ID：13727354
> 
> 赞同：5
> 
> 时间：2012-12-05T16:02:39.840
> 
> 标签：c#, c#-4.0

我正在尝试在进程中获取可用内存，以确保我不会收到 OutOfMemoryException。我搜索了互联网，发现了几个如何*使用*但不可*用*的内存的示例。

让我提供用例...

我有一个正在执行批量插入的进程（使用 SqlBulkCopy）。我正在将 a 传递给`DataTable`该`WriteToServer`方法。我不能使用 a`DataReader`因为我必须能够在失败时重试该过程。我的第一个想法是一次选择任意数量的行插入，比如 50,000。但这是一个不知道数据的通用过程；它不知道列数，也不知道每行中的数据量。所以我想我可以在向 中添加行时监视内存`DataTable`，然后在它快`SqlBulkCopy`耗尽内存时将其发布到。

这是一种有效的方法还是有更好的方法？
如果这是一种有效的方法，我将使用什么函数来确定可用内存量？

到目前为止，这是我的代码......这`AvailableMemoryIsLow`是我无法弄清楚如何确定的。

```
// m_buffer is a read-once cache (implements IDataReader) that pulls 
// data from an external source as needed so it uses very little memory.
// My original implementation just used m_buffer as the parameter of 
// WriteToServer but now I have to add retry logic into the process.

DataTable dataTable = new DataTable(m_tableName);
foreach (DataField d in m_buffer.GetColumns())
    dataTable.Columns.Add(new DataColumn(d.FieldName, d.FieldType));

while (m_buffer.Read())
{
    DataRow row = dataTable.NewRow();
    for (int i = 0; i < m_buffer.FieldCount; i++)
        row[i] = m_buffer.GetValue(i);

    dataTable.Rows.Add(row);

    // How do I determine AvailableMemoryIsLow
    if (rowCount++ >= 50000 || AvailableMemoryIsLow)
    {
        PutDataIntoDatabase(dataTable);
        dataTable.Clear();
        rowCount = 0;
    }
}

if (dataTable.Rows.Count > 0)
    PutDataIntoDatabase(dataTable); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:07:08.120

显然，您是在 32 位机器上运行此代码，否则您不会遇到此问题。一般来说，推动程序消耗几乎所有可用的虚拟内存空间（2 GB）并不是一个合理的做法。除了永远存在的 OOM 危险之外，您正在处理的数据类型是“实时数据”，它很可能会映射到 RAM。需要几乎所有可用 RAM 的程序对该程序、操作系统和在该机器上运行的其他进程的操作非常不利。

您强制操作系统开始选择如何在进程需要的内存和为文件系统缓存保留的内存之间分配内存。这种选择最终总是迫使数据从 RAM 进入页面文件。这会大大减慢操作速度，无论是在写入时还是在进程需要它返回 RAM 时。称为“抖动”的操作系统性能问题。

只是不要这样做，在 RAM 中存储如此多的数据不会使您的程序更快。它使它*变慢*。在 32 位操作系统上消耗的 RAM 量的合理上限徘徊在 500 兆字节附近。没有必要*完全*达到这个限制，计算行数就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:32:35.910

您提到您找到了告诉您分配了多少内存的方法

```
 GC.GetTotalMemory(false); 
```

是一种这样的方法（我想你已经找到了）。

我想从 MSDN 文档中指出一件事。

> 检索当前认为分配的字节数

这是 GC.GetTotalMemory 方法文档的最顶部。我想指出上述短语中的**思想一词。**现在我知道您知道如何找到问题中提到的分配数量，但是我提出这一点是为了说明 C# 是一种托管语言。内存使用和消耗从您那里抽象出来，甚至 GC 方法也只是为了让您对进程中发生的事情有一个模糊的了解。对我来说，手动处理内存级别听起来很冒险且不可靠。

我建议您使用原始方法，但将批量大小拉回一个水平，这样无论您使用多少列，您都不太可能出现内存不足异常。想想几百，也许几千，而不是几万。即使您尝试检测到这些级别的内存问题风险，您通过较大批次获得的任何性能提升都可能超过。另一个答案中提到的性能工具将是确定批量大小应该是多少以及是否存在问题的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:05:55.170

问题是有很多不同种类的“资源”。其中任何一个都可以用“OutOfMemoryException”表现出来。

然而，您最好的选择可能是`GC.GetTotalMemory(false)`.

更好的方法是获得像 JetBrains [dotTrace](http://www.jetbrains.com/profiler/)或 RedGate [ANTS](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler)这样的工具。

恕我直言 ...

PS：

如果您正在执行 SQL 批量复制，请务必设置 EnableStreaming：

*   [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.enablestreaming.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.enablestreaming.aspx)

# javascript - 如何定期刷新svg中的Href

> ID：13727356
> 
> 赞同：2
> 
> 时间：2012-12-05T16:02:50.110
> 
> 标签：javascript, svg

我用 javascript 制作了一个 SVG 用于导航，如[http://www.carto.net/svg/navigationTools/所示](http://www.carto.net/svg/navigationTools/)

我的地图 SVG 由 2 个外部引用组成，其中一个引用必须定期刷新。

```
(use xlink:href="France.svg#france") and (use xlink:href="routs.svg#routes" id="carout" ) 
```

刷新页面后，我的缩放比例恢复为 1:1。相反，我希望我的页面刷新参考并重新加载页面并选择活动缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:03:16.657

如果我正确理解了这个问题，您似乎只是想定期刷新第二个 HREF。问题是浏览器不会重新加载它，除非 HREF 地址属性本身发生变化。因此，一种解决方案可能是将日期/时间附加到地址的末尾 - 如此 stackoverflow 答案中所述：[Refresh image with a new one at the same url](https://stackoverflow.com/questions/1077041/)。

# c# - exe文件错误HResult 0x8002000B，无效索引

> ID：13727358
> 
> 赞同：2
> 
> 时间：2012-12-05T16:03:02.010
> 
> 标签：c#, indexing, exe, hresult

> **可能重复：**
> [如何在多台计算机上运行 C# .exe 文件？](https://stackoverflow.com/questions/13675826/how-to-run-a-c-sharp-exe-file-on-many-computers)

我的可执行文件有问题。我在 C# windows 窗体中制作了从 txt 转换为 excel。然后在调试中我把exe文件放在那里。在我的 .NET 40 和 Excel 2010 的计算机上，我完全没有问题。但是当我在另一台笔记本电脑上尝试它时，它显示给我`Invalid Index HRESULT 0x8002000B`。有 office 2010 但没有 visual studio 2010 。我该如何解决？问题是因为没有 Visual Studio 安装，如果是这样，我如何使用所有库制作可执行文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:24:51.740

当其他计算机没有目标 .net 时会发生此错误。如果您发布您的应用程序并通过安装文件安装它，您可以先决条件以 .net 框架为目标。在设置之前，它会检查计算机是否有.net。如果没有它会建议安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:55:27.207

转到项目--> 属性--> 发布--> 先决条件确保目标框架是先决条件并选择一个位置并发布它。您的安装文件已准备好用于所有 Windows 计算机...+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T12:53:14.023

在互联网上研究并询问朋友后，现在我知道为什么我会遇到这个问题。我尝试了设置，但它不起作用，给我同样的错误索引无效。

问题在于 excel 选项，一些用户将 excel worksheetsnumber 设置为 3，一些设置为 1 ...默认情况下始终为 3。但如果用户将其更改为 1 并且在我的 C# 中，我不会添加新的 Worksheet 而只是 get_item ，所以它会给我一个无效索引的错误。所以我通过在我的 C 代码中删除工作簿中的所有工作表来解决它，然后添加新的工作表。

感谢你们帮助我，如果有人从 excel 转换或导出为 txt、pdf 或其他内容，请记住默认为 3 个工作表，但用户可以更改它并且您收到错误 0x8002000B :)

# mysql - 枚举类型中的 phpmyadmin 搜索什么都不返回？

> ID：13727370
> 
> 赞同：0
> 
> 时间：2012-12-05T16:03:47.610
> 
> 标签：mysql, phpmyadmin

![在此处输入图像描述](../Images/7882a9e84b53eee97e24f9c94f2e9006.png)我在我的数据库中输入了 ENUM，并想对该字段进行简单搜索。

我知道该搜索有值，我在 dropdowm 上选择它并列出我的值并询问结果

phpmyadmin 说没有结果....

为什么 ？

版本 3.5.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:42:31.423

我已经更改了表中的所有枚举类型，并再次搜索工作！我不再使用 Enum 类型了。

# vba - 后台Access主窗口隐藏时显示查询结果

> ID：13727376
> 
> 赞同：0
> 
> 时间：2012-12-05T16:04:11.200
> 
> 标签：vba, ms-access, batch-file, window

我将 Access 2007 用于我的 Access 2003 MDB 项目，并且在尝试显示查询结果时遇到了一些问题。这里没什么特别的：

```
DoCmd.OpenQuery "myQuery", acViewNormal 
```

以简单的形式，它工作得很好。但是，我使用以下代码隐藏了后台访问窗口：

```
Private Declare Function apiShellExecute Lib "shell32.dll" Alias "ShellExecuteA" (ByVal hwnd As Long, ByVal lpOperation As String, ByVal lpFile As String, ByVal lpParameters As String, ByVal lpDirectory As String, ByVal nShowCmd As Long) As Long

Global Const SW_HIDE = 0
Global Const SW_SHOWNORMAL = 1
Global Const SW_SHOWMINIMIZED = 2
Global Const SW_SHOWMAXIMIZED = 3

Function fSetAccessWindow(nCmdShow As Long)
    Dim loX As Long
    Dim loForm As Form
    On Error Resume Next
    Set loForm = Screen.ActiveForm

    If Err <> 0 Then
        loX = apiShowWindow(hWndAccessApp, nCmdShow)
        Err.Clear
    End If

    If nCmdShow = SW_SHOWMINIMIZED And loForm.Modal = True Then
        MsgBox "Cannot minimize Access with " _
        & (loForm.Caption + " ") _
        & "form on screen"
    ElseIf nCmdShow = SW_HIDE And loForm.PopUp <> True Then
        MsgBox "Cannot hide Access with " _
        & (loForm.Caption + " ") _
        & "form on screen"
    Else
        loX = apiShowWindow(hWndAccessApp, nCmdShow)
    End If
    fSetAccessWindow = (loX <> 0)
End Function 
```

我显然可以调用 fSetAccessWindow(1) 来恢复完整的界面，但我想在这里只显示查询结果而不是 Access 的完整界面。是否可以？一些用户使用批处理文件运行数据库（不确定它是否会产生任何影响）：

```
start msaccess /runtime "myFile.mdb" 
```

另外，因为我所有的表单都是模态的（必须是在没有界面或窗口不显示的情况下工作），查询结果显示在后台，没有任何方式设置焦点（用户必须关闭活动应用程序窗口这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:22:11.360

除了使用查询作为记录源来构建表单之外，似乎没有其他解决方案。

# linux - 使用 Sed 从日期中删除秒数

> ID：13727381
> 
> 赞同：1
> 
> 时间：2012-12-05T16:04:34.523
> 
> 标签：linux, replace, sed

我在一个文件中有一个 url 数据列表，如下所示：

```
 http://site.com/some/site.htm,12/5/2012 3:30:39 PM
    http://site.com/some/site.htm,12/5/2012 9:30:30 AM
    https://site.com/some/site.htm,12/5/2012 13:30:30 PM
    http://site.com/some/site.htm,12/5/2012 10:30:39 AM 
```

我希望它看起来像这样：

```
 http://site.com/some/site.htm,12/5/2012 3:30 PM
    http://site.com/some/site.htm,12/5/2012 9:30 AM
    https://site.com/some/site.htm,12/5/2012 13:30 PM
    http://site.com/some/site.htm,12/5/2012 10:30 AM 
```

基本上是使用 sed 从行中删除 :XX 秒部分。我也不介意它是否也会在几分钟后删除所有内容。我可以使用 sed 或 cut，因为我使用的是批处理文件脚本。任何人都可以帮忙吗？

到目前为止，我已经尝试了以下方法：

```
sed 's/.*:([^,*]*) AM/\1/g' file.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:11:49.420

像这样`sed -r 's/(.*):[0-9]{2}(.*)/\1\2/'`：

```
$ cat file
    http://site.com/some/site.htm,12/5/2012 3:30:39 PM
    http://site.com/some/site.htm,12/5/2012 9:30:30 AM
    https://site.com/some/site.htm,12/5/2012 13:30:30 PM
    http://site.com/some/site.htm,12/5/2012 10:30:39 AM

$ sed -r 's/(.*):[0-9]{2}(.*)/\1\2/' file
    http://site.com/some/site.htm,12/5/2012 3:30 PM
    http://site.com/some/site.htm,12/5/2012 9:30 AM
    https://site.com/some/site.htm,12/5/2012 13:30 PM
    http://site.com/some/site.htm,12/5/2012 10:30 AM 
```

解释：

```
(.*):     # Capture everything up the last : (greedy)
[0-9]{2}  # Match the two digits 
(.*)      # Capture the rest of the line

\1\2      # Replace with the two captured groups 
```

注意：`-r`使用扩展的正则表达式，可能`-E`取决于你的`sed`风格，检查 `man`.

**编辑：**

```
$ sed -r 's/[0-9]{2}:[0-9]{2} /00 /' file
    http://site.com/some/site.htm,12/5/2012 3:00 PM
    http://site.com/some/site.htm,12/5/2012 9:00 AM
    https://site.com/some/site.htm,12/5/2012 13:00 PM
    http://site.com/some/site.htm,12/5/2012 10:00 AM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:17:19.993

一个简单的解决方案，只需在冒号后跟一个空格后查找 2 位数字，然后只替换为空格。

```
sed 's/:[0-9][0-9] / /g' file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:18:35.313

一个非常简单的解决方案：

```
sed 's/:.. / /' file 
```

但这可能不推荐，因为它太通用了，如果格式发生轻微变化，可能会出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:18:46.460

另一种解决方案：

```
sed -r 's/...( [AP]M)$/\1/' file.txt 
```

匹配以空格结尾且后跟 AM 或 PM 的行，并删除其前面的任何三个字符。

行`$`尾匹配，括号保留`AM`or因此您可以在替换文本中`PM`使用 the 引用它。`\1`命令行选项允许使用扩展的`-r`正则表达式（需要`\1`参考）。

# google-analytics - _setSiteSpeedSampleRate 是否对访问、访问者或综合浏览量起作用？

> ID：13727389
> 
> 赞同：0
> 
> 时间：2012-12-05T16:05:07.410
> 
> 标签：google-analytics

从[文档](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiBasicConfiguration#_gat.GA_Tracker_._setSiteSpeedSampleRate)：

> “Analytics 将单个属性的站点速度收集命中限制为每天 1% 的访问者或 10K 命中中的较大者，以确保公平分配此功能的系统资源。”

`_gaq.push(['_setSiteSpeedSampleRate', 100]);`如果我想最大限度地收集数据，我会选择以下哪个配置文件

1.  10,000 次浏览量，5,000 次访问，3,000 次访问者 / 天
2.  20,000 次网页浏览，10,000 次访问，8,000 名访问者 / 天
3.  40,000 次浏览量，15,000 次访问，10,000 次访问者/天

相反，`xyz`在以下情况下，您将设置等于什么？

```
// Visits/Day: 725,000
// Unique Visitors/Day: 550,000
// Pageviews/Day: 6,000,000
_gaq.push(['_setSiteSpeedSampleRate', xyz]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:53:34.497

__setSiteSpeedSampleRate 与 __trackPageview 一起传递。

```
1 = 100
2 = 50
3 = 25 
```

不知道该函数是否只接受整数，但对于情况 4，您可以传递 2 而不是默认的 1。GA 将上限为 600 万页面浏览量（10k 页面浏览量）的 1.6%，因此高于 2（1.66四舍五入）当然不会有效果。

# flash - 用于图像和图标的 flex 中的 fx:object 的数据绑定

> ID：13727391
> 
> 赞同：0
> 
> 时间：2012-12-05T16:05:14.630
> 
> 标签：flash, apache-flex, flash-builder

大家好，我正在学习 flex，我有一个 flex 应用程序，它使用 fx 对象填充，数据存储在列表中的这些对象中，当我选择一个对象时，它的集合推送到下一个视图数据绑定从对象中引入隐藏数据（因为列表页面上的对象仅显示标签名称，而不显示其他属性和值）。

对于任何与文本相关的内容都可以正常工作，但我正在尝试将嵌入的图像插入到对象中，并通过下一页上的数据绑定将其拉出。

我一直在 youtube 上关注 Ibrent 教程，这些教程向我展示了迄今为止的一切。

下面是开放时间的数据绑定，但我不知道在下一个视图中为图像或图标数据绑定输入什么代码。

```
 <fx:Object openingHours=" 2300 - 0400" icon="@Embed('assets/test.png')"/> 
```

这是进行数据记录的下一个视图。

谢谢大家 :) 很好的学习资源！

```
<s:Label id="openingHours" x="205" y="185" fontSize="20" text="{data.openingHours}"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T13:49:10.573

将您的对象更改为：

> <fx:Object openingHours=" 2300 - 0400" id="hoursObj" src="@Embed('assets/test.png')"/>

并使用类似的东西显示它：

> <s:BitmapImage source="{hoursObj.src}" />

这是一个显示使用自定义渲染器的过程的链接：

[http://blog.flexexamples.com/2009/09/29/displaying-images-in-a-spark-list-control-using-a-custom-item-renderer-in-flex-4/](http://blog.flexexamples.com/2009/09/29/displaying-images-in-a-spark-list-control-using-a-custom-item-renderer-in-flex-4/)

没有看到你的其余过程我不能给你确切的答案，但这应该让你更接近。

# javascript - 如何突出显示下拉菜单中的选项？

> ID：13727397
> 
> 赞同：0
> 
> 时间：2012-12-05T16:05:32.643
> 
> 标签：javascript, jquery, html

我有一个`select`包含一些值的值。每个值加载不同的网页。

我希望始终显示为“选择页面”的默认值。

当用户单击下拉列表时，如何突出显示当前页面的选项？

通过突出显示，我的意思是要么选择它，要么改变它的背景颜色或其他东西。

HTML：

```
<select id="siteId" name="siteId" onchange=".....">
    <option value="">Select a page</option>
    <option row="1" value="68067">MAIN SITE</option>
    <option row="2" value="88616">A</option>
    <option row="3" value="88617">B</option>
</select> 
```

**编辑：**此选择是动态创建的。我只能在页面呈现后用 java-script 编辑它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:22:04.483

`option`确实支持`select`. 我只是设置了一个简单的类来突出显示它，如通过[这里](http://jsfiddle.net/EMSZg/)看到的。

你可以像这样添加一个类

```
$('current page selector').addClass('current'); 
```

您也可以使用该`css`功能手动设置它

```
$('current page selector').css('background-color', 'red'); 
```

您确实没有足够的信息让我帮助您确定如何找到当前页面。我建议有一些方法可以从`option`你可以与当前比较的值来判断`window.location`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:25:42.873

浏览器+操作系统对此的支持有很多变化。以 Chrome 为例，下拉菜单在 OS X 上似乎不接受任何样式，但在 Windows 上，背景颜色可以在样式表和内联样式属性中指定：

```
<style type='text/css'>
    .highlighted {
        background-color: yellow;
    }
</style>

<select name='whatever'>
    <option value='1'>one</option>
    <option value='2'>two</option>
    <option value='3' style='background-color: green;'>three</option>
    <option value='4' class='highlighted'>four</option>
</select> 
```

同样，这两种方法都适用于 Windows，而不适用于 OS X。

如果您想要一个适用于任何地方的解决方案，您需要构建自己的下拉控件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:32:45.747

如果您正在寻找 jQuery 解决方案`:eq()`，那么`attribute selector`这将是您寻找的最佳选择。我做了一些事情：http: **[//jsbin.com/ojexuh/1/edit](http://jsbin.com/ojexuh/1/edit)**

首先与`:eq()`

```
$('select option:eq(2)').css({"background":"green", "color":"white"}); 
```

就像`attribute selector`这个：

```
$('select option[row="1"]').css({"background":"red", "color":"yellow"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:20:17.533

为您希望成为默认选项的选项设置 selected="selected"。

```
<option row="3" value="88617" selected="selected">B</option> 
```

# iphone - Cocoa 517 错误代码/写入文件 Xcode 4.5

> ID：13727399
> 
> 赞同：2
> 
> 时间：2012-12-05T16:05:42.420
> 
> 标签：iphone, xcode, file

```
NSArray * Path=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString * documentsDirectory=[Path objectAtIndex:0];

NSString *filename=[NSString stringWithFormat:@"%@/Paragraph.txt",documentsDirectory];
NSError * error;
NSString * content=Content;
NSLog(content);

BOOL Ok=[content writeToFile:filename atomically:NO encoding:NSStringEncodingConversionAllowLossy error:&error];
if(!Ok){
    NSLog(@" Error %@,",[error localizedDescription]);     
} 
```

如您所见，我尝试使用此代码块将文件写入 iphone 模拟器文件，但它不起作用我得到“错误 517 操作无法完成”，我的文档文件在那里退出。我将 Paragraph.txt 文件放入文档中，但仍然出现相同的错误，在断点处我看到一切都很好，直到 writeToFile 函数，文件名有效，一切似乎都很好，但函数出错。如果你知道麦粒肿，请帮帮我

# .net - 在调用方法的同一行上实例化一个类是不好的做法吗？

> ID：13727404
> 
> 赞同：6
> 
> 时间：2012-12-05T16:05:55.207
> 
> 标签：.net, memory-management, garbage-collection

如果我只需要实例化一个类来调用它的单个方法然后完成它，我喜欢像这样在一行中完成它，

```
string result = new MyClass().GetResult(); 
```

而不是做类似的事情，

```
var myClass = new MyClass();
string result = myClass.GetResult(); 
```

据我了解，在内存分配和后续清理方面，同样的事情也在幕后发生。真的是这样还​​是有区别？如果是这样，一个比另一个更有效吗？

**编辑：**

像你们中的许多人建议的那样，将方法设为静态是一个很好的解决方案。我正在使用其他人创建的类，我目前无法重构或更改。那么对于这种情况，inline 实例化还是单独行实例化有什么区别呢？

**编辑：**

这个问题的答案是否因班级维护的资源数量而异（来自 Blam & BenCr 下面的评论）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:18:06.920

~~使用单线实际上应该更有效，因为运行时少了一个局部变量来跟踪垃圾收集。~~ **编辑：**不正确，请参阅下面亚当的回复。我原来的观点仍然成立，强硬，影响（如果有的话）应该可以忽略不计。

但真正的问题是：为什么 GetResult() 不是静态函数？这将完全避免整个实例化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T16:18:48.573

[我在C# 编码约定](http://msdn.microsoft.com/en-us/library/vstudio/ff926074.aspx)中看不到有关您的问题的任何内容。

我个人的偏好是你给出的后一个例子。我认为它可以提高代码的可读性。

但是，如果您实例化一个类只是为了从中获取一个值，那么重新考虑该类的设计方式可能会更好。您的 GetResult() 方法可能应该是静态的？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:16:27.747

这仅适用于类实现 IDisposable 的情况。
如果您正在寻找有效使用单一方法并完成它，那么两者都不是。
MyClass() 在超出范围之前不会被释放。

```
using (myClass = new MyClass()) 
{
    string result = myClass.GetResult();
} 
```

[using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

考虑静态方法和类

[静态类和静态类成员（C# 编程指南）](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=VS.80%29.aspx)

垃圾收集是一个广泛的话题。
您说这不是您的代码，但如果您编写包含资源的代码，这里有一些指导。

[IDisposable 接口](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

# ios - IBOutlet 在 iOS 6 中工作，但在 iOS 4.3 中为空？

> ID：13727406
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:01.110
> 
> 标签：ios, interface-builder

我的表格视图标题有一个自定义视图

```
UIView *headerTableview_;    
@property (nonatomic, retain) IBOutlet UIView *headerTableview; 
```

我已将它连接到 xib 文件。

然后在 .m 文件中，

```
@synthesize headerTableview = headerTableview_;

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
  return headerTableview_.frame.size.height;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
  return headerTableview_;
} 
```

然后，我尝试运行它，在 iOS 6 中它显示得很好，但在 iOS 4.3 中，它根本不显示。

可能是什么问题呢？任何人都知道如何解决这个奇怪的问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:29:51.153

创建一个名为 HeaderTableview 的新类文件。查看在 IB 中分配时是否正确初始化。

```
//.h
@class HeaderTableview;

@interface ViewController : UIViewController

@property (nonatomic, retain) IBOutlet HeaderTableview *headerTableview;

//.m
@synthesize headerTableview = _headerTableview;

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return _headerTableview.frame.size.height;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:32:28.270

在您的 .h 文件中

```
@interface testViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
{

UITableView *tableView;
}
@property (retain, nonatomic) IBOutlet UIView *testView;
@end 
```

在您的 .m 文件中

```
@implementation testViewController

@synthesize testView;
- (void)viewDidLoad
{
[super viewDidLoad];

tableView = [[UITableView alloc]initWithFrame:self.view.frame style:UITableViewStylePlain];
tableView.delegate = self;
tableView.dataSource =self;
[self.view addSubview:tableView];
[self.view bringSubviewToFront:tableView];
// Do any additional setup after loading the view, typically from a nib.
}
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
return testView.frame.size.height;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{
return testView;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
return 3;

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"Products";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];}
//UIImage *currentTweet = [[xmlParser tweets] objectAtIndex:1];
cell.textLabel.text= @"text label";
cell.detailTextLabel.text=@"detailTextLabel";

return cell;}
- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

- (void)dealloc {
[testView release];
[super dealloc];
}
@end 
```

![附上模拟器iOS4.3.2的o/p图片](../Images/44a2f105ba1bb0baf7b4fd7efb551654.png)

# silverlight - 如何在 Silverlight 中取消组合框选择？

> ID：13727408
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:04.223
> 
> 标签：silverlight, xaml, data-binding, mvvm

**短篇故事**

我有一个 BindingExpression 对象，我想更新绑定的目标端，就像我可以对源进行更新一样（通过调用 BindingExpression.UpdateSource）。我该怎么做？

WPF 有类似的问题，我不知道如何适应 Silverlight：[Cancel combobox selection in WPF with MVVM](https://stackoverflow.com/questions/7800032/cancel-combobox-selection-in-wpf-with-mvvm)

**很长的故事**

给定一个双向绑定，将组合框的 SelectedItem 绑定到视图模型的属性。组合框用于导航，以便通过选择用户告诉视图模型导航离开。视图模型可能有一些用户不想意外丢失的未保存更改。所以视图模型会抛出一个确认对话框，询问用户是否真的想要离开并放弃他们的更改。如果用户说不，我们想要撤消对组合框所做的选择，使其处于原始状态，就像进行导航尝试之前一样。我该怎么做？

**对于 WPF 人员** 请注意，Silverlight 中没有 UpdateTarget 方法（据我所知），所以这就是提出这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:19:19.167

如果我理解正确，当属性更改时，您应该将`SelectedItem`支持字段的先前值存储在视图模型的属性上，并且当用户决定取消确认对话框时，您应该将`SelectedItem`支持字段恢复为以前的值.

如果您为支持字段使用常规属性，则可以编写一个实现此行为的 Set 方法：

```
 private object selectedItemPreviousValue;
    private object selectedItemBackingField;
    public object SelectedItemBackingField
    {
        get
        {
            return selectedItemBackingField;
        }
        set
        {
            selectedItemPreviousValue = selectedItemBackingField;
            selectedItemBackingField = value;
        }
    } 
```

如果您使用依赖属性，则必须提供`PropertyMetada`一个`DependencyPropertyChantged`回调，如下所示：

```
public object SelectedItemBackingField
    {
        get { return (object)GetValue(SelectedItemBackingFieldProperty); }
        set { SetValue(SelectedItemBackingFieldProperty, value); }
    }

    // Using a DependencyProperty as the backing store for SelectedItemBackingField.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty SelectedItemBackingFieldProperty =
        DependencyProperty.Register("SelectedItemBackingField", typeof(object), typeof(MapApp), new PropertyMetadata(new PropertyChangedCallback(OnSelectedItemChanged));

    public static OnSelectedItemChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        MyViewModel vm = (MyViewModel)sender;
        vm.selectedItemPreviousValue = args.OldValue;
    } 
```

# vb.net - OpenFileDialog 过滤文件名

> ID：13727409
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:06.097
> 
> 标签：vb.net

我正在以所示方式打开文件对话框，但如果可能的话，我需要一些高级功能。

```
 With OpenFileDialog_Restore
        .Title = "Choose archive to open"
        .InitialDirectory = Path.GetDirectoryName(tempArch)
        .Filter = "My archives (*.7z;*.tar)|*.7z;*.tar|All Files(*.*) |*.*"
        .AddExtension = True
        .ShowDialog()
    End With 
```

在我的程序需要期间，我想只显示询问类型的文件（不是目录），但只显示名称中包含单词“archive”的文件名。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:00:47.133

只需相应地设置您的过滤器。

```
With OpenFileDialog_Restore
    .Title = "Choose archive to open"
    .InitialDirectory = Path.GetDirectoryName(tempArch)
    .Filter = "My archives (*.7z;*.tar)|*archive*.7z;*archive*.tar|All Files(*.*) |*.*"
    .AddExtension = True
    .ShowDialog()
End With 
```

# mysql - 使用引用两个外键的复合主键创建表

> ID：13727410
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:06.657
> 
> 标签：mysql, database

我正在尝试使用 MySQL 创建下表：

```
CREATE TABLE registrations (
    eventNumber CHAR(3) UNIQUE NOT NULL
        CHECK (EXISTS (SELECT eventNumber FROM events)),
    employeeNumber CHAR(5) UNIQUE NOT NULL 
        CHECK (EXISTS (SELECT employeeNumber FROM employees)),

    PRIMARY KEY(eventNumber , employeeNumber ),

    FOREIGN KEY (eventNumber) REFERENCES eventNumber (employees)
        ON UPDATE RESTRICT 
        ON DELETE RESTRICT,
    FOREIGN KEY (employeeNumber ) REFERENCES employeeNumber(employees)
        ON UPDATE RESTRICT 
        ON DELETE RESTRICT  
) ENGINE=InnoDB; 
```

但是，当我运行命令时出现无法创建表错误 (1005)。这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:29:41.793

作为参考，我把 REFERENCES 语句弄错了。

它实际上应该是：

```
REFERENCES <table name>(<attribute name>) 
```

# ios - 无法识别 iPhone 配置文件

> ID：13727412
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:24.467
> 
> 标签：ios, provisioning

我有两个分发配置文件，一个用于应用商店，另一个用于创建临时。我忘记正确命名这些配置文件，我无法区分哪个是应用商店配置文件，哪个是临时配置文件。有没有办法使用两个配置文件来找出这个问题？我无权访问开发者帐户，因此我可以从那里下载两个配置文件。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:14:31.017

是的，当您归档应用程序时，您可以在应用程序商店和企业或临时分发之间进行选择。另一个技巧是，当您选择配置文件并尝试在 iphone 上运行它时，App Store 不会安装在设备上，但临时配置文件将允许您将可执行文件放在手机上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:44:55.573

我的发现是

如果配置文件是 Ad-Hoc 分发配置文件，那么会有类似的标签

```
<key>ProvisionedDevices</key>
<array>
    <string>UDID1</string>
    <string>UDID2</string>
    <string>UDID3</string>
</array>
<key>TeamIdentifier</key> 
```

这里 UDID1、UDID2 是添加到此配置文件的设备的唯一 ID。

开发者资料也有这种“ProvisionedDevices”标签。但是 Appstore 分发配置文件在配置文件中不会有“ProvisionedDevices”标签。所以我们可以打开移动配置文件并搜索标签“ProvisionedDevices”来识别哪个是配置文件。

# ruby-on-rails - Ruby on Rails 嵌套资源未定义方法路径

> ID：13727414
> 
> 赞同：6
> 
> 时间：2012-12-05T16:06:27.657
> 
> 标签：ruby-on-rails

我在 /config/routes.rb 中定义了嵌套资源

```
 resources :goals do
    resources :goal_entries
  end 
```

目标模型：

```
class Goal < ActiveRecord::Base
  attr_accessible :code, :description, :from_date, :to_date
  validates_uniqueness_of :code
  validates_presence_of :code
  has_many :goal_entries, :primary_key => "code", :foreign_key => "goal_code"
  accepts_nested_attributes_for :goal_entries
end 
```

对于 GoalEntry ：

```
class GoalEntry < ActiveRecord::Base
  attr_accessible :code, :goal_code,
  :general_increase_percentage, :general_net_sales,
  belongs_to :goal, :primary_key => "code", :foreign_key => "goal_code"
  validates_presence_of :code
  validates_presence_of :goal_code
  validates_uniqueness_of :code , :scope => :goal_code
  #validates_numericality_of :general_net_sales 
```

为 Goal 父级创建/编辑 GoalEntry 的视图如下所示：

```
<%= form_for([@goal, @goal_entry]) do |f| %>
<% if @goal_entry.errors.any? %>
<div id="error_explanation">
    <h2><%= pluralize(@goal_entry.errors.count, "error") %>
        prohibited this goal_entry from being saved:
    </h2>
    <ul>
        <% @goal_entry.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
        <% end %>
    </ul>
</div>
<% end %>
<div class="field">
    <%= f.hidden_field :goal_code, :required => true%>
</div>
<div class="field">
    <%= f.label :code %>
    <%= f.number_field :code, :required => true %>
</div>
... 
```

目标条目控制器中的更新方法：

```
 def update
    @goal_entry = GoalEntry.find(params[:id])

    respond_to do |format|
      if @goal_entry.update_attributes(params[:goal_entry])
        format.html { redirect_to edit_goal_path(@goal_entry.goal), notice: 'Goal entry was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @goal_entry.errors, status: :unprocessable_entity }
      end
    end
  end 
```

输入有效的目标条目可以正常工作。但是，如果有验证错误消息，我会收到以下消息：

```
 **NoMethodError in Goal_entries#update**
ActionView::Template::Error (undefined method `goal_entry_path' for #<#<Class:0x007fce30a0c160>:0x00000004199570>):
    1: <%= form_for([@goal, @goal_entry]) do |f| %>
    2: <% if @goal_entry.errors.any? %>
    3: <div id="error_explanation">
    4:  <h2><%= pluralize(@goal_entry.errors.count, "error") %>
  app/views/goal_entries/_form.html.erb:1:in `_app_views_goal_entries__form_html_erb__827873423371803667_70261777948540'
  app/views/goal_entries/edit.html.erb:3:in `_app_views_goal_entries_edit_html_erb__779650500016633360_70261777920720'
  app/controllers/goal_entries_controller.rb:77:in `block (2 levels) in update'
  app/controllers/goal_entries_controller.rb:72:in `update'
    etc... 
```

`<% if @goal_entry.errors.any? %>` 如果有人对此有解决方案，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:46:32.417

您的 form_for 正在生成其路线，`[@goal, @goal_entry]`但您尚未在更新操作中定义 @goal。

尝试添加`@goal = Goal.find(params[:goal_id])`到您的更新方法。

# linux - ARM Linux下的特权模式

> ID：13727418
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:32.210
> 
> 标签：linux, assembly, arm, privileges

我正在使用 ARM Cortex-A8。有 Linux Debian 4.6.2-11 发行版。我试图通过读取 SYST_RVR 寄存器来访问 SysTick 计数器，但现在出现了分段错误。在这方面，我有一个问题，是否只能在特权模式下访问？由于 SegFault 可能意味着一个进程正在访问一个内存地址，这是禁止的。

我也关注了这个线程[How to measure program execution time in ARM Cortex-A8 processor?](https://stackoverflow.com/questions/3247373/how-to-measure-program-execution-time-in-arm-cortex-a8-processor/3250835#3250835) 并且还有“非法指令”信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:19:42.510

您是否尝试通过 0xE000E014 访问它？Cortex A 系列上没有这样的寄存器。如果您遇到非法访问/分段错误，这是有道理的。

# c# - “EndResponse”可以提高 ASP.Net 页面的性能吗

> ID：13727422
> 
> 赞同：10
> 
> 时间：2012-12-05T16:06:42.047
> 
> 标签：c#, asp.net, health-monitoring

我的员工页面中有一个`Response.Redirect`。它重定向到薪水页面。

```
Response.Redirect ("Salary.aspx"); 
```

在我添加如下异常处理之前，它工作正常。

```
try
{
   Response.Redirect ("Salary.aspx");
}
catch(Exception ex)
{
//MyLog();
    throw new Exception();
}

//Remaining code in event handler 
```

这导致了一个新的异常，说“线程被中止”。我开始知道可以通过将`endResponse`重定向设置为 false 来避免这种情况。

```
Response.Redirect(url, false);
Context.ApplicationInstance.CompleteRequest(); 
```

新异常的解释：它总是抛出异常但由框架处理。因为我添加了一个 try..catch 它被捕获在那里（我抛出一个新的异常）

注意：`CompleteRequest`会绕过更多的 HTTP 过滤器和模块，但不会绕过当前页面生命周期中的更多事件

注意： Response.Redirect 抛出此异常以结束当前页面的处理。ASP .Net 本身处理此异常并调用`ResetAbort`以继续处理。

**问题**

1.  由于不抛出异常，“将 endResponse 设置为 false”是否可以**提高性能？**
2.  由于页面生命周期事件未终止，“将 endResponse 设置为 false”是否会**降低性能？**

**陷阱**

1.  如果将 endResponse 设置为`false`，则将执行事件处理程序中的剩余代码。所以我们需要`if`检查剩余的代码（检查：是否不满足重定向条件）。

**参考**

1.  [为什么 Response.Redirect 会导致 System.Threading.ThreadAbortException？](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception)
2.  [ASP.NET 异常“线程被中止”导致方法退出](https://stackoverflow.com/questions/1014439/asp-net-exception-thread-was-being-aborted-causes-method-to-exit)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T16:26:00.817

结束响应（`Response.Redirect(url)`或`Response.Redirect(url, true)`）**不会**有比 更好的性能`Response.Redirect(url, false)`。使用`false`，由于您可以控制代码执行，因此在您要重定向用户的情况下，您可以简单地不再执行任何代码。

这是在[MSDN 条目](http://msdn.microsoft.com/en-us/library/a8wa7sdt%28v=vs.100%29.aspx)中指定的`Response.Redirect()`：

> 如果为 endResponse 参数指定 true，则此方法会为原始请求调用 End 方法，该方法在完成时会引发 ThreadAbortException 异常。**此异常对 Web 应用程序性能有不利影响**，这就是为什么建议为 endResponse 参数传递 false 的原因。

正如您所指出的，您确实需要关注页面生命周期事件。如果要重定向用户（**不仅是为了性能**），则不应继续执行页面事件。我最近写了一个简短的例子，展示了如果你不这样做，糟糕的编码/计划[会发生什么。](http://www.mikesmithdev.com/blog/how-is-response-redirect-impacting-my-site/)

该帖子的底线是`Response.Redirect()`向浏览器返回 302。由于页面执行继续，因此您使用时可能会出现问题`Response.Redirect(url, false)`，并且用户可以选择忽略 302，而是查看将要呈现的页面*......*因此您需要采取措施确保他们不会看到你不想让他们看到的任何东西。Firefox的[NoRedirect](https://addons.mozilla.org/en-us/firefox/addon/noredirect/)插件在测试时很有帮助。

**`"false"`为了获得**最佳性能：**用作`endResponse`参数，确保您没有运行任何进一步的代码，并确保页面不会呈现任何您不希望用户看到的信息（如果他们忽略了 302）。**

# c# - 我的计时器经过的方法在哪个线程上被调用？

> ID：13727425
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:46.687
> 
> 标签：c#, .net, multithreading

可以说我有一个处理`Timer`了`Elapsed`事件的事件。方法代码在哪个线程上执行？

是创建计时器的线程吗？如果是这样，这意味着如果我希望它在另一个线程上，我必须确保在线程主循环中创建计时器，而不是在线程的初始化中创建 - 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:08:39.753

该线程是线程池中的一个。无法确定哪个线程将与 elapsed 方法相关联。

详细信息：http: [//msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.elapsed.aspx)

（从设计的角度来看，这应该没关系）

编辑：实际上有一种方法可以定义使用哪个线程；您可以使用计时器的 SynchronizingObject 属性：

> 当 SynchronizingObject 为 null 时，将在系统线程池中的线程上调用处理 Elapsed 事件的方法。有关系统线程池的更多信息，请参阅 ThreadPool。
> 
> 当 Elapsed 事件由可视化 Windows 窗体组件（例如按钮）处理时，通过系统线程池访问组件可能会导致异常或可能无法正常工作。通过将 SynchronizingObject 设置为 Windows 窗体组件来避免这种影响，这会导致在创建该组件的同一线程上调用处理 Elapsed 事件的方法。

请参阅：http: [//msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)

# objective-c - 我如何关闭 NSWindowController 的实例

> ID：13727426
> 
> 赞同：0
> 
> 时间：2012-12-05T16:06:47.493
> 
> 标签：objective-c, cocoa, nswindow, nswindowcontroller

我正在学习一些 obj-c，因此我正在构建一个小型可可应用程序。

从 MainMenu.xib 我在顶部的“主菜单”中添加了一个菜单。单击时，这会触发一个 IBAction，它会打开一个窗口实例，在本例中是一个用于管理类别的窗口。

这个分类窗口有一个 NSWindowController，看起来像这样：

```
//  CategoriesWindow.h
#import <Cocoa/Cocoa.h>
@interface CategoriesWindow : NSWindowController
-(IBAction)OpenCategoriesWindow:(id)sender;
@end

//  CategoriesWindow.m
#import "CategoriesWindow.h"

@implementation CategoriesWindow

-(IBAction)OpenCategoriesWindow:(id)sender
{
    CategoriesWindow *Categories = [[CategoriesWindow alloc] initWithWindowNibName:@"CategoriesWindow"];
    [Categories showWindow:self];
}
@end 
```

为此，我有一个带有 NSTableView 的 CategoriesWindow.xib，它可以做一些事情，所以我有一个 CategoryTableController.h 和 .m 来处理这个表的数据。当我点击一个按钮时，我希望它做很多事情，然后我希望窗口自行关闭。也就是说，我希望此窗口从 CategoryTableController.m 中的 IBAction 自行关闭。

我该怎么做呢？这个设置的一个坏事（从某处的教程中得到......）是我可以通过单击菜单按钮打开这个窗口的许多实例。

任何提示或想法从哪里开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:29:28.470

从那里[参考](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindowController/close)：

```
[Categories close]; 
```

但是，当您从类的实例方法创建类的实例时，您的实现有问题。这对我来说不合适。此外，您不会在任何地方保留新实例，因此它可能会在 ARC 下被销毁或在 MRR 下泄露。

我想你可能想要：

```
-(IBAction)OpenCategoriesWindow:(id)sender
{
    [self showWindow:sender];
}

-(IBAction)CloseCategoriesWindow:(id)sender
{
    [self close];
} 
```

虽然我不能确定。

# mysql - jdbc mysql 负载均衡

> ID：13727434
> 
> 赞同：1
> 
> 时间：2012-12-05T16:07:01.190
> 
> 标签：mysql, jdbc

我正在尝试通过包装在 dbcp 的 basicDatasource 中的 jdbc mysql 驱动程序连接到 mysql 集群。

这是我的 bean 配置：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">  
      <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
      <property name="url" value="jdbc:mysql:loadbalance://slave1:3306,slave2:3306/mobile_detection"/>
      <property name="username" value="username"/>
      <property name="password" value=""/>
      <property name="initialSize" value="10" />
      <property name="maxActive" value="100" />
      <property name="maxIdle" value="50" />
      <property name="minIdle" value="10" />
    </bean> 
```

在我的 mysql 日志文件中，我看到两台服务器在服务器启动时都收到了连接请求，但只有第一个 slave1 接收到了 READ 查询。slave2 仅在 slave1 关闭时用作故障转移。

我错过了一些让负载平衡选项正常工作的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:39:16.503

There are multiple things you need to watch for apparently.

First you need to make sure you never specify loadbalance policy, not sure where this comes from, but it doesn't work otherwise.

Second, DBCP by default starts with only one connection and creates the others on extreme demand. What this means is that you will have only one connection associated with only one MySQL host being reused all the time (especially if your transactions are small) and all the traffic is focused there. You can beat this by specifying a larger initial pool size - this will create multiple connections to each server. I personally load balance across 3 servers and use a fixed pool of 36 connections. Only then DBCP will try to take connections associated with different MySQL hosts somewhat fairly. If you only specify 3 connections there is a chance the connections will be load balanced to a single host and you still end up with unfair distribution. My guess is if they fix the roundRobin policy this will work just fine, but for now it doesn't work for me.

Keep in mind that DBCP load balances the connections in the pool and they live for very long time (or forever). Whatever assignment you get initially it will stay this way. Pools are not a good idea for dynamic load balancing. The JMX bean that MySql J Connection eposes to add new MySQL hosts without restarting will not work very well.

# sql - SQL在其他列的状态定义的范围内查找列的最大值

> ID：13727435
> 
> 赞同：1
> 
> 时间：2012-12-05T16:07:00.593
> 
> 标签：sql, historian, wonderware

在下面的数据中，Event1 代表一个制造周期的结束。Event2 发生在一定百分比的周期内。我想知道是否可以在该周期内拉出循环时间结束（当 Event1 返回 0 时）和 Event2 的最大值（0 或 1）。这两个值都是二进制的。

```
 DateTime          Event1        Event2
    12/5/2012 07:00      1             0
    12/5/2012 07:01      0             0
    12/5/2012 07:45      1             0
    12/5/2012 07:46      0             0
    12/5/2012 07:50      0             1
    12/5/2012 07:54      0             0
    12/5/2012 08:30      1             0
    12/5/2012 08:31      0             0

    DateTime          max(Event2)
    12/5/2012 07:46      0
    12/5/2012 08:31      1 
```

我正在使用 WonderWare 历史数据库，因此查询中有一些独特的选项。以下是我用来查找循环时间结束的方法。

```
SELECT * FROM OPENQUERY(INSQL, "SELECT DateTime
FROM WideHistory
WHERE wwRetrievalMode = 'Delta'
AND Event1 = 1
AND wwEdgeDetection = 'TRAILING'
AND wwVersion = 'Latest'
AND DateTime >= '20121205 07:00'
AND DateTime <= '20121205 09:00'") 
```

有没有办法使用此查询的结果来生成附加查询的 DateTime 限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:34:47.950

在标准 SQL 数据库中，我会在*结束*时（当 event1 发生时）而不是在期间的开始来描述周期。数据包含结尾，但不包含开头。

```
select EndOfCycleDateTime, count(*) as NumEvents,
       max(Event2) as maxEvent2
from (select t.*,
             (select min(datetime) from t t2 where t2.datetime >= t.datetime and t2.event1 = 1
             ) as EndOfCycleDateTime
      from t
     ) t
group by EndOfCycleDateTime 
```

这是使用子查询来查找下一次 event1 为 1 的时间。对于循环中的所有内容，这应该是相同的值。外部查询仅按此值分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T18:20:44.727

Wonderware 默认使用 SQL server 标准版（加上一些花哨的额外内容），因此您应该能够使用 T-SQL 来获得您想要的东西。

[http://wonderwarenorth.com.s138768.gridserver.com/support/TechTip_1004_WonderwareHistorian&DifferentRetrievalMethods.pdf](http://wonderwarenorth.com.s138768.gridserver.com/support/TechTip_1004_WonderwareHistorian&DifferentRetrievalMethods.pdf)

# sql - 如何在 SQL MERGE 语句中使用 GROUP BY 子句？

> ID：13727437
> 
> 赞同：4
> 
> 时间：2012-12-05T16:07:10.737
> 
> 标签：sql, tsql, merge, group-by

我正在尝试合并两个表，我想使用 GROUP BY 来修复以下错误：

`The MERGE statement attempted to UPDATE or DELETE the same row more than once. This happens when a target row matches more than one source row. A MERGE statement cannot UPDATE/DELETE the same row of the target table multiple times. Refine the ON clause to ensure a target row matches at most one source row, or use the GROUP BY clause to group the source rows.`

GROUP BY 子句究竟会去哪里？

```
MERGE dbo.MyTarget targ
USING dbo.MySource src
ON (targ.Identifier = src.Identifier
    AND targ.Name = src.ConstituentName
    AND targ.Ticker = src.ConstituentTicker
    AND (targ.CUSIP = src.CUSIP OR targ.ISIN = src.ISIN OR targ.SEDOL = src.SEDOL))
WHEN MATCHED THEN
-- update values
; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:11:11.370

像这样的东西：

```
MERGE dbo.MyTarget targ
USING (SELECT ... FROM dbo.MySource GROUP BY .....) src
ON (targ.Identifier = src.Identifier
    AND targ.Name = src.ConstituentName
    AND targ.Ticker = src.ConstituentTicker
    AND (targ.CUSIP = src.CUSIP OR targ.ISIN = src.ISIN OR targ.SEDOL = src.SEDOL))
WHEN MATCHED THEN
-- update values
; 
```

# android - 谷歌地图 v2 未显示

> ID：13727439
> 
> 赞同：12
> 
> 时间：2012-12-05T16:07:25.917
> 
> 标签：android, google-maps-android-api-2

我一直在尝试运行新的[Google maps V2 API的示例项目](https://developers.google.com/maps/documentation/android/intro#sample_code)

并显示一个**空白屏幕**。![在此处输入图像描述](../Images/2e325cc5c9485b6f52db08fe164d91b2.png)

问题是为什么它**没有**在 2.2 设备上显示地图，在堆栈跟踪上我看到以下消息：

```
 12-06 09:40:36.039: W/dalvikvm(14657): Unable to resolve superclass of Lmaps/a/du; (411)
  12-06 09:40:36.039: W/dalvikvm(14657): Link of class 'Lmaps/a/du;' failed
  12-06 09:40:36.039: W/dalvikvm(14657): Unable to resolve superclass of Lmaps/a/ej; (2363)
  12-06 09:40:36.039: W/dalvikvm(14657): Link of class 'Lmaps/a/ej;' failed
  12-06 09:40:36.039: W/dalvikvm(14657): Unable to resolve superclass of Lmaps/j/k; (2379)
  12-06 09:40:36.039: W/dalvikvm(14657): Link of class 'Lmaps/j/k;' failed
  12-06 09:40:36.039: E/dalvikvm(14657): Could not find class 'maps.j.k', referenced from method maps.y.ae.a
  12-06 09:40:36.039: W/dalvikvm(14657): VFY: unable to resolve new-instance 3571 (Lmaps/j/k;) in Lmaps/y/ae;
  12-06 09:40:36.039: D/dalvikvm(14657): VFY: replacing opcode 0x22 at 0x007d
  12-06 09:40:36.125: D/dalvikvm(14657): VFY: dead code 0x007f-008f in Lmaps/y/ae;.a (Landroid/view/LayoutInflater;Lcom/google/android/gms/maps/GoogleMapOptions;Z)Lmaps/y/ae;
  12-06 09:40:36.192: I/dalvikvm(14657): Could not find method java.io.IOException.<init>, referenced from method maps.bg.e.a
  12-06 09:40:36.195: W/dalvikvm(14657): VFY: unable to resolve direct method 14965: Ljava/io/IOException;.<init> (Ljava/lang/String;Ljava/lang/Throwable;)V
  12-06 09:40:36.195: D/dalvikvm(14657): VFY: replacing opcode 0x70 at 0x0087
  12-06 09:40:36.195: D/dalvikvm(14657): VFY: dead code 0x008a-008c in Lmaps/bg/e;.a ([B)Ljava/util/Hashtable;
  12-06 09:40:36.555: D/dalvikvm(14657): GC_FOR_MALLOC freed 4020 objects / 327288 bytes in 61ms
  12-06 09:40:36.707: E/Google Maps Android API(14657): Google Maps application is missing. 
```

**编辑：**好吧，我们似乎还不能在模拟器上运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T22:10:12.110

logcat 看到以下消息：

```
12-06 09:40:36.707: E/Google Maps Android API(14657): Google Maps application is missing. 
```

所以安装**[谷歌地图](https://play.google.com/store/apps/details?id=com.google.android.apps.maps&hl=en)****解决**了这个问题。

此外，谷歌地图的安装似乎在某些国家被**阻止**，如果没有安装谷歌地图，在 2.2 上运行应用程序根本无法工作。

从评论中，用户发布了一个代码来检查以下问题中是否安装了谷歌地图：

[Google Maps Android API V2 检查设备上是否安装了 GoogleMaps](https://stackoverflow.com/questions/13778965/google-maps-android-api-v2-check-if-googlemaps-are-installed-on-device)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T18:08:05.867

我尚未对此进行测试，但我假设您需要设备上的 google play 服务，请检查您设备上的以下内容：

![播放服务应用](../Images/206a8345b8ccc50078cde3daf08d88fa.png)

如果缺少这个，我感觉新的 GMS 将无法工作，因为您的模拟器没有谷歌地图或谷歌播放服务，这将停止工作，因为它找不到包。

从外观上看，GMS 在真实设备上静默失败，而不是像模拟器那样崩溃。

在您的设备上手动安装[Google Play 服务](https://play.google.com/store/apps/details?id=com.google.android.gms&hl=en)，然后重试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T11:46:35.167

我有类似的问题。安装（然后卸载）谷歌地图后，一切都安定下来了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-03T14:37:52.423

确保包括对以下内容的调用：

```
GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo 
```

在你的应用程序的某个地方（即关于部分）。在我使用它之前，我遇到了同样的问题。

（我知道这篇文章已经发布了一个月，用户可能已经继续开发，但是其他人可能会像我一样从这些信息中受益）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-11T13:46:56.747

我在使用 android 2.3.7 设备时遇到了同样的问题，网上的答案都没有为我指明正确的方向。在狂野的头发上，我强制退出播放服务并重新启动我的应用程序并开始渲染地图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-18T18:37:01.247

模拟器的一个很好的解决方案是 Genymotion！
登录@ [http://www.genymotion.com](http://www.genymotion.com)
后下载它 安装它和虚拟框
在eclipse 中的“安装新软件”中搜索 [http://plugins.genymotion.com/eclipse](http://plugins.genymotion.com/eclipse)。
用它打开一个模拟器，用“google apps”创建一个虚拟设备，在上面安装播放服务，就是这样，当你编译你的应用程序时，你可以选择genymotion emulate device..
这需要很多内存，但是真的比 AVD 好用 ;-)

# php - 在分配给 PHP 回显的 innerHTML 之前转义字符串

> ID：13727441
> 
> 赞同：1
> 
> 时间：2012-12-05T16:07:36.367
> 
> 标签：php, javascript, html

我遇到了一个涉及转义字符的问题，我认为这根本不简单。如果这是在 javascript 中完成的，没什么可说的，但上下文是使用 echo 命令（在 PHP 中）来编写这样的 javascript 代码：

```
echo "<script>document.getElementById('spanID').innerHTML=\"$x\"</script>"; 
```

$x 是 PHP 环境中的变量，可以包含单引号和双引号。我在这里做的是： 1\. 保持 $x 不变，如果 $x 包含任何双引号，上面的代码将不起作用，回显的文本可能如下所示：

```
<script>document.getElementById('spanID').innerHTML="leftside"rightside"</script>; 
```

我以为 $x = leftside"rightside，你可以看到它肯定行不通。

1.  转义 $x 中的双引号（将所有 " 更改为

    ```
    "
    ```

    )，那么回显的文本可能如下所示：

    document.getElementById('spanID').innerHTML="leftside

    ```
    "
    ```

    右边”;

这

```
"
```

当它分配给 Span 的 innerHTML 属性时不会转换为“（例如），所以不是我想要的，我的 SPAN 的 innerHTML 应该是左侧”右侧，它将是左侧

```
"
```

右边。

如果我在原始回声中将“更改为”，如下所示：

```
echo "<script>document.getElementById('spanID').innerHTML='$x'</script>"; 
```

相同，因为这里的 $x 可以同时包含单引号和双引号。

在这种情况下，我没有找到任何其他方法来逃避引号。你能帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:12:04.943

您需要在引号之间放置一个字符串，该字符串是包含有效（且安全）HTML 的有效 JavaScript 字符串。

您最好的选择是不使用`innerHTML`，而是使用`document.createTextNode`，这意味着您只需要对内容进行斜线转义。

否则，您需要 HTML 转义，然后斜杠转义内容。为了正确起见，您的斜杠转义函数应至少转义双引号、反斜杠和所有 JavaScript 换行符（U+A、U+D、U+2028、U+2029）。我相信 PHP`addslashes`默认不处理 U+2028 或 U+2029 但是[如何从 PHP 中转义字符串以获取 javascript？](https://stackoverflow.com/questions/7085648/how-to-escape-string-from-php-for-javascript)有一些选择。

把它们放在一起：

```
$x_escaped = json_encode($x, JSON_HEX_TAG);

echo "<script>document.getElementById('spanID').appendChild(document.createTextNode($x_escaped))</script>" 
```

应该这样做。JSON_HEX_TAG 确保`$x_escaped`不会包含`</script>`或任何其他过早结束脚本标记的内容。 `</script>`反而会变成`\u003c/script\u003e`.

# android - 使用本地 json 的 Android 自动完成文本视图填充

> ID：13727444
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:07:46.370
> 
> 标签：android, json, autocompletetextview, populate

如何使用本地 JSON（存在于原始文件夹中）文件来​​填充自动完成文本视图？我是 android 新手，正在构建一个小型应用程序。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:14:08.620

实际上有这方面的文档信息，它被称为：[AutoCompleteTextView](http://developer.android.com/reference/android/widget/AutoCompleteTextView.html)

像这样使用：

```
 public class CountriesActivity extends Activity {
     protected void onCreate(Bundle icicle) {
         super.onCreate(icicle);
         setContentView(R.layout.countries);

         ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                 android.R.layout.simple_dropdown_item_1line, COUNTRIES);
         AutoCompleteTextView textView = (AutoCompleteTextView)
                 findViewById(R.id.countries_list);
         textView.setAdapter(adapter);
     }

     private static final String[] COUNTRIES = new String[] {
         "Belgium", "France", "Italy", "Germany", "Spain"
     };
} 
```

然后，您需要将 JSON 解析为字符串 []...这里有几个很好的 JSON 解析教程：

简单的：

*   [http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)

好的：

*   [http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)
*   [http://www.vogella.com/articles/AndroidJSON/article.html](http://www.vogella.com/articles/AndroidJSON/article.html)

# performance - 测量定制的 dojo 小部件性能

> ID：13727445
> 
> 赞同：0
> 
> 时间：2012-12-05T16:07:48.303
> 
> 标签：performance, testing, dojo, widget, customization

在我们的应用程序中，我们定制了 dojo 小部件，我们希望根据小部件加载时间和在小部件中加载大型数据集的时间来计算性能。

谁能告诉我，市场上是否有任何可用的工具来衡量小部件的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:45:43.640

我会使用 dojo 单元测试框架 DOH。特别是[本](http://dojotoolkit.org/reference-guide/1.8/util/doh.html#performance-tests)节。您可能还会发现像[selenium这样的测试工具](http://seleniumhq.org/) [很有用，尽管出于](http://www.softwareishard.com/blog/firebug/automate-page-load-performance-testing-with-firebug-and-selenium/)[这个](http://selenium-grid.seleniumhq.org/faq.html#would_you_recommend_using_selenium_grid_for_performanceload_testing)原因我不推荐它。

# python - 如何检查 PyQt 窗口是否存在

> ID：13727448
> 
> 赞同：2
> 
> 时间：2012-12-05T16:07:57.233
> 
> 标签：python, pyqt4

我有一个正在使用 PyQt4 开发的应用程序。

此应用程序将弹出一个有关应用程序中特定事件的窗口。

我想知道弹出的弹出窗口是否存在于我想在同一个窗口上显示消息的下一个事件中，而不是创建另一个窗口。

例如，您可以考虑一个消息传递应用程序。当我们收到消息时，窗口会弹出。如果我们再次收到来自同一用户的消息，则消息将附加到该窗口本身。

我的情况也是一样的。

任何人对此有任何想法...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:48:30.457

您所要做的就是保留对弹出窗口的引用，然后根据需要重置文本。

这是一个简单的演示：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.button = QtGui.QPushButton('ShowTime!', self)
        self.button.clicked.connect(self.handleButton)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.button)
        self._dialog = None

    def handleButton(self):
        if self._dialog is None:
            self._dialog = QtGui.QMessageBox(self)
            self._dialog.setWindowTitle('Messages')
            self._dialog.setModal(False)
            pos = self.pos()
            pos.setX(pos.x() + self.width() + 10)
            self._dialog.move(pos)
        self._dialog.setText(
            'The time is: %s' % QtCore.QTime.currentTime().toString())
        self._dialog.show()

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# c# - 传递给 Web 服务请求时，DateTime 字段不会转换为 UTC 格式

> ID：13727450
> 
> 赞同：3
> 
> 时间：2012-12-05T16:08:09.340
> 
> 标签：c#, .net, wcf, datetime, serialization

我正在使用提供的 wsdl 与 Web 服务集成（我无法控制此 Web 服务）。在调用方法时，我需要在请求中传递 DateTime。请求需要包含 UTC 格式的日期时间（最后是 Z）。该请求包含以下字段，

```
[System.Xml.Serialization.XmlElementAttribute(DataType="date", Order=0)]
public System.DateTime date
{
   get
    {
       return this.dateField;
     }
    set
    {
    this.dateField = value;
  } 
```

请注意 xsd 数据类型是日期。

我构造了`DateTime`作为 Utc 传递的请求，

```
request.date = DateTime.SpecifyKind(DateTime.Parse(DateTime.Now.ToUniversalTime().ToString("yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'Z'")), DateTimeKind.Utc); 
```

我遇到的问题是即使我`DateTime`作为 Utc 传递，soap 请求出现时没有时区。例如，请求生成如下所示，

```
 <GetRequest xmlns=" http://soa.company.com/services/example/v2"> 
              <date>2001-01-01</date> 
           </GetRequest> 
```

我的期望是得到，

```
 <GetRequest xmlns=" http://soa.company.com/services/example/v2"> 
              <date>2001-01-01Z</date> 
           </GetRequest> 
```

我认为这是由于日期时间序列化期间的往返。有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T10:14:48.537

您可以做的最简单的事情是达成协议，每个人都必须始终`DateTime`以 UTC 身份通过。这样，您可以减少处理时间（序列化时区）和数据大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T17:16:17.023

好的，终于解决了这个问题。Link [Force XmlSerializer to serialize DateTime as 'YYYY-MM-DD hh:mm:ss'](https://stackoverflow.com/questions/3534525/force-xmlserializer-to-serialize-datetime-as-yyyy-mm-dd-hhmmss)非常有用。我添加了一个类似于上面链接中描述的字符串属性，这似乎已经解决了这个问题。

```
/// <remarks/>
[System.Xml.Serialization.XmlIgnore]
public System.DateTime date
{
    get
    {
        return this.dateField;
    }
    set
    {
        this.dateField = value;
    }
}

/// <remarks/>

[System.Xml.Serialization.XmlElementAttribute("date", Order = 0)]
public System.String somedate
{
    get { return this.date.ToString("yyyy'-'MM'-'dd'Z'"); }
    set { this.date = System.DateTime.Parse(value); }

} 
```

但是，修改生成的代理绝对不是首选方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-24T21:23:45.043

从另一个处理单独问题的 stackoverflow 链接，您可能需要考虑以下代码来设置您的 datetime 结构：

[C# DateTime 到 UTC 时间而不更改时间](https://stackoverflow.com/questions/6208676/c-sharp-datetime-to-utc-time-without-changing-the-time)

other 根据 datetime 指定的时间被视为 UTC 时间，并在 Web 服务的末尾使用“Z”进行序列化。我遇到了同样的问题，但不是尝试修复序列化代码，对我来说根本问题似乎是 datetime 成员没有被视为 UTC 时间。

# iis - 在构建 Web 部署包时，“redirection.config”的这个模糊错误是什么？

> ID：13727454
> 
> 赞同：21
> 
> 时间：2012-12-05T16:08:23.003
> 
> 标签：iis, msdeploy, webdeploy

我正在尝试在新机器上通过 msbuild 构建 Web Deploy 包，但它不工作。它在其他机器上构建良好，但在这里我得到以下模糊错误：

```
...\Microsoft.Web.Publishing.targets(2767,5): error : Filename: redirection.config
...\Microsoft.Web.Publishing.targets(2767,5): error : Error: Cannot read configuration file
...\Microsoft.Web.Publishing.targets(2767,5): error : 
...\Microsoft.Web.Publishing.targets(2767,5): error : Unknown error (0x80005000) 
```

我不确定“redirection.config”是什么，对 .targets 文件的行引用根本没有帮助。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-05T16:08:23.003

*redirection.config*是一个位于 IIS 配置目录中的文件，通常是`%SystemRoot%\System32\inetsrv\config`. 这里有两种可能性：

1.  构建项目的帐户无权访问 IIS 配置目录。如果您拥有具有特殊权限的自动生成标识，或者您需要以管理员身份启动 Visual Studio，则可能会发生这种情况。
2.  您根本没有在新机器上安装 IIS。检查以确保 IIS 配置目录，尤其是*redirection.config*，甚至存在。如果没有，您需要[安装 IIS](http://technet.microsoft.com/en-us/library/cc725762.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T18:35:20.020

如果在使用 Release Management（通过 IISConfig.exe）进行部署时收到此错误，请确保部署代理服务帐户位于本地管理员组中。您可能需要重新启动部署代理服务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T12:10:51.247

下面解决了类似的问题 - 可能会有所帮助

[MSDeploy 和 TFS Build 2010 的权限不足问题](http://weblogs.asp.net/jdanforth/archive/2010/04/29/insufficient-permissions-problems-with-msdeploy-and-tfs-build-2010.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-18T09:58:57.693

对我来说，只需以管理员身份运行 Visual Studio，就可以获得针对此文件夹进行操作所需的提升权限。

可以为他人工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-10-23T04:10:27.553

当我尝试使用相对路径进行`contentPath`设置时出现此错误。我通过将 contentPath 设置为文件夹的完整路径来修复它。如果没有完整路径，[contentPath 提供程序](http://technet.microsoft.com/en-us/library/dd569034(v=ws.10).aspx)会认为它是站点路径或应用程序路径，并在 IIS 配置中查找它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-21T19:08:09.870

当我的 C# 项目引用`Microsoft.Web.Administration, Version=7.9.0.0`程序集时，我才出现此错误。看起来这个程序集只适用于 IIS Express。对于 IIS，我们必须使用`Microsoft.Web.Administration, Version=7.0.0.0`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-30T14:22:10.077

经过数小时的测试和故障排除后，这个问题原来是用户配置文件的问题。

这是通过以我自己的身份登录发现的，我没有收到同样的问题。

> 要解决此问题：
> 
> 1.  以管理员身份登录机器并从 C:\Users 中删除损坏的配置文件的内容（或将文件夹重命名为 username.OLD）
> 2.  打开注册表并在此处导航 - HKLM\SOFTWARE\Microsoft\Windows NT\ CurrentVersion\ProfileList
> 3.  找到损坏的配置文件并将其重命名为 .OLD 或将其删除。

您可以在[本文](http://itmanagerstoolbox.com/visual-studio-web-project-error-creation-of-the-virtual-directory-failed-with-the-error-filename-redirection-config-error-cannot-read-configuration-file/)中阅读更多相关信息。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-11-26T20:56:13.773

在服务器 2012 上，此错误可能是由需要通过注册表禁用的 UAC 引起的。

这篇文章解释了为什么...... [https://social.technet.microsoft.com/wiki/contents/articles/13953.windows-server-2012-deactivating-uac.aspx](https://social.technet.microsoft.com/wiki/contents/articles/13953.windows-server-2012-deactivating-uac.aspx)

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\policies\system

将 DWORD "EnableLUA" 从 1 更改为 0

# python - 如何旋转一组 pygame 对象（矩形或图像）

> ID：13727462
> 
> 赞同：4
> 
> 时间：2012-12-05T16:08:48.120
> 
> 标签：python, pygame

一张图片胜过一千个字，所以最终，我的问题是“我怎样才能做到这一点？”：

![在此处输入图像描述](../Images/9adf22f3bc068716826b73aa61f95c38.png)

直观地说，我认为这可以通过在由 定义的主显示对象内定义一个表面，在该表面上`pygame.display.set_mode`绘制（或 blitting）任何需要的东西，然后用 旋转它来实现`pygame.transform.rotate`。我假设静态点可以直接绘制到`screen`下面代码中的对象，也就是函数返回的对象`pygame.display.set_mode`。

因此，我起草了以下测试代码，但没有看到任何轮换。我究竟做错了什么？

```
#!/usr/bin/env python

import pygame as pg
from pygame.locals import *

SIZE = (800, 600)
BGCOL = (128, 128, 128)
STIMCOL = (80, 255, 80)

screen = pg.display.set_mode((SIZE), HWSURFACE | DOUBLEBUF)
screen.fill(BGCOL)

surf = pg.Surface((200, 200), flags=HWSURFACE)
surf.fill(BGCOL)

pg.draw.rect(surf, STIMCOL, (10, 20, 40, 50))
pg.draw.rect(surf, STIMCOL,  (60, 70, 80, 90))

screen.blit(surf, (100, 100))

pg.display.flip()

running = True
while running:
    pg.transform.rotate(surf, -1)
    pg.display.flip() 
```

当然，如果有更好的方法可以做到这一点，我会全力以赴。也许精灵组是一个好方法？（虽然我以前从未使用过它们... =/）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:34:55.167

您在代码中有一些错误：

pygame.transform.rotate(surface,angle) 返回一个旋转的表面

并且您不会在 while 循环中对表面进行 blitting。所以你的代码应该是这样的：

```
import pygame as pg
from pygame.locals import *

SIZE = (800, 600)
BGCOL = (128, 128, 128)
STIMCOL = (80, 255, 80)

screen = pg.display.set_mode((SIZE), HWSURFACE | DOUBLEBUF)
screen.fill(BGCOL)

surf = pg.Surface((200, 200), flags=HWSURFACE)
surf.fill(BGCOL)

pg.draw.rect(surf, STIMCOL, (10, 20, 40, 50))
pg.draw.rect(surf, STIMCOL,  (60, 70, 80, 90))

screen.blit(surf, (100, 100))

pg.display.flip()

running = True
while running:
    surf = pg.transform.rotate(surf, -1) # updating rotation on the surface
    screen.blit(surf, (100, 100)) #bliting the resulting image every frame
    pg.display.flip() 
```

编辑：查看 pygame 文档中的评论后，当旋转 90 度以外的任何东西时，调整图像大小会出现很多问题。您应该跟踪旋转，并从头开始将图像旋转一个增加的角度。

# asp.net-mvc-4 - OAuth2 和 DotNetOpenAuth - 实现 Google 自定义客户端

> ID：13727466
> 
> 赞同：15
> 
> 时间：2012-12-05T16:09:21.157
> 
> 标签：asp.net-mvc-4, oauth-2.0, dotnetopenauth

我在使用 DotNetOpenAuth 和 MVC4 为 google 实现自定义 OAuth2Client 时遇到问题。

我已经到了可以成功向谷歌端点 [https://accounts.google.com/o/oauth2/auth发出授权请求的地步](https://accounts.google.com/o/oauth2/auth)

谷歌询问用户是否允许我的应用程序访问他们的帐户。到目前为止一切都很好。当用户单击“确定”时，谷歌会按预期调用我的回调 URL。

问题是当我在 OAuthWebSecurity 类 (Microsoft.Web.WebPages.OAuth) 上调用 VerifyAuthentication 方法时

```
var authenticationResult = OAuthWebSecurity.VerifyAuthentication(Url.Action("ExternalLoginCallback", new { ReturnUrl = returnUrl })); 
```

它总是返回一个 AuthenticationResult`IsSuccessful = false`和`Provider = ""`

我已经查看了此代码，并且 OAuthWebSecurity 类尝试从中获取 Provider 名称

```
Request.QueryString["__provider__"] 
```

但谷歌没有在查询字符串中发回这些信息。我实现的另一个提供程序（LinkedIn）正在发回提供程序名称，一切正常。

我不确定从这一点开始我能做什么，除了放弃 Microsoft.Web.WebPages.OAuth 类并在没有它们的情况下使用 DotNetOpenAuth，但我希望有人可以尝试另一种解决方案......

我进行了广泛的搜索，但似乎找不到任何帮助......我发现即使只是找到做同样事情的人的例子也很困难，这真的让我感到惊讶。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T10:12:05.700

更新：正如马特约翰逊在下面提到的，他已经打包了一个解决方案，您可以从 GitHub 获得：[https ://github.com/mj1856/DotNetOpenAuth.GoogleOAuth2](https://github.com/mj1856/DotNetOpenAuth.GoogleOAuth2)

正如他所指出的： ASP.Net MVC 4 的 DNOA 和 OAuthWebSecurity 仅附带一个用于 Google 的 OpenId 提供程序。这是您可以使用的 OAuth2 客户端。

重要 - 如果您使用的是 ASP.Net MVC 5，则此包不适用。您应该改用 Microsoft.Owin.Security.Google。（它还随 VS 2013 中的 MVC 5 入门模板一起提供。）

* * *

最后我通过在请求进入时捕获请求来解决这个问题，并自己检查它来自哪个提供者。Google 允许您向 OAuth 请求发送一个名为“state”的参数，当他们进行回调时，他们只是将其直接传回给您，所以我使用它来传递 google 的提供程序名称，并在的缺席`"__provider__"`。

像这样的东西：

```
 public String GetProviderNameFromQueryString(NameValueCollection queryString)
    {
        var result = queryString["__provider__"];

        if (String.IsNullOrWhiteSpace(result))
        {
            result = queryString["state"];
        }

        return result;
    } 
```

然后，我为 Google 实现了一个自定义 OAuth2Client，我自己手动调用了 VerifyAuthentication 方法，绕过了 Microsoft 包装器的东西。

```
 if (provider is GoogleCustomClient)
        {
            authenticationResult = ((GoogleCustomClient)provider).VerifyAuthentication(context, new Uri(String.Format("{0}/oauth/ExternalLoginCallback", context.Request.Url.GetLeftPart(UriPartial.Authority).ToString())));
        }
        else
        {
            authenticationResult = OAuthWebSecurity.VerifyAuthentication(returnUrl);
        } 
```

这使我能够使用 Microsoft 包装器为其他提供商保留我已经拥有的东西。

根据@1010100 1001010 的要求，这是我为 Google 定制的 OAuth2Client（注意：它需要一些整理！我还没有准备好整理代码。它确实有效）：

```
public class GoogleCustomClient : OAuth2Client
{
    ILogger _logger;

    #region Constants and Fields

    /// <summary>
    /// The authorization endpoint.
    /// </summary>
    private const string AuthorizationEndpoint = "https://accounts.google.com/o/oauth2/auth";

    /// <summary>
    /// The token endpoint.
    /// </summary>
    private const string TokenEndpoint = "https://accounts.google.com/o/oauth2/token";

    /// <summary>
    /// The _app id.
    /// </summary>
    private readonly string _clientId;

    /// <summary>
    /// The _app secret.
    /// </summary>
    private readonly string _clientSecret;

    #endregion

    public GoogleCustomClient(string clientId, string clientSecret)
        : base("Google")
    {
        if (string.IsNullOrWhiteSpace(clientId)) throw new ArgumentNullException("clientId");
        if (string.IsNullOrWhiteSpace(clientSecret)) throw new ArgumentNullException("clientSecret");

        _logger = ObjectFactory.GetInstance<ILogger>();

        this._clientId = clientId;
        this._clientSecret = clientSecret;
    }

    protected override Uri GetServiceLoginUrl(Uri returnUrl)
    {
        StringBuilder serviceUrl = new StringBuilder();

        serviceUrl.AppendFormat("{0}?scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.profile", AuthorizationEndpoint);
        serviceUrl.Append("&state=google");
        serviceUrl.AppendFormat("&redirect_uri={0}", returnUrl.ToString());
        serviceUrl.Append("&response_type=code");
        serviceUrl.AppendFormat("&client_id={0}", _clientId);

        return new Uri(serviceUrl.ToString());

    }

    protected override IDictionary<string, string> GetUserData(string accessToken)
    {
        RestClient client = new RestClient("https://www.googleapis.com");
        var request = new RestRequest(String.Format("/oauth2/v1/userinfo?access_token={0}", accessToken), Method.GET);
        IDictionary<String, String> extraData = new Dictionary<String, String>();

        var response = client.Execute(request);
        if (null != response.ErrorException)
        {
            return null;
        }
        else
        {
            try
            {
                var json = JObject.Parse(response.Content);

                string firstName = (string)json["given_name"];
                string lastName = (string)json["family_name"];
                string emailAddress = (string)json["email"];
                string id = (string)json["id"];

                extraData = new Dictionary<String, String>
                {
                    {"accesstoken", accessToken}, 
                    {"name", String.Format("{0} {1}", firstName, lastName)},
                    {"firstname", firstName},
                    {"lastname", lastName},
                    {"email", emailAddress},
                    {"id", id}                                           
                };
            }
            catch(Exception ex)
            {
                _logger.Error("Error requesting OAuth user data from Google", ex);
                return null;
            }
            return extraData;
        }

    }

    protected override string QueryAccessToken(Uri returnUrl, string authorizationCode)
    {
        StringBuilder postData = new StringBuilder();
        postData.AppendFormat("client_id={0}", this._clientId);
        postData.AppendFormat("&redirect_uri={0}", HttpUtility.UrlEncode(returnUrl.ToString()));
        postData.AppendFormat("&client_secret={0}", this._clientSecret);
        postData.AppendFormat("&grant_type={0}", "authorization_code");
        postData.AppendFormat("&code={0}", authorizationCode);

        string response = "";
        string accessToken = "";

        var webRequest = (HttpWebRequest)WebRequest.Create(TokenEndpoint);

        webRequest.Method = "POST";
        webRequest.ContentType = "application/x-www-form-urlencoded";

        try
        {

            using (Stream s = webRequest.GetRequestStream())
            {
                using (StreamWriter sw = new StreamWriter(s))
                    sw.Write(postData.ToString());
            }

            using (WebResponse webResponse = webRequest.GetResponse())
            {
                using (StreamReader reader = new StreamReader(webResponse.GetResponseStream()))
                {
                    response = reader.ReadToEnd();
                }
            }

            var json = JObject.Parse(response);
            accessToken = (string)json["access_token"];
        }
        catch(Exception ex)
        {
            _logger.Error("Error requesting OAuth access token from Google", ex);
            return null;
        }

        return accessToken;

    }

    public override AuthenticationResult VerifyAuthentication(HttpContextBase context, Uri returnPageUrl)
    {

        string code = context.Request.QueryString["code"];
        if (string.IsNullOrEmpty(code))
        {
            return AuthenticationResult.Failed;
        }

        string accessToken = this.QueryAccessToken(returnPageUrl, code);
        if (accessToken == null)
        {
            return AuthenticationResult.Failed;
        }

        IDictionary<string, string> userData = this.GetUserData(accessToken);
        if (userData == null)
        {
            return AuthenticationResult.Failed;
        }

        string id = userData["id"];
        string name;

        // Some oAuth providers do not return value for the 'username' attribute. 
        // In that case, try the 'name' attribute. If it's still unavailable, fall back to 'id'
        if (!userData.TryGetValue("username", out name) && !userData.TryGetValue("name", out name))
        {
            name = id;
        }

        // add the access token to the user data dictionary just in case page developers want to use it
        userData["accesstoken"] = accessToken;

        return new AuthenticationResult(
            isSuccessful: true, provider: this.ProviderName, providerUserId: id, userName: name, extraData: userData);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-16T13:30:13.663

您可以将**提供者**查询参数添加到回调 url 的末尾。例如[https://mywebsite.com/Account/ExternalLoginCallback？**提供者**=谷歌](https://mywebsite.com/Account/ExternalLoginCallback?__provider__=google)

你会得到它，你不需要解决这个问题。

# json - 无法找到正确的 JSON 请求

> ID：13727469
> 
> 赞同：3
> 
> 时间：2012-12-05T16:09:33.813
> 
> 标签：json

如果我在这里真的很愚蠢，我会提前道歉，但是我找不到正确的语法来从 JSON 返回中提取一些数据。以下是返回的 JSON 数据：

```
 {
"version":"1.0",
"encoding":"UTF-8",
"feed":{
"xmlns":"http://www.w3.org/2005/Atom",
"xmlns$openSearch":"http://a9.com/-/spec/opensearchrss/1.0/",
"xmlns$gsx":"http://schemas.google.com/spreadsheets/2006/extended",
"id":{
"$t":"https://spreadsheets.google.com/feeds/list/0AhySzEddwIC1dEN6bnNQYkRlVE50RlBRLUQ5YlZhNUE/1/public/basic"
},
"updated":{
"$t":"2012-12-03T10:33:13.778Z"
},
"category":[
{
"scheme":"http://schemas.google.com/spreadsheets/2006",
"term":"http://schemas.google.com/spreadsheets/2006#list"
}
],
"title":{
"type":"text",
"$t":"Sheet1"
},
"link":[
{
"rel":"alternate",
"type":"text/html",
"href":"https://spreadsheets.google.com/pub?key\u003d0AhySzEddwIC1dEN6bnNQYkRlVE50RlBRLUQ5YlZhNUE"
},
{
"rel":"http://schemas.google.com/g/2005#feed",
"type":"application/atom+xml",
"href":"https://spreadsheets.google.com/feeds/list/0AhySzEddwIC1dEN6bnNQYkRlVE50RlBRLUQ5YlZhNUE/1/public/basic"
},
{
"rel":"self",
"type":"application/atom+xml",
"href":"https://spreadsheets.google.com/feeds/list/0AhySzEddwIC1dEN6bnNQYkRlVE50RlBRLUQ5YlZhNUE/1/public/basic?alt\u003djson"
}
],
"author":[
{
"name":{
"$t":"rourkie"
},
"email":{
"$t":"rourkie@gmail.com"
}
}
],
"openSearch$totalResults":{
"$t":"1"
},
"openSearch$startIndex":{
"$t":"1"
},
"entry":[
{
"id":{
"$t":"https://spreadsheets.google.com/feeds/list/0AhySzEddwIC1dEN6bnNQYkRlVE50RlBRLUQ5YlZhNUE/1/public/basic/cn6ca"
},
"updated":{
"$t":"2012-12-03T10:33:13.778Z"
},
"category":[
{
"scheme":"http://schemas.google.com/spreadsheets/2006",
"term":"http://schemas.google.com/spreadsheets/2006#list"
}
],
"title":{
"type":"text",
"$t":"5872.64"
},
"content":{
"type":"text",
"$t":"change: 3.6"
},
"link":[
{
"rel":"self",
"type":"application/atom+xml",
"href":"https://spreadsheets.google.com/feeds/list/0AhySzEddwIC1dEN6bnNQYkRlVE50RlBRLUQ5YlZhNUE/1/public/basic/cn6ca"
}
]
}
]
}
} 
```

我正在尝试使用以下内容提取“更改”数字：

```
feed.entry[4].content.$t 
```

但它只是不断返回一个错误。

谁能阐明我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:17:36.920

JSONLint - [http://jsonlint.com/](http://jsonlint.com/) - 非常方便。

您发布的 JSON 在 entry 数组中只有一个对象（除非您只是将其发布为示例）......所以它将是：

```
feed.entry[0].content.$t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:13:51.517

使用 json2csharp.com ( [http://json2csharp.com/](http://json2csharp.com/) ) 您可以粘贴 json，它会为您提供与 json 匹配的类，让您轻松解析它。检查[如何使用 C# 解析 JSON？](https://stackoverflow.com/questions/6620165/how-to-parse-json-in-c)关于如何使用 JsonConvert。我相信你可以在 nuget 包中找到它。请记住，由于 json 中某些字段的命名，我在下面粘贴的类不能直接工作。您可能必须手动重命名它们并映射它们。

```
public class Id
{
    public string __invalid_name__$t { get; set; }
}

public class Updated
{
    public string __invalid_name__$t { get; set; }
}

public class Category
{
    public string scheme { get; set; }
    public string term { get; set; }
}

public class Title
{
    public string type { get; set; }
    public string __invalid_name__$t { get; set; }
}

public class Link
{
    public string rel { get; set; }
    public string type { get; set; }
    public string href { get; set; }
}

public class Name
{
    public string __invalid_name__$t { get; set; }
}

public class Email
{
    public string __invalid_name__$t { get; set; }
}

public class Author
{
    public Name name { get; set; }
    public Email email { get; set; }
}

public class OpenSearchTotalResults
{
    public string __invalid_name__$t { get; set; }
}

public class OpenSearchStartIndex
{
    public string __invalid_name__$t { get; set; }
}

public class Id2
{
    public string __invalid_name__$t { get; set; }
}

public class Updated2
{
    public string __invalid_name__$t { get; set; }
}

public class Category2
{
    public string scheme { get; set; }
    public string term { get; set; }
}

public class Title2
{
    public string type { get; set; }
    public string __invalid_name__$t { get; set; }
}

public class Content
{
    public string type { get; set; }
    public string __invalid_name__$t { get; set; }
}

public class Link2
{
    public string rel { get; set; }
    public string type { get; set; }
    public string href { get; set; }
}

public class Entry
{
    public Id2 id { get; set; }
    public Updated2 updated { get; set; }
    public List<Category2> category { get; set; }
    public Title2 title { get; set; }
    public Content content { get; set; }
    public List<Link2> link { get; set; }
}

public class Feed
{
    public string xmlns { get; set; }
    public string __invalid_name__xmlns$openSearch { get; set; }
    public string __invalid_name__xmlns$gsx { get; set; }
    public Id id { get; set; }
    public Updated updated { get; set; }
    public List<Category> category { get; set; }
    public Title title { get; set; }
    public List<Link> link { get; set; }
    public List<Author> author { get; set; }
    public OpenSearchTotalResults __invalid_name__openSearch$totalResults { get; set; }
    public OpenSearchStartIndex __invalid_name__openSearch$startIndex { get; set; }
    public List<Entry> entry { get; set; }
}

public class RootObject
{
    public string version { get; set; }
    public string encoding { get; set; }
    public Feed feed { get; set; }
} 
```

# c++ - 并行迭代的宏替代方案？

> ID：13727470
> 
> 赞同：4
> 
> 时间：2012-12-05T16:09:36.917
> 
> 标签：c++, macros, graph-algorithm, hpc

这将是一个漫长的故事，但也许你们中的一些人想研究这个案例。

我正在开发并行图算法。[我选择了一个名为STINGER](http://www.cc.gatech.edu/stinger/index.php)的尖端 HPC 并行图数据结构。STINGER 的使命宣言如下：

> “STINGER 应该提供一个通用的抽象数据结构，以便大型图社区可以快速利用彼此的研究进展。[...] 为 STINGER 编写的算法可以很容易地在多种语言和框架之间进行翻译/移植 [...]认识到没有一种数据结构对每个图算法都是最优的。STINGER 的目标是配置一个可以很好地运行大多数算法的合理数据结构。与跨领域的另一种通用数据结构相比，使用 STINGER 应该不会显着降低性能一套广泛的典型图算法。”

STINGER 可能相当高效并且适用于共享内存并行。另一方面，它不是很抽象、通用或简洁。STINGER 提供的接口对我来说并不令人满意，原因有几个： 它太冗长（函数需要对我来说并不重要的参数）；它只模拟一个有向图，而我需要一个无向图；和其他原因。

但是，我不敢自己实现一个新的并行图数据结构。

所以我已经开始用我自己的`Graph`类封装一个 STINGER 实例。例如，要检查是否存在无向边，我现在可以调用`Graph::hasEdge(node u, node v)`而不是写入算法：

```
int to = stinger_has_typed_successor(stinger, etype, u, v);
int back = stinger_has_typed_successor(stinger, etype, v, u);
bool answer = to && back; 
```

到目前为止，这运作良好。现在到迭代的话题。

STINGER 通过宏实现遍历（节点、边、节点的入射边等的迭代）。例如，你写

```
STINGER_PARALLEL_FORALL_EDGES_BEGIN(G.asSTINGER(), etype) {
    node u = STINGER_EDGE_SOURCE;
    node v = STINGER_EDGE_DEST;
    std::printf("found edge (%d, %d)", u, v);
} STINGER_PARALLEL_FORALL_EDGES_END(); 
```

这里`STINGER_PARALLEL_FORALL_EDGES_BEGIN`扩展为

```
do {                                    \
                            \
                            \
    for(uint64_t p__ = 0; p__ < (G.asSTINGER())->ETA[(etype)].high; p__++) {    \
      struct stinger_eb *  current_eb__ = ebpool + (G.asSTINGER())->ETA[(etype)].blocks[p__]; \
      int64_t source__ = current_eb__->vertexID;            \
      int64_t type__ = current_eb__->etype;             \
      for(uint64_t i__ = 0; i__ < stinger_eb_high(current_eb__); i__++) { \
    if(!stinger_eb_is_blank(current_eb__, i__)) {                   \
      struct stinger_edge * current_edge__ = current_eb__->edges + i__; 
```

宏隐藏了数据结构的核心，显然需要完全暴露以实现高效（并行）迭代。有各种组合的宏，包括`STINGER_FORALL_EDGES_BEGIN`, `STINGER_READ_ONLY_FORALL_EDGES_BEGIN`, `STINGER_READ_ONLY_PARALLEL_FORALL_EDGES_BEGIN`...

是的，我可以使用这些宏，但我想知道是否有更优雅的方式来实现迭代。如果我希望有一个界面，它看起来类似于

```
G.forallEdges(readonly=true, parallel=true, {..})

GraphIterTools.forallEdges(G, readonly=true, parallel=true, {...}) 
```

where`{...}`只是一个函数，一个闭包或一个“代码块”，然后将被适当地执行。但是，我缺乏实现这一点的 C++ 经验。我想知道你能在这个问题上给我什么建议。也许还有“你应该使用宏，因为......”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:45:10.733

利用现有的宏，您可以在图形类上实现成员函数，如下所示：

```
template<typename Callback>
void forallEdges(int etype, Callback callback)
{
    STINGER_PARALLEL_FORALL_EDGES_BEGIN(this->asSTINGER(), etype) {
        node u = STINGER_EDGE_SOURCE;
        node v = STINGER_EDGE_DEST;

        // call the supplied callback
        callback(u, v);

    } STINGER_PARALLEL_FORALL_EDGES_END();
} 
```

然后定义一个回调函数并将其传递给您的新方法：

```
void my_callback(node u, node v) { ... }
...
G.forallEdges(etype, my_callback); 
```

或者在 C++11 中，您可以使用 lambda 函数：

```
G.forallEdges(etype, [](node u, node v) { ... }); 
```

# java - 如何使用 JFreeChart 绘制曲线？

> ID：13727474
> 
> 赞同：3
> 
> 时间：2012-12-05T16:09:44.593
> 
> 标签：java, jfreechart

我设法绘制了一个线性图。以下是代码：

```
private JPanel createGraph() {

        JPanel panel = new JPanel();
        XYSeries series = new XYSeries("MyGraph");
        series.add(0, 1);
        series.add(1, 2);
        series.add(2, 5);
        series.add(7, 8);
        series.add(9, 10);

        XYSeriesCollection dataset = new XYSeriesCollection();
        dataset.addSeries(series);

        JFreeChart chart = ChartFactory.createXYLineChart(
                "XY Chart",
                "x-axis",
                "y-axis",
                dataset, 
                PlotOrientation.VERTICAL,
                true,
                true,
                false
                );
        ChartPanel chartPanel = new ChartPanel(chart);

        panel.add(chartPanel);

        return panel;
    } 
```

但是，它不是平滑的曲线，而是直线。请问我怎样才能使它顺利？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:23:15.627

相信你在找[XYSplineRenderer](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYSplineRenderer.html) 你应该可以做到

```
chart.getXYPlot().setRenderer(new XYSplineRenderer()); 
```

构建图表后。

# javascript - 测试 extjs 应用程序

> ID：13727481
> 
> 赞同：1
> 
> 时间：2012-12-05T16:10:16.567
> 
> 标签：javascript, jquery, html, extjs

当组件或组件部件（如网格中的组件）存在预置 id 时，如何测试 extjs 应用程序。

我可以为每个组件添加 ID，但如果我错过了一个或多个，并且应用程序又大又复杂怎么办？

ExtJS/Siesta 中是否有一个函数或某些模块允许您在应用程序中定位组件/元素，而不依赖于每个组件的预定义 ID

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T18:35:44.760

首先要[非常小心在组件上使用 ID](https://stackoverflow.com/a/11874707/834424)。我已经看到了我与他们相当多的问题。

其次，ExtJS 提供了几种定位组件和元素的方法。不要将两者混为一谈。

对于组件：

*   分机.getCmp(id)
*   [Ext.ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery) .query()
*   [向上（）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Component-method-up)
*   [向下（）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Container-method-down)
*   [下一个兄弟姐妹（）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-nextSibling)
*   [上一个兄弟姐妹（）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-previousSibling)
*   [孩子（）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.container.Container-method-child)
*   [前一个节点（）](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-method-previousNode)

加上各种`find..`方法

对于元素：

*   [分机.get()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-get)
*   [Ext.dom.Query()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Query)

更多关于 DOM 查询[http://docs.sencha.com/core/manual/content/domquery.html](http://docs.sencha.com/core/manual/content/domquery.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T11:33:38.247

使用 Siesta，您可以在定位要点击的位置等时有很多选项：

*   Dom 节点 id（与 Ext Component id 相同）
*   任何组件查询
*   任何 CSS 查询
*   一个坐标
*   真正的 Ext 组件 JS 实例
*   真实的 DOM 节点实例
*   复合查询（组件查询和 CSS 查询的组合，'.x-grid => .x-grid-cell'
*   一个函数，返回上述任何一个。

我的幻灯片中的更多信息：[https ://speakerdeck.com/mats/testing-sencha-touch](https://speakerdeck.com/mats/testing-sencha-touch)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T19:19:25.607

您可能想查看自动化功能 GUI 测试工具[RIATest](http://www.cogitek.com/riatest/features/technologies/extjs.html)。

RIATest 知道如何忽略 ExtJS 动态生成的 id，但是如果您手动为组件分配 id，该工具*将*使用它们进行识别（参见下面示例中的 #tree2）。

RIATest 中的测试根据 ExtJS UI 小部件运行。

**使用 ExtJS 小部件的 RIATest 脚本示例：**

以下点击带有标签“下一页”的 ExtJS 按钮：

```
ExtButton("Next Page")=>click(); 
```

以下内容将一行从一个 ExtJS 树拖放到另一棵树：

```
ExtRow("Controller.js")=>dragAndDropTo(
    ExtTreePanel("#tree2")->ExtRow("Custom Ext JS")); 
```

这会折叠 ExtJS 框的标题：

```
ExtBox("Feeds")->ExtHeader("FeedsВ")->ExtCollapser()=>click(); 
```

*（以上所有示例代码均来自在 ExtJS 示例应用程序上运行的真实测试脚本）。*

（免责声明：我是 RIATest 团队成员）。

# c# - ASP.NET - 检查请求是否在母版页中经过身份验证

> ID：13727489
> 
> 赞同：2
> 
> 时间：2012-12-05T16:10:37.807
> 
> 标签：c#, asp.net, authentication, forms-authentication

在我的母版页的 Page_Load 事件中，我有以下代码：

```
if(!Request.IsAuthenticated)
{
   FormsAuthentication.RedirectToLoginPage();
} else 
{
   // Do something. Note: Any work here gets performed when request is authenticated.
} 
```

但是，当我在未经过身份验证的情况下加载内容页面（使用主页面）时，我不会被重定向到登录页面。为了获得所需的行为，我还需要在我的内容页面的 Page_Load 事件中添加上述检查。

不是一个大问题，但只是在每个内容页面中进行上述检查很烦人。

所以我很好奇，当请求未通过身份验证时，主页面没有重定向到登录页面的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:27:44.057

如果您只想将 FormsAuthentication 重定向到登录页面，那么当用户尚未登录时，为什么不使用配置文件来执行此操作？

```
<system.web>
  <authorization>
    <deny users="?" />
  </authorization>
</system.web> 
```

这应该会自动将所有“匿名”用户发送到为 FormAuth 配置的登录页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:21:37.147

您是否尝试过调试 - 您的母版页的 Page_Load 是否确实在运行？您可能将 AutoEventWireUp 设置为 false 或类似...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T16:25:45.920

我认为您需要查看[母版页的生命周期](http://social.msdn.microsoft.com/Forums/en-US/asmxandxml/thread/0db883da-82de-4d13-9b0f-c7aa19d0f022)；通过这个你可以了解它是如何工作的。

首先运行单个`.aspx`页面的`Page_Load()`方法，然后在该方法执行完成后，`Page_Load()`运行母版页的方法。

相关问题：[ASP.NET WebForm 的“页面生命周期”是什么？](https://stackoverflow.com/questions/597042/what-is-the-page-lifecycle-of-an-asp-net-webform)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T16:15:03.440

当您在多个地方需要相同的功能时，您可以使用[ASP.NET 用户控件](http://msdn.microsoft.com/en-us/library/y6wb1a0e%28v=vs.100%29.aspx)。

将您的代码放入`usercontrol`并将用户控件添加到您需要执行此代码的页面

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T04:13:53.297

我不知道为什么你的代码不起作用，它对我来说很完美。你可以检查你的web.config，你是否实现了登录页面的url

```
<authentication mode="Forms">
      <forms loginUrl="~/Login.aspx" timeout="2880" defaultUrl="~/somepage.aspx" />
    </authentication> 
```

# javascript - 从堆栈中擦除画布矩形

> ID：13727498
> 
> 赞同：1
> 
> 时间：2012-12-05T16:11:13.490
> 
> 标签：javascript, html, html5-canvas

我有这个代码：

```
var stack = new Array();
var last = 0;
var pospintar=0;

function Cuadrado(pcolor,pcostat){
this.color=pcolor;
this.costat=parseInt(pcostat);
}

function pintar(){
var canvas = document.getElementById('tutorial');
// Make sure we don't execute when canvas isn't supported
if (canvas.getContext){
// use getContext to use the canvas for drawing
var ctx = canvas.getContext('2d');
// Draw shapes
//ctx.fillStyle="#ff0000";
var vCuadro=stack[last];
ctx.fillStyle=vCuadro.color;
var lado=vCuadro.costat;
ctx.fillRect(20,pospintar,lado,lado);
//ctx.strokeRect(20,posPintar,lado,lado);
}
}

function empilar(color,costat)
{
var vCuadro = new Cuadrado(color,costat);
stack[last]=vCuadro;
pintar();
var vCuadro=stack[last];
var lado=vCuadro.costat;
pospintar+=lado;
last+=1;
}
function desempilar()
{

} 
```

该函数`empilar`绘制与 variable 大小相同的矩形`costat`。

如何制作相反的功能`desempilar`，擦除最后绘制的矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:58:49.350

在 pintar 函数中，您应该清除画布，遍历堆栈数组并绘制每个正方形。在 desempilar 函数中，您需要从堆栈中删除最后一个元素并将最后一个变量减少 1 并再次调用 pintar。

```
function pintar() {
    var canvas = document.getElementById('tutorial');
    if (canvas.getContext) {
        var ctx = canvas.getContext('2d');
        ctx.clearRect(0,0,canvas.width,canvas.height); // Clear canvas
        var pospintar = 0;
        for (i in stack) {
            var vCuadro=stack[i];
            ctx.fillStyle=vCuadro.color;
            var lado=vCuadro.costat;
            var pospintar += lado;
            ctx.fillRect(20,pospintar,lado,lado);
        }
   }
}

function desempilar() {
    stack.splice(last, 1);
    last--;
    pintar();
} 
```

# jquery - 使用可排序列表插入和更新数据库

> ID：13727500
> 
> 赞同：0
> 
> 时间：2012-12-05T16:11:21.007
> 
> 标签：jquery, mysql, jquery-ui-sortable

有许多使用 jQuery 可排序列表更新数据库的示例，其中涉及序列化`id`列表，然后根据该`id`序列更新数据库。

现在的问题是我想使用 jQuery 可排序连接列表来插入和更新数据库。我有两个清单。

来源清单：

```
<ul id="admin_news_all">
    <li id="2588" class="ui-draggable">
    <li id="2678" class="ui-draggable">
    <li id="2680" class="ui-draggable">
    <li id="2690" class="ui-draggable">
    <li id="2692" class="ui-draggable">
    <li id="2694" class="ui-draggable">
    <li id="2696" class="ui-draggable">
    <li id="2698" class="ui-draggable">
    <li iid="2696" class="ui-draggable">
    <li id="2704" class="ui-draggable">
</ul> 
```

目标清单：

```
<ul id="news_box_top" class="ui-sortable">
    <li class="ui-draggable" style="display: list-item; id="2686"">
    <li class="ui-draggable" style="display: list-item; id="2496"">
</ul> 
```

我已将 jQuery 初始化为：

```
$("#news_box_top").sortable()
$("#admin_news_all li").draggable({
    helper: "clone",
    revert: "invalid",
    connectToSortable:'#news_box_top'
}); 
```

现在我想将项目从源列表移动到目标列表，然后在单击`button`元素时更改（插入和更新操作）数据库。

目标数据库：MySql

```
id int(12), position int(2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T00:54:22.663

首先，我认为您的第二个列表应该是这样的：

```
<ul id="news_box_top" class="ui-sortable">
  <li class="ui-draggable" id="2686" style="display: list-item; ">
  <li class="ui-draggable" id="2496" style="display: list-item; ">
</ul> 
```

然后我假设你知道如何更新你的数据库，我只是帮助构建一个排序 ids 的数组：

```
ids = [];
$('#news_box_top li.ui-draggable').toArray().forEach( function (el) {
  // Here I assume the element has an id
  ids.push( $(el).attr('id') );
}); 
```

# ruby - 为什么git在使用http协议时跳过用户名和密码输入

> ID：13727501
> 
> 赞同：1
> 
> 时间：2012-12-05T16:11:34.880
> 
> 标签：ruby, git, http, ruby-on-rails-3.2

我使用 rails 设置了一个 git http 服务器。[与GitLab](https://github.com/gitlabhq/gitlabhq)非常相似。

因为我们使用的是同一个 Gem [grack](https://github.com/gitlabhq/grack)。

唯一的区别是 Grack::Auth.valid？方法，它只是授权用户的用户名和密码。

相同的路线，相同的 Gem，但是为什么当我输入 git clone [http://domain.com/project.git](http://domain.com/project.git)以克隆 repo时**git 跳过用户名和密码输入。**

有人可以告诉我如何解决这个问题。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-09T19:08:04.793

一种可能性是 Git 已经使用[credential helper](https://git-scm.com/docs/gitcredentials)缓存了这些凭据。

另一种可能性是服务器端的身份验证机制没有正确设置（Grack in 2012, [gitlab-workhorse](https://gitlab.com/gitlab-org/gitlab-workhorse#gitlab-workhorse) now）

# c++ - QtConcurrent::run 异常通知

> ID：13727506
> 
> 赞同：5
> 
> 时间：2012-12-05T16:11:47.247
> 
> 标签：c++, multithreading, qt, exception, qt4

我知道实际处理在不同线程中引发的异常是没有意义的，但是有什么方法可以通知我至少发生了一个异常？例如像

```
#include <QtConcurrentRun>

#include <iostream>
#include <stdexcept>

void MyFunction()
{
//  std::cout << "MyFunction()" << std::endl;
  throw std::runtime_error("Test exception.");
}

int main()
{
  try
  {
    QtConcurrent::run(MyFunction);
  }
  catch(...)
  {
    std::cout << "Exception caught!" << std::endl;
  }

} 
```

即使发生异常，也会安静地退出。当异常来自调用堆栈深处的某个地方时，这有时会非常令人困惑。

- - - - - - 编辑 - - - - - - -

我试图写一个像 UmNyobe 建议的包装器，但我一定是函数指针有问题？

```
#include <QtConcurrentRun>
#include <QFutureWatcher>
#include <QObject>

#include <iostream>
#include <stdexcept>

void MyFunction()
{
//  std::cout << "MyFunction()" << std::endl;
  throw std::runtime_error("Test exception.");
}

template<typename TFirstParam, typename... TParams>
bool ExceptionWrapper(TFirstParam firstParam, TParams&& ...params)
{
  // Here 'firstParam' should be a function pointer, and 'params' are the arguments
  // that should be passed to the function
  try
  {
    firstParam(params...);
  }
  catch(...)
  {
    std::cout << "Exception caught!" << std::endl;
    return false; // failure
  }

  return true; // success
}

struct MyClass : public QObject
{
  Q_OBJECT

  MyClass()
  {
    connect(&this->FutureWatcher, SIGNAL(finished()), this, SLOT(slot_finished()));
  }

  void DoSomething()
  {
    void (*myFunctionPointer)() = MyFunction;
    bool (*functionPointer)(decltype(myFunctionPointer)) = ExceptionWrapper;

    QFuture<bool> future = QtConcurrent::run(functionPointer);
    this->FutureWatcher.setFuture(future);
  }

  QFutureWatcher<void> FutureWatcher;

  void slot_finished()
  {
    std::cout << "Finished" << std::endl;
    if(!this->FutureWatcher.result())
    {
      std::cout << "There was an error!" << std::endl;
    }
  }
};

#include "ExceptionWrapper.moc"

int main()
{
  MyClass myClass = new MyClass;
  myClass->DoSomething();
} 
```

我得到的错误是在这一行：

```
QFuture<bool> future = QtConcurrent::run(functionPointer);

error: no matching function for call to 'run(bool (*&)(void (*)()))' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T20:44:15.200

> 我知道实际处理在不同线程中引发的异常是没有意义的，但是有什么方法可以通知我至少发生了一个异常？

您可以使用从`QtConcurrent::run`. 有关详细信息，请参阅[此页面](http://qt-project.org/doc/qt-4.8/qtconcurrent-exception.html)。当您收集未来时，将重新抛出任何未处理的异常。您可以创建一个简单的包装类来捕获异常并在接收线程中检查它。

```
#include <QtGui>
#include <iostream>
#include <stdexcept>

class MyException : public QtConcurrent::Exception
{
public:
    MyException(std::exception& err) : e(err) {}
    void raise() const { throw *this; }
    Exception* clone() const { return new MyException(*this); }
    std::exception error() const { return e; }
private:
    std::exception e;
};

// first concurrent function
int addFive(int n)
{
    try
    {
        throw std::runtime_error("kablammo!");
        //throw -1;
        return n + 5;
    }
    catch (std::exception& e)
    {
        throw MyException(e);
    }

}

// second concurrent function    
void myVoidFunction()
{
    try
    {
        throw std::runtime_error("oops!");
        //throw -1;
    }
    catch (std::exception& e)
    {
        throw MyException(e);
    }
}

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);

    QFuture<int> f1 = QtConcurrent::run(addFive, 50);
    try
    {
        int r = f1.result();
        std::cout << "result = " << r << std::endl;
    }
    catch (MyException& me)
    {
        std::cout << me.error().what() << std::endl;
    }
    catch (QtConcurrent::UnhandledException&)
    {
        std::cout << "unhandled exception in addFive\n";
    }

    QFuture<void> f2 = QtConcurrent::run(myVoidFunction);
    try
    {
        // result() not available for QFuture<void>, use waitForFinished() to
        // block until it's done.
        f2.waitForFinished();
        std::cout << "myVoidFunction finished\n";
    }
    catch (MyException& me)
    {
        std::cout << me.error().what() << std::endl;
    }
    catch (QtConcurrent::UnhandledException&)
    {
        std::cout << "unhandled exception in myVoidFunction\n";
    }

    QWidget w;
    w.show();

    return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T18:46:11.560

似乎如果抛出异常，关联的 QFutureWatcher 的 isCanceled() 返回 true：

```
#include <QApplication>
#include <QtConcurrentRun>
#include <QFutureWatcher>

#include <iostream>
#include <stdexcept>

void MyFunction()
{
  std::cout << "MyFunction()" << std::endl;
  throw std::runtime_error("Test exception.");
}

struct MyClass : public QObject
{
  Q_OBJECT

public:
  MyClass()
  {
    connect(&this->FutureWatcher, SIGNAL(finished()), this, SLOT(slot_finished()));
  }

  void DoSomething()
  {
    QFuture<void> future = QtConcurrent::run(MyFunction);
    this->FutureWatcher.setFuture(future);
  }

  QFutureWatcher<void> FutureWatcher;

public slots:
  void slot_finished()
  {
    std::cout << "Finished" << std::endl;
    if(this->FutureWatcher.isCanceled())
    {
      std::cout << "There was an error!" << std::endl;
    }
    else
    {
      std::cout << "Success!" << std::endl;
    }
  }
};

#include "Exception.moc"

int main(int argc, char*argv[])
{
  MyClass myClass;
  myClass.DoSomething();

  QApplication app(argc, argv);

  return app.exec();
} 
```

--------- 编辑（戈登弗里曼答案的简化版） ---------

即使不使用 QtConcurrent::Exception 子类，似乎也会重新抛出异常？

```
#include <QtGui>
#include <iostream>
#include <stdexcept>

// non-void concurrent function
int addFive(int n)
{
  throw std::runtime_error("addFive throw!");
  return n+5;
}

// void concurrent function
void myVoidFunction()
{
   throw std::runtime_error("myVoidFunction throw!");
}

int main(int argc, char* argv[])
{
    QApplication app(argc, argv);

    QFuture<int> f1 = QtConcurrent::run(addFive, 50);
    try
    {
        int r = f1.result();
        std::cout << "result = " << r << std::endl;
    }
    catch (...)
    {
      std::cout << "exception in addFive." << std::endl;
    }

    QFuture<void> f2 = QtConcurrent::run(myVoidFunction);
    try
    {
        // result() not available for QFuture<void>, use waitForFinished() to
        // block until it's done.
        f2.waitForFinished();
        std::cout << "myVoidFunction finished\n";
    }
    catch (...)
    {
       std::cout << "exception in myVoidFunction\n";
    }

    QWidget w;
    w.show();

    return app.exec();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:29:27.040

好处`QtConcurrent::run` 是它接受带有返回值的函数。我的两分钱：*尽早捕获异常......*

免责声明：C++ 中的例外情况我真的很糟糕：D

在不同线程中调用的代码应该返回一个值。对于 void 函数或不捕获异常的现有函数，您可以定义一个包装器（通用或非通用）。例如

```
 int exceptionwrapper(){
   int exception  = 0;
   try
   {
      myFunction();
   }
   catch(...){
      exception = 1;
      std::cout << "Exception caught!" << std::endl;
   }
   return exception;
 } 
```

然后稍后

```
 QFuture<int> future = QtConcurrent::run(exemptionwrapper);
 futurewatcher.setFuture(future); 
```

当函数结束时，您只需使用未来观察者就可以在以后检查未来。

# image - 在不同的 DNN 页面上将 url 解析为 .aspx

> ID：13727508
> 
> 赞同：0
> 
> 时间：2012-12-05T16:11:58.110
> 
> 标签：image, url, dotnetnuke

我在自定义 DNN 模块中的服务器端在后台创建了以下 HTML 代码。这必须在服务器上而不是在 CSS 中创建。

```
<div class=""ca-icon"" style=""background-image: url(DesktopModules/MyModule/" +
                    "ShowPictureImg.aspx?Key=" + KeyImgList(itemCount - 1) + ")""> 
```

为了解释您所看到的，我指向我的模块中的一个 .aspx，它将加载图像并将其放置为该 div 的背景图像。我已经知道这行得通。链接到它的 url 会出现问题。根据模块是放置在父页面还是子页面中，url 将失败。它的唯一工作方式是这样的：

父页面：

```
url(DesktopModules/MyModule/ShowPictureImg.aspx?Key=SomeKey) 
```

父母的孩子：

```
url(../DesktopModules/MyModule/ShowPictureImg.aspx?Key=SomeKey) 
```

孩子的孩子：

```
url(../../DesktopModules/MyModule/ShowPictureImg.aspx?Key=SomeKey) 
```

等等等等。无论模块放置在哪里，我如何才能获得始终如一的 url？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T05:42:32.283

如果您将此模块分发到野外，我实际上会使用 ResolveClientUrl() 来获取 URL，因为 /DesktopModules.. 如果您处于子门户设置中，或者 DNN 不在站点的根目录中，则等将不起作用.

总的来说，它会像

```
<%= Page.ResolveClientUrl("~/Desktop...") %> 
```

你的完整路径在哪里，开头有一个 ~/

这将确保它得到正确处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:13:14.280

如果你这样做`url(/DesktopModules/MyModule/`（注意`/`开头的），它应该在你网站的根目录开始你的 URL。假设您没有在子目录中运行您的网站，这应该可以满足您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T20:09:32.023

据我所知，我实际上发现这`ControlPath`在所有情况下都有效。所以我对 url 的最终结果是这样的。

```
"url(" + ControlPath + "ShowPictureImg.aspx?Key=" + Key + ")" 
```

这基本上导致`url(/site/DesktopModules/Modulename/ShowPictureImg.aspx?Key=1234)`

# javascript - 使用 Ember-Data 进行自联接

> ID：13727512
> 
> 赞同：8
> 
> 时间：2012-12-05T16:12:03.330
> 
> 标签：javascript, ember.js, ember-data

有人对如何使用 ember-data 手动创建自联接关系有任何建议吗？

例如，如果一个用户有很多关注者（其他用户），那么将这个数据结构构建到 ember-data 中的最简单方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T17:47:58.420

我们可以找到而不发疯的最好方法是用关系对象代理自连接关系，然后将其映射到用户。

因此，如果用户通过以下方式拥有许多“用户”，那么您可以执行以下操作：

```
App.User = DS.Model.extend
  name: DS.attr('string')
  follows: DS.hasMany('App.Follow')
  followers:(->
    @get('follows').map((data)-> App.User.find(data.get('followedUserId')))
  ).property('follows.@each')

App.Follow = Ds.Model.extend
  user: DS.belongsTo('App.User')
  followedUserId: DS.attr('string') 
```

希望有帮助！

# iphone - 如何检查 Mapkit 是否可用？

> ID：13727517
> 
> 赞同：0
> 
> 时间：2012-12-05T16:12:14.000
> 
> 标签：iphone, objective-c, ios, google-maps, mkmapview

我正在构建一个使用 Mapkit 的应用程序。我知道这仅在IOS6中可用。所以我应该检查这是否可用。我正在使用以下代码。

```
 if(NSClassFromString(@"MKMapKit")) {
        // MKMapKit is available in this OS
        CLLocationCoordinate2D coords =
        CLLocationCoordinate2DMake(51.097185,5.621653);

        NSDictionary *address = @{
        (NSString *)kABPersonAddressStreetKey: @"Weg naar oqdffds 59",
        (NSString *)kABPersonAddressCityKey: @"Msfsf",
        (NSString *)kABPersonAddressStateKey: @"Limbusqfqsdf",
        (NSString *)kABPersonAddressZIPKey: @"3670",
        (NSString *)kABPersonAddressCountryCodeKey: @"BE",
        (NSString *)kABPersonPhoneMainLabel:@"04741234567"
        };
        MKPlacemark *place = [[MKPlacemark alloc]
                              initWithCoordinate:coords addressDictionary:address];

        MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:place];
        mapItem.phoneNumber = @"0141343252";

        //current location
        MKMapItem *mapItem2 = [MKMapItem mapItemForCurrentLocation];

        NSArray *mapItems = @[mapItem, mapItem2];

        NSDictionary *options = @{
            MKLaunchOptionsDirectionsModeKey:MKLaunchOptionsDirectionsModeDriving,
            MKLaunchOptionsMapTypeKey:
            [NSNumber numberWithInteger:MKMapTypeStandard],
            MKLaunchOptionsShowsTrafficKey:@YES
        };

        [MKMapItem openMapsWithItems:mapItems launchOptions:options];

    }else {
        NSLog(@"tot hier");
        // MKMapKit is not available in this OS
        locationController = [[MyCLController alloc] init];
        locationController.delegate = self;
        [locationController.locationManager startUpdatingLocation];
    } 
```

但出于某种原因，它总是使用 google 方法。

任何人都可以帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:19:19.443

MkMapKit 在 ios 4.3 中也可用，也可能在 3.x 中可用！什么是新的，（就像在所有版本中一样），MkMapKit 的一些新方法：

您应该更好地检查您需要的特定方法（地理编码？=

查看您正在导入的 MkMapKit 的标头（如果我没记错的话：MkMapKit.h），有宏定义特定方法的可用性，具体取决于 ios 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:33:35.503

如前所述，*MapKit*在 iOS 6 之前就已经可用。

您要检查的是`MKMapItem`（不是“MKMapKit”）。

但是，正如[文档所`MKMapItem`解释](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html#//apple_ref/doc/uid/TP40011746-CH1-SW23)的（带有代码示例）：

> 要确定某个类在给定 iOS 版本中在运行时是否可用，您通常会检查该类是否为 nil。不幸的是，这个测试对于 MKMapItem 来说并不完全准确。**虽然这个类从 iOS 6.0 开始公开可用，但在此之前它还在开发中。**尽管该类存在于早期版本中，但您不应尝试在这些版本中使用它。
> 
> **要在运行时确定您是否可以在应用程序中使用地图项，请测试该类和 openMapsWithItems:launchOptions: 类方法是否存在。**该方法直到 iOS 6.0 才添加到类中。代码可能如下所示：
> 
> ```
> Class itemClass = [MKMapItem class]; 
> if (itemClass && [itemClass 
>     respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) {   
>     // Use class 
> } 
> ```

所以这个检查：

```
if(NSClassFromString(@"MKMapKit")) { 
```

应该：

```
Class itemClass = [MKMapItem class]; 
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) { 
```

或者：

```
Class itemClass = NSClassFromString(@"MKMapItem"); 
if (itemClass && [itemClass respondsToSelector:@selector(openMapsWithItems:launchOptions:)]) { 
```

# google-fusion-tables - 使用谷歌地图 javascript api v3 进行融合表查询中的 Where 子句

> ID：13727521
> 
> 赞同：0
> 
> 时间：2012-12-05T16:12:22.053
> 
> 标签：google-fusion-tables

我想使用 javascript api v3 在我的谷歌地图上放置一个融合表层。其中有四列：iso、color、name、geometry。我的融合表是：
[https ://www.google.com/fusiontables/data?docid=1uO0anbhABVwjktSOy-PJsGo0Q4y-gTtzAe607c8](https://www.google.com/fusiontables/data?docid=1uO0anbhABVwjktSOy-PJsGo0Q4y-gTtzAe607c8)

为什么我可以过滤：`where: 'color=0'` 但不能过滤：`where: 'iso="AU"'`

'color' 列类型是数字，'iso' 列类型是文本。

该查询中有任何语法错误吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:22:41.407

哦，我知道为什么了。

where 子句应改为`where: "iso='AU'"`. 双引号应围绕单引号。

# mysql - 为从 Delphi 到 MySQL 的 ADO 连接指定源 IP

> ID：13727523
> 
> 赞同：3
> 
> 时间：2012-12-05T16:12:39.847
> 
> 标签：mysql, delphi, tcp, ado

我的 Delphi 应用程序正在使用 tAdoConnection 连接到 MySQL 数据库。我的客户有一台通过网络与数据库服务器建立两个连接的机器。一个是有线的，另一个是无线的。所以运行应用程序的机器在同一个网络上有两个 IP 地址。

我的问题是这台机器上的无线连接不稳定。所以我想强制通过有线连接建立数据库连接。我知道我想使用的源 IP 地址。

但是我如何告诉 ADO 连接它需要通过该源 IP 进行连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:03:39.773

您不需要在 ADO 中查找此功能，可以使用将您的 ADO 应用程序绑定到特定网络接口（或网络连接）的外部应用程序来完成此类任务。我过去使用[`ForceBindIP`](http://www.r1ch.net/stuff/forcebindip/).

# php - php页面无响应

> ID：13727525
> 
> 赞同：3
> 
> 时间：2012-12-05T16:12:45.193
> 
> 标签：php, javascript, mysql, ajax

我不确定哪个部分没有导致页面响应。这些页面是我的 lubuntu 机器中的主机。但是，当我从另一台 LAN 计算机访问此页面时，选择 startDate 为“2012-12-16”，endDate 为“2013-12-16”，页面在 Chrome 浏览器中冻结。知道什么时候结冰吗？当我打电话`$.get('duty.php'...`时，警报甚至无法弹出。当我直奔

> /attendence/duty.php?mode=9&startDate=2012-12-06&endDate=2013-12-06&christened=All

回报是

> []

**编辑 2 ** 找到了原因，结果证明这是另一个“愚蠢”的问题。问题是由`$.get()`. 如您所见，php 的输出是一个空数组`[]`，这没关系。然而，该`$.get()`函数并未将其视为有效响应，只是等到浏览器超时。（使用 jQuery 1.7.2）解决方法是返回带有一些内容的 json，例如`{'no','result'}`.

Apache2 访问日志

> 192.168.1.7 - - [06/Dec/2012:21:02:48 +0800] “GET /attendence/duty.php?mode=9&startDate=2012-12-06&endDate=2013-12-06&christened=All HTTP/1.1” 500 411 "-" "Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/11.10 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19"

```
$.get('duty.php',
{'mode':9,
    'startDate':$('input[name=startDate]').val(),
    'endDate':$('input[name=endDate]').val(),
    'christened':$('input[name=christened]:checked').val()},
    function(data, textStatus, jqXHR){
         alert('result reach back');
        if (typeof data === 'undefined') {
         return;
        }
        numWeek = getDiffWeek();
        tableHtml='Num Of week：'+numWeek+'<table border=1><tr>';
        tableHtml+='<td>Barcode</td><td>name</td><td>attendence</td><td>frequency</td>';
        tableHtml+='    </tr></table>';
        $('#attendenceRate').html(tableHtml);
        for(name in data){

            attendenceRate = Math.round(data[name]['times']/numWeek*100);
            memberIcon ='';

            $('#attendenceRate table').append('<tr><td>'+data[name]['barcode']+'</td><td>'+name+'</td><td>'+attendenceRate+'%</td><td>'+data[name]['times']+'</td></tr>');

        }
    }
    ,'json'
    ); 
```

**编辑**只是一个错字，应该是**duty.php**而不是 Duty.php

```
include ("lock.php");
if($_GET){
if ($_GET['mode']==9){//calculate overall christian attendence
    $startDate = $_GET['startDate'];
    $endDate = $_GET['endDate'];
    $christened=$_GET['christened'];
    if($christened=='All'){
        $christenedClause='';
    }else{
        $christenedClause= ' AND record.christened = '.$christened;
    }

    $sql = <<<EOD
    SELECT name,barcode, COUNT( * ) AS times ,christened,gender
    FROM (

    SELECT name,attendence.barcode as barcode, DATE, TIME,christened,gender
    FROM attendence, record
    WHERE attendence.barcode = record.barcode
    AND DATE
    BETWEEN  "$startDate"
    AND  "$endDate"
    $christenedClause
    GROUP BY name, DATE

    )A
    GROUP BY name 
```

排爆；

```
 $result = $link->query($sql);
    $data = array();
    $i=0;
    if($result->num_rows>0){

        while ($result2 = $result->fetch_assoc()){

            $data[$result2['name']]['times'] = $result2['times'];
            $data[$result2['name']]['barcode'] = $result2['barcode'];
            $data[$result2['name']]['gender'] = $result2['gender'];
            $data[$result2['name']]['christened'] = $result2['christened'];
            $i++;

        }
    }
    echo json_encode($data); 
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:25:35.660

您的页面正在引发服务器错误。您的`500`访问日志 ( `All HTTP/1.1" 500 411`) 中的 表示该页面无法加载。您需要修复 PHP 页面中的某些内容。

首先，我不会使用`.get()`命令，而是使用`.ajax()`命令。该`.ajax()`命令包括在失败时中止 ( `.fail()`) 和在设定的时间后停止尝试 ( `timeout:`) 的方法。

```
$.ajax({
    url: url,
    type: "GET",
    timeout: 1000,
    data: { 'mode':9,
        'startDate':$('input[name=startDate]').val(),
        'endDate':$('input[name=endDate]').val(),
        'christened':$('input[name=christened]:checked').val()
     }
}).done(function(data) {
    alert('success!');
    //  ...
}).fail(function(jqXHR, textStatus, errorThrown) {
    alert('fail :(');
    //  ...
}); 
```

其次，可以清理您的 SQL。正如@Shivan 指出的那样，查询中的许多单词（例如：、、、`date`）`time`都是`record`关键字：用作函数或数据类型的单词。如果您尝试使用这些单词之一作为列名，MySQL 会感到困惑，因此您需要使用反引号 ( ```) 字符对其进行转义。

我还将日期放在单引号 ( `'`)中

```
SELECT 
    `name`, `barcode` , COUNT( * ) AS `times`, `christened`, `gender`
FROM (
    SELECT 
        `name`, attendence.barcode as `barcode`, `DATE`, `TIME`, `christened`, `gender`
    FROM 
        `attendence`, `record`
    WHERE
        `attendence`.`barcode` = `record`.`barcode`
        AND `DATE`
        BETWEEN  '$startDate'
            AND  '$endDate'
        $christenedClause
    GROUP BY `name`, `DATE`
)A
GROUP BY name 
```

我认为这不会解决您的所有问题，因此您应该在 PHP 页面上启用错误报告。将此代码放在顶部`duty.php`：

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

如果这工作正常，那么 PHP 将显示错误消息，而不仅仅是失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T15:59:49.917

在 $data 数组中添加任何东西，这样它就不会返回空的 json。在 duty.php 末尾添加

```
...
if( count($data)==0){
$data['content']=['none'];
}
echo json_encode($data); 
```

# python - 使用 Python 2.5 构建失败

> ID：13727531
> 
> 赞同：0
> 
> 时间：2012-12-05T16:13:16.460
> 
> 标签：python, setuptools, buildout

我正在运行安装了 Python 2.5-2.7 的 Mac OSX 10.7.5。我的应用程序的依赖项之一是 newrelic 1.9.0.13（位于[此处](http://download.newrelic.com/python_agent/testing/newrelic-1.9.0.13.tar.gz)）。当我为 Python 2.6 或 2.7 引导和构建时，一切都完美无缺；但不是当我指定 2.5 时：

```
[buildout]
...
python = python

[python]
executable = /usr/bin/python2.5 
```

使用此配置，运行 buildout 失败并出现以下错误：

```
Installing newrelic.
Getting distribution for 'newrelic==1.9.0.13'.
newrelic/lib/simplejson/_speedups.c: In function ‘encoder_listencode_obj’:
newrelic/lib/simplejson/_speedups.c:2263: warning: comparison of distinct pointer types lacks a cast
newrelic/lib/simplejson/_speedups.c:2263: warning: passing argument 2 of ‘PyType_IsSubtype’ from incompatible pointer type
zip_safe flag not set; analyzing archive contents...
newrelic.admin: module references __file__
newrelic.console: module references __file__
newrelic.bootstrap.sitecustomize: module references __file__
newrelic.core.environment: module references __file__
newrelic.core.thread_profiler: module references __file__
newrelic.lib.__init__: module references __path__
While:
  Installing newrelic.
  Getting distribution for 'newrelic==1.9.0.13'.
Error: Couldn't install: newrelic 1.9.0.13 
```

easy_installing tarball 直接产生相同的消息，但是安装成功。这并不特定于 newrelic 包；如果我删除该依赖项，PIL 也会发生同样的事情（同样，仅在使用 Python 2.5 时）。

如果我改为使用分发，则在运行 buildout 时会出现不同的错误：

```
Traceback (most recent call last):
  File "./bin/buildout", line 17, in <module>
    import zc.buildout.buildout
  File "/Users/mjt/.buildout/eggs/zc.buildout-1.6.3-py2.7.egg/zc/buildout/buildout.py", line 40, in <module>
    import zc.buildout.download
  File "/Users/mjt/.buildout/eggs/zc.buildout-1.6.3-py2.7.egg/zc/buildout/download.py", line 20, in <module>
    from zc.buildout.easy_install import realpath
  File "/Users/mjt/.buildout/eggs/zc.buildout-1.6.3-py2.7.egg/zc/buildout/easy_install.py", line 75, in <module>
    pkg_resources.Requirement.parse('setuptools')
AttributeError: 'NoneType' object has no attribute 'location' 
```

（我不确定这是否相关；我将其包括在内以防万一。）

为什么软件包无法安装，我该如何解决？

几点注意事项：

*   无论我使用配方 (zc.recipe.egg) 包含包还是将其`install_requires`列在我的 setup.py 列表中，都会发生错误
*   包下载成功；错误发生在安装过程中。
*   相同的配置在 Python 2.6 和 2.7 中无需更改即可工作

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:33:19.797

新的 Bootsrtrap.py 发布，旧的无法工作。

尝试 python bootstrap.py -v 1.7.0 使旧的正确运行或使用[新的](http://downloads.buildout.org/2/bootstrap.py)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T00:25:08.410

@Cyril，您的解决方案对我很有用！谢谢。

我以前遇到过这个问题，并且能够通过换入更新的 bootstrap.py 文件来解决它，但是由于我的一些构建在周末开始神秘地失败，这次我*费心*查看 bootstrap.py代码。

我发现如果您不指定版本（zc.buildout 版本），bootstrap.py 将下载最新版本，这可能与您的 bootstrap.py 版本不兼容（很遗憾，它不可能*很多*有关此的更多信息）。

```
python bootstrap.py --version 1.7 # compatible zc.buildout version number 
```

我敢说最近有几个人会收到这个错误，因为zc.buildout 的[2.0 版](http://pypi.python.org/pypi/zc.buildout/2.0.0#id3)刚刚发布。有几个地方可以下载 bootstrap.py，但[http://downloads.buildout.org/](http://downloads.buildout.org/)是官方来源。道德是，如果可以的话，请保持最新。

# mysql - 我需要在 MySQL 中输入什么类型的字段来输入歌词？

> ID：13727532
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:13:31.133
> 
> 标签：mysql, field

我有一张表，上面有歌名、艺术家等，一切正常的文件。我有一个歌词字段，我想用它来存储歌词，目前设置为“blob”。如果我输入长文本，它总是失败。我应该把它设置成什么？

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL        server version for the right syntax to use near 't real, She ain't gonna be able to love you     like I will, She is a stranger, Y' at line 2 
```

没关系，我想通了。我需要在输入文本之前添加 mysql_real_escape_string() 。更正，它存储所有空白空间。我错过了什么？

这里的歌词示例：

> “有传言说”
> 
> 呜呜[重复]
> 
> 她，她不是真实的，她不会像我一样爱你，她是一个陌生人，你和我有历史，或者你不记得了吗？当然，她什么都有，但是，宝贝，这真的是你想要的吗？
> 
> 祝福你的灵魂，你的头在云端，她把你当傻子，而且，男孩，她让你失望，她让你的心融化，但你冷到骨子里，现在谣言有她不再得到你的爱，
> 
> 谣言有它（谣言）[x8]
> 
> 她，年龄只有你的一半，但我猜这就是你留下来的原因，我听说你一直想念我，你一直在告诉别人你不应该说的话，就像我们爬出来的时候她不在身边，你没听说过谣言吗？
> 
> （保佑你的灵魂！......）保佑你的灵魂，你的头在云端，你把我当傻子，而且，男孩，我要让我失望，你让我的心融化，但我我冷到了骨子里，但有传言说我是你要离开她的那个人，
> 
> 谣言有它（谣言）[x8]
> 
> 所有这些话在我耳边低语 讲一个我不敢听的故事 只是因为我说了，并不代表我是认真的 人们说疯狂的话 只是因为我说了，不要不是说我是认真的，只是因为你听到了，
> 
> 谣言有它（谣言）[x14]
> 
> 但有传言说他是我要离开你的那个人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:17:51.663

你可能想看看这个，看看每种文本类型可以有多长：

[http://www.electrictoolbox.com/maximum-length-mysql-text-field-types/](http://www.electrictoolbox.com/maximum-length-mysql-text-field-types/)

但这里是价值观：

```
TINYTEXT    256 bytes    
TEXT    65,535 bytes            ~64kb
MEDIUMTEXT  16,777,215 bytes    ~16MB
LONGTEXT    4,294,967,295 bytes ~4GB 
```

那么，为什么不使用`TEXT`代替`blob`呢？

此外，您尝试插入或更新的方式可能只是错误。显示一些代码将非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:35:56.777

我的问题是在存储或输出信息之前我需要有addslashes() 和stripslashes()。这解决了我的问题。谢谢！

# python - 使用 pygtk 执行 Python 而不出现终端

> ID：13727533
> 
> 赞同：1
> 
> 时间：2012-12-05T16:13:32.180
> 
> 标签：python, terminal, pygtk

我在使用 pygtk 时遇到了一点问题，我有这个项目是用 python 编写的，现在程序可以正常工作，我已经添加了使用终端执行的字符串：

```
#! /usr/bin/env python 
```

现在我想知道如何执行这个脚本来隐藏双击文件后弹出的终端。

有谁知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:23:54.730

尝试将其保存为 .pyc 并执行该文件。

看看[这个](http://docs.python.org/2/library/py_compile.html)和[这个](http://docs.python.org/2/library/compileall.html)。

基本上是这样的：

```
import py_compile
py_compile.compile('abc.py') 
```

# heroku - Heroku 生产应用程序的定义是什么？

> ID：13727535
> 
> 赞同：6
> 
> 时间：2012-12-05T16:13:41.647
> 
> 标签：heroku

我有一个在 Heroku 上运行良好的应用程序，但它被注册为“开发”应用程序，尽管应用程序仪表板和状态页面，我无法找到任何关于“生产”应用程序的正式定义对两者进行了非常明确的区分。

我遇到了对两者状态的[这种](https://devcenter.heroku.com/articles/heroku-status)解释，这表明差异是隐式的（基于使用）而不是显式的（基于某些配置/设置）：

> 生产问题是那些影响运行、稳定的生产应用程序的问题，这些应用程序至少有**两个 Web dyno 并使用生产级数据库**（或根本没有数据库）。包括 dynos、数据库、HTTP 缓存、其他平台组件（DelayedJob 工作程序、调度程序等）和路由。
> 
> 开发问题是那些影响部署工作流和工具健康的问题。包括部署（git push、gem 安装、slug 编译等）、通用 git 活动、命令行 gem/API（扩展/缩减、更改配置等）和相关服务（rake、控制台、db push/pull与 TAPS 等）。开发还包括特定于非生产应用程序操作的问题，例如**空闲的免费 1-dyno 应用程序和开发数据库的操作**。

甚至这些解释都提到了开发数据库和生产数据库之间的神秘差异，尽管在任何地方都没有对差异的相应解释。9pcm 的“基本”Postgres 计划是“生产”数据库吗？

**[更新]**

现在，您的 Heroku 帐户内的应用仪表板上有一个“运行生产检查”链接，其中显示了确定应用状态的步骤。附截图：

![](../Images/4dfecc2446f42b3c6dc4098e2034fc0e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T19:25:44.370

我一直在尝试为您的问题找到相同的答案。

到目前为止，我无法通过 Heroku Postgresql 收集共享/开发/入门数据库数据库计划不被视为生产，只有 Crane 和更高版本才考虑生产级数据库计划。

> Heroku Postgres 生产层从 Crane 开始，一直延伸到 Mecha 计划。Shared、Dev 和 Starter 计划不是生产数据库。
> 
> [https://devcenter.heroku.com/articles/maximizing-availability](https://devcenter.heroku.com/articles/maximizing-availability)

此外，Heroku 似乎有一个插件可以检查您的应用程序是否符合他们的准则：

> [https://github.com/heroku/heroku-production-check](https://github.com/heroku/heroku-production-check)

我不确定您是否使用 Crane 数据库从 2（白天）和 1（晚上）放大和缩小网络测功机，如果这在 Heroku 眼中被视为“生产”。

希望有帮助！

# c# - Caliburn Micro WinRT 导航和导体

> ID：13727536
> 
> 赞同：2
> 
> 时间：2012-12-05T16:13:44.310
> 
> 标签：c#, windows-runtime, winrt-xaml, caliburn.micro

我有一个 WinRT 应用程序，它使用 caliburn.micro INavigationService (FrameAdapter) 运行良好。问题是我的应用程序中的所有页面都是完整页面，并且它们重复了很多视图 xaml 标记。我想做的是拥有更多的“MasterPages”类型的体系结构，其中我有一个 shell 视图，它定义了主布局并包含一个 ContentControl，并使用导体模式来切换 ContentControl 的内容。过去，我使用 WPF 和 Silverlight 在这种架构上取得了成功，所以我认为在 WinRT 中是可能的。

问题是导航基础设施（使用 FrameAdapter）和使用 ContentControl 绑定到导体的 ActiveItem 的导体基础设施（如 SimpleNavigation 示例）之间似乎存在脱节。

在指挥场景中，我使用了 ActivateItem：

```
ActivateItem(new MyViewModel()); 
```

但对于 INavigationService，我使用 NavigateToViewModel：

```
navigationService.NavigteToViewModel<MyViewModel>(); 
```

据我所知，两者似乎没有联系。

我的一个想法是创建一个实现 INavigationService 并基本上处理子屏幕的创建和激活的 ConductorNavigationService。虽然看起来可能看起来不是很直接，所以我想我会检查一下在 caliburn.micro 中是否有已经支持的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:07:16.123

好的，我的理解可能有点紧张，因为我没有使用过 WinRT 或`INavigationService`但我认为`Frame`它是 RT 的一部分，并`INavigationService`为帧提供视图模型分辨率和导航。

我的另一个假设是你的框架有点像你的指挥，当你在框架上调用'Navigate()'时，它只是用新指定的内容替换框架的内容。如果是这种情况，那么 CM 正在为视图模型执行视图优先分辨率。

既然你想走指挥路线，听起来你想放弃 CM 实现，`INavigationService`只是滚动你自己来处理`INavigationService`导航方法（例如跳过`Frame`s`Navigate()`方法）。

快速查看 CM 源代码会发现，所有`NavigationService`正在做的事情就是处理`Navigate`帧上的事件，然后进行 VM 解析并设置视图（指挥可能已经这样做了）。您需要做的就是确保您的`INavigationService`实现只是将指定的视图加载到外壳中，而不是在框架中导航

您可能只需要窃取构造函数代码`NavigationService`并更改 的实现`Navigate()`，然后只需调用`ActivateItem(x)`您的 shell，其中 x 是 VM 的实例。CM 将负责其余的工作（我认为 CM boostrapper 也已经设置了您的根“框架”，因此您不必担心这一点）。

例如

一个实现可能看起来更像这样（请记住，这只是我拼凑起来的东西，可能是赤裸裸的谎言！）：

```
public class NewFrameAdapter : INavigationService
{
    private readonly Frame frame;
    private readonly IConductActiveItem shell;
    private event NavigatingCancelEventHandler ExternalNavigatingHandler = delegate { };

    public NewFrameAdapter(Frame frame)
    {
        this.frame = frame;

        // Might want to tighten this up as it makes assumptions :)
        this.shell = (frame as FrameworkElement).DataContext as IConductActiveItem;
    }

    public bool Navigate(Type pageType)
    {
        // Do guardclose and deactivate stuff here by looking at shell.ActiveItem
        // e.g.
        var guard = shell.ActiveItem as IGuardClose;

        if (guard != null)
        {
            var shouldCancel = false;
            guard.CanClose(result => { shouldCancel = !result; });

            if (shouldCancel)
            {
                e.Cancel = true;
                return;
            }
        }

        // etc

        // Obviously since the guard is probably async (assume it is, if not you are ok to continue!) you'd have to not call this code right 
        // here but I've just stuck it in here as an example

        // edit: looking at the code above (the guard code) it looks like this is all sync so the below code should be fine

        // You might get away with calling shell.ActivateItem(pageType) as I'm not sure
        // if the viewmodel binder in RT would resolve this all for you, but if it doesnt...

        // Init the view and then resolve the VM type
        ViewLocator.InitializeComponent(pageType);

        var viewModel = ViewModelLocator.LocateForView(pageType);

        // Activate the VM in the shell)
        shell.ActivateItem(viewModel);
    } 
```

以自己的方式滚动应该不会太难。这对你有帮助吗？

那么您的 XAML 将非常简单：

```
<Frame blah blah>
  <SomeStaticContent />
  <ContentControl x:Name="ActiveItem" /> <!-- The dynamic bit... -->
  <SomeMoreStaticContent />
</Frame> 
```

我认为这可能是视图优先和视图模型优先的混合体，因为您的根`Frame`将使用视图优先，而您的指挥将使用`ActivateItem()`哪个视图模型，然后在绑定器启动时解析视图，但如果我的假设没问题，它应该可以工作

# objective-c - 比较obj-c中的两个字符串

> ID：13727538
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:13:51.117
> 
> 标签：objective-c, if-statement, nsstring

> **可能重复：**
> [如果“a == b”在比较两个 NSString 对象时为假？](https://stackoverflow.com/questions/8598599/if-a-b-is-false-when-comparing-two-nsstring-objects)

比较两个字符串的简单问题：

```
if (string1 == string2)
{
    NSLog(@"it is equal!");
} 
```

就是这样，但它对我不起作用它总是`!=` 我测试它，`string2 = string1;`但它不会起作用。

所以我进行了测试`if (string1 isEqualToString:string2)`，但在这种情况下存在语法错误

谢谢你的帮助！

问候柯蒂斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:15:26.560

`==`比较对象的地址，而不是它们的内容。两个不同的对象显然永远不会有相同的地址。

要比较字符串，请使用`NSString`'s`isEqualToString:`方法：

```
if ([string1 isEqualToString:string2]) {
    NSLog(@"it is equal");
} 
```

注意方括号`[ ]`。这是发送消息（即调用函数）的正确 Objective-C 语法。

要普遍比较对象的内容，请使用`isEqual:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:15:04.020

使用`if ([url isEqualToString:turl])`. 这是正确的语法，使用 [] 标记表示您正在向对象发送消息。

# wpf - SetupDiGetClassDevs 在 XP 上导致错误

> ID：13727541
> 
> 赞同：0
> 
> 时间：2012-12-05T16:13:52.547
> 
> 标签：wpf, windows-xp, setupapi

我有一个由另一个 WPF 应用程序调用的 Win32 应用程序。在 Win32 托盘应用程序中，我正在注册 USB 设备通知。在此我使用对 SetupDiGetClassDevs 的 API 调用，以便我可以查找任何连接的设备。

在 XP 上，WIN32 应用程序崩溃并出现错误：“过程入口点 RegOpenKeyExW 无法位于动态链接库 KERNAL32.dll 中”

在 win7 和 win8 上，API 调用功能正常。该应用程序基于 Win7 VS2010 构建。

在 XP sp3 上调用 SetupDIGetClassDevs 有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:12:27.363

根据您的问题，我不确定是否看到 SetupDiGetClassDevs() 和 RegOpenKeyExW() 之间的直接联系。但是，此[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms724897%28v=VS.85%29.aspx)显示 RegOpenKeyEx() 位于 Advapi32.dll 而不是 Kernel32.dll 中。这会是你焦虑的根源吗？

# lync - Lync 2010 事件监控和呼叫控制 API

> ID：13727546
> 
> 赞同：1
> 
> 时间：2012-12-05T16:14:31.350
> 
> 标签：lync, lync-2010, lync-server-2010

我的目标是收听 Lync server 2010 的所有事件（im/video/audio/appshare call、presence）并控制（转移、会议、记录）呼叫。

如果我们使用 UCMA 来做同样的事情，呼叫必须首先到达应用程序，然后从那里完成路由。基本上，我们在这里充当 Back2Back 用户代理。

我不想点这个。我想要的只是使用一些套接字/API 来监听所有事件以获取事件并发送一些命令来控制调用。（就像我们如何使用 TSAPI 或在 FreeSwitch 中使用 AVAYA 一样）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T12:18:26.787

[这篇文章](http://www.codelync.com/an-overview-of-the-lync-apis/)是对您可用的所有不同 API 的一个很好的总结。

希望在阅读之后您能够回答您自己的问题，并了解为什么 Willem Duncan 建议使用 Lync Server API 作为捕获您需要的所有信息的一种方式。

不要忘记，您的解决方案可能最好在多个应用程序中实现。例如，您可以首先使用服务器 API 编写监控内容，然后创建一个 UCMA 应用程序来进行记录。然后，您可以将要录制的呼叫路由到此。

另外，如果您只是在寻找可行的方法，我相信有适用于 Lync 的商业通话录音解决方案。

# php - 使用 JSONArray 中的值的 Mysql 查询

> ID：13727550
> 
> 赞同：0
> 
> 时间：2012-12-05T16:14:38.013
> 
> 标签：php, mysql, post

我将 JSONArray.toString() 发布到 php 文件中。JSONArray 包含一组 id 值。我想做一个只返回 jsonarray 中包含 id 的行的 mysql 查询。我下面的方法不起作用。还有其他方法吗？

```
$jsonarray= $_POST["ids"];
$query = mysql_query("SELECT * FROM table WHERE id IN $jsonarray")or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:17:18.650

如果我们有 JSON 数组的示例会有所帮助，但是，您应该将 JSON 数组解码为逗号分隔的列表以与 IN 一起使用。

```
$jsonarray = $_POST["ids"];
$ids = implode(",", json_decode($jsonarray,true));

$query = mysql_query("SELECT * FROM table WHERE id IN ($ids)")or die(mysql_error()); 
```

此外，您应该使用 mysqli 或 PDO_MySQL 进行新开发：

> 建议使用 mysqli 或 PDO_MySQL 扩展。不建议使用旧的mysql扩展进行新的开发。下面提供了详细的特征比较矩阵。所有三个扩展的整体性能被认为是大致相同的。尽管扩展的性能只占 PHP Web 请求总运行时间的一小部分。通常，影响低至 0.1%。

**相关阅读：**

*   [http://php.net/manual/en/mysqlinfo.api.choosing.php](http://php.net/manual/en/mysqlinfo.api.choosing.php)
*   [http://www.php.net/manual/en/mysqlinfo.library.choosing.php](http://www.php.net/manual/en/mysqlinfo.library.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:17:43.577

回显 $jsonarray 的内容，当您检查 MySQL 查询的语法时，您将看到错误

# javascript - 构建选择器时，如果包含空间，我会收到错误

> ID：13727551
> 
> 赞同：0
> 
> 时间：2012-12-05T16:14:39.977
> 
> 标签：javascript, jquery

在构建选择器时，我希望有一个空间来指示要在由两个类定义的元素中找到一个类。我确信我在其他地方使用过这种语法。

但这次我得到：

> 错误：语法错误，无法识别的表达式：" [Break On This Error] throw new Error("
> 语法错误，无法识别的表达式：" + msg );

这是选择器：

```
tag = $(".m_3.current_Status .smoothie_Text").prop("tagName"); 
```

如果我删除 .smoothie_Text 之前的空格，语法错误就会消失，但显然标签是未定义的，因为它找不到。

**编辑**

```
<td class="m_1 current_Status" style="background-color: rgb(255, 127, 0); color: rgb(255, 255, 255);">
<div class="smoothie hasSVG">
<input class="smoothie_Text" type="hidden" value="Super Power">
<svg version="1.1" stroke-width="0.501" stroke-linejoin="bevel" fill-rule="evenodd" overflow="visible" width="10" height="10" viewBox="0 0 236.25 225">
</div>
</td> 
```

**编辑 - 解决方案（#2 缩短）**

注意 - 最后我没有使用逗号分隔的方法。我不能确定为什么以前尝试在由空格分隔的类组中失败，但是，我怀疑提交的选择是用引号引起来的。

```
$(".smoothie").on("mouseover", function(event) {

    var containerElements = $(event.target).parentsUntil($("tr").parent())
         .map(function () { 
             return this.className; 
         })
         .get().join(",");

    containerArray = containerElements.split(",");
    row_Class = containerArray.pop();
    row_Classes = row_Class.split(" ");
    container_Class = containerArray.pop();
    container_Classes = container_Class.split(" ");

    var offset = $(event.target).offset();

    value = $("." + row_Classes[0] + "." + row_Classes[1] + " ." + container_Classes[0] + "." + container_Classes[1] + " .smoothie_Text").attr("value");

    $("#flavour_Text").html("<a>" + value + "</a>");
    $("#flavour_Text").css("top", offset.top);
    $("#flavour_Text").css("left", offset.left);
    $("#flavour_Text").css("width", (value.length * 0.6) + "em")
    $("#flavour_Text").css("display","block");

    // this dsiplays all. Needs refinement

}).svg({loadURL: '../_public/_icons/smoothie.svg'});   

$(".smoothie").on("mouseout", function(event) {
    $("#flavour_Text").html("");
    $("#flavour_Text").css("display","none");
}).svg({loadURL: '../_public/_icons/smoothie.svg'}); 
```

# c++ - 如何将负多边形与内部负多边形连接起来？

> ID：13727552
> 
> 赞同：4
> 
> 时间：2012-12-05T16:14:42.343
> 
> 标签：c++, boost, polygon

我目前正在从事一个私人项目，该项目依赖于使用 Boost C++ 库对多边形进行的一些操作。

我目前正在尝试使用内部多边形/负多边形概念。

我现在需要做的是连接三个多边形，其中两个有一个正（逆时针）外多边形和一个负（顺时针）内多边形。

第三个是负多边形，一个具有负面积的新多边形对象 - 指向顺时针方向。这就是我不完全确定如何处理这种情况的地方。

这是这三个多边形的图片。连接左上多边形和右下多边形的中间那个是负多边形。

![包括负数的多边形](../Images/d6890db960c71a431e65204ac5649939.png)

现在我想做的是通过联合函数连接所有三个多边形。我期望 union 做的是切掉多边形 1 和 3（正多边形）的正部分，并返回剩余的两个多边形 1 和 3。

我实际上得到的是我的多边形 1 和 3 未触及，因为不会有负多边形 2。

任何帮助将不胜感激。

编辑：

我需要得到的是矢量而不是位图或图片或其他任何东西。这些图片只是用来更好地可视化我拥有的和需要的。

这三个多边形实际上不超过 x 和 y 点的向量。

这是我期望的所有三个多边形联合的正确结果的图片：

Edit2：更正了结果

![结果](../Images/fb300f05d8eb32ca9d95557e6db334ba.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-19T19:56:27.323

你希望工会如何运作？[通常多边形 1 和 2 的联合会产生多边形 3](https://i.stack.imgur.com/GEGOS.png)，但我怀疑对于您的用例，您希望它产生多边形 4。如果是这种情况，您可以简单地对所有顺时针路径进行联合，然后执行逆时针路径的并集，然后取前者与后者的差异。如果您希望联合产生多边形 3，那么我认为没有一致的方法可以做您想做的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T16:36:31.193

好的计划是将您的多边形视为（布尔值）位图：每个多边形都将被 blit 到 (R,R)->bool 类型的位图。一旦它是位图格式，负多边形只是布尔运算而不是操作：

```
class Bitmap { virtual bool Map(float x, float y) const=0; };
class AndNot : public Bitmap {
public:
   AndNot(Bitmap &bm1, Bitmap &bm2) : bm1(bm1), bm2(bm2) { }
   bool Map(float x, float y) const {
      return b1.Map(x,y) && !b2.Map(x,y);
   }
private:
   Bitmap &bm1, &bm2;
}; 
```

# php - PHP / jQuery 上传

> ID：13727564
> 
> 赞同：0
> 
> 时间：2012-12-05T16:15:11.630
> 
> 标签：php, jquery, file, upload

有谁知道uploadify的好选择。我为他们的 HTML 版本付费，但这也不是 flash 版本在 IE9 中的工作。惭愧，这正是我所追求的。

有没有类似的产品？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:20:10.410

我也无法让 uploadify/uploadifive 在我的项目中工作

我最终使用了[Fine Uploader](http://fineuploader.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T16:18:20.037

Plupload 将是一个不错的选择 - [http://www.plupload.com/](http://www.plupload.com/)

FancyUpload 是另一个不错的 - [http://digitarald.de/project/fancyupload/](http://digitarald.de/project/fancyupload/)

# c# - netHttpsBinding 与自定义 UserNamePasswordValidator

> ID：13727569
> 
> 赞同：0
> 
> 时间：2012-12-05T16:15:27.167
> 
> 标签：c#, wcf, .net-4.5

几天来，我一直在尝试让自定义[UserNamePasswordValidator](http://msdn.microsoft.com/en-us/library/system.identitymodel.selectors.usernamepasswordvalidator.aspx)与我的[netHttpsBinding 一起](http://msdn.microsoft.com/en-us/library/system.servicemodel.nethttpsbinding.aspx)用于 .Net 4.5 WCF Web 服务。我的问题是验证器永远不会被调用或强制执行，因此任何凭据（或没有凭据）都可以访问。

我很确定配置是正确的，因为我可以为 wsHttpBinding 使用几乎相同的配置并且它可以工作。这是web.config ...

```
<services>
  <service name="MyNamespace.MyService" behaviorConfiguration="serviceBehavior">
    <endpoint address="" binding="wsHttpBinding" contract="MyNamespace.IMyService" />
    <!-- This one doesn't authenticate 
    <endpoint address="" binding="netHttpsBinding" contract="MyNamespace.IMyService" />
    -->
    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
  </service>
</services>
<bindings>
  <wsHttpBinding>
    <binding>
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName"/>
      </security>
    </binding>
  </wsHttpBinding>
  <netHttpsBinding>
    <binding>
      <security mode="TransportWithMessageCredential">
        <message clientCredentialType="UserName" />
      </security>
    </binding>
  </netHttpsBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="MyNamespace.MyValidator, MyAssembly"/>
      </serviceCredentials>
      <serviceMetadata httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

如果这很重要，这里是验证器......

```
using System.IdentityModel.Selectors;
using System.ServiceModel;
namespace MyNamespace
{
    public class MyValidator : UserNamePasswordValidator
    {
        public override void Validate(string userName, string password)
        {
            if (null == userName || null == password)
                throw new FaultException("Username or Password were not set.");
            if (!(userName == "MyUser" && password == "MyPassword"))
                throw new FaultException("Unknown Username or Incorrect Password");
        }
    }
} 
```

有谁知道为什么 UserNamePasswordValidator 不能与 netHttpsBinding 一起使用？或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:12:54.930

这并没有直接回答这个问题，但我最终放弃了 netHttpsBinding 以使用二进制编码进行自定义绑定。据我所知，它完成了同样的事情。我的配置的简化示例...

```
<services>
  <service name="MyNamespace.MyService" behaviorConfiguration="serviceBehavior">
    <endpoint address="" binding="customBinding" bindingConfiguration="CustomBinding" contract="MyNamespace.IMyService" />
    <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange" />
  </service>
</services>
<bindings>
  <customBinding>
    <binding name="CustomBinding">
      <security authenticationMode="UserNameOverTransport"></security>
      <binaryMessageEncoding />
      <httpsTransport />
    </binding>
  </customBinding>
</bindings>
<behaviors>
  <serviceBehaviors>
    <behavior name="serviceBehavior">
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="MyNamespace.MyValidator, MyAssembly"/>
      </serviceCredentials>
      <serviceMetadata httpsGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T22:48:11.873

尝试使用 NetHttpBinding 而不是 NetHttpsBinding。如果您保留 TransportWithMessageCredential，您仍然可以获得所有正确的安全模式设置。我试过这个并且它有效。但是，是的，如果我使用 NetHttpsBinding，我可以重现这种行为。

# python - 删除列表中具有相似特征的项目

> ID：13727572
> 
> 赞同：0
> 
> 时间：2012-12-05T16:15:33.203
> 
> 标签：python, list

假设我有一个嵌套列表，如下所示：

```
[[['a'],[24],214,1] ,[['b'],[24],312,1] ,[['a'],[24],3124,1] , [['c'],[24],34,1]] 
```

`item[2]`并假设我想从列表中删除所有项目，除了在共享相同字母的项目中具有最大值的项目`item[0]`

因此，例如在前面的列表中，我有两个项目共享相同的字母`item[0]`：

```
[ ['a'],[24],214,1], [['a'],[24],3124,1] ] 
```

我想删除前者，因为它的值较低`item[2]`。

输出列表应为：

```
[ [['b'],[24],312,1] ,[['a'],[24],3124,1] , [['c'],[24],34,1] ] 
```

你能建议我一个紧凑的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:45:01.903

如果返回的顺序无关紧要，可以尝试使用`groupby`from`itertools`将项目按第一个元素分组（按第一个元素排序后），然后用函数拉出最大值`max`（另外，需要注意的是，这个返回一个新列表，而不是就地修改）：

```
In [1]: from itertools import groupby

In [2]: l = [[['a'],[24],214,1] ,[['b'],[24],312,1] ,[['a'],[24],3124,1] , [['c'],[24],34,1]]

In [3]: result = []

In [4]: for k, g in groupby(sorted(l, key=lambda x: x[0]), key=lambda x: x[0]):
   ...:     result.append(max(g, key=lambda m: m[2]))
   ...:
   ...:

In [5]: result
Out[5]: [[['a'], [24], 3124, 1], [['b'], [24], 312, 1], [['c'], [24], 34, 1]] 
```

稍微扩展一下，如果要保持原始顺序，可以`l`通过仅包含 are in 的那些项目进行修改`results`，这将保持顺序：

```
In [6]: l = [i for i in l if i in result]

In [7]: l
Out[7]: [[['b'], [24], 312, 1], [['a'], [24], 3124, 1], [['c'], [24], 34, 1]] 
```

并将其组合成一个真正可憎的单线，你可以（但可能不应该:)）这样做：

```
In [10]: l = [[['a'],[24],214,1] ,[['b'],[24],312,1] ,[['a'],[24],3124,1] , [['c'],[24],34,1]]

In [11]: [i for i in l if i in [max(g, key=lambda m: m[2]) for k, g in groupby(sorted(l, key=lambda x: x[0]), key=lambda x: x[0])]]
Out[11]: [[['b'], [24], 312, 1], [['a'], [24], 3124, 1], [['c'], [24], 34, 1]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:05:08.727

一些保留原始顺序的选项，仅删除比较器值低于最大值的任何项目。

```
def filter1(items):
    first = set(item[0][0] for item in items)
    compare = dict((f, max(item[2] for item in items if item[0][0] == f)) 
        for f in first)
    return  [item for item in items if item[2] >= compare[item[0][0]]]

def filter2(items):
    compare = {}
    for item in items:
        if ((item[0][0] in compare and item[2] > compare[item[0][0]])
            or (not item[0][0] in compare)):
            compare[item[0][0]] = item[2]
    return [item for item in items if item[2] >= compare[item[0][0]]]

def filter3(items):
    return [i for i in items if i[2] >= 
        max(j[2] for j in items if j[0][0]==i[0][0])] 
```

如果您有一个大列表，filter3 最短但最慢。我猜 filter2 会是最快的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:40:24.667

由于您的问题令人困惑，我已经给出了删除最大和最小元素的可能性

```
>>> def foo(some_list, fn = max):
    #Create a dictionary, default dict won;t help much as 
    #we have to refer back to the value for an existing key
    #The dictionary would have item[0] as key
    foo_dict = dict()
    #Iterate through the list
    for e in some_list:
            #Check if the key exist
        if e[0][0] in foo_dict:
                    #and if it does, find the max of the existing value and the 
                    #new element. The key here is the second item
            foo_dict[e[0][0]] = fn(foo_dict[e[0][0]], e, key = lambda e:e[2])
        else:
                    #else consider the new element as the current max
            foo_dict[e[0][0]] = e
    return foo_dict.values()

>>> foo(somelist)
[[['a'], [24], 3124, 1], [['c'], [24], 34, 1], [['b'], [24], 312, 1]]
>>> foo(somelist,min)
[[['a'], [24], 214, 1], [['c'], [24], 34, 1], [['b'], [24], 312, 1]] 
```

# php - 如何检查用户是否在另一台计算机上登录？

> ID：13727575
> 
> 赞同：1
> 
> 时间：2012-12-05T16:15:38.027
> 
> 标签：php

我有 MYSQL 表，里面有用户。用户可以使用 PHP 代码登录。他们的名字存储在 SESSION 变量中。如何检查用户是否已经在另一台计算机上登录以禁止他们再次登录？

**设想：**

计算机 1：
USER1 已登录

计算机 2：
USER1 尝试再次登录，但他们不能，因为他们已经在另一台计算机上登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:22:43.360

Try to create a column "isLogged" in the databank and set it to true o false when the user starts or end a session. I was doing that and works fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:17:31.487

为了确保他不会在另一台计算机上再次登录，您可以针对数据库更新一个字段以将他标记为已登录，然后在用户尝试登录时检查此字段。

```
<?php

if ($_SESSION["MySession"] != "") {
  //Update database field to set this user as actively browsing. 
  //Also set a timestamp so you know when he last visited a page.
}

?> 
```

但是，用户必须在另一台计算机上物理注销才能在新计算机上再次登录。您也可以实现一个计时器来清除数据库中的字段，这样他就可以在一定时间不活动后登录。

您可以创建一个 cron 并每 5 分钟运行一次，或者您可以再次在页面顶部运行一些代码，将所有字段设置为 false 在过去几分钟内`user_logged_in`它们没有处于活动状态。`x`

所以按顺序：

1.  用户登录网站，`$_SESSION["UserName"]`设置为用户名。
2.  在每个页面的顶部，您检查会话以查看用户名会话是否有效并更新数据库中的用户表以表明他正在积极浏览（使用时间戳字段）。
3.  检查用户表并清除用户在 X 分钟内处于非活动状态的所有登录标志。

# java - Java POI SS 用户模型转换 CellStyle

> ID：13727578
> 
> 赞同：0
> 
> 时间：2012-12-05T16:15:50.277
> 
> 标签：java, apache-poi

我将 HSSF 格式转换为 SS 模型。

在我们的代码中有一个部分，我们检查单元格样式并进行一些比较。

在新的 ss 模型中，没有像 HSSF 模型中那样获取样式名称的方法。

我们正在做这样的事情：

```
 private static CellStyle findStyleByName(Workbook wb, String styleName)
{
    for ( short i = 0; i < wb.getNumCellStyles(); i++ )
    {
        CellStyle style = wb.getCellStyleAt(i);

        if ( styleName.equals(style.getUserStyleName()) )
        {
            return style;
        }
    }

    return null;
} 
```

这失败了，因为它只`style.getUserStyleName()`与它无效`CellStyle``HSSFCellStyle`

是否有替代方法或方法可以使用 ss 用户模型来做到这一点？

# ios - 访问对象数组中对象的属性

> ID：13727579
> 
> 赞同：0
> 
> 时间：2012-12-05T16:15:53.533
> 
> 标签：ios, arrays

我有一个显示在表格视图上的项目列表。每个项目都有其属性，例如名称、图片、等级等。我的目标是，每次用户选择一行时，都会将项目及其属性添加到新列表中。

我创建了一个名为的新列表`listOfBugs`，因为我希望它是全局的，所以我在里面分配并初始化了它`viewDidLoad`。（这样做合适吗？）

这是我的代码：

主视图控制器.h

```
@interface MasterViewController : UITableViewController
{
    NSMutableArray *listOfBugs;
}
@property (strong) NSMutableArray *bugs; 
```

主视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    listOfBugs = [[NSMutableArray alloc]init];
    self.title = @"Scary Bugs";
}
...
...
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ScaryBugDoc *bug = [self.bugs objectAtIndex:indexPath.row];

    UIAlertView *messageAlert = [[UIAlertView alloc]
                                 initWithTitle:@"Row Selected" message:bug.data.title delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    [messageAlert show];
    [listOfBugs addObject:bug];
    NSLog(@"this is %@",listOfBugs);

} 
```

使用`NSLog`我可以看到添加了对象：

```
ScaryBugs[1195:11303] this is <ScaryBugDoc: 0x75546e0>
2012-12-05 17:45:13.100 
ScaryBugs[1195:11303] this is <ScaryBugDoc: 0x75546e0> 
```

我有几个问题。

1.如何访问数组 listOfBugs 内对象的属性？

**更新：**这对我有用：

```
NSLog(@"this is %@",((ScaryBugDoc *)[listOfBugs objectAtIndex:0]).data.title); 
```

但我无法`listOfBugs`从另一个班级访问。

我按照建议将它变成了一个属性，以使我的生活更轻松，但仍然无法从另一个班级访问它。例如 in`listOfBugsViewController.m` `return [_listOfBugs count];`会给我错误 Use of undeclared identifier '_listOfBugs'

2.我想用自定义列表填充表格视图，我该怎么做？

完成后，我想将列表保存为 plist，并轻松地从中添加和删除对象，因此我需要考虑这一点。

[这是我基于的代码，我只做了一些调整来创建新列表](http://cdn5.raywenderlich.com/downloads/ScaryBugs1b.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:47:14.540

这真的是两个问题：

**1）如何使我的财产成为其他班级可以访问的公共财产？**

你这样做就像你对你的`bugs`财产所做的那样。将此添加到您的 .h 文件中：

```
@property (strong) NSMutableArray *newList; 
```

请注意，如果您不使用不同的线程，您也可以通过使用`nonatomic`属性 ( `@property (nonatomic, strong)`) 来提高效率。

一旦你这样做了，你就不需要你的 iVar 声明，因为它会自动为你生成。（即你可以删除`NSMutableArray *newList;`。）

**2) 如何访问数组中的对象？**

Objects in an array are stored as an `id` object, meaning that it is a "generic" object. If you know what type of object is stored, then you need to tell the compiler what it is so that it knows what properties and methods are appropriate for that class. You do this by **casting** the variable to the proper type:

```
ScaryBugDoc *bug = (ScaryBugDoc *)[self.newList objectAtIndex:0]; 
```

Then, you can access the properties of the object, assuming that they are public (as covered in point 1 above) like this:

```
NSLog(@"this is %s", bug.data.tile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:58:19.253

好的，根据评论，这应该有效：

```
Album* tempAlbum = [albumList objectAtIndex:i];
//now you can access album's properties
Song* tempSong = [album.songs objectAtIndex:j];
//now you can access song's properties 
```

这可以简化为：

```
Song* someSong = [((Album)[albumList objectAtIndex:i]).songs objectAtIndex:j]; 
```

当从 NSArray 返回对象或类似的集合对象时，它将返回一个通用的 id 对象。这需要转换为预期的对象，以便您可以访问正确的属性。

# c# - 为什么创建一个新数组会抛出 OutOfMemoryException？

> ID：13727582
> 
> 赞同：4
> 
> 时间：2012-12-05T16:16:02.717
> 
> 标签：c#, .net, arrays, memory-management

这个抛出一个`OutOfMemoryException`.

目标框架*.NET 3.5*，在*64 位 Windows 2008 R2 Standard*上运行。

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            byte[] test = new byte[Int32.MaxValue];
        }
    }
} 
```

根据文档，数组长度必须是一个正的 32 位整数，但显然这不是唯一需要注意的限制。

为什么在这种情况下内存会耗尽？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:18:10.707

那是 2 GB 的内存。32 位 int 的最大值为 2147483647，转换为兆字节为 2048，即 2 GB。机器实际上可能内存不足。请参阅：[.NET 进程可以分配的最大内存](https://stackoverflow.com/questions/934314/maximum-memory-a-net-process-can-allocate)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T16:20:36.557

除了明显的“内存不足”语义外，还有一个更微妙的堆碎片问题：可能有超过 2Gb 或 RAM 可用，但它可能不是**连续的**。

这称为碎片。有一个 dotNET 的堆分析器可以在这种情况下向您显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:19:54.193

在标准的 32 位系统上，由于 RAM 大小，这是不可能的。你会溢出内存。在 64 位系统上，这是可能的，因为您有更多的地址空间，但仍然不推荐，因为您希望使用您将制作的任何标准应用程序同时支持 32 位和 64 位系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T16:20:29.670

问题可能不在于您没有“可用”内存，而是您已经将内存碎片化，以至于当您尝试创建数组并且必须调整其大小时，没有单个可用内存块可以容纳它.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T17:00:37.717

Int32.MaxValue = 2 147 483 647 字节 = 2048 兆字节

看到[这个链接](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778(v=vs.85).aspx)

在“内存和地址空间限制”中，请参阅“每个 32 位进程的用户模式虚拟地址空间”和“每个 64 位进程的用户模式虚拟地址空间”。所以它似乎不是操作系统限制。

请看[这个链接](https://stackoverflow.com/questions/6107322/memory-limitations-in-a-64-bit-net-application)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T17:18:23.263

事实证明，这是因为托管 .NET 应用程序中创建的任何**对象都有**[硬编码的内存限制：](http://msdn.microsoft.com/en-us/library/ms241064%28v=vs.90%29.aspx)

 **> 在 64 位 Windows 操作系统上运行 64 位托管应用程序时，您可以创建不超过 2 GB 的对象。

**也可以看看**

*   [在 CLR 4.0 中，单个对象的大小仍限制为 2 GB？](https://stackoverflow.com/questions/1087982/single-objects-still-limited-to-2-gb-in-size-in-clr-4-0?lq=1)

*   [64 位 .Net 应用程序中的内存限制？](https://stackoverflow.com/questions/6107322/memory-limitations-in-a-64-bit-net-application)**

# android - Android GCM 发送和 MismatchSenderId

> ID：13727585
> 
> 赞同：1
> 
> 时间：2012-12-05T16:16:04.187
> 
> 标签：android, google-cloud-messaging

奇怪的是，通知之前有效。所以我不确定发生了什么。我尝试将我的应用程序重新安装到设备上，但没有任何改变。

```
{"multicast_id":xxxxxxxxxxxxxxxxxxx,"success":0,"failure":1,"canonical_ids":0,"results":[{"error":"MismatchSenderId"}]} 
```

因为这在某一时刻有效，所以我知道我使用了正确的密钥。我什至根据我遇到的其他 SOF 线程进行了三次检查。现在潜在的问题是什么？我已经环顾了几天了，我仍然不知所措..

** 编辑 **

这是从我的服务器发送消息时的 POST 信息。

**标头**

```
Array
(
    [0] => Authorization: key=xxxxxxx-key-for-browser-apps-from-google-apis-console-xxxxxxx
    [1] => Content-Type: application/json
) 
```

**字段**

```
Array
(
    [registration_ids] => Array
        (
            [0] => xxxxxxxxx-big-old-id-from-the-device-xxxxxxxx

    [data] => Array
        (
            [message] => hello
        )

) 
```

# 还

我正在使用与关联的密钥`Key for browser apps (with referers)`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T17:42:30.933

显然，当您重新编译您的应用程序时，它有时会将设备 ID 生成抛到与以前的 ID 不匹配的位置。

我要做的是在我的手机上完全卸载该应用程序并再次重新编译该应用程序（通过 Eclipse）。这似乎很可悲，但它是我目前最接近可行的解决方案..

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T16:41:25.823

我认为这一定与您在 Google API 控制台中为项目设置 API 访问权限的方式有关，特别是“允许的引用者”。正如开发文档所说

> 不匹配的发件人 注册 ID 与特定的发件人组相关联。当应用程序注册使用 GCM 时，它必须指定允许哪些发送者发送消息。确保您在尝试向设备发送消息时使用其中之一。如果您切换到其他发件人，现有的注册 ID 将不起作用。当错误代码为 MismatchSenderId 时发生。

我的项目设置为允许任何引用者，例如：

```
Key for browser apps (with referers) 
API key: my secret  
Referers: Any referer allowed 
```

也许您已将其限制在某个 IP 范围内，而现在您正试图从该范围之外发送消息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-22T14:07:06.100

curl -X POST \
-H "Authorization: key= write here api_key" \
-H "Content-Type: application/json" \
-d '{"registration_ids": ["write here reg_id generated by gcm"],
"data ": { "message": "来自 Rajkumar 的手动推送通知"}, "priority": "high" }' \ [https://android.googleapis.com/gcm/send](https://android.googleapis.com/gcm/send)

MismatchSenderId 因为在同一设备上您使用不同的密钥登录。要解决此问题，请卸载应用程序并再次运行它并更新注册密钥。然后在您的终端中运行我在上面发布的 CURL 脚本，它将提供成功消息，您将收到通知到您的设备

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-31T10:27:37.820

您没有使用正确的设备令牌，这就是您收到错误的原因。所以，请获取新的设备令牌（Android手机的令牌）并使用它

# java - 当在它的容器中使用 BufferedImage 时，JButton 不在正确的位置

> ID：13727586
> 
> 赞同：2
> 
> 时间：2012-12-05T16:16:08.963
> 
> 标签：java, swing, jbutton

我正在尝试使用 AWT 创建一个简单的游戏，但我还想要一些 JButton 来退出/重置游戏。问题是，我希望将 BufferedImage 绘制在可见框架内，就像在我的容器中一样，我最后有这个：

```
g.drawImage(bf,getParent().getInsets().left,getParent().getInsets().top,null); 
```

我的问题是，当我向该框架添加一个 JButton 时，它只检测到空间中的翻转，不考虑偏移，而是在一个空间中绘制。这是相关代码（con 是容器）。

```
 private void addButtons()
{
    reset = new JButton("reset");
    reset.setBounds(180,460, 75,30);
    reset.addActionListener( this );
    con.add(reset);
    exit = new JButton("exit");
    exit.setBounds(290,460, 60,30);
    exit.addActionListener( this );
    con.add(exit);
    con.repaint();
} 
```

Container中的paint方法

```
public void paint(Graphics g)
{
    bf = new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_RGB);
    Graphics b = bf.getGraphics();
    b.setColor(Color.GRAY);
    b.fillRect(0, 0, this.getWidth(), this.getHeight());
    b.setColor(Color.BLACK);
    b.drawRect(0,0,420,420);
    super.paint(b);
    g.drawImage(bf,getParent().getInsets().left,getParent().getInsets().top,null);
} 
```

如何使按钮在同一个位置被绘制和检测？

[这是问题的屏幕截图](http://imgur.com/f2yDJ)

按照要求：

```
import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.awt.image.*;
import java.awt.event.*;
import java.awt.Color;
public class Draw implements ActionListener{
private SnakeFrame frame;
private SnakeCon con;
JButton reset, exit;
private boolean res;
public Draw() 
{
    frame = new SnakeFrame("Snake");
    frame.setResizable(false);
    frame.setLayout(null);
    frame.setSize(600,600);
    frame.setVisible(true);
    con = new SnakeCon();
    con.setBounds(0,0,600,600);
    frame.add(con);
}

private void addButtons()
{
    reset = new JButton("reset");
    reset.setBounds(180,460, 75,30);
    reset.addActionListener( this );
    con.add(reset);
    exit = new JButton("exit");
    exit.setBounds(290,460, 60,30);
    exit.addActionListener( this );
    con.add(exit);
    con.repaint();
}
public void run()
{

    addButtons();
    res = false;
    boolean dead = false;       
    while(!dead)
    {
        if( (res) )
            dead = true;
        if (!dead)
        {
            try{
            Thread.sleep(100);
            }
            catch (Exception e)
            {}
            frame.repaint();
        }
    }
    con.removeAll();
}

public void actionPerformed(ActionEvent e)
{
    if (e.getSource() == reset)
    res = true;
else if (e.getSource() == exit)
    System.exit(0);
}
} 
```

--

```
 import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.awt.image.*;
import java.awt.event.*;
import java.awt.Color;
public class SnakeCon extends Container{
    private BufferedImage bf;

    public SnakeCon()
    {
        super();
        setBounds(0,0,600,600);
    }
    public void paint(Graphics g)
    {
        bf = new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_RGB);
        Graphics b = bf.getGraphics();
        b.setColor(Color.GRAY);
        b.fillRect(0, 0, this.getWidth(), this.getHeight());
        b.setColor(Color.BLACK);
        b.drawRect(0,0,420,420);
        super.paint(b);
        g.drawImage(bf,getParent().getInsets().left,getParent().getInsets().top,null);
    }
    public void update(Graphics g)
    {
        paint(g);
    }
    } 
```

--

```
 import java.awt.*;
import javax.swing.*;
import java.util.*;
import java.awt.image.*;
import java.awt.event.*;
import java.awt.Color;
public class SnakeFrame extends Frame implements WindowListener{
    private BufferedImage bf;

    public SnakeFrame(String s)
    {
        super(s);
        addWindowListener( this );
    }
    public void paint(Graphics g)
    {

        bf = new BufferedImage(this.getWidth(), this.getHeight(), BufferedImage.TYPE_INT_RGB);
        Graphics b = bf.getGraphics();
        super.paint(b);
        g.drawImage(bf,0,0,null);
    }
    public void update(Graphics g)
    {
        paint(g);
    }

    public void windowClosing(WindowEvent e) 
    {
            System.exit(0);
    }

    public void windowClosed(WindowEvent e) {    }

    public void windowOpened(WindowEvent e) {    }

    public void windowIconified(WindowEvent e) {    }

    public void windowDeiconified(WindowEvent e) {    }

    public void windowActivated(WindowEvent e) {    }

    public void windowDeactivated(WindowEvent e) {    }
    } 
```

--

```
public class Main {
public static void main(String[] args) 
{
    boolean never = false;
    Draw d = new Draw();
    while(!never)
    {
        d.run();
    }
    System.exit(0);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:56:46.277

我不确定到底出了什么问题/你想要什么（为什么你有一个循环来不断地绘制按钮和调用`removeAll()`？等等，但我无法摆脱它可能以更易读/更有效的方式实现的感觉）......

但这里有一些建议只能帮助您的代码变得更好：

*   不要使用`null`/ `Absolute`Layout 选择一个[合适`LayoutManager`](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)的.

*   不要覆盖`JFrame` `paint(..)`，而是添加`JPanel`和`JFrame`覆盖并`paintComponent(Graphics g)`在`JPanel`那里绘制。（不要忘记`super.paintComponent(..)`在覆盖`paintComponent`方法中进行第一次调用。有关更多信息，请参见此处：[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)

*   `JFrame`在添加所有组件之前不要设置可见`JFrame`

*   始终像这样创建和操作 Swing 组件[`Event Dispatch Thread`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)：

    ```
     SwingUtilities.invokeLater(new Runnable() {
          @Override
          public void run() {
             //create Swing components
         }
     }); 
    ```

*   不要做长时间运行的任务，`Event Dispatch Thread`而是使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html) / [Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)

*   不要调用`setSize(..)`而`JFrame`不是覆盖和返回适合所有组件的 s（参见`getPreferredSize()`此处[进行](https://stackoverflow.com/questions/7229226/should-i-avoid-the-use-of-setpreferredmaximumminimumsize-methods-in-java-swi)推理），而不是在设置为可见之前调用`JPanel``Dimension`[`pack()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)`JFrame`

*   `JFrame`不要不必要地扩展或`Container`！

*   添加`WindowListener`用于检测`JFrame`退出不值得使用以下行：

    ```
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
    ```

按下*X*时退出 Swing 应用程序。

# paypal - 贝宝网站订阅标准，取消订阅

> ID：13727588
> 
> 赞同：0
> 
> 时间：2012-12-05T16:16:15.200
> 
> 标签：paypal, subscription

请帮助我实现使用贝宝的要求。

我的要求是这样的：

用户可以订阅服务，使用贝宝账户或信用卡（没有贝宝账户）。如果他/她愿意，用户可以稍后取消订阅。

我使用“网站标准”的订阅按钮实现了第一部分，其中贝宝给了我一个按钮，单击它会导致贝宝网站。

我正在使用 IPN 收到通知

现在有两个问题：

1.  如何测试信用卡，我可以使用沙盒测试用户测试 paypal 帐户支付，但是对于信用卡，我没有虚拟信用卡。如果我使用贝宝账户的信用卡，上面写着“贝宝用户应该使用贝宝支付”
2.  我想取消订阅。贝宝用户可以去贝宝账户取消订阅。这很好用。但是我们如何从我的网站取消订阅，或者我们如何取消信用卡付款人的订阅。贝宝 SDK 说订阅配置文件 ID 无效。

有没有人尝试过这种实现。任何帮助都可以，无论是链接还是搜索位置。

非常感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-05T21:44:46.850

首先，Guest Checkout（使用信用卡付款而无需登录 PayPal）只能在没有定期付款的情况下使用。使用定期付款时，它将强制此人创建一个 PayPal 帐户。您需要使用 Payments Pro 才能直接使用信用卡进行定期付款，然后这个人甚至永远不会被重定向到 PayPal。

对于测试卡，您拥有的任何旧的过期卡都可以使用，或者您可以做的是登录您的 PayPal 沙盒帐户，进入个人资料，然后完成将新信用卡添加到帐户的过程。它实际上会为您填写一个卡号，但不要将此卡添加到帐户中。只需复制该卡号，然后退出此屏幕即可。现在您可以使用该卡号在 PayPal 系统上进行测试。

为了使用 API 退款，您需要使用 CreateRecurringPaymentsProfile API 创建配置文件。为您提供的配置文件 ID 将与将来管理它的所有 API 调用兼容。

# xcode4 - 如何让 Interface Builder 在基于约束的布局中尊重自定义视图的内在内容大小？

> ID：13727589
> 
> 赞同：23
> 
> 时间：2012-12-05T16:16:16.357
> 
> 标签：xcode4, interface-builder, nslayoutconstraint

XCode 4.5 中的 Interface Builder 尊重一些视图的 intrinsicContentSize，例如 NSButton，但我无法说服它在我自己的自定义子视图中尊重它。这会导致 IB 添加额外的约束，试图强制在 IB 中绘制布局，然后导致程序运行时不使用内在大小。

例如，考虑在窗口中居中的按钮，以及在窗口中居中的自定义视图……</p>

![居中 NSButton 的 IB 约束](../Images/b35e88cdf1cb175fdb801e22a4c54a34.png)

![居中 NSView 的 IB 约束](../Images/21fda49b37761977be1395154ae5fad7.png)

可以看到自定义视图有四个约束，大概是因为IB不知道视图的intrinsicContentSize。您可以更改添加的额外约束，例如，您可以强制将其设置为宽度和高度，但不能删除它们。

我现在通过搜索和删除 awakeFromNib 中的额外约束来应对这个问题，但必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-08-29T19:03:47.940

在 Interface Builder 中设置占位符内在内容大小——“猜测”，如果你愿意的话。

1.  选择您的自定义视图。
2.  显示尺寸检查器 (`⌘</kbd>`Shift``5`).`
3.  将“固有大小”下拉菜单从“默认（系统定义）”更改为“占位符”。
4.  在视图的运行时宽度和高度输入合理的猜测。

这些约束在编译时被删除，这意味着它们不会影响您正在运行的应用程序，并且布局引擎将在运行时添加适当的约束以尊重您视图的`intrinsicContentSize`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-09-03T17:58:05.033

# 如何实际做到这一点，2019

```
import UIKit

@IBDesignable class TagPerson: ShadowRoundedImageView {

    override var intrinsicContentSize: CGSize {
        var s = super.intrinsicContentSize
        s.height = 40
        s.width = 40
        return s
    }

    override func prepareForInterfaceBuilder() {
        invalidateIntrinsicContentSize()
    }

} 
```

# 但是，有一个问题。Xcode 有问题。您有时可以通过以下方式重置它：

上述内容当然会在运行时完美运行。但它随机无法在界面生成器中工作（即使是 11+）。

要使其循环，请尝试

1.  通常的“刷新所有视图”

2.  将无意义的约束附加和删除到您的固有尺寸视图之一。（我注意到如果你有很多，对一个执行此操作通常足以使 Xcode 循环，然后它们都可以工作。）

3.  最后：

Xcode 具有*“固有大小占位符”*功能。

[![在此处输入图像描述](../Images/0329ac9e71ed6aad60953d09ee56786c.png)](https://i.stack.imgur.com/x6t1X.png)

选择一个或多个内在尺寸元素。来回切换奇怪的占位符几次。通常这会使其循环，然后视图将正常工作。

在最坏的情况下，使用通常的 clean-everything 重新启动 Xcode 有时会使其正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T09:33:38.367

好的，这里的重点是让 Xcode 在 IB 中使用您的自定义视图的**intrinsicContentSize**。

这可以通过在 IB 的自定义视图中添加一个具有固定宽度和高度的**占位符视图**来实现（您也可以将其水平和垂直居中）

![在此处输入图像描述](../Images/6beb1b921aad28ce9ccdf4baf210069f.png)

然后选择您的自定义视图并在 IB 的编辑菜单中点击**“大小以适合内容” 。**此时，所有额外的尺寸定义约束都将被删除，只留下定位约束。

![在此处输入图像描述](../Images/6179c42ccae578340e197d22648b8747.png)

这样，IB 将调整您的自定义视图的大小以适合占位符视图，并且自动布局将取决于您的视图`- (CGSize)intrinsicContentSize`在运行时的覆盖来确定您的自定义视图的大小。

最后一步是删除占位符视图以允许您的视图正确显示其内容和大小：

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        [_placeholderView removeFromSuperview];
    } 
```

我知道这是一个 hack，但希望它可以帮助你。

# c# - 反射以使用子项更新源实体以使用子项作为目标

> ID：13727590
> 
> 赞同：1
> 
> 时间：2012-12-05T16:16:26.573
> 
> 标签：c#, entity-framework, reflection, code-first

对于所有反射专家，我需要一些帮助。我正在研究一种通用方法，以便能够在使用 CodeFirst 和 EF5 的 MVC 应用程序中使用分层数据分配。用户将对父对象（源）应用更改，并且此方法将填充子对象（目标）。它没有像我预期的那样工作。任何指针将不胜感激。

下面的方法“CopyEntity”旨在获取具有子实体的源实体并更新相同类型和结构的目标实体。我们只希望更新那些继承基本类型“关联”并且成员上没有“NoInherit”属性的实体。并非每个属性都会从“协会”更新

```
public class ClassCode : Inheritable<ClassCode>
{

    // Base Properties ----------------------------------
    public int LobId { get; set; }
    public virtual LOB LOB { get; set; }
    public bool IsVirtual { get; set; }
    //public string Name { get; set; }
    public string Description { get; set; }

    [Required(ErrorMessage = "Select Code")]
    public string Code { get; set; }
    //enable to force recreation of the database
    public string IID { get; set; }

    public virtual ICollection<ClassSubjectivityAssoc> Subjectivities{ get; set; }
}

public class ClassSubjectivityAssoc : Association
{
    [Column("SubjectivityId")]
    public override int AssociationId { get; set; }

    [ForeignKey("AssociationId")]
    public virtual Subjectivity Subjectivity { get; set; }

    public int ClassCodeId { get; set; }
    [ForeignKey("ClassCodeId")]
    public virtual ClassCode ClassCode { get; set; }
}

public abstract class Association  : BaseEntity
{
    public DateTime Start { get; set; }
    public DateTime? End { get; set; }
    public bool IsCurrent { get; set; }
    public int Order { get; set; }
    public bool BreakInheritance { get; set; }
    public int? InhId { get; set; }
    public virtual ClassCode InhClass { get; set; }
    public int CodeId { get; set; }
    [ForeignKey("ClassCodeId")]
    public virtual Code ClassCode { get; set; }
    public abstract int AssociationId {get; set;}
}

public class BaseEntity
{
    private static DateTime CREATE_DATE
    {
        get { return DateTime.Now; }
    }

    [NoInherit]
    public int Id { get; set; }

    [NoInherit]
    public string CreatedBy { get; set; }
    [NoInherit]
    public DateTime Created { get; set; }

    [NoInherit]
    public string LastModifiedBy { get; set; }
    [NoInherit]
    public DateTime LastModified { get; set; }

    public bool IsActive { get; set; }
}

protected void CopyEntity(Inheritable<T> source, Inheritable<T> target)
{
    Type sourceType = source.GetType();
    Type targetType = target.GetType();
    // ensure that the types can be assigned to one another
    //if (!targetType.IsAssignableFrom(sourceType)) return;

    // loop through the properties of the source system
    foreach (PropertyInfo sourceMember in sourceType.GetProperties().Where(sourceMember => sourceMember.GetCustomAttribute(typeof(NoInheritAttribute)) == null))
    {
        var targetMember = targetType.GetProperty(sourceMember.Name);
        // if the property doesn't exist in the target, let's get out
        if (targetMember == null) continue;

        // check if this property is a Collection
        bool isCollection = (sourceMember.PropertyType.IsGenericType && sourceMember.PropertyType.GetInterfaces().Any(x =>
                                      x.IsGenericType &&
                                      x.GetGenericTypeDefinition() == typeof(IEnumerable<>)));

        // if we are not dealing with associations, let's get outta herre
        if (!(isCollection
                  ? sourceMember.PropertyType.GetGenericArguments().Single()
                  : sourceMember.PropertyType)
                 .IsSubclassOf(typeof(Association))) continue;

        if (isCollection)
        {
            IEnumerable<Association> targetCollection = (IEnumerable<Association>) targetMember.GetValue(target);
            // Loop through the collection and evaluate
            foreach (Association sourceAssociation in (IEnumerable) sourceMember.GetValue(source))
            {
                Association targetAssociation =
                    targetCollection.SingleOrDefault(t => t.AssociationId == sourceAssociation.AssociationId);
                CopyAssociation(sourceAssociation, targetAssociation);
            }
        }
        else
        {
            Association sourceAssociation = (Association) sourceMember.GetValue(source);
            Association targetAssociation = (Association) targetMember.GetValue(target);
            CopyAssociation(sourceAssociation, targetAssociation);
        }
    }
} 
```

问题是：它似乎没有正确地遍历子对象并且没有像我预期的那样更新目标。寻找输入和建议，因为我不像我想要的那样精通反射。

更新：2012 年 12 月 6 日

好的，所以我相信我已经找到了问题，但仍在寻找解决方案。这个问题来自我团队的另一个开发人员，假设对象模型是合理的。但是，我们当前正在测试的实体似乎没有从数据库中检索种子值。

尽管从实体模型正确创建了表并且从 dbSeed() 方法正确加载了数据，但在定义此关联的 OnModelCreating() 方法中没有定义任何内容。我可以从数据库中运行一条选择语句并获取正确的数据。似乎实体模型外键关联可能无效，从而阻止了正确的数据检索。任何帮助将不胜感激。

更新：好的，终于检索到正确的数据。这终于做到了。

```
 modelBuilder.Entity<ClassSubjectivityAssoc>()
                .HasRequired(c => c.ClassCode)
                .WithMany(u => u.Subjectivities)
                .HasForeignKey(f => f.ClassCodeId); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:29:03.683

我不确定我是否理解这个问题，但似乎你只需要确保它`sourceMember`是一个`Association`（或后代）或一个`Association`.

您可以通过将结果值转换为 Association 并检查转换是否成功，以一种快速而肮脏的方式做到这一点，对于简单的属性如下所示：

```
Association sourceAssociation = sourceMember.GetValue(source) as Association;
if (sourceAssociation != null) // the source is a valid Association
{
   Association targetAssociation = targetMember.GetValue(target) as Association;
   if (targetAssociation != null) // the destionation too
   {
        CopyAssociation(sourceAssociation, targetAssociation);
   }
} 
```

并且对于集合也有类似的代码

* * *

您显示的方法不会下降对象树，因此它仅适用于`Association`直接附加到实体的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:06:46.043

有关解决方案，请参阅原始帖子“更新”。

# php - 将 FirePHP 与 Zend Framework 2 一起使用

> ID：13727592
> 
> 赞同：0
> 
> 时间：2012-12-05T16:16:28.930
> 
> 标签：php, zend-framework2, firephp

我正在尝试将 FirePHP 与 Zend Framework 2 一起使用，但似乎缺少一些东西。这是我要运行的基本代码：

```
$writer = new Zend\Log\Writer\FirePhp();
$logger = new Zend\Log\Logger();
$logger->addWriter($writer);
$logger->info('FirePHP logging enabled'); 
```

我得到的错误是“找不到 FirePHP 类”。起初我很困惑，因为我的 Zend/Log/Writer 文件夹中确实有一个 FirePhp 类。但后来我看到类构造函数需要一个 FirePhp\FirePhpInterface 对象。所以我检查了 Zend/Log/Writer/FirePhp 文件夹，那里有一个实现 FirePhpInterface 的 FirePhpBridge 类，但它还需要构造函数中的一个 FirePHP 实例。我的 Zend/Log/Writer/FirePhp 文件夹中没有任何 FirePHP.php 文件。我应该从其他地方得到这个吗？

**更新**

我现在已经设法让 FirePHP 正常工作，但我正试图弄清楚如何以一种干净的方式做到这一点，这样它就可以工作了。我让它工作的唯一方法是将它放在我项目的根目录中并执行以下操作：

```
include_once('FirePHP.php');
$writer = new Zend\Log\Writer\FirePhp(new Zend\Log\Writer\FirePhp\FirePhpBridge(FirePHP::getInstance(true)));
$logger = new Zend\Log\Logger();
$logger->addWriter($writer);
$logger->info('FirePHP logging enabled'); 
```

我假设通常我应该能够像这样创建一个作家：

```
$writer = new Zend\Log\Writer\FirePhp(); 
```

但是，我认为出错的地方是 Zend\Log\Writer\FirePhp 类的 getFirePhp() 函数。班级这样做：

```
if (!$this->firephp instanceof FirePhp\FirePhpInterface
    && !class_exists('FirePHP')
) {
    // No FirePHP instance, and no way to create one
    throw new Exception\RuntimeException('FirePHP Class not found');
}

// Remember: class names in strings are absolute; thus the class_exists
// here references the canonical name for the FirePHP class
if (!$this->firephp instanceof FirePhp\FirePhpInterface
    && class_exists('FirePHP')
) {
    // FirePHPService is an alias for FirePHP; otherwise the class
    // names would clash in this file on this line.
    $this->setFirePhp(new FirePhp\FirePhpBridge(new FirePHPService()));
} 
```

这是我迷失了我应该如何设置的地方，以便这个 class_exists('FirePHP') 调用找到正确的类并且 new FirePHPService() 也可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:35:39.303

首先，您应该将此代码添加到模块的 Module.php

```
 return array(
        //...
        'Zend\Loader\ClassMapAutoloader' => array(
                __DIR__ . '/autoload_classmap.php',
        ),
    ); 
```

这里是 autoload_classmap.php 的内容

```
<?php

return array(
    'FirePHP' => realpath(APPLICATION_PATH . '/vendor/FirePHP').'/FirePHP.php',
); 
```

FirePHP.php（从FirePHP.class.php重命名）从官方网站下载。

然后您可以在模块的任何位置编写以下代码，它会起作用

```
use Zend\Log\Writer\FirePhp;
use Zend\Log\Logger;

    $writer = new FirePhp();
    $logger = new Logger();
    $logger->addWriter($writer);
    $logger->info("hi"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T22:00:07.343

> 我应该从其他地方得到这个吗？

是的，您需要将 FirePHP 加入您的项目并自动加载。

如果您正在使用作曲家（我建议您这样做），只需添加：

```
"firephp/firephp-core" : "dev-master" 
```

（或类似的）在您的 composer.json 中并更新。如果您不使用 composer，您应该获取 firephp 库，并让您的自动加载器知道它们。

# java - 读取属性文件并保存到对象

> ID：13727593
> 
> 赞同：0
> 
> 时间：2012-12-05T16:16:34.623
> 
> 标签：java

我有一个名为`person.properties`. 我需要添加几个人条目。一个人条目将有一个`Name`, `Age`, `Telephone`。此属性文件中将有许多 Person 条目。

```
ID : 1
Name: joe
Age: 30
Telephone: 444444
ID : 2
Name: Anne
Age: 20
Telephone: 575757
ID : 3
Name: Matt
Age: 17
Telephone : 7878787
ID : 4
Name: Chris
Age: 21
Telephone : 6767676 
```

我需要读取属性文件并将每条记录保存在一个`Person`对象中。

```
Person p = new Person();
p.setId(ADD THE FIRST VALUE OF ID FROM THE PROPERTY FILE);
p.setName(ADD THE FIRST VALUE OF NAME FROM THE PROPERTY FILE); 
```

明智地..并将其保存在数组中。

我认为，我将无法从上面的 person.properties 文件中读取并根据需要将其保存到 person 对象中。因为我`key`在属性文件中有相同的内容。因此，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:26:53.090

您不必为此使用这些`Property`方法，只需将文件作为文本文件读取并手动解析即可：

```
Scanner s = new Scanner(new File("propertyfile.properties"));
while (s.hasNextLine()) {
    String id = s.nextLine().split(":")[1].trim();
    String name = s.nextLine().split(":")[1].trim();
    String age = s.nextLine().split(":")[1].trim();
    String phone = s.nextLine().split(":")[1].trim();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:27:07.457

您描述的文件格式并不是真正的属性文件。只需自己阅读，使用类似的东西

```
public File openFile(String URI); // write this yourself

public void readFile(File names) {
  BufferedReader br = new BufferedReader(new FileReader(name));

  while(br.ready()) {
    String next = br.readLine();
    String[] split = next.split(" : ");
    // handle each case, etc. 
```

* * *

## 文件修改

如果要修改密钥并将其写回相同的位置，则应使用数据库。这里有两个免费的：[MySQL](http://www.mysql.com/)和[SQLite](http://www.sqlite.org/)。可以以这种方式编辑文件，但使用数据库更容易，这就是它的设计目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:26:51.650

我认为你所做的实际上不是java中属性文件的目的。不过，这里是如何处理属性文件：

 **```
 Properties prop = new Properties();

    try {
           //load a properties file
        prop.load(new FileInputStream("file.properties"));

           //get the property value and print it out
            System.out.println(prop.getProperty("name"));
        System.out.println(prop.getProperty("age"));
        System.out.println(prop.getProperty("telephone"));

    } catch (IOException ex) {
        ex.printStackTrace();
    } 
```*  *这可以帮助你或你真正想做的事吗？

我认为对于您的方法，数据库样式的东西会更好。**

# python - 使用 Python 从 MySQL 读取西里尔字母 utf-8 符号不正确

> ID：13727595
> 
> 赞同：1
> 
> 时间：2012-12-05T16:16:47.057
> 
> 标签：python, mysql, encoding, utf-8, pydev

这是我的代码，它连接到数据库，并将俄语单词插入数据库：

```
import mysql.connector

    if __name__ == '__main__':
        try:
            cnx = mysql.connector.connect(user='user', password='password',
                                      host='123.123.123.123',
                                      database='db_name',
                                      charset='utf8',
                                      collation='utf8_general_ci',
                                      use_unicode=True)
        except BaseException as ex: 
            print('Error: ' + str(ex))
            cnx.close()
        else:
            print('Connections succesful!')
            cnx.set_charset_collation('utf8', 'utf8_general_ci')
            cursor = cnx.cursor()
    print(cnx.charset)
    cursor.execute("INSERT INTO table_name (column_name) values ('привет!')") #means 'Hello!' in russian
    cursor.execute("SELECT * FROM test_referers")
    print(cursor.fetchall()) 
```

这就是我得到的：

```
Connection succesful!
utf8
(1, u'\u043f\u0440\u0438\u0432\u0435\u0442!') 
```

这样的输出出现在 Python 解释器控制台和 Eclipse PyDev 中。

请帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:22:02.643

您的输出是有效的 Unicode。Python 使用 Unicode 转义值 ( ) 回显给您，`\uxxxx`因为该行由一个包含两个项目的元组组成；当打印一个元组时，它的内容被表示为 python 文字。

如果您要使用以下代码：

```
print(cursor.fetchall()[1]) 
```

相反，它会打印：

```
привет! 
```

您可以通过使用 python 提示打印文字值来测试这一点：

```
>>> print u'\u043f\u0440\u0438\u0432\u0435\u0442!'
привет! 
```

# php - PHP下载大文件返回一个0 Kb文件

> ID：13727596
> 
> 赞同：1
> 
> 时间：2012-12-05T16:16:50.347
> 
> 标签：php, apache

你好，sakoverflowers，

我遇到了 PHP/Apache 的问题。我有一个允许管理员上传 100Mb 文件的应用程序。上传效果很好，但我在下载时遇到问题。

它适用于较小的文件（使用 50Mb 文件测试）但由于某种原因我无法获得 100Mb 文件。

这是我的php代码

```
$extension = 'zip'; //for testing

switch ($extension) {
  case "dwg": $contentType="image/vnd.dwg"; break;
  case "dxf": $contentType="image/vnd.dxf"; break;
  case "pdf": $contentType="application/pdf"; break;
  case "zip": $contentType="application/zip"; break; 
  case "png": $contentType="image/png"; break; 
  case "jpeg": $contentType="image/jpeg"; break; 
  case "jpg": $contentType="image/jpg"; break; 
  case "gif": $contentType="image/gif"; break; 
  default: 
    $contentType = '';
}

@header("Content-type: " . $contentType);
@header("Content-Disposition: attachment; filename=$filename");
@header("Cache-Control: no-cache, must-revalidate");
@header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // passed date

echo file_get_contents($url); 
```

我还尝试了在 SO 上找到的其他解决方案。

```
header('Content-Description: File Transfer');
header('Content-Transfer-Encoding: binary');
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Cache-Control: public");
header("Content-type: " . $contentType);
header("Content-Disposition: attachment; filename=\"".$filename."\"");
header("Content-Length: ".filesize($url));

echo self::url_get_contents(URL_PUBLIC . $url);

...

private function url_get_contents ($url) {
    if (!function_exists('curl_init')){ 
        die('CURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        $output = curl_exec($ch);
    curl_close($ch);
        echo $output;
    return $output;
} 
```

或者

```
$file_contents = fopen($url, "r");
echo $file_contents;
fclose($file_contents); 
```

所有解决方案都返回相同的东西。文件大小为 0 Kb。就像我说的，较小的文件可以工作。

此外，当我在本地测试时，100 Mb 大小的文件正确下载，所以我猜测问题出在服务器上。我已将 php.ini 更改如下

```
register_globals = Off
magic_quotes_gpc = Off
post_max_size = 128M
memory_limit = 256M
upload_max_filesize = 128M
max_execution_time = 120
expose_php = off
session.save_path = /tmp
mysqli.default_socket = /tmp/mysql5.sock
mysql.default_socket = /tmp/mysql5.sock 
```

这可能是内存限制问题，但不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:24:23.387

我之前也遇到过类似的问题。我的问题原来是托管服务提供商。一旦脚本执行时间过长，托管服务提供商通常会将其关闭。尝试通过 phpMyAdmin 上传大型 sql 脚本时，我遇到了同样的问题。

# mysql - 从 MySQL 查询中删除重复的结果

> ID：13727597
> 
> 赞同：2
> 
> 时间：2012-12-05T16:16:50.443
> 
> 标签：mysql

我有两个 mysql 表用户和消息。请您帮我创建一个 sql 查询，该查询仅返回由登录用户 Mike ( user_id=1 ) 发送或接收的最新消息以及消息被发送到的人的 message_id、message_text 和 first_name 或从......收到。按 message_id 降序排列。

到目前为止，我有一个查询： -

```
SELECT message_id, first_name, message_text FROM tbl_users, tbl_messages 
WHERE 
(tbl_users.user_id = tbl_messages.sender_id AND tbl_messages.receiver_id = 1 
OR tbl_users.user_id = tbl_messages.receiver_id AND tbl_messages.sender_id = 1) 
GROUP BY tbl_users.first_name
ORDER BY message_id DESC 
```

这给出了下图中的结果。似乎 ORDER BY 被忽略了

![按结果分组](../Images/9176fa7c10f19f49aded1b39f8f423ec.png)

先感谢您

tbl_users

```
---------------------------
| user_id |  first_name   |
---------------------------
| 1       |  Mike         |
| 2       |  John         |
| 3       |  George       |
| 4       |  Peter        |
| 5       |  Sarah        |
--------------------------- 
```

tbl_messages

```
----------------------------------------------------------------
| message_id |  sender_id   |  receiver_id   |  message_text   |
----------------------------------------------------------------
| 1          |  2           | 1              |  Hello          |
| 2          |  3           | 1              |  How are you    |
| 3          |  1           | 5              |  Hi there       |
| 4          |  2           | 1              |  Greetings      |
| 5          |  1           | 4              |  Good day       |
| 6          |  3           | 1              |  Hi             |
| 7          |  5           | 1              |  A message      |
| 8          |  5           | 4              |  Good morning   |
| 9          |  1           | 5              |  Hello dear     |
| 10         |  1           | 3              |  Howdy          |
---------------------------------------------------------------- 
```

期望的结果

```
----------------------------------------------
| message_id |  first_name  |  message_text  |
----------------------------------------------
| 10         |  George      | Howdy          |
| 9          |  Sarah       | Hello dear     |
| 5          |  Peter       | Good day       |
| 4          |  John        | Greetings      |
---------------------------------------------- 
```

数据库在[这里可用](http://zimpeople.com/sample_db.sql)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:40:43.990

~~只需添加一个`GROUP BY`子句就可以解决您的问题，试试这个...~~

```
SELECT message_id, first_name, message_text FROM tbl_users, tbl_messages 
WHERE  
(tbl_users.user_id = tbl_messages.sender_id AND tbl_messages.receiver_id = 1 
OR tbl_users.user_id = tbl_messages.receiver_id AND tbl_messages.sender_id = 1) 
GROUP BY tbl_users.user_id
ORDER BY message_id DESC 
```

**更新：更改整个查询**

```
SELECT t2.message_id, t2.first_name, t2.message_text FROM
(SELECT u.user_id, m.message_id, u.first_name, m.message_text FROM `tbl_users` u
  JOIN `tbl_messages` m ON (u.user_id = m.sender_id AND m.receiver_id = 1)
    OR (u.user_id = m.receiver_id AND m.sender_id = 1) 
  ORDER BY m.message_id DESC
) t2
GROUP BY t2.user_id
ORDER BY t2.message_id DESC 
```

**结果：**

```
+------------+------------+--------------+
| message_id | first_name | message_text |
+------------+------------+--------------+
| 10         | George     | Howdy        |
| 9          | Sarah      | Hello dear   |
| 5          | Peter      | Good Day     |
| 4          | John       | Greetings    | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:56:40.503

如果您`GROUP BY`要对其进行重复数据删除的字段。在这种情况下`GROUP BY tbl_users.first_name`应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:33:11.763

You are missing the table name in the ORDER BY clause. Also I suggest using aliases on the tables. Thus, your query might look like this:

```
/* All Mike's messages */
SELECT
  m.message_id,
  u.first_name,
  m.message_text
FROM
  tbl_users AS u,
  tbl_messages AS m
WHERE  
(
  u.user_id = m.sender_id AND 
  m.receiver_id = 1
) OR (
  u.user_id = m.receiver_id AND 
  m.sender_id = 1
)
ORDER BY
  m.message_id DESC; 
```

However, I think it would be better to get the sent and received messages results separately. So:

```
/* Messages sent my Mike */
SELECT
  m.message_id,
  u.first_name,
  m.message_text
FROM
  tbl_users AS u
  INNER JOIN tbl_messages AS m ON m.receiver_id = u.user_id
WHERE
  m.sender_id = 1
ORDER BY
  m.message_id DESC;

/* Messages received my Mike */
SELECT
  m.message_id,
  u.first_name,
  m.message_text
FROM
  tbl_users AS u
  INNER JOIN tbl_messages AS m ON u.user_id = m.sender_id
WHERE
  m.receiver_id = 1
ORDER BY
  m.message_id DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T17:06:14.047

我不确定您是否可以通过加入来实现这一目标。子选择查询可能会对您有所帮助。

```
 select a.first_name, 
         (select message_text from tbl_messages b
          where (a.user_id = b.sender_id and b.sender_id = 1)
                or (a.user_id = b.receiver_id and b.receiver_id  = 1)
          order by message_id DESC
          LIMIT 1)
   from tbl_users a; 
```

# javascript - YouTube API：在网站上嵌入我的 youtube 频道。但是，我希望将特定视频作为默认视频，而不是最近上传的视频

> ID：13727600
> 
> 赞同：2
> 
> 时间：2012-12-05T16:16:55.283
> 
> 标签：javascript, youtube, youtube-api

YouTube API：我可以将我的 youtube 频道嵌入到我网站的页面上吗？但是，我希望将特定视频作为默认视频，而不是最近上传的视频。

我试过了： http: [//tcuttrissweb.wordpress.com/2012/02/17/2012-embed-your-youtube-channel-into-your-website](http://tcuttrissweb.wordpress.com/2012/02/17/2012-embed-your-youtube-channel-into-your-website)

但这会将我最近的视频显示为默认视频。我想显示一个特定的视频作为默认值。谢谢你。

# gridview - Windows 应用商店应用程序 - GridView 项目宽度

> ID：13727604
> 
> 赞同：0
> 
> 时间：2012-12-05T16:17:13.920
> 
> 标签：gridview, windows-store-apps

我正在尝试为其每个项目创建一个具有不同宽度的 GridView。我已经在我的 XAML 中声明了所有项目（即它们是预定义的），并为它们提供了不同的宽度大小。但是当应用程序运行时，所有项目的宽度都相等。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T00:16:13.450

GridView 使用 VariableSizedWrapGrid 面板来布局其子元素。似乎有一个错误使网格中的所有项目与第一个项目的大小相同。查看 MSDN 论坛上的此线程以获取详细信息：[VariableSizedWrapGrid / WrapGrid 奇怪的测量](http://social.msdn.microsoft.com/Forums/en-IE/winappswithcsharp/thread/569e048a-9f5e-4fb3-870a-380de5906e80)

您需要将该面板替换为实际支持可变大小元素的面板。

例子：

```
 <GridView>
        <GridView.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel />
            </ItemsPanelTemplate>
        </GridView.ItemsPanel>
        ...
     </GridView> 
```

# c# - 设计用于填充数据库的 C# 程序

> ID：13727608
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:17:26.623
> 
> 标签：c#, database, oop, database-design

我是 OOP 和软件设计的新手，我的任务是创建一个程序来从一组数据源填充数据库。我的问题是高层次的，什么是设计课程的好/灵活/合乎逻辑的方式？我要构建的目标数据库有大约 40 个已定义的表。此外，这些表被分为 10 个相关信息集（我们称之为 TableSets）。我最初的想法是有 3 个类：`DataBase`、`TableSet`和`Table`.

*   DataBase 类将包含一个 TableSets 数组（1 到 N）

*   TableSet 类将具有该 TableSet 中的表数组

*   Table 类将只保存数据

对于我想有类似的方法

```
DataBase.PopulateTableSet(tableSetNum)
TableSet.PopulateTable(tableNum)
Table.RunQuery or some other method to get the right data 
```

如果有人对这样做的好方法有任何建议，我将非常感谢任何形式的帮助。谢谢参观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:28:58.873

您可以选择 ORM（对象关系映射）。ORM 可以将您的数据库表（关系）映射到代码中的类。你不需要手工做太多的工作。如果您使用的是 C#，则可以使用 Entity Framework 或 Nhibernate。对于 Java，您可以使用 Hibernate。

您可以使用这些链接进行进一步研究：

[http://en.wikipedia.org/wiki/Object-relational_mapping](http://en.wikipedia.org/wiki/Object-relational_mapping)

[http://nhforge.org](http://nhforge.org)

[http://msdn.microsoft.com/en-us/data/ef.aspx](http://msdn.microsoft.com/en-us/data/ef.aspx)

[http://www.hibernate.org/](http://www.hibernate.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:34:22.040

您可能想了解的是一个三层的应用程序开发范例。本质上，您需要设计一个可以读取和写入数据源的类，例如 SQL 数据源、访问权限......等等......

接下来，您将需要一个逻辑层（有时称为业务逻辑）。在你的逻辑类中，你会做一些事情，比如构建 sql 语句、运行计算等……最后是一个 GUI 层（win 表单或你想使用的任何东西）。

您可能需要在每一层中使用多个类，例如 SQL 类、MSAccess 类或您将要读取和写入的任何数据源。

您可能希望查找 DataTables，查看[http://www.dotnetperls.com/](http://www.dotnetperls.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:58:03.360

我对 OO 并不陌生；但是，我是 C# 新手，我现在正在开发的应用程序与数据库密切合作。对于那个应用程序，我选择使用实体框架，它使数据库的工作几乎透明。

我发现 Database First 方法非常简单。您所做的就是创建数据库，然后添加一个实体模型并让 Visual Studio 从数据库中创建它。然后，您将拥有一个用于为您完成数据库工作的类的列表。

如果您自己启动数据库，那么遵循一些约定可能会有很大帮助，例如使用“复数”名称命名表并且不要使用下划线（例如：如果您是“用户”表，则将其命名为“用户）。

您可以观看几个视频来帮助您入门。这是我发现的一个[视频系列，它给了我一个良好的开端。](http://www.youtube.com/watch?v=BS6IKdUd2V8)我也找到了其他人；但是，我将不得不再次找到它们。

# objective-c - 为什么在 iPhone 中从服务器发送和接收 JSON 数据这么慢？

> ID：13727611
> 
> 赞同：0
> 
> 时间：2012-12-05T16:17:30.680
> 
> 标签：objective-c, ios, json, performance

我现在正在为网站制作移动客户端。我的应用程序和服务器之间的信息交换是 JSON 格式的（在服务器上搜索用户和数据、发送消息、对话线程等）但是所有这些功能都运行得太慢了。我单击“发送”按钮，然后等待几秒钟，然后发送消息，搜索，授权等也是如此。所以我有这样一个问题：

1\. 为什么会有这么大的性能开销？

2\. 可能是服务器端的问题，还是 JSON 解析器的问题，或者可能是其他问题？

3\. 我该如何修复/优化这个？所有解决方案、建议等都会有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:20:11.167

我可以为您节省一些时间 - 它与 JSON 无关。它与您的应用程序通常如何处理请求有关。它显然需要在服务器上进行优化。

编辑：

我想这也可能是您在手机上遇到了高延迟，但同样，这与您的应用程序无关。

使用常规浏览器和 chrome 开发工具（在网络选项卡中）对其进行调试 - 您会看到即使在桌面上请求也需要很长时间，此时您必须开始在服务器端代码中寻找以查看是什么让它变慢（提示：未优化的数据库查询是一个很大的瓶颈......但话又说回来，蹩脚的硬件也是如此）。

抱歉，我无法提供更多帮助，但没有看到服务器的整个设置和运行缓慢的代码（不是客户端请求，而是服务器代码），这是我能做的最好的事情。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:56:32.927

我会使用 Xcode 来调试应用程序，看看大部分时间是花在从服务器加载数据还是在接收到数据后解析 JSON。

如果是第一次，请尝试通过同一无线连接从 PC 加载数据，看看它是否也很慢。如果是这样，显然您的服务器端代码需要优化。

如果是第二个并且解析速度很慢，您可能需要考虑使用[JSONKit](https://github.com/johnezang/JSONKit)而不是原生 JSON 解析器，因为测试表明它更快。您可能还想查看 JSON 的结构。

然而，我注意到的一件事是我的 iPad 上的连接速度比其他机器上的慢。在将我在模拟器中开发的应用程序与在同一网络上的设备上进行比较以及进行速度测试时，我注意到了这一点。至于为什么会发生这种情况，我不确定——也许是 iOS 中某种形式的额外开销。

# objective-c - 如何创建不在应用程序委托中的标签栏控制器

> ID：13727617
> 
> 赞同：0
> 
> 时间：2012-12-05T16:17:48.257
> 
> 标签：objective-c, ios, cocoa-touch, ios5, ios4

我正在尝试执行以下操作：

1.  在应用程序中显示启动页面。
2.  尝试通过 ping 我的网站来登录用户。如果用户已登录，则转换到具有 3 个选项卡和每个选项卡的导航控制器的选项卡控制器。
3.  如果用户未登录，则转换到具有 3 个选项卡的选项卡控制器，但每个选项卡将用户带到不同的页面（登录、注册、了解更多）

如何在视图控制器中而不是在应用程序委托中添加选项卡控制器？

我打算做以下事情

在应用程序委托中将 rootController 设置为 viewcontroller1

```
UIViewController * viewController1;
viewController1 = [[HTLoginViewController alloc] initWithNibName:@"HTLoginViewController_iPhone" bundle:nil];
self.window.rootViewController = viewController1; 
```

然后在 viewcontroller1 调用下面的 setTab 函数

-(void)setTab { self.tabBarController = [[UITabBarController alloc] init];

```
UIViewController * viewController1, *viewController2, *viewController3;

viewController1 = [[HTMyJobsViewController alloc] initWithNibName:@"HTMyJobsViewController" bundle:nil];
viewController2 = [[MTViewController alloc] initWithNibName:@"MTViewController" bundle:nil];
viewController3 = [[HTInviteController alloc] initWithNibName:@"HTInviteController" bundle:nil];

viewController1.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:1];

// account view
UINavigationController * firstNavController = [[UINavigationController alloc]initWithRootViewController: viewController1];
viewController2.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:2];

// book view
UINavigationController * secondNavController = [[UINavigationController alloc]initWithRootViewController: viewController2];
viewController3.tabBarItem = [[UITabBarItem alloc]initWithTabBarSystemItem:UITabBarSystemItemFavorites tag:3];

// invite view
UINavigationController * thirdNavController = [[UINavigationController alloc]initWithRootViewController: viewController3];

CATransition *transition = [CATransition animation];
transition.duration = 0.7f;
transition.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
transition.type = kCATransitionFade;

[firstNavController.view.layer addAnimation: transition forKey:nil];
[secondNavController.view.layer addAnimation: transition forKey:nil];
[thirdNavController.view.layer addAnimation: transition forKey:nil];

self.tabBarController.viewControllers = [[NSArray alloc] initWithObjects: firstNavController, secondNavController, thirdNavController,  nil];
self.tabBarController.delegate = self;
self.tabBarController.selectedIndex = 1;

HTAppDelegate*appDelegate = (HTAppDelegate *)[[UIApplication sharedApplication] delegate];

appDelegate.serivceImg=[[UIImageView alloc]initWithFrame:CGRectMake(0, appDelegate.window.frame.size.height - 66, 108, 58)];
appDelegate.serivceImg.image=[UIImage imageNamed: @"tabi_01.png"];

appDelegate.contactImg=[[UIImageView alloc]initWithFrame:CGRectMake(108,  appDelegate.window.frame.size.height - 66, 107, 58)];
appDelegate.contactImg.image=[UIImage imageNamed: @"tabi_02.png"];

appDelegate.bookingImg=[[UIImageView alloc]initWithFrame:CGRectMake(215,  appDelegate.window.frame.size.height - 66, 105, 58)];

appDelegate.bookingImg.image=[UIImage imageNamed: @"tabi_03.png"];
[ self.tabBarController.view addSubview: appDelegate.serivceImg];
[ self.tabBarController.view addSubview: appDelegate.contactImg];
[ self.tabBarController.view addSubview: appDelegate.bookingImg];

self.tabBarController.tabBar.frame = CGRectMake(0,  appDelegate.window.frame.size.height - 45, 320, 45);

[self.view addSubview: self.tabBarController.view]; 
```

完成这项工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:31:45.190

我会尝试使用不同的结构。首先，在应用委托中创建标签栏控制器及其三个内容控制器，并使其成为窗口的根视图控制器。在第一个选项卡的控制器中，在 viewDidAppearAnimated: 方法中模态显示您的启动页面——这将使该视图成为第一个被看到的视图（如果您将动画设置为 NO）。如果登录成功，只需关闭模态视图控制器，就可以开始了。如果登录失败，创建 3 个新的内容控制器，将它们设置为标签栏控制器的 viewControllers 属性，然后关闭模式。这样，您只需要一个标签栏控制器，它是根视图控制器，这是更常见的设置。

# rest - REST - URL 中的实体（哈希）版本与用于客户端缓存的 etags

> ID：13727620
> 
> 赞同：5
> 
> 时间：2012-12-05T16:17:56.930
> 
> 标签：rest, caching

我正在设计一个 REST API，最近我考虑了如何充分利用动态内容的缓存（在我得到关于[这个主题](https://stackoverflow.com/questions/13627551/rest-api-attribute-filter-in-media-type-parameters)的响应之后），同时尊重 HTTP（以及因此 REST）的原则。

显然，规范的解决方案（至少在我的理解中）是使用 etags，但这不会以任何方式减少请求的数量，只会减少大小。

我正在考虑在 URL 中嵌入一个版本（它将由服务器生成，基于实际内容 - 无论是序列号还是一些哈希）。我将解释该方案和用户场景以及我认为它会如何帮助，然后提出我的问题。

**设置**

```
GET /entity/{id}/ 
```

返回临时重定向`/entity/{id}/{current_version}`和无缓存标头。

```
GET /entity/{latest_version}/ 
```

永远返回带有缓存的 OK 响应。

```
GET /entity/{old_version}/ 
```

返回 410 Gone （我不想真正保留旧版本）。

GET /entity/?[查询]

是一些搜索，它返回指向*当前*结果实体版本的链接列表。没有缓存。

**使用场景以及我认为它会如何帮助**

用户应用程序 (AJAX) 总是从某种查询开始，然后它必须提取实体的描述。由于预计单个客户端结果集的更改不会非常动态，因此使用上述方案和客户端每次都从查询中提取新结果似乎是个好主意，但如果大多数实体自上次访问以来没有更改，它们将已经缓存在浏览器中。如果这个假设成立，这将导致请求数量和总大小显着减少。

使用 etags 将导致更简单的 URI 方案，但可能更复杂和繁重的服务器端实现。

**笔记和问题**

**1** 我知道有人会建议`/entity/{id}/`应该是一个返回列表版本的集合，但版本实际上并没有存储、有用或需要。它更像是最新的同义词。我的问题是，除了一般原则之外，是否有人对此有任何问题。这是受保护的 API，在这种情况下我不关心 SEO，它对客户端是透明的。实际上，由于 API 或多或少会被超链接，因此通常不会直接调用 /entity/{id}/，而是使用返回的任何结果。例如，它可以用于上下文无关链接。

**2** 我对旧版本的 410 Gone 有一些疑问。一方面，这个版本不再可用，客户也不应该访问它。另一方面，如果客户端最终要求它（无论出于何种原因），将永久重定向返回到 /entity/{id}/ 可能是有意义的（可能比临时重定向到当前版本更好）。

**3** 说到重定向。301 固定用于永久重定向，但 302 是临时重定向的最佳选择吗？最重要的是浏览器支持（它将是 AJAX）。

**4** 当然，主要问题是使用 URL 而不是 etag 进行缓存（希望浏览器缓存）。如果有人在高负载下有真正的经验（相对于服务器功能，咳咳），我将不胜感激。

**补充说明**

经过更多研究后，版本化资源存在问题，它是链接资源的更新传播。有两种选择：

1.  链接资源的特定版本。这意味着服务器端逻辑将很繁琐，因为必须通过反向链接为链接资源传播更新；

2.  链接 /latest/ 版本。这意味着即使资源和链接资源的具体版本都在本地缓存，客户端（浏览器）也必须向 /latest/ 发出请求，以便“检查”链接资源的最新版本。当然，这是一个小请求（仅重定向），如果资源没有更改位置，则已缓存。一个问题可能是经常从此类链接中提取资源（与特定版本的查询结果相反）。另一个（更糟糕的）问题是，实际上旧版本的资源正在链接另一个的最新版本 - 它可能是数据不一致（即有人编辑了文档并更改了链接的附件 - 客户端将拥有旧版本的文档和新版本用于附件）。

两种选择都不令人满意。在这种情况下，动态数据的缓存仅适用于“叶”级资源 - 不链接到任何其他资源的资源，胸围仅具有直接属性值。

**最后的笔记**

经过研究和讨论，版本化资源并不是通用架构中最聪明的想法。经过测量并有机会，可以在规范 API 中为“普通”资源进行改造。我会接受 Roysvork 的评论（'我认为这很困难的原因是这不是一个非常好的主意。'）作为解决方案，如果它是一个单独的答案:)

# asp.net-mvc-3 - 某些客户端上的 ASP.NET MVC 错误，但不是全部

> ID：13727621
> 
> 赞同：0
> 
> 时间：2012-12-05T16:17:58.053
> 
> 标签：asp.net-mvc-3

我有一个 ASP.NET MVC 3 站点，它在调试器和其他几台 PC 上都可以正常工作。但是，在某些客户端/电脑上，我在尝试访问信息时只会收到一条错误消息：

错误。处理您的请求时发生错误。

任何想法为什么这不会一直发生以及如何追查问题？

# .net - 为什么 IDataErrorInfo 中的 columnName 属性返回一个空字符串？

> ID：13727626
> 
> 赞同：1
> 
> 时间：2012-12-05T16:18:02.207
> 
> 标签：.net, wpf, telerik-grid, idataerrorinfo

我正在使用 .NET 4.0 框架开发 WPF 应用程序，并使用 Telerik RadGridView 来显示各种数据。RadGridView 绑定到从 SQL 数据库填充的 Observable 集合。我正在使用 IDataErrorInfo 来处理行验证，但是当我单步执行代码时，大多数 columnNames 似乎是空字符串事件，尽管我知道情况并非如此。我将验证定义如下：

```
public partial class DataRow : IDataErrorInfo
{
    public string Error
    {
        get { return null; }
    }
    public string this[string columnName]
    {
        get
        {
            return this.GetResult(columnName);
        }
    }

    private string GetResult(string columnName)
    {
        switch (columnName)
        {
            case "Column1":
                if (string.IsNullOrEmpty(this.Column2))
                {
                    return "Error";
                }
                break;
            case "Column2":
                if (string.IsNullOrEmpty(this.Column3))
                {
                    return "Error with Column 2";
                }
                break;
            case "Column3":
                break;
            case "Column4":
                if (!string.IsNullOrEmpty(this.Column4))
                {
                    return "Column 4 is not null or empty";
                }
                break;
            case "Column5":
                if (this.Column5 <= 0)
                {
                    return "Column 5 must be greater than zero";
                }
                break;
            default:
                break;
        }

        return null;
    }
} 
```

DataRow 的成员在 SQL 数据库中定义。我已经运行并逐步执行了代码，并且一直在进行 Column1 验证和 Column3 验证，但是当调用任何其他列时，columnName 是一个空字符串。我知道是这种情况，因为当我将验证规则修改为如下：

```
private string GetResult(string columnName)
{
    switch (columnName)
    {
        case "Column1":
            if (string.IsNullOrEmpty(this.Column2))
            {
                return "Error";
            }
            break;
        case "":
            return "This column is in error";
            break;
        default:
            break;
    }
    return null;
} 
```

我在 Column2、Column4 和 Column5 上遇到错误。

到目前为止，我一直无法找到其他人是否遇到过这个问题。任何帮助将不胜感激。

谢谢！

# android - HTML5 Web SQL 数据库问题

> ID：13727628
> 
> 赞同：3
> 
> 时间：2012-12-05T16:18:07.960
> 
> 标签：android, ios, cordova, web-sql

我的公司目前正在过渡到一种新的架构，以及一种为移动设备提供服务的模型。我们的应用程序传统上是基于 Web 的 ( **HTML5/CSS3/JS/PHP/MYSQL** )，因此我们希望能够将其移植到移动平台而无需重新发明轮子 ( **Cordova** )，以及以独立方式移植到桌面 ( **AppJS**），这样我们就不必担心依赖于浏览器的错误。我们也正在从**PHP**过渡到**NodeJS**，以使其更加可行。

**问题是我们的用户需要能够离线使用我们的应用程序，在将数据“同步”到我们的服务器之前，他们可以存储多长时间或多少数据没有真正的限制。**

使用 AppJS，这不是问题，因为它们可以在 sqlite 数据库中存储尽可能多的数据。但是，我发现了有关WebSQL 数据和 cordova/phonegap的**5MB 配额的问题。**这对我们的业务需求提出了明显的技术挑战。

**我知道有几个插件可以让您使用 sqlite 数据。** 原始 sqlite 插件 (https://github.com/davibe/Phonegap-SQLitePlugin) 缺少 android 文档，而另一个 (https://github.com/chbrody/Cordova-SQLitePlugin) 要求我指定数据限制显然是不可能的。因此，我只剩下很少的选择，一种是将数据库拆分为多个 5MB 的段，这些段由 JS 包装器控制。

***您能否将较大的数据结构拆分为多个 5MB 的 websql 数据库，并且在 iOS 和 Android 上都没有问题？***

***iOS和android上的websql数据库总数有限制吗？***

***您是否会建议我们查看其他选项？我们需要能够将我们现有的 HTML5 和 CSS 用于前端！***

**编辑**

*我们最初的架构从未真正适用于平板设备。这是我们希望通过cordova 来解决的问题，以及构建更稳定的解决方案。最初，我们的离线产品在 Server2Go 堆栈上运行，由于客户端机器上运行的各种应用程序存在各种平台问题*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:29:56.943

对于 android 平台，您可以创建一个原生应用程序，然后使用 webview 显示前端（如果保留 HTML 真的那么重要），然后使用 javascript 桥允许 WebView 中的内容与您的交互本机应用程序。

不过，根据您对应用程序的描述，我认为您最好实际创建一个本机应用程序。正如您在评论中所说，您切换平台的原因之一是缺乏控制。为什么然后通过将各种混合应用程序框架引入您的堆栈来立即重新打开这个蠕虫罐。

长话短说，如果您只采用原生方法，您将拥有完全的控制权（并且很可能是更好的产品）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:32:27.560

一般来说，我建议使用草坪椅，这样您就可以与实施无关。[http://brian.io/lawnchair/adapters/](http://brian.io/lawnchair/adapters/)

> 您能否将较大的数据结构拆分为多个 5MB 的 websql 数据库，并且在 iOS 和 Android 上都没有问题？

在我了解草坪椅之前，我[使用 WebSQL 实现了这个](http://kiosk.reevesimportmotorcars.com/js/data.js)，我有点后悔。WebSQL 数据库可以增长到超过 5MB。我不确定真正的最大值是多少，但我已将 Phonegap 应用程序设置为 100 * 1024 * 1024 并且在 Honeycomb Android 上没有任何问题。

对于 iOS，您可以[在 PhoneGap/iOS 上使用 SQLite 数据库 - 可能超过 5mb](https://stackoverflow.com/questions/8987238/sqlite-database-on-phonegap-ios-more-than-5mb-possible)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T20:02:50.260

为了获得一个真正的跨平台、跨浏览器的关系解决方案，可以离线工作并具有必要的存储容量，我建议使用： [SequelSphere](http://www.sequelsphere.com)

由于它是一个 100% 的 JavaScript 解决方案，它应该可以在您的每个配置中使用，而无需为每个配置提供不同的代码库。此外，它使用 IndexedDB（如果可用，然后是 LocalStorage）将其数据存储在关系表中。我相信大多数浏览器对 IndexedDB 的存储量没有大小限制。我认为 Firefox 可能有以下 50MB 的初始限制： [IndexedDB 中的最大大小](https://stackoverflow.com/questions/5692820/max-size-in-indexeddb)。

此外，还有一个名为“更改跟踪器”的新功能，它通过跟踪表的更改（插入/更新/删除），然后在您需要时向您报告，从而显着帮助数据同步过程。

作为一个额外的好处，与 WebSQL 不同，SequelSphere 对 JSON 非常友好。创建表格再简单不过了：

```
db.catalog.createTable({
    tableName: "EMPL",
    columns: [ "EMPL_ID", "NAME", "AGE", "DEPT_ID" ],
    primaryKey: [ "EMPL_ID" ],
    data: [
        [0,"Bob",32,0],
        [1,"John",37,2],
        [2,"Fred",28,1]
    ]
}); 
```

查询数据很简单：

```
var res = db.query("SELECT name, age, dept_id FROM empl WHERE Dept_ID = 2"); 
```

插入/更新/删除数据很容易：

```
db.insertRow("empl", [3, "Sue", 26, 2]);
db.updateRow("empl", [3, "Suzy", 26, 2]);
db.deleteRow("empl", [3, "Suzy", 26, 2]); 
```

需要注意的一件事：由于这将在离线应用程序中使用，请确保将整个目录或每个表的“持久性范围”设置为“SCOPE_LOCAL”：

```
db.catalog.setPersistenceScope(db.SCOPE_LOCAL);
//  -or-
db.catalog.getTable("empl").setPersistenceScope(db.SCOPE_LOCAL); 
```

*   基础文档： [SequelSphere Basics](http://www.sequelsphere.com/how-it-works/code-sample/)
*   关于“本地存储”支持的文档： [本地数据存储和持久性](http://www.sequelsphere.com/dbdocs/local-data-storage/)
*   这是 API： [SequelSphere API](http://www.sequelsphere.com/dbdocs/api-documentation/)

如果您有任何问题，只需通过电子邮件发送 SequelSphere 支持。

为了完全透明，我是 SequelSphere 的一部分，它似乎很好地回答了你的问题...... ;)

# python - 在 Python 中操作数据结构

> ID：13727629
> 
> 赞同：1
> 
> 时间：2012-12-05T16:18:09.567
> 
> 标签：python, data-structures, dictionary, infovis

我有 JSON 格式的数据：

```
data = {"outfit":{"shirt":"red,"pants":{"jeans":"blue","trousers":"khaki"}}} 
```

我正在尝试使用 InfoVis 将这些数据绘制到决策树中，因为它看起来很漂亮且具有交互性。问题是他们的图表采用这种格式的 JSON 数据：

```
data = {id:"nodeOutfit",
    name:"outfit",
    data:{},
    children:[{
        id:"nodeShirt",
        name:"shirt",
        data:{},
        children:[{
            id:"nodeRed",
            name:"red",
                   data:{},
                   children:[]
        }],
     },  {
         id:"nodePants",
         name:"pants",
         data:{},
         children:[{
             id:"nodeJeans",
             name:"jeans",
             data:{},
             children:[{
                    id:"nodeBlue",
                    name:"blue",
                    data:{},
                    children[]
             },{
             id:"nodeTrousers",
             name:"trousers",
             data:{},
             children:[{
                    id:"nodeKhaki",
                    name:"khaki",
                    data:{},
                    children:[]
          }
    } 
```

请注意在每个键和值中添加了“id”、“数据”和“子项”，并将每个键和值称为“名称”。我觉得我必须编写一个递归函数来添加这些额外的值。是否有捷径可寻？

这就是我想做的，但我不确定这是否是正确的方法。循环遍历所有键和值并将它们替换为适当的：

```
for name, list in data.iteritems():
    for dict in list:
        for key, value in dict.items():
            #Need something here which changes the value for each key and values
            #Not sure about the syntax to change "outfit" to name:"outfit" as well as
            #adding id:"nodeOutfit", data:{}, and 'children' before the value 
```

让我知道我是否离开。

这是他们的示例[http://philogb.github.com/jit/static/v20/Jit/Examples/Spacetree/example1.html](http://philogb.github.com/jit/static/v20/Jit/Examples/Spacetree/example1.html)

这是数据[http://philogb.github.com/jit/static/v20/Jit/Examples/Spacetree/example1.code.html](http://philogb.github.com/jit/static/v20/Jit/Examples/Spacetree/example1.code.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:06:32.690

一个简单的递归解决方案：

```
data = {"outfit":{"shirt":"red","pants":{"jeans":"blue","trousers":"khaki"}}}
import json
from collections import OrderedDict

def node(name, children):
    n = OrderedDict()
    n['id'] = 'node' + name.capitalize()
    n['name'] = name
    n['data'] = {}
    n['children'] = children
    return n

def convert(d):
    if type(d) == dict:
        return [node(k, convert(v)) for k, v in d.items()]
    else:
        return [node(d, [])]

print(json.dumps(convert(data), indent=True)) 
```

请注意，`convert`返回 a `list`，而不是 a `dict`，因为`data`也可以有多个键然后只是`'outfit'`。

输出：

```
[
 {
  "id": "nodeOutfit",
  “名称”：“服装”，
  “数据”： {}，
  “孩子们”： [
   {
    “id”：“节点衬衫”，
    “名称”：“衬衫”，
    “数据”： {}，
    “孩子们”： [
     {
      "id": "nodeRed",
      “名称”：“红色”，
      “数据”： {}，
      “孩子们”： []
     }
    ]
   },
   {
    "id": "节点裤",
    “名称”：“裤子”，
    “数据”： {}，
    “孩子们”： [
     {
      "id": "nodeJeans",
      “名称”：“牛仔裤”，
      “数据”： {}，
      “孩子们”： [
       {
        “id”：“nodeBlue”，
        “名称”：“蓝色”，
        “数据”： {}，
        “孩子们”： []
       }
      ]
     },
     {
      "id": "nodeTrousers",
      “名称”：“裤子”，
      “数据”： {}，
      “孩子们”： [
       {
        "id": "nodeKhaki",
        “名称”：“卡其色”，
        “数据”： {}，
        “孩子们”： []
       }
      ]
     }
    ]
   }
  ]
 }
]

```

# sql - 使用 select + 新信息插入

> ID：13727634
> 
> 赞同：0
> 
> 时间：2012-12-05T16:18:23.373
> 
> 标签：sql, postgresql

我正在尝试编写一个 sql 查询，该查询可以从表中复制特定列并将其插入同一个表中 + 其他列的额外信息

简单地复制某些信息将是这样的：

```
INSERT INTO table (column1, column2)
SELECT column1, column2
FROM table
WHERE columnx = 'some value' 
```

但我还需要在 column3 中插入​​一些新信息。我怎样才能做到这一点？

我有将进入“column3”的信息，我不必从其他表或来源获取它。

这是重复约会，除了日期、计划者和约会 ID 之外，基本上所有信息都相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:20:23.413

如果您知道这些值是什么。. .

```
INSERT INTO table (column1, column2, column3)
SELECT column1, column2, <value for column3>
FROM table
WHERE columnx = 'some value' 
```

# php - 如何从 php 启动-停止 perl 守护进程

> ID：13727639
> 
> 赞同：4
> 
> 时间：2012-12-05T16:18:46.603
> 
> 标签：php, perl, daemon

我需要从 Web 应用程序 (php) 控制 (start\stop\restart) perl 守护进程。当我从命令行使用我的初始化脚本 (/etc/init.d/foodaemon start (works fine)) 时，守护程序正确启动（并运行），但不起作用（守护程序已关闭但创建了 pid 文件，就好像当我尝试从应用程序启动时，守护进程在创建后死亡）。在我的 /etc/sudoers 中，我添加了

```
apache  ALL = NOPASSWD: /etc/init.d/foodaemon 
```

在我的 php 脚本中，

```
$cmd = "/usr/bin/sudo /etc/init.d/foodaemon start";                             
exec($cmd,$out,$ret); 
```

我拥有所有权限。perl 脚本是

```
#!/usr/bin/perl
use strict;
use warnings;
use Proc::Daemon;
Proc::Daemon::Init;

my $continue = 1;
$SIG{TERM} = sub { $continue = 0 };

close STDIN;
open STDERR,">>/tmp/mylog";
print "My pid: $$\n";
close STDOUT;

while ($continue) {

        # ... what I need        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:40:52.630

已解决...我的 init.d 脚本中有错误，或者更确切地说

```
case "$1" in
    start)
        if [ -z "$(pgrep $DAEMON)" ]
        then

            # DAEMON is not running                         
            printf "%-50s" "Starting $NAME..."

            cd $DAEMON_PATH
            PID=`$DAEMON > /dev/null 2>&1 & echo $!`

            #echo "Saving PID" $PID " to " $PIDFILE
            if [ -z $PID ]; then
                printf "%s\n" "Fail" 
```

我没有权限做

```
cd $DAEMON_PATH 
```

所以，我更新如下

```
 #cd $DAEMON_PATH
 PID=`$DAEMON_PATH/$DAEMON > /dev/null 2>&1 & echo $!` 
```

它有效......对不起......

# java - 有没有办法制作一个可以在 Java 中使用 [] 的自定义类，类似于数组？

> ID：13727642
> 
> 赞同：9
> 
> 时间：2012-12-05T16:18:57.777
> 
> 标签：java, arrays, class, accessor

使用Java，有没有办法制作一个可以像数组一样使用 [] 访问器的自定义类？

普通数组

```
int[] foo = int[5];
foo[4] = 5;
print(foo[4]);
//Output: "5" 
```

自定义类

```
class Bar {
    //Custom class that uses index as a ref
}

Bar foo = new Bar(5);
foo.set(4, 5);
print(foo[4]);
//Output: "5" 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T16:20:30.097

不，您不能`[]`在`Java`. 但是您可以为您的数组创建吸气剂。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T16:20:38.553

不，Java 没有任何运算符重载。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T16:22:05.790

不，您必须实现您的`public <Type> get(int index){ ... }`方法，`ArrayList`例如。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T16:29:23.400

不，要做到这一点，Java 必须添加运算符重载`[`and `]`- 您需要使用等效的 get / set 方法。

据我所知，目前没有为任何未来版本的 Java 实现运算符重载的计划——它绝对不在 Java 8 的计划中，Oracle 就 Java 9 及更高版本进行的讨论也不包括它的计划。就我个人而言，我不喜欢它 - 它引入了许多复杂性，例如优先级和顺序，除非用户非常小心，否则可能会导致微妙、烦人的错误，并且（无论你是否同意这种立场）我相信这是决定首先将其从语言中排除的原因。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-12-05T16:24:39.907

# 当然，

尝试

```
Bar[] foo = new Bar[4];
foo[2] = new Bar();
System.out.print(foo[2]); 
```

问候

# paypal - 贝宝沙盒。10609 交易ID无效

> ID：13727643
> 
> 赞同：1
> 
> 时间：2012-12-05T16:18:58.993
> 
> 标签：paypal, paypal-sandbox

我究竟做错了什么？我使用 PayPal Payments Pro 沙盒测试帐户。

1.  我执行`DoDirectPayment() where PaymentAction=PaymentActionCodeType.Authorization`
2.  我收到“成功”和`TransactionID`
3.  我`DoVoid() where AuthorizationID = TransactionID`从第 2 步开始执行
4.  我收到`"10609 Transaction id is invalid."`

与 相同`DoAuthorization()`。

1.  我执行`DoDirectPayment() where PaymentAction=PaymentActionCodeType.Order`
2.  我收到“成功”和`TransactionID`
3.  我`DoAuthorization() where TransactionID = TransactionID`从第 2 步开始执行
4.  我收到 ”`10609 Transaction id is invalid."`

**升级版：**
`<DoDirectPaymentRequest><Version xmlns="urn:ebay:apis:eBLBaseComponents">95.0</Version><DoDirectPaymentRequestDetails xmlns="urn:ebay:apis:eBLBaseComponents"><PaymentAction>Sale</PaymentAction><PaymentDetails><OrderTotal currencyID="USD">951</OrderTotal></PaymentDetails><CreditCard><CreditCardNumber>4998275181667886</CreditCardNumber><ExpMonth>12</ExpMonth><ExpYear>2017</ExpYear><CardOwner><PayerName><FirstName>Nazar</FirstName><LastName>Nazar</LastName></PayerName><Address><Street1>dfgdfgdfg</Street1><CityName>Manhattan</CityName><StateOrProvince>NY</StateOrProvince><Country>US</Country><PostalCode>10005</PostalCode></Address></CardOwner><CVV2>030</CVV2></CreditCard></DoDirectPaymentRequestDetails></DoDirectPaymentRequest></DoDirectPaymentReq>`

`<DoDirectPaymentResponse xmlns="urn:ebay:api:PayPalAPI"><Timestamp xmlns="urn:ebay:apis:eBLBaseComponents">2012-12-06T15:23:13Z</Timestamp><Ack xmlns="urn:ebay:apis:eBLBaseComponents">Success</Ack><CorrelationID xmlns="urn:ebay:apis:eBLBaseComponents">32db76f5d7828</CorrelationID><Version xmlns="urn:ebay:apis:eBLBaseComponents">95.0</Version><Build xmlns="urn:ebay:apis:eBLBaseComponents">4137385</Build><Amount xsi:type="cc:BasicAmountType" currencyID="USD">951.00</Amount><AVSCode xsi:type="xs:string">X</AVSCode><CVV2Code xsi:type="xs:string">M</CVV2Code><TransactionID>1R649887J67078538</TransactionID></DoDirectPaymentResponse>`

*抱歉，没有复制所有*
**UPD2：** `<DoVoidReq xmlns="urn:ebay:api:PayPalAPI"><DoVoidRequest><Version xmlns="urn:ebay:apis:eBLBaseComponents">95.0</Version><AuthorizationID>1R649887J67078538</AuthorizationID></DoVoidRequest></DoVoidReq>`

`<DoVoidResponse xmlns="urn:ebay:api:PayPalAPI"><Timestamp xmlns="urn:ebay:apis:eBLBaseComponents">2012-12-06T15:23:15Z</Timestamp><Ack xmlns="urn:ebay:apis:eBLBaseComponents">Failure</Ack><CorrelationID xmlns="urn:ebay:apis:eBLBaseComponents">f8795daa4b104</CorrelationID><Errors xmlns="urn:ebay:apis:eBLBaseComponents" xsi:type="ebl:ErrorType"><ShortMessage xsi:type="xs:string">Invalid transactionID.</ShortMessage><LongMessage xsi:type="xs:string">Transaction id is invalid.</LongMessage><ErrorCode xsi:type="xs:token">10609</ErrorCode><SeverityCode xmlns="urn:ebay:apis:eBLBaseComponents">Error</SeverityCode></Errors><Version xmlns="urn:ebay:apis:eBLBaseComponents">95.0</Version><Build xmlns="urn:ebay:apis:eBLBaseComponents">4181146</Build><AuthorizationID xsi:type="xs:string"></AuthorizationID></DoVoidResponse>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:43:05.643

您的 DoVoid 请求看起来不太正确。你有...

```
<DoVoidRequest>
  <Version xmlns="urn:ebay:apis:eBLBaseComponents">95.0</Version>
  <AuthorizationID>1R649887J67078538</AuthorizationID>
</DoVoidRequest>
</DoVoidReq> 
```

它应该是...

```
<DoVoidReq>
    <DoVoidRequest>
      <Version xmlns="urn:ebay:apis:eBLBaseComponents">95.0</Version>
      <AuthorizationID>1R649887J67078538</AuthorizationID>
    </DoVoidRequest>
</DoVoidReq> 
```

# c++ - 什么是 C++ 中的“注册一个类”

> ID：13727644
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:19:00.517
> 
> 标签：c++, oop

如果我们谈论的是 C++ 和 OOP，而不是寄存器、COM 或其他一些库，那么“注册一个类”是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T16:28:49.473

在纯 C++ 的上下文中，不考虑任何特定的平台或库，“注册一个类”**没有任何意义**。这不是语言概念，也不是我所知道的任何设计模式。

然而，它在 Windows 世界中至少有两个含义。对于后代和未来的读者：

1.  您可以[注册一个 Window 类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633587%28v=vs.85%29.aspx)。Window 类包含一些基本功能和其他影响特定窗口在屏幕上的行为方式的参数。
2.  您可以注册一个 COM 类，以便客户端可以实例化该 COM 类的特定实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:21:54.390

“上下文在关于 OOD 的文章中，有人说最好的做法是计划你的课程，以便改变程序的某些方面就足以编写新课程，注册它并获得新员工”

现在在我看来，您正在谈论发布者/订阅者模式。它允许调用者和被调用者之间的松散耦合。

您可以在 GoF 书籍或此处找到 C++ 实现的任何地方： [http ://rtmatheson.com/2010/03/working-on-the-subject-observer-pattern/](http://rtmatheson.com/2010/03/working-on-the-subject-observer-pattern/)

# asp.net-mvc - 从模型中返回 HtmlString 并在视图中显示

> ID：13727646
> 
> 赞同：1
> 
> 时间：2012-12-05T16:19:07.977
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html-helper, mvchtmlstring

让我先说我知道我可以使用**HTML.Raw()**来显示包含在字符串中的 HTML。但是，我认为 MVC 的目的是分离代码逻辑，让前端开发人员专注于 UI 而不是逻辑。因此，我尝试完全按照我想要的样子传递模型中的所有内容。

这让我想到了我的问题。我有一个包含地址的模型。我编写了一个函数，它以几个不同的版本（单行、两行、多行）返回地址，并且我将它们设置为**HtmlString**对象。

```
public HtmlString TwoLine { get { return ReturnFullAddress(2); } }
/* function removed for brevity */ 
```

但是，当我编写以下剃须刀代码时：

```
@Html.DisplayFor(modelItem => item.Address.TwoLine) 
```

视图中不返回任何文本。当我调试它时，在 Address.TwoLine 中有一个正确分配的值，但它在 {} 内（我认为这很奇怪）。

我该如何进行这项工作，或者为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:23:52.730

`DisplayFor()`不知道如何处理`HtmlString`属性。
您应该直接打印该值：`@Model.Address.TwoLine`

# log4net - 我可以记录自定义异常属性吗？

> ID：13727648
> 
> 赞同：3
> 
> 时间：2012-12-05T16:19:20.103
> 
> 标签：log4net

我有一些从具有自定义属性的 Exception 继承的自定义异常

例如

```
[Serializable]
public class MyException : Exception
{
    public MyException(string message, string myProperty)
    {
        MyProperty = myProperty
    }

    public string MyProperty {get; set;}
} 
```

我想自动将每个自定义属性添加到我的 log4net 日志中。有没有内置的方法可以做到这一点，还是我需要创建某种自定义附加程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:35:37.433

您可以使用 向 log4net 添加自定义字段`GlobalContext.Properties`，如下所示：

```
GlobalContext.Properties["MyProperty"] = customException.MyProperty; 
```

然后，在您的 appender 配置中，您可以使用`%property{MyProperty}`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:11:41.250

您可以在自定义异常中覆盖 .ToString() 方法，并将输出附加到基本 .ToString() 方法。

# git - 使用两个存储库限制 GIT 中的推送访问

> ID：13727662
> 
> 赞同：0
> 
> 时间：2012-12-05T16:20:19.920
> 
> 标签：git, version-control

我的公司目前有 1 个中央 git 存储库，其中包含我们所有的代码（我们称之为 repoCentral）

我的 4 人团队有兴趣为中央存储库中的一些关键脚本做一些功能开发工作。

我希望我团队中的每个人都能够从中央存储库中提取，但我想禁止他们推送到中央存储库，并且只允许自己这样做。

我认为最好的办法是创建第二个 repo（我们称之为 repoMyTeam），它是 repoCentral 的克隆，并让我的团队从 repoMyTeam 克隆并提交给 repoMyTeam。然后每两周，我会将 repotTwo 中的所有更改推送到 repoCentral。

我的主要问题是我希望我的团队能够始终与 repoCentral 保持同步，而且我似乎必须非常频繁地将 repoCentral 手动下拉到 repoMyTeam 中，以确保我的团队成员在他们获得最新的 repoCentral 更改时运行“git pull repoMyTeam”

有没有更简单的方法来完成这个？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:21:55.200

设置 HTTP 访问，这将允许每个人从存储库中提取。

然后为特定用户配置 SSH 访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:50:40.473

如果您只需要一个分支，我会创建一个特殊的分支并告诉您的团队他们不允许进入该分支或将任何内容推送到该分支。同样的结果，更少的麻烦:)。

# c++ - 为什么简单的 bimap ( std::string <-> int) 不起作用？

> ID：13727679
> 
> 赞同：1
> 
> 时间：2012-12-05T16:21:13.513
> 
> 标签：c++, type-conversion

下面显示了一个关于 C++ 模板和类型转换的令人费解的问题......为了让我的生活更轻松，我定义了一个模板类来使用类 BiMap 对一对一关系进行建模：

```
#include <stdio.h>
#include <stdlib.h>
#include <map>   
#include <string>

template<class T1, class T2>
class BiMap {
 public:
  T2& operator[] (T1& t1) {
    return d1[t1];
  }
  T1& operator[] (T2& t2) {
    return d2[t2];
  }
 private:
  std::map<T1, T2> d1;
  std::map<T2, T1> d2;
};

int main(int argc, char *argv[])
{

  BiMap<std::string, int> m;
  m["1"] = 2;
  m[2] = 3;

  printf("%d", m["1"]);
  printf("%d", m[2]); 
  return 0;     
} 
```

但我得到这个编译错误：

```
testPedigree.cpp:45: error: no match for ‘operator[]’ in ‘m["1"]’
testPedigree.cpp:16: note: candidates are: T2& BiMap<T1, T2>::operator[](T1&) [with T1 = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, T2 = int]
testPedigree.cpp:19: note:                 T1& BiMap<T1, T2>::operator[](T2&) [with T1 = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, T2 = int] 
```

我期待 C++ 会自动将 const char* 转换为 std::string，正如我在这篇文章中提出的问题：[Why I can use const char* as key in std::map<std::string, int>](https://stackoverflow.com/questions/13725873/why-i-can-use-const-char-as-key-in-stdmapstdstring-int)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:23:12.017

您的代码尝试将非`const`引用绑定到临时（即，`std::string`从您的 隐式创建的`const char[]`）。只有`const`引用可以绑定到临时对象。

尝试：

```
 T2& operator[] (const T1& t1) {
    return d1[t1];
  }
  T1& operator[] (const T2& t2) {
    return d2[t2];
  } 
```

您的示例中还有其他一些微不足道的错误。这是一个更正、经过测试的程序：

```
#include <stdio.h>
#include <stdlib.h>
#include <map>
#include <string>

template<class T1, class T2>
class BiMap {
 public:
  T2& operator[] (const T1& t1) {
    return d1[t1];
  }
  T1& operator[] (const T2& t2) {
    return d2[t2];
  }
 private:
  std::map<T1, T2> d1;
  std::map<T2, T1> d2;
};

int main(int argc, char *argv[])
{

  BiMap<std::string, int> m;
  m["1"] = 2;
  m[2] = "3";

  printf("%d", m["1"]);
  printf("%s\n", m[2].c_str());
  return 0;
} 
```

# android - 应用程序开发新手。创建一个将一个类链接到另一个类的按钮？

> ID：13727680
> 
> 赞同：1
> 
> 时间：2012-12-05T16:21:15.093
> 
> 标签：android, helper, helpers

我创建了两个类。我想在 1 类（MainActivity）上有一个按钮，当它被按下时，它将带我到 2 类（字母）。我尝试了很多方法，但都没有成功。下面是我的原始代码。谁能帮我？对不起，我是应用程序开发的新手。

```
package com.example.lullabymain;

import android.os.Bundle;  
import android.app.Activity;
import android.view.Menu;
import android.media.AudioManager;
import android.media.MediaPlayer;
import android.view.View;
import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {

private MediaPlayer mp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // new code

        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        findViewById(R.id.button1).setOnClickListener(this);
        findViewById(R.id.button2).setOnClickListener(this);
        findViewById(R.id.button3).setOnClickListener(this);
        findViewById(R.id.button4).setOnClickListener(this);
        findViewById(R.id.button5).setOnClickListener(this);
    }

    public void onClick(View v) {
        int resId = 0;
        switch (v.getId()) {
        case R.id.button1: resId = R.raw.rockabye; break;
        case R.id.button2: resId = R.raw.hushlittlebaby; break;
        case R.id.button3: resId = R.raw.twinkle; break;
        case R.id.button4: resId = R.raw.hickory; break;
        case R.id.button5: resId = R.raw.oldmcd; break;

        }
        //release any resources from previous mediaplayer
        if (mp != null) {
            mp.release();
        }
        //create a new mediaplayer to play this sound
        mp = MediaPlayer.create(this, resId);
        mp.start();

    }

    @Override
    protected void  onStop()
    {
        //stop audio
        super.onStop();
        mp.stop();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

下面的代码是我尝试的代码，其中包括“意图”

```
package com.example.lullabymain;

import android.os.Bundle; 

import android.app.Activity;

import android.content.Intent;

import android.view.Menu;

import android.media.AudioManager;

import android.media.MediaPlayer;

import android.view.View;

import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {
    private MediaPlayer mp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // new code
        **View button6 = findViewById(R.id.button6);
        button6.setOnClickListener(this);**       
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        findViewById(R.id.button1).setOnClickListener(this);
        findViewById(R.id.button2).setOnClickListener(this);
        findViewById(R.id.button3).setOnClickListener(this);
        findViewById(R.id.button4).setOnClickListener(this);
        findViewById(R.id.button5).setOnClickListener(this);
    }

    public void onClick(View v) {
        int resId = 0;
        switch (v.getId()) {
        case R.id.button1: resId = R.raw.rockabye; break;
        case R.id.button2: resId = R.raw.hushlittlebaby; break;
        case R.id.button3: resId = R.raw.twinkle; break;
        case R.id.button4: resId = R.raw.hickory; break;
        case R.id.button5: resId = R.raw.oldmcd; break;
        **case R.id.button6:
            Intent i = new Intent(this, Alphabet.class);
            startActivity(i);
            break;**

        }
        //release any resources from previous mediaplayer
        if (mp != null) {
            mp.release();
        }
        //create a new mediaplayer to play this sound
        mp = MediaPlayer.create(this, resId);
        mp.start();

    }

    @Override
    protected void  onStop()
    {
        //stop audio
        super.onStop();
        mp.stop();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-30T11:10:36.703

如果你想做自定义编码，你需要学习 Objective-C 或 Swift 等语言来开发 iOS 应用程序。或者另一种方式是移动应用程序开发平台。借助应用程序开发工具，您可以使用拖放功能开发应用程序，而无需编写任何代码。

我是一名 iOS 应用程序开发人员，我尝试过大多数移动应用程序开发平台。到今天为止，我在 Phonegap、Telerik、Configure.IT 等的帮助下开发了 50 多个应用程序。它们在应用程序商店中成功运行。

根据我在该领域的经验，我建议开发人员和初学者使用像[http://www.configure.it/](http://www.configure.it/)这样的移动应用程序开发平台，因为它提供了自动编码、应用程序预览设施、直接 API 连接等等特征。这些东西节省了更多的开发时间，并在更短的时间内提供了快速且设计良好的应用程序。

这个工具的主要好处是，它是基于 Web 的平台，因此您不需要购买 Mac 系统，您可以从任何地方以及任何系统制作应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:24:57.520

目前在 MainActivity Activity 中，您没有将 setOnClickListener 添加到 button6 ，但在 onClick 方法中，您试图在 button6 click 上启动 Activity 。让你的代码工作添加`setOnClickListener`到 button6 也作为

```
public class MainActivity extends Activity implements OnClickListener {
private MediaPlayer mp;
Button button6 ;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // new code
    button6 = (Button)findViewById(R.id.button6);
    button6.setOnClickListener(this); 
```

并将清单中的字母活动注册为：

```
<activity android:name=".Alphabet" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:26:25.477

当您设置 {this} 的上下文时，您正在使用 onClickListener 的 {this}。使用 getApplicationContext();

```
Button button6 = (Button)findViewById(R.id.button6);
button6.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v){
        startActivity(new Intent(getApplicationContext(), Alphabet.class));
    }
}); 
```

您的代码抛出了哪些错误？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:42:38.967

```
package com.example.lullabymain;

import android.os.Bundle; 

import android.app.Activity;

import android.content.Intent;

import android.view.Menu;

import android.media.AudioManager;

import android.media.MediaPlayer;

import android.view.View;

import android.view.View.OnClickListener;

public class MainActivity extends Activity implements OnClickListener {
private MediaPlayer mp;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    // new code
    Button button6 = (Button)findViewById(R.id.button6);
    button6.setOnClickListener(this);      
    setVolumeControlStream(AudioManager.STREAM_MUSIC);
    findViewById(R.id.button1).setOnClickListener(this);
    findViewById(R.id.button2).setOnClickListener(this);
    findViewById(R.id.button3).setOnClickListener(this);
    findViewById(R.id.button4).setOnClickListener(this);
    findViewById(R.id.button5).setOnClickListener(this);
}

public void onClick(View v) {
    int resId = 0;
    switch (v.getId()) {
    case R.id.button1: resId = R.raw.rockabye; break;
    case R.id.button2: resId = R.raw.hushlittlebaby; break;
    case R.id.button3: resId = R.raw.twinkle; break;
    case R.id.button4: resId = R.raw.hickory; break;
    case R.id.button5: resId = R.raw.oldmcd; break;
    case R.id.button6:
        Intent i = new Intent(getApplicationContext(), com.example.lullabymain.Alphabet.class);
        startActivity(i);
        break;

    }
    //release any resources from previous mediaplayer
    if (mp != null) {
        mp.release();
    }
    //create a new mediaplayer to play this sound
    mp = MediaPlayer.create(this, resId);
    mp.start();

}

@Override
protected void  onStop()
{
    //stop audio
    super.onStop();
    mp.stop();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T03:02:41.420

您需要做的是在所需按钮上设置点击侦听器，然后是 Intents 以转到您的新类，例如 Intent i5 = new Intent(this, HadithList.class); 开始活动（i5）；

# backbone.js - 骨干js + cors和save()方法

> ID：13727696
> 
> 赞同：6
> 
> 时间：2012-12-05T16:22:07.163
> 
> 标签：backbone.js, save, cors

我正在尝试执行 POST 抛出保存方法。这是我的模型。

```
app.Models.Dummy = Backbone.Model.extend({
    initialize: function () {
        url = 'http://anotherdomain/Hello/';
    },
}); 
```

当我执行：

```
 dummy.save({text : "greg"}, {
        success : function(){       
            console.log('Ok!');
        }, 
        error: function(){
            console.log('Error');
        }
    }); 
```

使用 OPTIONS 标头（代码 200）触发请求，但从不触发 POST 请求。但是当我执行时：

```
 $.ajax({
        type: 'POST',
        url: "http://anotherdomain/Hello/",
        data: {text:"greg"},
        success: function(r) { alert(r.Result) },
        dataType: "application/json"
    }); 
```

其作品！

我是否需要覆盖主干中的某些内容？

**编辑：**

请求是：

```
OPTIONS http://anotherdomain/Hello/ HTTP/1.1
Host: anotherdomain
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Firefox/17.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Origin: http://mydomain
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Pragma: no-cache
Cache-Control: no-cache 
```

回应是：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Length: 0
Server: Microsoft-IIS/7.5
Set-Cookie: ARRAffinity=611c389e4fd6c5d83202b700ce5627f6e0850faf0604f13c25903b4662919f36;Path=/;Domain=anotherdomain
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
X-Powered-By: ARR/2.5
X-Powered-By: ASP.NET
Date: Wed, 05 Dec 2012 18:44:27 GMT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:20:22.637

这不是 CORS 的有效 OPTIONS 响应。响应需要包含标头，告诉浏览器什么是允许的。例如（取自[MDN](https://developer.mozilla.org/en-US/docs/HTTP_access_control)）：

```
Access-Control-Allow-Origin: http://foo.example
Access-Control-Allow-Methods: POST, GET, OPTIONS
Access-Control-Allow-Headers: X-PINGOTHER 
```

我知道您说 $.ajax 有效，但基于此 CORS 响应，我怀疑这是否准确，并建议您仔细检查。在幕后，主干本身只是使用 $.ajax

# c# - 将 pdf 与 pdfsharp 合并：pdfDocument.close() 中的异常

> ID：13727701
> 
> 赞同：2
> 
> 时间：2012-12-05T16:22:41.280
> 
> 标签：c#, pdf, pdf-generation, pdfsharp

我想用 PDFSharp 创建一个函数来合并一些 pdf。

这是我的代码

```
public class PDF_Merge
{
    static string [] strTabPdfFiles;

    public static string SetPdfToMerge(string strPdfFilesInput)
    {
        strTabPdfFiles = strPdfFilesInput.Split(';');
        return "O";
    }

    public static string MergeToPdf(string strPdfFilesOutput)
    {
        try
        {
            PdfDocument objDocumentFinal = new PdfDocument(strPdfFilesOutput);

            foreach (string strDoc in strTabPdfFiles)
            {
                PdfDocument objDocument = PdfReader.Open(strDoc, PdfDocumentOpenMode.Import);

                foreach (PdfPage page in objDocument.Pages)
                {
                    objDocumentFinal.AddPage(page);
                }
                objDocument.Close();----------> Exception : File cannot be modified
            }
            objDocumentFinal.Close();

            objDocumentFinal.Save(strPdfFilesOutput);
        }
        catch (Exception ex)
        {
            return ex.Message;
        }

        return "O";
    }

} 
```

我的问题是在 objDocument.Close() 调用中，我有一个异常：“无法修改文档”。

任何人都可以帮助我吗？

非常感谢这个库，

此致，

尼克修斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:48:20.970

使用 PdfDocumentOpenMode.Import 打开的 PDF 文件仅供导入，不能修改。
尝试 PdfDocumentOpenMode.Modify 代替。

或查看连接文档示例：
[http ://www.pdfsharp.net/wiki/ConcatenateDocuments-sample.ashx](http://www.pdfsharp.net/wiki/ConcatenateDocuments-sample.ashx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T18:59:20.180

我知道我迟到了，但我今天遇到了这个问题。

close 方法是尝试保存文档，因此需要`.Modify`. 在这种情况下，您根本不需要`objDocument.Close()`。您可以选择（并且可能应该？）调用`objDocument.Dispose()`.

# android - Millennial Media 插页式广告崩溃

> ID：13727705
> 
> 赞同：0
> 
> 时间：2012-12-05T16:22:46.540
> 
> 标签：android

在我希望插页式广告出现的活动的 onCreate() 方法中，我有以下代码：

```
MMAdView interAdView = new MMAdView(this, MY_APP_ID, MMAdView.FULLSCREEN_AD_LAUNCH, true, null);
interAdView.fetch();
interAdView.setListener(new BasicMMAdListener()
{
 @Override
 public void MMAdCachingCompleted(MMAdView adview, boolean success)
 {
   if(success)
     adview.display();
 }
}); 
```

代码编译没有错误，但在运行时我得到以下日志输出，这表明我的代码片段的第一行有错误，即开始的那个：`MMAdView interAdView = new MMAdView(this, ...`

```
Could not find class 'com.millennialmedia.android.MMAdView', referenced from method com.mycompany.mygame.myactivity.onCreate 
```

我很困惑，因为我认为如果有某种缺失的类，那么应用程序不应该编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:46:38.923

多亏了维奈的评论，它迫使我调查我首先遇到的另一个问题。

当我解决 SO [here](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)中涵盖的较早问题时，我的问题消失了。

# java - 在 IDE 和 Maven 中的测试日志更少

> ID：13727707
> 
> 赞同：0
> 
> 时间：2012-12-05T16:22:51.733
> 
> 标签：java, testing, logging, log4j

[与此 SO 问题](https://stackoverflow.com/questions/9627358/how-to-change-logback-log-level-programmatically-in-java)类似- 我希望测试输出中的日志更少。区别-我没有使用`slf4j`，我还在使用`log4j`。

*   有一些响亮的库我想静音而不过滤每个日志属性
*   在测试中有我不在乎的 DEBUG 和 INFO 级别日志（除非我这样做 - 很少见）。
*   我想在 IDE 和 Maven 中工作，包括从 IDE 和通过 Maven 运行测试

首先，就像在链接的问题中一样，我可以“按测试”执行此操作： `@Before`增加日志级别，`@After`将其降低到正常。

那是每次测试，迟早有人会忘记它。

我可以设置 Surefire 属性，但这适用于 Surefire。另外，我使用 FailSafe 进行集成测试，所以想知道是否必须单独设置它？

另一种可能性是过滤掉响亮的库。我这样做了一些，但这意味着每次我都必须再次过滤另一个。

最后，我可以为每个目录设置 log4j，这意味着对于每个项目，对于测试目录，不同的日志配置。

有更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:02:43.570

原来 Maven 2 和 3 具有硬编码的日志记录级别（在源代码中）。因此，每个目录的过滤和 log4j 是要走的路。

# css - css 网格简码并在 wordpress 中换行

> ID：13727710
> 
> 赞同：1
> 
> 时间：2012-12-05T16:23:00.443
> 
> 标签：css, wordpress, grid, shortcode

我正在使用 .grid_1、.grid_2、.grid_3、.... .grid_12 类的 12 列 CSS 网格

我想在 wordpress 中创建简码。这就是我为例如 2 和 10 列样式所做的

```
function grid_2( $atts, $content = null ) {
return '<div class="grid_2">' . do_shortcode( $content ) . '</div>';
}
add_shortcode('grid_2', 'grid_2');

function grid_10( $atts, $content = null ) {
    return '<div class="grid_10">' . do_shortcode( $content ) . '</div>';
}
add_shortcode('grid_10', 'grid_10'); 
```

问题是这些短代码需要包装在 .row 类中才能使其工作

```
<div class="row">
   <div class="grid_2"></div>
   <div class="grid_10"></div>
</div> 
```

是否有一个简单的解决方案，当它是 12 的倍数时如何将每个网格样式组包装到一个行类中（因为它是一个 12 列网格）

例如

```
 <div class="grid_1"></div>
 <div class="grid_11"></div> 
```

-> 将其包装成 .row div

```
 <div class="grid_3"></div>
 <div class="grid_9"></div> 
```

-> 将其包装成 .row div 等。

但也许有一个更简单的解决方案...... ???

我会感谢任何帮助和/或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:18:04.667

我真的很喜欢你的问题。这就是我见过的许多主题中通常的做法。

```
function grid_row( $atts, $content = null ) {
return '<div class="row">' . do_shortcode( $content ) . '</div>';
}
add_shortcode('grid_row', 'grid_row'); 
```

然后像这样使用您的简码：

```
[grid_row]
   [grid_2]Content Here[/grid_2]
   [grid_2]Content Here[/grid_2]
[/grid_row] 
```

输出：

```
<div class="row">
   <div class="grid_2">Content Here</div>
   <div class="grid_2">Content Here</div>
</div> 
```

# vim - 我可以创建自己的选项变量吗

> ID：13727714
> 
> 赞同：4
> 
> 时间：2012-12-05T16:23:10.557
> 
> 标签：vim

我打算在 vimscript 中创建一组选项作为标志，然后我可以在运行时设置它们以更改脚本的行为。

如何创建自定义选项变量，例如 NERDTree 等其他插件似乎能够做到...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T17:21:56.857

Vim 选项集（即您使用的东西`:set`）是固定的。但是插件使用通常命名的变量`g:PluginName_OptionName`来获得非常接近选项的东西。使用不同的变量范围（`g:`, `b:`, `w:`），您甚至可以在 Vim 中实现类似缓冲区或窗口局部选项的功能：这意味着插件首先检查局部变量的存在，然后回退到使用全局变量如果没有本地人存在。

插件应该为其配置变量提供默认值，可以在用户的`.vimrc`​​ . 这是通过这样的测试来实现的：

```
if ! exists('g:PluginName_ConfigItem')
    let g:PluginName_ConfigItem = 'default value'
endif 
```

如果您计划发布您的插件，请务必记录变量以及它们可以保存的值。

# c# - 如何使用 imdisk 和 C# 创建 RAM 磁盘？

> ID：13727718
> 
> 赞同：2
> 
> 时间：2012-12-05T16:23:17.133
> 
> 标签：c#, processstartinfo

我正在尝试通过 C# 中的 imdisk 创建 RAM 目录。由于 cmd 命令类似于：
`imdisk -a -s 512M -m X: -p "/fs:ntfs /q /y"`
我查找了如何使用 C# 处理 cmd 命令，并发现了一些关于 ProcessStartInfo() 的提示。这个类几乎按照我想要的方式工作，但是由于 imdisk 需要管理员权限，所以我有点卡住了。即使代码块无例外地执行，我在 Windows 资源管理器中也看不到任何新设备。

```
 try
        {
            string initializeDisk   = "imdisk -a ";
            string imdiskSize       = "-s 1024M ";
            string mountPoint       = "-m "+ MountPoint + " ";
            string formatHdd        = "-p '/fs:ntfs /q /y' ";

            SecureString password = new SecureString();
            password.AppendChar('0');
            password.AppendChar('8');
            password.AppendChar('1');
            password.AppendChar('5');
            ProcessStartInfo procStartInfo = new ProcessStartInfo();
            procStartInfo.UseShellExecute   = false;
            procStartInfo.CreateNoWindow    = true;
            procStartInfo.RedirectStandardError = true;
            procStartInfo.FileName          = "cmd";
            procStartInfo.Verb              = "runas";
            procStartInfo.UserName          = "Admin";
            procStartInfo.Password          = password;
            procStartInfo.Arguments         = initializeDisk + imdiskSize + mountPoint + formatHdd;
            Process.Start(procStartInfo);

        catch (Exception objException)
        {
            Console.WriteLine(objException);
        } 
```

我希望有人能给我一点提示，现在我没有想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T10:44:45.630

好吧，我以不同的方式解决了我的问题。不知何故，似乎 imdisk 没有按照应有的方式格式化新的 RamDisk，因此没有创建磁盘。一旦我删除了格式化选项，磁盘就会创建并需要格式化。因此，我启动了另一个进程并使用了 cmd 命令“格式化驱动器：”

对于任何有兴趣的人，我的解决方案如下：

```
class RamDisk
{
    public const string MountPoint = "X:";

    public void createRamDisk()
    {

        try
        {
            string initializeDisk   = "imdisk -a ";
            string imdiskSize       = "-s 1024M ";
            string mountPoint       = "-m "+ MountPoint + " ";

            ProcessStartInfo procStartInfo  = new ProcessStartInfo();
            procStartInfo.UseShellExecute   = false;
            procStartInfo.CreateNoWindow    = true;
            procStartInfo.FileName          = "cmd";
            procStartInfo.Arguments         = "/C " + initializeDisk + imdiskSize + mountPoint;
            Process.Start(procStartInfo);

            formatRAMDisk();

        }
        catch (Exception objException)
        {
            Console.WriteLine("There was an Error, while trying to create a ramdisk! Do you have imdisk installed?");
            Console.WriteLine(objException);
        }

    }

    /**
     * since the format option with imdisk doesn't seem to work
     * use the fomat X: command via cmd
     * 
     * as I would say in german:
     * "Von hinten durch die Brust ins Auge"
     * **/
    private void formatRAMDisk(){

        string cmdFormatHDD = "format " + MountPoint + "/Q /FS:NTFS";

        SecureString password = new SecureString();
        password.AppendChar('0');
        password.AppendChar('8');
        password.AppendChar('1');
        password.AppendChar('5');

        ProcessStartInfo formatRAMDiskProcess   = new ProcessStartInfo();
        formatRAMDiskProcess.UseShellExecute    = false;
        formatRAMDiskProcess.CreateNoWindow     = true;
        formatRAMDiskProcess.RedirectStandardInput     = true;
        formatRAMDiskProcess.FileName           = "cmd";
        formatRAMDiskProcess.Verb               = "runas";
        formatRAMDiskProcess.UserName           = "Administrator";
        formatRAMDiskProcess.Password           = password;
        formatRAMDiskProcess.Arguments          = "/C " + cmdFormatHDD;
        Process process                         = Process.Start(formatRAMDiskProcess);

        sendCMDInput(process);
    }

    private void sendCMDInput(Process process)
    {
        StreamWriter inputWriter = process.StandardInput;
        inputWriter.WriteLine("J");
        inputWriter.Flush();
        inputWriter.WriteLine("RAMDisk for valueable data");
        inputWriter.Flush();
    }

    public string getMountPoint()
    {
        return MountPoint;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:31:01.857

cmd.exe 不需要传递 /C 命令行选项来运行作为参数传递的命令吗？很可能 cmd.exe 只是忽略了您在 procStartInfo.Arguments 中传递的内容，因为您没有在 Arguments 前面添加“/C”。

# apache - .htaccess 如何为一个简单的 url 创建多个变量

> ID：13727719
> 
> 赞同：1
> 
> 时间：2012-12-05T16:23:21.553
> 
> 标签：apache, .htaccess

您好，我想从非常复杂的 url 中创建一个友好的 url。

我目前的网址是：

mydomain.net/?t=status&b=iid&ref=7007&ty=comment

当用户访问网址时，我想将其设为：

[http://mydomain.net/status/comment](http://mydomain.net/status/comment)

是否可以？

不是。我需要：mydomain.net/t/b/ref/comment

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:45:22.087

访问[Apache 文档](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)

在这里您将找到如何重写 .htaccess mod rewrite。

# java - null 或不是一个对象

> ID：13727720
> 
> 赞同：0
> 
> 时间：2012-12-05T16:23:27.403
> 
> 标签：java, javascript, html, jsp

我有一个 JSP 页面，它的 TD 如下：

```
<td align="right" id="DDD" style="display:none;">
    <label for="DDD" accesskey="A">DDD:&nbsp; </label>
</td>
<td id="DDD1" style="display:none;">
    <html:text property="DDD" styleId="DDD" readonly="true" styleClass="text" style="width: 8em; border: 0px solid buttonFace; background-color: transparent;" />
</td> 
```

并且TD显示是基于Javascript的none/block。这是javascript，

```
if(caseInfo[4] == "2")
{
    document.getElementById('DDD').style.display = 'block'; 
    document.getElementById('DDD').disabled = false; 
    document.getElementById('DDD1').style.display = 'block'; 
    document.getElementById('DDD1').disabled = false; 
    if(caseInfo[2].length >0 && caseInfo[2] != "NULL")
    {
        alert(caseInfo[2]);
        document.forms[0].DDD.value = caseInfo[2];
    }
    else
    {
        document.forms[0].DDD.value = "";
    }
    alert("DDD1"+document.forms[0].DDD1.value);
} 
```

当我运行应用程序时，在 UI 中我看到标签但看不到输入字段，我看到`document.forms.0.DDD1`的是 null 或不是行中的对象`document.getElementById('DDD1').style.display = 'block';`。此属性已在表单中设置。知道为什么它不显示吗？

# sql - SQL Server - 使用 RESTORE 复制数据库，生成的副本没有数据

> ID：13727721
> 
> 赞同：2
> 
> 时间：2012-12-05T16:23:27.037
> 
> 标签：sql, sql-server, sql-server-2005

每当我尝试使用 BACKUP 和 RESTORE 命令创建数据库的副本时，都会创建副本，但不包含任何数据。我正在运行以下命令，并返回成功状态：

```
BACKUP DATABASE [SomeDB]
    TO DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak'
BACKUP DATABASE successfully processed 161 pages in 0.021 seconds (62.805 MB/sec).

RESTORE DATABASE [SomeDB_Copy]
    FROM DISK=N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak'
    WITH MOVE N'SomeDB' TO N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\DATA\SomeDB_copy.mdf',
    MOVE N'SomeDB_log' TO N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\DATA\SomeDB_copy.ldf'
RESTORE DATABASE successfully processed 162 pages in 0.095 seconds (13.958 MB/sec). 
```

我错过了一步吗？我发现的所有示例都使用这种方法。 [即使在 StackOverflow 上](https://stackoverflow.com/questions/1360529/how-do-you-backup-and-restore-a-database-as-a-copy-on-the-same-server)。这是在 SQL Server 2005 上。

更新：。我将数据库备份到一个新文件，并使用它进行恢复，一切正常。我不知道我的原始文件是否已损坏，或者发生了其他奇怪的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:57:32.193

我意识到这个话题很老，但我想扩展 usr 在他关于多文件备份集的评论中所说的话，尽管我会称它为多备份设备。您的备份命令处理了 161 页而恢复处理了 162 页这一事实使我认为您的设备/文件中有多个备份。您可以在备份命令中使用 INIT 子句来保证您在设备中只有一个备份：

```
BACKUP DATABASE [SomeDB]
TO DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak' 
with init; 
```

[来自http://msdn.microsoft.com/en-us/library/ms186865.aspx](http://msdn.microsoft.com/en-us/library/ms186865.aspx)上的 Microsoft 文档：

> 在 BACKUP 语句中指定磁盘设备之前，它不必存在。如果物理设备存在且 BACKUP 语句中未指定 INIT 选项，则将备份附加到设备。

您应该能够使用 RESTORE 命令上的 HEADERONLY 选项来检查设备/文件中是否有多个备份。

```
BACKUP DATABASE [SomeDB]
TO DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak' 
with init;

RESTORE HEADERONLY 
FROM DISK = = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak'; 

BACKUP DATABASE [SomeDB]
TO DISK = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak';

RESTORE HEADERONLY 
FROM DISK = = N'C:\Program Files\Microsoft SQL Server\MSSQL.1\MSSQL\Backup\SomeDB.bak'; 
```

第一个 RESTORE HEADERONLY 的输出将显示文件中的一个备份，而第二个的输出应显示文件中有两个备份。

# jquery - 在脚本和页面中添加预加载 gif

> ID：13727722
> 
> 赞同：0
> 
> 时间：2012-12-05T16:23:28.397
> 
> 标签：jquery, function, load, preload

拜托，我有这个代码的问题。简而言之：我有一个带有 4 个链接的菜单的小网页：每个链接都使用 jquery 加载功能将页面内容加载到一个名为“target”的 div 中。我为页面添加了一些淡入和淡出效果。问题是当我有一个包含大量内容的大页面要加载时，所以我需要在“目标”div 上放置一个覆盖和小型预加载器 gif 并放入 js 脚本内的代码中，但我不知道如何. 请问，有人可以帮我吗？谢谢..

这里的js函数：

```
google.load('jquery', '1.4.2');
google.setOnLoadCallback(function(){

$('.nav a').click(function() {
    $('.nav a').removeClass('selected');
    $(this).addClass('selected');
});

$('#link1').click(function() {
    $('#target').fadeOut('fast', function() {
        $('#target').load('content/1.html', function() {
            $('#target').fadeIn('slow');
        });
    });
});

$('#link2').click(function() {
    $('#target').fadeOut('fast', function() {
        $('#target').load('content/2.html', function() {
            $('#target').fadeIn('slow');
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:49:26.533

无论何时`Ajax request is about to be sent`，jQuery 都会检查是否还有其他未完成的 Ajax 请求。如果没有进行中，`jQuery triggers the ajaxStart event`.

> 此时会执行已使用 .ajaxStart() 方法注册的所有处理程序。

ajax加载器的css类

```
.preload{
  background:url('your gif loader image path') center no-repeat;
} 
```

然后这个 jquery 将做预加载。

```
$('body').ajaxStart(function() {
   $('.overlay').css({"background":"black","opacity":"0.7"}).show().addClass('preload');
}); 
```

我假设您将拥有一个透明的覆盖 div，当发生任何 ajax 请求时，它将覆盖页面或特定区域，这里我添加一个名为的类，该类`preload`将具有`background gif image of ajaxloader`.

# python - 在 Python 中调用存储过程 - ORA-04063：错误

> ID：13727724
> 
> 赞同：0
> 
> 时间：2012-12-05T16:23:31.473
> 
> 标签：python, sql, oracle

我有一个调用存储过程的 python 脚本。我很确定我的 python 脚本没问题，因为当它调用存储的过程时，我得到了这个错误：

```
ORA-04063: package body "db.package_name" has errors ORA-06508: PL/SQL: could not find program unit being called: "db.package_name" ORA-06512: at line 1 
```

我有时也收到此错误：

```
ORA-01403: no data found ORA-06512: at "db.package_name", line 16 ORA-06512: at line 1 
```

在 SQL dev 中查看包，我在其名称上看到一个红色的 x，然后右键单击 > compile 给出：

```
Error(10): PLS-00103: Encountered the symbol "end-of-file" when expecting one of the following:     begin end function pragma procedure 
```

它调用的过程也有一个红色的 x 和编译给出：

```
Error(5,3): PLS-00428: an INTO clause is expected in this SELECT statement 
```

所以这让我相信这是包装/程序的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:24:58.777

正确，问题出在程序上，而不是 Python 上。

# c# - 使用 c# 将库存 EOD 数据添加到 Amibroker

> ID：13727725
> 
> 赞同：1
> 
> 时间：2012-12-05T16:23:29.697
> 
> 标签：c#

有人给我一些示例代码，如何使用带有 C# 的 AmiBroker 插件将库存 EOD 数据添加到 amibroker。我从 amibroker.codeplex.com 下载了“带有 C# 的 AmiBroker 插件”。它没有任何文档说明如何将 EOD 数据添加到库存中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T13:12:26.700

基本上，您只需在 Plugin.cs/GetPluginInfo() 方法中添加有关插件的信息，并将相关逻辑引用到 Plugin.cs/GetQuotesEx() 中。例如：

```
public static unsafe int GetQuotesEx(string ticker, Periodicity periodicity,
                                     int lastValid, int size, Quotation* quotes,
                                     GQEContext* context)
{
    for (var i = 0; i < 5; i++)
    {
        quotes[i].DateTime = new AmiDate(DateTime.Now.AddDays(i - 5));
        quotes[i].Price = 10;
        quotes[i].Open = 15;
        quotes[i].High = 16;
        quotes[i].Low = 9;
        quotes[i].Volume = 1000;
        quotes[i].OpenInterest = 0;
        quotes[i].AuxData1 = 0;
        quotes[i].AuxData2 = 0;
    }

    return 5;
} 
```

欲了解更多信息，请访问：http: [//github.com/kriasoft/amibroker](http://github.com/kriasoft/amibroker)

# amazon-web-services - 获取给定哈希键集的所有项目

> ID：13727726
> 
> 赞同：0
> 
> 时间：2012-12-05T16:23:37.343
> 
> 标签：amazon-web-services, amazon-dynamodb

从单个表中获取给定哈希键集的所有项目的有效方法是什么？表同时具有 hashkey 和 rangekey。

检索我正在使用的单个项目

```
items = tbl.items.query(
                    :hash_value => "HashKey1",
                    :select => :all).select.map {|i| i.attributes} 
```

检索所有项目的一种方法是遍历键，这是一个糟糕的解决方案

```
hashkeys = %w(abcd efgh xyz)
hashkeys.each do |key|
     items[dn] = tbl.items.query(
                    :hash_value => key,
                    :select => :all).select.map {|i| i.attributes}
end 
```

我正在为 Amazon DynamoDB 使用 ruby​​ 客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:20:49.423

我没有使用 ruby​​ 客户端，但与 php 客户端相比，您可以使用数组作为 hashkey 值，例如：

```
hashkeys = %w(abcd efgh xyz)
items = tbl.items.query(
    :hash_value => hashkeys,
    :select => :all).select.map {|i| i.attributes} 
```

# ruby-on-rails - 在这种情况下，为什么在 heroku 上需要 model.save 而在 localhost 上不需要？

> ID：13727728
> 
> 赞同：1
> 
> 时间：2012-12-05T16:23:44.470
> 
> 标签：ruby-on-rails, activerecord, heroku

我一直在开发一个 Rails 应用程序来部署在 Heroku 上。它涉及一个`User`对象和一个`Card`对象，其中 a`User` `has_many` `Cards`和 a `Card` `belongs_to`a `User`。我已经编写了将 a 附加`Card`到 a`User`和`detach`a`Card`从 a 的操作`User`。

它使用. `@user.cards << @card`_ _ _ _ _会是差异的原因吗？Heroku 是否进行了某种我不知道的缓存？`@user.cards``@card``@card.user_id``@user.id``@user.cards << @card``@user.save`

# photoshop - Photoshop CS4 可变相对路径不起作用

> ID：13727734
> 
> 赞同：2
> 
> 时间：2012-12-05T16:24:07.307
> 
> 标签：photoshop, photoshop-cs4

在 Adob​​e Photoshop CS4 中，我尝试使用变量和数据集来动态替换 .csv 文件中列出的图像。

当我尝试使用图像的相对路径时，程序抛出错误“无法应用数据集，因为找不到替换文件”

但是根据adobe[网站](http://help.adobe.com/en_US/photoshop/cs/using/WSfd1234e1c4b69f30ea53e41001031ab64-7417a.html)上的一篇文章，它应该可以工作。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T15:33:52.723

大多数情况下，这种错误来自ExtendScript 与反斜杠作斗争的事实。确保在使用它们之前逃离你的路径。或将它们转换为正斜杠：

```
var cleanFilePath = myFilePath.replace(/\\/g, "/"); 
```

# javascript - 根据输入字段的值更改文本颜色或背景

> ID：13727735
> 
> 赞同：3
> 
> 时间：2012-12-05T16:24:07.177
> 
> 标签：javascript

> **可能重复：**
> [如何使用 Javascript 更改背景颜色？](https://stackoverflow.com/questions/197748/how-do-i-change-the-background-color-with-javascript)

我有这个 javascript 函数可以正常工作，但我想添加它。

风险是通过将严重性乘以可能性来计算的。计算由 validate_form() 下面的函数完成

根据值的颜色是：

*   绿色 - 小于 6 输入字段颜色变为绿色

*   橙色 - 6 - 9 之间

*   红色 - 如果超过 9

风险值写入并输入名为“risk1”“risk2”等的字段。

```
function validate_form ( ) {
    valid = true; 

    document.calc.risk1.value = document.getElementById('data_1_severity').value*document.getElementById('data_1‌​_likelihood').value;
    document.calc.risk2.value = document.getElementById('data_2_severity').value*document.getElementById('data_2‌​_likelihood').value; 

    return valid;
} 
```

有人可以帮我解决这个问题吗？只是希望风险评分根据值改变颜色或单元格的背景改变颜色 - 并没有真正打扰。这将显示风险是否为：

*   绿色 - 低风险

*   橙色 - 中等风险
*   红色 - 高风险。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:41:27.150

像这样的东西：

```
var changeColor = function(obj){

  if(obj.value < 6){
    obj.style.backgroundColor = 'green';
  } else if(obj.value >= 6 && obj.value <= 9){
    obj.style.backgroundColor = 'orange';
  } else if(obj.value > 9){
    obj.style.backgroundColor = 'red';
  }

}; 
```

然后在您的 validate_form() 函数中：

```
changeColor(document.calc.risk1); 
```

更好的是为每种颜色创建 CSS 类并执行以下操作：

```
obj.className = 'green'; 
```

代替

```
obj.style.backgroundColor = 'green'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:38:40.553

你可以使用 jQuery 来做到这一点

你的 CSS 应该是这样的：

```
.low-risk{
    background: green;
}

.medium-risk{
    background: orange;
}

.high-risk{
    background: red;
} 
```

这是一个用于更改颜色的javascript函数：

```
<script>
    function changeInputColor(input, value){
        $(input).removeClass();
        if (value < 6){
            $(input).addClass('low-risk');
        }
        else if(value >= 6 && value <= 9){
            $(input).addClass('medium-risk');
        }
        else{
            $(input).addClass('high-risk');
        }
    }
</script> 
```

# google-fusion-tables - 融合多种风格的餐桌风格

> ID：13727737
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:24:11.860
> 
> 标签：google-fusion-tables

我正在尝试将多种样式应用于 Google Fusion Table Layer。

这适用并将数组中的所有多边形着色为蓝色：

```
layer = new google.maps.FusionTablesLayer({
      map : map,
      query : {
        select : "geometry",
        from : "1gwSN6n_00uZ7YuAP7g4FiUiilybqDRlRmWJrpvA"
      },

    styles: [{
     polygonOptions:
      {
              fillColor: "#ffffff",
              strokeColor: "#bcbcbc",
              fillOpacity: ".75"
      }
    },
    {
          where: whereClause,
          polygonOptions: {
            fillColor: "#0D58A6"
          }
    }

    ]

    });
layer.setMap(map); 
```

但这不起作用——我的地图上什至没有多边形出现：

```
layer = new google.maps.FusionTablesLayer({
      map : map,
      query : {
        select : "geometry",
        from : "1gwSN6n_00uZ7YuAP7g4FiUiilybqDRlRmWJrpvA"
      },

    styles: [{
     polygonOptions:
      {
              fillColor: "#ffffff",
              strokeColor: "#bcbcbc",
              fillOpacity: ".75"
      }
    },
    {
          where: whereClause,
          polygonOptions: {
            fillColor: "#0D58A6"
          }
    }
    ,
    {
          where: whereClause,
          polygonOptions: {
            fillColor: "#ff0000"
          }
    }
    ]

    });
layer.setMap(map); 
```

别介意我给同一种东西上色，一种颜色然后另一种颜色——我只是想让第二种风格起作用。当我取出第二种样式时，一切都很好。我加入了第二种风格——不再使用多边形。

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:38:48.397

这很可能是一个错误（具有两种不同样式的完全相同的 where 子句）：

```
{
      where: whereClause,
      polygonOptions: {
        fillColor: "#0D58A6"
      }
}
,
{
      where: whereClause,
      polygonOptions: {
        fillColor: "#ff0000"
      }
} 
```

我希望 where 子句必须是唯一的。

更新：

我目前的猜测是，您遇到了发送回服务器的数据大小的查询限制。

[每个 whereClauses 独立工作](http://www.geocodezip.com/v3_simpleMap_FusionTables_multipleStyles.html)

如果这是问题（查询字符串太大），将“COUSUBFP”代码映射到更短的代码（3 个十进制数字或两个十六进制数字），可能会使其工作（或者就此而言，只需截断前导“0” ）。

```
 03320 -> 0
 03608 -> 1
 etc. 
```

# c# - 文本文件的源代码无法使用 C#.net 和 Web 浏览器工作？

> ID：13727742
> 
> 赞同：1
> 
> 时间：2012-12-05T16:24:21.913
> 
> 标签：c#, .net, web-crawler, screen-scraping

此源代码抓取不起作用；它给出一个空白文本文件作为输出：

```
private void button2_Click(object sender, EventArgs e)
{
    webBrowser1.Navigate("https://www.jigsaw.com/SearchCompany.xhtml?opCode=refresh&rpage=20&order=0&orderby=0&industry=1160000&subindustry=1160300&country=9000&country=2000&cmDead=false&count=0&screenNameType=0&screenName=&omitScreenNameType=0&omitScreenName=&rowsPerPage=200&uid=13473859&tok=1354716874406-8761960955252771794");

    string MainsourceCode = webBrowser1.DocumentText;
    StreamWriter sw = new StreamWriter("G:/jigsaw_info.txt", true);
    sw.Write(MainsourceCode + "\n");
    sw.Close();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:27:45.153

你开始写得太快了。你应该等待`DocumentCompleted`事件。

```
private void button2_Click(object sender, EventArgs e) 
{ 
    webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;
    webBrowser1.Navigate("https://www.jigsaw.com/SearchCompany.xhtml?opCode=refresh&rpage=20&order=0&orderby=0&industry=1160000&subindustry=1160300&country=9000&country=2000&cmDead=false&count=0&screenNameType=0&screenName=&omitScreenNameType=0&omitScreenName=&rowsPerPage=200&uid=13473859&tok=1354716874406-8761960955252771794");
}

void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
      File.WriteAllText("G:/jigsaw_info.txt",webBrowser1.DocumentText);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:27:59.973

您必须等到导航完成。导航是异步的。

[检测 WebBrowser 完整页面加载](https://stackoverflow.com/questions/2777878/detect-webbrowser-complete-page-loading)

# asp.net-web-api - 什么将 WCF Web API 中的 HttpOperationHandler 替换为 ASP.NET Web API

> ID：13727743
> 
> 赞同：5
> 
> 时间：2012-12-05T16:24:29.320
> 
> 标签：asp.net-web-api, wcf-web-api

在将使用 WCF Web API 构建的旧项目升级为现在使用 ASP.NET Web API 时，我遇到了一些实现`HttpOperationHandler<HttpRequestMessage, T>`. 我无法在新程序集中找到等效的类。是否存在类似的东西，或者我需要不同的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T19:37:21.773

操作处理程序的概念已被过滤器和模型绑定器取代。

以下是一些您可能会觉得有用的链接：

*   [如何从 WCF Web API 迁移到 ASP.NET Web API](http://wcf.codeplex.com/wikipage?title=How%20to%20Migrate%20from%20WCF%20Web%20API%20to%20ASP.NET%20Web%20API)
*   Mike 关于[WebAPI 如何进行参数绑定的博客](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)
*   ASP.NET WebAPI 页面上的[入门教程。](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api)

希望这可以帮助。

# java - 在java中将Jtable添加到选项卡

> ID：13727744
> 
> 赞同：-2
> 
> 时间：2012-12-05T16:24:33.177
> 
> 标签：java, swing, jtable, jpanel, jtabbedpane

我正在开发一个java gui。它有 TabedPane。我已将面板添加到选项卡。如何将jtable添加到tab2中的面板；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:07:17.347

要获取特定索引处的组件，请使用[getComponentAt](http://docs.oracle.com/javase/6/docs/api/javax/swing/JTabbedPane.html#getComponentAt%28int%29)（正如 Jonas Eicher 在评论中所建议的那样。）

```
JPanel tabPanel = (JPanel) tabbedPane.getComponentAt(index); 
```

将您的表格添加到面板中，如下所示。

```
tabPanel.add(new JScrollPane(table)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:42:56.190

只需为您的组件创建字段或局部变量，以便您可以引用它们，即：

```
JPanel panel = new JPanel();
JTable table = new JTable();

tabbedPane.insertTab("title", null, panel, null, 0);
panel.add(table); 
```

# java - ConcurrentHashMap 如何处理重新散列？

> ID：13727746
> 
> 赞同：15
> 
> 时间：2012-12-05T16:24:38.060
> 
> 标签：java, multithreading, java.util.concurrent, concurrenthashmap

我想知道 ConcurrentHashMap 如何在另一个线程仍在另一个段/分区上写入时处理重新散列。据我了解，ConcurrentHashMap 独立锁定段，例如，Thread1 在 Thread2 写入段 2 之前稍微写入段 1，如果在 Thread1 插入后需要调整表大小和重新散列会发生什么情况，但 Thread2 在中间的写操作？它会锁定整个地图以进行重新散列吗？它是否有类似告诉 Thread2 停止并等到 rehash 完成的东西？因为 Thread2 可能有机会在表调整大小后最终写入 segment1，对吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T16:27:17.453

每个段都单独重新散列，因此没有冲突。

`ConcurrentHashMap`是一组专门的哈希表，称为`Segments`

从源代码

```
final Segment<K,V>[] segments;

/**
 * Segments are specialized versions of hash tables.  This
 * subclasses from ReentrantLock opportunistically, just to
 * simplify some locking and avoid separate construction.
 */ 
```

如果你检查返回 Segment 的方法

```
final Segment<K,V> segmentFor(int hash) {
    return segments[(hash >>> segmentShift) & segmentMask];
} 
```

因此，如果您调用`put`它首先确定`Segment`使用`segmentFor`，然后调用 put on that`Segment`

`put`源代码

```
public V put(K key, V value) {
    if (value == null)
        throw new NullPointerException();
    int hash = hash(key.hashCode());
    return segmentFor(hash).put(key, hash, value, false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T10:37:01.013

在`ConcurrentHashMap`表中为每个段创建数组。以及基于`concurrencyLevel`.

```
 /**
     * The per-segment table. Elements are accessed via
     * entryAt/setEntryAt providing volatile semantics.
     */
    transient volatile HashEntry<K,V>[] table; 
```

所以 REHASHING 也将在每个段的表中完成。所以这不会影响另一个段的表。

这类似于 Array{elements} (2D) 的 Array{Segments}。非常快:)

# java - 重新访问空同步块：数据可见性

> ID：13727753
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:05.110
> 
> 标签：java, android, multithreading, synchronized

我阅读[了这个](https://stackoverflow.com/questions/686415/in-what-situations-could-an-empty-synchronized-block-achieve-correct-threading-s)`synchronized`stackoverflow 主题，其结论似乎是始终可以通过更好的解决方案来避免空块。这个话题对我来说也有一些不清楚的部分，我将把它们整合到我的下面的帖子中。

假设我们有一个这样的类：

```
public class MyThreadClass extends Thread {
  private final OtherComponent mOtherComponent;
  private final Object mLock = new Object();
  private MyHandler mHandler;

  public MyCustomThread(OtherComponent otherComponent) {
      mOtherComponent = otherComponent;      

  public void run() {

      mHandler = new Handler() {...}

      // Other init operations

      mOtherComponent.onMyCustomThreadInitialized();

      // ... other operations (Looper.loop(), actually)
  }

  public void sendMessageWithHandler(int what, int arg) {
       synchronized (mLock) {}
       Message msg = mHandler.obtainMessage(what);
       msg.arg1 = arg;
       mHandler.sendMessage(msg);
  }

  public void useHandlerInAnotherWay(...) {
       synchronized (mLock) {
            // useful code that needs actual mutual exclusion
       }
       mHandler.sendMessage(...);
  }
} 
```

我的应用程序的相关部分按以下方式工作：

1.  `MyThreadClass`线程被创建并启动。
2.  作为间接后果`mOtherComponent.onMyCustomThreadInitialized()`，我的应用程序的另一部分将开始产生**其他线程**。（请注意，它们不是从这个调用同步启动的，这就是为什么我说它是间接结果。*唯一的一点是，在这些**其他线程**启动`mHandler`时已经初始化***）**
***   其他每个**线程**将只调用`sendMessageWithHandler(...)`一次*   再一次，其他线程（即不是上面提到的线程）调用`useHandlerInAnotherWay(...)`，这可能随时发生（`mOtherComponent.onMyCustomThreadInitialized()`当然是在 之后）。**

 **我的问题：

1.  `mHandler`如果我是正确的，当从其他线程访问时必须保证最新的数据可见性`myThreadClass`，因为它不是一个`final`字段。我也不想这样做`volatile`，因为除了这几个`sendMessageWithHandler(..)`调用之外，`mHandler`不会在没有同步的情况下从其他线程中使用（我不希望`volatile`开销不必要地出现在不必要的地方）。换句话说，当`mHandler`从那些其他线程通过 访问时`useHandlerInAnotherWay()`，`synchronized`那里的“有用代码”（即实际上需要成为互斥对象的代码）也保证调用者线程`mHandler`正确地看到。然而`sendMessageWithHandler(..)`，在 中，代码不需要互斥，`sendMessageWithHandler(...)`. 它是否正确？我的问题有更好的解决方案吗？

2.  我链接到的另一个stackoverflow线程有以下答案（它不是被接受的，但被多次投票）：

    > 过去的情况是，规范暗示发生了某些内存屏障操作。但是，规范现在已经更改，原始规范从未正确实施。它可以用来等待另一个线程释放锁，但是协调另一个线程已经获得锁会很棘手。

    这是否意味着空`synchronized`不再提供内存屏障功能？如果我在线查看 Java 文档`synchronized`，他们提到所有内存都因此而更新（即线程副本在监视器输入时从“主内存”更新，“主内存”在监视器退出时从线程副本更新）。但是他们没有提到任何关于空`synchronized`块的内容，所以我不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:39:28.503

您可能不需要任何同步。

```
(thread 1)          (thread 2)

write
  |
start thread 2
                 \
                    ...
                     |
                    read 
```

`read`保证看到`write`。

* * *

的语义`synchronized`是严格执行的，即使它是一个空块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:07:16.967

正如我所看到的， mHandler 在创建之前不会被其他线程访问，并且在生命周期内不会更改。因此，可以安全地从其他线程读取它而无需任何同步。可以肯定的是，您可以在同步块中阅读它：

```
public void sendMessageWithHandler(int what, int arg) {
   MyHandler mHandler;
   synchronized (mLock) {
      mHandler=this.mHandler;
   }
   // the rest of code unchanged
} 
```

由于“每个其他线程将只调用`sendMessageWithHandler(...)`一次”，因此开销绝对可以忽略不计。坦率地说，在多个方法调用和线程创建的背景下，您对尽量减少同步工具的使用（“我也不想让它变得易变”）的痴迷看起来不够充分。只有在每秒发生数百万次同步时才值得打扰。**

# jquery - jquery empty() 不会清理 div 内容

> ID：13727754
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:17.597
> 
> 标签：jquery

我有一个 div，我正在使用 .load 将滑块加载到其中。出于某种原因，一旦我将滑块加载到 div 中，我就无法将其清除。我正在尝试使用 jquery empty() 函数，但它不起作用。我用来加载滑块的 js 是：

```
$("#nav").click(function() {
    $("#info_header").empty();
    $("#content_1").empty();
    $("#content_2").empty();
    $("#content_3").empty();
    $("#images").empty();
    $("#load_container").switchClass("load_container_port", "load_container_slider", .01);
    $("#controls").switchClass("controls_port", "controls_slider", .01);
    $("#info").switchClass("info_port", "info_slider", .01);
    $("#load_container").css({
        height:($(window).width() * 500) /1000
    });
    $("#info").css({
        height:($(window).width() * 500) /1000
    });
    $("#top_section").css({
        height:(($(window).width() * 500) /1000) + 40
    });
    setTimeout(function() {
        $("#slider").delay(100).load("home_slider.html"); 
    }, .03);       
}); 
```

然后我用来尝试清空并加载新内容的js是：

```
function portfolio_clear() {   
    $('#slider').empty(); 
    $("#images").empty();
    $("#load_container").switchClass("load_container_slider", "load_container_port", .01);
    $("#controls").switchClass("controls_slider", "controls_port", .01);
    $("#info").switchClass("info_slider", "info_port", .01);
}

$("#space").click(function() {

    $('#load_container').css({
        background: "#191919"
    });
    $('#close_white').css({
        display: "inline-block"
    });
    $('#close_black').css({
        display: "none"
    });
    $('#goto_white').css({
        display: "inline-block"
    });
    $('#goto_black').css({
        display: "none"
    });

    var id = $(this).attr('id');

    $("#info_header").load(id + "_header.txt");
    $("#content_1").load(id + "_1.txt");
    $("#content_2").load(id + "_2.txt");
    $("#content_3").load(id + "_3.txt");

    $("<img>", {
        src: "http://www.klossal.com/space.jpg"
    }).appendTo("#images");

    $('html, body').animate({
        scrollTop: 0
    }, 300);

    if (screen.width >= 1025) {
        $("#top_section").animate({
            height: 1112
        }, 300);
    }
    else {
        $("#top_section").animate({
            height: 926
        }, 300);
    }

}); 
```

该页面可以在这里查看：

“http://173.254.28.83/~klossalc/index_test.html”

您可以通过单击左上角的 klossal.com 来加载滑块，您可以尝试单击下面的第一个图块尝试替换它，这将不起作用。如果您首先单击图块，它们会正常加载，然后单击 klossal.com 加载滑块也可以，但反之则不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:26:34.517

我会用它来清除元素 html：

```
$("#element_id").html(''); 
```

我看不到您从哪里调用portfolio_clear()，如果您希望在单击缩略图时发生这种情况，请尝试以下操作：

```
$(".thumb").click(function() {
        portfolio_clear();
        $(".thumb_info").not(this).switchClass("info_color_3", "info_color_2", 300);
        $(this).find('.thumb_info').switchClass("info_color_2", "info_color_3", 300);
    }); 
```

# android - 如何检测 Horizo ntalListView 滚动结束

> ID：13727755
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:20.477
> 
> 标签：android, listview, horizontal-scrolling

我已经使用了这个[网站](https://github.com/vieux/Android-Horizontal-ListView/blob/master/HorizontalListView.java)上的 Horizo​​ntalListView，但我不知道如何测量滚动状态。

**因为我想创建 Horizo​​ntalListView ，当滚动完成后**某些元素半可见时自动调整。

```
 000|111 222 333|444

     0|00 111 222 3|33 444 --> |000 111 222|333

     11|1 222 333 44|4 555 --> 111|222 333 444|555 
```

我尝试设置

```
if(mScroller.isFinished() && isFling){
     // adjust 
} 
```

`onFling`但是不调用时会留下问题。

但是如果我使用`ACTION_UP`了如果它有 Fling 那么它就会变得一团糟。

有什么建议可以实现这一目标吗？感谢您的每一个帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:42:57.090

您可以尝试修改开发人员的代码，通过设置任何一个对象 [TextView、Image 等] 的 Tag 来获取列表项的当前位置，然后通过 getCount 方法将其与您的计数或最大计数进行比较适配器。

# objective-c - NSNull isEqualToString 问题与 JSON 响应

> ID：13727758
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:25.577
> 
> 标签：objective-c, ios, cocoa-touch

我收到以下错误

```
-[NSNull isEqualToString:]: unrecognized selector sent to instance 0x3c168090 
```

在这行代码上

```
cell.offerTitle.text = [voucherData objectForKey:@"offer_title"]; 
```

有人可以帮我纠正这个问题吗？

谢谢奥利弗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:36:44.800

是`voucherData`NSDictionary 吗？

你的字典中可能有一个`NSNull`，当字典试图找到 的对象时`offer_title`，它遇到了麻烦。

另一种可能性是`[voucherData objectForKey:@"offer_title"]`正在返回`[NSNull null]`，并且当您尝试传递它而不是字符串时，标签正在呕吐。

尝试在其中设置断点`objc_exception_throw`并读取堆栈跟踪——这将使您更好地了解正在发生的事情。

**添加：**

```
id value = [voucherData objectForKey:@"offer_title"];
if ([value isKindOfClass:[NSNull class]])
    cell.offerTitle.text = @"";
else
    call.offerTitle.text = value; 
```

或者

```
id value = [voucherData objectForKey:@"offer_title"];
cell.offerTitle.text = [value isKindOfClass:[NSNull class]] ? @"" : value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:14:58.183

这里最佳实践的一个候选者是使用`isEqual:`，而不是`isEqualToString:`. 这样，如果你得到的不是一个字符串，你就不会得到一个错误，并且相等性测试会以良好的顺序失败。

另一方面，您可能会争辩说这`isEqualToString:`是一个不错的选择，因为当您得到的不是字符串时，您会收到一个警告您该问题的错误！

编辑：但那是错误的；请参阅下面的评论。该`isEqualToString:`消息来自 UIKit，而不是来自 OP 自己的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T15:12:10.750

我为诺亚的回答做了一些改变

```
-(NSDictionary*)safeData:(NSDictionary*)dict{
    NSMutableDictionary *dictionary = [NSMutableDictionary dictionaryWithDictionary:dict];
    NSArray *keys = dictionary.allKeys;
    for (int i = 0; i < keys.count; i++){
        id value = [dictionary objectForKey:[keys objectAtIndex:i]];
        // you can add recursive here
        value = [value isKindOfClass:[NSNull class]] ? @"" : value;
        [dictionary setObject:value forKey:[keys objectAtIndex:i]];
}
    return dictionary; } 
```

并使用

```
dictionary = [self safeData:dictionary]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T16:26:17.920

控制台中的那一行可能会告诉您“ `voucherData`”不是`NSDictionary`您假设的“”对象。

还要确保`offerTitle`您的单元格中的“”也是有效`UITextField`的。

# android - 使用 Integer.parseInt 将 EditText 转换为 int

> ID：13727759
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:25.860
> 
> 标签：android

我是编程和 Android 新手。我正在尽最大努力开发一个简单的应用程序，但我被卡住了！

我有两个editTexts（设置为只接受数字）和一个按钮。这个想法是在按下按钮时显示两个用户输入的总和。但是，当我单击模拟器中的按钮时，我的应用程序停止工作并强制关闭。

任何帮助将不胜感激。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_prevailing_torque);
    Button calculatePrevailing = (Button) findViewById(R.id.button_calculatePrevailing);

    calculatePrevailing.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            TextView prevailingSetting = (TextView) findViewById(R.id.textViewSetting);
            EditText editTextPrevailing = (EditText) findViewById(R.id.editTextPrevailing);
            EditText editTextRecommended = (EditText) findViewById(R.id.editTextReccomended);

            int p = Integer.parseInt(editTextPrevailing.getText().toString());
            int r = Integer.parseInt(editTextRecommended.getText().toString());

            prevailingSetting.setText(r+p);
        }
    });
} 
```

我在这里查看了几个类似的问题，但我找不到任何可以比我已经完成的更进一步的实现。但我可能在错误的地方寻找。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:30:14.337

您不能将 setText() 与 Integer 一起使用，因为它需要 CharSequence，您必须使用

```
prevailingSetting.setText(String.valueOf(r+p)); 
```

要不就

```
prevailingSetting.setText(""+(r+p)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:32:02.933

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_prevailing_torque);
   Button calculatePrevailing = (Button) findViewById(R.id.button_calculatePrevailing);
   TextView prevailingSetting = (TextView) findViewById(R.id.textViewSetting);
   EditText editTextPrevailing = (EditText) findViewById(R.id.editTextPrevailing);
   EditText editTextRecommended =(EditText)findViewById(R.id.editTextReccomended);

   calculatePrevailing.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {

        int p = Integer.parseInt(editTextPrevailing.getText().toString());
        int r = Integer.parseInt(editTextRecommended.getText().toString());
        int s = r+p;
        prevailingSetting.setText(Integer.toString(s));

    }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:32:42.697

行 ！如果这是您的问题，那么首先将您的 editText 值转换为字符串，然后将其转换为整数，例如！

```
 String str1=editTextPrevailing.getText().toString();
 String str2=editTextRecommended.getText().toString();
 int p = Integer.parseInt(str1);
  int r = Integer.parseInt(str2);
  int s = r+p;
   prevailingSetting.setText(""+s); 
```

# php - 通过引用传递 - 它是如何工作的以及为什么要使用它？

> ID：13727765
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:50.390
> 
> 标签：php, codeigniter, pass-by-reference

`show_error`从 CodeIgniter 的函数中获取以下代码：

`$_error =& load_class('Exceptions', 'core');`

该`load_class`函数的文档说它充当单例。该函数基本上采用给定的参数并在适当的路径中搜索类。然后它包含该文件（如果存在）。该函数声明为：

`function &load_class(...)`

为什么它有&，它的目的是什么？`$_error`像这样定义函数的结果是这样声明的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:22:45.630

我没有看到任何声明和使用`load_class`这样的意义。从源码中`load_class()`可以看出，它以类名为key，将加载的对象缓存在一个数组中。如果它不在缓存中，它会加载一个给定名称的对象，然后将该对象引用存储到数组中。在这两种情况下，它都返回数组的元素（通过引用）。

通过引用返回允许调用者拥有对数组元素的引用。这允许我们做的唯一事情是：

1.  稍后从我们拥有的外部引用中查看对该数组元素（即与该键关联的值）的更改。但这不适用，因为该`load_class`函数在设置键后永远不会更改与键关联的值。
2.  让外部代码能够在`load_class`函数不知道的情况下更改数组中的元素。但这将是一个非常可疑的做法，从外部弄乱缓存，我非常怀疑这是作者想要的。

因此，没有正当理由通过引用返回。我的猜测是它是 PHP 4 的遗留物，当时对象是值，因此分配或返回“对象值”会复制它。在 PHP 5 中，对象不是值；您只能通过对象引用来操作它们，并且通过值分配或返回对象引用永远不会复制它指向的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:31:34.980

php[文档](http://php.net/manual/en/language.references.return.php)似乎解释了为什么你必须使用`=&`即使该函数被标记为返回一个参考`function &load_class`

> 返回参考
> 
> 当您想使用函数查找应该将引用绑定到哪个变量时，按引用返回很有用。不要使用按引用返回来提高性能。引擎会自行自动优化。仅在您有正当的技术理由时才返回参考资料。要返回引用，请使用以下语法：

```
 <?php class foo {
     public $value = 42;

     public function &getValue() {
         return $this->value;
     } 
  }

$obj = new foo; 
$myValue = &$obj->getValue(); // $myValue is a reference to $obj->value, which is 42.
$obj->value = 2; 
echo $myValue;
// prints the new value of $obj->value, i.e. 2\. ?> 
```

在这个例子中，

> getValue 函数返回的对象的属性将被设置，而不是副本，因为它不会使用引用语法。 ***注意：与参数传递不同，这里你必须在两个地方都使用 & - 表示你想通过引用而不是副本返回，并表示应该为 $myValue 进行引用绑定，而不是通常的赋值。***

如果您询问[文档](http://php.net/manual/en/language.references.php)解释的一般参考资料。

# c# - windows 手机应用程序开发

> ID：13727766
> 
> 赞同：-3
> 
> 时间：2012-12-05T16:25:51.700
> 
> 标签：c#, visual-studio-2010, windows-phone-7, windows-phone-8

我对 Windows Phone 开发完全陌生。现在我有一台安装了 Windows 7 的 PC。所以我只能为windows Phone 7制作应用程序。我制作的应用程序，它们也可以在windows phone 8上运行吗？

另外，你们有什么好的入门教程吗？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:27:58.220

WP7 应用程序将在 WP8 上运行。使用您最喜欢的搜索引擎来查找教程或发布一个新问题，解释您无法弄清楚的具体内容。

# image - 对于导航，图形标题应该放在 figcaption 中吗？

> ID：13727768
> 
> 赞同：1
> 
> 时间：2012-12-05T16:25:57.900
> 
> 标签：image, navigation, semantic-web, semantic-markup, figure

假设您登陆了一个类别网页，其唯一目的是通过使用图像和简短标题通知您每个类别的内容，将您引导到适当的子类别。

当谈到[UX 考虑时——有人建议](https://ux.stackexchange.com/questions/30099/caption-below-or-above-image-for-navigation-purposes)以下安排将是最优化的（文本在图像之前）：

![在此处输入图像描述](../Images/2bc5a45d4bd9a6508182682a30b81e23.png)

每个照片和文本组合都将链接到相应的子类别。

考虑到语义 HTML5，因为这些是子类别的标题而不是确切的标题，使用该`<figcaption>`元素是否合适？或者是别的什么？

**使用图形标题：**

```
<h2>Our Planet's Animals</h2>
<p>Contrary to popular belief...</p>

<figure>
<a>
<figcaption>Rhinos</figcaption>
<img />
</a>
</figure> 
```

**改用标题（或其他东西）：**

```
<h2>Our Planet's Animals</h2>
<p>Contrary to popular belief...</p>

<figure>
<a>
<h3>Rhinos</h3>
<img />
</a>
</figure> 
```

或者，在语义上什么是正确的，并且可以简化样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:32:16.147

我认为这里[`figure`元素](http://www.w3.org/TR/html5/the-figure-element.html#the-figure-element)的使用是不正确的，因为这个内容可能是页面的主要内容，但是`figure`它说：

> [...] 但可以在不影响文档流程的情况下将其从主要内容中移开 [...]

如果您在论文中有图表或在新闻文章中有照片等，您会使用`figure`：“[...] 通常作为文档主要流程中的单个单元引用”的内容。

相反，我将使用`section`每个类别并将所有类别包含在 a 中`nav`（因为它是该部分*内容*的主要导航，由标题“我们星球的动物”打开）。

```
<h2>Our Planet's Animals</h2>
<p>Contrary to popular belief...</p>

<nav> <!-- nav could be omitted -->

 <section>
  <a>
  <h1>Rhinos</h1> <!-- you could use h3 here instead -->
  <img />
  </a>
 </section>

 <section>
  …
 </section>

 <section>
  …
 </section>

 <section>
  …
 </section>

</nav> 
```

* * *

如果您不想使用标题，也可以使用类别列表（[`dl`](http://www.w3.org/TR/html5/the-dl-element.html#the-dl-element)或`ul`）。我认为`ul`比`dl`这里更合适：

```
<h2>Our Planet's Animals</h2>
<p>Contrary to popular belief...</p>

<nav> <!-- nav could be omitted -->
 <ul>
  <li><a>Rhinos <img /></a></li>
  <li>…&lt;/li>
  <li>…&lt;/li>
  <li>…&lt;/li>
 </ul>
</nav> 
```

也可以`section`在每个`li`元素 ( `<li><section>…&lt;/section></li>`) 中使用，但我不确定这将如何影响文档大纲。

# c++ - 未解析的外部符号

> ID：13727771
> 
> 赞同：0
> 
> 时间：2012-12-05T16:26:05.690
> 
> 标签：c++, visual-studio, symbols, unresolved-external

我遇到了一个让我困扰了很多天的错误。一个快速的谷歌没有给我一个答案。在我看来，代码没有错误，但是当我运行程序时，我得到 9 Unresolved External Symbol(LNK2019) 错误。在尝试破译我的一个错误之后，我相信它发生在一个名为`createMortgage`. 这是我对函数的调用。 `customers`是一个向量。

```
for (unsigned int i = 0; i < customers.size(); i++)
            {
                Customer tempcust = customers.at(i);
                if (tempcust.getId() == id)
                {
                    customers.at(i).createMortgage();
                }
            } 
```

这是函数本身。

```
void createMortgage(){
        int amount;

        cout << "Amount?";
        cin >> amount;

        Mortgage mort(amount);
        mortgages.push_back(mort);
    } 
```

在这里，尽管它的荣耀，是错误。

```
Error   4   error LNK2019: unresolved external symbol "public: __thiscall Mortgage::Mortgage(double)" (??0Mortgage@@QAE@N@Z) referenced in function "public: void __thiscall Customer::createMortgage(void)" (?createMortgage@Customer@@QAEXXZ) F:\C++ assignment (Real)\C++ assignment (Real)\Driver.obj   C++ assignment (Real) 
```

这是我的抵押 .h 文件。

```
#pragma once
//#include <iostream>
//#include <String>

class Mortgage
{

private:
    int id;
    double amount;

public:
    Mortgage(double amount);
    double getAmount();
    int getId();
}; 
```

这是我的抵押贷款 .cpp 文件。

```
#pragma once

extern int idcreation;

class Mortgage
{

    int id;
    double amount;

    Mortgage(double amount)
    {
        this -> amount = amount;
        this -> id = idcreation;
        idcreation++;
    }

    int getId(){
        return id;
    }

    double getAmount(){
        return amount;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:33:03.403

改变这个：

```
class Mortgage
{
int id;
double amount;

Mortgage(double amount)
{
    this -> amount = amount;
    this -> id = idcreation;
    idcreation++;
}

int getId(){
    return id;
}

double getAmount(){
    return amount;
} 
```

对此：

```
#include "mortgage.h"

Mortgage::Mortgage(double amount)
{
    this -> amount = amount;
    this -> id = idcreation;
    idcreation++;
}

int Mortgage::getId(){
    return id;
}

double Mortgage::getAmount(){
    return amount;
} 
```

我发现您并没有真正了解如何使用头文件和源文件来制作课程，本教程将使您步入正轨：[http](http://thenewboston.org/watch.php?cat=16&number=15) ://thenewboston.org/watch.php?cat=16&number=15 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:45:17.123

您对基本 C++ 语法有疑问。

`#pragma once`是 Visual Studio 特定的，并且是标题保护的替代品。它不应该出现在`.cpp`文件中

您提供了两个不同的类定义，第`Mortage`一个在标题中，第二个在`.cpp`文件中

定义类的正确语法如下：

头文件：

```
/* something.h */
#ifndef SOMETHING_H_
#define SOMETHING_H_

class Something
{
public:
  Something();
  void some_method();
};
#endif 
```

`.cpp`文件：

```
/* something.cpp */
#include "something.h"

Something::Something() { /* implementation */ }

void Something::some_method() { /* implementation */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:41:03.583

1）您没有链接（并且可能没有编译）您的mortgage.cpp 文件。检查您的 IDE 项目配置以确保它包含`mortgage.cpp`为源文件。

2) 您不得在您的 cpp 文件中复制类定义。相反，它的结构如下：

```
#include "mortgage.h"
Mortage::Mortgage(double d) { ... } 
```

# hadoop - 采样 HBase 表键空间

> ID：13727776
> 
> 赞同：3
> 
> 时间：2012-12-05T16:26:18.847
> 
> 标签：hadoop, hbase

我想构建 HBase 表的行键空间的随机样本。

比如说，我希望 HBase 中大约 1% 的键随机分布在整个表中。这样做的最佳方法是什么？

我想我可以编写一个 MapReduce 作业来处理所有数据并提取 1/100 的键......或者也许使用协处理器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T17:47:31.987

您可以使用[RandomRowFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/RandomRowFilter.html)来获取样本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T03:53:46.857

我最终在 Pig 中这样做了，但无论出于何种原因，它都非常缓慢。我得到了我需要的数据，所以我没有走得更远，但我可能应该尝试亚历山大的回答。

```
data = LOAD 'hbase://MARS1'
   USING org.apache.pig.backend.hadoop.hbase.HBaseStorage(
     'A:*', '-loadKey true')
   AS (id:bytearray, A_map:map[]);

justkeys = FOREACH data GENERATE id;

-- rough estimate of number of keys in hbase table 
smp = SAMPLE justkeys 0.000001;

STORE smp INTO 'key_sample' USING PigStorage('\t'); 
```

# tridion - 在不使用搜索的情况下检索具有特定值和架构的 Tridion 2009 组件列表

> ID：13727782
> 
> 赞同：1
> 
> 时间：2012-12-05T16:26:27.857
> 
> 标签：tridion, tridion2009

我想创建一个驻留在 CMS 服务器上的 .NET 页面，该页面显示基于特定架构（tcm：3-3-8）和特定出版物（tcm：0-3-1）的所有组件，包括 BluePrinted和本地化项目，但前提是它们在该架构中的“URL”字段具有值“http://www.google.com”。

这是否可能，而不使用搜索服务，因为这相当慢且不可靠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:13:56.113

由于未对搜索集合编制索引，您的搜索可能会很慢。

您应该定期索引搜索集合以获得更好和更快的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:33:19.320

这是一项昂贵的操作，因为打开每个单独的组件以检查字段的值的成本，但肯定是可行的。

1.  获取架构对象
2.  获取使用此架构的组件列表（架构上的 WhereUsed 与 ItemType = 组件上的过滤器）
3.  打开每个组件并检查字段的值，`List<Component>`如果匹配则添加到
4.  显示列表（可能使用 ASP.NET GridView）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:11:12.173

我没有任何机会测试它，但是像这样

```
 Common common = new Common();
    TDSE tdse = new TDSE();
    ListRowFilter ComponentFilter = tdse.CreateListRowFilter();

    Schema schema = (Schema)common.getObject("tcm:126-238630-8", ItemType.ItemTypeSchema);
    ComponentFilter.SetCondition("ItemType", ItemType.ItemTypeComponent);
    ComponentFilter.SetCondition("Recursive", true);

    XDocument doc = common.ReadXML(schema.Info.GetListUsingItems(ListColumnFilter.XMLListID, ComponentFilter));
    List<Component> MatchedComponents = new List<Component>();

    XmlNamespaceManager NS = new XmlNamespaceManager(new NameTable());
    NS.AddNamespace("tcm", "http://www.tridion.com/ContentManager/5.0");
    NS.AddNamespace("Content", "uuid:4432F3C3-9F3E-45E4-AE31-408C5C46E2BF");
    foreach (XElement component in doc.XPathSelectElements("/tcm:ListUsingItems/tcm:Item", NS))
    {
        Component comp = common.getComponent(component.Attribute("ID").Value);

        XDocument compDoc = common.ReadXML(comp.GetXML(XMLReadFilter.XMLReadData));
        foreach (XElement compNode in compDoc.XPathSelectElements("/tcm:Component/tcm:Data/tcm:Content/Content:Content/Content:feederUrl", NS))
        {
            MatchedComponents.Add(comp);
        }
    } 
```

# php - PHP DateInterval：两个不同月份的同一日期之间的差异不是一个月

> ID：13727785
> 
> 赞同：1
> 
> 时间：2012-12-05T16:26:34.237
> 
> 标签：php, date

我正在开发用户每月付费的订阅服务。

我有两个约会

1: 2012-12-05 ($今天)

2: 2013-01-05 ($end_date)

对我来说，就是一个月。但对于 PHP，这只有 30 天。

这是一些代码（您可以看到上面映射的日期的值）

```
$end_date_for_new_agents = clone $end_date;
$end_date_for_new_agents = $end_date_for_new_agents->add(new DateInterval("P1D"));
$agent_period_months_obj = $today->diff($end_date_for_new_agents);
echo $agent_period_months_obj->format("%y-%m-%d") 
```

这与 0-0-30 相呼应

为什么会这样，我怎样才能让 PHP 计算不同月份的相同日期之间的差异作为整个月份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:02:50.217

你也应该考虑时间，否则一天可能不完整。

例如：

```
date_default_timezone_set("Europe/Rome");
$end='2013-01-05';
$intervalo = date_diff(date_create(), date_create($end));
echo $intervalo->format("Years:%Y,Months:%M,Days:%d,Hours:%H,Minutes:%i,Seconds:%s"); 
```

给出结果：

```
Years:00,Months:00,Days:30,Hours:05,Minutes:59,Seconds:53 
```

以下代码

```
date_default_timezone_set("Europe/Rome");
$start='2012-12-05';
$end='2013-01-05';
$intervalo = date_diff(date_create($start), date_create($end));
echo $intervalo->format("Years:%Y,Months:%M,Days:%d,Hours:%H,Minutes:%i,Seconds:%s"); 
```

给出结果：

```
Years:00,Months:01,Days:0,Hours:00,Minutes:0,Seconds:0 
```

检查值`$today`是否也有时间，如果有，你应该只提取日期而忘记时间

# vb.net - vb.net中可以创建动态变量吗

> ID：13727787
> 
> 赞同：0
> 
> 时间：2012-12-05T16:26:34.707
> 
> 标签：vb.net

如果可能，我正在尝试动态创建变量。

我有一个包含复选框的列表框。用户从中选择项目，然后将选择添加到数据库中。他们可以从列表中选择任意数量的项目 (1-7)。我已经遍历选定的项目并将它们添加到数组列表中。

我现在想将每个选定的项目存储在要添加到数据库中的不同变量中。这个想法是只使用一个预期 7 个条目的插入语句。如果用户只选择说 2 个项目，则插入这些项目以及 5 个空字符串。

```
 Dim part1 As String = ""
    Dim part2 As String = ""
    Dim part3 As String = ""
    Dim part4 As String = ""
    Dim part5 As String = ""
    Dim part6 As String = ""
    Dim part7 As String = ""

    'add selected items to an array
    For i = 0 To listPart.CheckedItems.Count - 1
        selected.Add(listPart.CheckedItems(i).Text)
    Next 
```

我想做类似的事情：

```
 For j = 0 To selected.Count
        part+j = selected(j)
    Next 
```

这样，如果用户没有选择所有 7 个项目，我应该让变量保持空字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:40:04.033

我不认为可以创建或需要创建动态变量。

ArrayList、Array、List 和 Collection 等对象支持添加项目（类似于您描述添加动态变量的方式）

如果您希望为列表视图中的每个项目添加一个数据库条目，您可以只循环遍历列表视图

```
 For item as ListViewItem in listPart.Items
     'Save item.Text
 Next item 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:40:51.860

您可以通过反射来做到这一点，但这是不可取的。它很难调试，也很难实现，并且可能会导致访问限制的问题。

[http://msdn.microsoft.com/en-us/library/6z33zd7h.aspx](http://msdn.microsoft.com/en-us/library/6z33zd7h.aspx)

```
System.Reflection.FieldInfo FI = T.GetField("part" & j);
FI.SetValue({your class name here},selected(j)); 
```

# c# - 从 wpf 中的数组裁剪图像的问题

> ID：13727788
> 
> 赞同：2
> 
> 时间：2012-12-05T16:26:37.107
> 
> 标签：c#, wpf, image, grayscale

我有一种方法可以让我检索 16 位 tiff 图像：我只保留相关信息。

我主要使用：

```
 Stream imageStreamSource = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read);
        TiffBitmapDecoder decoder = new TiffBitmapDecoder(imageStreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);

        BitmapSource bitmapSource = decoder.Frames[0];
        w = bitmapSource.PixelWidth; h = bitmapSource.PixelHeight;//width and height

        stride = w * bitmapSource.Format.BitsPerPixel / 8;//stride
        int byteSize = stride * h * bitmapSource.Format.BitsPerPixel / 16;//16 for a ushort array
        data = new ushort[byteSize];

        bitmapSource.CopyPixels(data, stride, 0); //Get pixels data into data array
        //bmpSource = bitmapSource;//used for reference
        originalFileData = new ushort[data.Length / 2];//used for reference (1 dimensional array representing the adus )
        Array.Copy(data, originalFileData, originalFileData.Length);
        bmp.WritePixels(new Int32Rect(0, 0, w, h), originalFileData, stride, 0); 
```

我跟踪传递给 WritePixels 方法的数组并将其称为“Filedata”以进行一些图像处理

我有一个裁剪方法：

```
crop(Rect rect) 
    {
    int newWidth=(int)Math.Floor(rect.TopRight.X-rect.TopLeft.X);
    int newHeight=(int)Math.Floor(rect.BottomRight.Y-rect.TopRight.Y);
    ushort[] newdata=new ushort[newWidth*newHeight];
    for (int i = (int)rect.TopLeft.X, i2 = 0; i2 < newWidth; i++, i2++)
        for (int j = (int)rect.TopLeft.Y, j2 = 0; j2 < newHeight; j++, j2++)
            newdata[j2 * newWidth + i2] = Filedata[j * Width + i]; 
```

我尝试以这种方式从数组 newdata 中制作一个新图像：

```
 WriteableBitmap bmp = new WriteableBitmap(newWidth, newHeight, dpi, dpi, PixelFormats.Gray16, null);
        bmp.WritePixels(new Int32Rect(0, 0, newWidth, newHeight), newdata,stride, 0); 
```

但是最后一种方法给了我这个例外：

> “PresentationCore.dll 中出现‘System.ArgumentException’类型的未处理异常
> 
> 附加信息：缓冲区大小不足。”

现在据我所知，我在第二部分使用与第一部分相同的方法，但我无法裁剪！

非常感激任何的帮助！多谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:52:25.050

我猜该`stride`值应该与更新矩形的实际宽度相匹配：

```
stride = newWidth * (bmp.Format.BitsPerPixel + 7) / 8;
bmp.WritePixels(new Int32Rect(0, 0, newWidth, newHeight), newdata, stride, 0); 
```

# jquery - jquery 手风琴在 IE 8 中不起作用

> ID：13727789
> 
> 赞同：0
> 
> 时间：2012-12-05T16:26:36.380
> 
> 标签：jquery, jquery-ui, internet-explorer, accordion

所以这个 jquery 手风琴不能在 IE 8 中运行，但在 Firefox、Chrome 和 Safari 中运行良好。是什么赋予了？

这是小提琴， [http://jsfiddle.net/jEeqQ/](http://jsfiddle.net/jEeqQ/)

这是脚本链接和代码

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    $( ".blurb, .contributors" ).accordion({
    activate: function( event, ui ) {}
});
    </script>
<script>$(document).ready(function($) {

    $( ".blurb, .contributors" ).on( "accordionactivate", function( event, ui ) {  
        event.preventDefault();
        $('html,body').animate({scrollTop:$(".ui-accordion-content").offset().top}, 500);
    });
});
</script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<script>
    $(function() {
        $( ".blurb" ).accordion({
            collapsible: true,
            heightStyle: "content",
            active:false
        });
    });
    </script> 
```

HTML：

```
<div class="blurb">
        <h3></h3>
        <div>
            <div class="text_center full left padding">
                <h1 class="uppercase">#fridayfacts</h1>
                <h6>Join us on twitter every friday</h6><br>
                <h6 class="text_center"><a class="button" href="https://twitter.com/rcumsu" target="_blank">@rcumsu</a></h6>
            </div>
            <div class="text_left full right">
                <h6>Fact:</h6>
                <div class="text_left padding half left">
                    <p>The US needs 34% more students in STEM to keep up w/ economic demand. CTE helps meet that need.</p>
                    <p>Too many MS students drop out, often because they don't see real-world value of a degree. With CTE, they connect learning to work.</p>
                    <p>13K people with 4-yr degrees have re-entered MS community colleges to gain job skills. CTE prepares them for a profession.</p>
                    <p>20M+ in the US are un/underemployed, yet 3.4M jobs are unfilled due to skills gaps. CTE gives students the skills they need to find work.</p>
                </div>
                <div class="text_left padding half right">
                    <p>Employers value real-world, hands-on job experience. With CTE, MS students gain this experience early and qualify for more jobs.</p>
                    <p>STEM ed is crucial to US competitiveness in technology. CTE helps get kids in those fields faster. </p>
                    <p>By 2018, the US will need 22 million associate or higher degrees to fuel the economy. With CTE, MS students will be ready.</p><br><br><br>
                </div>
            </div>
        </div>
    </div> 
```

CSS：

```
 .blurb, .contributors {
    /*
    display: block;
    float: left;
    height: 0;*/
    position:absolute;
    bottom:0;
    width: 100%;
}
.flex-viewport .blurb {
    bottom:-15px;
}
.blurb_padding {
    padding-bottom:50px;
}
.ui-accordion {
    height:0;

}
.ui-accordion-header {
    font-family: 'BrandonGrotesqueMedium';
    font-size:16px;
    text-transform:uppercase;
    letter-spacing:1.5px;
    line-height:12px;
    padding:26px;
    background:#FBAF39;
    position: relative;
    bottom: 64px;
    cursor: pointer;
    opacity: 1;
    -webkit-transition: all .3s ease;
    margin:0 auto;
    text-align:center;
    color: #FFFFFF;
    z-index:9999;
    }
.blurb .ui-accordion-header {
    width:60px;
}
.contributors .ui-accordion-header {
    width:150px;
}
.ui-state-default.ui-accordion-header.ui-accordion-header-active.ui-state-hover {
    background:#FFFFFF;
    color:#FBAF39;
}
.ui-state-default.ui-accordion-header.ui-state-hover{
    background:#DDDDDD;
    color:#777C76;
}
.ui-accordion-header-active {
    background:#fbfbfb;
    color:#FBAF39;
    }
.blurb .ui-state-default.ui-accordion-header:after {
    content:"extra";
}
.blurb .ui-state-default.ui-accordion-header.ui-accordion-header-active:after {
    content:"close";
}

.contributors .ui-state-default.ui-accordion-header:after {
    content:"contributors";
}
.contributors .ui-state-default.ui-accordion-header.ui-accordion-header-active:after {
    content:"close";
}

.ui-accordion-content {
    background:#FBAF39;
    background-repeat: repeat;
    color:#FFFFFF;
    width:90%;
    padding:3% 5% 55px;
    position:absolute;
    bottom:0;
}

.ui-accordion-content a.button {
    background:#fbfbfb;
    padding:13px;
    line-height:12px;
    color:#FBAF39;
}
.ui-accordion-content a.button:hover, .ui-accordion-content a.button:active {
    background-color:#FFFFFF;
    color:#FBAF39;
}
.ui-accordion-content h6, .ui-accordion-content .lowlight, .ui-accordion-content .highlight, .ui-accordion-content .midlight, .ui-accordion-content h1 {
    color:#FFFFFF;
}
.ui-accordion-content p, .ui-accordion-content .text {
    color:#FFFFFF;
}
.ui-accordion ul {
    margin:0;
    font-family: 'Tienne'; font-weight: 400;
    font-size:16px;
    color:#FFFFFF;
    line-height: 18px;
}
.ui-accordion .icon {
    background-color:#FFFFFF;
    -webkit-border-radius: 30px;
    -moz-border-radius: 30px;
    -o-border-radius: 30px;
    border-radius: 30px;
    margin-right:10px;
} 
```

当手风琴在移动设备上打开非常高时，那里有一些自定义 jquery 可以添加一些滚动。

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:44:43.613

将您的 jquery 库更新到更高版本，如 1.8.3，除非您特别需要 1.7.1，否则它可以工作

我已经更新了你给的小提琴......不适用于 IE8 中的 1.7.1，但适用于 IE8 中的 1.8.3

`<script src=http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js></script>`

更新了小提琴 [http://jsfiddle.net/jEeqQ/10/](http://jsfiddle.net/jEeqQ/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:42:07.390

您正在尝试在加载 jQueryUI 本身之前使用 jQueryUI 手风琴方法。如果在 jQuery 之后加载，它将起作用：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<script>
    $( ".blurb, .contributors" ).accordion({
    activate: function( event, ui ) {}
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T11:43:55.120

即使我有同样的问题。但我使用这些说明解决了这个问题。

说明 1

从“开始”菜单或桌面加载 Internet Explorer 8，然后浏览到 Google Chrome Frame 网站。点击“Get Google Chrome Frame”按钮，阅读服务条款后点击“接受并安装”按钮。让 Internet Explorer 8 下载 Google Chrome Frame 并在安装完成后单击“关闭”按钮。

2

单击“开始”按钮并在“搜索程序和文件”文本框中键入“regedit”。按键盘上的“Enter”键启动注册表编辑器。展开“HKEY_CURRENT_USER”文件夹并双击出现在其下方的“Software”文件夹。右键单击“软件”内的“Google”文件夹并指向“新建”。选择“Key”并键入不带引号的“ChromeFrame”。

3 右键单击​​注册表编辑器右侧面板中的空白区域，然后选择“新建”。选择“DWORD 值”并键入不带引号的“AllowUnsafeURLs”。双击“AllowUnsafeURLs”条目并将值数据设置为“1”。单击“确定”按钮并关闭注册表编辑器。

4 重新启动 Internet Explorer 8 并打开出现 jQuery 问题的页面。单击 Internet Explorer 8 地址栏并将文本光标放在“http://”文本之前。键入不带引号或空格的“gcf:”，然后按“Enter”键修复 jQuery 问题。

: 我想它会帮助你

# ios - FacebookSDK 两次呈现登录 UI

> ID：13727796
> 
> 赞同：4
> 
> 时间：2012-12-05T16:26:55.447
> 
> 标签：ios, facebook, ios6

使用带有 FacebookSDK 的 iOS 6 将读取和发布权限请求拆分为两个单独的调用。我不确定为什么这样做有什么好处，但似乎需要在第一次通过时向用户展示两次 Facebook UI。

在我的应用程序中，在用户选择使用 Facebook 之前，我不会向 Facebook 请求任何内容，在这种情况下，他们首先会看到 UI 以获得读取权限，然后再次获得发布权限。控制从我的应用程序切换到 facebook（用于阅读）返回到我的应用程序，然后立即返回到 facebook（用于发布）然后返回到我的应用程序。

这是一种糟糕的用户体验，特别是因为带有“Okay”的 facebook 屏幕对用户来说看起来是一样的。（为什么我要按两次确定？）

简而言之，我的代码是：

```
Check for a valid FBSession.activeSession
if not open call FBSession openActiveSessionWithReadPermissions
if successful call FBSession.activeSession reauthorizeWithPublishPermissions
then publish post 
```

代码有效，但用户体验很糟糕。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T02:34:44.703

我的理解是 iOS 6 需要双重登录才能获得`ACAccountStore`支持，因此 Facebook[登录教程](https://developers.facebook.com/docs/howtos/ios-6/)暗示您应该在所有情况下都这样做。两次切换应用程序是一种糟糕的用户体验，我想我已经想出了一个解决方法。

首先，对于较旧的 iOS（例如 iOS 5.0），您是否可以`openActiveSessionWithPublishPermissions:`一举使用并执行读取和发布权限。其次，如果用户从未从设备设置登录 Facebook，则同样的调用也有效。因此，以下代码似乎是这样工作的：

*   如果用户已从设备设置登录 Facebook：一个对话框用于读取，一个对话框用于发布。
*   否则，如果用户安装了 Facebook 应用程序：切换到 FB 应用程序一次，并连续获得 2 个提示。
*   否则：切换到Safari一次，连续得到2个提示

我使用 Facebook SDK 3.2.1 在 iOS6 和 iOS5 设备上测试了这段代码

```
- (BOOL)hasFacebookInDeviceSettings
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountTypeFB = [accountStore accountTypeWithAccountTypeIdentifier:@"com.apple.facebook"];
    BOOL hasFacebookBuiltinAccount = (accountTypeFB != nil);
    return hasFacebookBuiltinAccount;
}

- (BOOL)hasLoggedInToFacebookInDeviceSettings
{
    if (![self hasFacebookInDeviceSettings]) {
        return NO;
    }
    BOOL result = [SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook];
    return result;
}

- (void)openFacebookSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
    if (![self hasLoggedInToFacebookInDeviceSettings]) {
        // Simpler if we don't have the built in account
        [FBSession openActiveSessionWithPublishPermissions:@[@"publish_actions"]
                                           defaultAudience:FBSessionDefaultAudienceFriends
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session,
                                                             FBSessionState state,
                                                             NSError *error) {
                                             [self facebookSessionStateChanged:session
                                                                         state:state
                                                                         error:error];
                                         }];
    }
    else if (!FBSession.activeSession.isOpen) {
        __block BOOL recursion = NO;
        [FBSession openActiveSessionWithReadPermissions:nil
                                           allowLoginUI:allowLoginUI
                                      completionHandler:^(FBSession *session,
                                                          FBSessionState state,
                                                          NSError *error) {
                                          if (recursion) {
                                              return;
                                          }
                                          recursion = YES;
                                          if (error || !FBSession.activeSession.isOpen) {
                                              [self facebookSessionStateChanged:session
                                                                          state:state
                                                                          error:error];
                                          }
                                          else {
                                              assert(FBSession.activeSession.isOpen);
                                              if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
                                                  [FBSession.activeSession requestNewPublishPermissions:@[@"publish_actions"]
                                                                                        defaultAudience:FBSessionDefaultAudienceFriends
                                                                                      completionHandler:^(FBSession *session,
                                                                                                          NSError *error) {
                                                                                          [self facebookSessionStateChanged:session
                                                                                                                      state:FBSession.activeSession.state
                                                                                                                      error:error];
                                                                                      }];
                                              }
                                          }
                                      }];
    }
} 
```

`hasFacebookInDeviceSettings`告诉您此设备是否甚至从设置中支持 Facebook（即这是 iOS6+）。

`hasLoggedInToFacebookInDeviceSettings`告诉您用户是否已从 iOS6 Facebook 设备设置登录到 Facebook。

您需要创建自己的`facebookSessionStateChanged:`代码和其他代码，如[登录教程中所述](https://developers.facebook.com/docs/howtos/ios-6/)

# sql-server - TSQL 检索当前月/年的所有记录

> ID：13727800
> 
> 赞同：11
> 
> 时间：2012-12-05T16:27:04.527
> 
> 标签：sql-server, tsql, datetime

我有一个名为 DateFinished 的日期时间字段。我需要能够检索 DateFinished 在当前月份/年份内的所有记录。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-05T16:29:51.217

如果您只有少量行，则可以获取`DateFinished`今年这个月的所有行。

```
SELECT * 
FROM MyTable
WHERE Year(DateFinished) = Year(CURRENT_TIMESTAMP) 
                 AND Month(DateFinished) = Month(CURRENT_TIMESTAMP) 
```

不过，这可能会在大量行上变得相当慢 - 在这种情况下，使用`DateAdd`,`DatePart`并且`BETWEEN`可能更合适，并且可以利用索引（我现在没有时间写一个涉及这些的答案！）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-05T17:27:33.663

作为替代方案 - 这应该使用 DateFinished 上的索引。

```
SELECT * 
FROM MyTable
WHERE DateFinished BETWEEN 
     DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
     AND 
     DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-02T23:18:46.530

所以@Bridge 方法的问题在于索引的使用。@Moose & @PCurd 的方法存在问题，具体取决于数据的存储方式。

如果一天收集的所有数据都向下舍入到那一天，@PCurd 的方法可以正常工作。例如，下午 5 点的事件记录为 2021-11-30 00:00:00。但是如果保留时间（假设它是 Ops 情况下的日期时间字段），那么这些数据将会丢失。

所以你需要使用 <> 操作符。

```
SELECT * 
FROM MyTable
WHERE DateFinished >= 
     DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)
     AND DateFinished <
     DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + 1, 0) 
```

对于使用 datefromparts 的方法：[SQL 选择当前月份的记录](https://stackoverflow.com/questions/61111272/sql-select-records-with-current-month)

# c# - MemberwiseClone 和指南

> ID：13727805
> 
> 赞同：0
> 
> 时间：2012-12-05T16:27:21.777
> 
> 标签：c#

如果我执行以下操作：

```
var item2 = item1.MemberwiseClone();
item2.ID = Guid.NewGuid(); 
```

无论新`Guid` `item2`得到什么，它也会改变它`item1`。`Guid`由于 a是值类型，这不是不正确的吗？`Guid`和都会发生这种情况`Guid?`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:39:57.170

你的实现一定有问题。这是一个演示用法的示例：

```
class Program
{
    class A 
    {
        public Guid ID { get; set; }

        public A Clone()
        {
            return (A)this.MemberwiseClone();
        }
    }

    static void Main(string[] args)
    {
        var item1 = new A();
        item1.ID = Guid.NewGuid();

        var item2 = item1.Clone();
        item2.ID = Guid.NewGuid();

        Console.WriteLine(item1.ID);
        Console.WriteLine(item2.ID);

        Console.ReadKey();
    }
} 
```

如果您将代码作为控制台应用程序运行，您将看到 Guid 与文档所述不同。

# php - 使用 MySQL 数组以特定顺序填充另一个 MySQL 表

> ID：13727806
> 
> 赞同：0
> 
> 时间：2012-12-05T16:27:21.510
> 
> 标签：php, mysql, arrays

我正在尝试将 MySQL 数组中的结果放入另一个 MySQL 表中，但是以特定的静态顺序。

这是我的数组（MySQL）：

```
Array
(
    [1] => Array
        (
            [id] => 19
            [user_id] => 18
            [size] => Large
        )

    [2] => Array
        (
            [id] => 18
            [user_id] => 17
            [size] => Large
        )

    [3] => Array
        (
            [id] => 11
            [user_id] => 8
            [size] => Large
        )

    [4] => Array
        (
            [id] => 7
            [user_id] => 2
            [size] => Large
        )

    [5] => Array
        (
            [id] => 3
            [user_id] => 1
            [size] => Large
        )

    [6] => Array
        (
            [id] => 16
            [user_id] => 16
            [size] => Small
        )

    [7] => Array
        (
            [id] => 15
            [user_id] => 15
            [size] => Small
        )

    [8] => Array
        (
            [id] => 14
            [user_id] => 14
            [size] => Small
        )

    [9] => Array
        (
            [id] => 10
            [user_id] => 4
            [size] => Small
        )

    [10] => Array
        (
            [id] => 8
            [user_id] => 3
            [size] => Small
        )

    [11] => Array
        (
            [id] => 4
            [user_id] => 1
            [size] => Small
        )

    [12] => Array
        (
            [id] => 17
            [user_id] => 16
            [size] => Wide
        )

    [13] => Array
        (
            [id] => 12
            [user_id] => 12
            [size] => Wide
        )

    [14] => Array
        (
            [id] => 13
            [user_id] => 13
            [size] => Tall
        )

    [15] => Array
        (
            [id] => 5
            [user_id] => 1
            [size] => Tall
        )

) 
```

我现在正在尝试使用此数组输出将特定顺序的数据强制到另一个表中。

这是我所拥有的：

```
$mysql_array = $mySQLi->DoSelect("
    (SELECT id, user_id, size FROM `table1` WHERE size = 'Large' GROUP BY user_id ORDER BY id DESC LIMIT 0,5)
    UNION ALL
    (SELECT id, user_id, size FROM `table1` WHERE size = 'Small' GROUP BY user_id ORDER BY id DESC LIMIT 0,6)
    UNION ALL
    (SELECT id, user_id, size FROM `table1` WHERE size = 'Wide' GROUP BY user_id DESC ORDER BY id DESC LIMIT 0,2)
    UNION ALL
    (SELECT id, user_id, size FROM `table1` WHERE size = 'Tall' GROUP BY user_id DESC ORDER BY id DESC LIMIT 0,4)
");

for($i = 1; $streamItems[$i] = $mySQLi->GetArray($mysql_array); $i++)
{
    // Large images
    if($i === 1  && $streamItems[$i]['size'] == 'Large') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  1); }
    if($i === 2  && $streamItems[$i]['size'] == 'Large') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  4); }
    if($i === 3  && $streamItems[$i]['size'] == 'Large') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 10); }
    if($i === 4  && $streamItems[$i]['size'] == 'Large') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 11); }
    if($i === 5  && $streamItems[$i]['size'] == 'Large') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 12); }

    // Small
    if($i === 6  && $streamItems[$i]['size'] == 'Small') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  2); }
    if($i === 7  && $streamItems[$i]['size'] == 'Small') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  3); }
    if($i === 8  && $streamItems[$i]['size'] == 'Small') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  6); }
    if($i === 9  && $streamItems[$i]['size'] == 'Small') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  7); }
    if($i === 10 && $streamItems[$i]['size'] == 'Small') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 13); }
    if($i === 11 && $streamItems[$i]['size'] == 'Small') { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 14); }

    // Wide
    if($i === 12 && $streamItems[$i]['size'] == 'Wide')  { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  5); }
    if($i === 13 && $streamItems[$i]['size'] == 'Wide')  { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 17); }

    // Tall
    if($i === 14 && $streamItems[$i]['size'] == 'Tall')  { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  8); }
    if($i === 15 && $streamItems[$i]['size'] == 'Tall')  { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'],  9); }
    if($i === 16 && $streamItems[$i]['size'] == 'Tall')  { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 15); }
    if($i === 17 && $streamItems[$i]['size'] == 'Tall')  { saveToNewTable(1, $streamItems[$i]['id'], $streamItems[$i]['user_id'], 16); }
}

function saveToNewTable($stream_id, $artwork_id, $user_id, $sequence) 
{
    global $mySQLi;

    $mySQLi->DoSql("
        INSERT INTO 
            table2 
        (
            stream_id, 
            artwork_id, 
            user_id, 
            sequence
        ) 
        VALUES 
        (
            ".$stream_id.", 
            ".$artwork_id.", 
            ".$user_id.", 
            ".$sequence."
        )
    ");
} 
```

发生的情况是，只有 $mysql_array 的第一个结果会被插入到新表中——但是 3 次。为什么是3次？

我还收到以下警告：警告：mysqli_fetch_assoc() 期望参数 1 为 mysqli_result

干杯

# sublimetext2 - 让 ctrl+space 更像 Eclipse

> ID：13727807
> 
> 赞同：0
> 
> 时间：2012-12-05T16:27:24.957
> 
> 标签：sublimetext2

在 Default (OSX).sublime-keymap 文件中，我看到：

```
{ "keys": ["ctrl+space"], "command": "auto_complete" },
    { "keys": ["ctrl+space"], "command": "replace_completion_with_auto_complete", "context":
        [
            { "key": "last_command", "operator": "equal", "operand": "insert_best_completion" },
            { "key": "auto_complete_visible", "operator": "equal", "operand": false },
            { "key": "setting.tab_completion", "operator": "equal", "operand": true }
        ]
    }, 
```

但我希望它的功能更像 Eclipse，在点击`.`并等待片刻之后会弹出可用的方法。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:18:15.007

请记住，Sublime Text 不是 IDE。因此，类似 Eclipse 的补全（它只提供您可以为特定变量调用的方法）不是内置的。您可以尝试[使用 SublimeJava 之](https://github.com/quarnster/SublimeJava "崇高的Java")类的东西来完成更像 Eclipse 的补全。我用了一点，结果好坏参半。它不如 Eclipse 好用，但就我所做的而言，它是可以接受的。要在您按下“.”时调出您当前的完成集（默认在文件中），您可以将以下内容添加到您的用户首选项（可通过 访问`Preferences -> Settings - User`）。

```
"auto_complete_triggers": [{"selector": "source.java", "characters": "."}] 
```

`.`这将导致在您输入java 文件时显示自动完成弹出窗口。

# javascript - Colorbox iFrame 内容未出现在 IE 8/9 中

> ID：13727809
> 
> 赞同：0
> 
> 时间：2012-12-05T16:27:32.610
> 
> 标签：javascript, jquery, colorbox

我正在使用 ColorBox 在屏幕上调用一些信息模式，并考虑到客户的要求，最好的方法是通过 iFrames（不是我的第一选择，但无论如何）。在 Chrome、FF 等中一切正常，但 iFrame 内容在任何版本的 IE 中都不起作用。模态包装出现，但里面什么都没有。这是我到目前为止所做的：

1.  将 IE 的文档类型更改为过渡和严格。没有骰子。
2.  删除了“iframe: true”并将其替换为 HTML“Hello”。效果很好，“Hello”出现在 Colorbox 模式中。
3.  我已经从标题中删除了所有样式表。没有运气，所以这不是 CSS 问题。
4.  可以肯定的是，我将我的 JQuery 库从 1.8.2 回滚到 1.6.2。那里也没有。

任何帮助，将不胜感激。这是加重的。

一些代码：

```
 $(function ()
{
    $(".modal-large").colorbox({iframe:true, innerWidth:580, innerHeight:500});
}) 
```

HTML：

```
<div class="top-droptext"><a class="modal-large" href="modal/serviceproviderinfo.html">Update Password</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:01:13.907

这是文档类型问题。您需要将此添加到您的彩盒调用者页面的开头：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

# database - django 通过 REST 同步数据库

> ID：13727810
> 
> 赞同：0
> 
> 时间：2012-12-05T16:27:37.520
> 
> 标签：database, django, rest, asynchronous

因此，我将这 2 个应用程序与 REST API（json 消息）连接起来。一个用 Django 编写，另一个用 Php 编写。我在两边都有一个精确的数据库副本（使用 mysql）。

我的问题是，我怎样才能使这 2 个应用程序数据库保持同步？

换句话说，当我在其中一个上按“提交”时，我希望将该数据保存在当前应用程序数据库中，并保存在远程数据库中以供另一个使用 rest 的应用程序使用。

有没有一个 django 应用程序可以做到这一点？我阅读了有关 django-synchro 的信息，但没有看到任何与 REST 相关的内容。

而且我想让事情保持异步，换句话说，用户必须能够在此过程在后台运行并保持数据一致时继续使用该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:26:26.660

我看了一下 celery 和 redis，似乎 cron 工作可以满足我的需要

# php - 重定向显示空白页

> ID：13727818
> 
> 赞同：0
> 
> 时间：2012-12-05T16:28:03.350
> 
> 标签：php, redirect

当用户被重定向回登录页面时，我正在尝试获取返回 url。重新登录后，他们需要被重定向回他们所在的页面。我尝试了许多不同的方法。但是它只显示一个空白页。

以下是登录页面的代码：

```
 if(isset($_POST['submitted']))
{
   if($fgmembersite->Login())
   {
        $fgmembersite->RedirectToURL(str_replace("'", "", $_GET['redirecturl']));
   }
} 
```

以下是检查重定向登录的页面中的代码：

```
function RedirectToURL($url)
{

    header("Location: $url");
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:32:31.497

尝试回显 $url`RedirectToURL($url)`而不是抛出标题来检查是否：

1.  这是有效的网址
2.  它实际上被调用

你的问题是这两个之一。也可能是这种情况，在你调用`header()`函数之前已经回显了一些东西。在这种情况下，`header()`它不起作用，因为它只能在任何输出发送到浏览器之前工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:46:48.357

起初它不允许我修改标题。添加 ob_start(); 和 ob_end(); 允许我修改标题。然后我不得不抛出一个自定义 if 语句，当根本没有 redirecturl 查询标识符时发生错误。感谢所有的帮助。

`if (!isset($_GET['redirecturl'])){echo $_SERVER['PHP_SELF'];} else {echo $_SERVER['PHP_SELF'] . "?" . $_SERVER['QUERY_STRING'];}`

# java - Spring MVC中控制器方法的参数

> ID：13727820
> 
> 赞同：2
> 
> 时间：2012-12-05T16:28:08.303
> 
> 标签：java, spring, spring-mvc, locale

我是 Spring MVC World 的新手，我问你一个问题。

我通过 STS 模板创建了一个新的 Spring MVC 项目。

所以现在我有一个最小的项目，一旦执行，就会显示一条带有当前日期和时间的 Hello World 消息

这是本项目唯一的控制器类的代码：

```
package org.gnagna.bla;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

/**
 * Simply selects the home view to render by returning its name.
 */
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Locale locale, Model model) {
    logger.info("Welcome home! The client locale is {}.", locale);

    Date date = new Date();
    DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

    String formattedDate = dateFormat.format(date);

    model.addAttribute("serverTime", formattedDate );

    return "home";
}

} 
```

因此，只有一种称为**home**的方法可以处理对“/” URL 的 HTTP GET 调用，这对我来说很清楚。

这不是 clead 的事情是关于这个方法的输入参数，你可以看到这个方法接收两个输入参数：

1) 型号

2) 一个包含用户信息的 Locale 对象

但是：谁创建了这个 Locale 对象，什么时候作为输入参数传递给我的控制器？

肿瘤坏死因子

安德烈亚

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:37:27.360

LocaleResolver 正在这样做。

[HandlerMethodInvokere](http://static.springsource.org/spring-framework/docs/3.2.0.M2/api/org/springframework/web/bind/annotation/support/HandlerMethodInvoker.html "HandlerMethodInvoker")最终使用一个这样的解析器来检查您正在调用的 @RequestMapping 方法的参数（在您的情况下为“home”方法）。当它遇到一个 Locale 参数时，它只是使用 locale 解析器来获取一个 Locale 对象以作为参数传递。

您可以在此处查看有关它的更多信息：http: [//static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s06.html](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch16s06.html)

[http://templth.wordpress.com/2010/07/21/configuring-locale-switching-with-spring-mvc-3/](http://templth.wordpress.com/2010/07/21/configuring-locale-switching-with-spring-mvc-3/)

[http://www.mkyong.com/spring-mvc/spring-mvc-internationalization-example/](http://www.mkyong.com/spring-mvc/spring-mvc-internationalization-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:16:54.533

在您的 GET 请求中，您可以使用该请求的特殊参数（如`?language=en`. 但问题是您的 servlet 容器如何知道该`language`参数是承载您的语言环境信息的参数。为了让 Spring MVC 容器知道这个特殊的语言环境参数，你需要两个在你`targer-servlet.xml`喜欢的下面添加特殊的拦截器：

```
 <bean id="localeChangeInterceptor"
    class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="language" />
</bean>

<bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" >
    <property name="interceptors">
       <list>
        <ref bean="localeChangeInterceptor" />
        </list>
    </property>
</bean> 
```

现在的问题是，你的 servlet 容器知道你的 GET 请求传递的 locale 参数的值。但是您仍然需要有人根据所选语言链接更改语言环境并相应地显示来自属性文件的消息。一个名为的特殊 bean`localeResolver`来拯救这项工作，如下所示：

```
 <bean id="localeResolver"
    class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
    <property name="defaultLocale" value="en" />
</bean> 
```

现在，如果您想在 GET 请求处理程序方法中使用 locale 对象，您可以编写方法签名`public String home(Locale locale, Model model)`（例如，您所做的）。然后，您的 servlet 容器在调用它之前获得了一项额外的工作，即将该语言环境对象作为您的方法参数，然后您将它像魔术一样放入您的方法中！

# linux - 生成外部程序时调用 setpgid/setsid

> ID：13727821
> 
> 赞同：2
> 
> 时间：2012-12-05T16:28:11.260
> 
> 标签：linux, process, posix, process-group

从我的代码运行外部程序时，我有以下三个选项：

1.  之后什么都不做`fork()`。外部程序将在其父进程组中。
2.  调用`setpgid(0, 0)`或类似的，因此外部程序将获得自己的进程组。
3.  Call `setsid()`，它还将外部程序与其父级的控制 tty 分开。

以上哪些行为在哪些情况下是正确的？

例如，我看到一个使用 vim 和 gnome-open 的有趣行为：

1.  我运行`:!gnome-open somefile.pdf`，它启动 PDF 查看器并立即返回。
2.  然后我运行，例如，，`:!cat`当 cat 运行时，发送一个`SIGQUIT`using `CTRL-\`。

PDF 查看器崩溃。发生这种情况是因为 vim 和 gnome-open 似乎都在自己的进程组中生成了它们的子进程。

被称为 bug 可能太晦涩难懂，但我仍然想知道是谁的错：vim 或 gnome-open 是否有任何理由`setpgid`在分叉后不调用，就像 shell 会做的那样？`gnome-open`改为调用`setsid`将 X 应用程序与其启动的终端分开是否更有意义？（我觉得奇怪的是 GLib 没有提供标准和跨平台的方式来做这些事情。）

# ios - applicationDidEnterBackground 是否总是在 applicationWillTerminate 之前调用？

> ID：13727826
> 
> 赞同：7
> 
> 时间：2012-12-05T16:28:34.100
> 
> 标签：ios, lifecycle, multitasking

是否`applicationDidEnterBackground`总是`applicationWillTerminate`在 iOS 应用程序中调用过？我知道这`applicationWillTerminate`并不总是被调用（多任务处理） - 但是当它被调用时，`applicationDidEnterBackground`总是首先被调用吗？对于支持多任务处理的应用程序，`applicationWillTerminate`如果已经包含在其中，我不想不必要地重复代码。`applicationDidEnterBackground`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:45:21.613

在 ios 4.0 及更高版本`applicationDidEnterBackground`中调用而不是，`applicationWillTerminate`因此您不必同时调用它们。以下是 Apple 文档的一部分：

> **讨论**
> 
> 在 iOS 4.0 及更高版本中，当用户退出支持后台执行的应用程序时，将调用此方法而不是 applicationWillTerminate: 方法。您应该使用此方法来释放共享资源、保存用户数据、使计时器无效并存储足够的应用程序状态信息以将您的应用程序恢复到其当前状态，以防以后终止。您还应该禁用对应用程序用户界面的更新，并避免使用某些类型的共享系统资源（例如用户的联系人数据库）。您还必须避免在后台使用 OpenGL ES。
> 
> 您对此方法的实现大约有五秒钟的时间来执行任何任务并返回。如果您需要额外的时间来执行任何最终任务，您可以通过调用 beginBackgroundTaskWithExpirationHandler: 从系统请求额外的执行时间。在实践中，您应该尽快从 applicationDidEnterBackground: 返回。如果该方法在时间用完之前没有返回，则您的应用程序将被终止并从内存中清除。
> 
> 您应该在此方法退出之前执行与调整用户界面相关的任何任务，但其他任务（例如保存状态）应根据需要移动到并发调度队列或辅助线程。因为您在 applicationDidEnterBackground: 中启动的任何后台任务很可能在该方法退出之后才会运行，因此您应该在启动这些任务之前请求额外的后台执行时间。换句话说，首先调用 beginBackgroundTaskWithExpirationHandler: 然后在调度队列或辅助线程上运行任务。
> 
> 应用程序还会在调用此方法的同时发布 UIApplicationDidEnterBackgroundNotification 通知，让感兴趣的对象有机会响应转换。
> 
> 有关如何优雅地过渡到后台的更多信息，以及有关如何在退出时启动后台任务的信息，请参阅 iOS App Programming Guide。

希望这有助于为您解决问题。阿德里安

这是开发人员部分提供的技术说明的链接。它正在处理网络和多任务处理。本文档中使用的实际方法仅处理`applicationDidEnterBackground`自 iOS 5 以来，他们有一个称为*watchdog*的系统，如果网络自动无响应，它会终止应用程序。因此，无需实际调用`applicationWillTerminate`并尝试执行代码以允许您的应用程序在应用程序终止之前完成其任务。该应用程序将进入后台并继续其任务，直到最后一个任务完成。我希望这是有道理的，但这是链接。请阅读看门狗部分。 [https://developer.apple.com/library/ios/#technotes/tn2277/_index.html#//apple_ref/doc/uid/DTS40010841](https://developer.apple.com/library/ios/#technotes/tn2277/_index.html#//apple_ref/doc/uid/DTS40010841)

希望这可以帮助。:)

# android - 向 Android 传感器提供虚假数据

> ID：13727834
> 
> 赞同：4
> 
> 时间：2012-12-05T16:29:10.670
> 
> 标签：android, sensors, android-sensors

我想问一下是否有办法为 Android 传感器提供假数据。

例如，您可以使用以下方法为 GPS 传感器提供模拟位置：

```
$ telnet localhost 5554
Android Console: type 'help' for a list of commands
OK
geo fix -82.411629 28.054553
OK 
```

问题 1：你能在真实设备上做同样的事情吗？

问题 2：您是否也可以对其他传感器（例如加速度计）做同样的事情？

# android - android应用程序在点击时崩溃

> ID：13727838
> 
> 赞同：0
> 
> 时间：2012-12-05T16:29:24.320
> 
> 标签：android, eclipse

当我运行它并尝试使用 onclick 命令导航到不同的类时，我的应用程序崩溃了，这只是一个简单的意图，所以我对出了什么问题一无所知。

这是我的主要代码

```
package com.example.converter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

  //called when the user clicks the Temperature button */
    public void send(View view) {
        Intent intent = new Intent(this, Temp.class);
        startActivity(intent);
    }
} 
```

这是尝试去的地方

```
package com.example.converter;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class Temp extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_temp);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_temp, menu);
        return true;
    }
} 
```

显现

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.converter"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Temp"
            android:label="@string/title_activity_temp" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

和日志猫

```
> 12-05 10:14:11.544: E/AndroidRuntime(15769): Caused by: java.lang.NoSuchMethodException: Temperature
12-05 10:14:11.544: E/AndroidRuntime(15769):    at java.lang.ClassCache.findMethodByName(ClassCache.java:247)
12-05 10:14:11.544: E/AndroidRuntime(15769):    at java.lang.Class.getMethod(Class.java:962)
12-05 10:14:11.544: E/AndroidRuntime(15769):    at android.view.View$1.onClick(View.java:2145)
12-05 10:14:11.544: E/AndroidRuntime(15769):    ... 11 more
12-05 10:21:56.234: D/AndroidRuntime(15860): Shutting down VM
12-05 10:21:56.234: W/dalvikvm(15860): threadid=1: thread exiting with uncaught exception (group=0x40015560)
12-05 10:21:56.234: E/AndroidRuntime(15860): FATAL EXCEPTION: main
12-05 10:21:56.234: E/AndroidRuntime(15860): java.lang.IllegalStateException: Could not find a method Temperature(View) in the activity class com.example.converter.MainActivity for onClick handler on view class android.widget.Button with id 'button1'
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.view.View$1.onClick(View.java:2152)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.view.View.performClick(View.java:2506)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.view.View$PerformClick.run(View.java:9112)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.os.Handler.handleCallback(Handler.java:587)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.os.Looper.loop(Looper.java:130)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.app.ActivityThread.main(ActivityThread.java:3835)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at java.lang.reflect.Method.invokeNative(Native Method)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at java.lang.reflect.Method.invoke(Method.java:507)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at dalvik.system.NativeStart.main(Native Method)
12-05 10:21:56.234: E/AndroidRuntime(15860): Caused by: java.lang.NoSuchMethodException: Temperature
12-05 10:21:56.234: E/AndroidRuntime(15860):    at java.lang.ClassCache.findMethodByName(ClassCache.java:247)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at java.lang.Class.getMethod(Class.java:962)
12-05 10:21:56.234: E/AndroidRuntime(15860):    at android.view.View$1.onClick(View.java:2145)
12-05 10:21:56.234: E/AndroidRuntime(15860):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:33:48.320

您已`android:onclick="Temperature"`在布局 xml 中单击的按钮上进行了设置，但方法名称为“ `send`”。`send`在布局 xml中将方法名称更改为“ ”：

```
android:onclick="send" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:35:23.460

如果您正在设置，`android:onclick="Temperature"`则在 UI 的 XML 中将其更改为`android:onclick="send"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T09:58:32.670

这是您的主要代码：

```
package com.example.converter;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

//called when the user clicks the Temperature button */
public void send(View view) {
    Intent intent = new Intent(this, Temp.class);
    startActivity(intent);
}
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:34:25.733

在这部分代码中，

```
//called when the user clicks the Temperature button */
public void send(View view) {
    Intent intent = new Intent(this, Temp.class);
    startActivity(intent);
} 
```

您必须在您的`Button`（我假设）中定义以下属性`activity_main.xml`：

```
android:onClick="send" 
```

或者，您可以像这样分配`Button`一个 id：

```
android:id="@+id/btnShow" 
```

在你的`MainActivity`：

```
Button btnShow = (Button) findViewById(R.id.btnShow)
btnShow .setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
            Intent intent = new Intent(this, Temp.class);
            startActivity(intent);
    }
}); 
```

# java - 数据类型不匹配

> ID：13727839
> 
> 赞同：0
> 
> 时间：2012-12-05T16:29:26.447
> 
> 标签：java, interface, type-conversion

`Optional<string>`我用由于接口实现而必须做的数据类型声明了以下变量

```
public Optional<String> value; 
```

现在我需要编写下面的代码行，它给出数据类型不匹配错误

```
value = input.readString(); 
```

有什么方法可以将类型`input.readString();`转换为数据类型`Optional<string>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:36:05.003

您需要按如下方式分配它：

`value = Optional.of(input.readString());`

您不会向 Optional*投射*或从 Optional 投射。它是一种完全不同的类型，具有**泛型类型参数。**

# javascript - 根据下拉列表禁用复选框

> ID：13727846
> 
> 赞同：0
> 
> 时间：2012-12-05T16:29:42.447
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3, razor

我正在使用 DropDownLists 和 CheckBoxes 等开发一个 asp.net mvc3 应用程序。

如果选择了下拉列表的定义选项，我编写了一个 javascript 来禁用 CheckBox：

```
$(function() {
    $('#dropdownlistId').change(function() {
        if (this.value == '1st option') {
          $('#checkboxId').attr('disabled', disabled);
        } else {
          $('#checkboxId').removeAttr('disabled', disabled);
        }
    });
}); 
```

这工作正常，但脚本只对下拉列表的***更改作出反应***

因此，如果“第一个选项”位于下拉列表的顶部并自动选择为默认值，则脚本不会禁用该复选框。仅当用户选择另一个选项并再次选择“第一个选项”时...

请帮我 ：）

PS：如果我使用键盘而不是鼠标来切换下拉列表选项，脚本也不起作用

所以如果你能帮助我改进脚本会非常好，因为我真的不会做javascript：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:33:48.973

你可以这样做：

```
function setCheckBox() {
     if (this.value == '1st option') {
        $('#checkboxId').attr('disabled', disabled);
      } else {
         $('#checkboxId').removeAttr('disabled', disabled);
      }
}
$(function() {
    setCheckBox();//do this on load..
    $('#dropdownlistId').change(function() {
      setCheckBox();//and on change
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:35:04.800

```
$(function() {
    var $cb = $('#checkboxId');
    $('#dropdownlistId').change(function() {
        if (this.value == '1st option') {
          $cb.prop('disabled', true);
        } else {
          $cb.prop('disabled', false);
        }
    }).trigger('change');
}); 
```

添加 halnderl 后触发 change 事件的区别。About your second question - Using keyboard the 'change' event will be triggered when select will lose focus ('blur').

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:35:26.650

定义 CheckBox 控件时，使用 disabled 属性默认禁用它。这样它就已经被禁用了，并且不需要添加更多的javascript来从一开始就禁用它。

它看起来像这样：

```
@Html.CheckBoxFor(model => model.IsCheckBox, new { @disabled = "true" }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T18:08:26.130

您的代码似乎有点不正确，这取决于您的需要，因为您在更改该下拉列表时调用禁用函数，您需要像这样在 document.ready 中编写它

```
$(document).ready(function () {if(document.getElementById("dropdownlistId").value="1stoption")
{
document.getElementById('checkboxId').style.visibility = 'hidden';
}
else
{//do something whatever you wish here in else condition

}
} 
```

希望能帮助到你！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-08T14:48:04.803

```
$(function() {
    var $cb = $('#checkboxId');
    $('#dropdownlistId').change(function() {
        if (this.value == '1st option') {
          $cb.attr('disabled', disabled);
        } else {
          $cb.removeAttr('disabled', disabled);
        }
    }).trigger('change');
}); 
```

现在就像一个魅力，谢谢你们

# jquery - 使用 Jquery 1.8.0 return false 不会破坏 each() 循环

> ID：13727847
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:29:46.773
> 
> 标签：jquery, loops, break, each

这是我正在使用的脚本。

```
 $('.row').each(function(){
        $(this).each(function(){
            if($(this).find('.name').val()==""){

                $(this).find('.name').val(data.name);
                $(this).find('.autonomy').val(data.autonomy);
                $(this).find('.purpose').val(data.purpose);
                $(this).find('.flow').val(data.flow);
                $(this).find('.relatedness').val(data.relatedness);
                $(this).find('.challenge').val(data.challenge);
                $(this).find('.mastery').val(data.mastery);
                $(this).find('.colour').val(data.colour);
                done=true;
            }
            if(done==true){
                alert("here");
                return false;
            }
        });
    }); 
```

它似乎完全忽略了 return false ，我似乎无法弄清楚为什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:01:54.593

首先向我们展示你的 DOM。

您所拥有的回报只会停止第二个 each()。如果要停止第一个，则需要以其他方式进行。

抱歉，我无法发表评论，但我的声誉不允许。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:30:55.227

不需要嵌套`each`。删除内部的，并且`return false`将工作：

```
$(".row").each(function() {
    // ...
    if (done === true) {
        alert("here");
        return false;
    }
});​ 
```

# javascript - 在 salesforce 之外访问 ajax 工具包

> ID：13727858
> 
> 赞同：2
> 
> 时间：2012-12-05T16:30:03.027
> 
> 标签：javascript, html, ajax, salesforce

我的系统中有一个简单的 html 页面。我正在尝试使用 ajax 工具包访问我的组织详细信息。但我无法这样做。知道如何使用 javascript/jquery 在系统中的简单 html 页面中访问 salesforce 数据吗？

```
<html>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="connection.js"></script>
<script type="text/javascript" src="apex.js"></script>

<script type="text/javascript">
var j$ = jQuery.noConflict();
sforce.connection.init('sessionId', 'https://ap1.salesforce.com/services/Soap/u/26.0');
j$(document).ready(function(){
    var result = sforce.connection.query("Select Name, Id from User");
    var records = result.getArray("records");
    for (var i=0; i< records.length; i++) {
        var record = records[i];
        console.log(record.Name + " -- " + record.Id);
    }
});
</script>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T18:56:42.633

由于这不是一个具体的问题，我将尝试回答一般需要做什么。

1.  您需要在您的组织中启用对 Salesforce Rest API 的“远程访问”。
2.  获取 OAuth 2.0 访问令牌以访问 Rest API，然后使用 Rest API 访问它。

developer.force.com 网络中有大量资源。我过去使用的一些有用的链接，

1.  [http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_at_Salesforce.com](http://wiki.developerforce.com/page/Digging_Deeper_into_OAuth_2.0_at_Salesforce.com)
2.  [http://wiki.developerforce.com/page/Getting_Started_with_the_Force.com_REST_API](http://wiki.developerforce.com/page/Getting_Started_with_the_Force.com_REST_API)
3.  [http://www.salesforce.com/us/developer/docs/api_rest/index.htm](http://www.salesforce.com/us/developer/docs/api_rest/index.htm)

第二个链接包含一个完整的 Java 示例。这可以转换为JS。第三个链接提供了对其余 API 的完整参考。

# dns - JavaMail 由于从一台服务器仅获取主机名而不是 FQDN 无法传递邮件

> ID：13727860
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:30:06.947
> 
> 标签：dns, jakarta-mail, fqdn

JavaMail 无法传递邮件 - 对于 xyzcom，它使用 InetAddress.getLocalHost().getHostName() 仅返回 x（主机名）；

对于 Test server ，它使用 getHostName() 返回 FQDN，但对于 Prod Server ，仅返回主机名。

它似乎无法解析 Prod Server 中的 DNS 条目。

更改 /etc/hosts 中的配置 - 会破坏其他依赖于 mailx 程序的非 java 邮件。

这些是基于 Unix 的服务器。

测试服务器 - Java 版本 - 1.6.0.31 产品服务器 - Java 版本 - 1.6.0.25

这可能是由于版本不同，InetAddress 无法解析为 FQDN 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:50:36.453

更有可能是由于在两台机器上设置名称服务的方式不同。您可以设置系统属性 mail.smtp.localhost 作为解决方法。

# python - 关于python中数据类型的说明

> ID：13727862
> 
> 赞同：4
> 
> 时间：2012-12-05T16:30:11.247
> 
> 标签：python

很久以来，有一件事让我着迷。在像 c 这样的语言中，我们需要声明数据类型，例如，整数为 int，字符为 char 等。我的意思是我们正在向 C 编译器提供有关数据类型的信息。
但是在python中，假设我声明

```
c = 2 
```

然后编译器将 c 解释为整数。如果我声明

```
c = "a" 
```

编译器将 c 解释为一个字符。我的疑问是编译器如何知道如何在没有我们明确声明的情况下为 c 分配适当的数据类型。对于 python 专家来说，这可能是一个基本问题，但可以对此有所了解

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:32:29.957

Python 是一种[动态类型语言](http://en.wikipedia.org/wiki/Dynamic_programming_language)。

编译 python 代码时，编译器不会解释*任何类型信息。*这一切都只是带有方法的对象，您可以自己的代码随意使用这些值。

# javascript - 如何在formData中的javascript中参数值

> ID：13727867
> 
> 赞同：0
> 
> 时间：2012-12-05T16:30:14.730
> 
> 标签：javascript, jquery, ajax, form-data

我有这样的表单数据

```
var formData = new FormData($(this)[0]); 
```

（在提交功能内）

我想在这个 formData 中获取一个参数的值。例如在注册表单中，

```
formData.name 
```

它是未定义的。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:38:37.297

从表单元素获取 FormData 的正确方法是

```
var formData = this.getFormData(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:45:17.970

FormData 是准备请求的“单向”对象。您只能附加数据。如果要从表单中的特定字段获取数据，则需要像这样使用 val()：

```
$('input[name="your-field-name"]', this).val(); // where this is the context (your form) 
```

# php - 如何使用 PHP DomDocument 格式化 ap 标签内的文本

> ID：13727868
> 
> 赞同：1
> 
> 时间：2012-12-05T16:30:21.310
> 
> 标签：php, domdocument

我已经看到了很多问题，这些问题几乎是我想要做的，并导致我几乎能够得到它，但并不完全。

`<p>`我想在 div 中的标签内按如下方式格式化文本。

> 第**1**页，共 2页

所以在普通的 HTML 中，我在段落中使用了 b 标记，但似乎无法弄清楚如何使用 DomDocument 做到这一点。当我尝试创建这样的元素时

```
$pTag = $dom->createElement("p", "Page <b>1</b> of 2"); 
```

它只是在不识别的情况下输出**作为 HTML。所以我想了想并想出了**

 **```
$pTag->nodeValue .= 
```

作为附加新元素的一种方式，但这没有用。它没有给我任何错误，但也没有附加`<b>`标签。这似乎应该很简单，但似乎并非如此。

当我尝试`echo`时，它会将文本输出到屏幕顶部，而不是我想要的位置。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:45:27.000

像下面这样的东西应该可以工作：

```
$bTag = $dom->createElement("b", "1");
$pTag = $dom->createElement("p");
$pTag->appendChild($dom->createTextNode("Page"));
$pTag->appendChild($bTag);
$pTag->appendChild($dom->createTextNode(" of 2"));

```**

# regex - 拆分大写和数字

> ID：13727870
> 
> 赞同：2
> 
> 时间：2012-12-05T16:30:24.057
> 
> 标签：regex, perl

如何在大写字母和数字上拆分变量我的变量看起来像这样

```
$Var = "HvacSystem8000Series"; 
```

需要的结果是：

```
$Var = "Hvac System 8000 Series"; 
```

代码：

```
$Var =~ s/^[A-Z]/ /igs; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:39:49.183

评论中的解释：

```
$Var = "HvacSystem8000Series";
$Var =~ s/(?<=[[:lower:]])   # Low case before,
          (?=[[:upper:]0-9]) # upper case or digit after;
          |                  # OR
          (?<=[0-9])         # digit before,
          (?=[[:upper:]])    # upper case after?
          /\ /xg;            # Replace with a space. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T00:05:08.870

最简单的方法是收集您认为是*单词*的列表，然后用空格分隔符将它们重新连接在一起。

```
use strict;
use warnings;

my $var = "HvacSystem8000Series";
$var = join ' ', $var =~ /[A-Z]+[a-z]*|\d+/g;

print $var 
```

**输出**

```
Hvac System 8000 Series 
```

# silverlight - 检查像素是否在多边形内

> ID：13727871
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:30:25.353
> 
> 标签：silverlight

我想知道某些方法，以便在给定该多边形的 4 个坐标的情况下，我可以判断一个像素是否在 4 点多边形或四边形图形（不一定是矩形）内。

我尝试了几种方法，但没有一个效果很好。

感谢和问候乌代古普塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:38:01.323

一个简单的方法是使用区域：首先将多边形分解为两个三角形 ABC 和 CDA，并检查该点是否在任一三角形中。

为此，假设例如三角形 ABC 并且您要测试的点是 M，您可以测试三角形 ABC 的面积是否等于 ABM + BCM + CAM 的面积之和。使用叉积的范数的一半来计算三角形的面积。

另一种直接使用交叉产品的解决方案可以在这里找到：http: [//www.blackpawn.com/texts/pointinpoly/default.html](http://www.blackpawn.com/texts/pointinpoly/default.html)

# wcf - 如何在 IIS 中拦截 WCF 请求

> ID：13727873
> 
> 赞同：1
> 
> 时间：2012-12-05T16:30:42.090
> 
> 标签：wcf

调用本地 WCF 服务时，我收到“无法识别的消息版本”错误。此服务位于 F5 负载平衡器后面的 DMZ 中。F5 管理 SSL 证书，然后通过 HTTP（不是 HTTPS）将消息转发到服务器。部署在不通过 F5 路由的内部服务器上的相同服务工作正常。

我想一路检查消息的版本。服务器堆栈跟踪看起来好像 IIS 在 WCF 框架的内部传递给 .NET 代码，然后在将消息转发给我的代码之前爆炸了。

我一直在玩弄客户端的 Fiddler 和服务器上的 IIS 日志记录，但似乎找不到可以引导我到任何地方的消息详细信息。我还配置了服务跟踪日志（如下配置），但没有看到任何结果。任何其他工具建议、错误原因或我可能不理解工具向我展示的内容？

```
 <system.diagnostics>
    <sources>
      <source name="System.ServiceModel"
              switchValue="Information, ActivityTracing"
              propagateActivity="true">
        <listeners>
          <add name="traceListener"
              type="System.Diagnostics.XmlWriterTraceListener"
              initializeData= "c:\Temp\Traces.svclog" />
        </listeners>
      </source>
    </sources>
  </system.diagnostics> 
```

**更新 - 核心问题已解决** 我发现我遇到的具体问题是基于 F5 负载均衡器重定向回自身以及按预期重定向到服务器上。我认为了解更多有关如何跟踪请求状态的信息可能仍然有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:42:36.000

这里有几件事要检查：

1.  wcf 进程是否具有对 c:\temp 目录的写入权限？（ProcessMonitor 对于验证这类事情非常有用：[http ://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

2.  听起来这可能是一个序列化问题，也许尝试在 System.Runtime.Serialization 上添加一个侦听器，如下所述：http: [//msdn.microsoft.com/en-us/library/ms733025.aspx](http://msdn.microsoft.com/en-us/library/ms733025.aspx)

# iphone - 在不将其放在当前 UINavigationController 的堆栈上的情况下创建新视图的转场的正确方法是什么？

> ID：13727874
> 
> 赞同：1
> 
> 时间：2012-12-05T16:30:46.083
> 
> 标签：iphone, ios, xcode, uistoryboard

我正在尝试使用具有 4 个场景的故事板创建一个应用程序：

*   选择登录方式
*   输入登录数据
*   成功登录
*   主场景。

我现在正在做的事情如下：我有一个 UINavigationController，它以 ChooseLoginMethod 作为其根视图。ChooseLoginMethod 有几个按钮（用于不同的登录方法），它们是对 EnterLoginData 的推送。EnterLoginData 有一个到 SucessfullLogin 的推送序列，而 SucessfullLogin 有一个到 MainScene 的推送序列。

问题是 SuccessLogin 和 MainScene 在顶部栏显示后退按钮，这对应用程序没有意义。

我试过了：

*   隐藏这两个视图的顶部栏。不成功。
*   将 segue 更改为模态。似乎有效，但感觉不是正确的做法。

所以我想做的是创建一个 segue，它打破 UINavigationController 堆栈上的视图链。在情节提要中有正确的方法吗？

- 编辑 -

也许我应该做的是替换根视图（[为 UINavigationController 设置根视图](https://stackoverflow.com/questions/4204231/set-root-view-for-uinavigationcontroller)）。这可能有效，但似乎是一种编程解决方法，可以在情节提要中完成一些事情。或者也许只是我没有得到“iOS 做事的方式”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:51:09.940

您必须`setNavigationBarHidden`在视图控制器出现在屏幕上之前使用，例如在`viewWillAppear`.

但是你不能从“MainScene”返回到“RootController”。因此，您应该`popToRootViewController`在“SuccessfulLogin”之后执行类似操作，然后弹出“MainScene”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:13:39.530

我认为通常最好让您的主场景成为根视图控制器。通过它的 viewDidAppear 方法，您可以模态地呈现您的 ChooseLoginMethod 控制器，并从那里进行模态转换到您的其他登录控制器。当你走到最后，你想回到主场景时，只需从根视图控制器中关闭模式——这将关闭第一个，以及从中呈现的任何模式：

```
[self.view.window.rootViewController dismissViewControllerAnimated:YES completion:nil]; 
```

# drupal - 如何使用视图内容作为节点内容

> ID：13727875
> 
> 赞同：1
> 
> 时间：2012-12-05T16:30:48.500
> 
> 标签：drupal, drupal-7

我正在尝试在主页节点上显示视图。我创建了一个过滤 5 条第一条新闻的视图，它运行良好，但我希望它只显示在主页上。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:31:11.460

如果您的视图是页面视图（而不是块视图），那么您的主页可以从您网站的`Configuration > Site Information`（下`System`部分）设置`admin/config/system/site-information`。

将*默认首页*路径设置为您的视图路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T01:18:44.910

如果是块视图，您所要做的就是将块添加到主页模板上可用的区域。编辑块，滚动到底部选择显示的选项`Show only on the selected pages`，然后`<front>`在文本区域中输入。这将强制该块仅显示在主页上。

# java - 在 Groovy/Java 中比较两个 XML 字符串/文件

> ID：13727876
> 
> 赞同：9
> 
> 时间：2012-12-05T16:30:51.047
> 
> 标签：java, xml, groovy, compare

我正在编写用于检查一些 XML 构建器的单元测试。

现在我遇到了预期结果和实际结果之间的语法差异问题，尽管它们的语义相同。

**例子：**

***预期结果：***

```
<parent><child attr="test attribute">text here</child></parent> 
```

***实际结果：***

```
<parent>
  <child attr="test attribute">
    text here
  </child>
</parent> 
```

我尝试使用 XmlUtil.serialize() 规范化 xml，但这似乎保留了空格，留下了语法差异。

如何获得 xml 字符串的规范化/规范形式以使我的测试更加健壮？

我正在编写一个 Grails 应用程序，所以我可以使用 Groovy 或 Java 中的任何解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T19:14:26.923

您可以像这样使用 Groovy **XMLUnit**实用程序：

```
XMLUnit.setIgnoreWhitespace(true)
XMLUnit.setIgnoreComments(true)
XMLUnit.setIgnoreDiffBetweenTextAndCDATA(true)
XMLUnit.setNormalizeWhitespace(true)

XMLUnit.compareXML(expectedXml, actualXml) 
```

在忽略语法差异的情况下比较 XML 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-12T09:12:52.187

问题和接受的答案（截至今天）对应于[XMLUnit](http://www.xmlunit.org/)的旧版本。

对于那些有兴趣了解如何在 Groovy 上使用[XMLUnit](http://www.xmlunit.org/) v2 的人：

```
def "XMLs must be identical"() {
    setup:
    def control = '<foo><bar></bar></foo>'
    def test = '''
        <foo>
          <bar></bar>
        </foo>
    '''

    when:
    Diff d = DiffBuilder.compare(Input.fromString(control))
        .withTest(Input.fromString(test))
        .ignoreWhitespace()
        .ignoreComments()
        .normalizeWhitespace()
        .build()

    then:
    !d.hasDifferences()
} 
```

也许有一种“groovier”的做法，但我认为这可以用于说明目的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T12:17:01.560

较旧的问题，但可能对将来的使用很有趣。
另一种可能性，它不仅适用于 XML，也可用于解决您的问题。

对于这样的测试，您还可以使用 ApprovalTests ( [http://approvaltests.sourceforge.net](http://approvaltests.sourceforge.net) )，这会导致单元测试中的代码非常少。

使用 ApprovalTests，您可以编写测试并使用预期输出检查您的输出。

简短描述：在您的测试的第一次运行中，没有预期的输出，因此 ApprovalTests 编写了两个文件 - “received”（您的代码的输出）和“approved”（您的代码的预期输出）。在第一次运行时，“已批准”为空，因为您必须批准代码的输出。这是使用差异工具完成的。ApprovalTests 打开一个差异工具并显示其中的两个文件。如果您的代码输出符合您的预期，则将输出移至批准的文件中。现在所有后续测试运行都将通过，如果输出没有改变（收到 == 批准）。

# objective-c - 我应该对具有自定义 getter 和 setter 的属性使用强属性吗？

> ID：13727878
> 
> 赞同：0
> 
> 时间：2012-12-05T16:30:57.180
> 
> 标签：objective-c, properties

我将一些数据存储在`NSUserDefaults`钥匙串中，并且我有一个包装器。例如

```
- (NSString *)userPassword
{
    return [UICKeyChainStore stringForKey:KEY_USER_PASSWORD];
}

- (void)setUserPassword:(NSString *)userPassword
{
    [UICKeyChainStore setString:userPassword forKey:KEY_USER_PASSWORD];
} 
```

属性定义应该如何？现在我使用如下

```
@property (nonatomic, strong) NSString *userEmail; 
```

但是现在我怀疑是否应该在那里使用`strong`语句，因为我没有 ivar。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:36:49.823

强弱都可以。

它是您的自定义方法，这意味着您正在覆盖编译器的方法，或者编译器不会为这些属性创建方法。

编辑：

还有一件事给你:)

[将原子属性保存在钥匙串/用户默认值中是否有任何优势？](https://stackoverflow.com/questions/13728171/is-there-any-advantage-of-having-atomic-property-for-saving-in-keychains-userdef/13728267#13728267)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T10:15:42.087

您可以使用强属性。在这里，您正在实现自己的 setter 和 getter，这意味着您只是覆盖了编译器的方法，所以如果您想使用，您也可以使用它。

# android - 从 countDownTimer 启动 Activity 时遇到问题

> ID：13727883
> 
> 赞同：0
> 
> 时间：2012-12-05T16:31:06.147
> 
> 标签：android, broadcastreceiver, countdowntimer

我在广播接收器中有一个 CountDownTimer 应该启动一个活动。

但是经过几次尝试后，我无法启动 Activity...

这是我在阅读后最后一次尝试的代码片段，但 startActivityForResult 未被识别...

```
public class GSMCountDownTimer extends CountDownTimer  {  
        public GSMCountDownTimer(long millisInFuture, long countDownInterval)
        {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish(){        
           if (reseau   ==  false){
              Intent fIntent = new Intent();
              fIntent.setClassName("com.atelio.smart", "com.atelio.smart.AlerteGsm");
              startActivityForResult(fIntent,0);

           }
        }
        @Override
        public void onTick(long millis){     

        }                     
    } 
```

我需要主类成为广播接收器来收听电话状态......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:55:14.010

您不应在 broadCastReciever 中使用 CountDownTimer。

检查接收[器生命周期文档](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。任何异步操作都不能在广播接收器中完成。一旦代码从 onRecieve 返回，Reciever 对象就不再处于活动状态。

因此，请改用 AlarmManager。

```
AlarmManager alarmMgr = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);

Intent fIntent = new Intent();
fIntent.setClassName("com.atelio.smart", "com.atelio.smart.AlerteGsm");

PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, fIntent, 0);

Calendar time = Calendar.getInstance();
time.setTimeInMillis(System.currentTimeMillis());
time.add(Calendar.SECOND, millisInFuture);

alarmMgr.set(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(), pendingIntent); 
```

# java - 为什么 Netbeans 7 建议对所有 Java EE 6 项目使用 Source Level 6？

> ID：13727885
> 
> 赞同：3
> 
> 时间：2012-12-05T16:31:13.447
> 
> 标签：java, jakarta-ee, netbeans

当我在 Netbeans 7.2.1 中创建一个新的企业应用程序项目时，IDE 提出了一个建议：“Java EE 6 项目中应该使用 Source Level 6”。

看看这个截图：

[Netbeans IDE 7.2.1 的屏幕截图 http://www.tinyuploads.com/images/Qs9Doh.png](http://www.tinyuploads.com/images/Qs9Doh.png)

为什么推荐这种做法？有什么理由不听从建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:03:22.577

如果您想生产可移植的应用程序，Java SE 6 是定义 Java EE 6 的基础。

来自[JSR 316：JavaTM 平台，企业版 6 (Java EE 6) 规范](http://jcp.org/en/jsr/detail?id=316)：

> EE.2.4.1 容器要求
> 
> 该规范要求容器提供 Java 兼容™ 运行时环境，如 Java 平台标准版 v6 规范 (Java SE) 所定义。

但是，如果您有一个基于更新版本的 Java 构建的特定于供应商的目标 Java EE 6 平台，您应该经常使用其 JDK 作为目标。

在可移植性和能够在企业开发中利用容器特定的特性之间需要权衡取舍。NetBean 的保守建议对于那些没有足够知识做出自己决定的人来说是正确的选择。

# php - 条件为空的子句在表单类型生成器中不起作用

> ID：13727888
> 
> 赞同：2
> 
> 时间：2012-12-05T16:31:34.447
> 
> 标签：php, symfony-2.1

```
namespace Quindimotos\ProyectoBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Doctrine\ORM\EntityRepository;

class asignarEmpleadoAServicioType extends AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('ciudad', 'entity', array(
            'empty_value' => 'Seleccione Empleado',
            'class' => 'QuindimotosProyectoBundle:empleado',
            'property_path' => false,
            'query_builder' => function (EntityRepository $er) {
                return $er->createQueryBuilder('e')
                                ->join('e.cargo', 'c')
                                ->from('QuindimotosProyectoBundle:Revision', 'r')
                                ->join('r.empleado', 'e1')
                                ->where('c.nombre =:cargo and r.empleado is not null')
                                ->setParameter('cargo', 'tecnico');
            }
        ))
        ->add('Revision', 'entity', array(
            'empty_value' => 'Seleccione Revision Disponible',
            'class' => 'QuindimotosProyectoBundle:revision',
            'property_path' => false,
            'query_builder' => function (EntityRepository $er) {
                return $er->createQueryBuilder('r')

                                ->where('r.recividopor is  null');

            }));

    }
    public function getName() {
        return 'contact';
    }
} 
```

在下一行我不知道为什么它不起作用

```
->where('c.nombre =:cargo and r.empleado is null') 
```

where 可以但条件“为空”的子句没有显示任何内容，但我知道有一些东西要显示。

在这一行中，这个子句 where is ok and "is null" 运行良好

```
->where('r.recividopor is  null'); 
```

有人可以告诉我这是怎么回事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:00:45.903

当使用常规运算符将值与“null”值进行比较时，将导致结果集为空，因为比较不会产生布尔值（而是返回 NULL）

您必须避免比较，一种方法是：`SELECT IFNULL(e.cargo,0) AS e.cargo`然后您可以在 where 子句中使用它`c.nomber = e.cargo`。

# html - Twitter 网络应用程序是如何实现如此原生的感觉的？

> ID：13727889
> 
> 赞同：1
> 
> 时间：2012-12-05T16:31:44.103
> 
> 标签：html, web

如果你们中的任何一个人可以在 iPhone 上打开 twitter.com 网络应用程序，您会注意到地址栏是如何消失并被 Twitter 标题栏取代的。您可以弹性滚动内容，但 Twitter 标题栏保持原位，就像使用原生应用程序一样。这些人是怎么做到的？

更新：看起来他们改变了他们的网络应用程序。以前，它有点像煎茶。我正在尝试在不使用完整库的情况下创建效果。看看这个：

[http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html](http://cdn.sencha.io/touch/sencha-touch-2.1.0/examples/kitchensink/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:40:02.640

他们没有永久隐藏地址栏。他们正在使用 Mobile Safari 的向下滚动行为导致地址栏随页面滚动。他们所做的是向下滚动页面，可能使用[`window.scrollBy`](https://developer.mozilla.org/en-US/docs/DOM/window.scrollBy)地址栏“消失”（就像在任何其他页面上一样）。如果您摆弄页面，您可以再次滚动到顶部。

![在此处输入图像描述](../Images/b8c3fbff304bcc07b76f36d854f7fa44.png)

# pdf - PDF4Net 创建的 PDF 缺少字段

> ID：13727890
> 
> 赞同：1
> 
> 时间：2012-12-05T16:31:49.250
> 
> 标签：pdf

有人对此有任何想法吗？我通过在 PDF4NET 中添加 PDFPushButtonField 修改了一个 pdf 文件。我可以在 Windows 7 系统的 Safari 或 Chrome 中看到它。但是当我在 IPAD Safari 浏览器中打开它时，我添加的按钮不见了。

# java - 冒号分隔值的正则表达式是什么？

> ID：13727892
> 
> 赞同：0
> 
> 时间：2012-12-05T16:31:53.560
> 
> 标签：java, regex, colon

如果我有一个字符串，例如：

```
blah blah item: value blah blah 
```

获得价值的表达方式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:33:22.980

你可以用这个`regex`

`:\s*(\w+)`

`$1`或组 1 具有所需的值

* * *

`\s*`匹配 0 到多个空格

`\w+`匹配 1 到多个可以是任何 1 的字符`[a-zA-Z\d_]`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T16:34:56.377

正则表达式将是

```
: 
```

如中，

```
String value = yourString.split(":")[1].split(" ")[0] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T16:37:00.820

对于您的确切字符串，使用**`**String.split()**`**

```
String s="blah blah item: value blah blah";
System.out.println(s.split("(:\\s+)")[1].split("\\s")[0]);

Output: value 
```

# python - 如何与索引相乘？

> ID：13727894
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:32:14.540
> 
> 标签：python

我需要将一个数字转换为以 10 为底。我的输入来自这种形式：1111（数字）5（在哪个底上）10（到底）。我写了这段代码：

```
s=input()
(number, from_base, to_base) = s.split()
NumList=[number]
NumList.reverse()

i=0
sum=0

while (i< (index.from_base)):

  (i,pow(from_base,i),i+1) 
  sum=sum+i

print (sum) 
```

我想做：number^from_base 索引。我也尝试过 i**from_base\i^^from_base。我也尝试添加命令 NumList.index() 但它没有用。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:59:28.397

评论者已经解决了您试图解决的更深层次的问题。

但是，您所问的肤浅问题可以通过使用 Python 的枚举来最好地解决：向它提供一系列值，它会返回一系列 (index, value) 对。

[http://docs.python.org/2/library/functions.html#enumerate](http://docs.python.org/2/library/functions.html#enumerate)

# android - Android OpenCV Highgui.imread 错误的颜色

> ID：13727899
> 
> 赞同：0
> 
> 时间：2012-12-05T16:32:32.277
> 
> 标签：android, opencv

我有从 sdcard 加载图像并将其发布到 ImageView 的代码。

```
Mat mRgba = Highgui.imread(dir);
Bitmap bmp = Bitmap.createBitmap(mRgba.cols(), mRgba.rows(),Bitmap.Config.ARGB_8888);
Utils.matToBitmap(mRgba, bmp);
mImage.setImageBitmap(bmp, true, null, 5.0f); 
```

图像已加载，但颜色错误。颜色似乎是倒置的（但不是倒置的）。这是[图像比较](http://ns0.upanh.com/b3.s32.d1/88405aa84dad1f9da7034e9dfbb03921_51486410.ml0001.jpg)

我试图通过

```
Bitmap bmp = BitmapFactory.decodeFile(dir); 
```

它工作正常。但我必须使用`Highgui.imread`.

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-05T15:35:29.617

你将不得不使用这样的东西：

```
 Mat inputImage = Highgui.imread(pathToFile);
    Mat tmp = new Mat();

    Imgproc.cvtColor(inputImage, tmp, Imgproc.COLOR_BGR2RGB);

    Bitmap imageToShow = Bitmap.createBitmap(tmp.cols(), tmp.rows(), Bitmap.Config.ARGB_8888);
    Utils.matToBitmap(tmp, imageToShow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:10:00.030

另请注意，ARGB 不是 RGBA。您可能需要重新排列每个像素的字节。就像是

```
int pixel = get_the_pixel();
int alpha = 0xff & pixel;
pixel = pixel<<8 | alpha;
set_the_pixel(pixel); 
```

你会想要做一些比这里显示的访问器方法更有效的事情，但你明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:59:25.390

您正在尝试加载位图，假设图像是 8 位/彩色 RGBA：您确定吗？

# php - 以与另一个数组相同的顺序对数组进行排序

> ID：13727903
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:32:46.197
> 
> 标签：php, arrays, sorting, multidimensional-array

我有两个看起来像这样的数组：

**数组 1，$ids：**

```
$ids = array('8', '56', '33', '23', ... and so on); 
```

**数组 2（多维以及关联），$positions：**

```
$positions[0] = array('id' => '56',
                 'latitude' => '45.34234',
                 'longitude' => '34.23942');

$positions[1] = array('id' => '8',
                 'latitude' => '49.34834',
                 'longitude' => '34.93942');

... and so on. 
```

两个数组都包含 id，但 id 在不同数组中的顺序不同。我想要的是 id（及其纬度和经度）在 $positions 中的顺序与它们在 $ids 中的顺序相同。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:49:17.417

试试这个代码，

```
$new_positions = array();
foreach($ids as $k=>$v){
  foreach($positions as $k1=>$v1){
    if($v == $v1['id']){
       array_push($new_positions, $v1);
       continue;
    }
  }
}

$positions = $new_positions;
print_r($positions); 
```

检查这里，[http://codepad.org/phWxOEC1](http://codepad.org/phWxOEC1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:45:24.697

**Upd：**我想我误解了。排序更容易`$positions`。`$ids`

```
usort($positions, "cmp");
function cmp($a, $b)
{
    global $ids;
    $a_id = array_search($a['id'], $ids);
    $b_id = array_search($b['id'], $ids);
    if ($a_id == $b_id) {
        return 0;
    }
    return ($a_id < $b_id) ? -1 : 1;
} 
```

**旧版本**`$ids`， 如果您需要排序`$positions`

首先，您需要记住`id`字段的排序，因为您无法在像您这样的关联数组中有效地搜索。

```
$sort = array();
$positionsCount = count($positions);
for ($i = 0; $i < $positionsCount; $i++)
{
    $sort[ $positions[$i]['id'] ] = $i;
} 
```

然后你可以使用搜索`usort();`。

```
usort($ids, "cmp");
function cmp($a, $b)
{
    global $sort;
    if ($sort[$a] == $sort[$b]) {
        return 0;
    }
    return ($sort[$a] < $sort[$b]) ? -1 : 1;
} 
```

这段代码可能需要测试，但我希望你能大致了解。如果它反向排序，请将 更改`-1 : 1`为`1 : -1`。

# c# - 如何将 C# 应用程序从一台计算机安装到另一台计算机

> ID：13727910
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:33:22.150
> 
> 标签：c#, usb-flash-drive

我的情况是我有两台计算机 A 和 B。计算机 A 上安装了 C# windows 窗体应用程序。假装我没有要发布到 B 的源代码，是否可以将应用程序从 A 移动到 B？如果是这样，我需要什么文件才能复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:37:09.683

您必须检查 C# 应用程序是否需要在本地 appdata 目录中找到的文件，如果需要，则需要复制它们。

当应用程序需要某个 DLL 时可能会很困难，那么您需要找到应用程序的依赖项并将它们安装在计算机 B 上。

完成后，您可以复制程序目录中的所有文件，您可能会很高兴。

最好的办法是确保您有方便的安装程序:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:36:51.477

在不知道应用程序的情况下无法回答。

有时只需复制文件就足够了。但是，如果应用程序依赖于注册表项、数据库或其他一些先决条件，则复制文件是不够的。

# makefile - Makefile 错误 - make: *** No rule to make target `boot.o', `all' 需要。停止

> ID：13727912
> 
> 赞同：1
> 
> 时间：2012-12-05T16:33:26.180
> 
> 标签：makefile, kernel, yasm

我正在完成一个类似unix的内核开发教程，并且遇到了一个我敢肯定的菜鸟问题：谁能告诉我这有什么问题？

```
SOURCES=boot.o main.o

CFLAGS=-nostdlib -nostdinc -fno-builtin -fno-stack-protector
LDFLAGS=-Tlink.ld
ASFLAGS=-felf

all: $(SOURCES) link 

clean:
    -rm *.o kernel

link:
    ld $(LDFLAGS) -o kernel $(SOURCES)

.s.o:
    yasm $(ASFLAGS) $ 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:40:25.267

假设`boot.o`并 `main.o`使用`yasm`您的 makefile 构建缺少规则`.o`

```
.o:
    yasm $(ASFLAGS) $ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:47:30.980

您正在使用[老式的后缀规则](http://www.gnu.org/software/make/manual/make.html#Suffix-Rules)，并且缺少一些设置（加上最后一行中的错误）。

改用普通模式规则，尝试修复旧样式规则没有意义：

```
%.o: %.s
    yasm $(ASFLAGS) $< 
```

# java - 在转发的 JSP 中显示图像和数据

> ID：13727913
> 
> 赞同：-2
> 
> 时间：2012-12-05T16:33:27.627
> 
> 标签：java, jsp, servlets

我必须在转发的 JSP 中显示一些数据和图像

为了显示数据，我在属性部分设置了值

```
request.setAttribute("data", mydata); 
```

我在流（InputStream）中有图像，我也可以将其保存为文件，但想知道是否有更好的方法将其直接流式传输到 JSP 页面。

如果我使用 servlet 临时目录“javax.servlet.context.tempdir”保存它，那么我也无法通过它访问它

```
<img src="location of the file set in attribute section"/> 
```

其他人尝试过的任何首选方式？

使用 Tomcat 7.0.33/Java 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:37:39.787

HTTP 本身并不能真正让您流式传输图像，但您可以通过将数据从您的`InputStream`到`HttpServletResponse.getOutputStream()`.

你可以有一个映射到图像文件的servlet，比如......

```
<servlet>
    <servlet-name>ImgServlet</servlet-name>
    <servlet-class>ImgServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ImgServlet</servlet-name>
    <url-pattern>*.jpg</url-pattern>
</servlet-mapping> 
```

然后 servlet 类本身可以处理图像数据流，而无需将其保存到文件中。就像是...

```
class ImgServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String imageName = request.getRequestURI();
        InputStream data = service.lookUpImage(imageName); //whatever
        IOUtils.copy(data, response.getOutputStream()); // Apache Commons IO
        response.setContentType("image/jpeg");
    }
} 
```

然后页面中可能只有常规图像标签。

# linux - 在所有子目录上使用 wc 来计算行数

> ID：13727917
> 
> 赞同：56
> 
> 时间：2012-12-05T16:33:36.477
> 
> 标签：linux, bash, text-files, console-application

如何计算所有子目录中所有文件的所有行`wc`？

```
cd mydir
wc -l *
..
11723 total 
```

`man wc`建议`wc -l --files0-from=-`，但我不知道如何生成所有文件的列表`NUL-terminated names`

```
find . -print | wc -l --files0-from=- 
```

不工作。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-12-05T16:44:22.543

你可能想要这个：

```
find . -type f -print0 | wc -l --files0-from=- 
```

如果你只想要总行数，你可以使用

```
find . -type f -exec cat {} + | wc -l 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-05T16:44:16.127

也许您正在寻找`exec`.`find`

```
find . -type f -exec wc -l {} \; | awk '{total += $1} END {print total}' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-09-30T10:00:59.297

要计算您可以使用的特定文件扩展名的所有行，

```
find . -name '*.fileextension' | xargs wc -l 
```

如果你想在两种或更多不同类型的文件上使用它，你可以放 -o 选项

```
find . -name '*.fileextension1' -o -name '*.fileextension2' | xargs wc -l 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-30T13:33:29.487

另一种选择是使用递归 grep：

```
grep -hRc '' . | awk '{k+=$1}END{print k}' 
```

awk 只是简单地将数字相加。使用的`grep`选项是：

```
 -c, --count
          Suppress normal output; instead print a count of matching  lines
          for  each  input  file.  With the -v, --invert-match option (see
          below), count non-matching lines.  (-c is specified by POSIX.)
   -h, --no-filename
          Suppress the prefixing of file names on  output.   This  is  the
          default  when there is only one file (or only standard input) to
          search.
   -R, --dereference-recursive
          Read all files under each directory,  recursively.   Follow  all
          symbolic links, unlike -r. 
```

因此`grep`， 计算匹配任何内容 ('') 的行数，因此基本上只计算行数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-05T16:41:43.507

我会建议像

```
find ./ -type f | xargs wc -l | cut -c 1-8 | awk '{total += $1} END {print total}' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-01T10:19:35.483

基于ДМИТРИЙ МАЛИКОВ的回答：

使用格式计算 Java 代码行数的示例：

**一个班轮**

```
find . -name *.java -exec wc -l {} \; | awk '{printf ("%3d: %6d %s\n",NR,$1,$2); total += $1} END {printf ("     %6d\n",total)}' 
```

**awk 部分：**

```
{ 
  printf ("%3d: %6d %s\n",NR,$1,$2); 
  total += $1
} 
END {
  printf ("     %6d\n",total)
} 
```

**示例结果**

```
 1:    120 ./opencv/NativeLibrary.java
  2:     65 ./opencv/OsCheck.java
  3:      5 ./opencv/package-info.java
        190 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-10-15T16:37:56.600

在这里玩游戏有点晚了，但这不也行吗？`find . -type f | wc -l`

这会计算“find”命令输出的所有行。您可以微调“查找”以显示您想要的任何内容。我正在使用它来计算子目录的数量，在一个特定的子目录中，在 deep tree: `find ./*/*/*/*/*/*/TOC -type d | wc -l`中。输出：`76435`。（只是在没有所有中间星号的情况下进行查找会产生错误。）

# r - 将行数据转换为二进制列

> ID：13727918
> 
> 赞同：7
> 
> 时间：2012-12-05T16:33:35.777
> 
> 标签：r

我正在尝试将一列数据格式化为许多二进制列，最终用于关联规则挖掘。我使用 for 循环和一个简单的三元组矩阵取得了一些成功，但我不确定如何按之后第一列中的级别进行聚合——类似于 SQL 中的**group by**语句。我在下面提供了一个示例，尽管数据集要小得多——如果成功，我的实际数据集将是 4,200 行 x 3,902 列，因此任何解决方案都需要可扩展。任何建议或替代方法将不胜感激！

```
> data <- data.frame(a=c('sally','george','andy','sue','sue','sally','george'), b=c('green','yellow','green','yellow','purple','brown','purple'))
> data
       a      b
1  sally  green
2 george yellow
3   andy  green
4    sue yellow
5    sue purple
6  sally  brown
7 george purple

x <- data[,1]
for(i in as.numeric(2:ncol(data))) 
 x <- cbind(x, simple_triplet_matrix(i=1:nrow(data), j=as.numeric(data[,i]),
              v = rep(1,nrow(data)), dimnames = list(NULL, levels(data[,i]))) )

##Looks like this:

> as.matrix(x)

     name    brown green purple yellow
[1,] "sally"  "0"    "1"   "0"     "0"    
[2,] "george" "0"    "0"   "0"     "1"   
[3,] "andy"   "0"    "1"   "0"     "0"    
[4,] "sue"    "0"    "0"   "0"     "1"   
[5,] "sue"    "0"    "0"   "1"     "0"    
[6,] "sally"  "1"    "0"   "0"     "0" ##Need to aggregate by Name

##Would like it to look like this:
     name    brown green purple yellow
[1,] "sally"  "1"   "1"   "0"    "0"    
[2,] "george" "0"   "0"   "0"    "1"   
[3,] "andy"   "0"   "1"   "0"    "0"    
[4,] "sue"    "0"   "0"   "1"    "1" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T16:50:44.357

这应该可以解决问题：

```
## Get a contingency table of counts
X <- with(data, table(a,b))

## Massage it into the format you're wanting 
cbind(name = rownames(X), apply(X, 2, as.character))
#      name     brown green purple yellow
# [1,] "andy"   "0"   "1"   "0"    "0"   
# [2,] "george" "0"   "0"   "1"    "1"   
# [3,] "sally"  "1"   "1"   "0"    "0"   
# [4,] "sue"    "0"   "0"   "1"    "1" 
```

# javascript - 尝试将文本框与数组元素进行比较

> ID：13727919
> 
> 赞同：0
> 
> 时间：2012-12-05T16:33:41.403
> 
> 标签：javascript, arrays

我正在尝试将用户在文本框中输入的文本与数组中的元素进行比较，但遇到了困难。

```
function checkAns()
{
var str = imageArray[randNum];
var n = str.indexOf(document.getElementById('textBox').value);
if(n == -1)
{
    alert("Wrong Answer")
}
else
{
    alert("Right Answer")
}
} 
```

用户输入应该匹配数组元素中指定字符串的一部分并返回正确答案，或者根本不匹配并返回错误答案。

```
<input type=”text” id=”textBox” value=””&gt;
<input type=”button” value=”Check” onclick=”checkAns()”&gt; 
```

如果有用，我为我的文本框和按钮添加了代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:36:59.027

请检查您究竟需要得到什么。这个：

```
if (document.getElementById('textBox').value === str) {
    // text from array element is the same as in value
} else {
    // ... differs from value
} 
```

或这个：

```
if (str.indexOf(document.getElementById('textBox').value) > -1) {
    // text from value exists in array element
} else {
    // ... does not exist
} 
```

或者也许是这样：

```
if (document.getElementById('textBox').value.indexOf(str) > -1) {
    // text from array element exists in value
} else {
    // ... does not exist
} 
```

# string - 将字符串与带有累加器的 shell 脚本连接起来

> ID：13727920
> 
> 赞同：0
> 
> 时间：2012-12-05T16:33:45.077
> 
> 标签：string, shell, accumulator

我想将一个用 '\n' 分隔的列表转换为另一个用空格分隔的列表。例如：获取像 ispell 英语词典这样的词典。[http://downloads.sourceforge.net/wordlist/ispell-enwl-3.1.20.zip](http://downloads.sourceforge.net/wordlist/ispell-enwl-3.1.20.zip)

我最初的想法是使用变量作为累加器：

```
a=""; cat american.0 | while read line; do a="$a $line"; done; echo $a 
```

...但它会产生 '\n' 字符串！！！

问题：

1.  为什么它不起作用？
2.  这样做的正确方法是什么？

    谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:38:07.293

问题是当你有一个管道时：

```
command_1 | command_2 
```

每个命令都在单独的子 shell 中运行，并带有父环境的单独副本。因此，该命令创建的任何变量，或它对现有变量所做的任何修改，都不会被包含的 shell 感知。

在您的情况下，您实际上并不需要管道，因为：

```
cat filename | command 
```

在你需要的每一种方式上，都等同于：

```
command < filename 
```

所以你可以写：

```
a=""; while read line; do a="$a $line"; done < american.0; echo $a 
```

以避免创建任何子shell。

也就是说，根据[这个 StackOverflow 答案](https://stackoverflow.com/a/2451302/978917)，您不能真正依赖能够保存超过 1-4KB 数据的 shell 变量，因此您可能需要重新考虑您的整体方法。将整个单词列表存储在 shell 变量中可能不起作用，即使这样做，也可能无法正常*工作*。

* * *

**编辑添加：**要创建一个名为`/tmp/american.tmp`包含变量的临时文件`$a`，您可以编写：

```
while IFS= read -r line; do
  printf %s " $line"
done < american.0 > /tmp/american.tmp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:59:05.263

如果你想用空格替换'\n'，你可以简单地使用`tr`如下：

```
a=$(tr '\n' ' ' < american.0) 
```

# web-applications - Web 应用程序上的 CPU 峰值

> ID：13727924
> 
> 赞同：0
> 
> 时间：2012-12-05T16:34:02.683
> 
> 标签：web-applications, cpu-usage

导航到我的 Web 应用程序时，用户的 CPU 正在运行到 50% 的 CPU。

我非常相信这个问题对用户来说是特别的。

除了在该用户的浏览器上运行分析器、检查样式和 JavaScript 函数的 CPU 使用率之外，您还会采取哪些步骤来评估这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:16:43.393

在用户的浏览器中运行分析器应该可以了解正在发生的事情。

但是，在进行分析之前，我建议尝试一些更简单的方法来确认问题出在用户的环境中。

有几个简单的测试可以帮助确定问题。

一种是让其他配备类似机器的人使用相同版本的浏览器做同样的事情。

另一种是尝试在同一台机器上使用不同的浏览器，看看是否观察到相同的行为。

如果不同系统上的 cpu 使用率相似，则可能是应用程序问题。如果同一台机器上的两个不同浏览器的行为非常不同，那么您可能遇到了浏览器异常。

# jquery - 如何设置 simplesli.de？

> ID：13727927
> 
> 赞同：0
> 
> 时间：2012-12-05T16:34:13.133
> 
> 标签：jquery, slideshow

我对 jQuery 完全陌生，迫切需要帮助设置一个简单的文本幻灯片。

我喜欢[simplesli.de](http://www.simplesli.de/)的外观，但不知道如何让它工作。没有关于在 HTML 中放置什么以及放置在哪里的说明！是的，网站上有不同类型幻灯片的代码片段，但是当我将文本演示文稿的代码复制并粘贴到我的页面中时，我得到的只是静态内容。

我已经下载了 js 文件并将其放入 js 文件夹并从我的页面链接到该文件夹​​ - 仍然没有任何效果。我真的不明白在这里做什么。我如何让它工作？我该如何设计它？我错过了什么？

----编辑---好的，这是我的 HTML 文件中的代码：

在`<head></head>`我有以下内容：

`<script type="text/javascript" src="../_js/jquery.simpleSlide.js"></script>`

我下载了 jquery.simpleSlide.js 文件并将其放入我父亲根目录中的 _js 文件夹中。我正在处理的页面位于站点的子目录中，因此链接中的“../”。

然后，我为站点中的一个滑块获取了示例代码，并将其放置在我希望它出现的 HTML 中。现在是：

```
<div>
    <div class="simpleSlide-window" rel="1">
     <div class="simpleSlide-tray" rel="1">
       <div class="simpleSlide-slide" rel="1" alt="1"> content for slide one </div>
       <div class="simpleSlide-slide" rel="1" alt="2"> content for slide two </div>
       <div class="simpleSlide-slide" rel="1" alt="3"> content for slide three </div>
     </div>
   </div>
</div> 
```

我对此进行了测试，我在页面上得到了三行静态文本。根本没有任何工作。我没有任何类型的幻灯片，没有按钮，没有交互性——只有静态无聊的旧内容。我究竟做错了什么？据我所知，我已经完成了网站指示我做的事情。

我试过把这个加到我的头上......

```
<script type="text/javascript">  
simpleSlide({
    'status_width': 20,             // Integer. Sets the width of the status slideshow's window element.
    'status_color_inside': '#000',  // String. Sets color of status window element.
    'status_color_outside': '#FFF', // String. Sets color of status tray element.
    'set_speed': 500,               // Integer. Sets speed of all animations. Represented in milliseconds.
    'fullscreen' : 'false',         // String. 'true' sets slide window for full screen. For obvious reasons, cannot work with more than one simpleSlide window per page.
    'swipe' : 'false',              // String. 'true' turns on swipe functionality for touch devices.
    'callback': 'function()'        // String. Sets callback to actuate after simpleSlide initial config.
}); 
```

但这也没有什么区别。

我真的可以在这里得到一些帮助，因为我完全感到困惑。如果该站点确实发布了有关如何实施此操作的明确说明，我就不会在这里寻求帮助。

----另一个编辑--- CSS在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:58:53.860

麻烦的是，您在 DOM 元素存在之前运行设置代码。您可能只需要延迟 JS 代码，直到 DOM 准备好：

```
$(function() {
    simpleSlide();
}); 
```

另外，请确保您正在加载 jQuery 库；我在您的样本中没有看到任何地方。

**更新**

工作示例[在这里](http://jsfiddle.net/4zrJE/3/)。

# html - 使用 globalCompositeOperation“destination-out”后，如何获得轮廓以包围新形状？

> ID：13727928
> 
> 赞同：2
> 
> 时间：2012-12-05T16:34:19.740
> 
> 标签：html, canvas, globalcompositeoperation

我有一个带有蓝色轮廓的圆弧，然后是一个使用全局复合运算符“destination-out”覆盖部分圆弧的圆，导致部分圆弧被取消/切断，但新形状的一部分没有轮廓，有什么简单的方法可以重新建立形状的轮廓？

工作示例可以在这里找到：http: [//jsfiddle.net/NY2up/](http://jsfiddle.net/NY2up/)

![弧](../Images/436de544713e7346aefc15206ded6f9a.png)

```
var ctx = document.getElementById("display").getContext('2d');

ctx.beginPath();
ctx.arc(100, 100, 50, 0.0, 1.5, false);
ctx.lineTo(100, 100);
ctx.closePath();
ctx.fillStyle = 'red'
ctx.fill();
ctx.strokeStyle = 'blue';
ctx.lineWidth = 5;
ctx.stroke();

ctx.globalCompositeOperation = "destination-out";
ctx.beginPath();
ctx.arc(100, 100, 20, 0, Math.PI*2, true);
ctx.fill();
ctx.closePath(); 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T21:18:47.150

**[现场演示](http://jsfiddle.net/NY2up/16/)**

我所做的是将`globalComposition`背部重置为`source-over`并在该点上划一个部分弧线以产生效果。

```
ctx.beginPath();
ctx.arc(100, 100, 50, 0.0, 1.5, false);
ctx.lineTo(100, 100);
ctx.closePath();
ctx.fillStyle = 'red'
ctx.fill();
ctx.strokeStyle = 'blue';
ctx.lineWidth = 5;
ctx.stroke();

ctx.globalCompositeOperation = "destination-out";
ctx.beginPath();
ctx.arc(100, 100, 20, 0, Math.PI*2, true);
ctx.fill();
ctx.closePath();

// reset the global comp and draw a partial arc with the proper radians.
ctx.globalCompositeOperation = "source-over";
ctx.beginPath();
ctx.arc(100, 100, 20, 1.61,-0.11, true);
ctx.stroke();
ctx.closePath();
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:19:52.047

我认为您可以在画布上绘制第三条弧线

# c# - VS2010每次编译项目都会生成不同的程序集

> ID：13727931
> 
> 赞同：1
> 
> 时间：2012-12-05T16:34:32.400
> 
> 标签：c#, visual-studio-2010, silverlight

我有一些 c# 项目。我将构建后事件添加到那些将生成的程序集（dll）从 bin 复制到公共文件夹的项目中。

即使我不修改项目文件，似乎每次编译都会生成与以前不同的二进制程序集。

这对我来说是一个相当大的问题，因为我正在使用 Kiln 来监视这些文件并认为它们已被修改。

我在某处读到 dll 存储编译的时间戳，如果是真的，那么我无法解决这个问题。如果是这样，您如何管理您的共享 DLL，以使您的存储库 (Git/HG) 不会提交所有未修改的已编译项目？

谢谢，伊兰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:50:06.923

为了解决“您如何管理共享 DLL 以使您的存储库 (Git/HG) 不会提交所有未修改的已编译项目？”的具体问题，我有一个非常简单的答案： **忽略**.

我们从源代码控制甚至尝试提交的目录中排除`/bin`和排除。`/obj`这确实意味着每次更改后您都需要在每台机器上重新编译代码，但 Visual Studio 无论如何都会对代码已更改的任何项目执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:52:39.443

不要提交项目的输出文件夹。
如果您希望有一个 Setup 文件夹或类似的东西，它始终包含项目创建的最新版本的程序集，解决方案是确保您的构建后事件配置为仅在构建更新项目输出时运行。有一个这样命名的选项：

![在此处输入图像描述](../Images/737c7c7378b962d84fe94b3f05537a31.png)

# iphone - CorePlot：日期的自动标记策略

> ID：13727939
> 
> 赞同：3
> 
> 时间：2012-12-05T16:34:49.083
> 
> 标签：iphone, core-plot

我正在为 iPhone 应用程序使用 CorePlot。我的 x 轴由日期组成。我这样设置我的 refDate：

```
NSDateComponents *dateComponents = [[NSDateComponents alloc]init];
[dateComponents setHour:12];
[dateComponents setMinute:0];
[dateComponents setSecond:0];
NSCalendar *gregorian = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
NSDate *refDate = [gregorian dateFromComponents:dateComponents];

NSDateFormatter *dateFormater = [[NSDateFormatter alloc]init];
[dateFormater setDateFormat:@"HH:mm"];
CPTTimeFormatter *timeFormater = [[CPTTimeFormatter alloc]initWithDateFormatter:dateFormater];
timeFormater.referenceDate = refDate; 
```

我像这样设置x轴：

```
CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;    
CPTXYAxis *x = axisSet.xAxis;
x.majorGridLineStyle = majorXGridLineStyle;
x.majorIntervalLength = CPTDecimalFromFloat(oneHour * 4);
x.minorTicksPerInterval = 3;
x.labelFormatter = timeFormater; 
```

当我不使用自动标签策略时，图表如下所示： ![在此处输入图像描述](../Images/2fcc4250e5204d186cbb39d4902b161a.png)

这很好，但是当我放大时，我很想拥有自动标签功能。所以当我启用它时：

```
x.labelingPolicy = CPTAxisLabelingPolicyAutomatic; 
```

我得到这些结果：

![在此处输入图像描述](../Images/1ca84c1d5dbbccc15367b8f4fde6af51.png)

有没有办法将我的价值观与自动标签政策中的价值观结合起来？

# java - 我如何在 Scanner 中指定参数扫描仪 = new Scanner(System.in); 在 Netbeans

> ID：13727942
> 
> 赞同：-1
> 
> 时间：2012-12-05T16:34:59.403
> 
> 标签：java, netbeans

我知道 `Scanner scanner = new Scanner(System.in);`可以接受用户输入，但我可以问如何使用它，每当我放置它们时，netbeans 只是运行它而不在控制台中询问任何用户输入，我只想问如何配置使用用户输入？

当然，我放了nextLine和nextInt，我只是想问一下如何让netBeans停止并问我输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:38:50.307

你会在底部看到一个叫做`output`(window) 的东西 --> 你会看到输入提示。

如果那里没有输出窗口，请转到`Window menu--> Select output--> ouput`

（或者）`Ctrl+4`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:41:04.107

这很简单。这是一个给你的例子。

```
public class Test {
    public static void main(String[] args) [
        Scanner INPUT = new Scanner(System.in);
        int i;

        System.out.print("Enter number: "); // This displays to the user to enter a number.
        i = INPUT.nextInt(); // Sets i equal to the user input.
    }
} 
```

如果您使用字符串作为输入，请尝试 INPUT.nextLine();。

您可以在此处找到更多信息：http: [//download.oracle.com/javase/1,5,0/docs/api/java/util/Scanner.html](http://download.oracle.com/javase/1,5,0/docs/api/java/util/Scanner.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:40:47.220

因为你需要在这样之前给一个消息。

// 这是你的输入对象

```
Scanner input = new Scanner(System.in);

 // give massage 
System.out.println("give some in put");

 // to get input where you want
String input = input.nextline();

 system.out.println(""+input); 
```

# javascript - 动态输入文本后自动调整 textarea 字段的大小

> ID：13727944
> 
> 赞同：0
> 
> 时间：2012-12-05T16:35:09.387
> 
> 标签：javascript, jquery

我有一个由javascript填充的。插入到 textarea 的文本是动态的，可以有不同的长度，因此我需要在 javascript 输入文本后动态调整 textarea 的大小。我希望 textarea 具有最大宽度，如果它是字段，则文本将继续填充下一行，导致 textarea 高度增加。

我如何实现这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-14T10:00:32.353

也许你可以试试这个：[https ://jsfiddle.net/paulistoan/84ujn5qp/](https://jsfiddle.net/paulistoan/84ujn5qp/)

```
$(document).ready(function(){
	$("#textArea").on("input", updateText).trigger($.Event("input"));

	function updateText()
	{
		$("#textDiv").text($(this).val() + "\n");
		$(this).css("width", $("#textDiv").width()+2);
		$(this).css("height", $("#textDiv").height());
	}
});
```

```
textarea {
  background: rgba(0, 0, 0, 0) none repeat scroll 0 0;
  border: medium none;
  color: black;
  outline: medium none;
  overflow: hidden;
  margin: 0;
  padding: 0;
  background-color:lightgray;
  resize: none !important;

  outline-color: inherit;
  outline-style: dashed;
  outline-width: 2px;
}

#textDiv {
  top: 50px;
  background-color:#FF0004;
  display: inline-block;
  white-space: pre;
  display: none;
}

textarea, #textDiv {
  font-family: Impact, Haettenschweiler, "Franklin Gothic Bold", "Arial Black", sans-serif;
  font-size: 26px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<textarea id="textArea">Lorem ipsum dolor sit amet,&#10;consectetur adipisicing&#10;elit porro quisquam est qui dolorem ipsum</textarea>

<div id="textDiv"></div>
```

并在 textarea 上使用 max-width CSS 属性，#textDiv 并将**white-space: pre**更改为**white-space: pre-wrap**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T16:50:05.723

[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

可能是您需要的，并向文本区域 CSS 添加最大高度。

# javascript - 在移动浏览器中显示模式弹出窗口和调整浏览器窗口大小时出现问题

> ID：13727953
> 
> 赞同：1
> 
> 时间：2012-12-05T16:35:41.237
> 
> 标签：javascript, modal-dialog, modal-popup

我正在构建的网站上的模式弹出对话框存在一些问题。这是网站：www.notforsale.magalidb.com

**这些链接后面都有一个模式弹出窗口：**

*   “Lisez la version en ligne”
*   “阅读在线版本”
*   “条件”
*   “联系编辑”
*   “编辑联系人”
*   “联系编辑”

**问题：**

1.  当我通过 Safari 手机（在 iPhone 或 iPad 上）浏览网站并单击上述任何链接时，会出现一个弹出窗口。但是当我放大时，弹出窗口会跳开（主要是在屏幕的右下方）。所以我无法放大该弹出窗口中写的任何内容。
2.  当我通过 Safari、Opera、Firefox、Chrome 或 Internet Explorer 等常规浏览器浏览网站时（虽然没有在 IE 上测试），然后单击“Bekijk de online versie”，然后我会看到一个更大的弹出窗口里面有一本可以像书一样翻动的杂志。如果我然后调整浏览器窗口的大小，这个弹出窗口会跳到屏幕的右下角。然后我必须关闭弹出窗口并重新打开它才能看到它再次居中。

**我想要的是：**

1.  我需要在现有代码中编辑什么以使弹出窗口保持居中？即使在移动浏览器中？
2.  如何防止这个特定的弹出窗口跳到浏览器的角落？我没有写它与其他弹出窗口不同，唯一的区别是宽度和高度。但我不明白为什么它总是跳开，不像其他弹出窗口......

如果有人有可能的解决方案，请分享。这非常紧迫，因为我发现我的客户应该拥有一个正常运行的网站。

**代码：popup.js**

```
$(document).ready(function() {  
//select all the a tag with name equal to modal
$('a.modal').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();

    //Get the A tag
    var id = $(this).attr('href');

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set heigth and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //transition effect     
    $('#mask').fadeIn(1000);    
    $('#mask').fadeTo("slow",0.8);  

    //Get the window height and width
    var winH = $(window).height() ;
    var winW = $(window).width() ;

    //Set the popup window to center
    $(id).css('margin-top',  winH / 2-$(id).height()/2);
    $(id).css('margin-left', winW / 2-$(id).width()/2);

    //transition effect
    $(id).fadeIn(2000); 
});

//if close button is clicked
$('.window .close').click(function (e) {
    //Cancel the link behavior
    e.preventDefault();

    $('#mask').hide();
    $('.window').hide();
});     

//if mask is clicked
$('#mask').click(function () {
    $(this).hide();
    $('.window').hide();
});         

$(window).resize(function () { 
    var box = $('#boxes .window');

    //Get the screen height and width
    var maskHeight = $(document).height();
    var maskWidth = $(window).width();

    //Set height and width to mask to fill up the whole screen
    $('#mask').css({'width':maskWidth,'height':maskHeight});

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //Set the popup window to center
    box.css('margin-top',  winH/2 - box.height()/2);
    box.css('margin-left', winW/2 - box.width()/2);
});
    }); 
```

**代码（示例，完整代码请参见站点源代码）：index.php**

```
<!DOCTYPE html>
<html>

<head>
<title>NOTFORSALE, the most exclusive car magazine</title>
<link href="stylesheets/default.css" rel="stylesheet" type="text/css">
<!-- jQuery library: -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js" type="text/javascript"></script>
<!-- Cycle plugin: -->
<script src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js" type="text/javascript"></script>
<script type="text/javascript" src="scripts/launch_scripts.js"></script>
<script type="text/javascript" src="scripts/popup.js"></script>
</head>

<body>
    <div id="main">
        <div id="main-container">
            <div id="content">
                <div class="content-left">
                    <div class="box" id="box1">FR</div>
                    <br><br>
                    <a href="#dialogFR" class="modal">
                    Telechargez pour iPad ou Android tablet</a>
                    <br><br>
                    <a href="#dialogFR" class="modal">Lisez la version en ligne</a>
                </div>
                <div class="content-center">
                    <div class="box" id="box2">NL</div>
                    <br><br>
                    <a href="scripts/notforsale_DL_NL.php" target="_blank">
                    Download voor iPad of Android tablet</a>
                    <br><br>
                    <a href="#dialogNL" class="modal">Bekijk de online versie</a>
                </div>
                <div class="content-right">
                    <div class="box" id="box3">EN</div>
                    <br><br>
                    <!-- 
                    <a href="scripts/notforsale_DL_EN.php" target="_blank">
                    -->
                    <a href="#dialogEN" class="modal">
                    Download for iPad or Android tablet</a>
                    <br><br>
                    <a href="#dialogEN" class="modal">Read the online version</a>
                </div>
            </div>
        </div>
    </div>

!-- From here, the popups start -->
    <div id="boxes">
        <div id="dialogFR" class="window popup-windows" style="width: 600px !important; height: 250px !important;">
            <a href="#" class="close"><img class="cbc" src="images/close.png" alt="close"></a>
            <?php include 'comingsoonFR.php'; ?>
        </div>
        <div id="dialogNL" class="window popup-windows" style="width: 1200px !important; height: 510px !important;"> 
            <a href="#" class="close"><img class="cbm" src="images/close.png" alt="close"></a>
            <?php include 'magazineNL.php'; ?> 
            <div style="z-index:20; margin: -80px; text-align: center;">
                <a href="http://www.adobe.com/go/getflash"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"></a>
                <br>
                <a href="scripts/notforsale_DL_NL.php" target="_blank">Download voor iPad of Android tablet</a>
            </div>
        </div>
        <div id="dialogEN" class="window popup-windows" style="width: 600px !important; height: 250px !important;">
                <a href="#" class="close"><img class="cbc" src="images/close.png" alt="close"></a>
                <?php include 'comingsoonEN.php'; ?>
        </div>
    <div id="mask"></div>
    </div>
</body>
</html> 
```

**代码（仅显示与弹出窗口相关的 CSS）：default.css**

```
/* Popup design */
#mask {
    z-index:9000;
    position:absolute;
    left:0;
    top:0;
    background-color:#000;
    display:none;
}
#boxes .window {
    width: 1200px !important;
    height: 510px !important;
    z-index:9999;
    position:fixed;
    left:0;
    top: 0;
    display:none;
    padding:20px;
    background: white;
    border: 1px solid #4D4D4D;
    border-radius: 15px;
    box-shadow: 0 0 5px black;  
}
.popup-windows{
    background: #4D4D4D !important; 
    border: 1px solid white !important; 
    font-size: 10pt !important; 
    font-weight: normal !important;
}
#boxes #dialog {
    width: 600px;
    height: 500px;
    padding:10px;
    background-color: #ffffff;
}
.cbm{ /* Short for CloseButtonMagazine */
    margin-top: -45px;
    margin-left: 1196px;
    position: fixed;
}
.cbc{ /* Short for CloseButtonContact */
    margin-top: -45px;
    margin-left: 600px;
    position: fixed;
} 
```

我知道这可能是一个问题的很多文本，但我真的想提供尽可能多的细节，以便让您更容易看到整个捆绑包。如前所述，您可以查看网站并测试弹出问题。我使用谷歌浏览器对其进行测试，如果一切正常，我会在其他浏览器中查看该站点以使其兼容。

另外，我认为跳跃弹出问题是可以解决的。我看到了其他制作模态弹出窗口的教程，这些教程在我的移动浏览器中工作得很好，但我不能重新编码所有这些弹出窗口。除非我可以编辑现有代码并缩短它，同时保留功能并且无需编辑 index.php 中的任何内容。无论如何...请看看它。在浏览器中干预它可能更容易，检查元素等等......这是相当多的代码。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:49:25.590

将您的模式弹出窗口设置为位置：固定和高度/宽度 100%，这应该覆盖整个屏幕，您不必担心窗口大小调整。

对于您的个人弹出框，将它们设置为位置：固定，并使用顶部/左侧来定位而不是边距。至于缩放，我必须亲眼看到这一点，才能更好地掌握你想要的效果。

# jquery - 快速单击链接时Jquery动画不起作用

> ID：13727956
> 
> 赞同：1
> 
> 时间：2012-12-05T16:35:53.030
> 
> 标签：jquery, html, animation, scroll

这是我的代码，此代码将 div 从页面底部滚动到顶部。我有 3 个链接，每个链接都滚动另一个 div 并将 div 隐藏在它后面。如果等到动画结束，一切都很好。如果我不等待并且我快速单击链接它不起作用。动画卡住了，有时它不显示任何 div。

可能是什么问题？

CSS：

```
.footerDiv{
display:none;
position:absolute;
z-index:900;
top:800px;
left:0px;
background-size:100%;
height: 600px;
width:100%;
margin: 0;
padding: 0;
background-repeat:no-repeat;
background-position:bottom;} #fourth{background-image:url(../images/group_bg.jpg);} #fifth{background-image:url(../images/team_bg.jpg);} #sixth{background-image:url(../images/client_bg.jpg);} 
```

的JavaScript：

```
function showFooterLink(num){
var bottomOfScroll = $(window).scrollTop() + $(window).height();

$("#footerLinks a").each(function(index, element) {
    var elemNum = $(element).attr("data-num");
    if(elemNum==num){
        $(element).addClass("on");
    }
    else{
        $(element).removeClass("on");
    }
});

$('.footer_'+num).stop().
    css({
        "display":"block",
        "z-index":1000
    }).
    animate({
        top: bottomOfScroll - $(window).height()
    }, {
    duration: 1500,
    specialEasing: {
        top: 'easeInOutQuad'
    },
    complete: function() {

        $("body").css("overflow", "hidden");
        $(".footerDiv").each(function(index, element) {
            if(!$(element).hasClass("footer_"+num)){
                $(element).hide();
                $(element).css({
                    "top"       : bottomOfScroll,
                    "z-index"   : 900
                });
            }
            else{
                $(element).css("z-index","900");
            }
        });
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:53:44.663

尝试将一些布尔值传递给 stop 方法：

改变

```
stop() 
```

至

```
stop(true, true) 
```

第一个布尔值将清除动画队列。第二个将“跳到动画的末尾”，从而防止动画卡在“中间”的某个地方。

> **clearQueue**一个布尔值，指示是否也删除排队的动画。默认为假。
> 
> **jumpToEnd**一个布尔值，指示是否立即完成当前动画。默认为假。

更多信息[在这里](http://api.jquery.com/stop/)

# java - 保持Java套接字打开？

> ID：13727959
> 
> 赞同：2
> 
> 时间：2012-12-05T16:35:59.027
> 
> 标签：java, sockets, input, io, output

我正在制作一个会自动更新的程序/游戏。我有更新部分，但没有检查版本。我原以为这很容易。这就是我所做的。我为游戏写了一个更新程序，我写了一个服务器。每次客户端/更新程序连接时，服务器都会启动一个线程。线程处理一切。游戏更新程序读取一个名为`version.txt`并提供版本号（默认为 0.0.1）的文件并将其发送到服务器。服务器确实收到了版本，并且`System.out.println();`如果版本匹配，并且如果我更改版本，它会更改输出。所以这部分工作。但仅此而已。该过程的第二部分是服务器然后只发送一个名为的文本文件`NPS Game.txt`（它发送任何东西，但是 txt 很容易测试）并且客户端用刚刚发送的新文件替换了这个文件的旧版本。问题是我不断收到一个错误，说套接字已关闭。我试过使用`socket.setKeepAlive(true);`，但这并没有改变任何东西（我把它放在客户端和服务器上）。这是代码：

服务器：

```
package main;

import java.io.*;
import java.net.*;

import javax.swing.JOptionPane;

public class Server {
static ServerSocket serverSocket = null;
static Socket clientSocket = null;
static boolean listening = true;

public static void main(String[] args) throws IOException {
    try {
        serverSocket = new ServerSocket(6987);
    } catch (IOException e) {
        ServerThread.showmsg("Could not use port: 6987");
        System.exit(-1);
    }

    ServerThread.showmsg("server- initialized");
    ServerThread.showmsg("server- waiting...");

    while (listening)
        new ServerThread(serverSocket.accept()).start();
}
} 
```

服务器线程：

```
package main;

import java.io.*;
import java.net.Socket;
import java.net.SocketException;

import javax.swing.JOptionPane;

public class ServerThread extends Thread {
Socket socket;
ObjectInputStream in;
ObjectOutputStream out;
String version = "0.0.1";

public ServerThread(Socket socket) {
    super("Server Thread");
    this.socket = socket;
}

public void run() {
    showmsg("server- Accepted connection : " + socket);
    getVersion();
    sendFile();
}

public void getVersion() {
    try {
        ObjectInputStream ois = new ObjectInputStream(
                socket.getInputStream());
        try {
            String s = (String) ois.readObject();
            if (s.equals(version)) {
                System.out.println("server- matched version :)");
            } else {
                System.out.println("server- didnt match version :(");
                System.exit(0);
            }
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
        ois.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void sendFile() {
    // sendfile
    File myFile = new File("C:\\Programming\\NPS\\Files\\bin\\NPS Game.txt");
    byte[] mybytearray = new byte[(int) myFile.length()];
    FileInputStream fis;
    try {
        fis = new FileInputStream(myFile);
        BufferedInputStream bis = new BufferedInputStream(fis);
        bis.read(mybytearray, 0, mybytearray.length);
        OutputStream os = socket.getOutputStream();
        showmsg("server- Sending...");
        os.write(mybytearray, 0, mybytearray.length);
        os.flush();
        socket.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public static void showmsg(String s) {
    JOptionPane.showMessageDialog(null, s);
}
} 
```

和客户端/更新程序：

```
package main;

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.FileReader;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

import javax.swing.JOptionPane;

import org.omg.CORBA.portable.InputStream;

public class Connections {
String IP, port;
String message = "";
Socket socket;

public Connections(boolean server, boolean updating, String IP, String port) {
    this.IP = IP;
    this.port = port;
    try {
        socket = new Socket(IP, Integer.parseInt(port));
    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    if (!server) {
        if (updating) {
            try {
                sendVersion();
                updating();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } else {
            client();
        }
    }
    if (server) {

    }
}

public void sendVersion() throws IOException {

    FileReader fileReader = new FileReader(
            "C:\\Program Files\\AVTECH\\NPS\\Files\\bin\\version.txt");
    BufferedReader bufferedReader = new BufferedReader(fileReader);

    String stringRead = bufferedReader.readLine();

    bufferedReader.close();

    ObjectOutputStream oos = new ObjectOutputStream(
            socket.getOutputStream());
    oos.writeObject(stringRead);
    oos.flush();
    oos.close();
}

public void updating() throws IOException {
    int filesize = 6022386; // filesize temporary hardcoded

    int bytesRead;
    int current = 0;

    showmsg("client- connected");

    // receive file
    byte[] byteArray = new byte[filesize];
    java.io.InputStream inStream = socket.getInputStream();
    FileOutputStream fileOutStream = new FileOutputStream(
            "C:\\Program Files\\AVTECH\\NPS\\Files\\bin\\NPS Game.txt");
    BufferedOutputStream buffOutStream = new BufferedOutputStream(
            fileOutStream);
    bytesRead = inStream.read(byteArray, 0, byteArray.length);
    current = bytesRead;

    do {
        bytesRead = inStream.read(byteArray, current,
                (byteArray.length - current));
        if (bytesRead >= 0)
            current += bytesRead;
    } while (bytesRead > -1);

    buffOutStream.write(byteArray, 0, current);
    buffOutStream.flush();
    buffOutStream.close();
    inStream.close();
    socket.close();
}

public static void showmsg(String s) {
    JOptionPane.showMessageDialog(null, s);
}
} 
```

我不知道它有什么问题，但这真的很令人沮丧。如果有人可以提供帮助，将不胜感激。我做了一些事情：谷歌各种问题，尝试实施`socket.setKeepAlive(true);`。另外，我认为这可能值得注意，在服务器线程中，就在该行的正上方`BufferedInputStream bis = new BufferedInputStream(fis);`，我放`System.out.println(socket.isClosed);`了它，它返回了 true。那是我的全部了。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T16:38:16.020

我认为关闭两个流之一会关闭套接字。因此，请尝试在服务器端`ois.close()`从您的方法中删除调用。`getVersion()`还要摆脱客户端方法中的`oos.close()`调用。`sendVersion()`

当您构造一个 ObjectOutputStream 或 ObjectInputStream 并完成它时，您不应该关闭该流，因为它将关闭底层流，在您的情况下是套接字。

# node.js - How do I have foreman reload node.js when a file is changed?

> ID：13727961
> 
> 赞同：4
> 
> 时间：2012-12-05T16:36:12.833
> 
> 标签：node.js, heroku, foreman

I currently use [supervisor](https://github.com/isaacs/node-supervisor) to run my node.js app when developing locally. This has been great, but I currently store all my [configs](http://www.12factor.net/config) in my `.bash_profile`, I want to move them to a `.env` file.

Is there a way to get the environment loading features of **foreman** with the file watching features of **supervisor**?

One option is to add it to my `Procfile` like this, but I suspect that will mess up Heroku.

```
`local: supervisor web.js` 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-09T15:11:16.497

This is the solution I put together and it works great.

## Install [Rerun](https://github.com/alexch/rerun) and [Rb-fsevent](https://github.com/thibaudgg/rb-fsevent).

```
sudo gem install rerun rb-fsevent 
```

## Install Foreman if you have not already.

```
sudo gem install foreman 
```

## Put your environment variables in `.env` in the root of your project.

**Don't forget to add `.env` to your `.gitignore`, [don't want that sensitive info in your code](http://www.12factor.net/config)**

```
echo '.env' >> .gitignore 
```

## Here is what my `Procfile` looks like

```
web: node web.js 
```

## Now just start like this

```
rerun foreman start web 
```

## Extra Credit, create an alias

```
echo "alias rrun='rerun foreman start web'" >> ~/.bash_profile 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T10:32:21.247

Another solution is to create another *Procfile* file for your development environment with your current configuration:

```
# Procfile.dev
web: supervisor app.js 
```

And start `foreman` using that file

```
$ foreman start -f Procfile.dev 
```

You can optionally exclude that file from your git repo

```
$ echo "Procfile.dev" >> .git/info/exclude 
```

# java - 错误：在“双”之前解析错误（cygwin）

> ID：13727969
> 
> 赞同：2
> 
> 时间：2012-12-05T16:36:34.013
> 
> 标签：java, c, arrays, java-native-interface, cygwin

所以这是我正在使用的代码：Test.java：

```
public class HelloWorld {
    static {
        System.loadLibrary("SumLib");
    }

    public static void main(String args[])
    {
        Random rand = new Random();
        double[] arr = new double[10];
        for(int i = 0; i < 11; i++) {
            arr[i] = rand.nextDouble();
        }
        NativeMethods.sumOfArr(arr);
}
} 
```

NativeMethods.java：

```
public static native double sumOfArr(double[] arr); 
```

NativeMethods.c：

```
JNIEXPORT jdouble JNICALL Java_NativeMethods_sumOfArr(JNIEnv *env, jclass cls, jdoubleArray arr) {
    return sumOfArr(double *arr);
} 
```

NativeMethods.h 由 cygwin 中的“javah NativeMethods”生成。

总和.c：

```
double sumOfArr(double* arr) {
    int i;
    double sum = 0;
    for(i = 0; i < 10; i++) {
        sum =+ arr[i];
    }
    return sum;
} 
```

总和.h：

```
double sumOfArr(double *arr); 
```

当我尝试在 cygwin 中编译/制作 SumLib.dll 时出现问题，它向我抛出了这个错误：

```
$ gcc -Wl,-add-stdcall-alias -mno-cygwin -shared -I"/cygdrive/c/jdk1.7.0_09/include" -I"/cygdrive/c/jdk1.7.0_09/include/win32" -o SumLib.dll sum.c NativeMethods.c
NativeMethods.c: In function `Java_NativeMethods_sumOfArr':
NativeMethods.c:19: error: parse error before "double" 
```

我被困在这里试图完成这项工作几个小时......可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:07:58.150

你不能这样做，因为它不会编译

```
return sumOfArr(double *arr); 
```

甚至这个

```
return sumOfArr((double *)arr); 
```

因为`jdoubleArray`不是 a `double *`，所以它有一个开头的标题。

您需要使用 Java 提供的辅助方法来访问此数组的元素。

# sql - sql：如何查询不基于ID的外键

> ID：13727970
> 
> 赞同：0
> 
> 时间：2012-12-05T16:36:37.510
> 
> 标签：sql

我的表 IncomingLetter 有一个表 Department 的外键，它有一个`ID`和一个 column `Short_Name`。

我正在使用此查询来计算分配给部门的传入信件。

```
SELECT COUNT(DocumentNumber) AS TotalNumberIncomingLetters
FROM IncomingLetter
WHERE Assigned_To_Department=1; 
```

虽然这可行，但我想根据短名称​​而不是 ID 进行查询。

```
SELECT COUNT(DocumentNumber) AS TotalNumberIncomingLetters
FROM IncomingLetter
WHERE Assigned_To_Department.Short_Name="My Department Name"; 
```

这不起作用，而我发现使用此语法的示例。但是，请注意，我在 MS 访问中使用此查询可能很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:39:19.310

你应该使用

```
SELECT COUNT(il.DocumentNumber) AS TotalNumberIncomingLetters
FROM IncomingLetter il
 INNER JOIN Department d on d.ID = il.Assigned_To_Department
WHERE d.Short_Name="My Department Name"; 
```

“我的部门名称”文本实际上存储在`Departments`表格中，并且只有数字（1）存储在`IncomingLetter`表格中，在字段中`Assigned_To_Department`。
要求`Assigned_To_Department.Short_Name`基本上是要求数字 1 得到它的`Short_Name`字段，这没有意义。

在这些场景中，您需要告诉数据库引擎两件事：

*   连接了哪些表 -`IncomingLetter`在`Departments`这种情况下（`inner join`部分）
*   它们是如何连接的 - 通过分别设置它们的`Assigned_To_Department`和`ID`字段（`on ...`部分

# python - 在Python中将字符串截断为字节长度

> ID：13727977
> 
> 赞同：14
> 
> 时间：2012-12-05T16:36:55.863
> 
> 标签：python, unicode

我在这里有一个函数可以将给定的字符串截断为给定的字节长度：

```
LENGTH_BY_PREFIX = [
  (0xC0, 2), # first byte mask, total codepoint length
  (0xE0, 3), 
  (0xF0, 4),
  (0xF8, 5),
  (0xFC, 6),
]

def codepoint_length(first_byte):
    if first_byte < 128:
        return 1 # ASCII
    for mask, length in LENGTH_BY_PREFIX:
        if first_byte & mask == mask:
            return length
    assert False, 'Invalid byte %r' % first_byte

def cut_string_to_bytes_length(unicode_text, byte_limit):
    utf8_bytes = unicode_text.encode('UTF-8')
    cut_index = 0
    while cut_index < len(utf8_bytes):
        step = codepoint_length(ord(utf8_bytes[cut_index]))
        if cut_index + step > byte_limit:
            # can't go a whole codepoint further, time to cut
            return utf8_bytes[:cut_index]
        else:
            cut_index += step
    # length limit is longer than our bytes strung, so no cutting
    return utf8_bytes 
```

在引入表情符号的问题之前，这似乎工作正常：

```
string = u"\ud83d\ude14"
trunc = cut_string_to_bytes_length(string, 100)

Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "<console>", line 5, in cut_string_to_bytes_length
  File "<console>", line 7, in codepoint_length
AssertionError: Invalid byte 152 
```

谁能准确解释这里发生了什么，以及可能的解决方案是什么？

**编辑：**我这里有另一个代码片段，它不会引发异常，但有时会有奇怪的行为：

```
import encodings
_incr_encoder = encodings.search_function('utf8').incrementalencoder()

def utf8_byte_truncate(text, max_bytes):
    """ truncate utf-8 text string to no more than max_bytes long """
    byte_len = 0
    _incr_encoder.reset()
    for index,ch in enumerate(text):
        byte_len += len(_incr_encoder.encode(ch))
        if byte_len > max_bytes:
            break
    else:
        return text
    return text[:index]

>>> string = u"\ud83d\ude14\ud83d\ude14\ud83d\ude14\ud83d\ude14\ud83d\ude14" 
>>> print string
(prints a set of 5 Apple Emoji...)
>>> len(string)
10
>>> trunc = utf8_byte_truncate(string, 4)
>>> print trunc
???
>>> len(trunc)
1 
```

因此，在第二个示例中，我有一个 10 字节的字符串，将其截断为 4，但发生了一些奇怪的事情，结果是一个大小为 1 字节的字符串。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-06T06:56:03.020

正如@jwpat7 所指出的那样，该算法是错误的。一个更简单的算法是：

```
# s = u'\ud83d\ude14\ud83d\ude14\ud83d\ude14\ud83d\ude14\ud83d\ude14'
# Same as above
s = u'\U0001f614' * 5   # Unicode character U+1F614

def utf8_lead_byte(b):
    '''A UTF-8 intermediate byte starts with the bits 10xxxxxx.'''
    return (ord(b) & 0xC0) != 0x80

def utf8_byte_truncate(text, max_bytes):
    '''If text[max_bytes] is not a lead byte, back up until a lead byte is
    found and truncate before that character.'''
    utf8 = text.encode('utf8')
    if len(utf8) <= max_bytes:
        return utf8
    i = max_bytes
    while i > 0 and not utf8_lead_byte(utf8[i]):
        i -= 1
    return utf8[:i]

# test for various max_bytes:
for m in range(len(s.encode('utf8'))+1):
    b = utf8_byte_truncate(s,m)
    print m,len(b),b.decode('utf8') 
```

### 输出

```
0 0 
1 0 
2 0 
3 0 
4 4 
5 4 
6 4 
7 4 
8 8 
9 8 
10 8 
11 8 
12 12 
13 12 
14 12 
15 12 
16 16 
17 16 
18 16 
19 16 
20 20 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T16:58:15.213

如果一个数 f 是这样的`f & 0xF0 == 0xF0`，那么情况也是如此，`f & 0xC0 == 0xC0`因为 0xF0 具有 0xC0 具有的所有位，然后是一些。也就是说，除其他问题外，您的`codepoint_length()`函数将在应该为 4 时返回步长 2。如果您反转 LENGTH_BY_PREFIX 列表，则该函数适用于第一个示例。

```
LENGTH_BY_PREFIX = [
  (0xFC, 6),
  (0xF8, 5),
  (0xF0, 4),
  (0xE0, 3), 
  (0xC0, 2), # first byte mask, total codepoint length
] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-08T13:25:37.457

Mark 的 Python 3 代码版本：

```
# s = u'\ud83d\ude14\ud83d\ude14\ud83d\ude14\ud83d\ude14\ud83d\ude14'
# Same as above
s = u'\U0001f614' * 5   # Unicode character U+1F614

def utf8_lead_byte(b):
    '''A UTF-8 intermediate byte starts with the bits 10xxxxxx.'''
    return (b & 0xC0) != 0x80

def utf8_byte_truncate(text, max_bytes):
    '''If text[max_bytes] is not a lead byte, back up until a lead byte is
    found and truncate before that character.'''
    utf8 = text.encode('utf8')
    if len(utf8) <= max_bytes:
        return utf8
    i = max_bytes
    while i > 0 and not utf8_lead_byte(utf8[i]):
        i -= 1
    return utf8[:i]

# test for various max_bytes:
for m in range(len(s.encode('utf8'))+1):
    b = utf8_byte_truncate(s,m)
    print(m,len(b),b.decode('utf8')) 
```

编辑：这是 Mark Tolonen 为 python3 改编的原始代码。之前的代码是错误的。感谢您的评论！

# php - 使用 javascript 使用单个选择框控制多选框

> ID：13727983
> 
> 赞同：0
> 
> 时间：2012-12-05T16:37:11.130
> 
> 标签：php, javascript

```
`<select multiple="multiple" name="state[]" id="state">
<option value="">Select a State</option>
<?php 
foreach($state_list as $key=>$value){
echo "<option value=\"$key\"";
if($html['state']==$key|| $row['state']==$key){
echo ' selected="selected"';
}
echo ">$value</option>\n";                                     
}?>
</select> </p>`

<p>Select A Country
<select name="country" id="country">
<option value="0">Select a Country</option>
<option value="USA">USA</option>                             
<option value="UK">UK</option>    
</select> </p> 
```

我有两个选择框 1)state[] 2) country 。想要的是“如果所选国家不是美国，请禁用包含所有美国州的多选框”。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:58:45.803

将此 Javascript 添加到您的代码中：

```
<script type="text/javascript">
<!--
window.onload = function() {
    var selectCountry = document.getElementById('country');
    selectCountry.onchange = function() {
        document.getElementById('state').disabled = (selectCountry.value != 'USA')? true : false;
    };
};
//-->
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:48:32.690

如果您有 jQuery，您可以执行以下操作：

```
$('#country').change(function () {
    if($('#country').val() != "USA") {
        $('#state').attr('disabled', 'disabled');
    }
    else {
        $('#state').removeAttr('disabled');
    }
}); 
```

或者，如果您使用的是纯 JavaScript：

```
var elem = document.getElementById("country");
elem.onchange = function () {
     if(elem.options[e.selectedIndex].value != "USA") {
         document.getElementById('state').disabled = "disabled";
     }
     else {
         document.getElementById('state').removeAttribute("disabled");
     }
} 
```

当国家组合框包含的值不是“美国”时，这将禁用州组合框。当所选国家是“USA”时，它将删除已禁用的属性并使其再次使用。

希望这可以帮助。

# php - PHP：获取收到的请求正文

> ID：13727989
> 
> 赞同：6
> 
> 时间：2012-12-05T16:37:25.093
> 
> 标签：php, api, post, http-headers

我目前正在使用我无法透露的第 3 方 API。总结是：

行动 -> 3rd 方 -> 回调

所以我的服务器用一些数据与第 3 方通信

一旦数据被发回，第 3 方将向回调 url 发送一个 XML。

我收到带有标题的回调：

内容类型：application/xml 内容长度：69 请求方法：POST

但是， print_r($_POST) 根本没有显示任何内容。$_GET 也不是。

会发生什么？我知道您无法根据我的含糊程度给我最详细的答案，但如果您能指出我正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-05T16:40:05.143

使用[php://input](http://php.net/wrappers.php)：

```
$post = file_get_contents('php://input'); 
```

# android - Google Maps API V2 '未能加载地图。无法联系 Google 服务器

> ID：13727992
> 
> 赞同：24
> 
> 时间：2012-12-05T16:37:31.427
> 
> 标签：android, android-maps

我已经检查并仔细检查了我在 Google 控制台上注册的 APIkey，但是我仍然收到以下错误：

```
12-05 16:31:12.940: E/Google Maps Android API(12334): Failed to load map.  Could not contact Google servers. 
```

我看到的是地图视图的放大/缩小按钮和背景，但没有地图？？？！！！

有任何想法吗？？？

**回答**

我将其发布在这里，因为在下面接受的答案的评论中说明了解决我的问题的方法。

这是`READ_GSERVICES`许可。出于某种原因，在使用它们时，开发者网站上没有提到许可。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-05T16:39:43.397

要在 Android 上设置 Google Maps API v2，请确保您已完成以下**所有**步骤。

**用于 API 访问的应用程序密钥**

当 Google 询问您的应用证书的 SHA1 指纹时，您很可能希望运行两次，一次用于调试证书，一次用于发布证书。

> keytool -list -v -keystore publishcert.keystore
> keytool -list -v -keystore ~/.android/debug.keystore

*市场上的应用程序的指纹与您刚刚测试的应用程序的指纹不同！*

**在 Google API 控制台上启用服务**

登录到[Google API 控制台](https://code.google.com/apis/console/)。
在服务页面上，找到`Google Maps Android API v2`.

***注意***-然后`Google Maps API v2`是**不同的**`Google Maps Android API v2`

在 API 访问选项卡中，单击`Create new Android Key`

添加您的证书签名以访问 API。

> yourrelease-fingerprint;com.example.project.package
> yourdebug-fingerprint;com.example.project.package

您将获得一个生成的 API 访问密钥。

*您可能需要先在 API 控制台中创建一个 API 项目*

**修改应用清单**

`<application>`在元素内添加您的 API 密钥。

```
<meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="yourapikey"/> 
```

添加以下权限：

```
<permission
        android:name="com.example.project.package.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

<uses-permission android:name="com.example.project.package.permission.MAPS_RECEIVE"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> 
```

添加以下功能请求：

```
<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" /> 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-23T10:56:39.703

确保注意以下所有要点：

1) 启用了错误的服务。确保启用“ **Google Maps Android API v2** ”，而不是“ **Google Maps API v2** ”并重新生成 API 密钥。

2) 将以下元素添加到您的清单中。**将 com.example.mapdemo 替换**为您的应用程序的包名称。

3) 使用**正确的证书和密钥。**发布证书，当您在我的手机上运行应用程序时，它在调试期间将不起作用。您必须改用调试密钥库证书指纹。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-05T17:01:39.343

这可能是 Manifest 的问题。以下对我有用，专门`permission.MAPS_RECEIVE`解决了我遇到的类似问题：显示缩放按钮和 myLocation，但地图没有图块......

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.discos2.example"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.discos2.example.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.discos2.example.permission.MAPS_RECEIVE" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <uses-feature
        android:name="android.hardware.location"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location.network"
        android:required="false" />
    <uses-feature android:name="android.hardware.location.gps" />
    <uses-feature
        android:name="android.hardware.wifi"
        android:required="false" />
    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:hardwareAccelerated="true">
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="__NEW_GOOGLE_MAPS_V2_KEY_GOES_HERE__" />

        <activity
            android:name=".ui.activities.MainActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-31T16:24:35.427

顺便说一句，我正在运行 Windows 7。我为此烦恼了好几天，直到我发现以下内容：我有多个 debug.keystore。一个在：

```
C:\android-sdk\.android\debug.keystore 
```

还有另一个，在：

```
C:\Users\David\.android\debug.keystore 
```

一旦我找到“C:\Users\David.android\debug.keystore”，我就做了：

```
keytool -list -alias androiddebugkey -keystore C:\Users\David\.android\debug.keystore -storepass   android -keypass android -v 
```

我将生成的 SHA1 提交到谷歌控制台并获得了一个有效的 API 密钥。从“C:\android-sdk.android\debug.keystore”的密钥库获取 SHA1 不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T09:21:28.503

我面临同样的问题；但对我来说，这是密钥库问题，我使用调试密钥库对其进行了签名，因此 Google 地图 api v2 无法连接到 Google 地图。

我创建了一个新的 api 密钥`my-release-keystore.keystore`（你可以在`C:\Users\{YOUR_USER_NAME}\.android\my-release-key.keystor`e 找到它）使用 JDK 中可用的 keytool 生成 SHA1；复制它并在谷歌控制台注册。

使用在您的应用程序清单文件中生成的 api 密钥。签名`my-release-key.keystore`将其推送到设备上。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-03T00:12:13.737

您可能启用了错误的服务“Google Maps Android API v2”，而不是“Google Maps API v2”

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T15:34:48.500

我有同样的问题。我只是错过了这一点：当您列出您的 Google API 服务时，有三个可用的 Google Maps API。

谷歌地图 Android API v2
谷歌地图 API v2
谷歌地图 API v3 ...

当您为 Android 编码时，请检查您是否启用了 Android 版本（Google Maps Android API v2）。Google Maps API v2 还不够好。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-23T23:03:48.973

只需使用 SHA 创建**新的**API 密钥，最重要的是正确的包名称（如 com.example.mapdemo）。在您的`AndroidManifest.xml`.

我想我们需要为所有使用 Google 地图的新 Eclipse 项目提供新的 API 密钥（因为创建新**密钥**还需要包名，这对于所有项目来说本质上是不同的）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-07-16T11:25:43.723

花了几个小时后，问题终于解决了：

如果以上都没有帮助您解决问题，请尝试将您的 api 密钥放入 values/strings.xml

```
<meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="@string/map_key"/>

<?xml version="1.0" encoding="utf-8"?>
<resources>
<string name="map_key">YOUR_KEY</string>
</resources> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-10T06:26:35.900

I did everything what was required to achieve this task. My key, manifest, code etc. were all right. But, in the end after wasting a lot of time, the debug keystore which I was using was the wrong one. It's was all about the SHA1 fingerprint after all.

# cakephp - CakePHP 2：根据视图在元素中传递按钮

> ID：13727993
> 
> 赞同：0
> 
> 时间：2012-12-05T16:37:31.870
> 
> 标签：cakephp, twitter-bootstrap, block, cakephp-2.2

我想将 cakePHP 2 中的按钮（注意：我使用的是 Twitter Bootstrap 2.2.1）传递给元素`app/View/Elements/Toolbar.ctp`

```
<div class="actions">
<?php echo $this->Html->link(__('New User'), array('action' => 'add'), array('class' => 'btn btn-small',)); ?>
</div> 
```

上面是按钮的示例。根据视图，我想通过不同的操作传递不同的按钮。我怎么做？用`Elements`,`Blocks`还是`requestaction()`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:22:48.677

cakephp 的做法看起来像这样

在视图中

```
<?= $this->element('toolbar', array('button' => $button_type)) ?> 
```

在元素中将有一个称为`$button`可用的变量。请注意，`$button_type`变量在元素中也可用。

应该这样做

# c# - 如何在 TreeView 中插入节点作为第一个？

> ID：13727994
> 
> 赞同：0
> 
> 时间：2012-12-05T16:37:32.773
> 
> 标签：c#, .net, winforms

我有树视图结构，我需要实现功能：

```
public void InsertNodeAtTheBeginning(TreeView tree, TreeNode node)
{
  tree.Nodes.Add_(node); // node should be added as tree.Nodes[0]
} 
```

并且每个其他节点都应该偏移：`tree.Nodes[1]`... `tree.Nodes[tree.Nodes.Count + 1]`。树中的所有节点的`.Level`属性都等于`0`（所以它就像一个列表）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T16:42:02.803

尝试`TreeView.Nodes.Insert(0, ...)`

# iphone - 一些 iOS 错误消息中的破折号是怎么回事？

> ID：13727998
> 
> 赞同：1
> 
> 时间：2012-12-05T16:37:43.337
> 
> 标签：iphone, ios, logging, error-log

我有时会在我的 iOS 设备的日志文件中看到错误消息，其中至少有部分文本在每个字母之间包含破折号，如下所示：

```
... ’-t -b-e -c-o-m-p-l-e-t-e-d-. -(-k-C-F-E-r-r-o-r-D-o-m-a-i-n-C-F-N-e-t-w-o-r-k -e-r-r-o-r -2-.-)-" -U-s-e-r-I-n-f-o-=-0-x-1-4-5-f-d-0 -{-k-C-F-G-e-t-A-d-d-r-I-n-f-o-F-a-i-l-u-r-e-K-e-y-=-8-} 
```

我只是好奇这可能有什么意义（当然对可读性没有太大作用，但我想它很容易发现），或者它是否只是一个随机问题。（我的设备已越狱，如果这有影响的话）。

更新：我能够通过`NSLog`在开头使用非 ASCII 字符调用类似地格式化日志消息：

```
NSLog(@"€ Line will be formatted strangely"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T01:24:19.750

我怀疑该消息是 UTF16（或其他一些双字节字符集），并且在转换为 NSString 时被错误地映射为 ASCII。

# .net - 如何在 Powershell 中将目录中的所有文件名作为逗号分隔的字符串获取？

> ID：13727999
> 
> 赞同：5
> 
> 时间：2012-12-05T16:37:47.923
> 
> 标签：.net, powershell, directory

我想将目录中的所有名称作为逗号分隔的字符串获取，以便可以将它们作为参数传递给 cmdlet。

如何在 Powershell 中将目录中的所有文件名作为逗号分隔的字符串获取？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:48:51.863

一种方法是：

```
 (dir  | % { $_.basename }) -join ',' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:49:49.580

这应该有效：

```
(ls C:\PATH\TO\FOLDER | select -expandproperty name) -join ',' 
```

如果那里有您想要避免的子文件夹：

```
(ls C:\PATH\TO\FOLDER | ?{$_.PSIsContainer -eq $false} | select -expandproperty name) -join ',' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-13T20:19:39.080

最快/最短的方式：

```
(ls).name -join ',' 
```

对于特定的文件夹路径：

```
(ls path\to\folder).name -join ',' 
```