# StackOverflow 问答 12860000-12860999

# android - Android添加布局孩子

> ID：12860002
> 
> 赞同：0
> 
> 时间：2012-10-12T13:21:40.800
> 
> 标签：android, android-linearlayout, addchild

我正在创建自己的自定义 LinearLayout，并扩展它的类，我需要使用 addview 方法将子级添加到布局中，

我需要访问在构造函数之后设置的标签，所以我需要知道做这样的事情的最佳实践

这是我的代码：

```
public class MyLayout extends LinearLayout {

    public MyLayout(Context context) {
        super(context);

        MyTag tag = (MyTag) getTag();

        // Parent layout
        setOrientation(VERTICAL);
        setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        setBackgroundColor(tag.getBgColor());
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:49:30.987

> 我需要访问在构造函数之后设置的标签，所以我需要知道做这样的事情的最佳实践

如果您在调用构造函数**后**设置标签，那么您的代码将不起作用，`tag`将是`null`. 如果您打算`LinearLayout`仅在代码中使用自定义（而不是在 xml 布局中），那么您始终可以调整构造函数以获取额外的`MyTag`对象：

```
// ...
public MyLayout(Context context, MyTag theTag) {
    super(context);
    MyTag tag = theTag;
//... 
```

当然，如果您可以`MyTag`在调用构造函数的那一刻（当您实例化一个类型的新对象时`MyLayout`）构建一个有效的对象，这将起作用。无论如何，如果您的代码如此依赖于`MyTag`对象，那么您应该始终在类中有一个默认值，`MyLayout`以便您可以在尚未设置标签时使用它。

# css - 背景png不显示？

> ID：12860003
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:21:43.010
> 
> 标签：css, image, png

这个网站（[点击](http://justicejewelers.com)）应该看起来像这个网站（[点击](http://justicejewelers.rcmhosting.com)）大部分。第一个链接在 BVCommerce 购物车中，第二个是最初设计的 HTML 和 CSS。您会在第一个链接上注意到中心内容略微偏离中心，并且缺少带有阴影的背景，这是我的主要问题。（应该显示的图像是 images/bg.png）

第一个网站有一些错误，但我真的只是想让这个背景正确显示。

第一个网站 CSS：justicejewelers.com/css/styles.css

第二个网站CSS：justicejewelers.rcmhosting.com/css/styles.css

第一个网站图片：justicejewelers.com/images/bg.png

第二个网站图片：justicejewelers.rcmhosting.com/images/bg.png

**更新**

我结合了条形图和背景 gif 以节省一些心痛。但是关于如何让整个中心区域正确地向右移动的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:28:15.140

我不知道你的主要问题，但在第一页我会改变头部的文字。由于垃圾邮件保护，Google 等搜索机器人通常会忽略头部信息过多的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:30:18.047

我相信你在 CSS 中有这样的东西：

```
.wrapper { background: url("images/bg2.gif") repeat-y scroll center top transparent; padding-top: 0; } 
```

它覆盖了这个：

```
.wrapper {
background: url("../images/bg.png") repeat-y scroll center top transparent;
padding-top: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:42:52.863

关于后台错误，Firebug 显示 no-repeat ：

/BVModules/Themes/Painted%20Paper/styles/styles.css：

```
url("../images/bg.png") no-repeat scroll left top transparent; 
```

此外，您的#maincontent div 小于背景图像的宽度（您在第一个网站中没有填充（1016 像素与 960 像素）

我想您应该删除 /BVModules/Themes/Painted%20Paper/styles/styles.css CSS 链接并尝试使用 Firebug 之类的助手 :)

# python - 无法访问 HTML 表单上的文本框

> ID：12860010
> 
> 赞同：0
> 
> 时间：2012-10-12T13:21:51.350
> 
> 标签：python, forms, login, input, mechanize

我找不到登录文本框。我可以选择表格，但找不到输入文本。有人能帮我吗？

我正在尝试在[http://www.safilonet.safilo.com/](http://www.safilonet.safilo.com/)上使用此脚本自动登录 谢谢

这是代码和错误消息：

```
def login(self):
url = self._baseUrl + '/webapp/commerce/safilo/jsp/logon.jsp?lng=E&cpy=10'
self._br.open(url, timeout=30.0)
self._br.select_form(name='logon') 
print 'entrou'
self._br.form['login'] = self._username
self._br.form['password'] = self._password
self._br.submit()

if self._verbose: print 'Login successful.\n'

self.last_logged_in = datetime.datetime.now() 
```

错误信息：

```
Traceback (most recent call last):
File "E:\billy\Projects\GlassInteg\trunk\src\run.py", line 90, in <module> go()
File "E:\billy\Projects\GlassInteg\trunk\src\run.py", line 39, in go ss = SafiloSupplier(updateBrands=True)
File "E:\billy\Projects\GlassInteg\trunk\src\GlassInteg\Supplier.py", line 283, in __init__
if login: self.login()
File "E:\billy\Projects\GlassInteg\trunk\src\GlassInteg\Supplier.py", line 307, in login
self._br.form['login'] = self._username
File "build\bdist.win32\egg\mechanize\_form.py", line 2780, in __setitem__
File "build\bdist.win32\egg\mechanize\_form.py", line 3101, in find_control
File "build\bdist.win32\egg\mechanize\_form.py", line 3185, in _find_control 
```

mechanize._form.ControlNotFoundError：没有控件匹配名称“登录”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:48:54.327

根据[W3C 验证器，问题似乎是相关页面包含大量无效 HTML](http://validator.w3.org/check?uri=http%3A%2F%2Fwww.safilonet.safilo.com%2Fwebapp%2Fcommerce%2Fsafilo%2Fjsp%2Flogon.jsp%3Flng%3DE%26cpy%3D10&charset=%28detect+automatically%29&doctype=Inline&ss=1&group=0&verbose=1&user-agent=W3C_Validator%2F1.3)

如您所见，mechanize 无法看到“登录”字段：

```
>>> from mechanize import Browser
>>> br = Browser()
>>> br.open('http://www.safilonet.safilo.com/webapp/commerce/safilo/jsp/logon.jsp?lng=E&cpy=10')
<response_seek_wrapper at 0x1011cc638 whose wrapped object = <closeable_response at 0x1011cc488 whose fp = <socket._fileobject object at 0x1002bd650>>>
>>> br.select_form('logon')
>>> br._pairs()
[('merchant', '23888'), ('lng', 'E'), ('cpy', '10'), ('rightPageURL', 'http://www.safilonet.safilo.com/webapp/commerce/catalog/home.html'), ('password', '')] 
```

如果您可以控制此页面，请尽快修复 HTML。

但是，我假设您没有，所以这里有一些替代选项：

*   使用硒
*   尝试使用直接 POST URL 登录（不确定 mechanize 是否支持此功能）

# nhibernate - C# NHibernate 动态添加 Where 子句 (jqgrid)

> ID：12860014
> 
> 赞同：1
> 
> 时间：2012-10-12T13:21:58.227
> 
> 标签：nhibernate, filtering, nhibernate-criteria, queryover

是否可以将 where 子句动态添加到 NHibernate 查询？

我有一组子句，我需要循环遍历并在需要时添加 Where 子句 - 即，如果用户输入了多个搜索条件。

我可以编写单个查询，没问题，如下所示：获取以“a”开头的所有名称：

```
IEnumerable<Customer> customers = nHibernateSession.Query<Customer>().Where(x => x.Name.StartsWith("a")).ToList(); 
```

但我不知道如何在其中添加另一个 where 子句实际上我需要这样的东西：

```
foreach (clauses in SelectionClauses)
{
    //add a .Where(Clause) to The Session.Query
} 
```

我怀疑 nHibernateSession.Query 不能以这种方式使用......有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:48:18.773

您可以通过执行以下操作使用 Linq 提供程序 (session.Query) 执行此操作：

```
var query = session.Query<MyClass>();

foreach(var clause in clauses)
    query = query.Where(clause.BuildExpression()); 
```

其中 BuildExpression 返回 Expression> 例如

但是，如果您对属性使用字符串名称，这可能会很痛苦，并且使用 session.QueryOver 或 session.CreateCriteria 来获得结果会容易得多，这两者都支持通过名称而不是表达式来查询属性。

# ruby-on-rails - 如何调用设计方法

> ID：12860016
> 
> 赞同：0
> 
> 时间：2012-10-12T13:22:00.787
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我创建控制器：

```
class SigninController < ApplicationController
  def index
  end
  def create
    @user = User.find_by_email(params[:user][:email])
    if @user 
      ....
      sign_in(:user, @user)
    else
      @user = User.new(params...)
      @user.save
      ...
    end
  end
end 
```

我正确地调用sign_in方法吗？

登录/index.html.erb：

```
<h2>Sign in</h2>
<%= form_for(User.new, :as => :user, :url => "signin") do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>
  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>
  <br>
  <div><%= f.submit "Sign in" %></div>
<% end %> 
```

如何调用 devise 的 devise sign_in 和 sign_up 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:50:20.840

试试这个`app/controllers/application_controller.rb`：

```
class ApplicationController < ActionController::Base
  def after_create_path_for(resource)
    sign_in(:user, resource)
  end 
end 
```

这只是一种猜测。我不知道它是否会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:27:36.257

您可以，但在大多数情况下，您不应该创建自定义控制器来登录/注销用户。设计具有为您实现此功能的 session_controller。查看[设计文档](https://github.com/plataformatec/devise)和维基，它有大量的文档。您还可以在那里找到如何自定义视图和控制器行为。

**更新**

如果需要将两种表单（登录和注册）放在一个视图上，您​​可以自定义设计视图。表单动作可能指向不同的标准控制器。我建议使用用户/注册/新表单作为基本表单并添加使用/会话/新表单。

# c# - Visual Studio 如何知道将 Web 服务的参数构建为字节数组？

> ID：12860019
> 
> 赞同：1
> 
> 时间：2012-10-12T13:22:03.947
> 
> 标签：c#, wcf, wsdl

我有一个用于 WCF Web 服务的 wsdl。当我为服务添加对[http://url.svc](http://url.svc)的引用时，Visual Studio 会构建引用，我可以在代码中引用它。其中一个 Web 服务将 byte[] 作为参数之一公开。当我构建客户端时，它知道这一点。但是，当我查看服务的 .wsdl 时，我看不到对字节数组的任何引用。我真的很想知道.net 是如何知道将其用作参数的..？我不知道字节数组是您可以通过网络发送的标准吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:33:04.183

如果您使用的是 DataContractSerializer，则有关不同 .NET 类型如何映射到 WSDL/XSD 的所有详细信息都在[http://msdn.microsoft.com/en-us/library/ms733112.aspx](http://msdn.microsoft.com/en-us/library/ms733112.aspx)中（请参阅“类型/原始映射“ 部分）。特别是，上面的评论者是对的，byte[] 映射到 base64Binary。

# android - Listview 软键盘中的 EditText 问题

> ID：12860020
> 
> 赞同：3
> 
> 时间：2012-10-12T13:22:06.217
> 
> 标签：android, android-edittext, android-softkeyboard

我有一个行布局的 Listview 包含两个 textview 和一个 edittext 在我的活动中我使用

android:windowSoftInputMode="adjustResize|stateHidden"

并且在edittext参数是：

```
<EditText
    android:id="@+id/et_quantity_test"
    android:layout_width="0dp"
    android:layout_weight="2"
    android:layout_height="wrap_content"
    android:inputType="numberSigned" 
    android:gravity="center_vertical|left"
    android:layout_gravity="center_vertical|left"
    android:paddingLeft="3dp"
    android:imeOptions="actionNext"
    android:layout_marginRight="10dp"
    ></EditText> 
```

问题：当我点击edittext时，键盘显示，但edittext字段失去焦点，键盘类型是字母，而不是数字..谢谢

这是主要布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

     <RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp">
<ImageButton
    android:id="@+id/img_back"
    android:layout_width="wrap_content"
    android:layout_marginTop="10dp"
    android:layout_marginRight="20dp"
    android:layout_height="wrap_content"
    android:src="@drawable/navigation_back" 
    android:layout_alignParentRight="true"/>

<TextView 
    android:id="@+id/tv_title_testing"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="@string/test_title"
    android:gravity="center_vertical"
    android:layout_centerInParent="true"
    android:textAppearance="@android:style/TextAppearance.Holo.Medium"
    />
</RelativeLayout>

<Chronometer
    android:id="@+id/chronometer_testing"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="gone"/>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_vertical|center_horizontal"
    android:gravity="center_vertical|center_horizontal"
    android:orientation="vertical" >

<LinearLayout 
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="horizontal"
    android:layout_gravity="center_vertical|center_horizontal"
    android:gravity="center_vertical|center_horizontal">
<TextView
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="0.65"
    android:layout_gravity="left|center_vertical"
    android:layout_marginLeft="10dp"
    android:gravity="center_horizontal|center_vertical"
    android:text="@string/test_sub_title"
    android:textAppearance="@android:style/TextAppearance.Holo.Medium" />

</LinearLayout>
<!-- <RelativeLayout 
    android:layout_height="match_parent"
    android:layout_width="fill_parent"> -->
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    >

            <ListView
                android:id="@+id/lv_product_items_testing"
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="9"
                transcriptMode="alwaysScroll" 
                android:scrollbars="vertical" />

        <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="0dp"
                android:layout_weight="1"
                android:id="@+id/ll_conf"
                android:layout_gravity="center_vertical|center_horizontal"
                android:gravity="center_vertical|center_horizontal"
                android:orientation="horizontal" >

            <Button
                android:id="@+id/btn_confirm_test_ok"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="15dp"
                android:layout_gravity="center_horizontal"
                android:text="@string/test_conf" />

            <Button
                android:id="@+id/btn_confirm_report"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginRight="10dp"
                android:layout_gravity="center_horizontal"
                android:text="@string/test_report" />
            </LinearLayout>   

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:26:31.943

首先`android:windowSoftInputMode="adjustPan"`在 Manifest 文件中的 Activity 中记下以设置 listview 和 Edittext 并`android:inputType="numberSigned"`从 Edittext 中删除有助于当您单击 EditText 键盘打开时按字母顺序打开..

# jquery - 表内的 JQuery 选择器表

> ID：12860021
> 
> 赞同：0
> 
> 时间：2012-10-12T13:22:12.757
> 
> 标签：jquery, jquery-selectors

嗨，这里是我想用 jquery 选择但无法选择的元素的 xpath，仅在第一次出现时。请帮我。XPATH ::

“/html/body/table/tbody/tr/td[2]/table”

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:01:53.000

```
$("table table"); 
```

或更具体：

```
$("table > tbody > tr > td:th-child(2) > table"); 
```

不过最好有身份证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:02:22.597

您可能会发现给表格一个 ID 来选择更容易，但其他类似以下混乱的东西应该可以工作。

```
$table = $("html body table tbody tr td:eq(2) table").first(); 
```

# python - 如何在 Django 模板上访问多维字典

> ID：12860022
> 
> 赞同：1
> 
> 时间：2012-10-12T13:22:12.107
> 
> 标签：python, django, dictionary, django-templates

我正在尝试访问 Django 模板中的多维字典。我可以查看一级键，但由于二级键，我什么都看不到。在示例字典中以这种方式组成：

```
dictionary = {}
dictionary[first_level] = {}
dictionary[first_level][second_level] = {}
...

and so on 
```

从我使用的 Django 模板：

```
{% for flk in dict %}
    <!-- Using nested for from the following, no output is shown -->
    {% for slk in dict.flk %}
        <th>First level key : {{ flk }} Second level key : {{ slk }}</th>
    {% endfor %}
    <!-- -->
{% endfor %} 
```

我必须使用模型还是可以使用这本字典来完成？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:03:28.343

我在[这个页面](http://www.zedkep.com/blog/index.php?/archives/85-Iterating-over-a-dictionary-in-Django-templates.html)上找到了解决方案 基本上代码变成了

```
{% for flk, flv in dict.items %}
    {% for slk, slv in flv.items %}
        <th>First level key {{ flk }} Second level key {{ slk }}</th>
    {% endfor %}
{% endfor %} 
```

其中每个字典都分解为键`(flk, slk)`和值`(flv, slv)`。

# ant - 元素“sonar:sonar”的前缀“sonar”未绑定

> ID：12860024
> 
> 赞同：14
> 
> 时间：2012-10-12T13:22:23.620
> 
> 标签：ant, sonarqube

我有一个看起来像这样的 build.xml 文件：

```
<taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml" classpath="/path/sonar-ant-task.jar"/>

<target name="sonar">       
    <sonar:sonar/>
</target> 
```

当我运行文件时，我得到：

```
The prefix "sonar" for element "sonar:sonar" is not bound. 
```

我缺少任何明显的东西吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T18:45:05.783

您在`project`Ant 脚本的顶部元素中缺少名称空间声明。

`xmlns:sonar="antlib:org.sonar.ant"`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-08T05:59:15.177

在 ant 中你不能使用 . 在下面尝试，如果您要设置任何属性，请在 xml 标记中使用键值对。分配 xml 标签的值使用属性。

```
 <sonar:sonar xmlns:sonar="antlib:org.sonar.ant">

</sonar:sonar> 
```

# jquery - 我的手风琴滑块在 Firefox 中堆叠图像，但在 Chrome 和 IE 中运行良好

> ID：12860026
> 
> 赞同：0
> 
> 时间：2012-10-12T13:22:25.347
> 
> 标签：jquery

这是我的网站： http: [//www.blueridgelibertyproject.com/](http://www.blueridgelibertyproject.com/)

滑块在 Chrome 和 IE 中运行良好，但在 Firefox 和可能的 Safari 中刷新后图像堆叠没有文本。

请帮帮我。这几天一直困扰着我，我很想把它修好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:30:28.143

您在 Firefox 中遇到 JavaScript 错误：

从错误控制台：

时间戳：12/10/2012 14:29:42 错误：TypeError：jQuery(".sf-menu").mobileMenu 不是函数源文件： http: [//www.blueridgelibertyproject.com/](http://www.blueridgelibertyproject.com/) 行：342

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T08:42:14.270

将您的代码初始化发布在 div 下方：

例子：

```
<!-- first the images for the slider -->
<div id="slide">
<img src="/headslide2.jpg" alt="headslide2" />
<img src="/headslide.jpg" alt="headslide" />
</div>
<!-- next the slide init -->
<script>
jQuery('#slide').carouFredSel({});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:32:08.640

您应该考虑使用 firebug 或 google 开发者工具。这些是您的网站生成的 html 错误：

```
carouFredSel: No element found for "#portfolio-scroll".
carouFredSel: No element found for "ul.widget-carousel".
Failed to load resource: the server responded with a status of 404 (Not Found)   http://www.blueridgelibertyproject.com/img/arrows-ffffff.png
carouFredSel: No element found for "#images".
carouFredSel: No element found for "#thumbs".
carouFredSel: No element found for "ul.blog-gallery". 
```

# android - 来自画廊的Android图像方向错误

> ID：12860031
> 
> 赞同：1
> 
> 时间：2012-10-12T13:22:57.807
> 
> 标签：android, image, android-intent, orientation, exif

我正在使用意图从 Android 库中加载图像。在我尝试过的一些设备上，它运行良好，但在某些设备上，图像加载方向错误。它通常以横向而不是纵向显示。

我做了一些搜索，发现了一些关于 EXIF 数据的建议，并尝试了以下方法：

```
 if(resultCode == RESULT_OK){

                Uri selectedImage = data.getData();
                String[] filePathColumn = {MediaStore.Images.Media.DATA};

                Cursor cursor = getContentResolver().query(
                                   selectedImage, filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                cursor.close();

                String myFile = selectedImage.toString();
                int orientation = 0;
                try {
                    ExifInterface exif = new ExifInterface(myFile);
                    orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, 1);
                } catch (IOException e) {
                    e.printStackTrace();
                }

                Bitmap yourSelectedImage = BitmapFactory.decodeFile(filePath);
                Bitmap rotatedBitmap = null;
                Matrix matrix = new Matrix();

                switch(orientation){

                    case 3:

                        matrix.postRotate(180);
                        break;

                    case 6:

                        matrix.postRotate(90);
                        break;

                    case 8:

                        matrix.postRotate(270);
                        break;

                }

                rotatedBitmap = Bitmap.createBitmap(yourSelectedImage, 0, 0, yourSelectedImage.getWidth(), yourSelectedImage.getHeight(), matrix, true);
                _mJazzView.setBackground(rotatedBitmap);

            } 
```

这并没有解决问题，在尝试了进一步搜索的几种变体后，我似乎无法让它以正确的方向加载。

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-30T16:32:27.437

希望现在提供帮助还为时不晚！我遇到了这个问题，我想很多人都没有意识到它，因为他们没有很多设备可以测试。无论如何，这是我通过查看这个基于 AOSP的作物库[https://github.com/jdamcd/android-crop的类找到的解决方案。](https://github.com/jdamcd/android-crop)这是一个复制粘贴工作，所以它应该很容易进入您的项目。为格式化道歉，我与这个评论框搏斗，输了。

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_GET_CONTENT);
intent.setType("image/*");
startActivityForResult(Intent.createChooser(intent,"whatever you want",1);

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);
    switch (requestCode)
    {
        case 1:
        if (resultCode == RESULT_OK)
        {
            Uri selectedImage = data.getData();
            int rotationInDegrees = getRotationInDegrees(selectedImage);
        }
        break;
    }
 }

private int getRotationInDegrees(Uri uri)
{
     return ImageOrientationUtil
    .getExifRotation(ImageOrientationUtil
    .getFromMediaUri(
        this,
        getContentResolver(),
        uri));

} 
```

ImageOrientationUtil.class

```
import android.content.ContentResolver;
import android.content.Context;
import android.database.Cursor;
import android.media.ExifInterface;
import android.net.Uri;
import android.os.ParcelFileDescriptor;
import android.provider.MediaStore;
import android.support.annotation.Nullable;
import android.text.TextUtils;
import java.io.Closeable;
import java.io.File;
import java.io.FileDescriptor;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;

public class ImageOrientationUtil
{

    private static final String SCHEME_FILE = "file";
    private static final String SCHEME_CONTENT = "content";

    public static void closeSilently(@Nullable Closeable c) {
        if (c == null) return;
        try {
            c.close();
        } catch (Throwable t) {
       // Do nothing
     }
   }

   public static int getExifRotation(File imageFile) {
       if (imageFile == null) return 0;
       try {
           ExifInterface exif = new ExifInterface(imageFile.getAbsolutePath());
    // We only recognize a subset of orientation tag values
    switch (exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_UNDEFINED)) {
        case ExifInterface.ORIENTATION_ROTATE_90:
            return 90;
        case ExifInterface.ORIENTATION_ROTATE_180:
            return 180;
        case ExifInterface.ORIENTATION_ROTATE_270:
            return 270;
        default:
            return ExifInterface.ORIENTATION_UNDEFINED;
    }
    } catch (IOException e) {
  //  Log.e("Error getting Exif data", e);
    return 0;
   }
}

@Nullable
public static File getFromMediaUri(Context context,
ContentResolver  resolver,  Uri uri) {
if (uri == null) return null;
if (SCHEME_FILE.equals(uri.getScheme())) {
     return new File(uri.getPath());
   } else if (SCHEME_CONTENT.equals(uri.getScheme())) {
    final String[] filePathColumn = { MediaStore.MediaColumns.DATA,   MediaStore.MediaColumns.DISPLAY_NAME };
    Cursor cursor = null;
    try {
        cursor = resolver.query(uri, filePathColumn, null, null, null);
        if (cursor != null && cursor.moveToFirst()) {
            final int columnIndex = (uri.toString().startsWith("content://com.google.android.gallery3d")) ?
                cursor.getColumnIndex(MediaStore.MediaColumns.DISPLAY_NAME) :
                cursor.getColumnIndex(MediaStore.MediaColumns.DATA);
            // Picasa images on API 13+
            if (columnIndex != -1) {
                String filePath = cursor.getString(columnIndex);
                if (!TextUtils.isEmpty(filePath)) {
                    return new File(filePath);
                }
            }
        }
    } catch (IllegalArgumentException e) {
        // Google Drive images
        return getFromMediaUriPfd(context, resolver, uri);
    } catch (SecurityException ignored) {
        // Nothing we can do
    } finally {
        if (cursor != null) cursor.close();
    }
}
return null;
}

private static String getTempFilename(Context context) throws IOException {
    File outputDir = context.getCacheDir();
    File outputFile = File.createTempFile("image", "tmp", outputDir);
    return outputFile.getAbsolutePath();
}

@Nullable
private static File getFromMediaUriPfd(Context context, ContentResolver    resolver, Uri uri) {
if (uri == null) return null;

FileInputStream input = null;
FileOutputStream output = null;
try {
    ParcelFileDescriptor pfd = resolver.openFileDescriptor(uri, "r");
    FileDescriptor fd = pfd.getFileDescriptor();
    input = new FileInputStream(fd);

    String tempFilename = getTempFilename(context);
    output = new FileOutputStream(tempFilename);

    int read;
    byte[] bytes = new byte[4096];
    while ((read = input.read(bytes)) != -1) {
        output.write(bytes, 0, read);
    }
    return new File(tempFilename);
   } catch (IOException ignored) {
    // Nothing we can do
  } finally {
    closeSilently(input);
    closeSilently(output);
  }
  return null;
  }
} 
```

# css - 应用过滤器时，Slickgrid 删除 CSS

> ID：12860036
> 
> 赞同：2
> 
> 时间：2012-10-12T13:23:05.250
> 
> 标签：css, filter, slickgrid

我将 SlickGrid 与 dataView 一起使用。当网格加载时，我应用了条件格式来突出显示特定行：

```
grid.addCellCssStyles("highlight", rowColor);
grid.invalidate();
dataView.syncGridCellCssStyles(grid, "highlight")
grid.render(); 
```

应用过滤器时，我想删除 css 样式。我努力了：

```
grid.removeCellCssStyles("highlight");
dataView.syncGridCellCssStyles(grid, "highlight") 
```

应用过滤器时，`render()`会调用两次。第一次，样式被成功删除，但第二次`render()`运行它被重新应用。第一次`render()`被调用`onRowCountChanged()`，第二次被调用`onRowsChanged()`。似乎在第二次渲染中，`updateCellCssStylesOnRenderedRows(addedHash, removedHash)`正在使用行的缓存版本来重新应用样式。有趣的是，过滤器隐藏的所有行的样式都会被清除，但未过滤的行会保留样式。因此，当我删除过滤器时，隐藏的行已删除样式，但未过滤的行仍突出显示。

附注，我是一个完全的菜鸟。任何帮助是极大的赞赏。

**更新：**在 slick.dataview.js, 中`syncGridCellCssStyles(grid, key)`，我注释掉`storeCellCssStyles(grid.getCellCssStyles(key));`并达到了我想要的结果。我显然不想编辑源代码作为我的最终解决方案，但希望这将有助于诊断问题。见下面的结果：

> 函数syncGridCellCssStyles（网格，键）{
> 
> ```
>  var hashById;
>   var inHandler;
> 
>   // since this method can be called after the cell styles have been set,
>   // get the existing ones right away
>   //storeCellCssStyles(grid.getCellCssStyles(key));
> 
>   function storeCellCssStyles(hash) {
>     hashById = {};
>     for (var row in hash) {
>       var id = rows[row][idProperty];
>       hashById[id] = hash[row];
>     }
>   }
> 
>   grid.onCellCssStylesChanged.subscribe(function(e, args) {
>     if (inHandler) { return; }
>     if (key != args.key) { return; }
>     if (args.hash) {
>       storeCellCssStyles(args.hash);
>     }
>   });
> 
>   this.onRowsChanged.subscribe(function(e, args) {
>     if (hashById) {
>       inHandler = true;
>       ensureRowsByIdCache();
>       var newHash = {};
>       for (var id in hashById) {
>         var row = rowsById[id];
>         if (row != undefined) {
>           newHash[row] = hashById[id];
>         }
>       }
>       grid.setCellCssStyles(key, newHash);
>       inHandler = false;
>     }
>   });
> } 
> ```

# javascript - 如果只有 1 个选项可用，则隐藏选择框本身

> ID：12860037
> 
> 赞同：0
> 
> 时间：2012-10-12T13:23:08.777
> 
> 标签：javascript

如果只有 1 个选项可用，如何隐藏选择框。（它是一个动态选择框，由另一个选择框更新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:25:22.853

```
if($('#select_list>option').length == 1)
  $('#select_list').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:28:46.920

将其放在更新下拉选项的代码的末尾（`selectid`应该是`select`元素的 id）：

```
if ($('select#selectid option').length == 1)
    $('select#selectid option').hide();
else
    $('select#selectid option').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:42:54.320

```
var selectBox  = document.getElementById("selectBox");
if(selectBox.length == 1)
{
    selectBox.style.cssText = "display:none";
} 
```

# python - 选择目录后，QtGui.QFileDialog.getExistingDirectory() 窗口不会关闭（PyQt）

> ID：12860040
> 
> 赞同：1
> 
> 时间：2012-10-12T13:23:24.980
> 
> 标签：python, ubuntu, pyqt, qfiledialog

我正在尝试在程序中获取带有`QtGui.QFileDialog.getExistingDirectory()`对话框窗口的路径，以便在`python`程序的其余部分在控制台输出中时为用户简化操作。为此，我有这段代码：

```
import sys, os
from PyQt4 import QtGui

def getpath(filename,
            noPathFileMsg='',
            wrongFolderMsg='',
            selectFolderMsg=''):

    try:
        f = open('./'+filename,'r')
    except IOError:
        folder = get_new_path(filename,
                                     noPathFileMsg, 
                                     selectFolderMsg)
    else:
        folder = f.readline()
        f.close()
        currentDir = os.getcwd()
        try:
            os.chdir(folder)
        except:
            folder = get_new_path(filename,
                                         wrongFolderMsg,
                                         selectFolderMsg)
        else:
            os.chdir(currentDir)
    finally:
        return folder

def get_new_path(filename,
                 infoMsg,
                 selectFolderMsg):

    app = QtGui.QApplication(sys.argv)
    QtGui.QMessageBox.about(None, 'No folder', infoMsg)
    folder = QtGui.QFileDialog.getExistingDirectory(None, selectFolderMsg)
    app.exit()
    if os.name == 'posix':
        folder += '/'
    elif os.name == 'nt':
        folder += '\\'
    g = open('./'+filename,'w')
    g.write(folder)
    g.close()
    return folder
if __name__ == '__main__':
    folderPath = getpath('pathtofolder.txt',
                         noPathFileMsg='The path to the folder has not been set',
                         wrongFolderMsg='The path folder saved cannot be reached',
                         selectFolderMsg='Please select a folder')
    print folderPath
    var = input('The program stopped at the input instruction, the dialog window should now be closed!') 
```

如果我调用 getpath 函数，对话框窗口将保持打开状态，直到调用该函数的脚本结束，而不是在此指令之后关闭：

```
folder = QtGui.QFileDialog.getExistingDirectory(None, selectFolderMsg) 
```

如果您运行此代码，它将创建一个文件，该文件将与对话框窗口一起保存的目录保存在运行脚本的文件夹中。

我做错什么了？

顺便说一句，我在 Ubuntu 12.04 上。谢谢！干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:40:46.377

在 VM 中设置 Ubuntu 12.04 后，我可以确认单击“打开”后对话框没有正确关闭。

该问题似乎是由于试图退出函数`QApplication`内部引起的`get_new_path`。

相反，您应该创建一个单一的全局`QApplication`对象，并且仅在脚本完成时退出它：

```
def get_new_path(filename, infoMsg, selectFolderMsg):

    QtGui.QMessageBox.about(None, 'No folder', infoMsg)
    folder = QtGui.QFileDialog.getExistingDirectory(None, selectFolderMsg)
    ...

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)

    folderPath = getpath(...)

    app.exit() 
```

# maven - Maven神器下载？

> ID：12860048
> 
> 赞同：0
> 
> 时间：2012-10-12T13:24:00.727
> 
> 标签：maven, download, artifacts

我是 Maven 世界的新手。我的组织有 Maven 发布过程，所有工件都保存在我们的 Maven 远程仓库中，所以我想向我们的一些客户提供一些特定的工件版本。如何下载特定模块版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:31:03.363

如果您的内部存储库没有像[Nexus](http://www.sonatype.org/nexus/)这样的网络界面，您可以创建一个独立`pom.xml`的 ，将所需的版本输入`dependencies`并调用`mvn package`。

如果您需要一些示例 pom 和额外信息来帮助您入门，您可以查看[此处](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)和[此处](http://maven.apache.org/pom.html)

编辑：我忘了您可能希望工件出现在与 pom 所在的文件夹相同的文件夹中。默认的 maven 设置是将其下载到子文件夹的子文件夹中。子文件夹`/yourHomeFolder/.m2/repository/`的名称是工件的组 ID。

EDIT2：这是一个示例设置，用于将 jar 下载到您选择的文件夹中。如果您删除`<outpuDirectory>`设置，工件 jar 将被下载到子文件夹`/dependendies`中。执行绑定到`validate`阶段，所以只需调用`mvn validate`

```
<build>
...  
    <plugins>
<!-- Dependency plugin to download the configured dependencies (transitive). -->
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.4</version>
        <execution>
            <execution>
                <id>download-jar</id>
                <phase>validate</phase>
                <goals>
                    <goal>copy-dependencies</goal>
                </goals>
                <configuration>
                    <outputDirectory>put/your/directory/here</outputDirectory>
                </configuration>
            </execution>
        </executions>
    </plugin> 
```

# android - 使用 Ruby 编写 Android 模拟器 Shell 脚本

> ID：12860052
> 
> 赞同：3
> 
> 时间：2012-10-12T13:24:13.210
> 
> 标签：android, ruby

我们正在开发一个 ruby​​ 脚本，它执行一堆 shell 命令来启动模拟器并运行一些葫芦测试。

```
PID = fork do
    Signal.trap('HUP') { puts 'PROCESS ENDED'; exit }
    exec 'emulator -avd TestDevice1'
end

fork do
    sleep(55)
    exec 'adb shell input keyevent 82'
end

fork do
    sleep(60)
    exec 'calabash-android run ~/MyApp/MyApp.apk'
    Process.Kill('HUP', PID)
end 
```

我们目前正在使用 sleep 命令，以便在模拟器完全准备好之前不会运行 calabash 测试。这并不理想。是否有用于检查设备是否准备就绪的 Android 命令？我的意思是Android已启动并显示锁定屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-15T07:34:13.150

我发现检测模拟器是否可以使用以及 Calabash 启动安装过程的最可靠方法是检测模拟器何时`bootanim`停止。

您可以在终端中使用 ADB 检查模拟器是否已完成手动启动：

`adb shell getprop init.svc.bootanim`

作为 Calabash 测试套件的一部分，我在 Rake 命令中有以下内容，它可以解决问题：

```
booting = ''

while booting != 'stopped'
  booting = `adb shell getprop init.svc.bootanim`.strip
  puts 'Waiting for emulator to boot'
  sleep 2
end 
```

希望这对你有用！

# java - java流中的可序列化或串行版本

> ID：12860056
> 
> 赞同：1
> 
> 时间：2012-10-12T13:24:22.740
> 
> 标签：java, serialization, objectoutputstream, serialversionuid

为什么我会收到此错误？虽然我已经设置了串行版本，但我无法完成我的工作。实际上我正在尝试从 objectoutputstream 读取。我需要来自对象输出流的 imageicon 数据，并且在那一行出现错误。我该怎么办？

我收到错误的行是：

1.  ImageIcon imageIcon = (ImageIcon) cObjectInputStream.readObject();
2.  java.io.InvalidClassException: javax.swing.ImageIcon; 本地类不兼容：流 classdesc serialVersionUID = -962022720109015502，本地类 serialVersionUID = 532615968316031794 at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562) at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583) at java.io .ObjectInputStream.readClassDesc(ObjectInputStream.java:1496) 在 java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732) 在 java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329) 在 java.io.ObjectInputStream.readObject( ObjectInputStream.java:351) 在 remoteserver.ClientScreenReciever.run(ClientScreenReciever.java:34)

# php - 如何在 PHP 中执行 WkHtmlToPdf 命令？

> ID：12860058
> 
> 赞同：0
> 
> 时间：2012-10-12T13:24:39.667
> 
> 标签：php, pdf, command-line, pdf-generation, wkhtmltopdf

> **可能重复：**
> [如何让 WKHTMLTOPDF 通过 PHP 执行？](https://stackoverflow.com/questions/5663814/how-do-i-get-wkhtmltopdf-to-execute-via-php)

我正在使用 Wkhtmltopdf、Windows 操作系统、Xampp 从命令行将 HTML 转换为 A4 PDF 文档。这工作正常。但是我怎样才能在 PHP 中实现这一点？我使用的 Windows 命令是：

```
D:\Program Files\wkhtmltopdf>wkhtmltopdf.exe http://www.google.com E:/d.pdf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:32:16.063

PHP 提供了多种运行外部命令行字符串的方法。

*   [反引号运算符](http://php.net/manual/en/language.operators.execution.php)
*   [`shell_exec()`](http://php.net/manual/en/function.shell-exec.php)
*   [`system()`](http://php.net/manual/en/function.system.php)
*   [`exec()`](http://php.net/manual/en/function.exec.php)
*   [`passthru()`](http://www.php.net/manual/en/function.passthru.php)

你应该使用哪一个取决于你想要做什么——即你是否需要从命令中获取结果到你的 PHP 代码；是否要将结果输出到浏览器；您是否希望 PHP 程序在继续之前等待外部代码完成...

您需要阅读上面链接的手册页，以确定哪些选项最适合您的需求。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:34:28.973

还有一个为 wkhtmltopdf 提供 PHP 绑定的项目：

*   [php-wkhtmltox](https://github.com/mreiferson/php-wkhtmltox) (https://github.com/mreiferson/php-wkhtmltox)

它实际上链接在[wkhtmltopdf 主页上](http://code.google.com/p/wkhtmltopdf/)

# c# - 为什么 Dapper 示例中的 #（哈希）

> ID：12860060
> 
> 赞同：7
> 
> 时间：2012-10-12T13:24:45.517
> 
> 标签：c#, dapper

我只是从 Dapper“手册”中阅读这个示例：

```
connection.Execute(@"
  set nocount on 
  create table #t(i int) 
  set nocount off 
  insert #t 
  select @a a union all select @b 
  set nocount on 
  drop table #t", new {a=1, b=2 })
   .IsEqualTo(2); 
```

#t 是某种特殊的语法吗？还是他们只是为了迷惑我？:)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T13:29:55.193

是的，`#`这意味着 TSQL 中的一些重要的东西——一个名为`foo`永久的表，对于那个 db/schema。一个名为的表`#foo`是一个临时表 - 它只存在*于该连接*，并在连接关闭或重置时被删除。一个名为的表`##foo`是一个*全局*临时表，它存在于任何地方，但它是临时的。这主要用于批量移动数据时。

这里的使用`#t`是为了让表只存在于那个连接上，所以我们可以简单地重新运行测试。

此外，名为*table-variable*`@foo`或*table-valued-parameter*的表仅存在于该命令/存储过程中。

# codeigniter - CodeIgniter：从 Config 访问语言文件？

> ID：12860061
> 
> 赞同：2
> 
> 时间：2012-10-12T13:24:48.023
> 
> 标签：codeigniter, codeigniter-2

在我的一个配置文件中，我想访问语言行项目。我怎样才能做到这一点？我尝试获取一个 CI 实例并以这种方式访问​​它（例如`$CI->lang->line('foo')`），但这不起作用。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:50:31.020

制作`pre_controller`将在每个请求中设置配置项的钩子。

```
$CI = &get_instance();
$CI->lang->load('filename');
$CI->config->set_item('item_name', $CI->lang->line('language_key')); 
```

或类似的东西。

# javascript - reload() 之前的 Javascript 警报提示

> ID：12860067
> 
> 赞同：0
> 
> 时间：2012-10-12T13:24:53.063
> 
> 标签：javascript

我有一个现有的图标来执行页面的 javascript 重新加载。如何在执行重新加载之前添加带有 ok 或 cancel 的警报？

```
<a href="#" onClick="window.location.reload()"><img src="img/reload.png" alt="Reset" name="Reset" width="32" height="32" align="middle" id="Reset" /></a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:26:52.200

您正在寻找的命令是[`confirm`](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)：

```
if (confirm('Are you sure')) window.location.reload() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:29:48.017

好吧，如果你用谷歌搜索一下，很容易找到。 [http://www.w3schools.com/js/js_popup.asp](http://www.w3schools.com/js/js_popup.asp)

```
confirm("sometext");

if (confirm("Press a button"))
{
  x="You pressed OK!";
  window.location.reload();
}
else
{
  x="You pressed Cancel!";
} 
```

这应该会有所帮助。

# java - 更改设置器的 Eclipse 模板，以便将实际参数命名为“值”？

> ID：12860068
> 
> 赞同：0
> 
> 时间：2012-10-12T13:24:54.830
> 
> 标签：java, eclipse, setter, code-templates

我想要这样编码的设置器：

```
private String name;

public void setName(String value) {
    this.name = value;
} 
```

但是如果我像这样编写eclipse模板

```
${field} = value; 
```

我得到以下错误代码：

```
private String name;

public void setName(String name) {
    this.name = value;
} 
```

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:26:34.660

我的配置如下：

```
${field} = ${param}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:08:50.837

这是不可能实现的，因为您只能影响 setter 的主体，而不是签名。

# java - 作为参数传递时，Java 后增量 (++) 的行为不符合预期

> ID：12860070
> 
> 赞同：7
> 
> 时间：2012-10-12T13:24:56.643
> 
> 标签：java, post-increment, pre-increment

我遇到了以下问题：

```
private void doStuff(int i) {
   if(i>10) {
      return;
   }
   doStuff(i++); 
}

public void publicMethod() {
   doStuff(i);
} 
```

我希望这会运行`doStuff`10 次然后返回。

但是，在再次调用`i++`之前不会执行。`doStuff``0`

结果是一个无限循环。我知道如何解决它，但我想知道这种行为是正确的还是错误的。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-12T13:26:46.000

> 现在我希望它运行 doStuff 10 次然后返回，但是在使用 0 再次调用 doStuff 之前 i++ 不会执行。

是的，后增量运算符的结果是原始值……然后在下一次调用该方法时，您将获得一个新的`i`. 换句话说，这个调用：

```
doStuff(i++); 
```

相当于：

```
int original = i;
i = original + 1;
doStuff(original); 
```

从[JLS 第 15.14.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)：

> 后缀增量表达式的值是存储新值*之前变量的值。*

鉴于您`i`以后不再使用（因此任何副作用都是毫无意义的），为什么不简化您的生活呢？

```
doStuff(i + 1); 
```

（与Java 中的*所有*参数一样，您会看到按值传递 - 更改`i`方法中的值*不会*更改调用者参数的值。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:26:49.983

它的行为符合~~预期~~，您可能想要替换`i++`为`++i`.

查看有关如何使用前缀/后缀一元增量运算符的[oracle 文档：](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)

```
class PrePostDemo {
    public static void main(String[] args){
        int i = 3;
        i++;
        // prints 4
        System.out.println(i);
        ++i;               
        // prints 5
        System.out.println(i);
        // prints 6
        System.out.println(++i);
        // prints 6
        System.out.println(i++);
        // prints 7
        System.out.println(i);
    }
} 
```

（摘自链接页面）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:26:24.423

`++`操作员按预期工作。它首先返回变量的值，然后增加变量，因此您始终传递 0。

这：

```
doStuff(i++); 
```

就好像：

```
int x = i;
i += 1;
doStuff(x); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:26:44.807

`i++`意思是：“使用 i 的值，然后增加它”。传递时它总是为零。它是值类型，而不是引用类型。如果那将是一个对象，那将没有问题，因为它将作为参考处理。

# java - 如何使文本字段有 2 个文档过滤器

> ID：12860072
> 
> 赞同：5
> 
> 时间：2012-10-12T13:24:56.423
> 
> 标签：java, textfield, documentfilter

我在这里有一个代码，我从 MDP 的博客中获得。大小过滤器和数字过滤器。我如何让一个文本字段为两个文档过滤器设置它的过滤器。

这是数字过滤器

```
import javax.swing.text.BadLocationException;
import javax.swing.text.AttributeSet;
import javax.swing.text.DocumentFilter;

public class IntFilter extends DocumentFilter {

public void insertString(DocumentFilter.FilterBypass fb, int offset,
                         String string, AttributeSet attr)
        throws BadLocationException {

    StringBuffer buffer = new StringBuffer(string);
    for (int i = buffer.length() - 1; i >= 0; i--) {
        char ch = buffer.charAt(i);
        if (!Character.isDigit(ch)) {
            buffer.deleteCharAt(i);
        }
    }
    super.insertString(fb, offset, buffer.toString(), attr);
}

public void replace(DocumentFilter.FilterBypass fb,
                    int offset, int length, String string, AttributeSet attr) throws BadLocationException {
    if (length > 0) fb.remove(offset, length);
    insertString(fb, offset, string, attr);
}
} 
```

此代码适用于 sizefilter

```
import java.awt.*;
import javax.swing.text.AttributeSet;
import javax.swing.text.BadLocationException;
import javax.swing.text.DocumentFilter;

public class SizeFilter extends DocumentFilter {

private int maxCharacters;    

public SizeFilter(int maxChars) {
    maxCharacters = maxChars;
}

public void insertString(FilterBypass fb, int offs, String str, AttributeSet a)
        throws BadLocationException {

    if ((fb.getDocument().getLength() + str.length()) <= maxCharacters)
        super.insertString(fb, offs, str, a);
    else
        Toolkit.getDefaultToolkit().beep();
}

public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a)
        throws BadLocationException {

    if ((fb.getDocument().getLength() + str.length()
            - length) <= maxCharacters)
        super.replace(fb, offs, length, str, a);
    else
        Toolkit.getDefaultToolkit().beep();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:34:41.773

据我所知，你有两个选择。要么创建一个迭代每个过滤器的复合过滤器：

```
public class CompositeFilter extends DocumentFilter {
    private final DocumentFilter[] filters;

    public CompositeFilter(DocumentFilter... filters) {
        this.filters = filters;
    }

    public void insertString(FilterBypass fb, int offs, String str, AttributeSet a)
        throws BadLocationException {
        for (DocumentFilter filter : filters) {
            filter.insertString(fb, offs, str, a);
        }
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a)
        throws BadLocationException {
        for (DocumentFilter filter : filters) {
            filter.replace(fb, offs, length, a);
        }
    }
} 
```

您可能希望首先使用限制性更强的过滤器来实例化复合材料，因此您可以像这样构造它：

```
new CompositeFilter(new SizeFilter(10), new IntFilter()); 
```

如果顺序非常重要，您可以考虑将过滤器重写为装饰器，例如将第二个过滤器传递给第一个过滤器，然后调用它。

```
public class SizeFilter extends DocumentFilter {
    private int maxCharacters;    
    private final DocumentFilter delegate;

    public SizeFilter(int maxChars, DocumentFilter delegate) {
        maxCharacters = maxChars;
        this.delegate = delegate;
    }

    public void insertString(FilterBypass fb, int offs, String str, AttributeSet a)
        throws BadLocationException {

        if ((fb.getDocument().getLength() + str.length()) <= maxCharacters)
            delegate.insertString(fb, offs, str, a);
        else
            Toolkit.getDefaultToolkit().beep();
    }

    public void replace(FilterBypass fb, int offs, int length, String str, AttributeSet a)
        throws BadLocationException {

        if ((fb.getDocument().getLength() + str.length() - length) <= maxCharacters)
            delegate.replace(fb, offs, length, str, a);
        else
            Toolkit.getDefaultToolkit().beep();
        }
    }
} 
```

# php - 无法找到远程文件的 md5_file 值

> ID：12860073
> 
> 赞同：0
> 
> 时间：2012-10-12T13:25:03.613
> 
> 标签：php, networking

我正在尝试查找放置在远程系统中的文件的 md5_file 值，并尝试在我的数据库中更新该值。我曾尝试使用 md5_file('http://..../$remote_file')，但我什么也没得到。如果需要任何网络配置来读取远程文件。我的应用程序正在使用 php5 和 firefox 15。任何人都可以告诉一些其他方法来找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:19:12.897

像 PHP 中的许多其他函数一样，错误[`md5_file`](http://php.net/md5_file)返回`FALSE`。

在您的情况下，我首先会检查您的函数是否返回`FALSE`，这有时类似于*“一无所获”*：

```
$url = 'http://..../$remote_file';
$md5 = md5_file($url);
if ($md5 === FALSE) {
    die("Error retrieving md5 from $url.");
} 
```

更改您的代码并查看结果。你会偶然发现一个细节，你会认为是你的错误原因，然后我假设。这应该可以让您轻松修复它。

# sql-server-2012-express - 安装 SQL Server 2012 Express 时出错

> ID：12860076
> 
> 赞同：1
> 
> 时间：2012-10-12T13:25:11.797
> 
> 标签：sql-server-2012-express

当我尝试安装 SQL Server 2012 Express 时，出现错误

![在此处输入图像描述](../Images/c2e94d0eccd901d8d920a5fc62fb5238.png)

但是，我已经安装了 service pack 1。顺便说一句，我使用的是 Windows 7。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:47:21.150

我最好的猜测是您正在尝试在 32 位 Windows 7 上安装 64 位 Sql Server。除此之外，请确保在启动安装程序时右键单击并选择“以管理员身份运行”，并且您的 Windows 副本评估为“正版”。

Sql Server 还需要 .Net 和 PowerShell，但如果其中任何一个是问题，我希望看到不同的错误，甚至只是提示允许它们包含在此安装中。

# javascript - 执行返回函数的语法

> ID：12860078
> 
> 赞同：0
> 
> 时间：2012-10-12T13:25:12.553
> 
> 标签：javascript

如果我从如下所示的函数中返回一个函数，我该如何执行它并设置参数？

```
var func1 = function(param){
    // do stuff
};

function returnFunction(){
    return func1;
}

returnFunction() // this will return func1 but I want to execute it with certain param. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:26:08.973

你可以像往常一样执行它：

```
returnFunction()("whatever"); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/c32dN/)。

为了使它更容易阅读：

```
var fn = returnFunction();
fn("whatever"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:26:19.010

像任何其他函数调用一样：

```
returnFunction()(foobar) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:57:56.943

您似乎将函数视为某种[神奇的构造](https://stackoverflow.com/questions/12744087/javascript-methods-calling-method-without-parentheses/12744640#12744640)。

## 调用函数并不神奇

但是，函数只是一个可以使用`()`运算符进行操作的值。

你`!(x || y)`觉得奇怪吗？`!`在某种程度上非常相似`()`，除了你在它的操作数*之前*写它而你在操作数`()` *之后*写它。他们接受一个值，操作它，然后返回一个值，这就是它的全部。

明白了这一点，看起来`x()()()` *并不*奇怪，它只是*不寻常*：`x`显然是一个函数，它返回一个函数，它返回一个函数，它返回一些东西：值`(x()()())`

## 将这种新理解应用于您的示例

如您所知，`returnFunction()`将返回`func1`。因此，整个表达式`returnFunction()` *产生***value** `func1`，并且由于您可以将运算`()`符应用于*values*，这就是您需要做的所有事情：

```
returnFunction()(arg) 
```

# python - wxPython 应用程序未正确关闭

> ID：12860081
> 
> 赞同：1
> 
> 时间：2012-10-12T13:25:24.453
> 
> 标签：python, wxpython

由于某种原因，当我添加以下行时，当我的面板关闭时，我的程序无法正确退出： `dialogRename = wx.TextEntryDialog(None, message = 'Enter the name of the installation:', caption = 'Rename?', defaultValue = addedFilenameUser)`

即使我从来没有`ShowModal()`，窗口也会关闭并且我没有收到任何错误，但 Mac OS 上的 Python 应用程序会一直运行，直到我将其杀死，并且终端上会打印“终止”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:36:50.633

从主窗口捕获关闭事件并执行以下操作：

```
wxGetApp().ExitMainLoop() 
```

原因是您的对话框是隐藏的，而不是关闭的。wxWidgets 只有在所有窗口和对话框都关闭时才退出应用程序。

# php - 通过不知道整个 X 来替换字符串中每次出现的 X

> ID：12860084
> 
> 赞同：1
> 
> 时间：2012-10-12T13:25:25.080
> 
> 标签：php, regex

我需要执行以下操作：

```
$hashes = "hash_0000199a5e6d7781cc1bd6cf24f64dd6ffb423|hash_00001977087c71ad7073c31041e3ea503f79ce|hash_000019bc1896ab17d3a1b616c4e9a0fa6f06e0";
$hashes = preg_replace("hash_\d{6}", "", $hashes); 
```

`$hashes`现在应该包含与以前相同的内容，只是没有 all `hash_000019`。前 6 个数字可以更改，这就是为什么我需要正则表达式包含类似`\d{6}`

我可能做错了正则表达式。我希望你明白我的问题是什么。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:27:28.550

第一个参数在搜索中需要一个“分隔符”。

```
preg_replace('/hash_\d{6}/', '', $hashes); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:27:38.363

您忘记在正则表达式中添加分隔符：

```
$hashes = preg_replace("/hash_\d{6}/", "", $hashes); 
```

除了 之外，还有很多可能性`/`，但必须转义选择的分隔符。[在此处](http://www.php.net/manual/en/regexp.reference.delimiters.php)阅读分隔符。

# android - 无法在 Android 中解析 JSON

> ID：12860086
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:25:28.137
> 
> 标签：android, json, web-services, rest

我想解析以下 JSON 响应。我无法提取`JSONArray`JSON 对象内的内容。我是 JSON 解析的新手，任何帮助将不胜感激。

```
{
    "Result": {
        "Data": [
            {
                "id": "1",
                "Name": "ABC",
                "release": "8",
                "cover_image": "august.png",
                "book_path": "Aug.pdf",
                "magazine_id": "1",
                "Publisher": "XYZ",
                "Language": "Astrological Magazine",
                "Country": "XYZ"
            },
            {
                "id": "2",
                "Name": "CDE",
                "release": "8",
                "cover_image": "august2012.png",
                "book_path": "aug.pdf",
                "magazine_id": "2",
                "Publisher": "XYZ",
                "Language": "Astrological Magizine",
                "Country": "XYZ"
            }
        ]
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:33:13.603

实现 JSON 解析的基本代码如下：

```
JsonObject objJSON = new JSONObject("YourJSONString");

JSONObject objMain = objJSON.getJSONObject("NameOfTheObject");
JSONArray objArray = objMain.getJSONArray("NameOfTheArray");  // Fetching array from the object 
```

## 更新：

根据您的评论，我可以看到您没有获取 JSONArray“数据”，没有它，您正在尝试获取特定对象的值/属性：

```
JSONObject jObj = jsonObj.getJSONfromURL(category_url); 
JSONObject menuObject = jObj.getJSONObject("Result"); String attributeId = menuObject.getString("Data");

String attributeId = menuObject.getString("Data");   // Wrong code

JSONArray objArray = menuObject.getJSONArray("Data"); // Right code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:42:23.787

我喜欢使用 GSON 库：[http ://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

这是一个由 Google 提供的 JSON 解析库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:32:14.590

好的，一步一步来：

```
String json = "{\"Result\":{\"Data\":[{\"id\":\"1\",\"Name\":\"ABC\",\"release\":\"8\",\"cover_image\":\"august.png\",\"book_path\":\"Aug.pdf\",\"magazine_id\":\"1\",\"Publisher\":\"XYZ\",\"Language\":\"Astrological Magazine\",\"Country\":\"XYZ\"},{\"id\":\"2\",\"Name\":\"CDE\",\"release\":\"8\",\"cover_image\":\"august2012.png\",\"book_path\":\"aug.pdf\",\"magazine_id\":\"2\",\"Publisher\":\"XYZ\",\"Language\":\"Astrological Magizine\",\"Country\":\"XYZ\"}]}}";

try
{
    JSONObject o = new JSONObject(json);
    JSONObject result = o.getJSONObject("Result");
    JSONArray data = result.getJSONArray("Data");

    for (int i = 0; i < data.length(); i++)
    {
        JSONObject entry = data.getJSONObject(i);
        String name = entry.getString("Name");
        Log.d("name key", name);
    }   
}
catch (JSONException e)
{
    e.printStackTrace();
} 
```

Json 是硬编码的，所以我不得不逃避它。此代码获取结果对象，然后获取数据数组。循环遍历数组并获取 Name 值。

我进入了 LogCat：ABC CDE

请注意，您应该用 try-catch 包围它或将 throws 添加到方法中。

# c++ - 为什么 cpplint 不鼓励 Streams？

> ID：12860100
> 
> 赞同：15
> 
> 时间：2012-10-12T13:26:19.190
> 
> 标签：c++, stl, coding-style, cpplint

我只是在玩 cpplint 并尝试在我为好玩而编写的一些代码上运行它。我意识到以下行被标记了错误消息：-

```
#include <iostream>
...
#include <fstream>

yoohoo.cpp:3:  Streams are highly discouraged.  [readability/streams] [3]
yoohoo.cpp:5:  Streams are highly discouraged.  [readability/streams] [3] 
```

我很好奇为什么不鼓励使用流。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T17:24:56.793

流可能导致问题的主要原因是国际化。

每当您需要以几种不同的语言生成具有动态内容的文本时，事情就会出错，因为每种语言都有自己的语法规则。例如，在英语中，您将使用：

```
void print(std::ostream& out, int i) {
    out << "You retrieved ";
    switch(i) {
    case 0: out << "no file."; return;
    case 1: out << "1 file."; return;
    default: out << i << " files." return;
} 
```

那太好了，对吧？

因此，当您翻译成法语时，您只需决定将所有这 4 个句子部分移动到一个表格中，您将在其中按键查找它们，它就可以了！

然后你从文档中发现了[Polish](http://www.gnu.org/software/gettext/manual/gettext.html#Plural-forms)`gettext` ，这里是*file* ( *plik* ) 的复数形式：

> 1 => 点
> 
> 2,3,4 => 普利基
> 
> 5-21 => 普利科
> 
> 22-24 => 普利基
> 
> 25-31 => pliko'w

哼……突然事情变得困难了，对吧？

实际上，情况可能会变得更糟。并非所有语言都需要以相同的顺序放置您的动态条目！

这就是为什么流实际上不能用于国际化文本，除非为每个要显示的文本编写一个可重载的 C++ 函数，并让翻译器提供重载！哼...

两者各有利弊，谷歌风格指南非常固执己见，以尽可能确保一致性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T13:33:09.413

这是根据 google c++ 编码指南检查 c++ 的那个吗？如果是这样，那么原因是 google 的 c++ 指南通常被认为有些古怪，并不真正适用于许多人认为现代 c++ 的良好实践。

# pdf - 使用第 3 方加密方法批量处理 PDF 文件的库/软件

> ID：12860104
> 
> 赞同：0
> 
> 时间：2012-10-12T13:26:35.897
> 
> 标签：pdf, encryption, batch-processing

我们有大量使用外部（不是 Adob​​e 提供的）库加密的 PDF 文件。我们可以访问带有加密库的 .dll，我们希望将我们的文件转换为未加密的 PDF。由于大量文件，手动执行此操作是不可能的。

你们中是否有人知道可以处理和转换使用 3rd 方库加密的文件的 PDF 库或软件？

# c++ - 如何用参数覆盖构造函数并在单独的文件中实现它

> ID：12860112
> 
> 赞同：0
> 
> 时间：2012-10-12T13:26:56.570
> 
> 标签：c++

我有一个名为 Entity 的类的子类，我不希望该子类覆盖 Entity 的构造函数，但也调用 Entity 的构造函数。所以我这样声明构造函数：

```
EntitySphere(GLuint shader):Entity(shader){
    //Code
} 
```

但是只有当我在类定义中实现该函数时，该方法才有效（或者我得到很多错误）。我怎样才能达到同样的效果，但能够在 .cpp 文件中实现构造函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:34:31.680

要在类定义之外实现构造函数（或任何方法），您需要在方法名称之前指定类的名称：

```
EntitySphere::EntitySphere(GLuint shader): Entity(shader) {
  // ...
} 
```

请注意该`EntitySphere::`方法其余部分之前的部分。

否则，编译器不知道您为哪个方法提供定义。（也许它可以被允许猜测，但是如果它猜错了并且将该实现与您程序中的某些其他函数相关联怎么办？）

# ruby-on-rails - Rails 上的敏捷开发：有人可以解释这种语法吗？image_url：fred.gif）

> ID：12860113
> 
> 赞同：1
> 
> 时间：2012-10-12T13:26:56.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

新手问题在这里：

在这个测试中：

```
test "product is not valid without a unique title -il8n" do
      product = Product.new(title: products(:ruby).title),
      description: "yyy",
      price: 1,
      image_url: "fred.gif")
    end 
```

为什么“fred.gif”后面有一个“)”（右括号）？没有左括号，所以我不明白它的逻辑。也找不到任何关于为什么的参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:34:52.557

对我来说看起来像一个错误，它不是有效的语法：

```
$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux]
$ ruby -c /tmp/test.rb
/tmp/test.rb:3: syntax error, unexpected tLABEL
      description: "yyy",
                  ^
/tmp/test.rb:3: syntax error, unexpected ',', expecting keyword_end
/tmp/test.rb:5: syntax error, unexpected ')', expecting keyword_end 
```

我猜这条线

```
product = Product.new(title: products(:ruby).title), 
```

应该读

```
product = Product.new(title: products(:ruby).title, 
```

如此重新格式化，测试将如下所示：

```
test "product is not valid without a unique title -il8n" do
  product = Product.new(
    title: products(:ruby).title,
    description: "yyy",
    price: 1,
    image_url: "fred.gif"
  )
end 
```

（尽管测试描述与行为不匹配；-)）

# c++ - 转换向量的数据类型

> ID：12860114
> 
> 赞同：2
> 
> 时间：2012-10-12T13:26:58.283
> 
> 标签：c++, vector, casting

请指导我如何转换字符串向量

```
std::vector<string> strVect; --> std::vector<float or double> flVect; 
```

（例如 strVect 包含像 { "0.1111", "0.234", "0.4556"} 这样的值）

使用 c++ 转换成一个浮点向量。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:09:35.160

除了现有的答案，一个非常简单的方法是使用 C++11 字符串转换函数和 C++11 lambda：

```
std::vector<string> strVect = ...;
std::vector<float> flVect(strVect.size());
std::transform(strVect.begin(), strVect.end(), flVect.begin(), 
               [](const std::string &arg) { return std::stof(arg); }); 
```

与 类似，当然`double`，只是与`std::stod`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:44:59.913

这是一个不使用 boost 的解决方案：

```
std::vector<string> strVect;
//...
std::ostringstream ss;
std::vector<double> flVect( strVect.size() );
for( size_t i = 0; i < strVect.size(); ++i )
{
    ss.str(strVect[i]);
    ss >> flVect[i];
} 
```

# java - 无法解析包含中文内容的 XML 文件

> ID：12860115
> 
> 赞同：1
> 
> 时间：2012-10-12T13:27:05.193
> 
> 标签：java, xml, unicode, cjk

我有一个包含中文内容的 XML 文件。但是在显示时我得到了问号。有人可以调查一下这个问题吗？

我的 book.xml ：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<book>
  <person>
    <first>密码</first>
    <last>Pai</last>
    <age>22</age>
  </person>
</book> 
```

我的代码是：

```
public static void main (String argv []){
  DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
  DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
  Document doc = docBuilder.parse (new File("book.xml"));
  String strDoc=getStringFromDocument(doc);
  System.out.println(strDoc);
}

public static String getStringFromDocument(Document doc) {
 TransformerFactory transfac = TransformerFactory.newInstance();
 Transformer trans = transfac.newTransformer();
 trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
 trans.setOutputProperty(OutputKeys.ENCODING, "UTF-8");
 trans.setOutputProperty(OutputKeys.INDENT, "yes");
 StringWriter sw = new StringWriter();
 StreamResult result = new StreamResult(sw);
 DOMSource source = new DOMSource(doc);
 trans.transform(source, result);
 String xmlString = sw.toString();
 return xmlString.toString();
} 
```

之后我得到`??`：

```
<?xml version="1.0" encoding="UTF-8"?>
  <book>
    <person>
      <first>??</first>
      <last>Pai</last>
      <age>22</age>
    </person> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:35:59.613

您的代码在我的系统上运行良好。我能够创建一个带有中文字符的 books.xml，在我的系统上运行您的代码并获得正确的输出。

[更新]

以前我认为您的 books.xml 文件是可疑的 - 但我终于能够通过设置 -Dfile.encoding=ISO-8859-1 在我的系统上重现您的问题。

在您的环境中的某个地方，您的字符编码设置不正确。也许在 JVM 中，也许在显示字符的控制台中。

确保将 String 编写为 UTF-8 编码字节流的一种方法是更改​​：

```
 System.out.println(strDoc); 
```

至

```
 System.out.write(strDoc.getBytes("UTF-8")); 
```

这可能会或可能不会修复您在屏幕上看到的内容。您的控制台还必须配置为正确处理 UTF-8 编码数据。但是，如果您将这些字节写入文件或套接字，您应该能够确认这些字节与原始文件中的字节匹配。

# c# - 绑定到字典时，wpf 以编程方式设置组合框选定项

> ID：12860119
> 
> 赞同：0
> 
> 时间：2012-10-12T13:27:15.203
> 
> 标签：c#, wpf, dictionary, combobox

我有一个绑定做字典的组合框

```
Dictionary<String, myClass> boxItems; 
```

组合框具有以下数据模板：

```
<DataTemplate>
    <TextBlock Text="{Binding Path=Key}"></TextBlock>
</DataTemplate> 
```

这适用于加载值和获取选定的值，但是我无法弄清楚如何从代码隐藏中设置选定的值。

任何指针？

我尝试将 selectedItem 和 selectedValue 设置为一个键（我知道它在字典中），但是当我加载页面时，组合框没有选择任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:31:34.663

将此添加到您的组合框

```
<ComboBox SelectedItem="{Binding SelectedBoxItem}"/> 
```

并在实现 INotifyPropertyChanged 的​​类中使用它：

```
private myClass _selectedBoxItem;
public myClass SelectedBoxItem
{
    get { return _selectedBoxItem; }
    set
    {
        _selectedBoxItem = value;
        OnPropertyChanged("SelectedBoxItem");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:34:14.377

您需要使用要选择的键创建一个 KeyValuePair。

你可以这样做：

```
 myCombo.SelectedItem = new KeyValuePair<string, int>("myKey", boxItems["myKey"]); 
```

# encoding - BOM是什么意思？

> ID：12860120
> 
> 赞同：5
> 
> 时间：2012-10-12T13:27:20.170
> 
> 标签：encoding, byte-order-mark

[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)是什么意思？我尝试阅读这篇文章，但还没有真正理解它的含义。

我读到一些文本编辑器将 BOM 放在文件开头之前。它的用途是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T13:33:52.900

`BOM`代表`Byte Order Mark`。简而言之，`BOM`文件开头的 is 标记指示是最高有效字节还是最低有效字节应该在前。

它会导致很多问题，尤其是 UTF8。UTF8 不使用 BOM，但有一个称为 UTF8Y（或 UTF with BOM）的变体，它在文件的开头包含一些额外的字符。

发送具有 UTF8 编码类型的 UTF8Y 文件会导致在文件开头发送一些额外的字节，并可能导致各种难以追踪的问题，包括 DOCTYPE 无法正确解析一个 IE 或 JSON 文件无法解码。

当我没有仔细检查文件类型时，它已经用其他人的文件咬了我几次。

我的建议：注意它的存在，永远不要故意使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T13:33:52.633

字节顺序标记允许程序确定如何读取 Unicode 数据。从您的 Wiki 页面：

> 因为 Unicode 可以编码为 16 位或 32 位整数，所以从任意来源接收这些编码的计算机需要知道整数编码的字节顺序。

对于 UTF-8，如何读取字节没有歧义，因此通常会省略 BOM。对于 UTF-16 和 UTF-32，有必要知道如何解释字节，而 BOM 可以用于此目的。

请注意，Java 在读取 UTF-8 BOM 时存在问题，如果存在这些字符，您必须手动处理（请参阅[读取 UTF-8 - BOM 标记](https://stackoverflow.com/questions/4897876/reading-utf-8-bom-marker)以获取相关 Sun 错误的一些链接）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:44:35.520

我可能会介绍你已经知道的东西，但是这里有......

要了解 BOM 的目的，您需要了解（至少在概念上）什么是字节序。

如果您正在处理单个字节（8 个二进制位），它的顺序是从右到左的重要性增加（就像读取一个普通的十进制数，如“19”）。这很简单，只要您可以将数字包含在单个字节中。一旦达到两个字节，您需要知道这两个字节中哪个更重要，哪个是大端或小端。大端意味着最低的内存地址（或最左边，继续类比写入）包含更高的值 - 它延续了西方十进制数字的趋势。从历史上看，英特尔一直是小端，摩托罗拉一直是大端。（我最近没看，现在可能不一样了。）

BOM 只是一个标记，说明以哪种方式解释数据的字节顺序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-12T13:33:33.680

今天，这只是说，“这个文件是 UTF-8 格式的”。或者，“此文件采用 UTF-16 格式”。虽然在这两种情况下它仍然是相同的 BOM 字符，但 BOM 的编码方式暗示了所有其余部分的编码方式。

如果您不知道第一个字符是什么，则无法可靠地从中推断出文档编码 - 您必须从其他地方确定它，或者或多或少地猜测它。

*投票后附录：*

从历史上看，BOM 有不同的用途 - 零宽度空白字符（即，与 Unicode 字符一样不可见，但仍然是字符）。许多广泛使用的软件库（如 .NET 和 Java）都在自动或隐式地将 BOM 添加到写入的文件甚至字节数组中，这常常使人们误以为他们在使用 BOM 时没有使用 BOM。当一堆此类库在同一个文件的开头写入多个 BOM 时，这通常会适得其反，因为您的文件以非法或不需要的字符开头，即零宽度的牢不可破的空间；当你检查时你甚至看不到它！

难怪 BOM 技术并不适合所有人。

# facebook - Facebook Api 获取提要和评论

> ID：12860126
> 
> 赞同：4
> 
> 时间：2012-10-12T13:27:39.437
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我正在尝试在公共墙上获取提要和相关评论。因此，每 X 分钟我都会进行一次查询，以获取最新信息（供稿和评论）。

我需要提要（自 myDate 以来的新提要）和评论（发布在新提要上的评论和发布在旧提要上的评论）。因此，如果有人在较旧的提要上发表评论，我想得到它。我尝试使用 FQL 和 Graph API 来做到这一点，但我没有找到最佳解决方案。

对于 FQL，LIMIT 和 OFFSET 存在一些问题（错误）并且不能很好地工作。使用 Graph API，我没有那么大的权力。所以这就是我尝试过的：

```
https://graph.facebook.com/PAGE_ID/feed?access_token=MY_ACCES_TOKEN0&limit=500&since=1350033469&until=now&updated_time>1350033469 
```

这给了我最新的帖子，所以没问题，因为对于每一个我都在做一个新的查询，以便获得每个提要的评论：

```
https://graph.facebook.com/PAGE_ID/comment?access_token=MY_ACCES_TOKEN0&limit=500&since=1350033469&until=now&updated_time>1350033469 
```

问题是，如果在较旧的帖子上发布评论，我不会收到它。

使用 FQL 我不能只过滤最新的帖子（基于我的开始日期）和带有新评论的帖子。

```
https://api.facebook.com/method/fql.query?query=SELECT post_id, text, fromid FROM comment WHERE post_id IN (SELECT post_id FROM stream where source_id=PAGE_ID and comments.created_date>1350033469)&access_token=MY_ACCES_TOKEN 
```

使用 Graph API 我有一个很好的分页（使用响应中的下一个和上一个链接）但是使用 FQL 我没有找到任何解决方案。

所以有人有什么想法吗？谢谢。

抄送

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:50:47.587

首先，不推荐使用 FQL，因此您只需要使用**Graph API**。

我提出的解决方案是，当您已经有一个帖子时，您需要使用其唯一 ID 重新检查该帖子，并且该请求会给您两次，`created_time`并且`updated_time`，因此您需要检查您是否`updated_time`更改了。

Graph API 中给出的分页只针对帖子，所以当帖子有新评论时，它们不会在列表中排在第一位，您需要自己查找。

**- 更新 -**

用于`batch_requests`实现此目的，因此您可以一次发出更多请求。

# salesforce - Salesforce visualforce 获取 CreatedBy 字段标签

> ID：12860127
> 
> 赞同：0
> 
> 时间：2012-10-12T13:27:39.797
> 
> 标签：salesforce, translation, labels

我正在创建一个可以翻译的 visualforce 页面。我一直在使用 ObjectType 全局变量来获取页面上的字段标签。它们工作得很好，除了 CreatedBy：

```
{!$ObjectType.MyCustomObject__c.Fields.Name.Label}              // works
{!$ObjectType.MyCustomObject__c.Fields.MyCustomField__c.Label}  // works
{!$ObjectType.MyCustomObject__c.Fields.CreatedBy.Label}         // doesn't work 
```

如何获取此字段的标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:29:52.483

没有名为 CreatedBy 的字段，您需要`CreatedById`为进行更改的用户或`CreatedByDate`创建记录时的时间戳

# cocoa-touch - 空集合视图中的 UICollectionView 装饰

> ID：12860131
> 
> 赞同：11
> 
> 时间：2012-10-12T13:27:59.063
> 
> 标签：cocoa-touch, ios6, nsfetchedresultscontroller, uicollectionview

我已经实现了`UICollectionView`一个自定义布局。它为布局添加了一个装饰视图。我使用以下代码添加装饰视图的布局属性：

```
-(NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *allAttributes = [super layoutAttributesForElementsInRect:rect];
    return [allAttributes arrayByAddingObject:[self layoutAttributesForDecorationViewOfKind:kHeaderKind atIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]]];
} 
```

集合视图中的数据由`NSFetchedResultsController`.

现在它看起来工作正常，但是当集合视图为空时，它会失败，因为有第 0 节。尝试在没有索引路径的情况下使用它，但也失败了。关于如何在空白中使用装饰视图的任何想法`UICollectionView`？应该是可能的，因为装饰视图不是数据驱动的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-14T12:45:09.790

使用未附加到特定单元格的装饰视图或补充视图时，用于`[NSIndexPath indexPathWithIndex:]`指定索引路径。这是一个示例代码：

```
@interface BBCollectionViewLayout : UICollectionViewFlowLayout

@end

@implementation BBCollectionViewLayout

- (void)BBCollectionViewLayout_commonInit {
    [self registerClass:[BBCollectionReusableView class] forDecorationViewOfKind:BBCollectionReusableViewKind];
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    if ((self = [super initWithCoder:aDecoder])) {
        [self BBCollectionViewLayout_commonInit];
    }
    return self;
}

- (id)init {
    self = [super init];
    if (self) {
        [self BBCollectionViewLayout_commonInit];
    }
    return self;
}

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {
    NSMutableArray *array = [NSMutableArray arrayWithArray:[super layoutAttributesForElementsInRect:rect]];

    UICollectionViewLayoutAttributes *attributes = [self layoutAttributesForDecorationViewOfKind:BBCollectionReusableViewKind atIndexPath:[NSIndexPath indexPathWithIndex:0]];

    if (CGRectIntersectsRect(rect, attributes.frame)) {
        [array addObject:attributes];
    }

    return array;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForDecorationViewOfKind:(NSString*)elementKind atIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewLayoutAttributes *attributes = [UICollectionViewLayoutAttributes layoutAttributesForDecorationViewOfKind:elementKind withIndexPath:indexPath];
    attributes.frame = CGRectMake(0., 60., 44., 44.);
    return attributes;
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T07:39:17.200

我创建并测试了这个简单的示例，它似乎在所有可能的情况下都可以在 iOS 7 中使用（0 个部分，1 个包含 0 个项目的部分等）。这是我的布局类，它的子类`UICollectionViewFlowLayout`。该项目的其余部分只是脚手架。

```
#import "JKLayout.h"
#import "JKDecoration.h"

@implementation JKLayout

- (instancetype)init
{
    if (self = [super init]) {
        [self registerClass:[JKDecoration class] forDecorationViewOfKind:@"Decoration"];
    }
    return self;
}

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *allAttributes = [super layoutAttributesForElementsInRect:rect];

    // It’s important to set indexPath to nil. If I had set it to indexPath 0-0, it crashed with InternalInconsistencyException
    // because I was trying to get decoration view for section 0 while there in reality was no section 0
    // I guess if you need to have several decoration views in this case, you’d identify them with a method other than indexpath
    return [allAttributes arrayByAddingObject:[self layoutAttributesForDecorationViewOfKind:@"Decoration" atIndexPath:nil]];
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForDecorationViewOfKind:(NSString *)decorationViewKind atIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes *attr = [super layoutAttributesForDecorationViewOfKind:decorationViewKind atIndexPath:indexPath];
    if (!attr) {
        attr = [UICollectionViewLayoutAttributes layoutAttributesForDecorationViewOfKind:decorationViewKind withIndexPath:indexPath];
        attr.frame = CGRectMake(0, 200, 100, 100);
    }
    return attr;
}

@end 
```

# javascript - 如何在文本框中多次查看选择列表的值

> ID：12860139
> 
> 赞同：0
> 
> 时间：2012-10-12T13:28:37.573
> 
> 标签：javascript, html, list, mobiscroll

我正在尝试将“mobiscroll”（选择列表）值放入文本框中，但在一页中三次，奇怪的是，如果我选择只查看一次它正在工作......另外，我该怎么做即使用户没有选择它也让它显示第一个数字？我在“价值”之后尝试了“选择”，但它不起作用..

[http://winegood.it/landing_ristoranti/index.html](http://winegood.it/landing_ristoranti/index.html)

* * *

另一个问题，如果我只想将结果乘以 2，我该怎么办？我试图用这个例子来做，但它不工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:21:40.423

```
var f = document.frm;
f.sel_value.value = sel.options[sel.selectedIndex].value; 
```

不起作用有两个原因：

1.  `<input name="sel_value">`元素不在表单内。您有一个开始`<form>`标签，但没有结束标签，但表单由`</div>`关闭`<div>`包含它的 的 隐式关闭。

2.  赋值只会填写一个输入，它不会像 jQuery 那样自动遍历所有输入。

尝试：

```
$("input[name=sel_value]").val($(sel).val()); 
```

要使其在页面加载时填写这些字段，您需要：

```
 $(function(){
    $('#select').scroller({
        preset: 'select',
        theme: 'default',
        display: 'inline',
        mode: 'clickpick',
        inputClass: 'i-txt'
    });
    aggiornaHidden($("#select"));
}); 
```

要在填充某些输入之前乘以该值，请将这些输入更改为：

```
<input type="text" name="sel_value" data-multiply="2" .../> 
```

更改`aggiornaHidden`为：

```
function aggiornaHidden(sel){
  $("input[name=sel_value]").each(function() {
      var multiply = $(this).data("multiply") || 1;
      $(this).val($(sel).val() * multiply);
  });
} 
```

# arrays - PHP foreach 将数组添加到 foreach 循环正在运行的数组的末尾

> ID：12860142
> 
> 赞同：0
> 
> 时间：2012-10-12T13:28:43.493
> 
> 标签：arrays, loops, foreach

我猜我这样做完全错误，但我想在 foreach 循环正在运行的数组的末尾添加一个数组。

例如，这是开始的结果

```
 array(3) {
   [0]=>
   array(1) {
   ["name"]=>
   string(7) "Matthew"
   }
  [1]=>
   array(1) {
   ["name"]=>
   string(3) "Jim"
   }
   [2]=>
  array(1) {
   ["name"]=>
    string(3) "Sam"
  }
} 
```

这是我使用的代码

```
<?php

  $arr = array( array("name" => "Matthew"), array("name" => "Jim"), array("name" => "Sam"));

  foreach ($arr as $element) {

  $ages = array("test" => 12);

  $element['test'] = $ages;

}

?> 
```

期望的最终结果

```
 array(3) {
   [0]=>
   array(1) {
   ["name"]=>
   string(7) "Matthew",
   array(1) {
   ["test"]=>
    int(2) 12
  }
   }
  [1]=>
   array(1) {
   ["name"]=>
   string(3) "Jim",
    array(1) {
   ["test"]=>
    int(2) 12
  }
   }
   [2]=>
  array(1) {
   ["name"]=>
    string(3) "Sam",
   array(1) {
   ["test"]=>
    int(2) 12
  }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:40:44.797

试试这个

```
foreach ($arr as $key=>$val) {
    $ages = array("test" => 12);
    $arr[$key]['test'] = $ages;
} 
```

结果是

```
Array (
    [0] => Array
        (
            [name] => Matthew
            [test] => Array
                (
                    [test] => 12
                )
        )
    [1] => Array
        (
            [name] => Jim
            [test] => Array
                (
                    [test] => 12
                )
        )
    [2] => Array
        (
            [name] => Sam
            [test] => Array
                (
                    [test] => 12
                )
        ) ) 
```

# ruby-on-rails - CanCan 在应该阻止访问时无法阻止访问

> ID：12860146
> 
> 赞同：2
> 
> 时间：2012-10-12T13:28:48.543
> 
> 标签：ruby-on-rails, ruby, authorization, cancan

`users/1/edit`当我以其他用户身份登录时访问不会引发 AccessDenied 错误，我不知道为什么：

```
 authorize_resource only: [:edit, :update]
  def edit
    @user = User.find(params[:id])
  end
  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      redirect_to @user
    else
      render 'edit'
    end
  end 
```

能力等级：

```
class Ability
  include CanCan::Ability
  def initialize(user)
    user ||= User.new

    can :read, :all
    can :create, User
    can :create, Group

    can :update, User, id: user.id
  end
end 
```

如果我更改`authorize_resource`为`load_and_authorize_resource`然后它按预期工作。但这不应该是相关的，当然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:56:05.463

关于为什么会发生这种情况，我（还）没有答案，但我遇到了基本相同的问题。我的情况不同之处在于手动授权每个操作（而不是依赖“授权资源”或“load_and_authorize”是关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:17:45.077

您的代码仅授权用户访问编辑和更新操作而不是`@user`对象

您必须像这样手动授权对象

尝试这个，

```
def edit
  @user = User.find(params[:id])
  authorize! :update, @user
end

def update
  @user = User.find(params[:id])
  authorize! :update, @user
  if @user.update_attributes(params[:user])
   redirect_to @user
  else
   render 'edit'
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T15:01:42.793

我和你一样面临同样的问题，但对我来说，我正在使用带有 cancan 的设计。因此，在我的控制器中，我会放

```
 before_filter :authenticate_user!, :except=>[:create] 
```

它将验证除创建之外的用户。

```
def index
    @user = User.all
    authorize! :index, @user
    respond_to do |format|
       format.html # index.html.erb
       format.xml  { render :xml => @user }
    end
end 
```

您想要授权用户访问的每个控制器功能，您都可以这样做，似乎您必须通过将每一个功能放入您需要授权的功能而不是使用 load_and_authorize_resource 来做很多工作，但希望可以从我完成的事情中帮助你。这里是资源：https://github.com/ryanb/cancan/wiki/authorizing-controller-actions。如果您得到答案以及为什么 load_and_authorize_resource 不起作用，请也发布到这里 :)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-10T04:17:08.410

我也遇到了这个问题，这就是我发现的。

[如果我正确阅读源代码](https://github.com/ryanb/cancan/blob/master/lib/cancan/controller_resource.rb#L68)，则在`:update`操作期间`load_and_authorize`执行`find_by`加载资源，然后调用`authorize!`它。但是，在应用传入参数后，我看不到它在哪里授权。（如果我读错了，请有人纠正我。）

我看到的用例是有人编辑资源，并在编辑中更新资源中的值，使其不再有资格在保存时通过授权。（当然，我正在设置 UI 来帮助避免这种情况，但显然我仍然想保护资源。）运行功能测试，我能够设置我希望不会通过控制器`:update`操作授权的属性，大概是因为检查发生在解析属性之前。

到目前为止，我解决它的方法是`authorize!`在设置属性后再次调用，这意味着我不能使用`update_attributes`，因为我想在保存之前进行授权：

```
class FooController < ApplicationControlller

  load_and_authorize_resource

  def update

    # slurp the mass assignable params
    @foo.attributes = params[:foo]

    # set some other params
    @foo.some_other_attr = 'bar'

    # authorize again, now that we have updated the params
    authorize! :update, @foo

    if @foo.save!
      flash[:notice] = I18n.t(...)   
      respond_with(@foo)
    # ...
    end 
  end 
end 
```

另一种方法是创建一个 before_filter，`@foo`自己加载实例，然后像上面那样调用授权，但这并没有真正让事情变得更干净，恕我直言。它只会节省一个授权！称呼。

我很好奇其他人是如何处理这个问题的。我对 CanCan 相当陌生，所以我假设我做错了什么。:)

# android - 如何在android的单个视图中组合水平寻呼机和垂直寻呼机？

> ID：12860149
> 
> 赞同：1
> 
> 时间：2012-10-12T13:29:07.173
> 
> 标签：android, android-viewpager

我不确定如何将这两个寻呼机集成到一个视图中。我想做的是，图像应该能够垂直和水平滑动。该屏幕将在屏幕中具有页面指示器。

```
 scrollView = (ScrollView) findViewById(R.id.scroll_view);
    contentView = (ViewGroup) findViewById(R.id.content);

    scrollView.setOnTouchListener(new ScrollPager(scrollView, contentView));
    scrollView.post(new Runnable()
    {
            public void run()
            {
                    scrollView.scrollTo(0, contentView.getPaddingTop());
            }
    });        

    final PagerControl control = (PagerControl) findViewById(R.id.control);
    final HorizontalPager pager = (HorizontalPager) findViewById(R.id.pager);
    control.setNumPages(pager.getChildCount());

    pager.addOnScrollListener(new HorizontalPager.OnScrollListener() {
        public void onScroll(int scrollX) {
            //Log.d("TestActivity", "scrollX=" + scrollX);
            float scale = (float) (pager.getPageWidth() * pager.getChildCount()) /    (float) control.getWidth();
            control.setPosition((int) (scrollX / scale));

        }

        public void onViewScrollFinished(int currentPage) {
            //Log.d("TestActivity", "viewIndex=" + currentPage);
            control.setCurrentPage(currentPage);
        }
    }); 
```

和 xml 是

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          xmlns:example="http://schemas.android.com/apk/res/com.example.page"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
>
<com.example.page.HorizontalPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    example:pageWidth="250dip"
    >
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scroll_view"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
  android:id="@+id/content"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:paddingTop="200dip"
  android:paddingBottom="200dip"> 
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:background="#0a0"
        android:text="Text 1"
        android:focusable="true"
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:background="#00a"
        android:text="Text 2"
        android:focusable="true"
        />

    <Button
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="Text 3"
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:background="#a00"
        android:text="Text 4"
        android:focusable="true"
        />

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:background="#0aa"
        android:text="Text 5"
        android:focusable="true"
        />
</ScrollView> 
</com.example.page.HorizontalPager>
<com.example.page.PagerControl
    android:id="@+id/control"
    android:layout_width="fill_parent"
    android:layout_height="4dip"
    android:layout_margin="8dip"
    example:roundRectRadius="2dip"
    />
 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:56:13.630

所以，这是我的代码：

主布局的 xml 中的 viewpager：

```
<android.support.v4.view.ViewPager
    android:id="@+id/view_pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
/> 
```

查看寻呼机的代码：

```
ViewPager viewPager = (ViewPager) findViewById(R.id.view_pager); 
List<View> pages = new ArrayList<View>();
// add here all views that you need
pages.add(view_1);
pages.add(view_2);
...
pages.add(view_N);
///////////
MyPageAdapter pageAdapter = new MyPageAdapter(pages);
viewPager.setAdapter(pageAdapter);
viewPager.setCurrentItem(0); 
```

和 MyPageAdapter：

```
public class MyPageAdapter extends PagerAdapter{

List<View> pages = null;

public MyPageAdapter(List<View> pages){
    this.pages = pages;
}

@Override
public Object instantiateItem(View collection, int position){
    View v = pages.get(position);
    ((ViewPager) collection).addView(v, 0);
    return v;
}

@Override
public void destroyItem(View collection, int position, Object view){
    ((ViewPager) collection).removeView((View) view);
}

@Override
public int getCount(){
    return pages.size();
}

@Override
public boolean isViewFromObject(View view, Object object){
    return view.equals(object);
}

@Override
public void finishUpdate(View arg0){
}

@Override
public void restoreState(Parcelable arg0, ClassLoader arg1){
}

@Override
public Parcelable saveState(){
    return null;
}

@Override
public void startUpdate(View arg0){
}

@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T09:28:22.987

你可以看看这个网站[http://vision-apps.blogspot.com/2013/06/solution-for-android-viewpager-inside.html](http://vision-apps.blogspot.com/2013/06/solution-for-android-viewpager-inside.html)

我希望它会帮助你。

# c# - Oracle 对 Int32 所需的精度值是多少？

> ID：12860151
> 
> 赞同：5
> 
> 时间：2012-10-12T13:29:15.237
> 
> 标签：c#, oracle

我需要在 Oracle 中存储一个 CRC 签名的 Int32 值。我应该使用什么精度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:31:34.407

由于 a 的最大值`signed int`为 2,147,483,647，因此您将使用 10 的精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:32:15.953

32 位可以存储 2^32 或略多于 4,000,000,000 个不同的数字，因此您需要一个`NUMBER(10, 0)`.

# database - 数据库系统是否包含/存储图片、声音和文件，或者只是它们的参考？

> ID：12860155
> 
> 赞同：2
> 
> 时间：2012-10-12T13:29:22.263
> 
> 标签：database, file, storage

前几天我在 Youtube 上看一个关于 db 的教程视频，在介绍中它说“db 存储文件，例如图片，声音文件......”。

据我所知，数据库系统只存储文本。该文本可以是字母、数字和其他字符，通过使用它们的组合，我们可以创建存储在服务器目录中的实际文件的链接。

我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:32:20.810

大多数关系数据库允许以某种支持它的数据类型的形式存储二进制数据。例如，在 Oracle 中，这是`BLOB`数据类型（二进制大对象）。

这是否是一个好主意是非常主观的，取决于具体情况，但绝对是可能的

# eclipse - 让 Eclipse 将库导出为 jar

> ID：12860156
> 
> 赞同：1
> 
> 时间：2012-10-12T13:29:24.147
> 
> 标签：eclipse, jar

如何让 Eclipse 将 和 的所有内容导出为不可运行的`JRE System Library [JavaSE-1.6]`jar `Referenced Libraries`？

我想使用`-classpath`将几个 jar 文件组合在一起，而不是使用 Eclipse 的`Export > Runnable JAR file`. 动机：通过交换 jar 来交换恰好位于其自己的包中的单个类。

将我自己的包导出到（不可运行的）jar 中很容易，但现在我也需要“库”类，但我还没有找到一种简单而明显的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:32:04.820

当您将可运行的 JAR 导出到“将所需的库复制到生成的 JAR 旁边的子文件夹中”时，有一个选项。这对你的情况有用吗？

# javascript - Paypal Embedded Flow not using returnUrl or cancelUrl

> ID：12860161
> 
> 赞同：9
> 
> 时间：2012-10-12T13:29:41.560
> 
> 标签：javascript, ruby-on-rails-3, iframe, paypal, paypal-adaptive-payments

I am using Paypals Adaptive Payments and Embedded flow feature to provide checkout via a minibrowser. Everything seems to be working correctly in the sandbox environment except that when the payment is completed successfully, the user is never redirected to my returnUrl set in the PAY API request. Same goes for my cancelUrl.

After the payment is complete, the user is shown an order overview in the minibrowser and a button labelled "close". If a user clicks this button, the minibrowser is closed.

If a user clicks cancel at any time, the minibrowser is closed.

There doesn't seem to be a way to have my page aware of the change besides setting up some polling or something which doesn't make sense, my returnUrl and cancelUrl should be used somewhere, right?

这是我获取重定向 url 的代码（使用自适应支付 gem）：

```
pay_request = PaypalAdaptive::Request.new
data = {
  'requestEnvelope' => {'errorLanguage' => 'en_US'},
  'currencyCode' => 'USD',
  'receiverList' =>
          { 'receiver' => [
            {'email' => '...', 'amount'=> 10.00}
          ]},
  'actionType' => 'PAY',
  'returnUrl' => 'http://www.example.com/paid',
  'cancelUrl' => 'http://www.example.com/cancelled',
  'ipnNotificationUrl' => 'http://www.example.com/ipn'
}

pay_response = pay_request.pay(data)
redirect_to pay_response.approve_paypal_payment_url "mini" 
```

以下是我设置贝宝 js 的方式：

```
var dg = new PAYPAL.apps.DGFlowMini({ trigger: "buyit", expType: "mini" }); 
```

这一切似乎都很简单，不知道我错过了什么。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T00:26:17.267

嗯 - 似乎是我们这边的一个错误 - 只是自己尝试过并与我们的集成团队确认。:-(

不幸的是，除了您提到的（检查弹出窗口是否存在）之外，我能想到的另一个短期修复是从您的服务器端调用 PaymentDetails API 来检查付款的状态。我已经打开了我们这边的错误，但没有 ETA。

**编辑 10/18**：对不起，我错了。这是有效的——只是我们的开发人员指南没有提供所有必需的信息。在迷你浏览器流的情况下，您需要提供“callbackFunction”并将您的 dgFlow 变量命名为“dgFlowMini”。（后者很重要——因为 apdg.js 期望定义 'dgFlowMini' 变量）这是有效的代码：

```
var returnFromPayPal = function(){
   alert("Returned from PayPal");
   // Here you would need to pass on the payKey to your server side handle to call the PaymentDetails API to make sure Payment has been successful or not
  // based on the payment status- redirect to your success or cancel/failed urls
}
var dgFlowMini = new PAYPAL.apps.DGFlowMini({trigger: 'em_authz_button', expType: 'mini', callbackFunction: 'returnFromPayPal'}); 
```

我在这里有一个工作示例：[https](https://pp-ap-sample.appspot.com/adaptivesample?action=pay) ://pp-ap-sample.appspot.com/adaptivesample?action=pay （确保选择 mini 作为体验类型）

我们将更新我们的文档并清理 apdg.js 以消除对 JS 变量名的依赖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T03:43:55.010

看起来嵌入式流的 PayPal 体验变得更糟了。现在您在调用迷你或灯箱后会收到一条错误消息，提示“无法完成付款。此功能目前不可用。”

# root - 须藤登录根

> ID：12860162
> 
> 赞同：0
> 
> 时间：2012-10-12T13:29:43.913
> 
> 标签：root, sudo

我正在尝试使用以下方式在网络服务器上获得 root 访问权限：

```
 sudo login root 
```

但我得到：

```
 sudo: no tty present and no askpass program specified 
```

我也没有 sudoers 文件的权限。我该如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:32:09.733

> 须藤苏-

如果您在 sudoer 文件中，那么您似乎不在。

> 苏——

如果你知道root密码

如果您两者都没有，管理员显然不希望您拥有 root 访问权限。

# objective-c - NSTimer 不会在指定日期被解雇

> ID：12860165
> 
> 赞同：4
> 
> 时间：2012-10-12T13:29:56.483
> 
> 标签：objective-c, cocoa, nsdate, nstimer

我正在创建一个 NSTimer：

```
 NSTimer *saveProgressSizeTimer = [[NSTimer alloc]
    initWithFireDate:[NSDate dateWithTimeIntervalSinceNow:2.0f]
    interval:1.0f
    target:self
    selector:@selector(myMethod:)
    userInfo:myUserInfo
    repeats:YES]; 
```

但是，计时器不会被触发。该方法不会被调用。如果我打印我的日期，我会得到以下信息：

> 2012-10-12 15:19:02.786 MyApp[1768:303] 发布日期：2012-10-12 13:21:02 +0000

不应该是 "2012-10-12 15:21:02" 吗？不知何故，时间是错误的。但为什么？如果我将时区从 UTC/GMT +1 小时（我坐在德国）更改为另一个，日期仍然是 2012-10-12 13:19:02 加上两秒。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T13:48:39.243

必须将创建的时间`initWithFireDate`添加到运行循环中，例如

```
[[NSRunLoop currentRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode]; 
```

用于`scheduledTimerWithTimeInterval`创建在当前运行循环上自动安排的计时器。

PS：使用`description`方法`NSDate`总是格林威治标准时间，这可能解释了你的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:56:22.353

addTimer如果您像这样创建计时器：

```
NSTimer *saveProgressSizeTimer = [[NSTimer alloc]
    initWithFireDate:[NSDate dateWithTimeIntervalSinceNow:2.0f]
    interval:1.0f
    target:self
    selector:@selector(myMethod:)
    userInfo:myUserInfo
    repeats:YES]; 
```

您必须像这样在 RunLoop 中添加计时器：

```
[[NSRunLoop currentRunLoop] addTimer:saveProgressSizeTimer forMode:NSDefaultRunLoopMode]; 
```

# eclipse - 在 Eclipse 中使用 Spring 多模块 maven 项目在 Spring 配置文件中找到 ClassNotFound

> ID：12860166
> 
> 赞同：0
> 
> 时间：2012-10-12T13:29:56.520
> 
> 标签：eclipse, spring, maven, m2e

我们在 Eclipse/STS 中有一个 Spring 多模块 maven 项目的问题，可以描述如下：

*   该项目有一个带有两个模块的父 pom：一个 jar 和一个 war。战见罐子。
*   spring 配置文件中引用的所有类都没有被 Eclipse 解析。例如`<bean class="com.ourcompany.OurClass" ...`，因此我们在 Eclipse IDE 中找不到类
*   然而，当使用 maven (mvn package/install) 手动构建时，应用程序运行良好

任何人都可以提供建议吗？

仅供参考，我们使用 STS 2.9.1

# powershell - FileSystemWatcher works in the PowerShell ISE but not when run

> ID：12860169
> 
> 赞同：3
> 
> 时间：2012-10-12T13:30:12.917
> 
> 标签：powershell, filesystemwatcher

I want to monitor a folder and move files that match certain criteria, so I'm trying to use the FileSystemWatcher.

I have a function that will be called with each new file:

```
function ProcessFile()
{
    param ([string]$filename)
    Write-Host "Processing file '$filename' to $destination"
} 
```

And then I set up a FSW:

```
Write-Host "Watching $source for new files..."
$fsw = New-Object IO.FileSystemWatcher $source, $filter -Property @{IncludeSubdirectories = $false; NotifyFilter = [IO.NotifyFilters]'FileName, LastWrite'}

Register-ObjectEvent $fsw Created -SourceIdentifier FileCreated -Action 
{
    ProcessFile $Event.SourceEventArgs.FullPath 
} 
```

That works fine when I run it from the ISE, and any files I drop into the watched folder are correctly tracked, but if I start a PowerShell window and run the script with .\FileWatch.ps1 then nothing happens.

I see the "watching ..." message, but never see a "processing..." message

Here's the full script that works in the ISE but not in a shell...

```
$source = 'D:\Dev\PowerShell\FileWatch\Test\Source'
$filter = '*.*'
$destination = 'D:\Dev\PowerShell\FileWatch\Test\Found\'

function ProcessFile()
{
    param ([string]$filename)
    Write-Host "Processing file '$filename' to $destination"
}

Write-Host "Watching $source for new files..."
$fsw = New-Object IO.FileSystemWatcher $source, $filter -Property @{IncludeSubdirectories = $false; NotifyFilter = [IO.NotifyFilters]'FileName, LastWrite'}
Register-ObjectEvent $fsw Created -SourceIdentifier FileCreated -Action {
    ProcessFile $Event.SourceEventArgs.FullPath 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:45:55.967

The problem is that your function `ProcessFile` isn't loaded in powershell session.

Try loading you script in this way:

```
. .\myscript.ps1 
```

In this way your code in my system works!

Read about [`Dot Sourcing`](http://technet.microsoft.com/en-us/library/ee176949.aspx) a script in powershell.

# php - AUTO_INCREMENT lastInsertId - 我的还是服务器的？

> ID：12860172
> 
> 赞同：1
> 
> 时间：2012-10-12T13:30:21.040
> 
> 标签：php, mysql, pdo

我在网上找到了一些关于AUTO_INCREMENT的相关读物，想问你们一些事情。

这是我发现的一些与 AUTO_INCREMENT 插入相关的代码。我不确定该字段是否是 auto_increment，如果我应该在插入时在 PDO 语法中跳过它，或者提到它并将其设置为 NULL，因为它无论如何都会 AUTO_INCREMENT。

```
INSERT INTO CUSTOMER_ADDRESS (ADD_ID, ADD_TEXT) VALUES(NULL, 'some address value');

INSERT INTO CUSTOMER_DETAILS (NAME, ADD_ID, GENDER, PHONE_NO)
VALUES ('James Bond', LAST_INSERT_ID(), 'MALE', 007); 
```

现在，我的问题是：

1.  LAST_INSERT_ID() 或 PDO 的 PDO::lastInsertID ($dbh->lastInsertId();) 真的是我完成的最后一个 AUTO_INCREMENT id，还是服务器完成的最后一个 AUTO_INCREMENT？（请记住，当我调用该函数时，另一个说已经完成了 50 个插入，并且 lastInsertID 现在不同了......所以它是我的最后一个插入还是服务器的最后一个插入。

非常感谢，非常感谢您的知识

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:31:31.677

`LAST_INSERT_ID()`是特定于连接的，而不是特定于服务器的。

因此，它总是与*您*所做的最后一个插入有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:33:20.043

Autoincrement 将从先前的值自动增加，或使用您输入的值，因此您可以选择设置 ID 或让数据库选择 ID，并`last_insert_id()`返回该连接中最后插入的 id，自动或手动设置，不会事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:33:14.080

这将是服务器为您执行的查询提供的最后一个 ID。因此，在插入之后，您希望在同一脚本完成另一个插入之前获取它。

此外，在使用 pdo 时，只需将自动增量字段留出即可。包含它并将其设置为特定值可能会妨碍自动增量正常工作。

# c++ - 使用 g++ 编译时静态函数的模板特化

> ID：12860175
> 
> 赞同：3
> 
> 时间：2012-10-12T13:30:37.847
> 
> 标签：c++, templates, template-specialization

为什么以下代码在编译时不起作用：

```
$ g++ temp_main.cpp temp_spec.cpp
/tmp/ccirjc3Y.o:temp_spec.cpp:(.text+0x100): `my::say()' 的多重定义
/tmp/ccSo7IVO.o:temp_main.cpp:(.text$_ZN2myILi0EE3sayEv[my::say()]+0x0):
首先在这里定义 collect2: ld 返回 1 退出状态

```

我只在使用参数 0 时才尝试对静态函数进行专门化。

**temp_gen.h：**

```
#ifndef temp_gen_h
#define temp_gen_h

#include <iostream>

template<int N>
struct my
{
   static void say();
};

template<int N>
void my<N>::say()
{
   std::cout << "generic " << N << std::endl;
}

#endif 
```

**temp_spec.h：**

```
#ifndef temp_spec_h
#define temp_spec_h

#include <iostream>

#include "temp_gen.h"

template<>
void my<0>::say()
{
   std::cout << "specialized " << 0 << std::endl;
}

#endif 
```

**temp_spec.cpp：**

```
#include "temp_spec.h" 
```

**temp_main.cpp：**

```
#include "temp_gen.h"

int main(int argc, char* argv[])
{
   my<0>::say();  //should say "specialized 0"
   my<1>::say();  //should say "generic 0"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:33:14.350

我相信，由于您的模板专业化的实现位于标头中，因此您需要对其进行标记，`inline`以便编译器/链接器知道您可以违反一个定义规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:39:40.313

在您的`main.cpp`中，您没有专门化模板类，这是因为您没有包含`temp_spec.h`.

正如 Vaughn Cato 指出的（见评论），您应该将专用方法（不再是模板方法）的*定义*`temp_spec.cpp`移动到.

我认为（但我不是这方面的专家）您应该始终**将专业化直接放在通用模板下方**（在同一个头文件中），因为每当您包含它时，您还希望定义专门化的模板，否则您将发生此类错误时会感到困惑。但是，您可以只`temp_spec.h`在`temp_gen.h`.

~~此外，您不需要模板头文件的 .cpp 文件，因为永远不会有任何代码需要单独编译（模板类总是在使用它的另一个 .cpp 文件中编译，我认为重复的文件将被删除链接时，再次在链接时造成**麻烦，**在一种情况下你*没有*专门化它，一次你*做了*）~~[本段仅适用于通用模板类，不适用于（完全）专用类，因为它们在自己的编译单元中*需要一些代码，请参阅上面的注释和编辑。]*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T17:32:13.060

使用标准的 n3337 版本（强调我的）：

> **14.7.3 显式特化 [temp.expl.spec]**
> 
> **6/**如果模板、成员模板或类模板的成员被显式特化，则该特化应在第一次使用该特化之前声明，这将导致发生隐式实例化，**在每个翻译单元**中使用发生；不需要诊断。

因为在不可见的`main`特`my<0>::say`化中，会发生隐式实例化，并且您最终会遇到上述情况：*不需要诊断*（来自编译器）。

请注意，只能在声明其通用对应物之后才能声明特化。

# java - JAXB - 类集合的 PascalCase 包装器

> ID：12860178
> 
> 赞同：3
> 
> 时间：2012-10-12T13:30:44.690
> 
> 标签：java, xml, jaxb, jax-rs

我正在使用 JAXB 编写 JAX-RS 来编组我的对象。我有一个简单的对象，`NameValuePair`我想用 PascalCase 发送。一切正常，除了它被包裹在一个camelCase包装器中，`<nameValuePairs>`.

这是我的课：

```
@XmlRootElement(name = "NameValuePair")
public class NameValuePair implements Serializable {

    private String name = null;
    private String value = null;

    public NameValuePair( String name, String value ) {
        this.name = name;
        this.value = value;
    }

    @XmlElement(name = "Name")
    public String getName() {
        return name;
    }

    @XmlElement(name = "Value")
    public String getValue() {
        return value;
    }
} 
```

这是它的使用方式：

```
public Response getNameValuePairs() {
    NameValuePair[] nameValuePairs;
    try {
        nameValuePairs = manager.getNameValuePairs();
    } catch (Exception e) {
        return Response
                .status(Response.Status.INTERNAL_SERVER_ERROR)
                .build();
    }

    return Response
            .status(Response.Status.OK)
            .entity(nameValuePairs)
            .build();
} 
```

但是，返回的 XML 如下所示：

```
<nameValuePairs>
    <NameValuePair>
        <Name>A Name</Name>
        <Value>1</Value>
    </NameValuePair>
    <NameValuePair>
        <Name>Another Name</Name>
        <Value>2</Value>
    </NameValuePair>
</nameValuePairs> 
```

如何更改`<nameValuePairs>`为`<NameValuePairs>`与架构的其余部分匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:19:31.323

似乎数组名称用于 XML 的根节点。对我来说最简单的方法似乎是将您的实体包装在一个列表中：

```
@XmlRootElement(name="NameValuePairs")
public class NameValuePairs {
    List<NameValuePair> nameValuePairs;
} 
```

并返回：

```
public Response getNameValuePairs() {
    return Response
        .entity(new NameValuePairs(...))
        .build();
} 
```

# sql - 根据 where 子句的出现次数查找行

> ID：12860184
> 
> 赞同：0
> 
> 时间：2012-10-12T13:30:57.030
> 
> 标签：sql

我有一个这样定义的表：

```
CREATE TABLE A_TEST  (
    "ID"   NUMBER NOT NULL ENABLE,
    "TYPE" VARCHAR2(20 BYTE),
) 
```

*   ID 不是主键。
*   TYPE 可能为 NULL
*   一个 ID 我可以有 0、1 或多个 TYPE。

如果我想获得不同类型的 ID，我将编写以下查询：

```
SELECT distinct a1.ID FROM A_TEST a1
  JOIN A_TEST a2 on a2.ID = a1.ID and a2.type != a1.type 
```

但是我怎样才能找到我定义了单一类型的 ID？
（只有一行 Id 或多行 id 只有一个定义了类型）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:34:42.580

以下查询将返回表中只有一种 TYPE 的所有 ID。

```
SELECT ID FROM A_TEST
WHERE TYPE IS NOT NULL -- since TYPE column can be NULL for a given ID.
GROUP BY ID
HAVING COUNT(*) = 1 
```

例如

```
CREATE TABLE A_TEST ( ID INT, TYPE INT)
INSERT INTO A_TEST VALUES(1, NULL)
INSERT INTO A_TEST VALUES(2, 0)
INSERT INTO A_TEST VALUES(3, 0)
INSERT INTO A_TEST VALUES(3, 1)
INSERT INTO A_TEST VALUES(4, 1)
INSERT INTO A_TEST VALUES(4, 1)
INSERT INTO A_TEST VALUES(5, 0)
INSERT INTO A_TEST VALUES(5, NULL)

SELECT 
    ID 
FROM 
    A_TEST
WHERE 
    TYPE IS NOT NULL -- since TYPE column can be NULL for a given ID.
GROUP BY ID
HAVING COUNT(ID) = 1 
```

结果

```
ID
-----------
2
4
(2 row(s) affected) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:37:21.240

此示例考虑了 NULL 值类型：

```
SELECT ID
FROM A_TEST
WHERE TYPE IS NOT NULL
GROUP BY ID    
HAVING COUNT(DISTINCT TYPE)=1 
```

例如，参见[SQL Fiddle](http://sqlfiddle.com/#!3/aee30/3)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T14:12:09.353

澄清后，您的要求似乎是：

```
SELECT ID
FROM A_TEST
GROUP BY ID    
HAVING COUNT(DISTINCT TYPE) = 1
    OR COUNT(*) = 1 ; 
```

# image-processing - 两个开放轮廓的比较度量

> ID：12860185
> 
> 赞同：2
> 
> 时间：2012-10-12T13:30:59.540
> 
> 标签：image-processing

我正在验证应用于 2D 图像的图像分割算法。该算法生成轮廓段，即在二维空间中形成自由曲线的一组连接像素。这个想法是将这组像素与真实情况进行比较，在我的例子中，另一个由专家手动追踪的轮廓段。显示分割结果和相应手动（真实）分割的图像如下所示：

![](../Images/b91f2d9d4197e64d24431a6e30d6d3dc.png)

我正在尝试考虑一个足够的比较指标来验证分割结果。理想情况下，最好的度量是每个片段上对应像素对之间的点对点欧式距离，但是（如上图所示）片段的长度不同（即像素总数不同）因此必须丢弃像素到像素的比较。

你能建议我一个足够的指标来验证我的算法吗？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:36:16.467

如果曲线是闭合的，您可以计算曲线之间的面积。如果你能分辨出哪些像素属于一个片段，那就像计算`XOR`2 个像素集的集合一样简单。

这是我使用 Matlab 创建的示例：

![在此处输入图像描述](../Images/c278f257293072905eb89c3c888cc458.png) ![在此处输入图像描述](../Images/65f72c7e17fd6108a3c399369bce7d1e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T10:41:37.240

对于ground truth中的每个像素，取到分割结果中最近像素的距离。然后将所有地面实况像素的总和作为总误差。

这基本上是按距离加权的召回率。如果您从结果中的像素开始，它将类似于精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:29:41.170

您可以将每条线分成 n 条等长的线段，然后计算每条线段与其在另一条线上的对之间的欧几里得距离。

# html - 仅对 div 中的一个元素进行样式设置

> ID：12860188
> 
> 赞同：1
> 
> 时间：2012-10-12T13:31:10.263
> 
> 标签：html, css

目前我有

```
<div class="rightBoxesTop">
   <h3>My Pages</h3>
   <h3 style="line-height: 8px; width: 80px; font-size: 80%; margin-top: 7px;">
         show in-active <input id="show-in" type="checkbox"></h3>
</div> 
```

我想将内联样式移至 CSS。这是第二个 H3 的唯一方法一个 id 还是有一种方法可以引用类 rightBoxesTop 并使用类似第二个的东西？另外，如果您能告诉我这种样式是什么，那么我可以搜索有关如何正确使用它的关键字

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:32:50.900

您可以尝试设置第 2、第 3 和其他以下`h3`标签的样式：

```
.rightBoxesTop h3 + h3
{
    line-height: 8px; width: 80px; font-size: 80%; margin-top: 7px;
} 
```

您也可以使用 CSS3 选择器来设置第二个样式`h3`：

```
.rightBoxesTop h3:nth-child(2)
{
    line-height: 8px; width: 80px; font-size: 80%; margin-top: 7px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:52:11.457

如果您能够删除内联样式，那么您还可以为其添加一个类。

这使您可以选择通过其在 CSS 中的类轻松设置样式。

更新：因为您必须删除内联样式，所以不能在 CSS 中覆盖它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:35:08.180

您可以使用选择器`div.rightBoxesTop h3 + h3`。它只会对前面有另一个 h3 元素的 h3 元素进行样式设置。这确实意味着，如果你有更多它们，它们都会被样式化，除了第一个。

但在这种情况下，我会考虑向第二个 h3 添加一个类（而不是一个 id）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:40:48.497

您可以`.rightBoxesTop h3+h3{}`按照人们的建议使用，但要小心，如果您添加另一个 h3，最后 2 个 h3 将具有该样式，或者如果您在 .rightBoxesTop 内创建另一个具有多个 h3 的 div，它们也会获得该样式，所以精确方式是：

```
.rightBoxesTop>h3:first-child+h3{
//your css here
} 
```

这意味着“第一个孩子的（>”意味着直接孩子，所以如果有更多的嵌套级别，他们不会计算在内）下一个 h3，将获得 css“

# javascript - 一年中的日期循环

> ID：12860190
> 
> 赞同：2
> 
> 时间：2012-10-12T13:31:27.090
> 
> 标签：javascript

我正在尝试从一个月中的某一天开始循环获取日期。该代码在前几天有效，从那时起它返回随机日期。

这里有什么帮助吗？

```
var now = new Date();
var initDate = new Date(now.getYear() + 1900, 0);

for (var i = 1 ; i <366 ; i++) {
    var day = dateFromDay(i, initDate);
    document.write(" Day " + i + " : " + day);
    document.write("<br>");
}

function dateFromDay(day, initDate) {
    var months = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", 
                   "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];

    var cur = new Date(initDate.setDate(day));
    cur = months[cur.getMonth()] + " " + cur.getDate();
    return cur;
} 
```

输出：

```
...
...
Day 29 : Jan 29
Day 30 : Jan 30
Day 31 : Jan 31
Day 32 : Feb 1
// From here the output gets messed  up
Day 33 : Mar 4
Day 34 : Apr 3
Day 35 : May 5
Day 36 : Jun 5
Day 37 : Jul 7
Day 38 : Aug 7
Day 39 : Sep 8
Day 40 : Oct 10
Day 41 : Nov 10
Day 42 : Dec 12
Day 43 : Jan 12
Day 44 : Feb 13
...
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:35:53.150

调用`setDate()`您的“initDate”变量**会更新该日期**。因此，一旦您从一月溢出到二月，下一个调用将立即溢出到*下个月*。

您不需要“initDate”变量。**在每次调用函数**时，从新构建的日期开始，即当年、一月 (0) 以及您想要的任何日期。生成的 Date 实例将是您的日期。

因此：

```
function dayNumberToDate( dayNumber ) {
  var thisYear = new Date().getFullYear(); // no need to add 1900
  return new Date(thisYear, 0, dayNumber);
}

alert(dayNumberFromDate( 271 )); // alerts Thu Sep 27 2012 00:00:00 GMT-0500 (CDT) (for me) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:40:48.590

将下面给出的代码移到您的 for 循环中，在此行之前`var day = dateFromDay(i, initDate);`

```
 var now = new Date();
 var initDate = new Date(now.getYear() + 1900, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:37:46.770

更改以下行：

```
var cur = new Date(initDate.setDate(day)); 
```

对于这个：

```
var cur = new Date();
cur.setDate( initDate.getDate()+day ); 
```

# facebook-like - 如何获取“喜欢”类别的完整列表？

> ID：12860196
> 
> 赞同：0
> 
> 时间：2012-10-12T13:31:37.527
> 
> 标签：facebook-like, categories

我需要获取出现在[https://graph.facebook.com/me/likes](https://graph.facebook.com/me/likes)中的完整类别列表。这是建立一个基于Facebook喜欢的用户类别和一些其他数据的映射系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:04:32.937

只需将您的数据保存在字典或 /me/likes 响应中每个页面的某个列表中

例如在 Facepy

```
my_likes = graph.get('me/likes', page=True)

my_categories = []

for like in my_likes["data"]:
            my_categories.append(like["category"])

my_categories = set(my_categories) 
```

# php - PHP PDO SQLSERVER 输出参数问题

> ID：12860197
> 
> 赞同：1
> 
> 时间：2012-10-12T13:31:41.170
> 
> 标签：php, sql-server, pdo

```
$query = '  Declare @MemCode Varchar(12);
        Declare @ConCounter decimal(28,0);
        Set @MemCode = null;
        Set @ConCounter = null; 
        EXECUTE spQMInsEventMember_TMS 
        "'.$masterEventCode.'",
        "'.$eventCode.'",
        '.$memberContactTitle.',
        "'.$guestFirstName.'",
        "'.$guestLastName.'",
        '.$address.',
        '.$townDescription.',
        '.$countryCode.',
        '.$postZip.',
        '.$STD.',
        '.$phone.',
        "'.$guestEmail.'",
        '.$isMember.',
        '.$divisionCode.',
        '.$statusCode.',
        '.$subStatusCode.',
        '.$memberTypeCode.',
        '.$memberTitles.',
        '.$memberSubType.',
        '.$classCode.',
        '.$subClassCode.',@MemCode OUTPUT,@ConCounter OUTPUT; 
        SELECT @MemCode AS member_code;
        SELECT @ConCounter AS contact_counter;';
        //print_r($query);

        $res = $this->dbh->query($query); 
        $result = $res->fetchAll();
        print_r($result); 
```

存储过程运行良好，如果我在 SQLSERVER 上运行它，我会得到 2 行。但是当我从 PHP 运行它时，我没有得到结果数组中返回的 member_code 或 contact_counter。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:47:49.197

是否可能是因为多个 select 语句？如果您的查询在 sql 中运行但在 PHP 中不运行，您应该尝试打印出您的参数以查看它们是否设置正确。

# c++ - 错误：不允许指向不完整类类型的指针。我该怎么做？

> ID：12860199
> 
> 赞同：3
> 
> 时间：2012-10-12T13:31:47.033
> 
> 标签：c++, class, function, pointers

所以我一直被困在从一个类共享一个函数到另一个类的问题上，到目前为止我发现的每一个解决方案都没有解决我的问题。这里有一个实例（我向你保证还有其他实例），[http://software.intel.com/en-us/articles/cdiag436]

酒吧.h

```
#ifndef __Bar_h_
#define __Bar_h_
#include "BaseApplication.h"  
#include <Foo.h>  

class Foo;  
Foo *foo;  

class Bar : BaseApplication
{
   public:
Bar(void);
~Bar(void);
   protected:
virtual void barCreate(void);
};
#endif 
```

条形图.cpp

```
#include "Bar.h"
#include <Foo.h>
Bar::Bar(void){}
Bar::~Bar(void){}
void Bar::barCreate(void)
{
     if(foo->foobar()==true) //error: pointer to incomplete class type is not allowed
        {//stuff}
} 
```

Foo.h

```
#ifndef __foo_h_
#define __foo_h_
class Foo
{
public:
Foo(void);
~Foo(void);
bool foobar(void);
};
#endif 
```

Foo.cpp

```
#include "Foo.h"
Foo::Foo(void){}
bool Foo::foobar(void){ return true; } 
```

如果我能得到一些指示或解释我哪里出错了，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:59:09.913

您误读了错误。它不是在抱怨有一个指向不完整类型的指针，而是在*取消引用*它。

```
if(foo->foobar()==true) 
```

此时的类型`foo`是不完整的类型，因此编译器无法检查它是否会有`foobar`成员函数（或成员函子）。

基本上，对于不完整的类型，您可以声明和定义指针或引用，声明接口（接受或返回类型的函数）。但除此之外，您不能创建该类型的对象，或者*将*指针/引用用于复制指针/引用之外的任何内容。

关于你做错了什么，你需要更详细地查看你的真实文件。要么您没有包含定义的标头`Foo`，要么您有多种`Foo`类型（不同的命名空间？一个定义类型，另一个具有前向声明）或者您的包含防护错误，即使您包含标题，防护也会丢弃标题。请注意，在包含定义的标头之后，`Foo`您不需要（也不应该）提供类型的前向声明，因为这很容易导致在不同的上下文中进行*多个*声明。`Foo`如果删除前向声明无法编译，找出原因并修复它。

# c# - 在 Windows 应用商店应用中显示 html

> ID：12860206
> 
> 赞同：3
> 
> 时间：2012-10-12T13:32:07.907
> 
> 标签：c#, .net, html, xaml, windows-store-apps

我正在尝试在我的 Windows 应用商店应用程序 (C#/XAML) 中显示一个 html。但我找不到合适的方式来显示它与透明背景。有什么方法可以相应地了解 WebView 的应用程序背景颜色和格式 html 吗？或者我应该更好地添加另一个页面来显示 html-description，并将其背景设置为我想要的背景（在代码中）？或者也许有更好的方法？

PS如果可能的话，我也希望能够处理超链接点击。我知道我可以在 WebView 中这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T10:52:37.687

我的理解是 WebView 控件实际上呈现为 XAML 层之上的单独表面，因此不支持透明度。您最好的选择是按照您的建议进行操作：查找当前应用程序背景颜色并相应地设置 WebView HTML 的背景。

获取应用背景颜色很容易；类似的东西`Resources["ApplicationPageBackgroundThemeBrush"]`可以解决问题。

AFAIK，将该颜色应用于您希望导航到的任何页面都比较棘手。一种可能有效的方法（尽管我自己没有尝试过）是使用`HttpClient`下载页面的原始 HTML 并在调用之前修改背景颜色`WebView.NavigateToString()`，而不是直接调用`WebView.Navigate()`.

如果您可以编辑页面源代码，您可以通过添加一些 JS 脚本来更改背景颜色来简化流程，然后使用`WebView.InvokeScript()`.

# asp.net - 如何在页面上显示网格视图，然后在同一页面上显示列表视图

> ID：12860214
> 
> 赞同：0
> 
> 时间：2012-10-12T13:32:15.287
> 
> 标签：asp.net

我是新手，需要一些信息。我想在同一页面上创建一个网格视图和一个列表视图，但是我在 2 个函数或 2 个子程序中使用相同的 em。

以及如何调用函数/子，当访问页面时，默认显示是 Gridview，然后我在它下面有一个图标，所以当我点击它时，它调用了 listview 函数/子。还是我调用 gridview 和 listview 然后使用 GridView1.Visible = false 或 ListView1.Visible = false 来显示/隐藏视图！？

所以。1.子或功能。2.第一次访问时如何调用Gridview作为默认视图，如何调用listview，带有图标。If then Else or !?

我在 asp.net VB 中编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:44:10.303

在您的 .aspx 文件中，您同时创建 ListView 和 GridView，但将 ListView 的 Visible-Attribute 设置为 false。然后，在图标的 Click-EventHandler 中，您可以将 ListView 的可见性设置为 true，并将 GridView 的可见性设置为 false，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:45:16.623

您可以使用`PlaceHolder control`

```
PlaceHolder.Control.Add(YourGridView); 
```

或者

```
 PlaceHolder.Control.Add(YourListView); 
```

注意：您还可以加载两个控件并进行调整`Visible property`

样本 ：

```
<asp:PlaceHolder ID="PlaceHolder1" runat="server" /> 
<asp:Button   
         ID="Button1"   
         runat="server"   
         Text="Add Control"   
         OnClick="Button1_Click"  /> 
```

代码背后

```
protected void Button1_Click(object sender, EventArgs e)  
{  
        var YourGridView = .....;
        PlaceHolder1.Controls.Add(YourGridView);  
} 
```

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.placeholder.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.placeholder.aspx)

# dynamics-crm - CRM 2011 插件链接

> ID：12860216
> 
> 赞同：0
> 
> 时间：2012-10-12T13:32:17.247
> 
> 标签：dynamics-crm, dynamics-crm-2011, dynamics-crm-online

只是一个关于 CRM 2011 插件行为的快速问题。如果我有一个插件，比如帐户，它会更新另一个实体，比如联系人，在联系人消息上注册的插件将触发（正确吗？）。

如果这些插件被注册为同步，Account插件是否必须等待Contact插件完成执行才能完成执行？插件的链接是否会造成阻塞情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:29:12.780

克里斯，

对于您的第一个问题，在联系人消息上注册的插件会触发吗？那是对的。如果您选择了同步，则意味着：

帐户插件被触发对联系人实体进行一些更改，然后联系人实体插件对联系人实体进行一些更改。仅当联系人插件完成且没有错误时，所有更改才会应用，否则联系人插件会回滚以及帐户插件。因此不会应用任何更改。

使用异步意味着如果帐户插件完成，无论联系人插件是否正确完成，更改都会应用于联系人实体。

# jsf - 如何使选择一个菜单不可选择/不可更改

> ID：12860222
> 
> 赞同：0
> 
> 时间：2012-10-12T13:32:30.227
> 
> 标签：jsf, selectonemenu

如何使`<h:selectOneMenu>`不可选择/不可更改。但仍然应该提交。它应该仅供用户参考。如果我们使用`disabled=true`它将不会提交。

除了禁用如何使选择一个菜单不可更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:13:28.787

只需禁用它并在隐藏输入中提供值。

```
<h:selectOneMenu value="#{bean.value}" disabled="true">...</h:selectOneMenu>
<h:inputHidden value="#{bean.value}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:30:37.420

只需使用 partialsubmit="true" 和 disabled="true" 它就会提交值

# java - 试图实现 jcifs 和 UniAddress 并得到 NoClassDefFoundError？

> ID：12860223
> 
> 赞同：4
> 
> 时间：2012-10-12T13:32:35.720
> 
> 标签：java, jcifs

我正在使用 JCIFS (http://jcifs.samba.org/)。我的代码很简单，取自 Login.java 示例：

```
import jcifs.*;
import jcifs.smb.*;

public class netp {
    public static void main( String argv[] ) throws Exception {
     System.out.println("START");

     String ip = "10.0.0.1";
     String domain = "domain";
     String user = "user";
     String pass = "pass";

    UniAddress dc = UniAddress.getByName( ip );
    NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication( domain + ";" + user + ":" + pass );
    SmbSession.logon( dc, auth );

     System.out.println("END");

     return;
    }
} 
```

如果我这样做，编译这个工作：

```
javac -cp jcifs-krb5-1.3.17.jar netp.java 
```

但是，如果我这样运行它：

```
java -cp jcifs-1.3.17.jar netp 
```

我得到：

```
Error: Could not find or load main class netp 
```

我究竟做错了什么？

我在这里上传了完整的源代码：

```
https://www.box.com/s/po4frdmy0obqiroy9anp 
```

注意：我在 Windows 中执行所有这些操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:07:00.143

似乎您的 myJavaApp 类在某个包中，除了根本没有设置类路径之外，您还省略了包名称。

我的测试目录结构：

```
.
\--- jcifs-1.3.17.jar
\--- testapp
     \--- myJavaApp.java 
```

我是这样编译的：

```
javac -cp jcifs-1.3.17.jar testapp/myJavaApp.java 
```

它按预期在 testapp 文件夹中给出了 myJavaApp.class 。我已经像这样在linux上运行它：

```
java -cp .:jcifs-1.3.17.jar testapp.myJavaApp 
```

在这样的窗口上：

```
java -cp .;jcifs-1.3.17.jar testapp.myJavaApp 
```

它扔了

```
jcifs.util.transport.TransportExceptionjava
java.net.NoRouteToHostException: No route to host 
```

这意味着 myJavaApp 已成功运行。

如果我们删除 testapp 目录，例如

```
.
\--- jcifs-1.3.17.jar
\--- myJavaApp.java 
```

它编译为：

```
 javac -cp jcifs-1.3.17.jar myJavaApp.java 
```

在 linux 上运行：

```
java -cp .:jcifs-1.3.17.jar myJavaApp 
```

用于窗户

```
java -cp .;jcifs-1.3.17.jar myJavaApp 
```

编辑：

所有 java[c] 命令都是从 root(.) / testing 目录运行的

编辑^2：

我已经下载了您的代码并将自己放在 netp 目录中。编译代码如下：

```
C:\netp>"C:\Program Files\Java\jdk1.6.0_25\bin\javac.exe" -cp jcifs-krb5-1.3.17.jar netp.java 
```

并像这样成功运行它：

```
C:\netp>"C:\Program Files\Java\jdk1.6.0_25\bin\java.exe" -cp .;jcifs-krb5-1.3.17.jar netp 
```

它输出：

```
START
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:16:59.727

运行程序时，您还需要在类路径上提供 jar：

```
java -cp jcifs_1.3.17/jcifs-1.3.17.jar myJavaApp 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T07:13:37.313

尝试将当前目录也添加到类路径中：

```
java -cp .:jcifs-krb5-1.3.17/jcifs-krb5-1.3.17.jar myJavaApp 
```

如果您使用的是 Windows，请将冒号替换为分号：`java -cp .;jcifs-krb5-1.3.17/jcifs-krb5-1.3.17.jar myJavaApp`

干杯，

# encoding - 使用 asn.1 编码大整数时的奇怪之处

> ID：12860226
> 
> 赞同：4
> 
> 时间：2012-10-12T13:32:39.747
> 
> 标签：encoding, asn.1

我在 ASN.1 中发现了很多对整数编码要求的引用，并且整数本质上是有符号的对象

例如 TLV 02 02 0123。

但是，我有一个 256 位整数（在证书内）编码为 30 82 01 09 02 82 01 00 d1 a5 xx xx xx... 02 03 010001

30 开始 82 2 字节长度 0109 265 字节

02 整数 82 2 字节长度 0100 256 字节 d1 a5 xxxx

d1 是令人不安的部分，因为前导位是 1，这意味着这个 256 位数字是有符号的，而实际上它是一个无符号数字，即公共 rsa 密钥。有符号约束是否适用于 > 64 位的整数？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:56:22.850

BER/DER 使用 2s 补码表示来编码整数值。这意味着第一位（不是字节）确定数字是正数还是负数。这意味着有时需要添加一个额外的前导零字节以防止第一位导致整数被解释为负数。请注意，前 9 位全为零是无效的 BER/DER。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T15:48:12.343

是的你是对的。对于任何非负 DER/BER 编码`INTEGER`- 无论其长度如何 - 第一个有效负载字节的 MSB 为 0。

生成此类密钥的程序不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:54:00.530

“有符号约束”（实际上是一条规则）完全适用于任何大小的整数。但是，根据域的不同，您可能会在域对象的编码方式中发现各种奇怪之处。不幸的是，这是必须学习和解释的东西。

# php - Wordpress 媒体上传中的自动 MP3 压缩

> ID：12860227
> 
> 赞同：0
> 
> 时间：2012-10-12T13:32:50.170
> 
> 标签：php, javascript, wordpress, mp3, transcoding

目前 MP3 文件超过了 wordpress 中设置的限制。虽然我将通过我在该主题上找到的一些信息来提高这个限制，但 Mp3 仍然相当大。如果该站点适合我，我会简单地压缩它们。所以我需要找到一种方法来压缩它们。我认为它需要保存那个大文件，将其转码为一个较小的文件，然后删除旧文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:12:11.423

> 我认为它需要保存那个大文件，将其转码为一个较小的文件，然后删除旧文件

这是对的。您始终必须先存储内容。不过，编码不应该通过 PHP 完成，有更有效的库可以做到这一点。例如，您可以通过 php.ini 中的`system()`调用在命令行上运行 lame mp3 编码器。请注意，尽管编码可能会失败，并且需要很长时间。因此，您应该通过 cron 为大文件运行更干净的脚本，而不是尝试通过上传脚本删除它们。

# c# - 每次应用程序运行时，如何在数据库中播种特定值？

> ID：12860229
> 
> 赞同：2
> 
> 时间：2012-10-12T13:32:49.763
> 
> 标签：c#, database, asp.net-mvc-3, entity-framework

我有一个使用 SSN 在数据库中查找人员的应用程序。我试图在每次运行应用程序时强制我用于测试目的的 10 个“ssn”播种。我目前正在删除表格并使用我的虚假数据重新填充数据，但我们正在将数据从真实数据库导入到我们的数据库中，我不再想这样做。

有人可以带我去一个网站或给我一个提示我该如何去做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:53:40.687

在 Entity Framework 中，您可以自定义不会删除数据库的数据库初始化程序（请参阅[本页](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)末尾附近）。然后，您可以将错误数据放入 Initialize Database 方法中，以便它每次都运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:08:22.500

你已经用 Asp.net MVC3 标记了这个？

如果这是一个网络应用程序，我会考虑在 Global.aspx 中使用 Application_start 事件

# java - 将元素与 xmlUnit 中的空元素进行比较时发现意外差异

> ID：12860230
> 
> 赞同：3
> 
> 时间：2012-10-12T13:32:51.807
> 
> 标签：java, xmlunit

比较这两个 XML 片段：

```
testXml:
<ELEMENT1>
    <CHILD1></CHILD1>
</ELEMENT1>

actualXml:
<ELEMENT1>
    <CHILD1>notEmpty</CHILD1>
</ELEMENT1> 
```

使用：

```
Diff diff = new Diff(testXml, actualXml);
Detailed detailedDiff = new DetailedDiff(diff); 
```

现在`detailedDiff.getAllDifferences();`将返回一个`DifferenceConstants.HAS_CHILD_NODES_ID`差异，如果您将差异打印到控制台，它看起来像这样：

```
Expected presence of child nodes to be 'false' but was 'true' - comparing <CHILD1...> at /ELEMENT1[1]/CHILD1[1] to <CHILD1...> at /ELEMENT1[1]/CHILD1[1] 
```

我的问题是，为什么 type`DifferenceConstants.HAS_CHILD_NODES_ID`和 not有区别`DifferenceConstants.TEXT_VALUE_ID`？两个 XML 片段的结构相同，但两者的文本值不同。

那么，为什么这不会引发差异呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:54:18.920

尝试使用这个`ElementQualifier`：

```
Diff diff = new Diff(testXml, actualXml);
diff.overrideElementQualifier(new RecursiveElementNameAndTextQualifier() );
Detailed detailedDiff = new DetailedDiff(diff); 
```

这是来自 javadoc 的描述：

> ```
> public RecursiveElementNameAndTextQualifier() 
> ```
> 
> 使用元素名称和文本嵌套在元素更深处的任意级别的子元素以比较元素。检查所有节点，而不仅仅是第一个子元素。 **不忽略空文本节点。**

这里感兴趣的是“不忽略空文本节点”。

似乎默认`ElementQualifier`将空节点视为缺失节点，并且仅检查与一个节点相关的第一个错误。因此，在您的情况下，可能仅抛出“HAS_CHILD_NODES_ID”，而不是还包括“TEXT_VALUE_ID”。

至少，`RecursiveElementNameAndTextQualifier`更深入。

# facebook - 通过外部页面更新 Facebook 页面

> ID：12860231
> 
> 赞同：0
> 
> 时间：2012-10-12T13:33:01.710
> 
> 标签：facebook

我是 Facebook 应用程序开发的新手，我遇到了这个问题：我创建了一个 Facebook 页面（所以我是管理员）。现在我想要一个带有简单文本区域和“发送”按钮的外部网页。因此，即使没有 Facebook 帐户，拥有此页面链接的每个人都可以更新此 Facebook 页面。此状态更新应由我的页面管理员帐户发送。我以为我可以编写一个应用程序并授权该应用程序在页面上发布_streams，授权后我可以切换 $fbuser = $facebook->getUser(); 到 $fbuser = IDOFMYACCOUNT。因此，fbuser 将始终是我允许发布到页面的帐户。如果我尝试将此应用程序与其他浏览器一起使用（未登录到我的 fb 帐户），我会收到此错误：(#200) The user has'

所以这就是我认为我可以解决我的问题的方式。你们知道我（以及其他没有 FB 帐户或不想登录或我不想将他们添加到 Facebook 页面管理员的人）如何更新 Facebook 状态来自外部网站的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:57:47.813

您将需要将您的令牌“烘焙”到您的代码和某种管理后端，以便在访问令牌过期之前更新它。

`manage_pages`如果您想作为页面发布，您还需要权限和页面令牌。

这可以从`/me/accounts`

# ruby - Ruby 计数数组中字符串中的匹配数

> ID：12860234
> 
> 赞同：4
> 
> 时间：2012-10-12T13:33:05.610
> 
> 标签：ruby

我有一个字符串，例如：

```
'This is a test string' 
```

和一个数组：

```
['test', 'is'] 
```

我需要找出数组中有多少元素存在于字符串中（在这种情况下，它将是 2）。这样做的最佳/红宝石方式是什么？另外，我这样做了数千次，所以请记住效率。

到目前为止我尝试了什么：

```
array.each do |el|
 string.include? el #increment counter
end 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:39:47.373

```
['test', 'is'].count{ |s| /\b#{s}\b/ =~ 'This is a test string' } 
```

**编辑：**针对全词匹配进行了调整。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:44:00.320

```
['test', 'is'].count { |e| 'This is a test string'.split.include? e } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:47:57.653

你的问题模棱两可。

如果您正在计算出现次数，那么：

```
('This is a test string'.scan(/\w+/).map(&:downcase) & ['test', 'is']).length 
```

如果您正在计算代币，那么：

```
(['test', 'is'] & 'This is a test string'.scan(/\w+/).map(&:downcase)).length 
```

`Array#&`您可以通过使用`Hash`( 或)替换某些操作来进一步加快计算速度`Set`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:44:45.233

凯尔的回答为您提供了简单实用的工作方式。但是，请允许我指出，当 n（字符串长度和/或匹配字符串的数量）攀升至数百万时，存在更有效的算法来解决您的问题。我们[在生物学中经常遇到这样的问题](http://en.wikipedia.org/wiki/Multiple_sequence_alignment)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T14:00:48.773

如果字符串或数组中没有重复项，以下将起作用。

```
str = "This is a test string"
arr = ["test", "is"]

match_count = arr.size - (arr - str.split).size # 2 in this example 
```

# c# - C#，在 UserControl 中编辑不继承图形

> ID：12860236
> 
> 赞同：0
> 
> 时间：2012-10-12T13:33:10.043
> 
> 标签：c#, user-controls

我有一个继承自 UserControl 的自定义控件 MyControl。

如果我更改 MyControl 图形属性（如 ForeColor、backgroundImage 等），这将应用于我的所有 MyControl 实例，但不是。

为什么？

**编辑**

我认为问题在于图像存储在包含 MyControl（例如表单）的 Control 的 resx 文件中。调用此行时，将应用旧图像。

```
resources.ApplyResources(this.myControl1, "myControl1"); 
```

因此，当我在 MyControl 设计器类中进行更改时，这不适用于 myControl1 实例。不幸的是，这条线是在表单设计器中自动生成的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:57:06.747

您应该在 MyControl 的构造函数或控件的设计器中进行设置（例如更改背景图像和内容），而不是 Form。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:28:37.553

当然不是。当您将控件添加到表单时，它会获取属性并在 form.designer.cs 中添加代码，设置它们。在表单设计器中更改它们，这些更改会保留在 .designer.cs

如果您随后更改控件本身，要获取这些更改，您必须删除并再次添加它。

唯一的方法是让属性在设计器中不可配置。

# objective-c - 如何找到不规则形状（由 3 个圆圈构成）和直线之间的碰撞点

> ID：12860242
> 
> 赞同：1
> 
> 时间：2012-10-12T13:33:23.850
> 
> 标签：objective-c, math, drawing, cgcontext

我正在制作一个程序，其中许多奇怪的形状被绘制到画布上。现在我正在尝试实施最后一个，也是最难的一个。

在这个特定的形状中，我需要一种方法来找到线条撞击形状的位置（在 2d 画布上）。下图是我现在拥有的示例。

![描述1](../Images/9cbd52e8c69d8f14113dc463264be049.png)

黑点是我知道的点（我也有三个空心圆的中心位置和这些圆的半径）。三条外线中的每一条都需要一条朝向中心点的线，在它与圆相交的点处结束。这种形状可以旋转 90、180 或 270 度。

形状应如下所示：

![描述2](../Images/d1b3eee5348cc0527398d998ce28a4f0.png)

如果您需要任何其他信息，请在评论中询问我。我数学不是很好所以请温柔，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:08:14.567

如果*A*和*B*是形成一条线的点，那么您可以使用坐标来描述该线上的任何点：

> *x* = *t* · *A [x]* + (1−<i>t)· *B [x]*
> *y* = *t* · *A [y]* + (1−<i>t)· *B [y]*
> 0 ≤ *t* ≤ 1

您还可以将中心为*M*和半径为*r*的圆描述为

> ( *x* - *M [x]* ) ² + ( *y* - *M [y]* ) ² = *r* ²

因此，从直线方程中取出*x*和*y*，并将它们代入圆方程。您在*t*中获得一个*二次方程*。它的两个解描述了直线和圆之间的两个交点。在您的示例中，其中只有一个位于线段上，即满足 0 ≤ *t* ≤ 1。另一个描述了线段延伸超过其端点的点。*将t*的正确值带回直线方程，即可获得交点的*x*和*y坐标。*

 ***如果您事先不知道要与给定线相交哪个圆，则将所有三个相交，然后选择最合适的点。这可能是最接近线段外部起点的点。在两个交点都位于线段上的情况下也是如此。***

# python - Raspberry Pi 上的 OpenCV 人脸检测速度很慢

> ID：12860243
> 
> 赞同：7
> 
> 时间：2012-10-12T13:33:25.520
> 
> 标签：python, opencv, webcam, raspberry-pi

我正在使用 OpenCV 和 Python 编码测试 Raspberry Pi。视频流效果很好（中等速度），但是当我在流上运行人脸检测时，CPU 被固定并且刷新图像很慢。

这就是我所拥有的。如何优化我的代码？

```
#!/usr/bin/env python
import sys
import cv2.cv as cv
from optparse import OptionParser
min_size = (20, 20)
image_scale = 2
haar_scale = 1.2
min_neighbors = 2
haar_flags = 0

def detect_and_draw(img, cascade):
    # allocate temporary images
    gray = cv.CreateImage((img.width,img.height), 8, 1)
    small_img = cv.CreateImage((cv.Round(img.width / image_scale),
                               cv.Round (img.height / image_scale)), 8, 1)
                               cv.Round (img.height / image_scale)), 8, 1)

    # convert color input image to grayscale
    cv.CvtColor(img, gray, cv.CV_BGR2GRAY)

    # scale input image for faster processing
    cv.Resize(gray, small_img, cv.CV_INTER_LINEAR)

    cv.EqualizeHist(small_img, small_img)

    if(cascade):
        t = cv.GetTickCount()
        faces = cv.HaarDetectObjects(small_img, cascade, cv.CreateMemStorage(0),
                                     haar_scale, min_neighbors, haar_flags, min_size)
        t = cv.GetTickCount() - t
        print "detection time = %gms" % (t/(cv.GetTickFrequency()*1000.))
        if faces:
            for ((x, y, w, h), n) in faces:
                # the input to cv.HaarDetectObjects was resized, so scale the 
                # bounding box of each face and convert it to two CvPoints
                pt1 = (int(x * image_scale), int(y * image_scale))
                # bounding box of each face and convert it to two CvPoints
                pt1 = (int(x * image_scale), int(y * image_scale))
                pt2 = (int((x + w) * image_scale), int((y + h) * image_scale))
                cv.Rectangle(img, pt1, pt2, cv.RGB(255, 0, 0), 3, 8, 0)

    cv.ShowImage("result", img)

if __name__ == '__main__':

    parser = OptionParser(usage = "usage: %prog [options] [camera_index]")
    parser.add_option("-c", "--cascade", action="store", dest="cascade", type="str", help="Haar cascade file, default %default", default = "/usr/local/share/OpenCV/haarcascades")
    (options, args) = parser.parse_args()

    cascade = cv.Load(options.cascade)
    capture = cv.CreateCameraCapture(0)
    cv.NamedWindow("result", 1)

    if capture:
        frame_copy = None
        while True:
            frame = cv.QueryFrame(capture)
            if not frame:
                cv.WaitKey(0)
                break
            if not frame_copy:
                frame_copy = cv.CreateImage((frame.width,frame.height),
                                            cv.IPL_DEPTH_8U, frame.nChannels)
            if frame.origin == cv.IPL_ORIGIN_TL:
                cv.Copy(frame, frame_copy)
            else:
                cv.Copy(frame, frame_copy)
            else:
                cv.Flip(frame, frame_copy, 0)

            detect_and_draw(frame_copy, cascade)

            if cv.WaitKey(10) != -1:
                break
    else:
        image = cv.LoadImage(input_name, 1)
        detect_and_draw(image, cascade)
        cv.WaitKey(0)

    cv.DestroyWindow("result") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T17:51:19.673

我可以建议你使用 LBP 级联而不是 Haar。众所周知，它的检测速度快 6 倍，而且检测率非常接近。

但我不确定它是否可以在旧版 python 界面中访问。来自新包装器的`cv2.CascadeClassifier`类可以对 LBP 级联进行检测。

# c# - 提取字符串中的数字

> ID：12860251
> 
> 赞同：1
> 
> 时间：2012-10-12T13:33:50.560
> 
> 标签：c#

我有一个字符串列表

```
goal0=1234.4334abc12423423
goal1=-234234
asdfsdf 
```

我想从以目标开头的字符串中提取数字部分，在上述情况下是

```
1234.4334, -234234 
```

（如果两个数字片段得到第一个）我应该如何轻松地做到这一点？

请注意，“goal0=”是字符串的一部分，goal0 不是变量。因此，我想要“=”之后的第一个数字片段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T13:42:06.403

您可以执行以下操作：

```
 string input = "goal0=1234.4334abc12423423";
        input = input.Substring(input.IndexOf('=') + 1);

        IEnumerable<char> stringQuery2 = input.TakeWhile(c => Char.IsDigit(c) || c=='.' || c=='-');
        string result = string.Empty;
        foreach (char c in stringQuery2)
            result += c;
        double dResult = double.Parse(result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:56:35.503

试试这个

```
string s = "goal0=-1234.4334abc12423423";
string matches =  Regex.Match(s, @"(?<=^goal\d+=)-?\d+(\.\d+)?").Value; 
```

正则表达式说

*   `(?<=^goal\d+=)`- 积极的向后看，这意味着回头看并确保`goal(1 or more number)=`在字符串的开头，但不要让它成为比赛的一部分
*   `-?`- 可选的减号（`?`表示 1 或更多）
*   `\d+`- 一位或多位数字
*   `(\.\d+)?`- 小数点后跟 1 个或多个数字，这是可选的

如果您的字符串包含多个小数点，这将起作用，并且如果有的话，它只会采用第一个小数点后的第一组数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:37:57.057

使用正则表达式进行提取：

```
x = Regex.Match(string, @"\d+").Value; 
```

现在使用以下命令将结果字符串转换为数字：

```
finalNumber = Int32.Parse(x); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T13:41:50.557

请试试这个：

```
string sample = "goal0=1234.4334abc12423423goal1=-234234asdfsdf";

Regex test = new Regex(@"(?<=\=)\-?\d*(\.\d*)?", RegexOptions.Singleline);
MatchCollection matchlist = test.Matches(sample);

string[] result = new string[matchlist.Count];
if (matchlist.Count > 0)
{
    for (int i = 0; i < matchlist.Count; i++)
    result[i] = matchlist[i].Value;
} 
```

希望能帮助到你。

起初我没有得到这个问题。对不起，但它现在有效。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T13:37:47.683

我认为这个简单的表达式应该有效：

```
Regex.Match(string, @"\d+") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T13:39:57.970

您可以使用 C# 中的旧 VB`Val()`函数。这将从字符串的前面提取一个数字，并且它已经在框架中可用：

```
result0 = Microsoft.VisualBasic.Conversion.Val(goal0);
result1 = Microsoft.VisualBasic.Conversion.Val(goal1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T13:43:52.707

```
string s = "1234.4334abc12423423";
var result = System.Text.RegularExpressions.Regex.Match(s, @"-?\d+"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-12T14:10:57.170

```
List<String> list = new List<String>();

list.Add("goal0=1234.4334abc12423423");
list.Add("goal1=-23423");
list.Add("asdfsdf");

Regex regex = new Regex(@"^goal\d+=(?<GoalNumber>-?\d+\.?\d+)");

foreach (string s in list)
{
    if(regex.IsMatch(s))
    {
        string numberPart = regex.Match(s).Groups["GoalNumber"];

        // do something with numberPart
    }
} 
```

# regex - 尝试匹配一个字符串并将其添加到替换中

> ID：12860255
> 
> 赞同：2
> 
> 时间：2012-10-12T13:33:53.150
> 
> 标签：regex, linux, bash, sed

我正在尝试使用 sed 和正则表达式将字符串添加到行尾。

我有以下字符串：

```
disable_functions = pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority, 
```

我试图在它的末尾添加字符串：

```
exec,system,shell_exec,passthru, 
```

我的尝试如下：

```
sed -ie 's/disable_functions = .*[a-zA-z,]$/disable_functions = $1exec,system,shell_exec,passthru,/gI' /etc/php5/apache2/php.ini 
```

似乎只是将 $1 添加到字符串 disable_functions = $1exec,system,shell_exec,passthru,

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:35:17.963

试试看：

```
sed '/^disable_functions/s/$/exec,system,shell_exec,passthru,/' /etc/php5/apache2/php.ini 
```

如果输出看起来正常，则添加`-i`开关以修改文件。

`$`在这里，意思*是行尾*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:40:46.570

`\1`您的原始命令缺少设置(not )值的捕获组`$1`：

```
sed -ie 's/disable_functions = \(.*[a-zA-z,])\$/disable_functions = \1exec,system,shell_exec,passthru,/gI' /etc/php5/apache2/php.ini 
```

但正如所`sputnick`指出的，您只需要找到适当的行并附加所需的文本；无需匹配旧值并重新插入它们。

# twitter-bootstrap - Twitter Bootstrap 800px 平板媒体查询问题？

> ID：12860258
> 
> 赞同：2
> 
> 时间：2012-10-12T13:34:06.483
> 
> 标签：twitter-bootstrap, media, tablet

我目前正在构建一个具有引导响应式布局的站点，该站点在浏览器中运行良好，但由于某种原因，当我在 Nexus 7 平板电脑（屏幕 1200 x 800）上以纵向格式查看同一站点时，该站点使用媒体查询呈现@media（最大宽度：767px）而不是@media（最小宽度：768px）和（最大宽度：979px）。

有趣的是，我在引导程序 [示例站点][1] 上检查了这一点，即使屏幕尺寸对于@media (min-width: 768px) 和 (max-width: 979px) 媒体查询来说足够大，也会发生完全相同的事情。当平板电脑为横向格式时，会加载正确的查询。

这是引导断点。

```
/* Large desktop */
@media (min-width: 1200px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

我能做些什么来确保平板电脑接收到正确的媒体查询吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T00:36:08.787

我认为这是用于定义媒体查询宽度与您所谓的屏幕宽度的问题。

我发现调用以下 javascript 总是与媒体查询匹配：

`window.innerWidth`

这对您的 Nexus 7 有什么影响？

有关视口/媒体查询的讨论，请参阅此参考：[http ://www.quirksmode.org/blog/archives/2010/09/combining_meta.html](http://www.quirksmode.org/blog/archives/2010/09/combining_meta.html)

# java - 在java中执行脚本，读取错误和输出流

> ID：12860262
> 
> 赞同：1
> 
> 时间：2012-10-12T13:34:21.153
> 
> 标签：java, shell

我希望能够从 java 执行一个外部命令，例如“ls”，并以字符串的形式实时获取输出和错误流的输出，并按照它们生成的顺序。

因此，如果命令的输出类似于：

```
blah     <- to stdout
foo      <- to stderr
bar      <- to stdout 
```

然后，理想情况下，我希望输出字符串和实时输出看起来像：

```
blah
foo
bar 
```

朴素的方法会产生：

```
blah
bar 
```

（即没有标准错误输出）

或者：

```
blah
bar
foo 
```

（即重新排列顺序，使stdout 和stderr 消息不会相互交错）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:39:26.723

使用`ProcessBuilder`和设置`redirectErrorStream(true)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:44:44.487

这并不总是可能的。

如果您使用`ProcessBuilder`API，您可以将`stdout`和`stderr`流合并为一个（使用`redirectErrorStream(true)`），因此您可以在一个`InputStream`. 但这意味着您无法分辨数据最初来自哪个流。

如果您将`stdout`and`stderr`作为两个流读取，则需要 NIO 或两个 Java 线程。在这两种情况下，处理一个输出都会阻塞另一个（或者更确切地说，另一个流不会被及时处理）。这将导致换行。

如果子进程没有刷新输出并且您使用管道，那么情况会变得更糟，因为`stdout`将以 4KB 块的形式发送到您的进程，而`stderr`通常会逐行到达。

恐怕没有独立于平台的解决方法。如果您只需要适用于 Unix 的解决方案，您可以使用 Pseudo TTY ( [`man 4 pty`](http://manpages.debian.net/cgi-bin/man.cgi?query=pty&sektion=4)) 来模拟 shell，但这些很难从 Java 中设置，因为您需要调用 OS 函数。

一种方法可能是使用 Perl 或类似方法在 PTY 中运行您的命令（这会导致 stdout 变为行缓冲），从那里读取 stdout 和 stderr 并在每行前面加上`1`for stdout 和`2`for stderr。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:47:37.730

我建议您使用[Apache commons exec API](http://commons.apache.org/exec/)，因为它们是更复杂的 API。

请参阅[DefaultExecutor](http://commons.apache.org/exec/apidocs/org/apache/commons/exec/DefaultExecutor.html)：您可以：

*   为子进程设置当前工作目录
*   提供一组传递给子进程的环境变量
*   **使用 ExecuteStreamHandler 捕获 stdout 和 stderr 的子进程输出**
*   使用 ExecuteWatchdog 杀死长时间运行的进程
*   定义一组预期的退出值
*   当主进程使用 ProcessDestroyer 终止时终止任何已启动的进程

# javascript - 如何检测onMouseOver的目标？

> ID：12860265
> 
> 赞同：0
> 
> 时间：2012-10-12T13:34:30.320
> 
> 标签：javascript, mouseover

我正在努力解决我的一些问题

```
$('element').onMouseOver()
and
css-selector:hover 
```

不工作。我确定这是因为我需要使用一些变通方法来在其他内容上显示内容。
是否有任何工具可以显示我的当前目标`mouseOver-events`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:36:41.137

事件对象会告诉你目标。

```
document.onmouseover = function (e) { 
    console.log(e.target); 
} 
```

# android - Android：如何制作一个位于 SlidingDrawer 片段中的 CustomListView 滚动和可点击？

> ID：12860279
> 
> 赞同：1
> 
> 时间：2012-10-12T13:35:24.163
> 
> 标签：android, listview, fragment, slidingdrawer, touch-event

我想使用工作滚动和单击事件设置以下布局：

我的 CustomSlidingDrawer.xml：

```
<com.project.util.CustomSliderDrawer
    android:id="@+id/slidingDrawerHotelList"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:allowSingleTap="false"
    android:content="@+id/content"
    android:handle="@+id/handle"
    android:orientation="horizontal" >

    <RelativeLayout
        android:id="@+id/handle"
        android:layout_width="0dp"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:id="@+id/content"
            android:layout_width="0dp"
            android:layout_height="0dp" >
        </RelativeLayout>
    </RelativeLayout>
</com.project.util.CustomSliderDrawer> 
```

元素的宽度在运行时设置。这里不得不提一下，我真正的内容是在Drawer的handle中，内容只是一个dummy。我这样做是因为我无法隐藏手柄。或者让它不可见。所以，如果我想刷入，我触摸手柄（我的内容）并拉动。在 SlidingDrawer 中，句柄是包含 CustomListView 的片段的占位符。现在起作用了：我可以滚动 SlidingDrawer。

我想获得什么行为：在 SlidingDrawer 上，在 X 轴方向（垂直滑动）检测到 MotionEvents。如果检测到 Y 轴方向的 MotionEvent，则事件应该转到我的 CustomListView。甚至 onClicks 也应该传递到 ListView。

我试过的：我读了很多：[这里](http://independentlyemployed.co.uk/2011/01/11/intercepting-touch-events-for-swiping/)，[这个页面](https://stackoverflow.com/questions/5931947/android-viewgroup-how-to-intercept-motionevent-and-then-dispatch-to-target-or)和[这个](http://doandroids.com/blogs/tag/codeexample/) 然后我尝试将所有导航控件放在主要活动中，这在我眼中真正有意义：

主要活动：

```
slidingDrawer.setOnTouchListener(new OnTouchListener() {
        int downX, downY;

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            int action = event.getAction();
            switch (action) {
            case MotionEvent.ACTION_DOWN:
                downX = (int) event.getX();
                downY = (int) event.getY();
                break;
            case MotionEvent.ACTION_MOVE:
                int deltaX = downX - (int) event.getX();
                int deltaY = downY - (int) event.getY();
                if (Math.abs(deltaX) > Math.abs(deltaY)) {
                    Log.i(TAG, "scrollX direction");
                    isVerticalSwipe = true;
                } else {
                    Log.i(TAG, "scrollY direction");
                    isVerticalSwipe = false;
                }
                break;
            case MotionEvent.ACTION_UP:
                break;
            }
            return false;
        }
    }); 
```

但是当我在这里尝试将“isVerticalSwipe”作为本地返回时，SlidingDrawer 不再正常工作。:-( 第二次尝试是拦截自定义滑动抽屉中的触摸事件：

自定义滑动抽屉：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent ev) {
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        Log.i(TAG, "onInterceptTouchEvent ACTION_DOWN");
        xDistance = yDistance = 0f;
        downX = (int) ev.getX();
        downY = (int) ev.getY();
        break;
    case MotionEvent.ACTION_MOVE:
        Log.i(TAG, "onInterceptTouchEvent ACTION_MOVE");
        final int curX = (int) ev.getX();
        final int curY = (int) ev.getY();
        xDistance += Math.abs(curX - downX);
        yDistance += Math.abs(curY - downY);
        downX = curX;
        downY = curY;
        if (xDistance > yDistance)
            return false;
    }

    return super.onInterceptTouchEvent(ev);
} 
```

这里只发生 DOWN 事件，永远不会到达 MOVE 事件。我也用“dispatchTouchEvent”做了一些尝试，但没有成功。
我知道，这些事件将通过我的观点的“层”——从上到下。所以很高兴知道，我如何在我的 CustomSlidingDrawer （= 顶视图）中实现上面第一个链接的构造，当检测到垂直滑动时保持并处理它，如果它是水平滑动，那么请将它发送到CustomListView 并在那里执行事件。

感谢任何帮助、想法、想法或代码片段。：） 谢谢！

[编辑]

我已经取得了一些进展。我现在将我的事件从 SlidingDrawer 到我的 ListView。我可以滚动并单击列表 - 效果很好。但不幸的是，我的 SlidingDrawer 不再显示任何反应。这些行在我的自定义 SlidingDrawer 中：

```
@Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    gestureDetector = new GestureDetector(new MyGestureDetector());

    if (gestureDetector.onTouchEvent(event)) {
        return true;

    } else if (event.getAction() == MotionEvent.ACTION_UP
            || event.getAction() == MotionEvent.ACTION_CANCEL) {
        return false;
    } else {
        Log.i(TAG, "gestureDetector returned false");
        return false;
    }
}

class MyGestureDetector extends SimpleOnGestureListener {

    @Override
    public boolean onDown(MotionEvent e) {
        Log.i(TAG, "onDown");
        downX = (int) e.getX();
        downY = (int) e.getY();
        return false;
    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,
            float distanceX, float distanceY) {
        float deltaX = downX - e2.getX();
        float deltaY = downY - e2.getY();
        if (Math.abs(deltaX) > Math.abs(deltaY)) {
            Log.i(TAG, "scrollX direction");
            return true;
        } else {
            Log.i(TAG, "scrollY direction");
            return false;
        }
    }
} 
```

我真的不明白为什么它不起作用，如果在 x 方向上滑动，那么我的抽屉应该处理手势，因为我返回 true。相反，每个事件都被转发到 ListView。我试图在“onInterceptTouchEvent”之前运行“dispatchTouchEvent”，但没有成功。也许有更好的解决方案，而不是使用 SlidingDrawer 通过手指移动视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:00:11.930

好的，经过大量的泪水、汗水和鲜血，我终于找到了一个适合我的解决方案：我不再使用 SlidingDrawer，而是通过更改 LayoutParams 来移动我的布局。通过“dispatchTouchEvent”，我可以访问我的列表。

```
@Override
public boolean dispatchTouchEvent(MotionEvent ev) {
    if (mGestureDetector.onTouchEvent(ev)) {
        return true;
    }
    if (ev.getAction() == MotionEvent.ACTION_UP) {
        Log.i(TAG, "ACTION_UP");
        Log.i(TAG, "getLeft: " + getLeft());
        if (getLeft() < 280) {
            // run ani to left
        } else {
            // run ani to right
        }
    }

    return super.dispatchTouchEvent(ev);
} 
```

在我的 GestureDetector 中，我在覆盖的 onScroll 函数中处理布局转换。如果有人需要探测器，请不要犹豫，我会分享。

# ios - 在主线程中强制执行操作还是使用同步更好？

> ID：12860280
> 
> 赞同：1
> 
> 时间：2012-10-12T13:35:27.200
> 
> 标签：ios, multithreading, synchronization, atomic

假设我有一个开始下载对象的方法，该方法可以从任何线程调用，但我想确保下载是唯一的，也就是说，如果有相同的对象，我不会开始另一个下载已经是一个。

强制方法在主线程上执行以确保数据一致性更好（知道无论如何下载将是异步的）？

```
- (void)download
{
    dispatch_async(dispatch_get_main_queue(), ^{
        if (isDownloading == NO) {
            // Some preparation
            isDownloading = YES;
            // Launch asynchronous download
        }
    });
} 
```

还是使用阻塞同步机制？

```
- (void)download
{
    @synchronize(self) {
        if (isDownloading == NO) {
            // Some preparation
            isDownloading = YES;
            // Launch asynchronous download
        }
    });
} 
```

或使用像`OSAtomicCompareAndSwap`在`isDownloading`ivar 上的操作？

性能上有区别吗？最好的策略是什么？

# r - 使用 ggplot 在连续 x 轴上引入间隙

> ID：12860281
> 
> 赞同：1
> 
> 时间：2012-10-12T13:35:29.560
> 
> 标签：r, ggplot2, missing-data, stacked-area-chart, timeserieschart

这是在我之前[的帖子](https://stackoverflow.com/questions/12849175/correct-for-missing-values-in-a-stacked-area-plot-using-ggplot2)的基础上创建一个带有缺失值的堆叠区域/条形图（我运行的所有脚本都可以在那里找到）。然而，在这篇文章中，我问是否有可能在连续的 x 轴上留下一个间隙？我有一个超过一年的时间序列（逐月），但是对于一个样本，缺少一个月，我想将这个月显示为情节中的一个完整间隙。几乎就像为一月至八月（缺少九月）和十月至十二月绘制一个图表，并将它们与九月的差距合并。

我想出的唯一尝试是将缺失的月份视为零或 NA，在 9 月的面积图中创建一个巨大的下降或排除它，但 x 轴的范围分别为 1-11（请参见保管箱文件夹中的图） .

我正在处理的数据集可以在我的[dropbox 文件夹](https://www.dropbox.com/sh/pnkspwnn1qslm6u/JapTKCwqMS)中找到，它被命名为 r_class.txt，您还可以看到两个不同的图（Rplots1 和 2）。

任何想法都会非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:05:26.403

将系列绘制为两个单独的数据框：

```
#Load libraries
require(ggplot2)
require(reshape)

#Code copied from your linked post:
wa=read.table('wa_class.txt', sep="", header=F, na.string="0")
names(wa)=c("Class","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")
wam=melt(wa)
wam$variablen=as.numeric(wam$variable)

#For readability, split the melted data frame into two separate data frames
wam1 <- wam[wam$variablen %in% 1:6,]
wam2 <- wam[wam$variablen %in% 8:12, ]

ggplot() +
  geom_area(data=wam1, aes(x=variablen, y=value, fill=Class)) +
  geom_area(data=wam2, aes(x=variablen, y=value, fill=Class))
  #and add lineranges, etc., accordingly 
```

# glassfish - Glassfish中的进口ssl证书

> ID：12860289
> 
> 赞同：11
> 
> 时间：2012-10-12T13:36:03.343
> 
> 标签：glassfish, ssl-certificate

我有以下问题：

[我从 comodo（90 天）为我的 glassfish Web 应用程序获得了一个免费证书，然后我按照http://javadude.wordpress.com/2010/04/06/getting-started-with-](http://javadude.wordpress.com/2010/04/06/getting-started-with-glassfish-v3-and-ssl/)将证书导入到 glassfish 3.1 中[glassfish-v3-and-ssl/](http://javadude.wordpress.com/2010/04/06/getting-started-with-glassfish-v3-and-ssl/)

我还修改了 domain.xml 文件，将别名 s1as 替换为我的证书别名，并将文件 keystore.jks 替换为 server.keystore ....但是当我尝试使用 https 协议访问我的 Web 应用程序时，我得到了以下日志错误：

[#|2012-10-12T14:41:18.828+0200|警告|glassfish3.1.2|com.sun.grizzly.config.Gr izzlyServiceListener|_ThreadID=25;_ThreadName=http-thread-pool-443(1);| GRIZZLY00 07：无法配置 SSL 支持！java.io.IOException: SSL 配置无效，因为没有可用的证书或密钥对应于已启用的 SSL 密码套件。

请帮助我..我知道在这里我可以找到我的问题的解决方案...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-06-12T12:08:03.597

不幸的是，我没有足够的声誉来发布 glassfish 控制台管理员的图像，但让我尝试帮助仅使用文本的人。

**注意1：**配置是在 Ubuntu 12.04 服务器和 glassfish 3.1.2 上完成的

Comodo 为您提供 4 个文件

*   your_domain.key（你的私钥）
*   your_domain.crt（你的公钥）
*   PositiveSSLCA2.crt（CA 公钥）
*   AddTrustExternalCARoot.crt（CA 公钥）

将每个公钥导入文件 cacerts.jks。为此，将公钥文件合并到一个文件中：

**注意 2：**文件的顺序很重要。

```
cat your_domain.crt PositiveSSLCA2.crt AddTrustExternalCARoot.crt  > all.crt 
```

现在使用 keytool 导入它们：

```
keytool -import -trustcacerts -alias tomcat -file all.crt -keystore cacerts.jks 
```

使用您的私钥创建一个 p12 文件：

**注意3：**您可以为每个文件使用相同的密码以使事情变得更容易。

```
openssl pkcs12 -export -in all.crt -inkey your_domain.key -out your_domain.p12 - name your_alias -CAfile PositiveSSLCA2.crt -caname immed 
```

**注意4：**不要忘记您的别名 ( **your_alias** )，稍后您需要在 glassfish 管理控制台中引用它。

现在使用 keytool 导入私钥：

```
keytool -importkeystore -deststorepass changeit -destkeypass changeit -destkeystore keystore.jks -srckeystore your_domain.p12 -srcstoretype PKCS12 -srcstorepass changeit -alias your_alias 
```

现在您的**keystore.jks**（带有您的私钥）和您的**cacerts.jks**（带有您的公钥）已准备好供我使用。如果您想检查一切是否正常，请运行：

```
keytool -list -keystore keystore.jks
keytool -list -keystore cacerts.jks 
```

转到 glassfish 管理控制台并找到会话：

*   配置->server-config->HTTP 服务->Http Listeners->http-listener-2

转到 SSL 选项卡并将**证书昵称**更改为**your_domain**。

重新启动 Glassfish 服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-06T16:14:33.837

**前提条件：**

*   安装了 keytool 和 GlassFish 4.x（使用默认密钥库密码`changeit`）
*   您用于生成 CSR 的源密钥库
    *   例如`~/mySourceKeystore.jks`使用密码`myPassword`和带有别名的私钥`myAlias`
*   您的有效证书（从 CA 获得）
    *   例如`~/myCertificate.crt`使用密码`myPassword`和别名`myAlias`
*   CA 证书（从 CA 获得）
    *   例如`~/AwesomeCA.crt`

**以下是将 SSL 证书导入 GlassFish 的所有步骤：**

1.  导航`GLASSFISH-HOME/domains/domain1/config`

2.  将您的源密钥库（带有私钥）导入 GlassFish 密钥库：

    ```
    $ keytool -importkeystore -srckeystore ~/mySourceKeystore.jks -destkeystore keystore.jks`
    Enter destination keystore password: changeit
    Enter source keystore password: myPassword
    Entry for alias server successfully imported.
    Import command completed:  1 entries successfully imported, 0 entries failed or cancelled 
    ```

3.  将 CA 证书导入 GlassFish 密钥库：

    ```
    $ keytool -import -v -trustcacerts -alias AwesomeCA -file ~/AwesomeCA.crt -keystore keystore.jks
    Enter keystore password: changeit
    Certificate was added to keystore
    [Storing keystore.jks] 
    ```

4.  将获得的 SSL 证书导入 GlassFish 密钥库：

    ```
    $ keytool -import -v -trustcacerts -alias myAlias -file ~/myCertificate.crt -keystore keystore.jks
    Enter keystore password: changeit
    Enter key password for <myAlias>: myPassword
    Certificate reply was installed in keystore
    [Storing keystore.jks] 
    ```

5.  此时`java.security.UnrecoverableKeyException: Cannot recover key`GlassFish 启动过程中会出现错误，因为您的密钥库密码和别名密钥密码不同。为防止出现此错误，您需要执行：

    ```
    $ keytool -keypasswd -alias myAlias -new changeit -keystore keystore.jks
    Enter keystore password: changeit
    Enter key password for <myAlias>: myPassword 
    ```

6.  `s1as`将 GlassFish 中的默认别名 ( ) 更改为您的`myAlias`:

    ```
    $ asadmin set configs.config.server-config.network-config.protocols.protocol.http-listener-2.ssl.cert-nickname=myAlias 
    ```

7.  `8181`（可选）您可以将GlassFish 中的默认 SSL 端口 ( ) 更改为 well known `443`：

    ```
    $ asadmin set server.network-config.network-listeners.network-listener.http-listener-2.port=443 
    ```

8.  重新启动 GlassFish

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-18T19:43:50.417

对于 Glassfish 4.x，您可以遵循[此 Comodo 指南](https://support.comodo.com/index.php?/Knowledgebase/Article/View/1123/66/certificate-installation-glassfish-4x)

*如果链接过期，这是[网络存档。](https://web.archive.org/web/20161018193918/https://support.comodo.com/index.php?/Knowledgebase/Article/View/1123/66/certificate-installation-glassfish-4x)*

# c# - 我应该如何管理类依赖/重构？

> ID：12860291
> 
> 赞同：3
> 
> 时间：2012-10-12T13:36:08.593
> 
> 标签：c#, .net, dependency-injection, castle-windsor, plugin-architecture

我的应用程序实现了一种模块化架构，可以动态加载一个或多个“插件”程序集。每个程序集都包含一个实现`IPlugin`接口的类，提供宿主应用程序用来与插件交互的各种方法和属性。

这个类不可避免地依赖于插件中的其他类，而这些类又可能有自己的依赖关系。到目前为止，我一直在使用 Castle Windsor 管理所有这些（每个插件都包含一个`IWindsorInstaller`我注册其依赖项的位置），并通过它们的构造函数进行 DI。缺点是类必须是`public`这种方法才能工作。

我现在已经意识到并想通过制作所有这些类来锁定插件`internal`，但是我不确定处理依赖项的最佳方法，因为大概我将无法使用 Windsor。我不希望这些类实例化它们自己的依赖项（不是松散耦合、缺乏可测试性等），那么还有哪些其他方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T21:57:24.847

> 缺点是这些类必须是公开的才能使这种方法起作用。

这不是真的。您可以注册内部的东西，但您可能会失去 Castle Windsor（或任何 DI 容器）的自动连接（自动构造函数注入）功能。您可以通过注册手动创建这些类型的委托来注册内部内容。例如：

```
container.Register(Component.For<IService>()
    .UsingFactoryMethod(() =>
    {
        var log = container.Resolve<ILogger>();
        return new RealService(log);
    })
    .LifeStyle.Transient); 
```

手动创建服务`new`不是最理想的，因为自动连接使插件程序集的组合根保持最大的可维护性，但我认为在你的情况下没有一个好的选择。不过，这比让每个服务创建自己的依赖项（穷人的 DI）要好。

**更新**

我记得一件事：当您使用泛型方法注册这些内部类型时，应该仍然可以使用内部类型进行自动装配，例如这个：

```
container.Register(Component.For<IService>()
    .ImplementedBy<RealService()); 
```

为此，构造函数`RealService`必须是公共的（但`RealService`它本身可以是内部的）。这甚至可以在**部分信任**的情况下工作，例如在非常严格的 Silverlight 沙箱中运行时（或者至少，它可以与 Simple Injector 一起使用，但 Castle 也应该能够做到这一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T22:38:57.533

如果您使用 Ninject，您可以将[NinjectModule](https://github.com/ninject/ninject/wiki/Modules-and-the-Kernel)添加到每个配置绑定的程序集，然后在主机应用程序中简单地加载模块以注册绑定。

```
public class ServiceModule : NinjectModule
{
    public override void Load() 
    {
        Bind<IService>().To<RealService>();
    }
} 
```

可以留在`RealService`内部，模块可以看到它，因为它在同一个组件内。

# ruby-on-rails-3 - 控制器测试中的销毁方法失败

> ID：12860293
> 
> 赞同：0
> 
> 时间：2012-10-12T13:36:14.500
> 
> 标签：ruby-on-rails-3, rspec, factory-bot

我在测试一种`destroy`方法时遇到了一个奇怪的问题。我正在使用 FactoryGirl 和 Rspec。

下面来看看有问题的方法。如您所见，它实际上并没有破坏经销商，只需将其及其依赖对象的`active`属性设置为`false`：

经销商控制器.rb

```
def destroy
  @dealer = Dealer.find(params[:id])
  @dealer.active = false
  @dealer.save!
  @dealer.leads.each { |lead|
    lead.active = false
    lead.save!
  }
  @dealer.users.each { |user|
    user.active = false
    user.save!
  }
  redirect_to dealers_path
end 
```

当我在应用程序中运行这个方法时，它会完全按照它应该做的事情去做。现在，开始测试。

经销商控制器规格.rb

```
describe "#destroy" do
  context "when deleting a valid record" do
    let(:dealer) { FactoryGirl.create(:dealer_with_stuff) }  

    before do
      @user = FactoryGirl.build(:admin_user)
      login_user  
      delete :destroy, :id => dealer.id
    end
    it { should assign_to(:dealer).with(dealer) }
    it { should redirect_to(dealers_path) }
    it { should set_the_flash }
    it "is no longer active" do
      dealer.active.should be_false
    end
    it "has no active users" do
      dealer.users.each do |user|
        user.active.should be_false
      end
    end
    it "has no active leads" do
      dealer.leads.each do |lead|
        lead.active.should be_false
      end
    end
  end
end 
```

前 3 个测试通过，但后 3 个测试全部失败（奇怪的是，如果我在上面加上一个after ，`user.active.should be_false`测试才会失败，但我们现在不要讨论这个问题）。因此，当我检查测试日志时，它会经历整个销毁过程，但随后会执行 a ，因此由于某种原因它不会保存任何记录；但它没有给我更多的信息。`sleep(10)``delete :destroy``ROLLBACK`

有人对此有任何想法吗？我已经尝试了我能想到的一切。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:24:35.587

如果你重新加载`dealer`? 您的`dealer`测试`@dealer`中的 与控制器中的对象不同（ActiveRecord 不执行身份映射）。

```
before do
  @user = FactoryGirl.build(:admin_user)
  login_user  
  delete :destroy, :id => dealer.id
  dealer.reload # << add this
end 
```

# wpf - WPF Popup 在无缝 citrix 模式下关闭

> ID：12860294
> 
> 赞同：1
> 
> 时间：2012-10-12T13:36:21.150
> 
> 标签：wpf, popup, citrix

首先，此问题仅在 Citrix XenApp 无缝模式下工作时发生（简而言之，这意味着实际应用程序正在某个 citrix 主机上运行，​​但它被模拟为驻留在您自己的桌面中）。我也会与 Citrix 支持一起讨论这个问题，但只是想对小组进行民意调查，以防以前有人遇到过这样的问题。

我有一个 WPF 应用程序，它使用 Winforms NotifyIcon 驻留在系统托盘中，直到单击鼠标。在 Citrix 无缝模式下，当用户单击系统托盘中的图标时，弹出窗口会闪烁并立即自行关闭。

弹出窗口是一个普通的窗口，使用 StaysOpen 创建为 FALSE，并且在所有其他环境中都一样。

有什么建议么 ？这是我到目前为止注意到的：

1.  如果我将 StaysOpen 设为 true，则窗口将保持打开状态。但是当它失去焦点时，我没有办法手动关闭窗口。当用户在外面点击时，LostFocus 事件不会在弹出窗口中触发。
2.  在 citrix 无缝模式下，会捕获 MouseEnter 事件，但不会捕获 MouseLeave，因此如果用户鼠标在窗口外 X 秒，则无法实现关闭窗口的方法。
3.  尝试了将 Staysopen 设置为 FALSE 启动弹出窗口的解决方法，然后在 2 秒后重置保持打开状态，以便弹出提示。它可以工作，但是一旦我将 StaysOpen 设置为 FALSE，一旦计时器被击中，弹出窗口就会自行关闭。
4.  如果没有所有这些解决方法，如果用户在窗口消失之前快速单击（左键单击）窗口，弹出窗口就会粘住，所以我尝试了几种方法来模拟鼠标在弹出窗口打开时的点击，但这也没有削减它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T06:09:54.507

我无法为您提供有关调整您的应用程序以解决该问题的具体建议，但是使用锤子方法总是会给您带来很大的打击，即告诉您的应用程序的消费者为您的应用程序禁用无缝：

[http://support.citrix.com/article/CTX116357/](http://support.citrix.com/article/CTX116357/)

更新：我对原始的无缝开发人员进行了 ping 操作 - 他说这听起来像是一个 bug，其中无缝没有正确地在客户端和服务器之间路由所有必要的鼠标消息。他说，诊断此问题的最佳方法是在 XenApp 服务器和客户端上运行 Spy++ 工具，然后比较双方看到的消息，以确定哪些消息没有被翻译。由于这听起来像是一个真正的错误，因此最好的办法是向 Citrix 支持提出支持请求，并为他们提供可以重现该错误的示例应用程序。

# javascript - 如何使用javascript删除随机图像选择并使其成为线性选择

> ID：12860295
> 
> 赞同：1
> 
> 时间：2012-10-12T13:36:27.763
> 
> 标签：javascript, prettyphoto

下面的代码选择随机图像，我希望它线性选择并在下次刷新时显示接下来的 8 个图像。

```
$.fn.preload = function() {
    this.each(function(){
        $('<img/>')[0].src = this;
    });
}
function preloadImg(totalClients)
{
    for(var i = 1; i <= totalClients; i++)
    {
        $('<img src="images/clients/' + i + '.jpg"/>');
    }
}

function getRandoms(numPicks, low, high) {
    var len = high - low + 1;
    var nums = new Array(len);
    var selections = [], i;
    // initialize the array
    for (i = 0; i < len; i++) {
        nums[i] = i + low;
    }

    // randomly pick one from the array
    for (var i = 0; i < numPicks; i++) {
        var index = Math.floor(Math.random() * nums.length);
        selections.push(nums[index]);
        nums.splice(index, 1);
    }
    return(selections);
}

function randomClients(totalClients)
{
rarr = getRandoms(8,1,totalClients);
    $(".pretty-box").each(function(index)
    {
       $(this).fadeOut(function(){
           src = "images/clients/" + rarr[index] + ".jpg" ;
           $(this).attr('src',src);
           $(this).fadeIn();
       });
    });

} 
```

我们能够从数组中选择前 8 张图像，但不能选择接下来的 8 张图像。有人可以帮助我们吗？

# mysql - 使用 Perl DBI->MySQL 时如何检查空集

> ID：12860296
> 
> 赞同：1
> 
> 时间：2012-10-12T13:36:29.790
> 
> 标签：mysql, perl, dbi

有没有办法检查 DBI->execute 语句是否返回一个空集？目的是我想创建一个表，然后询问用户名，如果用户名不在表中，（检查空的 fetch() 语句），然后添加到表中。有什么建议么？

```
 $sth = $dbh->prepare("SELECT * FROM table_name_here");
    $sth->execute();

    if(...$sth->fetch() was empty...)
    do something... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:38:53.497

试试看：

```
$sth = $dbh->prepare("SELECT * FROM table_name_here");
$sth->execute();

unless ($sth->fetch()) { do something..; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:37:16.880

我建议你初步获取记录数，像这样

```
my ($records) = $dbh->selectrow_array('SELECT count(*) FROM table_name_here'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T14:30:49.097

> 有没有办法检查 DBI->execute 语句是否返回空集

是的。

```
$sth = $dbh->prepare("SELECT * FROM table_name_here");
$sth->execute();
unless( $sth->rows ) {
    #empty set
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:41:26.007

一种可能的方法是：

```
my $row_count = 0;
while (my @ary = $sth->fetchrow_array() ) { ...; $row_count++; }
unless ($row_count) { 
  ...
} 
```

但我不禁想知道为什么你需要使用`fetchrow`，而不是`fetchall`，对于这种特定情况。事实上，我会这样重组它：

```
my ($count) = $dbh->selectrow_array('
   SELECT COUNT(*) FROM users WHERE username = ?'
   undef, $username);
if ($count) { ... } 
```

# ios - 游戏中心提交分数混乱

> ID：12860297
> 
> 赞同：4
> 
> 时间：2012-10-12T13:36:36.080
> 
> 标签：ios, xcode, game-center

我刚刚发布了一个带有 Game Center 记分牌的游戏，它开始很好地填满。只有一件事我不确定。今天，本周，所有时间部分。

我只在玩家设置新的个人最高分时才向 Game Center 提交分数，而不是在每场比赛之后。这是正确的做法吗？

我昨天创造了一个高分，并且在所有时间委员会中名列前茅，但是我不在今日委员会上，除非我超过我的所有时间分数，否则我显然不会，因为我今天的分数都没有被提交（除非我击败我的所有时间最高）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:12:35.483

如果分数大于 0，我每次都会这样做，显然，如果您不让代码发送您的积分，除非它们大于您的所有时间记录，那么您将不会出现在每日每周的积分以下记录。

每次发送，gamecenter 将为您管理它们

# c# - 如何正确删除任务

> ID：12860312
> 
> 赞同：5
> 
> 时间：2012-10-12T13:37:46.717
> 
> 标签：c#, .net

我是否以某种方式删除了这个任务或者它是自毁的？

```
Task.Factory.StartNew(() => { DoSomeJob(); }, TaskCreationOptions.LongRunning); 
```

或者最好像这样使用它

```
var t = Task.Factory.StartNew(() => { DoSomeJob(); }, TaskCreationOptions.LongRunning); 
```

并以某种方式稍后**删除/取消**t?

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:40:47.767

你不需要删除它，它最终会被处理掉......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:43:03.773

如果你的意思是你可以取消它，或者中止它，或者以其他方式在它完成之前阻止它运行；不，不是真的（现在是这样）。您需要创建一个取消令牌源，将令牌传递给任务，然后任务中运行的方法需要定期检查以确保它没有被取消。

您可以做的是等待一段时间并取消该等待操作。这将允许您继续运行您需要运行的“下一个”任务。请注意，如果您这样做了，而没有添加我上面讨论的任务本身检查删除的工作，那么该方法仍将运行到完成，您只需提前停止等待。

[相关链接](http://blogs.msdn.com/b/pfxteam/archive/2012/10/05/how-do-i-cancel-non-cancelable-async-operations.aspx)

如果您只是担心清理任务运行后使用的资源，则无需担心。这一切都会自动处理。

[相关链接](http://blogs.msdn.com/b/pfxteam/archive/2012/03/25/10287435.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:43:15.093

如果您想尝试自己处理它，则必须小心。如果它仍然处于运行状态，你会得到这个异常：

```
A task may only be disposed if it is in a completion state (RanToCompletion, Faulted or Canceled) 
```

所以最好使用你的第一个例子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T13:41:15.037

垃圾收集将为您处理清理工作，您不必保留参考`t`。

# jquery - 调整硬币滑块的大小问题

> ID：12860313
> 
> 赞同：4
> 
> 时间：2012-10-12T13:37:48.140
> 
> 标签：jquery

我有使用硬币滑块的画廊

```
var $jq = jQuery.noConflict(); 
    $jq(window).load(function() { 
        var imheight = $jq(window).height()-40;
        var imwidth = imheight / 1.5;
        $jq('#placeholder').css({'width':imwidth+'px','height':imheight+'px','margin-left':'-'+imwidth/2+'px','margin-top':'-'+imheight/2+'px'});
        $jq('#vslider').coinslider({ 
          width:imwidth, 
          height:imheight, 
          spw: 6, 
          sph: 4, 
          delay: 2500, 
          sDelay: 30, 
          opacity: 0.7, 
          titleSpeed: 1500, 
          effect: '', 
          navigation: false, 
          links : true, 
          hoverPause: false, 
          stopAtLastSlide: true 
        });
 }) 
```

和 HTML：

```
<div id="placeholder">
  <div id="vslider">
    <a href="/main"><img src="/preload/2.jpg" alt="701" /></a>
    <a href="/main"><img src="/preload/1.jpg" alt="563" /></a>
  </div> 
</div> 
```

占位符 div 以正确的宽度和高度加载。
但是 vslider 不会改变它的大小。
会是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T15:27:14.257

我在尝试做同样的事情时遇到了一些麻烦。经过大量挖掘，我找到了如何做到这一点。

假设您有以下硬币滑块面板：

```
 <div id="banner_slideshow">
                <a href="#1">
                    <img src="header-image-bg1.jpg" alt="" />
                </a>
            </div> 
```

coin-slider 将生成一个名为 的类`cs-<container-id>`，在本例`cs-banner_slideshow`中为用于动画绘制的每个“正方形”。

它实际上删除了`<img>`您放置的内容，并将其替换为背景等效图像。

所以基本上你需要做的就是把它放在你的**.js**中：

```
$('#banner_slideshow').coinslider({
    width: 1000, // width of slider panel
    height: 350, // height of slider panel
});

// Resize picture.
$('.cs-banner_slideshow').css('background-size', '1000px 350px'); 
```

（您也可以在 .css 文件中执行此操作，但我发现它更适合 javascript 文件，因为它访问 coin-slider 的内部实现，我不希望在我的样式表文件中使用它）。

在你的**.css**中：

```
#banner_slideshow {
    background-repeat: no-repeat;
    background-size: 1000px 350px;
} 
```

# wix - 特定组件的“ICE38：组件安装到用户配置文件”错误

> ID：12860316
> 
> 赞同：9
> 
> 时间：2012-10-12T13:37:57.170
> 
> 标签：wix, windows-installer, wix3.6

我正在尝试在 WiX 3.6 中使用每台机器和仅 x64 架构设置编写 Windows 安装程序脚本。我有以下项目结构（缩短）：

```
<Directory Id="ProgramFiles64Folder" Name="PFiles">
    <Directory Id="APPLICATIONFOLDER" Name="My Company">
      <Directory Id="ProductFolder" Name="My Product">
        <Component Id="MainComponent" Guid="" Win64="yes" KeyPath="yes">
            ...
        </Component>
        <Directory Id="DataFolder" Name="Data">
          <Directory Id="Machine" Name="Machine" >
            <Directory Id="MachinesFolder" Name="Machines">
              <Component Id="Machine1" Guid="{74341536-72DF-48C3-95E8-2851D9FA8318}" Win64="yes" KeyPath="yes">
                        ...
              </Component>
            </Directory>
            <Directory Id="TemplateFolder" Name="Template">
              <Component Id="TemplateFiles" Guid="{A0D0C225-D604-4B84-971D-41687A30EC36}" Win64="yes" KeyPath="yes">
                <File Id="Template1.rsbak" Source="$(var.SolutionDir)bin\Release\File1.rsbak" />
                            ...
              </Component>
            </Directory>
          </Directory>
        </Directory>
      </Directory>
    </Directory>
</Directory> 
```

问题是我`ICE38: Component TemplateFiles installs to user profile. It must use a registry key under HKCU as its KeyPath, not a file`在编译时收到 TemplateFiles 组件的错误。让我感到困惑的是，我在另一个项目（工作）中使用了类似的结构，并且在我的项目中有几个具有完全相同设置的组件（上面未显示）。当所有其他组件都正确安装到 Program Files 时，为什么这个 - 并且只有这个 - 组件坚持安装到用户配置文件？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T08:33:59.303

看起来`msi`之间`Program Files`和`Users\UserName\Documents`文件夹之间存在显着差异。最后一个在您的示例中被引用：

```
<Directory Id="DataFolder" Name="Data"> 
```

我遇到了类似的问题，并在博客文章中找到了答案 - [https://robmensching.com/blog/posts/2007/4/27/how-to-create-an-uninstall-shortcut-and-pass-all -这/](https://robmensching.com/blog/posts/2007/4/27/how-to-create-an-uninstall-shortcut-and-pass-all-the/)

简而言之，您需要`RegistryKey`在`HKCU`root 上定义为子元素`Component`并将`RemoveFolder`元素作为子元素添加到`Directory`. 有关完整示例，请参见上面的链接。此外：

*   从元素中删除`KeyPath`属性`Component`
*   `RemoveFolder`可能必须为所有文件夹定义。我为此使用了没有文件的虚拟组件

# rest - Web 通知服务模式，如 Facebook 或 Twitter

> ID：12860317
> 
> 赞同：2
> 
> 时间：2012-10-12T13:38:02.567
> 
> 标签：rest, web-applications, web, notifications, design-patterns

我从来没有在网络客户端上做过通知服务，我只是想知道最常见的模式是什么。

例如，如果服务器必须推送客户端，或者客户端需要每分钟获取一次服务器信息。

或者，如果有另一种模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T19:22:41.240

有多种实现推送通知的方法：

HTTP 长轮询：客户端发起请求。服务器检查它是否有任何新的通知。不管它是否有新的通知，都会发送适当的响应并关闭连接。在 X 客户端发起另一个请求之后（+ 非常容易实现 - 通知不是实时的。它们依赖于 X，因为数据检索是客户端发起的。随着 X 减少服务器上的开销增加）

HTTP 流式传输：这与 HTTP 长轮询非常相似，但连接没有关闭。服务器发送分块响应。因此，一旦服务器收到它想要推送的新通知，它就可以简单地写入套接字。（+ 比长轮询和几乎实时行为的延迟更低/关闭连接和重新打开的开销减少 - 内存使用客户端不断堆积/丑陋的黑客等）

WebSocket：基于 TCP 的协议提供真正的双向通信。服务器可以随时向客户端推送数据。（+ ve：真正的实时 - 一些较旧的浏览器不支持它）。阅读更多关于它的信息 WebSocket.org | 关于 WebSocket

现在基于技术堆栈，有各种可用的解决方案： (A) Nodejs：用于实时应用程序的跨浏览器 WebSocket。（为您完成繁重的工作。在不支持 websocket 的情况下优雅地退回） (B) Django：如前所述，您可以使用信号进行通知。您也可以尝试使用 django-websocket 0.3.0 来支持 websocket (C) Jetty / Netty 和 Grizzly（基于 Java）：都支持 websocket

从[链接](http://www.quora.com/Web-Applications/How-are-push-notifications-technically-designed)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T03:56:53.367

这取决于您使用的 Web 框架。使用像[流星](/questions/tagged/meteor "显示标记为“流星”的问题")这样的现代框架，服务器很容易向客户端推送通知，并且可以自动发生多种显示更新，而无需构建通知机制来处理它们。

查看[http://meteor.com](http://meteor.com)上列出的两个 Meteor 截屏视频。

# jquery - 如何在 jQuery 中插入 unicode？

> ID：12860322
> 
> 赞同：4
> 
> 时间：2012-10-12T13:38:30.213
> 
> 标签：jquery, function, unicode

我正在使用具有指定 unicode 的字体。它不会显示符号，而只会显示数字或损坏的图像..

```
.attr('title', '&#xe08f;'); 
```

有谁知道如何正确写这个？先感谢您！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T13:43:32.430

您可以直接指定 unicode 代码点

```
.attr('title', '\uE08F') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T16:29:52.870

字符串字面`'&#xe08f;'`量在 JavaScript 中表示一个由七个字符（&、# 等）组成的字符串。如果您的代码恰好嵌入在 HTML 文档中，则可能会或可能不会（取决于浏览器模式）对其进行处理，以便`&#xe08f;`在将数据传递给 JavaScript 解释器之前将字符识别为表示 U+E08F 的字符引用。

正如 Andbdrew 的回答隐含地所说，在字符串文字中，用 Unicode 数字表示字符的 JavaScript 方法是使用`\u`前缀，例如`\ue08f`.

与此无关，代码点 U+E08F 是私人使用的代码点，并且根据 Unicode 标准，“这些字符被指定为私人使用，并且没有定义的、可解释的语义，除非通过私人协议。” 因此，如果这些代码点用于扩展字符库，则或多或少*可以保证*不存在互操作性。在这种情况下，当它们起作用时，它们只有在使用非常特定的字体以及代码点的分配时才起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:40:38.187

title 属性不解释 HTML。

你可以简单地这样做：

```
 ... attr('title', ''); 
```

[示范](http://jsfiddle.net/Gja9z/)

当然，您需要正确编码您的文档。UTF-8 是最合理的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:45:29.103

我认为您不能在标题属性中使用特定字体。但是您可以使用手工制作的工具提示而不是标题属性，您可以使用您想要的任何文本来填充它。

# iphone - 为什么在 iOS 上升级时需要卸载 Trigger.IO 应用程序？

> ID：12860324
> 
> 赞同：1
> 
> 时间：2012-10-12T13:38:31.427
> 
> 标签：iphone, ios, webview, trigger.io

我正在运行 iOS 6 的 iPod 上测试使用 Forge v1.4 构建的 Trigger.IO 应用程序。我一直在通过分发配置文件安装 .ipa。

有时，安装更新版本后，应用程序会启动但无法正常运行。我将这种行为追溯到`window.forge`缺席，可能是由于初始化错误。然后，我会确保在安装更新之前终止应用程序进程，我记得这*似乎*让问题消失了。

现在，我添加了 Facebook 和 Splash 模块，并且我的应用程序在安装升级版本后始终不会超过启动画面，除非我先强制卸载旧版本。据推测，它在创建 webview 之前就死了。知道为什么我需要在升级之前先卸载我的应用程序吗？这是一种已知的行为吗？

我想确保我的用户在升级时不会遇到这种情况。

我的应用程序在没有 Forge 的情况下运行愉快，并且对 localStorage 数据没有任何特定的依赖关系。我没有 Mac，并且一直在 Windows 中通过 iTunes 安装，所以我认为我无法访问日志信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:50:37.283

你应该看看这篇文章： [应用程序如何从苹果商店获取更新？](https://stackoverflow.com/questions/12794252/how-application-get-update-from-apple-store/12794368#12794368)

快速的答案是当你更新一个应用程序时，你安装了新的捆绑包，但你保留了以前存储的用户数据，例如本地数据库。如果您在新应用程序（或其他任何内容）中更改了本地数据库，您的应用程序在更新时可能会崩溃，但在从头开始下载时就可以了。

# oracle - 如何在连接字符串中引用 oracle 提供程序

> ID：12860327
> 
> 赞同：0
> 
> 时间：2012-10-12T13:38:42.317
> 
> 标签：oracle, windows-7, connection-string, provider

我不得不将应用程序从旧服务器移动到新的 64 位服务器。

应用程序使用了这个连接字符串：

```
Provider=OraOLEDB.Oracle;Data Source=XXX;User Id=XXX;Password=XXX;OLEDB.NET=True; 
```

由于需要更改oracle驱动程序，我不得不安装一个新的： **instantclient_11_2中的oracle**

现在我在连接字符串中引用此驱动程序以使应用程序运行时遇到问题。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:55:35.790

查看[http://www.connectionstrings.com/oracle](http://www.connectionstrings.com/oracle)。

# html - hcard 概念在 HTML 中是如何工作的

> ID：12860329
> 
> 赞同：6
> 
> 时间：2012-10-12T13:38:48.053
> 
> 标签：html, microformats

所以最近我在读一本叫做 Adaptive Webdesign 的书，我遇到了一个叫做 hcard、hcalendar 的东西，我去了它各自的[文档页面](http://microformats.org/wiki/hcard#Root_Class_Name)。现在的问题是我不理解这是如何工作的？它用于代表人..标记是这样的

```
<div class="vcard">
    <a class="url fn" href="http://tantek.com/">Tantek Çelik</a>
</div> 
```

现在我知道这些类的含义如`url`指示给定链接将用户带到网页并`fn`表示格式化名称等等......

那么这些类是否指向搜索引擎，内容是 hCard 或呈现方式不同等。有人可以解释一下这是如何工作的，这样做有什么好处，从 SEO 的角度来看，这是否很重要，这些类是否重要？预定义？

编辑：那么这些课程是保留的吗？如果我将它们用于其他元素怎么办？是否有任何 javvascript 可以调用`onclick`按钮以在计算机/用户设备上保存 vcard？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:47:49.570

这个概念允许机器获取有关内容的详细信息。这很简单，您知道给定名称是什么。机器不... :)

所以你需要一种方法来告诉机器你的 html 包含什么样的数据。

**例如：**您可以像下面的示例一样丰富您的数据，并允许（可能是地址簿应用程序）获取有关应填写哪些字段的详细信息。

```
<div class="vcard">
    <a class="url fn" href="http://tantek.com/">
        <span class="family-name">Tantek</span>
        <span class="given-name">Çelik</span>
    </a>
</div> 
```

此代码段允许地址簿应用程序。轻松找到给定名称并将其设置为正确的字段。顺序在这里并不重要。

测试您的“**丰富片段**”：[http ://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T15:52:04.323

如果您还没有声明您正在使用[hCard](http://microformats.org/wiki/hcard#Root_Class_Name)语法（通过使用`vcard`类），那么您可以随意使用您喜欢的任何类名。即使您确实开始使用 hCard 微格式，也不会隐式应用任何样式，因为微格式与显示样式无关。

使用微格式的目的是打开一个接口来公开元数据。通过以标准化的微格式提供数据，解析您网站的任何人都可以使用微格式查找相关信息。

搜索引擎尤其受益于此，因为它允许他们在结果页面上提供有关特定资源的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:43:44.110

我不完全了解**hcard**和**hcalendar**，但是例如，在 Google 上查找 Stack Overflow 问题，您会看到发布时间出现在内容旁边，对于许多网站，它还显示名称作者。

换句话说，谷歌将使用这些微格式来增强搜索体验，方法是在从页面解析时为搜索提供元数据。

你帮助谷歌，他们帮助你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T10:04:35.837

vCard 是电子名片的标准。hCard 采用这些标签并将它们用作 HTML 中数据周围的类名。每个 hCard 都在具有 class="vcard" 的块内开始。

其中一些类型具有子属性。例如，“tel”值包含“type”和“value”。这样，您可以指定单独的家庭和公司电话号码。'adr' 类型有很多子属性（邮政信箱、扩展地址、街道地址、地点、地区、邮政编码、国家名称、类型、值）。

```
<div class="vcard">
   <div class="fn">xxxxx</div>
   <div class="adr">
      <span class="locality">yyyy</span>,
      <span class="country-name">zzzzz</span>
   </div>
</div> 
```

类名不必在您的页面中表示任何含义。但是，您始终可以利用它们来设置您的联系信息的样式。您还可以在浏览器的用户样式表中设置它们的样式，以便在网上冲浪时找到它们。（[原文出处](http://www.thefutureoftheweb.com/blog/hcard)）

关于 SEO 方面，请查看这篇文章[为您的网站优化本地搜索引擎的技巧](http://www.naturalsearchblog.com/archives/2006/09/28/tips-for-local-search-engine-optimization-for-your-site/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:44:20.043

我建议您将[http://schema.org/](http://schema.org/)用于微格式。Google 官方推荐使用它，Bing 和许多其他搜索引擎也完全支持它。当您使用 schema.org 微格式时，搜索引擎爬虫将从您的标记中提取数据实体，并将它们以相应的方式显示在搜索结果中。

所以是的，使用微格式有好处。通过使用它们，您可以改善搜索引擎爬虫的行为，您的内容将被正确索引，更重要的是，它将被正确*分类*，因此它将出现在自定义搜索中。

# asp.net-mvc - ASP MVC 是否使用缓存的生产数据库？

> ID：12860332
> 
> 赞同：0
> 
> 时间：2012-10-12T13:38:50.683
> 
> 标签：asp.net-mvc, asp.net-mvc-3, caching

有人更改了我用来登录网站的管理员密码。我改回来了，现在我可以在 localhost 上登录 MVC 站点。但是，当我发布站点时，它不会登录服务器。这也发生在昨天，但最终生产服务器开始让我再次登录。他们都使用相同的数据库。这里似乎只是有一个时间延迟或某种缓存。ASP MVC 会做这样的事情吗？有谁知道如何刷新它以便我可以再次登录这两个站点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:51:03.170

实体确实有它自己的缓存。但我认为你的问题取决于你是否启用它。所以我建议你了解更多关于缓存的知识，并检查你是否启用它~

[您可以在此处](http://blogs.msdn.com/b/jkowalski/archive/2009/06/11/tracing-and-caching-in-entity-framework-available-on-msdn-code-gallery.aspx)找到有关实体缓存的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T14:30:11.107

正如 Mike McCaughan 所说，这个问题的答案是：

> 服务器将在连接池中缓存连接。要刷新，请在 IIS 中重新启动应用程序池。

# xml - XML 文件导入到具有多个子项的 SQL 数据库

> ID：12860334
> 
> 赞同：1
> 
> 时间：2012-10-12T13:38:55.563
> 
> 标签：xml, sql-server-2005, bulk-load

我正在尝试将 XML 文件导入 SQL Server 数据库。请查看代码和 xml 文件。提前致谢。

我试图用谷歌搜索很多页面，但所有页面都只处理一个孩子（或如何称呼它）。

但在我真正的 xml 中，结构就像

```
:1x supplier --> multiple orders --> multiple customers --> multiple products. 
```

我们需要创建一个存储过程，当我们获取 XML 文件时将调用该存储过程。

再次感谢彼得

SQL 代码：

```
DROP TABLE #TEST

CREATE TABLE #TEST
(CUSTID VARCHAR(10),CUSTNAME VARCHAR(50),PRODUCT VARCHAR(500))

INSERT INTO #TEST(CUSTID,CUSTNAME,PRODUCT)
SELECT
    x.orders.query('order/customer/cust_id').value('.', 'VARCHAR(10)'),
    x.orders.query('order/customer/name').value('.', 'VARCHAR(50)'),
    x.orders.query('order/product_lines/product/supplier_prod_num').
   value('.','VARCHAR(500)') 
FROM
   (SELECT CAST(x AS XML)
    FROM OPENROWSET(
          BULK '\\test\Test.xml',
          SINGLE_BLOB) AS T(x)) AS T(x) 
    CROSS APPLY
        x.nodes('order_batch/orders/order/product_lines/product') AS x(orders)

select * from #test 
```

要测试的 XML 文件：

```
<order_batch>
  <order_header>
    <doc_format_ver>1.0</doc_format_ver>
    <originating_software>
      <software_name>test</software_name>
      <software_ver>2.0</software_ver>
    </originating_software>
  </order_header>
  <supplier>
    <cp_supplier_id>93</cp_supplier_id>
    <name>supname</name>
    <address_line_1>address_line_1</address_line_1>
    <address_line_2>address_line_1</address_line_2>
  </supplier>
  <orders>
    <order o_count="1">
      <customer>
        <cust_id>7240</cust_id>
        <name>CustNamek</name>
        <address_line_1>address_line_1</address_line_1>
        <address_line_2>address_line_1</address_line_2>
      </customer>
      <order_details>
        <date_created>2012-10-08</date_created>
        <time_created>05:37:11</time_created>
      </order_details>
      <product_lines>
        <product p_count="1">
          <supplier_prod_num>15115</supplier_prod_num>
          <qty_type>E</qty_type>
        </product>
        <product p_count="2">
          <supplier_prod_num>010211</supplier_prod_num>
          <qty_type>E</qty_type>
        </product>
      </product_lines>
    </order>
    <order o_count="2">
      <customer>
        <cust_id>7238</cust_id>
        <name>custname</name>
        <address_line_1>address_line_1</address_line_1>
        <address_line_2>address_line_1</address_line_2>
      </customer>
      <order_details>
        <supplier_ref>0093513982</supplier_ref>
        <delivery_date>2012-10-08</delivery_date>
        <special_instructions />
      </order_details>
      <product_lines>
        <product p_count="1">
          <supplier_prod_num>6748</supplier_prod_num>
          <qty_type>E</qty_type>
        </product>
        <product p_count="2">
          <supplier_prod_num>6744</supplier_prod_num>
          <qty_type>E</qty_type>
        </product>
      </product_lines>
    </order>
  </orders>
</order_batch> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:47:38.327

这个怎么样：

```
CREATE TABLE #TEST (CUSTID VARCHAR(50), CUSTNAME VARCHAR(50), PRODUCT VARCHAR(500))

DECLARE @input XML 

SELECT @input = CAST(x AS XML)
FROM OPENROWSET
     (BULK '\\test\Test.xml',
      SINGLE_BLOB) AS T(X)

INSERT INTO #TEST(CUSTID, CUSTNAME, PRODUCT)
    SELECT
        Customers.value('(cust_id)[1]', 'VARCHAR(50)'),
        Customers.value('(name)[1]', 'VARCHAR(50)'),
        Products.value('(supplier_prod_num)[1]', 'VARCHAR(500)')
    FROM
        @input.nodes('/order_batch/orders/order') AS Tbl(Orders)
    CROSS APPLY
        Orders.nodes('customer') AS TblC(Customers)
    CROSS APPLY
        Orders.nodes('product_lines/product') AS TblP(Products) 
```

这会“分解” XML 并使用嵌套`CROSS APPLY .nodes()`方法从订单节点中提取任意数量的客户以及任意数量的产品。

# lambda - 避免由于冗余转换导致的 lambda 表达式中的代码分析 CA1800 错误

> ID：12860337
> 
> 赞同：2
> 
> 时间：2012-10-12T13:39:03.660
> 
> 标签：lambda, refactoring, expression, code-analysis

**背景**

我有一个接口 Interface1，它由 Interface2、Interface 3...等继承。除了接口 1 之外，所有其他接口都有具体的类（object2、object3..etc），它们实现了它们各自的接口 Interface 2、Interface 3...等。

我还有一组 Interface 1 类型的对象，我的意图是填充各种对象。

**问题**

我想从这个集合中提取一个特定的对象，并为它使用 lambda 表达式。

```
Object2 = IInterface1Collection.Single(item => item.GetType()==typeof(Object2)
            && ((Object2)item).Property1=="John" && ((Object2)item).Property2==0); 
```

此代码给出 CA1800 的代码分析性能错误。它说

> 错误 1 ​​CA1800：Microsoft.Performance：“item”，一个参数，在方法“Method1()”中多次转换为“Object2”类型。缓存“as”运算符或直接转换的结果，以消除多余的 castclass 指令。

如果我抑制该消息，它可以正常工作并使我满足条件的 Object2。

**问题**

如何避免此错误消息？我必须将 item 转换为 Object2 否则我无法达到它的属性。我负担不起创建 Object2 的集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:42:29.757

我建议`OfType`先使用：

```
Object2 = IInterface1Collection.OfType<Object2>()
                               .Single(item => item.Property1 == "John" && 
                                               item.Property2 == 0); 
```

请注意，它的行为会*略有*不同，因为它还将*包括*. `Object2`那是问题吗？如果是这样，你总是可以写：

```
Object2 = IInterface1Collection.OfType<Object2>()
                               .Single(item => item.GetType() == typeof(Object2))
                                               item.Property1 == "John" && 
                                               item.Property2 == 0); 
```

# asp.net - Windows 服务或 WCF 服务

> ID：12860338
> 
> 赞同：2
> 
> 时间：2012-10-12T13:39:18.590
> 
> 标签：asp.net, wcf, windows-services

我需要实现简单的文件观察实用程序。我决定在一个简单的 Windows 服务中实现这一点，该服务将在内部使用 FileSystemWatcher。目的是监视给定的目录路径（或 ftp），并在检查一些预定义的逻辑后将文件复制到新文件进入的其他服务器

因为我使用的是 .net 3.5；客户建议我使用 WCF。我在 WCF 方面的经验非常少。

我不确定如何创建 WCF 服务，该服务的功能类似于 WindowsService，并且可以部署在 Windows 服务器上的服务中。

作为一个未来主义者，创建 WCF 服务而不是 windows 服务是一个好主意，或者我应该坚持使用 windows 服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:00:00.750

**Windows 服务！= WCF**

您不能创建一个 WCF 服务，其功能类似于 Windows 服务。WCF 服务等待来自第三方的消息并对其进行操作，Windows 服务是一个始终在后台运行的进程。WCF试图解决将通信机制（传输协议，如Tcp、Http、Named Pipe等）从服务接口中分离出来的问题。

**文件观察器实用程序**

虽然理论上可以在 WCF 中创建一个新的平面文件绑定，“可以”将它的地址设置为文件系统位置，但在 .NET 框架中并不直接存在。查看 MSDN 上的[Custom Bindings](http://msdn.microsoft.com/en-us/library/aa347793.aspx)文章，对我来说，如何构建文件系统绑定并不是很明显。这些是可用的已定义传输选项：

1.  TCP
2.  HTTP
3.  HTTPS
4.  命名管道 (IPC)
5.  点对点 (P2P)
6.  消息队列 (MSMQ)
7.  风俗

如果必须通过文件丢弃进行通信，那么 WCF 不能解决您的问题。

**WCF 可能在哪里工作**

客户端可能的意思是创建一个`copy the file to some other server wherever new file comes in after checking some predefined logic`执行`FileWatcher`.

如果您有多个客户端需要能够执行相同的逻辑，然后将输出发送到其他服务器，那么创建 WCF 服务可能是有意义的，否则此时它会过度设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:45:06.097

在发现需要更改之前，您应该选择最简单的选项，最简单的选项是 Windows 服务。

有一个称为 YAGNI 的编码原则（你不会需要它）适用于这种情况，因为在大多数情况下，简单地将某些东西包装在 WCF 服务中只会增加不必要的复杂性。简单地说，做最小可行的解决方案，只在需要时进行扩展。

PS。如果您在网络共享上使用 FileSystemWatcher，请注意它存在记录的问题，您应该使用 poll + FileSystemWatcher 的组合。Stack Overflow 上有很多关于它的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:45:35.520

在您的用例中，Windows 服务更有意义，我认为这是更合适的解决方案。您需要始终运行和监视目录的东西，而这正是 Windows 服务非常擅长的用例。

我会考虑与客户交谈并解释 Windows 服务是这种用例的更合适的解决方案。此外，windows 服务也不是旧帽子，它们正是为了解决这类用例，而 WCF/windows 服务相辅相成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:50:39.020

这两个功能的名称中都有**服务**，因为它们几乎没有任何共同点。

Windows 服务在单台机器上持续运行。

WCF 服务是其他机器可以远程调用的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:59:25.173

这仅取决于您需要做什么。Windows 服务和“WCF 服务”几乎没有共同之处。

这里的问题是您是否需要 HTTP 端点。如果你这样做了，你甚至可以在你的 Windows 服务中托管一个 WCF 服务来提供它。请记住，WCF 仅用作在应用程序之间进行通信的一种方式。

但是，阅读您的描述，您似乎不需要它。

[托管 Windows 服务中的 WCF 服务](http://msdn.microsoft.com/en-us/library/ms733069.aspx)

# vb.net - 每月小时数，夏令时

> ID：12860342
> 
> 赞同：4
> 
> 时间：2012-10-12T13:39:42.073
> 
> 标签：vb.net, date, dst

是否有内置函数来计算一个月的小时数？它需要处理夏令时（增加或减少一个小时）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:45:33.750

*如果*您不在午夜并不总是有效的时区，您可以执行以下操作（如果 VB 语法稍有偏差，请致歉）：

```
Dim start = New DateTime(year, month, day, 0, 0, 0, DateTimeKind.Local)
Dim end = start.AddMonths(1)
Dim length = end.ToUniversalTime() - start.ToUniversalTime()
Dim hours = length.TotalHours 
```

如果您在巴西这样的地方，DST 转换发生在当地时间午夜，那么这可能会出现问题。请注意，以上都是假设您*要*使用系统本地时区。

使用[Noda Time](http://noda-time.googlecode.com)，您可以创建适当的值，然后[在相关日期开始时](http://noda-time.googlecode.com/hg/docs/api/html/M_NodaTime_DateTimeZone_AtStartOfDay.htm)`LocalDate`转换为 a ，并以这种方式计算出差异，没有任何歧义。C# 示例：`ZonedDateTime`

```
var zone = ... // Whatever DateTimeZone you want...
var start = new LocalDate(year, month, day);
var end = start.PlusMonths(1);
var startInstant = zone.AtStartOfDay(start).ToInstant();
var endInstant = zone.AtStartOfDay(end).ToInstant();
var duration = endInstant - startInstant;
var hours = duration.Ticks / NodaConstants.TicksPerHour; 
```

# java - 使用原生 SQL 查询时如何指定数据类型？

> ID：12860347
> 
> 赞同：6
> 
> 时间：2012-10-12T13:39:54.567
> 
> 标签：java, spring, hibernate

我正在使用休眠。我已经编写了本机 SQL 查询，我想指定其中一列的数据类型，如下所示。

```
sqlQuery.addScalar("NAME", STRING); 
```

我正在查询 5 列，并且`ID`是其中的一列。但如果我使用`addScalar`它，它不会返回所有列并且只返回`NAME`。我指定列类型的原因是`NAME`column is of `CHAR(10)`in table 但我想要`String`类型。如何指定数据类型并获取所有列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T13:46:33.443

为了避免使用 ResultSetMetadata 的开销，或者只是为了更明确地返回返回的内容，可以使用 addScalar()：

```
sess.createSQLQuery("SELECT * FROM CATS")
 .addScalar("ID", Hibernate.LONG)
 .addScalar("NAME", Hibernate.STRING)
 .addScalar("BIRTHDATE", Hibernate.DATE) 
```

此查询指定：

```
the SQL query string

the columns and types to return 
```

这将返回 Object 数组，但现在它不会使用 ResultSetMetadata，而是从底层结果集中显式获取 ID、NAME 和 BIRTHDATE 列，分别作为 Long、String 和 Short。这也意味着只有这三列将被返回，即使查询使用 * 并且可能返回多于列出的三列。

参考：[http ://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13646](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#d0e13646)

因此，在您的情况下，再添加 4 个`addScalar()`方法，包括其列名和数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:51:20.190

这是正常工作的。它可以使用`ResultSetMetaData`并返回查询返回的所有值，也可以使用提供的类型输入并返回随类型提供的列。

如果没有问题，也为剩余的四列添加类型。

```
 sqlQuery.addScalar("NAME", STRING).
     .addScalar("ID", Hibernate.LONG)
     .addScalar("COLUMN3", STRING)
     .addScalar("COLUMN4", STRING)
     .addScalar("COLUMN5", STRING); 
```

根据您的实际列名及其数据类型更新列名和数据类型。

# android - 如何仅为我的活动更改 android 开发中的键盘外观

> ID：12860349
> 
> 赞同：1
> 
> 时间：2012-10-12T13:39:56.373
> 
> 标签：android, android-layout, android-widget

我正在尝试使用通常以相同按钮位置弹出的确切键盘，但我想更改按钮的颜色/外观。我查看了示例项目 SoftKeyboard，但它没有在模拟器上显示为应用程序，我无法从中学到很多东西。我需要使用这个自定义键盘的输入，如果这太模糊，请告诉我需要更具体的地方。

如果我在我的应用程序中重新制作键盘，是否可以防止新键盘被替换为默认键盘，然后我是否还必须更改 EditText 小部件？

# ant - Cobertura 无法识别 JUnit4 测试：未找到测试

> ID：12860357
> 
> 赞同：0
> 
> 时间：2012-10-12T13:40:23.660
> 
> 标签：ant, junit4, findbugs, cobertura

我目前正在从 JUnit3 升级到 JUnit4，并且我已经更改了我的主要测试套件以使用 @SuiteClasses 注释。但是现在当我运行 cobetura 时，它找不到任何测试。我已经检查以确保我在 Cobertura 目录中看到了正确的 jar，并且旧测试 (JUnit3) 仍然可以正常工作。

自己运行的 JUnit（测试和套件）也可以正常工作。

我确信这可能是我正在使用的 Ant xml 文件中的一个问题，但我无法在任何地方找到它。

这也可能是 findbugs 的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T17:15:57.313

Problem was Ant 1.6.5 is not compatible with JUnit4

# python - 比较，例如 float(1.221) 和 c_float(1.221).value，使用减法和 epsilon 还是最好的方法？

> ID：12860358
> 
> 赞同：0
> 
> 时间：2012-10-12T13:40:24.477
> 
> 标签：python, c

我正在处理一个二进制文件，并尝试使用 write/readinto 和使用 ctypes - C 兼容的数据类型（因为这个文件也使用另一个 C 程序）来写入/读取这个文件的字节块。例如，写作：

```
num = 1.221    
my_file_in = open('values.file', "wb")
value = c_float(num)     # writing 1.22099999... this a known problem
my_file_in.write(value)
..... 
```

和阅读：

```
num = 1.221
chunk = c_float()    
my_file.readinto(chunk) 
```

`num`我想比较 num 和我从文件中读取的内容我知道 chunk.value 是 1.22099999 ... 解决在 python 程序中读取的数字和浮点数作为变量的比较值问题的最佳方法是什么？Сomparison 使用减法和 epsilon 还是其他方式？

```
math.fabs(chunk.value - num) <= epsilon 
```

可能我可以在文件中写入 1.221 并且将来在阅读后比较没有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:45:24.250

使用 epsilon 进行比较对我来说似乎是最好的方法。

如果你认为你的错误太大，你可以从`c_float`to切换`c_double`，这是 Python 的 C 等效项`float`，两者都有 8 个字节。这相当令人困惑，但它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:02:21.837

你可以使用 numpy.allclose：

```
>>> import numpy as np
>>> np.allclose(1.221, 1.22099999)
True
>>> np.allclose(1.221, 1.222)
False 
```

资源：

[http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html)

# c# - 检索 Linkedin 电子邮件地址

> ID：12860359
> 
> 赞同：2
> 
> 时间：2012-10-12T13:40:33.103
> 
> 标签：c#, email, oauth, linkedin, hammock

我正在使用 Hammock 库和 C# 来获取用户的基本个人资料和电子邮件地址，链接在[此处](http://ovaismehboob.wordpress.com/2011/09/12/linkedin-authentication-in-asp-net/)的以下帖子中。

我也在[这里](http://mrsarker.wordpress.com/2011/08/20/linkedin-rest-api-in-asp-net-mvc/)和[这里关注了这些帖子](http://www.suddenelfilio.net/2010/08/24/linkedin-oauth-using-hammock-in-csharp-asp-net/)

但是对于我的一生，我无法获得linkedin用户的电子邮件地址。

阅读[这个](https://developer.linkedin.com/forum/can-we-get-email-address)linkedin帖子我得到了新的创建一个新的应用程序来获取新的密钥但是仍然没有运气。

浏览了[这个](http://developer.linkedin.com/forum/permission-scope-request-token-query-not-working)linkedin帖子，但也无法让它工作

我在下面发布了代码，但是从我关注的链接中大大提升了

```
var credentials = new OAuthCredentials
            {

                CallbackUrl = "http://localhost:2715/Callback.aspx",

                ConsumerKey = "my consumer key",//not shown

                ConsumerSecret = "my consumer secret",//not shown

                Type = OAuthType.RequestToken,

            };

        var client = new RestClient
            {
                Authority = "https://api.linkedin.com/uas/oauth",
                Credentials = credentials
            };

        //var scope = HttpUtility.UrlEncode("r_basicprofile r_emailaddress");

        var request = new RestRequest
                        {
                            Path = "requestToken?scope=r_basicprofile+r_emailaddress",
                        }; 
```

当用户导航到linkedin 时，我会看到此屏幕。

![在此处输入图像描述](../Images/ad6d86fc550123e0bd92de6c7d786455.png)

要实际请求电子邮件，我使用下面的代码

```
 var request = new RestRequest { Path = "people/~/email-address" };

        var credentials = new Hammock.Authentication.OAuth.OAuthCredentials

        {

            Type = OAuthType.AccessToken,

            SignatureMethod = OAuthSignatureMethod.HmacSha1,

            ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader,

            ConsumerKey = "my consumer key", //not shown

            ConsumerSecret = "my consumer secret", //not shown

            Token = Session["AccessToken"].ToString(),

            TokenSecret = Session["AccessSecretToken"].ToString(),

            Verifier = Session["Verifier"].ToString()

        };

        var client = new RestClient()
        {
            Authority = "http://api.linkedin.com/v1/",
            Credentials = credentials,
            Method = WebMethod.Get
        };

        var MyInfo = client.Request(request);

        String content = MyInfo.Content; 
```

这是我在 MyInfo.Content 上遇到的错误

![在此处输入图像描述](../Images/a84240b7b1bf926b9e60b26bc1a39b3d.png)

在此先感谢您的帮助。

在尝试 Kamyar 的建议时，我收到以下错误消息。我还应该尝试什么？

![在此处输入图像描述](../Images/0aac83d99dc193e8a91c8ddbf0b9a8a9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:51:46.660

只要您在授权时请求“r_emailaddress”权限，经过身份验证的用户就可以访问电子邮件地址。

查看呈现给用户以授权应用程序的 Oauth 登录对话框。请注意“电子邮件地址”如何不显示为应用程序想要访问的配置文件字段之一。您需要在代码中修改这一行：

```
var request = new RestRequest
                        {
                            Path = "requestToken?scope=r_basicprofile+r_emailaddress",
                        }; 
```

对此：

```
var request = new RestRequest
                        {
                            Path = "requestToken?scope=r_basicprofile%20r_emailaddress",
                        }; 
```

该空间应在您的请求令牌路径中进行 URL 编码。

谢谢， Kamyar Mohager

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T02:21:49.147

更新：LinkedIn 已经更新了他们的 API，现在您可以在他们的普通 API 中获取电子邮件地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:49:55.043

我找到了解决方案。简单地说，不要在 RestRequest 的 .Path 属性中包含 ?scope=r_emailaddres（或其他权限）。使用这样的东西：

```
Dim request = New RestRequest With {.Path = "requestToken"}
request.AddParameter("scope", "r_emailaddress") 
```

（vb 网络语法）

.AddParameter 方法是关键。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T23:51:59.183

使用 JavaScript，在我的头部区域：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://platform.linkedin.com/in.js">
  api_key: put-your-api-key-here
    authorize: true
    scope: r_basicprofile r_emailaddress
</script>
<script type="text/javascript">

function loadData() {
    IN.API.Profile("me")
        .fields(["firstName","lastName","id","emailAddress"])
        .result(function(result) {
                //$("#profile").html(JSON.stringify(result))
                $("#profile").html(JSON.stringify(result))
        });
}

</script> 
```

在正文中，我输入了以下内容：

```
<div id="profile">
</div>
<script type="IN/Login" data-onAuth="loadData"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:47:21.433

我花了几天时间研究这个问题，遗憾地发现 LinkedIn 不会通过他们的 API 公开用户的电子邮件地址，除非你与他们有合作伙伴协议（如微软等）

知道这一点后，您的选择是使用 LinkedIn 作为 OpenId / OAuth 提供者，并在通过身份验证后询问他们的首选电子邮件地址。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-01T06:21:36.413

我终于通过使用 DotNetOpenAuth Api 和我在 google dotnetopenauth group 找到的 LinkedIn Consumer 类获得了电子邮件地址。

# android - 相册和保管箱应用程序

> ID：12860366
> 
> 赞同：1
> 
> 时间：2012-10-12T13:40:46.550
> 
> 标签：android, dropbox, android-sdcard, android-photos

这就是我如何激发从相册中获取图片的意图

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(intent, SELECT_PICTURE); 
```

然后从结果中我选择从

```
 Uri selectedImageUri = data.getData();

public String getPath(Uri selectedImageUri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
} 
```

选择图片并将该图像放入sdcard。

但是由于也安装了保管箱应用程序，所以它也会出现，当我选择图像时，Uri 就像

file:///mnt/sdcard/Android/data/com.dropbox.android/files/scratch/FloorPlanImage/7th_floor_new.jpg

现在当我尝试 getPath 它崩溃了。你能告诉我如何解决这个问题，以便我可以获取图像的路径并将其保存在 sdcard 中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-23T06:17:15.313

使用以下代码，这对我来说非常适合

```
Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            startActivityForResult(
                    Intent.createChooser(intent, "Upload photo"),
                    RESULT_LOAD_IMAGE); 
```

在'onActivityResult'中编写以下代码

```
protected void onActivityResult(final int requestCode, int resultCode,
            Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
                && null != data) {

Uri selectedImage = data.getData();
imageView.setImageURI(selectedImage);

        } else

        if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
            photo = (Bitmap) data.getExtras().get("data");
            imageView.setImageBitmap(photo);

        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T06:03:33.003

好吧，我知道问题出在哪里

```
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA); 
```

由于图像是从 Dropbox 而不是从 android 的照片库中选择的，所以什么都不返回。

所以我做的是在选择图像时使用 Uri 并使用它来设置 ImageView 并且效果很好。

谢谢 ！！

# android - 单个 onTouch 感应到 4 个事件？

> ID：12860370
> 
> 赞同：0
> 
> 时间：2012-10-12T13:40:49.497
> 
> 标签：android

该按钮通过 绘制在画布上`onDraw`。在以下方法中，我获取了绘制按钮的位置并检测到其中的触摸。一旦被感应到`snapShot();`就被调用。我已将 的内容替换`snapShot();`为`System.out.println("snapShot(); is called");`。每次触摸我都会不断打印出四行。我不明白这个方法是如何连续调用 snapShot() 的？

```
public boolean onTouch(View view, MotionEvent me) {
    Resources res = getResources();
    Bitmap bitmap = BitmapFactory.decodeResource(res, R.drawable.camera);
    DisplayMetrics metrics = getResources().getDisplayMetrics();
        int w = metrics.widthPixels;
        int h = metrics.heightPixels;
        int heightOffset = - bitmap.getHeight() + h;
        int widthOffset = w - bitmap.getWidth();
    //See if the motion event is on a Marker
     if((me.getRawX() >= widthOffset && me.getRawX() < (widthOffset + bitmap.getWidth()) 
                && me.getRawY() >= heightOffset && me.getRawY() < (heightOffset + bitmap.getHeight()))) 
        {
            snapShot();
            return true; 

    }

    return super.onTouchEvent(me);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:55:51.237

因为当您的手指向下、移动和抬起时都会调用 onTouch。您需要检查 MotionEvent 以确定哪个手指在做什么。在不引起移动事件的情况下触摸也可能非常困难 - 请参阅触摸倾斜。

[http://www.mybringback.com/tutorial-series/3279/android-the-basics-32-androids-ontouchlistener-and-motionevent/](http://www.mybringback.com/tutorial-series/3279/android-the-basics-32-androids-ontouchlistener-and-motionevent/)

[Android ACTION_MOVE 阈值](https://stackoverflow.com/questions/6785068/android-action-move-threshold)

# actionscript-3 - 使用闪存流式传输

> ID：12860373
> 
> 赞同：0
> 
> 时间：2012-10-12T13:40:54.070
> 
> 标签：actionscript-3, flash, apache-flex, flex4

我有一个通过 rtmp 协议流式传输的 Flash 播放器。播放器在本地运行良好，除非我远程使用它。尽管流媒体地址很好，但它不会流式传输。此外，我们最近从 http 更改为使用 https。

https是否有问题或可能是什么问题，任何想法都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T10:43:50.037

事实证明，播放器获取的是主机名而不是流式传输的 IP 地址，因此它为此苦苦挣扎了 20 秒。好的，我们发现 DNS 没有正确解析流式传输的 url :) 所以使用真实 IP 地址而不是主机名进行流式传输

# xslt - 我想使用 xslt 修改 SOAP 请求标头中的时间格式

> ID：12860379
> 
> 赞同：2
> 
> 时间：2012-10-12T13:41:15.593
> 
> 标签：xslt

我有一个示例 SOAP 请求，我想修改收到的 SOAP 请求的安全标头中的时间戳。这是我的示例 SOAP 请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/" xmlns:dat="http://schemas.datacontract.org/2004/07/DataContracts">
<soapenv:Header>
<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<wsu:Timestamp wsu:Id="Timestamp-78496158-6fa4-41da-8887-b8116829f1d8" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<wsu:Created>2012-10-12T10:08:42Z</wsu:Created>
<wsu:Expires>2012-10-12T11:13:42Z</wsu:Expires>
</wsu:Timestamp>
<wsse:BinarySecurityToken wsu:Id="SecurityToken-db63adf4-d7c7-4827-8c36-56f672e6c397" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
xyz</wsse:BinarySecurityToken>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
xyz</Signature>
</wsse:Security>
</soapenv:Header> 
```

我想使用 xslt 修改以下元素的内容

```
<wsu:Created>2012-10-12T10:08:42Z</wsu:Created>
<wsu:Expires>2012-10-12T11:13:42Z</wsu:Expires> 
```

到

```
<wsu:Created>2012-10-12T10:08:42.000Z</wsu:Created>
<wsu:Expires>2012-10-12T11:13:42.000Z</wsu:Expires> 
```

有人可以帮忙吗。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:15:43.620

这是一个简单、简洁的 XSLT 1.0 解决方案。

**当这个 XSLT：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
  version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="wsu:Created|wsu:Expires">
    <xsl:copy>
      <xsl:value-of select="concat(substring-before(., 'Z'), '.000Z')" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于最初提供的 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:dat="http://schemas.datacontract.org/2004/07/DataContracts" xmlns:tem="http://tempuri.org/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="1">
      <wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-78496158-6fa4-41da-8887-b8116829f1d8">
        <wsu:Created>2012-10-12T10:08:42Z</wsu:Created>
        <wsu:Expires>2012-10-12T11:13:42Z</wsu:Expires>
      </wsu:Timestamp>
      <wsse:BinarySecurityToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-db63adf4-d7c7-4827-8c36-56f672e6c397" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3">xyz</wsse:BinarySecurityToken>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">xyz</Signature>
    </wsse:Security>
  </soapenv:Header>
</soapenv:Envelope> 
```

**...产生了想要的结果：**

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:dat="http://schemas.datacontract.org/2004/07/DataContracts" xmlns:tem="http://tempuri.org/" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Header>
    <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="1">
      <wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-78496158-6fa4-41da-8887-b8116829f1d8">
        <wsu:Created>2012-10-12T10:08:42.000Z</wsu:Created>
        <wsu:Expires>2012-10-12T11:13:42.000Z</wsu:Expires>
      </wsu:Timestamp>
      <wsse:BinarySecurityToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="SecurityToken-db63adf4-d7c7-4827-8c36-56f672e6c397" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3">xyz</wsse:BinarySecurityToken>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">xyz</Signature>
    </wsse:Security>
  </soapenv:Header>
</soapenv:Envelope> 
```

**解释：**

*   模板 #1 是[`Identity Template`](http://www.dpawson.co.uk/xsl/sect2/identity.html). 其目的是将源模板中的所有节点和属性原样复制到结果模板中。
*   模板 #2 匹配`<wsu:Created>`和`<wsu:Expires>`元素。找到这些元素后，XSLT 将它们复制到结果文档中并将它们的值更改为所需的值。

# iframe - 将外部网站始终保留在 iframe 中

> ID：12860381
> 
> 赞同：1
> 
> 时间：2012-10-12T13:41:18.420
> 
> 标签：iframe

我有一个网站（用 CakePHP 制作，以防万一），在它的一个页面中加载另一个网站，一个更具体的 Wordpress 博客，在 iframe 内。加载的 URL 类似于**myblogdomain.como/page_loaded.php**

在 iframe 中导航博客时，“正常”链接可以正常工作（阅读帖子、查看评论、从 Wordpress 导航栏访问页面......）。但是，如果用户在 Wordpress 博客中选择“编辑我的个人资料”选项，则 iframe 内的整个页面都会消失，显示加载 iframe 的同一页面，但没有 iframe 的内容。

我不知道是否会发生这种情况，因为当我在 iframe 内开始加载的页面直接**位于****myblogdomain** **.com** _

有什么方法可以防止这种行为并使 iframe 内发生的所有导航都导致页面加载到 iframe 内？

**编辑**

这很奇怪。我上面解释的是昨晚发生的事情。这个早上，根本没有改变任何东西**，**当我点击博客的任何链接时，我收到以下错误消息：

```
The server encountered an internal error or misconfiguration and was unable to complete your request.

Please contact the server administrator, webadmin@kundenserver.de and inform them of the time the error occurred, and anything you might have done that may have caused the error.

More information about this error may be available in the server error log.

Additionally, a 500 Internal Server Error error was encountered while trying to use an ErrorDocument to handle the request. 
```

任何想法为什么会发生这种情况？

# android - 如何在 android 或 iphone 中预装移动应用程序？

> ID：12860384
> 
> 赞同：1
> 
> 时间：2012-10-12T13:41:31.093
> 
> 标签：android, iphone, preload

我正在网上寻找**如何**在**安卓和苹果 iOS**中预加载移动应用程序- 智能手机和平板电脑。

谁能告诉我到达那里的过程？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T03:56:13.657

让您的应用程序如此漂亮和必备，以便您获得十亿用户群。而已。然后苹果和谷歌会来找你在他们的移动平台上预加载你的应用程序:)

# php - Codeigniter 如何将值从视图传递到视图以更新数据库记录

> ID：12860395
> 
> 赞同：0
> 
> 时间：2012-10-12T13:42:25.907
> 
> 标签：php, codeigniter, view, controller

我这里有桌子

```
 <?php     if ( !empty($kirim) ) 
                      {  
                            $no = 1;   
                            foreach ($kirim as $row) { ?>  
                            <tr id="row">  
                             <td id="no"><?php echo $no;?></td>  
                             <td id="judul"><?php echo $row->Kode_Kategori_Material_Jasa;?></td>  
                             <td id="kategori"><?php echo $row->Nama_Material_Jasa;?></td>  
                             <td id="action"> Edit | Delete </td>
                         //idk how to pass the value for updating
                        //and using YES or NO DialogResult for deleting
                            </tr>  
                            <?php  
                             $no++;  
                            }  
                     } 
                     else { ?>  
            <tr id="row">  
            <td colspan="6" align="center">Tabel Kosong</td>  
            </tr>  
        <?php  
        }  
        ?> 
```

我想将`Kode_Kategori_Material_Jasa`and传递`Nama_Material_Jasa`给另一个表单，这样我们就可以更新那里的值，并更新数据库记录。我已经制作了表格，但我很困惑将值直接传递给更新表格。或将它们传递给控制器​​，然后再次将其传递给更新表单。

我在这里添加了一些代码

```
<td id="action"> <a href="<?php echo site_url('/c_kategorimaterial/ubah/').$row->Kode_Kategori_Material_Jasa/$row->Nama_Material_Jasa; ?> ">Edit </a>| Delete </td> 
```

然后我得到了错误`Division by zero`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:58:24.437

最好以这种方式将其传递给控制器​​：myController/myFunction/Kode_Kategori_Material_Jasa/Nama_Material_Jasa，然后将其传递给包含表单的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:58:35.740

我会将 DB 函数保留在您的*模型*中，并使用*控制器*将它们传递给您的*视图*，因为这就是该系统的构建方式。[（MVC 和 Codeigniter）](http://phpmaster.com/untangling-mvc-with-codeigniter/) 我强烈反对你现在正在做的事情。

以下是我认为应该这样做的方式：

*   通过您的控制器发送您的视图数据，验证它[（如此处所述）](http://codeigniter.com/user_guide/libraries/form_validation.html)
*   通过模型将数据存储在数据库中
*   将此数据传递给并加载您的下一个视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T15:03:02.327

我这样做的方式是使用 POST 或 GET（取决于您的数据的合理程度）。

使用 GET：

```
<td id="action"> <a href="<?php echo(site_url('/c_kategorimaterial/ubah/').$row->Kode_Kategori_Material_Jasa."/".$row->Nama_Material_Jasa; ?> ">Edit </a>| Delete </td> 
```

`."/".`请注意，您在第一次和第二次回声之间 错过了`$row->Kode_Kategori_Material_Jasa`

使用 POST

1.  在表单中定义一个字段，例如：

    ```
    <input type="hidden" name="<?php echo ($row->Kode_Kategori_Material_Jasa);?>" value="<?php echo($row->Kode_Kategori_Material_Jasa);?>"> 
    ```

2.  通过使用检索目标控制器中的值（您`action=URL`在表单标签中设置的那个）`$_POST`

# java - 基本随机掷骰子 Java

> ID：12860398
> 
> 赞同：6
> 
> 时间：2012-10-12T13:42:48.637
> 
> 标签：java, random

我正在尝试编写一个方法 rollDice(int number, int nSides)，它返回用 nSides 边滚动数字骰子的总结果。

因此，例如 rollDice(3, 6) 应该返回滚动 3 个六面骰子的结果（加上 3 到 18 之间的数字）。

当我输入 1 时，下面的方法返回负数，`int number`我需要做什么来解决这个问题？

```
public static  int rollDice(int number, int nSides) {
    int num = 0;
      if(nSides >=3)
    {
      for(int i = 0; i < number; i++){
       Random  r = new Random(); 
       int roll = r.nextInt();
       num = num + (roll % nSides)+1;

      }
    }
      else{
          System.out.println("Error num needs to be from 3");

    }
    return num; 
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-12T13:46:43.703

`Random.nextInt()`具有不可预测的行为 - 它可以为整数生成所有可能的值，包括负数。改为使用`Random.nextInt(numSides)`- 它将从 [0,numSides) 返回一个整数，即包括 0 和不包括 numSides。要获得您想要的功能 [1,numSides] 使用

```
r.nextInt(numSides)+1; 
```

请参阅[此处](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt(int))了解更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T14:00:03.253

您只需要初始化一次`Random r`，`int roll`因此我已将它们从循环中删除。nextInt(int) 方法从 int 中选择一个整数，包括 0 到但不包括 int。这被称为 0（包括）到 int（不包括），因此您必须添加 1 来调整骰子的范围。你似乎已经知道了，虽然我不知道你为什么使用 %. 使用 * 相乘将为所有我不相信你打算做的骰子提供相同的数字。这是您的课程的一种可能实现：

```
import java.util.Random;

public class Dice {

    public static  int rollDice(int number, int nSides)
    { 
        int num = 0;
        int roll = 0;
        Random  r = new Random(); 
        if(nSides >=3) 
        { 
            for(int i = 0; i < number; i++)
            { 
                roll = r.nextInt(nSides)+1;
                System.out.println("Roll is:  "+roll);
                num = num + roll; 
            } 
        } 
        else
        { 
            System.out.println("Error num needs to be from 3"); 
        } 
        return num;  
    } 

    public static void main(String[] args)
    {
        System.out.println("Total is: "+rollDice(3, 6));
    }
}
/*
Roll is:  4
Roll is:  1
Roll is:  2
Total is: 7
*/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T13:49:30.787

替换
`int roll = r.nextInt();`
为

`int roll = r.nextInt(nSides);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:47:13.813

这个作为你的 rollDice 方法怎么样：

```
public static int rollDice(int number, int nSides) {
    int count = 0;
    for(int i = 0; i < number; i++) {
        count += (int)(Math.random() * nSides) + 1;
    }
    return count;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:45:10.620

当您使用`%`负数时，您会得到一个负数。

在这种情况下，解决方案很简单，使用

```
int roll = r.nextInt(nSides) + 1; // 1 to nSizes
num += roll; 
```

# signed - 连接到 SQL Server CE 4.0 的异常

> ID：12860404
> 
> 赞同：2
> 
> 时间：2012-10-12T13:43:00.217
> 
> 标签：signed, sql-server-ce-4, crt

当尝试连接到 SQL Server CE 4.0 ( `SqlServerCe.dll, v2.0.50727`) 时，我得到一个异常 ( `System.Data.Common.DbException`) 说：

> *application/bin 文件夹中的 CRT 二进制文件未签名，可能存在潜在的安全风险。请将原始 Microsoft CRT 二进制文件放在 application/bin 文件夹中。*

所有文件均从 microsoft.com 下载

```
string localDataFile = Path.Combine(dataPath, "StorageData.sdf");
var connectionString = String.Format("Data Source={0}", localDataFile);

if (!File.Exists(localDataFile))
{
    SqlCeEngine engine = new SqlCeEngine(connectionString);
    engine.CreateDatabase();
    engine.Dispose();
}

var connection = new SqlCeConnection(connectionString); <----Here the exception occures
StorageContext context = new StorageContext(connection);

return context; 
```

系统：

*   Windows 7的
*   视觉工作室 2010
*   .NET 4.0

有任何想法吗？

更新：重新安装以下文件已解决问题：

*   [SSCERuntime_x64-ENU.exe](http://www.microsoft.com/en-US/download/details.aspx?id=17876)
*   [SSCEVSTools-ENU.msi](http://msdn.microsoft.com/en-US/library/vstudio/aa983341.aspx)

感谢您尝试提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T23:52:27.190

我今天在帮助我们的一位客户解决软件问题时遇到了这个错误：

> application/bin 文件夹中的 CRT 二进制文件未签名，可能存在潜在的安全风险。请将原始 Microsoft CRT 二进制文件放在 application/bin 文件夹中。

我们的软件试图创建和初始化一个 Windows CE 数据库。我通过设置[此 Microsoft KB 文章](http://support.microsoft.com/kb/2715304)描述的以下注册表项绕过了该问题：

> HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\WinTrust\Trust Providers\Software Publishing

我寻找值“状态”。它不存在，所以我创建了一个 DWORD 值并将其设置为 23e00。这对应于未选中的 Internet 选项/高级设置“检查发布者的证书吊销”（请参阅​​上面链接的知识库文章）。

对于您或其他读者来说，这可能不是最好的解决方案，但我想记录下来以备将来参考。

# android - 静态函数中的活动变量

> ID：12860407
> 
> 赞同：0
> 
> 时间：2012-10-12T13:43:04.643
> 
> 标签：android, facebook, android-activity, android-context

我正在编写一个 Android 应用程序，我试图在其中运行 Facebook.authorize 函数。此函数采用以下参数：

```
Facebook.authorize(Activity, DialogListener()); 
```

现在，当我在静态函数中进行此调用时，我尝试在调用中传递一个“上下文”变量，如下所示：

```
public static void dummyFunction(Context context)
{
    Facebook.authorize(context, new DialogListener(){});
} 
```

我这样打电话：

```
dummyfunction(this); 
```

当我做所有这些时，我得到了错误：

```
The function Facebook.authorize(Context, DialogListener) is not applicable for the arguments Facebook.authorize(Activity, Dialoglistener). 
```

请告诉我在这种情况下如何传递静态“活动”变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:47:31.707

你有没有尝试过

```
public static void dummyFunction(Activity activity)
{
    Facebook.authorize(activity, new DialogListener(){});
} 
```

并称它为

```
dummy(this); 
```

?

# c++ - c++虚函数混淆

> ID：12860409
> 
> 赞同：3
> 
> 时间：2012-10-12T13:43:09.790
> 
> 标签：c++, inheritance, virtual-functions

我正在学习虚函数，我对以下程序的结果感到非常困惑，我希望两者都`a1.virFun(b1)`应该`b1.virFun(b1)`返回“来自 B 的你好”，但程序返回“来自 A 的你好”。这与我的理解相反。您能否解释一下为什么`b1.sayHello()`没有被调用，即使我将 b1 作为参数传递并且`b1.sayHello()`是虚函数。

```
#include<iostream>

using namespace std;

class A
{
 public:
 virtual void sayHello();
 void virFun(A obj);

 };

class B : public A
{
 public:
 void virFun(A obj);
 virtual void sayHello();

};

void A::sayHello()
 {
   cout << "hello from A" << endl;
 }

 void B::sayHello()
 {
   cout <<"hello from B" << endl;
 }

 void A::virFun(A obj)
 {
    obj.sayHello();
 }

 void B::virFun(A obj)
{
    obj.sayHello();
}

int main()
{
 A a1;
 B b1;

a1.virFun(b1);
b1.virFun(b1);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:46:04.687

```
void virFun(A obj); 
```

要使虚函数工作，您需要通过引用或指针传递对象，以确保您始终使用原始对象。

```
void virFun(const A &obj);
void virFun(const A *obj); 
```

否则`virFun()`将收到您的对象的*副本*，最终[“切片”](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)它并丢失派生类的信息。该副本具有`A`' 的 vtable 并且缺少`B`' 的额外字段。这通常是一场灾难。

作为一般规则，使用`T&`or`const T&`而不是 plain传递对象`T`。除了切片问题，它也更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T13:45:32.987

让 virFun 按值获取引用，而不是 A 对象：

```
 void A::virFun(A& obj) { obj.sayHello(); } 
```

> *原因*：如果你`A`取值，参数将通过复制传递的值来初始化。如果您传递一个 B，它会将其中的“A”部分复制到参数类型 ( `A`) 的新变量中 - 这称为***[对象切片](http://c2.com/cgi/wiki?ObjectSlicing)***。该参数将不再“成为”`B`实例，因此它将表现为一个`A`实例，好吧。

无需重写 B 类中的 virFun，因为它在两种情况下都使用参数 obj

事实上，virFun 可以是一个静态函数。这个名字令人困惑，因为它甚至不是一个 virFun（虚函数）——它是一个*使用*虚函数的常规函数​​。

```
#include<iostream>

using namespace std;

struct A     { virtual     void sayHello() { cout << "hello from A" << endl; } };
struct B : A { /*virtual*/ void sayHello() { cout << "hello from B" << endl; } };

static void virFun(A& obj)
{
    obj.sayHello();
}

int main()
{
    A a1;
    B b1;

    virFun(a1);
    virFun(b1);
} 
```

[在http://liveworkspace.org/code/1624496ced29eb4683f5b19072f72f60](http://liveworkspace.org/code/1624496ced29eb4683f5b19072f72f60)上现场观看

```
hello from A
hello from B 
```

# cakephp - 如何在 CakePHP 2.2 中使用 haml - sass？

> ID：12860413
> 
> 赞同：0
> 
> 时间：2012-10-12T13:43:19.290
> 
> 标签：cakephp, haml, sass, cakephp-2.2

我正在尝试按照[http://www.travisberry.com/2011/01/haml-sass-markdown-and-cakephp-oh-my/](http://www.travisberry.com/2011/01/haml-sass-markdown-and-cakephp-oh-my/)此链接中给出的步骤操作，但它应该适用于蛋糕 1.3。我已经根据 cake 2.2 更改了配置。但仍然无法使用它:(

请向我建议确保在蛋糕中使用 haml 和 sass 的步骤或链接。我也尝试过 chaml，但效果不佳。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T01:51:00.640

该`$view`属性现在`$viewClass`在 CakePHP 2.x 中。您还必须更改`haml.php`为`HamlView.php`.

您拥有的版本`haml.php`可能是 <2.0 的旧版本。在此处获取 2.0 版本：

[https://raw.github.com/ChrisCinelli/phamlp/master/Cake-2.0/View/haml.php](https://raw.github.com/ChrisCinelli/phamlp/master/Cake-2.0/View/haml.php)

# wordpress - 在类别页面中显示类别表单字段

> ID：12860415
> 
> 赞同：0
> 
> 时间：2012-10-12T13:43:23.393
> 
> 标签：wordpress, categories

我为类别页面添加了一个新的表单字段（即摘录），并将字段值保存在数据库中。现在我想在类别页面中显示值。这是我的代码，我可以知道出了什么问题吗？

```
function get_category_excerpt() {
    $cur_cat_id = get_query_var('cat');
    $cat_meta_data = get_term_meta($cur_cat_id,'category');
    return trim(html_entity_decode($cat_meta_data["excerpt"]));
} 
```

我需要调用该函数，它不是插件。我使用了 function_exists()，但我无法获得输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:18:18.547

如果您使用的是[分类元数据](http://wordpress.org/extend/plugins/taxonomy-metadata/)（如 s_had_um 所说），您的代码应该是：

```
function get_category_excerpt() {
    $cur_cat_id = get_query_var('cat');
    $cat_excerpt = get_term_meta($cur_cat_id, 'excerpt', true);
    return trim(html_entity_decode($cat_excerpt));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-08T20:07:50.783

您可以调整此代码以显示术语值：

```
add_action( 'woocommerce_after_subcategory_title', 'get_category_excerpt' );
/**
 * Display details meta on Product Category archives.
 *
 */
function get_category_excerpt() {

    if ( ! is_tax( 'product_cat' ) ) {
        return;
    }

    $t_id = get_queried_object()->term_id;
    $details = get_term_meta( $t_id, 'details', true ); //'details' is your term value

    if ( '' !== $details ) { //'details' is your term value
        ?>
        <div class="product-cat-details">
            <?php echo apply_filters( 'the_content', wp_kses_post( $details ) ); ?> //'details' is your term value
        </div>
        <?php
    }

} 
```

您应该能够对其进行调整以使其正常工作。否则，这里是来源： http: [//www.wpmusketeer.com/add-a-wysiwyg-field-to-woocommerce-product-category-page/](http://www.wpmusketeer.com/add-a-wysiwyg-field-to-woocommerce-product-category-page/)

# javascript - Ajax 加载内容，jquery 效果不起作用

> ID：12860418
> 
> 赞同：1
> 
> 时间：2012-10-12T13:43:36.250
> 
> 标签：javascript, jquery, ajax, effects

我正在使用 ajax 加载内容，在将内容加载到`#content`div 之后，我放在我的效果上的效果`main.js`不适用于加载的内容。例如这个不起作用：

```
/* Artworks Hide/show text */
$(".item").hover(function() {
  //fadein second image using jQuery fadeIn 
  $(this).find(".art_title").fadeIn(200);
}, 
function () {
  //fadein first image using jQuery fadeIn
  $(this).find(".art_title").fadeOut(200);
}); 
```

当我在没有使用 ajax 加载内容的情况下测试页面效果时，它运行良好。所以问题是通过这种方式加载的。

我该如何解决？

我正在使用两个文件：`loader.js`加载内容和`main.js`具有效果的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:50:33.720

因为您正在向 DOM 注入一些新内容，并且它不知道您定义的悬停功能。

解决方案：使用 jQuery[`on`](http://api.jquery.com/on/)

```
$(function(){
   $(document).on("mouseover",".item",function(){
      $(this).find(".art_title").fadeIn(200);
   });
   $(document).on("mouseleave",".item",function(){
      $(this).find(".art_title").fadeOut(200);
   });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:50:59.523

您是否在使用 Ajax 调用加载新内容后调用 JavaScript 代码。

当您调用`$(".item").hover`它时，它会将其添加到当时存在的元素中。它不会找到调用后存在的元素。

如果您使用的是 jQuery 1.7+，您可以使用 on 并将其附加到主体上，它应该可以开始工作了。在 1.8 中，不推荐使用悬停，因此您应该单独附加鼠标事件。

```
$(document).on("mouseenter", ".item", function() {
    $(this).find(".art_title").stop().fadeIn(200);
}).on("mouseleave", ".item", function () {
    $(this).find(".art_title").stop().fadeOut(200);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T13:56:48.717

您是否在加载完成回调中附加这些事件？

```
$("#content")
    .load("remote_content.htm", function () {
        $(".item").hover(function () {
            //fadein second image using jQuery fadeIn 
            $(this).find(".art_title").fadeIn(200);
        }, function () {
            //fadein first image using jQuery fadeIn
            $(this).find(".art_title").fadeOut(200);
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:52:23.097

这是因为您的代码所做的是将这些脚本附加到事件中。但是，代码不会自行执行。你需要附上它。

尝试这样做，将整个代码封装在一个函数中。一旦从 ajax 获得响应，将内容放入 div 中，同时调用封装了整个 javascript 代码的 javascript 函数。这将导致代码绑定到事件。

现在您应该能够看到这些事件。

# python - Python Pandas：带有 aggfunc = count unique distinct 的数据透视表

> ID：12860421
> 
> 赞同：74
> 
> 时间：2012-10-12T13:43:47.700
> 
> 标签：python, pandas, pivot-table

这段代码：

```
df2 = (
    pd.DataFrame({
        'X' : ['X1', 'X1', 'X1', 'X1'], 
        'Y' : ['Y2', 'Y1', 'Y1', 'Y1'], 
        'Z' : ['Z3', 'Z1', 'Z1', 'Z2']
    })
)
g = df2.groupby('X')
pd.pivot_table(g, values='X', rows='Y', cols='Z', margins=False, aggfunc='count') 
```

返回以下错误：

```
Traceback (most recent call last): ... 
AttributeError: 'Index' object has no attribute 'index' 
```

如何获得一个数据透视表，其中包含其他两列的一个 DataFrame 列**的唯一值计数？**
是否有`aggfunc`唯一计数？我应该使用`np.bincount()`吗？

注意。但是我知道`pandas.Series.values_counts()`我需要一个数据透视表。

* * *

编辑：输出应该是：

```
Z   Z1  Z2  Z3
Y             
Y1   1   1 NaN
Y2 NaN NaN   1 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-10-12T15:19:00.237

你的意思是这样的吗？

```
>>> df2.pivot_table(values='X', index='Y', columns='Z', aggfunc=lambda x: len(x.unique()))

Z   Z1  Z2  Z3
Y             
Y1   1   1 NaN
Y2 NaN NaN   1 
```

请注意，使用`len`假设您的 DataFrame 中没有`NA`s。你可以这样做`x.value_counts().count()`或`len(x.dropna().unique())`以其他方式。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2013-10-28T08:48:01.100

这是计算 中的条目的好方法`.pivot_table`：

```
>>> df2.pivot_table(values='X', index=['Y','Z'], columns='X', aggfunc='count')

        X1  X2
Y   Z       
Y1  Z1   1   1
    Z2   1  NaN
Y2  Z3   1  NaN 
```

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2018-07-16T17:45:37.400

由于至少 0.16 版的 pandas，它不带参数“rows”

从 0.23 开始，解决方案是：

```
df2.pivot_table(values='X', index='Y', columns='Z', aggfunc=pd.Series.nunique) 
```

返回：

```
Z    Z1   Z2   Z3
Y                
Y1  1.0  1.0  NaN
Y2  NaN  NaN  1.0 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-07-06T03:06:31.610

`aggfunc=pd.Series.nunique`提供不同的计数。完整代码如下：

```
df2.pivot_table(values='X', rows='Y', cols='Z', aggfunc=pd.Series.nunique) 
```

此解决方案归功于@hume（请参阅已接受答案下的评论）。在此处添加作为答案以获得更好的可发现性。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-08-19T20:36:38.330

*   `aggfunc`参数 in将[`pandas.DataFrame.pivot_table`](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.pivot_table.html)作为`'nunique'`a`string`或 in a`list`
    *   [`pandas.Series.nunique`](https://pandas.pydata.org/docs/reference/api/pandas.Series.nunique.html)或者[`pandas.core.groupby.DataFrameGroupBy.nunique`](https://pandas.pydata.org/docs/reference/api/pandas.core.groupby.DataFrameGroupBy.nunique.html)
*   **经测试`pandas 1.3.1`**

```
out = df2.pivot_table(values='X', index='Y', columns='Z', aggfunc=['nunique', 'count', lambda x: len(x.unique()), len])

[out]:
             nunique           count           <lambda>            len          
Z       Z1   Z2   Z3    Z1   Z2   Z3       Z1   Z2   Z3   Z1   Z2   Z3
Y                                                                     
Y1     1.0  1.0  NaN   2.0  1.0  NaN      1.0  1.0  NaN  2.0  1.0  NaN
Y2     NaN  NaN  1.0   NaN  NaN  1.0      NaN  NaN  1.0  NaN  NaN  1.0

out = df2.pivot_table(values='X', index='Y', columns='Z', aggfunc='nunique')

[out]:
Z    Z1   Z2   Z3
Y                
Y1  1.0  1.0  NaN
Y2  NaN  NaN  1.0

out = df2.pivot_table(values='X', index='Y', columns='Z', aggfunc=['nunique'])

[out]:
             nunique          
Z       Z1   Z2   Z3
Y                   
Y1     1.0  1.0  NaN
Y2     NaN  NaN  1.0 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-12T15:21:39.160

您可以为 的每个不同值构造一个数据透视表`X`。在这种情况下，

```
for xval, xgroup in g:
    ptable = pd.pivot_table(xgroup, rows='Y', cols='Z', 
        margins=False, aggfunc=numpy.size) 
```

将为 的每个值构建一个数据透视表`X`。您可能希望`ptable`使用`xvalue`. 使用此代码，我得到 (for `X1`)

```
 X        
Z   Z1  Z2  Z3
Y             
Y1   2   1 NaN
Y2 NaN NaN   1 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-08T18:33:56.863

由于没有一个答案是最新版本的 Pandas 的，因此我正在为这个问题编写另一个解决方案：

```
import pandas as pd

# Set example
df2 = (
    pd.DataFrame({
        'X' : ['X1', 'X1', 'X1', 'X1'], 
        'Y' : ['Y2', 'Y1', 'Y1', 'Y1'], 
        'Z' : ['Z3', 'Z1', 'Z1', 'Z2']
    })
)

# Pivot
pd.crosstab(index=df2['Y'], columns=df2['Z'], values=df2['X'], aggfunc=pd.Series.nunique) 
```

返回：

```
Z   Z1  Z2  Z3
Y           
Y1  1.0 1.0 NaN
Y2  NaN NaN 1.0 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-26T21:49:50.040

为了获得最佳性能，我建议进行`DataFrame.drop_duplicates`跟进`aggfunc='count'`。

其他人是正确的，这`aggfunc=pd.Series.nunique`将起作用。但是，如果`index`您拥有的组数很大 (>1000)，这可能会很慢。

所以而不是（引用@Javier）

```
df2.pivot_table('X', 'Y', 'Z', aggfunc=pd.Series.nunique) 
```

我建议

```
df2.drop_duplicates(['X', 'Y', 'Z']).pivot_table('X', 'Y', 'Z', aggfunc='count') 
```

这是有效的，因为它保证每个子组（ 的每个组合`('Y', 'Z')`）都将具有唯一的（非重复）值`'X'`。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-02T10:35:55.743

`aggfunc=pd.Series.nunique` 只会计算一系列的唯一值 - 在这种情况下，计算列的唯一值。但这并不能完全反映为`aggfunc='count'`

对于简单的计数，最好使用`aggfunc=pd.Series.count`

# css - Bootstrap Nav-List 对齐/浏览器兼容性

> ID：12860425
> 
> 赞同：0
> 
> 时间：2012-10-12T13:43:57.233
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我正在使用以下内容在基于引导程序的 Rails 应用程序中创建导航列表：

```
<ul class="nav nav-list">
  <li class="nav-header">Going out</li>
    <% @event_types.each do |et| %>
      <li>
       <a href="/events?event_type=<%= et.id %>">
       <div class="span2"><%= et.event_type %></div>
       <div><span class="badge badge-success"><%= et.events.future_events_count %></span></div></a>
      </li>
   <% end %>
</ul> 
```

我认为这看起来不错，直到有人指出它在 Internet Explorer 中未对齐！

我的网站在这里：[www.wozzoncornwall.co.uk](http://www.wozzoncornwall.co.uk)，例如，如果您在 Chrome 中查看，它看起来不错。在 IE 中查看，你会明白我的意思。有谁知道如何修改它以维护左侧的事件类型和右侧的事件计数，以便跨浏览器兼容？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:40:48.527

好的，我认为这是我们自己的。这是其他有同样问题的人的方法。

基本上，我将两个 div 放在 li 标签内，然后使用引导程序 pull-right 辅助类：

```
<% @event_types.each do |et| %>
    <li>
      <a href="/events?event_type=<%= et.id %>">
        <%= et.event_type %>
            <span class="badge badge-success pull-right"><%= et.events.future_events_count %></span>
        </a>
    </li>
<% end %> 
```

# php - PHP：每个页面上的 PHP 自动加载变量

> ID：12860433
> 
> 赞同：1
> 
> 时间：2012-10-12T13:44:20.107
> 
> 标签：php

我有一个常数

像`define('SITE_URL','http://somewebsite.com');`

我在某些页面上使用它

有时还会更改该变量的值，因此在每一页上更改变量值是一项可悲的任务。

请建议我一些替代方法，例如一些自动类加载器或任何其他方法。

因为这是我的第一个 PHP 网站，所以我无法决定在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:48:39.897

首先 a`define`不是变量。

要在多个页面中使用它，请将所有定义放在一个单独的 PHP 文件中，并在需要时将其包含在其他 php 文件中。

**例子：**

在*定义.php*中：

```
define('SITE_URL','http://somewebsite.com'); 
```

在*page1.php*中：

```
include 'defines.php';
// do stuff and use the define:
echo SITE_URL;  // <-- notice that there are no quotes 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T13:50:56.323

您可以使用变量创建一个文件，例如“variables.php”，然后在您要使用该变量的所有页面上执行以下操作：

```
include("path_to_the_file/variable.php"); 
```

并且您将可以访问该变量，并且您将能够更改该脚本的值。

* * *

如果要更改所有脚本的值，请改用会话变量。你需要有

```
session_start(); 
```

在使用该变量的所有页面上。用于设置变量： $_SESSION['myVar'] = "value";

因此，无论何时您需要访问该 var，您都可以“

```
echo $_SESSION['myVar']; 
```

或者你可以改变它的价值：

```
$_SESSION['myVar'] = "new Value"; 
```

它将在整个会话中更改。

记得有`session_start()`，这样你就可以访问它。

# java - 使用 SuperCSV 解析器时出现问题

> ID：12860435
> 
> 赞同：0
> 
> 时间：2012-10-12T13:44:25.450
> 
> 标签：java, csv, export-to-csv, supercsv

我创建了一个 Web 应用程序模块来将 CSV 文件导入数据库。导入过程后，用户将显示摘要，输入文件中的记录总数，导入到数据库的好记录总数和拒绝记录的总数。用户可以下载成功和错误记录进行验证。

问题是一些重复的记录被附加到成功和错误文件中。例如，用户收到如下消息：

总记录数：2099
好记录数：1694
跳过记录数：405
点击下载成功文件：Import_20121012184828_success.csv
点击下载错误文件：Import_20121012184828_errors.csv

当我们检查数据库时，表中的记录数正好是“1694”（与预期的好记录数相同。）。但在 Import_20121012184828_success.csv 文件中有 '1741' 记录。但是在 Eclipse 控制台中，它的打印结果与 db 中的相同，即在最后一次成功记录之后没有重复。所以一旦退出循环，当我调用 successCsvMapWriter.close(); 和 errorCsvMapWriter.close(); 一些从缓冲区的记录被添加的地方。我想不通。

**注意**：对于少量输入，我根本没有注意到任何问题。试用版本 1.52 和 2.0.0 beta。

以下是创建结果文件的代码：

```
File successFile = new File(csvFileDetails.getSuccessFileUrl());
File errorFile = new File(csvFileDetails.getErrorFileUrl());
// Create result files.
successFile.createNewFile();
errorFile.createNewFile();

String[] header = csvFileDetails.getHeader();
String[] errorFileHeader = ArrayUtils.add(header,
    CatalogImportConstanst.CSV_ERROR_HEADER);

// Also tried CsvPreference.STANDARD_PREFERENCE 
ICsvMapWriter successCsvMapWriter = new CsvMapWriter(new BufferedWriter(
    new FileWriter(successFile)), CsvPreference.EXCEL_PREFERENCE);
ICsvMapWriter errorCsvMapWriter = new CsvMapWriter(new BufferedWriter(
    new FileWriter(errorFile)), CsvPreference.EXCEL_PREFERENCE);

successCsvMapWriter.writeHeader(header);
successCsvMapWriter.flush();
errorCsvMapWriter.writeHeader(errorFileHeader);
errorCsvMapWriter.flush();

int errorCount = 0;
int successCount = 0;
for (Map<String, String> csvRecord : csvAsList) {
    if (csvRecord.get(CatalogImportConstanst.CSV_ERROR_HEADER) != null
        && csvRecord.get(CatalogImportConstanst.CSV_ERROR_HEADER).trim().length() > 0) {
        errorCsvMapWriter.write(csvRecord, errorFileHeader);
        errorCsvMapWriter.flush();
        errorCount++;
        System.out.println("Error record: "+ csvRecord);
    } else {
        successCsvMapWriter.write(csvRecord, header);
        successCsvMapWriter.flush();
        successCount++;
        System.out.println("Success record: "+ csvRecord);
    }
  }
successCsvMapWriter.close();
errorCsvMapWriter.close(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:37:33.450

澄清一下，当您说您的成功文件有 1741 条记录时，您是在计算 CSV 记录还是文件中的行数？可能是您有嵌入换行符的记录，这意味着您不能简单地计算行数（即这实际上是重复还是您计数不正确？）。

而不是自己维护记录计数 - 您可以使用[`getRowNumber()`](http://supercsv.sourceforge.net/apidocs/org/supercsv/io/AbstractCsvWriter.html#getRowNumber%28%29)，它返回写入的行数（包括标题）。如果你在方法结束时调用它，它会返回什么？

```
successCsvMapWriter.close();
errorCsvMapWriter.close();

System.out.println("Success records (including header): " +
    successCsvMapWriter.getRowNumber());
System.out.println("Error records (including header): " +
    errorCsvMapWriter.getRowNumber()); 
```

哦，您不需要所有这些`flush()`语句 - 当您调用`close()`.

# php - OpenID登录后获取数据

> ID：12860438
> 
> 赞同：3
> 
> 时间：2012-10-12T13:44:39.120
> 
> 标签：php, openid, lightopenid

我正在使用 OpenID 库 LightOpenID 让用户登录到他们最喜欢的提供商并将一些信息传递给我的系统。

使用 LightOpenID，这看起来像：

```
$openid = new LightOpenID('localhost');
if(!$openid->mode) {
    $openid->identity = 'https://www.google.com/accounts/o8/id';
    $openid->required = array(
        'country' => 'contact/country/home',
        'email' => 'contact/email',
        'firstname' => 'namePerson/first',
        'language' => 'pref/language',
        'lastname' => 'namePerson/last',
    );
    header('Location: ' . $openid->authUrl());
} elseif($openid->mode == 'cancel') {
    echo 'User has canceled authentication!';
} else {
    echo 'User ' . ($openid->validate() ? $openid->identity . ' has ' : 'has not ') . 'logged in.';
    echo '<pre>'.print_r($openid->data, true).'</pre>';
} 
```

通过设置该`required`属性，我可以向 OpenID 提供商（例如 Google）询问一些用户详细信息。如果我的研究是正确的，这就是所谓的*“属性交换”*。

现在，我遇到了一些问题（为了简短起见）：

**1.**只有几个供应商列出了他们支持的属性。我想我在这里遗漏了一些东西，认为提供者列出这些属性是显而易见的。有没有什么方法可以通过协议“发现”这些属性？

**2.**这是我面临的主要问题。基本上，我请求的信息（属性）在用户成功登录并批准后传递到我的服务器。这很好而且很正常——除非我的系统这样做，否则不会永久存储这些数据。然而，问题是我需要在用户登录*后的某个时间获取这些数据。*

如果我必须用 Facebook 来做这件事，它会使用`$fb->api('/me');`. 有趣的是，如果我在用户登录时将用户重定向到登录页面，他会使用我需要的信息重定向到我的网站。但是这个过程需要在服务器上完成，我猜对提供者的简单 CURL 请求不会让我得到这些字段。也许原始登录响应参数中的某些内容可能会有所帮助？

**TL：博士；***用户登录后*如何在没有我这边的持久存储的情况下获取属性交换字段？

**PS：**我使用会话作为持久存储；现在我只是存储 openid 身份 url，但如果需要，我可以添加更多内容。但是，我无法存储 openid 登录响应给出的所有字段（姓名、姓氏、电子邮件等）。

**杂项链接/注释**

我必须承认 OpenID 中有很多我不完全理解的东西。因此，我将尝试保留一些可能对未来读者有所帮助的笔记或“事实”。

*   [OpenID 属性列表](https://stackoverflow.com/questions/7403536/list-of-available-attributes-for-http-axschema-org-and-http-schemas-openid-n)
*   **问题：**为什么所有架构 URL 都会导致 404 ( [http://schemas.openid.net/](http://schemas.openid.net/) ) 或奇怪的错误 ( [http://axschema.org](http://axschema.org) )？
*   **附加问题**：我认为响应式架构 URL 对规范的实现很重要。如果不是，那么这些 URL 的意义何在？
*   [一些常见的 OpenID 提供程序 URL 列表](https://stackoverflow.com/questions/1116743/where-can-i-find-a-list-of-openid-provider-urls)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:53:40.520

OpenID 不能那样工作，除非它也支持 OpenID+OAuth，在这种情况下，您可能会做与 Facebook 相同的事情；您只需调用他们的 API 以使用您在肯定断言中获得的访问令牌获取用户详细信息。

AX 方案非常灵活；例如，您可以使用两个不同的 URI 请求一个字段；一些供应商将支持`axschema`和其他`schema.openid.net`。

可以通过两种方式索要电子邮件；只需使用不同的别名包含它，例如：

```
email1 = http://axschema.org/contact/email
email2 = http://openid.net/schema/contact/internet/email 
```

这样您就不必事先知道提供者支持哪些属性类型。

**编辑**

> 为什么所有架构 URI 的结果都是 404？

那是因为它们不需要作为文档实际存在，它只是一个约定。

> 我认为拥有响应式架构 URL 对规范的实现很重要。如果不是，那么这些 URL 的意义何在？

OpenID 实现者只是无法就一组统一的属性类型达成一致。这不利于采用，可以在[此处](https://stackoverflow.com/questions/11903/openid-attribute-exchange-should-i-use-it)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:19:33.373

我不知何故找到了一些关于收集用户信息的信息（登录后，没有持久性）。

似乎最好在这里描述：http: [//blogs.gnome.org/jamesh/2007/11/26/openid-ax/](http://blogs.gnome.org/jamesh/2007/11/26/openid-ax/)

# mysql - 如何使用隐私设置选择数据？

> ID：12860445
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:44:44.333
> 
> 标签：mysql

有事件。事件可以是私人的 - 只有受邀的用户才能看到它，公共的 - 对所有人可见，在群组中 - 只有群组成员才能看到它。组可以是公共的或私有的。我们不应该显示来自私人团体的事件。

```
event
id, title, group (nullable), is_private

event_invitee
event_id, user_id

group
id, title, is_open

group_participant
group_id, user_id 
```

因此，现在为了显示当前经过身份验证的用户可用的事件，我们执行类似（伪代码）的查询：

```
SELECT
  e
FROM event e
  LEFT JOIN e.invitees i WITH i.user = :current_user # is current user invited to event ?
  LEFT JOIN e.group g
  LEFT JOIN g.participants p WITH g.user = :current_user # is current user are participant of group?
WHERE ((e.group IS NULL OR g.is_open = true OR (g.is_open = false AND p IS NOT NULL))
  AND (r.is_private = false OR (r.is_private = true AND i IS NOT NULL)))
  AND /* other filters, like by location */ 
```

**这很好用，但很慢。并且不可能过时。如何改变结构以获得更快和可扩展的结果？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-12T14:08:36.150

为了加快速度：您必须将“左连接”重写为“where 子句”。这说起来容易做起来难。但它为您提供了应用过滤器的优势，这些过滤器首先删除了最多的记录。假设在一个位置只有 10 个事件，并且选择了位置过滤器，则查询不必过滤不在该位置的私人、公共或团体事件。我知道这很容易，但除非我有一些数据，否则无法提供真正的代码。我希望这为您指明了正确的方向。我设法将超过 30 秒的持续查询加快到 1 秒多一点。最后，我们忘记了为生产数据库编写索引脚本。因此，您还可以添加一些放置良好的索引来加快速度。

# database-design - 如何在php中进行限制？

> ID：12860446
> 
> 赞同：0
> 
> 时间：2012-10-12T13:44:45.767
> 
> 标签：database-design, normalization

我有一个迷你注册系统。

有教授、科目、学生、成绩和有学生的科目的表格。

现在，当您添加教授时，您输入它的教授 ID。但也有一个profNO。并且 profNo 是主键。由于您可以向该教授添加更多科目，因此 profNo 将增加，但 ID 保持不变。

问题：现在，我想设置一个限制，当一个人想添加一个教授时，如果他输入一个已经存在的教授 ID，会出现一个错误，上面写着“教授 ID 已经存在”但教授 ID 不是唯一的。

现在，看看照片。有相同的教授 ID 具有不同的 profNo。那是因为他们拥有的科目。当您向教授添加主题时，教授 ID 重复。但是当你添加一个教授时，当一个人输入一个现有的ID时，会不会出现错误？ [示例 http://sphotos-e.ak.fbcdn.net/hphotos-ak-ash3/578472_162759700529875_718824031_n.jpg](http://sphotos-e.ak.fbcdn.net/hphotos-ak-ash3/578472_162759700529875_718824031_n.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:42:51.573

是的，你可以做你所要求的。只需在插入新教授之前添加一个简单的检查。

提交新教授时的伪代码：

```
if profID already exists (using a simple SQL query to check)
    allow the insert and continue
else
    don't insert, show a message to the user "That professor ID already exists"
endif 
```

但是，如果您在教授拥有多个学科时一遍又一遍地复制教授的详细信息，这似乎不是一个非常合乎逻辑的系统。

考虑这个数据库结构：

**桌子：`professors`**

字段：`id`, `firstname`, `lastname`,`gender`

**桌子：`subjects`**

字段：`id`, `professorid`, `subjectname`,`subjectcode`

这样，您只需`professors`为每个教授维护一个记录，并且为科目表维护相同的记录。当您插入新科目时，您将填充链接回`professors`表的教授 ID，而不会复制数据。

这将是一个简单的结构，可以使您的数据库更加高效，现在取决于您的系统需要多么复杂，您可能需要进一步对其进行规范化。例如，如果一个学科可以有多个教授，那么您将不会在学科表中包含教授 ID，而是会有一个`professor_subject_association`带有 fields的新表`professorid`，`subjectid`您可以在其中将多个教授链接到学科。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:47:01.253

使您的`ID`列具有**UNIQUE INDEX**。阅读 MySQL 手册中的内容：**[在 MySQL 上创建索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)**

# java - 使用 try 和 catch 块对数组中的 10 个数字求和

> ID：12860464
> 
> 赞同：-2
> 
> 时间：2012-10-12T13:45:43.720
> 
> 标签：java

我对在数组中查找 10 个数字的总和的程序有疑问。它使用 try, catch 块来处理 ArrayIndexOutOfBoundsException。请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:48:48.407

我会尝试类似的东西

```
int[] nums = new int[10];
// give it some values.
long sum = 0;
for(int n: nums) sum += n;

System.out.println("Sum is " + sum); 
```

您不需要捕获 ArrayIndexOutOfBoundsException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:52:17.943

假设您的代码的正确程序是

```
class ravindra {
    public static void main(String[] args) {
        int[] ia = new int[10];
try{
        for (int i = 0; i < ia.length; i++)
            ia[i] = i;
        int sum = 0;
        for (int i = 0; i < ia.length; i++)
            sum += ia[i];
        System.out.println(sum);
}
catch(ArrayIndexOutOfBoundsException e)
{
//system.out.println("exception");
}
    }
} 
```

通过`for loop`直到arraybound超出范围（即arraylength + 1）发生异常循环你的代码

```
for (int i = 0; i <= ia.length; i++) 
```

# exception - 如何从“异常抛出”处理中排除一个类

> ID：12860472
> 
> 赞同：1
> 
> 时间：2012-10-12T13:46:08.663
> 
> 标签：exception, appcode

我正在使用 cocos2d，特别是 cocos Dhension 音频引擎。事实证明，它非常嘈杂（抛出异常），我想在打开“异常抛出”时排除它。有没有办法排除特定的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T23:05:19.237

我认为你不能。AppCode 不能比 lldb（或 gdb）做得更多。我检查了 lldb 文档，但没有找到您要查找的内容。所以，AppCode 都不能。

# android - 具有多线程的 Android SQLite 数据库

> ID：12860473
> 
> 赞同：5
> 
> 时间：2012-10-12T13:46:10.243
> 
> 标签：android, android-sqlite

我正在开发一个必须使用多线程的应用程序。我在整个应用程序中都有一个***SQLiteOpenHelper*****类的实例**，其中我有**打开**和**关闭**数据库的方法以及一些**插入**和**获取**数据的方法。

 *******现在我的问题是，我在**第一个线程**中打开数据库并同时启动事务，**第二个线程**也获取打开的数据库对象并启动事务。

第**一个线程**完成其进程并**关闭**另一侧的数据库，我的**第二个线程**正在工作，**第二个线程**得到**数据库已关闭**。

这是一些合乎逻辑的问题，请有人帮我解决这个问题，我如何以正确的方式处理**关闭**数据库。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:22:19.513

> 我在整个应用程序中都有一个 SQLiteOpenHelper 类的实例，其中我有打开和关闭数据库的方法以及一些插入和获取数据的方法。

您应该仅在完全完成数据库后关闭数据库，例如当创建这些线程的活动或服务被销毁时。

根本*不*关闭数据库也不是不可能的。如果您实施 a `ContentProvider`，您将永远不会关闭您的数据库。虽然这可能会导致 LogCat 中有关泄漏打开的数据库句柄的警告，但 SQLite 的事务性质意味着未能关闭数据库不应导致任何特定问题（例如，未能刷新缓冲区）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T01:06:24.720

通常我只会保持 SQLLite Android DB 打开并在应用程序结束时将其关闭，但这并不能消除最初的问题。

我发现当数据库没有正确关闭时，它可能会在 Android 上打开问题，所以简单的从不关闭数据库似乎对我不起作用。

我将所有操作包装在事务和异常处理程序块中。

请注意，所有事务都需要在我们关闭数据库时完成，因此 close 方法等待事务完成（我也有事务计数器）。

这是一个示例 try catch 事务块，我将所有数据库操作包装在：

SQLPersistentStore 扩展了 SQLiteOpenHelper getPersistentStore() { DB 关闭时返回 null }..

无效公共操作（..）{

```
 SQLPersistentStore persistentStore = null;

    try {
            persistentStore = getPersistentStore();
            persistentStore.beginTransaction();

        ... do the DB operations

        persistentStore.setTransactionSuccessful();

    } catch ( IllegalStateException e) {
        ... 
        Log.w(...
    } catch (Exception e) {
        Log.e(TAG, ...
            throw new RuntimeException(e);
    } finally {
        if(persistentStore != null){
            persistentStore.endTransaction();
        }
    } 
```

当数据库关闭并且您尝试对其进行操作时，您会得到 IllegalStateException，并且会被捕获。*******

# asp.net - 对 ASP.net 网站运行 FxCop？

> ID：12860477
> 
> 赞同：3
> 
> 时间：2012-10-12T13:46:17.013
> 
> 标签：asp.net, visual-studio-2010, fxcop

如何针对 ASP.net 网站运行 FxCop？

## 背景

我有一个要运行 FxCop 的 ASP.net 网站。

**注意**：我有一个 ASP.net 网站，而不是 ASP.net Web 应用程序，我想针对它运行 FxCop。

如何在 Visual Studio 2010 Professional 中针对 ASP.net 网站运行 FxCop？

* * *

[有人建议](http://social.msdn.microsoft.com/forums/en-US/asmxandxml/thread/737febfb-c142-4056-bf82-728d58ce8760)很简单：只需右键单击网站项目，然后单击**Run Code Analysis on Web Site**：

> 过程很简单....只需右键单击网站项目和“在网站上运行代码分析”

他们忽略的是[不存在这样的选择](http://social.msdn.microsoft.com/forums/en-US/asmxandxml/thread/737febfb-c142-4056-bf82-728d58ce8760)：

![在此处输入图像描述](../Images/fc5f5383c33e72d4fdcfc93d12be1265.png)

* * *

我还尝试了**Tools** menu -> **FxCop**。但当然这不起作用，因为它的命令行选项：

```
FxCopCmd.exe /c /f:$(TargetPath) /d:$(BinDir) /r:"C:\Program Files (x86)\Microsoft Fxcop 10.0\Rules" 
```

对网站没有意义。

* * *

[有人](http://www.webpronews.com/using-fxcop-with-aspnet-2006-12)正确地建议，这是不可能的，因为 FxCop 没有要验证的程序集：

> ASP.NET 2.0 中的构建过程与 ASP.NET 1.x 中的构建过程非常不同，因为它不生成 dll 文件。
> 
> 这意味着您不能使用 FxCop，因为它只能用于 dll 和 exe 文件类型。

这意味着如果没有将整个网站编译成程序集，您就不能针对 ASP.net 网站运行 FxCop。

如何针对 ASP.net 网站运行 FxCop？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T05:35:15.750

一种解决方法是预编译您的网站，

1.  使用 aspnet_compiler.exe 预编译您的网站， http: [//msdn.microsoft.com/en-us/library/bb398860 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb398860(v=vs.100).aspx)
2.  对预编译的结果运行 FxCop。

您看不到“在网站上运行代码分析”，因为您的 Visual Studio 版本不够高端（应该归咎于微软，因为所有版本中都应该有这些基本功能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:55:03.657

您可以发布您的网站，它将生成您可以在其上运行 fxcop 的 dll。

[使用-FxCop-with-ASPNET-20](http://madskristensen.net/post/Use-FxCop-with-ASPNET-20.aspx)

* * *

ASP.NET 2.0 中的构建过程与 ASP.NET 1.x 中的构建过程非常不同，因为它不生成 dll 文件。这意味着您不能使用 FxCop，因为它只能用于 dll 和 exe 文件类型。但是，有一种方法可以在 Visual Studio 2005 中从您的 Web 应用程序生成 dll 文件，并且这些 dll 文件可以被 FxCop 使用。

以下是让 FxCop 分析您的 Web 应用程序的步骤：

**第1步**

在磁盘的某处创建一个新文件夹。可能是 C:\deploy

**第2步**

将 Web 应用程序发布到新文件夹中

[![在此处输入图像描述](../Images/b06036892a934dd4e32a8e1ee07d6769.png)](https://i.stack.imgur.com/PgwF6.png)

[![在此处输入图像描述](../Images/2c920419cf746c95ae49eca8312a5378.png)](https://i.stack.imgur.com/4y7Xn.png)

**第 3 步**

打开 FxCop 并添加新创建的 bin 文件夹 (C:\deploy\bin) 中的所有 dll 文件以进行分析。

[![在此处输入图像描述](../Images/f163dbb1de08b253e458415ab00f5a95.png)](https://i.stack.imgur.com/TZqaD.png)

对于我们这些不使用 Visual Studio Team System 的人来说，这些是我们在 FxCop 中分析 Web 应用程序时需要遵循的步骤。让我们希望下一个版本的 Visual Studio 已经解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T04:39:45.553

或者您可以运行一个对源代码进行分析的工具，而不是编译的程序集。可能会节省您一些宝贵的时间。

# java - JavaFX TextArea 中的 Tab 键导航

> ID：12860478
> 
> 赞同：15
> 
> 时间：2012-10-12T13:46:18.993
> 
> 标签：java, user-interface, javafx-2, javafx

如何在 TextArea 中按下 Tab 键导航到下一个控件？

我可以为 cath de key press 事件添加一个侦听器，但是如何使 TextArea 控件失去焦点（不知道要聚焦的链中的下一个字段）？

```
@FXML protected void handleTabKeyTextArea(KeyEvent event) {
    if (event.getCode() == KeyCode.TAB) {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-06T09:21:18.120

我使用遍历方法

```
@Override
public void handle(KeyEvent event) {
    if (event.getCode().equals(KeyCode.TAB)) {
        Node node = (Node) event.getSource();
        if (node instanceof TextField) {
            TextFieldSkin skin = (TextFieldSkin) ((TextField)node).getSkin();
            if (event.isShiftDown()) {
                skin.getBehavior().traversePrevious();
            }
            else {
                skin.getBehavior().traverseNext();
            }               
        }
        else if (node instanceof TextArea) {
            TextAreaSkin skin = (TextAreaSkin) ((TextArea)node).getSkin();
            if (event.isShiftDown()) {
                skin.getBehavior().traversePrevious();
            }
            else {
                skin.getBehavior().traverseNext();
            }
        }

        event.consume();
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T15:42:32.573

如果按 TAB，则此代码遍历焦点，如果按 CONTROL+TAB，则插入选项卡

```
textArea.addEventFilter(KeyEvent.KEY_PRESSED, new EventHandler<KeyEvent>() {
        @Override
        public void handle(KeyEvent event) {
            if (event.getCode() == KeyCode.TAB) {
                SkinBase skin = (SkinBase) textArea.getSkin();
                if (skin.getBehavior() instanceof TextAreaBehavior) {
                    TextAreaBehavior behavior = (TextAreaBehavior) skin.getBehavior();
                    if (event.isControlDown()) {
                        behavior.callAction("InsertTab");
                    } else {
                        behavior.callAction("TraverseNext");
                    }
                    event.consume();
                }

            }
        }
    }); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-05T04:11:23.277

**从 Java 9 (2017)**开始，此页面中的大多数答案都不起作用，因为您不能再这样做`skin.getBehavior()`了。

**这有效：**

```
@Override
public void handle(KeyEvent event) {
    KeyCode code = event.getCode();

    if (code == KeyCode.TAB && !event.isShiftDown() && !event.isControlDown()) {
        event.consume();
        Node node = (Node) event.getSource();
        try {
            Robot robot = new Robot();
            robot.keyPress(KeyCode.CONTROL.getCode());
            robot.keyPress(KeyCode.TAB.getCode());
            robot.delay(10);
            robot.keyRelease(KeyCode.TAB.getCode());
            robot.keyRelease(KeyCode.CONTROL.getCode());
            }
        catch (AWTException e) { }
        }
    } 
```

**这也有效：**

```
@Override
public void handle(KeyEvent event) {
    KeyCode code = event.getCode();

    if (code == KeyCode.TAB && !event.isShiftDown() && !event.isControlDown()) {
        event.consume();
        Node node = (Node) event.getSource();            
        KeyEvent newEvent 
          = new KeyEvent(event.getSource(),
                     event.getTarget(), event.getEventType(),
                     event.getCharacter(), event.getText(),
                     event.getCode(), event.isShiftDown(),
                     true, event.isAltDown(),
                     event.isMetaDown());

        node.fireEvent(newEvent);            
        }
    } 
```

两者都模拟`CTRL+TAB`用户按下时的按下`TAB`。TextArea 的默认行为`CTRL+TAB`是将焦点移动到下一个控件。请注意，第二个代码基于 Johan De Schutter 的回答。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-11T10:24:57.863

如果选项卡 - 焦点问题的不同解决方案。CTRL+TAB 键的 TextArea 的默认行为是将焦点移动到下一个控件。所以我用 CTRL+TAB 键事件替换了 TAB 键事件，当用户按下 CTRL+TAB 时，在 TextArea 中插入了一个制表符。

我的问题：可以在事件过滤器中触发事件吗？是否可以用 FOCUS_EVENT_TEXT 替换 KeyEvent 的文本，以便指示它是用户生成的事件，还是来自事件过滤器中创建的事件。

事件过滤器：

```
javafx.scene.control.TextArea textArea1 = new javafx.scene.control.TextArea();
textArea1.addEventFilter(KeyEvent.KEY_PRESSED, new TextAreaTabToFocusEventHandler()); 
```

事件处理程序：

```
public class TextAreaTabToFocusEventHandler implements EventHandler<KeyEvent>
{
    private static final String FOCUS_EVENT_TEXT = "TAB_TO_FOCUS_EVENT";

    @Override
    public void handle(final KeyEvent event)
    {
        if (!KeyCode.TAB.equals(event.getCode()))
        {
            return;
        }

        // handle events where the TAB key or TAB + CTRL key is pressed
        // so don't handle the event if the ALT, SHIFT or any other modifier key is pressed
        if (event.isAltDown() || event.isMetaDown() || event.isShiftDown())
        {
            return;
        }

        if (!(event.getSource() instanceof TextArea))
        {
            return;
        }

        final TextArea textArea = (TextArea) event.getSource();
        if (event.isControlDown())
        {
            // if the event text contains the special focus event text
            // => do not consume the event, and let the default behaviour (= move focus to the next control) happen.
            //
            // if the focus event text is not present, then the user has pressed CTRL + TAB key,
            // then consume the event and insert or replace selection with tab character
            if (!FOCUS_EVENT_TEXT.equalsIgnoreCase(event.getText()))
            {
                event.consume();
                textArea.replaceSelection("\t");
            }
        }
        else
        {
            // The default behaviour of the TextArea for the CTRL+TAB key is a move of focus to the next control.
            // So we consume the TAB key event, and fire a new event with the CTRL + TAB key.

            event.consume();

            final KeyEvent tabControlEvent = new KeyEvent(event.getSource(), event.getTarget(), event.getEventType(), event.getCharacter(),
                                                          FOCUS_EVENT_TEXT, event.getCode(), event.isShiftDown(), true, event.isAltDown(), event.isMetaDown());
            textArea.fireEvent(tabControlEvent);
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-27T14:02:45.773

受先前答案的启发，对于一个非常相似的案例，我构建了以下类：

```
/**
 * Handles tab/shift-tab keystrokes to navigate to other fields,
 * ctrl-tab to insert a tab character in the text area.
 */
public class TabTraversalEventHandler implements EventHandler<KeyEvent> {
    @Override
    public void handle(KeyEvent event) {
        if (event.getCode().equals(KeyCode.TAB)) {
            Node node = (Node) event.getSource();
            if (node instanceof TextArea) {
                TextAreaSkin skin = (TextAreaSkin) ((TextArea)node).getSkin();
                if (!event.isControlDown()) {
                    // Tab or shift-tab => navigational action
                    if (event.isShiftDown()) {
                        skin.getBehavior().traversePrevious();
                    } else {
                        skin.getBehavior().traverseNext();
                    }
                } else {
                    // Ctrl-Tab => insert a tab character in the text area
                    TextArea textArea = (TextArea) node;
                    textArea.replaceSelection("\t");
                }
                event.consume();
            }
        }
    }
} 
```

我只是没有看到在 TextField 的上下文中处理选项卡的必要性，所以我删除了这部分。

然后可以很容易地使用这个类，如[User](https://stackoverflow.com/users/2691118/user)所述：

```
TextArea myTextArea = new TextArea();
mytTextArea.addEventFilter(KeyEvent.KEY_PRESSED, new TabTraversalEventHandler()); 
```

整个事情就像一个魅力:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-30T12:48:41.850

我有同样的问题，我喜欢汤姆使用的遍历方法。但我也想在按下 ctrl+tab 时插入一个选项卡。

通话

```
behavior.callAction("InsertTab"); 
```

不适用于 JavaFX8。看一下 TextAreaBehaviour 类，我发现现在有一个“TraverseOrInsertTab”动作。

但是，我认为这种动作调用在多个 java 版本中非常不稳定，因为它依赖于传递的字符串。

因此，我使用了 callAction() 方法而不是

```
textArea.replaceSelection("\t"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-16T07:51:07.070

JavaFX 16（以及 17）中的 TextAreaSkin 类没有 getBehavior() 方法。为了防止在 TextArea 中插入标签，TextAreaTabToFocusEventHandler 的解决方案适用于我

# c++ - Rapidxml：直接添加子树作为值

> ID：12860480
> 
> 赞同：0
> 
> 时间：2012-10-12T13:46:25.950
> 
> 标签：c++, c, xml, rapidxml

我正在尝试以一种肮脏的方式使用 rapidxml 附加一个非常大的子树，利用该`value`方法

```
rapidxml::xml_node<>* node = allocate_node(rapidxml::node_element, "tree");
node->value("<very><long><subtree></subtree></long></very>"); 
```

但是当我打印文档时`&lt`，尖括号会扩展。`&gt`干净的方法是手动声明和附加子树的每个节点和属性，这很无聊。

有没有办法防止括号扩展，或者你能建议任何其他实用的方法来快速添加一个大分支？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:23:50.723

恕我直言，最简单的方法是用新文档解析它，然后克隆它，比如

```
void appendLongTree(rapidxml::xml_document<>* document, 
                    rapidxml::xml_node<>* parent,
                    char* value) {
    rapidxml::xml_document<>* new_document = new rapidxml::xml_document<>();
    // if we don't wanna bother about lifetime of the string,
    // save a string in target's document
    new_document.parse<0>(document->allocate_string(value));
    parent->append_node(document->clone_node(new_document->first_node()));
    delete new_document;
} 
```

我不认为这在解析中是一个很大的开销......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:31:27.060

好的，我想出了这个解决方法，自动创建结构并附加它：

```
char txt[] = "<very><long><xml with="attributes"></xml></long></very>";   // or extract from file
rapidxml::xml_document<char> tmp;
tmp.parse<0>(txt);

rapidxml::xml_node<char> *subt = tmp.first_node();
tmp.remove_all_nodes(); // detach, since you can't have more than one parent

appendHere.append_node(subt); 
```

任何改进它的想法，也许是为了避免解析子树的额外开销？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:12:25.267

编写一个辅助函数或类，例如

```
#include <iostream>

#include "rapidxml.hpp"
#include "rapidxml_print.hpp"

class Node_Adder
{
public:
  Node_Adder(rapidxml::xml_document<> & doc) : m_doc(doc) { }

  rapidxml::xml_node<> * operator()(rapidxml::xml_node<> * parent,
                                    char const * node_name)
  {
    char * name = m_doc.allocate_string(node_name);
    rapidxml::xml_node<> * child = m_doc.allocate_node(rapidxml::node_element, name);
    parent->append_node(child);
    return child;
  }
protected:
private:
  rapidxml::xml_document<> & m_doc;
};

void stackoverflow()
{
  rapidxml::xml_document<> doc;
  rapidxml::xml_node<char> * decl = doc.allocate_node(rapidxml::node_declaration);
  decl->append_attribute(doc.allocate_attribute("version", "1.0"));
  decl->append_attribute(doc.allocate_attribute("encoding", "UTF-8"));
  doc.append_node(decl);
  rapidxml::xml_node<> * root = doc.allocate_node(rapidxml::node_element, "root");
  doc.append_node(root);

  Node_Adder add(doc);
  add(add(add(root, "very"), "long"), "subtree");

  rapidxml::print(std::ostreambuf_iterator<char>(std::cout), doc);
} 
```

哪个打印

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
        <very>
                <long>
                        <subtree/>
                </long>
        </very>
</root> 
```

# r - 为什么 R 提供的信息不如 gdalinfo 多？

> ID：12860486
> 
> 赞同：3
> 
> 时间：2012-10-12T13:46:45.047
> 
> 标签：r, netcdf

我在其中打开了一个 netCDF 文件`R`并查看了头信息。后来我经常`gdalinfo`看同一个文件的头信息。

`gdalinfo`我发现（时间原点、单位等）显示的信息要多得多。是否有命令可以获取 netCDF 文件中变量的更多信息`R`？

```
 f=open.ncdf("C:\\BR_Ban.nc")

              > f
            [1] "file C:\\GF_Guy_6Y.nc has 4 dimensions:"
              [1] "x   Size: 1"
              [1] "y   Size: 1"
              [1] "land   Size: 1"
           [1] "tstep   Size: 105120"
       [1] "double nav_lon[x,y]  Longname:Longitude Missval:1e+30"
       [1] "double nav_lat[x,y]  Longname:Latitude Missval:1e+30"
       [1] "float time[tstep]  Longname:Time axis Missval:1e+30"
     [1] "float timestp[tstep]  Longname:Time step axis Missval:1e+30"

Then read one variable

           A = get.var.ncdf(nc=f,varid="time",verbose=TRUE)
     [1] "vobjtodimname: is a character type varid.  This file has 6 dims"
    [1] "vobjtodimname: no cases found, returning FALSE"
     [1] "get.var.ncdf: isdimvar: FALSE"
      [1] "vobjtovarid: entering with varid=date"
     [1] "Variable named date found in file with varid= 7"
     [1] "vobjtovarid: returning with varid deduced from name; varid= 7"
    [1] "get.var.ncdf: ending up using varid= 7"
     [1] "ndims: 2"
  [1] "get.var.ncdf: varsize:"
    [1]     3 52560
     [1] "get.var.ncdf: start:"
     [1] 1 1
      [1] "get.var.ncdf: count:"
    [1]     3 52560
     [1] "get.var.ncdf: totvarsize: 157680"
     [1] "Getting var of type 3  (1=short, 2=int, 3=float, 4=double, 5=char, 6=byte)"
    [1] "get.var.ncdf: C call returned 0"
    [1] "count.nodegen: 3    Length of data: 157680"     "count.nodegen: 52560    Length of data: 157680"
     [1] "get.var.ncdf: final dims of returned array:"
        [1]     3 52560 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:16:54.937

简而言之，因为`gdalinfo`是用于显示有关特定类型数据集的信息的程序，而 R 是旨在分析各种数据集的语言。如果每次导入数据集时 R 都会向我发送此类信息，我很快就会发疯。

当然，这些信息可以在 R 中访问，你只需要请求它。

```
class( f )
dim( f )
summary( f )
plot( f ) 
```

# apc - APC 操作码缓存是否在 PHP-FPM 池/工作者之间共享？

> ID：12860487
> 
> 赞同：15
> 
> 时间：2012-10-12T13:46:48.447
> 
> 标签：apc, php, opcode-cache

互联网上有很多讨论，`apc_cache_clear()`在 CLI 中调用不会从“web”PHP 进程中清除操作码缓存，无论它们是在 Apache 内部运行还是由 FPM 运行（请参阅[如何清除 APC 缓存条目？](https://stackoverflow.com/questions/911158/how-to-clear-apc-cache-entries)）。作为建议的解决方案，可以创建一个调用 的简单 PHP 页面`apc_cache_clear()`，然后从 CLI 调用它。[Symfony 的 ApcBundle 就是](https://github.com/ornicar/ApcBundle)这样做的。

如果`apc_cache_clear()`来自 CLI 没有清空 Apache/FPM 的缓存，是否在 FPM 工作人员之间？如果我通过 HTTP 调用 /clear_apc_cache.php，它只能由 FPM 工作进程之一运行。那么，APC 操作码缓存是否**真的**在池和工作人员之间共享 - 更具体地说：它是否会自动从所有工作人员中清除？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-19T20:16:50.573

所有的 php-fpm worker 共享与父 php-fpm 进程相同的操作码缓存；[来源](http://news.php.net/php.internals/63539)。如果你有一个 /apc_clear_cache.php 文件并通过 HTTP 调用它（使用 curl 之类的东西），你将使用相同的 php-fpm 主进程清除所有工作人员的操作码缓存。

这篇[博客文章](http://blog.wepay.com/weploy-wepays-deployment-tool/)很好地解释了 apc 的工作原理以及如何在发布期间有效地清除它。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-06T05:30:54.870

如果直接通过 FastCGI 接口执行脚本，则可以通过 cli 清除操作码缓存，而无需将文件部署到您的网站。

我创建了[这个 gist](https://gist.github.com/stuartcarnie/5523506)，你可以在你的服务器上使用它来清除 php5-fpm 缓存。

如果您使用的是 unix 套接字：

`php clear-apc.php --sock /var/run/php5-fpm.sock`

否则：

`php clear-apc.php --port=[port]`

或默认省略`127.0.0.1:9000`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T13:48:09.477

我刚刚发现不同的池也共享相同的 APC 缓存，至少在带有 FPM 的 PHP 5.4 中以及就操作码缓存内容而言。

这就是我注意到它的方式：

我已经设置了多个 PHP-FPM 池，每个池都在 /srv/www/domain.com/ 目录下进行 chroot。

PHP 脚本的主要位置是 /srv/www/domain.com/docroot/。

现在，如果我创建一个文件 /srv/www/domain_1.com/docroot/test.php 并加载脚本，它会显示它应该显示的内容。

但是，当我创建文件 /srv/www/domain_2.com/docroot/test.php 时，内容也显示在 domain_1.com 下。

我认为这是因为 APC 使用文件位置作为其缓存的键，并且在这两种情况下，键都是 /docroot/test.php。

清除操作码缓存可能仅限于单个池。我还没有测试过这个。

*编辑*清除操作码缓存不会限制到单个应用程序池，调用 apc_cache_clear() 时会清除完整的 APC 缓存。

我还尝试使用 apc.mmap_file_mask 为每个池指定不同的掩码。这并没有改变任何东西，一个应用程序池文件中的更新在其他池中可见。

使用 apc.stat=0 设置观察到此行为。使用 lsyncd 监视对文件的所有更改，强制重新编译 APC 缓存中的条目。

*   泰罗

# php - 在 PHP 中调用 PostgreSQL 函数

> ID：12860488
> 
> 赞同：1
> 
> 时间：2012-10-12T13:46:57.637
> 
> 标签：php, postgresql

```
CREATE OR REPLACE FUNCTION adduser(fn character varying,ln character varying,cit character varying,i integer,id integer)
  RETURNS void AS
$BODY$
        BEGIN                
    update tabtow set fname=fn,lname=ln,city=cit,phnum=i where phnum=id;
    select * from tabtow;
        END;
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;
ALTER FUNCTION increment(integer)
  OWNER TO postgres; 
```

这是我的函数，我如何在 PHP 中调用它？

我正在尝试这样，但它不起作用：

```
$sql = "update tabtow set fname = '$_REQUEST[fn]', lname = '$_REQUEST[ln]', city = '$_REQUEST[ci]', phnum = $_REQUEST[phnum] where phnum = $_REQUEST[id1]";
$res = pg_query($sql); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T15:15:55.680

只需调用函数：

```
$sql = 'SELECT adduser($1,$2,$3,$4)';
$res = pg_prepare($dbconn, "my_query", $sql);
$res = pg_execute($dbconn, "my_query", array('a','b','c',1)); 
```

就像上面的评论者说的那样，不要手动构建您的查询 - 使用上面的参数化查询。

# java - 如何使用 Spring 通过 id 获取 osgi 服务？

> ID：12860489
> 
> 赞同：1
> 
> 时间：2012-10-12T13:46:57.480
> 
> 标签：java, spring, osgi, spring-dm

春天菜鸟在这里。

我在我的一个包中定义了如下的 osgi 服务：

```
<osgi:service id="myModelInterpreter" ref="myModelInterpreterService" interface="*.IModelInterpreter" /> 
```

我知道我可以通过[`BundleContext`](http://www.knopflerfish.org/releases/current/docs/javadoc/org/osgi/framework/BundleContext.html)做`getServiceReference`（向下传递`IModelInterpreter.class.getName`）然后从另一个包访问它`getService`。

有没有办法通过 id (myModelInterpreter) 而不是使用 Interface (传递`IModelInterpreter.class.getName`给 to `getServiceReference`) 来获取服务？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:35:24.690

我不认为您可以通过您在 spring 配置中指定的 id 获取服务，因为它是 spring 上下文的内部设置。您可以做的是向服务添加一些服务属性并对其进行过滤。

像这样：

```
<service ref="myModelInterpreterService" interface="*.IModelInterpreter">
  <service-properties>
    <beans:entry key="myId" value="myModelInterpreter"/>
  </service-properties>
</service> 
```

然后在另一个包中，您可以过滤属性：

```
<reference id="myModelInterpreterService" interface="com.xyz.IModelInterpreter"
  filter="(myId=myModelInterpreter)"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T18:56:01.523

由于您已经在使用 Spring DM 来声明您的服务，因此使用它的最简单方法是对另一个 dm 配置执行相同的操作。

```
<osgi:reference id="modelInterpreter" interface="IModelInterpreter" /> 
```

这也可以像这样表示以过滤到特定的 Spring bean。

```
<osgi:reference id="modelInterpreter" bean-name="myModelInterpreter" interface="IModelInterpreter" /> 
```

然后，您只需在消费者捆绑包中的常规 Spring 配置中使用 bean“modelInterpreter”。同样的行也可以使用 bean-name 完成，但我很确定它仍然需要 interface 或 interfaces 属性，因为它们是查找 OSGi 服务的唯一被接受的方法. 使用 bean-name 只是在服务查找中使用属性过滤器的糖衣, 在大多数情况下你不想要它, 因为它实际上在包之间创建了更紧密的依赖关系. 它是例如，在没有如此紧密耦合的情况下更容易模拟您的依赖关系。

另一方面，如果您想在不使用 DM 的情况下访问服务，那么我建议您使用直接的 OSGi 方式，使用直接访问（通过代码）注册表或使用 DS（声明式服务）。

我会远离使用常规 Spring 直接访问 OSGi 服务。仅使用 Spring 在您的包中进行配置，并使用 Spring DM 将包间依赖关系外部化。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-12T14:07:29.787

或者只是使用

```
Object obj = beanFactory.createBean(YourClass.class); 
```

# silverlight - Silverlight - 绑定元素将 null 传递给转换器

> ID：12860491
> 
> 赞同：0
> 
> 时间：2012-10-12T13:47:03.583
> 
> 标签：silverlight, telerik, valueconverter

我有一个 Silverlight 页面，上面有一个 Telerik RadComboBox，我还有另一个元素，我需要根据在 ComboBox 中选择的项目来显示/隐藏。我想要做的是绑定隐藏元素的 Visibility 属性，以便它显示选择了适当的项目。

为了做到这一点，我创建了一个非常简单的 ValueConverter，并尝试将 RadComboBox 的 SelectedItem 绑定到该转换器，以便我可以评估选择了哪些项目，并返回适当的可见性。真的很简单，但由于某种原因，它今天不适合我。可能是咖啡因不够...

**问题是，当调用 ValueConverter 时，传入的“值”为 NULL。**

我还应该提到这个页面正在使用 Caliburn.Micro MVVM。不确定它是否有区别，但以防万一......

这是组合框 XAML：

```
<telerik:RadComboBox x:Name="RecordTypes" SelectedItem="{Binding Path=SelectedRecordType, Mode=TwoWay}" ItemsSource="{Binding Path=RecordTypes, Mode=TwoWay}" EmptyText="Select..." /> 
```

这是另一个元素上的绑定：

```
Visibility="{Binding Path=SelectedItem, ElementName=RecordTypes, Mode=TwoWay, Converter={StaticResource VisibilityConverter}}" 
```

这是（通用）转换器。尚未设置读取 SelectedIndex 值，因为传入的值仍为 NULL：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    bool visibility = (bool)value; <-- THIS VALUE IS NULL AND SHOULD NOT BE, IT SHOULD BE THE SelectedItem value
    return visibility ? Visibility.Visible : Visibility.Collapsed;
}

public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
    Visibility visibility = (Visibility)value;
    return (visibility == Visibility.Visible);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:08:04.337

使用 Telerik RadComboBox，`SelectedItem`将为空（未选择任何内容时）。我的猜测是您的转换器正在被调用（在您的 RadComboBox 中没有选择）并且 null 被正确地传递给您的转换器。我意识到你的转换器只是一个骨架，但你总是需要在你的转换器中处理 null 和数据类型......下面的例子。

此外，传递给您的转换器的值将与您的 RadComboBox 中的 SelectedItem 具有相同的数据类型（无论 RecordTypes 是一个列表 - 可能不是布尔列表？）。

下面的示例基本 boolToVis 转换器。

```
public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {

        if (value == null || !(value is bool))
            return Visibility.Collapsed;

        bool booInvert = false;
        if (parameter is string) bool.TryParse((string)parameter, out booInvert);

        if (booInvert) return ((bool)value) ? Visibility.Collapsed :Visibility.Visible;
        else return ((bool)value) ? Visibility.Visible : Visibility.Collapsed;
    } 
```

# php - 将另一列添加到 ajax 下拉列表

> ID：12860494
> 
> 赞同：0
> 
> 时间：2012-10-12T13:47:16.187
> 
> 标签：php, jquery, mysql, ajax

我有一系列通过调用 MySQL 数据库动态填充的链接选择。

> 这很好用，但我必须在标签中添加另一列“Invm_InventoryDe​​sc”，但在其中一个选择中保持每个选项的值相同（Invl_InventoryNumber）。
> 
> 我试图更改查询以包含 Invm_InventoryDe​​sc 但它破坏了它......我做错了什么？

```
default:
    if (strpos($key, 'brandSelect-') === 0) {
        $callType = str_replace('brandSelect-', '', $key);
        $resBrands = mysql_query('SELECT Invl_InventoryNumber FROM ' . DB_TABLE1
            . ' WHERE Invl_LocationId  = ' . mysql_real_escape_string($callType) . " ORDER BY Invl_InventoryNumber");
        $select = new SelectBox('What part number are you looking for?', 'Pick a part');
        for ($i = 0; list($brand) = mysql_fetch_row($resBrands); $i++) {
            $select->addItem($brand, 'result-' . $brand . '-' . $callType);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:07:08.477

由于您没有共享执行代码时遇到的实际 php 错误，我只能猜测出了什么问题。

我看到您错误地使用了 for 语句。

我会建议这样的事情，而不是你当前的 for 循环：

```
for ($i = 0; $i < mysql_num_rows($resBrands); $i++) {
    $brand = mysql_fetch_array($resBrands);
    $select->addItem($brand, 'result-' . $brand . '-' . $callType);
} 
```

现在 for 语句实际上做了一些事情。

$i 计算我们已经添加到 $select 的行数。起初它的 0 "$i = 0"。

在此之后，我们检查我们已经添加的行数是否小于我们需要添加的行数（mysql 给我们返回的行数）。

然后我们将一行加载到 $brand。并将其添加到 $select。（我不知道你在用 $brand 和 $select 做什么，所以我留在你的代码中。）

在此之后，我们将一个添加到 $i。我们重新开始

可能是您的代码中有更多错误。但如果没有更多上下文，我无法判断是否还有更多错误。

# qt - 如何在Qt中#include现有的头文件？

> ID：12860499
> 
> 赞同：2
> 
> 时间：2012-10-12T13:47:29.337
> 
> 标签：qt, header-files

我有一些以前编写的标题，我想将它们包含在我的 Qt 项目中。如果不将它们复制到位，我怎么能做到这一点？

在我使用“添加现有文件...”添加它们之后，我似乎无法#include 我的标题。#include "header.h" 和 #include "fullpath/header.h" 都不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:34:43.833

[`INCLUDEPATH`](https://qt-project.org/doc/qt-4.8/qmake-variable-reference.html#includepath)您必须在 .pro 文件中添加一个：

```
INCLUDEPATH += ... 
```

`#include <...>`然后您可以使用语法 (not )包含头文件`"..."`，因为那时编译器会在包含路径中搜索它，而不是在当前工作目录（即项目的源文件夹）中搜索它。

*在*包含路径中使用标头的*相对路径*，而不是在项目的源文件夹中使用相对路径。

 *```
#include <header.h> 
```

顺便说一句，只有当它们是使用 Qt 元对象系统的 Qt 标头时，才需要将标头添加到您的项目中。定义 QObject 派生类的那些被传递给`moc`，这就是 Qt 项目需要指定标头的原因。真正的编译过程不需要知道你的项目中有哪些头文件（它只是在看到`#include`指令时包含它们）。*

# .net - 使用 ObjectAnimationUsingKeyFrames 控制图像幻灯片

> ID：12860507
> 
> 赞同：1
> 
> 时间：2012-10-12T13:47:46.217
> 
> 标签：.net, wpf, vb.net, animation

我正在尝试使用动画来控制图像的幻灯片。

用户在 txtaddress 中输入文件夹路径，单击 btnGo，程序将在该文件夹中找到的每个图像显示两秒钟。

但是，我正在努力使用动画来控制它。当它开始幻灯片放映时，我收到“无法解析属性路径“imgMain.Source”中的所有属性引用的错误

我的完整代码如下。有任何想法吗？

```
Imports System.IO
Imports System.Windows.Media.Animation

Class MainWindow

    Private Property ImageSource As String

    Private Sub btnGo_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles btnGo.Click
        'Get file list
        Dim fileList(0) As String
        Dim btm(0) As BitmapImage
        Dim dir1 As New DirectoryInfo(txtAddress.Text)
        Dim anim As New ObjectAnimationUsingKeyFrames

        For Each fi In dir1.GetFiles("*.bmp")
            fileList(UBound(fileList)) = fi.Name
            ReDim Preserve fileList(UBound(fileList) + 1)
        Next

        For Each fi In dir1.GetFiles("*.png")
            fileList(UBound(fileList)) = fi.Name
            ReDim Preserve fileList(UBound(fileList) + 1)
        Next

        For Each fi In dir1.GetFiles("*.jpg")
            fileList(UBound(fileList)) = fi.Name
            ReDim Preserve fileList(UBound(fileList) + 1)
        Next

        'Create animation
        anim.Duration = TimeSpan.FromSeconds(UBound(fileList) * 2)

        Dim idx As Integer
        For idx = 0 To UBound(fileList) - 1
            btm(idx) = New BitmapImage(New Uri(txtAddress.Text & "\" & fileList(idx), UriKind.Absolute))
            anim.KeyFrames.Add(New DiscreteObjectKeyFrame(btm(idx), KeyTime.FromTimeSpan(TimeSpan.FromSeconds(idx * 2))))
            ReDim Preserve btm(UBound(btm) + 1)
        Next

        Dim sBoard As New Storyboard
        sBoard.Children.Add(anim)
        Storyboard.SetTargetName(anim, imgMain.Name)
        Storyboard.SetTargetProperty(anim, New PropertyPath("imgMain.Source"))
        sBoard.Begin(Me)
    End Sub

End Class 
```

# java - ConnectionError [客户端（在 VirtualBox 上）和服务器（在 localhost 上）] - 我在 VM 上使用仅主机设置

> ID：12860512
> 
> 赞同：2
> 
> 时间：2012-10-12T13:47:59.000
> 
> 标签：java, c++, virtualbox, ubuntu-12.04, corba

我有一个带有 CORBA 的简单 calc C++/Java 应用程序。服务器用 C++ 编写，客户端用 Java 编写。我使用omniORBs omniNames 作为名称服务。

我想在我的本地主机（Ubuntu）上运行我的 omniNames 和服务器，并在我的本地主机 Ubuntu 上安装的 VirtualBox 中的 Windows XP SP3 上运行我的客户端。

（我的意思是：在我的本地主机上，我安装了 Ubuntu 操作系统，在 Ubuntu 中，我安装了带有 Windows XP SP3 'inside' 的 VirtuaBox。）

我终于做到了，并`host-only`在 VirtualBox 的帮助下设置了 optinon：[https](https://superuser.com/questions/429405/how-can-i-get-virtualbox-to-run-with-a-hosts-only-adapter) ://superuser.com/questions/429405/how-can-i-get-virtualbox-to-run-with-a-hosts-only-adapter topic . 现在我还有其他问题。我的客户终于看到了我的服务器，甚至可以连接到它并向他发送消息，但是从服务器接收答案时出现问题：（这次我的应用程序是一个简单的计算）：

```
C:\Temp\java>java client -ORBInitRef NameService=corbaloc::192.168.56.1:2809/NameService  Choose:
1.Add
2.Sub
3.Mul
4.Div
> 3 
> Pass number:
> 2
> Pass number:
> 4 
> pač 12, 2012 3:36:58 PM  com.sun.corba.se.impl.transport.SocketOrChannelConnectio nImpl <init> WARNING: "IOP00410201: (COMM_FAILURE) Connection failure: socketType:  IIOP_CLEAR
_TEXT; hostname: 127.0.0.1; port: 41431" org.omg.CORBA.COMM_FAILURE:   vmcid: SUN  minor code: 201  completed: No
        at  com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(U nknown Source)
        at  com.sun.corba.se.impl.logging.ORBUtilSystemException.connectFailure(U nknown Source)
        at  com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>( Unknown Source)
        at  com.sun.corba.se.impl.transport.SocketOrChannelConnectionImpl.<init>( Unknown Source)
        at  com.sun.corba.se.impl.transport.SocketOrChannelContactInfoImpl.create Connection(Unknown Source)
        at  com.sun.corba.se.impl.protocol.CorbaClientRequestDispatcherImpl.begin Request(Unknown Source)
        at  com.sun.corba.se.impl.protocol.CorbaClientDelegateImpl.request(Unknow n Source)
        at org.omg.CORBA.portable.ObjectImpl._request(Unknown Source)
        at _CalcStub.mul(_CalcStub.java:64)
        at client.main(client.java:65) Caused by: java.net.ConnectException: Connection refused: connect
        at sun.nio.ch.Net.connect0(Native Method)
        at sun.nio.ch.Net.connect(Unknown Source)
        at sun.nio.ch.Net.connect(Unknown Source)
        at sun.nio.ch.SocketChannelImpl.connect(Unknown Source)
        at java.nio.channels.SocketChannel.open(Unknown Source)
        at  com.sun.corba.se.impl.transport.DefaultSocketFactoryImpl.createSocket (Unknown Source)
        ... 8 more

C:\Temp\java> 
```

其中 192.168.56.1 是 VirtualBox 主机专用 IP 地址。请帮助:) 在我在这里发布的示例中，服务器的答案应该是 8（因为我们都知道 2*4 = 8;）

好的朋友，很抱歉打扰你们：）我找到了答案：我将这些行添加到我的`/etc/network/interfaces`文件中：

```
allow-hotplug eth0 
iface eth0 inet dhcp 
```

欢呼：D

# c++ - 为什么 __weak 属性需要运行时支持

> ID：12860513
> 
> 赞同：1
> 
> 时间：2012-10-12T13:48:15.077
> 
> 标签：c++, objective-c, ios

在 boost C++ 中，弱指针被实现为共享（引用计数）指针的观察者。

它们是如何在 Objective-c 中实现的，为什么这需要运行时支持？（即除了有编译器支持外，iOS 5 或以上版本需要使用弱引用）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T13:52:07.713

Objective-C 弱引用设置为`nil`当它们指向的对象被释放时。这非常方便（它可以让您解决引用循环并避免向已释放对象发送消息），但它确实需要运行时跟踪对对象的所有弱引用，并且当对象最终被释放时，运行时必须清除这些引用。

这两件事只能由 Objective-C 运行时透明地完成。Objective-C 没有 C++ 在自己的代码中实现这种魔法的灵活性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:52:45.993

std::weak_ptr 实际上包含一个指向共享数据结构的指针，该结构保存簿记数据和引用的对象。当引用的对象被销毁时，这个共享数据被保留，以便weak_ptrs 可以看到指示对象已消失的簿记数据，并且在引用的对象被释放时不必修改weak_ptrs 本身。

在 Objective-C 中，弱引用并不指向一些保存簿记数据的中间对象。它们是指向实际引用对象的普通指针，如果引用对象消失，则指向 nil。当代码的其他部分释放指向对象的最后一个非弱指针时，必须更新每个 __weak 指针。这需要运行时支持。

换句话说，Obj-C 弱指针是普通指针，除了有编译器魔法（它使用运行时支持）在它们上工作，而 shared_ptrs 和 weak_ptrs 只是实现它们自己的运行时支持的包装器（在智能指针的构造函数中，赋值运算符，析构函数等）围绕指针。

# linux - 合并两个文件添加列的值

> ID：12860519
> 
> 赞同：0
> 
> 时间：2012-10-12T13:48:44.390
> 
> 标签：linux, join, awk

如何合并多个格式相同的文件，添加特定列的值，同时保持其他列的值不变？

如果我的文件的列是格式（有多行）：

```
File 1:
a1 b1 c1 d1 e1

File 2:
a2 b2 c2 d2 e2

File n:
an bn cn dn en

where a1=a2=an, b1=b2=bn 
```

```
Output:
a b (c1+c2+...cn) (d1+d2+...dn) (e1+e2+...en)

For example,

File 1:
1 0 200 5 50
2 1 345 9 22
3 2 287 4 33

File 2:
1 0 355 4 12
2 1 366 5 7
3 2 202 7 16

I want the Output:
1 0 555 9 62
2 1 711 14 29
3 2 489 11 49 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:39:09.170

awk-oneliner：

```
awk '{i=$1" "$2;a[i]+=$3;b[i]+=$4;c[i]+=$5}END{for(x in a)print x,a[x],b[x],c[x]}' file* 
```

**使用 3 个文件进行测试（oneliner 使用 n 个文件）**

```
kent$  head file*
==> file1 <==
1 0 200 5 50
2 1 345 9 22
3 2 287 4 33

==> file2 <==
1 0 355 4 12
2 1 366 5 7
3 2 202 7 16

==> file3 <==
1 0 30 41 120
2 1 306 15 70
3 2 230 7 20

kent$  awk '{i=$1" "$2;a[i]+=$3;b[i]+=$4;c[i]+=$5}END{for(x in a)print x, a[x],b[x],c[x]}' file*
1 0 585 50 182
2 1 1017 29 99
3 2 719 18 69 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:14:16.713

```
$ awk '{getline x <f; split(x,a," ");$3+=a[3];$4+=a[4];$5+=a[5]}1' f="file1" file2
1 0 555 9 62
2 1 711 14 29
3 2 489 11 49 
```

使用 getline，您也可以并行读取另一行的内容。一旦我们也拆分了第二个文件的内容，就可以总结出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:32:00.033

[Guru](https://stackoverflow.com/users/1684868/guru)给出的类似解决方案，但适用于**n 个**文件：

假设以下输入文件：

```
==> file1 <==
1 0 200 5 50
2 1 345 9 22
3 2 287 4 33

==> file2 <==
1 0 355 4 12
2 1 366 5 7
3 2 202 7 16

==> file3 <==
1 0 400 6 14
2 1 500 5 7
3 2 202 7 16 
```

运行此`awk`脚本：

```
awk '
    FNR < NR { 
        exit; 
    } 
    {
        for ( i = ARGC - 1; ARGV[i] != FILENAME; i-- ) {
            getline line < ARGV[i];
            r = split( line, fields );
            if ( r < 3 ) {
                continue;
            }
            if ( $1 == fields[1] && $2 == fields[2] ) {
                for ( j = 3; j <= NF; j++ ) {
                    $j += fields[j];
                }
            }
        }
        print;
    }
' file[123] 
```

这会产生：

```
1 0 955 15 76
2 1 1211 19 36
3 2 691 18 65 
```

# oracle - 如何在 oracle pl/sql 中将 CLOB 转换为 VARCHAR2

> ID：12860526
> 
> 赞同：17
> 
> 时间：2012-10-12T13:49:10.647
> 
> 标签：oracle, plsql, clob

我有一个 clob 变量，需要将它分配给 varchar2 变量。clob var 里面的数据小于 4000（即 varchar2 的 maxsize） oracle10+

我试过了

```
 report_len  := length(report_clob);
  report      := TO_CHAR(dbms_lob.substr(report_clob, report_len, 1 ));
  report_clob := null; 
```

但它会将报告变成我在调试时看到的长值。另外，当我从我的 C# 代码中调用这个 sql (proc) 时。它抱怨说缓冲区太小，因为我按照 varchar 发送参数，但上面的转换可能会将它变成长值。

我什至尝试过直接分配

```
 report_clob := report 
```

得到相同的结果。

**编辑**

好的，要回答以下问题，请参阅：我在 PL/SQL 开发人员中使用测试脚本进行调试。报告变量是 varchar2(4000)。当我在第二行之后。报告显示是一个长期值，它只是说 (Long Value) 。连内容都看不到。

report 和 report_clob 是过程中的变量。此过程是从 C# 代码调用的。

当我调用此过程时，C# 中有一个异常字符串缓冲区太小。我在 C# 中给出了 5000 作为报告变量的大小，足以从过程中接收 4000 个最大字符值。所以我想问题不在于那里。

当我分配 report:= 'some string....' 然后 C# 调用工作正常。

因此，我的调查表明，report := transform (report_clob) 正在使报告变成长值或某些类似的东西（奇怪），这使得 C# 代码在处理 5000 varchar out 参数中的更大值时出现问题。

我很乐意提供更多细节。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T14:16:14.440

报价（[在这里](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions016.htm)阅读）-

> 当您使用 CAST 将 CLOB 值转换为字符数据类型或将 BLOB 值转换为 RAW 数据类型时，数据库会隐式地将 LOB 值转换为字符或原始数据，然后将结果值显式转换为目标数据类型。

所以，这样的事情应该有效-

```
report := CAST(report_clob AS VARCHAR2(100)); 
```

或者更好的是，将它用作`CAST(report_clob AS VARCHAR2(100))`您尝试使用`BLOB`as的任何地方`VARCHAR`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-08T00:19:27.653

**将 VARCHAR2 转换为 CLOB**

在 PL/SQL 中，可以使用简单的赋值、SUBSTR 和其他方法将 CLOB 转换为 VARCHAR2。仅当 CLOB 小于或等于 VARCHAR2 的大小时，简单的赋值才会起作用。PL/SQL 中的限制为 32767，SQL 中的限制为 4000（尽管 12c 允许 SQL 中的 32767）。

例如，此代码通过简单的赋值转换一个小的 CLOB，然后转换一个较大的 CLOB 的开头。

```
declare
    v_small_clob clob := lpad('0', 1000, '0');
    v_large_clob clob := lpad('0', 32767, '0') || lpad('0', 32767, '0');
    v_varchar2   varchar2(32767);
begin
    v_varchar2 := v_small_clob;
    v_varchar2 := substr(v_large_clob, 1, 32767);
end; 
```

**长的？**

上面的代码不会将该值转换为 LONG。由于 PL/SQL 调试器和长度超过 999 个字符的字符串的限制，它看起来只是这样。

例如，在 PL/SQL Developer 中，打开一个测试窗口并添加和调试上述代码。右键单击`v_varchar2`并选择“将变量添加到手表”。单步执行代码，值将设置为“（长值）”。文本旁边有`...`一个，但它不显示内容。 ![PLSQL Developer 长值](../Images/3b600a7f9d0e7f17141627b25d1c5fdb.png)

**C＃？**

我怀疑这里真正的问题出在 C# 上，但我不知道 C# 有多少可以调试问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-03T13:54:55.900

```
ALTER TABLE TABLE_NAME ADD (COLUMN_NAME_NEW varchar2(4000 char));
update TABLE_NAME set COLUMN_NAME_NEW = COLUMN_NAME;

ALTER TABLE TABLE_NAME DROP COLUMN COLUMN_NAME;
ALTER TABLE TABLE_NAME rename column COLUMN_NAME_NEW to COLUMN_NAME; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T18:59:45.817

这是我的近似：

```
 Declare 
  Variableclob Clob;
  Temp_Save Varchar2(32767); //whether it is greater than 4000

  Begin
  Select reportClob Into Temp_Save From Reporte Where Id=...;
  Variableclob:=To_Clob(Temp_Save);
  Dbms_Output.Put_Line(Variableclob);

  End; 
```

# html - 在 HTML 中渲染人体

> ID：12860527
> 
> 赞同：3
> 
> 时间：2012-10-12T13:49:16.230
> 
> 标签：html

是否有使用 HTML 渲染人体图像（正面和背面）的示例？

我们有一个现有的解决方案，它使用 JPG 图像、地图、区域和 svg 标签来渲染人体，并允许用户将鼠标光标悬停在它们上面并选择一个区域。

我们遇到的问题是，这种效果在较新的浏览器中似乎可以正常工作，但对于 IE7、8 和 9，悬停效果根本不起作用。

我们愿意寻找一种不同的方法来做到这一点，直觉我正在努力寻找任何例子。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-12T13:52:09.223

如果我这样做，我会使用带有名为 Image Mapster 的 jQuery 插件的常规图像映射。

[http://www.outsharked.com/imagemapster/default.aspx?demos.html](http://www.outsharked.com/imagemapster/default.aspx?demos.html)

它允许您在图像地图上使用翻转，并将备用图像作为翻转状态。

很值得一看。

已经有一个人体骨骼演示[http://www.outsharked.com/imagemapster/examples/joints/SkeletonJointExample.html](http://www.outsharked.com/imagemapster/examples/joints/SkeletonJointExample.html)

# ruby - 为什么“whenever” gem 找不到“bash”命令？

> ID：12860532
> 
> 赞同：0
> 
> 时间：2012-10-12T13:49:40.133
> 
> 标签：ruby, rvm, whenever

我正在使用“[无论何时](http://rubygems.org/gems/whenever)”Ruby gem 和[RVM](http://rvm.io/)来控制我的红宝石/宝石集。当我尝试使用时，我看到以下错误。

```
/bin/bash: not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:55:13.517

每当 gem 有 /bin/bash 硬编码时，它就会出现

`set :job_template, "/bin/bash -l -c ':job'"`

并非所有操作系统都将 bash 放在同一个地方。

看来您正在使用 bash 不在 /bin 中的操作系统（可能在 /usr/bin 或 /usr/local/bin 中）

您将需要更新 job_template 以匹配 bash 的位置，或者您可以这样做

`set :job_template, "bash -l -c ':job'"`

让 shell 为您找到正确版本的 bash。

# plugins - cMake的Firebreath问题

> ID：12860533
> 
> 赞同：0
> 
> 时间：2012-10-12T13:49:44.280
> 
> 标签：plugins, browser, cmake, firebreath

我正处于使用 Firebreath 为我的第一个测试插件创建 VSS 项目的阶段，但我遇到了以下问题：

```
C:\code\sc>firebreath\prep2012.cmd projects build
A subdirectory or file build already exists.
Using projects in: "C:\code\sc\projects"
Generating build files in: "C:\code\sc\build"
NOTE: The build files in "C:\code\sc\build" should *NEVER* be modified directly.

When needed, make project changes in cmake files and re-run this script.
  Project-specific cmake files are found in [plugin dir]\CMakeLists.txt and
  [plugin dir]\Win\projectDef.cmake.
Note that parameters for cmake should be enclosed in double quotes, e.g. "-DVERB
OSE=1"
CMAKE parameters:

C:\code\sc\build>cmake -G "Visual Studio 11" -DFB_PROJECTS_DIR="C:\code\sc\proje
cts"  "C:\code\sc\firebreath"
'cmake' is not recognized as an internal or external command, operable program or batch file. 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:01:17.957

如评论中所述，这是因为您没有安装 cmake 或没有将 cmake 添加到您的路径中。

如果您确实安装了 cmake，请重新安装它并在安装过程中选择“添加到所有用户的路径”。如果没有，则需要安装它。

所有这些信息都在网站上：[http ://www.firebreath.org/display/documentation/Building+on+Windows](http://www.firebreath.org/display/documentation/Building+on+Windows)

# wpf - WPF Datepicker 不会引发文本输入事件

> ID：12860535
> 
> 赞同：1
> 
> 时间：2012-10-12T13:49:48.323
> 
> 标签：wpf, vb.net, datepicker

我制作了一个自定义日期选择器控件，以允许输入短日期（例如“010111”、“01012011”或“01-01-2011”）
不知何故，事件不会被触发。

```
Public Class DatePicker
Inherits System.Windows.Controls.DatePicker

Private Sub DatePicker_PreviewTextInput(sender As Object, e As Windows.Input.TextCompositionEventArgs) Handles Me.PreviewTextInput
    If Me.Text.Length >= 6 Then
        Dim strInput As String = Me.Text.Trim
        Dim dtInput As Date = Nothing

        Select Case strInput.Length
            Case Is = 6
                dtInput = New Date(CInt(Mid(strInput, 5, 2)), CInt(Mid(strInput, 3, 2)), CInt(Mid(strInput, 1, 2)))
            Case Is = 8
                dtInput = New Date(CInt(Mid(strInput, 5, 4)), CInt(Mid(strInput, 3, 2)), CInt(Mid(strInput, 1, 2)))
            Case Is >= 10
                dtInput = New Date(CInt(Mid(strInput, 7, 4)), CInt(Mid(strInput, 4, 2)), CInt(Mid(strInput, 1, 2)))
        End Select

        Me.SelectedDate = dtInput
    End If

    e.Handled = True
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:22:30.777

好的，我以不同的方式解决了它。

```
Public Class DatePicker
Inherits System.Windows.Controls.DatePicker

Private Sub DatePicker_LostKeyboardFocus(sender As Object, e As Windows.Input.KeyboardFocusChangedEventArgs) Handles Me.LostKeyboardFocus
    Dim dtInput As DateTime
    Dim strInput As String = Me.Text.Trim

    If DateTime.TryParse(strInput, dtInput) = True Then
        Me.SelectedDate = dtInput
    Else
        Select Case strInput.Length
            Case Is = 6
                If DateTime.TryParseExact(Me.Text, "d", New DateTimeFormatInfo() With {.ShortDatePattern = "ddMMyy"}, DateTimeStyles.None, dtInput) Then
                    Me.SelectedDate = dtInput
                End If
            Case Is = 8
                If DateTime.TryParseExact(Me.Text, "d", New DateTimeFormatInfo() With {.ShortDatePattern = "ddMMyyyy"}, DateTimeStyles.None, dtInput) Then
                    Me.SelectedDate = dtInput
                End If
            Case Is >= 10
                If DateTime.TryParseExact(Me.Text, "d", New DateTimeFormatInfo() With {.ShortDatePattern = "dd-MM-yyyy"}, DateTimeStyles.None, dtInput) Then
                    Me.SelectedDate = dtInput
                End If
        End Select
    End If

    e.Handled = True
End Sub End Class 
```

# c# - 3d 与 gdi - 投影算法

> ID：12860539
> 
> 赞同：0
> 
> 时间：2012-10-12T13:50:08.867
> 
> 标签：c#, c, c#-4.0, math, graphics

我仍然无法将 3d 数据转换为 2d。我有一个带有多边形的数组。每个多边形都有 3 个顶点，逻辑上具有 3 个值 (x,y,z)。现在我想用只有 2d 的 gdi+ 绘制这些多边形。我想做类似的事情：在我找到的所有文章中，对于每个多边形，每个顶点都得到正确的 x 和 y 值，这个值代表观察者的位置或观点。我怎样才能得到这个值。它必须在我的窗口中心，我正在使用 gdi+ 进行绘画。感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:58:00.247

那么没有其他方法（我也不知道）

*   定义 a `Plane`，将在其中绘制**2D**

*   *沿平面法线*与法线移动**3D**顶点，以这种方式构造矢量/线。

**   找到`Plane`和向量 == 的交点，这将是您要在**2D**空间中绘制的点。* 

 *要定义平面，您可以使用 3D 引擎。它通常通过指定`a point`and来实现（也因为它在数学上是正确的） `a normal vector`。有了这两个信息，您就可以（在精神上）构建*一个平面*。*

# php - php Internet Explorer重定向标头不起作用

> ID：12860540
> 
> 赞同：0
> 
> 时间：2012-10-12T13:50:16.627
> 
> 标签：php, internet-explorer, redirect, user-agent

如果他们正在使用 Internet Explorer，我试图将用户重定向到另一个页面，但此代码不会重定向他们，它会在 ie 上正常加载页面

我尝试了不同的 MSIE 变体，但似乎没有任何效果

```
session_start();

  if (strpos($_SERVER['HTTP_USER_AGENT'], '/MSIE/i') !== false){
header('Location: /ie.php');
die();
}else{
echo "User Agent not recognised.";
} 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T13:53:56.050

试试这个：

```
session_start();

if (strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') !== false){
    header('Location: /ie.php');
    die();
}else{
    echo "User Agent not recognised.";
} 
```

原因是`strpos`' 的第二个参数，needle，不应该是正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:03:58.923

还有另一种根本不需要 php 的方法，它是条件注释：

```
<!--[if IE]>
<?php echo "User is using Internet Explorer"; ?>
<![endif]-->

<!--[if IE 6]>
<?php echo "User is using Internet Explorer 6"; ?>
<![endif]--> 
```

ETC...

如果资源管理器是 IE 并且版本小于或大于 X，您也可以获得：

Code if User uses IE and it's below version 9 Code if User uses IE and it's below than or equal to version 7 Code if User uses IE and it's greater than version 6

The advantages are that you can also pick the version of the browser, easy to implement, and you are using a little less resources from your server xD (although it would be a insignificant difference).

Another advantage is that you can use that to include css or js files in the header of your page depending on the browser.

The disadvantage is that you has less control as it's browser based(client side).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:54:52.893

换成`'/MSIE/i'`简单`MSIE`试试。另外，你需要 die() 函数吗？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-12T13:54:25.550

试着把**ob_start();** 在 PHP 文件的顶部

# javascript - 从字符串中获取初始数字

> ID：12860550
> 
> 赞同：0
> 
> 时间：2012-10-12T13:50:47.133
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery/Javascript 获取字符串的初始数值。现在，我得到的字符串是：

```
 2 <a href="user/usergroups.html?uname=Users@Users.com ">view</a> 
```

我正在尝试获取这个字符串（它存储在一个变量中，并且只取其中的初始数字。通常，我只会取第一个数字，但我想让它变得灵活，所以数字可能是任何长度的数字（例如，“2”到“20,000,000”），所以我知道只取前几个数字是行不通的。

有没有人有解决方案？感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:52:47.507

使用 parseFloat。当它遇到一个非数字字符时它会停止。

```
parseFloat(mystring); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:52:54.340

```
var str = '2 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>​​​​​​​​​​​​​';
var parts = str.split(' ');
alert(parts[0]);​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:52:42.937

`^\d+`如果您只想获取数字，或者`^[\d,]+`如果您允许逗号，则其中一种解决方案是使用正则表达式：

```
var input = '2 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>';
var number = input.match(/^\d+/g); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:57:19.803

如果数字中有逗号，小数点可能有一个点，并且后面总是有一个空格，我会使用这样的正则表达式进行匹配......

```
var str = '2,000.33 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>'
var bits = str.match(/^[\d,\.]+/)

// alerts 2,000.33
alert(bits[0])

// to convert to string...
num = parseFloat(bits[0].replace(/,/g,''))

alert(num)
// alerts: 2000.33 (treated as number, not as string representation of number) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:58:40.947

如果数字不是逗号分隔的：

```
var s   = '1234 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>',
    num = parseInt(s, 10); 
```

如果数字是逗号分隔的：

```
var s   = '1,234 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>',
    num = parseInt(s.match(/^\d{1,3}(?:,\d{3})*/)[0].replace(/,/g, ''), 10); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T13:59:29.523

```
function getNum ( str ) {
    var result = '';
    var nums = str.match(/^(\d+|\,)*/);
    if(nums[0])
        result = parseFloat(nums[0].replace(/,/g,''));

    return result;
} 
```

用法：

`getNum ('2 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>')`
输出：2

`getNum ('20,000,000 <a href="user/usergroups.html?uname=Users@Users.com ">view</a>')`
输出：20000000

# asp.net-mvc-3 - 带方括号的 MVC 模型属性名称 - 这可能吗？

> ID：12860558
> 
> 赞同：0
> 
> 时间：2012-10-12T13:51:27.430
> 
> 标签：asp.net-mvc-3, serialization, properties, http-post

在向第三方支付提供商发布数据时，我通常会序列化一个表示字段的 MVC 模型。我已经多次使用这种技术并且效果很好。

但是现在我面临着这个规范： ![http发布参数](../Images/36577d20196b24c8b0bf4ffc99eef203.png)

请注意，字段名称包含方括号。我不知道如何在我的模型属性中包含完整的字段名称，目前模型如下所示：

```
public string action { get; set; }
public string api_key { get; set; }
public string RetailerUniqueRef { get; set; }
public string InstallationID { get; set; }
public float Price { get; set; }
public string Description { get; set; }
public string Code { get; set; }
public float Deposit { get; set; }
public string SchemeCode { get; set; } 
```

如您所见，属性名称只是字段名称的一部分。如果我像这样添加方括号：

```
public string identification[api_key] { get; set; } 
```

这失败了，因为编译器非常正确地认为它是一个数组。如何在属性名称中包含方括号，或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:00:24.817

也许您可以使用某种形式的属性来标记您的属性，然后使用反射来获取名称。但是，在您提供的示例中，`data`对象是 a `NameValueCollection`，键是字符串，这意味着不需要这样做，甚至不需要使用属性名称。

我怀疑你需要做这样的事情： -

```
var foo = new Foo();
foo.ApiKey = "SomeRandomApiKeySetByTheProvider";
foo.Code = "ONIF6";

var data = new NameValueCollection();
data.Add("Identification[api_key]", foo.ApiKey);
...
data.Add("Finance[Code]", foo.Code); 
```

# ruby-on-rails - 导轨 - 初学者。将 JSON 发送到 Rails，更新它并发送回新的 JSON

> ID：12860562
> 
> 赞同：0
> 
> 时间：2012-10-12T13:51:36.387
> 
> 标签：ruby-on-rails, ruby

我有 Rails 应用程序需要从我无法控制的 SOAP 服务器检索数据。它检索附有统计信息的用户列表，并将数据作为 JSON 返回。

检索到该数据后，我需要将其与从我的 Rails 应用程序数据库中检索到的数据结合起来。

一旦我从 SOAP 服务器获得 JSON，我将它发送到 Rails 控制器，以便可以将新值添加到 JSON，然后发送回视图。

我的问题是一个非常简单的问题。一旦 JSON 在我的控制器中，我似乎无法*读取和迭代它。*

**我认为**stat_data 的 JS 是从 SOAP 服务接收到的 JSON

```
window.get_metrics = (stat_data) ->
    update_loading_message 'Getting Metrics'
     console.log stat_data

    $.ajax '/tracking/get_metrics',
        type: "POST"
        data: client_data: stat_data
        dataType: 'json'
        success : (data) ->
            console.log(data)
            # populate_table(data) 
```

**控制器**

```
@client_advisors = params[:client_data]
puts @client_advisors

# This is where I would do my other processing / model calls to get new data

render file: 'tracking/metrics_data.json.erb', content_type: 'application/json' 
```

**的输出`puts @client_advisors`**

```
{
"0"=>
{
"personnel_id"=>"1495", 
"personnel_name"=>"John Smith",
"statistic_x"=>"200"
}, 
"1"=>
{
"personnel_id"=>"5266",
"personnel_name"=>"John Candy",
"statistic_x"=>"300"
},
"2"=>{
... etc ...
}
} 
```

**跟踪/metrics_data.json.erb**

```
[
<%= puts '~~~~~~~~~~~~  PROCESSING JSON' %>
<% @client_advisors.each do |advisor| %>

<%= puts 'advisor::' %>
<%= puts advisor %>
<%= puts 'advisor.inspect::' %>
<%= puts advisor.inspect %>
{   
... This is where my re-generated JSON would go

}
<% end %> 
] 
```

可笑的是，我似乎无法在我的 metrics_data.json.erb 中定位personal_name 或personal_id。它在控制台中输出每个完整的顾问对象都很好......但我不确定我应该使用什么来定位对象的值。我试过`advisor.personnel_name`（显然不会工作，因为对象被命名为“0、1、2等” ）`advisor['0']`，，，`advisor[0]`。`advisor[:0]`没有一个允许我更深入地检索personal_name。

非常感谢您的时间！

## 解决了！

感谢@willglynn

“jQuery - 有点令人惊讶 - 没有创建 JSON 的机制。它可以很好地解析，但你必须自己对其进行编码。你可以使用 JSON.stringify ，但是对于*某些*浏览器，你需要 JSON2.js” - @willglynn

**更新了 JS**

```
window.get_metrics = (stat_data) ->
    update_loading_message 'Getting Metrics'
     console.log stat_data

    $.ajax '/tracking/get_metrics',
        type: "POST"
        data: client_data: JSON.stringify(stat_data)
        dataType: 'json'
        success : (data) ->
            console.log(data)
            # populate_table(data) 
```

**更新的控制器**

```
@client_advisors = JSON.parse(params[:client_data]) 
```

**更新了 tracking/metrics.erb.json**

```
<% puts advisor %>
<% puts advisor['personnel_id'] %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:16:10.593

为了回答您的问题，当 Rails 获取`POST`JSON 内容时，它会将请求内容转换为类似于表单提交的内容。这意味着它`params[]`不会与原始对象完全匹配。要取回原始对象，您需要在 Rails 背后直接从请求中解析出来：

```
@client_advisors = ActiveSupport::JSON.decode(request.body.read) 
```

也就是说，我会对此代码进行一些更改。

*   你有一个返回 JSON 的 SOAP 服务器，它以某种方式被*发送*到你的 Rails 应用程序。这是什么组件？为什么？你能去掉中间人，让 Rails 直接与 SOAP 组件对话吗？
*   `erb`您正在模板中生成带有字符串连接的 JSON 。这是容易出错且乏味的。相反，使用`render :json => [{ 'key' => 'value' }]`.
*   您正在将大量知识放入视图中。这是一个正常的起点，但并不理想。我可能会创建一个模型来封装来自这个 SOAP 组件的响应——不是 ActiveRecord，只是一个 Ruby 对象——并让该模型负责与我的其他模型交互以获得所需的效果。

最后一个很重要，因为它可以让您消除视图并将控制器简化为：

```
@soap_thing = CrazySoapThing.parse(request.body.read)
@soap_thing.sync
render :json => @soap_thing.affected_records 
```

有关更多信息，请参阅[瘦控制器、胖模型](http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:02:09.953

`@client_advisors`只是一个字符串，你必须先解析它：

```
@client_advisors = JSON.parse(params[:client_data])
@client_advisors['0']['personnel_name'] #=>"John Smith" 
```

您还应该看看[RABL](https://github.com/nesquena/rabl) ( [Railscast](http://railscasts.com/episodes/322-rabl) )。

* * *

顺便说一句：`<%= puts foo %>`这不是一个好习惯，因为`<%=`它是针对指定输出的。如果您*必须*打印调试数据，请使用`<% logger.debug { foo.inspect } %>`或使用适当的调试器 ( `gem 'debugger'`)

# c++ - 子类化系统菜单

> ID：12860563
> 
> 赞同：0
> 
> 时间：2012-10-12T13:51:37.647
> 
> 标签：c++, windows, winapi, mfc, menu

我已经定义了一个所有者绘制的菜单类。该类考虑了[本文](http://www.codeproject.com/Articles/7021/MFC-extension-library-A-plugin-to-handle-owner-dra#problem3)`MeasureItem`定义的系统菜单的问题（即根据菜单是否为系统菜单调整自定义测量值）。但是我遇到的问题是在正确的时间对系统菜单进行子类化。

目前，我已经使用以下两个代码片段来尝试对其进行子类化（在 overriden 中[`CFrameWnd::LoadFrame`](http://msdn.microsoft.com/en-us/library/e3h089yt%28v=vs.80%29.aspx)）：

1.  尝试1：`mSysMenu`是的子类`CMenu`，它也被重写`Attach`为自动将菜单设置为所有者绘制（bool参数只是传递来通知它是否是系统菜单）

    ```
    mSysMenu.Attach(GetSystemMenu(FALSE)->GetSafeHmenu(), true); 
    ```

    当我右键单击任务栏按钮时，这个失败，在`wincore.cpp`(in `CWnd::OnMeasureItem`) 中生成 3 个断言和一个丑陋的、变形的所有者绘制的菜单 - 与`_AFX_THREAD_STATE`类有关。但是，当我从右键单击任务栏之前调用`TrackPopupMenu`它时，一切都很好。`OnLButtonDown`

2.  尝试 2：这只是创建了一个类似变形的菜单测量，但没有任何所有者绘制尝试的迹象

    ```
    CVSPMenu* sysMenu = (CVSPMenu*)CMenu::FromHandle(GetSystemMenu(FALSE)->GetSafeHmenu());
    sysMenu->SetOwnderDrawn(true); 
    ```

我也尝试过做事，`OnInitMenuPopup`但传入的菜单指针似乎并没有使用（只是导致断言和失败）。

所以我的问题是，我如何以及在哪里子类化系统菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-03-30T22:32:16.050

因为那个 MSDN 链接已经失效，所以我通过 web.archive 将它复活，并在下面粘贴了相关文本。

[https://web.archive.org/web/20140413053140/http://blogs.msdn.com/b/oldnewthing/archive/2010/05/28/10016691.aspx](https://web.archive.org/web/20140413053140/http://blogs.msdn.com/b/oldnewthing/archive/2010/05/28/10016691.aspx)

> 上次我提到在系统菜单的处理上有一个优化，它显着减少了系统中的菜单数量。
> 
> 当一个窗口具有 WS_SYSMENU 窗口样式时，它就有一个系统菜单，但是直到有人对该窗口调用 GetSystemMenu 之前，没有人知道它的菜单句柄是什么。在那之前，窗口管理器实际上不必承诺为窗口创建菜单。它可以假装窗口有一个。（这种技术被称为延迟初始化。）
> 
> 窗口管理器创建一个包含标准系统菜单项的全局默认系统菜单。如果有人按下 Alt+Space 或以其他方式调用从未调用过 GetSystemMenu 的窗口的系统菜单，则窗口管理器只使用全局默认系统菜单，因为它知道没有人自定义菜单。（您无法自定义您没有权限的菜单！）由于大多数人从不自定义他们的系统菜单，因此这种优化避免了桌面堆与相同菜单的相同副本的混乱。在 16 位时代，这是一个特别重要的优化，当时所有窗口管理器对象都必须适合单个 64KB 堆（称为系统资源）。
> 
> 如果你真的很狡猾，你可以瞥见难以捉摸的全局默认系统菜单，因为它嗖嗖作响： 与任何其他弹出菜单一样，正在显示的菜单的句柄被传递给窗口的 WM_INITMENUPOPUP，如果你的程序从未调用 GetSystemMenu，您将看到的句柄是全局默认系统菜单。请注意，您对此菜单无能为力，因为窗口管理器会阻止任何修改它的尝试。（否则，您的程序的菜单修改会对其他程序的菜单产生意想不到的影响！）
> 
> 因此，如果您的程序习惯于在其 WM_INITMENUPOPUP 处理程序中修改其系统菜单，则应在 WM_CREATE 处理程序中对 GetSystemMenu 进行虚拟调用，以强制系统菜单从假装系统菜单更改为真实菜单。

# html - Google 网站，html 框，0+0 错误消息

> ID：12860565
> 
> 赞同：2
> 
> 时间：2012-10-12T13:51:42.077
> 
> 标签：html, google-sites, html-box-gadget

我正在尝试在谷歌网站的 HTML 框中运行以下 HTML 和 JavaScript 代码，但遇到此错误，“0+0：将元素主体折叠到父级中”并且没有成功。有任何想法吗？谢谢

```
<html>
<head>
<meta http-equiv="refresh" content="3;url=http://www.somewhere.com/" />
</head>
<body>
<h1>Redirecting in 3 seconds...</h1>
</body>
</html> 
```

来源： [一定时间后重定向网站](https://stackoverflow.com/questions/3292038/redirect-in-3-sec)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:40:50.793

按照此处的说明使用“URL 重定向器”小工具：[redirect - K8OMS 帮助站点](http://www.k8oms.net/redirect)

> 将 URL 重定向器小工具添加到您的页面。
> 
> 1.  编辑页面
> 2.  插入
> 3.  更多小工具
> 4.  搜索 URL 重定向器
> 5.  选择它
> 6.  使用要重定向到的 URL 和秒数对其进行配置（确保包括整个 URL，包括 http://）

另外，`3\. More Gadgets`一定要点击`Public`后搜索

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:05:04.403

尝试做一个在正文加载时运行的 javascript 函数。使用 setTimeout() 函数。这可能也会让您更好地控制重定向，因此您可以使用它:)

# python - 如何找到我正在递归的嵌套列表列表的索引？

> ID：12860566
> 
> 赞同：0
> 
> 时间：2012-10-12T13:51:46.563
> 
> 标签：python, list, recursion

我在寻找针对嵌套列表列表获取列表索引的方法时遇到了一些麻烦。

例如，我可以通过以下两个函数找出给定节点的节点数或列表结构。

```
t = ['add', [ \
        ['divide a', [ \
            ['if statement', ['Var 9', 'Var 5', 'Var 1', 'Var 4']], \
            ['subtract', [ \
                ['add', [ \
                    ['round to integer', ['Var 10']], 'Var 4'] \
                ], 'Var 9' \
            ]] \
        ]], 'Var 4' \
     ]]

def total_nodes(structure,num_nodes):
    s = structure
    print "N:" , num_nodes , s
    num_nodes += 1
    if isinstance(s,str): return num_nodes    
    if s[1]:
        for x in range(len(s[1])):
            num_nodes = total_nodes(s[1][x], num_nodes)
        return num_nodes 

def get_structure_for_node(structure,counter,find_node=1):
    s = structure
    if not isinstance(counter,int):
        return counter
    if counter == find_node:
        return s
    counter += 1
    if isinstance(s,str): return counter
    if s[1]:
        for x in range(len(s[1])):
            counter = get_structure_for_node(s[1][x],counter,find_node=find_node)
        return counter

print 
print total_nodes(t,0)
print
print get_structure_for_node(t,0,find_node=12) 
```

输出：

```
N: 0 ['add', [['divide a', [['if statement', ['Var 9', 'Var 5', 'Var 1', 'Var 4']], ['subtract', [['add', [['round to integer', ['Var 10']], 'Var 4']], 'Var 9']]]], 'Var 4']]
N: 1 ['divide a', [['if statement', ['Var 9', 'Var 5', 'Var 1', 'Var 4']], ['subtract', [['add', [['round to integer', ['Var 10']], 'Var 4']], 'Var 9']]]]
N: 2 ['if statement', ['Var 9', 'Var 5', 'Var 1', 'Var 4']]
N: 3 Var 9
N: 4 Var 5
N: 5 Var 1
N: 6 Var 4
N: 7 ['subtract', [['add', [['round to integer', ['Var 10']], 'Var 4']], 'Var 9']]
N: 8 ['add', [['round to integer', ['Var 10']], 'Var 4']]
N: 9 ['round to integer', ['Var 10']]
N: 10 Var 10
N: 11 Var 4
N: 12 Var 9
N: 13 Var 4
14

Var 9 
```

从输出中我可以看到从 t 到我们搜索的节点 '12' 的路径是：

t[1][0][1][1][1][1]

但是当我正在使用递归函数时，我一直无法找到一种方法来跟踪这个索引键。我需要更改列表/树的元素

有接盘侠吗？

我应该补充一点，我一直试图通过在递归中添加一个变量来跟踪它，该变量构建了它去向的字符串，即

路径=“10112101”

然后尝试稍后使用它，但是我无法准确地得到它，并且更喜欢更清洁的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:41:05.543

最简单的扁平化算法是：

```
def flat_list(l):
    for node in l:
        if isinstance(node, list):
            for i in flat_list(node):
                yield i
        else:
            yield node 
```

很容易修改扁平化算法以保持跟踪：

```
def flat_list_keeping_track(l, track=None):
    track = track or ()
    for i, node in enumerate(l):
        new_track = track + (i,)
        if isinstance(node, list):
            for result in flat_list_keeping_track(node, track=new_track):
                yield result
        else:
            yield node, new_track 
```

现在你可以输入

```
def get_structure_for_node(structure, find_node=1):
    return list(flat_list(structure))[find_node][1] 
```

这不是最快的方法。如果您的结构很大并且您使用相对较小的“find_node”值，那么您应该编写类似的内容（基于[get-the-nth-item-of-a-generator-in-python](https://stackoverflow.com/questions/2300756/get-the-nth-item-of-a-generator-in-python)）：

```
import itertools
def get_structure_for_node(structure, find_node=1):
    return next(itertools.islice(flat_list(structure), find_node, find_node+1))[1] 
```

You can also modify other flatten function if the speed is really important (see [making-a-flat-list-out-of-list-of-lists-in-python](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python) or [making-a-flat-list-out-of-a-multi-type-nested-list](https://stackoverflow.com/questions/6499839/making-a-flat-list-out-of-a-multi-type-nested-list)).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:26:12.640

你保持路径的方法会奏效。

但是，对于您的特定问题，使用生成器重写代码可能更有用（和 pythonic）。

这意味着您在运行函数时管理函数内部的索引和`yield`部分结果。

```
treewalk(node):
    for n in node.children:
        for result in treewalk(n):
            yield result
    else:
        yield node 
```

# jquery - 你如何为第一个孩子添加一个新类 用 jQuery？

> ID：12860567
> 
> 赞同：1
> 
> 时间：2012-10-12T13:51:52.567
> 
> 标签：jquery, css

我正在动态生成样式列表。第一个添加类的jquery函数是什么

*   使用jQuery。

    ```
    <ul>
     <li class="add-class-here"></li>
     <li></li>
    </ul> 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T13:53:08.797

只需使用`:first`伪类和`addClass()`方法的组合：

```
$('ul li:first').addClass('someClass'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:53:20.240

您可以使用 jQuery 的[`:first`](http://api.jquery.com/first-selector/)选择器：

```
$('#list_id li:first').addClass('classname'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:43:51.427

不使用 jquery

与 - CSS 全球

```
li:first-child{conduct01}
li{conduct02}
li:last-child {conduct03} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:53:29.753

你可以这样做：

```
$('ul li:first').addClass('some_class'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T13:54:56.160

如果是静态的，最好在 CSS3 中使用`first-child`or`first-of-type`选择器来指定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T13:55:06.043

为什么你需要 jQuery 呢？

您可以使用 CSS first-child 伪元素来做到这一点。

[http://www.w3schools.com/cssref/sel_firstchild.asp](http://www.w3schools.com/cssref/sel_firstchild.asp)

# javascript - 如何从带有特定类的标签内部获取字符串

> ID：12860570
> 
> 赞同：0
> 
> 时间：2012-10-12T13:51:54.423
> 
> 标签：javascript

如何在这里将带有类的标签内部的内容`myClass`作为字符串传递？

```
function przyciskRozpoczynajacyEdycje() { 
    var items = document.getElementsByClassName('myClass');
    for (var i=0;i<items.length;i++) {
        items[i].addEventListener("click", function () { passIdToEdit('How to put here whats inside tag with class "myClass"?') });
    }
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T13:57:43.050

你试过了`this.innerHTML`吗？事件处理程序内部是事件`this`的关联对象，在本例中是 HTML 元素：

```
items[i].addEventListener("click", function () {
    passIdToEdit(this.innerHTML);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T13:55:40.410

```
function przyciskRozpoczynajacyEdycje() { 
var items = document.getElementsByClassName('myClass');
for (var i=0;i<items.length;i++) {
    items[i].addEventListener("click", function () 
 { passIdToEdit(items[i].inerText) });
}
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:57:06.627

像这样的东西：

```
function przyciskRozpoczynajacyEdycje() { 
var items = document.getElementsByClassName('myClass');
for (var i=0;i<items.length;i++) {
    var myId = items[i].innerText;
    items[i].addEventListener("click", function () { passIdToEdit(myId) });
} 
```

}​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T13:57:11.947

```
items[i].innerHTML; //returns the html (if more than text is used [ex. in a div]) within the tag 
```

# c# - 抽象/虚拟类：在多行文本框中以字符串格式显示颜色属性

> ID：12860587
> 
> 赞同：0
> 
> 时间：2012-10-12T13:52:33.090
> 
> 标签：c#

我目前正在学习使用`abstract`类和`virtual`. 我创建了一个简单的表格，可以生成动物的名称、颜色和它们发出的声音。除了颜色显示属性外，一切似乎都正常。结果显示在多行文本框中。有没有办法只用颜色名称而不是这种格式来显示结果`Color [DarkGray]`？

单击按钮时的结果：

```
Betty is a Color [DarkGray] horse with four legs and runs very fast that goes neigh! neigh!! 
```

期望的结果：

```
Betty is a Dark Gray horse with four legs and runs very fast that goes neigh! neigh!! 
```

**代码**

```
namespace farm
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public abstract class Animal
        {
            protected string the_name;
            protected string the_type;
            protected Color the_color;
            protected string features;

            public virtual string speaks()
            {
                return "";
            }

            public override string ToString()
            {
                string s = the_name + " is a " + the_color + " " + the_type + " with " + features + " that goes " + speaks();
                return s;
            }
        }

public class Horse : Animal
        {
            public Horse(string new_name, Color new_color)
            {
                the_name = new_name;
                the_color = new_color;
                the_type = "horse";
                features = "four legs and runs very fast";

            }

            public override string speaks()
            {
                return "neigh! neigh!!";
            }

        }

 private void button1_Click(object sender, EventArgs e)
        {

            Horse horse1 = new Horse("Topaz", Color.DarkGray);
            textBox1.AppendText(horse1.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T13:57:09.317

是的，在您的 ToString 方法中，使用：

```
the_color.Name 
```

或者更好的是，如果你想在字符串包含大写字符的地方有一个带有空格的字符串，例如 DarkGray => Dark Gray，你可以定义一个像这样的扩展

```
public static class ColorExtensions
{
    public static string GetColorString(this Color color)
    {
        StringBuilder sb = new StringBuilder();
        foreach(char c in color.Name.ToCharArray())
        {
            if (char.IsUpper(c))
                sb.Append(' ');

            sb.Append(c);
        }

        return sb.ToString();
    }
} 
```

并这样称呼它

```
the_color.GetColorString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T13:57:22.753

您可以使用`Name`颜色的属性来获取人类可读的名称。

```
string s = the_name + " is a " + the_color.Name + " " + the_type + " with " + features + " that goes " + speaks(); 
return s; 
```

通常，在 MSDN 上查找命名空间并查看可用的方法和属性会有所帮助。在这种情况下，您可以查看 MSDN 上的[颜色结构](http://msdn.microsoft.com/en-us/library/14w97wkc%28v=vs.100%29.aspx)，您会在“属性”部分找到[Color.Name](http://msdn.microsoft.com/en-us/library/system.drawing.color.name%28v=vs.100%29.aspx)的属性：

> 此方法返回用户定义的颜色名称（如果颜色是从名称创建的）或已知颜色的名称。对于自定义颜色，返回 RGB 值。

# web-services - 没有 Web 应用程序服务器的 Java Web 服务

> ID：12860588
> 
> 赞同：8
> 
> 时间：2012-10-12T13:52:38.093
> 
> 标签：web-services, tomcat, jakarta-ee, jax-ws, java-metro-framework

我们有一个消息处理服务器，它

*   开始几个线程
*   处理消息
*   与数据库交互等......

现在客户端希望在服务器上有一个**Web 服务服务器**，他们将能够使用 Web 服务客户端查询消息处理服务器。例如，给我今天的所有消息，或者删除带有 id 的消息....

问题是：

*   服务器只是一个标准的 j2se 应用程序，不像 tomcat 或 glassfish 那样在应用程序服务器内部运行。
*   处理一个Http请求，是否需要实现一个http服务器？
*   我想使用漂亮的 j2ee 注释，例如 @webservice、@webmothod 等……有没有我可以使用的库或框架

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T06:20:33.570

您不需要第三方库来使用[jax-ws](/questions/tagged/jax-ws "显示标记为“jax-ws”的问题")注释。J2SE 附带[jax-ws](/questions/tagged/jax-ws "显示标记为“jax-ws”的问题")，因此您仍然可以使用所有注释。您可以使用以下解决方案实现轻量级结果，但对于任何优化/多线程，它都由您自己实现：

1.  设计一个 SEI，服务端点接口，它基本上是一个带有 web 服务注释的 java 接口。这不是强制性的，它只是基本 OOP 的一个良好设计点。

    ```
    import javax.jws.WebService;
    import javax.jws.WebMethod;
    import javax.jws.WebParam;
    import javax.jws.soap.SOAPBinding;
    import javax.jws.soap.SOAPBinding.Style;

    @WebService
    @SOAPBinding(style = Style.RPC) //this annotation stipulates the style of your ws, document or rpc based. rpc is more straightforward and simpler. And old.
    public interface MyService{
    @WebMethod String getString();

    } 
    ```

2.  在称为 SIB 服务实现 bean 的 java 类中实现 SEI。

    ```
    @WebService(endpointInterface = "com.yours.wsinterface") //this binds the SEI to the SIB
    public class MyServiceImpl implements MyService {
    public String getResult() { return "result"; }
     } 
    ```

3.  使用`Endpoint` 导入 javax.xml.ws.Endpoint 公开服务；

    ```
    public class MyServiceEndpoint{

    public static void main(String[] params){
      Endpoint endPoint =  EndPoint.create(new MyServiceImpl());
      endPoint.publish("http://localhost:9001/myService"); //supply your desired url to the publish method to actually expose the service.
       }
    } 
    ```

就像我说的，上面的片段非常基础，在生产中表现不佳。您需要为请求制定一个线程模型。端点 API 接受一个[Executor](http://docs.oracle.com/javaee/5/api/javax/xml/ws/Endpoint.html)实例来支持并发请求。线程不是我真正的事，所以我无法给你指点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T17:35:09.010

要使用漂亮的 j2ee 注释，请参阅 Apache CXF [http://cxf.apache.org/](http://cxf.apache.org/)。

# javascript - 将 onMouseOver Javascript 函数添加到 Asp.Net 动态菜单项

> ID：12860590
> 
> 赞同：0
> 
> 时间：2012-10-12T13:52:38.780
> 
> 标签：javascript, asp.net

动态创建菜单项时，如何将鼠标悬停 javascript 函数添加到 asp.net 菜单项？不允许您添加 .attributes 功能。

[Javasript]

```
<script type="text/javascript">
    function ChangeProjectImage(obj) {
        var ctrl = document.getElementById(obj.id);
        ...code...
    }
</script> 
```

[HTML - 菜单控制]

```
<asp:Menu ID="Menu1" runat="server" Orientation="Vertical" Font-Names="Verdana" Font-Size="12px"
        CssClass="Menu">
</asp:Menu> 
```

[CodeBehind - 动态添加菜单项]

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Me.IsPostBack Then

    Else
        Dim dt As DataTable = Session("dt")

        For Each dr As DataRow In dt.Rows
            Dim mi As New MenuItem(dr(0), dr(1), "images\folder_03.png")
            Menu1.Items.Add(mi)
        Next

    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:28:18.370

我最终使用了一个数据网格控件。

HTML

```
<div style="clear: left; padding-right: 5px;">
      <asp:GridView ID="GridView1" runat="server" ShowHeader="False" GridLines="None"  BorderStyle="None" CssClass="MyGridView">
          <Columns>
              <asp:ImageField>
                  <ItemStyle Height="16px" Width="16px" />
              </asp:ImageField>
          </Columns>
      </asp:GridView>
 </div> 
```

代码背后

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Me.IsPostBack Then

    Else
        ...code to fill datagrid

        For Each gr As GridViewRow In GridView1.Rows
            ...code
            gr.Attributes.Add("onmouseover", "ChangeProjectImage(""productimages/" & gr.Cells(2).Text & """,""" & gr.Cells(3).Text & """)")
            gr.Attributes.Add("onmouseout", "ChangeProjectImage(""images/display2.png"",""140"")")
        Next        
     End If

End Sub 
```

JavaScript

```
 function ChangeProjectImage(imgpath, resizeheight) {
     var img1 = document.getElementById"MainContent_LeftTopTabContainer_ThumbTabPanel_Image2")
     img1.style.height = resizeheight
     img1.src = imgpath;
  } 
```

# .net - 将类映射到多个数据库

> ID：12860593
> 
> 赞同：0
> 
> 时间：2012-10-12T13:52:41.800
> 
> 标签：.net, nhibernate, mapping

如何`NHibernate.Tool.hbm2ddl.SchemaExport`在一个数据库中导出某些类，并在另一个数据库中导出某些类？例如`Person`，类应该通过一个连接字符串映射到一个数据库，并且`Product`应该保存到另一个数据库，因此`SchemaExport`应该`Person`在一个数据库中创建一个表，`Product`在第二个数据库中创建一个表。

我为我的类定义了 NHibernate 映射，但我不知道在哪里分别为每个类指定数据库/连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:45:21.297

映射独立于数据库，无法在其中定义连接字符串。建立两个配置对象，每个数据库一个，并将所有类添加到适当的配置中。然后对每个配置使用 Schemaexport。

```
var config1 = new Configuration()
    .AddClass(typeof(Person))
    .AddClass(typeof(Customer))
...

new SchemaExport(config1).Create(false, true);

var config2 = new Configuration()
    .AddClass(typeof(Product));

new SchemaExport(config2).Create(false, true); 
```

# javascript - 如何在一页中定义两个角度应用程序/模块？

> ID：12860595
> 
> 赞同：118
> 
> 时间：2012-10-12T13:52:46.067
> 
> 标签：javascript, angularjs

我正在尝试将两个角度应用程序/模块添加到一页。在下面的小提琴中，您可以看到始终只有 html 代码中引用的第一个模块可以正常工作，而第二个模块无法被 angular 识别。

在这个[小提琴](http://jsfiddle.net/qmNvq/109/)中，我们只能执行该`doSearch2`方法，而在这个[小提琴](http://jsfiddle.net/qmNvq/108/)中，只有该`doSearch`方法可以正常工作。

我正在寻找如何正确地将两个角度模块放入一页的方法。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-10-12T17:21:45.670

> 每个 HTML 文档只能自动引导一个 AngularJS 应用程序。在文档中找到的第一个 ngApp 将用于定义根元素以自动引导为应用程序。要在 HTML 文档中运行多个应用程序，您必须使用 angular.bootstrap 手动引导它们。AngularJS 应用程序不能相互嵌套。-- [http://docs.angularjs.org/api/ng.directive:ngApp](http://docs.angularjs.org/api/ng.directive:ngApp)

也可以看看

*   [https://groups.google.com/d/msg/angular/lhbrIG5aBX4/4hYnzq2eGZwJ](https://groups.google.com/d/msg/angular/lhbrIG5aBX4/4hYnzq2eGZwJ)
*   [http://docs.angularjs.org/api/angular.bootstrap](http://docs.angularjs.org/api/angular.bootstrap)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-04-06T18:35:00.130

我创建了一个没有`ngApp`' 限制的替代指令。它被称为`ngModule`。这是您使用它时的代码样子：

```
<!DOCTYPE html>
<html>
    <head>
        <script src="angular.js"></script>
        <script src="angular.ng-modules.js"></script>
        <script>
          var moduleA = angular.module("MyModuleA", []);
          moduleA.controller("MyControllerA", function($scope) {
              $scope.name = "Bob A";
          });

          var moduleB = angular.module("MyModuleB", []);
          moduleB.controller("MyControllerB", function($scope) {
              $scope.name = "Steve B";
          });
        </script>
    </head>
    <body>
        <div ng-modules="MyModuleA, MyModuleB">
            <h1>Module A, B</h1>
            <div ng-controller="MyControllerA">
                {{name}}
            </div>
            <div ng-controller="MyControllerB">
                {{name}}
            </div>
        </div>

        <div ng-module="MyModuleB">
            <h1>Just Module B</h1>
            <div ng-controller="MyControllerB">
                {{name}}
            </div>
        </div>
    </body>
</html> 
```

您可以在以下位置获取源代码：

[http://www.simplygoodcode.com/2014/04/angularjs-getting-around-ngapp-limitations-with-ngmodule/](http://www.simplygoodcode.com/2014/04/angularjs-getting-around-ngapp-limitations-with-ngmodule/)

它本质上与 AngularJS 内部使用的代码相同，没有任何限制。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-01-28T13:18:22.317

为什么要使用多个 [ng-app] ？由于 Angular 是通过使用模块来恢复的，因此您可以使用使用多个依赖项的应用程序。

**Javascript：**

```
// setter syntax -> initializing other module for demonstration
angular.module('otherModule', []);

angular.module('app', ['otherModule'])
.controller('AppController', function () {
    // ...do something
});

// getter syntax
angular.module('otherModule')
.controller('OtherController', function () {
    // ...do something
}); 
```

**HTML：**

```
<div ng-app="app">
    <div ng-controller="AppController">...</div>
    <div ng-controller="OtherController">...</div>
</div> 
```

**编辑**

请记住，如果要在控制器中使用控制器，则必须使用 controllerAs 语法，如下所示：

```
<div ng-app="app">
    <div ng-controller="AppController as app">
        <div ng-controller="OtherController as other">...</div>
    </div>
</div> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-10-30T09:06:49.937

您可以引导多个角度应用程序，但是：

1）您需要手动引导它们

2）您不应该使用“文档”作为根，而是包含角度接口的节点：

```
var todoRootNode = jQuery('[ng-controller=TodoController]');
angular.bootstrap(todoRootNode, ['TodoApp']); 
```

这将是安全的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-11T17:20:12.720

手动引导两个模块都可以。看这个

```
 <!-- IN HTML -->
  <div id="dvFirst">
    <div ng-controller="FirstController">
      <p>1: {{ desc }}</p>
    </div>
  </div>

  <div id="dvSecond">
    <div ng-controller="SecondController ">
      <p>2: {{ desc }}</p>
    </div>
  </div>

// IN SCRIPT       
var dvFirst = document.getElementById('dvFirst');
var dvSecond = document.getElementById('dvSecond');

angular.element(document).ready(function() {
   angular.bootstrap(dvFirst, ['firstApp']);
   angular.bootstrap(dvSecond, ['secondApp']);
}); 
```

这是 Plunker 的链接 [http://plnkr.co/edit/1SdZ4QpPfuHtdBjTKJIu?p=preview](http://plnkr.co/edit/1SdZ4QpPfuHtdBjTKJIu?p=preview)

**注意：**在 html 中，没有`ng-app`. `id`已被使用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-08T14:19:12.363

我使用多个模块和路由器插座为 Angular 应用程序制作了一个 POC，以将子应用程序嵌套在单个页面应用程序中。您可以在以下位置获取源代码：[https ://github.com/AhmedBahet/ng-sub-apps](https://github.com/AhmedBahet/ng-sub-apps)

希望这会有所帮助

# gwt - JBoss 开发者工作室/GWT gwt-kitchensink 无法编译

> ID：12860597
> 
> 赞同：1
> 
> 时间：2012-10-12T13:52:48.263
> 
> 标签：gwt, jboss, compiler-errors

我正在运行 Windows 8 发布预览版并安装了 32 位 JRE7。我下载了 Jboss Developer Studio 并安装了它。之后安装 Google eclipse 插件和 GWT 并按照本视频中所示的步骤进行操作。[7\. 在 Vimeo 上使用 GWT 的 JBoss Developer Studio](http://vimeo.com/39743919)

我做这一步

运行方式 > Maven 构建并提供目标 = 包并运行。编译失败。我无法理解问题，如何解决？

以下是 Eclipse 控制台中出现的消息：

```
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building JBoss AS Quickstarts: Errai kitchensink 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ gwt-kitchensink ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 4 resources
[INFO] 
[INFO] --- gwt-maven-plugin:2.4.0:resources (default) @ gwt-kitchensink ---
[INFO] auto discovered modules [org.jboss.tools.gwt.kitchensink.KitchenSink]
[INFO] 10 source files from GWT module org.jboss.tools.gwt.kitchensink.KitchenSink
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ gwt-kitchensink ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.4.3:testResources (default-testResources) @ gwt-kitchensink ---
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 0 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ gwt-kitchensink ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.4.3:test (default-test) @ gwt-kitchensink ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- gwt-maven-plugin:2.4.0:compile (default) @ gwt-kitchensink ---
[INFO] auto discovered modules [org.jboss.tools.gwt.kitchensink.KitchenSink]
[WARNING] Don't declare gwt-dev as a project dependency. This may introduce complex dependency conflicts
[INFO] Compiling module org.jboss.tools.gwt.kitchensink.KitchenSink
[INFO]    Validating newly compiled units
[INFO]       Ignored 6 units with compilation errors in first pass.
[INFO] Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO]    Scanning for additional dependencies: jar:file:/D:/Users/Icemilk/.m2/repository/org/jboss/errai/errai-ioc/2.0.0.Final/errai-ioc-2.0.0.Final.jar!/org/jboss/errai/ioc/client/Container.java
[INFO]       Computing all possible rebind results for 'org.jboss.errai.ioc.client.Bootstrapper'
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[ERROR] log4j:WARN No appenders could be found for logger (org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCBootstrapGenerator).
[ERROR] log4j:WARN Please initialize the log4j system properly.
[ERROR] log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
[INFO]                Checking ErraiApp.properties for configured types ...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]          Rebinding org.jboss.errai.ioc.client.Bootstrapper
[INFO]             Invoking generator org.jboss.errai.ioc.rebind.ioc.bootstrapper.IOCGenerator
[INFO]                Generating Extensions Bootstrapper...
[INFO]    Scanning for additional dependencies: jar:file:/D:/Users/Icemilk/.m2/repository/org/jboss/errai/errai-marshalling/2.0.0.Final/errai-marshalling-2.0.0.Final.jar!/org/jboss/errai/marshalling/client/api/MarshallerFramework.java
[INFO]       Computing all possible rebind results for 'org.jboss.errai.marshalling.client.api.MarshallerFactory'
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO] *** FAILED TO COMPILE MARSHALLER CLASS ***
[INFO] *** Classpath Used: D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\src\main\resources;D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\target\classes;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-bus\2.0.0.Final\errai-bus-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-marshalling\2.0.0.Final\errai-marshalling-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-ioc\2.0.0.Final\errai-ioc-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-tools\2.0.0.Final\errai-tools-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-cdi-client\2.0.0.Final\errai-cdi-client-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-weld-integration\2.0.0.Final\errai-weld-integration-2.0.0.Final.jar;D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\src\main\java;D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\src\main\resources;D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\target\classes;D:\Users\Icemilk\.m2\repository\javax\enterprise\cdi-api\1.0-SP4\cdi-api-1.0-SP4.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\interceptor\jboss-interceptors-api_1.1_spec\1.0.1.Final\jboss-interceptors-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\javax\inject\javax.inject\1\javax.inject-1.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\transaction\jboss-transaction-api_1.1_spec\1.0.1.Final\jboss-transaction-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\annotation\jboss-annotations-api_1.1_spec\1.0.1.Final\jboss-annotations-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ws\rs\jboss-jaxrs-api_1.1_spec\1.0.0.Final\jboss-jaxrs-api_1.1_spec-1.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\javax\persistence\hibernate-jpa-2.0-api\1.0.1.Final\hibernate-jpa-2.0-api-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ejb\jboss-ejb-api_3.1_spec\1.0.2.Final\jboss-ejb-api_3.1_spec-1.0.2.Final.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final-sources.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-bus\2.0.0.Final\errai-bus-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-common\2.0.0.Final\errai-common-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\reflections\reflections\2.0.0.Final\reflections-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\guava\guava\10.0.1\guava-10.0.1.jar;D:\Users\Icemilk\.m2\repository\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;D:\Users\Icemilk\.m2\repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\Users\Icemilk\.m2\repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-marshalling\2.0.0.Final\errai-marshalling-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\inject\guice\3.0\guice-3.0.jar;D:\Users\Icemilk\.m2\repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;D:\Users\Icemilk\.m2\repository\org\mvel\mvel2\2.1.Beta8\mvel2-2.1.Beta8.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-api\1.6.1\slf4j-api-1.6.1.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-log4j12\1.6.1\slf4j-log4j12-1.6.1.jar;D:\Users\Icemilk\.m2\repository\log4j\log4j\1.2.16\log4j-1.2.16.jar;D:\Users\Icemilk\.m2\repository\org\javassist\javassist\3.15.0-GA\javassist-3.15.0-GA.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\io\netty\netty\4.0.0.Alpha1.errai.r1\netty-4.0.0.Alpha1.errai.r1.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-ioc\2.0.0.Final\errai-ioc-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-codegen\2.0.0.Final\errai-codegen-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-tools\2.0.0.Final\errai-tools-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\hsqldb\hsqldb\1.8.0.7\hsqldb-1.8.0.7.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-cdi-client\2.0.0.Final\errai-cdi-client-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-javax-enterprise\2.0.0.Final\errai-javax-enterprise-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-weld-integration\2.0.0.Final\errai-weld-integration-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-jpamodelgen\1.1.1.Final\hibernate-jpamodelgen-1.1.1.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar;D:\Users\Icemilk\.m2\repository\javax\enterprise\cdi-api\1.0-SP4\cdi-api-1.0-SP4.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\interceptor\jboss-interceptors-api_1.1_spec\1.0.1.Final\jboss-interceptors-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\transaction\jboss-transaction-api_1.1_spec\1.0.1.Final\jboss-transaction-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\annotation\jboss-annotations-api_1.1_spec\1.0.1.Final\jboss-annotations-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ws\rs\jboss-jaxrs-api_1.1_spec\1.0.0.Final\jboss-jaxrs-api_1.1_spec-1.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\javax\persistence\hibernate-jpa-2.0-api\1.0.1.Final\hibernate-jpa-2.0-api-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ejb\jboss-ejb-api_3.1_spec\1.0.2.Final\jboss-ejb-api_3.1_spec-1.0.2.Final.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final-sources.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-bus\2.0.0.Final\errai-bus-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-common\2.0.0.Final\errai-common-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\reflections\reflections\2.0.0.Final\reflections-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\guava\guava\10.0.1\guava-10.0.1.jar;D:\Users\Icemilk\.m2\repository\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;D:\Users\Icemilk\.m2\repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\Users\Icemilk\.m2\repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-marshalling\2.0.0.Final\errai-marshalling-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\inject\guice\3.0\guice-3.0.jar;D:\Users\Icemilk\.m2\repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;D:\Users\Icemilk\.m2\repository\org\mvel\mvel2\2.1.Beta8\mvel2-2.1.Beta8.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-api\1.6.1\slf4j-api-1.6.1.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-log4j12\1.6.1\slf4j-log4j12-1.6.1.jar;D:\Users\Icemilk\.m2\repository\log4j\log4j\1.2.16\log4j-1.2.16.jar;D:\Users\Icemilk\.m2\repository\org\javassist\javassist\3.15.0-GA\javassist-3.15.0-GA.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\io\netty\netty\4.0.0.Alpha1.errai.r1\netty-4.0.0.Alpha1.errai.r1.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-ioc\2.0.0.Final\errai-ioc-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-codegen\2.0.0.Final\errai-codegen-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-tools\2.0.0.Final\errai-tools-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\hsqldb\hsqldb\1.8.0.7\hsqldb-1.8.0.7.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-cdi-client\2.0.0.Final\errai-cdi-client-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-javax-enterprise\2.0.0.Final\errai-javax-enterprise-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-weld-integration\2.0.0.Final\errai-weld-integration-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-jpamodelgen\1.1.1.Final\hibernate-jpamodelgen-1.1.1.Final.jar;D:\Users\Icemilk\.m2\repository\javax\enterprise\cdi-api\1.0-SP4\cdi-api-1.0-SP4.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\interceptor\jboss-interceptors-api_1.1_spec\1.0.1.Final\jboss-interceptors-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\transaction\jboss-transaction-api_1.1_spec\1.0.1.Final\jboss-transaction-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\annotation\jboss-annotations-api_1.1_spec\1.0.1.Final\jboss-annotations-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ws\rs\jboss-jaxrs-api_1.1_spec\1.0.0.Final\jboss-jaxrs-api_1.1_spec-1.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\javax\persistence\hibernate-jpa-2.0-api\1.0.1.Final\hibernate-jpa-2.0-api-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ejb\jboss-ejb-api_3.1_spec\1.0.2.Final\jboss-ejb-api_3.1_spec-1.0.2.Final.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final-sources.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-bus\2.0.0.Final\errai-bus-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-common\2.0.0.Final\errai-common-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\reflections\reflections\2.0.0.Final\reflections-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\guava\guava\10.0.1\guava-10.0.1.jar;D:\Users\Icemilk\.m2\repository\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;D:\Users\Icemilk\.m2\repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\Users\Icemilk\.m2\repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-marshalling\2.0.0.Final\errai-marshalling-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\inject\guice\3.0\guice-3.0.jar;D:\Users\Icemilk\.m2\repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;D:\Users\Icemilk\.m2\repository\org\mvel\mvel2\2.1.Beta8\mvel2-2.1.Beta8.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-api\1.6.1\slf4j-api-1.6.1.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-log4j12\1.6.1\slf4j-log4j12-1.6.1.jar;D:\Users\Icemilk\.m2\repository\log4j\log4j\1.2.16\log4j-1.2.16.jar;D:\Users\Icemilk\.m2\repository\org\javassist\javassist\3.15.0-GA\javassist-3.15.0-GA.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\io\netty\netty\4.0.0.Alpha1.errai.r1\netty-4.0.0.Alpha1.errai.r1.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-ioc\2.0.0.Final\errai-ioc-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-codegen\2.0.0.Final\errai-codegen-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-tools\2.0.0.Final\errai-tools-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\hsqldb\hsqldb\1.8.0.7\hsqldb-1.8.0.7.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-cdi-client\2.0.0.Final\errai-cdi-client-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-javax-enterprise\2.0.0.Final\errai-javax-enterprise-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-weld-integration\2.0.0.Final\errai-weld-integration-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-jpamodelgen\1.1.1.Final\hibernate-jpamodelgen-1.1.1.Final.jar
[INFO] Unrecognized option : Semester\JBoss
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]          Rebinding org.jboss.errai.marshalling.client.api.MarshallerFactory
[INFO]             Invoking generator org.jboss.errai.marshalling.rebind.MarshallersGenerator
[INFO]                Generating Marshallers Bootstrapper...
[INFO]    Scanning for additional dependencies: D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\target\.generated\org\jboss\tools\gwt\kitchensink\client\shared\_MemberValidator.java
[INFO]       Adding '1' new generated units
[INFO]          Validating newly compiled units
[INFO]             Ignored 1 unit with compilation errors in first pass.
[INFO] Compile with -strict or with -logLevel set to TRACE or DEBUG to see all errors.
[INFO]    [ERROR] Errors in 'D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\target\.generated\org\jboss\tools\gwt\kitchensink\client\shared\_MemberValidatorImpl.java'
[INFO]       [ERROR] Line 431:  The method validate(GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, V, ConstraintValidator<A,? super V>, ConstraintDescriptorImpl<A>, Class<?>[]) in the type AbstractGwtSpecificValidator<Member> is not applicable for the arguments (GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, String, SizeValidatorForArraysOfLong, ConstraintDescriptorImpl<Size>, Class<?>[])
[INFO]       [ERROR] Line 455:  The method validate(GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, V, ConstraintValidator<A,? super V>, ConstraintDescriptorImpl<A>, Class<?>[]) in the type AbstractGwtSpecificValidator<Member> is not applicable for the arguments (GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, String, SizeValidatorForArraysOfLong, ConstraintDescriptorImpl<Size>, Class<?>[])
[INFO]       [ERROR] Line 479:  The method validate(GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, V, ConstraintValidator<A,? super V>, ConstraintDescriptorImpl<A>, Class<?>[]) in the type AbstractGwtSpecificValidator<Member> is not applicable for the arguments (GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, String, SizeValidatorForArraysOfLong, ConstraintDescriptorImpl<Size>, Class<?>[])
[INFO]       [ERROR] Line 480:  The method validate(GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, V, ConstraintValidator<A,? super V>, ConstraintDescriptorImpl<A>, Class<?>[]) in the type AbstractGwtSpecificValidator<Member> is not applicable for the arguments (GwtValidationContext<T>, Set<ConstraintViolation<T>>, Member, String, DigitsValidatorForNumber, ConstraintDescriptorImpl<Digits>, Class<?>[])
[INFO]    [ERROR] Cannot proceed due to previous errors
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 54.449s
[INFO] Finished at: Fri Oct 12 19:19:29 IST 2012
[INFO] Final Memory: 10M/25M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:gwt-maven-plugin:2.4.0:compile (default) on project gwt-kitchensink: Command [[
[ERROR] C:\Program Files (x86)\Java\jre7\bin\java -Xmx512m -classpath "D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\src\main\java;D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\src\main\resources;D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\target\classes;D:\Users\Icemilk\.m2\repository\javax\enterprise\cdi-api\1.0-SP4\cdi-api-1.0-SP4.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\interceptor\jboss-interceptors-api_1.1_spec\1.0.1.Final\jboss-interceptors-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\javax\inject\javax.inject\1\javax.inject-1.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\transaction\jboss-transaction-api_1.1_spec\1.0.1.Final\jboss-transaction-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\annotation\jboss-annotations-api_1.1_spec\1.0.1.Final\jboss-annotations-api_1.1_spec-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ws\rs\jboss-jaxrs-api_1.1_spec\1.0.0.Final\jboss-jaxrs-api_1.1_spec-1.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\javax\persistence\hibernate-jpa-2.0-api\1.0.1.Final\hibernate-jpa-2.0-api-1.0.1.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\spec\javax\ejb\jboss-ejb-api_3.1_spec\1.0.2.Final\jboss-ejb-api_3.1_spec-1.0.2.Final.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-validator\4.2.0.Final\hibernate-validator-4.2.0.Final-sources.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-bus\2.0.0.Final\errai-bus-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-common\2.0.0.Final\errai-common-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\reflections\reflections\2.0.0.Final\reflections-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\guava\guava\10.0.1\guava-10.0.1.jar;D:\Users\Icemilk\.m2\repository\com\google\code\findbugs\jsr305\1.3.9\jsr305-1.3.9.jar;D:\Users\Icemilk\.m2\repository\dom4j\dom4j\1.6.1\dom4j-1.6.1.jar;D:\Users\Icemilk\.m2\repository\xml-apis\xml-apis\1.0.b2\xml-apis-1.0.b2.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-marshalling\2.0.0.Final\errai-marshalling-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\inject\guice\3.0\guice-3.0.jar;D:\Users\Icemilk\.m2\repository\aopalliance\aopalliance\1.0\aopalliance-1.0.jar;D:\Users\Icemilk\.m2\repository\org\mvel\mvel2\2.1.Beta8\mvel2-2.1.Beta8.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-api\1.6.1\slf4j-api-1.6.1.jar;D:\Users\Icemilk\.m2\repository\org\slf4j\slf4j-log4j12\1.6.1\slf4j-log4j12-1.6.1.jar;D:\Users\Icemilk\.m2\repository\log4j\log4j\1.2.16\log4j-1.2.16.jar;D:\Users\Icemilk\.m2\repository\org\javassist\javassist\3.15.0-GA\javassist-3.15.0-GA.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\io\netty\netty\4.0.0.Alpha1.errai.r1\netty-4.0.0.Alpha1.errai.r1.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-ioc\2.0.0.Final\errai-ioc-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-codegen\2.0.0.Final\errai-codegen-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-tools\2.0.0.Final\errai-tools-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\hsqldb\hsqldb\1.8.0.7\hsqldb-1.8.0.7.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-cdi-client\2.0.0.Final\errai-cdi-client-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-javax-enterprise\2.0.0.Final\errai-javax-enterprise-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\org\jboss\errai\errai-weld-integration\2.0.0.Final\errai-weld-integration-2.0.0.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar;D:\Users\Icemilk\.m2\repository\org\hibernate\hibernate-jpamodelgen\1.1.1.Final\hibernate-jpamodelgen-1.1.1.Final.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-user\2.4.0\gwt-user-2.4.0.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA.jar;D:\Users\Icemilk\.m2\repository\javax\validation\validation-api\1.0.0.GA\validation-api-1.0.0.GA-sources.jar;D:\Users\Icemilk\.m2\repository\com\google\gwt\gwt-dev\2.4.0\gwt-dev-2.4.0.jar" com.google.gwt.dev.Compiler -gen "D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\target\.generated" -logLevel INFO -style OBF -war "D:\Project\7th Semester\JBoss Developer Studio\Workspace\gwt-kitchensink\src\main\webapp" -localWorkers 4 org.jboss.tools.gwt.kitchensink.KitchenSink
[ERROR] ]] failed with status 1
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

# javascript - Simplecart beforecheckout Ajax 调用

> ID：12860599
> 
> 赞同：0
> 
> 时间：2012-10-12T13:52:53.937
> 
> 标签：javascript, jquery, ajax

我安装了一个 simplecart，我需要将购物车中的所有文章保存在一个数据库中。所以我想到了这样的事情

```
 simpleCart.bind( "beforeCheckout" , function( data ){
       $.post("shopping/saveMe",function(hmtl){ alert(""); }, "html");
  }); 
```

问题似乎`beforecheckout`没有等待 ajax 完成甚至开始。
我只知道如果我`alert()`在帖子后面放一个简单的。它工作正常。知道如何解决这个问题吗？因为显然我不需要警报 XD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:46:57.157

好的，伙计们，我找到了一个解决方案....对于那些可能遇到同样问题的人..实际上解决方案非常简单....不要使用 $.post 而是使用 classi $.ajax 然后设置异步为假...这样 beforecheckout 将等待呼叫完成：D

# javascript - 在 PhantomJS 中打印页面

> ID：12860602
> 
> 赞同：2
> 
> 时间：2012-10-12T13:53:04.123
> 
> 标签：javascript, pdf, printing, phantomjs

有什么办法可以打印页面`PhantomJS`。我想将我的页面传递给 PDF 打印机 ( `PDFCreator`) 以获得漂亮的 PDF 页面（*请参阅我的问题[here](https://stackoverflow.com/questions/12837560/proper-way-to-convert-html-to-pdf)*）

我正在使用以下代码，但它不起作用

```
var page = require('webpage').create(),
address, output, size;

var input = phantom.args[0];
page.open(input, function (status) {
    page.evaluate(function () {
        window.print();
    });
    phantom.exit();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:09:50.320

也许这会有所帮助：您需要设置一个较大的超时时间`rasterize.js`，以便在您之前渲染整个文档`page.render(output)`

此外，您提供的脚本与提供的脚本非常不同，`rasterize.js`并且无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:11:43.473

看起来[PhantomJS 在其网站上包含示例](http://phantomjs.org/examples/)。其中之一[rasterize.js](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)表示它展示了如何将 HTML 输出为 PDF。我还没有尝试过，但也许这可能会导致解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-23T08:42:32.800

我发现了这个要点：[https](https://gist.github.com/boriscy/a0ac26c54f30296949df) ://gist.github.com/boriscy/a0ac26c54f30296949df这看起来很重要：

```
page.onLoadFinished = function() {
  page.render(pdf);
  phantom.exit();
} 
```

我看到的其他示例进行了很大的等待，只是希望在等待结束时文档完成。对我来说，这似乎不太好，因为较大的文档会失败，而较小的文档会比需要的慢。

# bash - 使用 cut 命令从右侧提取的代码？

> ID：12860603
> 
> 赞同：17
> 
> 时间：2012-10-12T13:53:06.713
> 
> 标签：bash, substring, cut

有一个使用该`cut`命令从左侧开始提取部分字符串的示例。下面给出一个例子。

```
$ echo "abc-def-ghi-jkl" | cut -d- -f-2
abc-def 
```

相同的代码如何适应从右侧提取？我想过把单词倒过来，用同样的方法，但是太复杂了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-12T13:56:21.690

你可以使用 rev

```
echo "abc-def-ghi-jkl" | rev | cut -d- -f-2 | rev 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T13:54:19.270

```
$ echo "abc-def-ghi-jkl" | cut -d- -f3-
ghi-jkl 
```

`-2`切到第二场。`3-`从第 3 场开始切入。

# mahout - Mahout 基于内容的推荐

> ID：12860606
> 
> 赞同：3
> 
> 时间：2012-10-12T13:53:17.197
> 
> 标签：mahout, recommendation-engine

我正在尝试使用有关节目的信息创建节目推荐器，因此我相信这是基于内容的。我希望一个人选择他们看过的节目，并根据他们的内容推荐类似的节目。

目前我的数据文件看起来像这样

```
Code          Genre
1260064148537,NOGENRE
1260064149243,Drama
1260064149741,Spoof
1260064764631,Classical
12600647412748,HipHopRnB&Dancehall
126006483593,NOGENRE
1260065049943,NOGENRE
12600705429,Sketch
1260070324431,News
126007032486,Sport
... 
```

我已经编写了自己的 ItemSimilarity 来查找流派的相似之处，但我不知道如何将 DataModel 与我的数据一起使用，因为我有一个 Long 和一个 String，然后如何将其发送给推荐者。我必须编写自己的 DataModel 吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T16:34:24.910

第一个问题是您是否有任何其他数据，将用户连接到节目。如果你不这样做，那么你实际上没有推荐人问题。这只是一个类似项目的问题。您推荐与用户现在正在查看的内容相似的内容。

当然，您必须定义相似性。如果每个节目只有一个标签，那么您无能为力，只能说它们在具有相同标签时是相似的，否则就不行。您可以使用`ItemSimilarity`和迭代所有项目（也许预先计算这个）来计算与当前项目最相似的事物。

当然，如果您的相似度只是 0 或 1（取决于它们是否共享标签），那甚至都不是相似度问题。这只是搜索。找到同一类别的东西，你就完成了。

当您将用户项目数据放在心上时，推荐器就会发挥作用。您可以使用这种数据来制作推荐人`ItemSimilarity`，然后使用它加上用户项目数据（可能是查看次数等）来制作推荐人。但我也认为你必须评估是否可以获得更丰富的标签数据；如果是这样，您当然可以做出更好的相似性指标。

（由于上述原因，这不是您将使用的输入`DataModel`。但我应该注意，您不能使用字符串标识符，它们必须是数字。可以使用字符串进行一些额外的工作，但这并不值得。）

# c# - Visual Studio 2012 ExcludeFromCodeCoverage 方法显示在结果中

> ID：12860609
> 
> 赞同：4
> 
> 时间：2012-10-12T13:53:24.320
> 
> 标签：c#, unit-testing

我有以下方法：

```
[ExcludeFromCodeCoverage]
private static string GetAuthorizationToken(HttpActionContext actionContext)
{
    var authorization = actionContext.Request.Headers.FirstOrDefault(h => h.Key.Equals("Authorization"));
    // ... removed for brevity
} 
```

该`ExcludeFromCodeCoverage`属性适用于整个方法，除了`h.Key.Equals("Authorization")`，尽管方法上有属性，但它显示为未覆盖。

如何从代码覆盖结果中排除此符号？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T00:02:24.650

我可以解释为什么即使您在类上指定了 ExcludeFromCodeCoverage 属性，它仍显示为未被覆盖。解释在于编译器实际生成的 IL。它声明了一个委托来匹配看起来像这样的 lambda 表达式。

```
private static Func<string, bool> AnonymousMethodDelegate; 
```

然后它创建与委托声明匹配的命名方法。

```
[CompilerGenerated]
private static bool CompilerGeneratedMethod(string h)
{
  return h.Equals("Authorization");
} 
```

然后最后是使用方法中的委托调用命名方法，如下所示

```
[ExcludeFromCodeCoverage]
private static string GetAuthorizationToken(HttpActionContext actionContext)
{
  AnonymousMethodDelegate = CompilerGeneratedMethod;
  Func<string, bool> predicate = AnonymousMethodDelegate;
  return Enumerable.FirstOrDefault<string>((IEnumerable<string>) actionContext, predicate);
} 
```

我相信你已经发现了问题。编译器创建了一个不再附加 ExcludeFromCodeCoverage 属性的方法！这就是 NCover 判断它没有被覆盖的原因，即使您似乎已经声明了 ExcludeFromCodeCoverage 属性。

排除它的一种方法是回到基础并有效地执行编译器为您执行的操作并声明委托和命名方法。这使您能够将 ExcludeFromCodeCoverage 属性添加到该命名方法。尽管出于明显的原因，我不是这个解决方案的忠实粉丝。

显然，如果您在类级别添加 ExcludeFromCodeCoverage 属性，它还将涵盖此生成的方法，这将解决此问题，但我认为这也会排除您想要包含在覆盖率报告中的代码。

另一种选择是，如果您使用的是 NCover，那么您可以使用所有编译器生成的方法都使用 CompilerGenerated 属性修饰的事实。您可以将要排除的属性传递给 NCover，因此您所要做的就是在命令行或通过 MSBuild 任务传递 System.Runtime.CompilerServices.CompilerGeneratedAttribute。这可能是我的首选。

# javascript - 将表格更改为 div，然后再次返回表格

> ID：12860611
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:53:30.530
> 
> 标签：javascript, html, css

**[旧且不正确：停止投票]**

我在 stackoverflow 上找到了一种将表格转换为 div 的简单方法。我在每个标签示例上都有类

```
<table class="table"> 
```

所以当 div 替换它时，它仍然会有类表。tbody、tr 和 td 相同。

当浏览器达到一定宽度时，我使用以下内容更改 HTML。

```
function checkSize(){
if ($(window).width() < 768) {
    tableChanger();
}else{
    console.log("higher");
}
}

var tableChanger = function(){

$('table').each(function (){
    $(this).replaceWith( $(this).html()
        .replace(/<tbody/gi, "<div ")
        .replace(/<tr/gi, "<div ")
        .replace(/<\/tr>/gi, "</div>")
        .replace(/<td/gi, "<div")
        .replace(/<\/td>/gi, "</div>")
        .replace(/<\/tbody/gi, "<\/div")
    );
});
} 
```

我想知道是否有一种方法可以反转从 div 中创建表的功能？我发现这很难，因为很明显结束标签都是

```
</div> 
```

所以一个简单的替换是行不通的。

我正在开发一个响应式网站（在该网站上我别无选择，只能使用表格）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:08:16.423

您不应该进行这种转换。

表格用于表格数据。就像电子表格一样。即内容

`div`用于布局。即让它在屏幕和/或印刷媒体上看起来很漂亮

它们是不同的概念。

一定要用于`<table>`您的表格数据。使用 CSS 为屏幕和/或印刷媒体设置样式。

除了一些人/公司关闭 Javascript。

# java - 使用 Node 类将两个列表添加在一起

> ID：12860614
> 
> 赞同：0
> 
> 时间：2012-10-12T13:53:41.660
> 
> 标签：java, list, nodes

我正在尝试创建一个数据结构来保存多项式。到目前为止，我已经创建了一个 Node 类来存储数据，如下所示：（系数，指数，链接到下一个节点）虽然我在尝试将两个列表添加在一起时遇到了问题。我的方法在每个列表中添加第一个值，然后终止。

这是我的代码如下：

```
 public class Node{

//Fields
public int data1;
public int data2;
public Node next;

//constructors
public Node(){
    data1 = 0;
    data2 = 0;
    next = null;
}

public Node(int d1){
    data1 = d1;
    data2 = 0;
    next = null;
}

public Node(int d1, Node n){
    data1 = d1;
    data2 = 0;
    next = n;
}

public Node(int d1, int d2){
    data1 = d1;
    data2 = d2;
    next = null;
}
public Node(int d1,int d2, Node n){
    data1 = d1;
    data2 = d2;
    next = n;
}

//Methods

//Fetch data
public int getData1(){
    return data1;
}

public int getData2(){
    return data2;
}

//store Data
public void setData1(int d){
    data1 = d;
}

public void setData2(int d){
    data2 = d;
}

public void addData1(Node n2){
    data1 = data1 + n2.data1;
}

//getNext
public Node getNext(){
    return next;
}

//Get data of next node
public int getNextData1(){
    return next.data1;
}

public int getNextData2(){
    return next.data2;
}

//Store Link
public void setNext(Node n){
    next = n;
}

public boolean containsLink(){
    if(this.next != null){
        return true;
    }else{
        return false;
    }
}

public static void displayAll(Node head){
    for( ; head != null; head = head.next ){
        System.out.printf("%d, %d\n", head.data1, head.data2);
    }
}

public static int numOfNonZeroData1(Node n){
    int count = 0; 
    for( ; n != null ; n = n.next ){
        if(n.data1 != 0){
            count++;
        }
    }
    return count;
}

public static int numOfNonZeroData2(Node n){
    int count = 0; 
    for( ; n != null ; n = n.next ){
        if(n.data2 != 0){
            count++;
        }
    }
    return count;
}

public static int listLength(Node head){
    int counter = 0;
    for(; head!=null; head = head.next){
        counter++;
    }
    return counter;
}

public static void toPolynomial(Node head){
    int order = Node.listLength(head);
    int i = 0;
    int increment = Node.numOfNonZeroData2(head);
    //sortList(head);
    for( ; head != null; head = head.next){
        if(head.data2 != 0){
            if(i >= 0 && i < order){
                System.out.printf("%dx^%d", head.data1, head.data2);
                i++;
                if(i < increment && head.data1 >= 0){
                    System.out.print("+");      //case integer is positive
                }else if(i != increment && head.data1 <= 0){
                    System.out.println(" ");    //case integer is negative
                }
            }

        }
    }
    System.out.println();
}

public static Node mergeLists(Node n1, Node n2){
    if ( n1 == null) 
        return n2;
    else if ( n2 == null) 
        return n1;
    else {
        n1.next = mergeLists( n1.next, n2 );     // Note how we exchange p and q here
        return n1;
    }
}

public static Node addPolynomials(Node n1, Node n2){
    for( ; n1 != null; n1 = n1.next){
        for(; n2 != null; n2 = n2.next){
            if(n1.getData2() == n2.getData2()){
                n1.addData1(n2);
                System.out.println("added " + (n1.data1 - n2.data1) + " and " + n2.data1 );
            }

        }

    }
    return n1;
}

public static void subtractPolynomials(Node n1, Node n2){

}

public static void multiplyPolynomials(Node n1, Node n2){

}
 } 
```

和主要方法：

```
 public class LinkedListsMain {

public static void main(String[] args) {

    Node head;
    Node head2;

    head = new Node(5,  1, new Node(7, 4,  new Node(9 ,5, new Node(12, new Node (15)))));
    head2 = new Node(3, 1, new Node(1, 4, new Node(29, 5)));
    Node.displayAll(head);
    Node.displayAll(head2);
    System.out.println("Length: " + Node.listLength(head));
    System.out.println("Length: " + Node.listLength(head2));
    Node.toPolynomial(head);
    Node.toPolynomial(head2);
    //Node.mergeLists(head, head2);
Node.addPolynomials(head, head2);
    System.out.println("Add completed");
    Node.toPolynomial(head);
} 
```

}

有任何想法吗？

为了提供更多信息，我使用链表作为更有效的数据结构。我正在输入两个链表并尝试将相应的元素添加在一起。我将附上我的整个代码！

例如：如果输入是 5x^1+7x^4+9x^5 + 3x^1+1x^4+29x^5

我希望程序输出 8x^1+8x^4+38^5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:06:46.613

根据我从您的问题中得到的信息，问题是当您的外部循环第二次执行时，`n2`已经到达了最后一个位置。

因为，您还没有再次`n2`在内循环中重新初始化。因此，它`null`与第一次迭代一样。所以你的外循环只会运行一次。

尝试使用以下方法更改您的方法：-

```
public static Node addPolynomials(Node n1, Node n2) {
    Node x = n1;
    Node y = n2;

    for(x = n1; x != null; x = x.next){
        for(y = n2; y != null; y = y.next){
            if(x.getData2() == y.getData2()){
                x.addData1(y);
                System.out.println("added " + (x.data1 - y.data1) + " and " + y.data1);
            }

        }
    }

    return x;
} 
```

# regex - 我怎样才能用正则表达式只得到双引号内的内容？

> ID：12860615
> 
> 赞同：-1
> 
> 时间：2012-10-12T13:53:41.563
> 
> 标签：regex, shell

如何从该字符串中获取没有双引号的 url：

```
<p>The document has moved <a href="http://xxx/aaa/index.html">here</a>.</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:10:05.413

假设 html 字符串位于名为“regexp.html”的文件中

```
$ ruby -n -e 'm = $_.match(/(http[^"]+)/); puts m if m' < regexp.html 
http://xxx/aaa/index.html 
```

这仅在 url 以“http”开头时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:02:11.130

您可以使用正则表达式模式`http:[^"]+`

# android - ActionBarSherlock 旧标题栏在旧 android 版本上仍然可见

> ID：12860620
> 
> 赞同：2
> 
> 时间：2012-10-12T13:54:04.633
> 
> 标签：android, android-actionbar, actionbarsherlock

我的界面是用 ActionBarSherlock 实现的，它适用于最新的 android 版本。但是这个android 2.1到android 2.3，它保留了旧的标题栏，我找不到删除它的方法。

我已经尝试过：

```
 if (android.os.Build.VERSION.SDK_INT < android.os.Build.VERSION_CODES.HONEYCOMB) {
            if (actionBar != null) {
                this.requestWindowFeature(Window.FEATURE_NO_TITLE);
            }

        } 
```

使用 android Window 对象和 Sherlock 的 Window 对象。不能让酒吧消失...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T10:38:18.750

例子：

```
<style name="Theme.MyApp" parent="Theme.Sherlock.Light.NoActionBar"> 
```

因此您可以将此主题应用于 AndroidManifest 文件中的活动：

```
<activity android:theme="@style/Theme.MyApp"></activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:09:41.773

res/values/style.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="@android:style/Theme.Black.NoTitleBar" />
</resources> 
```

res/values-v11/style.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AppTheme" parent="@android:style/Theme.Holo.NoActionBar" />
</resources> 
```

在 AndroidManifest.xml 中：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    ...
</application> 
```

# python - '连接' numpy 矩阵的行

> ID：12860622
> 
> 赞同：0
> 
> 时间：2012-10-12T13:54:16.473
> 
> 标签：python, numpy, concatenation

我有一个 numpy 矩阵

```
1 2
3 4 
```

我想“连接”矩阵的行以获得一个新矩阵

```
13 24 
```

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T18:00:59.473

在我看来，您更像是想要连接列。也许这样的事情就足够了？

```
In [25]: import numpy as np

In [26]: a = np.array([[1,2],[3,45]])

In [27]: a
Out[27]: 
array([[ 1,  2],
       [ 3, 45]])

In [28]: [''.join(str(x) for x in row) for row in a.T]
Out[28]: ['13', '245']

In [29]: np.array([''.join(str(x) for x in row) for row in a.T], int)
Out[29]: array([ 13, 245]) 
```

# linux - 把“人”换成“？”

> ID：12860627
> 
> 赞同：3
> 
> 时间：2012-10-12T13:54:20.720
> 
> 标签：linux, bash, unix, alias, manpage

我经常使用 R。在 R 中，您可以通过编写来调用函数的手册页

```
?print 
```

我已经习惯了，以至于我也间歇性地在 bash shell 窗口中键入它。现在，我已经设置了一个别名

```
?='man' 
```

这*几乎*削减了它：例如，我可以做到`? ls`。但是，我更希望它与`?ls`. 不幸的是，这个不起作用。当我在没有空格的情况下键入问号时，有什么方法可以让 bash 调用手册页？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T14:04:07.133

`bash`提供了一个处理未定义命令的钩子。由于您不太可能拥有任何名称以 开头的命令`?`，因此您可以使用此挂钩来处理任何运行此类命令的尝试：

```
command_not_found_handle () {
    if [[ $1 =~ ^\? ]]; then
        cmd=${1#\?}
        man $cmd
    else
        echo "$1: command not found" >&2
        return 127
    fi
} 
```

这个函数会进入你的`.bashrc`文件，所以它可以在任何 shell 中使用。当您尝试执行

```
$ ?ls 
```

未找到命令，钩子拦截失败的查找命令尝试，确定命令名称以 开头`?`，然后剥离`?`并将结果作为参数传递给`man`。其他未定义的命令仅产生类似于未找到`bash`命令的默认错误的错误消息，并以状态 127 退出（相同的状态`bash`通常用于表示未找到命令）。

# javascript - 无法在 Google 地图中显示 3 种地图类型

> ID：12860629
> 
> 赞同：8
> 
> 时间：2012-10-12T13:54:42.563
> 
> 标签：javascript, google-maps, google-maps-api-3

我是谷歌地图的新手。
我想在地图中显示具有三种不同地图类型（地图、卫星、混合）的谷歌地图。

为此，我正在编写类似的代码

```
function initialize() {
  var mapOptions = {
    center: new google.maps.LatLng(35.02, 111.02),
    zoom: 8, mapTypeControlOptions: {
  mapTypeIds: [google.maps.MapTypeId.ROADMAP, google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID]
    },
    mapTypeId: google.maps.MapTypeId.ROADMAP,
  };
  var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
```

但是使用上面的代码，我只能在地图中显示地图和卫星地图类型。第三个地图类型混合没有显示在地图中。另外，当我单击卫星类型时，我会得到一个选项，例如 Label 。所以我不想在卫星下显示标签选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T11:47:44.573

Maps v3 将始终将四个可用的 mapTypeIds（HYBRID、ROADMAP、SATELLITE、TERRAIN）压缩为两个按钮以及每个按钮的复选框。所以 SATELLITE + HYBRID 会给你一个带有*标签复选框的**卫星*按钮，而 ROADMAP + TERRAIN 会给你一个带有*地形*复选框的*地图按钮。*

 ***请注意，该复选框仅在您将鼠标悬停在**活动**按钮上时显示，因此您必须处于*地图*模式才能看到按钮下方的*地形*复选框，并且您必须处于*卫星*模式才能看到*标签*复选框！

有趣的是，实际上**有**一个 Hybrid 按钮，但它只有在您将 HYBRID 添加到 mapTypeIds**而不**添加 SATELLITE 时才可见。Terrain 按钮也是如此，它仅在您将 TERRAIN 添加到列表时才可见，而**不是**ROADMAP。

将 mapTypeControlOptions.style 切换到下拉框 (DROPDOWN_MENU) 而不是按钮 (HORIZONTAL_BAR) 也不会在结果下拉框中显示两个以上的项目。就像按钮一样，最多有两个下拉项，每个下拉项都有一个复选框。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T15:52:56.173

看起来`MapTypeId`您的地图上只能有 4 个标签中的 2 个。

但您可以`hybrid`通过设置强制地图

```
map.setMapTypeId(google.maps.MapTypeId.HYBRID) 
```

在任何时候，无论是用户点击链接、按钮、计时器、代码末尾等。

检查这个jsfiddle：http: [//jsfiddle.net/RASG/vDLfs/](http://jsfiddle.net/RASG/vDLfs/)

![ddd](../Images/2e42e1080e51c9956e12844f63629298.png)

* * *

我刚刚在 google 群组中发现了一些新东西。

当您添加`google.maps.MapTypeId.HYBRID`到`mapTypeIds`并且您已经拥有`google.maps.MapTypeId.SATELLITE`时，谷歌地图现在不再显示这两个选项，而是在您将鼠标悬停在“卫星”上时添加一个名为“标签”的选项。

效果与 v2 中的“混合”选项相同。

检查更新的 jsfiddle：http: [//jsfiddle.net/RASG/vDLfs/6/](http://jsfiddle.net/RASG/vDLfs/6/)

![eee](../Images/b69565629caae62ea6dc2c65f072570b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T23:49:30.033

将 Google 地球地图类型添加到显示器会禁用 ROADMAP 下的 TERRAIN 选项和 SATELLITE 下的 HYBRID 选项。***

# iphone - 如何使用点击点裁剪图像（如 Photoshop 中的多边形套索）？

> ID：12860634
> 
> 赞同：0
> 
> 时间：2012-10-12T13:54:57.273
> 
> 标签：iphone, xcode, uiimage

如何使用 iPhone 上的点击多个点来裁剪图像？看清楚你的图像（红点是点击点）。就像 Photoshop 动作中的多边形套索一样。

我不知道这个功能。

请给出一些想法、建议、示例源代码、pdf 等...无论我想要了解此功能的任何内容。现在我对这项任务视而不见。

在此先感谢您的帮助。

![在此处输入图像描述](../Images/80f9b71ca7691d0b020d64a51abec0aa.png)

# ruby-on-rails - Thinking Shpinx 在 rails 方法中只执行一个查询

> ID：12860639
> 
> 赞同：0
> 
> 时间：2012-10-12T13:55:15.347
> 
> 标签：ruby-on-rails, search, thinking-sphinx

我想在 ruby​​ on rails 控制器中使用 Thinking sqhinx 执行两个搜索查询。TS 已全部设置并正常工作。现在由于一些奇怪的原因，只执行了两个查询中的一个。

我的控制器中的代码如下所示：

```
 @s1 = Sample.search(:conditions => {:name=>@name})
    @s2 = Sample.search(:conditions => {:comment=>@comment}) 
```

现在根据rails控制台，只执行第一个（并返回预期的结果btw。）。

我的 sample.rb 模型看起来像

```
...    
define_index do
        indexes :name
        indexes :comment
end
... 
```

使用 Thinking Sphinx 2.0.10、Rails 3.1.1、PostgrSQL 8.4

# smtp - 使用 php 批量发送邮件，限制为 300 封电子邮件/小时，什么是 1 封电子邮件？

> ID：12860643
> 
> 赞同：0
> 
> 时间：2012-10-12T13:55:42.633
> 
> 标签：smtp, phpmailer, bulk-email

它只是一个知识问题。我们有发送 300 封电子邮件/小时的服务器限制。

我对什么是 1 封电子邮件感到困惑。

假设我通过 SMTP 发送一封包含 20 个用户的邮件（在 bcc/cc/to 中），它会被算作一封电子邮件还是 20 封？

如果有人知道，通过“to”或“cc”或“bcc”可以在一封邮件中包含多少用户，这也有限制吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:59:27.510

它因主机而异-您需要联系您的网络主机以了解他们的政策。

如果您希望发送大量电子邮件，我听说 RackSpace 对电子邮件/收件人没有上限。需要调查的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:01:42.500

我猜你的主机可能会有不同的解释，但如果你发送到 20 个地址，服务器必须实际发送电子邮件 20 次，每个地址一次。不可能为整个列表发送一封电子邮件，因为您的所有地址都在同一台服务器上的可能性很小。您不能发送到 gmail 服务器并期望 hotmail 地址来获取邮件。明白了吗？这就是我的解释。

# javascript - 如何在 ASP.Net Mvc3Razor 中动态隐藏 dropdownlist2 中的 dropdownlist1 选定值

> ID：12860646
> 
> 赞同：0
> 
> 时间：2012-10-12T13:55:44.223
> 
> 标签：javascript, asp.net-mvc-3, jquery

我正在使用 ASP.Net MVC3 Razor，我在 .cshtml 中有两个下拉列表，比如说 ddl1 和 ddl2。我在控制器中绑定了数据并使用 viewbag 发送到下拉列表。两个 ddls 都有相同的数据，如 A、B、C、D。如果我在ddl1中选择A，它应该在ddl2中隐藏A；如果选择 B 它应该在 ddl2 中隐藏 B。任何人都可以帮助我使用javascript或jquery。

这是我绑定的控制器..

```
 public ActionResult Index()
        {
            ViewBag.ddl1 = new SelectList(db.Collection, "ID", "Name");
            ViewBag.ddl2 = new SelectList(db.Collection, "ID", "Name");
            return View();
        } 
```

并且视图是（上述操作的.cshtml）

```
<table class="table">
    <tr>
        <td>      
       @Html.DropDownList("ddl1", "-select name-")
        </td>
        <td>
        @Html.DropDownList("ddl2","-select name-")
          </td>
    </tr>
    </table> 
```

提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:20:19.150

这是主要思想。假设我们有 2 个下拉列表：

```
<select id="ddl1">
    <option>Select</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
    <option value="D">D</option>
</select><br/><br/>
<select id="ddl2">
    <option>Select</option>
    <option value="A">A</option>
    <option value="B">B</option>
    <option value="C">C</option>
<option value="D">D</option>
</select>​ 
```

从 ddl2 中删除 ddl1 选定的值：

```
$('#ddl1').change(function() {
    $('#ddl2 option').each(function() {
        if ($(this).attr('value') == $('#ddl1 option:selected').attr('value')) {
            $(this).remove();
        }
    });
}); 
```

还要从 ddl1 中删除 ddl2 选定的值：

```
$('#ddl2').change(function() {
    $('#ddl1 option').each(function() {
        if ($(this).attr('value') == $('#ddl2 option:selected').attr('value')) {
            $(this).remove();
        }
    });
}); 
```

如果您想在每次更改时重新加载下拉值，只需再次调用您的下拉填充函数。我希望这个能帮上忙...

这里还有演示：http: [//jsfiddle.net/cJ8wN/8/](http://jsfiddle.net/cJ8wN/8/)

# facebook - 如何从用户的电话号码获取 Facebook 用户 ID

> ID：12860651
> 
> 赞同：1
> 
> 时间：2012-10-12T13:55:54.077
> 
> 标签：facebook, facebook-graph-api, search, mobile

是否可以通过手机号码搜索 Facebook 用户？就像我们使用电子邮件地址一样：

[https://graph.facebook.com/search?q=EMAILADDRESS&type=user&access_token=ACCESSTOKEN](https://graph.facebook.com/search?q=EMAILADDRESS&type=user&access_token=ACCESSTOKEN)

# java - doNothing() 不适用于 Spring 中模拟的 @Autowired 字段

> ID：12860654
> 
> 赞同：0
> 
> 时间：2012-10-12T13:56:08.840
> 
> 标签：java, spring, junit, mocking, mockito

我在测试类中自动装配了一个字段

```
@Autowired
private AbcDAO abcDAO; 
```

并像这样使用它

```
doThrow(new RuntimeException()).when(abcDAO).methodName(xyz); 
```

或者

```
doNothing().when(abcDAO).methodName(xyz); 
```

我在这样的spring文件中嘲笑了这个DAO类

```
<bean id="abcDAO" class="org.mockito.Mockito" factory-method="mock"  >
        <constructor-arg value="a.b.c.abcDAO" />
    </bean> 
```

我明白了`NotAMockException Argument passed to when() is not a mock.`

当我像这样使用 `@Mock 注释时

```
@Mock
    private AbcDAO abcDAO; 
```

直接在测试类中（而不是 @Autowiring 它并在 spring 中模拟），它工作正常。

为什么会这样？

编辑：

好的，那么让我告诉你这样做的原因。

我们有一个服务 X，我想为“X”的 API 编写 junit。Junits 的编写方式是我创建一个客户端并调用这些 API。我没有直接调用可以使用 @Mock 和 @Inject 模拟的方法。

我不确定是否清楚，但这是需要在 spring 文件中模拟时的用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:00:05.503

看到这个答案：[why-does-mockito-think-this-autowired-bean-is-null](https://stackoverflow.com/questions/12847545/why-does-mockito-think-this-autowired-bean-is-null)

`Mockito.mock`不带`String`但是`Class<?>`。正如在另一个问题中所述。真的有充分的理由尝试在 Spring 上下文中创建模拟吗？

# java - 单元测试“粘合”代码或没有任何真实逻辑的代码

> ID：12860657
> 
> 赞同：5
> 
> 时间：2012-10-12T13:56:22.093
> 
> 标签：java, unit-testing

我的问题将是一个简化的例子（用Java）：

```
public class VehicleRepository {
  // DAOs responsible for fetching objects from data store (injected)
  private IChassisDAO chassisDAO;
  private IEngineDAO engineDAO;
  private IWheelDAO wheelDAO;
  private IAccessoryDAO accessoryDAO;

  public Vehicle getLuxuryCar() {
    VehicleBuilder builder = getVehicleBuilder();
    builder.setChassis(chassisDAO.findBySize(ChassisSize.NORMAL));
    builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));
    builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.NORMAL));
    builder.setAccessories(accessoryDAO.findByType(Accessory.LUXURY));
    return builder.build();
  }

  public Vehicle getOffroadCar() {
    VehicleBuilder builder = getVehicleBuilder();
    builder.setChassis(chassisDAO.findBySize(ChassisSize.LARGE));
    builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));
    builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.LARGE));
    return builder.build();
  }

  // Similar operations ...
} 
```

你将如何对这个类进行单元测试？我已经对此进行了一些思考，并确定了一些选择：

**在不模拟构建器的情况下针对返回的车辆进行测试**
从接口的角度来看，这是最好的选择，但它不会是 VehicleRepository 上的独立单元测试。与仅测试 VehicleBuilder 相比，我看不到将 VehicleRepository 与 VehicleBuilder 一起测试的任何真正优势。VehicleBuilder 可能还具有复杂的逻辑（例如检查存在哪些附件），这会导致多个执行路径，这会使 VehicleRepository 的测试非常复杂。

**重构代码以测试构建器**
的状态 例如，将 getLuxuryCar 操作拆分为两个操作：

```
public Vehicle getLuxuryCar() {
  VehicleBuilder builder = getLuxuryCarBuilder();
  return builder.build();
}

// Visible for testing in the same package
protected VehicleBuilder getLuxuryCarBuilder() {
  VehicleBuilder builder = getVehicleBuilder();
  builder.setChassis(chassisDAO.findBySize(ChassisSize.NORMAL));
  builder.setEngine(engineDAO.findByPower(EnginePower.HIGH));
  builder.setWheelTemplate(wheelDAO.findBySize(WheelSize.NORMAL));
  builder.addAccessory(accessoryDAO.findByType(Accessory.LUXURY));
  return builder;
} 
```

我更喜欢状态测试而不是行为测试，而且测试可能会更有弹性，但我不太喜欢生成的代码（尤其是 getLuxuryCar() 方法，它并没有真正做任何事情）。

**模拟 VehicleBuilder 并测试行为**
我相信这样的单元测试将只是被测试的实际操作的复制品，不会增加任何真正的好处。它也将非常脆弱并且完全依赖于被测试操作的内部结构。一个可能的单元测试（使用 JMock）是这样的：

```
@Test
public void shouldBuildLuxuryCar() {
  context.checking(new Expectations() {{
    oneOf(chassisDAOmock).findBySize(ChassisSize.NORMAL);
    oneOf(vehicleBuilderMock).setChassis(with(any(Chassis.class)));

    oneOf(engineDAOmock).findByPower(EnginePower.HIGH);
    oneOf(vehicleBuilderMock).setEngine(with(any(Engine.class)));

    oneOf(wheelDAOmock).findBySize(WheelSize.NORMAL));
    oneOf(vehicleBuilderMock).setWheelTemplate(with(any(Wheel.class)));

    oneOf(accessoryDAOmock).findByType(Accessory.LUXURY));
    oneOf(vehicleBuilderMock).setAccessories(with(any(Set.class)));

    oneOf(vehicleBuilderMock).build();
  }});

  context.assertIsSatisfied();
} 
```

**不要对它进行单元测试**
我倾向于这个选项，因为我对任何替代方案都不满意，而且操作似乎不需要任何测试。为了澄清，我仍将单独对 VehicleBuilder 进行单元测试，而不是对 VehicleRepository 进行单元测试。然而，这似乎不是普遍的观点，例如可以从这个问题中看出：[单元测试 - 什么不测试](https://stackoverflow.com/questions/1316848/unit-testing-what-not-to-test)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:39:27.040

我认为您的观点都有其优点，这只是对我将要做什么的建议。

集成测试更适合此代码，使用生成模拟数据或具有测试数据源的注入 DAO 对象。

但是，您的问题是针对单元测试的，在这种情况下，我认为**针对返回的车辆对象进行测试（不模拟构建器）**是最好的选择。为了避免复杂性，我将继续对返回的车辆进行简单的测试（检查它是否不为空，并且可能是它的类不变量），而不是关于车辆类型的详细信息（此测试留给车辆的制造商/生产商）。

该测试的优点是：

1.  如果车辆/制造商后来扩展为*需要*额外的属性（例如，所有车辆都应该有刹车），但开发人员忽略更新存储库，测试将失败。
2.  它将充当健全性测试，至少确保代码无异常执行。

# cassandra - Cassandra：数据复制不起作用？

> ID：12860660
> 
> 赞同：1
> 
> 时间：2012-10-12T13:56:35.660
> 
> 标签：cassandra

我们有一个 6 节点的 cassandra 集群，每秒读取次数非常多，写入次数很少*。*整个应用程序包括：

*   使用一个 cassandra 节点的 Web 应用服务器
*   5 x web 服务机器，每台使用自己的 cassandra 节点（pycassa 的 Pool server_list 始终是一个节点）

与 cassandra 对话的 Web 应用程序正在执行读写操作（但很少，只有当有人实际使用应用程序 UI 时，这种情况并不经常发生）。然而，Web 服务的负载非常重，来自 3rd 方服务的流量。负载均衡器将流量引导到所有 5 台服务器，每台服务器用大量 get() 和 multiget() 请求轰炸自己的 cassandra 节点（物理上位于另一台服务器中）。偶尔会使用 set() ，但这就像每 10000 次读取或其他东西一样。

有了这种用法，我们决定使用 6 的复制因子。如果每个 cassandra 都有 100% 的数据，那么读取应该更快，负载应该更均衡。我们更新了 keyspace strategy_options 并在每个节点上运行 nodetool repair 来传输数据。一切顺利。

现在很奇怪的是：所有六个 cassandra 节点的 CPU 使用率都很高。在 web 服务使用的五个节点的情况下可以理解，但我们无法解释为什么 webapp cassandra 节点也消耗那么多 CPU，就好像它正在执行大量读取一样。就好像复制根本不起作用 - 看起来每个 cassandra 节点都会在 get() 发生并且整个环受到极大压力时与所有其他节点进行通信。

我做了另一个实验来证明这一点，我关闭了其中一个 Web 服务器，我正在查看相应的 cassandra 节点。服务器宕机后，我预计这个 cassandra 节点上的 CPU 使用率接近于零，因为没有其他机器指向它。但它不是零，略有下降，但仍处于非常高的水平（60% 的 CPU 使用率）。

我们正在使用 pycassa，我们没有操纵一致性级别，所以它是默认的 ConsistencyLevel.ONE

我希望你明白我的意思......如果复制因子等于环中的节点数，并且读取一致性级别是默认值（ONE），那么每个节点在读取方面应该是独立的：如果没有人在做来自给定节点的任何读取，该节点上的 CPU 使用率应该是最小的，对吗？然而，即使我们断开唯一看到该节点的客户端，我们仍然会观察到 CPU 使用率很高，就好像有人仍在继续读取它一样。这个负载来自哪里，怎么可能调查发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T16:58:48.200

如果我错了，请纠正我，但我猜您在集群中的节点上看到的负载是在后台发生的读取修复。当您在集群中的节点上读取 ConsistencyLevel.ONE 时，数据将立即返回，并且读取将在后台触发读取修复，这将向所有其他副本发送摘要查询以获取所请求的数据以确保一致性。
由于复制因子为 6（所有节点上的所有数据），因此对于每次读取，都会向所有 6 个节点发送读取修复请求。

[Cassandra 读取修复](http://wiki.apache.org/cassandra/ReadRepair)

# jasper-reports - 表格上的超链接在 JasperReports Server 4.7.0 中不起作用

> ID：12860664
> 
> 赞同：0
> 
> 时间：2012-10-12T13:56:46.707
> 
> 标签：jasper-reports, jasperserver

我已经安装了 JasperReports Server 4.7.0 并设计了一个带有表格的报告，表格包含两个字段，一个字段包含超链接。

报告运行完美，但是当我单击超链接字段时，格式隐藏列选项将无法打开超链接报告。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T04:30:10.253

最简单的解决方案是从表格组件中删除列标题并添加一个列标题带，您可以在其中添加表格字段的列，然后添加超链接。

# objective-c - 如何为 PDF 文件添加“水印”？

> ID：12860666
> 
> 赞同：0
> 
> 时间：2012-10-12T13:56:47.593
> 
> 标签：objective-c, macos, cocoa, pdf, watermark

好的，我熟悉整个概念，并且我已经设法为`NSImage`.

这就是我的做法：

```
- (void)maskOne:(NSString*)filename atTarget:(NSString*)folder
{
    NSString* target = [self getTargetPathForFile:filename path:folder];

    NSImage* newImage;

    NSImage* oldImage = [[NSImage alloc] initWithContentsOfFile:filename];

    newImage = [self maskImage:oldImage withMask:[self imageWithSubviews]];

    [self saveImage:newImage asPNG:target]; 
} 
```

where从嵌入的黑色背景框中`[self imageWithSubviews]`返回一个，其中包含一些透明文本。`NSImage`

* * *

现在，在我的一个更大的应用程序中，作为一个子项目，我试图通过应用水印来“保护”导出的 PDF（没什么复杂的，只是每页中间的一段简单的文本**，**或其他东西）。

你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:46:06.047

您可以使用 CoreGraphics 框架来修改 PDF 内容 - 请阅读Apple关于该主题[的官方文档。](https://developer.apple.com/library/mac/ipad/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/dq_pdf/dq_pdf.html#//apple_ref/doc/uid/TP30001066-CH214-TPXREF101)

# sql-server - 如何创建从 Postgresql 8.3 到 SQL Server（2000 和 2008）的 dblink？

> ID：12860668
> 
> 赞同：0
> 
> 时间：2012-10-12T13:56:52.327
> 
> 标签：sql-server, postgresql, dblink, postgresql-8.3

我有一个 Postgresql 数据库，需要从两个 SQL Server（一个 SQL Server 2000 和一个 SQL Server 2008）读取数据。

我想为 SQL Server 设置两个 dblink。

在谷歌搜索、论坛、阅读文档之后，我很难找到准备好生产的东西。

我可以使用什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:01:42.950

您需要安装 pl/perlu 和[dbilink](http://pgfoundry.org/projects/dbi-link)，它们可以让您使用 Perl 的任何驱动程序。这在基于 unix 的系统上已经足够简单了，但在 Windows 上可能会遇到困难/不切实际/痛苦的结局。

或者，升级并尝试最新版本的 PostgreSQL 中的一种[外部数据包装器。](http://wiki.postgresql.org/wiki/Foreign_data_wrappers#odbc_fdw)无论如何升级[可能是值得的](http://www.postgresql.org/support/versioning/)，因为 8.3 即将结束，而 9 系列应该有一些重大改进（特别是如果 PG 在 Windows 上）。

或者，从 SQL Server 端推送数据——您可以通过 ODBC 使 PostgreSQL 可用。

# jquery - 如何单击导致其他元素的鼠标悬停事件的div

> ID：12860670
> 
> 赞同：0
> 
> 时间：2012-10-12T13:57:04.850
> 
> 标签：jquery

我对如何处理以下问题感到困惑。我有一个表格，并且在符合我的条件的特定行上，当用户将鼠标悬停在该行上时，会在鼠标指针下方显示另一个 div。现在我必须在该 div 内单击。但是那个 div 正在改变它的位置，就像移动鼠标一样。下面是我正在尝试的代码

```
 $('#dataTable td').live('mousemove', function (e) {
    if( $(this).hasClass('false'))
        $('.toolTip').css({"top": (e.pageY+10)+"px", "left": (e.pageX - 10)+"px"}).show();
});

$('#dataTable td').live('mouseout', function (e) {
        $('.toolTip').hide();
}); 
```

因此，当我到达特定的 . 现在我如何在该工具提示中单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:01:14.790

您将需要使用`mouseover`event 而不是`mousemove`. 此外，请确保将鼠标悬停在行下方的 DIV 放置在该行与新 DIV 之间没有间隙，否则它将隐藏您的工具提示。

例子：

```
$('#dataTable td').live('mouseover', function (e) {
    if( $(this).hasClass('false'))
        $('.toolTip').css({"top": (e.pageY+10)+"px", "left": (e.pageX - 10)+"px"}).show();
});

$('#dataTable td').live('mouseout', function (e) {
        $('.toolTip').hide();
}); 
```

# c# - Double.ToString() - 格式说明符“乘”百万？

> ID：12860680
> 
> 赞同：1
> 
> 时间：2012-10-12T13:57:24.333
> 
> 标签：c#, .net, format

是否有自定义格式说明符可以将每 1000 或 1000,000 中的数字相乘？例如，给定`<some specifier>`自定义说明符：

```
double value = 1;
Console.WriteLine(value.ToString("#,##0<somespecifier>", CultureInfo.InvariantCulture));
// Displays 1,000,000 
```

这基本上与“，”自定义说明符相反：

```
double value = 1234567890;
Console.WriteLine(value.ToString("#,##0,,", CultureInfo.InvariantCulture));
// Displays 1,235 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:15:11.517

没有内置类似的东西，但您可以轻松地创建一个扩展方法来做到这一点：

```
public static class DoubleExtensions
{
    public static string ToMillionString(this double value)
    {
        return (value * 1000000.0).ToString("#,##0", CultureInfo.InvariantCulture);
    }
} 
```

用法如下：

```
double value = 1234567890;
Console.WriteLine(value.ToMillionString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:31:22.610

“‰”自定义说明符可以做到这一点，但它也添加了“％”符号......

[http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SpecifierPerMille](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx#SpecifierPerMille)

# vba - Excel VBA - 设置 SeriesCollection = 2D 数组

> ID：12860682
> 
> 赞同：0
> 
> 时间：2012-10-12T13:57:40.210
> 
> 标签：vba, excel, multidimensional-array, charts

我有一个二维数组如下

```
Dim plot() As Double
ReDim plot(0 to 1, 0 to arryLength) ' arryLength is some integer value 
```

维度“0”指的是绘图的 x 轴值，维度“1”指的是 y 轴值。我需要使用这个数组来设置预先存在的图上的值。我知道使用一维数组你可以做类似的事情

```
ActiveSheet.ChartObjects("Chart 1").Activate
ActiveChart.SeriesCollection(1).XValues = xaxis()
ActiveChart.SeriesCollection(1).Values = yaxis() 
```

如何设置它设置`.XValues = plot(@ Dimension 0)`和`.Values = plot(@ Dimension 1)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T21:21:18.183

也许：

```
With ActiveSheet.ChartObjects("chart 1").Chart
    .SeriesCollection(1).XValues = Application.Transpose(Application.Index(plot, 0, 1))
    .SeriesCollection(1).Values = Application.Transpose(Application.Index(plot, 0, 2))
End With 
```

# javascript - “必需”属性问题

> ID：12860687
> 
> 赞同：1
> 
> 时间：2012-10-12T13:57:53.203
> 
> 标签：javascript, asp.net, html

我`"required"`在我的 .aspx 页面的一个部分中为某些输入字段提供了属性，因此该部分内的按钮需要验证该字段。在同一页面的其他部分中还有其他按钮。

现在的问题是这个字段在所有按钮点击事件中得到验证。`"formnovalidate"`我可以通过将属性赋予页面中的其余按钮来解决此问题。

还有其他（更好的！）方法可以解决这个问题吗？

我不想`"required"`通过编写一些 javacsript 验证来与属性妥协。此外，我不想在页面的其他按钮中编写任何代码/添加任何属性。有没有其他更好的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:03:00.833

您可以使用验证[组 msdn](http://msdn.microsoft.com/en-us//library/system.web.ui.webcontrols.basevalidator.validationgroup.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T12:36:21.433

有一个简单的解决方案，我错过了：

```
 function assignAttribute() {
        var b1 = document.getElementById('txtName');
        b1.setAttribute("required", "reqired");
        } 
```

我们可以通过按钮的 OnClientClick 上的 javascript 函数分配“必需”属性。

# android - 手机休眠时保持位置监听器处于活动状态

> ID：12860691
> 
> 赞同：1
> 
> 时间：2012-10-12T13:58:08.777
> 
> 标签：android, location

我在 MLocation 类中声明的 Android 小部件中有一个位置侦听器，

私有静态 MyLocationListener locationListener；

小部件启动一个服务，该服务又创建 MLocation 类。MLocation 类在创建时创建并注册位置侦听器。

一切正常，直到手机进入睡眠状态。当手机休眠时（休眠后的某个时间），Android 会终止该服务和它创建的所有类（MLocation 也是如此）。在手机解锁时，Android 会重新创建服务，然后创建 MLocation 类等。在手机睡眠期间，位置不再监听变化（因为它被杀死了）。有没有办法让位置监听器保持活跃，即使手机处于休眠状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:05:01.140

不会。当手机休眠时，不会基本上关闭 CPU，因此没有应用程序在运行。如果您需要在手机休眠时监听位置变化，您需要通过获取唤醒锁来防止手机休眠。请注意，如果您这样做，您将很快耗尽电池，并且您的用户将卸载您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:09:05.377

如果您想在手机休眠时跟踪位置，则需要[部分唤醒锁定](http://developer.android.com/reference/android/os/PowerManager.html)。它会很快耗尽电池电量，因为您实际上是在阻止手机进入睡眠状态，即使用户按下电源按钮（但屏幕仍然可以关闭）。

```
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");
wl.acquire(); 
```

您需要通过清单请求权限，并且它会在 Google Play 中可见（假设这是您放置应用程序的地方），因此高级用户应该知道其含义。

现在我会说你会在任何地方看到的内容：尽量避免使用部分唤醒锁定，因为它会耗尽电池并且人们会讨厌它。

OTOH，如果您的应用程序绝对需要它，这就是它必须的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:11:51.133

你应该只依赖你的`LocationListener`，你需要“重新思考”你的应用程序的所有结构。与实际位置的其他来源一起，注册 a`LocationChangedReceiver`可能是一个不错的选择。

有关更多详细信息，请查看@Reto Meier 撰写的这篇精彩文章：[深入了解 Android 上的位置](http://android-developers.blogspot.com/2011/06/deep-dive-into-location.html)。

# c# - 本机应用程序的 App.xaml

> ID：12860692
> 
> 赞同：0
> 
> 时间：2012-10-12T13:58:19.663
> 
> 标签：c#, c++, wpf, resources

我有 1 个 dll（我们称之为 UI）和两个可以使用它的应用程序： 1\. App1 - C# 应用程序，直接使用它 2\. App2 - 通过 C++ CLI 包装器使用它的 C++ 应用程序

我需要将 UI.dll 的一些 ResourceDictionaries 添加到 App1 的 app.xaml 才能正常工作。但是在 App2 中没有办法做同样的事情。

有任何想法吗？

PS我需要使用使用应用范围资源的FindResource()函数，这就是我需要App.xaml的原因

# php - .htaccess 多 URL 重写

> ID：12860695
> 
> 赞同：4
> 
> 时间：2012-10-12T13:58:37.040
> 
> 标签：php, .htaccess, url, url-rewriting, rewrite

我有这个规则：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ profil.php?upime=$1 
```

它正在工作。现在我想知道如何重写另一个页面的 URL：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ profil.php?upime=$1
RewriteRule ^(.*)$ novica.php?nid=$2 - I did this, but is not working. 
```

我该怎么做才能将两个规则都放在一个`.htaccess`文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:01:38.057

你不能像在你的例子中那样做，因为你正在重写所有东西：`^(.*)$`.

如果您需要两个不同的规则，则需要选择要写入哪个最终目的地的 url。

一个示例，您将以不同的字符串开头的不同 url 重写到不同的目的地：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^starts_with_this(.*)$ profil.php?upime=$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^starts_with_something_else(.*)$ novica.php?nid=$1 
```

# session - 如何将用户与 symfony 中的会话关联起来

> ID：12860697
> 
> 赞同：0
> 
> 时间：2012-10-12T13:58:45.167
> 
> 标签：session, symfony

我有一个带有用户实体的 symfony 应用程序。当用户进行身份验证时，它有一个会话（正常会话机制）条目和一个用户条目。

我有一个访问 symfony 应用程序并将参数传递给它的网络服务（例如用户名）。我想要的是 symfony 只有在用户仍然连接时才做某事（即他的会话没有过期）。

我如何知道与该用户关联的 session_id 是什么？将会话扩展为具有像 user_id 这样的附加字段然后有一个关联实体可以在会话上执行请求（我的会话存储在 mysql 表中）以检索与用户关联的会话是否是个好主意？

# wix - WiX：是否可以在安装过程中自定义 [ProductName]？

> ID：12860702
> 
> 赞同：1
> 
> 时间：2012-10-12T13:59:07.543
> 
> 标签：wix, wix3.6

我正在寻找如何在多实例安装过程中（在 InstanceTransform 过程之后或期间？）自定义 [ProductName] 属性的秘密方法。

问题是，当您尝试卸载实例时，通常很难识别需要卸载的内容：那些“预定义”产品名称，如“App Instance 1”、“App Instance 2”等，对您没有帮助。应该去注册表和刷新内存...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T07:06:58.333

位于[`Instance`](http://wix.sourceforge.net/manual-wix3/wix_xsd_instance.htm)element 下[`InstanceTransforms`](http://wix.sourceforge.net/manual-wix3/wix_xsd_instancetransforms.htm)并描述特定实例的元素具有属性`ProductName`。这基本上可以定义`ProductName`每个实例的产品名称（我的意思是属性）。

如果您深入研究多实例行为，您可能会发现[这篇文章](http://ysdevlog.blogspot.com/2011/08/revisited-multiple-instance.html)很有趣。

# silverlight - Silverlight - C++ dll 错误图像格式异常

> ID：12860705
> 
> 赞同：1
> 
> 时间：2012-10-12T13:59:14.220
> 
> 标签：silverlight, silverlight-4.0, badimageformatexception

我有一个从 C++ 项目构建的 dll。我在 Silverlight 项目中间接引用了该 dll（我的意思是，Web 项目引用了一个 C# 项目，而 C# 项目又使用了这个 dll）。现在每次我构建我的 Silverlight 应用程序时，我都会得到这个

```
 Error   1   The "CreateRiaClientFilesTask" task failed unexpectedly.
System.Web.HttpException (0x80004005): Could not load file or assembly 'MyDll' or one of its dependencies. An attempt was made to load a program with an incorrect format. ---> System.Configuration.ConfigurationErrorsException: Could not load file or assembly 'MyDll' or one of its dependencies. An attempt was made to load a program with an incorrect format. ---> System.BadImageFormatException: Could not load file or assembly 'MyDll' or one of its dependencies. An attempt was made to load a program with an incorrect format. 
```

我的silverlight web 项目引用其他C# 项目没有任何问题。如果我删除对 C++ dll 的引用，一切似乎都很好。

我厌倦了各种选​​择两种不同的东西

1.  我用 32 位和 64 位构建了 c++ dll，但错误没有变化
2.  我在构建 c++ dll 时将 .net 配置文件更改为客户端版本，但仍然没有变化

（我在 Silverlight 5 上）

有人可以帮助我了解发生了什么吗？

谢谢K

# f# - 用于实现实现接口的“虚拟”属性的 F# 语法

> ID：12860712
> 
> 赞同：3
> 
> 时间：2012-10-12T13:59:56.327
> 
> 标签：f#, c#-to-f#

我需要在基类中实现[IDataErrorInfo接口。](http://msdn.microsoft.com/en-us/library/aa97e8s4%28v=vs.90%29.aspx)该接口需要一个属性和一个索引器。我想为两者提供一个默认实现并允许子类覆盖它。我似乎无法使用接口实现的语法来使用“虚拟”实现的语法！例如：

```
type ViewModelBase() =
  interface IDataErrorInfo with
    abstract Error : string with get
    default this.Error with get() = "" 
```

给出以下编译错误

> 错误 1 ​​成员定义中出现意外的关键字“抽象”。预期的“成员”、“覆盖”或其他标记。D:\MinorApps\VetCompass\VetCompass\ViewModel\ViewModelBase.fs 18 7 VetCompass
> 
> 错误 2 模式 D:\MinorApps\VetCompass\VetCompass\ViewModel\ViewModelBase.fs 中此点或之前的不完整结构化构造 19 7 VetCompass

我什至不知道从哪里开始索引器！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:06:58.470

所有接口实现都是显式的，这意味着当被视为类的成员时，接口的方法将是私有的。因此，您不能在实现中使用`abstract`and`default`修饰符。相反，您需要添加一些重复项：

```
type ViewModelBase() =
    // declare a new virtual property
    abstract Error : string
    default this.Error = ""

    interface IDataErrorInfo with
       // pass through to the virtual property implementation
       member this.Error = this.Error 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T16:43:23.173

[对象表达式](http://msdn.microsoft.com/en-us/library/dd233237.aspx)通常可以用来代替抽象类和虚拟方法。您可以通过提供给“工厂”函数的参数来控制行为。像这样的东西：

```
type IMyInterface =
  abstract SayHello : unit -> string
  abstract Item : string -> obj with get

let makeMyInterface sayHello (lookup: IDictionary<string, obj>) =
  { new IMyInterface with
      member x.SayHello() = sayHello()
      member x.Item 
        with get name = lookup.[name] } 
```

这可能不适用于您的情况，因为您受到现有框架的约定的限制。但在某些情况下，它可能是一个不错的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:34:57.953

要使用虚拟实现来实现 IDataErrorInfo 和 INotifyPropertyChanged，代码如下：

```
type ViewModelBase() =
    let propertyChangedEvent = new DelegateEvent<PropertyChangedEventHandler>()

    abstract Error : string with get
    default this.Error with get() = ""

    abstract Item : string -> string with get
    default this.Item with get(name) = ""

    interface INotifyPropertyChanged with
        [<CLIEvent>]
        member x.PropertyChanged = propertyChangedEvent.Publish
    member x.OnPropertyChanged propertyName = 
        propertyChangedEvent.Trigger([| x; new PropertyChangedEventArgs(propertyName) |])

    interface IDataErrorInfo with
       // pass through to the virtual property implementation
       member this.Error = this.Error
       member this.Item with get(x) = this.Item(x) 
```

# php - 教义避免自动补水

> ID：12860717
> 
> 赞同：0
> 
> 时间：2012-10-12T14:00:08.847
> 
> 标签：php, symfony, doctrine

我正在使用旧版本的 DoctrineExtension.Tree 并且我没有 buildTree。所以我想做同样的事情，但我一直遇到一个问题：每次我使用 findHierarchy（见下文）并迭代层次结构中的所有孩子时，它都会两次获得所有内容。因为 Doctrine 仍然查询以查找子项（即使我将它们加载到 find Hierarchy 中）这是一些有用的代码：

我的实体中的两个功能

```
/**
 * Add children
 *
 * @param BGCom\MontreuxBundle\Entity\Category $children
 */
public function addChildren(\BGCom\MontreuxBundle\Entity\Category $children)
{
    $children->setParent($this);
    $this->children[] = $children;
}

/**
 * Get children
 *
 * @return Doctrine\Common\Collections\Collection
 */
public function getChildren()
{
    return $this->children;
} 
```

在我的仓库中找到层次结构：

```
public function findHierarchy() {
    $qb = $this
        ->createQueryBuilder('node')
        ->where('node.lvl < 2')
        ->andWhere('node.in_menu = 1')
        ->orderBy('node.root, node.lvl', 'ASC');

    // set hint to translate nodes
    $query = $qb->getQuery()->setHint(
        Query::HINT_CUSTOM_OUTPUT_WALKER,
        'Gedmo\\Translatable\\Query\\TreeWalker\\TranslationWalker'
    );
    $res = $query->getResult();
    //Now build the right entity
    // build tree in english
    $i = 0;
    $j = 0;
    // We rebuild the tree
    $parent = array();
    while($i < count($res)) {
        $cur = $res[$i];
        $parent[] = $cur;
        $i++;
        while ($i < count($res) && $res[$i]->getRoot() === $cur->getId()) {
            $cur->addChildren($res[$i]);
            $i++;
        }
    }
    return $parent;
} 
```

我的观点：

```
{% for root in trees %}
<li>
    <a href="{{ category_path(root) }}">{{ root.name }}</a>
    <div class="box blue-gradient">
    <ul class="lvl1">
       {% for twig in root.getChildren() %}
           <li><a href="{{ category_path(twig)}}">
               {{ twig.name }}
           </a></li>
       {% endfor %}
    </ul>
    </div>
</li>
{% endfor %} 
```

所以要明确一点：有没有办法避免教义询问实体中是否已经存在一些孩子？

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:45:08.720

Doctrine2 永远不会实例化同一数据库行的 2 个实例。

您可能有两次相同的对象。

您可以通过执行以下操作避免在数组中设置`Category`两次：`$children`

```
public function addChildren(\BGCom\MontreuxBundle\Entity\Category $children)
{
    $children->setParent($this);

    if (!$this->children->has($children)) {
        $this->children[] = $children;
    }   
} 
```

# javascript - 如何在网站上做一个向导？

> ID：12860718
> 
> 赞同：3
> 
> 时间：2012-10-12T14:00:14.513
> 
> 标签：javascript, http, browser, http-post

在一个网站中，我想实现一个[向导](http://en.wikipedia.org/wiki/Wizard_%28software%29)。它应该看起来像一系列表格。

我的要求是：

*   用户应该能够使用后退和前进浏览器按钮，而不会被提示重新提交表单（来回时）。
*   如果用户在先前填写的页面上返回或前进，则应自动完成这些字段
*   如果用户尝试访问一个页面而没有填写前面的步骤，他应该被相应地重定向（最后一个需要的页面）。
*   用户应该能够在离开和回来后恢复表单完成。
*   在我的模型中，每一页都需要填写前一页。每个页面都有自己的验证。
*   网址应该很漂亮。
*   该向导应该在没有 javascript 的情况下工作（但不是强制性的）。

你将如何实施它？（一系列http post表单，http get表单，是否通过javascript提交？）

* * *

想法：

我计划将所有信息存储在会话中，并在向导结束时将信息保存在数据库中并删除当前会话信息。这样我就可以自动完成这些字段，并知道用户在完成向导时的位置。

我的主要担忧：

*   如果我使用 http 帖子表单实现，浏览器将提示重新提交每个表单（我不知道如何控制它）
*   如果我使用 http GET 表单实现它，则 URL 会充满信息，并且可能会很长。这不是 GET 请求的手段。
*   如果我通过 javascript 通过 http post 提交每个表单，将不会有提示，但我的向导将无法使用 javascript（也许解决方案是覆盖默认表单行为以使其使用和不使用 javascript）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T20:55:54.727

我不建议使用 session 来存储任意数据！如果您最终使用会话进行登录身份验证，这往往会很快变得混乱，并且还会混淆安全模型。将您的身份验证与设置数据分开，并专门为设置创建一个表，或使用 javascript localStorage！

在您的情况下，您所描述的内容对我来说听起来很像一种长表单，它具有显示/隐藏功能，具有多个表单部分，并增加了持久存储的怪癖！

换句话说，而不是`form1 > form2 > form3 > form4 > done`

`form_section_1 > validate, save data, and then display form_section_2 and hide form_section_1 > validate, save data, and then display form_section_3 and hide form_section_2 > etc > true form submit once`

对于没有 javascript 的用户，只需在提交任何部分时在所有部分中验证他们在 php 中的信息。如果您真的想将其存储在边缘情况下，您可以将其 session_id 标识的信息存储到设置表中。

在这种情况下为简单起见，我将使用 localStorage 存储每次验证的所有数据，并使用 javascript 来防止意外离开主窗体。如果你真的必须通过支持 ie7 ( [http://caniuse.com/#search=localStorage](http://caniuse.com/#search=localStorage) ) 来使你的生活复杂化，然后检测 localStorage 并在它不存在的情况下，将数据传递给一个 php 脚本，然后将其放入单个数据容器对象并将其全部转换为单个 json 包，以保存在会话中的单个变量中，或者更好的是，保存在数据库的设置表中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T14:10:01.830

我会使用 PHP 会话变量在向导的不同页面之间存储填充的数据。通过使用 html 表单，如果您返回浏览器历史记录，您将收到重新发送数据的提示，我不知道如何解决这个问题...虽然使用 PHP 存储变量很容易，但请提供表单`method=post`并使用`$_REQUEST`命令来检索PHP 文档中的信息以避免使用`GET`. 祝你好运，如果我想到什么会更新。

# android - Android - 按钮必须点击两次才能工作

> ID：12860719
> 
> 赞同：1
> 
> 时间：2012-10-12T14:00:16.577
> 
> 标签：android, button, onclicklistener

我有一个带有一些按钮的栏和下面的 web 视图的活动。每个按钮都关联一个 url，我执行`onClickListener`加载 webview 中关联的 url。

我的问题是按钮必须在 webview 加载 url 之前单击两次。

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:weightSum="1">

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".005"
        android:background="@drawable/gradient"
        android:orientation="horizontal" >

        <LinearLayout
            android:id="@+id/linearLayout2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight=".1"
        >

            <Button
                android:id="@+id/db1"
                android:layout_width="140dp"
                android:layout_height="60dp"
                android:layout_marginLeft="100dp"
                android:layout_marginTop="10dp"
                android:background="@android:color/transparent"
                android:text="VETRINA"
                android:focusableInTouchMode="false"
                android:textColor="@color/silver"
                android:textSize="20dp" />

            <Button
                android:id="@+id/db2"
                android:focusableInTouchMode="false"
                android:layout_width="140dp"
                android:layout_height="60dp"
                android:layout_marginTop="10dp"
                android:background="@android:color/transparent"
                android:text="ANNUNCI"
                android:textColor="@color/silver"
                android:textSize="20dp" />

            <Button
                android:id="@+id/db3"
                android:layout_width="140dp"
                android:layout_height="60dp"
                android:layout_marginTop="10dp"
                android:focusableInTouchMode="false"
                android:background="@android:color/transparent"
                android:text="NOTIZIE"
                android:textColor="@color/silver"
                android:textSize="20dp" />

            <Button
                android:id="@+id/db4"
                android:layout_width="140dp"
                android:layout_height="60dp"
                android:focusableInTouchMode="false"
                android:layout_marginTop="10dp"
                android:background="@android:color/transparent"
                android:text="UTILI"
                android:textColor="@color/silver"
                android:textSize="20dp" />

            <Button
                android:id="@+id/db5"
                android:layout_width="140dp"
                android:layout_height="60dp"
                android:layout_marginTop="10dp"

                android:background="@drawable/round_corner"
                android:text="YOUTUBE"
                android:focusableInTouchMode="false"
                android:textColor="@color/silver"
                android:textSize="20dp" />
            <Button
                android:id="@+id/db6"
                android:layout_width="140dp"
                android:layout_height="60dp"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:layout_marginTop="10dp"
                android:background="@android:color/transparent"
                android:text="ANNUNCI"
                android:textColor="@color/silver"
                android:textSize="20dp" 
                />

        </LinearLayout>

    </LinearLayout>

    <com.pack.MyWebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight=".995" />

</LinearLayout> 
```

这是`onClickListener`

```
private void initButton(){
    bottoni = new Button[6];
    bottoni[0] = (Button)findViewById(R.id.db1);
    bottoni[1] = (Button)findViewById(R.id.db2);
    bottoni[2] = (Button)findViewById(R.id.db3);
    bottoni[3] = (Button)findViewById(R.id.db4);
    bottoni[4] = (Button)findViewById(R.id.db5);
    bottoni[5] = (Button)findViewById(R.id.db6);
    for(int i=0;i<6;i++)
        setListB(bottoni[i],buttons[i]);
    }
}

private void setListB(Button b,String content_b){
    String[] all = content_b.split("@@");
    final String title = all[0];
    final String link = all[1];
    b.setText(title);
    b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            web.loadUrl(link);
        }
    });
} 
```

我该如何解决？谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T16:08:24.393

尝试更改方法名称（可能会混淆编译器）并在使用多个按钮时使用 switch。不确定方法名称，请尝试一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T14:18:08.063

`clickedButton`在类级别创建变量

`View clickedButton;`

并且`onClick`进行如下（我假设`onClick`所有按钮都是通用的）。

```
public void onClick(View v) {

    if (clickedButton == null) {
        clickedButton = v;
    } else {
        if (clickedButton == v) {

            // load url and set clicked button to null
            loadUrl();
            clickedButton = null;
        } else {
            clickedButton = v;
        }
    }

} 
```

祝你好运 ：）

# c# - 需要控件名称

> ID：12860720
> 
> 赞同：0
> 
> 时间：2012-10-12T14:00:20.880
> 
> 标签：c#, asp.net, telerik, rad

当我单击图像按钮时，我需要打开一个弹出窗口，其中有一个文本框、确定和取消按钮。为此，我想到了使用 RadWindow。

但我需要一些完全符合这个要求的控制。我不知道该使用哪个控件。目前我正在**Telerik**使用**aspx**工作。我需要控件名称。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:15:08.700

是的，您可以使用`RadWindow`控制

链接：[http ://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html](http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html)

示例添加控件`ContentContainer property`

```
TextBox textBox = new TextBox();
radWindow.ContentContainer.Controls.Add(textBox); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-12T14:18:30.330

在 OnClientClick 中使用 JavaScript 怎么样？

```
OnClientClick="return confirm('Are you sure you want to do this?')"> 
```

如果用户按下“OK”，这将返回 true，如果用户按下 Cancel，则返回 false。

# flex4 - Flex 4.5 Mobile - 在自定义项渲染器中设置 StyleableTextField 的宽度

> ID：12860726
> 
> 赞同：0
> 
> 时间：2012-10-12T14:00:42.050
> 
> 标签：flex4, flash-builder, flex4.5, itemrenderer

我正在为列表创建一个自定义项目渲染器，以便我可以使用多个 StyleTextFields 拥有多列数据。

我正在研究 MXML 和 Actionscript 的混合体（因为 StyleableTextField 只能通过 Actionscript 创建）。

但是，我在让宽度对齐时遇到问题。我用来设置宽度的 Actionscript 如下：

```
var id:StyleableTextField = StyleableTextField(createInFontContext(StyleableTextField));                
id.width = (itemContainer.width * 30/100);
id.htmlText = "Text Here";

var desc:StyleableTextField = StyleableTextField(createInFontContext(StyleableTextField));              
desc.width = (itemContainer.width * 70/100);
desc.htmlText = "Much longer text description goes here"; 
```

如您所见，我正在尝试根据容器的宽度设置宽度（如下所示）。

我也尝试过设置 percentWidth 和显式宽度，但列似乎仍然具有不同的宽度。

我的 MXML 看起来像这样：

```
<s:Group width="100%">
    <s:HGroup id="itemContainer" verticalAlign="middle" paddingLeft="10" paddingRight="10" paddingTop="10" paddingBottom="10" width="100%" gap="10">
    </s:HGroup>
</s:Group> 
```

特别是 id 列似乎不愿意大于它的预置宽度。可以是多行的 desc 列效果更好，但仍然不能在所有行中保持单一宽度。

**更新：**

尝试 Alex 的建议后，我现在有了以下 ActionScript 代码。虽然它似乎没有做太多。

```
override protected function updateDisplayList(unscaledWidth : Number, unscaledHeight : Number) : void {
if (idno == null)
{
idno = createDisplay(data.idno);
}
super.updateDisplayList(unscaledWidth, unscaledHeight);
idno.width = (unscaledWidth * 30/100);
desc.width = (unscaledWidth * 70/100);
trace (idno.width);
trace (desc.width);
}

protected function createDisplay(value:String):StyleableTextField
{
var field:StyleableTextField = StyleableTextField(createInFontContext(StyleableTextField));
field.text = value;
itemContainer.addElement(field);
return field;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T12:54:51.660

你有没有尝试过：

```
override protected function updateDisplayList(unscaledWidth : Number, unscaledHeight : Number) : void {
    super.updateDisplayList(unscaledWidth, unscaledHeight);
    id.width = (unscaledWidth * 30/100);
    desc.width = (unscaledWidth * 70/100);
} 
```

# asp.net-mvc - 如何在 VS2012 MVC4 项目中设置 Ext.NET 2.0？

> ID：12860727
> 
> 赞同：4
> 
> 时间：2012-10-12T14:00:46.947
> 
> 标签：asp.net-mvc, razor, project, visual-studio-2012, ext.net

我很怀疑我的问题会得到回答，但我会在这里尝试，因为我的挫败感非常高，也许它会帮助我自己降低它们！

所以，我想做的是：

*   从头开始安装 VS2012（好的，单击 .exe 并开始！）
*   创建一个新的 MVC4 项目
*   使用 Razor View Engine（现在是默认设置）
*   **使 EXT.NET 2.0 与上述内容一起工作**

[这将是 Ext.NET 2.1 的一个特性](http://forums.ext.net/showthread.php?18956-CLOSED-Will-Installation-via-Nuget-eventually-support-Ext-NET-MVC&p=91797&viewfull=1#post91797)，因为所有需求都将打包在一个 nuGet 包中，唯一的问题是我，因为其他少数开发人员希望使用那些*现在已经可以使用的东西*

我现在成功做的事情：

*   按照这个[线程](http://forums.ext.net/showthread.php?16920)，我已经正确设置了 web.config！
*   让VS2012识别Ext.Net引用

就是这样：

*   新建项目，选择Basic/Empty/Internet Application *templates*
*   在项目的资源中，添加对 Ext.NET.dll 的引用（浏览、查找等）
*   以这种方式编辑 web.config：

[http://diffchecker.com/v99ScX0x](http://diffchecker.com/v99ScX0x)

*   以这种方式编辑 Views/web.config：

[http://diffchecker.com/7UEK058Y](http://diffchecker.com/7UEK058Y)

我希望 diffchecker 足够清楚让您理解，无论如何更改在两个文件中都是**相同**的，它们必须如此！

*   在 App_Start/RouteConfig.cs 中添加以下行

> routes.IgnoreRoute("{exclude}/{extnet}/ext.axd");

*   现在我继续关注我[上面链接的线程](http://forums.ext.net/showthread.php?16920)
*   创建名为“Examples”的受控对象 -> ExamplesController.cs，此处无需修改
*   创建上述控制器的视图。所以 Views/Examples/Index.cshtml

在那里，我对页面进行了一些编辑，使其更具 MVC 风格，这真的没什么大不了的。整个页面如下：

```
@{
    ViewBag.Title = "Infinite Scrolling - Ext.NET Examples";
}

@Html.X().ResourceManager()

<h1>Infinite Scrolling</h1>
<p>The brand new GridPanel supports infinite scrolling, which enables you to load any number of records into a grid without paging.</p>
<p>The GridPanel uses a new virtualized scrolling system to handle potentially infinite data sets without any impact on client side performance.</p>
<br />

@(Html.X().GridPanel()
    .Title("Stock Price")
    .Height(500)
    .Width(500)
    .InvalidateScrollerOnRefresh(false)
    .DisableSelection(true)
    .Store(store => store.Add(Html.X().Store()
        .PageSize(100)
        .Buffered(true)
        .AutoLoad(false)
        .Proxy(proxy => proxy.Add(Html.X().AjaxProxy()
                    .Url("/Data/GetData/")
                    .Reader(reader => reader.Add(Html.X().JsonReader()
                                .Root("data")
                            ))
                    ))
        .Model(model => model.Add(Html.X().Model()
                    .Fields(fields => {
                        fields.Add(Html.X().ModelField().Name("Company")); 
                        fields.Add(Html.X().ModelField().Name("Price"));
                        fields.Add(Html.X().ModelField().Name("LastUpdate").Type(ModelFieldType.Date));
                    })
                ))
        ))
    .VerticalScroller(scroller => scroller.Add(Html.X().GridPagingScroller()))      
    .ColumnModel(columnModel => {
        columnModel.Columns.Add(Html.X().RowNumbererColumn().Width(50).Sortable(false));
        columnModel.Columns.Add(Html.X().Column()
                                        .Text("Company")
                                        .DataIndex("Company")
                                        .Flex(1));
        columnModel.Columns.Add(Html.X().Column()
                                        .Text("Price")
                                        .DataIndex("Price")
                                        .Width(70));
        columnModel.Columns.Add(Html.X().DateColumn()
                                        .Text("LastUpdate")
                                        .DataIndex("LastUpdate")
                                        .Width(140)
                                        .Format("HH:mm:ss"));
    })
    .View(view => view.Add(Html.X().GridView().TrackOver(false)))
    .Listeners(listeners => {
        listeners.AfterRender.Handler = "this.store.guaranteeRange(0, 99);";
        listeners.AfterRender.Delay = 100; 
    })
) 
```

*   然后我添加了另一个控制器以使其正常工作，正如线程所说
*   添加[这里提到的DataController.cs 用](http://forums.ext.net/showthread.php?16920-CLOSED-2-0-MVC-3-Razor-Example&p=72510&viewfull=1#post72510) **StoreResult**替换 AjaxStoreResult
*   DataController.cs 也需要

    使用 Ext.Net.MVC；

所以我在这里！
如果您现在启动 IIS Express，您可以在 localhost:XXXXX/Examples/ 中执行页面

我遇到的第一个问题是：页面尝试加载 localhost:XXXX/extjs/ 库，这不是 MVC 样式！

这是由@Html.X().ResourceManager() 完成的，有办法让它连接到[cdn 库](http://forums.ext.net/showthread.php?20566-Using-JSFiddler&p=88712&viewfull=1#post88712)吗？甚至改变路径！？？？

之后可能会出现其他问题，但现在我想解决这个痛苦的小问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T18:03:22.963

根据您上面链接到的 Web.config 文件，我认为您缺少 Web.config 中的必需`<modules>`和`<handlers>`部分。所需的 Web.config 部分在 README.txt 中列出。

[http://examples.ext.net/#/Getting_Started/Introduction/README/](http://examples.ext.net/#/Getting_Started/Introduction/README/)

这是示例 Web.config 中的相应`<system.webServer>`部分。

**例子**

```
<system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
        <add 
            name="DirectRequestModule" 
            preCondition="managedHandler" 
            type="Ext.Net.DirectRequestModule, Ext.Net" 
            />
    </modules>
    <handlers>
        <add 
            name="DirectRequestHandler" 
            verb="*" 
            path="*/ext.axd" 
            preCondition="integratedMode" 
            type="Ext.Net.ResourceHandler"
            />
    </handlers>
</system.webServer> 
```

我不知道以下引用中的*“那不是 MVC-STYLE”*是什么意思。你能提供更多解释吗？

> 我遇到的第一个问题是：页面尝试加载 localhost:XXXX/extjs/ 库，这不是 MVC 样式！

`.RenderScripts(ResourceLocationType.None)`您可以通过设置和来阻止 Ext.NET ResourceManager 呈现所需的 .js 和 .css 文件`.RenderStyles(ResourceLocationType.None)`。

**例子**

```
@Html.X().ResourceManager()
    .RenderScripts(ResourceLocationType.None)
    .RenderStyles(ResourceLocationType.None) 
```

`ResourceLocationType.None`您可以通过将属性更改为 来配置 ResourceManager 以加载 CDN 文件`ResourceLocationType.CDN`。

希望这可以帮助。

# algorithm - 使用 0 和 1 绘制一个给定旋转角度的正方形

> ID：12860728
> 
> 赞同：2
> 
> 时间：2012-10-12T14:00:48.133
> 
> 标签：algorithm, matlab

我正在尝试使用 Matlab 创建一个函数，该函数采用角度（指定正方形的旋转角度）和正方形的长度，并返回一个包含 0 和 1 的矩阵，使得每个单元格的值为 1 当且仅当单元格在正方形上，否则为 0。

以下示例有助于使其更加清晰：

```
d = 8 = length of square 
theta = 0
size of image containing the square = 16

img = zeros(16, 16);
img(o.x-d:o.x+d, o.y-d:o.y+d) = 1
output:
0000000000000000
0000000000000000
0000000000000000
0000000000000000
0000111111110000
0000111111110000
0000111111110000
0000111111110000
0000000000000000
0000000000000000
0000000000000000
0000000000000000 
```

上面的示例很容易显示，因为角度等于 0。 PS 一种方法可能是找到每个像素（单元格）的位置并验证像素是否在正方形内，但目标是找到一种简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:18:12.240

最快的方法可能涉及 Bresenham 算法的变体，但与检查特定像素是否在正方形内相比，这并没有太大的区别。后者通过围绕中心旋转像素坐标并检查它们是否在边界内来轻松完成，例如

```
x' = (x - w/2)*cos(-alpha) - (y - h/2)*sin(-alpha)
y' = (x - w/2)*sin(-alpha) + (y - h/2)*cos(-alpha)
return abs(x') <= d/2 && abs(y') <= d/2 
```

# linux - 每次都从保存的快照启动嵌入式设备？

> ID：12860734
> 
> 赞同：1
> 
> 时间：2012-10-12T14:01:11.457
> 
> 标签：linux, embedded, embedded-linux, boot, bootloader

我想知道是否有任何关于在每次启动时从保存的快照启动 linux 的信息。

我有一个运行 linux 的嵌入式系统，带有一些基本的应用程序。当无事可做时，它将进入休眠模式，暂停到闪存并稍后从那里恢复。但是，我的应用程序不需要我保持设备所处的确切状态，并且为了节省时间和功耗以及不磨损闪存，因此我想从固定图像恢复而不是保存当前状态。

我想每次都可以重新启动，但我遇到了启动时间长和启动过程中能耗高的问题。

我无法通过搜索找到有关该主题的任何内容，因此如果有人能启发我或指出正确的方向，我将不胜感激。

自己编写一个实现它的 Linux 内核模块是否最容易，或者那里有一些完整的代码可用？

# c++ - 如何从多图的子集创建对向量？

> ID：12860735
> 
> 赞同：0
> 
> 时间：2012-10-12T14:01:12.330
> 
> 标签：c++, vector, iterator, multimap

我有一对从 multimap equal_range 调用返回的迭代器。我希望使用这些以成对向量的形式创建一个子集。请问这可以优雅地完成吗？

我想要它作为向量的原因是我可以更轻松地根据其索引（容器中的位置）提取数据

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:02:44.390

使用迭代器范围构造函数`std::vector`：

```
auto p = mul_map.equal_range(...);
std::vector<mul_map_type::value_type> v(p.first, p.second); 
```

为了提高效率，可能值得只在向量中存储指针或迭代器，这可以通过 Boost.Range 轻松实现：

```
#include <boost/range/counting_range.hpp>

auto p = mul_map.equal_range(...);
auto iters = boost::counting_range(p.first, p.second);
std::vector<mul_map_type::(const_)iterator> v(iters.begin(), iters.end()); 
```

# sql-server-2008 - MSDTC：更改 MSSQL 服务器的 IP 地址后出现 TransactionManagerCommunicationException

> ID：12860738
> 
> 赞同：1
> 
> 时间：2012-10-12T14:01:25.343
> 
> 标签：sql-server-2008, msdtc, distributed-transactions

在我们将 Win2k8 MSSQL2008 服务器移动到不同的 IP 地址后，我们无法从构建代理中对该 SQL 服务器上的数据库运行单元测试。在我们移动数据库服务器之前一切正常。现在，使用多个数据库事务的单元测试失败并显示以下错误消息：

```
System.Data.EntityException: The underlying provider failed on Open. 
--->   System.Transactions.TransactionManagerCommunicationException: 
Communication with the underlying transaction manager has failed. 
---> System.Runtime.InteropServices.COMException: The MSDTC transaction manager 
was unable to pull the transaction from the source transaction manager due to
communication problems. 
Possible causes are: a firewall is present and it doesn't have an exception for the
MSDTC process, the two machines cannot find each other by their NetBIOS names, or the 
support for network transactions is not enabled for one of the two transaction
managers. 
```

我们检查了防火墙设置，以及从一台服务器 ping 到另一台服务器的能力，没有问题。可能一定有存储在某个地方的 SQL Server 的旧 IP 地址，或者还有什么可能导致这个问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:52:11.383

问题是在构建服务器上的 LMHOSTS 文件中忘记了旧 IP 地址，修复后 DTC 再次工作。谢谢大家的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:48:54.910

MSDTC 使用的端口与 SQL Server 本身不同。确保这些端口也有防火墙例外。签出：[MSDTC 和防火墙](https://stackoverflow.com/questions/1445420/msdtc-and-firewall)

如果这没有帮助，试试这个：http: [//support.microsoft.com/kb/306843](http://support.microsoft.com/kb/306843)

# aloha-editor - 最小化 aloha js 大小

> ID：12860740
> 
> 赞同：0
> 
> 时间：2012-10-12T14:01:29.303
> 
> 标签：aloha-editor

aloha.js 或 aloha-full.js 在其网站上列出了所有插件的代码。

但是，我只需要其中的几个，并且不想让用户的浏览器页面加载时间超载。

那么，有没有办法实现呢？

感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:33:39.393

您可以创建一个 costum 构建文件并使用您需要的插件来缩小 aloha 编辑器。

这是一个简短的描述： [http ://www.aloha-editor.org/guides/develop_aloha.html#customized-builds](http://www.aloha-editor.org/guides/develop_aloha.html#customized-builds)

但是你必须熟悉 node.js 和 r.js。

如果这是你第一次使用这个工具，你需要大约 1-2 天来制作一个 costum aloha build（至少我花了这么长时间）

BR，斯特凡

# excel - 如何设置日期？

> ID：12860741
> 
> 赞同：3
> 
> 时间：2012-10-12T14:01:28.143
> 
> 标签：excel, vba

```
Dim dt1 As Date
dt1 = Date
MsgBox dt1 ' works - 12.10.2012
Day(dt1) = 1 ' error: object required 
```

我需要 1.10.2012
因此，对于任何日期，我都需要将 dt1 设置为该特定日期的第一天。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-12T14:06:30.460

您可以使用日期序列来重建日期

例如

```
newDate = DateSerial(Year(dt1), Month(dt1), 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:09:47.297

也可以直接扣除天数

```
dt1 = dt1 - Day(dt1) + 1 
```

# java - JAXB Bean 生成

> ID：12860742
> 
> 赞同：7
> 
> 时间：2012-10-12T14:01:34.953
> 
> 标签：java, xsd, jaxb, schema

我正在使用 JAXB 使用 Maven 中的 JAXB 插件从 XSD 生成 bean。这工作正常，期望代码包含每个字段的 isSetXXXXXX() 方法。

例如

对于字段**firstName**，它生成以下代码：

```
@XmlElement(name = "FirstName", required = true)
    protected String firstName;

  public String getFirstName() {
        return firstName;
    }

 public void setFirstName(String firstName) {
        this.token = firstName;
    }

    public boolean isSetFirstName() {
        return (this.firstName!= null);
    } 
```

这个 isSetFirstName() 方法会导致问题，我不希望 JAXB 生成这些问题。

**有没有办法阻止这种行为？**

谢谢。

**更新**

解决了这个问题：问题出在 xjb 文件中，generateIsSetMethod 设置为 true。

```
<xs:annotation>
   <xs:appinfo>
      <jaxb:globalBindings generateIsSetMethod="true">

      bindingStyle="modelGroupBinding"
         choiceContentProperty="true" >

           <xjc:serializable uid="12343"/>
           <jaxb:javaType name="short" 
              xmlType="xs:long" 
              printMethod="javax.xml.bind.DatatypeConverter.printShort"   
              parseMethod="javax.xml.bind.DatatypeConverter.parseShort"/>

      </jaxb:globalBindings>
   </xs:appinfo>
</xs:annotation> 
```

这也回答了我[之前](https://stackoverflow.com/questions/12620450/json-response-spring-with-jaxb)的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T14:10:07.187

默认情况下，JAXB (JSR-222) 实现不会生成`isSet`方法。由于您正在获取它们，因此必须满足以下条件之一：

1.  您可以指定一个模式注释： `<jaxb:globalBindings generateIsSetMethod="true"/>`
2.  您有一个外部绑定文件，它指定： `<jaxb:globalBindings generateIsSetMethod="true"/>`
3.  您正在为 Maven 插件指定一个属性以生成`isSet`方法。

# compression - DXT 压缩产生与原始 PNG 相同的文件大小

> ID：12860747
> 
> 赞同：2
> 
> 时间：2012-10-12T14:01:41.843
> 
> 标签：compression, webgl, textures, dds-format

我正在尝试使用原始 PNG 的 DXT 压缩将我的纹理转换/压缩为 DDS 格式。我在 Mac 上，所以我使用的是图形转换器（尽管我也尝试过其他工具）。但无论我使用哪种 DXT 级别 (DXT1-5)，文件大小都与原始 PNG 大致相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:12:00.200

PNG 是一种无损压缩格式，基于[zlib](http://www.zlib.net/)和一些专门的过滤器。它将保证复制与原始图像完全相同的图像。

因此，PNG 压缩比是*可变*的。在复杂的图像上，压缩效果会很差。在全黑图像上，压缩效果非常好。

相比之下，DXT 压缩具有*固定的压缩比*。这个比率对于 DXT1 是 8:1，对于 DXT5 是 4:1（假设 32 位 RGBA 输入）。DXT5 的优势是更好的 Alpha 通道（用于透明度）。如果你不需要它，就不要使用它，这只是浪费带宽。

您可以猜到，权衡是*DXT 质量将是可变*的。DXT 质量仅被认为“足够好”，但远非完美。在图像的复杂部分，会有一些可见的伪影/失真。在简单的零件上，复制品几乎与原件完全相同。

*PNG 的工作方式是将整个图像*压缩为单字节流。DXT 压缩的工作方式是*将图像切割成 4x4 像素的小块*，并将它们独立压缩到固定的压缩比。

这带来了根本不同的属性：DXT 纹理应该由 GPU 硬件直接解码。这是非常快的，几乎是免费的。这得益于纹理被切割成小块的事实：无需解码整个纹理来推送单个像素 => 只需解码适当的 4x4 块。此属性是解码过程的关键。

相比之下，PNG 解码整个图像，因此有更多空间通过查找直接 4x4 邻域之外的相关性来改进压缩。但权衡是不可能只检索一小块像素：这是整个图像或什么都没有。

As you can see, selecting one or the other compression method is not a matter of compression ratio. For storage purpose, choose PNG, not least because it is *lossless*. For fast displaying of lot of textures in real time (typical scenario for 3D games), DXT is the only way to go.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T00:41:56.587

DDS/DXT 纹理不保证小于 PNG。这取决于纹理的内容及其大小。纯色 PNG 或大多数纯色（如卡通的 png）会压缩得非常小，而照片通常不会很好地压缩。其中 DXT 是 4 比 1 或 6 比 1 压缩周期，具体取决于它是 DXT1 还是 DXT3 还是 DXT5

# debugging - 在服务器构建期间错误发布符号

> ID：12860749
> 
> 赞同：-2
> 
> 时间：2012-10-12T14:01:45.667
> 
> 标签：debugging, symbols, build-server

我得到了部分成功的构建。错误是：

> SYMSTORE 错误：类：服务器。描述：无法连接到服务器。错误 67：找不到网络名称。TF270015：“symstore.exe”返回了意外的退出代码。预期为“0”；实际的“67”。

我的符号应该发布在构建服务帐户具有写入权限的共享网络驱动器上。然而，它们没有发布。

我不知道该怎么做才能避免这个错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:12:25.530

结果发现共享驱动器的路径中有错字....最重要的是，pdb在构建时没有生成，因为在Visual Studio中构建选项卡的高级选项中，调试信息设置为无。

# xml - 在另一个 CDATA 中使用 CDATA

> ID：12860754
> 
> 赞同：25
> 
> 时间：2012-10-12T14:01:58.847
> 
> 标签：xml, xml-parsing, cdata

我有这种困难的情况，我需要在另一个 CDATA 标记中使用 CDATA 标记。这种情况很容易解释。

我有以下事情：

```
<edit>
<![CDATA[
<script type="text/javascript">
<![CDATA[
    window.onload = function() 
    {
        document.getElementById('block').onclick = function() 
        {
            this.onclick = '';
            this.value = '{LA_SEND_CONFIRM}';
            this.className = this.className.replace('button1','');
            document.getElementById('replacement').value = '{LA_BLOCK_CODE}';
        }
    }
]]>
</script>
]]>
</edit> 
```

为了显示目的，我还需要将我的 Javascript 包装在 CDATA 中，因此当我打开该 XML 文件时，它会正确显示，并且 Javascript 代码位于这些 CDATA 标记中。它们在 XML 文件本身中没有真正的意义。

如您所知，上面的代码会给我一个 XML 解析错误，因为嵌套 CDATA 不起作用。有没有办法逃避`]]>`这样我可以向我的用户展示这些括号？

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-12T14:10:40.930

您可以`]]>`通过将 CDATA 部分中的子字符串替换为：

```
]]]]><![CDATA[> 
```

... line. With this you'll make `]]` a part of one CDATA section, and `>` - of another, that starts right when the preceding one ends.

# c - 为交叉编译器构建 newlib 时“gettimeofday”的类型冲突

> ID：12860755
> 
> 赞同：0
> 
> 时间：2012-10-12T14:02:04.087
> 
> 标签：c, cross-compiling, osdev

在尝试构建 newlib 1.20.0 时...我遵循了本教程[http://wiki.osdev.org/OS_Specific_Toolchain#newlib.2Flibc.2Fsys.2Fmyos](http://wiki.osdev.org/OS_Specific_Toolchain#newlib.2Flibc.2Fsys.2Fmyos)

但是在尝试构建 newlib 时出现以下错误：

```
/../newlib-1.20.0/newlib/libc/sys/myos/'`syscalls.c
../../../../../../newlib-1.20.0/newlib/libc/sys/myos/syscalls.c:29:5: error: conflicting types for 'gettimeofday'
In file included from ../../../../../../newlib-1.20.0/newlib/libc/sys/myos/syscalls.c:7:0:
/usr/src/newlib-1.20.0/newlib/libc/include/sys/time.h:74:5: note: previous declaration of 'gettimeofday' was here
Makefile:280: recipe for target `lib_a-syscalls.o' failed 
```

sycalls.c 用于 gettimeofday 声明：

```
int gettimeofday(struct timeval *p, struct timezone *z); 
```

时间.h：

```
int _EXFUN(gettimeofday, (struct timeval *__p, void *__tz)); 
```

那么什么是冲突类型？请帮助....任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-06T02:10:54.513

更改syscalls.c 中*的*函数声明。然后将 void * 转换为结构时区。

# c# - 使用泛型类型扩展集合

> ID：12860758
> 
> 赞同：-3
> 
> 时间：2012-10-12T14:02:09.267
> 
> 标签：c#, .net

我的目标是扩展 Collection 对象以支持在从 Collection 中添加、更新或删除项目时进行标记。[MSDN 文章](http://msdn.microsoft.com/en-us/library/ms132397%28v=vs.100%29.aspx)提供了针对特定类型进行扩展的示例（示例 2）。我想保持它是通用的，所以我不必为我拥有的每个 Collection 实现一个新类。

这是我到目前为止所拥有的：

```
public class ChangedEventArgs<T> : EventArgs
{
    public readonly T ChangedItem;
    public readonly T ReplacedWith;
    public readonly ChangeType ChangeType;

    public ChangedEventArgs(ChangeType change, T item, T replacement)
    {
        ChangeType = change;
        ChangedItem = item;
        ReplacedWith = replacement;
    }
}

public enum ChangeType
{
    Added,
    Removed,
    Replaced,
    Cleared
};

class CollectionChangeTracked<T> : Collection<T>
{
    public event EventHandler<ChangedEventArgs<T>> Changed;

    protected override void InsertItem<TParam>(int index, TParam newItem)
    {
        base.InsertItem(index, newItem);

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs<T>(ChangeType.Added, newItem, null));
        }
    }

    protected override void SetItem<TParam>(int index, TParam newItem)
    {
        string replaced = Items[index];
        base.SetItem(index, newItem);

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs(ChangeType.Replaced, replaced, newItem));
        }
    }

    protected override void RemoveItem<TParam>(int index)
    {
        TParam removedItem = Items[index];
        base.RemoveItem(index);

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs<T>(ChangeType.Removed, removedItem, null));
        }
    }

    protected override void ClearItems()
    {
        base.ClearItems();

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs(ChangeType.Cleared, null, null));
        }
    }
} 
```

问题：我收到一条错误消息：base.InsertItem(index, newItem) 它说我的参数无效，但仅此而已。SetItem 和 RemoveItem 中的相同问题。

更新的编译代码：

```
public class ChangedEventArgs<T> : EventArgs
{
    public readonly T ChangedItem;
    public readonly T? ReplacedWith;
    public readonly ChangeType ChangeType;

    public ChangedEventArgs(ChangeType change, T item, T? replacement)
    {
        ChangeType = change;
        ChangedItem = item;
        ReplacedWith = replacement;
    }
}

public enum ChangeType
{
    Added,
    Removed,
    Replaced,
    Cleared
};

class CollectionChangeTracked<T> : Collection<T>
{
    public event EventHandler<ChangedEventArgs<T>> Changed;

    protected override void InsertItem(int index, T newItem)
    {
        base.InsertItem(index, newItem);

        EventHandler<ChangedEventArgs<T>> temp = Changed;

        if (temp != null)
            temp(this, new ChangedEventArgs<T>(ChangeType.Added, newItem, default(T)));
    }

    protected override void SetItem(int index, T newItem)
    {
        T replaced = Items[index];
        base.SetItem(index, newItem);

        EventHandler<ChangedEventArgs<T>> temp = Changed;

        if (temp != null)
            temp(this, new ChangedEventArgs<T>(ChangeType.Replaced, replaced, newItem));
    }

    protected override void RemoveItem(int index)
    {
        T removedItem = Items[index];
        base.RemoveItem(index);

        EventHandler<ChangedEventArgs<T>> temp = Changed;

        if (temp != null)
            temp(this, new ChangedEventArgs<T>(ChangeType.Removed, removedItem, null));
    }

    protected override void ClearItems()
    {
        base.ClearItems();

        EventHandler<ChangedEventArgs<T>> temp = Changed;

        if (temp != null)
            temp(this, new ChangedEventArgs<T>(ChangeType.Cleared, null, null));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:13:29.317

@daveL 是完全正确的，你想要的是一个通用事件参数：

```
public class ChangedEventArgs<T> : EventArgs
{
    public readonly T ChangedItem;
    public readonly T ReplacedWith;
    public readonly ChangeType ChangeType;

    public ChangedEventArgs(ChangeType change, T item, T replacement)
    {
        ChangeType = change;
        ChangedItem = item;
        ReplacedWith = replacement;
    }
} 
```

但他在回答中遗漏的是如何使用它；首先让您的事件处理程序使用与`T`主类相同的类型：

```
class CollectionChangeTracked<T> : Collection<T>
{
    public event EventHandler<ChangedEventArgs<T>> Changed;

   ....

} 
```

然后，您的个人方法，而不是重新定义类型，`TParam`应该使用`T`在类级别定义的：

```
protected override void InsertItem(int index, T newItem)
{
    base.InsertItem(index, newItem);
    EventHandler<ChangedEventArgs<T>> temp = Changed;
    if (temp != null)
    {
      // Added <T> after ChangedEventArgs  
      temp(this, new ChangedEventArgs<T>(ChangeType.Added, newItem, default(T)));
    }
} 
```

现场示例：[http ://rextester.com/XFCLN26271](http://rextester.com/XFCLN26271)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:06:53.613

我想这会有所帮助，但我有点猜测，因为您的问题含糊不清且未完成

```
 public class ChangedEventArgs<T> : EventArgs
    {
        public readonly T ChangedItem;
        public readonly T ReplacedWith;
        public readonly ChangeType ChangeType;

        public ChangedEventArgs(ChangeType change, T item, T replacement)
        {
            ChangeType = change;
            ChangedItem = item;
            ReplacedWith = replacement;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:17:27.230

您必须将 ChangedEventArgs 类定义为 Generic。

尝试这个：

```
public class ChangedEventArgs<T> : EventArgs
{
    public readonly T ChangedItem;
    public readonly ChangeType ChangeType;
    public readonly T ReplacedWith;

    public ChangedEventArgs(ChangeType change, T item,
        T replacement)
    {
        ChangeType = change;
        ChangedItem = item;
        ReplacedWith = replacement;
    }
}

public enum ChangeType
{
    Added,
    Removed,
    Replaced,
    Cleared
};

class CollectionChangeTracked<T> : Collection<T> 
{
    public event EventHandler<ChangedEventArgs<T>> Changed;

    protected override void InsertItem(int index, T newItem)
    {
        base.InsertItem(index, newItem);

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs<T>(
                ChangeType.Added, newItem, default(T)));
        }
    }

    protected override void SetItem(int index, T newItem)
    {
        T replaced = Items[index];
        base.SetItem(index, newItem);

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs<T>(
                ChangeType.Replaced, replaced, newItem));
        }
    }

    protected override void RemoveItem(int index)
    {
        T removedItem = Items[index];
        base.RemoveItem(index);

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs<T>(
                ChangeType.Removed, removedItem, default(T)));
        }
    }

    protected override void ClearItems()
    {
        base.ClearItems();

        EventHandler<ChangedEventArgs<T>> temp = Changed;
        if (temp != null)
        {
            temp(this, new ChangedEventArgs<T>(
                ChangeType.Cleared, default(T), default(T)));
        }
    }
} 
```

# sql-server - SQL Server Reporting Services (SSRS) - 是否可以在报告中一次格式化所有网格线？

> ID：12860763
> 
> 赞同：1
> 
> 时间：2012-10-12T14:02:20.807
> 
> 标签：sql-server, ssrs-2008, reporting-services

是否可以一次格式化所有图表。例如，我想将所有图表设置为相同的背景颜色，删除所有网格线，将 x 轴字体设置为 x 大小等。

我知道我可以手动完成，但我想“预先配置”，所以所有图表都是一样的。**代码**部分必须有一些东西

非常感谢

已解决：我创建了一个模板。您可以将模板放在以下文件夹中：

**对于 SQL Server 2008**

C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\ProjectItems\ReportProject

**对于 SQL Server 2012**

C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\ProjectItems\ReportProject

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:26:24.837

在报告服务中创建模板报告并在所有报告中重复使用此模板。

我很久以前写过这篇博文，但它应该适用于 2003、2005、2008 和 2012：见：[http ://weblogs.sqlteam.com/jhermiz/archive/2007/08/14/60283.aspx](http://weblogs.sqlteam.com/jhermiz/archive/2007/08/14/60283.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:13:24.050

不，每个报告的代码都是唯一的。

您可以做的是使用您的代码创建一个外部程序集，并在您的所有报告中访问它以更改运行时属性。

# jquery - 使用 jQuery 模态对话框提交表单

> ID：12860766
> 
> 赞同：1
> 
> 时间：2012-10-12T14:02:22.740
> 
> 标签：jquery

根据我们的项目要求，我们开发了 jQuery 对话框并添加了 3 个按钮

是、否和取消

在是按钮上，我们需要提交表单，但未提交表单 YES 和 NO 没有发生

代码如下

```
 $("#dialog-NurseTeam").dialog({
        autoOpen: false,
        width: 430,
        resizable: false,
        title: 'Confirmation',
        modal: true,
        buttons:[ {
            "text": "Yes",
            "click": function () {
              debugger; 
              document.getElementById("IsNurseTeamChanged").checked=true;
              document.getElementById("hdnCancelChecked").value="Yes"; 
              $(this).dialog("close");
               $form = $('#PatientNewVisitForm');
              $form.submit();

              }

            },
            {
            "text": "No",
            "click": function () {
            document.getElementById("IsNurseTeamChanged").checked=false;
            document.getElementById("hdnCancelChecked").value="No";
                $(this).dialog("close");

            }
        },
            {
            "text": "Cancel",
            "click": function () {
            document.getElementById("IsNurseTeamChanged").checked=false;
            document.getElementById("hdnCancelChecked").value="Cancel";
                $(this).dialog("close");

            } }]

    }); 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:05:53.030

尝试更改这些行的顺序：

```
 $(this).dialog("close");
         $form = $('#PatientNewVisitForm');
         $form.submit(); 
```

至：

```
 $form = $('#PatientNewVisitForm');
         $form.submit();
         $(this).dialog("close"); 
```

由于模式已关闭，表单提交行可能不会运行。不完全确定，但值得一试。希望能帮助到你。

# php - Form->getObject() 在 1.4.19 中不再起作用？

> ID：12860768
> 
> 赞同：0
> 
> 时间：2012-10-12T14:02:28.207
> 
> 标签：php, symfony-1.4, symfony-forms

我的博客上有以下代码，用于检查评论是否为垃圾邮件

```
 $tmp = new Comment();
  $tmp->setName(urldecode($this->getRequest()->getCookie('commName')));
  $tmp->setEmail(urldecode($this->getRequest()->getCookie('commEmail')));
  $tmp->setUrl(urldecode($this->getRequest()->getCookie('commUrl')));
  $this->form = new CommentAddForm($tmp);

if ($request->isMethod('post'))
{

  $this->form->bind($request->getParameter('comment'));

  if ($this->form->isValid())
  {
    $key = sfConfig::get('akismet_api_key');

    $data = array(
          'blog'       => '...',
          'user_ip'    => $this->getRequest()->getHttpHeader('addr','remote'),
          'user_agent' => $_SERVER['HTTP_USER_AGENT'],
          'referrer'   => $_SERVER['HTTP_REFERER'],
          'comment_type'         => 'comment',
          'comment_author'       => $this->form->getObject()->getName(),
          'comment_author_email' => $this->form->getObject()->getEmail(),
          'comment_author_url'   => $this->form->getObject()->getUrl(),
          'comment_content'      => $this->form->getObject()->getComment()
    );

    $isSpam = myLib::akismet_comment_check($key, $data);
    (…) 
```

但是我只是注意到我被垃圾邮件轰炸了，在本地测试时，似乎`$this->form->getObject()->getName()`没有返回表单中的名称，而是使用了以前的名称，即保存在 cookie 中的名称！

我查看了 symfony 1.4.19 的更新日志，但没有看到任何与此相关的内容，这可能是巧合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:10:44.960

调用`$form->bind()`方法仅填充`values`表单的属性。它不会水合表单的对象。这是在保存表单时完成的。您可能想调用`$form->updateObject()`在保存期间调用的方法。这将使用表单的值填充对象。

# regex - 从 Google Analytics 中删除空查询字符串参数

> ID：12860769
> 
> 赞同：2
> 
> 时间：2012-10-12T14:02:29.687
> 
> 标签：regex, filter, google-analytics, query-string

我想知道是否有人知道如何从 Google Analytics 中删除空查询字符串参数？

示例 URL 为：[http ://www.domain.com/index.asp?a=test&b=test&c=&d=test](http://www.domain.com/index.asp?a=test&b=test&c=&d=test)

在此示例中，我希望 Google Analytics 过滤掉“c”，因为它是空的。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:34:39.013

`"http://www.domain.com/index.asp?a=test&b=test&c=&d=test".match(/[^\=\&\?]+=[^\=\&\?]+/g)`--JavaScript

应该返回一个 ["a=test","b=test","d=test"] 的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:04:36.743

使用@user1494396；重构您的异步跟踪代码以从正则表达式传递页面名称，如下所示：

```
(function (window) {
    function cleanQs() {
        if (!window.location.search) {
            return window.location.pathname;
        }
        var locSearchArr = window.location.search.match(/[^\=\&\?]+=[^\=\&\?]+/g);
        var locPathName = window.location.pathname;
        if (locSearchArr && locSearchArr.length > 0) {
            locPathName += "?" + locSearchArr.join("&");
        }
        return locPathName;
    }

    var _gaq = window._gaq || (window._gaq = []);
    window._gaq.push(['_setAccount', 'UA-XXXXX-X']);
    window._gaq.push(['_trackPageview', cleanQs()]);
})(this);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

看：

*   [Google 的 Async Tracking Code Documentation](https://developers.google.com/analytics/devguides/collection/gajs/asyncTracking)以获取有关代码基础的更多信息
*   [此代码的 JSFiddle 演示](http://jsfiddle.net/TomFuertes/pCF8s/)

# php - 更改 JSON 字符串

> ID：12860773
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:02:39.667
> 
> 标签：php, json, symfony

我有一个 JSON 字符串，我想更改它。

JSON字符串看起来像

```
string '[{"id":"AT.02708872.T"},{"id":"DE.60232348.A"}]' (length=114) 
```

我想将此 JSON 转换为

```
string '[{"id":"AT02708872"},{"id":"DE60232348"}]' (length=114) 
```

所以我想删除点和最后一个字母。我正在使用 Symfony2 (PHP)

任何人都知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:14:50.853

解码、修改、重新编码。

```
<?php

$json = '[{"id":"AT.02708872.T"},{"id":"DE.60232348.A"}]';

// Decode the JSON data into an array of objects. 
// Symfony probably will have some JSON handling methods so you could look at
// those to keep the code more Symfony friendly.
$array = json_decode($json);

// Loop through the array of objects so you can modify the ID of 
// each object. Note the '&'. This is calling $object by reference so
// any changes within the loop will persist in the original array $array
foreach ($array as &$object)
{
    // Here we are stripping the periods (.) from the ID and then removing the last
    // character with substr()
    $object->id = substr(str_replace('.', '', $object->id), 0, -1);
}

// We can now encode $array back into JSON format
$json = json_encode($array);

var_dump($json); 
```

Symfony2 中可能有原生 JSON 处理，所以你可能想检查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:06:54.187

您可以使用 javascript 正则表达式将不需要的元素替换为空白字符串。但是，您应该在将字符串解析为 php 对象之前执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:10:50.743

是一根弦吗？在其上运行正则表达式：

```
<?
   $str =  '[{"id":"AT.02708872.T"},{"id":"DE.60232348.A"}]' ;
   echo preg_replace('/\.[A-Z]"/','"',$str);
?> 
```

这是假设你所有的 id 都以 . 1个大写字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:15:00.600

```
$json = '[{"id":"AT.02708872.T"},{"id":"DE.60232348.A"}]';

$json = json_decode($json, true);

$result = array();
foreach($json as $item) {
    $tmp = explode('.', $item['id']);
    $result[] = array('id' => $tmp[0] . $tmp[1]);
}

$result = json_encode($result);
echo $result; 
```

# flot - 接口中属性的多种类型

> ID：12860774
> 
> 赞同：2
> 
> 时间：2012-10-12T14:02:42.050
> 
> 标签：flot, typescript

我一直致力于为 flot 创建环境定义文件作为学习一些 TypeScript 的练习，但我在 flot 的文档中多次遇到这个问题（在轴选项中）：

```
ticks: null or number or ticks array or (fn: axis -> ticks array) 
```

所以我可以在我的axisOptions界面中做到这一点：

```
interface axisOptions {
    ticks?: any;
} 
```

这涵盖了所有可能的选项，但有没有更好的方法将其限制为数字、数组（数字）或函数，而不是其他任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:10:34.080

您目前不能指定多种类型 - 实际上这是动态`any`类型的完美使用，因为虽然它不是“任何东西”，但它肯定是动态的。

要在动态类型上强制执行类型，您必须检查它 - 就像在这个例子中一样：

```
function example (input?: any) {
    alert(typeof input);
    if (typeof input !== 'undefined' && typeof input !== 'string' && typeof input !== 'number') {
        alert('no');
        return;
    }

    alert('yes');
}

example(true);
example('Okay');
example(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:01:15.137

您可以通过拥有多个方法定义来完成您所追求的一些事情

```
interface lodash extends lodashProto, lodashStatic {
  (value: Array): lodashCurried;
  (value: Object): lodashCurried;
  (value: string): lodashCurried;
  VERISON: string;
} 
```

# java - 通过套接字接收和打印字符串数组对象

> ID：12860780
> 
> 赞同：2
> 
> 时间：2012-10-12T14:03:00.690
> 
> 标签：java, arrays, sockets

最近我正在使用多线程概念制作服务器客户端程序。出于某种原因，我必须从客户端向服务器发送一个字符串数组。我正在使用`ObjectOutputStream`and`writeObject()`方法来发送该字符串数组。例如，我有一个名为的数组`String data[] = new String[3]`，然后我将其发送过来`socketwriteobject(data)`。

问题是，我如何在服务器上接收这个字符串数组？它`ObjectInputStream`和这种方法`readObject()`可以帮助我吗？我只想迭代这个对象并将其变成服务器端的新字符串数组。例如`String newData[] = new String[3]`，然后将字符串`data[0]`放入`newData[0]`until `data[2]`into `newData[2]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:06:00.343

我相信当您使用 读取对象时`readObject()`，它应该返回您的 String[] 本身。

```
 String[] myObjects = (String[])inObjectStream.readObject(); 
```

那不工作吗？

# java - 同一模型的休眠（JPA）多个@OneToMany

> ID：12860781
> 
> 赞同：8
> 
> 时间：2012-10-12T14:03:07.993
> 
> 标签：java, hibernate, jpa, one-to-many

我有两个模型。

```
@Entity
public class Student
{
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    protected long id;

    @?
    protected Address homeAddress;

    @?
    protected Address schoolAddress;
}

@Entity
public class Address
{
   @Id
   @GeneratedValue(strategy=GenerationType.AUTO)
   protected long id;

   @?
   protected List<Student> students;
} 
```

我需要在上面放置哪些 JPA/hibernate 注释`homeAddress`，`schoolAddress`并使`students`关联工作？

当然，我尝试了很多东西，但没有任何效果。例如，设置

```
 @ManyToOne
    @JoinColumn (name="student_homeAddress_id", updatable = false, insertable = false)
    protected Address homeAddress;

    @ManyToOne
    @JoinColumn (name="student_schoolAddress_id", updatable = false, insertable = false)
    protected Address schoolAddress; 
```

和

```
 @OneToMany(cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH}, fetch = FetchType.EAGER)
    @JoinColumns({
    @JoinColumn(name = "student_homeAddress_id", referencedColumnName = "student_homeAddress_id"),
    @JoinColumn(name = "student_schoolAddress_id", referencedColumnName = "student_schoolAddress_id")})
    @IndexColumn(name="students_index")
    protected List<Student> students; 
```

耶`Unable to find column with logical name: student_homeAddress_id in org.hibernate.mapping.Table(Address) and its related supertables and secondary tables`。也尝试过使用`mappedBy`，但这需要一个参数（不能做`mappedBy="student_homeAddress_id, student_schoolAddress_id"`.

还考虑将其`JoinColumns`移至`Student`平板电脑，但我不确定 OneToMany 和 ManyToOne 的注释应该是什么样子，因为我在那里有多个地址，而 JoinColumns 没有多大意义。

确实有效但没有创建关联的事情是：

```
 @OneToMany(cascade={CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH}, fetch = FetchType.EAGER)
    @JoinColumn(name="address_id")
    @IndexColumn(name="students_index")
    protected List<Student> students; 
```

使用这个，当在数据库中存储模型时，student_homeAddress_id 和 student_schoolAddress_id 始终为空，即使在存储了两端（学生和地址模型）之后也是如此。

我的想法是在`Address`桌子上会有3个额外的列：student_homeAddress_id（学生表中学生的家庭地址的id），student_schoolAddress_id（学生表中学生的id）和students_index（0 -基于`students`列表中的位置）。这应该足够了，对吗？

有任何想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T14:06:00.027

我们尝试了 mael 的建议，但无法实现。

我们最终遵循了[这个](http://en.wikibooks.org/wiki/Java_Persistence/ManyToMany#Mapping_a_Join_Table_with_Additional_Columns)有效的方法。

换句话说，我们有`OneToMany`关系：

开`Student`：

```
protected List<AddressStudentAssociation> addresses; 
```

开`Address`：

```
protected List<AddressStudentAssociation> students; 
```

并且在`AddressStudentAssociation`：

```
@ManyToOne
@PrimaryKeyJoinColumn(name="STUDENTID", referencedColumnName="id")
private Student student;
@ManyToOne
@PrimaryKeyJoinColumn(name="ADDRESSID", referencedColumnName="id")
private Address address; 
```

加上一个将一个地址与另一个地址分开的参数 ( `isHome`)。

最后，在里面`Student`我们`public Address getHomeAddress()`遍历`addresses`列表并返回正确的地址。我们还必须使用注释才能使其正常工作。一般来说不是最优的，但它可以工作，我们已经花了太多时间试图让事情正常进行。:|

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-12T14:39:47.813

如果您有一个要在多个字段中关联 @OneToMany 的实体，您应该使用 @JoinTable 以便 Hibernate 可以为该关系生成 2 个表。

来自@JoinTable javadoc：

> 连接表通常用于多对多和单向一对多关联的映射。它还可用于映射双向多对一/一对多关联、单向多对一关系和一对一关联（双向和单向）。
> 
> 当连接表用于映射关系与关系拥有方的可嵌入类时，包含实体而不是可嵌入类被认为是关系的所有者。
> 
> 如果缺少 JoinTable 注释，则应用注释元素的默认值。连接表的名称假定为使用下划线连接在一起（拥有方优先）的关联主表的表名。

举个例子：

```
@Entity
@Indexed(index = "causa_penal")
@Table(name = "causas_penales")
public class CausaPenal implements Serializable {

     @Id
     @GeneratedValue(strategy = GenerationType.TABLE)
     @Column(name = "id")
     @DocumentId
     private Integer id;

     @Version
     @Column(name = "opt_lock")
     private Integer version;

     @ManyToMany(cascade = { CascadeType.ALL })
     @JoinTable(name = "causapenal_imputados")
     @IndexedEmbedded(depth = 1)
     private List<ParteMaterial> imputados;

     @ManyToMany(cascade = CascadeType.ALL)
     @JoinTable(name = "causapenal_victimas")
     @IndexedEmbedded(depth = 1)
     private List<ParteMaterial> victimas;

    //Getters and Setters
} 
```

如您所见，我让 CausaPenal 两次指向 ParteMaterial。但我需要这些列表彼此独立。因此，使用@JoinTable 我告诉 Hibernate 这种关系必须映射到 4 个表：“causa_penal”用于 CausaPenal 实体，“causa_penal_imputados”用于 CausaPenal 和映射到 ParteMaterial 实体的 imputados 字段的关系，对于受害者和相同最后，ParteMaterial 实体表。

# hadoop - 将列名传递给 Hadoop Hive 流式作业

> ID：12860782
> 
> 赞同：4
> 
> 时间：2012-10-12T14:03:10.267
> 
> 标签：hadoop, streaming, hive

我正在 Hive 中编写一个 Hadoop 流式作业，我希望我的流式脚本能够了解它正在接收的表的列名。我尝试过设置`set hive.cli.print.header=true;`，但这会将名称打印到控制台而不使它们可用于脚本（据我所知）。

理想情况下，我也可以使数据类型可用。

Hadoop Streaming API 或 Hive 中是否有允许我捕获流作业中的列名的选项？

*更新：*我能够从我的 Hive 脚本中提取 Hadoop 环境变量以及设置任意变量，并在我的流脚本中使用它们。我正在调查对这些环境变量的访问是否允许我访问数据列名称或以一种骇人听闻的方式传递它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T12:38:55.107

我正在提交一个答案，但这仅在“初始”数据包含列名时才有效，即。数据应该具有某种键值对结构。您现在可以将带有映射结构的输入类型存储在配置单元中并基于键进行查询。我会给你一个例子。

假设您在 hdfs 的“/user/input”位置有一个文件，其数据如下

```
A B C1=D1:C2=D2:C3=D3:C7=D4
E F C1=H1:C7=H2:C5=H4 
```

在 hive 中执行以下操作：

```
hive>> create external table my_external_table 
       (column1 string, column2 string, my_map map<string,string>) 
       row format delimited 
       fields terminated by ' ' 
       collection items terminated by ':' 
       map keys terminated by '=' 
       lines terminated by '\n' 
       stored as textfile location '/user/input';
hive>> select * from my_external_table;
result>> A B {"C1":"D1","C2":"D2","C3":"D3","C7":"D4"}
         E F {"C1":"H1","C7":"H2","C5":"H4"} 
```

现在您可以执行这样的查询

```
hive >> select map_keys[my_map] from my_external_table;
result >> ["C1","C2","C3","C7"]
hive >> select map_values[my_map] from my_external_table;
result >> ["D1","D2","D3","D4"]
          ["H1","H2","H3","H4"]
hive >> select "C1",my_map['C1'] from my_external_table;
result >> C1    D1
          C1    H1
hive >> select map("C1",my_map['C1']) from my_external_table;
result >> {"C1":"D1"}
          {"C1":"H1"} 
```

假设您想使用一些现有的地图键值创建一个新表，请执行以下操作：

```
hive >> create table my_new_table as select map('C1',my_map['C1'],'C2',my_map['C2']) from my_external_table;
hive >> select * from my_new_table;
result >> {"C1":"D1","C2":"D2"}
          {"C1":"H1","C2":null} 
```

**因此，使用上述方法，我可以创建新表来存储键名和值名，并对它们执行任何类型的转换，前提是初始数据存储为键值对。**

**注意**：

1.  您可以轻松创建一个脚本，该脚本将根据需要将列名添加到您的配置单元查询中。
2.  假设您的“初始”数据不包含列名，您可以将数据转换为包含列名。或者，您可以使用自定义映射器将数据作为键值对回显
3.  我保留了自己的分隔符，可以根据需要随意更改。
4.  您也不需要 column1 和 column2 。我只是保留它是为了向您展示所有数据不必是键值对

# css - 如何在 CSS 中水平打印页面

> ID：12860783
> 
> 赞同：0
> 
> 时间：2012-10-12T14:03:18.423
> 
> 标签：css, printing, landscape

> **可能重复：**
> [从 HTML 横向打印](https://stackoverflow.com/questions/138422/landscape-printing-from-html)

如何在 CSS 中水平打印页面。

```
size : landscape 
```

或者

```
width: 100%; 
height: 100%; 
margin: 0% 0% 0% 0%; filter: progid:DXImageTransform.Microsoft.BasicImage(Rotation=1); 
```

代码块不工作。我尝试将这些块写入正文标记类。那么，谁能帮帮我？

**- - - - - 编辑 - - - - -**

这是我现在使用的代码：

```
<style type="text/css" media="print">
    .land {
        -webkit-transform: rotate(-90deg); 
        -moz-transform: rotate(-90deg);
        filter:progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    }
</style>
<body class="land"> 
```

# java - 在java中的浏览器上显示一个html格式字符串

> ID：12860794
> 
> 赞同：-1
> 
> 时间：2012-10-12T14:04:02.373
> 
> 标签：java

我在用 java 的浏览器上显示 html 格式的字符串时遇到问题。这里我有一个这样的java字符串

```
<HTML><HEAD><TITLE>403 Forbidden</TITLE></HEAD><BODY><H2>403 Forbidden</H2>
</P></H3>You need permission for this service</BODY></HTML> 
```

使用这种方法“rep.formForbidden()”，我得到了这个 html 格式字符串，所以我需要它在我的浏览器上显示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:26:34.433

如果您需要整个字符串：

```
<HTML><HEAD><TITLE>403 Forbidden</TITLE></HEAD><BODY><H2>403 Forbidden</H2>
</P></H3>You need permission for this service</BODY></HTML> 
```

要在浏览器中按原样显示，您需要使用`<code>`或`<pre>`HTML 标记来包装它。

> 我在问如何在我的浏览器上显示这个字符串

像这样包装它：

```
<pre>
    <HTML><HEAD><TITLE>403 Forbidden</TITLE></HEAD><BODY><H2>403 Forbidden</H2>
    </P></H3>You need permission for this service</BODY></HTML>
</pre> 
```

# android - Android - ViewHolder 模式是否在 CursorAdapter 中自动实现？

> ID：12860795
> 
> 赞同：31
> 
> 时间：2012-10-12T14:04:06.453
> 
> 标签：android, database, android-cursoradapter

我总是在我的自定义类中使用`ViewHolder`模式。`ArrayAdapter`但是，在`CursorAdapter`方法`getView()`中并不是强制要求被覆盖，而是具有`bindView`和`newView`方法。

我的问题是 - 是`CursorAdapter`通过内部实现`ViewHolder`模式来重用视图还是需要像我们通常在 custom 中那样进行编码`ArrayAdapter`？如果需要编码，正确的方法是什么？

**更新**

我正在使用`android.support.v4.widget.CursorAdapter`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-12T14:13:22.143

> 我的问题是 - CursorAdapter 是通过内部实现 ViewHolder 模式来重用视图，还是需要像我们通常在自定义 ArrayAdapter 中那样进行编码？

我不确定你所说的`ViewHolder`模式是什么。如果您指的是有一个帮助类来缓存每次查找视图（并将其设置为 row 的标签`View`），那么答案是否定的。如果要实现此模式，您需要在方法中设置持有者（使用 查找行视图中的视图`findViewById`），`newView`然后将其设置为行视图的标记。然后在`bindView`您可以调用的方法中`getTag`，检索持有者并使用它。一个例子：

```
// custom CursorAdapter ...

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View rowView = ((LayoutInflater) context
                .getSystemService("layout_inflater")).inflate(
                R.layout.row_layout, parent, false);
        ViewHolder holder = new ViewHolder();
        holder.v1 = rowView.findViewById(R.id.v1);
        holder.v2 = rowView.findViewById(R.id.v2);
        rowView.setTag(holder);
        return rowView;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        ViewHolder holder = (ViewHolder) view.getTag();
        // use the holder filled with views
        // hlder.v1.setSomething
    }

    class ViewHolder {
        View v1, v2;
    }
// ... 
```

如果您指的是`convertView`被重用（如在非`Cursor`基于适配器中），那么答案是肯定的，该`getView`方法实现了这种模式，您只需要实现`newView`and`bindView`方法，您就可以保证获得一个被回收的视图（如果可能的话在那一刻）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:11:57.823

您还没有说明您使用的是平台版本还是支持库版本`CursorAdapter`。无论哪种情况，Android都是开源的，所以你可以自己寻找！

[android.support.v4.widget.CursorAdapter](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/widget/CursorAdapter.java)
[android.widget.CursorAdapter](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/widget/CursorAdapter.java)

如果您使用的是 Chrome，[Android SDK 参考搜索](https://chrome.google.com/webstore/detail/android-sdk-reference-sea/hgcbffeicehlpmgmnhnkjbjoldkfhoin)组件非常有用！

# list - Haskell - 如何创建矩阵

> ID：12860798
> 
> 赞同：6
> 
> 时间：2012-10-12T14:04:07.707
> 
> 标签：list, haskell, matrix

给定矩阵的大小和位置 p。如何用 p 中的 1 和其他位置的 0 填充矩阵？

```
Ex.: size=(3,3) p=(3,1)

[0 0 0]
[0 0 0]
[1 0 0] 
```

我定义：

```
type Matrix= [[Int]]
type Pos = (Int,Int)

f:: Pos->Pos->Matrix 
```

例如，`f`回报将是：

```
 [[0,0,0],[0,0,0],[1,0,0]] 
```

我很难开始，即不知道如何实现该功能`f`。谁能帮我？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T20:00:20.113

我喜欢 AndrewC 的回答，但我会一口气完成，嵌套列表推导并仅测试位置的相等性，而不是单独的行和列。

```
f :: Pos -> Pos -> Matrix
f (h, w) p =  [ [if (y, x) == p then 1 else 0 | x <- [1..w]]
              | y <- [1..h]] 
```

我选择了我的对齐方式，以便`x`水平`y`延伸和垂直延伸，事情的核心是根据坐标定义典型元素的表达式。如果行不同，则不会对列进行比较。我想人们可以`replicate w 0`稍微更有效地计算全零行，但要以清晰为代价。

我也考虑写

```
g :: Pos -> Pos -> Matrix
g (h, w) (y, x)  =   replicate (y-1) wzeros
                 ++  (replicate (x-1) 0 ++ 1 : replicate (w-x) 0)
                 :   replicate (h-y) wzeros
  where wzeros = replicate w 0 
```

它更长，但在空间上更直接。它保留了更多的共享，并且可能减少了一些减法。但是如果位置超出相关范围，它的行为会有点奇怪。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T14:45:50.993

您可以通过两个列表推导来做到这一点，一个在彼此内部使用：

将问题分解为两个较小但相似的问题：

```
row b lengthacross = 
   [ --some expression that's 1 if x == b and zero otherwise
         | x <- [1..lengthacross]] 
```

会有什么类型`row`的？

```
matrix (a,b) (lendown,lenacross) = 
   [ --a row with a 1 in it or just zeros as appropriate 
        | y <- --an appropriate list
          ] 
```

会有什么类型`matrix`的？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-12T14:17:01.850

分解它。

1.  编写一个类型的函数，`Pos -> [[Pos]]`它需要一个大小，并给出一个该大小的“矩阵”，但每个元素都有自己的位置。

    例如`ofSize (2,2) = [[(1,1), (1,2)], [(2,1), (2,2)]]`

2.  编写一个与`(a -> b) -> [[a]] -> [[b]]`类似的类型的函数`map`。（线索：定义特征`map`。两次。）

然后，您可以将这些部分组装成一个函数，该函数首先生成一个位置“矩阵”，然后将其映射到所需的结果。

# magento - 在magento中添加名称属性以过滤

> ID：12860799
> 
> 赞同：0
> 
> 时间：2012-10-12T14:04:20.877
> 
> 标签：magento

有没有办法`name`在 Magento 分层导航中显示属性以按名称过滤产品。我需要在过滤器中列出一些产品并提供多选功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:37:06.267

您只能在分层导航中使用下拉菜单、多选和价格。

我不确定您为什么需要在其中使用 Name，但获得它的一种可能方法是创建一个名为 ln_name 之类的产品属性下拉列表，设置在分层导航中使用，然后将其分配给属性集。然后，您必须使用目录中的所有产品名称填充 ln_name，然后转到每个产品并从列表中选择产品名称并保存。在前端，您可以将产品名称作为分层导航选项。

**在下面回答您的第二个问题：**

添加一个名为“left_nav”的“是/否”属性并将其添加到您的属性集中。转到您的产品列表并将“left_nav”设置为“是”以获取您想要包含在集合中的任何产品。在您的模板中使用此代码来调用产品。注意：我没有对此进行测试，但它应该可以工作。

```
$product_collection = Mage::getResourceModel('catalog/product_collection')
                      ->addAttributeToSelect('*')
                      ->addAttributeToFilter('left_nav', array('eq' => 1))
                      ->addAttributeToFilter('status', 1)
                      ->load();
foreach ($product_collection as $product) {
    echo '<a href="'.$product->getProductUrl().'">'.$product->getName().'</a>';
} 
```

# python - 在 Google App Engine Python 运行时中解析从字符串到日期时间的 UTC 偏移量

> ID：12860802
> 
> 赞同：1
> 
> 时间：2012-10-12T14:04:34.157
> 
> 标签：python, google-app-engine, datetime, strptime

我想将 2012-10-12T16:55+0300 之类的 POST 参数解析为一种`datetime`类型，以便将其存储在`ndb.DateTimeProperty()`我的模型中。

因此，我所拥有的是：

```
from datetime import datetime
.....
my_date = datetime.strptime(self.request.get('my_date'), '%Y-%m-%dT%H:%M%z') 
```

此调用会生成以下错误：

> 错误 2012-10-12 14:03:08,376 webapp2.py:1553] 'z' 是格式为 '%Y-%m-%dT%H:%M%z' 的错误指令

关于如何解决这个问题的任何想法？我已经阅读了各种帖子，但没有一个对我有帮助。

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:22:09.240

似乎有人为您看到的问题提交了错误，但被拒绝（请参阅[此处](http://bugs.python.org/issue6641)）。简而言之，并不总是支持 %z。引用错误报告：

> “仅支持 [of time.strftime()] 文档中指定的指令。因为 strftime() 是按平台实现的，它有时可以提供比列出的指令更多的指令。但是 strptime() 独立于任何平台，因此不必须支持所有未记录为支持的可用指令。”

# python - 如果在 python 中附加到数组，如何更优雅地执行 elif 语句

> ID：12860804
> 
> 赞同：9
> 
> 时间：2012-10-12T14:04:36.143
> 
> 标签：python, loops

我正在尝试对这段代码做一个更优雅的版本。这基本上只是根据数字将一个字符串附加到 categorynumber 。将不胜感激任何帮助。

```
number = [100,150,200,500] 
categoryNumber = []

for i in range (0,len(number)):
    if (number [i] >=1000):
        categoryNumber.append('number > 1000')
    elif (number [i] >=200):
        categoryNumber.append('200 < number < 300')
    elif (number [i] >=100):
        categoryNumber.append('100 < number < 200')
    elif (number [i] >=50):
        categoryNumber.append('50 < number < 100')      
    elif (number [i] < 50):
        categoryNumber.append('number < 50')

for i in range(0,len(categoryNumber)):
    print i 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-12T14:08:57.010

怎么样：

```
labels = (
    (1000, 'number >= 1000'),
    (200,  '200 <= number < 1000'),
    (100,  '100 <= number < 200'),
    (50,   '50 <= number < 100'),
    (0,    'number < 50'),
)

for i in number:
    for limit, label in labels:
         if i >= limit:
             categoryNumber.append(label)
             break 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T14:31:27.193

使用 bisect 怎么样？

```
>>> import bisect
>>> categories = ['number < 50', '50 <= number < 100', '100 <= number < 200', '200 <= number < 300', '300 <= number <1000', 'number >= 1000']
>>> points = [50, 100, 200, 300, 1000]
>>> categories[bisect.bisect(points, 1000)]
'number >= 1000'
>>> categories[bisect.bisect(points, 1)]
'number < 50'
>>> categories[bisect.bisect(points, 50)]
'50 <= number < 100' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-12T14:24:15.963

您的逻辑对于您想要在第二个 elif 上执行的操作似乎很奇怪，因为 number[i] 等于大于 200 的值，例如。350，它将附加类别“200 < number < 300”。不是 200 <= number < 1000 吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T14:30:33.870

就个人而言，我偏爱这种解决方案：

```
number = [100,150,200,500]

def getCategory(num):
    return ['number < 50', '50 <= number < 100', '100 <= number < 200', '200 <= number < 1000', 'number >= 1000'][(num >= 50) + (num >= 100) + (num >= 200) + (num >= 1000)]

categoryNumber = map(getCategory, number) 
```

我知道该功能的可读性会受到一些影响。我还利用了 Python 将“True”视为 1 的事实。通过将连续比较相加，我找到了正确的返回条目。

稍微清理一下，这更好看：

```
number = [100,150,200,500]

def getCategory(num):
    limits = [50, 100, 200, 1000]
    msgList = ['number < 50',
               '50 <= number < 100',
               '100 <= number < 200',
               '200 <= number < 1000',
               'number >= 1000']
    return msgList[reduce(lamdba c, l: c+(num >= l), [0] + limits)]

categoryNumber = map(getCategory, number) 
```

我喜欢这个是使用'map'和'reduce'使得for循环变得不必要。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T14:31:31.063

像这样的东西：

```
number = [199,75,235,1200,25,49,74,200,51,650]
dic={(1000,float('inf')):'number > 1000',
     (200,300):'200 < number < 300',
     (100,200):'100 < number < 200',
     (50,100): '50 < number < 100',
     (0,50): 'number < 50'}

for x in number:
  for y in dic:
    if x>y[0] and x<y[1]:
      print(x,"is",dic[y]) 
```

**输出：**

```
199 is 100 < number < 200
75 is 50 < number < 100
235 is 200 < number < 300
1200 is number > 1000
25 is number < 50
49 is number < 50
74 is 50 < number < 100
51 is 50 < number < 100 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-12T15:09:59.130

您可以简化 Martijn Pieters 的解决方案。而不是这段程序代码：

```
for i in number:
    for limit, label in labels:
         if i >= limit:
             categoryNumber.append(label)
             break 
```

您可以使用准功能：

```
for number in numbers:
    label = next(label for limit, label in labels if number >= limit)
    categoryNumber.append(label) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-12T15:35:49.940

您可以使用[运算符](http://docs.python.org/library/operator.html)执行以下操作：

```
import operator
number = [101,151,201,500,1000,45] 
ops={operator.ge:'>=', operator.gt:'>',operator.lt:'<', operator.le:'<='}
cats=(
    (1000, operator.ge,'number >= 1000'),
    (200, operator.ge,'200 <= number < 1000'),
    (100, operator.ge, '100 <= number < 200'),
    (50, operator.ge, '50 <= number < 100'),
    (50, operator.lt, 'number < 50')    
)

for i in number:
    for x, op, label in cats:
        if op(i,x): 
            print '{0:5}{1:^4}{2:5} therefore: {3}'.format(i,ops[op],x,label)
            break 
```

印刷：

```
 101 >=   100 therefore: 100 <= number < 200
  151 >=   100 therefore: 100 <= number < 200
  201 >=   200 therefore: 200 <= number < 1000
  500 >=   200 therefore: 200 <= number < 1000
 1000 >=  1000 therefore: number >= 1000
   45 <     50 therefore: number < 50 
```

或者你可以这样[做](https://stackoverflow.com/a/12862038/648852)：

```
for n in numbers:
    result = next('{0:5}{1:^4}{2:5} therefore: {3}'.format(n,ops[op],x,label) 
                      for limit, op, label in cats if op(n,limit))
    print result 
```

# mysql - 独占查询、左外连接或添加查询

> ID：12860806
> 
> 赞同：0
> 
> 时间：2012-10-12T14:04:40.967
> 
> 标签：mysql, left-join, tornado

我有两张桌子：

```
nets_permissions

    user_id INT NOT NULL,
    network_id BIGINT UNSIGNED NOT NULL,
    perm INT(3) NOT NULL,
    PRIMARY KEY(user_id, network_id)

devices_permissions

    user_id INT NOT NULL,
    network_id BIGINT UNSIGNED NOT NULL,
    device_id INT UNSIGNED NOT NULL,
    perm INT(3) NOT NULL,
    PRIMARY KEY(user_id, network_id, device_id), 
```

对`nets_permissions table`每个用户都有权限。一个用户可以有不同的 perm 值：1 表示读取权限，2 表示写入权限，4 表示读取+命令权限。网络管理员的 perm 值为 3。

第二个表也是如此，但这次是针对特定网络中的设备。当网络和设备的管理员授予用户权限时，用户将被添加到此表中。但是该网络的管理员未在此表中注册。他只在 perm=3 的 nets_permission 表中。

我必须在 Tornado Web 服务器的处理程序中创建一个选择当前用户权限的查询。代码是这样的形式：

```
# Retrieve the current user 
    usr = self.get_current_user()
    usr_id = usr['id']
    self.lock_tables("read", ['nets_permissions as n, devices_permissions as d'])
    usrperm = self.db.query("SELECT * FROM nets_permissions as n 
         LEFT OUTER JOIN devices_permissions as d 
              ON n.network_id = d.network_id WHERE d.user_id=%s 
                 AND d.device_id=%s", 
         int(usr_id), sens.id);
    self.unlock_tables() 
```

在 usr_id 我检索的是当前用户的 id。

当前用户可以是网络的管理员（因此他仅在 nets_permissions 表中，perm=3）或对特定设备具有某些权限的用户（因此他仅在 devices_permissions 表中，具有某些 perm 值）。

在查询结果“userperm”中，我将使用一个整数在 html 页面中与权限值进行比较，并向用户显示或不显示某些内容。

对不起我的英语，但很难为我解释这个问题。我不知道我可以构造查询以获得我想要的结果。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:40:30.043

```
SELECT distinct 'net', network_id, perm
FROM nets_permissions n
JOIN devices_permissions d
USING (user_id, network_id)
WHERE n.user_id = '%s'
AND d.device_id = '%s'

UNION ALL

SELECT 'device', network_id, perm
FROM devices_permissions
WHERE user_id = '%s'
AND device_id = '%s' 
```

但是，您的数据模型似乎存在问题。如果设备没有用户对该设备具有权限，则 不会有一行`devices_permissions`，因此我们将无法找到它的`network_id`. 您需要更好地规范这一点：应该有一个`device_network`表格来关联它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:27:58.120

由于用户可以在一个或两个表中，您可能希望执行 UNION 而不是 Join。

Union 语句的工作方式如下：

```
select * from (
   Select User_ID, network_id, network_id, perm from nets_permissions
   union
   Select User_ID, network_id, device_id, perm from devices_permissions)
where user_id = 'id' 
```

上述格式为您提供了更大的灵活性。您可以进一步修改外部选择，使每个用户只有一行，或者每个用户的最高权限，或者每个用户的权限总数等。

# c# - 添加不带 ViewModelClass.ModelClass 注释的 ModelStateError

> ID：12860808
> 
> 赞同：0
> 
> 时间：2012-10-12T14:04:43.687
> 
> 标签：c#, asp.net-mvc, validation, modelstate

我为我的模型创建了一个特殊的视图模型类，用于将要计算的数据添加到模型中，比如一些 int 时间

```
public class SessionView
{
    public Session Session { get; set; }
    public int StartHour { get; set; }
    public int StartMin { get; set; }
    public int EndHour { get; set; }
    public int EndMin { get; set; }
} 
```

当我使用自定义验证器进行验证时，我将错误添加到 ModelState 中，而没有视图所需的“.Session”来找到在回发时添加错误的正确位置。

我如何才能通过将其添加为`ModelState.AddModelError("Name","error")`而不是来显示错误`ModelState.AddModelError("Session.Name","error")`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T16:06:55.640

恐怕这是不可能的。如果在视图内，您有以下字段：

```
@Html.EditorFor(x => x.Session.Name)
@Html.ValidationMessageFor(x => x.Session.Name) 
```

那么它对应的`ModelState`键是`Session.Name`，如果你想将它与错误消息相关联，这就是你应该使用的。

但是为了避免这些问题，您可以使用数据注释或编写自定义验证属性，然后用这些属性装饰相应的属性。这样您就不必担心密钥，因为如果您正在使用例如集合，事情可能会变得更加丑陋 - `Sessions[3].Name`.

作为数据注释的替代方法，您可以[查看 FluentValidation.Net](http://fluentvalidation.codeplex.com/)。

# vb.net - 使用 BackgroundWorker ProgressChanged 事件更新图表？

> ID：12860810
> 
> 赞同：3
> 
> 时间：2012-10-12T14:04:56.617
> 
> 标签：vb.net, charts, backgroundworker

我有一个显示图表和进度条的表单。一些复杂的计算由`BackgroundWorker`组件进行，以便表单保持响应。结果被附加到一个列表中，然后`ReportProgress`调用该方法，以便`ProgressChanged`事件处理程序可以更新进度条（它会这样做）。

但是，我正在努力在`ProgressChaned`成功更新进度条的同一事件处理程序中更新图表。我认为这是可能的？我希望图表在每次迭代后更新`BackgroundWorker`。我无法直接从 更新图表，`BackgroundWorker`因为它在不同的线程上工作。

尝试更新图表的事件处理程序中的代码`ProgressChanged`如下：

```
Me.ResultsChart.DataSource = myResultsList
With Me.ResultsChart.Series("Results")
    .XValueMember = "Iteration"
    .YValueMembers = "ObjectiveFunction"
End With 
```

`myResultsList`清单很简单。它被定义为`Private myResultsList As List(Of Results) = New List(Of Results)`。该类`Results`仅包含两个属性：`Iteration`和`ObjectiveFunction`。

`BackgroundWorker`目前，它没有给出任何错误，但在任务完全完成之前图表不会更新。当我将数据分配给图表时，我应该做一些不同的事情还是完全不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:55:00.620

我已经对此进行了排序，基本上后台工作人员的迭代速度比图表更新的速度快。因此，我现在正在清除图表并每次在单独的线程中读取整个结果列表。一旦后台工作程序中的完整逻辑建立起来，这个问题可能会“自我修复”，因为迭代需要更长的时间，但现在这可行。

# linux - ctags 找不到所有 gtk 方法

> ID：12860816
> 
> 赞同：0
> 
> 时间：2012-10-12T14:05:25.770
> 
> 标签：linux, gtk, ctags

我想为 gtk-3.0 创建一个完整的标签列表。

所以我尝试了

```
ctags -R --c++-kinds=+p --fields=+iaS /usr/include/gtk-3.0/ 
```

它有效，但列表不完整。例如缺少 gtk_file_chooser_dialog_new，但我绝对可以在 /usr/include/gtk-3.0/gtk/gtkfilechooserdialog.h 中看到它：

```
GtkWidget *gtk_file_chooser_dialog_new (const gchar *title,
              GtkWindow            *parent,
              GtkFileChooserAction  action,
              const gchar          *first_button_text,
              ...) G_GNUC_NULL_TERMINATED; 
```

所以我只尝试了这个文件，仍然没有找到 gtk_file_chooser_dialog_new：

```
ctags --c++-kinds=+p --fields=+iaS /usr/include/gtk-3.0/gtk/gtkfilechooserdialog.h 
```

这是生成的： [https ://gist.github.com/3879327](https://gist.github.com/3879327)

在此先感谢，库尔佩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:42:56.037

我实际上建议尝试将[GNU global](http://www.gnu.org/software/global/)作为 ctags/etags 的兼容替代品。在发现与您描述的相似的令人失望的结果后，我开始使用它。我针对 gtk-3.0.12 tarball 进行了测试：

```
$ cd gtk+-3.0.12
$ gtags
$ global gtk_file_chooser_dialog_new
gtk/gtkfilechooserdialog.c 
```

该文档显示[了支持的编辑器的示例，](http://www.gnu.org/software/global/globaldoc_toc.html)用于浏览代码库中的对象。一个快速版本`less`如下所示：

```
$ export LESSGLOBALTAGS=global
$ less -t gtk_file_chooser_dialog_new 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T17:19:36.207

由于有几个 GTK 宏，Ctags 会忽略方法声明。

传递参数以忽略它们可以解决问题：

```
ctags -R --c++-kinds=+p --fields=+iaS -I G_GNUC_NULL_TERMINATED -I G_GNUC_CONST  -f gtk3 /usr/include/gtk-3.0/ 
```

它们可能更多，所以这个列表并不完整，但它增加了额外的 418 个符号。

# c++ - 在 C++/C 中声明变量时

> ID：12860822
> 
> 赞同：8
> 
> 时间：2012-10-12T14:06:17.393
> 
> 标签：c++

当我声明一个变量时，例如：

```
 int x = 6; 
```

究竟是`x`什么？内存中的地址通常是十六进制的。
另外，当我调用 X

```
x = 2; 
```

编译器如何知道在哪里`x`？`x`不是地址。

那是我的第一个问题。

第二：
假设我有一个对象：
`Person p;`
`p`有 2 个数据成员：

```
 int type1, int type2; 
```

究竟是什么`p`，为什么我需要去`p`，然后是变量？

```
p.type1, p->type1. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:10:42.407

在这种情况下`int x = 6`，`x`只是一个帮助您编写代码和编译器编译它的名称。它基本上是内存中某个位置的别名，因此以后通过它更容易访问它`x = 2`- 这告诉您和编译器您想`2`在同一个位置写入值。

和以前一样，但它占用了更多的空间（`sizeof(Person)`准确地说）。`p->type1`仅当`p`是指向 a 的指针时才有效`Person`（或者如果您重载了`->`运算符，但事实并非如此），`p.type1`是用于对象的语法，以指定要访问的对象的哪一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-12T14:08:14.647

```
int x=6 ; 
```

这`x`是标识符，即`name given to memory area`存储值 6 的位置。
`x`是一个简单的名称，仅用于标识存储值 6 的内存区域。
当你声明变量时，那个时候编译器将你的变量名存储在标识符表中。

对于`person p`，这里又`p`是给内存区域起的名字，它存储了两个数据成员`type1`&`type2`

要访问`type1`&的值`type2`，首先你必须找到存储它们的内存区域。这就是为什么你必须先访问内存区域`p`然后你才能访问`type1 * type2`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-12T14:12:14.520

`x`是一个左值，表示“定位器值”。之所以这样称呼它，是因为`x`编译器知道它的位置。所以`x`在某种意义上是一个地址，或者可以推断出一个地址的东西。

那个*东西*只有在读取时才成为一个值

```
int a = x; 
```

在这种情况下，编译器获取`x`，读取其位置中的值，然后在该初始化中`x`代表其值。不幸的是，这种“读取值”是一个隐含的过程，因此文本`x`是值还是左值取决于它出现的位置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-12T14:21:23.003

```
int x = 6; 
```

*X究竟是什么？*

`x`是一个变量，可以定义为**内存中某个位置的名称。**

*编译器如何知道 x 在哪里？*

有一种叫做**符号表**的东西，编译器在内部使用它来将变量名映射到实际的内存位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-12T16:02:49.673

道不是事物。

所有`x`, 和`p`, 和 就此而言`p.type1` *都是*名称或标识符。所以，我猜你真的在问*他们的身份*。答案是它们识别出*某些东西*，它的行为*就好像*它满足了语言规范提出的某些要求。这个确定的东西*实际上*是什么取决于你的平台、编译器，也许你打开了哪些优化等等。

所以，让我们接受声明

```
int x = 6; 
```

您是说`x`现在（在此范围内和可能的嵌套范围内）将引用一个`int`（无论是什么），并为其赋予初始整数文字值`6`。

那么，什么是`int`? 它可以在*range*内保存单个（正或负）整数值`[std::numeric_limits<int>::min(),std::numeric_limits<int>::max()]`。它的确切大小取决于架构，但它至少与 a 一样大`char`且不大于 a `long`(IIRC)。

*这件事的*可能候选人：

*   足够的内存来保存`int`平台上的任何内容，如果它是全局声明，则与链接器符号（可能在运行时重定位）相关联，因此所有引用的代码都`x`使用相同的内存位置
*   如果堆栈（或堆栈帧）指针寄存器是函数范围的局部变量，则在与堆栈（或堆栈帧）指针寄存器的固定偏移量处有足够的内存：编译器负责跟踪它将放在每个函数中的变量，并记住与哪个偏移量相关联每个标识符。这是一个常见的默认（未优化）情况
*   一个足够大的寄存器来存储一个`int`: 如果你从不获取它的地址，`x`它可能会在一个寄存器中度过它的整个生命，但是如果你要么获取地址，要么编译器用完所有变量的寄存器（或需要在函数调用中保存它们），`x`可能会在您使用它时加载到寄存器中，并溢出回堆栈。同样，由编译器来记住当前*何时* `x`是寄存器（以及哪个寄存器），以及何时是内存位置

* * *

如您所见，“事物”`x`标识实际上可以是很多事物，在程序执行期间的不同点。

除非您正在优化某些内容或仔细布置内存，否则更有用的问题是*x 的属性是什么*？

标准（或任何语言规范，实际上）的重点是对类型、变量和行为做出一些有用的保证，然后让编译器选择如何实现这些保证。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-12T14:18:22.313

`x`是一个变量。或者更准确地说，是存储该变量所引用的那条信息（数据）的位置的名称或标签。您需要标签来区分不同的变量。它只是为您（程序员）提供帮助。

`p`又是变量，但类型为`Person`。并且`Person`是数据结构 - 它包含您通过结构访问的数据。并且`p`是这种类型的对象（ei 是结构的实例化）。您可以拥有两个相同类型的对象

```
Person p;
Person someone; 
```

为了知道您想要访问您使用的数据/成员`p.data` `someone.data`

为什么`p->data`？

`p->data`语法等价于`(*p).data`

这就解释了什么是指针。正如我所说，变量是您存储一些信息（数据）的地方。简单地说，指针是一个存储内存地址的变量。换句话说，它指向存储在内存某处的另一个值

例如：

```
Person p; // variable of type Person 
Person *pointer_to_p = &p; 
// a pointer that points to the variable p 
// it holds the address of p - that's what &p does it returns the address of a varible 
```

`*p`in`(*p).data`称为取消引用指针（访问指针指向的值）

有关更多信息，最好使用谷歌指针，甚至更好[地阅读一本书](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-12T16:17:34.800

让我们退后一步……重要的是要理解所有编程语言（除了汇编语言）都用程序员应该容易思考的术语来描述问题的抽象。编译器的工作是读取该抽象描述并生成与硬件直接对应的较低级别的描述。

当你写：

```
int x = 6; 
```

你是在告诉编译器你想使用一个整数变量，你想调用那个变量 x，并且你希望这个变量的值是 6。

编译器的工作之一是决定如何存储该变量。C++ 语言描述了各种变量范围，帮助编译器决定哪种存储是合适的。

*   局部变量（在函数内部声明）通常存储在堆栈的内存中，但可以将一个小值（例如整数）保存在寄存器中。

*   全局或静态变量将存储在内存中。

编译器记住它选择存储值的位置，以便它可以再次找到它——对于一个本地变量，它将是寄存器名称或相对于堆栈顶部的地址；对于全局或静态，它将是相对于所有程序数据开始的地址。

在程序被编译、链接和加载到内存之前，内存中的实际地址是未知的（因为操作系统可能并不总是将程序加载到相同的地址）——重要的是编译器知道变量在哪里*将*是，并且它可以生成代码来访问它。

如果像第二个问题一样，变量的类型是某种数据结构，编译器会以完全相同的方式选择将其放置在内存中的位置。当您的程序访问该结构的成员时，编译器可以计算出该成员的地址，因为它知道该结构的地址以及该成员在该结构中的偏移量。

因此，在您的`person p`示例中，当程序引用时`p1.type2`，编译器获取地址`p`并添加偏移量`type2`（可能为 4，因为您的第一部分`struct person`占用了`type1`整数，即 4字节（在大多数 32 位架构上））。

您必须同时指定两者`p`，`type2`因为您可能有另一个人（例如`q`），并且需要告诉编译器您要操纵哪个人。`p.type2`不是同一个变量`q.type2`，并且会有不同的地址。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-12T14:12:03.827

`x`是一个变量标识符。变量与地址的不同之处在于它有大小，并且不能为空。的地址`x`可以通过 获取`&x`。考虑这段代码：

```
int x = 5;
int* p = &x; // the pointer p now refers to x
x = 6; 
```

现在，即使您只更改了 的值`x`，如果您获得 的值`*p`（称为“取消引用”指针），您还将获得 6.`p`也是一个变量，但它的类型为“指向 int 的指针”而不是'int'，这是类型`x`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-12T14:33:08.877

可以自信地说，这是一个变量。

如果优化器将它放入寄存器，它可能没有内存地址。如果它确实有一个内存地址，它可以被赋予一个固定的绝对地址（对于不可重定位代码中的全局和静态），一个相对于其他对象的地址（对于非静态成员），或者一个相对于堆栈的地址框架（用于自动局部变量）。

如果编译器确定它总是可以预测值并在每次使用时替换该值，它甚至可能不是存储位置。

如果你`&`在变量上使用地址操作符，那么编译器将不得不给它一个内存位置。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-10-12T14:11:18.293

阅读堆栈和堆。

x 将被推送到具有唯一地址的堆栈中。但是你只需要调用 x。

但试试 cout << &x;

这是真实地址

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-10-12T14:14:51.303

当你声明你的变量时，你的编译器将它映射到一个变量属性表。该表包含地址和大小，类型等。因此编译器在需要时从该表中获取内容。

# powershell - 如何在 Powershell 中填充未知长度的数组？

> ID：12860830
> 
> 赞同：8
> 
> 时间：2012-10-12T14:06:55.980
> 
> 标签：powershell

您如何在 Powershell 中使用动态长度数组（ArrayLists / Lists）？我基本上想要一个二维数组，其中最外层索引的长度是未知的。

我尝试使用 初始化一个数组`$array = @()`，但是在处理其中的任何内容时都会出现索引超出范围异常。然后我尝试使用 += 操作数，正如我在一篇文章中所读到的，但这会导致字符串连接而不是元素添加。

例子：

```
$array = @()
$array += @("Elem1x", "Elem1y")
$array += @("Elem2x", "Elem2y")
Echo $array[0][0] 
```

输出：“E”而不是“Elem1x”；

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-12T14:11:21.677

试试这个方法：

```
$array = @()
$array += ,@("Elem1x", "Elem1y")
$array += ,@("Elem2x", "Elem2y")
$array[0][0] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-12T15:04:43.380

Christian 的回答是使用 PowerShell 的方式，并且适用于大多数情况（中​​小型数组）。如果您的数组很大，那么出于性能原因，您可能需要考虑使用 ArrayList。也就是说，每次使用`+=`数组时，PowerShell 都必须创建一个新数组并将旧内容复制到新数组中，并将新数组分配给变量。那是因为 .NET 数组是固定大小的。以下是使用 ArrayList 执行此操作的方法：

```
$list = new-object system.collections.arraylist
$list.Add(("Elem1x", "Elem1y", "Elem1z")) > $null
$list.Add(("Elem2x", "Elem2y")) > $null
$list[0][0] 
```

顺便说一句，运算符的`+=`作用取决于运算符左侧的对象类型。如果它是一个字符串，那么你会得到字符串连接。如果对象是数组，则将右侧附加到数组（通过创建新数组/副本）。

# android - 来自谷歌的 KML 文件作为位置指示器

> ID：12860831
> 
> 赞同：0
> 
> 时间：2012-10-12T14:06:56.737
> 
> 标签：android, google-earth, google-maps-api-2

我的应用程序使用来自谷歌地图的 KML 文件通过 URL 获取两个位置之间的地理点（成功运行了很长时间）

**https://maps.google.com/maps?f=d&hl=en&saddr=vishakapatnam&daddr=hyderabad&ie=UTF8&om=0&output=kml**

但现在不是下载 KML 文件，而是直接显示谷歌地图页面，并且它在应用程序中不起作用，因为我的应用程序的主要来源是 KML 文件，并且由于没有要解析的 KML 文件，解析器返回 NULL 指针异常

是否有任何其他提供 KML 文件的位置源？或任何其他可能解决我的问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:12:45.970

谷歌将这里的位置服务从kml 改为xml 或json 格式，所以最好使用google location json 服务。

检查[链接](https://stackoverflow.com/questions/11428650/draw-a-line-in-a-route-map/11428745#11428745)

谢谢

# ruby-on-rails - ActionController::RoutingError（未初始化 )

> ID：12860833
> 
> 赞同：3
> 
> 时间：2012-10-12T14:07:00.730
> 
> 标签：ruby-on-rails, routing, controller

我检查了常见的拼写错误或错误位置的文件。毫无疑问，这将是一件简单的事情——但我就是看不到。我错过了什么？

控制器/管理员/top_10_pages_controller.rb

```
class Admin::Top10PagesController < Admin::AdminController

end 
```

模型/top_10_page.rb

```
class Top10Page < ActiveRecord::Base

end 
```

路线.rb

```
namespace :admin do
  resources :top_10_pages
end 
```

耙路线

```
admin_top_10_pages     GET    /admin/top_10_pages           admin/top_10_pages#index                      
                       POST   /admin/top_10_pages           admin/top_10_pages#create                            
new_admin_top_10_page  GET    /admin/top_10_pages/new       admin/top_10_pages#new                      
edit_admin_top_10_page GET    /admin/top_10_pages/:id/edit  admin/top_10_pages#edit                     
admin_top_10_page      GET    /admin/top_10_pages/:id       admin/top_10_pages#show                   
                       PUT    /admin/top_10_pages/:id       admin/top_10_pages#update                 
                       DELETE /admin/top_10_pages/:id       admin/top_10_pages#destroy 
```

调用的 URL

```
/admin/top_10_pages 
```

开发日志中的错误

```
ActionController::RoutingError (uninitialized constant Admin::Top10PagesController): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:08:11.197

Bob - 我认为这是控制器文件本身名称的问题。

当我`"Top10PagesController".underscore`在控制台中运行时，我得到`"top10_pages_controller"`而不是`"top_10_pages_controller"`

看起来 rails 正在寻找错误的控制器文件。尝试将控制器名称更改为 top10_pages_controller.rb 看看是否有效？

# uml - Web 服务是 UML 中的参与者吗？

> ID：12860835
> 
> 赞同：1
> 
> 时间：2012-10-12T14:07:03.883
> 
> 标签：uml, use-case

我有一个网络项目（电子商务，买卖东西），用户可以在其中使用三个外部服务：

1.  Google OpenID（管理员身份验证）
2.  Facebook。（发布站点新闻，但仅在站点官方页面的墙上）
3.  亚马逊。（进行价格比较）。

由于它们是应用程序的**“外部”**，它们是否被视为**演员**？当我在**用例**中指定他们的角色时，我遇到了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:33:28.840

是的，他们是演员。与您正在建模的应用程序交互的所有外部实体都是参与者。

# php - 为什么 ë 百分比编码为 %EB 也编码为 %C3%AB？

> ID：12860837
> 
> 赞同：4
> 
> 时间：2012-10-12T14:07:09.340
> 
> 标签：php, character-encoding, percent-encoding

当我在 Web 应用程序的表单中输入 ë 时，这是由 Google Chrome 编码为 %C3%AB 的百分比。

当我使用 PHP 的 urlencode('ë'); 这被编码为 %EB。

为什么编码不同？

如何使用与使用 PHP 4 的 Google Chrome 相同的编码进行编码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:09:48.763

`%EB`是 ISO-8859-1 形式（单个字符）。

`%C3%AB`是 UTF-8 格式 ( `e`+ `¨`)。

它[应该开箱即用](http://codepad.org/wMtP6dX8)（如果您对文件使用较新版本的 PHP 和 UTF-8）。

# python - Python - 导入 if

> ID：12860841
> 
> 赞同：36
> 
> 时间：2012-10-12T14:07:31.023
> 
> 标签：python, if-statement, python-import

我为 urllib (python3) 编写了小包装器。*在 if*中导入模块是否**正确**且**安全**？

 *```
if self.response_encoding == 'gzip':
    import gzip 
```

我没有找到有关此代码的任何 PEP。然而，它困扰着我。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-12T14:17:58.083

Python 标准库使用它，所以它绝对是正确和安全的。请参阅[`os`模块源代码](http://hg.python.org/cpython/file/2.7/Lib/os.py)以获取一个很好的示例：

> ```
> if 'posix' in _names:
>     name = 'posix'
>     linesep = '\n'
>     from posix import *
>     try:
>         from posix import _exit
>     except ImportError:
>       pass
>     import posixpath as path
>     import posix
>     __all__.extend(_get_exports_list(posix))
>     del posix 
> ```

在 python 中有条件地导入模块是很常见的。而不是`if`，您也经常会看到`try:`/`except ImportError:`组合：

```
try:
    from subprocess import check_output
except ImportError:
    # Python 2.6 and before
    def check_output(*popenargs, **kwargs):
        from subprocess import Popen
        if 'stdout' in kwargs:
            raise ValueError('stdout argument not allowed, it will be '
                             'overridden.')
        process = Popen(stdout=PIPE, *popenargs, **kwargs)
        output, unused_err = process.communicate()
        retcode = process.poll()
        if retcode:
            cmd = kwargs.get("args")
            if cmd is None:
                cmd = popenargs[0]
            raise CalledProcessError(retcode, cmd)
        return output 
```

在这里，我们基本上使用`if`测试的道德等价物：如果您可以 import `check_output`，请这样做，否则在此处定义完整功能。

导入语句只是将外部代码重新绑定到本地名称。在这方面，使用控制流来控制导入与在语句中`if`分配变量没有什么不同。`if`您需要确保在没有以任何方式定义的情况下最终不会使用该名称。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-12T14:14:55.060

这实际上是一个相当普遍的成语。您有时会看到它在不同的模块之间进行选择：

```
if system == 'linux':
   import linuxdeps as deps
elif system == 'win32':
   import win32deps as deps 
```

然后，假设两者`linuxdeps`和`win32deps`具有相同的功能，您可以使用它：

```
deps.func() 
```

这甚至被用于进入`os.path`标准库（一些源代码`os`如下）：

```
if 'posix' in _names:
    name = 'posix'
    linesep = '\n'
    from posix import *
    try:
        from posix import _exit
    except ImportError:
        pass
    import posixpath as path

    import posix
    __all__.extend(_get_exports_list(posix))
    del posix

elif 'nt' in _names:
    name = 'nt'
    linesep = '\r\n'
    from nt import *
    try:
        from nt import _exit
    except ImportError:
        pass
    import ntpath as path

    import nt
    __all__.extend(_get_exports_list(nt))
    del nt 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-12T14:09:25.190

当然，那很好。在模块具有您并不总是想要运行的初始化代码的情况下，它甚至可能是必要的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-24T20:06:21.347

安全吗？是的。正如[Martijin的回答](https://stackoverflow.com/questions/12860841/python-import-in-if#answer-12861052)所指出的，官方Python使用了这个。

合适吗？依靠。[Python 性能文档](https://wiki.python.org/moin/PythonSpeed/PerformanceTips#Import_Statement_Overhead)指出，即使 python 可以避免导入相同的模块，仍然存在开销。

所以我相信你应该问问自己，if 语句多久是真的。如果经常，那么会有很大的开销，你应该在文件的开头导入它。如果不经常，那么在 if 语句中导入是一个明智的选择。*

# iphone - ios 6.0 应该自动旋转的问题

> ID：12860842
> 
> 赞同：2
> 
> 时间：2012-10-12T14:07:31.440
> 
> 标签：iphone, objective-c

我有一个应用程序商店支持版本 ios5+ 的应用程序。当我将此应用程序部署到商店时，基本 sdk 设置为 5.0，部署目标是 ios 5.0。它目前在 ios 5 和 6 设备上运行良好。

我已经将我的 IDE 升级到 ios 6.0 - 基础 SDK 是 6.0，部署目标是 5.0。但是，当我在 6.0 模拟器或设备中运行此应用程序时，由于该消息已贬值，我会遇到 shouldautorotate 问题。

1.  为什么如果我的部署目标是 5.0 会给我这些问题 - 我不想使用 ios 6。
2.  为什么我不能将我的基础 sdk 设置为 5.0？

**更新：** 这是我的控制器目前的外观。不幸的是，preferredInterfaceOrientation 只被调用一次，而不是每次方向改变时——这对我没有好处，因为我在这个方法中操作视图：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    [self layoutHomeViewButtons:toInterfaceOrientation];

    return YES;
}

- (BOOL)shouldAutorotate
{
    return YES;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationLandscapeRight;
}

- (NSUInteger)supportedInterfaceOrientations
{

    [self layoutHomeViewButtons:[self getInterfaceOrientation]];

    return UIInterfaceOrientationMaskAll;
} 
```

**更新 2：** 我已经弄清楚如何调用 supportInterfaceOrientations 方法。在我的 MainWindow.xib 中，我将 navigationcontroller 设置为窗口的根视图控制器。作为这个导航控制器的一个子项，我有我的 homeviewcontroller 上面的代码所在的位置。

如果我更改此链接以使窗口的 rootviewcontroller 成为 homeviewcontroller，则调用该方法。但是我的用户界面需要这个导航控制器！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T14:54:38.260

你所描述的听起来很像我在切换到 iOS 6 时所面临的情况。它归结为 self.window 在你的应用程序委托中的处理方式。如果它适用于你的情况，基本上，你想改变你的代码

```
[self.window addSubview:navigationController.view]; 
```

至

```
[self.window setRootViewController:navigationController]; 
```

一旦我这样做了，我的轮换消息突然按预期开始触发。这是我关于这个主题的博客文章：

[http://www.dosomethinghere.com/2012/09/24/the-app-delegates-uiwindow-is-finicky/](http://www.dosomethinghere.com/2012/09/24/the-app-delegates-uiwindow-is-finicky/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:48:24.730

To support the new rotation implement the following methods:

```
// Tell the system which orientations are supporter
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL) shouldAutorotate {
    return NO;
} 

// tell the system which rotation should be used when the viewcontroller is presented.
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    return UIInterfaceOrientationLandscapeRight;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T16:03:23.677

没有调用这些 ios6 方法的原因是因为我将窗口的 rootviewcontroller 设置为导航控制器而不是我的 homeviewcontroller，这就是没有调用这些方法的原因。

这对我的解决方案没有用，所以我正在寻找答案，但这确实解决了这个问题。

请参阅我试图弄清楚如何将导航控制器作为 rootviewcontroller 的后续问题：[iOS 6 bug：supportedInterfaceOrientations not called when nav controller used as window root](https://stackoverflow.com/questions/12862896/mainwindow-xib-does-not-allow-navigationcontroller-as-rootviewcontroller)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:17:50.043

我可以看到这个问题已经回答了。无论如何，我们在使用 Xcode 4.5 时遇到了同样的问题。但是，如果我们使用 Xcode 4.4.x 构建代码，即使没有 shouldAutorotate 方法，自动旋转也能完美运行。因此，尝试使用 Xcode 4.4.x 进行构建。

# c# - 当 .NET 应用程序由于 System.AccessViolation 异常而崩溃时，这意味着什么？

> ID：12860844
> 
> 赞同：4
> 
> 时间：2012-10-12T14:07:39.620
> 
> 标签：c#, .net, forms, exception

应用程序本身有 2000 行长，因此在此处粘贴代码是没有意义的，尤其是因为其中一位用户收到的异常没有提供任何提示，说明我的代码的哪一部分导致了问题。

顺便说一句，该应用程序只是一个带有 datagridview 的 Windows 窗体，通常显示不超过几百行数据和一些其他控件。在它崩溃之前，它加载 datagridview 每一行的单元格的速度非常慢。（但没有其他用户遇到过同样的问题。）

异常文本如下。有人可以查看它并告诉我它是否是由我的代码做错的事情引起的，或者可能与经历此异常的用户的特定设置不兼容？

我注意到下面的描述说内存已损坏。这是否意味着用户的计算机内存不好？？？

```
 ************** Exception Text **************
  System.AccessViolationException: Attempted to read or write protected memory. This is often an indication that other memory is corrupt.
     at System.Drawing.SafeNativeMethods.Gdip.GdipDrawRectangleI(HandleRef graphics, HandleRef pen, Int32 x, Int32 y, Int32 width, Int32 height)
     at System.Drawing.Graphics.DrawRectangle(Pen pen, Int32 x, Int32 y, Int32 width, Int32 height)
     at System.Windows.Forms.ControlPaint.DrawFlatCheckBox(Graphics graphics, Rectangle rectangle, Color foreground, Brush background, ButtonState state)
     at System.Windows.Forms.ControlPaint.DrawFlatCheckBox(Graphics graphics, Rectangle rectangle, ButtonState state)
     at System.Windows.Forms.ControlPaint.DrawCheckBox(Graphics graphics, Int32 x, Int32 y, Int32 width, Int32 height, ButtonState state)
     at System.Windows.Forms.ControlPaint.DrawCheckBox(Graphics graphics, Rectangle rectangle, ButtonState state)
     at System.Windows.Forms.CheckedListBox.OnDrawItem(DrawItemEventArgs e)
     at System.Windows.Forms.ListBox.WmReflectDrawItem(Message& m)
     at System.Windows.Forms.ListBox.WndProc(Message& m)
     at System.Windows.Forms.CheckedListBox.WndProc(Message& m)
     at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
     at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
     at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T13:15:03.430

没有更多代码，很难准确地说。这里有一些注意事项。

.NET 是一个托管环境，其基本原则之一是能够在编译时验证代码。具体来说，这意味着可以对代码单元做出某些保证，例如：

*   无法读取超出数组的范围
*   无法修改函数指针
*   无法读取/修改内存代码段
*   无法混淆对象引用的类型

尝试执行这些操作要么在编译时失败，要么在运行时出现异常。

您看到的异常是“不安全”代码的结果。Unsafe 确实有点用词不当——最好将其描述为“无法验证”。有时，出于性能原因，有必要放弃代码的可验证性，以通过指针算法等方式换取原始速度。

> 这个应用程序没有不安全的代码。

WinForms 广泛使用“不安全”代码。更准确地说，您的程序集没有任何不安全代码，但它依赖于不安全的库代码。

> 我注意到下面的描述说内存已损坏。这是否意味着用户的计算机有坏的RAM？

坏内存是可能的，但不太可能。当预期存在的值实际上不存在时，内存已损坏。这可能是由于硬件故障，也可能是软件错误。根据我的经验，通常会引发此异常以响应软件错误。该消息还说内存*可能*已损坏。

此处的堆栈跟踪实际上可能不是很有洞察力，因为内存可能在较早的时候已损坏，并且仅在您在此处看到的堆栈帧期间检测到。

> 对 user32.dll 的 ShowWindow 函数 (ShowWindow(p.MainWindowHandle, SW_SHOWDEFAULT);) 有 1 个平台调用调用，但此调用发生在消息循环开始之前。

这很可能是罪魁祸首。您是否尝试过使用托管的[Window.Show](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.show(v=vs.80).aspx)方法？可能是您的窗口还没有句柄，或者它发生了变化，或者因此出现了许多问题。在本机内容之上使用托管包装器时，通常尽量避免 PInvoke。

不幸的是，如果没有看到更多代码，就不可能提供更有用的答案，但希望以上内容为异常提供了一些上下文，并可以帮助您了解应用程序正在做什么以使 WinForms 进入此状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T15:34:44.350

我想提到这一点，因为这个异常突然出现在我面前，我花了几天时间才弄明白。我不知道上述问题是否相关，但也许它会帮助那些来寻找所述异常的人。

我正在测试一些日志代码，一旦签入测试，我们会在构建服务器上看到异常弹出。我们无法在我们的开发机器上本地重新创建它。

我决定将逻辑从构造函数移到方法中，突然异常变为 System.EntryPointNotFoundException！

在我们的测试工具中，我们使用记录器未引用的 System.WebAPI 排列对象。引用正确的库解决了这个问题。

**TL;博士; 当你看到这个异常时，不要将你的业务逻辑放在一个 Ctor 中并检查你的引用。**

# c# - 以多种语言更新资源文件 ASP.Net

> ID：12860845
> 
> 赞同：1
> 
> 时间：2012-10-12T14:07:43.863
> 
> 标签：c#, asp.net, visual-studio-2010, resx

我有一堆 ASP.Net 页面，我需要将它们本地化为丹麦语和英语。我接管了该项目，并且对于某些页面，`ascx.resx`和`ascx.da.resx`文件已经存在。自资源文件创建以来，添加了一些控件。我可以`XXXX.ascx.resx`通过“工具”-->“生成本地资源”（使用 Visual Studio 2010）用缺少的条目更新标准资源文件 ( )。

但是，我的问题来了，我该如何更新`ascx.da.resx`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:19:04.687

您可以使用`Resharper`并选择`option Generate Ressource`

链接： http: [//www.jetbrains.com/resharper/features/internationalization.html](http://www.jetbrains.com/resharper/features/internationalization.html)

# iphone - 如何在 UIButton 动画时识别触摸事件

> ID：12860846
> 
> 赞同：4
> 
> 时间：2012-10-12T14:07:48.793
> 
> 标签：iphone, objective-c, ios, xcode

我想用动画移动 UIButton，如果用户触摸它，它会移动，我想识别该事件，但在动画期间 UIButton 不发送任何事件。

请解决我的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-12T14:12:22.693

您是否尝试过 AllowUserInteraction 选项？

```
 [UIView animateWithDuration:5.0 
                       delay:0.0         
                     options:UIViewAnimationOptionAllowUserInteraction
                  animations:^{ // move the button }
                 completion:^(BOOL finished){}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:12:06.797

在动画期间，无论此属性中的值如何，动画中涉及的所有视图都会暂时禁用用户交互。您可以通过在配置动画时指定 UIViewAnimationOptionAllowUserInteraction 选项来禁用此行为。

此外，您可以实施

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

在superview中捕获事件并查看事件是否指向按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:12:23.223

作为`UIButton`从`UIControl`哪个继承继承`UIView`，我相信您正在使用基于块的方法来为您的按钮设置动画`animateWithDuration:delay:options:animations:completion:`

`UIViewAnimationOptionAllowUserInteraction`当您为 UIButton 设置动画以允许识别某些用户交互时，您需要添加该选项。正如您所试验的那样，默认情况下在动画期间禁用用户交互。

# c# - 获取主机但在主机应用程序关闭时

> ID：12860848
> 
> 赞同：-2
> 
> 时间：2012-10-12T14:07:55.787
> 
> 标签：c#

以下代码获取主机应用程序，在本例中为 CorelDraw 应用程序，并且在 corelDraw 正在运行且 exe 由 corelDraw 运行的情况下它可以正常运行：

```
 Corel.Interop.CorelDRAW.Application appDRAW =
                                    new  Corel.Interop.CorelDRAW.Application();
  app = (Application)this.Host; 
```

但是由于某些复杂的原因，即使没有运行 corel，我也需要使此代码运行，但除非 corel 正在运行，否则我不会使用应用程序实例，因此以任何方式通过名称或类似名称获取主机应用程序，或者只是为了甚至在它运行之前就指向宿主应用程序的 exe

也许像

```
app = (Application) getHostByExe("c:\corelPath\corel.exe"); 
```

和建议，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:34:40.957

这为我解决了

```
Dim obj As Object
Dim app As c.Application

obj = GetObject("", "CorelDRAW.Application")
app = CType(obj, c.Application) 
```

# jquery - 如何更改出现在 Chrome 日期字段中的 HTML5 占位符文本

> ID：12860851
> 
> 赞同：6
> 
> 时间：2012-10-12T14:08:01.727
> 
> 标签：jquery, html, datepicker, placeholder, datefield

我惊喜地发现以下代码在 Chrome 中查看时会呈现一个日期选择器：

```
<input type="date" name="wdate" id="wdate" value="" placeholder="date of purchase" /> 
```

但是，占位符文本将被忽略，而是显示“日期/月份/年份”。

如何更改占位符文本并使用我自己的？

我已经尝试过：

```
<script>
    $("#wdate").attr("placeholder", "Day/Month/Year of purchase");
</script> 
```

但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-21T20:40:33.513

较旧的问题，但这是我最近必须使用的解决方案。

您将无法使用 HTML5 日期字段，但这可以通过 jQuery UI 日期选择器来完成。 [http://jsfiddle.net/egeis/3ow88r6u/](http://jsfiddle.net/egeis/3ow88r6u/)

```
var $datePicker = $(".datepicker");

// We don't want the val method to include placehoder value, so removing it here.
var $valFn = $.fn.val;
$.fn.extend({
    val: function() {
        var valCatch = $valFn.apply(this, arguments);
        var placeholder = $(this).attr("placeholder");

        // To check this val is called to set value and the val is for datePicker element 
        if (!arguments.length && this.hasClass('hasDatepicker')) {
            if (valCatch.indexOf(placeholder) != -1) {
                return valCatch.replace(placeholder, "");
            }
        }
        return valCatch;
    }
});

// Insert placeholder as prefix in the value, when user makes a change.
$datePicker.datepicker({
    onSelect: function(arg) {
        $(this).val($(this).attr("placeholder") + arg);
    }
});

// Display value of datepicker
$("#Button1").click(function() {
    alert('call val(): {' + $datePicker.val() + '}');
});

// Submit
$('form').on('submit', function() {
    $datePicker.val($datePicker.val());
    alert('value on submit: {' + $datePicker[0].value + '}');
    return false;
});
```

```
.ui-datepicker { width:210px !important; }
```

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/themes/blitzer/jquery-ui.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<form method="post">
    <p>HTML5 Date: <input type="date" placeholder="html5 date:" /></p>
    <p>jQuery DatePicker: <input type="text" class="datepicker" placeholder="Start date:" /></p>
    <p><input id="Button1" type="button" value="Get DatePicker Value" title="Get DatePicker Value" /></p>
    <p><input type="submit" text="fire submit" /></p>
    <p>Original Source for this <a target="_blank" href="http://jqfaq.com/how-to-add-some-custom-text-to-the-datepickers-text-field/">JQFaq Question</a></p>
</form>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:58:27.473

[日期类型不支持占位符属性。](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-input-element.html#input-type-attr-summary) 此外，WebKit 实现说它是**[固定的。](http://trac.webkit.org/browser/trunk/Source/WebCore/html/DateInputType.cpp?rev=130375#L161)**

# inno-setup - 如何从 TInputQueryWizardPage 输入页面禁用编辑框？

> ID：12860860
> 
> 赞同：3
> 
> 时间：2012-10-12T14:08:23.030
> 
> 标签：inno-setup

是否可以从[TInputQueryWizardPage](http://jrsoftware.org/ishelp/topic_scriptclasses.htm#TInputQueryWizardPage)输入页面（使用[CreateInputQueryPage](http://jrsoftware.org/ishelp/topic_isxfunc_createinputquerypage.htm)函数创建的页面）有条件地禁用或隐藏编辑框？

我有 4 个编辑框，我需要根据上一个向导页面的输入禁用/隐藏最后两个。我该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T14:17:23.487

您可以通过[`TInputQueryWizardPage.Edits`](http://www.jrsoftware.org/ishelp/index.php?topic=scriptclasses&anchor=TInputQueryWizardPage)indexed 属性访问它们：

```
[Code]
var
  FirstEditIndex: Integer;
  SecondEditIndex: Integer;
  InputPage: TInputQueryWizardPage;  

procedure InitializeWizard;
begin
  InputPage := CreateInputQueryPage(wpWelcome, 'Caption', 'Dscription', 'SubCaption');

  // the Add method returns the Index of the just added edit box, and
  // you need to store those indexes to access the edit boxes later on
  FirstEditIndex := InputPage.Add('Name:', False);
  SecondEditIndex := InputPage.Add('Surname:', False);

  // access the edits through the stored indexes; in your case this will 
  // happen in the other event, so take this script as a showcase
  InputPage.Edits[FirstEditIndex].Enabled := False;  
  InputPage.Edits[SecondEditIndex].Visible := False;  
end; 
```

# javascript - Jquery在加载时滑动

> ID：12860861
> 
> 赞同：0
> 
> 时间：2012-10-12T14:08:25.657
> 
> 标签：javascript, jquery, jquery-ui

我有一个简单的滑块，可以点击。我怎样才能使其自动化，使其自动运行，同时保持点击功能不变？

```
$(document).ready(function() {
    var currentPosition = 0;
    var slideHeight = 360;
    var slides = $('.main-item');
    var numberOfSlides = slides.length;
    var tracker = 0;
    $('.slider-height').css('height', slideHeight * numberOfSlides);
    $('.slide-option li a').click(function() {
        tracker = $('.slide-option li a').index($(this));
        $('.slide-option li a').removeClass('current-item');
        $(this).addClass('current-item');
        //alert(tracker);
        $('.slider-height').animate({
            'top': slideHeight * (-tracker)
        });
        return false;
        //alert(tracker);
    });
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:40:11.267

绑定点击事件后触发点击：

```
$('.slide-option li a').trigger('click'); 
```

# php - PHP：在开始和结束始终相同的字符串中回显单词

> ID：12860863
> 
> 赞同：1
> 
> 时间：2012-10-12T14:08:29.117
> 
> 标签：php

我有以下字符串：

```
$out = '
<li style="margin: 0px; padding: 0px; ">myspace&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=myspace" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=myspace" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=myspace" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
<li style="margin: 0px; padding: 0px; ">google&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=google" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=google" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=google" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
<li style="margin: 0px; padding: 0px; ">youtube&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=youtube" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=youtube" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=youtube" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
<li style="margin: 0px; padding: 0px; ">ebay&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=ebay" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=ebay" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=ebay" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
<li style="margin: 0px; padding: 0px; ">yahoo&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=yahoo" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=yahoo" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=yahoo" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
<li style="margin: 0px; padding: 0px; ">craigslist&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=craigslist" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=craigslist" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=craigslist" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
<li style="margin: 0px; padding: 0px; ">you tube&nbsp;<a href="http://www.google.com/search?hl=en&lr=&q=you%20tube" rel="gb_pageset[]" title="Results @ Google" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/g-tiny.jpg" alt="Results @ Google" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a>&nbsp;<a href="http://search.yahoo.com/search?p=you%20tube" rel="gb_pageset[]" title="Results @ Yahoo" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/y-tiny.jpg" alt="Results @ Yahoo" border="0" style="margin: 0px; padding: 0px; " width="16" height="16">&nbsp;</a><a href="http://search.msn.com/results.aspx?FORM=MSNH&srch_type=0&q=you%20tube" rel="gb_pageset[]" title="Results @ MSN" style="margin: 0px; padding: 0px; text-decoration: none; color: rgb(51, 102, 255); "><img src="http://www.howrank.com/images/m-tiny.jpg" alt="Results @ MSN" border="0" style="margin: 0px; padding: 0px; " width="16" height="16"></a></li>
'; 
```

并且基本上想要回显之后显示的所有内容

```
<li style="margin: 0px; padding: 0px; "> 
```

和之前

```
&nbsp;<a href="http://www.goo 
```

我想看到的结果是：

myspace 谷歌 ebay 雅虎 craigslist 你管

我尝试了在 stackoverflow 上找到的各种方法，但由于某种原因，它要么只返回一个单词，要么出现 500 服务器错误，所以也许你知道正确的解决方案。

例如：

```
$startsAt = strpos($out, '<li style="margin: 0px; padding: 0px; ">') + strlen('<li style="margin: 0px; padding: 0px; ">');
$endsAt = strpos($out, '&nbsp;<a href="http://www.goo', $startsAt);
$result = substr($out, $startsAt, $endsAt - $startsAt);

echo $result; 
```

我知道，缺少一些 foreach 匹配的东西，但是由于我是 PHP 新手，我仍然坚持这一点，直到我完全理解这一切是如何工作的。我尝试了类似`foreach($result as match) { echo $match; }`的东西，但没有成功。一定是我想念的东西。

不要对我太苛刻，我对 PHP 还是很陌生（大约一周前开始），但我愿意学习 :)

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:17:01.647

```
if (preg_match_all('/>([^<>]+?)&nbsp;/', $out, $matches)) {
    print_r($matches[1]);
} 
```

这将捕获 和 之间的`>`文本`&nbsp;`。该部分匹配除了重复一次或多次的`([^<>]+?)`尖括号之外的任何字符，找到可能的最短匹配项。括号用于捕获这些匹配的部分，以便我们之后可以访问它们。`[^<>]``+``?``$matches[1]`

输出：

```
Array
(
    [0] => myspace
    [1] => google
    [2] => youtube
    [3] => ebay
    [4] => yahoo
    [5] => craigslist
    [6] => you tube
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:22:23.643

您可以在这里做一些事情...`explode`通过换行符（将您的`<li>..</li>`行作为一个数组或我们一个正则表达式 - 这当然有一些学习曲线。你的想法会起作用（几乎在那里）但是它依赖于以某种方式精确格式化的东西——有几种方法可以避免产生相同的结果。

```
<?php    
$out=/*...*/
function findStart($string,$last=0) {
   $start=strpos($string,"<li",$last);
   if ($start===false) return -1;//No new start
   $start=strpos($string,">",$start);
   if ($start===false) return -1;//Mal formed <li>?
   return $start+1;//Don't include the >
}

$start=0;
while (0<$start=findStart($out,$start)) {
   $end=strpos($out,"&nbsp;<",$start);
   if ($end!==false) {
     $set[]=substr($out,$start,$end-$start);
     $start=$end;//Forward the pointer for the next loop
   } else {$start=-1;}
}

//Now $set is an array of the values
print_r($set);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:15:26.657

您是否希望使用 PHP 解析 HTML，以便在 LI 中获得所有内容（甚至可能是嵌套的 HTML 元素）？问题是您可以在另一个 LI 中拥有相同的 LI 代码，因此使用字符串函数可能会很棘手。

也许PHP 中内置的[DOM 函数可以在这里提供帮助……](http://php.net/manual/en/book.dom.php)

# java - 程序捕获算术异常并将演示 finally 块

> ID：12860866
> 
> 赞同：-3
> 
> 时间：2012-10-12T14:08:36.150
> 
> 标签：java

我有问题。编码如下图所示。当我运行程序并输入“aaa”时，它显示错误，因为它只捕获算术异常。如何根据出现的问题添加适当的代码来克服异常？

```
import java.io.* ;
public class FinallyPractice1 
{
    public static void main(String [])
    {
        BufferedReader stdin=new BufferedReader(new InputStreamReader(System.in));
        String inData; int num=0, div=0;
        try
        {   System.out.println("Enter the numerator:");
            inData=stdin.readLine();
            num=Integer.parseInt(inData);

            System.out.println("Enter the divisor:");
            inData=stdin.readLine();
            div=Integer.parseInt(inData);

            System.out.println(num+"/"+div+"  is  "+(num/div));
        }
        catch(ArrayIndexOutOfBoundsException ae)
        {
        System.out.println("You can't divide "+ num + " by " + div);
        }
         catch(ArithmeticException aex)
         {
          System.out.println("You entered not a number: " + inData);
        }
        finally
        {
        System.out.println("If the division didn't work, you entered bad data.");
        }
            System.out.println("Good-by");
    }
} 
```

![在此处输入图像描述](../Images/b8df36f80b77d5d7b39f12cf5e5f2e06.png)

我已经找到答案了！编码如下：

```
 import java.io.* ;
    public class FinallyPractice1 
    {
        public static void main(String [] a) throws IOException
        {
            BufferedReader stdin=new BufferedReader(new InputStreamReader(System.in));
            String inData; int num=0, div=0;
            try
            {   System.out.println("Enter the numerator:");
                inData=stdin.readLine();
                div=Integer.parseInt(inData);

                System.out.println("Enter the divisor:");
                inData=stdin.readLine();
                div=Integer.parseInt(inData);

                System.out.println(num+"/"+div+"  is  "+(num/div));
            }
            catch(ArithmeticException ae)
                  {
                      System.out.println("ArithmeticException by " + div);
                  }
                    catch(ArrayIndexOutOfBoundsException ae)
                    {
                    System.out.println("You can't divide "+ num + " by " + div);
                 }
                    catch(NumberFormatException ae)
                    {
                  System.out.println("NumberException");
                 }
                    finally
                  {
                    System.out.println("If the division didn't work, you entered bad data.");
                 }
                      System.out.println("Good-by");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:19:58.170

再添加一个`catch`块，如下所示：

```
 } catch(ArrayIndexOutOfBoundsException ae) {
        System.out.println("You can't divide "+ num + " by " + div);
    } catch(ArithmeticException aex) {
        System.out.println("You entered not a number: " + inData);
    } finally {
        //....
    } 
```

一般来说，您可以根据`catch`需要向单个`try`块添加任意数量的块。但请记住给他们正确的顺序——首先放置更具体的例外，然后更通用——最后。

如果要捕获任何可能的异常，可以使用`Throwable`类：

```
try {
    // some potentially dangerous code
} catch (Throwable th) {
    // process error somehow
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:29:37.273

当您故意输入错误数据“aaa”时，您的声明：

```
div=Integer.parseInt(inData); 
```

会抛出一个`NumberFormatException`. 您可以为此添加一个 catch 块：

```
...
} catch (NumberFormatException nfe) {
   System.err.println(nfe);
  // more error handling
} catch ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:31:38.737

您可以使用新的[multi-catch](http://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html)。它有来自

```
catch (ArithmeticException |ArrayIndexOutOfBoundsException ae) 
```

我建议您捕获您期望的异常，而不仅仅是一个毯子 Throwable 或 Exception

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T14:22:55.883

添加更多`catch blocks`来处理异常。

```
 catch(ArithmeticException ae)
        {
            System.out.println("ArithmeticException by " + div);
        }
        catch(ArrayIndexOutOfBoundsException ae)
        {
        System.out.println("You can't divide "+ num + " by " + div);
        }
        catch(IOException ae)
        {
        System.out.println("IOException");
        }
        finally
        {
        System.out.println("If the division didn't work, you entered bad data.");
        }
            System.out.println("Good-by"); 
```

# ios - FB Graph API - 代表页面创建事件 -> 错误 403

> ID：12860867
> 
> 赞同：0
> 
> 时间：2012-10-12T14:08:39.910
> 
> 标签：ios, iphone, facebook, facebook-graph-api

我一直在尝试使用 iOS 版 Facebook Graph API 代表我的页面创建一个事件。但是，我总是以错误代码 403 失败。我试图代表我创建一个事件 - 令人惊讶的是，它有效。权限已按照此处所述进行了适当设置[。](https://developers.facebook.com/docs/reference/api/page/#events)

我的代码如下：

```
NSMutableDictionary *postParams = [[NSMutableDictionary alloc] initWithObjectsAndKeys:
                                       @"Test",@"name",
                                       @"2012-11-11", @"start_time", nil];

    [FBRequestConnection
     startWithGraphPath:@"12345/events"
     parameters:postParams
     HTTPMethod:@"POST"
     completionHandler:^(FBRequestConnection *connection,
                         id result,
                         NSError *error) {
         if (error) {
             NSLog(@"Error: %@", result);

         } else {
             NSLog(@"Success: %@", result);

                     }

     }]; 
```

我怎么说，如果我将 ID/事件设置为我的用户 ID 而不是我的页面 ID，它就可以工作。我可以在我的页面上设置一些不好的东西吗？我需要该页面的管理员权限吗？

我在这里找到了有关“将以下操作作为页面执行”的访问[令牌](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)。我需要那个吗？如果是这样，我该怎么做？

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:20:50.493

要作为页面进行身份验证（并从那里编辑事件），请参阅此文档：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

简而言之，以作为页面管理员的用户身份进行身份验证。然后：

```
https://graph.facebook.com/me/accounts?access_token=xxx 
```

为了检索页面（实际上是用户管理的任何其他页面）的访问令牌。

然后使用*该*访问令牌来管理页面的事件。

# xcode - 哪个Xcode兼容mono3.0和lion 10.8

> ID：12860875
> 
> 赞同：0
> 
> 时间：2012-10-12T14:09:03.707
> 
> 标签：xcode, mono, monomac

我需要为我的 MonoMac 应用程序开发一个 GUI。我应该使用哪个 Xcode 进行可可开发？

我在 Windows 7 PC 上的 VMware 中使用 Mono 3.0 和 MAC OX Lion 10.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T00:06:28.067

我猜你的意思是 MonoDevelop 3.0.x 而不是 Mono 3.0（它们是不同的东西）。

如果是这种情况，任何 4.2 或更高版本的 Xcode 都应该可以工作（旧版本可能可以工作，但尚未经过测试）。

我建议您使用 4.4 或 4.5，因为如果您计划提交到 AppStore for Mountain Lion，您将需要这些。

# websocket - 根据我的情况，我应该使用 WebSockets 或 XmlHttpRequest 还是两者兼而有之？

> ID：12860877
> 
> 赞同：0
> 
> 时间：2012-10-12T14:09:16.127
> 
> 标签：websocket, pubnub, xmlhttprequest-level2

我即将用猴子语言（跨平台翻译）制作一个回合制游戏。游戏将使用 HTML 5 平台。该游戏将在线进行，玩家可以互相比赛（可以是 2vs2 比赛）。我最近审查了大量的解决方案，我停止了其中的 2 个。旧的 XmlHttpRequest 和新的 WebSocket 似乎处于 W3C 的推荐状态，这相当不错。还有另一种我感兴趣的技术是 PubNub，一种推送服务。该服务实际上将消息推送到所有连接的客户端并且速度非常快..但这会在以后产生成本并且受到您发送的消息数量的限制。我的意思是，1000 个连接和 100 万条消息每月花费 15 美元，然后再花费 100 万美元，然后继续。实际上有3个演员，客户端用猴子 (HTML5) 编写，服务器用 C# 编写，因为我非常了解用于广播消息的语言和 PubNub。客户端只会向服务器发送请求，服务器会将消息中继到 PubNub，然后再发送回客户端。考虑到这些事实，我有两个计划：

1.  该游戏是用 HTML 5 编写的，但我可以将其移植到其他语言（以 Android 为例）。如果我使用 WebSockets，我就不能这样做，因为我必须获得额外的库来处理这个问题，而且我不想在它上面投入更多的时间。所以我现在将专注于 HTML 5，但移植它始终是一种选择。
2.  它是一个回合制游戏，所以是的，XmlHttpRequest 似乎适合这项任务，但在什么时候呢？如果我有超过 1000 个连接发送请求，它能够支持它吗？每个回合都是一个独特的请求，但聊天消息也是一个请求和私人消息，也可以获取玩家数据（在您加入任何游戏之前）等。WebSockets 的一个优势是 Http Get 易于制作并且在许多平台上都易于支持所以如果我选择这个，我显然可以走 Android 路线。
3.  我不想在其他技术上投入比这里所说的更多的时间。
4.  PubNub 最终要花钱，但它对于推送消息非常有效，因此不使用它可能会有风险，并且会迫使我自己做消息中继代码。

所以这是我的4个计划。

1.  使用 WebSockets 并使用 Alchemy 作为 C# 的 WebSocketServer，我对其进行了测试并且工作得很好，并且后端仍然有 PubNub 演员来中继我的消息。
2.  使用 XmlHttpRequests 并为请求网关使用简单的 WebAPI。
3.  两个都去。让客户独立于选择哪种技术。使用 XmlHttpRequest 作为后备并让服务器同时支持这两种连接。PubNub 仍将是这里的中继参与者，它应该使整个东西进行交流。
4.  使用 WebSockets 但没有 PubNub。

那么你推荐我走哪条路线，为什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T18:35:45.987

# 独立游戏和多人在线世界的 PubNub

当您构建一个供人们探索的模拟世界时，建立网络是很困难的。这些模拟经常被考虑。出于所有充分的理由，PubNub 是独立游戏开发者的最佳解决方案。借助 PubNub 的两个简单功能`PUBNUB.publish({...})`和`PUBNUB.subscribe({...})`. 在您的应用程序中添加网络可让您实现多人游戏等等！**在HTML5**浏览器、手机、平板电脑等之间实现实时通知。一切都可以从地球上的任何地方发送和接收数据。

## WebSockets 或 XMLHttpRequest 或两者兼而有之？

PubNub 为您做出这个选择，自动检测适合您的播放器系统和功能的最佳连接类型。这意味着您的独立游戏将在所有平台上正常运行，包括**Android**、**iPhone**、**Chrome** / **Firefox** / **IE**等。这很容易，因此您无需担心到现有各种平台的运输或交付方式。您的团队只需要专注于制作引人入胜且引人入胜的在线多人游戏。

## 在线独立游戏 - 服务器逻辑

您需要一种方法来安全地收集玩家进度并跟踪您的世界中的行为和后果。您可能还需要跟踪库存和玩家状态。有两个很棒的服务。

### 咆哮引擎

首先让我推荐[http://www.roarengine.com/](http://www.roarengine.com/) RoarEngine 一个在线托管的游戏引擎，它为您提供了一个脚本引擎，通过编写您自己的自定义逻辑来释放您的创造力和无限的可能性。事件、挑战、定时机制，应有尽有。RoarEngine 还通过创建影响玩家状态的物品来提供物品和礼物经济来塑造玩家互动，由可以动态管理的全功能商店、货币和礼物系统提供支持。

### 解析

我强烈推荐[https://parse.com/](https://parse.com/)一个在线云托管服务，它管理你的用户/玩家会话。当您需要一个更抽象、更不适合游戏的在线平台时，Parse 非常棒；它允许您以您选择的方式定义模型和对象。使用 Parse，您无需专注于构建基础架构，而是专注于构建游戏世界状态。

## PubNub HTML5 MMO XKCD 多人游戏

我们想展示 HTML5 Indie Games 与 PubNub 一起使用的功能，以实现可实时加入世界各地玩家的广阔游戏玩法。该游戏使用 HTML5 Canvas，多个用户带着气球飞来飞去。如果你被卡住了，你可以点击你的气球人，变成一个幽灵，无缝地穿过风景，不受树木和山丘等凡人障碍的阻碍。然而，在普通的现成游戏服务器上扩展用户存在问题。最大并发一次只能是几个用户，这让许多人想知道 MMO 的 MMO 部分在哪里。与自托管选项相比，PubNub 可以自动执行此操作并且成本更低。正在考虑自托管选项的团队将考虑与维护和托管用于游戏的网络集群相比的成本。

*   现场直播 - [http://www.pubnub.com/static/pubnub-xkcd/index.html](http://www.pubnub.com/static/pubnub-xkcd/index.html)
*   博客 - [http://blog.pubnub.com/xkcd-mmo-websocket-scaling-with-pubnub/](http://blog.pubnub.com/xkcd-mmo-websocket-scaling-with-pubnub/)
*   源代码 - [https://github.com/pubnub/pubnub-xkcd](https://github.com/pubnub/pubnub-xkcd)

上面的链接向您展示了一个基于 HTML5 Canvas 的实时游戏，该游戏由 PubNub 多人游戏功能提供支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T00:40:11.620

看看[http://realtime.co](http://realtime.co) - 它是一个类似于 PubNub 并具有更多功能的实时平台。

# php - PHP gettext 中的变量

> ID：12860888
> 
> 赞同：16
> 
> 时间：2012-10-12T14:09:55.253
> 
> 标签：php, localization, internationalization, gettext, po

> **可能重复：**
> [gettext 如何处理动态内容？](https://stackoverflow.com/questions/1773023/how-does-gettext-handle-dynamic-content)

我正在使用 PHP 的 gettext。我想翻译一个包含变量的句子。这可能吗？

例如，在英语中：

`Are you sure you want to block Alice?`

（其中“Alice”是用户名。）

但是，在德语中，主语不会出现在句末。

`Sind Sie sicher, dass Sie Alice blockieren?`

在messages.po中，我有

```
msgid "BLOCK"
msgstr "Are you sure you want to block" 
```

但我看不出有办法传递一个或多个变量。这可能吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-12T14:12:41.470

poedit 识别变量。

```
msgid "Are you sure you want to block %s?"
msgstr "Sind Sie sicher, dass Sie %s blockieren?" 
```

在 PHP 中

```
sprintf(_('Are you sure you want to block %s?'),'Alice'); 
```

# facebook-graph-api - 不活动后自动将用户从 Facebook 注销

> ID：12860893
> 
> 赞同：0
> 
> 时间：2012-10-12T14:10:21.027
> 
> 标签：facebook-graph-api, facebook-php-sdk

根据 FB 政策，当用户退出我的网站时，他们也会退出 FB。

但是，我的会话在 20 分钟不活动后被破坏，我也可以以某种方式破坏 FB 会话吗？

问题是：另一个用户进入该站点时不知道另一个用户仍然登录到 FB，并且我的系统试图成为一个好的 UI，如果它看到一个 FB 用户处于活动状态，则会将它们自动重新登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:22:34.843

假设您使用的是 JSSDK，有一种方法可以将用户注销。您可以在使会话无效时调用它，假设您可以在发生这种情况时触发一些客户端代码。

请参阅[https://developers.facebook.com/docs/reference/javascript/FB.logout/](https://developers.facebook.com/docs/reference/javascript/FB.logout/)

# android - runOnUiThread 和滞后

> ID：12860894
> 
> 赞同：2
> 
> 时间：2012-10-12T14:10:22.787
> 
> 标签：android, multithreading

我有一个片段，它将 ViewPager 与自定义视图和顶部栏中的微调器结合在一起。每次更改 viewpager 中的页面时，我都必须从 db 更新微调器中的字符串。为此，在 viewPager 侦听器的 onPageSelected 中，我启动了一个线程，该线程从数据库中检索数据并通过 runOnUiThread 微调器的适配器进行更新。问题是为微调器的适配器调用的 notifyDataSetChanged() 滞后于 viewpager：它必须重建几个视图，但它有点滞后。

```
 @Override
        public void onPageSelected(final int pos) {
            new Thread(new Runnable() {
                @Override
                public void run() { 
```

...

```
 getActivity().runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            mSpinnerAdapter.notifyDataSetChanged();
                        }
                    });
                }
            }).start();
        } 
```

如何解决这个问题？可以在优先级最低的主线程上运行代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:42:03.007

首先，移除 Thread，然后尝试移除 runOnUiThread。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:44:41.977

你应该能够逃脱：

```
 @Override
    public void onPageSelected(final int pos) {
        ... // your hidden code
        getActivity().runOnUiThread(new Runnable() {
            @Override
            public void run() {
                mSpinnerAdapter.notifyDataSetChanged();
            }
        });
    } 
```

不需要新线程的东西。

# winapi - 从服务中使用 IApplicationAssociationRegistration

> ID：12860895
> 
> 赞同：1
> 
> 时间：2012-10-12T14:10:22.087
> 
> 标签：winapi, com

我在使用 IApplicationAssociationRegistration 检查默认电子邮件客户端时遇到问题。在用户上下文中，一切都很好，但是从系统上下文中运行的服务返回错误的默认客户端，因为它似乎从系统用户而不是当前登录用户那里获取值。

以下是我采取的步骤：

1) 调用 CoInitialize 和 CoInitializeSecurity 进行模拟。

2) 调用 DuplicateTokenEx 获取登录用户的 SecurityImpersonation 的安全令牌。

3) 使用令牌调用 ImpersonateLoggedOnUser。

4) 调用 CoCreateInstance 创建 IApplicationAssociationRegistration 的实例。我得到 S_OK 返回和一个实例指针。

5) 为我从步骤 (4) 获得的实例指针和 IUnknown 指针调用 CoSetProxyBlanket。我再次得到 S_OK 返回。

6) 使用我从步骤 (4) 中获得的实例指针为 Outlook 调用方法 IApplicationAssociationRegistration::QueryAppIsDefault。我再次返回 S_OK，但在系统上下文中返回 TRUE，在用户上下文中正确返回 FALSE。如果我在 regedit 中手动修改 HKEY_USERS/.DEFAULT 的 UrlAssociations/mailto/UserChoice/ProgId 值并再次调用，它将获取新值。

7) 同样，如果我调用 SetAppAsDefault，它似乎是在系统上下文中设置关联，而不是我想要的用户上下文。

如果我将步骤 4 到 7 放入控制台应用程序并使用 CreateProcessAsUser 从服务运行它，那么它可以正常工作。但我宁愿避免这样做。

任何帮助，将不胜感激。

# java - 使用线程和/或任务更新 JavaFx Gui

> ID：12860896
> 
> 赞同：2
> 
> 时间：2012-10-12T14:10:22.977
> 
> 标签：java, multithreading, user-interface, javafx, task

我正在创建一个聊天程序，其中包含我在新版本的 JavaFx 场景构建器中创建的 GUI。我有一个扩展应用程序的主要方法，并且在我的 GUI 中有一个 simpleController（控制所有按钮、标签、anchorPanes 等）。

除此之外，我有一个可以接收和发送消息的服务器应用程序。为此，我创建了以下简单协议：

***命令/说明：***

*   1 - 请求连接权限，同时请求用户ID（服务器找出有多少用户在线并添加id+1）
*   2 - 聊天，客户端发送一个 ID 和一个字符串消息（示例：21
    Hello（注意所有这些都在单独的行上））
*   3 - 断开客户端。
*   4 - 显示所有在线客户端的列表。
*   5 - 询问还有谁在线（这仅在用户连接时使用，他需要知道有多少用户在线才能更新 GUI）。
*   10 - 如果服务器返回 10 消息，则各种错误，这意味着客户端刚刚执行的调用是错误的或无法
    完成！

使用这个简单的逻辑，我应该很容易让用户连接、聊天和断开连接。然而，事实证明，本应是一项简单的任务却成了我最糟糕的噩梦。

到目前为止，我的用户连接到该程序没有问题，并且可以同时连接更多用户。

当我想在服务器和客户端之间发送和接收消息时，事情开始变得棘手。

我不知道如何在使用线程时更新我的​​ GUI。我试图阅读 Task 类，但我无法看到**是否应该使用它而不是线程或者线程应该将它作为参数**。

我应该创建一个新类来侦听输入并使该类扩展线程吗？ **或者**
线程应该在我的 simpleController 类中运行吗？

**主要的**

```
public class Main extends Application{
    public static void main(String[] args) throws IOException{
        Application.launch(Main.class, (java.lang.String[]) null);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        try {
            AnchorPane page = (AnchorPane) FXMLLoader.load(Main.class.getResource("testingBackground.fxml"));
            Scene scene = new Scene(page);
            primaryStage.setScene(scene);
            primaryStage.setTitle("Chatten");
            primaryStage.show();

        } catch (Exception ex) {
            java.util.logging.Logger.getLogger(Main.class.getName()).log(
                    java.util.logging.Level.SEVERE, null, ex);
        }
    }
} 
```

**简单控制器**

```
import java.io.IOException;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.net.UnknownHostException;
import java.util.ArrayList;
import java.util.Scanner;
import java.io.IOException;
import java.net.URL;
import java.util.ResourceBundle;

import com.sun.glass.ui.Platform;

import javafx.beans.value.ChangeListener;
import javafx.beans.value.ObservableValue;
import javafx.concurrent.Task;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.fxml.Initializable;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.AnchorPane;
import javafx.scene.text.Text;

/*
 * evt ret array listen med commands da jeg selv kan styre hvilke commands der kommer ind og ud! og brugeren faktisk
 * aldrig selv kan vælge!
 */
public class SimpleController extends Thread implements Initializable{
    public Button btn_Connect;
    public AnchorPane pictureFrame;
    public Socket socket = new Socket();
    public PrintWriter pw;
    public Scanner input;
    public int clientId = 1;
    public Client client = new Client(socket, pw, input, clientId);
    // options!
    public TextField txt_userName;
    public TextField textField_chat;
    // send button
    public Button Send;
    /*
     * current client that the user i connected with, this client is used to send commands and tell other clients who is connected on
     * what "ingame chat persons"
     */
    public static int currentClientId;
    // chatperson username
    public Label lbl_userName2;
    public Label lbl_userName3;
    public Label lbl_chatPerson2;
    public Label lbl_Chatperson1_userName;
    //Pictures of chat person
    public Label chatPerson3;
    public Label chatPerson1;
    // chat persons textfield
    public TextArea txt_ChatPerson1;
    //public TextField txt_ChatPerson1;
    public TextField txt_ChatPerson2;
    public TextField txt_ChatPerson3;

    @Override
    public void initialize(URL location, ResourceBundle resources) throws NullPointerException {
        try {
            client.connect();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        pictureFrame.setMaxSize(409, 373);
        txt_ChatPerson1.setMinWidth(50);
        txt_ChatPerson1.setPrefWidth(50);
        txt_ChatPerson1.setMaxWidth(300);
        txt_ChatPerson1.setText("         ");

        btn_Connect.setOnAction(new EventHandler<ActionEvent>() {   
            @Override

            public void handle(ActionEvent event) throws NullPointerException {
                connectMeWithOthers(1);
            }
        });

        Send.setOnAction(new EventHandler<ActionEvent>() {

            // WORK IN PROGReSS!!
            @Override
            public void handle(ActionEvent event) {

                /*
                 * new line code:
                 */
                String x = textField_chat.getText();
                txt_ChatPerson1.setText(x);
                txt_ChatPerson1.setVisible(true);
                System.out.println("x" +x);

                txt_ChatPerson1.textProperty().addListener(new ChangeListener<String>() {

                    @Override
                    public void changed(
                            ObservableValue<? extends String> observable,
                            String oldValue, String newValue) {

                        //  txt_ChatPerson1.setPrefRowCount(5);
                        txt_ChatPerson1.setPrefWidth(txt_ChatPerson1.getText().length()*7);
                        //txt_ChatPerson1.setPrefHeight(txt_ChatPerson1.getText().length()*3);
                    }
                });
                txt_ChatPerson1.autosize();
                client.SendChat(x);
            }
        });
    }

    /**
     * this method connect the client to the other clients who are online on the server!
     * the method calls it self after the user has established connection in order to load the other chat persons online
     * if the client is the online user online then it will only load the user
     * @param id
     */
    protected void connectMeWithOthers(int id) {
        try {
            int responseId = client.sendCommando(id);
            System.out.println(" response id "+responseId);
            // finds whom is connected and tries to connect to a spot that is avalibul!
            //Response is the ID of the chat persons
            switch (responseId) {
            case 1:
                currentClientId = client.reciveCommando();
                client.setClientId(currentClientId);
                client.sendString(txt_userName.getText());
                connectMeWithOthers(5);
                break;  
            case 5:
                int times = client.reciveCommando();
                int o = 0;
                System.out.println("times: "+times);

                while (o != times) {
                    int j = client.reciveCommando();
                    System.out.println("j"+ j);
                    String name = client.reciveString();
                    System.out.println("Name " +name);
                    createUser(j, name);    
                    o++;
                }
                start();
                break;

            case 10:
                System.out.println("Connection fail chat room is full! Please try again later!");

            case 8:
                start();
                break;
            default:
                break;
            }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
    private void createUser(int j, String reciveChat) {
        if (j == 1) {
            chatPerson1.setVisible(true);
            lbl_Chatperson1_userName.setVisible(true);
            lbl_Chatperson1_userName.setText(reciveChat);

        }else if (j == 2) {
            lbl_chatPerson2.setVisible(true);
            lbl_userName2.setVisible(true);
            lbl_userName2.setText(reciveChat);
        }else if (j == 3){
            chatPerson3.setVisible(true);
            lbl_userName3.setVisible(true);
            lbl_userName3.setText(reciveChat);
        }else {
            Image img = new Image(getClass().getResourceAsStream("Figur.png"));
            Label test2 = new Label("", new ImageView(img));
            test2.setLayoutX(50);
            test2.setLayoutY(30);
            test2.setPrefSize(1000, 1000);
            pictureFrame.getChildren().addAll(test2);
            test2.setVisible(true);
        }

    }
    /*
     * denne metode er en rewrite af run metoden.
     */
    public void StartClient(){
        ClientListner cl = new ClientListner(client);

        Task task = new Task<String>() {

            @Override
            protected String call() throws Exception {
                // TODO Auto-generated method stub

                return null;
            }
        };
        Thread t = new Thread(task);
        cl.start();
        while (true) {
            if (cl.recived) {

            }
        }
    }

    /*
     * Run metoden er brugt til at recive data fra andre users og update GUI'en skal muligvis rewrites!?
     * 
     */

    public void run(){ 
        System.out.println("Thread started");
        System.out.println(client.getSocket().isConnected());
        ClientListner cl = new ClientListner(client);
        while (client.getSocket().isConnected()) {
            int key = 10;
            if (cl.recived) {

                try {
                    key = client.reciveCommando();
                    System.out.println("jeg er her");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }

            System.out.println("Key "+key);
            switch (key) {
            // case 2 er recive chat:
            case 2:
                // først find ud af hvilket ID der har sendt chatten:
                int y = 0;
                try {
                    y = client.reciveCommando();
                    System.out.println("y" + y); 
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                // derefter få beskeden og send den så ud til resten.
                String says = client.reciveChat().toString();
                if (y == 1) {
                    txt_ChatPerson1.setText(client.reciveChat());
                }else if (y == 2) {

                }else {
                    chatPerson3.setVisible(true);
                    txt_ChatPerson3.setVisible(true);
                    txt_ChatPerson3.setText(client.reciveChat());
                }

                break;

            default:
                break;
            }
        }
    }

} 
```

**客户**

```
import java.io.IOException;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;
import java.util.Scanner;
public class Client {
// disse var static
    public final static int portNumber = 6040;
    public Socket socket;
    private PrintWriter pw;
    private Scanner input;
    private int clientId;
    /**
     * @param args
     * @throws IOException 
     */

    public Client(Socket socket, PrintWriter pw, Scanner input, int clientId){
        this.socket = socket;
        this.pw = pw;
        this.input = input;
        this.clientId = clientId;
    }
    public void connect() throws IOException{
        // du kan vælge at bruge inetadressen til at connecte i socketet.
        InetAddress adr = InetAddress.getByName("localhost");
        socket = new Socket("localhost", portNumber);
        input=new Scanner(socket.getInputStream());
        pw = new PrintWriter(socket.getOutputStream());
    }
    /**
     * This method sends the message (that the client(chat person) writes to the user)
     * @param x
     * @throws NullPointerException
     * @throws IOException 
     */
    public void SendChat(String x) throws NullPointerException{
            pw.println(2);
            pw.flush();
            pw.println(SimpleController.currentClientId);
            pw.flush();
            pw.println(x);
            pw.flush(); 

    }
    public int sendCommando(int id) throws IOException{
        System.out.println("Jeg sender"+ id);
        pw.println(id);
        pw.flush();
        /*
         * this part of the program sends a command to the server if the command is 1 then 1 is = Connect.
         * the program then ask the server is the server is full or is it ok to connect? 
         * if the response is not 10 then the program will allow a connection to happen the return type will be the Id of which 
         * the chat person becomes!
         */
        // should the method return 0 the Application will do NOTHING!
        switch (id) {
        case 1:
    int k = reciveCommando();
            if (k== 10) {
                return 10;
            }else if (k < 3) {
                System.out.println("returned k" + k);
                return k;
            }else {

            return 10;
            }
            /*
             * Closes the connection with the server!
             */
        case 3:

            socket.close();
            return 0;

        case 5:
            int y  = reciveCommando();
            return y;
        default:
            return 0;
        }

    }
    /*
     * this method recives a command from the server! the comands can be found in the ChatCommands.txt
     * returns the command as an integer!
     */
    public int reciveCommando() throws IOException{
        Integer i = input.nextInt();
        return i;
    }
    /**
     * Gets a String response from the server. This method i used to create other users and give them the correct username.
     * 
     * @param i
     * @return
     * @throws IOException
     */
    public String getStringResponse(int i) throws IOException {
        pw.print(i);
        pw.flush();
        String x = input.nextLine();
        return x;

    }
    /*
     * Work in progress - client getter og setter methoder!
     */

    public Socket getSocket(){
        return socket;
    }
    public Scanner getInput(){
        return input;
    }
    public PrintWriter getPw(){
        return pw;
    }
    public int getClientId(){
        return clientId;
    }

    public void setClientId(int i ){
        clientId = i;
    }
    public String reciveChat(){
        String x = getInput().next();
        return x;
    }
    public String reciveString(){
        String x =input.next();
        return x;
    }
    public void sendString(String x){
        pw.println(x);
        pw.flush();
    }

}* 
```

我真的很抱歉代码有点乱。简单控制器中的 run() 方法试图创建一个简单控制器的线程。然而，这并没有像我预期的那样奏效。:(

这样做的主要目的，基本上是为了保证聊天室里的两个人可以一起聊天。因此，它所要做的就是更新 1 或 2 个文本区域。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T22:13:42.343

如果您还没有这样做，请检查一下

[http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm](http://docs.oracle.com/javafx/2/threads/jfxpub-threads.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-17T17:18:07.383

这花了我一点时间才找到，所以我想我会在这里记录下来。

```
Platform.runLater(new Runnable(){
@Override
public void run() {
// Update your GUI here.
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T04:15:14.983

这是旧的，但因为它在谷歌那里我想指出你最好的选择是使用

```
FXObservableList 
```

或者

Bean 属性如

```
DoubleProperty 
```

哪些是线程安全的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-03T22:03:08.167

如果您使用的是 Java 8：

```
Platform.runLater(() -> {
            // Update your GUI here.;
        }); 
```

# objective-c - 以编程方式使图像看起来像 iOS 图标

> ID：12860897
> 
> 赞同：-2
> 
> 时间：2012-10-12T14:10:23.703
> 
> 标签：objective-c, ios, cocoa-touch

嗨，我的 tableView 中有很多图像，我希望 UIImage 看起来像原生 iOS 图标。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:15:28.793

对于圆角，您可以这样做：

```
[self.myImageView.layer setCornerRadius:10.0]; 
```

**更新**

如前所述，您需要添加 QuartzCore 框架才能使其工作

# java - 图像处理库

> ID：12860898
> 
> 赞同：1
> 
> 时间：2012-10-12T14:10:33.003
> 
> 标签：java, image-processing, opencv

我最近下载了 OpenCv 库，我正在尝试使用它的功能，但不幸的是我无法这样做。这是我编写的类

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package Opencv;

import hypermedia.video.*;

/**
 *
 * @author 

 */
public class LoadImage
{
    public LoadImage()
    {

        OpenCV opencv = new OpenCV( );
        opencv.loadImage( "one.png", 200, 100);
        image( opencv.image(), 0, 0 );
      //  image( opencv.loadImage("one.png.jpg"), 0, 0);

    }

    public static void main(String[] args)
    {
               LoadImage im=new LoadImage();
    }
} 
```

我正在使用 netbeans IDE，它没有显示语法错误。但是在运行它之后，我得到了以下错误。

```
!!! required library not found : C:\Program Files\Java\jdk1.6.0_21\bin\OpenCV.dll: Can't find dependent libraries
Verify that the java.library.path property is correctly set and the '\path\to\OpenCV\bin' exists in your system PATH

Exception in thread "main" java.lang.UnsatisfiedLinkError: hypermedia.video.OpenCV.loadImage(Ljava/lang/String;II)V
    at hypermedia.video.OpenCV.loadImage(Native Method)
    at Opencv.LoadImage.<init>(LoadImage.java:20)
    at Opencv.LoadImage.main(LoadImage.java:30)
Java Result: 1
BUILD SUCCESSFUL (total time: 6 seconds) 
```

但是我已经完成了所有操作，就像我导入了库一样，几乎将 OpenCv.dll 文件放置在任何地方。但我不断收到此错误。帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:34:14.877

似乎 java 找不到合适的 DLL - openCV 是通过 JNI 调用的。这是有用的答案： [OpenCV to JNI how to make it work?](https://stackoverflow.com/questions/2441198/opencv-to-jni-how-to-make-it-work)

# javascript - 将附件名称更改为随机字符串

> ID：12860901
> 
> 赞同：0
> 
> 时间：2012-10-12T14:10:35.800
> 
> 标签：javascript, coldfusion

当我系统的用户输入他们的附件名称时，出于安全原因，我希望将其作为随机字符串保存在我的数据库中。但是我想在用户查看时显示真实姓名。在 ColdFusion 或 javascript 中需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:18:28.240

您只是在询问如何生成随机字符串吗？最快的方法是使用 createUUID()。这会产生一个较长的（我认为是 35 个）char 随机字符串。您也可以使用 randRand 来动态选择随机字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:32:43.877

在服务器端，您需要将文件的原始名称和文件名的随机字符串版本都存储在数据库中。如果不存储文件名的原始版本，您将不会知道文件名的原始版本。或者，如果您的文件有一个通用的命名方案（即，向客户显示的所有文件名都是“nameOfCustomer-coupon.pdf”），则原始文件名无关紧要，不需要存储。

当对该文件发出请求时，您将使用 Content-Disposition HTTP 标头来显示原始文件名：

```
Content-Disposition: attachment; filename=<file name.ext>

<cfheader name="Content-Disposition" value="filename=someFileName.someExtension"> 
```

# jquery - 对话框在退格时关闭

> ID：12860907
> 
> 赞同：0
> 
> 时间：2012-10-12T14:11:05.263
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui

有谁知道为什么按下只读输入框上的退格键时 jQuery 对话框会关闭？

当在只读文本框上按下其他键时，还有其他问题，比如空格键。因此，我的假设是它与只读输入框有关。

我需要将此输入设为只读，以便用户无法更改该值。我无法将其禁用，因为我的控制器无法接收禁用控件的值。

我在 ASP.NET MVC3 中工作。

请帮忙。谢谢

**更新**

我在对话框打开时按退格键，它会关闭对话框。区别在于添加对话框我必须按两次退格键。对于编辑，它会在按一次退格键时关闭。

这就是我在两个链接上打开对话框的方式 - 添加和编辑

```
$('#add').click(function () {
            $('#popup-form-dialog').load('@Url.Action("Add", "Home")', function (html)
                    { $('#dialog').html(html); });
            $('#dialog').dialog('option', 'title', 'Add');
            $('#dialog').parent().css({ position: "fixed" }).end().dialog('open');
        });

        $('#edit a').live('click', function () {
            var id = $(this).attr('id');
            $('#dialog').load('@Url.Action("Edit","Home")/' + id, function (html)
                    { $('#dialog').html(html); });
            $('#dialog').dialog('option', 'title', 'Edit');
            $('#dialog').parent().css({position:"fixed"}).end().dialog('open');
            return false;
        });

$('#dialog').dialog({
            bgiframe: true,
            autoOpen: false,
            resizable: false,
            width: 500,
            modal: true,
            close: function () {
               //make changes to the parent page
            }

    }); 
```

**更新**

注意 - 对话框上的退格实际上是浏览器的退格。我想知道为什么当我有模态对话框时会发生这种情况？以及如何阻止这种情况？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:16:37.667

您可以尝试以下选项：

1.) 通过添加禁用输入文本框**`disabled="true"`**

2.) 当有人试图将光标移到只读文本框中时，将光标移出。

```
onfocus = "this.blur()" 
```

3.) 使用**标签**而不是只读文本框。

# java - 在 java webapps 中持久化数据库连接参数

> ID：12860912
> 
> 赞同：0
> 
> 时间：2012-10-12T14:11:14.067
> 
> 标签：java, web-applications, configuration, persistence

Java webapps 提供了一种方便的方式让它们运行：将 jar 文件放入 tomcat 的 webapps 文件夹或使用 tomcat 管理器上传就足够了。如果 jar 文件名为 foo123.jar，那么很快就可以在 http://<host>:8080/foo123/ 下访问 Web 应用程序。但是，在大多数情况下，配置存在问题：将数据存储在数据库中是一种好习惯，但是在哪里可以存储数据库连接参数？通常您必须修改一些 server.xml 或 web.xml 或其他配置文件才能将其放在那里，但这会阻碍使用此类应用程序的自动部署。

“简单易用”的 Web 应用程序应该在第一次运行时请求其所需的配置，例如“设置”屏幕，然后将其保存在某个位置，以便在 servlet 容器重新启动后仍然存在。当然，对于数据库连接参数，将它们存储在数据库中不是一种选择。

按照规范，servlet 容器必须提供 Web 应用程序具有写入权限的目录。可以使用以下方法确定：

```
File tempDir =
(File) session.getServletContext().getAttribute("javax.servlet.context.tempdir"); 
```

此目录的内容绑定到“servlet 上下文生命周期”，如果我做对了，这意味着在服务器重新启动后它是空的。如果这是真的，它就不能用于我的目的。

有人知道某种最佳实践吗？我不想重新发明轮子。

在没有更好的解决方案的情况下，我会这样实现：正如我所说，如果你使用上面描述的简单部署方式，上下文路径是从 jar 文件名派生的。所以我可以想象将它用于数据库连接。简单来说：如果 Web 应用程序 foo123 在 localhost:3306（MySQL 默认端口）上找到 MySQL 连接，并且可以使用用户名 foo123 和密码 foo123 连接到它，并且有权访问名为 foo123 的模式，它总是在重新启动时使用该模式。

你对那个怎么想的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:35:59.397

您可以只使用[context.xml](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)文件。这将使您可以逐个服务器存储配置文件，这意味着您永远不必将该信息放入代码本身中。

[这个例子](http://wiki.metawerx.net/wiki/Context.xml)似乎很好地总结了它。

# php - 使用 AJAX 在 Wordpress 管理控制面板上对地址进行地理编码

> ID：12860915
> 
> 赞同：1
> 
> 时间：2012-10-12T14:11:25.033
> 
> 标签：php, jquery, ajax, wordpress, google-maps

我正在为一本杂志创建一个网站，该网站有一个专门介绍事件的页面（例如县秀等）。该页面顶部有一个交互式地图（用谷歌地图构建），然后是一个包含不同事件及其详细信息的部分在 3col 网格中。

我的老板想要它，这样当网站所有者（我们将他们称为编辑）添加事件时，他们可以添加事件的地址。当编辑器保存事件时，它会对地址进行地理编码，并将 lat&lng 保存到他们自己的隐藏输入字段中。

然后在 Google 地图语法中的“事件”页面上有一个循环，以使用它们的 LatLng 为每个事件创建标记。

我有使用地图创建的页面，但我不知道如何在后端对地址进行地理编码。

我不介意在保存帖子时是否自动完成地理编码，或者是否通过单击按钮手动转换。我只需要一种方法来保存 LatLng，这样我就可以从循环中调用它。

那么我该怎么做呢？我知道我需要一些 jQuery 来处理 AJAX 请求，但是这应该放在哪个文件中？（地理编码.php

代码时间！

地理编码.php：

```
$result = json_decode(file_get_contents($geoCodeURL), true); 

echo $result['results'][0]['geometry']['location']['lat'];
echo ',';
echo $result['results'][0]['geometry']['location']['lng']; 
```

是的......这就是我所得到的。

Functions.php 的片段

```
 <td>
        <form class="geocode" action="<?php bloginfo('template_url');?>/geocode.php" method="post">
        <input type="text" name="addr" />
        <input type="submit" value="" />
        </form>
        <input type="text" value="" name="eventLatLng" class="latlng" />
    </td> 
```

PS如果不清楚，我很抱歉，我从未使用过AJAX，我对如何解释它有点困惑，如果我没有太多帮助，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:47:21.197

这是通过谷歌地图输入地址并获取其纬度和经度的代码。

```
 <!--code for google address api-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <input name="add" type="text" id="address" class="required" style="width: 500px;" onblur="cordinate()">
            <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en-AU"></script>
            <script>
                var autocomplete = new google.maps.places.Autocomplete($("#address")[0], {});

                google.maps.event.addListener(autocomplete, 'place_changed', function() {
                var place = autocomplete.getPlace();
                console.log(place.address_components);
                });
            </script>
            <!--code for google address api-->

            <!--code for google address cordinates By Harshal-->

            <script>

            function cordinate()
            {
                geocoder = new google.maps.Geocoder(); // creating a new geocode object

                address1 = document.getElementById("address").value;

                    if (geocoder)
                {
                geocoder.geocode( { 'address': address1}, function(results, status)
                {
                if (status == google.maps.GeocoderStatus.OK)
                {
                //location of first address (latitude + longitude)
                var location1 = results[0].geometry.location;
                document.getElementById("cor").value = location1;

                //alert(location1);
                } else
                {
                alert("Geocode was not successful for the following reason: " + status);
                }
                });

                }//end of If

            }
            </script>
            <!--code for google address cordinates-->
            <input type="hidden" name="cor" id="cor">//in this input field you will get the cordinates. 
```

# objective-c - UIViewController 中的 UITableView - 将单元格连接到 UIViewController

> ID：12860916
> 
> 赞同：0
> 
> 时间：2012-10-12T14:11:26.060
> 
> 标签：objective-c, uitableview, uiviewcontroller, storyboard

我在*UIViewController中有一个**UITableView*。我在 Storyboard 中创建了其他 UIViewController，我想连接到我的单元格。

 *如何将Storyboard 中创建的*UIViewControllers*连接到我的单元格？

* * *

**MyViewController.h**

```
@interface MyViewController : UIViewController <UITableViewDelegate,    UITableViewDataSource> {
    IBOutlet UITableView *myTableView;
}

@property (nonatomic, retain) UITableView *myTableView; 
```

* * *

**我的视图控制器.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *array = [[NSArray alloc] initWithObjects:@"CELL1", @"CELL2 & CELL3", nil];
    self.listData = array;
    [array release];

    [myTableView setDataSource:self];
    [myTableView setDelegate:self];

    [[self view] addSubview:myTableView];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [listData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UpdatesTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {

        NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"UpdatesTableViewCell" owner:nil options:nil];

        for (UIView *view in views) {
            if([view isKindOfClass:[UITableViewCell class]])
            {
                cell = (UpdatesTableViewCell*)view;
            }
        }
    }

    NSUInteger row = [indexPath row];
    cell.textLabel.text = [listData objectAtIndex:row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:28:02.763

您可以创建从该控制器到其他控制器的转场，然后选择在有人点击单元格时执行哪个转场，或者您可以使用对情节提要的引用来调用`instantiateViewControllerWithIdentifier:`并在点击时激活该控制器。*

# objective-c - 如何在 iOS 中集成 XMPP 扩展 XEP 0136 以进行聊天存档

> ID：12860917
> 
> 赞同：3
> 
> 时间：2012-10-12T14:11:30.460
> 
> 标签：objective-c, ios, xmpp, chat, xmppframework

我想使用 XMPP 扩展 XEP 0136 进行存档，但不确定如何在我现有的 iOS XMPP 聊天客户端中使用该代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:00:11.697

XEP 0136 不是客户端消息归档。那么您使用的是什么服务器？如果是 ejabberd，您必须添加一些模块到消息归档。

# microsoft-metro - Windows 8 用户控件框架对象导航

> ID：12860919
> 
> 赞同：1
> 
> 时间：2012-10-12T14:11:40.210
> 
> 标签：microsoft-metro

在 XAML 用户控件中，Frame 对象为空：

this.Frame.Navigate(typeof(FaxPropertiesPage));

如何使用 Windows 8 XAML 用户控件在页面之间导航？我已将控件放置在 XAML 页面上的 Callisto Flyout 中。

下面的搜索按钮必须将用户导航到另一个 XAML 页面。

![在此处输入图像描述](../Images/b49194322ed4ef5f74b57068debe987a.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:15:23.153

我已成功使用 app.xaml.cs 中的代码

```
Frame frame = Window.Current.Content as Frame; 
```

然后使用标准的导航代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T02:23:18.983

简单的代码（可能不是 100% 有效）是：

框架框架 = 新框架（）；frame.Navigate(typeof(ExerciseAddPage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T14:01:19.180

有好的方法和不太好的方法：

它们都从导航服务开始：

```
public interface INavigationService
{
    bool CanGoBack { get; }
    void GoBack();
    void GoForward();
    bool Navigate<T>(object parameter = null);
    bool Navigate(Type source, object parameter = null);
    void ClearHistory();
    event EventHandler<NavigatingCancelEventArgs> Navigating;
}

public class NavigationService : INavigationService
{
    private readonly Frame _frame;

    public NavigationService(Frame frame)
    {
        _frame = frame;
        frame.Navigating += FrameNavigating;
    }

    #region INavigationService Members

    public void GoBack()
    {
        _frame.GoBack();
    }

    public void GoForward()
    {
        _frame.GoForward();
    }

    public bool Navigate<T>(object parameter = null)
    {
        Type type = typeof (T);

        return Navigate(type, parameter);
    } 
```

那么，我在哪里获得框架？在 App.xaml.cs 中

```
protected async override void OnLaunched(LaunchActivatedEventArgs args)
{
    // Do not repeat app initialization when already running, just ensure that
    // the window is active
    if (args.PreviousExecutionState == ApplicationExecutionState.Running)
    {
        Window.Current.Activate();
        return;
    }

    // Create a Frame to act as the navigation context and navigate to the first page
    var rootFrame = new Frame();
    if (DesignMode.DesignModeEnabled)
        SimpleIoc.Default.Register<INavigationService, DesignTimeNavigationService>();
    else
        SimpleIoc.Default.Register<INavigationService>(() => new NavigationService(rootFrame)); 
```

我在这里使用 MVVM Light。这让生活变得轻松，因为我所有的视图模型都是使用依赖注入创建的，并将它们的服务注入其中。

如果您不使用 MVVM Light 之类的东西并依赖代码隐藏，那么您仍然可以完成这项工作：只需将导航服务设为静态即可

```
 public class NavigationService : INavigationService
    {
        public static INavigationService Current{
get;set;}

blah blah blah
} 
```

并将 App.xaml.cs 更改为：

```
 protected async override void OnLaunched(LaunchActivatedEventArgs args)
    {
        // Do not repeat app initialization when already running, just ensure that
        // the window is active
        if (args.PreviousExecutionState == ApplicationExecutionState.Running)
        {
            Window.Current.Activate();
            return;
        }

        // Create a Frame to act as the navigation context and navigate to the first page
        var rootFrame = new Frame();
        NavigationService.Current= new NavigationService(rootFrame));
} 
```

然后，您可以通过说：

```
NavigationService.Current.Navigate<MyView>(); 
```

# simulation - 这种奇怪的行为是自然出现的还是我的错误？

> ID：12860923
> 
> 赞同：7
> 
> 时间：2012-10-12T14:11:46.527
> 
> 标签：simulation

我正在研究一个 2d 游戏/模拟，其中行星由围绕恒星的核心轨道组成的块组成。它们也会自行旋转，并且它们围绕恒星的旋转和它们的个人旋转都具有随机速度。

该程序会跟踪光线何时照射到哪些块上，并且它们的温度会根据该光线随时间变化。它还会根据它们的温度随着时间的推移对块进行不同的着色。热块看起来更红，冷块看起来更蓝。

在下面的屏幕截图中，两颗行星围绕恒星的轨道都是逆时针的，个人的自转也是顺时针的。左侧/底部的行星旋转缓慢，而顶部/右侧的行星旋转得更快。我将它们称为行星 A（图 1-3 中的左/下）和行星 B（图 1-3 中的右/上）。

第一个屏幕截图是在启动程序后尽快拍摄的：

![[图 1](http://i.imgur.com/Ay613.png)](../Images/88e5051fb443b4427f04582dd3e1912c.png)

A行星发展得非常迅速（并保持）了一个梯度，显示一整天都在阳光下的一侧较暖的块，而黎明刚刚升起的较冷的块。B行星移动得如此之快，以至于似乎无法形成真正的温差。

第二张和第三张截图是大约一分钟后拍摄的，相隔仅几秒钟，以更好地展示行星 B 上奇怪的“条带”：

![[图 2]](../Images/b1d1e582a2fae84b7334a589b5d8eec6.png)

![[图 3]](../Images/a3f27cfe58804331e6113346be08841d.png)

从它的自转来看，行星 B 似乎已经形成了一个永久冷面和一个永久热面，尽管它的自转速度很快（理论上是均匀的）。

如果有足够的时间，似乎所有行星都采用这种奇怪的带状结构，即一边热一边冷，不管自转如何。

![http://i.imgur.com/1iqeM.png](../Images/84a79b889ae8395f54c05569d96aa3d3.png)

（在上面的截图中，继续往前看，行星 A 位于右侧，行星 B 位于中间。）

最奇怪的是，如果我让它运行*更长时间*，大多数行星都会采用 A 行星最初显示的合理模式，而有些则继续奇怪的条带模式。

# tfs - Git-tf 通过 VPN 拒绝权限

> ID：12860925
> 
> 赞同：1
> 
> 时间：2012-10-12T14:11:53.923
> 
> 标签：tfs, vpn, git-tf

当 VPN 在家时，我正在尝试访问我们的 TFS 服务器，但它只给我以下消息：

```
Connecting to TFS...
git-tf: Permission denied: connect 
```

我使用的是完全限定的 URL，其他一切都可以在 VPN 上正常运行。我可以尝试任何身份验证配置设置吗？我在任何地方都找不到任何在线提及的内容。

当然，当我在办公室时，它工作得很好。

**编辑 - 来自日志的堆栈跟踪**

```
2012-10-12 10:07:31,231 INFO  [main] (com.microsoft.tfs.core.config.httpclient.DefaultHTTPClientFactory) HttpClient configured for http://svrtfs2010.ms.innovativesol.com:8080/tfs/DefaultCollection, authenticating as innovative/jrusso
2012-10-12 10:07:31,535 INFO  [main] (com.microsoft.tfs.core.httpclient.HttpMethodDirector) I/O exception (java.net.SocketException) caught when processing request: Permission denied: connect
2012-10-12 10:07:31,535 INFO  [main] (com.microsoft.tfs.core.httpclient.HttpMethodDirector) Retrying request
2012-10-12 10:07:31,535 INFO  [main] (com.microsoft.tfs.core.httpclient.HttpMethodDirector) I/O exception (java.net.SocketException) caught when processing request: Permission denied: connect
2012-10-12 10:07:31,535 INFO  [main] (com.microsoft.tfs.core.httpclient.HttpMethodDirector) Retrying request
2012-10-12 10:07:31,535 INFO  [main] (com.microsoft.tfs.core.httpclient.HttpMethodDirector) I/O exception (java.net.SocketException) caught when processing request: Permission denied: connect
2012-10-12 10:07:31,535 INFO  [main] (com.microsoft.tfs.core.httpclient.HttpMethodDirector) Retrying request
2012-10-12 10:07:31,544 WARN  [main] (git-tf) Error executing command: pull --deep --rebase
com.microsoft.tfs.core.exceptions.TECoreException: Permission denied: connect
    at com.microsoft.tfs.core.exceptions.mappers.TECoreExceptionMapper.map(TECoreExceptionMapper.java:99)
    at com.microsoft.tfs.core.exceptions.mappers.LocationExceptionMapper.map(LocationExceptionMapper.java:32)
    at com.microsoft.tfs.core.clients.framework.location.internal.LocationWebServiceProxy.connect(LocationWebServiceProxy.java:76)
    at com.microsoft.tfs.core.clients.framework.location.LocationService.connect(LocationService.java:754)
    at com.microsoft.tfs.core.clients.framework.location.LocationService.ensureConnected(LocationService.java:884)
    at com.microsoft.tfs.core.clients.framework.location.LocationService.ensureAuthenticated(LocationService.java:923)
    at com.microsoft.tfs.core.TFSConnection.ensureAuthenticated(TFSConnection.java:739)
    at com.microsoft.gittf.client.clc.commands.framework.Command.getConnection(Command.java:354)
    at com.microsoft.gittf.client.clc.commands.framework.Command.getConnection(Command.java:326)
    at com.microsoft.gittf.client.clc.commands.framework.Command.getVersionControlClient(Command.java:474)
    at com.microsoft.gittf.client.clc.commands.framework.Command.getVersionControlService(Command.java:492)
    at com.microsoft.gittf.client.clc.commands.PullCommand.run(PullCommand.java:140)
    at com.microsoft.gittf.client.clc.Main.main(Main.java:319)
Caused by: com.microsoft.tfs.core.ws.runtime.exceptions.TransportException: Permission denied: connect
    at com.microsoft.tfs.core.ws.runtime.client.SOAPService.executeSOAPRequestInternal(SOAPService.java:744)
    at com.microsoft.tfs.core.ws.runtime.client.SOAPService.executeSOAPRequest(SOAPService.java:473)
    at ms.ws._LocationWebServiceSoap12Service.connect(_LocationWebServiceSoap12Service.java:384)
    at com.microsoft.tfs.core.clients.framework.location.internal.LocationWebServiceProxy.connect(LocationWebServiceProxy.java:70)
    ... 10 more
Caused by: java.net.SocketException: Permission denied: connect
    at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
    at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at com.microsoft.tfs.core.httpclient.protocol.DefaultProtocolSocketFactory.createSocket(DefaultProtocolSocketFactory.java:147)
    at com.microsoft.tfs.core.httpclient.HttpConnection.open(HttpConnection.java:862)
    at com.microsoft.tfs.core.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.open(MultiThreadedHttpConnectionManager.java:1690)
    at com.microsoft.tfs.core.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:495)
    at com.microsoft.tfs.core.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:197)
    at com.microsoft.tfs.core.httpclient.HttpClient.executeMethod(HttpClient.java:464)
    at com.microsoft.tfs.core.httpclient.HttpClient.executeMethod(HttpClient.java:376)
    at com.microsoft.tfs.core.ws.runtime.client.SOAPService.executeSOAPRequestInternal(SOAPService.java:588)
    ... 13 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:16:28.677

这与[Java 错误 703177](http://www.java.net/node/703177)有关。Java 7 带来了 IPv6 支持，据报道 Cisco 的 VPN 客户端拒绝 IPv6 流量。`java.net.preferIPv4Stack`您可以通过系统属性强制 Java 使用 IPv4 作为其传输。

您需要编辑`git-tf`启动 JVM 的启动器脚本才能执行此操作。您可以在和中将`-Djava.net.preferIPv4Stack=true`参数添加到启动行。`git-tf``git-tf.cmd`

的最后几行`git-tf`应该是：

```
exec java -Xmx512m -classpath "$GITTF_CLASSPATH" \
    "-Dcom.microsoft.tfs.jni.native.base-directory=$BASE_DIRECTORY/native" \
    -Djava.net.preferIPv4Stack=true \
    com.microsoft.gittf.client.clc.Main "$@" 
```

第 47 行`git-tf.cmd`应该是：

```
java -ea -Xmx512M -cp %GITTF_CLASSPATH% "-Dcom.microsoft.tfs.jni.native.base-directory=%BASE_DIRECTORY%native" -Djava.net.preferIPv4Stack=true com.microsoft.gittf.client.clc.Main %* 
```

# c#-4.0 - 允许来自特定 url 的请求

> ID：12860928
> 
> 赞同：0
> 
> 时间：2012-10-12T14:12:00.917
> 
> 标签：c#-4.0, asp.net-mvc-4

我有控制器

```
public class BilingController : Controller
{
    …
[HttpPost]
    public string Result (string data)
{
…
}

…
} 
```

Method **Result**只能由外部服务**process.anypayservice.com引起**

如何检查 url，是来自 service **process.anypayservice.com**或其他服务的请求？

或者只允许这个 url - **process.payservice.com**用于方法结果调用

任何属性或者我应该写自定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:15:34.207

您可以检查[`HTTP_REFERER`](http://en.wikipedia.org/wiki/HTTP_referer)标题，但请注意它很容易被欺骗。

更好的方法是使用某种可以传递给您的服务进行身份验证的令牌。

# android - Google Play 商店上的智能应用更新：它是如何工作的？

> ID：12860938
> 
> 赞同：19
> 
> 时间：2012-10-12T14:12:18.870
> 
> 标签：android, google-play

Google Play 商店支持（自 2012 年 8 月起）一项名为智能应用更新的新功能，该功能允许在升级应用时仅下载必要的“增量”。

我没有为开发人员找到有关此功能的文档，因此我不知道如何优化我的应用程序以确保它受益于这个伟大的机制。

那么，有没有人知道：

*   有哪些技术影响（如果有的话）对开发人员来说很重要？（我想在用户的设备上构建了一个新的全尺寸 APK，或者未更改的数据可能存储在其他地方？）
*   以前版本中未更改数据的再利用是否仅限于某些资源？（如文件`asset`夹中的文件）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-13T23:03:25.737

一步步：

1.  [GDIFF](http://www.w3.org/TR/NOTE-gdiff-19970901)是一种增量编码算法，用于计算旧应用程序版本与新应用程序版本之间的差异。这是在服务器端完成的。这个计算出来的差异通常被称为补丁文件。
2.  补丁文件被传输到设备。
3.  Google Play Store 应用程序使用补丁文件和旧应用程序来构建应用程序的新版本。
4.  新版本已安装在设备上。

目前，补丁大小是新应用程序版本大小的 25%（平均）。因此，您平均可以节省 75% 的流量。权衡是您必须在终端设备上进行更多计算才能部署接收到的补丁，具体取决于增量编码技术。GDIFF 非常简单，并且开销最小。差异是在 APK 包之间计算的（使用 APK 中的所有信息）。如前所述，开发人员无需做任何事情即可从这一新功能中受益。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-12T14:42:42.203

没有文档的原因是因为它都是 100% 由谷歌在服务器端完成的，没有任何外部交互。开发人员根本不应该担心这个功能。只需开发您通常会的应用程序即可。

公平地说，我不相信他们希望任何人知道它是如何工作的，因为我假设这是他们知识产权的一部分。

# python - Python Walk 目录结构和 zip 子目录

> ID：12860943
> 
> 赞同：-3
> 
> 时间：2012-10-12T14:12:32.287
> 
> 标签：python, python-2.7

我运行了以下代码：

```
import zipfile
import glob
import datetime
import os 
from collections import defaultdict
from shutil import copyfile

src = 'X:\\' 

for name in glob.glob('X:\*'):  
    print name

dict_date = defaultdict(lambda : defaultdict(list))
for fil in os.listdir(src):
        if os.path.isfile(os.path.join(src, fil)):
        date, logs = fil.split('_')[0], fil.split('_')[2]
        dict_date[date][logs].append(fil)

for date in dict_date:
    for logs in dict_date[date]:
        try:
            os.makedirs(os.path.join(src, date, logs))
            except os.error:
            pass
        for fil in dict_date[date][logs]:
            copyfile(os.path.join(src, fil), os.path.join(src, date, logs, fil))

for date in dict_date:
    with ZipFile(os.path.join(path, '{0}.zip'.format(date)), 'w') as myzip:
        for logs in dict_date[date]:
            for fil in os.listdir(os.path.join(path, date, logs)):
                if fil.endswith('.log'):
                    myzip.write(os.path.join(path, date, logs, fil)) 
```

以下是结果：

```
>>> 
X:\082012
X:\092012
X:\20120830
X:\20120830_7Days_ISDA_Logs_HS.zip
X:\20121001
X:\20121002
X:\20121003
X:\20121004
X:\20121005
X:\20121006
X:\20121007
X:\20121008
X:\20121009
X:\20121010
X:\20121011

Traceback (most recent call last):
  File "C:\Documents and Settings\tyoffe\Desktop\isda_zip.py", line 31, in <module>
    with ZipFile(os.path.join(path, '{0}.zip'.format(date)), 'w') as myzip:
NameError: name 'ZipFile' is not defined
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:16:33.170

你应该使用：

```
with zipfile.ZipFile(os.path.join(path, '{0}.zip'.format(date)), 'w') as myzip: 
```

或者你应该这样做：

```
from zipfile import ZipFile 
```

# javascript - Node.js 脏 是否可以重新加载脏数据库？

> ID：12860944
> 
> 赞同：0
> 
> 时间：2012-10-12T14:12:32.693
> 
> 标签：javascript, node.js, node-dirty

当服务器试图从中获取一些东西时，如何让服务器重新加载脏数据库？因为当我使用文本编辑器编辑数据库文件并重新加载浏览器时，它不会更新页面。

“重新加载数据库（）；” 是我要重新加载数据库的地方。 **代码示例**

```
http.createServer(function (request, response) {
    var pathname = url.parse(request.url).pathname;
    var html = db.get(pathname);

    //Check if the requsted file is CSS or JS
    if (/\.(css)$/.test(pathname) || /\.(js)$/.test(pathname)){

        fs.createReadStream(__dirname + pathname, {
            'bufferSize': 4 * 1024
        }).pipe(response);

    } else if (!!html && pathname !== '/admin' ) {
        //Pages from our Dirty DB
        response.writeHead(200, {'Content-Type': 'text/html'});
                    //reloadDB();
        response.end(html);
    } else if (pathname === '/admin') {
        //Display Admin page
        response.writeHead(200, {'Content-Type': 'text/html'});
        response.end('Admin!');
    } else {
        //Show 404 Page
        response.writeHead(404, {'Content-Type': 'text/html'});
        //reloadDB();
                    response.end(db.get('404'));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:36:16.807

您只需要调用`.Dirty(path)`现有实例的方法即可；如果您查看源代码，您会看到有一个检查允许`Dirty()`用作实例方法或构造函数。

# image - 八度错误：imread 找不到 image.jpg

> ID：12860945
> 
> 赞同：1
> 
> 时间：2012-10-12T14:12:34.810
> 
> 标签：image, image-processing, octave

我已经用谷歌搜索了这个错误，它是通过 octave 控制台和 xoctave 收到的，并尝试了包含`cd`命令的建议，然后将`IMAGE_PATH`两者设置为相同的图像路径。

尝试上述建议后， imread 仍然无法发出相同的错误；图像存在的路径与 xoctave 的默认工作区的路径完全相同。我已经通过 Xoctave`options>console> Where is Octave`将正确的目录插入到 octave.exe，然后保存并重新打开 xoctave。

错误是：

```
error: imread: cannot find image.jpg 
error: called from: 
error:      C:\octave\3.2.4.gcc-4.4.O\share\octave\3.2.4\m\image\imread.m at 1ine 53, column 5 
```

* * *

在 octave 安装中，我选择了默认安装设置（部分如下所示），以及所有“Octave Forge”包（包括“image”）。然后我安装并提取了[此处](http://octave.sourceforge.net/image/index.html)找到的图像处理工具箱。

![在此处输入图像描述](../Images/d2f193c9f5df8f8db17b74b202b97583.png)

奇怪的是，我在另一台计算机（运行 Windows XP）上遇到了相同的 imread 错误，一旦我更改目录 (cd) 并将 IMAGE_PATH 设置为所需的工作区，该错误就解决了。此外，在使用`ls`列出目录的内容时，可以按预期在其中找到图像。

我正在使用 Octave 3.2.4 和 Xoctave 0.9.79 beta；在 Windows 7 64 位上运行。

# css - 将拇指放在左侧并将文本放在右侧的标准/最佳方式是什么？

> ID：12860949
> 
> 赞同：0
> 
> 时间：2012-10-12T14:12:42.627
> 
> 标签：css

将图像定位在左侧并在其右侧有两个文本字段的最佳/标准方法是什么？使用花车？定位？

```
<li>
<a href=""> <img src=""THUMB HERE /> </a>
<a href=""> TITLE </a>
<span> META DATA </span>
</li> 
```

这应该是结果：

![在此处输入图像描述](../Images/b8fdf703a23884b76d3557f3221d20a0.png)

我不是在寻求一种方法来做到这一点。我正在寻求关于跨浏览器兼容性和干净代码的最佳方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T14:24:52.143

使用花车。

```
<li>
<div style="float:left">
<a href=""> <img src=""THUMB HERE /> </a>
</div>
<div style="float:left;padding-left:10px">
<a href=""> TITLE </a>
<span> META DATA </span>
</div>
<div style="clear:both">
</div>
</li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:38:39.753

显而易见的解决方案是浮动：

演示：http: [//jsfiddle.net/SO_AMK/wA8dj/](http://jsfiddle.net/SO_AMK/wA8dj/)

CSS：

```
li { display: inline-block; }
/* Keep it from being full width, if you define a width, skip this. */
li span.left { float: left; }
li span.right { float: right; } 
```

浏览器截图：http: [//imageshack.us/g/1/9808161/](http://imageshack.us/g/1/9808161/)

屏幕截图是 FX11、Chrome 18、Safari 5.1 和 IE 8 和 9。在 IE 7 中，内联块中断并变为全宽。

# php - 不能将 $_POST 中的复选框值作为数组？

> ID：12860952
> 
> 赞同：0
> 
> 时间：2012-10-12T14:13:05.997
> 
> 标签：php, html, forms, post

> **可能重复：**
> [从多个复选框中获取 $_POST](https://stackoverflow.com/questions/4997252/get-post-from-multiple-checkboxes)

我对网络开发有点陌生，这是一个问题（完全难倒我）我觉得有一个简单的解决方案，所以我不会绕着灌木丛试图自己弄清楚。我还将关注最重要的部分。

我有一些 PHP 代码在每行旁边输出一个表格、一个表单和一个复选框。每个复选框如下所示：

```
<input type="checkbox" name="data_id" value="1">
<input type="checkbox" name="data_id" value="2">
<input type="checkbox" name="data_id" value="3"> 
```

以及提交按钮：

```
<input type='submit' name='Submit' value='Submit'/> 
```

标准表格设置，没什么特别的。

我想在数组中获取选中的项目，但是当我使用 $_POST 从表单中检索数据时：

```
if($_POST['data_id'])
    {
        var_dump($_POST['data_id']); //returns string
        print_r($_POST['data_id']); //shows only one checkbox value
    }; 
```

变量没有返回数组，我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:14:31.037

PHP 的表单到数组语法要求`[]`在元素名称中：

```
<input type="checkbox" name="data_id[]" value="1">
                                    ^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:14:45.157

当 PHP 解析数据时，如果字段名称以or结尾（否则它会删除除一个值之外的所有值） ，`$_POST/GET/REQUEST`则仅将数据显示为数组。`[]``[some_index]`

重命名字段：

```
<input type="checkbox" name="data_id[]" value="1">
<input type="checkbox" name="data_id[]" value="2">
<input type="checkbox" name="data_id[]" value="3"> 
```

…或者获取[原始的帖子数据](http://php.net/manual/en/reserved.variables.httprawpostdata.php)并自己解析。（我不推荐后一种方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T14:16:50.083

尝试

```
<input type="checkbox" name="data_id[]" value="1">
<input type="checkbox" name="data_id[]" value="2">
<input type="checkbox" name="data_id[]" value="3"> 
```

# ios - 基本动画（滑动转动）

> ID：12860953
> 
> 赞同：2
> 
> 时间：2012-10-12T14:13:06.683
> 
> 标签：ios, animation, graphics, opengl-es, core-animation

我正在考虑向我的表视图添加动画。这应该如下工作：用户在表格视图单元格上滑动，单元格的内容会翻转，以便“卡片的另一面”可见。我怎么能这样做？我不知道我是否例如尝试通过在每一行中使用 opengl 视图自己制作所有内容来做到这一点，或者我是否可以使用 CoreAnimation？有没有更好的方法来做到这一点？专业人士如何实现这样的动画（例如 Flipboard）？我不需要源代码，简短的描述或关键字会很有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T21:22:05.103

Apple 具有内置功能。我目前正在使用它并且效果很好。

假设您有 2 个要在 A 和 B 之间切换的视图。翻转会为父项的整个区域设置动画，因此如果您只希望翻转全部为 A，请确保 A 及其父项的大小相同。

这是我喜欢来回翻转的操作：

```
if(B.superview == nil)
   [UIView transitionFromView:A toView:B duration:1.f options:UIViewAnimationOptionTransitionFlipFromRight completion:nil];
else 
   [UIView transitionFromView:B toView:A duration:1.f options:UIViewAnimationOptionTransitionFlipFromLeft completion:nil]; 
```

翻转后，FromView 将从其父视图（父视图）中移除，而 ToView 将添加到该父视图。您可以将上述代码放入手势识别器中以进行滑动或点击。我只需要点击，所以我在 A 和 B 中放置了一个清除按钮，并在其按钮事件中调用了上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:30:45.150

我会在您的单元格上放置一个 UISwipeGestureRecognizer，然后在刷卡时使用 UIView 过渡动画。（参见 UIView 文档）。应该做你想做的。

# perl - 如何通过简单地将环境变量的值放在域之后的斜杠之后，将环境变量传递给 CGI 脚本？

> ID：12860961
> 
> 赞同：1
> 
> 时间：2012-10-12T14:13:32.133
> 
> 标签：perl, url, cgi, url-routing, environment-variables

我想将环境变量传递给用 perl 编写的 cgi 脚本，方法是将其作为 URL 中域名后第一个斜杠后的唯一文本。例如，通常人们可能会这样做： `http://www.mydomain.com/cgi-bin/my_perl_script.pl?my_environment_variable=12345`. 我希望它看起来像这样 `http://wwww.mydomain.com/12345`：我怎么做？当用户浏览我的网站时，我希望持久访问此值。我很乐意将它作为隐藏的表单输入传递，或者写一个 cookie。这纯粹是出于审美目的，并使网址更容易记住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:49:45.393

如果您正在运行 Apache（就像我一样），您应该使用 mod_rewrite 模块。看哪：

```
<IfModule mod_rewrite.c>
    RewriteEngine   on
    RewriteCond     %{REQUEST_FILENAME}     !-d
    RewriteCond     %{REQUEST_FILENAME}     !-f
    RewriteRule     ([^(cgi\-bin\/my_perl_script\.pl)]+) /cgi-bin/my_perl_script.pl?my_environment_variable=$1  [QSA,L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:29:14.887

假设您正在使用该`CGI.pm`模块，您可以使用该`url()`方法获取[用于访问脚本的 URL](https://metacpan.org/module/CGI#OBTAINING-THE-SCRIPTS-URL)。打开`-path`并`-rewrite`打开以获取完整路径。

然后，您可以随意解析它（[URI 模块](https://metacpan.org/module/URI)是一个不错的选择）。

这样的：

```
use strict;
use warnings;
use CGI;
use URI;
use Try::Tiny;

my $cgi = CGI->new;

my $id = "a default value";

try {
    my $uri = URI->new($cgi->url(-rewrite=>1, -path=>1));
    my $path = $uri->path;
    my @parts = split '/', $path;
    $id = pop @parts;
};

print $cgi->header('text/plain');
say $id; 
```

# qr-code - 制作彩色二维码的脚本

> ID：12860964
> 
> 赞同：0
> 
> 时间：2012-10-12T14:13:51.680
> 
> 标签：qr-code

有很多脚本可以生成黑白二维码。我的网站上有一个脚本可以生成二维码。但是，我想要一个允许用户修改黑白二维码并将其自定义为更彩色的二维码的脚本。

是否有开源脚本允许用户使用颜色自定义他们的二维码？

以便他们可以选择

QR 颜色
背景颜色
使用颜色渐变
渐变样式：径向
2nd QR 颜色渐变
圆角

上传徽标

这些网站不提供开源脚本

*   [http://www.qrhacker.com/](http://www.qrhacker.com/)
*   [http://uqr.me/2012/06/qr-code-beautifier/](http://uqr.me/2012/06/qr-code-beautifier/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-05-01T11:57:03.707

有一种迂回的方法来做颜色渐变 - 我最近需要这样做，它需要一些计算，因为正如你所观察到的，那些可以是封闭源代码的，而开源替代品不这样做。

1.  将渐变生成为图像。有人编写[了一个有用的 PHP 类](http://planetozh.com/blog/my-projects/images-php-gd-gradient-fill/comment-page-2/)来为您生成各种方向和样式的图像 - 其中一个是径向的（好吧，无论如何都是椭圆）。

2.  使用像 endroid 的二维[码](https://github.com/endroid/qr-code)库这样的库。

3.  在GD中重新加载二维码，并将二维码颜色设置为透明。

4.  将 QR 码叠加到渐变图像上。

# vb.net - 根据嵌入的 VB.NET 资源的路径自动添加命名空间

> ID：12860969
> 
> 赞同：7
> 
> 时间：2012-10-12T14:14:02.157
> 
> 标签：vb.net, build, embedded-resource

我习惯于在 C# 中嵌入资源，我喜欢它自动将命名空间添加到嵌入资源的方式。这让我可以做这样的事情：

```
files\version1\config.xml
files\version2\config.xml
files\version2\config.xml 
```

不幸的是，如果您在 VB.NET 项目中尝试相同的操作，则会出现编译错误，因为它会尝试将所有嵌入式资源放入根命名空间。为了解决这个问题，我可以`.vbproj`像这样手动编辑文件：

```
<EmbeddedResource Include="files\version1\config.xml">
  <LogicalName>$(RootNamespace).files.version1.config.xml</LogicalName>
</EmbeddedResource>
<EmbeddedResource Include="files\version2\config.xml">
  <LogicalName>$(RootNamespace).files.version2.config.xml</LogicalName>
</EmbeddedResource>
<EmbeddedResource Include="files\version3\config.xml">
  <LogicalName>$(RootNamespace).files.version3.config.xml</LogicalName>
</EmbeddedResource> 
```

虽然这是可行的，但它是手动的、耗时且容易出错的，所以我的问题是：可以自动编写构建任务或构建事件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T22:44:27.817

这是默认情况下 Visual Basic 不使用文件夹路径来创建命名空间的副作用。

就个人而言，除特定情况外，您所谈论的我更喜欢名称中没有所有其他文件夹路径。我希望 MS 在文件资源中添加另一个属性，以允许将来专门设置命名空间，但在那之前......

解决方案很简单。

**在 C# 中创建一个仅资源的 dll 并从那里读取您的资源**。作为一名 VB 开发人员，我不会三思而后行地满足特定目的。

**编辑**。或者...可以使用 vbs 文件作为预构建事件，以制作模拟命名空间所需的格式将文件复制到新资源目录。

```
dim fSys
set fsys=createobject("Scripting.FileSystemObject")
dim root : root= "c:\temp"
dim out : out="c:\temp\DynResource"

dim rFo: set rFo=fsys.getfolder(root)
dim outPath

for each sf in rFo.SubFolders
    if instr(1, sf.name, "Version")>=1 then 'valid resource folder
        for each f in sf.Files
            outpath = out & "\" & sf.name & "." & f.name
            if fsys.FileExists(output) then
                dim tf:set tf=fsys.getfile(output)
                if tf.length<>f.length or tf.DateLastModified<>f.DateLastModified then
                    f.copy outPath,true
                else
                    'same file, no update required.
                end if 
            else
                f.copy outPath,true
            end if
        next
    end if 
next 
```

输出文件夹必须已经存在（并且文件夹名称中显然不能有“版本”）。

# c# - wpf中绑定对象的规则

> ID：12860977
> 
> 赞同：0
> 
> 时间：2012-10-12T14:14:22.203
> 
> 标签：c#, wpf, binding

我很难将 a`ListView`与`ObservableCollection`另一个班级的 a 绑定在一起。

我的xml：

```
<ListView Height="117" HorizontalAlignment="Left" Margin="20,239,0,0" Name="lvResults" VerticalAlignment="Top" Width="759" ItemsSource="{Binding RuleSearch.FileMatches}">
        <ListView.View>
            <GridView>
                <GridViewColumn Header="Name" Width="120" DisplayMemberBinding="{Binding FileName}"/>
                <GridViewColumn Header="Size" Width="120" DisplayMemberBinding="{Binding DirectoryName}"/>
                <GridViewColumn Header="Date" Width="120" DisplayMemberBinding="{Binding Size}"/>
                <GridViewColumn Header="Full Path" Width="120" />
                <GridViewColumn Header="Some Meaningless Data" Width="120" />
            </GridView>
        </ListView.View>
    </ListView> 
```

Xaml 背后的代码：

```
private Search _ruleSearch = new Search();
public Search RuleSearch { get { return _ruleSearch; }} 
```

在搜索类中：

```
public ObservableCollection<Result> FileMatches { get; private set; } 
```

请注意，更改是在新线程上进行的，如果这有所不同：

```
private void FindResultOnNewThreads()
  {
     FileMatches.Clear();

     Parallel.ForEach(_fileList, file =>
     {
        foreach (Regex search in SearchTermList.Where(search => search.IsMatch(file)))
        {
           lock (FileMatches)
           {
              FileInfo fileInfo = new FileInfo(file);
              FileMatches.Add(new Result
                                 {
                                    Attributes = fileInfo.Attributes,
                                    DirectoryName = fileInfo.DirectoryName,
                                    Extension = fileInfo.Extension,
                                    FileName = fileInfo.Name,
                                    FullNamePath = fileInfo.FullName,
                                    Size = fileInfo.Length
                                 });
           }
        }
     });
  } 
```

结果类：

```
 public class Result
   {
      public string FileName { get; set; }
      public string DirectoryName { get; set; }
      public string FullNamePath { get; set; }
      public long Size { get; set; }
      public string Extension { get; set; }
      public FileAttributes Attributes { get; set; }

   } 
```

真正的问题是，我正在自己学习 wpf，并且无法真正找到 WPF 中数据绑定的规则集。我知道它需要属性和公共属性，除了我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:28:46.960

可能您的 listViews DataContext 未设置为 UserControls 或 Windows 或其他您拥有 RuleSearch 道具的地方。

您可以在 xaml.cs 代码隐藏中设置它。

```
lvResult.DataContext = this; 
```

或在 xaml

```
<ListView Height="117" HorizontalAlignment="Left" Margin="20,239,0,0" Name="lvResults" VerticalAlignment="Top" Width="759" ItemsSource="{Binding Path=RuleSearch.FileMatches, RelativeSource={RelativeSource AncestorType={x:Type typeOfAncestor}}}">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Name" Width="120" DisplayMemberBinding="{Binding FileName}"/>
            <GridViewColumn Header="Size" Width="120" DisplayMemberBinding="{Binding DirectoryName}"/>
            <GridViewColumn Header="Date" Width="120" DisplayMemberBinding="{Binding Size}"/>
            <GridViewColumn Header="Full Path" Width="120" />
            <GridViewColumn Header="Some Meaningless Data" Width="120" />
        </GridView>
    </ListView.View>
</ListView> 
```

其中 typeOfAncestor 是您的用户控件/窗口的类型...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T14:38:15.327

您的`Search`类需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)，它用于让 UI 知道代码隐藏中的属性何时更改（在本例中为`FileMatches`）。这将涉及注册`FileMatches.CollectionChanged`事件的回调，然后`INotifyPropertyChanged.PropertyChanged`使用“FileMatches”的属性名称引发事件。

请注意，如果您希望集合中的值与 UI 保持同步，您还应该在 Result 类上实现 INotifyPropertyChanged。（通过查看您的代码，您的 Result 类的内容看起来是不变的，因此您不需要这样做）。

# c# - 将excel表导出到xml电子表格2003

> ID：12860981
> 
> 赞同：0
> 
> 时间：2012-10-12T14:14:36.680
> 
> 标签：c#, xml, excel

我正在尝试将 excel 表导出到 xml 电子表格 2003 中，以便在结果 xml 文件上应用一些 xsl，

所以，我尝试使用 XlFormat 枚举来保存我正在处理的工作表，如下所示：

```
Excel.Application app = new Excel.Application();
Excel.Workbook workbook;
Excel.Worksheet NwSheet;
workbook = app.Workbooks.Open(@"C:\file.xlsx",
                          Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                          Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                          Type.Missing, Type.Missing, Type.Missing, Type.Missing,
                          Type.Missing, Type.Missing);
NwSheet = (Excel.Worksheet)workbook.Sheets.get_Item(1);

string outfile = @"c:\temp.xml";
NwSheet.SaveAs(outfile, Excel.XlFileFormat.xlXMLSpreadsheet, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing); 
```

此代码生成的 xml 文件存在以下问题：

1 个日期类型的单元格生成为：2011-10-10T00:00:00.000，我希望它是 2011 年 10 月 10 日，就像它在 excel 表中一样，所以我如何访问这些单元格的类型以便改变他们？？

2-数字 8.2 生成为 8.1999999999999993 为什么会发生这种情况，我怎样才能得到它，就像它在 excel 表中一样

我想两者都是同一个问题的面孔，我只需要出现在 excel 表中的数据。

# bash - 如何为目录 /home/virt/ 中的所有条目设置日期和时间

> ID：12860993
> 
> 赞同：0
> 
> 时间：2012-10-12T14:15:10.493
> 
> 标签：bash

如何为目录 /home/virt/ 中的所有条目设置日期（01.01.2000）和时间（00.00.00）？

非常感谢你 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T14:17:22.887

这很简单

```
for i in /home/virt/*; do touch -t 200001010000 "$i"; done 
```

或更简单：

```
touch -t 200001010000 /home/virt/* 
```

（感谢jm666）

* * *

如果你有`bash4`并且想要它递归：

```
shopt -s globstar
touch -t 200001010000 /home/virt/** 
```

或更便携：

```
find /home/virt -exec touch -t 200001010000 {} \; 
```

# jquery - Excel 导出 JavaScript 变量

> ID：12860995
> 
> 赞同：0
> 
> 时间：2012-10-12T14:15:14.657
> 
> 标签：jquery, export-to-excel, var

我在[本文](https://stackoverflow.com/questions/6566831/how-to-export-html-table-to-excel-using-javascript)中使用了 jQuery 版本，但我宁愿以表的形式导出 javascript 变量，而不是 DOM 中的实际表。

有谁知道如何修改该代码来做到这一点？那一小段代码远远超出了我的限制。

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:19:40.950

for 循环是该代码中所有操作发生的地方：

```
for(var i=0; i<rowCount; i++) 
{   
    for(var j=0; j<colCount; j++) 
    {           
        str= myTableHead.getElementsByTagName("tr")[i].getElementsByTagName("th")[j].innerHTML;
        ExcelSheet.ActiveSheet.Cells(i+1,j+1).Value = str;
    }
}

} 
```

因此，您所能做的就是将您的 java-script 对象值而不是值分配`str`给 the `ExcelSheet.ActiveSheet.Cells(i+1, j+1).Value`，这将解决它。

# php - 在 PHP 中扣除 ax%

> ID：12860996
> 
> 赞同：0
> 
> 时间：2012-10-12T14:15:17.793
> 
> 标签：php

这是我正在尝试做的一个例子。任何关于最佳实践的帮助都会非常有帮助！

```
<?php 

$fullprice = "5990";

$discount = "30"; // This is 30 percentage

echo = $fullprice - $discount; // Here i need to deduct 30% from the fullprice ?

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:17:18.030

```
echo $fullprice * ((100 - $discount) / 100); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:17:46.633

```
$fullprice = 5990;

$discount = 30; // This is 30 percentage

echo $fullprice * ((100 - $discount) / 100); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T14:17:05.417

```
 echo $fullprice * (1 - $discount/100); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-12T14:20:39.427

白痴证明折扣价格计算：

```
$fullPrice * (100 - max(0, min(100, $discount))) / 100; 
```

它将折扣百分比压缩在 0 到 100（含）之间。

# java - 覆盖非 Activity 类中的方法，Android

> ID：12860998
> 
> 赞同：0
> 
> 时间：2012-10-12T14:15:26.063
> 
> 标签：java, android, overriding

我正在开发一个使用默认相机应用程序拍照的应用程序。现在我想检查是否有人拍了照片。

我在 SO 上读到，可以用这种方法完成：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  ...
    } 
```

我的问题是，当我将该方法放在我的类中时，它不是一个 Activity 类，我得到了错误：

*“onActivityResult(..) 方法必须覆盖或实现超类型方法”*

我已经检查过了，我的编译器设置为 java 1.6。我的jre设置为1.6。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T14:42:16.430

您需要一个`Activity`on 命令来接收相机动作的结果。为什么要将代码放在其他类中？如果只是为了重用/组织，那么为什么不直接从你的其他班级打电话`Activity`呢？

```
public class SomeOtherClass {
    public static void someOtherMethod(int requestCode, int resultCode, Intent data){
        ...
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    SomeOtherClass.someOtherMethod(requestCode,resultCode,data);
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-12T14:38:55.067

您只能从另一个 Activity 或 Fragment 中的 Activity 获取结果。因此，您只能从扩展 Activity 或其后代之一的类扩展 onActivityResult()（这实际上是与 java 相关的，而不是与 android 相关的）。此外，您必须在调用 startActivityForResult() 的同一活动中扩展和定义 onActivityResult()。

如果您需要在另一个不扩展 Activity 的类中执行代码，您可以简单地实现自己的方法并从 onActivityResult() 内部调用它

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

  if(requestCode == MY_REQUEST_CODE && resultCode == RESULT_OK)
   {
     MyClass object = new MyClass(); //or maybe it's already instantiated and it is defined as a field
     object.myCustomMethod(data); //pass it data or one of it's extras
   }

} 
```