# StackOverflow 问答 12533000-12533999

# android - 如果我们不需要它，我们是否必须显式回收位图？

> ID：12533001
> 
> 赞同：2
> 
> 时间：2012-09-21T14:55:31.763
> 
> 标签：android, bitmap, recycle

Bitmap 有一个`recycle`方法，但是如果我们不再需要它，我们是否必须显式调用它？

例如，一个`ImageView`现在有一个位图。当用户单击一个按钮时，它将为 ImageView 设置一个新的位图。

我们是否必须在分配新的位图之前回收原始位图？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:02:43.810

是的，如果您的目标设备是`Android`较旧的`3.0`. 这样可以避免你在`OutOfMemoryException`.

注意：在`android 3`本机堆中分配位图内存之前。从 GC 的角度来看，java 对象将保留低内存。

# sql-server-2008 - 使用空过滤器作为参数处理 T-SQL 查询

> ID：12533003
> 
> 赞同：0
> 
> 时间：2012-09-21T14:55:42.227
> 
> 标签：sql-server-2008, tsql, parameters, filter, null

假设我有一个存储过程，其中我将 5 个过滤器作为参数传递。这些参数是我查询中每一列的过滤器。我的查询有 5 个字段。如果我的过滤器有 1 个或多个 NULL（或 ''）值参数，防止我的查询引发异常/错误的最佳方法是什么？

```
 SELECT 
        [helpings_turkey],
        [helpings_green_beans],
        [scoops_squash],
        [qty_buscuits],
        [pieces_pie]
    FROM
        [thanksgiving_guest]
    WHERE 
        [helpings_turkey] > @helpings_turkey_filter
        AND [helpings_green_beans] > @helpings_green_beans_filter
        AND [scoops_squash] > @scoops_squash_filter
        AND [qty_buscuits] > @qty_buscuits_filter
        AND [pieces_pie] > @pieces_pie_filter 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:03:58.300

好吧，如果值为 null，您将不会收到错误，但您也不会得到结果。

你可以这样做：

`[helpings_turkey] > ISNULL(@helpings_turkey_filter, X)`

其中“X”是您知道的小于最小值的值。

这适用于小型数据集，但可能无法利用您在 [thanksgiving_guest] 表上可能拥有的任何索引。

在这样的模式中执行过滤器的最高效方法通常是动态组装 SQL，通过在遇到非空过滤器条件时插入子句，如下所示：

```
SET @sql = 'SELECT 
        [helpings_turkey],
        [helpings_green_beans],
        [scoops_squash],
        [qty_buscuits],
        [pieces_pie]
    FROM
        [thanksgiving_guest]
    WHERE 1=1';

IF @helpings_turkey_filter IS NOT NULL BEGIN
    SET @sql = @sql + '[helpings_turkey] > @helpings_turkey_filter'
END
...
IF @pieces_pumpkin_pie_filter IS NOT NULL BEGIN
    SET @sql = @sql + '[pieces_pumpkin_pie] > @pieces_pumpkin_pie_filter'
END

exec sp_executesql @sql, N'@helpings_turkey_filter, ..., @pieces_pumpkin_pie_filter', @helpings_turkey_filter, @pieces_pumpkin_pie_filter` 
```

请注意，即使我们正在动态组装查询，我们仍会继续参数化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:09:54.607

试试这个，因为这将解决您的问题（如果您传递多个可能为 NULL 的参数：

```
SELECT 
        [helpings_turkey],
        [helpings_green_beans],
        [scoops_squash],
        [qty_buscuits],
        [pieces_pie]
    FROM
        [thanksgiving_guest]
    WHERE 
        [helpings_turkey] > ISNULL(@helpings_turkey_filter, 0)
        AND [helpings_green_beans] > ISNULL(@helpings_green_beans_filter, 0)
        AND [scoops_squash] > ISNULL(@scoops_squash_filter, 0)
        AND [qty_buscuits] > ISNULL(@qty_buscuits_filter, 0)
        AND [pieces_pumpkin_pie] > ISNULL(@pieces_pumpkin_pie_filter, 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T14:59:25.927

```
 SELECT 
        [helpings_turkey],
        [helpings_green_beans],
        [scoops_squash],
        [qty_buscuits],
        [pieces_pie]
    FROM
        [thanksgiving_guest]
    WHERE 
        [helpings_turkey] > IsNull(@helpings_turkey_filter, 0)
        AND [helpings_green_beans] > IsNull(@helpings_green_beans_filter, 0)
        AND [scoops_squash] > IsNull(@scoops_squash_filter, 0)
        AND [qty_buscuits] > IsNull(@qty_buscuits_filter, 0)
        AND [pieces_pumpkin_pie] > IsNull(@pieces_pumpkin_pie_filter, 0) 
```

像这样的东西。如果参数传入，则使用该参数，如果不是默认为某个值。我默认为零。

# java - Android 应用程序因 ChoreoGrapher 中的 NullPointerException 而崩溃

> ID：12533006
> 
> 赞同：13
> 
> 时间：2012-09-21T14:55:54.707
> 
> 标签：java, android

我有以下代码，试图在 ListView 中创建一个简单的 ListAdapter （我之前有这个代码工作，这是我唯一改变的地方）：

```
public BuddyListAdapter(Context context, HashMap<String, Buddy> hashMap) {
    buddyList = new ArrayList<Buddy>(hashMap.values());
    mInflater = LayoutInflater.from(context);
    ctx = context;
} 
```

单步执行时，什么都没有发生，但是在运行时，我得到一个`NullPointerException`in `ChoreoGrapher.doCallbacks`，当我创建一个 empty 时`ArrayList`，它不会崩溃：

```
public BuddyListAdapter(Context context, HashMap<String, Buddy> hashMap) {
    buddyList = new ArrayList<Buddy>();
    mInflater = LayoutInflater.from(context);
    ctx = context;
} 
```

什么是它`ChoreoGrapher`，为什么它会导致我的应用程序崩溃？

我完全被困在可能是什么问题上，或者如何找出问题所在。Eclipse 调试器或崩溃信息并没有真正的帮助。

整个堆栈跟踪如下：

```
Thread [<1> main] (Suspended (exception NullPointerException))  
    Choreographer.doCallbacks(int, long) line: 558  
    Choreographer.doFrame(long, int) line: 525  
    Choreographer$FrameDisplayEventReceiver.run() line: 711 
    Handler.handleCallback(Message) line: 615   
    Choreographer$FrameHandler(Handler).dispatchMessage(Message) line: 92   
    Looper.loop() line: 137 
    ActivityThread.main(String[]) line: 4745    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 511  
    ZygoteInit$MethodAndArgsCaller.run() line: 786  
    ZygoteInit.main(String[]) line: 553 
    NativeStart.main(String[]) line: not available [native method] 
```

我也有一个`Handler`主要活动。当它不做任何事情时，列表视图不会崩溃。但是，我在打开列表视图之前从中删除了所有回调。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-11-13T21:53:51.747

我的应用程序中只有 Android 4.4 才有这个错误。

在调试器中，它显示与提问者相同的消息。但是，当不调试 DDMS 中的完整堆栈跟踪时：

完整的堆栈跟踪：

```
11-13 16:34:53.088: E/AndroidRuntime(1964): FATAL EXCEPTION: main
11-13 16:34:53.088: E/AndroidRuntime(1964): Process: appname, PID: 1964
11-13 16:34:53.088: E/AndroidRuntime(1964): java.lang.NullPointerException
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.TextView.makeNewLayout(TextView.java:6124)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.TextView.onMeasure(TextView.java:6419)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.View.measure(View.java:16458)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.Spinner.setUpChild(Spinner.java:632)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.Spinner.makeView(Spinner.java:585)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.Spinner.getBaseline(Spinner.java:431)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1262)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:590)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.View.measure(View.java:16458)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.View.measure(View.java:16458)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.View.measure(View.java:16458)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at com.android.internal.widget.ActionBarOverlayLayout.onMeasure(ActionBarOverlayLayout.java:327)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.View.measure(View.java:16458)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:5125)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2289)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.View.measure(View.java:16458)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1914)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1111)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1293)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:5582)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.Choreographer.doFrame(Choreographer.java:532)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.os.Handler.handleCallback(Handler.java:733)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.os.Handler.dispatchMessage(Handler.java:95)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.os.Looper.loop(Looper.java:137)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at android.app.ActivityThread.main(ActivityThread.java:4998)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at java.lang.reflect.Method.invokeNative(Native Method)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at java.lang.reflect.Method.invoke(Method.java:515)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:777)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:593)
11-13 16:34:53.088: E/AndroidRuntime(1964):     at dalvik.system.NativeStart.main(Native Method) 
```

翻看第6124行TextView的4.4源码，原来这是椭圆时缺少layout params造成的。这很奇怪，因为代码在 a 中失败`ListAdapter`，您没有在`getView`.

`android.R.layout.simple_spinner_item`我曾经为标准微调项目充气。看起来这个项目使用`ellipsing`. 所以`getView`我现在打电话给：

```
view.setEllipsize(null); 
```

这解决了我在 Android 4.4 上的问题。

**编辑**

事实证明，问题不是椭圆，而是视图中的不当膨胀`getView`。

```
inflater.inflate(android.R.layout.simple_spinner_item, null);//WRONG
inflater.inflate(android.R.layout.simple_spinner_item, parent, false);//GOOD 
```

请注意，您提供`false`的不是立即将视图附加到父级，因为这是在需要时附加子级的适配器中。否则你会得到错误。

当你正确充气时，你不需要设置`ellipseSize`为`null`. 这是因为当您使用父级填充好方法时，它会`LayoutParams`正确处理，导致椭圆代码不会 raise `NullPointerException`。

所以，适当地充气，然后你就不必再担心了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-16T14:02:40.907

我在另一个应用程序中再次遇到同样的事情。这似乎是由`getView`列表适配器中的未处理异常引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-27T22:30:25.080

在代码中操作视图时，检查可能有无效类型转换的地方。我对这条线有完全相同的错误

```
picture.setLayoutParams(new ViewGroup.LayoutParams(50, 50)); 
```

Choreographer 抛出此错误“android.view.ViewGroup$LayoutParams cannot be cast to android.widget.LinearLayout$LayoutParams”

将其更改为

```
picture.setLayoutParams(new android.widget.LinearLayout.LayoutParams(50, 50)); 
```

解决问题。

# wpf - 在托管 Winforms 控件中出现异常后在 WPF 应用程序中继续执行

> ID：12533008
> 
> 赞同：5
> 
> 时间：2012-09-21T14:56:00.803
> 
> 标签：wpf, winforms, exception, windowsformshost

我有一个 WPF 应用程序，它有一个 WindowsFormsHost，其中托管了第 3 方 WinForms 控件。有时，由于第 3 方 WinForms 控件中的错误，我得到一个`NullReferenceException`.

虽然我已经设置了一个`DispatcherUnhandledException`处理程序，但我无法在那里捕获异常并继续执行。

只有在`AppDomain.CurrentDomain.UnhandledException`处理程序中我才能“捕捉”它，但从那时起我不能做太多事情，应用程序就会退出。

然后我发现[了一个 stackoverflow 问题](https://stackoverflow.com/q/8111334/1796) ~~（有一个答案；现在找不到）~~，它说要尝试这样做：

```
 System.Windows.Forms.Application.ThreadException += (sender, args) => { /* Catch it here */};
        System.Windows.Forms.Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException); 
```

这也无济于事，因为（内联）处理程序从未被调用过。

我[走错路了](http://www.youtube.com/watch?v=yon-q7NOSHs)吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T10:44:25.457

我不确定为什么在您的情况下永远不会调用该处理程序，可能是因为未在**Windows 窗体**`DispatcherUnhandledException`线程（创建窗体和控件的线程）上引发异常，但通常为,`AppDomain.UnhandledException`和/设置处理程序 或`Application.ThreadException`不允许您阻止进程终止。它们是事件处理程序，而不是异常处理程序。即使您设置了这些事件处理程序，未处理的异常仍然是未处理的异常。通常它们用于添加一些最终日志记录或向用户提供有意义的消息。一旦引发未处理的异常，您就无法阻止进程终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-02T10:35:41.437

也许抛出的异常是 CSE（损坏状态异常）。要处理这些类型的异常，请使用该函数的**[HandleProcessCorruptedStateExceptions]**属性。

# xml - XSL 动态节点参考

> ID：12533010
> 
> 赞同：1
> 
> 时间：2012-09-21T14:56:08.220
> 
> 标签：xml, xslt

我对 XSL 很陌生，我正在尝试使用模板从 XML 文件中动态引用节点。

为了提供更多信息，我使用 Cast Iron 生成初始 XML，它返回多个结果集，其中一些具有多行。示例 XML 如下：

```
<resultSets>
    <resultSet/>
    <resultSet>
      <row>
        <column1>1</column1>
        <column2>Hello</column2>
      </row>
    </resultSet>
    <resultSet>
      <row>
        <column1/>
      </row>
      <row>
        <column1/>
      </row>
    </resultSet>
</resultSets> 
```

所以我试图把它变成客户可以使用的东西。我想使用带有一些输入的模板来让我的生活更轻松。

我想设计模板，通过输入结果集的数字、行的数字和列的名称，它将引用数据。问题是，当我引用它时，不会创建结果节点。所以我的问题是：**如何将 Param 引用为 Xml 节点？**

这是我的模板：

```
<xsl:template name="getData">
    <xsl:param name="resultset" select="0" />
    <xsl:param name="position" select="0" />
    <xsl:param name="column-name" select="''" />
    <!-- Checking to see if Parameters were passed in.  This seems to work correctly -->
    <xsl:if test="($resultset &gt; 0)and($position &gt; 0)and($column-name != '')">
        <!-- Check to see if there are any rows in the resultSet.  This seems to work correctly -->
        <xsl:if test="count(//resultSets/resultSet[position() = $resultset]/row[position() = $position]) &gt; 0">
            <!-- This part fails; nothing is referenced --> 
            <xsl:value-of select="//resultSets/resultSet[position() = $resultset]/row[position() = $position][@name = $column-name]"/>
        </xsl:if>
    </xsl:if>
</xsl:template> 
```

这是我尝试引用它的方式（作为示例）：这应该从 XML 文件返回“Hello”（不是吗？）

```
<xsl:element name="SampleElement">
 <xsl:call-template name="getData">
  <xsl:with-param name="resultset" select="2" />
  <xsl:with-param name="position" select="1" /> 
  <xsl:with-param name="column-name" select="'column2'" />
 </xsl:call-template>
</xsl:element> 
```

抱歉，如果我的问题不清楚或以前被问过，我没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:06:48.080

**只需使用**：

```
<xsl:value-of select=
  "/*/resultSet[position()=$resultset]
        /row[position()=$position]
          /*[name()=$column-name]"/> 
```

**请注意**，XPath 中的索引是从 1 开始的，而不是从 0 开始的。

**完全转型**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>

  <xsl:param name="pResSetNo" select="2"/>
  <xsl:param name="pRowNo" select="1"/>
  <xsl:param name="pColName" select="'column2'"/>

    <xsl:template match="/">
      <xsl:copy-of select=
      "/*/resultSet[position()=$pResSetNo]
        /row[position()=$pRowNo]
          /*[name()=$pColName]"/>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<resultSets>
    <resultSet/>
    <resultSet>
      <row>
        <column1>1</column1>
        <column2>Hello</column2>
      </row>
    </resultSet>
    <resultSet>
      <row>
        <column1/>
      </row>
      <row>
        <column1/>
      </row>
    </resultSet>
</resultSets> 
```

**产生了想要的正确结果**：

```
Hello 
```

# linux - 从 Linux bash shell 脚本中的两个变量创建唯一列表

> ID：12533012
> 
> 赞同：0
> 
> 时间：2012-09-21T14:56:10.890
> 
> 标签：linux, bash, shell, unix

我有两个变量，它们的值可以同时存在。我想从这两个变量创建一个唯一的列表。

```
VAR1="SERVER1 SERVER2 SERVER3"
VAR2="SERVER1 SERVER5" 
```

我试图得到以下结果：

```
"SERVER1 SERVER2 SERVER3 SERVER5" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:07:21.480

以下管道通过`sort`具有唯一参数的程序将两个列表的组合`-u`：

```
UNIQUE=$(echo "$VAR1 $VAR2" | tr ' ' '\n' | sort -u) 
```

这给出了输出：

```
> echo $UNIQUE
SERVER1 SERVER2 SERVER3 SERVER5 
```

**编辑：**

正如[William Purcell](https://stackoverflow.com/users/140750/william-pursell)在下面的评论中指出的那样，这用换行符分隔字符串。如果您希望再次用空格分隔，您可以通过管道将输出从 sort 传回`tr '\n' ' '`：

```
> UNIQUE=$(echo "$VAR1 $VAR2" | tr ' ' '\n' | sort -u | tr '\n' ' ')
> echo "$UNIQUE"
SERVER1 SERVER2 SERVER3 SERVER5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:18:01.050

当然你有

```
$ var1="a b c"
$ result=$var1" d e f"
$ echo $result 
```

这样，您就可以实现串联。

还有变量：

```
$ var1="a b c"
$ var2=" d e f"
$ result=$var1$var2
$ echo $result 
```

将一个变量一个接一个地放置是我所知道的最简单的连接方式。也许对你的计划来说还不够。但它可以工作并且对于简单的任务很有用。它对任何变量都有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:53:50.510

如果您需要维护订单，则不能使用`sort`，但可以这样做：

```
for i in $VAR1 $VAR2; do echo "$VAR3" | grep -qF $i || VAR3="$VAR3${VAR3:+ }$i"; done 
```

这附加到 VAR3，因此您可能需要先清除 VAR3。此外，您可能需要更加小心地将单词边界放在 grep 上，`FOO`如果已经在列表中，则不会添加`FOOSERVER`，但这是一个很好的技术。

# python - python：搜索和浏览队列中的消息

> ID：12533013
> 
> 赞同：0
> 
> 时间：2012-09-21T14:56:11.983
> 
> 标签：python, search, queue

如何搜索或浏览存储在`queue.Queue`实例中的消息？

是否可以在不实际获取每条消息、检查其内容并将其放回的情况下这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:21:17.030

没有办法做到这一点。队列的重点是您只需执行 put 和 get 就可以了。

如果您需要搜索队列，您可以获取第一个元素，保存对它的引用，将其放回队列中，然后执行获取和放置，直到返回第一个元素（假设您只有一个线程放置事情进入队列）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:55:43.420

如果你不介意弄乱实现的细节，你可以遍历内部的 deque 对象。

```
>>> import Queue
>>> q = Queue.Queue()
>>> q.put(1)
>>> q.put(2)
>>> with q.mutex:
...     for item in q.queue:
...             print item
... 
1
2
>>> q.get()
1
>>> q.get()
2 
```

# perl - Perl: Different ways to access nested hash keys

> ID：12533017
> 
> 赞同：3
> 
> 时间：2012-09-21T14:56:41.073
> 
> 标签：perl, hash

Im almost newbie in Perl. So just wondering about the differences between two ways of accessing a value in nested hash.

Consider the following hash:

```
my %hsh = ( 
    'fruits' => { 
        'red'    => 'apple', 
        'yellow' => 'banana', 
    },
    'veg' => {
        'red'    => 'capcicum',
        'yellow' => 'lemon',
    },
);

#way 1
print $hsh{'fruits'}{'red'}; 

#way 2
print $hsh{'fruits'}->{'red'}; 
```

Both has same output `apple`. But what is the difference between these two ways?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:02:39.560

该`->`运算符用于取消引用哈希或数组引用。在您的情况下，不需要，因为 Perl 在处理多维数据结构时假定取消引用。但是在其他情况下，有必要：

```
my $ref = [ 'a','b','c' ];

print $ref[0];    #Fails
print $ref->[0];  #Succeeds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:01:02.227

没有区别。Perl 的哲学是“有不止一种方法可以做到这一点”。

这`->`只是一个明确的取消引用。当你省略它时，Perl*通常*知道你的意思。在某些情况下，您可能希望明确拥有它。

**编辑**我的帖子不清楚。在这种情况下，Perl 知道您的意思，但正如@cHao 指出的那样，有时它不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:01:59.903

`->`是解引用运算符；它与 hash *refs*一起使用，而不是 hashes。Hashrefs 用于避免创建哈希数据的副本，从而减少 CPU 和内存使用。

### 哈希

创建哈希：

```
my %hash = ('red' => 'apple'); 
```

或者

```
my %hash = %$hashref; 
```

访问使用：

```
print $hash{'red'}; 
```

### 哈希引用

创建哈希引用：

```
my $hashref = { 'red' => 'apple' }; 
```

或者

```
my $hashref = \%hash; 
```

访问使用：

```
print $hashref->{'red'}; 
```

# .net - 获取 ActiveReports 7 SectionReport 中的总页数

> ID：12533028
> 
> 赞同：0
> 
> 时间：2012-09-21T14:57:23.280
> 
> 标签：.net, activereports

我正在使用 ASP.NET 中的 ActiveReports 7。从我读过的内容来看，部分报告似乎对总页数一无所知。我正在使用所有部分报告，是否有某种可以使用的解决方法，可能是一种迭代对象属性以获取值的方法？

我希望能够显示“Y 页中的 X 页”。您可以访问部分报告中的 X，但无法获取 Y。

我支持调查它，因为他们目前什么都没有，但很好奇这里是否有人找到了解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:10:47.003

姆格恩

我假设您在谈论 ActiveReports 7。您能再解释一下吗？什么时候想知道总页数？在报告运行期间或报告完成后？

是否也可以在 ActiveReports 7 论坛上发布这些问题。[http://www.datadynamics.com/forums/88/ShowForum.aspx](http://www.datadynamics.com/forums/88/ShowForum.aspx) 谢谢

# ruby-on-rails - 在名称前使用 : 调用 Rails 方法

> ID：12533032
> 
> 赞同：0
> 
> 时间：2012-09-21T14:57:31.663
> 
> 标签：ruby-on-rails, methods

我正在阅读 Michael Hartl 的 Ruby on Rails 教程。在代码**清单 9.19**中，他定义了一个名为 signed_in_user 的私有方法，但是当他在代码顶部调用它时，他使用了以下行：

```
before_filter :signed_in_user, only: [:edit, :update] 
```

为什么他调用signed_in_user时要加冒号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:00:21.573

`signed_in_user`实际上并没有在那条线上被调用。被调用的方法是`before_filter`，它是一个 Rails 方法。`:signed_in_user`是该方法的一个参数，这就是该方法所采用的参数类型——一个符号，用于命名在运行时在另一个参数中指定的控制器操作之前调用的方法（或此控制器中的所有操作，默认情况下） ）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:04:23.027

因为[Object.send](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)将符号作为第一个参数。

因此，如果您想使用`Object.send`来调用方法，则需要一个符号。

# c# - C#代码语法中的“s”和“e”是什么

> ID：12533035
> 
> 赞同：5
> 
> 时间：2012-09-21T14:57:38.210
> 
> 标签：c#

我看到一些这样的代码：

```
textBox.TextChanged += (s, e) => this.Foo(); 
```

但我不知道什么是“s”和“e”？对于这行代码，我应该在 C# 中学习什么主题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T14:58:58.533

它们是 lambda 函数的参数。

编译器从上下文推断它们的类型，但允许编写更长（更多信息）的形式：

```
 textBox.TextChanged += (object s, EventArgs e) => { this.Foo(); }; 
```

在这种表示法中，更容易看出它们是方法参数。
另一边`=>`是方法体。

* * *

回应评论：

> 现在有没有办法用更简单的 C# 语法重写相同的 lambda 表达式？

是的，您始终可以使用经典符号。虽然这可能不是“更好”甚至“更简单”，但当你学习这个时更容易理解。

```
// The setup method
void MyMethod()
{
   //textBox.TextChanged += new Eventhandler(MyTextChangedHandler);  // C#1 and later
   textBox.TextChanged += MyTextChangedHandler;                      // C#2 and later
}

// The subscribed method. The lambda is an inline version of this. 
private void MyTextChangedHandler(object s, EventArgs e)
{ 
   this.Foo(); 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T14:58:48.567

`s`是源对象，并且`e`是应该是`EventArgs`对象或从 EventArgs 类扩展的对象，您必须阅读[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T15:00:16.117

是一个 lamda 表达式，用作委托的快捷方式。TextChanded 期望一个代表接受两个参数，`object sender, EventArgs e`. lambda 版本用占位符标记这些参数，即`s=sender, e=eventargs`. 只是一个语法糖，因为它在幕后转换为：

```
textBox.TextChanged += new EventHandler(delegate (Object s, EventArgs e) {

            }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T15:00:13.870

您要查找的主题称为[表达式 lambdas](http://msdn.microsoft.com/en-us/library/bb397687.aspx)。

`s`和`e`是匿名函数的参数名称，其主体在 . 之后指示`=>`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T15:00:59.780

S 通常是发送者（调用事件的对象），e 是事件参数。这个stackoverflow答案应该解释它：

[用于 lambda 的弱事件处理程序模型](https://stackoverflow.com/questions/1747235/weak-event-handler-model-for-use-with-lambdas)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T15:01:20.000

方法的参数。例如 ：

```
protected void TextBox_TextChanged(Object Sender, EventArgs Args) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-21T15:08:14.113

这是一个 lambda 表达式。lambda 表达式是编写方法（或准确地说是委托）的一种非常简洁的方式。你可以写一个这样的方法

```
private void TextBox_TextChanged(object sender, EventArgs e)
{
    this.Foo();
} 
```

然后像这样添加处理程序

```
textBox.TextChanged += TextBox_TextChanged; 
```

它相当于

```
textBox.TextChanged += (s, e) => this.Foo(); 
```

你也可以写

```
textBox.TextChanged += (object s, EventArgs e) => this.Foo(); 
```

但参数的类型由 C# 编译器自动推断。`s`和`e`是参数并且等价于`TextBox_TextChanged`方法的参数：`object sender, EventArgs e`. 它们可以用在后面的表达式中`=>`。

```
textBox.TextChanged += (s, e) => this.Foo(s, e); 
```

（假设 Foo 有对应的参数列表）这些参数的名称无关紧要。

* * *

**更新**：

如果所需的方法（或委托）需要返回值，您可以`return`在 lambda 表达式中删除关键字。鉴于这种方法

```
public void WriteValues(Func<double, double> f)
{
    for (int i = 0; i <= 10; i++) {
        Console.WriteLine("f({0}) = {1}", i, f(i));
    }
} 
```

你可以打这些电话

```
WriteValues(x => x * x);
WriteValues(x => Math.Sin(x));
WriteValues(t => Math.Exp(-t)); 
```

# c# - 我想在 C# 方法中传递一个参数，它将接受 SQL 查询

> ID：12533037
> 
> 赞同：0
> 
> 时间：2012-09-21T14:57:39.933
> 
> 标签：c#, sql, methods

```
public int ColumnCountinFailedQueue(long QueueNo)
{
      string query = "select count(QueueNo) 
                      from NS_FailedQueue 
                      where queueid = @QueueNo"; 
```

我没有收到 QueueNo，这是不正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T14:58:48.100

```
string query = "select count(QueueNo) "
             + "from NS_FailedQueue "
             + "where queueid = " + QueueNo.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T14:59:35.783

它应该是这样的：

```
public int ColumnCountinFailedQueue(long QueueNo) 
{
    string query = "select count(QueueNo) from NS_FailedQueue where queueid = "+QueueNo.ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:06:58.907

```
string query = "select count(QueueNo) "
             + "from NS_FailedQueue "
             + "where queueid = " + QueueNo; 
```

从我的角度来看 queueid 可以是整数......如果不是......

queueid 像 QueueNo.tostring()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:07:55.933

我讨厌用 + 连接字符串，所以这是我的解决方案

```
 string   query = string.Format(@"select count(QueueNo) from NS_FailedQueue where queueid={0}", QueueNo); 
```

但我认为最好使用[sqlparameter](http://www.dotnetperls.com/sqlparameter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T15:26:44.123

我看到您正在尝试在这里进行参数化查询。您的问题缺少一些关键要素。如果您使用的是原始 ADO.NET，则参数化查询如下所示：

```
public int ColumnCountinFailedQueue(long QueueNo)
{
    string query = "select count(QueueNo)
                    from NS_FailedQueue
                    where queueid = @QueueNo"; 

    int queueCount = 0;

    using (SqlConnection connection = new SqlConnection("connectionString"))
    using (SqlCommand getQueueCountCommand = new SqlCommand(query, connection))
    {
        getQueueCountCommand.Parameters.AddWithValue("@QueueNo", QueueNo);

        connection.Open();
        queueCount = (int)getQueueCountCommand.ExecuteScalar();
    }

    return queueCount;
} 
```

此外，由于您只得到一行一列，因此您可以使用 ExecuteScalar 来获取结果。

应该注意的是，将参数作为字符串连接到查询末尾的其他答案将起作用，并且在这种特定情况下，SQL 注入不存在漏洞，因为您的方法参数上的 long 强制它是一个数字。问题在于，如果这个参数被改为字符串，它将容易受到 SQL 注入的攻击。

# php - PHP从表单输入字段创建一个数组

> ID：12533044
> 
> 赞同：1
> 
> 时间：2012-09-21T14:58:13.507
> 
> 标签：php, html, forms, input, name-attribute

我正在尝试创建一个数组来存储数字并将它们加在一起。

```
<input type="number" name="numbers[]"/> 
```

我在下一行得到一个未定义的变量

```
foreach($numbers as $number) 
```

我确信这可能是一些基本的东西，但我对 php 比较陌生，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:04:42.133

如果您将`input`要显示的 s 从一页发布到另一页，并且需要遍历列表，则应按如下方式进行设置：

```
if (isset($_REQUEST['numbers']) && is_array($_REQUEST['numbers'])) {
  $numbers = $_REQUEST['numbers'];

  foreach ($numbers as $number) {
    print $number;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:07:31.243

如果您想获得不需要循环的数组的总和，您可以使用`array_sum`

例子

```
<?php
if (isset($_POST['numbers'])) {
    echo array_sum($_POST['numbers']);
}

?>

<form method="POST">
<input type="number" name="numbers[]"/>
<input type="number" name="numbers[]"/>
<input type="number" name="numbers[]"/>
<input type="number" name="numbers[]"/>
<input type="submit" value="add"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:04:31.043

添加更多代码，但这基本上意味着 $numbers 尚未在代码中声明。

在前面添加这一行：

```
$numbers = array(); 
```

现在它不应该给你这个错误。

所以现在的问题是，$numbers 应该设置在哪里？为此，我们需要更多信息和代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:14:17.850

我不是 PHP 专家，但如果我理解正确并且您尝试将变量放入数组中，您需要说出我假设的数组的哪一部分。我很确定这`$array[i]`和`$array`不一样，如果你试着把东西放进`$array`去，一次只能拿着一个东西。如果您只是收集某人从表单中输入的一堆数字，那么您可以做这样的事情。

```
//For the form
<form action="formHandler.php" method="post">
  <input type="text" name="number1">
  <input type="text" name="number2">
  //continue in this manner for as many numbers as you need to gather.
</form>

//for the PHP side of it.
<?php
  $x=1;
  $numbersArray = array();
  for($i=0; $i<10; $i++){
   $numbersArray[$i] = $_POST['number'.$x];
   $x++;
  }
//to add them up
$total=array_sum($numbersArray);
?> 
```

我希望这是正确的，我希望它有所帮助。

# linux - Linux 符号链接附加名称

> ID：12533045
> 
> 赞同：0
> 
> 时间：2012-09-21T14:58:14.447
> 
> 标签：linux, find, wildcard, symlink

有人可以帮助创建一个符号链接，我将自己的字符串附加到链接的名称中吗？这是我到目前为止的代码：

```
find /home/folder1/*.txt -type f -exec ln -s {} \;
find /home/folder2/*.txt -type f -exec ln -s {} \; 
```

所以该命令可以创建我的符号链接，但我想将我自己的文本附加到链接名称，因为我可以在每个文件夹和目标中拥有相同的文件名，我需要找到一种方法为符号赋予唯一名称关联。所以我正在考虑创建符号链接，如下所示：

```
folder1_doc1.txt
folder2_doc1.txt
folder1_doc2.txt
folder2_doc2.txt 
```

我认为脚本看起来像这样：

```
find /home/folder1/*.txt -type f -exec ln -s {} "folder1_" +\;
find /home/folder1/*.txt -type f -exec ln -s {} "folder2_" + \; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:20:38.490

这里有三个问题。

1.  匹配文件的名称在`{}`.

2.  中的名称`{}`是文件的完整路径（在您的情况下`/home/folder1/a.txt`）。您需要剥离所有内容，直到最后一个`/`文件名。一种解决方案是使用[字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)并从那里开始工作，为什么我们需要使用`##`最大的删除和`*/`匹配的 glob：

    ```
    $ a="home/files/folder1/s"; echo $a ${a##*/}
    home/files/folder1/s s 
    ```

3.  您不能在构造`{}`内部使用`${...}`。因此，我将`find ... -exec ...`使用 a 替换您的命令`for`并执行相同的操作：

    ```
    for file in `/home/folder1/*.txt`; do ln -s $file folder1_${file##*/}; done 
    ```

PS：还有`basename`which 可以用来代替，`${a##*/}`但还是不能`-exec`在`find`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:06:53.890

你可以使用像 awk 这样的流编辑器来快速完成这样的事情。尝试例如：

```
find /home/folder1/*.txt -type f | awk -F '.txt' '{printf "ln -s %s %s_CUSTOM_TEXT.txt\n", $0, $1}' 
```

这将打印出一堆可能与您想在终端中键入的命令相近的命令。玩弄 awk strink 让它准确地说出你想要什么，然后将结果传递给 sh：

```
find /home/folder1/*.txt -type f | awk -F '.txt' '{printf "ln -s %s %s_CUSTOM_TEXT.txt\n", $0, $1}' | sh 
```

做这种事情时要小心；确保您不要将一堆您实际上不想被执行的命令传递给 sh ！

# php - 函数中的变量无法访问

> ID：12533047
> 
> 赞同：0
> 
> 时间：2012-09-21T14:58:19.247
> 
> 标签：php, function, variables, is-empty

我正在编写一个客户数据库。我有一个功能可以向所有看起来像这样的客户展示。

```
<?php
class customer{

public function getAllCustomers(){
    global $database;
    $query = $database->query('SELECT * FROM hs_customers');
    $result = $database->statement->fetchAll();
    return $result;
}
}
?> 
```

直到这里一切正常。它的连接，即时获取数据等等。我唯一不满意的是我不希望数据库名称在函数中被硬编码，而且我希望它被一个变量替换。所以 id 做了以下事情（就像我以前做的那样，效果很好）但突然它不再替换变量了吗？...

```
<?php
class customer{

private $customerDB = 'hs_customers';

public function getAllCustomers(){
    global $database;
    $query = $database->query('SELECT * FROM :db', array(':db' => $customerDB));
    $result = $database->statement->fetchAll();
    return $result;
}
}
?> 
```

我想我有什么问题。有什么建议吗？先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:00:08.223

PHP 要求您在[`$this`](http://php.net/manual/en/language.oop5.basic.php)从方法中访问类成员时使用：

```
array(':db' => $this->customerDB) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:11:39.437

您不能在 SQL 使用的语法上使用变量容器，例如 a`table name`或与语法相关的任何其他内容`order`，例如`group`等。因此，为了动态执行此操作，您必须转义 SQL 字符串并像使用它一样使用它

```
$query = $database->query('SELECT * FROM '.($this->customerDB)); 
```

-- 更新@TimG

并且因为您处于类环境中，所以`$customerDB`应该将变量视为类属性。您必须使用`$this->`赋值来使用类的任何属性，除非在这种情况下它是静态的，否则使用`self::`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:01:42.503

如果您希望能够替换变量，则需要使用如下语句`prepare`：

```
$Var1 = 'Allo';
$Var2 = 30;

$Query = $DB->prepare('SELECT * FROM Table WHERE Field1 = :Data1 AND Field2 = :Data2');
$Query->bindValue(':Data1', $Var1, PDO::PARAM_STR);
$Query->bindParam(':Data2', $Var2, PDO::PARAM_INT);
$Query->execute(); 
```

`bindValue`将直接将值绑定到查询。

`bindParam`将变量名绑定为“静态”。如果在运行之前编辑变量`execute`，变量的内容将跟随。

此外，在您的情况下，您需要使用`$this->customerDB`，而不是`$customerDB`。您引用的变量在一个类中，用于`$this`访问类级别的内容。

# javascript - npm 不会从项目中的 package.json 安装

> ID：12533049
> 
> 赞同：17
> 
> 时间：2012-09-21T14:58:23.363
> 
> 标签：javascript, macos, node.js, npm, osx-mountain-lion

在我的 macbook air 上，我只能使用 sudo 全局安装 npm 包，但是任何时候我进入本地目录并尝试在没有 -g 的情况下安装本地包时都会出现错误。

```
 npm ERR! Error: EACCES, open '/Users/mmarze/.npm/53951495-coffee-script.lock'
npm ERR!  { [Error: EACCES, open '/Users/mmarze/.npm/53951495-coffee-script.lock']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '/Users/mmarze/.npm/53951495-coffee-script.lock' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! System Darwin 12.1.0
npm ERR! command "node" "/usr/local/bin/npm" "install" "coffee-script"
npm ERR! cwd /Users/mmarze/sandbox/node.js/test
npm ERR! node -v v0.8.9
npm ERR! npm -v 1.1.61
npm ERR! path /Users/mmarze/.npm/53951495-coffee-script.lock
npm ERR! code EACCES
npm ERR! errno 3
npm ERR! stack Error: EACCES, open '/Users/mmarze/.npm/53951495-coffee-script.lock'
npm ERR! 
npm ERR! Additional logging details can be found in:
npm ERR!     /Users/mmarze/sandbox/node.js/test/npm-debug.log
npm ERR! not ok code 0 
```

我尝试卸载并重新安装 node 和 npm，但我无法让它在本地安装任何东西，如果我使用 sudo 在本地安装，那么我的本地用户没有对它们的写入权限。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-21T17:18:35.060

根据来自 Linus G Thiel 的评论，看起来这解决了这个问题：

> 看起来你可能已经做了一个`sudo npm install ...`没有`-g`，即在你的家中以 root 用户身份安装了 npm 包。清除您的`.npm`目录或`chown -R mmarze.mmarze ~/.npm`修复它。

# jquery - 在 jQuery 中创建自动增量器

> ID：12533051
> 
> 赞同：-1
> 
> 时间：2012-09-21T14:58:37.113
> 
> 标签：jquery

我必须写这行说“今天 10 个用户贡献了 70 小时”

其中数字 10 和 70 应该保持每秒递增 1 直到达到某个阈值，然后它应该再次重置回旧值并开始递增

任何人都可以帮助我如何在 jquery 中实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:19:18.207

作为起点 - [**DEMO**](http://jsfiddle.net/mJAmX/)

```
var userStart = 10,
    hourStart = 70,
    userLimit = 15,
    hourLimit = 80;

setInterval(function() {
    var users = document.getElementById("users");
    var hours = document.getElementById("hours");

    if ( ( parseInt( users.innerHTML ) + 1 ) <= userLimit ) {
        users.innerHTML = parseInt( users.innerHTML ) + 1;
    }

    if ( ( parseInt( hours.innerHTML ) + 1 ) <= hourLimit ) {
        hours.innerHTML = parseInt( hours.innerHTML ) + 1;
    }

    if ( hours.innerHTML == hourLimit && users.innerHTML == userLimit ) {
        users.innerHTML = userStart;
        hours.innerHTML = hourStart;     
    }
}, 1000); 
```

# sql-server - 用 tsql 插入 blob 文件，但源文件只在客户端机器上而不是在服务器端？

> ID：12533054
> 
> 赞同：1
> 
> 时间：2012-09-21T14:58:40.873
> 
> 标签：sql-server, tsql

我想将一个文件作为 blob 放入我的数据库中。该文件不在 sql 服务器端，而仅在我启动 sql 脚本的客户端上。

如果我尝试像这样打开文件

```
select * from openrowset(BULK, 'E:\Installer\metadata.hwr.de.xml',SINGLE_BLOB) a, 
```

我收到错误

```
Msg 4861, Level 16, State 1, Line 1
Cannot bulk load because the file "E:\Installer\metadata.hwr.de.xml"
could not be opened.  Operating system error code 3(The system cannot find the path specified.). 
```

只有当我将文件添加到服务器时，它才会起作用。有没有可能实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:03:32.880

您可以共享您的文件夹，服务器可以访问它

```
select * from openrowset(BULK, '\\developermchine1\shared\metadata.hwr.de.xml',SINGLE_BLOB) a 
```

# asp.net-mvc - ASP.NET MVC 3 - 引导模式 - 保存更改按钮

> ID：12533055
> 
> 赞同：0
> 
> 时间：2012-09-21T14:58:44.867
> 
> 标签：asp.net-mvc

Modal 上的“保存更改”按钮正在触发 Html.BeginForm() 提交操作方法...

我只想要表单末尾的专用“保存按钮”来触发它。我希望 Save Changes 按钮调用不同的操作方法并保存用户上传的图像。

知道如何执行此操作并停止保存更改以触发与提交按钮相同的操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:05:54.677

[通过使用BeginForm](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.formextensions.beginform%28v=vs.108%29.aspx)辅助方法的适当重载，您可以明确提及在发布表单时应该执行哪个操作方法。

下面的示例将表单发布到一个名为的操作方法`Upload`

```
@using (Html.BeginForm("Upload", "Home", FormMethod.Post,
                             new { enctype = "multipart/form-data" }))
{
    <input type="file" name="file" />
    <input type="submit" value="OK" />
} 
```

确保您的（主）控制器中有 HttpPost`Upload`操作方法。

```
[HttpPost]
public ActionResult Upload(HttpPostedFileBase file)
{
    //Uploaded file is in file parmeter.
    //Save and redirect as you wish.
} 
```

# iphone - iOS6 iPhone 5 屏幕底部没有可点击的内容

> ID：12533058
> 
> 赞同：14
> 
> 时间：2012-09-21T14:58:49.050
> 
> 标签：iphone, ios, ios6, autoresizingmask

我有一个应用程序正在尝试转换并为新的 iPhone 5 屏幕尺寸做好准备。我添加了新的 Default-568h@2x 图像并将我的视图设置为在 IB 中自动调整大小。视图看起来正确，它们伸展以填满屏幕，但我放在底部的任何按钮都是不可点击的。就像底部有一条看不见的线，关于旧 iPhone 屏幕将停止的位置，而该线下方的任何内容都无法点击。如果我把按钮放在这条线上，顶部是可点击的，但底部不是。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-22T01:06:30.697

我有同样的问题...... [http://anthonyprato.com/2012/09/20/iphone-5-problem-with-touches-at-the-bottom-of-the-screen/](http://anthonyprato.com/2012/09/20/iphone-5-problem-with-touches-at-the-bottom-of-the-screen/)

您在笔尖中创建的 UIWindow 需要选中“启动时全屏”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T11:27:13.903

如果您`MainWindow.xib`的项目中没有（并且大多数较新的项目没有），那么您需要在`applicationDidFinishLaunching`应用程序委托中增加一行：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    [window setFrame:[[UIScreen mainScreen] bounds]];
    ...
} 
```

我把它放在方法的开头。像魅力一样工作。

# javascript - 获取后卓别林如何渲染模型？视图如何知道获取已完成？

> ID：12533075
> 
> 赞同：0
> 
> 时间：2012-09-21T15:00:02.100
> 
> 标签：javascript, backbone.js, chaplinjs

我正在做一个基于 Chaplin-boilerplate 的示例项目，并且工作完美，但我无法理解在获取完成后视图如何呈现，例如使用 Backbone 可以在事件更改时使用，或者使用回调fetch 方法，但是用 chaplinjs 是怎么做到的？，有没有使用 Backbone 的事件更改？，什么类的 Chaplinjs 绑定了事件？装订怎么样？

```
class CampaignController extends Chaplin.Controller

  title: 'Campaign'
    index: (params) ->
    campaign = new Campaign()
    @view = new CartView model: campaign

class CartView extends View
  template: template
  template = null
  container: '#cart'
  autoRender: true
  className: 'cart'
  initialize: ->
    super
  render: ->
    super

class Campaign extends Model

  initialize: (attributes, options) ->
    super
    @urlRoot = "http://localhost/store/js/test-data/cart.json"
    @fetch() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T19:41:57.833

您`@view = new CartView model: campaign`正在将`campaign`对象作为模型分配给视图。ChaplinJS 视图类自动执行以下操作：

```
if (target === 'model' || target === 'collection') {
  prop = this[target];
  if (prop) {
    this.listenTo(prop, eventName, callback);
  }
} 
```

这应该回答你的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T15:36:04.000

我会将您的获取逻辑放到控制器中：

```
class Campaign extends Model
    urlRoot = "http://localhost/store/js/test-data/cart.json"

Campaign = require 'models/Campaign'
class CampaignController extends Chaplin.Controller

  title: 'Campaign'
    index: (params) ->
    campaign = new Campaign()
    campaign.fetch
       success:
          @view = new CartView model: campaign
       error:
           console.error('sorry dude')

class CartView extends View
  template: template
  template = null
  container: '#cart'
  autoRender: true
  className: 'cart'
  initialize: ->
    super
  render: ->
    super 
```

# ruby-on-rails - Rails 3.2.8 中的 Twitter Bootstrap 和 jQuery.ui 冲突

> ID：12533090
> 
> 赞同：2
> 
> 时间：2012-09-21T15:00:37.153
> 
> 标签：ruby-on-rails, jquery-ui, twitter-bootstrap, gem, ruby-on-rails-3.2

我有一个处理 Bootstrap 2.0 的 rails 应用程序。它还使用[jQuery 自动完成组合框](http://jqueryui.com/demos/autocomplete/#combobox)。我的 application.js 看起来像这样：

```
//= require jquery
//= require bootstrap
//= require jquery_ujs
//= require jquery.ui.all
//= require rails.validations
//= require jquery.quicksearch
//= require jquery-tablesorter/jquery.metadata
//= require jquery-tablesorter/jquery.tablesorter
//= require jquery-tablesorter/jquery.tablesorter.widgets
//= require jquery-tablesorter/addons/jquery.tablesorter.pager
//= require_tree . 
```

问题是这种方式自动完成工作，但某些按钮在按下它们后不会获得类“活动”。当我`require bootstrap`在 query.ui.all 的声明之后放在这里

```
//= require jquery
//= require jquery.ui.all
//= require bootstrap
//= require jquery_ujs 
```

一切都以相反的方式发生：按钮有效，但组合框无效。这是我的 Gemfile（其中的一部分）：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.0.0'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.4'
  gem 'coffee-rails', '3.2.2'
  gem 'jquery-ui-rails'
  gem 'jquery-tablesorter'    
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'
gem 'client_side_validations' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:06:45.843

总是首先加载 jquery 和 jquery ui，因为几乎每个 javascript 都依赖于它们

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T07:49:28.300

通过手动添加以某种方式不适用于元素的类和跨度来修改自动完成组合框 js 代码，从而解决了这个问题。

# ruby-on-rails - before_create :method, if: [:multiple, :constraints]

> ID：12533092
> 
> 赞同：1
> 
> 时间：2012-09-21T15:00:39.953
> 
> 标签：ruby-on-rails, ruby

在 before_create、before_update、before_destroy 方法上，我想做一个 if: 在多个约束上，例如

```
before_destroy :lock_quantity, if: [:processed, :quantity_changed] 
```

所以如果它被处理了，数量就不会改变

（以防万一：）

```
def lock_quantity
  errors.add :quantity, "You must revert the row before changing quantity"
end 
```

那么，是否可以有多个条件 if: ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:05:37.910

所以，其实应该是这样的……

```
before_update :lock_quantity, if: [:processed, :quantity_changed?] 
```

注意问号！

（以防万一：）

```
def lock_quantity
  errors.add :quantity, "You must revert the row before changing quantity"
  false
end 
```

通过 false 停止保存

# syntax-highlighting - 在 SublimeText2 中组合语法定义

> ID：12533094
> 
> 赞同：15
> 
> 时间：2012-09-21T15:00:40.987
> 
> 标签：syntax-highlighting, sublimetext2

我想为查找结果编写 Sublime Text 2 的语法定义文件，该文件尊重它找到搜索词的每个位置的文件扩展名。该文档提到[“可以组合来自不同文件的语法定义”](http://docs.sublimetext.info/en/latest/extensibility/syntaxdefs.html#how-syntax-definitions-work)，但没有提及如何组合。

有没有人有任何例子说明它是如何工作的？这个问题的答案：[Sublime Text 2：在文件本身内设置文件语法（作为 Vim 模式行）](https://stackoverflow.com/q/12140270/456188)也可以。

**编辑**

好的，所以请朋友给个小费：http: [//manual.macromates.com/en/language_grammars](http://manual.macromates.com/en/language_grammars)

它使用带有名称的“包含”标签来引用另一种语言。这对我有用，但不幸的是，每次打开 Sublime Text 时我都需要编写一个插件来重新编译文件，并用各种语言扩展名重新编写它……你们有更好的主意吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-19T02:16:13.723

最近，我痴迷地欺骗了我的 ST2 CSS 语法高亮。我对这些 *.tmLanguage 文件的理解是基于反复试验——主要是错误。我提到这一点是为了说明我的把握充其量是*参差不齐的。*

我认为您要修改的文件是`~/Library/Application Support/Sublime Text 2/Packages/Default/Find Results.hidden-tmLanguage`

长话短说，我认为你想像这样设置它（它有自由评论）：

[https://gist.github.com/4333623#file-find-results-hidden-tmlanguage](https://gist.github.com/4333623#file-find-results-hidden-tmlanguage)

典型的在文件中查找结果将如下所示：

```
Searching 11 files for "feedback-assistance-form" (regex)

/_projects/___/group_reg.js:
   60       });
   61  
   62:      $asstForm = $help.find('#feedback-assistance-form');
   63  
   64       if (!$asstForm.length) {
   65:          console.log('WARN: Feedback assistance: #feedback-assistance-form not found');
   66           return;
   67       }

/_projects/___/group_register_help_tmpl.html:
    6  <div id="group-reg-help">
    7  
    8:  <form id="feedback-assistance-form" class="js-popover help-content hide" action="{% url info.views.assistance_request %}" method="post">
    9       
   10       <legend>Need Assistance?</legend>

3 matches across 2 files 
```

将`Find Results.hidden-tmLanguage`结果解析为 3 个相关部分：

*   文件名所在的行
*   没有匹配的摘录行
*   带有匹配的摘录行

这方面的规则在以下`<patterns>`部分：

```
<key>patterns</key>
<array>
    <dict>
        <key>match</key>
        <string>^([^ ].*):$</string>
        <key>captures</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>entity.name.filename.find-in-files</string>
            </dict>
        </dict>
    </dict>
    <dict>
        <key>match</key>
        <string>^ +([0-9]+) </string>
        <key>captures</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>constant.numeric.line-number.find-in-files</string>
            </dict>
        </dict>
    </dict>
    <dict>
        <key>match</key>
        <string>^ +([0-9]+):</string>
        <key>captures</key>
        <dict>
            <key>1</key> <!-- capture group 1 -->
            <dict>
                <key>name</key>  <!-- name it so it can be colored -->
                <string>constant.numeric.line-number.match.find-in-files</string>
            </dict>
        </dict>
    </dict>
</array> 
```

这些只是逐行浏览文件并寻找匹配项。如果找到匹配项，则将一个或多个`<key>name</key>`定义应用于匹配项的捕获组（如果有）。这些`name`定义在主题定义文件（例如 Monokai）中被引用，并且颜色被应用到与命名捕获组匹配的字符。

上面的模式只是与捕获组匹配。我认为这个限制是无法进一步处理匹配（或捕获组）。

要点中应用的是格式的模式：

```
<key>patterns</key>
<array>
    <dict>
        <key>begin</key>

<!-- add the filetype extensions, here -->
<!-- these are XML formatted files: -->

        <string>^([^ ].*\.(?:xml|tmLanguage|hidden-tmLanguage|tmTheme):)$</string>
        <key>beginCaptures</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>entity.name.filename.find-in-files</string>
            </dict>
        </dict>
        <key>end</key>
        <string>^[^ ]</string>
        <key>patterns</key>
        <array>
            <dict>
                <key>include</key>
                <string>#line-numbers</string>
            </dict>
            <dict>
                <key>include</key>

<!-- which syntax should match up to the filetype extensions listed above: -->
<!-- to find out what the "scopeName" is, refer to the corresponding *.tmLanguage file -->
<!-- for XML, this is ~/Library/Application Support/Sublime Text 2/Packages/XML/XSL.tmLanguage -->

                <string>text.xml</string>
            </dict>
        </array>
    </dict>
    <!-- ... can have many more -->
</array> 
```

这种模式的主要特点是它有 a`<begin>`和 an `<end>`，然后它有自己的`<pattern>`部分。当`<begin>`匹配正则表达式时，将应用 的内容，`<patterns>`直到遇到不匹配的令牌（这是我真正参差不齐的地方），此时将`<end>`对其进行测试。我认为。

无论如何，gist 定义了几个这样的 begin-end-patterns 块，一个用于 XML、HTML、JavaScript 和 CSS 文件类型和语法。正`<being>`则表达式匹配具有文件名和特定文件扩展名的行。这用于为给定语法创建“上下文”的开头。`<patterns>`当后续块中的元素停止匹配并且`<end>`正则表达式匹配时，上下文结束。我认为您基本上只想针对要在查找结果中突出显示的任何语法来充实这一点...

这是我使用该要点获得的语法突出显示的查找结果的屏幕截图：

![女装](../Images/5ef0a9b30d84658c7f232599ff6ec69e.png)

我应该注意，我遇到的一个大问题是当块注释以摘录开始但摘录不包括结束块注释的字符时。块注释将继续，直到在查找结果的其他地方遇到终止标记。这也延伸到随后的搜索中。

更新：

我的意思是补充一点，您不需要在启动时重新编译任何东西。*虽然*，值得一提的是，您必须重新启动 sublime 才能使更改`Find Results.hidden-tmLanguage`生效。如果您将此作为某种插件，似乎更改将主要包括添加新语言，这可能只是不频繁的插件更新。

# objective-c - 缩放后的平滑线

> ID：12533100
> 
> 赞同：1
> 
> 时间：2012-09-21T15:00:53.653
> 
> 标签：objective-c, ios, uikit, quartz-core

我正在尝试实现绘图功能。目前我正在使用 UIBezierPath：

```
@interface DrawView : UIView {
    UIBezierPath *myPath;
}
@end

@implemenation DrawView

-(id)initWithFrame:(CGRect)frame {
    //...normal init code
    myPath = [[UIBezierPath alloc]init];
    myPath.lineCapStyle = kCGLineCapRound;
    myPath.lineJoinStyle = kCGLineJoinRound;
    myPath.miterLimit = 0;
    myPath.lineWidth = 10;
} 
```

在`touchesBegan:`我跟踪 startPoint 并调用`[myPath moveToPoint:myTouch locationInView:self];` In`touchesMoved:`我调用`[myPath addLineToPoint...]; [self setNeedsDisplay]`.

我的 DrawView 是 UIScrollView 的子视图。

**我的问题**：当我放大绘图时，它非常角落或像素化。

我想以某种方式重新绘制绘图，使其看起来既漂亮又流畅，但我不知道如何或从哪里开始。

我找到了这个简单的“解决方案”：

```
-(void)scrollViewDidEndZooming:(UIScrollView*)scrollView withView:(UIView*)view atScale:(float)scale {
    view.layer.contentsScale = scale;
    [view setNeedsDisplay];
} 
```

当我以这种方式实现该方法时，缩放后绘图会更平滑，但应用程序变得非常缓慢和缓慢。在`maximumZoomScale`滚动视图的顶部，应用程序完全崩溃。当我理解文档正确设置 contentsScale 高于 2 不是一个好主意或以任何方式更改 contensScale 不是那么好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:03:36.143

观看 WWDC 2012 视频[优化 2D 图形和动画性能](https://developer.apple.com/videos/wwdc/2012/?id=506)，了解一些好的技术。我建议尽可能减少或消除透明层并连接您的各个线段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:28:36.710

我找到了解决我的问题的方法（我仍然面临其他绘图问题......）： 缩放完成后，我调用一个如下所示的方法：

```
 -(void)redrawWithScale:(float)scale {
        _myPath.lineWidth = _myPath.lineWidth * scale //currently _myPath is a UIBezierPath, with CGPath it should be equal
        [_myPath applyTransform:CGAffineTransformMakeScale(scale, scale)];

        [self setNeedsDisplay];

        //or with a CAShapeLayer:
        _shapeLayer.path = _myPath.CGPath;
   } 
```

编辑：

在我当前的实现中，我使用的是`CAShapeLayer`（作为我的 UIView 的子层）。UIBezierPath 设置为`path`shapeLayer 的属性。`setNeedsDisplay`此解决方案不需要调用。

# git - 版本控制与项目的依赖关系

> ID：12533106
> 
> 赞同：2
> 
> 时间：2012-09-21T15:01:08.923
> 
> 标签：git, dojo, playframework-2.0

我正在使用 Play Framework 2.0 和 Dojo 1.8 开始一个项目，并且我将使用 Git 进行版本控制。我想知道将 Dojo 文件与我的项目一起进行版本控制是否是一个好习惯，因为它是一个巨大的库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T17:33:08.640

GitHub上有Dojo的官方只读镜像：https **:** [//github.com/dojo](https://github.com/dojo)。将*dojo*、*dijit*、*dojox*和*util*作为子模块添加到您的项目存储库中：

```
# create project directory
mkdir MyProject
cd MyProject

# init git repository
git init

# add git submodule
mkdir src
git submodule add https://github.com/dojo/dojo.git src/dojo

# switch to the particular dojo version
# use `git tag` inside the submodule directory to list available versions 
cd src/dojo
git checkout 1.8.0

# repeat previous two steps for dijit, dojox, util (if necessary):
# https://github.com/dojo/dijit.git
# https://github.com/dojo/dojox.git
# https://github.com/dojo/util.git

# commit changes
cd ../..
git add .
git commit -m "added dojo submodule and moved it to the version 1.8.0"

# push if applicable 
```

这是我前段时间遇到相同问题时受到启发的两个 stackoverflow 答案：

*   [为远程仓库设置一个外部 git](https://stackoverflow.com/questions/2140985/setup-a-git-external-for-remote-repo)
*   [Git 子模块：指定分支/标签](https://stackoverflow.com/questions/1777854/git-submodules-specify-a-branch-tag)

连同前面提到的，我使用[了一个成功的 Git 分支模型](http://nvie.com/posts/a-successful-git-branching-model/)，这很棒，但设置起来有点棘手。如果您有兴趣，我可以像上面那样添加分步说明。

# c++ - Qt 样式表按钮背景颜色

> ID：12533107
> 
> 赞同：2
> 
> 时间：2012-09-21T15:01:10.337
> 
> 标签：c++, qt, qtstylesheets

我正在使用样式表来设置 QPushbutton 的背景颜色：

```
QPushButton {
     background-color: red;
     border-style: outset;
     border-width: 2px;
     border-color: beige;
} 
```

这是可行的，但是当我也更改 QWidget 的背景颜色时，按钮具有与 QWidget 相同的背景颜色（在此示例中，按钮是黑色而不是红色）。

```
QWidget {
    background-color: black;
} 
```

有谁知道在设置 QWidget 的背景颜色时如何使按钮着色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T07:31:22.643

我不完全知道为什么会发生这种情况，但是将按钮的样式表与小部件样式表一起放置会带来您想要的效果。例如，在您的情况下，**小部件的样式表**如下

```
QWidget 
{
    background-color: black;
}

QPushButton
{
    background-color: red;
    border-style: outset;
    border-width: 2px;
    border-color: beige;
} 
```

希望这可以帮助！！祝你好运！:D

# android - Android 4 (Nexus) 无法连接到 Jetty https

> ID：12533111
> 
> 赞同：1
> 
> 时间：2012-09-21T15:01:21.717
> 
> 标签：android, https, jetty, certificate

我们在[https://loyalpunch.com](https://loyalpunch.com)上运行 Jetty 7.6.1，并使用 AlphaSSL 颁发的证书。该网站在 Firefox 和 Chromium 中运行良好，但无法在我的 Nexus 上加载。我已经检查过

```
openssl s_client -connect loyalpunch.com:443 -showcerts 
```

已安装中间证书并支持 TLSv1。而且我没有输入任何错误或网络问题。将 https 替换为 http 使其立即生效。我也尝试过使用 Wifi 和 3G。任何想法为什么股票Android浏览器告诉我'与服务器的连接超时'？

# r - 以编程方式设置环境变量

> ID：12533113
> 
> 赞同：17
> 
> 时间：2012-09-21T15:01:38.177
> 
> 标签：r, environment-variables

在 R 中，我可以“手动”设置环境变量，例如：

```
Sys.setenv(TODAY = "Friday") 
```

但是如果环境变量名称和值存储在 R 对象中呢？

```
var.name  <- "TODAY"
var.value <- "Friday" 
```

我写了这个：

```
expr <- paste("Sys.setenv(", var.name, " = '", var.value, "')", sep = "")
expr
# [1] "Sys.setenv(TODAY = 'Friday')"
eval(parse(text = expr)) 
```

确实有效：

```
Sys.getenv("TODAY")
# 1] "Friday" 
```

但我觉得它很丑。有没有更好的办法？谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T15:03:50.683

您可以使用`do.call`该命名参数调用函数：

```
args = list(var.value)
names(args) = var.name
do.call(Sys.setenv, args) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T15:22:14.413

试试这个：

```
.Internal(Sys.setenv(var.name, var.value)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-31T18:55:27.053

这是已接受答案的变体，但如果您想将其打包成一行，和/或避免生成中间`args`对象，您可以使用`setNames`获取命名字符向量，然后强制列出`as.list`：

```
do.call(Sys.setenv, as.list(setNames(var.value, var.name))) 
```

# javascript - 如何在 div 上获取背景的来源

> ID：12533118
> 
> 赞同：2
> 
> 时间：2012-09-21T15:01:53.620
> 
> 标签：javascript, jquery, html, jquery-cycle

> **可能重复：**
> [从 background-image 属性获取 URL](https://stackoverflow.com/questions/6397529/get-url-from-background-image-property)

我正在使用[Cycle 插件](http://jquery.malsup.com/cycle/)，我想创建一个寻呼机/缩略图。

**HTML**

```
<div id="slide">
  <div class="panel" id="product">

  </div>
</div> 
```

我的图像在 div 的背景上。不在 div 本身内部

**JS 调用**

`pager:'#thumbs', pagerAnchorBuilder: function(idx, slide) { return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>'; },`

`return '<li><a href="#"><img src="' + slide.src + '" width="50" height="50" /></a></li>';`

我正在尝试获取背景图像`product`。因此，与其返回`+ slide.src +`我会用什么代替它？

上面抓取了图像的来源。如何获取 div 上的背景源而不是图像源？

我的图像在 div 上而不是在`<img>`标签内。

**谢谢。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:05:44.380

不是 100% 确定你想要哪个 div 的背景图像，以及你想在哪里使用它，但是......

`$('#product').css('background-image')`将为您提供产品 div 的背景图片的 URL。

因此，从这一点开始，在您的代码中，我*认为*您需要将其更改为：

```
pager:'#thumbs', pagerAnchorBuilder: function(idx, slide) { return '<li><a href="#"><img src="' + $("#product").css("background-image") + '" width="50" height="50" /></a></li>'; }, 
```

**最终答案，感谢rsp：**

```
pager:'#thumbs', pagerAnchorBuilder: function(idx, slide) { return '<li><a href="#"><img src="' + $("#product").css("background-image").replace('url(', '').replace(')', '') + '" width="50" height="50" /></a></li>'; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:09:57.810

您可以通过以下方式获取 div 的背景：

```
var url = $('#yourid').css('background-image')
                      .replace('url(', '')
                      .replace(')', ''); 
```

您需要删除 'url(' 和 ')' 因为 CSS 属性如下所示：

```
url(http://www.example.com/image.jpg) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:08:57.410

没有 jquery，这将是

```
 document.getElementById("slide").style.backgroundImage="url('xxx.png')"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T15:24:24.777

```
var url = $("#product").css('background-image');

url = url.replace(/^url\(["']?/, '').replace(/["']?\)$/, '');

alert(url); 
```

这可能会有所帮助

# python - 用python在sqlite中填充新列的性能

> ID：12533119
> 
> 赞同：0
> 
> 时间：2012-09-21T15:01:57.280
> 
> 标签：python, sqlite

我正在更新一个 sqlite 数据库，使其具有一个`bin`填充数字 0 到 100 的新列。我编写了一个简单的脚本来说明我遇到的一些性能问题：

```
import sqlite3

conn = sqlite3.connect('partition_dev.db')
db_parts = conn.cursor()

i = 0
for row in db_parts.execute('''SELECT * from parts''').fetchall():
    db_parts.execute('''UPDATE parts set bin=? where entry=?''',(i,str(row[0])))
    conn.commit()
    i = i+1
    print i
    if i>100:
        i=0 
```

对于一个 65K 行的数据库，这会运行很长时间。我是使用 sql 的新手，所以我认为我正在做一些明显次优的事情，但我不确定是什么。如何提高此更新的性能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:03:05.100

您正在提交*每一行*。不要那样做，在所有行都更新后提交。

对于`i`计数器，您可以使用无限生成器；该`count_to`函数将为您生成从 0 到 100 的数字，从 0 开始无穷无尽：

```
def count_to(n):
    while True:
        for i in range(n):
            yield i

to100 = count_to(101)
for row in db_parts.execute('''SELECT * from parts''').fetchall():
    i = to100.next()
    db_parts.execute('''UPDATE parts set bin=? where entry=?''',
        (i, str(row[0]))
    )
    print i
conn.commit() 
```

# android - 崩溃恢复安卓应用

> ID：12533121
> 
> 赞同：0
> 
> 时间：2012-09-21T15:02:01.147
> 
> 标签：android, android-service

我正在开发一个应用程序，我想添加一个崩溃恢复功能，重新启动我的应用程序。我没有写任何与此相关的代码。我的想法是启动一个监控状态的服务。基于这种方法，问题是因为服务是从我的应用程序启动的，如果应用程序死了，它就会死。是否可以从我的应用程序启动服务并独立运行以监控我的应用程序并重新启动它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:06:38.637

有几种方法可以解决您描述的问题。也许最简单的方法是`Application`为您的项目提供一个自定义类，并在其 onCreate() 方法中调用`Thread.setDefaultUncaughtExceptionHandler(this);`以将您的类指定为默认异常处理程序。这将要求您覆盖`public void uncaughtException(Thread t, Throwable e)`在崩溃时将调用的哪个，并且您可以安排重新启动。

如果你真的想要在你的进程监控之外的东西，一种方法是在你的应用程序中定义一个服务，它被定义为有自己的进程；这是通过 AndroidManifest 属性完成的。

另一种选择是使用 Android AlarmManager，因为它由系统处理并可以重新启动您的应用程序。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-21T15:06:19.953

您可以在手机启动时通过使用 action 注册意图过滤器来启动您的服务`android.intent.action.BOOT_COMPLETED`。可以在[此处](http://www.androidcompetencycenter.com/2009/06/start-service-at-boot/)或在类似[问题中找到更多信息](https://stackoverflow.com/questions/10853879/start-an-activity-on-phone-boot-in-android)

# java - 如何在 Spring 会话中存储每个用户的数据？

> ID：12533122
> 
> 赞同：3
> 
> 时间：2012-09-21T15:02:00.707
> 
> 标签：java, spring, spring-mvc

我想为每个登录的用户存储他在 Spring 会话中的 id。我所做的是：

```
HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder
.getRequestAttributes()).getRequest();
    HttpSession session = request.getSession(true);

    session.getServletContext().setAttribute("userId", userId); 
```

当我需要身份证时，我正在做

```
 HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder
                .getRequestAttributes()).getRequest();  
 HttpSession session = request.getSession();
 Long userId = (Long) session.getServletContext().getAttribute("userId"); 
```

第一个用户登录，获取会话ID就可以了。

第二个用户登录，会话ID被覆盖（我看到因为第一个用户的每个下一步操作，都会获取第二个用户的用户ID）

实现这一目标的正确方法是什么，显然我没有正确理解会话？

感谢所有的建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:04:42.997

您将属性存储在 中，该属性在*同一 webapp*`ServletContext`的所有会话中共享。

 *您应该将属性存储在`HttpSession`自身中：

`session.setAttribute("userId", userId);`

然后检索它：

`Long userId = (Long) session.getAttribute("userId");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:04:50.180

你没有在`HttpSession`这里使用，你使用的是`ServletContext`，顾名思义，它是一个单例。

```
session.setAttribute("userId", userId);

Long userId = (Long) session.getAttribute("userId"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T21:07:57.853

我更喜欢在 HttpSession 中保存 sessionBean 对象...您可以使用要保留在会话中的数据创建 bean

session.setAttribute("sessionData",sessionBean);*

# html - 仅在 Firefox 中，页脚不会留在我网站的底部

> ID：12533124
> 
> 赞同：0
> 
> 时间：2012-09-21T15:02:07.327
> 
> 标签：html, firefox, cross-browser, footer

我有一个带页脚的网站，在 Chrome 和 Safari 中显示良好。

然而，当在 Mozilla Firefox 中查看时，页脚不在页面底部，而是在整个页面上，从页眉下方开始。

这与在 Firefox 中使用 and 标签有关吗？或者是其他东西。

```
<!doctype html>
<html>
    <head>
        Stuff.....
    </head>

    <body>
        <header>
            Stuff....
        </header>

        <div id="main_container">
            <div id="content_container">
                Text (h1, h2 and p tags)
        </div>

        <div id="networking_container">
            <div id="twitter">
                Twitter Feed...
            </div>

            <div class="fb-like" id="facebook" data-href="http://www.facebook.com/EtempaSolutions" data-send="true" data-layout="button_count" data-width="225" data-show-faces="false">
            </div>

            <g:plusone size="medium" annotation="inline" width="215"></g:plusone>
        </div>

        <footer>
            <table id="favourite_links_table" cellpadding="4">
                Stuff...
            </table>

            <div id="credits">
                <p id='main_credit'>This website has been designed and hosted by <a href='http://www.etempa.co.uk'>Etempa Solutions</a></p>

                <p id='sub_credit'>Web Design, Including Coding and Images © Copyright to Pippa Rose Smith 2012\. All Rights Reserved</p>
            </div>
        </footer>
    </body>
</html> 
```

CSS位是：

```
html 
{ 
    padding: 30px 10px; 

    line-height: 1.4; 

    background-color: #CCC;

    -webkit-text-size-adjust: 100%; 

    -ms-text-size-adjust: 100%; 
}

html, input 
{   
    font-family: Candara, Verdana, Geneva, sans-serif; 
}

body 
{ 
    width: 860px; 

    padding: 20px 30px 20px;

    border: 1px solid #b3b3b3; 

    border-radius: 4px; 

    margin: 0 auto; 

    box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff; 

    background: #fcfcfc; 
}

footer
{
    margin-top: 30px;
}

#main_container
{
    clear: both;

    padding-top: 15px;
}

#favourite_links_table
{
    text-align: center;

    width: 850px;
} 

#credits
{
    margin-top: 30px;
}

#main_credit
{
    color: #9933FF;

    font-size: 13px;

    text-align: center;
}

#sub_credit
{
    color: #9933FF;

    font-size: 12px;

    text-align: center;
}

#content_container
{
    float: left;

    width: 70%;
}

#networking_container
{
    float: right;

    width: 25%;
}

#twitter
{
    padding-top: 30px;

    padding-bottom: 20px;
}

#facebook
{
    padding-bottom: 20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:26:14.537

我找到了答案

我已经清楚地添加了：都到我的页脚，所以现在的 css

```
footer
{
    margin-top: 30px;

    clear: both;
} 
```

# asp.net-mvc - Zend 框架 mvc 中的 Asp.net mvc @Section equivlanet

> ID：12533126
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:02:14.477
> 
> 标签：asp.net-mvc, zend-framework, razor

我知道在 asp.net mvc 中，您可以使用 @Section {} 之类的东西在视图中定义部分，并且在您的布局中您可以使用它们来定位/显示您想要的信息。在zend framework mvc中有什么等价的吗？一个例子会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:50:06.587

视图[部分](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.partial)或[占位符](http://framework.zend.com/manual/1.12/en/learning.view.placeholders.basics.html)大致相当于您从 ASP.NET 引用的部分。

占位符文档甚至显示了渲染自定义侧边栏内容的示例。

要使用视图助手，只需在您的`views/scripts`目录中创建一个视图脚本并使用`.phtml`扩展名命名它，然后将您想要的内容放入其中。

```
//application/views/scripts/sidebar.phtml
<div id="sidebar">
    Welcome <?php echo $this->username ?>
</div> 
```

在您想要显示部分视图内容的布局或视图中，您可以调用：

```
<?php echo $this->partial('sidebar.phtml', array('username' => 'drew010')) ?> 
```

上面的调用导致使用`username`传入的变量渲染 sidebar.phtml。视图部分具有独立的变量范围，因此您可以将变量作为数组传递并在部分中使用它们。

使用占位符是类似的，但占位符的内容可以通过多种方式设置。访问占位符内容也略有不同。

假设在您的布局中，您有：

```
<?php /* output sidebar from placeholder value "sidebar" */ ?>
<?php echo $this->placeholder('sidebar'); ?> 
```

可以通过呈现捕获输出的视图脚本或直接分配给占位符本身来设置占位符内容。

将内容分配给占位符的最基本示例是：

```
<?php
// from controller:
$this->view->placeholder('sidebar')->set('<div id="sidebar">content</div>'); 
```

占位符手册更详细地介绍了如何分配、附加、前置和管理占位符中的内容。

两者都应该适合您从 ASP.NET 替换部分的目的。

# command-line-arguments - 如何运行 psinfo.exe 并将输出通过管道传输到文件？

> ID：12533128
> 
> 赞同：1
> 
> 时间：2012-09-21T15:02:15.577
> 
> 标签：command-line-arguments

我想运行免费的 Microsoft 可执行文件`psinfo.exe`并将输出通过管道传输到嵌入在 python 程序中的文件。我已经能够从 python 程序运行 psinfo.exe 文件，但是将 psinfo 的输出通过管道传输到文件中不起作用。

如果我从 Windows 命令行运行简单的批处理文件：

`psinfo.exe > filename.txt`

然后 psinfo 的输出将通过管道传输到文件 filename.txt 中。psinfo 实用程序列出计算机信息，例如可用磁盘空间百分比和其他信息。如果我尝试使用单行批处理文件将 psinfo 数据通过管道传输到文件中，并在 Windows 中运行批处理文件，那么它可以工作，将数据传输到文件中。但是，如果我从 python 运行批处理文件，那么数据将不会通过管道传输到文件中。

如何直接运行批处理文件或 psinfo.exe 并将 psinfo 数据管道传输到在 python 程序中运行批处理文件或 psinfo.exe 的文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-01T14:39:33.893

```
user = 'username'
passw = 'password'
logfile = '\path\to\logfile.txt'
host_info = subprocess.run(['psinfo', '\\\\' + hostname, '-u', user, '-p', pwd, '-d', '-nobanner'], stdout=logfile, stderr=subprocess.STDOUT) 
```

我一直使用上面的例子。这利用了 subprocess 库，考虑到您正在尝试运行特定于平台的可执行文件，它在此用例中具有更多优点。

# javascript - 如何停止函数覆盖javascript对象属性并添加新属性？

> ID：12533130
> 
> 赞同：0
> 
> 时间：2012-09-21T15:02:28.193
> 
> 标签：javascript

如何在不覆盖最后一个属性的情况下为每个元素添加新属性？在此示例中，H2 backgroundColor 将覆盖 H2 颜色：

```
var cssObject = {}

function updateAllCSS(element, property, value) {

        cssObject[element] = [property] 
        cssObject[element][property] = value            

}

updateAllCSS('h2', 'color', '#000')
updateAllCSS('h2', 'backgroundColor', '#FFF')

console.log(cssObject.h2.color) 
```

任何帮助都会很棒:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:04:56.470

`cssObject[element]`如果没有，请创建一个新的。

```
function updateAllCSS(element, property, value) {
   if (!cssObject[element]) cssObject[element] = {};
   cssObject[element][property] = value            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:10:22.867

使用 jQuery。它使它非常简单，并且在操作活动中非常强大。在 jquery 中可以这样做。

使用 script 标签在代码中包含 jquery 插件库

现在您可以像这样编辑 html 元素的属性：

$("#IdOfTheElement").attr("NewProperty","NewValue");

就这么简单。

# d3.js - D3 LineGraph Circles 删除重叠 && 排序日期

> ID：12533132
> 
> 赞同：0
> 
> 时间：2012-09-21T15:02:37.863
> 
> 标签：d3.js, geometry, margin, overlap, linegraph

[http://www.fabieno.com/conanbatt/index.html](http://www.fabieno.com/conanbatt/index.html)

圆圈是重叠的，因为它们有工具提示。这有点痛苦。如何修改它以停止重叠？

另外，如何将日期格式化为我希望看到的方式？例如垂直和 YYYY/dd/mm

[https://github.com/FabienO/OpenKaya-1/tree/master/widgets/rank_graph](https://github.com/FabienO/OpenKaya-1/tree/master/widgets/rank_graph)

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:22:55.877

关于重叠的圆圈——假设你希望他们在 X 轴上的位置准确地表示他们的比赛发生的时间——我认为你有两个选择。

在 chart.js 中：

1）使图形更宽：

```
// line 101
var w = $(that.html).parent().width() || 500; //Sometimes this is 0, dont know why. 
```

2）使每个圆的半径变小。

```
// line 120
var pointRadius = 2; 
```

作为奖励，我建议为每个圆圈添加填充颜色：

```
// line 244, replace circles.enter() with the following
circles
    .enter()
        .append('svg:circle')
            .attr('class', 'data-point')
            .style('opacity', 1e-6)
            .attr('cx', function(d) { return x(d.date) })
            .attr('cy', function() { return y(0) })
            .attr('r', function() { return (data.length <= maxDataPointsForDots) ? pointRadius : 0 })
            // On hover, fill the circle
            .on('mouseover', function(d, i) {
              circles.filter(function(p) {
                return d === p;
              })
              .style('fill', 'steelblue');
            })
            // Clear the fill
            .on('mouseout', function(d, i) {
              circles.filter(function(p) {
                return d === p;
              })
              .style('fill', 'white');
            })
        .transition()
        .duration(transitionDuration)
            .style('opacity', 1)
            .attr('cx', function(d) { return x(d.date) })
            .attr('cy', function(d) { return y(d.value) }); 
```

关于 X 轴标签的日期格式：

```
// line ~124
var xAxis = d3.svg.axis().scale(x).tickSize(h - margin * 2).tickPadding(10).ticks(7).tickFormat(d3.time.format('%Y/%d/%m')); 
```

要旋转它们：

```
// line ~151
// x ticks and labels
if (!xAxisGroup) {
    xAxisGroup = svg.append('svg:g')
        .attr('class', 'xTick')
        .call(xAxis);
    xAxisGroup.selectAll('text')
        .attr('transform', 'translate(-210, 140) rotate(-45)');
}
else {
    t.select('.xTick').call(xAxis);
} 
```

我分叉了你的 repo 并打开了一个 pull ，这样你就可以一次看到所有的变化：[https ://github.com/FabienO/OpenKaya-1/pull/1](https://github.com/FabienO/OpenKaya-1/pull/1)

# backbone.js - 骨干关系 - 不能实例化多个 ,,,

> ID：12533140
> 
> 赞同：7
> 
> 时间：2012-09-21T15:02:59.050
> 
> 标签：backbone.js, backbone-relational

我一直在使用骨干关系（[https://github.com/PaulUithol/Backbone-relational](https://github.com/PaulUithol/Backbone-relational)）来构建我的应用程序，因为我有一个模型（房间），并附加了许多其他模型：

*   房间有很多评论
*   房间属于位置

正如您在[这个问题](https://github.com/PaulUithol/Backbone-relational/issues/186)中看到的那样，我不断收到错误消息

`Error: Cannot instantiate more than one Backbone.RelationalModel with the same id per type`

每当我更改视图或重新加载集合时。

现在我知道这里有一个他们建议使用的线程[，](https://stackoverflow.com/questions/12224122/backbone-relational-cannot-instantiate-two-relationalmodel-objects)但`findOrCreate`我不是单独访问模型，而是使用`Collection.fetch`. 有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T06:49:50.080

使用主干关系，您可以从关系存储中获取或创建对象。使用它来创建关系对象：

```
this.model = someModel.findOrCreate({id: 123}) 
```

这样，它将创建新对象或从关系存储中获取现有对象。

[http://backbonerelational.org/#RelationalModel-findOrCreate](http://backbonerelational.org/#RelationalModel-findOrCreate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T22:42:58.457

我有一个类似的问题，通过切换到 Backbone-associations 来解决它。

[https://github.com/dhruvaray/backbone-associations](https://github.com/dhruvaray/backbone-associations)

界面几乎完全相同，只有一些细微差别，因此移植应该非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:22:28.323

我有类似的问题，碰巧我需要用函数初始化模型：

```
model: ->

   return new Project.Models.ModelName() 
```

当你需要_tree 时。在 application.js 中，模型文件的加载时间晚于集合文件（按字母顺序）。使用功能设置模型等到应用程序执行。

# cakephp - 如何验证下拉选择

> ID：12533145
> 
> 赞同：0
> 
> 时间：2012-09-21T15:03:07.517
> 
> 标签：cakephp, select, validation

我有一个包含多个输入和下拉选择的表单：

```
echo $this->Form->input("field",array(
  "name" => "data[Post][project_id]",
  "options" => $proTab,
  "empty" => "Sélectionnez un projet",
  "div" => "control-group",
  "label" => array(
    "class" => "control-label",
    "text" => "Projet : "
  ),
  "between" => "<div class='controls'>",
  "after" => "</div>"
)); 
```

从一个用户到另一个用户有不同的选择。

我试图像这样验证它：

```
"data[Post][project_id]" => array(
  array(
    "rule" => "notEmpty",
    "message" => "Veuillez choisir un projet",
    "allowEmpty" => false
  )
) 
```

但是，似乎不起作用。我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:42:51.823

假设将从**Post**模型本身保存，您必须像这样创建表单：

```
echo $this->Form->input("project_id", array(
    "options" => $proTab,
    "empty" => "Sélectionnez un projet",
    "div" => "control-group",
    "label" => array(
        "class" => "control-label",
        "text" => "Projet : "
    ),
    "between" => "<div class='controls'>",
    "after" => "</div>"
)); 
```

不需要属性**名称**，第一个参数是字段**名称**和**id**的定义。会生成这个：

```
<select name="data[Post][project_id]" id="PostProjectId"> 
```

并验证您的**Post**模型：

```
public $validate = array(
    'project_id' => array(
        'notEmpty' => array(
            'rule' => array('notEmpty'),
            'message' => 'Veuillez choisir un projet',
            'allowEmpty' => false
        ),
    ),
); 
```

希望这可以帮助。

# visual-studio-2012 - 如何在 vs12 中引用 Microsoft.Solver.Foundation？

> ID：12533147
> 
> 赞同：9
> 
> 时间：2012-09-21T15:03:08.610
> 
> 标签：visual-studio-2012, solver, ms-solver-foundation

我正在尝试将 Solver Foundation 添加到我正在 Visual Studio 2012 中处理的项目中，但我在列表中找不到它。

我打开了其中一个示例项目，参考是 Microsoft.Solver.Foundation 但是我尝试在我的项目中的所有可用列表上搜索 Microsoft.S，但它没有出现。

如何将 Solver Foundation 加入我的项目？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T18:06:45.113

我刚刚在我的电脑上安装了**VS 2012 。**我还安装了**VS 2010**。我已经重新安装了 Solver Foundation，但在 VS 2012 中仍然没有这样的项目类型（与 VS 2010 不同）。我还想知道如何将此项目类型添加到 VS 2012 中的模板中。

但是，这可能会对您有所帮助：将项目中的引用添加到`Microsoft.Solver.Foundation.dll`. 位置可能是：

> C:\Program Files\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0\Microsoft.Solver.Foundation.dll

如果在安装 VS 2012 之前您的框架版本是 4.0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-22T18:55:46.687

*Microsoft.Solver.Foundation*程序集主要针对 .NET 4，因此包含在 .NET 4 参考程序集中，MSt:s 的回答也表明了这*一点*。

这意味着如果您创建一个面向 .NET 4.0 的项目，当您在 Visual Studio 2012 中添加新引用时， *Microsoft.Solver.Foundation*程序集*将*显示在“程序集*/框架”列表中。*

另一方面，如果您的项目面向 .NET 4.5，则*MSF*程序集将*不会*显示。如果您的目标是 .NET 4.5，则需要手动浏览到程序集，通常是*MSt*已经指出的路径，即*C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4 .0* .

# matlab - Matlab 事件传递给父级

> ID：12533160
> 
> 赞同：3
> 
> 时间：2012-09-21T15:04:07.320
> 
> 标签：matlab, user-interface, matlab-guide

我有一个我设计的用户界面，我希望让某些按键在用户界面中启动一些操作。我尝试为图形的 keypressfcn 回调定义一个函数，但如果任何其他 UI 元素是活动元素，则调用该元素的 keypressfcn（为空）。如何在不为 UI 中的所有子元素分配相同的 keypressfcn 函数句柄的情况下捕获整个图形的按键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T15:26:57.043

我发现 WindowKeyPressFcn 回调做了我想要的。这是图形的一个属性，但要注意，它完全按照它所说的去做 - 它在这是活动图形时捕获按键（不管活动元素是什么）。考虑一下你是否真的想要这个，例如当一个编辑元素有焦点时，WindowKeyPressFcn 将在它被输入时触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:24:25.723

恐怕你必须定义每一个`uicontrol`'s `KeyPressFcn`。想一想：如果您设计了 Matlab，您将如何同时保持选项开放，让用户为不同的 分配不同的按键功能`uicontrols`，同时还允许他们对所有人只使用一个主功能`uicontrols`？

每个新人`uicontrol`都必须知道你想这样做，这等于分配它的`KeyPressFcn`.

最简单的方法是编写一些通用函数，例如

```
function KeyPressFcnFwd(obj,event)
    prn = get(obj, 'parent')
    fcn = get(prn, 'KeyPressFcn');
    fcn(prn,event); 
end 
```

然后像这样定义uicontrols：

```
button = uicontrol(...
    'style', 'pushbutton', ...
    ...
    'KeyPressFcn', @KeyPressFcnFwd); 
```

这样做会使某个单选按钮上的按键调用其父级的 `KeyPressFcn`，这是一个单选组，后者又将呼叫转发到其父级的`KeyPressFcn`，这是一个 uipanel，后者又将呼叫转发到*其父*级的`KeyPressFcn`，最后是你的身影`KeyPressFcn`。

简而言之：无论你`uicontrol`的嵌套有多深，调用总是会一直转发到图上。

如果将此函数定义为创建“主”图形的函数中的嵌套函数，则可以更有效地完成所有操作：

```
function main %# toplevel function

    ...

    mainFig = figure(...)  %# your main figure

    ...

    %# nested function 
    function KeyPressFcnFwd(obj,event)            
        fcn = get(mainFig, 'KeyPressFcn');
        fcn(mainFig,event); 
    end

    ...

    %# Function to build the GUI
    %# can be a subfunction, nested function or external function
    populateMainWin(mainFig, @KeyPressFcnFwd); 

    ...

end 
```

这样你就没有调用整个树的开销`KeyPressFcn`。

在可能有很多样板的情况下（这是一个很好的候选），我通常定义一些速记，比如

```
 function handle = uibutton(parent, text, varargin)

     handle = uicontrol(...
        'parent', parent, ...
        'style' , 'pushbutton', ...
        'units' , 'normalized', ...
        'string', text, ...
        'KeyPressFcn', @KeyPressFcnFwd, ...
        varargin{:});

 end 
```

这样我的代码仍然可读。

# ruby-on-rails - self.column_name.to_date 慢？

> ID：12533162
> 
> 赞同：0
> 
> 时间：2012-09-21T15:04:13.183
> 
> 标签：ruby-on-rails, ruby

我想知道这是一个错误还是只能忍受它？！

在 Windows (Rails 3.0.1) 上运行 ruby​​ 1.9.2。检查较新版本的变更日志，看看是否有提及它但找不到任何东西。

样本：

```
def same_Day?
  self.from.to_date.eql?(self.to.to_date)
end 
```

比慢得多

```
def same_Day?
  Time.at(self.from.to_i).eql?(Time.at(self.to.to_i))
end 
```

任何线索为什么 to_date 需要这么多时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:29:58.883

您需要检查源代码才能找到答案。存储在数据库中的任何日期时间都应该被解析并返回为`ActiveSupport::TimeWithZone`. 这是你通过调用得到的`self.to`。`ActiveSupport::TimeWithZone`的`to_date`方法无非就是`self.to.time.to_date`。

当你检查`to_i`方法时，它比`to_date`方法更复杂。

见[https://github.com/rails/rails/blob/master/activesupport/lib/active_support/time_with_zone.rb](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/time_with_zone.rb)

反正。如果您想 100% 确定哪种方式更快，则必须执行基准测试。我的简单测试只在`rails console`显示的情况下运行，第一种方法应该比将日期转换为整数然后比较它们更快。

# c# - 修改 ac sharp 类中的 HTML 文件

> ID：12533163
> 
> 赞同：3
> 
> 时间：2012-09-21T15:04:13.710
> 
> 标签：c#, html

首先，我的应用程序不是 Web 应用程序。我的目标是读取 html 文件并修改它们。

所以我写了这段代码：

```
 string fileName = "~\\ActivationMail.html";
    string textLine = string.Empty;

    System.IO.StreamReader objReader;
    objReader = new System.IO.StreamReader(fileName);

    do
    {
        textLine += objReader.ReadLine();
        if (textLine.Contains("id=\"link\""))
        {
            textLine += "href=\"www.google.com\"";
        }
    } while (objReader.Peek() != -1);

    objReader.Close(); 
```

但每次阅读整个 html 文件似乎都不是最好的解决方案。我可以在不读取（循环）整个 html 文件的情况下更改特定的 div 吗？是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:08:42.657

如果您只想更改某些内容，可以使用 XPath 来完成。使用 HTML Agility Pack，您可以使用 C# 执行此操作。

[http://htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:08:45.637

您可以使用 XElement 等将 HTML 加载为 XML，但最终如果您要删除或插入字符，您将需要调整文件大小并重新定位字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-10T14:24:03.887

安装 HAP 包：

```
Install-Package HtmlAgilityPack -Version 1.11.27 
```

细绳：

```
// From String
string result ="<div id="RemoveableDiv"></div> <div id="2"></div>" 
```

代码：

```
var doc = new HtmlDocument();
doc.LoadHtml(result);
foreach (var node in doc.DocumentNode
.Descendants("div")
.Where(d => d.GetAttributeValue("Id", "RemoveableDiv").IndexOf("NavContent") >= 0)
.ToArray())
node.Remove();

result = doc.documentnode.innerhtml; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-10T14:29:07.897

获取section_1的开始和结束索引的位置

```
stringIndex =StringNthOccFinder.IndexOfNth(HtmlSting, "<Section_1", 0, 1);
endIdex = StringNthOccFinder.IndexOfNth(HtmlSting, "</Section_1>", 0, 14); 
```

获取要删除的 HTML 部分

```
 HtmlSection= result.Substring(stringIndex , endIdex - stringIndex ); 
```

将html部分替换为“”

```
 result = result.Replace(HtmlSection, ""); 
```

# c# - REST 还是 SOAP？实体还是运营？

> ID：12533166
> 
> 赞同：1
> 
> 时间：2012-09-21T15:04:24.157
> 
> 标签：c#, web-services, rest, soap

好的，让我们假设我有一个名为实体的 API `Foo`，它看起来像这样：

```
.../api/foo (GET, PUT, POST) or (SELECT, INSERT, UPDATE internally) 
```

这适用于很多消费者，尤其是移动设备，因为它非常简洁和轻便。现在让我们假设，如果我们坚持使用 REST，`ComeForth`存在一个名为的操作，它看起来像这样：

```
.../api/foo/1/comeforth (POST) or (perform the come forth operation) 
```

好的，我们已经知道了，但是现在假设我需要从消费者那里获得更多关于该操作的信息，因此为了保持简洁，我将构建一个包含`Foo`ID 和其他一些信息的新资源，命名`ComeForth`和 API 现在看起来像这样：

```
.../api/comeforth (POST) or (perform the come forth operation) 
```

现在，以前的 API`.../api/foo/1/comeforth`对我来说似乎还可以，但第二个 API 感觉就像我正在尝试将方形钉子放入圆孔中，并且仅仅因为我可以随心所欲地创建资源并不意味着我应该这样做。所以，我的问题是：

1.  我真的应该为`ComeForth`操作发布一个基于 SOAP 的服务吗？
2.  如果我确实使用 SOAP，那不会对消费者产生影响（即，对于喜欢`JavaScript`或移动设备的消费者来说，它的工作量要大得多？
3.  SOAP 是基于操作而 REST 是基于实体的，这真的是一个硬性规定吗？如果是这样，那么即使是 API`.../api/foo/1/comeforth`也会违反该规则，不是吗？

无论如何，我只是想确保我使用正确的技术来满足需求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T19:31:14.360

在您描述的情况下，正在操作的资源不是 Foo，而是一个事务（基于您的评论）。您针对特定操作类型 (ComeForth) 的 T (Foo) 类型的实体对长期运行的事务进行建模。

控制器接受事务 POST 请求进行处理并返回事务的表示，其中包括分配给事务的唯一标识符，该标识符可用于跟踪其进度。

客户端执行 GET 操作以使用在接受处理事务时收到的唯一标识符来检索长时间运行的事务的状态。

我选择使用 XML 序列化来进行演示，但您可以将参与事务的实体序列化为字节数组或任何有意义的东西。

**示例 Web API：**

/事务/{id}

*   POST：创建一个新事务进行处理
*   GET：检索具有指定 id 的事务以验证它是否已完成

**Web API 服务模型：**

```
[DataContract()]
public class Transaction
{
    public Transaction()
    {
        this.Id = Guid.Empty;
    }

    /// <summary>
    /// Gets or sets the unique identifier for this transaction.
    /// </summary>
    /// <value>
    /// A <see cref="Guid"/> that represents the unique identifier for this transaction.
    /// </value>
    [DataMember()]
    public Guid Id
    {
        get;
        set;
    }

    /// <summary>
    /// Gets or sets a value indicating if this transaction has been completed.
    /// </summary>
    /// <value>
    /// <see langword="true"/> if this transaction has been completed; otherwise, <see langword="false"/>.
    /// </value>
    [DataMember()]
    public bool IsComplete
    {
        get;
        set;
    }

    /// <summary>
    /// Gets or sets the action being performed.
    /// </summary>
    /// <value>The action being performed.</value>
    [DataMember()]
    public string Action
    {
        get;
        set;
    }

    /// <summary>
    /// Gets or sets the serialized representation of the entity participating in the transaction.
    /// </summary>
    /// <value>The serialized representation of the entity participating in the transaction.</value>
    [DataMember()]
    public string Entity
    {
        get;
        set;
    }

    /// <summary>
    /// Gets or sets the assembly qualified name of the entity participating in the transaction.
    /// </summary>
    /// <value>
    /// The <see cref="Type.AssemblyQualifiedName"/> of the <see cref="Entity"/>.
    /// </value>
    [DataMember()]
    public string EntityType
    {
        get;
        set;
    }

    /// <summary>
    /// Returns the <see cref="Entity"/> as a type of <typeparamref name="T"/>.
    /// </summary>
    /// <typeparam name="T">The type to project the <see cref="Entity"/> as.</typeparam>
    /// <returns>
    /// An object of type <typeparamref name="T"/> that represents the <see cref="Entity"/>.
    /// </returns>
    public T As<T>() where T : class
    {
        T result    = default(T);

        var serializer = new XmlSerializer(typeof(T));

        using (var reader = XmlReader.Create(new MemoryStream(Encoding.UTF8.GetBytes(this.Entity))))
        {
            result  = serializer.Deserialize(reader) as T;
        }

        return result;
    }

    /// <summary>
    /// Serializes the specified <paramref name="entity"/>.
    /// </summary>
    /// <typeparam name="T">The type of entity being serialized.</typeparam>
    /// <param name="entity">The entity to serialize.</param>
    public static Transaction From<T>(T entity, string action = null) where T : class
    {
        var transaction = new Transaction();

        transaction.EntityType  = typeof(T).AssemblyQualifiedName;
        transaction.Action      = action;

        var serializer  = new XmlSerializer(typeof(T));
        byte[] data     = null;

        using (var stream = new MemoryStream())
        {
            serializer.Serialize(stream, entity);
            stream.Flush();

            data        = stream.ToArray();
        }

        transaction.Entity = Encoding.UTF8.GetString(data);

        return transaction;
    }
}

[DataContract()]
public class Foo
{
    public Foo()
    {

    }

    [DataMember()]
    public string PropertyA
    {
        get;
        set;
    }

    [DataMember()]
    public int PropertyB
    {
        get;
        set;
    }

    [DataMember()]
    public Foo PropertyC
    {
        get;
        set;
    }
} 
```

**交易控制器：**

```
public class TransactionsController : ApiController
{
    public TransactionsController() : base()
    {

    }

    private static ConcurrentDictionary<Guid, Transaction> _transactions = new ConcurrentDictionary<Guid, Transaction>();

    /// <summary>
    /// Using to initiate the processing of a transaction
    /// </summary>
    /// <param name="transaction"></param>
    /// <returns></returns>
    [HttpPost()]
    public HttpResponseMessage Post(Transaction transaction)
    {
        if(transaction == null)
        {
            return this.Request.CreateErrorResponse(HttpStatusCode.BadRequest, new HttpError("Unable to model bind request."));
        }

        transaction.Id  = Guid.NewGuid();

        // Execute asynchronous long running transaction here using the model.
        _transactions.TryAdd(transaction.Id, transaction);

        // Return response indicating request has been accepted fro processing
        return this.Request.CreateResponse<Transaction>(HttpStatusCode.Accepted, transaction);

    }

    /// <summary>
    /// Used to retrieve status of a pending transaction.
    /// </summary>
    /// <param name="id"></param>
    /// <returns></returns>
    [HttpGet()]
    public HttpResponseMessage Get(Guid id)
    {
        Transaction transaction = null;

        if(!_transactions.TryGetValue(id, out transaction))
        {
            return this.Request.CreateErrorResponse(HttpStatusCode.NotFound, new HttpError("Transaction does not exist"));
        }

        return this.Request.CreateResponse<Transaction>(HttpStatusCode.OK, transaction);
    }
} 
```

**对事务控制器的示例客户端调用：**

```
var foo = new Foo()
{
    PropertyA   = "ABC",
    PropertyB   = 123,

    PropertyC   = new Foo()
    {
        PropertyA   = "DEF",
        PropertyB   = 456
    }
};

var transaction = Transaction.From<Foo>(foo, "ComeForth");

Guid pendingTransactionId = Guid.Empty;

// Initiate a transaction
using(var client = new HttpClient())
{
    client.BaseAddress  = new Uri("http://localhost:12775/api/", UriKind.Absolute);

    using (var response = client.PostAsJsonAsync<Transaction>("transactions", transaction).Result)
    {
        response.EnsureSuccessStatusCode();

        pendingTransactionId = response.Content.ReadAsAsync<Transaction>().Result.Id;
    }
}

// Retrieve status of transaction
Transaction pendingTransaction = null;

using (var client = new HttpClient())
{
    client.BaseAddress = new Uri("http://localhost:12775/api/", UriKind.Absolute);

    var requestUri = String.Format(null, "transactions\\{0}", pendingTransactionId.ToString());

    using (var response = client.GetAsync(requestUri).Result)
    {
        response.EnsureSuccessStatusCode();

        pendingTransaction = response.Content.ReadAsAsync<Transaction>().Result;
    }
}

// Check if transaction has completed
if(pendingTransaction.IsComplete)
{

} 
```

因此，您仍然可以使用 REST 和 ASP.NET Web API 来对长时间运行的进程的启动进行建模，您只需要将要执行的操作表示为它自己的单独资源。希望这对您的开发工作有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:15:38.407

对我来说，这听起来像是一个非常开放的问题，需要考虑很多因素。

当您的调用匹配 CRUD（创建、检索、更新、删除）时，REST 非常棒，以 Twitter 为例，您可以创建、检索、更新和删除 Twitter 帖子。

现在考虑一个处理交易的支付处理器，您可以创建一个（即传递一个 cc#），它将有条件地做某事，然后可能返回一个交易结果（成功或失败）。您不能真正“更新”交易，而“检索”交易并不是真正检索您发送的数据。您当然不能“删除”交易，您可以取消交易，或执行退款（部分或全部）。对于此示例，REST 没有意义。

这并不是说您不能混合使用 REST 和操作。有些实体符合 REST，但还有其他方法（例如处理付款）不适合 REST。

选择 REST 或 SOAP 的决定应该由您的目标受众决定，WCF 服务（使用 SOAP）在 .NET 中比 REST 更容易实现，如果使用的技术是 ruby​​，反之亦然。

# php - PHP使用echo将页面内容返回给浏览器

> ID：12533171
> 
> 赞同：0
> 
> 时间：2012-09-21T15:04:49.810
> 
> 标签：php

我在 PHP 中创建了一个小型 MVC 框架。页面是动态创建的，然后返回给客户端/浏览器。

此时我在变量 $content 中创建了整个文件（HTML 输出）。

接下来，我将这个内容写入一个临时文件，并要求这个文件，从而将内容返回给客户端。

现在，我想知道......我不能只从内存中发送它，即只是回显变量：

```
<?php
  ...
  echo $content;
  ...
?> 
```

这与将其写入临时文件然后要求/包含它实际上是否相同，只是更快？或者你有什么更好的建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:06:13.800

是的，你绝对可以直接回应它。

将它们存储在临时文件中的价值将适用于您只需要相同的临时文件而不是重新进行所有繁重工作（逻辑、数据库调用等）的情况

# wordpress - 如何让我的自定义帖子类型存档页面按字母顺序显示我的帖子？

> ID：12533175
> 
> 赞同：1
> 
> 时间：2012-09-21T15:05:10.563
> 
> 标签：wordpress, taxonomy, custom-post-type

我有一个名为“职业”的自定义帖子类型和位置分类设置。我的主要职业页面正确并按字母顺序列出了所有每个职业。这是我的主要查询：

```
<?php    
  $page = (get_query_var('paged')) ? get_query_var('paged') : 1;
   query_posts(array(
    'post_type' => 'career',
    'orderby' => 'title',
    'order' => 'asc',
    'posts_per_page' => 30, 
    'paged' => $page
  ));
?> 
```

您可以单击每个职业的位置链接（分类），然后您将获得一个按该位置过滤的存档页面。现在这是我遇到问题的地方。过滤效果很好，但它会恢复为默认的日期后顺序。我希望它保持字母顺序。有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:45:33.230

根据[有关此事的 Wordpress 文档](http://codex.wordpress.org/Template_Hierarchy#Custom_Taxonomies_display)，当您单击位置链接时，您将结束基于模板的页面，该模板不得使用与您的主要职业页面相同的查询，您需要弄清楚它是什么.

或者，您可以仅`taxonomy-location.php`基于职业模板创建，该模板在显示分类页面时位于模板层次结构的顶部。

# c# - NHibernate - XmlType 的 Oracle 11g 配置

> ID：12533177
> 
> 赞同：1
> 
> 时间：2012-09-21T15:05:22.367
> 
> 标签：c#, nhibernate, configuration, xmltype

我试图让 NHibernate 与 Oracle 11g 的 XmlType 一起工作。

抛出以下异常：

```
Dialect does not support DbType.Xml 
```

我的配置如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
    <property name="dialect">NHibernate.Dialect.Oracle10gDialect</property>
    <property name="connection.driver_class">NHibernate.Driver.OracleClientDriver</property>
    <property name="connection.connection_string">...</property>
    <property name="show_sql">false</property>
  </session-factory>
</hibernate-configuration> 
```

当然，XmlType 功能是在 11g 中引入的，但我不知道配置映射。有人在这里使用此功能并愿意显示其配置吗？

谢谢。

**编辑1：**

类的重要部分：

```
 [DataMember]
    public virtual XmlDocument History { get; set; } 
```

映射文件的重要部分：

```
 <property name="History" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:16:17.773

尝试使用自定义 Oracle 数据客户端驱动程序，代码如下：

```
using System;
using System.Data;
using System.Data.Common;
using System.Reflection;
using NHibernate;
using NHibernate.AdoNet;
using NHibernate.Driver;
using NHibernate.Engine.Query;
using NHibernate.SqlTypes;
using NHibernate.Util;
using Oracle.DataAccess.Client;

/// <summary>
///   A NHibernate Driver for using the Oracle.DataAccess DataProvider
/// </summary>
/// <remarks>
///   Code was contributed by <a href="http://sourceforge.net/users/jemcalgary/">James Mills</a> on the NHibernate forums in this <a
///    href="http://sourceforge.net/forum/message.php?msg_id=2952662">post</a> .
/// </remarks>
public class CustomOracleDataClientDriver : ReflectionBasedDriver, IEmbeddedBatcherFactoryProvider {
    private const string DriverAssemblyName = "Oracle.DataAccess";
    private const string ConnectionTypeName = "Oracle.DataAccess.Client.OracleConnection";
    private const string CommandTypeName = "Oracle.DataAccess.Client.OracleCommand";
    private static readonly SqlType GuidSqlType = new SqlType(DbType.Binary, 16);
    private readonly PropertyInfo oracleDbType;
    private readonly object oracleDbTypeRefCursor;
    private readonly object oracleDbTypeXmlType;

    /// <summary>
    ///   Initializes a new instance of <see cref="OracleDataClientDriver" /> .
    /// </summary>
    /// <exception cref="HibernateException">Thrown when the
    ///   <c>Oracle.DataAccess</c>
    ///   assembly can not be loaded.</exception>
    public CustomOracleDataClientDriver()
        : base(
            DriverAssemblyName,
            ConnectionTypeName,
            CommandTypeName) {
        var parameterType = ReflectHelper.TypeFromAssembly("Oracle.DataAccess.Client.OracleParameter",
            DriverAssemblyName, false);
        this.oracleDbType = parameterType.GetProperty("OracleDbType");

        var oracleDbTypeEnum = ReflectHelper.TypeFromAssembly("Oracle.DataAccess.Client.OracleDbType",
            DriverAssemblyName, false);
        this.oracleDbTypeRefCursor = Enum.Parse(oracleDbTypeEnum, "RefCursor");
        this.oracleDbTypeXmlType = Enum.Parse(oracleDbTypeEnum, "XmlType");
    }

    /// <summary>
    /// </summary>
    public override bool UseNamedPrefixInSql {
        get { return true; }
    }

    /// <summary>
    /// </summary>
    public override bool UseNamedPrefixInParameter {
        get { return true; }
    }

    /// <summary>
    /// </summary>
    public override string NamedPrefix {
        get { return ":"; }
    }

    #region IEmbeddedBatcherFactoryProvider Members

    Type IEmbeddedBatcherFactoryProvider.BatcherFactoryClass {
        get { return typeof (OracleDataClientBatchingBatcherFactory); }
    }

    #endregion

    /// <remarks>
    ///   This adds logic to ensure that a DbType.Boolean parameter is not created since ODP.NET doesn't support it.
    /// </remarks>
    protected override void InitializeParameter(IDbDataParameter dbParam, string name, SqlType sqlType) {
        // if the parameter coming in contains a boolean then we need to convert it 
        // to another type since ODP.NET doesn't support DbType.Boolean
        switch (sqlType.DbType) {
            case DbType.Boolean:
                base.InitializeParameter(dbParam, name, SqlTypeFactory.Int16);
                break;
            case DbType.Guid:
                base.InitializeParameter(dbParam, name, GuidSqlType);
                break;
            case DbType.Xml:
                dbParam.ParameterName = this.FormatNameForParameter(name);
                this.oracleDbType.SetValue(dbParam, this.oracleDbTypeXmlType, null);
                break;
            default:
                base.InitializeParameter(dbParam, name, sqlType);
                break;
        }
    }

    protected override void OnBeforePrepare(IDbCommand command) {
        base.OnBeforePrepare(command);

        ((OracleCommand) command).BindByName = true;

        var detail = CallableParser.Parse(command.CommandText);

        if (!detail.IsCallable)
            return;

        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = detail.FunctionName;

        var outCursor = command.CreateParameter();
        this.oracleDbType.SetValue(outCursor, this.oracleDbTypeRefCursor, null);

        outCursor.Direction = detail.HasReturn ? ParameterDirection.ReturnValue : ParameterDirection.Output;

        command.Parameters.Insert(0, outCursor);
    }
} 
```

NHibernate 配置：

```
...
<property name="connection.driver_class">
  Your.NameSpace.CustomOracleDataClientDriver, Your.Assembly.Name
</property>
<property name="dialect">
  NHibernate.Dialect.Oracle10gDialect
</property>
... 
```

这是一个示例[https://gist.github.com/3762475](https://gist.github.com/3762475)

# c# - 用于 LinkedIn 的 AC# SDK

> ID：12533178
> 
> 赞同：2
> 
> 时间：2012-09-21T15:05:27.020
> 
> 标签：c#, .net, sdk, linkedin

我想知道 C# 中是否有适用于 LinkedIn 的 SDK。我为 Facebook 和 Twitter 找到了类似的 SDK，但到目前为止，LinkedIn 还没有运气。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:10:18.123

以下是带有示例代码的库和工具。有些是旧的，但它可能会让你开始。

[http://developer.linkedin.com/documents/libraries-and-tools](http://developer.linkedin.com/documents/libraries-and-tools)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:29:02.063

您可以基于这篇文章`HttpWebRequest`，修复 REST endoint，并处理响应

您可以通过 LinkedIn API 获得有关可用资源的快速入门指南

链接：http: [//developer.linkedin.com/docs/DOC-1258](http://developer.linkedin.com/docs/DOC-1258)

```
var request = (HttpWebRequest)WebRequest.Create("http://api.linkedin.com/v1/people/~/connections/");  

using (var response = request.GetResponse() as HttpWebResponse)  
{  
  ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:20:01.217

您可能必须使用他们的 REST 服务，如[本](http://galratner.com/blogs/net/archive/2011/10/15/deep-dive-into-the-linkedin-api-use-c-to-search-for-your-dream-job-writing-c.aspx)示例所示。

[我在http://linkedintoolkit.codeplex.com/](http://linkedintoolkit.codeplex.com/)找到了一个开源工具包

# c# - 无法通过代理从 IIS 上的 MVC 应用程序访问 rss 提要

> ID：12533181
> 
> 赞同：2
> 
> 时间：2012-09-21T15:05:35.593
> 
> 标签：c#, iis, rss

我正在尝试从我的 MVC 应用程序中读取 rss 提要。当我在家里运行它时，代码运行良好，但是当我在工作中或在 IIS 7 上运行我的本地机器时，它会失败。我怀疑这是代理设置问题，但是我尝试修改配置文件以使用默认代理，并且无论如何都理解 IIS 与 IE 设置一起使用 - 我可以从网络服务器连接到互联网。

访问 rss 提要的代码如下：

```
 public static List<string> ReadDangerZoneFeed()
    {
        XmlReader reader = XmlReader.Create("http://rssfeedaddress.rss");
        SyndicationFeed feed = SyndicationFeed.Load(reader);

        reader.Close();

        List<string> _DangerZones = new List<string>();

        foreach (var Item in feed.Items)
        {
            _DangerZones.Add(Item.Title.Text);
        }

        return _DangerZones;
    } 
```

错误消息出现在 XMLReader.Create 行并且是“无法连接到远程服务器”。我非常感谢任何建议，

非常感谢，

杰米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:25:47.963

事实证明，我需要做的就是将特定网站列入我们公司代理的白名单。然后我根据这个答案将代理详细信息添加到 web.config 文件中[是否可以在 web.config 中指定代理凭据？](https://stackoverflow.com/questions/186800/is-it-possible-to-specify-proxy-credentials-in-your-web-config)一切正常。

# wso2 - wso2 ESB：服务器配置严重

> ID：12533190
> 
> 赞同：0
> 
> 时间：2012-09-21T15:06:01.607
> 
> 标签：wso2, wso2esb, axis2, wso2carbon

**我的场景：**我有带有 wso2-ESB 的 server_1 (192.168.10.1) 和带有 Glassfish-v3 + Web 服务的 server_2 (192.168.10.2)。

**问题**：我正在尝试使用 java Web 服务在 ESB 中创建代理，但创建的代理没有正确响应。日志说：`Unable to sendViaPost`对于 http 或 https 不会改变结果。

我想我应该配置，`axis2.xml`但我遇到了麻烦，不知道该怎么办。我的方案的配置是什么？请帮我！

**编辑**：需要明确的是，我可以直接在 Glassfish 服务器中使用 WebService，它工作正常，端口和 url 都可以访问。仅当我在 ESB 中创建“**通过代理**”时，它才不起作用。我不认为是代理配置的问题......我在本地部署时从来没有遇到过问题，一旦我将 ESB 上传到远程服务器，问题就开始了。

我真的需要有人告诉我在远程主机上安装 ESB 时的正确程序是什么：**axis2.xml**和**carbon.xml**的配置、**端口**、**传输接收器**等... PS 我看了官方（wso2 esb 和 carbon）指南没有运气，但我错过了一些东西......

**Java Web 服务的端点**：`http://192.168.10.2:8080/HelloWorld/Hello?wsdl`

**ESB 代理端点**：`http://192.168.10.1:8280/services/HelloProxy`

以下是我的**axis2.xml**配置，请查看：

```
<transportReceiver name="http" class="org.apache.synapse.transport.nhttp.HttpCoreNIOListener">
        <parameter name="port" locked="false">8280</parameter>
        <parameter name="non-blocking" locked="false">true</parameter>
        <parameter name="bind-address" locked="false">192.168.10.1</parameter>
        <parameter name="WSDLEPRPrefix" locked="false">https//192.168.10.1:8280</parameter>
        <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor</parameter>
        <!--<parameter name="priorityConfigFile" locked="false">location of priority configuration file</parameter>-->
    </transportReceiver>

    <!-- the non blocking https transport based on HttpCore + SSL-NIO extensions -->
    <transportReceiver name="https" class="org.apache.synapse.transport.nhttp.HttpCoreNIOSSLListener">
        <parameter name="port" locked="false">8243</parameter>
        <parameter name="non-blocking" locked="false">true</parameter>
        <parameter name="bind-address" locked="false">192.168.10.1</parameter>
        <parameter name="WSDLEPRPrefix" locked="false">https://192.168.10.1:8243</parameter>
        <!--<parameter name="priorityConfigFile" locked="false">location of priority configuration file</parameter>-->
        <parameter name="httpGetProcessor" locked="false">org.wso2.carbon.transport.nhttp.api.NHttpGetProcessor</parameter>
        <parameter name="keystore" locked="false">
            <KeyStore>
                <Location>repository/resources/security/wso2carbon.jks</Location>
                <Type>JKS</Type>
                <Password>wso2carbon</Password>
                <KeyPassword>wso2carbon</KeyPassword>
            </KeyStore>
        </parameter>
        <parameter name="truststore" locked="false">
            <TrustStore>
                <Location>repository/resources/security/client-truststore.jks</Location>
                <Type>JKS</Type>
                <Password>wso2carbon</Password>
            </TrustStore>
        </parameter>
        <!--<parameter name="SSLVerifyClient">require</parameter>
            supports optional|require or defaults to none -->
    </transportReceiver> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T10:42:59.877

“无法发送ViaPost”，当端点不可到达时发生。您尝试从哪里访问代理。代理的 URL 是什么。首先尝试您是否可以访问该 URL 的主机和端口。

问候，/女娲

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T07:19:43.007

缺乏信息。

你的代理配置是什么？指定完整的错误。

尝试将 org.apache.synapse.transport.nhttp.wire 记录器设置为跟踪。这将记录所有 http 活动，并且您可能会理解错误的原因。

# jquery - 提交 after() 表单不使用 Ajax

> ID：12533191
> 
> 赞同：0
> 
> 时间：2012-09-21T15:06:02.980
> 
> 标签：jquery, ajaxform

周末的东西。我正在使用 ajaxForm 插件，它工作正常。但是使用 after() 创建的表单只能正常提交到 url 并发布 ajax。

```
$("a.update-time").live("click", function(event) {

            event.preventDefault(); 
            var row = $(this).attr("id").split('-');

            $("#update-mini-form").remove();

            $(this).after(
                '<div id="update-mini-form"><form method="post" action="' + 'http://drupal.se/timetracker/timetracker/update_time/' + row[1] + '"> ' +
                '<input type="textfield" name="title" value="">' +
                '<input type="textfield" name="event_date" value="">' +
                '<input type="textfield" name="hours" size="2" value="">' +
                '<input type="submit" value="update">' +
                '</form></div>'                 
                );
        });

        $('#update-mini-form').live("submit", function(){

                var row = $(this).closest('a').attr("id").split('-');
                $(this).ajaxForm({
                        url: 'http://drupal.se/timetracker/timetracker/update_time/' + row[1],
                        target:$("div#row-" + row[1]),
                        type: "POST",
                });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:12:21.120

好的，我得到了这个工作。我建议使用单一形式，但 live() 仍然是必要的。我猜是因为当您使用 JS 移动/复制某些内容时，它仍然不是页面的一部分。我也有选择器错误，但修复没有帮助。同样最接近的是通过移动表单而被杀死，而 live() 对此无济于事。所以我不得不更改系统以将 id 放入表单中。这是我使用的：

php:

```
$output .=  '<div><form method="post" style="display:none" id="update-mini-form" action="' . 'http://drupal.se/timetracker/timetracker/update_time">' .
                '<input type="textfield" name="title" value="">' .
                '<input type="textfield" name="event_date" value="">' .
                '<input type="hidden" name="id_mini_form" id="id-mini-form" value="">' .
                '<input type="textfield" name="hours" size="2" value="">' .
                '<input type="button" id="sendUpdate" value="update">' .
                '</form></div>';                
    //$output .= '<pre>' .print_r($all, 1) . '</pre>'; 
    print $output; 
```

js：

```
$("a.update-time").live("click", function(event) {

            event.preventDefault(); 
            var row = $(this).attr("id").split('-');

            $("#id-mini-form").val(row[1]);

            $(this).after($("#update-mini-form").show());

        });

        $("#sendUpdate").live("click",function() {          
            $.ajax({
                        type: "POST",
                        url: "http://drupal.se/timetracker/timetracker/update_time/",
                        data: $('#update-mini-form').serialize(),
                        cache: false,
                        success: function(result){

                            $("#update-mini-form").hide();
                            alert(result);
                        }
            });

            return false;           

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:32:41.963

如果我理解正确， .live() 通过绑定到文档元素的委托处理程序并侦听冒泡的事件来工作，对吗？正如 Vishal 和 Poelinca Dorin 所指出的，您应该将 .on() 用于当前版本的 jQuery。

我认为您的问题可能是因为您的迷你表单提交处理程序不会阻止默认提交的发生。尝试这个：

```
$("a.update-time").live("click", function(event) {
    event.preventDefault(); 
    var row = $(this).attr("id").split('-');

    $("#update-mini-form").remove();

    $(this).after(
        '<div id="update-mini-form"><form method="post" action="' + 'http://drupal.se/timetracker/timetracker/update_time/' + row[1] + '"> ' +
        '<input type="textfield" name="title" value="">' +
        '<input type="textfield" name="event_date" value="">' +
        '<input type="textfield" name="hours" size="2" value="">' +
        '<input type="submit" value="update">' +
        '</form></div>'                 
        );
});

// Note: You should probably replace $(document) with a more specific container element
$(document).on("submit", "#update-mini-form", function(event){
    event.preventDefault();
    var row = $(this).closest('a').attr("id").split('-');
    $(this).ajaxForm({
        url: 'http://drupal.se/timetracker/timetracker/update_time/' + row[1],
        target:$("div#row-" + row[1]),
        type: "POST",
    });

}); 
```

# php - 通过输入值显示 Smarty 变量

> ID：12533204
> 
> 赞同：1
> 
> 时间：2012-09-21T15:06:49.577
> 
> 标签：php, smarty

我有一个聪明的变量，我想像这样在输入值中输出

```
<input type="text"  id="video_id" name="product_data[video_id]" value="{$product_video_id}" /> 
```

但是它没有显示价值？如果我将变量移到它显示的输入之外？

我还应该做些什么来让它发挥作用？

谢谢

完整来源：

```
{assign var=product_video_service value=$product_data.product_id|fn_get_product_video_service} 
{assign var=product_video_id value=$product_data.product_id|fn_get_product_video_id} 

<h2 class="subheader">{$lang.media}</h2>
<div class="form-field">
    <label for="video_service">{$lang.video_service}:</label>
    <select id="video_service" name="product_data[video_service]">
        <option {if $product_video_service == 'video_service_youtube'}selected="selected"{/if} value="video_service_youtube">YouTube</option>
        <option {if $product_video_service == 'video_service_vimeo'}selected="selected"{/if} value="video_service_vimeo">Vimeo</option>
    </select>
</div>
<div class="form-field">
    <label for="video_id">{$lang.video_id}:</label>
    <input type="text" class="input-text-medium" value="" maxlength="32" size="20" id="video_id" name="product_data[video_id]" value="{$product_video_id}" />
    <p><span class="small-note">&nbsp;&nbsp;{$lang.video_help}</span></p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:24:53.010

您的代码中有两个`value`属性，删除第一个为空的属性。

```
<input type="text" class="input-text-medium" value="" maxlength="32" size="20" id="video_id" name="product_data[video_id]" value="{$product_video_id}" />
                                                ^                                                                              ^ 
```

# c++ - FindResource 不能文件资源，但是 LoadString 可以加载它

> ID：12533207
> 
> 赞同：2
> 
> 时间：2012-09-21T15:07:02.090
> 
> 标签：c++, windows, winapi, resources

我正在尝试使用`FindResource`/`SizeofResource`函数获取字符串资源长度。

我这样打电话：

```
HRSRC hResInfo = FindResource(hModule, MAKEINTRESOURCE(resourceId), RT_STRING); 
```

我收到`NULL`并`GetLastError`返回`ERROR_RESOURCE_NAME_NOT_FOUND`。

现在我使用相同的变量进行以下调用：

```
LoadString(hModule, resourceId, buffer, 4096) 
```

`hModule`并且使用相同的和成功加载字符串`resourceId`。

因此，我可以加载字符串资源，但无法使用`FindResource`. 可能是什么原因？如何找到字符串资源`FindResource`（并因此获得它的大小）？

# c# - 将 NHibernate 2.1.0.4000 迁移到 .Net Framework 4

> ID：12533208
> 
> 赞同：0
> 
> 时间：2012-09-21T15:07:03.370
> 
> 标签：c#, asp.net, nhibernate, exception

我有一个使用 NHibernate.dll 的项目。我们将项目迁移到使用 .Net Framework 4.0。我们使用 FxCop 和 FxCop 启动失败并出现错误

无法解析程序集 Nhibernate.dll 所以我的猜测是如果我可以将 NHibernate.dll 移动到 .Net Framework 4.0 就可以了。

我试过了，它给出了大约 100 个错误，关于我使用的是哪个 ISet 是 System.** 还是 Ies.Collections.Generic。我使用了 Ies.Collection.Generic 因为 Nhibernate 引用了它。

我成功地将其迁移到 .Net 4。但是当我访问我的 Web 应用程序时，我收到了以下消息。

```
Inheritance security rules violated while overriding member: 'NHibernate.Cfg.Configuration.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)'. Security accessibility of the overriding method must match the security accessibility of the method being overriden. 
```

虽然我根本没有压倒任何东西。我在互联网上搜索并找到了几篇文章，但我不想更改 NHibernate 代码，因为那不是我的代码。

**为什么我不使用最新的 NHibernate？** 因为当我使用它时，我的项目坏了，错误是没有使用 3 个参数（我的项目使用）的重载方法

```
FilterDefinition(string name, string defaultCondition, IDictionary<string, IType> parameterTypes, bool useManyToOne); 
```

现在他们有第四个参数，我不确定结果会是什么。

**问题**：

有人可以帮我解决这个错误吗？

有人成功将 NHibernate 迁移到 .Net 4 吗？

谢谢

参考：

[http://forums.lhotka.net/forums/t/9914.aspx](http://forums.lhotka.net/forums/t/9914.aspx)

[覆盖成员时违反继承安全规则 - SecurityRuleSet.Level2](https://stackoverflow.com/questions/3055792/inheritance-security-rules-violated-while-overriding-member-securityruleset-le) [http://community.codesmithtools.com/Template_Frameworks/f/67/p/12331/47618.aspx#47618](http://community.codesmithtools.com/Template_Frameworks/f/67/p/12331/47618.aspx#47618)

[Fluent NHibernate 和 .NET 4 的奇怪覆盖问题](https://stackoverflow.com/questions/1924814/weird-override-problem-with-fluent-nhibernate-and-net-4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T11:04:40.680

这个下面的链接帮助了我，奥斯卡评论了

[https://github.com/oskarb/nhibernate-core/commit/d5f10c538440c127341159b31bff242ff9d687af](https://github.com/oskarb/nhibernate-core/commit/d5f10c538440c127341159b31bff242ff9d687af)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T06:12:14.207

我知道这不是您正在寻找的答案，但这就是我从以下位置进行升级的方式：

> asp.net 2.0、IIS6、NH 2.1、MVC2 项目：
> 
> asp.net 4.0、IIS7.5、NH3.3、MVC4

1.  确保我对项目的大部分进行了集成测试（我不会说谎，这是我自己花费大量时间来实现的）。还可以使用错误记录模块，如 ELMAH
2.  升级到 NH 3.3、运行测试、实时推送并离开一周以捕获任何错误。问题
3.  升级到 SLN .NET 4 **（不需要重新编译 NH）**，运行测试，实时推送并离开一周以捕获任何错误
4.  从MVC2升级到MVC3，运行测试并推送直播，请假一周
5.  最后从 MVC3 升级到 MVC4

就我个人而言，我发现这是最好的方法，并且肯定会减少我的痛点，因为我在任何时候都没有做太多事情。如果没有覆盖大约 70% 代码的集成测试，我也无法做到这一点。

如果我直接使用 .net 4 和 NH.3.3，那么我将陷入痛苦的世界，因为升级任何项目总是存在问题。我对有价值的建议是慢慢做。

还有一个伟大的想法是进行集成测试，以便将来的代码修改或升级应该是无痛的。

# xml - XSLT 将 xml 存储在属性中

> ID：12533210
> 
> 赞同：0
> 
> 时间：2012-09-21T15:07:07.713
> 
> 标签：xml, xslt, xslt-1.0

我的 xslt 中有一个看起来像这样的变量。

```
<xsl:variable name="metadata">
    <Metadata>
        <xsl:apply-templates select="..." />
    </Metadata>
</xsl:variable> 
```

之后，我尝试将元数据 xml 作为 xsl:attribute 添加到另一个节点。我尝试了value-of，copy-of，但没有用。使用副本时，出现以下错误。

```
<OtherNode>
    <xsl:attribute name="someAttr">
        <!-- I tried these and neither worked -->
        <xsl:value-of select="$metadata" /> <!-- Empty -->
        <xsl:copy-of  select="$metadata" /> <!-- Error -->
    </xsl:attribute>
</OtherNode> 
```

不能在“属性”类型的节点内构造“元素”类型的项目。

这是相当直截了当的，但由于某种原因，我认为它会自动转义该元素。

顺便说一句，我正在使用 xslt 1.0。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:33:41.073

似乎您在变量中捕获的不仅仅是文本，而是拥有`node()`or `node-set`。您需要更改变量以仅选择`text()`您正在寻找的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:30:10.720

第一次尝试，使用 value-of，应该使用一点 mod（使用 xs:text），但应该至少返回不带 Metadata 元素的 apply-templates 调用的值。您确定 apply-templates select="..." 位实际上是在查找并返回某些内容吗？

这有效：

```
<xsl:variable name="metadata">
<xsl:text>&lt;Metadata></xsl:text>
    test
 <xsl:text>&lt;/Metadata></xsl:text>
</xsl:variable>

<xsl:template match="some-element">
  <xsl:element name="some-element">
    <xsl:attribute name="test"><xsl:value-of select="$metadata" /></xsl:attribute>
  </xsl:element>
</xsl:template> 
```

输出如下：

```
 <some-element test="&lt;Metadata&gt;&#xA;        test&#xA;&lt;/Metadata&gt;"> 
```

# android - 如何让 glGetShaderInfoLog() 返回信息？

> ID：12533211
> 
> 赞同：3
> 
> 时间：2012-09-21T15:07:11.933
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在尝试使用 OpenGL ES 2.0 lib 为 Android 编写一些代码。我遇到了 glGetShaderInfoLog() 总是返回空字符串的错误。这是一个没有真正修复的已知错误。

[这篇](https://stackoverflow.com/questions/4588800/glgetshaderinfolog-returns-empty-string-android)文章（最后一个答案）确实提出了一种解决方法（我在谷歌搜索时看到了类似的帖子），但我不明白它是如何工作的。有人可以解释一下当编译过程失败时我应该怎么做才能让 glGetShaderInfoLog() 返回一些信息。

我正在使用 Eclipse 和最新版本的 AndroidSDK。

# objective-c - 检查图像是否包含鼠标位置

> ID：12533216
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:07:26.053
> 
> 标签：objective-c, cocoa

我有一个 NSCustomView，其中一个 NSImage 放置在自定义矩形中。如何在 mousedown 事件中检查某个点是否在此图像内？

像这样的东西：

```
- (void)mouseDown:(NSEvent *)theEvent {
        NSPoint point = [self convertPoint:[event locationInWindow] fromView:nil];
        if ([myImage containspoint:point]) {
           ...do stuff... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:37:56.733

您可以检查您的点击点是否在图像的矩形中，`NSPointInRect`如下所示：

```
-(void)mouseDown:(NSEvent *)theEvent {

    NSPoint point = [self convertPoint: [theEvent locationInWindow] fromView: nil];

    if (NSPointInRect(point, imageRect)) {
        //Do stuff here
    }
} 
```

# vba - 检索 Livelink 文件夹的 OutlookID

> ID：12533217
> 
> 赞同：2
> 
> 时间：2012-09-21T15:07:27.263
> 
> 标签：vba, outlook, livelink

我正在尝试获取我的 VBA 项目（默认 VbaProject.otm）中 Livelink 文件夹的 Outlook ID。它可以让我快速将邮件从 Outlook 移动到 Livelink。我已经有了 Livelink 文件夹 ID，但我知道 Outlook 有自己的。

我可以使用以下内容获取 Livelink StoreID：

```
storeID = Application.GetNamespace("MAPI").Folders("LiveLink").storeID 
```

现在，我不知道如何获得 Outlook ID。以下是它的外观示例：

```
00000000524436FBAAD59A46B79DBE44072FFD06010000007A010000307E7E2D317E305C307E4C6976656C696E6B204851457E307E2D315C307E4C6976656C696E6B204851457E2D357E305C307E4C6976656C696E6B204851457E313233373235387E2D355C307E4C6976656C696E6B204851457E31303233363334317E313233373235385C307E4C6976656C696E6B204851457E31323930393430387E31303233363334315C307E4C6976656C696E6B204851457E31343539333439307E31323930393430385C307E4C6976656C696E6B204851457E31383735353632377E31343539333439305C307E4C6976656C696E6B204851457E3131313833393433357E31383735353632375C307E4C6976656C696E6B204851457E3131313833393433387E3131313833393433355C307E4C6976656C696E6B204851457E3131313833393436367E3131313833393433385C307E4C6976656C696E6B204851457E3131313834313634367E3131313833393436365C307E4C6976656C696E6B204851457E3131363035373238377E313131383431363436 
```

有人有想法吗？谢谢你。

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:25:48.830

看看[Outlook Spy](http://www.dimastr.com/outspy/home.htm)或[MFCMapi](http://mfcmapi.codeplex.com/)。ID 可能包含在一个 MIME 属性中，您可以通过[`Folder.PropertyAccessor`](http://msdn.microsoft.com/en-us/libRary/microsoft.office.interop.outlook.mapifolder.propertyaccessor). 请参阅[相关的 SO 帖子](https://stackoverflow.com/a/8041496/175679)。

```
 Dim liveLinkFolder as Outlook.Folder = Application.GetNamespace("MAPI").Folders("LiveLink")
 Dim id as String = liveLinkFolder.PropertyAccessor.GetProperty("LiveLink ID").ToString() 
```

# c - PQunescapeBytea() 为 E'\n'::bytea 返回一个类似 "x0a" 的字符串

> ID：12533220
> 
> 赞同：2
> 
> 时间：2012-09-21T15:07:32.870
> 
> 标签：c, postgresql, libpq

在 PostgreSQL 的 libpq 库（C API）中，我试图从以文本表示形式返回的 bytea 字段转换为原始二进制字符串。

例如，对于单个换行符，文本表示是`"\\x0a"`（即字符`'\\'`、和`'x'`，以空字节终止）。`'0'``'a'`

[根据文档，](http://www.postgresql.org/docs/9.1/static/libpq-exec.html#LIBPQ-PQUNESCAPEBYTEA)这个文本表示可以通过使用 PQunescapeBytea() 转换回二进制表示。但是，当我使用它时，我只是得到一个`char *`完全相同的，但删除了前导斜杠`"x0a"`。我究竟做错了什么？

```
char * value  = PGgetvalue(res, row, col);
size_t length = 0;
char * bytes  = PQunescapeBytea(value, &length);
// inspection of 'bytes' for length shows it's the same, with the '\' removed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:24:11.090

嗯，我正在开发的机器有 PostgreSQL 8.4，而服务器有 9.1，它正在做 bytea 的十六进制表示，客户端不理解。我需要去做：

```
SET bytea_output = escape 
```

但是，由于我不想篡改用户设置（甚至可能从我下面改变），我选择提供一个后备实现并在字符串看起来像新格式时绕过 libpq。为简洁起见，删除了命名空间前缀。并不是说我要返回一个 Ruby 字符串，因此我的代码中有`rb_*`and`VALUE`东西。

```
/** Predicate to test of string is of the form \x0afe... */
#define NEW_HEX_P(s, len) (len > 2 && s[0] == '\\' && s[1] == 'x')

/** Lookup table for fast conversion of bytea hex strings to binary data */
static char * HexLookup;

/** Cast from a bytea to a String according to the new (PG 9.0) hex format */
static VALUE cast_bytea_hex(char * hex, size_t len) {
  if ((len % 2) != 0) {
    rb_raise(rb_eRuntimeError,
        "Bad hex value provided for bytea (length not divisible by 2)");
  }

  size_t   buflen = (len - 2) / 2;
  char   * buffer = malloc(sizeof(char) * buflen);
  char   * s      = hex + 2;
  char   * b      = buffer;

  if (buffer == NULL) {
    rb_raise(rb_eRuntimeError,
        "Failed to allocate %ld bytes for bytea conversion", buflen);
  }

  for (; *s; s += 2, ++b)
    *b = (HexLookup[*s] << 4) + (HexLookup[*(s + 1)]);

  VALUE str = rb_str_new(buffer, buflen);
  free(buffer);

  return str;
}

/** Cast from a bytea to a String according to a regular escape format */
static VALUE cast_bytea_escape(char * escaped, size_t len) {
  unsigned char * buffer  = PQunescapeBytea(escaped, &len);

  if (buffer == NULL) {
    rb_raise(rb_eRuntimeError,
        "Failed to allocate memory for PQunescapeBytea() conversion");
  }

  VALUE str = rb_str_new(buffer, len);
  PQfreemem(buffer);

  return str;
}

/** Get the value as a ruby type */
VALUE cast_value(PGresult * res, int row, int col) {
  if (PQgetisnull(res, row, col)) {
    return Qnil;
  }

  char * value  = PQgetvalue(res, row, col);
  int    length = PQgetlength(res, row, col);

  switch (PQftype(res, col)) {
    case INT2OID:
    case INT4OID:
    case INT8OID:
      return rb_cstr2inum(value, 10);

    case BOOLOID:
      return (value[0] == 't') ? Qtrue : Qfalse;

    case BYTEAOID:
      if (NEW_HEX_P(value, length)) {
        return cast_bytea_hex(value, length);
      } else {
        return cast_bytea_escape(value, length);
      }

    default:
      return rb_str_new(value, length);
  }
}

/* Initialize hex decoding lookup table. Must be invoked once, before use. */
void Init_casts(void) {
  HexLookup = malloc(sizeof(char) * 128);

  if (HexLookup == NULL) {
    rb_raise(rb_eRuntimeError,
        "Failed to allocate 128 bytes for internal lookup table");
  }

  char c;

  for (c = '\0'; c < '\x7f'; ++c)
    HexLookup[c] = 0; // Default to NULLs so we don't crash. May be a bad idea.

  for (c = '0'; c <= '9'; ++c)
    HexLookup[c] = c - '0';

  for (c = 'a'; c <= 'f'; ++c)
    HexLookup[c] = 10 + c - 'a';

  for (c = 'A'; c <= 'F'; ++c)
    HexLookup[c] = 10 + c - 'A';
} 
```

所以基本上，当我尝试转换一个 OID 为 的值时`BYTEAOID`，我首先检查它是否看起来像新的十六进制格式，如果是，我对查找表执行解码，否则我只是`PQunescapeBytea()`照常进行。有点糟糕，但它是两害相权取其轻。

```
Init_casts();

VALUE rubyval = cast_value(res, 1, 6); // Get the ruby type in row 1, column 6 
```

# xml - 差异算法

> ID：12533221
> 
> 赞同：10
> 
> 时间：2012-09-21T15:07:40.913
> 
> 标签：xml, algorithm, tree, line, diff

有人可以推荐一些关于 XML 的基于树的差异算法的论文（文献）或代码片段（基于 DOM 树）

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T07:05:33.167

这是一篇有用的论文： http: [//pdf.aminer.org/000/301/327/x_diff_an_effective_change_detection_algorithm_for_xml_documents.pdf](http://pdf.aminer.org/000/301/327/x_diff_an_effective_change_detection_algorithm_for_xml_documents.pdf)

这是您可以尝试的一种工具：[http ://www.cs.hut.fi/~ctl/3dm/](http://www.cs.hut.fi/~ctl/3dm/)

您也可以找到上述工具的 Java 源代码，这可能非常有用。

# sql - 如何在 Doctrine 中像右连接一样使用左连接

> ID：12533223
> 
> 赞同：7
> 
> 时间：2012-09-21T15:07:43.213
> 
> 标签：sql, doctrine, left-join

所以我一直在绞尽脑汁。在 Doctrine 中没有右连接的概念。我知道您可以像使用右连接一样使用左连接，但对于我的示例，我无法弄清楚这就是我在这里的原因。

我的例子：我在 Doctrine 中有一个实体，它与自身具有一对一的关系，称为“父级”。我试图让所有实体及其子项（如果它们存在）没有重复。

通过正确的加入，这很简单，因为我可以说：

```
 SELECT parent.*, child.*
    FROM table child
    RIGHT JOIN table parent ON parent.id = child.parent_id
    WHERE parent.parent_id is null; 
```

但是使用左连接我返回的结果是我无法弄清楚 where 子句应该是什么来过滤掉它们。

所以我的问题是“学说是否有办法进行右连接”或“我怎样才能像右连接一样使用左连接操作”？

- -编辑 - -

你们所说的关于更改我从中选择的表格的顺序是正确的，但我使用的是 Doctrine，所以关系是子->父。这是我的教义查询：

我的实体：

```
/**
 * @Entity
 * @Table(name="entity")
 */
class Entity
{
...
/**
 * @OneToOne(
 *     targetEntity="Entity",
 *     fetch="EAGER"
 * )
 * @JoinColumn(name="parent_id", referencedColumnName="id")
 */
private $parent;
...
} 
```

我的学说选择声明：

```
$em->createQueryBuilder()
->select(array('child', 'parent'))
->from('Entity', 'child')
->leftjoin('child.parent', 'parent')
->orderBy('parent.id','asc')
->getQuery()
->execute(); 
```

我不确定如何以及是否可以切换表格的顺序。我还尝试创建从实体到自身的另一种关系（就像我做父母的方式一样），但称它为孩子。但是当我用新的模式学说更新数据库时抛出了错误。

有任何想法吗？感谢您的快速回复！

---编辑2---

左连接sql和结果：

```
SELECT child.id, child.changed_timestamp, child.parent_entity_id, parent.id,
  parent.changed_timestamp, parent.parent_entity_id 
FROM content child 
LEFT JOIN content parent ON child.parent_entity_id = parent.id   
ORDER BY parent.id ASC

child_id    child_timestamp parent_entity_id    parent_id   parent_timestamp    parent_entity_id
1           8/16/12 20:29   NULL                NULL        NULL                NULL
7           9/20/12 16:07   NULL                NULL        NULL                NULL
8           8/17/12 16:08   NULL                NULL        NULL                NULL
9           8/17/12 20:44   NULL                NULL        NULL                NULL
10          8/17/12 21:03   NULL                NULL        NULL                NULL
11          8/17/12 21:17   NULL                NULL        NULL                NULL
194         9/19/12 9:58    NULL                NULL        NULL                NULL
195         9/20/12 10:38   NULL                NULL        NULL                NULL
196         9/19/12 11:58   NULL                NULL        NULL                NULL
197         NULL            196                 196         9/19/12 11:58       NULL
200         9/20/12 16:02   1                   1           8/16/12 20:29       NULL
202         9/20/12 16:35   NULL                NULL        NULL                NULL
204         9/21/12 8:41    NULL                NULL        NULL                NULL
206         NULL            204                 204         9/21/12 8:41        NULL 
```

右连接结果：

```
SELECT child.id, child.changed_timestamp, child.parent_entity_id, parent.id, 
 parent.changed_timestamp, parent.parent_entity_id 
FROM content child 
RIGHT JOIN content parent ON child.parent_entity_id = parent.id   
WHERE parent.parent_entity_id is null
ORDER BY parent.id ASC

child_id    child_timestamp parent_entity_id    parent_id   parent_timestamp    parent_entity_id
200         9/20/12 16:02   1                   1           8/16/12 20:29       NULL
NULL        NULL            NULL                7           9/20/12 16:07       NULL
NULL        NULL            NULL                8           8/17/12 16:08       NULL
NULL        NULL            NULL                9           8/17/12 20:44       NULL
NULL        NULL            NULL                10          8/17/12 21:03       NULL
NULL        NULL            NULL                11          8/17/12 21:17       NULL
NULL        NULL            NULL                194         9/19/12 9:58        NULL
NULL        NULL            NULL                195         9/20/12 10:38       NULL
197         NULL            196                 196         9/19/12 11:58       NULL
NULL        NULL            NULL                202         9/20/12 16:35       NULL
206         NULL            204                 204         9/21/12 8:41        NULL 
```

我想用正确的join sql来实现结果。唯一的父实体及其关联的子实体（如果它们存在），但我需要使用学说来实现它。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-28T07:13:26.180

不是很熟悉 Doctrine 脚本，但是......这种旧式应该与大多数 SQL 脚本`JOIN`中的 a 实现相同的结果：`RIGHT JOIN`

```
 SELECT parent.*, child.*
    FROM table child, table parent 
    WHERE parent.id = child.parent_id
    OR child.parent_id IS NULL; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T21:40:15.033

@491243 的评论是正确的：如果您使用的是 sql，这将是一个微不足道的问题，因为左连接和右连接很容易转换，并且关系谓词可以以任何顺序表示。

真正的问题似乎不是如何将右连接重写为左连接，而是如何在另一个方向上遍历您的关系。大概你不能只做这样的事情吗？：

```
$em->createQueryBuilder()
->select(array('child', 'parent'))
->from('Entity', 'parent')
->leftjoin('parent.child', 'child')
->orderBy('parent.id','asc')
->getQuery()
->execute(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T20:38:04.117

试试这个：

```
SELECT
    parenttable.*, childtable.*
FROM childtable
RIGHT JOIN parenttable ON parenttable.id = childtable.parent_id
WHERE
    parenttable.parent_id IS NULL
    AND
    childtable.childid IS NOT NULL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T16:27:57.227

您发布的左连接没有：WHERE parent.parent_entity_id 为 null

我猜在你的数据中，这意味着记录本身不是一个孩子。

因此，如果您只需要作为左连接提供的右连接 sql，请执行以下操作：

SELECT child.id, child.changed_timestamp, child.parent_entity_id, parent.id, parent.changed_timestamp, parent.parent_entity_id FROM content parent LEFT JOIN content child ON child.parent_entity_id = parent.id
WHERE parent.parent_entity_id 为 null ORDER BY parent.id ASC

注意：如果您的数据允许多代，例如孙子等，那么上面的 where 子句不仅会过滤掉子代，还会过滤掉孙子代。这对返回的子数据有影响：如果是孙子，则不会返回子数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-04T12:29:06.093

这两个语句是等价的：

```
SELECT parent.*, child.*
FROM table child
RIGHT JOIN table parent ON parent.id = child.parent_id
WHERE parent.parent_id is null;

SELECT parent.*, child.*
FROM table parent 
LEFT JOIN table child ON child.parent_id = parent.id 
WHERE parent.parent_id is null; 
```

我从不使用 RIGHT JOIN。我认为它只是为了完整性而包含在 SQL 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-06T07:07:37.110

您可以使用与 Right Join 具有相同结果的 Join 子句。

```
SELECT p.*, c.*
FROM child c,parent p 
WHERE p.parent_id = c.parent_id
OR c.parent_id IS NULL; 
```

# html - 如何在按钮内定位文本？

> ID：12533229
> 
> 赞同：2
> 
> 时间：2012-09-21T15:08:08.173
> 
> 标签：html, css

我在按钮内使用非典型图像背景。我需要使此文本在按钮内显示为“高于”默认值（垂直居中）。我必须做什么？

CSS：

```
.button {
   width: 211px;
   height: 66px;

   font-family: Arial, Helvetica, sans-serif;
   font-size: 18px;
   text-transform: uppercase;
   color: white;

   background: url('../img/button.png') no-repeat;
   border: none;
   cursor: pointer;
} 
```

HTML：

```
<input type="submit" class="button" value="Submit"/>
(...)
<button class="button">Get a quote</button> 
```

来自浏览器的屏幕： ![在此处输入图像描述](../Images/4131425ce290d5e8305b8440c5d643d5.png)

如您所见，按钮中的文本应该比现在高一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T15:16:49.693

设置`padding-bottom`.

```
button{
      width: 300px;
      height: 300px;
      padding-bottom: 200px;
} 
```

***[演示。](http://jsfiddle.net/8FE7t/)***

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T15:14:23.713

确切的解决方案取决于将什么内容准确地放入按钮中，但总体思路是：

*   使用一个`<button>`元素
*   在里面放置一个块元素（一个`<div>`就可以了）
*   给块元素底部填充并将文本放入其中

[**看到它在行动**](http://jsfiddle.net/uNEKp/)。

或者，如果您不想放大按钮，您可以给块元素`position: relative`和负号`top`。

[**看到它在行动**](http://jsfiddle.net/pRjsT/)。

# ruby-on-rails - ruby on rails 在关联调用中使用变量

> ID：12533231
> 
> 赞同：2
> 
> 时间：2012-09-21T15:08:17.837
> 
> 标签：ruby-on-rails, variables, view, associations, render

我有一个辅助函数，它呈现一个部分，我将一个名为方法的变量传递到视图中......

当我在视图中使用

```
<%= friend.method.profile.picture %> 
```

方法变量可以是**用户**或**朋友**

我明白了

```
wrong number of arguments(0 for 1) 
```

我想我如何使用传递给关联调用的变量存在问题......也许我必须以某种方式逃避它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:12:59.323

如果我了解您想要什么，您将尝试根据称为“方法”的字符串参数的值动态调用一个函数。此外，'method' 是 Ruby 中的一个现有函数（因此您的错误消息是关于 'wrong number of args' vs 'undefined method'），所以我建议在你的代码中重命名它。

TLDR：

1.  将变量重命名为“**人**”（而不是“方法”），然后

2.  尝试一些元编程来使用发送调用函数：

    `friend.send(person).profile.picture`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:28:21.603

这是与 ~AmirRubin 相同的答案，但更加充实。

我假设朋友是对象，方法是助手，.profile 是您希望助手使用的方法。

将您的助手定义为：

```
def call_method(object, method_name)
  object.send(method_name)
end 
```

在您看来，将其称为：

```
<%= call_method(friend, :profile).picture %> 
```

如果我的假设是错误的，请调整它。如果您需要将方法名称（符号）发送到局部，请在本地传递它。

# jquery - Jquery datepicker语言文件破坏对象

> ID：12533235
> 
> 赞同：0
> 
> 时间：2012-09-21T15:08:24.993
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

在 jquery ui datepicker 事件上从[Custom text](https://stackoverflow.com/questions/12500841/custom-text-on-jquery-ui-datepicker-event)实现 datepicker 后，我希望为我的用户提供语言支持。

事实上，我已经做到了，而且效果很好——直到我从上面的线程中插入了 onSelect 函数。

现在我收到一个控制台错误：TypeError: 'undefined' is not an object (evalating 'event.text')

一旦我删除我的语言文件，错误就消失了，日历恢复为纯英文

我尝试了几种不同的语言文件-结果都相同

我更新了之前的小提琴并添加了一个语言文件作为资源。删除这将使代码工作[http://jsfiddle.net/6GNwH/7/](http://jsfiddle.net/6GNwH/7/)

提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:23:04.087

您的收藏活动有以下项目

("09/18/2012") 但在您的代码中，您使用其他格式的日期 18-09-2012。

您收到错误，因为您的收藏不包含此日期。

解决方案：在事件收集和数据选择器中使用相同的日期格式（数据格式可以通过选项设置 $( ".selector" ).datepicker({ dateFormat: "yy-mm-dd" }); ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:14:22.740

显然，日期选择器正在将特定于文化的字符串返回给 onSelect 事件。您可以更改 onselect 以使用此方法：

```
 var myDate = $(this).datepicker('getDate'); 
```

获取当前日期。

新的事件处理程序看起来像这样：

```
onSelect: function(dateText, inst) {
        var myDate = $(this).datepicker('getDate');
        var event = events[myDate];
        $("#description").html(event.text);
    } 
```

# android - 安卓gps滞后

> ID：12533239
> 
> 赞同：1
> 
> 时间：2012-09-21T15:08:42.407
> 
> 标签：android, gps

我得到了这个 gps 接收器方法，它将一些数据存储到数据库中。

```
// GPS
    private void addGPSListener() {
        globalconstant.db.setVersion(1);
        globalconstant.db.setLocale(Locale.getDefault());
        globalconstant.db.setLockingEnabled(true);
    final String gps =

    "CREATE TABLE IF NOT EXISTS GPS_Values ("

            + "id INTEGER PRIMARY KEY AUTOINCREMENT, Latitude float(10, 8), Longitude float(10, 8),Accuracy INTEGER,Speed INTEGER,City TEXT,timestamp TIMESTAMP);";
    globalconstant.db.execSQL(gps);

    float f = Float.valueOf(globalconstant.gps_update_value.trim())
            .floatValue();
    Log.d("FESTIVALE :: ", "Frissítési idő: "
            + f);
    float update = f;

    globalconstant.mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    globalconstant.mlocListener = new MyLocationListener();
    globalconstant.mlocManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, (long) update, 0,
            globalconstant.mlocListener);
}

public class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location loc) {

        float szel = (float) loc.getLatitude();
        float hossz = (float) loc.getLongitude();
        int horiAcc = (int) (loc.getAccuracy());
        // int speed=(int) ((loc.getSpeed()*3600)/1000); //sebesség km/h-ban
        int speed = 0;

        if (loc.hasSpeed()) {
            speed = (int) ((loc.getSpeed() * 3600) / 1000); // sebesség
                                                            // km/h-ban
        } else {
            speed = 0;
        }

        String test = String.format("%.08f", szel);
        String test2 = String.format("%.08f", hossz);

        Geocoder geocoder = new Geocoder(main.this, Locale.getDefault());
        try {
            List<Address> addresses = geocoder.getFromLocation(szel, hossz,
                    1);
            city = addresses.get(0).getLocality();
        } catch (IOException e) {
            e.printStackTrace();
        }

        ContentValues gps_values = new ContentValues();

        gps_values.put("Latitude", test);
        gps_values.put("Longitude", test2);
        gps_values.put("Accuracy", horiAcc);
        gps_values.put("Speed", speed);
        gps_values.put("City", city);

        SimpleDateFormat dateFormat = new SimpleDateFormat(
                "yyyy-MM-dd HH:mm:ss");
        Date date = new Date(System.currentTimeMillis());

        gps_values.put("timestamp", dateFormat.format(date));

        try {
            globalconstant.db.beginTransaction();
            globalconstant.db.insert("GPS_Values", null, gps_values);
            globalconstant.db.setTransactionSuccessful();
        } finally {
            globalconstant.db.endTransaction();
        }

        Log.d("FESTIVALE :: ", "Hely " + test + ", " + test2 + " , "
                + horiAcc + " , " + speed + " , " + city + "," + dateFormat.format(date));
        // String Text = "My current location is: " + "Latitude = "
        // + loc.getLatitude() + "\nLongitude = " + loc.getLongitude();

        // Toast.makeText(getApplicationContext(), "Hely" +test + "\n" +
        // test2 + "\n" + horiAcc + "\n" +speed + "\n" +city,
        // Toast.LENGTH_SHORT)
        // .show();

    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Disabled",
                Toast.LENGTH_SHORT).show();
        DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                switch (which) {
                case DialogInterface.BUTTON_POSITIVE:
                    // show gps otions
                    Intent gpsOptionsIntent = new Intent(
                            android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    startActivity(gpsOptionsIntent);
                    break;

                case DialogInterface.BUTTON_NEGATIVE:
                    dialog.cancel();
                    break;
                }
            }
        };

        AlertDialog.Builder builder = new AlertDialog.Builder(main.this);
        builder.setMessage("A GPS nincs aktiválva!\nAktiválja most?")
                .setPositiveButton("Aktivál", dialogClickListener)
                .setNegativeButton("Nem", dialogClickListener).show();
    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "Gps Enabled",
                Toast.LENGTH_SHORT).show();

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

}// gps vége 
```

平均更新时间为 1 秒。但是我的手机滞后（galaxy s2）我可以看到它，因为有一个计时器。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:44:00.800

我想我得到了解决方案：

```
globalconstant.mlocManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, (long) update, 0,
                globalconstant.mlocListener); 
```

在“更新”之后，它代表“0”。这是我发现的：

```
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener) 
```

这意味着最小距离为“0”，所以这就是它如此“滞后”的原因。但是感谢任何人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:23:53.687

GPS 非常占用处理器资源。您的手机速度变慢并不令我感到惊讶。这并不罕见。

事实上，如果您将 GPS 保持打开的时间足够长，您的手机就会变热并且电池会很快耗尽！

# ios - UIPageViewController 手势正在调用 viewControllerAfter: 但没有动画

> ID：12533240
> 
> 赞同：8
> 
> 时间：2012-09-21T15:08:44.487
> 
> 标签：ios, uipageviewcontroller

我对 UIPageViewController 有一个非常有趣的问题。

我的项目的设置与示例基于页面的应用程序模板非常相似。时不时（但在一定程度上可重现）某个平移手势会调用`-(UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController`.

我返回下一页的视图控制器，但从未运行过翻页动画，也从未调用过我的委托方法。

这是代码`viewControllerAfterViewController`

```
-(UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    PageDisplayViewController *vc = (PageDisplayViewController *)viewController;
    NSUInteger index = [self.pageFetchController.fetchedObjects indexOfObject:vc.page];
    if(index == (self.pageFetchController.fetchedObjects.count - 1)) return nil;
    return [self getViewControllerForIndex:(++index)];
} 
```

这里是`getViewControllerForIndex:`

```
-(PageDisplayViewController *)getViewControllerForIndex:(NSUInteger)index
{
    PageDisplayViewController *newVC = [self.storyboard instantiateViewControllerWithIdentifier:@"PageDisplayController"];
    newVC.page = [self.pageFetchController.fetchedObjects objectAtIndex:(index)];
    newVC.view.frame = CGRectMake(0, 0, 1024, 604);
    NSLog(@"%i", index);
    if(index == 0)
    {
        //We're moving to the first, animate the back button to be hidden.
        [UIView animateWithDuration:0.5 animations:^
        {
            self.backButton.alpha = 0.f;
        } completion:^(BOOL finished){
            self.backButton.hidden = YES;
        }];
    }
    else if(index == (self.pageFetchController.fetchedObjects.count - 1))
    {
        [UIView animateWithDuration:0.5 animations:^{
            self.nextButton.alpha = 0.f;
        } completion:^(BOOL finished){
            self.nextButton.hidden = YES;
        }];
    }
    else
    {
        BOOL eitherIsHidden = self.nextButton.hidden || self.backButton.hidden;
        if(eitherIsHidden)
        {
            [UIView animateWithDuration:0.5 animations:^{
                if(self.nextButton.hidden)
                {
                    self.nextButton.hidden = NO;
                    self.nextButton.alpha = 1.f;
                }
                if(self.backButton.hidden)
                {
                    self.backButton.hidden = NO;
                    self.backButton.alpha = 1.f;
                }
            }];
        }
    }
    return newVC;
} 
```

基本上，我创建视图控制器，设置它的数据对象，然后根据索引淡出下一步/后退按钮。

委托方法

```
-(void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed
{
    PageDisplayViewController *vc = [previousViewControllers lastObject];
    NSUInteger index = [self.pageFetchController.fetchedObjects indexOfObject:vc.page];

    if (!completed)
    {
        [self.pagePreviewView setCurrentIndex:index];
        NSLog(@"Animation Did not complete, reverting pagepreview");
    }
    else
    {
        PageDisplayViewController *curr = [pageViewController.viewControllers lastObject];
        NSUInteger i = [self.pageFetchController.fetchedObjects indexOfObject:curr.page];
        [self.pagePreviewView setCurrentIndex:i];
        NSLog(@"Animation compeleted, updating pagepreview. Index: %u", i);
    }
} 
```

我只注意到这个问题，因为随机地，我的后退按钮会重新出现在屏幕上。在那里扔了一些`NSLog()`语句之后，我注意到我的 dataSource 方法被调用，索引为 1，但没有动画播放或委托被调用。更可怕的是，如果我尝试平移下一页，索引 1 会再次调用。

我担心这可能是 UIPageViewController 的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T18:58:12.893

由于我在第一个答案中的实现仍然收到神秘的崩溃，我一直在寻找一个“足够好”的解决方案，它较少依赖于个人对页面视图控制器 (PVC) 底层行为的假设。这是我设法想出的。

我以前的方法有点侵入性，与其说是可接受的解决方案，不如说是一种解决方法。与其与 PVC 抗争迫使它做我认为应该做的事情，不如接受以下事实：

*   和方法可以被 UIKit 调用任意次数，`pageViewController:viewControllerBeforeViewController:`并且`pageViewController:viewControllerAfterViewController:`
*   绝对不能保证其中任何一个都对应于分页动画，也不能保证它们之后会调用`pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted:`

这意味着我们不能将 before/after 方法用作“animation-begin”（但是请注意，它`didFinishAnimating`仍然用作“animation-end”事件）。那么我们如何知道动画确实已经开始了呢？

根据我们的需要，我们可能对以下事件感兴趣：

1.  用户开始摆弄页面：一个很好的指标是之前/之后的回调，或者更准确地说是它们中的第一个。

2.  翻页手势的第一个视觉反馈：我们可以`state`在 PVC 的点击和平移手势识别器的属性上使用 KVO。当`UIGestureRecognizerStateBegan`观察到一个平移值时，我们可以很确定视觉反馈会随之而来。

3.  用户通过释放触摸完成拖动页面：再次，KVO。当该`UIGestureRecognizerStateRecognized`值被报告为平移或点击时，这是PVC实际要翻页的时候，所以这可以用作“动画开始”。

4.  UIKit 开始分页动画：我不知道如何获得直接反馈。

5.  UIKit 结束分页动画：小菜一碟，听听就好`pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted:`。

对于 KVO，只需获取 PVC 的手势识别器，如下所示：

```
@interface MyClass () <UIGestureRecognizerDelegate>
{
    UIPanGestureRecognizer* pvcPanGestureRecognizer;
    UITapGestureRecognizer* pvcTapGestureRecognizer;
}
...
for ( UIGestureRecognizer* recognizer in pageViewController.gestureRecognizers )
{
    if ( [recognizer isKindOfClass:[UIPanGestureRecognizer class]] )
    {
        pvcPanGestureRecognizer = (UIPanGestureRecognizer*)recognizer;
    }
    else if ( [recognizer isKindOfClass:[UITapGestureRecognizer class]] )
    {
        pvcTapGestureRecognizer = (UITapGestureRecognizer*)recognizer;
    }
} 
```

然后将您的班级注册为该`state`属性的观察者：

```
[pvcPanGestureRecognizer addObserver:self
                          forKeyPath:@"state"
                             options:NSKeyValueObservingOptionNew
                             context:NULL];
[pvcTapGestureRecognizer addObserver:self
                          forKeyPath:@"state"
                             options:NSKeyValueObservingOptionNew
                             context:NULL]; 
```

并实现通常的回调：

```
- (void)observeValueForKeyPath:(NSString *)keyPath
        ofObject:(id)object
        change:(NSDictionary *)change
        context:(void *)context
{
    if ( [keyPath isEqualToString:@"state"] && (object == pvcPanGestureRecognizer || object == pvcTapGestureRecognizer) )
    {
        UIGestureRecognizerState state = [[change objectForKey:NSKeyValueChangeNewKey] intValue];
        switch (state)
        {
            case UIGestureRecognizerStateBegan:
            // trigger for visual feedback
            break;

            case UIGestureRecognizerStateRecognized:
            // trigger for animation-begin
            break;

            // ...
        }
    }
} 
```

完成后，不要忘记取消订阅这些通知，否则您的应用程序可能会出现泄漏和奇怪的崩溃：

```
[pvcPanGestureRecognizer removeObserver:self
                             forKeyPath:@"state"];
[pvcTapGestureRecognizer removeObserver:self
                             forKeyPath:@"state"]; 
```

这就是所有的人！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T10:27:21.233

我已经尝试了您的解决方案，它几乎可以正常工作，但仍然存在一些问题。最好的解决方案是添加方法

```
 - (void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray *)pendingViewControllers 
```

它从 iOS 6 开始可用，并且它是**必需**的。如果不实施它，这些手势可能会出现问题。实施它有助于解决大部分问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T10:55:25.213

请首先查看我的其他答案，这个答案有严重的缺陷，但我将其留在这里，因为它可能仍然对某人有所帮助。

* * *

首先，免责声明：以下解决方案是**HACK**。它确实在我测试的环境中工作，但不能保证它在你的环境中工作，也不能保证它不会被下一次更新破坏。所以请谨慎行事。

**TL;DR：**抓住`UIPanGestureRecognizer`并`UIPageViewController`劫持其委托调用，但继续将它们转发到原始目标。

**更长的版本：**

我对这个问题的发现：`UIPageViewController`iOS 6 中发布的行为与 iOS 5 中的不同，因为它可能会`pageViewController:viewControllerBeforeViewController:`在其数据源上调用或已识别出*有效的方向匹配平移）。*当然，这打破了我们之前的假设，即 before/after 调用等同于“动画开始”触发器，并且始终跟随`pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted:`对委托的调用。（最终这是一个大胆的假设，但我想我并不孤单。）

我发现当`UIPanGestureRecognizer`页面视图控制器上的默认值开始识别最终与控制器方向不匹配的平移手势时（例如，水平分页 PVC 中的垂直平移），可能会发生对数据源的额外调用）。有趣的是，在我的环境中，受到打击的总是“之前”方法，而不是“之后”。[其他人建议](https://stackoverflow.com/questions/11256812/uipageviewcontroller-responds-to-vertical-pan-when-orientation-is-set-to-horizon)干扰手势识别器的委托，但这对我来说并没有像那里描述的那样工作，所以我一直在试验。

最后我找到了一个解决方法。首先我们抓取页面视图控制器的平移手势识别器：

```
@interface MyClass () <UIGestureRecognizerDelegate>
{
    UIPanGestureRecognizer* pvcPanGestureRecognizer;
    id<UIGestureRecognizerDelegate> pvcPanGestureRecognizerDelegate;
}
...
for ( UIGestureRecognizer* recognizer in pageViewController.gestureRecognizers )
{
    if ( [recognizer isKindOfClass:[UIPanGestureRecognizer class]] )
    {
        pvcPanGestureRecognizer = (UIPanGestureRecognizer*)recognizer;
        pvcPanGestureRecognizerDelegate = pvcPanGestureRecognizer.delegate;
        pvcPanGestureRecognizer.delegate = self;
        break;
    }
} 
```

然后我们`UIGestureRecognizerDelegate`在我们的类中实现协议：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if ( gestureRecognizer == pvcPanGestureRecognizer &&
        [pvcPanGestureRecognizerDelegate respondsToSelector:@selector(gestureRecognizer:shouldReceiveTouch:)] )
    {
        return [pvcPanGestureRecognizerDelegate gestureRecognizer:gestureRecognizer
                                               shouldReceiveTouch:touch];
    }
    return YES;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer
    shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    if ( gestureRecognizer == pvcPanGestureRecognizer &&
        [pvcPanGestureRecognizerDelegate respondsToSelector:@selector(gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:)] )
    {
        return [pvcPanGestureRecognizerDelegate gestureRecognizer:gestureRecognizer
               shouldRecognizeSimultaneouslyWithGestureRecognizer:otherGestureRecognizer];
    }
    return NO;
}

- (BOOL)gestureRecognizerShouldBegin:(UIGestureRecognizer *)gestureRecognizer
{
    if ( gestureRecognizer == pvcPanGestureRecognizer &&
        [pvcPanGestureRecognizerDelegate respondsToSelector:@selector(gestureRecognizerShouldBegin:)] )
    {
        return [pvcPanGestureRecognizerDelegate gestureRecognizerShouldBegin:gestureRecognizer];
    }
    return YES;
} 
```

显然，这些方法没有做任何明智的事情，它们只是将调用转发给原始委托（确保它实际实现了它们）。尽管如此，这种转发似乎足以让 PVC 正常运行，并且在不需要时不调用数据源。

这个解决方法为我在运行 iOS 6 的设备上解决了这个问题。使用 iOS 6 SDK 编译但部署目标为 iOS 5 的代码已经在 5.x 设备上完美运行，所以修复不是必要的，但根据我的测试它也没有任何伤害。

希望有人觉得这很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T12:19:40.557

尝试这个...

```
 - (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
 {   

        for (UIGestureRecognizer *gr in pageViewController.gestureRecognizers) {
                if([gr isKindOfClass:[UIPanGestureRecognizer class]])
                {
                    UIPanGestureRecognizer *pgr = (UIPanGestureRecognizer*)gr;
                    CGPoint velocity = [pgr velocityInView:pageViewController.view];
                    BOOL verticalSwipe = fabs(velocity.y) > fabs(velocity.x);
                    if(verticalSwipe)
                        return nil;
                }
            }
    ....
} 
```

# drupal - 显示按分类分组的节点和视图

> ID：12533245
> 
> 赞同：0
> 
> 时间：2012-09-21T15:08:57.820
> 
> 标签：drupal, drupal-7

需要像这样显示内容

# 分类术语 1：

Node1
标题： 正文：

节点 2
标题：正文：

# 分类术语 2：

节点 3：
标题： 正文：

节点 4：
标题：正文

我有分类术语下的内容。如何使用视图或不使用视图以上述格式显示内容。

我实际上在这里得到了答案[http://tiger-fish.com/blog/drupal-6-grouping-and-theming-nodes-under-taxonomy-single-page](http://tiger-fish.com/blog/drupal-6-grouping-and-theming-nodes-under-taxonomy-single-page)（它适用于drupal 6，但适用于drupal 7）。

现在的问题是我无法通过嵌入视图来显示页面。内容有一个“加载更多”选项，可以通过 ajax 在分类下加载更多内容。所以我使用 views_view_get_result() 方法将结果加载到自定义模块中并将其传递给 ajax 调用函数，当没有分类分组时我可以成功地做到这一点。只是无法通过 php 代码以分类格式分组显示结果。

我希望我说清楚了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T18:54:15.533

您必须在样式显示中使用组选项。在组选项中，您必须选择字段分类术语。然后您必须从显示字段分类术语中排除。

# java - Java - 来自构造函数的设置器

> ID：12533247
> 
> 赞同：4
> 
> 时间：2012-09-21T15:09:11.090
> 
> 标签：java, constructor, setter

```
package cen.col.course.demo;

import java.io.Serializable;

public class Course implements Serializable {

private static final long serialVersionUID = 1L;
protected String code;
protected String title;
protected Professor professor;

public Course( String code) throws InvalidDataException {
    super();
    setCode(code);
}

public Course(String code, String title ) throws InvalidDataException  {
    this(code);
    setTitle(title);
}

public Course(String code, String title, Professor professor) throws InvalidDataException   {
    this(code,title);
    setProfessor(professor);
}
    public String getCode() {
    return code;
    }

protected void setCode(String code) throws InvalidDataException {
    if ( code == null || code.length() < 1) {
        throw new InvalidDataException("Course must have a course code");
    }
    this.code = code;
}

public String getTitle() {
    return title;
}

public void setTitle(String title)  throws InvalidDataException {
    if ( title == null || title.length() < 1) {
        throw new InvalidDataException("Course must have a title");
    }
    this.title = title;
}

public Professor getProfessor() {
    return professor;
}

public void setProfessor(Professor professor) {
    this.professor = professor;
}

public String toString() {
    String output = getCode() + ": [" + getTitle() + "]";
    if (getProfessor() != null ) {
        output += " is taught by " + getProfessor();
    }
    return output;
}

public boolean equals(Course c) {
    if ( ! this.getCode().equals(c.getCode())){
        return false;
    }
    if ( ! this.getTitle().equals(c.getTitle())){
        return false;
    } 
    // should the prof field be included in test for equality?
    if ( ! this.getProfessor().equals(c.getProfessor())){
        return false;
    } 
    return true;
}

} 
```

我有三个问题：

1.  我注意到我的教授从构造函数中调用了 setter 方法。我做了一些搜索，对此有不同的想法。有人说可以，有人说使用子类时要小心，可以从构造函数中调用setter吗？

2.  构造函数抛出异常，因为她正在从构造函数调用 setter。现在我的问题是，如果从构造函数调用设置器不是一种安全的方法，那么正确的方法是什么？我的猜测是声明一个无参数构造函数，并使用 setter 构建对象。

3.  我想这样做，是不可能的？

    Course createCourse = new Course("1234","Programming 1","Pam Halpert");

我正在调用带有 3 个参数的构造函数，但是，如果从构造函数调用 setter 是不安全的，那么将如何执行此操作并设置异常？我可以使用 if 语句吗？检查某些内容是否为空白并在必要时抛出异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:23:26.487

1.  在构造函数中调用 setter 通常具有以下优点：有时 setter 内部已经有一些验证逻辑（例如您的示例中的 setTitle），并且您不想复制此逻辑。但是，正如您已经提到的，调用 setter 可能会导致问题，即子类可能会以意外行为覆盖它们。要解决这个问题，您可以将设置器设为私有或最终设置，这样它们就不会被覆盖。仅调用私有/最终设置器是一种很好的做法，不应导致任何问题。

2.  获取无效数据的构造函数抛出异常很好。您不想创建无效对象。

3.  首先创建一个空对象（通过空构造函数）然后通过 setter 填充其数据是相当糟糕的做法。这样一来，您将有一段时间处于无意义状态的对象，其中一些数据已填充，一些数据未填充，这可能会导致麻烦。另外，正如已经提到的另一个答案，您应该考虑减少构造函数的数量-没有教授的课程真的有效吗？如果不是，则不需要构造函数来创建这样的对象...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:15:50.783

因为这是家庭作业，或者一些学习，你的教授很想给你看东西。

然而 ，
`Course createCourse = new Course("1234","Programming 1","Pam Halpert");`

实际上是最好的事情。

根据您正在开发的内容，大多数情况下，您希望提供尽可能少的构造函数，除非您正在设计一种编程语言。如果您正在开发公共 API 或产品，则应确保您的消费者不会犯错误或滥用您的 API，如果您允许他们创建错误。

构造函数可以抛出异常，这很好。

据我所知，调用 setter 原因是在做一些验证或一些逻辑。这很好。

请记住，在构造函数中做任何工作都被认为是一种不好的做法。

您应该在类之外执行它并将它们作为构造函数参数或 setter/getter 传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:17:17.223

就我个人而言，我不是二传手的忠实粉丝。我喜欢不变性，因此在您的示例中，我会将参数传递给ctor。在那里进行检查，然后分配给最终字段。设置者将不存在。你只会有吸气剂。

如果要更新，则可以引入复制构造函数。

然后您就会知道对象在构造时处于有效状态。如果它的某些部分为空，那么您可以重载构造函数。您不知道需要通过无参数构造函数和设置器填充哪些字段。通过在构造函数中使用参数强制执行它，您正在强制将对象初始化为有效状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:18:02.110

如果您的 setter 进行某种形式的数据验证，则调用 setter 很有用。这允许您将验证放在一个地方，并确保在实例化点设置的属性符合验证规则。

但是，这样做的问题是子类可能会覆盖这些设置器，这意味着您预期的验证不再发生。

*因此，创建进行验证的私有*setter 是有意义的。在您的构造函数中调用这些私有设置器。如果您也想拥有公共设置器，那很好，只需在您的私人设置器周围创建一个公共包装器设置器。

* * *

边注：

你教授的例子有点不对劲。

验证似乎旨在确保`title`并`code`始终设置。但是，该代码还提供了允许您*不*设置`title`. 这几乎可以肯定是一个错误（我肯定会在代码审查中将其标记为一个错误）。

# javascript - iframe 打破父网站

> ID：12533252
> 
> 赞同：0
> 
> 时间：2012-09-21T15:09:26.200
> 
> 标签：javascript, css, iframe

我使用以下内容加载加载到父站点上的 iframe，但有时，由于加载 iframe，父站点会中断。

这是从书签工具栏上的书签启动的 iframe 代码（如果您想测试它可以工作 - 我没有格式化它，所以可以很容易地添加到书签中进行测试）

```
javascript:(function(d){var%20modal=document.createElement('iframe');modal.setAttribute('src','http://9ammusic.com/test/bm2.html?url='+encodeURIComponent(window.location.href)+'&page_title='+document.title);modal.setAttribute('scrolling','no');modal.setAttribute('name','my_modal');modal.className='modal';document.body.appendChild(modal);var%20c=document.createElement('link');c.type='text/css';c.rel='stylesheet';c.href='//9ammusic.com/css/iframe.css';document.body.appendChild(c);}(document)); 
```

这是 iframe 生成时页面中断的示例。我检查了 css 类名等，没有冲突

[http://www.toysrus.co.uk/Toys-R-Us/Learning/Electronic-Learning/LeapFrog-Tag-Junior-Green%280027249%29;jsessionid=C34152146B0577932EBF279B2D26A8D8.app01?searchPosition=10](http://www.toysrus.co.uk/Toys-R-Us/Learning/Electronic-Learning/LeapFrog-Tag-Junior-Green%280027249%29;jsessionid=C34152146B0577932EBF279B2D26A8D8.app01?searchPosition=10)

我很困惑，因为这种情况很少见，但根本不能接受。

任何想法为什么它会破裂？

# java - UIManager 字符串

> ID：12533253
> 
> 赞同：0
> 
> 时间：2012-09-21T15:09:26.900
> 
> 标签：java, swing, jfilechooser, nimbus, uimanager

> **可能重复：**
> [L&F 中字符串键的位置](https://stackoverflow.com/questions/12519951/location-of-string-keys-in-lf)

这是我的代码中的一行：

```
UIManager.getString("FileChooser.saveButtonText", l); 
```

这将返回一个`string`代表打印在保存按钮上的文本`JFileChooser`

它是从哪里获取`string`的？我试图挖掘 src.zip，但我找不到它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:29:28.173

1.  看看（方法受到保护，然后无法从外部访问）

    *   [JButton getDefaultButton(JFileChooser fc)](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/basic/BasicFileChooserUI.html#getDefaultButton%28javax.swing.JFileChooser%29)

    *   [方法总结](http://docs.oracle.com/javase/7/docs/api/javax/swing/plaf/basic/BasicFileChooserUI.html)

2.  更好的方法（我的观点）可能是忽略`BasicXxxUI`并派生`JFileChooser`到返回`JFileChooser`s`JComponent`的元素

3.  寻找[Custom JFilechooerUI](https://stackoverflow.com/questions/6720957/creating-custom-jfilechooser)和[另一个方法列表](http://www.java2s.com/Tutorial/Java/0240__Swing/CustomizingaJFileChooserLookandFeel.htm)

# wpf - 如何设计 WPF 流文档

> ID：12533256
> 
> 赞同：0
> 
> 时间：2012-09-21T15:09:31.543
> 
> 标签：wpf, xaml, designer, blend, flowdocument

我正在制作一个 wpf 应用程序，我需要生成报告然后打印它们。我正在使用[CodeReason.Reports](http://www.codeproject.com/Articles/70128/Open-Source-WPF-Reporting-Engine)库，但在没有设计师的情况下设计报告对我来说非常困难。

任何人都知道是否存在任何流文档设计器，或者是否有任何方法可以从混合中设计它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T19:26:53.470

我不知道你在说什么库，但是我使用 WPF 创建了一些报告，比如说一个最小的报告引擎，所以我想我可以给你一些建议。首先，学习 XAML。Visual Studio 有一个优秀的设计器，但我用它只是为了看看发生了什么：使用优秀的 Visual Studio 智能感知编写 XAML 效率更高。我无法建议如何使用您的库进行操作，但根据我的策略，文档页面由引擎以代码连接，内容由用户控件生成：它们在 VS 设计器中运行良好。我还使用 MVVM 库以无代码视图的方式进行开发。所以我从 WPF 的经验中学到：它是一个伟大而强大的环境，你可以按照你想要的方式呈现事物，但不要寻找最前沿的设计师。WPF 设计器是 XAML，掌握它是必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T19:40:26.927

我在我创建的正则表达式工具中使用了流文档。我最终在流文档库上创建了一个编程包装器，它一旦完成就很容易使用，因为它具有我的目标外观。

不，AFAIK 没有流文档的设计工具，Blend 也不支持它。如果您使用流文档，则创建一个文档并提供一个与该设计相关的包装器是您的最佳选择。

# ios - 应用程序在 ios 5.1 中运行良好，但在 ios 6 中崩溃

> ID：12533259
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:09:56.443
> 
> 标签：ios, xcode, crash, ios6, xcode4.5

我的应用程序在 ios 5.1 和 xcode 4.4.1 中运行良好现在当我更新 ro ios 6 和 xcode 4.5 时，它在更改视图时崩溃。我使用故事板来制作我的 UI。在第一个视图中，我得到 TableViewController，当我选择一个单元格时，它应该转到另一个包含 3 个按钮、1 个滑块、1 个 UITableView 和 2 个标签的视图。这些东西通过 IBOutlet 连接到控制器。在第二种观点中，我认为这种方法结束后发生了崩溃

```
-(void)viewWillAppear:(BOOL)animated 
```

以及此时的代码库

```
0x347735aa:  ldr    r4, [r0] 
```

我该怎么办 ？编辑：这是我的堆栈跟踪

```
0 objc_msgSend
1 -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:]:
2 -[UITableView _userSelectRowAtPendingSelectionIndexPath:]:
3 __NSFireDelayedPerform:
4 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__:
5 __CFRunLoopDoTimer:
6 __CFRunLoopRun:
7 CFRunLoopRunSpecific:
8 CFRunLoopRunInMode:
9 GSEventRunModal:
10 UIApplicationMain:
11 main at main.m:14: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T19:04:39.703

`willSelectRowAtIndexPath`您的方法语法有误。它应该是

`-(NSIndexPath *)tableView:willSelectRowAtIndexPath:`不是

`-(void)tableView:willSelectRowAtIndexPath:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T07:22:43.830

我在跟踪后发现问题并一遍又一遍地阅读我的代码。问题是我使用了这种方法

```
- (void)tableView:(UITableView *)tableView willSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

知道选择了哪个单元格。但我认为 ios 6 这种方法有问题。所以当我把它改成

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

一切正常。我仍然不知道为什么会这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T07:35:23.110

`tableView:willSelectRowAtIndexPath:`只是通知代理即将选择表中的一行，`nil`如果您不希望选择特定行，您可以返回，或者如果您认为您的应用程序需要它，则返回不同的 IndexPath。

由于该方法从未打算触发深入到您的详细视图控制器，我认为您的旧调用在 iOS 6 上崩溃是公平的。您“幸运”它以前工作过。

# c++ - 从 Qt3 到 Qt4：内部类的问题（Q3GList 和 Q3PtrCollection）

> ID：12533260
> 
> 赞同：0
> 
> 时间：2012-09-21T15:09:56.847
> 
> 标签：c++, qt4, porting, qt3

我正在将代码从 Qt3 更新到 Qt4。我使用了 qt3to4 移植工具，它解决了我的一些问题。但是仍然存在一些错误：

```
g++ -m64 -Wl,-O1 -o CONVECTION_DYN_CODE_version_initiale Convection_points.o Convection_points_prof.o glbox.o globjwin.o main.o algebra.o evector.o matrix.o matrix4.o quaternion.o write_binary.o write_binary_normals.o moc_glbox.o moc_globjwin.o   -L/usr/lib/x86_64-linux-gnu -L/usr/X11R6/lib64 -lQtOpenGL -lQtGui -lQtCore -lGLU -lglut -lGL -lpthread -lCGAL -fp-model -lboost_thread -lgmp
glbox.o:(.rodata._ZTI7Q3GList[typeinfo for Q3GList]+0x10): undefined reference to `typeinfo for Q3PtrCollection' 
```

&

```
glbox.o:(.rodata._ZTV7Q3GList[vtable for Q3GList]+0x18): undefined reference to `Q3GList::clear()'
glbox.o:(.rodata._ZTV7Q3GList[vtable for Q3GList]+0x20): undefined reference to `Q3GList::~Q3GList()'
glbox.o:(.rodata._ZTV7Q3GList[vtable for Q3GList]+0x28): undefined reference to `Q3GList::~Q3GList()'
glbox.o:(.rodata._ZTV7Q3GList[vtable for Q3GList]+0x30): undefined reference to `Q3PtrCollection::newItem(void*)'
... 
```

`Q3GList`和都是`Q3PtrCollection`内部类。我添加了相应的标题，但仍然出现这些错误。我不知道如何解决它，因为它似乎是内部问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:32:37.733

您还应该链接到`qt3support`模块。

添加

```
QT += qt3support 
```

到您的项目设置。

# c - 切换 MSB 的最佳方法是什么？

> ID：12533262
> 
> 赞同：3
> 
> 时间：2012-09-21T15:10:01.257
> 
> 标签：c, bit-manipulation

所以我想切换我的号码中最重要的位。这是一个例子：

```
x = 100101 then answer should be 00101 
```

我有一台 64 位机器，因此我不希望答案是`100000..<51 0's>..100101` 我想到的一种方法是计算我的数字中的位数，然后切换 MSB，但不确定如何计算。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:44:34.463

作弊是将其抵押给编译器：大多数 CPU 中都有执行此类工作的指令。

以下应该做你想要的。

```
i ^ (1 << (sizeof i * CHAR_BIT - clz(i) - 1)) 
```

这将转化为`CLZ`计算前导零的指令。

对于 GCC，请参阅： http: [//gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Other-Builtins.html](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Other-Builtins.html)

需要注意的一件事是，如果`i == 0`.

您应该替换`clz()`为编译器的正确内在函数，在 GCC 中是`__builtin_clz`; 在 Visual Studio C++ 中，这是`_BitScanForward`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:01:37.410

@jleahy 已经在使用 GCC 的情况下[发布](https://stackoverflow.com/a/12533803/545027)了一个不错的选择，我只会在这里留下一个`clz`不使用任何编译器内在函数的通用实现。但是，对于已经具有用于计数位的本机指令（例如 x86）的 CPU，它不是最佳选择。

```
#define __bit_msb_mask(n) (~(~0x0ul >> (n)))   /* n leftmost bits. */

/* Count leading zeroes. */
int clz(unsigned long x) {
    int nr = 0;
    int sh;

    assert(x);

    /* Hope that compiler optimizes out the sizeof check. */
    if (sizeof(x) == 8) {
        /* Suppress "shift count >= width of type" error in case
         * when sizeof(x) is NOT 8, i.e. when it is a dead code anyway. */
        sh = !(x & __bit_msb_mask(sizeof(x)*8/2)) << 5;
        nr += sh; x <<= sh;
    }

    sh = !(x & __bit_msb_mask(1 << 4)) << 4; nr += sh; x <<= sh;
    sh = !(x & __bit_msb_mask(1 << 3)) << 3; nr += sh; x <<= sh;
    sh = !(x & __bit_msb_mask(1 << 2)) << 2; nr += sh; x <<= sh;
    sh = !(x & __bit_msb_mask(1 << 1)) << 1; nr += sh; x <<= sh;
    sh = !(x & __bit_msb_mask(1 << 0)) << 0; nr += sh;

    return nr;
} 
```

使用此功能可以切换最高有效设置位（假设有这样一个），如下所示：

```
x ^= 1ul << (sizeof(x)*8 - clz(x)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:34:35.873

这是一种使用查找表的方法，假设`CHAR_BIT == 8`：

```
uint32_t toggle_msb(uint32_t n)
{
    static unsigned char const lookup[] =
                         { 1, 0, 0, 1, 0, 1, 2, 3, 0, 1, 2, 3, 4, 5, 6, 7 };

    for (unsigned int i = 0; i != sizeof n; ++i)
    {
        // omit the last bit for big-endian machines: ---VVVVVVVVVVVVVVVVVV
        unsigned char * p
                 = reinterpret_cast<unsigned char *>(&n) + sizeof n - i - 1;

        if (*p / 16 != 0) { *p = *p % 16 + (lookup[*p / 16] * 16); return n; }
        if (*p % 16 != 0) { *p = 16 * (*p / 16) + lookup[*p % 16]; return n; }
    }

    return 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:43:55.637

并将它们放在 GCC 的一些示例代码中：

```
#include <stdio.h>

#define clz(x)  __builtin_clz(x)

int main()
{
    int i = 411;    /* 110011011 */

    if( i != 0 )
        i ^= (1 << (sizeof(i)*8 - clz(i)-1));

    /* i is now 10011011 */
    printf("i = %d\n", i);
    return(0);
} 
```

# java - 无效的列索引错误 - 无法解决问题

> ID：12533263
> 
> 赞同：0
> 
> 时间：2012-09-21T15:10:02.370
> 
> 标签：java, oracle, mybatis

这就是我的 XML 的样子。所有定义的属性都定义了各自的 getter 和 setter。在尝试了各种建议后，我无法解决“无效的列索引”问题。

SELECT 语句返回适当列出的所有属性，并且我已经验证了相同的运行作为单独的查询。

我正在从指定日期范围之间的特定组的一组表中获取数据。

```
 <resultMap id="result" type="ValueStats">
        <result property="GroupId" column="GROUP_ID"/>
        <result property="valueId" column="VALUE_ID"/>
        <result property="valueName" column="VALUE_NAME"/>
        <result property="valImp" column="IMP"/>
        <result property="valCks" column="CKS"/>
        <result property="valCR" column="CR"/>
        <result property="valAp" column="AP"/>
        <result property="valRv" column="RV"/>
        <result property="valCt" column="CT"/>
        <result property="fromDate" column="FROM_DATE"/>
        <result property="toDate" column="END_DATE"/>
        <result property="valKc" column="KC"/>
    </resultMap>

    <select id="getAll" resultMap="result">
        SELECT 
              B.GROUP_ID AS GROUP_ID,
              B.VALUE_ID AS VALUE_ID,
          B.VALUE_NAME AS VALUE_NAME,
          A.IMP AS IMP, 
          A.CKS AS CKS,
          A.CR AS CR,
          A.AP AS AP,
          A.RV AS RV,
          A.CT AS CT,
          #{fromDate} AS FROM_DATE,
          #{toDate} AS END_DATE,
          A.KC AS KC
        FROM
        (SELECT 
              Z.VALUE_ID AS VALUE_ID,
              ROUND(AVG(Z.IMP), 0) AS IMP, 
              ROUND(CEIL(AVG(Z.CKS)),0) AS CKS, 
              ROUND(AVG(Z.CR),5) AS CR,  
              ROUND(AVG(Z.AP),2) AS AP,
              ROUND(AVG(Z.CT),2) AS CT, 
              ROUND(AVG(Z.RV),2) AS RV,
              ROUND(COUNT(Z.VALUE_ID)) AS KC
              FROM
                (SELECT 
                  VALUE_ID AS VALUE_ID, 
                  IMP AS IMP, 
                  TO_DATE(DATE_ID,'YYYYMMDD') AS DATEVAL, 
                  CKS, 
                  CR, 
                  AP, 
                  CT, 
                  RV
            FROM XY_STATS WHERE GROUP_ID='#{groupId}') Z
            WHERE
            Z.DATEVAL <![CDATA[<]]> TO_DATE(#{toDate}, 'DD-MM-YY') AND
            Z.DATEVAL >= TO_DATE(#{fromDate}, 'DD-MM-YY') 
            GROUP BY Z.VALUE_ID) A INNER JOIN XY_VALUE_SETTINGS B
            ON A.VALUE_ID = B.VALUE_ID
    </select> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T13:11:45.013

您在动态值周围有引号：

```
...
FROM XY_STATS WHERE GROUP_ID='#{groupId}') Z
... 
```

准备好的语句将用其他引号替换该值。

# ios - iOS - 检查蓝牙是否在没有向用户弹出系统警报的情况下打开

> ID：12533269
> 
> 赞同：14
> 
> 时间：2012-09-21T15:10:30.623
> 
> 标签：ios, bluetooth, alert, status

此代码允许确定当前的蓝牙状态：

```
CBCentralManager* testBluetooth = [[CBCentralManager alloc] initWithDelegate:nil queue: nil];

switch ([testBluetooth state]) {....} 
```

但是，当*[[CBCentralManager alloc] init...]*发生时，如果蓝牙关闭，系统会向用户弹出警报。

**有没有办法在不打扰我的用户的情况下检查蓝牙状态？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-10-21T20:45:13.217

我从一位苹果开发人员那里得到以下回复：在 iOS7 中，该`CBCentralManagerOptionShowPowerAlertKey`选项允许您禁用此警报。

如果初始化时有一个 CBCentralManager，可以使用方法`initWithDelegate:queue:options`

例子：

在我的 .h 文件中，我有一个`CBCentralManager * manager`

在 .m 文件中：

```
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:NO], CBCentralManagerOptionShowPowerAlertKey, nil];

_manager = [[CBCentralManager alloc] initWithDelegate:self queue:nil options:options];

[_manager scanForPeripheralsWithServices:nil options:nil]; 
```

使用此代码，警告不再出现，希望对您有所帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-29T12:22:21.890

在 swift 中，您可以在 func 内的应用程序委托中编写这两行：didFinishLaunchingWithOptions launchOptions

```
 self.bCentralManger = CBCentralManager(delegate: self, queue: dispatch_get_main_queue(), options: [CBCentralManagerOptionShowPowerAlertKey: false])
    self.bCentralManger.scanForPeripheralsWithServices(nil, options: nil) 
```

您的 bCentralManger 应声明为：

私人 var bCentralManger：CBCentralManager！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-26T06:45:55.627

**我已使用以下代码禁用iOS 8 及更高版本**的警报

 **```
self.bluetoothManager = [[CBCentralManager alloc]
                                      initWithDelegate:self 
                                      queue:dispatch_get_main_queue() 
                                      options:@{CBCentralManagerOptionShowPowerAlertKey: @(NO)}];

[self.bluetoothManager scanForPeripheralsWithServices:nil options:nil]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-19T02:42:06.787

通过结合[BadPirate](https://stackoverflow.com/a/15558191/2684720)和[Anas 的](https://stackoverflow.com/a/23709036/2684720)答案，您可以在不显示系统警报的情况下获得蓝牙状态。

```
#import <CoreBluetooth/CoreBluetooth.h>

@interface ShopVC () <CBCentralManagerDelegate>

@property (nonatomic, strong) CBCentralManager *bluetoothManager;

@end

@implementation ShopVC

- (void)viewDidLoad {
    [super viewDidLoad];

    if(!self.bluetoothManager)
    {
        NSDictionary *options = @{CBCentralManagerOptionShowPowerAlertKey: @NO};
        self.bluetoothManager = [[CBCentralManager alloc] initWithDelegate:self queue:nil options:options];
    }
}

#pragma mark - CBCentralManagerDelegate

- (void)centralManagerDidUpdateState:(CBCentralManager *)central
{
    NSString *stateString = nil;
    switch(self.bluetoothManager.state)
    {
        case CBCentralManagerStateResetting: stateString = @"The connection with the system service was momentarily lost, update imminent."; break;
        case CBCentralManagerStateUnsupported: stateString = @"The platform doesn't support Bluetooth Low Energy."; break;
        case CBCentralManagerStateUnauthorized: stateString = @"The app is not authorized to use Bluetooth Low Energy."; break;
        case CBCentralManagerStatePoweredOff: stateString = @"Bluetooth is currently powered off."; break;
        case CBCentralManagerStatePoweredOn: stateString = @"Bluetooth is currently powered on and available to use."; break;
        default: stateString = @"State unknown, update imminent."; break;
    }
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Bluetooth state"
                                                    message:stateString
                                                   delegate:nil
                                          cancelButtonTitle:@"ok" otherButtonTitles: nil];
    [alert show];
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-02-24T13:30:57.207

我只在 iOS 9 上测试过这个，所以也许有人可以测试这个旧的操作系统设备。

除了一件事之外，我们通常做所有事情，而不是设置`CBCentralManager`委托，`viewDidLoad`我们将其保留到我们需要它的那一刻，在下面的示例中，一旦我`WKWebView`完成加载，我就会调用它，因为我的网络视图的每个页面都可能需要使用蓝牙我把这个放进去`WKWebView didFinishNavigation`。

**迅速**

```
var managerBLE: CBCentralManager?

func bluetoothStatus() {
    managerBLE = CBCentralManager(delegate: self, queue: nil, options: nil)
}

func webView(webView: WKWebView, didFinishNavigation navigation: WKNavigation!) {
    bluetoothStatus()
}

func centralManagerDidUpdateState(central: CBCentralManager) {
    switch managerBLE!.state
    {
    case CBCentralManagerState.PoweredOff:
        print("Powered Off")
    case CBCentralManagerState.PoweredOn:
        print("Powered On")
    case CBCentralManagerState.Unsupported:
        print("Unsupported")
    case CBCentralManagerState.Resetting:
        print("Resetting")
        fallthrough
    case CBCentralManagerState.Unauthorized:
        print("Unauthorized")
    case CBCentralManagerState.Unknown:
        print("Unknown")
    default:
        break;
    }
} 
```

在您设置委托的那一刻，`bluetoothStatus()`您将看到状态发生变化。

打开蓝牙的通知似乎只想在您的应用程序的初始加载时被调用，这样做意味着您只需从`centralManagerDidUpdateState`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-19T00:26:21.677

当您的应用程序在支持蓝牙 LE 且蓝牙被禁用的 iOS 设备上运行时，目前无法禁用此警报。提供一种禁用警报的方法将是一个增强请求。因此，Apple 对这项增强功能提出的要求越多越好。**

# javascript - 使用请求对象上传图片文件

> ID：12533270
> 
> 赞同：2
> 
> 时间：2012-09-21T15:10:32.230
> 
> 标签：javascript, file-upload, request, firefox-addon-sdk

在我目前正在开发的 Firefox 扩展中，我已经尝试了几天使用`request`Firefox Add-on SDK 的模块将图像文件上传到服务器。我设法上传了一个文本文件，但我无法上传任何其他类型的文件。我的最终目标是上传截图，所以我真的需要能够上传图片。这是我当前的代码：

```
params= file.read("C:\\FullPath\h3nf5v2c.png", "b");

//multipart form data
boundary = "---------------------------132611019532525";
var snapShotUpload = Request({
    url : "https://myurl.com",
        headers : {
        "Referer" : "https://myurl.com",
    "Content-Type" : "multipart/form-data; boundary=" + boundary,
    },
    content :  "--" + boundary + "\r\n" + "Content-Disposition: form-data; name='Upload_FileName'; filename='h3nf5v2c.png'\r\nContent-Type: application/octet-stream\r\n\r\n" + params + "\r\n--" + boundary + "--\r\n",                          
    onComplete: function(response) {
        console.log(response.text);
    }                        
});
console.log("request built");
snapShotUpload.post(); 
```

上传的图片已损坏，我无法阅读。

所以我的问题是：
如何使用`request`Firefox Add-on SDK 的模块发布图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T17:33:18.607

谢谢弗拉基米尔，

我实际上并没有修改 Request 模块，而是简单地使用了 XMLHttpRequest。如果有人感兴趣，这是我使用的代码：

```
function sendImage(file){
        fName = "h3nf5v2c.png";

    // prepare the MIME POST data
    var boundaryString = '---------------------------132611019532525';
    var boundary = '--' + boundaryString;
    var requestbody = boundary + '\r\n'
            + 'Content-Disposition: form-data; name="Upload_FileName"; filename="'
            + fName + '"' + '\r\n'
            + 'Content-Type: image/png' + '\r\n'
            + '\r\n'
            + file.read()
            + '\r\n'
            + boundary + '--\r\n';

    // Send
    var http_request = Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"]
            .createInstance(Components.interfaces.nsIXMLHttpRequest);

    http_request.onreadystatechange = function() {
        if (http_request.readyState == 4 && http_request.status == 200) {
            console.log(http_request.responseText);
        }
    };

    http_request.open('POST', 'http://myUrl.com', true);
    http_request.setRequestHeader("Referer", "http://myUrl.com");                  
    http_request.setRequestHeader("Content-type", "multipart/form-data; boundary=" + boundaryString);
    //http_request.setRequestHeader("Connection", "close");
    http_request.setRequestHeader("Content-length", requestbody.length);
    http_request.sendAsBinary(requestbody);    

} 
```

该函数的文件参数是来自文件模块的文件对象。

最后的 sendAsBinary 函数非常重要，因为我只在客户端工作，我必须通过表单模拟插入。如果您有权访问服务器端，则发送图像的 base64 编码版本并在服务器端对其进行解码可能更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:14:36.567

不幸的是，答案是：你不能。该`request`模块主要用于传输 url 编码的数据，因此任何不是字符串的东西都被假定为包含需要编码的键值对的对象。因此，如果您需要发送多部分内容但`XMLHttpRequest`始终将字符串编码为 UTF-8，则发送字符串是您唯一的选择，这在您尝试发送原始二进制数据（例如图像数据）时会产生相当不受欢迎的结果。

[使用`FormData`对象](https://developer.mozilla.org/en/DOM/XMLHttpRequest/FormData/Using_FormData_Objects)会容易得多，但即使您创建一个对象 -`request`模块也不会将其传递给`XMLHttpRequest`. `request`除了修改模块（`packages/addon-kit/lib/request.js`附加 SDK 的文件）之外，没有简单的解决方案。找到这一行：

```
let data = stringify(content); 
```

将其更改为以下代码应该可以工作：

```
let {Ci} = require("chrome");
let data = content;
if (!(content instanceof Ci.nsIDOMFormData))
  data = stringify(content); 
```

这可以确保`FormData`对象不会被更改。

请注意，您`FormData`的. 如果是这种情况，从任何 JavaScript 模块中“窃取”它们应该可以工作：`File``main.js`

```
let {Cu} = require("chrome");
var {FormData, File} = Cu.import("resource://gre/modules/Services.jsm") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:15:51.383

我认为还有另一种方法可以在您的服务器上发布图像。您可以使用 base64 编码。我从未测试过它，但我在网上找到[了这个主题](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)，它解释了如何转换图像。我希望这可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-17T09:06:55.290

可以简化您的生活的是在此示例中一起使用 FormData 和 XMLHttpRequests。

```
function uploadFiles(url, files) {
    var formData = new FormData();
    for (var i = 0, file; file = files[i]; ++i) {
        formData.append(file.name, file);
    }

    var xhr = new XMLHttpRequest();
    xhr.open('POST', url, true);
    xhr.onload = function(e) { ... };

    xhr.send(formData);  // multipart/form-data
}

document.querySelector('input[type="file"]').addEventListener('change', function(e) {
    uploadFiles('/server', this.files);
}, false); 
```

来源：[http ://www.html5rocks.com/en/tutorials/file/xhr2/](http://www.html5rocks.com/en/tutorials/file/xhr2/)

# ruby - 为什么在我的 Heroku 应用程序的 PostgreSQL 数据库上有打开的连接？我该如何关闭它们？

> ID：12533276
> 
> 赞同：1
> 
> 时间：2012-09-21T15:10:57.980
> 
> 标签：ruby, postgresql, heroku, sinatra

我的 Heroku 应用程序是[www.inflationtrends.com](http://www.inflationtrends.com)。

通常，当我在 Git Bash 中运行“pg:info”以查看有多少连接时，该数字为零。

最近，我看到流量激增——不多，在过去 48 小时内只有 1,000 多一点——当我今天早上（东部时间上午 11 点左右）运行“pg:info”时，结果显示有 4 或 5 个打开的连接。

我的应用程序使用 Ruby gem Sinatra 运行。在 Sinatra 文件中，我有以下代码：

```
after do
    DB.disconnect
end 
```

加载页面后，“after do”循环与 PostgreSQL 数据库断开连接。

变量“DB”包含我的 PostgreSQL 数据库的连接信息（用户名、密码、主机、端口号、SSL 模式要求）：

```
DB = Sequel.postgres(
        db_name,
        :user=>user,
        :password=>password,
        :host=>host,
        :port=>port,
        :sslmode=>sslmode
    ) 
```

是否有某些原因可以打开连接？有没有办法关闭这些连接？有没有更有效的方法来处理这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:58:16.660

检查 Heroku 上打开的连接数的另一种方法是在控制台/终端中输入它，并将“myapp”替换为您的应用程序名称：

heroku pg:info -a myapp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T18:30:52.527

您是否考虑过您的网站可能正在获得流量？当人们访问您的站点并使用您的应用程序时，连接将被打开。

尝试在您的网页中添加一些跟踪代码（例如 Google Analytics），然后检查记录的访问者数量是否与打开的连接数量相匹配。

数据库也有可能通过各种维护任务（例如备份）打开了连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T22:03:40.567

我抓住了以下完美运行的工具带插件。

[https://github.com/heroku/heroku-pg-extras#usage](https://github.com/heroku/heroku-pg-extras#usage)

heroku pg:killall --app xyz

# xml - Powershell：搜索用 CSV 替换 XML

> ID：12533279
> 
> 赞同：2
> 
> 时间：2012-09-21T15:11:10.773
> 
> 标签：xml, powershell, csv

我是 PowerShell 和脚本/编程的初学者，但我正在尝试编写一个 PowerShell 脚本，该脚本将在目录中的每个 XML 文档中搜索在 CSV 文件的第 1 列中找到的值，并将找到的值替换为列中的值2个相同的CSV。然后脚本将需要转到 CSV 的下一行并重复该过程并继续，直到 CSV 的第 1 列中的所有值都已被搜索并相应地替换。

我已经拼凑了以下内容，但我不知道如何进行。

```
$c = import-csv C:\somecsv.csv)
$xmls2search=get-childitem C:\somedirectory\*.xml
foreach ($xmldoc in $xmls2search)
{
  (Get-Content $xmldoc.PSPath) | 
  Foreach-Object {$_ -replace $c[i].column1name, $c[i].column2name} | 
  Set-Content $xmldoc.PSPath
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:52:10.857

鉴于你的情况，我可能会做这样的事情。

```
$c = Import-Csv yourcsv.csv

Get-ChildItem *.xml | Foreach-Object {
  # Out-String in the next line lets you work with a single string rather than an
  # array of strings.
  $xmldoc = (Get-Content $_.PSPath | Out-String)

  # Loop through your CSV, updating $xmldoc with each pass
  $c | Foreach-Object {
    $xmldoc = $xmldoc -replace $_.column1name,$_.column2name
  }

  # Write the updated $xmldoc back to the original XML file's path
  $xmldoc | Set-Content $_.PSPath
} 
```

# objective-c - 如何编写一个窗口服务器？

> ID：12533281
> 
> 赞同：0
> 
> 时间：2012-09-21T15:11:15.527
> 
> 标签：objective-c, ios, macos, cocoa, gnustep

我如何为 gnustep 编写一个窗口服务器？有几天我正在阅读 gnustep 的源代码，但不知道它是如何工作的。有人可以解释一下它是如何从 NSApplicationMain() 到图形用户界面的吗？实现一个非常基本的 WindowServer 需要什么？我知道这是一个很大的话题。

谢谢，汤米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:43:08.360

GNUstep 在其名为 GSDisplayServer 的 AppKit 中使用其自己的半抽象类来实现围绕现有窗口系统（如 X11 或 WIN32）的包装器。这也取决于你对这个 WindowServer 的设计，但主要有两件事要做，第一件事是实现你自己的 WindowServer，它提供你需要的 API（如果存在，那不是一些 Quartz API 吗？）和一个后端的实现（子类化 GSDisplayServer 和 NSGraphicsContext）。但据我所知，在 OSX 上获取窗口的唯一方法要求您将 Objective-C 与 NSWindow 一起使用，因为没有支持的 API 可以在没有 Objective-C 的情况下在 OSX 上创建窗口（请在此处纠正我，因为我的知识仅限于GNUstep 方面）。因此，我认为为 GNUstep 实现一个 WindowServer 而不是将它包装在您系统上任何现有的窗口系统周围是没有多大意义的。但说真的，X11 并没有那么糟糕，我强烈建议你使用它。至少在 xcb 中重写 GNUstep 的 x11 后端。发明一个新的窗口系统会浪费很多时间。如果您在其他领域贡献自己的时间，GNUstep 会受益更多。但是，如果您只想将 GNUstep 移植到您的窗口系统，只需查看现有的后端即可。

# jquery - mvc3 视图中的电子邮件格式验证

> ID：12533283
> 
> 赞同：2
> 
> 时间：2012-09-21T15:11:26.217
> 
> 标签：jquery, regex, asp.net-mvc-3, razor

在 MVC3 的视图中，我想创建一个 jquery 函数来验证电子邮件格式的文本框，但是当我想这样写时：

```
 var a = "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"; 
```

它不起作用，因为 MVC 认为 @(...) 它是 Razor 代码。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:16:13.373

Razor 允许您通过键入双 @ 来输入此内容。尝试 @@

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:15:36.757

`@Html.Raw(" var a = "[a-z0-9....")`

# vb.net - 如何使用VB创建Excel样式和格式数据表？

> ID：12533285
> 
> 赞同：0
> 
> 时间：2012-09-21T15:11:36.343
> 
> 标签：vb.net, excel

我想编写一个程序来取代我目前的纸质记录。我目前的纸质记录基本上是许多具有不同宽度、高度和其他属性的列和行。我知道如何编写可以保存信息的 VB 程序，但我不知道如何使 VB 程序生成与我的纸质记录完全一样的 xls 数据表。

有人可以给我这方面的信息吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:27:34.043

I would recommend [http://epplus.codeplex.com/releases/view/42439](http://epplus.codeplex.com/releases/view/42439). It is very easy to use and integrates flawlessy in vb.net. I am not providing code as a sample because the samples which are included in the package are very good.

***As a hint: Internally I would use a `Data-Table` to store your values and then use a separate module to load/store it to excel.***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:33:08.220

其他选项包括 OpenXml（我认为这是“推荐”的方法，但它带来了学习曲线）或在规模的另一端（就粗略而言）用逗号写你的数据-分隔 (csv) 格式并手动将其导入 Excel

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:21:33.763

一个 excel 文件可能是一个简单的数据库，其中每张表都是不同的表。
假设您的机器上有 Excel，您可以创建一个空的 XLS 文件，然后使用 OleDB 填写工作表。

```
Sub WriteToExcel()
    Dim con As String con = "Provider=Microsoft.Jet.OLEDB.4.0;" & _
                            "Data Source=C:\temp\test.xls;" & _
                            "Extended Properties='Excel 8.0;HDR=No;'"
    Using c as OleDbConnection = new OleDbConnection(con))
        c.Open()
        Dim commandString as String = "Insert into [Sheet1$] (F1, F2, F3) " & _
                                      "values('Column1Text', 'Column2Text', 'Column3Text')" 
        Using cmd As OleDbCommand = new OleDbCommand(commandString))
            cmd.Connection = c
            cmd.ExecuteNonQuery()
        End Using
   End Using
End Sub 
```

# .htaccess - .htaccess 组合从 url 重定向/隐藏子文件夹并强制将“www”插入到 url

> ID：12533288
> 
> 赞同：1
> 
> 时间：2012-09-21T15:11:50.803
> 
> 标签：.htaccess, mod-rewrite, redirect

我几乎有这个工作。我的问题是，只要我点击网站内的任何链接，子文件夹名称就会添加到 url。我对htaccess文件所做的修改都在根目录下，site目录下的就是标准的joomla htaccess文件。我不确定这是否搞砸了。这是代码的示例。

换句话说，我在浏览器“domain.com”中输入 url，htaccess 完成了它的工作，并自动将其更改为“www.domain.com”。我知道它正在路由到子文件夹，因为我可以看到实际的站点。然后我以单击“主页”按钮为例。然后地址栏中显示的 URL 是“www.domain.com/site”

```
##### Redirect non-www to www -- BEGIN
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R,L]
RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule ^/?(.*)$ http://www.domain.com/$1 [R=301,L]
##### Redirect non-www to www -- END

##### Subfolder redirect --BEGIN
RewriteRule ^(.*)$ /site/$1 [L]
RewriteRule ^(/)?$ site/index.php [L]
##### Subfolder redirect --END 
```

如果需要，我很乐意发布整个 htaccess 文件，但我可以告诉你，通过将这两个条目更改为其中，我已经将站点带到了现在的位置。我在文件中有很多“安全”措施。

编辑：我应该从一开始就将其放入，这是我尝试从直接调用 index.php 重定向。我只是注意到它可能与我的其他重定向发生冲突。

```
##### Redirect index.php to / -- BEGIN
RewriteCond %{THE_REQUEST} !^POST
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\ HTTP/
RewriteCond %{SERVER_PORT}>s ^(443>(s)|[0-9]+>s)$
RewriteRule ^index\.php$ http%2://www.domain.com/ [R,L]
##### Redirect index.php to / -- END 
```

编辑 2：我一直在从浏览器中转储我的网络缓存以进行测试。我的网站在第一次连接时似乎运行得很慢，就内容而言几乎没有任何内容。我是否添加了一些要求太多的东西？

# asp.net - asp.net updatepanel 和 firefox Page.IsValid 导致异常

> ID：12533291
> 
> 赞同：0
> 
> 时间：2012-09-21T15:12:05.983
> 
> 标签：asp.net, firefox

我有以下 asp.net 代码：

```
<script type="text/javascript">
    $(document).ready(function () {$(".button").click(function (event) {
        alert("Button pressed!");
    });
});
</script>
<asp:Button ID="button" runat="server" CssClass="button" />
<asp:UpdatePanel ID="testUpdatePanel" runat="server" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="testTextBox" EventName="TextChanged" />
    </Triggers>
    <ContentTemplate>
        <asp:TextBox ID="testTextBox" runat="server" AutoPostBack="true" CausesValidation="true" ValidationGroup="test" CssClass="Test" />
        <asp:RegularExpressionValidator ID="testRegularExpressionValidator" runat="server" ControlToValidate="testTextBox" ErrorMessage="*2" ValidationExpression="(19|20)\d\d\-(0[1-9]|1[012])\-([012][0-9]|3[01])" ValidationGroup="test" />
        <asp:Label ID="testLabel" runat="server" />
    </ContentTemplate>
</asp:UpdatePanel> 
```

以及以下代码隐藏：

```
Private Sub testTextBox_TextChanged(sender As Object, e As System.EventArgs) Handles testTextBox.TextChanged
    If (Not Page.IsValid) Then
        Return
    End If
    testLabel.Text = testTextBox.Text
End Sub 
```

如果我在 FF(v15,v15.0.1) 中运行它，在文本框中输入 1987-05-03 然后按回车键，它会触发按钮，之后我会回发到 testTextBox_TextChanged，当它击中他的行`If (Not Page.IsValid)`然后我得到以下例外：

```
Page.IsValid cannot be called before validation has taken place. It should be queried in the event handler for a control that has CausesValidation=True and initiated the postback, or after a call to Page.Validate. 
```

如果我在 IE 中做同样的事情，按钮永远不会被触发，我也不例外！那么，为什么 FF 会出现这样的行为不端呢？我没有在我的任何面板上设置 DefaultButton..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:34:44.830

添加

```
Page.Validate("test") 
```

在该行之前，它将保证在所有情况下都得到验证。它仍然可能在 IE 中发生，但错误以某种方式被吞没了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:40:05.333

将`CausesValidation`属性添加`true`到您的`TextBox`

或者，`this.Validate`在检查`IsValid`物业之前打电话

以上将消除异常，但与 IE 和 FF 的不兼容仍然存在

# c# - 获取任何用户的电子邮件

> ID：12533296
> 
> 赞同：0
> 
> 时间：2012-09-21T15:12:32.013
> 
> 标签：c#, asp.net

目前我正在使用获取当前用户的电子邮件。

```
string to;
MembershipUser username;
username = Membership.GetUser();
to = username.Email; 
```

但是，当我尝试传递变量以获取其他用户信息时，我收到错误消息。似乎 Membership.Getuser() 仅适用于当前用户而不适用于其他用户。

任何人都对如何获取其他用户的电子邮件有任何建议。不是当前用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:14:01.860

还有[另一种方法`Membership.GetUser(string username)`](http://msdn.microsoft.com/en-us/library/40w5063z.aspx)可以`MembershipUser`通过用户名获取。

还有[另一个`Membership.GetUser(object providerUserKey)`](http://msdn.microsoft.com/en-us/library/ms152019.aspx)可以通过您配置/编码为的任何内容来获取用户`providerUserKey`。

任你选。

# iphone - 通过 WiFi iphone sdk 进行语音聊天

> ID：12533297
> 
> 赞同：1
> 
> 时间：2012-09-21T15:12:43.463
> 
> 标签：iphone, video, sdk, chat, voice

如何通过 Wifi 网络实现语音（可能还有视频）聊天？不需要互联网连接。尝试了 GK Stuff，但这仅适用于蓝牙，对吗？

感谢您的回答！

# forms - 正确设置从电子邮件表单发送的电子邮件主题行

> ID：12533298
> 
> 赞同：0
> 
> 时间：2012-09-21T15:12:56.667
> 
> 标签：forms, email, header, subject

我的网站有一个电子邮件表单，但问题是：当我收到一封电子邮件时，我的收件箱中的主题行会显示用户在表单中作为主题输入的任何内容。id 喜欢覆盖它，以便每当收到电子邮件时。电子邮件标题中的主题始终是“来自您网站的查询”。在邮件正文中，我确定我不介意他们输入的具体主题，但是当我收到电子邮件时，我的收件箱中的 id 就像一致性一样。

这是当前代码：

```
<?php session_start();
if(isset($_POST['Submit'])) {   if( $_SESSION['chapcha_code'] == $_POST['chapcha_code'] && !empty($_SESSION['chapcha_code'] ) ) {
$youremail = 'xxxxxxxxx';
$fromsubject = 'An inquiry from your website';
$title = $_POST['title'];
$fname = $_POST['fname'];
$lname = $_POST['lname'];
$mail = $_POST['mail'];
$address = $_POST['address']; 
$city = $_POST['city']; 
$zip = $_POST['zip']; 
$country = $_POST['country']; 
$phone = $_POST['phone']; 
$subject = $_POST['subject']; 
$message = $_POST['message']; 
$headers = "From: $nome <$mail>\r\n";

    $to = $youremail; 
    $mailsubject = 'Message received from'.$fromsubject.' Contact Page';
    $body = $fromsubject.'

    The person that contacted you is  '.$fname.' '.$lname.'
     Address: '.$address.'
    '.$city.', '.$zip.', '.$country.'
     Phone Number: '.$phone.'
     E-mail: '.$mail.'
     Subject: '.$subject.'

     Message: 
     '.$message.'

    |---------END MESSAGE----------|'; 
echo "Thank you for inquiring. We will contact you shortly.<br/>You may return to our <a href='/index.html'>Home Page</a>"; 
                                mail($to, $subject, $body, $headers);
        unset($_SESSION['chapcha_code']);
   } else {
        echo 'Sorry, you have provided an invalid security code';
   }
 } else { 
echo "You must write a message. </br> Please visit our <a href='/contact.html'>Contact Page</a> and try again."; 
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:18:24.040

看起来好像你已经设置了一个`$subject`在别处调用的变量。

```
$subject = $_POST['subject']; 
```

然后使用相同的变量发送您的邮件。

```
mail($to, $subject, $body, $headers); 
```

尝试为第二次使用创建另一个变量或在满足您的需要之前对其进行更改。

# javascript - 从 Rails 获取 AJAX 请求以激活

> ID：12533300
> 
> 赞同：0
> 
> 时间：2012-09-21T15:13:12.857
> 
> 标签：javascript, ruby-on-rails-3

我试图让 JQueryUI 自动完成功能在一个简单的文本框中工作，但我在浏览器中没有看到任何响应。我怀疑我没有完全连接好东西。我也想尽可能地把它做成“Rails 3”。在控制器中（品牌是模型，派生自 ActiveRecord::Base，带有字段“名称”）：

```
class WelcomeController < ApplicationController
  def show
    @names = Brand.all.map(&:name)
    respond_to do |format|
      format.html
      format.js
    end
  end
end 
```

显示.html.erb：

```
<h1>Welcome</h1>
<%= form_tag :method => :get do %>
<%= text_field_tag :name %>
<% end %> 
```

显示.js.erb：

```
<%= raw @names %> 
```

在 application.js 中：

```
$(function() {

  $('brand_name').autocomplete({
    source: '/brands/new.js'
  });
}); 
```

在获取将由我设置的 Javascript 处理的 AJAX 请求方面，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:50:38.500

首先，确保从服务器返回的确实是一个 JSON 数组。这是 jQuery UI 自动完成所要求的。尝试渲染 JSON 而不是 Javascript：

```
respond_to do |format|
  format.html
  format.json { render :json => @names }
end 
```

然后给你的文本字段一个适当的类或 id。否则，我不知道您想如何将元素与 jQuery 匹配。

```
<%= text_field_tag 'brand_name', nil, :class => 'brand_name' %> 
```

最后，更正javascript。

```
 $(function() {
   $('.brand_name').autocomplete({
     source: '/brands/new.json'
   });
 }); 
```

如果出现其他问题，请使用 webkit 检查器检查您是否从服务器及其控制台收到正确的数据，是否存在 javascript 错误。

# algorithm - 欧拉计划 #201

> ID：12533302
> 
> 赞同：0
> 
> 时间：2012-09-21T15:13:19.627
> 
> 标签：algorithm, language-agnostic

一段时间以来，我一直在尝试解决[问题 201](http://projecteuler.net/index.php?section=problems&id=201)，但我无法为这么大的集合提出解决方案。鉴于可能达到的总和不超过 300,000，我尝试了一种随机算法，但它只适用于具有大量计算时间的较小集合。然后我尝试了动态编程方法，但没有成功。

我已经放弃了，但我很好奇如何有效地解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:39:34.573

前方剧透！

我想就我如何解决这个问题提供一些提示（并指出它如何以一般方式解决此类问题）

提示 1：制定（或只是编写代码）以下函数的递归

boolean existsRepresentation(int number, int maximalIntegerToSquare, int numberOfSquares)

如果参数 number 的表示形式为 x^2 形式的 numberOfSquares 二次项之和，则函数返回 true，其中最大 x 是 maximalIntegerToSquare。因此

existsRepresentation(5,2,2) 返回 true，因为 5=2^2+1^2 但 existsRepresentation(5,2,3) 为 false，因为没有不同的 x,y,z<=2 使得 5=x^ 2+y^2+z^2

提示 2：制定（或编写代码）函数的递归

boolean existsUniqueRepresentation(int number, int maximalIntegerToSquare, int numberOfSquares)

如果参数 number 具有 UNIQUE 表示形式为 x^2 形式的 numberOfSquares 二次项之和，则函数返回 true，其中最大 x 小于或等于 maximalIntegerToSquare（递归应同时涉及函数 existsUniqueRepresentation 和函数 existsRepresentation来自 HINT 1，参数值较小）。因此

existsUniqueRepresentation(5,2,2) 返回 true 因为 5=2^2+1^2 并且没有其他表示 5 作为两个不同平方 x^2+y^2 x<y 之和的其他表示（最大 y =2 根据需要或其他方式）

existsUniqueRepresentation(5,2,3) 是错误的，因为仅仅因为没有 5 的表示（因此没有唯一表示）作为小于或等于 2 的 3 个不同数字的 3 个平方和（没有 x,y,z其中 1<=x<y<z<=2 ..)

existsUniqueRepresentation(89,8,3) 和 existsUniqueRepresentation(89,9,3) 为假，因为 89=8^2+4^2+3^2 和 89=7^2+6^2+2^2。

您给自己的提示3：使用动态编程，因为您需要缓存existsRepresentation（）或existsUniqueRepresentation（）返回的每个值（实际上这在教科书中称为“记忆化”，动态编程是指一种方式组织缓存的值以便在不进行递归调用的情况下进行计算，但重点始终是缓存子问题的解决方案）。

所以一般的方法是：将问题表述为递归......然后缓存所有移动的东西！（你的电脑上有足够内存的所有东西，也就是说..）

它有效（在这里和许多其他问题）！

# java - Arraylist 和 ArrayIndexOutOfBoundsException 的关系

> ID：12533307
> 
> 赞同：-2
> 
> 时间：2012-09-21T15:13:34.157
> 
> 标签：java

**List 和 Array**之间有什么关系。为什么我得到 ArrayIndexOutOfBoundsException.?

> 基本上，我将一个参数传递给一个方法，基于使用 HQL 的方法，我返回一组**ArrayList**。现在我的问题是。当这个 ArrayList 返回大于 0（大小）时，这正是我想要的方式。
> 
> 但是当它返回 0（大小）ArrayList 时，我得到了异常。这是为什么。任何人都可以向我解释

现在我又多了一个疑问，比如如果数组列表返回 5（第一个）和 0（第二个作为我测试的大小）我没有得到任何异常。但是当它返回 200 个或更多元素时，它会出现异常。这是为什么？**有没有具体的常数没有。像这么多元素数组不应该给 IndexOutofBounds 之类的东西**吗？任何机构可以向我解释吗？

这是我的代码：

```
 public void setUpDisplay()
  {
    if (_flatView || _expired || _issue){ // these are all my views.
        _deptBalances = fetchBalances(null);
    }
    else if (_searchGen.getGenericName() != null){ 
        _storeGenList.clear();
        _deptBalances = fetchBalances(_searchGen.getGenericName());
        if (!ListUtil.nullOrEmptyList(_deptBalances)){
            // i am displaying the result here.
        }
        else {
            displaying error message.
        }
    }
      // here i am using my _deptBalances to display(i am just putting this list into displaygroup).
} 
```

// 这是我的方法。

```
 public List<DEPTStoreBalance> fetchBalances(String genName){
    EntityManager em // Creating instance to entity manager.
    List <DEPTStoreBalance> tempList = ListUtil.list();
    String expClause =  new String();
    if (_expired){
        expClause = "and gg.bSubjectToExpiration=true " +
                    "and msb.expirationDate <= :expDate ";
        if(_expiringOnly){
            expClause = expClause.concat(" and msb.expirationDate > :today");
        }
        else {
            expClause = expClause + 
                        "and (msb.expirationDate > :today " +
                        "or (balance.qtyBalance > 0 or balance.qtyInTransit > 0)) ";
        }
    }
    else {
        expClause = "and ((gg.bSubjectToExpiration=true " +
                    "and msb.expirationDate > :expDate) " +
                    "or gg.bSubjectToExpiration=false) ";

        if (_flatView || _issue){
            expClause = expClause.concat("and (balance.qtyBalance > 0 or balance.qtyInTransit > 0) ");
        }
        else if (genName != null){
            expClause = expClause.concat("and gg.genericName = :genName ");
        }
    }

    String hql = "select balance from DEPTStoreBalance as balance " +
                 " "+ // here are my joins with multiple tables.
                 "where dsg.store = :store " +
                 expClause;

    if (_issue)
        hql = hql.concat(" and dsi.deptIssue = :deptIssue");
    Query q = em.createQuery(hql);
    q.setParameter("store", _store); // here i am selecting the store(which is being changing in search component).
    if (_issue)//Only saleable items should be issued
        q.setParameter("expDate",12 months);
    else 
        q.setParameter("expDate",_minExpDate ); // constant value :3
    if (_expired)
        q.setParameter("today", new Date());
    if (genName != null){
        q.setParameter("genName", genName);
    }
    if (_issue)
        q.setParameter("deptIssue", true);

    try{
        tempList = (List <DEPTStoreBalance>) q.getResultList();
    }
    catch (NoResultException nre){
        //do something
    }
    finally {
        em.close();
    }       
    return tempList;        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:15:44.843

Arraylist 是一个动态数组。Array 具有固定大小，而 Arraylist 则没有。

示例：如果您将数组声明为

```
int[] arr = new int[5]; 
```

您必须提供数组的大小。

```
 ArrayList al = new ArrayList();
  if(al.size()>0) { 
   // do your things 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:16:20.827

ArrayList 只不过是一个动态增长的数组。

您遇到 ArrayIndexOutofBoundException 是因为当您收到一个空列表并且您尝试访问一个*不存在*的特定位置时，JVM 会抛出一个异常，抱怨您已经越过了内部数组*（即*ArrayIndexOutOfBoundException）的边界。

例如，在您的情况下，当您有一个空的 ArrayList 时，列表的大小将为 0。但是，如果您尝试访问 >= 0 的索引，JVM 将抛出 ArrayIndexOutofBoundException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:14:18.650

`ArrayList`内部用于`array`存储其内容。`ArrayList`基本上是动态的`array`。

如果您尝试访问不可`index`用的元素，您将获得`ArrayIndexOutofBoundsException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:16:33.200

如果你`List`有 3 个成员并且你是`calling list.get(5)`异常被抛出。这是因为它是`ArrayList`由Java数组实现的。

# c++ - 具有非常特殊要求的 Visual Studio 替代方案

> ID：12533309
> 
> 赞同：0
> 
> 时间：2012-09-21T15:13:38.533
> 
> 标签：c++, visual-studio, ide

我找不到轻量级 Visual Studio 的替代品，因为需要：<500mb 的磁盘空间，~256mb 的内存，~1.6Ghz CPU，具有自动完成功能，在 XP 下工作，不需要安装 25 个附加工具工作，适用于 C++，是免费的。

有没有这样的选择？我的这台旧机器无法处理更好的事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:26:15.663

我最喜欢的是[CodeLite](http://www.codelite.org/) - [ [screenshot](http://www.codelite.org/images/editor_general.png) ] - 小巧、快速、稳定、符合标准（使用 gcc）。

关于磁盘和内存消耗的问题，这是我机器上的一些数据：

内存使用（一个有 7 个类的小项目）：

*   私有字节：32211 KB
*   工作集：54292 KB

还有一个索引器进程：

*   私有字节：1488 KB
*   工作集：4520 KB

磁盘使用情况：

*   MinGW：~130 MB
*   代码精简版：~70 MB

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:18:59.223

[http://www.bloodshed.net/devcpp.html](http://www.bloodshed.net/devcpp.html)怎么样？它不是VS，但据我所知它是轻量级的。

# java - 如何在 https 连接上检索 cookie？

> ID：12533310
> 
> 赞同：3
> 
> 时间：2012-09-21T15:13:39.827
> 
> 标签：java, cookies, https, jsoup

我正在尝试将 cookie 保存在使用 SSL 但始终返回 NULL 的 URL 中。

```
private Map<String, String> cookies = new HashMap<String, String>();

    private Document get(String url) throws IOException {
            Connection connection = Jsoup.connect(url);
            for (Entry<String, String> cookie : cookies.entrySet()) {
                connection.cookie(cookie.getKey(), cookie.getValue());
            }
            Response response = connection.execute();
            cookies.putAll(response.cookies());
            return response.parse();
        }

    private void buscaJuizado(List<Movimentacao> movimentacoes) {
            try {
                Connection.Response res = Jsoup                          .connect("https://projudi.tjpi.jus.br/projudi/publico/buscas/ProcessosParte?publico=true")
  .userAgent("Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20120716 Firefox/15.0a2")
  .timeout(0)
  .response();
  cookies = res.cookies();
  Document doc = get("https://projudi.tjpi.jus.br/projudi/listagens/DadosProcesso?  numeroProcesso=" + campo);
  System.out.println(doc.body());
  } catch (IOException ex) {
     Logger.getLogger(ConsultaProcessoTJPi.class.getName()).log(Level.SEVERE, null, ex);
  }
} 
```

我尝试在第一次连接时捕获 cookie，但它们总是设置为 NULL。我认为由于安全连接（HTTPS）可能是一些 Cois 知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T23:52:01.797

问题不在于 HTTPS。问题或多或少是一个小错误。

要解决您的问题，您可以简单地替换`.response()`为`.execute()`. 像这样，

```
private void buscaJuizado(List<Movimentacao> movimentacoes) {
  try {
    Connection.Response res = Jsoup
      .connect("https://projudi.tjpi.jus.br/projudi/publico/buscas/ProcessosParte?publico=true")
      .userAgent("Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20120716 Firefox/15.0a2")
      .timeout(0)
      .execute(); // changed fron response()
    cookies = res.cookies(); 
    Document doc = get("https://projudi.tjpi.jus.br/projudi/listagens/DadosProcesso?numeroProcesso="+campo);
    System.out.println(doc.body());
  } catch (IOException ex) {
    Logger.getLogger(ConsultaProcessoTJPi.class.getName()).log(Level.SEVERE, null, ex);
  }
} 
```

总的来说，您必须确保首先执行请求。
调用对于在请求已经执行*后*获取对象`.response()`很有用。显然，如果您没有执行请求，该对象将不会很有用。 `Connection.Response`*`Connection.Response`*

 *事实上，如果您尝试调用`res.body()`未执行的响应，您将收到以下异常指示问题。

> java.lang.IllegalArgumentException：请求必须执行（使用 .execute()、.get() 或 .post() 才能获得响应正文*

# c# - 为什么 WCF 流式传输会给出 HTTP 400 错误？

> ID：12533312
> 
> 赞同：1
> 
> 时间：2012-09-21T15:13:49.953
> 
> 标签：c#, wcf, web-services, streaming

我有一个 wcf 服务，我想用它来上传可能很大的图像。我有一个启用流式传输的基本 http 端点。

目前，当我从 Windows 应用程序调用此服务时，我得到一个 http 400。奇怪的是，它在 400 错误之后仍然进入方法（它达到了我的断点），但我传递给它的流无法读取（uploadStream.ReadByte()返回 -1)

我还创建了一个方法，它接受一个字符串并返回一个字符串来测试，它可以 100% 工作。

我已经阅读了许多解决方案文章，但似乎没有解决我的问题。

网页配置

```
 <system.web>
        <httpRuntime
        maxRequestLength="65536"
        />
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="FileUploadServiceBinding" closeTimeout="04:01:00"
                         openTimeout="04:01:00" receiveTimeout="04:10:00" sendTimeout="04:01:00" 
                         allowCookies="false" bypassProxyOnLocal="false"
                         hostNameComparisonMode="StrongWildcard"
                         maxBufferSize="2147483647" maxBufferPoolSize="2147483647"
                         maxReceivedMessageSize="2147483647"
                         messageEncoding="Mtom" textEncoding="utf-8"
                         transferMode="Streamed"
                         useDefaultWebProxy="true">
                    <security mode="None">
                        <transport clientCredentialType="None" />
                    </security>
                    <readerQuotas maxDepth="128"
                        maxStringContentLength="2147483647" maxArrayLength="2147483647"
                        maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <services>
            <service name="Smd.ThreeSixtyDataTransfer.ThreeSixtyDataTransferService">
                <endpoint address="" binding="basicHttpBinding" bindingConfiguration="FileUploadServiceBinding"
                 contract="Smd.ThreeSixtyDataTransfer.IThreeSixtyDataTransferService">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
                <host>
                    <baseAddresses>
                        <add baseAddress="http://localhost:8732/ThreeSixtyDataTransferService/" />
                    </baseAddresses>
                </host>
            </service>
        </services>
        <behaviors>
            <serviceBehaviors>
                <behavior>
                    <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
                    <serviceMetadata httpGetEnabled="True"/>
                    <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
                    <serviceDebug includeExceptionDetailInFaults="False" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
    </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

服务

```
public class ThreeSixtyDataTransferService : IThreeSixtyDataTransferService
{

    public RequestResponse AttachPhotoToDataItem(UploadMessage photo)
    {

        ...

        return new RequestResponse() { UploadSucceeded = true };
    }

    public string Test(string test)
    {
            return test;
    }
}
[ServiceContract]
public interface IThreeSixtyDataTransferService
{

    [OperationContract]
    RequestResponse AttachPhotoToDataItem(UploadMessage photo);

    [OperationContract]
    string Test(string test);

}

[MessageContract]
public class UploadMessage
{
    [MessageHeader(MustUnderstand = true)]
    public Guid DataId { get; set; }

    [MessageBodyMember(Order = 1)]
    public Stream Stream { get; set; }
}

[MessageContract]
public class RequestResponse
{
    [MessageBodyMember(Order = 1)]
    public bool UploadSucceeded { get; set; }
} 
```

客户

```
 using (Stream uploadStream =new FileStream("D:\\Folder\\somefoto.jpg", FileMode.Open))
 {

            using (ThreeSixtyDataTransferService.ThreeSixtyDataTransferServiceClient threeSixtyDataTransferService = new ThreeSixtyDataTransferService.ThreeSixtyDataTransferServiceClient())
            {
                        var test =threeSixtyDataTransferService.Test("Test");//works    
                        threeSixtyDataTransferService.AttachPhotoToDataItem(Guid.NewGuid(), uploadStream);//400
            }
 } 
```

非常感谢任何帮助

# java - 如何让 Java MANIFEST.MF 包含 Maven 版本号

> ID：12533318
> 
> 赞同：20
> 
> 时间：2012-09-21T15:14:18.317
> 
> 标签：java, maven, version, manifest

我的项目的 pom.xml 中有以下内容，我认为应该显示生成的 WAR 文件中使用的 Maven 版本：

```
<build>
...
    <plugins>
        ...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>false</addClasspath>
                    </manifest>
                    <manifestEntries>
                        <Build-Time>${maven.build.timestamp}</Build-Time>
                        <Build-Host>${agent.name}</Build-Host>
                        <Build-User>${user.name}</Build-User>
                        <Build-Maven>Maven ${maven.version}</Build-Maven>
                        <Build-Java>${java.version}</Build-Java>
                        <Build-OS>${os.name}</Build-OS>
                        <Build-Label>${project.version}</Build-Label>
                        <Build-Path>${basedir}</Build-Path>
                    </manifestEntries>
                </archive>
            </configuration>
        </plugin>
        ...
    </plugins>
...
</build> 
```

创建的 MANIFEST.MF 看起来是正确的，请参见下面的 Build-Maven 行，其中 ${maven.version} 在这种情况下没有被实际版本号 3.0.4 替换。

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: stocjon
Build-Jdk: 1.6.0_35
Build-Host: 
Build-Java: 1.6.0_35
Build-Label: 1.0.0-SNAPSHOT
Build-Maven: Maven ${maven.version}
Build-OS: Windows XP
Build-Path: C:\Development\project_name
Build-Time: 15:38:50 21-Sep-2012
Build-User: user_name 
```

任何想法为什么没有在 MANIFEST.MF 中填充 Maven 版本？

帮助将不胜感激。

谢谢乔恩

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T15:20:23.980

您需要添加此插件：

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>build-helper-maven-plugin</artifactId>
<version>1.5</version>
  <executions>
    <execution>
      <phase>validate</phase>
      <goals>
        <goal>maven-version</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

[在这里](http://matthiaswessendorf.wordpress.com/2011/01/27/howto-add-the-maven-version-number-to-the-manifest-mf-file/)查看详细信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-19T09:57:57.140

我们不再需要**build-helper-maven-plugin**，因为该功能 ( [MSHARED-38](http://jira.codehaus.org/browse/MSHARED-38) ) 已添加到组件**maven-archiver : 2.5**于 2012 年 2 月（[发行说明](http://jira.codehaus.org/browse/MSHARED/fixforversion/17630)）。

这个组件被 Maven 插件使用，如*maven-jar-plugin*、*maven-war-plugin*、*maven-ear-plugin*等。

使用此功能的这些插件的版本是：

*   maven-jar-plugin：**2.4** ( [MJAR-148](http://jira.codehaus.org/browse/MJAR-148) )，2012 年 2 月发布
*   maven-war-plugin : **2.2** ( [MWAR-273](http://jira.codehaus.org/browse/MWAR-273) )，2012 年 2 月发布
*   maven-ear-plugin：**2.8**（[MEAR-145](http://jira.codehaus.org/browse/MEAR-145)），2012 年 9 月发布
*   maven-assembly-plugin : **2.4** ( [MASSEMBLY-634](http://jira.codehaus.org/browse/MASSEMBLY-634) )，2012 年 11 月发布
*   maven-ejb-plugin：**2.4**（[MEJB-56](http://jira.codehaus.org/browse/MEJB-56)），编辑：24/Aug/14 发布
*   等等

因此，现在我们将在存档的 manifest.mf 中默认包含此条目：

> 创建者：Apache Maven ${maven.version}

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-04T16:44:24.987

为了完整性 - 这对我有用：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.1</version>
    <configuration>
      <archive>
        <manifest>
          <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
        </manifest>
      </archive>
    </configuration>
  </plugin> 
```

这放入了我的清单 -

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: Old.Curmudgeon
Build-Jdk: 1.5.0_22
Implementation-Title: JarFileName-1.0.2
Implementation-Version: 1.0.2
Implementation-Vendor-Id: our.id 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-23T12:19:32.650

至少从 maven-jar 插件的 2.4 版本开始，默认情况下将以下条目添加到 jar 中 META-INF 中的 MANIFEST.MF 文件中：

```
 Manifest-Version: 1.0
 Archiver-Version: Plexus Archiver
 Built-By: abcUser
 Created-By: Apache Maven 3.3.3
 Build-Jdk: 1.8.0_77 
```

要添加项目版本和其他实现细节，只需将以下内容添加到 maven-jar-plugin（在 pluginManagement 部分或 build -> plugins 部分中：

```
 <plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-jar-plugin</artifactId>
     <version>2.4</version>
     <configuration>
         <archive>
             <manifest>
                 <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
             </manifest>

         </archive>
     </configuration>
 </plugin> 
```

要添加诸如构建时间之类的内容，请添加以下内容：

```
 <plugin>
     <groupId>org.apache.maven.plugins</groupId>
     <artifactId>maven-jar-plugin</artifactId>
     <version>2.4</version>
     <configuration>
         <archive>
             <manifest>
                 <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
             </manifest>
             <manifestEntries>
                 <Build-Time>${maven.build.timestamp}</Build-Time>                            
             </manifestEntries>
         </archive>
     </configuration>
 </plugin> 
```

`<properties>`可以通过使用pom.xml 部分中的以下属性来更改构建时格式：

```
<maven.build.timestamp.format>yyyy-MM-dd HH:mm z</maven.build.timestamp.format> 
```

以上所有内容的输出类似于：

```
Manifest-Version: 1.0
Implementation-Title: UI
Implementation-Version: 2.0.5-SNAPSHOT
Archiver-Version: Plexus Archiver
Built-By: abcUser
Implementation-Vendor-Id: com.xyz.abc.dbe
Build-Time: 2016-12-23 12:04 UTC
Created-By: Apache Maven 3.3.3
Build-Jdk: 1.8.0_77
Implementation-Vendor: XYZ Corporation 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-30T09:17:46.977

看看它是如何建议的`jcabi-manifests`： http: [//manifests.jcabi.com/versioning.html](http://manifests.jcabi.com/versioning.html)

此外，有关更多详细信息，请参阅此博客文章：[http ://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html](http://www.yegor256.com/2014/07/03/how-to-read-manifest-mf.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T15:52:42.433

为了获得构建机器，我添加了以下插件：

```
<plugin>
    <groupId>org.codehaus.groovy.maven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <executions>
        <execution>
            <phase>generate-resources</phase>
            <goals>
                <goal>execute</goal>
            </goals>
            <configuration>
                <source>project.properties["hostname"] = InetAddress.getLocalHost().getHostName()</source>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

然后我可以通过 ${hostname} 检索主机名。

# asp.net-mvc - 当用户单击主视图上的按钮时，如何显示附加的局部视图？

> ID：12533324
> 
> 赞同：2
> 
> 时间：2012-09-21T15:14:30.580
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想单击“主视图”上的按钮并以自己的 . 更新

我有一个主要观点：

```
 @{
using (Ajax.BeginForm("PastClaims", "Claim", FormMethod.Post, new AjaxOptions { UpdateTargetId = "update_panel", InsertionMode = InsertionMode.Replace }, new { @class = "form-horizontal" }))
{
    <legend>Submit a Claim</legend>
    @Html.EditorForModel()
    <div class="controls">
        <input id="btnCheckForClaims" type="submit" class="btn btn-primary" value="Submit Claim" />
    </div>

    } 
```

我需要单击提交按钮，然后显示另一个视图：如果我在下面这样做，那么在初始加载的页面上它会显示 div

```
 <div id="update_panel">@Html.Partial("PastClaims")</div> 
```

如果我将 div 留空，那么我会得到一个新的局部视图。

```
 <div id="update_panel"></div> 
```

如果我像 darrin 建议的那样让它们为空：

```
using (Ajax.BeginForm("PastClaims", "Claim", FormMethod.Post, new AjaxOptions { UpdateTargetId = "update_panel", InsertionMode = InsertionMode.Replace }, new { @class = "form-horizontal" })) 
```

我被重定向到同一页面（我想要的），但未显示额外的部分视图。

感谢下面的 Darrin 让我走到这一步。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:22:50.347

`Ajax.BeginForm`在这种情况下，您可以使用 an ：

```
@using (Ajax.BeginForm(null, null, new AjaxOptions { UpdateTargetId = "update_panel", InsertionMode = InsertionMode.Replace }, new { @class = "form-horizontal"}))
{
    @Html.EditorForModel()
    <div class="controls">
        <input id="btnOpenPartialView" type="submit" class="btn btn-primary" value="OpenPartialView" />
    </div>
}

<div id="update_panel">
    @Html.Partial("PartialView")
</div> 
```

然后相应的控制器动作将返回部分视图：

```
[HttpPost]
public ActionResult SomeAction() 
{
    // some processing ...
    return PartialView("PartialView");
} 
```

为了`Ajax.*`帮助工作人员不要忘记包含`jquery.unobtrusive-ajax.js`脚本：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:25:12.290

`@Html.Partial`是服务器代码，如果你想在提交后加载部分，那么试试这个：

```
$("form").on('submit', function(event){
    event.preventDefault();
    var form = $(this);

    $.ajax({
       url: form.attr('action'),
       type: form.attr('method'),
       data: form.serialize(),
       success: function(r) {
           $('#update_panel').html(r);
       }
    });
}); 
```

# c - Clang C编译器'class'关键字保留？

> ID：12533326
> 
> 赞同：6
> 
> 时间：2012-09-21T15:14:47.773
> 
> 标签：c, xcode, ffmpeg, clang

嗨，我正在使用 xcode 编译 ffmpeg，我相信它使用 clang 进行编译。在 ffmpeg 中有一个带有名为“class”的成员变量的结构，我相信这在 C 中非常好，但 clang 正试图将其解析为关键字。知道如何解决吗？基本上cpp文件中的以下内容会导致错误：

```
extern C {
    typedef struct {
        int class;
    } SomeStruct;
} 
```

它试图将类解释为关键字。

仅供参考，在 ffmpeg 中引发错误的文件是 libavcodec/mpegvideo.h，我需要包含它才能访问 MpegEncContext 结构以提取运动图信息。

*编辑*

上面的代码示例只是为了演示错误。但也许它可以通过另一种方式修复。在我的实际代码中，我有这样的：

```
#ifdef __cplusplus
extern "C" {
#endif

    #include "libavcodec/mpegvideo.h"
    #include "libavformat/avformat.h"

#if __cplusplus
} //Extern C
#endif 
```

我如何才能将这两个文件包含为 C 文件而不是 C++？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:20:19.940

在 C 中完全没问题。当您将其构建为 C++ 时，您会遇到错误，因为`class`是 C++ 关键字。

至于修复它，您通常会选择除`class`. 但是，ffmpeg 开发人员可能不太同意这种变化。因此，您可能需要：

*   将该标题的可见性限制为 C 翻译
*   或编辑您自己的副本以便在 C++ 翻译中使用它

幸运的是，在这种情况下，您还使用了对 C99 特性有良好支持的 C 编译器。不能很好地支持 C99 的 C 编译器对于 ffmpeg 源代码特别麻烦（因为您随后会将整个程序编译为 C++ 以获得 C99 功能，并且冲突计数会高得多）。

（您*可以*采取其他肮脏的技巧来尝试解决该问题，但我不会提及它们）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T15:16:19.720

> 基本上cpp文件中的以下内容会导致错误

.cpp 文件作为 C++ 文件处理，而不是 C，并且`class`是 C++ 中的保留字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T15:38:07.767

如果您无法选择重命名这些头文件中的任何内容，则可以将`class`令牌替换为其他内容

```
#ifdef __cplusplus
extern "C" {
# define class videoClass
#endif

    #include "libavcodec/mpegvideo.h"
    #include "libavformat/avformat.h"

#if __cplusplus
# undef class
} //Extern C
#endif 
```

这是一个相当肮脏的 hack，但是对于这样糟糕的接口代码，你没有太多选择。真正的解决方案是让`struct`这些文件中的所有成员都使用带有某种前缀的名称，就像在网络层代码中所做的那样。所有成员都有一些前缀为`ss_`或`sa_`，这样的问题不太可能发生。

# html - 垂直 CSS 下拉菜单

> ID：12533328
> 
> 赞同：1
> 
> 时间：2012-09-21T15:14:51.083
> 
> 标签：html, css, drop-down-menu

我在这里有这个网站[http://surfthecurve.ca/](http://surfthecurve.ca/)我有一个导航每个导航项目有一个下拉菜单，菜单工作正常，我似乎无法让它垂直移动。

这是导航的CSS

```
.navigation{
    width:100%;
    background-color:#353636;
    font-size:18px;
    float:left;
}

.navigation ul {
    list-style-type: none;
    margin: 0 auto;
    width:825px;
}

.navigation li {
    float: left;
}

.navigation ul a {
    color: #ffffff;
    display: block;
    padding: 0 105px 0 0;
    text-decoration: none;
    width:100%;
    text-align:center;
    text-transform:uppercase;
} 
```

和下拉菜单的 CSS

```
.submenu {
    display: none;
}

.submenu li a {
    display: block;
    text-decoration: none;
    color: #ffffff;
    padding: 5px 15px 5px 15px;
    margin-left: 1px;
    white-space: nowrap;
}

.navigation li:hover .submenu {
    display: block;
    position: absolute;
}

.navigation li:hover .submenu li {
    float: left;
    font-size: 13px;
}

ul li a:hover {
background: #353636;
}

li:hover a { 
    background: #353636; 
}

li:hover li a:hover {
    background: #353636;
}

.navigation ul li ul li a{
    padding-left:10px !important;
    padding-right:10px !important;
    padding-top:0px !important;
    padding-bottom:0px !important;
} 
```

这是HTML

```
<div class="navigation">
<ul>

<li><a href="http://surfthecurve.ca/?page_id=9">tutoring</a>
<ul class="submenu">
<li><a href="#">Our Approach</a></li>
<li><a href="#">Pricing</a></li>
</ul>
</li>

<li><a href="http://surfthecurve.ca/?page_id=7">the cause</a>
<ul class="submenu">
<li><a href="#">How It Works</a></li>
<li><a href="#">How We Give</a></li>
<li><a href="#">Why We Give</a></li>
</ul>
</li>

<li><a href="http://surfthecurve.ca/?page_id=11">company</a>
<ul class="submenu">
<li><a href="#">About Us</a></li>
<li><a href="#">Let's Get In Touch</a></li>
</ul>
</li>

<li><a href="http://surfthecurve.ca/?page_id=13">get involved</a>
<ul class="submenu">
<li><a href="#">Students</a></li>
<li><a href="#">Work For Us</a></li>
</ul>
</li>

</ul>
</div><!--navigation--> 
```

我将如何解决这个问题，因为我的菜单是垂直的？

先谢谢了，

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:22:40.190

这应该很容易让它垂直显示：

```
.submenu li {
  clear: both;
} 
```

您现在要做的是设置样式，因为各个 li 元素的大小不同（元素收缩到文本的大小）。

# wcf - WCF 更新服务引用错误

> ID：12533330
> 
> 赞同：1
> 
> 时间：2012-09-21T15:14:55.667
> 
> 标签：wcf, service-reference

我绝望了，我正在尝试将现有服务引用更新为 WCF 服务（共享类型），但我不能。我已经尝试了我在 Google 上找到的所有内容（social.msdn、stackoverflow、...），但我还没有找到解决问题的方法。

我有一个 ServiceContract，我添加了一个新的操作，如下面的代码：

```
[ServiceContract]
public partial interface IServiceDTO : IGenericServiceDTO<EntityDTO>    
{
        // Some OperationContracts working like
        [OperationContract]
        EntityDTO[] Method(int field);

        // NewMethod
        [OperationContract]
        OtherEntityDTO[] NewMethod(int field);
}

[DataContract]
public class EntityDTO {
    // Some properties working
}

[DataContract]
public class OtherEntityDTO {
    // Some properties working
    [DataMember]
    YetAnotherEntity NewProperty {get;set;}
} 
```

当我尝试更新服务引用时，它会抛出以下错误：

> 尝试使用 WS-Metadata Exchange 或 DISCO 从“http://localhost:65499/Services/Acciones/ProcesoServiceDTO.svc”下载元数据。错误：无法导入 wsdl：portType 详细信息：运行 WSDL 导入扩展时引发异常：System.ServiceModel.Description.DataContractSerializerMessageContractImporter 错误：引用类型 'mpm.seg.ServiceModel.DTO.DataContracts.Acciones.ProcesoDTO，mpm.seg。 ServiceModel.DTO.DataContracts，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null'，命名空间'http://schemas.datacontract.org/2004/07/mpm.seg.ServiceModel 中的数据合约名称为'ProcesoDTO'。 DTO.DataContracts.Acciones' 不能使用，因为它与导入的 DataContract 不匹配。需要将此类型从引用的 types.XPath 中排除到错误源：//wsdl:definitions[@targetNamespace='

首先，我不完全理解这句话“...不能使用，因为它与导入的 DataContract 不匹配。” svcutil 如何尝试将引用类型与导入的 DataContract 匹配？我在客户端项目中引用了具有引用类型的项目，因为服务器和客户端在同一个解决方案中，但我尝试将它们分开并引用完全相同的 dll。

另外，例如，当我尝试以下情况时（将“OtherEntityDTO”的“NewProperty”写入EntityDTO），我不明白其中的区别：

```
[ServiceContract]
public partial interface IServiceDTO : IGenericServiceDTO<EntityDTO>    
{
        // Some OperationContracts working like
        [OperationContract]
        EntityDTO[] Method(int field);

        // NewMethod
        [OperationContract]
        OtherEntityDTO[] NewMethod(int field);
}

[DataContract]
public class EntityDTO {
    // Some properties working

    [DataMember]
    YetAnotherEntity NewProperty {get;set;}

}

[DataContract]
public class OtherEntityDTO {
    // Some properties working
} 
```

请帮助我，并提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:48:15.900

我有一个类似的错误，但我的问题似乎有所不同。

我有一个只读属性，并且一直收到该错误。当我将其更改为普通属性并添加一个集合（什么也没做）时，合同运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:37:45.547

抱歉，但在我发布问题后，我发现了问题，这是一个报告的错误（[http://blogs.msdn.com/b/distributedservices/archive/2010/02/04/wcf-client-issue -with-reuse-types-from-referenced-assemblies.aspx?wa=wsignin1.0](http://blogs.msdn.com/b/distributedservices/archive/2010/02/04/wcf-client-issue-with-reuse-types-from-referenced-assemblies.aspx?wa=wsignin1.0)）。另一个开发人员在父类上添加了这个属性（IsReference=true），我不知道。现在我必须解决这个错误，但这是另一场战斗。

无论如何，我不明白为什么有时工作，有时不...

谢谢。

# php - MYSQL 作为带有子查询的查询工作比 2 个查询慢（+php）

> ID：12533332
> 
> 赞同：5
> 
> 时间：2012-09-21T15:15:10.943
> 
> 标签：php, mysql, performance

我有表（大约 80'000 行），看起来像

```
id, parentId, col1, col2, col3...
 1,     null, 'A', 'B', 'C'
 2,        1, ...
 3,        1, ...
 4,     null, ...
 5,        4, ... 
```

（一级父母 - 仅限儿童）

我需要获取所有相关行 -

```
SELECT ... 
FROM table 
WHERE id = :id OR parentId = :id OR id IN (
    SELECT parentId 
    FROM table 
    WHERE id = :id
    ) 
```

但是为什么这个请求工作缓慢而不是 2 请求 - 如果我先在 php 上获得 parentId？

```
$t = executeQuery('SELECT parentId FROM table WHERE id = :Id;', $id);
if ($t) {
    $id = $t;
}

$t = executeQuery('SELECT * FROM table WHERE id = :id OR parentId = :id ORDER BY id;', $id); 
```

PS：最大取决于行 < 70

PP:

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY product ALL PRIMARY,parentId    NULL    NULL    NULL    73415   Using where
2   DEPENDENT SUBQUERY  product const   PRIMARY,parentId    PRIMARY 4   const   1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:33:15.827

更改`IN`为相等`=`

```
SELECT ... 
FROM table 
WHERE id = :id OR parentId = :id OR id = (
    SELECT parentId 
    FROM table 
    WHERE id = :id
    ) 
```

或将其更改为联接：

```
SELECT ... 
FROM table 
    inner join ( 
        SELECT parentId 
        FROM table 
        WHERE id = :id
    ) s on s.parentID = table.id or s.parentID = table.parentID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:29:15.553

好吧，在第一种情况下，MySQL 需要创建一个中间结果，将其存储在内存中，然后对其进行迭代以查找表中所有相关的 id。在第二种方式中，假设您正确地在 id 和 parent id 上创建了一个索引，它只是直接找到索引，找到相关的行，然后立即将结果发回给您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:15:32.360

UNION 在这种情况下工作得更快

这允许第一次查询用户 UNION INDEX，第二次只使用内部联接，然后合并结果。

```
SELECT *
FROM `table` 
WHERE id = :id OR parentId = :id
UNION
SELECT t1.*
FROM `table` t1 JOIN `table` t2 ON t2.parentId = t1.id AND t2.id = :id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:28:28.593

这是一个很长的镜头，但在第一种情况下，您有查询的 WHERE 部分的“IN”语句。也许 MySQL 会尝试优化查询，就好像有多个选项一样，而在第二种情况下，没有 IN 部分，所以编译后的查询对于数据库来说更直接——从而以更好的方式利用索引。

基本上，对于同一连接上的 2 个查询，执行查询的开销在这种情况下应该是最小且无关紧要的。查询解析器通常也不能很好地优化子查询。尝试使用 JOIN 代替（如果可能）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T15:30:33.820

一个`EXPLAIN`可能会为您提供更多关于这个问题的信息。

查看`EXISTS`或将您的查询重写为`JOIN`.

# php - Eclipse 内容辅助行为。可以更像 Apatana 还是 phpEdit

> ID：12533333
> 
> 赞同：0
> 
> 时间：2012-09-21T15:15:15.603
> 
> 标签：php, eclipse, content-assist

我正在尝试切换到 Eclipse 并且在大多数情况下我很高兴，但是这是一种对我来说非常麻烦的行为。假设我正在调用函数

富 (arg1, arg2, arg3, arg4)

当我输入 foo( - 函数洞察力弹出并显示参数列表。

一旦我开始输入第一个参数的值，它就会消失。现在我必须用鼠标将鼠标悬停在函数名上才能看到下一个参数。

我来自 PHPEdit，在那个系统中，它会在我键入时突出显示每个参数，并且不需要我离开键盘来使用鼠标，这很烦人。

有没有可以调整的设置或者我坚持这个？我注意到 apatana 工作室按照我想要的方式工作。也许是某种插件？

我想喜欢日食，但这是一个交易破坏者（必须使用鼠标）。我确定这只是因为我不明白。我尝试按 ctrl+space 并没有显示参数列表。

我遇到的另一个问题是功能洞察力似乎对它何时决定出现很挑剔。我将输入 $string = str_replace 并且它不会显示。我将简单地删除 str_replace 并再次开始输入，它可能会或可能不会出现第二次（它不会出现大约 40% 的时间）

好，谢谢。希望我们能解决这个问题，因为我确实喜欢这个平台的一些功能。

--EDIT-- 版本是 4.2.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:15:45.470

我刚刚用 Eclipse 4.2 Java 编辑器尝试了这个。

如果您在键入参数后按 Enter 键，则会在工具提示中显示下一个参数。

让我知道它是否适用于 PHP。

# php - PHP/MYSQL while 循环只显示最后一条记录

> ID：12533335
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:15:28.703
> 
> 标签：php

我有这个代码：

```
include('config.php');

$result = mysql_query("SELECT * FROM system");
while($row = mysql_fetch_array( $result )) {
    $name_system = $row['name'];
    $value_system = $row['value'];

    if($name_system=='website_register' AND $value_system==1)
        {$register_system = 1;}
    else
        {$register_system = 0;}

    if($name_system=='website_offline' AND $value_system==1)
        {$offline_system = 1;}
    else
        {$offline_system = 0;}
} 
```

我的问题是循环只显示“系统”表中的最后一条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:18:59.210

> 我的问题是循环仅显示最后一条记录

不，问题在于循环没有显示*任何内容*。显示随后发生，在循环之外的代码中，因此只执行一次，当光标浏览整个表并且只有最后一行保留`$row`打印时。

*在循环内*`echo`移动执行or`print`或任何操作的代码，它就会工作。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:18:49.863

这是草率的，但它会告诉你在循环中发生了什么：

```
include('config.php');

$result = mysql_query("SELECT * FROM system");
while ($row = mysql_fetch_array($result)) {
    $name_system = $row['name'];
    $value_system = $row['value'];

    if($name_system=='website_register' AND $value_system==1)
    {$register_system = 1;}
    else
    {$register_system = 0;}

    if($name_system=='website_offline' AND $value_system==1)
    {$offline_system = 1;}
    else
    {$offline_system = 0;}

    print "$name_system, $value_system, $register_system, $offline_system<br />";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:19:14.060

您的问题是您每次都在同一个变量上覆盖最后一个值。相反，将其添加为数组中的新单元格。例如每个地方而不是做

```
$register_system = 1; 
```

做

```
$register_system[] = 1; 
```

最后，您可以`print_r($register_system)`看到所有的价值。您会注意到数组的键是 0,1,... 您可以考虑使用`$row['name']`作为键，如下所示：

```
$register_system[$row['name']] = 1 
```

当然，假设这些是不同的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T15:19:14.167

`echo/print`需要在循环内。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T15:20:25.117

尝试在必要的地方使用 break ......

使用标志变量的逻辑...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T15:21:32.670

您可能希望将您的项目存储到一个数组中。

```
$result = mysql_query("SELECT * FROM system");
while($row = mysql_fetch_array( $result )) {
    $name_system[] = $row['name'];
    $value_system[] = $row['value'];

    if($row['name']=='website_register' AND $row['value']==1)
        {$register_system[] = 1;}
    else
        {$register_system[] = 0;}

    if($row['name']=='website_offline' AND $row['value']==1)
        {$offline_systemp[] = 1;}
    else
        {$offline_system[] = 0;}
} 
```

这样，您可以通过执行以下操作打印出每个值：

```
for ($i = 0; $i < count($name_system); $i++) {
    echo 'Name system is: '.$name_system[$i];
} 
```*

# testing - 没有设置 X11 DISPLAY 变量，但是这个程序执行了一个需要它的操作

> ID：12533339
> 
> 赞同：3
> 
> 时间：2012-09-21T15:15:36.510
> 
> 标签：testing, cloudbees

我有一些最近失败的测试，原因如下：没有设置 X11 DISPLAY 变量，但是这个程序执行了一个需要它的操作。

这是完整的堆栈跟踪：

```
testGetDialog(simple.marauroa.application.core.IAddApplicationDialogProviderTest)  Time elapsed: 112 sec  <<< ERROR!
java.awt.HeadlessException: 
No X11 DISPLAY variable was set, but this program performed an operation which requires it.
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
    at java.awt.Window.<init>(Window.java:431)
    at java.awt.Frame.<init>(Frame.java:403)
    at java.awt.Frame.<init>(Frame.java:368)
    at javax.swing.SwingUtilities$SharedOwnerFrame.<init>(SwingUtilities.java:1733)
    at javax.swing.SwingUtilities.getSharedOwnerFrame(SwingUtilities.java:1810)
    at javax.swing.JDialog.<init>(JDialog.java:253)
    at javax.swing.JDialog.<init>(JDialog.java:187)
    at javax.swing.JDialog.<init>(JDialog.java:135)
    at simple.marauroa.application.core.IAddApplicationDialogProviderTest$IAddApplicationDialogProviderImpl.getDialog(IAddApplicationDialogProviderTest.java:97)
    at simple.marauroa.application.core.IAddApplicationDialogProviderTest.testGetDialog(IAddApplicationDialogProviderTest.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75) 
```

在提到的代码行中就是这样：

```
return new JDialog(); 
```

我猜这与没有启用某些东西的 Jenkins 环境有关。如何解决这个问题？

我可以禁用该测试，但为什么要禁用呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T09:49:50.357

您需要使用 XVNC（或 XVFB）在虚拟（无头）图形环境中运行构建。请参阅[wiki.cloudbees.com/bin/view/DEV/Testing+GUI+applications](http://wiki.cloudbees.com/bin/view/DEV/Testing+GUI+applications)。

* * *

**编辑 20/01/2016：**

上面的链接不再将您带到包含相关信息的页面。此链接显示当时的页面：[https ://web.archive.org/web/20120717015714/http://wiki.cloudbees.com/bin/view/DEV/Testing+GUI+applications](https://web.archive.org/web/20120717015714/http://wiki.cloudbees.com/bin/view/DEV/Testing+GUI+applications)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T15:06:45.993

您可能还考虑重构您的代码以使用模拟服务，以便测试不需要加载 AWT。这可能会使测试更快、更可靠，并最大限度地减少它们在 CI 服务器等新环境中失败的可能性。

# opencv - 读取像素值方法？

> ID：12533343
> 
> 赞同：0
> 
> 时间：2012-09-21T15:15:48.070
> 
> 标签：opencv

我在读取像素值（w=30，h=10）时遇到问题。假设我正在使用

1.  int readValue = cvGetReal2D(img,y,x); 和
2.  int readValue = data[y*step+x];

假设我正在尝试使用 (1) 和 (2) 方法访问 w=35、h=5 的像素值。(1) 将输出索引超出范围的错误。但是为什么（2）不输出 index out of range 的错误呢？

之后，我尝试使用 try...catch()...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:43:48.337

你有一个连续的记忆块

```
size  = w*h = 300 
```

在 w = 35 和 h = 5 时，您的等式给出

```
data[5*30+35] = data[190] < data[300] 
```

所以没有错误。如果这是 c++，那么即使您的数据索引大于 299，它也不会引发错误。在这种情况下，您将访问超出其界限的数据，从而导致未定义的行为。

我假设 cvGetReal2D(img,y,x) 足够聪明，可以告诉您其中一个索引大于该维度的定义大小，即使它可以解析为有效地址。

# java - 证明 SimpleDateFormat 不是线程安全的

> ID：12533345
> 
> 赞同：5
> 
> 时间：2012-09-21T15:16:02.793
> 
> 标签：java, multithreading

我想通过一个简单的 JUnit 测试向同事展示 SimpleDateFormat*不是*线程安全的。以下课程未能说明我的观点（在多线程环境中重用 SimpleDateFormat），我不明白为什么。你能发现是什么阻止我使用 SDF 引发运行时异常吗？

```
public class SimpleDateFormatThreadTest
{
    @Test
    public void test_SimpleDateFormat_MultiThreaded() throws ParseException{
        Date aDate = (new SimpleDateFormat("dd/MM/yyyy").parse("31/12/1999"));
        DataFormatter callable = new DataFormatter(aDate);

        ExecutorService executor = Executors.newFixedThreadPool(1000);
        Collection<DataFormatter> callables = Collections.nCopies(1000, callable);

        try{
            List<Future<String>> futures = executor.invokeAll(callables);
            for (Future f : futures){
                try{
                    assertEquals("31/12/1999", (String) f.get());
                }
                catch (ExecutionException e){
                    e.printStackTrace();
                }
            }
        }
        catch (InterruptedException e){
            e.printStackTrace();
        }
    }
}

class DataFormatter implements Callable<String>{
    static SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");

    Date date;

    DataFormatter(Date date){
        this.date = date;
    }

    @Override
    public String call() throws RuntimeException{
        try{
            return sdf.format(date);
        }
        catch (RuntimeException e){
            e.printStackTrace();
            return "EXCEPTION";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T15:19:07.960

缺乏线程安全并不一定意味着代码会抛出异常。Andy Grove 的文章[SimpleDateFormat 和 Thread Safety](http://www.codefutures.com/simpledateformat-and-thread-safety/)对此进行了解释，该文章不再在线提供。在其中，他`SimpleDateFormat`通过表明在给定不同输入的情况下输出并不总是正确的，从而表明缺乏线程安全性。

> 当我运行此代码时，我得到以下输出：
> 
> ```
>  java.lang.RuntimeException: date conversion failed after 3 iterations.
>     Expected 14-Feb-2001 but got 01-Dec-2007 
> ```
> 
> 请注意，“01-Dec-2007”甚至不是测试数据中的字符串之一。它实际上是其他两个线程正在处理的日期的组合！

虽然原始文章不再在线提供，但以下代码说明了该问题。它是根据似乎是基于 Andy Grove 最初文章的文章创建的。

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;
import java.util.Locale;

public class SimpleDateFormatThreadSafety {
    private final SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MMM-yyyy", Locale.US);

    public static void main(String[] args) {
        new SimpleDateFormatThreadSafety().dateTest(List.of("01-Jan-1999", "14-Feb-2001", "31-Dec-2007"));
    }

    public void dateTest(List<String> testData) {
        testData.stream()
                .map(d -> new Thread(() -> repeatedlyParseAndFormat(d)))
                .forEach(Thread::start);
    }

    private void repeatedlyParseAndFormat(String value) {
        for (int i = 0; i < 1000; i++) {
            Date d = tryParse(value);
            String formatted = dateFormat.format(d);
            if (!value.equals(formatted)) {
                throw new RuntimeException("date conversion failed after " + i
                        + " iterations. Expected " + value + " but got " + formatted);
            }
        }
    }

    private Date tryParse(String value) {
        try {
            return dateFormat.parse(value);
        } catch (ParseException e) {
            throw new RuntimeException("parse failed");
        }
    }
} 
```

有时此转换会因返回错误的日期而失败，有时会因以下原因而失败`NumberFormatException`：

```
java.lang.NumberFormatException: For input string: ".E2.31E2" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T15:20:11.823

[javadoc的`SimpleDateFormatter`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)这部分不是有足够的证据吗？

> 同步
> 
> *日期格式不同步。建议为每个线程创建单独的格式实例。如果多个线程同时访问一个格式，它必须在外部同步。*

**不是线程安全的主要观察是得到意想不到的结果，而不是异常。**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T15:27:44.210

`SimpleDateFormat`由于（在 sun JVM 1.7.0_02 中）中的以下代码，它不是线程安全的：

```
private StringBuffer format(Date date, StringBuffer toAppendTo,
                            FieldDelegate delegate) {
    // Convert input date to time field list
    calendar.setTime(date);
    ....
} 
```

对 format 的每次调用都将日期存储在 的`calendar`成员变量中`SimpleDateFormat`，然后随后将格式应用于`calendar`变量的内容（而不是`date`参数）。

因此，当每次调用 format 时，所有当前运行的格式的数据都可能会改变（取决于架构的一致性模型）`calendar`每个其他线程使用的成员变量中的数据。

因此，如果您对 format 运行多个并发调用，您*可能*不会遇到异常，但每个调用*都可能*返回从其他调用 format 的日期派生的结果 - 或来自许多不同调用 format 的数据的混合组合。

# java - Java EE SDK 安装是否需要 Java SE SDK 或 JRE？

> ID：12533351
> 
> 赞同：1
> 
> 时间：2012-09-21T15:16:27.347
> 
> 标签：java, jakarta-ee, installation

我想在 64 位 Linux 上开发 Java EE 应用程序。我想安装最新的 linux 64 位 Java EE SDK。我需要先安装 Java SE SDK 吗？或者也许只有 Java SE JRE 首先？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:08:14.633

Java EE includes Java SE. If you install Java SE first then the Java EE installer will skip installing Java SE (since you already have it).

# jquery - jquery .find 使用数组元素时

> ID：12533354
> 
> 赞同：0
> 
> 时间：2012-09-21T15:16:31.763
> 
> 标签：jquery

这是一个代码示例：

```
$('#TBI tr.k-state-selected')[0].cells[0].find("input").val(selectedId).change(); 
```

我实际上是在尝试更改 KendoUI 网格上单元格的值。但由于某种原因，它在.find 上给了我一个“对象不支持这种方法”。

如果我这样做：

```
$('#TBI tr.k-state-selected').find("input").val(selectedId).change(); 
```

它没有给我错误（但也不是我想要的结果）。当我把数组元素拿走时，从语法的角度来看似乎很好。

所以我的问题变成了：当涉及到数组元素时，我该如何进行这样的查找。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:17:44.513

如果我遵循您的伪代码逻辑，您可能想要

```
$('#TBI tr.k-state-selected:eq(0) td:eq(0) input').val(selectedId).change(); 
```

那是 ：

第一行的第一个单元格中的输入，在 id TBI 的元素中选择了类 k-state-selected。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:20:31.403

我不认为`cell[0]`它是一个 jQuery 对象，所以你不能在它上面调用一个 jQuery 方法。

尝试再次将其包装到 jQuery 对象中

```
var $cell = $($('#TBI tr.k-state-selected')[0].cells[0]);

$cell.find("input").val(selectedId).change(); 
```

或者当然，修复您的选择器以返回所需的元素以开头，如`dystroy`'s answer 将省去再次包装它的麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:18:23.477

尝试使用[**eq**](http://api.jquery.com/eq/) jquery 函数来获取 jquery 对象，而不是通过使用获取 javascript 对象`[0]`

**[现场演示](http://jsbin.com/uqalif/3/edit)**

```
$('#TBI tr.k-state-selected').eq(0).find("td:eq(0) input").val(selectedId).change(); 
```

# python - 在 Python 脚本中找出当前的 linux 运行级别

> ID：12533362
> 
> 赞同：0
> 
> 时间：2012-09-21T15:16:56.590
> 
> 标签：python, linux, runlevel

我想知道知道我（嗯...我的 Python 脚本）所在的[运行级别](http://en.wikipedia.org/wiki/Runlevel#Linux_Standard_Base_specification)的最佳方法（如果有的话）是什么。（你知道... 0--> Halting，1--> Single user , 2345--> 常规运行的种类, 6 --> 重新启动)

我一直在查看`os, sys`和`subprocess`库，但它们似乎都没有返回执行运行级别的任何内容。

我知道我可以执行系统的`runlevel`命令，但如果 Python 没有更多的东西……“本机”，我会感到惊讶。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:25:45.003

我猜你被困在使用'runlevel'命令，没有Python原生的。结果无论如何都是无用的，因为它取决于分布。某些发行版对同一数字实现了另一种含义。所以这方面没有标准化。

# javascript - JavaScript style.height 无意间晃动

> ID：12533363
> 
> 赞同：0
> 
> 时间：2012-09-21T15:17:03.840
> 
> 标签：javascript, css, transition

[http://stadskoll.nu/restaurang.php](http://stadskoll.nu/restaurang.php)

如果您按下灰色字体的名为**Visa/dölj mer information**的文本字符串，您会看到出现的效果是晃动。这不是故意的，我无法弄清楚出了什么问题。

为了澄清，我想知道是什么导致了这种“摇晃”的效果并能够将其移除。

**HTML：**

```
<!--VAL1-->
<div id="val1">
    <div id="information">
        <namn>
            <a href=""></a>
        </namn>
        <br>
        <a id="funktion" onclick="toggle('val1');toggleoff_val1('val1');">visa/dölj mer information</a>
        <br>
        <div id="star2" style="background-position:0 -0px">
            <div id="stars1">
                <div class="first"  onmouseover="starmove('-32px','stars1')" onmouseout="starnormal('stars1')" onclick="rate('','1');succes()"></div>
                <div class="first" onmouseover="starmove('-64px','stars1')" onmouseout="starnormal('stars1')" onclick="rate('','2');succes()"></div>
                <div class="first" onmouseover="starmove('-96px','stars1')" onmouseout="starnormal('stars1')" onclick="rate('','3');succes()"></div>
                <div class="first" onmouseover="starmove('-128px','stars1')" onmouseout="starnormal('stars1')" onclick="rate('','4');succes()"></div>
                <div class="first" onmouseover="starmove('-160px','stars1')" onmouseout="starnormal('stars1')" onclick="rate('','5');succes()"></div>
            </div>
        </div>
        <div id="txt"></div>
        <br>
        <br>
        <information></information>
    </div>
    <div id="bilder">
        <a href = "javascript:void(0)" onclick="popup('bildval1');fade('fadebild1')"><img src="" /></a>
        <br/>
        <a href = "javascript:void(0)" onclick="popup('kartaval1');fade('fadekarta1')"><img src="http://stadskoll.nu/bilder/karta.jpg" /></a>
    </div>
</div> 
```

**CSS：**

```
#val1 {
    width:83%;
    height:75px;
    border-top:1px;
    border-top-style:groove;
    margin-left:40px;
    overflow:hidden;
    padding-top:10px;
    padding-left:20px;
    -webkit-transition: all 0.5s ease-in-out;    
    transition: height 0.5s ease-in-out;
    -moz-transition: all 0.5s ease-in-out; /* Firefox 4 */
    -o-transition: all 0.5s ease-in-out; /* Opera */                
} 
```

**JavaScript：**

```
<script>   
    function toggle(id) {
       var e = document.getElementById(id);
       if(e.style.height == '175px')
          e.style.height = '75px';
              else
          e.style.height = '175px';         
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:55:13.700

问题似乎出`display:inline`在 maincontentbox 上。如果你添加`vertical-align:top`它会消失。

我相信正在发生的事情是，由于默认情况下它与基线对齐，浏览器正在使 div 更高。由于 div 更高，它必须调整父容器的大小，然后将 div 移动到行的底部。

# ckeditor - ckeditor 3 按属性查找元素

> ID：12533364
> 
> 赞同：0
> 
> 时间：2012-09-21T15:17:09.503
> 
> 标签：ckeditor

使用 CKEditor 3.x

我正在捕获编辑器上的“saveSnapshot”事件，以将“click”事件绑定到具有特殊属性的 div，例如：(data-type="notes")。我只找到了 document.getById()。由于文档中可能存在重复，我无法使用 ID。除了id，还有什么方法可以搜索吗？

我也尝试过使用过滤器，但未能以这种方式绑定“点击”事件（使用 extjs 和 jquery）..它是不同类型的元素对象（内部）

```
editor.dataProcessor.htmlFilter.addRules(
                {
                    elements :
                    {
                        div : function( element )
                        {
                            if (element.attributes.data-notes) {}

                        }
                    }
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T06:37:42.373

```
var arr = CKEDITOR.instances.editor1.document.$.getElementsByClassName("ponymagic"); 
arr[0];
arr[0].onclick = function() {console.log("Magical pony time")}; 
```

你可能不得不循环那个。我知道，这不是最佳选择，但这是一个开始，直到您找到更好的选择（如果需要）。

# sql - 计数具有特定日期值的记录

> ID：12533365
> 
> 赞同：1
> 
> 时间：2012-09-21T15:17:10.580
> 
> 标签：sql, sql-server, stored-procedures

我想获取特定日期输入的所有记录，例如今天：

![我的桌子](../Images/6a595e7ca19b6294c4da7e16b647ca51.png)

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE]
    @date nvarchar = '2012-09-21'
AS
BEGIN
    declare @dateStart nvarchar(50) = @date + ' 00:00:00.0'
    declare @dateEnd nvarchar(50) = @date + ' 23:59:59.437';
    declare @returnData table (allQueue int,inQueue int,outQueue int)

    SELECT 'table1' as table_name, COUNT(*) 
    FROM   Queue as Counts

    UNION ALL

    SELECT 'table2' as table_name,COUNT(*) FROM Queue as Counts 
    WHERE   QueueDate BETWEEN @dateStart AND @dateEnd 
    AND     QueueNumIn != 0

END 
```

**编辑：** 我现在编辑了我的代码：

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE]
AS
BEGIN
    declare @date2 datetime
    set @date2= '2012-09-21'

    SELECT 'AllQueue' as table_name, COUNT(*) 
    FROM    Queue as sdfds

    UNION ALL

    SELECT 'InQueue' as table_name,COUNT(*) 
    FROM    Queue as sdfds 
    WHERE   QueueDate >=@date2 
    AND     QueueNumIn != 0

    UNION ALL

    SELECT 'OutQueue' as table_name, COUNT(*) FROM  Queue as sdfds 
    WHERE   QueueDate >=@date2 
    AND     QueueNumOut != 0

END 
```

它返回三个记录： ![结果](../Images/a1809086352667ea4f5697ad319464c5.png)

一个问题是第二列没有名称。为什么？另外，我只想返回一条包含三行的记录，而不是包含 2 个字段的 3 条单独记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:20:58.240

如果您只想要特殊日期的那些，不知道为什么要全部退回。

另外，最好不要在日期之间使用

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE]
@date datetime = '2012-09-21'
AS
BEGIN

select count(*) as 'AllQueue' ,
sum(case when QueueDate >=@date and QueueNumIn != 0 THEN 1 else 0 end) as 'InQueue',
sum(case when QueueDate >=@date and QueueNumOut != 0 THEN 1 else 0 end) as  'OutQueue'
from Queue
END 
```

这应该有效。

这会给你类似的东西

```
Allqueue              inqueue,      outqueue
----------------------------------------------------
    11      |             8        |   10 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:31:23.880

您需要将您的 varchar 转换为日期时间。我想你想给`Counts`Count(*) 分配别名

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE] 
@date nvarchar = '2012-09-21' 
AS 
BEGIN 
declare @dateStart DATETIME = CAST(@date AS DATETIME) 
declare @dateEnd DATETIME = DATEADD(hh,24,CAST(@date AS DATETIME))
declare @returnData table (allQueue int,inQueue int,outQueue int) 
select 'table1' as table_name,COUNT(*) as Counts  from QUEUE AS tb1 
union all 
select 'table2' as table_name,COUNT(*) as Counts from QUEUE AS tb2  where QueueDate >=  @dateStart  and QueueDate  < @dateEnd and QueueNumIn !=0 
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:25:26.627

此代码有效并且是来自 ElVieejo 的编辑代码

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE]
AS
BEGIN
declare @date2 datetime
set @date2= '2012-09-21'
select COUNT(QueueID) ,
sum(case when QueueNumIn != 0 THEN 1 else 0 end) as 'InQueue',
sum(case when QueueNumOut != 0 THEN 1 else 0 end) as  'OutQueue'
from Queue where QueueDate >= @date2
END 
```

# c# - 区分 KeyboardHook 中的两个键盘

> ID：12533367
> 
> 赞同：1
> 
> 时间：2012-09-21T15:17:14.540
> 
> 标签：c#, keyboard-hook

我得到了这个程序：

[https://docs.microsoft.com/en-us/archive/blogs/toub/low-level-keyboard-hook-in-c](https://docs.microsoft.com/en-us/archive/blogs/toub/low-level-keyboard-hook-in-c)

```
using System;
using System.Diagnostics;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace KeyboardInput
{
    class InterceptKeys
    {
        private delegate IntPtr LowLevelKeyboardProc(int nCode, IntPtr wParam, IntPtr lParam);

        private const int WH_KEYBOARD_LL = 13;
        private const int WM_KEYDOWN = 0x0100;
        private static LowLevelKeyboardProc _proc = HookCallback;
        private static IntPtr _hookID = IntPtr.Zero;

        static void Main(string[] args)
        {
            _hookID = SetHook(_proc);
            Application.Run();
            UnhookWindowsHookEx(_hookID);
        }

        private static IntPtr SetHook(LowLevelKeyboardProc proc)
        {
            using (Process curProcess = Process.GetCurrentProcess())
            using (ProcessModule curModule = curProcess.MainModule)
            {
                return SetWindowsHookEx(WH_KEYBOARD_LL, proc,
                    GetModuleHandle(curModule.ModuleName), 0);
            }
        }

        private static IntPtr HookCallback(int nCode, IntPtr wParam, IntPtr lParam)
        {
            if (nCode >= 0 && wParam == (IntPtr)WM_KEYDOWN)
            {
                int vkCode = Marshal.ReadInt32(lParam);
                Console.WriteLine((Keys)vkCode + "   " + nCode + "   " + wParam + "   " + lParam);
            }
            return CallNextHookEx(_hookID, nCode, wParam, lParam);
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr SetWindowsHookEx(int idHook, LowLevelKeyboardProc lpfn, IntPtr hMod, uint dwThreadId);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        private static extern bool UnhookWindowsHookEx(IntPtr hhk);

        [DllImport("user32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode, IntPtr wParam, IntPtr lParam);

        [DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        private static extern IntPtr GetModuleHandle(string lpModuleName);
    }
} 
```

它捕获键盘输入，但我想要的是能够区分两个键盘。我想知道按下的键是来自笔记本电脑上的键盘还是通过 USB 连接的键盘。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:33:15.203

要区分输入设备，您可能需要使用[Raw Input API](http://msdn.microsoft.com/en-us/library/ms645536%28VS.85%29.aspx)

这是一个详细的[例子](http://nicholas.piasecki.name/blog/2009/02/distinguishing-barcode-scanners-from-the-keyboard-in-winforms/)

更新：上面的链接似乎已关闭。但是，提供上述示例的博主回答了[一个类似的问题。](https://stackoverflow.com/questions/587840/how-to-distinguish-between-multiple-input-devices-in-c-sharp)

# javascript - 关闭 JavaScript 确认弹出窗口而不单击确定或取消按钮

> ID：12533369
> 
> 赞同：3
> 
> 时间：2012-09-21T15:17:19.127
> 
> 标签：javascript, javascript-events

> **可能重复：**
> [Javascript 关闭警报框](https://stackoverflow.com/questions/463368/javascript-close-alert-box)

可以打开一个确认框， `confirm("Sure?");` 它会打开一个带有两个按钮的确认弹出窗口——确定和取消。单击两个按钮中的任何一个时，弹出窗口都会关闭。务实地，我们如何在不单击按钮的情况下关闭弹出窗口？我们可以使用 JavaScript 触发关闭弹出窗口的事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:20:48.350

简短的回答：没有。

长答案： 和 的三个窗口是`DOM0`模态窗口。浏览器（或浏览器窗口，视情况而定）在那些使用其中一种输入法且Javascript*没有任何反应的情况下冻结。*`alert``confirm``prompt`

 *您唯一能做的就是`DIV`使用您自己的确认按钮创建一个弹出窗口，并为您的弹出窗口回调方法提供关于做什么`confirm` `accept`和`cancel.`

A`setTimeout`可用于在暂停后自动关闭窗口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:19:26.493

不，因为该功能阻止了浏览器。在打开期间不会运行任何 JavaScript 代码 - 甚至不会计划超时和其他事件处理程序。

请参阅developer.mozilla.org 上的[window.confirm](https://developer.mozilla.org/en-US/docs/DOM/window.confirm)。

有关以您想要的方式运行的示例，请参阅[jQuery UI](http://jqueryui.com/)库的[此示例。](http://jqueryui.com/demos/dialog/#modal-confirmation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:28:22.120

您只能通过使用模态弹出窗口创建自己的确认框并针对它设置 setTimeout() 或 setInterval() 来实现此目的。或者试试这个，如果它有帮助.... [http://cool-javascripts.com/effects/jgrowl-to-show-unobtrusive-messages.html](http://cool-javascripts.com/effects/jgrowl-to-show-unobtrusive-messages.html)*

# asp.net - 为什么我的 DataList 流仍在输出表格？

> ID：12533370
> 
> 赞同：1
> 
> 时间：2012-09-21T15:17:25.793
> 
> 标签：asp.net, datalist

我是 .net 的新手，我的任务是定制一个连接到我们的 SAP B1 服务器的电子商务网站。产品的输出目前是通过在表格中创建输出的 Datalist 完成的。为了使用 ul li 结构而不是表，我更改了 RepeatLayout="Flow"。为什么我的输出仍然以表格的形式出现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:16:57.243

您可以在 .Net 2中使用`Table`或在其中使用。说明在[此处](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeatlayout.aspx)。`Flow`

`Flow`将使用 span 标签呈现。

`UnorderedList`即使在 .Net 4 中也会引发`OrderedList` [异常。](http://connect.microsoft.com/VisualStudio/feedback/details/654309/error-on-changing-datalist-controls-repeat-layout-property)

但是，您可以对所需的 ul 和 li 布局使用中继器控件。

```
<asp:Repeater  ID="Repeater1" runat="server">
    <HeaderTemplate>
        <ul>
    </HeaderTemplate>
    <ItemTemplate>
        <li>
            <%# Eval("FirstName")%>
            <%# Eval("LastName")%></li></ItemTemplate>
    <FooterTemplate>
        </ul></FooterTemplate>
</asp:Repeater> 
```

# internet-explorer-8 - IE8 中带有 href='#' 的超链接的字体更改

> ID：12533371
> 
> 赞同：1
> 
> 时间：2012-09-21T15:17:26.883
> 
> 标签：internet-explorer-8, fonts, hyperlink, href

我一直在寻找解决这个问题的方法，但对于我的生活，我找不到任何东西。

本质上，在页面上自引用的每个超链接（有些是可折叠面板扩展器，其他使用 JS 打开弹出窗口等）上，单击后超链接的字体会发生变化。这仅发生在 IE8 中。

例子：

（显然我不能发布图片，所以这里有一些图片链接。您可能需要下载并并排打开它们，因为单独查看它们时差异不是很明显。）

[预点击超链接图片](http://i1090.photobucket.com/albums/i363/jegibson0322/pre_click_zps35a16ace.png)

[点击后超链接图片](http://i1090.photobucket.com/albums/i363/jegibson0322/post_click_zpsf85e9354.png)

一旦元素失去焦点，字体不会恢复正常，如果您通过键盘导航将焦点放在元素上，字体也不会变形，所以我认为它与选择超链接无关。

此外，带有非自引用的 href 的超链接在单击时不会更改字体。

我也不认为这是 a:visited CSS，因为刷新页面会导致字体恢复正常。

有没有人经历过这个？我似乎找不到与此问题相关的任何内容。任何帮助表示赞赏。

# php - 500（内部服务器错误）php shell_exec

> ID：12533373
> 
> 赞同：0
> 
> 时间：2012-09-21T15:17:30.283
> 
> 标签：php, shell-exec

我正在使用 php shell_exec 从 jQuery 运行命令，但它一直超时。

所以我的jquery如下。

```
var send = {
    url: $(this).data('url')
}

$.ajax({
    type: "POST",
    url: "<?php echo base_url(); ?>index.php/upload",
    data: send,
    //dataType: "json",
    //timeout: 8000,
    beforeSend: function() {

    },
    success: function(response) {
        console.log(response);
    },
    error: function () {
        alert('error');
    }
}); 
```

然后调用一个运行 shell_exec 的函数

```
function upload(){
    $output = shell_exec("wget {$_POST['url']} 2>&1");      
    echo "<pre>" . $output . "</pre>";
} 
```

好的，如果为 wget get 发布的 url 正在拉一个小文件，但如果 wget 获取的文件超过 20mb，我会得到 500（内部服务器错误）

到目前为止，我已经检查了所有我的 php 设置文件上传限制最大文件大小等内存限制我都设置为最大值。

我没有得到的是这在本地运行良好，但是在我的托管上我收到了这个错误，我已经联系了我的托管媒体寺庙，他们说这超出了他们的支持范围。

关于如何进一步调试的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:31:59.997

正在发生的事情是某种反向代理（例如 Apache 平衡器）正在超时，无论 PHP 脚本是否超时。您可以通过创建脚本来验证，例如

```
<?php sleep(60); ?> 
```

并尝试不同的延迟。

无论如何，增加时间限制似乎只是*一种*解决方案，因为某些浏览器（例如 IE8+）无论如何都会超时。

通常这可以通过分离 wget 进程并让 PHP 页面检查进程状态来解决，例如 5..30 秒的刷新。但是许多供应商对分离进程的看法很模糊，这是可以理解的，因为这可能会占用服务于数十个网站（=付费客户！）的系统的内存。因此，您必须与提供商核实该解决方案是否可以接受。

If it is, you can check out " [Asynchronous shell exec in PHP](https://stackoverflow.com/questions/222414/asynchronous-shell-exec-in-php) ".

# java - java泛型中奇怪的类型错误

> ID：12533375
> 
> 赞同：1
> 
> 时间：2012-09-21T15:17:34.433
> 
> 标签：java, generics

我遇到了以下代码的一个奇怪问题（嗯，不*完全是*这段代码）：

```
public class CompilationProblems1 {

  static Box<Class<? extends AlcoholicBewerage>> brokenBoxOfOneBeer = boxOf(Beer.class);
  static Box<? extends Class<? extends AlcoholicBewerage>> boxOfOneBeer = boxOf(Beer.class);
  static Box<Class<? extends AlcoholicBewerage>> boxOfBeerAndVodka = boxOf(Beer.class, Vodka.class);

  interface AlcoholicBewerage {}

  class Beer implements AlcoholicBewerage {}

  class Vodka implements AlcoholicBewerage {}

  static class Box<T> {}

  static <E> Box<E> boxOf(E e) {
      return new Box<E>();
  }

  static <E> Box<E> boxOf(E e1, E e2) {
      return new Box<E>();
  }
} 
```

第一个声明`brokenBoxOfOneBeer`给出了编译错误：

```
found   : lt.tool.CompilationProblems1.Box<java.lang.Class<lt.tool.CompilationProblems1.Beer>>
required: lt.tool.CompilationProblems1.Box<java.lang.Class<? extends   lt.tool.CompilationProblems1.AlcoholicBewerage>>
static Box<Class<? extends AlcoholicBewerage>> brokenBoxOfOneBeer = boxOf(Beer.class); 
```

此错误发生在 OpenJDK 6、Eclipse 和 IntelliJ 上。我知道这是类型推断器的限制。

在第三种情况下（`boxOfBeerAndVodka`），我相信编译器能够推断出正确的协变类型，因为它有两个子类型可供选择。但是为什么编译器不能编译第一个声明，而第二个声明却可以呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:35:45.000

> 但是为什么编译器不能编译第一个声明，而第二个声明却可以呢？

在这两种情况下，表达式`boxOf(Beer.class)`都有类型`Box<Class<Beer>>`。

*   第一个声明需要它有 type `Box<Class<? extends AlcoholicBewerage>>`; 因为`Box<Class<Beer>>`不是 的子类型`Box<Class<? extends AlcoholicBewerage>>`，所以这不起作用。(`Class<Beer>`是 的子类型`Class<? extends AlcoholicBewerage>`，但由于不变性，这并不*意味着*它`Box<Class<Beer>>`是 的子类型`Box<Class<? extends AlcoholicBewerage>>`。)
*   第二个声明需要它有类型`Box<? extends Class<? extends AlcoholicBewerage>>`——它确实如此。`Class<Beer>`是 的子类型`Class<? extends AlcoholicBewerage>`，ergo`Box<Class<Beer>>`是 的子类型`Box<? extends Class<? extends AlcoholicBewerage>>`。

也就是说，您的声明中发生的事情与以下情况完全相同：

```
List<Object> foo = new ArrayList<String>(); // doesn't work
List<? extends Object> bar = new ArrayList<String>(); // works 
```

它只是看起来更复杂，因为`Object`你`String`有另一个级别的泛型类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:26:28.000

类型参数首先根据实际参数 ( `Beer.class`) 推断 ( [§15.12.2.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.7) )。如果无法根据实际参数推断类型参数，`brokenBoxOfBeer`则考虑上下文 ( ) ( [§15.12.2.8](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.8) )。

因此，您可以按如下方式解决此问题。

```
static <X, E extends X> Box<X> boxOf(E e) {
  return new Box<X>();
} 
```

**编辑**：我应该注意，这是一种解决方法，并带有自己的一系列问题。嵌套调用将不再被正确推断。

```
Box<Box<Integer>> x = boxOf(boxOf(1)); // won't compile 
```

# android - 自定义组件随机播放列表视图

> ID：12533377
> 
> 赞同：0
> 
> 时间：2012-09-21T15:17:41.563
> 
> 标签：android, listview

我正在自定义列表视图中制作条形图。当我滚动列表时，组件会随机播放。怎么可能阻止。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            LayoutInflater layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = layoutInflater.inflate(R.layout.stats_row_layout, null);
        }

        Stat stat = objects.get(position);

        if (stat.isFlag()) {
            LinearLayout linearLayout = (LinearLayout) convertView.findViewById(R.id.parentLayout);
            linearLayout.setVisibility(LinearLayout.VISIBLE);
        } else {
            LinearLayout linearLayout = (LinearLayout) convertView.findViewById(R.id.parentLayout);
            linearLayout.setVisibility(LinearLayout.GONE);
        }

        if (!stat.isExist()) {
            stat.setExist(true);

            LinearLayout linearLayout = (LinearLayout) convertView.findViewById(R.id.statGraphLayout);
            linearLayout.removeAllViews();

            if (stat.getmView() == null) {
                ImageView mView = new StatBarChartVie(context, stat.getStatValues());
                stat.setmView(mView);
            }

            LayoutParams params = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, 50);
            stat.getmView().setLayoutParams(params);

            linearLayout.addView(stat.getmView());

                            }
        }

        return convertView;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T06:57:23.373

在列表视图中使用可见/消失标志似乎不正确。

由于列表视图如何回收视图，这可能是问题所在。您可能需要更聪明地了解如何访问阵列。并且不包括计数中的不可见项目。

每当您更改数据（可能覆盖 notifyDataSetChanged() 调用其超级数据）时，您都可以创建一个仅包含可见值的新索引 ArrayList。因此，您不再需要使用隐形设置。这样，您只需在数据更改时循环遍历数组。

# php - php从iOS解密base64Encoding文本

> ID：12533382
> 
> 赞同：1
> 
> 时间：2012-09-21T15:17:56.900
> 
> 标签：php, ios, encryption, base64

我花了很多时间尝试`"yIH7EYW0e4HuxkHApkG7xQ=="`在 PHP 服务器端解密一个加密字符串 ()，但没有成功。该字符串在 iOS 平台上进行了加密，并使用 base64 格式编码为文本。

无论如何，有人可以纠正我在 PHP 方面的错误（我在这方面有点弱）吗？我知道这种方法不是很安全。我只需要一个临时解决方案，直到我可以使用 openssl 研究更好的方法。

* * *

PHP：

```
$str_encrypted = "yIH7EYW0e4HuxkHApkG7xQ=="; // base64encoded
$mykey = "my password";
$decrypted = decrypt_data($str_encrypted =, $mykey);

function decrypt_data($str_encrypted =, $mykey)
{
  $iv_size = mcrypt_get_iv_size(MCRYPT_RIJNDAEL_128, MCRYPT_MODE_ECB);
  $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
  $decrypted_text = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $encryptionkey, $text, MCRYPT_MODE_ECB, $iv);
  return $decrypted_text;
} 
```

* * *

IOS：

```
- (NSString *)AES128EncryptWithKey:(NSString *)key
{

    NSData *plainData = [self dataUsingEncoding:NSUTF8StringEncoding];
    NSData *encryptedData = [plainData AES128EncryptWithKey:key];

    NSString *encryptedString = [encryptedData base64Encoding];

    return encryptedString;

} 
```

IOS：

```
- (NSString *)base64Encoding
{
   const unsigned char *bytes = [self bytes];
   NSMutableString *result = [NSMutableString stringWithCapacity:self.length];
   unsigned long ixtext = 0;
   unsigned long lentext = self.length;
   long ctremaining = 0;
   unsigned char inbuf[3], outbuf[4];
   unsigned short i = 0;
   unsigned short charsonline = 0, ctcopy = 0;
   unsigned long ix = 0;

   while( YES )
   {
      ctremaining = lentext - ixtext;
      if( ctremaining <= 0 ) break;

      for( i = 0; i < 3; i++ )
      {
         ix = ixtext + i;
         if( ix < lentext ) inbuf[i] = bytes[ix];
         else inbuf [i] = 0;
      }

      outbuf [0] = (inbuf [0] & 0xFC) >> 2;
      outbuf [1] = ((inbuf [0] & 0x03) << 4) | ((inbuf [1] & 0xF0) >> 4);
      outbuf [2] = ((inbuf [1] & 0x0F) << 2) | ((inbuf [2] & 0xC0) >> 6);
      outbuf [3] = inbuf [2] & 0x3F;
      ctcopy = 4;

      switch( ctremaining )
      {
         case 1:
            ctcopy = 2;
            break;
         case 2:
            ctcopy = 3;
            break;
      }

      for( i = 0; i < ctcopy; i++ )
         [result appendFormat:@"%c", encodingTable[outbuf[i]]];

      for( i = ctcopy; i < 4; i++ )
         [result appendString:@"="];

      ixtext += 3;
      charsonline += 4;

   }

   return [NSString stringWithString:result];
} 
```

# php - PHP图像调整大小并保存为具有透明背景的png

> ID：12533388
> 
> 赞同：2
> 
> 时间：2012-09-21T15:18:17.117
> 
> 标签：php, image, canvas, resize, transparent

我正在编写一个需要执行以下操作的脚本：

用户上传图片（JPG、PNG、GIF）。PHP 调整它的大小，增加画布大小，并将图像保存为服务器上的 PNG 文件。

现在我找到了这个教程来学习如何做到这一点： [http ://www.webxpert.ro/andrei/2009/01/08/thumbnail-generation-with-php-tutorial/](http://www.webxpert.ro/andrei/2009/01/08/thumbnail-generation-with-php-tutorial/)

但是，这将创建一个具有白色背景的 PNG 文件。是否可以让 PHP 以**透明**背景生成它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:21:13.827

本教程将其分解为基本步骤。只需找到在其中放置背景颜色的步骤，然后放置透明颜色即可。您将需要[`imagecolorallocatealpha`](http://php.net/imagecolorallocatealpha)alpha 值 127。

# php - Phalcon UTF8 是否兼容？

> ID：12533389
> 
> 赞同：4
> 
> 时间：2012-09-21T15:18:17.893
> 
> 标签：php, utf-8, phalcon

我想知道关于 UTF8，Phalcon 的内部结构是什么？

例如，如果我使用这样的东西

```
echo strlen('hello'); // output 5 
```

然而

```
echo strlen('汉字/漢字'); // will output something like 10 
```

strlen 不兼容 UTF8，因此必须使用 mb_strlen 以确保安全。

Phalcon 是否使用（内部）mb_* 相关功能？如果不是，我们如何确保内部的所有内容都以 UTF8 方式处理以确保与所有语言的兼容性？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:18:17.893

目前，PHP 是二进制安全的，这意味着您可以以透明的方式处理多字节字符串（如 utf8 或其他字符集）、latin1 或 ascii。

Phalcon，仅在使用目录名称时使用 strlen（不确定是否有人使用具有多字节字符的目录）。

# java - Java Mail：无法通过 Yahoo 发送电子邮件

> ID：12533394
> 
> 赞同：5
> 
> 时间：2012-09-21T15:18:23.090
> 
> 标签：java, email, jakarta-mail, yahoo

请看下面的代码。

```
package email;

import java.awt.*;
import java.awt.event.*;
import javax.mail.*;
import javax.mail.internet.*;
import java.util.Properties;

public class SendEmail
{

    private String to, from, bcc, cc, account, message,  password, subject;

    public SendEmail(String to, String from,String bcc, String cc, String account, String message, String password, String subject)
    {
        setFrom(from);
        setTo(to);
        setBCC(bcc);
        setCC(cc);
        setAccount(account);
        setMessage(message);
        //setUserName(userName);
        setPassword(password);
        setSubject(subject);

    }

    //Setters
    public void setFrom(String from)
    {
        this.from = from;
    }

    public void setTo(String to)
    {
        this.to = to;
    }

    public void setBCC(String bcc)
    {
        this.bcc = bcc;
    }

    public void setCC(String cc)
    {
        this.cc = cc;
    }

    public void setMessage(String message)
    {
        this.message = message;
    }

   /* public void setUserName(String userName)
    {
        this.userName = userName;
    }*/

    public void setPassword(String password)
    {
        this.password = password;
    }

    public void setAccount(String account)
    {
        this.account = account;
    }

    public void setSubject(String subject)
    {
        this.subject = subject;
    }

    //Getters
    public String getFrom()
    {
        return from;
    }

    public String getTo()
    {
        return to;
    }

    public String getBcc()
    {
        return bcc;
    }

    public String getCC()
    {
        return cc;
    }

    public String getMessage()
    {
        return message;
    }

    /*public String getUserName()
    {
        return userName;
    }*/

    public String getPassword()
    {
        return password;
    }

    public String getAccount()
    {
        return account;
    }

    public String getSubject()
    {
        return subject;
    }

    //This method is used to send the email
    public String send()
    {
        String result = "";
        try
        {
            Session mailSession = Session.getInstance(getProperties(), new PasswordAuthenticator());

            MimeMessage msg = new MimeMessage(mailSession);
            msg.setFrom(new InternetAddress(from));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress(to));

            msg.setSubject(subject);
            msg.setText(message);

            Transport.send(msg);

            result = "Mail Sent";
        }
        catch(Exception e)
        {
            result = "An error Occured";
            e.printStackTrace();
        }

        return result;
    }

    //This method will return properties appropreiate for the email account
    public Properties getProperties()
    {
        Properties props = new Properties();

        if(getAccount().equals("GMail"))
        {
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.starttls.enable","true");
            props.put("mail.smtp.host","smtp.gmail.com");
            props.put("mail.smtp.port","587");
        }
        else if(getAccount().equals("Yahoo"))
        {
            props.put("mail.smtp.auth", "true");
            props.put("mail.smtp.socketFactory.port","465");
            props.put("mail.smtp.socketFactory.class","javax.net.ssl.SSLSocketFactory");
            props.put("mail.smtp.host","smtp.mail.yahoo.com");
            props.put("mail.smtp.port","465");
        }

        return props;
    }

    //This class Authnticates the password
    private class PasswordAuthenticator extends Authenticator
    {

        @Override
        protected PasswordAuthentication getPasswordAuthentication()
        {
            return new PasswordAuthentication(getFrom(), getPassword());
        }
    }
} 
```

在这里，如果我选择 GMail，没问题。但是如果我尝试使用 Yahoo 发送电子邮件，则会出现以下错误

> javax.mail.AuthenticationFailedException：530 访问被拒绝

雅虎邮箱地址和密码是正确的，但这个问题不断出现。为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:31:29.640

登录时尽量不要使用“@yahoo.com”，只使用您的用户名

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:29:32.443

为什么在代码中使用 gmail 和 yahoo 的方式有区别？
您是否也尝试过使用`start.tls.enable=true`雅虎，而不是使用 SocketFactory 的两行？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:25:08.977

[摆脱套接字工厂。](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)[有关连接到 Yahoo Mail 的详细信息，](http://www.oracle.com/technetwork/java/javamail/faq/index.html#yahoomail) 请参阅JavaMail FAQ 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-13T07:47:37.403

您需要更改参数。您已通过 Yahoo 代码的“Gmail”和 Gmail 代码的“Yahoo”。更改这些参数。

```
if(getAccount().equals("Yahoo"));

else if(getAccount().equals("GMail")); 
```

并且 SMTP Host 也应该改变。

它应该工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-25T18:54:46.507

不要忘记在此处禁用安全性较低的登录[https://login.yahoo.com/account/security?el=1&done=https%3A%2F%2Fwww.yahoo.com&crumb=Fb3iREAVZwY&.scrumb=k3h5YYmGz%2Fw&guccounter=1](https://login.yahoo.com/account/security?el=1&done=https%3A%2F%2Fwww.yahoo.com&crumb=Fb3iREAVZwY&.scrumb=k3h5YYmGz%2Fw&guccounter=1)

```
 Properties props = System.getProperties();
    // Setup mail server
    props.put("mail.smtp.host", "smtp.mail.yahoo.com");
    props.put("mail.smtp.port", 465);
    props.put("mail.smtp.auth", true);
    props.put("mail.smtp.ssl.enable", true);
    props.put("mail.debug", "true");

    // Setup authentication, get session
    return Session.getInstance(props, new javax.mail.Authenticator() {
          protected PasswordAuthentication getPasswordAuthentication() {
                 return new PasswordAuthentication("*********@yahoo.com", "**********");
              }
           });` 
```

# c++ - 类的 C++ 基本错误

> ID：12533395
> 
> 赞同：-2
> 
> 时间：2012-09-21T15:18:25.007
> 
> 标签：c++

```
class IEngine: public ICoreObject 
{
private:
    Network     *_Network;
    bool        _Process;

public:
    IEngine();
    ~IEngine();
    void Initial(...);
    void StartServer(unsigned short port);
    bool Process();
    void StopProcess();
    void StartProcess();
    friend void ShellCode(int id,struct NE_Bin var);

}; 
```

为什么我不能使用 ShellCode 的 _Network ？

这是 ShellCode 函数的定义

```
void ShellCode(int id,struct NE_Bin var) //функция-друг
{
    std::cout<<"ShellFunc Delegated"<<std::endl;
    var.data = (void *)"T";
    var.length = 1;
    //_Network->SendMessageW(id, var);
} 
```

我试图进入 _Network 类，但出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:23:23.120

那么你需要一个 IEngine 的实例作为参数来访问它的成员变量......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:28:20.677

`IEngine`作为`ShellCode`朋友。这意味着您可以访问对象`private`的**成员`IEngine`。`_Network`只是你上下文中的一个变量，没有绑定到任何东西。

像这样的东西会起作用：

```
void ShellCode(int id,struct NE_Bin var, IEngine* pEngine)
{
    std::cout<<"ShellFunc Delegated"<<std::endl;
    var.data = (void *)"T";
    var.length = 1;
    pEngine->_Network->SendMessageW(id, var);
} 
```

但您需要传递`IEngine`as 参数：

```
IEngine* pEngine /*initialize it here*/;
ShellCode(0, NE_Bin(), pEngine); 
```

或者您可以在方法中使用全局实例（如果有的话）。

# java - Java中的正则表达式检测带有单个反斜杠的字符串

> ID：12533396
> 
> 赞同：0
> 
> 时间：2012-09-21T15:18:31.563
> 
> 标签：java, expression

我正在学习正则表达式，但我遇到了问题。我需要一个正则表达式来检测错误字符串。正确的字符串不能包含单个反斜杠 (\)，但可以包含双反斜杠 (\\)，可以包含 (\t, \r, \f, \b, ...) 示例：正则表达式必须匹配此字符串 '这是错误字符串\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:52:55.543

对于匹配正确的字符串，试试这个：

```
^((\\[tbnrt'"\\])|(\\u\d{4})|[^\\])+$ 
```

另一方面，您需要使用一个常量`Pattern`来避免每次都重新编译表达式，如下所示：

```
private static final Pattern MY_PATTERN = 
              Pattern.compile("^((\\\\[tbnrt'\"\\\\])|(\\\\u\\d{4})|[^\\\\])+$"); 
```

并使用常量：

```
MY_PATTERN.matcher(testString).matches(); // true if don't have errors 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:26:10.403

你需要正确地逃脱。用来`\\\\`匹配`\\`。

# android - Android 与 WebSocket 的连接挂起

> ID：12533399
> 
> 赞同：2
> 
> 时间：2012-09-21T15:18:54.963
> 
> 标签：android, sockets, timeout

在我的 Android 项目中，我实现了一个 Faye 客户端。但是，当我打电话时`SocketChannel.socket().connect(...)`，连接挂起并且下一行没有运行。好像我没有设置超时，或者断开超时。

```
Thread.currentThread().setName("WebSocketConnector");
try {
    // "java.net.SocketException: Address family not supported by protocol"
    System.setProperty("java.net.preferIPv6Addresses", "false");

    mTransportChannel = SocketChannel.open();
    // mTransportChannel.configureBlocking(false);
    // the following will block until connection was established or
    // an error occurred!
    mTransportChannel.socket().connect(
            new InetSocketAddress(mWsHost, mWsPort), mOptions.getSocketConnectTimeout());
    Log.i(TAG, "Socket connected");
    // before doing any data transfer on the socket, set socket
    // options
    mTransportChannel.socket().setSoTimeout(
            mOptions.getSocketReceiveTimeout());
    mTransportChannel.socket().setTcpNoDelay(
            mOptions.getTcpNoDelay());

    return null;
} catch (IOException e) {
    Log.e(TAG, e.getMessage());
    return e.getMessage();
} 
```

如果我这样做了：

```
mTransportChannel = SocketChannel.open();
mTransportChannel.configureBlocking(false);
mTransportChannel.connect(socketAddress);

SocketChannel .isConnected() return false 
```

我不明白的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:01:52.337

此问题已解决。我的 wifi 连接无法访问私有资源。但是我对网络套接字还有其他问题。它是 [Android 套接字读取方法返回 -1](https://stackoverflow.com/questions/12636496/android-socket-read-method-return-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:39:08.857

DNS 解析可能在调用之前就被阻塞了`connect()`。放在`new InetSocketAddress(mWsHost, mWsPort)`一个单独的行上，并打印出它的结果。你很可能被困在那里。

如果不是这种情况，请检查您是否可以使用 telnet 连接到目标主机/端口：

```
~$ telnet host port 
```

# jquery - tinymce 广告图片无法选择文件夹

> ID：12533404
> 
> 赞同：2
> 
> 时间：2012-09-21T15:19:11.593
> 
> 标签：jquery, tinymce

当我单击插入/编辑图像上的插入图像时，我没有“从文件夹中选择”按钮。这是我的代码：

```
 $('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url : 'tinymce/tiny_mce.js',

        // General options
        language : "he",
        mode: "textareas",
        directionality : "rtl",
        theme : "advanced",
        plugins : "autolink,lists,table,advimage,advhr,inlinepopups,insertdatetime,preview,searchreplace,contextmenu,paste,directionality,noneditable,visualchars,xhtmlxtras,advlist,advimage,",

        // Theme options
        theme_advanced_buttons1 : "undo,redo,|,preview,|,search,replace,|,forecolor,backcolor,fontsizeselect,fontselect,|,strikethrough,underline,italic,bold",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,bullist,numlist,|,cleanup,code,|,removeformat,sub,sup,styleprops,|,cite,link,unlink,image,charmap,iespell,hr,insertdate,inserttime,",
        theme_advanced_buttons3 : "tablecontrols,|,ltr,rtl,|,outdent,indent,|,justifyleft,justifycenter,justifyright,justifyfull,",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "right",
        theme_advanced_statusbar_location : "bottom",
    }); 
```

我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:08:47.583

您必须集成 imagemanager 和/或 filemanager 插件。

[请参阅tinymce 论坛](http://www.tinymce.com/forum/viewtopic.php?id=24769)中的这个启发性主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:32:23.537

添加这个

```
theme_advanced_buttons4 : "insertfile,insertimage", 
```

# vb.net - 进度条和代码位置的多线程（vb.net）？

> ID：12533412
> 
> 赞同：3
> 
> 时间：2012-09-21T15:19:32.357
> 
> 标签：vb.net, multithreading, progress-bar, backgroundworker, invokerequired

我被困在从不同的线程更新进度条。我确实让它以最简单的方式运行，但随后清理代码让我陷入困境。

我的测试代码看起来像网络上所有与 backgroundworker 和 BeginInvoke 相关的示例。

FormP 是 Progressbar-Form。这有效：

```
Public Class Form1
Private Delegate Sub delegate_ProgressUpdate(ByVal paramValue As Integer,
  ByVal paramMax As Integer)

Private Sub Button1_Click(sender As System.Object,
  e As System.EventArgs) Handles Button1.Click
    ' Test 01:
    ' Show Progressbar via BGW
    ' All functions are within Form1
    Dim bgw As New BackgroundWorker()
    AddHandler bgw.DoWork, AddressOf BGW_Sample01_DoWork

    FormP.Show(Me)
    bgw.RunWorkerAsync()
End Sub

Private Sub invokeMe_ProgressUpdate(ByVal paramValue As Integer, ByVal paramMax As Integer)
    FormP.ProgressBar1.Maximum = paramMax
    FormP.ProgressBar1.Value = paramValue
    FormP.ProgressBar1.Update()
End Sub

Private Sub BGW_Sample01_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs)
    For i As Integer = 1 To 10
        Threading.Thread.Sleep(500) ' Test delay
        Me.BeginInvoke(New delegate_ProgressUpdate(AddressOf invokeMe_ProgressUpdate),
                       i, 10)
    Next
    MessageBox.Show("Fertig")
End Sub 
```

如果我试图让事情更有序地封装在 FormP 中，那就行不通了。

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    Dim bgw As New BackgroundWorker
    AddHandler bgw.DoWork, AddressOf BGW_Sample02_DoWork
    FormP.Show(Me)
    bgw.RunWorkerAsync()
End Sub

Private Sub BGW_Sample02_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs)
    For i As Integer = 1 To 10
        Threading.Thread.Sleep(500)
        FormP.SetProgress(i, 10)
    Next
    MessageBox.Show("Fertig")
End Sub

' ########## FormP #################

Public Class FormP

Private Delegate Sub delegate_ProgressUpdate(ByVal value As Integer, ByVal maximum As Integer)

Public Sub SetProgress(ByVal paramValue As Integer, ByVal paramMaximum As Integer)
    If Me.InvokeRequired Then
        Me.Invoke(New delegate_ProgressUpdate(AddressOf Me.SetProgress), paramValue, paramMaximum)
    Else
        Me.ProgressBar1.Maximum = paramMaximum
        Me.ProgressBar1.Value = paramValue
        Me.ProgressBar1.Update()
    End If
End Sub

End Class 
```

FormP 不会冻结，但 UI 不会更新。实际上 Me.InvokeRequired 是错误的，我认为这就是我开始错过一些重要部分的地方。我在这里尝试了 Form1.InvokeRequired，但它也是错误的。我的理解是：这里的调用线程就是bgw线程，不管这个线程调用的是什么类的代码……好像不是这样的吧？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T21:27:41.173

最终奏效的方法：

```
Private frmP As FormP

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    Dim bgw As New BackgroundWorker
    If Me.frmP IsNot Nothing AndAlso Me.frmP.Visible Then Return
    Me.frmP = New FormP
    Me.frmP.Show(Me)
    AddHandler bgw.DoWork, AddressOf BGW_Sample02_DoWork
    bgw.RunWorkerAsync(New Object() {Me.frmP})
End Sub

Private Sub BGW_Sample02_DoWork(sender As Object, e As System.ComponentModel.DoWorkEventArgs)
    Dim objFrmP As FormP = DirectCast(e.Argument(0), FormP)
    For i As Integer = 1 To 10
        objFrmP.setProgress(i, 10)
        Threading.Thread.Sleep(500)
    Next
    MessageBox.Show("Finished")
End Sub 
```

FormP 中的进度对话框代码：

```
Public Sub setProgress(paramValue As Integer, paramMaximum As Integer)
    If Me.InvokeRequired Then
        ' defining a delegate type is not really necessary
        Me.Invoke(Sub() Me.setProgress(paramValue, paramMaximum))
    Else
        Me.ProgressBar1.Maximum = paramMaximum
        Me.ProgressBar1.Value = paramValue
        Me.ProgressBar1.Update()
    End If
End Sub 
```

# android - 在进度条上开始新活动 100%

> ID：12533416
> 
> 赞同：0
> 
> 时间：2012-09-21T15:19:56.057
> 
> 标签：android, progress-bar

我使用[本教程](http://www.jagsaund.com/blog/2011/11/6/customizing-your-progress-bar-part-one.html)创建自定义进度条，它可以工作。

但是我想在进度条达到 100% 时开始新的活动。

任何人都可以帮助将开始新的活动代码放在正确的位置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:29:22.793

您可以在设置时检查进度是否已达到最大值，如下所示：

```
@Override
  public synchronized void setProgress(int progress) {
    super.setProgress(progress);

    // the setProgress super will not change the details of the progress bar
    // anymore so we need to force an update to redraw the progress bar
    invalidate();

    if(progress >= getMax()) {
        Intent intent....
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T12:35:20.730

您可以调用 onContinue 函数计时器线程并将意图设置为下一个活动并在清单文件中注册活动名称。

```
@Override
   public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.progress);
    mProgressBar = (ProgressBar)findViewById(R.id.adprogress_progressBar);
    final Thread timerThread = new Thread() {
        @Override
            public void run() {
            mbActive = true;
            try {
                int waited = 0;
                    while(mbActive && (waited < TIMER_RUNTIME)) {
                        sleep(200);
                        if(mbActive) {
                            waited += 200;
                            updateProgress(waited);
                        }
                    }
            } catch(InterruptedException e) {
        } finally {
                onContinue();
        }
      }
    };
    timerThread.start();
}
@Override
public void onDestroy() {
    super.onDestroy();
}
public void updateProgress(final int timePassed) {
    if(null != mProgressBar) {
        final int progress = mProgressBar.getMax() * timePassed / TIMER_RUNTIME;
        mProgressBar.setProgress(progress);
    }
}

public void onContinue() {
    Intent intd=new Intent(this,MainActivity.class);
    startActivity(intd);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T15:56:55.070

试试这个...

```
new Thread(new Runnable() {
    public void run() {
        while (progressStatus < 100) {
            progressStatus += 5;
            // Update the progress bar and display the current value in the text view
            handler.post(new Runnable() {
                public void run() {
                    progressBar.setProgress(progressStatus);
                    textView.setText("Loading "+progressStatus+"/"+progressBar.getMax());
                }
            });
            try {
                // Sleep for 200 milliseconds. Just to display the progress slowly
                Thread.sleep(200);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
    }

    **Intent intent = new Intent(Main_Activity.this, Send_Email.class);
        startActivity(intent);**
    }
}).start(); 
```

# java - 为什么 new StringBuffer(new StringBuilder("foo")) 有效？

> ID：12533418
> 
> 赞同：0
> 
> 时间：2012-09-21T15:20:08.767
> 
> 标签：java, scjp

我正在学习 SCJP 证书，在使用 StringBuilder 和 StringBuffer API 时，我发现了一些我无法理解那里发生的情况。

这是我的示例代码：

```
 StringBuffer sb1 = new StringBuffer("sb1");
    StringBuilder sb2 = new StringBuilder("sb2");

    StringBuffer sb11 = new StringBuffer(sb1);
    StringBuilder sb22 = new StringBuilder(sb2);

    StringBuffer sb12 = new StringBuffer(sb2);
    StringBuilder sb21 = new StringBuilder(sb1);

    System.out.println(sb1);
    System.out.println(sb2);
    System.out.println(sb11);
    System.out.println(sb22);
    System.out.println(sb12);
    System.out.println(sb21);

    System.out.println();
    sb1.append("a1");
    sb2.append("a2");

    System.out.println(sb1);
    System.out.println(sb2);
    System.out.println(sb11);
    System.out.println(sb22);
    System.out.println(sb12);
    System.out.println(sb21); 
```

这是运行上面代码的结果：

```
sb1
sb2
sb1
sb2
sb2
sb1

sb1a1
sb2a2
sb1
sb2
sb2
sb1 
```

API 中没有记录用于 sb11、sb22、sb12 和 sb21 的构造函数。此外，从结果来看，这 4 种情况似乎是使用了允许 String 或 CharSequence 的构造函数。

如果是真的，为什么Java会自动将StringBuffer转换成String？据我所知，自动装箱并没有那么远。

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:23:23.757

两者都`StringBuilder`实现`StringBuffer`了`CharSequence`接口，并且都有一个带`CharSequence`参数的构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:22:27.813

`StringBuilder`并且`StringBuffer`都实现了`CharSequence`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:26:28.300

他们都实现了 CharSequence。它们之间的唯一区别是 StringBuffer 方法是同步的，而 stringBuilder 不是

# java - 以编程方式发送短信 - 设置过期

> ID：12533419
> 
> 赞同：4
> 
> 时间：2012-09-21T15:20:10.657
> 
> 标签：java, android

是否可以以编程方式设置短信（SMS/MMS）的到期日期，或者有没有办法通过android上的java发送自动删除自身的消息？

除了作为中间人工作的应用程序/网站之外，我似乎找不到任何示例，我希望最终用户（接收者）不需要安装应用程序。

**对于到达这里的其他任何人 --- 看起来唯一可能的方法是让中间人实际管理消息**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T12:13:48.773

没有像短信这样的功能，它会在一定时间后删除自己。如果您发送文本短信，它很可能会出现在用户收件箱中，并且只会由用户手动删除。

如果您希望您的短信自行删除，您需要为此申请。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:29:25.617

```
public boolean deleteSms(String smsId) {

    boolean isDelSms = false;

    try {

        mActivity.getContentResolver().delete(

                Uri.parse("content://sms/" + smsId), null, null);

        isDelSms = true;

Toast.makeText(getApplicationContext(), countryCode,
                        Toast.LENGTH_SHORT).show();

    } catch (Exception ex) {

        isDelSms = true;

    }

    return isDelSms;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T15:54:48.373

```
public boolean deleteSms(String smsId) {
    boolean isDelSms = false;
    try {
        mActivity.getContentResolver().delete(
                Uri.parse("content://sms/" + smsId), null, null);
        isDelSms = true;
    } catch (Exception ex) {
        isDelSms = true;
    }
    return isDelSms;
} 
```

# javascript - 在画布内绘制预定义数量的点

> ID：12533431
> 
> 赞同：0
> 
> 时间：2012-09-21T15:20:51.547
> 
> 标签：javascript, html, canvas

我正在尝试实现以下目标：-给定两个变量 numberColumns/numberRows 我想在设置宽度的画布中绘制一个矩形或点网格，例如 800x400

我已经尝试了几件事，但是我未能以正确的间距使矩形/点的大小正确

这是我尝试绘制一行的示例。我正在尝试处理任何给定数量的行/列

```
 function draw(){
            var width = 800;
            var height = 400;

            var nrow = 32;
            var ncol = 48;

            var canvas = document.getElementById('tutorial');
            if (canvas.getContext){
                var ctx = canvas.getContext('2d');
                //Have a border so drawing starts at 20,20
                var spacew = width - 40;
                var x = Math.floor(spacew/ncol);

                var currCol = 20;
                for(i = 1; i<ncol; i++){
                    ctx.beginPath();
                    ctx.arc(currCol, 20, x, 0, Math.PI*2, true);
                    ctx.closePath();
                    ctx.fill();

                    currCol = currCol + x*2;
                }

            }
        } 
```

关于我将如何解决这个问题的任何想法，也许是一个例子？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:39:04.767

我在这里创建了一个示例[http://jsfiddle.net/J9MLq/7/](http://jsfiddle.net/J9MLq/7/)。每个圆的直径为 a `2*radius`。我在根据画布的宽度动态计算半径时把它放在了`var x = width/ncol/2;`（你不需要任何 Math.floor/Math.ceil，否则你会在圆和边框之间有间隙）。此外，现在画布元素可调整大小，您的函数接受参数`draw(width, height)`。现在你可以自己玩这些行了。您也可以扩展该函数以接受行和列的数量。去那里试试吧...

# javascript - Ajax - 当用户按下回车键提交数据时页面被重新加载

> ID：12533433
> 
> 赞同：0
> 
> 时间：2012-09-21T15:20:57.427
> 
> 标签：javascript, ajax, forms

我有一个简单的表单来从一个人向另一个人发送消息，并且消息是由 AJAX 使用 POST 方法发送的，无需重新加载页面。我有一个，问题是当用户在此字段中按 [ENTER] 时，AJAX 不起作用并且页面被重新加载。我 qant 一个表单，当用户按 ENTER 时，ajax 运行正常。

请参阅我的文档：-Javascript：

```
function enviarMensagem()
    {
        var remetente = document.getElementById('remetente').value;
        var destinatario = document.getElementById('destinatario').value;
        var mensagem = document.getElementById("mensagem").value;
        if(mensagem.length == 0 || mensagem.length  > 128)
        {
            return;
        }
        xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function()
        {
            if(xmlhttp.readyState == 4 && xmlhttp.status == 200)
            {
                document.getElementById("mensagens").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("POST", "saida.php", true);
        xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        xmlhttp.send("remetente=" + remetente + "&destinatario=" + destinatario + "&mensagem=" + mensagem);
    } 
```

-HTML：

```
<form action="" >
    <input type="hidden" id="remetente" name="remetente" value="Erick">
    <input type="hidden" id="destinatario" name="destinatario" value="Fernanda">
    <input type="text" id="mensagem" /> <input type="button" value="Enviar" onclick="enviarMensagem();">
</form>
<div id="mensagens"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:24:56.193

问题是您只是将 Ajax 函数应用于按钮的 onclick 处理程序。您需要将其添加到表单的 onsubmit 操作中。

```
<form action=""  onsubmit="enviarMensagem(); return false;">
<input type="hidden" id="remetente" name="remetente" value="Erick">
<input type="hidden" id="destinatario" name="destinatario" value="Fernanda">
<input type="text" id="mensagem" /> <input type="button" value="Enviar" > 
```

可以通过单击提交按钮或使用 Enter 键的 keyup 事件来启动表单上的提交。将侦听器添加到 onsubmit 操作涵盖了两者。

# javascript - XMLHttpRequest 未添加标头 - “X-Requested-With: XMLHttpRequest”

> ID：12533435
> 
> 赞同：17
> 
> 时间：2012-09-21T15:21:03.133
> 
> 标签：javascript, jquery, ajax, html

我有一个 ajax 调用，我使用 jQuery.ajax() 向 mvc 操作发出请求。这一切都很好。但是，由于某些表单具有文件控件，我将其从使用 jQuery.ajax() 更改为使用 XMLHttpRequest 以使用 HTML5 文件 API 发送它。

由于进行此更改，MVC 操作方法不再将其视为 ajax 请求。使用 Fiddler2 我注意到它不再将“X-Requested-With: XMLHttpRequest”添加到请求中，我认为这是问题所在。

我尝试发送的表单中没有文件输入，只有普通的文本框等，但我试图保持方法通用以处理两者。以下是我用来发送 ajax 请求的代码：

```
// get the edit tender form
var $Form = $Button.closest('form');
var Url = $Form.attr('action');
var AjaxRequestObject = new XMLHttpRequest();
var FormDataToSend = new FormData();

$Form.find(':input').each(function () {
    if ($(this).is('input[type="file"]')) {
        var files = $(this)[0].files;
        if (files.length > 0) {
            FormDataToSend.append(this.name, files[0]);
        }
    } else {
        FormDataToSend.append(this.name, $(this).val());
    }
});

AjaxRequestObject.open('POST', Url, true);
AjaxRequestObject.onreadystatechange = function () {
    if (AjaxRequestObject.readyState == 4) {
        // handle response.
        if (AjaxRequestObject.status == 200) {
            if (!AjaxErrorExists(AjaxRequestObject.responseText, )) {
                alert("success");
                console.log(AjaxRequestObject.responseText);
            }
            else {
                alert('failure');
            }
        }
        else {
            alert('failure');
        }
    }
};

AjaxRequestObject.send(FormDataToSend); 
```

此代码是在我遇到 Darin Dimitrov 提供解决方案的问题之后提供的，因此我可以通过 ajax 发送文件输入。

任何想法为什么此请求不会发送 ajax 调用的标头？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-21T15:23:28.630

`X-Requested-With`由 jQuery 自动添加。您可以自己轻松地添加它`AjaxRequestObject.setRequestHeader()`。[文档](https://developer.mozilla.org/en/DOM/XMLHttpRequest#setRequestHeader)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-11-25T00:45:52.270

我在检测我的请求是否为`ajax`. 所以，也许这个样本会为某人节省一两分钟：

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open('GET', URL, true);  // `true` for async call, `false` for sync.

// The header must be after `.open()`, but before `.send()`
xmlhttp.setRequestHeader('X-Requested-With', 'XMLHttpRequest');

xmlhttp.onreadystatechange = function() {
    // 4th state is the last:
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) { ... }
};
xmlhttp.send(); 
```

经测试[`Flask`](http://flask.pocoo.org/docs/0.10/api/#flask.Request.is_xhr)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-21T13:17:48.437

您可以本地覆盖所有 XMLHttpRequest.open 方法调用并在其中添加 X-Requested-With 标头，例如：

```
(function () {  

    // @author https://github.com/stopsopa jfdsa78y453cq5hjfd7s877834h4h3

    if (window.XMLHttpRequest.prototype.onOpen)  {
        return console.log('XMLHttpRequest.onOpen is already defined');
    }

    function over(method, on, off) {

        var old = window.XMLHttpRequest.prototype[method];

        if (!old.old) {

            var stack = [];

            window.XMLHttpRequest.prototype[on] = function (fn) {
                if (typeof fn === 'function') {
                    stack.push(fn);
                }
            }

            window.XMLHttpRequest.prototype[off] = function (fn) {
                for (var i = 0, l = stack.length ; i < l ; i += 1 ) {
                    if (stack[i] === fn) {
                        stack.splice(i, 1);
                        break;
                    }
                }
            }

            window.XMLHttpRequest.prototype[method] = function () {
                var args = Array.prototype.slice.call(arguments);

                var ret = old.apply(this, args);

                for (var i = 0, l = stack.length ; i < l ; i += 1 ) {
                    stack[i].apply(this, args);
                }

                return ret;
            }

            window.XMLHttpRequest.prototype[method].old = old;
        }
    }

    over('open', 'onOpen', 'offOpen')

    XMLHttpRequest.prototype.onOpen(function () {
        this.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    });
}()); 
```

# c - 用 C 读取我由 exec() 创建的子管道

> ID：12533443
> 
> 赞同：2
> 
> 时间：2012-09-21T15:21:23.243
> 
> 标签：c, exec, fork, pipe

我刚开始学习 C 编程，我对`fork()`, `exec()`,`pipe()`等有一些不确定性。

我已经开发了这段代码，但是当我执行它时，变量`c`仍然是空的，所以我不知道是孩子没有写入管道，还是父母没有从中读取。

请问你能帮帮我吗？这是代码：

```
int main() {
int pid=0;
int pipefd[2];
char* c=(char *)malloc(sizeof(char));   
FILE *fp;

pipe(pipefd);

pid=fork();

if (pid==0){
    close(pipefd[0]);
    dup2(pipefd[1],1);
    close(pipefd[1]);
    execl("ls -l | cut -c28","ls -l | cut -c28", (char *) 0);
}
else{

    close(pipefd[1]);
    read(pipefd[0], c, 1);
    char* path="/home/random";
    char* txt=".txt";
    char* root=malloc(strlen(path) + strlen(txt) + sizeof(char));
    strcpy(root,path);
    strcat(root,c);
    strcat(root,txt);
    close(pipefd[0]);

    fp=fopen(root,"w+");
    (...)
} 
```

问题是最终的根字符串只是`"/home/random.txt"`因为 char 中没有任何内容`c`，而我想要的是打开文件`"/home/random(number stored in char c).txt"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:32:41.293

`execl`执行单个命令，并且不知道 shell 概念，例如管道。如果要执行 shell 命令，则必须执行 shell，如下所示：

```
execl("/bin/sh","/bin/sh","-c","ls -l | cut -c28", (char*) 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:33:52.417

***始终***检查系统调用的返回值（like[`execve(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/execve.2.html)和派生函数，例如[`execl(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/execl.3.html)），并使用[`errno(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/errno.3.html)找出问题所在。

在您的情况下，`execl`线路失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:38:44.220

使用 strcpy/strcat 似乎有点过于复杂。snprintf 可以将这 3 行合二为一。

```
snprintf( root, size_of_buf, "/home/random%s", c ); 
```

此外，请检查您的错误代码。如前所述， execl 失败了，你不知道。fork, dup2, ..., 也可能失败，你想早点知道。

# ios - 如何更改 WKWebView 或 UIWebView 默认字体

> ID：12533445
> 
> 赞同：26
> 
> 时间：2012-09-21T15:21:27.367
> 
> 标签：ios, objective-c, swift, uiwebview, wkwebview

`UIWebView`默认情况下`WKWebView`使用什么字体？我希望能够改变这一点。但我不想在 html 字符串中这样做，而是我想要类似的东西：

```
// obj-c
[webView setFont:[UIFont fontWithName:@"GothamRounded-Bold" size:14]

// swift
webView.setFont(UIFont(name: "GothamRounded-Bold", size: 14)) 
```

有没有这样的财产或其他方式？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-05-09T00:03:20.723

您可以使用您的`UIFont`对象（因此您可以更轻松地设置和修改它），但将 HTML 包装在 a 中`span`；**自 HTML 4.01 以来，****`font`标签[已被弃用](http://www.w3.org/TR/REC-html40/present/graphics.html#edef-FONT)**。

```
UIFont *font = [UIFont fontWithName:@"GothamRounded-Bold" size:14]; 
```

假设您已经`NSString *htmlString`创建了字体，您可以使用字体的属性：

```
htmlString = [NSString stringWithFormat:@"<span style=\"font-family: %@; font-size: %i\">%@</span>",
                                        font.fontName,
                                        (int) font.pointSize,
                                        htmlString]; 
```

或者，您可以只提供值而不是使用`UIFont`对象：

```
htmlString = [NSString stringWithFormat:@"<span style=\"font-family: %@; font-size: %i\">%@</span>",
                                        @"GothamRounded-Bold",
                                        14,
                                        htmlString]; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-11T04:42:52.083

只需`<font face>`在加载到 webView 之前为您的字符串添加一个标签。

```
NSString *body = [plist objectForKey:@"foo"];
NSString *htmlString = 
    [NSString stringWithFormat:@"<font face='GothamRounded-Bold' size='3'>%@", body];
[webView loadHTMLString:htmlString baseURL:nil]; 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-22T15:19:56.993

您可以尝试通过注入一行 JavaScript 来设置字体，如下所示：

```
[webView stringByEvaluatingJavaScriptFromString: @"document.body.style.fontFamily = 'GothamRounded-Bold'"]; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-02-21T14:18:30.607

有 swift 3 解决方案：

```
func webViewDidFinishLoad(_ webView: UIWebView) {
    webView.stringByEvaluatingJavaScript(from: "document.getElementsByTagName('body')[0].style.fontFamily =\"-apple-system\"")
} 
```

我刚刚为本示例添加了默认的 iOS 字体

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-05-18T03:10:11.917

这是我易于使用且易于扩展的解决方案，具有更多字体设置：

```
myHTMLLabel = [[UIWebView alloc] initWithFrame:CGRectMake(myX, myY, myWidth, myHeight)];

myHTMLLabel.userInteractionEnabled=NO;
myHTMLLabel.scalesPageToFit=NO;

[myHTMLLabel setOpaque:NO];
myHTMLLabel.backgroundColor = myBackColor;

NSString *myHTMLText = [NSString stringWithFormat:@"<html>"
                        "<head><style type='text/css'>"
                        ".main_text {"
                        "   display: block;"
                        "   font-family:[fontName];"
                        "   text-decoration:none;"
                        "   font-size:[fontSize]px;"
                        "   color:[fontColor];"
                        "   line-height: [fontSize]px;"
                        "   font-weight:normal;"
                        "   text-align:[textAlign];"
                        "}"
                        "</style></head>"
                        "<body> <SPAN class='main_text'>[text]</SPAN></body></html>"];

myHTMLText = [myHTMLText stringByReplacingOccurrencesOfString: @"[text]" withString: myText];
myHTMLText = [myHTMLText stringByReplacingOccurrencesOfString: @"[fontName]" withString: myFontName];
myHTMLText = [myHTMLText stringByReplacingOccurrencesOfString: @"[fontSize]" withString: myFontSize];
myHTMLText = [myHTMLText stringByReplacingOccurrencesOfString: @"[fontColor]" withString: myFontColorHex];
myHTMLText = [myHTMLText stringByReplacingOccurrencesOfString: @"[textAlign]" withString: myFontAlign];

NSLog(@"*** renderHTMLText --> myHTMLText: %@",myHTMLText);

[myHTMLLabel loadHTMLString:myHTMLText baseURL:nil]; 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2017-08-23T18:13:35.630

如果有人在 Swift 3 中寻找解决方案，我使用了这个（基于 jterry 的回答）：

```
let font = UIFont.init(name: "Name-of-your-font", size: theSize)
self.newsWebView.loadHTMLString("<span style=\"font-family: \(font!.fontName); font-size: \(font!.pointSize); color: #21367B\">\(yourString)</span>", baseURL: nil) 
```

请注意，在这里我不确定字体是否为零。在加载 HTML 字符串之前可以添加一个 nil 检查。在这里，我还通过在跨度样式中添加颜色选项来更改字体的颜色。这是完全可选的。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-03-05T10:13:07.453

**SWIFT 4.2 的快速解决方案**

```
 let fontName =  "PFHandbookPro-Regular"
    let fontSize = 20
    let fontSetting = "<span style=\"font-family: \(fontName);font-size: \(fontSize)\"</span>"
    webView.loadHTMLString( fontSetting + myHTMLString, baseURL: nil) 
```

*span 是一个内联元素，这意味着它可以与其他元素在一条线上*

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-21T15:26:04.313

`UIWebview`使用在 HTML 中设置的字体。没有“默认字体”。即使没有特别提到字体，您也无权设置它。这一切都在我们无法访问的 WebKit 中。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-05T09:18:51.193

对于 Swift，我在`webViewDidFinishLoad`

```
webView.stringByEvaluatingJavaScriptFromString("document.getElementsByTagName('body')[0].style.fontFamily =\"HelveticaNeue\""); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-03-15T08:33:53.157

```
func webView(_ webView: WKWebView, didFinish navigation: WKNavigation!)
{
     webView.evaluateJavaScript("document.getElementsByTagName('body')[0].style.fontFamily =\"-apple-system\"")
     webView.evaluateJavaScript("document.getElementsByTagName('body')[0].style.fontSize = \"xx-large\"")
} 
```

给熟悉 js 的人加分，把它折叠成一个单一的评估

在 wkwebview 中包装在 span 标签中的效果为零

# javascript - 使用 Javascript 验证选项卡

> ID：12533451
> 
> 赞同：0
> 
> 时间：2012-09-21T15:22:08.597
> 
> 标签：javascript, wordpress, google-maps, dom-events

在我使用 Wordpress 的网站中，我有一个选项卡插件（WP-UI 选项卡、手风琴、滑块），并且由于在两个选项卡中我有 Google 地图嵌入代码，我需要使用 Javascript 函数（不是 jQuery，因为我的插件不允许它）强制调整第二张地图的大小，以便地图的中心不会转到左上角。

那么，是否有 JavaScript 来验证我是否在特定选项卡中调用调整大小图？

```
 <script type="text/javascript">
google.maps.event.trigger(map, "resize");
});
</script> 
```

我需要`if`在触发器之前，但我不知道该放什么。

这是选项卡代码：

```
[wptabs type="accordion" mode="horizontal"]

[wptabtitle] Map 1[/wptabtitle] [wptabcontent] 
```

这是嵌入的谷歌地图代码：

```
[/wptabcontent]

[wptabtitle] Map 2[/wptabtitle] [wptabcontent] 
```

这是嵌入的 Google 地图 2 代码。

```
[cf]js[/cf] //this is to call the js function

[/wptabcontent]

[/wptabs] 
```

更新代码：

Firefox 向我展示了这个：

```
 <div id="wp-accordion-1" class="wp-accordion wpui-light wpui-styles"></p>
<p><h3 class="wp-tab-title"> Place A</h3> <div class="wp-tab-content"><div class="wp-tab-content-wrapper"></p>
<p>Coordenadas GPS:<br />
Latitude: Norte<br />
Longitude: Oeste</p>
<p>&nbsp;</p>
<p><iframe src="http://maps.google.pt/maps?f=q&amp;source=s_q&amp;hl=pt-BR&amp;geocode=&amp;q=42.654471,-2.914153&amp;aq=&amp;sll=41.236676,-8.332331&amp;sspn=0.593802,1.234589&amp;ie=UTF8&amp;ll=40.654471,-7.914153&amp;spn=0.018721,0.038581&amp;t=m&amp;z=14&amp;output=embed" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="100%" height="auto"></iframe><br />
<small><a style="color: #0000ff; text-align: left;" href="http://maps.google.pt/maps?f=q&amp;source=embed&amp;hl=pt-BR&amp;geocode=&amp;q=40.654471,-7.914153&amp;aq=&amp;sll=41.236676,-8.332331&amp;sspn=0.593802,1.234589&amp;ie=UTF8&amp;ll=40.654471,-7.914153&amp;spn=0.018721,0.038581&amp;t=m&amp;z=14" target="_blank">Large Map</a></small></p>
<p></div></div><!-- end div.wp-tab-content --></p>
<p><h3 class="wp-tab-title"> Place B</h3> <div class="wp-tab-content"><div class="wp-tab-content-wrapper"></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><script type="text/javascript">
 document.write("yoooo!");
google.maps.event.trigger(map, "resize");
 document.write("yoooo!");

});
</script></p>
<p>Coordenadas GPS:<br />
Latitude: Norte<br />
Longitude: Oeste</p>
<p>&nbsp;</p>
<p><iframe src="http://maps.google.pt/maps?f=q&amp;source=s_q&amp;hl=pt-BR&amp;geocode=&amp;q=35.541329,-7.730044&amp;aq=&amp;sll=40.654483,-7.914145&amp;sspn=0.00936,0.01929&amp;g=40.654483,-7.914145&amp;ie=UTF8&amp;ll=40.741339,-7.730044&amp;spn=0.018696,0.038581&amp;t=m&amp;z=14&amp;output=embed" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" width="100%" height="auto"></iframe><br />
<small><a style="color: #0000ff; text-align: left;" href="http://maps.google.pt/maps?f=q&amp;source=embed&amp;hl=pt-BR&amp;geocode=&amp;q=40.741339,-7.730044&amp;aq=&amp;sll=40.654483,-7.914145&amp;sspn=0.00936,0.01929&amp;g=40.654483,-7.914145&amp;ie=UTF8&amp;ll=40.741339,-7.730044&amp;spn=0.018696,0.038581&amp;t=m&amp;z=14" target="_blank">Large Map</a></small><br />
</div></div><!-- end div.wp-tab-content --></p>
<p></div><!-- end div.wp-tabs --> 
```

# php - Codeigniter PHP - 在锚点加载视图

> ID：12533455
> 
> 赞同：6
> 
> 时间：2012-09-21T15:22:21.277
> 
> 标签：php, validation, codeigniter

我在一个长页面的底部有一个表单，如果用户填写了表单但它没有验证页面是否以典型的 codeigniter 方式重新加载：

`$this->load->view('template',$data);`

但是，由于表单位于页面底部，因此我需要将页面加载到那里，就像使用 HTML 锚点一样。有谁知道如何在codeigniter中做到这一点？

我无法使用代码点火器

`redirect();`

函数，因为它丢失了对象并且验证错误消失了。我用过的其他框架，比如 Yii，你可以调用重定向函数，比如：

`$this->redirect();`

这解决了问题，因为您保留了对象。我试过使用：

`$this->index()`

在控制器中作为重定向工作正常，但验证错误在另一种方法中，即当前页面的加载位置：

`$this->item($labs)`

但是当我使用它时，它会陷入循环

有任何想法吗？我在网上看到很多这个问题，但没有明确的答案。我正在研究使用codeigniter“闪存数据”，但认为这有点矫枉过正。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T19:31:25.027

我不能亲自担保这一点，但根据[这个线程](http://codeigniter.com/forums/viewthread/119231/#590064)，如果你将锚附加到表单的`action`，它会起作用。

**CodeIgniter 助手：**

```
<?php echo form_open('controller/function#anchor'); ?> 
```

**或原版 HTML：**

```
<form method='post' action='controller/function#anchor'> 
```

如果您愿意使用 Javascript，则可以轻松检测`$validation_failed`变量并适当滚动。或者，更好的是，使用 AJAX。

另一种选择是将表单放在页面顶部附近？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:31:57.830

# java - java中如何避免反斜杠

> ID：12533457
> 
> 赞同：0
> 
> 时间：2012-09-21T15:22:37.813
> 
> 标签：java, core

首先看下面的代码

```
public static void main(String args[])
   {
     System.out.println(new Stringtest().test("The system has saved your payment under        transaction number \369825655."));
    }

private String test(String aa)
    {
        return aa.substring(58);
    } 
```

所以从逻辑上讲，这个方法应该打印 369825665。但由于那个反斜杠，它正在打印 9825655。现在我想要整数。我该怎么办。我无法将 \ 更改为 \\ 因为文本来自网站。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:23:45.960

`\`是一个转义字符。您需要转义转义字符。

```
System.out.println(new Stringtest().test("The system has saved your payment under transaction number \\369825655.")); 
```

有关转义序列的更多信息，请参阅[此 Oracle 文档](http://docs.oracle.com/javase/tutorial/java/data/characters.html)。本质上，反斜杠告诉系统它后面的字符应该以特殊方式解释（而不仅仅是纯文本）。当您转义转义时，它也会被特殊对待......作为纯文本，而不是作为转义字符。

有时它会让人感到困惑，但一旦你了解了核心概念，它就会很直观。

**编辑：**如果您无法控制字符串出现的格式，那么您可能不走运。我一直在 Eclipse 中对此进行调试，似乎一旦你用它创建了你的字符串，转义字符就会被处理，你会丢失交易号的前两位数字。您可能需要让您的数据库人员（或格式化这个可怕字符串的任何人）更改他们的实现，以便您做您需要做的事情。至少，Eclipse 调试器建议了这一点。

碰巧的是，显然，`\36`处理得很好，并被解释为另一个不显示的 ASCII 字符。但在其他情况下，这可能会抛出一个异常作为无效的转义序列。

在我自己的测试中，似乎只要声明/创建了字符串文字，就会发生信息丢失。因此，据我所知，在那之后将无法恢复它。

[调试截图](https://i.imgur.com/R8YS3.png) ![调试信息](../Images/b8993d1094d7c7a9ebb8f56cc77d4487.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:23:42.963

尝试`\\369825655`- 基本上它逃脱了逃生标志。然后用空字符替换所有`\`字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:24:02.857

添加另一个反斜杠（转义字符）

```
ArrayList System.out.println(new Stringtest().test("The system has saved your payment under        transaction number \\369825655.")); 
```

# c# - 使用 C# 浏览 SAS 项目的 OutputDatasets

> ID：12533459
> 
> 赞同：1
> 
> 时间：2012-09-21T15:22:42.140
> 
> 标签：c#, sas

我一直在尝试使用 for C# 浏览 SAS 项目的输出数据集`SAS.EG.Scripting library`，但我一直得到一个空的数据集集合，即使数据集是在 SAS 服务器上正确生成的。

我尝试按照本文中解释的步骤进行操作，这是我在网络研究中发现的有关 SAS 自动化的唯一资源：[不只是用于调度：使用 SAS® Enterprise Guide® 自动化做更多事情](http://support.sas.com/documentation/onlinedoc/guide/examples/SASGF2012/Hemedinger_298-2012.pdf)。

到目前为止我写的代码如下：

```
public static void RunSASProject()
{
    SAS.EG.Scripting.Application EGApp = new SAS.EG.Scripting.Application();
    EGApp.SetActiveProfile("almarci");

    SAS.EG.Scripting.Project EGProject = (SAS.EG.Scripting.Project)EGApp.New();
    SAS.EG.Scripting.Code oCode = (SAS.EG.Scripting.Code)EGProject.CodeCollection.Add();

    try
    {
        oCode.Server = "SASCORP";
        oCode.UseApplicationOptions = false;
        oCode.GenSasReport = false;
        oCode.Name = "Testing";
        oCode.Text = "LIBNAME SRC '/home/cau004/aj/dccvoj/sotcpc/giad/workgroup/Apoio'; DATA SRC.CARS; SET SASHELP.CARS; OUTPUT; RUN;";

        oCode.Run();
        oCode.Log.SaveAs(@"C:\Users\almarci\Desktop\SAS\LogSAS" + DateTime.Now.ToString("ddmmyyyy HHmmss") + ".log");
        oCode.TaskCode.SaveAs(@"C:\Users\almarci\Desktop\SAS\TaskSAS" + DateTime.Now.ToString("ddmmyyyy HHmmss") + ".txt");

        SAS.EG.Scripting.OutputDatasets outputDatasets = (SAS.EG.Scripting.OutputDatasets)oCode.OutputDatasets;
        foreach (SAS.EG.Scripting.OutputData outputData in outputDatasets)
        {
            Console.Write(outputData.Name.ToString());
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine("\n" + ex.Message.ToString());
    }
    finally
    {
        EGApp.Quit();
    }
} 
```

它执行的基本步骤如下：
1）实例化一个Application对象；
2) 定义将用于连接服务器的配置文件；
3）创建一个新项目；
4）在最近创建的项目中添加一个Code对象；
5）设置代码对象属性（名称，文本 - 这是将执行的SAS命令）；
6）运行代码对象；
7) 将代码日志和命令文本保存在 .txt 文件中；
8) 遍历 Code 的 OutputDatasets 集合。这是我得到奇怪行为的地方，因为即使代码成功运行，集合项的计数也设置为零。

有人已经遇到过这种问题吗？我是否忘记在 SAS 命令上写一些关键字或设置所涉及对象的某些属性？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:28:38.927

我写了你引用的那篇论文。

SAS Enterprise Guide 4.3 发布后有一些与自动化相关的修复。你没有在这里说你有哪个版本，但这个问题最好由 SAS 技术支持人员跟踪，他们可以就修补程序提供建议。

此外，为了更深入地了解 SAS 专业知识，请考虑将此类问题发布到[SAS Enterprise Guide 讨论论坛](https://communities.sas.com/community/support-communities/sas_enterprise_guide)。

# python - xrange() 如何在 while 循环中工作？

> ID：12533462
> 
> 赞同：0
> 
> 时间：2012-09-21T14:31:57.070
> 
> 标签：python

[这是我昨天](https://codereview.stackexchange.com/questions/15778/how-can-i-make-this-code-better#comment16852528_12519166)提出的问题的后续问题。我是 python 的新手，目前正在使用 Zed Shaw 的 LPTHW 自学。下面的代码已损坏，我可以使用一些帮助来修复它，我正在尝试制作一个用于 RPG 的随机数生成器。

```
from random import randint
name = raw_input('\n Hello there. Please Type in your name > ')

print """
Hello {} & welcome to the Random Number Generator by Ray Weiss.
""".format(name)

upper = int(raw_input('Enter the type of dice you want to roll > '))

n = int(raw_input("How many D{} you'd like to roll? ".format(upper)))

for _ in xrange(n):
    print randint(1, upper)

prompt = """
Would you like to roll another D{}? Type 'yes', 'no', or 'quit'
""".format(upper)

answer = raw_input(prompt)

while answer == "yes":
    for _ in xrange(n):
            print randint(1, upper)
            prompt = """
            Would you like to roll another D{}? Type 'yes', 'no', or 'quit'
            """.format(upper)
            answer = raw_input(prompt)

if answer == "no":
    upper = int(raw_input('Enter the type of dice you want to roll > '))
    n = int(raw_input("How many D{} you'd like to roll? ".format(upper)))
    for _ in xrange(n):
        print randint(1, upper)
        prompt = """
        Would you like to roll another D{}? Type 'yes', 'no', or 'quit'
        """.format(upper)
        answer = raw_input(prompt)

if answer == "quit":
    print """
    Thank you {} for using the D{} RNG by Ray Weiss! Goodbye!
    """.format(name, upper) 
```

理想情况下，我想要发生的是它首先询问我想要多少面骰子以及想要滚动多少骰子。在那之后，我想让它问我是否想再次滚动相同的骰子和数量，如果我说是，那么它就会这样做。如果我说不，我希望它回过头来问我什么面骰子以及我想再次滚动多少骰子。

编辑：我认为这段代码好一点，但它仍然无法正常工作

```
from random import randint

def roll(sides, num_of_dices):
    return [randint(1, sides) for i in range(num_of_dices)]

prompt = "> "

# Main Program

num_of_dices = input(prompt)
sides = input(prompt)

while True:
  results = roll(sides, num_of_dices)
  print results

  s = input(prompt)
  if s == 'quit':
      break 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:25:03.953

所以，你的程序将是这样的：

```
def roll(sides, num_of_dices):
    # returns some list

# main program

sides = input(...)
num_of_dices = input(...)

while True:
  results = roll(sides, num_of_dices)
  print results

  s = input(...)
  if s == 'quit':
      break 
```

首先尝试分别实现和测试`roll`，准备好后，将其与主程序集成。

至于实现 or `roll`，掷 N 个骰子与掷一个骰子 N 次相同。在 python 中，要执行 N 次操作并收集结果，您可以使用列表推导：

```
results = [action for i in range(N)] 
```

所以，你的动作是掷一面`sides`骰子，我们需要重复那个`num_of_dices`时间。把这一切放在一起，

```
def roll(sides, num_of_dices):
    return [roll_one_dice(sides) for i in range(num_of_dices)] 
```

# java - 要求用户登录facebook才能使用该应用程序

> ID：12533469
> 
> 赞同：0
> 
> 时间：2012-09-21T15:23:17.487
> 
> 标签：java, android, facebook

我正在阅读官方指南：[https](https://developers.facebook.com/docs/mobile/android/build/) ://developers.facebook.com/docs/mobile/android/build/ 我希望用户必须先登录才能使用该应用程序，但正如您在下面看到的图片，用户只需按“X”并继续，我希望登录页面将覆盖整个屏幕，而不是这样：（请不要认为正在显示错误）

![在此处输入图像描述](../Images/4ed5f16382b7054921fdde9f2b51cf81.png)

我希望它是这样的，当用户无法真正取消登录并且必须登录他的帐户才能使用该应用程序时：

![](../Images/bd798744fd1c57e403c7d0294bcadbfa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:33:42.713

您可以使用大按钮“使用 Facebook 登录”创建开始屏幕，直到用户成功登录，他才能离开此屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:36:14.213

为了获得不带“X”的登录身份验证，用户的设备必须安装 Facebook 应用程序。它将启动 Facebook 应用程序来执行本地 SSO，而不是弹出登录身份验证。即使采用这种方式，用户仍然可以取消登录对话框并返回到您的应用程序。

阻止用户在您的应用程序中继续前进的唯一方法是创建一个仅具有从 Facebook 登录选项的屏幕，当您收到有效的访问令牌时，您可以在您的应用程序中启动下一个活动。

# php - 好奇 AJAX 是异步和计划/计时器事件

> ID：12533479
> 
> 赞同：2
> 
> 时间：2012-09-21T15:23:53.167
> 
> 标签：php, ajax, timer, scheduler

我想就我正在考虑的事情澄清一下 AJAX...

AJAX 据说是异步的——如果你想要它是异步的——这意味着如果在页面加载时运行 javascript 并且执行 AJAX 调用，则页面将在服务器处理 AJAX 请求时继续加载......所以假设它可以被比作伪并行是否安全？

现在，两个不同的 javascripts 会如何进行 AJAX 调用。也就是说，当页面加载时，它会一个接一个地遇到两个 js 函数，每个函数都进行 AJAX 调用。因为它们是不同的 js 函数/或两个不同的 js 文件，它们是否必须等待函数返回才能继续？我认为是这样的……

最后我遇到的真正问题...如果我调用了一个 js 函数，并且在该函数中我进行了两个 AJAX 调用，那么它们会被半同时处理...因为我在我的网页上尝试了一些东西，并且是偶然的我一个接一个地放置了两个 AJAX 调用，我认为这就是我得到一些意想不到的结果的原因。不幸的是，我急于交付所以我没有追求它，但我想知道它是否像那样，因为在某些情况下它会非常方便......

像这样的东西

```
function finalizeReservation(){
    var request = $.ajax({
        type:       'POST',
        url:        './scripts/php/reserve.php',
        data:       { 
                },
        dataType:   "json"
    });

    request.done(function(data,textStatus,jqXHR) {

    });

    request.fail(function(jqXHR, textStatus, errorThrown) {
    });

    var request2 = $.ajax({
        type:       'POST',
        url:        './scripts/php/reserve.php',
        data:       { 

                },
        dataType:   "json"
    });

    request2.done(function(data,textStatus,jqXHR) {

    });

    request2.fail(function(jqXHR, textStatus, errorThrown) {
    }); 
```

}

单纯好奇。

我之所以这么想，是因为我有一个记录预订的网页。在完成预订之前，尽管客人可以查看详细信息并进行考虑。在那个时期，数据库中的插槽被设置为待处理并且对另一位客人不可用，因此他们不会发生冲突或进入竞争条件（即在考虑它时另一个完成它，所以当他试图自己完成它时他不能或者如果代码中的粗心也会最终确定它）。问题出在客人的行为中，尽管我已经尝试捕获刷新、后台、退出选项卡、关闭窗口类型的所有事件，因此如果客人出于某种原因没有关闭，则插槽不会停留在挂起状态形成正确的方式（取消）并非所有浏览器都捕获了所有内容。所以我想在服务器中设置一个时间限制，如果它超过它并且状态仍然处于等待状态，则状态被反转为空闲（我有一个分钟计时器的表格，一分钟后它会自动关闭并释放插槽） . 问题是托管服务器不支持 chron 作业，尽管我对它们了解不多，所以我不确定它们会提供多少帮助，并且 mysql 不支持调度程序。所以我考虑进行两个ajax调用，一个是一个计时器，它将在一段时间后检查插槽的状态并采取相应的行动。对它们了解不多，所以我不确定它们会提供多少帮助，而且 mysql 不支持调度程序。所以我考虑进行两个ajax调用，一个是一个计时器，它将在一段时间后检查插槽的状态并采取相应的行动。对它们了解不多，所以我不确定它们会提供多少帮助，而且 mysql 不支持调度程序。所以我考虑进行两个ajax调用，一个是一个计时器，它将在一段时间后检查插槽的状态并采取相应的行动。

任何想法表示赞赏。对不起，很长的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:37:41.163

您没有关于 Ajax 的具体问题，但您似乎对它有很好的理解，并且您所说的一切都是正确的。至少对于 jQuery，默认情况下它是异步的，除非您使用，否则`Deferred`无法保证在 ajax 调用之后执行的代码不会在 ajax 调用之前完成。

您的实际问题似乎是关于如何处理保留的陈旧锁。几个建议：

*   移动到另一个共享主机。我每年为允许 cron 作业的共享主机支付 15 美元。
*   每当有人访问该页面时，请检查所有锁定的预订，如果它们足够老，则假定该锁定已过时。

另一个 ajax 调用将无济于事。如果他们关闭页面怎么办？您可以尝试使用`onbeforeunload`, 来提醒将删除锁定的对话框，但这非常具有侵入性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:41:59.117

ajax 函数之后的代码将继续执行，无需等待 ajax 函数完成，除非后面的代码在`callback`ajax 函数中。

# java - 禁用 HTC 手势选项

> ID：12533489
> 
> 赞同：1
> 
> 时间：2012-09-21T15:24:20.463
> 
> 标签：java, android, android-layout

我有一台 HTC One X。我可以从设置中禁用它 -> 选择显示和手势 -> 取消选中“HTC 手势”。

但是如何以编程方式禁用手势选项？

# css - 除了悬停在div上之外，如何定位同一类的所有div？

> ID：12533491
> 
> 赞同：0
> 
> 时间：2012-09-21T15:24:24.183
> 
> 标签：css, css-selectors

我有一组具有相同类的 div（如果它使这更容易，它们不必具有相同的类）。理想情况下，我想要的是当用户将鼠标悬停在其中一个 div 上时，其他 div（每个都有背景图像）都变成灰色以将焦点放在当前悬停的 div 上。如果是悬停在上面的 div 正在发生变化，我会很好，但我真的不知道如何解决这个问题。某种兄弟选择器？如果解决方案不向后兼容，我宁愿只使用 css 并且很高兴。

到目前为止，这是我的代码。提前致谢！

```
.box:hover (SELECT ALL OTHER .BOX) {
-webkit-filter: grayscale(100%);
-moz-filter: grayscale(100%);
-o-filter: grayscale(100%);
-ms-filter: grayscale(100%);
filter: grayscale(100%); } 
```

编辑：我意识到我可以给每个盒子一个不同的类，然后说当盒子 1 悬停在上面时，盒子 2、3、4 等变灰，然后为每个盒子做这件事.. 但这似乎有很多代码简单的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:48:16.103

以下解决方案仅在您的元素相邻时才有效，例如导航栏。也许这不是你的情况，但它可以帮助别人。必须说它是跨浏览器的CSS2。

把你包裹`<div>`在一个容器里：

```
<div class="container">
    <div class="target"></div>
    <div class="target"></div>
    <div class="target"></div>
    <div class="target"></div>
    <div class="target"></div>
</div> 
```

并用它来控制`:hover`

```
.target {
    background-color: #444;
}
.container {
    float: left;
}
.container:hover .target {
    background: #bbb;
}
.container .target:hover {
    background: #444;
} 
```

它在[这里工作](http://jsfiddle.net/simbirsk/4DBQk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:29:18.577

没有兄弟组合器可以让您选择另一个元素的所有其他兄弟。如其他答案所示，您可以原子地表示这一点`.box:not(:hover)`，但您不能选择*相对于*同一父项中的元素的所有其他`.box:not(:hover)`元素。*`.box:hover`*

 *`+`您可以使用兄弟组合子和中途做到这一点`~`，但它们只查看跟随元素的兄弟姐妹：

```
.box:hover ~ .box {
    -webkit-filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    filter: grayscale(100%);
} 
```

这意味着如果您将鼠标悬停在第 2 个框上，则只有第 3 和第 4 个框会变灰，而第一个框不会变灰。

没有办法使用 CSS 选择前面的兄弟姐妹。目前，完成您想要的唯一方法是在悬停特定框时使用 JavaScript 在其他框上切换样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:27:07.440

使用`:not` **CSS3**选择器

```
div.box:not(:hover) { ... } 
```

*如果这就是你的意思...**

# java - 解释 XMLBeans 如何处理“-”字符

> ID：12533494
> 
> 赞同：1
> 
> 时间：2012-09-21T15:24:44.617
> 
> 标签：java, xml, xsd, xmlbeans

我有一个包含“-”字符的 XSD 元素的文件。这是对 XSD 文件的最新更改，在编译文件后，我发现我的 java 代码中使用的访问器方法没有任何更改。此外，当我尝试在我的 java 代码中调用此元素时，它会引发空指针异常。我在编译 xsd 文件时没有收到任何错误，我已经多次重新启动并清理了我的项目。

有人可以解释一下 XMLBeans 是如何处理添加“-”字符的，或者我如何能更好地处理这种情况？

例子：

老的：

```
<xs:element minOccurs="0" maxOccurs="1" name="FooBoo"> 
```

旧访问器方法：

```
getFooBoo(); 
```

新的：

```
<xs:element minOccurs="0" maxOccurs="1" name="Foo-Boo"> 
```

新的存取方法：

```
getFooBoo(); 
```

预期的新访问器方法：getFoo_Boo();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T21:34:01.193

XmlBeans 通过将 XSD 属性名称拆分为单词部分、将每个部分大写并将单词组合在一起来生成 getter 和 setter 方法名称。任何非单词字符都被视为单词部分边界并将被跳过。

该算法的确切细节可以在[StscJavaizer.pickJavaPropertyName()](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.xmlbeans/xmlbeans/2.4.0/org/apache/xmlbeans/impl/schema/StscJavaizer.java#StscJavaizer.pickJavaPropertyName%28java.util.Set,java.lang.String,java.lang.String%29)和[NameUtil.upperCamelCase()](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.xmlbeans/xmlbeans/2.4.0/org/apache/xmlbeans/impl/common/NameUtil.java#NameUtil.upperCamelCase%28java.lang.String%29)中找到。

# c# - 网络浏览器、脚本和可能的替代方案

> ID：12533496
> 
> 赞同：2
> 
> 时间：2012-09-21T15:24:50.483
> 
> 标签：c#, javascript, wpf, c#-4.0, browser

我有一种情况，一个相当聪明的网站通过 TCP 连接通过 Shockwave Flash 更新网站上的最新信息。收到的数据然后通过 JavaScript 更新到页面上，因此为了获取最新数据，需要浏览器。如果试图通过不断的请求访问该网站，那么 a) 你会被禁止，并且 b) 你实际上并没有获得最新的数据，只有最后更新的基础框架。

所以我需要运行一个启用脚本的浏览器。

我的第一个问题是，在 .NET 中使用标准 WPF WebBrowser 我会收到以下警告，而这些警告在标准 IE、Chrome 或 Firefox 中是没有的。是什么导致了这种情况，我如何抑制/允许它但仍然允许运行该站点的脚本？

![在此处输入图像描述](../Images/388df34d72f225681663ab510b7605fd.png)

我的第二个问题涉及到是否有更好的方法来做到这一点，或者是否有更好的替代 WebBrowser 控件的方法

*   允许脚本运行

*   可以访问至少以文本格式返回的 DOM 或 html 和脚本

*   与 WPF 兼容

*   可以隐藏浏览器，因为我实际上并不希望它显示。

到目前为止，我已经研究了 WebKit.NET，它似乎不允许访问 DOM，并且在我测试时不喜欢 WPF 窗口以及 Awesomium，但似乎又不允许在没有 javascript 的情况下直接访问 DOM。

还有其他选择吗（除了破解他们的脚本）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:29:27.090

放`WebBrowser.ScriptErrorsSuppressed = true;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-22T17:31:22.480

最终，我最终保留了 WPF 控件并使用[此](http://www.codewrecks.com/blog/index.php/2010/08/31/disable-javascript-error-in-wpf-webbrowser-control/)代码注入 JavaScript 脚本以禁用 JavaScript 错误。`Microsoft HTML Object Library`需要添加的。

```
 private const string DisableScriptError =    @"function noError() { return true;} window.onerror = noError;";

    private void webBrowser1_Navigated(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        InjectDisableScript();
    }

    private void InjectDisableScript()
    {

        HTMLDocumentClass doc = webBrowser1.Document as HTMLDocumentClass;
        HTMLDocument doc2 = webBrowser1.Document as HTMLDocument;

        IHTMLScriptElement scriptErrorSuppressed = (IHTMLScriptElement)doc2.createElement("SCRIPT");
        scriptErrorSuppressed.type = "text/javascript";
        scriptErrorSuppressed.text = DisableScriptError;
        IHTMLElementCollection nodes = doc.getElementsByTagName("head");

        foreach (IHTMLElement elem in nodes)
        {
            HTMLHeadElementClass head = (HTMLHeadElementClass)elem;
            head.appendChild((IHTMLDOMNode)scriptErrorSuppressed);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:43:05.063

WPF`WebBrowser`没有这个属性作为 WinForms 控件。

您最好`WindowsFormsHost`在 WPF 应用程序中使用 a 并使用 WinForms `WebBrowser`（以便您可以使用`SuppressScriptErrors`.）。确保您在完全信任的情况下运行。

# php - Phalcon\Tag::linkTo URL 不包含项目所在的子文件夹

> ID：12533499
> 
> 赞同：1
> 
> 时间：2012-09-21T15:25:04.133
> 
> 标签：php, rewrite, phalcon

我正在使用 PHP 5.3、phalcon 0.5.0 关注 OS X 10.8 上的[教程。](http://docs.phalconphp.com/en/0.5.0/reference/tutorial-invo.html)`tutorial`我的 apache 的 web 根目录中有一个名为的文件夹。当我使用代码时：

```
echo Phalcon\Tag::linkTo("signup", "Sign Up Here!"); 
```

在我得到的输出html中

```
localhost/signup 
```

代替

```
localhost/tutorial/signup 
```

我还在我的 .htacess 文件中输入了 RewriteBase /tutorial/，但仍然遇到同样的问题。我在 phalcon 的 0.4 和 0.5 中遇到了同样的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:25:04.133

URL 重写需要在引导期间在项目的 DI 容器中注册（文件 public/index.php）

```
// Setting up the view component
$di->set(
    'url', 
    function() {
        $url = new \Phalcon\Mvc\Url();
        $url->setBaseUri('/tutorial/');
        return $url;
    }
); 
```

这将有效地指示 Phalcon 在内部使用子文件夹以及[\Phalcon\Tag::linkTo()](http://docs.phalconphp.com/en/0.5.0/api/Phalcon_Tag.html)函数。请注意 setBaseUri() 中的结尾斜杠“/”字符

# perl - 通过 svn checkout 更新脚本的配置文件

> ID：12533501
> 
> 赞同：0
> 
> 时间：2012-09-21T15:25:07.243
> 
> 标签：perl, svn

我需要编写一个能够登录到 svn 存储库的脚本，并为我在许多服务器上运行的脚本签出配置文件。

Perl 是我唯一可以使用的脚本语言，但我完全是 perl 新手。

有人可以指出我正确的方向，也许给我一些示例和/或文档的链接。

更新：我无法在远程服务器上安装 svn。不安装svn就不行吗？

吉斯利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T17:40:58.767

使用 LWP::Simple 并通过 HTTP 获取它：

```
#!/usr/bin/perl

use LWP::Simple;

my $config = get("http://username:password@svn.yourserver.com/configfile/"); 
```

或者只是在启动脚本之前使用 wget 来获取它。

# c# - 用辅助例程封装事件订阅者同步代码

> ID：12533502
> 
> 赞同：1
> 
> 时间：2012-09-21T15:25:10.197
> 
> 标签：c#, events, delegates, synchronization, subscriber

我试图将遍历事件委托的订阅者列表所需的代码包装到静态帮助程序中，这样我就不需要为许多事件处理程序复制/粘贴相同的代码。我仍在学习 C# 的来龙去脉，而且我在细节上磕磕绊绊。

帮助程序将遍历事件订阅者列表并单独调用每个订阅者，以便订阅者的线程可以自动同步。许多事件将从 GUI 中的各种表单订阅，因此无需在每个表单类中管理事件的线程同步。

下面的代码显示了该概念的一个示例。最后一行....

```
singleCast.Invoke(paramList); 
```

...由于几个原因，显然是无效的。

**如何在不使用我理解的非常慢的 DynamicInvoke 方法的情况下调用每个订阅者？**

**有没有办法传入类型引用，以便 ForEach 返回特定事件 Delegates 与泛型 Delegates ？**

请参见下面的示例代码：

```
namespace Reflection_Diagnostics
{
    // ***********************
    // *** Event Delegates ***
    // ***********************

    public delegate void SystemPoll();
    public delegate void SystemStart(int option);
    public delegate void SystemEnd();

    class clsTestEvents
    {
        // **************
        // *** Events ***
        // **************

        public event SystemPoll Event_SystemPoll;
        public event SystemStart Event_SystemStart;
        public event SystemEnd Event_SystemEnd;

        // ***********************
        // *** Event Overrides ***
        // ***********************

        private void OnEvent_SystemPoll()  // Event Override
        {
            MyToolBox.SyncEvents(Event_SystemPoll);
        }

        private void OnEvent_SystemStart(int option)  // Event Override
        {
            MyToolBox.SyncEvents(Event_SystemStart, option);
        }

        private void OnEvent_SystemEnd()  // Event Override
        {
            MyToolBox.SyncEvents(Event_SystemEnd);
        }

        // ***********************
        // *** Test The Events ***
        // ***********************

        public void TestTheEvents()
        {
            Event_SystemPoll();
            Event_SystemStart(1);
            Event_SystemEnd();
        }
    }

    public class MyToolBox
    {
        // *******************
        // *** Sync Events ***
        // *******************
        // Iterate through the event subscriber list and synchronize to the subscriber thread when needed

        static public void SyncEvents(Delegate handler,  params object[] paramList)
        {
            if (null != handler)
            {
                foreach (Delegate singleCast in handler.GetInvocationList())
                {
                    ISynchronizeInvoke syncInvoke = singleCast.Target as ISynchronizeInvoke;
                    try
                    {
                        if ((syncInvoke != null) && (syncInvoke.InvokeRequired))
                        {
                            syncInvoke.Invoke(singleCast, paramList);   // Subscriber is on a different thread
                        }
                        else
                        {
                            // Error:  System.Delegate does not contain a definition for 'Invoke'.....
                            // singleCast is a generic Delegate, and so cannot be directly invoked.
                            // DynamicInvoke is avialable, but is much, MUCH, MUCH!! slower to execute

                            singleCast.Invoke(paramList);  // Subscriber is on the same thread
                        } 
                    }
                    catch
                    {
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:48:48.707

不清楚你在问什么。您不必使用`DynamicInvoke`方法，您可以简单地“调用”委托：

```
foreach (EventHandler<EventArgs> subscriber in handler.GetInvocationList())
{
    ISynchronizeInvoke control = null;
    if (subscriber.Target != null)
    {
        control = subscriber.Target as ISynchronizeInvoke;
    }
    if (control != null)
    {
        if (control.InvokeRequired)
        {
            control.BeginInvoke(subscriber, new object[] {this, EventArgs.Empty});
            continue;
        }
    }
    subscriber(this, EventArgs.Empty); // just "call"
} 
```

但是，您的示例代码没有使用`DynamicInvoke`，所以我不清楚问题是什么。

即使使用您的示例代码或上面的代码，您有时也不会`Target`调用任何实例 ( ) `InvokeRequired`，例如：

```
 button1.Click += button1_Click;
//...

private static void button1_Click(object sender, EventArgs e)
{
    Button button = sender as Button;
    if (button == null) throw new InvalidOperationException();
    DoSomeAsyncOperation();
} 
```

或者

```
button1.Click += (o, args) =>
                    {
                    DoSomethingOnClick();
                    }; 
```

*所以，真的，有时*你只会得到你想要的东西，而你的框架的用户有时仍然需要处理`InvokeRequired`。另外，您让他们创建的代码与 winform 或 WPF 上的几乎所有其他实现都不同，从而使其更难学习。此外，“隐藏”的异步调用就是这样：隐藏——使其更难调试。

# html - 只允许输入标签中没有 Javascript 的数字

> ID：12533508
> 
> 赞同：10
> 
> 时间：2012-09-21T15:25:18.047
> 
> 标签：html, asp.net-mvc-3, input

我相当新。我正在创建一个网页，要求用户提供他们的 ID。我希望它是必填字段，并且只允许数字。如果您能引导我朝着正确的方向前进，我将不胜感激。这就是我到目前为止所拥有的。

```
<%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<dynamic>" %>

<!DOCTYPE html>

<html>
<head runat="server">
  <title>Search</title>
</head>
<body>
 <div>
  <table align="center">
    <tr>
        <td class="label">
            Enter ID:
        </td>
         <td>
            <input type="text" name="UserId" id="UserId" />
        </td>
     </tr>
   </table>
  </div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-21T15:58:37.080

尽管可能建议通过 JS 或在服务器上进行一些更重的验证，但 HTML5[确实](http://www.pageresource.com/html5/input-validation-tutorial/)通过模式属性支持这一点。

```
<input type= "text" name= "name" pattern= "[0-9]"  title= "Title"/> 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-11-23T00:56:23.547

在 [0-9] 之后用 + 试试这个：

```
input type="text" pattern="[0-9]+" title="number only" 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-21T15:38:43.707

当然，您不能完全依赖**客户端**(javascript)**验证**，但这不是完全避免它的理由。无论有没有它，您都必须进行**服务器端验证**（因为客户端可以**禁用 javascript**）。由于您的非 JavaScript 解决方案限制，这就是您所剩下的。

因此，在提交之后，如果字段值没有通过**服务器端验证**，客户端应该会在同一个页面上结束，并带有指定请求**值格式的附加****错误消息**。**您还应该事先**提供值格式信息，例如作为工具提示提示（属性）。****`title`****

 ****HTML 4 / XHTML 中肯定不存在被动客户端验证机制。

另一方面，在**HTML 5**中，您有两种选择：

*   输入类型[**`number`**](http://www.w3schools.com/html/html5_form_input_types.asp)：

    ```
    <input type="number" min="xxx" max="yyy" title="Format: 3 digits" /> 
    ```

    – 仅验证范围 – 如果用户输入非数字，则提交 **空值**
    – 使用增量/减量控件增强字段视觉效果（取决于浏览器）

*   [**`pattern`**](http://www.w3schools.com/html5/att_input_pattern.asp)属性：

    ```
    <input type="text" pattern="[0-9]{3}" title="Format: 3 digits" />
    <input type="text" pattern="\d{3}" title="Format: 3 digits" /> 
    ```

    – 这使您可以完全控制格式（您可以通过[**正则表达式**](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)指定的任何内容）
    – 没有视觉差异/增强

但是在这里您仍然依赖于**浏览器功能**，因此无论哪种情况都要进行服务器端验证。****

# java - 错误：无法加载 JDBC 驱动程序 - org.hsqldb.jdbcDriver

> ID：12533515
> 
> 赞同：2
> 
> 时间：2012-09-21T15:26:03.570
> 
> 标签：java, database, eclipse, hsqldb

我写了一个连接器类来连接到 hsqldb。

这是我的代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import org.apache.log4j.Logger;

public class hsqlmanager {

        private static final Logger log = Logger.getLogger(hsqlmanager.class);

        private static Connection con=null;

        private static void openConnection(){
            try {
                Class.forName("org.hsqldb.jdbcDriver" );
                log.info("Loaded JDBC Driver");
            } 
            catch (Exception e) {
                log.error("ERROR: failed to load JDBC driver - " + e.getMessage());
                return;
            }

            try {
                con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/sepm_db","sa","");      
            }
            catch(SQLException e){
                log.error(e.getMessage());
            }
        }

        public static void closeConnection() {
            try {
                con.close();
            }
            catch(SQLException e) {
                log.error(e.getMessage());
            }
        }

        public static Connection getConnection() {
            if (con==null){
                openConnection();
            }
            else {
                try {
                if(con.isClosed()){
                    con = DriverManager.getConnection("jdbc:hsqldb:hsql://localhost/sepm_db","sa","");

                }
                }
                catch(SQLException e){
                    log.error(e.getMessage());
                    return null;
                }
            }

            return con;
        }

} 
```

当我编译时出现错误：无法加载 JDBC 驱动程序 - org.hsqldb.jdbcDriver。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:36:16.200

您需要下载[hsqldb](http://sourceforge.net/projects/hsqldb/files/)并在您的类路径中提供它。驱动程序位于 zip 文件中。

# html - JavaScript - 如何以百分比设置按钮的宽度/位置？

> ID：12533524
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:26:22.600
> 
> 标签：html, mobile, rotation

当移动设备旋转时，我需要设置页面中元素的位置/大小...

我努力了：

```
frame.width = 30%;
button.width = 50%; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:38:15.337

专家 Chris Coyier 就如何根据媒体查询对设备方向进行分类提供了极好的建议。

```
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) { 
```

[这是文章](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)。

这是响应式网页设计新兴领域的一个关键话题。

这是一个简单的例子：

```
<style>
    /* iPads (landscape) ----------- */
    @media only screen 
    and (min-device-width : 768px) 
    and (max-device-width : 1024px) 
    and (orientation : landscape) {
    /* Styles */
         .frame{width : 30%;}
         .button{width : 50%;}
    }
</style> 
```

或者，包含在单独的 css 文件中：

```
<link rel="stylesheet" href="./responsiveness.css"> 
```

好问题。希望有帮助。

# android - 如何扩展主类以在 Android 上同时使用 Sherlock Action Bar 和 PhoneGap

> ID：12533527
> 
> 赞同：0
> 
> 时间：2012-09-21T15:26:30.467
> 
> 标签：android, cordova, actionbarsherlock

我有一个问题，我想在一个 Android 项目上同时使用 Sherlock Action Bar 和 PhoneGap。

我阅读了另一篇关于 Android 不支持多个扩展的堆栈溢出帖子。

这是我的工作代码。

```
package com.inmo.mobile;

// import org.apache.cordova.DroidGap;
import android.os.Bundle;
import android.widget.Toast;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

import android.app.Activity;
import org.apache.cordova.*;

//public class Inmo extends DroidGap {
//
//    @Override
//    public void onCreate(Bundle savedInstanceState) {
//        super.onCreate(savedInstanceState);
//        super.setIntegerProperty("splashscreen", R.drawable.splash);
//        super.loadUrl("file:///android_asset/www/index.html", 5000);
//    }
//    
//}

public class Inmo extends SherlockActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == R.id.favorites) {
            //startActivity(new Intent(this, FavoritesActivity.class));
            Toast.makeText(this, "favoritos pulsado", Toast.LENGTH_SHORT).show();
        } else if (item.getItemId() == R.id.preferences) {
            Toast.makeText(this, "configuración pulsado", Toast.LENGTH_SHORT).show();
        }
        return true;
    }

} 
```

它被评论的PhoneGap代码，当一个被评论而另一个没有被评论时，这两个代码都有效，所以我需要两个将两者结合起来并将主类扩展到sherlock和phonegap（包括到cordova webview）。

这有可能吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:15:34.577

您是否尝试过使用静态附件方法？例如：

```
public class Inmo extends DroidGap implements ActionBar.TabListener, 
        OnCreateOptionsMenuListener, OnMenuItemSelectedListener {
    private ActionBarSherlock mSherlock;

    protected final ActionBarSherlock getSherlock() {
        if (mSherlock == null) {
            mSherlock = ActionBarSherlock.wrap(this);
        }
        return mSherlock;
    }

    //...
} 
```

# php - Yii set not beign call before beforeSave？

> ID：12533530
> 
> 赞同：0
> 
> 时间：2012-09-21T15:26:51.043
> 
> 标签：php, yii, model, yii-components

小问题..我有一个表，将一些系统变量存储为序列化数组。在我的模型中，我必须使用函数来设置并将该字段转换为可读形式。他们是：

```
public function setoptPramasString($value){
     $this->opt_pramas = '';

     $str1 = explode(',', $value);
     foreach ($str1 as $str2) {
         $myVal = explode('=>', $str2);
         $this->opt_pramas[trim($myVal[0])] = (string)trim($myVal[1]);   
         echo "<BR>".$myVal[0]." => ".$myVal[1];
     }
 }

/**
 * 
 */
 public function getoptPramasString(){
     $str = '';
     $x = 0;
     foreach ($this->opt_pramas as $key => $value) {
         if($x == 0){
            $str .= $key."=>".$value;
             $x++;
         }else{
             $str .= ", ".$key."=>".$value;
         }

     } 
```

**我的保存前和查找后功能是：**

```
/**
 * 
 */
 public function beforeSave(){

     $this->opt_pramas = serialize($this->opt_pramas);
     return parent::beforeSave();
 }

 /**
  * 
  */
  public function afterFind(){
      $this->opt_pramas = unserialize($this->opt_pramas);
      return parent::afterFind();
  } 
```

**我在控制器中的更新操作是：**

```
public function actionUpdate($id)
{
    $model=$this->loadModel($id);

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['SystemMenuSearch']))
    {
        $model->attributes=$_POST['SystemMenuSearch'];
        if($model->save()){
            $this->redirect(array('view','id'=>$model->search_id));    
        }
    }

    $this->render('update',array(
        'model'=>$model,
    ));
} 
```

似乎正在发生的是`beforeSave`函数在函数之前被调用`setoptPramaString`。这是 Yii 中的错误还是我遗漏了什么？我的逻辑是，当将值设置为模型属性时，它将触发`setoptPramaString`函数，然后在模型上调用 save 时，它​​将触发模型中的`beforeSave`函数。我检查了我的表格，名字是正确的，`SystemMenuSearch[optPramaString]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:26:51.043

`$model->attributes = $_POST[SystemMenuSearch]`问题似乎是，当您使用该`setoptPramasString`函数分配一批变量时，不会触发。我不确定这是错误还是设计使然。

相反，您需要致电：

```
$model->attributes = $_POST[SystemMenuSearch];
$model->optPramasString = $_POST[SystemMenuSearch][optPramasString]; 
```

这似乎是违反逻辑的，但可能是因为框架或 PHP 的限制。

希望这对其他人有帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:08:28.247

当您通过 setAttributes 属性批量分配参数时

```
$model->attributes = $_POST[SystemMenuSearch]; 
```

它们将被忽略，因为它们不在安全属性列表中

# python - 如何使 tkinter 窗口居中并保持“适合儿童”的行为？

> ID：12533532
> 
> 赞同：3
> 
> 时间：2012-09-21T15:26:53.493
> 
> 标签：python, tkinter

我有一个内容发生变化的窗口。有时内容比窗口大，所以窗口会扩展以适应它的孩子。但是，当我使用对“几何”的调用使窗口居中时，窗口不再调整大小。下面，您将找到说明这一点的代码。

如果您注释掉延迟的 center() 函数调用，您会注意到窗口会扩展以适应其内容。如果您保持原样，则窗口居中，但不再扩展以适应其内容。

是否可以将窗口居中*并*让它继续调整大小以适应其内容？

```
from Tkinter import *
import ttk

def center(root):
    w = root.winfo_screenwidth()
    h = root.winfo_screenheight()
    rootsize = tuple(int(_) for _ in root.geometry().split('+')[0].split('x'))
    x = w/2 - rootsize[0]/2
    y = h/2 - rootsize[1]/2
    root.geometry("%dx%d+%d+%d" % (rootsize + (x, y)))

root = Tk()
var = StringVar()
var.set('Small Text')

label = ttk.Label(root, textvariable=var)
label.grid(column=0, row=0)

# Change the text label in a couple of seconds.
def changeit():
    var.set('BIG TXT - ' * 5)
root.after(2000, changeit)

# Comment out this center call and the label expands.
root.after(100, lambda: center(root))
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:35:26.377

当您调用几何命令时，不要提供宽度和高度——只需提供 x/y 值。当你给它一个明确的宽度和高度时，你是在告诉 Tk “我希望窗口正好是这个大小”，所以它会关闭它的自动调整大小行为。

```
root.geometry("+%d+%d" % (rootsize + (x, y))) 
```

此外，您可以使用`winfo_width()`and`winfo_height()`来获取窗口的实际大小，而不是解析`geometry`方法的输出。

# http - 使用 HttpClient 从 ASP.NET WebApi 异步读取分块内容

> ID：12533533
> 
> 赞同：13
> 
> 时间：2012-09-21T15:26:58.073
> 
> 标签：http, rest, asynchronous, asp.net-web-api

我想使用 HttpClient 异步读取分块（在 HTTP 1.1 分块传输编码的意义上）内容。

我正在查看 HttpContent 异步方法： [MSDN 链接](http://msdn.microsoft.com/en-us/library/hh193663.aspx)

但是，对于字节数组返回Task的情况，例如：

> 返回的 Task 对象将在所有内容写入字节数组后完成

我得到分块的内容正是因为服务器不提前知道所有数据何时可用，因此我不知道所有内容何时到达。我希望能够在块到达时读取它们，而不是等待可能几个小时来完成任务。

我可以以某种方式读取响应内容的一部分，例如在收到每 4K 字节的内容作为响应时完成一些任务吗？

在这种情况下使用 HttpClient 是否有优势？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-22T00:48:21.493

使用 HttpClient.SendAsync 您可以传递一个 HttpCompletionOption 参数来告诉 HttpClient 不要为您缓冲响应并在它获得标头后立即返回。然后，您可以使用 ReadAsStreamAsync 获取一个流，该流将允许您在数据到达时提取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-13T16:40:22.660

[这](http://www.tugberkugurlu.com/archive/efficiently-streaming-large-http-responses-with-httpclient)是一个完整的示例，说明如何下载文件而不将其内容读取到内存中，并附有说明。工作精美。

```
static async Task HttpGetForLargeFileInRightWay()
{
    using (HttpClient client = new HttpClient())
    {
        const string url = 
"https://github.com/tugberkugurlu/ASPNETWebAPISamples/archive/master.zip";
        using (HttpResponseMessage response = await client.GetAsync(url, 
HttpCompletionOption.ResponseHeadersRead))
        using (Stream streamToReadFrom = await response.Content.ReadAsStreamAsync())
        {
            string fileToWriteTo = Path.GetTempFileName();
            using (Stream streamToWriteTo = File.Open(fileToWriteTo, FileMode.Create))
            {
                await streamToReadFrom.CopyToAsync(streamToWriteTo);
            }
        }
    }
} 
```

或者代替使用`CopyToAsync()`，您可以通过使用读取流`StreamReader`

```
using (var stream = await response.Content.ReadAsStreamAsync())
using (var reader = new StreamReader(stream))
{
    int bytesCount = 100;
    var buffer = new char[bytesCount];
    reader.ReadBlock(buffer, 0, bytesCount);
} 
```

# android - Android java.lang.ClassCastException

> ID：12533536
> 
> 赞同：2
> 
> 时间：2012-09-21T15:27:16.310
> 
> 标签：android, android-layout

我正在加载带有关闭按钮和滑动按钮的 web 视图。当我点击

主要的.xml

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFFFF" 
    android:layout_marginRight="25dip"
    android:layout_marginTop="25dip"
    android:layout_marginLeft="25dip"
    android:layout_marginBottom="25dip" >
<WebView
    android:id="@+id/webac_larger"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
</WebView>

<ImageView android:id="@+id/close_btn"         
    android:layout_alignParentTop="true"         
    android:layout_alignParentRight="true"         
    android:layout_width="wrap_content"         
    android:layout_height="wrap_content"
    android:src="@drawable/close_button"
    android:layout_marginTop="-3dip"
    android:layout_marginRight="0dip"
    />  

<ImageButton 
    android:id="@+id/slidebutton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:layout_toLeftOf="@+id/close_btn"
    android:src="@drawable/arrowleft" /> 
```

我想通过单击按钮来调整 webview 的大小。

```
final ImageButton button1 = (ImageButton) findViewById(R.id.slidebutton);
        button1.setOnClickListener(new OnClickListener() {
          public void onClick(View v) {
            Log.d("MultiWeb", "I have clicked the button");
            RelativeLayout params = ((RelativeLayout )button1.getParent());
             params.setLayoutParams(new RelativeLayout.LayoutParams(100, 100));
          }
        }); 
```

我收到此错误。我正在使用关联布局，为什么错误说明了框架布局？

```
java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams cannot be cast to android.widget.FrameLayout$LayoutParams 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:03:12.983

如[Android Layouts API Guide](http://developer.android.com/guide/topics/ui/declaring-layout.html#layout-params)中所述，每种类型`ViewGroup`都有自己的`LayoutParams`类，用于定义 child`View`的大小和位置。

您可以调用视图以获取当前参数对象，根据需要对其进行修改，然后调用以应用更新的参数，而不是创建其中一个类的全新实例`LayoutParams`并冒风险。`ClassCastException``getLayoutParams()``setLayoutParams()`

# jquery - 使用jquery更改元素内的文本时调用函数？

> ID：12533539
> 
> 赞同：2
> 
> 时间：2012-09-21T15:27:23.147
> 
> 标签：jquery

当我页面上的元素内的文本发生变化时，我想执行一个函数。该元素中的文本由另一个外部 JS 函数更新，因此我对该函数没有任何控制权。

更新：元素是一个跨度。

```
<span class="dynamic">some Text</span> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T15:28:40.357

有一个解决方法，

**[现场演示](http://jsbin.com/afudor/1/edit)**

```
$('#elementId').change(function(){
   alert("changed");
});

var previousVal = "";
function InputChangeListener()
{
   if($('#elementId').val() != previousVal)
   {
     previousVal  = $('#elementId').val();
     $('#elementId').change();    
   }
}

setInterval(InputChangeListener, 500);

$('#elementId').val(3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:35:35.423

尝试在该元素上添加事件

```
$('.target').change(function() {
  alert('Handler for .change() called.');
}); 
```

详情：[http ://api.jquery.com/change/](http://api.jquery.com/change/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:43:42.913

您可以通过将元素绑定到更改事件来做到这一点，并且当您设置文本值时，`text()`您将立即调用`change()`该元素。

这是一个例子：http: [//jsfiddle.net/WWuNf/1/](http://jsfiddle.net/WWuNf/1/)

html:

```
<div id="field">Foo</div>
```

脚本：

```
$(document).ready(function(){
    $('#field').on('change', function(evt){
        foo();
    }).text('Bar').change();
});

function foo() {
 alert('changed');        
} 
```

编辑：当然，这是当您的字段的值通过其他方式而不是通过直接用户交互发生变化时。对于类似的事情，您需要绑定到`keyup()`或`keypress()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:14:09.823

鉴于该`change()`方法需要显式触发该事件，并且可能并非总是如此，我想我会提供一个有点笨拙的替代方案，使用突变事件。

在这种方法中，我将`body`元素设置为侦听`DOMCharacterDataModified`事件，当 a`textNode`的值发生更改时触发（这意味着根据设计，如果移除和替换它，它*不会触发）。*`textNode`因为我正在使用 jQuery 来执行此操作，所以访问 jQuery 的方法`textNode`有点笨拙：

```
$('body').on('DOMCharacterDataModified', 'p', function(e){
    console.log(e.originalEvent.prevValue, e.originalEvent.newValue);
});

$('button').click(
    function(){
        var t = $(this).prev().val();
        document
            .getElementById('test')
            .firstChild.nodeValue += ' ' + t;
    });
​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/dFxXH/3/)。

重要的是要注意，版本 9 以下的 IE 不支持 Mutation Events，因此虽然这有效（并且不需要手动事件触发），但与简单地使用带有`trigger()`.

参考：

*   [突变事件的浏览器兼容性。](http://help.dottoro.com/ljfvvdnm.php#additionalEvents).
*   [突变事件](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T15:38:04.540

```
$('#element').on('change', function() {

}); 
```

# c++ - 由于私有继承，迭代器无法访问

> ID：12533541
> 
> 赞同：3
> 
> 时间：2012-09-21T15:27:35.170
> 
> 标签：c++, stl, std, inner-classes

我创建了一个`std::deque`由私有继承组成的新类，即

```
class B : private std::deque<A>
{ ... }; 
```

在我的源代码中，我尝试使用 B 的迭代器，即

```
B::iterator it 
```

编译器错误是

```
error C2247: 'std::deque<_Ty>::iterator' not accessible because 'B' uses 'private' to inherit from 'std::deque<_Ty>' 
```

所以问题是，我怎样才能使迭代器可访问？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T15:28:32.580

你必须提升这个迭代器类。

在公共部分使用**using**关键字。

```
class B : private std::deque<A>
{ ... 
 public:
   using std::deque<A>::iterator;    
}; 
```

其他类型以及实现基类中的其他功能也是如此。

# java - 将 ImageIcon 数组转换为 BufferedImage

> ID：12533543
> 
> 赞同：1
> 
> 时间：2012-09-21T15:27:58.530
> 
> 标签：java, arrays, bufferedimage, imageicon

我想知道是否有办法将 ImageIcon[] 转换为一系列缓冲图像，我在想这样的事情：

```
 public BufferedImage iconArrayToBufferedImage(ImageIcon[] icon){
    for (int i = 0; i < icon.length; i++) {
        BufferedImage screenShot = new BufferedImage(icon[i]);
    }

    return screenShot;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:37:04.120

EG 如[this answer](https://stackoverflow.com/a/6368724/418556)所示。

```
BufferedImage bi = new BufferedImage(
    icon.getIconWidth(),
    icon.getIconHeight(),
    BufferedImage.TYPE_INT_RGB);
Graphics g = bi.createGraphics();
// paint the Icon to the BufferedImage.
icon.paintIcon(null, g, 0,0);
g.dispose(); 
```

对于许多图标，循环执行此操作。

# iphone - 使用 iOS 6 SDK 和 Xcode 4.5 构建 armv6 架构（目标 iOS 3.1.3）？

> ID：12533544
> 
> 赞同：14
> 
> 时间：2012-09-21T15:28:00.397
> 
> 标签：iphone, ios, xcode4.5, targets, ios6

是否有机会使用 iOS 6 SDK 开发针对 iOS 3.1.3 的应用程序？如果我用旧的部署目标打开我的项目，编译器会警告我：

```
iOS deployment targets lower than 4.3 are not supported 
```

这可能是因为显然只能构建`armv7`和`armv7s`二进制文件。如果我`armv6`手动添加（在 iPhone 3G 之前的设备中工作），也会出现几个警告：

```
warning: no rule to process file '$(PROJECT_DIR)/main.m' of type sourcecode.c.objc for architecture armv6
...
...
warning: architecture armv6 is not supported (current ARCHS = "armv6 armv7 armv7s"). 
```

那么我该如何处理呢？在使用 iOS 6 SDK 进行开发时，有没有办法支持 iOS 3.1.3？如果没有，我最终将不得不转向最低目标，即 iOS 4.3。是否可以提交仅支持 >= 4.3 的新版本？我的用户在早期版本中会发生什么？他们是否根本没有被告知不兼容的更新，因此将继续使用我的应用程序的旧版本？如果没有，这可以实现吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-25T09:54:11.350

关于 iOS SDK 6.0，oonoweb 的回答是正确的。在针对 iOS 6 SDK 构建时无法支持低于 iOS 4.3 的版本，但可以使用 Xcode 4.5 继续为 armv6 构建并针对 iOS 4.2.1 及更低版本。

诀窍是针对 iOS 5.1 SDK 而不是 6.0 构建。注意：如果您这样做，您将无法使用任何新的 iOS 6 特定功能：

chpwn 的[博客](http://blog.chpwn.com/post/31824877081)列出了我重写的步骤：

*   [从 Apple Developer Downloads](https://developer.apple.com/downloads/index.action)下载 Xcode 4.4.1 （您不需要安装它）
*   打开 .dmg，右键单击 Xcode.app，“显示包内容”
*   在该软件包中找到 iOS 5.1 SDK： `Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/`
*   复制此 SDK
*   打开 Xcode.app (4.5) 的包内容，将 5.1 SDK 粘贴到该位置：`Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/`
*   在 Xcode 4.5 中打开您的项目。转到 Target > Build Settings 选项卡 > Base SDK，然后从下拉列表中选择 iOS 5.1
*   再次在 Build Settings 选项卡 > Valid Architectures - 如果 armv7s 存在则删除，如果 armv6 不存在则添加 armv6。
*   转到信息选项卡 > 部署目标，然后在下拉列表中键入 3.1.3（或您支持的任何内容）（该选项不存在，但您可以输入）。
*   如果您不想安装 Xcode 4.4.1 .dmg，现在可以删除它。

您将收到有关谈论没有规则来处理 armv6 文件的警告。Nate 最近发布了[这个答案](https://stackoverflow.com/a/13061562/470879)来解决这些问题。

如果您正在创建一个新项目（而不是维护旧项目），您可能还需要查看该`***-Info.plist`文件，并从“必需的设备功能”中删除 armv7（如果存在）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-21T18:17:48.020

使用 Xcode 4.5（即 iOS 6 SDK），您可以构建的最低版本是 iOS 4.3。我想是时候让您的 3.1.3 客户升级了。

# perl - perl - 对具有“限定符”的逗号分隔源进行排序

> ID：12533546
> 
> 赞同：1
> 
> 时间：2012-09-21T15:28:04.727
> 
> 标签：perl, qualifiers

我是一个弱的 perl 用户（和数组的操纵者），这个问题难倒我。希望有人能帮忙！

我有一个包含以下数据类型的源文件（非常简化）：

```
URL: 22489196
Keywords: Ball, Harga, Call, Dall, Eall, Jarga, Fall

URL: 22493265
Keywords: Hall, Iall, Yarga, Jall, Zarga, Kall 
```

中断 alpha 顺序的词（Harga 等）是“限定词”。我需要的最终结果是：

```
22489196

Ball--Harga
Call
Dall
Eall--Jarga
Fall

22493265

Hall
Iall--Yarga
Jall--Zarga
Kall 
```

我尝试了各种“for”循环，将术语推入第二个数组并在其术语的条件连接上移动原始数组，但我最终仍然缺少或额外的术语。谁能建议如何做到这一点？提前谢谢了！

> > 补充：这是我的部分凌乱代码的一次迭代：

```
while (<FILE>) {

    if (/URL\:/) {

        print "$_\n";
    }

    if (/Keywords\: /) {

        s/Keywords\: //;
        chomp();

        my @terms    = split ', ', $_;
        my @bakterms = reverse @terms;
        my $noTerms  = @terms;
        my $IzItOdd  = $noTerms%2;
        #my $ctr = $noTerms++;

        for ($i = 0; $i <= $#bakterms; $i++){

            my $j = $i+1;

            if ($j <= $#bakterms) {

                my $one = $bakterms[$i];
                my $two = $bakterms[$j];

                if ($two gt $one) { # i.e., if $two is alphabetically AFTER $one

                    push @ary3, $bakterms[$i];
                    $disarry = 1;
                    my $interloper = $bakterms[$j+1].= "--" . $two;
                    push @ary3, $interloper;
                    shift @bakterms;
                    #$ctr--;
                    shift(@bakterms);
                    #$ctr--;
                }
                else {

                    push @ary3, $bakterms[$i];
                    #shift(@bakterms);
                    shift @bakterms;
                    $disarry = 0;
                }
            }
        }
        @ary3 = sort @ary3;

        foreach my $term (@ary3) {

            print "** $term\n";
        }

        @ary3 = ();
        print"\n";
    }
}
exit 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:26:59.343

好吧，“Harga”不会打断字母顺序，“Call”会。所以限定词实际上是打断字母顺序的词之前的词。

```
my $keywords = ...;  # 'Ball, Harga, Call, Dall, Eall, Jarga, Fall'
my @keywords = split /\s*,\s*/, $keywords;
my $prev_keyword = '';
while (@keywords) {
    my $keyword = shift(@keywords);

    my $qualifier;
    if (@keywords >= 1 && $keyword eq $prev_keyword) {
       $qualifier = shift(@keywords);
    }
    elsif (@keywords >= 2 && $keywords[0] gt $keywords[1]) {
       $qualifier = shift(@keywords);
    }

    if (defined($qualifier)) {
       print("$keyword--$qualifier\n");
    } else {
       print("$keyword\n");
    }

    $prev_keyword = $keyword;
} 
```

# jsp - 从数据库值填充选择框，在 jsp 页面上显示错误

> ID：12533548
> 
> 赞同：0
> 
> 时间：2012-09-21T15:28:11.257
> 
> 标签：jsp, struts2

我想填充 arrayList 类型的 catList 对象以选择带有 key=catId 和 value=catName 的框

```
public class GamesAction extends ActionSupport {
 private ArrayList catList;

 public String populate() {
    GamesCategoryBusiness gcb = new GamesCategoryBusiness();
    Map data = gcb.fetchAll();//fetching games category from database
    String status = (String) data.get("status");
    if (status.equalsIgnoreCase("success")) {
        setCatList((ArrayList) data.get("gameCatList"));
        return "POPULATE";
    } else {
        addActionError("Not able to fetch Game categories");
        return INPUT;
    }

 public ArrayList getCatList() {
    return catList;
}

public void setCatList(ArrayList catList) {
    this.catList = catList;
}

} 
```

另一个班级

```
 public class GamesCategoryAction extends ActionSupport {

private long catId;
private String catName;

public long getCatId() {
    return catId;
}

public void setCatId(long catId) {
    this.catId = catId;
}

public String getCatName() {
    return catName;
}

public void setCatName(String catName) {
    this.catName = catName;
} 
```

在 struts.xml 中

```
 <action name="gameCatAdded" class="GamesCategoryAction"
            method="addCategory">
        <result name="POPULATE">/allCategory.jsp</result>
        <result name="success">/allCategory.jsp</result>
        <result name="input">/addCategory.jsp</result>
        <result name="login">/login.jsp</result>
    </action> 
```

在 Jsp 中

```
 <s:select list="catList"
                     listKey="catId"
                     listValue="catName"
                     name="gamesCategoryId"
                     label="Category"
                     labelposition="top"/> 
```

在jsp页面中显示以下错误异常

```
org.apache.jasper.JasperException: tag 'select', field 'list', name 'gamesCategoryId':    The requested list key 'catList' could not be resolved as a collection/array/map/enumeration/iterator type. Example: people or people.{name} - [unknown location]
       org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:584) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:39:08.353

试试这个：`ArrayList<Catalog> catList`在动作课上。如果您从未声明过您的对象类型，那么您的对象类型是未知的。（假设您有一个名为 的域类`Catalog`，其中包含`catId`和`catName`）

# c# - 为什么我们不能只使用密码哈希作为对称加密算法的加密密钥（和 IV）？

> ID：12533549
> 
> 赞同：1
> 
> 时间：2012-09-21T15:28:12.757
> 
> 标签：c#, .net, security, encryption, cryptography

受[我上一个问题](https://stackoverflow.com/questions/12529574/ "我之前的问题")的启发，现在我有了一个非常有趣的想法：您是否真的需要使用`Rfc2898DeriveBytes`或类似的类从密码字符串“安全地派生”加密密钥和初始化向量，或者只是该字符串的简单哈希工作在使用对称算法（例如 AES、DES 等）加密数据时，是否与密钥/IV 一样好？

我看到了大量的 AES 加密代码片段，其中`Rfc2898DeriveBytes`类用于从密码字符串派生加密密钥和初始化向量 (IV)。假设应该使用随机盐和大量迭代来获得足够安全的密钥/IV 用于加密。虽然使用这种方法从密码字符串中派生字节在某些情况下非常有用，但我认为这在使用对称算法加密数据时不适用！原因如下：当有可能构建预先计算的彩虹表时，使用盐是有意义的，并且当攻击者获得哈希值时，他会查找原始密码。但是......对于对称数据加密，我认为这不是必需的，因为密码字符串或加密密钥的哈希值永远不会存储在任何地方。所以，如果我们只是获取密码的 SHA1 哈希，并将其用作加密密钥/IV，那么

`Rfc2898DeriveBytes`当我们可以只使用该密码的 SHA1（或任何其他）散列时，使用类从密码字符串生成密钥/IV的目的是什么（这是一个非常非常耗费性能的操作）？散列会导致密钥中的随机位分布（而不是直接使用字符串字节）。无论如何，攻击者将不得不暴力破解整个密钥范围（例如，如果密钥长度为 256 位，他将不得不尝试 2^256 个组合）。

因此，要么我以一种危险的方式错了，要么所有那些使用`Rfc2898DeriveBytes`方法生成加密密钥和 IV 的 AES 加密样本（包括这里的许多赞成的答案）等都是错误的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:36:39.030

如果您使用密码的散列作为加密密钥，则每次加密都会使用不同的密钥，这使得攻击者更容易攻击至少一些加密值（通过散列“password123”、“chocolate”等） . 保护对称加密的最佳方法是管理一个长而单一的密钥，因此它不会被任何人嗅探。
至于您的第一个问题，关于使用 Rfc2898DeriveBytes，这样做的目的是确保您从密码中获取的密钥以难以复制或暴力破解的方式完成。它在过程中增加了熵。如果您输入密码，然后执行简单的哈希，则用于加密的密码既弱（受限制的字符集和长度）又可预测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:16:32.363

> 攻击者必须暴力破解整个密钥范围（例如，如果密钥长度为 256 位，他将不得不尝试 2^256 种组合）

这就是你出错的地方。如果弱密码有 8 个字符，并且每个 ASCII 字符大约有 5 位，那么大约有 (2^5) ^ 8 个弱密码，大约是 2^40。由于您没有使用盐，因此只有 2^40 个可能的键。通过迭代 8 个字符的可能组合并对每个字符进行散列，这些键很容易生成。这比 2^256 更容易暴力破解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:29:46.380

的重点`Rfc2898DeriveBytes`是要慢一点。
通过重复哈希 1,000 次或更多次，您可以强制暴力尝试猜测密码的速度要慢几个数量级。

# ruby-on-rails - 我可以在 Rails 中显示图像而不显示数据库文本吗？

> ID：12533556
> 
> 赞同：0
> 
> 时间：2012-09-21T15:28:29.760
> 
> 标签：ruby-on-rails, ruby, object, web

我正在尝试使用 显示我的数据库中的一组图像`image_tag`，但循环显示整个数据库以及图像。

`<%= @tools.each do |tool|%>
<%= link_to( image_tag(tool.image_url, :alt=>"Hello, this is an alt"), "tools/"+tool.id.to_s)%> <% end %>`

这可以显示每个图像并将它们链接到正确的位置，但是在图像的末尾，数据库中有一堆不应该存在的文本，我不知道如何删除。

我不知道这很重要，但这是文本：

`[#<Tool id: 3, title: "Screwdriver", description: "a screwdriver", image_url: "1.png", price: #<BigDecimal:4818870,'0.1E1',9(36)>, created_at: "2012-09-16 16:31:10", updated_at: "2012-09-16 16:31:10">, #<Tool id: 5, title: "Hammer", description: "A hammer", image_url: "3.png", price: #<BigDecimal:48167b8,'0.7E1',9(36)>, created_at: "2012-09-20 02:19:35", updated_at: "2012-09-20 02:19:35">]`

非常感谢任何想法或提示。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:32:36.390

尝试

```
<% @tools.each do |tool|%> 
```

没有等号。

# jquery - 如何在某些内部元素上“避免”鼠标按下？

> ID：12533559
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:28:40.967
> 
> 标签：jquery

我的[代码](http://jsfiddle.net/GUPUG/4/)：

# HTML

```
<div style="position:relative;">
    <div class="boxImmagineResultNext"></div>
    <div class="boxImmagineResult">                
        <textarea cols="15" rows="5"></textarea>
    </div>
</div> 
```

# CSS

```
.boxImmagineResultNext
{
    height: 235px;
    position: relative;
    width: 200px;
    z-index: 1;
    display:none;    
}

.boxImmagineResult
{
    background-color: #595959;
    height: 255px;
    position: relative;
    width: 220px;
    z-index: 1;
    top:0;
    left:0;
}
​ 
```

# jQuery

```
$('.boxImmagineResult').mousedown(function (e) {
    $(this).css({ 'position': 'absolute', 'z-index': '10' });
    $('.boxImmagineResultNext').show();
});

$('.boxImmagineResult').mouseup(function (e) {
    $(this).css({ 'position': 'relative', 'z-index': '5' });
    $('.boxImmagineResultNext').hide();
});​ 
```

由于这种机制，我不能在 textarea 上“写”。这仅在 Firefox 上，例如，在 chrome 上也可以。它似乎是“只读的”，但实际上并非如此。

我该如何解决？当我单击文本区域时，我应该“避免”鼠标按下...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:43:32.133

使用事件委托可能会有所帮助，因为您将能够测试目标（启动事件的元素）是什么，或者不是您想要的触发器。

```
$('.boxImmagineResult').on('mousedown', function(e){
    var $target = $(e.target);
    if( $target.is('SELECTOR') ){
        // Do stuff here ...
    }
    return false;
}); 
```

# bash - 是否可以将变量作为 for 循环表达式？

> ID：12533560
> 
> 赞同：1
> 
> 时间：2012-09-21T15:28:46.137
> 
> 标签：bash

我正在编写一个脚本来合并漫画 1110 的 xkcd 网络漫画图块。到目前为止，我已经写了大约 100 行，而不是分别处理图像的每个象限，我决定使用函数来执行此操作，重复每个象限并为每个象限使用变量以使函数每次都以不同的方式运行。我希望能够做到这样的事情，除了每次都使用不同的值。

```
a='((n=$north; n>=1; n--))';
for ${a};
    do "echo Hello World!"
done 
```

我的问题是，我在为 for 循环表达式使用变量时遇到了麻烦，它会出现“第 8 行：eval “$a”'：不是有效的标识符”，如果我尝试将它放在括号中，它会出现“第 30 行：语法错误：需要算术表达式”，然后是“第 30 行：语法错误：`((${a}))”。这就是我到目前为止所拥有的。在任何人回答之前，是的，我知道它有错误。

```
#!/bin/bash
# Date Created: September 20th, 2012
# Created by Jonathan Bondhus - https://github.com/jbondhus
# Credit to Andreas Reichinger for analysis of image tile placement, xkcd.com for comic. Used ImageMagick code from Antonio Frascarelli.
#
#  This script will merge the files from xkcd comic number 1110, "Click and Drag".

function function_join() {
    echo "#";
    if [[ quadrant -eq 1 ]]; then
    echo "# First Quadrant:"; # Join together the first quadrant
    function_quadrant
    else
        if [[ quadrant -eq 2 ]]; then
        echo "# Second Quadrant:"; # Join together the second quadrant
        function_quadrant
        else
            if [[ quadrant -eq 3 ]]; then
            echo "# Third Quadrant:"; # Join together the third quadrant
            function_quadrant
            else
                if [[ quadrant -eq 4 ]]; then
                echo "# Fourth Quadrant:"; # Join together the fourth quadrant
                function_quadrant
                fi
            fi
        fi
    fi
    echo "#";
    for ${a};
    do
        echo "# row number "$n" ...";
        convert $b;
        for `eval "$c"`;
        do
            if [ $d ];      # If the tile file doesn't exist, an empty square will be used.
                then convert $e;
                else convert $f;
            fi;
        done;
        convert $g;    # Append the image onto the current quadrant
        rm -f $h;
        echo "# ... OK";
        echo "#";
    done;
}

function function_quadrant() {
    if [[ quadrant -eq 1 ]]; then # Set the variables for function_join
    quadrantName="first"
    a='((n=$north; n>=1)); n--'
    b='-size 0x1 xc:white resultn$n''w.png'
    c='((w=$west; w>=1; w--))'
    d='-e $n''n$w''w.png'
    e='+append resultn$n''w.png $n''n$w''w.png resultn$n''w.png'
    f='+append resultn$n''w.png _blank.png resultn$n''w.png'
    g='-append ${quadrantName}Quadrant.png resultn$n''w.png ${quadrantName}Quadrant.png'
    h='resultn$n''w.png'
    else
        if [[ quadrant -eq 2 ]]; then
        quadrantName="second"
        a='n=$north; n>=1; n--'
        b='-size 0x1 xc:white resultn$n''e.png'
        c='e=$east; e<=20; e++'
        d='-e $n''n$e''e.png'
        e='+append resultn$n''e.png $n''n$e''e.png resultn$n''e.png'
        f='+append resultn$n''e.png _blank.png resultn$n''e.png'
        g='-append ${quadrantName}Quadrant.png resultn$n''e.png ${quadrantName}Quadrant.png'
        h='resultn$n''e.png'
        else
            if [[ quadrant -eq 3 ]]; then
            quadrantName="third"
            a='s=1; s<=$south; s++'
            b='-size 0x1 xc:black results$s''w.png'
            c='w=$west; w>=1; w--'
            d='-e $s''s$w''w.png'
            e='+append results$s''w.png $s''s$w''w.png results$s''w.png'
            f='+append results$s''w.png _black.png results$s''w.png'
            g='-append ${quadrantName}Quadrant.png results$s''w.png ${quadrantName}Quadrant.png'
            h='results$s''w.png'
            else
                if [[ quadrant -eq 4 ]]; then
                quadrantName="fourth"
                a='s=1; s<=$south; s++'
                b='-size 0x1 xc:black results$s''e.png'
                c='e=1; e<=20; e++'
                d='-e $s''s$e''e.png'
                e='+append results$s''e.png $s''s$e''e.png results$s''e.png'
                f='+append results$s''e.png _black.png results$s''e.png'
                g='-append ${quadrantName}Quadrant.png results$s''e.png ${quadrantName}Quadrant.png'
                h='results$s''e1.png'
                else # If more than 4 quadrants, just to be safe, exit
                    exit 1
                fi
            fi
        fi
    fi
}

for (( quadrant = 0; quadrant < 4; quadrant++ )); do
    function_join
done

echo "#################################"
echo "Joining completed!"
echo "#################################"

exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T16:07:58.097

```
./north.sh 
Hello World!  4 5
Hello World!  3 4
Hello World!  2 3
Hello World!  1 2
Hello World!  0 1 
```

北猫.sh

```
#!/bin/bash
north=5;
for ((n=$north; n>=1; --n))
do
        ((north--))
     echo "Hello World!  $north $n"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:08:09.653

怕不是。语法解析发生在参数扩展之前（毕竟参数需要首先被识别）。我建议重组您的代码以传递数据，而不是可执行代码。

# hadoop - hadoop fs -text 返回 InvocationTargetException

> ID：12533561
> 
> 赞同：0
> 
> 时间：2012-09-21T15:28:50.433
> 
> 标签：hadoop

我正在尝试使用`hadoop fs -text`. 该文件是在我自己的类中定义的序列文件 - 为此我使用参数`-libjars`。一般。这次我得到了没有堆栈跟踪的 InvocationTargetException：

```
# hadoop fs -libjars myjar.jar -text /tmp/part-r-00000
12/09/21 17:24:18 WARN snappy.LoadSnappy: Snappy native library is available
12/09/21 17:24:18 INFO util.NativeCodeLoader: Loaded the native-hadoop library
12/09/21 17:24:18 INFO snappy.LoadSnappy: Snappy native library loaded
text: java.lang.reflect.InvocationTargetException 
```

很难看出发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T13:00:50.840

通常，如果您得到`text: [null|classname|exception]`的不是文件的内容，那么很可能`org.apache.hadoop.fs.FsShell`会在某处引发异常。

如果有机会，请在*本地模式下*运行 Hadoop，并在读取 seq 时*调试*该类。从命令行文件。

`FsShell`我会在这些地方设置断点：

```
 public int read() throws IOException {
   ...
 } 
```

和

```
 public TextRecordInputStream(FileStatus f) throws IOException {
   ...
 } 
```

还要检查自定义的序列化/反序列化过程，因为反序列化`Writable`期间的错误可能会导致此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T01:36:14.350

可能与 Key / Value 类中的嵌套类或依赖类有关。

`-libjars`使用 FsShell ( ) 时的选项`hadoop fs`将您的 jar 添加到类路径（如您所料），因此您的根 Key / Value 类现在可用。这里可能发生的是您的 Key / Value 类依赖于另一个类，要么不在 libjars 中列出的 jar 中，要么在嵌套 jar 中（在 jar 中的 libs 文件夹中）。

`hadoop jar`当它提交作业时，该命令将解压缩您的 jar 并将 lib 文件夹中的所有嵌套 jar 添加到类路径中，但 FsShell 命令不会解压缩该 jar，这使这一点令人困惑。

令人讨厌的是，FsShell 不会将完整的堆栈跟踪转储到 stderr，但是如果您启用调试级别日志记录，您应该会看到完整的堆栈跟踪（虽然不确定您是如何做到的）

# rest - 使用 SDK.REST 更新记录时捕获错误

> ID：12533565
> 
> 赞同：0
> 
> 时间：2012-09-21T15:29:03.710
> 
> 标签：rest, sdk, dynamics-crm-2011

我正在尝试使用 SDK.REST 方法来更新记录，但是它不起作用，除了在成功和失败功能上发出一些警报之外，我无法找出它为什么不起作用。

有没有办法可以捕获这将返回的实际错误消息？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:37:27.583

您可以使用此工具打开跟踪日志记录： http: [//crmdiagtool2011.codeplex.com/](http://crmdiagtool2011.codeplex.com/) （当然这在 CRM online 中不起作用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T15:55:02.200

尝试使用开发人员工具 (F12) 在失败回调中设置断点并检查 xhr 参数以获取更多信息。您在警报中看到了什么？如果没有帮助，请发布一些代码和错误详细信息。

# excel - 日期列表中所有星期一的值图表

> ID：12533566
> 
> 赞同：0
> 
> 时间：2012-09-21T15:29:08.867
> 
> 标签：excel, excel-formula

我正在管理一个 Excel 表格，其中包含多个酒吧的收入。每个酒吧每天最多可以有 3 个班次。

工作表如下所示：

```
|date|bartender|bar|shift|revenue| 
```

每天在工作表中可以有几行条目。

1）我希望能够制作一个图表，例如到目前为止所有星期一的收入，到目前为止每个星期一在图表中都有自己的数据点。每个星期一还必须合并该星期一所有班次的收入。我还希望图表在将新行插入工作表时自动更新。

这可能吗？

2）另外，是否可以在原始工作表中创建一个包含唯一日期列表的行的工作表并制作该行，这样我就不必手动将公式扩展到下一行来更新唯一日期列表当原始工作表获得新条目时？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:08:17.453

您可以通过添加“星期几”列并使用数据透视图来完成您想要的操作：

![数据透视图示例1](../Images/c2a8ce2209be5bfe1b700f30a1bfb6e3.png) ![数据透视图示例2](../Images/554d8908a49efd11af3a21eaf443b9ba.png)

祝你好运。

**编辑/添加**

如果你想看到所有的星期一分开分开，你可以这样做： ![数据透视图示例](../Images/76d59851e614b1b24f66b53fa31e362a.png)

数据透视图非常灵活。你应该能够实现你想要的任何外观。如果需要，您也可以为轮班等内容添加更多报告过滤器。祝你好运。

# phalcon - \Phalcon\Mvc\Model\Validator\Uniqueness with namespaces

> ID：12533567
> 
> 赞同：1
> 
> 时间：2012-09-21T15:29:13.430
> 
> 标签：phalcon

在将 \Phalcon\Mvc\Model\Validator\Uniqueness 验证器与作为命名空间的模型一起使用时，我得到以下 Phalcon\Db\Exception。看起来验证器类在构建支持查询时没有使用模型中的 getSource 方法。

> 您的 SQL 语法有错误；在执行 SELECT COUNT(*) AS rowcount FROM app\ 时，检查与您的 MySQL 服务器版本相对应的手册以在 app\dao\users 附近使用正确的语法 WHERE username = 'nhidalgo' AND id <> ''' at line 1 dao\users WHERE 用户名 = 'nhidalgo' AND id <> ''

我的代码如下：

```
<?php
namespace App\Dao;

use Phalcon\Mvc\Model\Validator\Inclusionin;
use Phalcon\Mvc\Model\Validator\Uniqueness;

class Users extends \Phalcon\Mvc\Model
{
    public function initialize()
    {
        $this->setSource('users');
    }

    public function validation()
    {
        $this->validate(new Uniqueness(
            array(
                "field"   => "username",
                "message" => "Username must be unique"
            )
        ));
        $this->validate(new Uniqueness(
            array(
                "field"   => "email",
                "message" => "Email must be unique"
            )
        ));

        return !$this->validationHasFailed();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:31:37.580

文档指出，如果您使用命名空间，则必须实现返回表名的方法。

```
public function getSource()
{
    return 'users';
} 
```

[setSource](http://docs.phalconphp.com/en/0.5.0/api/Phalcon_Mvc_Model.html)仅更改单个实例的映射表，而实现[getSource](http://docs.phalconphp.com/en/0.5.0/api/Phalcon_Mvc_Model.html)使源可用于创建的每个实例。

# c#-4.0 - 检测外部第三方程序何时即将退出

> ID：12533572
> 
> 赞同：2
> 
> 时间：2012-09-21T15:29:24.087
> 
> 标签：c#-4.0, process

我需要从 c# 运行第三方程序（使用 .Net Framework 4）并在它退出之前截屏。我用`Process.Start()`. 有什么方法可以检测到程序即将退出？我知道，`Process.Exited`但为时已晚。

谢谢汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:33:08.063

1 等待治疗结束

您可以使用此代码 - 基于`WaitForExit`方法

```
process.Start("...");
...
process.WaitForExit(); 
```

链接：http: [//msdn.microsoft.com/en-us/library/fb4aw7b8.aspx](http://msdn.microsoft.com/en-us/library/fb4aw7b8.aspx)

2 治疗结束

```
process.Terminated +=
    new Win32Process.ProcessInfo.TerminatedEventHandler(...); 
```

# jquery - 如何将 $(this) 作为参数传递给 jQuery 中的另一个函数？

> ID：12533575
> 
> 赞同：4
> 
> 时间：2012-09-21T15:29:38.407
> 
> 标签：jquery, parameters

有没有办法传递`$(this)`给jQuery中的另一个函数？

这就是我所拥有的，但它不起作用：

```
$(function() {

  $('[id$=price]').change(function() {
    var price = $(this).val();
    var quantity = $(this).closest('.fields').find('[id$=quantity]').val();     
    recalculate_subtotal($(this));
  });

  $('[id$=quantity]').change(function() {
    var quantity = $(this).val();
    var price = $(this).closest('.fields').find('[id$=price]').val();           
    recalculate_subtotal($(this));      
  });

  function recalculate_subtotal(element) {
    $(element).closest('.fields').find('#Subtotal').val(price * quantity);      
  }

}); 
```

（最后一个函数是我想要 $(this) 进入的函数。）

感谢您的帮助和道歉。我是 jQuery 的新手！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T15:31:27.950

这*可以*正常工作，尽管需要注意的是，如果您传递 jQuery 对象 ( `$(this)`)，则不需要再次将其包装在`$()`：

```
$('[id$=price]').change(function() {
    var price = $(this).val();
    var quantity = $(this).closest('.fields').find('[id$=quantity]').val();     
    recalculate_subtotal($(this));
})

function recalculate_subtotal($element) {
    $element.closest('.fields').find('#Subtotal').val(price * quantity);      
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T15:31:45.957

你快到了 - 摆脱你元素变量周围的 $() ：

```
function recalculate_subtotal(element) {
    element.closest('.fields').find('#Subtotal').val(price * quantity);      
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:35:12.110

因为您已经将 jQuery 对象选择器传递给您的函数，所以您不需要在元素周围使用 $() .. 这应该可以

```
function recalculate_subtotal(element) {
    element.closest('.fields').find('#Subtotal').val(price * quantity);      
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T15:32:09.343

尝试这个，

```
$.fn.recalculate_subtotal = function () {
    element = $(this);   // you will get $(this) here
    $(element).closest('.fields').find('#Subtotal').val(price * quantity);      
}

$('#AnyElement').recalculate_subtotal(){
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T15:32:14.100

由于您已经通过 $(this) 您只需要更改此：

```
function recalculate_subtotal(element) {
    element.closest('.fields').find('#Subtotal').val(price * quantity);      
} 
```

# iphone - NSDateFormatterFullStyle 不带年份 (NSDateFormatter)

> ID：12533581
> 
> 赞同：2
> 
> 时间：2012-09-21T15:29:46.083
> 
> 标签：iphone, ios, nsdateformatter

使用设备中用户的 currentLocale ，我想要一个与为 NSDateFormatterFullStyle 生成的日期格式完全相同的日期格式减去年份：

```
[dateFormatter setDateStyle:NSDateFormatterFullStyle];
[dateFormatter setLocale:[NSLocale currentLocale]]; 
```

> 9 月 21 日星期五（2012 年）
> 
> (2012年)9月21日金曜日

括号中的区域是我需要删除但要打印的区域。

我注意到 iPhone 应用程序 Living Earth 可以做到这一点并且适用于所有地区，iPhone 锁定屏幕也是如此。自定义格式化程序，例如，`[dateFormatter setDateFormat:@"EEEE, MMMM"];`不会随着本地化而改变。

谁能阐明如何做到这一点？日期样式的选项似乎都没有这样做。

谢谢

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-09-21T15:36:39.767

日期格式化程序不会根据手机语言设置而是根据手机区域设置而改变。如果您想在您的应用程序中更改它，您可以通过调用设置日期格式化程序的语言环境`[dateFromatter setLocale:theLocaleYouWant]`

编辑
用于设置语言环境的代码

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"fr"]];
[formatter setDateFormat:@"EEEE, dd MMMM"];

NSLog(@"Current date : %@",[formatter stringFromDate:[NSDate date]]);
// Output vendredi, 21 septembre which is good ! 
```

# php - 在 phpmyadmin 中导入 csv 后的空列

> ID：12533586
> 
> 赞同：2
> 
> 时间：2012-09-21T15:30:22.523
> 
> 标签：php, mysql, phpmyadmin

我在 MySql 中有一个表，其中一列被声明为非空。我想导入一个 CSV 文件，该文件的 ID 字段没有要导入的值。有一个脚本可以生成自动生成的 ID。谁能告诉我如何导入带有空 ID 列的表，或者我是否可以在 CSV 文件中生成自动生成的字母数字 ID？

PHP 脚本将 ID 生成为自动生成的字段。自动生成的类似于 4eac609ca0e99 ，只有最后 5 位数字在变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:15:32.453

使用 phpMyAdmin 或我认为任何其他工具导入时，无法使用自定义 ID 生成器。

我建议在有问题的列中允许 NULL，使用 phpMyAdmin 导入您的数据，然后使用您的脚本将 ID 分配给导入的行，一旦它们在表中，然后再次为该列设置 NOT NULL。

如果这个表是活动的，因此已经在使用中，所以它应该只包含正确的数据，创建另一个具有相同结构的表，除了 NOT NULL，执行导入，在脚本时分配 id，然后执行 INSERT INTO `live_table`SELECT * FROM `imported_table`。

# java - 使用 javassist 更改方法体的一部分

> ID：12533588
> 
> 赞同：1
> 
> 时间：2012-09-21T15:30:32.550
> 
> 标签：java, javassist

让我先解释一下我的目标......我需要更改方法主体的**一部分**，我的意思是，在方法内部我有几个调用，但只需要更改其中一个调用以使用两个参数而不是 1。因为我想在我想的方法中保持所有其余部分相同，获取方法主体，通过正则表达式更改这个特定的调用，我想更改并重新设置它。

假设这是这样做的好方法......我怎样才能得到方法体？

任何建议将不胜感激

谢谢

拉斐尔·莫伊塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:04:45.237

今天我不得不对一个类的静态初始化器进行一些修改，并且可以使用**Javaasist**。不过还是挺难的。您至少需要对 java 字节码生成/处理有一些了解（编译后您不再有源代码）。

您可能会发现这个 Wikipedia 页面很有用：[http](http://en.wikipedia.org/wiki/Java_bytecode_instruction_listings) ://en.wikipedia.org/wiki/Java_bytecode_instruction_listings 。它包含所有 Java 字节码指令的列表、它们采用的参数以及它们在堆栈上的作用。

这是代码（**Groovy**，但应该很容易翻译成 Java）。它的作用是通过静态类初始化程序的字节码，并删除`oldFieldName`之前在字节码中重命名的静态的所有分配指令。希望你觉得它有用。

```
def oldFieldName = "removedField"
def cp = ClassPool.getDefault()
//Create new class out of name and bytes
cp.insertClassPath(new ByteArrayClassPath(name, bytes))

def initializer = cc.classInitializer;                                                    
def mi = initializer.getMethodInfo();                                                     
def ca = mi.getCodeAttribute();                                                           

def ci = ca.iterator()                                                                    
//Let's check all bytecode operations in static initializer                               
while (ci.hasNext()) {                                                                    
    def index = ci.next()                                                                 
    int op = ci.byteAt(index)                                                             
    //PUTSTATIC is a bytecode instruction to assign value from stack to static variable   
    if (op == Opcode.PUTSTATIC) {                                                         
        //Address of target variable is calculated like this                              
        def targetFieldAddr = (ci.byteAt(index + 1) << 8) + ci.byteAt(index + 2)          
        def fieldrefName = mi.getConstPool().getFieldrefName(targetFieldAddr)             
        if (fieldrefName == oldFieldName) {                                               
            //Ok, so it's an assignment to renamed variable                               
            //Let's change assignemt to pop from stack (POP2 -> pop long/double value)           
            //We have to remove it or stack won't be valid                                   
            ci.writeByte((byte) Opcode.POP2, index);                                      
            //PUTSTATIC takes 2 arguments so we have to cleare them out          
            //or they will be used as bytecode instructions and probably invalidate class
            ci.writeByte((byte) Opcode.NOP, index + 1);                                   
            ci.writeByte((byte) Opcode.NOP, index + 2);                                   
    }                                                                                 
}                                                                                     

cc.defrost()
cc.detach() 
```

**另一个提示**：使用JDK 中的**javap**工具在修改之前反汇编编译的类，并与您生成的字节码进行比较。这样更容易找到错误。您还可以通过这种方式找到要修改的字节码指令。

# asp.net-mvc - 为什么我的样式包无法在 ASP.NET MVC 4 中正确呈现？

> ID：12533591
> 
> 赞同：42
> 
> 时间：2012-09-21T15:30:38.080
> 
> 标签：asp.net-mvc, asp.net-mvc-4

所以我是 ASP.NET MVC 4 的新手（好吧，我用了 3 一点）。

无论如何，在我的 BundleConfig.cs 文件中，我正在尝试加载 Twitter Bootstrap css 文件和一个附加`site.css`文件。

但是只渲染了 site.css 文件。我已经确认引导 css 文件确实位于正确的位置（内容文件夹）并且与 site.css 位于同一位置

```
bundles.Add(new StyleBundle("~/Content/css").Include(
            "~/Content/bootstrap.min.css",
            "~/Content/bootstrap-responsive.min.css",
            "~/Content/site.css")); 
```

**编辑**

好的，这不是我的首选方式，但 Andrei Drynov 建议我尝试：

```
@import url("bootstrap.min.css")
body{background: #e8e6da;padding-top:60px;padding-bottom:40px;}
@import url("bootstrap-responsive.min.css") 
```

但这不起作用。我将 site.css 更改为上述内容，但现在背景主体颜色甚至不起作用。如果我删除@imports，则背景是正确的颜色。

**编辑 2**

我不明白，但补充说：

```
bundles.IgnoreList.Clear(); 
```

到我的捆绑文件修复它。嗯。不确定我是否理解。但我能够从 site.css 中删除 @imports。

奇怪的。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-25T22:08:54.753

IgnoreList 的默认行为是忽略任何缩小的脚本。

您可以从他们的名字中删除“.min”，或者清除 IgnoreList。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-09T16:56:10.247

只是为了让其他人知道谁无法在这个长线程中轻松找到有效的解决方案，我遇到了完全相同的问题，我以与实际问题底部的编辑中建议的相同方式解决了它！

我开始了一个新项目 MVC4 Web 应用程序，用上面显示的完全相同的代码为引导程序包创建了路由：

```
bundles.Add(new StyleBundle("~/Content/css").Include(
            "~/Content/bootstrap.min.css",
            "~/Content/bootstrap-responsive.min.css",
            "~/Content/site.css")); 
```

但是由于未知原因，它没有加载..最后我放弃了，决定用谷歌搜索，找到了这个页面。

我尝试在 BundleConfig.cs 文件中添加以下内容作为第一行。重新编译，一切开始工作，现在样式被正确加载。

```
bundles.IgnoreList.Clear(); 
```

也许这对某人有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T15:41:41.533

我不使用 Bootstrap 的捆绑包（作为一个例外），但它的缩小版本，所以这对我有用：

```
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"><!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="@Url.Content("~/Content/bootstrap.min.css")">
    <style>
        body {
            padding-top: 60px;
            padding-bottom: 40px;
        }
    </style>
    <link rel="stylesheet" href="@Url.Content("~/Content/bootstrap-responsive.min.css")">
    @Styles.Render("~/Content/less")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body> 
```

带有内联样式的部分来自[http://www.initializr.com/](http://www.initializr.com/)的顶部 NavBar，如果不需要，只需删除。

或者，您可以在您的 styles.css 文件中执行相同的操作：

```
@import url('bootstrap.min.css');

body {
    padding-top: 60px;
    padding-bottom: 40px;
}

@import url('bootstrap-responsive.min.css');

You CSS Code below 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-31T09:29:55.063

正如保罗正确指出的那样，捆绑包设置为自动忽略“最小”文件。但是完全忽略此规则是一种不好的做法，请参阅此答案[Bundler 不包括 .min 文件](https://stackoverflow.com/questions/11980458/bundler-not-including-min-files)以获得更好的解决方案（检查第一个和第二个答案）。

# mysql - 在 MySQL 的父语句中重用嵌套 SQL 语句

> ID：12533593
> 
> 赞同：2
> 
> 时间：2012-09-21T15:31:06.217
> 
> 标签：mysql, sql

我有以下 SQL 代码；

```
SELECT  a.*, b.maxDate as last_payment_date, c.package as payment_for_package, (SELECT COUNT(id) FROM uploads WHERE user = a.id) AS upload_count
                FROM users a 
                    INNER JOIN payments c
                        ON a.id = c.user_id
                    INNER JOIN
                    (
                        SELECT user_id, MAX(date) maxDate, period
                        FROM payments
                        GROUP BY user_id
                    ) b ON c.user_id = b.user_id AND
                            c.date = b.maxDate

                WHERE a.package = 1
                AND b.maxDate < $twomonths
                AND (SELECT COUNT(id) FROM uploads WHERE user = a.id) > 10
                AND b.period = 1
                ORDER BY b.maxDate ASC
                LIMIT 50 
```

如您所见，我使用了`(SELECT COUNT(id) FROM uploads WHERE user = a.id)`两次嵌套语句，我想知道是否有办法重新使用该语句来提高性能？我试过使用别名`upload_count`，但你不能在`WHERE`子句中使用别名。感谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:43:32.893

只需加入子查询并关联结果：

```
SELECT
    a.*,
    b.maxDate as last_payment_date,
    c.package as payment_for_package,
    upload_counts.upload_count

FROM users a 

INNER JOIN payments c
    ON a.id = c.user_id

INNER JOIN
(
    SELECT user_id, MAX(date) maxDate, period
    FROM payments
    GROUP BY user_id
) b ON c.user_id = b.user_id AND
       c.date = b.maxDate

INNER JOIN
(
    SELECT user, COUNT(id) AS upload_count
    FROM uploads
    GROUP BY user
) upload_counts ON upload_counts.user = a.id

WHERE a.package = 1
AND b.maxDate < $twomonths
AND upload_counts.upload_count > 10
AND b.period = 1

ORDER BY b.maxDate ASC
LIMIT 50; 
```

# ios - Facebook SDK 3.0 登录不在后台运行的 iOS 应用程序

> ID：12533595
> 
> 赞同：3
> 
> 时间：2012-09-21T15:31:15.813
> 
> 标签：ios, facebook, login, uiwebview

我正在我的 iOS 应用程序中实现 Facebook SDK 3.0。以前，我可以在我的应用程序中使用 webview 登录，但似乎该选项在 SDK 3.0 中不再可用。

我的应用程序不在后台运行（这是我目前不会更改的内容）。我目前从不是根控制器的视图控制器启动 Facebook（在应用程序首次启动时显示）；当登录成功完成时，我使用完成处理程序来完成 Facebook 请求。

问题是当 Facebook 登录启动时，它现在将用户带出应用程序；由于应用程序已终止，因此永远不会调用完成处理程序结果。所以用户留在rootController上，登录后没有结果。

有没有办法从 SDK 3.0 的应用程序中登录 Facebook？

如果没有，是否有一种解决方法可以让我的应用程序不会在后台运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T18:34:48.213

您可以像这样在 Web 视图中强制登录：

```
FBSession *mySession = [[FBSession alloc] initWithAppID:myAppID 
                                            permissions:myPermissions 
                                        urlSchemeSuffix:myUrlSchemeSuffix 
                                     tokenCacheStrategy:nil];
[FBSession setActiveSession:mySession];
[mySession openWithBehavior:FBSessionLoginBehaviorForcingWebView
          completionHandler:myCompletionHandler]; 
```

# visual-studio-2010 - IIS Express (WebMatrix 2) 不会在 WebAPI 项目 (VS10/WinXP) 中提供 .cshtml 文件

> ID：12533605
> 
> 赞同：1
> 
> 时间：2012-09-21T15:31:32.713
> 
> 标签：visual-studio-2010, asp.net-web-api, iis-express

我正在尝试通过 WebMatrix 2 在 WinXP 上运行 WebAPI 项目。尝试浏览 index.cshtml（在根目录中）时出现此错误：

![未服务错误](../Images/838a7c848e1ed993e040bab1f460bfc0.png)

***“不提供此类页面。”***

我在 Visual Studio 2010 中创建了 MVC4 项目类型下的 WebAPI 项目，然后将项目设置为在 IIS Express 下运行。

**我试过的：**

VS 创建的 WebMatrix 站点中的 .NET CLR 设置是 .NET 4.0（集成）。

我已经尝试过使用`runAllManagedModulesForAllRequests`Web.config 中的设置，但没有运气。

该错误发生在开发服务器和 IIS Express 中。

我已经重新启动了。

***但是，****如果我通过 WebMatrix2 UI*创建一个站点它就可以工作。通过 WebMatrix 添加到该站点的 Razor .cshtml 文件渲染得很好。

**蒂亚！**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T17:16:36.900

**成功！**

问题是默认 WebAPI 模板 web.config 中的一行：

```
<appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
    <add key="webpages:Version" value="2.0.0.0" />
    <add key="webpages:Enabled" value="false" />  <-- BAD!!!!
    <add key="PreserveLoginUrl" value="true" />
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

设置该`webpages:Enabled`设置以`true`解决问题，现在我的 .cshtml 文件可以正常工作。希望这对其他人有帮助。

这个问题解释了`webpages:Enabled`设置： [what is the function of pages:Enabled in MVC 3 web.config](https://stackoverflow.com/questions/4886095/what-is-the-function-of-webpagesenabled-in-mvc-3-web-config)

# windows-8 - 在 WinRT 中有没有办法询问硬件品牌/型号？

> ID：12533606
> 
> 赞同：1
> 
> 时间：2012-09-21T15:31:36.567
> 
> 标签：windows-8

该主题拥有一切：

**在 WinRT 中有没有办法询问硬件品牌/型号？**

假设由于某种原因 Qualcom 或三星硬件对您很重要（例如对指南针驱动程序中的错误进行调整）。是否可以识别品牌/型号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:07:10.040

使用 EasClientDeviceInformation，它包含您需要的所有内容：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh701390.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh701390.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T09:31:18.357

我还没有尝试过，但我会开始看这里：[Windows.Devices.Enumeration](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.aspx)

具体来说，[DeviceInformation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.devices.enumeration.deviceinformation.aspx)类似乎很有用。

# r - 在 R 中创建表 1

> ID：12533608
> 
> 赞同：3
> 
> 时间：2012-09-21T15:31:37.220
> 
> 标签：r, datatable, hmisc

有谁知道如何使用 R 在临床论文中创建一个典型的表 1？更具体地说，我需要报告连续变量的平均值/标准差，以及整个总体以及由分类变量定义的每个组的分类变量的计数/百分比。我还想报告组间差异的 p 值。我看到人们只对连续变量这样做，但对分类变量没有这样做。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:04:23.853

第一部分，部分回答者：

```
require(Hmisc)
latex(describe(DFnew[1:400, c("Sex", "GGT")], descript='Table1: Descriptive Statistics') 
```

[您会在Harrell 致力于可重复研究的各种网页上](http://biostat.mc.vanderbilt.edu/wiki/Main/StatReport)找到更多工作示例。特别是，您应该查看 Harrell[专着中描述他构建的工具的第 30 页（表 9）。](http://biostat.mc.vanderbilt.edu/wiki/pub/Main/StatReport/summary.doc.pdf)这基本上就是你所要求的。

![在此处输入图像描述](../Images/a59ccdb24d81e3c41a4d382518405c79.png)

# ios - (NSCFType set) - Unrecognized selector in iOS 6

> ID：12533623
> 
> 赞同：12
> 
> 时间：2012-09-21T15:32:14.190
> 
> 标签：ios, xcode, ios6, core-text, ctfontref

I'm using the great TTTAttributedLabel ([https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)) which works fine under iOS 5\. Under iOS 6 however, I get the error:

```
-[__NSCFType set]: unrecognized selector sent to instance 0x200020e0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-  [__NSCFType set]: unrecognized selector sent to instance 0x200020e0' 
```

Having researched the issue a little, it would appear that the set message is being sent to an object which has been released. Using the debugger, I have po'd 0x200020e0 which appears to be a CTFontRef.

```
po 0x200020e0
(int) $0 = 536879328 CTFont <name: .HelveticaNeueUI-Bold, size: 20.000000, matrix: 0x0>
CTFontDescriptor <attributes: <CFBasicHash 0x20001900 [0x3c2a4100]>{type = mutable dict, count = 1,
entries =>
1 : <CFString 0x3be2a768 [0x3c2a4100]>{contents = "NSFontNameAttribute"} = <CFString 0x3c292c14 [0x3c2a4100]>{contents = ".HelveticaNeueUI-Bold"} 
```

}

This led me straightaway to the code which sets up the TTTAttributedLabel:

```
 [label setText:text afterInheritingLabelAttributesAndConfiguringWithBlock:^ NSMutableAttributedString *(NSMutableAttributedString *mutableAttributedString) {
    NSRange boldRange = [[mutableAttributedString string] rangeOfString:title options:NSCaseInsensitiveSearch];
    NSRange strikeRange = [[mutableAttributedString string] rangeOfString:@"sit amet" options:NSCaseInsensitiveSearch];

    UIFont *boldSystemFont = [UIFont boldSystemFontOfSize:20];

    CTFontRef font = CTFontCreateWithName((__bridge CFStringRef)boldSystemFont.fontName, boldSystemFont.pointSize, NULL);

    if (font) {
        [mutableAttributedString addAttribute:(NSString *)kCTFontAttributeName value:(__bridge id)font range:boldRange];
        [mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(__bridge id)font range:boldRange];
        CFRelease(font);
    }

    return mutableAttributedString;
}]; 
```

as in the example usage here:

[https://github.com/mattt/TTTAttributedLabel](https://github.com/mattt/TTTAttributedLabel)

That code isn't ARCified so I've added in bridged casts (see above). I've tried retains all over the place but that doesn't seem to solve the issue (which appears to be) that the CTFontRef is getting released too early (I think - other suggestions welcome).

Any ideas on how to solve this and why this only crops up under the iOS 6 simulator? Thanks in advance.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T11:03:46.087

Replaced:

```
CTFontRef font = CTFontCreateWithName((__bridge CFStringRef)boldSystemFont.fontName, boldSystemFont.pointSize, NULL); 
```

with:

```
UIFont *font = [UIFont fontWithName:boldSystemFont.fontName size:boldSystemFont.pointSize]; 
```

Fixed the issue in iOS6 for me. Not tested on iOS 5.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T15:13:57.103

In the end it was just a stupid mistake -

```
[mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(__bridge id)font range:boldRange]; 
```

should have read:

```
[mutableAttributedString addAttribute:(NSString*)kCTForegroundColorAttributeName value:(id)[UIColor blueColor].CGColor range:boldRange]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T08:29:44.143

I encountered the same error when I have a UILabel myLabel, and doing myLabel.attributedText = NSMutableAttributedString.

Try [https://github.com/AliSoftware/OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel)

Declaring:

`@property (nonatomic, strong) IBOutlet OHAttributedLabel *myLabel;`

instead of UILabel solves the error.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T12:07:52.743

I managed to get this error when I was using a bad range adding attributes to an NSMutableAttributedString. Fixing the range fixed the crash!

EDIT: Also managed to get it by using UITextAttributeFont in the attributes dictionary which is apparently now deprecated in iOS 7 which just makes things crash mysteriously. The replacement is NSForegroundColorAttributeName.

# c# - 将数据表导出到 Excel

> ID：12533626
> 
> 赞同：3
> 
> 时间：2012-09-21T15:32:24.227
> 
> 标签：c#, excel

> **可能重复：**
> [如何在 C# 中将 DataTable 导出到 Excel](https://stackoverflow.com/questions/8207869/how-to-export-datatable-to-excel-in-c-sharp)

我的项目中包含了 TemplateExcel，我想将我的数据表导出到 Excel，我想复制并保存这个模板以及我想保存的任何地方的数据，我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T15:54:53.780

您可以通过 Excel 互操作来做到这一点，如下所示：

```
using System;
using System.Data;
using System.Runtime.InteropServices;
using Excel = Microsoft.Office.Interop.Excel;

namespace ConsoleApplication3
{
    class Program
    {
        static void Main()
        {
            Excel.Application application = new Excel.Application();
            Excel.Workbook workbook = application.Workbooks.Add();
            Excel.Worksheet worksheet = workbook.Sheets[1];

            DataTable dataTable = new DataTable();
            DataColumn column = new DataColumn("My Datacolumn");

            dataTable.Columns.Add(column);
            dataTable.Rows.Add(new object[] {"Foobar"});

            var columns = dataTable.Columns.Count;
            var rows = dataTable.Rows.Count;

            Excel.Range range = worksheet.Range["A1", String.Format("{0}{1}", GetExcelColumnName(columns), rows)];

            object[,] data = new object[rows,columns];

            for (int rowNumber = 0; rowNumber < rows; rowNumber++)
            {
                for (int columnNumber = 0; columnNumber < columns; columnNumber++)
                {
                    data[rowNumber, columnNumber] = dataTable.Rows[rowNumber][columnNumber].ToString();
                }
            }

            range.Value = data;

            workbook.SaveAs(@"C:\test\whatever123.xlsx");
            workbook.Close();

            Marshal.ReleaseComObject(application);
        }

        private static string GetExcelColumnName(int columnNumber)
        {
            int dividend = columnNumber;
            string columnName = String.Empty;
            int modulo;

            while (dividend > 0)
            {
                modulo = (dividend - 1) % 26;
                columnName = Convert.ToChar(65 + modulo).ToString() + columnName;
                dividend = (int)((dividend - modulo) / 26);
            }

            return columnName;
        }
    }
} 
```

我在这里所做的只是创建一个`System.Data.DataTable`对象，用一些数据填充它，然后将其导出到 Excel。这需要清理，添加错误处理，重构等，但基础在那里。

[感谢](https://stackoverflow.com/a/182924/969613)[Graham](https://stackoverflow.com/users/1826/graham)的GetExcelColumnName方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:37:35.533

1 您可以使用这篇文章-基于`RenderControl`，但您在绑定的 Grid 上工作

链接： http: [//www.codeproject.com/Tips/344604/Export-to-EXCEL-from-Datatable-in-Csharp-Net](http://www.codeproject.com/Tips/344604/Export-to-EXCEL-from-Datatable-in-Csharp-Net)

2 您可以基于表格进行开发

链接： http: [//www.codeproject.com/Tips/406704/Export-DataTable-to-Excel-with-Formatting-in-Cshar](http://www.codeproject.com/Tips/406704/Export-DataTable-to-Excel-with-Formatting-in-Cshar)

# jsf - JSF 与 CDI SessionScope 对 Statelss EJB 事务有奇怪的影响。谁能解释一下？

> ID：12533628
> 
> 赞同：4
> 
> 时间：2012-09-21T15:32:37.510
> 
> 标签：jsf, cdi, stateless, session-scope

我有一个带有注入的无状态会话 Bean (UserInfoService) 的 SessionScoped 托管 bean (UserInfoController)。

UserInfoController 调用 UserInfoService 来更新 UserInfo 记录。UserInfoService 加载相应的 UserInfo 记录，对其进行修改，最后调用 em.flush();

当托管 bean UserInfoController 使用 CDI 注释 (javax.enterprise.context.SessionScoped) 进行注释时，除非无状态 bean 的实体管理器使用 PersistenceContextType.EXTENDED 注释，否则不会更新用户记录。

当托管 bean 使用 JSF 注释 (javax.faces.bean.SessionScoped) 进行注释时，使用 PersistenceContextType.TRANSACTION 时记录更新成功。

谁能解释这种行为？不管调用者是 JSF 还是 CDI SessionScoped 托管 bean，事务边界不应该限制在 Stateless Bean 上吗？（TransactionAttributeType 未定义：它应该默认为 REQUIRED）

任何信息，将不胜感激！谢谢！本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T08:33:03.867

PersistenceContext 类型取决于 EJB 会话 bean，而不是像此链接中解释的支持 bean [Transaction-scoped Persistence context 和 Extended Persistence context 有什么区别？](https://stackoverflow.com/questions/2547817/what-is-the-difference-between-transaction-scoped-persistence-context-and-extend)

我在我的情况下使用具有默认 PersistenceContext 类型 (TRANSACTION) 的 @Named CDI bean，并且当我使用 javax.enterprise.context.SessionScoped 时记录更新成功

# excel - VBA + Solver循环不为每一行打印结果

> ID：12533631
> 
> 赞同：0
> 
> 时间：2012-09-21T15:32:43.070
> 
> 标签：excel, solver, vba

我是 Visual Basic for Application 初学者，遇到以下问题。

我必须使用 Excel Solver 来更改一行中的两个变量单元格，以将同一行中的另一个单元格设为零。这些单元格通过 Excel 本身的简单计算连接起来。还必须定义一些约束。

使用下面的代码，只有最后定义的行将被重写到 excel 中的单元格中。之前的行已计算但未重写。

```
Sub solverloop() 

    Dim i As Long 
    For i = 96 To 154 
        SolverReset 
        SolverOk SetCell:="$AE$" & i, MaxMinVal:=3, ValueOf:=0, ByChange:=Range(Cells(i, "V"), Cells(i, "W")), Engine:=1, EngineDesc:="GRG-Nichtlinear" 

        SolverAdd CellRef:=Range(Cells(i, "V"), Cells(i, "W")), Relation:=3, FormulaText:="0" 
        'Solving the Modell, but message box which must be confirmed by the user will not be displayed
        SolverSolve UserFinish:=True
        'Finishing the model and keep the last result
        SolverFinish KeepFinal:=1 
    Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:00:20.623

SolverReset 应该清除求解器内部的信息，例如目标单元格。

SolverOK 是定义求解器操作的命令。该命令像遥控器一样工作。它可以用鼠标或键盘来完成。定义的单元格与您通过鼠标打开求解器窗口时看到的相同。

SolverAdd，添加可以由软件（求解器本身）更改的单元格，以实现 SolverOK 函数中定义的值。

SolverSolve 与您按下按钮相同，这将启动 Solver 求解定义的信息。使用添加 UserFinish:=True 按钮不能按每一行。

SolverFinish 应该保留获得的解决方案，并“应该”将其写回 excel 单元格。

谢谢

# openlayers - 不通过 WFS-T 将数据从 Ext.data.Store 保存到 Postgres 数据库

> ID：12533633
> 
> 赞同：1
> 
> 时间：2012-09-20T18:55:09.550
> 
> 标签：openlayers, geoserver, extjs

本教程中描述的通过网络浏览器编辑空间数据的技术非常简单： [http ://workshops.opengeo.org/geoext/wfs/index.html#geoext-wfs](http://workshops.opengeo.org/geoext/wfs/index.html#geoext-wfs)

Ext、GeoExt、OpenLayers Geoserver 和 WFS-T 都完成了所有肮脏的工作，您无需在服务器端编写任何代码。所有对数据库的 UPDATE、INSERT 和 DELETE 查询都是通过 WFS-T 完成的。

非空间数据有这样的东西吗？什么可以像 WFS-T 一样处理存储到数据库的通信？上述解决方案也适用于非空间数据，但我想避免一直使用 geoserver :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T01:47:57.760

有许多工具可以将数据加载到 PostGIS。

1.  [GDAL中的](http://www.gdal.org/index.html)[ogr2ogr](http://www.gdal.org/ogr2ogr.html)实用程序是一个命令行实用程序
2.  [QGIS](http://qgis.org/)是一个桌面 GIS 客户端，可以在 PostGIS 上进行 CRUD
3.  FME 是商业软件，也可以在 PostGIS 中进行数据编辑

很多可供选择

# api - 使用 Youtube Player API 嵌入多个 iframe

> ID：12533635
> 
> 赞同：3
> 
> 时间：2012-09-21T15:33:00.543
> 
> 标签：api, iframe, youtube, embed

情况：

*   我有一个带有 youtube 视频链接的页面

*   单击链接时，使用 javascript 将新 iframe 加载到页面中（无需重新加载）（请参阅[http://developers.google.com/youtube/iframe_api_reference](http://developers.google.com/youtube/iframe_api_reference)）

*   视频结束后，或者用户选择提前关闭它，我调用 player.destroy() 并将播放器从 DOM 中删除。

所有这一切都按应有的方式工作。但是，在视频被删除后，它不再加载第二个 iframe。在加载新视频（一些 javascript 对象、事件侦听器等）之前，可能需要重置某些内容？我可以尝试什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T11:05:45.160

解决了！只有在第一个视频中`onYouTubeIframeAPIReady`，youtube API 才会调用该函数，因为在那之后`IframeAPI`仍然准备就绪。

所以，如果你想让第一个视频运行，你必须`new YT.Player()`在`onYouTubeIframeAPIReady`函数中使用。有了第二个和超越你可以立即使用`new YT.Player()`。

# cakephp - 控制器应该避免 CakePHP 的私有函数吗？

> ID：12533640
> 
> 赞同：3
> 
> 时间：2012-09-21T15:33:15.460
> 
> 标签：cakephp, cakephp-2.0, cakephp-model, private-methods

我想知道 CakePHP 的控制器是否不应该包含任何 URL 无法访问的私有函数。

有时某些函数（例如**添加**或**删除**）可能太大了，以至于我更喜欢​​将它们分开。我应该将这些函数放在模型中，而不是在控制器上设为私有吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:50:08.533

是的，如果您将方法保留在模型中，这可能是最好的。就像您自己在评论中提到的那样，“保持模型胖而控制器瘦”。控制器只是模型和视图之间交互的媒介。

当您必须处理数据源、表中的更改时，问题就来了。如果你的控制器很胖，你会到处使用这些字段，现在你将不得不在不应该在的地方清理整个设置。

模型中方法的额外好处是您可以从其他模型中调用它***并重用***代码。例如：

```
class User extends AppModel {

     public function getAllActiveUsers() {
         // return active users
     }

} 
```

上述方法可以被模型和控制器中与用户相关的所有其他方法访问。

如果您在其他地方需要此类功能，并且没有在 User 模型中定义它们，您最终要么将其重定向到控制器，要么重新编写整个逻辑。

重定向的事情并没有那么糟糕，但考虑一下如果你在别处重写了逻辑，然后你的 ActiveUsers 的实现发生了变化会发生什么。您最终将不得不在任何地方纠正问题。

然而，有一些事情必须在控制器中完成。例如，如果我必须计算用户的地理位置与附近所有匹配餐厅之间的距离，我应该在控制器中执行此操作。但控制器保持精简符合最佳利益，并且为此目的存在组件。您可以为复杂而冗长的逻辑创建自定义组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:18:56.243

我在模型中放置了较低级别的功能。特别是如果该功能可以由多个控制器使用。“低级”是指尽可能接近模型数据。如果您要对数据进行特定于视图的修改或将其与来自其他模型的数据组合（相关模型除外），则该函数不属于模型。

此外，您可以在任何控制器函数前加上下划线，它不能通过 url 使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:00:35.890

处理从数据库中添加和删除条目的逻辑是域业务逻辑的一部分。这些方法应该是模型层的一部分。

由于 CakePHP 的实现非常有限*（它假装模型层是活动记录实例的集合）*，您可以将这些方法移至某种帮助程序，或使用不继承自`AppModel`. 相反，这样的结构将能够像服务一样将控制器（和整个表示层）与域业务逻辑隔离开来。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-21T15:35:19.893

不，CakePHP 是一个框架，您可以随意为可重用的逻辑部分创建私有函数。应该是鼓励吧。

# objective-c - 布尔值IOS NSUserdefaults中的反向问号

> ID：12533641
> 
> 赞同：1
> 
> 时间：2012-09-21T15:33:15.330
> 
> 标签：objective-c, ios, storyboard, boolean, nsuserdefaults

我有一个带有故事板和导航控制器的应用程序，如果用户第一次启动该应用程序，我想弹出一个协议视图，

在 Appdelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    //app launched first time
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setBool:YES forKey:@"firstTime"];
    BOOL firstTime = [prefs boolForKey:@"firstTime"];
    NSLog(@"firstTime %c",firstTime);

     //check if user has agreed agreement or not
    if ( firstTime==YES) {

        //replace and push rootview manually
        UIStoryboard *storyboard = [UIApplication sharedApplication].delegate.window.rootViewController.storyboard;

        UIViewController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"AgreementViewController"];

        [self.window.rootViewController presentModalViewController:loginController animated:YES];

    return NO;
    }else

     return YES;
} 
```

在`Nslog`我第一次得到 a`reverse question mark sign`时，我想它既没有设置为 yes 也没有设置为 no

那么如何设置布尔值，将其保存在 ios 设备中并在每次应用启动时调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:39:34.440

在日志语句中更改`%c`为`%i`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:41:16.947

您需要使用 NSUserDefaults 方法 registerDefaults。该方法允许您设置默认值（在您的情况下为“是”），仅在用户未更改该值时使用。一旦用户将值更改为 NO，注册的默认值将不再有任何效果。

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
[prefs registerDefaults:[NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:YES],@"firstTime", nil];
BOOL firstTime = [prefs boolForKey:@"firstTime"];
 //check if user has agreed agreement or not
if ( firstTime==YES) { ..... 
```

然后，稍后当用户完成您想要的操作时，您会以通常的方式将键的值“firstTime”设置为 NO。

# windows-8 - 在 WinRT 中是否可以询问当前的操作系统版本？

> ID：12533643
> 
> 赞同：4
> 
> 时间：2012-09-21T15:33:20.887
> 
> 标签：windows-8

使用 WinRT 可以确定当前操作系统是否为：

1.  视窗
2.  视窗 8 核心
3.  视窗 8 专业版
4.  视窗 8 耳鼻喉科

**是否可以？**

请注意，问题（http://stackoverflow.com/questions/10125324/get-os-version-in-winrt-metro-app-c-sharp）似乎是重复的，但它是一个预发布问题。在整个版本中，大部分 API 都发生了变化。这个问题的答案是不可能的。这仍然是真的吗？肯定不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:59:38.367

如果可以做到，那就不容易了，必须从您可以获得的有关正在运行的系统的数据中推断出来。不幸的是，文档对此非常不清楚。例如，在Metro 风格应用程序下允许 使用[GetNativeSystemInfo 函数。](http://msdn.microsoft.com/en-US/library/windows/apps/ms724340)[请参阅此列表](http://msdn.microsoft.com/en-US/library/windows/apps/br205762)。

但是，GetNativeSystemInfo 的文档链接到[一个示例](http://msdn.microsoft.com/en-US/library/windows/apps/ms724429)，该示例说明如何获取使用多个 API 的操作系统版本，这些 API**不在**Metro 风格应用程序列表中，但该示例仍在 Metro 文档中。还不清楚[GetNativeSystemInfo](http://msdn.microsoft.com/en-US/library/windows/apps/ms724958)在 ARM 处理器上的响应是什么。

最重要的是，这是一种不好的方法，并且必然会导致代码的脆弱性。我的建议是避免尝试这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:01:29.900

您可以通过使用设备 API 获取低级系统组件（如 HAL）的驱动程序版本号来获取操作系统版本号，但可能存在不正确的风险。

[http://attackpattern.com/2013/03/device-information-in-windows-8-store-apps/](http://attackpattern.com/2013/03/device-information-in-windows-8-store-apps/)有更多信息和示例代码（披露，我写了那个帖子和代码）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T04:56:04.007

是的，使用 webview 似乎是获取正在运行的处理器的可靠且非常快速的方法。确定赞成与否，企业。不，我找不到办法。

但是，如果您对如何确定处理器感兴趣并从那里开始呢？在这里查看我的答案：[https ://stackoverflow.com/a/16996176/265706](https://stackoverflow.com/a/16996176/265706)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T17:11:13.503

看看这个：

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageid.architecture.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageid.architecture.aspx)

```
var architecture = packageId.architecture;

var package = Windows.ApplicationModel.Package.current;
var packageId = package.id;
var version = packageId.version;

var output = [ "Name: \"" + packageId.name + "\"",
           "Version: " + version.major + "." + version.minor + "." 
                       + version.build + "." + version.revision,
           "Architecture: " + packageId.architecture,
           "ResourceId: \"" + packageId.resourceId + "\"",
           "Publisher: \"" + packageId.publisher + "\"",
           "PublisherId: \"" + packageId.publisherId + "\"",
           "FullName: \"" + packageId.fullName + "\"",
           "FamilyName: \"" + packageId.familyName + "\"",
           "IsFramework: " + package.isFramework ]; 
```

# .net - Azure .NET 语言包

> ID：12533645
> 
> 赞同：4
> 
> 时间：2012-09-21T15:33:26.230
> 
> 标签：.net, azure, localization

是否在 Azure 上部署了一些 .NET 语言包，还是仅限于 en-US？这是获取本地化标准错误消息所必需的。我们正在使用 Azure 云服务。我们现在至少需要法语。

这与以下问题有关，除了这个是关于 .NET 的： [Windows Azure Language Pack](https://stackoverflow.com/questions/9311697/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:39:21.073

由于语言包未安装在您的 Azure 实例上，因此您必须将安装程序与您的部署打包在一起，并[创建一个启动任务](http://windowsazurecat.com/2011/01/utilizing-the-power-of-startup-tasks-in-your-windows-azure-web-role/)以在您的实例初始化时安装语言包。

这将使您的部署运行时间更长，但它应该满足您的需求。

# wpf - 用于查看 122x161 数字网格的 WPF/Silverlight 控件

> ID：12533646
> 
> 赞同：1
> 
> 时间：2012-09-21T15:33:28.577
> 
> 标签：wpf, silverlight, controls

我正在编写一个 UI 应用程序，它允许用户将一个数字网格粘贴到其中，然后发送到远程服务器。客户端可以是 WPF 或 Silverlight。

我尝试了一个`Grid`控件`Textbox`来`DataObject.AddPastingHandler`挂钩用户粘贴输入，将字符串中的制表符分隔行转换为`Textbox`控件。在用户从 Excel 粘贴 122x161 单元格后，这需要 12 秒 (!) 进行自我更新，这速度慢得让人无法接受。剖析字符串需要 0.1 秒，添加行和列需要 1 秒，构造和插入`TextBox`控件需要 2 秒，其余 12 秒似乎是`TextBox`第一次绘制控件。

我也尝试过`DataGrid`，但它似乎不能很好地处理二维数组，更喜欢它使用反射剖析属性的一维对象数组。

现在我正在考虑只使用 a`Canvas`并自己绘制数字，这似乎很疯狂。有没有一种简单的方法来使用内置的 WPF 或 Silverlight 控件来完成这项工作，而不会给用户带来痛苦的延迟？

**编辑**

我已经确定`TextBox`为罪魁祸首，因为它非常缓慢。这是一些说明问题的 F# 代码（替换`TextBox`为`TextBlock`40 倍，它仍然比应有的速度慢几个数量级，但在这种情况下是可以接受的）：

```
open System.Windows

let app = Application()

let readClipboard() =
  let data = (Clipboard.GetData "Text") :?> string
  [|for row in data.Split[|'\n'|] do
    match row.Split[|'\t'|] with
    | [||] | [|""|] -> ()
    | row -> yield row|]

[<System.STAThreadAttribute>]
do
  let grid = Controls.Grid()
  let row = Controls.RowDefinition()
  Controls.RowDefinition() |> grid.RowDefinitions.Add
  Controls.ColumnDefinition() |> grid.ColumnDefinitions.Add
  let add i j ctrl =
    Controls.Grid.SetRow(ctrl, i)
    Controls.Grid.SetColumn(ctrl, j)
    grid.Children.Add ctrl |> ignore
  let paste() =
    let timer = System.Diagnostics.Stopwatch.StartNew()
    let data = readClipboard()
    printfn "Read clipboard %fs" timer.Elapsed.TotalSeconds
    let rows = data.Length
    let cols = data |> Array.fold (fun n xs -> xs.Length |> max n) 0
    printfn "%dx%d" rows cols
    grid.RowDefinitions.Clear()
    grid.ColumnDefinitions.Clear()
    grid.Children.Clear()
    for row in 1..rows do
      Controls.RowDefinition(Height=GridLength 24.0) |> grid.RowDefinitions.Add
    for col in 1..cols do
      Controls.ColumnDefinition(Width=GridLength 64.0) |> grid.ColumnDefinitions.Add
    printfn "Add rows and columns complete %fs" timer.Elapsed.TotalSeconds
    for i in 0..rows-1 do
      for j in 0..data.[i].Length-1 do
        Controls.TextBox(Text=data.[i].[j]) |> add i j
    printfn "Insert complete %fs" timer.Elapsed.TotalSeconds
    Media.CompositionTarget.Rendering.Add(fun _ ->
      printfn "Next Rendering event at %fs" timer.Elapsed.TotalSeconds
      app.Shutdown())
  let scroll = Controls.ScrollViewer(Content=grid)
  scroll.HorizontalScrollBarVisibility <- Controls.ScrollBarVisibility.Visible
  let window = Window(Content=scroll)
  window.Focusable <- true
  window.Focus() |> ignore
  window.PreviewKeyDown.Add(fun e ->
    let ctrl = Input.ModifierKeys.Control
    if Input.Keyboard.Modifiers &&& ctrl = ctrl then
      if e.Key = Input.Key.V then
        paste())
  app.Run window |> ignore 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:31:18.513

我有一些代码使用后面的代码添加列。如果您使用的是 MVVM 方法，这并不理想，但我没有注意到它有任何性能问题（尽管我也没有将它推送到数百列）。

下面的代码用于将“块”列添加到包含“参与者”的数据网格中。由于在编译时不知道块的数量，因此我使用 XAML 代码生成来添加它们。

```
public void AddParticipantGridViewColumns()
{
    var setupViewModel = (SetupPanelViewModel)DataContext;
    if (setupViewModel.BlockSlotViewModels == null) return;
    var blockColumnCount = setupViewModel.BlockSlotViewModels.Count();
    var dataGrid = (DataGrid)ParticipantDataGrid;
    if (dataGrid.Columns.Count == blockColumnCount + 1) return;
    for (var blockIndex = 0; blockIndex < blockColumnCount; blockIndex++)
    {
        var column = BuildParticipantGridViewColumn(blockIndex);
        dataGrid.Columns.Add(column);
    }
}

private DataGridTemplateColumn BuildParticipantGridViewColumn(int blockIndex)
{
    var columnXaml = string.Format(@"
        <DataGridTemplateColumn
            xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation""
            xmlns:x=""http://schemas.microsoft.com/winfx/2006/xaml""
            Header=""Block {1}"">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text=""{{Binding BlockSlotViewModels[{0}].ConditionLabel}}""
                               Foreground=""{{Binding BlockSlotViewModels[{0}].TextBrush}}"" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>",
        blockIndex, blockIndex + 1);
    var column = (DataGridTemplateColumn)XamlReader.Parse(columnXaml);
    return column;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T10:48:31.780

原来问题是内置的 WPF`TextBox`控件非常慢。所以我们必须要么避免它，要么替换它。

在这种情况下，我只想要文本，因此我可以通过使用`TextBlock`来避免它，这将粘贴单元格的时间从 12 秒缩短到 0.25 秒，这（几乎）是可以接受的。

对于任何想要可编辑单元格的人，显然您应该`TextBlock`在任何地方使用，并且只将正在编辑的一个单元格转换为 a `TextBox`，因为它太慢了。

# git - 如何在特定提交之上创建分支？

> ID：12533652
> 
> 赞同：0
> 
> 时间：2012-09-21T15:33:43.367
> 
> 标签：git

我将如何在特定提交之上创建一个新的远程分支？

这是我当前的提交方式：-

> a--------b--------c--------d--------e

**我从点“c”提交**签出新的本地分支

 **```
git checkout -b c-1 <sha> 
```

我对“c-1”分支进行了更改。现在我想创建一个看起来像这样的远程分支：-

```
a-------b-------c--------d-------e
                \
                 \
                  c-1 --------c-2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:37:44.487

您不能创建具有两个头 (`e`和`c-2`) 的分支。如果您询问如何以不同的名称将本地`c-1`分支推送到存储库：`origin`

```
git push -u origin c-1:newbranchname 
```**

# cassandra - Cassandra：具有复合键的列族

> ID：12533654
> 
> 赞同：2
> 
> 时间：2012-09-21T15:33:49.343
> 
> 标签：cassandra

我需要在 Cassandra 中创建一个带有复合键 (Player,Match) 的列族 (PlayerGoals) 我想将其定义为超级列，但我读到使用超级列不是一个好主意。

我需要代表的一个例子是：

球员目标：

```
Player: 1
    Match: 2
        Goals - 0
    Match: 3
        Goals - 2
Player: 2
    Match: 2 
        Goals - 1 
```

……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:06:37.233

您可以使用复合键来存储它，其中键是 Player:Match，如下所示：

```
1:2
  Goals = 0
1:3
  Goals = 2
2:2
  Goals = 1 
```

使用此架构，您可以：

*   获取玩家的所有比赛
*   为玩家获得最高/最低/等目标
*   找出一组玩家中的哪一个参加了比赛
*   按进球数对已知球员列表进行排序

您需要一个单独的索引来：

*   让球员参加比赛
*   排名未知玩家

# c# - AutoMapper 枚举字节类型初始化异常

> ID：12533657
> 
> 赞同：2
> 
> 时间：2012-09-21T15:33:53.307
> 
> 标签：c#, automapper, typeinitializeexception

我正在尝试使用 AutoMapper 来映射一个非常简单的枚举。

存在此映射的原因是 PriorityType 位于服务器上运行的 dotnet 4.0 域模型程序集中，但我的 DataContract 程序集中需要 dotnet 3.5 中的 Dto。

```
public enum PriorityType// : byte
{
    Low = 0,
    Medium,
    High,
    Urgent
}

[Serializable]
public enum PriorityTypeDto// : byte
{
    Low = 0,
    Medium,
    High,
    Urgent
}

Mapper.CreateMap<PriorityType, PriorityTypeDto>(); 
```

如果我取消注释`byte`父类型（我真的不需要超过 255 个可能的条目！），我会得到一个`TypeInitializationException`. 也无法使用 ConvertUsing 解决它。

为什么周围打嗝`byte`？

**编辑 1**

进一步调试 AutoMapper，它实质上检索目标中的所有可写属性并检查具有相同名称的相应属性。

在枚举的情况下，有一个名为的字段`value__`，它通过 AutoMapper 尝试映射的反射可见。

该错误与 v2.2 不同（在 2.1 上），但它在映射字节枚举时仍然会引发异常，但在映射 int32 枚举时却很好。

错误发生在这里，

```
public delegate object LateBoundFieldGet(object target);

Expression<LateBoundFieldGet> lambda =
    Expression.Lambda<LateBoundFieldGet>(
        Expression.Convert(member, typeof(object)),
        instanceParameter);

return lambda.Compile(); 
```

`lambda.Compile()`抛出`InvalidProgramException`一个.

仍在试图理解为什么。

**编辑 2**

[AutoMapper GitHub 上](https://github.com/AutoMapper/AutoMapper/issues/248)也报告了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:03:51.457

您不需要 CreateMap 调用 - AutoMapper 无需任何配置即可自动处理枚举类型。只需删除 CreateMap 即可。

# javascript - JQGrid - SetRowData - 返回成功但没有更新数据

> ID：12533658
> 
> 赞同：2
> 
> 时间：2012-09-21T15:33:59.763
> 
> 标签：javascript, jqgrid

我正在尝试将数据添加/编辑到我的 JQGrid 中。目前第一列已填充，然后其他六列为空白，并且取决于第一列。所以我需要**在其他六列中添加或“编辑空白”数据，而第一列保持不变。**

现在我只是想访问 JQGrid 来编辑我当前的数据。下面的功能是我到目前为止设置的。它传递了时间（第一列数据）、欧姆数（进入网格的数据）和列名。它构建我的数据集，然后尝试将其添加到 rowid 0。这是硬编码的，因为我现在正试图让它工作。然后我访问 JQGrid，添加行数据，它实际上返回了成功，但没有向 JQGrid 添加任何内容。

*注意 - 这一切都在我的 javascript 文件中完成

```
function AddRow(elapsedTime, numMOhms, mColumn)
{
    switch(mColumn) 
    {
        case 'a':
        case 'A':
            dataToAdd = [{TestTime:elapsedTime,RdgA:numMOhms,CorrA:"",RdgB:"",CorrB:"",RdgC:"",CorrC:""}];
            break;
        case 'b':
        case 'B':
            dataToAdd = [{TestTime:elapsedTime,RdgA:"",CorrA:"",RdgB:numMOhms,CorrB:"",RdgC:"",CorrC:""}];
            break;
        case 'c':
        case 'C':
            dataToAdd = [{TestTime:elapsedTime,RdgA:"",CorrA:"",RdgB:"",CorrB:"",RdgC:numMOhms,CorrC:""}];
            break;
    }
    alert(JSON.stringify(dataToAdd));
    var success = jQuery("#polarizationTable").jqGrid('setRowData',0,dataToAdd[0]);
    if(success)
    {
        alert("y");
    }
    DrawGraph(true);
} 
```

如果你用这个替换最后一位：

```
for(var i=0;i<=dataToAdd.length;i++)
  jQuery("#polarizationTable").jqGrid('addRowData',i+1,dataToAdd[i]); 
```

我可以添加它，但它是一个愚蠢的添加，只是将该数据附加到末尾，而不是更新该行中的数据。我尝试用硬代码修改它并删除 for 循环，但没有运气。

这是我的 colModel/colNames 的样子。

```
colNames:['Minutes','Reading A', 'Corr A', 'Reading B','Corr B','Reading C','Corr C'],
colModel:[
    {name:'TestTime',index:'TestTime', align:"center", sortable:false},
    {name:'RdgA',index:'RdgA', align:"center", sortable:false},
    {name:'CorrA',index:'CorrA', align:"center", sortable:false},
    {name:'RdgB',index:'RdgB', align:"center", sortable:false},
    {name:'CorrB',index:'CorrB', align:"center", sortable:false},       
    {name:'RdgC',index:'RdgC', align:"center", sortable:false},     
    {name:'CorrC',index:'CorrC', align:"center", sortable:false}        
], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:58:42.350

```
 var success = jQuery("#polarizationTable").jqGrid('setRowData',1,dataToAdd[0]); 
```

JQGrid的第一行是1，不是0。去图吧。现在可以工作了，只需要在保持剩余数据完整的同时弄清楚更新。

# ruby-on-rails - Rails 创建多个条目复选框

> ID：12533659
> 
> 赞同：0
> 
> 时间：2012-09-21T15:33:59.780
> 
> 标签：ruby-on-rails, forms

我找不到解决方案，我变得有点绝望......

形式：

```
<%= simple_form_for @skill_user, :url => create_new_skill_users_path do |f| %>

<% @skills.each do |skill| %>
<%= skill.name %> 
```

现在...其他字段...新增

```
<%= f.input :prio, collection: 1..5, :as => :radio_buttons %>
<%= f.text_field :remark%>

<%= check_box_tag "skill_ids[]", "#{skill.id}" %>
<%= hidden_field_tag("skill_id", "#{skill.id}") %>
<%= hidden_field_tag(:user_id, "#{@user.id}") %>
<% end %> 
```

控制器：

```
def create_new_skill
params[:skill_ids].each do|skill_id|
    SkillUser.create(
         :user_id => user_id, :instruction_id => params[:instruction_id], :remark => ??, :prio => ??
    )
  end 
```

到目前为止感谢您的支持。现在我有一个不同的问题/两个问题。如果……你能再次帮助我，那就太好了。

每行表单中的单选按钮集合。但不可用，因为它们充当一个而不是每行。我需要一些额外的参数来将它们指向每行的 Skill.id。

以及如何获取控制器中的值。

备注文本字段。我在日志中得到 "skill_user"=>{"remark"=>""} 。被覆盖......需要某处[]。什么是最好的方法？

我努力了：

<%= simple_fields_for "skill[]", @skill_user do |f| %> 给我日志："skill"=>[{"remark"=>"test"}

控制器 :remark => params[:skill][:remark] => 无法将 Symbol 转换为 Integer phh...

“text_field_tag[]”返回一个哈希..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:41:58.997

你应该写

```
 params[:skill_ids].each do|skill_id| 
  SkillUser.create(:user_id => params[:user_id], :skill_id => skill_id)
 end 
```

在您的控制器的操作中。

根据 REST 约定，您的帖子操作也应该是创建而不是新的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:57:39.203

由于您可能处于学习阶段，因此我会向您推荐一些提示并给您答案。

用好名字命名你的动作和控制器。在这种情况下，我想具有新动作的 SkillController 是一个不错的选择。在路由中，大部分时间使用资源而不是匹配或获取/发布/放置/删除。

```
 def new_sk
   params[:skill_ids].each do|skill_id| 
    SkillUser.create(
      :user_id => params[:user_id],
      :skill_id => skill_id,
      :name => params[:name]
    )
   end
 end 
```

是答案。这段代码很简单，你传递给 SkillUser.create 的是一个 HASH，哈希键是 user_id、skill_id 和 name，它们各自的值是 params[:user_id]、params[:skill_id] 和 params[:name ]。

当您不知道“params”变量的当前状态（它的哈希值如何嵌套等等）时，我建议您打印它，如下所示：

```
p params.inspect 
```

在您开始操作时，请阅读您正在运行服务器的终端上打印的内容。当您只是想查看服务器端真正发生的事情时，有一个名为的宝石`awesome_print`可以用颜色打印它并且很棒（顾名思义）。

我还建议您创建一个具有好名称的模型。“SkillUser”是错误的，如果你写了UserSkill会更好。您可能很快就会与关系合作，我进一步建议您阅读有关这方面的 Rails 指南。

[导轨](http://guides.rubyonrails.org/)是黄金的。您可以在那里找到 90% 的问题得到解答，并有很好的解释。

祝你有美好的一天。

# c# - 绑定中的 WCF 代理绕过列表

> ID：12533660
> 
> 赞同：1
> 
> 时间：2012-09-21T15:34:07.373
> 
> 标签：c#, wcf, iis

我知道要在 WCF 4.0 应用程序中添加代理，您必须将其添加到配置文件中的绑定中。但是，如果您需要添加代理异常，例如此处的“绕过列表示例”怎么办？这样的常规部分是否有效，或者有没有办法向绑定添加异常？

```
 <system.net>
    <defaultProxy>
      <proxy
        usesystemdefaults="true"
        proxyaddress="http://192.168.1.10:3128"
        bypassonlocal="true"
      />
      <bypasslist
        <add address="[a-z]+\.contoso\.com" />
      </bypasslist>
    </defaultProxy>
  </system.net> 
```

# google-chrome-extension - Chrome 说我的扩展程序清单文件丢失或无法读取

> ID：12533661
> 
> 赞同：40
> 
> 时间：2012-09-21T15:34:07.393
> 
> 标签：google-chrome-extension

我是一名新的 chrome 扩展开发人员，我正在阅读有关制作“Hello World”扩展的 Chrome 教程，这是我的代码：

```
 {
      "name": "My First Extension",
      "version": "1.0",
      "manifest_version": 2,
      "description": "The first extension that I made.",
      "browser_action": {
       "default_icon": "icon.png"
      },
       "permissions": [
       "http://api.flickr.com/"
      ]
      } 
```

当我去加载解压后的扩展时，它说清单文件丢失或无法读取。是的，我将图像放在一个文件夹中，并且正确命名为 manifest.json

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-21T15:40:29.763

经常发生的事情是清单文件没有正确命名。仔细检查名称（和扩展名）并确保它不以*.txt*结尾（例如）。

为了确定这一点，请确保您没有隐藏文件扩展名：

1.  打开 Windows 资源管理器
2.  转到文件夹和搜索选项 > 查看选项卡
3.  取消选中*隐藏已知文件类型的扩展名*

另外请注意，清单文件的命名实际上是区分大小写的，即*manifest.json* != *MANIFEST.JSON*。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-16T01:10:21.150

我的问题略有不同。

默认情况下，Eclipse 将 manifest.json 保存为 ANSI 编码的文本文件。

解决方案：

*   在记事本中打开
*   文件 -> 另存为
*   从左下角的编码下拉菜单中选择 UTF-8。
*   节省

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-27T04:25:40.163

我也遇到了这个问题。

我的问题是我重命名了我的扩展所在的文件夹，所以我所要做的就是删除并重新加载扩展。

认为这可能会帮助一些人。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-08T12:22:06.080

我的也很有趣。在从教程中复制粘贴“manifest.json”时，我还设法复制了一个前导空格。无法理解为什么它没有找到它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-22T12:17:34.563

如果您从 developer.chrome.com 下载示例，则您的实际文件夹可能包含在同名文件夹中，这会产生问题。例如，您提取的名为 tabCapture 的示例扩展名将如下所示：

```
C:\Users\...\tabCapture\tabCapture 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-26T10:52:40.713

默认示例的一些权限问题。

我想看看它是如何工作的，我正在创建第一个扩展，所以我下载了一个更简单的。

[从https://developer.chrome.com/extensions/examples/api/history/showHistory.zip](https://developer.chrome.com/extensions/examples/api/history/showHistory.zip)下载了“键入的 URL 历史记录”示例

可以在
[https://developer.chrome.com/extensions/samples找到](https://developer.chrome.com/extensions/samples)

这很好，希望它有帮助

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-28T10:49:07.870

请检查您是否安装了正确版本的 ChromeDriver。就我而言，安装正确的版本会有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-18T08:33:41.447

就我而言，这是构建扩展的问题，我指向的是扩展 src（带有清单和所有内容）但没有构建。

如果您遇到这种情况，请 `npm i` 运行 `npm build`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-25T10:48:57.230

在 Linux (fedora) 上，我能够通过更改文件夹的路径来解决问题。

默认情况下，它选择了`~/path-to-folder` 我因此强迫它使用`/home/user/path-to-folder`

# python - Python列表尺寸大小错误

> ID：12533665
> 
> 赞同：0
> 
> 时间：2012-09-21T15:34:11.993
> 
> 标签：python, list

考虑python中的以下代码：

```
def main():
    n = input( )
    s = input( )

    coins = [ 0 ]*n
    dp = [ 0 ]*( s+1 )

    print coins
    print dp

    for i in range( n ) :
        coins[ i ] = input( )

    dp[ 0 ]=0
    dp[ 1 ]=1

    for i in range( 2, s+1 ) :
        min_val = 999999
        for j in range( 0, n ) :
            if i-coins[ j ] > 0 :
                if dp[ i-coins[ j ] ] + 1 < min_val :
                    min_val = dp[ i-coins[ j ] ] + 1

    print coins
    print dp

    print coins[ s ]

if __name__ == "__main__" :
    main() 
```

当我编译并运行这个程序时，我得到以下运行时错误：

```
File "test.py", line 33, in <module>
  main();
File "test.py", line 30 in main
  if dp[ i-coins[ j ] ] + 1 < min_val :

IndexError: list index out of range 
```

它出什么问题了？

输入：

```
5 10
1 3 5 7 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:38:12.783

我们知道（从上一行`if`）`i-coins[ j ] > 0`，所以它必须大于或等于`len(dp)`，即`s + 1`。 `i`小于`s+1`，所以`coins[ j ]`是负数。

您是否为其中一个输入了负数`coins`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:48:42.003

尝试使用

```
coins = [ 0 ]*n
dp = [ 0 ]*( s+1 ) 
```

初始化数组。

我的机器上出现了完全不同的错误：

```
 File "ttt.py", line 31, in <module>
    main()
  File "ttt.py", line 21, in main
    if dp[ i-coins[ j ] ] + 1 < min_val :
TypeError: unsupported operand type(s) for +: 'NoneType' and 'int' 
```

而`print dp[s]`不是`print coins[s]`在最后一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:37:40.913

dp 是 s+1 长度，但你的 for 循环到 n。如果 s+1 > n 那么这将起作用。但在这种情况下，我认为你的 s+1 < n。

```
dp = [ None ]*( s+1 ); # dp is s+1 in length.

for j in range( 0, n ) # loop goes to n. 
```

列表索引超出范围意味着 s+1 < n

# java - math.Random 不能正常工作

> ID：12533668
> 
> 赞同：0
> 
> 时间：2012-09-21T15:34:41.960
> 
> 标签：java, math, random

我正在尝试使用下面的代码模拟硬币翻转。

```
public class Coin
{
    public static double result;
        int[] count = new count[2];

    public static void flip()
    {       
        result = Math.random();
    }

        public static boolean isHeads()
        {
        if (result == 0.0)
        {
                    count[0]++;
            return false;
        }

        else
        {
                    count[1]++;
            return true;
        }
        }

        public static void main(String[] args)
        {
             flip();
             isHeads();
             System.out.println(count[0]);
             System.out.println(count[1]);
        }
} 
```

出于某种原因，Eclipse 说

导入 java.util.Random；

即使我清楚地使用它，也从未使用过。我没有将我的 for 循环放入上面的代码中，但它循环了 n 次，然后输出结果。无论它循环多少次，它总是返回结果大于 0.0，这是不可能的。我是否错误地调用了 Math.random？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T15:36:56.843

您正在使用 Math，它可能正在使用 Random，但您没有在任何地方使用 Random。

> 无论它循环多少次，它总是返回结果大于 0.0，这是不可能的。我是否错误地调用了 Math.random？

在 0.0 和 1.0 之间有 2 ^ 53 个可能的值，并且由于 Random 仅使用 48 位种子，因此您可以生成`double`它将创建的每一个值，并且不会出现任何值。如果您使用 SecureRandom，您有二分之一 ^ 53 的机会返回 0.0。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T15:39:19.507

我会推荐使用

`java.util.Random`

```
public static void main(String[] args) throws Exception {
    Random rand = new Random();

    int headCount = 0;
    int tailCount = 0;

    for (int i = 0; i < 10; i++) {
        int value = rand.nextInt(2);

        if (value == 0) {
            System.out.println("Heads");
            headCount++;
        } else {
            System.out.println("Tails");
            tailCount++;
        }
    }

    System.out.println("Head Count: " + headCount);
    System.out.println("Tail Count: " + tailCount);

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T15:39:36.037

一旦你解决了你的编译问题，你会发现你的“硬币”是不公平的：它给你的“尾巴”比“正面”要多得多。事实上，你很少会得到任何“正面”！

这是因为`random()`给你一个`double`between `0`and `1`，而不是一个`int`of `0`and `1`。因此，您需要按如下方式更改您的条件：

```
if (result < 0.5) {
    count[0]++;
    return false;
} else {
    count[1]++;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T15:45:42.760

Math.Random 和 java.util.Random 是两个不同的东西。

```
static Random random = new Math.Random();
public static void flip()  {       
    result = random.nextDouble();
} 
```

和

```
 public static boolean isHeads() {
    if (result > 0.5) {
       count[0]++;
       return false;
    }
    //else {
        count[1]++;
        return true;
    //}
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T15:36:58.607

您应该创建一个[util.Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)的实例并使用它来生成您的数字。

你可以更换

```
public static void flip()
{       
    result = Math.random();
} 
```

经过

```
static Random r = new Math.Random();
public static void flip()  {       
    result = r.nextDouble();
} 
```

由于您需要的实际上是一个布尔值，我建议您使用[nextBoolean](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html#nextBoolean%28%29)方法：

```
static Random r = new Math.Random();
static boolean result;
public static void flip()  {       
    result = r.nextBoolean();
}
public static boolean isHeads() {
    count[result?1:0]++;
    return result;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T15:37:14.880

`Math.random()`是`java.lang.Math`类中的一个方法

# android - 带有 Spring Resttemplate 的 Android：错误消息转换器

> ID：12533671
> 
> 赞同：1
> 
> 时间：2012-09-21T15:35:15.830
> 
> 标签：android, spring, resttemplate

我正在使用 maven 和 spring resttemplate 开发 android 应用程序。

这是我的 pom.xml

```
<properties>
    <platform.version> 2.3.3</platform.version>
    <spring.version>1.0.0.RELEASE</spring.version>
    <simple-version>2.4.1</simple-version>
</properties>

<dependencies>

    <!-- Spring Android Core -->
    <dependency>
        <groupId>org.springframework.android</groupId>
        <artifactId>spring-android-core</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Spring Rest Android -->
    <dependency>
        <groupId>org.springframework.android</groupId>
        <artifactId>spring-android-rest-template</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <!-- Using Jackson for JSON marshaling -->
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.7.1</version>
    </dependency>

    <!-- Using Simple for XML marshaling -->
    <dependency>
        <groupId>org.simpleframework</groupId>
        <artifactId>simple-xml</artifactId>
        <version>${simple-version}</version>
        <exclusions>
            <exclusion>
                <artifactId>stax</artifactId>
                <groupId>stax</groupId>
            </exclusion>
            <exclusion>
                <artifactId>stax-api</artifactId>
                <groupId>stax</groupId>
            </exclusion>
        </exclusions>
    </dependency>

</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.1.1</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>${project.basedir}/assets</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>${project.basedir}/src/main/native</nativeLibrariesDirectory>
                <sdk>
                    <platform>10</platform>
                </sdk>
                <emulator>
                    <avd>10</avd>
                </emulator>
                <deleteConflictingFiles>true</deleteConflictingFiles>
                <undeployBeforeDeploy>true</undeployBeforeDeploy>
            </configuration>
            <extensions>true</extensions>
        </plugin>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

在主活动中，我将此代码放入按钮中：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnLogin = (Button) findViewById(R.id.btnLogin);

    btnLogin.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {

            String email = "user@xxxx.com";
            String passwd = "123456";

            restTemplate = new RestTemplate();

            try {
                Users user = restTemplate.getForObject(URL + "/{email}/{password}",
                                Users.class, email, passwd);

                if (user != null) {
                    System.out.println("Mi nombre es: " + user);
                }

            } catch (ResourceAccessException ex) {
                System.out.println("OFF");
            } catch (RestClientException ex) {
                System.out.println("Error");
            }
        }
    }); 
```

当我在设备中运行我的应用程序时，这是 logCat 中显示的错误：

```
java.lang-IllegalArgumentException: 'messageConverters' must not be empty 
```

谢谢！！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:57:03.017

设置消息转换器

```
RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
Users user = restTemplate.getForObject(URL + "/{email}/{password}",
                            Users.class, email, passwd); 
```

请`2.7.3 Retrieving JSON data via HTTP GET`在[Spring for Android Reference Manual](http://static.springsource.org/spring-android/docs/1.0.x/reference/htmlsingle/)中查看更多信息。

[这](http://www.jmanzano.es/blog/?p=163&lang=en)是一个很好的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T12:19:18.847

您需要设置消息转换器，以便可以将响应解析为用户实例。根据您使用的服务器的响应类型，您应该提供不同的转换器，例如，如果您需要解析 JSON，您可以使用：

```
restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter()); 
```

如果使用一些预定义的转换器，您可能需要在项目中包含一些额外的库（在本例中，您需要一个 Jackson 库）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T19:05:09.473

我使用 try/catch 和 inside 方法找到了解决方案：

```
public Users obtainUser() {
    try {

        HttpHeaders requestHeaders = new HttpHeaders();
        requestHeaders.setAccept(Collections.singletonList(new MediaType("application","json")));
        HttpEntity<?> requestEntity = new HttpEntity<Object>(requestHeaders);

        RestTemplate restTemplate = new RestTemplate();

        restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());

        ResponseEntity<Users> responseEntity = restTemplate.exchange(URL, HttpMethod.GET, requestEntity, Users.class);
        Users users = responseEntity.getBody();

        return users;

    } catch (Exception e) {
        System.out.println("Error: " + e);
        return null;
    }
} 
```

也使用 android 类 AsyncTask

# c - Shell_NotifyIcon() 和一个不可见的窗口

> ID：12533676
> 
> 赞同：1
> 
> 时间：2012-09-21T15:35:31.340
> 
> 标签：c, winapi, shell, tray

我想使用 Shell_NotifyIcon() 将图标添加到系统托盘，但我不想在我的应用程序中有可见窗口。这就是为什么我将一个仅消息窗口的句柄传递给 Shell_NotifyIcon()。窗口是这样创建的：

```
hTrayWnd = CreateWindowEx(0, CLASSNAME, "tray_dummy", 0, 0, 0, 0, 0, HWND_MESSAGE, NULL, HINSTANCE, NULL); 
```

CLASSNAME 指向我使用 RegisterClassEx() 注册的类的名称，而 HINSTANCE 是我的实例的句柄。

现在的问题是：托盘图标已添加，但我的班级的 WindowProc() 从未被调用。如果我改用普通的顶级窗口，一切正常。

没有顶级窗口就没有办法创建托盘图标吗？我已经看到应用程序有一个没有顶级窗口的托盘图标，所以它必须以某种方式成为可能。但为什么它不适用于 HWND_MESSAGE 窗口？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T18:30:43.403

哎呀，对不起，是我的错。它不起作用的原因是我从另一个线程调用了 CreateWindowEx() 。当我使用主线程时，它工作正常。

# android - 在异步任务中关闭对话框时出现 IllegalArgumentException

> ID：12533677
> 
> 赞同：1
> 
> 时间：2012-09-21T15:35:31.260
> 
> 标签：android, dialog, android-asynctask, illegalargumentexception

我的问题与此类似：

[在 AsyncTask 中关闭 ProgressDialog 时出错](https://stackoverflow.com/questions/9690783/error-on-dismissing-progressdialog-in-asynctask)

我有一个 AsyncTask 在 onPreExecute 中创建一个对话框，如下所示：

```
dialog = ProgressDialog.show(activity, "login", "logging in, one moment please"); 
```

并像这样关闭 onPostExecute 中的对话框：

```
if (dialog != null && dialog.isShowing()) {
    dialog.dismiss();
} 
```

尽管如此，我还是在执行 diolog.dismiss() 的行上收到用户的错误报告，消息是：java.lang.IllegalArgumentException: View not attach to window manager

最常见的根本原因是 - 或者我读过 - 当用户切换方向（从纵向到横向，反之亦然）时。然而，我的应用程序被迫进入纵向模式，所以这不是原因。（我已经仔细检查过，以确保它真的不可能）

前面提到的帖子的记者最终通过在活动类中为 AsyncTask 创建一个内部类并使用活动类中的 onCreateDialog 并从 AsyncTask 调用 showDialog 来解决它（我也在其他地方阅读过这个解决方案）。（如果你不明白这一点，请阅读他的帖子）我已经开始尝试实现这一点，但似乎 showDialog 已被弃用：所以这对我来说不是一个解决方案。

我发现的最后一个解决方案是简单地捕获异常。我自己也想过这个，但只是作为最后的手段。我更愿意了解真正出了什么问题并对此进行预测，而不是简单地捕捉异常而不知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:08:12.060

您应该在 manifest.xml 中添加它

最高 API 级别 12

```
 <activity
        android:label="@string/app_name"
        android:name=".Activity_calling_AsyncTask"
        android:configChanges="keyboardHidden|orientation"> 
```

在apl 12级之后，

```
 <activity
        android:label="@string/app_name"
        android:name=".Activity_calling_AsyncTask"
        android:configChanges="keyboardHidden|orientation|screensize">
  </activity> 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:59:02.737

如果乍得所说的是正确的 - 某些设备可能会在几分之一秒内以横向启动 - 那么我认为这是获得错误报告的最可能原因。虽然 Rajendra 的解决方案可能能够防止这种情况发生，但我认为它确实像其他人指出的那样使用创可贴，因为屏幕旋转并不是真正问题的唯一来源。

经过一番搜索，我找到了两个解决方案：

1.  将 AsyncTask 实现为继承自 Application 类的类的一部分，此处对此进行了说明：[Handle screenorientation changes when there are AsyncTasks running](https://stackoverflow.com/questions/4584015/handle-screen-orientation-changes-when-there-are-asynctasks-running)
2.  实现 onRetainNonConfigurationInstance() / setRetainInstance()。此处给出了第一个示例：http: [//twigstechtips.blogspot.com/2011/11/for-my-app-moustachify-everything-i-was.html](http://twigstechtips.blogspot.com/2011/11/for-my-app-moustachify-everything-i-was.html) - 但是，该方法本身已被弃用，因此它会最好以类似的方式使用 setRetainInstance。

为了完整起见，还有[Droid-Fu for Android library](http://brainflush.wordpress.com/2009/11/16/introducing-droid-fu-for-android-betteractivity-betterservice-and-betterasynctask/)，声称能够解决这个问题。

# mysql - mysql_query 上 utf8_general_ci 排序规则

> ID：12533678
> 
> 赞同：1
> 
> 时间：2012-09-21T15:35:34.897
> 
> 标签：mysql, utf-8, utf8-decode

我在使用 utf8 编码对数据库运行查询时遇到了一些麻烦。一切正常，直到我尝试使用特殊字符的字符串。我无法对数据库进行大量更改，因为我正在向现有的 prestashop 模板添加一些单独的页面。

这是我的代码（抱歉，其中一些是罗马尼亚语）

```
$acces_server=mysql_connect($db_host, $db_user, $db_pass);
    if(!$acces_server) die ("Server-ul nu este disponibil momentan !");
    mysql_set_charset('utf8');
     echo mysql_client_encoding();

$acces_bd = mysql_select_db($db_name);
    if (!$acces_bd) die ("Ne pare rau, dar baza de date nu poate fi accesata momentan !");
mysql_query('SET NAMES utf8') or die(mysql_error());
mysql_query('SET CHARACTER SET utf8') or die(mysql_error());
mysql_query('SET COLLATION_CONNECTION="utf8_general_ci" ') or die(mysql_error()); 
```

如果我尝试进行这样的查询，我会得到 0 行：

```
$experienta= $_GET['name'];
$rez=mysql_query("SELECT nume_cutie FROM rez_experiente WHERE nume = '".$experienta."'"); 
```

我使用 echo 来显示查询，然后在 phpMyAdmin 中键入它并且它工作。头部也有这一行：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我真的不知道还能做什么，到目前为止我找到的所有解决方案似乎都不起作用。我什至尝试过使用mysqli，结果是一样的。请帮助我，并感谢您的时间。

*编辑我尝试使用 stmt->prepare 和 mysqli 并没有奏效。我也试过这样做：

```
$experienta2=str_replace("?","%",utf8_decode($experienta));
        $rez=mysql_query("SELECT nume_cutie FROM rez_experiente WHERE nume LIKE '".$experienta2."'"); 
```

威奇变成了这样：

```
SELECT nume_cutie FROM rez_experiente WHERE nume LIKE '5th Avenue Beauty Center  - Răsfăţ' 
```

进入这个：

```
SELECT nume_cutie FROM rez_experiente WHERE nume LIKE '5th Avenue Beauty Center - R%sf%%' 
```

查询再次在 phpMyAdmin 中工作，但 mysql_query() 没有返回任何内容，我切换到 utf8_unicode_ci 并且没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:38:11.817

数据库连接后，运行以下查询：

```
SET character_set_client=utf8;
SET character_set_connection=utf8;
SET character_set_database=utf8;
SET character_set_results=utf8;
SET character_set_server=utf8; 
```

# ruby-on-rails-3 - 迭代一个任务模型，计算用户数量，...然后删除任何多次存在的用户

> ID：12533681
> 
> 赞同：0
> 
> 时间：2012-09-21T15:35:47.967
> 
> 标签：ruby-on-rails-3, find, loops

我需要评估一个 user_id 在数组中是否存在多次。最终，我需要确定用户是否能够在一次尝试中完成一项任务（每个任务都保存为一条记录）。我需要显示成功的百分比，这最终取决于第一次尝试就成功的用户数量。我向任务模型“：通过”添加了一个布尔值，但是我必须编写更多逻辑来为第一条记录设置该布尔值，然后在创建任何后续记录时取消设置。那闻起来 我现在的方法是简单地创建一个 task.users 数组，然后确定该数组中是否存在任何 user_id 多次......以及它是否确实从数组中删除了该整数的所有实例（以便不计算在内） . 我绊倒了自己的思维过程，却没有成功……

如何迭代所有任务并计算计数大于 1 的任何用户的每次迭代 user_id 和 .delete(user_id)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:09:30.233

不明白你在问什么，但这会给你一个 user_id 的数组，它们已经完成了没有重复的任务：

```
task.users.map(&:user_id).uniq 
```

根据您的评论，您可以尝试：

```
task.users.group_by{ |u| u.user_id }.collect{ |u, dups| u if dups.size == 1 }.compact 
```

# c++ - Pin Like Tool 用于在编译时注入检测代码

> ID：12533682
> 
> 赞同：1
> 
> 时间：2012-09-21T15:35:51.777
> 
> 标签：c++, c, llvm, intel-pin

您可能知道，[PIN](http://www.pintool.org/)是一种动态二进制检测工具。例如，通过使用 Pin，我可以检测应用程序中的每个加载和存储。我想知道是否有类似的工具在编译时注入代码（使用更高级别的信息，不需要我们编写 LLVM 通道），而不是像 Pin 那样在运行时注入代码。我对这种用于 LLVM 的工具特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:39:35.537

您可以编写自己的[LLVM 通行证](http://llvm.org/docs/WritingAnLLVMPass.html)，并将它们应用到您的代码中，以便在编译时“检测”它。这些在 LLVM IR 上工作并生成 LLVM IR，因此对于某些任务来说，这将是一件非常自然的事情，而对于其他任务来说，这可能很麻烦或困难（因为 LLVM 和 IR 以及源语言之间的差异）。这取决于。

# media-player - JavaFX：MEDIA_UNSUPPORTED：不支持媒体类型

> ID：12533683
> 
> 赞同：2
> 
> 时间：2012-09-21T15:36:00.850
> 
> 标签：media-player, javafx-2

当我尝试在我的应用程序中播放***.mov文件时，出现以下错误：***

```
MediaException: MEDIA_UNSUPPORTED : media type not supported (file:///C:/videos/start.mov) 
```

JavaFX 版本：2.1

IDE：Netbeans 7.2

平台：Windows XP。

关于这个的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T02:17:30.387

您尝试播放的媒体不支持在 JavaFX 中播放，您需要将其转换为其他类型。

* * *

[对于 JavaFX 2.2，支持的媒体类型和编码](http://docs.oracle.com/javafx/2/api/javafx/scene/media/package-summary.html#SupportedMediaTypes)数量有限。您会注意到 .mov 不是 JavaFX 支持的容器格式。机器上的 Windows Media Player 或其他软件可以播放它并不重要——JavaFX 需要明确支持该格式才能正常工作。

此外，在 WindowsXP 等平台上，需要在系统上安装额外的外部编解码器才能播放某些格式（如 MP4）。

* * *

因此，为了能够使用 JavaFX 播放视频，您需要做的是将其重新编码为 JavaFX 能够播放的格式。如果您想允许在 XP 上播放而不安装额外的编解码器，那么您可以在 FLV 容器中使用 VP6 编码。您可以（可能）使用[Wildform 的编码软件](http://www.wildform.com/products/flix/flix_standard.php)将文件转换为这种格式。或者，如果您不介意在客户端系统上安装额外的编解码器（例如通过安装[DivX](http://www.divx.com/)），您可以重新编码为 MP4。谷歌搜索将显示有关如何在 MP4 容器中编码为 H264+AAC 的信息。

请注意，对于 OSX 或 Win7，在 MP4 容器中播放 H264+AAC 不需要额外的编解码器（但无论如何，目前这些平台上的 JavaFX 都不支持 mov 容器）。

# jquery - 使用 jQuery 在页面底部的页脚

> ID：12533690
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:36:38.853
> 
> 标签：jquery

即使页面内容不是很高，我也会尝试将页脚保持在页面底部。当用户缩小页面并且脚与内容相遇时，滚动应该出现并且页脚应该隐藏在内容下方。

（我不希望页脚处于固定位置，因为当它遇到内容时，页脚会在顶部并隐藏内容）

菲利普在这里提出了一个很好的詹姆斯泰勒的例子。我想要相同的效果，但使用 jQuery。（我不能应用这个 css 解决方案，因为我需要内容处于绝对定位）[http://matthewjamestaylor.com/blog/bottom-footer-demo.htm](http://matthewjamestaylor.com/blog/bottom-footer-demo.htm)

```
$(function(){   
    var documentHeight = $(document).height();
    if(documentHeight >= 420){
        $('#foot').css({position: 'absolute',bottom:'10px'});
    }

    else{
        $('#foot').css({position: 'absolute',top:'410px'});
    }   
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:48:27.630

你想要的是

```
var topDistance = $('#foot').offset().top; 
```

[编辑]

如果您想将页脚保留在页面上，始终位于底部，则需要使用

```
position: fixed; 
bottom: 10px; 
```

但是如果你想让页脚保持在窗口的底部，即使 body 小于窗口，但是如果 body 更大，页脚将在文档的底部

这是一个解决方案：http: [//matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

# wcf - 在多个进程之间共享静态数据

> ID：12533694
> 
> 赞同：2
> 
> 时间：2012-09-21T15:36:54.553
> 
> 标签：wcf, multiple-instances

我有一个 WCF 服务（在 NetTCP 上的控制台应用程序中实例化），该服务具有静态数据（大容量），它在负载时被实例化。

我有这个控制台应用程序的多个实例同时运行，它们都在做相同的静态数据初始化，有没有一种方法可以让我拥有一个数据源并在进程之间共享数据，这样每个进程就不必消耗大量内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:38:34.353

您可以使用内存映射文件；但由于 Windows 保护应用程序的方式，每个进程都必须拥有自己的内存。

来自[http://msdn.microsoft.com/en-us/library/dd997372.aspx](http://msdn.microsoft.com/en-us/library/dd997372.aspx)：

> 非持久文件是与磁盘上的文件无关的内存映射文件。当最后一个进程完成对文件的处理时，数据会丢失，文件会被垃圾回收器回收。这些文件适用于为进程间通信 (IPC) 创建共享内存。

使用任何类型的“共享”数据，您将拥有同步访问的额外任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:10:35.893

快速的解决方案是编写另一个您首先运行的专用服务。它会加载一次数据，并根据需要将其提供给其他服务实例。

更强大的解决方案是将数据存储在所有服务都连接到的数据库或缓存层中。缓存层是一个不错的选择，因为如果它不在缓存中（保留更多当前设计），您的服务可以延迟加载它，并且它可以很快（在内存中）。一些缓存选项包括：

*   [Windows AppFabric](http://msdn.microsoft.com/en-us/library/hh334305)
*   [内存缓存](http://memcached.org/)
*   [NCache](http://www.alachisoft.com/ncache/ncache-express.html)

# python - 在 PySide 中使用 QtHostinfo.lookupHost

> ID：12533698
> 
> 赞同：5
> 
> 时间：2012-09-21T15:37:01.953
> 
> 标签：python, qt, pyside

我正在做一个项目，我想确认本地网络上是否存在主机。在 Qt 的 QtNetwork 包中，该`QHostInfo::lookupHost`方法是一种搜索主机的便捷方式，无需执行任何类型的 ping 操作或依赖于 ping 系统调用。它的异步调用可以方便地创建一个等待调用返回的对话框，并在对话框或主程序中使用一个槽来处理返回。

### 来自 Qt 的 QHostInfo 文档：

> 要异步查找主机的 IP 地址，请调用 lookupHost()，它将主机名或 IP 地址、接收器对象和插槽签名作为参数并返回一个 ID。您可以通过使用查找 ID 调用 abortHostLookup() 来中止查找...
> 
> 当结果准备好时调用该槽。结果存储在 QHostInfo 对象中。调用addresses() 获取主机的IP 地址列表，调用hostName() 获取查找的主机名。

PySide 的文档[`QHostInfo`](http://www.pyside.org/docs/pyside/PySide/QtNetwork/QHostInfo.html)详细说明了用法，`lookupHost`但我认为它可能是从 Qt 文档中自动生成的，因为默认情况下，该方法在[QtNetwork 的类型系统定义中](http://qt.gitorious.org/pyside/pyside-archive/blobs/master/PySide/QtNetwork/typesystem_network.xml)`lookupHost`被声明为私有方法。

在 PySide 实现中将此方法声明为私有是否有特殊原因？它是否与调用的异步性质和 Python 的 GIL 有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:44:57.873

在没有收到 PySide 板的答复后，我更改了 QtNetwork 的 PySide 类型系统定义文件中的行，使其显示为：

`<modify-function signature="lookupHost(QString,QObject*,const char*)" access="public"/>`

重新编译 PySide 并没有问题

# asp.net - Webforms Ajax 实践和 IE 回退

> ID：12533703
> 
> 赞同：0
> 
> 时间：2012-09-21T15:37:14.770
> 
> 标签：asp.net, ajax, jquery, user-controls, webforms

以 next.co.uk 为例，我希望创建一个新的 swish 站点，该站点使用 webforms 和 updatepanels 和/或 jquery ajax 来滑动面板。

但是，如果您在 next.co.uk 上注意到，当您在顶部的部门导航中单击一个项目时，在 Chrome 和 FF 中它会将所有内容滑入，但在 IE7、8 和 9 中它会执行正常的回发。

推荐的方法是什么？即，对所有内容使用 ascx 用户控件并将站点主控器包装在更新面板中以动态滑动它们是否明智？另外，如何为 IE 或不支持快速滑动 ajax 面板的旧浏览器创建后备方案？- 因为他们需要像往常一样进行完整的回发。

我可以理解使用 MVC 会更容易做到这一点，但我的限制是我使用的是 VS2008 Webforms。

# c - 如何在 GtkScrolledWindow 中制作 Gtk+ 小部件以在打包到 GtkPane 时展开？

> ID：12533710
> 
> 赞同：3
> 
> 时间：2012-09-21T15:37:52.997
> 
> 标签：c, gtk, gtktreeview, gtkscrolledwindow

我有一个程序，它显示两个[`GtkTreeView`](http://developer.gnome.org/gtk/2.24/GtkTreeView.html)s 包装在一个[`GtkPaned`](http://developer.gnome.org/gtk/2.24/GtkPaned.html)（[sscce](http://sscce.org/)：[这里](http://pastebin.com/jzTT0zSA)）：

```
gtk_paned_add1(GTK_PANED(paned), tree_view1);
gtk_paned_add2(GTK_PANED(paned), tree_view2); 
```

结果如下：

![显示两个树视图的窗口](../Images/b4aac4841c4c6d9392b866924917304b.png)

但是，表格可以变得更大，所以我添加了 then 到[`GtkScrolledWindow`](http://developer.gnome.org/gtk/stable/GtkScrolledWindow.html)s (sscce: [here](http://pastebin.com/uW0EAvTS) )：

```
GtkWidget *scrolled_window1 = gtk_scrolled_window_new(NULL, NULL),
          *scrolled_window2 = gtk_scrolled_window_new(NULL, NULL);
gtk_container_add(GTK_CONTAINER(scrolled_window1), tree_view1);
gtk_container_add(GTK_CONTAINER(scrolled_window2), tree_view2);
gtk_paned_add1(GTK_PANED(paned), scrolled_window1);
gtk_paned_add2(GTK_PANED(paned), scrolled_window2); 
```

然而，现在窗口自己倒塌到几乎是恍惚的程度，如下面的截图所示：

![小得离谱的窗户](../Images/aa2bb76d2490fc9d15de092db5957288.png)

如果我最大化窗口，第一列不会出现（虽然我可以手动展开它）：

![第一个表没有出现](../Images/8b54128e31677e563bd4a6a55c56e47b.png)

`GtkScrolledWindows`那么，在这种情况下，获得第一个屏幕截图 wen 外观的最佳方法是什么？另外，我可以定义窗格列的相对大小（例如，第一个为 30%，第二个为 70%？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T22:19:58.397

我一直在使用这种模式（如果有人发布了更好的答案，我会很高兴）：

```
GtkWidget* treeView_, pane1_;
// [Removed code to create and show the widget heirarchy.]
GtkRequisition sizeReq;
gtk_widget_size_request(treeView_, &sizeReq);  // get tree's preferred size
gtk_paned_set_position(GTK_PANED(pane1_), sizeReq.width); 
```

这非常接近，但您可能会有一个带有一些隐藏像素的水平滚动条。由于我们的应用程序会记住用户对窗格位置的调整，因此它只需要在初始布局上看起来“足够好”。

此外， gtk_widget_size_request() 需要返回有意义的东西。就我而言，在检索大小请求之前，我在层次结构上调用了 gtk_widget_show_all()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T20:17:38.090

我采用的解决方案是实际设置滚动窗口的大小（[sscce](http://pastebin.com/8039K2sP)）：

```
gtk_widget_set_size_request(scrolled_window1, 200, 600);
gtk_widget_set_size_request(scrolled_window2, 600, 600); 
```

正如人们所料，结果是一个 800x600 的窗口：

![一个尺寸很好的窗户](../Images/8a51ff779cb6a3221219d338f8878fdc.png)

我不满意：这种方法依赖于任意大小，而且看起来太“手动”了。尽管如此，我想使用我的软件，所以我现在将采用它。

# c# - 在 FlowLayoutPanel 中拖放多个项目

> ID：12533711
> 
> 赞同：2
> 
> 时间：2012-09-21T15:38:01.447
> 
> 标签：c#, winforms, flowlayoutpanel

我有一个使用 FlowLayoutPanel 的 WinForm 应用程序，它显示具有多个页面的 .TIFF 文件。FlowLayoutPanel 在 ThumbNails 视图中显示所有页面。

我已经实现了适用于单个项目的拖放逻辑。现在，我想更改它以允许用户选择多个缩略图（使用 CTRL 或 Shift 键）并将拖放到不同的位置。

```
//** Logic after each thumbnail is generated:
PictureBox thumb = new myProject.utility.PictureBox(pageNum);

thumb.Image = doc.getThumb(pageNum);  //since we pre loaded, we won't stall the gui thread.
thumb.Click += new System.EventHandler(
    (thumbSend, thumbEvent) =>
    {
        highLightThumb(thumb.getPage());
    }
);
thumb.DoubleClick += new System.EventHandler(
    (thumbSend, thumbEvent) =>
    {
        selectedDoc = thumb.getPage();
        me.Visible = false;
    }
);
thumbFlow.Controls.Add(thumb);
if (selectedDoc == pageNum)
    highLightThumb(pageNum);

//** Highlight Methods
private void highLightThumb(int page)
{
   //clear highlight
    foreach (Control c in thumbFlow.Controls)
    {
        if (c is PictureBox)
        {
            ((PictureBox)c).highlight = false;
         }
    }

    //apply highlight
    foreach (Control c in thumbFlow.Controls)
    {
        if (c is PictureBox)
        {
            PictureBox thumbFrame = (PictureBox)c;
            if (page == thumbFrame.getPage())
                thumbFrame.highlight = true;
        }
    }

} 
```

下面是现有的拖放逻辑。

```
//**********************//
//** Drag/Drop Events **//
//**********************//
private void thumbFlow_DragDrop(object sender, DragEventArgs e)
{
    PictureBox data = (PictureBox)e.Data.GetData(typeof(PictureBox));
    FlowLayoutPanel _destination = (FlowLayoutPanel)sender;

    Point p = _destination.PointToClient(new Point(e.X, e.Y));
    var item = _destination.GetChildAtPoint(p);
    if (item == null)
    {
        p.Y = p.Y - 10;
        item = _destination.GetChildAtPoint(p);
    }
    int index = _destination.Controls.GetChildIndex(item, false);
    if (index < 0)
        return;

    _destination.Controls.SetChildIndex(data, index);
    _destination.Invalidate();

}

private void thumbFlow_DragEnter(object sender, DragEventArgs e)
{
    //apply/clear highlight
    foreach (Control c in thumbFlow.Controls)
    {
        if (c is PictureBox)
        {
            PictureBox thumbFrame = (PictureBox)c;
            if (thumbFrame == ActiveControl)
            {
                thumbFrame.highlight = true;
            }
            else
            {
                ((PictureBox)c).highlight = false;
            }
        }
    }
    e.Effect = DragDropEffects.Move;
    if (dragDropOccurred == false)
    {
        dragDropOccurred = true;
    }
}

//** Scroll when user drags above or below the window object  **//
private void thumbFlow_DragLeave(object sender, EventArgs e)
{
    int BegY_ThumbFlow = this.thumbFlow.FindForm().PointToClient(this.thumbFlow.Parent.PointToScreen(this.thumbFlow.Location)).Y;
    int thumbFlowBound_Y = this.thumbFlow.Height + BegY_ThumbFlow;
    int mouseY = this.thumbFlow.FindForm().PointToClient(MousePosition).Y;

    while (mouseY >= thumbFlowBound_Y)
    {
        thumbFlow.VerticalScroll.Value = thumbFlow.VerticalScroll.Value + DRAG_DROP_SCROLL_AMT;
        mouseY = thumbFlow.FindForm().PointToClient(MousePosition).Y;
        thumbFlow.Refresh();
    }

    while (mouseY <= BegY_ThumbFlow)
    {
        thumbFlow.VerticalScroll.Value = thumbFlow.VerticalScroll.Value - DRAG_DROP_SCROLL_AMT;
        mouseY = thumbFlow.FindForm().PointToClient(MousePosition).Y;
        thumbFlow.Refresh();
    }

} 
```

我正在查看的一个选项是更改 highLightThumb 方法以检查是否选择了 CTRL 或 Shift 键并且不禁用高光

```
 if (Control.ModifierKeys != Keys.Control)
 //**
 if (Control.ModifierKeys != Keys.Shift) 
```

然后更改 DragDrop DragEnter 例程。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:25:09.383

这是我最终做的..

**生成缩略图后：**

```
PictureBox thumb = new util.PictureBox(pageNum);
thumb.Image = doc.getThumb(pageNum);  //since we pre loaded, we won't stall the gui thread.
thumb.SizeMode = PictureBoxSizeMode.CenterImage;
thumb.BorderStyle = BorderStyle.FixedSingle;
thumb.Click += new System.EventHandler(
    (thumbSend, thumbEvent) =>
    {
        selectThumb(thumb);
    }
);
thumb.DoubleClick += new System.EventHandler(
    (thumbSend, thumbEvent) =>
    {
        selectedDoc = thumb.getPage();
        me.Visible = false;
    }
);
thumbFlow.Controls.Add(thumb);
if (selectedDoc == pageNum)
    selectThumb(thumb); 
```

**现在是缩略图选择代码。**
在 Picturebox 逻辑中，我现在放置了一个名为 pageIndex 的变量。它用页码初始化。这样做的目的是因为稍后您将看到，当我旋转对象时，如果我更改 childindex 值，它似乎会立即发生，如果我拖动项目 2、3、4，它将跳过项目 3 并且只移动项目 2 和 4。所以稍后当我重新排列拇指时，我首先按 pageIndex 排序。

```
//*************************************//
//** Thumbnail Selection Processing  **//
//*************************************//
/// <summary>
/// Main Thumbnail selection area.  
///    If the Shift key is held down, look for a search between.  
///    If Ctrl key, do not clear selections as can select multiple.
/// </summary>
private void selectThumb(PictureBox _thumb)
{
    if (Control.ModifierKeys == Keys.Shift)
        if (SelectMultipleThumbs(_thumb.getPageIndex()))  //** if another thumb is selected, select all in between, then exit  **//
            return;

    if (Control.ModifierKeys != Keys.Control)
    {
        ClearAllSelections();
    }
    else
    {
        if (_thumb.IsSelected == true)
        {
            _thumb.IsSelected = false;
            return;
        }
    }

    _thumb.IsSelected = true;
}

/// <summary>
/// Check if there are other selected items.  If there is, select all between the start and end.
/// </summary>
private bool SelectMultipleThumbs(int _pageindex)
{
    //** Check if there are other objects that have been selected **/
    int? otherSelPageIndex = GetPageIndexOfThumbSelected(_pageindex);
    if (otherSelPageIndex != null)
    {
        ApplySelectionBetweenStartEndPageIndex(_pageindex, Convert.ToInt32(otherSelPageIndex));
        return true;
    }
    return false;
}

/// <summary>
/// Apply Selection if between start and end Pages
/// </summary>
private void ApplySelectionBetweenStartEndPageIndex(int _val1, int _val2)
{
    int startThumb = _val1;
    int endThumb = _val2;
    if (_val1 > _val2)
    {
        startThumb = _val2;
        endThumb = _val1;
    }

    foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>().OrderBy(si => si.pageIndex))
    {
        if (isBetween(thumbFrame.getPageIndex(), startThumb, endThumb))
            thumbFrame.IsSelected = true;
        else
            thumbFrame.IsSelected = false;
    }
}

/// <summary>
/// Clear All Highlight
/// </summary>
private void ClearAllSelections()
{
    foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>())
    {
        thumbFrame.IsSelected = false;
    }
}

/// <summary>
/// Check for any selected items prior
/// </summary>
private int? GetPageIndexOfThumbSelected(int _pageindex)
{
    foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>())
    {
        if (thumbFrame.IsSelected &&
            _pageindex != thumbFrame.getPageIndex())
        {
            return thumbFrame.getPageIndex();
        }
    }
    return null;
} 
```

**现在到拖放的处理。**

```
private void thumbFlow_DragDrop(object sender, DragEventArgs e)
{
    FlowLayoutPanel _destination = (FlowLayoutPanel)sender;

    Point p = _destination.PointToClient(new Point(e.X, e.Y));
    var item = _destination.GetChildAtPoint(p);
    if (item == null)
    {
        p.Y = p.Y - 10;
        item = _destination.GetChildAtPoint(p);
    }
    int dropIndexValue = _destination.Controls.GetChildIndex(item, false);
    if (dropIndexValue < 0)
        return;

    //**************************************************//
    //**  Process multiple Select Drag / Drop   
    //**    If Drag From > Drag To, move after.
    //**    If Drag From < Drag To, move before.
    //**************************************************//

    //** First .. Find all items that are selected **//
    Boolean WasDragUp = false;
    int? firstDragIndexValue = null;
    int newIndexVal = dropIndexValue;
    foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>().Where(selVal => selVal.IsSelected))
    {
        if (firstDragIndexValue == null)
        {
            firstDragIndexValue = _destination.Controls.GetChildIndex(thumbFrame, false);
            if (firstDragIndexValue > dropIndexValue)
                WasDragUp = true;
        }
        thumbFrame.pageIndex = newIndexVal;
        newIndexVal++;
    }

    //** Second .. Find all items that are NOT selected **//
    if (WasDragUp)
    {
        newIndexVal = 0;
        foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>().Where(selVal => !selVal.IsSelected))
        {
            if (_destination.Controls.GetChildIndex(thumbFrame, false) == dropIndexValue)
                if (newIndexVal <= dropIndexValue)
                    newIndexVal = dropIndexValue + getThumbSelectedCnt();
            thumbFrame.pageIndex = newIndexVal;
            newIndexVal++;
        }
    }
    else
    {
        newIndexVal = 0;
        foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>().Where(selVal => !selVal.IsSelected))
        {
            thumbFrame.pageIndex = newIndexVal;
            if (_destination.Controls.GetChildIndex(thumbFrame, false) == dropIndexValue)
            {
                newIndexVal = dropIndexValue + getThumbSelectedCnt();
            }
            newIndexVal++;
        }
    }

    //** Third .. Set the Child Index value  **//
    newIndexVal = 0;
    foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>().OrderBy(si => si.pageIndex))
    {
        thumbFrame.pageIndex = newIndexVal;
        _destination.Controls.SetChildIndex(thumbFrame, thumbFrame.pageIndex);
        thumbFrame.IsSelected = false;
        newIndexVal++;
    }

    //** Finally, rebuild the screen  **//
    _destination.Invalidate();

}

private void thumbFlow_DragEnter(object sender, DragEventArgs e)
{
    //apply/clear highlight
    foreach (PictureBox thumbFrame in thumbFlow.Controls.OfType<PictureBox>())
    {
        if (thumbFrame == ActiveControl)
        {
            thumbFrame.IsSelected = true;
        }
    }

    e.Effect = DragDropEffects.Move;
    if (dragDropOccurred == false)
    {
        dragDropOccurred = true;
    }
}

/// <summary>
/// Scroll when user drags above or below the window object.
/// </summary>
private void thumbFlow_DragLeave(object sender, EventArgs e)
{
    int BegY_ThumbFlow = this.thumbFlow.FindForm().PointToClient(this.thumbFlow.Parent.PointToScreen(this.thumbFlow.Location)).Y;
    int thumbFlowBound_Y = this.thumbFlow.Height + BegY_ThumbFlow;
    int mouseY = this.thumbFlow.FindForm().PointToClient(MousePosition).Y;

    while (mouseY >= thumbFlowBound_Y)
    {
        thumbFlow.VerticalScroll.Value = thumbFlow.VerticalScroll.Value + DRAG_DROP_SCROLL_AMT;
        mouseY = thumbFlow.FindForm().PointToClient(MousePosition).Y;
        thumbFlow.Refresh();
    }

    while (mouseY <= BegY_ThumbFlow)
    {
        thumbFlow.VerticalScroll.Value = thumbFlow.VerticalScroll.Value - DRAG_DROP_SCROLL_AMT;
        mouseY = thumbFlow.FindForm().PointToClient(MousePosition).Y;
        thumbFlow.Refresh();
    }

} 
```

**更新文件**

我会把我的代码放在这里，但它确实更具体地针对每个人的计划。我基本上重建了文件并保存了它。

# office365 - setDataAsync 与 Office.CoercionType.Table

> ID：12533712
> 
> 赞同：2
> 
> 时间：2012-09-21T15:38:01.980
> 
> 标签：office365

我在 Napa 进行黑客攻击的第一天，我很挣扎……

我正在努力理解 TableData 的绑定过程。我已经使用 Matrix 类型制定了一个简单的示例，并且可以从现有表中读取数据：

```
Office.context.document.bindings.addFromNamedItemAsync("Sheet1!Table1", Office.BindingType.Table, { id: "bindingTable" }, function (asyncResult) {
    if (asyncResult.status === Office.AsyncResultStatus.Succeeded) {
        asyncResult.value.getDataAsync(function (asyncResult) {
            if (asyncResult.status === Office.AsyncResultStatus.Succeeded) {
                console.log(asyncResult.value);
            }
        });
    }
}); 
```

但我无法将数据写入表：

```
Office.context.document.bindings.addFromNamedItemAsync("Sheet1!Table1", Office.BindingType.Table, { id: "bindingTable" }, function (asyncResult) {
    if (asyncResult.status === Office.AsyncResultStatus.Succeeded) {
        var myTable = new Office.TableData;
        myTable.headers = [["ID"],["Name"]];
        myTable.rows = [[1,"Fred"],[2,"Jane"]];
        asyncResult.value.setDataAsync(myTable, { coercionType: Office.CoercionType.Table }, function (asyncResult) {
            console.log(asyncResult.status);
        });
    }
}); 
```

具体来说，抛出的错误是“数据写入错误”、“不支持提供的数据对象类型”。

我究竟做错了什么？

另外，我可以以编程方式在工作表上生成表格吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:56:45.990

啊哈！我想我可能偶然发现了答案……从 Office.BindingType.Table 返回的绑定是一个抽象类 BindingTable，它具有包括 addRowsAsync 在内的其他方法。

```
Office.context.document.bindings.addFromNamedItemAsync("Sheet1!Table1", Office.BindingType.Table, { id: "bindingTable" }, function (asyncResult) {
    if (asyncResult.status === Office.AsyncResultStatus.Succeeded) {
        asyncResult.value.addRowsAsync([[3, "Henry"]], null, function (asyncResult) {
        console.log(asyncResult.status);
    });
} 
```

});

# magento - 为非美国国家创建州和地区

> ID：12533716
> 
> 赞同：0
> 
> 时间：2012-09-21T15:38:11.917
> 
> 标签：magento, e-commerce

我想知道是否可以添加州并在为委内瑞拉等国家创建区域之后。我查看了 Magento Admin，但没有找到在哪里或是否有可能。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T23:23:28.463

是的，它可以做到这一点，

但是您需要制作在表中插入新项目的脚本，称为

```
directory_country_region
example ( adding new state for United Arab Emirates ) ( ISO 2-alpha AE ) City name  Dubai Code DXB 
so the query will be
INSERT INTO directory_country_region (region_id,country_id,code,default_name)
VALUES ('','AE','DXB','Dubai'); 
```

随心所欲地插入，您会在结帐/运输报价等处找到它们。

# word-2007 - Word 2007 中的首字下沉选项不可用（灰显）

> ID：12533719
> 
> 赞同：0
> 
> 时间：2012-09-21T15:38:25.923
> 
> 标签：word-2007

我从某个地方（不知道来源）继承了一个 Word 2007 文档，我试图在第一段中添加一个首字下沉但做不到。我找到了许多关于如何添加首字下沉的帮助网站和文章，并了解它是格式和框架以及它是如何工作的，所有这些......明白了！

我已经从我的文本段落中删除了所有格式，甚至单击了新测试段落中的“删除所有格式”按钮 - 不好。

我已经在一个新文档中放置了一个测试段落（有效），然后尝试将该段落粘贴到这个文档中 - 不好。

有关如何重新启用首字下沉功能的任何帮助？即使只是一个段落？

谢谢， j

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:52:34.543

没关系 - 我刚刚发现整个文档是一个 GIANT TABLE。删除了表 - 没有问题。

# bash - 如何从不同的路径启用 bash 选项卡？

> ID：12533727
> 
> 赞同：2
> 
> 时间：2012-09-21T15:39:16.577
> 
> 标签：bash, autocomplete

我想启用 bash tab-complete 来查找目录，但不在当前目录中。

例如，如果我这样做：

```
$ ls $P
dirs/ are/ here/
$ cd /not/the/P/path
$ ls
other/ stuff/
$ myProg <tab>
dirs/ are/ here 
```

这改变了通常的行为，我通常会在当前目录中看到文件。

**尽职调查：**我能想到的最好的办法是：

```
_myProg ()
{
  local cur

  COMPREPLY=()
  cur=${COMP_WORDS[COMP_CWORD]}

  if [ "${P}x" = "x" ]; then
    return 1
  fi

  case "$cur" in
    *)
      pth=${P}/$( echo $cur | egrep -o "^.*/[^/]*$" )
      COMPREPLY=( $( compgen -W "$( cd $pth && ls -1d "$cur"* 2>/dev/null -- "$cur" )" ) )
      ;;
  esac

  return 0
}
complete -o nospace -F _myProg myProg 
```

它最初显示目录，但不允许我深入了解我想要的目录（如`ls`作品）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T12:24:09.557

```
_myProg()
{
    COMPREPLY=($(cd $P; compgen -f $2))
}
complete -onospace -F_myProg myProg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:10:24.580

对你有`$CDPATH`帮助吗？请参阅[高级 Bash 脚本指南](http://tldp.org/LDP/abs/html/internalvariables.html#CDPATHREF)。

# c# - C# 检查目录还是文件？

> ID：12533733
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:39:34.947
> 
> 标签：c#, file, directory

我试过了

```
if(Directory.Exists(path)) 
    //is directory
else
    //is file 
```

但这并不总是有效。不知道为什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:41:18.430

如果在检查过程中发生错误，或者用户没有足够的权限，[Directory.Exists](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)和[File.Exists](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)都将返回 false。

[来自Directory.Exists](http://msdn.microsoft.com/en-us/library/system.io.directory.exists.aspx)的文档

> 如果您没有对该目录的最低只读权限，则 Exists 方法将返回 false。如果在尝试确定指定文件是否存在时发生任何错误，Exists 方法将返回 false。

来自[File.Exists的文档](http://msdn.microsoft.com/en-us/library/system.io.file.exists.aspx)

> 如果调用者没有足够的权限来读取指定的文件，则不抛出异常，并且无论路径是否存在，该方法都返回 false... Exists 方法在尝试确定指定文件是否存在时如果发生任何错误，则返回 false .

# javascript - DatetimeProperty 到 Javascript 时间

> ID：12533738
> 
> 赞同：2
> 
> 时间：2012-09-21T15:39:53.647
> 
> 标签：javascript, python, google-app-engine, google-cloud-datastore

我对我应该如何将日期时间值从 python 传递到 javascript 感到有点困惑。

我将我的值存储在数据存储中，我检索它，然后我执行以下操作：

```
<div class="notification" date="{{notification.date}}">
...
</div> 
```

这是HTML

```
<div class="notification" date="2012-09-21 14:47:54.313000">
...
</div> 
```

然后呢？

我发现了很多不同的建议，但几乎每次我都遇到错误，因为 DatetimeProperty 显然与 datetime 不同。

Javascript可以解析那个日期吗？如果是这样，怎么做？否则，我应该如何传递该值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:45:26.613

```
new Date("2012-09-21 14:47:54.313000") 
```

为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:48:39.010

如果 jinja2，也许首先是自定义过滤器？

```
def datetimeformat(value, format='%H:%M / %d-%m-%Y'):
return value.strftime(format) 
```

[http://jinja.pocoo.org/docs/api/#custom-filters](http://jinja.pocoo.org/docs/api/#custom-filters)

# python - 蓝图的蓝图（Flask）

> ID：12533745
> 
> 赞同：6
> 
> 时间：2012-09-21T15:40:46.343
> 
> 标签：python, web-services, web-applications, flask, blueprint

我有一系列正在使用的蓝图，我希望能够将它们进一步捆绑到一个包中，我可以尽可能无缝地与任何数量的其他应用程序一起使用。为应用程序提供整个引擎的一组蓝图。我有点创建了自己的解决方案，但它是手动的，需要付出太多努力才能有效。它看起来不像是一个扩展，它不仅仅是一个蓝图（几个提供通用功能的蓝图）。

这完成了吗？如何？

（将几个程序捆绑在一起的应用程序调度方法可能不是我想要的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-14T02:40:44.870

我希望 Blueprint 对象有一个 register_blueprint 函数，就像 Flask 对象一样。它会自动在当前蓝图的 url 下放置和注册蓝图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-06-01T16:26:11.737

看看这个：**嵌套蓝图**→ [https://flask.palletsprojects.com/en/2.0.x/blueprints/#nesting-blueprints](https://flask.palletsprojects.com/en/2.0.x/blueprints/#nesting-blueprints)

```
parent = Blueprint('parent', __name__, url_prefix='/parent')
child = Blueprint('child', __name__, url_prefix='/child')
parent.register_blueprint(child)
app.register_blueprint(parent) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-22T03:06:52.980

The simplest way would be to create a function that takes an instance of a `Flask` application and registers all your blueprints on it in one go. Something like this:

```
# sub_site/__init__.py
from .sub_page1 import bp as sb1bp
from .sub_page2 import bp as sb2bp
# ... etc. ...

def register_sub_site(app, url_prefix="/sub-site"):
    app.register_blueprint(sb1bp, url_prefix=url_prefix)
    app.register_blueprint(sb2bp, url_prefix=url_prefix)
    # ... etc. ...

# sub_site/sub_page1.py
from flask import Blueprint

bp = Blueprint("sub_page1", __name__)

@bp.route("/")
def sub_page1_index():
    pass 
```

Alternately, you could use something like [`HipPocket`](https://github.com/svieira/HipPocket)'s [`autoload` function](https://github.com/svieira/HipPocket/blob/d0772511a9950c3b1d074c9f98f4d63a73dfd389/hip_pocket/tasks.py#L9) (full disclosure: I wrote `HipPocket`) to simplify the import handling:

```
# sub_site/__init__.py
from hip_pocket.tasks import autoload

def register_sub_site(app,
                          url_prefix="/sub-site",
                          base_import_name="sub_site"):
    autoload(app, base_import_name, blueprint_name="bp") 
```

However, as it currently stands you couldn't use the same structure as example #1 (HipPocket assumes you are using packages for each Blueprint). Instead, your layout would look like this:

```
# sub_site/sub_page1/__init__.py
# This space intentionally left blank

# sub_site/sub_page1/routes.py
from flask import Blueprint

bp = Blueprint("sub_page1", __name__)

@bp.route("/")
def sub_page1_index():
    pass 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T06:59:45.807

我有自己的解决方案如何加载配置中定义的蓝图，所以你可以`CORE_APPS = ('core', 'admin', 'smth')`在配置中拥有类似的东西，当你构建应用程序时你可以注册这些应用程序（当然 CORE_APPS 中的那些字符串必须是你想要导入的文件的名称在你的 python 路径中）。

所以我正在使用函数来创建应用程序：

```
app = create_app()

def create_app():
  app = Flask(__name__)

  # I have class for my configs so configuring from object
  app.config.from_object('configsClass')

  # does a lot of different stuff but the main thing could help you:
  from werkzeug.utils import import_string
  for app in app.config['CORE_APPS']
    real_app = import_string(app)
    app.register_blueprint(real_app) 
```

之后，您的蓝图应该被注册。当然，您可以在配置中使用不同的格式来支持自定义 url 前缀等等 :)

当然你也可以在你的主蓝图中做这样的事情，所以在创建应用程序时你需要注册那个主蓝图。

# c++ - 在 C++ 中使用 Lex Yacc 编译的 .c 文件

> ID：12533746
> 
> 赞同：0
> 
> 时间：2012-09-21T15:40:56.170
> 
> 标签：c++, bison, yacc, lex, flex-lexer

> **可能重复：为 flex lexer**
> [创建 C/C++ 解析器/分析器](https://stackoverflow.com/questions/526797/good-tools-for-creating-a-c-c-parser-analyzer)
> [字符串输入的好工具](https://stackoverflow.com/questions/780676/string-input-to-flex-lexer)

我的想法是创建一个可以计算布尔表达式的解析器，我的下一步是在我的c++程序中使用它，但我不知道如何使用它。

目前这个计算器可以在命令行下运行，代码不好，不知道怎么在我的程序中使用。我想用一个函数`lex_yacc(var)`来调用这个计算器，并且`var`是输入，比如主程序读取的`var`是is `(T+F)`，所以会发送到`lex_yacc(var)`，最后func返回`1`。

我将 lexya.l 定义如下：

```
%{

#include <stdlib.h>

void yyerror(char *);

#include "lexya_a1.tab.h"
%}

%%

"T"       { yylval = 1; return boolean; }
"F"       { yylval = 0; return boolean; }
"!F"      { yylval = 1; return boolean; }
"!T"      { yylval = 0; return boolean; }

[+*\n]     return *yytext;
"("        return *yytext;
 ")"       return *yytext;
[\t]       ;/* .... */

.            yyerror("....");

%%

int yywrap(void) {
     return 1;
} 
```

和 lexya_a1.y：

```
%{
#include <stdlib.h>

int yylex(void);

void yyerror(char *);

%}

%token boolean

%left '+' '-'

%left '*'

%left '(' ')'

%%

program:
    program expr '\n' { printf("%d\n", $2); }
  |
  ;

expr:
    boolean { $$ = $1; }
  | expr '*' expr { $$ = $1 * $3; }
  | expr '+' expr { $$ = $1 + $3; }
  | '(' expr ')' { $$ = $2; }
  ;

%%

void yyerror(char *s) {
     printf("%s\n", s);
}

int main(void) {
    yyparse();
    return 0;
} 
```

# ios - 应用程序激活时呈现模态视图

> ID：12533747
> 
> 赞同：3
> 
> 时间：2012-09-21T15:40:56.620
> 
> 标签：ios, ipad

我想在我的应用程序启动时呈现一个模式视图控制器（用于登录屏幕），以及在用户点击主页按钮然后重新启动应用程序后它再次变为活动状态时。

我首先尝试在根视图控制器的`viewDidAppear:`方法中呈现模态视图。这在应用程序首次启动时效果很好，但当应用程序再次激活时不会调用此方法。

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self presentModalView];
}

- (void)presentModalView {
    if(![AuthenticationService sharedInstance].isAuthenticated) {
        _modalVC = [self.storyboard instantiateViewControllerWithIdentifier:self.modalViewControllerIdentifier];
        _modalVC.delegate = self;
        [self presentViewController:_modalVC animated:YES completion:nil];
    }
} 
```

接下来，我尝试在方法中从我的应用程序委托中调用它`applicationDidBecomeActive:`。

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.

    ModalPresentingUISplitViewController *splitViewController = (ModalPresentingUISplitViewController *)self.window.rootViewController;
    [splitViewController presentModalView];
} 
```

这在表面上似乎工作正常，但我`Unbalanced calls to begin/end appearance transitions for <ModalPresentingUISplitViewController: 0x7251590>`在日志中收到警告。我觉得我在 UISplitView 完成呈现之前以某种方式呈现模态视图，但我不知道如何解决这个问题。

当应用程序变为活动状态时，我如何“自动”从我的根视图控制器呈现模态视图，并在“正确”时刻执行，以免使我的拆分视图控制器失衡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T01:58:02.203

忘了这个问题在这里。是的，我有一个解决方案。我不禁觉得有一种更优雅或更*正确的*方法可以做到这一点，但这对我有用......

这假设您正在使用 ARC 和故事板；你已经为你的登录视图创建了一个 UIViewController，它带有来自 UISplitViewController 的模态 segue（或任何你的根视图控制器）。

**UISplitViewController（或任何你的根视图控制器）**

```
- (id)initWithCoder:(NSCoder *)aDecoder {
    if(self = [super initWithCoder:aDecoder]) {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(presentModalView) name:UIApplicationDidBecomeActiveNotification object:nil];
    }
    return self;
}

- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self name:UIApplicationDidBecomeActiveNotification object:nil];
}

- (void) viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    self.viewHasAppeared = YES;
    [self presentModalView];
}

- (void) presentModalView {
    if(self.viewHasAppeared && !self.userAuthenticated) {
        [self performSegueWithIdentifier:@"ShowLoginView" sender:self];
    }
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if([[segue identifier] isEqualToString:@"ShowLoginView"]) {
        JDPLoginViewController *dest = [segue destinationViewController];
        dest.delegate = self;
    }
}

- (void) dismissLogin {
    self.userAuthenticated = YES;
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

**以下是代码中需要注意的重要部分...**

1.  我们调用`presentModalView`了两个地方——`viewDidAppear`当应用程序首次启动时，它们将负责呈现我们的登录视图，以及
2.  我们将 注册`presentModalView`为 UIApplicationDidBecomeActiveNotification 事件的观察者，以便当应用程序在后台后变为活动状态时调用该方法。
3.  最后，我们在 UISplitViewController 上创建了一个 BOOL 属性`viewHasAppeared`来跟踪 UISplitViewController 的视图是否已经出现，因此我们不会尝试在 UISplitViewController 的视图出现之前呈现模式登录。

**以下是不同的场景...**

*应用程序首次启动：*

*   `presentModalView`由`UIApplicationDidBecomeActiveNotification`事件调用，但是由于 UISplitViewController 的视图没有加载（并且`viewHasAppeared`BOOL 为 NO，所以什么也没有发生。赢。我们不应该在不应该的时候呈现视图。
*   然后最终`viewDidAppear`被调用，它设置`viewHasAppeared`为 YES 然后调用`presentModalView`. 显示登录屏幕。一切都按预期工作-耶！

*应用程序在后台后变为活动状态*

*   `presentModalView`和第一个场景一样被`UIApplicationDidBecomeActiveNotification`事件再次调用，但这次`viewHasAppeared`是 YES，所以登录视图按预期呈现。耶！

就像我说的，这感觉有点难看，但它可以完成工作，直到我找到更好的解决方案。希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:42:41.173

你试过 UIView 的 viewWillAppear 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T19:26:27.997

链接@jpolete 的回答，我做了一些不同的事情。此外，我希望登录屏幕仅在应用程序在后台运行超过 15 秒后才出现（用户*总是*必须重新登录很痛苦）。

这个demo的源码可以在[github上找到](https://github.com/wcochran/LockFoo)

像@jpolete 一样，我将大部分逻辑封装在根视图控制器中，在我的例子中它是一个导航控制器（iPhone 示例）。`userLoggedIn`标记用户是否已通过身份验证。该`presentingLoginController`标志让我知道当前是否显示登录屏幕。`backgroundTime`保存用户进入后台的时间戳。这是类扩展：

```
@interface RootNavigationController () <LoginDelegate>
@property (assign, nonatomic) BOOL userLoggedIn;
@property (strong, nonatomic) NSDate *backgroundTime;
@property (assign, nonatomic) BOOL presentingLoginController;
-(void)applicationDidBecomeActive:(NSNotification*) notification;
-(void)applicationDidEnterBackground:(NSNotification*) notification;
@end 
```

加载视图后，我添加了适当的通知挂钩：

```
@implementation RootNavigationController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationDidBecomeActive:)
                                                 name:UIApplicationDidBecomeActiveNotification
                                               object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(applicationDidEnterBackground:)
                                                 name:UIApplicationDidEnterBackgroundNotification
                                               object:nil];
}

-(void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

*在这里，如果用户未*通过身份验证并且我们当前没有显示登录控制器，我们将触发登录 segue 。

```
-(void)loginIfNecessary {
    if (!self.userLoggedIn && !self.presentingLoginController) {
        self.presentingLoginController = YES;
        [self performSegueWithIdentifier:@"RootLoginSegue" sender:self];
    }
} 
```

这里我们将根视图控制器设置为`loginDelegate`登录控制器的。当成功登录时会通知此委托（登录控制器嵌入在另一个导航控制器中）：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"RootLoginSegue"]) {
        UINavigationController *navController = segue.destinationViewController;
        LoginTableViewController *loginController = (LoginTableViewController *) navController.topViewController;
        loginController.loginDelegate = self;
    }
} 
```

当成功登录时，我们执行以下操作：

```
-(void)didLogin { // LoginDelegate method called to login controller after successsful login
    self.presentingLoginController = NO;
    self.userLoggedIn = YES;
} 
```

当视图第一次出现时，当它在后台出现时，或者在被“隐藏”之后我们登录（如果需要）：

```
-(void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self loginIfNecessary];
} 
```

当我们进入后台我们记录时间：

```
-(void)applicationDidEnterBackground:(NSNotification*) notification {
    self.backgroundTime = [NSDate date];
} 
```

当我们进入前台并且第一次或足够的时间已经过去时，我们会强制用户再次登录（如有必要）：

```
-(void) applicationDidBecomeActive:(NSNotification*) notification {
    const NSTimeInterval maxBackgroundTime = 15.0;
    if (!self.backgroundTime || [[NSDate date] timeIntervalSinceDate:self.backgroundTime] > maxBackgroundTime) {
        self.userLoggedIn = NO;
    }
    [self loginIfNecessary];
}

@end 
```

# c# - 为什么不能定义从接口到类的隐式转换运算符？

> ID：12533748
> 
> 赞同：8
> 
> 时间：2012-09-21T15:41:06.220
> 
> 标签：c#, interface, implicit-conversion

说，我有一个界面

```
public interface ISomeControl
{
    Control MyControl { get; }
    ...
} 
```

是否可以定义如下内容：

```
public static implicit operator Control(ISomeControl ctrl)
{
    return ctrl.MyControl;
} 
```

或者更确切地说，为什么我不能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:00:35.580

如果您有一个 的子类`Control`，并且该子类实现了`ISomeControl`接口怎么办。

```
class SomeControl : Control, ISomeControl {} 
```

现在演员表将是模棱两可的 - 内置向上转换，以及您的用户定义的转换。所以你不能为接口提供用户定义的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:00:02.813

你不能这样做。

C# 规范说：

> ***6.4.1 允许的用户定义转换***
> 
> C# 只允许声明某些用户定义的转换。特别是，不可能重新定义已经存在的隐式或显式转换。对于给定的源类型 S 和目标类型 T，如果 S 或 T 是可空类型，则令 S0 和 T0 引用它们的基础类型，否则 S0 和 T0 分别等于 S 和 T。仅当满足以下所有条件时，才允许类或结构声明从源类型 S 到目标类型 T 的转换：
> 
> *   S0 和 T0 是不同的类型。
>     
>     
> *   S0 或 T0 是发生运算符声明的类或结构类型。
>     
>     
> *   S0 和 T0 都不是接口类型。
>     
>     
> *   排除用户定义的转换，不存在从 S 到 T 或从 T 到 S 的转换。

一种方法是使用静态方法。

```
public class Control
    {
        public static Control FromISomeControl(ISomeControl ctrl)
        {
            return ctrl.MyControl;
        }
    } 
```

# c - 如何在玩具语言中实现 return 语句？

> ID：12533749
> 
> 赞同：4
> 
> 时间：2012-09-21T15:41:07.373
> 
> 标签：c, return, language-design, bison, flex-lexer

我最近使用 C、Bison、Flex 和[这篇文章](https://stackoverflow.com/questions/2644597/how-do-i-implement-if-statement-in-flex-bison)作为起点制作了一种玩具编程语言。它看起来很像 Python，只是没有冒号或空格规则。

代码在[这里](https://github.com/naegelejd/luci)，但它不如我坚持的概念/算法重要。

我设计了我的抽象语法树，就像[Rudi](https://stackoverflow.com/users/311635/rudi)在上面链接的帖子中所做的那样。

诀窍是，我想不出从用户定义函数返回或跳出循环的好方法。`return`如果我在用户定义函数的末尾只需要一个语句，它是可行的（实际上这是当前对用户定义函数有效的）。

例子：

```
i = 0
while 1 do
  if i > 15 then
     break
  end
done 
```

示例 2：

```
def mean(somelist)
  if len(list) == 0 then
    return 0  # throw error
  else
    return sum(somelist) / len(somelist)
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:46:25.550

一些流行的基于堆栈的语言将一个值压入堆栈，然后由调用函数弹出。这可能对你有用。

当然，这依赖于具有已知返回类型的函数。如果函数为“void”（即不返回任何内容），Python 将返回 PyNone。Python 函数只返回一个值（可以是 None，也可以是对象或元组或其他任何值）。

C 类型语言也只从函数返回一个值。

我认为重点在于，在强类型语言中，你总是有一个返回值，而且你必须总是返回一个。在您可能或可能返回值的弱类型语言中，您仍然有一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:51:49.220

这个问题的答案很大程度上取决于您的代码如何工作的内部结构。

当我编写我的[Mote 编译器](http://mopedepot.com/jjs/mote/)（一个类似 VB 的编译器）时，我`MoteEngine.prototype.runFuncStart`在一个函数启动时调用了 。我创建了一个新对象来保存所有局部变量，然后将其推送到我的堆栈中。

`MoteEngine.prototype.runFuncEnd`清理堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:27:05.367

好吧，这在很大程度上取决于您如何实现执行引擎。如果你按照 Rudi 的建议，用递归调用对方遍历 AST 的函数来实现执行引擎，那么要实现一个`break`or `return`，你需要通过几级 C 调用堆栈返回。您可以使用 setjmp/longjmp 执行此操作。例如，您的代码可能类似于：

```
struct ExecEnviron {
    /* other contents of ExecEnviron, we're just adding a bit */
    jmp_buf *break_context;  /* where a 'break' or 'continue' should jump to */
    jmp_buf *return_context; /* where a 'return' should jump to */
};

void ExecWhile(ExecEnviron *e, AstElement *a) {
    jmp_buf local, *old = e->break_context;
    e->break_context = &local;

    if (setjmp(&local) != 1)
        while (dispatchExpression(a->whileStmt.cond))
            dispatchStatement(a->whileStmt.body);
    e->break_context = old;
}
void ExecBreak((ExecEnviron *e, AstElement *a) {
    longjmp(e->break_context, 1);
}
void ExecContinue((ExecEnviron *e, AstElement *a) {
    longjmp(e->break_context, 2);
} 
```

Setjmp/longjmp 可以很好地打破嵌套上下文，但不适用于一般的标签/goto 处理（因为它们允许跳转到循环的中间）。如果你想处理这个问题，你将不得不使用一个完全不同的执行引擎，并将 AST 转换成更线性的东西，比如字节码或线程代码。

# php - 递归数组菜单php

> ID：12533751
> 
> 赞同：0
> 
> 时间：2012-09-21T15:41:09.390
> 
> 标签：php, hierarchy, recursive-query

如何构建一个 php 函数，将此代码转换为 html 菜单 这是我通过 ajax 对函数所做的帖子

```
list[0][id] 55
list[1][id] 69
list[2][children][0][id]    67
list[2][children][1][id]    68
list[2][id] 57 
```

这是我进入函数的数组

```
Array
(
    [0] => Array
        (
            [id] => 55
            [children] => Array
                (
                    [0] => Array
                        (
                            [id] => 67
                            [children] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 57
                                            [children] => Array
                                                (
                                                    [0] => Array
                                                        (
                                                            [id] => 68
                                                        )

                                                )

                                        )

                                    [1] => Array
                                        (
                                            [id] => 69
                                        )

                                )

                        )

                )

        )

) 
```

我试过这个功能，但它不起作用

```
function tomenu($arr){
  $html = '<ul>'.PHP_EOL;
  foreach ($arr as $v){
    $html .= '<li>' . $v['id'];
    if (array_key_exists('children', $v)){
      $html .= $this->tomenu($v['children']);
    }
    $html .= '</li>'.PHP_EOL;
  }
  $html .= '</ul>'.PHP_EOL;
  return $html;
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T15:54:55.417

```
function tomenu($arr) {
    $this->html .= '<ul>' . PHP_EOL;
    foreach ($arr as $v) {
        $this->html .= '<li>' . $v['id'];
        if (is_array($v['children'])) {
            $this->html .= $this->tomenu($v['children']);
        }
        $this->html .= '</li>' . PHP_EOL;
    }
    $this->html .= '</ul>' . PHP_EOL;
    $returnVal = $this->html;
    $this->html = '';
    return $returnVal;
} 
```

我还没有测试过这段代码

# javascript - 在 Chrome 开发者工具（或类似工具）中调试时如何查找给定范围内的所有 jQuery 事件

> ID：12533756
> 
> 赞同：1
> 
> 时间：2012-09-21T15:41:17.233
> 
> 标签：javascript, debugging, jquery

如果您添加了 jQuery 事件，例如[click()](http://api.jquery.com/click/)：

```
$(element).click(function() {
    debugger;
    //Some code
}); 
```

使用断点或使用控制台时，您无法通过[浏览 DOM 元素的属性](https://i.stack.imgur.com/dtWhR.png)（在[Chrome 的开发人员工具或类似工具中）找到该单击事件，例如：](https://developers.google.com/chrome-developer-tools/docs/console)

```
console.log(element); 
```

但是，我发现如果您执行以下操作，您可以找到元素的事件：

```
//Finds all events for <img> tags within the scope of
//the HTML-element with the id "container".
var elementsToFindEventsFor = $("img", $("#container"));
var events = [];
$(elementsToFindEventsFor).each(function(i, element) {
    events.push($._data(element, "events"));
});
console.log(events); 
```

jsFiddle：http: [//jsfiddle.net/Muskar/Mf9Eb/](http://jsfiddle.net/Muskar/Mf9Eb/)

这使您可以在调试时浏览返回元素上的事件，但是编写 5 行代码进行调试不是很方便。

所以我很想知道是否有任何我无法找到的来自 jQuery API 的更具可读性和易于编写的解决方案？

> 另请参阅：[如何使用 Firebug（或类似工具）调试 JavaScript/jQuery 事件绑定](https://stackoverflow.com/questions/570960/how-to-debug-javascript-jquery-event-bindings-with-firebug-or-similar-tool)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:44:17.663

Allan Jardine 为此目的写了一个出色的书签：

[视觉事件](http://www.sprymedia.co.uk/article/Visual+Event+2 "视觉事件 2")

Visual Event 是一个开源 Javascript 小书签，它提供有关已附加到 DOM 元素的事件的调试信息。视觉事件显示：

*   哪些元素附加了事件
*   附加到元素的事件类型
*   将与事件一起运行的代码被触发
*   定义附加函数的源文件和行号（仅限 Webkit 浏览器和 Opera）

除了有助于调试您自己的代码之外，Visual Event 还可以用作一种教育工具，显示已创建的网站数量。

Visual Event 是开源软件 (GPLv2)，Git 存储库托管在[GitHub 上](https://github.com/DataTables/VisualEvent)，供您根据需要进行分叉和修改！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:58:09.330

检查这个[[FIDDLE]](http://jsfiddle.net/sushanth009/Mf9Eb/5/)

我为每个图像添加了两个事件，单击和鼠标输入

您需要传递事件参数（在本例中为 e）以获取所选元素的属性..

如果您在 debugger() 函数命中时放置一个调试点，请使用 Chrome 开发人员工具。您可以将鼠标悬停在 e 参数上，其中有一个名为 **handleObj**的属性。如果单击该属性，您可以看到事件的类型那叫函数..

**您还拥有类型**属性中当前对象的信息..

# grails - log4j 在 grails 中不起作用

> ID：12533763
> 
> 赞同：1
> 
> 时间：2012-09-21T15:41:48.163
> 
> 标签：grails, log4j

我对 log4j 有以下配置

```
log4j = {
    // Example of changing the log pattern for the default console appender:
    //
    appenders {
        console name:'stdout', layout:pattern(conversionPattern: '%c{2} %m%n')
    }

    info 'grails.app.controllers'

    error  'org.codehaus.groovy.grails.web.servlet',        // controllers
           'org.codehaus.groovy.grails.web.pages',          // GSP
           'org.codehaus.groovy.grails.web.sitemesh',       // layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping',        // URL mapping
           'org.codehaus.groovy.grails.commons',            // core / classloading
           'org.codehaus.groovy.grails.plugins',            // plugins
           'org.codehaus.groovy.grails.orm.hibernate',      // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'
} 
```

当我在控制器中执行 log.info 时，我没有看到任何输出登录到控制台。有什么理由吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:12:24.663

只需要添加 grails.app 就可以了

# android - ar 应用的最佳传感器选择

> ID：12533764
> 
> 赞同：0
> 
> 时间：2012-09-21T15:41:48.077
> 
> 标签：增强现实, android, augmented-reality, android-sensors

您好，我想问一下可用于[增强现实](/questions/tagged/augmented-reality "显示标记为“增强现实”的问题")应用的最佳传感器是哪个？我的增强现实应用程序正在使用手机相机并在实时视图中找到兴趣点。我想检测 poi 何时在我的相机的视野中。我已经阅读了很多文章，我想决定哪个选项是最好的。这是我的选择：1）带加速度计的指南针 2）旋转矢量

我虽然唯一的解决方案是 1) 但最后我认为 2) 比第一个更容易创建和更准确。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:48:43.517

大多数情况下，您需要使用多个传感器。我编写了一个 POI 应用程序，并使用加速度计、GPS、指南针和方向传感器来获取当前设备的位置和视野。

在尝试像 POI 这样的应用程序之前，您可能应该从增强现实的基础开始，因为它们相当复杂。

我可以谦虚地推荐我的书[Pro Android Augmented Reality](http://www.apress.com/9781430239451)吗？

即使您没有获得副本，您仍然可以从它的[GitHub 存储库](https://github.com/RaghavSood/ProAndroidAugmentedReality)中获取源代码。第 9 章包含用于显示附近推文和维基百科文章的 POI 示例应用程序的代码。

# lan - IEEE 802.3 与 IEEE 802.11

> ID：12533771
> 
> 赞同：0
> 
> 时间：2012-09-21T15:42:10.223
> 
> 标签：lan, wifi, osi

有人可以向我解释 802.3 和 802.11 协议之间 OSI 模型的区别吗？

据我了解，它们仅在 MAC 和 PHY 层上有所不同。这是准确的吗？

其余层是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T07:59:39.180

是的，IEEE 802.3 和 IEEE 802.11 是处理 MAC 和 PHY 层的标准。这些层之上的任何东西都与它们无关（MAC 和 PHY 层）。

# mustache - 传递给模板的数据中的动态键

> ID：12533775
> 
> 赞同：0
> 
> 时间：2012-09-21T15:42:38.473
> 
> 标签：mustache

如何访问模板中的动态密钥？

如果来自服务器的数据具有以下格式：

`hash = { 'User001' : { 'LastLoggedIn' : '42301', 'Name' : 'John' }, 'user' : 'User001' }`

如果我想在我的模板中使用 User001.Name，我该怎么做？我只会从“用户”属性中知道它是“用户001”或“用户002”！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:15:37.940

在这种情况下，您应该在将数据传递给 Mustache 之前准备好数据。做到这一点的一个好方法是将其包装在 View 或 ViewModel 对象中，而不是简单地传入 JSON 哈希。

# ios - UIStoryboard 名称和捆绑包

> ID：12533777
> 
> 赞同：12
> 
> 时间：2012-09-21T15:42:45.333
> 
> 标签：ios, xcode

我有这行代码：

```
[UIStoryboard storyboardWithName:(NSString *) bundle (NSBundle *)]; 
```

和故事板文件。我在哪里实际插入控制器的名称，在哪里可以找到捆绑包？

这是一个愚蠢的问题，但我无法弄清楚

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T15:47:20.460

一切都非常简单！

这是代码：

```
UIStoryboard *storyboard = 
[UIStoryboard storyboardWithName:@"MainStoryboard" 
                          bundle:[NSBundle mainBundle]]; 
```

**@"Main Storyboard"**在哪里是您的**.storyboard**文件的名称。Bundle 只是包含你的**.storyboard**文件的包，通常是你的应用程序的主要包。

如果您想访问某些 UIViewController，例如，为了将其推送到 UINavigationController 的堆栈，那么您必须这样做：

```
UIViewController *yourViewController = 
[storyboard instantiateViewControllerWithIdentifier:@"viewControllerIdentifier"]; 
```

您可以在 Xcode 的 Identity Inspector 中将 Identifier 设置为您的 UIViewController！

希望对你有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T15:47:17.943

`name`参数是**文件**的**名称`.storyboard`**（不带扩展名）。

通常`bundle`是您的应用程序的主要捆绑包。通常，您通过`nil`，以便运行时默认在主包中搜索您的故事板文件（与您通过相同`[NSBundle mainBundle]`）。在实践中，iOS 应用程序中通常只有一个包，它是代表 IPA 包的主包，因此`nil`该参数的常用值也是如此）

例如，如果你有一个名为`MyStory.storyboard`your 的故事板，你会写：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MyStory" bundle:nil]; 
```

* * *

实际上，所有这些都[在 Apple 文档中对此方法进行了](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIStoryboard_Class/Reference/Reference.html#//apple_ref/occ/clm/UIStoryboard/storyboardWithName:bundle:)解释。

> ## 故事板名称：捆绑：
> 
> 为指定的故事板资源文件创建并返回一个故事板对象。
> 
> `+ (UIStoryboard *)storyboardWithName:(NSString *)name bundle:(NSBundle *)storyboardBundleOrNil`
> 
> **参数**
> 
> *   `name`:**故事板资源文件的名称，不带文件扩展名**。如果此参数为 nil，则此方法引发异常。
> *   `storyboardBundleOrNil`：包含故事板文件及其相关资源的包。如果您指定 nil，此方法会在当前应用程序的主包中查找。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-21T10:49:18.777

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:nil]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-05-02T21:32:10.453

斯威夫特 5 版本：

```
UIStoryboard(name: "Main", bundle: nil) 
```

在此示例中，我使用默认的“主要”故事板文件作为参考。

# eclipse - 我可以回滚我的 Eclipse Juno 更新吗？

> ID：12533779
> 
> 赞同：2
> 
> 时间：2012-09-21T15:42:52.547
> 
> 标签：eclipse, installation, updates, eclipse-juno

我不记得曾经提供过用于执行主要版本的“安装新更新”功能，当然不是没有解释它正在这样做，就像在 Juno 上发生的那样。我无意中更新了，它似乎已经进行了就地更新。这整个过程是新的行为，对吧？

有什么方法可以安全降级回 Indigo？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T15:25:22.173

你也可以去`Help>About>Installation Details>Installation History`。如果您选择上次更新之前的配置，您可以要求 p2 尝试恢复到该配置（它将尝试并重新下载已从首选项中可用的存储库中升级删除的任何旧插件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:00:51.577

*   获取 Indigo 的副本并将其解压缩到新目录。

*   从他们的网站添加您的其他 Eclipse 插件。

*   压缩新创建的 Indigo 版本，以便在不小心再次升级时恢复它。

# quartz.net - 石英。在正常计划之外触发有状态但遵守非并发执行限制

> ID：12533780
> 
> 赞同：2
> 
> 时间：2012-09-21T15:42:58.890
> 
> 标签：quartz.net

配置 Quartz.net 2.0.1 JobStore: SqlServer

有状态的作业在 Windows 服务中运行。还有一个控制台应用程序允许在服务中触发相同的作业。我想正确初始化石英调度程序，以便它尊重非并发作业执行，同时允许立即从控制台触发某个作业。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-23T18:56:34.007

只要您使用 DisallowConcurrentExecutionAttribute 属性标记您的作业，您就可以从您想要的任何来源安排您的作业，并且调度程序将确保一次只运行一个实例。

# postgresql - 本地 vs Heroku Postgres 速度

> ID：12533781
> 
> 赞同：4
> 
> 时间：2012-09-21T15:43:00.450
> 
> 标签：postgresql, heroku

我有一个本地数据库，其中包含大约 550 万条记录的单个表。我在 Heroku Postgres 上创建了一个新数据库（基本计划）并将本地转储恢复到其中。启动 psql 并进行一些查询，我注意到速度明显低于本地速度。然后，我使用 Crane 计划配置了另一个数据库，并且数字同样糟糕。

这里有一些数字：

* * *

`select count(*) from table;`
本地：1216.744 毫秒
Heroku（基本）：4697.073 毫秒
Heroku（起重机）：2972.302 毫秒

* * *

`select column from table where id = 123456;`
本地：0.249 毫秒
Heroku（基本）：127.557 毫秒
Heroku（起重机）：137.617 毫秒

* * *

这些巨大的差异怎么可能？这可能完全与硬件差异有关吗？有没有简单的方法来增加吞吐量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:05:14.690

正如 Lukos 建议的那样，单行选择的 120-130 毫秒可能表明网络延迟，您可以通过在靠近数据库服务器的地方运行查询来减少这种延迟。然而，2-3 秒的延迟更可能与数据库速度有关——特别是 I/O 吞吐量。这就是为什么 Heroku 强调其数据库产品的差异与缓存大小有关。

Heroku Postgres 将您的数据存储在[Amazon EBS](http://aws.amazon.com/ebs/)上。（这在[事件报告](https://status.heroku.com/incidents/151)中有所披露，并且顺便解释了 1 TB 的限制。） EBS 性能有点像过山车；比本地磁盘要多得多。一些读取可能很快，而另一些可能很慢。有时整个卷会下降到 100 KB/s，有时它会最大化互连。

根据我在 EC2 中托管数据库的经验，我发现在 EBS 上运行 RAID 10 可以消除性能差异。我不相信 Heroku 会这样做，因为它会大大增加高于数据库计划价格点的成本。AWS 最近宣布[为 EBS 预置 IOPS，](http://aws.amazon.com/about-aws/whats-new/2012/07/31/announcing-provisioned-iops-for-amazon-ebs/)这将允许您为专用容量付费，从而进一步提高可预测性，但也增加了成本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:46:28.027

所以你问在线数据库服务是否可能比本地数据库慢？是的，当然它会更慢，它需要处理所有的网络延迟。
有没有一种简单的方法可以加快速度？除了明显的更快的网络链接和移动办公室到 Heroku 数据中心的隔壁 - 没有

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-05T21:08:29.663

> 我在 Heroku Postgres 上创建了一个新数据库（基本计划）并将本地转储恢复到其中。

看起来你同时在玩不同的数据库。

```
select column from table where id = 123456;
Local: 0.249 ms
Heroku (Basic): 127.557 ms
Heroku (Crane): 137.617 ms 
```

我高度怀疑您的 Heroku 应用程序和 Heroku DB 没有托管在同一区域。两者都需要在美国或欧盟。

# asp.net - RouteTable.Routes 和 HttpConfiguration.Routes 的区别？

> ID：12533782
> 
> 赞同：4
> 
> 时间：2012-09-21T15:43:04.030
> 
> 标签：asp.net, asp.net-web-api, asp.net-routing

我想知道为什么路由似乎可以从 HttpConfiguration 对象和 RouteTable 类进行配置？显然这两个 .Routes 属性不是同一类型，但它们似乎保持同步。他们有可能不同步吗？不过，我想知道，从 Web API 的角度来看，应该使用 RouteTable.Routes*吗*？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T22:27:23.260

该类`HttpConfiguration`特定于 WebApi，使其可在 IIS 之外重用（例如，用于自托管）。该`RouteTable`版本仅适用于 IIS。

# http-headers - 带有 ASP.NET MVC Web API 的 ASP.NET MVC 站点，结果类型/控制器由 Accept 标头确定

> ID：12533785
> 
> 赞同：3
> 
> 时间：2012-09-21T15:43:25.703
> 
> 标签：http-headers, asp.net-mvc-4, asp.net-web-api

我一直在研究一个我希望是 RESTful 的 Web API。举个例子：

[http://product.domain.local/person](http://product.domain.local/person)

将提供一个带有 ASP.NET MVC 提供的漂亮 UI 的网页（用于人类）。

但是，如果我在 HTTP 标头中要求 Accept json/xml，我想将请求重定向到我的 Web API 控制器。IE。以及 MapHttpRoute，我想根据请求的 contentType 进行映射。

因此，当我的 API 返回一个 ID 时：

[http://product.domain.local/person/1](http://product.domain.local/person/1)

如果一个人使用它，他们会得到一个网页，如果客户端应用程序使用它，他们会得到 JSON/XML（因为他们会修改 Accept 标头），这允许我使用 HTTP 重定向等来实现 REST。

但我找不到办法做到这一点。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:24:33.183

我发现这非常困难。Webapi 非常擅长基于接受类型标头的路由，但不擅长处理视图。MVC 擅长视图，但不擅长处理各种响应。

如果有的话，我认为最容易使 MVC 最简单。根据您对接受类型处理所需的灵活性，您可能只需实现一个通用函数（返回一个`ActionResult`）并在其中根据您的头脑（或您想要的任何其他内容）返回正确的类型。

# ruby-on-rails - 引用：finder_sql

> ID：12533788
> 
> 赞同：0
> 
> 时间：2012-09-21T15:43:34.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

如果我编写自己的 SQL，我有一个具有某种关系的模型，这种关系可以得到最好的描述。为了简化，我写了这样的东西（在 MyModel.rb 中）：

```
has_many :platform_spots, :finder_sql => "SELECT * FROM platform_spots WHERE id=#{id}" 
```

在模型描述中。

如果我现在运行 rails 控制台，并尝试拉

```
MyModel.find(:first) 
```

我明白了

```
NameError: undefined local variable or method `id' for #<Class:0x000001039e4b80> 
```

我认为它是因为我需要使用单引号，所以我将其更改为

```
has_many :platform_spots, :finder_sql => 'SELECT * FROM platform_spots WHERE id=#{id}' 
```

现在，在控制台中

```
ecs = MyModel.find(:first)
ecs.platform_spots 
```

我得到错误

```
 PlatformSpot Load (0.2ms)  SELECT * FROM platform_spots WHERE id=#{id}
Mysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1: SELECT * FROM platform_spots WHERE id=#{id}
ActiveRecord::StatementInvalid: Mysql::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1: SELECT * FROM platform_spots WHERE id=#{id} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:53:06.660

显然，您需要`proc`使用 rails 3.1，如 github 问题中所述：[https](https://github.com/rails/rails/issues/415) ://github.com/rails/rails/issues/415以及 https://stackoverflow.com/a/10620468/429850 的其他 SO[答案](https://stackoverflow.com/a/10620468/429850)和[https://stackoverflow.com/a/5465800/429850](https://stackoverflow.com/a/5465800/429850)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:56:31.017

尝试像这样重写它：

```
has_many :platform_spots, :class_name => "PlatformSpot",
            :finder_sql => proc {"select * from platform_spots where id = #{id}"} 
```

# android - 偶尔的 SocketTimeoutException - 没有来自服务器的“OK”消息

> ID：12533789
> 
> 赞同：1
> 
> 时间：2012-09-21T15:43:39.417
> 
> 标签：android, ruby-on-rails, apache, http

我目前正在使用 DefaultHttpClient 创建对 Rails 服务器的 HTTP 请求。

网络调用大约有 4% 的时间因 SocketTimeoutException 而失败。

我在我的网络流量上运行了 Wireshark 并发现了以下内容：

我成功的通话是这样开始的

![在此处输入图像描述](../Images/a8809114d9d5d8aeec29b70e6c5ba191.png)

就这样结束

![在此处输入图像描述](../Images/55fb14b6c2a94e87b0a6424eda298d63.png)

失败的调用是这样开始的：

![在此处输入图像描述](../Images/72402425b22281c440da51a6992f26fa.png)

就这样结束

![在此处输入图像描述](../Images/22717f19126e6000e3569728b18fa1bc.png)

请注意，结束调用中缺少从服务器发送给我们的 HTTP OK 消息，导致它在大约 15 秒后超时。

我想知道是否有人以前遇到过这种情况，或者对调试 Android Apache 库或 Apache rails 有什么建议，以弄清楚为什么我们没有收到来自服务器的 HTTP OK 消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:18:18.517

我想通了。如果我的 post 请求中有错误的参数，rails 服务器和 apache 库会超时。我们传入了一个“_b”参数，并且由于某种未知的原因，服务器不喜欢这个并且会超时请求。删除 bad post 参数解决了这个问题。

如果其他人看到这样的超时，我建议查看传入的 POST 参数。

# css - 无法从主样式表中删除背景图像

> ID：12533792
> 
> 赞同：0
> 
> 时间：2012-09-21T15:43:48.010
> 
> 标签：css

我们的应用程序有一个所有页面通用的主 .css，我们不允许更改此文件中的任何内容。

我们有一个条目如下：

```
ul li{display:block;padding:0 0 0.5em 15px;margin:0 0 0 0;background:url(../images/bullet.gif) top left no-repeat;} 
```

我正在其中一个 jsp-s 上实现预测搜索，为此我有一个特定的 css 文件，如下所示

```
.ac_results {
    padding: 0px;
    border: 1px solid black;
    background-color: white;
    overflow: hidden;
    z-index: 99999;
}

.ac_results ul {
    width: 100%;
    list-style-position: none;
    list-style: none;
    padding: 0;
    margin: 0;
    list-style: disc inside;
}

.ac_results li {
    margin: 0px;
    padding: 2px 5px;
    cursor: default;
    display: block;
    /* 
        if width will be 100% horizontal scrollbar will apear 
        when scroll mode will be used
    */
    /*width: 100%;*/ 
    font: menu;
    font-size: 12px;
    /* 
    it is very important, if line-height not setted or setted 
    in relative units scroll will be broken in firefox
    */
    line-height: 16px;
    overflow: hidden;
}

.ac_loading {
    background: white url('indicator.gif') right center no-repeat;
}

.ac_odd {
    background-color: #eee;
 }

.ac_over {
    background-color: #0A246A;
    color: white;
} 
```

我的问题是我无法`bullet.gif`从我当前的预测搜索列表中删除它。如果我添加背景：无，我将失去所有现有的背景颜色。我怎样才能阻止它`bullet.gif`出现在我的列表中。

**请注意：**我也试过了`background-image:none;`，但它没有用，`bullet.gif`仍然出现在我的搜索列表中:(

问候，米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:45:42.837

而不是`background: none`尝试：

```
background-image: none 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:46:31.837

你应该写

```
 background-image:none; 
```

# php - preg_match 并删除字符串中的多个字符？

> ID：12533794
> 
> 赞同：2
> 
> 时间：2012-09-21T15:43:54.923
> 
> 标签：php, preg-replace, preg-match

嗨，我正在使用 php 对我的网站进行编程，并且我一直在阅读有关 preg_match 的大量内容并尝试了很多示例。我想要做的是如下所示......

```
 if(preg_match('These characters'), $myVariable, matches)){

      Find and remove found characters from $myVariable;

 } 
```

我很确定这对 php 专家来说是显而易见的，但经过数小时的尝试和阅读，我陷入了困境。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:46:28.900

在进行替换之前，您无需检查匹配项。就像你要这样做：

```
str_replace("A","B","ZZZZZZZ"); 
```

它只是不会取代任何东西。同样适用`preg_replace`：如果没有匹配，它什么也不做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:48:38.583

听起来您应该使用[`preg_replace.`](http://php.net/manual/en/function.preg-replace.php)如果您想删除所有 y 和 o，例如，您可以这样做：

```
$string = 'hey you guys!';
$ans = preg_replace('/[yo]/','',$string);
print_r($ans); //outputs 'he u gus!' 
```

无论您想删除什么字符，只需将它们放在括号之间`[...]`

# makumba - Makumba 配置 - 不包含 JS/CSS

> ID：12533798
> 
> 赞同：0
> 
> 时间：2012-09-21T15:44:14.137
> 
> 标签：makumba

在为 Karamba 开发引导程序实现时！我从 Makumba 的默认 JS 库原型中得到了很多冲突，这与使用的引导程序 - jQuery 冲突。

有没有办法告诉 Makumba 不包含它的 Javascript 文件和库，因为我们想使用自己的 JS？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T18:41:03.400

我现在找到了一种解决方法：似乎 Makumba 搜索`<head>`and`</head>`标记并在它们之后或之前插入其 javascript 和 css 文件。为了避免这种情况，我为这些标签添加了一个属性：

```
<head attr>
  ...
</head attr> 
```

# java - 在Tomcat中执行shell命令

> ID：12533799
> 
> 赞同：7
> 
> 时间：2012-09-21T15:44:15.800
> 
> 标签：java, security, shell, tomcat, command

所以我有以下问题：我有一个在 Linux 上的 Tomcat7 服务器内运行的 Web 服务。然而，Web 服务必须执行一些命令（主要是文件操作，例如复制和挂载）。我已经用 java.nio 替换了，但我认为没有`mount`.

***所以我试图从我的 Tomcat Java 进程中执行 shell 命令。不幸的是，它不执行我的命令***。我之前已经在 J​​ava 中实现了 shell 命令的执行。所以我的代码应该是正确的：

```
Process pr = Runtime.getRuntime().exec("mount -o loop -t iso9660 <myimage> <mymountpoint>");
pr.waitFor(); 
```

`<myimage>`并且`<mymountpoint>`是绝对路径，所以也没有问题。

*   我已经调试了我的命令，它们在控制台上执行时正在工作。
*   我试过发送其他命令。简单的命令，如`id`和`pwd`正在工作！
*   我试过使用`/bin/bash -c "<command>"`，没有用。
*   我试过执行一个shell脚本，它执行命令，但没有用。
*   我尝试转义命令中的空格，但没有成功。

所以我已经深入挖掘，现在我怀疑一些 Tomcat 安全策略（**沙盒**？），它阻止我执行命令。由于安全性对我来说不是问题（它是一个内部系统，与外界完全隔离），我尝试了一种 hack，它最近变得非常流行：

```
System.setSecurityManager(null); 
```

这也不起作用。我在 RHEL6 上使用 Java7 和 Tomcat7。Tomcat7刚刚解压！我在 /etc/.. 或除 /opt/tomcat/ 之外的任何其他文件夹中没有任何文件，我从 Tomcat 主页中提取了 zip。我在 /opt/tomcat/conf 文件夹中搜索了安全设置，但我能找到的只是文件 catalina.policy，我似乎无法为 shell 命令设置一些安全级别。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-22T22:00:48.473

一些东西：

```
System.setSecurityManager(null); 
```

您刚刚破坏了应用程序的安全性。

> 是的，Tomcat 以 root 身份运行。如果我执行 id 我也是 root 。

立即解决此问题！

现在谈谈这个问题。你不应该让 Tomcat 执行任何东西，你需要把它推迟到一个单独的进程，无论是一个 shell 脚本还是另一个 Java 程序。这也应该消除（我希望）对运行 Tomcat 的 root 的依赖。应该可以作为无法正常登录系统的非特权用户执行此命令。您可以通过配置`/etc/fstab`并为同一用户提供执行此操作的权限来执行此操作。从纯粹的安全 POV 来看，挂载的进程不应归 tomcat 用户所有。Tomcat 用户也不应该是 root。回顾一下：
1）停止以 root 身份运行 Tomcat
2）在 Tomcat 上下文之外创建一个单独的进程来运行这个挂载
3）创建一个tomcat用户，这个用户应该不能登录系统，也不能是特权用户（admin，超级用户等）
4）创建一个进程用户，这个用户应该完全配置为tomcat用户
5）编辑`/etc/fstab`为进程用户提供正确安装所需的权限。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T21:26:33.243

使用`Runtime.exec`. 更好的选择是使用`ProcessBuilder`, 并自己拆分参数，而不是依赖 Java 为您拆分它们（它非常天真）。

```
ProcessBuilder pb = new ProcessBuilder("/bin/mount", "-o", "loop", /*...*/);
pb.redirectErrorStream(true); // equivalent of 2>&1
Process p = pb.start(); 
```

你说你在 RHEL 上，所以你有 selinux 活动吗？检查您的日志，看看这是否是阻止您的原因（我认为您正在寻找的是 audit.log，我使用 selinux 已经有几年了）。如果这确实是问题所在，那么您可能应该询问超级用户或服务器故障而不是 SO...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T20:23:58.787

我不确定这是否是您遇到的问题，但是当使用 Runtime.exec() 而不读取关联的输出缓冲区时，我看到了问题。[你可以在这里](http://vyvaks.wordpress.com/2006/05/27/does-runtimeexec-hangs-in-java/)找到详细的解释和潜在的解决方案。读取输出和错误流还可以帮助您了解运行命令时操作系统级别发生的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-22T01:19:03.587

我最近不得不从 Swing 应用程序中执行类似的操作。

您可能可以使用 ProcessBuilder 来完成它，就像 Ian 的回答一样，但我发现一旦事情开始变得复杂，编写一个执行您想要的 shell 脚本会更容易，使您能够传递尽可能少的参数可能的。然后使用 ProcessBuilder 调用 shell 脚本。

如果您调用的任何内容都超过了真正的最小输出，那么您还必须读取输出和错误流，以防止在输出缓冲区填满时进程阻塞，因为您似乎已经在这样做了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-09T13:48:23.980

我使用`sudo -S`before 命令和 tomcat7 用户：`tomcat7 ALL=(ALL) NOPASSWD:ALL`

# sql - SQL Server 等效于 Oracle 中的批量收集

> ID：12533802
> 
> 赞同：1
> 
> 时间：2012-09-21T15:44:18.633
> 
> 标签：sql, sql-server, oracle, bulk-collect

我想在 SQL Server 中复制以下代码。我环顾四周，似乎唯一的选择是只使用直线光标，但有没有更好的方法：

```
DECLARE

    CURSOR cursor1 IS
    SELECT *
    FROM table1;

    TYPE cursor_aat IS TABLE OF cursor1%ROWTYPE;        

    l_cursor cursor_aat;
BEGIN        
    OPEN cursor1;

    LOOP

        FETCH cursor1
        BULK COLLECT INTO l_cursor LIMIT 200;

        FOR INDX IN 1 .. l_cursor.COUNT LOOP
            IF (CheckSomeData() = 0) THEN           
                INSERT INTO new_table
                (col1, col2)
                values
                (l_cursor(INDX).col1, l_cursor(INDX).col2);

                INSERT INTO new_table2
                ...

            end if

        END LOOP;

        EXIT WHEN l_cursor.COUNT < 200;
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T15:49:33.797

如果您想一次执行 200 行，可以使用临时表和游标。

# css - Firefox中的填充不同

> ID：12533804
> 
> 赞同：3
> 
> 时间：2012-09-21T15:44:40.503
> 
> 标签：css, firefox, cross-browser

在我测试过的所有浏览器中，我的按钮如下所示：

![在此处输入图像描述](../Images/5fa4b94c9e761d1503983fd9c9bcc4cb.png)

除了在 Firefox 中它看起来像这样：

![在此处输入图像描述](../Images/308a68cacde5d6b3fc0701583acedc2e.png)

[我已经将代码发布为 jsfiddle](http://jsfiddle.net/PuxXw/1/)，我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:51:24.307

在普通站点上，您应该始终包含重置以消除浏览器之间的这些小不一致。这是一个简单的：http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

*（编辑：好的，你使用规范化，这也可以工作）*

但是，在您的情况下，我还建议不要在顶部和底部使用填充，而是删除它们和您的高度，而是使用行高！这将使您的文本在任何地方都很好地居中。

# objective-c - 向报亭应用程序发送标准推送通知

> ID：12533811
> 
> 赞同：1
> 
> 时间：2012-09-21T15:45:03.587
> 
> 标签：objective-c, ios5, apple-push-notifications, urbanairship.com, newsstand-kit

如何将标准推送通知发送到报亭应用程序？当我说“标准”时，我指的是随消息弹出的典型警告框。

我正在使用 Urban Airship 并且“内容可用”推送工作正常，如下所示：

```
 {"aps": 
        {
         "content-available": 1
        }, 
         "device_tokens": ["1234ABCDKKGGOGOGG85986598750870870875708ASD"]
 } 
```

但是当我尝试发送标准推送时，警报永远不会弹出，我的代表

```
application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

不叫：

```
 {"aps": 
        {
         "alert": "Hi, from Urban Airship!"
        }, 
         "device_tokens": ["1234ABCDKKGGOGOGG85986598750870870875708ASD"]
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:27:33.503

Forgot to register for the alert (standard) push, which is set by adding the constant **UIRemoteNotificationTypeAlert**

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeNewsstandContentAvailability | UIRemoteNotificationTypeAlert]; 
```

# c# - DataSource WriteXML 打印关联父级的子行

> ID：12533817
> 
> 赞同：0
> 
> 时间：2012-09-21T15:45:29.353
> 
> 标签：c#, dataset, writexml

在我的数据库中，我有一个父表和子表。例如，父表包含姓氏和地址，子表包含姓氏和名字。有一个外键，因此子表中的一行必须在父表中具有相应的姓氏。

当我使用 2 个 DataAdapter 读取这两个表并将这些 DataTable 添加到 DataSet 时，我想打印 XML，如下所示：

```
<parent_table>
  <last_name>Smith</last_name>
  <address>111 Hi Street, Bye city</address>
  <child_table>
    <last_name>Smith</last_name>
    <first_name>Ann</first_name>
  </child_table>
  <child_table>
    <last_name>Smith</last_name>
    <first_name>Bob</first_name>
  </child_table>
</parent_table> 
```

但是，目前我正在分别打印两个表格：

```
<parent_table>
  <last_name>Smith</last_name>
  <address>111 Hi Street, Bye city</address>
</parent_table>
<child_table>
  <last_name>Smith</last_name>
  <first_name>Ann</first_name>
</child_table>
<child_table>
  <last_name>Smith</last_name>
  <first_name>Bob</first_name>
</child_table> 
```

有没有办法实现（希望使用 DataSet.WriteXML()）我想要的输出？

我尝试添加 ForeignKeyConstraint，并尝试添加 DataRelation，但都没有改变输出。

免责声明：以上内容为手写，如有XML错误请见谅。实际的表包含比“姓氏”更好的外键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:50:06.840

从将数据集内容写入[XML 数据 (ADO.NET)](http://msdn.microsoft.com/en-us/library/zx8h06sz%28v=vs.100%29.aspx)：

> 在编写包含 DataRelation 对象的 DataSet 的 XML 表示时，您很可能希望生成的 XML 将每个关系的子行嵌套在其相关的父元素中。为此，请在将 DataRelation 添加到 DataSet 时将 DataRelation 的 Nested 属性设置为 true。有关详细信息，请参阅[嵌套 DataRelations (ADO.NET)](http://msdn.microsoft.com/en-us/library/7sfkwf9s%28v=vs.100%29.aspx)。

# c# - Outlook 拖放 - ActiveExplorer().Selection() 不包含所有项目

> ID：12533820
> 
> 赞同：0
> 
> 时间：2012-09-21T15:45:44.960
> 
> 标签：c#, outlook, vsto, outlook-addin, outlook-redemption

在我的 Outlook 加载项中，我试图获取有关用户拖放到 MAPI 商店中的所有项目的信息（我正在使用 Redemption 库）。

我对此的第一次尝试是挂钩 MessageCreated 事件......

```
myRDOStore.OnMessageCreated += new IRDOStoreEvents_OnMessageCreatedEventHandler(myRDOStore_OnMessageCreated); 
```

棘手的部分是我需要捕获与一个集合同时拖放的所有项目，我猜这意味着保留每条新消息的某些方面（可能是 EntryId）。

现在，问题显然是我无法将一堆任意事件的结果捆绑在一起，所以我正在研究`ActiveExplorer().Selection`集合并试图想办法确定哪些项目已被拖放到我的存储中.

我没有太多运气，因为集合的内容似乎有点随意（例如，当拖动 1 个项目时，`Selection`当我在事件处理程序中检查它时，会有两个项目，或者当一系列事件在那里触发时例如，选择中的 2 个项目，下一个事件中的 1 个，下一个事件中的 1 个等）。

除此之外，我的一个用例是能够从 Outlook 外部拖动项目，我猜它不会包含在`Selection`集合中。

有没有解决这个问题的标准方法？这似乎是一件很常见的事情——将一堆文件拖到一个文件夹中，并能够作为一个集合获取关于它们的一些信息，但我就是想不通。非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:16:04.850

经过一些研究，我发现问题在于丢弃的电子邮件 COM 对象没有被释放。释放它们的最简单方法是调用 e.Data.GetData("RenPrivateMessages"); 在 DragDrop 事件处理程序中完成拖放逻辑后的方法。

# java - java httprequest 从请求中获取正文

> ID：12533824
> 
> 赞同：7
> 
> 时间：2012-09-21T15:46:13.343
> 
> 标签：java, httprequest, apache-httpcomponents

我收到客户的发帖请求。这个请求包含一些我想在服务器端分割的 json 数据。我已经使用 httpcore 创建了服务器。HttpRequestHandler 用于处理请求。这是我认为可以工作的代码

```
 HttpEntity entity = ((HttpEntityEnclosingRequest)request).getEntity();

                    InputStream inputStream = entity.getContent();

                    String str = inputStream.toString();

                    System.out.println("Post contents: " + str);*/ 
```

但我似乎找不到使用 HttpRequest 对象获取请求正文的方法。如何从请求对象中提取正文？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T17:03:38.267

你应该使用`EntityUtils`它的[toString](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html#toString%28org.apache.http.HttpEntity%29)方法：

```
String str = EntityUtils.toString(entity); 
```

`getContent`返回流，您需要使用例如手动从中读取所有数据`BufferedReader`。而是`EntityUtils`为你做的。
您不能`toString`在流上使用，因为它返回对象本身的字符串表示，而不是数据。
还有一件事：AFAIK GET 请求不能包含正文，因此您似乎收到了来自客户端的 POST 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T17:19:31.417

...并为此`MultipartEntity`使用：

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
    try {
        entity.writeTo(baos);
    } catch (IOException e) {
        e.printStackTrace();
    }
    String text = new String(baos.toByteArray()); 
```

# c - 在C中切片字符串的开头

> ID：12533830
> 
> 赞同：0
> 
> 时间：2012-09-21T15:46:30.947
> 
> 标签：c, pointers, c-strings

```
void slice_first_char(char ** string)
{
    *string = &(*string[1]);
}

int main(int argc, char * argv[])
{
    char * input = "abc";
    input = &(input[1]);
    puts(input); // "bc" as expected.

    slice_first_char(&input);
    puts(input); // \372\277_\377
                 // What‘s going on?
} 
```

如何重写 slice_first_char 函数以使其按预期工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T15:52:01.830

你有括号

```
&(*string[1]); 
```

错误的。我猜你的意思是

```
&((*string)[1]); 
```

您的原始版本取消引用数组第一个元素的指针`strings`，然后获取该数组的地址，而您实际上想要取消引用给定指针（因为它只指向单个字符串），然后获取该数组的第一个元素（第一个字符），然后取那个地址。

表达这一点的一种稍微不那么令人费解的方式是

```
*string + 1 
```

顺便一提。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T15:53:34.680

您似乎正在尝试从字符串中删除第一个字符。所以：

```
char* remove_first_char(const char* s) {
  return (s+1);
} 
```

# java - Java 写入文本文件未完成

> ID：12533834
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:46:49.353
> 
> 标签：java, database, io, text-files

我正在使用 BufferedWriter 将一些数据写入文本文件。它比使用 ODBC 写入 Access 更快。代码看起来像这样：

```
BufferedWriter bw = new BufferedWriter(new FileWriter(new File(filePath), true)); 
```

True 是让 BufferedWriter 追加，而不是覆盖。

```
bw.append(          
    country + "\t" +
    scenario + "\t" +
    tempStage + "\t" +
    year + "\t" +
    tempState
); 
```

它在以前的项目中对我有用。新问题：它只是在行的中间胡扯。这是一条很好的线：

```
SultanateOfBrunei   BeeBeeScenario  Other   2019 
```

最后一行通常如下所示：

```
SultanateOfBrunei   BeeBeeScenario  Other   2019 Nondyna 
```

或苏丹

甚至苏

我输入了错误处理代码来忽略这样奇怪的不完整行。

这意味着并非所有数据都被写入。我可以放弃一个数据，没问题……但它似乎截断了更多。模拟从 1990 年运行到 2020 年底，通常在 2019 年某个地方结束。增加虚拟机有一点帮助——它会走得更远。但我只有一定的记忆力！

有什么见解吗？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:49:17.397

您的应用程序可能没有关闭 BufferedWriter，因此输出的最后一部分没有被写入文件。

你的程序结构应该是这样的：

```
BufferedWriter bw = new BufferedWriter(new FileWriter(new File(filePath), true));
try {
    // generate output
} finally {
    bw.close();
} 
```

请注意，这不会尝试处理在打开、写入或关闭 writer 时可能出现的 I/O 异常。你是否应该这样做，以及你应该如何处理你捕获的任何异常取决于具体情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:48:15.440

可能您`bw.flush()`在关闭流之前没有刷新 ( ) 流。应该对所有流都这样做，但对缓冲流更重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T15:51:01.813

您只需要关闭 BufferedWriter。如果你不这样做，最后填充的缓冲区可能不会被写入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T15:51:14.550

完成编写后，您实际上应该调用[`close()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html#close%28%29)BufferedWriter 对象。这将确保您的流被刷新并因此关闭。

# java - GWT RPC - 每个应用程序多个 RPC 服务

> ID：12533839
> 
> 赞同：4
> 
> 时间：2012-09-21T15:47:07.930
> 
> 标签：java, gwt, tomcat, servlets, rpc

我目前正在使用具有一个大型 RPC 服务的 GWT 应用程序。它有 100 多种方法，所有方法都做不同的事情。如果我将其拆分为多个 RPC 服务，我会获得什么样的性能优势/障碍？我相信我必须为每个人制作一个新的 servlet。

所以我的主要问题是：GWT 是否为每个正在运行的客户端创建一个新的 RPC servlet？如果我有两个 RPC 服务，GWT 会为一个 App 提供两个 servlet 吗？拥有两个 RPC 服务会导致任何性能问题。目前（一个 tomcat 实例上有 10-15 个并发用户）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T15:56:42.043

> 如果我将其拆分为多个 RPC 服务，我会获得什么样的性能优势/障碍？

我相信在这方面它不会改变任何东西。

> 我相信我必须为每个人制作一个新的 servlet。

不必要。您可以有一个`RemoteServiceServlet`实现多个`RemoteService`接口的单个​​。您必须`@RemoteServiceRelativePath`在所有接口上设置相同的值，以便客户端使用相同的 URL，但您也可以将相同的 servlet 映射到几个不同的 URL（几个`servlet-mapping`具有相同的`servlet-name`）。

> GWT 是否为每个正在运行的客户端创建一个新的 RPC servlet？

GWT 不会*创建新的 RPC servlet*，如果您在 Tomcat 中托管 Web 应用程序，则 Tomcat odes 会创建 servlet 实例（通常每个类一个实例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T22:35:05.330

多个 RPC 接口的一个可能缺点：如果接口之间有许多共享模型对象，GWT 将为`FieldSerializers`每个模型对象生成 - 这些将被正确共享。但是，为了确保每个 RPC 实例只引用它需要的序列化程序，`TypeSerializer`每个服务代理都会创建一个。在 10 个服务每个使用 100 个模型对象的情况下，这将导致 10`TypeSerializer`秒，每个具有 100 个`FieldSerializer`注册（每个序列化程序的三个组件 - 序列化、实例化、反序列化）。

在这些共享模型对象的重量下，我看到至少一个应用程序的大小几乎增加了三倍——超过一百个 RPC 接口，以及它们之间共享的数千个可能的模型对象。并非每个接口都使用了每个模型，但足以造成这种损害。通过分别维护每个接口对并制作一个扩展其他每个接口的巨型对来缓解这种情况 - 这种方式`GWT.create`仅在一种类型上调用，因此只`TypeSerializer`创建一个巨型而不是数百个。

因此，请密切注意编译后的输出大小，并不时查看 SOYC（编译的故事）报告，看看是什么占用了所有空间。

# c# - 将 XML 元素复制到字符串

> ID：12533845
> 
> 赞同：0
> 
> 时间：2012-09-21T15:47:26.503
> 
> 标签：c#, .net, xml, vb.net

> **可能重复：**
> [XML 文件复制到字符串](https://stackoverflow.com/questions/12533507/xml-file-copy-to-a-string)

```
 <DETAIL Description='>> Problem:<br><br>CRS750 dumps when panel F is opened<br><br><br>  <br>>> Functional Solution:<br><br>Check cause of the dump and fix it<br><br><br><br>>> Technical Solution:<br><br>Modified CRS750 and added fields WWVTRM and WWCRTP in CRA750F0 record format.<br><br><br><br>>> Related corrections<br><br>None <br><br><br><br>>> Affected Objects<br><br>CRS750 VIEWDEF MAT only' /> 
```

我想复制上面的字符串并用字符串中的值更新数据库中的表。

但是，由于它包含`<br>`并`<<` 引发以下异常；

```
'<', hexadecimal value 0x3C, is an invalid attribute character. Line 1, position 902. 
```

像这样的标签效果很好`<DETAIL Objects='MAT: Viewdefinition:CRS750' />`请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:54:26.503

您的字符串不是有效的 XML，无法将其放置在需要 XML 的位置。

String.Concat 不是构造 XML 的方法。请使用 XML API（XmlDocument、XDocument 或 XmlWriter）来创建 XML。

如果您仍想使用 string.Concat 手动构建 XML，请在提问之前证明您已阅读[XML 规范。](http://www.w3.org/TR/2008/REC-xml-20081126/)

# wpf - ElementName 绑定不能可靠地工作 - 可疑的调度程序竞争条件

> ID：12533846
> 
> 赞同：1
> 
> 时间：2012-09-21T15:47:43.487
> 
> 标签：wpf, data-binding, itemscontrol, dispatcher

[下载复制项目](https://docs.google.com/open?id=0By4aHfGkOltCaE1vc2pqRXluWm8)

**编辑**

该解决方案有时完全可以使我摆脱最初的疑惑，为什么它首先会起作用。毕竟，这些项目不是可视树的一部分。最后，这是完全有道理的：

*   该集合中的按钮不在可视树中，因此元素绑定不起作用。
*   应用模板将它们放入可视化树和绑定，如果此时应用，则开始工作。
*   这证实了可疑的比赛条件。

我的一位同事进行了一些扩展调试，也显示了该问题 - 在绑定成功的情况下，首先调用 OnApplyBinding。所以在不调整逻辑树的情况下使用集合是有缺陷的。

感谢您重回正轨的回复！

* * *

**原帖**

我有一个公开 ObservableCollection 的视图控件，我的视图可以包含任意元素，例如按钮。注意按钮上的**ElementName**绑定：

```
<local:ViperView>    
    <local:ViperView.MenuItems>
        <Button Content="{Binding ElementName=btn, Path=Content}" />
    </local:ViperView.MenuItems>

    <Grid>
        <Button x:Name="btn" Content="HELLO WORLD" />
    </Grid>
</local:ViperView> 
```

控件的 ControlTemplate 仅使用 ItemsControl 呈现内容：

```
<ControlTemplate ...
...

    <ItemsControl
        x:Name="PART_NavigationMenuItemsHost"
        ItemsSource="{Binding MenuItems, RelativeSource={RelativeSource TemplatedParent}}" />
 </ControlTemplate> 
```

上面的视图分配给我的主视图模型的 ActiveView 属性。主窗口仅通过数据绑定显示视图。

现在的问题是：如果视图在创建后没有立即分配给视图模型，则该视图中的 ElementName 绑定**无法**可靠地工作。

![在此处输入图像描述](../Images/f1169b41e7dbc8d1b770e4ecf3f1e4e9.png)

ElementName 绑定的工作方式如下：

```
MainViewModel.ActiveView = new ViperView(); 
```

ElementName 绑定***有时***使用正常优先级工作：

```
var view = new ViperView();
Dispatcher.BeginInvoke(() => MainViewModel.ActiveView  view); 
```

如果视图模型属性设置为低优先级，则ElementName 绑定***总是失败：***

```
var view = new ViperView();
Dispatcher.BeginInvoke(DispatcherPriority.Render, () => MainViewModel.ActiveView = view); 
```

如果属性是从工作线程设置的， ElementName 绑定***有时会***起作用（绑定引擎编组回 UI 线程）：

```
var view = new ViperView();
Task.Factory.StartNew(() => MainViewModel.ActiveView = view); 
```

如果工作线程有延迟，ElementName 绑定***总是失败：***

```
var view = new ViperView();
var view = new ViperView();
Task.Factory.StartNew(() => 
{
    Thread.Sleep(100);
    MainViewModel.ActiveView = view;
}); 
```

我对此没有答案。这似乎与时间有关。例如，如果我在上面的任务示例中添加一个简短的 Thread.Sleep，这*总是*会导致绑定中断，而没有睡眠，它只是有时会中断。

这对我来说是一个很好的展示 - 任何指针都值得赞赏......

谢谢你的建议菲利普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:56:57.463

据我所知，`ElementName`绑定不会随时更新：它只会绑定到属性一次，然后停止更新。这可以在这里解释您的问题：第一次绑定将根据时间戳发生（或不会发生）。

您可以通过指定`UpdateSourceTrigger`绑定的属性来修复它：

```
<Button Content="{Binding ElementName=btn, Path=Content, UpdateSourceTrigger=PropertyChanged}" /> 
```

这将确保每次更新 btn.Content 时您的绑定都会更新。

希望这有效=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:49:36.670

我不能完全解释为什么第一个选项有效。但是我可以解释为什么其他的不起作用。

好的，首先，ElementName 只能在元素在同一个可视化树中时起作用。请注意，NavigationButtonItems 与 ViperView 的实际内容是分开的。

因此说你这样做：

```
<Button Content="{Binding ActualWidth, 
            RelativeSource={RelativeSource AncestorType=WpfApplication2:ViperView}}" /> 
```

（它是 NavigationButtonItems 的一部分）。现在，如果 NavigationButtonItems 和 ViperView 项目没有混合为一个（在 ControlTemplate 中混合到一个可视化树），则此绑定将失败，并且保持失败。

现在假设在绑定发生时视觉树恰好是 ONE，那么绑定将成功并且一切都很好。

请注意，当您渲染内容时会混合到一个可视化树中，例如：dc.ActiveScreen = viperview;

这是一个简单的示例来演示如何做得更好：

```
 <Button

            Background="Purple"
            Width="100"
            Height="20"
             >
            <Button.Style>
                <Style TargetType="Button">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsReady}" Value="True">
                            <Setter Property="Content" Value="{Binding ActualWidth, 
            RelativeSource={RelativeSource AncestorType=WpfApplication2:ViperView}}" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Button.Style>
        </Button> 
```

IsReady 属性应该在 viewModel 中，它基本上告诉“是的，现在所有内容都呈现为一棵可视化树，您可以应用绑定。”

如果您使用 IsReady 技巧，ActualWidth 将开始工作：

```
 Task.Factory.StartNew(() =>
                              {
                                  Thread.Sleep(10);
                                  dc.ActiveScreen = view;
                                  //ps you might need to force wpf finish with  rendering here. like use Application.DoEvents()
                                  dc.IsReady = true;//force bindings since everything is one now.
                              }); 
```

如果您需要澄清，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T14:35:10.127

鉴于 ElementName 绑定在示例中的按钮甚至添加到父视图的集合之前部分失败，因此我无法拦截绑定。一个稍微肮脏的解决方法是在应用模板并建立可视化树后刷新这些控件中的绑定：

从 OnApplyTemplate，调用：

```
internal static class BindingUtil
{
    /// <summary>
    /// Recursively resets all ElementName bindings on the submitted object
    /// and its children.
    /// </summary>
    public static void ResetElementNameBindings(this DependencyObject obj)
    {
        IEnumerable boundProperties = obj.GetDataBoundProperties();
        foreach (DependencyProperty dp in boundProperties)
        {
            Binding binding = BindingOperations.GetBinding(obj, dp);
            if (binding != null && !String.IsNullOrEmpty(binding.ElementName)) //binding itself should never be null, but anyway
            {
                //just updating source and/or target doesn’t do the trick – reset the binding
                BindingOperations.ClearBinding(obj, dp);
                BindingOperations.SetBinding(obj, dp, binding);
            }
        }

        int count = VisualTreeHelper.GetChildrenCount(obj);
        for (int i = 0; i < count; i++)
        {
            //process child items recursively
            DependencyObject childObject = VisualTreeHelper.GetChild(obj, i);
            ResetElementNameBindings(childObject);
        }
    }

    public static IEnumerable GetDataBoundProperties(this DependencyObject element)
    {
        LocalValueEnumerator lve = element.GetLocalValueEnumerator();

        while (lve.MoveNext())
        {
            LocalValueEntry entry = lve.Current;
            if (BindingOperations.IsDataBound(element, entry.Property))
            {
                yield return entry.Property;
            }
        }
    }
} 
```

另一个可能更可取的修复方法是在运行时更改逻辑树。将以下代码添加到我的视图中也可以解决问题：

```
public class ViperView : ContentControl
{
    private readonly ObservableCollection<object> menuItems = new ObservableCollection<object>();

    public ObservableCollection<object> NavigationMenuItems
    {
        get { return menuItems; }
    }

    public ViperView()
    {
        NavigationMenuItems.CollectionChanged += OnMenuItemsChanged;
    }

    private void OnMenuItemsChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        if (e.NewItems != null)
        {
            foreach (var newItem in e.NewItems)
            {
                AddLogicalChild(newItem);
            }
        }
    }

    protected override IEnumerator LogicalChildren
    {
        get
        {
            yield return this.Content;
            foreach (var mi in NavigationMenuItems)
            {
                yield return mi;
            }
        }
    }
} 
```

# redis - Redis ZRANGEBYSCORE 奇怪的行为

> ID：12533853
> 
> 赞同：1
> 
> 时间：2012-09-21T15:48:20.380
> 
> 标签：redis

我正在使用redis 2.6。我遇到了奇怪的`ZRANGEBYSCORE`函数行为。我有一个长度约为几百万个元素的排序集。像这样的东西：

```
10 marry 
15 john 
25 bob 
... 
```

所以比较查询：

```
ZRANGEBYSCORE longset 25 50 LIMIT 0 20  works like a charm, it takes milliseconds
ZRANGEBYSCORE longset 25 50             this one hangs up for a minutes!! 
```

我感兴趣的所有元素都在集合的前一百个中。我认为没有必要扫描重量大于“50”的元素，因为它是 SORTED 集。

请解释一下 redis 是如何扫描排序集的，以及为什么这两个查询之间存在如此大的差异。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:03:28.137

IMO 的 Redis 最好的事情之一是您可以检查文档中每个命令的时间复杂度。[zrangebyscore](http://redis.io/commands/zrangebyscore)的文档指定：

> **时间复杂度**：O(log(N)+M)，其中 N 是排序集中的元素数，M 是返回的元素数。如果 M 是常数（例如，总是用 LIMIT 要求前 10 个元素），你可以认为它是 O(log(N))。
> 
> [...]
> 
> 请记住，如果`offset`很大，则需要遍历排序集以`offset`获取元素，然后才能返回元素，这可能会增加**O(N)**时间复杂度。

这意味着如果您知道您只需要一定数量的项目，并指定 a `LIMIT offset count`，如果`offset`是 (close to) `0`，您可以认为它**O(log(N))**，但如果返回的项目数量很高（或偏移量很高），可以认为是**O(N)**。

# python - 如何在 python 中使用日期范围在 mySQL 中提取/查询数据

> ID：12533854
> 
> 赞同：2
> 
> 时间：2012-09-21T15:48:21.027
> 
> 标签：python, mysql, database, date

如何使用 python date 按天在 mySQL 中提取数据？说我想要`day1`并且`day2`（或后天`day1`）迭代`n`多次

所以我需要“where”SQL语句中的日期在每次迭代中看起来像下面的列表（`n`次）

```
day1 >= '2012-01-01'  and  day2 < '2012-01-02'    ( n = 1 )
day1 >= '2012-01-02'  and  day2 < '2012-01-03'    ( n = 2 )
.
.
day1 >= yesterday    and day2  < today            ( n times ) 
```

.

```
Start_date = '2012-01-01'   <- How can I write this in python
End_date = Today()   <- and this 
```

这样写：

```
for each iteration ..
    con.execute("select * from table where date >= day1 and date < day2" ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:08:32.457

您需要`datetime`模块：-

```
import datetime
start = datetime.date(2012,01,01) 
next = start + datetime.date.resolution

while next <= datetime.date.today():
    print start, next

    con.execute("""
        select * from table where date >= %s and date < %s
    """, (start, next))

    start = next
    next = start + datetime.date.resolution 
```

**重要通知**：我更新了答案以解决一个严重的问题。永远不要**使用**字符串格式（又名`%`）来构建 SQL 查询，因为它会引发包括*SQL 注入*在内的严重问题。使用`Python-<db_driver>`几乎所有 RDMB 都提供相同语法的 api

```
execute("select * from blah where x=%s AND y=%s", (x, y))
                                     ^       ^  ^
                                     1       1  2 
```

1] 没有引号，
2] 没有字符串格式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:01:30.977

将`datetime`类与`strftime`函数一起使用。

该类`datetime`用于构建表示特定日期和时间的对象。该`strftime`函数根据您选择的格式将其转换为特定的字符串。

根据[MySQL 的文档](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)，标准的日期时间格式是`YYYY-MM-DD HH:MM:SS`.

这是一个应该有效的示例：

```
day1 = datetime.datetime(2012, 1, 1).strftime('%Y-%m-%d %H:%M:%S')
day2 = datetime.datetime(2012, 1, 2).strftime('%Y-%m-%d %H:%M:%S')
con.execute("select * from table where date >= %s and date < %s", (day1, day2)) 
```

如果您想进行其他查询，只需`datetime.datetime`在循环的每一轮中创建适当的对象。例如：

```
for i in xrange(1, 10):
    # ...
    day2 = datetime.datetime(2012, 1, i).strftime('%Y-%m-%d %H:%M:%S')
    # ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:02:30.357

使用[datetime.date](http://docs.python.org/library/datetime.html#date-objects)对象。它们是美妙的东西，因为有了它们，您可以：

*   轻松计算今天 ( `dt.date.today()`)，
*   轻松计算第二天 ( `start + dt.timedelta(days = 1)`,
*   比较日期（例如`start < end`）
*   将它们*直接*喂入`con.execute`. 无需将它们预先格式化为字符串。

* * *

```
import datetime as dt
start = dt.date(2012,1,1)
end = dt.date.today()

while start < end:
    nextday = start + dt.timedelta(days = 1)
    con.execute("select * from table where date >= %s and date < %s",
                (start, nextday))

    start = nextday 
```

# vba - 使用 VBA 在 Word 2010 中打印自定义范围或项目

> ID：12533857
> 
> 赞同：0
> 
> 时间：2012-09-21T15:48:28.367
> 
> 标签：vba, ms-word

我对 VBA（Word 2010）相当陌生，我不确定我想做的事情是否可能以我想做的方式进行，或者我是否需要调查完全不同的途径。我希望能够打印当前未作为 wdPrintOutRange 或 wdPrintOutItem 的一部分枚举的范围（或项目）。是否可以定义 wd 枚举的成员？

例如，我希望能够打印特定用户的评论。wdPrintComments 是 wdPrintOutItem 枚举的成员，但是，我只想要初始值为 JQC 的注释。我可以定义一个 wdPrintCommentsJQC 常量吗？我的代码相当简单；我有一个用户表单，允许用户选择一些设置（用户评论、仅尾注等）和一个运行按钮，其 Click 事件应生成具有适当属性的 PrintOut 方法。我在错误的轨道上吗？

（如果重要的话，我在编写代码时会知道初始值。我有一个离散列表。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T13:25:20.803

不，不可能将常量添加到预定义的枚举类型。但是，一种可能的方法是构建一个包含您要打印的项目的页码字符串，打开“对话框”集合中的打印对话框，并将其设置为打印指定范围，然后插入包含页面列表（用逗号分隔）。最后，执行打印对话框的 .show 方法将其显示给用户，让他们有机会设置任何其他项目，然后单击“确定”按钮。当我需要打印长文档的特定章节时，我做了非常相似的事情，因此我必须为用户指定“从”部分和页面以及“到”部分和页面。下面我只展示如何指定页面列表而不是“.form”和“

```
With Dialogs(wdDialogFilePrint)
  .Range = wdPrintRangeOfPages
  .Pages = "3,5,7-11"
  .show
end with 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T19:12:05.233

我不确定您要如何打印评论（或其他元素），但您可以创建另一个文档并在此文档上插入您想要打印的内容。

根据您的需要，您可以按原样（注释、脚注等）或纯文本或任何其他格式插入它们。

# android - android：eclipse不加载模拟器设备

> ID：12533858
> 
> 赞同：1
> 
> 时间：2012-09-21T15:48:37.463
> 
> 标签：android, eclipse, android-emulator

当我尝试在 Eclipse 中运行（或调试）我的项目时，AVD 模拟器模拟器正常启动，但 Eclipse 无法识别它。在 DDMS 上，设备选项卡没有找到 AVD 模拟器，因此我在 LogCat 中看不到流量。另一方面，当我插入手机并选择运行（或调试）项目时，eclipse 连接到手机并且工作正常（我在 LogCat 上的 DDMS 上看到它显示流量）。对这个有什么想法吗？

我正在使用 Eclipse_Galileo_5.2 和 Google API（API 级别 12，平台 3.1）。在问题出现之前我正在使用相同的设置，没有任何问题。

我非常感谢所有的帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:24:55.247

只需从命令行运行`adb kill-server`，然后`adb start-server`. ADB 将重新连接到正在运行的模拟器并能够使用它。不要像 bashu 建议的那样退出模拟器，因为如果您的计算机速度较慢，该问题可能会再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:25:44.783

很多时候它也发生在我身上。我要做的是，我首先**退出**模拟器。然后使用杀死 adb **`adb kill-server`**之后我**清理**项目。然后**`adb start-server`** 最后**运行**该应用程序，它对我来说很好。

谢谢。

# ajax - 在同一时刻多个ajax调用c#静态webMethod

> ID：12533863
> 
> 赞同：0
> 
> 时间：2012-09-21T15:48:49.273
> 
> 标签：ajax, request, webmethod

我在同一时刻对 c# static webMethod 进行多个 ajax 调用时遇到问题。我从来没有想过，但现在我可以用我的眼睛看到这可能是一个问题。如果两个用户同时请求相同的 webmethod，则 user2 的响应与 user1 的响应相同。例如：

*   user1 请求带有 type1 过滤器的产品
*   user2 请求带有 type2 过滤器的产品

我可以看到 user1 收到了正确的结果，但 user2 收到了与 user1 相同的结果，这不是正确的结果！

User1 和 User2 从 2 个不同的浏览器调用相同的 webmethod。

是否可以？我该如何解决？我必须在每个 webmethod 中创建一个“请求管理器”吗？非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T08:44:30.497

好的，我做了很多具体的测试，结果说这不是 ajax 问题......所以我认为我的方法是问题所在！（可能是因为它指的是我的 webMethods 外部的静态变量，例如 ObjectContext）

# .net - 如何使用 SocketAsyncEventArgs 通过代理将数据从客户端中继到服务器？

> ID：12533864
> 
> 赞同：1
> 
> 时间：2012-09-21T15:48:51.010
> 
> 标签：.net, windows, sockets, c#-4.0, socketasynceventargs

我正在开发一个接受来自多个客户端的连接的代理。代理检查来自客户端的有效令牌，如果找到令牌，它允许客户端连接到服务器。

我正在使用此[链接中的 SocketAsyncEventArgs、BufferManager 和其他详细信息](http://www.codeproject.com/Articles/83102/C-SocketAsyncEventArgs-High-Performance-Socket-Cod?display=Print)

代码如下。

我正在使用 acceptEventArgs 接受来自客户端的新连接，并使用 connectEventArgs 连接到实际服务器。如何将接收到的数据从 acceptEventArgs (AcceptSocket) 发送到 connectedEventArgs (ConnectedSocket)

//接受套接字后的代码

私有无效 ProcessAccept（SocketAsyncEventArgs acceptEventArgs）{

```
 if (acceptEventArgs.SocketError != SocketError.Success)
        {
            // Loop back to post another accept op. Notice that we are NOT
            // passing the SAEA object here.
            LoopToStartAccept();

            //AcceptOpUserToken theAcceptOpToken = (AcceptOpUserToken)acceptEventArgs.UserToken;
            //Console.WriteLine("SocketError, accept id " + theAcceptOpToken.TokenId);

            //destroy the socket, since it could be bad.
            HandleBadAccept(acceptEventArgs);

            return;
        }

        Int32 max = Program.maxSimultaneousClientsThatWereConnected;
        Int32 numberOfConnectedSockets = Interlocked.Increment(ref this.numberOfAcceptedSockets);
        if (numberOfConnectedSockets > max)
        {
            Interlocked.Increment(ref Program.maxSimultaneousClientsThatWereConnected);
        }

        Console.WriteLine("Simultaneous connections {0} ", max.ToString());
        LoopToStartAccept();

        // Get a SocketAsyncEventArgs object from the pool of receive/send op 
        //SocketAsyncEventArgs objects
        SocketAsyncEventArgs receiveSendEventArgs = this.poolOfRecSendEventArgs.Pop();

        //A new socket was created by the AcceptAsync method.
        //object which will do receive/send.
        receiveSendEventArgs.AcceptSocket = acceptEventArgs.AcceptSocket;

        //We have handed off the connection info from the
        //accepting socket to the receiving socket. So, now we can
        //put the SocketAsyncEventArgs object that did the accept operation 
        //back in the pool for them. 
        acceptEventArgs.AcceptSocket = null;
        this.poolOfAcceptEventArgs.Push(acceptEventArgs);

        //Accepting has completed now connect to the TestServer Server
        StartConnecting(receiveSendEventArgs);

    }

    private void LoopToStartAccept()
    {
        StartAccepting();
    }

    /// <summary>
    /// Connects to the TestServer Server
    /// </summary>
    /// <param name="acceptArgs"></param>       
    internal void StartConnecting(SocketAsyncEventArgs receiveSendEventArgs)
    {
        SocketAsyncEventArgs connectEventArgs;

        //Get a SocketAsyncEventArgs object to connect to  the TestServer Server.  

        //Get it from the pool if there is more than one in the pool.
        //using 1 as the lower limit for safety sake           
        if (this.poolOfConnectEventArgs.Count > 1)
        {
            try
            {
                connectEventArgs = this.poolOfConnectEventArgs.Pop();
            }
            //or make a new one.
            catch
            {
                connectEventArgs = CreateNewSaeaForConnect(poolOfConnectEventArgs);
            }
        }
        //or make a new one.
        else
        {
            connectEventArgs = CreateNewSaeaForConnect(poolOfConnectEventArgs);
        }

        //connect to the server
        IPAddress ipAddress_TestServer_ADS = new IPAddress(new byte[] { 192, 201, 240, 89 });
        int port = 8085;

        // Establish the local endpoint for the socket.
        IPEndPoint HostEndPoint = new IPEndPoint(ipAddress_TestServer_ADS, port);

        Socket serverSocket;

        // Create a TCP/IP socket.
        serverSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        serverSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, 1);
        serverSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, 1);

        connectEventArgs.RemoteEndPoint = HostEndPoint;

        //Store the receive Send event args in the UserToken
        connectEventArgs.UserToken = receiveSendEventArgs;

        //bool completedSynchronously = receiveSendEventArgs.AcceptSocket.ConnectAsync(connectEventArgs);
        bool completedSynchronously = serverSocket.ConnectAsync(connectEventArgs); 

        if (!completedSynchronously)
        {
            ProcessConnection(connectEventArgs);
        }
    }

    private void ConnectEventArg_Completed(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("ConnectEventArg_Completed, id ");

        ProcessConnection(e);

    }

    private void ProcessConnection(SocketAsyncEventArgs connectEventArgs)
    {

        //get the receiveSendEventArgs 
        SocketAsyncEventArgs receiveSendEventArgs = (SocketAsyncEventArgs)connectEventArgs.UserToken;

        // This is when there was an error with the connect operation.Close the socket
        if (connectEventArgs.SocketError != SocketError.Success)
        {
            //destroy the server socket, since it could be bad.
            HandleBadConnect(connectEventArgs);

            //destroy the client socket since its of no use either 

            return;
        }

        Console.WriteLine("Connected to TestServer Server ");

        //Read data from the client socket and the Server Socket
        StartReceive(receiveSendEventArgs, connectEventArgs);

    }

    // Set the receive buffer and post a receive op.
    private void StartReceive(SocketAsyncEventArgs receiveSendEventArgs,SocketAsyncEventArgs TestServerreceiveSendEventArgs)
    {
        //Create a state object to store the state
        StateObject state = new StateObject();

        //Set the buffer for the receive operation.
        receiveSendEventArgs.SetBuffer(state.clientReadBuffer, 0, StateObject.BUFFER_SIZE);

        //Set the buffer for the receive from TestServer operation.
        TestServerreceiveSendEventArgs.SetBuffer(state.serverReadBuffer, 0, StateObject.BUFFER_SIZE);

        state.clientSocketAsyncEventArgs = receiveSendEventArgs;
        state.serverSocketAsyncEventArgs = TestServerreceiveSendEventArgs;

        receiveSendEventArgs.UserToken = state;
        TestServerreceiveSendEventArgs.UserToken = state;

        // Post async receive operation on the socket.
        bool completedClientRecieveSynchronously = receiveSendEventArgs.AcceptSocket.ReceiveAsync(receiveSendEventArgs);
        bool completedServerReceiveSynchronously = TestServerreceiveSendEventArgs.ConnectSocket.ReceiveAsync(TestServerreceiveSendEventArgs);

        if (!completedClientRecieveSynchronously)
        {
            ProcessClientReceive(receiveSendEventArgs);

        }

        if (!completedServerReceiveSynchronously)
        {
            ProcessServerReceive(TestServerreceiveSendEventArgs);
        }
    }

    private void ProcessClientReceive(SocketAsyncEventArgs receiveSendEventArgs)
    {
        //check for Token and write to the Server socket

        // If there was a socket error, close the connection. 
        if (receiveSendEventArgs.SocketError != SocketError.Success)
        {
            CloseClientSocket(receiveSendEventArgs);
            return;
        }

        // If no data was received, close the connection. This is a NORMAL
        // situation that shows when the client has finished sending data.
        if (receiveSendEventArgs.BytesTransferred == 0)
        {
            CloseClientSocket(receiveSendEventArgs);
            return;
        }

        if (receiveSendEventArgs.BytesTransferred > 0) //write to the server side socket
        {

                //How do I write to the server socket ..do not have an handler to the server socket.
        }

    }

    private void ProcessServerReceive(SocketAsyncEventArgs TestServerreceiveSendEventArgs)
    {
        //Write to the client socket
    } 
```

# jsf - 如何访问托管 bean 中的 ui:param 值

> ID：12533865
> 
> 赞同：7
> 
> 时间：2012-09-21T15:48:50.847
> 
> 标签：jsf, jsf-2, uiinclude

我已经看到这个问题问了很多，但是没有一个得到正确的回答，所以我决定再问一次。所以如果我有这个：如果我在`A.xhtml`并且我

```
<ui:include src="B.xhtml">
    <ui:param name="formId" value="awesome Id"/>
</ui:include> 
```

所以`B.xhtml`，我可以做到这一点

```
<h:outputText value="#{formId}"/> 
```

当我运行时`A.xhtml`，我会看到`awesome Id`打印在屏幕上。但是，我如何访问`formId`支持 bean 中的值。我往里看`FacesContext.getCurrentInstance().getAttributes()`，`FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap()`我似乎找不到它。更进一步，所以我尝试：

在里面`B.xhtml`，我现在有

```
<h:inputHidden id="hiddenFormId" value="#{formId}"/>
<h:outputText value="#{formId}"/> 
```

这个想法是我可以访问under key`formId`的值。但现在如果我有：`RequestParameterMap``hiddenFormId`

```
<h:form id="myForm">
        <ui:include src="B.xhtml">
            <ui:param name="formId" value="awesome Id"/>
        </ui:include>
        <a4j:commandButton render="myForm" value="My Button"/>
</h:form> 
```

那么如果我查看 POST 请求（在 chrome 或 ff 调试模式下），我会得到这个错误

`<partial-response><error><error-name>class javax.faces.component.UpdateModelException</error-name><error-message><![CDATA[/B.xhtml @9,61 value="${formId}": /index.xhtml @27,61 value="awesome Id": Illegal Syntax for Set Operation]]></error-message></error></partial-response>`

那么**如何访问托管 bean 中的 ui:param 值？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T16:47:55.153

在`<ui:param>`幕后存储的位置实际上取决于实现。在 Mojarra 中，它存储为 的属性，[`FaceletContext`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html)因此可以在您的支持 bean 中使用，如下所示：

```
FaceletContext faceletContext = (FaceletContext) FacesContext.getCurrentInstance().getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);
String formId = (String) faceletContext.getAttribute("formId"); 
```

但是，该值是否可用取决于时间。如果您的支持代码在执行包含的呈现时正在运行，那么它将可用，否则它将是`null`.

我记得 MyFaces 的做法有点不同，但我不记得细节了，我现在手头也没有它的来源。

至于您的`<h:inputHidden>`尝试，`<h:inputHidden>`不太适合将视图定义的隐藏参数与表单提交一起传递的唯一目的。只需使用纯 HTML 代替。

```
<input type="hidden" name="hiddenFormId" value="#{formId}" /> 
```

它将作为具有该名称的请求参数提供。

# php - 在 HTML 表中显示 SQL 查询的结果

> ID：12533868
> 
> 赞同：1
> 
> 时间：2012-09-21T15:49:00.337
> 
> 标签：php, symfony1, doctrine

我卡了一会儿，我尝试在 html 表中显示执行 sql 查询的变量的结果，这是我的代码；

```
$REQUT = Doctrine_Query::create()
->select('DISTINCT r.prod , r.di, COUNT(*) as Result')
->from('tabl r')
->groupBy('r.di')
->orderBy('Result ASC') ;

$REQUT->fetchArray(); 
```

PS：我在 symfony 工作，我希望有一个类似 mysql 的视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:52:26.743

您需要遍历结果集。我不知道这个特定的 API，但假设它的工作原理与其他 API 类似：

```
$REQUT = // all that query stuff
while($ROW = $REQUT->fetchArray()) {
    // do something
    var_dump($ROW);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:43:26.303

您可以尝试将其显示为 html 表格...

```
 $REQUT = Doctrine_Query::create()
->select('DISTINCT r.prod , r.di, COUNT(*) as Result')
->from('tabl r')
->groupBy('r.di')
->orderBy('Result ASC') ;

echo "<table>";
while($ROW = $REQUT->fetchArray()) 
{

echo "<tr><td>".$ROW["prod"]."<td>";
echo "<td>".$ROW["di"]."<td></tr>";
}
echo "</table>"; 
```

# java - 如何更改 SWT ExpandBar 的背景

> ID：12533870
> 
> 赞同：1
> 
> 时间：2012-09-21T15:49:08.150
> 
> 标签：java, widget, swt, paint, graphicscontext

我有一个 rcp 应用程序，其中有扩展条，虽然默认颜色和背景在 Windows 7 中看起来不错，但我使用 Windows XP 的客户的应用程序看起来很丑陋。我环顾四周，看到很多人有同样的问题但没有解决方案。

所以我想看看有没有人想出如何改变背景`ExpandBar`。

当您尝试这样做时`setBackground(color)`，它会更改背景颜色，但会完全删除 expandItems 的所有渐变和圆角边缘。我想你可能需要画东西，但我不知道怎么画。

我附上了一张照片来展示它在默认背景下的样子，然后当我打电话时

```
expandBar.setBackground(color); 
```

[https://docs.google.com/open?id=0B7Bp7DTfaivuaEtNcGo0NThaaU0](https://docs.google.com/open?id=0B7Bp7DTfaivuaEtNcGo0NThaaU0)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:14:48.993

更改 OS 小部件背景只是 SWT API 中的一个提示。根据操作系统，它可能会或可能不会被尊重。请查看`Control.setBackground (Color color)`文档。

# sqlite - 有没有在 WinRT / XAML 中使用 Sqlite 的好示例？

> ID：12533873
> 
> 赞同：2
> 
> 时间：2012-09-21T15:49:22.033
> 
> 标签：sqlite, windows-8, winrt-xaml

很多人希望在 Windows 8 XAML 开发中会有一个数据库。但是没有什么原生的。但是，有用于 WinRT 的 Sqlite。然而，没有任何优秀的例子。有谁知道在 WinRT 中使用 Sqlite 的任何优秀示例？

这是 Sqlite 下载站点：[http ://www.sqlite.org/download.html](http://www.sqlite.org/download.html)

我看到 Tim Heuer 的文章 (http://timheuer.com/blog/archive/2012/05/20/using-sqlite-in-metro-style-app.aspx) 但它是从 6 月开始的，涉及预发布 Windows 8.

我看到 Erik Jensen 的文章 (http://erikej.blogspot.com/2012/08/getting-started-with-sqlite-in-windows.html) 非常好，但不是真正的循序渐进。

很高兴看到更多使用这项技术。

# jquery - 淡出图像无法克服淡出图像

> ID：12533875
> 
> 赞同：0
> 
> 时间：2012-09-21T15:49:29.430
> 
> 标签：jquery, html, css

我有 6 张图片，在悬停时，每张图片都会被另一个淡入淡出（使用 jQuery）的图片替换并获取初始图片。

问题是当图像淡出时，它会在原始图像之下而不是在它之上。

由于淡入/淡出效果很好，我认为这个问题属于我的 css 代码：

**CSS：**

```
#puzz {
    border-color:#000000;
    background-color:#00CC33;
    position:fixed;
    left:20%;
    top:13%;
    width:900px;
    height:650px;
}
li {
    list-style:none;
    float:left;
    list-style:none;
    padding:8px;
    margin:10px;
    line-height:10px;
    width:218px;
    height:218px;
    overflow:hidden;
    background:#99CCFF;
    /*For IE9 compatibility*/
    behavior: url(border-radius.htc);
    border-radius: 8px;
}
.fade div {
    position:absolute;
    top:auto;
    left:auto;
    display: none;
} 
```

**HTML：**

```
<div id="puzz">
    <ul>
        <li>
            <div class="fade"><img src="img7.jpg" />
                <div><img src="img8.jpg" /></div>
            </div>
        </li>
        <li>
            <div class="fade"><img src="img2.jpg" />
                <div><img src="img5.jpg" /></div>
            </div>
        </li>
        <li>
            <div class="fade"><img src="img3.jpg" />
                <div><img src="img4.jpg" /></div>
            </div>
        </li>
        <li>
            <div class="fade"><img src="img4.jpg" />
                <div><img src="img3.jpg" /></div>
            </div>
        </li>
        <li>
            <div class="fade"><img src="img5.jpg" />
                <div><img src="img2.jpg" /></div>
            </div>
        </li>
        <li>
            <div class="fade"><img src="img6.jpg" />
                <div><img src="img1.jpg" /></div>
            </div>
        </li>
    </ul>
</div> 
```

这是我得到的：

![在此处输入图像描述](../Images/ffbd909bf2b68381cd009939d1c62b5e.png)

**编辑：**

这是我使用的 jQuery 脚本：

```
$(document).ready(function () {
    // find the div.fade elements and hook the hover event
    $('div.fade').hover(function () {
        // on hovering over, find the element we want to fade *up*
        var fade = $('> div', this);    

        // if the element is currently being animated (to a fadeOut)...
        if (fade.is(':animated')) {
            // ...take it's current opacity back up to 1
            fade.stop().fadeTo(250, 1);
        } else {
            // fade in quickly
            fade.fadeIn(250);
        }
    }, function () {
        // on hovering out, fade the element out
        var fade = $('> div', this);
        if (fade.is(':animated')) {
            fade.stop().fadeTo(3000, 0);
        } else {
            // fade away slowly
            fade.fadeOut(30);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:03:28.603

[这是您的代码 (jsFiddle)](http://jsfiddle.net/87GPw/2/)，您的问题已解决。

我只是在 CSS 中进行了一些更改，以将图像“置于”另一个图像“上方”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T15:54:47.473

如果您正在使用`position:absolute`，则需要`position:relative`在父元素上指定`<li>`才能匹配原点。您还应该`top:0; left:0;`在定位项目中指定

# java - 远程调试器滞后 - 在 Eclipse 调试透视图中忽略线程

> ID：12533877
> 
> 赞同：3
> 
> 时间：2012-09-21T15:49:39.080
> 
> 标签：java, eclipse, multithreading, remote-debugging

我有一个必须调试的包含数百个线程的程序。如果我没有启用任何断点，则在附加调试器的情况下运行大约需要 3 秒。启用断点后，调试器大约需要两分钟才能显示我们已暂停。单击恢复后，程序立即完成，但调试器又需要两分钟才能显示线程已恢复。

我无法摆脱所有线程。我和远程点之间的网络相当快，通过文件传输，我在每个方向上都获得了大约 300KB。我没有看到太多日食网络活动。

如果可能，我想了解这种滞后并摆脱它。如果它是由网络上的所有线程状态引起的，我想忽略我不关心的线程。

我想忽略数百个其他线程，除了我需要调试的那个。或者可能忽略所有这些，直到遇到断点。

如果存在这样的功能，我想使用它。如果没有，我想创建它。

所以，至于一个直接的问题：我怎样才能加快我的远程调试速度？

**编辑**

我正在测试系统上运行网络服务器类型的程序。唯一从外部访问它的人是我，所以网络服务器的东西不应该干扰任何其他网络流量。

# c# - 将数据存储到数组中并检查它是否为有效整数

> ID：12533879
> 
> 赞同：2
> 
> 时间：2012-09-21T15:49:43.427
> 
> 标签：c#

我目前正在将数据存储到数组中。该程序从文本文件中获取信息，然后使用产品名称格式化结果。问题是，如果在文本的起始行中发现的不是数字（int），文件就会中断。具体在`productID = Convert.ToInt16(storeData[0]);`. 如果文本文件中的第一个字符不是整数，如何避免破坏程序？

信息在文本文件中的显示方式：ProductID、Month 和 Sales

`1 5 20.00`

**代码**

```
string[] productName = new string[100];
                string arrayLine;
                int[] count = new int[100];
                int productID = 0;
                double individualSales = 0;
                double[] totalSales = new double[100];
                double[] totalAverage = new double[100];

                productName[1] = "Cookies";
                productName[2] = "Cake";
                productName[3] = "Bread";
                productName[4] = "Soda";
                productName[5] = "Soup";
                productName[99] = "Other";                                      

                while ((arrayLine = infile.ReadLine()) != null)
                {

                    string[] storeData = arrayLine.Split(' ');

                    productID = Convert.ToInt16(storeData[0]);
                    individualSales = Convert.ToDouble(storeData[2]);

                    if (stateName[productID] != null)
                    {
                        count[productID] += 1;
                        totalSales[stateID] += individualSales;
                    }
                    else
                    {
                        count[99] += 1;
                        totalSales[99] += individualSales;
                    }

                }
                infile.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:51:58.897

```
if (!Int16.TryParse(storeData[0], out productID))
   continue;//or do something else 
```

[Int16.TryParse](http://msdn.microsoft.com/en-us/library/system.int16.tryparse%28v=vs.100%29.aspx)

正如格罗默所说，我宁愿使用`int.TryParse`（实际上是`Int32.TryParse`）......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:53:27.750

尝试替换`productID = Convert.ToInt16(storeData[0]);`为：

```
if (Int16.TryParse(storeData[0], out productID))
{
     //do somthing
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T15:55:10.697

TryParse 可以帮助您：

```
if(Int16.TryParse(storeData[0], out productId))
{
    //do stuff
}
else
{
    //wasn't valid
} 
```

# visual-c++ - Platform::String 真的那么没用吗？

> ID：12533883
> 
> 赞同：11
> 
> 时间：2012-09-21T15:49:58.803
> 
> 标签：visual-c++, windows-8, windows-runtime, c++-cx

我正在尝试在“Windows Store”（又名 Metro Style）应用程序中用 C++/CX 编写几行代码，我很惊讶地看到[Platform::String](http://msdn.microsoft.com/en-us/library/windows/apps/hh755812.aspx)缺少许多基本的字符串操作，例如[“replace”](http://msdn.microsoft.com/en-us/library/system.string.replace.aspx)或[“的索引”](http://msdn.microsoft.com/en-us/library/system.string.indexof%28v=vs.71%29.aspx)。

我想我可以使用内部数据，将其传递给 std:string 实例并应用我需要的操作，但我想知道我是否遗漏了一些“仅限平台::*”的方式来执行这些操作。

*请注意这个问题是关于 C++/CX，而不是 C#。*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T16:55:12.327

Windows 运行时字符串类型[`HSTRING`](http://msdn.microsoft.com/en-us/library/br205775.aspx)是不可变的并且是引用计数的。

C++/CX 中的类型`Platform::String`只是类型和它支持的少数操作的包装器（请参阅[Windows 运行时 C++ 函数](http://msdn.microsoft.com/en-us/library/br205774.aspx)列表中`HSTRING`以开头`Windows`的函数）。

没有改变字符串的操作，因为字符串类型是不可变的（因此没有`Replace`）。有一些非变异操作（肯定少于 C++ 的`std::wstring`）。

`Platform::String`确实提供了将随机访问迭代器返回到字符串中`Begin()`的`End()`成员函数（以及非成员`begin()`和`end()`重载）（它们返回指针`wchar_t const*`， 和指针是有效的随机访问迭代器）。您可以将这些迭代器与任何采用随机访问迭代器的 C++ 标准库算法一起使用，并且不会尝试改变底层序列。例如，考虑使用`std::find`查找字符第一次出现的索引。

如果您需要更改字符串，请使用`std::wstring`or `std::vector<wchar_t>`。理想情况下，请考虑`std::wstring`在您的程序中尽可能多地使用 C++，并且仅`Platform::String`在需要与其他 Windows 运行时组件互操作的地方（即跨 ABI 边界）使用 C++/CX。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-21T16:39:51.417

那是因为它不打算成为 std::string 的替代品。从文档：

> Platform::String 类为几种常见的字符串操作提供了方法，但它并没有被设计成一个功能齐全的字符串类。在您的 C++ 模块中，使用标准 C++ 字符串类型（例如 wstring）进行任何重要的文本处理，然后将最终结果转换为 Platform::String^，然后再将其传递到公共接口或从公共接口传出。

[http://msdn.microsoft.com/en-us/library/windows/apps/hh699879.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh699879.aspx)

所以底线是：`std::wstring`像以前在 C++ 中一样使用，并且只`Platform::String`在需要时转换。

我认为这样可能会更好，因为`Platform::String`它有一些非常令人困惑的语义（例如`nullptr`，空字符串是同一件事，所以`ref new String() == nullptr`是真的）。

# java - 无法计算构建计划：无法解析插件 org.apache.maven.plugins:maven-resources-plugin:2.5 或其依赖项之一

> ID：12533885
> 
> 赞同：187
> 
> 时间：2012-09-21T15:50:12.583
> 
> 标签：java, eclipse, maven, jakarta-ee, m2eclipse

```
org.apache.maven.plugin.PluginResolutionException: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5
    at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:129)
    at org.eclipse.m2e.core.internal.project.registry.EclipsePluginDependenciesResolver.resolve(EclipsePluginDependenciesResolver.java:48)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getPluginDescriptor(DefaultMavenPluginManager.java:142)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getMojoDescriptor(DefaultMavenPluginManager.java:261)
    at org.apache.maven.plugin.DefaultBuildPluginManager.getMojoDescriptor(DefaultBuildPluginManager.java:185)
    at org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator.setupMojoExecution(DefaultLifecycleExecutionPlanCalculator.java:152)
    at org.eclipse.m2e.core.internal.embedder.MavenImpl.setupMojoExecution(MavenImpl.java:386)
    at org.eclipse.m2e.core.internal.project.registry.ProjectRegistryManager.setupMojoExecution(ProjectRegistryManager.java:865)
    at org.eclipse.m2e.core.internal.project.registry.MavenProjectFacade.getMojoExecution(MavenProjectFacade.java:355)
    at org.eclipse.m2e.core.project.configurator.AbstractCustomizableLifecycleMapping.getBuildParticipants(AbstractCustomizableLifecycleMapping.java:66)
    at org.eclipse.m2e.core.project.configurator.AbstractLifecycleMapping.configure(AbstractLifecycleMapping.java:87)
    at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.updateProjectConfiguration(ProjectConfigurationManager.java:414)
    at org.eclipse.m2e.core.internal.project.ProjectConfigurationManager.updateProjectConfiguration(ProjectConfigurationManager.java:351)
    at org.eclipse.m2e.core.ui.internal.UpdateMavenProjectJob.runInWorkspace(UpdateMavenProjectJob.java:74)
    at org.eclipse.core.internal.resources.InternalWorkspaceJob.run(InternalWorkspaceJob.java:38)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: org.sonatype.aether.resolution.ArtifactDescriptorException: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.loadPom(DefaultArtifactDescriptorReader.java:296)
    at org.apache.maven.repository.internal.DefaultArtifactDescriptorReader.readArtifactDescriptor(DefaultArtifactDescriptorReader.java:186)
    at org.sonatype.aether.impl.internal.DefaultRepositorySystem.readArtifactDescriptor(DefaultRepositorySystem.java:279)
    at org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver.resolve(DefaultPluginDependenciesResolver.java:115) 
```

我读过很多人可以通过以下方式解决这个问题的地方：

*   从本地存储库中删除文件夹并让它重新下载（这**不起作用**）

*   通过将 eclipse 配置为针对您的 maven 安装而不是此处描述的嵌入式安装（这**不起作用**）

    [无法计算构建计划：artifact org.apache.maven.plugins:maven-resources-plugin:pom:2.4.3 在本地存储库中不可用](https://stackoverflow.com/questions/7378279/could-not-calculate-build-plan-artifact-org-apache-maven-pluginsmaven-resource)

**我是 Maven 新手，**所以请原谅我的无知。

这个项目正在另一台机器上工作，只是从这台机器上的存储库中拉下来，安装了相同版本的 eclipse 和 m2e 插件。我已经用这个玩了 10 多个小时了，这让我发疯了（到目前为止，Maven 对我来说只是头疼......）

### 编辑

仔细观察后，我确实注意到它没有将 .jar 文件下载到本地存储库中……我不确定这是否很明显……

我没有选择将 Maven 依赖项添加到构建路径。

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-07-23T05:40:47.427

我有同样的问题。

```
[ERROR] Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5: Failure to find org.apache.maven.plugins:maven-resources-plugin:pom:2.5 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced -> [Help 1]
... 
```

安装了 maven 3.0.5，安装了 JBoss Dev Studio 7 的 eclipse Kepler。坐在内部网络上的计算机，具有到 Internet 的代理。这就是我所做的。

**0\. 检查 maven 存储库服务器是否已启动**

**1.检查代理是否设置并正常工作**

首先我认为这是一个代理问题，我确保 maven settings.xml 包含代理设置（settings.xml 可以存在于两个地方，一个在 MAVEN_HOME。另一个在 %userprofile%.m2\ 中，后者具有更高的优先级） ：

```
<proxy>
  <id>optional</id>
  <active>true</active>
  <protocol>http</protocol>
  <username>optional-proxyuser</username>
  <password>optional-proxypass</password>
  <host>proxy.host.net</host>
  <port>80</port>
  <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
</proxy> 
```

并通过尝试 telnet 来检查代理是否正常工作：

```
telnet [proxy] [port number] 
```

**2.检查不是Eclipse问题**

在eclipse之外的命令行级别运行'mvn compile' - 同样的问题。

如果'mvn compile'有效。但是在eclipse中使用maven插件不起作用，见[Maven plugin not using eclipse's proxy settings](https://stackoverflow.com/questions/7737710/maven-plugin-not-using-eclipses-proxy-settings)

**3.检查不缓存问题** 删除了我本地maven存储库中的所有内容。（默认位置：~/.m2/repository）然后重新运行 maven - 出现了同样的问题。

**4\. 什么对我有用**

***自动下载和安装缺少的插件：*** 通过在插件管理的 POM 文件构建部分中声明缺少的插件，Maven 将自动检索所需的插件。在 POM 文件中，为您需要的插件版本添加以下代码：

```
 <build>
        <pluginManagement>
          <plugins>
            <plugin>
              <artifactId>maven-resources-plugin</artifactId>
              <version>2.7</version>
            </plugin>           
          </plugins>
        </pluginManagement>   
    </build> 
```

***手动安装缺少的插件：*** 我去了[http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin/2.5](http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin/2.5)并下载[了maven-resources-plugin-2.5.jar](http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.jar)和[maven-resources-plugin -2.5.pom](http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.5/maven-resources-plugin-2.5.pom)。将其直接复制到 maven 存储库中的正确文件夹（~/.m2/repository/org/apache/maven/plugins/maven-resources-plugin/2.5）并重新运行“mvn compile”。这解决了问题。

* * *

**编辑1**

在此之后，我对“mvn install”还有两个问题：

```
The POM for org.apache.maven.plugins:maven-surefire-plugin:jar:2.10 is missing, no dependency information available

The POM for org.apache.maven.plugins:maven-install-plugin:jar:2.3.1 is missing, no dependency information available 
```

我以与上述相同的方式解决了这个问题，从[http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-surefire-plugin/2.10](http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-surefire-plugin/2.10)和[http://mvnrepository.com/artifact/org 下载。 apache.maven.plugins/maven-install-plugin/2.3.1](http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-install-plugin/2.3.1)

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-09-28T11:47:31.647

我遇到了完全相同的问题，并且由于我在某处读到该错误是由缓存文件引起的，因此我通过删除 .m2 存储库文件夹下的所有文件来修复它。下次我构建项目时，我不得不再次下载所有依赖项，但这是值得的 - 0 个错误！

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-09-26T14:36:06.620

几件事要尝试：

1.  仔细检查文件中配置的本地工件存储库的`settings.xml`位置（在以下位置`{your home folder}/.m2/settings.xml`）。您确定本地仓库在您认为的位置吗？（是的，我过去犯的一个错误......）
2.  删除新构建机器上工件 repo 的全部内容（或至少与 Maven 相关的任何内容）。您提到了进行一些工件回购清理，但我不确定您删除了哪个目录。当一个罐子损坏时，我遇到了像这样的奇怪问题。
3.  确保您有足够的磁盘空间/配额用于本地工件存储库。当我没有足够大的配额来容纳所有工件时，我遇到了奇怪的问题，这可能是由部分下载的 jar 文件引起的。
4.  尝试在命令行上使用普通的 Maven 运行；将 Eclipse 和 m2e 排除在外。 `mvn -U dependency:resolve`应该这样做。无论您的存储库更新策略是什么， -U 都会强制 Maven 下载。添加`-X`以获取详细的调试日志记录。
5.  将 settings.xml 从 MAVEN_HOME\conf\ 复制到 USER_HOME.m2。如果您在代理服务器后面，请添加代理（如果需要）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-02-23T12:37:06.930

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-06-23T14:21:28.203

我在使用 eclipse kepler 和 maven 3.2 版时遇到了同样的问题，

在构建项目时，它在 eclipse 中向我显示了同样的错误

插件有两个版本（2.5 和 2.6）

```
.m2/repository/org/apache/maven/plugins/maven-resources-plugin/ 
```

我删除了 2.5 版本，然后它对我有用

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2014-10-04T03:11:54.360

看来这个问题可能有很多不同的原因。我是在安装新版本的 Eclipse（Luna）后体验到的。命令行 maven 运行良好，但 Eclipse 存在构建问题。

我在我的 JRE 中使用了证书颁发机构。这很重要，因为它在下载 Maven 资源时提供了我的身份验证。即使我的项目指向 Eclipse 内的适当 JRE - Eclipse 正在使用不同的 JRE 运行（这很明显可以查看 Windows 任务管理器中的 Java 进程属性）。我的解决方案是在我的 eclipse.ini 中添加以下内容并明确定义我要使用的 JRE。

```
-vm
C:\Program Files\Java\jdk1.7.0_51\bin\javaw.exe 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2013-07-18T13:26:33.373

我的问题是配置文件的位置。

在 Eclipse 设置（Windows->preferences->maven->User Settings）中，maven 的默认配置文件指向`C:\users\*yourUser*\.m2\settings.xml`. 如果您解压缩 maven 并将其安装在您选择的文件夹中，该文件将在里面`*yourMavenInstallDir*/conf/`，因此可能不是 eclipse 认为的（我的不是）。如果是这种情况，maven 将无法正确加载。您只需要设置“用户设置”路径以指向正确的文件。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-05-29T20:00:54.463

您应该 `Force Update Snapshots/Releases`在使用 maven 更新项目时进行检查。它对我有用:-)。[![强制更新快照/发布](../Images/16970cf65b7a672a396b881771f650f1.png)](https://i.stack.imgur.com/tAid7.png)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-10-25T18:26:37.457

本地存储库中缺少某些文件。通常在`${user.home}/.m2/repository/`

Neets回答解决了这个问题。但是，如果您不想再次将所有依赖项下载到本地存储库，则可以将缺少的依赖项添加到您的项目中并编译它。

使用 maven 存储库网站查找依赖项。在您的情况下， [http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin/2.5](http://mvnrepository.com/artifact/org.apache.maven.plugins/maven-resources-plugin/2.5)丢失了。

将列出的 XML 复制到项目的 pom.xml 文件中。在这种情况下

```
<dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.5</version>
</dependency> 
```

`mvn compile`在 pom.xml 的根文件夹中运行。Maven 将下载所有缺少的依赖项。下载后，您可以删除添加的依赖项。

现在您应该能够导入 maven 项目或更新项目而不会出现错误。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-11-16T15:21:18.227

尝试删除所有目录`/usr/share/maven-repo`- 当然，maven 会死，所以你必须重新安装并重试。在我的情况下，从 maven ver.3 重新安装。删除所有存储库对 maven2 有帮助。

我尝试从 .m2 中删除所有内容，但这没有帮助。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2014-02-07T19:47:36.380

我发现，虽然 m2e 默认在寻找 v2.5，但我的本地 repo 有 2.6 而没有 2.5。

无需调查这是如何发生的，只需将依赖项添加到 pom 即可解决问题

```
<dependency>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
</dependency> 
```

这可以在运行一次构建后删除

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-03-27T17:52:36.423

一个更微妙的原因可能是 Settings.xml 文件在 doctype 之前的第一行有一个空格

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-08-21T09:31:20.807

希望我的聚会不会迟到。

使用 Eclipse Kepler 和 Maven 3.1 遇到了这个问题。

解决方案是为您的 Eclipse 项目使用 JDK 而不是 JRE。确保从 Eclipse 中尝试 maven clean 和测试只是为了下载丢失的 jar。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-01-23T05:48:44.217

```
his issue is happening due to change of protocol from http to https for central repository. please refer following link for more details. https://support.sonatype.com/hc/en-us/articles/360041287334-Central-501-HTTPS-Required 

In order to fix the problem, copy following into your pom.ml file. This will set the repository url to use https.

<repositories>
        <repository>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>central</id>
            <name>Central Repository</name>
            <url>https://repo.maven.apache.org/maven2</url>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <releases>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>central</id>
            <name>Central Repository</name>
            <url>https://repo.maven.apache.org/maven2</url>
        </pluginRepository>
    </pluginRepositories> 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-09-03T11:43:43.893

就我而言，我正在使用带有 m2e 的外部 maven 安装。我已将代理设置添加到外部 maven 安装的 settings.xml 文件中。即使在我将外部 maven 安装设置为默认 maven 安装之后，m2e 也没有使用这些设置。

为了解决这个问题，我将 eclipse 中的全局 maven 设置文件配置为我的外部 maven 安装中的 settings.xml 文件。

现在eclipse可以下载所需的工件了。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-11-03T04:58:39.780

大多数人会告诉您检查您的代理设置或删除并重新添加工件，但我会远离它并给出另一个建议，以防万一这不是您的问题。这可能是您的镜像设置。

如果您在办公室使用 maven，那么很有可能将 maven 配置为查找您公司的内部 maven 存储库。如果您在家里做一些工作并且您没有连接到网络，这可能是问题所在。一个明显的解决方案可能是使用 VPN 连接到办公室，以获取此存储库的可见性。解决此问题的另一种方法是将另一个镜像站点添加到您的 /User/.m2/settings.xml 文件中，这样如果它无法在您的办公网络上找到它，它将尝试公共 repo。

```
<mirror>
    <id>Central</id>
    <url>http://repo1.maven.org/maven2</url>
    <mirrorOf>central</mirrorOf>
    <!-- United States, St. Louis-->
</mirror> 
```

对于其他 maven 存储库，请查看此处：[http ://docs.codehaus.org/display/MAVENUSER/Mirrors+Repositories](http://docs.codehaus.org/display/MAVENUSER/Mirrors+Repositories)

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2013-08-11T16:02:49.790

我有同样的问题，但有其他原因。解决方案是停用 Avira 浏览器保护（德语 Browser-Schutz）。我从 m2e 中获得了解决方案，[无法从 nexus 传输元数据，但 maven 命令行可以](https://stackoverflow.com/questions/15020441/m2e-cannot-transfer-metadata-from-nexus-but-maven-command-line-can)。它可以再次激活，maven 有需要的插件。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2016-08-25T11:33:55.633

如果您在 Maven 的**settings.xml**中配置了存储库，请检查您是否有权访问它。

当我遇到这个问题时，**settings.xml**中配置了企业存储库，但我不在公司。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-07-30T11:11:24.323

在 settings.xml 中输入代理设置后

```
<proxies>
<!-- proxy 
 | Specification for one proxy, to be used in connecting to the network.
 |  -->
<proxy>
  <id>optional</id>
  <active>true</active>
  <protocol>http</protocol>
  <username>DOMAIN\YOURID</username>
  <password>123456</password>
  <host>proxy.company.com</host>
  <port>8080</port>
  <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
</proxy>

</proxies> 
```

检查下面的标签是否在 settings.xml 中的值为 false

```
<offline>false</offline> 
```

这对我有帮助。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-06-15T11:24:49.860

除了@JackDev 回复的内容之外，还解决了我的问题是

1）安装jdk目录下不带空格：

```
C:/Java 
```

代替

```
C:/Program Files/Java 
```

这是 Windows 中的一个已知问题。我也修好`JAVA_HOME`了

2) 在 Java 案例中安装 maven，在`C:/Maven`. 相应地修复了`M2_HOME`。

3）我在笔记本电脑上安装了 java 7 和 java 8。所以我使用`eclipse.ini`. 如果您`-vm`的`eclipse.ini`. 我更新了：

```
C:/Java/jdk1.7.0_79/jre/bin/javaw.exe 
```

代替：

```
C:/Java/jdk1.7.0_79/bin/javaw.exe 
```

祝你好运

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-12-15T05:56:49.390

在我将默认存储库更改为另一个文件夹后，JackDev 的选项 3 对我有用。

下面是我在 M2E 插件自动下载 maven-resources-plugin-2.6 后看到的。如果您想采用手动方法，也许这会给您一些提示。必要的文件可以从这里下载：[https ://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.6/](https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-resources-plugin/2.6/)

![在此处输入图像描述](../Images/815c66efc0c3e36ca2e663657c7c996b.png)

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-04-07T07:59:27.663

如果您有代理，您还必须清除 SOCKS

```
Window > Preferences > Network Connections. 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-06-07T07:22:51.437

我已经将我的项目转移到另一台机器上，将我所有的 maven 库从旧机器复制到新机器，右键单击我的项目 >> Maven >> 更新项目。然后建立我的项目。除此之外，我还完成了屏幕截图中显示的这一步骤。这就是它的全部工作！

转到 Window --> Preferences --> Maven --> User Setting，确保你有这些设置..
[![在此处输入图像描述](../Images/afcbfa193ef48ae68f36affcbdce845f.png)](https://i.stack.imgur.com/jGwxi.png)

还右键单击您的项目--> 属性--> Maven，并确保您在此处具有 maven 存储库的路径..
[![在此处输入图像描述](../Images/f09941315da9a21140c4d91c9988b150.png)](https://i.stack.imgur.com/QsxUr.png)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-06-11T15:05:36.557

很老的东西。

解决了修复 localRepository 的问题`settings.xml`。该文件是从我的另一台计算机复制的，.m2 存储库的路径不一样。

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">

  <localRepository>C:\Users\foo\.m2</localRepository>

</settings> 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-03-05T13:53:22.827

我可以通过以下步骤解决问题

1.  单独安装 Maven
    [https://www.mkyong.com/maven/how-to-install-maven-in-windows/](https://www.mkyong.com/maven/how-to-install-maven-in-windows/)

2.  在 Eclipse 中设置外部 Maven 安装
    [![在此处输入图像描述](../Images/e8073f54e87071f160645f044e23bf15.png)](https://i.stack.imgur.com/ZEYto.png)

3.在Maven安装的settings.xml中设置代理
（C:\path\apache-maven-3.6.0\conf）

```
<proxy>
 <id>optional</id>
 <active>true</active>
 <protocol>http</protocol>
 <username>optional-proxyuser</username>
 <password>optional-proxypass</password>
 <host>proxy.host.net</host>
 <port>80</port>
 <nonProxyHosts>local.net|some.host.com</nonProxyHosts>
</proxy> 
```

4.  更新 Maven 用户设置 [![在此处输入图像描述](../Images/f9c01c1ce639123bc187937ab90d84c6.png)](https://i.stack.imgur.com/an6rr.png)

5.  更新 Maven 项目
    [![在此处输入图像描述](../Images/289920025b3b5f33268ea32b673098af.png)](https://i.stack.imgur.com/3cqr4.png)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-09-06T16:25:32.487

如果您在公司工作，他们可能会阻止您下载和安装外部软件。您可能需要手动安装插件或重新指向内部镜像存储库。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-09-28T06:07:12.797

我遇到了同样的问题。

我刚刚从以下站点安装了 m2e (Maven2Eclipse) 插件：

```
http://www.eclipse.org/m2e/ 
```

Eclipse>帮助>安装新软件>可用软件站点>添加

```
Name: m2e (any name is OK)
Location:m2e - http://download.eclipse.org/technology/m2e/releases/ 
```

在安装窗口> 使用：

选择这个新位置并添加所有出现的插件。Eclipse 重新启动，它运行正常，以前没有错误。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-07-03T12:22:24.463

为了解决这个问题，我尝试了以下方法：（我正在使用 eclipse IDE）

1.  转到位置：**C:\User\local.m2\setting.xml**
2.  在任何编辑器中打开 setting.xml 文件。
3.  像我一样评论代理设置（参见下面的 setting.xml 文件）。
4.  然后转到eclipse并执行Maven更新：右键单击您的解决方案文件夹（您的项目）->选择Maven->更新项目。
5.  希望它会像我一样对你有用。

```
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/SETTINGS/1.0.0"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:schemaLocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd">
<!--
    <proxies>
        <proxy>
            <id>optional</id>
            <active>true</active>
            <protocol>http</protocol>
            <username>proxyuser</username>
            <password>proxypass</password>
            <host>proxy.host.net</host>
            <port>80</port>
        <nonProxyHosts>local.net|some.host.com</nonProxyHosts>  
        </proxy>
    </proxies>
    -->
</settings>
```

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2018-02-26T14:57:55.640

尝试下载不同版本的 Maven。我对 maven 3.5.2 也有同样的问题，我只下载了 maven 3.0.4 就解决了我的问题

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-11-17T15:32:55.673

我在 Ubuntu 18.04 上使用 Eclipse 时遇到了同样的问题。我试过了：

1.  设置 settings.xml 文件没有结果；
2.  强制重建项目，同样的错误；
3.  使用@JackDev 的建议。但是当我去单独下载每个资源时，我注意到 wget 由于[https://repo1.maven.org](https://repo1.maven.org)上的自签名证书而失败。这提供了原因的线索。

我暂时关闭了服务器的病毒防御，并且能够从 Eclipse 内部正确构建。我在这里提到这一点，以防其他人看到同样的限制。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-08-27T16:33:14.060

我面临同样的问题，以上都不起作用，比如通过更新 MVN 也同样的错误，通过构建也是相同的，在 settings.xml 中输入了详细信息，即使是同样的问题。

在那之后，我再次尝试并做了一些以前没有做过的不同的事情并且它有效。

> 很简单，我在更新 Mvn 项目时点击了强制更新。通过右键单击 pom 文件，在 Maven 下有一个选项“更新项目”，它会打开一个弹出窗口来选择更新选项。请确保已选中强制更新，默认情况下未选中。宾果游戏，就像魅力一样！

# c# - 订阅 NavigationService 页面中的属性更改

> ID：12533886
> 
> 赞同：0
> 
> 时间：2012-09-21T15:50:12.973
> 
> 标签：c#, windows-phone-7

我真的坚持这一点，主要是因为我不太了解事件处理。

我有一个从 MainPage.XAML 调用的 ProcessManager.XAML 页面。如果我对 ProcessManager.XAML 中的列表进行更改，例如添加一个过程，我需要 MainPage.XAML 才能知道它已经发生。任何人都可以向我解释如何做到这一点，目前我有一个布尔值，当列表发生更改时会更改为 true，但我不知道如何让 MainPage.XAML 知道它已更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:55:19.990

您需要在两个页面上都可以看到一个变量。

最简单的方法是在 App.xaml.cs中创建一个“全局”*布尔 HasChanged*

```
public bool HasChanged = false; 
```

然后您可以从应用程序中的任何位置访问它，如下所示：

```
(Application.Current as App).HasChanged = true; 
```

的

```
if ((Application.Current as App).HasChanged)
    MessageBox.Show("CHANGE CHANGE"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:56:21.677

我最终得到了它。我以前从未做过的一个简单的事件实现解决了它。我使用以下作为模板： [简单事件处理程序](http://www.codeproject.com/Articles/11541/The-Simplest-C-Events-Example-Imaginable)

# jquery - jquery mobile可搜索数据隐藏

> ID：12533888
> 
> 赞同：1
> 
> 时间：2012-09-21T15:50:21.613
> 
> 标签：jquery, search, jquery-mobile

[http://jquerymobile.com/test/docs/lists/lists-search.html](http://jquerymobile.com/test/docs/lists/lists-search.html)

我想用jquery mobile创建一个这样的过滤器，而不必查看数据而只显示过滤器的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:53:10.890

编辑：最后我得到了这个代码给你。

jQuery：

```
$(document).ready(function() {
    $('#mylist li').addClass('ui-screen-hidden');

    $('input[data-type="search"]').keyup(function() {
        if ($(this).val() === '') {
            $('#mylist li').addClass('ui-screen-hidden');
        } else {
            $('#mylist li').removeClass('ui-screen-hidden');
        }

        $(this).trigger('change');
    });

});​ 
```

链接：http: [//jsfiddle.net/6Vu4r/206/](http://jsfiddle.net/6Vu4r/206/)

# git - 如何配置 git 以在每次拉取时自动获取标签？

> ID：12533890
> 
> 赞同：15
> 
> 时间：2012-09-21T15:50:32.393
> 
> 标签：git

这可能是一个非常愚蠢的想法，也可能不是一个非常愚蠢的想法，但是您如何配置一个 git 存储库，以便完成的任何拉取操作也会自动从另一个存储库获取标签？

根据[docs](http://git-scm.com/docs/git-config)，您似乎可以在每个远程存储库的基础上执行此操作：

> remote.<name>.tagopt
> 将此值设置为 --no-tags 会在从远程 <name> 获取时禁用自动标记跟踪。将其设置为 --tags 将从远程 <name> 获取每个标签，即使它们无法从远程分支头访问。将这些标志直接传递给 git-fetch(1) 可以覆盖此设置。请参阅 git-fetch(1) 的选项 --tags 和 --no-tags。

有没有办法让`--tags`每次提取都获取默认标志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-22T08:51:55.203

[`git fetch`](http://git-scm.com/docs/git-fetch)获取标签与获取提交 ( )具有不同的效果，如“ [“git fetch --tags”是否包含“git fetch](https://stackoverflow.com/a/1208223/6309) ”中所述。

后者将更新分支头，并且实际上会从这些更新的分支中获取可访问的标签。
前者将获取所有标签，但不会更新分支头。

因此，如果您的标签可以从您正在获取的分支中访问，则默认情况下您不必包含`--tags`。

考虑到一些 repos（包括[linux one](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=summary)）的大量历史，总是想要获取*所有*标签可能会导致标签列表混乱（标签列表被数百个不需要的标签污染）。

* * *

请注意，从 git 1.9/2.0（2014 年第一季度）开始，`git fetch --tags`将获取所有内容（如`git fetch`）以及标签。请参阅“ [“<code>git fetch --tags”是否包含“<code>git fetch”？](https://stackoverflow.com/a/20608181/6309) ”。

> 请求从远程获取所有标签以及**正在获取的任何其他**标签。

所以你可以尝试[`remote.<name>.tagOpt` 配置选项](https://git-scm.com/docs/git-config#git-config-remoteltnamegttagOpt)：

```
git config (--global) remote.<name>.tagOpt --tags 
```

> 将其设置为`--tags`将从 remote 获取每个标签`<name>`，即使它们无法从远程分支头访问。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-12T22:35:29.423

只需将其添加到遥控器的配置中：

```
fetch = +refs/tags/*:refs/tags/* 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-03-06T18:11:15.553

您可以使用`git config`[1] 进行设置：

```
git config remote.origin.tagopt --tags 
```

要全局设置它，只需添加`--global`开关：

```
git config --global remote.origin.tagopt --tags 
```

[1] [https://git-scm.com/docs/git-config#Documentation/git-config.txt-remoteltnamegttagOpt](https://git-scm.com/docs/git-config#Documentation/git-config.txt-remoteltnamegttagOpt)

# php - 获取单独的值而不是在循环内获取值

> ID：12533892
> 
> 赞同：0
> 
> 时间：2012-09-21T15:50:40.860
> 
> 标签：php, for-loop

我正在使用 for 循环，它返回 3 个 id。但是如何将这三个 id 分开而不是放在 for 循环中。我的代码是

```
 <? $meta = get_post_custom_keys();
            $prev = '';
            foreach ($meta as $key) {
                $parts = explode (':', $key);
                if (count ($parts) == 1 || $parts[0] != 'download')
                    continue;
                $value = get_post_meta (get_the_ID(), $key, true);
                echo "<a href='$value'>{$parts[1]}</a>";

            }
        ?> 
```

现在在上面的 echo`"<a href='$value'>{$parts[1]}</a>";`每次运行时都会获得 3 个不同的 $values 值，但是如何将这些 id 分开，例如 value 1 、 value 2 和 value 3 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:54:55.863

您可以将 $value 存储在数组中`$value[] = get_post_meta (get_the_ID(), $key, true);`

# javascript - History.js 在初始浏览器窗口加载后未触发

> ID：12533893
> 
> 赞同：2
> 
> 时间：2012-09-21T15:50:45.163
> 
> 标签：javascript, jquery, history.js

```
 $(function(){

        // Prepare
        var History = window.History; // Note: We are using a capital H instead of a lower h
        if ( !History.enabled ) {
             // History.js is disabled for this browser.
             // This is because we can optionally choose to support HTML4 browsers or not.
            return false;
        }

        // Bind to StateChange Event
        History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
            var State = History.getState(); // Note: We are using History.getState() instead of event.state
            History.log(State.data, State.title, State.url);
        });
}); 
```

我正在尝试使用 history.js 作为跟踪状态更改（前进和后退按钮）的一种方式，并且似乎只有当我打开一个新的浏览器窗口并从那里工作时才会触发 window.statechange。记录最初的前进和后退事件，但不记录后续事件。

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-27T04:00:28.833

我意识到这个问题很老了。解决方案是将 statechange 函数移到 body load 函数之外：

```
// Bind to StateChange Event
History.Adapter.bind(window,'statechange',function(){ // Note: We are using statechange instead of popstate
    var State = History.getState(); // Note: We are using History.getState() instead of event.state
    History.log(State.data, State.title, State.url);
});

$(function(){

    // Prepare
    var History = window.History; // Note: We are using a capital H instead of a lower h
    if ( !History.enabled ) {
         // History.js is disabled for this browser.
         // This is because we can optionally choose to support HTML4 browsers or not.
        return false;
    }

}); 
```

# asp.net - 内部链接的 UrlRouting

> ID：12533901
> 
> 赞同：0
> 
> 时间：2012-09-21T15:51:09.997
> 
> 标签：asp.net, routing

如何使用 asp.net 4.0 路由方案来导航其他页面中的内部链接

原始页面是这样的 about.aspx#CEO 我用 about/CEO 做了很多尝试

没门！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T11:04:59.593

你可以阅读这个 - 基于`Page.GetRouteUrl`方法

链接：[http ://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-系列.aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

链接：http: [//msdn.microsoft.com/en-us/library/dd329551%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/dd329551%28v=vs.100%29.aspx)

在你的`Global.asax`文件中

```
void Application_Start(object sender, EventArgs e)
{
    RegisterRoutes(RouteTable.Routes);
}

void RegisterRoutes(RouteCollection routes)
{
   routes.MapPageRoute("test", "about/CEO",  "~/about.aspx#CEO");
} 
```

用例

```
<asp:HyperLink ID="HyperLink2" runat="server" 
    NavigateUrl="~/about/CEO">
    Test
</asp:HyperLink> 
```

# jqgrid - jqGrid：使用表单配置可创建但不可编辑的值

> ID：12533907
> 
> 赞同：0
> 
> 时间：2012-09-21T15:51:27.130
> 
> 标签：jqgrid

我需要允许用户在创建时指定一个值，但一旦创建，我需要禁止编辑该值。

代码：123 值：abc

用户可以在创建时输入这两个值。但只有“价值”是可编辑的。

使用 jqGrid 和表单来做到这一点。

使用此配置：

`{name:'code',index:'code', width:50,editable:true,editoptions:{maxlength:"20", readonly: 'readonly'},formoptions:{label:'Code*'}, editrules:{required:true}}, {name:'value',index:'value', width:100,editable:true, editoptions:{maxlength:"400"},formoptions:{label:'Value*'}, editrules:{required:true}},`

但这不允许我创建“代码”条目。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T11:35:50.953

因为我没有得到任何我使用的答案

`$("#code").attr('readonly', false);`

`$("#code").attr('readonly', true);`

在适当的位置，并且做到了。

我还从上面的编辑选项中删除了 readonly: 'readonly' 。

# php - 使用 Facebook Graph API 点赞

> ID：12533909
> 
> 赞同：1
> 
> 时间：2012-09-21T15:51:32.413
> 
> 标签：php, facebook-graph-api, post, facebook-access-token

我正在尝试使用 Facebook Graph API 点赞帖子，我拥有`access_token`所需的权限 ( `publish_actions`, `publish_stream`)。我在网上找到的方法是

```
POST: /148151888659853/likes?access_token=XXXXXX 
```

我试过这个，它有效，**但**只有当帖子（状态更新）是由与`access_token`. 我无法点赞其他人的帖子（状态更新为公开）。这个怎么做？

当试图点赞别人的帖子时，错误是：

```
{
  "error": {
    "message": "(#200) Permissions error", 
    "type": "OAuthException", 
    "code": 200
  }
} 
```

任何帮助表示赞赏。

# android - 在 Android 上拨打两个号码电话号码的快捷方式

> ID：12533910
> 
> 赞同：1
> 
> 时间：2012-09-21T15:51:33.683
> 
> 标签：android, android-widget, telephony

在 iOS 上做了同样的事情后，我正在为 Android 开发一个应用程序。其中一项功能是使用户能够通过单击按钮一个接一个地拨打两个号码。

例如，假设您想拨打 1-800-111-1111，然后拨打分机 123456。在 iOS 上，您可以：tel://18001111111p123456。

我做了一些挖掘，找不到任何适用于 Android 的东西。任何人都可以提出任何建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T15:53:41.143

使用逗号代替`p`. 每个逗号都告诉 Android 在拨入下一组号码之前等待 2 秒（或类似的时间）。

编辑：

请注意，一些用户报告说逗号在某些设备上增加了较少的延迟。通过使用多个逗号，您可以增加延迟。

# html - 为什么当我添加视口元标记时，PhoneGap 不会以不同的方式呈现我的页面？

> ID：12533912
> 
> 赞同：2
> 
> 时间：2012-09-21T15:51:58.177
> 
> 标签：html, cordova, zooming, responsive-design, viewport

我读到了视口，它改变了在 iOS、Android、Opera 和 Firefox 移动浏览器上显示页面时使用的逻辑窗口大小，并且我们使用视口元标记来设置视口的宽度和初始比例。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"> 
```

我在我的 Galaxy S II 手机上尝试[了没有视口的示例](http://webdesigntutsplus.s3.amazonaws.com/tuts/293_QT_metatag/demo1/index.html)和[有视](http://webdesigntutsplus.s3.amazonaws.com/tuts/293_QT_metatag/demo2/index.html)口的示例，但 我没有发现任何变化！我也尝试放大内容，但没有放大。我`user-scalable= yes`输入了内容属性，但它仍然没有放大！

注意：我使用 PhoneGap 在手机上运行 HTML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T14:13:55.337

是 Apple 在移动 Safari 中引入的`viewport`元标记，以允许 Web 开发人员定义其网站应在浏览器中显示的比例。您可以[在此处](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/UsingtheViewport/UsingtheViewport.html)阅读所有相关信息。

但是，您应该注意，这适用于移动 Safari 浏览器，而不一定适用于 PhoneGap（Cordova，现在？）。快速搜索显示[这个（最近的）线程](http://community.phonegap.com/nitobi/topics/phonegap_build_viewport_not_working_on_android)，似乎目前没有办法做到这一点。

# internet-explorer - 将浏览器缓存与 IIS7.5 一起用于 javascripts 和 css

> ID：12533915
> 
> 赞同：1
> 
> 时间：2012-09-21T15:52:02.763
> 
> 标签：internet-explorer, iis-7.5, browser-cache

我正在开发一个 Web 项目（ASP.NET MVC 2，但这个问题并不重要）我想微调性能。

设置 clientCache 设置以缓存静态内容与图像完美配合，但是 Internet Explorer 8（或 9）仍在为 javascripts 和 css 执行 GET（“if-modified-since”）（因此响应 304由 IIS）。

我想避免 IE 对已经在缓存中的静态资源执行无用的 GET。

我已经使用 IE9 开发工具中的网络捕获工具和 Fiddler 验证了这一点。Chrome 正在按预期工作，从缓存中获取 javascript/css。

我添加到我的 web.config 的设置是：

```
<configuration> 
    <system.webServer> 
        <staticContent> 
            <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="165.00:00:00" /> 
        </staticContent> 
    </system.webServer> 
</configuration> 
```

我怀疑问题的根源是我在 IIS 上为 application/x-javascript MIME 类型启用的动态压缩。我保留了默认设置，因此不会将缓存标头发送到客户端以获取 gzip 压缩的内容。

# php - PHP cURL 不允许我设置 POST 请求，而是设置为 GET

> ID：12533916
> 
> 赞同：1
> 
> 时间：2012-09-21T15:52:04.883
> 
> 标签：php, curl

```
 $this->curl = curl_init();
        curl_setopt($this->curl, CURLOPT_URL, 'http://something.com/send');
        curl_setopt($this->curl, CURLOPT_REFERER, 'http://something.com');
        curl_setopt($this->curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1');
        curl_setopt($this->curl, CURLOPT_ENCODING, 'gzip, deflate');
        curl_setopt($this->curl, CURLOPT_COOKIEFILE, dirname(__FILE__) . '/cookies.txt');
        curl_setopt($this->curl, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookies.txt');
        curl_setopt($this->curl, CURLOPT_HTTPGET, 0);
        curl_setopt($this->curl, CURLOPT_POST, 1);
        curl_setopt($this->curl, CURLOPT_POSTFIELDS, 'name=john');
        curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, 1);
        @curl_setopt($this->curl, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($this->curl, CURLOPT_HTTPPROXYTUNNEL, FALSE);
        curl_setopt($this->curl, CURLOPT_PROXY, $this->proxy['0']);
        curl_setopt($this->curl, CURLOPT_PROXYPORT, $this->proxy['1']);
        curl_setopt($this->curl, CURLOPT_PROXYTYPE, CURLPROXY_HTTP);
        curl_setopt($this->curl, CURLOPT_PROXYAUTH, CURLAUTH_BASIC);
        curl_setopt($this->curl, CURLOPT_PROXYUSERPWD, $this->proxy['2'] . ':' . $this->proxy['3']);
        curl_setopt($this->curl, CURLOPT_HEADER, 1);
        curl_setopt($this->curl, CURLINFO_HEADER_OUT, 1);
        curl_setopt($this->curl, CURLOPT_VERBOSE, 1);$this->website = curl_exec($this->curl);
        var_dump(curl_getinfo($this->curl));
        var_dump(curl_error($this->curl));
        echo $this->website; 
```

所以 getinfo 告诉我： GET [http://something.com/send](http://something.com/send) HTTP/1.1

而不是 POST [http://something.com/send](http://something.com/send) HTTP/1.1

这不是代理错误-我在没有代理的情况下尝试过-结果相同。

那么为什么 cURL 强制 GET 呢？而不是做正常的 POST 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:26:21.030

发生这种情况的原因是因为你已经`CURLOPT_FOLLOWLOCATION`设置了。

cURL 实际上并没有执行 GET 请求*而不是*POST，它也在执行*它*。这是因为您发布到的 URL 使用[POST/Redirect/GET](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式，许多 HTTP 驱动的应用程序都使用这种模式。它基本上是一种帮助确保用户不会意外执行两次操作的机制（简而言之，它比实际情况要复杂一些）。

当您将数据 POST 到服务器时，服务器会处理请求并发出重定向，以便它可以返回相关内容，而不是简单地在对 POST 请求的响应中返回它。

总而言之，你实际上没有问题。保持你的代码不变，远程服务器上的结果将是你所期望的——只要请求数据是正确的。

# url - Firefox总是跳到页面顶部

> ID：12533917
> 
> 赞同：0
> 
> 时间：2012-09-21T15:52:22.767
> 
> 标签：url, firefox, href

[好的，我有一个网站](foo.php#id)[www.obliqueideas.com](http://obliqueideas.com)。在 FF 中，当我单击其中一个投资组合圈时，它总是会转到投资组合页面的顶部。如果我刷新投资组合页面，它会转到正确的 href 位置。无论如何，这个问题在我测试过的任何其他浏览器中都不存在。让我知道你的想法。

我更新了代码——删除了一个不必要的 < div >，并更改了标签结构以匹配 bio 部分，但问题仍然存在。我仍在本地测试，所以它没有反映在网站上。这是更新的代码。

```
<div id="item2" class="item">
     <h2>Some title</h2>
     <img src="/" />
     <p>some text</p>
</div> 
```

我真的不明白为什么网站的生物部分可以在 FF 中工作，而投资组合部分则不能。

更新：我想知道类项目是否会混淆 FF，所以我更改了类名，它起作用了。这是我的最终代码......真的很简单，但是，它有效，对吧？

```
 <div id="item8" class="content">
          <a name="item8"></a>
          <h2>Some Title</h2>
          <img src="/" />
          <p> some text</p>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:58:13.927

您有重复的 ID：

```
<div class="item" id="item3">
        <a id="item3"></a> 
```

ID 属性[必须是唯一的](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)。重复的 ID 让 Firefox 对它应该滚动到哪个元素感到困惑，所以它什么也不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:30:05.960

我想知道类项目是否会混淆 FF，所以我更改了类名，它起作用了。这是我的最终代码......真的很简单，但是，它有效，对吧？

```
 <div id="item8" class="content">
      <a name="item8"></a>
      <h2>Some Title</h2>
      <img src="/" />
      <p> some text</p>
</div> 
```

# java - 字符串非法转义字符

> ID：12533921
> 
> 赞同：4
> 
> 时间：2012-09-21T15:52:27.057
> 
> 标签：java, octal

在回答一个问题时，我遇到了这个有趣的情况。

如果我有如下字符串，Netbeans 不会抱怨它是一个`illegal start of expression`.

```
String temp="\19825655."; 
```

一旦我删除“1”，它就会抱怨它是一个`illegal start of expression`.

```
String temp="\9825655."; 
```

无法弄清楚这种行为的原因。任何输入将不胜感激。

**观察：**似乎`\9`并`\8`具有特殊意义。只为`\9`和`\8`我得到`illegal start of expression`。它没有抱怨的所有其他组合。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T15:56:01.333

`\1`是八进制转义码。[在字符和字符串文字的转义序列](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)中的 JLS 中查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:55:02.373

对，所以这意味着这个组合`\1`是一个转义序列。但是，据我所知，这不是一个已知的转义序列。

编辑：好的，它是一个*八进制*数，有趣 - [Java 中的 \x Escape？](https://stackoverflow.com/questions/3613759/x-escape-in-java)

# string - VBScript 使用特定位置和未知长度的值返回字符串中的值

> ID：12533922
> 
> 赞同：0
> 
> 时间：2012-09-21T15:52:28.973
> 
> 标签：string, vbscript, return-value

我有一个问题，我相信对于您有经验的 VBScripters 来说，解决起来可能相当简单。

目前我有一个字符串：“2012 年 1 月 12 日”

由于是派生项，此字符串会根据 XML 更改。

现在我只需要检索月份，因为稍后我将在我的程序中将它与另一个值进行比较。我遇到的问题是，由于值不同，我不知道如何检索月份，例如它可能是“2013 年 3 月 11 日”。

现在我想我知道如何做到这一点，通过从左侧向内搜索 3 个字符，从右侧搜索 5 个字符，然后将该值分配给一个变量。

问题是我对此很陌生，虽然我认为我有解决方案，但我不具备让它工作的知识！

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:00:15.713

```
datestring = "12 January 2012"
WScript.Echo Split(datestring)(1) 
```

# url - 带有 mod_rewrite 的友好 URL

> ID：12533925
> 
> 赞同：0
> 
> 时间：2012-09-21T15:52:42.980
> 
> 标签：url, mod-rewrite, url-rewriting

我想转换以下网址：

```
http://localhost/index.php?foo=bar&bar=foo 
```

进入：

```
http://localhost/index/bar/foo 
```

换句话说，我想用正斜杠替换页面扩展名，然后递归地重写一个或多个变量。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:05:14.417

```
# to redirect the browser to friendly
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /index\.php\?foo=([^&]+)&bar=([^&\ ]+)
RewriteRule ^ /index/%1/%2? [L,R=301]

# to internally rewrite friendly back to the proper resource
RewriteRule ^/?index/([^/]+)/([^/]+)$ /index.php?foo=$1&bar=$2 [L,QSA] 
```

# html - CSS 选择器中的类名是否区分大小写？

> ID：12533926
> 
> 赞同：245
> 
> 时间：2012-09-21T15:52:55.690
> 
> 标签：html, css, css-selectors

我一直在阅读 CSS 不区分大小写的文章，但我有这个选择器

```
.holiday-type.Selfcatering 
```

当我像这样在我的 HTML 中使用它时，它会被拾取

```
<div class="holiday-type Selfcatering"> 
```

如果我像这样更改上面的选择器

```
.holiday-type.SelfCatering 
```

然后样式不会被拾取。

有人在说谎。

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-09-21T15:54:38.813

CSS 选择器通常不区分大小写；这包括类和 ID 选择器。

但是[HTML 类名*区分*大小写](http://www.w3.org/TR/html4/struct/global.html#h-7.5.2)（请参阅属性定义），这会导致您的第二个示例不匹配。[这在HTML5](http://www.w3.org/TR/html50/disabled-elements.html#case-sensitivity)中没有改变。¹

这是因为选择器的大小写敏感性[取决于文档语言的内容](http://www.w3.org/TR/selectors-4/#case-sensitive)：

> 所有选择器语法在 ASCII 范围内都不区分大小写（即 [az] 和 [AZ] 是等效的），除了不受选择器控制的部分。选择器中的文档语言元素名称、属性名称和属性值是否区分大小写取决于文档语言。

因此，给定一个带有`Selfcatering`类但没有`SelfCatering`类的 HTML 元素，选择器`.Selfcatering`and`[class~="Selfcatering"]`将匹配它，而选择器 `.SelfCatering`and`[class~="SelfCatering"]`不会。²

如果文档类型将类名定义为不区分大小写，那么无论如何您都会有匹配项。

* * *

¹ [在所有浏览器的 quirks 模式下，类和 ID 不区分大小写。这意味着大小写不匹配的选择器将始终匹配。由于遗留原因，此行为在所有浏览器中都是一致的，并在[本文](https://www.cs.tut.fi/~jkorpela/quirks-mode.html)中有所提及。]

² [对于它的价值，[选择器级别 4](http://www.w3.org/TR/selectors4/#attribute-case)`[class~="Selfcatering" i]`包含一个建议的语法，用于强制使用or对属性值进行不区分大小写的搜索`[class~="SelfCatering" i]`。两个选择器都会将 HTML 或 XHTML 元素与一个`Selfcatering`类或一个`SelfCatering`类（当然，两者兼有）进行匹配。然而，类或 ID 选择器还没有这样的语法（还没有？），大概是因为它们带有与常规属性选择器不同的语义（*没有*与之关联的语义），或者因为很难提出可用的语法。]

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-09-21T15:55:08.037

也许不是谎言，但需要澄清。

实际的 CSS 本身不区分大小写。

例如

```
wiDth:100%; 
```

但是名称，它们必须区分大小写才能成为唯一标识符。

希望有帮助。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-02-17T06:34:49.380

在 quirks 模式下，所有浏览器在使用 CSS 类和 id 名称时都表现得不**区分大小写。**

> 在 quirks 模式下，CSS 类和 id 名称不区分大小写。在标准模式下，它们区分大小写。（这也适用于 getElementsByClassName。）[阅读更多。](https://developer.mozilla.org/en/docs/Mozilla_Quirks_Mode_Behavior)

有时当你有错误的文档类型时，你的浏览器会进入怪癖模式。

```
<!DOCTYPE html PUBLIC>
<!DOCTYPE html anytext> 
```

你应该使用标准的文档类型

HTML 5

```
<!DOCTYPE html> 
```

HTML 4.01 严格

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

HTML 4.01 过渡

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

HTML 4.01 框架集

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd"> 
```

XHTML 1.0 严格

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

XHTML 1.0 过渡

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

XHTML 1.0 框架集

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd"> 
```

XHTML 1.1

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

如果您的 CSS 类或 id 名称不区分大小写，请检查您的文档类型。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-08-31T12:54:59.193

CSS 不区分大小写。

但在 HTML5 中，类和 ID 区分大小写

所以，CSS属性、值、伪类名、伪元素名、元素名不区分大小写

并且 CSS 类、 id 、 urls 、 font-families 是区分大小写的。

注意：在 html quirks 模式下，css 即使对于 ID 和类也不区分大小写（如果您删除 doctype 声明）

CodePen 示例：[https ://codepen.io/swapnilPakolu/pen/MWgvQyB?&editable=true#anon-signup](https://codepen.io/swapnilPakolu/pen/MWgvQyB?&editable=true#anon-signup)

```
<!DOCTYPE html>
<html>
<head>
<title>CSS case sensitive ?</title>
<style>

P#id
{color:RED;}

p#ID
{font-size:30PX;}

#iD
{BORDER:4px solid blue;}

.class
{text-decoration:underLine;}

.CLASS
{background-color:graY;}

.Class
{font-weight:900;}

#ID::afTeR
{conTent:"colored text";
disPlay:bLock;
color:#fAdAcA;}

.class:hoVeR
{background-color:lightblue;}

</style>
</head>
<body>
<p id="id" class="class">red and underline</p>
<p id="ID" class="CLASS">30px font size and gray background</p>
<p id="iD" class="Class">bold and blue border</p>
</body>
</html> 
```

# oracle - 解析函数中的序列

> ID：12533927
> 
> 赞同：0
> 
> 时间：2012-09-21T15:52:56.007
> 
> 标签：oracle, oracle11g

我有一个有列的表`name`

```
 NAME
=========
GAURAV
GAURAV
AJAY
AJAY
=========== 
```

现在我想使用一个现有的序列，比如说 abc_seq，我想对记录进行分组，这样它会给我输出分组，`name`并且每个组都具有相同的序列号

我想得到的输出如下所示

```
name    group
==============
GAURAV    1
GAURAV    1
AJAY      2
AJAY      2
============== 
```

我已经用分析功能尝试过这个，但是如何在查询中使用序列`analytical function`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T15:59:44.943

`Dense_rank`会做的工作。

```
with t1 as
(
  select 'GAURAV' name from dual union all
  select 'GAURAV' name from dual union all
  select 'AJAY' name from dual union all
  select 'AJAY' name from dual
)

select name
     , dense_rank() over(order by name desc) rn
  from t1 
```

输出：

```
Name    Rn 
-----------
GAURAV  1 
GAURAV  1 
AJAY    2 
AJAY    2 
```

这是一个[**演示**](http://www.sqlfiddle.com/#!4/4439f/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-30T05:51:58.617

select name,dense_rank() over (order by name desc) from table_name;

只需使用dense_rank() 解析函数，就可以得到想要的输出。

# iphone - MainWindow.xib 和 iPhone 5（4 英寸显示屏）

> ID：12533928
> 
> 赞同：2
> 
> 时间：2012-09-21T15:53:01.807
> 
> 标签：iphone, ios, cocoa-touch, uiviewcontroller

我有一个通用应用程序，并正在尝试为 iPhone 5 做好准备。但是，我遇到了窗口大小不正确的问题。这可能与我对 MainWindow.xib 的设置有关，并且可能一直工作到现在，可能因为只有一种尺寸。

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
viewController = [[DORootViewController alloc] initWithNibName:@"MainWindow" bundle:nil];
[self.window setRootViewController:[viewController autorelease]];
[self.window makeKeyAndVisible]; 
```

我有一个 UIView（有孩子）。这连接到设置为窗口的 rootViewController 的“rootViewController”（UIViewController）的视图。到目前为止，这一切都很好，但是在 4" 屏幕上，我的导航控制器和屏幕上的位置有问题。这个导航控制器被添加到 rootViewController，因为 rootViewController 有一个在整个应用程序中使用的背景.

```
[self setNavigationController:[[[UINavigationController alloc] initWithRootViewController:menuView] autorelease]];
[[[self navigationController] view] setOpaque:YES]; 
[[self view] addSubview:[_navigationController view]]; 
```

我读到人们有类似的问题，并且通过在 MainWindow.xib 中有一个窗口来解决它。我试过了，它修复了 NavigationController 问题，但引入了一个问题，即当我使用 [self dismissMoviePlayerViewControllerAnimated] 播放电影时应用程序崩溃；我假设是因为连接的窗口不是视图。

在我看来，导航控制器没有正确添加到窗口的边界。但为什么会这样呢？结果是不可预测的，有时似乎很好，有时在 iOS 5 和 iOS 6 上（在模拟器中）都有水平偏移。

大家有什么建议。

![3.5 屏幕中间的工具栏](../Images/de7f40e9bdba18b1eddb239d265755f6.png)

![工具栏和状态栏在 4 上有点太低了](../Images/44ae0b17a91abbc20bcdf8174a485449.png)

[编辑：更新了更多细节和屏幕截图，错误位置的条形图]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:44:33.183

尝试替换此行：

```
[[self view] addSubview:[_navigationController view]]; 
```

和：

```
[self presentModalViewController:_navigationController animated:NO]; 
```

# android - 谁能指点我关于android中多点触控的详细教程？

> ID：12533929
> 
> 赞同：2
> 
> 时间：2012-09-21T15:53:01.720
> 
> 标签：android, touch, multi-touch

我似乎找不到任何东西，而且我这几天一直在努力寻找。我可以找到手势示例，但没有多点触控！我能够计算指针，但我不知道从那里去哪里。在我的应用程序中，我尝试获取它以便我可以旋转一个对象，并且它需要基于 2 个接触点。有没有人可以指出我这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:00:23.477

这是一个教程：

[http://www.helloandroid.com/tutorials/multitouch-and-gesture-detection-part-1](http://www.helloandroid.com/tutorials/multitouch-and-gesture-detection-part-1)

希望有帮助！

# .net - 打开 xml sdk 电子表格检查合并的单元格

> ID：12533932
> 
> 赞同：3
> 
> 时间：2012-09-21T15:53:12.203
> 
> 标签：.net, openxml, spreadsheet, openxml-sdk

我正在尝试通过 open xml sdk 读取具有以下格式的 excel 电子表格，并确定哪些第一行合并单元格对应于第二行。

如何检查单元格是否处于合并状态？

```
------------------------------------------------------------
       Main Heading 1     |     Main heading 2              |
------------------------------------------------------------
Sub Head 1   | sub head 2 |     sub head 3                  |
-------------------------------------------------------------
             |            |                                 | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T06:24:39.523

```
const string testFileName = @"C:\Users\koo\Desktop\test\test\Test.xlsx";
string sheetName = "Sheet1";
using (SpreadsheetDocument document = SpreadsheetDocument.Open(testFileName, true))
{
    WorkbookPart wbPart = document.WorkbookPart;
    Sheet theSheet = wbPart.Workbook.Descendants<Sheet>().Where(s => s.Name == sheetName).FirstOrDefault();
    WorksheetPart wsPart = (WorksheetPart)(wbPart.GetPartById(theSheet.Id));
    MergeCells mcs = wsPart.Worksheet.Descendants<MergeCells>().First();

    var mcl = mcs.ChildElements.ToList();
    foreach (MergeCell mc in mcl)
    {

    }
    document.WorkbookPart.Workbook.Save();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T06:06:03.033

如果您使用的是 ClosedXml 库，那么要检查一个单元格是否被合并，您可以使用下面给出的代码。

```
XLWorkbook excelWorkBook = null;
excelWorkBook = new XLWorkbook(filePath);
var ws = excelWorkBook.Worksheet("Sheet1"); 
bool check= ws.Cell("Cell Name").IsMerged(); 
```

检查将返回真或假

伊丽莎白

# jquery - jQuery 动画背景位置与 x 和 y 位置

> ID：12533933
> 
> 赞同：1
> 
> 时间：2012-09-21T15:53:22.367
> 
> 标签：jquery, jquery-animate

> **可能的重复：**
> [jquery 动画背景位置](https://stackoverflow.com/questions/5171080/jquery-animate-background-position)

对于动画悬停效果，我尝试在 jQuery 的函数 animate 中设置背景位置。我在精灵图像中设置了悬停，当我尝试在函数 animate 中设置背景位置时，它似乎只使用一个像素参数。当我尝试设置两个（x 和 y）时，它根本不起作用。

什么有效（它在我的源代码中设置 109px 50%）：

```
$('a#twitter').animate({ 
backgroundPosition: '109px',
}); 
```

我想要但不起作用的东西（我的源代码中没有）：

```
$('a#twitter').animate({ 
backgroundPosition: '109px 0px',
}); 
```

提前致谢。

尼基

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:55:52.873

试试这个：

```
$('a#twitter').animate({ 
   background-position-x: '109px',
   background-position-y: '0'
}); 
```

# django - 在所有正常进程之前修改 Django 请求的原始 url

> ID：12533934
> 
> 赞同：1
> 
> 时间：2012-09-21T15:53:26.640
> 
> 标签：django, ios6, cookieless

这可能有点棘手，我不确定它是否正确。由于 iOS6 阻止在 Web 容器中设置 cookie，我的旧版 HTML5 Django 游戏非常依赖 cookie（会话 id）将无法再次运行。我正在尝试无cookie的方式，编写一个中间件将sessid从url中取出并将其保存到request.cookies ['sess_id']。我工作，但代码库包含很多依赖于 url 的逻辑，这些逻辑不可能一一改变...... url 可能看起来像，

```
 GET /sess_e4b817ee8993bdcbc34733feb18951ff/m/stage/quest/ 
```

现在我正在考虑从 url 中删除 sess 部分以使其返回

```
 GET /m/stage/quest/ 
```

并且所有正在进行的过程都不需要改变。我想我可以修改 django 请求对象的原始属性。修改哪个属性？还有其他更好的主意吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T03:57:03.590

我采用的最后一种方式是改变iOS容器接受cookie，不再需要改变服务器端。一些代码供参考，

```
-(void)applicationDidBecomeActive:(UIApplication *)application {    
isInternetconnectionUp = [self checkInternetConnection];
    [[NSHTTPCookieStorage sharedHTTPCookieStorage] setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T15:57:10.713

您只需重新包含带有前缀的 URL，无需更改任何内容。

```
url(r'^(?P<sessionid>sess_[a-f0-9]+)/', include('your_urls')), 
```

# jquery - 从多选中检索所有选定的值并将其显示在悬停 Jquery 的标题中

> ID：12533936
> 
> 赞同：0
> 
> 时间：2012-09-21T15:53:28.640
> 
> 标签：jquery, select, user-interface, widget, multi-select

我实现了 jQuery UI [MultiSelect 小部件](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)

它运行良好。有什么办法可以在悬停时显示标题中以逗号分隔的所有选定选项？我不想展开标题并显示超过 4 个选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T16:12:48.160

**工作示例：http:** [//jsfiddle.net/5KvP3/4/](http://jsfiddle.net/5KvP3/4/)

```
$("#state")
    .multiselect()
    .bind("multiselectclick multiselectcheckall multiselectuncheckall", function( event, ui ){
        var checkedValues = $.map($(this).multiselect("getChecked"), function( input ){
            return input.title;
        });
        $('button.ui-multiselect').attr('title',checkedValues.join(', '));
    })
    .triggerHandler("multiselectclick")
    .multiselectfilter(); 
```

# qt - QT - 为什么用图形小部件指定父级？

> ID：12533937
> 
> 赞同：1
> 
> 时间：2012-09-21T15:53:30.370
> 
> 标签：qt, widget, parent

问题：使用 Qt 指定父级似乎总是一个好主意。但是我不明白为什么在某些特定情况下需要它。有很多以下列方式使用 QGraphicsView 的例子：

```
MainWindow::MainWindow()
{
    QGraphicsView *view = new QGraphicsView(this);
    ...
} 
```

那么为什么这比`QGraphicsView *view = new QGraphicsView(NULL)?`在这种特定情况下更好呢？

谢谢你，亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T15:56:58.767

没有父级的 QWidget 实际上是一个顶级窗口。但是，有时人们在创建 QWidget 时会忽略指定父级，因为稍后会自动设置父级，例如当 QWidget 是布局的一部分时。例如：

```
QGraphicsView *vew = new QGraphicsView; // the view has no parent

QBoxLayout *layout = new QHBoxLayout;
layout->addWidget(view);

centralWidget()->setLayout(layout); // this automatically reparents the view to 'this' 
```

`this`是否传递给新的 QGraphicsView 或稍后重新设置它并不重要。我不认为两者都更好，但我总是做后者，因为它对我来说看起来更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:08:10.097

> “用 Qt 指定父母似乎总是一个好主意”

有一个[解释](http://doc.qt.digia.com/4.7-snapshot/objecttrees.html)。

在这种情况下，最好指定一个父对象，因为您不需要管理对象销毁。考虑一个具有多个窗口的应用程序。以`NULL`任何地方为父对象，当您关闭窗口时，所有对象及其资源仍然存在。因此，您会造成内存泄漏。另一方面，如果您有一个良好的对象层次结构，那么关闭窗口将调用层次结构中的所有析构函数。少一个需要关心的错误...

> 你能解释一下父窗口是如何知道子视图的吗？

子对象有一个内部功能可以将自己添加到父对象。这肯定在`QObject`构造函数和`QObjet::setParent(QObject * parent)`方法中都使用了。您可以从签名中注意到没有`const`任何地方，这是因为子对象会修改父对象。

[http://doc.qt.digia.com/4.7-snapshot/qobject.html#details](http://doc.qt.digia.com/4.7-snapshot/qobject.html#details)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:12:06.113

我要感谢 UmNyobe 和 Anthony 帮助我解决这个问题。

无论如何，我不得不查看 QT 资源以找出幕后发生的事情。

所以我理解整个 QObjects 的想法如下。当使用指定的父对象创建新的 QObject 时，将`QObjectPrivate::setParent_helper(QObject *parent)`调用隐藏函数。它确实向父母注册了孩子：

```
parent->d_func()->children.append(q); // Strange, they didn't use `this` to register the object :) 
```

所以从技术上讲，用父母创建一个孩子允许父母注册孩子。因此，在创建孩子时指定父母是一个有用的习惯。

在某些情况下，无论如何都会稍后指定父子关系（请参阅安东尼的回答），因此可能未指定父子关系。

# google-app-engine - GAE java 服务器无法激活 Access-Control-Allow-Origin

> ID：12533942
> 
> 赞同：0
> 
> 时间：2012-09-21T15:53:53.630
> 
> 标签：google-app-engine, webserver

我正在尝试将服务器设置为允许跨域脚本，以访问我的 appengine 提供的资产：“static.myapp.org”

我将此配置添加到我的 appengine-web.xml，如 [https://developers.google.com/appengine/docs/java/config/appconfig中所述](https://developers.google.com/appengine/docs/java/config/appconfig)

```
 <static-files>
      <include path="/**.txt" >
        <http-header name="Access-Control-Allow-Origin" value="http://myapp.org" />
      </include>
    </static-files> 
```

设置此配置后，我在尝试上传时收到下一个错误：

```
Bad configuration: XML error validating /war/WEB-INF/appengine-web.xml against /opt/appengine-java-sdk-1.6.6/docs/appengine-web.xsd
  Caused by: cvc-complex-type.2.2: Element 'include' must have no element [children], and the value must be valid. 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:41:27.613

[GAE SDK 1.7.0 中引入了](http://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes)静态内容的 HTTP 标头。您似乎使用的是 1.6.6。

# sql - rails activerecord arel group_by something 并为每个组选择一个 max(col) 记录

> ID：12533943
> 
> 赞同：1
> 
> 时间：2012-09-21T15:53:55.633
> 
> 标签：sql, ruby-on-rails, ruby, arel

我有一张访问表（人员，访问类型，日期，...），我想按访问类型和人员分组，然后选择每个组中具有 MAX（日期）的记录。我很确定使用查询代数而不是编写 SQL 应该很简单，但似乎无法让它工作。我认为它会是这样的：

```
Visit.group(:visit_type, :person).having("date = MAX(date)") 
```

但这不会从每个组中选择单个记录。

编辑：啊！经过更多调查 - 事实证明上述方法确实有效！耶！

编辑：啊！它适用于 sqlite 和 mySql，但不适用于 postgres，这与根据标准更严格地实现 group_by 函数有关。嘘，垃圾！这意味着我仍在寻找答案。

编辑：我不认为这每次在 sqlite 上都能给出正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:55:49.960

好的，这就是我现在要做的事情：

```
Visit.all.group_by{|v| [v.visit_type,v.person]}.map{|key, value| value.inject{|memo, visit| memo.date > visit.date ? memo : visit}} 
```

我知道这不漂亮，但这是我女儿的六岁生日，所以我得走了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:06:47.813

这行得通吗？

```
Visit.joins('LEFT JOIN visits v2 on visits.visit_type = v2.visit_type AND visits.person = v2.person AND visits.date > v2.date') 
```

# sqlite - 创建表失败

> ID：12533944
> 
> 赞同：0
> 
> 时间：2012-09-21T15:53:57.003
> 
> 标签：sqlite, android-sqlite

我失败了所有的 CREATE TABLE；和带有错误的 INSERT 语句`no such a table`。

Android 2.3 不会发生这种情况。取而代之的是3.2。这是为什么？创建数据库时出错？

我的课堂示例：

```
public class MainActivity extends Activity {

DatabaseHelper databaseHelper = new DatabaseHelper(this);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    String queryTest="create table TEST_TABLE(ID integer,T_MESSAGE text)";
    databaseHelper.executeQuery(queryTest);
    queryTest="INSERT INTO TEST_TABLE (ID,T_MESSAGE) VALUES (1,'1');";
    databaseHelper.executeQuery(queryTest);

} 
```

}

我的数据库：

```
public class DatabaseHelper extends SQLiteOpenHelper {

private static String DATABASE_NAME = "pro.db";
private static String DATABASE_PATH = "/data/data/it.sysman.mobile.contactpro/databases/";

private static final int SCHEMA_VERSION = 2;

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, SCHEMA_VERSION);
}

@Override
public void onCreate(SQLiteDatabase sqlDB) {
    try {

    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub

}
private SQLiteDatabase openDataBase(int flag) {

    SQLiteDatabase checkDB = null;

    try {

        Environment.getExternalStorageDirectory();
        Environment.getDataDirectory();
        Environment.getRootDirectory();
        Environment.getExternalStorageState();
        checkDB = getWritableDatabase();

    } catch (Exception e) {
        e.printStackTrace();
    }

    return checkDB;
}

public String executeQuery(String query) {

    SQLiteDatabase sqlDB = null;
    Cursor data = null;
    try {
        sqlDB = openDataBase(SQLiteDatabase.NO_LOCALIZED_COLLATORS);
        data = sqlDB.rawQuery(query, null);

        if (data.getCount() == 0)
            return null;

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (data != null)
            data.close();
        if (sqlDB != null)
            sqlDB.close();
    }
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T10:40:52.837

there are a number of remarks here:

## One:

If you insist on creating the database outside of `SQLiteOpenHelper`. then use `execQuery()` and not `rawQuery()`. I don't know if this will solve the issue, but this is the method you should use for sql queries that does not return results.

## Two:

It is prefered to do the creation of your database inside the `SQLiteOpenHelper` and let it manage the creation and updating of your database.

see [this blog post](http://blog.kdehairy.com/2012/08/19/using-a-preloaded-sqlite-database-with-sqliteopenhelper/) if you want to use a pre-loaded database with your application.

# java - SelectOneMenu 更新其他 SelectOneMenu

> ID：12533945
> 
> 赞同：6
> 
> 时间：2012-09-21T15:53:57.503
> 
> 标签：java, ajax, jsf, managed-bean, selectonemenu

当我选择第一个 SelectOnMenu 的任何项目时，我想更新第二个 SelectOneMenu。现在，我从 ManagedBean 中获取 SelectOneMenus 的值。我想我必须使用 AJAX (jquery) 将参数发送到 ManagedBean。

```
<h:form>
    <div class="center">
        <h:panelGrid id="editTable" columns="2" styleClass="center">
            ...
            <h:outputText value="#{msg.timetable_list_category}" />
            <h:selectOneMenu class="category">
                <f:selectItems value="#{categoryBackingBean.categorys}" var="c"
                    itemLabel="#{c.category_Name}" itemValue="#{c.id}" />
            </h:selectOneMenu>

                <h:outputText value="#{msg.timetable_list_seminarblock}" />
            <h:selectOneMenu class="seminarblock">
                <f:selectItems value="#{seminarblockBackingBean.seminarblocks}" var="s"
                    itemLabel="#{s.seminarblock_Name}" itemValue="#{s.seminarblock_Id}" />
            </h:selectOneMenu>
            ...
        </h:panelGrid>
        ...
    </div>
</h:form> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:15:05.547

实际上，您可以使用当您的 selectOneMenu 的值更改时调用的 ValueChangeListener：

```
<h:selectOneMenu class="category" valueChangeListener="#{yourBean.selectOneMenuListener}">
    <f:selectItems value="#{categoryBackingBean.categorys}" var="c"
        itemLabel="#{c.category_Name}" itemValue="#{c.id}" />
</h:selectOneMenu> 
```

然后，在你的 bean 中你有这个方法：

```
public void selectOneMenuListener(ValueChangeEvent event) {
    //This will return you the newly selected
    //value as an object. You'll have to cast it.
    Object newValue = event.getNewValue(); 
    //The rest of your processing logic goes here...
} 
```

要更新页面，您可以添加`onchange="submit()"`到您的`<h:selectOneMenu/>`. 对于某些部分渲染，您可以尝试添加它`<f:ajax/>`而不是`onchange="submit()"`：

```
<h:selectOneMenu class="category" valueChangeListener="#{yourBean.selectOneMenuListener}">
    <f:selectItems value="#{categoryBackingBean.categorys}" var="c"
        itemLabel="#{c.category_Name}" itemValue="#{c.id}" />
    <f:ajax event="change" execute="@form" render="theIdOfTheComponentYouWantToReRender"/>
</h:selectOneMenu> 
```

如果我没记错的话，你会想要获取在第一个菜单中选择的元素的 id 并根据它填充第二个。然后，您可以渲染另一个 selectOneMenu，或者，如果需要，可以渲染一个包含表单一部分的面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:01:14.940

[Primefaces](http://www.primefaces.org/showcase-labs/ui/pprSelect.jsf)具有您想要实现的功能。它已经在使用 Ajax，所以不必担心自己编写代码。

# oauth - 我可以更改 Google OAuth2 屏幕上的 Application Developer 字段吗

> ID：12533946
> 
> 赞同：9
> 
> 时间：2012-09-21T15:54:02.197
> 
> 标签：oauth

在 Google 的 OAuth2 屏幕上，当它请求权限集时，会有一个“了解更多”链接。![截屏](../Images/9e23de1e2946906d511ace684a54bc52.png)

我希望应用程序开发人员字段不显示我的电子邮件地址，而是显示我雇主的网站。

我知道我可以只创建一个通用电子邮件地址，例如 info@.... 并让它成为应用程序开发人员，但这是次优的，并且涉及创建一个可能需要监控的单独电子邮件地址等...

有没有人能够控制该字段中显示的内容？

## 更新

这是创建客户 ID 屏幕，![在此处输入图像描述](../Images/910f5c5acce3b17f31e2777748796bc5.png)您会注意到电子邮件地址不可编辑 :-(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:55:16.750

我认为显示的电子邮件地址必须是项目所有者的电子邮件地址，并且任何所有者都可以登录并选择成为该联系人。

如果项目的另一个所有者登录并看到第二个屏幕（对你来说它说**你**对他们不会），它应该让他们选择成为访问授权页面中显示的公共联系电子邮件。

# playframework - 我可以用 Play2 达到 10,000 个同时连接吗？

> ID：12533949
> 
> 赞同：1
> 
> 时间：2012-09-21T15:54:19.170
> 
> 标签：playframework

*   数据库驱动的应用程序
*   MongoDB + Solr
*   协作
*   实时推送通知

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:47:50.227

这应该可以在单台机器上使用足够的内存和 CPU，因为 Play 在后台使用 Netty (Java NIO)。您可能应该查看[Reactive Mongo Play Plugin](https://github.com/zenexity/Play-ReactiveMongo)以在 Mongo 连接中利用 NIO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T14:33:34.040

考虑到一些事情，这可能是可能的：

1.  使用异步 DB 驱动程序，例如 Reactive Mongo。不要阻止服务器等待结果。查看 Enumerator/Iteratee 模式以减少内存使用。

2.  不要阻止您的网络工作者。在控制器中使用 AsyncResult。

3.  也可以异步调用 SOLR[从 Play Framework 中异步调用 Solr](https://stackoverflow.com/questions/17270393/call-solr-asynchronous-from-play-framework)

4.  Play 是无状态框架。不要自己让应用程序有状态，只需添加服务器/云实例即可轻松扩展它。

# asp.net - 带有实体框架的 ASP.NET 动态数据：多对多在服务器上插入差异

> ID：12533950
> 
> 赞同：4
> 
> 时间：2012-09-21T15:54:22.553
> 
> 标签：asp.net, entity-framework, asp.net-dynamic-data

我创建了一个简单的 ASP.NET 动态数据应用程序，它在我的开发机器上运行良好。当我部署它时，一切正常，除了与其他表具有多对多关系的项目的插入页面。编辑页面很好，多对多复选框出现。服务器已`.NET 4.0`安装。

我按照这里的说明操作：http: [//go.microsoft.com/fwlink/ ?LinkId=257395](http://go.microsoft.com/fwlink/?LinkId=257395)

任何人都知道问题可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:01:19.910

@TimS：如果您可以添加有关您的情况的任何其他信息可能会有所帮助-这是否也适用于一种环境而不是另一种环境？您知道两种环境中所有已安装组件的版本吗？

如果我正确理解了这个问题，我会看的前两个地方是：

1.  假设您有某种从表单到实体/模型的自动映射，您是否需要在加载“插入”页面之前使用默认值初始化实体或模型？

2.  您的数据库在两种设置中是否也相同 - 定义了相同的键（我假设代码相同......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:49:31.300

我不是 100% 确定，但我认为 System.Web.DynamicData.dll 和 System.Web.DynamicData.Design.dll 的版本在我的开发机器和服务器上是不同的，所以您可能需要仔细检查。我还记得我必须为所有关系表设置主键，但这可能是一个单独的问题......当我找到解决方案时，这将教我回答我自己的问题......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T15:39:56.727

1.  确保您的多对多表具有由两个相关表的主键组成的主键。

2.  确保表格在 EDMX 中显示为表格而不是视图（特别是如果您使用 DB-first 并且您必须修复第 1 点）。

3.  如果您使用 POCO，请确保关系属性（和其他属性）是公共的或受保护的并且是虚拟的。

4.  如果您使用的是 POCO，请确保在更改时修复关系的另一端（POCO-T4 中的默认设置）。

5.  如果您使用两个实体设置关系，例如 a 和 b

    使用：
    `a.Bs.Add(b);`

    那么如果 a 被创建为代理，例如
    `a = context.As.CreateObject();`

    而不是：
    `a = new A();`

    EF 将更容易识别更改。

    此外，如果您使用的是，`ObjectContext`您可以致电
    `context.SaveChanges(SaveOptions.DetectChangesBeforeSave | SaveOptions.AcceptAllChangesAfterSave);`
    帮助 EF 查找更改。

# prolog - Prolog将原子分配给另一个原子

> ID：12533951
> 
> 赞同：2
> 
> 时间：2012-09-21T15:54:24.290
> 
> 标签：prolog

我的谓词中有一个基本情况，我必须将原子 A 中的值分配给原子 B。不确定这是否可行，但有什么办法吗？

我的谓词如下

```
 montage(Expr,Out) :- atom(Expr), .... 
```

从 atom(Expr) 开始，我尝试了各种方法，但没有什么是正确的。

例如，如果 Expr 是 'a' 而 Out 是 'a11' 并且 Expr 是原子，则 Out 也将被分配为 'a'。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:01:30.870

在 Prolog 中，您不分配，而是*统一*. 你不能统一`a`，`a11`因为它们是不同的原子：

```
?- a = a11.
false. 
```

这也适用于已经通过与这些原子的统一绑定的变量：

```
?- X = a, Y = a11, X = Y.
false. 
```

事实上，当子句的两边`=`都完全接地（在任何地方不包含任何变量）时，统一就简化为检查术语是否相等。这就是为什么您可以`=`同时使用绑定变量和进行模式匹配的原因。

您必须重新考虑您的程序逻辑才能在没有分配的情况下工作。

# mysql - 将数据从 table1 复制到 table2，数据类型、名称和附加列略有不同

> ID：12533953
> 
> 赞同：1
> 
> 时间：2012-09-21T15:54:29.090
> 
> 标签：mysql, sql, insert, sqlbulkcopy

我正在运行一项任务，我需要将数据从 复制`table1`到`table2`. `table1`是从一个非常旧的应用程序生成的，该应用程序倾向于创建不寻常的数据类型，例如十进制等（这些是不必要的）。

所以结构如下所述：

**表格1：**

```
ordernumber - decimal(11,0)
var3 - varchar(4)
var4 - varchar(30)
var5 - int(50)
... 
```

**表2：**

```
id int() <- PK, AI
order_number - int(xx)
var3 - varchar(x)
var4 - varchar(x)
var5 - int(x)
.... 
```

`id`如图所示， table2 中有一个附加列 ,并与从 更改为 的数据类型一起`ordernumber`修改为。被定义为在此上下文中不相关。`order_number``decimal``int``x`

有没有一种*干净*的方法来复制数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T15:56:14.830

你可以使用`INSERT INTO...SELECT`状态。尝试

```
INSERT INTO table2 (orderNumber,var3, var4, var5)
SELECT orderNumber,var3, var4, var5
FROM table1 
```

# c++ - 包括 Availability.h 在内的 OpenGLES 头文件会阻止 CPP 文件编译

> ID：12533954
> 
> 赞同：0
> 
> 时间：2012-09-21T15:54:31.153
> 
> 标签：c++, objective-c, xcode, compilation, include

我正在使用 Xcode 中的 OpenGLES 做一些事情——它主要用于 iOS，但我希望只制作 OpenGLES 部分 C++，独立于它不使用 ObjectiveC。但是，OpenGLES 包含的内容似乎正在导入需要 Objective-C (Availability.h) 的内容，因此 CPP 文件无法正确编译，因为我从 NSObjCRuntime.h 中收到有关 NSString 的错误。

我理解他们，但我想知道其他人如何解决这个问题。我希望能够拥有带有 CPP 扩展名的 C++ 文件。我是否应该查看 Xcode 项目中有关如何处理 CPP 文件的设置？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:39:52.690

您也可能有一个包含 Objective C 标头的前缀标头。如果是这种情况，您应该用`#ifdef __OBJC__`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:38:30.573

默认情况下， Xcode 应该将`cpp`文件视为 C++。确保您没有特殊的 Objective-C-only 定义之一，例如`__OBJC__`，在某处手动定义。具体来说，`Availability.h`它不需要Objective-C（它只是预处理器的东西），所以问题可能出在其他地方。

绝对可以从`.cpp`文件中使用 OpenGL，编译为 C++，就像我在我的 iOS 项目中那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T08:53:29.390

我找到了它——最终包含了用于 CATransform3D 的 QuartzCore.h。我忘了我打算用替代品代替它。

# python - 在新行、制表符和一些空格上拆分字符串

> ID：12533955
> 
> 赞同：40
> 
> 时间：2012-09-21T15:54:34.700
> 
> 标签：python, regex, split

我正在尝试对一组看起来像这样的不规则数据执行字符串拆分：

```
\n\tName: John Smith
\n\t  Home: Anytown USA
\n\t    Phone: 555-555-555
\n\t  Other Home: Somewhere Else
\n\t Notes: Other data
\n\tName: Jane Smith
\n\t  Misc: Data with spaces 
```

我想将其转换为元组/字典，稍后我将在冒号上拆分`:`，但首先我需要摆脱所有额外的空格。我猜正则表达式是最好的方法，但我似乎无法找到一个有效的方法，下面是我的尝试。

```
data_string.split('\n\t *') 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-09-21T15:56:07.930

只需使用[.strip()](http://docs.python.org/library/stdtypes.html#str.strip)，它会在拆分时为您删除所有空格，包括制表符和换行符。然后可以使用以下方法完成拆分本身[`data_string.splitlines()`](http://docs.python.org/library/stdtypes.html#str.splitlines)：

```
[s.strip() for s in data_string.splitlines()] 
```

输出：

```
>>> [s.strip() for s in data_string.splitlines()]
['Name: John Smith', 'Home: Anytown USA', 'Phone: 555-555-555', 'Other Home: Somewhere Else', 'Notes: Other data', 'Name: Jane Smith', 'Misc: Data with spaces'] 
```

您现在甚至可以内联拆分`:`：

```
>>> [s.strip().split(': ') for s in data_string.splitlines()]
[['Name', 'John Smith'], ['Home', 'Anytown USA'], ['Phone', '555-555-555'], ['Other Home', 'Somewhere Else'], ['Notes', 'Other data'], ['Name', 'Jane Smith'], ['Misc', 'Data with spaces']] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T16:01:14.790

```
>>> for line in s.splitlines():
...     line = line.strip()
...     if not line:continue
...     ary.append(line.split(":"))
...
>>> ary
[['Name', ' John Smith'], ['Home', ' Anytown USA'], ['Misc', ' Data with spaces'
]]
>>> dict(ary)
{'Home': ' Anytown USA', 'Misc': ' Data with spaces', 'Name': ' John Smith'}
>>> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-21T17:43:51.823

如果您查看以下[文档](http://docs.python.org/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)`str.split`：

> 如果 sep 未指定或为 None，则应用不同的拆分算法：连续空格的运行被视为单个分隔符，如果字符串具有前导或尾随空格，则结果将在开头或结尾不包含空字符串。因此，使用 None 分隔符拆分空字符串或仅包含空格的字符串将返回 []。

换句话说，如果您想弄清楚要传递什么来到达`split`，那么什么都不传递（或不传递）。`'\n\tName: Jane Smith'``['Name:', 'Jane', 'Smith']`

这几乎解决了你的整个问题。剩下两部分。

首先，您只有两个字段，其中第二个可以包含空格。所以，你只想要一个分裂，而不是尽可能多的分裂。所以：

```
s.split(None, 1) 
```

接下来，你还有那些讨厌的冒号。但是你不需要分裂它们。至少给定您向我们展示的数据，冒号始终出现在第一个字段的末尾，之前没有空格，之后总是有空格，因此您可以将其删除：

```
key, value = s.split(None, 1)
key = key[:-1] 
```

当然，还有一百万种其他方法可以做到这一点。这只是似乎最接近您已经尝试过的那个。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-21T16:03:04.393

您可以用一块正则表达式石杀死两只鸟：

```
>>> r = """
... \n\tName: John Smith
... \n\t  Home: Anytown USA
... \n\t    Phone: 555-555-555
... \n\t  Other Home: Somewhere Else
... \n\t Notes: Other data
... \n\tName: Jane Smith
... \n\t  Misc: Data with spaces
... """
>>> import re
>>> print re.findall(r'(\S[^:]+):\s*(.*\S)', r)
[('Name', 'John Smith'), ('Home', 'Anytown USA'), ('Phone', '555-555-555'), ('Other Home', 'Somewhere Else'), ('Notes', 'Other data'), ('Name', 'Jane Smith'), ('Misc', 'Data with spaces')]
>>> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:05:55.657

正则表达式并不是这里工作的最佳工具。正如其他人所说，使用`str.strip()`and的组合`str.split()`是要走的路。这是一个单一的班轮做到这一点：

```
>>> data = '''\n\tName: John Smith
... \n\t  Home: Anytown USA
... \n\t    Phone: 555-555-555
... \n\t  Other Home: Somewhere Else
... \n\t Notes: Other data
... \n\tName: Jane Smith
... \n\t  Misc: Data with spaces'''
>>> {line.strip().split(': ')[0]:line.split(': ')[1] for line in data.splitlines() if line.strip() != ''}
{'Name': 'Jane Smith', 'Other Home': 'Somewhere Else', 'Notes': 'Other data', 'Misc': 'Data with spaces', 'Phone': '555-555-555', 'Home': 'Anytown USA'} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T15:59:37.067

你可以用这个

```
string.strip().split(":") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T07:17:45.113

我不得不在换行符 (\n) 和制表符 (\t) 上拆分字符串。我所做的是首先用 \t 替换 \n ，然后在 \t 上拆分

```
example_arr = example_string.replace("\n", "\t").split("\t") 
```

# ruby-on-rails - Rails 3 + 移动 + 文件上传

> ID：12533959
> 
> 赞同：1
> 
> 时间：2012-09-21T15:54:38.550
> 
> 标签：ruby-on-rails, mobile, file-upload, mime-types

我正在尝试从我的网页的移动版本设置文件上传器。我做了这个 `Mime::Type.register_alias "text/html", :mobile`

在我的 mimetypes 文件中，但是当格式为移动时，“file_field”不会发送数据。我已经测试过了。

关于我在这里缺少什么的任何建议？关于格式的东西？rails 管理文件上传的方式？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T16:35:45.287

嗯...这个问题与其他问题有关。问题是移动请求是通过 AJAX 执行的，我在这里发送一个文件。因此，文件不能以本机方式通过 AJAX 发送。我不得不为此使用一个库（Jquery Forms）。

希望这对其他人有所帮助。干杯，

# jquery - 将标题信息添加到 jQuery.post

> ID：12533961
> 
> 赞同：1
> 
> 时间：2012-09-21T15:54:44.460
> 
> 标签：jquery, ajax, wordpress, header

我有以下代码：

```
jQuery.post(encodeURI(ajaxurl + '?action=form_submission'), 
{ 'propertyID[]': propArray, submit: 'Export Gallery', NG_nonce: '<?php print    $this->nonce; ?>' },
function (result) {
   var obj = jQuery.parseJSON(result);
   if (typeof(obj['error']) == 'undefined') {
      if (typeof(obj['url']) != 'undefined') {
         window.location.href = obj['url'];
         var confirmBox = confirm('The gallery has been exported.');
      } else {
         alert('Error');
      }
   } else {
      alert(obj['error']);
   }
   if (redirect == 1)   {
        window.location.href = '/wp-admin/media-upload.php?post_id='+propertyID+'&type=image&tab=<?php print $_REQUEST['tab']; ?>';
   } else {
        jQuery(element).html(oldHtml);
   }
}); 
```

这非常有效，它创建了一个压缩文件夹，然后下载到用户机器上。我需要做的是添加标题信息，以便为用户提供“另存为”对话框。我尝试了几种不同的方法（尝试使用 request.setRequestHeader，包括数据部分中的标头信息），但我没有运气。有人可以向我发送正确的方向吗？谢谢。

或者有没有办法在之前添加标题信息

```
window.location.href = obj['url'] 
```

我需要弄清楚这一点，再次感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:16:40.897

这个“另存为”对话框取决于浏览器。不同的浏览器会以不同的方式处理文件下载。

# opengl - 调整窗口大小后如何保持相同大小的对象（比如说一个正方形）

> ID：12533967
> 
> 赞同：2
> 
> 时间：2012-09-21T15:54:54.693
> 
> 标签：opengl, glut

> **可能重复：**
> [在 OpenGL 中更改投影](https://stackoverflow.com/questions/12518603/changing-projection-in-opengl)

我想找到一种保持对象大小相同的方法。我有这个正方形，它从屏幕的左上角移动到右下角。当我调整输出窗口的大小时，正方形的大小也会增加。

下面是我的显示和重塑功能。

```
void Changesize(int w,int h)
{

    ww=w;
         wh=h;
    glViewport(0,0,w,h);
    glMatrixMode(GL_PROJECTION);
        glLoadIdentity() ;
    glMatrixMode(GL_MODELVIEW);

}

void display(void)
{   

    printf("i=%f & j=%f \n",i,j);
    glClear (GL_COLOR_BUFFER_BIT);
    glColor3i (rand(), rand(), rand());
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
    glLoadIdentity();
    glOrtho(0.0, 1.0, 0.0, 1.0, -1.0, 1.0);
    glBegin(GL_POLYGON);
    glColor3i (rand(), rand(), rand());
    glVertex3f (i, j-0.125, 0.0);
    glVertex3f (i+0.125, j-0.125, 0.0);
    glVertex3f (i+0.125, j , 0.0);
    glVertex3f (i, j, 0.0);
    glEnd();
    glFlush ();
    usleep(100000);
    i=i+0.0125;
    j=j-0.0125;

    if (i>0.999999)
        {
            i=0;
            j=1;
        }
    glutSwapBuffers();
    glutPostRedisplay();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:05:16.623

试一试：

```
#include <GL/glut.h>

void display(void)
{
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    glColor3ub(255,0,0);
    glPushMatrix();
        glScalef(50,50,50);
        glBegin(GL_QUADS);
            glVertex2f(-1,-1);
            glVertex2f(1,-1);
            glVertex2f(1,1);
            glVertex2f(-1,1);
        glEnd();
    glPopMatrix();

    glutSwapBuffers();
}

void reshape(int w, int h)
{
    glViewport(0, 0, w, h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho( -w/2.0, w/2.0, -h/2.0, h/2.0, -1, 1);
}

int main(int argc, char **argv)
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);

    glutInitWindowSize(800,600);
    glutCreateWindow("Scale");

    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutMainLoop();
    return 0;
} 
```

# twitter - Twitterizer 使用 Stream 关 注用户

> ID：12533974
> 
> 赞同：2
> 
> 时间：2012-09-21T15:55:31.173
> 
> 标签：twitter, twitterizer

我目前正在使用 Twitterizer 框架来跟踪许多关键字（Twitter API 的限制是 400）。因此，我尝试关注一些用户（他们的时间线），但我收到错误“NotAcceptable”。

示例代码 A（这有效）：

```
StreamOptions options = new StreamOptions();
options.Track.Add("keyword 1");
options.Track.Add("keyword 2");
... 
```

示例代码 B（有效）：

```
StreamOptions options = new StreamOptions();
options.Follow.Add("ID1");
options.Follow.Add("ID2");
... 
```

在这里，我收到错误“NotAcceptable”。我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:13:57.560

这将是因为您开始的流的类型。在您发布代码之后，您应该有代码来*启动*您的流：

```
stream.StartPublicStream(...); 
```

我的猜测是你实际上有*StartUserStream*错误......

# hibernate - 我怎样才能在 Hibernate 中获得一个惰性字段

> ID：12533975
> 
> 赞同：4
> 
> 时间：2012-09-21T15:55:30.987
> 
> 标签：hibernate, jpa

如何使用实体管理器获取惰性字段？这是我的代码片段

```
public class Internet implements Serializable{
      int id;
      // related fields 
      @ManyToOne (fetch=FetchType.LAZY)
      Browsers brow;
      //related public getters and setters.
 } 
```

这是我的浏览器休眠类；

```
public class Browser implements Serializable{

  int id;
  String name;
  //and some other useful fields. 

  //here public getters and setters.
  public String getName(){
     return name; 
  }

  public void setName(String name){
     this.name = name
  }
  //and few more.
} 
```

现在我的要求是，当我使用 EntityManger 的使用 Internet.id 的查找方法获取浏览器实例时，我想要浏览器的名称。

这两个类在不同的包中。所以我无法直接访问 browser.name。我想要浏览器的名称。当我调试我的程序 browser.name 为空。有什么方法可以使用 EntityManager 获取 browser.name 的值。

我读了几篇与这个问题相关的帖子，但我没有得到任何线索。任何机构都可以帮助我。

> 这是我的代码如何使用我的页面和几件事：

```
InternateObjectUsingPage usingPage = (InternateObjectUsingPage)pageWithName(InternateObjectUsingPage.class.getName());
    _em = EntityManager.createEntityManager();
    Internet ipReg = _em.find(Internet.class, _currentRow.getIpRegId()) ; // _currentRow.getInRegId() is id. 
    ipReg.getBrowser(); // recently i added as per the suggestion.
    if(ipReg != null){
        _refresh = true;
        usingPage.setInternet(ipReg);
        return usingPage;
    }
    _em.close(); 
```

这就是我使用我的代码的方式，但我看不出有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:38:32.093

假设你在 em 变量中有你正在使用的 EntityManager 实例，以及要在 id 中使用的 Internet 对象的 id，我假设在你的第一页上的某个时刻你正在调用 find，如下所示：

```
Internet internet = em.find(Internet.class, id); 
```

在**同一方法的下一行代码中**执行以下操作：

```
internet.getBrowser(); 
```

您不必对结果执行任何操作，只需在与 .find 调用相同的事务上下文中调用该方法。触发该属性将导致 EntityManager 加载该字段。然后，您可以在任何地方传递您的互联网对象，并期望 brow 属性为非空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:10:28.527

您可以在查询`Internet`对象的方法中尝试此操作；调用`internet.getBrowser()`以在该点本身加载它。

```
Internet internet = 
  (Internet) query.getSingleResult(); // or the way you fetch via EM
internet.getBrowser(); 
```

或者如果您查询对象列表：

```
List<Internet> internetList = 
  (List<Internet>) query.getSingleResult();  // or the way you fetch via EM
for(Internet internet: internetList){     
    internet.getBrowser();
} 
```

我假设您已经指定`FetchType.EAGER`，因为您不想在`Browser`每次加载时都加载`Internet`。

# iphone - iOS：可以在标签之间向左/向右滑动吗？

> ID：12533976
> 
> 赞同：15
> 
> 时间：2012-09-21T15:55:38.453
> 
> 标签：iphone, ios, ipad

是否可以在屏幕上的任意位置向左或向右滑动以切换 iOS 中的选项卡？谢谢

示例 1：只需向左/向右滑动即可在日历上切换月份 示例 2：从 0:12 开始[http://www.youtube.com/watch?v=5iX4vcsSst8](http://www.youtube.com/watch?v=5iX4vcsSst8)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T16:24:21.017

如果您使用的是标签栏控制器，您可以在每个标签的视图上设置滑动手势识别器。当手势识别器被触发时，它可以改变tabBarController.selectedTabIndex

此效果不会被动画化，但会通过滑动手势切换选项卡。当我有一个带有 UITabBar 的应用程序时，这大约是我使用的，在左侧和右侧带有按钮，并通过滑动手势来更改活动选项卡。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(tappedRightButton:)];
    [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [self.view addGestureRecognizer:swipeLeft];

    UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(tappedLeftButton:)];
    [swipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [self.view addGestureRecognizer:swipeRight];
}

- (IBAction)tappedRightButton:(id)sender
{
    NSUInteger selectedIndex = [rootVC.tabBarController selectedIndex];

    [rootVC.tabBarController setSelectedIndex:selectedIndex + 1];
} 

- (IBAction)tappedLeftButton:(id)sender
{
    NSUInteger selectedIndex = [rootVC.tabBarController selectedIndex];

    [rootVC.tabBarController setSelectedIndex:selectedIndex - 1]; 
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-08-10T13:51:19.003

假设您正在使用`UITabBarConroller`

您所有的子 ViewControllers 都可以从一个为您完成所有繁重工作的类继承。

这就是我的做法

```
class SwipableTabVC : UIViewController {

    override func viewDidLoad() {
        super.viewDidLoad()

        let left = UISwipeGestureRecognizer(target: self, action: #selector(swipeLeft))
        left.direction = .left
        self.view.addGestureRecognizer(left)

        let right = UISwipeGestureRecognizer(target: self, action: #selector(swipeRight))
        right.direction = .right
        self.view.addGestureRecognizer(right)
    }

    func swipeLeft() {
        let total = self.tabBarController!.viewControllers!.count - 1
        tabBarController!.selectedIndex = min(total, tabBarController!.selectedIndex + 1)

    }

    func swipeRight() {
        tabBarController!.selectedIndex = max(0, tabBarController!.selectedIndex - 1)
    }
} 
```

因此，作为 UITabControllers 一部分的所有视图控制器都可以继承`SwipableTabVC`而不是 UIViewController。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-08-25T05:21:08.427

尝试这个，

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UISwipeGestureRecognizer *swipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(tappedRightButton:)];
    [swipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [self.view addGestureRecognizer:swipeLeft];

    UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(tappedLeftButton:)];
    [swipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [self.view addGestureRecognizer:swipeRight];
}

- (IBAction)tappedRightButton:(id)sender
{
    NSUInteger selectedIndex = [rootVC.tabBarController selectedIndex];

    [self.tabBarController setSelectedIndex:selectedIndex + 1];

    //To animate use this code
    CATransition *anim= [CATransition animation];
    [anim setType:kCATransitionPush];
    [anim setSubtype:kCATransitionFromRight];
    [anim setDuration:1];
    [anim setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseIn]];
    [self.tabBarController.view.layer addAnimation:anim forKey:@"fadeTransition"];
} 

- (IBAction)tappedLeftButton:(id)sender
{
    NSUInteger selectedIndex = [rootVC.tabBarController selectedIndex];

    [self.tabBarController setSelectedIndex:selectedIndex - 1]; 

    CATransition *anim= [CATransition animation];
    [anim setType:kCATransitionPush];
    [anim setSubtype:kCATransitionFromRight];

    [anim setDuration:1];
    [anim setTimingFunction:[CAMediaTimingFunction functionWithName:
                              kCAMediaTimingFunctionEaseIn]];
    [self.tabBarController.view.layer addAnimation:anim forKey:@"fadeTransition"];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-26T07:53:23.167

我建议将整个内容嵌入到 pageviewcontroller 中，如下所示： [https ://github.com/cwRichardKim/RKSwipeBetweenViewControllers](https://github.com/cwRichardKim/RKSwipeBetweenViewControllers)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T16:03:06.177

当然，这是可能的。

每个屏幕都需要有一个`UISwipeGestureRecognizer`滑动，然后调用标签栏执行所需的操作。可以是从增加或减少活动选项卡到任何你想要的东西。

为了防止代码重复，您可以创建一个自定义`UIViewController`并让您的所有视图控制器从那里继承（或其他几种方式）。

# excel - 如何实时验证和更正excel中的数据？

> ID：12533980
> 
> 赞同：3
> 
> 时间：2012-09-21T15:55:55.400
> 
> 标签：excel, vba, validation

我知道 excel 具有数据验证功能，但有没有办法自动为用户应用更改，而不是提示他们有问题？

例如，我们有一个通用的电子表格模板供我们的内部系统添加项目。在第一列中，对于项目编号，不能有任何非法字符。因此，如果用户在 A1 中输入 AN-XR10LP/1，然后单击下一个单元格，我希望验证将 A1 值更正为 ANXR10LP1，而无需用户执行任何操作。

关于如何从这个开始的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:02:24.833

我认为您只能使用 VBA 完成此操作。试试下面的代码。如果您对单元格进行数据验证，则可能需要对其进行调整。

将此模块放置在您希望验证数据的工作表对象中。

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Target.Column = 1 And Target.Rows.Count = 1 Then '-> make sure row count is 1 and target is in column A, can further refine if needed

    Dim strValue As String

    strValue = CleanString(Target.Value)

    Application.EnableEvents = False
    Target = strValue
    Application.EnableEvents = True

End If

End Sub

Function CleanString(str As String) As String

CleanString = Replace(str, "-", "")
CleanString = Replace(CleanString, "/", "")
'...
'keep adding replacements as needed

End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:02:09.310

为 Worksheet_Change 创建一个处理程序

```
Private Sub Worksheet_Change(ByVal Target As Range)

End Sub 
```

在处理程序中，查看`Target`指向的位置，并在此基础上应用验证逻辑。

`Change`确保在写回更正值时忽略引发的事件：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    static self_protect as boolean

    if self_protect then exit sub

    ...
    self_protect = true
    Target.Value = "corrected value"
    self_protect = false
    ...

End Sub 
```

# ajax - 如何知道 JSON 字符串是否已加载？

> ID：12533989
> 
> 赞同：1
> 
> 时间：2012-09-21T15:56:36.600
> 
> 标签：ajax, json, jquery

原谅我，我在这里是一个完整的 JSON 新手。我正在尝试从外部文件加载 json 信息文件，但我不确定如何判断信息是否已加载。这是我到目前为止所拥有的：

```
$(document).ready(function(){
    $.ajax({
        dataType: 'json',
        success: function(string) {
            data = $.parseJSON(string);
            console.log(data);
            alert(data);
            document.write(data);
        },
        url: 'http://www.site.com/mystuff.php'
    });  
}); 
```

我试过放各种东西来查看信息是否已加载，如您所见，但什么也没有。我怎么知道我是否得到了什么？我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:05:21.397

正如已经指出的，有两件事：

*   将数据类型设置为 JSON 时无需解析字符串
*   检查请求是否成功返回

这可能看起来像这样：

```
$(document).ready(function(){
    $.ajax({
        dataType: 'json',
        success: function(json) {
            console.log(data);
        },
        error : function(xhr, text) {
            console.log('An error occurred', xhr, text);
        },
        url: 'http://www.site.com/mystuff.php'
    });  
}); 
```

将数据类型设置为 JSON 时，您还必须确保 mystuff.php 将`Content-Type`标头设置为`application/json`：

```
<?php
    header('Content-Type: application/json');
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:05:17.340

无需再次解析为json..您可以直接使用该对象还添加错误函数以检查您是否收到任何错误..

```
$(document).ready(function(){
    $.ajax({
        dataType: 'json',
        beforeSend : function() {
           console.log('Before Ajax Request Starts !!');
        },
        success: function(data) {
            console.log(data);
            alert(data);
            document.write(data);
        },
        error : function(jqXHR, textStatus, errorThrown) {
             alert("Error occurred: " + errorThrown);
        },
         beforeSend : function() {
           console.log('Ajax Request Complete  !!');
        },
        url: 'http://www.site.com/mystuff.php'
    });  
}); 
```

这样可以确保您在每一步都有反馈..

# ios - 音频队列处理抽头到底是什么？

> ID：12533998
> 
> 赞同：5
> 
> 时间：2012-09-21T15:57:10.760
> 
> 标签：ios, core-audio, audioqueue

这些在 OS X 中已经存在了一段时间，最近才在 ios 中与 ios 6 一起使用。我试图弄清楚它们究竟让你做什么。所以这个想法是你可以进入音频队列并在发送数据之前处理数据。这是否意味着您现在可以截取来自不同应用程序的原始音频并在播放之前对其进行处理（例如 iOS 音乐播放器）？换句话说，应用间音频可能吗？我已经阅读了 audioQueue.h 文件，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T16:17:01.473

将其视为您的音频自定义处理（例如插入效果）或读取（例如用于分析或显示目的）队列样本数据的中级条目。用于读取或处理 AQ 数据的基本接口。

> 这是否意味着您现在可以截取来自不同应用程序的原始音频并在播放之前对其进行处理（例如 iOS 音乐播放器）？换句话说，应用间音频可能吗？

不——它不是进程间的；您无权访问其他进程的音频队列。这些用于*您的*队列的示例数据。它们可用于简化一般音频渲染或分析链（常见情况，按应用数量计算）。我的猜测是，提供它是因为很多人想要*更轻松*地访问此示例数据以进行处理或分析。iOS 上的自定义处理条目实现起来也可能更复杂（即 AudioUnit 的可用性受到限制）。