# StackOverflow 问答 15653000-15653999

# cakephp - 使用 HABTM 使用“软删除”技术的最佳方法是什么

> ID：15653003
> 
> 赞同：2
> 
> 时间：2013-03-27T06:25:13.723
> 
> 标签：cakephp, has-and-belongs-to-many

目前我正在使用 cakephp 框架。在我的项目中有三个表（例如：menu、menu_position 和 men_position_rel）。

在菜单表中我有 id, menu_title 列

在 menu_position 表中我有 id, position_title 列

在 men_position_rel 表中，我有 menu_id、position_id 列

在 CakePHP 2.x 中使用 HABTM 表，使用“软删除”技术的最佳方式是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T07:59:58.243

我在这里得到了一个简单而主要的解决方案：http: [//mrphp.com.au/blog/working-habtm-form-data-cakephp](http://mrphp.com.au/blog/working-habtm-form-data-cakephp)

# java - Wicket AutoCompleteTextField 模型铸造

> ID：15653008
> 
> 赞同：1
> 
> 时间：2013-03-27T06:25:29.957
> 
> 标签：java, autocomplete, wicket

看起来 autocompletetextfield 的模型对象是一个字符串，即使它应该是一个员工，这会导致无法从字符串转换为员工的异常。为什么？以及如何解决？

```
 final DefaultCssAutocompleteTextField<Employee> field = new DefaultCssAutocompleteTextField<Employee>("field", new Model<Employee>(model.getObject().getMatch().getSupervisor())) {
            @Override
            protected Iterator<Employee> getChoices(String input) {
                if (Strings.isEmpty(input)){
                    List<Employee> emptyList = Collections.emptyList();
                    return emptyList.iterator();
                }
                return supervisorDao.getAutoCompleteCapableSupervisors(input, 6).iterator();
            }
        };

        form.add(field);

        field.add(new AjaxFormSubmitBehavior(form, "onchange") {
            @Override
            protected void onSubmit(AjaxRequestTarget target) {

                //this generates an exception: cant cast from string to employee. why? and how can it be fixed?
                Employee e = supervisorService.findOne(field.getModelObject().getId());

                //do some stuff with the employee and some components

            }

            @Override
            protected void onError(AjaxRequestTarget target) {
                //do nothing
            }
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T10:50:14.600

的 javadoc`AutoCompleteTextfield`说：

> 要将输入转换回非字符串类型，您必须提供自定义的`IConverter`，方法是覆盖`#getConverter(Class)`或`IConverter`在应用程序的`ConverterLocator`.

# excel - 带有多行数据的 Lotus Notes 视图 导出到 Excel

> ID：15653012
> 
> 赞同：0
> 
> 时间：2013-03-27T06:25:40.603
> 
> 标签：excel, lotus-notes, lotus-domino, lotusscript

我需要将 Lotus Notes 视图导出到 Excel。问题是，我在视图中有两列显示多个值，其中“新行”作为分隔符。我尝试了内置的导出功能以及带有少量格式的新莲花脚本导出功能。在这两种情况下，多个值都不能出现在一个单元格中。每行仅显示第一个值。其余值将被忽略。我们的用户只希望 Excel 报告在新行中包含多个值，而不是任何其他分隔符。

请帮助我提出您的建议。我正在使用 Lotus notes 6.5 和 Microsoft Office 2010。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T17:09:39.287

在 Lotusscript 中编写导出。不难，您可以完全控制出口。如果字段是多值字段，只需将值作为变体读取，然后在每个项目之间使用换行符将它们写入输出文件。

这是如何解决它的一个想法：

```
%REM
    Agent View Export
    Created Mar 27, 2013 by Karl-Henry Martinsson
    Description: Code to export a specified view as CSV.
    Copyright (c) 2013 by Karl-Henry Martinsson
    This code is distributed under the terms of 
    the GNU General Public License V3\. 
    See http://www.gnu.org/licenses/gpl.txt
%END REM

Option Public
Option Declare

Class RowData
    Public column List As String

    Public Sub New()
    End Sub

    Public Sub SetColumnHeader(view As NotesView)
        Dim viewcolumn As NotesViewColumn
        Dim cnt As Integer
        ForAll vc In view.Columns
            Set viewcolumn = vc
            column(CStr(cnt)) = viewcolumn.Title 
            cnt = cnt + 1
        End Forall  
    End Sub

    Public Sub SetColumnValues(values As Variant)
        Dim cnt As Integer
        Dim tmp As String 
        ForAll v In values
            If IsArray(v) Then
                ForAll c In v
                    tmp = tmp + c + Chr$(13)
                End ForAll
                column(CStr(cnt)) = Left$(tmp,Len(tmp)-1)
            Else
                column(CStr(cnt)) = v 
            End If
            cnt = cnt + 1
        End ForAll          
    End Sub
End Class

Class CSVData
    Private row List As RowData
    Private rowcnt As Long

    %REM
        Function New
        Description: Open the view and read view data 
        into a list of RowData objects.
    %END REM    
    Public Sub New(server As String, database As String, viewname As String)
        Dim db As NotesDatabase
        Dim view As NotesView
        Dim col As NotesViewEntryCollection
        Dim entry As NotesViewEntry
        Dim colcnt As Integer

        Set db = New NotesDatabase(server, database)
        If db Is Nothing Then
            MsgBox "Could not open " + database + " on " + server,16,"Error" 
            Exit Sub
        End If
        Set view = db.GetView(viewname)
        If view Is Nothing Then
            MsgBox "Could not access view " + viewname + ".",16,"Error" 
            Exit Sub
        End If
        Set col = view.AllEntries()
        rowcnt = 0
        Set entry = col.GetFirstEntry()
        Set row("Header") = New RowData()
        Call row("Header").SetColumnHeader(view)
        Do Until entry Is Nothing
            rowcnt = rowcnt + 1
            Set row(CStr(rowcnt)) = New RowData()
            Call row(CStr(rowcnt)).SetColumnValues(entry.ColumnValues)
            Set entry = col.GetNextEntry(entry) 
        Loop
    End Sub

    %REM
        Function CSVArray
        Description: Returns a string array of CSV data by row
    %END REM
    Public Function CSVArray() As Variant
        Dim rowarray() As String 
        Dim textrow As String
        Dim cnt As Long
        ReDim rowarray(rowcnt) As String

        ForAll r In row
            textrow = ""
            ForAll h In r.column 
                textrow = textrow + |"| + Replace(h,Chr$(13),"\n") + |",|
            End ForAll
            rowarray(cnt) = Left$(textrow,Len(textrow)-1)
            cnt = cnt + 1
        End ForAll  
        CSVArray = rowarray
    End Function

    %REM
        Function HTMLArray
        Description: Returns a string array of HTML data by row
    %END REM
    Public Function HTMLArray() As Variant
        Dim rowarray() As String 
        Dim textrow As String
        Dim cnt As Long
        ReDim rowarray(rowcnt) As String

        ForAll r In row
            textrow = ""
            ForAll h In r.column 
                textrow = textrow + |<td>| + Replace(h,Chr$(13),"<br>") + |</td>|
            End ForAll
            rowarray(cnt) = "<tr>" + textrow + "</tr>"
            cnt = cnt + 1
        End ForAll  
        HTMLArray = rowarray
    End Function

End Class

%REM 
     ******************************** 
     Example of how to call the class
     ********************************
%END REM
Sub Initialize
    Dim csv As CSVData
    Dim outfile As String

    Set csv = New CSVData("DominoServer/YourDomain", "names.nsf", "People\By Last Name")
    outfile = "c:\ExcelExportTest.csv"
    Open outfile For Output As #1
    ForAll row In csv.CSVArray()
        Print #1, row
    End ForAll
    Close #1

    outfile = "c:\ExcelExportTest.xls"
    Open outfile For Output As #2
    Print #2, "<table>"
    ForAll row In csv.HTMLArray()
        Print #2, row
    End ForAll
    Print #2, "</table>"
    Close #2
End Sub 
```

# html - 3 个宽度正好为 33% 的内联块 div 不适合父级

> ID：15653017
> 
> 赞同：19
> 
> 时间：2013-03-27T06:25:57.727
> 
> 标签：html, cross-browser, css

这是一个常见问题，但我无法弄清楚为什么会发生这种情况。

我有一个父 div，在那个 div 里面我有 3 个宽度设置为 33% 的 div（确切地说，不是 33.3%！）和`display: inline-block`.

在 Chrome 中它运行良好，但在 Mozilla 和 Opera 中却不行（我还没有在 IE 中测试它）。我认为问题可能出在浏览器用来从百分比计算像素大小的算法中。但是当我检查 DOM 指标时，我发现父母的宽度是 864 像素，孩子的宽度是 285 像素（这是正确的：864 * .33 = 285.12）。但是为什么它不适合父母呢？285 * 3 = 855，比父母的宽度小 9px！

哦，是的，所有 div 的填充、边距和边框都设置为 0，DOM 指标证实了这一点。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-27T06:59:18.677

**HTML 源代码中的空格**

在 HTML 源代码中，当您有文本或图像行或元素时`inline-block`，如果它们之间有任何空格（空格、制表符或新行），则当页面被渲染。例如，在下面的 HTML 中，四个内容之间会出现一个空格：

```
one
two
<img src="three.png"/>
<span style="display: inline-block;">four<span> 
```

这对于文本行以及出现在文本行中的小图像或 HTML 元素非常有用。但是当`inline-block`用于布局目的而不是作为在一段文本中添加内容的方式时，它会成为一个问题。

**删除多余的空间**

避免在元素之间添加额外 4px 左右的空间的最安全的跨浏览器方法`inline-block`是删除 HTML 源代码中 HTML 标记之间的任何空白。

例如，如果您有`ul`3 个浮动`li`标签：

```
<-- No space, tabs, or line breaks between </li> and <li> -->
<ul>
    <li>...</li><li>...</li><li>...</li>   
</ul> 
```

不幸的是，这会损害网站的可维护性。除了使代码不可读之外，它还严重损害了*数据和格式的分离*。

如果另一个程序员后来出现并决定将每个`li`标签放在源代码中的单独行（不知道为什么标签在同一行，或者可能通过 HTML Tidy 运行它，甚至没有机会注意到任何相关的 HTML评论），突然网站出现了一个可能难以识别的格式错误。

**考虑浮动元素**

空白行为强烈表明它可能不适合`inline-block`用于一般布局目的，将其用于除了在一段文本流中添加内容之外的任何内容。

另外，在某些情况下，`inline-block`内容很难完全设置样式和对齐，尤其是在旧浏览器上。

**其他解决方案的快速总结**

1.  将关闭标签与下一个打开标签放在同一行，它们之间没有空格。
2.  使用 HTML 注释填充关闭标记和下一个打开标记之间的所有空白（如 @Arbel 建议的那样）。
3.  为每个元素添加负左边距（通常为 -3px 或 -4px，取决于字体大小）。我不推荐这种特殊的方法。
4.  将`font-size`容器元素的 设置为 0 或 0.01em。这在 Safari 5 中不起作用（不确定更高版本），并且可能会干扰*响应式设计*网站或任何`font-size`使用`px`.
5.  使用 JavaScript 或 jQuery 从容器中删除纯空格文本节点。这在 IE8 及更早版本中不起作用，因为当元素之间只有空格时，不会在这些浏览器中创建文本节点，尽管元素之间仍会添加空格。
6.  为容器设置`letter-spacing`和`word-spacing`（如@PhillipWills 建议的那样）。[更多信息](https://stackoverflow.com/a/5078358/1306809)。这需要标准化`em`网站上的尺寸，这可能不是所有网站的合理选择。
7.  添加`text-space-collapse: discard;`到容器（以前称为`white-space-collapse`）。不幸的是，[这种 CSS3 样式](http://www.w3.org/TR/2011/WD-css3-text-20110901/#white-space-collapsing)还没有被任何浏览器支持，并且标准还没有完全定义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-27T07:57:56.017

如果您不想弄乱 HTML 格式，例如`inline-block`为了将来的可读性将所有元素写在一行中，并且还不想在它们之间添加额外的空白，您可以“评论”空白。

例如，在您的代码中，这将解决问题，它甚至可以使用 33.3% 而不是 33%：

```
.parent {
    width: 100%;
 }
.child{
    display: inline-block;
    width: 33.3%;
} 
```

/\

```
<div class="parent">
       <div class="child">bla-bla1</div><!-- 
    --><div class="child">bla-bla2</div><!-- 
    --><div class="child">bla-bla3</div>
</div> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T07:11:28.130

添加`float:left;`

```
.parent{
    width: 100%
}
.child{
    float:left;
    display: inline-block;
    width: 33%

} 
```

[http://jsfiddle.net/H6Whc/1/](http://jsfiddle.net/H6Whc/1/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-27T06:54:25.480

内部 div 之间添加了一个空格。有一些 CSS voodoo 可以纠正这个问题：

```
div {
    letter-spacing: -.31em;
    word-spacing: -.43em;
}
div div {
    letter-spacing: normal;
    word-spacing: normal;
} 
```

当然，您可能更喜欢使用类或其他东西来区分父母和孩子。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-23T19:37:45.030

有没有人尝试过显示：表？如果这不是一个好主意，为什么不呢？这适用于所有现代浏览器，我将其测试到 IE9。

```
.parent{  
    display: table;
    width: 100%;
}
.containers {
    box-sizing: border-box;
    border: 1px solid #000;
    height: 50px;
    width: 33.3%;
    display: table-cell;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-04T07:14:21.813

许多评论和@Avin 都提到了这一点，但将其删除`display: inline-block`并替换为`float: left`作品。

```
.parent{
    width: 100%
}
.child{
    float:left;
    width: 33%
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-03-27T11:41:21.810

`display: table`这是一个常见的问题，但是通过将CSS 属性分配给父 div可以很容易地解决它。

# opencv - 如何在 OpenCv 中访问单行 Mat 的元素？

> ID：15653020
> 
> 赞同：2
> 
> 时间：2013-03-27T06:26:17.790
> 
> 标签：opencv

我有一个单行垫子。`rows=1,cols=720`这个垫子是由 OpenCV 中的 reduce 函数产生的。但是当我使用`mat.at<int>(0,i)`它访问它的元素时，总是断言在第 537 行的文件 mat.hpp 中的函数中失败：

```
template<typename _Tp> inline _Tp& Mat::at(int i0, int i1)
{
    CV_DbgAssert( dims <= 2 && data && (unsigned)i0 < (unsigned)size.p[0] &&
        (unsigned)(i1*DataType<_Tp>::channels) < (unsigned)(size.p[1]*channels()) &&
        CV_ELEM_SIZE1(DataType<_Tp>::depth) == elemSize1());
    return ((_Tp*)(data + step.p[0]*i0))[i1];
} 
```

怎么做？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:41:18.227

如果 cv::MAT 是一维的（即只有一个维度大于一），您可以这样做`mat.at<int>(i)`

但最可能的原因仍然是 mat 不是 int 类型，正如@SchighSchagh 所建议的那样。

# android - 如何使用 achartengine 设置条形宽度。我的最后一个酒吧被挤掉了

> ID：15653022
> 
> 赞同：2
> 
> 时间：2013-03-27T06:26:27.580
> 
> 标签：android, width, bar-chart, achartengine

我有一个显示 3 个条形的条形图。以不同宽度显示的三个条形图。如何设置所有条的宽度相等？

这是我的条形图的快照

![在此处输入图像描述](../Images/9ebdc32312fb15fe9341fd3c7c3e9a8d.png)

请任何人建议！

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:01:00.150

看起来您有 2 个系列的数据。一个系列有 2 件，绿色的只有一件。当您在系列中只有一项时，使用以下方法设置条形宽度可能是有意义的：

```
renderer.setBarWidth(width); 
```

另一种解决方案是在您的系列中添加至少两个项目。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T06:34:01.370

```
@SuppressLint("ParserError")
public class MainActivity extends Activity {
    private GraphicalView BarChartView;

    @SuppressLint("ParserError")
    @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        if (BarChartView==null )
        {

        XYMultipleSeriesRenderer renderer = buildBarRenderer();
        setChartSettings(renderer);
        BarChartView  = ChartFactory.getBarChartView(this, getBarDataset(), renderer, Type.DEFAULT);
        LinearLayout playout = (LinearLayout) findViewById(R.id.graph2);
        playout.addView(BarChartView);
        ;

        }
        else
        {

            BarChartView.repaint();
            BarChartView.setVisibility(View.GONE);

        }
    }

    private void setChartSettings(XYMultipleSeriesRenderer renderer)
    {
      renderer.setYTitle("Hits");
      renderer.setXAxisMin(0);
      renderer.setXAxisMax(7);
      renderer.setYAxisMin(0);
      renderer.setYAxisMax(900);

      }
    private XYMultipleSeriesDataset getBarDataset()
    {
            int[] y = {624,430,712};
            XYSeries series1 = new XYSeries("A");
            XYSeries series2 = new XYSeries("B");
            XYSeries series3 = new XYSeries("C");

            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

                    series1.add(1,y[0]);
                    dataset.addSeries(series1);

                    series2.add(2,y[1]);
                    dataset.addSeries(series2);

                    series3.add(3,y[2]);
                    dataset.addSeries(series3);

              return dataset;

    }
    protected XYMultipleSeriesRenderer buildBarRenderer() {
        XYMultipleSeriesRenderer mrenderer = new XYMultipleSeriesRenderer();

        double[] range = {0,5,0,5};

        mrenderer.setAxisTitleTextSize(16);
        mrenderer.setChartTitleTextSize(20);
         mrenderer.setLabelsTextSize(15);
         mrenderer.setLegendTextSize(15);
         mrenderer.setBarSpacing(0);
         mrenderer.setXLabels(1);
         mrenderer.addXTextLabel(2.5, "");
         mrenderer.setMargins(new int[] {20, 30, 15, 0});
         mrenderer.setAxesColor(Color.WHITE);
         mrenderer.setChartTitle("");
         mrenderer.setXTitle("");
         mrenderer.setInitialRange(range, 1);

         XYSeriesRenderer renderer1 = new XYSeriesRenderer();
         renderer1.setColor(Color.GREEN);
         XYSeriesRenderer renderer2 = new XYSeriesRenderer();
         renderer2.setColor(Color.GREEN);
         XYSeriesRenderer renderer3 = new XYSeriesRenderer();
         renderer3.setColor(Color.BLUE);

         mrenderer.addSeriesRenderer(renderer1);
         mrenderer.addSeriesRenderer(renderer2);
         mrenderer.addSeriesRenderer(renderer3);

          return mrenderer;

    }

} 
```

**这是xml文件**

```
main.xml

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainActivity"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout android:id="@+id/graph2"
       android:layout_width="160dip"
        android:layout_height="200dip"
        android:scaleType="fitEnd"
        android:layout_marginTop="40dip"
        android:layout_marginLeft="790dip"/>

  </RelativeLayout> 
```

试试看 ！！享受

# javascript - 如何在 javascript 中模拟 HTML5 拖放事件？

> ID：15653026
> 
> 赞同：19
> 
> 时间：2013-03-27T06:27:00.197
> 
> 标签：javascript, unit-testing

作为标题，我正在尝试在 javascript 中模拟 HTML5 拖放事件。

我查看了 jquery.ui.simulate 以及[这里](https://stackoverflow.com/questions/6157929/how-to-simulate-mouse-click-using-javascript)的模拟功能。两者似乎都可以通过模拟与 jQuery UI 对象一起使用的 mousedown、mousemove 和 mouseup 来模拟拖放。

但是拖放[演示站点](http://html5demos.com/drag#)等页面中的拖放事件似乎无法使用相同的方法进行模拟。触发 mousedown 似乎不会触发 dragstart HTML5 事件。

有没有办法根据模拟 mousedown/mousemove/etc 来触发 dragstart 事件，或者有没有办法直接模拟 dragstart（然后放下）事件？

我尝试修改[在 SO 上找到的模拟功能](https://stackoverflow.com/questions/6157929/how-to-simulate-mouse-click-using-javascript)以添加 HTML5 dragstart 事件，因此我可以在演示页面上尝试类似以下内容

```
 simulate( document.querySelector('#three'), 'dragstart') 
```

但我收到一个错误，因为我不确定如何在模拟的 dragstart 事件上正确创建 dataTransfer 对象。

基本上，我会接受任何可以让我使用 jquery.ui.simluate （或其他库）或使用修改版本的[演示拖放页面中的元素“三”到“bin”元素的答案](http://html5demos.com/drag#)[模拟](https://stackoverflow.com/questions/6157929/how-to-simulate-mouse-click-using-javascript)我在 SO 上找到的功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-03T20:44:29.857

最好的办法是重新创建一个虚假的事件对象。

在我对拖放文件上传库（[Droplit](https://github.com/braznaavtrav/DroplitJS)，无耻插件）的单元测试中，我一直在使用 jQuery 的[Event](https://api.jquery.com/category/events/event-object/)方法进行此操作。在我的源代码中，我设置了我的 drop 事件侦听器，`element.ondrop()`如下所示：

```
element.ondrop = function(e) {
  e.preventDefault();
  readFiles(e.dataTransfer.files);
}; 
```

然后我可以通过构建一个假事件对象并将其传递给`ondrop`方法来测试它。

```
element.ondrop($.Event('drop', {dataTransfer: { files: [] }})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-13T15:39:04.063

你可以试试这个。它使用原生 HTML5 事件，没有 jQuery

[https://github.com/Photonios/JS-DragAndDrop-Simulator](https://github.com/Photonios/JS-DragAndDrop-Simulator)

# android - Android获取当前位置的最佳方式

> ID：15653028
> 
> 赞同：8
> 
> 时间：2013-03-27T06:27:01.667
> 
> 标签：android, gps, currentlocation

对于以下情况，在android中获取当前位置的最佳方法是什么，

1.  如果 GPS 不可用，请从网络提供商处获取位置

2.  如果 GPS 可用并且可以获取当前位置，请从 GPS 提供商处获取位置

3.  如果 GPS 可用但无法获取当前位置（即不断搜索位置），请从网络提供商处获取位置。

    现在，如果 gps 不可用，我可以从网络获取位置，非常感谢满足上述情况的最佳答案。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:56:00.047

好吧，您可以使用[Timer](http://developer.android.com/reference/java/util/Timer.html)和[TimerTask](http://developer.android.com/reference/java/util/TimerTask.html)类。

```
LocationManager manager;
TimerTask mTimertask;
GPSLocationListener mGPSLocationListener;
int i = 0; //Here i works as counter;
private static final int MAX_ATTEMPTS = 250;

public void getCurrentLocation() {
    manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    mGPSLocationListener = new GPSLocationListener();

    manager.addGpsStatusListener(mGPSStatusListener);
    mTimerTask = new LocTimerTask(LocationManager.GPS_PROVIDER);

    if (manager.isProviderEnabled(LocationManager.GPS_PROVIDER)) {
        Log.v(TAG, "GPS ENABLED");
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L,
                50.0f, mGPSLocationListener);
    } else {
        turnGPSOn();
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L,
                50.0f, mGPSLocationListener);
    }

    if(manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        manager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000L,
                50.0f, mNetworkLocationListener);
    }

    if (manager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)) {
        Log.v(TAG, "GPS ENABLED");
        manager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
                1000L, 50.0f, mGPSLocationListener);
    }

    myLocTimer = new Timer("LocationRunner", true);
    myLocTimer.schedule(mTimerTask, 0, 500);
} 
```

**GPS状态监听器**

```
private GpsStatus.Listener mGPSStatusListener = new GpsStatus.Listener() {

    @Override
    public synchronized void onGpsStatusChanged(int event) {
        switch (event) {
        case GpsStatus.GPS_EVENT_SATELLITE_STATUS:
            Log.v(TAG, "GPS SAtellitestatus");
            GpsStatus status = manager.getGpsStatus(null);
            mSattelites = 0;
            Iterable<GpsSatellite> list = status.getSatellites();
            for (GpsSatellite satellite : list) {
                if (satellite.usedInFix()) {
                    mSattelites++;
                }
            }
            break;

        case GpsStatus.GPS_EVENT_FIRST_FIX:
            /*
             * Toast.makeText(getApplicationContext(), "Got First Fix",
             * Toast.LENGTH_LONG).show();
             */
            break;

        case GpsStatus.GPS_EVENT_STARTED:
            /*
             * Toast.makeText(getApplicationContext(), "GPS Event Started",
             * Toast.LENGTH_LONG).show();
             */
            break;

        case GpsStatus.GPS_EVENT_STOPPED:
            /*
             * Toast.makeText(getApplicationContext(), "GPS Event Stopped",
             * Toast.LENGTH_LONG).show();
             */
            break;
        default:
            break;
        }
    }
}; 
```

**位置监听器**

```
public class GPSLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location argLocation) {
        location = argLocation;
    }

    public void onProviderDisabled(String provider) {

    }

    public void onProviderEnabled(String provider) {

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {

    }
} 
```

**TimerTask 类**

```
class LocTimerTask extends TimerTask {
    String provider;

    public LocTimerTask(String provider) {
        this.provider = provider;
    }

    final Handler mHandler = new Handler(Looper.getMainLooper());

    Runnable r = new Runnable() {
        @Override
        public void run() {
            i++;
            Log.v(TAG, "Timer Task run" + i);
            location = manager.getLastKnownLocation(provider);

            if (location != null) {
                Log.v(TAG, "in timer task run in if location not null");
                isGPS = true;
                onLocationReceived(location);
                myLocTimer.cancel();
                myLocTimer.purge();
                mTimerTask.cancel();
                return;
            } else {
                Log.v(TAG, "in timer task run in else location null");
                isGPS = false;
                if (location == null && i == MAX_ATTEMPTS) {
                    Log.v(TAG, "if 1 max attempts done");
                    turnGPSOff();
                    location = manager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        Log.v(TAG,
                                "if 1 max attempts done Location from network not null");
                        Log.v(TAG,
                                "if 1 max attempts done Location from network not null coordinates not null");
                        onLocationReceived(location);
                        myLocTimer.cancel();
                        myLocTimer.purge();
                        mTimerTask.cancel();
                        return;
                    }
                } else {
                    return;
                }
            }
            i = 0;
        }
    };

    public void run() {
        mHandler.post(r);
    }
} 
```

此处的计时器已安排为每 500 毫秒运行一次。意味着，每 500 毫秒计时器任务`run method`将执行一次。在运行方法中，尝试从 GPS 提供商获取特定编号的位置。尝试次数（**此处为 MAX_ATTEMPTS**）说 5 或 10。如果它在指定的编号内获得位置。如果计数器（**Here i**）值超过 MAX_ATTEMPTS，则尝试使用该位置，然后从网络提供商获取位置。在获取位置时，我已将该位置传递给回调方法`onLocationReceived(Location mLoc)`，您可以在其中进一步处理位置数据。以下是您将如何使用回调方法：

**听众**

```
public interface OnLocationReceivedListener {
public void onLocationReceived(Location mLoc); //callback method which will be defined in your class. 
```

}

你的类应该实现上面定义的监听器。在你的课堂上：

```
@Override
public void onLocationReceived(Location mLoc) {
    //Do your stuff
} 
```

希望能帮助到你。如果有人有更好的方法，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:44:13.223

班级成员`boolean mIsGpsFix`；

请求 Gps 位置更新并设置倒计时

```
mCountDown.start();

private CountDownTimer mCountDown = new CountDownTimer(time to wait for Gps fix, same as right)
{

    @Override
    public void onTick(long millisUntilFinished)
    {

    }

    @Override
    public void onFinish()
    {
        // No fix after the desire amount of time collapse
        if (!mIsGpsFix)
        // Register for Network
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:31:23.847

```
If GPS is available and can get current location, 
```

对于上述问题，您可以尝试这样..

使用它，您可以获得当前位置的纬度和经度，然后传递值以获取地图。

```
public class MyLocationListener implements LocationListener

{

@Override

public void onLocationChanged(Location loc)

{

loc.getLatitude();

loc.getLongitude();

String Text = “My current location is: “ +

“Latitud = “ + loc.getLatitude() +

“Longitud = “ + loc.getLongitude();

Toast.makeText( getApplicationContext(),

Text,

Toast.LENGTH_SHORT).show();

}

@Override

public void onProviderDisabled(String provider)

{

Toast.makeText( getApplicationContext(),

“Gps Disabled”,

Toast.LENGTH_SHORT ).show();

}

@Override

public void onProviderEnabled(String provider)

{

Toast.makeText( getApplicationContext(),

“Gps Enabled”,

Toast.LENGTH_SHORT).show();

}

@Override

public void onStatusChanged(String provider, int status, Bundle extras)

{

}

}

} 
```

# tomcat - tomcat使用的ClassLoader

> ID：15653034
> 
> 赞同：1
> 
> 时间：2013-03-27T06:27:19.090
> 
> 标签：tomcat, web-applications, intellij-idea

我得到这个类没有找到错误。类名是 webapp 中的 com.bandstand.web.StartupListener。我单击堆栈跟踪中的 WebappClassLoader 类（如下），它引导我到 gwt-2.5.0\gwt-dev.jar!\org\apache\catalina\loader\WebappClassLoader

这很奇怪，因为我在这个 webapp（工件）中没有使用任何 gwt 类，尽管我在另一个工件中使用了它。

IntelliJ 是否只是错误地映射了类名？(WebappClassLoader)

如果您对tomcat有经验，您可以确认加载链正常吗？Bootstrap->Method.invoke->...（没有 gwt，它仍然以这种方式加载）

非常感谢

```
SEVERE: Error configuring application listener of class com.bandstand.web.StartupListener
java.lang.ClassNotFoundException: com.bandstand.web.StartupListener
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4149)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:675)
    at org.apache.catalina.startup.HostConfig.deployDescriptors(HostConfig.java:601)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:502)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:14:51.237

看起来是这个错误：http: [//youtrack.jetbrains.com/issue/IDEA-63362](http://youtrack.jetbrains.com/issue/IDEA-63362)。它应该在[IDEA 12.1 RC build](http://confluence.jetbrains.com/display/IDEADEV/IDEA+12.1+EAP)中修复。

# map - 使用具有多个键的 Clojure 更新

> ID：15653035
> 
> 赞同：6
> 
> 时间：2013-03-27T06:27:21.540
> 
> 标签：map, clojure

我正在尝试将函数应用于映射中与某个键匹配的所有元素。

```
(def mymap {:a "a" :b "b" :c "c"}) 
(update-in mymap [:a :b] #(str "X-" %)) 
```

我期待着

```
{:a "X-a", :c "c", :b "X-b"} 
```

但我明白了

> ClassCastException java.lang.String 无法转换为 clojure.lang.Associative clojure.lang.RT.assoc (RT.java:702)

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T06:37:44.880

`update-in`是更新映射中的单个键（在特定的嵌套级别，`[:a :b]`意味着在键的映射值中更新键：b：a。

你想要的可以使用reduce来完成：

```
(reduce #(assoc %1 %2 (str "X-" (%1 %2)))
        mymap
        [:a :b]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-13T13:16:16.170

这是一个通用函数：

```
(defn update-each
  "Updates each keyword listed in ks on associative structure m using fn."
  [m ks fn]
  (reduce #(update-in %1 [%2] fn) m ks))

(update-each mymap [:a :b] #(str "X-" %)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T13:11:58.590

在下面的解决方案中，haspmap如果先过滤，然后映射到str函数，然后与原始hashmap合并——

```
(def m {:a "a" :b "b" :c "c"})
(def keys #{:a :b})

(->> m
    (filter (fn [[k v]] (k keys)))
    (map (fn [[k v]] [k (str "X-" v)]))
    (into {})
    (merge m)) 
```

# javascript - 在javascript中使变量成为类

> ID：15653036
> 
> 赞同：0
> 
> 时间：2013-03-27T06:27:21.427
> 
> 标签：javascript

在我的应用程序中，我有一些看起来像这样的标签

`x Beer` `x Wine` `x Gummy Bears`

如果您单击“x”，则应该删除该标签。

标签的创建如下所示，“x”周围有一个链接。<%= %> 内的代码是 ruby​​。例如，参数化方法将使 Gummy Bears 标记类似于“Gummy-bears”。

```
<a href="#" class="link tag" data-span="<%= tag.name.parameterize %>"data-question="<%= @question.id %>" data-tag="<%= tag.name%>" >x</a>

<span class="<%=  tag.name.parameterize %>"><%= tag.name %></span> 
```

我在“x”链接上设置了 JavaScript 点击事件。我可以在单击后立即删除“x”，但在页面刷新之前我无法删除实际的标签名称，这不是我想要的。为了立即删除 tag.name，我围绕标签名称创建了一个跨度类，该类与“x”链接上的 html 数据属性之一相同。我将数据属性保存到变量（this.span）

```
 this.spanVariable = $(r.target).attr("data-span");  #gets the tag.name parameterize from the data-span 
```

例如，如果点击的是 Gummy Bear 标签，this.spanVariable 现在将是“Gummy-Bear”。

然后我想清空'Gummy-Bear'类的html，所以我想做这样的事情来评估javascript变量，使它成为类。我以为我可以在 #{} 中评估 javascript 但我猜不是:(

```
 $('.#{this.spanVariable}').html(''); 
```

有没有办法完成我想要做的事情，基本上使变量评估，这样它就可以成为也是一个 jquery 对象的类（即我可以调用 jquery 方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:37:02.563

您是否正在混合服务器和客户端？尝试

```
$('.'+this.spanVariable).empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:37:48.613

尝试这个：

```
$('.' + this.spanVariable).remove(); 
```

这种方式应该避免竞争条件，调用一些ajax，并在它返回时做一些事情：

```
$('.xclass').click(function(e) {
  var spanVariable = $(this).data("span");
  $.ajax("/my/server/endpoint?tag=" + spanVariable, {
    dataType: 'json',
    success: function(result) {
      $('.' + result.spanVariable).remove();
      $('.tag[data-span=' + result.spanVariable + ']').remove();
    },
    error: function() {
      console.log('Couldn't remove the tag...');
    }
  }
}); 
```

# css - 调整浏览器窗口大小时如何调整网页大小？

> ID：15653040
> 
> 赞同：-1
> 
> 时间：2013-03-27T06:28:17.420
> 
> 标签：css

在我的网站中，这是在背景图像幻灯片放映中工作的。但我也需要为身体做同样的事情。谁能帮我？

```
.cb-slideshow li span {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0px;
    left: 0px;
    color: transparent;
    background-size: cover;
    background-position: 50% 50%;
    background-repeat: none;
    opacity: 0;
    z-index: 0;
    -webkit-backface-visibility: hidden;
    -webkit-animation: imageAnimation 36s linear infinite 0s;
    -moz-animation: imageAnimation 36s linear infinite 0s;
    -o-animation: imageAnimation 36s linear infinite 0s;
    -ms-animation: imageAnimation 36s linear infinite 0s;
    animation: imageAnimation 36s linear infinite 0s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:45:11.827

如果您想在浏览器窗口更改大小时调整页面大小，您可以使用媒体查询（只有现代浏览器支持此功能） - 或者您可以选择使用 javascript（第三个选项是两者）。但是，您的问题表明您要避免使用 javascript。我在下面用媒体查询做了一个例子。当您的屏幕尺寸介于 800px 和 1000px 之间时，将应用 css。您可以组合这些语句，例如，如果您只想使用 min 或 max 。

```
@media all and (max-width: 1000px) and (min-width: 800px) {
  .cb-slideshow li span {
    /* css here*/
  }
} 
```

您可以使用媒体查询更改任何元素。它通常用于创建响应式设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:46:13.153

如果您正在寻找如何在没有足够内容的情况下设置您的正文窗口范围，请尝试

```
html, body{
    width: 100%;
    height: 100%
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T06:55:54.780

你可以使用一种叫做响应式设计的东西。它使用媒体查询根据屏幕分辨率进行调整。只需在任何流行的搜索引擎中搜索响应式设计，您就会从链接中学到很多东西。

现在你可以将这种风格添加到你的身体

```
body {
  width:  100%;
  height: 100%;
} 
```

这将使它的身体反应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T06:59:18.470

快速示例，只需将其添加到您的页面，当页面低于 960 像素时，整个正文应该消失

```
@media screen and(max-width:960px){
   body{
      display:none;
   }
} 
```

现在您可以添加尽可能多的更改以适应所有尺寸

# flash - 无法在 Android 上使用 AIR 将透明 PNG 保存到相机胶卷？

> ID：15653045
> 
> 赞同：0
> 
> 时间：2013-03-27T06:28:42.223
> 
> 标签：flash, air

我创建了一个已经可以将图像保存到 CameraRoll 的 AIR 应用程序。但是，我无法将具有透明度的图像保存到 CameraRoll。我认为这在某一时刻有效。相反，它保存的是高度压缩的 JPG。

**更多信息**：
我正在使用 CameraRoll.addBitmapData() 和 AIR 3.6。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T03:16:03.557

这似乎是 AIR 3.3 及更高版本中的一个[错误](https://bugbase.adobe.com/index.cfm?event=bug&id=3205096)。我认为它在那之前是有效的，但我必须进行测试。

[请为这个错误](https://bugbase.adobe.com/index.cfm?event=bug&id=3205096)投票。

# r - T.test R 程序

> ID：15653050
> 
> 赞同：-2
> 
> 时间：2013-03-27T06:28:58.377
> 
> 标签：r

我正在尝试对很多数据集进行 t.test，我希望它们包含在单个输出中到目前为止，我正在做一个类似于这个的 t.test

```
test1=t.test(dat$velocity,x[[1]][[2]])
test2=t.test(dat$velocity,x[[2]][[2]])
test3=t.test(dat$velocity,x[[3]][[2]]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:33:06.583

像这样的东西应该工作：

```
tests <- lapply(1:length(x), function(i) t.test(dat$velocity,x[[i]][[2]])) 
```

`tests`是一个`list`长度列表`length(x)`。您可以使用 访问每个 t 检验结果`tests[[1]]`。

# ruby-on-rails - 了解 ActiveRecord::Base 类名

> ID：15653052
> 
> 赞同：2
> 
> 时间：2013-03-27T06:29:10.540
> 
> 标签：ruby-on-rails, ruby, activerecord

在浏览 ActiveRecord 源代码时，我发现：

```
class ActiveRecord::Base 
```

我不明白一个类名是怎么回事`ActiveRecord::Base` 请为我解释一下，我不明白这个概念。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T06:33:22.737

`ActiveRecord`实际上是一个 Ruby [Module](http://ruby-doc.org/core-1.9.3/Module.html)，它最初的定义类似于：

```
module ActiveRecord
  # contents of module
end 
```

模块为要在其中定义的类和常量提供命名空间，这意味着类可以按原样在模块内定义`ActiveRecord::Base`。所以这和

```
module ActiveRecord
  class Base
    # contents of class
  end
end 
```

通常，`::`运算符用于命名空间解析，用于引用命名空间内的常量。从技术上讲，任何以大写字母开头的变量都是常量，`Base`其值为类本身的常量也是如此！如果有一个名为的常量`FOO`定义`ActiveRecord`如下：

```
module ActiveRecord
  FOO = "foo"
end 
```

那么它的完全限定变量名将是`ActiveRecord::FOO`.

# expression - Bison - 处理非 LALR(1) 语法

> ID：15653056
> 
> 赞同：0
> 
> 时间：2013-03-27T06:29:35.803
> 
> 标签：expression, grammar, bison, context-free-grammar, lalr

我正在使用 flex，bison 制作一个简单的计算器。

我开发了一种语法，其中包括两种类型的表达式——整数表达式和实数表达式。

语法与此类似：

```
exp -> intExp | realExp

intExp -> INT | intExp '+' intExp

realExp -> REAL | realExp '+' realExp | intExp '+' realExp | realExp '+' intExp 
```

这不是 LALR(1)。

例如，考虑字符串 INT '+' REAL。在“INT”处，前瞻为“+”，仅基于此，无法判断字符串是 intExp 还是 realExp。

我尝试重写语法以解决歧义，但没有任何结果。

我知道我可以在解析期间推迟进行计算，而是构建一个解析树。然后通过类型检查，问题可以解决。但是对于这样一个简单的问题来说，这似乎有点过分了。

有没有办法让野牛本身来处理这种歧义？或者可以用更好的方式重写语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:35:59.423

不，如果它不是 LALR(1)，那么它不是。但是，在您的语言中，您不能出现类型不匹配错误。那么为什么对 int 和 real 表达式有不同的产生式呢？只需让节点值包含一个整数、一个实数和一个类型代码。

# ruby-on-rails - 在 Ruby on Rails 中使用 Smpp

> ID：15653061
> 
> 赞同：1
> 
> 时间：2013-03-27T06:30:26.217
> 
> 标签：ruby-on-rails, sms, smpp

需要通过Smpp收发短信，注册号码，收到systemID和密码，但无法连接。连接到项目 gem 'ruby-smpp'，使用 getaway [this](https://github.com/raykrueger/ruby-smpp/blob/master/examples/sample_gateway.rb)的例子，它只改变了 systemID 和 password 的值。

在日志中：

```
<- (BindTransceiver) len = 37 cmd = 9 status = 0 seq = 1364360797 (<systemID><password>)
Hex dump follows:
<- 00000000: 0000 0025 0000 0009 0000 0000 5152 7e5d | ...% ........ QR ~]
<- 00000010: 3531 3639 3030 0068 4649 6b4b 7d7d 7a00 | <systemID>.<password>.
<- 00000020: 0034 0001 00 | .4 ...

Starting enquire link timer (with 10s interval)
Delegate: transceiver unbound 
```

在控制台中：

```
Connecting to SMSC ...
MT: Disconnected. Reconnecting in 5 seconds ..
MT: Disconnected. Reconnecting in 5 seconds ..
MT: Disconnected. Reconnecting in 5 seconds ..
MT: Disconnected. Reconnecting in 5 seconds ..
MT: Disconnected. Reconnecting in 5 seconds .. 
```

请告诉我，我没有，也许在配置中要添加或更改其他内容？和 smpp 连接，据我了解，它仅适用于特定的 IP 地址，但服务器和本地计算机上的日志是相同的

```
class Gateway
  include KeyboardHandler

  # MT id counter. 
  @@mt_id = 0

  # expose SMPP transceiver's send_mt method
  def self.send_mt(*args)
    @@mt_id += 1
    @@tx.send_mt(@@mt_id, *args)
  end

  def logger
    Smpp::Base.logger
  end

  def start(config)
    # The transceiver sends MT messages to the SMSC. It needs a storage with Hash-like
    # semantics to map SMSC message IDs to your own message IDs.
    pdr_storage = {} 

    # Run EventMachine in loop so we can reconnect when the SMSC drops our connection.
    puts "Connecting to SMSC..."
    loop do
      EventMachine::run do
        @@tx = EventMachine::connect(
          config[:host], 
          config[:port], 
          Smpp::Transceiver, 
          config, 
          self    # delegate that will receive callbacks on MOs and DRs and other events
        )
        print "MT: "
        $stdout.flush

        # Start consuming MT messages (in this case, from the console)
        # Normally, you'd hook this up to a message queue such as Starling
        # or ActiveMQ via STOMP.
        EventMachine::open_keyboard(KeyboardHandler)
      end
      puts "Disconnected. Reconnecting in 5 seconds.."
      sleep 5
    end
  end

  # ruby-smpp delegate methods 

  def mo_received(transceiver, pdu)
    logger.info "Delegate: mo_received: from #{pdu.source_addr} to #{pdu.destination_addr}: #{pdu.short_message}"
  end

  def delivery_report_received(transceiver, pdu)
    logger.info "Delegate: delivery_report_received: ref #{pdu.msg_reference} stat #{pdu.stat}"
  end

  def message_accepted(transceiver, mt_message_id, pdu)
    logger.info "Delegate: message_accepted: id #{mt_message_id} smsc ref id: #{pdu.message_id}"
  end

  def message_rejected(transceiver, mt_message_id, pdu)
    logger.info "Delegate: message_rejected: id #{mt_message_id} smsc ref id: #{pdu.message_id}"
  end

  def bound(transceiver)
    logger.info "Delegate: transceiver bound"
  end

  def unbound(transceiver)  
    logger.info "Delegate: transceiver unbound"
    EventMachine::stop_event_loop
  end

end

module KeyboardHandler
  include EventMachine::Protocols::LineText2

  def receive_line(data)
    sender, receiver, *body_parts = data.split
    unless sender && receiver && body_parts.size > 0
      puts "Syntax: <sender> <receiver> <message body>"      
    else
      body = body_parts.join(' ')
      puts "Sending MT from #{sender} to #{receiver}: #{body}"  
      SampleGateway.send_mt(sender, receiver, body)
    end
    prompt
  end

  def prompt
    print "MT: "
    $stdout.flush
  end
end 
```

/初始化器

```
require 'eventmachine'
require 'smpp'

LOGFILE = Rails.root + "log/sms_gateway.log"
Smpp::Base.logger = Logger.new(LOGFILE) 
```

/脚本

```
puts "Starting SMS Gateway. Please check the log at #{LOGFILE}"
config = {
  :host => '127.0.0.1',
  :port => 6000,
  :system_id => <SystemID>,
  :password => <Password>,
  :system_type => '', # default given according to SMPP 3.4 Spec
  :interface_version => 52,
  :source_ton  => 0,
  :source_npi => 1,
  :destination_ton => 1,
  :destination_npi => 1,
  :source_address_range => '',
  :destination_address_range => '',
  :enquire_link_delay_secs => 10
}
gw = Gateway.new
gw.start(config) 
```

脚本中的文件/通过 rails runner 运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T08:57:06.783

问题解决了。最初错误地指定了主机和端口，因为 smpp-server 与 RoR 应用程序不在同一台机器上。至于编码，以俄语布局发送应该是

```
message = text.encode ("UTF-16BE"). force_encoding ("BINARY")
Gateway.send_mt (sender, receiver, message, data_coding: 8) 
```

接收右侧的表格

```
message = pdu.short_message.force_encoding ('UTF-16BE'). encode ('UTF-8') 
```

# git - 如何跟踪但不登台以及如何取消登台但不取消跟踪？

> ID：15653066
> 
> 赞同：64
> 
> 时间：2013-03-27T06:30:58.107
> 
> 标签：git

我有两个简洁的问题：

*   我如何跟踪文件但不暂存它们？
*   如何在不取消跟踪的情况下取消暂存文件以进行提交？

**注意：** *我知道我可以进行初始提交以跟踪文件并从那里开始跟踪我的文件。但是可以具体做我上面问的吗？*

我尝试使用`git add -N <expr>`，但它会跟踪文件并将其添加以进行提交：

```
PS C:\> git add -N fileA
PS C:\> git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#       new file:   fileA
#
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   README.md
#       modified:   composer.lock
#       modified:   fileA
# 
```

如果我这样做`git reset HEAD fileA`或`git rm --cached fileA`取消暂存它，但也会取消跟踪文件。这个命令`git rm fileA`建议我使用标志 -f 来删除文件。

那么，可以只跟踪而不是暂存，并且只能取消暂存而不是取消跟踪文件吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-27T06:40:44.887

更新（2015 年 5 月）

> 我尝试使用`git add -N <expr>`，但它会跟踪文件并将其添加以进行提交：

即将推出的 Git 2.5（2015 年第二季度）不再是这种情况。
请参阅“[使用后文件未进入提交`git add -N`](https://stackoverflow.com/a/30341632/6309)”

* * *

原始答案（2013 年 3 月）

> 如何在不取消跟踪的情况下取消暂存文件以进行提交？

这是官方的方式：

```
git reset HEAD fileA 
```

但由于它是一个新文件，您也可以取消跟踪它（将其从索引中删除，而没有任何先前的提交引用它）。

开始跟踪文件意味着将其置于索引（阶段）或提交中。

我建议为这些文件创建一个分支，以便在那里添加/提交它们。
请参阅“[什么是 GIT 上下文中的跟踪文件和未跟踪文件？](https://stackoverflow.com/a/9663590/6309) ”

> *   **跟踪文件是上次快照中的文件**；它们可以是未修改的、修改的或暂存的。
> *   未跟踪的文件是其他所有文件 - 工作目录中不在上一个快照中且不在暂存区域（索引）中的任何文件

这意味着，对于一个新文件，未暂存意味着取消跟踪它。

[![git中跟踪的文件](../Images/06744c0a033ec274eb02e163a548c8ec.png)](https://i.stack.imgur.com/slaGB.png)
^(（来源：[Pro Git Book](https://git-scm.com/book/id/v2/)，2.2 [Git Basics - Recording Changes to the Repository](https://git-scm.com/book/id/v2/Git-Basics-Recording-Changes-to-the-Repository)）)
（感谢[louisfischer](https://stackoverflow.com/users/4559927/louisfischer)[评论中](https://stackoverflow.com/questions/15653066/how-to-track-but-not-stage-and-how-to-unstage-but-not-untrack/15653161?noredirect=1#comment80562196_15653161)的更新/修复）

另请参阅“ [git - 如何判断文件是否被 git 跟踪（通过 shell 退出代码）？](https://stackoverflow.com/questions/2405305/git-how-to-tell-if-a-file-is-git-tracked-by-shell-exit-code) ”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-15T15:52:34.053

使用 跟踪您的所有文件`git add`。提交您要提交的所有更改并推送到远程。然后用`git stash`. 您的文件将被跟踪但不提交。因此，在您的示例中，您将从取消暂存 fileA 开始。然后运行`git add README.md`和`git add composer.lock`。`git commit -m "Committing fun stuff."`. `git add fileA`现在我们需要在不暂存的情况下跟踪新文件，所以我们只需执行`git stash`. 当您准备好提交 fileA 时，您可以运行`git stash pop`以提交/推送到远程。

# android - Google Galaxy Nexus 手机上的 SplashScreen 出现奇怪问题

> ID：15653067
> 
> 赞同：2
> 
> 时间：2013-03-27T06:30:59.463
> 
> 标签：android, splash-screen, android-image

我试图做很多挖掘，但我无法解决我的这个问题。问题出在我的应用程序的闪屏上。启动画面在除 Google Galaxy Nexus 之外的所有设备/平板电脑上运行没有任何问题。我没有显示启动画面，而是看到一个空白的黑屏，然后我的应用程序的主屏幕打开。

我检查了下面的 logcat，那里有一个看起来像罪魁祸首的警告。

```
03-26 22:51:34.878: D/dalvikvm(26506): GC_FOR_ALLOC freed 30K, 1% free 8662K/8720K, paused 19ms, total 20ms
03-26 22:51:34.894: I/dalvikvm-heap(26506): Grow heap (frag case) to 12.390MB for 4096016-byte allocation
03-26 22:51:34.917: D/dalvikvm(26506): GC_FOR_ALLOC freed <1K, 1% free 12661K/12724K, paused 20ms, total 20ms
03-26 22:51:34.925: D/dalvikvm(26506): GC_CONCURRENT freed <1K, 1% free 12661K/12724K, paused 2ms+1ms, total 15ms
03-26 22:51:34.996: D/dalvikvm(26506): GC_FOR_ALLOC freed <1K, 1% free 12661K/12724K, paused 9ms, total 10ms
03-26 22:51:35.058: I/dalvikvm-heap(26506): Grow heap (frag case) to 28.013MB for 16384016-byte allocation
03-26 22:51:35.089: D/dalvikvm(26506): GC_FOR_ALLOC freed 0K, 1% free 28661K/28728K, paused 31ms, total 31ms
03-26 22:51:35.128: D/dalvikvm(26506): GC_CONCURRENT freed <1K, 1% free 28661K/28728K, paused 12ms+2ms, total 36ms
03-26 22:51:35.347: I/System.out(26506): true
03-26 22:51:35.503: D/libEGL(26506): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
03-26 22:51:35.535: D/libEGL(26506): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
03-26 22:51:35.542: D/libEGL(26506): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
03-26 22:51:35.917: D/OpenGLRenderer(26506): Enabling debug mode 0
03-26 22:51:36.027: W/OpenGLRenderer(26506): Bitmap too large to be uploaded into a texture (1600x2560, max=2048x2048)
03-26 22:51:36.871: V/CheatsDB.db(26506): db exists
03-26 22:51:37.207: D/dalvikvm(26506): GC_FOR_ALLOC freed 6206K, 18% free 28757K/35028K, paused 14ms, total 14ms 
```

显示“位图太大，无法上传......”的行。我检查了我的drawables，没有那么大尺寸的图像。启动画面使用的背景图像为 800 x 1280。这是我目前在所有设备上使用的唯一 png 图像，并且启动画面在所有其他设备上都可以正常工作。logcat 还说图像的大小看起来像 1600 x 2560，我相信这是我的 Nexus 10 的分辨率。我没有在任何地方添加任何该大小的特定图像。

我还在下面发布了我的 SplashScreen.java 文件代码：

```
public class SplashScreen extends Activity {

private final int SPLASH_DISPLAY_TIME = 1000;
private Handler splashHandler = new Handler();
private Runnable splashRunnable;
private final String firstLaunchCheck = "firstLaunchCheck";
SharedPreferences mPrefs;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.splash_screen);

    mPrefs = PreferenceManager.getDefaultSharedPreferences(this);

    final Boolean isFirstLaunch = mPrefs.getBoolean(firstLaunchCheck, false);

    System.out.println(isFirstLaunch);

    splashRunnable = new Runnable() {
        @Override
        public void run() {

            if (!isFirstLaunch) {

                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putBoolean(firstLaunchCheck, true);
                editor.commit();

                Intent mainIntent = new Intent(SplashScreen.this,
                        LookItUpTutorial.class);

                mainIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

                startActivity(mainIntent);
                SplashScreen.this.finish();

            }
            else {

                Intent mainIntent = new Intent(SplashScreen.this,
                        LandingPage.class);
                startActivity(mainIntent);

                SplashScreen.this.finish();
            }
        }
    };

    splashHandler.postDelayed(splashRunnable, SPLASH_DISPLAY_TIME);
}

// Remove any call back activities when back / home button is pressed on
// SplashScreen
@Override
public void onPause() {
    super.onPause();

    splashHandler.removeCallbacks(splashRunnable);
    SplashScreen.this.finish();
}
} 
```

还添加了我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/appbackground">

</LinearLayout> 
```

谁能给我指点我如何去跟踪这个问题的原因？我相信这与图像大小警告有关，但是我的源代码中没有任何大的图像。任何帮助将不胜感激。

感谢您停下来阅读这篇大文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:37:44.223

根据您发布的布局，我不知道为什么 Android 会缩放您的图像 = ) 但是通过一些工作我们可以阻止它。

从您的布局文件中删除`android:drawable`并给 LinearLayout 一个 Id。然后在代码中自己加载drawable。

```
View mylinearlayout = findViewById(R.id.mylinearlayout);
Options options = new Options();
options.inScaled = false; // explicitly disable all scaling
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.appbackground, options);
mylinearlayout.setBackground(new BitmapDrawable(bmp)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:53:07.197

几个月前我和你有同样的问题。经过几个小时的调查。看起来图片的尺寸太大了（我使用的图片分辨率是**1400x1600**）。然后我尝试将其重新缩放到**600x800**（质量仍然可以接受）然后它对我有用。

p/s 我在运行 JB 4.1 的 Google Galaxy Nexus 上遇到了这个问题。

# django - Django 渲染模板对象错误

> ID：15653068
> 
> 赞同：2
> 
> 时间：2013-03-27T06:31:00.073
> 
> 标签：django

我对构建函数的方式有疑问。

我的函数呈现 2 种形式。用于更改白板主图片的表单和用于从特定白板上删除图片的表单

两种形式都显示一个下拉框，列出所有供学生选择的白板以及学生何时选择白板。它显示所有对象。为白板设置主图片的表单非常有效，因为它显示了所有图片对象，但是当我从删除图片下的下拉框中选择一个值时。该函数不会返回删除图片标题下的所有图片对象，而是显示主要表单下的所有图片。

![在此处输入图像描述](../Images/a536646832883bc0c178a413b9505d41.png) 我认为问题出在我的 if forms.is_valid(): 和我的 if forms.is_valid(): 因为当提交表单时。它只会将 POST 放入 if forms.is_valid()：

我的意见.py

```
 def WhiteBoardEditor(request):
    if not request.user.is_authenticated():
    return HttpResponseRedirect(reverse('world:LoginRequest'))
picture = {}
pict = {}

if request.method == "POST":
        forms = BoardPictureForm(request.user,request.POST,)
        formss = PictureDeleteForm(request.user,request.POST,)

        if forms.is_valid():
            board = forms.cleaned_data['board']
            if board:
                boards = forms.cleaned_data['board']
                picture = Picture.objects.filter(board=boards)
        return render(request,'boardeditor.html',{'picture':picture,'boardpicture':BoardPictureForm(request.user),'picturedelete':PictureDeleteForm(request.user)})
        if formss.is_valid():
            pooh = formss.cleaned_data['board']
            if pooh:
                pooh = formss.cleaned_data['board']
                pict = Picture.objects.filter(board=pooh)
        return render(request,'boardeditor.html',{'pict':pict,'boardpicture':BoardPictureForm(request.user),'picturedelete':PictureDeleteForm(request.user)})

return render(request,'boardeditor.html',{'boardpicture':BoardPictureForm(request.user),'picturedelete':PictureDeleteForm(request.user)}) 
```

我的 boardeditor.html

```
 <h1> Set a primary picture for a whiteboard</h1>

 <form method="POST" enctype="multipart/form-data">
     {% csrf_token %}
    {{ boardpicture.as_p }}
    <input type = "submit" value= "save" />
 </form>

      {% for p in picture %}
 <li><a href ="{% url world:delpic p.id 1 %}">{{p.description}}</a>
 {% endfor %}

 <h1> Delete picture from whiteboard</h1>

 <form method="POST" enctype="multipart/form-data">
     {% csrf_token %}
    {{ picturedelete.as_p }}
    <input type = "submit" value= "save" />

 </form>

 </form>
 {% for pi in pict %}
 { pi.description }}
 {% endfor %} 
```

我的表格.py

```
 class BoardPictureForm(forms.ModelForm):

    def __init__(self, user, *args, **kwargs):
            super(BoardPictureForm, self).__init__(*args, **kwargs)
            self.fields['board'].queryset = Board.objects.filter(user=user)

class Meta:
    model = Picture 
    fields = ('board',)

 class PictureDeleteForm(forms.ModelForm):

    def __init__(self, user, *args, **kwargs):
            super(PictureDeleteForm, self).__init__(*args, **kwargs)
            self.fields['board'].queryset = Board.objects.filter(user=user)

class Meta:
    model = Picture 
    fields = ('board',) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:40:08.557

您的两个表单使用相同的字段，即`board`. 这就是为什么当您提交第二个表单时，第一个表单是一个过程。

要解决您的问题，您需要在每个表单中指定操作。请注意，在我的回答中，我以隐藏格式添加了带有过程值的输入。在您看来，我为该流程创建了 if 和 else 语句，这样当您提交表单时，系统就会知道必须执行哪个表单。

```
if request.method == "POST":
    forms = BoardPictureForm(request.user,request.POST,)
    formss = PictureDeleteForm(request.user,request.POST,)

    if request.POST['process'] == 'primary':
        if forms.is_valid():
            board = forms.cleaned_data['board']
            if board:
                boards = forms.cleaned_data['board']
                picture = Picture.objects.filter(board=boards)
        return render(request,'boardeditor.html',{
            'picture':picture, 
            'boardpicture':BoardPictureForm(request.user), 
            'picturedelete':PictureDeleteForm(request.user)
        })
    elif request.POST['process'] == 'delete':
        if formss.is_valid():
            pooh = formss.cleaned_data['board']
            if pooh:
                pooh = formss.cleaned_data['board']
                pict = Picture.objects.filter(board=pooh)
        return render(request,'boardeditor.html',{
            'pict':pict, 
            'boardpicture':BoardPictureForm(request.user), 
            'picturedelete':PictureDeleteForm(request.user
        )}

    elif request.POST['process'] == 'third':
        //other form here

<h1> Set a primary picture for a whiteboard</h1>

 <form method="POST" enctype="multipart/form-data">
     {% csrf_token %}
    {{ boardpicture.as_p }}
    <input type = "hidden" name="process" value= "primary" />
    <input type = "submit" value= "save" />
 </form>

      {% for p in picture %}
 <li><a href ="{% url world:delpic p.id 1 %}">{{p.description}}</a>
 {% endfor %}

 <h1> Delete picture from whiteboard</h1>

 <form method="POST" enctype="multipart/form-data">
     {% csrf_token %}
    {{ picturedelete.as_p }}
    <input type = "hidden" name="process" value= "delete" />
    <input type = "submit" value= "save" />

 </form>

 </form>
 {% for pi in pict %}
 { pi.description }}
 {% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:38:26.743

Edit2：啊，我误解了这个问题 - 以下内容与问题无关，但对 OP 仍然有用

我怀疑这是因为您没有生成格式正确的 HTML。尝试将 boardeditor.html 中的“图片”部分更改为

```
<ul>
{% for p in picture %}
    <li><a href="{% url world:delpic p.id 1 %}">{{p.description}}</a></li>
{% endfor %}
</ul> 
```

编辑：还有，

```
{% for pi in pict %}
    {{ pi.description }} <!-- added an opening curly brace -->
{% endfor %} 
```

你有一个多余`</form>`的底部

# wpf - 焦点丢失时，Wpf datagrid 不显示当前单元格选择

> ID：15653071
> 
> 赞同：0
> 
> 时间：2013-03-27T06:31:30.740
> 
> 标签：wpf, xaml, datagrid

我有一个 WPF DataDrid，我在其中使用了行选择和单元格选择的组合。

也就是说 - 我想要全行选择和同时显示当前选择的指示。如果我使用 SelectionUnit=FullRow 和 SelectionMode=Single 并结合较厚的单元格边框，这看起来很不错。

问题是当 DataGrid 失去焦点时，只有行选择保持可见，CurrentCell 属性被重置，用户无法识别选择了哪个单元格。如果用户正在与 RowDetails 面板中的内容进行交互，也会发生这种情况。

有什么方法可以改变当前单元格的行为，即使在没有聚焦的情况下也能显示 SelectedCell ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:50:23.557

不要使用`CurrentCell`来跟踪选定的行。改为使用该属性`SelectedItem`。

像这样的东西：

```
<DataGrid ItemsSource="{Binding MyItems}" SelectedItem="{Binding MySelectedItem}">
  ...
</DataGrid> 
```

# java - 一个简单的java客户端服务器程序

> ID：15653074
> 
> 赞同：1
> 
> 时间：2013-03-27T06:31:37.997
> 
> 标签：java, sockets, client-server, bufferedreader, printwriter

所以我用java为我的大学迷你项目做了这个客户端服务器程序。请注意，这只是我正在处理的一个大项目的一个小模块。我需要一个字符串从客户端发送到服务器。服务器将返回字符串，因为它返回给客户端。（稍后将修改代码，以便在发送回之前处理字符串）。客户端将在需要时向服务器发送一个字符串。因此，这意味着服务器必须无限期地运行。

我在这里面临的问题是，我的服务器仅在客户端发送字符串时才第一次完美运行。如果我第二次使用不同的字符串运行客户端，我会返回之前发送到服务器的相同字符串！

这是我的服务器程序：

```
 public class Server {

        public static boolean x = true;
        public static String reply;

        public static void main(String a[]) throws Exception {

        System.out.println("Entered server console..");
            Socket echoSocket = null;
            ServerSocket serverSocket = null;
            PrintWriter out = null;
            BufferedReader in = null;

            System.out.println("Initializing Connection..");

            boolean runFlag = true;
            try {
                serverSocket = new ServerSocket(77);

                while (runFlag) {
                    echoSocket = serverSocket.accept();

                    out = new PrintWriter(echoSocket.getOutputStream(), true);

                    BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));

                    while (x) {

                        in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream()));
                        reply = in.readLine();
                        if (reply != null) {
                            x = false;
                        }
                    }
                    System.out.println("received: " + reply);

                    out.println(reply);

                    System.out.println("sent back: " + reply);
                    stdIn.close();
                }

            } catch (Exception e) {
                System.out.println("Exception in starting server: " + e.getMessage());
            } finally {
                out.close();
                in.close();
                echoSocket.close();
            }

        }
    } 
```

这是我的客户程序：

```
 public class Client {
    public static String reply,temp;
    public static boolean x=true;

    public Client()
    {
        temp="lala";
    }
    public Client(String t)
    {
        temp=t;
    }

    public static void main(String[] args) throws IOException {

        Socket echoSocket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            echoSocket = new Socket("localhost", 77);
            out = new PrintWriter(echoSocket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host: localhost.");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection to: localhost.");
            System.exit(1);
        }

        BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));

        temp="lala"; //this is the string to be sent

        out.println(temp);

        while (x) {
            reply= in.readLine();
            if(reply!=null)
            {
                x=false;
            }
        }

        System.out.println("reply: "+reply);

        out.close();
        in.close();
        stdIn.close();
        echoSocket.close();
    }
} 
```

谁能帮我找出这里的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:45:37.563

```
while (x) {
   in = new BufferedReader(new InputStreamReader(echoSocket.getInputStream()));
   reply = in.readLine();
   if (reply != null) {
      x = false;
   }
} 
```

您的服务器在客户端第一次连接时进入此循环，并将回复字符串设置为来自客户端的某些输入。然而，它永远不会再次进入这个循环，因为 x 的值永远不会变回 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T12:48:28.450

当您接受请求时，x 将被设置为 false 并且永远不会变为 true。请在进入循环时初始化 x。此外，如果您在客户端和服务器之间使用套接字，请移动

```
echoSocket = serverSocket.accept(); 
```

退出第一个循环。并且您可以使用echoSocket进行通信。然后您将保持长连接。

# telerik - 切换到休眠状态时出现 InvalidDataContractException

> ID：15653076
> 
> 赞同：0
> 
> 时间：2013-03-27T06:31:42.250
> 
> 标签：telerik, windows-phone-8

我在我的应用程序中使用 Telerik 平移和缩放图像控件。我的问题是，一旦我将包含 panandzoom 图像控件的页面置于休眠状态并取回应用程序崩溃，说明以下内容，

System.Runtime.Serialization.ni.dll 中出现“System.Runtime.Serialization.InvalidDataContractException”类型的第一次机会异常

如果我从我的页面中删除了平移和缩放图像控件，则不会重现此问题，您是否对此有任何固定的解决方案，任何人都可以尽快为此提出解决方案，

问候，毛伊彼得

# sql-server - Sql server XQuery sql：变量和位数据类型

> ID：15653077
> 
> 赞同：1
> 
> 时间：2013-03-27T06:31:42.380
> 
> 标签：sql-server, xml, sql-server-2008, xquery

以下查询返回`<s>false</s>`。但是我希望它会返回`<s>0</s>`。这是一种方法吗？

```
declare @b bit = 0
declare @xml xml = '<x></x>';
select @xml.query('<s>{sql:variable("@b")}</s>') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:44:51.060

```
declare @b bit = 0
declare @xml xml = '<x></x>';
select @xml.query('<s>{xs:int(sql:variable("@b"))}</s>') 
```

[构造函数 (XQuery)](http://msdn.microsoft.com/en-us/library/ms189547.aspx)

# function - Mule 中的@Function 注解

> ID：15653078
> 
> 赞同：0
> 
> 时间：2013-03-27T06:32:03.420
> 
> 标签：function, annotations, components, mule

我想`@Function`在 Mule 中使用注释。我只找到了 关于它的[这个页面](http://www.mulesoft.org/documentation/display/current/Function+Annotation)。

但我不能得到好的结果。

我创建了一个新项目，添加了一个 Java 组件，创建了一个新类并复制了这段代码

```
public class MyComponent {
    public Object process(@XPath("/Envelope") Document doc
                                        @Function("uuid") String id) {
        // do stuff
    }
} 
```

但我有很多错误。我想我必须配置其他东西，但我不知道是什么，也不知道如何使用`@Function`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T19:10:08.807

您需要在配置中手动声明注释解析器才能处理注释。

考虑这个 POJO：

```
package com.acme;

import org.mule.api.annotations.expression.XPath;
import org.mule.api.annotations.expressions.Function;
import org.w3c.dom.Document;

public class AnnotatedPojo
{
    public Object process(@XPath("/Envelope") final Document doc, @Function("uuid") final String id)
    {
        return "Envelope text: " + doc.getDocumentElement().getTextContent() + " - ID: " + id;
    }
} 
```

你可以将它与这个 Mule 配置一起使用：

```
<spring:bean class="org.mule.config.endpoint.RegistryBackedAnnotationsParserFactory" />

<flow name="testAnnotatedPojo">
    <http:inbound-endpoint address="http://localhost:8080/pojo"
        exchange-pattern="request-response" />

    <component class="com.acme.AnnotatedPojo" />
</flow> 
```

示例调用：

```
$ curl -H "Content-Type: application/xml" http://localhost:8080/pojo -d'<Envelope>foo</Envelope>'
Envelope text: foo - ID: 9133fc7d-a07f-11e2-b560-4d5f883736c4 
```

# javascript - 如何将一个javascript函数应用于asp.net中的多个文本框onfocus事件

> ID：15653084
> 
> 赞同：0
> 
> 时间：2013-03-27T06:32:54.040
> 
> 标签：javascript, asp.net, background-color

我有两个 javascript 函数来更改进入和离开事件的背景颜色。

```
 function ColoronEnter()
      { 
        var txt1 = document.getElementById("<%=txtID1.ClientID%>");
       txt1.style.backgroundColor = "red";
      }

      function ColoronLeave()
      { 
        var txt2 = document.getElementById("<%=txtID1.ClientID%>");
       txt2.style.backgroundColor = "";
      } 
```

我称他们为

```
<asp:TextBox ID="txtID1" runat="server" MaxLength="20" AutoCompleteType="FirstName"  onfocus="ColoronEnter()" onblur="ColoronLeave()" ></asp:TextBox> 
```

它运作良好。但我想将一个 javascript 函数应用于我的所有文本框。我尝试过类似的东西

```
 function onEnter(_input)
       {
        var input = _input;
        document.getElementById(input).style.backgroundColor ="yellow"; 
       }  
       function onLeave(_input)
       {
        var input = _input;
        document.getElementById(input).style.backgroundColor =""; 
       } 
```

试图称他们为

```
 <asp:TextBox ID="txtID2" runat="server" onfocus="onEnter(txtID2)" onblur="onLeave(txtID2)"></asp:TextBox>
 <asp:TextBox ID="txtID3" runat="server" onfocus="onEnter(txtID3)" onblur="onLeave(txtID3)"></asp:TextBox> 
```

它抛出一个错误

```
Microsoft JScript runtime error: Unable to get value of the property 'style': object is null or undefined. 
```

我怎样才能为我的所有文本框调用一个函数。预先感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:35:36.993

使用喜欢

```
 <asp:TextBox ID="txtID2" runat="server" onfocus="onEnter(this)" onblur="onLeave(this)"></asp:TextBox>
  <asp:TextBox ID="txtID3" runat="server" onfocus="onEnter(this)" onblur="onLeave(this)"></asp:TextBox>

    function onEnter(_input)
   {
     _input.style.backgroundColor ="yellow"; 
   }  
   function onLeave(_input)
   {
     _input.style.backgroundColor =""; 
   } 
```

如果您对使用 jQuery 没有任何限制，请使用[jQuery 悬停](http://api.jquery.com/hover/)事件来处理。

# java - 如何使用 SentiWordNet

> ID：15653091
> 
> 赞同：5
> 
> 时间：2013-03-27T06:33:30.467
> 
> 标签：java, twitter, sentiment-analysis

我需要对一些包含推文的 csv 文件进行情绪分析。我正在使用[SentiWordNet](http://sentiwordnet.isti.cnr.it/)进行情绪分析。

我得到了他们在他们的网站上提供的以下示例 Java 代码。我不确定如何使用它。我要分析的 csv 文件的路径是`C:\Users\MyName\Desktop\tweets.csv`. 的路径`SentiWordNet_3.0.0.txt`是`C:\Users\MyName\Desktop\SentiWordNet_3.0.0\home\swn\www\admin\dump\SentiWordNet_3.0.0_20130122.txt`。我是java新手，请帮忙，谢谢！下面的示例 java 代码的链接是[这个](http://sentiwordnet.isti.cnr.it/code/SWN3.java)。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Set;
import java.util.Vector;

public class SWN3 {
    private String pathToSWN = "data"+File.separator+"SentiWordNet_3.0.0.txt";
    private HashMap<String, String> _dict;

    public SWN3(){

        _dict = new HashMap<String, String>();
        HashMap<String, Vector<Double>> _temp = new HashMap<String, Vector<Double>>();
        try{
            BufferedReader csv =  new BufferedReader(new FileReader(pathToSWN));
            String line = "";           
            while((line = csv.readLine()) != null)
            {
                String[] data = line.split("\t");
                Double score = Double.parseDouble(data[2])-Double.parseDouble(data[3]);
                String[] words = data[4].split(" ");
                for(String w:words)
                {
                    String[] w_n = w.split("#");
                    w_n[0] += "#"+data[0];
                    int index = Integer.parseInt(w_n[1])-1;
                    if(_temp.containsKey(w_n[0]))
                    {
                        Vector<Double> v = _temp.get(w_n[0]);
                        if(index>v.size())
                            for(int i = v.size();i<index; i++)
                                v.add(0.0);
                        v.add(index, score);
                        _temp.put(w_n[0], v);
                    }
                    else
                    {
                        Vector<Double> v = new Vector<Double>();
                        for(int i = 0;i<index; i++)
                            v.add(0.0);
                        v.add(index, score);
                        _temp.put(w_n[0], v);
                    }
                }
            }
            Set<String> temp = _temp.keySet();
            for (Iterator<String> iterator = temp.iterator(); iterator.hasNext();) {
                String word = (String) iterator.next();
                Vector<Double> v = _temp.get(word);
                double score = 0.0;
                double sum = 0.0;
                for(int i = 0; i < v.size(); i++)
                    score += ((double)1/(double)(i+1))*v.get(i);
                for(int i = 1; i<=v.size(); i++)
                    sum += (double)1/(double)i;
                score /= sum;
                String sent = "";               
                if(score>=0.75)
                    sent = "strong_positive";
                else
                if(score > 0.25 && score<=0.5)
                    sent = "positive";
                else
                if(score > 0 && score>=0.25)
                    sent = "weak_positive";
                else
                if(score < 0 && score>=-0.25)
                    sent = "weak_negative";
                else
                if(score < -0.25 && score>=-0.5)
                    sent = "negative";
                else
                if(score<=-0.75)
                    sent = "strong_negative";
                _dict.put(word, sent);
            }
        }
        catch(Exception e){e.printStackTrace();}        
    }

    public String extract(String word, String pos)
    {
        return _dict.get(word+"#"+pos);
    }
} 
```

新代码：

```
public class SWN3 {
        private String pathToSWN = "C:\\Users\\MyName\\Desktop\\SentiWordNet_3.0.0\\home\\swn\\www\\admin\\dump\\SentiWordNet_3.0.0.txt";
    private HashMap<String, String> _dict;

    public SWN3(){

        _dict = new HashMap<String, String>();
        HashMap<String, Vector<Double>> _temp = new HashMap<String, Vector<Double>>();
        try{
            BufferedReader csv =  new BufferedReader(new FileReader(pathToSWN));
            String line = "";           
            while((line = csv.readLine()) != null)
            {
                String[] data = line.split("\t");
                Double score = Double.parseDouble(data[2])-Double.parseDouble(data[3]);
                String[] words = data[4].split(" ");
                for(String w:words)
                {
                    String[] w_n = w.split("#");
                    w_n[0] += "#"+data[0];
                    int index = Integer.parseInt(w_n[1])-1;
                    if(_temp.containsKey(w_n[0]))
                    {
                        Vector<Double> v = _temp.get(w_n[0]);
                        if(index>v.size())
                            for(int i = v.size();i<index; i++)
                                v.add(0.0);
                        v.add(index, score);
                        _temp.put(w_n[0], v);
                    }
                    else
                    {
                        Vector<Double> v = new Vector<Double>();
                        for(int i = 0;i<index; i++)
                            v.add(0.0);
                        v.add(index, score);
                        _temp.put(w_n[0], v);
                    }
                }
            }
            Set<String> temp = _temp.keySet();
            for (Iterator<String> iterator = temp.iterator(); iterator.hasNext();) {
                String word = (String) iterator.next();
                Vector<Double> v = _temp.get(word);
                double score = 0.0;
                double sum = 0.0;
                for(int i = 0; i < v.size(); i++)
                    score += ((double)1/(double)(i+1))*v.get(i);
                for(int i = 1; i<=v.size(); i++)
                    sum += (double)1/(double)i;
                score /= sum;
                String sent = "";               
                if(score>=0.75)
                    sent = "strong_positive";
                else
                if(score > 0.25 && score<=0.5)
                    sent = "positive";
                else
                if(score > 0 && score>=0.25)
                    sent = "weak_positive";
                else
                if(score < 0 && score>=-0.25)
                    sent = "weak_negative";
                else
                if(score < -0.25 && score>=-0.5)
                    sent = "negative";
                else
                if(score<=-0.75)
                    sent = "strong_negative";
                _dict.put(word, sent);
            }
        }
        catch(Exception e){e.printStackTrace();}        
    }

    public Double extract(String word)
    {
        Double total = new Double(0);
        if(_dict.get(word+"#n") != null)
             total = _dict.get(word+"#n") + total;
        if(_dict.get(word+"#a") != null)
            total = _dict.get(word+"#a") + total;
        if(_dict.get(word+"#r") != null)
            total = _dict.get(word+"#r") + total;
        if(_dict.get(word+"#v") != null)
            total = _dict.get(word+"#v") + total;
        return total;
    }

    public String classifytweet(){
        String[] words = twit.split("\\s+"); 
        double totalScore = 0, averageScore;
        for(String word : words) {
            word = word.replaceAll("([^a-zA-Z\\s])", "");
            if (_sw.extract(word) == null)
                continue;
            totalScore += _sw.extract(word);
        }
        Double AverageScore = totalScore;

        if(averageScore>=0.75)
            return "very positive";
        else if(averageScore > 0.25 && averageScore<0.5)
            return  "positive";
        else if(averageScore>=0.5)
            return  "positive";
        else if(averageScore < 0 && averageScore>=-0.25)
            return "negative";
        else if(averageScore < -0.25 && averageScore>=-0.5)
            return "negative";
        else if(averageScore<=-0.75)
            return "very negative";
        return "neutral";
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T06:43:55.083

首先，首先删除文件开头的所有“垃圾”（包括描述、说明等）

一种可能的用法是更改`SWN3`a 使其中的方法`extract`返回 a `Double`：

```
public Double extract(String word)
{
    Double total = new Double(0);
    if(_dict.get(word+"#n") != null)
         total = _dict.get(word+"#n") + total;
    if(_dict.get(word+"#a") != null)
        total = _dict.get(word+"#a") + total;
    if(_dict.get(word+"#r") != null)
        total = _dict.get(word+"#r") + total;
    if(_dict.get(word+"#v") != null)
        total = _dict.get(word+"#v") + total;
    return total;
} 
```

然后，给一个要标记的字符串，您可以将其拆分，使其只有单词（没有符号和未知字符），并使用`extract`每个单词的方法返回的结果，您可以决定平均权重是多少字符串：

```
String[] words = twit.split("\\s+"); 
double totalScore = 0, averageScore;
for(String word : words) {
    word = word.replaceAll("([^a-zA-Z\\s])", "");
    if (_sw.extract(word) == null)
        continue;
    totalScore += _sw.extract(word);
}
verageScore = totalScore;

if(averageScore>=0.75)
    return "very positive";
else if(averageScore > 0.25 && averageScore<0.5)
    return  "positive";
else if(averageScore>=0.5)
    return  "positive";
else if(averageScore < 0 && averageScore>=-0.25)
    return "negative";
else if(averageScore < -0.25 && averageScore>=-0.5)
    return "negative";
else if(averageScore<=-0.75)
    return "very negative";
return "neutral"; 
```

我发现这种方式更容易，而且对我来说效果很好。

* * *

**更新：**

我改为`_dict`所以`_dict = new HashMap<String, Double>();`它将有一个`String`键和一个`Double`值。

所以我换了`_dict.put(word, sent);`wish`_dict.put(word, score);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T12:16:54.937

为此，您应该编写 main 函数，其中提供 csv 的路径，从中提取单词。然后通过发送单词及其位置来调用提取函数。

# gettext - 在 xgettext 生成的 .pot 文件的顶部，#，fuzzy 是什么意思？

> ID：15653093
> 
> 赞同：10
> 
> 时间：2013-03-27T06:33:37.523
> 
> 标签：gettext, xgettext

当使用`xgettext`生成`.pot`文件时，在生成文件的顶部我得到这个：

```
# SOME DESCRIPTIVE TITLE.
...
#, fuzzy
... 
```

是什么`#, fuzzy`意思？

我知道如果翻译模糊（质量很差）是什么意思，但文件**顶部**的意思是`.pot`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-08T16:11:34.070

`xgettext``#, fuzzy`当它在消息文件中自动生成项目标头时，在顶部添加条目。该评论本身没有特殊含义：它只是指出人类需要出现并填补空白。

让我们深入挖掘一下源。

首次创建消息文件时，`xgettext`将项目信息添加到生成的消息文件的顶部（除非您通过`--omit-header`）：

```
$ cat hello.c
int main() {
  printf(gettext("Hello World\n"));
  return 0;
}

$ xgettext -o- hello.c
# SOME DESCRIPTIVE TITLE.
# Copyright (C) YEAR THE PACKAGE'S COPYRIGHT HOLDER
# This file is distributed under the same license as the PACKAGE package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2017-06-08 11:51-0400\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=CHARSET\n"
"Content-Transfer-Encoding: 8bit\n"

#: hello.c:3
#, c-format
msgid "Hello World\n"
msgstr "" 
```

支持这一点的逻辑可在[`xgettext.c:construct_header()`](http://git.savannah.gnu.org/cgit/gettext.git/tree/gettext-tools/src/xgettext.c#n3711). 在该函数的底部，新生成的标题信息被标记为模糊：

```
mp->is_fuzzy = true; 
```

由于此文本已被标记为模糊，因此将`#, fuzzy`注释标记添加到文本中。这里的目的是提高意识：计算机程序将文本添加到消息文件中，并且人类需要采取行动。特别是，需要一个人来填写空白：修订日期、翻译者姓名、语言等。

根据文档，在这种情况下使用“#，fuzzy”注释是有意义的：

> 【模糊词条】通常需要译者修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-22T13:35:15.237

来自[模糊条目上的 gettext](http://www.gnu.org/software/gettext/manual/html_node/gettext_9.html#Fuzzy-Entries)：

> 模糊条目，即使它们出于大多数其他目的考虑了翻译条目，通常也需要翻译人员进行修改。这些可以通过应用程序 msgmerge 来根据新的 PO 模板文件更新旧的翻译 PO 文件来生成，当此工具假设某些新的 msgid 仅略微修改了旧的 msgid 并选择配对它的想法时成为新修改条目的旧翻译。原始字符串（msgid 字符串）的细微变化往往会反映在翻译后的字符串中，这需要翻译人员的干预。因此，msgmerge 可能会将某些条目标记为模糊。

我`#, fuzzy`在使用 Django 生成消息文件 (.po) 时看到出现，并且原始文本 ( `msgid`) 已更改，在这种情况下，翻译人员应该知道翻译后的文本也应该更改。

# facebook - 用户在注销后自动登录，使用 Facebook-JavaScript-sdk 登录

> ID：15653097
> 
> 赞同：0
> 
> 时间：2013-03-27T06:33:53.660
> 
> 标签：facebook, jquery, facebook-javascript-sdk

我能够顺利地将用户登录到我的网站并从 facebook 获取他的详细信息，但我无法将他注销。在登录时，我将用户登陆到会员的内页。从那里他按下从我的网站注销。按下后，他将被送回首页，当然会重新加载。

我猜想登录的用户发生了什么，当他按下注销按钮时，他被重定向到首页。但是会自动触发登录事件并且他再次登录。

我正在使用以下代码。

```
 <script type="text/javascript">
 $(function(){  
    var button;
    if(document.cookie.indexOf("fbsr_myappid") > 0){// I am checking if the cookie value is set I am making status in FB.init() false. 
            var fb_status = false;
        }   
   else{
            var fb_status = true;
        }
    window.fbAsyncInit = function(){

        FB.init({ appId      : 'myappid',
            status     : fb_status,
            cookie     : true,
            xfbml      : true,
            oauth      : true 
        });
        showLoader(true);

        function updateButton(response) {
            button  = document.getElementById('fb-auth');
            if(response.authResponse) {
                FB.api('/me', function(info){
                    $.post("/web/register/faceBookRegistration",{data:info}).done(function(data){
                        if(typeof(data) != undefined){
                            window.location = "/web/login/loadFaceLogin"; // I am doing an ajax post to my login controller having loadFaceMember function. 
                        }
                    });
                    login(response, info); 
                });

                button.onclick = function(){
                // I think I should use the folowing code somewhere else
                    FB.logout(function(response){
                        logout(response); 
                    });
                };
            } else {

                button.onclick = function(){
                    showLoader(true);
                    FB.login(function(response){
                        if(response.authResponse) {
                            FB.api('/me', function(info){
                                login(response, info); 
                            });
                        } else {
                            showLoader(false);
                        }  
                    }, {scope:'email, user_birthday,user_about_me' });
                }
            }
        }
        FB.getLoginStatus(updateButton);
        FB.Event.subscribe('auth.statusChange', updateButton);
    };

    (function() {
        var e = document.createElement('script');
        e.async = true;
        e.type = 'text/javascript';
        e.src = document.location.protocol +  '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
    }());

    function login(response, info){
        if (response.authResponse) { 
            var accessToken = response.authResponse.accessToken;
            showLoader(false);
        }
    }
    function logout(response){
            FB.logout(function(response){
               console.log("User is now logged out."); 
            });
        showLoader(false);
    }

    function showLoader(status){
        if (status)
            console.log("Yes showLoader.");
        else
            console.log("Yes dont showLoader.");
    }
  }); 
```

在服务器端按下注销按钮时，将在注销控制器中调用以下函数。

```
function index(){
 $isSessionExp = true;

 if( $this->session->userdata('is_sess') )
  $isSessionExp=false;

  $login_session_id = $this->session->userdata('login_session_id');
  $this->login_model->updateLogoutTime($login_session_id);
  $this->session->sess_destroy();

 if($isSessionExp)
   redirect($this->url."/logout/session_expired");
 else
   redirect($this->url."/login");

 } 
```

我想我是否能够将注销控制器中的上述函数与以下 javascript 代码行链接起来。

```
 FB.logout(function(response){
           logout(response);
       } 
```

我的工作会完成的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T09:03:25.647

是的，我猜对了。我需要修改我的注销功能。这是修改后的功能。

```
 function logout(response){
        console.log("From logout" + response);
        if(!response.authResponse){
            window.location = "/web/login/";
            return;
        }

           FB.logout(function(response){
               FB.Auth.setAuthResponse(null,'unknown');  
                 logout();
           });
        } 
```

感谢@GW 为我指明了正确的方向。大家可以随意评论和改进。我会欢迎的。我的方法是基于这个[没有访问令牌调用的 FB.logout()](https://stackoverflow.com/questions/8430474/fb-logout-called-without-an-access-token)

# php - 如何使用 PHP 检测图像中的连续形状？

> ID：15653098
> 
> 赞同：1
> 
> 时间：2013-03-27T06:33:53.817
> 
> 标签：php, image, imagemagick, shapes

我正在尝试从包含几个不同单词的图像中提取带圆圈的单词。

例如，在这张图片中：

![字](../Images/a265b1aed096f027ce7b25f0eea9f39b.png)

应该提取“MAMBAHUNT”这个词，因为它被圈起来了。

![提取词](../Images/6cfc6b9fa7cc0609585e9d8b17c1705e.png)

到目前为止，我的策略是在图像中找到直线。一旦我有了直线，我就可以得到它们的交点以找到角并提取所需的图像。

我一直试图获得直线的方法是循环遍历每个像素并找到其中几个连续的具有相同颜色的位置。但是，这会产生误报，因为某些单词会符合此标准。

有没有更好的方法来使用 PHP 在图像中找到直线？还是提取圆圈单词的不同策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:02:25.363

试图挑战验证码？:)

您可以使用相同的算法查找图像中的所有白线，并检查每条灰线是否与白线相邻。如果不是；这是误报。虽然效率不高。

# visual-studio - 如何在 Visual Studio 中的所有书签位置设置断点？

> ID：15653103
> 
> 赞同：4
> 
> 时间：2013-03-27T06:34:08.910
> 
> 标签：visual-studio

如果我们能找到关键字，并在所有搜索结果行设置断点，那将非常有帮助。

在 Visual Studio 中是否有可能，最好没有第三方插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T17:45:25.327

在编辑菜单下 - 转到查找和替换

![查找和替换](../Images/405d96cf08b46e802090cae8e01eb99a.png)

然后在调试菜单下 - 新断点 ![断点菜单](../Images/e2a5e46be6951fd514fbe5fb0c02ec8c.png)

然后确定 ![添加断点](../Images/7da86f7ab32fc17eca306fbed22b65b9.png)

# mysql - 最多电影落入的评级排名是多少？

> ID：15653104
> 
> 赞同：0
> 
> 时间：2013-03-27T06:34:13.580
> 
> 标签：mysql, sql, rank

嗨，我有以下数据模型。

![在此处输入图像描述](../Images/7d9bfee45f02ebb8f8744f76847ee8ac.png)

我需要找到最多电影落入的评级等级。我写了以下查询，我的教练告诉我这是错误的。

```
SELECT
  COUNT(DISTINCT r.movieratingid) AS rank
FROM
  Rating r JOIN movie m ON r.movieratingid = m.rating_movieratingid
GROUP BY count(distinct r.movierating)
HAVING count(m.movieid) = (SELECT sum(m1.movieid) from movie m1
Where m.movieid = m1.movieid) 
```

请告诉我上述查询中有什么问题。

* * *

*   电影桌

* * *

![在此处输入图像描述](../Images/0365cd956230a1f3ae487f8a175a4782.png)

* * *

*   收视率表

* * *

![在此处输入图像描述](../Images/a13c96fa7ef5a9b907f1590d979fd542.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:00:27.483

这将按具有该评级的电影数量的降序显示评级。

```
SELECT r.movierating, COUNT(r.movieratingid) AS rank
FROM
Rating r 
INNER JOIN movie m ON r.movieratingid = m.rating_movieratingid
GROUP BY count(r.movierating) order by 2 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:23:32.710

我不确定我是否完全理解你..你可以试试这个

```
SELECT movierating, COUNT(r.movieratingid) AS rank
FROM
Rating r 
INNER JOIN movie m ON r.movieratingid = m.rating_movieratingid
GROUP BY r.movierating 
```

# c# - 在我的 WPF 应用程序中，我在图像中加载的 PNG 徽标在设计时显示，但在运行时不显示

> ID：15653105
> 
> 赞同：10
> 
> 时间：2013-03-27T06:34:29.990
> 
> 标签：c#, wpf

这可能是我想念的简单事情。我有一个 png 文件，我想在我的 WPF 窗口中将其用作 * *Image * 控件的来源。*我通过“项目属性”>“资源”>“添加现有文件”添加了这个 PNG 文件，首先作为链接文件（然后在它不起作用时作为嵌入文件）。然后我将 XAML 文件中的图像控件的 * *Source* * 添加到此文件中。不涉及代码，简单点击。

恼人的问题是，当我设计 WPF 窗口时，图像会显示。当我运行它时，它没有。什么都没有出现。

更新：在下面添加了 XAML 代码

```
<Window x:Class="Server.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SERVER" Height="467.91" Width="620.522">

        <Grid>
        <Grid.Background>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="#FF080C59" Offset="0"/>
                <GradientStop Color="White" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>
        <Button x:Name="btnConnect" Content="Connect" HorizontalAlignment="Left" Height="30" Margin="425,34,0,0" VerticalAlignment="Top" Width="134" Click="btnConnect_Click"/>
        <Button x:Name="btnDisconnect" Content="Disconnect" HorizontalAlignment="Left" Height="35" Margin="425,69,0,0" VerticalAlignment="Top" Width="134" Click="btnDisconnect_Click"/>
        <TextBlock x:Name="txtLog" HorizontalAlignment="Left" Margin="416,160,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Height="161" Width="87" Background="#FFFFF5F5" Text="LOG:"/>
        <TextBox x:Name="txtMsg" HorizontalAlignment="Left" Height="23" Margin="416,326,0,0" TextWrapping="Wrap" Text="TextBox" VerticalAlignment="Top" Width="112"/>
        <Button x:Name="btnSend" Content="Send" HorizontalAlignment="Left" Height="35" Margin="425,120,0,0" VerticalAlignment="Top" Width="134" Click="btnSend_Click"/>
        <ListView x:Name="lsvClients" Height="67" Margin="46,212,260,0" VerticalAlignment="Top">
            <ListView.View>
                <GridView>
                    <GridViewColumn/>
                </GridView>
            </ListView.View>
        </ListView>
        <Image HorizontalAlignment="Left" Height="100" Margin="31,10,0,0" VerticalAlignment="Top" Width="101" Source="pack://siteoforigin:,,,/images/ServerMainLogo.png"/>

    </Grid>
</Window> 
```

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T06:58:45.960

在 XAML 中指定图像 URI 时，通常不需要编写完整的 URI。除了其他答案中显示的完整包 URI 之外，您还应该能够编写以下代码：

```
<Image ... Source="images/ServerMainLogo.png"/> 
```

但是，您必须确保图像文件位于`images`Visual Studio 项目中命名的文件夹中，并且其[Build Action](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)设置为`Resource`，如[本答案](https://stackoverflow.com/a/12693661/1136211)所示。

或者，您可以将*Build Action*设置为`Content`并将*Copy To Output Directory*设置为`Copy always`或`Copy if newer`。在这种情况下，图像不会作为资源嵌入到程序的程序集中，而只是复制到与可执行文件相关的目录中。

XAML 中的（相对）图像 URI 在这两种情况下都可以使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T06:45:06.820

`siteOfOrigin`仅当您的文件被复制到您的其他`executables`（输出文件夹）所在的位置时才应使用。对于资源，您应该`application`改用。

```
Source="pack://application:,,,/images/ServerMainLogo.png" 
```

有关进一步说明[Pack URIs](http://msdn.microsoft.com/en-us/library/aa970069.aspx)的信息，请参阅此链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-12T07:34:55.083

*   确保项目中的图像属性具有“构建操作”=“资源”，而不是“嵌入式资源”
*   在 xaml 中，选择图像标记后，使用属性窗口选择源下拉列表，因为现在图像出现在下拉列表中！这让 Visual Studio 为我格式化了字符串。字符串视觉工作室格式化

    我的形象是：

    `Source="pack://application:,,,/FamilyExplorer;component/Resources/Folder.png"/>`

`FamilyExplorer`我的项目名称在哪里，`Resources/Folder.png`是图像的位置。

# objective-c - 在 Objective-C 中查找非空格字符

> ID：15653107
> 
> 赞同：1
> 
> 时间：2013-03-27T06:34:55.357
> 
> 标签：objective-c, nsstring, thai

如何检查我的字符`NSString`是否为非空格字符？

例如：

```
NSString *string3 = @"เบียร์เหล้า";
//                    12345678 <- only take up 8 spaces 
```

长度是 11，但实际上它占用的`NSString`空间是 8。

在 Java 中，他们可以使用以下代码检查字符类型：

```
static boolean isMark(char ch)
{
    int type = Character.getType(ch);
    return type == Character.NON_SPACING_MARK ||
           type == Character.ENCLOSING_MARK ||
           type == Character.COMBINING_SPACING_MARK;
} 
```

Objective-C 呢？

感谢bdash。

```
NSCharacterSet *characterSet = [NSCharacterSet nonBaseCharacterSet];

for (int i = 0; string3.length > i; i++)
{
    NSString *string = [string3 substringWithRange:NSMakeRange(i, 1)];
    NSRange letterRange = [string rangeOfCharacterFromSet:characterSet];
    if (letterRange.location != NSNotFound)
    {
        NSLog(@"non base character set");
    }
    else
    {
        NSLog(@"normal");
    }
} 
```

你会发现哪个字符没有占用空间。另一种方式，您可以使用下面的代码找出总的非空格字符。

```
NSString *newString = [[string3 componentsSeparatedByCharactersInSet:
                            [[NSCharacterSet nonBaseCharacterSet] invertedSet]] componentsJoinedByString:@""]; 
```

所以对于这个例子，newString 的长度是 3。这就是我要找的。谢谢人们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:08:48.490

您可以使用[`[NSCharacterSet nonBaseCharacterSet]`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/Reference/Reference.html#//apple_ref/occ/clm/NSCharacterSet/nonBaseCharacterSet)Unicode 标记类别中检索字符集。`NSCharacterSet`提供了测试给定字符是否是集合成员的`NSString`能力，并提供了在字符串中查找特定字符的能力，这些字符是（或不是）给定的成员`NSCharacterSet`。

# validation - 角度验证 $parsers

> ID：15653115
> 
> 赞同：4
> 
> 时间：2013-03-27T06:35:52.130
> 
> 标签：validation, angularjs

当我们有一个控制器或 ng-model-controller 我们可以做

```
ctrl.$parsers.push(function(viewValue){ 
    ctrl.$setValidity('valid', true); 
}); 
```

最后 $digest 被自动调用并验证呈现。如果我想验证模糊的字段怎么办。我愿意

```
element.blur(function(){ 
    [validations]
    ctrl.$setValidity('valid', false); 
}) 
```

并且结果不会在带有 ng-binded 元素的 html 上发生变化，如何呈现这种变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:40:37.993

你必须`ctrl.$setValidity('valid', false);`在[范围内调用。$apply](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)

```
scope.$apply(function(){
    ctrl.$setValidity('valid', false); 
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-15T13:46:39.870

或者更好的是，为了避免进一步出现问题，使用 CSS 来解决这个问题。让我们假设以下代码：

```
<textarea ng-model="description" ng-minlength="50"></textarea>
<span class="error" ng-show="myform.$error.minlength">Too short!</span>
<span class="error" ng-show="myform.$error.someOtherValidation">Err!</span> 
```

当你开始输入时，Angular 开始验证，并出现错误（这有时是可取的，但更多时候不是）。

为了不弄乱 Angular 的内部结构，你可以做一些 CSS 魔法：

```
textarea:focus ~ .error {
  display:none;
} 
```

波浪号是一个通用的同级选择器，因此只要您关注您的字段，您的所有错误都将保持隐藏。

# jquery - 我可以强制用户在 Rails 表单中选择自动完成吗？

> ID：15653116
> 
> 赞同：0
> 
> 时间：2013-03-27T06:35:58.497
> 
> 标签：jquery, ruby-on-rails, validation, autocomplete

现在，在我的 Rails 应用程序中，用户可以在表单中输入任何内容或从出现的自动完成列表中进行选择。有没有办法强制用户从列表中选择一些东西，例如验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:58:54.143

这与下拉列表不同。想象一下，您在 Stackoverflow 中选择了一个标签，这应该是相似的，尽管 SO 不会阻止您选择一个没人见过的奇怪标签。

使用 Javascript 验证绝对有可能。

当文本字段失去焦点时，您只需捕获该事件。现在你可以做两件事：

1.  您的应用选择第一个匹配值作为输入。例如，用户输入“fac”，有“facebook”、“facetime”、“faceblah”的选项。如果用户不继续输入而失去焦点，则该值将最终以“faceblah”为首选。

2.  如果用户以无效值离开焦点怎么办？说“时尚”，这个匹配没有结果。您检查输入值是否在返回的 JSON 数组中。如果不是，则会出现一条警告，显示输入无效。并且您添加了一些条件以防止实际提交此表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:41:46.747

使用 jQuery-TokenInput 并将令牌数量限制为 1。

看看这个railscasts，你就会明白的。

[http://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields)

# java - JavaFX 启动另一个应用程序

> ID：15653118
> 
> 赞同：16
> 
> 时间：2013-03-27T06:36:00.293
> 
> 标签：java, multithreading, javafx-2

我一直在用 JavaFx 砸我的头......

这适用于没有运行应用程序实例的情况：

```
public class Runner {

    public static void main(String[] args) {
        anotherApp app = new anotherApp();
        new Thread(app).start();
    }
 }

public class anotherApp extends Application implements Runnable {

    @Override
    public void start(Stage stage) {
    }

    @Override
    public void run(){
        launch();
    }
} 
```

但是，如果我`new Thread(app).start()` *在*另一个应用程序中执行此操作，则会收到一个异常，指出我不能进行两次启动。

我的方法也被其他应用程序上的观察者调用，如下所示：

```
@Override
public void update(Observable o, Object arg) {
    // new anotherApp().start(new Stage());
            /* Not on FX application thread; exception */

    // new Thread(new anotherApp()).start();
            /* java.lang.IllegalStateException: Application launch must not be called more than once */
} 
```

它在一个 JavaFX 类中，例如：

```
public class Runner extends Applications implements Observer {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage){
    //...code...//
    }
    //...methods..//
    //...methods..//

    @Override
    public void update(Observable o, Object arg) {
    //the code posted above//
    }
} 
```

我尝试将 ObjectProperties 与侦听器一起使用，但没有奏效。我需要以某种方式从 java.util.observer 的更新方法中运行这个新阶段。

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-28T12:16:47.513

应用程序不仅仅是一个窗口——它是一个`Process`. 因此`Application#launch()`，每个 VM 只允许一个。

如果您想拥有一个新窗口 - 创建一个`Stage`.

如果您真的想重用`anotherApp`类，只需将其包装在`Platform.runLater()`

```
@Override
public void update(Observable o, Object arg) {
    Platform.runLater(new Runnable() {
       public void run() {             
           new anotherApp().start(new Stage());
       }
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-21T17:52:56.453

我在 Main 类中做了另一个 JFX 类的构造函数，`AnotherClass ac = new AnotherClass();` 然后调用了方法`ac.start(new Stage);`。它对我很好。你可以把它放在 main() 或其他方法中。它可能与 launch(args) 方法所做的相同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-10T10:11:40.907

由于使用Application.start(Stage stage)的一个警告，想要提供第二个答案。

> 在 init 方法返回后调用 start 方法

如果您的 JavaFX 应用程序具有 Override Application.init() 则永远不会执行该代码。您在第二个应用程序主方法中也没有任何代码。

启动第二个 JavaFX 应用程序的另一种方法是使用 ProcessBuilder API 启动一个新进程。

```
 final String javaHome = System.getProperty("java.home");
    final String javaBin = javaHome + File.separator + "bin" + File.separator + "java";
    final String classpath = System.getProperty("java.class.path");
    final Class<TestApplication2> klass = TestApplication2.class;
    final String className = klass.getCanonicalName();
    final ProcessBuilder builder = new ProcessBuilder(javaBin, "-cp", classpath, className);

    final Button button = new Button("Launch");
    button.setOnAction(event -> {

        try {
            Process process = builder.start();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }); 
```

# php - 注意：未定义的偏移量：2

> ID：15653119
> 
> 赞同：0
> 
> 时间：2013-03-27T06:36:05.203
> 
> 标签：php, arrays

我是 php 新手，我在 php 书中做了一个例子。在那里我得到了下面`notice`。如何防止这个通知？

```
<?php
require_once('AddingMachine.php');
$arrayofnumbers = array(100,200);
$objectname = new AddingMachine();
$objectname->addNumbers($arrayofnumbers);
?> 
```

和

```
<?php
Class AddingMachine
{
private $total = 0;
function addNumbers(array $numbers)
{{
for($i=0;$i<=sizeof($numbers);$i++)
{
    $this->total = $this->total + $numbers[$i];
}
   echo $this->total;
 }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:37:58.240

改变你的循环

```
for($i=0; $i <= sizeof($numbers); $i++) 
```

至

```
for($i=0; $i < sizeof($numbers); $i++) 
```

也最好使用`count`.

```
for($i=0; $i < count($numbers); $i++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:37:38.557

问题在于`<= sizeof($numbers)`( 等于`count($numbers)`。它会给你数组元素的总数，它总是比最大​​索引多一，因为数组从 0 开始计数。

只需将其替换为`<=`就`<`可以了。

# excel - 查找两个匹配的行并从第三个（Excel）中显示数据

> ID：15653123
> 
> 赞同：1
> 
> 时间：2013-03-27T06:36:28.653
> 
> 标签：excel, indexing, match, rows, vlookup

所以我有两张床单。

第一张表包含两列

品牌 | 剩菜

第二张表也由两列组成。

品牌 | 剩菜 (%)

因此，如果第一个工作表中的 BRAND 行值与第二个工作表中的 BRAND 行值匹配，我想在 LEFTOVER 列的第一个工作表行中显示匹配的 LEFTOVER (%) 行值。

有点迷失在这里。

欣赏任何想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:39:31.817

在表 2 中：

```
.   A   |     B
--------------------
1 BRAND | LEFTOVER %
2   X   |     Y
3       | 
```

在 Sheet1 中：

```
.   A   |     B
--------------------
1 BRAND | LEFTOVER
2   X   | =VLOOKUP(A2,Sheet2!A:B,2)
3       | 
```

VLookup 函数在第二个参数表示的范围的第一列（在本例中是 Sheet2 上包含列 A 和 B 的范围的最左列）中搜索其第一个参数（在本例中为 Sheet1!A2 的值）

然后它返回第三个参数表示的列中右侧范围内同一行的值（1 是匹配值所在的最左侧列）。因此，在这种情况下，我们使用数字 2，因为 1 表示 A 列，2 表示 B 列（这解释了为什么我们为第二个参数使用两列宽范围 - 它需要包含结果所在的列）

这不是唯一的方法，但它是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:46:36.660

我觉得你可以使用 vlookup 来实现你的目标。

让我详细解释一下。假设您有两张纸：

```
 A    |     B             |           A   |     B
    ---------------------       |       -------------------
    1 BRAND | LEFTOVER %        |       1 BRAND | LEFTOVER
    2   X   |     Y             |       2   X   |  =Vlookup(A2,Sheet2!A:B,False)
    3       |                   |       3       |
         Sheet2                 |             Sheet1 
```

在此之后，您可以将这个公式拖动到整个范围内。这也将自动使以下单元格的公式正确。

此外，如果您需要填充 Sheet2 中的任何其他字段，则还可以将 vlookup 用作数组公式，例如： VLOOKUP(A2,Sheet2!A:B,{1,2,3,4},FALSE)

*   使用 Crtl+Shift+Enter 将此作为数组公式输入
*   这里 {1,2,3,4} 代表要获取的列。

如果您想了解更多关于 vlookup 的信息，请阅读这篇文章：[http ://www.exceltrick.com/formulas_macros/vlookup-in-excel](http://www.exceltrick.com/formulas_macros/vlookup-in-excel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T11:19:55.790

正如 Jerry 所说`VLOOKUP`，这是最简单的方法。

但是，如果您在 BRAND 中有多个/重复实例（行），`VLOOKUP`则只会返回出现在数据中的第一条记录（行）。

如果是这种情况，您将需要添加唯一标识符列；和/或用于区分重复实例的附加标准。

例如，列 A 用作区分 2 个“Nike”行的唯一标识符。

```
A       B          C
1     BRAND    LEFTOVER 
2     Nike        50
3     Adidas      25
4     Reebok      30
5     Nike        29 
```

# jquery - 删除所有过滤器后还原为全部显示

> ID：15653130
> 
> 赞同：0
> 
> 时间：2013-03-27T06:37:16.490
> 
> 标签：jquery, find, show-hide

删除所有过滤器后，如何使此功能恢复为显示所有内容？

我试过*`if (attrColor == 'All') {...}`*改成*`if (attrColor == 'All' || attrColor == '') {...}`*

我在这里发布了一个简单的函数示例：http: [//jsfiddle.net/chayacooper/WZpMh/88/](http://jsfiddle.net/chayacooper/WZpMh/88/)

```
$(document).ready(function () {
    var selected = [];
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        var $this = $(this);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected.splice(selected.indexOf(attrColor),1);
        }
        else {
            $this.parent().addClass("active");
            selected.push(attrColor);
        }
        if (attrColor == 'All') {
            $('#content').find('*').show();
        } else {
        $("#content").find("*").hide();
        $.each(selected, function(index,item) {
            $('#content').find('[data-color *="' + item + '"]').show();
        });
        }
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:43:46.973

看到这个：[演示](http://jsfiddle.net/WZpMh/97/)

```
if (attrColor == 'All' || !selected.length) {
    $('#content').find('*').show();
} else {
    $("#content").find("*").hide();
    $.each(selected, function (index, item) {
        $('#content').find('[data-color *="' + item + '"]').show();
    });
} 
```

编辑：

根据@ArunPJohny 的建议进行更新：

使用[.children()](http://api.jquery.com/children/)选择器会比 * 选择器更好地获取`li`孩子

```
if (attrColor == 'All' || !selected.length) {
    $('#content').children().show();
} else {
    $("#content").children().hide();
    $.each(selected, function (index, item) {
        $('#content').find('[data-color *="' + item + '"]').show();
    });
} 
```

# windows - 未能添加对“Newtonsoft.Json”的引用

> ID：15653137
> 
> 赞同：8
> 
> 时间：2013-03-27T06:38:19.027
> 
> 标签：windows, windows-8, visual-studio-2012, nuget, nuget-package

我刚刚在我的 PC 上安装了 Windows 8 并下载了适用于 Windows 8 的 Microsoft Visual Studio Express 2012。更新了所有内容，当我尝试通过包管理器控制台安装任何东西时，我收到以下错误：

```
PM> Install-Package Parse
Attempting to resolve dependency 'Newtonsoft.Json (≥ 4.5.9)'.
Successfully installed 'Newtonsoft.Json 4.5.11'.
Successfully installed 'parse 1.0.5'.
Successfully uninstalled 'Newtonsoft.Json 4.5.11'.
Install failed. Rolling back...
Install-Package : Failed to add reference to 'Newtonsoft.Json'.
At line:1 char:1
+ Install-Package Parse
+ ~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

有谁知道如何解决这个错误？

谢谢，杰克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-24T15:12:10.830

有时仅从 packages.config 中删除它可能还不够。在安装成功之后，我不得不从包目录中删除 Newtonsoft.Json 目录。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T07:30:06.493

检查您是否已经在 packages.config 中添加了 Newtonsoft.Json 引用。如果是，请删除 Newtonsoft.Json 条目并重试 Install-Package。

# vb.net - 无法加载文件或程序集 'interop.scripting，版本 = 1.0.0.0，

> ID：15653139
> 
> 赞同：0
> 
> 时间：2013-03-27T06:38:21.533
> 
> 标签：vb.net, vba

我在调试模式下运行我的项目并且它工作正常，但是当我尝试编译它时显示这个错误：这个错误是什么意思？

```
*** Assembly Binder Log Entry  (3/27/2013 @ 2:22:26 PM) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
Running under executable  C:\Documents and Settings\nsbadmin\Desktop\antiSpam.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = NIDECSUBIC\nsbadmin
LOG: DisplayName = antiSpam.resources, Version=1.0.0.0, Culture=en, PublicKeyToken=null
(Fully-specified)
LOG: Appbase = file:///C:/Documents and Settings/nsbadmin/Desktop/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = NULL
Calling assembly : antiSpam, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using machine configuration file from      c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Documents and Settings/nsbadmin/Desktop/en/antiSpam.resources.DLL.
LOG: Attempting download of new URL file:///C:/Documents and Settings/nsbadmin/Desktop/en/antiSpam.resources/antiSpam.resources.DLL.
LOG: Attempting download of new URL file:///C:/Documents and Settings/nsbadmin/Desktop/en/antiSpam.resources.EXE.
LOG: Attempting download of new URL file:///C:/Documents and Settings/nsbadmin/Desktop/en/antiSpam.resources/antiSpam.resources.EXE.
LOG: All probing URLs attempted and failed. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:51:56.080

尝试查找文件资源时似乎失败了。在 VS 中，将其属性更改为嵌入到您的 exe 文件中。

# javascript - 在 Javascript 中使用 Google 文字转语音

> ID：15653145
> 
> 赞同：57
> 
> 时间：2013-03-27T06:39:16.780
> 
> 标签：javascript, google-text-to-speech

我需要在 JavaScript中播放**Google 文字转语音。**
这个想法是使用网络服务：

> [http://translate.google.com/translate_tts?tl=en&q=This%20is%20just%20a%20test](http://translate.google.com/translate_tts?tl=en&q=This%20is%20just%20a%20test)

并在某些动作上播放它，例如单击按钮。

但它似乎不像加载普通的 wav/mp3 文件：

```
<audio id="audiotag1" src="audio/example.wav" preload="auto"></audio>

<script type="text/javascript">
    function play() {
        document.getElementById('audiotag1').play();
    }
</script> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2014-03-06T19:24:36.537

现在的另一个选择可能是[HTML5 文本到语音](http://updates.html5rocks.com/2014/01/Web-apps-that-talk---Introduction-to-the-Speech-Synthesis-API)，它在 Chrome 33+ 和[许多其他](http://caniuse.com/#search=SpeechSynthesisUtterance)版本中。

这是一个示例：

```
var msg = new SpeechSynthesisUtterance('Hello World');
window.speechSynthesis.speak(msg); 
```

有了这个，也许您根本不需要使用 Web 服务。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-03-27T06:58:01.340

这是我找到的代码片段：

```
var audio = new Audio();
audio.src ='http://translate.google.com/translate_tts?ie=utf-8&tl=en&q=Hello%20World.';
audio.play(); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-03-02T19:10:06.873

您可以将 the`SpeechSynthesisUtterance`与[say](https://github.com/JudahRR/Say.js)之类的函数一起使用：

```
function say(m) {
  var msg = new SpeechSynthesisUtterance();
  var voices = window.speechSynthesis.getVoices();
  msg.voice = voices[10];
  msg.voiceURI = "native";
  msg.volume = 1;
  msg.rate = 1;
  msg.pitch = 0.8;
  msg.text = m;
  msg.lang = 'en-US';
  speechSynthesis.speak(msg);
} 
```

然后你只需要`say(msg)`在使用时调用它。

**更新**：查看 Google 的开发人员博客，该博客是关于 Voice Driven Web Apps Introduction to the Web Speech API。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-10-16T22:06:51.663

响应式语音非常容易。只需包括 js 和瞧！

```
<script src='https://code.responsivevoice.org/responsivevoice.js'></script>

<input onclick="responsiveVoice.speak('This is the text you want to speak');" type='button' value=' Play' /> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-09-06T09:27:21.537

运行此代码，它将输入作为音频（麦克风）并转换为文本而不是音频播放。

```
<!doctype HTML>
<head>
<title>MY Echo</title>
<script src="http://code.responsivevoice.org/responsivevoice.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.1/css/font-awesome.min.css" />
<style type="text/css">
    body {
        font-family: verdana;
    }

    #result {
        height: 100px;
        border: 1px solid #ccc;
        padding: 10px;
        box-shadow: 0 0 10px 0 #bbb;
        margin-bottom: 30px;
        font-size: 14px;
        line-height: 25px;
    }

    button {
        font-size: 20px;
        position: relative;
        left: 50%;
    }
</style> 
```

JS 中的语音到文本转换器 var r = document.getElementById('result');

```
 function startConverting() {
        if ('webkitSpeechRecognition' in window) {
            var speechRecognizer = new webkitSpeechRecognition();
            speechRecognizer.continuous = true;
            speechRecognizer.interimResults = true;
            speechRecognizer.lang = 'en-IN';
            speechRecognizer.start();
            var finalTranscripts = '';
            speechRecognizer.onresult = function(event) {
                var interimTranscripts = '';
                for (var i = event.resultIndex; i < event.results.length; i++) {
                    var transcript = event.results[i][0].transcript;
                    transcript.replace("\n", "<br>");
                    if (event.results[i].isFinal) {
                        finalTranscripts += transcript;
                        var speechresult = finalTranscripts;
                        console.log(speechresult);
                        if (speechresult) {
                            responsiveVoice.speak(speechresult, "UK English Female", {
                                pitch: 1
                            }, {
                                rate: 1
                            });
                        }
                    } else {
                        interimTranscripts += transcript;
                    }
                }
                r.innerHTML = finalTranscripts + '<span style="color:#999">' + interimTranscripts + '</span>';
            };
            speechRecognizer.onerror = function(event) {};
        } else {
            r.innerHTML = 'Your browser is not supported. If google chrome, please upgrade!';
        }
    }
</script>
</body>

</html> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-09-09T23:28:35.353

我不知道 Google 语音，但使用 javaScript 语音 SpeechSynthesisUtterance，您可以将点击事件添加到您引用的元素。例如：

```
const listenBtn = document.getElementById('myvoice');

listenBtn.addEventListener('click', (e) => {
  e.preventDefault();

  const msg = new SpeechSynthesisUtterance(
    "Hello, hope my code is helpful"
  );
  window.speechSynthesis.speak(msg);

});
```

```
<button type="button" id='myvoice'>Listen to me</button>
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-12-30T04:38:45.517

下面的 JavaScript 代码将要朗读/转换为 mp3 音频的“文本”发送到 google cloud text-to-speech API，并获取 mp3 音频内容作为响应。

```
 var text-to-speech = function(state) {
    const url = 'https://texttospeech.googleapis.com/v1beta1/text:synthesize?key=GOOGLE_API_KEY'
    const data = {
      'input':{
         'text':'Android is a mobile operating system developed by Google, based on the Linux kernel and designed primarily for touchscreen mobile devices such as smartphones and tablets.'
      },
      'voice':{
         'languageCode':'en-gb',
         'name':'en-GB-Standard-A',
         'ssmlGender':'FEMALE'
      },
      'audioConfig':{
      'audioEncoding':'MP3'
      }
     };
     const otherparam={
        headers:{
           "content-type":"application/json; charset=UTF-8"
        },
        body:JSON.stringify(data),
        method:"POST"
     };
    fetch(url,otherparam)
    .then(data=>{return data.json()})
    .then(res=>{console.log(res.audioContent); })
    .catch(error=>{console.log(error);state.onError(error)})
  }; 
```

# javascript - 在原型中将 HTML 元素移到其他元素之前

> ID：15653148
> 
> 赞同：0
> 
> 时间：2013-03-27T06:39:40.957
> 
> 标签：javascript, prototype

我在 js 创建动态 html 的 magento 环境中工作。现在我想将一个元素移到另一个元素之前。因为这可能是因为 html 也在加载表单 js 并且将应用替换？我的最终 html 代码显示为：

```
<div class="x-tree-node-el folder active-category x-tree-node-collapsed" id="extdd-3"><span class="x-tree-node-indent"><img class="x-tree-icon" src="http://extjs.com/s.gif"></span><img class="x-tree-ec-icon x-tree-elbow-plus" src="http://extjs.com/s.gif" id="ext-gen27"><img unselectable="on" class="x-tree-node-icon" src="http://extjs.com/s.gif" id="ext-gen24"><a tabindex="1" href="#" hidefocus="on" id="ext-gen21"><span unselectable="on" id="extdd-4">Laptops (2)</span></a><input type="checkbox" class="copycate" value="110" name="tree['110']"></div> 
```

我想在锚标记之前移动输入 typ="checkobx"。就像我的最终结果一样

```
 <div class="x-tree-node-el folder active-category x-tree-node-collapsed" id="extdd-3"><span class="x-tree-node-indent"><img class="x-tree-icon" src="http://extjs.com/s.gif"></span><img class="x-tree-ec-icon x-tree-elbow-plus" src="http://extjs.com/s.gif" id="ext-gen27"><img unselectable="on" class="x-tree-node-icon" src="http://extjs.com/s.gif" id="ext-gen24">
<input type="checkbox" class="copycate" value="110" name="tree['110']">
<a tabindex="1" href="#" hidefocus="on" id="ext-gen21"><span unselectable="on" id="extdd-4">Laptops (2)</span></a></div> 
```

我尝试此代码但不起作用。

```
 <script>
  $('.copycate').insert({
  before: "<a>",
  after: "<img>"
});
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:35:18.573

```
$('.copycate').insertBefore($('#ext-gen21')); 
```

[jQuery API - 插入之前](http://api.jquery.com/insertBefore/)

# android - 检查最近几天使用的应用程序的历史记录

> ID：15653149
> 
> 赞同：-1
> 
> 时间：2013-03-27T06:39:42.993
> 
> 标签：android, eclipse

我有一部安卓手机。我是否有办法在 Log 中查看我个人手机使用过的应用程序的历史记录。例如，我想知道 SMS 应用程序打开了多少次以及确切打开的时间。我可以在不使用 Eclipse 安装任何应用程序的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:48:41.960

你可以做：

```
$ adb shell am start -n com.android.settings/com.android.settings.UsageStats 
```

获取一些使用统计信息

# rubygems - 一种让 best_in_place 在 ios 上工作的方法

> ID：15653150
> 
> 赞同：1
> 
> 时间：2013-03-27T06:39:51.033
> 
> 标签：rubygems, best-in-place

best_in_place 宝石是惊人的。我们的内联编辑在 PC 和 Android 设备上运行得很好，但它似乎不适用于 iOS 设备。在 iOS 上，它只是不会在点击时激活。有没有办法让它在 iOS 上运行？

# javascript - 自定义 Google 搜索 Ajax 调用

> ID：15653151
> 
> 赞同：1
> 
> 时间：2013-03-27T06:40:05.313
> 
> 标签：javascript, asp.net, google-custom-search

我正在使用自定义 Google 搜索来获取搜索查询的 Google 内容。

它在我的开发人员工具中显示了一些错误。该错误不影响结果意味着结果显示在我的 UI 中，但显示了一些错误。

错误是

1.  [加载“ http://www.google.com/cse?q=web%20storage%20in%20html5&client=google-coop&h](http://www.google.com/cse?q=web%20storage%20in%20html5&client=google-coop&h) …330&dt=1364365747827&u_w=1366&u_h=768&bs=1366,333&ps时遇到无效的“X-Frame-Options”标头=1366,0&frm=0#master-1': 'ALLOWALL' 不是公认的指令。标题将被忽略。

2.  不安全的 JavaScript 尝试使用 URL about:blank from frame with URL [http://www.google.com/cse?q=web%20storage%20in%20html5&client=google-coop&h](http://www.google.com/cse?q=web%20storage%20in%20html5&client=google-coop&h) …330&dt=1364365747827&u_w=1366&u_h=768&bs=1366访问框架,333&ps=1366,0&frm=0#master-1。域、协议和端口必须匹配。

3.  [加载“ http://www.google.com/cse?q=web%20storage%20in%20html5&client=google-coop&h](http://www.google.com/cse?q=web%20storage%20in%20html5&client=google-coop&h) …earch.aspx%3Fquery%3Dweb%2520storage%2520in时遇到无效的“X-Frame-Options”标头%2520html5%26type%3D2#slave-1-1'：“ALLOWALL”不是公认的指令。标题将被忽略。

这三个错误显示在我的开发人员工具中。

我在 aspx 页面中的代码

```
<script src="https://www.google.com/jsapi" type="text/javascript"></script>
<script>
    google.load('search', '1');
    // get a custom search control & keep it in cseControl
    // note: put your own custom search ID number here
    var cseControl = new google.search.CustomSearchControl('009827885688477640989:igzwimalyta');
    // open pages from search results clicks on the same page
    cseControl.setLinkTarget(google.search.Search.LINK_TARGET_SELF);
    // when there are no matches, explain why
    cseControl.setNoResultsString("Sorry, there are no pages in this web site that match all the search terms.");
    // make the search field visible in div with ID 'cseDiv'
    cseControl.draw('divGoogleResult');

    cseControl.execute(userInput);
</script> 
```

为什么显示此错误？如何消除这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:53:18.837

> 为什么显示此错误？

1.  因为谷歌的代码做了一些非标准的事情
2.  因为谷歌的代码试图做不允许的事情。
3.  这与 1 相同

> 如何消除这些错误？

除非不使用 Google 的代码（或在 Google 找到一份从事该服务的工作！），否则您不能。

# java - 如何在被输入java阻塞时对事件做出反应

> ID：15653154
> 
> 赞同：0
> 
> 时间：2013-03-27T06:40:17.410
> 
> 标签：java, multithreading, sockets, stream, thread-safety

我有 Socket-Client 应用程序。下面的代码应该允许客户端同时读取来自服务器的回复和读取输入。问题是——这段代码在 Eclipse 中调试时“工作”，就像我在正在调试的进程中收到超出正常流程的消息一样，但是如果我正常启动应用程序，它会完全忽略该进程吗？“IDE 工作，现实生活不工作”综合症的最常见原因是什么？

整个文件：

服务器：

```
public class Server implements Runnable {

static ServerSocket serverSocket;
Socket tempSocket;
Socket tempSocket2;
static volatile List<User> usersList = new ArrayList<User>();
static boolean waitForNew = true;
PrintWriter tempOut;
volatile User[] tempUser;
volatile boolean isReadingN = false;

public Server(Socket _s, Socket _s2) {
    tempSocket = _s;
    tempSocket2 = _s2;
}

public Server(PrintWriter nOut, User[] user) {
    tempOut = nOut;
    tempUser = user;
    isReadingN = true;
}

@Override
public void run() {
    if (isReadingN) {
        while (true) {
            if (tempUser != null && tempUser.length > 0
                    && tempUser[0] != null)
                break;
        }
        User[] myUser = new User[1];
        myUser[0] = tempUser[0];
        // myUser[0]=usersList.
        while (true) {
            if (myUser[0].isCurrentlyLoggedIn() == false)
                break;
            String[] toSend = null;
            if (myUser[0].isNotificable())
                toSend = myUser[0].printNotifications().split("\n");
            else
                continue;
            //tempOut.println("");
            int sendL=toSend.length;
            tempOut.println(String.valueOf(sendL));
            for (int i = 0; i < toSend.length; i++)
                tempOut.println(toSend[i]);
        }
        return;
    }
    Socket clientSocket = tempSocket;
    System.out.println("Initiating conversation with the client");
    String inputLine;
    try {
        System.out.print("creating server out...");
        PrintWriter out = new PrintWriter(clientSocket.getOutputStream(),
                true);
        Socket iClientSocket = tempSocket2;
        ObjectOutputStream iout = new ObjectOutputStream(
                iClientSocket.getOutputStream());
        System.out.println("OK!");
        System.out.print("creating server in...");
        BufferedReader in = new BufferedReader(new InputStreamReader(
                clientSocket.getInputStream()));
        System.out.println("OK!");
        System.out.print("creating server image streams...");
        System.out.println("OK!");
        System.out.println("Server initiating conversation");
        User[] currentUser = new User[1];
        new Thread(new Server(out, currentUser)).start();
        while ((inputLine = in.readLine()) != null) {
            System.out.println(inputLine);
            boolean[] downloadPicture = new boolean[1];
            downloadPicture[0] = false;
            String input = Command.call(inputLine, currentUser, usersList,
                    downloadPicture);
            String[] toSend;
            if (input != null) {
                toSend = input.split("\n");
            } else
                toSend = new String[0];
            out.println(String.valueOf(toSend.length));
            for (int i = 0; i < toSend.length; i++)
                out.println(toSend[i]);
            if (downloadPicture[0]) {

                    System.out.println("File sent.");

                    iin.close();

                } else{
                    out.println("1");
                    out.println("Error: File does not exit.");}
            } else
                //out.println(" ");
            if (inputLine.equals("EXIT")) {
                waitForNew = false;
                break;
            }
        }
        // End communication graciously
        System.out.println("Closing sockets, closing streams");
        out.close();
        in.close();
        clientSocket.close();
        serverSocket.close();
    } catch (IIOException e) {
        System.out.println("Error: Could not find file");
        e.printStackTrace();
        System.exit(-1);
    } catch (IOException e) {
        System.out.println("Error");
        e.printStackTrace();
        System.exit(-1);
    }

}

public static void main(String[] args) {
    // Create socket on port given in argument, localhost
    if (args.length == 0) {
        System.out
                .println("Not enough arguments. Try Server <port number>");
        System.exit(-1);
    }
    int port = 0;
    try {
        port = Integer.valueOf(args[0]);
        System.out.println("Application start");

        serverSocket = new ServerSocket(port);
        System.out.println("Created socket on port " + port);
    } catch (NumberFormatException c) {
        System.out
                .println("Incorrect port number. Try Server <port number>");
        System.exit(-1);
    } catch (IOException e) {
        System.exit(-1);
    }

    // Waiting for client
    System.out.println("Waiting for client...");
    Socket clientSocket = null;
    Socket iClientSocket = null;
    while (waitForNew) {
        try {
            clientSocket = serverSocket.accept();
            iClientSocket = serverSocket.accept();
            new Thread(new Server(clientSocket, iClientSocket)).start();
        } catch (IOException e) {
            System.out.println("Accept failed: " + port);
            System.exit(-1);
        }
    }

} 
```

}

客户：

```
public class Client implements Runnable {
static Socket clientSocket = null;
static Socket iClientSocket = null;
static PrintWriter out = null;
static BufferedReader in = null;
static InputStream iin = null;
public static void main(String[] args) {
    int port = Integer.valueOf(args[1]);
    String host = args[0];

    try {
        clientSocket = new Socket(host, port);
        iClientSocket = new Socket(host, port);
        out = new PrintWriter(clientSocket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(
                clientSocket.getInputStream()));
        iin = iClientSocket.getInputStream();
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host: " + host);
        System.exit(-1);
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for " + "the connection to: "
                + host);
        System.exit(-1);
    }

    BufferedReader stdIn = new BufferedReader(new InputStreamReader(
            System.in));
    String userInput;

    try {
        new Thread(new Client()).start();
        while ((userInput = stdIn.readLine()) != null) {
            out.println(userInput);
        }
        System.out.println("Closing sockets, closing streams");

        out.close();
        in.close();
        stdIn.close();
        iClientSocket.close();
        clientSocket.close();

    } catch (IOException e) {
        System.exit(-1);
    }

}

@Override
public void run() {
    String a = null;

    try {
        while (true) {
            if((a = in.readLine()) == null)
                continue;
            int n;
            try{
                n = Integer.valueOf(a);
            }catch(NumberFormatException e){
                System.out.println(a);
                n=1;
                //continue;
            }
            a = "";
            for (int i = 0; i < n; i++)
                a += in.readLine() + "\n";
            System.out.println(a);
            // if(a.contains("POST"),)
            if (a.compareToIgnoreCase("EXIT") == 0) {
                System.out.println("Exiting");
                break;
            }
            if (a.endsWith("Sending File\n")) {

                System.out.println("Recieving image.");
               (some unimportant for now code)
                System.out.println("Image recieved");

            }
        }
    } catch (IOException e) {

    }

} 
```

}

# qt - QSortFilterProxyModel 打破 columnWidths

> ID：15653155
> 
> 赞同：1
> 
> 时间：2013-03-27T06:40:17.930
> 
> 标签：qt, qtableview, qheaderview

将列宽保存在 QTableView 中的标准做法是什么，该 QTableView 通过 QSortFilterProxyModel 隐藏/删除某些列（以任意顺序）？请注意，我说的是在单个实例中隐藏和取消隐藏它们。

我已经尝试了很多方法（都很难看）来实现它。我肯定做错了什么。

我查看了 QHeaderView::saveState() 和 QHeaderView::restoreState()，但除非我遗漏了什么，否则这实际上只适用于从关机到开始保存。一旦以不同的顺序隐藏和取消隐藏列，就会中断。

QSortFilterProxyModel 使用 filterAcceptsColumn() 可以正常工作。需要注意的是，当 filterAcceptsColumn() 在先前返回 false 的列上返回 true 时。我运行 invalidateFilter() 并将其绘制在 QTableView 中。但是，QTableView 对列宽使用了一些默认值（似乎是 100），而不是在 QSortFilterProxyModel 隐藏列之前的宽度。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:45:14.157

是的，`setSectionHidden()`改为使用。

通常，您应该尝试将与视图相关的代码（例如在运行时显示/隐藏列）保留在模型之外。在我们的应用程序中，我们有子类，`QTableView`它们`QHeaderView`允许用户使用上下文菜单显示/隐藏列；显示/隐藏列宽（以及位置）时不会触及它们。

`filterAcceptsColumn`可用于完全禁用主键、外键等列。

# liferay-6 - 数据库仅在 liferay 中使用第一个条目进行更新

> ID：15653160
> 
> 赞同：0
> 
> 时间：2013-03-27T06:40:43.327
> 
> 标签：liferay-6, jsp-tags

我很有趣liferay。我在 jsp 中显示一些数据，这些数据来自数据库中的不同表。我有一个单选按钮字段，用户需要单击它，然后在用户提交表单时更新应该发生。我遇到的问题是每次只有第一个值被更新。前任。我显示了大约 5 个条目，我单击每个条目的单选按钮，然后提交表单。只有第一个条目被更新。不采用其他值。可能是什么问题？

这是我的jsp：“ method="post" >

```
 <portlet:renderURL  var="viewEmployeeDataURL"/> 
```

" results="<%= ListUtil.subList(EmployeeAttendanceDetails , searchContainer.getStart(), searchContainer.getEnd()) %>" />

```
 <liferay-ui:search-container-column-text name='Employee Name' value='<%=String.valueOf(search.getEmpFname()) + "  " + String.valueOf(search.getEmpLname())%>'  href="" />

       <liferay-ui:search-container-column-jsp  name = "Attendance Status" path="/admin/radioButtonDisplay.jsp" align="center"/>

       <!-- Get Attendance Remarks for each employee -->

        <liferay-ui:search-container-column-jsp  name = "Attendance Remarks" path="/admin/AttendanceDetails.jsp" align="center"/>

       <!-- Get Attendance Remarks for each employee -->

    </liferay-ui:search-container-row>
    <liferay-ui:search-iterator searchContainer="<%=searchContainer %>" paginate="<%=true %>" />
</liferay-ui:search-container>

<input type = "submit" value = "Update"/>
</aui:form> 
```

在上面的 jsp 中，AttendanceDetails.jsp 只显示数据库中的“remarks”列，radioButtonDidplay.jsp 如下：“method="post" > Present Absent

```
</aui:form> 
```

当我提交表单时，它会进入动作类迭代每个条目以更新每个条目的代码是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:59:04.780

我得到了我的问题的答案。显然这不是与数据库相关的问题。问题是我没有迭代这些值。我从数据库中获取值，并为每个员工标记出勤率。只更新一个条目的原因是因为它只为一个元素取值。

我在我的操作类中使用了一个循环来遍历所有值，现在它工作正常！！

# hadoop - 在 Mahout 中运行 Breiman 示例时出现 java.lang.ClassNotFoundException

> ID：15653170
> 
> 赞同：1
> 
> 时间：2013-03-27T06:42:07.350
> 
> 标签：hadoop, mahout

我正在尝试在单个系统（伪分布式模式）上运行在 Mahout 中构建决策森林以进行分类的 Breiman 示例。我指的是[本教程](https://cwiki.apache.org/MAHOUT/breiman-example.html) 我对教程的前两个步骤没有问题，但第三步（即“为数据集生成文件描述符”）抛出异常，如下所示

```
Exception in thread "main" java.lang.ClassNotFoundException: org.apache.mahout.classifier.df.tools.Describe
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:266)
at org.apache.hadoop.util.RunJar.main(RunJar.java:149) 
```

我运行的命令是

```
hadoop_admin@ubuntu:~/hadoop$ bin/hadoop jar /home/viggi/workspace/mahout-distribution-0.5/mahout-core-0.5-job.jar org.apache.mahout.classifier.df.tools.Describe -p data10/glass.data -f data10/glass.info -d I 9 N L 
```

我在堆栈溢出中发现了一个类似异常的帖子。[java.lang.NoClassDefFoundError](https://stackoverflow.com/questions/11377099/java-lang-noclassdeffounderror)即使它与 mahout 或 Breiman 示例无关，我还是决定采用推荐的解决方案，即下载`HttpClient jar-library`并将其放入`$MAHOUT_HOME/lib`. 它没有用。因此，如果有人可以解释第三步的实际作用以及如何摆脱这些异常，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:31:07.743

据我所知， Mahout 0.5 没有`org.apache.mahout.classifier.df.tools.Describe`类，这就是为什么你得到异常，它找不到它。

从 Mahout 0.6 开始，课程就在那里。我建议你升级到最新的稳定版 Mahout (0.7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:33:10.133

您的包`Describe`似乎是错误的 - 在我刚刚下载的 0.5 core-job.jar 中，Describe 的包不包含分类器部分：

*   `org.apache.mahout.df.tools.Describe`

不知道你是如何在你的代码中编译它的

# visual-studio-2012 - Visual Studio 2012 Express 上缺少“设计新报告”

> ID：15653174
> 
> 赞同：1
> 
> 时间：2013-03-27T06:42:46.870
> 
> 标签：visual-studio-2012, reportviewer

祝大家早日/晚安。我在这里是因为我找不到我的问题的确切答案。谷歌没有给我确切的答案。我已经下载了[MICROSOFT REPORT VIEWER 2012 RUNTIME](http://www.microsoft.com/en-us/download/details.aspx?id=35747)，我已经成功地将 reportviewer2012 集成到 Visual Studio 2012 Express 中。当我拖动 reportviewer 并单击**Design new Report**时，不会出现报告向导。这是某种错误吗？还是我忘记在 Visual Studio 2012 Express 中添加的内容？请帮我解决这类问题。谢谢

# jquery - 切换每个链接旁边的每个 div 并获取帖子数据

> ID：15653176
> 
> 赞同：0
> 
> 时间：2013-03-27T06:42:55.860
> 
> 标签：jquery, toggle

我的正文部分中有以下 html 元素：

```
<a class="tog" href="#">Click Me</a> 
<div class="result">
    This is a container div
</div> <br />
<a class="tog" href="#">Click Me</a> 
<div class="result">
    This is a container div
</div> 
```

头部包含以下内容：

```
.result{
    display: none;
} 
```

我想要做的是，在单击每个链接`<a>`时，下一个`div`将切换，同时它将`div`通过`post`. 所以我的jQuery代码是：

```
$(document).ready(function () {
    $(".tog").click(function () {
        if (!$(this).next(".result").data('loaded')) {
            $.post("anotherpage.php", {
                id1: "value1"
            }, function (data) {
                $(this).next(".result").html(data);
                $(this).next(".result").data('loaded', true);
            });
        }
        $(this).next(".result").slideToggle("slow");
        return false;
    });
}); 
```

每个链接旁边的每个 div`<a>`都可以通过上面的代码很好地切换。但是数据不是从另一个页面获取的。如果我从上述代码的每个点中排除 $(this).next ，如下所示：

```
$(document).ready(function () {
    $(".tog").click(function () {
        if (!$(".result").data('loaded')) {
            $.post("anotherpage.php", {
                id1: "value1"
            }, function (data) {
                $(".result").html(data);
                $(".result").data('loaded', true);
            });
        }
        $(this).next(".result").slideToggle("slow");
        return false;
    });
}); 
```

在单击每个链接并`post`从另一个页面获取数据后，每个 div 都会切换，但是单击任何链接都会同时将数据`div`一起获取到所有 s。

我的问题是如何修改代码，以便单击每个链接将切换`div`到该链接旁边并`div`仅将数据提取到下一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T06:51:32.020

我相信这里的问题是`$(this)`在 ajax 包装器中丢失了上下文。因此您需要在 click 函数中存储对原始元素的引用，并在成功函数中调用缓存的对象。

```
$(".tog").click(function(){
    var $this = $(this); //cached reference 
```

然后以后..

```
},function(data){   
    //note how we use $this, instead of $(this)
    $this.next(".result").html(data);
    $this.next(".result").data('loaded',true); 
```

# javascript - jsp页面提交后如何避免页面自动刷新

> ID：15653178
> 
> 赞同：0
> 
> 时间：2013-03-27T06:42:59.180
> 
> 标签：javascript, jquery, jsp, submit, form-submit

我在 jsp 页面中有一个按钮，单击该按钮时，页面被提交，然后进行一些验证，最后显示一个弹出窗口。
但是，当单击按钮时，页面会刷新。

我怎样才能避免这种情况？

我的代码：

jsp文件：

```
<s:a href="#" accesskey="w" onclick="upload('checkWithdrawPlan')">
    <img src="../../KY/images/common/buttons/plan_withdraw.png" alt="withdraw plan button" style="border: none;" />
</s:a>

<s:if test="#request.allowwithdrawPlan != null">

<s:include value="ConformationPopup.jsp"/> 
```

js代码：

```
function upload(action) {
    document.PlanSummaryForm.action = action;
    document.PlanSummaryForm.submit();
    validNavigation = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:47:48.637

我认为 jquery AJAX 调用是您无需刷新页面即可实现的解决方案。

对于序列化：[http](http://api.jquery.com/serialize/) ://api.jquery.com/serialize/ 对于 AJAX：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T06:54:40.700

正如Devesh所说，没有办法通过正常的提交行为来避免页面刷新......你需要使用一些ajax来处理没有页面刷新的数据......

# c++ - 减去两个字符并将它们添加到字符串中

> ID：15653180
> 
> 赞同：4
> 
> 时间：2013-03-27T06:43:38.320
> 
> 标签：c++

```
#include <iostream>
#include <string>

int main() { 
    char s2;
    s2 = '1' - '0';
    std::cout << s2;
    std::cout << std::endl;
    std::cout << '1' - '0';
    std::cin >> s2;
} 
```

产生的输出是：

```
☺
1 
```

我的问题是，为什么两条线不同？我期望并希望这两个结果都是`1`. 根据我的理解，它们应该是相同的，但这显然是错误的，有人可以向我解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T06:46:04.300

> 为什么两条线不同？

第一个表达式 ( `s2`) 的类型是`char`。第二个 ( `'1' - '0'`) 的类型是`int`。

这就是为什么即使它们具有相同的数值，它们的呈现方式也会不同`1`。第一个显示为[ASCII 1](http://www.theasciicode.com.ar/ascii-codes/start-of-header-ascii-code-1.gif)，而第二个显示为数字 1。

如果您想知道为什么`'1' - '0'`给出一个`int`，请参阅[两个字符的加法产生 int](https://stackoverflow.com/questions/4814668/addition-of-two-chars-produces-int)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:10:13.920

s2 的类型是`char`，`std::cout << s2`将调用`std::ostream::operator<<(char)`回显一个 ASCII 字符 1（微笑）；

'1' - '0' 被解释为一个 int 值，因此`std::ostream::operator<<(int)`将被调用并打印整数 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T06:52:11.757

s2 是 char，'1'-'0' 是 int。

所以它输入 char 值 1 表示微笑，1 表示 int 值。

# regex - 需要一个匹配 name="value" 的 RegEx

> ID：15653184
> 
> 赞同：0
> 
> 时间：2013-03-27T06:44:11.067
> 
> 标签：regex

这是我到目前为止所拥有的，无论如何我都不是正则表达式专家......
我需要能够在全球范围内进行匹配。（/G）

```
total-matched=\"([^\"]*)\"

total-matched="1618"
total-matched= "1618" 
total-matched ="1618" 
total-matched = "1618"
total-matched='1618'
total-matched= '1618'
total-matched ='1618'
total-matched = '1618' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:59:06.067

```
total-matched\s*=\s*(["'])(.*?)\1 
```

*   `total-matched`- 字面上匹配
*   `\s*`- 之前的可选空格`=`
*   `=`- 字面上匹配
*   `\s*`- 之后的可选空格`=`
*   `(["'])`- 匹配任一类型的引号，并将其记住为 \1
*   `(.*?)`- 任何文本的非贪婪匹配，作为第 2 组捕获
*   `\1`- 匹配我们之前匹配的相同类型的报价

# ejb - 将消息从消息驱动 Bean 发送到会话 Bean

> ID：15653188
> 
> 赞同：1
> 
> 时间：2013-03-27T06:44:40.460
> 
> 标签：ejb, jms

我有一个程序，其中在一个 ejb 项目中创建会话 bean，并使用队列将消息发送到单独项目中的消息驱动 bean。在消息驱动 bean 中，我设法检索从会话 bean 发送过来的消息。然后该消息将用于获取另一个值，我必须将其发送回会话 bean。关于如何做的任何想法。非常感谢您提供的任何帮助。

ManagerBean：（部分代码）

```
 queueConnection=queueConnectionFactory.createConnection();
            session=queueConnection.createSession(false, Session.AUTO_ACKNOWLEDGE);
            replyQueue=session.createTemporaryQueue();
            consumer=session.createConsumer(replyQueue);
            consumer.setMessageListener(new LpsListener());
            queueConnection.start();
            producer=session.createProducer(queue);

            message=session.createMapMessage();
            message.setJMSReplyTo(replyQueue);
            producer.send(message); 
```

和我的 MDB：（部分在 OnMessage 中）

```
 msg=(MapMessage)message;

            String memId=msg.getString("MemberId");
            int fine=mmr.getFine(memId);

            queueConnection=queueConnectionFactory.createConnection();
            replyDest=msg.getJMSReplyTo();
            replyCorrelationMsgId=msg.getJMSMessageID();
            queueSession=queueConnection.createSession(true, 0);
            queueProducer=queueSession.createProducer(replyDest);
            replyMsg=createReplyMsg(queueSession, replyCorrelationMsgId);
            queueProducer.send(replyMsg);

            private ObjectMessage createReplyMsg(Session session, String msgId)throws                      JMSException{
            ObjectMessage replyMsg=session.createObjectMessage();
            replyMsg.setIntProperty("fine", fine);
            replyMsg.setJMSCorrelationID(msgId);
            return replyMsg;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T06:00:12.667

您可以与 JMS`JMSCorrelationID`结合使用`JMSReplyTo`以具有请求/响应机制。

以下是*未经测试*的示例代码。

**经理豆**

```
message.setJMSReplyTo(queue);
String correlationId = generateRandomString();
message.setJMSCorrelationID(correlationId);
producer.send(message); 
```

**消息驱动 Bean**

```
responseMessage.setJMSCorrelationID(requestMessage.getJMSCorrelationID());
queueProducer.send(requestMessage.getJMSReplyTo(), responseMessage); 
```

* * *

**编辑：**摘录自文档以进一步澄清。

> *   **JMSCorrelationID ：**客户端可以使用 JMSCorrelationID 标头字段将一条消息与另一条消息链接。一个典型的用途是将响应消息与其请求消息链接起来。
>     
>     
> *   **JMSReplyTo ：** JMSReplyTo 标头字段包含应发送对当前消息的答复的目的地。**在某些情况下，客户端可能希望将它之前发送的请求与它刚刚收到的回复相匹配。客户端可以为此目的使用 JMSCorrelationID 标头字段。**

*[强调我的]*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T10:15:41.433

如果要将消息发送回 bean 的新实例。IE。一个无状态的 bean，你可以使用`@EJB`注解注入一个新的 Bean 实例。如果您想将它发送到特定的有状态 bean，那么您应该有某种方式来识别第一条消息中的 Bean，例如 bean id。然后，当您发送返回消息时，此 id 将用于标识 bean。

# jquery - 滑动表单打开/关闭页面并展开 div

> ID：15653195
> 
> 赞同：1
> 
> 时间：2013-03-27T06:45:19.540
> 
> 标签：jquery, css, slide, slidetoggle

好的，这可能有点棘手，但我相信这是可行的。我有两个按钮，我想用它们触发两个表单，最初用户会看到两个按钮和下面的一个表单，当他们单击另一个按钮时，会滑入一个比第一个大一点的不同表单并展开 page/div 以包含它。这是我到目前为止的 HTML：

```
<a href="#" class="msg medlightgreen large-6 columns">send us a message</a> 
<a href="#" class="quote medlightgreen large-6 columns">request free quote</a>  

<div class="msgform">
<form>
    <div class="row">
        <div class="large-4 columns">
        <input type="text" placeholder="name">
        </div>
        <div class="large-4 columns">
        <input type="text" placeholder="phone">
        </div>
        <div class="large-4 columns">
        <input type="text" placeholder="e-mail">
        </div>
    </div>
    <div class="row">
        <div class="large-6 columns">
        <input type="text" placeholder="monthly budget">
        </div>
        <div class="large-6 columns">
        <input type="text" placeholder="timeframe">
        </div>
    </div> 
    <div class="row">
        <div class="large-12 columns">
        <textarea placeholder="message"></textarea>
        </div>
    </div>
</form>
</div>  

<div class="quoteform">
<form>
    <div class="row">
        <div class="large-4 columns">
        <input type="text" placeholder="name">
        </div>
        <div class="large-4 columns">
        <input type="text" placeholder="phone">
        </div>
        <div class="large-4 columns">
        <input type="text" placeholder="e-mail">
        </div>
    </div>
    <div class="row">
        <div class="large-12 columns">
        <textarea placeholder="message"></textarea>
        </div>
    </div>
</form>
</div> 
```

我尝试将以下内容添加到 JS 但似乎不起作用：

```
$(document).ready(function() {
  $('.msg').click(function() {
$(".msgform").slideToggle(200);
  });
  $('.quote').click(function() {
$(".quoteform").slideToggle(200);
  });
 }); 
```

![在此处输入图像描述](../Images/19991f832cef4aed50b58eec0aa08f1f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:38:15.847

到目前为止它对我有用：我创建了一个 jsFiddle：

**更新** [http://jsfiddle.net/h9Zt4/1/](http://jsfiddle.net/h9Zt4/1/)

而且我将第二种形式的样式设置为`display:none`，因为您一开始只想显示一个。

所以你会看到

```
<div class="quoteform" style="display: none;"> 
```

这样一来，第二种形式就被隐藏了。当然，你也可以在类css样式中添加“display:none”。

这是你想要的吗？

# git - 开源项目的 Github 和本地开发

> ID：15653197
> 
> 赞同：0
> 
> 时间：2013-03-27T06:45:49.140
> 
> 标签：git, github

我们正在开发一个开源项目，并将在 Github 上发布它。目前我们在我们自己的服务器上有一个开发者拉/推到的仓库。

考虑到这一点，我们是否可以设置使用我们自己的 repo 进行开发。然后在准备好发布更改后将其作为单个提交推送到 Github 上的存储库？

或者这个的标准做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:46:53.580

您可以设置一个指向 GitHub 的遥控器。

```
git remote add github git@github.com:user/project.git 
```

然后，当您希望您的更改出现在 GitHub 存储库中时，您可以推送它。

```
git push github 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:35:29.833

使用服务器上的代码使您的代码保持最新。然后在 Github 上创建一个存储库，您将获得一个存储库的 url。然后按照这些步骤

```
git remote add origin https://github.com/username/reponame.git
git push -u origin --all 
```

它会将你所有的提交和你机器上的所有分支推送到 github。参考这个[git hub 链接](https://help.github.com/articles/creating-a-new-repository)

# jquery - 使用 jquery 进行表单验证 - 突出显示错误字段

> ID：15653198
> 
> 赞同：1
> 
> 时间：2013-03-27T06:45:57.577
> 
> 标签：jquery, forms, jquery-validate, highlight

我的 jquery 验证表单需要一些帮助。除了错误文本框部分的突出显示之外，我设法让一切正常工作。我需要发生以下情况：

每当某个字段的规则被破坏时，该字段必须应用黄色背景色 3 秒；然后它变回白色。有人可以帮我吗？

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>

<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.js">    </script>

    <script type="text/javascript"> 
    $(document).ready(function() {  
    $("#form1").validate({ 

        rules: { 
          name: {
                  required: true,
                  minlength: 3
                },

          date: {
                  date:true
                },

          email: {// compound rule 
            required: true, 
            email: true 
                 }, 
        url: { 
          url: true 
        },

        }, 
        messages:
        { 
          name: {
          minlength: jQuery.format("At least {0} characters required.")
                }
        }

      }); 
    }); 
  </script> 

<style type="text/css"> 
    * { font-family: Verdana; font-size: 11px; line-height: 14px; } 
    .submit { margin-left: 125px; margin-top: 10px;} 
    .label { display: block; float: left; width: 120px; text-align: right; margin-right: 5px; } 
    .form-row { padding: 5px 0; clear: both; width: 700px; } 
    label.error { width: 250px; display: block; float: left; color: red; padding-left: 10px; } 
    input[type=text], textarea { width: 250px; float: left; } 
    textarea { height: 50px; } 
</style> 

</head>
 <body>
      <form id="form1" method="post" action=""> 
        <div class="form-row"><span class="label">Name *</span><input type="text" name="name" /></div>
            <div class="form-row"><span class="label">Birthdate </span><input type="text" name="date" /></div>
            <div class="form-row"><span class="label">E-Mail *</span><input type="text" name="email" /></div>
            <div class="form-row"><span class="label">Home page</span><input type="text" name="url" /></div> 

          <div class="form-row"><input class="submit" type="submit" value="Submit"></div> 
        </form>

    </body>
    </html> 
```

我试图将其插入但无法使其正常工作：

```
$(".selector").validate({
  highlight: function(element, errorClass, validClass) {
  $(element).addClass(errorClass).removeClass(validClass);
  $(element.form).find("label[for=" + element.id + "]")
                .addClass(errorClass);
},
unhighlight: function(element, errorClass, validClass) {
 $(element).removeClass(errorClass).addClass(validClass);
 $(element.form).find("label[for=" + element.id + "]")
                .removeClass(errorClass);
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:36:28.143

也许这会做到：

```
$("#form1").validate({
   ...
   highlight: function(element, errorClass, validClass) {
      $(element).addClass(errorClass).removeClass(validClass);
      $(element.form).find("label[for=" + element.id + "]")
                     .addClass(errorClass);
      setTimeout(function() {
          $(element).removeClass(errorClass).addClass(validClass);
          $(element.form).find("label[for=" + element.id + "]")
                         .removeClass(errorClass);
      });
   }
}); 
```

# c++ - 用于用 C++ 编写 Windows 应用程序的免费编译器 + IDE（针对学生）

> ID：15653199
> 
> 赞同：1
> 
> 时间：2013-03-27T06:46:02.843
> 
> 标签：c++, ide

我将在这个暑假期间教初中和高中生 C++。我去了一家书店，浏览了一些推荐的 C++ 书籍，例如 C++ Primer、The C++ Programming Language、Thinking in C++，我坚信我的学生在阅读这些书籍时会很快失去兴趣 :) 需要 2 小时一个为期 8 周的计划，所以我没有太多时间，主要目标是让学生对编写应用程序感到兴奋，并让他们为下学期的 AP 计算机课程做好准备（因此 C++ 而不是 C# 或 Java）

我自己首先学习了使用 MFC 进行编程。我对 C++ 一无所知，但按照 Sam 的 VC++ MFC 自学，编写一个可以单击按钮并弹出“hello world”的应用程序的想法比无聊的控制台应用程序要酷得多. 如果我从带有黑屏和白色文本的控制台应用程序开始，我可能不会做今天的生活软件。

所以我打算向我的学生教授 MFC。我不会深入探讨 MFC，因为重点将放在 C++ 上并让学生对编程感到兴奋……直到我意识到 Visual Studio Express 不包含 MFC。

如果我的学生可以免费使用 C++ 编译器、IDE 和框架并能够创建 Windows 对话框应用程序，那就太好了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:51:31.417

试试代码::块。它是一个免费和开源的跨平台 IDE，支持多种编译器，包括 GCC 和 Visual C++。

Code::Blocks 12.11 是最新的稳定版本。

# multithreading - 任务运行时如何不让应用程序退出

> ID：15653207
> 
> 赞同：1
> 
> 时间：2013-03-27T06:46:30.250
> 
> 标签：multithreading, task-parallel-library, async-await

当应用程序即将关闭但有一些未完成的任务时，是否有任何框架支持？

任务默认在后台线程的上下文中运行。有时只需让任务完成就可以了：

```
Task.Factory.StartNew(() =>
                          {
                              Thread.CurrentThread.IsBackground = false;
                              Thread.Sleep(20000);
                              Thread.CurrentThread.IsBackground = true;
                          }); 
```

但是，如果任务有需要完成的延续，这不起作用。特别是如果某些任务将在 UI 线程下运行。
可以获取所有“最终”任务并使用 推迟应用程序退出`WhenAll()`。
然而，当使用 async/await 时，我不知道如何做同样的事情。

所以我想知道这种情况是否有任何支持。是否有任何框架提供的保证或强制执行它们的方法？

我现在看到的唯一方法是将标志设置为关键任务尚未完成的标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:58:37.537

顺便说一句，您不应该设置`IsBackground`线程池线程。

对于`async`方法，请确保您的方法正在返回`Task`而不是`void`，然后您可以`await`将它们全部使用`WhenAll`. 您可以让您的事件处理程序捕获顶级`Task`s 而不是`await`它们。

# php - 在 Laravel 中结合 AND/OR 雄辩的查询

> ID：15653216
> 
> 赞同：20
> 
> 时间：2013-03-27T06:46:57.693
> 
> 标签：php, laravel

如何使用 Eloquent 编写以下或类似类型的查询？

`SELECT * FROM a_table WHERE (a LIKE %keyword% OR b LIKE %keyword%) AND c = 1 AND d = 5`

通过链接 where & or_where 函数，我无法以我想要的方式组合 AND/OR。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-27T13:12:10.187

您可以嵌套 where 子句： http: [//laravel.com/docs/database/fluent#nested-where](http://laravel.com/docs/database/fluent#nested-where)

```
Model::where(function($query)
{
    $query->where('a', 'like', 'keyword');
    $query->or_where('b', 'like', 'keyword');
})
->where('c', '=', '1'); 
```

这应该产生：`SELECT * FROM models WHERE (a LIKE %keyword% OR b LIKE %keyword%) AND c = 1`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-11T16:56:00.160

有关示例的更准确答案：

```
$val = '%keyword%';

A_Table_Model::where(function($query) use ($val)
{
    $query->where('a', 'like', $val);
    $query->or_where('b', 'like', $val);
})
->where('c', '=', 1)
->where('d', '=', 5)
->get(); 
```

注意：这是 Laravel 3 的语法，对 Laravel 4 使用 camelCase orWhere()

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-21T19:45:42.827

在 Laravel 5.1+ 中，这也可以完成工作并且看起来更干净：

```
Model::where(function($query) {
    $query->where('a', 'like', 'keyword');
    $query->or_where('b', 'like', 'keyword');
})->where('c', '=', '1')->get(); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-27T12:01:04.153

您可以使用`DB::raw()`in first`where()`来放入 like/or 语句。

# sql - 我如何在 SQL 中聚合它

> ID：15653220
> 
> 赞同：2
> 
> 时间：2013-03-27T06:47:27.990
> 
> 标签：sql

我有一个包含这些字段的表：

```
UserLogonAuditID, Username, LogonDate FROM dbo.UserLogonAudit 
```

用这个查询：

```
SELECT  Username ,
        DATEPART(Year, LogonDate) [Year] ,
        DATENAME(MONTH, LogonDate) [Month] ,
        COUNT(1) [LoginCount] ,
        CAST(DATEPART(Year, LogonDate) AS VARCHAR(4))
        + CAST(DATEPART(Month, LogonDate) AS VARCHAR(2)) AS [YearMonth] ,
        CAST(CAST(DATEPART(Year, LogonDate) AS VARCHAR(4)) + '-'
        + CAST(DATEPART(Month, LogonDate) AS VARCHAR(2)) + '-1' AS datetime) AS [MonthStart]
FROM    UserLogonAudit
GROUP BY DATEPART(Year, LogonDate) ,
        DATENAME(Month, LogonDate) ,
        DATEPART(Month, LogonDate) ,
        Username
HAVING  Username = 'demo@mybusiness.com' 
```

结果是：

```
> Username           Year        Month  LoginCount  YearMonth   MonthStart
> demo@mybusiness.com   2010    February    1   20102   2010-02-01 00:00:00.000
> demo@mybusiness.com   2010    June       1    20106   2010-06-01 00:00:00.000
> demo@mybusiness.com   2011    November    1   201111  2011-11-01 00:00:00.000
> demo@mybusiness.com   2012    April     115   20124   2012-04-01 00:00:00.000
> demo@mybusiness.com   2012    January     1   20121   2012-01-01 00:00:00.000 
```

我想得到这个结果

```
> Username           Year        Month  LoginCount  YearMonth   MonthStart
> demo@mybusiness.com   2010    February    1   20102   2010-02-01 00:00:00.000
> demo@mybusiness.com   2010    June       1    20106   2010-06-01 00:00:00.000
> demo@mybusiness.com   2011    November    1   201111  2011-11-01 00:00:00.000
> demo@mybusiness.com   2012    April     115   20124   2012-04-01 00:00:00.000
> demo@mybusiness.com   2012    January     1   20121   2012-01-01 00:00:00.000    > 
> user@mybusiness.com   2010    February    3   20102   2010-02-01 00:00:00.000
> user@mybusiness.com   2010    June       2    20106   2010-06-01 00:00:00.000
> user@mybusiness.com   2011    November    0   201111  2011-11-01 00:00:00.000
> user@mybusiness.com   2012    April     190   20124   2012-04-01 00:00:00.000
> user@mybusiness.com   2012    January     6   20121   2012-01-01 00:00:00.000 
```

所以，对于所有用户。

我可以遍历用户名，但觉得这不是最好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:55:10.500

尝试`HAVING Username = 'demo@mybusiness.com'`从你的 sql 中删除子句

# url - 谷歌地图 URL 参数 - 网络墨卡托

> ID：15653222
> 
> 赞同：0
> 
> 时间：2013-03-27T06:47:35.170
> 
> 标签：url, parameters, maps

是否可以使用纬度/经度以外的其他方式请求 Google 地图图块？

我想将 x 和 y 作为 web 墨卡托值传递。我没有使用 Google Maps API，这将是一个自定义平铺层，其中地图对象位于网络墨卡托中。我不能使用标准的谷歌地图 URL，因为它只接受纬度/经度值，这不会在我的网络墨卡托地图上正确绘制。

感谢您的任何帮助。埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:06:21.203

*除非*您使用 Google 地图 API，否则您无法使用 Google 地图图块。从[https://developers.google.com/maps/terms](https://developers.google.com/maps/terms)的使用条款：

> 10.1.1。一般限制。(a) 除非通过服务，否则无法访问 Maps API。您不得通过服务中提供的技术或方式以外的任何技术或方式或通过 Google 可能指定的其他明确授权方式访问或使用 Maps API 或任何内容。例如，您不得通过 Maps API 以外的接口或渠道（包括未记录的 Google 接口）访问地图图块或图像。

# java - 为什么 BroadcastReceiver 没有捕捉到动作？

> ID：15653227
> 
> 赞同：0
> 
> 时间：2013-03-27T06:48:08.080
> 
> 标签：java, android

嗨，我正在研究 BroadCastReciver。定义 BroadCastReciver 有两种方法。第一种是使用 Java 代码，第二种是在 AndroidManifest.xml 中使用 . 在我的代码中，第二个是不能正常工作。请告诉我哪里出错了。

```
public class HotelReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String dActionName = intent.getAction();
        Log.i("My Rceiver ", intent.getAction());
        if (dActionName.equals(Intent.ACTION_SCREEN_ON)) {
            Toast.makeText(context, "SCREEN ON", Toast.LENGTH_SHORT).show();
        } else if (dActionName.equals(Intent.ACTION_SCREEN_OFF)) {

        }
    }

} 
```

AndroidManifest.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.hotelsecurity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="10"
        android:maxSdkVersion="15" />
<uses-permission android:name="android.permission.PREVENT_POWER_KEY" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver 
            android:name=".HotelReceiver">
            <intent-filter>
                <action android:name="android.intent.action.SCREEN_ON"/>
            </intent-filter>
        </receiver>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:19:43.827

我认为你的接收者应该阅读

```
 <receiver 
        android:name="HotelReceiver">
        <intent-filter>
            <action android:name="android.intent.action.SCREEN_ON"/>
        </intent-filter>
    </receiver> 
```

没有点“。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:59:16.870

只需在 onCreate() 中使用此代码进行您的活动，

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
    filter.addAction(Intent.ACTION_SCREEN_OFF);
    HotelReceiver mReceiver = new HotelReceiver(this);
    registerReceiver(mReceiver, filter); 
```

# javascript - 如何获得可用的字体粗细？

> ID：15653237
> 
> 赞同：10
> 
> 时间：2013-03-27T06:49:30.717
> 
> 标签：javascript, fonts, font-face, typeface

有没有办法在 JavaScript 中获取特定字体的权重列表？

我想像在 Photoshop 中那样构建选择器。

![在此处输入图像描述](../Images/1d4d75a86f00ed7a6551531550511713.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:08:03.617

但是，我不清楚您的最终目标....

如果您使用的是谷歌字体之类的东西，您应该已经知道所有可能的权重。换句话说，如果您提供自己的字体，那么您就是所有可用字体的主人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:26:54.960

没有！一种字体是否实际上是另一种字体的字体粗细是 Javascript 无法解决的深奥知识。您可以使用 CSS 规则*定义*字体系列具有的字体权重`@font-face`，并以这种方式说明实现您所要求的不可能。

在下面，我有一个非常标准`@font-face`的字体设置，具有 3 个粗细。

```
@font-face {
  font-family: Barney;
  src: url(barney_regular.ttf);
  font-weight: 400;
}

@font-face {
  font-family: Barney;
  src: url(barney_light.ttf);
  font-weight: 300;
}

@font-face {
  font-family: Barney;
  src: url(barney_bold.ttf);
  font-weight: 500;
} 
```

但是知道这些`.ttf`文件中的每一个都代表同一字体系列的不同权重是任意的。在这里我已经指定了它，因为我知道它。如果一个自动化服务，例如 Font Squirrel，获取了这 3 个文件，它可能会出现这样的结果：

```
@font-face {
  font-family: barney_regular;
  src: url(barney_regular.ttf);
}

@font-face {
  font-family: barney_light;
  src: url(barney_light.ttf);
}

@font-face {
  font-family: barney_bold;
  src: url(barney_bold.ttf);
} 
```

在这里，这 3 个权重实际上都被指定为不同的字体系列，这显然是一个错误。但理论上我可以做更愚蠢的事情：

```
@font-face {
  font-family: barney;
  src: url(barney_regular.ttf);
  font-weight: 500;
}

@font-face {
  font-family: barney;
  src: url(barney_regular.ttf);
  font-weight: 400;
}

@font-face {
  font-family: barney;
  src: url(barney_regular.ttf);
  font-weight: 300;
} 
```

上面，相同的字体被分配了 3 种不同的权重。因此，即使 Javascript 可以检测到`@font-face`声明中的关系，例如什么文件与什么重量、样式和系列相关联；指定了多少权重……它仍然无法告诉您这些资源是否存在，是否已下载，准确地表示相同字体的不同宽度。

网页排版在过去的 10 年里发生了很大的变化，但它仍然（相对而言）是一种垃圾排版媒介。

# opencl - Image 的像素强度值与 OpenCL 中 read_imagef 返回的值之间的关系

> ID：15653238
> 
> 赞同：0
> 
> 时间：2013-03-27T06:49:36.200
> 
> 标签：opencl

**OpenCL 中 read_imagef 返回的值在 0 到 1 的范围内，而像素强度范围是从 0 到 255...**我想对强度值进行进一步处理以进行仅基于强度值的图像分割（执行的操作就像查找两个强度值之间的差异、排序、查找最小值、改组等）。如何以整数形式获取 0 到 255 范围内的这些值（为方便起见）...？**我可以将每个值乘以 255 还是我需要做的其他事情......？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:50:15.163

**read_imagef**返回一个**float4**，可用于使用通道数据类型 UNORM_INT8、UNORM_INT16、SNORM_INT8、SNORM_INT16、HALF_FLOAT 和 FLOAT 创建的图像。转换规则是[OpenCL 规范](http://www.khronos.org/registry/cl/specs/opencl-1.2.pdf)的一部分，在第 8.3.1 节中给出。

要回答你的问题，是的，如果你的图像数据类型是 UNORM_INT8，你可以简单地乘以 255。

GPU 通常使用 UNORM_INT8 比使用 UNSIGNED_INT8 图像更快。

# api - 这个简单的贝宝解决方案是否允许信用卡交易和负面测试？

> ID：15653240
> 
> 赞同：1
> 
> 时间：2013-03-27T06:49:50.817
> 
> 标签：api, testing, paypal, paypal-ipn, paypal-sandbox

我对这些服务感到很困惑，这里的贝宝网站似乎也提供 400 和 404 服务。

这是当客户准备付款时网页在我的网站上寻找客户的方式：

![在此处输入图像描述](../Images/d62d7352b59c2df51e57dacf2bdfb0bd.png)

据我所知，我没有 Express Checkout，但我不确定我是否有 Website Payments Pro（我的公司创建了这个帐户）。

现在我有两个问题：

1-这只是沙箱。但在*真实*网站上，这种解决方案是否让用户有机会使用信用卡支付？我实际上已经在沙盒中成功完成了信用卡交易，我只是担心，因为我听说客户只能在 PayPal Website Payments Pro 中进行直接信用卡交易。PayPal 网站上的信息过多，我无法找到解决此类简单问题的方法。

2- 是否可以在此页面上对交易进行负面测试？比如模拟用户信用卡或Paypal账户余额不足的事件？如果可能，并且我正在使用 ButtonManagerAPI，那么下面的技术是正确的方法吗？

*我在通过 NVP api 调用传递给 IPN 的数量变量中放置了一个错误代码，如下所示（中间的许多值对被排除为不相关）：*

```
$nvpReq = "BUTTONCODE=HOSTED&..............&L_BUTTONVAR1=amount=".$err_code 
```

## 编辑

所以看起来我有 PayPal 网站支付标准，这意味着我不能直接在我的网站上合并不能有信用卡支付表格，但客户必须被引导到 PayPal。*只要客户可以选择使用信用卡付款，*我就可以了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:02:23.657

屏幕截图看起来像 PayPal Standard，它是一个纯 HTML（非 API）集成。

任何可以收款的普通企业帐户都可以使用 Express Checkout API。通常通过使用 API USER/PWD/SIGNATURE 进行身份验证。对于拥有编程/开发资源的企业，EC 是目前接受 PayPal 付款的推荐方式。

如果您在初始 SetExpressCheckout 调用中传递 SOLUTIONTYPE=Sole，它将接受来自没有 PayPal 帐户的“访客”客户的信用卡，类似于您在上面显示的标准屏幕截图。

选择 EC 而不是 Standard 的主要原因是结账软件和 PayPal 服务器之间的握手更加紧密。使用标准的纯 HTML，客户将被重定向离开您的网站，并且在提交成功交易后可能不会返回您的网站（他们可能会留在 paypal.com 上而不点击返回，或者他们的浏览器可能会在返回前崩溃 ---而对于 EC，您的网站的回报是在任何触及金融系统之前内置的）

在最近的 developer.paypal.com 测试版中，所有新的沙盒商业账户默认都是完整的 Pro 账户。如果除了接受 PayPal 付款之外，您还希望直接在自己的网站上创建信用卡输入表单，那么注册一个真实的 Pro 帐户将会很有用。

以下是一些面向程序员的 EC 链接：

1.  [https://tryit.paypal.com/guide/ec](https://tryit.paypal.com/guide/ec)
2.  [https://paypal-labs.com/integrationwizard/ecpaypal/main.php](https://paypal-labs.com/integrationwizard/ecpaypal/main.php)

按钮管理器 API 不太可能对您有用。并且有一些方法可以使用沙盒进行负面测试，但是当您仍在决定产品/API 时，这真的不是一个重要的问题。

# jquery - DateTimePicker 未显示

> ID：15653241
> 
> 赞同：2
> 
> 时间：2013-03-27T06:49:53.337
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-ui-datepicker

我在 MVC4 中的 jquery 中遇到了日期时间选择器的问题。这是我的代码：

```
 @Html.TextBox("RELIEVING_DATE", Model.RELIEVING_DATE)

$(function () {
    $("#RELIEVING_DATE").datepicker();
} 
```

但是日期时间选择器没有显示并显示错误

> 未捕获的类型错误：无法读取未定义的属性“内联””

在我的模型`RELIEVING_DATE`中是一个可为空的字段。我想给它一个默认值。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:02:09.800

我在您发布的脚本中注意到的第一件事是您`$(function () {`最后缺少一个结束语`);`。

还要确保在页面中正确包含 jQuery 和 jQuery UI 脚本。如果您使用的是捆绑包，您可能需要在附加日期选择器的脚本之前有以下脚本：

```
@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryui") 
```

通常，如果您使用 Internet 应用程序模板创建项目，则该`~/bundles/jquery`捆绑包已经包含在其中。`_Layout.cshtml`

您应该验证的另一件事是您没有多个具有相同 ID 的字段。此外，如果这`@Html.TextBox`是在编辑器模板中，则 id 可能不是`#RELIEVING_DATE`以导航属性为前缀，例如`#SomeProperty_RELIEVING_DATE`. 在浏览器中查看生成的 HTML 以查看确切的 id。您还可以为该字段分配一个类：

```
@Html.TextBoxFor(x => x.RELIEVING_DATE, new { @class = "datepicker" }) 
```

接着：

```
$(function () {
    $('.datepicker').datepicker();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T05:00:22.320

我发现了同样的错误，这是因为我多次加载脚本。

我在主页上有以下内容，其中有子页面。

```
 <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
 <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

# python - 在python中删除多个目录

> ID：15653243
> 
> 赞同：2
> 
> 时间：2013-03-27T06:50:06.263
> 
> 标签：python, directory, shutil

在python中，我知道我可以使用以下命令删除多个同名文件，例如：

```
for f in glob.glob("file_name_*.txt"):
    os.remove(f) 
```

并且可以使用`shutil.rmtree('/path/to/dir')`- 删除单个目录，并且即使该目录不为空，此命令也会删除该目录。另一方面，`os.rmdir()`需要目录为空。

我实际上想删除多个同名目录，并且它们不为空。所以，我正在寻找类似的东西 `shutil.rmtree('directory_*')`

有没有办法用python做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T06:51:47.820

您拥有所有部分：`glob()`迭代和`rmtree()`删除：

```
for path in glob.glob("directory_*"):
    shutil.rmtree(path) 
```

`OSError`如果其中一个全局路径命名一个文件，或者由于任何其他`rmtree()`可能失败的原因，这将抛出。一旦您决定如何处理错误，就可以添加您认为合适的错误处理。除非您知道要对错误做什么，否则添加错误处理是没有意义的，因此我忽略了错误处理。

# php - 通过 PHP 将 pdf 文件从服务器 A 复制到服务器 B

> ID：15653244
> 
> 赞同：0
> 
> 时间：2013-03-27T06:50:16.610
> 
> 标签：php, file, file-io

目前我正在使用亚马逊服务云存储来放置 PDF 文件。

它不是通过 FTP 而是使用该存储服务的类（[参考在此处]）[1](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation#getObject)

```
// save it into a file (write stream)
// var_dump("S3::getObject() to savefile.txt", $s3->getObject($bucketName, baseName($uploadFile), 'savefile.txt'));

// Or write it to a resource (write stream)
// var_dump("S3::getObject() to resource", $s3->getObject($bucketName, baseName($uploadFile), fopen('savefile.txt', 'wb'))); 
```

目前我可以获得 PDF 文件的二进制代码，但如何将其存储在另一台服务器（服务器 B）上？

```
foreach ($contents as $key => $value){
    if (strpos($key, 'pdf') !== false){
        if (($object = S3::getObject($bucket, $key)) !== false) {
            file_put_contents('path/'.$key, $object, FILE_APPEND | LOCK_EX);
        }
    }   
} 
```

`$key`是服务器 B 上的文件名。

需要明确的是，问题是：我有一些二进制代码（这是一个 PDF 文件），我怎样才能将代码写入另一个文件（= 另存为其他 PDF）？

# mysql - 数据库中没有外键约束。！

> ID：15653245
> 
> 赞同：0
> 
> 时间：2013-03-27T06:50:20.467
> 
> 标签：mysql, sql, relational-database, hibernate-mapping

我的组织使用 Hibernate 在 Spring MVC 上工作。我们总是在映射文件中指定外键约束，例如对于 person 和 contactList`Person.hbm.xml`

```
<set name="ContactList">
  <key column="PersonId" foreign-key="Fk_Peson_Contact"/>
  <one-to-many class="Sample.Model.Contact"/>
</set> 
```

`Person`此映射将在和之间创建一对多关系`Contact`，并作为外键列保留`PersonID`在`Contact`表中。

但是，现在组织决定不在映射文件中提及任何类型的关系，这意味着在上述情况下，`Person`映射将不会有任何类型的一对多映射，而不是这种`Contact`映射将具有`<property name="FK_PersonID"/>`创建列来保存的属性`personID`。在这个场景表中`Person`，`Contact`看起来相同，但不同之处在于它们之间没有关系`Person`，`Contact`因为没有指定映射。

在这种情况下，如果我们想获取人员的联系人列表，那么我们必须触发两个查询，一个来获取另一个人的联系人列表。假设我们想用它的contactList来获取personList，那么我们必须`For loop`在PersonList上获取它的ContactList，这将触发一些查询。

当我问为什么不指定关系时，前辈说，

*   如果外键在数据库中，那么我们不能进行切片和分区。

*   当我们触发连接查询时，数据库需要更多时间来执行它。这可能会降低数据库服务器的速度。

但是，我的问题是——

*   如果我`For looping`在 personList 上做，那么它会触发一些查询来获取联系人是否可行？

*   这种循环会减慢应用程序或应用程序服务器的速度吗？

*   如果我想用它的 conatctList、AddressList、QualificationList 获取 personList 怎么办，这会导致 n+1 问题吗？

**指定映射与不指定哪个场景更有利。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:00:37.727

好吧，我是微软在 (MS) SQL 中进行分区的早期演示之一，他们展示了一个从分区表中选择的查询，该表中的数据填充了多个分区，并且它使用它的索引和统计信息甚至不打扰访问没有分区的分区（相关）数据。当然，如果您没有 fk 约束，那么它不能使用索引和统计信息来知道 fk 符合。我相当肯定 Kalen Delaney 在她的书中（针对 MSSQL 的相关版本）会涵盖它。关键是统计数据将包含必要的信息，以防止不必要的搜索。该演示实际上使用了一个联合来轻松演示效果。

# asp.net-mvc - 应该设置什么日期格式以小写显示上午/下午？

> ID：15653254
> 
> 赞同：1
> 
> 时间：2013-03-27T06:51:14.217
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我正在开发 MVC 3 应用程序。在视图中，我将显示名称以及创建的日期时间。它显示为

> 尼克莫里斯 27-Mar-13 上午 11:49 <--

但我想显示在

> 尼克·莫里斯 13 年 3 月 27 日上午 11:49 <--

我在日期时间属性的部分类中编写了以下代码行。

```
 [DisplayFormat(DataFormatString = "{0:dd MMM yy hh:mm tt} ")]
   public System.DateTime CreateDateTime { get; set; } 
```

在我使用下面的代码的视图中......

```
@Html.DisplayFor(ModelItem => item.CommentDateTime.ToString("dddd, MMMM d, yyyy a\\t h:mmtt")) 
```

我必须对日期格式进行哪些更改？它显示错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T07:29:08.627

您可以在视图中对其进行格式化而不使用`DisplayFor`帮助器：

```
@item.CommentDateTime.ToString("dd-MMM-yy hh:mm")  @item.CommentDateTime.ToString("tt").ToLower() 
```

在这种情况下，您不再需要`DisplayFormat`视图模型上的属性。

# c++ - 无法在控制台上看到内存泄漏

> ID：15653261
> 
> 赞同：2
> 
> 时间：2013-03-27T06:51:43.937
> 
> 标签：c++, memory-leaks, memory-leak-detector

我正在使用 Visual Studio 2010，我尝试使用 VC 提供的 CRT 库来解决内存泄漏问题。但我无法在控制台上看到内存泄漏打印输出。代码库：

```
#include <iostream>
#include <vector>

#define _CRTDBG_MAP_ALLOC
#include <crtdbg.h>
#ifdef _DEBUG
#define DEBUG_NEW new(_NORMAL_BLOCK, __FILE__, __LINE__)
#define new DEBUG_NEW
#endif

using namespace std;

int main( )   
{
_CrtSetDbgFlag ( _CRTDBG_ALLOC_MEM_DF | _CRTDBG_LEAK_CHECK_DF );
int Y = 1;
int X = 2;
int** superevil = new int*[Y];
for(int i = 0; i < Y; ++i)
    superevil[i] = new int[X];

superevil[0][2] = 1;

/*for(int i = 0; i < Y; ++i)
  delete[] superevil[i];
delete[] superevil;*/

 _CrtDumpMemoryLeaks();
return 0;
} 
```

无法得到原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:56:26.730

请注意，如果您设置了 _CRTDBG_LEAK_CHECK_DF，那么您也不需要调用`_CrtDumpMemoryLeaks()`，因为它会在程序结束时自动为您调用。事实上，在你打电话的地方`_CrtDumpMemoryLeaks()`，还没有发生泄漏。

此外，这仅适用于通过 IDE 运行的调试版本，并且输出（如果有）被转储到 Visual Studio 的“输出”窗口，而不是控制台。

如果您删除对 IDE 的调用`_CrtDumpMemoryLeaks()`并运行，您将看到类似于以下内容（我使用的是 VS2012）：

> 检测到内存泄漏！
> 转储对象 ->
> c:\consoleapplication1.cpp(24) : {190} 位于 0x004CCAF0 的正常块，8 字节长。
> 数据：< > CD CD CD CD CD CD CD CD
> c:\consoleapplication1.cpp(22) : {189} 正常块位于 0x004CCAB0，4 字节长。
> 数据：< L > F0 CA 4C 00
> 对象转储完成。

# paperjs - 以点为半径的命中测试

> ID：15653271
> 
> 赞同：1
> 
> 时间：2013-03-27T06:52:41.450
> 
> 标签：paperjs

在 paper.js 框架中，以下代码对鼠标坐标点执行命中测试。

```
function onMouseUp(event) 
{
var hitOptions = {
stroke: false,
fill: true,
tolerance: 2

};  
var hitResult = project.hitTest(event.point, hitOptions);
} 
```

我想做的是在 event.point() 的给定半径内执行此测试，但我还没有找到方法。

有任何想法吗？

更新

我认为我设置选项的方式导致容忍度被忽略。以下代码有效：

```
var hitOptions = {
fill: true, 
stroke: true, 
segments: true, 
tolerance: 200 
};  
var hitResult = project.hitTest(event.point, hitOptions);
alert(hitResult); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:16:51.343

看起来由于错误而未读取公差选项。您可以通过修改第 3631 行（每晚）手动更改容差。例如，如果您想要 200 个点的测试半径：

```
tolerance: paper.project.options.hitTolerance || 2 
```

至：

```
tolerance: paper.project.options.hitTolerance || 200 
```

# java - 将多个值传递给 财产

> ID：15653273
> 
> 赞同：1
> 
> 时间：2013-03-27T06:52:55.707
> 
> 标签：java, sql, ibatis

我是 iBatis 的新手。我想是否可以将多个值传递给 xml。

例如，

```
 <select id="getSth" resultClass="Object" parameterClass="Object">
    select * from table
<isNotEmpty property="startDate, endDate" prepend="AND">
    date_start >= #startDate# AND date_end <= #endDate#
</isNotEmpty>
</select> 
```

有可能吗？如果没有，有什么方法吗？？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:14:09.907

不，不能在属性属性中使用多个值。但是您可以使用嵌套标签来实现这一点。

```
<select id="getSth" resultClass="Object" parameterClass="Object">
     select * from table
     <isNotEmpty property="startDate" >
         <isNotEmpty property="endDate" >
            where date_start &gt;= #startDate# AND date_end &lt;= #endDate#
         </isNotEmpty>
    </isNotEmpty>
</select> 
```

PS：您不能在查询中使用小于 '<' 、大于 '>' 的符号。而是分别使用`&lt;`和`&gt;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-27T14:15:39.333

```
<select id="getSth" resultClass="Object" parameterClass="Object">
 select * from table
 <isNotEmpty property="startDate" >
     <isNotEmpty property="endDate" >
        where date_start &gt;= #startDate# AND date_end &lt;= #endDate#
     </isNotEmpty>
     <isNotEmpty property="endDate" >
        where date_start &gt;= #startDate# AND date_end &lt;= #endDate#
     </isNotEmpty>
</isNotEmpty> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T11:10:00.073

您不能使用多条规则，但可以将一条规则嵌套在另一条规则中。通过这种方式，您可以嵌套 (n) 条规则。因此，查询的嵌套片段仅在满足所有规则时运行（这是真的）。

所以这是修复

```
<select id="getSth" resultClass="Object" parameterClass="Object">
SELECT * FROM TABLE
<isNotEmpty property="STARTDATE">
    <isNotEmpty property="ENDDATE">
          WHERE DATE_START &gt;= #STARTDATE# AND DATE_END &lt;= #ENDDATE#
    <isNotEmpty>
<isNotEmpty>
</select> 
```

如果需要，您还可以检查其他条件，以便您可以有混合规则。

所以我可以在检查 isNotEmpty 之前检查我的 STARTDATE、ENDDATE 是否为空 isNotNull。这样，如果最外面的条件为假，IBATIS 就不会检查其他条件。

```
<select id="getSth" resultClass="Object" parameterClass="Object">
SELECT * FROM TABLE
<isNotNull property="STARTDATE">
    <isNotNull property="ENDDATE">
        <isNotEmpty property="STARTDATE">
            <isNotEmpty property="ENDDATE">
                  WHERE DATE_START &gt;= #STARTDATE# AND DATE_END &lt;= #ENDDATE#
            <isNotEmpty>
        <isNotEmpty>
    </isNotNull>
</isNotNull>
</select> 
```

有时，您的状况片段可能会变得如此之大，并且可能难以阅读、理解和记录。您可能希望使用 IBATIS sql 标记将您的规则与主选择语句分开。

```
<sql id="getStartDateAndEndDateRuleFragment">
<isNotNull property="STARTDATE">
    <isNotNull property="ENDDATE">
        <isNotEmpty property="STARTDATE">
            <isNotEmpty property="ENDDATE">
                  WHERE DATE_START &gt;= #STARTDATE# AND DATE_END &lt;= #ENDDATE#
            <isNotEmpty>
        <isNotEmpty>
    </isNotNull>
</isNotNull>
</sql> 
```

然后您的最终选择标签将如下所示。

```
<select id="getSth" resultClass="Object" parameterClass="Object">
SELECT * FROM TABLE <include refid="getStartDateAndEndDateRuleFragment" />
</select> 
```

这更清晰，更不容易混淆。这样，在您的团队中工作的其他共同开发人员只需简单地注视它并弄清楚它在做什么。

# ruby-on-rails - 导出 MS Word 文件 Rails

> ID：15653274
> 
> 赞同：1
> 
> 时间：2013-03-27T06:52:57.487
> 
> 标签：ruby-on-rails, ruby, export

我想`MS Word`从 Rails 3.2 应用程序中导出文件。`MS Word`在 Rails 应用程序中是否有任何 gem 可以生成文件？

该文件将包含一个表，该表由根据某些标准从数据库中获取的用户组成。

表将如下所示。

```
Name | Email | Rate
john | ------| 10
kethi| ------| 15 
```

# jquery - 无法将复选框与此查找功能结合使用

> ID：15653275
> 
> 赞同：1
> 
> 时间：2013-03-27T06:52:58.503
> 
> 标签：jquery, find, show-hide

我无法让此`find`功能与复选框一起正常工作。我无法选择任何复选框，因此被告知删除`return false;`我不确定是否是原因的声明，但该声明`if (attrColor == 'All'){...}`不再有效。

如何修改此功能以使其与复选框一起使用，包括如果选中则显示全部？

我在这里发布了一个简单的函数示例：http: [//jsfiddle.net/chayacooper/WZpMh/92/](http://jsfiddle.net/chayacooper/WZpMh/92/)

```
$(document).ready(function () {
    var selected = [];
    $('#attributes-Colors *').click(function () {
        var attrColor = $(this).data('color');
        var $this = $(this);
        if ($this.parent().hasClass("active")) {
            $this.parent().removeClass("active");
            selected.splice(selected.indexOf(attrColor),1);
        }
        else {
            $this.parent().addClass("active");
            selected.push(attrColor);
        }
        if (attrColor == 'All') {
            $('#content').find('*').show();
        } else {
        $("#content").find("*").hide();
        $.each(selected, function(index,item) {
            $('#content').find('[data-color *="' + item + '"]').show();
        });
        }
        // Removed this to allow checkboxes to accept input
        //return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:58:35.403

仅针对复选框，而不是像 asterix 选择器那样的所有元素，并为复选框使用“更改”事件。

然后获取变量中所有的li元素`lis`，同时隐藏。

将所有选中的复选框颜色映射到带有`$.map`.

`isAll`检查该数组的值“All”以查看该复选框是否已选中，如果已选中，或者是否未选中任何复选框，即长度为空，则显示全部`li's`，否则使用 遍历选中的复选框中的颜色`$.each`，并显示任何与所选颜色匹配的 lis。

```
$(document).ready(function () {
    $('#attributes-Colors input[type="checkbox"]').on('change', function () {
        var lis = $('#content li').hide(),
            check = $.map($('#attributes-Colors input[type="checkbox"]'), function (el,i) {
                if (el.checked) return $(el).data('color');
            }),
            isAll = $.inArray('All', check) != -1;

        if (check.length && !isAll) {
            $.each(check, function(i,color) {
                lis.filter(function() {
                    return $(this).data('color').indexOf(color) != -1
                }).show();
            });
        } else {
            lis.show();
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/WZpMh/107/)

# dependencies - composer 如何处理一个项目中多个包的共享依赖关系？

> ID：15653278
> 
> 赞同：4
> 
> 时间：2013-03-27T06:53:25.543
> 
> 标签：dependencies, dependency-management, composer-php, circular-dependency

如问题所述，如果项目 A 需要 x、y 和 z 包，它们又都需要 d1、d2、d3、d4 和 d5 包。Composer 是否会为 x、y 和 z 包下载 d1、d2、d3、d4 和 d5 三次？

如果 d1、d2、d3、d4 和 d4 包又需要另一组共享依赖项，这听起来合乎逻辑，但并不实用……这将是一个项目代码库中的大量重复代码。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-27T08:11:01.280

最简洁的答案是不。由于在 PHP 中多次加载库是不可能的，因此每个包独立下载依赖项是没有意义的。因此，Composer 将解析所有包的所有依赖项，然后立即安装它们而不会重复。

# c# - 如何仅在 SQL Server 表中设置日期？

> ID：15653279
> 
> 赞同：0
> 
> 时间：2013-03-27T06:53:46.970
> 
> 标签：c#, asp.net-mvc, sql-server-2005

我正在使用`datatime`数据类型在数据库中设置日期，但它给出了完整的数据时间和小时和分钟我只想设置日期格式为`dd-mm-yyyy`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T06:56:00.083

也许使用[date](http://msdn.microsoft.com/en-us/library/bb630352(v=sql.100).aspx)而不是`datetime`?

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T06:57:41.190

`Date`a) 在 2008 年及以后，您可以使用一种数据类型

b) 如果您无法更改数据类型，您可以将 a 转换`datetime`为`date`“截断”时间。eg:`convert( date, GETDATE() )`会返回`'2013-03-27'`, 插入到`datetime`列中时会有时间`00:00:00.000`

c）如果您只是不想在转换为字符串时显示时间组件，请使用您选择的格式转换：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:00:11.593

只需使用`DATE`数据类型而不是`DATETIME`

更多关于[日期](http://msdn.microsoft.com/en-IN/library/ms186724.aspx)

[SQL 小提琴演示](http://www.sqlfiddle.com/#!3/c93ac/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:03:31.027

尝试这个

```
 DateTime dt = DateTime.Now;
  SqlCommand cmd = new SqlCommand("INSERT into myTable(dateColumn) Values (@pDate)", conn);
  cmd.Parameters.AddWithValue("@pDate", dt.Date.ToShortDateString()); 
```

# css - IE8中的错误位置

> ID：15653283
> 
> 赞同：-2
> 
> 时间：2013-03-27T06:53:53.377
> 
> 标签：css, internet-explorer-8, cross-browser

[在http://npl.ibles.pl](http://npl.ibles.pl)的横幅上有一个带有文本的 img 。它在 IE8 中的位置太低，只有其高度的一半。你能帮我找出原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:37:25.560

将 IE 8 条件注释放入`head`并给出`#site-slogan`近似`bottom: 16px;`
示例：

```
<!--[if IE 8]>    
  <style>
    #site-slogan {
        bottom: 16px;
    }       
  </style>
<![endif]--> 
```

# ruby - 使用 CarrierWave Ruby gem 将 s3 存储桶复制到另一个 aws 帐户

> ID：15653284
> 
> 赞同：1
> 
> 时间：2013-03-27T06:53:56.150
> 
> 标签：ruby, amazon-web-services, amazon-s3, carrierwave, buckets

我正在尝试将存储桶中的一些内容复制到不同 aws 帐户中的存储桶。我首先将上传器对象加载到哈希中。然后我尝试连接到另一个存储桶并使用该存储桶的凭据保存资产。

```
 task :product_color_images => :environment do
  CarrierWave.configure do |c|
    c.fog_credentials = {
      :provider               => 'AWS',
      :aws_access_key_id      => ENV['COPY_FROM_AWS_KEY_ID'],
      :aws_secret_access_key  => ENV['COPY_FROM_AWS_KEY']
    }

    c.fog_directory = 'orig-bucket' # bucket copied from
  end

  image_storage = {}

  ProductImage.all.each do |image|
    puts 'storing product image'
    image_storage[image.id] = image.image
  end

  CarrierWave.configure do |c|
    c.reset_config
    c.fog_credentials = {
      :provider               => 'AWS',
      :aws_access_key_id      => ENV['COPY_TO_AWS_KEY_ID'],
      :aws_secret_access_key  => ENV['COPY_TO_AWS_KEY']
    }

    c.fog_directory = 'target-bucket' # bucket copied to
  end

  image_storage.each do |k, v|
    image = ProductImage.find(k)
    image.image = v
    puts 'saving product image'
    image.save
  end
end 
```

尝试在控制台中将单个图像从一个存储桶保存到另一个存储桶会发现目标存储桶的地址未使用。

```
ruby-1.9.2-p290 :026 > image = ProductImage.find(197) 
ruby-1.9.2-p290 :027 > image.image = image_storage[197]
 => https://orig-bucket.s3.amazonaws.com/uploads/product_image/image/197/product_image.png 
ruby-1.9.2-p290 :028 > image.save
ruby-1.9.2-p290 :029 > image.image
 => https://orig-bucket.s3.amazonaws.com/uploads/product_image/image/197/product_image.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:58:27.527

有时，存储桶将被授予足够的权限，同时确保您对图像具有足够的权限，以便您可以实际下载它们。

我有一个更好的解决方案给你，你可以做的是安装和配置你的 s3cmd 并在两个存储桶之间进行 rsync。这将比你的 ruby​​ on rails 做得更快。

# jquery - jquery菜单向上/向下滑动 - 当鼠标不移开时保持子菜单打开？

> ID：15653287
> 
> 赞同：0
> 
> 时间：2013-03-27T06:54:06.510
> 
> 标签：jquery, drop-down-menu

我想创建水平菜单，它在主菜单上的鼠标下侧和鼠标的下侧。

问题是如果鼠标从一个菜单项移动到另一个也有子菜单的菜单项，我希望菜单下的 div 仍然出现。

这是HTML

```
 <div class="menu_it">
                    <ul>
                        <li id="i1"><a href="#">
                          program 1
                            </a>
                            <div class="subMenuWrapper">
                                <ul class="subMenu">
                                    <li> <a href="#"> sub program 1</a></li>
                                      <li> <a href="#"> sub program 1</a></li>
                                            <li> <a href="#"> sub program 1</a></li>

                                </ul> 
                            </div>
                        </li>
                        <li id="i2"> 
                            <a href="#"> program 2</a>

                            <div class="subMenuWrapper">
                                <ul class="subMenu">
                                       <li> <a href="#"> sub program 2</a></li>
                                     <li> <a href="#"> sub program 2</a></li>
                                     <li> <a href="#"> sub program 2</a></li>

                                </ul>
                            </div>
                        </li>
                        <li id="i3" ><a href="#"> sub program 3</a>

                        </li>

 </ul>
</div>
 <div class="noti"><span class="text">
 This is a notification bar   This is a notification bar   This is a notification bar   This is a notification bar   This is a notification bar   This is a notification bar   This is a notification bar 
    </span>
</div> 
```

这是js

```
$('.menu_it > ul li:has(> div ul)').on('mouseenter',function(e) {
    console.log('in');

                  $(this).find('div').slideDown('fast');
                 $('.noti').animate({'margin-top':'41'} ); 

            })
            .on('mouseleave',function(e) {
            console.log('out');

               $(this).find('div').slideUp('fast');
              $('.noti').animate({'margin-top':'0'} );  

            }); 
```

这是我正在处理的[**示例**](http://jsfiddle.net/ZDc4Y/)，如果鼠标从 id 为 1 的 li 与 id2 的 li 移动，我如何使具有类 noti 的 div 仍然打开

如果有更好的方法让 submeu 上下平滑滑动，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:00:32.007

看到这个：

```
$('.menu_it > ul li:has(> div ul)').on('mouseenter', function (e) {

    $(this).find('div').slideDown('fast');
    $('.noti').animate({
        'margin-top': '41'
    });
})
    .on('mouseleave', function (e) {
    $(this).find('div').slideUp('fast');
    if ($('.menu_it > ul li:hover div ul').length != 1) 
        $('.noti').animate({
            'margin-top': '0'
        });
}); 
```

**[演示](http://jsfiddle.net/ZDc4Y/1/)**

# sql - 处理 200000 多条记录的查询非常慢

> ID：15653292
> 
> 赞同：3
> 
> 时间：2013-03-27T06:54:35.217
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, azure-sql-database

我在`Patient`&`Person`表中有 200,000 行，显示的查询需要 30 秒才能执行。

我已经在表中定义了主键（和聚集`Person`索引）。我还能在这里做些什么来提高我的程序的性能？`PersonId``PatientId``Patient`

数据库开发方面的新手。我只知道基本的 SQL。也不确定 SQL Server 能否快速处理 200,000 行。

您可以在[https://github.com/Padayappa/SQLProblem/blob/master/Performance看到整个动态过程](https://github.com/Padayappa/SQLProblem/blob/master/Performance)

任何人都面临处理这样的大行？如何在这里提高性能？

```
DECLARE @return_value int,
        @unitRows bigint,
        @unitPages int,
        @TenantId int,
        @unitItems int,
        @page int   
SET @TenantId = 1
SET @unitItems = 20
SET @page = 1

DECLARE @PatientSearch TABLE(
    [PatientId] [bigint] NOT NULL,
    [PatientIdentifier] [nvarchar](50) NULL,
    [PersonNumber] [nvarchar](20) NULL,
    [FirstName] [nvarchar](100) NOT NULL,
    [LastName] [nvarchar](100) NOT NULL,
    [ResFirstName] [nvarchar](100) NOT NULL,
    [ResLastName] [nvarchar](100) NOT NULL,
    [AddFirstName] [nvarchar](100) NOT NULL,
    [AddLastName] [nvarchar](100) NOT NULL,
    [Address] [nvarchar](255) NULL,
    [City] [nvarchar](50) NULL,
    [State] [nvarchar](50) NULL,
    [ZipCode] [nvarchar](20) NULL,
    [Country] [nvarchar](50) NULL,
    [RowNumber] [bigint] NULL
    ) 

    INSERT INTO @PatientSearch SELECT  PAT.PatientId  
     ,PAT.PatientIdentifier      
     ,PER.PersonNumber  
     ,PER.FirstName  
     ,PER.LastName  
     ,RES_PER.FirstName AS ResFirstName  
     ,RES_PER.LastName AS ResLastName  
     ,ADD_PER.FirstName AS AddFirstName  
     ,ADD_PER.LastName AS AddLastName  
     ,PER.Address  
     ,PER.City  
     ,PER.State  
     ,PER.ZipCode  
     ,PER.Country
     ,ROW_NUMBER() OVER (ORDER BY PAT.PatientId DESC) AS RowNumber 
  FROM  dbo.Patient AS PAT  
  INNER JOIN dbo.Person AS PER  
    ON PAT.PersonId = PER.PersonId  
  INNER JOIN  dbo.Person AS RES_PER  
             ON  PAT.ResponsiblePersonId = RES_PER.PersonId  
  INNER JOIN  dbo.Person AS ADD_PER  
             ON  PAT.AddedBy = ADD_PER.PersonId 
  INNER JOIN dbo.Booking AS B   
             ON PAT.PatientId = B.PatientId 

  WHERE  PAT.TenantId = @TenantId AND B.CategoryId =  @CategoryId 

  GROUP BY PAT.PatientId  
     ,PAT.PatientIdentifier      
     ,PER.PersonNumber  
     ,PER.FirstName  
     ,PER.LastName  
     ,RES_PER.FirstName 
     ,RES_PER.LastName
     ,ADD_PER.FirstName 
     ,ADD_PER.LastName
     ,PER.Address  
     ,PER.City  
     ,PER.State  
     ,PER.ZipCode  
     ,PER.Country      

  ;  

   SELECT @unitRows = @@ROWCOUNT  
     ,@unitPages = (@unitRows / @unitItems) + 1;  

   SELECT *  
   FROM @PatientSearch AS IT  
   WHERE RowNumber BETWEEN (@page - 1) * @unitItems + 1 AND @unitItems * @page 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T06:58:00.090

好吧，除非我遗漏了某些东西（例如重复的行？），否则您应该可以删除`GROUP BY`

```
GROUP BY PAT.PatientId  
     ,PAT.PatientIdentifier      
     ,PER.PersonNumber  
     ,PER.FirstName  
     ,PER.LastName  
     ,RES_PER.FirstName 
     ,RES_PER.LastName
     ,ADD_PER.FirstName 
     ,ADD_PER.LastName
     ,PER.Address  
     ,PER.City  
     ,PER.State  
     ,PER.ZipCode  
     ,PER.Country 
```

因为您按选择列表中的所有字段进行分组，并且您按`PAT.PatientId`

除此之外，您应该在包含您加入/过滤的列的索引的表上[创建索引。](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

因此，例如，我将在表 Patient 上创建一个索引，其中包含列 (TenantId,PersonId,ResponsiblePersonId,AddedBy) 并包含列 (PatientId,PatientIdentifier)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:07:45.097

坦率地说，200,000 行对 SQL Server 来说不算什么。

请先去掉逻辑冗余，比如你有主键，为什么还要分组这么多列，为什么需要加入同一张表（人）3次？

去除逻辑冗余后，至少需要创建一些复合索引/包含索引。获取执行计划 (CTRL+M) 或 (CTRL+M)，看看你错过了什么索引。如果您需要进一步的帮助，请使用几行示例数据粘贴您的表架构。

# c# - 裁剪后图像大小增加

> ID：15653301
> 
> 赞同：-6
> 
> 时间：2013-03-27T06:55:32.100
> 
> 标签：c#

我有 c# 代码来裁剪图像。

当我裁剪图像（大小：191 KB，使用我的 c# 代码）时，结果（裁剪）图像的大小会增加（大小：2.44 MB）

请告诉我为什么裁剪后尺寸会增加..???

```
 Bitmap source = new Bitmap(@"F:\images\Row" + i + "Col" + j + ".jpg");
                Rectangle section = new Rectangle(new Point(0, 0), new Size(1362, 761));
                Bitmap CroppedImage = CropImage(source, section);
                CroppedImage.Save(@"file path\Row" + i + "Col" + j + ".jpg");

    public Bitmap CropImage(Bitmap source, Rectangle section)
    {
        // An empty bitmap which will hold the cropped image
        Bitmap bmp = new Bitmap(section.Width, section.Height);

        Graphics g = Graphics.FromImage(bmp);

        // Draw the given area (section) of the source image
        // at location 0,0 on the empty bitmap (bmp)
        g.DrawImage(source, 0, 0, section, GraphicsUnit.Pixel);

        return bmp;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T07:06:08.267

心灵感应能力：您正在谈论磁盘上文件的大小，并将原始压缩文件（可能是 JPG）与以非压缩格式保存的裁剪版本（可能是 BMP）进行比较。

修复：以压缩格式保存裁剪的图像。

[带有 2 个参数的Image.Save](http://msdn.microsoft.com/en-us/library/9t4syfhh.aspx)允许您指定格式（即，与您在示例中使用的一个参数版本不同）。

文章中的示例：

```
// Construct a bitmap from the button image resource.
Bitmap bmp1 = new Bitmap(typeof(Button), "Button.bmp");

// Save the image as a GIF.
bmp1.Save("c:\\button.gif", System.Drawing.Imaging.ImageFormat.Gif); 
```

# excel - Excel在提示时以什么格式保存CSV文件（正文中解释）

> ID：15653305
> 
> 赞同：0
> 
> 时间：2013-03-27T06:55:45.070
> 
> 标签：excel, csv

我从一个 java 程序执行了一个写操作，以创建一个 csv 文件，该文件具有以下字段：

《123》、《大陆》、《你好，男孩》、《我喜欢《战争与和平》》、......

现在，当我尝试使用 COPY tablea from 'filename.csv' DELIMITER ',' CSV 将此文件上传到 postgres (9.1) 数据库时；我收到一条错误消息：最后一个预期列之后的额外数据。

我相信这是因为我收到此错误的第 4 列值中的 '"'。

我还发现，只需在 excel 中打开文件并再次保存，为提示选择“是”：“filename.csv 可能包含与 csv 不兼容的功能，是否要保留此格式”进行所有必要的更改.

就像在单击“是”后，如果我从同一个文件（由 excel 新格式化）中读取 java，列看起来像：

123、大陆，《你好，男孩》，《我喜欢》《战争与和平》《》

这个新文件（保存后）也成功上传。我在一个小文件上试过这个。但我的原始文件有 250 万条记录（>2.5gb），excel 就是无法打开它。您对excel如何保存它有任何想法吗？这样我就可以手动将更改应用于我的文件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:15:39.083

您是否看到 Excel 如何将字段内的所有单个 " 更改为 "" (doeble ")？我想这就是答案。Excel 还从不包含空格、逗号或嵌入的字段周围删除了“”，但我认为这没有什么不同。所以尝试用“”替换所有不在字段边界上的“，看看是否有效。

如果任何字段中都没有嵌入“，”序列，那么您可以简单地将所有“”替换为“”，然后将所有“”，”替换为“，”，但是如果有任何“，”当然这不起作用字段内的序列。问题是，如果字段中嵌入了任何“，”，那么任何人都将如何知道它是否是字段分隔符？

# c# - 在datagridview winform中隐藏默认的灰色列

> ID：15653306
> 
> 赞同：76
> 
> 时间：2013-03-27T06:55:49.837
> 
> 标签：c#, winforms

当数据不可用时，有什么方法可以删除或隐藏 winform 的 datagrid 灰色区域？

其次这是如何删除/隐藏默认的灰色列？

```
 dataGridView1.DataSource = oresult;
  dataGridView1.Columns["Id"].Visible  = false;
  dataGridView1.Columns["AddedBy"].Visible = false;
  dataGridView1.Columns["AddmissionInClass"].Visible = false;
  dataGridView1.Columns["IsDeleted"].Visible = false;
  dataGridView1.Enabled = false; 
```

我正在隐藏这样的无用列，但无法找到隐藏这些的方法。

![在此处输入图像描述](../Images/5049adf753d2f6612d4e20c155a24665.png)

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-03-27T07:06:56.397

要隐藏第一列，您可以将[`RowHeadersVisible`](http://msdn.microsoft.com/library/system.windows.forms.datagridview.rowheadersvisible.aspx)dataGrid 设置为 false

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-27T07:02:54.283

只需设置 DataGridView 的 Background-Color 和 RowHeadersVisible-State：

```
dataGridView1.BackgroundColor = Color.White;
dataGridView1.RowHeadersVisible = false; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-27T07:06:04.190

您需要将 RowHeaderVisible 的属性（来自 gridview 属性）设置为 false

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-24T17:13:13.470

放上这段代码就行了。为我工作。

```
DataGrid.RowHeadersVisible = false;
DataGrid.ColumnHeadersVisible = false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-03T05:41:58.287

您有两种方法可以做到这一点：

1.  添加这一行：

    ```
    dataGridView1.RowHeadersVisible = false; 
    ```

    至...

    ```
    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.RowHeadersVisible = false;
    } 
    ```

    -或者-

2.  从（项目的属性）窗口将**True**更改为**false**，如下所示：

[![在此处输入图像描述](../Images/c876cca56ac727e13b8f0372b95f8098.png)](https://i.stack.imgur.com/ysyz1.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-12T11:49:47.160

如果您尝试删除列级别的网格视图列并且它没有反映在网格视图中，请按照以下说明操作： 我们无法删除列级别的网格视图列。因此，在行级别删除列的单元格（意味着在每一行中）。

```
foreach (GridViewRow Row in this.searchResults.SearchResultGrid.Rows)
                    {
                        if (Row.RowType == DataControlRowType.DataRow)
                        {
                            Row.Cells[0].Visible = false;
                        }
                    }
                    GridViewRow HeaderRow = this.searchResults.SearchResultGrid.HeaderRow;
                    HeaderRow.Cells[0].Visible = false; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-12-20T08:46:37.523

虽然几年过去了，但我现在已经达到了......我不得不在所有项目的所有 DataGrids 中更改它。我在 aApp.XAML 中做这个

```
 <Style TargetType="DataGrid">
 <Setter Property="RowHeaderWidth" Value="0"/>
   </Style> 
```

# c# - 使用 FileSystemWatcher 中的 XDocument.Load 加载 xml 文件。错误“进程无法访问文件..etc”

> ID：15653309
> 
> 赞同：0
> 
> 时间：2013-03-27T06:56:09.087
> 
> 标签：c#, linq-to-xml, filesystemwatcher

有没有办法修复错误“进程无法访问文件..etc”。流程是，当我检测到需要从 xml 文件中读取特定节点的 xml 文件时，filesystemwatcher 将监视 xml 文件。

我怎样才能解决这个问题？任何想法或建议都会有很大帮助。谢谢

这是文件系统观察程序代码

```
private void fileSystemWatcher_Created(object sender, System.IO.FileSystemEventArgs e)
    {
        try
        {
            string type = GetType(e.FullPath).ToUpper();
            if (type == "CC")
            {
                if (Global.pc_flag)
                {
                    ProcessPC(e.FullPath);
                }
                else if (Global.mw_flag)
                {
                    ProcessMW(e.FullPath);
                }
                else
                {
                    ProcessXML(e.FullPath);
                }
            }
            else if (type == "GC")
            {
                ProcessMW(e.FullPath);
            }
            //Process(e.FullPath);
        }
        catch(Exception ex)
        {
            error++;
            lblErrors.Text = error.ToString();
            MessageBox.Show(ex.Message);
        }
    } 
```

这里包含 GetType 的内容

```
private string GetType(string file)
    {
        string type = string.Empty;
        using (var stream = File.Open(file, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        {
            var request = XDocument.Load(stream);
            var get_command = from r in request.Descendants("Transaction")
                              select new
                              {
                                  Type = r.Element("Type").Value
                              };

            foreach (var c in get_command)
            {
                type = c.Type;
            }
        }
        return type;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:04:15.870

您不使用您的`stream`in 代码，并且当流打开时您无法访问该文件`XDocument.Load(file)`

```
private string GetType(string file)
{
    string type = string.Empty;
    var request = XDocument.Load(file);
    var get_command = from r in request.Descendants("Transaction")
                      select new
                      {
                          Type = r.Element("Type").Value
                      };
    foreach (var c in get_command)
    {
        type = c.Type;
    }
    return type;
} 
```

# c# - QueryInterface 在 C# 上因 E_NOINTERFACE 而失败

> ID：15653311
> 
> 赞同：8
> 
> 时间：2013-03-27T06:56:21.740
> 
> 标签：c#, visual-studio-2008, camera, directshow

嗨 Stack Overflow 成员，

我是 C# 编程的新手。我正在开发一个基本的相机流和仍然捕捉应用程序。一旦用户静止不动，我将使用 VMR9 的位图混合概念在叠加层上显示它。

**我做了什么？**

*   我从[这里使用 C# 直接显示库](http://directshownet.sourceforge.net/)
*   首先，我得到所有必需的过滤器接口。找到附加的捕获设备。调用带有源过滤器的渲染流和用于 PREVIEW 引脚的 vmr9。STILL PIN 的源过滤器、样本采集器和空渲染器。
*   我有三个菜单按钮-> 静止，显示覆盖和隐藏覆盖。
*   我正在使用该库中提供的位图混合器示例。
*   每次用户按下 Take Still 菜单时，图像将保存在桌面中，并将重新调整为小分辨率并显示在视频叠加层上。
*   Show Overlay 和 hide Overlay 调用 ShowHideBitmap() 执行从 vmr9 过滤器查询 VMR9BitmapMixer 接口的操作，填充 VMR9AlphaBitmap 结构，然后调用 IVMRMixerBitmap9.SetAlphaBitmap 函数。

**我面临什么问题？**

*   拍摄静止图像后，如果我通过菜单选项调用 ShowHideBitmap()，拍摄的静止图像将在叠加层上完美更新。
*   这是另一种在保存静止图像后立即自动更新覆盖的选项。我创建了基于事件的线程，并让它等待使用 EventWaitHandle 创建的更新事件。在从 samplegrabber BufferCB 函数返回之前，我设置了这个更新事件。依次继续等待线程。在线程内部，我调用 ShowHideBitmap 函数。在这种情况下，我收到如下错误消息。

`Unable to case COM object of type 'DirectShowLib.VideoMixingRenderer9' to interface type 'DirectShowLib.IVMRMixerBitmap9'. This operation failed because the QueryInterface call on the COM component for the interface with IID '{ced175e5-1935-4820-81bd-ff6ad00c9108}' failed due to the following error: No such interface supported (Exception from HRESULT: 0X80040002 (E_NOINTERFACE)`

这是 ShowHideBitmap 函数的代码块

```
//Declarations
private static IBaseFilter vmr9 = null;
private static IVMRMixerBitmap9 vmr9mixerBitmap = null;
private IVMRWindowlessControl9 vmr9windowlessCtrl = null;

private static void ShowHideBitmap(Boolean bEnable)
{
int hr = 0;
VMR9AlphaBitmap alphaBmp;

if (!bEnable)
{
    if (vmr9mixerBitmap != null)
    {
        // Get current Alpha Bitmap Parameters
        hr = vmr9mixerBitmap.GetAlphaBitmapParameters(out alphaBmp);
        DsError.ThrowExceptionForHR(hr);

        // Disable them
        alphaBmp.dwFlags = VMR9AlphaBitmapFlags.Disable;

        // Update the Alpha Bitmap Parameters
        hr = vmr9mixerBitmap.UpdateAlphaBitmapParameters(ref alphaBmp);
        DsError.ThrowExceptionForHR(hr);

        // Create a surface from our alpha bitmap
        surface.Dispose();

        vmr9mixerBitmap = null;

        //Release this alpha bitmap source.
        if (alphaBitmap != null)
        {
            alphaBitmap.Dispose();
        }
    }
    return;
}
else
{
    try
    {
        alphaBitmap = BitmapGenerator.GenerateAlphaBitmap();

        // Create a surface from our alpha bitmap
        if(surface == null)
            surface = new Surface(device, alphaBitmap, Pool.SystemMemory);

        // Get the unmanaged pointer
        unmanagedSurface = surface.GetObjectByValue(DxMagicNumber);

        if (vmr9mixerBitmap == null)
            vmr9mixerBitmap = (IVMRMixerBitmap9)vmr9;

        // Set Alpha Bitmap Parameters for using a Direct3D surface
        alphaBmp = new VMR9AlphaBitmap();
        alphaBmp.dwFlags = VMR9AlphaBitmapFlags.EntireDDS;
        alphaBmp.pDDS = unmanagedSurface;
        alphaBmp.rDest = GetDestRectangle();
        alphaBmp.fAlpha = 1.0f;

        // Set Alpha Bitmap Parameters
        hr = vmr9mixerBitmap.SetAlphaBitmap(ref alphaBmp);
        DsError.ThrowExceptionForHR(hr);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
}
} 
```

这是等待更新事件的线程。

```
 Thread overlayupdatethreadhandle = new Thread(new ThreadStart(overlayupdatethread));
            overlayupdatethreadhandle.Start();

    private void overlayupdatethread()
    {
        do
        {
            overlayupdateeventhandle.WaitOne();
            ShowHideBitmap(GlobalVar.m_ShowOverlay);
        } while (true);
    } 
```

我尝试使用在后台以 100 毫秒间隔运行的计时器来更新此叠加层。使用 timer 效果很好，但对于这个操作，使用 timer 是一个不好的选择。所以我用线程概念移动。

为什么从线程调用时获取接口失败，而从菜单选项调用时效果很好？我应该照顾任何特殊的事情吗？我什至尝试过参数化线程，但没有运气。

在此先感谢您的帮助。

编辑：如果从主线程调用 ShowHideBitmap，则一切正常。如果从工作线程调用 ShowHideBitmap，COM 对象会创建异常。如何处理这种跨线程操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:51:07.220

例外情况很糟糕，在 COM 中并不少见。它的真正含义是“我不知道如何为您提供可以从工作线程中使用的接口引用”。这是一种常见的事故，这些 COM 组件根本不是线程安全的。他们通过处理它，自动将来自工作线程的调用编组到所有者线程来强制执行这一点。或者根本不让您从另一个线程使用它们，因为编组将毫无意义，使其太慢。VMR 属于后一类。

这与 .NET 非常不同，它还有*很多*完全线程不安全的类。基本的东西，例如，没有一个集合类。但是它允许你在一个线程中使用这些类，让你来确保它是线程安全的。当然，这经常出错，使用适当的锁定是一项技能。

COM 在设计上一直是线程感知的。由于线程很难正确处理，因此应该由聪明的人来处理。这在 95% 的时间里都非常有效。并且在剩下的时间里给你一个严重的偏头痛。当 COM 处理线程时，由于难以诊断性能不佳而引起的偏头痛。当它没有时，糟糕的错误报告。

好吧，没办法，您确实必须从创建 VMR 实例的同一线程中使用该接口。没办法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-08T13:03:22.977

尝试使用 Delphi 库中的侦听器/事件处理程序对象时出现错误 E_NOINTERFACE。为了克服编组和不同线程的问题，我保存了分配侦听器的线程调度程序，然后使用它来触发事件。

接口：

```
[ComVisible(true)]
[Guid("2FFC2C20-A27B-4D67-AEA3-350223D3655F")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IDataSystemInterfaceEventListener
{
    void OnIntializeCompleted(int status);
    void OnTerminateCompleted(int status);
    void OnRunCompleted(int status);
}

[ComVisible(true)]
[Guid("B9953413-A8C9-4CE2-9263-B488CA02E7EC")]
[InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
public interface IDataSystemInterface
{
    void Intialize(string config);
    void StartRun(string conditions);
    void StopRun();
    void Terminate();        

    IDataSystemInterfaceEventListener Listener { get; set; }
} 
```

然后执行（通知 Dispatcher.CurrentDispatcher 存储）

```
[ComVisible(true)]
[Guid("0818F830-DA37-4167-BF31-3A2C55A9BF2B")]        
public class DataSystemModule : IDataSystemInterface
{
    private Dispatcher m_dispatcherListener = null;
    private IDataSystemInterfaceEventListener m_listener = null;
    public IDataSystemInterfaceEventListener Listener
    {
        get
        {
            return m_listener;
        }
        set
        {
            m_dispatcherListener = Dispatcher.CurrentDispatcher;
            m_listener = value;
        }
    } 
} 
```

然后在代码中：

```
if (Listener != null)
{
    m_dispatcherListener.Invoke((Action)delegate()
    {
        Listener.OnTerminateCompleted((int)TerminateStatus.Completed);
    });
} 
```

如果在不同的线程中调用侦听器，则没有分派器，它将产生错误

# c++ - C++ 递归中未处理的异常错误

> ID：15653312
> 
> 赞同：0
> 
> 时间：2013-03-27T06:56:22.717
> 
> 标签：c++, c++11

所以我有这个函数，它使用递归来找到最长的数字序列。但每次我运行它时，我都会收到以下错误消息：

> 增加 Seq.exe 中 0x002871D9 处的未处理异常：0xC0000005：访问冲突写入位置 0x01060EC0。

```
int seqeter(int grid, int startPos,  int seq)
{
    Sequence maxseq;
    maxseq.size = 0;
    for (int rows=0;rows<MAXROWS;rows++)
    {
        for(int cols=0;cols<MAXCOLS;cols++)
        {

            if (grid[startPos.x][startPos.y] < grid[startPos.x+rows][startPos.y+cols])

            {
                return seq;
            }

            else 
            {
                maxseq.list[maxseq.size] = grid[startPos.x][startPos.y];
                maxseq.size ++;
             return generateSeq(grid, startPos, seq);
            }

        }
    }

    return maxseq;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T06:59:18.047

你没有从你的`startPos`- 递归永远不会停止，你很快就会崩溃堆栈。

# list - python设置值以列出元素

> ID：15653315
> 
> 赞同：1
> 
> 时间：2013-03-27T06:56:38.537
> 
> 标签：list, python-2.7, indexing

基本上我想要做的是，创建一个嵌套列表并将其元素之一的值设置为列表中其他元素的函数。

```
>>> a = [[1]*5]*5
>>> a
[[1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1], [1, 1, 1, 1, 1]]
>>> a[2][2] = a[0][2] + a[2][1]
>>> a
[[1, 1, 2, 1, 1], [1, 1, 2, 1, 1], [1, 1, 2, 1, 1], [1, 1, 2, 1, 1], [1, 1, 2, 1, 1]]
>>> a[3][2]   
2
>>> a[4][2]
2
>>> a[4][4]
1 
```

我只是设置了 a[2][2] 的值，但是第三列中的每个元素都设置了相同的值。到底发生了什么，我怎样才能得到想要的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T06:58:06.153

发生的情况是`a`最终包含对同一子列表的五个引用。当您更改一个子列表时，它们都会更改。

要查看这一点，请应用[`id()`](http://docs.python.org/2/library/functions.html#id)到每个子列表：

```
>>> map(id, a)
[8189352, 8189352, 8189352, 8189352, 8189352] 
```

如您所见，它们都具有相同的 ID，这意味着它们是同一个对象。

要修复，更换

```
a = [[1]*5]*5 
```

和

```
a = [[1]*5 for _ in range(5)] 
```

现在子列表是独立的对象：

```
>>> map(id, a)
[21086256, 18525680, 18524720, 19331112, 18431472] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T06:58:47.407

问题是您的列表`a`包含对同一列表的五个引用。你需要做这样的事情：

```
a = []
for _ in range(5):
    a += [[1] * 5] 
```

# wordpress - Woocommerce 的奇怪会话问题

> ID：15653318
> 
> 赞同：2
> 
> 时间：2013-03-27T06:56:57.900
> 
> 标签：wordpress, woocommerce

我正在尝试在基本网站上启动并运行 WooCommerce，但我的购物车有问题。

基本上，当我以管理员身份登录时，一切都按预期工作。但是当我没有登录时，我可以在购物车中添加一个项目，但是 cookie 会立即消失，从而使购物车完全停止工作......似乎每次 WooCommerce 或 Wordpress 都会重置会话访客访问了 WooCommerce 页面。

这是一个大问题，因为我不希望任何人注册帐户来购买我的单一产品。

有谁知道这可能是什么原因，以及如何解决？我查看了 WooCommerce 代码，除了 $woocommerce 全局调用设置 cookie 的方法的 init 方法之外，我什么也看不到......并且 cookie 本身被设置为在浏览器关闭时被删除，但是一旦购物车页面加载，它们就会被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:51:43.757

我刚刚安装了[JigoShop](http://jigoshop.com/)。需要一些 CSS 调整才能与 TwentyTwelve 一起使用，但它允许人们购买东西，这比 WooCommerce 为我所做的要多；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-21T08:20:11.883

[我们在https://sherpax.cz](https://sherpax.cz)电子商务商店遇到了同样的问题。转到*plugins*，并删除所有缓存插件（彗星缓存等）。即使正确设置了 Comet 缓存以不缓存特定页面（购物车等），会话混合也存在问题。

# node.js - 如何在node.js中将错误捕获到redis

> ID：15653321
> 
> 赞同：0
> 
> 时间：2013-03-27T06:57:02.580
> 
> 标签：node.js, redis

在我的应用程序中，我使用带有 node.js 的 redis 数据库。现在我想构建错误捕获模块。如何在 redis 中捕获错误。使用 Airbrake（[https://github.com/felixge/node-airbrake](https://github.com/felixge/node-airbrake)）我们可以捕获错误但是我如何在 node.js 中使用 redis 自己做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:23:33.073

如果您查看 的代码`node-airbrake`，您会注意到：

```
Airbrake.prototype.handleExceptions = function() {
  var self = this;
  process.on('uncaughtException', function(err) {
    self._onError(err, true)
  });
}; 
```

因此，您可以实现自己的`uncaughtException`处理程序（尽管有人说这样做是不好的形式，但这是另一个讨论）并将您的错误存储在 Redis 中。

# php - 使用AJAX上传时请求不结束，删除上传文件

> ID：15653326
> 
> 赞同：0
> 
> 时间：2013-03-27T06:57:45.277
> 
> 标签：php, ajax, symfony

由于版权原因，我无法提供完整的源代码，但我会详细描述问题。

我使用 AJAX 上传来上传文件。一切都很好，除了当我`choose a file, delete it outside then submit it`，请求没有结束。问题发生在 Firefox 上。这是图：

![在此处输入图像描述](../Images/25b29d90a51041888c1398d26498d196.png)

```
public function inputAction()
{
    // Get request.
    $request = Request::createFromGlobals();

    if($request->getMethod() == "POST" && $request->request->has("uploadFile")) {
        var_dump("It should output this"); exit();

        // In practice, It will run to this.
        $request->request->set("finish", true);
    }

    // Set this to close loading dialog.
    $request->request->set("finish", false);

    // Render view.
    return $this->render('frontendfrontBundle:Convert:input.html.php', array("bag" => $request->request));
} 
```

我的表格

```
 <form id="convertForm" method="post" action="<?php echo $view['router']->generate('Convert_input');?>" enctype="multipart/form-data" target="upload_target">

            <!-- Used for file uploading -->
            <iframe id="upload_target" name="upload_target" src="#" style="width:0;height:0;border:0px solid #fff;"></iframe> 

            <input id="uploadFile" type="file" class="width_txt" name="uploadFile"/>

            </form>

    <?php
        if($bag->get("finish", false) == true) {
    ?>
        <script>
            $(document).ready(function() {
                window.parent.stopUpload();                 
            });                  
        </script>
    <?php } ?> 
```

脚本

```
$("#convertForm").submit(function(e) { // onSubmit()
        startUpload();
}); 
```

# ruby-on-rails - 这是一种怎样的迁移？

> ID：15653327
> 
> 赞同：0
> 
> 时间：2013-03-27T06:57:45.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我正在尝试基于在迁移中具有以下代码的预构建模型来设置模型：

```
 def change
      create_table :friendships do |t|
         t.string :user_id, :friend_user_id
         t.string :status
       end
  end 
```

我得到了`t.string :status`正在创建列的部分，它将使用一个字符串。我不明白`t.string :user_id, :friend_user_id`同一行上有两个属性的部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:06:01.033

这是一个显示关系的连接表。实际上`user_id`和`friend_user_id`所有参考`id`用户表。

假设我的 id 是 10，而你的 id 是 11。我认为你是“好”朋友。所以在这个表中有一条记录：10、11、“好”。但是你认为我是一个普通的朋友，所以再记录一个：11、10、“普通”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:19:46.243

在第一行中，创建了两列，命名为`user_id`并`friend_user_id`具有字符串数据类型。在第二行中，创建了另一个名为`status`具有字符串数据类型的列。因此，在迁移中，您可以在一行中写入具有相同数据类型的所有列名。即迁移可以这样写。

```
def change
  create_table :friendships do |t|
    t.string :user_id, :friend_user_id, :status
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:18:05.070

这只是在同一行中声明具有相似属性的两列。它类似于

```
t.string :user_id
t.string :friend_user_id 
```

您可以在[此处](http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/TableDefinition.html)找到相关文档（查找“速记示例”）

# javascript - 为什么couchdb的reduce是这样实现的？

> ID：15653336
> 
> 赞同：2
> 
> 时间：2013-03-27T06:58:20.983
> 
> 标签：javascript, view, couchdb, couchbase, reduce

例如，这是一个返回行的总和和长度的函数：

```
function(key, values, rereduce) {
  var result = {total: 0, count: 0};
  for(i=0; i < values.length; i++) {
    if(rereduce) {
        result.total = result.total + values[i].total;
        result.count = result.count + values[i].count;
    } else {
        result.total = sum(values);
        result.count = values.length;
    }
  }
  return(result);
} 
```

看起来你必须定义：

*   一种减少所有元素的方法。
*   一种对部分减少进行分组的方法 (??)

为什么这么奇怪？传统方法可以简单描述为：

```
reduce = {
    op: function(accumulated,val){
        return {total:accumulated.total + val, count:accumulated.count++};
    },
    initial: {total:0, count:0}
} 
```

其中包含足够的信息来减少整个数组并更新它以获得新值......！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T13:43:27.453

该`reduce`阶段是重复的，因为它使存储/缓存更容易。你应该把reduce函数的结果想象成一棵树。要减少某个连续的节点子集，您可以在很大程度上使用预先计算的减少值（以及一些原始值），这样您就不必下降整个树/重新计算所有节点的值查询范围。

我希望这能澄清一点，这有点难以解释。

# c - 如何从 Hotspot Shield 捕获数据包

> ID：15653337
> 
> 赞同：-3
> 
> 时间：2013-03-27T06:58:24.083
> 
> 标签：c, packet-capture

如何捕获应用程序包，包括 Hotspot Shield 和其他免费代理应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:09:47.920

如果我理解您的问题，那么您正在寻找一种工具，可以让您在您的机器上捕获网络数据包并检查它们。

您可以使用[Wireshark](http://www.wireshark.org/)之类的工具来执行此操作。

# c++ - X f() 是什么意思？

> ID：15653345
> 
> 赞同：3
> 
> 时间：2013-03-27T06:59:06.227
> 
> 标签：c++

我看到了这段代码，但我无法理解它的含义。我知道我们如何使用默认构造函数，但这不是默认构造函数。这是什么？

```
class X
{
        ...
};

int main()
{
     X f();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T07:00:52.320

它声明了一个`f`不带参数并返回类型的函数`X`。
这也被称为C++ 中**[最令人烦恼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)**。它是 C++ 标准定义声明的解释规则方式的副产品。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T07:06:00.690

假设您声明了一个函数：

```
int Random(); 
```

并使用它：

```
int main()
{
   int n;
   n = Random();
} 
```

但是在 之后实现 Random 函数`main`。或者假设该`Random`函数是在某个标头中定义的。您需要指示编译器`Random`是在某个其他源文件或某个库中实现的函数。

因此，像这样的表达式：

```
T foo(); 
```

总是意味着对编译器的指示有一个名为`foo`返回的函数`T`。它不能是类型的对象`T`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T07:01:17.060

它的函数名声明`f`

```
 X          f();
  ^          ^ function   
  return type 
```

函数`f()`不接受任何参数并返回一个`X`类对象。

例如它的定义可以是：

```
class X{
   int i;
   // other definition
}

X f(){ 
    X x;
    // some more code
    return x; 
} 
```

在 main 中，您可以像这样使用：

```
int main(){

 X a = f();
 int i = f().i;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T07:03:23.053

这是一个不带任何参数并返回 X 类对象的函数

# sql - 您将如何优化具有多个连接和冗余条件的查询？

> ID：15653346
> 
> 赞同：0
> 
> 时间：2013-03-27T06:59:09.843
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我真的希望你能帮我解决这个问题。这是我当前的代码，到目前为止，它是我能做的最好的代码。

```
 SELECT
      max(t2.pmskey) as pmskey, max(cast(t1.recdate as datetime)) as recdate,
      max(t2.mrtype) as mrtype, max(cast(t1.mrdate as datetime)) as mrdate,
      max(t2.CaseNo) as CaseNo, max(t2.pmclin) as pmclin,
      max(cast(t1.nexteval as datetime)) as nexteval,
      max(cast(t1.repdate as datetime)) as repdate,
      max(t3.mrprocedure) as mrprocedure, max(t2.med_stat) as med_stat,
      max(cast(t1.med_stateff as datetime)) as med_stateff,
      max(t2.clincontact) as clincontact,
      max(cast(t1.datemodf as datetime)) as datemodf, max(t2.modfby) as modfby,
      max(cast(t1.inceptiondate as datetime)) as inceptiondate,
      max(t2.createdby) as createdby, max(cast(t1.date_ent as datetime)) as date_ent,
      max(t2.ppihandler) as ppihandler

 FROM
      tblpms as t1

 JOIN
      (
      select * from tblpms where lower(CaseNo) like '%tr13-011%'

 AND
      cast(mrdate as datetime) IN (select max(cast(mrdate as datetime))
      from tblpms where lower(CaseNo) like '%tr13-011%')
      ) as t2

      on t1.CaseNo COLLATE DATABASE_DEFAULT = t2.CaseNo COLLATE DATABASE_DEFAULT

 JOIN
      (
      select * from tblpms where lower(CaseNo) like '%tr13-011%'

 AND
      lower(mrprocedure) is not null and cast(nexteval as datetime)
      in (select max(cast(nexteval as datetime)) from
      tblpms where lower(CaseNo) like '%tr13-011%')
      ) as t3

      on t1.CaseNo COLLATE DATABASE_DEFAULT = t2.CaseNo COLLATE DATABASE_DEFAULT

      and lower(t2.CaseNo) like '%tr13-011%' 
```

的标准`lower(CaseNo)`在所有连接中都被复制，我不知道如何减少这些。我相信有些事情是可以做的。如果还有其他可以优化的地方，请将其包含在答案中。

这是我当前基于以下答案的查询..

```
 SELECT
      max(t2.pmskey) as pmskey, max(cast(t1.recdate as datetime)) as recdate,
      max(t2.mrtype) as mrtype, max(cast(t1.mrdate as datetime)) as mrdate,
      max(t2.CaseNo) as CaseNo, max(t2.pmclin) as pmclin,
      max(cast(t1.nexteval as datetime)) as nexteval,
      max(cast(t1.repdate as datetime)) as repdate,
      max(t3.mrprocedure) as mrprocedure, max(t2.med_stat) as med_stat,
      max(cast(t1.med_stateff as datetime)) as med_stateff,
      max(t2.clincontact) as clincontact,
      max(cast(t1.datemodf as datetime)) as datemodf, max(t2.modfby) as modfby,
      max(cast(t1.inceptiondate as datetime)) as inceptiondate,
      max(t2.createdby) as createdby, max(cast(t1.date_ent as datetime)) as date_ent,
      max(t2.ppihandler) as ppihandler

 FROM
      tblpms as t1

 JOIN
      (
      select * from tblpms where CaseNo = 'TR13-011-CRW'

 AND
      cast(mrdate as datetime) IN (select max(cast(mrdate as datetime))
      from tblpms where CaseNo = 'TR13-011-CRW')
      ) as t2

      on t1.CaseNo COLLATE DATABASE_DEFAULT = t2.CaseNo COLLATE DATABASE_DEFAULT

 JOIN
      (
      select * from tblpms where CaseNo = 'TR13-011-CRW'

 AND
      lower(mrprocedure) is not null and cast(nexteval as datetime)
      in (select max(cast(nexteval as datetime)) from
      tblpms where CaseNo = 'TR13-011-CRW')
      ) as t3

      on t1.CaseNo COLLATE DATABASE_DEFAULT = t2.CaseNo COLLATE DATABASE_DEFAULT

      and CaseNo = 'TR13-011-CRW' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:18:39.793

匹配时通常`lower()`不需要，`LIKE`因为它[默认不区分大小写](http://www.grapefruitmoon.net/case-sensitivity-in-a-t-sql-where-clause/)。

此外，当在字符串中间执行搜索时（例如`LIKE '%whatever%`），不使用索引。*顺便问一下，你有任何索引吗？您是否尝试过构建查询计划？*

正如我所看到的，这个问题几乎没有可能的解决方案：

1.  [使用全文搜索](https://stackoverflow.com/a/1569014/55209)
2.  添加另一个索引字段并在查询之前填充一次：

    `update tblpms set tr13_flag=1 where CaseNo like '%tr13-011%'`

    然后将每个`where lower(CaseNo) like '%tr13-011%'`语句替换为`where tr13_flag=1`

3.  上述变化：使用索引[PERSISTED 计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=sql.105%29.aspx)，因此您避免手动计算标志。

4.  一次将所有有价值的行抓取到临时表中：

    select * into #tr13011 from tblpms where lower(CaseNo) like '%tr13-011%'

并加入它，可能会在有趣的字段上添加索引。

另外，你`cast`不断地：`cast(nexteval as datetime)`。使用答案中的第 4 个版本并同时投射到`#temp`表格中。

这种情况对我来说似乎没用：`and lower(mrprocedure) is not null and cast(nexteval as datetime)`。为什么不简单`and mrprocedure is not null`呢？

**版本 4 示例**

```
select
    CaseNo,
    mrprocedure,
    cast(mrdate as datetime) as mrdate,
    cast(nexteval as datetime) as nexteval
    -- other required fields from tblpms table
into #tr13
from tblpms where CaseNo = 'TR13-011-CRW'

declare @max_mrdate datetime
declare @max_nexteval datetime

select @max_mrdate=max(mrdate), @max_nexteval=max(nexteval) from #tr13

SELECT
      max(t2.pmskey) as pmskey, max(cast(t1.recdate as datetime)) as recdate,
      max(t2.mrtype) as mrtype, max(cast(t1.mrdate as datetime)) as mrdate,
      max(t2.CaseNo) as CaseNo, max(t2.pmclin) as pmclin,
      max(cast(t1.nexteval as datetime)) as nexteval,
      max(cast(t1.repdate as datetime)) as repdate,
      max(t3.mrprocedure) as mrprocedure, max(t2.med_stat) as med_stat,
      max(cast(t1.med_stateff as datetime)) as med_stateff,
      max(t2.clincontact) as clincontact,
      max(cast(t1.datemodf as datetime)) as datemodf, max(t2.modfby) as modfby,
      max(cast(t1.inceptiondate as datetime)) as inceptiondate,
      max(t2.createdby) as createdby, max(cast(t1.date_ent as datetime)) as date_ent,
      max(t2.ppihandler) as ppihandler

 FROM
      tblpms as t1

 JOIN
      (
      select * from #tr13 where mrdate = @max_mrdate
      ) as t2
      on t1.CaseNo COLLATE DATABASE_DEFAULT = t2.CaseNo COLLATE DATABASE_DEFAULT

 JOIN
      (
      select * from #tr13
        where mrprocedure is not null and nexteval = @max_nexteval
      ) as t3
      on t1.CaseNo COLLATE DATABASE_DEFAULT = t2.CaseNo COLLATE DATABASE_DEFAULT

drop table #tr13 
```

我不确定你为什么需要`COLLATE DATABASE_DEFAULT`，因为它总是同一张桌子。逻辑对我来说不是很清楚，但似乎产生了相同的结果，同时更具可读性（并且可能表现更好）：

```
select
    CaseNo,
    mrprocedure,
    cast(mrdate as datetime) as mrdate,
    cast(nexteval as datetime) as nexteval,
    pmskey,
    mrtype,
    med_stat,
    clincontact,
    modfby,
    createdby,
    ppihandler
    -- other required fields from tblpms table
into #tr13
from tblpms where CaseNo = 'TR13-011-CRW'

declare @max_mrdate datetime
declare @max_nexteval datetime

select @max_mrdate=max(mrdate), @max_nexteval=max(nexteval) from #tr13

SELECT
      max(t2.pmskey) as pmskey, max(cast(t1.recdate as datetime)) as recdate,
      max(t2.mrtype) as mrtype, max(cast(t1.mrdate as datetime)) as mrdate,
      max(t2.CaseNo) as CaseNo, max(t2.pmclin) as pmclin,
      max(cast(t1.nexteval as datetime)) as nexteval,
      max(cast(t1.repdate as datetime)) as repdate,
      max(t2.mrprocedure) as mrprocedure, max(t2.med_stat) as med_stat,
      max(cast(t1.med_stateff as datetime)) as med_stateff,
      max(t2.clincontact) as clincontact,
      max(cast(t1.datemodf as datetime)) as datemodf, max(t2.modfby) as modfby,
      max(cast(t1.inceptiondate as datetime)) as inceptiondate,
      max(t2.createdby) as createdby, max(cast(t1.date_ent as datetime)) as date_ent,
      max(t2.ppihandler) as ppihandler

 FROM tblpms as t1
 JOIN #tr13 t2 on t1.CaseNo = t2.CaseNo
where
    t2.mrdate = @max_mrdate
    and t2.mrprocedure is not null
    and t2.nexteval = @max_nexteval

drop table #tr13 
```

**更新** 我们设法将其简化为以下代码：

```
declare @max_mrdate datetime
declare @max_nexteval datetime

select
    @max_mrdate=max(cast(mrdate as datetime)),
    @max_nexteval=max(cast(nexteval as datetime))
from tblpms
where CaseNo = 'TR13-011-CRW'

select *
from tblpms where CaseNo = 'TR13-011-CRW'
and (
    cast(mrdate as datetime) = @max_mrdate
    or
    (mrprocedure is not null and cast(nexteval as datetime) = @max_nexteval)
) 
```

# javascript - Yeoman - 当前使用 AngularJS 和 Express 的最佳方式？

> ID：15653347
> 
> 赞同：13
> 
> 时间：2013-03-27T06:59:15.233
> 
> 标签：javascript, node.js, angularjs, express, yeoman

**我正在使用 Yeoman 1.0 beta 并且对 express-stack 分支不感兴趣。**那么，在 Express 中使用 Yeoman 构建 Angular 项目的推荐/最佳方法是什么？

我尝试`yo angular --minsafe`在 Express 项目的根目录（where `app.js`and `package.json`are）中运行，但 Yeoman 试图覆盖`package.json`，并且 Angular 文件没有`public`正确进入子目录。此外，我不确定是否可以在不破坏 Bower 和 Grunt 功能的情况下手动移动 Angular 文件。

很高兴能得到一些建议，谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-11-20T14:03:00.870

这个项目似乎涵盖了所有要求（甚至对 MongoDB 有可选支持）：[https ://github.com/DaftMonk/generator-angular-fullstack](https://github.com/DaftMonk/generator-angular-fullstack)

我刚刚在本地尝试过，它可以工作：

```
npm install -g generator-angular-fullstack

yo angular-fullstack [appname] 
```

有关更多信息，请参阅 GitHub 页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T18:18:38.720

如果您首先通过 Bower 安装 Angular，然后将 Express 添加到`package.json`并运行`npm install`- 您将有一个 Express 服务器启动该`/dist`目录。（编辑`app.js`路由到`/dist`并让角度处理路由）

有关更多信息，请参阅此 SO 问题：[ExpressJS 中的 Yeoman](https://stackoverflow.com/questions/14106248/yeoman-inside-expressjs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-07T21:08:41.427

这是启动 AngularJS 应用程序的替代方案的比较。其中一些也涉及 Express。

[http://dancancro.com/comparison-of-angularjs-application-starters/](http://dancancro.com/comparison-of-angularjs-application-starters/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-15T19:55:08.667

After reading MANY blogs and answers, I managed to get it all working... Check out this repo: [https://github.com/malixsys/malix-yae](https://github.com/malixsys/malix-yae)

*   When changes are made to html/server or lib, the server is restarted and the page should refresh
*   When changes are made to HTML or JS files under html/client, the server is not restarted but the page should refresh
*   When changes are made to CSS files under html/client, the new stylesheet should be injected directly without refreshing

# oop - Lua对象表在对象实例之间泄漏，但不是记录

> ID：15653352
> 
> 赞同：0
> 
> 时间：2013-03-27T06:59:24.927
> 
> 标签：oop, lua, lua-table, metatable

我正在尝试学习 Lua，所以希望这是一个容易回答的问题。以下代码不起作用。变量 childContext 在类的所有实例之间泄漏。

```
--[[--
Context class.
--]]--
CxBR_Context = {}

-- Name of Context
CxBR_Context.name = "Context Name Not Set"

-- Child Context List
CxBR_Context.childContexts = {}

-- Create a new instance of a context class
function CxBR_Context:New (object)
  object = object or {} -- create object if user does not provide one
  setmetatable(object, self)
  self.__index = self
  return object
end

-- Add Child Context
function CxBR_Context:AddChildContext(context)
  table.insert(self.childContexts, context)
  print("Add Child Context " .. context.name .. " to " .. self.name)
end

--[[--
Context 1 class. Inherits CxBR_Context
--]]--
Context1 = CxBR_Context:New{name = "Context1"}

--[[--
Context 1A class.Inherits CxBR_Context
--]]--
Context1A = CxBR_Context:New{name = "Context1A"}

--[[--
Context 2 class.Inherits CxBR_Context
--]]--
Context2 = CxBR_Context:New{name = "Context2"}

--[[--
TEST
--]]--
context1  = Context1:New() -- Create instance of Context 1 class
print(context1.name .." has " .. table.getn(context1.childContexts) .. " children")
context2  = Context2:New() -- Create instance of Context 2 class
print(context2.name .." has " .. table.getn(context2.childContexts) .. " children")
context1A = Context1A:New() -- Create instance of Context 1A class
print(context1A.name .." has " .. table.getn(context1A.childContexts) .. " children")

context1:AddChildContext(context1A) -- Add  Context 1A as child to context 1

print(context1.name .." has " .. table.getn(context1.childContexts) .. " children") -- Results Okay, has 1 child
print(context2.name .." has " .. table.getn(context2.childContexts) .. " children") -- Why does thin return 1, should be 0 
```

查看[面向对象的 lua 类泄漏](https://stackoverflow.com/questions/11487841/object-oriented-lua-classes-leaking)，我可以通过将构造函数更改为：

```
-- Child Context List
-- CxBR_Context.childContexts = {}

-- Create a new instance of a context class
function CxBR_Context:New (object)
  object = object or { childContexts = {} } -- create object if user does not provide one
  setmetatable(object, self)
  self.__index = self
  return object
end 
```

所以我的问题是：

1.  有没有一种更简洁的方式来声明类变量，就像第一个示例一样，所以我不必将它包含在构造函数中？
2.  为什么 CxBR_Context.name 可以工作，而表 CxBR_Context.childContexts 却不行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:48:04.000

1.  不，我不这么认为。您希望您创建的每个子 Context 对象都有自己的 childContexts 字段。

2.  它有效，因为您将包含名称字段的表传递给 New 函数。你在这里做的是：

Context1 = CxBR_Context:New{name = "Context1"}

*   创建一个表，字段“name”设置为“Context1”
*   将表传递给构造函数
*   [在构造函数中] 将元表（原始 CxBR_Context 表）分配给您在第一步中创建的表。

所以基本上，当您调用 Context1.name 时，您会从调用构造函数时创建的 Context1 表中检索一个字段。但是当你用 childContext 索引它并且不存在这样的字段时（因为在构造器阶段你只创建了一个“name”字段），Lua 会查找 __index 表，即 CxBR_Context。此表对所有 ContextX 对象都是通用的。

编辑：

```
object = object or { childContexts = {} } -- create object if user does not provide one 
```

实际上，如果您像这样提供自己的表格，这也行不通：

```
Context1 = CxBR_Context:New{name = "Context1"} 
```

只有当您的对象参数为 nil 时，它才会起作用，也就是说，如果您仅使用 self 参数调用构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:47:59.227

**1.**
通过使用`table.insert(self.member, v)`，您正在修改指向的容器的内容，该容器`self.member`原来是该成员所在的最近超类的成员。
如果您需要为子类的成员分配值，请明确执行。利用

```
-- create a copy of array with one additional element
self.childContexts = { context, unpack(self.childContexts) } 
```

代替

```
table.insert(self.childContexts, context) 
```

* * *

**2.**
因为您使用分配`CxBR_Context.name`而不是使用分配`CxBR_Context.childContexts`。

# ios - Arc 内存泄漏和 UIImage 命名为 ios

> ID：15653354
> 
> 赞同：1
> 
> 时间：2013-03-27T06:59:40.630
> 
> 标签：ios, memory-management, uiimageview, automatic-ref-counting

嗨，我基本上有两个问题

1) 在 ios6 xcode 4.2 ARC 环境中工作时是否仍然需要处理内存泄漏，因为我知道 arc 只在范围结束时调用。

2) 声明

`self.profileImageView.image = [UIImage imageNamed:@"createProfile_addPhoto.png"];`

它将图像放在内存中，这是屏幕的繁重过程。我在很多地方读过它，但没有找到任何替代代码来代替它。有没有更好的解决方案。

只是我需要处理内存问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:17:22.663

而不是`imageNamed`使用 **imageWithContentsOfFile：**

```
 NSString *imagePath = [[NSBundle mainBundle]pathForResource:@"createProfile_addPhoto" ofType:@"png"];

 self.profileImageView.image =  [UIImage imageWithContentsOfFile:imagePath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:00:50.343

我不知道我是否很好地理解了您的问题，但是：
1-ARC 确实管理了 Objective-C 对象的所有内存，并且在 iOS6 中还有 GCD 队列
2-您使用的方法将图像缓存在内存中以供进一步调用。因此，如果您多次调用此图像是值得的（除非图像真的很大）。

如果你需要创建一个更小的范围，你可以将你的代码嵌入到一个`@autorelease`块中，这在处理循环时很有用，但如果你`-imageNamed:`按照我所说的那样使用，则会缓存图像。更好用`-imageWithContentsOfFile:`。
ARC 中的泄漏几乎是不可能的，如果您正在处理 Core Foundation 不透明类型，就会发生泄漏，这些类型不是由 ARC 自动管理的。使用 ARC 可能发生的事情是废弃内存或保留周期，从未听说过使用它的泄漏。
希望这会有所帮助，安德里亚

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T07:15:45.343

1) 是的，对于某些情况（即强参考周期）

2）`[UIImage imageWithContentsOfFile:]`可以成为你的替代品。 `imageNamed:`实现缓存系统。但是，当内存紧张时，它会自行清除。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-27T08:03:00.093

问题 1)：
ARC 内存泄漏的另一种可能性是使用没有设置自动释放池的单独线程。Apple docs [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)：
“您必须在线程开始执行后立即创建自己的自动释放池块；否则，您的应用程序将泄漏对象。”
如果没有设置自动释放池，即使调用一个简单的 getter 方法也会造成内存泄漏，如果它返回一个自动释放对象。

# ios - 如何在iOS中拖动图像时将图像重叠在另一个图像上？

> ID：15653357
> 
> 赞同：1
> 
> 时间：2013-03-27T06:59:54.697
> 
> 标签：ios, iphone, uiimageview, uiimage

我创建了 JIGSAW 游戏。我已经将图像分割成 3X3 矩阵并显示在屏幕上（即`[self.view addSubView:imageview]`，我添加了所有 9 个图像块）。现在用于解决游戏，当我将一个图像图块拖动到另一个图像图块时，有时它会在图像上方或有时在图像下方（例如 iOS 第一个添加到视图的图像的默认行为出现在剩余的所有图像下方，最后添加的图像出现在顶部时用户拖动图像在附加图像中看到）现在我想当我拖动任何图像图块时，它必须出现在剩余图像的顶部。与最后添加的图像相同，显示在顶部。

![在此处输入图像描述](../Images/4dbf7821edde8a93aac67f920304d221.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:03:59.503

每当触摸图像视图进行拖动时，您都可以通过调用将其移动到前面`bringSubviewToFront`。

```
[self.view bringSubviewToFront:touchedImageView]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:03:57.537

当触摸开始调用`-[UIView bringSubviewToFront:]`瓦片的超级视图时，瓦片作为参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:32:55.687

你应该知道：

```
- (void)bringSubviewToFront:(UIView *)view 
```

和

```
- (void)sendSubviewToBack:(UIView *)view 
```

# android - android如何使用youtube data api v2获取另一个用户上传的所有视频？

> ID：15653359
> 
> 赞同：0
> 
> 时间：2013-03-27T06:59:56.567
> 
> 标签：android, youtube-api

我一直在尝试获取特定用户上传的所有视频。我试过这个网址 [http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&alt=jsonc](http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&alt=jsonc)但只获得首页视频列表。

该用户上传了大约 250 个视频，但我得到的视频很少。在网站上，我们通过加载“加载更多”按钮获得更多视频，但使用 api 我不知道如何获取它。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:25:32.287

您还需要将[max-results](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#max-resultssp)和[start-index](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters#max-resultssp)发送到 gdata api 以查询下一个 25（最大 50）个结果，因为默认情况下 gdata api 只返回第 25 个结果

例如要获得接下来的 25 个结果：

[http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&alt=json&max-results=25&start-index=10](http://gdata.youtube.com/feeds/api/users/USERNAME/uploads?v=2&alt=json&max-results=25&start-index=10)

# entity-framework - EF 如何处理计算属性？

> ID：15653362
> 
> 赞同：0
> 
> 时间：2013-03-27T07:00:10.370
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, code-first

给定以下课程

```
public class Model
{
    public int ActualInt{get;set;}
    public int ComputedInt {get {return ActualInt * 2;}}
} 
```

EF 如何*不*映射 ComputedInt。

我也不想使用我的域模型`NotMappedAttribute`

Fluent 也是一种痛苦，因为我必须不断删除每个上下文、每个计算属性的映射，并且在域模型中有很多这样的映射。

有没有办法做到这一点，只需按照约定而不是显式配置？

# java - 在java中的偏移处将数据字节写入文件

> ID：15653371
> 
> 赞同：7
> 
> 时间：2013-03-27T07:01:08.687
> 
> 标签：java, file

我希望以不同的偏移量将数据写入文件。例如，在第 0 位置、第 (size/2) 位置、第 (size/4) 位置等。 size 表示要创建的文件的文件大小。如果不创建不同的文件部分并加入它们，这是否可能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T07:04:20.710

[好吧，您可以使用RandomAccessFile](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html)写入文件中您喜欢的任何位置- 只需使用[`seek`](http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html#seek%28long%29)它到达正确的位置，然后开始写入。

但是，这不会在这些位置*插入*字节 - 它只会*覆盖*它们（当然，如果您正在写入超过当前文件长度的末尾，则在末尾添加数据）。目前尚不清楚这是否是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:08:28.993

您正在寻找的是`Random access files`. 来自[官方的 sun java 教程网站](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)-

> 随机访问文件允许对文件内容进行非顺序或随机访问。要随机访问文件，您需要打开文件，寻找特定位置，然后读取或写入该文件。
> 
> SeekableByteChannel 接口可以实现此功能。SeekableByteChannel 接口使用当前位置的概念扩展了通道 I/O。方法使您能够设置或查询位置，然后您可以从该位置读取数据或将数据写入该位置。API 由几个易于使用的方法组成：
> 
> position - 返回通道的当前位置
> position(long) - 设置通道的位置
> read(ByteBuffer) - 从通道读取字节到缓冲区
> write(ByteBuffer) - 从缓冲区写入字节到通道
> truncate(long) - 截断文件（或其他实体）连接到通道

和一个例子，这是在那里提供的 -

```
String s = "I was here!\n";
byte data[] = s.getBytes();
ByteBuffer out = ByteBuffer.wrap(data);

ByteBuffer copy = ByteBuffer.allocate(12);

try (FileChannel fc = (FileChannel.open(file, READ, WRITE))) {
    // Read the first 12
    // bytes of the file.
    int nread;
    do {
        nread = fc.read(copy);
    } while (nread != -1 && copy.hasRemaining());

    // Write "I was here!" at the beginning of the file.
    // See how they are moving back to the beginning of the
    // file?
    fc.position(0);
    while (out.hasRemaining())
        fc.write(out);
    out.rewind();

    // Move to the end of the file.  Copy the first 12 bytes to
    // the end of the file.  Then write "I was here!" again.
    long length = fc.size();

    // Now see here. They are going to the end of the file.
    fc.position(length-1);

    copy.flip();
    while (copy.hasRemaining())
        fc.write(copy);
    while (out.hasRemaining())
        fc.write(out);
} catch (IOException x) {
    System.out.println("I/O Exception: " + x);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:13:13.030

如果这不是一个大文件，您可以阅读整个内容，然后编辑数组：

```
public String read(String fileName){
    BufferedReader br = new BufferedReader(new FileReader(fileName));
    try {
        StringBuilder sb = new StringBuilder();
        String line = br.readLine();

        while (line != null) {
            sb.append(line);
            sb.append("\n");
            line = br.readLine();
        }
        String everything = sb.toString();
    } finally {
        br.close();
    }
}

public String edit(String fileContent, Byte b, int offset){
    Byte[] bytes = fileContent.getBytes();
    bytes[offset] = b;
    return new String(bytes);
] 
```

然后将其写回文件（或者只是删除旧的并将字节数组写入具有相同名称的新文件）

# r - 如何有选择地将列转换为 data.frame 中的行？

> ID：15653376
> 
> 赞同：4
> 
> 时间：2013-03-27T07:01:30.207
> 
> 标签：r, dataframe, reshape

我有这样一个数据框：

```
 a1 a2 a3 a4 b c d1 d2 d3 d4 
[1] 0  0  1  0  0 0 0  1  0  0
[2] 0  1  0  0  1 0 0  1  0  0
... 
```

我想将其转换如下，我认为 reshape 在这里没有用，最好的方法是什么？

```
 a b c d
[1] 0 0 0 0       # a and d as a1 and d1 of first row
[2] 0 0 0 1       # a and d as a2 and d2 of first row
[3] 1 0 0 0       # a and d as a3 and d3 of first row
[4] 0 0 0 0       # a and d as a4 and d4 of first row
[5] 0 1 0 0       # a and d as a1 and d1 of second row
[6] 1 1 0 1       # a and d as a2 and d2 of second row
[7] 0 1 0 0       # a and d as a3 and d3 of second row
[8] 0 1 0 0       # a and d as a4 and d4 of second row
... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:24:17.990

如果数据真的这么简单，下面的东西就可以了

```
DF <- read.table(text = "a1 a2 a3 a4 b c d1 d2 d3 d4\n0  0  1  0  0 0 0  1  0  0\n0  1  0  0  1 0 0  1  0  0", 
    header = TRUE)
a <- as.vector(t(DF[, c("a1", "a2", "a3", "a4")]))
d <- as.vector(t(DF[, c("d1", "d2", "d3", "d4")]))
b <- rep(DF[, "b"], each = 4)
c <- rep(DF[, "c"], each = 4)
result <- data.frame(a, b, c, d)
result
##   a b c d
## 1 0 0 0 0
## 2 0 0 0 1
## 3 1 0 0 0
## 4 0 0 0 0
## 5 0 1 0 0
## 6 1 1 0 1
## 7 0 1 0 0
## 8 0 1 0 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T10:27:03.337

这是一种半灵活的方式来做你想做的事情。如果你的列号超过 9，除非你使用前导零，否则它会崩溃。我认为它假设你的列是排序的（可以用`yourdata <- yourdata[ , sort( names( yourdata ) ) ]`) 并且所有列都可以被最长的列完全整除（在 处计算`final.nrow`）

```
x <- read.table(text = "a1 a2 a3 a4 b c d1 d2 d3 d4\n0  0  1  0  0 0 0  1  0  0\n0  1  0  0  1 0 0  1  0  0", 
    header = TRUE)

# this assumes your data are reasonably structured

# here's a way to construct the "a" column in your desired structure--
as.numeric( t( x[ , grepl( "a" , names( x ) ) ] ) )

# so let's find all the column names, without their numbers
cols <- unique( gsub( "[1-9]" , "" , names( x ) ) )

# look at all column headers
cols

# find the number of records in the final table
final.nrow <- nrow( x ) * max( as.numeric( gsub( "[a-z]" , "" , names( x ) ) ) , na.rm = TRUE )

# initiate an empty data frame
y <- NULL

# loop through each of your column names
for ( i in cols ){
    curCol <- as.numeric( t( x[ , grepl( i , names( x ) ) ] ) )

    # find the multiple
    expanded.col <- data.frame( rep( curCol , each = final.nrow / length( curCol ) ) )

    if ( is.null( y ) ) y <- expanded.col else y <- cbind( y , expanded.col )
}

# tack on the final names
names( y ) <- cols

# look at the final result
y 
```

# java - Android OpenGL ES 2.0：立方体模型不仅扭曲（透视错了？），而且面加载不正确（顶点不正确？）

> ID：15653379
> 
> 赞同：5
> 
> 时间：2013-03-27T07:01:38.077
> 
> 标签：java, android, opengl-es, 3d, opengl-es-2.0

我遇到了一些问题，如果没有你们尝试，我无法很好地解释。

我无法正确加载立方体。不过，我能够让它在所有轴上都很好地旋转。（“轴”的复数是“轴”？）

我还没有尝试过灯光和纹理，所以如果你似乎还不能辨认出模型，我很抱歉。

这就是它现在的样子（自由旋转模型的快照）：

![立方体的快照。 尚未显示深度。](../Images/909b7f4713da5bb877edd092319d6090.png)

这是预期的结果：

![搅拌机模型。 期望太高了，先生。](../Images/1499d4af18b45eda7395065ba7c5be05.png)

这是我的代码`GLSurfaceView.Renderer`：

```
package dd.ww;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;
import android.content.Context;
import android.opengl.GLES20;
import android.opengl.GLSurfaceView.Renderer;
import android.opengl.Matrix;

public class Render implements Renderer {

    private Context context;
    private Cube cube;

    private float[] modelViewProjectionMatrix = new float[16];
    private float[] projectionMatrix = new float[16];
    private float[] viewMatrix = new float[16];
    private float[] rotationMatrix = new float[16];
    private float angle = 0f;

    public Render(Context context) {
        this.context = context;
    }

    @Override
    public void onSurfaceCreated(GL10 unused, EGLConfig config) {
        GLES20.glClearColor(1f, 1f, 1f, 1f);
        cube = new Cube(context);
    }

    @Override
    public void onSurfaceChanged(GL10 unused, int width, int height) {
        GLES20.glViewport(0, 0, width, height);
        float ratio = (float) width / (float) height;
        Matrix.frustumM(projectionMatrix, 0, -3f, 3f, -3f, 3f, 1f, 10f);
    }

    @Override
    public void onDrawFrame(GL10 unused) {
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);
        //Camera position
        Matrix.setLookAtM(viewMatrix, 0, 0f, 0f, -4f, 0f, 0f, 0f, 0f, 1f, 0f);
        // projection x view = modelView
        Matrix.multiplyMM(modelViewProjectionMatrix, 0, projectionMatrix, 0, viewMatrix, 0);
        //Creating rotation matrix
        Matrix.setRotateM(rotationMatrix, 0, angle, 0f, 0f, -1f);
        //rotation x camera = modelView
        Matrix.multiplyMM(modelViewProjectionMatrix, 0, rotationMatrix, 0, modelViewProjectionMatrix, 0);
        Matrix.setRotateM(rotationMatrix, 0, angle, 0f, -1f, 0f);
        Matrix.multiplyMM(modelViewProjectionMatrix, 0, rotationMatrix, 0, modelViewProjectionMatrix, 0);
        Matrix.setRotateM(rotationMatrix, 0, angle, -1f, 0f, 0f);
        Matrix.multiplyMM(modelViewProjectionMatrix, 0, rotationMatrix, 0, modelViewProjectionMatrix, 0);

        cube.draw(modelViewProjectionMatrix);

        angle += 0.7f;
        if (angle > 360f)
            angle = 0f;
    }

} 
```

这是 Cube 类的代码，以及它的 OBJ 加载器。OBJ Loader 用于加载从 Blender 导出的 OBJ 模型（这是 Cube 的预期结果，在 Blender 中显示。）：

```
package dd.ww;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;
import java.nio.FloatBuffer;
import java.nio.ShortBuffer;
import java.util.ArrayList;
import android.content.Context;
import android.content.res.AssetManager;
import android.opengl.GLES20;
import android.util.Log;

public class Cube {
    private Context context;
    private FloatBuffer vertexBuffer;
    private ShortBuffer indexBuffer;

    private int shaderProgram;

    //TODO: Go to Google Code, find OpenGL ES 2.0 Programming Guide source code, Android,
    //check in the ESShapes.java, and study the FloatBuffers...

    public Cube(Context c) {
        context = c;
        loadCube("cube/cube.obj");
    }

    private void loadCube(String filename) {

        ArrayList<Float> tempVertices = new ArrayList<Float>();
        //ArrayList<Float> tempNormals = new ArrayList<Float>();
        ArrayList<Short> vertexIndices = new ArrayList<Short>();
        //ArrayList<Short> normalIndices = new ArrayList<Short>();

        try {
            AssetManager manager = context.getAssets();
            BufferedReader reader = new BufferedReader(new InputStreamReader(manager.open(filename)));
            String line;
            while ((line = reader.readLine()) != null) {
                if (line.startsWith("v")) {
                    tempVertices.add(Float.valueOf(line.split(" ")[1])); //vx
                    tempVertices.add(Float.valueOf(line.split(" ")[2])); //vy
                    tempVertices.add(Float.valueOf(line.split(" ")[3])); //vz
                }
                //              else if (line.startsWith("vn")) {
                //                  tempNormals.add(Float.valueOf(line.split(" ")[1])); //nx
                //                  tempNormals.add(Float.valueOf(line.split(" ")[2])); //ny
                //                  tempNormals.add(Float.valueOf(line.split(" ")[3])); //nz
                //              }
                else if (line.startsWith("f")) {

                    /*
                    vertexIndices.add(Short.valueOf(tokens[1].split("/")[0])); //first point of a face
                    vertexIndices.add(Short.valueOf(tokens[2].split("/")[0])); //second point
                    vertexIndices.add(Short.valueOf(tokens[3].split("/")[0])); //third point
                    normalIndices.add(Short.valueOf(tokens[1].split("/")[2])); //first normal
                    normalIndices.add(Short.valueOf(tokens[2].split("/")[2])); //second normal
                    normalIndices.add(Short.valueOf(tokens[3].split("/")[2])); //third
                     */
                    //                  for (int i = 1; i <= 3; i++) {
                    //                      //String[] s = tokens[i].split("/");
                    //                      vertexIndices.add(Short.valueOf());
                    //                      //normalIndices.add(Short.valueOf(s[2]));
                    //                  }

                    vertexIndices.add(Short.valueOf(line.split(" ")[1]));
                    vertexIndices.add(Short.valueOf(line.split(" ")[2]));
                    vertexIndices.add(Short.valueOf(line.split(" ")[3]));
                }
            }

            float[] vertices = new float[tempVertices.size()];
            for (int i = 0; i < tempVertices.size(); i++) {
                Float f = tempVertices.get(i);
                vertices[i] = (f != null ? f : Float.NaN);
            }

            short[] indices = new short[vertexIndices.size()];
            for (int i = 0; i < vertexIndices.size(); i++) {
                Short s = vertexIndices.get(i);
                indices[i] = (s != null ? s : 1);
            }

            vertexBuffer = ByteBuffer.allocateDirect(vertices.length * 4).order(ByteOrder.nativeOrder()).asFloatBuffer();
            vertexBuffer.put(vertices).position(0);

            indexBuffer = ByteBuffer.allocateDirect(indices.length * 2).order(ByteOrder.nativeOrder()).asShortBuffer();
            indexBuffer.put(indices).position(0);

            int vertexShader = GLES20.glCreateShader(GLES20.GL_VERTEX_SHADER);
            GLES20.glShaderSource(vertexShader, vertexCode);
            GLES20.glCompileShader(vertexShader);
            int fragmentShader = GLES20.glCreateShader(GLES20.GL_FRAGMENT_SHADER);
            GLES20.glShaderSource(fragmentShader, fragmentCode);
            GLES20.glCompileShader(fragmentShader);

            shaderProgram = GLES20.glCreateProgram();
            GLES20.glAttachShader(shaderProgram, vertexShader);
            GLES20.glAttachShader(shaderProgram, fragmentShader);
            GLES20.glLinkProgram(shaderProgram);

            int[] linked = new int[1];
            GLES20.glGetProgramiv(shaderProgram, GLES20.GL_LINK_STATUS, linked, 0);
            if (linked[0] == 0){
                Log.d("DEBUG", "Shader code error.");
                Log.d("DEBUG", GLES20.glGetProgramInfoLog(shaderProgram));
                GLES20.glDeleteProgram(shaderProgram);
                return;
            }

            GLES20.glDeleteShader(vertexShader);
            GLES20.glDeleteShader(fragmentShader);

        }
        catch (Exception e) {
            Log.d("DEBUG", "Error.", e);
        }
    }

    private String vertexCode = "" +
            "attribute vec4 a_position;  \n" +
            "uniform mat4 mvpMatrix;     \n" +
            "void main() {               \n" +
            "   gl_Position = a_position * mvpMatrix;\n" +
            "}                           \n";

    private String fragmentCode = "" +
            "precision mediump float;                   \n" +
            "void main() {                              \n" +
            "   gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);\n" +
            "}                                          \n";

    private int attribute_Position;
    private int uniform_mvpMatrix;

    public void draw(float[] mvpMatrix){
        GLES20.glUseProgram(shaderProgram);
        attribute_Position = GLES20.glGetAttribLocation(shaderProgram, "a_position");
        GLES20.glVertexAttribPointer(attribute_Position, 3, GLES20.GL_FLOAT, false, 3 * 4, vertexBuffer);
        GLES20.glEnableVertexAttribArray(attribute_Position);
        uniform_mvpMatrix = GLES20.glGetUniformLocation(shaderProgram, "mvpMatrix");
        GLES20.glUniformMatrix4fv(uniform_mvpMatrix, 1, false, mvpMatrix, 0);
        GLES20.glDrawElements(GLES20.GL_TRIANGLES, indexBuffer.capacity(), GLES20.GL_UNSIGNED_SHORT, indexBuffer);
        GLES20.glDisableVertexAttribArray(attribute_Position);
    }
} 
```

最后，这里是 APK 附件（上传到 Mediafire，不应该被删除。它是非授权的免费软件）。附加的 APK 文件已签名，直接从我的项目中导出，并且只能在 Gingerbread 或更高版本上运行。（这就是 OpenGL ES 2.0 的用途...）： [Mediafire APK 文件的下载链接。](http://www.mediafire.com/?7gh6vaacx22xwbq)

如果有人愿意帮助我意识到我做错了什么，我会为我的余生感到高兴。[这个问题是我在搜索 SO 时发现的最接近的问题，有 40% 的可能性与我的问题有关。](https://stackoverflow.com/questions/10625868/opengl-es-object-is-displaying-strangely-distorted-android)不幸的是，他的模型仍然变形。我发现的所有其他问题似乎都与纹理渲染不正确、模型转换等有关。但我会尽我所能找到与我有类似问题的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T08:42:53.960

天啊...

我终于让它工作了。

![快照 1](../Images/d28f6c06c653e8b6fa2e45dd8baff759.png)

![快照 2](../Images/3306ba08bb95af550c0caa80abdf4081.png)

问题在于 OpenGL ES 2.0 矩阵是如何工作的。

来自 SO 用户 Tim 的引述：

> 我相信它应该是 mvpMatrix * mRotationMatrix，但是你不应该使用与该函数的输入和输出相同的矩阵，你需要使用一个临时矩阵。Android.opengl.Matrix " 可以为结果、lhs 和/或 rhs 传递相同的浮点数组。但是，**如果结果元素与 lhs 或 rhs 元素重叠，则结果元素值未定义。"** 如果那没有帮助，请发布您的整个代码。

粗体字表示如果您这样做：

```
//Creating rotation matrix
Matrix.setRotateM(rotationMatrix, 0, angle, 0f, 0f, -1f);

//rotation x camera = modelView    
Matrix.multiplyMM(modelViewProjectionMatrix, 0, modelViewProjectionMatrix, 0, rotationMatrix, 0);

Matrix.setRotateM(rotationMatrix, 0, angle, 0f, -1f, 0f);
Matrix.multiplyMM(modelViewProjectionMatrix, 0, modelViewProjectionMatrix, 0, rotationMatrix, 0);

Matrix.setRotateM(rotationMatrix, 0, angle, -1f, 0f, 0f);
Matrix.multiplyMM(modelViewProjectionMatrix, 0, modelViewProjectionMatrix, 0, rotationMatrix, 0);

cube.draw(modelViewProjectionMatrix); 
```

这看起来很正常，立方体看起来会倾斜。原因是， lhs 和 rhs 不应与生成的矩阵相同。

但是，如果你这样做：

```
//Creating rotation matrix
Matrix.setRotateM(rotationMatrix, 0, angle, 0f, 0f, -1f);

//rotation x camera = modelView
float[] duplicateMatrix = Arrays.copyOf(modelViewProjectionMatrix, 16);

Matrix.multiplyMM(modelViewProjectionMatrix, 0, duplicateMatrix, 0, rotationMatrix, 0);

Matrix.setRotateM(rotationMatrix, 0, angle, 0f, -1f, 0f);
duplicateMatrix = Arrays.copyOf(modelViewProjectionMatrix, 16);
Matrix.multiplyMM(modelViewProjectionMatrix, 0, duplicateMatrix, 0, rotationMatrix, 0);

Matrix.setRotateM(rotationMatrix, 0, angle, -1f, 0f, 0f);
duplicateMatrix = Arrays.copyOf(modelViewProjectionMatrix, 16);
Matrix.multiplyMM(modelViewProjectionMatrix, 0, duplicateMatrix, 0, rotationMatrix, 0);

cube.draw(modelViewProjectionMatrix); 
```

它将正确显示。

[我从哪里找到有用的提示。](https://stackoverflow.com/questions/11924020/android-opengl-weirdness-with-the-setlookatm-method)

这就是我意识到为什么有 3 个人投票结束这个问题的原因。他们一定是一开始就知道这个问题的答案，并希望我自己找到解决方案。向他们脱帽致敬...

我向上帝发誓，这是一个我终于克服的难题。浪费了2年的生命付诸东流……

# java - ListView 没有响应 Android 中的点击事件

> ID：15653383
> 
> 赞同：6
> 
> 时间：2013-03-27T07:02:12.983
> 
> 标签：java, android, button, android-listview, onclicklistener

我有一个自定义`ListView`项目如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" 
    android:gravity="center_vertical" 
    android:paddingTop="2dp"
    android:paddingBottom="2dp"
    android:background="@android:color/transparent">

    <ImageView
        android:id="@+id/profile_picture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/mr_unknown" 
        android:contentDescription="@string/profile_picture_description"
        android:paddingRight="3dp"/>

    <TextView
        android:id="@+id/real_life_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@style/FriendListText"/>
    <Button 
        android:id="@+id/ping_friend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Ping Friend"
        />
</LinearLayout> 
```

在此 ListView 中使用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@color/white"
    tools:context=".FriendListActivity" >

    <ListView
        android:id="@+id/friend_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:fastScrollEnabled="true"
        android:smoothScrollbar="false"
        style="@style/ListViewStyle" >
    </ListView>

</LinearLayout> 
```

现在我希望在任何列表项上单击**Ping Friend**按钮时，它应该显示一个**AlertDialog**。我用过这段代码...

```
friendListAdapter = new FriendListAdapter(FriendListActivity.this, friends);
friendListView = (ListView) findViewById(R.id.friend_list);
friendListView.setAdapter(friendListAdapter);           

downloadFriends_async(); //This method downloads all the *friends* into ListView from Database. *Its working correctly*.

friendListView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
        alertDialogBuilder.setTitle("Hello!!!");
        alertDialogBuilder
        .setMessage("Do you want to exit?")
        .setCancelable(false)
        .setPositiveButton("Yes",new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog,int id) {
                FriendListActivity.this.finish();}})
                .setNegativeButton("No",new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog,int id) {
                        dialog.cancel();}});
        AlertDialog alertDialog = alertDialogBuilder.create();
        alertDialog.show();
    }
}); 
```

没有显示错误。

问题是它没有响应 Click on Button 并且根本没有出现 AlertDialog。

对于按钮，我也厌倦了在`onItemClick`ListView 中**添加**：

```
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

Button btnPingFriend = (Button) findViewById(R.id.ping_friend);
btnPingFriend.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {

//Rest of AlertDialog Code...

} 
```

还是没有反应。

请建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-27T07:25:44.840

添加

```
android:descendantFocusability="blocksDescendants" 
```

到项目的顶部 ViewGroup

**更新**：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" 
    android:gravity="center_vertical" 
    android:paddingTop="2dp"
    android:paddingBottom="2dp"
    android:background="@android:color/transparent"
    android:descendantFocusability="blocksDescendants"
     >

    <ImageView
        android:id="@+id/profile_picture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/mr_unknown" 
        android:contentDescription="@string/profile_picture_description"
        android:paddingRight="3dp"/>

    <TextView
        android:id="@+id/real_life_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        style="@style/FriendListText"/>
    <Button 
        android:id="@+id/ping_friend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Ping Friend"
        />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:26:12.767

似乎您正试图让`Button`响应`onItemClick`，它用于`ListView`.

**编辑：**

在(FriendsListAdapter)`getView`实现中的方法中，`ListAdapter`您应该输入以下内容：

```
Button btnPingFriend = (Button) v.findViewById(R.id.ping_friend);
btnPingFriend.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View view) {
        // Add your dialog here.
} 
```

位于`Button`a 内`ListView`并且不会响应容器的`Listener`- 另请查看`Button's`文档：http: [//developer.android.com/reference/android/widget/Button.html](http://developer.android.com/reference/android/widget/Button.html)您`Listeners`可以使用...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:10:34.907

像这样尝试：

```
listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        AlertDialog.Builder alertbox=new AlertDialog.Builder(FirstActivity.this);

                     alertbox.setTitle("Warning");
                     alertbox.setMessage("Exit Application?");
                     alertbox.setPositiveButton("Yes", new
                     DialogInterface.OnClickListener() {
                     public void onClick(DialogInterface arg0, int arg1) {

                        /////operations
                     }
                     });
                     alertbox.setNegativeButton("No", new
                     DialogInterface.OnClickListener() {
                     public void onClick(DialogInterface arg0, int arg1) {

                     }
                     });
                     alertbox.show();

        } 
```

# node.js - Nodejs：跨流星共享会话和作为单独实例运行的快速应用程序

> ID：15653387
> 
> 赞同：1
> 
> 时间：2013-03-27T07:02:29.750
> 
> 标签：node.js, meteor, kue

基本上，用户使用 accounts-ui 包登录在 localhost:30000 上运行的流星应用程序。Express 应用程序在 localhost:34444 上运行。

在某些时候，用户将需要使用 express 应用程序（实际上是 Kue），我想避免让用户登录两次。

两个实例都在同一个域上运行，只是端口不同。

我的最终目标是让从另一个 Web 服务器实例（在本例中为流星）登录的用户可以访问作业队列管理，所有这些都在同一个域中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:56:47.193

为此使用 Redis。快速简单。如果您打算使用 Memcached（以某种方式更容易），您可能会遇到竞速条件问题，因为 memcached 没有锁定机制

# highcharts - 如何在 IE 浏览器中打印 Highchart 部分？

> ID：15653389
> 
> 赞同：0
> 
> 时间：2013-03-27T07:02:49.143
> 
> 标签：highcharts

我在页面的 iframe 中呈现了 highchart。Highchart 提供了打印图表部分的按钮。当我尝试打印 highchart 时，它打印了整个页面而不是打印 highchart 部分。

我只在 IE 上遇到这个问题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T13:14:02.300

请看示例：http: [//jsfiddle.net/vbptN/](http://jsfiddle.net/vbptN/)

```
<p>text content content</p>
<iframe src="http://jsfiddle.net/gTyxB/show" width="400" height="200"></iframe> 
```

哪个应该正确打印在 IE8 中。

# c - 带有 ttyS 的 write() 是非阻塞的

> ID：15653393
> 
> 赞同：0
> 
> 时间：2013-03-27T07:03:00.437
> 
> 标签：c, linux, tty

我的问题是——你如何在 uCLinux 2.6.21 中同步调用 write()，即在发送结束之前调用没有完成？现在我有以下代码：

```
//...
fd = open (PORT, O_RDWR | O_SYNC)
//...

FIO3CLR |= 0x30000000; // RTS = 0 (enable transfer)
write (fd, "A", 1) // pass
FIO3SET |= 0x30000000; // RTS = 1 (disable transfer) 
```

命令`FIO3SET |= 0x30000000;`在调用 后几乎立即开始执行`write()`，因为它是不可取的任务。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:19:36.057

tcdrain() 一直等待，直到写入 fd 引用的对象的所有输出都已传输完毕。它解决了我的问题 [C read call blocking on serial port operation](https://stackoverflow.com/questions/7396255/c-read-call-blocking-on-serial-port-operation?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:23:53.303

我的猜测是您应该设置 TTY 属性，并且如果您设置了属性，Linux 内核将执行 RTS/CTS 处理。有关完整示例，请参见[http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html](http://www.tldp.org/HOWTO/Serial-Programming-HOWTO/x115.html)。我猜想回答你问题的部分是这样的：

```
newtio.c_cflag = BAUDRATE | CRTSCTS | CS8 | CLOCAL | CREAD; // CRTSCTS is set here
//...
tcsetattr(fd,TCSANOW,&newtio); 
```

# android - 自定义 ListView 的 onClickListener

> ID：15653396
> 
> 赞同：1
> 
> 时间：2013-03-27T07:03:29.333
> 
> 标签：android, android-listview, onclicklistener

我在将 onClickListener 添加到我的自定义列表适配器时遇到问题，代码如下。onListItemClick 的实现与使用常规 listView 的 a 相同，但只要单击项目，什么都不会发生，除了 LogCat 中出现“unregisterListener .....”。

任何帮助将不胜感激。

MyListAdapter.java

```
import android.app.Activity;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class MyListAdapter extends ArrayAdapter<String> {
    private final Activity context;
    private final String[] names;

    static class ViewHolder {
        public Button button;
        public ImageButton imageButton;
        public ImageButton imageButton2;
    }

    public MyListAdapter(Activity context, String[] names) {
        super(context, R.layout.custom_list_item, names);
        this.context = context;
        this.names = names;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = context.getLayoutInflater();
            rowView = inflater.inflate(R.layout.custom_list_item, null);
            ViewHolder viewHolder = new ViewHolder();
            viewHolder.button = (Button) rowView.findViewById(R.id.txtTitle);
            viewHolder.imageButton = (ImageButton) rowView.findViewById(R.id.moreInfo);
            viewHolder.imageButton2 = (ImageButton) rowView.findViewById(R.id.imgArrow);
            rowView.setTag(viewHolder);
        }

        ViewHolder holder = (ViewHolder) rowView.getTag();
        String s = names[position];
        holder.button.setText(s);
        holder.imageButton.setImageResource(R.drawable.more);
        holder.imageButton2.setImageResource(R.drawable.arrow);

        return rowView;
    }
} 
```

customer_list_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:padding="10dp" >

    <ImageButton
        android:id="@+id/moreInfo"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:background="@android:color/transparent"
        android:contentDescription="@string/more_info"
        android:gravity="center_vertical"
        android:src="@drawable/more" />

    <Button
        android:id="@+id/txtTitle"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginTop="5dp"
        android:layout_weight="1"
        android:background="@android:color/transparent"
        android:gravity="center_vertical"
        android:textColor="#000000"
        android:textIsSelectable="true"
        android:textSize="22sp"
        android:textStyle="bold" />

    <ImageButton
        android:id="@+id/imgArrow"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_marginBottom="5dp"
        android:layout_marginRight="15dp"
        android:layout_marginTop="5dp"
        android:background="@android:color/transparent"
        android:contentDescription="@string/select_trick"
        android:gravity="center_vertical"
        android:src="@drawable/arrow" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T07:11:10.777

要在箭头按钮上添加 onClickListener，像这样编写新的类点击器

```
public class clicker implements View.OnClickListener
{
    int position=0;

    /*------- Constructor for storing position on which click event triggered  ----------*/
    public clicker(int pos)
    {
        position=pos;  //this will be position of selected item in listview.
    }

    public void onClick(View v)
    {
        //Do your operation
    }

} 
```

在 getView 方法中调用此 Clicker，

```
 holder.imageButton2.setOnClickListener(new clicker(position)); 
```

对更多信息按钮使用相同的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:10:09.850

为什么不设置一个`OnClickListener`inside `getView()`？

```
public View getView(int position, View convertView, ViewGroup parent) {
    ...

    viewHolder.imageButton.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {
          }
    };
    viewHolder.imageButton2.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {
          }
    };
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-27T07:07:34.350

你可以加

```
android:descendantFocusability="blocksDescendants" 
```

在列表行布局的父线性布局中，您的列表行将被点击

# python - 为什么我需要制作另一个文件句柄才能再次读取同一个文件？

> ID：15653404
> 
> 赞同：2
> 
> 时间：2013-03-27T07:04:07.790
> 
> 标签：python, file-io, python-3.x

我在用 python 玩文件，所以我写了这个：

```
 ifh=open('2.txt','r')  
   for line in ifh:  
     print(line,end="")
 print("Done")
 #ifh=open('2.txt','r')
    for line in ifh:
      print(line) 
```

只有当我取消注释第二个文件句柄时，第二个循环才会打印文件。
这是为什么？
如果没有第二个，它不应该工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:06:00.603

因为您需要使用[以下](http://docs.python.org/2/library/stdtypes.html#file.seek)方法返回文件的开头：

```
ifh.seek(0) 
```

当您`open`再次读取文件时，它将文件的当前位置重置为开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:06:14.953

这是因为在第一个循环完成后，`ifh`的当前位置在文件末尾。那时，没有更多数据要读取。

要再次读取数据，您需要使用[`ifh.seek(0)`](http://docs.python.org/3/library/stdtypes.html#file.seek)移回文件的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:06:17.290

当您打印时，您位于文件的末尾`Done`。你可以做一个`ifh.seek(0)`重新开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:07:22.580

做：`ifh.seek(0)`在第二个循环之前。

这是因为您从文件中读取了所有行，并且`seek`方法转到文件的第一个字节，并且您可以再次读取它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T07:14:47.667

您还可以在 for 循环之前创建一个闭环。

```
while True:
    for line in ifh:
        print(line,end=" ") 
```

# xml - 使用 PHPExcel 添加 XML 映射 excel 文件

> ID：15653410
> 
> 赞同：0
> 
> 时间：2013-03-27T07:04:33.240
> 
> 标签：xml, mapping, phpexcel

我正在使用 PHPExcel 从我们的数据库中导出数据，从数据库中检索到的数据在我们将它们写入文件之前首先被格式化。输出文件类型为“.xlsx”。现在，如何将 XML 映射附加到我的 excel 文件的标题中。

这是场景，

我从我们的数据库中检索数据，然后循环每个数据以进行写入。

现在，客户要求我将 XML 映射添加到我的文件中，因为系统不接受没有映射的 excel 文件。

先感谢您。！

PS：请对我好点，因为我是新手。非常感谢！

# file - 自定义 Joomla 组件的文件上传表单

> ID：15653414
> 
> 赞同：5
> 
> 时间：2013-03-27T07:04:59.257
> 
> 标签：file, file-upload, joomla, joomla2.5

我的表单中有一个文件类型的字段。当用户点击保存图标时，我自然想将文件上传到服务器，并将文件名保存在数据库中。我尝试通过回显文件名来测试它，但它似乎不起作用。另外，如何将文件名添加到数据库中？是在模型中完成的吗？谢谢！

控制器/customcom.php

```
jimport('joomla.filesystem.file');     
class CustomComControllerCustomCom extends JControllerForm
        {
            function save()
            {
                $file = JRequest::getVar('img_url', null, 'files', 'array');

                $filename = JFile::makeSafe($file['name']);

                echo $filename;
                }
        } 
```

模型/表单/customcom.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <form enctype="multipart/form-data">
            <fieldset>
                  <field
                        name="img_url"
                        type="file"
                        label="Image upload"
                        description=""
                        size="40"
                        class="inputbox"
                        default=""
                />
            </fieldset>
   </form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T08:01:19.497

刚刚想通了。

正确的方法是

```
$jinput = JFactory::getApplication()->input;
$files = $jinput->files->get('jform');
$file = $files['img_url']; 
```

这应该够了吧。然后 $file 数组包含以下键：

*   错误
*   姓名
*   尺寸
*   tmp_name
*   类型

我删除了我原来的答案，因为它具有误导性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T09:17:13.540

从媒体经理那里获得灵感：

*   [媒体控制器文件](https://github.com/joomla/joomla-cms/blob/master/administrator/components/com_media/controllers/file.php)
*   [MediaHelper::canUpload](https://github.com/joomla/joomla-cms/blob/master/administrator/components/com_media/helpers/media.php#L48)

请注意，这个组件已经很老了（正在准备重构）

```
// Import dependencies
jimport('joomla.filesystem.file')

// Get input
$input = JFactory::getApplication()->input;

// Get uploaded file info
$file_info = $input->files->get('img_url', null);

// This will hold error
$error = null;

// Check if there was upload at all, mime is correct, file size, XSS, whatever...
if (!MycomponentHelper::canUpload($file_info, $error)
{
    $this->setError('problem: ' . $error);
    return false;
}

// Move uploaded file destination
JFile::upload($file_info['tmp_name'], $destination); 
```

# visual-studio-2010 - 一键执行几个 nuget 包管理器控制台命令

> ID：15653418
> 
> 赞同：1
> 
> 时间：2013-03-27T07:05:50.340
> 
> 标签：visual-studio-2010, powershell, nuget

我`Update-Database`在 PowerShell 脚本文件中有几个命令。此文件通过输入脚本文件的名称使用 NuGet 包管理器控制台运行。

是否可以运行相同的脚本，但*无需*手动打开包管理器控制台？脚本下拉菜单中的一个额外项目可能包含“使用 NuGet PM 运行”？

# json - 使用perl解析json文件

> ID：15653419
> 
> 赞同：5
> 
> 时间：2013-03-27T07:05:57.837
> 
> 标签：json, perl

我正在尝试在 perl 中解析一个 json 文件。我想提取键“名称”及其对应的值。我的文件看起来像这样

```
{
 "data":[
    {
        "name":"ABC",
        "id":"123",
    },
    {
        "name":"PQR",
        "id":"456",
    },
    {
        "name":"XYZ",
        "id":"789",
    }
]
} 
```

我正在尝试使用以下代码：

```
#/usr/lib/perl
use lib qw( ..);
use LWP::Simple;
use JSON;
my $filename = '/file.txt';
my $data;
if (open (my $json_str, $filename))
{
  local $/ = undef;
  my $json = JSON->new;
  $data = $json->decode(<$json_str>);
  close($json_stream);
}
print $data->{name}; 
```

但我没有得到任何输出。

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-27T07:09:55.013

您的 json 文件无效。

第 5,10,15 行不应以逗号结尾，因为这是这些哈希的最后一个键/值对。

修复该问题后，这是您的代码版本，可为您提供预期结果：

```
#/usr/lib/perl
use strict;
use warnings;

use lib qw(..);

use JSON qw( );

my $filename = 'file.txt';

my $json_text = do {
   open(my $json_fh, "<:encoding(UTF-8)", $filename)
      or die("Can't open \"$filename\": $!\n");
   local $/;
   <$json_fh>
};

my $json = JSON->new;
my $data = $json->decode($json_text);

for ( @{$data->{data}} ) {
   print $_->{name}."\n";
} 
```

一些问题：

*   您正在使用`$json_stream`和`$json_str`。您打算`$json_stream`在所有地方使用来表示文件句柄
*   `$data->{name}`应该应用于 .json 文件中数组的所有成员，而不是 json 本身。所以你需要先遍历它们

调试时，请确保您的 json 有效。通过[jsonlint.com](http://jsonlint.com/)或cpan 的[JSON::XS](https://metacpan.org/module/JSON::XS)附带的[json_xs](http://cpansearch.perl.org/src/MLEHMANN/JSON-XS-2.33/bin/json_xs)实用程序。

JSON 可以描述复杂的数据结构，因此当您将其解析为 Perl 时，您也会得到一个复杂的数据结构。尝试首先使用[Data::Dumper](https://metacpan.org/module/Data::Dumper)或[Data::Printer](https://metacpan.org/module/Data::Printer)或[Data::TreeDumper查看数据结构](https://metacpan.org/module/Data::TreeDumper)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T07:23:07.797

除了在 JSON 字符串中有一个额外的逗号之外，您还没有引用正确的值。始终使用

```
use strict; 
use warnings; 
```

——他们会告诉你出了什么问题。在这种情况下，您正在打印一个未定义的值`$data->{name}`，一个尚未分配值的变量。如果您在其中打印解码的结构，`Data::Dumper`则如下所示：

```
$VAR1 = {
          'data' => [
                      {
                        'name' => 'ABC',
                        'id' => '123'
                      },
                      {
                        'name' => 'PQR',
                        'id' => '456'
                      },
                      {
                        'name' => 'XYZ',
                        'id' => '789'
                      }
                    ]
        }; 
```

正如你所看到的，`$data`它实际上是一个哈希引用，其中第一个也是唯一一个键被调用`'data'`，它的值是一个包含三个元素的数组，每个元素都包含一个哈希引用。因此，为了打印这些元素，您可以执行以下操作：

```
print $data->{data}[0]{name};   # prints ABC

my $aref = $data->{data};
for my $element (@$aref) {
    print $element->{name};     # prints ABC, PQR, XYZ
} 
```

# php - 编辑配置文件：使用 ajax 和 javascript 检查单选按钮

> ID：15653420
> 
> 赞同：0
> 
> 时间：2013-03-27T07:05:59.527
> 
> 标签：php, javascript, jquery, radio-button

**级别：初学者**

我试图在 javascript 文件中使用 ajax 查看我的用户配置文件数据从数据库到 html 页面，以便用户可以更新它。我可以用 ajax 查看配置文件，也可以用 javascript 更新它。但**不能更改带有单选按钮的信息。**当我选择另一个值时，它会选择**"multiple value"**，因此无法更新，因为他们说其中有一个空值。

**如何编辑/更改单选按钮（jenis kelamin 和 golongan darah）的值，而不会在数据库更新中出现多个值和错误？**

我不知道它有什么问题。你可以帮帮我吗？这是我的代码。

**谢谢你。**

我在服务器端的 php 代码：**newpass.php 作为控制器**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class newpass extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->load->model('newpass_model','npmod');
    }

    //to get the user profile
    public function read() {
        $iduser = $this->session->userdata('id');
        if(isset($iduser))
        echo json_encode($this->npmod->getByIdUser($iduser));
    }

    //to edit the user profile
    public function update() {
        $s = $this->npmod->update();
        echo $s;
    }       
}
?> 
```

我在服务器端的 php 代码：**newpass_model.php 作为模型**

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class newpass_model extends CI_Model {

    //to get the user profile
    function getByIdUser($iduser) {
        $iduser = intval( $iduser );

        $query = $this->db->where('iduser',$iduser)->limit( 1 )->get('pasien');

        if( $query->num_rows() > 0 ) {
            //return $query->row();
            $row = $query->row();

            $tgl = $row->tgllahir;
            $myDateTime = DateTime::createFromFormat('Y-m-d', $tgl);
            $newDateString = $myDateTime->format('d-m-Y');

            $data = array(
            'nama' => $row->nama,
            'tempatlahir' => $row->tempatlahir,
            'tgllahir' => $newDateString,
            'jeniskelamin' => $row->jeniskelamin,
            'tinggi_badan' => $row->tinggi_badan,
            'berat_badan' => $row->berat_badan,
            'goldarah' => $row->goldarah,
            'kontak' => $row->kontak,
            'nokontak_kel' => $row->nokontak_kel,
            'email_kel' => $row->email_kel
            );
            return $data;

        } else {
            return array();
        }
    }   

    //to edit the user profile
    public function update() {  
    $iduser = $this->session->userdata('id');

    $tgl = $this->input->post('tanggal');
    $myDateTime = DateTime::createFromFormat('d-m-Y', $tgl);
    $newDateString = $myDateTime->format('Y-m-d');  

    $jkl = $this->input->post('jeniskelaminL');
    $jkp = $this->input->post('jeniskelaminP');
    if($jkl==''){
        $jk=$jkp;
    }else{
        $jk=$jkl;
    }
    $golA = $this->input->post('golonganA');
    $golB = $this->input->post('golonganB');
    $golAB = $this->input->post('golonganAB');
    $golO = $this->input->post('golonganO');

    if($golA!=''){
        $gol=$golA;
    }else if($golB!=''){
        $gol=$golB;
    }else if($golAB!=''){
        $gol=$golAB;
    }else {
        $gol=$golO;
    }

        $data = array(
            'nama' => $this->input->post('nama'),
            'tempatlahir' => $this->input->post('tempat'),
            'tgllahir' => $newDateString,
            'jeniskelamin' => $jk,
            'tinggi_badan' => $this->input->post('tinggi'),
            'berat_badan' => $this->input->post('berat'),
            'goldarah' => $gol,
            'kontak' => $this->input->post('kontak'),
            'nokontak_kel' => $this->input->post('kontak_kel'),
            'email_kel' => $this->input->post('kontak_em')
            );

        if($this->input->post('nama')=='' || $this->input->post('tempat')=='' || $newDateString=='' || $jk=='' || 
        $this->input->post('tinggi')=='' || $this->input->post('berat')=='' || $gol=='' || $this->input->post('kontak')=='' ||
        $this->input->post('kontak_kel')=='' || $this->input->post('kontak_em')=='')
        {
            echo "0";           
        }
        else
        {
            $this->db->where('iduser',$iduser);
            $this->db->update('pasien',$data);
            if ($this->db->affected_rows() >= '1') 
            {
            echo "1"; 
            }else{
            echo "0"; 
            }

        }

   }
}
?> 
```

我在客户端的javascript代码：**editprofile.js**

```
/*Don't forget to add set_ip.js and jquery before you use this script in HTML page to make it work*/
var urlini = seturl();
var part= 'newpass/';

var readUrl   = urlini+part+'read';    

$( function() {  
    readUsers();
}); //end document ready

//to update profile
function update_profile() {
    alert("click tombol simpan");
    name = /^([-a-z0-9_-]{5,50})+$/i.test($("#nama").val());
    bb = /^([-0-9_-])+$/i.test($("#berat").val());

    var form_reg =  $("input").val();
    if(form_reg == "")
    {
        alert("Semua data harus diisi.");
    }
    else if(!name || !bb)
    {
        alert("Terdapat kesalahan atau data kosong pada pengisian data.\nPastikan password Anda sesuai.");
    }
    else
    {       
        $.post(urlini+part+'update',
            $('#edit_profile').serialize(),function(msg){
            if(msg == '1')
            {               
                alert("Data berhasil disimpan!");
                window.location="home.html";
            }
            else if(msg == '0')
            {
                alert("Masih ada data yang kosong.");
            }
        });
    }
}

function readUsers() {
$.ajax({
        url: readUrl,
        dataType: 'json',
        type: 'GET',
        success: function( response ) {

                $( '#nama' ).val( response.nama);
                $( '#tempat' ).val( response.tempatlahir);
                $( '#tanggal' ).val( response.tgllahir);
            if(response.jeniskelamin=="L"){
                $('input:radio[name=jeniskelaminL]')[0].checked = true;             
            }else{
                $('input:radio[name=jeniskelaminP]')[0].checked = true;
            }   
                $( '#tinggi' ).val( response.tinggi_badan);
                $( '#berat' ).val( response.berat_badan);
            if(response.goldarah=='A'){
                $('input:radio[name=golonganA]')[0].checked = true;             
            }else if(response.goldarah=='B'){
                $('input:radio[name=golonganB]')[0].checked = true;
            }else if(response.goldarah=='AB'){
                $('input:radio[name=golonganAB]')[0].checked = true;
            }else{
                $('input:radio[name=golonganO]')[0].checked = true;
            }
                $( '#kontak' ).val( response.kontak);
                $( '#kontak_kel' ).val( response.nokontak_kel);
                $( '#kontak_em' ).val( response.email_kel);
                //--- assign id to hidden field ---
                $( '#userId' ).val( response.iduser );
            }
    });
} // end readUsers 
```

我在客户端的 html 代码：**settings.html**

```
<!DOCTYPE HTML>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" type="text/css" href="css/style1.css" />

 <link href="date/kendo.common.min.css" rel="stylesheet">
    <link href="date/kendo.default.min.css" rel="stylesheet">

    <script src="date/js/jquery.min.js"></script>
    <script src="date/js/kendo.web.min.js"></script>
    <script src="date/js/console.js"></script>
    <script src="jq/proses/set_ip.js"></script>
    <script src="jq/proses/editprofile/editprofile.js"></script>
    <script src="jq/proses/script.js"></script>

<script>
        $(document).ready(function() {
        // create DatePicker from input HTML element
        $("#tanggal").kendoDatePicker({
        start: "date",
        depth: "year",
        format: "dd/MM/yyyy",
        });
    });
    </script>
<title>edc - e diabet consult</title>
</head>
<body>
<h1 align="center">Edit Profile</h1>
<p align="center" class="navigation">
<a href="home.html" title="Kembali ke CPanel">
<img src="ico/home.png">
</a>
<a href="pengaturan.html" title="Change Password">
<img src="ico/pass.png">
</a>
<a href="ranges.html" title="Set Target Range">
<img src="ico/setting.png">
</a>
</p>
<div id="updateDialog">
<form id="edit_profile" action="">
<p width="50%" align="center">
<strong>Nama Pasien</strong><br>
<input type="text" maxlength="350" id="nama" name="nama"><br>

<strong>Tempat Lahir</strong><br>
<input type="text" maxlength="350" id="tempat" name="tempat"><br>

<strong>Tanggal Lahir</strong><br>
<input type="text" maxlength="350" id="tanggal" name="tanggal" value="01-02-2013"><br>
<br>
<strong>Jenis Kelamin</strong><br>
<input class="float" type="radio" id="jeniskelaminL" name="jeniskelaminL" value="L">Laki-Laki 
<input class="float" type="radio" id="jeniskelaminP" name="jeniskelaminP" value="P">Perempuan<br><br>

<strong>Tinggi Badan (cm)</strong><br>
<input type="text" id="tinggi" name="tinggi"><br>

<strong>Berat Badan (kg)</strong><br>
<input type="text" id="berat" name="berat" value=''><br>

<strong>Golongan Darah</strong><br>
<input class="float" type="radio" id="golonganA" name="golonganA" value="A">A 
<input class="float" type="radio" id="golonganB" name="golonganB" value="B">B
<input class="float" type="radio" id="golonganAB" name="golonganAB" value="AB">AB
<input class="float" type="radio" id="golonganO" name="golonganO" value="O">O<br>
<br>

<strong>Kontak Pasien</strong><br>
<input type="text" id="kontak" name="kontak" value=''><br>

<strong>Kontak Keluarga</strong><br><br>
<strong>No.Telepon</strong><br>
<input type="text" id="kontak_kel" name="kontak_kel" value=''><br>

<strong>Email</strong><br>
<input type="text" id="kontak_em" name="kontak_em" value=''><br>

<input type="button" value="Simpan" onclick="update_profile()" id="simpan" class="button"/>
<input type="reset" value="Reset" class="button">

</p>
<br><br/>
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:09:54.537

不确定我是否理解了这个问题，但如果您希望用户只选择一个值，则单选按钮应该具有相同的名称。

例如：

```
<input class="float" type="radio" id="golonganA" name="golongan" value="A">A 
<input class="float" type="radio" id="golonganB" name="golongan" value="B">B
<input class="float" type="radio" id="golonganAB" name="golongan" value="AB">AB
<input class="float" type="radio" id="golonganO" name="golongan" value="O">O<br> 
```

现在只能为“golongan”选择 1 个值，您可以像这样获得值（A、B、AB 或 O）：

```
$gol = $this->input->post('golongan') 
```

在 javascript 中，设置正确的单选按钮，如下所示：

```
$('input:radio[name=golongan][value='+response.goldarah+']')[0].checked = true; 
```

# javascript - jQuery 追加功能在 Internet Explorer 8 中不起作用

> ID：15653424
> 
> 赞同：2
> 
> 时间：2013-03-27T07:06:03.000
> 
> 标签：javascript, jquery, internet-explorer-8, append

这是我的代码-

```
$("body").append("<div>" +
                        "<ul>" +
                            "<li>" +
                                "<a href='javascript:void(0)' onclick='add()'>Add</a>" +
                            "</li>" +
                            "<li>" +
                                "<a href='javascript:void(0)' onclick='edit()'>Edit</a>" +
                            "</li>" +
                            "<li>" +
                                "<a href='javascript:void(0)' onclick='delete()'>Delete</a>" +
                            "</li>" +
                        "</ul>" +
                    "</div>"); 
```

在 IE8 中我收到以下错误 - 网页错误详细信息

```
User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)
Timestamp: Wed, 27 Mar 2013 07:03:53 UTC

Message: HTML Parsing Error: Unable to modify the parent container element before the child element is closed (KB927917)
Line: 0
Char: 0
Code: 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T22:47:55.567

对我来说，如果要附加的元素是输入，则附加不起作用。为其他元素工作。

例子

```
<td id="V_DepTOTd"><input type="text" id="V_DepTO" /></td> 
```

**没用**

```
$("#V_DepTO").append("`<input type='hidden' id='elementSelected' />`"); 
```

js 错误：意外的调用方法或属性访问

**工作**

```
$("#V_DepTOTd").append("`<input type='hidden' id='elementSelected' />`"); 
```

在 IE8 和 jquery.min.js 1.9.1 中测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T07:26:58.807

您需要在页面加载完成后执行此操作（因为 IE8 需要时间来呈现并执行 JavaScript）：

```
$(document).ready(function()
{
   $("body").append("<div>" +
                    "<ul>" +
                        "<li>" +
                            "<a href='javascript:void(0)' onclick='add()'>Add</a>" +
                        "</li>" +
                        "<li>" +
                            "<a href='javascript:void(0)' onclick='edit()'>Edit</a>" +
                        "</li>" +
                        "<li>" +
                            "<a href='javascript:void(0)' onclick='delete()'>Delete</a>" +
                        "</li>" +
                    "</ul>" +
                "</div>");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:27:47.960

我的建议是，转储该代码，维护起来会很糟糕。Plus`append`采用原始 HTML。试试这个我认为“正确”的方法：

```
// All your functions organized in an object
var actions = {
  add: function() {  },
  edit: function() {  },
  delete: function() {  }
};

// Generate necessary html
var items = [];
for (var a in actions) {
  items.push('<li data-item="'+ a +'"><a href="#"></a></li>');
}

// Handle events 
var $items = $(items.join('')).click(function(e) {
  e.preventDefault(); // similar to "javascript:void"
  actions[$(this).data('item')]();
});

// Append to DOM
$('body').append($('<div><ul></ul></div>').find('ul').append($items))); 
```

这将更容易维护，因为它现在都是动态的。我建议对您的项目也使用有意义的类，即。“编辑”、“添加”、“删除”，因此您可以更轻松地在 CSS 中定位它们。

# yii - 64 位服务器的 Yii 框架错误

> ID：15653429
> 
> 赞同：0
> 
> 时间：2013-03-27T07:06:18.613
> 
> 标签：yii, 64-bit

我用 Yii 框架开发了这个网站。它在 32 位服务器上工作正常。

当我在 64 位服务器上安装相同的代码时，它显示如下错误：

```
PHP notice

Undefined variable: id

D:\wamp\www\mysite\protected\views\site\inner.php(46)

34                     <option value="<?php echo Yii::app()->request->baseUrl; ?>/aboutus">About Us</option>
35                     <option value="<?php echo $contactlink; ?>">Contact Us</option>
36                    <option value="<?php echo Yii::app()->request->baseUrl; ?>/fundraising">Fundraising</option>
37                     <option value="<?php echo Yii::app()->request->baseUrl; ?>/testimonials">Testimonials</option>
38             </select>
39             </div>
40                     <script type="text/javascript">
41 //Redirect the user to registration process
42 $("#free1").click(function() {
43 var val=1;
44       $.ajax({
45         type: 'POST',
46         url: '<?php echo CController::createUrl('site/sessionsetting') ?>?val='+val+'&id=<?php echo $id; ?>&mail=<?php echo $mailicon; ?>',
47         success: function(data){
48             //alert(data);
49             if(data == 'test1')
50             {
51                 window.location.href="<?php echo Yii::app()->request->baseUrl; ?>/registernow";
52             }
53             if(data == 'test')
54             {
55                 window.location.href="<?php echo Yii::app()->request->baseUrl; ?>/registernow?id=<?php echo $id; ?>&mail=<?php echo $mailicon; ?>";
56             }
57         }
58       }); 
```

这里，$id 是在某些情况下使用而不在其他情况下使用的查询字符串。我在谷歌搜索。但没有得到解决方案。请建议修复错误。

# jsf-2 - primefaces p：对话框表单提交时在ui：repeat中不调用复合组件设置器

> ID：15653433
> 
> 赞同：1
> 
> 时间：2013-03-27T07:06:45.153
> 
> 标签：jsf-2, primefaces, composite-component

**编辑：问题是当复合组件包装在 ui:repeat 或 h:datatable 以及 ap:dialog 中时**

使用[http://balusc.blogspot.de/2013/01/composite-component-with-multiple-input.html](http://balusc.blogspot.de/2013/01/composite-component-with-multiple-input.html)我在 ap:dialog 中提交包含复合组件的表单似乎有问题。

调用普通 p:boolean 和此类字段的设置器，但不会调用来自复合组件的设置器，尽管 getSubmittedvalue 是。

初始值为空，当不在模态 p:dialog 中时，同样的工作。

我可以在调试/配置文件模式下清楚地看到它。

```
INFO: Initializing Mojarra 2.1.6 (SNAPSHOT 20111206) for context '/webclient'
INFO: Running on PrimeFaces 3.5
INFO: Running on PrimeFaces Extensions 0.6.3 
```

编辑：也尝试将初始值设置为默认值，即不为空。同样的事情发生了......二传手不会被调用。

我必须再次强调，当不在 p:dialog 中时，相同的东西有效（如果这很重要，appendtobody 为 true）。

**SSCCE**

控制器：

```
@ManagedBean
@ViewScoped
public class TestController implements Serializable {

List<TestSelect> testbeanList;

List<BeanObject> beanList;

    @PostConstruct
void init() {

    testbeanList = new ArrayList<TestSelect>() {
        {
            add(new TestSelect("km"));
            add(new TestSelect("g"));
            add(new TestSelect("lbs"));

        }
    };

    beanList = new ArrayList<BeanObject>() {
        {
            add(new BeanObject(2.0d, "lbs"));
            add(new BeanObject(3.0d, "g"));
            add(new BeanObject(4.0d, "km"));

        }
    };

      }

    public List<TestSelect> getTestbeanList() {
    return testbeanList;
}

public void setTestbeanList(List<TestSelect> testbeanList) {
    this.testbeanList = testbeanList;
}

    public BeanObject getBeanObject() {
    return BeanObject;
}

public void setBeanObject(BeanObject BeanObject) {
    this.BeanObject = BeanObject;
}

} 
```

豆：

```
public class BeanObject {
double val;
String type;

public BeanObject(double val, String type) {
    super();
    this.val = val;
    this.type = type;
}
public double getVal() {
    return val;
}
public void setVal(double val) {
    this.val = val;
}
public String getType() {
    return type;
}
public void setType(String type) {
    this.type = type;
}

} 
```

小面：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
     >

    <h:head>

    </h:head>

    <h:body>

    <p:dialog widgetVar="dlg" appendToBody="true">
    <h:form>
    <ui:repeat var="uom" value="#{testController.beanList}">
            <usb:uom value="#{uom}" list="#{testController.testBeanList}"/>
    </ui:repeat>
    <p:commandButton process="@form" action="null" value="submit" />
    </h:form>
    </p:dialog>
     <h:form>
    <p:commandButton onclick="dlg.show();" value="show dlg" />
    </h:form>
    </h:body>
    </html> 
```

面组件：

@FacesComponent("testComponent") 公共类 TestComponent 扩展 UIInput 实现 NamingContainer {

```
 /** The Constant LOGGER. */
    private static final Logger LOGGER = Logger.getLogger(TestComponent.class);

    // Fields
    // -------------------------------------------------------------------------------------

    /** The measure. */
    private UIInput measure;

    /** The unit. */
    private UISelectOne unit;

    // Actions
    // ------------------------------------------------------------------------------------

    /*
     * (non-Javadoc)
     * 
     * @see javax.faces.component.UIInput#getFamily()
     */
    /**
     * Gets the family.
     * 
     * @return the family
     */
    @Override
    public String getFamily() {
        return UINamingContainer.COMPONENT_FAMILY;
    }

    /*
     * (non-Javadoc)
     * 
     * @see
     * javax.faces.component.UIComponent#encodeAll(javax.faces.context.FacesContext
     * )
     */
    /**
     * Encode all.
     * 
     * @param context
     *            the context
     * @throws IOException
     *             Signals that an I/O exception has occurred.
     */
    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("encodeAll BEGIN");
        }
        Object testTest = getAttributeValue("value", "");
        String val = null;

        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("testTest -> " + testTest.toString());
        }

        if (testTest instanceof BeanObject) {
            val = testTest.toString();
        } else {
            val = (String) testTest;
        }

        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("val -> " + val);
        }

        if (!val.equals("")) {

            String[] testSplitted = val.split(" ");

            if (LOGGER.isDebugEnabled()) {
                LOGGER.debug("testSplitted -> " + testSplitted);
                for (int i = 0; i < testSplitted.length; i++) {
                    LOGGER.debug("testSplitted it -> " + testSplitted[i]);
                }
            }

            measure.setValue(testSplitted[0]);
            unit.setValue(testSplitted[1]);

        }
        super.encodeBegin(context);
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("encodeAll END");
        }
    }

    /**
     * Gets the converted value.
     * 
     * @param context
     *            the context
     * @param submittedValue
     *            the submitted value
     * @return the converted value
     */
    @Override
    protected Object getConvertedValue(FacesContext context, Object submittedValue) {
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("getConvertedValue()");
        }
        String[] tmpVal = ((String) getSubmittedValue()).split(" ");
        if (LOGGER.isDebugEnabled()) {
            for (int i = 0; i < tmpVal.length; i++) {
                LOGGER.debug("unit and val -> " + i + " -> " + tmpVal[i]);
            }
        }
        if (tmpVal == null || Strings.isNullOrEmpty(tmpVal[0])) {
            return null;
        }

        BeanObject test = new BeanObject(Double.parseDouble(tmpVal[0]), tmpVal[1]);

        return test;
    }

    /*
     * (non-Javadoc)
     * 
     * @see javax.faces.component.UIInput#getSubmittedValue()
     */
    /**
     * Gets the submitted value.
     * 
     * @return the submitted value
     */
    @Override
    public Object getSubmittedValue() {
        if (Strings.isNullOrEmpty((String) getMeasure().getValue())) {
            return null;
        }

        if (Strings.isNullOrEmpty((String) getUnit().getValue())) {
            Object value = getAttributeValue("value", ""); 
            if (value instanceof AttributeObject) {
                LOGGER.error("yes1");
            }
            if (value instanceof IAttributeObject) {
                LOGGER.error("yes2");
            }
            LOGGER.error("getSubmittedValue -> " + value.toString());
        }

        String submitVal = (String) getMeasure().getValue() + " " + (String) getUnit().getValue();
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("getSubmittedValue()" + submitVal);
        }
        return submitVal;

    }

    // Helpers
    // ------------------------------------------------------------------------------------

    /**
     * Return specified attribute value or otherwise the specified default if
     * it's null.
     * 
     * @param <T>
     *            the generic type
     * @param key
     *            the key
     * @param defaultValue
     *            the default value
     * @return the attribute value
     */
    @SuppressWarnings("unchecked")
    private <T> T getAttributeValue(String key, T defaultValue) {
        T value = (T) getAttributes().get(key);
        return (value != null) ? value : defaultValue;
    }

    // Getters/setters
    // ----------------------------------------------------------------------------

    /**
     * Gets the measure.
     * 
     * @return the measure
     */
    public UIInput getMeasure() {
        return measure;
    }

    /**
     * Gets the unit.
     * 
     * @return the unit
     */
    public UISelectOne getUnit() {
        return unit;
    }

    /**
     * Sets the unit.
     * 
     * @param unit
     *            the new unit
     */
    public void setUnit(UISelectOne unit) {
        this.unit = unit;
    }

    /**
     * Sets the measure.
     * 
     * @param measure
     *            the new measure
     */
    public void setMeasure(UIInput measure) {
        this.measure = measure;
    }

} 
```

组件面：

```
<ui:composition 
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions">

    <cc:interface componentType="testComponent">
        <cc:attribute type="java.lang.Object" name="value" required="true" />
        <cc:attribute type="java.util.List" name="list"/>
    </cc:interface>
    <cc:implementation>
        <h:panelGrid columns="3">
            <p:inputText id="measure" binding="#{cc.measure}">
                <f:ajax render="unit" />
            </p:inputText>

            <p:selectOneMenu id="unit" binding="#{cc.unit}">
                <f:selectItem noSelectionOption="true" itemLabel=" " itemValue="" />
                <f:selectItems value="#{cc.attrs.list}" var="option" itemLabel="#{option.getShortName()}" itemValue="#{option.getShortName()}" />
                <f:ajax render="measure" />
            </p:selectOneMenu>
        </h:panelGrid>

    </cc:implementation>
</ui:composition> 
```

助手选择bean：

```
public class TestSelect {

    private static final Logger LOGGER = Logger.getLogger(TestController.class);

    String ShortName;

    public TestSelect(String shortName) {
        super();
        ShortName = shortName;
    }

    public String getShortName() {
        return ShortName;
    }

    public void setShortName(String shortName) {
        ShortName = shortName;
    }

    @Override
    public boolean equals(Object obj) {
        if (LOGGER.isDebugEnabled()) {
            LOGGER.debug("this " + this.ShortName);
            LOGGER.debug("compared " + obj.toString());
        }

        if (this.ShortName.equals((String)obj)) {
            return true;
        }
        return false;
    }

    @Override
    public String toString() {
        return "TestSelect [ShortName=" + ShortName + "]";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:13:11.750

解决方案是几件事的组合：

*   使用 c:forEach 而不是 ui repeat（我知道它在 jsf 2 中应该是不好的做法）
*   使用 @SessionScoped 注释作为表单支持 bean（控制器）

听起来很奇怪，这两件事让问题消失了。（目前 ：）

# vb.net - 任务回调

> ID：15653434
> 
> 赞同：1
> 
> 时间：2013-03-27T07:06:48.110
> 
> 标签：vb.net, visual-studio

我使用以下代码创建了一个任务

```
For (//pls ignore the variables)
            Dim task = (New System.Threading.Tasks.TaskFactory()).StartNew(
            Sub()
                downloadFiles()
            End Sub
            )

Next 
```

该任务被创建了 n 次，并且异步工作正常。现在我不知道如何为此添加回调方法。谁能告诉我如何为此添加回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:00:02.990

Callback 的使用应该如下所示：我省略了 for...each。

```
 Private Sub StartTask_Click(sender As Object, e As RoutedEventArgs) Handles StartTask.Click
    Dim LongTask As Task = (New System.Threading.Tasks.TaskFactory).StartNew(AddressOf DoWorkAsync)
    LongTask.ContinueWith(AddressOf WorkCompleted)
    Debug.Print("")
  End Sub

  ''' <summary>
  ''' Called after DoWorkAsync Task is complete
  ''' </summary>
  ''' <remarks></remarks>
  Private Sub WorkCompleted()
    Debug.Print("completed")
  End Sub

  ''' <summary>
  ''' Called by Task
  ''' </summary>
  ''' <remarks></remarks>
  Public Sub DoWorkAsync()
    For i = 0 To 2000
      Debug.Print("test")
    Next
  End Sub 
```

# android - 将java字符串插入phonegap javascript

> ID：15653441
> 
> 赞同：0
> 
> 时间：2013-03-27T07:07:23.147
> 
> 标签：android, cordova, phonegap-plugins

我正在尝试将 java 字符串插入 phonegap javascript。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String myName = "Xxxxx";

    super.loadUrl("file:///android_asset/www/login.html");
} 
```

我只想将***myName***字符串插入*login.html*以便我可以使用来自 javascript 的字符串。有什么想法吗？

除了插件，还有其他更简单的方法吗，比如 localstorage 或其他什么？
如果必须制作一个插件，那么从这里获取这个字符串到那个插件的方法是什么？

我是phonegap和android的新手。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:51:30.757

在您的 MainActivity ：

```
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  JavaScriptInterfaceClass myInterface = new JavaScriptInterfaceClass(this, appView);
  appView.addJavascriptInterface(myInterface, "Android");

  super.loadUrl("file:///android_asset/www/login.html");
} 
```

在您的项目中创建一个用于实例化 myInterface 的新类（仅适用于 phonegap）：

```
public class JavascriptInterfaceClass {
    private WebView mAppView;
    private DroidGap mGap;

public JavascriptInterfaceClass(DroidGap gap, WebView view) {
    mAppView = view;
    mGap = gap;
}

public String getMyString() {
  String myName = 'xxxxx';
  return myName; 
```

}

在您的 Web 视图中：

```
<script type="text/javascript">
  function getString() {
      return Android.getString();
  }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:13:12.873

尝试通过查询字符串传递刺痛，例如

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String myName = "Xxxxx";

    super.loadUrl("file:///android_asset/www/login.html?name=" + myName );
} 
```

看看[here](https://stackoverflow.com/questions/647259/javascript-query-string)在javascript上使用querystring

# entity-framework - UnitOfWork - IRepository - STE

> ID：15653446
> 
> 赞同：0
> 
> 时间：2013-03-27T07:07:40.117
> 
> 标签：entity-framework, entity, repository-pattern

我正在尝试实现一个简单的 3 层应用程序，组装如下：

1 - DAL（它是一个 UnitOfWork 和 IRepository，带有 POCO 的实体（实体框架 T4））

2 - BLL（参考 DAL）

3 - UI（参考 BLL）

我阅读了很多文章，所以我决定实现一个经典的 UnitOfWork-Repository 模式，其中这些存储库不知道任何自我跟踪实体：

```
public interface IRepository<T>
{
void Attach(T entity)
{
...
} 
```

问题：如果我的组件将在 winForm 上下文中运行，则某些 UI 控件可能会更改某些实体属性，因此进一步调用 Repository 的方法为 Edit(T entity) 将是无用的，因为我的实体已经被内部对象上下文跟踪。显然，如果我在 web 上下文中运行一切正常，因为 web 平台是无状态的。一个简单的技巧可以是在每次 BLL 操作后处理我的 objectContext，但我不确定是否要使用此解决方法。所以我正在寻找一个更漂亮的解决方案来管理所有案例。

IRepository 是否应该忽略有关 STE 的任何内容？BLL 是否应该始终配置自己的内部存储库和/或单元以模拟无状态环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:58:07.377

如果您在 WinForms 中开发，为什么要模拟无状态平台？关于 Repository 和 UnitOfWork 模式，不要将它们视为严格绑定到 EntityFramework 的东西。忘记 UI 层中的上下文。这些模式独立于所使用的 ORM，因此您可以轻松切换 DAL 并更有效地测试您的应用程序。

# spring-mvc - 使用 Spring MVC 框架清理用户输入

> ID：15653448
> 
> 赞同：21
> 
> 时间：2013-03-27T07:07:57.893
> 
> 标签：spring-mvc, spring-security, xss, sql-injection

我正在使用 spring mvc 框架开发 Web 应用程序，我想知道是否有任何最好的方法来清理用户输入或常用方法来清理 springs 中的所有用户输入以避免 XSS 和 Sql 注入攻击？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-27T07:12:50.057

您可以`Filters`在 Spring 框架中使用来清理表单。过滤器将获取您的所有请求属性并在处理请求之前将它们全部清除。另一种选择是使用`JSoup`API。访问以下链接以了解更多信息。

[JSoup XSS API 的](http://jsoup.org/cookbook/cleaning-html/whitelist-sanitizer)

[过滤器方法来防止 XSS 威胁](http://jeevanpatil.wordpress.com/2011/07/22/prevention_of_xss/)

**编辑 ：**

阅读 OWASP 表以了解如何避免 XSS 和 SQL 注入。

[OWASP - 预防 XSS](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)

[OWASP - 防止 SQL 注入](https://www.owasp.org/index.php/Preventing_SQL_Injection_in_Java)

看看与 spring 3.1 集成的[HDIV](http://hdiv.org/)，它对 XSS、CSRF、数据完整性检查具有开箱即用的支持。

# image-processing - 在一组图像中识别人脸

> ID：15653452
> 
> 赞同：0
> 
> 时间：2013-03-27T07:08:18.987
> 
> 标签：image-processing, face-recognition

我目前正在寻找一种方法来在一组图像中搜索我作为起点给出的图像上存在的人脸。

它背后的基本想法是我有一个图像文件夹，例如来自聚会的图像，并且想找到自己拍摄的所有图像。因此，聚会结束后，我使用网络摄像头或类似的东西拍摄我的脸。然后库或程序遍历文件夹并将每个图像与“网络摄像头图像”进行比较。可选地，不仅可以提供一个基础图像，还可以提供多个基础图像来微调搜索。

是否有一个库不仅可以识别“图像上存在一个人”中的人脸，还可以检测该图像中的人脸，并且与其他图像相比，该人脸有 90% 的机会是一样的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:39:53.010

看看 C++ 的 OpenCV [http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html](http://docs.opencv.org/modules/contrib/doc/facerec/facerec_tutorial.html)

我已经使用并实现了一个应用程序，它可以根据预先加载的纸牌模板来识别纸牌。但是 OpenCV 也非常适合识别（因此模板化）人脸。 [http://www.youtube.com/watch?v=V7UdYzCMKvw](http://www.youtube.com/watch?v=V7UdYzCMKvw)

也许这是一个很好的起点？

# android - 我们可以直接在我们的android应用程序中访问“sysfs entry”吗？

> ID：15653453
> 
> 赞同：1
> 
> 时间：2013-03-27T07:08:28.240
> 
> 标签：android, java-native-interface, sysfs

我知道我们使用 jni 作为驱动程序的接口，它允许 android 应用程序框架与设备驱动程序通信。

但我不知道为什么我们不能直接访问应用程序中的那些 sysfs 条目的确切原因？

请详细说明。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-18T22:23:58.883

无法从应用层访问 sysfs。我试图对 sysfs 文件执行写入但失败了。

必须通过 android 中间件框架和/或 HAL 层。可以为这些服务提供 selinux 权限，允许访问 sysfs。

# codeigniter - gocart 会话到期，我想显示警报消息

> ID：15653457
> 
> 赞同：0
> 
> 时间：2013-03-27T07:08:48.903
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

在会话过期时的 gocart 中，我想显示会话已过期的警报消息。我知道会话时间将是配置文件，但是如何在会话过期时显示警报消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:49:30.623

检查会话已过期的最佳方法是检查存储在会话中的值是否存在.. 如果会话未过期...而不是警报，您可以`flashmsg`在 codeigniter 中使用来显示错误并将其重定向到其他页面..

例子。

```
 if(!$this->session->userdata('youritem'){
     flashMsg('error','not in session (session expired');
 redirect(to/wher/you /want); 
 }) 
```

# php - PHP中的正则表达式模式

> ID：15653459
> 
> 赞同：2
> 
> 时间：2013-03-27T07:08:54.387
> 
> 标签：php, regex, preg-match

请帮助找到以下案例的正确模式

简单的字符串是：

```
pdf/20120102/A1_standard.pdf
pdf/20130431/1.pdf
pdf/20110506/abcde.pdf
pdf/20131201/fff-01/02/12/-A1.pdf 
```

我需要匹配的子字符串是 A1_standard.pdf , 1.pdf, abcde.pdf , fff-01/02/12/-A1.pdf 我尝试过`///*.pdf/`作为模式，但它似乎不起作用。case 4 比较困难，因为文件名中有一个'/'，如果现在不能sloved，就忽略这个case。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:13:47.930

尝试这个 ：

```
$str  = 'pdf/20120102/A1_standard.pdf';
preg_match('/(?P<file>[\w\-]+\.pdf)$/',$str,$match);

echo "<pre>";
print_r($match);

echo $match['file']; 
```

# regex - 我需要在 Parse.com 的 Cloud Code 上将 XML 转换为 JavaScript 中的 Json

> ID：15653460
> 
> 赞同：-1
> 
> 时间：2013-03-27T07:08:58.187
> 
> 标签：regex, parse-platform

请不要评论说您无法使用正则表达式解析 XML，它可以做到，但这不是最好的方法。请不要无缘无故否定这个问题。

在 Parse.com 的云代码上，您目前无法在没有大量编码工作的情况下将 XML 转换为 json。我在以下位置找到了以下代码：http: [//killzonekid.com/worlds-smallest-fastest-xml-to-json-javascript-converter/](http://killzonekid.com/worlds-smallest-fastest-xml-to-json-javascript-converter/)

```
xml = xml.replace(/\s/g, ' ').replace(/< *\?[^>]*?\? *>/g, '').replace(/< *!--[^>]*?-- *>/g, '').replace(/< *(\/?) *(\w+\b):(\w+\b)/g, '<$1$2_$3').replace(/< *(\w+\b)([^>]*?)\/ *>/g, '< $1$2>').replace(/(\w+\b):(\w+\b) *= *"([^>]*?)"/g, '$1_$2="$3"').replace(/< *(\w+\b)((?: *\w+ *= *" *[^"]*?")+ *)>( *[^< ]*?\b.*?)< *\/ *\1 *>/g, '< $1$2 value="$3">').replace(/ *(\w+\b) *= *"([^>]*?)" */g, '< $1>$2').replace(/< *(\w+\b) *</g, '<$1>< ').replace(/> *>/g, '>').replace(/< *\/ *(\w+\b) *> *< *\1 *>/g, '').replace(/"/g, '\\"').replace(/< *(\w+\b) *>([^<>]*?)< *\/ *\1 *>/g, '"$1":"$2",').replace(/< *(\w+\b) *>([^<>]*?)< *\/ *\1 *>/g, '"$1":{$2},').replace(/< *(\w+\b) *>(?=.*?< \/\1\},\{)/g, '"$1":[{').split(/\},\{/).reverse().join('},{').replace(/< *\/ *(\w+\b) *>(?=.*?"\1":\[\{)/g, '}],').split(/\},\{/).reverse().join('},{').replace(/< \/(\w+\b)\},\{\1>/g, '},{').replace(/< *(\w+\b)[^>]*?>/g, '"$1":{').replace(/< *\/ *\w+ *>/g,'},').replace(/\} *,(?= *(\}|\]))/g, '}').replace(/] *,(?= *(\}|\]))/g, ']').replace(/" *,(?= *(\}|\]))/g, '"').replace(/ *, *$/g, ''); 
```

它实际上在将 XML 转换为 json 方面做得很好。

代码有一些怪癖。1.它弄乱了属性。

1.  它不喜欢带有连字符的名称。为了修复连字符，我将所有 \w+ 更改为 \w[\w'-] 这是最好的方法吗？

这是一个示例 XML 文档

```
 <?xml version="1.0" encoding="UTF-8" ?>
<api>
    <products total-matched="1618" records-returned="1" page-number="1">
        <product>
            <ad-id>1234</ad-id>
            <supplier-name>Window World</supplier-name>
            <supplier-category>3703703</supplier-category>
            <buy-url>http://website.com</buy-url>
            <currency>USD</currency>
            <description>Window</description>
            <image-url>http://website.com/windowa/80x80.jpg</image-url>
            <in-stock>yes</in-stock>
            <manufacturer-name>Window World</manufacturer-name>
            <name>Half Pain Glass</name>
            <price>31.95</price>
            <retail-price>87.60</retail-price>
            <sale-price>29.95</sale-price>
            <sku>5938</sku>
            <upc></upc>
        </product>
    </products>
</api> 
```

示例输出：

```
{
    "api": {
        "products": {
            "total-matched": {
                1618 "records-returned": {
                    1 "page-number": {
                        1 >
                            "product": {
                            "adid": "1234",
                            "suppliername": "Window World",
                            "suppliercategory": "3703703",
                            "buyurl": "http://website.com",
                            "currency": "USD",
                            "description": "Window",
                            "imageurl": "http://website.com/windowa/80x80.jpg",
                            "instock": "yes",
                            "manufacturername": "Window World",
                            "name": "Half Pain Glass",
                            "price": "31.95",
                            "retailprice": "87.60",
                            "saleprice": "29.95",
                            "sku": "5938",
                            "upc": ""
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:42:52.077

我的猜测是 - 查看生成的 json 的结构 - 应该没有属性。要授权它们，您需要更改很多东西，包括嵌套嵌套的 json ......
难道不能只更改：

```
<products total-matched="1618" records-returned="1" page-number="1"> 
```

至

```
<products>
  <total-matched>1618</total-matched>
  <records-returned>1</records-returned>
  <page-number>1</page-number>
  <product>... 
```

...因为它会给你你期望的属性（我猜）。

至于连字符，你的想法很好，只需将 \w 更改为 [\w-]，它应该可以工作（我很高兴承认我没有研究所有的正则表达式，所以这只是一个猜测）。\w+ 会变成 [\w-]+ 等等。

**编辑：**

您可以添加一个步骤来首先更改您的 xml。这个正则表达式应该做那部分：

```
/(<\w+[^<]*?)\s+([\w-]+)="([^"]+)">/
// asuming there is no " in your attributes' values (would be more complicated...) 
```

测试：

```
var string = '<api><products total-matched="1618" records-returned="1" page-number="1">';
var regex = /(<\w+[^<]*?)\s+([\w-]+)="([^"]+)">/;
while(string.match(regex)) string = string.replace(regex, '$1><$2>$3</$2>'); 
```

结果：

```
"<api><products><total-matched>1618</total-matched><records-returned>1</records-returned><page-number>1</page-number>" 
```

# c# - C# 抛出异常而不中断循环

> ID：15653462
> 
> 赞同：6
> 
> 时间：2013-03-27T07:09:08.303
> 
> 标签：c#, for-loop, exception-handling

```
void function() {
    try
    {
        // do something

        foreach (item in itemList)
        {
            try 
            {
                //do something
            }
            catch (Exception ex)
            {
                throw new Exception("functionB: " + ex.Message);
            }
        }
    }
    catch (Exception ex)
    {
        LogTransaction(ex.Message);
    }
} 
```

嗨，我想将 for 循环中的异常抛出给它的父级。目前当for循环出现异常时，循环会被终止。无论如何要修改它以便抛出异常但循环将继续？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T07:12:32.593

不，您不能从循环中抛出异常并继续迭代它。但是，您可以将异常保存在数组中并在循环后处理它们。像这样：

```
List<Exception> loopExceptions = new List<Exception>();
foreach (var item in itemList)
  try 
  {
    //do something
  }
  catch (Exception ex)
  {
    loopExceptions.Add(ex);
  }

foreach (var ex in loopExceptions)
  //handle them 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:10:25.527

您必须在循环内构建一个 try-catch-block 并且不要再次抛出异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:21:46.970

这个怎么样？

```
void function() {
    var IsCompleted = false;
    try
    {
        // do something

        foreach (item in itemList)
        {
            try 
            {
                //do something
            }
            catch (Exception ex)
            {
                throw new Exception("functionB: " + ex.Message);
            }
            var IsCompleted = true;
        }
    }
    catch (Exception ex)
    {
        LogTransaction(ex.Message);
    }

    If (!IsCompleted)
       function();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:28:44.800

该`throw`语法被隐式设计为中断执行，并使用 catch 语法将堆栈“冒泡”到最近的调用者。

一旦捕获到异常，就没有办法恢复循环的执行，就像（比如）经典 ASP 或 VB 脚本中那样。

关键是例外应该是罕见的。它们不应用作控制应用程序流的方法。

如果您的意图是要允许其他东西来处理错误，那么您应该构建您的代码，以便您可以传入错误处理程序。

一个例子是：

```
void Process(IEnumerable<object> data, Action<object, Exception> handleError) 
{

    foreach(var o in data) 
    { 
        try 
        { 
            // do something
        }
        catch(Exception ex)
        {
            handleError(o, ex); 
        }
    }
} 
```

像这样调用：

```
Process(data, (obj, ex) => RequeueForProcessingDueToError(obj.Id, ex.Message)); 
```

这允许您传入处理错误功能的委托。您可以通过多种方式传递委托：事件，例如成为另一个。

# mysql - 在 mysql 上进行数据库迁移的最佳解决方案？

> ID：15653463
> 
> 赞同：0
> 
> 时间：2013-03-27T07:09:11.660
> 
> 标签：mysql, database, database-migration, rails-migrations

我目前在进行迁移时面临一个问题，特别是向包含数百万条记录的现有表添加新字段需要很长时间才能完成。所以我想知道有什么特别的技巧可以让它快速迁移吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:22:30.960

要在不锁定表的情况下执行此操作，您可以做的是创建一个包含正确列的新表，从旧表中选择数据，重命名旧表，重命名新表，删除“旧重命名表”

有些像这样；

```
CREATE TABLE `table_new` LIKE `table`;
ALTER TABLE `table_new` ADD COLUMN ...;
ALTER TABLE `table_new` ADD COLUMN ...;
ALTER TABLE `table_new` ADD COLUMN ...;
INSERT INTO `table_new` SELECT x, y, z, 'newcol', 'newcol2', 'newcol3' FROM `table`
RENAME TABLE `table` TO `table_old`;
RENAME TABLE `table_new` TO `table`;
-- DROP TABLE `table_old` -- Might just leave this out for now, who knows... 
```

要考虑的另一件事可能是索引，为插入关闭它并在插入后重新启用它们，这样它们就不必一直重新计算。

# ios - 测量两个短音频相似度的最简单算法

> ID：15653466
> 
> 赞同：6
> 
> 时间：2013-03-27T07:09:19.327
> 
> 标签：ios, audio, pattern-matching, voice-recognition

问题是寻找任何开源或简单的实现来衡量 iOS 应用程序上两个音频之间的相似程度。

简单来说，音频可以用一维向量来表示，来计算一维向量之间的距离。但是音频长度会有所不同，因此需要一些预处理等。

期待在这里得到一些线索，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T11:05:25.920

使用DTW可以有效地计算两个可变长度序列之间的相似性：

[http://en.wikipedia.org/wiki/Dynamic_time_warping](http://en.wikipedia.org/wiki/Dynamic_time_warping)

这个算法很容易自己实现，并且在 wiki 页面上链接了很多现有的实现。

> 简单来说，音频可以用一维向量来表示，

在帧上拆分音频并将其转换为特征的二维向量是合理的，其中对于每一帧，您都有一个与不同频带相对应的值（特征）数组。如果要处理音乐，每帧进行 FFT 是个好主意，对于语音，最好计算[mel-frequency cepstrum](http://practicalcryptography.com/miscellaneous/machine-learning/guide-mel-frequency-cepstral-coefficients-mfccs/)

同样，您可以使用许多现有的库来获取 mel 频率特征，其中之一是语音识别工具包[CMUSphinx](http://cmusphinx.sourceforge.net)

# iphone - 在我的项目中找不到 Core audio.h？

> ID：15653470
> 
> 赞同：1
> 
> 时间：2013-03-27T07:09:33.387
> 
> 标签：iphone, ios, frameworks

我已经使用带有库的链接二进制文件添加了 CoreAudio 框架。然而，当我编译它说“CoreAudio/CoreAudio.h”没有找到。请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:23:54.380

您可以尝试添加

```
#import<CoreAudio/CoreAudioTypes.h> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:32:13.263

实际上，在 iOS 中，CoreAudio.framwork 下只有 CoreAudioTypes.h 标头可用

在 OSx 中，除此之外，您还可以将 AudioDriverPlugin.h、AudioHardware.h、AudioHardwarePlugin.h、CoreAudio.h 和 HostTime.h 作为额外的头文件。我不确定你有什么要求。但是看看这个[链接。](https://developer.apple.com/library/mac/#documentation/MusicAudio/Conceptual/CoreAudioOverview/CoreAudioFrameworks/CoreAudioFrameworks.html)

# if-statement - 我如何在 xcode 上创建一个使 UIButton 工作的 IF 语句？

> ID：15653471
> 
> 赞同：1
> 
> 时间：2013-03-27T07:09:39.230
> 
> 标签：if-statement, login, uibutton

我想做一个 IF/Else 语句，只有当他输入正确的代码时才授予用户访问权限 - 例如，登录 - 如果他在用户名文本框中输入 John Smith，他将能够按登录按钮，否则将无法正常工作。

这是我的代码

```
 if ([usernameText.text is EqualToString:@"jzarate"]) {

(insert code that grants functionality to the "log in button")

else ([insert code that does not grant functionality to the "log in button"]) 
```

我也想对由数字组成的密码做同样的事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:17:05.337

试试这个：

```
if ([usernameText.text is EqualToString:@"jzarate"]) 
{
    yourButton.enabled = YES;
}    
else 
{
    yourButton.enabled = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:18:29.067

我认为您正在寻找的是`-(void)setUserInteractionEnabled:(BOOL)enabled`.

您想要做的是将目标添加到您的 textField 的 editingDidEnd ，如下所示：

```
[textField addTarget:self action:@selector(editEnded:) forControlEvents:UIControlEventEditingDidEnd]; 
```

然后，您想通过实现 editEnded 方法将按钮设置为启用，例如：

```
-(void)editEnded:(UITextField *)textField {
    if ([textField.text isEqualToString:@"jzarate"]) {
        [button setEnabled:YES];
    }
    else {
        [button setEnabled:NO];
    }
 } 
```

你只需要确保你有一个可以从 editEnded 方法内部访问的按钮的引用来执行此操作。

您还可以实现`UIControlEventEditingDidBegin`，或者`UIControlEventEditingDidChange`如果您想在编辑开始或 textField 中的值发生更改时将按钮设置为启用。

# c# - 如何在 WPF 中将 ListView 转换为 Datatable？

> ID：15653472
> 
> 赞同：0
> 
> 时间：2013-03-27T07:09:40.667
> 
> 标签：c#, wpf, listview, datatable

如何转换`ListView`为`DataTable`？

`XAML`

```
<ListView x:Name="listViewUserHUD" ItemsSource="{Binding CollectionUserData}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" IsSynchronizedWithCurrentItem="True" util:GridViewSort.AutoSort="True" Margin="16,59,15,61">
    <ListView.View>
        <GridView>
            <GridViewColumn DisplayMemberBinding="{Binding FileNumber}" Header="FileNumber" Width="125" util:GridViewSort.PropertyName="FileNumber"  />
            <GridViewColumn DisplayMemberBinding="{Binding ShiftDate}" Header="ShiftDate" Width="125" util:GridViewSort.PropertyName="ShiftDate"/>
            <GridViewColumn DisplayMemberBinding="{Binding TimeCreated}" Header="TimeCreated" Width="125" util:GridViewSort.PropertyName="TimeCreated" />
            <GridViewColumn DisplayMemberBinding="{Binding Remarks}" Header="Remarks" Width="350" util:GridViewSort.PropertyName="Remarks" />
        </GridView>
    </ListView.View>
</ListView> 
```

代码*不起作用*：

```
var listView1 = new ListView();

DataTable table = new DataTable();

foreach (ListViewItem item in listView1.Items)
{
    table.Columns.Add(item.ToString());
    foreach (var it in item.SubItems)
    table.Rows.Add(it.ToString());
} 
```

这是我现在拥有的代码，但我正在尝试这样做。每次生成项目时如何转换`ListView`为？`DataTable``ListView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:22:32.510

最好从您的数据源对象中创建表格：

```
// Create the `DataTable` structure according to your data source
DataTable table = new DataTable();
table.Columns.Add("FileNumber", typeof(int));
table.Columns.Add("ShiftDate", typeof(DateTime));
table.Columns.Add("TimeCreated", typeof(DateTime));
table.Columns.Add("Remarks", typeof(string));

// Iterate through data source object and fill the table
foreach (var item in CollectionUserData)
{
    table.Rows.Add(item.FileNumber, item.ShiftDate, item.TimeCreated, item.Remarks);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:14:54.193

尝试这个：

```
var table = listViewUserHUD.DataSource as DataTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-31T06:09:27.843

```
 var table = List_bill.DataContext as DataTable; 
```

# magento - 致命错误：在第 1389 行调用非对象 in\app\cose\core\Mage\Catalog\Model\Product.php 上的成员函数 getSource()

> ID：15653484
> 
> 赞同：6
> 
> 时间：2013-03-27T07:10:42.757
> 
> 标签：magento

我在正在开发的站点的本地实例的 list.phtml 页面上收到以下错误--->

```
Fatal error: Call to amember function getSource() on a  non-object in 
D:\wamp\www\magento\app\code\core\Mage\Catalog\Model\Product.php on line 1389 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T07:14:05.800

```
Fatal error: Call to a member function getSource() on a  non-object in 
\www\magento\app\code\core\Mage\Catalog\Model\Product.php on line 1389 
```

我收到此错误是因为某些属性未在管理面板中创建。但是使用`$_product->getAttributeText('preferred')`值是在 list.phtml 中获取的。

当我创建这些属性并将它们分配给默认属性集时，问题就解决了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-02-23T21:03:35.377

找到以下代码

```
public function getAttributeText($attributeCode)
{
    return $this->getResource()
        ->getAttribute($attributeCode)
            ->getSource()
                ->getOptionText($this->getData($attributeCode));
} 
```

并替换为

```
public function getAttributeText($attributeCode)
{
    if ($attribute = $this->getResource()->getAttribute($attributeCode)) {
        return
                $attribute->getSource()
                            ->getOptionText($this->getData($attributeCode));
    } else {
        //Mage::log(\'attributes-errors.log\',$attributeCode);
        return false; 
    }
} 
```

来源：[http ://www.ubertheme.com/question/solving-error-fatal-error-call-to-a-member-function-getsource/](http://www.ubertheme.com/question/solving-error-fatal-error-call-to-a-member-function-getsource/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T12:11:28.500

请获取更多提示属性如何完成

> 当我创建这些属性并将 tem 分配给默认属性集时，问题就解决了。

# php - 使用表数据网关在 zend 框架 2 中从日期时间转换为日期的查询

> ID：15653491
> 
> 赞同：0
> 
> 时间：2013-03-27T07:11:43.550
> 
> 标签：php, date, zend-framework2

我只想从 zend 框架 2 中的日期时间列中提取日期。我写的如下 -

```
$select->where->between('date(view_logs.date)', '2013-01-01', '2013-03-31'); 
```

在查询中得到以下结果。

```
WHERE DATE(`view_logs`.`date`) BETWEEN '2013-01-01' AND '2013-03-31' 
```

但这不起作用。不生成括号和强制转换。谁能帮我在 zend 框架 2 中编写日期转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:31:58.273

我认为你需要在那里使用一个表达式

```
$select->where->addPredicate(
    new \Zend\Db\Sql\Predicate\Expression("date(view_logs.date) BETWEEN '2013-01-01' AND '2013-03-31'")
); 
```

你遇到了什么错误？

# python - 如何获取每列中的值？

> ID：15653492
> 
> 赞同：-3
> 
> 时间：2013-03-27T07:11:50.953
> 
> 标签：python

我有一个带有列的文本文件。我想提取列“C”中的数据

```
 A           B               C
  2013      colombo         sri lanka    
  2012      Tokyo           Japan 
```

下面是我用来查找数据的代码。

```
f = open('log.txt','r')
data = f.read()
import re

#print data

def find(pat,text):
        match = re.search(pat,text)
        if match: print match.group()
        else: print 'not found!'

x = re.findall(r'\w+:',data)
print x 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:50:29.393

您的格式确实未指定 - 很难找到一个好的规则，其中一列结束而另一列开始。如果您有一些未对齐的行，则可能无法明确确定数据与列的对应方式。

因此，您将需要一些启发式方法。一种有前途的方法是考虑**由至少 3 个空白字符分隔的列**：

```
>>> print data
   A           B               C
  2013      colombo         sri lanka
  2012      Tokyo           Japan

>>> re.compile('\s{3,}').split(line.strip()) for line in data.splitlines()]
[['A', 'B', 'C'],
 ['2013', 'colombo', 'sri lanka'],
 ['2012', 'Tokyo', 'Japan']] 
```

正则表达式的`\s{3,}`意思是“至少 3 个空白字符”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:35:17.167

您的问题未详细说明，但我可以尝试猜测一下。鉴于 C 列中的“斯里兰卡”，您不能只在空格上进行拆分。如果你准确地粘贴了它，你就没有使用标签。

因此，每列都可以从行中的特定位置开始：A 列是 [3:12]，B 列是 [12:28]，C 列是 [28:]。在这种情况下：

```
[line[29:] for line in data.splitlines()[1:]] 
```

另一种可能性是您希望在*超过 1 个空格*的任何运行上进行拆分，而不仅仅是在空格上。在这种情况下：

```
[filter(None, line.split('  '))[2] for line in data.splitlines()[1:]] 
```

事实证明，这些猜测都不是正确的，因为您的实际文件格式……与您向我们展示的完全不同，而是一种[标准的 IIS 日志格式](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/bea506fd-38bc-4850-a4fb-e3a0379d321f.mspx?mfr=true)。您还没有说是哪一种，但假设它是 W3C/NCSA/Common 格式之一，这与解析任何 Web 服务器日志完全相同。

有多个 Python 模块可以做到这一点，包括[`apachelog`](http://code.google.com/p/apachelog/)and [`pylogsparser`](https://pypi.python.org/pypi/pylogsparser)，但最好的办法可能是自己搜索，看看有什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:32:10.920

```
with open('file.txt') as filehandler:
    for line in filehandler:
        print line.split(maxsplit=2)[2] 
```

`.split("\t")`如果字段用制表符分隔，则使用

除了*Kos*答案，您还可以按正则表达式拆分。您可以尝试按最多一个空格分隔的单词进行拆分：

```
with open('file.txt') as filehandler:
    for line in filehandler:
        groups = re.compile(r'((?:\w+\s?)+)').split(line)
        print groups[1], groups[3], groups[5] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:35:51.553

假设 B 列永远不会超过一个单词：

```
# This reads each line, removes the trailing newline, then splits on whitespace
data = [line.strip().split() for line in open('log.txt')]

# The columns
A = []
B = []
C = []
for line in data:
    A.append(line[0])
    B.append(line[1])
    # ' '.join(list) will return a string of the list separated by whitespace
    C.append(' '.join(line[2:]))

print C 
```

`C`应仅包含 C 列

# c# - 带有 MonoTouch 的 RELEASE 版本的 SQLite - 无法获得 PK？

> ID：15653493
> 
> 赞同：4
> 
> 时间：2013-03-27T07:11:54.490
> 
> 标签：c#, sqlite, mono, xamarin.ios

我一直在使用 Monotouch 并为整个项目使用调试版本。我最近将它更改为发布版本来运行它，它在启动时崩溃了。打开调试符号我发现问题是 SQLite 抛出了一个（伪造的？）异常：“无法更新 RealConfigData 它没有 PK！”

```
public class RealConfigData
{
    [AutoIncrement, PrimaryKey]
    public int Id { get; set; }
    // .. Other fields
}

public class GameData
{
    [AutoIncrement, PrimaryKey]
    public int Id { get; set; }

    public int Seed {get;set;}
    // .. Other fields
} 
```

当我尝试 .Insert() 数据库中 RealConfigData 没有 PK 的第一个时，我遇到了错误！然而，确实如此。

对于第二个，我得到“找不到'种子'的获取方法”

WTF，似乎在编译 RELEASE 时，元数据不存在，或者更准确地说，不可靠......似乎它找到了 2nd class 的 PK 就好了，但不能为第一个..然后它找不到该领域的吸气剂……这太疯狂了。

并且此代码在运行调试时工作得很好。

到底有什么可能是错的？

我已经准备好发布我的 iPhone 应用程序，但 SQLite 在最后一刻对我不利。帮助！

==== 这是一个错误的陈述：

更新：我的另一个没有子类的类可以正常工作！所以它与父/子关系有关。

这不是真的，那个类被吃掉了例外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:09:14.760

弄清楚了...

发现这个： http: [//forums.xamarin.com/discussion/276/reflection-on-type-in​​-dll-allways-returns-propertyinfo-canwritefalse](http://forums.xamarin.com/discussion/276/reflection-on-type-in-dll-allways-returns-propertyinfo-canwritefalse)

基本上，如果您想对属性进行反射工作，您可以在 iOS 构建设置中关闭链接所有程序集。（否则，它会删除所有设置器）

如果我没有偶然发现的话，这可能需要我很长时间才能弄清楚...... :-(

# python - 在Python中使用导入类的对象作为另一个类的全局变量

> ID：15653494
> 
> 赞同：1
> 
> 时间：2013-03-27T07:11:58.097
> 
> 标签：python, class, object, global-variables

我在 Python 中遇到了以下问题。假设您有 3 个文件：

1）a.py（定义A类）：

```
class A:
  def a_method(self):
    print "global var experiment" 
```

2）b.py（定义使用类A的全局对象的方法的类B）：

```
class B:
  def b_method(self):
    print "calling a_method() from B..."
      obj_a.a_method() 
```

3) global_ex.py:

```
from a import A

obj_a=A()       
obj_a.a_method()

from b import B

obj_b = B()
obj_b.b_method() 
```

当我运行 global_ex.py 时，我收到错误：

```
NameError: global name 'obj_a' is not defined 
```

如果我不导入 a.py 和 b.py 而是将它们复制粘贴到 global_ex.py 中，它可以正常工作。

这里有什么问题？一般来说，在另一个对象中使用一个对象的方法的最佳方法是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:17:04.277

编辑：

尝试：

```
from a import A

class B():

  def __init__(self):
      self.a_obj = A()

  def b_method(self):
      print "calling a_method() from B..."
      self.a_obj.a_method() 
```

或者：

```
class B():

  def __init__(self, a_inst):
      self.a_inst = a_inst

  def b_method(self):
      print "calling a_method() from B..."
      self.a_inst.a_method() 
```

# google-chrome - Html5 音频 "preload="none" 搞砸了 pause() 和 currentTime()

> ID：15653495
> 
> 赞同：1
> 
> 时间：2013-03-27T07:12:08.503
> 
> 标签：google-chrome, audio, freeze, preload

我在暂停和重置 html5 音频的进度时遇到了一个非常奇怪的问题。

如果我设置 preload="none"，那么 "pause();" 和“当前时间=0；” 不会执行。我删除 preload="none" 的那一刻，一切正常。

这是我的代码。我淡入/淡出几个页面，每个页面在同一位置（预期）都有一个 html 5 音频元素，因此用户可以在访问该页面时播放该页面的音乐。

```
$('.link').on('click', function(e){
    $('.pagecontainer>div').fadeOut();
    $(this.getAttribute("href")).fadeIn();  
    stopAudio();
});

function stopAudio() { //fade out and stop any current audio
    $('audio').animate({volume: 0}, 1000);
    setTimeout(function(){
        $.each($('audio'), function () {
            this.currentTime=0;
            this.pause();
                            alert('audio has been stopped and reset');
        });
    },1000)
}

$('.sound').on('play', function () { //since volume was faded out, reset volume when click play button
    $('audio').animate({volume: 1}, 100);
});

....
....

<a href="#page1" class="link">Audio 1</a>
<a href="#page2" class="link">Audio 2</a>
<a href="#page3" class="link">Audio 3</a>

<div class="pagecontainer">

    <div id="page1"> //all three audio elements are in exact same spot
                     //clicking page link fades in current audio and fades in new one
        <audio controls loop class="sound" preload="none">
            <source src="../../site/music/music1.mp3"/>
            <source src="../../site/music/music1.ogg"/>
        </audio>
    </div>

    <div id="page2">
        <audio controls loop class="sound" preload="none">
            <source src="../../site/music/music2.mp3"/>
            <source src="../../site/music/music2.ogg"/>
        </audio>
    </div>

    <div id="page3">
        <audio controls loop class="sound" preload="none">
            <source src="../../site/music/music3.mp3"/>
            <source src="../../site/music/music3.ogg"/>
        </audio>
    </div>

</div> 
```

当我单击另一个页面的链接时，我需要停止并重置所有三个音频元素。目前由于它没有停止，当我点击淡入音频元素的播放按钮时，我听到两个音频同时播放。虽然有趣的是，音频确实会淡出。

如前所述，如果我删除 preload="none"，则警报（'音频已停止并重置'）将触发，并且一切正常。

有谁知道我如何仅在需要时加载音频（如果我取出 preload="none"）然后我的网站将无法在 Chrome 中运行，大约 20 个音乐文件将同时尝试加载导致 Chrome 挂起)，但让我的脚本工作？

急~谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:22:07.683

在尚未加载的音频标签上设置 currentTime 会触发 DOM 异常。因此，请确保已加载音频。然后才尝试设置它的currentTime。

```
$("audio").one("loadeddata", function ()
{
    $(this).data("dataLoaded", true);
});

$.each($('audio'), function () {
    if($(this).data("dataLoaded"))
    {
       this.currentTime=0;
        this.pause();
    } 
    alert('audio has been stopped and reset');
}); 
```

# android - 更改 Unity 3D 的 Debug.Log 中的默认标记

> ID：15653499
> 
> 赞同：0
> 
> 时间：2013-03-27T07:12:16.407
> 
> 标签：android, unity3d

为了调试android标签的代码，根据标签过滤日志非常有帮助。在 Unity 3d 中当我们使用

```
Debug.Log 
```

默认情况下，所有日志都以 Unity 作为标签，有没有办法更改这个默认标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T12:29:00.470

不，没有办法更改标签（据我所知）。[正如这里](http://docs.unity3d.com/Documentation/ScriptReference/Debug.Log.html)提到的。

但是，您可以将日志显示为错误、警告或正常调试消息。检查[`Debug`](http://docs.unity3d.com/Documentation/ScriptReference/Debug.html)类。

# ruby - 在哪里放置新的 ruby 库

> ID：15653500
> 
> 赞同：1
> 
> 时间：2013-03-27T07:12:25.810
> 
> 标签：ruby, web-services

我目前正在编写一个小的 ruby​​ 脚本。我在该脚本中有以下行。

```
require 'amazon/search' 
```

运行此脚本时，我收到以下错误。

> C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in `require': cannot load such file -- amazon/search (LoadError) from C:/Ruby200/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:45:in` require'

我已经从[http://www.caliban.org/ruby/ruby-amazon.shtml](http://www.caliban.org/ruby/ruby-amazon.shtml)下载了 (ruby-amazon-0.9.2.tar.gz) 。提取后，我得到包含文件和文件夹的文件系统，其中也包含 lib/amazon/search。我尝试将这些文件放在 C:\Ruby200\lib 中。但这并没有帮助。如果您对此有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:39:54.573

文件在哪里`amazon/search.rb`？它与您的脚本在同一目录中吗？您可能只需要调整[加载路径](http://www.mikeheijmans.com/2010/09/using-load_path-for-better-library-loading-in-ruby/)以添加包含该目录的任何`amazon/`目录。如果库在 中`./lib`，您可以使用`$LOAD_PATH << './lib'`.

当然，这类事情通常由像 Rubygems 这样的包管理系统更好地处理，所以如果你能找到一个类似的库来打包成 gem，事情会更容易。

# xcode - 将 ObjectiveFlickr 添加到项目

> ID：15653501
> 
> 赞同：0
> 
> 时间：2013-03-27T07:12:26.483
> 
> 标签：xcode, xcode4, armv7, armv6, objectiveflickr

我正在尝试将 ObjectiveFlickr 框架添加到我的项目中。

我尝试按照以下说明进行操作：

> ```
> Add ObjectiveFlickr.xcodeproj to your Mac project (from Xcode menu Project > Add to Project...)
> On your app target, open the info window (using Get Info on the target), then in the General tab, add ObjectiveFlickr (library) to Direct Dependencies
> Also, in the same window, add CFNetwork.framework to Linked Libraries
> Drag libObjecitveFlickr.a to the target's Linked Binary With Libraries group 
> ```

```
Open the Info window of your target again. Set Configuration to All Configurations, then in the Header Search Paths property, add these two paths, separately (<OF root> is where you checked out ObjectiveFlickr):

<OF root>/Source
<OF root>/LFWebAPIKit   

Use #import "ObjectiveFlickr.h" in your project 
```

但是，这些说明似乎是为旧版本的 XCode（我使用 4.6）编写的。我试图将这些说明“翻译”到较新版本的 XCode，但无论我做什么，libObjectiveFlickr.a 都保持红色，并且出现以下错误：

```
Undefined symbols for architecture armv7:
  "_SCNetworkReachabilityUnscheduleFromRunLoop", referenced from:
      -[LFSiteReachability stopChecking] in libObjectiveFlickr.a(LFSiteReachability.o)
  "_SCNetworkReachabilitySetCallback", referenced from:
      -[LFSiteReachability startChecking] in libObjectiveFlickr.a(LFSiteReachability.o)
  "_SCNetworkReachabilityCreateWithAddress", referenced from:
      -[LFSiteReachability networkConnectivityExists] in libObjectiveFlickr.a(LFSiteReachability.o)
      -[LFSiteReachability startChecking] in libObjectiveFlickr.a(LFSiteReachability.o)
  "_SCNetworkReachabilityScheduleWithRunLoop", referenced from:
      -[LFSiteReachability startChecking] in libObjectiveFlickr.a(LFSiteReachability.o)
  "_SCNetworkReachabilityGetFlags", referenced from:
      -[LFSiteReachability networkConnectivityExists] in libObjectiveFlickr.a(LFSiteReachability.o)
      -[LFSiteReachability startChecking] in libObjectiveFlickr.a(LFSiteReachability.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:31:44.697

您还需要将目标链接到`SystemConfiguration.framework`. 您可以使用与链接相同的方式执行此操作`CFNetwork.framework`。

# facebook - 在没有 ISBN 号的 Open Graph 中创建图书

> ID：15653511
> 
> 赞同：2
> 
> 时间：2013-03-27T07:13:07.647
> 
> 标签：facebook, facebook-opengraph

我们正在尝试在我们的网站上标记书籍页面，以便这些页面映射到 Open Graph，并在 Facebook 上清楚地识别为书籍页面。标记所需的项目之一是国际标准书号或 ISBN#。

但是，许多书籍（尤其是电子书）没有 ISBN 编号，对于这些书籍，Facebook 拒绝将该对象识别为书籍。如果一本书没有 ISBN 号，你会为这个标签提供什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T21:19:45.913

这是一个已知的 Facebook 问题： [https ://developers.facebook.com/bugs/238075889669083](https://developers.facebook.com/bugs/238075889669083)

作为一种解决方法，您似乎可以使用较旧的开放图形类型`book`

```
<meta property="og:type" content="book"> 
<meta property="og:image" content="http://ecx.images-amazon.com/images/I/5126EaBrekL.jpg">
<meta property="og:title" content="Frankie in Paris">
<meta property="book:release_date" content="2012-12-17 00:00:00 UTC"> 
```

而不是较新的`books.book`开放图形类型

# dojo - IBM Worklight 中使用 Dojo 的自定义 ListView

> ID：15653519
> 
> 赞同：0
> 
> 时间：2013-03-27T07:13:33.137
> 
> 标签：dojo, ibm-mobilefirst

我正在本教程的帮助下制作自定义列表。在 [本](http://dojotoolkit.org/reference-guide/1.8/dojox/mobile/ListItem.html#dojox-mobile-listitem)教程的帮助下，我可以添加标签并将其对齐到列表的右侧和左侧。但是我找不到在一侧垂直对齐更多标签的选项。其实我想这样实现

![在此处输入图像描述](../Images/8958ff1307a2f7bc3427564d7616b734.png)

我想知道的两件事

1.  其他标签下的标签
2.  标签下的日期
3.  标签下的星级

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:36:57.637

我使用了 edurocher 提供的 HTML 并制作了[这个小提琴](http://jsfiddle.net/PPZjG/2/)。

**HTML**

```
<div data-dojo-type="dojox.mobile.View">
     <h1 data-dojo-type="dojox.mobile.Heading" data-dojo-props='back:"Home", moveTo:"foo"'>Inbox</h1>

    <ul data-dojo-type="dojox.mobile.RoundRectList">

        <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='variableHeight: true'>
            <table>
                <tr>
                    <td style="padding: 5px" valign="top">
                        <div style="margin-bottom: 10px; border-top-style: solid; border-right-style: solid; border-color: #cccc00; border-width:4px; width: 8px; height: 8px; -webkit-transform:  scale(0.7,1) rotate(45deg);"></div>
                        <input type="checkbox" checked="true"></input>
                    </td>
                    <td>
                        <div style="font-weight: bold">Mike Cleron</div> <span style="font-weight: bold; font-size: small">Ice Cream Social Announcement</span>
 <span style="font-weight: normal;font-size: small">- Like ice cream sandwiches? Like being social? </span>
                    </td>
                    <td valign="top" align="right" width="60px">
                        <div style="margin-bottom: 10px">Oct 18</div>
                        <div>
            <div data-dojo-type="dojox/mobile/Rating" data-dojo-props='image:"http://archive.dojotoolkit.org/nightly/checkout/demos/mobileGallery/images/star-orange.png",numStars:1,value:1'></div> 
                        </div>
                    </td>
                </tr>
            </table>
        </li>

    </ul>
</div> 
```

**JS**

```
// Load the widget parser and mobile base
require(["dojox/mobile/parser", "dojox/mobile/deviceTheme", "dojox/mobile/Rating", "dojox/mobile/compat", "dojox/mobile"],
  function (parser, deviceTheme) {

    // Parse the page for widgets!
    parser.parse();
}); 
```

![Dojo 自定义列表项](../Images/9d20ff7cecd8058b28d80218bfa78c9d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T14:18:55.143

您可以做的只是将 HTML 内容添加到您的 ListItem 并使用标准 HTML/CSS 来定义布局。这是我使用 HTML 表格快速提出的一个示例，它看起来像您发送的示例：

```
 <li data-dojo-type="dojox.mobile.ListItem" data-dojo-props='variableHeight: true, selected: true'>
            <table>
            <tr>
            <td style="padding: 5px" valign="top">
            <div style="margin-bottom: 10px; border-top-style: solid; border-right-style: solid; border-color: #cccc00; border-width:4px; width: 8px; height: 8px; -webkit-transform:  scale(0.7,1) rotate(45deg);"></div>
            <input type="checkbox" checked="true"></input> 
            </td>
            <td>
            <div style="font-weight: bold">Mike Cleron</div>
            <span style="font-weight: bold; font-size: small">Ice Cream Social Announcement</span>
            <span style="font-weight: normal;font-size: small">- Like ice cream sandwiches? Like being social? </span>
            </td>
            <td valign="top" align="right" width="60px">
            <div style="margin-bottom: 10px">Oct 18</div>
            <div data-dojo-type="dojox/mobile/Rating" data-dojo-props='image:"images/star-orange.png",numStars:1,value:1'></div> 
            </td>
            </tr>
            </table>
        </li> 
```

希望这可以帮助。

# mysql - 优化相关表查询

> ID：15653521
> 
> 赞同：0
> 
> 时间：2013-03-27T07:13:46.773
> 
> 标签：mysql, query-optimization

我有一个包含用户信息的用户表和一个相关表，它将向当前用户显示相关用户。

为了让相关用户获得用户 ID '25'，我的查询看起来像

```
SELECT
  id
FROM users u
  INNER JOIN (SELECT
                primary_id,
                secondary_id
              FROM users_rel
              WHERE primary_id = '25'
                   OR secondary_id = '25') temp
    ON (u.id = temp.primary_id
         OR u.id = temp.secondary_id)
WHERE u.id != '25' 
```

这里的问题是，在`users_rel`表格中，用户 ID 可以在主端或辅助端。不要告诉我改变它，因为它已经完成了 600 万条记录，所以我无法改变它。此查询需要 2 到 5 分钟来执行表和表中的`4000`记录。`user_rel``629241``users`

```
 user_rel TABLE
.--------------------------------.
|    id         |  (VARCHAR,36 ) |   
|   primary_id  |  (VARCHAR,36)  |
|  secondary_id |  (VARCHAR,36)  |
|    del        |  (TINYINT,1)   |
|.______________________________.| 
```

和索引被定义为`primary_id`和的组合`secondary_id`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:24:08.647

> 它已经完成了 600 万条记录，所以我无法更改它

增加一对 Hardcore - 你已经在表中获得了*相对*少量的数据，这不是不修复糟糕设计的好理由。

如果您发布了两个表和解释计划的确切结构（即创建表语句），将会有所帮助。

为什么要使用子查询而不是仅仅加入表？重新开始给你一些可以开始优化的东西：

```
SELECT u.id
FROM users u
INNER JOIN users_rel r
    ON 25 in (primary_id, secondary_id)
    AND (u.id = r.primary_id 
        OR u.id=r.secondary_id)
WHERE u.id != '25'; 
```

这应该给出相同的结果。是否更快....我们不知道。

> 索引被定义为primary_id和secondary_id的组合

为什么？它对这个查询没有多大帮助——你需要 2 个索引，一个在 primary_id 上，一个在 secondary_id 上。

# caching - 我需要将nigix缓存文件的所有者更改为应用程序文件夹的所有者吗

> ID：15653523
> 
> 赞同：0
> 
> 时间：2013-03-27T07:13:47.653
> 
> 标签：caching, nginx, reverse-proxy

我已经在我的 ubuntu 中设置了 nginx 作为反向代理缓存服务器。

文件被缓存在位置 mywebroot/cache 文件夹中

此文件夹的所有者和内容是 www-data 并且我的应用程序所有者是 root

我应该将缓存文件的所有者更改为 root 以便从 nginx 缓存提供页面吗？

编辑：

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection  keep-alive
Content-Encoding    gzip
Content-Length  3817
Content-Type    text/html; charset=utf-8
Date    Fri, 29 Mar 2013 10:19:23 GMT
Expires Thu, 19 Nov 1981 08:52:00 GMT
Pragma  no-cache
Server  nginx/1.1.19
Vary    Accept-Encoding
X-Cache-Status  MISS
X-Powered-By    PHP/5.3.10-1ubuntu3.6 
```

这是我在萤火虫中的回应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:56:13.867

参考：[http](http://wiki.nginx.org/HttpProxyModule#proxy_cache) ://wiki.nginx.org/HttpProxyModule#proxy_cache 。

> 以下响应标头将响应标记为不可缓存，除非它们被忽略：
> 
> ```
> Set-Cookie
> Cache-Control containing "no-cache", "no-store", "private", or a "max-age" with a non-numeric or 0 value
> Expires with a time in the past
> X-Accel-Expires: 0 
> ```

根据您更新的问题，您的上游服务器返回过去的到期时间和 Cache-control: no-cache 等。

```
Cache-Control   no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Expires Thu, 19 Nov 1981 08:52:00 GMT
Pragma  no-cache 
```

所以nginx正确地没有缓存它。一种方法是告诉 nginx 忽略这些标头以确定缓存并隐藏错误的 Expires 标头等。

```
proxy_ignore_headers X-Accel-Expires Expires Cache-Control Set-Cookie;
proxy_hide_header Pragma Expires Cache-Control; 
```

正如这篇[文章](http://www.serverphorums.com/read.php?5,418985)所暗示的，您还可以设置，例如，

```
expires 1d; 
```

使代理缓存过期 1 天。

# javascript - Ember.js Ajax 调用未按预期工作

> ID：15653525
> 
> 赞同：2
> 
> 时间：2013-03-27T07:13:51.697
> 
> 标签：javascript, ajax, jquery, ember.js

我是 Ember.js 框架的新手。

我试图从框架中进行 ajax 调用，但没有得到预期的价值。

以下是页面中的代码 -

链接到第一个 ajax 调用，它按预期工作。

```
{{#linkTo listemployee class="span3 btn btn-large btn-block"}}Employees{{/linkTo}} 
```

调用数据填充表格 -

```
App.ListemployeeRoute = Ember.Route.extend({
        setupController: function(controller) {
        $.getJSON('data/Tutorials.json', function(data) {
            controller.set('content',data);
        });
      }
    }); 
```

和数据的模板 -

```
<script type="text/x-handlebars" data-template-name="listemployee">
  <h3 class="demo-panel-title">This is the list for Employee</h3>
  <table border=2>
    <tr><td><b>Name</b></td><td><b>Address</b> </td><td><b> Phone</b></td><td colspan=3>Action<td></tr>
    {{#each item in content}}
      <tr><td>{{item.name}}</td><td>{{item.address}} </td><td> {{item.phone}}</td><td> {{#linkTo viewemployee item.name}}View{{/linkTo}} </td><td>Edit</td><td>Delete</td></tr>
    {{/each}}
   </table>
</script> 
```

以上工作按预期工作。

但是当我点击

```
{{#linkTo viewemployee item.name}}View{{/linkTo}} 
```

对于上述部分 -

我的控制器代码在 App.js -

```
App.Router.map(function() {
      this.route("listemployee", { path: "/employees" });
      this.resource("viewemployee", {
        path: "/employees/:name"
      });
    }); 
```

而我`ViewemployeeRoute`的是

```
App.ViewemployeeRoute = Ember.Route.extend({
      model: function(params) {
        return {name: params.name};
      },
      setupController: function(controller, model) {
        $.getJSON('data/Tutorials.json', function(data) {
            data.forEach(function(item){
                if(item.name === model.name)
                {
                    var tabledata = '<table border = \"1\" ><tr><td>Name</td><td>'+item.name+'</td></tr><tr><td>Address</td><td>'+item.address+'</td></tr><tr><td>Phone</td><td>'+item.phone+'</td></tr></table>';
                    $('#employeetable').html(tabledata);
                    controller.set('content',item);
                }
            });
        });
      }
    }); 
```

我的模板代码是 -

```
<script type="text/x-handlebars" data-template-name="viewemployee">
  <h3 class="demo-panel-title">This is the View Employee template</h3>
  <div id = "employeetable">

  </div>
</script> 
```

问题 -

**当我`View`第一次单击链接时，员工的数据没有出现。**

**但是当我刷新页面时，数据按预期出现。**

我认为问题是，当我单击`View`链接时，来自 ajax 的响应将在页面渲染后稍后出现。

那么，我应该在代码中做什么，以便在单击`View`链接时获得员工相关详细信息？

感谢这方面的任何帮助。

谢谢。

**从答案尝试后更新2。但同样的结果即将到来。**

我已将我的 app.js 更改如下-

```
App.ListemployeeRoute = Ember.Route.extend({  
        model: function() {
            return App.Employee.findAll();
        }
    });

    App.ViewemployeeRoute = Ember.Route.extend({
      model: function(params) {
        return App.Employee.find(params);
      }
    });

    App.Employee.reopenClass({
      findAll: function() {
        var result = Ember.ArrayProxy.create({content: []});
        var self = this;
        $.ajax({
          url: 'data/Tutorials.json',
          type: 'GET',
          success: function(data, textStatus, xhr) {
            result.set('content', data);
          },
          error: function(xhr, textStatus, errorThrown) {
            alert('error');
          }
        });
        return result;
      },
      find: function(params) {
        var result = Ember.Object.create({content: null});
        var self = this;
        $.ajax({
          url: 'data/Tutorials.json',
          type: 'GET',
          success: function(data, textStatus, xhr) {
                data.forEach(function(item){
                    if(item.name === params.name)
                    {
                        result.set('content', item);
                    }
                });
            },
          error: function(xhr, textStatus, errorThrown) {
            alert('not found');
          }
        });
        return result;
      }
    }); 
```

我的数据文件是 -

```
[
    {
        "name": "John",
        "address": "John's Home",
        "phone": "John's Phone"
    },
    {
        "name": "Harry",
        "address": "Harry's Home",
        "phone": "Harry's Phone"
    },
    {
        "name": "Tom",
        "address": "Tom's Home",
        "phone": "Tom's Phone"
    }
] 
```

我们可以在这里找到工作 -

[http://www.phloxblog.in/ember-crud-ajax/](http://www.phloxblog.in/ember-crud-ajax/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:58:29.000

当您单击视图并通过#linkTo 传递模型时，您的路由的模型部分不会执行，因为它已经知道模型。

此外，作为一般规则，最好在模型中进行 ajax 调用，而不是在路由中。

```
App.ProjectsIndexRoute = Ember.Route.extend({  
  model: function() {
    return App.Project.findAll();
  }
});

App.Project.reopenClass({
  findAll: function() {
    var result = Ember.ArrayProxy.create({content: []});
    var self = this;
    $.ajax({
      url: '/projects.json',
      type: 'GET',
      data: {'user_id': App.currentUser.id},
      success: function(data, textStatus, xhr) {
        result.set('content', data.projects);
      },
      error: function(xhr, textStatus, errorThrown) {
        alert('error');
      }
    });

    return result;
  },

  find: function(project_id) {
    var result = Ember.Object.create({content: null, isLoaded: false});
    var self = this;
    $.ajax({
      url: '/projects/' + project_id + '.json',
      type: 'GET',
      success: function(data, textStatus, xhr) {
        result.setProperties(data.project);
        result.set('isLoaded', true);
      },
      error: function(xhr, textStatus, errorThrown) {
        alert('not found');
      }
    });

    return result;
  }
}); 
```

# html - 在不失比例的情况下执行尽可能大的 Java 小程序

> ID：15653531
> 
> 赞同：0
> 
> 时间：2013-03-27T07:14:20.720
> 
> 标签：html, jar, height, width, distortion

以下代码在 html 页面中显示一个 java 小程序。

```
<SCRIPT LANGUAGE="JavaScript"><!--
if (_ie == true) 
    document.writeln('<OBJECT classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93" WIDTH = "100%" HEIGHT = "100%" NAME = "WebClientX" ALIGN = "middle" VSPACE = "0" HSPACE = "0"  codebase="http://java.sun.com/update/1.6.0/jinstall-6-windows-i586.cab#Version=1,6,0,0"><NO EMBED><XMP>');
else if (_ns == true) 
    document.writeln('<EMBED type="application/x-java-applet;version=1.6"  CODE = "webclientx.Applet1" ARCHIVE = "WebClientX.jar" CODEBASE = "." NAME = "WebClientX" WIDTH = "100%" HEIGHT = "100%" ALIGN = "middle" VSPACE = "0" HSPACE = "0" ServerName =  "" Synoptic = "Hauptansicht" ServerPort =  "12233" UserName =  "" Password =  "" Protocol =  "0" Compress =  "false" Encrypt =  "false" Sealing =  "0" Timeout =  "60000" ShowMenu = "false" MouseMotion = "true" MouseClicks = "true" KeyEvents = "true" ShowStatusBar = "true" PlaySoundOnAlarm = "true" scriptable=false pluginspage="http://java.sun.com/javase/downloads/index.jsp"><NO EMBED><XMP>');
//--></SCRIPT> 
... 
...
... 
```

我有两个选择：

1.  定义固定大小
2.  使其尽可能大（小程序在宽屏显示器上被篡改/扭曲）

我需要第三种选择：小程序应该尽可能大，但不会失真。

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:44:48.853

解决方法是将上面的代码放在一个DIV里面，把上面代码中的size设置为100%，然后根据viewportsize每秒更新一次div的大小。

# python - 如何实现一个可以在linux中使用交换服务器主机发送电子邮件的程序（outbound.company.com）

> ID：15653536
> 
> 赞同：1
> 
> 时间：2013-03-27T07:14:50.010
> 
> 标签：python, linux, email, smtp

我想实现可以在每天给定时间**自动发送电子邮件的程序。**并使效果就像 no-reply@amazon.com 一样。
我尝试了很多解决方案，但这些解决方案都不起作用。
谁有这方面的经验，**请给我一个解决方案**。
非常感谢 ！

```
my python code<br>

    import smtplib

from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

# you == recipient's email address
 me = "no-reply@companyname.com"

you = "IDabc@company.com"

# Create message container - the correct MIME type is multipart/alternative.
msg = MIMEMultipart('alternative')
msg['Subject'] = "Link"
msg['From'] = me
msg['To'] = you

# Create the body of the message (a plain-text and an HTML version).
text = "Hi!\nHow are you?\nHere is the link you wanted:\nhttp://www.python.org"
html = """\
<html>
  <head></head>
  <body>
    <p>Hi!<br>
       How are you?<br>
       Here is the <a href="http://www.python.org">link</a> you wanted.
    </p>
  </body>
</html>
"""

# Record the MIME types of both parts - text/plain and text/html.
part1 = MIMEText(text, 'plain')
part2 = MIMEText(html, 'html')

# Attach parts into message container.
# According to RFC 2046, the last part of a multipart message, in this case
# the HTML message, is best and preferred.
msg.attach(part1)
msg.attach(part2)

# Send the message via exchange sever SMTP server.
s = smtplib.SMTP('outbound.companyname.com')
# sendmail function takes 3 arguments: sender's address, recipient's address
# and message to send - here it is sent as one string.
s.sendmail(me, you, msg.as_string())
s.quit() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:21:29.180

创建一个 Exchange smtp 连接器，该连接器接受来自 Linux 主机的匿名登录并允许该主机进行中继。然后使用 Linux 主机上的 smtp ip/port。

# lua - 限制电晕中的触摸事件

> ID：15653538
> 
> 赞同：0
> 
> 时间：2013-03-27T07:14:56.850
> 
> 标签：lua, coronasdk

我的班级上有一个按钮，可以将用户从一个场景带到另一个场景，例如从主菜单到游戏页面。现在，这可以正常工作，但我想限制触摸。就像，如果我触摸按钮然后拖动，那么我的过渡将不起作用，但如果我触摸按钮并放开它应该可以工作。我该如何实施？这是我的代码目前的样子，但它不起作用：

```
 if event.phase == "moved" then
    print("cannot be")
elseif event.phase == "began" then
    if event.phase == "ended" then
                storyboard.gotoScene("Game", "fade", 400)
    end
end 
```

如何限制触摸事件？就像如果我触摸按钮，在屏幕上拖动并结束对按钮的触摸，它不应该转换到下一个场景？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:21:06.357

你应该尝试`tap`而不是`touch`. 如下：

```
 local function sceneChangeFunction()
     storyboard.gotoScene("Game", "fade", 400)
 end
 Runtime:addEventListener("tap",sceneChangeFunction) 
```

**或者**

如果你想使用`touch`自己，那么你可以这样做：

```
 local sceneChangeFlag = false  -- create a flag, make it false
 local function sceneChangeFunction(e)
     if(e.phase=="began")then
         sceneChangeFlag = true           -- make it true in touch began
     elseif(e.phase=="moved")then
         sceneChangeFlag = false          -- make it false in touch moved
     else
         if(sceneChangeFlag==true)then    -- scene changes only if flag==true 
             sceneChangeFlag = false
             storyboard.gotoScene("Game", "fade", 400)     
         end
     end
 end
 Runtime:addEventListener("touch",sceneChangeFunction) 
```

继续编码..... :)

# c# - 如何通过代码设置 ComboBox 的 SelectedItem

> ID：15653540
> 
> 赞同：1
> 
> 时间：2013-03-27T07:15:11.960
> 
> 标签：c#, wpf, binding, combobox

在我的用户控件中，我定义了一个组合框，如下所示：

```
<GroupBox x:Name="stopEventGroup" Header="Test">
<ComboBox x:Name="stopEventCombobox" 
          ItemsSource="{Binding}" 
          DisplayMemberPath ="EventVariableComboxItem" 
          SelectedItem="StopEventVariable"/>
</GroupBox> 
```

StopEventVariable 是我的对象（日志）的属性。在代码部分，我将其 SelectionChanged 事件绑定到处理程序方法：

```
stopEventCombobox.SelectionChanged += stopEventCombobox_SelectionChanged; 
```

在处理程序内部，我将它分配给我的对象的属性。

```
private void stopEventCombobox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    selectedVar = (LogPublicVariableView)stopEventCombobox.SelectedItem;

    if ((log != null) && (selectedVar != null))
    {
        log.StopEventVariable = selectedVar.ExposedVariable;
    }
} 
```

在这个构造函数的构造函数中，我绑定了组合框父级的数据上下文：

```
stopEventGroup.DataContext = pvVarList; 
```

直到现在，一切都可以正常工作。现在我的问题是。在我的对象（日志）存储了值之后，下一次，当我显示这个用户控制器时，我希望组合框可以自动显示这个值，我尝试在用户控制器的构造函数中的以下代码中做到这一点，但不能工作：</ p>

```
stopEventCombobox.SelectedItem = log.StopEventVariable; 
```

分配后，stopEventCombobox.SelectedItem 仍然为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:56:08.673

如果你的意思是从后面的代码绑定，这就是你必须做的：

```
Binding b1 = new Binding("StopEventVariable");
b1.Source = pvVarList;
stopEventCombobox.SetBinding(ComboBox.SelectedItemProperty, b1); 
```

然后您只需设置属性 StopEventVariable。例如：

pvVarList.StopEventVariable = someItemsCollection[0];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:28:47.613

你没有绑定`SelectedItem`。`StopEventVariable`使用以下语法：`SelectedItem="{Binding StopEventVariable}"`.

还要确保`StopEventVariable`是一个属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:28:59.987

将属性与来自 XAML 本身`SelectedItem`的源属性绑定`(StopEventVariable)`

```
<ComboBox x:Name="stopEventCombobox" 
          ItemsSource="{Binding}" 
          DisplayMemberPath ="EventVariableComboxItem" 
          SelectedItem="{Binding StopEventVariable}"/> 
```

# android - 从其他应用程序选项卡式活动中调用安装应用程序活动？

> ID：15653546
> 
> 赞同：0
> 
> 时间：2013-03-27T07:16:05.610
> 
> 标签：android, android-intent, tabs, android-activity, intentfilter

参考下面链接的答案。

[Android：调用另一个应用程序的活动](https://stackoverflow.com/questions/10960709/android-call-activity-of-another-application/10961409#10961409)

我试过了`firstTabSpec.setIndicator("Second Tab Name").setContent(new Intent("com.company.package.FOO"));`

但我得到了一个

> java.lang.SecurityException：请求来自 com.company.package（uid 10036）的代码在进程 com.example.test（uid 10037）中运行

其中 com.example.test 是调用已安装包“com.company.package.FOO”的包

**com.company.package 清单**

```
<activity
        android:name="com.company.package.Login"
        android:label="@string/app_name"
        android:windowSoftInputMode="adjustResize|stateVisible" >
        <intent-filter>
            <action android:name="com.company.package.FOO" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

**com.example.test 清单**

```
 <activity
        android:name="com.example.test.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

如果您需要更多详细信息，请告诉我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:08:01.340

出于安全原因，不可能在您自己的应用程序中显示其他应用程序的活动，例如某种 iframe。

但是，您可以正常启动 Activity 并将控制权传递给它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:38:16.390

您可以发送意图消息以打开另一个应用程序活动，但您不能在选项卡中使用另一个应用程序的活动。充其量你可以做一件事。以某种方式检测您想要显示其他应用程序选项卡的选项卡何时切换，并从那里发送启动该应用程序的意图。通过这样做，您将无法在选项卡中显示该应用程序的活动，但您可以像其他活动一样启动该应用程序。为此，您可以执行以下任何操作

**选项1：**

在选项卡 A 中说您要启动其他应用程序。在选项卡 A 中设置一个空白布局的活动。并在该活动的 onCreate 方法中启动另一个应用程序。但这里有一个问题。当其他应用程序完成时，将出现一个空白屏幕。在我的情况下，为了解决这个问题，我只是在关闭另一个应用程序时将选项卡切换到主（另一个）选项卡。

**选项 2：**

您可以使用[TabHost.OnTabChangeListener](http://developer.android.com/reference/android/widget/TabHost.OnTabChangeListener.html)侦听器检测选项卡何时更改。然后你可以做同样的事情。

**选项 3：**

或者您可以通过检测选项卡按钮单击来做同样的事情。

无论如何，以上 3 个选项都只是同一选项的变体。虽然这不是一个好的解决方案，但我目前看不到任何更好的解决方案。希望它对你有用。谢谢

# c# - 如何将 UInt16 值转换为 UInt32？

> ID：15653548
> 
> 赞同：-5
> 
> 时间：2013-03-27T07:16:12.763
> 
> 标签：c#, .net

我正在尝试转换`Uint16`为`UInt32`. 如何将`UInt16`值转换为`UInt32`C#？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T07:17:09.440

您不必转换它，`UInt32`可以容纳`UInt16`所以只需简单地分配它。

```
UInt16 number = 20;
UInt32 newNumber = number;
Console.WriteLine("Number: {0}, New Number: {1}",number,newNumber); 
```

输出：

```
Number: 20, New Number: 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:43:25.437

隐式转换允许从大范围转换为小范围。只需将 UInt16 分配给 UInt32。

# scala - 在 selectDynamic 的宏实现中调用实例方法

> ID：15653550
> 
> 赞同：3
> 
> 时间：2013-03-27T07:16:29.527
> 
> 标签：scala, scala-macros

我想`Sample#cap(String)`在下面的宏实现中使用 selectDynamic。

可能吗？

```
// macro implementation
import scala.language.experimental.macros
import scala.reflect.macros._

object MyMacros {
  def selectDynamic(c: Context)(name: c.Expr[String]): c.Expr[String] = {
    // I expected `This` to refer a Sample instance, but actually it refers SampleSpec instance...
    c.Expr[String](Apply(TypeApply(Select(This(tpnme.EMPTY), newTermName("cap")), List(Ident(typeTag[String].tpe.typeSymbol))), List(name.tree)))
  }
}

// class which uses selectDynamic and macro
import scala.language.dynamics
class Sample extends Dynamic {
  def cap(name: String): String = name.toUpperCase
  def selectDynamic(name: String): String = macro MyMacros.selectDynamic
}

class SampleSpec extends FlatSpec with ShouldMatchers {
  it should "call dynamic" in {
    val sample = new Sample
    sample.foo should equal("FOO") // value cap is not a member of SampleSpec
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T09:23:40.597

您可以使用`c.prefix.tree`而不是`This`.

```
// macro implementation
import scala.language.experimental.macros
import scala.reflect.macros.Context
import language.dynamics

object MyMacros {
  def selectDynamic(c: Context)(name: c.Expr[String]): c.Expr[String] = {
    import c.universe._
    // I expected `This` to refer a Sample instance, but actually it refers SampleSpec instance...
    c.Expr[String](Apply(Select(c.prefix.tree, newTermName("cap")), List(name.tree)))
  }
}

// class which uses selectDynamic and macro
class Sample extends Dynamic {
  def cap(name: String): String = name.toUpperCase
  def selectDynamic(name: String): String = macro MyMacros.selectDynamic
} 
```

# entity-framework - 实体框架代码第一个外键选择查询问题

> ID：15653551
> 
> 赞同：0
> 
> 时间：2013-03-27T07:16:31.750
> 
> 标签：entity-framework, c#-4.0, entity-framework-4.1

我有一个 POCO，它有一个看起来像这样的外键

```
public partial class DataFileInformation
{
    public DataFileInformation()
    {
    }

    public int ID { get; set; }
    public int? HistoryID { get; set; }
    public string FileName { get; set; }
    public int NumberOfLines { get; set; }
    public string UpdatedByPersonnelNumber { get; set; }
    public DateTime UpdatedDateTime { get; set; }    
    public virtual JobHistory History { get; set; }
}

public partial class JobHistory
{    
    public int ID { get; set; }
    public Nullable<DateTime> StartDate { get; set; }
    public Nullable<DateTime> EndDate { get; set; }
    public Nullable<DateTime> UpdatedDateTime { get; set; }    
} 
```

映射：

```
class DataFileUploadInformationEntityMap : EntityTypeConfiguration<DataFileInformation>
{
    public DataFileUploadInformationEntityMap ()
    {
        ToTable("DataFileInformationsView");
        HasKey(fileMetaData => fileMetaData.ID);
        HasOptional(file => file.History)
            .WithMany().HasForeignKey(file => file.HistoryID);
    }
}

public class JobHistoryEntityMap : EntityTypeConfiguration<JobHistory>
{
    public JobHistoryEntityMap()
    {
        ToTable("JobHistoryView");
        HasKey(job => job.ID);
    }
} 
```

即使使用配置，触发的动态查询看起来像这样

```
exec sp_executesql N'SELECT  
    [Extent1].[ID] AS [ID],
    [Extent1].[DataFileInformation_ID] AS [DataFileInformation_ID], 
    [Extent1].[FileName] AS [FileName], 
    [Extent1].[UpdatedByPersonnelNumber] AS [UpdatedByPersonnelNumber],
    [Extent1].[UpdatedDateTime] AS [UpdatedDateTime],
    [Extent1].[JobID] AS [LoaderJobID],
    [Extent1].[JobHistory_ID] AS [JobHistory_ID],
    [Extent2].[ID] AS [ID1],
    [Extent2].[StartDate] AS [StartDate],
    [Extent2].[EndDate] AS [EndDate],
    [Extent2].[UpdatedByPersonnelNumber] AS [UpdatedByPersonnelNumber1],
    [Extent2].[CreateDate] AS [CreateDate],
    FROM   [DataFileInformationsView] AS [Extent1]
    LEFT OUTER JOIN [JobHistoryView] AS [Extent2] 
        ON [Extent1].[LoaderJobID] = [Extent2].[ID] 
    WHERE [Extent1].[ID] = @p__linq__0',N'@p__linq__0 int',@p__linq__0=146 
```

生成的动态查询无法将 JobHistory_ID 和 DataFileInformation_ID 映射到 POCO，并且 EF 抛出异常无法找到列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:41:24.327

您的映射类名不正确`DataFileInformation`，可选外键的属性名不正确：

```
class FileUploadInformationEntityMap :
    EntityTypeConfiguration<DataFileInformation>
{
    public FileUploadInformationEntityMap()
    {
        ToTable("DataFileUploadInformationEntity");
        HasKey(f => f.ID);
        HasOptional(f => f.History); // here you have LoaderJobHistory
    }
} 
```

还要确保您正在查看正确的 SQL，因为从 SQL 我看到名称`DataFileInformationsView`和`JobHistoryView`，但映射提供表名`DataFileUploadInformationEntity`和`JobHistoryEntity`. 而且您无需指定`HasOptional`- 默认情况下 FK 可以为空。

* * *

更新问题后，您的映射应该可以工作。您还可以添加级联删除配置（但这不是必需的）

```
HasOptional(f => f.History)
    .WithMany()
    .HasForeignKey(f => f.HistoryID)
    .WillCascadeOnDelete(false); 
```

# javascript - 获取查询字符串值并在我的html页面中显示

> ID：15653554
> 
> 赞同：7
> 
> 时间：2013-03-27T07:16:45.757
> 
> 标签：javascript, html, query-string

重定向到 home.html 页面后，我可以看到我在上一页中给出的查询字符串值。

```
Home.html?FirstName=dd&LastName=ee&smtButton=Submit 
```

我得到的结果是：

```
firstname = undefined
lastname = undefined
age = undefined 
```

谁能帮我解决这个问题？

JS：

```
function getParams() {
    var idx = document.URL.indexOf('?');
    var params = new Array();
    if (idx != -1) {
        var pairs = document.URL.substring(idx + 1, document.URL.length).split('&');
        for (var i = 0; i < pairs.length; i++) {
            nameVal = pairs[i].split('=');
            params[nameVal[0]] = nameVal[1];
        }
    }
    return params;
}

params = getParams();
firstname = unescape(params["firstname"]);
lastname = unescape(params["lastname"]);
age = unescape(params["age"]);
document.write("firstname = " + firstname + "<br>");
document.write("lastname = " + lastname + "<br>");
document.write("age = " + age + "<br>"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T08:45:13.730

在您的函数内部，`function getParams()`您被声明为变量`var params = new Array();`，我认为这会让您感到困惑

如果找到匹配项，则分配 url 参数`params[nameVal[0]] = nameVal[1];`，这实际上不会将值添加到数组对象中。**0**`params.length`也是如此。但它可以作为数组是对象的实例.. 即是**`params instanceof Object``true`**

 **所以改为基本对象..以避免混淆

```
function getParams() {
    var idx = document.URL.indexOf('?');
    var params = {}; // simple js object
    .. here goes other code
} 
```

和对象键是区分大小写的，所以`FirstName`会工作..

```
firstname = unescape(params["FirstName"]); 
```

打印所有值试试这个

```
params = getParams();

for( var i in params ){
    console.log( i , params[i] );
} 
```

它会打印

```
FirstName dd    
LastName ee    
smtButton Submit 
```

我已经修改了你的 getParams 代码

```
function getParams() {

    var params = {},
        pairs = document.URL.split('?')
               .pop()
               .split('&');

    for (var i = 0, p; i < pairs.length; i++) {
           p = pairs[i].split('=');
           params[ p[0] ] =  p[1];
    }     

    return params;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:20:31.133

您可以使用以下方法将查询字符串从`location.search`-string 转换为 js-object：

```
String.prototype.q2obj = function(){
    var qArr = this.split('&')
        ,qObj = {}
        ,i =-1;
    while(++i<qArr.length) {
            qfrag = qArr[i].split('=');
            qObj[qfrag[0]] = qfrag[1];
   }
   return qObj;
};
//usage
var queryObj = location.search.substr(1).q2obj(); 
```**

# iphone - 我必须导入或安装什么才能在我的项目中使用 mshook 功能？

> ID：15653556
> 
> 赞同：1
> 
> 时间：2013-03-27T07:16:53.703
> 
> 标签：iphone, ios, objective-c, hook, cydia-substrate

我从网上下载了一个 .mm 文件。它包括一个`MSHookFunction`电话。当我编译项目时，它说：

> 使用未声明的标识符 MSHookFunction

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T07:36:57.563

您必须获取 substrate.h 和 libsubstrate.a 才能构建。您必须使用带有 MobileSubstrate 的越狱 iPhone 来执行它。它不在模拟器上运行。

# apache - Drupal Multisite RedirectMatch 仅在主站点上

> ID：15653557
> 
> 赞同：0
> 
> 时间：2013-03-27T07:16:53.907
> 
> 标签：apache, .htaccess, drupal

我正在运行一个 Drupal 多站点，在主站点上我需要重定向大约 600 个页面。我在用：

```
RedirectMatch 301 ^/tags/manchester_conference$ http://mainsite.com/tags/health-and-safety-events/manchester_conference 
```

如果它们还有一个名为 /tags/manchester_conference 的页面，它们也会影响多站点

我怎样才能让它只在主站点上工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:25:45.717

我想解决方案是确保该规则仅适用于在根目录的一个 .htaccess 文件中使用 mod_rewrite 的主站点。

像这样的东西应该工作：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST}   ^(www\.)?mainsite\.com    [NC]
RewriteCond %{REQUEST_URI} !/health-and-safety-events/manchester_conference  [NC]
RewriteRule ^tags/manchester_conference  /tags/health-and-safety-events/manchester_conference  [R=301,L,NC] 
```

# c# - C#：如何使用 IPMI va C#？

> ID：15653559
> 
> 赞同：0
> 
> 时间：2013-03-27T07:17:00.393
> 
> 标签：c#, .net

互联网上关于 IPMI（智能平台管理接口）的信息很少。大多数解决方案使用 C\C++ 中的低级代码（适用于 Linux）。那么，C# 中有没有可以调用 IPMI 函数的高级库？谢谢。UPD：我需要使用 BMC 控制器向远程计算机调用请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:19:59.867

请查看以下 MSDN 链接以获取线索。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa390891(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390891(v=vs.85).aspx)

您可以使用 WMI 和 WINRM。您可以使用 PInvoke 访问 C# 中的非托管 API。

# javascript - DOJO Onblur 事件

> ID：15653562
> 
> 赞同：0
> 
> 时间：2013-03-27T07:17:05.907
> 
> 标签：javascript, events, dojo, onblur

我有一个用 DOJO 编写的带有 onblur 事件的文本框。在 onBlur 事件中，如果文本框值包含单词“AP”，我必须执行一些功能。但是由于某种原因，一旦 onblur 事件被触发。整个文档正在获取点击事件，即，在点击网页的任何部分时，onblur 函数正在调用.所以，我使用 dojo.disconnect(handle) 删除事件。但是，现在的问题是如果用户再次更改文本框值，onblur 事件不会调用，因为它已断开连接。以下是我的代码

```
this.text = dojo.query('.state')[0];
this.handle = dojo.connect( this.text, 'onblur', this, function(){
      alert(this.text.value);
      dojo.disconnect(this.handle);
 }); 
```

我想再次更改文本框的值，以便处理 onblur 事件函数

# php - 将文件加载到 PHP 中时的内存使用情况

> ID：15653565
> 
> 赞同：0
> 
> 时间：2013-03-27T07:17:11.597
> 
> 标签：php, file-io, memory-limit

我正在将文件加载到 PHP 中的数组中。我正在将文件加载到一个数组中，因为它是一个字典，我想利用二进制搜索来查找我的单词是否在字典中。由于那里有一些不同的信息，我已经尝试了这两种不同的方法。它们的时间非常相似，出于某种原因，我的 1.1MB 文件导致 PHP 使用 20MB 内存。

方法一：

```
<?php
    echo 'Memory Usage Start: ' . memory_get_usage() . '<br>';
    $start = microtime(true);
    $fs=fopen("./dictionary.txt", "r");
    $dictionary=array();
    while (!feof($fs)){
        $dictionary[]=trim(fgets($fs));
    }
    $end = microtime(true);
    echo 'Memory Usage End: ' . memory_get_usage() . '<br>';
    echo 'Total Time: ' . ($end - $start) . ' seconds'; 
```

输出是：

```
Memory Usage Start: 5298144
Memory Usage End: 25254944
Total Time: 0.17744994163513 seconds 
```

方法二：

```
<?php
    echo 'Memory Usage Start: ' . memory_get_usage() . '<br>';
    $start = microtime(true);
    $dictionary = file('./dictionary.txt', FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);
    $end = microtime(true);
    echo 'Memory Usage End: ' . memory_get_usage() . '<br>';
    echo 'Total Time: ' . ($end - $start) . ' seconds'; 
```

输出是：

```
Memory Usage Start: 5297240
Memory Usage End: 25244920
Total Time: 0.074188947677612 seconds 
```

PHP 中的数组的开销似乎比我想象的要大得多。我想我能想到的一种解决方案是解析到文件的中间并读取该行，然后以这种方式进行二进制搜索。然而，进行如此多的文件读取以找到一个值似乎效率低得多。

无论如何，任何见解将不胜感激。

# php - 价格后爆炸字符串

> ID：15653570
> 
> 赞同：2
> 
> 时间：2013-03-27T07:17:26.730
> 
> 标签：php, explode, preg-split

说我有一个字符串

```
$what = "1 x Book @ $20 32 x rock music cd @ $400 1 x shipping to india @ $10.5"; 
```

我想爆炸所以输出是

```
Array 
(
    [0] => 1 x Book @ $20
    [1] => 32 x rock music cd @ $400
    [2] => 1 x shipping to india @ $10.50
) 
```

我在想类似下面的东西，但不知道要使用哪个正则表达式！

```
 $items = preg_split('/[$????]/', $what); 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:26:18.507

尝试这个 ：

```
$str = '1 x Book @ $20 32 x rock music cd @ $400 1 x shipping to india @ $10.5';
preg_match_all('/(?P<match>\d+\s+x\s+[\w\s]+\s+@\s+\$[\d\.]+)/',$str,$match);

echo "<pre>";
print_r($match['match']); 
```

输出 ：

```
Array
(
    [0] => 1 x Book @ $20
    [1] => 32 x rock music cd @ $400
    [2] => 1 x shipping to india @ $10.5
) 
```

**另一个解决方案**：

根据 Dream Eater 的评论：**更小的写法：(.*?\$\d+)\s。– Dream Eater 3 分钟前**

我只是`*`在最后添加了它，它工作正常。

```
$str = '1 x Book @ $20 32 x rock music cd @ $400 1 x shipping to india @ $10.5';
preg_match_all('/(.*?\$\d+)\s*/',$str,$match);

echo "<pre>";
print_r($match); 
```

参考： http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

# php - PHP会话到期

> ID：15653571
> 
> 赞同：1
> 
> 时间：2013-03-27T07:17:28.387
> 
> 标签：php, session

当 PHP 会话开始并使用类似的东西初始化时，它`$_SESSION['login_time'] = time();`会保持当前时间，直到会话被销毁或浏览器关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:19:56.260

*它保存您在执行此操作时*分配给它的时间戳。

该值会一直保留到会话被销毁（由您或客户端通过关闭其浏览器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:21:23.683

它会在你分配它时存储 time() 的值，直到会话被销毁......

默认情况下，会话会持续到用户关闭浏览器。这可以在 php.ini 文件中通过将 0 更改为`session.cookie_lifetime = 0`您希望会话持续的秒数，或使用`session_set_cookie_params()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:21:51.783

会话总是在浏览器关闭时销毁，您也可以通过`session_destroy`或销毁它`session_unset`

# android - 我无法解决的致命错误列表

> ID：15653581
> 
> 赞同：-4
> 
> 时间：2013-03-27T07:18:27.680
> 
> 标签：android, list, arraylist, hashmap

当我开发一个 android 应用程序时，我遇到了一个错误：

```
"Unable to start activity Component Info :X . RunTimeExcepetion : your content must have a list . View whose ID  attribue is 'android.R.id.list' 
```

我确实有一个在`XML`文件中的列表。

在 java 类中它看起来像：

```
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
HashMap<String, String> map = new HashMap<String, String>(); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:21:47.747

你的xml文件中有这个吗？

```
 <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:20:44.713

您是从 ListActivity 派生的。为此，您通过 setContentView 设置的布局必须有一个 ID 为 android.R.id.list 的 ListView。从 Activity 而不是 ListActivity 派生或更改您的布局。

# sql - 存储过程中的错误 Null 值被聚合或其他 SET 操作消除

> ID：15653587
> 
> 赞同：0
> 
> 时间：2013-03-27T07:19:00.277
> 
> 标签：sql, sql-server, tsql

我正在尝试执行以下查询，但它给了我警告`Null`值被聚合或其他`SET`操作消除。

```
select 
  s.CurrentDate,
  s.game_id,
  s.Searchstring,
  sm.type_of_game,
  case when(count(t.game_id)>0) then 'Y' else 'N' end as scorestatus,
  case when(count(i.game_id)>0) then 'Y' else 'N' end as scorestatusindividual,
  sm.image_path,g.datetime,'' as score_keeper
from dbo.Search s  with(nolock) 
left outer join dbo.TeamGameResult t  with(nolock) on s.game_id = t.game_id
left outer join dbo.IndividualGameResult i  with(nolock) on i.game_id = s.game_id 
join dbo.Game g  with(nolock) on g.game_id=s.game_id 
join  dbo.AdditionalDetails ad on ad.AdditionalDetails_id = g.AdditionalDetails_id
join dbo.SportMaster sm  with(nolock) on  sm.SportsMaster_id = ad.SportsMaster_id
where (( Searchstring+' '+ convert(nvarchar(500),s.CurrentDate,101) Like '%01/15/2013%' 
  and Searchstring+' '+ convert(nvarchar(500),s.CurrentDate,101) Like '%Soccer%'))
  and convert(varchar(10),g.datetime,101) in ('01/15/2013','01/14/2013')
group by s.game_id,
         s.Searchstring,
         sm.type_of_game,
         s.CurrentDate,
         sm.image_path,
         g.datetime
order by g.datetime desc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:27:24.717

它只是警告您，因为您正在使用

```
... when(count(i.game_id)>0) then 'Y' else 'N' end ... 
```

Count 是一个聚合函数，不能计算 game_id 为空的值。您可以使用 ISNULL 函数 ( [http://msdn.microsoft.com/en-GB/library/ms184325.aspx](http://msdn.microsoft.com/en-GB/library/ms184325.aspx) ) 例如：

```
count(ISNULL(i.game_id, 0)) 
```

但随后它也会计算所有 NULL 值。所以如果你不想要它，你需要在 WHERE 部分添加额外的检查

# iphone - 如何在ios中绘制一个平滑的边缘圆

> ID：15653588
> 
> 赞同：2
> 
> 时间：2013-03-27T07:19:06.903
> 
> 标签：iphone, cgcontext

嗨，在我的应用程序中，我必须在视图上画一个圆圈。为此我使用了下面的代码

```
CGContextRef contextRef = UIGraphicsGetCurrentContext();
        CGContextSetLineWidth(contextRef, 2.0);
        CGContextSetRGBStrokeColor(contextRef,red,green,blue, 1.0);

        CGRect circlePoint = (CGRectMake(rect.origin.x,rect.origin.y,rect.size.width,rect.size.height));

        CGContextStrokeEllipseInRect(contextRef, circlePoint); 
```

我也得到了圆圈，但我以这种方式得到了圆圈![如果您观察图像，线条的粗细不均匀，但我需要线条粗细均匀的圆圈](../Images/9f17b69352a06c326b94b9e090b9774e.png)

如果有人有任何想法，请告诉我。提前谢谢请帮忙。

# iphone - 使用 xcode 将图像转换为二进制格式

> ID：15653590
> 
> 赞同：0
> 
> 时间：2013-03-27T07:19:08.273
> 
> 标签：iphone, xcode4.5

在我的应用程序中。我有一个浏览的 UIImageView。我不知道图像是 jpeg 还是 png。

我想将该图像（无论格式如何）转换为二进制格式

我对这个概念很陌生。帮我

如何以二进制格式将 imageview 中的图像发送到服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:48:57.960

1.  您的[UIImageView](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImageView_Class/Reference/Reference.html)有一个[Image](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIImage)。
2.  您可以使用以下方法获取图像数据：

    NSData *imageData = UIImageJPEGRepresentation(yourImage, 0.9);

    或者

    NSData *imageData = UIImagePNGRepresentation(yourImage);

3.  获得图像数据后，您必须向服务器发出发布请求。例如，您可以使用[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40003755)或任何第三方框架，例如 [AFNetworking](http://afnetworking.com/)。

# asp.net-mvc - 在 MVC 中使用具有对象和视图模型的控制器的最佳实践

> ID：15653591
> 
> 赞同：-1
> 
> 时间：2013-03-27T07:19:13.823
> 
> 标签：asp.net-mvc, asp.net-mvc-4

使用控制器时，建议公开您的域实体还是创建模型更好。我以这个为例：

```
[HttpPost]
public ActionResult Create(Order order)
{
        if (SaveObject<Order>(order, false))
        {
                return RedirectToAction("Index", new { id = order.CustomerNo });
        }
        else
        {
                ViewData.Model = order;
                return View();
        }
} 
```

如果最好公开一个模型，其中应该包含什么？我是否需要创建支持属性，或者可能只需要为当前用例公开的字段？我遇到了“模型注入”一词，有人可以解释使用它的含义以及如何完成吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-27T07:23:27.177

> 使用控制器时，是否建议公开您的域实体

不，这是不可取的。

> 还是创建一个 OrderViewModel 更好。

是的，它更好。

> 如果是，我的视图模型中应该包含什么？

您希望用户公开和修改的属性。

> 我遇到了“模型注入”一词，有人可以解释一下这是什么含义以及如何完成吗？

想象以下领域模型：

```
public class User
{
    public bool IsAdministrator { get; set; }
    public string FirstName { get; set; }
} 
```

并且您希望有一个控制器操作允许用户更改他的名字。所以你去：

```
[HttpPost]
public ActionResult Create(User user)
{
    Save(user);
    ...
} 
```

和一个相应的视图，您将在其中有一个名字的文本字段。用户现在可以非常轻松地模拟对控制器操作的请求并将`IsAdministrator`属性设置（注入）为 true。

这就是为什么你应该使用视图模型：

```
public class ChangeFirstNameUserModel
{
    public string FirstName { get; set; }
} 
```

接着：

```
[HttpPost]
public ActionResult Create(ChangeFirstNameUserModel model)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:26:27.517

最好创建实体的映射模型。特别是如果您不打算修改实体的每个属性。而且，如果您的实体有子对象并且您没有急切地加载它们，如果您使用的是 ORM（例如 EF、NHibernate），那么您就有可能拥有`select n+1 issue`. 您的模型还应该只包含您想要更新的属性，这样您就不会过度发布。

# java - 限制JVM不调用GC

> ID：15653597
> 
> 赞同：7
> 
> 时间：2013-03-27T07:19:47.853
> 
> 标签：java, garbage-collection

JVM究竟如何确定它应该是Garbage Collector？有没有办法限制JVM不调用GC？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T07:28:52.600

> JVM 究竟是如何确定它应该使用垃圾收集器的？

这取决于。

*   如果您正在使用吞吐量收集器，那么当 JVM 无法在需要分配的空间（或其中一个空间）中分配新对象时，JVM 就会运行 GC。

*   如果您使用的是低暂停收集器，那么当可用空间比率下降到可配置的水平以下时，JVM 会触发 GC。

> 有没有办法限制JVM不调用GC？

不会。如果 JVM 决定它需要运行 GC，它将运行它。您唯一能做的就是告诉 JVM 忽略对`System.gc()`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T07:24:46.483

你不能告诉 JVM 不要调用 GC，但你可以告诉 JVM 忽略对`System.gc()`via的调用`-XX:+DisableExplicitGC`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T07:24:54.493

通常，当其中一个堆区域接近满时，JVM 决定运行垃圾回收周期。请注意，最终决定权取决于 JVM。

至于指示 JVM 暂时不执行 GC，没有可靠且可移植的方法来执行此操作（除了完全避免堆分配）。

如果你想尽量减少 GC 暂停，[Java Performance](https://rads.stackoverflow.com/amzn/click/com/0137142528) book 有一些很好的材料。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T07:35:35.363

这实际上取决于虚拟机的实现。

另一方面：

> 垃圾收集的明确请求是表明可能存在性能问题的风向标。

[代码正确性：调用 System.gc()](http://www.hpenterprisesecurity.com/vulncat/en/vulncat/java/code_correctness_call_to_system_gc.html)

> 不建议致电`System.gc()`、`Runtime.getRuntime().gc()`和。`System.runFinalization()`无论是否使用该选项禁用垃圾收集，代码都应该具有相同的行为`-Xdisableexplicitgc`。此外，“现代”jvm 在处理垃圾收集方面做得非常好。如果在应用程序中出现与内存泄漏无关的内存使用问题，则应通过 JVM 选项而不是代码本身来处理。

[PMD 规则 DoNotCallGarbageCollectionExplicitly](http://pmd.sourceforge.net/pmd-4.2.6/rules/controversial.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T07:49:34.403

一般来说，GC 只在需要时运行。一个例外，并发标记扫描将提前开始以避免必须停止应用程序。

恕我直言，最简单/最好的解决方案是不要产生这么多垃圾。您可以使用内存分析器来减少您产生的垃圾量。这将减少您的集合的大小以及它们出现的频率。在极端情况下，您可以避免在白天甚至整个星期收集。

减少垃圾的一个好处是可以减少用垃圾刷新 CPU 缓存。您的 L3 缓存只有几 MB，并且您创建了几 MB 的垃圾，您将有效地推出有用的信息，从而减慢您的应用程序。

# windows - Visual Studio 2012 中的函数指针

> ID：15653604
> 
> 赞同：0
> 
> 时间：2013-03-27T07:20:34.090
> 
> 标签：windows, visual-studio-2012, function-pointers

请解释我哪里错了。我想使用指向函数的指针在几个编码实用程序之间切换。我宣布它喜欢

```
int (*enc_routine)(); 
```

后来我切换编码实用程序，如

```
enc_routine = g723_24_encoder; 
```

实用程序本身类似于

```
extern int g723_24_encoder(
    int sample,
    int in_coding,
    struct g72x_state *state_ptr); 
```

Linux 上的一切都很可爱，但现在我在 Visual Studio 2012 上，它说：

> “int (*)(int sample, int in_coding, g72x_state *state_ptr)”类型的值不能分配给“int (*)()”类型的实体

感谢您的帮助（如果有的话）！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:24:42.227

您需要为函数指针声明参数。您不能声明它不带参数并将其设置为等于需要 3 个参数的函数。我很震惊它在linux上工作。

# javascript - JS/CSS 问题：我的元素没有完全重叠，当使用 z-index 时它停止了 javascript

> ID：15653613
> 
> 赞同：0
> 
> 时间：2013-03-27T07:21:36.777
> 
> 标签：javascript, z-index

我创建了一个基于网络的论坛，我想将横幅放在侧边栏和标题菜单中。我希望当我向下滚动网页时侧边栏横幅和标题不会向下移动。我尝试使用 javascript，它可以工作，但有些元素相互重叠。

坏消息是：我什至可以在这里输入代码

这是我的网站[http://forum.wirada.net/](http://forum.wirada.net/)

如果我在javascript代码中添加z-index，当我向下滚动时它不想留下
请......请......任何人都可以帮助我吗？对不起我糟糕的英语和问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:46:07.433

如果您更改 div id="scrolling-content" 的 z-index，则文本不会重叠。

```
<div id="scrolling-content" style="position: fixed; top: 0px; width: 100%; z-index: 100;"> 
```

我注意到您在创建 Web 布局时大量使用了表结构（3 个嵌套表）。现在布局结构是使用 div 完成的。Div 布局更容易处理。

# c# - 使用 NOT EXIST 查询超时

> ID：15653619
> 
> 赞同：2
> 
> 时间：2013-03-27T07:21:59.280
> 
> 标签：c#, sql

我有一个查询，目的是查找表 item_location 中的记录，而表 operation_detail 中不存在一年中特定月份的记录

```
SELECT il.item_id, 
       il.SEQUENCE, 
       SUM (il.quantity) AS quantity, 
       i.buy_price,
       i.sell_price, i.item_name, i.unit_measure_id,
       i.is_raw_item AS is_raw
FROM item_location il, item i
WHERE il.quantity <> 0
AND il.item_id = i.item_id
AND il.SEQUENCE = i.SEQUENCE
AND NOT EXISTS (
                 SELECT od.*
                 FROM operation_detail od, operation_header oh, rt_operation o
                 WHERE od.item_id = il.item_id
                 AND od.SEQUENCE = il.SEQUENCE
                 AND od.operation_header_id = oh.operation_header_id
                 AND oh.operation_type_id = o.operation_type_id
                 AND o.operation_stock IN ('I', 'O')
                 AND MONTH (oh.operation_date) = @MONTH
                 AND YEAR (oh.operation_date) = @YEAR)
GROUP BY il.item_id,
         il.SEQUENCE,
         i.buy_price,
         i.sell_price,
         i.item_name,
         i.unit_measure_id,
         i.is_raw_item 
```

请注意，使用给定超时从`.net`平台运行此查询，从 SQL 运行它需要 40 秒`DataAdapter`

我的主要问题是 TimeOut....任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:26:42.167

运行查询的默认超时时间是 30 秒，如果您的命令需要更长的时间，它将被终止。我想您应该优化查询以更快地运行，但您也可以增加数据适配器的超时时间：

```
dataAdapter.SelectCommand.CommandTimeout = 120; // Two minutes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:41:03.123

每当我看到包含多个分组列的查询时，我开始认为查询可以重写。通常，您应该尝试仅对键列进行分组，将键和聚合结果存储到临时表中，然后加入该临时表以获取更多详细信息。例如：

```
insert into
    #tmp
select
    key1, key2, sum(things)
from
    table; 
```

然后：

```
select
    table.key1, table.key2,
    tmp.sum_of_all_things,
    table.other_stuff, table.extra_data
from
    #tmp tmp
    join
    table on tmp.key1 = table.key1 and tmp.key2 = table.key2 
```

这将避免必须对所有非键列进行排序的所有开销（这是作为`group by`操作的一部分发生的）。

其次，由于您在子句中有一个相关的子查询，您应该在匹配谓词（在本例中为and ）`not exists`上提供一个或多个索引。该方法有效，如果结果集包含任何行，它将返回 true，*但仍需要为外部查询的每一行重新执行内部查询*。所以你需要索引来减少这种痛苦。`item_id``sequence``exists`

 *由于您的内部查询本身包含 3 个连接，因此我会认真考虑单独运行它并将结果存储在另一个临时表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T10:03:52.623

为了提高性能，不要使用非 SARGable where 子句。您的主要错误是使查询成为非 SARGable 直接在 WHERE 子句中的列上运行。这不会使用索引。

看看这个例子，其中声明了查询强制 INDEX SEEK 操作的新参数

```
DECLARE @YEAR int = 1971,
        @MONTH int = 11,
        @StartDate datetime,
        @EndDate datetime
SELECT @StartDate = CAST(CAST(@YEAR AS nvarchar(4)) + RIGHT('0' + CAST(@MONTH AS nvarchar(2)), 2) + '01' AS datetime),
       @EndDate = DATEADD(month, 1, CAST(@YEAR AS nvarchar(4)) + RIGHT('0' + CAST(@MONTH AS nvarchar(2)), 2) + '01')

SELECT
...
WHERE od.item_id = il.item_id
  AND od.SEQUENCE = il.SEQUENCE
  AND od.operation_header_id = oh.operation_header_id
  AND oh.operation_type_id = o.operation_type_id
  AND o.operation_stock IN ('I', 'O')
  AND oh.operation_date >= @StartDate AND oh.operation_date < @EndDate 
```*

# c# - 如何在运行时更新（添加/修改/删除）web.config 的 AppSettings 部分中的键

> ID：15653621
> 
> 赞同：7
> 
> 时间：2013-03-27T07:22:06.753
> 
> 标签：c#, web-config, asp.net-4.0

我喜欢更新在运行时`AppSettings`部分中定义的键/值。`Web.config`但是我不想将它们实际保存到`Web.config`文件中。

我有一个巨大的 Web 应用程序，其中包含许多模块、DLL 和源代码文件。一系列关键信息，包括数据库配置、加密密钥、Web 服务的用户名和密码，都保存在文件的`AppSettings`部分中`web.config`。最近的项目要求需要我将这些值移出`web.config`并保存在安全存储中。

我已经在外部位置保护了这些值，并且可以在应用程序启动时将它们读回。

这是示例代码。

**全球.asax**

```
public class Global: System.Web.HttpApplication {
    protected void Application_Start(object sender, EventArgs e) {
        Dictionary<string, string> secureConfig = new Dictionary<string,string>{};

        // --------------------------------------------------------------------
        // Here I read and decrypt keys and add them to secureConfig dictionary
        // To test assume the following line is a key stored in secure sotrage.
        //secureConfig = SecureConfig.LoadConfig();
        secureConfig.Add("ACriticalKey","VeryCriticalValue");
        // --------------------------------------------------------------------

        foreach (KeyValuePair<string, string> item in secureConfig) {
            ConfigurationManager.AppSettings.Add(item.Key, item.Value);
        }
    }
} 
```

`AppSettings`正如您可能注意到的那样，在由多个编程团队创建的大量代码中更改引用以从我那里读取他们的设置是不可行的，`secureConfig dictionary`另一方面，我不应该将这些值保存在`web.config`可供 Web 管理员和操作员使用的文件中，系统管理员和云管理员。

为了让程序员的生活更轻松，我想让他们在开发期间将他们的值添加到`AppSettings`部分`web.config`，但它们将从那里删除并在稍后部署期间放入安全存储中，但是这些值应该可以透明地用于编程，因为它们仍在`AppSettings`部分。

**问题**：如何`AppSettings`在运行时添加值，以便程序可以读取它们`ConfigurationManager.AppSettings["ACriticalKey"]`来获取`"VeryCriticalValue"`而不将它们保存在 Web.Config 中？

**请注意**：`ConfigurationManager.AppSettings.Add(item.Key, item.Value);`给我`ConfigurationErrorsException`留言`The configuration is read only.`

**请注意**：最好某些设置应该能够`AppSettings`像以前一样保留

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-06-07T18:04:36.793

我知道这是一个老问题，但是我遇到了同样的问题，我发现 Set 的工作方式与 Add 相同，并且不会引发异常，所以只需将 Add 替换为 Set，如下所示：

```
ConfigurationManager.AppSettings.Set(item.Key, item.Value); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T07:35:12.300

你需要利用`WebConfigurationManager.OpenWebConfiguration()`

```
Configuration config = WebConfigurationManager.OpenWebConfiguration(HttpContext.Current.Request.ApplicationPath);
config.AppSettings.Settings.Remove("Variable");
config.AppSettings.Settings.Add("Variable", "valyue");
config.Save(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:34:54.147

也许[这个](http://odetocode.com/Articles/418.aspx)链接会有所帮助。它引用了 2.0，但我相信该方法在 4.0 中仍然有效。

[此外，此处](https://stackoverflow.com/questions/719928/how-do-you-modify-the-web-config-appsettings-at-runtime)关于相同/相似主题的 SO 问题可能很有趣。

此外，在运行时修改 web.config 每次都会导致应用程序池回收。不是想告诉你如何吸鸡蛋，只是想我会为了任何人的潜在兴趣而记下它......谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T03:21:05.040

感谢 nkvu 将我引导至他的第一个链接，该链接又将我发送到[Williarob](http://www.codeproject.com/script/Membership/View.aspx?mid=1370303)的帖子“[覆盖配置管理器](http://www.codeproject.com/Articles/69364/Override-Configuration-Manager)”，我设法找到了我的问题的解决方案。

提到的博客文章介绍了如何从另一个 XML 文件中读取设置，它适用于窗口应用程序和 Web 应用程序（对配置文件名和路径稍作修改）。虽然这个博客写于 2010 年，但它仍然可以在 .NET4 上正常工作，没有问题。

但是，当我要从安全设备读取我的配置时，我简化了类，这里是如何使用[Williarob提供的类](http://www.codeproject.com/script/Membership/View.aspx?mid=1370303)

```
using System;
using System.Collections.Generic;
using System.Collections.Specialized;
using System.Configuration;
using System.Configuration.Internal;
using System.Linq;
using System.Reflection;

namespace Williablog.Core.Configuration {

    public sealed class ConfigSystem: IInternalConfigSystem {
        private static IInternalConfigSystem clientConfigSystem;

        private object appsettings;

        private object connectionStrings;

        /// <summary>
        /// Re-initializes the ConfigurationManager, allowing us to merge in the settings from Core.Config
        /// </summary>
        public static void Install() {
            FieldInfo[] fiStateValues = null;
            Type tInitState = typeof(System.Configuration.ConfigurationManager).GetNestedType("InitState", BindingFlags.NonPublic);

            if (null != tInitState) {
                fiStateValues = tInitState.GetFields();
            }

            FieldInfo fiInit = typeof(System.Configuration.ConfigurationManager).GetField("s_initState", BindingFlags.NonPublic | BindingFlags.Static);
            FieldInfo fiSystem = typeof(System.Configuration.ConfigurationManager).GetField("s_configSystem", BindingFlags.NonPublic | BindingFlags.Static);

            if (fiInit != null && fiSystem != null && null != fiStateValues) {
                fiInit.SetValue(null, fiStateValues[1].GetValue(null));
                fiSystem.SetValue(null, null);
            }

            ConfigSystem confSys = new ConfigSystem();
            Type configFactoryType = Type.GetType("System.Configuration.Internal.InternalConfigSettingsFactory, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", true);
            IInternalConfigSettingsFactory configSettingsFactory = (IInternalConfigSettingsFactory) Activator.CreateInstance(configFactoryType, true);
            configSettingsFactory.SetConfigurationSystem(confSys, false);

            Type clientConfigSystemType = Type.GetType("System.Configuration.ClientConfigurationSystem, System.Configuration, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a", true);
            clientConfigSystem = (IInternalConfigSystem) Activator.CreateInstance(clientConfigSystemType, true);
        }

        #region IInternalConfigSystem Members
        public object GetSection(string configKey) {
            // get the section from the default location (web.config or app.config)
            object section = clientConfigSystem.GetSection(configKey);

            switch (configKey) {
                case "appSettings":
                    // Return cached version if exists
                    if (this.appsettings != null) {
                        return this.appsettings;
                    }

                    // create a new collection because the underlying collection is read-only
                    var cfg = new NameValueCollection();

                    // If an AppSettings section exists in Web.config, read and add values from it
                    if (section is NameValueCollection) {
                        NameValueCollection localSettings = (NameValueCollection) section;
                        foreach (string key in localSettings) {
                            cfg.Add(key, localSettings[key]);
                        }
                    }

                    // --------------------------------------------------------------------
                    // Here I read and decrypt keys and add them to secureConfig dictionary
                    // To test assume the following line is a key stored in secure sotrage.
                    //secureConfig = SecureConfig.LoadConfig();
                    secureConfig.Add("ACriticalKey", "VeryCriticalValue");
                    // --------------------------------------------------------------------                        
                    foreach (KeyValuePair<string, string> item in secureConfig) {
                        if (cfg.AllKeys.Contains(item.Key)) {
                            cfg[item.Key] = item.Value;
                        } else {
                            cfg.Add(item.Key, item.Value);
                        }
                    }
                    // --------------------------------------------------------------------                        

                    // Cach the settings for future use
                    this.appsettings = cfg;
                    // return the merged version of the items from secure storage and appsettings
                    section = this.appsettings;
                    break;

                case "connectionStrings":
                    // Return cached version if exists
                    if (this.connectionStrings != null) {
                        return this.connectionStrings;
                    }

                    // create a new collection because the underlying collection is read-only
                    ConnectionStringsSection connectionStringsSection = new ConnectionStringsSection();

                    // copy the existing connection strings into the new collection
                    foreach (ConnectionStringSettings connectionStringSetting in ((ConnectionStringsSection) section).ConnectionStrings) {
                        connectionStringsSection.ConnectionStrings.Add(connectionStringSetting);
                    }

                    // --------------------------------------------------------------------
                    // Again Load connection strings from secure storage and merge like below
                    // connectionStringsSection.ConnectionStrings.Add(connectionStringSetting);
                    // --------------------------------------------------------------------                        

                    // Cach the settings for future use
                    this.connectionStrings = connectionStringsSection;
                    // return the merged version of the items from secure storage and appsettings
                    section = this.connectionStrings;
                    break;
            }

            return section;
        }

        public void RefreshConfig(string sectionName) {
            if (sectionName == "appSettings") {
                this.appsettings = null;
            }

            if (sectionName == "connectionStrings") {
                this.connectionStrings = null;
            }

            clientConfigSystem.RefreshConfig(sectionName);
        }

        public bool SupportsUserConfig { get { return clientConfigSystem.SupportsUserConfig; } }

        #endregion
    }
} 
```

要安装此（或配置覆盖的原始版本），请将以下行添加到您的 Global. Application_Start 中的类 (Global.asax.cs)

```
Williablog.Core.Configuration.ConfigSystem .Install(); 
```

如下所示：

```
public class Global: System.Web.HttpApplication {

    //...

    #region protected void Application_Start(...)
    protected void Application_Start(object sender, EventArgs e) {
        Williablog.Core.Configuration.ConfigSystem .Install();

        //...

    }
    #endregion

    //...

} 
```

# css - 为什么 Border Radius 不支持 chrome 和 IE10。你能给出任何解决方案吗

> ID：15653627
> 
> 赞同：-3
> 
> 时间：2013-03-27T07:22:41.213
> 
> 标签：css, stylesheet

为什么 Border Radius 不支持 chrome 和 IE10。你能给出任何解决方案吗请我的代码

```
/* Rounded Corner */
.tb5 {

    border-radius:10px;
    height: 18px;
    width: 230px;
     border: 3px solid #BADA55;

     /* Safari 3-4, iOS 1-3.2, Android 1.6- */
  -webkit-border-radius: 12px; 

  /* Firefox 1-3.6 */
  -moz-border-radius: 12px; 

  /* Opera 10.5, IE 9, Safari 5, Chrome, Firefox 4, iOS 4, Android 2.1+ */
  border-radius: 12px; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:37:30.003

应该在每个浏览器的最新版本中都能正常工作，即使没有前缀（[source](http://caniuse.com/border-radius)）。你确定你的目标是正确的 HTML 元素吗？

```
<div class="tb5">
    <p>Something here...</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:25:05.333

请尝试`-ms-border-radius:12px;`

# sql-server - TSQL 中 exec 的微妙之处

> ID：15653629
> 
> 赞同：3
> 
> 时间：2013-03-27T07:22:52.737
> 
> 标签：sql-server, tsql, stored-procedures, exec

这个存储过程

```
CREATE PROC GetPage(@blockNumber int, @blockSize int = 40, @query varchar(1000)) 
AS
   DECLARE @a int = @blockNumber * @blockSize;
   DECLARE @b int = @a + @blockSize - 1;
   DECLARE @fromPos int = PATINDEX('% FROM %', @query);
   DECLARE @from varchar(1000) = SUBSTRING(@query, @fromPos, 1000);
   DECLARE @select varchar(1000) = SUBSTRING(@query, 1, @fromPos);
   DECLARE @SQL varchar(1000) = 
      'select *, ROW_NUMBER() over (order by ONE) R INTO #FOO FROM ('
      +@SELECT+',1 ONE'+@from+') T';

   EXEC @SQL;

   SELECT * FROM FOO WHERE RN BETWEEN @a AND @b;

   DECLARE @C INT = (SELECT COUNT(*) FROM #FOO);
   DROP TABLE #FOO
   RETURN @C; 
```

通过时`SELECT * FROM ASSET`生成此 SQL

```
select *, ROW_NUMBER() over (order by ONE) R INTO #FOO 
FROM (select * ,1 ONE from asset) T 
```

当我从 SQL Server Management Studio 执行此操作时，如下所示：

```
exec('select *, ROW_NUMBER() over (order by ONE) R INTO #FOO FROM (select * ,1 ONE from asset) T') 
```

它按预期创建表#FOO。

但是，当执行存储过程时：

```
exec getpage 5,10,'select * from asset' 
```

我收到这个错误

> 消息 2812，级别 16，状态 62，过程 GetPage，第 12 行
> 找不到存储过程'select *，ROW_NUMBER() over (order by ONE) R INTO FOO FROM (select * ,1 ONE from assets) T'。
> 消息 208，级别 16，状态 1，过程 GetPage，第 14 行
> 无效的对象名称“#FOO”。

我认为第二条消息仅仅是第一个错误的结果。有谁知道为什么该`exec`语句在存储过程中的行为不同？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T07:29:03.920

在你的 exec 中使用括号

```
EXEC (@SQL); 
```

[执行（事务处理 SQL）](http://msdn.microsoft.com/en-us/library/ms188332.aspx)

没有括号，你正在使用这个：

```
执行存储过程或函数
[ { 执行 | 执行 } ]
    {
      [@return_status =]
      { 模块名称 [ ; 编号 ] | @module_name_var }
        [ [ @parameter = ] { 值
                           | @变量[输出]
                           | [ 默认 ]
                           }
        ]
      [ ,...n ]
      [ 与 [ ,...n ] ]
    }
[;]

```

你想要这个需要括号的地方。

```
执行一个字符串
{ 执行 | 执行 }
    ( { @string_variable | [ N ]'tsql_string' } [ + ...n ] )
    [作为{登录| 用户} ='名称']
[;]

```

# javascript - 如何使用 JavaScript 将 html 表单用户输入添加到文件中？

> ID：15653630
> 
> 赞同：0
> 
> 时间：2013-03-27T07:22:58.603
> 
> 标签：javascript, html

我想知道如何仅使用 JavaScript 将 HTML 表单用户输入放入文件中。我一直在努力寻找这样一个简单问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:28:54.513

将数据写入本地文件系统上的文件仅在具有一系列限制的现代浏览器中受支持，您可以在谷歌上搜索 HTML FileSystem API。

至于写入文件，这是一个基本示例：

```
function onInitFs(fs) {

  fs.root.getFile('log.txt', {create: true}, function(fileEntry) {

    // Create a FileWriter object for our FileEntry (log.txt).
    fileEntry.createWriter(function(fileWriter) {

      fileWriter.onwriteend = function(e) {
        console.log('Write completed.');
      };

      fileWriter.onerror = function(e) {
        console.log('Write failed: ' + e.toString());
      };

      // Create a new Blob and write it to log.txt.
      var blob = new Blob(['Lorem Ipsum'], {type: 'text/plain'});

      fileWriter.write(blob);

    }, errorHandler);

  }, errorHandler);

}

window.requestFileSystem(window.TEMPORARY, 1024*1024, onInitFs, errorHandler); 
```

# traversal - 网站数据爬虫，发布数据和遍历

> ID：15653634
> 
> 赞同：0
> 
> 时间：2013-03-27T07:23:20.240
> 
> 标签：traversal, web-crawler, posting

尽管有很多关于这些主题的帖子，但我的问题有点具体。我需要解析几个网站，一旦完成，我需要向它发送一些数据。例如，假设网站 A 为我提供了一个搜索选项卡，我需要以编程方式向它提供数据。结果页面可能因目标站点的更新而异。我想编写这样一个爬虫。那么哪种工具/语言最能实现这一点？我已经精通java和C，所以任何基于这些的东西都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:15:52.123

我建议使用[phantomjs](http://phantomjs.org/)。它完全免费，支持 Windows、Linux、Mac。

*   安装非常简单。
*   使用命令行执行非常简单。
*   社区很大，解决直截了当的问题是微不足道的。
*   它使用 JavaScript 作为脚本语言，所以我想，如果你有 Java 背景，你会没事的。
*   您必须熟悉 DOM 结构。好吧，您不能在不知情的情况下编写爬虫（即使您选择完全可视化的解决方案）。

一切都取决于爬虫的执行频率：PhantomJs 非常适合长期工作。如果您正在寻找一次性解决方案，请使用其他视觉工具，例如[iMacros 。](http://www.iopus.com/iMacros/)它可以作为扩展在 Mozilla 内部使用（免费），并且有一个需要付费的独立版本。

干杯

# c++ - 删除字符串中的一个字符

> ID：15653655
> 
> 赞同：0
> 
> 时间：2013-03-27T07:24:56.190
> 
> 标签：c++, string

我需要删除字符串中的指定位置

例如：

输入：4 花

输出：弗洛尔

我写了这段代码，但它给出了一个输出： Flo（即擦除了单词的其余部分）我可以使用什么其他函数而不是擦除来实现这个目标？

```
int main(){

    int num;
    int index = 1;
    string s;

    cin >> num >> s;
    s = s.erase(num-1);
    cout << index << " " << s << endl;

return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T07:27:04.643

尝试：

```
s.erase(num-1, 1); 
```

您目前（有效地）致电：

```
s.erase(num-1, npos); 
```

（并删除该`s =`位，因为无需重新分配`s`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:35:54.597

如果您是 C++ 世界的初学者，我建议您编写自己的函数来完成它！您可以随时使用标准函数和类。有人可能会说，为什么要重新发明轮子，但这不是关于重新发明，而是了解发明的含义，轮子是什么，以及它是如何发明的。

编写我们自己的代码（特别是 C 字符串！）会给你很好的编程经验，会给语法带来信心，最重要的是它会提高你的逻辑开发技能。

你的功能可能是这样的：

```
void RemoveCharacter(char* pString, char cCharToRemove); 
```

现在，问题是：它会删除所有出现的相同字符，还是只删除第一个？如果没有出现给定字符怎么办？这个函数应该返回一些东西，如果它删除了字符，还是一个删除计数器？它是否应该采用另一个参数，即“删除所有出现”。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:27:52.807

这个怎么样？

```
std::string removeChar(std::string const& input, size_t pos) {
    return input.substr(0, pos-1) + input.substr(pos);
} 
```

或这个

```
std::string removeChar(std::string const& input, size_t pos) {
    return input.erase(pos-1, 1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:55:39.233

试试看 `s.erase(num-1, 1)`，这就是你想要的。

std::string::erase 的原型是

```
erase(size_t __pos = 0, size_t __n = npos) 
```

如果没有提供第二个参数，`npos`将使用默认值并删除从 __pos 开始的剩余部分。

# android - 安卓应用统计

> ID：15653656
> 
> 赞同：4
> 
> 时间：2013-03-27T07:24:58.077
> 
> 标签：android, google-play

大约 20 小时前，我在 Google 市场上发布了我的第一个 android 应用程序。一切正常，但我想知道我是否做错了什么。我看不到此应用的统计信息：“抱歉，没有此指标的数据”。这是因为我的应用程序是新发布的，还是因为代码（也许我必须插入一些代码才能启用跟踪）？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:26:19.233

它需要更长的时间。我不确定确切的周期，但第一次更新需要一天左右的时间。

如果它是付费应用程序，您可以通过查看您的商家帐户来查看下载次数。

# r - 将 1 列数据框与列表中的值组合

> ID：15653663
> 
> 赞同：2
> 
> 时间：2013-03-27T07:25:39.177
> 
> 标签：r, append

所以我有一列叫做“数字”，它有这个输出

```
Number
10
20
30
40
50
60
70
80
90
100
110
120
130
140
150
160
170
180
190
200 
```

另一个名为“Value”的输出具有此输出

```
[[1]]
[1] 0.2231071

[[2]]
[1] 0.3432919

[[3]]
[1] 0.0002351737

[[4]]
[1] 0.01550648

[[5]]
[1] 0.000560943

[[6]]
[1] 2.168151e-06 
```

这最多 20 个值所以我想将这两个输出附加在一起......所以我想要一个看起来像这样的数据框

```
Number Values
10     0.2231071
20     0.3432919
30     0.0002351737 
```

等...最多200...我该怎么做？就像是`data.frame(Number,Values...??)`

多谢你们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:29:49.060

您可以使用`cbind`或`data.frame`：

```
cbind(Number, Values=unlist(Value)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T07:30:40.883

如果你的两个对象是`Numbers`，`Values`那么你可以做

```
data.frame(Number, unlist(Value)) 
```

# java - 在android中的TextWatcher中替换字符

> ID：15653664
> 
> 赞同：5
> 
> 时间：2013-03-27T07:25:40.333
> 
> 标签：java, android, textwatcher

我使用 TextWatcher 来更改按下的键值。我的目标是在打字时替换一些字符。例如，当我键入键时，如果达到“S”字符，则将其替换为“a”字符。我的问题是：我应该在 beforeTextChanged 中做吗？如何？谁能给我一个例子？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-04-26T08:38:20.427

我知道这篇文章已经有几年的历史了，但是两个版本都不适合我，并且在两个答案之间建立了一个混合体。

```
@Override
public void afterTextChanged(Editable editable) {    
    if (editable.toString().contains(",")) {
       Editable ab = new SpannableStringBuilder(editable.toString().replace(",", ""));
       editable.replace(0, editable.length(), ab);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:36:44.560

使用 beforeTextChanged 不会有用，因为它不会中断 EditText 键的实际打印。我会使用类似的东西：

```
 public void afterTextChanged(Editable s) {
        if(s.length() > 0 && s.toString().charAt(s.length()-1) == 'S')
        {
            final String newText = s.toString().substring(0, s.length()-1) + "a"; 
            editText.setText(newText); 
        }
    } 
```

我添加了一些 toString()，不是 100% 确定 Editable 是如何工作的，但我认为应该涵盖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-25T12:36:41.927

您必须在 中执行此操作`afterTextChanged`，但不要忘记***分离*** 并***重新附加***以`TextChangedListener`防止无限循环。
一个简单的例子如下所示：

```
public void afterTextChanged(Editable s) {
        editText.removeTextChangedListener(this);
        //.. do changes here ..//
        editText.setText(newText);
        editText.addTextChangedListener(this);
} 
```

但是当你调用 时还有另一个问题`setText`，它会导致光标移动到 textView 内文本的末尾。所以你必须自己计算光标的新位置，记住用户可以通过粘贴或删除文本的选定部分来一次输入多个字符。
这是一个更完整的例子。此观察程序类删除文本的所有非数字字符。

```
public class NumWatcher implements TextWatcher {
    private EditText editText;
    private int selPos;
    private String oldString, newString;
    public NumWatcher(EditText editText) {
        this.editText = editText;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        selPos = editText.getSelectionStart();
        oldString = myFilter(s.toString());
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        editText.removeTextChangedListener(this);
        newString = myFilter(s.toString());
        editText.setText(newString);
        int newPos = selPos + (newString.length() - oldString.length());
        if (newPos < 0) newPos = 0;
        editText.setSelection(newPos);
        editText.addTextChangedListener(this);
    }

    public String myFilter(String s) {
        String digits;
        digits = s.replaceAll("[^0-9]", "");
        if (s.equals("")) return "";
        return digits;
    }
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-27T08:26:48.437

```
@Override
public void afterTextChanged(Editable arg0) {
    Editable ab = new SpannableStringBuilder(arg0.toString().replace("S", "a"));
    arg0 = ab ;
} 
```

# regex - 使用 lex 正则表达式提取子字符串

> ID：15653671
> 
> 赞同：2
> 
> 时间：2013-03-27T07:26:21.980
> 
> 标签：regex, lex

是否可以使用正则表达式提取子字符串`lex`，就像可以使用`sed`?

例如

```
sed -e 's/[0-9]*\([a-z]*\)[0-9]*/\1/' 
```

将从中提取或`foo`从`34234foo777``bar``123bar456`

是否可以像这样使用 lex 来做到这一点：

```
[0-9]*\([a-z]*\)[0-9]*     printf("alphabetical substring is %s\n", /*what?? \1 ??*/); 
```

`yytext`不通过普通 C解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:57:48.343

有一个使用 Yacc 的解决方案，考虑到它`[0-9] is numeric and [a-z]`是 alpha

所以你的语法是：

```
stmt : NUMERIC ALPHA NUMERIC    printf("alphabetical substring is %s\n", $2)
     ; 
```

lex 给出的 ALPHA 和 NUMERIC

# asp.net-mvc - 更新数据库 - 列不存在

> ID：15653674
> 
> 赞同：3
> 
> 时间：2013-03-27T07:26:47.843
> 
> 标签：asp.net-mvc, entity-framework

当我尝试使用`update-database -verbose -force`时，我收到一个错误：

`ALTER TABLE DROP COLUMN failed because column 'countReferralsRegistrations' does not exist in table 'UserProfile'.`

问题是 - 我在模型和表 UserProfile 中没有（而且我不想有）这个列。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T12:07:18.433

解决方案

先用:`Add-Migration InitialMigrations -IgnoreChanges`然后 `update-database verbose`. 这将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-04T05:57:54.677

这会发生，因为您可以手动删除表列并更新数据库，

**这是解决方案**。- 打开您最后创建的迁移文件。- 注释下面的行并再次更新数据库 - DropForeignKey、DropIndex、DropColumn

谢谢你..

# elasticsearch - 在elasticsearch中返回时间戳字段

> ID：15653676
> 
> 赞同：13
> 
> 时间：2013-03-27T07:26:48.950
> 
> 标签：elasticsearch

为什么在能够过滤查询时看不到 _timestamp 字段？

以下查询返回正确的文档，但不返回时间戳本身。如何返回时间戳？

```
{
  "fields": [
    "_timestamp",
    "_source"
  ],
  "query": {
    "filtered": {
      "query": {
        "match_all": {}
      },
      "filter": {
        "range": {
          "_timestamp": {
            "from": "2013-01-01"
          }
        }
      }
    }
  }
} 
```

映射是：

```
{
    "my_doctype": {
        "_timestamp": {
            "enabled": "true"
        },
        "properties": {
            "cards": {
                "type": "integer"
            }
        }
    }
} 
```

样本输出：

```
{
  "took" : 1,
  "timed_out" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0
  },
  "hits" : {
    "total" : 2,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "test1",
      "_type" : "doctype1",
      "_id" : "HjfryYQEQL6RkEX3VOiBHQ",
      "_score" : 1.0, "_source" : {"cards": "5"}
    }, {
      "_index" : "test1",
      "_type" : "doctype1",
      "_id" : "sDyHcT1BTMatjmUS0NSoEg",
      "_score" : 1.0, "_source" : {"cards": "2"}
    }]
  } 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T10:19:53.867

启用时间戳字段后，默认情况下会对其进行索引但不存储。因此，虽然您可以按时间戳字段进行搜索和过滤，但您无法通过记录轻松检索它。为了能够检索时间戳字段，您需要使用以下映射重新创建索引：

```
{
    "my_doctype": {
        "_timestamp": {
            "enabled": "true",
            "store": "yes"
        },
        "properties": {
            ...
        }
    }
} 
```

这样，您将能够检索时间戳作为自纪元以来的毫秒数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-18T02:13:50.330

没有必要存储时间戳字段，因为它的确切值被保存为一个术语，它也更有可能已经存在于 RAM 中，特别是如果您正在查询它。您可以使用以下术语通过时间戳访问时间戳`script_value`：

```
{
    "query": {
        ...
    },
    "script_fields": {
        "timestamp": {
            "script": "_doc['_timestamp'].value"
        }
    }
} 
```

结果值以自 UNIX 纪元以来的毫秒数表示。ElasticSearch 无法为您做到这一点，这真是太可耻了，但是，嘿，没有什么是完美的。

# perl - 如何打印在另一个文件中定义的哈希元素？

> ID：15653682
> 
> 赞同：1
> 
> 时间：2013-03-27T07:27:15.957
> 
> 标签：perl, hash, require

如何打印在另一个文件中定义的哈希元素？

文件 1.pl：

```
#!/usr/bin/perl
use strict;
use warnings;
our %hash = 
("Quarter" , 25,
 "Dime"    , 10,
 "Nickel"  , 5 ); 
```

文件2.pl：

```
#!/usr/bin/perl
use strict;
use warnings;
require "file1.pl"
foreach (sort keys %hash){
print "$hash{$_}\n";
} 
```

输出：

```
Global symbol "%hash" requires explicit package name.
Global symbol "%hash" requires explicit package name. 
```

* * *

请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:55:42.807

模块需要一个`package`语句并且必须以一个真值结束。（它目前返回一个真值，但我喜欢使用显式的`1;`.）最好给他们`.pm`扩展名。

```
# MyConfig.pm
package MyConfig;
use strict;
use warnings;
our %hash = (
   "Quarter" => 25,
   "Dime"    => 10,
   "Nickel"  =>  5,
);
1; 
```

现在，如果你把它留在那里，你需要使用`%MyConfig::hash`而不是`%hash`. 所以我们需要将模块中的 var 导出到用户的命名空间。

```
# MyConfig.pm
package MyConfig;
use strict;
use warnings;
use Exporter qw( import );
our @EXPORT = qw( %hash );
our %hash = (
   "Quarter" => 25,
   "Dime"    => 10,
   "Nickel"  =>  5,
);
1; 
```

继续脚本：

```
#!/usr/bin/perl
use strict;
use warnings;
use MyConfig;
for (sort keys %hash) {
   print "$hash{$_}\n";
} 
```

`use MyConfig;`做一个要求（如果需要）和一个进口。后者将列出的变量和子项`@EXPORT`带入当前命名空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:45:24.927

忽略您发布的代码与实际给出您声称的错误消息相距很多编辑的事实，您的问题是您没有`%hash`在 file2.pl 中声明。由于该文件使用了`strict`pragma（这是一件好事），因此它给出了这个致命错误。为了克服这个问题，声明散列：

```
our %hash;
require 'file1.pl';
#... etc. 
```

但是，如果您尝试将其`require`用作加载配置文件的一种方式，还有很多更好的方法。例如[`Config::Any`](http://search.cpan.org/perldoc?Config%3a%3aAny).

# python - 在 Python Pandas DataFrame 中保留列顺序

> ID：15653688
> 
> 赞同：44
> 
> 时间：2013-03-27T07:27:37.053
> 
> 标签：python, pandas

有没有办法在使用 Python Pandas 读取和写入时保留 csv 文件中列的顺序？例如，在这段代码中

```
import pandas as pd

data = pd.read_csv(filename)
data.to_csv(filename) 
```

输出文件可能不同，因为未保留列。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-06-06T09:28:50.193

当前版本的 Pandas ('0.11.0') 中似乎存在一个错误，这意味着 Matti John 的答案将不起作用。如果您指定用于写入文件的列，它们将按字母顺序写入，但只是根据 cols 中的列表重新标记。例如，这段代码：

```
import pandas
dfdict={}
dfdict["a"]=[1,2,3,4]
dfdict["b"]=[5,6,7,8]
dfdict["c"]=[9,10,11,12]
df=pandas.DataFrame(dfdict)
df.to_csv("dfTest.txt","\t",header=True,cols=["b","a","c"]) 
```

导致这个（不正确的）输出：

```
 b   a   c
0   1   5   9
1   2   6   10
2   3   7   11
3   4   8   12 
```

您可以通过执行以下命令检查您安装了哪个版本的熊猫：

```
pandas.version.version 
```

to_csv 的文档在[这里](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_csv.html)

实际上，这似乎是一个已知错误，将在即将发布的版本 (0.11.1) 中修复：

[https://github.com/pydata/pandas/issues/3489](https://github.com/pydata/pandas/issues/3489)

更新：仍然没有新版本的熊猫，但这里描述了一种解决方法，它不需要使用不同版本的熊猫：

[github.com/pydata/pandas/issues/3454](https://github.com/pydata/pandas/issues/3454)

因此，将上面代码块中的最后一行更改为以下内容将正常工作：

```
df.to_csv("dfTest.txt","\t",header=True,cols=["b","a","c"], engine='python') 
```

更新似乎参数“cols”已重命名为“columns”，并且在最新版本的熊猫中，参数“engine”已被弃用（不再可用）。此外，此错误已在版本 0.19.0 中修复。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-03-27T12:24:29.643

在读取然后写入这样的 csv 文件时，通常应该保留列顺序，但如果由于某种原因它们不是您想要的顺序，您可以使用`columns`关键字参数 in `to_csv`。

例如，如果您有一个包含 a、b、c、d 列的 csv：

```
data = pd.read_csv(filename)
data.to_csv(filename, columns=['a', 'b', 'c', 'd']) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-28T02:22:10.800

另一种解决方法是这样做：

```
import pandas as pd
data = pd.read_csv(filename)
data2 = df[['A','B','C']]  #put 'A' 'B' 'C' in the desired order
data2.to_csv(filename) 
```

# ruby - Resque 工作人员的最佳数量以获得最佳性能

> ID：15653691
> 
> 赞同：1
> 
> 时间：2013-03-27T07:27:48.917
> 
> 标签：ruby, mongodb, parallel-processing, resque

我正在使用 Resque 在我的学术研究中实现廉价的并行性——我将巨大的任务分成相对较小的独立部分并将它们提交给 Resque。这些任务做了一些繁重的工作，广泛使用数据库（如果这很重要的话是 MongoDB）和 CPU。

所有这些工作都非常缓慢 - 对于我相对较小的数据集部分，创建了 1000 个工作，并且 2 名工人持续工作 14 小时仅足以完成约 800 个工作。正如您可能已经怀疑的那样，这种速度令人沮丧。

我有一个四核处理器（Core i5 的东西，不是高端的），除了 Mongo 实例和 resque 工作人员，在相当长的一段时间内没有任何东西被安排在 CPU 上。

既然你知道了我的故事，我只想问 -**我如何最大限度地利用这个设置**？我相信 3 个工人 + 1 个 mongo 实例会很快填满所有核心，但同时 mongo 不必一直工作。

# highcharts - 如何将 highstock 日期更改为波斯日期

> ID：15653694
> 
> 赞同：6
> 
> 时间：2013-03-27T07:27:59.193
> 
> 标签：highcharts, highstock, persian

我正在使用高图表。我正在尝试将其日期更改为**波斯语**，但由于它使用的是 Date.UTC 我无法更改它！

我看过[http://api.highcharts.com/highstock#lang](http://api.highcharts.com/highstock#lang)但它似乎不支持波斯语。

你知道有什么方法可以把它变成波斯日期吗？我可以遇到的一种方法是将 UTC 日期更改为波斯日期的算法。

有没有办法解决这个问题？请帮我...

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T08:54:06.587

您必须做一些工作才能将其纳入高图表。

首先，找到一个将日期转换为波斯日期的 javascript 库。这个看起来很有希望：http: [//intldate.codeplex.com/](http://intldate.codeplex.com/)

其次，您需要自定义 highcharts 日期格式。Highcharts 提供了一个 API 来做到这一点：

[http://api.highcharts.com/highcharts#Highcharts.dateFormat()](http://api.highcharts.com/highcharts#Highcharts.dateFormat())

您需要使用 dateFormats 挂钩将 %P 选项添加到使用您选择的 javascript 库以波斯格式打印的日期格式字符串中。定义 %P 格式后，您可以自定义要在 x 轴上使用的日期格式：http: [//api.highcharts.com/highcharts#xAxis.dateTimeLabelFormats](http://api.highcharts.com/highcharts#xAxis.dateTimeLabelFormats)

```
{
second: '%H:%M:%S',
minute: '%H:%M',
hour: '%H:%M',
day: '%P',
week: '%P',
month: '%P',
year: '%P'
} 
```

请注意，您可以定义多个 dateFormat 参数，而不仅仅是 %P，来处理天、月等。

# c - 如何将 char[] 中的 IP 地址转换为 c 中的 Uint32_t？

> ID：15653695
> 
> 赞同：8
> 
> 时间：2013-03-27T07:28:13.563
> 
> 标签：c

我编写了一个将 IP 地址作为参数的程序，我想将此 IP 地址存储在 unit32_t 中。我可以轻松地将 uint32_t 转换回字符数组。如何将字符数组中的 IP 地址转换为 uint32_t。

例如

> ./IPtoCHAR 1079733050

uint32_t 到 IP 地址 => 64.91.107.58

但是如何编写一个执行相反任务的程序呢？

> ./CHARtoIP 64.91.107.58

* * *

对于第一个 IPtoCHAR，它是

> 无符号整数 ipAddress = atoi(argv[1]);
> 
> printf("IP 地址 %d.%d.%d.%d \n",((ipAddress >> 24) & 0xFF),((ipAddress >> 16) & 0xFF),((ipAddress >> 8) & 0xFF),(IP 地址 & 0xFF));

但是下面的所有这些都不起作用

> uint32_t aa=(uint32_t)("64.91.107.58");
> 
> uint32_t aa=atoi("64.91.107.58");
> 
> uint32_t aa=strtol("64.91.107.58",NULL,10);

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T07:30:02.503

您使用[`inet_pton`](http://man7.org/linux/man-pages/man3/inet_pton.3.html). 功能

相反，您应该使用[`inet_ntop`](http://man7.org/linux/man-pages/man3/inet_ntop.3.html).

* * *

有关特定于 Windows 的文档，请参阅[`inet_pton`](https://docs.microsoft.com/en-us/windows/desktop/api/ws2tcpip/nf-ws2tcpip-inet_pton)和[`inet_ntop`](https://docs.microsoft.com/en-us/windows/desktop/api/ws2tcpip/nf-ws2tcpip-inet_ntop)。

* * *

请注意，这些函数可用于 IPv4 和 IPv6。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-30T14:43:29.667

如果您无法访问 inet_* 函数或由于任何其他奇怪的原因需要自己编写代码，您可以使用如下函数：

```
#include <stdio.h>

/**
 * Convert human readable IPv4 address to UINT32
 * @param pDottedQuad   Input C string e.g. "192.168.0.1"
 * @param pIpAddr       Output IP address as UINT32
 * return 1 on success, else 0
 */
int ipStringToNumber (const char*       pDottedQuad,
                              unsigned int *    pIpAddr)
{
   unsigned int            byte3;
   unsigned int            byte2;
   unsigned int            byte1;
   unsigned int            byte0;
   char              dummyString[2];

   /* The dummy string with specifier %1s searches for a non-whitespace char
    * after the last number. If it is found, the result of sscanf will be 5
    * instead of 4, indicating an erroneous format of the ip-address.
    */
   if (sscanf (pDottedQuad, "%u.%u.%u.%u%1s",
                  &byte3, &byte2, &byte1, &byte0, dummyString) == 4)
   {
      if (    (byte3 < 256)
           && (byte2 < 256)
           && (byte1 < 256)
           && (byte0 < 256)
         )
      {
         *pIpAddr  =   (byte3 << 24)
                     + (byte2 << 16)
                     + (byte1 << 8)
                     +  byte0;

         return 1;
      }
   }

   return 0;
} 
```

# c++ - 用我自己的源目录生成 vs2010 项目文件

> ID：15653697
> 
> 赞同：6
> 
> 时间：2013-03-27T07:28:25.737
> 
> 标签：c++, c, visual-studio-2010, cmake

在我的大多数 c++ 项目中，我想使用与 Visual Studio 默认目录结构不同的目录结构。IE：

```
/project
    /build  # put visual studio soluation and project files
    /src  # only put the c++ header files and source files
    /bin  # put the target executable files
        /debug
        /release
    /tmp
        /debug
        /release 
```

每次我在 vs2010 中创建一个解决方案时，我都会配置这些目录（例如 OutputDirectory），但现在我对此真的很无聊。

那么有没有一个工具可以根据我的配置文件自动生成 vs2010 解决方案和项目文件？我唯一的要求是设置这些目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T09:14:25.437

您可以使用以下 CMakeList 实现该结构。以下假设文件位于`.../project/CMakeLists.txt`：

```
cmake_minimum_required(VERSION 2.8) #every top-level project should start with this command; replace the version with the minimum you want to target
project(MyProjectName)

set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin)  # put .exe and .dll files here
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin)  # put .so files here (if you ever build on Linux)
set(CMAKE_MODULE_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/bin)  # put .dll and .so files for MODULE targets here
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_SOURCE_DIR}/lib)  # put .lib files here

# Note that for multi-configuration generators (like VS), the configuration name will be appended to the above directories automatically

# Now that the directories are set up, we can start defining targets

add_executable(MyExe src/myExe.cpp)
add_library(MyLib SHARED src/myDLL.cpp)

target_link_libraries(MyExe MyLib) 
```

调用 CMake 时，将输出目录设置为`.../project/build`（例如在 CMake GUI 中）。如果从命令行运行，请执行以下操作：

```
> cd .../project/build
> cmake .. -G "Visual Studio 10" 
```

请注意，一些生成器（Eclipse）不喜欢将输出目录作为源目录的子目录。对于这种情况，建议进行轻微的目录重组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T08:16:22.753

例如，您可以在 C# 中自己编写这样的工具，查看`Microsoft.Build.Construction`命名空间中的类，它们是为以编程方式创建项目而设计的。

然而，一个更简单但更通用的选项是在所有项目中使用相同的属性表，并设置您需要的所有目录路径。这还具有可重用的巨大优势，因此如果您决定更改输出目录，所有引用您的属性表的项目都会自动受到影响。例如：

```
<?xml version="1.0" encoding="utf-8"?> 
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <MyMainDir>$(ProjectPath)\..\</MyMainDir>
    <OutDir>$(MyMainDir)\bin\$(ConfigurationName)</OutDir>
    <IntDir>$(MyMainDir)\tmp\$(ConfigurationName)</IntDir>
  </PropertyGroup>
</Project> 
```

这将首先找出您的“主目录”，即您的问题中名为“项目”的目录，然后根据该目录和当前的名称设置输出和中间目录`ConfigurationName`，默认情况下为`Debug`or `Release`。

现在只需在项目中导入此属性表即可：转到`View->Other Windows->Property Manager`，右键单击项目，选择`Add Existing property Sheet`。`<Import Project=....>`或者您可以在项目文件中手动添加一个。

当您使用它时，您还可以将编译器/链接器选项添加到属性表中，以便您的所有项目都使用相同的选项。现在这需要一些时间，但将来会为您节省大量时间，因为您不必一遍又一遍地更改项目设置中的相同选项。

# iphone - 适用于 iOS 应用程序的带有 ARC 的 YouTube Objective C GData API？

> ID：15653698
> 
> 赞同：1
> 
> 时间：2013-03-27T07:28:41.673
> 
> 标签：iphone, ios, ipad, youtube, youtube-api

我在我的 iOS 应用程序中使用 YouTube Objective C GData API。

我的应用程序处于 ARC 中，但 GData API 处于非 ARC 模式。我已经搜索找到它的 ARC 目标 c api，但没有运气。

还尝试通过执行以下操作将 api 转换为 arc，1.手动转换。2\. 将库转换为静态库。3\. 在文件的编译源中提供 -fno-objc-arc 标志。

但似乎没有任何效果。

我只需要知道在哪里可以使用 ARC 获取 api。或任何将其转换为 ARC 的方法。

谢谢，伊斯瓦尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T22:52:42.670

选择目标 -> 构建阶段。打开编译源列表。

在这里，您可以看到您添加到目标的 GData API 文件，例如 GTLNetworking_Sources.m 和任何其他文件。您需要将这些文件标记为禁用 ARC，这样即使项目启用了 ARC，Xcode 也可以将它们编译为禁用 ARC。

为此，请转到编译源。双击 GData API 文件，将出现一个弹出窗口。将此 -fno-objc-arc 复制并粘贴到弹出窗口中。对您添加到目标的每个 GData API 文件重复此操作。构建项目。

这将帮助您解决问题。

# ruby - ruby FTP被动模式错误

> ID：15653702
> 
> 赞同：9
> 
> 时间：2013-03-27T07:28:50.560
> 
> 标签：ruby, ftp

我尝试将 FTP 与被动模式一起使用：

```
require 'net/ftp'
ftp =  Net::FTP.new
ftp.passive = true
ftp.connect('mydomain.com')
ftp.login
filenames = ftp.nlst 
```

但是有错误：

```
Errno::ETIMEDOUT: Connection timed out - connect(2) 
```

虽然**在活动模式下它工作正常**！

我使用红宝石 1.9.3。当我设置调试模式时：

```
ftp.debug_mode = true 
```

我懂了：

```
 **ftp.connect('mydomain.com')**
connect: mydomain.com, 21
get: 220---------- Welcome to Pure-FTPd [privsep] ----------
get: 220-You are user number 3 of 50 allowed.
get: 220-Local time is now 11:43\. Server port: 21.
get: 220-IPv6 connections are also welcome on this server.
get: 220 You will be disconnected after 15 minutes of inactivity.
=> nil
irb(main):103:0> ftp.login
put: USER anonymous
get: 230 Anonymous user logged in
put: TYPE I
get: 200 TYPE is now 8-bit binary
=> true
irb(main):104:0> filenames = ftp.nlst
put: TYPE A
get: 200 TYPE is now ASCII
put: PASV
get: 227 Entering Passive Mode (1,27,13,19,17,15)
put: TYPE I
get: 200 TYPE is now 8-bit binary
Errno::ETIMEDOUT: Connection timed out - connect(2) 
```

我还发现，使用了`transfercmd`来自`Net::FTP`主机的功能，与我的域 IP 地址不同！也许它是一个私人IP地址？这里有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T10:45:21.000

我已经覆盖[`makepasv`](http://apidock.com/ruby/Net/FTP/makepasv)了方法`Net::FTP`并且它有效！

```
module Net
  class FTP
    def makepasv # :nodoc:
      if @sock.peeraddr[0] == "AF_INET"
        #host, port = parse227(sendcmd("PASV")) #WAS!
        host, port = parse229(sendcmd("EPSV"))
      else
        host, port = parse229(sendcmd("EPSV"))
      end
      return host, port
    end
  end
end 
```

# search - 数据结构搜索复杂度

> ID：15653706
> 
> 赞同：2
> 
> 时间：2013-03-27T07:29:00.713
> 
> 标签：search, stack, queue, time-complexity

在链表中搜索的复杂度是 O(n)。

在队列或堆栈中搜索也是 O(n)，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:30:34.567

如果它们是无序的，那么是的，`O(n)`因为在最坏的情况下，您必须检查每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T13:03:33.857

不完全是。

这取决于您的实施。例如，如果您在队列/堆栈中有一个哈希表，那么您将获得一个“超级”队列/堆栈，其中包含 O(1) 推送/弹出/搜索。

# c# - 如何在代码隐藏中添加 <%= %> 标记

> ID：15653709
> 
> 赞同：1
> 
> 时间：2013-03-27T07:29:05.253
> 
> 标签：c#, javascript, asp.net, user-controls, tags

我在代码隐藏中创建了一些输入控件（文本）作为动态 RadiobuttonLists 的一部分（以便文本框位于每个单选按钮旁边）：

```
RadioButtonList radioOption = new RadioButtonList();

radiobuttonlist.Items.Add(new ListItem(dt.Rows[i][9].ToString() + " <input id=\"" + name + "\" runat=\"server\" type=\"text\" value=\"Enter text\" />") 
```

所有控件都在 UpdatePanel 中。

如何在后面的代码中更新输入标签，以便我可以得到如下的值：

```
value="<%= this.InputValue %>" /> 
```

原因是我可以访问/设置 Page_Load 中的值（在回发时，输入文本消失）：

```
 protected void Page_Load(object sender, EventArgs e) 
{ 
    if (!Page.IsPostBack) 
    { 
        this.InputValue = "something"; 
    } 
} 
```

有任何想法吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T13:51:36.553

我认为您遇到了[ASP.NET Page Life Cycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx)的问题。

当您将控件动态添加到页面的控件集合时，您需要在正确的时间设置它们。从上面链接的文档中：

> 在启动阶段完成后和初始化阶段开始之前引发。
> 
> 将此事件用于以下情况：
> ...
> 
> *   创建或重新创建动态控件。
> 
> ...

这样，您就可以使用正常的 ASP.NET 视图状态来跨 PostBacks 保留信息。

如果您在[Page_PreInit](http://msdn.microsoft.com/en-us/library/system.web.ui.page.preinit.aspx)事件期间创建动态 RadioButtonLists，我想您的大部分问题都会得到解决。

```
protected void Page_PreInit(Object sender, EventArgs e)
{
    RadioButtonList radioOption = new RadioButtonList();
    radiobuttonlist.Items.Add(new ListItem(dt.Rows[i][9].ToString() + " <input id=\"" + name + "\" runat=\"server\" type=\"text\" value=\"Enter text\" />")
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T13:52:00.960

我建议你`UpdatePanel.Update method`在你的代码后面使用，以便用新值更新你的内容

注意：您的字段 InputValue 必须在 UpdatePanel 部分中，以便刷新

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.update.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.updatepanel.update.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:36:17.620

该值总是消失，因为您没有在回发中保留数据。我什至没有这个

> “<%= this.InputValue %>”

会按照你想象的方式渲染。<% %> 标签由服务器呈现，而不是浏览器。相反，使用视图状态或会话在回发中保留值。如果您需要帮助，请发布更多控件的代码以及您遇到的问题

# android - 来自 Android 设备的 Asterisk Manager 界面

> ID：15653710
> 
> 赞同：0
> 
> 时间：2013-03-27T07:29:06.743
> 
> 标签：android, http, asterisk, httpurlconnection

我已经正确设置了 Asterisk 服务器以允许 GUI 界面，为了检查这一点，我已经尝试并测试了一个已经可用的 Android 应用程序并用我的浏览器进行了测试。我能够登录并查看文件。例如。 [http://192.168.8.x:8088/asterisk/rawman?action=getconfig&filename=users.conf](http://192.168.8.x:8088/asterisk/rawman?action=getconfig&filename=users.conf)

此命令向我显示 user.conf 文件。

但是，相同的命令不适用于我的 Android 应用程序。结果是

响应：错误消息：权限被拒绝

我的代码：第一个按钮点击：try{ new mygoogleSearch().execute( [http://192.168.8.x:8088/asterisk/rawman?action=login&username=tismo&secret=tismo123](http://192.168.8.x:8088/asterisk/rawman?action=login&username=tismo&secret=tismo123) ); } catch(Exception e) { Log.v("Exception google search","Exception:"+e.getMessage()); }

这将返回：03-27 17:27:09.468：E/GoogleSearch(21686)：响应：SuccessMessage：身份验证已接受

在第二个按钮上单击：

```
try{
            new Execute().execute("http://192.168.8.4:8088/asterisk/rawman?action=getconfig&filename=test.conf");
} catch(Exception e) {
Log.v("Exception google search","Exception:"+e.getMessage());
} 
```

类 mygoogleSearch 扩展 AsyncTask {

```
protected String doInBackground(String... searchKey) {
    ;
    String cmd = searchKey[0];
    try {
        return  action(cmd);

    } catch(Exception e) {
        Log.v("Exception ",
                "Exception:"+e.getMessage());
        return "";
    }
} 
```

私有字符串操作（字符串 uRL）抛出 MalformedURLException，IOException { String newFeed= uRL; StringBuilder 响应 = new StringBuilder();

```
 URL url = new URL(newFeed);
    HttpURLConnection httpconn  = (HttpURLConnection) url.openConnection();
    httpconn.setUseCaches(false);
    //httpconn.setRequestProperty("Cache", "false");
    if(httpconn.getResponseCode()==HttpURLConnection.HTTP_OK) {
        BufferedReader input = new BufferedReader(
                new InputStreamReader(httpconn.getInputStream()),
                8192);
        String strLine = null;
        while ((strLine = input.readLine()) != null) {
            response.append(strLine);
        }
        input.close();
    }
    return response.toString();

} 
```

这返回：

03-27 17:28:31.808：E/GoogleSearch(21800)：响应：错误消息：权限被拒绝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:08:37.670

您需要一个 CookieManager 来连接到同一个会话。

[引用来自 asteriskbook “权威指南”](http://www.asteriskdocs.org/en/2nd_Edition/asterisk-book-html-chunk/I_sect111_tt1376.html)
“LOGIN 命令验证管理器界面的 HTML 视图的凭据。一旦您登录，Asterisk 会在您的浏览器上存储一个 cookie（对 httptimeout 设置的长度有效）。使用此 cookie连接到同一个会话。”

*更新：*模仿浏览器的 CookieManager 存储示例：
[如何将 Cookie 与 HttpUrlConnection 一起使用](https://stackoverflow.com/questions/15674371/how-to-use-cookies-in-httpurlconnection-for-android)，[使用 HttpUrlConnection 持久化 Cookie](https://stackoverflow.com/questions/12349266/how-do-i-persist-cookies-when-using-httpurlconnection)

# sencha-touch - sencha 触摸地图未呈现到视图中

> ID：15653715
> 
> 赞同：1
> 
> 时间：2013-03-27T07:29:15.563
> 
> 标签：sencha-touch, sencha-touch-2

我是 sencha touch 的新手，我正在尝试在我的 sencha touch 应用程序中显示地图。代码来了

```
Ext.define("trackit.view.GoogleMaps", {
           extend: 'Ext.Map',
           config: {
           mapOptions:{
                //my map options
           }
        }
});
Ext.define("trackit.view.trackMap", {
           extend: 'Ext.Panel',
           requires: "trackit.view.GoogleMaps",
           config: {
           layout:'fit',
           items: [{
                   docked: 'top',
                   xtype: 'toolbar',
                   ui: "light",
                   title: 'Track direction',
                   },
                   ]
           }
}); 
```

从上面的代码中，只有工具栏出现了，地图没有出现。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:29:27.107

这是因为您只需要`trackit.view.GoogleMaps`但不渲染它。给出你的`trackit.view.GoogleMaps`观点`xtype`：

```
xtype: 'GoogleMaps' 
```

然后在你之后将它渲染为你的`trackit.view.trackMap`视图中的一个项目`toolbar`：

```
items: [
    {
        docked: 'top',
        xtype: 'toolbar',
        ui: "light",
        title: 'Track direction',
    },

    {
        xtype: 'GoogleMaps'     
    } 
] 
```

# ios - 如何在 UITableViewCell 的标签中显示 NSTimer 的时间值

> ID：15653729
> 
> 赞同：0
> 
> 时间：2013-03-27T07:30:35.863
> 
> 标签：ios, uitableview, nstimer, uipopovercontroller

...继续问题[如何在 UITableViewCell 中为 UIButton 设置操作](https://stackoverflow.com/questions/15652133/how-to-set-action-for-uibutton-in-uitableviewcell/15652301?noredirect=1#comment22213304_15652301)

我`NSTimer`在单身人士工作。只有 1 个计时器，但它包含一个字典，其中包含多个包含时间值的项目。每分钟计时器从字典中所有项目的时间值减 1。字典的结构是：

**键：“1”，值：包含对象 NSString、NSInteger（时间值）的数组**

TimerCell 是 tableViewControllers 的单元格。`UITableViewController`出现在 UIPopoverController 中。所以我想在我的 cell.label 中显示字典项目的时间值...

**编辑：找到的方式**

我`NSTimer`在 my中创建了新的`UITableViewController`，它从**viewDidLoad**开始，每 1 秒在单例的计时器中取一个新值，并在我的 cell.label 中显示它...

如果这种方式不正确或有内存泄漏，请纠正我））

# sql - 将数据从数据库插入另一个数据库

> ID：15653732
> 
> 赞同：7
> 
> 时间：2013-03-27T07:30:45.387
> 
> 标签：sql, sql-server, sql-server-2008, sql-insert

我想将旧数据库表中的值提取到新数据库表中。

旧数据库结构：

表一：`Country`

*   国家 ID
*   国家的名字

新的数据库结构

表二：`Countries`

*   ID
*   姓名

我使用了以下插入查询，例如，

```
select 'insert into Countries (Id, Name) select ', countryid, countryname from Country 
```

但我有这样的结果，

*   `insert into Countries(Id,Name) select 1 India`
*   `insert into Countries(Id,Name) select 2 Any Country`

像那样。

但我需要这样的结果，

```
insert into Countries (Id, Name) values (1, 'India') 
```

为此，查询是什么？帮我...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T08:17:07.233

如果要传输大量数据和多个表，我建议使用 SQL Server Management Studio 提供的导入/导出向导。

[http://www.mssqltips.com/sqlservertutorial/203/simple-way-to-import-data-into-sql-server/](http://www.mssqltips.com/sqlservertutorial/203/simple-way-to-import-data-into-sql-server/)

编辑：但是，如果没有很多数据并且两个系统没有连接 - 并且您需要生成脚本来传输数据，您的查询应该如下所示：

```
SELECT 'INSERT INTO Countries (Id, Name) VALUES (' + CAST(countryid AS VARCHAR(50)) + ', ''' + countryname + ''')' from Country 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T08:12:28.427

如果两个数据库都在一台服务器上，您可以这样做：

```
insert into [db1name].[dbo].[Countries] (Id, Name)
select CountryId, CountryName
from [db2name].[dbo].[Countries]
where _your where clause_ 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-27T08:10:54.533

使用简单的 INSERT 语句 (database_name.[schema_name].table)

```
INSERT [NewDB].[your_schema].[Countries](Id,Name)
SELECT CountryId, CountryName
FROM [OldDB].[your_schema].[Country] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T08:24:04.733

老实说，我并没有真正得到你写的查询。您是否尝试从查询中构建字符串，然后再次将其传递给数据库？

您可以在一个查询中将值从一个数据库传递到另一个数据库：

```
/*
    maybe you need to switch off identity on your target table
    to get your original id values into the target table like this:
    (without comment ofc ;))
*/
--SET IDENTITY_INSERT TargetDatabase.dbo.Countries ON

INSERT INTO TargetDatabase.dbo.Countries (Id, Name)
    SELECT
            CountryId, CountryName
        FROM SourceDatabase.dbo.Country

--SET IDENTITY_INSERT TargetDatabase.dbo.Countries OFF 
```

或者您可以使用临时表并在检索到原始值后切换数据库连接。

```
USE SourceDatabase

DECLARE @TempTable TABLE (CountryId INT PRIMARY KEY, CountryName NVARCHAR(MAX))

INSERT INTO @TempTable (CountryId, CountryName)
    SELECT
            CountryId, CountryName
        FROM Country

USE TargetDatabase

/*
    maybe you need to switch off identity on your target table
    to get your original id values into the target table like this:
    (without comment ofc ;))
*/
--SET IDENTITY_INSERT Countries ON

INSERT INTO Countries (Id, Name)
    SELECT
            CountryId, CountryName
        FROM @TempTable

--SET IDENTITY_INSERT Countries OFF 
```

编辑：正如之前的海报所提到的，为了使这工作你需要在同一台服务器上的两个数据库，因为你没有说任何关于我只是假设是这样的情况？:D

# powershell - 在具有多个参数的多个窗口中启动 powershell 脚本

> ID：15653733
> 
> 赞同：0
> 
> 时间：2013-03-27T07:30:45.920
> 
> 标签：powershell

我想在具有多个参数的多个窗口中启动一个 powershell 脚本

```
foreach($Instance in $config){

    $MaxSamples = $UserInput.MaxSamples
    $SampleInterval = $UserInput.SampleInterval
    $instance = $Instance

        cmd /c start powershell -NoExit -Command {.\sqlcounters.ps1 $instance $SampleInterval $MaxSamples $OutputDirectory $Instance_$MaxSamples_iterations_with_db}

} 
```

有人可以建议如何指定多个参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:11:31.560

试试`Start-Process`cmdlet：

```
Start-Process powershell -ArgumentList "-NoExit -File c:\test.ps1",$arg1,$arg2,$arg3 
```

# perl - Perl第一对匹配？

> ID：15653735
> 
> 赞同：0
> 
> 时间：2013-03-27T07:31:01.400
> 
> 标签：perl

我有这样的数据：

```
a{b}cde
a{b}c{d}e 
```

我想把字符串分成三个部分：

1.  第一个 {} 对之前的字符串
2.  第一个 {} 对中的字符串
3.  休息

这是我的代码：

```
if(/(.*){(.*)}(.*)/){
    print "$1\t$2\t$3\n";  # ===> a{b}c   d       e
} 
```

但它不适合`a{b}c{d}e`

我想要`a b c{d}e`而不是`a{b}c d e`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:43:48.420

使 .* 非贪婪 (.*?) 可以解决问题：

```
#!/usr/bin/perl
use strict;
use warnings;

while (my $line = <DATA>) {
    if($line =~ m/(.*?){(.*?)}(.*)/){
    print "$1\t$2\t$3\n";
    }
}

__DATA__
a{b}cde
a{b}c{d}e 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:19:46.070

虽然在这种情况下非贪婪匹配有效，但我会提倡使用否定字符类。这更明确地表明您想要一系列非`}`字符，而不是任何字符的最短可能序列，然后是`}`.

```
#!/usr/bin/env perl    

use strict;
use warnings;
use 5.010;

while (<DATA>) {
  say "$1\t$2\t$3" if /^([^{]*){([^}]*)}(.*)/;
} 

__DATA__
a{b}cde
a{b}c{d}e 
```

# android - 片段内的 onCreateOptionsMenu

> ID：15653737
> 
> 赞同：201
> 
> 时间：2013-03-27T07:31:08.123
> 
> 标签：android, android-fragments, layout-inflater, oncreateoptionsmenu

我已经放置`setHasOptionsMenu(true)`inside `onCreateView`，但我仍然无法调用`onCreateOptionsMenu`inside 片段。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, 
                         Bundle savedInstanceState) {   
   setHasOptionsMenu(true);             
   return inflater.inflate(R.layout.facesheet, container, false);
} 
```

下面是我的`onCreateOptionsMenu`代码。

```
@Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    getSupportMenuInflater().inflate(R.menu.layout, menu);
    return (super.onCreateOptionsMenu(menu));
} 
```

我得到的错误信息：

> Fragment 类型的方法`onCreateOptionsMenu(Menu)`必须重写或实现超类型方法。

* * *

## 回答 #1

> 赞同：541
> 
> 时间：2013-03-27T07:54:35.677

尝试这个，

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_sample, menu);
    super.onCreateOptionsMenu(menu,inflater);
} 
```

* * *

最后，在`onCreateView`方法中，添加这一行以使选项出现在您的`Toolbar`

```
setHasOptionsMenu(true); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-11T17:50:37.810

您已经拥有定义**action_settings的自动生成文件****res/menu/menu.xml**。

 **在您的**MainActivity.java**中有以下方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();
    switch (id) {
        case R.id.action_settings:
            // do stuff, like showing settings fragment
            return true;
    }

    return super.onOptionsItemSelected(item); // important line
} 
```

在`onCreateView()`Fragment 调用的方法中：

```
setHasOptionsMenu(true); 
```

并添加这两种方法：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.fragment_menu, menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();
    switch (id) {
        case R.id.action_1:
            // do stuff
            return true;

        case R.id.action_2:
            // do more stuff
            return true;
    }

    return false;
} 
```

最后，添加定义**action_1**和**action_2的新文件****res/menu/fragment_menu.xml**。

 ****这样，当您的应用程序显示 Fragment 时，其菜单将包含 3 个条目：

*   **来自**res/menu/fragment_menu.xml的****action_1****
*****   **来自**res/menu/fragment_menu.xml的****action_2*********   **来自**res/menu/menu.xml的****action_settings************

 ******* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-05-27T00:18:22.060

我尝试了@Alexander Farber 和@Sino Raj 的答案。两个答案都很好，但我不能在我的片段中使用 onCreateOptionsMenu，直到我发现缺少什么：

在我的 Activity 中添加 setSupportActionBar(toolbar)，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.id.activity_main);

    Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
    setSupportActionBar(toolbar);
} 
```

我希望这个答案对有同样问题的人有所帮助。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-13T08:26:34.327

称呼

```
setSupportActionBar(toolbar) 
```

里面

```
onViewCreated(...) 
```

片段

```
@Override
public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    Toolbar toolbar = (Toolbar) view.findViewById(R.id.toolbar);
    ((MainActivity)getActivity()).setSupportActionBar(toolbar);
    setHasOptionsMenu(true);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-10T18:01:40.567

设置 setHasMenuOptions(true) 如果应用程序有一个带有 Actionbar 的主题，例如`Theme.MaterialComponents.DayNight.DarkActionBar`或者`Activity`有它自己的 Toolbar，则`onCreateOptionsMenu`在 Fragment 中不会被调用。

如果您想独立使用`Toolbar`，您需要获取活动并将您的设置`Toolbar`为支持操作栏

```
(requireActivity() as? MainActivity)?.setSupportActionBar(toolbar) 
```

这让你的片段 onCreateOptionsMenu 被调用。

另一种选择是，您可以使用和项目侦听器来扩展您`Toolbar`自己的菜单`toolbar.inflateMenu(R.menu.YOUR_MENU)`

```
toolbar.setOnMenuItemClickListener {
   // do something
   true
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-07-19T09:03:04.333

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.activity_add_customer, container, false);
        setHasOptionsMenu(true);
}

@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.menu_sample, menu);
    super.onCreateOptionsMenu(menu,inflater);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-02T12:52:16.360

您可以轻松地在 Create 方法的片段中执行此操作，

```
setHasOptionsMenu(true) 
```

现在你可以覆盖，

```
override fun onCreateOptionsMenu(menu: Menu, inflater: MenuInflater) {
    super.onCreateOptionsMenu(menu, inflater)
    menu.clear()
} 
```************

# functional-programming - 函数式编程中的“不可变变量”是什么意思？

> ID：15653738
> 
> 赞同：5
> 
> 时间：2013-03-27T07:31:36.707
> 
> 标签：functional-programming, immutability, sml

我是函数式编程的新手，我不了解不变性的概念；例如一个不可变的变量。

例如，在[标准 ML](http://www.scholarpedia.org/article/Standard_ML_language) (SML) 中：

```
val a = 3
val a = a + 1 
```

第二行不会“改变” variable 的值`a`；但是，之后，`a`等于`4`。有人可以解释一下吗？

另外，“无突变”（不变性）有什么好处？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-10T21:37:52.970

当我们说一个变量是不可变的时，我们的意思是它自己的值不能改变。你在那里展示的东西

```
val a = 3
val a = a+1 
```

是： 的新值`a`只是简单地“遮盖”了 的旧值`a`。`a`只是一个绑定到 的名称，`3`在第二行中，它绑定到`4`. 的旧值`a`仍然存在，只是无法访问。

如果您使用某种数据结构，则可以更明显地看到这一点。没有像您在许多其他语言中看到的那样的 mutator 方法。例如，如果您有一个 list `val L = [1,2,3]`，则无法更改`L`. 您将不得不`L`完全遮蔽，并创建一个新列表来遮蔽旧列表。

因此，每次您绑定一个新的值声明时，它都会创建一个包含所有当前名称/值绑定的新环境。这些绑定都不能更改，它们只是被遮蔽了。

# java - 网络在主线程异常

> ID：15653739
> 
> 赞同：4
> 
> 时间：2013-03-27T07:31:41.880
> 
> 标签：java, android

嗨，我尝试使用以下方法检查网络连接和 Internet 存在

> check = new ConnectionDetector(getApplicationContext());
> 
> conn = check.isConnectingToInternet();

```
public class ConnectionDetector {

private Context _context;

public ConnectionDetector(Context context){
    this._context = context;
}

/**
 * Checking for all possible internet providers
 * **/
/*public boolean isConnectingToInternet(){
    ConnectivityManager connectivity = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
      if (connectivity != null)
      {
          NetworkInfo[] info = connectivity.getAllNetworkInfo();
          if (info != null)
              for (int i = 0; i < info.length; i++)
                  if (info[i].getState() == NetworkInfo.State.CONNECTED)
                  {
                      return true;
                  }

      }
      return false;
}*/

public boolean isConnectingToInternet(){
    try{
        ConnectivityManager cm = (ConnectivityManager)_context.getSystemService
                                                    (Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        Log.d("NetInfo", String.valueOf(netInfo));
        if (netInfo != null && netInfo.isConnected())
        {
            //Network is available but check if we can get access from the network.
            URL url = new URL("http://www.Google.com/");
            HttpURLConnection urlc = (HttpURLConnection) url.openConnection();
            urlc.setRequestProperty("Connection", "close");
            urlc.setConnectTimeout(2000); // Timeout 2 seconds.
            urlc.connect();
            Log.d("NetInfo Response Code", String.valueOf(urlc.getResponseCode()));
           // Toast.makeText(getApplicationContext(), String.valueOf(urlc.getResponseCode()), Toast.LENGTH_LONG).show();
            if (urlc.getResponseCode() == 200)  //Successful response.
            {
                return true;
            } 
            else 
            {
                 Log.d("NO INTERNET", "NO INTERNET");
                return false;
            }
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    return false;
} 
```

}

笔记 ：

但这将返回 NetworkOnMainThread 异常，如下所示。请任何人告诉我我犯了什么错误......

```
03-27 12:53:35.617: W/System.err(1095): android.os.NetworkOnMainThreadException
03-27 12:53:35.627: W/System.err(1095):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1084)
03-27 12:53:35.637: W/System.err(1095):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
03-27 12:53:35.637: W/System.err(1095):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
03-27 12:53:35.647: W/System.err(1095):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
03-27 12:53:35.647: W/System.err(1095):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
03-27 12:53:35.657: W/System.err(1095):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
03-27 12:53:35.668: W/System.err(1095):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
03-27 12:53:35.668: W/System.err(1095):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
03-27 12:53:35.677: W/System.err(1095):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
03-27 12:53:35.687: W/System.err(1095):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
03-27 12:53:35.699: W/System.err(1095):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:303)
03-27 12:53:35.699: W/System.err(1095):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
03-27 12:53:35.707: W/System.err(1095):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
03-27 12:53:35.718: W/System.err(1095):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
03-27 12:53:35.727: W/System.err(1095):     at com.slet.routemytrips.beta.ConnectionDetector.isConnectingToInternet(ConnectionDetector.java:50)
03-27 12:53:35.727: W/System.err(1095):     at com.slet.routemytrips.beta.Disclaimer$1.onClick(Disclaimer.java:178)
03-27 12:53:35.738: W/System.err(1095):     at android.view.View.performClick(View.java:3480)
03-27 12:53:35.738: W/System.err(1095):     at android.view.View$PerformClick.run(View.java:13983)
03-27 12:53:35.748: W/System.err(1095):     at android.os.Handler.handleCallback(Handler.java:605)
03-27 12:53:35.757: W/System.err(1095):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-27 12:53:35.757: W/System.err(1095):     at android.os.Looper.loop(Looper.java:137)
03-27 12:53:35.767: W/System.err(1095):     at android.app.ActivityThread.main(ActivityThread.java:4340)
03-27 12:53:35.777: W/System.err(1095):     at java.lang.reflect.Method.invokeNative(Native Method)
03-27 12:53:35.777: W/System.err(1095):     at java.lang.reflect.Method.invoke(Method.java:511)
03-27 12:53:35.787: W/System.err(1095):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
03-27 12:53:35.797: W/System.err(1095):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
03-27 12:53:35.807: W/System.err(1095):     at dalvik.system.NativeStart.main(Native Method)
03-27 12:57:05.237: D/dalvikvm(90): GC_CONCURRENT freed 666K, 10% free 12624K/14023K, paused 6ms+10ms 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T07:32:47.023

您不能在主线程上发出 HTTP 请求，这会导致 UI 冻结。所以它抛出了那个异常。您需要在 AsyncTask 或另一个线程中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:52:29.207

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

`NetworkOnMainThreadException`如果您尝试在主 UI 线程中发出网络请求，则会引发。所以所有与网络相关的操作都应该在后台线程上完成。

AsyncTask 被设计为围绕 Thread 和 Handler 的辅助类，并不构成通用线程框架。**AsyncTasks 最好用于短时间的操作（最多几秒钟）。**如果您需要保持线程长时间运行，强烈建议您使用 java.util.concurrent 包提供的各种 API，例如Executor、ThreadPoolExecutor 和 FutureTask。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

```
class TheTask extends AsyncTask<Void,Void,Void>
{
          protected void onPreExecute()
          {           super.onPreExecute();
                    //display progressdialog.
          } 

           protected void doInBackground(Void ...params)
          {  
                //http request. do not update ui here

                return null;
          } 

           protected void onPostExecute(Void result)
          {     
                    super.onPostExecute(result);
                    //dismiss progressdialog.
                    //update ui
          } 

} 
```

asynctask 的替代方案是 Robospice。可以提出多个香料请求。在 ui 线程上通知。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)

检查网络连接。

在你的活动中

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   if(CheckNetwork.isInternetAvailable(MainActivity.this))
   {
       //call asyntask and make http request.
   }
 } 
```

CheckNetwork 类

```
public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
} 
```

# python - Python正则表达式找到两个组

> ID：15653740
> 
> 赞同：1
> 
> 时间：2013-03-27T07:31:44.550
> 
> 标签：python, regex

```
>>> text = '<a data-lecture-id="47"\n   data-modal-iframe="https://class.coursera.org/neuralnets-2012-001/lecture/view?lecture_id=47"\n   href="https://class.coursera.org/neuralnets-2012-001/lecture/47"\n   data-modal=".course-modal-frame"\n   rel="lecture-link"\n   class="lecture-link">\nAnother diversion: The softmax output function [7 min]</a>'

>>> import re
>>> re.findall(r'data-lecture-id="(\d+)"|(.*)</a>',a)
>>> [('47', ''), ('', 'Another diversion: The softmax output function [7 min]')] 
```

我如何像这样提取数据：

```
>>> ['47', 'Another diversion: The softmax output function [7 min]'] 
```

我认为应该有一些更聪明的正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:51:50.023

不建议使用正[则表达式解析 HTML](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)。你可以试试这个[`xml.dom.minidom`](http://docs.python.org/2/library/xml.dom.minidom.html)模块：

```
from xml.dom.minidom import parseString

xml = parseString('<a data-lecture-id="47"\n   data-modal-iframe="https://class.coursera.org/neuralnets-2012-001/lecture/view?lecture_id=47"\n   href="https://class.coursera.org/neuralnets-2012-001/lecture/47"\n   data-modal=".course-modal-frame"\n   rel="lecture-link"\n   class="lecture-link">\nAnother diversion: The softmax output function [7 min]</a>')
anchor = xml.getElementsByTagName("a")[0]
print anchor.getAttribute("data-lecture-id"), anchor.childNodes[0].data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:34:19.903

你用[`itertools`](http://docs.python.org/2/library/itertools.html#itertools.chain)

```
import re
from itertools import chain, ifilter

raw_found = re.findall(r'data-lecture-id="(\d+)"|(.*)</a>', text)

# simple
found = [x for x in chain(*raw_found) if x]

# or faster
found = [x for x in ifilter(None, chain(*raw_found))]

# or more compact, also just as fast
found = list(ifilter(None, chain(*raw_found)))

print found 
```

输出：

```
['47', 'Another diversion: The softmax output function [7 min]'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:44:41.097

我自己找到了解决方案：

```
>>> re.findall('r'data-lecture-id="(\d+)"[\s\S]+>([\s\S]+)</a>',a)
>>> [('47', '\nAnother diversion: The softmax output function [7 min]')] 
```

看起来更好，但仍然需要迭代它以提取一个简单的列表......

# asp.net-mvc - 如何在现有数据库中添加新模型

> ID：15653744
> 
> 赞同：1
> 
> 时间：2013-03-27T07:31:59.007
> 
> 标签：asp.net-mvc

如何以正确的方式添加新模型 MVC？我有一个模型`UsersContext`。我想创建另一个 - `NewContext`。

下面的代码是否可以正常工作？也许有更好的解决方案来在现有数据库中创建模型？究竟是什么意思`UsersContext`和`NewContext`代码？

```
public class NewContext : DbContext
{
    public NewContext ()
        : base("DefaultConnection")
    {
    }

    public DbSet<test1> test1{ get; set; }
    public DbSet<test2> test2{ get; set; }
    public DbSet<test3> test3{ get; set; }

}
  (...) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:33:54.323

> 下面的代码是否可以正常工作？

是的，这会起作用。DbContext 用于对要在应用程序中使用的实体进行分组。事实上，您不需要第二个上下文。您可能只有一个 DbContext，您可以在其中将所有域实体添加为`DbSet<T>`属性，然后使用此上下文。

# soap - SOAP 客户端请求 --> 错误请求

> ID：15653745
> 
> 赞同：0
> 
> 时间：2013-03-27T07:32:04.193
> 
> 标签：soap, soap-client, bad-request

我被要求研究使用 SOAP 服务同步数据。我根本不是很了解 SOAP，我得到了一个错误的请求错误。

我试图调用的函数是一个测试回显函数：

**公共字符串 EchoAuthenticated（字符串文本）**

每次我调用它时都会出错。

我已经注释掉了用户名/密码设置，因为我现在不知道用户名和密码，而且我的联系人正在休假:(虽然现在我很高兴收到身份验证失败的消息而不是错误...

如果有人可以在这里指出我正确的方向，请...

谢谢，

约翰

```
 <?php

 $apiUrl         = 'https://exdev.api.propctrl.co.za/v3/Integration.svc?wsdl';
 $options        = array( 'trace' => 1, 'exceptions' => 1,  'soap_version' => SOAP_1_2);

 try
 {
    $client     = new SoapClient($apiUrl, $options);

    //$data       = array(
    //  'Username'          => "test",
    //  'Password'          => "test"
    //);

    //$header = new SoapHeader('https://exdev.api.propctrl.co.za/v3/', 'CredentialsHeader', $data, false);
    //$client->__setSoapHeaders($header);

    var_dump($client->__getFunctions());

    print $client->EchoAuthenticated("Test String");
    var_dump($client->__getLastRequest());

 }
 catch(Exception $e)
 {
    echo $e->getMessage();
 }

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:05:03.237

您可以尝试以下方法：

```
...
$client     = new SoapClient($apiUrl, $options);

var_dump($client->__getFunctions());

$auth = array("Username" => "John", "Password" => "secret", 
    "IsP24Credentials" => false);
$header = new SoapHeader("https://www.propctrl.com/", "CredentialsHeader", 
    $auth, FALSE);
$client->__setSoapHeaders($header);

print $client->EchoAuthenticated(array( 
    "text" => "My text to be echoed."
));
var_dump($client->__getLastRequest());
... 
```

这应该会产生如下所示的请求 SOAP 请求：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" xmlns:ns1="https://www.propctrl.com/v3" xmlns:ns2="https://www.propctrl.com/">
   <env:Header>
      <ns2:CredentialsHeader>
         <ns2:IsP24Credentials>false</ns2:IsP24Credentials>
         <ns2:Password>secret</ns2:Password>
         <ns2:Username>John</ns2:Username>
      </ns2:CredentialsHeader>
   </env:Header>
   <env:Body>
      <ns1:EchoAuthenticated>
         <ns1:text>My text to be echoed.</ns1:text>
      </ns1:EchoAuthenticated>
   </env:Body>
</env:Envelope> 
```

作为旁注，您可以查看[http://www.soapui.org/](http://www.soapui.org/)。该工具对 Web 服务开发有很大帮助。

# python - 如何干净地退出多处理脚本？

> ID：15653748
> 
> 赞同：2
> 
> 时间：2013-03-27T07:32:14.253
> 
> 标签：python, real-time, multiprocessing, nonblocking

我正在为我的网站构建一个非阻塞聊天应用程序，我决定实现一些多处理来处理数据库查询和实时消息传递。

我假设当用户登陆给定 URL 以查看他们与其他人的对话时，我将启动脚本，开始多处理，消息将被添加到队列并显示在页面上，新消息将发送到与数据库交互的单独队列等。（随之而来的是常规消息功能。）

但是，当用户离开此页面时会发生什么？我假设我需要退出这些不同的进程，但目前，这并不适合“干净”的退出。我将不得不终止进程并根据多处理文档：

```
Warning: If this method (terminate()) is used when the associated process is using a pipe 
or queue then the pipe or queue is liable to become corrupted and may become 
unusable by other process.Similarly, if the process has acquired a lock or 
semaphore etc. then terminating it is liable to cause other processes to 
deadlock. 
```

我也调查过`sys.exit()`；`terminate()`但是，如果不使用各种进程，它不会完全退出脚本。

这是我为解决此问题而简化的代码。如果我需要改变它，那完全没问题。我只是想确保我正在适当地处理这个问题。

```
import multiprocessing
import Queue
import time
import sys

## Get all past messages
def batch_messages():   

    # The messages list here will be attained via a db query
    messages = [">> This is the message.", ">> Hello, how are you doing today?", ">> Really good!"]
    for m in messages:
        print m

## Add messages to the DB   
def add_messages(q2):   

    while True:
        # Retrieve from the queue
        message_to_db = q2.get()

        # For testing purposes only; perfrom another DB query to add the message to the DB
        print message_to_db, "(Add to DB)"

## Recieve new, inputted messages.
def receive_new_message(q1, q2):

    while True:
        # Add the new message to the queue:
        new_message = q1.get()

        # Print the message to the (other user's) screen
        print ">>", new_message

        # Add the q1 message to q2 for databse manipulation
        q2.put(new_message)

def shutdown():
    print "Shutdown initiated"
    p_rec.terminate()
    p_batch.terminate()
    p_add.terminate()
    sys.exit()

if __name__ == "__main__":

    # Set up the queue
    q1 = multiprocessing.Queue()
    q2 = multiprocessing.Queue()

    # Set up the processes
    p_batch = multiprocessing.Process(target=batch_messages)
    p_add = multiprocessing.Process(target=add_messages, args=(q2,))
    p_rec = multiprocessing.Process(target=receive_new_message, args=(q1, q2,))

    # Start the processes   
    p_batch.start() # Perfrom batch get 
    p_rec.start()
    p_add.start()

    time.sleep(0.1) # Test: Sleep to allow proper formatting

    while True:

        # Enter a new message
        input_message = raw_input("Type a message: ")

        # TEST PURPOSES ONLY: shutdown
        if input_message == "shutdown_now":
            shutdown()

        # Add the new message to the queue:
        q1.put(input_message)

        # Let the processes catch up before printing "Type a message: " again. (Shell purposes only)
        time.sleep(0.1) 
```

我应该如何处理这种情况？我的代码是否需要从根本上修改？如果需要，我应该怎么做才能修复它？

任何想法、评论、修订或资源表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T23:12:56.027

*免责声明：我实际上并不了解python。但是多线程概念在我知道的所有语言中都足够相似，我有足够的信心尝试回答。*

当使用多个线程/进程时，每个线程/进程都应该在它的循环中有一个步骤来检查一个变量，（我经常将变量称为“活动”或“keepGoing”或其他东西，它通常是一个布尔值。）

该变量通常在线程之间共享，或者作为消息发送到每个线程，具体取决于您的编程语言以及您希望何时停止处理，（首先完成您的工作是/否？）

一旦设置了变量，所有线程都会退出它们的处理循环并继续退出它们的线程。

在您的情况下，您有一个“while true”循环。这永远不会退出。将其更改为在设置变量时退出，并且在到达函数退出时线程应自行关闭。

# jquery - 返回主页时如何推迟JQM中的缓存？

> ID：15653752
> 
> 赞同：0
> 
> 时间：2013-03-27T07:32:26.443
> 
> 标签：jquery, jquery-mobile

加载页面后，我按下链接并加载特定页面。当我想返回索引页面时，问题就开始了 - 该页面是“缓存的”。它保留在 DOM`display:none`中，但我需要它每次都加载为新的，如何做到这一点？我已经尝试过：

*   `jQuery.ajaxSetup({cache: false});`
*   `jQuery.mobile.ajaxLinksEnabled = false;`
*   `data-cache="false"`
*   `jQuery.mobile.page.prototype.options.domCache = false;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:33:58.883

这个特性还是有点问题，至少**data-cache="false"**。

# 解决方案 1

要在应用级别禁用兑现，您需要在 mobileinit 事件中执行此操作，如下所示：

```
$(document).bind("mobileinit", function() {
    $.mobile.page.prototype.options.domCache = false;
}); 
```

还有一件事，很多人不理解这部分。必须在初始化 jQuery Mobile 之前初始化**Mobileinit事件，如下所示：**

```
<script src="jquery.js"></script>
<script>
    $(document).bind("mobileinit", function() {
        $.mobile.page.prototype.options.domCache = false;
    });
</script> <!-- Note your script before jqm -->
<script src="jquery-mobile.js"></script> 
```

# 解决方案 2

有时您不想在应用程序级别禁用页面兑现，在这种情况下 data-cache="false" 应该可以工作，不幸的是它没有按预期工作。但可以这样强制：

```
$('div').on('pagehide', function(event, ui){
  var page = $(event.target);

  if(page.attr('data-cache') == 'false'){
    page.remove();
  };
}); 
```

这部分代码将在页面隐藏后将其删除。

这是一个现场 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/wgLzu/](http://jsfiddle.net/Gajotres/wgLzu/)

# graph - 如何优化图的构建？

> ID：15653753
> 
> 赞同：1
> 
> 时间：2013-03-27T07:32:26.783
> 
> 标签：graph, hashtable

我正在解决一个我想通过图表旅行的问题。但是，当我分析我的代码时，我可以看到图形的构建是最重要的部分。每个节点都应该有一个固定长度 M 的值。该图应该包含所有以 2 为底的组合。例如，对于 M = 3，我们有：“000”“001”“010”“011”“100”“101” “110”“111”，即2^M = 8个组合。

然后我想以一种非常具体的方式将节点链接在一起。每个节点都有两个出边，值为“0”和“1”。例如，“000”将连接到带有边 1 的“001”，因为如果我删除右边的第一个数字并在末尾添加边值，我最终会得到“001”。类似地，“111”通过边缘“0”连接到“110”。

需要帮助。请注意，节点不一定必须用 String 表示，但这是我实现的方式，但它似乎运行得太慢。这里重要的是节点连接正确。

我通过将节点存储在 HashTable 中，然后遍历整个集合以将节点相互连接来解决了这个问题。

建议赞赏如何使它更聪明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:22:05.390

更新：

所以你基本上想取一个数字并从中得出两个数字

*   将其向左移动一位并取消设置第一位，并让最后一位为零
*   与上面相同，但将最后一位设置为 1

现在这个数字连接到上面描述的这两个数字。

这是我的理解。

这是我为计算这样的图表而编写的一些代码：

```
import pygraphviz as pgv

# length of binary codes

for n in range(3,8):
  def b(x):
    return str(bin(x))[2:].zfill(n)
  G=pgv.AGraph(directed=True)

  for i in range(1,2**n):
    for j in range(1,2**n):
      I  = b(i)
      J  = b(j)
      # we make room for another bit (the zero bit)
      i1 = i << 1
      # we unset the first bit
      i1 = i1 & ~(1<<(n+1))

      # we copy the previous result
      i2 = i1
      # we set the last bit
      i2 = i2 | 1
      if    i1 == j :
        G.add_edge(I,J,label="0")
      elif  i2 == j:
        G.add_edge(I,J,label="1")

  G.layout(prog='dot')
  G.draw("graph"+str(n)+".png") 
```

n=3

![在此处输入图像描述](../Images/7d5746f373b2a863e11ac5549ddf040f.png)

n=4

![在此处输入图像描述](../Images/6ba53dbfd28172c1f7e307c791560b33.png)

n=5

![在此处输入图像描述](../Images/211def5ebfccbd04f709b9c8c0b35078.png)

n=6

![在此处输入图像描述](../Images/7e762c2a4bb1d1b160954ff0b7466cef.png)

PS 最初我尝试使用 networkx，但很快意识到 pygraphviz 更容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:36:00.927

鉴于您的顶点实际上是数字，为什么不使用列号和行号表示顶点的邻接矩阵？

# android - 我们是否应该在 gcm (Android) 中取消注册接收器

> ID：15653760
> 
> 赞同：0
> 
> 时间：2013-03-27T07:32:51.473
> 
> 标签：android, android-intent, push-notification, google-cloud-messaging, server-push

我是`deviceId`在成功注册后从 GCM 获得的。我将我的存储`deviceId`在`SharedPreferences`. 在主要活动中，我正在注销`onDestroy()`方法中的接收器。如果我不取消注册接收者，那么我会收到内存泄漏错误。这些错误会影响应用程序吗？如果是这样，那么我应该什么时候取消注册接收器？我的应用程序中没有注销按钮。

我什至怀疑如果我们取消注册接收器，我们是否能够接收推送通知？

请帮帮我。我完全糊涂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T18:05:33.950

我认为从 GCM 服务中注销与在活动中声明的广播接收器注销之间存在误解。

您发布的错误类型：

> MainActivity 泄露了最初在这里注册的 IntentReceiver MainActivity$1@416321f0。您是否错过了对 unregisterReceiver() 的呼叫

看起来当您在收到`Intents`消息时使用广播接收器从 GCMIntentService接收`onMessage()`。

```
private final BroadcastReceiver myBroadcastReceiver = new BroadcastReceiver() {
   @Override
   public void onReceive(Context context, Intent intent) {
   ....
   }
} 
```

在这种情况下，是的，您必须调用`unregisterReceiver(myBroadcastReceiver)`void 内存泄漏错误。

此操作不会取消推送通知，它只会停止广播接收器以侦听这些意图。GCMIntentService 仍然会收到消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:36:39.380

如果您从 GCM 服务中注销，您将不再收到推送通知。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T07:37:24.923

您可能不想取消注册。一旦您卸载应用程序（最终），它将自行取消注册。在此之前，您只想保持开启状态，以便接收通知。

# json - JQGrid 数据未显示

> ID：15653762
> 
> 赞同：0
> 
> 时间：2013-03-27T07:33:12.440
> 
> 标签：json, jqgrid

我的 jqrid 有这个代码。但是数据没有显示在网格中。网格已生成，但网格中未显示任何数据。我也应用了错误控制，但这没有给我任何错误。代码如下：

```
$(document).ready(function () {
'use strict';
var expHeadVal = "12345:Party;12346:Miscellaneous;12347:Conveyance;12348:Staff Welfare";
var webForm = document.forms[0];
var i = 0;
var mydata = "";
var jsonData = { 
    "records": "4",
    "userData":{

    },
    "rows":[
    {"id":"1", "sdate":"2013-03-22","expHead":"Party","expAmt":"1000","expReason":"Yes","expRemark":"FedEx"},
    {"id":"2", "sdate":"2013-03-21","expHead":"Conveyance","expAmt":"200","expReason":"Yes","expRemark":"FedEx"},
    {"id":"3", "sdate":"2013-03-20","expHead":"Conveyance","expAmt":"165","expReason":"Yes","expRemark":"FedEx"},
    {"id":"4", "sdate":"2013-03-11","expHead":"Staff Welfare","expAmt":"1653","expReason":"Yes","expRemark":"FeEx"}
    ]
}
//  alert (jsonData.rows[3].id);
var $grid = $("#View1"),
    initDateWithButton = function (elem) {
        if (/^\d+%$/.test(elem.style.width)) {
                    // remove % from the searching toolbar
            elem.style.width = '';
        }
                // to be able to use 'showOn' option of datepicker in advance searching dialog
                // or in the editing we have to use setTimeout
        setTimeout(function () {
            $(elem).datepicker({
                dateFormat: 'dd-M-yy',
                showOn: 'button',
                changeYear: true,
                changeMonth: true,
                showWeek: true,
                showButtonPanel: true,
                onClose: function (dateText, inst) {
                    inst.input.focus();
                }
            });
            $(elem).next('button.ui-datepicker-trigger').button({
                text: false,
                icons: {primary: 'ui-icon-calculator'}
            }).find('span.ui-button-text').css('padding', '0.1em');
        }, 100);
    },
    numberTemplate = {
        formatter: 'number',
        align: 'right',
        sorttype: 'number',
        editable: true,
        searchoptions: { sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge', 'nu', 'nn', 'in', 'ni'] }},
    dateTemplate = {
        align: 'center',
        sorttype: 'date',
        editable: true,
        formatter: 'date',
        formatoptions: { newformat: 'd-M-Y' },
        datefmt: 'd-M-Y',
        editoptions: { dataInit: initDateWithButton, size: 11 },
        searchoptions: {
            sopt: ['eq', 'ne', 'lt', 'le', 'gt', 'ge'],
            dataInit: initDateWithButton,
            size: 11,          // for the advanced searching dialog
            attr: {size: 11}   // for the searching toolbar
        }
    },
    lastSel;

$grid.jqGrid({
    datatype: "local",
    data: jsonData,
    jsonReader : {      
//          userdata: "userData",
        root: "rows",
        repeatitems: false,
//          id: "1",
        records: "records"
    },
//      data: jsonData,
    colNames: ['Date','Expense Head','Amount', 'Reason','Remarks'],
    colModel: [
//      {name:'id', index:'id', width:15, editable:false, key: true, hidden: true},
        {name:'sdate', index:'sdate', width:200, template: dateTemplate },
        {name:'expHead', index:'expHead', width:150, editable:true, sorttype:'number',sortable:true, edittype:"select", editoptions:{value:expHeadVal}},
        {name:'expAmt', index:'expAmt', width:100, editable:true, template: numberTemplate, summaryType:'sum' },
        {name:'expReason', index:'expReason', width:200, editable: true,edittype:"textarea", editoptions:{rows:"2",cols:"30"}},
        {name:'expRemark', index:'expRemark', width:200,editable: true,edittype:"textarea", editoptions:{rows:"2",cols:"30"}}],
    loadtext: "Loading...",
    sortname: ['Col0','Col1'],
    pager: '#pView1',
    caption: "Expense Table",
    gridview: true,
    rownumbers: true,
    autoencode: true,
    ignoreCase: true,
    viewrecords: true,
    sortorder: 'desc',
    height: '100%',
    editurl: 'clientArray',
    beforeSelectRow: function (rowid) {
        if (rowid !== lastSel) {
            $(this).jqGrid('restoreRow', lastSel);
            lastSel = rowid;
        }
        return true;
    },
    ondblClickRow: function (rowid, iRow, iCol, e) {
        var p = this.p, $this = $(this);
           // if the row are still non-selected
        if ((p.multiselect && $.inArray(rowid, p.selarrrow) < 0) || rowid !== p.selrow)
            { $this.jqGrid("setSelection", rowid, true); }
        $this.jqGrid('editRow', rowid, true, function () {
            if (e.target.disabled)
                { e.target.disabled = false; }
             $("input, select", e.target).focus();
        });
        return;
    },
    loadComplete: function () {
    alert("OK");
},
loadError: function (jqXHR, textStatus, errorThrown) {
    alert('HTTP status code: ' + jqXHR.status + '\n' +
          'textStatus: ' + textStatus + '\n' +
          'errorThrown: ' + errorThrown);
    alert('HTTP message body (jqXHR.responseText): ' + '\n' + jqXHR.responseText);
}
});

$grid.jqGrid('gridResize', { minWidth: 450, minHeight: 150 });
$grid.jqGrid('navGrid', '#pView1', {refreshstate: 'current', edit: false, add: false, del: false});
$grid.jqGrid('inlineNav',"#pView1");
}); 
```

谁能告诉我这里缺少什么？

提前感谢您的帮助。

悉达多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:27:15.500

您应该更改`data: jsonData`为，`data: jsonData.rows`因为您使用`datatype: "local"`.

顺便说一句，`jsonReader`选项不会在`datatype: "local"`. 中的数据格式`jsonData.rows`已经对应于输入数据的默认格式`datatype: "local"`。如果您确实需要`datatype: "local"`使用另一种格式的数据填充 jqGrid，您应该使用`localReader`选项而不是`jsonReader`（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)）。

# ruby-on-rails - 角度和轨道部分当地人

> ID：15653765
> 
> 赞同：1
> 
> 时间：2013-03-27T07:33:23.053
> 
> 标签：ruby-on-rails, parameters, angularjs, partials

我正在尝试`JS`在我的 rails 部分中参数化角度变量，我已经搜索了正确的语法但无法获得。不确定我是在尝试做一些不起作用的事情还是只是缺少正确的语法。请提供正确的语法或告诉我解决此问题的替代方法。

```
= render "page/customPage", :items => "{{asset.set1}}"
= render "page/customPage", :items => "{{asset.set2}}" 
```

在部分

```
%div{"ng-repeat" => "item in items"}
 %p do something 
```

上面的代码不起作用

# javascript - 访问 javascript 对象的“模型”

> ID：15653769
> 
> 赞同：0
> 
> 时间：2013-03-27T07:34:05.620
> 
> 标签：javascript

我的 javascript 控制台中有一个如下所示的对象：

```
r {length: 1, models: Array[1], _byId: Object, constructor: function, model: function…}
    _byId: Object
    length: 1
    models: Array[1]
        0: r
            _changing: false
            _events: Object
            _pending: false
            _previousAttributes: Object
            attributes: Object
                collection: Array[20]
                created_at: Wed Mar 27 2013 03:24:31 GMT-0400 (Eastern Daylight Time)
                __proto__: Object
            changed: Object
            cid: "c26"
            collection: r
            __proto__: s
            length: 1
        __proto__: Array[0]
    __proto__: s 
```

我应该在课堂上注意......但我怎样才能访问那个“集合：数组 [20]”？有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:48:27.610

```
// Get array
r.models[0].attributes.collection 
```

应该让您进入属于模型数组中第一个模型的**集合。**

如果您想要数组中的单个元素：-

```
// Get first element of collection on first model
r.models[0].attributes.collection[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:03:39.460

它看起来像backbone.js 集合，因此您可以通过执行以下操作访问该数组：

```
// Get model by index in collection
var collection = r.at(0).get('collection')

// Or get model by client id (cid)
var collection = r.getByCid('c26').get('collection') 
```

# java - 创建动态 POJO 并为其设置值

> ID：15653770
> 
> 赞同：1
> 
> 时间：2013-03-27T07:34:08.803
> 
> 标签：java, class, dynamic, pojo

```
final Map<String, Class<?>> properties = new HashMap<String, Class<?>>();
properties.put("jobName", String.class);
properties.put("companyName", String.class);
properties.put("totalApplicantForJob", String.class);        
final Class<?> beanClass = createBeanClass("ApplicantCountVsJobBoards", properties);

public static Class<?> createBeanClass (final String className, final Map<String, Class<?>> properties) {
    final BeanGenerator beanGenerator = new BeanGenerator();
    // NamingPolicy policy = 
    //beanGenerator.setNamingPolicy(null);
    BeanGenerator.addProperties(beanGenerator, properties);
    return (Class<?>) beanGenerator.createClass();
} 
```

我将如何向这些类对象添加值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:52:50.560

cglib`BeanGenerator`不仅生成动态类，还添加了访问器方法。那么如何进行这样的反射方法调用：

```
Object instance = beanClass.newInstance(); // Creates a new object of your dynamic class
Method setJobName = beanClass.getMethod("setJobName", String.class); // Gets the setJobName method that takes one String argument
method.invoke(instance, "Super Cool Job"); 
```

您的 bean 现在已（部分）填充。

可能有更有效的方法，这可能只是为了向您展示这个概念。

# android - 将文件从外部存储加载到 Inputstream

> ID：15653771
> 
> 赞同：41
> 
> 时间：2013-03-27T07:34:08.857
> 
> 标签：android, inputstream, android-file

我的外部目录中有一个视频文件。我怎样才能将它加载到输入流变量。目前我正在读取 res/raw 文件夹中的文件，但我想从 sdcard 中读取它。我也不知道文件的名称，但它的路径将通过意图接收。检查以下代码

```
public class SonicTest extends Activity
{
VideoView videoView;
String uri;
InputStream soundFile;
File file;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);                      
    setContentView(R.layout.main);

}

public void play(View view)
{
    new Thread(new Runnable() 
    {
        public void run()
        {
            float speed= (float) 1.0;
            float pitch= (float) 1.5;
            float rate= (float) 1.0;
            uri= Environment.getExternalStorageDirectory().toString();
            uri=uri+"/video.3gp";
            AndroidAudioDevice device = new AndroidAudioDevice(22050, 1);
            Sonic sonic = new Sonic(22050, 1);
            byte samples[] = new byte[4096];
            byte modifiedSamples[] = new byte[2048];
            InputStream soundFile = null;

    //soundFile = getContentResolver().openInputStream(Uri.parse(uri));
    soundFile=getResources().openRawResource(R.raw.video3);
    Log.i("testing","check if SoundFile is correct "+soundFile);

            int bytesRead;

            if(soundFile != null) {
                sonic.setSpeed(speed);
                sonic.setPitch(pitch);
                sonic.setRate(rate);
                do {
                    try {
                        bytesRead = soundFile.read(samples, 0, samples.length);
                    } catch (IOException e) {
                        e.printStackTrace();
                        return;
                    }
                    if(bytesRead > 0) {
                        sonic.putBytes(samples, bytesRead);
                    } else {
                        sonic.flush();
                    }
                    int available = sonic.availableBytes(); 
                    if(available > 0) {
                        if(modifiedSamples.length < available) {
                            modifiedSamples = new byte[available*2];
                        }
                        sonic.receiveBytes(modifiedSamples, available);
                        device.writeSamples(modifiedSamples, available);
                    }
                } while(bytesRead > 0);
                device.flush();
            }
        }
    } ).start();
}} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-03-27T07:37:39.527

尝试

```
File file = new File(Uri.toString());
FileInputStream fileInputStream = new FileInputStream(file); 
```

然后你可以从流中读取。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-14T14:01:18.747

```
String fileName = "OfflineMap/maps.xml";
String path = Environment.getExternalStorageDirectory()+"/"+fileName;
File file = new File(path);
FileInputStream fileInputStream = new FileInputStream(file); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-26T04:49:08.080

这是一个工作代码，您可以使用 InputStream 存储文件：

```
 File sdcard = Environment.getExternalStorageDirectory();
       File file = new File(sdcard,"Demo.xml");
       InputStream fileInputStream = new FileInputStream(file); 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-27T07:54:28.117

```
soundFile = openFileInput(uri); 
```

# c# - COMException：客户端操作失败 Outlook

> ID：15653772
> 
> 赞同：0
> 
> 时间：2013-03-27T07:34:12.670
> 
> 标签：c#, outlook

在我的应用程序中，我存储了不同的文件夹 EntryID（电子邮件、联系人...），以便稍后选择它们。问题是，有时我会收到 COMException：

> *客户端操作失败。（在 Microsoft.Office.Interop.Outlook.NameSpaceClass.GetFolderFromID（字符串 EntryIDFolder，对象 EntryIDStore））*

更新：我在同一操作中收到另一条错误消息（未修改代码）

> *消息接口返回未知错误。如果问题仍然存在，请重新启动 Outlook*

我的代码如下所示：

```
 outlookApp.Session.GetFolderFromID(searchFolder); 
```

OutlookApp 是这样定义和声明的：

```
 private ApplicationClass outlookApp;
try
        {
            outlookApp = new Microsoft.Office.Interop.Outlook.ApplicationClass();
        }
        catch (System.Exception)
        {
            try
            {
                outlookApp = Activator.CreateInstance(Type.GetTypeFromProgID("Outlook.Application")) as Microsoft.Office.Interop.Outlook.ApplicationClass;
            }
            catch (System.Exception)
            {
                outlookApp = System.Runtime.InteropServices.Marshal.GetActiveObject("Outlook.Application") as Microsoft.Office.Interop.Outlook.ApplicationClass;

            }
        } 
```

我的建议是，这以某种方式连接到共享文件夹，但我无法定期重现该错误。Outlook 处于缓存模式。Exchange 在日历上抛出了很多同步错误，但我没有处理它们。我无法使用用户邮箱在测试虚拟机上重现该错误。我尝试使用办公室的内部工具进行修复（它发现错误），但这也没有解决任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:39:54.627

如果您在网络环境中工作，您将遇到错误。这是不可避免的。你的代码必须准备好处理这样的错误。

# c++ - 类中的析构函数

> ID：15653774
> 
> 赞同：0
> 
> 时间：2013-03-27T07:34:30.017
> 
> 标签：c++, class, destructor

我创建了一个类，根据 Andrew Koenig 和 Barbara E. Moo 的教科书 Accelerated C++，

> 析构函数的工作是在对象消失时进行任何清理。通常，此清理涉及释放构造函数已分配的资源，例如内存。

我正在尝试编写一个析构函数，但我对所有漂浮在那里的代码感到困惑。有时使用像这样的简单解构器`~MyIntArray() {}`，有时在`{}`.

将东西放在大括号之间的规则是什么？是否只是需要放在大括号之间的容器，例如列表、数组、向量、指针（这些是我在代码示例中看到的内容）。

编辑：这是我的课，以防万一

```
class msgInfo
{
public:
    msgInfo();
    msgInfo(int, int, int, std::string, std::list<int>);

private:
    int source_id;
    int dest_id;
    int priority;
    std::string payload;
    std::list<int> nodePath;
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:38:51.370

## 规则1：

**[C++03中的三](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**规则或 C++ 11 中的五规则。

如果您的类需要用户定义的复制构造函数或复制赋值运算符，那么它很可能需要用户定义的析构函数。

> **你什么时候需要这三个？**

*   当您的类具有动态分配的指针成员并且您需要维护每个独立于另一个实例成员的生命周期时。例如：`char *`会员。
*   当您管理资源时。例如：打开文件句柄、互斥锁等。

## 规则 2：

如果您的类打算用于派生并且您需要多态删除对象，那么您必须将 Base 类中的析构函数标记为`virtual`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:38:22.187

好吧，如果您动态分配资源（新等），那么在析构函数中您想要释放它们（删除），在您的情况下，由于您的所有成员都不是动态分配的，因此您的析构函数可以为空（或非存在）。

另一个值得一提的注意事项是，如果您最终实现了析构函数，并且您计划让某人继承您的类，则应该将其设为虚拟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:38:24.373

即使没有明确需要，在 C++ 程序中提供析构函数也是一种很好的编程实践。在您的代码中，您可能没有任何动态内存分配，因此提供的析构函数 `~MyIntArray() {}`内部根本没有任何代码。

另请阅读有关 C++ 中的三法则的 Wikipedia 文章。

[http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)](http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T07:38:34.707

您的类没有任何需要在析构函数中处理的资源：每种类型都是内置的（``int) or handles its own resources (`std::string `,`std::list`）。所以你不需要实现你自己的析构函数。编译器将提供一个等效于空大括号的一个。

如果你的类有需要处理的资源，你需要自己实现：动态分配的对象、句柄或到套接字的连接、数据库、引用计数等。

实现空析构函数可能有意义的一种情况是，当您有一个旨在派生自并以多态方式使用的类时。在这种情况下，需要一个虚拟析构函数（有很多关于此的 SO 帖子），并且通常的做法是提供一个空实现，以便派生类型在没有资源需要处理时不必自己实现它。

```
virtual ~Foo() {} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T07:38:42.150

如果您不提供析构函数，编译器将为您提供一个。这个自动生成的析构函数将正确调用你类的所有数据成员的析构函数，例如`payload`等。

如果您不需要做任何事情，那么您不需要显式提供析构函数。或者，一个空的也同样有效。

另一方面，如果您的构造函数分配了一些资源（例如，连接到数据库），那么通常您需要在析构函数中放入一些代码来释放该资源（例如，断开与数据库的连接）。这是用于防止资源泄漏的[标准 C++ 习惯用法。](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T09:02:11.263

在您的代码中，您可能没有任何动态内存分配，因此您不需要提供析构函数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-27T07:39:46.143

像这样的类不需要一个重要的析构函数（一个，“大括号之间的东西”）。

在析构函数中，您必须释放资源，您已“手动”分配。例如：

*   如果你`new/new[]`在构造函数中有并且你需要在析构函数中释放这个内存
*   如果您在构造函数中打开了文件，请在析构函数中关闭它
*   如果您在构造函数中锁定了互斥锁，请在析构函数中将其解锁

诸如此类的事情。

此外，当对象被破坏时，您可能需要实现一些额外的逻辑。取决于你想要做什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T07:41:00.173

就我所知或所关心的而言，析构函数的定义应始终如下所示：

```
~msgInfo() { /* free stuff */ } 
```

另一方面，构造函数可能如下所示：

```
msgInfo(): m_var1(0), m_var2("Initialize") { /* further initialization */ } 
```

介于两者之间`:`的`{`是成员变量初始化。

在析构函数中，您应该取消分配在类中其他位置动态分配的任何内容，因此`:`符号不好，因为您可能需要对`delete`对象执行操作。

# javascript - JavaScript 中的类设计

> ID：15653781
> 
> 赞同：0
> 
> 时间：2013-03-27T07:35:08.167
> 
> 标签：javascript, oop, class, three.js

我正在尝试使用 JavaScript 和 Three.js 实现一些面向对象的编程。

我开始用一个类封装场景，如下所示，我`update`在类中有动画的功能。这很好用，但我想要另一个带有控件的类。

该类`Controls`还有一个更新函数，应该在场景的每个滴答声中调用。所以我创建了一个数组，其中包含指向所有可能需要调用的更新函数的函数指针`Scene.update`。

比如这样：

```
Scene = function() {
     ... // scene init etc.
     this.update_f = []; // My array of function pointers

     this.AddToUpdate = function(f) {
         this.update_f.push(f); // add function pointer
     };

     this.Animate = function() {
          requestAnimationFrame(this.Animate.bind(this));
          this.renderer.render(this.scene, this.camera);
          this.Update();
     };

     this.Update = function() {
       for(var i = 0; i < this.update_f.length; i++) {
           this.update_f[i]();
        }
     };
}; 
```

还有我的 Controls 类的一些伪代码：

```
Controls = function() {
     this.obj = new THREE.Object3D();
     ... // do stuff with obj
     this.update = function() {
          console.log(this.obj);
     }
}; 
```

这是我初始化所有内容的主要内容：

```
 var scene = new Scene();
 var controls = new Controls();
 scene.AddToUpdate(controls.update()); // add function pointer
 scene.Animate(); 
```

现在到实际问题。当通过数组 ( )`scene.update()`调用函数时，它会被调用，但实例化的对象似乎不是对象（在 main 中实例化为控件），因为它告诉我“未定义”。`controls.update()``scene.update_f``console.log(this.obj)`

那么我在这里做错了什么？请给我一些关于这些事情的最佳实践的提示。我不想将所有内容都添加到 Scene 类，因为如果添加更多内容，它可能会变得很大。我只想将其他更新功能插入到`Scene.update`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:48:00.627

这里有多个错误。

```
Controls = function() {
     this.obj = new THREE.Object3D();
     ... // do stuff with obj
     this.update() {
          console.log(this.obj);
    }
}; 
```

您没有将功能分配给`Controls`. 怎么样

```
this.update = function() {
    console.log(this.obj);
}; 
```

在您的 main 中，您执行更新函数并将其返回值作为参数分配给`AddToUpdate`

```
var scene = new Scene();
var controls = new Controls();
scene.AddToUpdate(controls.update);
scene.Animate(); 
```

所以如果你想传入函数指针，只需去掉括号即可。

请注意，如果您将对象的函数传递给其他对象，`this`则将是您将函数传递给的对象。

# ruby - 无法制作 rake-tasks 文件并使其正常工作

> ID：15653792
> 
> 赞同：1
> 
> 时间：2013-03-27T07:35:38.740
> 
> 标签：ruby, sinatra, rake

我决定为我的 Sinatra 项目创建一个 rake 任务，而不是使用现成的任务。

```
#Rakefile

 require 'rake/testtask'
 require 'rake/clean'
 Dir.glob("tasks/*.rake").each { |r| import r }

#/tasks/seed.rake
require 'rubygems'
require 'bundler'
Bundler.require
require 'mongoid'
require_relative '../models/user'

namespace :db do
  task :seed do
    puts 'Creating a user....'

    user1 = User.new email: "email1@gmail.com", password: "test123"
    user1.save!

    puts 'User has been created.'
  end
end

#user.rb

require 'bcrypt'
require 'digest/md5'
require 'openssl'

class User
  include Mongoid::Document
  include Mongoid::Timestamps
  #.........

#gemfile (partly)
source 'http://rubygems.org'
gem 'bcrypt-ruby', require: 'bcrypt' 
```

我得到了“创建用户......

```
rake aborted!
undefined method `create!' for BCrypt::Password:Class
/home/alex/ruby_projects/service/models/user.rb:47:in `password='" 
```

#47 看起来像

```
 def password= pass
    self.hashed_password = BCrypt::Password.create! pass, cost: 10
  end 
```

请注意，在正常开发中一切**正常**。所以我错过了要求我认为的文件。

你的意见？

ps 即使我把

```
 require 'bcrypt'
    require 'digest/md5'
    require 'openssl 
```

`/tasks/seed.rake`错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:49:52.647

看来您正在使用 BCrypt::Password 中不存在的方法。根据[文档](http://bcrypt-ruby.rubyforge.org/classes/BCrypt/Password.html)，只有`.create`方法，没有`.create!`方法。切换到`BCrypt::Password.create`它应该可以工作。

```
def password= pass
  self.hashed_password = BCrypt::Password.create pass, cost: 10
end 
```

# android - 根据用户输入的股票代码显示股票的应用程序

> ID：15653794
> 
> 赞同：0
> 
> 时间：2013-03-27T07:35:49.777
> 
> 标签：android

我的应用程序没有按预期工作，当我运行程序时它显示 0.00。如何格式化我的代码或添加更多元素以使其实际访问网页？我的 Manifest 文件中有访问代码，我的 strings.xml 和 activity_main.xml 似乎没有任何问题。我主要只是困惑，我是否真的了解在 java 文件中放置哪些所有组件以供应用程序访问互联网。

我的代码片段：

```
public class MainActivity extends Activity {
    private static final String DEBUG_TAG = "HttpExample";
    private EditText urlText;
    private TextView textView;
    private Editable stock_symbol;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);   
        urlText = (EditText) findViewById(R.id.et1);
        stock_symbol = urlText.getText();
        textView = (TextView) findViewById(R.id.tv1);
    }
    public void myClickHandler(View view) {
        // Gets URL from UI's text field.
        String stringUrl = urlText.getText().toString();
        ConnectivityManager connMgr = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = connMgr.getActiveNetworkInfo();
        if (networkInfo != null && networkInfo.isConnected()) {
            new DownloadWebpageText().execute(stringUrl);
        } else {
            textView.setText("No network connection available.");
        }
    }

     /*Uses AsyncTask to create a task away from the main UI thread. This task takes a 
      * URL string and uses it to create an HttpUrlConnection. Once the connection
      * has been established, the AsyncTask downloads the contents of the webpage as
      * an InputStream. Finally, the InputStream is converted into a string, which is
      * displayed in the UI by the AsyncTask's onPostExecute method.*/
     private class DownloadWebpageText extends AsyncTask <String, Void, String>{
        @Override
        protected String doInBackground(String... urls) {
            // params comes from the execute() call: params[0] is the url.
            try {
                return downloadUrl(urls[0]);
            } catch (IOException e) {
                return "Unable to retrieve web page. URL may be invalid.";
            }
        }
        @Override
        protected void onPostExecute(String result) {
            String symbol = result.substring(result.indexOf('>') + 1, result.lastIndexOf('<'));
            textView.setText(symbol);
       }
     // Given a URL, establishes an HttpUrlConnection and retrieves
     // the web page content as a InputStream, which it returns as
     // a string.
     private String downloadUrl(String myurl) throws IOException {
         InputStream is = null;
         // Only display the first 500 characters of the retrieved web page content.
         int len = 500;
         try {
             URL url = new URL("http://finance.yahoo.com/d/quotes.csv?s=" + stock_symbol + "&f=k1");
             HttpURLConnection conn = (HttpURLConnection) url.openConnection();
             conn.setReadTimeout(10000 /* milliseconds */);
             conn.setConnectTimeout(15000 /* milliseconds */);
             conn.setRequestMethod("GET");
             conn.setDoInput(true);
             // Starts the query
             conn.connect();
             int response = conn.getResponseCode();
             Log.d(DEBUG_TAG, "The response is: " + response);
             is = conn.getInputStream();

             // Convert the InputStream into a string
             String contentAsString = readIt(is, len);
             return contentAsString;

         // Confirms InputStream is closed after the app is finished using it.
         } finally {
             if (is != null) {
                 is.close();
             } 
         }
     }
     // Reads an InputStream and converts it to a String.
     public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
         Reader reader = null;
         reader = new InputStreamReader(stream, "UTF-8");        
         char[] buffer = new char[len];
         reader.read(buffer);
         return new String(buffer);
     }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:49:40.937

```
 public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
         Reader reader = null;
         reader = new InputStreamReader(stream, "UTF-8");        
         char[] buffer = new char[len];
         reader.read(buffer);
         return new String(buffer);
     } 
```

只读取`len`输入流的字节。

使用[Apache Commons IO](https://commons.apache.org/proper/commons-io/)库将 InputStream 直接转换为字符串：

```
 public String readIt(InputStream stream, int len) throws IOException, UnsupportedEncodingException {
     return IOUtils.toString(stream, "UTF-8");
 } 
```

# android - if / else 语句与预期相反（代码+解释）

> ID：15653797
> 
> 赞同：0
> 
> 时间：2013-03-27T07:35:54.770
> 
> 标签：android, if-statement

我遇到的问题不是紧急问题，因为我的应用程序可以正常工作，但我真的很想了解它为什么会这样。
在我的程序中有一个方法（findFilterInTable），它有两个字符串输入（categoryInterval 和 paymentInterval）。

该方法向我的数据库发送请求，在 categoryInterval = something 和 paymentInterval = something 的某些列中查找元素（取决于单击的按钮、用户的选择等）。

在我的应用程序中有一个单选按钮设置 paymentInterval 的值，如下所示：

```
OnClickListener radiobutton_no_listener = new OnClickListener() {
    public void onClick(View v) {
        paymentInterval = null ; 
    }
};

OnClickListener radiobutton_yes_listener = new OnClickListener() {
    public void onClick(View v) {
        paymentInterval = " LIKE " + " '%visa%' " ; 
        }
}; 
```

**所以当用户点击按钮 NO 时，表示 paymentInterval 为空。**

现在，这是我查询数据库的方法。由于当 paymentInterval 为空时在 COL_PAYMENT 中发出请求时崩溃，我想更改查询：如果 paymentInterval 为空，那么它将不会查询我数据库中的相关列（COL_PAYMENT）。否则（如果 paymentInterval 不为空），它将查询 COL_PAYMENT 并收集结果。
我试过这种方式，它没有用，绝望中我只是交换了我的声明，现在它可以工作了：

```
 public Cursor findFilterInTable(String categoryInterval,
        String paymentInterval) {
    String where;
    if (paymentInterval != null) {
        where = "(" + COL_CAT1 + " IN " + categoryInterval + " OR "
                + COL_CAT2 + " IN " + categoryInterval + " OR " + COL_CAT3
                + " IN " + categoryInterval + ") AND (" + COL_PAYMENT
                + paymentInterval + ") ";
    }

    else {
        where = COL_CAT1 + " IN " + categoryInterval + " OR " + COL_CAT2
                + " IN " + categoryInterval + " OR " + COL_CAT3 + " IN "
                + categoryInterval;
    }

    Cursor c = myDatabase.query(DATABASE_TABLE, new String[] { KEY_ROWID,
            COL_NAME, COL_STREET, COL_WEBSITE, COL_PAYMENT, COL_TELEPHONE,
            COL_PRICE, COL_REMARKS, COL_DATEFRIENDLY }, where, null, null,
            null, null);
    return c;
} 
```

这段代码的工作原理与所写的相反。当我使用我的应用程序时：
- 如果 paymentInterval 为空（用户单击否），它不会查询 COL_PAYMENT
- 如果 paymentInterval 不为空（在我的情况下类似于 %visa%），它会查询数据库和显示正确的结果。

你知道是什么导致了这个奇怪的结果吗？

[编辑] 附加到我的按钮的侦听器：

```
radiobutton_yes = (RadioButton) dialogView
                .findViewById(R.id.radiobutton_yes);
        radiobutton_yes.setOnClickListener(radiobutton_yes_listener);

        radiobutton_no = (RadioButton) dialogView
                .findViewById(R.id.radiobutton_no);
        radiobutton_no.setOnClickListener(radiobutton_no_listener); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:39:18.983

这段代码完全按照所写的。

```
if (paymentInterval != null) 
```

`!=`是`is not equal`运算符。因此，如果 paymentInterval 不等于 null，它会将 COL_PAYMENT 添加到查询中；否则它会忽略它。

# ruby-on-rails - 通过电子邮件将文本文件作为 rake 任务的附件发送，文件不完整

> ID：15653798
> 
> 赞同：0
> 
> 时间：2013-03-27T07:35:55.567
> 
> 标签：ruby-on-rails, ruby, file, email, file-handling

我有一个 rake 任务，它做了很多事情，但是将它所做的任何事情都写到一个文本文件中，如下所示，

```
handler = File.open("cheese.txt", "a+")

handler.write("====Starting write!====\n")

handler 
```

现在，我正在捕捉 CTRL + C 事件，如下所示，

```
Kernel.trap('INT') { 

 email_files # A method that cd to a PATH and attaches "cheese.txt" and use RAILS MAILERS to email 

 abort("Files Emailed, kernel trapped!")

} 
```

**问题是，在我第一次执行 CTRL+C 时，交付的文本文件没有任何内容，但从下次它正确交付时开始。**

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:06:06.630

添加新行后关闭文件：

```
File.open("cheese.txt", "a+") do |handler|
  handler.write("====Starting write!====\n")
end 
```

UPD：[http](http://www.ruby-doc.org/core-2.0/File.html#method-c-open) ://www.ruby-doc.org/core-2.0/File.html#method-c-open：

*在没有关联块的情况下，File.open 是 ::new 的同义词。如果给出了可选代码块，它将作为参数传递打开的文件，并且当块终止时，文件对象将自动关闭。*

# javascript - 在 mousemove 上旋转对象以面对鼠标指针

> ID：15653801
> 
> 赞同：23
> 
> 时间：2013-03-27T07:36:19.460
> 
> 标签：javascript, html, html5-canvas, trigonometry

我的游戏中有一个 mousemove 光标，它可以让我的对象朝着我的鼠标光标射击。我希望我的对象始终旋转以与我的鼠标光标一致。如何将光标所在位置的 X 和 Y 转换为角度以将对象旋转到？

我希望我的小提琴能让我通过旋转播放器（黑块）更清楚地理解我的意思：http: [//jsfiddle.net/3nEUv/4/](http://jsfiddle.net/3nEUv/4/)

这是我的 mouseMove 函数；只确保光标保持在它的边界框中

```
function mouseMove(e) {
    if (cursor) {
        if (e.rawX && e.rawY) {
            cursorBoundingBox(e.rawX, e.rawY);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-27T08:26:31.077

基本上，您需要找到框中心点和鼠标光标点之间的向量，然后计算角度并将其转换为度数。然后只需通过 CSS 应用角度：

```
let box = document.querySelector(".box");
let boxBoundingRect = box.getBoundingClientRect();
let boxCenter= {
    x: boxBoundingRect.left + boxBoundingRect.width/2, 
    y: boxBoundingRect.top + boxBoundingRect.height/2
};

document.addEventListener("mousemove", e => {
    let angle = Math.atan2(e.pageX - boxCenter.x, - (e.pageY - boxCenter.y) )*(180 / Math.PI);      
    box.style.transform = `rotate(${angle}deg)`;  
}) 
```

**等等，什么？**

好的，让我们把它拆开。这就是我们所拥有的：

![在此处输入图像描述](../Images/8b3b5d47008d730ccb935d63e2a707d6.png)

矢量 AB 位于框的中心和鼠标位置之间。我们去计算 Θ (theta)，它是 X 轴和 AB 之间的角度。

想象一条线从 B 向下平行于 Y 轴直到它接触 X 轴。使用那条线、AB 和 X 轴，我们得到一个三角形。这意味着我们可以使用 Arctan 函数来计算 theta。更准确地说，我们使用[Arctan2](http://en.wikipedia.org/wiki/Atan2)的便利函数，当 y>0 时给出正角，当 y<0 时给出负角。

atan2 以*弧度*返回度数，而 CSS 使用*度数*，因此我们使用`180/Math.PI`. （弧度是一个角度的度量，当绘制圆的圆心角时，它与长度等于圆半径长度的弧相交。-取自[此处](http://www.mathwarehouse.com/trigonometry/radians/convert-degee-to-radians.php)）

最后一个警告 - 由于在浏览器中 Y 轴是倒置的（意思是，你在页面中越往下走，Y 值就越高），我们不得不翻转 Y 轴：我们通过添加一个减号来做到这一点Y 项：

`- (e.pageY - boxCenter[1])`

我希望这有助于清除一些事情......

这是一个孤立的[jsfiddle 示例](http://jsfiddle.net/4c039kn6/1/)

顺便说一句，你的游戏很难！:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-16T05:07:40.357

我已经为每个带有旋转角度的 html 元素创建了一个旋转脚本。

**希望它会有所帮助**

```
function MouseRotate(e, elt) {
  var offset = elt.offset();
  var center_x = (offset.left) + (elt.width() / 2);
  var center_y = (offset.top) + (elt.height() / 2);
  var mouse_x = e.pageX;
  var mouse_y = e.pageY;
  var radians = Math.atan2(mouse_x - center_x, mouse_y - center_y);
  var degree = (radians * (180 / Math.PI) * -1) + 90;
  $(elt).css('-moz-transform', 'rotate(' + degree + 'deg)');
  $(elt).css('-webkit-transform', 'rotate(' + degree + 'deg)');
  $(elt).css('-o-transform', 'rotate(' + degree + 'deg)');
  $(elt).css('-ms-transform', 'rotate(' + degree + 'deg)');
}

$(document).ready(function() {
  $('#'+tagVal).mousedown(function(e) {
    $(document).bind('mousemove', function(e2) {
      rotateOnMouse(e2,$('#'+tagVal));
    });
  });
  $(document).mouseup(function(e) {
    $(document).unbind('mousemove');
  });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T18:28:03.537

这种弧度到度数的转换对我有用：

```
const angleRadians = Math.atan2(positionUnits.x - this.rotationPivotPoint.x, -(positionUnits.y - this.rotationPivotPoint.y));
const angleDegrees = angleRadians * (180 / Math.PI);
const angle = -(90 - angleDegrees); 
```

# objective-c - 不会丢失视图之间的实例引用？

> ID：15653807
> 
> 赞同：1
> 
> 时间：2013-03-27T07:36:47.430
> 
> 标签：objective-c

在我的主视图类中，我有另一个类的实例，它是通过 tcp 套接字进行的连接。

当我离开那个视图而不是回来时，我不想释放/丢失这个实例，因为我不想建立一个新的连接，它必须保持不变（套接字就像一个始终连接的聊天）

```
 socketInstance=[[SocketConnector alloc]init];
        socketInstance.delegate=self; 
```

这是在`init`视图中完成的，仅在首次启动时完成。然后，当我离开视图并返回时（如果我不再执行此行），他会`socketInstance`为我保存参考吗？如果没有，我将如何让他将其保存到程序生命周期的剩余时间？我不能一次又一次地创建这个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:41:30.160

你可以使用静态变量吗？否则使用可以保持全局的[单例模式](https://stackoverflow.com/questions/145154/what-should-my-objective-c-singleton-look-like)

# javascript - 在我的页面上发布用户生成的图像时，我得到了 Uncaught SyntaxError: Unexpected number

> ID：15653810
> 
> 赞同：0
> 
> 时间：2013-03-27T07:37:07.933
> 
> 标签：javascript, facebook, post, photo

行上出现错误`Uncaught SyntaxError: Unexpected number`：

```
image[0][url]:photourl, 
```

完整代码为：

```
function photoToPage(page)
{
    FB.api('/'+page.id+'/clubinfophotos:shares',  
           'post',
              {
                image[0][url]:photourl,
                image[0][user_generated]:true,
                access_token: page.access_token,
                message:msg
              },
           function(res) { console.log('Photo posted successfully'); }
    )
} 
```

# symfony - Symfony2 从 URL 获取路由名称

> ID：15653815
> 
> 赞同：8
> 
> 时间：2013-03-27T07:37:29.260
> 
> 标签：symfony

好的，您可以获取当前路线名称，`app.request.attributes.get('_route')`但无法从 url 获取？

像`app.request.attributes.get('/about')`什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-27T07:44:59.470

您可以`Router`为此使用类/服务：

```
public function indexAction()
{
    $router = $this->get('router');
    $route = $router->match('/foo')['_route'];
} 
```

[文档](http://symfony.com/doc/current/book/routing.html#generating-urls)中的更多信息

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-12T09:44:17.343

我最近发现 match() 方法使用当前请求的 HTTP METHOD 来匹配请求。因此，例如，如果您正在执行 PUT 请求，它将尝试将您提供的 URL 与 PUT 方法匹配，从而导致 MethodNotAllowedException 异常（例如，获取引用者）。

为避免这种情况，我正在使用此解决方法：

```
// set context with GET method of the previous ajax call
$context = $this->get('router')->getContext();
$currentMethod = $context->getMethod();
$context->setMethod('GET');

// match route
$routeParams = $this->get('router')->match($routePath);

// set back original http method
$context->setMethod($currentMethod); 
```

但是，它始终是 GET 请求可能并不正确。在您的情况下，它可能是一个 POST 请求。

我已将此问题发送给 Symfony 社区。让我们看看他们提出了什么建议。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-30T13:47:10.470

使用绝对路径时，即使使用匹配方法，我也得到了 MethodNotAllowed 我像这样解决它

```
$ref = str_replace("app_dev.php/", "", parse_url($request->headers->get('referer'),PHP_URL_PATH ));
$route = $this->container->get('router')->match($ref)['_route']; 
```

# java - 在 Play 1.x 框架中使用 SOAP Web 服务

> ID：15653821
> 
> 赞同：1
> 
> 时间：2013-03-27T07:38:12.480
> 
> 标签：java, web-services, soap, playframework

我只想知道有什么方法可以在 Play 框架中使用 SOAP Web 服务，特别是 1.xx 版

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:51:03.440

其他答案当然是有效的，但 Play 为这类东西提供了一些方便的类。不过，您将需要手动解析响应。从课堂开始`WS`。它可用于发布/获取或其他任何服务。例如，我将它用于 SOAP 请求和 REST 调用。

例子：

```
HttpResponse httpResponse = null;
String username = "";
String password = "";
String url = "";
String postBody = "";

try {
    httpResponse = WS.url(url)
        .authenticate(username, password)
        .setHeader("Content-Type", "text/xml; charset=UTF-8")
        .setHeader("SOAPAction", "")
        .body(postBody).post();

    Document document = httpResponse.getXml();
    String value = XPath.selectText("//value", document);
    Node node = XPath.selectNode("//node", document);

    // Do things with the nodes, value and so on

} catch (Exception e) {
    Logger.error("Do something with the connection error: %s", e);
} 
```

如您所见，我使用`XPath`该类来解析返回的`Document`. 它提供了各种有用的方法来遍历 Document。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:44:11.250

将 play 用作 SOAP 使用者应该很简单：包含您选择的 soap 库，从 wsdl 生成存根，调用端点。另一种选择是调用 URL 并使用 Xpath 来解析它的信封。

# android - ExpandableListView - 展开和折叠组

> ID：15653825
> 
> 赞同：3
> 
> 时间：2013-03-27T07:38:26.833
> 
> 标签：android, expandablelistview

如果组 ID 在我拥有的数组列表中，我正在尝试展开和折叠组。

我就是这样做的：

```
final Group group = (Group) getGroup(groupPosition);   
ExpandableListView eLV = (ExpandableListView) parent;
if ( subscriptions != null ) {
    if ( subscriptions.contains(group.getID()) ) {
        ((CheckBox) v.findViewById(R.id.check_channel)).setChecked(true);
        eLV.expandGroup(groupPosition);
    } else {
        ((CheckBox) v.findViewById(R.id.check_channel)).setChecked(false);
        eLV.collapseGroup(groupPosition);
    }
} 
```

它在加载组并展开正确的组时第一次工作。当我按下该组时，它也会按预期崩溃。

但是，当我想扩展一个组或选择一个组时，应用程序崩溃了。只有当我删除部分**eLV.collapseGroup(groupPosition);** 从它再次工作的 else 块中。但后来我不能因为明显的原因崩溃..

这是一个例外：

```
03-27 09:29:11.059: W/dalvikvm(21674): threadid=1: thread exiting with uncaught exception (group=0x40bec1f8)
03-27 09:29:11.067: E/AndroidRuntime(21674): FATAL EXCEPTION: main
03-27 09:29:11.067: E/AndroidRuntime(21674): java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
03-27 09:29:11.067: E/AndroidRuntime(21674):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at java.util.ArrayList.get(ArrayList.java:304)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:225)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.AbsListView.obtainView(AbsListView.java:2210)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.ListView.onMeasure(ListView.java:1155)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:1027)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:565)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1385)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:670)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:563)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4709)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2240)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.View.measure(View.java:12775)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1092)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2505)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.os.Looper.loop(Looper.java:137)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at android.app.ActivityThread.main(ActivityThread.java:4514)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at java.lang.reflect.Method.invokeNative(Native Method)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at java.lang.reflect.Method.invoke(Method.java:511)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
03-27 09:29:11.067: E/AndroidRuntime(21674):    at dalvik.system.NativeStart.main(Native Method) 
```

完整的功能：

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView,ViewGroup parent) { 
    View v;
    if (convertView == null) {
        v = newGroupView(isExpanded, parent);
    } else {
        v = convertView;
    }

    final Group group = (Group) getGroup(groupPosition);   
    ExpandableListView eLV = (ExpandableListView) parent;
    if ( subscriptions != null ) {
        if ( subscriptions.contains(group.getID()) ) {
            ((CheckBox) v.findViewById(R.id.check_channel)).setChecked(true);
            eLV.expandGroup(groupPosition);
        } else {
            ((CheckBox) v.findViewById(R.id.check_channel)).setChecked(false);
            eLV.collapseGroup(groupPosition);
        }
    }

    if ( isExpanded ) {
        if ( subscriptions.contains(group.getID()) == false ) {
            subscriptions.add(group.getID());
        }
    } else {
        for (int i=0;i<subscriptions.size();i++) {
            if ( subscriptions.get(i).equals(group.getID())) {
                subscriptions.remove(i);
            }
        }
    }

    bindGroupView(groupPosition, isExpanded, v, parent);
    return v;
} 
```

# php - 在 PHP if 语句中测试两个变量是否等于一个变量

> ID：15653826
> 
> 赞同：1
> 
> 时间：2013-03-27T07:38:30.003
> 
> 标签：php

**而不是写出来**

```
if ($var1 = $something && $var2 == $something)
    echo 'this'; 
```

**是否可以写类似的东西**

```
if ($var1 && $var2 == $something)
    echo 'this'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:45:20.513

```
$a = array($var1, $var2, $something);

if(count(array_unique($a)) == 1){
  // all match
}
else {
  // some items do not match
} 
```

参考：[PHP：检查 3 个变量是否相同的最佳方法？](https://stackoverflow.com/questions/6920511/php-the-best-way-to-check-if-3-variables-are-identical)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:41:22.853

不，不是。PHP 中没有快捷操作符可以执行您所描述的操作，但您可以在 PHP 中编写一个函数，如果您定期进行此比较，则可以节省键入时间。

```
 function allEqual($value1, $value2, $value3) {
     return $value1 == $value2 && $value2 == $value3;
 }

 // Usage:
 if( allEqual( $var1, $something, $var2 ) ) { 
```

# .net - 如何在.Net上开发CASIO DTX30的应用程序？

> ID：15653827
> 
> 赞同：0
> 
> 时间：2013-03-27T07:38:30.630
> 
> 标签：.net, pushdown-automaton

如何在.Net上开发CASIO DTX30的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:42:19.187

为此，您需要 Visual Studio 2008（专业以上）。从 Visual Studio 2010 及更高版本中删除了对 Windows CE 编程的支持。

使用 VS2008，新建一个 Smart Device 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T15:55:57.330

正如 GSerg 所提到的，您需要 Visual Studio 2008 来为 DT-X30 进行开发。

此外，我建议以下内容：

[Casio Developers/Partners](http://partners.casio.co.uk/mtddevelopers/)页面（需要注册和登录）将允许您访问 SDK 和其他下载。我相信有一个可用的软件开发人员指南，下载 SDK 将使您能够访问一些很棒的示例应用程序。

[casio-b2b 网站上的这个页面](http://www.casio-b2b.com/mis/euro/faq/?branchid=a97da629b098b75c294dffdc3e463904)还允许您访问一些文档和补丁。

# jenkins - Jenkins 动态参数基于先前选择的参数值

> ID：15653831
> 
> 赞同：22
> 
> 时间：2013-03-27T07:38:46.843
> 
> 标签：jenkins, hudson, jenkins-plugins, hudson-plugins

这里我基本上是在寻找一个依赖参数。

假设我在构建参数部分有两个下拉列表。根据从第一个下拉列表中选择的值，可能的默认值我希望第二个下拉列表的值有所不同。

是否有任何插件或方法可以有效地处理此要求？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-08-01T09:11:57.643

这正是您正在寻找的： [https ://github.com/biouno/uno-choice-plugin/wiki/Uno-Choice-Cascade-Dynamic-Choice-Parameter](https://github.com/biouno/uno-choice-plugin/wiki/Uno-Choice-Cascade-Dynamic-Choice-Parameter)

它似乎是一个隐藏的宝石，到目前为止还没有在任何类似的问题中找到它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-12-19T11:49:52.580

让我们保持简单，这是实现所需的分步过程。
1.在您的 Jenkins 中安装 Active Choices 插件。
2.添加一个主动选择参数 [![在此处输入图像描述](../Images/d86e5864671e15f9032b59eb617ae01a.png)](https://i.stack.imgur.com/v5SVP.png<br)

3.  添加一个主动选择反应参数。 [![在此处输入图像描述](../Images/1088eae6d94b0ffb9bdfbe9aa72ddf01.png)](https://i.stack.imgur.com/Niq3v.png<br)

4.单击应用，然后单击保存。
完成。！！！
如果遇到任何问题，请发表评论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T11:37:20.970

我没有使用它，但看起来下面的插件可以做你想做的事：

一个 Jenkins 参数插件，允许两个选择元素。第二个选择根据为第一个选择所做的选择填充值。

[https://github.com/tekante/Dynamic-Jenkins-Parameter/wiki](https://github.com/tekante/Dynamic-Jenkins-Parameter/wiki)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-01-21T15:41:34.527

此处提供了具有此功能（以及更多功能）的新插件：[https ://wiki.jenkins-ci.org/display/JENKINS/Active+Choices+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Active+Choices+Plugin)

wiki 页面包含几个使用示例和代码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T07:58:08.617

[这](http://jenkins.361315.n4.nabble.com/file/n3321631/hudson.jpg)就是你想要达到的目标吗？

然后你可以继承`hudson.model.ChoiceParameterDefinition`，并覆盖它的方法`getChoicesText`。根据您的需要返回选项，在您的情况下，您可以从`Hudson.getInstance()`.

下面的片段显示了如何获取环境变量。

```
Hudson.getInstance().getGlobalNodeProperties()
       .get(EnvironmentVariablesNodeProperty.class).getEnvVars().get(name); 
```

[这](https://stackoverflow.com/questions/4987368/how-to-make-dynamic-drop-down-lists-on-parameterized-build-page-in-a-custom-huds)是类似的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-13T16:43:18.977

这应该可以让您单选、多选并在各个级别中进行操作 [https://wiki.jenkins-ci.org/display/JENKINS/Active+Choices+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Active+Choices+Plugin)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-24T21:15:41.237

这是示例，我想在寻找此问题时找到；

这是使用 Jenkins 作业 DSL 创建主动选择反应参数的方法。

```
activeChoiceReactiveParam('PARAMETER_NAME') {
    description('Parameter description')
    filterable()
    choiceType('SINGLE_SELECT')
    groovyScript {
        script('return [ANOTHER_PARAMETER + ".suffix", ANOTHER_PARAMETER + ".suffix2"]')
        fallbackScript('return ["NotFound"]')
    }
    referencedParameter('ANOTHER_PARAMETER')
} 
```

注意：如果通过 DSL 导入作业不起作用，只需“配置”和“保存”即可。有一个错误：[JENKINS-42655](https://issues.jenkins-ci.org/browse/JENKINS-42655?focusedCommentId=378843&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-378843)

# c# - 如何删除除wpf中的一个以外的所有选项卡项目？

> ID：15653839
> 
> 赞同：2
> 
> 时间：2013-03-27T07:39:26.780
> 
> 标签：c#, .net, wpf, wpf-controls

单击注销按钮时，我想删除所有选项卡项我的代码如下

```
foreach (object item  in mainTab.Items)
{
  TabItem ti = (TabItem)item;
  if ("welcomeTabItem" != ti.Name)
    {
      mainTab.Items.Remove(item);
    }
} 
```

但这会产生以下错误

> *error-Collection 被修改；枚举操作可能无法执行。*

是否存在其他方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T07:42:31.620

您可以获得所需的项目，然后清除控件并重新添加该项目。

```
// Note that `First` will throw an exception if the item isn't found.
TabItem ti = mainTab.Items.First(t => t.Name == "WelcomTabItem");
mainTab.Items.Clear();
mainTab.Items.Add(ti); 
```

或者，如果“WelcomeTabItem”可能不在`Items`：

```
TabItem ti = mainTab.Items.FirstOrDefault(t => t.Name == "WelcomTabItem");
mainTab.Items.Clear();
if(ti != null)
    mainTab.Items.Add(ti); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T07:40:18.610

您不能`IEnumerables`在`foreach`循环中编辑。insted 使用`for`循环。

```
for (int i = mainTab.Items.Count -1; i >=0; i--)
{
  TabItem ti = (TabItem)mainTab.Items[i];
  if ("welcomeTabItem" != ti.Name)
   {
     mainTab.Items.Remove(ti);
   }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-27T07:50:28.537

您可以使用`LINQ`删除这样的项目 -

```
mainTab.Items.RemoveAll(ti => ((TabItem)ti).Name != "welcomeTabItem"); 
```

确保`using System.Linq;`在文件顶部添加命名空间。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-27T07:49:08.340

不允许在 Foreach 中编辑 Enumerable

您可以使用以下 LINQ 代码来删除除“welcomeTabItem”之外的所有项目：

```
mainTab.Items.RemoveAll(i => i.Name != "welcomeTabItem"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T07:42:18.130

使用以下代码：

```
var itemsToRemove = new List(TabItem);

foreach (object item  in mainTab.Items)
{
  TabItem ti = (TabItem)item;
  if ("welcomeTabItem" != ti.Name)
   {
     itemsToRemove.Add(item);
   }
}

foreach (var itemToRemove in itemsToRemove)
{
    mainTab.Items.Remove(itemToRemove);
} 
```

枚举时不能从集合中删除项目

# python - 从包含角括号的python列表中检索一个值

> ID：15653844
> 
> 赞同：-3
> 
> 时间：2013-03-27T07:39:50.190
> 
> 标签：python, list

从 python 调用 wmi 时，它返回一个这样的列表：

```
[<_wmi_object: \\My_server\root\virtualization:Msvm_ComputerSystem.CreationClassName="Msvm_ComputerSystem",Name="6B76E537-049A-4AAB-8BCD-F95B2F0F8F42">] 
```

如何检索“名称”的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T07:56:12.017

`[<_wmi_object: \\My_server\root\virtualization:Msvm_ComputerSystem.CreationClassName="Msvm_ComputerSystem",Name="6B76E537-049A-4AAB-8BCD-F95B2F0F8F42">]`

可能是一个包含单个元素的列表，

`<_wmi_object: \\My_server\root\virtualization:Msvm_ComputerSystem.CreationClassName="Msvm_ComputerSystem",Name="6B76E537-049A-4AAB-8BCD-F95B2F0F8F42">`

您必须阅读此对象的文档以了解如何提取名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T07:48:39.973

你有没有尝试过：

```
origList  = [<_wmi_object: \\My_server\root\virtualization:Msvm_ComputerSystem.CreationClassName="Msvm_ComputerSystem",Name="6B76E537-049A-4AAB-8BCD-F95B2F0F8F42">, ...]

names = [getattr(rec, 'Name') for rec in origList if hasattr(rec, 'Name')] 
```

# ios - NSXML Parser 逐节点解析

> ID：15653847
> 
> 赞同：1
> 
> 时间：2013-03-27T07:39:55.280
> 
> 标签：ios, objective-c, nsxml

我有一个这样的 XML，

```
<?xml version="1.0" standalone="yes"?>
<user id="1" name=""><class id="1" name=""><subjects id="1" name=""><books id="1" name="">   
<chapters id="1" name="">
<pages id="0" name="" url="http://172.16.33.25/casa/admin/uploads/mathematic/Page001.html"/>
<pages id="1" name="" url="http://172.16.33.25/casa/admin/uploads/mathematic/Page002.html"/>
</chapters></books></subjects></class></user> 
```

这里我需要数组中的 url 值，我正在使用`NSXML`Parser。我该如何解析这个。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:30:04.890

尝试

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{         
    if([elementName isEqualToString:@"pages"])
    {
        NSString *urlValue=[attributeDict valueForKey:@"url"];
        [arr addObject:urlValue];
    }
} 
```

# ios - 我可以像这样自定义 UIPickerView 吗？

> ID：15653852
> 
> 赞同：3
> 
> 时间：2013-03-27T07:40:13.250
> 
> 标签：ios, objective-c, uipickerview

我正在使用最新的 SDK 开发 iOS 4.3 应用程序。

我必须定制一个`UIPickerView`这样的：

![在此处输入图像描述](../Images/8ec3847718421944dce976a46c22feea.png)

**我该怎么做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:36:39.967

试试这个，这是一个可定制的项目[http://dev.doukasd.com/2011/04/infinite-scrolling-dial-control-for-ios/](http://dev.doukasd.com/2011/04/infinite-scrolling-dial-control-for-ios/)也看看这篇文章[Custom UIPickerView with Custom Background color](https://stackoverflow.com/questions/11426219/custom-uipickerview-with-custom-background-color)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T09:17:27.193

检查这个答案：

[具有自定义背景颜色的自定义 UIPickerView](https://stackoverflow.com/questions/11426219/custom-uipickerview-with-custom-background-color)

希望它有所帮助。

# javascript - IE 中的 AjaxForm 上传

> ID：15653857
> 
> 赞同：1
> 
> 时间：2013-03-27T07:40:30.120
> 
> 标签：javascript, jquery, internet-explorer, ajaxform

我有一个小问题，如果我第一次运行此代码，我的进度条（图像）不显示，但如果我第二次运行它，而不刷新页面，那么它可以工作，我用资源管理器调试它，创建断点我在哪里显示和隐藏进度条，第一次没有选择你，但这是第二次，有人知道为什么吗？

```
function doObjectUploadJQuery() {
var progressbar     = $('#span_upload_prog_img');
var submitbutton    = $("#upload_btn");
var myform  = $("#frm_add_attach");

$(myform).submit();
$(myform).ajaxForm({
        beforeSend: function() { //brfore sending form
                progressbar.show();
                submitbutton.attr('disabled', ''); // disable upload button
        },
        error: function() {
            alert("An error occured.");
        }, 
        complete: function(response) { // on complete
                myform.resetForm();  // reset form
                progressbar.hide();
                submitbutton.removeAttr('disabled'); //enable submit button
        }
}); 
```

}

# c++ - CLOSE 和 CLOSE_FRACTION 的区别

> ID：15653859
> 
> 赞同：0
> 
> 时间：2013-03-27T07:40:42.390
> 
> 标签：c++, unit-testing, boost-test

谁能解释**BOOST_CHECK_CLOSE**和**BOOST_CHECK_CLOSE_FRACTION**之间的区别？

我刚刚浏览了 boost.test 测试工具参考，我很确定它们有相同的描述。

# android - 从android中的listview中删除项目

> ID：15653861
> 
> 赞同：1
> 
> 时间：2013-03-27T07:40:54.857
> 
> 标签：android, listview, android-arrayadapter, simplecursoradapter

我`SimpleCursorAdapter`用来从数据库中获取数据并将其显示在`ListView`. 请任何人告诉我如何从该列表中选择/删除一个或多个列表项。或者至少告诉我如何从数据库中获取数据`ArrayAdapter`以将其显示在`ListView`.

教程将是最佳实践。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:21:29.547

> 请任何人告诉我如何从该列表中选择/删除一个或多个列表项。

因此，您需要获取每一行的 id 才能从数据库中删除正确的项目。当时只从列表中删除一项的问题并不太棘手，只需创建一些 OnItemClickListener 或 ContextMenu 并提供给用户删除选项。然后，如果您使用一些 CursorAdapter，您会自动从 OnItemClick 方法的长 id 参数中获取所选项目的 rowId。对于 ContextMenu，您可以从 AdapterView.ContextMenuInfo 获取 id。

问题是，如果您想删除多个，并且使用任何侦听器或 ContextMenu 都不够有效。您应该决定创建自己的 ListView 行，您将在其中拥有 CheckBox，然后您可以简单地删除多行。你去抛出 List 并从数据库中删除 CheckBox 选中的每一行并刷新 List 。这是我脑海中浮现的第一个想法。

> 或者至少告诉我如何使用 ArrayAdapter 从数据库中获取数据以将其显示在 ListView 中。

如果你想使用 ListAdapter(ArrayAdapter, BaseAdapter etc.) 那么现在你需要从数据库中获取记录列表。我建议您创建自己的 ListAdapter 子类来更好地控制适配器。在这里，我建议您创建自己的对象，该对象将代表您在数据库中的表，其中对象的属性等于表中的列。然后简单地从数据库中获取列表。下面我会给你伪代码。

## 例子：

```
public List<OwnObject> getAll() {
   List<OwnObject> items = new ArrayList<OwnObject>();
   OwnObject o = null; 
   Cursor c = null;
   try {
      db = helper.getReadableDatabase(); // or created some method as open();
      String query = "select * from TableName";
      c = db.rawQuery(query, null);
      if (c.moveToFirst()) {
         do {
            o = new OwnObject();
            o.setProperty1(c.getString(c.getColumnIndex("Column1")));
            o.setProperty2(c.getString(c.getColumnIndex("Column2")));
            o.setProperty3(c.getString(c.getColumnIndex("Column3")));
            ...
            items.add(o);

         } while (c.moveToNext());
      }
      return items;
   }
   finally {
      if (c != null) {
         c.close();
      }
      // close also db
   }
} 
```

# extjs4.1 - ExtJS 4.1 如何在组合框中设置预选项目？

> ID：15653866
> 
> 赞同：1
> 
> 时间：2013-03-27T07:41:11.643
> 
> 标签：extjs4.1

我正在使用 ExtJS 4.1，我需要创建一个包含名称列表的组合框，并且我想在其中设置一个特定的预选项目，但我不知道该怎么做。这是创建我的组合框的代码：

```
{
                            xtype         : 'combo',
                            fieldLabel    : 'Pay Method',                               
                            triggerAction : 'all',
                            forceSelection: true,
                            store         : 'S01I011001',
                            editable      : false,
                            emptyText     : 'Please Select',
                            name          : 'payMethodId',
                            typeAhead     : true,
                            queryMode     : 'remote',
                            displayField  : 'name',
                            valueField    : 'id',
                            id            : 'payMethod-t00700106',
                            listeners  :{                               
                                'select': {
                                    fn: function (combo, value) {
                                        var value=combo.getValue();                              
                                        if(value != null || value != ''){                              
                                            if(value == '2' || value == '3'){
                                                Ext.getCmp('return-t00700106').disable();
                                            }else{
                                                Ext.getCmp('return-t00700106').enable();
                                            }
                                        }
                                    }
                                }                    
                            }
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T15:46:59.523

只需使用“值”属性，并将其设置为所需条目的代码值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T06:52:29.603

我是这样做的，并激活了存储属性 autoLoad：true

```
 {
                            xtype         : 'combo',
                            fieldLabel    : 'Pay Method',                               
                            triggerAction : 'all',
                            forceSelection: true,
                            store         : 'S01I011001',
                            editable      : false,
                            emptyText     : 'Please Select',
                            name          : 'payMethodId',
                            typeAhead     : true,
                            queryMode     : 'remote',
                            displayField  : 'name',
                            valueField    : 'id',
                            id            : 'payMethod-t00700106',
                            listeners     :{
                                boxready  : function(){
                                  this.setValue(this.getStore().getAt(0).get(this.valueField),true);
                                      this.fireEvent('select',this);
                                      }
                                  }
                            } 
```

# ios - 使 UIButton 能够通过登录中的 if/else 语句运行

> ID：15653876
> 
> 赞同：0
> 
> 时间：2013-03-27T07:41:58.207
> 
> 标签：ios, xcode, if-statement, login, uibutton

我想创建一个登录但制作一个 IF 语句，它将提供 UIButton -“LoginButton”功能，如果输入正确，如代码中所述，请帮助构建代码 -

```
#import "StudentLogInViewController.h"

@interface StudentLogInViewController ()

@end

@implementation StudentLogInViewController

-(IBAction)UsernametText {
LoginButton.userInteractionEnabled = [UsernameText.text isEqualToString:@"jzarate"];
}

-(IBAction)passwordText{
    LoginButton.userInteractionEnabled = [PasswordText.text isEqualToString:@"14054"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:45:54.890

如果我没有提到只有在输入正确的用户名和密码时才启用登录按钮，从安全的角度来看，这可能不是最好的主意，那我就失职了。但是，如果这是您想要做的：

// StudentLogInViewController.h

```
// Conform the UITextFieldDelegate
@interface StudentLogInViewController <UITextFieldDelegate>

@end 
```

// StudentLogInViewController.m

```
#import "StudentLogInViewController.h"

@interface StudentLogInViewController () 

@end

@implementation StudentLogInViewController

-(void)viewDidLoad {
    [super viewDidLoad];

    UsernameText.delegate = self;
    PasswordText.delegate = self;
}

// This is a UITextFieldDelegate method
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
    // The text field will not be updated to the newest text yet, but we know what the user just did so get it into a string
    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    // Depending on which field the user is typing in, load in the appropriate inputs
    NSString *username, *password;
    if (textField == UsernameField) {
        username = newString;
        password = PasswordField.text;
    } else {
        username = UsernameField.text;
        password = newString;
    }

    // If both the username and password are correct then enable the button
    LoginButton.enabled = ([username isEqualToString:@"correctUsername"] && [password isEqualToString:@"correctPassword"]);

    // Return YES so that the user's edits are used
    return YES;
}

@end 
```

# php - PHP继承自子冲突

> ID：15653877
> 
> 赞同：0
> 
> 时间：2013-03-27T07:42:00.740
> 
> 标签：php, oop, inheritance, parent-child

我有如下的类层次结构。

```
class foo()
{
   function __construct($dfnname) {
      $this->callf = $dfnname;
   }
   function getd()
   {
      return call_user_func($this->callf);
   }
   function retrieve()
   {
      return $this->getd();
   }
}

class bar extends foo
{
   function getd()
   {
      return 'invalid call';
   }
   function getc()
   {
      return 'valid call';
   }
}

$ins = new bar('getc');
echo $ins->retrieve(); 
```

我得到了答案`'invalid call'`。我想得到“有效通话”的答案。

可能是因为 from 函数`foo=>retrieve()`，它调用了`$this->getd()`. 而这里不是调用`foo=>getd()`，而是直接调用`bar=>getd()`，我应该怎么做才能调用`foo=>getd()`，`foo=>retrieve()`也 应该调用函数`call_user_func($this->callf)`。`foo=>getd()``bar=>getc()`

我知道我缺少一些基本的继承概念。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:47:36.540

像这样的东西？

```
class foo
{
   function __construct($dfnname) {
      $this->callf = $dfnname;
   }
   private function getd()
   {
      return call_user_func($this->callf);
   }

   private function getc()
   {

   }
   function retrieve()
   {
      return $this->getd();
   }
}

class bar extends foo
{

}

$ins = new bar('getc');
echo $ins->retrieve(); 
```

您是否阅读过有关[PHP 中可见性的](http://php.net/manual/en/language.oop5.visibility.php)文档？

# mysql - jsp登录表单Mysql

> ID：15653878
> 
> 赞同：0
> 
> 时间：2013-03-27T07:42:04.753
> 
> 标签：mysql, jsp, login

我有一个使用 JSP 的登录表单来检查 MySQL 数据库的用户名和密码。当我尝试使其登录时，它意味着将我转发到主菜单页面。但是，唯一的避风港是页面变为空白，并且 JSP 文件名被添加到 URL 的末尾。JSP 如下所示。我究竟做错了什么？

```
<%@ page language ="java" import="java.sql.*" %>
<%@ page import ="javax.sql.*" %>

<%
String user=request.getParameter("name");
String passwrd=request.getParameter("pass");

try{

    Class.forName("com.mysql.jdbc.Driver");
    java.sql.Connection con = DriverManager.getConnection("jdbc:mysql://localhost:8080/languagetest", "root", "password");
    Statement st=con.createStatement();
    ResultSet rs=st.executeQuery("select userid,password from Users");
    while(rs.next())
    {
        String userid=rs.getString(1);
        String password=rs.getString(2);
        if(user.equals(userid) && passwrd.equals(password))
        {
            out.println("welcome");

            %>
            <jsp:forward page="Mainmenu.html"/>
        <%}
    }
}catch(Exception e1)
{}

%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:47:03.533

你被异常捕获 永远不要吃异常：

```
catch(Exception e1)
{} 
```

* * *

```
catch(Exception e1)
    {e1.printStackTrace(); // also print some meaning full text for Front-End user} 
```

打印stackTrace，在JSP首页上记录跟踪显示的全文异常情况很可能您因找不到数据库连接/驱动程序而失败

# java - java swing中定时器与for循环之间的性能？

> ID：15653892
> 
> 赞同：0
> 
> 时间：2013-03-27T07:42:54.810
> 
> 标签：java, swing, user-interface, timer

我尝试测试在 Raspberry PI 上运行的 Swing GUI。我的目标是每 1 秒显示一次系统时间。并且每“cycleTime”秒更新“planValue”。在桌面上测试它是正常的。当我在 RaspPI 上运行时，更新“planValue”或打开弹出新对话框时非常慢且有时间延迟。

**这是 MainScreen 类**

```
public class MainScreen extends javax.swing.JFrame implements ActionListener {

    private javax.swing.JLabel jLabelPlan;
    private javax.swing.JLabel jLabelSysTime;
    int planValue;
    int cycleTime = 5; //5 seconds
    int counter = 1;

    public MainScreen() {
        initComponents();
        //start timer.
        javax.swing.Timer timer = new javax.swing.Timer(1000,this);
        timer.start();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        showDisplay();
    }

    public void showDisplay() {
        DateFormat formatTime = new SimpleDateFormat("HH:mm:ss");
        jLabelSysTime.setText(formatTime.format(Calendar.getInstance().getTime()));
        jLabelPlan.setText(String.valueOf(planValue));
    }
} 
```

如果我创建新的 Timer planTimer

```
Timer planTimer = new Timer(cycleTime * 1000, new ActionListener() {   
    @Override
    public void actionPerformed( ActionEvent e ) {
        planValue += 1;
    }
});
planTimer.start(); //Timer updPlan start 
```

或使用循环`actionPerformed(ActionEvent e)`

```
@Override
public void actionPerformed(ActionEvent e) {
    showDisplay();
        if(counter == cycleTime) {
            planValue += 1;
            counter = 1;
        } else {
            counter++;
        }
    }
} 
```

有什么建议吗？或在 Raspberri PI 上运行我的 GUI 的最佳解决方案。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T07:47:34.560

你应该让你的计时器重复使用[`Timer.setRepeats(true)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html#setRepeats%28boolean%29).

```
Timer planTimer = new Timer(cycleTime * 1000, new ActionListener() {   
    @Override
    public void actionPerformed( ActionEvent e ) {
        planValue += 1;
    }
});
plainTimer.setRepeats(true);//Set repeatable.
planTimer.start(); 
```

你的`timer`变量应该是这样的：

```
javax.swing.Timer timer = new javax.swing.Timer(1000, new ActionListener()
{
    @Override
    public void actionPerformed(ActionEvent evt)
    {
        showDisplay();
    }
});
timer.setRepeats(true);
timer.start(); 
```

# jquery - 单选按钮组上 jQuery 验证的自定义错误消息

> ID：15653894
> 
> 赞同：1
> 
> 时间：2013-03-27T07:42:59.040
> 
> 标签：jquery, html, jquery-validate, radio-button

我正在使用以下代码进行组合框组验证，它显示*此字段是必需的。*作为错误消息。如何修改以下代码以自定义消息。提前致谢。

```
 $(document).ready(function() {    

    $('input[name="batches.batch"]').rules("add", "required");//works fine
    $('input[name="batches.batch"]').messages("error message1", "error message2");// no effect

}); 
```

我的 html ：

```
 <input name="batches.batch" type="radio" value="" />First <br />
    <input name="batches.batch" type="radio" value="" />Second<br />
    <input name="batches.batch" type="radio" value="" />Third<br />
    <input name="batches.batch" type="radio" value="" />Fourth<br /> 
```

我正在使用的库：

```
<script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.10.1.custom.min.js"></script>
<script type="text/javascript" src="js/custom/jquery.validate.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T14:59:23.573

你的代码...

```
$('input[name="batches.batch"]').rules("add", "required");//works fine
$('input[name="batches.batch"]').messages("error message1", "error message2");// no effect 
```

它不起作用，因为[没有记录的方法](http://docs.jquery.com/Plugins/Validation)称为`.messages()`. 方法必须由插件开发人员创建才能可用。

相反，`messages`进入你的`rules('add')`方法，像这样......

```
$('document').ready(function() {

    $('#myform').validate();

    $('input[name="batches.batch"]').rules("add", {
        required: true,
        messages: {
            required: "my custom required message"
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/rDcDW/](http://jsfiddle.net/rDcDW/)**

上面的方法非常适合*动态添加规则*，但是，如果您只需要[解决`name`带有点的问题](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)，只需将规则声明为正常，但在`name`...

```
$(document).ready(function() {

    $('#myform').validate({ // initialize the plugin
        rules: {
            'batches.batch': {
                required: true
            }
        },
        messages: {
            'batches.batch': {
                required: "my custom required message"
            }
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/YZs3Y/](http://jsfiddle.net/YZs3Y/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:21:56.930

```
$("#formid").validate({
    rules: {
        batch: "required"
    },
    messages: {
        batch: { required: "Customized error message" }
    }
 }); 
```

# java - 关于选中复选框的显示面板

> ID：15653900
> 
> 赞同：1
> 
> 时间：2013-03-27T07:43:35.177
> 
> 标签：java, swing, user-interface, jcheckbox

我现在正在学习 java Swing，我从在线教程中获得了这个演示代码。选择相应的复选框后，您可以显示 4 个不同颜色的面板（红色、蓝色、绿色、黄色）。但是如果我想从 6("red","blue","green","yellow","black","white") 复选框中选择 4 种颜色，如何根据这个演示进行修改？

```
import javax.swing.*;
import java.awt.*;
import java.awt.Color;
import java.awt.event.*;

public class CheckBoxExample_UltraExtended implements  ActionListener{

    JCheckBox redCB, blueCB, greenCB, yellowCB;
    JPanel redBox, blueBox, greenBox, yellowBox;
    JButton refresh;

    public JPanel createContentPane (){

        JPanel totalGUI = new JPanel();

        // We create four checkboxes to control what is currently on-screen.
        // At the start, we set the red checkbox to 'ticked' or selected.

        JPanel checkBoxPanel = new JPanel();
        checkBoxPanel.setLayout(new BoxLayout(checkBoxPanel, BoxLayout.PAGE_AXIS));
        checkBoxPanel.add(Box.createRigidArea(new Dimension(10,0)));

        redCB = new JCheckBox("Red");
        redCB.setSelected(true);

        checkBoxPanel.add(redCB);
        checkBoxPanel.add(Box.createHorizontalGlue());

        blueCB = new JCheckBox("Blue");        
        checkBoxPanel.add(blueCB);
        checkBoxPanel.add(Box.createHorizontalGlue());

        greenCB = new JCheckBox("Green");
        checkBoxPanel.add(greenCB);
        checkBoxPanel.add(Box.createHorizontalGlue());

        yellowCB = new JCheckBox("Yellow");
        checkBoxPanel.add(yellowCB);
        checkBoxPanel.add(Box.createRigidArea(new Dimension(10, 0)));

        // Now we create a simple JPanel that displays our four coloured boxes.

        JPanel boxPanel = new JPanel(new GridLayout(2, 2, 20, 20));

        redBox = createSquareJPanel(Color.red, 50);
        blueBox = createSquareJPanel(Color.blue, 50);
        greenBox = createSquareJPanel(Color.green, 50);
        yellowBox = createSquareJPanel(Color.yellow, 50);

        // This sets all bar the red box to be hidden.

        blueBox.setVisible(false);
        greenBox.setVisible(false);
        yellowBox.setVisible(false);

        boxPanel.add(redBox);
        boxPanel.add(blueBox);
        boxPanel.add(greenBox);
        boxPanel.add(yellowBox);

        // Now lets quickly add a refresh button with an actionListener to determine
        // when it is pressed.

        refresh = new JButton("Refresh");
        refresh.addActionListener(this);

        totalGUI.add(checkBoxPanel);
        totalGUI.add(boxPanel);
        totalGUI.add(refresh);

        totalGUI.setOpaque(true);
        return totalGUI;
    }

    // In this method, we create a square JPanel of a colour and set size
    // specified by the arguments.

    private JPanel createSquareJPanel(Color color, int size) {
        JPanel tempPanel = new JPanel();
        tempPanel.setBackground(color);
        tempPanel.setMinimumSize(new Dimension(size, size));
        tempPanel.setMaximumSize(new Dimension(size, size));
        tempPanel.setPreferredSize(new Dimension(size, size));
        return tempPanel;
    }

    // This actionPerformed simply takes sets the visibility of each
    // coloured box to the state of each checkbox.

    public void actionPerformed(ActionEvent e) {

        if(e.getSource() == refresh)
        {
            redBox.setVisible(redCB.isSelected());
            blueBox.setVisible(blueCB.isSelected());
            greenBox.setVisible(greenCB.isSelected());
            yellowBox.setVisible(yellowCB.isSelected());
        }
    }

    private static void createAndShowGUI() {

        JFrame.setDefaultLookAndFeelDecorated(true);
        JFrame frame = new JFrame("[=] JCheckBox [=]");

        CheckBoxExample_UltraExtended demo = new CheckBoxExample_UltraExtended();
        frame.setContentPane(demo.createContentPane());

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:16:12.240

你必须`addActionListener`像这样的复选框。

取一个`private`变量`numberOfCheckedBoxes`来跟踪选中的复选框的数量。

```
private numberOfCheckedBoxes = 0; 
```

现在，当您创建复选框时，添加这样的动作侦听器

```
redCB = new JCheckBox("Red");
redCB.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        if (numberOfCheckedBoxes  == 4){
            JOptionMessage.showMessageDialog("Can not select more than 4 check boxes");
            return;
        }
        if (redCB.isSelected()){
            increaseNumberOfCheckedBoxes();
        }else{
            reduceNumberOfCheckedBoxes();
        }
    }
}); 
```

您必须为您创建的所有复选框执行此操作。现在是其他必需的方法。

```
public void increaseNumberOfCheckedBoxes(){
    numberOfCheckedBoxes ++;
}
public void reduceNumberOfCheckedBoxes(){
    numberOfCheckedBoxes --;
} 
```

**另一种方法是**，创建一个方法`handleCheckBoxSelection`

```
public handleCheckBoxSelection(boolean isSelected){
    if (numberOfCheckedBoxes  == 4){
        JOptionMessage.showMessageDialog("Can not select more than 4 check boxes");
        return;
    }
    if (isSelected){
        increaseNumberOfCheckedBoxes();
    }else{
        reduceNumberOfCheckedBoxes();
    }
} 
```

然后在初始化复选框时，调用此函数

```
redCB = new JCheckBox("Red");
redCB.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        handleCheckBoxSelection(redCB.isSelected());
    }
}); 
```

# asp.net-mvc - web api 和 mvc 部分

> ID：15653901
> 
> 赞同：0
> 
> 时间：2013-03-27T07:43:36.880
> 
> 标签：asp.net-mvc, asp.net-web-api

当您使用 web api 和 mvc 时，“部分视图”方法是否仍然可行？

如果是这样，您将如何处理这种情况？我假设这样的事情？

1.  来自 mvc 的请求页面
2.  调用来自 mvc 的部分（我假设它包含一个用于 javascript 数据绑定的模板？）
3.  ajax 调用 web api 获取数据
4.  将 json 数据与 knockoutjs、Angularjs、.. 绑定（你推荐哪个？）

但这似乎是一种缓慢的做事方式（因为您总是需要打 2 个电话）。还是应该只使用*旧方法*并从 mvc 操作中调用 web api？（这不需要javascript数据绑定，我不介意，我还没有使用javascript数据绑定框架的经验）

另一种可能性是将部分模板嵌入页面本身，但如果您使用许多不同的部分，这不会影响数据吗？例如，如果您请求 DTO 列表，并且每个 DTO 应该在不同的视图中表示（因为不同的状态）。这不会给客户太多的数据权力吗？

如果它不再是一种可行的方法，那么我应该怎么做（使用具有不同状态的对象列表示例）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:39:36.423

不，它使客户对数据没有太多的权力。当你需要时，即使没有部分，你也可以实现它，或者如你所说的“嵌入”它。

它没有给客户太多控制权，甚至您可以在单页应用程序 (SPA) 概念中实现您的视图，当使用 KnockoutJs 或 Angular 或其他东西时，您赋予客户 Js 更多责任，并且它有自己的“ViewModel”。在这种情况下，客户端变成了来自 ASP.NET Web API 服务或使用 ajax 的页面的数据。在这两种情况下，您都可以管理发送给客户端的数据。

我更喜欢而不是

> 另一种可能性是将部分模板嵌入页面本身，但如果您正在使用许多不同的部分模板

以 SPA 风格工作，而不是部分在 Js 客户端上有一个“ViewModel”。

# ruby-on-rails - Rails json输出carrierwave缩略图版本

> ID：15653907
> 
> 赞同：2
> 
> 时间：2013-03-27T07:44:12.497
> 
> 标签：ruby-on-rails, json, thumbnails

我需要从控制器渲染出一个**json**输出，并且我想在 json 中包含我的图像的缩略图版本。

如果我只使用它来渲染 json，`:image_url`它会输出完整的图像 url，如果我使用`:image`它，它将列出所有可用的图像（包括缩略图）。

如何在 json 中仅渲染图像的缩略图版本？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T07:58:55.027

你应该使用这样的东西。

```
class ArtworkSerializer < ActiveModel::Serializer
    attributes :id, :name, :image_url

    def image_url
      object.image_url(:thumbnail)
    end
  end 
```

然后在您的 JSON 响应中，您将拥有一个属性`:image_url`。

**注意：**您应该在您的 carrierwave 上传器中定义一个版本 :thumbnail。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-06T11:24:49.997

我建议你像这样使用序列化器：

```
class YourSerializer < ActiveModel::Serializer
  attributes(
    :id,
    :image,
    :small,
    :medium,
    :large
  )

  def small
    url(width: 116, height: 116, crop: "fill")
  end

  def medium
    url(width: 640, height: 400, crop: "fill")
  end

  def large
    url(width: 1000, crop: "fill")
  end

  private

  def url(options={})
    options[:format] = "png"
    options[:secure] = true

    object.image_url(options)
  end
end 
```

如果您坚持使用缩略图或已定义的版本，请使用：

```
def url
      object.image_url(:thumbnail)
end 
```

# grails - Grails 中输入字段的动态格式（小数）

> ID：15653908
> 
> 赞同：0
> 
> 时间：2013-03-27T07:44:19.003
> 
> 标签：grails, formatting, decimal, input-field

我有一个具有 BigDecimal 类型的属性“initialPrice”的“Trade”类。此属性可以有不同的小数，具体取决于另一个类“符号”中包含的属性“小数”，因此需要不同的格式，例如“#,###0.##”、“#,###0.### ##" 等。这对输出字段没有问题 - 我制作了一个 TagLib 来解决这个问题。

问题在于输入字段。默认值是 i 舍入 3 个小数，因此如果您使用超过 3 个小数，您将在更新时丢失这些。

我不知道如何或是否可以在这里使用我的 TagLib。我一直在尝试很多不同的方法，但都没有奏效。

这是我的标签库：

```
class PriceTagLib {
    def fmtPrice = {attrs, body->
        def BigDecimal number = attrs.number
        def int noOfDecimals = attrs.decimals
        switch (noOfDecimals) {
           case 1: out <<new DecimalFormat('###,##0.#').format(number)
            break
           case 2: out << new DecimalFormat('###,##0.##').format(number)
            break
           case 3: out << new DecimalFormat('###,##0.###').format(number)
            break
           case 4: out << new DecimalFormat('###,##0.####').format(number)
            break
           case 5: out << new DecimalFormat('###,##0.#####').format(number)
        }
    }
} 
```

这是我的课...

```
class Symbol {
    String          name            //The name of the symbol e.g. EURUSD, USDCAD etc.
    int             decimals

    static hasMany = [trades:Trade]

}

class Trade {
    static belongsTo = [symbol:Symbol, strategy:Strategy]
    static hasMany = [positions:Position]

    BigDecimal      initialPrice
    Symbol          symbol
    Strategy        strategy
    Position        positions

    static constraints = {
    type(inList:["Sell", "Buy"])
        initialPrice(scale:5)
        positions(nullable:true)
    }

} 
```

这来自 show.gsp ，它可以按我的意愿工作：

```
<span class="property-value" aria-labelledby="initialPrice-label"><g:fmtPrice decimals="${tradeInstance.symbol.decimals}" number="${tradeInstance.initialPrice}"></g:fmtPrice></span> 
```

这是我需要修改的行 - 即我需要在“值”参数的引号之间写的内容。也许我需要更换整条线？该行位于 _form.gsp 模板中。

```
<g:field name="initialPrice" value="${tradeInstance.initialPrice}" required=""/> 
```

希望任何人都可以对此有所帮助。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:55:40.413

您可以简单地在 value 属性中调用您的标签库：

```
<g:field name="initialPrice" value="${g.fmtPrice(decimals: tradeInstance.symbol.decimals, number: tradeInstance.initialPrice)}" required=""/> 
```

# php - ssh 隧道不适用于 mssql_connect()

> ID：15653909
> 
> 赞同：1
> 
> 时间：2013-03-27T07:44:20.327
> 
> 标签：php, sql-server

为什么 mssql_connect() 无法通过隧道连接到 mssql 数据库。

我为远程服务器创建了隧道，例如：

```
$ssh -L 1433:db_server:1433 user@mid_server 
```

这会将本地端口 1433 转发到 db_server。我测试过。

但是，当我尝试使用 php 连接到数据库时，它不起作用

```
mssql_connect("localhost:1433", 'db_user', 'db_password') 
```

细节（已编辑）：

1.  db_server ：安装 sql server 的远程数据库服务器。数据库服务器有防火墙。只有 mid_server 可以连接
2.  mid_server ：允许连接 db_server 的中间位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T05:33:30.420

我通过在 freetds.conf 上进行一些更改来修复它

```
[global]
    # TDS protocol version
;   tds version = 4.2 
```

至

```
[global]
    # TDS protocol version
tds version = 7.0 
```

并重新启动apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T14:04:50.507

我假设您正在从 linux（或 MacOS）机器连接到 MSSQL 服务器，可能使用的是 freetds 连接器。需要检查两件事：服务器是否正确侦听端口以及 Linux 机器上是否正确安装了 FreeTDS。由于您可以连接另一个客户端，因此问题应该出在 FreeTDS 上。

确保已安装并正确配置 FreeTDS。尝试直接连接到服务器（它应该提示输入密码）：

```
# tsql -S localhost -U db_user 
```

如有必要，调整 freetds.conf 上的端口/区域设置/版本信息。了解更多信息：

*   [http://freetds.schemamania.org/userguide/freetdsconf.htm](http://freetds.schemamania.org/userguide/freetdsconf.htm)
*   [http://freetds.schemamania.org/userguide/confirminstall.htm#TSQL](http://freetds.schemamania.org/userguide/confirminstall.htm#TSQL)

# asp.net-mvc - 使用 mvc 将业务逻辑放入应用程序的 asp.net 的创建者的建议是什么？

> ID：15653910
> 
> 赞同：0
> 
> 时间：2013-03-27T07:44:23.453
> 
> 标签：asp.net-mvc, model-view-controller, model, controller, business-logic

上网查了一下，发现有人说逻辑应该放在应用`ViewModel`里面，也有人说应该`Controller`放在`asp.net with mvc`应用里面。

所以我无法得出结论。

1.  对此的官方（带有 MVC 的 asp.net 的创建者）的建议是什么？
2.  决定它的理由是什么？（`explanations`和`examples`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T09:39:47.117

View models should only contain logic relevant to presentation. Definitely no business logic.

Business logic shouldn't really go in controllers either. Controllers should be coordinators of the components that are recruited in responding to requests.

For all but the most trivial of applications, you aught to create a services layer that implements business logic and manipulates/persists models.

For larger applications you might also have a dedicated business domain layer accessed by the service layer.

I have a library that I've found useful for implementing and co-locating the domain/rules/workflow in MVC (and other) applications. It's [here](https://github.com/SpiritMachine/Enflow).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:14:39.013

我目前无法提供源或参考（根据您的要求），但业务逻辑应该放在控制器的操作方法中，或者在操作方法调用的另一层中（例如后端 Web 服务，如果您的 ASP.NET MVC应用程序仅用作现有应用程序的前端，就像 OWA 之于 Exchange Server）。

这个理由的核心是“关注”的概念，在这种情况下，ViewModel 对象应该只关注 View 和 Controller('s Actions) 之间的数据传输和验证（而不是验证）。在 ASP.NET MVC 中，ViewModel 类应该是一个 POCO（普通旧 CLR 对象），仅包含与视图中用户提供的数据相对应的属性。在我自己的项目中，我对此进行了扩展，包括将数据从业务实体转换为 ViewModel 对象，而不是直接在控制器的操作中填充属性，我还使用对 MVC 管道所做的修改来执行我自己的验证逻辑。

# spring-batch - Spring-Batch：如何保证一个Job在运行时，不允许同时再次运行

> ID：15653913
> 
> 赞同：5
> 
> 时间：2013-03-27T07:44:41.523
> 
> 标签：spring-batch, spring-batch-admin

如何保证一个Job在运行时，不允许同时再次运行？

我们有 BJ 需要 1 小时来处理提要并填充临时表。此 BJ 的第一步是清除临时表并开始填充主商店前台表中的数据。

考虑一个场景，当 BJ 启动（第一次运行）时，如果我们再次启动 BJ，它将作为第一步的一部分从临时表中删除内容。

所以请建议我如何保持第二次执行直到第一次没有完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T13:49:58.287

您可以创建自定义[Tasklet](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/step/tasklet/Tasklet.html)作为第一步，并在其中使用[JobExecutionDao](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/repository/dao/JobExecutionDao.html#findJobExecutions%28org.springframework.batch.core.JobInstance%29)来查找所有[JobExecutions](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/JobExecution.html)。如果有多个[运行](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/core/JobExecution.html#isRunning%28%29)- 抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T08:08:20.293

我敢肯定，这不是最好的解决方案，但我希望这对您的情况有所帮助。

执行作业时，请确保始终使用相同的参数运行作业。在您的作业成功执行完成后，配置您的调用脚本以删除与批处理作业执行相对应的条目。

这样，它会给出错误，并且不允许您同时运行同一作业的 2 次执行。删除将确保允许串行执行。

**替代方法：** 使用单个参数编写您的作业`job-execution-id`。每次执行作业之前，请从作业的批处理表中查询已完成作业**的最大值。**现在，以 1 作为输入参数`job-execution-id`执行作业。`job-execution-id`

我认为这是比上面更好的方法。我不确定 springbatch 本身是否提供了任何简单的选项来实现这个场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-20T12:47:06.500

也许我误解了您的问题，但是您可以通过`throttle-limit`在 Step 中的 Tasklet 上指定 a 来限制任何单个步骤的并行执行次数。指定一个应该确保您一次只有一个执行：

```
<batch:step id="stepA" next="stepB">
  <batch:tasklet throttle-limit="1">
    <batch:chunk reader="myReader" writer="myWriter" commit-interval="100"/>
  </batch:tasklet>
</batch:step> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T05:33:37.377

在单个 JVM 中实现这一点应该可以使用二进制信号量来实现。这将有助于避免并行执行同一作业。如果您不希望它在设置信号量值的情况下简单地跳过执行，那么让第二个实例等待会有点棘手。

您可以使用合适的“Leader Election”实现进行更复杂的序列化（包括跨 Spring 批处理节点）。我在我的项目中使用了 Netflix Curator（一个 Apache Zookeeper 配方）。这里有一些指示：[https ://github.com/regunathb/Trooper/wiki/Useful-Batch-Libraries](https://github.com/regunathb/Trooper/wiki/Useful-Batch-Libraries)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:32:46.883

您可以设置 spring-batch-Admin UI 以查看作业的状态（失败/运行/完成等）。通过正确设置 Spring Batch Admin UI，您甚至可以查看不同作业中多个任务的状态。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-05T20:11:56.007

您可以添加 JobExecutionListener 的自定义实现。

下面是示例监听器实现：

```
 @Component
    public class JobExecutionListener implements JobExecutionListener{

@Autowired
private JobExplorer jobExplorer;

@Override
public void beforeJob(JobExecution jobExecution) {
    int runningJobsCount = jobExplorer.findRunningJobExecutions(jobExecution.getJobInstance().getJobName()).size();
    if(runningJobsCount > 1){
        throw new RuntimeException("There are already active running instances of this job, Please cancel those executions first.");
    }
}

@Override
public void afterJob(JobExecution jobExecution) {

}

} 
```

如果您有该作业的任何实例已经在运行，这会将当前的作业启动标记为失败。您可以根据您的业务需求处理此异常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-04T08:17:11.387

我通过编写特殊的增量器来做到这一点，该增量器仅在之前的作业执行完成时才增加属性。

```
 public class CompletedJobRunIdIncrementer extends RunIdIncrementer {
    private final JobRepository jobRepository;
    private final String jobName;

    public CompletedJobRunIdIncrementer(JobRepository jobRepository, String jobName) {
        this.jobRepository = jobRepository;
        this.jobName = jobName;
    }

    @Override
    public JobParameters getNext(JobParameters parameters) {
        JobExecution lastJobExecution = jobRepository.getLastJobExecution(jobName, parameters);
        return lastJobExecution == null || lastJobExecution.getStatus() == BatchStatus.COMPLETED ? super.getNext(parameters) : parameters;
    }
} 
```

和这个增量器的工作：

```
jobBuilders.get("myJob").incrementer(new CompletedJobRunIdIncrementer(jobRepository, "myJob").start(someTask()).build() 
```

# jquery - jQuery 1.9.1 $.event.handle.apply 替代

> ID：15653917
> 
> 赞同：6
> 
> 时间：2013-03-27T07:45:01.057
> 
> 标签：jquery, upgrade

我最近将我的一个项目更新为 jQuery 1.9.1，我不能再使用`$.event.handle.apply()`方法。我搜索并发现，我可以放置 jquery.migrate.js。我只是想确认是否还有其他选择？我的 google-fu 在这里失败了……

--EDIT-- 这是导致问题的代码（不是我的......从插件复制的）......

```
// Event handler function
function mouseWheelHandler(event)
{
    var sentEvent = event || window.event,
        orgEvent = sentEvent.originalEvent || sentEvent,
        args = [].slice.call( arguments, 1 ),
        delta = 0,
        deltaX = 0,
        deltaY = 0;
        event = $.event.fix(orgEvent);
        event.type = "mousewheel";

    // Old school scrollwheel delta
    if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta/120; }
    if ( orgEvent.detail     ) { delta = -orgEvent.detail/3; }

    // New school multidimensional scroll (touchpads) deltas
    deltaY = delta;

    // Gecko
    if ( orgEvent.axis !== undefined && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
        deltaY = 0;
        deltaX = -1*delta;
    }

    // Webkit
    if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY/120; }
    if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = -1*orgEvent.wheelDeltaX/120; }

    // Add event and delta to the front of the arguments
    args.unshift(event, delta, deltaX, deltaY);

    return $.event.handle.apply(this, args);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T07:57:23.087

或者您可以尝试：

> $.事件。**调度**.call(obj, event);

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-28T01:11:18.490

我在寻找 Infinite Scroll 的解决方案时发现了这个主题，该解决方案不适用于 jQuery 1.9.* 并导致与原始帖子相同的错误。

JQNinja 的评论提供了一个合适的解决方案：将插件中的单个实例更改为`$.event.handle.apply`修复无限滚动。`$.event.dispatch.apply`我假设它也会解决原始海报的问题。

我知道修改插件并不理想，但是由于在撰写本文时不再对其进行维护，因此我可能不必担心更新——假设如果恢复维护，这个问题将是固定为好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T07:53:20.490

我在这里找到了解决方案，我对其进行了测试，它工作正常
[在 jQuery 中获取鼠标滚轮事件？](https://stackoverflow.com/questions/8189840/get-mouse-wheel-events-in-jquery/15629039#15629039)

```
$(document).ready(function(){
    $('#foo').bind('mousewheel', function(e){
        if(e.originalEvent.wheelDelta /120 > 0) {
            $(this).text('scrolling up !');
        }
        else{
           $(this).text('scrolling down !');
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T07:52:01.373

正如您将[在此处](http://bugs.jquery.com/ticket/11028)看到的，此插件不再开发。但在本次讨论结束时，您有办法解决一些问题：

在插件 js 文件的第 642 行，我有这个：

```
event.type = 'lastclick';
$.event.handle.apply(Me, [event,clicks]) 
```

我只是将这两个更改为：

```
event.type = 'lastclick';
event.isPropagationStopped = function() { return false };
$.event.handle.apply(Me, [event,clicks]) 
```

所以，我只是`isPropagationStopped`重置了它，然后它开始正常工作了！

我希望这能帮到您。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-05-14T00:21:29.017

改变这一行：

> 返回 $.event.handle.apply(this, args);

至：

> 返回**jQuery** .event.handle.apply(this, args);

# sql - oracle 将一张表的多行复制到另一张表

> ID：15653919
> 
> 赞同：3
> 
> 时间：2013-03-27T07:45:04.370
> 
> 标签：sql, oracle

表格1

```
Item  ----  Qauntity  ---- Code
123 1 ---    10       ---  123
123 2 ---    20       ---  123
123 3 ---    30       ---  123
653 3 ---    60       ---  345
653 2 ---    30       ---  345
653 4 ---    20       ---  345
967 3 ---    10       ---  967
967 2 ---    20       ---  967
967 1 ---    30       ---  967 
```

表 2：

```
Code --   Qauntity
123  --     40
345  --     30
444  --     10
234  --     20
653  --     60 
```

我需要从表 1 中按代码分组获取 sum(Quantity)，如果代码存在则在表 2 中更新，否则插入新行。剩余的行保留在表 2 中。如何为以下场景编写 oracle plsql 查询。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:54:14.153

使用[MERGE](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_9016.htm)你可以做到这一点

```
merge into table2 t2 using (select code, quantity from table1) t1 on (t2.code = t1.code)
when not matched then insert (code,quantity) values (t1.code,t1.qty)
when matched then update set quantity = quantity+t1.quantity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:58:40.110

您可以使用`merge`“更新”一行（更新或插入）。合并源可以是一个子查询，您可以在其中`group by Code`计算数量的总和：

```
merge   into Table2 t2 
using   (
        select  Code
        ,       sum(Quantity) as SumQuantity
        from    Table1
        group by
                Code
        ) t1
on      (t1.Code = t2.Code)
when    not matched then 
        insert  (Code, Quantity) 
        values  (t1.Code, t1.SumQuantity)
when    matched then 
        update  set Quantity = t1.SumQuantity; 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!4/537cc/1/0)

# c# - 获取当前文件夹路径

> ID：15653921
> 
> 赞同：291
> 
> 时间：2013-03-27T07:45:18.200
> 
> 标签：c#, .net, winforms, path

我想创建一个转换文件的程序。我希望用户能够将可执行文件放在任何目录中，并且在执行该程序时（双击 .exe），我希望该程序能够处理**当前文件夹中存在 exe 文件的所有文件**。程序如何确定它当前正在执行的路径？

我试过`System.Windows.Forms.Application.StartupPath`了，但这似乎是错误的方式。

有任何想法吗？

* * *

## 回答 #1

> 赞同：420
> 
> 时间：2013-03-27T07:47:05.550

您不应该**在**您的情况下使用`Directory.GetCurrentDirectory()`，因为当前目录可能与执行文件夹不同，尤其是当您通过快捷方式执行程序时。

最好`Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);`用于您的目的。这将返回当前正在执行的程序集所在的路径名。

*正如Soner Gönül*在他的回答中所说，虽然我建议的方法允许您区分正在执行的程序集、入口程序集或任何其他加载的程序集，

```
System.IO.Path.GetDirectoryName(Application.ExecutablePath); 
```

也可能就足够了。这将等于

```
System.IO.Path.GetDirectoryName(Assembly.GetEntryAssembly().Location); 
```

* * *

## 回答 #2

> 赞同：189
> 
> 时间：2014-05-07T09:22:19.427

```
System.AppDomain.CurrentDomain.BaseDirectory 
```

这将为您提供应用程序的运行目录。这甚至适用于 Web 应用程序。之后，您可以访问您的文件。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-09-01T19:19:32.243

我使用以下代码创建了一个简单的控制台应用程序：

```
Console.WriteLine(System.IO.Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location));
Console.WriteLine(System.AppDomain.CurrentDomain.BaseDirectory);
Console.WriteLine(System.Environment.CurrentDirectory);
Console.WriteLine(System.IO.Directory.GetCurrentDirectory());
Console.WriteLine(Environment.CurrentDirectory); 
```

我将生成的可执行文件复制到`C:\temp2`. 然后，我在 中放置了该可执行文件的快捷方式`C:\temp3`，并运行它（一次来自 exe 本身，一次来自快捷方式）。它两次都给出了以下输出：

```
C:\temp2
C:\temp2\
C:\temp2
C:\temp2
C:\temp2 
```

虽然我确信肯定有*一些*cockamamie 理由来解释为什么有**五种不同的方法**可以做几乎完全相同的事情，但我当然不知道它是什么。然而，在大多数情况下，您似乎可以自由选择您喜欢的任何一个。

**更新：** 我修改了快捷方式属性，将“开始于：”字段更改为`C:\temp3`. 这导致以下输出：

```
C:\temp2
C:\temp2\
C:\temp3
C:\temp3
C:\temp3 
```

...这至少证明了不同方法之间的*一些*区别。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-03-27T07:47:44.233

尝试这个：

[`System.Environment.CurrentDirectory`](https://msdn.microsoft.com/en-us/library/system.environment.currentdirectory(v=vs.110).aspx)

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-03-27T07:48:23.740

```
string appPath = System.IO.Path.GetDirectoryName(Application.ExecutablePath); 
```

从[`Path.GetDirectoryName`](http://msdn.microsoft.com/en-us/library/system.io.path.getdirectoryname.aspx)

> 返回指定路径字符串的目录信息。

从[`Application.ExecutablePath`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.executablepath.aspx)

> 获取启动应用程序的可执行文件的路径，包括可执行文件名称。

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2013-03-27T07:47:32.880

用这个，

```
var currentDirectory = System.IO.Directory.GetCurrentDirectory(); 
```

您也可以使用它。

```
var currentDirectory = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location); 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2018-11-17T20:32:48.613

对于**.NET CORE**使用`System.AppContext.BaseDirectory`

（作为替代品`AppDomain.CurrentDomain.BaseDirectory`）

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-03-27T07:50:02.710

1.

```
Directory.GetCurrentDirectory(); 
```

2.

```
Thread.GetDomain().BaseDirectory 
```

3.

```
Environment.CurrentDirectory 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-17T12:14:47.530

这对我最有效，尤其是在使用 dotnet core 单文件发布时。 `Path.GetDirectoryName(System.Diagnostics.Process.GetCurrentProcess().MainModule.FileName)`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-04T18:43:47.427

使用[`Application.StartupPath`](https://msdn.microsoft.com/en-us/library/system.windows.forms.application.startuppath(v=vs.110).aspx)imo 获得最佳结果。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-07T10:22:58.377

此代码块以字符串类型创建应用程序目录的路径

```
string path="";
path=System.AppContext.BaseDirectory; 
```

祝你好运

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-16T21:00:21.487

如果你想要exe路径，你可以使用`System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);`

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2022-03-01T20:11:50.147

这对我有用：

```
 var currentDir = Directory.GetCurrentDirectory().Substring(0, Directory.GetCurrentDirectory().LastIndexOf("bin")); 
```

# php - 如何按点过滤行。PHP/MySQL

> ID：15653924
> 
> 赞同：1
> 
> 时间：2013-03-27T07:45:36.820
> 
> 标签：php, mysql

伙计们。我有以下脚本

```
<?php
$result = mysql_query("SELECT * FROM players") or die(mysql_error());
echo "<table class=\"table table-bordered table-hover\" border='1' cellpadding='10'>";
echo "<tr> <th>ID</th> <th>Place</th> <th>Name</th> <th>Points</th> <th></th> <th></th></tr>";

// loop through results of database query, displaying them in the table
while($row = mysql_fetch_array( $result )) {

    // echo out the contents of each row into a table
    echo "<tr>";
    echo '<td>' . $row['id'] . '</td>';
    echo '<td>' . $row['place'] . '</td>';
    echo '<td>' . $row['name'] . '</td>';
    echo '<td>' . $row['points'] . '</td>';
    echo '<td><a href="wtawomenedit.php?id=' . $row['id'] . '">Edit</a></td>';
    echo '<td><a href="deleter.php?id=' . $row['id'] . '">Delete</a></td>';
    echo "</tr>"; 
} 

// close table>
echo "</table>";
?> 
```

该脚本显示了 MySQL 表中的所有内容，但行是混合的，当我将它用于 rang 列表时，我想显示按点过滤的行。具有较高点的行排在第一位，依此类推。提前谢谢你，我什么都没做。像以前那样，所以我不知道如何使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:48:49.463

您必须将 mysql qyuery 编辑为

```
SELECT *
FROM players
ORDER BY points DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T07:49:47.543

在查询中使用[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)子句。

```
SELECT * FROM players ORDER BY points DESC 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:47:16.637

您需要按点对结果进行排序......按 desc 顺序

`$result = mysql_query("SELECT * FROM players ORDER BY points DESC")`;

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T07:47:49.630

用户`ORDER BY`在您的查询中首先获得更高的分数。

尝试这个...

```
$result = mysql_query("SELECT * FROM players ORDER BY points DESC"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T07:48:26.517

在 SQL 中有一个选项**ORDER BY**您可以在这种情况下使用它。

对于 Max 到 Min，

```
$result = mysql_query("SELECT * FROM players ORDER BY points DESC") ; 
```

对于最小值到最大值，

```
$result = mysql_query("SELECT * FROM players ORDER BY points ASC") ; 
```

# wordpress - 删除特定页面上的可视化编辑器

> ID：15653927
> 
> 赞同：2
> 
> 时间：2013-03-27T07:45:51.373
> 
> 标签：wordpress

我一直在尝试仅从特定页面中删除可视化编辑器。我设法使用此代码从*所有页面中删除了可视化编辑器*

```
add_filter( 'user_can_richedit', 'patrick_user_can_richedit');

function patrick_user_can_richedit($c) {
global $post_type;

if ('page' == $post_type)
return false;
return $c;
} 
```

有什么办法可以只从一页中删除可视化编辑器吗？我正在使用 WordPress

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T08:58:00.467

天啊...你要在多少个论坛上发布这个问题？大声笑...这与我在 .org 论坛上发布的解决方案相同...但是...

我告诉过你更好的解决方案是不要修改核心 WP 文件，而只需使用这样的插件：[在特定页面或帖子上禁用 WYSIWYG](http://wordpress.org/extend/plugins/disable-visual-editor-wysiwyg/)

这样，您就不会修补核心 WP 文件，并且当您更新 WP 时，您不会丢失所有更改……因此您不必随身携带个人更改日志。

记住规则：“当有疑问时，不要”......如果您正在考虑更改所有 php 文件，并且您不确定是否应该这样做，请不要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T01:05:13.873

这对我有用

```
// removes rich text editor for certain pages
function remove_pages_editor(){
    if(get_the_ID() === 95) {
        remove_post_type_support( 'page', 'editor' );
    } // end if
} // end remove_pages_editor
add_action( 'add_meta_boxes', 'remove_pages_editor' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T13:44:58.120

您可以使用一些插件来添加自定义字段（高级自定义字段是最好的），然后在以下代码中使用它：

```
add_filter( 'user_can_richedit', 'on_post_user_can_richedit');
function on_post_user_can_richedit($c) {
    global $post_type;
    $sw_off_visual_editor = get_field('sw_off_visual_editor');

    if(!empty($sw_off_visual_editor) && $sw_off_visual_editor[0] == 1)
        return false;
    return $c;
} 
```

我添加了自定义复选框，从 get_field('sw_off_visual_editor'); 中获取，然后对其进行测试 $sw_off_visual_editor[0] == 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-13T19:22:52.817

要仅删除 [Visual] 选项卡并强制使用 HTML/TEXT，这将起作用。您可以将其他 page_id 添加到 if 命令以定位其他页面。

```
add_filter( 'admin_footer', 'removes_editor_visual_tab', 99 );

function removes_editor_visual_tab()
{
    $post_id = $_GET['post'];
    if($post_id == 1434){
    ?>
        <style type="text/css">
        a#content-tmce, a#content-tmce:hover {
            display:none;
        }
        </style>
        <script type="text/javascript">
            jQuery(document).ready(function() {
                document.getElementById("content-tmce").onclick = 'none';
            });
        </script>
    <?php
    }
} 
```

# c - 数字末尾的“u”是什么意思？

> ID：15653933
> 
> 赞同：1
> 
> 时间：2013-03-27T07:46:17.140
> 
> 标签：c, embedded

我知道`0xFF`是十六进制。是什么`u`？

```
#define PDL_ADC_10_MODE_SINGLE 0x00000001u 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T07:47:46.907

结束数字文字时，表示该数字是`unsigned`

# character-encoding - URL值编码导致404

> ID：15653934
> 
> 赞同：0
> 
> 时间：2013-03-27T07:46:32.937
> 
> 标签：character-encoding, url-encoding

我有一个带有如下选项的选择框：

```
<option value="Korea,_North">Korea, North</option> 
```

在提交页面时，MySQL 期望“Korea,_North”作为值，但是逗号在 URL 中编码为 %2C，而不是：“Korea%2C_North”，这会导致 404。

如何防止发生编码并通过 URL 传递“，”字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T12:32:38.053

`,`是一个保留的 URL 字符 - 这就是它被编码的原因。但这应该不是问题，例如 PHP（在您的个人资料中查找）会自动对其进行解码。因此，如果您正在做正常`$_POST/$_GET`的事情，那么这不是您的问题。

# iphone - 在 monotouch 中使用现有的 iphone Objective-c 代码代码（Monotouch iphone 中的 Range Slider）

> ID：15653936
> 
> 赞同：2
> 
> 时间：2013-03-27T07:46:48.190
> 
> 标签：iphone, xamarin.ios, uislider

我正在尝试为我的 monotouch iphone 应用程序创建一个范围滑块。

我搜索并找到了这个来源： [CMRangeSlider](https://github.com/cmezak/CMRangeSlider)

该代码有一个实现范围滑块的类。问题是源是客观的c，如果我想用c#重写它，我需要花费很多时间。有没有什么快速简单的方法可以重用 C# monotouch 中现有的 Objective-C 代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T09:03:19.030

这是来自 RangeSlider 的 Monotouch 项目：[https ://github.com/nicwise/RangeSliderMonoTouch](https://github.com/nicwise/RangeSliderMonoTouch)

它基于另一个项目：[http](http://buildmobile.com/wicked-ios-range-slider-part-one/) ://buildmobile.com/wicked-ios-range-slider-part-one/ 但我猜应该做同样的事情

# vb.net - 哪个有效。？在面板（或）MDI 容器内打开表单

> ID：15653937
> 
> 赞同：0
> 
> 时间：2013-03-27T07:46:59.823
> 
> 标签：vb.net, winforms, user-interface, mdi, sdi

我`application`用这个概念设计了我的`SDI`，那就是`Single Document Interface`。我的应用程序的结构解释如下，

我的应用程序主要包括两个`forms`，

*   `Login Form`
*   `Main Form`

**登录表单：**

显然，`Login Form`最初会被打开，它会要求`user credentials`，然后如果`credential`匹配，我会关闭，然后`login form`我会`main form`为用户显示。

**主要形式：**

实际上，`main form`由三个组成`panels`。第一个面板是`dockked top`，它将容纳`menus`第二个面板`dockked right`，它将容纳所有必要的按钮，例如，`save`等。第三个面板有点重要，它将容纳通过.`delete``exit``forms(Toplevel=false)``menu`

* * *

我的问题是，我的应用程序中有 100 多个表单，1.) 根据用户请求打开该面板内的所有表单是否有效。？[当用户单击右侧的退出按钮时，我会一一删除它们`close`] 2.) 实现行为是否像一个，有任何.? [因为在我的应用程序中，我只是在 a 中实现了这个概念]`forms``panel``panel``SDI``MDI``disadvantages``MDI``SDI`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:55:55.970

我实际上只是重写了一个最初是 MDI 的应用程序（实际上和你的完全一样，带有登录和主表单），但我实际上取消了它并转移到多个独立的表单。

我的看法是，SDI（或 MDI）是一个很好的包含应用程序，其中所有内容都为用户逻辑布局，并且所有内容都可以立即访问。只要您同时打开可管理数量的接口，这一切都很好。如果您需要让用户同时打开多个窗口，尤其是当它们占用大量空间时，您可能会在尝试将所有窗口显示在一个表单中时遇到麻烦。

我还发现很多用户在处理图形数据时喜欢在一个屏幕上最大化视觉表示，并在另一个屏幕上保持工具不受干扰，这对于 MDI 或 SDI 应用程序来说可能很难做到（我的原因是使用独立表单重建我的应用程序）。

当然，你必须根据具体情况来看待这个问题。您可能有数百个可以同时打开的表单，但实际上，用户一次只能监视几个，并且一次只能处理一个，因此您必须问自己不是可以打开多少个表单，而是实际上将同时打开多少个表单。然后，也许您可​​以做出一个设计决定，只允许某些接口组合，或者设计您的应用程序，以便在给定容器中的任何时候都只能加载一定数量的接口。

我不确定这是否是您正在寻找的答案，但如果对此有明确的答案，或者至少有一些具体的指导方针，那么我也有兴趣了解它们。

# c++ - QDockWidget 启动时自动隐藏

> ID：15653941
> 
> 赞同：1
> 
> 时间：2013-03-27T07:47:14.387
> 
> 标签：c++, windows, qt

我有一个 QTDesigner 对话框，其中 QDockWidget 作为主要小部件。当我将它停靠到主窗口并显示对话框时，它会自动自动隐藏，但允许我使用鼠标显示/隐藏它。我想默认保持可见。如果我使用鼠标将其调整为大尺寸，大约是屏幕尺寸的 2/3，然后关闭对话框并稍后显示它，即使我关闭最后一个大尺寸的应用程序，它也会按我的意愿工作。

这些是我的课：

```
/** created automatically by QT compiler */
class Ui_OfsIndSelAttribBase
{
    public:
        QWidget *dockWidgetContents;
        QVBoxLayout *verticalLayout_10;
        QGroupBox *_p_gB_Filters;
        QVBoxLayout *verticalLayout_9;
        QVBoxLayout *verticalLayout_4;
        ....

        void setupUi(QDockWidget *dockWidget)
        {
            if (dockWidget->objectName().isEmpty())
                dockWidget->setObjectName(QString::fromUtf8("dockWidget"));
            dockWidget->resize(352, 789);
            dockWidget->setFloating(false);
            dockWidgetContents = new QWidget();
            dockWidgetContents->setObjectName(QString::fromUtf8("dockWidgetContents"));
            ...
        }
}; 
```

我的对话类树：

```
class FCSDockableInputDataQt: public QDockWidget
{
    Q_OBJECT

    public:
        /** GetMainWindow() returns a valid QT main window */
        FCSDockableInputDataQt(Qt::DockWidgetArea do = Qt::BottomDockWidgetArea,
                               Qt::WFlags f=0) :
            QDockWidget("MyDialog", GetMainWindow(), f)
       {
           ....
       }
};

/** this is my dialog management class */
class OfsIndSelAttribQt : public FCSDockableInputDataQt, 
                          public Ui::OfsIndSelAttribBase
{
    Q_OBJECT

    OfsIndSelAttribQt() :
        FCSDockableInputDataQt(Qt::RightDockWidgetArea)
    {
        setupUi(this);
        setAllowedAreas(Qt::LeftDockWidgetArea | Qt::RightDockWidgetArea);
        setFloating(false);
        ....
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T10:08:02.027

您想在创建窗口时隐藏 QDockWidget，然后在单击某处的按钮或类似的东西时切换显示或隐藏？在 setupUi 方法中调用 QDockWidget::hide() ，然后在某处添加一个小切换按钮，该按钮在切换时向 QDockWidget 发送信号，告诉它是显示还是隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T10:11:13.853

将 QAppltion 信号 aboutToQuit() 连接到您的 dockwidget 的 SLOT 说 onQuit：

```
QObject::connect(QApplication(), SIGNAL(aboutToQuit()), this, SLOT(onQuit())); 
```

SLOT 应如下所示：

```
void CustomDock::onQuit()
{
  setVisible(false);
} 
```

所以。关闭您的应用程序时，停靠栏是隐藏的。如果您再次启动您的应用程序，QT 会将 CustomDock 状态恢复为隐藏。

# android - 是否可以将url参数传递给google play？（传递查询字符串）

> ID：15653944
> 
> 赞同：15
> 
> 时间：2013-03-27T07:47:24.110
> 
> 标签：android, mobile, google-play

在手机中安装应用程序时，是否可以将 url 参数（或“查询字符串”）传递给 google play 并跟踪变量？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-10T02:54:27.567

据此：[https ://developers.google.com/analytics/devguides/collection/android/v2/campaigns#google-play-how](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns#google-play-how)

Google Play 广告系列衡量的工作原理

Google Play 商店营销活动测量依赖于使用营销活动参数**在从 Google Play 商店下载应用程序时将营销活动和流量来源信息传递到您的应用程序中**。

以下是对 Google Play 广告活动衡量工作原理的端到端描述：

用户点击来自广告、网站或应用程序的链接，将他们带到您应用程序的 Google Play 商店页面。该链接标有活动参数。用户下载并安装您的应用后，Google Play 商店将在设备上广播 INSTALL_REFERRER Intent，其中包含相同的广告系列参数。然后，您的应用将响应该意图，使用下面提供的 BroadcastReceiver 对象，读取活动参数并使用它们来更新 Google Analytics 活动信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-28T07:04:43.230

如果您将参数路由为 Analytics SDK 中的广告系列跟踪选项的一部分，则可以在用户点击提供的链接时将自定义变量传递给已安装的应用程序。

例如，将活动名称设置为变量。

[https://developers.google.com/analytics/devguides/collection/android/v2/campaigns](https://developers.google.com/analytics/devguides/collection/android/v2/campaigns)

在我的示例中，我将其设置为用户电子邮件地址，因此当应用程序加载时，登录表单已预先填写。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-09T10:08:06.017

这可以通过使用*安装引荐来源网址来完成，并在通过**InstallReferrerReceiver*安装后在应用程序中收听：[https ://developers.google.com/android/reference/com/google/android/gms/tagmanager/InstallReferrerReceiver](https://developers.google.com/android/reference/com/google/android/gms/tagmanager/InstallReferrerReceiver)

在你的情况下，你可以简单地把你`franchiseeid`的`referrer`财产：

`https://play.google.com/store/apps/details?id=com.rovio.angrybirds&referrer=franchiseeid%3DUSAFLO012`

这有点晚了，但可能会帮助其他人。

# ios - 设置属性文本，NSRangeException 错误

> ID：15653947
> 
> 赞同：2
> 
> 时间：2013-03-27T07:47:32.410
> 
> 标签：ios, uitextview, nsattributedstring, nsrange, nsrangeexception

试图通过选择设置我的 UIText 视图的属性文本属性。几乎可以工作。用下面的红色字体颜色设置文本的操作。这有时有效，但通常会出错：

> 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“NSMutableRLEArray objectAtIndex:effectiveRange:: Out of bounds”

即使文本视图中的字符似乎多于所选范围所指示的字符，也会发生这种情况。

```
- (IBAction)setText:(id)sender {

    NSMutableAttributedString * string = [[NSMutableAttributedString alloc] initWithAttributedString:myTextView.attributedText];
    [string addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(p1,p2)];

    myTextView.attributedText = string;

} 
```

p1 和 p2 是所选文本的开始和结束。它们是使用下面的代码生成的，这似乎按预期工作：

```
- (void)textViewDidChangeSelection:(UITextView *)textView {

    UITextRange *selectedRange = [myTextView selectedTextRange];

    p1 = [myTextView offsetFromPosition:myTextView.beginningOfDocument toPosition:[selectedRange start]];
    p2 = [myTextView offsetFromPosition:myTextView.beginningOfDocument toPosition:[selectedRange end]];

 } 
```

**编辑：我在阅读@borrrden 的评论后解决了这个问题。**而不是`NSMakeRange(p1,p2)]`我使用`NSMakeRange(p1,p2-p1)]`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T01:41:55.367

你需要小心`NSMakeRange`。我之前用相同的答案回答了另一个问题，但它需要一个起始值和一个**长度**值，而不是你尝试使用它的起始值和结束值。

# iphone - 在 Iphone 中调整图像大小

> ID：15653953
> 
> 赞同：0
> 
> 时间：2013-03-27T07:47:53.577
> 
> 标签：iphone, ios, objective-c, xcode

我正在尝试调整图像大小，但它无法正常工作。我有一个图像宽度 320 和高度 480 我想将其调整为宽度 1024 和高度 1024。我正在使用此代码调整图像大小

```
- (UIImage *)resizeImageToSize:(CGSize)targetSize
{
    UIImage *sourceImage = [self saveImage:0];

    UIImage *newImage = nil;

    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;

    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;

    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;

    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO) {

        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor < heightFactor)
            scaleFactor = widthFactor;
        else
            scaleFactor = heightFactor;

        scaledWidth  = width * scaleFactor;
        scaledHeight = height * scaleFactor;

        // make image center aligned
        if (widthFactor < heightFactor)
        {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5;
        }
        else if (widthFactor > heightFactor)
        {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }

    UIGraphicsBeginImageContext(targetSize);
    CGRect thumbnailRect = CGRectZero;
    thumbnailRect.origin = thumbnailPoint;
    thumbnailRect.size.width  = scaledWidth;
    thumbnailRect.size.height = scaledHeight;

    [sourceImage drawInRect:thumbnailRect];
    newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    if(newImage == nil)
        NSLog(@"could not scale image");

    return newImage ;
} 
```

我没有得到我想要的图像大小。

这就是我将图像从 320x480 调整为 1280x1024 时得到的结果 图像大小在增加，但图像没有。我想让那辆车在白色背景上伸展![在此处输入图像描述](../Images/1385daff942a36c6fae8b5040b9a2d68.png)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:13:04.677

你想调整大小并保持纵横比试试这个....它与上面的方法非常相似：

```
- (UIImage*)imageWithImage:(UIImage*)sourceImage scaledToSizeWithSameAspectRatio:(CGSize)targetSize;
{  
    CGSize imageSize = sourceImage.size;
    CGFloat width = imageSize.width;
    CGFloat height = imageSize.height;
    CGFloat targetWidth = targetSize.width;
    CGFloat targetHeight = targetSize.height;
    CGFloat scaleFactor = 0.0;
    CGFloat scaledWidth = targetWidth;
    CGFloat scaledHeight = targetHeight;
    CGPoint thumbnailPoint = CGPointMake(0.0,0.0);

    if (CGSizeEqualToSize(imageSize, targetSize) == NO) {
        CGFloat widthFactor = targetWidth / width;
        CGFloat heightFactor = targetHeight / height;

        if (widthFactor > heightFactor) {
            scaleFactor = widthFactor; // scale to fit height
        }
        else {
            scaleFactor = heightFactor; // scale to fit width
        }

        scaledWidth  = width * scaleFactor;
        scaledHeight = height * scaleFactor;

        // center the image
        if (widthFactor > heightFactor) {
            thumbnailPoint.y = (targetHeight - scaledHeight) * 0.5; 
        }
        else if (widthFactor < heightFactor) {
            thumbnailPoint.x = (targetWidth - scaledWidth) * 0.5;
        }
    }     

    CGImageRef imageRef = [sourceImage CGImage];
    CGBitmapInfo bitmapInfo = CGImageGetBitmapInfo(imageRef);
    CGColorSpaceRef colorSpaceInfo = CGImageGetColorSpace(imageRef);

    if (bitmapInfo == kCGImageAlphaNone) {
        bitmapInfo = kCGImageAlphaNoneSkipLast;
    }

    CGContextRef bitmap;

    if (sourceImage.imageOrientation == UIImageOrientationUp || sourceImage.imageOrientation == UIImageOrientationDown) {
        bitmap = CGBitmapContextCreate(NULL, targetWidth, targetHeight, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

    } else {
        bitmap = CGBitmapContextCreate(NULL, targetHeight, targetWidth, CGImageGetBitsPerComponent(imageRef), CGImageGetBytesPerRow(imageRef), colorSpaceInfo, bitmapInfo);

    }   

    // In the right or left cases, we need to switch scaledWidth and scaledHeight,
    // and also the thumbnail point
    if (sourceImage.imageOrientation == UIImageOrientationLeft) {
        thumbnailPoint = CGPointMake(thumbnailPoint.y, thumbnailPoint.x);
        CGFloat oldScaledWidth = scaledWidth;
        scaledWidth = scaledHeight;
        scaledHeight = oldScaledWidth;

        CGContextRotateCTM (bitmap, M_PI_2); // + 90 degrees
        CGContextTranslateCTM (bitmap, 0, -targetHeight);

    } else if (sourceImage.imageOrientation == UIImageOrientationRight) {
        thumbnailPoint = CGPointMake(thumbnailPoint.y, thumbnailPoint.x);
        CGFloat oldScaledWidth = scaledWidth;
        scaledWidth = scaledHeight;
        scaledHeight = oldScaledWidth;

        CGContextRotateCTM (bitmap, -M_PI_2); // - 90 degrees
        CGContextTranslateCTM (bitmap, -targetWidth, 0);

    } else if (sourceImage.imageOrientation == UIImageOrientationUp) {
        // NOTHING
    } else if (sourceImage.imageOrientation == UIImageOrientationDown) {
        CGContextTranslateCTM (bitmap, targetWidth, targetHeight);
        CGContextRotateCTM (bitmap, -M_PI); // - 180 degrees
    }

    CGContextDrawImage(bitmap, CGRectMake(thumbnailPoint.x, thumbnailPoint.y, scaledWidth, scaledHeight), imageRef);
    CGImageRef ref = CGBitmapContextCreateImage(bitmap);
    UIImage* newImage = [UIImage imageWithCGImage:ref];

    CGContextRelease(bitmap);
    CGImageRelease(ref);

    return newImage; 
} 
```

如果您想使用它们，您可以执行以下操作：

```
UIImage* myThumbnail = ...; // Get some image
NSData* imageData = UIImagePNGRepresentation(myThumbnail); 
```

将其保存到磁盘，（例如到文档目录）：

```
// Give a name to the file
NSString* imageName = @"MyImage.png";

// Now, we have to find the documents directory so we can save it
// Note that you might want to save it elsewhere, like the cache directory,
// or something similar.
NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString* documentsDirectory = [paths objectAtIndex:0];

// Now we get the full path to the file
NSString* fullPathToFile = [documentsDirectory stringByAppendingPathComponent:imageName];

// and then we write it out
[imageData writeToFile:fullPathToFile atomically:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:31:28.793

```
if(image)
    {
        UIGraphicsBeginImageContext(CGSizeMake(newWidth, newHeight));
        [image drawInRect:CGRectMake(0, 0, newWidth, newHeight)];
         imageAfterResize = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
        ;
    } 
```

这对你来说足够了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T08:21:40.033

这很简单

```
- (void)viewDidLoad{
    self.testImageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"youImage.png"]];
    self.testImageView.frame = CGRectMake(100, 100, 320, 480);
    [self.view addSubview:self.testImageView];
}

-(void)resizeImageToSize:(CGSize)targetSize
{
    self.testImageView.fram = targetSize;
} 
```

# c++ - 树视图的数据结构

> ID：15653960
> 
> 赞同：2
> 
> 时间：2013-03-27T07:48:07.500
> 
> 标签：c++, data-structures

我想实现一个“TreeView”作为树到列表的可视映射，列表中的缩进由映射节点的深度提供。我的具体问题是一棵两层深的树，第一层有 100 000 个节点，每个节点包含 20 个节点（即 100 000 个文件夹，每个文件夹包含 20 个文件）。目前，我维护 a 中树的映射`std::map`，对于完全展开的树（“TreeView”中的 2 000 000 个潜在可见项），该映射如下所示：

```
key  value
0    pointer to parent node 0
20   pointer to parent node 1
40   pointer to parent node 2
... 
```

这意味着列表项 [0, 19] 被父节点 0 覆盖，[20, 39] 被父节点 1 覆盖，...如果我折叠节点 0，则需要更新映射：

```
key  value
0    pointer to parent node 0
1    pointer to parent node 1
21   pointer to parent node 2
... 
```

这里，列表项 0 被父节点 0 覆盖，列表项 [1, 20] 被父节点 1 覆盖，... 这意味着`std::map`折叠节点 0 时需要更新 99 000 个值的键。这意味着 99 000删除和插入到地图中，否则无法更新键。什么数据结构和/或容器可以让我更轻松地更新映射树 -> 列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T08:49:12.153

这看起来像是你可以使用增强树的东西。这将使更新这些键需要对数时间，并且按键查找也将是对数时间。

不幸的是，我现在不能在这里写一个完整的答案，因为我需要离开，但希望这篇文章会有所帮助：http: [//je4d.blogspot.co.uk/2013/01/boostintrusive-annotated-trees-part -1.html](http://je4d.blogspot.co.uk/2013/01/boostintrusive-annotated-trees-part-1.html)

# php - php mysqli ajax jquery

> ID：15653961
> 
> 赞同：-1
> 
> 时间：2013-03-27T07:48:12.143
> 
> 标签：php, forms, jquery, mysqli

我正在创建一个反馈页面，允许用户提供反馈并使用 php 和 mysqli 将此反馈存储在数据库中，而无需使用 jquery 和 ajax 刷新页面，但问题是我没有得到任何插入的数据，尽管我得到了成功如果有人可以帮助我，我将不胜感激

# 反馈表格.php

```
<?php
 session_start();
  $login = ($_SESSION['login']);
   $userid = ($_SESSION['user_id']);
   $login_user = ($_SESSION['username']);
   $fname = ($_SESSION['first_name']);
   $lname = ($_SESSION['last_name']);
   $sessionaddres =($_SESSION['address']);

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>feedback page</title>
    <script type = "text/javascript" src = "http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link href="style/stylesheet.css"rel="stylesheet" type="text/css"/>

    <script type = "text/javascript">

    $(function(){

       $('#submit').click(function(){
         $('#container').append('<img src = "images/loading.gif" alt="Currently loading" id = "loading" />');

             var comments = $('#comments').val();

             $.ajax({

                url: 'feedback_process.php',
                type: 'POST',
                data: {"comments": comments},

                success: function(result){
                     $('#response').remove();
                     $('#container').append('<p id = "response">' + result + '</p>');
                     $('#loading').fadeOut(500, function(){
                         $(this).remove();
                     });

                }

             });         

            return false;

       });

    });

    </script>

    </head>
<?php require_once('header.php'); ?>

<body>
<form action = "feedback_form.php" method = "post">
<br />
<br />

  <div id = "container">
            <h2><?php echo $login_user ?></h2>

          <label for = "comments">Comments</label>
          <textarea rows = "5"cols = "35" name = "comments" id = "comments"></textarea>
          <br />
  </div>
   </form>
       <input type = "submit" name = "submit" id = "submit" value = "send feedBack" />

<?php require_once('footer.php'); ?>

</body>
</html> 
```

# 反馈过程.php

```
<?php

session_start();
if($_SESSION['login'] != 'true'){
        header("location:index.php");
    }

   $login = ($_SESSION['login']);
   $userid = ($_SESSION['user_id']);
   $login_user = ($_SESSION['username']);
   $fname = ($_SESSION['first_name']);
   $lname = ($_SESSION['last_name']);
   $sessionaddres =($_SESSION['address']);

$conn = new mysqli('localhost', 'root', 'root', 'lam_el_chamel_db');

  echo"<pre>";
  print_r($_POST);
  echo"</pre>";

  if(isset($_POST['comments'])){

  $comments = $_POST['comments'];

  $query = "INSERT into feedback (feedback_text, user_name,) VALUES(?,?)";

  $stmt = $conn->stmt_init();
  var_dump($stmt);

  if($stmt->prepare($query))
  {

     $stmt->bind_param('ss', $comments, $login_user);
     $stmt->execute();

  }
  $query2 = "UPDATE feedback SET feedback_text = ?, user_name = ? WHERE user_name = ? ";

  $stmt = $conn->stmt_init();
  if($stmt->prepare($query2))
  {
     $stmt->bind_param('sss', $comments, $login_user, $login_user);
     $stmt->execute();

  }

  if($stmt){

  echo "thank you .we will be in touch soon <br />";

  }
  else{
   echo "there was an error. try again later.";
   }  

}

else
   echo"it is a big error";
?> 
```

表字段是：feedback_id feedback_text、user_name

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:05:43.980

您的查询中有一个额外的 , 。

```
//old
$query = "INSERT into feedback (feedback_text, user_name,) VALUES(?,?)";

//new
$query = "INSERT into feedback (feedback_text, user_name) VALUES(?,?)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T08:28:28.870

您需要检查是否存在具有相同用户名的行：

```
//Check a row with same username exists 
$queryChecking = "Select COUNT(*) FROM feedback WHERE user_name = ?"; 
```

如果结果等于一，则需要更新行而不是插入新行；）

# python - 忽略 KeyError 并继续程序

> ID：15653966
> 
> 赞同：17
> 
> 时间：2013-03-27T07:48:34.743
> 
> 标签：python, dictionary, python-3.x

在 Python 3 中，我有一个编码如下的程序。它基本上接受用户的输入并根据字典（EXCHANGE_DATA）检查它并输出信息列表。

```
from shares import EXCHANGE_DATA
portfolio_str=input("Please list portfolio: ")
portfolio_str= portfolio_str.replace(' ','')
portfolio_str= portfolio_str.upper()
portfolio_list= portfolio_str.split(',')
print()
print('{:<6} {:<20} {:>8}'.format('Code', 'Name', 'Price'))
EXCHANGE_DATA = {code:(share_name,share_value) for code, share_name, share_value in EXCHANGE_DATA}
try:
     for code in portfolio_list:
              share_name, share_value = EXCHANGE_DATA[code]
              print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value))  
except KeyError:
     pass 
```

示例输入： `GPG,HNZ,DIL,FRE`

输出如下：

```
Please list portfolio: GPG,HNZ,DIL,FRE

Code  Name                   Price
GPG   Guinnesspeat            2.32
HNZ   Heartland Nz            3.85
DIL   Diligent                5.30
FRE   Freightway              6.71 
```

但如果我有这样的输入：

`AIR,HNZ,AAX,DIL,AZX`

其中术语`AAX,AZX`在字典中不存在，`(EXCHANGE_DATA)`但术语存在`AIR,HNZ,DIL`。该程序显然会抛出`KeyError`异常，但我已经用`pass`. 问题是`pass`代码执行后程序退出，我需要它继续并执行`for`循环`DIL`。我该怎么做呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-27T07:50:35.487

为什么不：

```
 for code in portfolio_list:
     try:
         share_name, share_value = EXCHANGE_DATA[code]
         print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value)   
     except KeyError:
         continue 
```

或检查 dict.get 方法：

```
 for code in portfolio_list:
     res = EXCHANGE_DATA.get(code, None)
     if res:
         print('{:<6} {:<20} {:>8.2f}'.format(code, *res) 
```

正如@RedBaron 提到的：

```
 for code in portfolio_list:
     if code in EXCHANGE_DATA:
         print('{:<6} {:<20} {:>8.2f}'.format(code, *EXCHANGE_DATA[code]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T07:51:50.713

在循环中捕获异常

```
for code in portfolio_list:
    try:
        share_name, share_value = EXCHANGE_DATA[code]
        print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value)   
    except KeyError:
        pass 
```

编辑：更pythonic的方法是测试dict是否首先包含元素

```
for code in portfolio_list:
    if code in EXCHANGE_DATA:
        share_name, share_value = EXCHANGE_DATA[code]
        print('{:<6} {:<20} {:>8.2f}'.format(code, share_name, share_value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:51:39.130

您只需将`try`/`except`块移动到 for 循环中。

# iphone - 单击隐藏显示按钮，iPhone

> ID：15653968
> 
> 赞同：0
> 
> 时间：2013-03-27T07:48:41.007
> 
> 标签：iphone, ios, ipad

我有一个小查询，与单击有关。

我有 3 个按钮，它们最初是隐藏的。在视图上单击一下，我想显示这些按钮，再次点击时，应该隐藏那些按钮。这不是双击手势，它只是一个单击手势。

像这样的东西

```
- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
    // single tap action
    NSLog(@"Single Tap"); if(first time tap) { show } else if(second time tap){ hide }

} 
```

所以它应该像，如果我点击一次，它应该显示，如果再次点击，它应该隐藏，再次点击时，它应该显示......

请建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T07:59:19.893

声明一个`static`变量来控制它是否是第一次点击，如下所示：

```
- (void)handleSingleTap:(UIGestureRecognizer *)gestureRecognizer {
    static BOOL firstTap = YES;
    // single tap action
    NSLog(@"Single Tap"); 
    if(firstTap) { 
        // show
        firstTap = NO; 
    } else { 
        // hide 
    }
} 
```

**编辑**

如果您想`hidden`在每次点击时更改属性的值，则只需使用：

```
yourButton.hidden = !yourButton.hidden; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:11:23.647

首先，如果您使用的是按钮，那么您不需要在其上实现单击手势。按钮本身提供点击事件。

当心一旦你隐藏按钮你将如何获得点击事件？搞砸了我的想法..！

# algorithm - 查找矩阵中两个坐标之间的路径

> ID：15653974
> 
> 赞同：-4
> 
> 时间：2013-03-27T07:49:13.293
> 
> 标签：algorithm

所以，我有这个问题。我有这个矩阵：

```
1 1 1 1 1 1 1 1 1 1
1 1 0 0 0 1 0 T 0 1
H 0 0 1 1 1 0 1 1 1
1 1 0 0 0 0 0 0 0 1
1 1 1 1 1 1 1 1 1 1 
```

我需要建立一条从 H 开始的路径，它的坐标为 (3.1) 到 T(2.8) 我需要：我需要一个读取矩阵 A[1..M,1..N] 的程序，它本身代表一个迷宫使用元素 [0,1] 并读取 H,T 值。值 1 被认为是一堵墙，你不能穿过它。所以我之前发布了这个问题，我需要一些语法帮助。

我在伪代码中的看法是这样的：

```
var walkingDirection = up;
var walkingDirection1 = down;
var walkingDirection2 = right;
var walkingDirection3 = left;
while (not at T)
    if (next field in walkingDirection is not 1)
        go to next field in walkingDirection
    else if
       (next field in walkingDirection1 is not 1)
        go to next field in walkingDirection1
else if
       (next field in walkingDirection2 is not 1)
        go to next field in walkingDirection2
else if
         (next field in walkingDirection3 is not 1)
        go to next field in walkingDirection3
    end if
end while 
```

请帮我一些语法

```
int myArray[5][10] = { {1 1 1 1 1 1 1 1 1 1},
                       {1 1 0 0 0 1 0 T 0 1},
                       {H 0 0 1 1 1 0 1 1 1},
                       {1 1 0 0 0 0 0 0 0 1},
                       {1 1 1 1 1 1 1 1 1 1} };
int H = myArray [3][1];
int T = myArray [2][8];

if myArray [a+1][b]==1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T08:22:47.010

不幸的是，您的算法不适用于任何类型的可解迷宫。

仔细查看您计划执行的不同阶段的逐步级别，您会发现能够验证它甚至不适用于给出的示例迷宫。

要看到这一点，最好通过示例来播放整个算法。

```
1 1 1 1 1 1 1 1 1 1
1 1 0 0 0 1 0 T 0 1
H 0 0 1 1 1 0 1 1 1
1 1 0 0 0 0 0 0 0 1
1 1 1 1 1 1 1 1 1 1 
```

从节点开始`H`：

*   首先检查`while`条件：

    我们不在节点`T`，所以循环将运行。

*   检查 walkDirection 我们看到有一个`1`，所以这个分支不能被采用。

*   对于walkingDirection1 也是如此，所以这个分支也不能被取走。

    相反，算法将进入的walkingDirection2 分支向右迈出一步。

*   由于我们已经访问了walkingDirection2 分支，因此不再检查walkingDirection3。

*   控制流到达 while 循环的末尾。

    我们必须再次检查条件：仍然不在 node `T`，所以我们必须继续。

    ……

继续以这种方式逐步播放示例，您很快就会发现问题所在。就是下图中标有的那一行`*`：

```
1 1 1 1 1 1 1 1 1 1
1 1 * 0 0 1 0 T 0 1
H 0 * 1 1 1 0 1 1 1
1 1 0 0 0 0 0 0 0 1
1 1 1 1 1 1 1 1 1 1 
```

一旦你的算法进入地牢的那个部分，它就会不断地上下走动。

*   在仍然可以向上走的时候走 walkDirection 分支。

*   在 walkDirection1 中迈出一步 walkDirection 被阻止在下一次运行中转身，因为现在 walkDirection 再次可以步行。

## ... 那么该怎么办？

虽然只测试任何可能的方向通常不是一个坏主意——事实上，除了测试并希望最好——你的算法缺少某种记忆。

为了防止它循环运行，它必须能够检测到它已经检查了该选项，或者更好地“记住”有趣的点。那些提供尚未经过测试的可能性。

虽然不是最有效的版本，但一个非常简单的想法可能是保留已检查的所有字段的列表。为已经访问过的每个字段保留记录，例如：该字段位于某某位置，而我从某某字段来到那里，您将防止一遍又一遍地犯同样的错误。

保留您能够检查的所有潜在候选人的第二份列表，因为您已经在旁边输入了一个字段，记住以下内容：当我站在某某字段上时，我看到了某某字段那个时候你应该能够继续检查最有趣的领域。

## 大纲

总结到目前为止给出的想法，该算法可以归结为两个函数：

**下一个字段（）**

* * *

从您目前看到的字段列表中取出一个字段。

如果它已经被检查过，就丢弃它，因为再次检查它没有任何价值。继续丢弃检查过的字段，直到：

*   你的清单是空的：那么迷宫没有解决方案

    你可以退出程序然后。

*   你会发现一个直到现在还没有被检查过的字段。

    在这种情况下**检查（）**它。

.

**检查字段（）**

* * *

检查您是否已经在节点`T`

*   如果是的话 - 当你刚刚设法逃离地牢时，大声唱“万岁”。

    哦，是的 - 你可以在这里退出你的程序。

*   如果不

    在您的检查字段列表中输入一条新记录，记住您来自哪里。

    检查所有相邻字段是否可以到达并且是否已经检查过。

    *   如果它们可以访问但尚未检查，请务必将它们添加到到目前为止看到的有趣字段列表中，记住您从哪个字段看到它们。

        现在继续**next_field()**

.

这样，一旦程序启动，您唯一要做的就是**检查 ()**字段`H`并等待结果。

## ... 也可以看看

为了获得更高的赌注，您可能需要查看以下任何材料：

*   [http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)
*   [http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)
*   [http://en.wikipedia.org/wiki/A](http://en.wikipedia.org/wiki/A) *_search_algorithm
*   [http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)
*   [http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm](http://en.wikipedia.org/wiki/Bellman%E2%80%93Ford_algorithm)

# wordpress - Nextgen 画廊的 Wordpress 正文类

> ID：15653976
> 
> 赞同：0
> 
> 时间：2013-03-27T07:49:22.667
> 
> 标签：wordpress, nextgen-gallery

设计需要根据 Ngg 画廊视图或相册视图更改身体背景。显示画廊时如何添加正文类“画廊”？我正在使用通过简码添加到页面的一张大专辑，里面有很多画廊。此页面有一个特殊的 page_template。我还在模板文件夹中为画廊视图和相册视图创建了自己的模板。唯一剩下的就是以某种方式添加身体类。

upd：我在 body 标记中使用 body_class()，显示任何画廊时需要添加额外的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T07:57:31.010

通过转到您的 single.php 或 page.php 并更改将画廊作为页面标题添加到您的页面标题

```
<body> 
```

进入

```
<body class="<?php the_title)(); ?>"> 
```

无论如何，当您使用它时，您可以通过带有页面标题的 CSS 对其进行样式设置

# c# - System32 中 dll 的访问权限

> ID：15653978
> 
> 赞同：0
> 
> 时间：2013-03-27T07:49:30.513
> 
> 标签：c#, dll, system32

我正在使用[EZtwain](http://www.eztwain.com/)将文档扫描到目录中。

EZTwain 应用程序预先将一个 dll 安装到用户的 system32 文件夹中。

现在该应用程序正在我自己的个人计算机上运行，​​但是当该应用程序在具有权限限制的用户计算机上运行时，该应用程序不会扫描图像。

我认为用户拥有限制他们访问 dll 的权利。有没有另一种方法来解决这个问题，而不给用户在他或她的电脑上的完全管理员访问权限来访问 System32 中的 dll？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:46:54.287

阅读下面的链接，如果可以，则创建批处理文件并使用它

[http://www.softtreetech.com/24x7/archive/53.htm](http://www.softtreetech.com/24x7/archive/53.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:56:23.007

尝试将 DLL 放置到用户可访问的路径并注册它。

# actionscript-3 - 如何启动 notepad++ 以在空中打开文本文件？

> ID：15653979
> 
> 赞同：1
> 
> 时间：2013-03-27T07:49:33.790
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder, flexbuilder

我开发了一个 AIR 应用程序。我希望当我按下打开按钮时，它会使用我指定为 ("C:\Program Files\Notepad++\notepad++.exe") 或我提供的任何其他应用程序的 notepad++ 打开文本文件。我也可以为应用程序指定命令行参数吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T12:52:35.163

```
if(NativeProcess.isSupported)
        {
          var npsi:NativeProcessStartupInfo = new NativeProcessStartupInfo();
          var file:File = new File("Appication to launch");
          npsi.executable = file;

          var args:Vector.<String> = new Vector.<String>();
          args[0] = "File that is being open with application";

          args[1] = "Additonal argument if any";

          npsi.arguments = args;
          var process:NativeProcess = new NativeProcess();
          process.start(npsi);          
        } 
```

我就是这样做的。可能是帮助别人。谢谢

# java - AS400 DB 连接出错，下一次调用时未删除结果集数据

> ID：15653982
> 
> 赞同：1
> 
> 时间：2013-03-27T07:49:35.190
> 
> 标签：java, websphere, messagebroker

我正在尝试`AS400 DB`从 Java 计算节点连接到一个但出现错误。你能给些建议么。

我的测试场景是：

1.  我的代理流程每 9 秒触发一次，以在其中运行选择和删除行`AS400 DB`

2.  连接到`AS400 DB`使用`JDBC_TransactionType.MB_TRANSACTION_AUTO`.

    try { //获取到 AS400 服务器的连接 if (conn == null) try { conn = getJDBCType4Connection("AS400db",JDBC_TransactionType.MB_TRANSACTION_AUTO); strSelectStoredProcName = (String)getUserDefinedAttribute("SelectStoredProcName"); 结果 = 新 CDBItaly_CoreSelectCustomerDetails().retrievePPWICustomerDetails(conn, strSelectStoredProcName);

    ```
     } catch (SQLException e) {
            //store any error code and description in the environment tree.
            mbElement.createElementAsFirstChild(MbElement.TYPE_NAME_VALUE, "ErrorCode", CDBItalyErrorCodes.CDB_ITALY_0001.toString());
            mbElement.createElementAsFirstChild(MbElement.TYPE_NAME_VALUE, "ErrorDesc", CDBItalyErrorCodes.CDB_ITALY_0001.getErrorDescription());
            catchTerminal.propagate(assembly);
        } 
    ```

    } 捕捉（异常 e）{}

3.  一次从 ResultSet 中获取行并获得正确的结果 - OK

4.  使用 rs.DeleterOW 从表中删除所有行，这意味着 ResultSet 下次不应该返回任何内容。

5.  再次尝试获取（现在它应该返回 0 行）。但它返回与步骤 2 中完全相同的行，即使数据库表为空。

6.  如果我重新启动代理流程，它会再次正常工作。

现在，如果我将代码更改如下：

```
try {
    //get connection to the AS400 server            
    if (conn == null) {
        conn = getJDBCType4Connection("AS400db",JDBC_TransactionType.MB_TRANSACTION_AUTO);
    }

    try { 
        strSelectStoredProcName = (String)getUserDefinedAttribute("SelectStoredProcName");
        result =  new  CDBItaly_CoreSelectCustomerDetails().retrievePPWICustomerDetails(conn, strSelectStoredProcName);

    } catch (SQLException e) {
        //store any error code and description in the environment tree.
        mbElement.createElementAsFirstChild(MbElement.TYPE_NAME_VALUE, "ErrorCode", CDBItalyErrorCodes.CDB_ITALY_0001.toString());
        mbElement.createElementAsFirstChild(MbElement.TYPE_NAME_VALUE, "ErrorDesc", CDBItalyErrorCodes.CDB_ITALY_0001.getErrorDescription());
        catchTerminal.propagate(assembly);
} catch(Exception e){} 
```

我收到一个错误：`java.sql.SQLException`连接不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T11:07:42.553

好的，所以在第一个示例中，因为您没有任何花括号，所以如果 conn == null 则执行整个 try 块。

这意味着如果您在查询本身未执行之前有一个连接，并且结果变量将指向它在执行任何代码之前所做的任何事情。

在第二个示例中，我们可以看到 conn 查询正在执行，因为当您尝试使用连接时出现异常。我怀疑在这种情况下 conn 不等于 null 并且您在输入此代码时已经引用了连接。

所以我的猜测是，您设法缓存了对关闭的连接的引用，因此是 SQLException 文本。我会尝试完全删除 if(conn == null) 条件并始终尝试获取连接。无论如何，Broker 都会为您管理和缓存这些连接。

# playframework - 添加安全社交 2.0.12 依赖项时出错

> ID：15653996
> 
> 赞同：-3
> 
> 时间：2013-03-27T07:50:36.083
> 
> 标签：playframework, playframework-2.0, securesocial

我正在尝试在播放框架中添加 SecureSocial 2.0.12 依赖项，但是当我编译它时

获得解决异常：未解决的依赖：securesocial #secure social_2.10;2.0.12:not

成立...

我正在使用播放 2.0.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T14:15:04.017

[http://securesocial.ws/guide/installation.html](http://securesocial.ws/guide/installation.html)中概述的过程对我来说很好。但是， Scala 2.10没有发布的*securesocial版本。*您说您正在使用基于 Scala 2.9 的 Play 2.0.4，但您正在尝试解析 2.10 版本的*securesocial*。你*真的*在使用 2.0.4 吗？

**编辑（2013 年 5 月 3 日）**：*securesocial*似乎现在可用于 Scala 2.10，版本`master-SNAPSHOT`或`2.1-RC4`. 见[http://repo.scala-sbt.org/scalasbt/webapp/search/artifact?1&q=securesocial](http://repo.scala-sbt.org/scalasbt/webapp/search/artifact?1&q=securesocial)

# android - 如何模仿 ListView 的反馈

> ID：15653998
> 
> 赞同：0
> 
> 时间：2013-03-27T07:50:40.257
> 
> 标签：android

有没有一种简单的方法（属性？）来模仿`ListView`项目在任何其他视图上的触摸反馈，例如`LinearLayout`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:43:46.930

使用[android:listSelector](http://developer.android.com/reference/android/widget/AbsListView.html#attr_android%3alistSelector)：

```
android:listSelector="@drawable/list_sel" 
```

在您的可绘制文件夹中，放入 list_sel：

**list_sel.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
  <item android:state_enabled="false" android:state_focused="true"
        android:drawable="@drawable/list_bg" />
  <item android:state_pressed="true"
        android:drawable="@drawable/list_bg_sel" />
  <item android:state_focused="true"
        android:drawable="@drawable/list_bg_sel" />
</selector> 
```

**list_bg**

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

  <gradient 
        android:startColor="#77000000"
        android:centerColor="#88000000"
        android:endColor="#99000000"
        android:angle="270"/>
</shape> 
```

就我而言，`list_bg_sel`是一个图像，但您也可以使用形状创建。

# actionscript-3 - 沿着你的手指画一条线

> ID：15653999
> 
> 赞同：0
> 
> 时间：2013-03-27T07:50:43.507
> 
> 标签：actionscript-3, touch-event, starling-framework

我正在创建一个游戏，我正在尝试画一条跟随我手指的线。我为此使用了starling graphics axtension，效果非常好，您可以在下面看到我是如何做到的。

```
if (begin) {
    _startPoint = new Point(begin.globalX, begin.globalY);
    _line.graphics.lineStyle(1, 0xffffff, 1);
    addChild(_line);
} else if (moved) {
    var width:Number = MathUtils.DistanceBetweetnTwoPoints(_startPoint.x, _startPoint.y, moved.globalX, moved.globalY);
    _currentPoint = new Point(moved.globalX, moved.globalY);
    _line.graphics.clear();
    _line.graphics.moveTo(_startPoint.x, _startPoint.y);
    _line.graphics.lineTo(_currentPoint.x, _currentPoint.y);
} else if (end) {
    _line.graphics.clear();
    _endPoint = new Point(end.globalX, end.globalY);
    addBlock(_startPoint, _endPoint);
} 
```

所以我想做的是以下。Atm 时刻它只是跟随我的手指（从起点到当前点画一条线。但我想输入最大宽度。假设是 50。如果它越过 50 的长度，它应该只跟随我的手指旋转。所以没有得到不再是了，但它确实会跟踪我手指的方向并朝它旋转。

最后一件事（虽然我不确定是否可能）是让线从绿色变为红色，越接近它的最大长度（所以整条线是绿色的，但它变成红色越接近 50 )

我不知道如何实现这一目标，如果有人能指出我正确的方向，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:10:53.233

如果积分足够，那么：

1.  您计算立场点和接触点之间的距离。如果低于您的阈值，请画出整条线。
2.  如果没有，您计算所需长度与立场点和接触点之间的 X 和 Y 增量之间的比例，您将收到一个中间点，该中间点将是您绘制的线的终点。
3.  要选择颜色，请在绿色和红色之间使用 HSV 或 RGB 插值。一个愚蠢的例子`uint(255*lineLength/50)*0x10000+uint(255*(1.0-lineLength/50))*0x100`会持续一段时间。`lineLength`这里的范围从 0 到 50.0。

在你计算完所有这些之后，你就可以像以前一样画一条线了。

还有一个挑剔：“宽度”线被命名为“厚度”，在您的示例中为 1（`lineStyle`与颜色一起设置）。