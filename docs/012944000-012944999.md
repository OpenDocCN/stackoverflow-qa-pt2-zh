# StackOverflow 问答 12944000-12944999

# c++ - 按值类成员捕获

> ID：12944002
> 
> 赞同：30
> 
> 时间：2012-10-17T21:52:00.133
> 
> 标签：c++, lambda, c++11, closures

在成员函数中编写 lambda 函数时，有没有办法按值捕获封闭类的字段？默认的 catch-all`=`不起作用，因为当我在 lambda 中引用变量时，我会从捕获的 this 指针中解引用，并在捕获列表中显式命名变量，因为我得到两个编译错误：`capture of non-variable <name>`和`‘this’ was not captured for this lambda function`

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-17T22:16:51.900

不，不能按值捕获数据成员。一个 lambda 只能捕获两种东西：

1.  `this`指针，和
2.  非静态局部变量（即具有自动存储持续时间的变量）。

正如 ildjarn 在评论中所指出的，您可以使用数据成员的值的副本创建一个局部变量，并按值捕获该局部变量。

我会争辩说，*如果*允许对数据成员进行显式按值捕获，这可能会令人困惑，因为显式捕获的行为与隐式捕获的行为不同。例如，给定一个`int`名为的可访问数据成员`m`，以下会产生不同的结果会很奇怪：

```
[=] () mutable { m = 1; } // we modify this->m
[=m]() mutable { m = 1; } // we modify the copy of m that was captured 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-03T21:44:11.850

是的，只需编写`[<new name>=<your class field>]`构造。例如：

```
class MyClass {
    int a;
    void foo() {
        auto my_lambda = [a_by_val=a] {
            // do something with a_by_val
        }

        my_lambda();
    }
} 
```

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-10-17T22:22:16.840

C++ 是一种速度语言，语言设计中最重要的事情之一就是性能。如果标准设计人员想要实现一种通过值捕获类的所有变量的方法，请考虑一个非常大的类，然后说你想按值捕获它们吗？甚至要捕获在函数（包括）中声明的所有变量，`this`也有两种方法：

*   按值：在函数中定义的变量，保留在堆栈中，因此它们不能是多兆字节，但使用堆的类`vector`仍然可能很大。所以要小心使用它！

*   通过引用：实际上保存堆栈指针。

因此，您会看到没有有效的方法来捕获具有值的类的所有变量，但是您可以在函数中制作该类的本地副本，然后通过引用捕获它！

# c - 我在 C 中的函数从标准输入读取并解析数据以存储在结构的成员中。每次调用它时如何读取输入的下一部分？

> ID：12944017
> 
> 赞同：0
> 
> 时间：2012-10-17T21:53:05.813
> 
> 标签：c, pointers, struct, stdin, fgets

该结构在头文件**instance.h**中定义，如下所示：

```
typedef struct instance{
    char *a;
    char *b;
    int c
} Instance; 
```

我有一个函数： 文件 instance.c 中的**实例 *get_instance(FILE *fd)** 从标准输入读取数据并将其解析为结构实例中的成员 a、b 和 c。

我用：

```
while (fgets(buffer, sizeof(buffer)-1, fd) != NULL && (nlines != 4)) 
```

从标准输入读取 4 行并将其解析为 char 数组和一个 int。

来自 stdin 的输入具有以下格式：

```
instance1 info
instance1 info
instance1 info
instance1 info
instance2 info
instance2 info
instance2 info
instance2 info
... and so on 
```

这就是为什么我只读了 4 行来进行解析。

我在 main.c 中调用这个函数：

```
Instance *ip;
while ((ip = get_instance(stdin)) != NULL) {
// print info in ip
} 
```

我希望它打印 instance1 信息，然后是 instance2 信息，然后是 instance3 信息，依此类推……

但是，当此时再次调用 get_instance 时，它​​会重复打印出 instance1 信息。

有没有办法让 get_instance 函数“记住”它最后一次读取的位置——即第 4 行——并从第 5 行读取这次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:58:18.657

试试这个：在循环 get_instance() 之前先从标准输入获取/保存所有输入。

我的猜测（没有实际的 get_instance() 实现）问题是在 get_instance() 循环中调用 fgets() 循环。而 get_instance() 无法处理。

# javascript - 我无法在 Node.js 的 readFile() 回调中更新对象属性

> ID：12944022
> 
> 赞同：0
> 
> 时间：2012-10-17T21:53:26.357
> 
> 标签：javascript, node.js, callback

我在 Node.js 中有下一个对象：

```
function myObject(){
    this.allowed = false;
    this.rawData;
}

myObject.prototype.checkAccess = function(){

    var self = this;

    if (!this.allowed){
        fs.readFile("./file.key", function(err, data){
            if (err) return;
            self.rawData = data;
            self.allowed = true;
        })
        return;
    }

    // several operations with rawData
    // not intended to be called when file.key is read
    // but next time checkAccess is called, by example
    console.log(this.rawData);

    // or, by example, use its content to decrypt 
    // another file or data from a socket...
    var isCorrectlyDecrypted = this.decrypt(this.rawData);
    if (!isCorrectlyDecrypted) this.allowed = false;
} 
```

我定期使用 setInterval 调用 checkAccess，但我发现，现有的 file.key，我从未更新 rawData 属性，始终未定义，而允许属性更新成功。

请有人解释发生了什么并告诉我我做错了什么以及最好的方法是什么？

编辑：

因此，正如我所说，在使用此类的代码中，我有：

```
var myObjectInstance = new myObject();

setInterval(function(){

    // here some previous code

    myObjectInstance.checkAccess();

   // and here more code
}, 25) 
```

要做`checkAccess()`的是定期查找 a`file.key`以读取（如果存在），然后等到下一次调用以处理其内容。所以，`console.log()`不打算在阅读后立即使用，`file.key`而是在下一次`checkAccess()`被调用并随后调用。这就是为什么`console.log()`没有放在回调中的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:00:08.190

那是异步编程。`console.log(this.rawData)`在进程完成之前调用`fs.readFile`（因为它是一个回调函数），不给你任何输出。把`console.log()`里面的`fs.readFile`-block ，你会看到你想要的输出。

看看[异步库](https://github.com/caolan/async)。如果您在流程完成后需要响应，请使用 async-series 或 async-waterfall。

# apache-flex - Flex 树：有什么方法可以减少节点之间的垂直间距？

> ID：12944023
> 
> 赞同：0
> 
> 时间：2012-10-17T21:53:33.513
> 
> 标签：apache-flex, flex3, flash-builder, flex4.6

我希望树渲染每个节点之间的垂直空间较小。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T06:54:12.540

在`mx:tree`（以及在列表中），您可以减少`rowHeight`属性，即行的高度（以像素为单位）。

# javascript - D3.js - 如何防止圆圈和文本重叠

> ID：12944024
> 
> 赞同：6
> 
> 时间：2012-10-17T21:53:35.340
> 
> 标签：javascript, d3.js

对于每个 json，创建一个圆圈并随机输出 x 和 y

```
for(var d = 0; d<json.length; d++){
circlexloc[d] = ((Math.random()*2*r)-r);
circleyloc[d] = ((Math.random()*2*r)-r);
}; 
```

声明一个圆形变量，同时设置属性和动画

```
var circle = svg.selectAll("circle").data(json)

circle.enter().append('circle') 
```

动画片

```
circle.transition()
  .duration(1000)
  .attr("fill", "blue")
  .attr('opacity',0.6)
  .attr('r', 5)

  .attr("cx", function(d, i) {return circlexloc[i] })
  .attr("cy", function(d, i) {return circleyloc[i] });

circle.exit().transition().duration(1000)
  .attr('opacity',0)
  .attr("r",0)
  .remove(); 
```

将技术附加到圈子中

```
 var text = svg.selectAll('text')
text.data(json)
.enter().append("svg:text")
.style("font-size", "10px")
.text(function(d) { return d.TechName; })
.transition().duration(1000) 
.attr('opacity', 1)       
.attr("x", function (d, i) { return (circlexloc[i]+6)})
.attr("y", function (d, i) { return (circleyloc[i]+4)}); 
```

});

目前，有时它们往往会相互重叠。我怎样才能防止这种情况？建议和示例将不胜感激 - 谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T01:28:58.927

你有几个不同的选择，这取决于你到底要做什么。

一种方法是使用力导向布局，该布局对节点施加力以确保它们在达到稳定状态后不会重叠（请注意，它们在达到稳定状态时可能会重叠）。[你可以在http://bl.ocks.org/1377729](http://bl.ocks.org/1377729)看到一个例子。请注意，您可以完全自定义节点的外观并消除线条。

[我在http://jsfiddle.net/xwZjN/2/](http://jsfiddle.net/xwZjN/2/)创建了一个基于强制布局的示例。使用基于力的布局，您需要先添加节点。

```
 force
       .nodes(nodes)
       .start(); 
```

然后为每个力重新计算更新它们的位置。

```
 force.on("tick", function() {

     text.attr("x", function(d) { return d.x + 6; })
         .attr("y", function(d) { return d.y + 4; });           

     node.attr("cx", function(d) { return d.x; })
         .attr("cy", function(d) { return d.y; });
   }); 
```

另一种选择是使用类似于[http://bl.ocks.org/1628131](http://bl.ocks.org/1628131)`pack`示例的布局。这种布局会将圆圈紧紧地包装在一起，并确保它们不会重叠。

# performance - MATLAB - 帮助加快代码速度

> ID：12944026
> 
> 赞同：1
> 
> 时间：2012-10-17T21:53:57.793
> 
> 标签：performance, matlab, nested-loops, matrix-multiplication

我需要你的帮助来加快我的 MATLAB 代码。17 号线是最昂贵的部分。这是因为两个嵌套循环。我需要帮助来删除循环并将其重写为一个矩阵乘法表达式。请注意，我将 dKdx 作为一个单元格，这会导致用简单的矩阵乘法项替换嵌套循环时出现问题。有任何想法吗？下面是一个简化的代码。可能 dKdx 不需要是一个单元格？单元格背后的想法是能够存储大量大小为 [2*(nelx+1) *(nely+1),2* (nelx+1)*(nely+1)] 的矩阵。

```
 clc
    nelx = 16; nely = 8;
    dKdx = cell(2*(nelx+1)*(nely+1),1);
    Hess = zeros(nelx*nely,nelx*nely);
    U = rand(2*(nelx+1)*(nely+1),1);
    dUdx = rand(2*(nelx+1)*(nely+1),nelx*nely);

    for elx = 1:nelx
        for ely = 1:nely
            elm = nely*(elx-1)+ely;               
            dKdx{elm,1} = rand(2*(nelx+1)*(nely+1),2*(nelx+1)*(nely+1));
        end
    end

    for i = 1:nelx*nely    
        for j = i:nelx*nely
            Hess(i,j) = U'*dKdx{j,1}*dUdx(:,i);
            if i ~= j
                Hess(j,i) = Hess(i,j);
            end
        end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:41:05.887

这是获得它的一种方法：

```
 B = reshape(U'*cell2mat(dKdx'),[size(U,1) nelx*nely]);
  C = B'*dUdx;
  Hess=tril(C)+triu(C',1); 
```

在我的机器中，这段代码的运行速度比 for 循环快 6-7 倍。我想知道是否还有其他更快的方法...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T23:19:36.117

粗麻布是瓶颈可能并不奇怪。您必须计算 O(n^2) 矩阵元素，并且每个矩阵元素都在做 O(n^3) 工作，所以这是 O(n^5)，这比反转矩阵更糟糕（除非我误解了你的代码）。

话虽如此，您似乎应该能够将内部循环中的`dKdx{j,1}*dUdx(:,i)`矩阵/向量乘法替换为外部循环中的单个矩阵/矩阵乘法`dKdx{j,1}*dUdx`，然后只需在内部循环中拉出您需要的特定列（您也需要`j`先）。我现在没有时间亲自尝试这个，但也许它会对你有所帮助。

另一个想法：你确定你的矩阵中没有一些结构可以用来减少矩阵乘法的数量吗？

**更新**

在尝试实现我的想法的过程中，我想出了以下几点：

```
Hess2 = zeros(nelx*nely,nelx*nely);
for j=1:nelx*nely
    Hess2(j,:) = U'*dKdx{j,1}*dUdx;
end
Hess2 = tril(Hess2)+triu(Hess2',1); 
```

在我的机器上，这快了 25 倍，但 Nate 的机器快了 80 倍，所以他打败了我！

# list - 检查一个列表是否是另一个列表的一部分

> ID：12944034
> 
> 赞同：1
> 
> 时间：2012-10-17T21:54:12.283
> 
> 标签：list, wolfram-mathematica, segment

我想在 Mathematica 中创建一个模块，如果第一个列表 (L1) 在第二个列表 (L2) 中，则返回 true，假设 L2 的长度大于 L1 的长度。我是这样做的，问题是总是返回 False 我不知道为什么。编辑：我已经解决了一个问题：我写的是“if”而不是“If”。现在我得到一个无限循环。

```
isSegment[L1_List, L2_List] := Module[{i, j},   For[i = 1, i + Length[L1] - 1 <= Length[L2],
       For[j = 1, j <= Length[L1],
    If[L2[[i + j - 1]] != L1[[j]], Break;];
    j++;
    ];
       If[j == Length[L1] + 1,
    Return[ True];];
       i++;    ];   Return [False];   ] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:00:02.350

这可能是可用的最干净和最快的*通用*方法之一：

```
isSegment[{L1__}, L2_List] := MatchQ[L2, {___, L1, ___}]

isSegment[{3, 4, 5}, Range@10] 
```

> ```
> True 
> ```

对于所有`Real`或`Integer`值的列表，您可以调整[此处](https://stackoverflow.com/a/8367453/618728)显示的方法以获得最大速度。

* * *

用户写道：

> 谢谢，这是一个好方法，但我想要更正我的代码不要有新的，因为这是学校的练习，并且在声明中说我们必须使用 For 循环。

似乎对 的语法`Break[]`和功能存在混淆`Return`。为了更正我`Break`用`Break[]`&`Return`替换的代码`Throw`。`Catch`

```
isSegment[L1_List, L2_List] :=
 Catch @ Module[{i, j},
   For[i = 1, i + Length[L1] - 1 <= Length[L2],
    For[j = 1, j <= Length[L1], 
     If[L2[[i + j - 1]] != L1[[j]], Break[];]; j++;];
    If[j == Length[L1] + 1, Throw[True];];
    i++;]; Throw[False];
   ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:24:55.257

我通常会使用这样的东西来解决这个问题：

```
SegmentQ[l1_List, l2_List] := MemberQ[Partition[l2, Length @ l1, 1], l1] 
```

# asp.net - IIS Express 8、VS 2012 和 64 位

> ID：12944036
> 
> 赞同：1
> 
> 时间：2012-10-17T21:54:21.007
> 
> 标签：asp.net, visual-studio-2010, visual-studio, iis-express

> **可能重复：**
> [无法让 IIS Express 8 beta 以 64 位进程运行网站](https://stackoverflow.com/questions/10202047/cant-get-iis-express-8-beta-to-run-website-as-64-bit-process)

我用 IIS Express 8 配置了 VS 2012。我需要在 64 位进程下运行一个网站。当我在 Visual Studio 中将平台设置为 x64 并单击调试时，我收到一条错误消息，指出进程和 DLL 之间存在平台不匹配。看来我的 DLL 已正确编译为 x64，但在任务管理器中，我看到该进程仍然是 iisexpress *32。

VS为什么要在32bit下启动iisexpress？如何指示 VS 调试到 64 位版本的 IISExpress？

谢谢。

# java - 注入单元测试（仅限 XML）

> ID：12944040
> 
> 赞同：-1
> 
> 时间：2012-10-17T21:54:29.943
> 
> 标签：java, spring, dependency-injection, junit

想要注入一个注入了已配置数据源的 dao.. 不喜欢注释，因为它使代码难看，我想要一个纯 XML 解决方案。

测试用例位于 test 文件夹的子文件夹中，与 src 文件夹处于同一级别

```
src
   com
       name
           dao
               ProductDao
test
   com
       name
           dao
               ProductDaoTest 
```

ProductDaoTest 需要将 ProductDao 注入其中。尝试这样做，spring 注入它没问题，但是 ProductDao 依赖没有被注入，我正面临 NPE。

考虑过将测试类移动到 src 文件夹中，但我认为我不应该这样做。我正在考虑的另一种选择是通过浏览控制器调用来运行测试用例（但不再是单元测试），所以我一直在努力找出正确的做法。

谢谢你！ps测试是junit、tomcat、spring 3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:56:28.120

不，你不应该那样做。您只需要使应用程序上下文可用于测试并要求它适当地连接它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T21:59:05.623

您想对 DAO 中的哪些方法进行单元测试？您实际上不是在尝试测试数据库连接吗？

否则我同意@duffymo。

**编辑**：详细说明一下，尝试使以下代码块适应您的测试类需求：

```
final ClassPathXmlApplicationContext beanFactory = 
    new ClassPathXmlApplicationContext( "applicationContext.xml" );
AutowireCapableBeanFactory factory = beanFactory.getAutowireCapableBeanFactory();
factory.autowireBeanProperties( this, AutowireCapableBeanFactory.AUTOWIRE_BY_TYPE , true );
ProductDao dao = context.getBean( "productDao" ); 
```

看看这是否对 Dao 依赖 bean 不起作用。

干杯，

# java - Android 应用程序中带有 ArrayList 的 OutOfMemoryError

> ID：12944044
> 
> 赞同：2
> 
> 时间：2012-10-17T21:54:50.553
> 
> 标签：java, android, arraylist, while-loop, out-of-memory

在一项活动中，我编写了可以正常工作的代码。

但是现在我使用以下代码向此活动添加了一个方法：

```
 private void obtenerDatosReuniones(){

    try {

        int j=0;

        String aux = jsonReuniones.getString("nombres");

        String aux2 = null;

        aux2 = aux.replace("[", "");

        aux2= aux2.replace("]", "");

        String [] campos = aux2.split(",");

        while(j<campos.length){

            nombres_reuniones.add(campos[j]);

        } 
```

nomres_reunones 的类型是 ArrayList

当我运行应用程序时，在 nombres_reuniones.add (campos [j]) 行出现以下错误：

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T21:56:10.070

你没有推进循环：

```
while (j < campos.length) {
    nombres_reuniones.add(campos[j]);
    j++; // without this, you'll loop forever!
} 
```

正在发生的事情是您向 . 中添加了无限量的“campos”，从而`ArrayList`耗尽了您的程序在此过程中可用的所有内存。

请记住：循环的条件必须`false`在某个点才能结束循环。如果您忘记推进循环（在这种情况下，通过增加`j`变量）条件将始终存在`true`并且循环将永远不会退出，因此会创建一个无限循环。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T21:56:21.237

看看你的循环：

```
while(j<campos.length){
    nombres_reuniones.add(campos[j]);
} 
```

你如何预期会完成？你不修改`j`. 鉴于您`j`在声明它并`0`在开始时为其分配正确的值之后没有进行任何更改，它会*更*清楚：

```
for (int j = 0; j < campos.length; j++) {
    nombres_reuniones.add(campos[j]);
} 
```

或更好：

```
for (String item : campos) {
    nombres_reuniones.add(item);
} 
```

或者更简单：

```
nombres_reunions.addAll(Arrays.asList(campos)); 
```

此外，您之前的代码可以更简单。看这个：

```
String aux2 = null;
aux2 = aux.replace("[", "");
aux2= aux2.replace("]", ""); 
```

为什么要分配`aux2`一个初始值，`null`然后立即覆盖？此外，您可以轻松地链接方法调用。它会更整洁：

```
String aux2 = aux.replace("[", "").replace("]", ""); 
```

实际上，您可以将整个字符串操作从头到尾链接在一起：

```
String[] campos = jsonReuniones.getString("nombres")
                               .replace("[", "")
                               .replace("]", "")
                               .split(",");
nombres_reunions.addAll(Arrays.asList(campos)); 
```

（我会停在那里，而不是内联那个表达式......）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T21:57:23.373

您没有更新的值`j`因此`j`总是`0` 并且总是小于`campos.length`

# c++ - 调整 GLUT 窗口大小而不调整内容大小？

> ID：12944045
> 
> 赞同：2
> 
> 时间：2012-10-17T21:54:51.177
> 
> 标签：c++, opengl, resize, glut

我无法实现以下行为。我想从底部调整窗口大小，而不会使渲染的场景扭曲或改变其位置。

![在此处输入图像描述](../Images/ae7ee3b2e89295b53bfe46a0ad928a3b.png)

我正在使用 C++ OpenGL GLUT

```
void resize(int w, int h)
{
    float ratio = G_WIDTH / G_HEIGHT;
    glViewport(0, 0, (h-(w/ratio))>0? w:(int)(h*ratio), (w-(h*ratio))>0? h:(int)(w/ratio));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:00:29.603

在 GLUT resize 场景功能中，视口可能默认设置为窗口的大小。我会尝试将其更改为您想要的（固定）大小：

代替：

```
void windowReshapeFunc( GLint newWidth, GLint newHeight ) 
{
  glViewport( 0, 0, newWidth, newHeight );
  .. etc...
} 
```

做这个：

```
void windowReshapeFunc( GLint newWidth, GLint newHeight ) 
{
  glViewport( 0, 0, 400, 600 );
  .. etc...
} 
```

或者你想要的任何尺寸。窗口仍将调整大小，但这些场景将始终渲染到（现已修复）视口。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T01:26:38.517

如果您使用正交透视，请使用：

```
#include <GL/glut.h>

int x0, y0 = 0;
int ww, hh = 0;

void updateCamera()
{
  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();
  glOrtho(x0, x0+ww, y0, y0+hh, -1, 1);
  glScalef(1, -1, 1);
  glTranslatef(0, -hh, 0);
}

void reshape(int w, int h)
{
    ww = w;
    hh = h;
    glViewport(0, 0, w, h);  
    updateCamera();
}

void display(void)
{
  glClear(GL_COLOR_BUFFER_BIT);
  glBegin(GL_TRIANGLES);
    glColor3f(0.0, 0.0, 1.0); glVertex2i(0, 0);
    glColor3f(0.0, 1.0, 0.0); glVertex2i(200, 200);
    glColor3f(1.0, 0.0, 0.0); glVertex2i(20, 200);
  glEnd();
  glFlush();
  glutPostRedisplay(); 
}

int mx = 0;
int my = 0;
int dragContent = 0;

void press(int button, int state, int x, int y)
{
    mx = x;
    my = y;
    dragContent = button == GLUT_LEFT_BUTTON && state == GLUT_DOWN;
}

void move(int x, int y)
{
    if(dragContent)
    {
        x0 -= x - mx;
        y0 += y - my;
        mx = x;
        my = y;
        updateCamera();
    }
}

int main(int argc, char **argv)
{
  glutInit(&argc, argv);
  glutCreateWindow("Resize window without resizing content + drag content");
  glutDisplayFunc(display);
  glutReshapeFunc(reshape);
  glutMouseFunc(press);
  glutMotionFunc(move);
  glutMainLoop();
  return 0;
} 
```

您可以使用鼠标左键拖动内容（三角形）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:00:07.773

```
ratio = wantedWidth / wantedHeight
glViewport(0, 0, 
      (height-(width/ratio))>0? width:(int)(height*ratio),
  (width-(height*ratio))>0? height:(int)(width/ratio); 
```

会这样做，它保持窗口的高度/宽度之间的比率始终相同，同时还尝试使用可用窗口的最大尺寸。

编辑：把它放在总是左上角。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-01T06:09:10.843

这是我找到的解决方案，我认为效果很好。

我按如下方式编写了我的 reshape 方法，该`glutReshapeFunc(reshape)`方法在我的 main 方法中注册：

```
void reshape(int width, int height) {
    glViewport(0, 0, width, height);
    aspect = ((double) width) / height; 
```

每当我重绘场景时，我都会使用这个调用来设置相机：

```
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(45.0, aspect, 1.0, 100.0); // 45 degrees fovY, correct aspect ratio
// then remember to switch back to GL_MODELVIEW and call glLoadIdentity 
```

这让我可以将窗口视为进入我的场景的窗口，而无需缩放或移动场景。我希望这就是你要找的！

# jquery-ui - 稳定版 v1.9.0 与旧版 1.8.24 中的 jQuery UI 可调整大小的句柄

> ID：12944046
> 
> 赞同：1
> 
> 时间：2012-10-17T21:54:53.643
> 
> 标签：jquery-ui, resizable

这*可能是*[JQuery UI 中 Custom Resizable Handles](https://stackoverflow.com/questions/958419/custom-resizable-handles-in-jquery-ui)的重复，但该帖子谈到句柄*不是*可调整大小元素的子元素，并且没有指定 jQuery UI 的哪个*版本*。

[API](http://api.jqueryui.com/resizable/#option-handles)声明自定义句柄可以定义如下：

> 支持以下键：{ n, e, s, w, ne, se, sw, nw }。任何指定的值都应该是一个 jQuery 选择器，它与可调整大小的子元素匹配以用作该句柄。

在我的代码中，句柄*是*resizable元素的子元素，jQuery如下：

```
$("#searchbar_container").resizable({ 
    handles: {w: '#searchbar_handle_top'},
    maxWidth: 445,
    minWidth: 20,
    start: function(event, ui) {},
    stop: function(event, ui) { 
        $("#searchbar_container").css('height', '');
    } 
}); 
```

我可以让它与旧版本的 jQuery UI (1.8.24) 一起使用：[link](http://www.pinksy.co.uk/resizable/resizable1.html) ...但不能与 jQuery UI (1.9.0) 的“稳定”版本和完全相同的代码一起使用：[link](http://www.pinksy.co.uk/resizable/resizable2.html)。两个页面都使用相同版本的 jQuery 核心 (1.8.2)。

jQuery UI 的稳定版本会产生以下控制台错误：

> 未捕获的错误：语法错误，无法识别的表达式：，jquery-1.8.2.min.js:2

有人认为我做错了吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:24:08.910

我在 jquery 1.9.0 中遇到了同样的问题，使用 args 调整大小似乎在新版本中被破坏了。恢复到旧版本，直到它被修复。

# html - 忽略透明图像

> ID：12944048
> 
> 赞同：-1
> 
> 时间：2012-10-17T21:55:12.393
> 
> 标签：html, css

我需要制作一个透明的图像，通过所有网页内容被其他功能（如导航栏）忽略。

```
<div id="birds">
<img src="birds.png" class="cover">
</div>
#birds{
position: relative;
}

#birds img.cover{
position: absolute;
float:right;
margin-left: 4.8%;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:19:03.210

我不太确定你在追求什么，但如果我猜测一下，那就是`pointer-events: none;`

不幸的是，目前这在 Internet Explorer 或 Opera 中不起作用。

# git - 为什么 github 尝试将我 ssh 到另一个帐户？

> ID：12944050
> 
> 赞同：0
> 
> 时间：2012-10-17T21:55:26.030
> 
> 标签：git, github, ssh

我正在尝试 ssh 进入 github。我在计算机上的 .ssh 目录中生成了一个 ssh 密钥。然后我将该密钥添加到 github 的 ssh 密钥部分。但是当我输入 ssh -T git@github.com 时，它成功地使用我的 .ssh 文件夹中不再拥有的旧 ssh 密钥对不同的 github 帐户进行身份验证。我不明白它是怎么做到的。它确实说代理承认在成功 ssh 进入错误的 github 帐户之前未能使用密钥进行签名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T01:39:35.887

`ssh-add`在尝试 ssh 进入之前运行已解决此问题。

# windows-8 - Windows 8 上的媒体流

> ID：12944053
> 
> 赞同：1
> 
> 时间：2012-10-17T21:55:59.520
> 
> 标签：windows-8, streaming, media

我正在编写一个 Win8 应用程序，它使用存储在 Azure/Web 服务器中的媒体。我想将媒体下载安全地提供给经过身份验证的 Windows 8 应用程序和/或流式传输的人。这种场景的架构可能是什么？

什么更好 - 流式传输或安全下载。

Windows 8 支持什么？

另外，我想避免 Windows Media Services Streaming，因为我没有那个基础设施。

谢谢， 巴维克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:35:22.460

看看[Windows 8 的播放器框架](http://playerframework.codeplex.com)

Microsoft 媒体平台的播放器框架是一种开源视频播放器，我们将继续开发和发展。它适用于 Silverlight、HTML5、Windows Phone、Xbox，现在，在我们的最新版本中，适用于 Windows 8 应用程序。而且它是完全开源的！

播放器框架支持一长串高级功能，包括： 通过 IIS 的自适应流和高级播放启发法 Windows 8 的平滑流客户端 SDK 通过 SMPTE-TT 和 TTML 支持隐藏式字幕 广告标准支持，包括 VAST、MAST 和 VPAID 高级 DVR-样式播放 强大的蒙皮和样式 许多其他强大的功能

# java - Java中处理复杂配置的最佳方法

> ID：12944055
> 
> 赞同：2
> 
> 时间：2012-10-17T21:56:15.330
> 
> 标签：java, json, configuration, properties, maintenance

所以我在 Java 中为[Accumulo构建各种索引和摄取类](http://accumulo.apache.org)

但我的问题没有直接关系。

我有一个属性文件，存储一个长列表（假设有两打并且还在增长）关键字和数据库表名。

现在，当我的主类被实例化时，我将所有这些属性读入它们相关的 String 对象并在整个过程中使用它们。然而，其中一些项目需要传递给其他类，有时是大块传递。

我想我的选择是

1.  像现在这样继续前进，这似乎很糟糕，因为如果我以错误的顺序提交令牌，可能会发生各种讨厌的事情。
2.  传递属性对象本身，让每个类处理实例化自己的字符串对象（如果在文件中添加或删除标记，将来维护起来很容易）。
3.  将信息存储在一个 JSON 文件中，该文件作为一个特殊的类对象被读入，该对象被传递给需要从中提取一些信息的任何人（小缺点是每个类都根据需要从表名创建表引用，在使用 JSON 的情况下，继续实例化所有表引用可能是有意义的，这样类就可以请求引用，但是在不需要时会经常创建一些额外的引用。）
4.  其他一些选择 Java 专家知道我不知道

我对此感到担忧，因为过去我主要是嵌入式和小型系统的 C++ 开发人员。这是我的第一个大型项目之一，所以我试图从一开始就做事。我已经有一堆书，包括设计模式，只是为了让我的脚湿透，但是任何一般的编程实践知识库我都会很乐意接受建议。

我试图将其概括化，以便其他人受益，但可能需要更多细节，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:24:46.883

[Commons Configuration](http://commons.apache.org/proper/commons-configuration//index.html)有几个功能可以帮助您组织

*   独立于源的配置数据（属性文件、XML 文件、数据库……）
*   分层属性
*   声明和创建 bean

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:45:14.073

选项（2）似乎是一个好方法。

一种变体是将所有字符串从主 Properties 对象提取到单独的 Properties（或 HashMap）对象中，可能基于元素名称的前缀。因此，类`Foo`获取所有名称前缀为 的属性`foo.`，类`Bar`获取所有`bar.xxx`属性，依此类推。

这将属性保存在逻辑上（和物理上）单独的集合中，并为给定的类提供它需要的那些属性。如果所有类都需要共享公共属性（可能带有`all.`or`global.`前缀，或者根本没有前缀），则可以将这些属性添加到每个单独的 Properties 对象中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T15:41:18.710

您的复杂程度要求您直接处理 java.util.Properties 文件。

它是一个简单的对象，它应该根据您的需要进行缩放。我不建议将您的属性映射到 Java 对象，因为您最终会不断更改映射文件；您需要只有 java.util.Map 才能提供的全部灵活性。

顺便说一句，您需要这个的事实听起来不正确。可能存在需要在您的应用程序中重新考虑的全局设计问题。

此外，json 解决方案可能很好，因为在分层树中构建属性可能有助于降低配置文件的复杂性，但我会再次避免将 json 对象映射到 Java 对象，因为您的模型经常更改（据我所理解）。

您可能会尝试在配置属性之间找到“模式”并尝试提取一些组织。一旦您猜到了配置中构建的一些好的“业务对象”，您就可以将配置简化为这些对象的数组。

JSON 听起来很适合我。你的问题可以看作是“复杂配置”的原型，这种情况并不少见（想想maven中的pom.xml）。所以我认为你需要两件事：

1.  在您的配置中提取一些组织
2.  使用一些结构化的配置格式（如 JSON 或 XML）

# actionscript-3 - Flex 树：当树节点没有子节点时，使插入符号不出现

> ID：12944059
> 
> 赞同：0
> 
> 时间：2012-10-17T21:56:27.383
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.6

如果节点没有子节点，是否有任何方法可以防止在树节点之前显示“>”插入符号？当孩子是空的 ArrayCollection 时，我希望它不显示。我知道您可以将 arraycollection 设置为 null，但我宁愿避免在整个代码中执行所有 null 检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:12:42.787

像这样创建一个自定义渲染器：

```
 package com.simmone.renderers {
  import mx.collections.*;
  import mx.controls.treeClasses.*;
  import mx.controls.listClasses.ListBase;

  public class MyTreeItemRenderer extends TreeItemRenderer {
    public function MyTreeItemRenderer() {
      super();
    }

    override protected function updateDisplayList(unscaledWidth:Number,  
                                                  unscaledHeight:Number):void {
      super.updateDisplayList(unscaledWidth, unscaledHeight);

      if( data.children.length == 0 ) {
        super.disclosureIcon.visible = false;
      }
    }
  }
} 
```

xml:

```
 <fx:Script>
    <![CDATA[
      import mx.collections.ArrayCollection;

      private var dataArray:Array = [
        {label:"father1", children:
          [{label:"child1"},
           {label:"child2"}]},
        {label:"father2", children:[]}];

      [Bindable]
      private var dataList:ArrayCollection = new ArrayCollection(dataArray);
    ]]>
  </fx:Script>

 <mx:Tree id="tr1" width="100%" height="80"
          dataProvider="{dataList}"
          labelField="label"
          borderVisible="false"
          itemRenderer="com.simmone.renderers.MyTreeItemRenderer"/> 
```

我发现如果使用xmllist，没有这个问题，如果没有孩子，不会显示discloure图标。

# facebook - 权限对话框后重定向到已安装的页面选项卡

> ID：12944062
> 
> 赞同：1
> 
> 时间：2012-10-17T21:56:40.130
> 
> 标签：facebook, redirect, tabs

我想将用户重定向到他当前安装在他拥有的 Facebook 页面上的页面选项卡。为了说明这一点，我正在谈论 facebook 页面标签的安装过程。我在同一个方向上发现了几个问题，但我找不到正确的方法来做到这一点。这是安装页面选项卡的标准链接。

“https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&next=YOUR_URL”

因为我不知道用户将在哪个页面上安装选项卡，所以我无法正确设置下一个 url。这将导致我重定向到我尝试获取这些信息的某个页面。但是，我无法通过签名请求或 url 架构提取有关他使用的页面的信息。有时 url 包含已安装选项卡的页面的 id，但这似乎结束了。

“https://url/?tabs_added%5B379396442071062%5D=1# *=* ”

**编辑**：此网址包含作为数组编码的 ID，感谢@ifaour：%5B379396442071062%5D -> 379396442071062

在我看来，这是一个用于页面标签的标准用例，我无法相信实际上很难做到这一点或找到解决方案。

希望你能帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:45:30.370

我想现在的逻辑没有错。[由于您可以使用“添加页面选项卡”对话框](https://developers.facebook.com/docs/reference/dialogs/add_to_page/)一次将您的应用程序添加到多个页面，因此 Facebook 让您可以控制下一步。

Facebook 将由管理员从对话框中返回所选页面的 id，并且由于结果可能不止一个 id，因此不建议将管理员重定向到 Facebook 页面选项卡，即使可以使用以下内容：

```
https://www.facebook.com/pages/-/PAGE_ID?sk=app_APP_ID 
```

现在要考虑的一个好做法是列出成功添加应用程序的页面（并可能提供一些“演示”或“下一步”以更好地宣传您的解决方案）。

这是处理响应的快速代码：

```
<?php
if(!empty($_GET['tabs_added'])) {
    $tabs_ids =  array_keys($_GET['tabs_added']);
    $comma_separated_ids = implode(",", $tabs_ids);
    $api_call = "https://graph.facebook.com/fql?q=SELECT+page_url,pic,name+FROM+page+WHERE+page_id+IN+($comma_separated_ids)";
    $fql_query_result = file_get_contents($api_call);
    $result = json_decode($fql_query_result, true);
    if(!empty($result["data"])) {
        echo "Congratulations! You have successfully added our App to the following pages:<br />";
        foreach($result["data"] as $page) {
            echo "<img src=\"{$page['pic']}\" alt=\"{$page['name']}\" /> <a href=\"{$page['page_url']}\">{$page['name']}</a><br />";
        }
    }
} else {
    echo "It seems that you didn't add our awesome app to any of your pages. Want to <a href=\"https://www.facebook.com/dialog/pagetab?app_id=APP_ID&next=". urlencode("YOUR_URL") . "\">try again<a/>?";
} 
```

此代码将检查用户是否取消了再次鼓励他们的对话框。并检索所选页面的名称、图片和链接以列出它们。

免责声明：此代码只是一个示例，在 FQL 查询中可能无法检索私有和未发布的页面。

# php - 在 html 页面上自动输入变量

> ID：12944064
> 
> 赞同：0
> 
> 时间：2012-10-17T21:56:45.373
> 
> 标签：php, html, automation

我有一个托管视频的网站。每个视频都有自己的 .html 页面。我基本上有一个模板，我为每个视频页面重复使用。

我要做的工作是反复输入视频细节。通常，在同一页面上多次输入同一条信息，例如视频标题。

我很好奇是否有任何方法可以自动化从我的模板创建 html 页面并将各种视频详细信息输入页面的过程。

也许我有一个包含所有视频信息的数据库或表，然后通过打开我的模板，从表中复制信息，然后保存新的 .html 文件，为每个表行创建一个新页面。

感谢您对如何完成此操作或类似操作的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:09:34.430

最好的方法是创建一个 video.php 页面并通过链接传递视频 ID，如下所示：**http** ://www.YourWebsite.com/video.php?id=123 。**（您还可以使用.htaccess**格式化此 URL 的显示方式）。然后这个**video.php**文件需要查询您的 MySQL 数据库以查找标题、描述、视频文件等。这被称为“数据库驱动的网站”。

我建议查看在线可用的教程，例如： [http ://www.quackit.com/php/tutorial/php_database_driven_website.cfm](http://www.quackit.com/php/tutorial/php_database_driven_website.cfm)
[http://www.sitepoint.com/php-mysql-tutorial/](http://www.sitepoint.com/php-mysql-tutorial/)

# jquery - 从仅在悬停时显示在自动完成列表中的元素中查找 html 和 css

> ID：12944065
> 
> 赞同：0
> 
> 时间：2012-10-17T21:56:47.257
> 
> 标签：jquery, html, jquery-ui, autocomplete, firebug

我在一个新网站上工作，我是 CSS/HTML 的新手，我了解了 firebug 等，它对监视东西等非常有用。但是我遇到了一个问题，即查找自动完成上的项目发生了什么列表，问题是一旦我点击萤火虫，该项目就会消失，我看不到它是什么。

我已经搜索了几个小时，但找不到列表中发生的正确事情（是 javascript 吗？它是由 javascript 添加的新 css 类吗？我找不到！）

这是网址，因此您可以看到我的问题：已解决

在顶部栏有一个搜索字段。如果您输入一个字母，它将显示一个收到该字母的对象列表，但是如果您将鼠标悬停在该项目上，您会看到布局变得混乱（这是我要解决的问题）

任何有关我如何找出如何调试或问题可能是什么的帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:00:33.570

我之前遇到过这种情况，被迫将内联样式添加`display: block`到原本隐藏的元素中，所以我可以调试相关的 CSS。

当然，您需要在解决问题后将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:02:54.300

Firebug（或实际上任何浏览器检查器工具，除了 IE）允许您伪造各种状态（悬停、焦点、活动），在 firebug 的右上角有一个小虚线矩形，单击它会显示状态，只需检查要应用状态的元素并选中该框。您可能需要对多个项目应用悬停来调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:04:57.180

页面底部有一个 id**为 ui-id-1**的 ul 。用 Firebug 找到它并删除显示：none;。然后你输入一个字母，这样列表就会出现。现在您可以右键单击列表项进行调试。

# java - 我可以将方法参数限制为仅某些 Enum 成员吗？

> ID：12944066
> 
> 赞同：0
> 
> 时间：2012-10-17T21:57:22.310
> 
> 标签：java, interface, enums, enumset

有没有办法限制方法只采用枚举的某些成员。假设您列举了军事和入伍军衔。如果我想要一个只能获得军官级别的功能而另一个只能获得入伍级别的功能，我认为在 Java 中没有办法做到这一点，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:09:26.520

您唯一的选择是使用不同的枚举，因为将枚举作为参数的方法将在编译时采用其任何值。

IDE 有助于打字。

# jquery - jQuery Validate 无法调用未定义的方法“调用”

> ID：12944068
> 
> 赞同：8
> 
> 时间：2012-10-17T21:57:26.197
> 
> 标签：jquery, asp.net, jquery-validate

这个错误让我发疯，一切似乎都井井有条，但希望我错过了一些简单的东西。

我的 aspx 中的代码

```
 $('#myForm').validate({
            rules: {
                'ctl00$SecondaryPlaceHolder$txPayloadDate': {
                    required: true,
                    date: true
                },
                'ctl00$SecondaryPlaceHolder$ddlMapPlat': {
                    required: true
                },
                'ctl00$SecondaryPlaceHolder$txtBlock': {
                    maxLength: 3
                },
                'ctl00$SecondaryPlaceHolder$txtLeakNumber': {
                    number: true,
                    maxLength: 27
                },
                'ctl00$SecondaryPlaceHolder$txtHouseNumber': {
                    required: true,
                    maxLength: 10,
                },
                'ctl00$SecondaryPlaceHolder$txtStreet': {
                    required: true,
                    maxLength: 100
                },
                'ctl00$SecondaryPlaceHolder$txtCity': {
                    required: true,
                    maxLength: 50
                },
                'ctl00$SecondaryPlaceHolder$txtReading': {
                    isPositiveInteger: true,
                    maxLength: 100
                },
                'ctl00$SecondaryPlaceHolder$ddlInfoCodes': {
                    existsWithLowReading: true
                },
                'ctl00$SecondaryPlaceHolder$txtLocationRemarks': {
                    maxLength: 500
                },
                'txtGrade2RequestedRepairDate': {
                    date: true
                },
                'ctl00$SecondaryPlaceHolder$ddlEquipment': {
                    required: true
                }
            }
        }); 
```

自定义验证

```
$.validator.addMethod("isPositiveInteger",
    function (value, element) {
        if($.trim(value) !== '')
            return /^\d+$/.test(value);
        return true;
    },
    "Must be a valid integer."
);

$.validator.addMethod("existsWithLowReading",
    function (value, element) {
        if (parseFloat($('#SecondaryPlaceHolder_txtReading').val() <= 2) && value.length < 1) {
            return false;
        }
        return true;
    },
    "Info Code required if Reading % is less than three."
); 
```

基本上问题不在自定义验证范围内，但我还是把它们扔在这里......提交时表单验证正常，但是有一些“门牌号”和“街道”在尝试填写它们时会抛出此错误在。

例如，我提交带有空门牌号的表单，验证有效，但是当我填写输入时，在模糊时抛出此错误。

错误在 jquery.validate 中就`var rule = { method: method, parameters: rules[method] }`行了：

```
 check: function (element) {
            element = this.validationTargetFor(this.clean(element));

            var rules = $(element).rules();
            var dependencyMismatch = false;
            var val = this.elementValue(element);
            var result;

            for (var method in rules) {
                var rule = { method: method, parameters: rules[method] };
                try {

                    result = $.validator.methods[method].call(this, val, element, rule.parameters);

                    // if a method indicates that the field is optional and therefore valid,
                    // don't mark it as valid when there are no other rules
                    if (result === "dependency-mismatch") {
                        dependencyMismatch = true;
                        continue;
                    }
                    dependencyMismatch = false;

                    if (result === "pending") {
                        this.toHide = this.toHide.not(this.errorsFor(element));
                        return;
                    }

                    if (!result) {
                        this.formatAndAdd(element, rule);
                        return false;
                    }
                } catch (e) {
                    if (this.settings.debug && window.console) {
                        console.log("exception occured when checking element " + element.id + ", check the '" + rule.method + "' method", e);
                    }
                    throw e;
                }
            } 
```

在此先感谢您的任何指点

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T22:10:04.500

我的愚蠢错字是罪魁祸首

maxLength 不是驼峰式的，应该是 maxlength

虽然 equalTo 是驼峰式的......似乎不一致，但很高兴我明白了

# java - 根据先前比较变量的值进行比较？

> ID：12944072
> 
> 赞同：0
> 
> 时间：2012-10-17T21:57:55.657
> 
> 标签：java, collections

我想参加`implement Comparable`我的一堂课。

我的测试阵列：`A1, A2, A3, B1, B2, B3`

我想要这样排序：-按字母排序

-if A 然后升序数

-if B 然后递减数字

预期结果：`A1, A2, A3, B3, B2, B1`

以下代码总是会给我升序的字母和数字，例如`A1, A2, A3, B1, B2, B3.` 如何根据 Foo 的字母切换数字的顺序？

```
class Foo implements Comparable {
    String letter, int number;

    int compareTo(Foo f) {
        int x = letter.compareTo(f.letter);
        return x != 0 ? x : number.compareTo(f.number);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:03:04.950

你可以这样做：

```
int compareTo(Foo f) {
    int x = letter.compareTo(f.letter);
    return x != 0 ? x 
         : letter.equals("A") ? number.compareTo(f.number)
                              : f.number.compareTo(number);
} 
```

（这是假设您想将*所有*非 A 值视为降序，当然......）

# jquery - 根据 div 宽度调整字体大小

> ID：12944073
> 
> 赞同：0
> 
> 时间：2012-10-17T21:57:56.493
> 
> 标签：jquery, css, font-size

我尝试调整与父 div 相关的字体大小。

看到这个小提琴：http: [//jsfiddle.net/hFgMs/](http://jsfiddle.net/hFgMs/)

div 的宽度为 100 像素。因此，您键入的文本越多，字体大小应该越小，如果您删除一些字符，大小应该会增加。

到目前为止，这有效，但丑陋得要命。过渡时不时地“跳跃”。

关于如何修复它的任何提示？:-)

[自动调整大小的动态文本以填充固定大小的容器](https://stackoverflow.com/questions/687998/auto-size-dynamic-text-to-fill-fixed-size-container) 。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:28:50.553

好吧...您可以执行以下操作。

创建一个用户视图之外的 div。将文本放入其中，然后在将文本放入其中时获取其大小。然后你可以看到它的大小并适当地缩小它，而不是做大腿计数......顺便说一句，这是越野车......据我所知，它会像地狱一样跳跃不均匀或偶数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:37:37.287

看看这里的官方文档，这些是你在 css 中的相对单位。[http://www.w3.org/TR/css3-values/#font-relative-lengths](http://www.w3.org/TR/css3-values/#font-relative-lengths)

根据您的确切目标，您可能可以对视口测量做一些事情。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T22:15:38.400

# 当然，只需使用百分比。

使用百分比而不是像素来定义文本字段中字体的大小。

[http://jsfiddle.net/gsFx7/](http://jsfiddle.net/gsFx7/)

```
div{
    font-size:100%;
    -webkit-transition:all 300ms;
}

div:hover{
    font-size:200%;
} 
```

应该使更顺畅。

# javascript - Javascript $.inArray 不工作

> ID：12944076
> 
> 赞同：1
> 
> 时间：2012-10-17T21:58:00.130
> 
> 标签：javascript, jquery, jquery-ui

我有一个现有表，我想防止将相同的数据添加到现有表中。
我的问题：为什么当我点击“创建新用户”按钮时，结果总是提示“未找到”？

这是代码： **HTML：**

```
<div id="users-contain" class="ui-widget">
    <h1>Existing Users:</h1>
    <table id="users" class="ui-widget ui-widget-content">
        <thead>
            <tr class="ui-widget-header ">
                <th>Name</th>
                <th>Email</th>
                <th>Password</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>guruh</td>
                <td>guruhkharisma1@yahoo.com</td>
                <td>123456</td>
            </tr>
            <tr>
                <td>edo</td>
                <td>edo@yahoo.com</td>
                <td>123456</td>
            </tr>
        </tbody>
    </table>
</div>
<button id="create-user">Create new user</button> 
```

**jQuery**

```
 $(function() {
        var name = $( "#name" ),
            email = $( "#email" ),
            password = $( "#password" ),
            allFields = $( [] ).add( name ).add( email ).add( password ),
            tips = $( ".validateTips" );

        function checkExisting2(o) {
            var arr = [];
            $('#users-contain tr').each(function() {

                if (!this.rowIndex) return;
                var  Id = $(this).find("td").eq(0).html();    

                arr.push(Id);
           });

            if ( $.inArray(o,arr) > -1) {
                return false;
            } else {
                return true;
            }
        }

        $( "#dialog-form" ).dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true,
            buttons: {
                "Create an account": function() { 
                    var bValid = true;

                    bValid = bValid && checkExisting2(name);

                    if ( bValid ) {
                        alert("not found");
                        $( "#users tbody" ).append( "<tr>" +
                            "<td>" + name.val() + "</td>" + 
                            "<td>" + email.val() + "</td>" + 
                            "<td>" + password.val() + "</td>" +
                        "</tr>" ); 
                        $( this ).dialog( "close" );
                    } else {
                        alert("found");
                    }
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                allFields.val( "" ).removeClass( "ui-state-error" );
            }
        });

        $( "#create-user" )
            .button()
            .click(function() {
                $( "#dialog-form" ).dialog( "open" );
            });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:07:15.967

When you write this line:

```
bValid = bValid && checkExisting2(name); 
```

There's nothing in the code that indicates that `name` points to anything useful because

```
var name = $("#name") 
```

points to an empty object.

Also, when you write this:

```
if (!this.rowIndex) return; 
```

It'll work but it's considered bad form; try this instead:

```
if (!this.rowIndex) { 
   return; 
} 
```

That way, there's no confusion possible about the code when someone else reads it. Also, all this is redundant:

```
var bValid = true;
bValid = bValid && checkExisting2(name);
if ( bValid ) { .... } 
```

is equivalent to:

```
if (checkExisting2(name)) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:07:17.823

Why are you building the whole array and then iterating it again to check whether it contains the id?

Just use something like this:

```
 function checkExisting2(o) {
        var rows = $('#users-contain tr'),
            row = null;
        for (var i=1; i<rows.length; i++) {
            if (rows[i].find('td')[0].html() == o)
                return true;
        }
        return false;
    } 
```

Anyways, I'm unsure why your version doesn't work.. try debugging a bit, by placing the word

```
debugger 
```

on its own line, just before you call `$.inArray`. Then run the script: when execution gets there, you'll enter debug mode and you can see for sure what's in `arr` and `o`.

### Side note

```
var bValid;
bValid = bValid && checkExisting2(name); 
```

is perfectly equivalent to:

```
var bValid = checkExisting2(name); 
```

(unless, of course, you cut out some code in between the two lines)

# database - CodeIgniter - 将输入数组写入数据库

> ID：12944077
> 
> 赞同：2
> 
> 时间：2012-10-17T21:58:00.190
> 
> 标签：database, arrays, codeigniter

我正在尝试从一组输入字段中获取数据并将它们写入数据库。我以前从未使用过数组，但这是我拥有的代码。它基于如果它只是一个输入值我会做什么。我知道这是错误的，但我不知道下一步该尝试什么。有任何想法吗？谢谢。

```
//view
<input type="text" name="assignments[]">
<input type="text" name="hours[]">

<input type="text" name="assignments[]">
<input type="text" name="hours[]">

<input type="text" name="assignments[]">
<input type="text" name="hours[]">

<input type="text" name="assignments[]">
<input type="text" name="hours[]">

<input type="text" name="assignments[]">
<input type="text" name="hours[]">

//controller
$assignments = $this->input->post('assignments', TRUE);
$hours = $this->input->post('hours', TRUE);

$this->load->model('create', 'create_model');
$this->create_model->create_projects($assignments, $hours);

//model
public function create_projects($assignments, $hours) {

    $data = array(
        'assignments' => $assignments,
        'hours' => $hours,
        );
    $this->db->insert('projects', $data);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:23:34.513

当然，您不能将 PHP 数组按原样放入数据库中：

```
$data = array(
    'assignments' => $assignments, // this is an array
    'hours'       => $hours,       // so is this
);
$this->db->insert('projects', $data); 
```

您需要数组的字符串表示形式，想到两个选项：

*   [`serialize()`](http://php.net/manual/en/function.serialize.php)
*   [`json_encode()`](http://php.net/manual/en/function.json-encode.php)

我个人更喜欢 json_encode 因为它不依赖于 PHP 进行读取，序列化对于存储 PHP 对象很有用，但在这里你不需要：

```
$data = array(
    'assignments' => json_encode($assignments),
    'hours'       => json_encode($hours),
);
$this->db->insert('projects', $data); 
```

确保您的数据库字段是`TEXT`类型，以便它们能够存储可变长度数据。当您稍后获取数据时，您必须`json_decode()`在每个字段上运行以读取它并将其转换回数组，例如：

```
$result = $this->db->get('projects')->result();
foreach ($result as $record)
{
    $assignments = json_decode($record->assignments);
    // Now $assignments is an array
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T15:17:08.353

感谢答案。最终对我最有效的是这个。

```
//controller
$assignments = $this->input->post('assignments');
$hours = $this->input->post('hours');

$this->load->model('create', 'create_model');

foreach($assignments as $key => $n){
    $this->create_model->create_projects($n, $hours[$key]);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T07:56:20.153

> **只需使用 json_encode() 函数将数组数据存储在数据库中**

```
json_encode(array('key' => 'value')) 
```

**或者**

```
json_encode($_P0ST['ARRAY']) 
```

**或在 CodeIgniter 中**

```
json_encode($this->input->post('arraydata')); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-01-12T12:33:03.443

在帖子中：- $skills = $this->input->post('skills[]',TRUE);

'技能' => json_encode($skills) ,

它解决了我的问题。

# silverstripe - Silverstripe：会话 问题。奇怪的行为

> ID：12944081
> 
> 赞同：0
> 
> 时间：2012-10-17T21:58:07.650
> 
> 标签：silverstripe

我的 Page_Controller 的 init() 函数中有以下内容：

```
if ($this->ClassName != 'Trail' && $this->ClassName != 'Ride'){
    Session::clear('RelatedTrails');
} elseif ($this->ClassName == 'Ride') {
    Session::clear('RelatedTrails');
    Session::set('RelatedTrails', $this->getTrails());
} 
```

骑行等级：

```
function getTrails() {

        return $this->Trails();
    }
static $many_many = array(
        'Trails' => 'Trail'
    ); 
```

步道班

```
 class Trail extends Page {

        .....
        static $belongs_many_many = array(
            'Rides' => 'Ride',
        );
....
} 
```

这会在用户点击骑行页面时设置会话。只有当他们直接从骑行页面转到跟踪页面时，我才需要在跟踪页面上提供此会话信息。

它给我的问题是，当我点击“骑行”课程页面时，没有设置会话。当我从 if 语句的第一部分注释掉 Session::clear 时，会话设置正确，但是我需要它在任何其他页面类型上清除。

我尝试在第一部分放置一个回声和一个骰子，看看它是否落入这里，但它从未被击中。这是非常奇怪的行为。谁能看到这里发生了什么？

更新：进一步解释：我有游乐设施和小径。一次骑行可以包含许多路径。在骑行页面上，有一个菜单允许用户点击进入与骑行相关的路径。当他们从骑行点击进入小径时，会出现一个菜单，其中显示与他们刚刚点击过的骑行相关的其他小径。菜单的轨迹存储在骑行页面上设置的会话中。当他们通过菜单导航其他路径时，我需要保留此会话，以便我可以继续显示这些相关路径。

如果用户直接链接到跟踪页面（而不是通过骑行）。我需要知道这一点，以便我可以显示所有路径，因为我没有任何关联的路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:56:55.500

而不是将所有 Trails 保存到会话中，我只需在 Trail 上设置持有者的 ID，然后您可以获取 Ride Page 并获取 Trails

这对你的情况有用吗？

```
class Page_Controller extends ContentController {
    ...
    public function init() {
        parent::init();
        // clear on every page
        Session::clear('rideID');
    }
    ...
}

class Ride_Controller extends Page_Controller {
    ...
    public function init() {
        parent::init();
        // sets the session after clear
        Session::set('rideID', $this->data()->ID);
    }
    ...
}

class Trail_Controller extends Page_Controller {
    ...
    public function getRelatedTrails()
        // get the ID from session before clear
        $rideID = Session::get('rideID');
        parent::init();
        $ridePage = DataObject::get_by_id('Ride', (int)$rideID);
        if ($ridePage && $ridePage->Trails())
            return $ridePage->Trails();
        // here you could return some default Trails, in case no RideID is set
        return false;
    }
    ...
} 
```

# iphone - 视图控制器上的滑动元素

> ID：12944089
> 
> 赞同：1
> 
> 时间：2012-10-17T21:59:04.550
> 
> 标签：iphone, objective-c, xcode

我想为我的应用程序添加某种效果。我想逐个元素地向左/向右滑动到视图控制器。类似于 PowerPoint 演示文稿中的内容。有没有简单的方法来做到这一点？我正在开发 iPhone 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:58:39.430

是的-您需要使用`UIScrollView`带有一些[分页](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)的 a 。检查有关此的官方[文档](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/ScrollViewPagingMode/ScrollViewPagingMode.html#//apple_ref/doc/uid/TP40008179-CH3-SW1%5D)。

# sql - 每周转为总计

> ID：12944094
> 
> 赞同：0
> 
> 时间：2012-10-17T21:59:28.833
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一个查询，我正在尝试编写以返回数据库中出现的次数和实例，并按数据库定义的按周和产品分组。以下是我的查询：

```
SELECT WeekCompleted, Product, COUNT(OrderNumber) as CorrectionCount FROM(
SELECT 
p.Abbreviation as Product
,CAST(oi.OrderID as VARCHAR(MAX))+'.'+CAST(oi.OrderItemID as VARCHAR(MAX)) AS OrderNumber
,CASE
    WHEN o.ClientID IN (56156, 56394) 
        THEN DATEADD(week, datepart(ww, dbo.GetLatestMilestoneDate(oi.OrderID, oi.OrderItemID, 80)) 
            - 1, DATEADD(DAY, @@datefirst - DATEPART(weekday, CAST(YEAR(GETDATE()) AS VARCHAR)
            + '-01-01') - 6, CAST(YEAR(GETDATE()) AS VARCHAR) + '-01-01'))
    ELSE DATEADD(week, datepart(ww, dbo.GetLatestMilestoneDate(oi.OrderID, oi.OrderItemID, 130)) 
    - 1, DATEADD(DAY, @@datefirst - DATEPART(weekday, CAST(YEAR(GETDATE()) AS VARCHAR)
    + '-01-01') - 6, CAST(YEAR(GETDATE()) AS VARCHAR) + '-01-01')) 
    END AS WeekCompleted
,CASE   
    WHEN o.ClientID IN (56156,56394) THEN dbo.GetLatestMilestoneDate(oi.OrderID, oi.OrderItemID, 80)
    ELSE dbo.GetLatestMilestoneDate(oi.OrderID, oi.OrderItemID, 130) END AS LastCompleted
FROM
OrderItems oi
LEFT JOIN OrderItemMilestones oim on oim.OrderID = oi.OrderID and oim.OrderItemID = oi.OrderItemID
JOIN Products p on p.ProductID = oi.ProductID
JOIN Orders o on o.OrderID = oi.OrderID
WHERE
oim.MilestoneID = 90
and QueueID = 0
) src
WHERE LastCompleted >= '2012-10-01'
GROUP BY WeekCompleted, Product 
```

这里需要更多信息

```
 dbo.getlatestmilestonedate() returns a datetime date in this format: mm:dd:yyyy hh:mm:ss 
```

以及我目前拥有的数据样本表：

```
WeekCompleted           Product    CorrectionCount
2012-09-30 00:00:00.000 Product1    5
2012-10-07 00:00:00.000 Product1    7
2012-10-14 00:00:00.000 Product1    7
2012-09-30 00:00:00.000 Product2    18
2012-10-07 00:00:00.000 Product2    28
2012-10-14 00:00:00.000 Product2    16 
```

这些数据完全按照我想要的方式返回，因此除非需要完成最终目标，否则不需要对原始数据进行任何更改，即：

```
WeekCompleted               Product1        Product2
2012-09-30 00:00:00.000      5                18
2012-10-07 00:00:00.000      7                28 
2012-10-14 00:00:00.000      7                16 
```

我认为我需要对此进行调整，但每次尝试时我只会遇到语法错误并且还不太了解枢轴语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:02:44.417

试试这个

```
select weekcompleted, product1, product2
from (your query) src
pivot (sum(CorrectionCount) for Product in ([Product1],[Product2])) p 
```

如果您的产品可能会有所不同，那么您必须使用动态 SQL 构建上面的数据透视查询

```
declare @columns varchar(4000)
select @columns = '';
select @columns = ',[' + productname +']' 
    from (select distinct productname from products) v
select @columns = substring (@columns, 2, len(@columns))

declare @sql nvarchar(4000)
select @sql = 'select weekcompleted, ' + @columns 
+ ' from (your query) src '
+ ' pivot (sum(CorrectionCount) for Product in ('+@columns+')) p'

exec sp_executesql @sql 
```

# oracle - 缺少 UTL_FILE 输出文件

> ID：12944095
> 
> 赞同：1
> 
> 时间：2012-10-17T21:59:28.690
> 
> 标签：oracle

尝试将一些结果输出到 Windows 文件夹“c:\temp”中。编译并运行我的程序没有任何问题，但我找不到我的输出文件“c:\temp\foo.log”。这是我的代码：

```
 CREATE OR REPLACE  DIRECTORY tmp AS 'c:\temp\';

    CREATE OR REPLACE PROCEDURE write_log
    AS
       CURSOR cur
       IS
          SELECT firstname,
                 lastname
          FROM   MEMBER
          WHERE  memberid BETWEEN 2 AND 5; -- only test 3 rows.

       fname MEMBER.firstname%TYPE;
       lname MEMBER.lastname%TYPE;
       outputrecord VARCHAR2 ( 255 );
       outputfile UTL_FILE.file_type;
    BEGIN
       OPEN cur;

       FETCH cur
       INTO  fname,
             lname;

       outputfile := UTL_FILE.fopen ( UPPER ( 'tmp' ),
                                      'foo.log',
                                      'W',
                                      32767
                                    );

       WHILE cur%FOUND
       LOOP
          outputrecord := fname || ',' || lname;
          UTL_FILE.put ( outputfile, outputrecord );
          UTL_FILE.new_line ( outputfile );

          FETCH cur
          INTO  fname,
                lname;
       END LOOP;

       CLOSE cur;

       UTL_FILE.fclose ( outputfile );
    END write_log;
    /

    BEGIN
       write_log;
    END;
    / 
```

我在这里做错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:47:22.237

`UTL_FILE`操作数据库服务器上的文件，而不是您的客户端计算机上的文件。您只能在数据库服务器上读取和写入文件。假设此代码成功运行，它将在数据库服务器上创建一个名为`c:\temp\foo.log`.

# mysql - 复制并多次插入（mysql）？

> ID：12944100
> 
> 赞同：1
> 
> 时间：2012-10-17T21:59:53.230
> 
> 标签：mysql, sql, insert, cascade, lastinsertid

我的问题很容易解释，但我没有成功找到正确的答案！

我在 mysql 中有 3 个表，分别称为 tA、tB、tC。我在 tA 中有一个条目 A，在 tB 中有 2 个条目 B，在 tC 中有 3 个条目 C，其层次结构如下：

```
 A
            |
     ----------------
     |              |
     B1             B2
     |              |
 --------           |
 |      |           |
 C1     C2          C3 
```

可以想象，我有 B 条目链接到具有 A id 的 A 条目，而 C 条目链接到具有 B id 的 B 条目。

我只想将这些数据复制到：

```
 A'
            |
     ----------------
     |              |
     B1'            B2'
     |              |
 --------           |
 |      |           |
 C1'    C2'         C3' 
```

所以一开始，我首先创建 A' 并复制链接到 A' 的 B 条目。不用担心。

但之后，我做了一个左连接请求，将 C 条目复制到 C'。它几乎可以工作......唯一的问题是，通过这种方式，我的 C' 条目链接到 B id 而不是 B' id ！！！

我尝试了一些其他的东西，但我不知道该怎么做。看起来很简单。也许我累了……也许我要一个一个地复制B条目，然后将当前B条目的所有C条目复制到下一个。

但是没有更聪明的方法吗？使用 insert_id、级联、触发器、外键 ???

我不是 sql 专家，我希望这里有人会有一个很好的解决方案。

提前谢谢。

巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:58:11.013

向您的第二组表中添加一列，该列将包含来自原始组的 ID。创建 A' 后，您可以使用原始 ID 创建 B' 条目。然后，使用来自 B' 的原始 ID 创建 C'。

有道理？

因此，通过@bastien 提供的更多信息，我建议在 tableA 中添加一个名为`old_id`. 插入复制的行时，将原始行`id`放入`old_id`. 然后，您可以使用`old_id`在 tableB、tableC 等中查找相关行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:38:15.387

Alain 的方法是纯粹在 SQL 中处理此问题的一种可能方式，但需要对表进行一些修改，基本上存储了从中复制对象的原始 id。

所以你说你正在使用php，我希望我能给你更多相关的例子，但是我已经离开php太久了。但是您应该能够执行以下操作。

1.  从数据库中获取 A，将 A id 存储在 php 中的变量中（建议 $oldAID）
2.  复制 A 属性并作为 A' 存储回数据库
3.  获取最后插入 ID 并存储为变量（建议 $newAID）
4.  从其中 parent = $oldAID 的 DB 中获取所有 B 记录
5.  循环遍历 b 条记录，将当前记录 id 存储为 $oldBID
6.  复制 B1 属性并将其作为 B1' 存储回 DB，父 ID 为 $newAID
7.  获取最后一个 insertID 并存储为 $newBID
8.  从父 ID = $oldBID 的数据库中获取所有 C 记录
9.  使用父 ID = $newBID 复制并存储回数据库
10.  遍历您在步骤 5 中开始的循环

通过使用 PHP 来密切关注您的最后一个插入 ID，您可以制作所需的副本并保持它们的准确性。不利的一面是，php 和 MySQL 之间有很多来回，所以在一个非常大的集合中，这会深入几个层次，这样的过程可能需要几秒钟。但是，如果您的正常集合与您的示例一样小且浅，那应该不会太糟糕。

# html - 网络音频 HTML5 createMediaElementSource 无法按预期方式工作？INVALID_STATE_ERR：DOM 异常 11

> ID：12944109
> 
> 赞同：1
> 
> 时间：2012-10-17T22:00:58.693
> 
> 标签：html, web-audio-api

我有一个网络音频项目，需要在页面上获取现有标签，抓取它并通过我的网络音频音频上下文播放它。

```
<audio id="music" controls="true">
  <source src="DW2-AU01.mp3" type="audio/mp3" />
</audio> 
```

也许我在这里犯了一个错误，但是像这样将文件加载到缓冲区中是可行的：

```
var source = myAudioContext.createBufferSource();
source.buffer = myBuffers['FFA01.mp3'];
source.connect(myAudioContext.destination);
source.noteOn(0); 
```

但是，如果我在页面上使用标签设置它并尝试播放如下声音：

```
var source = myAudioContext.createMediaElementSource($('#music'));
source.connect(myAudioContext.destination);
source.noteOn(0); 
```

我得到 INVALID_STATE_ERR: DOM Exception 11。我觉得我已经用尽了我的谷歌搜索，每个人发布的 html5rocks 示例让他在 jQuery 中创建标签，而不是使用页面上已经存在的标签。

这可能吗？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:19:05.953

您正在传递一个 jQuery 引用。如果您尝试发送对本机音频元素的引用怎么办？

```
var source = myAudioContext.createMediaElementSource($('#music')[0]); 
```

# core-plot - 切换绘图空间的正确方法是什么？

> ID：12944110
> 
> 赞同：0
> 
> 时间：2012-10-17T22:01:13.223
> 
> 标签：core-plot, scatter-plot

场景：
1）五个不同的周期{3M, 6M, 1Y, 2Y & 3Y}，需要5个不同的范围；因此，不同的情节空间。
2) 每个绘图空间将包含 4 个重复的绘图（每个绘图都可以切换为可见/隐藏）。唯一的区别是它们各自的时期。
3) 用户按下“周期按钮”以显示其各自的绘图空间。

所有的地块空间最初都将使用它们各自的地块和范围创建。

**问题：**
1) 选择这些情节空间中的任何一个进行人类互动的最佳方式是什么？
场景 - 用户选择一个时期/情节的地方。

2) 绘图/绘图空间可以共享一个公共数据和委托来源吗？

我注意到绘图的委托/数据源中没有对特定绘图空间/绘图的引用。所以我认为最好有并行的委托/数据源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:35:35.800

1.  如果一次只能看到一个范围，为什么要复制所有内容？只需制作四个地块并将它们分配到一个地块空间。每当用户选择不同的范围时，更改绘图范围（和轴标签，如有必要）。绘图将自动重绘以反映新范围。

2.  多个地块可以共享一个地块空间。您可以根据需要混合搭配；有关示例，请参见 Mac CPTTestApp。它为两个散点图使用一个绘图空间，为两个条形图使用另一个独立的绘图空间。

您绝对可以在多个对象之间共享单个数据源和/或委托。所有 Core Plot 示例应用程序都执行此操作。所有数据源和委托方法都会将绘图或绘图空间的引用作为参数之一传递。您可以使用该`identifier`属性来区分各种绘图和/或绘图空间。

# jquery - Nivo jQuery 错误。它根本行不通

> ID：12944112
> 
> 赞同：1
> 
> 时间：2012-10-17T22:01:24.870
> 
> 标签：jquery, html, nivo-slider

谢谢你的时间。我按照教程，然后是视频，但我无法让它工作。

我的头看起来像这样

```
<link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"     type="text/javascript"></script>
<script src="jquery.nivo.slider.pack.js" type="text/javascript"></script> 
```

在我的身体里

```
<div class="slider-wrapper theme-default">
<div id="slider" class="nivoSlider">
    <img src="images/walle.jpg" alt="" />
    <a href="http://dev7studios.com"><img src="images/nemo.jpg" alt="" title="#htmlcaption" /></a>
    <img src="images/toystory.jpg" alt="" title="This is an example of a caption" />
    <img src="images/up.jpg" alt="" />
</div>
</div>
<div id="htmlcaption" class="nivo-html-caption">
    <strong>This</strong> is an example of a <em>HTML</em> caption with <a href="#">a link</a>.
</div> 
```

在身体的底部，就在它关闭之前，是

```
<script type="text/javascript">
$(window).load(function() {
$('#slider').nivoSlider();
});
</script> 
```

我从字面上复制并粘贴了所有内容……我不知道出了什么问题。非常感谢任何见解。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:25:24.307

您没有指向 js 和/或 css 文件的正确位置。根据您的代码，它们应该与此页面一起位于根目录中。

# html - HTML摆脱空白折叠

> ID：12944115
> 
> 赞同：2
> 
> 时间：2012-10-17T22:01:47.977
> 
> 标签：html, whitespace

如果你这样写：

一个
_

它通常会呈现为“a b”。我希望它呈现为“ab”。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:06:37.277

# Nope sorry, you can't

If there is one character deemed to be white space (either a tab, space or line break) then a space will be added. You can use javascript to remove the spaces but it's not suggested. What ever is printing it out should be taking care of that for you.

What platform are you using, we may be able to help better if we knew the circumstances.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:05:05.483

You could add a comment:

```
a<!--
-->b​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:52:03.697

这与空格折叠无关，因为字符之间只有一个换行符。折叠是将多个连续的空白视为一个空格。

HTML 中没有办法说在忽略换行符的意义上不应用正常的 HTML 空白规则。

在 CSS 中，您可以设置 eg `word-spacing: -0.25em`，但这`0.25em`只是空间宽度的粗略近似值。

要使“a”和“b”之间没有空格，请将它们写为“ab”。

# perl - 如何打印插入键的 2 个哈希？

> ID：12944116
> 
> 赞同：-1
> 
> 时间：2012-10-17T22:01:52.767
> 
> 标签：perl

拜托，我正在通过以下方式初始化 2 个哈希：

```
$hash1{$key} = -9;
$hash2{$key} = -9; 
```

然后我得到带有键顺序的数组@order：

```
my @order1 = sort {$a cmp $b} keys(%hash1);
my @order2 = sort {$a cmp $b} keys(%hash2); 
```

然后我想打印这两个插入键的数组。示例：1º 散列的 1º 键，2º 散列的 1º 键，依此类推。

```
print(join("\t", @order1, @order2) . "\n"); #this will print the entire hash1 first and     then the hash 2 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:05:44.993

```
use List::MoreUtils qw( pairwise );
say join "\t", pairwise { $a, $b } @order1, @order2; 
```

# nsis - 如何读取注册表中的子项

> ID：12944117
> 
> 赞同：2
> 
> 时间：2012-10-17T22:01:53.383
> 
> 标签：nsis

嗨，我有如下的注册表结构

```
HKLM
    SOFTWARE
        MYAPP
            VER1
            VER2
            VER3 
```

就像那个列表取决于我在 MYAPP 上安装了多少补丁。现在我想阅读 VER1、VER2 ...并且我想捕获最后一个 VERX。如何读取MYAPP下的子键并找出最后一个子键。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T22:21:44.280

答案 - 如何读取注册表项（不是值）。

来自[NSIS 脚本参考](http://nsis.sourceforge.net/Docs/Chapter4.html)

**4.9.2.5 EnumRegKey**

```
user_var(output) root_key subkey index 
```

> 将用户变量 $x 设置为 root_key\Subkey 中第 'index' 个注册表项的名称。在 WriteRegStr 下列出了 root_key 的有效值。如果没有更多的键，则返回一个空字符串，如果有错误，则返回一个空字符串并设置错误标志。

```
StrCpy $0 0
loop:
  EnumRegKey $1 HKLM Software $0
  StrCmp $1 "" done
  IntOp $0 $0 + 1
  MessageBox MB_YESNO|MB_ICONQUESTION "$1$\n$\nMore?" IDYES loop
done: 
```

在你的情况下：

```
EnumRegKey $1 HKLM "Software\MYAPP" $0 
```

# java - 从图片回调中读取 android jpeg EXIF 元数据

> ID：12944123
> 
> 赞同：36
> 
> 时间：2012-10-17T22:02:28.087
> 
> 标签：java, android, jpeg, exif

背景：我正在为信使程序编写相机应用程序。我无法随时将捕获的图像保存到永久磁盘。相机必须支持所有方向。我的实现是熟悉的 Surfaceview 示例。我使用 Display 类来检测方向并相应地旋转相机。在 takePicture jpeg 回调中，我从 byte[] 构造了一个位图，以解决我遇到的一些纵横比问题：[Camera API: Cross device issues](https://stackoverflow.com/questions/12736881/android-camera-api-cross-device-nightmare)

问题描述：在某些设备上，在 ROTATION_270（设备顺时针旋转 90 度）拍摄的构造位图颠倒过来。到目前为止，它似乎是三星。我只能假设相机可能是以其他方式焊接的，或者有什么影响，但这既不存在也不存在。虽然我可以检查位图是否横向，但我无法从逻辑上检查它是否按尺寸倒置，因此我需要访问 EXIF 数据。

Android为此[http://developer.android.com/reference/android/media/ExifInterface.html](http://developer.android.com/reference/android/media/ExifInterface.html)提供了一个解析器，但不幸的是它有一个接受文件的构造函数......我没有也不想要. 直观地说，我可以为字节数组编写一个构造函数，但考虑到他们调用本机代码[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2 ，这似乎真的很痛苦.1_r1/android/media/ExifInterface.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.1_r1/android/media/ExifInterface.java)

我的问题有两个部分：

1.  有谁知道 byte[] 数组是否包含完整的 EXIF jpeg 标头数据，或者是通过 BitmapFactory.decode(...) / BitmapFactory.compress(...) 以某种方式添加的路径？

2.  如果此 EXIF 数据存在于字节数组中，我如何以可靠的方式解析出方向信息？

2012 年 10 月 18 日编辑

~~pcans 下面的回答涉及我问题的第 2 部分。正如我在他的回答下面的评论中指出的那样，如果您想使用该解析器，您必须将源代码合并到您的项目中。该链接的 SO 帖子中提到的更改已在此处进行并重新发布：[https ://github.com/strangecargo/metadata-extractor](https://github.com/strangecargo/metadata-extractor)~~

> 注意 较新版本的[元数据提取器](https://drewnoakes/code/exif/)无需修改即可直接在 Android 上运行，并可通过 Maven 获得。

但是，对于第 1 部分，当我使用从 takePicture 获得的字节数组运行解析器时，我从解析器返回 0 个标签。我开始担心字节数组没有我需要的数据。我将继续研究这一点，但欢迎任何进一步的见解。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-08T03:41:29.087

使用[Drew Noakes](https://stackoverflow.com/users/24874/drew-noakes)的[Java 元数据提取库](http://www.drewnoakes.com/code/exif/)**2.9.1 版**从图像中读取元数据/EXIF `byte[]`（对 有用[`Camera.takePicture()`](http://developer.android.com/reference/android/hardware/Camera.html#takePicture(android.hardware.Camera.ShutterCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback,%20android.hardware.Camera.PictureCallback))）：

 **```
try
{
    // Extract metadata.
    Metadata metadata = ImageMetadataReader.readMetadata(new BufferedInputStream(new ByteArrayInputStream(imageData)), imageData.length);

    // Log each directory.
    for(Directory directory : metadata.getDirectories())
    {
        Log.d("LOG", "Directory: " + directory.getName());

        // Log all errors.
        for(String error : directory.getErrors())
        {
            Log.d("LOG", "> error: " + error);
        }

        // Log all tags.
        for(Tag tag : directory.getTags())
        {
            Log.d("LOG", "> tag: " + tag.getTagName() + " = " + tag.getDescription());
        }
    }
}
catch(Exception e)
{
    // TODO: handle exception
} 
```

* * *

要读取图像的 EXIF**方向**（不是缩略图的方向）：

```
try
{
    // Get the EXIF orientation.
    final ExifIFD0Directory exifIFD0Directory = metadata.getFirstDirectoryOfType(ExifIFD0Directory.class);
    if(exifIFD0Directory.containsTag(ExifIFD0Directory.TAG_ORIENTATION))
    {
        final int exifOrientation = exifIFD0Directory.getInt(ExifIFD0Directory.TAG_ORIENTATION);

        /* Work on exifOrientation */
    }
    else
    {
        /* Not found */
    }
}
catch(Exception e)
{
    // TODO: handle exception
} 
```

方向是从 1 到 8。请参见[此处](http://sylvana.net/jpegcrop/exif_orientation.html)、[此处](http://www.impulseadventure.com/photo/exif-orientation.html)、[此处](http://developer.android.com/reference/android/media/ExifInterface.html)或[此处](http://beradrian.wordpress.com/2008/11/14/rotate-exif-images/)。

* * *

根据 EXIF 方向变换位图：

```
try
{
    final Matrix bitmapMatrix = new Matrix();
    switch(exifOrientation)
    {
        case 1:                                                                                     break;  // top left
        case 2:                                                 bitmapMatrix.postScale(-1, 1);      break;  // top right
        case 3:         bitmapMatrix.postRotate(180);                                               break;  // bottom right
        case 4:         bitmapMatrix.postRotate(180);           bitmapMatrix.postScale(-1, 1);      break;  // bottom left
        case 5:         bitmapMatrix.postRotate(90);            bitmapMatrix.postScale(-1, 1);      break;  // left top
        case 6:         bitmapMatrix.postRotate(90);                                                break;  // right top
        case 7:         bitmapMatrix.postRotate(270);           bitmapMatrix.postScale(-1, 1);      break;  // right bottom
        case 8:         bitmapMatrix.postRotate(270);                                               break;  // left bottom
        default:                                                                                    break;  // Unknown
    }

    // Create new bitmap.
    final Bitmap transformedBitmap = Bitmap.createBitmap(imageBitmap, 0, 0, imageBitmap.getWidth(), imageBitmap.getHeight(), bitmapMatrix, false);
}
catch(Exception e)
{
    // TODO: handle exception
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-18T10:18:56.827

坏消息：

遗憾的是，Android Api 不允许您从 a 中读取 exif 数据`Stream`，而只能从 a中读取`File`。
[ExifInterface](http://developer.android.com/reference/android/media/ExifInterface.html)没有带有`InputStream`. 所以你必须自己解析jpeg内容。

好消息：

为此，API 存在于纯 Java 中。您可以使用这个：[https](https://drewnoakes.com/code/exif/)
://drewnoakes.com/code/exif/ 它是[开源](https://github.com/drewnoakes/metadata-extractor)的，在 Apache 许可证 2 下发布，可作为[Maven 包](http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22com.drewnoakes%22%20AND%20a%3A%22metadata-extractor%22)使用。

有一个构造函数`InputStream`： `public ExifReader(java.io.InputStream is)`

您可以使用如下方式构建一个`InputStream`支持： `byte[]``ByteArrayInputStream`

```
InputStream is = new ByteArrayInputStream(decodedBytes); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-02-26T20:11:52.497

AndroidX ExifInterface 支持从输入流中读取 EXIF 信息：

```
implementation "androidx.exifinterface:exifinterface:1.1.0" 
```

然后，您可以像这样将输入流传递给构造函数：

```
val exif = ExifInterface(inputStream)
val orientation =
        exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-18T20:54:40.793

因此，使用我的编辑和 pcans 建议，我得到了图像数据，但这不是我所期望的。具体来说，并非所有设备都会给出方向。如果您遵循此路径，请注意

*   我指向的“Android 固定”ExifReader 库实际上是经过编辑的 2.3.1，它是一些旧版本。网站和源代码中的新示例与最新的 2.6.x 相关，他在其中显着更改了 API。使用 2.3.1 接口，您可以通过执行以下操作从 byte[] 转储所有 EXIF 数据：

    ```
     Metadata header;    
            try {
                ByteArrayInputStream bais= new ByteArrayInputStream(data);
                ExifReader reader = new ExifReader(bais);
                header = reader.extract();
                Iterator<Directory> iter = header.getDirectoryIterator();
                while(iter.hasNext()){
                   Directory d = iter.next();
                   Iterator<Tag> iterTag = d.getTagIterator();
                   while(iterTag.hasNext()){
                      Tag t = iterTag.next();
                      Log.e("DEBUG", "TAG: " + t.getTagName() + " : " + t.getDescription());
                   }
                }
            } catch (JpegProcessingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (MetadataException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
    ```

如果你想要数字标签值，只需替换

```
t.getDescription() 
```

和

```
d.getInt(t.getTagType()) 
```

*   尽管 ExifReader 有一个使用 byte[] 的构造函数，但我一定误解了它的预期，因为如果我尝试直接将它与数据数组一起使用，我会到达返回目录中的 Tags。

就答案而言，我真的没有添加太多，所以我接受了 pcans 的答案。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-03-27T21:20:32.617

如果您想要一种读取 EXIF 数据的方法，它不会依赖于您的 URI 来自哪里，您可以使用[exif 支持库](https://android-developers.googleblog.com/2016/12/introducing-the-exifinterface-support-library.html)并从流中读取它。例如，这就是我获取图像方向的方式。

构建.gradle

```
dependencies {
...    
compile "com.android.support:exifinterface:25.0.1"
...
} 
```

示例代码：

```
import android.support.media.ExifInterface;
...
try (InputStream inputStream = context.getContentResolver().openInputStream(uri)) {
      ExifInterface exif = new ExifInterface(inputStream);
      int orientation = exif.getAttributeInt(ExifInterface.TAG_ORIENTATION, ExifInterface.ORIENTATION_NORMAL);
    } catch (IOException e) {
      e.printStackTrace();
    } 
```

一旦我们开始针对 api 25（也许 24+ 也有问题）但仍然支持回到 api 19，我必须这样做的原因，在 android 7 上，如果我传入一个只是引用的 URI，我们的应用程序将崩溃文件。因此，我必须创建一个 URI 来传递给这样的相机意图。

```
FileProvider.getUriForFile(context, context.getApplicationContext().getPackageName() + ".fileprovider", tempFile); 
```

问题在于该文件无法将 URI 转换为真实的文件路径（除了保留临时文件路径）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-12-01T00:05:44.547

如果您使用 Glide 库，您可以从 InputStream 获取 Exif 方向：

```
InputStream is=getActivity().getContentResolver().openInputStream(originalUri);
int orientation=new ImageHeaderParser(is).getOrientation(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-18T16:49:58.653

对于任何可能感兴趣的人，这里是如何使用来自[https://github.com/strangecargo/metadata-extractor的 2.3.1 接口获取 Orientation 标签](https://github.com/strangecargo/metadata-extractor)

```
Metadata header;
try {
    ByteArrayInputStream bais= new ByteArrayInputStream(data);
    ExifReader reader = new ExifReader(bais);
    header = reader.extract();
    Directory dir = header.getDirectory(ExifDirectory.class);
    if (dir.containsTag(ExifDirectory.TAG_ORIENTATION)) {
        Log.v(TAG, "tag_orientation exists: " + dir.getInt(ExifDirectory.TAG_ORIENTATION));
    }
    else {
        Log.v(TAG, "tag_orietation doesn't exist");
    }

} catch (JpegProcessingException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (MetadataException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-08T23:47:49.330

如果你有一个`content://`类型`Uri`，android通过提供API `ContentResolver`，不需要使用外部库：

```
public static int getExifAngle(Context context, Uri uri) {
    int angle = 0;
    Cursor c = context.getContentResolver().query(uri,
            new String[] { MediaStore.Images.ImageColumns.ORIENTATION },
            null,
            null,
            null);

    if (c != null && c.moveToFirst()) {
        int col = c.getColumnIndex( MediaStore.Images.ImageColumns.ORIENTATION );
        angle = c.getInt(col);
        c.close();
    }
    return angle;
} 
```

您还可以读取在 中找到的任何其他值`MediaStore.Images.ImageColumns`，例如纬度和经度。

这目前不适用于`file:///`Uris，但可以轻松调整。**

# intersystems - LogiXML Studio - Logi 报告强制分页符

> ID：12944128
> 
> 赞同：0
> 
> 时间：2012-10-17T22:02:40.233
> 
> 标签：intersystems, intersystems-ensemble

我不确定观看该网站的 Logi Report 用户受众范围有多大，但这是我的两难选择。我新找到了一种在组摘要行之后强制分页的方法。由于组摘要行中的打印机分页符选项，打印（或导出为 pdf 等）当然很容易。但是，在正常查看报表时，如何在组摘要行之后强制分页？任何帮助都会很棒！如果您需要我的任何东西，请告诉我！菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:12:58.560

一种选择是构建您的分组，以便您使用子报表或子数据表，而不是构建单个表结构。这样，您可以将 InteractivePaging 元素分配为每页使用 1 行；效果将是为每组数据强制分页（新的交互式页面）。

这是一个使用静态数据的简单示例，您可以随意将其直接复制/粘贴到 Logi studio 中的新定义中：

```
<DataTable ID="dt" Width="500" WidthScale="px">
  <DataLayer Type="Static" ID="dlStatic1">
    <StaticDataRow Category="Beverages" />
    <StaticDataRow Category="Condiments" />
    <StaticDataRow Category="Meat and Poultry" />
  </DataLayer>
  <DataTableColumn ID="colCategory" Header="Category">
    <Label ID="lblCategory" Caption="@Data.Category~" />
    <DataColumnSort DataColumn="Category" />
  </DataTableColumn>
  <MoreInfoRow>
    <SubDataTable ID="dtSub" Width="80" WidthScale="%">
      <SubDataLayer ID="subDL">
        <DataLayer Type="Static" ID="dlStatic2">
          <StaticDataRow Category="Beverages" Product="Coffee" Price="7.99" />
          <StaticDataRow Category="Beverages" Product="Tea" Price="5.99" />
          <StaticDataRow Category="Beverages" Product="Milk" Price="3.49" />
          <StaticDataRow Category="Condiments" Product="Mustard" Price="1.99" />
          <StaticDataRow Category="Condiments" Product="Mayo" Price="3.99" />
          <StaticDataRow Category="Condiments" Product="Oil" Price="6.99" />
          <StaticDataRow Category="Meat and Poultry" Product="Steak" Price="15.75" />
          <StaticDataRow Category="Meat and Poultry" Product="Chicken" Price="8.55" />
          <StaticDataRow Category="Meat and Poultry" Product="Pork" Price="7.45" />
        </DataLayer>
        <SubDataLayerRelationColumn ChildColumn="Category" ParentColumn="Category" ID="relCategory" />
      </SubDataLayer>
      <DataTableColumn ID="colProduct" Header="Products">
        <Label Caption="@Data.Product~" ID="lblProduct" />
      </DataTableColumn>
      <DataTableColumn ID="colPrice" Header="Price">
        <Label Caption="@Data.Price~" ID="lblPrice" />
      </DataTableColumn>
    </SubDataTable>
  </MoreInfoRow>
  <InteractivePaging CaptionType="Image" PageRowCount="1" Location="Top" ShowPageNumber="True" />
</DataTable> 
```

您也可以在 Logi DevNet 上找到类似结构的其他示例：http: [//devnet.logixml.com/](http://devnet.logixml.com/)

示例页面（在 DataTables 部分下）上的“分层”表示例也说明了类似的报告布局。

# mysql - MySQL创建函数错误

> ID：12944130
> 
> 赞同：0
> 
> 时间：2012-10-17T22:02:40.850
> 
> 标签：mysql, function, if-statement, procedure

我需要创建一个函数，根据书籍主题给出书籍价格的平均值。这个函数的规则是：

a) 如果参数为 null，则返回 null

b) 如果参数与我们在主题表中的任何主题 id 不匹配，则返回值 -2

c) 如果参数与我们在主题表中的主题 id 匹配，但我们没有任何具有该主题的书籍，则返回值 -1

```
create function AvgPriceByTopic(
p_subject varchar(20))
RETURNS decimal(8,2)
begin
declare v_avgPrice decimal(8,2);
declare v_avgListPrice decimal(8,2);

if p_subject is null then
    set v_avgPrice := null;
elseif exists (
        select avg(list_price) into v_avgListPrice
        from books 
        where topic_id = p_subject
        group by book_id
        limit 1 ) then
    set v_avgPrice := v_avgListPrice;
else 
    set v_avgPrice := -2;
end if;

return v_avgPrice;
end;
# 
```

我收到一条错误消息：

```
 ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
 corresponds to your MySQL server version for the right syntax to use near 
  'into v_avgListPrice from books' at line 11 
```

有什么建议可以摆脱这个错误？有时我的语法有问题......提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:31:38.367

由于“这样的 SELECT 必须将其结果返回到外部上下文”，请参阅[using select into using user-defined variables](http://dev.mysql.com/doc/refman/5.0/en/select-into.html)。我会尝试在第一个 if 语句之外提取选择，例如：

```
select avg(list_price) into v_avgListPrice
        from books 
        where topic_id = p_subject
        group by book_id
        limit 1;
if p_subject is null then
    set v_avgPrice := null;
elseif v_avgListPrice is not null then
    set v_avgPrice := v_avgListPrice;
else 
    set v_avgPrice := -2;
end if; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:29:34.167

首先，您需要将计算平均值的查询移到`EXISTS`@dan 建议的范围之外。

但是我在该查询中看到了一个问题：它按 book_id 分组并进行了限制，然后尝试将其限制在第一行。首先，这不会产生按主题的平均价格，因为它不是按主题分组的，它只会产生每本书的价格。尝试以下操作：

```
delimiter $$

create function AvgPriceByTopic(
    p_subject varchar(20))
RETURNS decimal(8,2)
begin
declare v_avgPrice decimal(8,2);
declare v_avgListPrice decimal(8,2);

if p_subject is null then
    set v_avgPrice := null;
elseif not exists (select * from topics where topic_id = p_subject) then
    set v_avgPrice := -2;
elseif not exists (select * from books where topic_id = p_subject) then
    set v_avgPrice := -1;
else
    select avg(list_price) into v_avgListPrice
    from books
    where topic_id = p_subject
    group by topic_id;
end if;

return v_avgPrice;
end$$

delimiter ; 
```

请记住更改分隔符，以便 MySQL 不会将函数中的分号解释为`create function`语句的结尾。

# http - AngularJS 不断地从 html 模板调用 $http.get，而不是从控制器内部调用？

> ID：12944135
> 
> 赞同：1
> 
> 时间：2012-10-17T22:02:57.290
> 
> 标签：http, get, angularjs

AngularJS 一遍又一遍地调用 http get 请求！！

如果我直接在控制器中调用 getContexts 很好......但如果我从 调用它`html template`，它只会继续调用 get。

**部分上下文Ctrl.js：**

```
 'use strict';

            app.controller('ContextCtrl', function ContextCtrl($scope, $location, $http, $rootScope, ContextService) {  
                $scope.getContexts = function(keys)
                {
                    $scope.contexts = {};
                    $http.get('/getContextsWS?keys=' + keys).
                    success(function(data){
                      $scope.contexts = data;
                    });
                }

                // This works
                $scope.getContexts('["context::one", "context::two"]')
            }); 
```

**部分html部分：**

```
 <section id="contextSection" ng-controller="ContextCtrl">

                // This causes get to keep calling!
                {{getContexts('["context::one", "context::two"]')}}

                // Just checking
                {{contexts|json}}

                <nav>
                    <ul ng-show="contexts.length" ng-cloak>
                        <li ng-repeat="context in contexts">
                            <div class="view" ng-click="contextSelected(context)">{{context.name}}</div>
                        </li>
                    </ul>
                </nav>
            </section> 
```

这让我发疯！

好的，我已经尝试了您的隐藏字段示例，但我似乎无法让它工作，但也许我错过了一些东西......

**的HTML：**

```
 <section id="contextSection" ng-controller="ContextCtrl">
            <input type="hidden" ng-model="contextIds" copy-to-model value='@product.item.contextIds'/> 
```

**指令：**

```
 mto.directive('copyToModel', function ($parse) {
                return function (scope, element, attrs) {
                    $parse(attrs.ngModel).assign(scope, attrs.value);
                }
            }); 
```

**控制器：**

```
 app.controller('ContextCtrl', function ContextCtrl($scope, $location, $http, $rootScope, ContextService) {  

                // I can read this, but it never changes, and without this the contextIds in the alert are null
                $scope.contextIds = "...";

                $rootScope.alert = function(text)
                {
                    alert(text);
                }

                $rootScope.alert("$scope.contextIds: " + $scope.contextIds);

            }); 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:11:51.943

`{{ }}`每当 Angular 注意到模型中的某些内容发生了变化（我过度简化了实际发生的情况）时，绑定代码中的表达式就会被重新评估。如果您只想调用`getContexts`一次，请不要将其放入`{{ }}`您的标记中，而只需在您的控制器代码中调用它。

基本上假设里面的代码`{{ }}`可以并且将被多次调用..

所以尝试删除：

```
// This causes get to keep calling!
{{getContexts('["context::one", "context::two"]')}} 
```

并依赖您的控制器代码（尽管`getContexts`如果您不从标记中调用它，您可能不希望在您的范围内）：

```
// This works
$scope.getContexts('["context::one", "context::two"]') 
```

# javascript - 从 jquery 嵌套函数更新全局变量

> ID：12944141
> 
> 赞同：0
> 
> 时间：2012-10-17T22:03:18.330
> 
> 标签：javascript, jquery, scope, nested

我对这段代码有疑问：

```
var elements;
var current = 100;

$(document).ready(function() {
        elements =  = $('.slide').length;
        iterate();
});

function iterate() {
        $('.slide').eq(current).hide().queue(
                function() {
                        if (++current >= elements) { current = 0; }
                        $('.slide').eq(current).show();
                        $(this).dequeue();
                }
        );

        // Call this function again after the specified duration
        setTimeout(iterate, 1000);
} 
```

我想要做的是用'slide'类迭代所有元素，但我在更新'current'变量时遇到问题。它的值始终为 0。如何从嵌套的 jquery 函数中修改全局变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:09:06.390

如果在 DOM 准备好之前调用此行，`.length`则为`0`：

```
var elements = $('.slide').length; 
```

这意味着条件`if`将始终是`true`：

```
if (++current >= elements) { current = 0; } 
```

你可以像这样修复它：

```
var elements;
var current = 100;

$(document).ready(function() {
    elements = $('.slide').length;
    iterate();
}); 
```

此外，这有点奇怪`.queue()`。没有什么需要排队的。

我会这样修改它：

```
function iterate() {
    var slide = $('.slide').eq(current).hide();
    if (++current >= elements) { current = 0; }
    $('.slide').eq(current).show();

    // Call this function again after the specified duration
    setTimeout(iterate, 1000);
} 
```

# sqlite - Adobe Air SQLite 误解

> ID：12944145
> 
> 赞同：2
> 
> 时间：2012-10-17T22:03:39.543
> 
> 标签：sqlite, asynchronous, air, adobe, execute

我正在尝试将 SQLite DB 与 AIR 项目一起使用，似乎有一些问题我似乎无法在互联网上找到答案，尤其是有关最佳实践的问题。

1.  第一个是关于在同一个应用程序实例中有多个连接。某些应用程序进程需要在瞬间使用 db，最好由同步类型代码流 (try{}catch(){}) 提供服务。某些过程可能需要一段时间，最好使用带有 AsyncResponder 的异步代码流来提供服务。

    正因为如此，我考虑过有一个 ConnectionPoolManager，它有多个异步实例和一个同步 SQLConnection 类的实例。这是一个体面的、好的还是绝对残暴的想法？这引出了我的下一个观点。

2.  是否存在多个异步连接并行运行其异步语句的问题？我见过一些人抱怨数据库被锁定，我读过一次只有一个语句可以执行写入。

    如果一个 write 语句被调用来执行（new Async...）而另一个正忙，会发生什么？会抛出错误，还是会等待超时？

对此问题的任何澄清将不胜感激。我不断遇到那种一次性回答问题但不是我的问题的来源。通常我会自己去测试它，但我担心我可能无法重现只会在更重的使用水平下才会表现出来的陷阱错误。

编辑：这是一些关于我浪费半天后发现的问题的文档。[Adobe文档](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118666ade46-7d2b.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:26:10.137

SQLite 没有写并发；作家将阻止所有其他读者和作家。

当发生这种冲突时，`SQLError`将抛出一个 ID 为 3119 的事件。在这种情况下，应用程序应该等待并重试。SQLite 有一个内置的设置来自动执行这样的等待，但是 Air 并没有暴露这一点。您必须在代码中手动执行此操作，这[并不容易](https://stackoverflow.com/questions/4046421)。

因此，与 SQLite 建立单一连接会更容易。如果您想异步使用它，则必须使用`Mutex`.

# php - 从数组中获取几个元素，例如“foreach”

> ID：12944146
> 
> 赞同：1
> 
> 时间：2012-10-17T22:03:43.460
> 
> 标签：php, arrays

如何一次从数组中获取多个元素？就像`foreach`只有一个，我怎样才能在每次迭代中获得多个？

```
$data = array(1,2,3,4,5,6);
foreach($data as $a and $b) // pseudocode
{
    echo $a + $b;
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:05:56.080

你可以试试

```
$data = array(1,2,3,4,5,6);
echo "<pre>"; 
```

`foreach`循环使用[`array_chunk`](http://php.net/manual/en/function.array-chunk.php)

```
foreach ( array_chunk($data, 2) as $v ) {
    $v[1] = isset($v[1]) ? $v[1] : 0;
    echo $v[0] + $v[1], PHP_EOL;
} 
```

`For`环形

```
for($i = 0; $i < count($data); $i += 2) {
    $v = isset($data[$i + 1]) ? $data[$i + 1] : 0;
    echo $data[$i] + $v, PHP_EOL;
} 
```

`while`环形

```
$i = 0;
while($v = array_slice($data, $i, 2)){
    $v[1] = isset($v[1]) ? $v[1] : 0;
    echo $v[0] + $v[1], PHP_EOL;
    $i += 2;
} 
```

输出

```
3
7
11 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T22:06:04.560

使用正常`for`循环并每次增加索引两次。您可以通过将索引增加所需元素的数量来概括这一点。

```
// Note that if count($data) is not even, then we'll miss the last element
for($i = 0; ($i + 1) < count($data); $i += 2) {
    $first = $data[$i];
    $second = $data[$i + 1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:10:42.360

据我所知，没有本地方法可以做到这一点 - 您最好的选择是使用 for 循环并调整索引以根据您的要求选择项目。即类似的东西：

```
for ($i = 1; $i < count($data)-1; $i++) {
    for ($j = $i; $j < count($data); $j++) {
        echo $data[$i] + $data[$j];
    }
} 
```

或者

```
for ($i = 1; $i < count($data); $i+=2) {
    echo $data[$i] + $data[$i+1];
} 
```

注意：第二个选项在数组中存在奇数个元素的问题。

# ios - 自动使视图控制器启动 segue 转换

> ID：12944148
> 
> 赞同：0
> 
> 时间：2012-10-17T22:04:05.167
> 
> 标签：ios, xcode, segue, uiactivityindicatorview

我仍在学习如何使用 Xcode，我很想了解更多关于如何获取加载屏幕（例如从 Web 下载信息到核心数据）以及如何使用情节提要转换到另一个视图控制器的一件事完成后继续过渡。我在哪里可以找到有关此的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:12:45.803

从`ViewController`您要制作的内容中，`segue`您可以使用以下方法：

```
-(void)performSegueWithIdentifier:(NSString*)identifier sender:(id)sender 
```

检查：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

您`segue`正在执行的操作必须在您的*.storyboard*文件中定义。

因此，您可以在 IB 中创建一个 segue，当您需要它出现时，只需调用上述方法即可。

您正在寻找的*加载屏幕可能是一个 HUD。*由于你不能在 iOS 中使用它，因为它是一个私有 API，我建议你尝试这样的事情：http: [//www.cocoacontrols.com/platforms/ios/controls/atmhud](http://www.cocoacontrols.com/platforms/ios/controls/atmhud)或这个：[http://www。 cocoacontrols.com/platforms/ios/controls/mbprogresshud](http://www.cocoacontrols.com/platforms/ios/controls/mbprogresshud)。

# haskell - GHC 中 Haskell 线程和 OS 线程之间的关系

> ID：12944151
> 
> 赞同：17
> 
> 时间：2012-10-17T22:04:09.913
> 
> 标签：haskell, concurrency, ghc

我试图找出 Haskell 的线程（由[forkIO](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent.html#v%3aforkIO)产生的线程）究竟是如何映射到操作系统线程的。

我找到的第一个信息来源，

[http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent.html#g:11](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent.html#g:11)

指定所有轻量级线程实际上都在一个 OS 线程上运行，并且只有当 Haskell 线程使用安全 IO 操作阻塞时，GHC 运行时才会生成一个新的 OS 线程来运行其他 Haskell 线程，这样 IO 调用就不会阻塞整个程序。

第二个信息来源来自这里，

[http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/using-smp.html](http://www.haskell.org/ghc/docs/7.0.1/html/users_guide/using-smp.html)

它清楚地表明 Haskell 线程以平衡的方式映射到预定义数量的预先创建的 OS 线程。这或多或少意味着，如果我有 80 个轻量级线程，并且在运行程序时传递了选项 +RTS -N 8，那么将创建至少 8 个操作系统线程，每个这样的线程将运行 10 个轻量级线程。在具有 8 个 CPU 内核的机器上，这意味着大约 10 个 Haskell 线程/内核。

第二个信息来源似乎更准确，我希望 GHC 运行时在运行使用该`-threaded`标志编译的程序时会表现出这种确切的行为。

谁能证实这一点？而且，如果第二个版本是正确的，那么绑定线程的目的是什么 - 一个使用[forkOS](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent.html#v%3aforkOS)产生的线程 -是否仅用于处理使用线程本地数据的本机代码？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-17T22:20:34.843

`-threaded`不使用单个 OS 线程来运行所有 Haskell 线程的程序编译。外部调用将阻塞所有正在运行的 Haskell 线程。

编译的程序`-threaded`可以使用多个 OS 线程并行运行多个 Haskell 线程（OS 线程的数量可以通过`+RTS -N`选项控制）。标记的外部调用`safe`不会阻塞其他正在运行的 Haskell 线程（因此，`-threaded`即使`+RTS -N1`您有多个 Haskell 线程并发出可能需要很长时间的外部调用，使用它也可能是有益的）。标记的外部调用`unsafe`在 GHC 中实现为简单的内联函数调用，并将阻塞调用它们的 OS 线程。

*关于您的第一个来源，它从单一功能*的角度描述了发出外部呼叫时会发生什么。[能力](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Rts/Scheduler#Capabilities)被定义为用于运行 Haskell 代码的虚拟 CPU，在线程化 RTS 中对应于 OS 线程的集合，任何时候只有一个线程在运行 Haskell 代码（其他 OS 线程用于在不阻塞 Haskell 的情况下进行外部调用线程）。当一个 Haskell 线程进行`safe`外部调用时，[它会被放在挂起线程列表中，并且该功能被赋予不同的 Haskell 线程](http://hackage.haskell.org/trac/ghc/browser/rts/Schedule.c#L2170)。

*绑定的*Haskell线程有一个固定的关联 OS 线程，用于进行外部调用。未*绑定*线程没有关联的 OS 线程：来自该线程的外部调用可以在任何 OS 线程中进行。绑定线程用于与重要的库进行交互，对库的调用来自哪个 OS 线程，例如 OpenGL，它将其渲染上下文存储在 OS-thread-local-state 中。

更多信息可以在[GHC 手册](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/using-concurrent.html)和以下论文中找到：

> [**使用并发扩展 Haskell 外部函数接口**](http://research.microsoft.com/apps/pubs/default.aspx?id=67486)
> 
> 西蒙·马洛、西蒙·佩顿·琼斯和沃尔夫冈·塞勒，Haskell'04

# node.js - node 'extends layout' does not show block content

> ID：12944152
> 
> 赞同：1
> 
> 时间：2012-10-17T22:04:10.660
> 
> 标签：node.js, express, pug

I have tried this in a couple different projects with same result. This is a node app with express 2.5.8 and jade 0.20.3 (but updating to newer version of jade and express dont change the problem below).

I have a simple jade layout:

"layout.jade"

```
doctype 5
html
  head
    title MongoDB example
  body
    h1 My first MongoDB app
    hr
    block body 
```

Then an index content page that should inherit the layout and show the content:

"index.jade"

```
extends layout
block body
if (authenticated)
  p Welcome back, #{me.first}
  a(href="/logout") Logout
else
  p Welcome new visitor!
  ul
    li: a(href="/login") Login
    li: a(href="/signup") Signup 
```

In server.js I have (pertaining to jade):

```
app.set('view options', { layout: false }); 
```

But when I run the server and load the page I only get the content on the layout and not the index page. If I remove 'extends layout' then I get the content from the index page but not the layout. So, the output I get is:

```
<html>
  <head><title>MongoDB example</title></head>
  <body>
    <h1>My first MongoDB app</h1><hr>
  </body>
</html> 
```

Figure this must be something simple I have overlooked but no love on googling around on this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:36:01.767

你失去了你的缩进`index.jade`

尝试这个：

```
extends layout
block body
  if (authenticated)
    p Welcome back, #{me.first}
    a(href="/logout") Logout
  else
    p Welcome new visitor!
    ul
      li: a(href="/login") Login
      li: a(href="/signup") Signup 
```

# numbers - Library for converting word representations of numbers into numbers

> ID：12944153
> 
> 赞同：0
> 
> 时间：2012-10-17T22:04:11.600
> 
> 标签：numbers

Searching for "word to number" almost always ends up giving results for converting numbers into word representations which seems a much simpler task than the inverse. There are some pretty trivial cases which could be handled with a basic lookup table ("first,1st,one" -> 1, etc.), but I'm looking for something which is better at tackling the general case. The app which I'm building involves taking user input which may or may not include a number and comparing that with a known result (which itself is stored as text), so for even more complexity it'd be preferable if it were able to deal with misspellings as well (e.g. frist, sceond) however this could probably be accomplished by passing the input through a spell checker first).

So far I've found [http://j.mearie.org/post/7462182919/spelt-number-to-decimal](http://j.mearie.org/post/7462182919/spelt-number-to-decimal) which seems pretty cool because it seems to support some other languages (or not), but I would prefer something that was more portable and less obfuscated.

The most sophisticated one I've found is [https://github.com/ged/linguistics/blob/master/lib/linguistics/en/numbers.rb](https://github.com/ged/linguistics/blob/master/lib/linguistics/en/numbers.rb) and [http://www.perlmonks.org/?node_id=506028](http://www.perlmonks.org/?node_id=506028) also seems promising.

Is there any more complete library out there? I'd like it to handle english and spanish numbers in different formats such as first, 1st, 1, one and even invalid ones like 1nd, and roman numerals like MMXII.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:11:20.927

鉴于您希望从人类语言转换为数学，而不是相反，您基本上需要巨大的表/枚举集。数学是基于逻辑的，当走一条路时，规则集被用来指向单词。从作为一组商定规则的语言向后移动（有关每条规则的不合逻辑的例外情况，请参见英语语言），唯一可靠的完成方法是将所有可能的引用数字的方式聚集在一起，并将其绑定在翻译映射中。

您找到的任何图书馆不仅必须随着时间的推移而更新以接受新形式的数字讨论，而且还可能否定或更改先前已更改的规则。

你甚至打算如何处理像第一个这样的无效输入？他们的意思是1还是2？这是整个博士论文都致力于自然语言处理的原因的一瞥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:15:23.613

您应该研究 Lex & Yacc 的这类事情。我认为已经编写了一些“人类计算器”（即使我现在找不到它），因此您可以从中提取数字理解。

# objective-c - Resize font size with a change in height by autolayout on a textfield

> ID：12944155
> 
> 赞同：1
> 
> 时间：2012-10-17T22:04:23.257
> 
> 标签：objective-c, ios, ios6, autolayout

I have a UITextField that can be resized with autolayout. How can I make the font size automatically smaller when the textfield height gets smaller than the font?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:21:10.800

我希望我能弄清楚如何像其他人一样发表评论，而不是给出答案。

无论如何，这似乎是 iOS 设计中非常基础的东西，似乎没有任何承认这种事情，库/对象/属性的整个设计似乎认为你只想根据宽度更改字体大小，但这对我来说似乎完全是任意的。使用自动布局，这似乎只是需要修复的弹簧和支柱的不幸遗留问题。

作为一种变通方法，您可以创建一些约束以按一定比例将标签的宽度与高度联系起来，这样高度的变化会导致宽度也发生变化，从而强制字体发生变化。

我正在尝试解决同样的问题。

据我所知，这些约束必须在代码中创建。

# c# - Response.Write webrequest 无法正确显示 XML

> ID：12944157
> 
> 赞同：1
> 
> 时间：2012-10-17T22:04:32.847
> 
> 标签：c#, asp.net, ajax

我试图获取一个 XML，然后 response.write 到一个页面（在我的服务器上），这样我以后可以通过 Ajax 请求（javascript）得到它。但是当我尝试这个时，文档以 HTML 页面的形式出现带有 XML 的节点：http: [//imgur.com/GL47U](http://imgur.com/GL47U)

如果我用浏览器访问 url，它会显示正确的 XML，所以我猜它的源代码没有错误？

这是 page_load 上调用的代码：

```
public void getXML(){

            WebRequest req = WebRequest.Create("url");
            HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
            req.ContentType= "text/xml charset=utf8";

            Stream streamdata = resp.GetResponseStream();
            StreamReader reader = new StreamReader(streamdata);

            string serverresponse = reader.ReadToEnd();

            reader.Close();
            streamdata.Close();
            resp.Close();

            Response.Write(serverresponse);
        } 
```

我错过了什么？（是的，我是新手！） tnx

javascript: 变量 xmlhttp;

```
 if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }

          xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                console.log(xmlhttp.responseXML);
            }
          }

        xmlhttp.open("GET", "http://127.0.0.1:8080/api.aspx?METHOD=getXML",true);
        xmlhttp.setRequestHeader("Content-type", "application/xml");
        xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:42:23.710

**HTML (api.aspx)**

```
<%@ Page Title="Home Page" Language="C#" AutoEventWireup="true"
    CodeFile="Default.aspx.cs" Inherits="_Default" ContentType="text/xml" %> 
```

**代码隐藏 (api.aspx)**

```
public partial class api: System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        getXML();
    }

    public void getXML()
    {

        WebRequest req = WebRequest.Create("http://webdev.clic.det.nsw.edu.au/Mum12/Public/Sample.xml");
        HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
        req.ContentType = "text/xml charset=utf8";

        Stream streamdata = resp.GetResponseStream();
        StreamReader reader = new StreamReader(streamdata);

        string serverresponse = reader.ReadToEnd();

        reader.Close();
        streamdata.Close();
        resp.Close();

        Response.Write(serverresponse);
    }
} 
```

这就是我在 test.aspx 中使用它的方式

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Test" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <script src="Scripts/jquery-1.8.2.min.js" type="text/javascript"></script>
</head>
<body>
    <script>
        $(document).ready(function () {
            var xmlhttp;
            if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp = new XMLHttpRequest();
            }
            else {// code for IE6, IE5
                xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            }

            xmlhttp.onreadystatechange = function () {
                if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                    console.log(xmlhttp.responseXML);
                }
            };

            xmlhttp.open("GET", "http://localhost/testwebsite/api.aspx", true);
            xmlhttp.send();
        });

    </script>
</body>
</html> 
```

我得到了预期的xml。请测试并让我知道它是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:00:50.490

您需要设置响应的内容类型，以便浏览器正确处理它：

```
Response.ContentType = "text/xml"; 
```

正如 Tariqulazam 所说，页面内容可能还可以。要查看实际发生的情况，请使用“查看页面源代码”而不是在开发工具中查看。

# java - Calculating the value of a recursion formula in EXCEL using POI

> ID：12944161
> 
> 赞同：2
> 
> 时间：2012-10-17T22:04:55.750
> 
> 标签：java, excel, recursion, apache-poi

I have an EXCEL Spreadsheet that has many computations some including recursive formula's (perfectly fine in excel which computes these with no problem).

I'm using version 3.8 of the Apache Poi API to open the existing spreadsheet, add updated values for the computations, save the spreadsheet and then read the results into my program.

All of this works except the in memory poi version of the spreadsheet does not perform the recursive calculation.

I'm calling the POI code to compute the entire workbook, each sheet and then each formula cell, but the cell formula never computes.

If I open the saved spreadsheet and compute it the formula computes the value accurately. I need to avoid having the user manually open the saved spreadsheet if possible.

Any insight in to this problem would be greatly appreciated.

Here is the code I have tried. It all runs with no error but does not compute the formula.

The formula is already in the spreadsheet an works fine so I'm trying to force the formula to re-compute.

I have tried all these variations. The code runs and executes but does not compute the formula

```
 wb.getCreationHelper().createFormulaEvaluator().evaluateAll();
    /*
    //wb.getCreationHelper().createFormulaEvaluator().evaluateAll();
    System.out.println(wb.getSheet("Rate Report").getRow(16).getCell(0).getStringCellValue());
    System.out.println(wb.getSheet("Rate Report").getRow(16).getCell(1).getNumericCellValue());
    FormulaEvaluator evaluator = wb.getCreationHelper().createFormulaEvaluator();

    //String wbsheets[] = {"Original","Main_DB","Parameters","Translator","Workers Comp.","Rate Report","Notes Fields"};
    String wbsheets[] = {"Notes Fields","Translator","Parameters","Rate Report"};
    for(String sheetName : wbsheets) {
    Sheet sheet = wb.getSheet(sheetName);
    System.out.println("processing sheet: " + sheet.getSheetName());
    for(Row r : sheet) {
    for(Cell c : r) {
    if(c.getCellType() == Cell.CELL_TYPE_FORMULA) {
    System.out.println("Recalcing: "+r.getRowNum()+c.getColumnIndex() + "in "+ sheet.getSheetName());
    evaluator.evaluateFormulaCell(c);    
    }
    }
    }
    }

XSSFFormulaEvaluator.evaluateAllFormulaCells((XSSFWorkbook) wb); 
```

# tsql - How do I select the max date from a union of two tables?

> ID：12944163
> 
> 赞同：0
> 
> 时间：2012-10-17T22:04:57.583
> 
> 标签：tsql

```
SELECT TOP 1 * FROM 
(
    select max(updatedtimestamp) from db1.dbo.policyrepresentationcache with(nolock)
    UNION
    select max(updatedtimestamp) from db2.dbo.policyrepresentationcache with(nolock)
    ) 
ORDER BY updatedtimestamp 
```

I'm running into syntax errors here and im not sure how to set it up.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:23:12.900

您只是缺少联合生成的表的别名。我已将其别名为**以下**。

```
SELECT TOP 1 a.updatedtimestamp FROM
(
     select max(updatedtimestamp) as updatedtimestamp  
     from db1.dbo.policyrepresentationcache with(nolock)
     UNION
     select max(updatedtimestamp) 
     from db2.dbo.policyrepresentationcache with(nolock)
) a
ORDER BY a.updatedtimestamp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:25:33.203

```
SELECT TOP 1 Temp.* FROM 
(
    select max(updatedtimestamp) from db1.dbo.policyrepresentationcache with(nolock)
    UNION
    select max(updatedtimestamp) from db2.dbo.policyrepresentationcache with(nolock)
    ) AS Temp
ORDER BY Temp.updatedtimestamp 
```

# html - img float:left - margin elements on the right

> ID：12944164
> 
> 赞同：0
> 
> 时间：2012-10-17T22:05:02.190
> 
> 标签：html, css

As you can see in this example [http://jsfiddle.net/PCcj8/](http://jsfiddle.net/PCcj8/) I'd like to add some margin to my unordered list. However, I'm not able to move that list because of that img float. How can I achieve it? Please consider there can be different images of different widths.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:19:45.737

`<ul>`将您的标签包装在这样的`<span>`标签`<span>`标签中：

```
<span>
<ul>
    <li>test</li>
    <li>test</li>
</ul>
</span> 
```

然后像这样设置跨度：

```
span{
    display: inline-block;
    margin-left: 20px;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:20:05.337

该 UL 的新样式定义：

ul {边距：0 0 0 -5px; 显示：内联块；}

它会为订单项留下一点缩进，它会与您可能放在一边的任何图像一起移动。

这是一个分叉的小提琴：[在此处输入链接描述](http://jsfiddle.net/99a2L/2/)

# java - Sudoku program failing to compile

> ID：12944166
> 
> 赞同：-7
> 
> 时间：2012-10-17T22:05:26.133
> 
> 标签：java

I am working on to build a Sudoku programm. when i compile, i have many errors but i can't see the actual what error were they.

```
 if (b == true);
    ^
bchimedochir_Sudoku1.java:184: error: <identifier> expected
    if (b == true);
         ^
bchimedochir_Sudoku1.java:184: error: ';' expected
    if (b == true);
            ^
bchimedochir_Sudoku1.java:184: error: illegal start of type
    if (b == true);
                 ^
bchimedochir_Sudoku1.java:184: error: <identifier> expected
    if (b == true);
                  ^
bchimedochir_Sudoku1.java:184: error: ';' expected
    if (b == true);
                   ^
bchimedochir_Sudoku1.java:186: error: illegal start of type
    System.out.println("Congratulation !\n");
          ^
bchimedochir_Sudoku1.java:186: error: ';' expected
    System.out.println("Congratulation !\n");
              ^
bchimedochir_Sudoku1.java:186: error: invalid method declaration; return type required
    System.out.println("Congratulation !\n");
               ^
bchimedochir_Sudoku1.java:186: error: illegal start of type
    System.out.println("Congratulation !\n");
                       ^
bchimedochir_Sudoku1.java:187: error: <identifier> expected
    System.out.println("This Sudoku is valid.\n");
                      ^
bchimedochir_Sudoku1.java:187: error: illegal start of type
    System.out.println("This Sudoku is valid.\n");
                       ^
bchimedochir_Sudoku1.java:188: error: illegal start of type
    else
    ^
bchimedochir_Sudoku1.java:188: error: ';' expected
    else
        ^
bchimedochir_Sudoku1.java:190: error: illegal start of type
        System.out.println("Sorry !\n");
              ^
bchimedochir_Sudoku1.java:190: error: ';' expected
        System.out.println("Sorry !\n");
                  ^
bchimedochir_Sudoku1.java:190: error: invalid method declaration; return type required
        System.out.println("Sorry !\n");
                   ^
bchimedochir_Sudoku1.java:190: error: illegal start of type
        System.out.println("Sorry !\n");
                           ^
bchimedochir_Sudoku1.java:191: error: <identifier> expected
    System.out.println("This Sudoku is invalid.\n");
                      ^
bchimedochir_Sudoku1.java:191: error: illegal start of type
    System.out.println("This Sudoku is invalid.\n");
                       ^
20 errors
bchimedochir@loki:~/F12_1400-005_prog7$ vim bchimedochir_Sudoku1.java
bchimedochir@loki:~/F12_1400-005_prog7$ javac bchimedochir_Sudoku1.java
bchimedochir_Sudoku1.java:184: error: illegal start of type
    if (b == true);
    ^
bchimedochir_Sudoku1.java:184: error: <identifier> expected
    if (b == true);
         ^
bchimedochir_Sudoku1.java:184: error: ';' expected
    if (b == true);
            ^
bchimedochir_Sudoku1.java:184: error: illegal start of type
    if (b == true);
                 ^
bchimedochir_Sudoku1.java:184: error: <identifier> expected
    if (b == true);
                  ^
bchimedochir_Sudoku1.java:184: error: ';' expected
    if (b == true);
                   ^
bchimedochir_Sudoku1.java:185: error: illegal start of type
    System.out.print("Congratulation !\n");
          ^
bchimedochir_Sudoku1.java:185: error: ';' expected
    System.out.print("Congratulation !\n");
              ^
bchimedochir_Sudoku1.java:185: error: invalid method declaration; return type required
    System.out.print("Congratulation !\n");
               ^
bchimedochir_Sudoku1.java:185: error: illegal start of type
    System.out.print("Congratulation !\n");
                     ^
bchimedochir_Sudoku1.java:186: error: <identifier> expected
    System.out.print("This Sudoku is valid.\n");
                    ^
bchimedochir_Sudoku1.java:186: error: illegal start of type
    System.out.print("This Sudoku is valid.\n");
                     ^
bchimedochir_Sudoku1.java:187: error: illegal start of type
    else
    ^
bchimedochir_Sudoku1.java:187: error: ';' expected
    else
        ^
bchimedochir_Sudoku1.java:188: error: illegal start of type
        System.out.print("Sorry !\n");
              ^
bchimedochir_Sudoku1.java:188: error: ';' expected
        System.out.print("Sorry !\n");
                  ^
bchimedochir_Sudoku1.java:188: error: invalid method declaration; return type required
        System.out.print("Sorry !\n");
                   ^
bchimedochir_Sudoku1.java:188: error: illegal start of type
        System.out.print("Sorry !\n");
                         ^
bchimedochir_Sudoku1.java:189: error: <identifier> expected
    System.out.print("This Sudoku is invalid.\n");
                    ^
bchimedochir_Sudoku1.java:189: error: illegal start of type
    System.out.print("This Sudoku is invalid.\n"); 
```

Here is my code.

```
import java.util.Scanner;

public class bchimedochir_Sudoku 
{
public static void main(String args[])

    {   
Scanner input = new Scanner(System.in);

    int r1c1;
    int r1c2;
    int r1c3;
    int r1c4;
    int r2c1;
    int r2c2;
    int r2c3;
    int r2c4;
    int r3c1;
    int r3c2;
    int r3c3;
    int r3c4;
    int r4c1;
    int r4c2;
    int r4c3;
    int r4c4;
    int total;
    boolean b = true;

        System.out.printf("Welcome to Sudoku Checker v1.0!\n");
        System.out.printf("This program checks simple, small, 4X4 Sudoku grids for\n");
        System.out.printf("correctness. Each column, row and 2X2 region contains the numbers\n");
        System.out.printf("1 through 4 only once.\n\n");
        System.out.printf("To check your Sudoku, enter your board one row at a time, with\n");
        System.out.printf("Each digit separated by a space. Hit enter at the end of the row.\n\n");

        System.out.print("Enter Row 1 :");
        r1c1 = input.nextInt();
        r1c2 = input.nextInt();
        r1c3 = input.nextInt();
        r1c4 = input.nextInt();

        System.out.print("Enter Row 2 :");
        r2c1 = input.nextInt();
        r2c2 = input.nextInt();
        r2c3 = input.nextInt();
        r2c4 = input.nextInt();

        System.out.print("Enter Row 3 :");
        r3c1 = input.nextInt();
        r3c2 = input.nextInt();
        r3c3 = input.nextInt();
        r3c4 = input.nextInt();

        System.out.print("Enter Row 4 :");
        r4c1 = input.nextInt();
        r4c2 = input.nextInt();
        r4c3 = input.nextInt();
        r4c4 = input.nextInt();

        System.out.print("Thank you. Now Checking ...\n\n");

        sum = r1c1 + r1c2 + r1c3 + r1c4;
        if (total == sum) 
        {
          System.out.print("ROW-1:PASS\n");
        } else 
        {
            b = false;
            System.out.print("ROW-1:FAILED\n");
        }

        sum = r2c1 + r2c2 + r2c3 + r2c4;
        if (total == sum) 
        {
            System.out.print("ROW-2:PASS\n");
        } else 
        {
            b = false;
            System.out.print("ROW-2:FAILED\n");
        }

        sum = r3c1 + r3c2 + r3c3 + r3c4;
        if (total == sum) 
        {
            System.out.print("ROW-3:PASS\n");
        } else 
        {
            b = false;
            System.out.print("ROW-3:FAILED\n");
        }

        sum = r4c1 + r4c2 + r4c3 + r4c4;
        if (total == sum) 
        {
            System.out.print("ROW-4:PASS\n");
        } else 
        {
            b = false;
            System.out.print("ROW-4:FAILED\n");
        }

        sum = r1c1 + r2c1 + r3c1 + r4c1;
        if (total == sum) 
        {
            System.out.print("COL-1:PASS\n");
        } else 
        {
            b = false;
            System.out.print("COL-1:FAILED\n");
        }

        sum = r1c2 + r2c2 + r3c2 + r4c2;
        if (total == sum) 
        {
            System.out.print("COL-2:PASS\n");
        } else 
        {
            b = false;
            System.out.print("COL-2:FAILED\n");
        }

        sum = r1c3 + r2c3 + r3c3 + r4c3;
        if (total == sum) 
        {
            System.out.print("COL-3:PASS\n");
        } else 
        {
            b = false;
            System.out.print("COL-3:FAILED\n");
        }

        sum = r1c4 + r2c4 + r3c4 + r4c4;
        if (total == sum) 
        {
            System.out.print("COL-4:PASS\n");
        } else 
        {
            b = false;
            System.out.print("COL-4:FAILED\n");
        }

        sum = r1c1 + r1c2 + r2c1 + r2c2;
        if (total == sum) 
        {
            System.out.print("REG-1:PASS\n");
        } else 
        {
            b = false;
            System.out.print("REG-1:FAILED\n");
        }

        sum = r3c1 + r3c2 + r4c1 + r4c2;
        if (total == sum) 
        {
            System.out.print("REG-2:PASS\n");
        } else 
        {
            b = false;
            System.out.print("REG-2:FAILED\n");
        }

        sum = r1c3 + r1c4 + r2c3 + r2c4;
        if (total == sum) 
        {
            System.out.print("REG-3:PASS\n");
        } else 
        {
            b = false;
            System.out.printf("REG-3:PASS %d\n",sum);
            System.out.print("REG-3:FAILED\n");
        }

        sum = r3c3 + r3c4 + r4c3 + r4c4;
        if (total == sum) 
        {
            System.out.print("REG-4:PASS\n");
        } else 
        {
            b = false;
            System.out.print("REG-4:FAILED\n");
        }
    }
       if (b == true); 

            System.out.println("Congratulation !\n");
            System.out.println("This Sudoku is valid.\n");
         else 

            System.out.println("Sorry !\n");
            System.out.println("This Sudoku is invalid.\n");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T22:10:09.613

此部分的所有内容都已损坏：

```
if (b == true); 

    System.out.println("Congratulation !\n");
    System.out.println("This Sudoku is valid.\n");
 else 

    System.out.println("Sorry !\n");
    System.out.println("This Sudoku is invalid.\n"); 
```

它分为三个方面：

*   这一切都在`main`方法之外，因为你在它之前有一个额外的右大括号
*   它在语句的末尾有一个分号，在这种情况下`if`相当于`{}`
*   您的两组语句不像其他代码那样“支撑”

此外，与`true`显式比较是丑陋的，变量名也毫无意义——而且它位于一个*超长*方法`b`的末尾。但是，要使其*编译*，您可能只需将本节之前的右大括号移动到它之后，并将该部分更改为：

 **```
if (b)
{
    System.out.println("Congratulation !\n");
    System.out.println("This Sudoku is valid.\n");
}
else 
{
    System.out.println("Sorry !\n");
    System.out.println("This Sudoku is invalid.\n");
} 
```

...但不要只是解决这个问题。重新审视你的整个设计。没有人愿意阅读 188 行的方法。您还应该考虑使用数组而不是使用 16 个单独的变量...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T22:07:45.763

It looks like you're closing your `main` method prematurely: look at the first line that the compiler complains about: `if (b == true)`. The closing brace before that line is closing your `main` method, leaving the rest of the code as bare code in the class, i.e. *outside* a method, which isn't allowed.

The same line is prematurely terminated by a semicolon:

```
if (b == true); // <- remove the semicolon 
```

And the same `if/else` statement needs some compound statement blocks:

```
if (b == true)
{  // add the block
   System.out.println("Congratulation !\n");
   System.out.println("This Sudoku is valid.\n");
}
else 
{  // ditto here
   System.out.println("Sorry !\n");
   System.out.println("This Sudoku is invalid.\n");
} 
```

Finally, you don't need to compare against `true` and `false`: `if (b)` is fine for this test; `if (b == true)` will still work, but it's redundant.**

# ruby-on-rails - Will switching on two-factor authentication stop my Heroku app accessing the Gmail server?

> ID：12944167
> 
> 赞同：1
> 
> 时间：2012-10-17T22:05:30.740
> 
> 标签：ruby-on-rails, authentication, gmail

In the past, I've sent email from Heroku apps using the Gmail server, like this:

```
config.action_mailer.deconfig.action_mailer.delivery_method = :smtp
config.action_mailer.smtp_settings = {
  :address              => "smtp.gmail.com",
  :port                 => 587,
  :domain               => 'derp'
  :user_name            => 'derp.bot',
  :password             => 'derp42069',
  :authentication       => 'plain',
  :enable_starttls_auto => true  } 
```

Since then I've enabled two-factor authentication for most of my domains. Before I do the same for my latest domain, will in wreck havoc with Rails code like you see above?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T04:30:47.243

[如果更改确实破坏了您的代码，您可以通过使用特定于应用程序的密码](https://support.google.com/accounts/answer/185833?hl=en)来解决它。

# ios - Xcode 4.5.1 get stuck when archiving

> ID：12944175
> 
> 赞同：3
> 
> 时间：2012-10-17T22:05:59.620
> 
> 标签：ios, iphone, xcode, ios5, ios6

I just upgraded my xcode to version 4.5.1\.
Everything worked fine before but now, when I Archive the project, **xcode get stuck/hanging** and never finishes the archiving.
In the status on top, the text says:

> Compiling 10 of 10 source files...

Nothing happens after that. It is just stuck.
I can still compile and build the code (without archiving) and everything runs just fine in the simulator.

I have reinstalled xcode. The issue still happens after that.
Any suggestion will be appriciated.

**More info:**
I've pinpointed the problem to a specific line of code:
`CGRect tmpFrame3 = seeDetailsButton.frame;`
I don't see any problem with this line...
Why would it work fine when building and running in the simulator but fail when archiving???

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-20T12:26:05.063

我弄清楚这里发生了什么。
首先，它与归档过程本身无关，而与*Release*模式下的构建有关。
我在存档期间遇到问题的原因是因为它是在发布模式下构建的。

关于问题本身： xcode 4.5.1 中
似乎存在某种**Apple 编译器错误**。
我正在使用 Apple LLVM 编译器 4.1。在编译期间，它具有不同的优化级别。
在调试中 - 优化设置为“无”并关闭。在发行版中，它设置为“最快、最小 [-Os]”。当我在发布模式下关闭优化（将其设置为“无”）时 - 问题不会发生。

更多信息：
在挖掘了我的代码并试图找出在优化过程中会导致编译器错误的原因之后，我发现我有以下内容：

```
__weak ProfileButton *tmp = myButton; 
```

其中 ProfileButton 只是一个继承自 UIButton 的常规按钮。
当我删除`__weak`一切工作正常。即使我将编译器优化设置为“最快、最小 [-Os]”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T08:11:32.513

最近遇到了同样的问题，Xcode 在编译期间挂在最终文件上。以与上述问题相同的方式，将发布的优化级别设置为无（[-O0] 以匹配调试模式）将允许存档成功运行。

然而，对于我们的代码，特定的错误与一个正在捕获自身的块相关联。根据[Apple 的指导方针](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW16)：

> “如果你需要在一个块中捕获自我，例如在定义一个回调块时，考虑内存管理的影响是很重要的。
> 
> 块保持对任何捕获对象的强引用，包括自身，这意味着很容易以强引用循环结束......”

因此，如果适用，请务必检查您的代码，并遵循 Apple 的最佳实践来捕获对 self 的弱引用（[文档中的示例](https://developer.apple.com/library/ios/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/WorkingwithBlocks/WorkingwithBlocks.html#//apple_ref/doc/uid/TP40011210-CH8-SW16)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-15T22:44:11.450

就我而言，我创建了一个循环子类

这就像是

```
@interface BaseTableViewController : PaymentTableViewController 
```

和

```
@interface PaymentTabelViewController : BaseTableViewController 
```

我所做的是重新命名最后一个子类，所以它现在看起来像这样：

```
@interface TopTableViewController : PaymentTableViewController 
```

和

```
@interface PaymentTableViewController : BaseTableViewController 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-01T19:34:38.090

在我的情况下，当一个源文件包含一个非常大的数组的声明时，问题就出现了，如下所示：

```
NSArray<NSArray<NSNumber *> *> *points =
    @[
        @[@38.576732f, @-90.230682f, @1495320246], // 1 item
        ...
        @[@37.478034f, @-89.524851f, @1495336147] // 3000 item
    ]; 
```

大约有 3k 个项目。将源代码行拆分成小行并没有帮助。

通过将项目放在 CSV 文件中并在运行时对其进行解析来修复它。

另一种方法可能是拆分成更小的数组并在运行时连接。

# ruby-on-rails-3 - Rails ERB -- get the generated HTML content to a variable I can access in a controller

> ID：12944183
> 
> 赞同：2
> 
> 时间：2012-10-17T22:07:05.233
> 
> 标签：ruby-on-rails-3, render, erb

I am doing an online contract agreement which is generated dynamically based on the current state of our contract language (stored in an ERB partial).

When the user clicks "I Agree" we save the variable data, but I also want to store the contents of the rendered partial (html fragment) in the database.

I tried using `ActionView::Helpers::CaptureHelper.capture` -- wrapping the whole partial in a block and rendering at the end, like

```
<% @saved_output = capture do %>
...
The rest of the erb with instance variable <%= @my_class.name %> and so on
...
<% end %>
<%= @saved_output %>
<% logger.debug "Rendered output is: #{@saved_output}" %> 
```

And this produced the same result and also sent the correct text to the log. But it appears to go out of scope -- even if I declare `@saved_output = nil` prior to render it's `nil` when I end the block.

I tried using `content_for` as well ... which makes some sense to me, but ... huh, just not getting it. Any helpful pointers appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:43:48.187

`render_to_string`您在创建记录时是否尝试过控制器？这可能允许您继续并“快照”页面。

# compilation - 启用 F5 功能键以重新加载或重新编译 OpenLaszlo SWF 应用程序

> ID：12944191
> 
> 赞同：1
> 
> 时间：2012-10-17T22:08:11.500
> 
> 标签：compilation, browser, openlaszlo, lzx

Flash Player 的烦恼之一是播放器——一旦它获得焦点——会阻止某些关键事件被传递到浏览器。特别是用于重新加载页面或重新编译应用程序的 F5 功能键。因此，在按 F5 之前，您必须在 SWF 影片区域之外单击浏览器才能重新获得焦点。

F5 键如何仍然与 SWF 运行时应用程序一起使用来重新编译和重新加载 SWF 运行时应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:29:33.420

对于所有基于 ActionScript 3 的运行时（SWF10、SWF11，...），以下代码将启用通过按 F5 重新加载 OpenLaszlo 应用程序。

```
<canvas>

    <passthrough when="$as3">
       import flash.events.Event;
    </passthrough>

    <handler name="oninit">
      if ($as3) {
        var sprite = this.getDisplayObject();
        sprite.addEventListener(Event.ACTIVATE, onactivate)
        sprite.addEventListener(Event.DEACTIVATE, ondeactivate);
      }
    </handler>

    <method name="onactivate" args="e=null">
      Debug.info('OpenLaszlo app is active, press F5 to reload');
    </method>

    <method name="ondeactivate" args="e=null">
      Debug.info('OpenLaszlo SWF is inactive');
    </method>

    <switch><when property="$debug">
        <!-- Reload SWF app when F5 is pressed -->
        <command key="['f5']"
                 onselect="lz.Browser.callJS('document.location.reload(true)')"
                 active="$once{$as3}" />
    </when></switch>

</canvas> 
```

首先，我正在跟踪 Flash 电影的`Event.ACTIVATE`和`Event.DEACTIVATE`事件。`Event.ACTIVATE`当 Flash 影片获得焦点时，将发送该事件。要通过按 F5 启用重新加载，需要`<command />`添加一个标签 - 但仅当为应用程序启用了 $debug 时。

```
<switch><when property="$debug">
    <!-- Reload SWF app when F5 is pressed -->
    <command key="['f5']"
             onselect="lz.Browser.callJS('document.location.reload(true)')"
             active="$once{$as3}" />
</when></switch> 
```

`lz.Browser`onselect 处理程序通过使用对象触发重新加载当前页面。键盘命令仅对 ActionScript 3 运行时有效。现在，当您在 SWF 运行时测试或开发应用程序时，只需按 F5 即可重新加载，就像在 DHTML 运行时一样。

# shell - 为变量分配动态值

> ID：12944193
> 
> 赞同：1
> 
> 时间：2012-10-17T22:08:20.173
> 
> 标签：shell, variables, dash-shell, dynamic-values

如何为变量分配*动态值*？我知道的最简单的方法是使用*函数*。例如

```
fn(){
    VAR=$VAL
}
VAL=value
fn
echo $VAR 
```

将输出

```
value 
```

但我想要一些更简单的东西，比如

```
VAR=$VAL
VAL=value
echo $VAR 
```

输出

```
value 
```

我应该使用什么命令？最好与*dash*兼容。

谢谢！

**更新：**删除了与*dash相关的**#!/bin/sh*。感谢*“Ignacio Vazquez-Abrams”*的解释！

 ****更新 2：**为我的脚本添加源代码以更好地了解情况。

```
INPUT=`dpkg -l|grep ^rc|cut -d' ' -f3`
filter(){
    echo *$A*
}
for A in $INPUT;do find ~ -iname `filter`|grep ^$HOME/\\.|grep -iz --color $A;done 
```

此脚本应有助于查找已删除软件包的剩余配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:36:00.657

好的，如果功能不好，那么调用 eval 可以吗？

```
export VAR='echo $VAL'
VAL=10
eval $VAR 
```

这将显示

```
10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:20:31.773

一个设置值的简单函数怎么样？

```
# export is needed so f() can use it.
export VAR

f() {
    VAR=$@
}

f 10
echo $VAR
f 20
echo $VAR 
```

上面的代码将显示：

```
10
20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:20:41.053

如果我了解您的需求，您想要一个*间接*的，所以请尝试以下 shell 代码（用 测试`dash`）：

```
var=foo
x=var
eval $x=another_value
echo $var 
```

**输出**：

```
another_value 
```

**最后**：

每次需要修改`var`，都需要运行`eval $x=foobar`**

# javascript - 提交 Javascript 表单值

> ID：12944198
> 
> 赞同：2
> 
> 时间：2012-10-17T22:08:45.090
> 
> 标签：javascript, jquery-mobile, jquery-events

我有一个移动测验，我将 10 个表单问题加载到隐藏的 div 中，在回答每个问题后，我淡化并隐藏问题并取消隐藏下一个问题，在他们完成 10 个问题后，我如何让它发布实际数据到在服务器上等待的脚本 ...form method=post action=process_quiz.php .. 我不确定在哪里/如何添加最终提交按钮（显然在最后一个 div 中），但可以使用用于发布表单数据的 Javascript 代码。

```
$(document).ready(function() 
{ 

        $('.btnNext').click(function()
        {

                $(this).parents('.questionContainer').fadeOut(500, function()
                {
                    $(this).next().fadeIn(500);
                });

        }); 

            $('.btnPrev').click(function()
            {
                $(this).parents('.questionContainer').fadeOut(500, function()
                {
                    $(this).prev().fadeIn(500);
                });

            });     
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:16:04.210

```
$("#mySubmit").click(function(){
    $("#myForm").submit();
}); 
```

只要表单定义了以下属性：

```
<form action="process_quiz.php" method="post"> 
```

jQuery form .submit() 函数的文档位于：http: [//api.jquery.com/submit/](http://api.jquery.com/submit/)

按钮的位置并不重要，或者它是否甚至是带有上述代码的提交按钮。如果它是位于表单 DOM 元素中的实际提交按钮，那么它会在单击时自动提交表单，而无需您指定它。

# javascript - D3.js 用新数据更新样条

> ID：12944202
> 
> 赞同：-3
> 
> 时间：2012-10-17T22:09:24.953
> 
> 标签：javascript, d3.js

我正在尝试使用新数据更新样条曲线，但在使用 D3.js 库时遇到了问题。

这是我的小提琴：http: [//jsfiddle.net/2N2rt/22/](http://jsfiddle.net/2N2rt/22/)

当用户单击按钮时，目标是让每个样条曲线根据新数据进行动画处理。我觉得我真的很亲近。我已经阅读了“用联接思考”的文章，并用它来提出上面的小提琴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:19:45.593

在您的小提琴中，您在更改数据时将*d*属性应用于错误的元素。在*输入*组中，您添加一个新组（类人员），然后向该组添加一个线元素。因此，当数据发生变化时，您需要更新组内的行，而不是组本身。要修复它，请使用

```
people.selectAll(".line").transition() 
```

代替

```
people.transition() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:38:30.527

这是一个工作示例[http://jsfiddle.net/3UkKW/4/](http://jsfiddle.net/3UkKW/4/)。正如逻辑黑猩猩回答的那样，您选择了错误的元素进行更新。

```
var draw = function() {

    var people = svg.selectAll(".line")
        .data(data, function(d) { return d.name; });

    people
        .transition()
        .duration(1000)
        .attr("d", function(d) { return line(d.values);});

    people.enter()
        .append("path")
        .attr("class", "line")
        .attr("d", function(d) { return line(d.values);})
        .style("stroke", function(d) {return color(d.name);});

    people.exit()
        .transition()
        .duration(100)
        .remove()
} 
```

# c# - WCF Oracle 应用程序的最佳模板是什么？

> ID：12944204
> 
> 赞同：0
> 
> 时间：2012-10-17T22:09:28.367
> 
> 标签：c#, wcf, oracle, templates, rest

我需要创建一个概念验证应用程序，用于通过 http/a 浏览器（特别是 IE8 和 IE9）查询我们的 Oracle 数据库。

最好的起点是什么 - “WCF REST 服务应用程序”模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:15:18.883

看到这个：如何创建 WCF 服务以从 Oracle 数据库中检索数据：

[http://www.c-sharpcorner.com/UploadFile/anavijai/how-to-create-wcf-service-to-retrieve-data-from-the-oracle-database/](http://www.c-sharpcorner.com/UploadFile/anavijai/how-to-create-wcf-service-to-retrieve-data-from-the-oracle-database/)

# .htaccess - .htaccess - If/Else 根据查询字符串重定向

> ID：12944208
> 
> 赞同：0
> 
> 时间：2012-10-17T22:10:13.370
> 
> 标签：.htaccess, mod-rewrite, redirect

对于这种情况，设置 .htaccess 似乎很困难。对于约会网站，我们有这种情况：

```
We assume john is logged in:

domain.com/john //this works no problem

domain.com/?askout=yes&when=later //this doesn't work, if john is logged in and pastes 
                                    this url, it automatically redirects to domain.com/john
                                    instead, htaccess should see the ? and know it's
                                    not a valid user. It should keep the entire query,
                                    and redirect to /profiles.php?askout=yes&when=later 
```

这是.htaccess：

```
RewriteRule ^(\w+)/?$ ./profiles.php?username=$1 
```

基本上，我需要让 .htaccess 立即知道？表示不使用上述重写规则。知道如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:25:00.193

尝试：

```
RewriteCond %{QUERY_STRING} askout=yes&when=later
RewriteRule ^ /profiles.php?askout=yes&when=later [L] 
```

此规则需要在您重定向到目标的规则*之前。*`?username`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:17:25.500

我认为您需要一个 RewriteCond：[http](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html) ://httpd.apache.org/docs/2.2/mod/mod_rewrite.html ，您可以使用它进行各种检查

# jquery-ui - 在 jquery 选项卡隐藏期间调用函数

> ID：12944209
> 
> 赞同：0
> 
> 时间：2012-10-17T22:10:28.783
> 
> 标签：jquery-ui, jquery-ui-tabs

对于 jqueryUI 的选项卡，我很熟悉向 show 事件添加一个函数，如[本问题](https://stackoverflow.com/questions/6228278/jquery-ui-tabs-show-all-tab)中所述。但是，当标签被卸载或失去焦点时，有没有办法添加功能？我看到有一个隐藏功能，但是当我从一个选项卡（到另一个选项卡）单击时不会调用我的函数。

这是我的代码：

```
$("#myTabs").tabs({ 
    selected: tab, 
    show: 
        function (event, ui) { 
            //some code that works
        },
    hide:
        function(event, ui) {
            //some code that never gets called
        }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:44:00.707

我没有尝试在隐藏功能期间完成某些事情，而是在我的“选择”中添加了一个自定义功能。您可以在其他问题上阅读有关它的更多信息。

[激活前显示确认的 Jquery 选项卡](https://stackoverflow.com/questions/12959814/jquery-tabs-showing-a-confirmation-before-activate)

# wcf - 在 http:// 没有端点监听

> ID：12944210
> 
> 赞同：2
> 
> 时间：2012-10-17T22:10:38.633
> 
> 标签：wcf, .net-4.0

我有一个使用 WCF 服务的 Windows 窗体应用程序。我们的应用程序使用我们的 WCF 服务之一向运行我们客户端的特定用户发送消息，因此我们的回调“http:”字符串在每次向用户发送消息时动态构建。它包括当前用户登录的服务器 IP 地址和端口 (126.221.97.105:701)、用户 ID (56281) 和客户端 GUID (7392d27a-e4a0-42e2-89a3-adc332e28934)。因此，典型的回调“http:”字符串如下所示：

```
http://xxx.xxx.xx.xxx:701/CmesCns/CALLBACK/56281/7392d27a-e4a0-42e2-89a3-adc332e28934 
```

我们的客户端上有一个 http 命名空间 (http://+:701/)，并且组“Everyone”与该命名空间相关联，并检查了所有访问权限（GenericAll、GenericExecute、GenericRead 和 GenericWrite）。我们使用“http 命名空间”来创建我们的命名空间。

我们的应用程序已经投入生产（在 Windows Server 2003 上）几年了，一切正常。

我们最近将我们的应用程序转换为在 Windows 2008 服务器环境中运行。我们每个项目中的“目标框架”都设置为“.NET Framework 4.0”。我们的应用程序在我的 Windows 7 开发人员工作站上运行良好。也就是说，我能够从我们的 WCF 服务接收消息，但是当我将我们的应用程序放到我们的 Windows 2008 服务器上并尝试运行该应用程序时，我收到以下错误消息：

“在 [http://xxx.xxx.xx.xxx:701/CmesCns/CALLBACK/56281/7392d27a-e4a0-42e2-89a3-adc332e28934](http://xxx.xxx.xx.xxx:701/CmesCns/CALLBACK/56281/7392d27a-e4a0-42e2-89a3-adc332e28934) 上没有可以接受消息的端点监听。这通常是由不正确的地址引起的或 SOAP 操作。有关更多详细信息，请参阅 InnerException（如果存在）。”</p>

http 命名空间 (http://+:701/) 存在于我的开发人员工作站和我的 Windows 2008 服务器上。“Everyone”组与我的 Windows 7 机器和 Windows 2008 服务器上的命名空间相关联，并且检查了所有访问权限（GenericAll、GenericExecute、GenericRead 和 GenericWrite）。

我们一直在网上寻找答案，但没有发现任何东西。有人知道为什么这可以在我们的 Windows 7 工作站上工作，但不能在我们的 Windows 2008 服务器上工作吗？

任何帮助是极大的赞赏！凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:31:35.083

当您在 IIS 中托管 WCF 服务时，您不会在地址中指定绝对 url。您应该使用 .svc 文件的相对 url。基本 URL 将由托管它的网站确定。

```
 <service name="WebService.Receptor">
<endpoint
    address="/WS.svc"
    binding="wsHttpBinding"
    contract="IMyContract"
 /> 
```

在客户端上，根据您的 IIS 的配置方式，您显然应该指定完整地址：

```
<client>
<endpoint 
    name="Receptor"
    address="http://MyServer:8000/WS.svc"
    binding="wsHttpBinding"
    contract="IMyContract"
/> 
```

这假定您已在 IIS 中配置了一个侦听 8000 端口的站点，并且您已在该站点内托管了您的 WCF 应用程序。

如果它没有帮助，请点击这些链接，希望它会有用。

[堆栈溢出链接](https://stackoverflow.com/questions/1699751/there-was-no-endpoint-listening-at-uri-that-could-accept-the-message-this-is)

[多端点](http://debugmode.net/2010/05/25/multipleendpoint/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T17:17:07.760

通常，此错误是因为服务器上没有与客户端请求匹配的端点（地址、服务或身份验证不同）。但是，就我而言，我遇到了完全相同的错误，这不是由于任何这些原因造成的。

当我在 IIS 上启用跟踪并使用 SvcTraceViewer.exe（包含在 Visual Studio 中）查看 svclog 跟踪时，实际的内部错误是**“超出了最大请求长度”。**

我的客户正在通过该服务上传图像。而且我猜图像太大了。

为了启用跟踪，我将其添加到配置部分：

```
<system.diagnostics>
  <sources>
        <source name="System.ServiceModel" 
                switchValue="All"
                propagateActivity="true">
        <listeners>
           <add name="traceListener" 
               type="System.Diagnostics.XmlWriterTraceListener" 
               initializeData= "c:\log\Traces.svclog" />
        </listeners>
     </source>
  </sources> 
```

为了解决这个错误，我增加了 web config 中的消息请求长度，错误就消失了。

为此，在 web.config 的 system.web 部分中，我添加了以下行：

```
<httpRuntime maxRequestLength="32768" /> 
```

然后我在配置部分中添加了这个部分

```
<system.webServer>
 <security>
  <requestFiltering>
   <requestLimits maxAllowedContentLength="32000000" />
  </requestFiltering>
 </security>
</system.webServer> 
```

因此，我建议您启用跟踪，然后查看跟踪以了解确切的错误。

# linux - 如何重新启动后台php进程？（如何获得 pid）

> ID：12944212
> 
> 赞同：0
> 
> 时间：2012-10-17T22:10:44.710
> 
> 标签：linux, shell, unix, pid, kill-process

我是一名 PHP 开发人员，对 shell 脚本知之甚少......所以我很感激这里的任何帮助。

我有四个需要在服务器后台运行的 php 脚本。我可以很好地启动它们——它们工作得很好——我可以通过查看它们的 PID 来杀死它们。

问题是我需要我的脚本不时终止进程并重新启动它们，因为它们维护着长期存在的 HTTP 请求，这些请求有时会被另一方终止。

但是我不知道如何编写一个命令来找到这些进程并在不手动查找 PID 的情况下杀死它们。

我们将从一个启动命令开始：

```
/usr/local/php5/bin/php -f /home/path/to/php_script.php > /dev/null & 
```

有没有办法“分配”一个PID，所以它总是一样的？或者给这个过程一个名字？我将如何编写新命令？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:14:21.460

不，您不能“分配”进程 PID；相反，您应该像“真正的”守护进程那样做：让您的脚本将自己的 PID 保存在某个文件中，然后在需要终止时从该文件中读取它。

另一种选择是使用像[supervisor](http://supervisord.org/)这样的东西，它以一种非常好的方式为你处理所有这些。

## 更新 - 主管配置

由于我提到了主管，我还在这里发布了一个简短的主管配置文件，应该可以完成这项工作。

```
[program:yourscriptname]
command=/usr/local/php5/bin/php -f /home/path/to/php_script.php 
```

[在这里查看更多配置选项](http://supervisord.org/configuration.html#programx-section)。

然后你可以像这样使用它：

```
# supervisorctl status 
```

显示进程状态。

```
# supervisorctl start yourscriptname 
```

开始你的脚本

```
# supervisorctl stop yourscriptname 
```

停止你的脚本

## 更新 - 真实世界的主管配置示例

首先，确保你的`/etc/supervisor/supervisord.conf`.

```
[include]
files = /etc/supervisor/conf.d/*.conf 
```

如果没有，只需添加这两行并

```
mkdir /etc/supervisor/conf.d/ 
```

然后，为要启动的每个进程创建一个配置文件：

/etc/supervisor/conf.d/script1.conf

```
[program:script1]
command=/usr/local/php5/bin/php -f /home/path/to/php_script.php
stdout_logfile=/var/log/script1.log
stderr_logfile=/var/log/script1-error.log 
```

/etc/supervisor/conf.d/script2.conf

```
[program:script2]
command=/usr/local/php5/bin/php -f /home/path/to/php_script2.php
stdout_logfile=/var/log/script2.log
stderr_logfile=/var/log/script2-error.log 
```

...等等，等等..为您的所有脚本。

（请注意，您*不需要*尾随 & 因为主管将为您处理所有守护进程；事实上，您*不应该*执行在主管内部自我守护进程的程序）。

然后你可以开始他们：

```
supervisorctl start all 
```

或者只是一个类似的东西：

```
supervisorctl start script1 
```

### 从 php 启动主管

当然，您可以使用上面的两个命令启动/停止主管控制的进程，即使是在脚本内部也是如此。

但是请记住，您将需要 root 权限，并且允许例如非常冒险。在服务器上以 root 身份执行命令的网页..

如果是这种情况，我建议您查看有关如何以[普通用户身份运行主管](http://supervisord.org/running.html)的说明（我从未这样做过，但您也应该能够以 www-data 用户身份运行它......）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T22:13:12.677

解决此问题的规范方法是让进程将其 PID 写入已知位置的文件中，然后任何实用程序脚本都可以查找该文件、读取 PID 并操作该进程。向脚本添加一个命令行参数，该参数给出要写入的 PID 文件的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:24:17.937

好的！因此，对于对 shell/bash 什么脚本一无所知的我来说，这一直是一个令人头疼的问题……

@redShadow 的回应本来是完美的，但我的托管服务提供商不会让我访问 /etc/supervisor/ 目录。正如他所说，你必须是 root - 即使使用`sudo`是管理员也不会让我在那里有任何机会......

这是我想出的：

```
kill -9 `ps -ef | grep php | grep -v grep | awk '{print $2}'` 
```

因为我正在执行的唯一类型的命令显示在`top`命令中，因为`php`该命令循环通过正在运行的进程，找到`php`命令及其相应的 PID 并杀死它们！呜呜！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:17:59.087

解决此问题的方法是使用`ps aux`，这将使用调用它们的命令显示所有进程。这当然假定这 4 个脚本是不同的文件，或者可以由调用它们的命令唯一标识。通过一个 grep 管道，你就准备好了`ps aux | grep runningscript.php`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T11:19:25.773

我所做的是让我的脚本检查我命名为“run.txt”的文件。如果不存在，则退出。然后只需重命名该（空）文件，我就可以停止所有脚本。

# emacs - 具有多个目录的 Emacs 和 cscope

> ID：12944214
> 
> 赞同：3
> 
> 时间：2012-10-17T22:10:56.327
> 
> 标签：emacs, cscope

当我的源代码位于多个目录中时，如何在 Emacs 中设置 cscope？

假设我的 C++ 项目有几条路径：

1.  `/path/to/my/code`（和子目录）
2.  `/path/to/other/code`（和子目录）
3.  `/path/to/static/linking/include/files`（和子目录）
4.  `/path/to/static/linking/lib/files`'（和子目录）

我想用来`xcscope`在我的代码和我链接到的库中导航/查找符号。

说明[说](http://linux.die.net/man/1/xcscope)`xcscope.el`我应该首先运行( `C-c s`Cscope->Create list and index) at `/path/to/my/code`，但是我对如何让 cscope 索引其他路径感到困惑。

文档说我应该去其他目录并运行`cscope -b`，但在那之后我应该做什么？

我查看了构建的`cscope.files`文件。`C-c s`我想我应该将我的其他路径添加到这个文件中，但是这个文件包含一个源代码文件列表（**不是**目录）。

我是否必须手动编辑`cscope.files`以添加我想要索引的每个位于项目根目录之外的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T19:57:20.033

文档令人困惑。

我从[http://cscope.sourceforge.net/large_projects.html](http://cscope.sourceforge.net/large_projects.html)得到了一个解决方案。还是很混乱。

cscope.files 被恰当地命名。它不是目录。它是文件，只有文件。这听起来令人生畏。如果您有数百个文件怎么办。然后，您必须将数百行（每个文件一行）写入 cscope.files。可不是闹着玩的。

使用一些脚本使其自动化。例如，在 linux 上，使用 bash 脚本和重定向 (>、>>、|) 运算符从任何和所有目录中选择和过滤文件到 cscope.files。cscope.files 所在的目录呢？如果您不包含这些文件，它只会在您在该源目录中打开您的项目（在 emacs 中，但可能适用于任何 IDE）时找到它们。因此，也包括它们，以便从任何地方轻松打开您的项目。选项“recursive/-R”似乎很明显可以发送到 cscope-in​​dexer。不，没有很多根目录。什么都不做（可能可以用脚本或 elisp 或谁知道做某事）。只需将这些文件（绝对路径）输入 cscope.files。您可能必须确保每个项目只有一个 cscope.files。不要将它们相对于每个目录分开。

请记住，如果您希望 cscope.files 从任何地方指向它，请在文件之前包含 /path/to/each/file/。cscope 不是“智能”，它很愚蠢，它只是指示在哪里寻找，它不知道在哪里寻找“文件名”，不知道它在哪里。您只是要求它调用`locate filename`，当您给它一个单独的文件名时，它无论如何都做不到，而没有特定 cscope.files 所在目录之外的 dir 路径。

我希望有一种在 emacs 中使用 xcscope 的方法，只需添加它将编目和索引的目录，正如 xcscope 文档和 emacs 菜单所建议的那样。但我没有成功地让它以这种方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T14:58:45.057

Wouldn't a soft link (ln -s) work? Worked for me.

# tooltip - 将工具提示的动作与模式窗口的动作结合起来

> ID：12944216
> 
> 赞同：1
> 
> 时间：2012-10-17T22:11:04.633
> 
> 标签：tooltip, qtip, modal-window

我的网站有一个组件是 jQuery。我想使用一个工具提示来引导最终用户完成导航此组件的过程。我试图修改 qtip 插件来做到这一点。将单击一个链接，该链接将显示第一个工具提示，其中包含将用户带到下一个工具提示的链接。我能够找到一个模态窗口，它允许我这样做，但是我无法弄清楚如何让窗口像工具提示一样在特定位置弹出。当下一个窗口打开时，我也无法关闭上一个窗口。

更新：

找到了解决方案。[http://craigsworks.com/projects/qtip2/tutorials/advanced/#stepbystep](http://craigsworks.com/projects/qtip2/tutorials/advanced/#stepbystep)答案一直被埋没！:)

# solr - 如何在内部使用 solr 处理程序？

> ID：12944221
> 
> 赞同：0
> 
> 时间：2012-10-17T22:11:28.953
> 
> 标签：solr, search-engine, solrj

因此，假设我想通过合并两个不同的 morelikethis 处理程序配置的输出来实现自定义 morelikethis（或自动建议）体验。伪代码可能看起来像

```
 class MyMoreLikeThis extends SearchHanlder {
      def process(reqBuilder) {
        val mlt1 = reBuilder.getComponent("/mlt1");
        val mlt2 = reBuilder.getComponent("/mlt2");
        val rb1 = reqBuilder.copy()
        val rb2 = reqBuilder.copy()
        reqBuilder.results = mlt1.process(rb1).getResults ++ mlt1.process(rb2).getResults 
      }
    } 
```

或者我可以使用 solrj API 从内部访问 solr。

我怎样才能做到这一点？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:51:24.167

您可以参考下面的博客文章，其中详细说明了如何从与您正在谈论的问题类似的不同查询中实现合并结果，

*   [自定义搜索处理程序创意#1](http://sujitpal.blogspot.com/2011/02/solr-custom-search-requesthandler.html)
*   [自定义搜索处理程序创意#2](http://sujitpal.blogspot.com/2011/09/multithreaded-proxy-solr-search-handler.html)

该博客由我的一位前同事撰写，他在搜索和信息检索方面拥有多年的专业知识。

# iphone - 为什么我的 UILabel 从 20 亿开始倒数？

> ID：12944225
> 
> 赞同：0
> 
> 时间：2012-10-17T22:12:00.410
> 
> 标签：iphone, objective-c, ios, int, uilabel

我的 iPhone 应用模拟器中有一个`UILabel`。它显示硬币计数，我有一个动作可以增加 1 亿的计数。我希望这个数字继续上升，但由于某种原因，一旦计数达到 20 亿，它就会添加一个减号并开始倒计时，然后重新计数到 20 亿，然后再次倒计时，依此类推。

我希望能够显示更多的数字，例如数万亿等等......有谁知道这是怎么回事以及如何解决它，以便标签数字将继续上升到我想要的高度。

我正在使用 Xcode 和 Interface Builder 并通过模拟器运行。如果这很重要，我会将数字存储在`int`变量中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T22:15:32.290

您将硬币数量存储在 中`int`，这就是问题所在。4 字节`int`不能存储高于**2,147,483,647**的数字。如果将 1 与 2,147,483,647 相加，您将得到 -2,147,483,648，这是可能的最小值`int`。

如果要存储更大的数字，则必须使用 a`long`可以存储介于 -(2^63) 和 2^63−1（或 -9,223,372,036,854,775,808 到 9,223,372,036,854,775,807）之间的数字。

有关其他详细信息，请参阅[此](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T23:09:14.213

发生这种情况是因为，正如@DrummerB 指出的那样，您的`int`变量只有足够的位来存储 to 范围内的整`-2,147,483,647`数值`2,147,483,647`。这被“重置”或“翻转”回负数的原因与计算机如何存储二进制数据有关。

例如，如果您有一个 8 位整数（也称为 a `byte`）可以存储整数值 from `0`to`255`如果它是无符号的（意味着它只能存储正值）和`-127`to`127`如果它是有符号的（意味着它可以存储负数） . 当一个整数达到其最大值时，它在内存中由所有整数表示，正如您在此处看到的无符号值`255`：

`255 = 11111111`

`int`所以 8 位( `byte`) 中可以存储的最大数是`255`。如果添加`1`到该值，您最终会翻转所有`1`值以使它们为零，并且由于存储该值`256`将需要第 9 位，您会完全丢失第 9 位，并且整数值将出现“翻转”到最小值.

现在.. 正如我上面所说的，上面加法的结果产生了 value `256`，但是我们的整数中只有 8 位存储空间，所以最高有效位（第 9 位）丢失了。`|`所以你可以用管道标记你的存储区域来描绘它：

```
 only 8 bits of storage total
            v
 255 = 0|11111111|
+  1 = 0|00000001|
-------------------
 256 = 1|00000000|
       ^
       9th bit is lost 
```

在 an`unsigned int`中也是如此，但是第一位用于确定该值是否为负，因此您获得签名但您丢失 1 位存储空间，导致您只有足够的空间来存储值`0`和`127`1 位用于签名.

现在我们了解了发生了什么，应该注意的是，在撰写本文时，iOS 是一个 32 位操作系统，虽然它*可以*处理更大的整数，但您可能不想到处使用它们，因为它没有针对使用这些值进行优化。

如果您只想增加可以存储在此变量中的值的范围，我建议将其更改为`unsigned int`，这可以使用`NSUInteger`typedef 完成。

# java - MPJ/MPIJava java-MPI 绑定的状态是什么？

> ID：12944226
> 
> 赞同：0
> 
> 时间：2012-10-17T22:12:01.343
> 
> 标签：java, ssh, mpi, daemon, mpj-express

我正在写我的论文，我需要在集群计算机上运行 JVM 软件。我尝试过 MPJ Express，但它似乎有问题，而且由于我在找到工作时无法在计算机之间使用 SSH，因此需要进行大量黑客操作才能使软件运行。过程并不理想。

我研究了 MPIJava，但是，我没有运气编译它，而且它似乎太古老而无法打扰。

最近我发现了 fastmpj.com，它似乎与 MPJ Express 非常接近。这个库还需要通过 SSH 启动守护进程，所以我遇到了与 MPJ Express 相同的问题。

现在 java-MPI 编程的最新技术是什么？是否有任何库或方法允许我使用“mpirun”命令运行 java-mpi 程序，而无需在每个节点上启动守护程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T02:17:33.363

当然，对于 MPI 没有官方的 Java 绑定，但是 OpenMPI 的最新发行版附带[了涵盖 MPI 1.2](http://www.open-mpi.org/faq/?category=java)的 Java 绑定，并且正在进行工作以包括更多最新的开发。目前尚不清楚它们的测试范围有多广，但是您可以使用通常的 mpiexec 类型命令来运行它。

# python - python素数检查的困难

> ID：12944228
> 
> 赞同：4
> 
> 时间：2012-10-17T22:12:04.523
> 
> 标签：python, primes

我一直试图让这段代码工作以将输入数字作为 2 到 49 之间的素数返回，但它所做的只是将大多数数字作为素数返回，即使它们不是......对于练习，我得到了无论如何，3、5 和 7 都是素数，所以请忽略那一点...

```
def prime(a):
if a < 2: return False
if a % 2 == 0: return False
if a == 3 or a == 5 or a == 7: return True
for n in range(3,int(a ** 0.5) + 1): 
    if a % n == 0: return False
    if a % n != 0: return True

a = input("Enter a number between 1 and 49: ")

if prime(a) is False:
    print a, " is not a prime number"

if prime(a) is True:
    print a, " is a prime number" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T22:14:26.360

```
for n in range(3,int(a ** 0.5) + 1): 
    if a % n == 0: return False
    if a % n != 0: return True  # This if condition is not needed 
```

你不需要第二个 if 条件。否则，当数字不能被 的当前值整除时，它将立即返回`n`。但你不希望那样。`n`如果当前不能除您的号码，您需要检查下一个值。

因此，只需删除该 if，并`return True`在循环结束后添加 a ..

所以，**你的`prime()`方法**应该是这样的： -

```
def prime(a):
    if a < 2: return False
    if a % 2 == 0: return False
    if a == 3 or a == 5 or a == 7: return True
    for n in range(3,int(a ** 0.5) + 1): 
        if a % n == 0: return False

    return True 
```

# cookies - 将 Sitecore DMS 访客信息保存给用户

> ID：12944232
> 
> 赞同：1
> 
> 时间：2012-10-17T22:12:53.133
> 
> 标签：cookies, sitecore, sitecore6, sitecore-dms

使用 Sitecore DMS，您可以创建配置文件并根据用户的访问习惯显示特定页面。此信息使用 cookie 存储，因此无论何时用户回来，他们都有相同的访问者资料。但如果他们删除 cookie 或切换浏览器，这些信息就会消失。现在我要做的是将此访问者信息保存给 sitecore 用户，因为他们可以登录并且他们的访问者资料将与他们离开时相同，无论他们身在何处或使用什么浏览器。我一直试图弄清楚这一点，但没有成功。每当我使用用户登录并创建特定配置文件时，该配置文件都会在我注销后立即删除。这对 Sitecore 来说是否可行，因为在不断删除 cookie 时仅拥有基于 cookie 的配置文件似乎很愚蠢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:40:14.603

使用 Sitecore Analytics，您有两个跟踪 cookie，一个用于 Session，另一个用于 GlobalSession（在正常的 asp.net 会话中不会过期）。不幸的是，Sitecore 不跟踪基于 GlobalSession 的配置文件关键分数，而是通过单个 asp.net 会话。整个系统都以此为基础，非常令人失望。'

为了解决这个问题，我使用 OMS 并使用 Reflector 来分解和重​​写一些分析代码以通过全局会话记录。它还需要一些架构更改以及新规则……相当广泛的工作。归根结底，由于数据库的大小和我们对功能数量非常有限的需求，我最终创建了一个表并通过 globalsession 在其中记录了配置文件键值。

据我了解，架构已从 OMS 更改为 DMS，但最重要的一个因素，即数据由会话记录，并没有改变。

关于存储用户的 id，您可以将其与存储的“标签”相关联，我相信，至少在 OMS 中，该标签与 globalsessionid 一起存储。但是，Sitecore 不会更新标签记录，因此您最终会在每个全局会话中获得多条记录。如果您在每个请求中都存储此值，则该表将迅速膨胀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:14:31.657

这有几个原因……其中最重要的是，在许多情况下，您没有登录用户来关联此信息。配置文件数据不存储在 cookie 中......它存储在 Analytics 表中。但它与具有唯一 ID 的 cookie 相关联，一旦删除，该 ID（希望如此！）将不会再次使用。

在此 StackOverflow 答案中提供了有关如何解决此问题的建议[。](https://stackoverflow.com/questions/10627210/what-is-the-best-way-to-join-sitecore-analytics-oms-session-and-global-session)

# applet - 我需要在托管 java 小程序的网络服务器上安装任何类型的 java 吗？

> ID：12944233
> 
> 赞同：1
> 
> 时间：2012-10-17T22:13:05.000
> 
> 标签：applet, webserver, java

托管 java 小程序的网络服务器不一定需要在其上安装 java，对吗？是客户端计算机查看需要安装 java jre 或类似的小程序吗？还是我弄错了？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:14:39.497

不，没有必要在服务器上安装或运行 Java，只要您的 HTML 页面以及 jar 和类文件可通过 Web 服务器获得，客户端将使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:14:44.833

不，只要小程序在其他地方编译

# cluster-computing - LSF (bsub)：如何指定一个“总结”作业在所有其他作业完成后运行？

> ID：12944237
> 
> 赞同：8
> 
> 时间：2012-10-17T22:13:16.070
> 
> 标签：cluster-computing, lsf

**基本问题：**我想将*N*  + 1 个作业提交到 LSF 管理的 Linux 集群，这样在 所有前面的*N*个作业完成之前， ( *N + 1)-st "wrap-up" 作业不会运行。*

 ***额外：** *如果可能的*话，如果我能安排一些事情，这样 ( *N*  + 1)-st ("wrap-up") 作业的第一个参数接收值 0（比如说），那将是*理想的**N*个作业成功终止，否则值为不同于 0 的值。

 **这个问题（或至少标有“基本问题”的部分）比 LSF 似乎旨在处理的问题要*简单*`bsub`得多，所以我很难通过大量的文档`bsub`来找出做我想做的最简单的方法去做。

> `bsub`实现这种安排的最简单的命令是什么？

* * *

更具体地说，我必须替换`???`下面的各种插槽以确保`wrapup`仅在所有`foo`作业完成后执行（理想情况下使用反映`foo`作业结束状态的参数）？

```
bsub -q someq ??? foo 1
bsub -q someq ??? foo 2
bsub -q someq ??? foo 3
bsub -q someq ??? wrapup [???] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-11T16:35:17.690

为了扩展 Michael Closson 的答案，您在这里寻找的是 bsub 的 -w 选项，它允许您提交仅在满足某些依赖条件时才会安排的作业。

最常见的使用条件是其他作业的退出状态，如果您使用 -J 命名每个“foo $i”作业：

```
bsub -q someq -J "job_1" foo 1
bsub -q someq -J "job_2" foo 2
bsub -q someq -J "job_3" foo 3 
```

然后您可以提交另一个取决于这些作业的退出状态的作业，如下所示：

```
bsub -q someq -w "done(job_1) && done(job_2) && done(job_3)" wrapup 
```

这告诉 LSF 仅在名为 job_1、job_2 和 job_3 的作业以 DONE 状态终止时才安排“结束”。您还可以使用作业 ID 代替作业名称，或使用以下表达式指定要测试的特定状态

```
done("job_1")   // termination status is DONE
exit("job_1")   // termination status is EXIT
ended("job_1")  // termination status is EXIT or DONE 
```

并将它们与逻辑运算符 &&、||、！***

# python - 在 rpy2 中处理 Null 返回

> ID：12944250
> 
> 赞同：3
> 
> 时间：2012-10-17T22:14:45.707
> 
> 标签：python, r, rpy2

我正在使用 rpy2 从 python 调用 R 函数。

```
from rpy2.robjects import *
result=r.someFunctioninR()   #someFunctioninR is a R function written by myself
if result==r('as.null()'):
     do something
else:
     do something else 
```

返回的“结果”`someFunctioninR()`可以是 NULL 或其他格式。`result==r('as.null()')`不起作用。当结果为 NULL 时，还有其他方法可以获得 True 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T00:10:20.637

尝试`rpy2.rinterface.NULL`或`robj.r("NULL")`：

```
In [1]: from rpy2 import robjects as robj 
```

创建一个返回 NULL 的 R 函数：

```
In [2]: robj.r("nullfn = function(){NULL}")
Out[2]: <SignatureTranslatedFunction - Python:0x104ea5ef0 / R:0x1058be4a8>

In [3]: result = robj.r.nullfn()

In [4]: print result
NULL

In [5]: print result == robj.rinterface.NULL
True

In [6]: print result == None
False 
```

**编辑**：我刚刚意识到您上面的代码应该按原样工作。我认为您的错误可能是由于 r.someFunctionInR() 的返回类型 - 它是否有可能返回 NULL 值的向量？您是否尝试过打印 的值`result`？如果这不起作用，您可以分享是什么`someFunctionInR()`。

# struts2 - 如何为 struts 2 应用程序创建多个皮肤

> ID：12944255
> 
> 赞同：0
> 
> 时间：2012-10-17T22:15:07.293
> 
> 标签：struts2, struts

正如我在标题中提到的，如何为 struts 2 应用程序创建多个皮肤

我的意思是关于设计网页皮肤，它意味着 css - header - body - footer 等等......

例如，我有一个黑色和白色的基本皮肤，而我有另一个蓝色和白色的皮肤，如何通过上传新皮肤将基本皮肤替换为另一个皮肤？

# java - Java 包和类

> ID：12944257
> 
> 赞同：5
> 
> 时间：2012-10-17T22:15:15.460
> 
> 标签：java, jar, encapsulation

我正在用 Java 构建一个非常简单的库，它将打包在一个 Jar 中。它应该只暴露一个类：World。World 类使用 Block 类的子类，在同一个包（`com.yannbane.a`）中，本身并没有提供很多功能，但需要扩展。我计划创建另一个包，`com.yannbane.a.blocks`它将包含所有块类型（子类）。

因此，目录/包结构应如下所示：

```
com/
    yannbane/
        a/
            World.java
            Block.java

            blocks/
                Brick.java
                Stone.java 
```

但是，为了让 Block 的子类真正扩展 Block 类，我需要创建 Block 类`public`。这破坏了我让 Jar 文件只公开一个类 World 的目标。我还需要公开子类，以便世界可以使用它们。

我怎样才能保留这个包和目录结构，但仍然让我的 Jar 只公开 World 类，而不是其他类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:21:58.850

如果这是一个封装问题，并且您想要向世界公开的只是“World”类，那么未公开的类是否位于同一个包中或者它们是否是同一个包中的内部类都没有关系。

无论如何，您的 API 用户将无法访问它们。我相信封装在这里比你想给你的文件的“逻辑”组织更重要。因为如果您将所有类都放在同一个包中，那么您将不会遇到这些问题，并且您将达到您所寻求的封装级别。也许 Java 告诉您的是，这些类本质上是相关的，您应该将它们全部放在同一个包中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:19:25.827

制作类`public`，但它们的构造函数`protected`。

您仍然在技术上公开这些类 - 其他包知道它们 - 但没有其他包可以实例化这些对象。

即使子类与(和)`Block`位于不同的包中，它们也将能够调用受保护的父构造函数，因为可以从同一个包或继承对象访问成员。`Block``com.yannbane.a``com.yannbane.blocks``protected`

# javascript - 超时后无法更改 HTML

> ID：12944265
> 
> 赞同：0
> 
> 时间：2012-10-17T22:16:03.550
> 
> 标签：javascript, jquery

出于某种原因，我无法在 javascript 超时后更改 HTML。这是我正在使用的代码：

`setTimeout("$(\"#display p\").html(newDescription);", 250);`

这有什么问题吗？如果我删除超时，脚本就可以完美运行。这是那个版本：

`$("#display p").html(newDescription);`

如果这有什么不同，我正在运行 Chrome 22

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T22:16:58.750

是的，第一个参数应该是函数。

```
var newDescription = 'The Description';
setTimeout(function(){
  $("#display p").html(newDescription);
}, 250); 
```

或者

```
var newDescription = 'The Description',
    myfunc = function(){
       $("#display p").html(newDescription);
    };

setTimeout(myFunc, 250); 
```

此外`newDescription`，必须在您的函数可访问的范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T22:20:46.853

将字符串传递给 setTimeout 时，将在**全局范围内**评估代码。很可能，`newDescription`是一个*局部变量*，因此在 250 毫秒超时后评估代码时不可用。

您永远不应该将字符串传递给 setTimeout()，原因与您不应该使用 eval() 的原因相同。通过传递函数，您可以保留作用域变量并获得更好的性能，因为 JavaScript 引擎可以优化您的函数（而无法优化字符串参数中的代码）。

```
var newDescription = "My fancy new description";
setTimeout(function(){
    $("#display p").html(newDescription);
}, 250); 
```

# ruby - 如何检查或使用类下的所有类？

> ID：12944268
> 
> 赞同：5
> 
> 时间：2012-10-17T22:16:37.897
> 
> 标签：ruby

> **可能重复：**
> [在 Ruby 中查找一个类的所有后代](https://stackoverflow.com/questions/2393697/look-up-all-descendants-of-a-class-in-ruby)

所以，假设我们有：

```
class LivingBeing
  class Animal
  end

  class Bacteria
  end

  class Virus
  end
end

class Fungi < LivingBeing
end 
```

如何检查子类`LivingBeing`有哪些？我知道我们有`Klass.ancestors`，但是有什么方法可以看到祖先的反面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:22:54.797

核心 Ruby 语言中没有内置任何东西可以做你想做的事——你需要自己编写。这是一个示例方法`subclasses_of(class_name_here)`（如下），它将为您返回特定类的子类列表：

```
class Mammal
end

class Human < Mammal
end

class Dog < Mammal
end

def subclasses_of input
  ObjectSpace.each_object(Class).select { |klass| klass < input }
end

subclasses_of(Mammal)
 #=> [Human, Dog] 
```

顺便说一句，这里有这个问题的答案：

[http://dzone.com/snippets/objectsubclasses](http://dzone.com/snippets/objectsubclasses)

# android - 在Android中将图像裁剪为圆形

> ID：12944275
> 
> 赞同：9
> 
> 时间：2012-10-17T22:17:14.490
> 
> 标签：android, crop, android-image

有谁知道如何将图像\位图裁剪为圆形？我找不到任何解决方案，对不起..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-05T09:57:08.337

对于 ImageView 的圆角，将您的图像转换为位图，然后尝试以下代码：

```
private Bitmap getRoundedCroppedBitmap(Bitmap bitmap) {
    int widthLight = bitmap.getWidth();
    int heightLight = bitmap.getHeight();

    Bitmap output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(),
            Config.ARGB_8888);

    Canvas canvas = new Canvas(output);
    Paint paintColor = new Paint();
    paintColor.setFlags(Paint.ANTI_ALIAS_FLAG);

    RectF rectF = new RectF(new Rect(0, 0, widthLight, heightLight));

    canvas.drawRoundRect(rectF, widthLight / 2, heightLight / 2, paintColor);

    Paint paintImage = new Paint();
    paintImage.setXfermode(new PorterDuffXfermode(Mode.SRC_ATOP));
    canvas.drawBitmap(bitmap, 0, 0, paintImage);

    return output;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-20T13:39:14.877

Romain Guy 曾是 Google 的 Android 团队的一名工程师，他发表了一篇关于[绘制圆角图像](http://www.curious-creature.org/2012/12/11/android-recipe-1-image-with-rounded-corners/)的优秀文章。这个想法可以很容易地扩展到一个圆，例如，通过改变圆角矩形的半径来创建一个完整的圆。

来自文章：

> 为了生成圆角图像，我简单地编写了一个自定义`Drawable`，使用`Canvas.drawRoundRect()`. 诀窍是使用 a`Paint`和 a`BitmapShader`用纹理而不是简单的颜色填充圆角矩形。代码如下所示：
> 
> ```
> BitmapShader shader; shader = new BitmapShader(bitmap,
> Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
> 
> Paint paint = new Paint(); paint.setAntiAlias(true);
> paint.setShader(shader);
> 
> RectF rect = new RectF(0.0f, 0.0f, width, height);
> 
> // rect contains the bounds of the shape
> // radius is the radius in pixels of the rounded corners
> // paint contains the shader that will texture the shape
> canvas.drawRoundRect(rect, radius, radius, paint); 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-03T09:41:44.587

Wiseman Designs，有一个可以使用的开源 Circular ImageView

[https://github.com/wisemandesigns/CircularImageView](https://github.com/wisemandesigns/CircularImageView)

这在您的布局中使用 XML，这让生活更轻松。您可以在 XML 中设置源，或者稍作修改就可以轻松使用位图。

免责声明：我为 Wiseman Designs 工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-20T12:36:51.583

班级：

```
 public Bitmap getRoundedShape(Bitmap scaleBitmapImage) {

    int targetWidth = 50;
    int targetHeight = 50;
    Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, 
                        targetHeight,Bitmap.Config.ARGB_8888);
                        canvas = new Canvas(targetBitmap);
    Path path = new Path();
    path.addCircle(((float) targetWidth - 1) / 2,
    ((float) targetHeight - 1) / 2,
    (Math.min(((float) targetWidth), 
            ((float) targetHeight)) / 2),
      Path.Direction.CCW);

    canvas.clipPath(path);
    Bitmap sourceBitmap = scaleBitmapImage;
    canvas.drawBitmap(sourceBitmap, 
                            new Rect(0, 0, sourceBitmap.getWidth(),
      sourceBitmap.getHeight()), 
                            new Rect(0, 0, targetWidth,
      targetHeight), null);
    return targetBitmap;
   } 
```

看法：

```
<ImageView
        android:id="@+id/imgView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@+id/btnEdit"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="40dp"
        android:background="@drawable/rounded"
        android:adjustViewBounds="true"
        android:gravity="center"
        android:src="@drawable/happy"/> 
```

附加样式：

```
 <?xml version="1.0" encoding="utf-8"?>
 <shape xmlns:android="http://schemas.android.com/apk/res/android" >

<solid android:color="@android:color/white" />

<stroke
    android:width="3dip"
    android:color="#FF0000" />

<corners android:radius="10dp" />

<padding
    android:bottom="0dp"
    android:left="0dp"
    android:right="0dp"
    android:top="0dp" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-18T05:56:32.497

尝试使用以下代码：

```
public Bitmap getRoundedShape(Bitmap scaleBitmapImage) {
  // TODO Auto-generated method stub
  int targetWidth = 50;
  int targetHeight = 50;
  Bitmap targetBitmap = Bitmap.createBitmap(targetWidth, 
                            targetHeight,Bitmap.Config.ARGB_8888);

                Canvas canvas = new Canvas(targetBitmap);
  Path path = new Path();
  path.addCircle(((float) targetWidth - 1) / 2,
  ((float) targetHeight - 1) / 2,
  (Math.min(((float) targetWidth), 
                ((float) targetHeight)) / 2),
          Path.Direction.CCW);

                canvas.clipPath(path);
  Bitmap sourceBitmap = scaleBitmapImage;
  canvas.drawBitmap(sourceBitmap, 
                                new Rect(0, 0, sourceBitmap.getWidth(),
    sourceBitmap.getHeight()), 
                                new Rect(0, 0, targetWidth,
    targetHeight), null);
  return targetBitmap;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-03T09:33:16.347

```
finalBitmapShader shader = newBitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);
mPaint.setShader(shader);
mBitmapWidth=mBitmap.getWidth();
mBitmapHeight=mBitmap.getHeight();
}
@Override
public void draw(Canvas canvas{ 
  canvas.drawOval(mRectF,mPaint);
}
@Override
protected void onBoundsChange(Rect bounds) {
  super.onBoundsChange(bounds);
  mRectF.set(bounds);
} 
```

[在这里，我在http://androidgreeve.blogspot.in/2014/09/facebook-messanger-like-profile-image.html?m=1](http://androidgreeve.blogspot.in/2014/09/facebook-messanger-like-profile-image.html?m=1)找到了它的示例教程

# r - 提取 GAM 的估计值

> ID：12944278
> 
> 赞同：6
> 
> 时间：2012-10-17T22:17:31.083
> 
> 标签：r, gam, mgcv

我对 R 相当陌生，目前正在阅读一本书“Generalized Additive Models”，Wood (2006) 对 R 的介绍，并进行了一些练习，特别是关于空气污染和死亡的部分，这是我感兴趣的领域。使用 mgcv 包我运行以下模型。

```
library(gamair) 
library(mgcv) 
data(chicago) 

ap1<-gam(death ~ pm10median + so2median + o3median +s(time,bs="cr",k=200)+ s(tmpd,bs="cr"), data=chicago,family=poisson) 
```

如何提取 pm10median 和 x 的 95% CI 的效果估计值并将输出导出到 CSV 或任何其他选项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T22:21:53.183

保存模型的摘要

```
summary_model <- summary(ap1) 
```

您想要的部分（对于线性项）在 `p.table`元素中

```
summary_model$p.table
                Estimate   Std. Error      z value    Pr(>|z|)
(Intercept) 4.7457425965 1.480523e-03 3205.4510971 0.000000000
pm10median  0.0002551498 9.384003e-05    2.7189871 0.006548217
so2median   0.0008898646 5.543272e-04    1.6053056 0.108426561
o3median    0.0002212612 2.248015e-04    0.9842516 0.324991826

write.csv(summary_model$p.table, file = 'p_table.csv') 
```

如果你想要样条项，那么这是

```
summary_model$s.table
               edf     Ref.df    Chi.sq       p-value
s(time) 167.327973 187.143378 1788.8201 4.948832e-259
s(tmpd)   8.337121   8.875807  110.5231  1.412415e-19 
```

您可以手动计算 95% CI 并添加这些如果您愿意。（由于高 DF 将使用 Z 分数）

```
p_table <- data.frame(summary_model$p.table)
p_table <- within(p_table, {lci <- Estimate - qnorm(0.975) * Std..Error
                            uci <- Estimate + qnorm(0.975) * Std..Error})
p_table
               Estimate   Std..Error      z.value    Pr...z..          uci           lci
(Intercept) 4.7457425965 1.480523e-03 3205.4510971 0.000000000 4.7486443674  4.742841e+00
pm10median  0.0002551498 9.384003e-05    2.7189871 0.006548217 0.0004390729  7.122675e-05
so2median   0.0008898646 5.543272e-04    1.6053056 0.108426561 0.0019763260 -1.965968e-04
o3median    0.0002212612 2.248015e-04    0.9842516 0.324991826 0.0006618641 -2.193416e-04\ 
```

* * *

## 根据评论编辑

如果您有许多游戏模型，例如，`ap1`并且您希望系统地处理它们，那么一种方法是将它们放在一个列表中并使用`ap2``ap3``R``lapply`

```
# create list
model_list <- list(ap1, ap2, ap3)
# give the elements useful names
names(model_list) <- c('ap1','ap2','ap3')

# get the summaries using `lapply

summary_list <- lapply(model_list, summary)

# extract the coefficients from these summaries

 p.table_list <- lapply(summary_list, `[[`, 'p.table')

 s.table_list <- lapply(summary_list, `[[`, 's.table') 
```

您现在创建的列表是相关组件。

# php - 带有数据库表插入、更新的模型

> ID：12944282
> 
> 赞同：2
> 
> 时间：2012-10-17T22:18:07.297
> 
> 标签：php, zend-framework, architecture

我的公司有这样的模型，有方法 setOptions 从数组或 Zend_DB_Table_Row 创建对象

```
<?php

class Model_Company 
{
    protected $c_id;
    protected $c_shortname;
    protected $c_longname;

    public function __constructor(array $options = null)
    {
        if(is_array($options)) {
            $this->setOptions($options);
        }
    }

    public function setOptions($data)
    {
        if($data instanceof Zend_Db_Table_Row_Abstract) {
            $data = $data->toArray();
        }
        if(is_object($data)) {
            $data = (array)$data;
        }
        if(!is_array($data)) {
            throw new Exception('Initial data must be object or array');
        }
        $methods = get_class_methods($this);
        foreach($data as $key => $value) {
            $method = 'set'.ucfirst($key);
            if(in_array($method, $methods)) {
                $this->{'c_'.$key} = $value;    
            }

        }
        return $this;
    } 
```

我也有公司经理，其参数为模型和适配器，用于不同的 db/soap/rest

```
 class Model_CompanyManager 
{
    private $_adapter;
    public function __construct(Model_Company $model,$adapter) 
    {
        $this->_adapter = $adapter;
        $this->_model = $model;
        return $this;
    }   
    /**
     * Save data
     * @var Model_Company $data
     */
    public function save(array $data)
    {
        $data = $this->_model->setOptions($data);
        $this->_adapter->save($data);
    }

} 
```

和 DBTable 中的 DBTable

```
class Model_DbTable_Company extends Zend_Db_Table_Abstract
{
    protected $_name = 'company';
    protected $_id = 'c_id';

    public function save(Model_Company $data) 
    {

        try {
            if(isset($data['c_id'])) {
                $this->update($data, 'c_id = :c_id',array('c_id' => $data['c_id']));
            } else {

                $this->insert($data);

            }    
        } catch (Zend_Db_Exception $e) {
            throw new Exception($e->getMessage());
        }
    }

} 
```

我如何插入数据库，因为模型属性受到保护，我不能做 (array)$data

```
$this->_companyManager = new Model_CompanyManager(new Model_Company,new Model_DbTable_Company);
$this->_companyManager->save($values); 
```

我不会像这样创建带有字段名称的数组，如下所示：

```
$data = array(
            'c_shortname' => $company->getShortname(),
            'c_longname' => $company->getLongName(),
            'c_description' => $company->getDescription(),
            'c_salt' => $company->getSalt(),
            'c_password' => $company->getPassword(),
            'c_updated_at' => date('YmdHis')
        ); 
```

因为当我要更改模型字段名称和其他内容时，我还必须记住要在这里更改...是否有简单的方法，模型可以保持一切并保持清洁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:16:07.473

如果您只是想通过反射获取所有对象属性的列表，您可以使用[get_class_vars](http://php.net/manual/en/function.get-class-vars.php)。对于最新版本的 PHP，这将返回所有类变量，而不管范围如何。但是由于您在这个*Manager*中折腾，通常称为[Data Mapper](http://martinfowler.com/eaaCatalog/dataMapper.html)，我假设您希望您的模型对象不会与数据库表完全对齐。否则，您应该坚持 Zend_Db_Table 类的 table-row-gateway 模式。

我个人非常喜欢将数据映射器模式与 ZF 应用程序结合使用。只有最简单的应用程序才会与关系数据库表对齐。它鼓励在数据库模式之前编写更丰富的对象和编写模型和业务逻辑。

映射器的工作正是它所建议的，将您的实体映射到持久层，因此在映射器 save() 方法中处理 SQL 语句的实际分配（可能使用您的表字段名称构建一个数组并分配值，甚至可能保存到多个表中）是完全可以接受的。

如果您的某些对象更简单并且可以更好地与表格对齐，那么肯定会出现这种情况，我喜欢做的是为对象设置一个 __toArray() 方法。它可以负责返回适合构建插入/更新语句的表示。对于需要 JSON 表示来通过 AJAX 提供服务也很有用。你可以随心所欲地写这些——使用 get_class_vars 函数或其他反射。我通常有两个映射器基类。一个具有 CRUD 功能，基本上完成 Zend_Db_Table 所做的工作，另一个更简单，我负责编写更多代码。他们应该遵循一个通用的界面。有点让你两全其美。

我发现[这个链接](http://survivethedeepend.com/zendframeworkbook/en/1.0/implementing.the.domain.model.entries.and.authors#zfbook.implementing.the.domain.model.entries.and.authors.implementation.the.data.mappers)是一些想法的好资源。

# php - 在 OS X Lion 上的 XAMPP 上使用 PECL 安装 PHP Enchant

> ID：12944283
> 
> 赞同：0
> 
> 时间：2012-10-17T22:18:26.797
> 
> 标签：php, xampp, macports, pecl, pyenchant

我正在尝试使用 PECL 安装 PHP 附魔库，但我收到“错误：找不到附魔”，即使我已经使用 Macports 安装了核心附魔可执行文件。我什至可以在命令行上使用附魔。然而，PECL 似乎找不到安装。

在使用 PECL 安装过程中，会出现一个交互式问题，询问“lib enchant prefix? [shared]”，然后等待我的输入。我真的不知道这意味着什么，但我假设它要求安装核心附魔可执行文件的目录。就我而言，它位于 /opt/local/bin 中。如果它询问附魔库文件在哪里，它在/opt/local/lib 中。在这个问题中，我尝试输入这两条路径，但它仍然产生相同的“找不到附魔”错误。

我不明白这里发生了什么。我有 PHP 5.3.1，我正在使用 XAMPP。在 PHP Manual for enchant 上，它说它预装在高于 5.3.0 的 PHP 版本上，但由于某种原因它没有安装在我的身上。也许是因为我是通过 XAMPP 安装的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:41:45.140

我有同样的问题，使用 /opt/local 作为附魔前缀，希望它会工作

# .htaccess - .htaccess 使用和不使用斜杠

> ID：12944286
> 
> 赞同：3
> 
> 时间：2012-10-17T22:18:44.327
> 
> 标签：.htaccess

使用 .htaccess，我怎样才能让我的网站能够做到这一点。这是我已经拥有的。

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)/(.*)$ sites/index.php?url=$1&page=$2 
```

由此，我能够浏览到： [http](http://domain.com/sites/example/) ://domain.com/sites/example/ ，并且工作得很好。我想要做的是浏览到 [http://domain.com/sites/example](http://domain.com/sites/example) 没有尾部斜杠，但它总是返回一个找不到页面的错误。

到目前为止，谷歌的所有结果都让我失望了。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:22:42.483

是的，谷歌的海量信息有时会成为障碍：RewriteRule ^(.*)/(.*)/?$ sites/index.php?url=$1&page=$2

注意 /? 在 $ 之前的重写中，对不起，我已经倒读了你的问题......

编辑后的答案： RewriteRule ^(.*)/?(.*)$ sites/index.php?url=$1&page=$2

的不同位置？可能会有所帮助，否则第一个（。*）的贪婪匹配可能会一直到最后并尝试将其全部推入$ 1，对于具体细节，您最好打开apache重写日志并查看是否可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:28:15.887

尝试将您的正则表达式更改为：

```
RewriteRule ^([^/]+)/(.*?)/?$ sites/index.php?url=$1&page=$2 
```

第一个`(.*)`是贪婪的，会吞噬一切。

# google-chrome - 在 Google TV 上调试 Chrome

> ID：12944290
> 
> 赞同：1
> 
> 时间：2012-10-17T22:19:21.890
> 
> 标签：google-chrome, google-tv

关于如何从在 Google TV 上运行的 Chrome 获取内存使用情况、Javascript 错误等的任何想法？

我有一个页面显示“哦，快！” 在 Google TV (Logitech) 上的 Chrome 浏览器中查看时出错。该页面相当简单，但它确实加载了一堆照片，尽管一次最多只能加载 7 张照片（这些照片是使用 JavaScript 加载的）。这些照片分别为 640x480 和 ~500KB。它们被堆叠起来，最上面的一个淡出（使用 jQuery），直到全部消失，然后加载一个新批次。

它只会在 Google TV 上崩溃（它在 Windows 7 上运行良好）并且需要一段时间才会崩溃（我可以通过打开我们页面上的“快速模式”将它降低到崩溃前大约 10-20 分钟）。

不幸的是，我不知道如何获取任何可能帮助我调试它的信息。能够在 Google TV 设备上获取 Chrome 的开发者工具会很酷。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:56:23.047

目前无法从 Google TV 上的 Chrome 中提取调试信息。Logitech Review 的 RAM 相当有限，您可能会在那里遇到问题（我不知道这些图像有多大）。您的 javascript 代码中也可能存在内存泄漏。这可能在运行浏览器的其他系统上隐藏，因为会有更多内存来缓冲您看到错误。

我的建议是创建一个虚拟机（VirtualBox 是免费的并在 Windows 上运行）——创建一个内存有限的 VM（例如 256Mb Ram）并安装 Ubuntu 或其他可以运行 Chrome 的 Linux 风格。然后在 VM 中运行您的应用程序，看看会发生什么。

如果失败，您总是可以尝试使用静态图像标签加载图像，看看是否是导致崩溃的图像。如果不是图像，那么我会说仔细查看您的 JS 代码，也许可以通过 JSLint (http://www.jslint.com/) 运行它

# makefile - 多个目录中的 Makefile

> ID：12944291
> 
> 赞同：9
> 
> 时间：2012-10-17T22:19:22.647
> 
> 标签：makefile

我想构建一个应用程序，并且我有多个模块存储在多个目录中。我决定遵循[这个](https://stackoverflow.com/a/1139313/1068618)想法，即在每个目录中都有一个makefile，然后将其合并。但是 - 作为一个初学者程序员 - 我仍然不知道如何做到这一点。首先，这样的“部分”makefile 会是什么样子。它们不能具有 main 函数，因为每个二进制文件只能有一个，尽管当我尝试编译它时 gcc 抱怨未定义对 main 的引用。其次，我不知道将所有这些模块放在一起会是什么样子。

我会很感激任何帮助，但请尽量保持你的答案简单。Makefile 对我来说仍然是一种黑魔法。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-17T22:50:58.197

在使用 makefile 进行任何操作之前，您必须知道如何在没有 makefile 的情况下进行操作。

由于您使用的是 gcc，我将假设您的源代码是 C++。

您还没有告诉我们您的目录结构是什么样的，所以我假设您在两个目录中有三个源文件`primary/main.cc`：`other/foo.cc`和`other/bar.cc`. （我们可以像稍后那样处理头文件`foo.h`。）并且您想要构建`myApp`.

**第 1 步：手工操作**

要在一个命令中执行此操作，您可以使用：

```
gcc -Wall primary/main.cc other/foo.cc other/bar.cc -o myApp 
```

这将编译三个源文件并将二进制对象链接到可执行文件`myApp`中。

**第 2 步：分段**进行（在您可以使上一步完美运行之前，请勿尝试此操作。）

您可以采取中间步骤，将源文件编译为二进制目标文件，而不是使用一个命令进行构建：

```
gcc -Wall -c primary/main.cc -o primary/main.o
gcc -Wall -c other/foo.cc -o other/foo.o
gcc -Wall -c other/bar.cc -o other/bar.o 
```

这将产生`alpha/main.o`和`beta/foo.o`。`beta/bar.o`编译器不会抱怨`foo`和`bar`缺少`main()`函数，因为目标文件不需要函数。*然后*将这些对象链接到一个可执行文件中：

```
gcc -Wall primary/main.o other/foo.o other/bar.o -o myApp 
```

**第 3 步：在本地**进行（在您可以使上一步完美运行之前，请勿尝试此操作。）

就像上一步一样，但是我们在`primary/`and中起作用`other/`：

```
cd primary
gcc -Wall -c main.cc -o main.o
cd ../other
gcc -Wall -c foo.cc -o foo.o
gcc -Wall -c bar.cc -o bar.o
cd ..
gcc -Wall primary/main.o other/foo.o other/bar.o -o myApp 
```

**第 4 步：使用 Makefile**（在您可以使上一步完美运行之前，请勿尝试此操作。）

我们可以让 makefile 执行第 1 步，但这并不是必需的。`primary`在(ie )中编写一个 makefile，`primary/makefile`如下所示：

```
main.o:
    gcc -Wall -c main.cc -o main.o 
```

（fromt of 中的那个空格`gcc...`是一个 TAB。）

现在试试这个：

```
cd primary
make
cd ../other
gcc -Wall -c foo.cc -o foo.o
gcc -Wall -c bar.cc -o bar.o
cd ..
gcc -Wall primary/main.o other/foo.o other/bar.o -o myApp 
```

**第 5 步：使用多个 Makefile**（在您可以使上一步完美运行之前，请勿尝试此操作。）

写一个`other/makefile`：

```
both: foo.o bar.o

foo.o:
    gcc -Wall -c foo.cc -o foo.o

bar.o:
    gcc -Wall -c bar.cc -o bar.o 
```

以及您正在构建的顶级目录中的makefile `myApp`：

```
myApp:
    gcc -Wall primary/main.o other/foo.o other/bar.o -o myApp 
```

现在试试这个：

```
cd primary
make
cd ../other
make
cd ..
make 
```

**第 6 步：使用一个调用其他人的 Makefile**（在您可以使上一步完美运行之前，请勿尝试此操作。）

编辑顶部生成文件：

```
myApp:
    cd primary; make
    cd other; make
    gcc -Wall primary/main.o other/foo.o other/bar.o -o myApp 
```

现在尝试：

```
make 
```

如果所有这些都有效，那么您所拥有的是一个*粗糙但有效*的makefile 系统。当您准备好卸下辅助轮时，可以进行许多改进。

**编辑：**

如果子目录中有很多源文件（例如`other/`），并且您不想手动在顶层 makefile 中维护一个列表，有几种方法可以处理它。这是一：

```
OTHER_SOURCES := $(wildcard other/*.cc)

OTHER_OBJECTS := $(OTHER_SOURCES:.cc=.o)

myApp:
    cd primary; make
    cd other; make
    gcc -Wall primary/main.o $(OTHER_OBJECTS) -o myApp 
```

但是你应该让这些 makefile 正常工作并理解它们，然后再尝试进一步简化。

# mapreduce - 使用 CouchDB 视图，我可以同时计数组和按键范围过滤吗？

> ID：12944294
> 
> 赞同：10
> 
> 时间：2012-10-17T22:19:27.247
> 
> 标签：mapreduce, couchdb

我正在使用 CouchDB。我希望能够在查询时指定的日期范围内计算特定字段值的出现次数。我似乎能够完成其中的一部分，但我无法理解将它们整合在一起的最佳方式。

假设具有时间戳字段和另一个字段的文档，例如：

```
{ date: '20120101-1853', author: 'bart' }
{ date: '20120102-1850', author: 'homer'}
{ date: '20120103-2359', author: 'homer'}
{ date: '20120104-1200', author: 'lisa'}
{ date: '20120815-1250', author: 'lisa'} 
```

我可以轻松地创建一个**按灵活日期范围过滤文档**的视图。这可以通过如下视图来完成，使用关键范围参数调用，例如`_view/all-docs?startkey=20120101-0000&endkey=20120201-0000`.

*所有文档/map.js：*

```
function(doc) {
    emit(doc.date, doc);
} 
```

使用上面的数据，这将返回一个仅包含前 4 个文档（日期范围内唯一的文档）的 CouchDB 视图。

我还可以创建一个查询**给定字段的出现次数**，就像这样，通过分组调用，即`_view/author-count?group=true`：

*作者计数/map.js：*

```
function(doc) {
  emit(doc.author, 1);
} 
```

*作者计数/reduce.js：*

```
function(keys, values, rereduce) {
  return sum(values);
} 
```

这将产生类似：

```
{
    "rows": [
        {"key":"bart","value":1},
        {"key":"homer","value":2}
        {"key":"lisa","value":2}
     ]
} 
```

但是，我找不到**按日期过滤和计数出现次数**的最佳方法。例如，使用上面的数据，我希望能够指定范围参数`startkey=20120101-0000&endkey=20120201-0000`并获得这样的结果，其中最后一个文档被排除在计数之外，因为它超出了指定的日期范围：

```
{
    "rows": [
        {"key":"bart","value":1},
        {"key":"homer","value":2}
        {"key":"lisa","value":1}
     ]
} 
```

最优雅的方法是什么？这可以通过单个查询来实现吗？我应该使用另一个 CouchDB 构造，还是一个视图就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-19T14:24:38.380

您可以使用列表非常接近所需的结果：

```
{
  _id: "_design/authors",
  views: {
    authors_by_date: {
      map: function(doc) {
        emit(doc.date, doc.author);
      }
    }
  },
  lists: {
    count_occurrences: function(head, req) {
      start({ headers: { "Content-Type": "application/json" }});

      var result = {};
      var row;
      while(row = getRow()) {
        var val = row.value;
        if(result[val]) result[val]++;
        else result[val] = 1;
      }
      return result;
    }
  }
} 
```

可以这样请求此设计：

```
http://<couchurl>/<db>/_design/authors/_list/count_occurrences/authors_by_date?startkey=<startDate>&endkey=<endDate> 
```

这将比普通的 map-reduce 慢，并且是一种解决方法。不幸的是，这是进行多维查询的唯一方法，[“CouchDB 不适合”](http://blog.couchdb.org/2014/07/24/couchdb-weekly-news-july-24-2014/)。

请求此设计的结果将是这样的：

```
{
  "bart": 1,
  "homer": 2,
  "lisa": 2
} 
```

我们所做的基本上是发出很多元素，然后使用列表将它们分组为我们想要的。列表可用于以您想要的任何方式显示结果，但通常也会较慢。而一个普通的 map-reduce 可以被缓存并且只根据差异进行更改，每次请求时都必须重新构建列表。

它几乎和从 map 中获取所有元素一样慢（编排数据的开销几乎可以忽略不计）：比获取 reduce 的结果要慢得多。

如果您想将该列表用于不同的视图，您可以简单地在您请求的 URL 中交换它：

```
http://<couchurl>/<db>/_design/authors/_list/count_occurrences/<view> 
```

[在 couchdb wiki 上](http://wiki.apache.org/couchdb/Formatting_with_Show_and_List#Listing_Views_with_CouchDB_0.10_and_later)阅读有关列表的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T06:50:40.203

您需要创建一个组合视图：

*组合/map.js：*

```
function(doc) {
    emit([doc.date, doc.author], 1);
} 
```

*组合/减少.js：*

```
_sum 
```

这样，您将能够按开始/结束日期过滤文档。

```
startkey=[20120101-0000, "a"]&endkey=[20120201-0000, "a"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:07:37.723

尽管您的问题在一般情况下很难解决，但了解对可能查询的更多限制会大有帮助。例如，如果您知道您将搜索涵盖全天/月的范围，您可以使用数组`[year, month, day, time]`而不是字符串：

```
emit([doc.date_year, doc.date_month, doc.date_day, doc.date_time, doc.author] doc); 
```

即使您无法预测所有可能的查询都适合基于此键类型的分组，拆分键也可以帮助您优化范围查询并减少所需的查找次数（以一些额外空间为代价）。

# c++ - 如何使用 fscanf 提取 html

> ID：12944305
> 
> 赞同：0
> 
> 时间：2012-10-17T22:20:32.543
> 
> 标签：c++, scanf

我有一个文件，每一行都有一个 .

```
<div style="random properties" id="keyword1:string id:int">text</div>
<div style="random properties" id="keyword1:string id:int">text</div>
<div style="random properties" id="keyword2:string id:int">text</div>
<div style="random properties" id="keyword2:string id:int">text</div> 
```

我可以使用 fscanf 返回匹配关键字 1 和关键字 2 的文本和 ID 列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:02:44.590

您可以使用正则表达式简单地阅读它：

```
std::string s;
std::regex r( "<div style=\"[^\"]*\" id=\".*(\\d+)\">((?:(?!</div>).)*)</div>" );
while( std::getline(in, s) ) {
    std::smatch m;
    if( std::regex_match(s, m, r) ) {
        std::cout << "id = " << m.str(1) << ", text = " << m.str(2) << std::endl;
    } else {
        std::cout << "invalid pattern" << std::endl;
    }
} 
```

但如果您想了解更多信息，`regex`请访问[http://en.cppreference.com/w/cpp/regex](http://en.cppreference.com/w/cpp/regex)

# c# - Windows 8 应用程序文本框数据绑定不起作用

> ID：12944311
> 
> 赞同：1
> 
> 时间：2012-10-17T22:21:22.563
> 
> 标签：c#, xaml, windows-8

标题几乎说明了一切。分数显示为 0（这是我将其初始化为的）。但是，在更新分数时，它不会传播到 UI 文本块。认为这会很简单，但我总是遇到从 Android 切换的问题 :) 我想在 UI 线程上运行一些东西吗？

我正在尝试绑定到“分数”属性。

```
<TextBox x:Name="text_Score" Text="{Binding Score, Mode=OneWay}" HorizontalAlignment="Left" Margin="91,333,0,0" Grid.Row="1" TextWrapping="Wrap" VerticalAlignment="Top" Height="148" Width="155" FontSize="72"/> 
```

这是我的持有人课程

```
 public class GameInfo
    {
        public int Score { get; set; }
        public int counter = 0;
    } 
```

**注意：确保不要忘记添加 {get; set;} 否则什么都不会出现。

这就是我试图设置它的地方

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    base.OnNavigatedTo(e);
    info.counter = (int)e.Parameter;

    text_Score.DataContext = info;
} 
```

PS重申一下，我要选择OneWay。我只想显示分数并在变量更改时将其标记为未注明日期。我计划禁用用户输入。

这是完整的工作代码示例。唯一需要改变的是我的持有人班级。谢谢沃尔特。

```
public class GameInfo : INotifyPropertyChanged
{
    private int score;
    public int Score {
        get { return score; }
        set
        {
            if (Score == value) return;
            score = value;
            NotifyPropertyChanged("Score");
        }
    }
    public int counter = 0;

    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:38:00.280

在 XAML 绑定中，您的基础类需要通知绑定框架该值已更改。在您的示例中，您正在 OnNavigatedTo 事件处理程序中设置计数器。但是，如果您查看 GameInfo 类，它是一个简单的数据对象。

INotifyPropertyChanged 接口用于通知客户端（通常是绑定客户端）属性值已更改。所以在你的情况下，改变类如下

```
public class GameInfo : INotifyPropertyChanged
{
    private int _score;
public int Score
{
  get
  {
    return this._score;
  }

  set
  {
    if (value != this._score)
  {
    this._score = value;
    NotifyPropertyChanged("Score");
  }
}

  }    
public int counter = 0; // if you use _score, then you don't need this variable.
    public event PropertyChangedEventHandler PropertyChanged;

     private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

} 
```

有关更多信息，请参阅 MSDN 文章[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/windows/apps/system.componentmodel.inotifypropertychanged.aspx)

# jquery - ASP.NET Jquery 函数合并为一个，如果可能的话

> ID：12944312
> 
> 赞同：0
> 
> 时间：2012-10-17T22:21:29.913
> 
> 标签：jquery, asp.net

我是 ASP.NET 和 JQuery 的新手。

目前，我有 JQuery 的代码来加载两个不同的页面并根据两个不同的按钮单击传递值（由按钮 ID 控制）。好像我在复制代码，所以我想知道我是否可以让这个类似于 javascript 函数来传递 4 个参数（页面或 URL、RecordID、宽度、高度）。让我用代码解释一下。

我有这两个按钮：

```
<table width="80%" align="center" >
    <tr>
        <td width="45%"></td>
        <td width="10%" class="PageTitle"></td>
        <td width="45%" style="text-align:right;">
            <asp:Button runat="server" CommandName="buttonCreateApprovedMDF" ID="buttonCreateApprovedMDF" 
            Text="Create Approved MDF" href="ApprovedCreateNew.aspx?AnotherID=" title="Create Approved MDF" class="button3"/>  
            <asp:Button runat="server" CommandName="buttonCreateNote" ID="buttonCreateNote" 
            Text="Create Note" href="ProposalCreateNote.aspx?ProposalID=" title="Create Note" class="button3"/>           
        </td>
    </tr>
</table> 
```

这是JQuery代码（重复），只是Page和RecordID不同，一切都一样。

```
$(document).ready(function () {  
    $('#<%= buttonCreateNote.ClientID %>').live('click', function(e) { 
    e.preventDefault(); 
    var lblID = $("[ID$='ProposalID']").text();
    var page = '<%= ResolveClientUrl("ProposalCreateNote.aspx")%>' + '?ProposalID=' + encodeURIComponent($('span[id$="ProposalID"]').text());
    var pagetitle = $(this).attr("title"); 
    //alert(page); 
    var $dialog = $('<div></div>') 
    .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"  frameBorder="0"  align="middle"> ></iframe>') 
    .dialog({ 
        autoOpen: false, 
        modal: true, 
        height: 650, 
        width: 900, 
        title: pagetitle 
    }); 
    $dialog.dialog('open'); 
    });

    $('#<%= buttonCreateApprovedMDF.ClientID %>').live('click', function (e) {
        e.preventDefault();
        var lblID = $("[ID$='AnotherID']").text();
        var page = '<%= ResolveClientUrl("ApprovedCreateNew.aspx")%>' + '?AnotherID=' + encodeURIComponent($('span[id$="AnotherID"]').text());
    var pagetitle = $(this).attr("title");
        //alert(page); 
    var $dialog = $('<div></div>')
    .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"  frameBorder="0"  align="middle"> ></iframe>')
    .dialog({
        autoOpen: false,
        modal: true,
        height: 650,
        width: 900,
        title: pagetitle
    });
    $dialog.dialog('open');
    });
}); 
```

这些 JQuery 用于传递参数的标签（在 DetailsView 中）。

```
<asp:Label ID="ProposalID" runat="Server" style="text-align:left;" 
Text='<%# Eval("ProposedID")%>' />
<asp:Label ID="AnotherID" runat="Server" style="text-align:left;" 
Text='<%# Eval("AnotherID")%>' /> 
```

如何将上面复制的 JQuery 组合成一个函数，如“OpenIframe（URL，RecordID，宽度，高度）”？并可能使用 OnClientClick （带有这些参数）来触发 IFrame 弹出窗口？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:45:17.330

尝试这样的事情：

```
function OpenIframe(url, recordId, width, height, event)
{
    if(event.preventDefault)
        event.preventDefault(); 
    else
        event.returnValue = false;

    var page = url + "?" + recordId + "="+ encodeURIComponent($('span[id$="' + recordId + '"]').text());
    var pagetitle = $(this).attr("title"); 
    var $dialog = $('<div></div>') 
    .html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"  frameBorder="0"  align="middle"> ></iframe>') 
    .dialog({ 
        autoOpen: false, 
        modal: true, 
        height: height | 650 , 
        width: width | 900, 
        title: pagetitle 
    }); 
    $dialog.dialog('open');
} 
```

你的 aspx 看起来像这样：

```
<table width="80%" align="center" >
     <tr>
        <td width="45%"></td>
        <td width="10%" class="PageTitle"></td>
        <td width="45%" style="text-align:right;">
            <input type="button" onclick="OpenIframe('<%= ResolveClientUrl("ProposalCreateNote.aspx")%>', 'ProposalID', 900, 650, event); return false;" value="Create Approved MDF" title="Create Approved MDF" class="button3" />
            <input type="button" onclick="OpenIframe('<%= ResolveClientUrl("ApprovedCreateNew.aspx")%>', 'AnotherID', 900, 650, event); return false;" value="Create Note" title="Create Note" class="button3" />
        </td>
    </tr>
</table> 
```

没有使用 asp.net 按钮标记，因为您必须将其定义为 runat="server" 并且您无法在 OnClientClick 事件调用上放置转义字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:55:53.280

您可以在单个查询中包含多个选择器，以逗号分隔：例如`$('#foo, #bar')`. 因此，您可以将这两种方法结合起来，如下所示：

```
$('#<%= buttonCreateNote.ClientID %>, #<%= buttonCreateApprovedMDF.ClientID %>').live('click', function(e) {
    e.preventDefault();
    if ($(this).id === '<%= buttonCreateApprovedMDF.ClientID %>') {
        var lblID = $("[ID$='AnotherID']").text();
        var page = '<%= ResolveClientUrl("ApprovedCreateNew.aspx")%>' + '?AnotherID=' + encodeURIComponent($('span[id$="AnotherID"]').text());
    } else if ($(this).id === '<%= buttonCreateNote.ClientID %>') {
        var lblID = $("[ID$='ProposalID']").text();
        var page = '<%= ResolveClientUrl("ProposalCreateNote.aspx")%>' + '?ProposalID=' + encodeURIComponent($('span[id$="ProposalID"]').text());
    } else {
        return;
    }
    var pagetitle = $(this).attr("title");
    var $dialog = $('<div></div>').html('<iframe style="border: 0px; " src="' + page + '" width="100%" height="100%"  frameBorder="0"  align="middle"> ></iframe>').dialog({
        autoOpen: false,
        modal: true,
        height: 650,
        width: 900,
        title: pagetitle
    });
    $dialog.dialog('open');
});​ 
```

# c++ - 在 Linux 上的聊天客户端中遇到管道问题

> ID：12944315
> 
> 赞同：2
> 
> 时间：2012-10-17T22:21:52.300
> 
> 标签：c++, linux, pipe

我正在 Linux 上用 C++ 编写一个简单的聊天客户端，以连接到我的计算机上的一个 win32 聊天服务器，该服务器也是用 C++ 编写的。我相信服务器可以正常工作，但聊天客户端给我带来了一些麻烦。我正在分叉聊天客户端，并且有一个处理传入消息的进程和另一个处理发送消息的进程。我在聊天客户端中使用了两个管道，因此每个进程可以在终止时告诉另一个进程，以便另一个进程可以继续并终止。管道似乎没有工作，我不确定我哪里出错了。如果你们可以看一下我的代码，我将不胜感激。也许你们中的一个人会注意到我做的不对。这是我的代码：

```
#define ChildRead pipefd1[0]
#define ChildWrite pipefd2[1]
#define ParentRead pipefd2[0]
#define ParentWrite pipefd1[1]

int main()
{
  int nret, theSocket, theMode = 1, pipefd1[2], pipefd2[2];
  struct sockaddr_in server;
  char buf[2] = {0}, message[999] = {0}, ipAddy[20]= {0}, scrName[20] = {0};
  pid_t childpid;

  printf("Enter the IP address to connect to.\n\n");
  scanf("%s", ipAddy);

  printf("\nEnter your screen name.\n\n");
  scanf("%s", scrName);

  theSocket = socket(AF_INET, SOCK_STREAM, 0);

  if(theSocket < 0)
   printf("\nCouldn't create socket\n");

  memset(&server, 0, sizeof(server));
  server.sin_family = AF_INET;
  server.sin_addr.s_addr = inet_addr(ipAddy);
  server.sin_port = htons(8888);

  printf("\nAttempting to connect to %s\n", ipAddy);

  nret = connect(theSocket, (struct sockaddr *)&server, sizeof(server));

  if(nret < 0)
   printf("\nCouldn't connect\n");

  ioctl(theSocket, FIONBIO, &theMode);

  printf("\nConnected to server!\n\n");

  memset(message, 0, strlen(message));

  pipe(pipefd1);
  pipe(pipefd2);

  fcntl(ParentRead, F_SETFL, O_NONBLOCK);
  fcntl(ParentWrite, F_SETFL, O_NONBLOCK);
  fcntl(ChildRead, F_SETFL, O_NONBLOCK);
  fcntl(ChildWrite, F_SETFL, O_NONBLOCK);

  childpid = fork();

  if(childpid == 0)
  {
    close(ParentRead);
    close(ParentWrite);

    while(1)
    {
      read(ChildRead, &buf, 1);

      if(buf[0] == 'q')
      {
       close(ChildRead);
       close(ChildWrite);
       close(theSocket);
       exit(0);
      }

      if((nret = recv(theSocket, message, 999, 0)) < 1)
       continue; 

      if(message[7] == '~' && message[8] == 'q')
      {
        printf("\nChat server disconnected..\n");  
        write(ChildWrite, "q\0", 1);
        close(ChildRead);
        close(ChildWrite); 
        close(theSocket); 
        exit(0);
      }

      printf("%s\n", message);

      memset(message, 0, strlen(message));
    }
  }
  else
  {  
     strcpy(message, scrName);
     strcpy(&message[strlen(message)], ": ");

     close(ChildWrite);
     close(ChildRead);

     while(1)
     {
       read(ParentRead, &buf, 1);

       if(buf[0] == 'q')
       {
         close(ParentRead);
         close(ParentWrite);   
         close(theSocket);
         printf("hmm\n");
         exit(0); 
       }

       scanf("%s", &message[strlen(message)]);

       if(strcmp(&message[strlen(scrName) + 2], "~q\0") == 0)
       {
         write(ParentWrite, "q\0", 1);
         close(ParentRead);
         close(ParentWrite);
         close(theSocket);
         exit(0);          
       }

       send(theSocket, message, strlen(message), 0);

       memset(&message[strlen(scrName) + 2], 0, strlen(&message[strlen(scrName) + 2]));     
     }  
  } 

  return 0;
} 
```

# javascript - Mongoose.js 从不通过 Set 保存字段

> ID：12944328
> 
> 赞同：2
> 
> 时间：2012-10-17T22:22:50.067
> 
> 标签：javascript, node.js, mongoose

有没有办法在猫鼬中将字段标记为未修改？

我有一个猫鼬模式：

```
var schema = mongoose.Schema({
    field          : { type : String   }
  , fieldGenerated : { type : [String] }
}); 
```

我想让它`fieldGenerated`永远不会通过`model.set( ... )`.

应该设置它的唯一方法是在预保存中间件中：

```
schema.pre( 'save', function( next ) {

    // Any way to mark fieldGenerated as NOT modified here?

    // I only want to set fieldGenerated if field was set.
    // I don't want fieldGenerated to be set any other way.
    if ( this.field && this.isModified( 'field' ) ) {
        this.fieldGenerated = this.field.split( ' ' );
        this.markModified( 'fieldGenerated' );
    }

    next();
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T15:55:46.087

不是直接的，但是如果你只是重新生成字段，如果它被修改了：

```
schema.pre( 'save', function( next ) {
    if ( this.field && ( this.isModified( 'field' ) || this.isModified( 'fieldGenerated' ) ) {
        this.fieldGenerated = this.field.split( ' ' );
    }
    next();
} 
```

# onclick - 将 onclick 函数添加到提交按钮

> ID：12944329
> 
> 赞同：68
> 
> 时间：2012-10-17T22:22:51.113
> 
> 标签：onclick, submit

我只是在学习 javascript 和 php。我创建了一个联系表单，我希望提交按钮在按下它时完成两件事：

1.  将数据提交给我（这部分工作）
2.  阅读我的 onclick 功能（这部分不起作用）

```
<input id="submit" name="submit" type="submit" value="Submit" onclick="eatFood()">

<?php
if ($_POST['submit']) {
 ////????? 
}
?> 
```

我将数据发送到我的电子邮件，所以我明白了。但该`onclick`功能似乎不起作用。我尝试查看[为提交按钮添加 onclick 功能，](https://stackoverflow.com/questions/5356011/add-onclick-function-for-submit-button)但没有帮助。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-10-17T23:27:53.293

我需要查看您的提交按钮 html 标记以获得更好的帮助。我不熟悉 php 以及它如何处理回发，但我想这取决于你想要做什么，你有三个选择：

1.  在客户端获取处理`onclick`按钮：在这种情况下，您只需要调用一个 javascript 函数。

```
function foo() {
   alert("Submit button clicked!");
   return true;
}
```

```
<input type="submit" value="submit" onclick="return foo();" />
```

2.  如果要在服务器端处理点击，首先应确保将表单标签方法属性设置为`post`：

    ```
    <form method="post"> 
    ```

3.  您可以使用`onsubmit`来自`form`自身的事件将您的函数绑定到它。

```
<form name="frm1" method="post" onsubmit="return greeting()">
    <input type="text" name="fname">
    <input type="submit" value="Submit">
</form>
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-10-23T13:00:43.643

html:

```
<form method="post" name="form1" id="form1">    
    <input id="submit" name="submit" type="submit" value="Submit" onclick="eatFood();" />
</form> 
```

Javascript：使用 javascript 提交表单

```
function eatFood() {
document.getElementById('form1').submit();
} 
```

显示 onclick 消息

```
function eatFood() {
alert('Form has been submitted');
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-17T22:51:06.600

如果你需要在提交数据之前做一些事情，你可以使用表单的**onsubmit**。

```
<form method=post onsubmit="return doSomething()">
  <input type=text name=text1>
  <input type=submit>
</form> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-31T21:45:55.853

我有这个代码：

```
<html>
<head>
<SCRIPT type=text/javascript>
function deshabilitarBoton() {     
    document.getElementById("boton").style.display = 'none';
    document.getElementById("envio").innerHTML ="<br><img src='img/loading.gif' width='16' height='16' border='0'>Generando...";     
    return true;
} 
</SCRIPT>
<title>untitled</title>
</head>
<body>
<form name="form" action="ok.do" method="post" >
<table>
<tr>
<td>Fecha inicio:</td>
<td><input type="TEXT" name="fecha_inicio" id="fecha_inicio"  /></td>
</tr>
</table>
<div id="boton">
   <input type="submit" name="event" value="Enviar" class="button" onclick="return deshabilitarBoton()" />
</div>
<div id="envio">
</div>
</form>
</body>
</html>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-13T08:47:11.080

1.  创建一个隐藏按钮`id="hiddenBtn"`并`type="submit"`执行提交
2.  将当前按钮更改为`type="button"`
3.  `onclick`当前按钮调用的集合`function`如下所示：

```
function foo() {
    // do something before submit
    ...
    // trigger click event of the hidden button
    $('#hinddenBtn').trigger("click");
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-31T21:51:14.520

```
<button type="submit" name="uname" value="uname" onclick="browserlink(ex.google.com,home.html etc)or myfunction();"> submit</button> 
```

如果您想在没有任何脚本语言的情况下单击 HTML 中的按钮打开页面，那么您可以使用上面的代码。

# ios - 在 iOS 中等待任务

> ID：12944333
> 
> 赞同：-1
> 
> 时间：2012-10-17T22:23:01.003
> 
> 标签：ios, background, wait

起初我有一个听起来很简单的问题，我认为仍然是，但我错过了答案。

当我的应用程序登录时，我会启动一个后台任务来从服务器下载一些数据。如果在用户点击两个按钮之一时未下载该数据，我想放置一个微调器视图并等待该任务完成。完成后，移除微调器视图，然后继续推送视图控制器。

我似乎缺少的是如何做到这一点并等待，以免主线程被阻塞。

下载数据后，我可以设置全局标志或发送通知，但视图控制器必须有办法等待该条件被设置，或者知道存在下载错误。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:34:17.680

堆栈溢出并不意味着以您使用它的方式使用，因此您将被否决。

但是，您正在寻找的是[dispatch_async](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。你用它来创建队列。

如果您需要更多信息，[这个页面](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)有一个很好的解释，以及[这个页面](http://blog.slaunchaman.com/2011/02/28/cocoa-touch-tutorial-using-grand-central-dispatch-for-asynchronous-table-view-cells/)。

# javascript - JSON对象的JavaScript问题

> ID：12944337
> 
> 赞同：2
> 
> 时间：2012-10-17T22:23:17.007
> 
> 标签：javascript, arrays, json, parsing, jsp

我有一个函数可以查询我的数据库并获取用户名列表——我已将其粘贴在下面： *** *dbQuery.jsp* ***

```
<%! 
org.json.JSONArray dbQuery(String SQL_STRING)
{
// This step will read hibernate.cfg.xml and prepare hibernate for use
org.hibernate.SessionFactory sessionFactory = new     org.hibernate.cfg.Configuration().configure().buildSessionFactory();
org.hibernate.Session session1 = sessionFactory.openSession();
org.hibernate.Query query = session1.createQuery(SQL_STRING);
java.util.List list = query.list();
org.json.JSONArray jsonArray = new org.json.JSONArray(list);

// Actual contact insertion will happen at this step
session1.flush();
session1.close(); 
return jsonArray;
}
%> 
```

然后我尝试解析用户列表，但无法正常工作。这就是我正在做的事情：

```
var users = <%=dbQuery("FROM Users")%>; 
alert("User= " + users[0].getAttribute('username')); 
```

为什么这不起作用？解析此 JSON 数组中的对象/属性的正确语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:40:30.500

```
users[0].getAttribute('username') 
```

不管用

尝试

```
users[0].username 
```

# sql - django 按拥有对象的朋友数量对对象进行排序

> ID：12944339
> 
> 赞同：0
> 
> 时间：2012-10-17T22:23:32.957
> 
> 标签：sql, django, postgresql

我有所有权模型，它对用户和项目具有 FK。用户有自己的m2m，朋友。

```
class Ownership:
    user = FK(User)
    item = FK(Item)

class User:
    friends = M2M(User) 
```

我想获取用户的所有权对象，按拥有相同项目的用户朋友的数量排序。在 QuerySet 中是否有可能，或者我应该使用原始 SQL，如果可以，该 SQL 会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:38:30.530

你应该能够做到：

```
(with user u)

users_objects = sorted(Ownership.objects.filter(user=u), key=lambda x:Ownership.objects.filter(item=x.item, user__in=u.friends).count()) 
```

# javascript - 更好的 jQuery 对象过滤

> ID：12944343
> 
> 赞同：1
> 
> 时间：2012-10-17T22:23:42.220
> 
> 标签：javascript, jquery, object, filter

在涉及许多对象的 js 应用程序上工作，我希望能够通过特定变量获取对象。这是我的代码：

```
var pin = '0000';

$.each(employees, function(){
    if(this.pin === pin){
        curEmployee = this;
        return false;
    }
}); 
```

虽然这种方法有效，但我觉得那里有更好的解决方案......我正在摆弄 grep 并尝试：

```
var pin = '0000';

curEmployee = $.grep(employees, function(e,i){
    return e[pin] === pin;
}); 
```

但是，很难确定结果，因为现在我需要检查长度以查看是否提供了返回的数组等。

只是在寻找最佳实践解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:29:04.437

由于总是从 Array 返回 Array `$.grep`，因此只需获取`[0]`Array 的索引。如果`undefined`，则不匹配。

```
var pin = '0000';

curEmployee = $.grep(employees, function(e,i){
    return e.pin === pin;
})[0]; // <--- always grab the first index 
```

如果没有 jQuery，您可以`Array.prototype.filter`以相同的方式使用：

```
var pin = '0000';

curEmployee = employees.filter(function(e,i){
    return e.pin === pin;
})[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:30:37.323

你总是可以使用 jquery 的`filter`方法：

```
var pin = '0000';

curEmployee = $(employees).filter(function(e){
  return e.pin === pin;
})[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:38:02.783

老实说，如果您使用大量对象并且性能很重要...

.. 并且您想避免 js 中的异步错误 .. 您应该选择纯 js。方法。

类似于 for 循环的东西，上帝通过所有对象。可能还有一些结果缓冲。我知道这很麻烦，你可能不会喜欢这样做。但在大多数情况下，这是最快的方式。

我个人在 js 中使用这种方法。我们正在制作 crm，因为 jquery 方式在 1000 多个对象上是行不通的......

# css - CSS 下拉菜单：子项的位置

> ID：12944346
> 
> 赞同：0
> 
> 时间：2012-10-17T22:24:16.957
> 
> 标签：css, wordpress, drop-down-menu

我尝试使用 CSS 为 Wordpress 模板创建一个下拉菜单。当我将鼠标悬停在一个菜单项（例如，您可以在图片上看到的“Cupcake Ipsum”）时，整个菜单会以一种奇怪的方式显示。

我希望图片足够不言自明。菜单项“Cupcake Ipsum”悬停在菜单的底部视图上：

![在此处输入图像描述](../Images/e4c4a646f353fdfe341aaa37310e9f68.png)

我的 HTML 代码（来自 firebug）是：

```
<div id="menu" role="navigation">
<div class="menu">
<ul>
<li class="current_page_item">
<a title="Home" href="http://whatever.com/wordpress/">Home</a>
</li>
<li class="page_item page-item-40">
<a href="http://whatever.com/wordpress/?page_id=40">Cupcake Ipsum</a>
<ul class="children">
<li class="page_item page-item-388">
<a href="http://whatever.com/wordpress/?page_id=388">Red Velvet Cupcake</a>
</li>
<li class="page_item page-item-390">
<a href="http://whatever.com/wordpress/?page_id=390">Mango Cupcake</a>
</li>
<li class="page_item page-item-392">
<a href="http://whatever.com/wordpress/?page_id=392">Chocolate Cupcake</a>
</li>
</ul>
</li>
<li class="page_item page-item-43">
<a href="http://whatever.com/wordpress/?page_id=43">Bacon Ipsum</a>
<ul class="children">
<li class="page_item page-item-405">
</ul>
</li>
<li class="page_item page-item-45">
<a href="http://whatever.com/wordpress/?page_id=45">Veggie Ipsum</a>
<ul class="children">
<li class="page_item page-item-397">
<a href="http://whatever.com/wordpress/?page_id=397">Tomato</a>
</li>
<li class="page_item page-item-399">
<a href="http://whatever.com/wordpress/?page_id=399">Lettuce</a>
</li>
<li class="page_item page-item-401">
<a href="http://whatever.com/wordpress/?page_id=401">Broccoli</a>
</li>
<li class="page_item page-item-403">
<a href="http://whatever.com/wordpress/?page_id=403">Onion</a>
</li>
</ul>
</li>
</ul>
</div>
</div> 
```

我的 CSS 代码是：

```
#menu ul li a {
text-decoration: none;
color: #CCCCCC;
font-size: 16px;
padding: 10px;
display: block;
position:relative;
}

#menu ul li a:hover {
background-color: #006699;
color: #FFFFFF;
}

#menu ul li ul li a {
clear: left;
line-break: strict;
background-color: #006699;
padding: 5px;
font-size: 10px;
}

#menu ul li ul li {
display: block;
float: none;
clear: left;
}

.menu ul li {
display: inline-block;
position: relative;
}

.menu li ul {
position: absolute;
}

.menu li:not(:hover) ul {
display: none; 
} 
```

我想创建一个下拉菜单，其中一个子项位于另一个子项下方。尝试了很多，但我无法正确安排子项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:28:58.353

你能把你的代码放在一个jsfiddle中吗？在那之前，我可以告诉你 main 的一个子元素`<li>`是`display: block;`并且将另一个 top level 推到`<li>`了位置之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:29:03.647

你遗漏了什么？[你在这个小提琴](http://jsfiddle.net/Wj9X4/)中的确切代码有效，检查你的 CSS，你有一些覆盖你的规则的东西，检查每个元素，看看你在这里粘贴的规则何时被覆盖。

# php - sublime text 2 kindari xdebug 插件的说明

> ID：12944348
> 
> 赞同：2
> 
> 时间：2012-10-17T22:24:24.213
> 
> 标签：php, xdebug, sublimetext2

我正在尝试安装 sublime text 2 插件 [https://github.com/Kindari/SublimeXdebug/blob/master/README.md](https://github.com/Kindari/SublimeXdebug/blob/master/README.md)。但是我无法让它工作：

到目前为止，我有几个问题：

它说：

```
"settings": {
    "xdebug": { "url": "http://your.web.server" }
} 
```

我的本地 wamp 服务器是“htp://127-0-0-1”——这是什么意思？

同样在遵循 Xdebug 安装向导之后，PHP.ini 文件看起来像这样：

```
zend_extension = \xampp-portable\php\ext\php_xdebug-2.2.1-5.4-vc9.dll
;xdebug.profiler_append = 0
;xdebug.profiler_enable = 1
;xdebug.profiler_enable_trigger = 0
;xdebug.profiler_output_dir = "\xampp-portable\tmp"
;xdebug.profiler_output_name = "cachegrind.out.%t-%s"
;xdebug.remote_enable = 0
;xdebug.remote_handler = "dbgp"
;xdebug.remote_host = "127.0.0.1"
;xdebug.trace_output_dir = "\xampp-portable\tmp" 
```

它是否正确？

3）此外，要启动会话，我是否需要在 URL 中显示 XDEBUG_SESSION_START。我已经在 chrome 中安装了 xdebug helper，并在 chrome 的地址栏中尝试了 htp://127-0-0-1/test1/index?XDEBUG_SESSION_START

非常感谢您提前。即使回答 1 或 2 个问题也会有很大帮助

问候，

账单

嗨，鲍勃 - 感谢您查看此内容。按照你的指示，我有一部分工作。在接下来的 24 到 48 小时内，我会多玩一点，并提出一个后续问题 - 比尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T22:22:37.233

1.  sublime text xdebug 插件将使用此路径来启用和禁用服务器上的 xdebug 会话。该 url 应与您在浏览器中用于连接服务器的 URL 相同。在这种情况下，那将是`"xdebug": { "url": "http://127.0.0.1" }`.

    如果您使用的是 Chrome xdebug 帮助程序，您可以跳过配置该部分，但您需要在 Chrome 扩展的选项中编辑 IDE 密钥。只需将下拉菜单更改为`Other`并输入`sublime.xdebug`值。

2.  您的 xdebug 设置存在一些问题。首先，在指定扩展名时必须使用完整路径。`;`其次，您的所有设置都用's注释掉。

    这是一个简化的配置，可帮助您入门。我猜到你的 xdebug dll 的路径是什么，所以如果它不反映你的文件的实际位置，请编辑它。

    ```
    zend_extension = "C:/xampp-portable/php/ext/php_xdebug-2.2.1-5.4-vc9.dll"
    xdebug.remote_enable = 1
    xdebug.remote_handler = dbgp
    xdebug.remote_host = 127.0.0.1
    xdebug.remote_port = 9000 
    ```

    编辑并保存 php.ini 文件后，重新启动/重新加载 xampp 并检查 phpinfo() 以确保 xdebug 处于活动状态。

3.  项目#1 已经处理了这个。如果你在 .sublime-project 文件中设置了 url，它会自动打开你的默认浏览器`http://127.0.0.1/?XDEBUG_SESSION_START=sublime.xdebug`。这实际上只是启动和停止调试会话的便利助手，可以放心地忽略。

    我更喜欢使用 Chrome xdebug 帮助程序。只需单击地址栏中的错误即可启用/禁用调试会话。

# svn - 是否可以创建读/写依赖？

> ID：12944349
> 
> 赞同：0
> 
> 时间：2012-10-17T22:24:28.430
> 
> 标签：svn, svn-externals

只是好奇是否可以使用 svn:externals 创建读/写（2 路）外部依赖项。我注意到，每当我在属于外部存储库的文件夹中创建新文件并添加/提交它们时，我都会收到以下错误：

```
svn: E155005: No write-lock in '/PATH/TO/DIR' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:46:37.537

您应该能够像任何其他工作副本一样对 externals 目录进行操作。

我想知道你是如何设置外部的？也许这会有所帮助：[http ://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)

通常这些错误是工作副本中的问题。您是尝试从根目录还是从外部目录提交文件？

# magento - 在控制器中添加新块并将其设置在第一个位置

> ID：12944350
> 
> 赞同：2
> 
> 时间：2012-10-17T22:24:37.760
> 
> 标签：magento, position, block

我在控制器中添加了一个新块，这是有效的。

```
$this->loadLayout();
$cmsBlock = $this->getLayout()->createBlock('cms/block')->setBlockId('cms_block_fail');
$this->getLayout()->getBlock('content')->append($cmsBlock);
$this->renderLayout(); 
```

在 Layout.xml 中，我在“内容”结构块中设置了另一个内容块。

```
<reference name="content">
    <block type="contactus/form" name="contact_us" template="contactus/contactus.phtml"/> 
</reference> 
```

我想要块之前的 CMS`contact_us`块。在`Layout.xml`我可以使用前后的参数。如果我写`after="-"`的块将被设置在结构块“内容”的最后一个位置，对吗？这是行不通的。如何`php`在 Controller 中设置此参数？还是其他想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T00:19:23.713

`$this->getLayout()->getBlock('content')->insert($cmsBlock,'contact_us');`应该导致在块之前`$cmsBlock`被`array_splice()`编辑到`content`块的`_sortedChildren()`数组中`contact_us`。

逻辑有点深奥，但你可以找到更多关于它是如何工作的信息[`Mage_Core_Block_Abstract::insert()`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Block/Abstract.php#L625)——注意它`append($block)`本质上是`insert($block,'',true)`.

# java - 在具有嵌套非原始元素的对象中实现 parcelable

> ID：12944355
> 
> 赞同：0
> 
> 时间：2012-10-17T22:25:26.543
> 
> 标签：java, android, parcelable

我在表格中有一个对象

```
public class Car implements Serializable, Parcelable {

    private static final long serialVersionUID = 1L;

    String name;
    String description;
    String brand;
    int speed;
    int brake;
    int asset;
    ArrayList<Uri> images;

    public Car(String name, String description, String brand, int speed,
            int brake, int asset, ArrayList<Uri> images) {
        super();
        this.name = name;
        this.description = description;
        this.brand = brand;
        this.speed = speed;
        this.brake = brake;
        this.asset = asset;
        this.images = images;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    public String getBrand() {
        return brand;
    }

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public int getSpeed() {
        return speed;
    }

    public void setSpeed(int speed) {
        this.speed = speed;
    }

    public int getBrake() {
        return brake;
    }

    public void setBrake(int brake) {
        this.brake = brake;
    }

    public int getAsset() {
        return asset;
    }

    public void setAsset(int asset) {
        this.asset = asset;
    }

    public ArrayList<Uri> getImages() {
        return images;
    }

    public void setImages(ArrayList<Uri> images) {
        this.images = images;
    }

    public static long getSerialversionuid() {
        return serialVersionUID;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + asset;
        result = prime * result + brake;
        result = prime * result + ((brand == null) ? 0 : brand.hashCode());
        result = prime * result
                + ((description == null) ? 0 : description.hashCode());
        result = prime * result + ((images == null) ? 0 : images.hashCode());
        result = prime * result + ((name == null) ? 0 : name.hashCode());
        result = prime * result + speed;
        return result;
    }

    @Override
    public String toString() {
        return "Car [name=" + name + ", description=" + description
                + ", brand=" + brand + ", speed=" + speed + ", brake=" + brake
                + ", asset=" + asset + ", images=" + images + "]";
    }

    public int describeContents() {
        // TODO Auto-generated method stub
        return 0;
    }

    public void writeToParcel(Parcel dest, int flags) {
        // TODO Auto-generated method stub

    }

} 
```

但我不明白如何实现

```
public void writeToParcel(Parcel dest, int flags) {
    // TODO Auto-generated method stub

} 
```

和

```
public int describeContents() {
    // TODO Auto-generated method stub
    return 0;
} 
```

Eclipse 在添加`implements Parcelable`到类后需要

在 Android 网站上，示例还展示了一种方法

```
 public static final Parcelable.Creator<MyParcelable> CREATOR
             = new Parcelable.Creator<MyParcelable>() {
         public MyParcelable createFromParcel(Parcel in) {
             return new MyParcelable(in);
         } 
```

使我的整个班级（以及所有嵌套对象作为 ArrayList）*“Parcelable”*的正确方法是什么？

按照我到达构造函数的示例

```
public Car(Parcel in) {
   name= in.readString();
 description= in.readString();
speed=in.readInt();
...

images=in.readArrayList(??????????????????);
} 
```

要传入的类加载器是`readArrayList(..)`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:05:45.063

关于`writeToParcel`你应该做的方法：

```
public void writeToParcel(Parcel dest, int flags) {
    dest.writeString(brand); //To write String
} 
```

`dest`方法中的参数`writeToParcel`有很多其他方法来编写其他对象或原始类型。要将没有特定方法的其他对象放入对象中，如果您尝试编写的对象实现了，或者您尝试编写的对象实现了`dest`，您应该使用这些方法。`writeParcelable``Parcelable``writeSerializable``Serializable`

之后，当您恢复 Parceable 对象时，您应该使用：

```
private void readFromParcel(Parcel in) {
    brand = in.readString(); //To read String
} 
```

您必须按照您编写它们的相同顺序从 in 对象中读取值。

这段代码：

```
public static final Parcelable.Creator<Car> CREATOR = new Parcelable.Creator<Car>() {
         public Car createFromParcel(Parcel in) {
             return new Car(in);
         }
} 
```

是需要调用的`readFromParcel`方法。您应该在您的类中添加一个构造函数，以便从上面的代码中调用。构造函数应如下所示：

```
public Car(Parcel in) {
   readFromParcel(in);
} 
```

关于方法`describeContents`，Stackoverflow 上有一个很好的答案，[here](https://stackoverflow.com/questions/4076946/parcelable-where-when-is-describecontents-used)。

总而言之，我从未见过任何使用这种方法的案例。该方法用于Parcel解析后释放资源，但我在网上没有找到任何解释它的好材料。您可能会一直返回 0。您可以在[此处](http://developer.android.com/reference/android/os/Parcelable.html#describeContents%28%29)找到它的 Android 文档。

# r - 在 R 中覆盖 10 个密度图，颜色与重叠图的数量成正比

> ID：12944357
> 
> 赞同：7
> 
> 时间：2012-10-17T22:25:55.210
> 
> 标签：r, ggplot2, color-scheme, kernel-density

我有一个包含 224900 个观察值和 10 个变量的数据集，这些变量是不同泰勒级数反向转换到原始数据值的结果。我希望覆盖这 10 个变量中每一个变量的密度图，以显示泰勒级数反变换对数据估计的稳健性水平。而不是只有 10 条线，我认为应用颜色会很好，这样每个密度图都会贡献 10% 的灰度。如果数据仅与其中一个图相关，则灰色为 10%，两个图的暗度为 20% 时的两倍，直到所有密度图重叠的地方，即 100%。

我曾经`melt`得到一个 2249000 行长的数据框。共有三列，第一列是人员 ID，第二列是分组变量（`variable`），第三列是每日 kJ 摄入量值（`value`）。

我使用下面的代码来覆盖密度图，`ggplot2`但它对组使用不同的颜色。如何更改此代码以获得我的灰度？我希望所有 10 个组具有相同的颜色和颜色密度；该图的目的只是使用灰度直观地显示密度图上的重叠量。

```
ggplot(Energy, aes(x=value, fill=variable)) + geom_density(alpha = 0.5) 
```

一些测试数据可供希望提供帮助的人使用，使用 5 组而不是 10 组：

```
variable <- c(rep("A",100), rep("B",100), rep("C",100), rep("D",100), rep("E",100))
value <- c(rnorm(100,5000,200), rnorm(100,5050,210), rnorm(100,5100,215), 
           rnorm(100,5150,220), rnorm(100,5200,225))
MyData <- cbind.data.frame(value, variable)
ggplot(MyData, aes(x=value, fill=variable)) + geom_density(alpha = 0.5) 
```

我认为答案可能与修改`scale_colour_grey`和/或有关，`scale_manual`​​但我对自己的理解还不够。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T22:46:25.910

这可以通过使用`group`美学和使`fill`密度为浅灰色阴影来完成`gray10`，例如`gray20`：

```
ggplot(MyData, aes(x=value, group=variable)) + geom_density(alpha = 0.5, fill="gray20") 
```

这会给你：

![密度图](../Images/a47a611b0e840e47b0cd63615dae7ae7.png)

在您的情况下，您可能想要`gray10`，因为您有 10 个组，而不是此处绘制的 5 个。

# asp.net-mvc-4 - 如何在 MVC 4 的请求中获取查询字符串变量？

> ID：12944358
> 
> 赞同：10
> 
> 时间：2012-10-17T22:25:55.103
> 
> 标签：asp.net-mvc-4, asp.net-web-api, httprequest

我在这里为我的第一个使用 Web Api 品种的 MVC 4 项目工作而大笑。

在 MVC 3 中，我可以获得如下查询字符串参数：

```
var unicornName = Request.Query["unicornName"]; 
```

但在 MVC 4 中，看起来 Request 从 a`HttpRequestBase`变为 a`HttpRequestMessage`并且 Query 参数不再存在。所以，嗯，好吧，我现在如何得到它们。我在网上找到了几个例子，但它们很荒谬。

[这个家伙建议](http://wcf.codeplex.com/discussions/287299)用“&”分割 RequestUri 的查询字符串并找到你的参数和配对。[这个例子](http://www.west-wind.com/weblog/)展示了在新的请求对象上调用一个`GetQueryNameValuePairs`方法，它返回一个键值对列表，然后做一些 linq 来找到你的键和值。要得到如此简单的东西，真的不可能如此倒退。请告诉我我错过了什么！

**注意**：我可以理解它正在采用模型绑定的方式，我应该通过操作的方法参数引入查询字符串参数，但是仍然有一些时候需要从请求中提取查询字符串变量（很容易？），例如在过滤器中。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T02:15:47.637

我想这可能是你正在寻找的，

```
 var queryValues = Request.RequestUri.ParseQueryString(); 
```

[https://stackoverflow.com/a/11729619/6819](https://stackoverflow.com/a/11729619/6819)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T22:38:55.333

如果 linq 真的那么麻烦，只需将你的结果包装`GetQueryNameValuePairs()`在字典中：

```
var requestQuery = 
    list.ToDictionary((keyItem) => keyItem.Key, (valueItem) => valueItem.Value); 
```

然后，您可以像往常一样获取字符串参数：

```
var unicornName = requestQuery["unicornName"]; 
```

# html - 在 IE9 中调整大小的图像像素化

> ID：12944359
> 
> 赞同：2
> 
> 时间：2012-10-17T22:26:01.630
> 
> 标签：html, css, image, internet-explorer-8, internet-explorer-9

在由业务用户管理的内部网页上，通常会上传远大于显示区域大小的图像。图像被渲染以适合，但在 IE8 中看起来比在 IE9 中要好得多。

以下是捕获的屏幕截图以显示差异。由于我的示例是供内部使用的图像，因此我已裁剪为仅显示一部分。然而，看到 IE9 渲染比 IE8 渲染差很多就足够了。

IE8： ![在 IE8 中查看的裁剪图像](../Images/a26b0c95e81085a7833a8c4c771758f2.png)

IE9： ![在 IE9 中查看的裁剪图像](../Images/202a7fc88ebc2c92413c15bb86027b52.png)

所以，问题分为两部分。

> 浏览器如何渲染图像的根本区别是什么？
> 
> 有什么办法可以“修复”IE9 的渲染（可能是 CSS 或浏览器设置）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-10T10:52:25.797

IE 经常改变重采样算法，在 IE9 中也是如此。未测试的错误我希望[**这**](http://www.lilianagaete.com/ie-image-scaling-bug/)可以帮助你。

# http - 可以使用 Web API 配置 HTTP 代理吗？

> ID：12944360
> 
> 赞同：0
> 
> 时间：2012-10-17T22:26:09.027
> 
> 标签：http, .net-4.0, asp.net-web-api

我想构建一个 HTTP 代理，将所有请求路由到另一个 HTTP 服务。有人对如何使用 Web-API 实现这一点有什么好的建议吗？

我的情况是我们有两组服务。一个是外部可访问的，一个不是。我想从外部服务提供一个路由器来调用所有逻辑和配置所在的内部服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:48:13.153

是的，这很容易做到。只需创建一个派生自 DelegatingHandler 的类，重写 SendAsync 并将其添加到配置对象的 MessageHandlers 集合中。

这是我创建的一个自托管控制台应用程序代理，可将 JSON 转换为 XML，反之亦然。它应该让您了解它是如何完成的。

```
class Program
{
    static void Main(string[] args)
    {
        var config = new HttpSelfHostConfiguration("http://localhost:8081");
        var server = new HttpSelfHostServer(config);

        var originServerUri = new Uri("http://example.org/origin-server/");      
        config.MessageHandlers.Add(new Converter(originServerUri));

        server.OpenAsync().Wait();

        Console.Read();

        server.CloseAsync().Wait();

    }
}

public class Converter : DelegatingHandler
{
    private HttpClient _HttpClient = new HttpClient();
    private Uri _OriginServer;
    public Converter(Uri originServer)
    {
        _OriginServer = originServer;
    }
    protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, System.Threading.CancellationToken cancellationToken)
    {
           Console.WriteLine(new HttpMessageContent(request).ReadAsStringAsync().Result);

            var newRequest = CreateNewRequest(request);

            var t = _HttpClient.SendAsync(newRequest);

            await t;

            if (t.IsCompleted)
            {
                try
                {
                    var response = CreateNewResponse(t.Result);
                    Console.WriteLine("--->");
                    Console.WriteLine(new HttpMessageContent(response).ReadAsStringAsync().Result);
                    return response;
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.Message);
                    return new HttpResponseMessage(HttpStatusCode.InternalServerError) { Content = new StringContent(ex.Message)};

                }
            }
            else
            {
                return new HttpResponseMessage(HttpStatusCode.InternalServerError) { Content = new StringContent(t.Exception.Message)};
            }
    }

    private HttpRequestMessage CreateNewRequest(HttpRequestMessage request)
    {
        var newRequest = new HttpRequestMessage();

        newRequest.Headers.Clear();
        foreach (var header in request.Headers)
        {
            newRequest.Headers.Add(header.Key, header.Value);
        }
        if (request.Content.Headers.ContentLength != 0)
        {
            newRequest.Content = TranslateContent(request.Content);
        }
        newRequest.Headers.Host = null;
        newRequest.Method = request.Method;
        newRequest.RequestUri = new Uri(_OriginServer, request.RequestUri.PathAndQuery);
        return newRequest;
    }

    private HttpResponseMessage CreateNewResponse(HttpResponseMessage response)
    {
        response.Content = TranslateContent(response.Content);
        return response;
    }

    private HttpContent TranslateContent(HttpContent httpContent)
    {
        var mediatype = httpContent.Headers.ContentType.MediaType;
        if (mediatype.Contains("+xml"))
        {
            return TranslateXmlToJson(httpContent);
        }
        else
        {
            return TranslateJsonToXml(httpContent);
        }
    }

    private HttpContent TranslateJsonToXml(HttpContent content)
    {
        var mediatype = content.Headers.ContentType.MediaType;

        string json = content.ReadAsStringAsync().Result;
        XmlDocument doc = (XmlDocument)JsonConvert.DeserializeXmlNode(json);
        return new StringContent(doc.OuterXml, Encoding.UTF8, mediatype.Replace("+json", "+xml"));
    }

    private HttpContent TranslateXmlToJson(HttpContent content)
    {
        var mediatype = content.Headers.ContentType.MediaType;
        XmlDocument doc = new XmlDocument();
        doc.Load(content.ReadAsStreamAsync().Result);

        string jsonText = JsonConvert.SerializeXmlNode(doc);
        return new StringContent(jsonText, Encoding.UTF8, mediatype.Replace("+xml", "+json"));
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:23:50.550

Thanks for the responses guys. In the end I decided to go with an IHttpHandler as the service where the proxy is needed was currently not using web-api. This was done by doing something like:

```
public class MyProxy : IHttpHandler
{
    private static readonly string CoreServicesUrl = "localhost:1234";

    public void ProcessRequest(HttpContext context)
    {
        string serviceUrl = context.Request.Headers.Get("ServiceUrl");
        if (serviceUrl == null)
        {
            context.Response.StatusCode = (int)HttpStatusCode.BadRequest;
            return;
        }

        string url = string.Format("http://{0}/api/{1}", CoreServicesUrl, serviceUrl);
        HttpResponseMessage response = RouteRequest(context, url);

        // This will handle both successful and unsuccessful responses
        context.Response.StatusCode = (int)response.StatusCode;
        var content = response.Content.ReadAsStringAsync().Result;
        context.Response.Write(content);
    }

    private static HttpResponseMessage RouteRequest(HttpContext context, string url)
    {
        var client = new HttpClient();

        if (context.Request.HttpMethod == "GET")
            return client.GetAsync(url).Result;

        if (context.Request.HttpMethod == "POST")
        {
            var stream = context.Request.GetBufferlessInputStream();
            var sr = new StreamReader(stream);
            var body = sr.ReadToEnd();
            try
            {
                return client.PostAsync(url, new StringContent(body, Encoding.UTF8, "application/json")).Result;
            }
            catch (Exception ex)
            {
                var response = new HttpResponseMessage(HttpStatusCode.InternalServerError) {ReasonPhrase = ex.Message};
                return response;
            }
        }

        // Other HTTP verbs are not supported
        return new HttpResponseMessage(HttpStatusCode.NotImplemented);
    }        

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

# python - wxPython中加速器的编程绑定

> ID：12944362
> 
> 赞同：2
> 
> 时间：2012-10-17T22:26:15.607
> 
> 标签：python, event-handling, wxpython

我正在尝试在循环中以编程方式在 wxPython 中创建和绑定加速器表，这样我就不必担心为每个加速器获取和分配新 ID（并着眼于从某些外部资源中吸入处理程序列表，而不是对它们进行硬编码）。我还通过 lambda 将一些参数传递给处理程序，因为我的许多处理程序都是相同的，但具有不同的参数（移动、缩放等）。

该类是 wx.Frame 的子类，并`setup_accelerators()`在初始化期间被调用。

```
def setup_accelerators(self):

    bindings = [
                  (wx.ACCEL_CTRL,  wx.WXK_UP, self.on_move, 'up'),
                  (wx.ACCEL_CTRL,  wx.WXK_DOWN, self.on_move, 'down'),
                  (wx.ACCEL_CTRL,  wx.WXK_LEFT, self.on_move, 'left'),
                  (wx.ACCEL_CTRL,  wx.WXK_RIGHT, self.on_move, 'right'),
                  ]

    accelEntries = []

    for binding in bindings:
        eventId = wx.NewId()
        accelEntries.append( (binding[0], binding[1], eventId) )

        self.Bind(wx.EVT_MENU, lambda event: binding[2](event, binding[3]), id=eventId)

    accelTable = wx.AcceleratorTable(accelEntries)
    self.SetAcceleratorTable(accelTable)

def on_move(self, e, direction):
    print direction 
```

但是，这似乎将所有加速器绑定到最后一个条目，因此`Ctrl`+`Up`打印`"right"`，其他三个也是如此。如何以这种方式正确绑定多个处理程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:57:43.903

知道了。问题是你没有将你的方向作为参数传递给你的 lambda（它只查看事件参数（和 self），因为这就是你的 lambda 被定义为接受的全部） [这个](http://wiki.wxpython.org/Passing%20Arguments%20to%20Callbacks)页面给了我我需要的帮助让它工作（这是一个[要点](https://gist.github.com/3913332)）：

```
import wx

class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Programmatic binding of accelerators in wxPython", size=(450,150))

        # Add a panel so it looks the correct on all platforms
        panel = wx.Panel(self, wx.ID_ANY)
        bindings = [
                  (wx.ACCEL_CTRL,  wx.WXK_UP, 'up'),
                  (wx.ACCEL_CTRL,  wx.WXK_DOWN, 'down'),
                  (wx.ACCEL_CTRL,  wx.WXK_LEFT, 'left'),
                  (wx.ACCEL_CTRL,  wx.WXK_RIGHT, 'right'),
                  ]

        accelEntries = []

        for binding in bindings:
            eventId = wx.NewId()
            accelEntries.append( (binding[0], binding[1], eventId) )

            self.Bind(wx.EVT_MENU, lambda evt, temp=binding[2]: self.on_move(evt, temp), id=eventId)

        accelTable  = wx.AcceleratorTable(accelEntries)
        self.SetAcceleratorTable(accelTable )
     #----------------------------------------------------------------------

    def on_move(self, Event, direction):
        print "You pressed CTRL+"+direction

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

我原来的答案（这是一个可接受的替代解决方案）是：

```
import wx

class MyForm(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        wx.Frame.__init__(self, None, wx.ID_ANY, "Tutorial", size=(500,500))

        # Add a panel so it looks the correct on all platforms
        panel = wx.Panel(self, wx.ID_ANY)
        bindings = [
                  (wx.ACCEL_CTRL,  wx.WXK_UP, self.on_move_up),
                  (wx.ACCEL_CTRL,  wx.WXK_DOWN, self.on_move_down),
                  (wx.ACCEL_CTRL,  wx.WXK_LEFT, self.on_move_left),
                  (wx.ACCEL_CTRL,  wx.WXK_RIGHT, self.on_move_right),
                  ]

        accelEntries = []

        for binding in bindings:
            eventId = wx.NewId()
            accelEntries.append( (binding[0], binding[1], eventId) )

            self.Bind(wx.EVT_MENU, binding[2], id=eventId)

        accelTable  = wx.AcceleratorTable(accelEntries)
        self.SetAcceleratorTable(accelTable )
     #----------------------------------------------------------------------
    def on_move_up(self, event):
        print "You pressed CTRL+up"
    def on_move_down(self, event):
        print "You pressed CTRL+down"
    def on_move_left(self, event):
        print "You pressed CTRL+left"
    def on_move_right(self, event):
        print "You pressed CTRL+right"

# Run the program
if __name__ == "__main__":
    app = wx.App(False)
    frame = MyForm()
    frame.Show()
    app.MainLoop() 
```

# css - 如何使 jQuery UI 导航菜单水平？

> ID：12944364
> 
> 赞同：46
> 
> 时间：2012-10-17T22:26:32.580
> 
> 标签：css, jquery-ui, menu

我喜欢 jQuery UI 的东西！

我喜欢导航菜单，但我似乎无法让它水平。我必须错过一些小事。

有人知道如何更改CSS吗？我试过这个，但它适用于旧版本并且不起作用，因为不再“清晰”让它们彼此重叠。

相关CSS：

```
.ui-menu { list-style:none; padding: 2px; margin: 0; display:block; outline: none; }
.ui-menu .ui-menu { margin-top: -3px; position: absolute; }
.ui-menu .ui-menu-item { margin: 0; padding: 0; zoom: 1; width: 100%; }
.ui-menu .ui-menu-divider { margin: 5px -2px 5px -2px; height: 0; font-size: 0; line-height: 0; border-width: 1px 0 0 0; }
.ui-menu .ui-menu-item a { text-decoration: none; display: block; padding: 2px .4em; line-height: 1.5; zoom: 1; font-weight: normal; }
.ui-menu .ui-menu-item a.ui-state-focus,
.ui-menu .ui-menu-item a.ui-state-active { font-weight: normal; margin: -1px; }

.ui-menu .ui-state-disabled { font-weight: normal; margin: .4em 0 .2em; line-height: 1.5; }
.ui-menu .ui-state-disabled a { cursor: default; } 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-19T03:30:45.177

我很欣赏将菜单转换为菜单栏的所有这些努力，因为我讨厌尝试破解 CSS。感觉就像我在干涉我永远无法理解的力量！[我认为在jquery ui 的菜单栏分支中](https://github.com/jquery/jquery-ui/tree/menubar)添加可用的菜单栏文件要容易得多。

[我从jquery ui 下载站点](http://jqueryui.com/download/)下载了完整的 jquery ui css 捆绑文件

在我的文档的开头，我放置了包含所有内容的 jquery ui css 文件（我目前使用的是 1.9.x 版），然后是从[jquery ui 的菜单栏分支下载的菜单栏小部件的特定 CSS 文件](https://github.com/jquery/jquery-ui/tree/menubar)

```
<link type="text/css" href="css/jquery-ui.css" rel="stylesheet" />
<link type="text/css" href="css/jquery.ui.menubar.css" rel="stylesheet" /> 
```

不要忘记包含 jQuery UI 使用的所有小图标的 images 文件夹需要与 jquery-ui.css 文件位于同一文件夹中。

然后最后我的身体：

```
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.0.custom.min.js"></script>
<script type="text/javascript" src="js/menubar/jquery.ui.menubar.js"></script> 
```

这是最新版本的 jQuery 的副本，然后是 jQuery UI 文件的副本，然后是从[jquery ui 的菜单栏分支下载的菜单栏模块](https://github.com/jquery/jquery-ui/tree/menubar)

菜单栏 CSS 文件非常短：

```
.ui-menubar { list-style: none; margin: 0; padding-left: 0; }
.ui-menubar-item { float: left; }
.ui-menubar .ui-button { float: left; font-weight: normal; border-top-width: 0 !important; border-bottom-width: 0 !important; margin: 0; outline: none; }
.ui-menubar .ui-menubar-link { border-right: 1px dashed transparent; border-left: 1px dashed transparent; }
.ui-menubar .ui-menu { width: 200px; position: absolute; z-index: 9999; font-weight: normal; } 
```

但菜单栏 JavaScript 文件有 328 行 - 太长，无法在此处引用。有了它，你可以像这个例子一样简单地调用 menubar() ：

```
$("#menu").menubar({
    autoExpand: true,
    menuIcon: true,
    buttons: true,
    select: select
}); 
```

正如我所说，我欣赏所有尝试破解菜单对象以将其变成水平栏的尝试，但我发现它们都缺乏水平菜单栏的某些标准功能。我不确定为什么这个小部件还没有与 jQuery UI 捆绑在一起，但大概还是有一些 bug 需要解决。例如，我在 IE 7 Quirks Mode 下尝试过，定位很奇怪，但在 Firefox、Safari 和 IE 8+ 中看起来很棒。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-17T22:33:01.627

你可以这样做：

```
/* Clearfix for the menu */
.ui-menu:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
} 
```

并设置：

```
.ui-menu .ui-menu-item {
    display: inline-block;
    float: left;
    margin: 0;
    padding: 0;
    width: auto;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-04-11T07:37:51.093

这篇文章启发了我尝试 jQuery ui 菜单。

[http://jsfiddle.net/7Bvap/](http://jsfiddle.net/7Bvap/)

```
<ul id="nav">
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 2</a></li>
    <li><a href="#">Item 3</a>
        <ul>
            <li><a href="#">Item 3-1</a>
            <ul>
                <li><a href="#">Item 3-11</a></li>
                <li><a href="#">Item 3-12</a></li>
                <li><a href="#">Item 3-13</a></li>
            </ul>
            </li>
            <li><a href="#">Item 3-2</a></li>
            <li><a href="#">Item 3-3</a></li>
            <li><a href="#">Item 3-4</a></li>
            <li><a href="#">Item 3-5</a></li>
        </ul>
    </li>
    <li><a href="#">Item 4</a></li>
    <li><a href="#">Item 5</a></li>
</ul>

.ui-menu { 
    overflow: hidden;
}
.ui-menu .ui-menu {
    overflow: visible !important;
}
.ui-menu > li { 
    float: left;
    display: block;
    width: auto !important;
}
.ui-menu ul li {
    display:block;
    float:none;
}
.ui-menu ul li ul {
    left:120px !important;
    width:100%;
}
.ui-menu ul li ul li {
    width:auto;
}
.ui-menu ul li ul li a {
    float:left;
}
.ui-menu > li {
    margin: 5px 5px !important;
    padding: 0 0 !important;
}
.ui-menu > li > a { 
    float: left;
    display: block;
    clear: both;
    overflow: hidden;
}
.ui-menu .ui-menu-icon { 
    margin-top: 0.3em !important;
}
.ui-menu .ui-menu .ui-menu li { 
    float: left;
    display: block;
}

$( "#nav" ).menu({position: {at: "left bottom"}}); 
```

[http://jsfiddle.net/vapD7/](http://jsfiddle.net/vapD7/)

```
<ul id="nav">
    <li><a href="#">Item 1</a></li>
    <li><a href="#">Item 2</a></li>
    <li><a href="#">Item 3</a>
        <ul>
            <li><a href="#">Item 3-1</a>
            <ul>
                <li><a href="#">Item 3-11</a></li>
                <li><a href="#">Item 3-12</a></li>
                <li><a href="#">Item 3-13</a></li>
            </ul>
            </li>
            <li><a href="#">Item 3-2</a></li>
            <li><a href="#">Item 3-3</a></li>
            <li><a href="#">Item 3-4</a></li>
            <li><a href="#">Item 3-5</a></li>
        </ul>
    </li>
    <li><a href="#">Item 4</a></li>
    <li><a href="#">Item 5</a></li>
</ul>

.ui-menu { list-style:none; padding: 2px; margin: 0; display:block; outline: none; }
.ui-menu .ui-menu { margin-top: -3px; position: absolute; }
.ui-menu .ui-menu-item {
    display: inline-block;
    float: left;
    margin: 0;
    padding: 0;
    width: auto;
}
.ui-menu .ui-menu-divider { margin: 5px -2px 5px -2px; height: 0; font-size: 0; line-height: 0; border-width: 1px 0 0 0; }
.ui-menu .ui-menu-item a { text-decoration: none; display: block; padding: 2px .4em; line-height: 1.5; zoom: 1; font-weight: normal; }
.ui-menu .ui-menu-item a.ui-state-focus,
.ui-menu .ui-menu-item a.ui-state-active { font-weight: normal; margin: -1px; }

.ui-menu .ui-state-disabled { font-weight: normal; margin: .4em 0 .2em; line-height: 1.5; }
.ui-menu .ui-state-disabled a { cursor: default; }
.ui-menu:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

$( "#nav" ).menu({position: {at: "left bottom"}}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-08T18:02:01.300

我花了 3 天时间寻找 jquery UI 和 CSS 解决方案，我合并了一些我看到的代码，修复了一点，最后（连同其他代码）我可以让它工作！

[http://jsfiddle.net/Moatilliatta/97m6ty1a/](http://jsfiddle.net/Moatilliatta/97m6ty1a/)

```
<ul id="nav" class="testnav">
    <li><a class="clk" href="#">Item 1</a></li>
    <li><a class="clk" href="#">Item 2</a></li>
    <li><a class="clk" href="#">Item 3</a>
        <ul class="sub-menu">
            <li><a href="#">Item 3-1</a>
                <ul class="sub-menu">
                    <li><a href="#">Item 3-11</a></li>
                    <li><a href="#">Item 3-12</a>
                        <ul>
                            <li><a href="#">Item 3-111</a></li>                         
                            <li><a href="#">Item 3-112</a>
                                <ul>
                                    <li><a href="#">Item 3-1111</a></li>                            
                                    <li><a href="#">Item 3-1112</a></li>                            
                                    <li><a href="#">Item 3-1113</a>
                                        <ul>
                                            <li><a href="#">Item 3-11131</a></li>                           
                                            <li><a href="#">Item 3-11132</a></li>                           
                                        </ul>
                                    </li>                           
                                </ul>
                            </li>
                            <li><a href="#">Item 3-113</a></li>
                        </ul>
                    </li>
                    <li><a href="#">Item 3-13</a></li>
                </ul>
            </li>
            <li><a href="#">Item 3-2</a>
                <ul>
                    <li><a href="#."> Item 3-21 </a></li>
                    <li><a href="#."> Item 3-22 </a></li>
                    <li><a href="#."> Item 3-23 </a></li>
                </ul>   
            </li>
            <li><a href="#">Item 3-3</a></li>
            <li><a href="#">Item 3-4</a></li>
            <li><a href="#">Item 3-5</a></li>
        </ul>
    </li>
    <li><a class="clk" href="#">Item 4</a>
        <ul class="sub-menu">
            <li><a href="#">Item 4-1</a>
                <ul class="sub-menu">
                    <li><a href="#."> Item 4-11 </a></li>
                    <li><a href="#."> Item 4-12 </a></li>
                    <li><a href="#."> Item 4-13 </a>
                        <ul>
                            <li><a href="#."> Item 4-131 </a></li>
                            <li><a href="#."> Item 4-132 </a></li>
                            <li><a href="#."> Item 4-133 </a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a href="#">Item 4-2</a></li>
            <li><a href="#">Item 4-3</a></li>
        </ul>
    </li>
    <li><a class="clk" href="#">Item 5</a></li>
</ul> 
```

javascript

```
$(document).ready(function(){

var menu = "#nav";
var position = {my: "left top", at: "left bottom"};

$(menu).menu({

    position: position,
    blur: function() {
        $(this).menu("option", "position", position);
        },
    focus: function(e, ui) {

        if ($(menu).get(0) !== $(ui).get(0).item.parent().get(0)) {
            $(this).menu("option", "position", {my: "left top", at: "right top"});
            }
    }
});     }); 
```

CSS

```
.ui-menu {width: auto;}.ui-menu:after {content: ".";display: block;clear: both;visibility: hidden;line-height: 0;height: 0;}.ui-menu .ui-menu-item {display: inline-block;margin: 0;padding: 0;width: auto;}#nav{text-align: center;font-size: 12px;}#nav li {display: inline-block;}#nav li a span.ui-icon-carat-1-e {float:right;position:static;margin-top:2px;width:16px;height:16px;background:url(https://www.drupal.org/files/issues/ui-icons-222222-256x240.png) no-repeat -64px -16px;}#nav li ul li {width: 120px;border-bottom: 1px solid #ccc;}#nav li ul {width: 120px; }.ui-menu .ui-menu-item li a span.ui-icon-carat-1-e {background:url(https://www.drupal.org/files/issues/ui-icons-222222-256x240.png) no-repeat -32px -16px !important; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-28T13:34:56.243

当您将鼠标悬停在主水平菜单上的主题上时，只需将 jquery-ui 菜单视为垂直下拉菜单。这样，主菜单上的每个主题都有一个单独的 jquery ui 菜单。水平主菜单只是封装在主菜单 div 中的 float:left div 的集合。然后，您使用悬停和悬停来弹出每个菜单。

```
$('.mainmenuitem').hover(
    function(){ 
        $(this).addClass('ui-state-focus');
        $(this).addClass('ui-corner-all');
        $(this).addClass('ui-state-hover');
        $(this).addClass('ui-state-active');
        $(this).addClass('mainmenuhighlighted');
        // trigger submenu
        var position=$(this).offset();
        posleft=position.left;
        postop=position.top;
        submenu=$(this).attr('submenu');
        showSubmenu(posleft,postop,submenu);    
    },
    function(){ 
        $(this).removeClass('ui-state-focus');
        $(this).removeClass('ui-corner-all');
        $(this).removeClass('ui-state-hover');
        $(this).removeClass('ui-state-active');
        $(this).removeClass('mainmenuhighlighted');
        // remove submenu
        $('.submenu').hide();
    }
    ); 
```

showSubmenu 函数很简单——它只是定位子菜单并显示它。

```
function showSubmenu(left,top,submenu){
    var tPosX=left;
    var tPosY=top+28;
    $('#'+submenu).css({left:tPosX, top:tPosY,position:'absolute'});
    $('#'+submenu).show();
} 
```

然后，您需要确保子菜单在光标位于其上时可见，并在您离开时消失（这应该在您的 document.ready 函数中。

```
$('.submenu').hover(
            function(){ 
                $(this).show();
            },
            function(){ 
                $(this).hide();
            }
            ); 
```

也不要忘记隐藏你的子菜单开始 - 在 document.ready 功能

```
$(".submenu" ).hide(); 
```

在此处查看完整代码

[http://jsfiddle.net/R4nyn/](http://jsfiddle.net/R4nyn/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-11T21:12:58.973

添加到 Mihalis Bagos 的答案。我最终做了以下事情：

```
<style>
.ui-menu{
   z-index: 1000;
}

#menubar-layout-container > .ui-menu:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

#menubar-layout-container > .ui-menu > .ui-menu-item {
    display: inline-block;
    float: left;
    margin: 0;
    padding: 0;
    width: auto;
}

.ui-menu .ui-menu-icon{
   display: none;
}
</style> 
```

这使顶级菜单水平，但使任何子菜单保持垂直。

我不得不删除图标，因为这弄乱了布局

子菜单定位似乎也有问题。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-12-04T11:13:35.300

我是stackoverflow的新手，所以请友好:)但是转向水平jQuery ui菜单的问题，我能设法解决问题的唯一方法（参考[this](http://coderevision.com/how-to-have-a-jquery-ui-menu-displayed-horizontally/)）是设置：

```
#nav li {width: auto; clear: none; float: left}
#nav ul li {width: auto; clear: none; float:none} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-17T22:35:19.517

改变：

```
.ui-menu .ui-menu-item { 
    margin: 0; 
    padding: 0; 
    zoom: 1; 
    width: 100%; 
} 
```

至：

```
.ui-menu .ui-menu-item { 
    margin: 0; 
    padding: 0; 
    zoom: 1; 
    width: auto; 
    float:left; 
 } 
```

应该让你开始。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-17T19:42:44.063

我知道这是一个旧线程，但我正在深入研究 jQuery UI 源代码并建立在 Rowan 的答案之上，该答案更接近我一直在寻找的内容。只有我需要胡萝卜，因为我觉得有一个可能的子菜单的视觉指示器很重要。通过查看源代码（.js 和 .css），我想出了这个方法，它允许胡萝卜可见，而不会弄乱设计（高度），并且还允许菜单垂直显示在父项下方。

在 jquery-ui.js 中进行搜索以查找`$.widget( "ui.menu")`并将位置更改为：

```
position: {
my: "center top",
at: "center bottom"
} 
```

在你的CSS中添加：

```
#nav > .ui-menu:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

#nav > .ui-menu > .ui-menu-item {
    display: inline-block;
    float: left;

    margin: 0;
    padding: 3px;

    width: auto;
}

.ui-menu .ui-menu-item a {
    padding: 0;
}

.ui-menu .ui-menu-icon{
    position: relative;
    left: 1px;
    top: 6px;
} 
```

最终结果将是一个水平的 jQuery UI 菜单，子菜单垂直显示在父菜单项下方。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-01-20T19:54:33.870

我发现的最佳选择是一个名为**jMenu**的插件。

主要： [http](http://www.myjqueryplugins.com/jquery-plugin/jmenu)
://www.myjqueryplugins.com/jquery-plugin/jmenu 演示： [http](http://demos.myjqueryplugins.com/jmenu/)
://demos.myjqueryplugins.com/jmenu/ GitHub： [https ://github.com/alpixel/jMenu](https://github.com/alpixel/jMenu)

截屏：
![演示菜单](../Images/4a379c0df5da8af7f966e4f28e59a240.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-02-20T06:20:49.720

要获得带有垂直下拉菜单的水平导航栏，请结合使用表格和无序列表。

级别 1 的项目由表格单元格表示，后续级别由无序列表表示。

子菜单的定位是个问题。默认设置是让它们直接出现在旁边，但是当在顶级项目上时，这会掩盖水平导航栏中的后续项目。让它们出现在下面对于单个下拉菜单来说是可以的，但是如果下面有第二层，那么第二层会掩盖第一层的其余部分。解决方案是在下方打开菜单并稍微向右打开，请参阅菜单调用中的“位置”选项。

```
<style type="text/css">
  #trJMenu td { white-space: nowrap; width: auto; }
  #trJMenu li { white-space: nowrap; width: auto; }
</style>

<script language="javascript" type="text/javascript">
  $(document).ready(function(){
    $("#trJMenu").menu( { position: { my: "left top", at: "center bottom" } } );          
  });
</script>

<table>
  <tr id='trJMenu'>
    <td>
      <a href='#'>Timesheets</a>
      <ul>
        <li><a href='#'>Labour</a></li>
        <li><a href='#'>Chargeout Report</a></li>
      </ul>
    </td>
    <td>
      <a href='#'>Activity Management</a>
      <ul>
        <li><a href='#'>Activities</a></li>
        <li><a href='#'>Proposals</a></li>
      </ul>
    </td>
  </tr>
</table> 
```

# r - 从 github 安装 ggthemes r-package 开发者版本时出错

> ID：12944365
> 
> 赞同：3
> 
> 时间：2012-10-17T22:26:34.217
> 
> 标签：r, ggplot2

[从github安装](https://github.com/jrnold/ggthemes)[Jeffrey Arnold](http://www.jrnold.me/)包时遇到错误。

```
library("devtools")
install_github("ggthemes", "jrnold")
Installing github repo(s) ggthemes/master from jrnold
Installing ggthemes.zip from https://api.github.com/repos/jrnold/ggthemes/zipball/master
Error as.list(param_pieces[, 2]) : Index out of bounds 
```

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:18:02.353

当我从 github 安装它时，我没有收到此错误。你能在github上打开一个问题吗？包括 的输出`sessionInfo()`。还要`options(error=recover)`在运行它之前设置，这样我就可以了解错误发生在哪里。

# android - 如果服务停止，后台线程会发生什么？

> ID：12944371
> 
> 赞同：1
> 
> 时间：2012-10-17T22:27:12.643
> 
> 标签：android, service, android-widget

如果我有一个 Android 服务，其中`onStartCommand`包含以下内容：

```
MyWidgetUpdater updater = new MyWidgetUpdater();
updater.updateWidgets(...); 
```

在`updater`后台线程中检索数据，然后在前台线程上更新小部件。如果在`stopSelf()`后台处理完成之前停止服务（例如）会发生什么？这是否会导致小部件有时无法完成更新（因为线程可能已被杀死）？如果是这样，是否有设计模式可以知道您的所有小部件何时完成更新以及停止服务是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:31:22.987

> 如果在后台处理完成之前停止服务（例如 stopSelf()）会发生什么？

假设这是您自己派生的线程，Android 不会注意到该线程，该线程将继续运行、泄漏，直到 Android 终止您的进程。

> 如果是这样，是否有设计模式可以知道您的所有小部件何时完成更新以及停止服务是否安全？

`stopSelf()`在工作完成之前不要打电话。我不知道你在哪里打电话`stopSelf()`，但在你引用的模式中，它通常会在该线程的末尾完成。

这是受欢迎的原因之一`IntentService`：它为您处理所有线程和`stopSelf()`内容。

# java - 如何将 byte[] 转换为 Byte[] 和其他方式？

> ID：12944377
> 
> 赞同：87
> 
> 时间：2012-10-17T22:27:54.100
> 
> 标签：java, arrays, byte, boxing

在不使用任何 3rd方库的情况下如何转换`byte[]`为`Byte[]`和？`Byte[]``byte[]`

有没有办法只使用标准库快速做到这一点？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2016-09-05T11:38:53.023

字节 [] 到 字节 [] ：

```
byte[] bytes = ...;
Byte[] byteObject = ArrayUtils.toObject(bytes); 
```

字节[] 到字节[] ：

```
Byte[] byteObject = new Byte[0];
byte[] bytes = ArrayUtils.toPrimitive(byteObject); 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-10-17T22:31:13.313

`Byte`类是原始的*包装器*`byte`。这应该做的工作：

```
byte[] bytes = new byte[10];
Byte[] byteObjects = new Byte[bytes.length];

int i=0;    
// Associating Byte array values with bytes. (byte[] to Byte[])
for(byte b: bytes)
   byteObjects[i++] = b;  // Autoboxing.

....

int j=0;
// Unboxing Byte values. (Byte[] to byte[])
for(Byte b: byteObjects)
    bytes[j++] = b.byteValue(); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-06-16T22:50:32.113

Java 8 解决方案：

```
Byte[] toObjects(byte[] bytesPrim) {
    Byte[] bytes = new Byte[bytesPrim.length];
    Arrays.setAll(bytes, n -> bytesPrim[n]);
    return bytes;
} 
```

不幸的是，您不能这样做以从 转换`Byte[]`为`byte[]`. `Arrays`有`setAll`, `double[]`,`int[]`和`long[]`, 但没有其他原始类型。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-11-12T09:56:10.903

您可以在 Apache Commons 语言库 ArrayUtils 类中使用 toPrimitive 方法，如此处所建议的 - [Java - Byte[] to byte[]](https://stackoverflow.com/questions/6430841/java-byte-to-byte)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-06-16T22:43:43.703

```
byte[] toPrimitives(Byte[] oBytes)
{

    byte[] bytes = new byte[oBytes.length];
    for(int i = 0; i < oBytes.length; i++){
        bytes[i] = oBytes[i];
    }
    return bytes;

} 
```

逆：

```
//byte[] to Byte[]
Byte[] toObjects(byte[] bytesPrim) {

    Byte[] bytes = new Byte[bytesPrim.length];
    int i = 0;
    for (byte b : bytesPrim) bytes[i++] = b; //Autoboxing
    return bytes;

} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-17T22:34:12.080

从字节[]到字节[]：

```
 byte[] b = new byte[]{1,2};
    Byte[] B = new Byte[b.length];
    for (int i = 0; i < b.length; i++)
    {
        B[i] = Byte.valueOf(b[i]);
    } 
```

从 Byte[] 到 byte[] （使用我们之前定义的`B`）：

```
 byte[] b2 = new byte[B.length];
    for (int i = 0; i < B.length; i++)
    {
        b2[i] = B[i];
    } 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-08T11:15:45.900

如果有人更喜欢 Stream API 而不是普通循环。

```
private Byte[] toObjects(byte[] bytes) {
    return IntStream.range(0, bytes.length)
            .mapToObj(i -> bytes[i])
            .toArray(Byte[]::new);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-21T20:14:23.380

退后。看看更大的图景。由于 Java 的严格类型大小写类似这样，您无法将 byte[] 转换为 Byte[] 或反之亦然

> 列表<字节> 或列表<字节[]>

现在你有 byte[] 和 Byte[] 并且必须转换。这会有所帮助。

将所有字节 [] 保存在这样的列表中：List<byte[]> 而不是 List< Byte> 或 List<Byte[]>。（byte 是一个原始数据，byte[] 是一个对象）

当您获取字节时，请执行以下操作（网络套接字示例）：

```
ArrayList<byte[]> compiledMessage = new ArrayList<byte[]>;
...
compiledMessage.add(packet.getData()); 
```

然后，当您想将所有字节放在一条消息中时，请执行以下操作：

```
byte[] fromListOfNotByteArray (List<byte[]> list) {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos;
    try {
        oos = new ObjectOutputStream(baos);
        oos.writeObject(list);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return baos.toByteArray();
} 
```

这样，您可以将所有部分保留在 List<byte[]> 中，将整个部分保留在 byte[] 中，而无需在 for 循环中进行一堆疯狂的复制任务，而到处都是小婴儿 byte[]。;)

现在你知道了——教别人。

# android - 在 Android 上以编程方式打开/关闭 GPS

> ID：12944378
> 
> 赞同：3
> 
> 时间：2012-10-17T22:27:55.390
> 
> 标签：android, gps

> **可能重复：**
> [像 Tasker 一样以编程方式启用 GPS](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)

是否可以以编程方式在 android 上打开/关闭 gps？这篇 SO 帖子中提到了：[如何在 Android 上以编程方式启用或禁用 GPS？](https://stackoverflow.com/questions/4721449/enable-gps-programatically-like-tasker)未经用户同意不能这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T22:37:34.970

不，这是不可能的。您可以获得的最接近的方法是触发向用户显示 GPS 设置的 Intent。请遵循本指南：[Android GPS 意图指南](http://www.helloandroid.com/tutorials/calling-system-settings-android-app-gps-example)

# mysql - 最孤立的记录

> ID：12944381
> 
> 赞同：2
> 
> 时间：2012-10-17T22:28:09.293
> 
> 标签：mysql

考虑一个带有`datetime`字段的 MySQL 表。我想选择与下一个或上一个`datetime`值之间的时间最远的行。例如，如果存在具有以下值的记录：

```
1   2012-10-17 12:00
2   2012-10-16 12:00
3   2012-10-14 12:00
4   2012-10-08 12:00
5   2012-10-03 12:00
6   2012-10-01 12:00 
```

因此，最“孤立”的记录是记录 #4，因为它距离最近的记录 5 天。

请注意，对于“最孤立”，可能有也可能没有关系，在这种情况下，可能会返回任何绑定行，或全部返回。此外，尽管该示例显示的记录具有`datetime`按顺序排列的值，但在真实数据集中可能不一定如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:42:12.043

如果您的表定义为 foo (id, time) 您可以使用以下 sql：

```
SELECT t1.id FROM foo t2
   INNER JOIN foo t1 ON t1.id=t2.id+1
   INNER JOIN foo t3 ON t3.id=t1.id+1
  WHERE timestampdiff(day,t1.time,t2.time)+timestampdiff(day,t3.time,t1.time)=
    (SELECT max(timestampdiff(day,t1.time,t2.time)+timestampdiff(day,t3.time,t1.time))
         FROM foo t2 INNER JOIN foo t1 ON t1.id=t2.id+1 
                     INNER JOIN foo t3 ON t3.id=t1.id+1) 
```

获取所有“最孤立”的条目。如果您只需要一个条目，您可以随时添加一个`limit 1`.
另请注意，这里我们假设条目按时间戳排序。如果条目没有按时间排序，您可以创建一个视图来对它们进行排序。

[sqlfiddle](http://www.sqlfiddle.com/#!2/aa873/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:48:21.387

您可以使用它来确定到最近记录的距离：

```
SELECT foo.d, TIMESTAMPDIFF(DAY, max(earlier.d), d) as previous, TIMESTAMPDIFF(DAY, d, min(later.d)) as next
FROM foo
LEFT JOIN foo later ON foo.d < later.d
LEFT JOIN foo earlier ON foo.d > earlier.d
GROUP BY foo.d 
```

您可以很容易地获得这些值中最远的值。

# android - libgdx obj 加载器问题

> ID：12944383
> 
> 赞同：0
> 
> 时间：2012-10-17T22:28:18.047
> 
> 标签：android, libgdx

我正在尝试使用 Libgdx 制作我的第一个 3d 游戏。但是，当我加载我的 .obj 文件时，它看起来不像我预期的那样

在电话上

![在此处输入图像描述](../Images/58db181d6dde3ad2ade7343491f576ec.png)

在搅拌机中

![在此处输入图像描述](../Images/d52c9035c02068a08bf4adabf2272c62.png)

我正在加载以下内容

```
@Override
public void create() {           
    InputStream stream = Gdx.files.internal("data/test.obj").read();
    model = ObjLoader.loadObj(stream, true);
    try {
        stream.close();
    } catch (IOException e) {
         }        
}

@Override
public void render() {
    Gdx.gl.glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    camera.update();
    camera.apply(Gdx.gl10);
    Gdx.gl10.glTranslatef(0.0f,0.0f,-3.0f);
    model.render(GL10.GL_TRIANGLES);
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:12:30.893

您需要启用 GL10.GL_TEXTURE_2D

```
Gdx.graphics.getGL10().glEnable(GL10.GL_TEXTURE_2D);
    model.render();
Gdx.graphics.getGL10().glDisable(GL10.GL_TEXTURE_2D); 
```

# jquery - 遍历jquery代码

> ID：12944384
> 
> 赞同：0
> 
> 时间：2012-10-17T22:28:21.207
> 
> 标签：jquery, slide, loops

我建了一个大表，我想遍历它上面的一些类名以使用 jquery 效果（slideToggle），但是当我尝试通过 For 进行循环时，什么也没有发生

html:

```
 <tr>
                        <td dir="ltr"><a href="">array_push()</a></td>
                        <td>اضافة عنصر او أكثر لنهاية المصفوفة</td>
                        <td>530</td>
                        <td class="example2">12.5</td></td>
                        <td>12.5</td>

                </tr>

         <thead>
        <tr> 
        <th colspan="5" rowspan="3" class="slide2" >
       <pre class="prettyprint lang-php ">
$a=array("Dog","Cat");
array_push($a,"Horse","Bird");
print_r($a);

       </pre>
        </th>
        </tr>
        </thead> 
```

我想遍历类名（示例，幻灯片）以获取像示例1，示例2这样的数字......

jQuery：

```
$(document).ready(function(){
    for (var i=1;i<=120;i++){
    $(".example[i]").click(function(){

        $(".slide[i]").slideToggle(500);

        })

    }

    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:33:17.883

我认为您没有将索引附加到课程中。看下面的代码：

```
$(document).ready(function(){
    for (var i=1;i<=120;i++){
    $(".example" + i).click(function(){
      $(".slide" + i).slideToggle(500);
    })
  }
}); 
```

# mysql - MySQL 不工作

> ID：12944386
> 
> 赞同：3
> 
> 时间：2012-10-17T22:28:29.633
> 
> 标签：mysql, django, sockets, amazon-ec2

我有一个在 Amazon Linux AMI 上运行的亚马逊 ec2 实例及其一个微型实例。我想将 Django 安装到我的服务器上，所以我输入了这些命令

```
wget http://www.mlsite.net/blog/wp-content/uploads/2008/11/go
wget http://www.mlsite.net/blog/wp-content/uploads/2008/11/django.conf
chmod 744 go
./go 
```

所以在我完成后，我跑`sudo service httpd restart`了`sudo service mysqld restart`

这就是 mysqld 的结果：

```
Stopping mysqld:                                           [  OK  ]
MySQL Daemon failed to start.
Starting mysqld:                                           [FAILED] 
```

所以我删除了 django 文件`/usr/local/python2.6.8/site-packages/django_registration.egg` 并尝试查找错误，我发现在我 `/etc/my.cnf`的套接字中，它说

```
[mysqld]
# Settings user and group are ignored when systemd is used.
# If you need to run mysqld under different user or group, 
# customize your systemd unit file for mysqld according to the
# instructions in http://fedoraproject.org/wiki/Systemd
datadir=/mnt/ebs/mysql
socket=/var/lib/mysql/mysql.sock
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

[mysqld]
default-storage-engine=INNODB

[mysqld]
default-storage-engine=INNODB

[mysqld]
default-storage-engine=INNODB

[mysqld]
default-storage-engine=INNODB 
```

所以我去了`/var/lock/subsys/`，没有`mysql.sock`。我尝试使用 vim 创建一个，但它仍然无法正常工作。然后我检查了错误日志，它说

```
120712 20:33:11 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120712 20:33:15 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql 
```

## 更新：

我输入了这些命令：

```
cd /var/lib/mysql/
touch mysql.sock
chmod +x mysql.sock
chown mysql:mysql -R * 
```

而且还是不行……

所以我现在几乎迷路了。我知道这有关系`mysql.sock`

如果您可能知道造成这种情况的原因，请告诉我吗？我的服务器上有一个 wordpress 网站，所以我需要 MySQL 才能工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:19:13.087

检查`go`您下载并执行的脚本，我发现以下几行：

```
# Change the MySQL data directory
sed -e 's!/var/lib/mysql$!/mnt/ebs/mysql!' -i /etc/my.cnf 
```

这有效地更改了您的 mysql 数据目录（`datadir`设置），因此您无法访问任何以前创建的数据库（如 wordpress 数据库）。

作为一个疯狂的猜测，我认为 mysqld 无法访问`/mnt/ebs/mysql`，因此无法启动。尝试将其更改回`/var/lib/mysql`. 但是，这可能会干扰您的 django。如果你让 django 配置的 mysql 运行，你总是可以添加第二个 my.cnf 具有另一个名称和其他 tcp 端口，并运行两个具有不同配置的 MySQL 服务器。

套接字错误消息是关于 MySQL 服务器未运行的。不要试图通过放置文件来模拟套接字。

该`go`脚本还对 my.cnf 进行了一些可能存在问题的更改。自己查看 go 文件并尝试撤消所做的更改。

如果以上没有任何帮助，您可以尝试从命令行手动启动 mysqld 进程，使用与服务脚本相同的参数，加上添加`--verbose`并发布其输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:45:40.813

好的，感谢@escitalopram，我明白了，所以我会接受他的回答！好的，django 将我的 MySQL 数据目录从my 中的更改`/var/lib/mysql`为，所以在 my 中，它说`/mnt/ebs/mysql``/etc/my.cnf``/etc/my.cnf`

`datadir=/mnt/ebs/mysql`我把它改成了`datadir=/var/lib/mysql`. 一切正常。我重新启动了 MySQL，希望看到红色的 [FAILED] 消息，但我得到了 [OK]。另外，我的插座坏了，`/etc/my.cnf`但我已经修好了！

# components - Joomla 2.5 ACL 限制为特定功能/视图

> ID：12944398
> 
> 赞同：2
> 
> 时间：2012-10-17T22:29:40.863
> 
> 标签：components, acl, joomla2.5

我似乎在确定如何将 Joomla 2.5 后端用户限制为我正在编写的自定义组件中的特定功能/视图时遇到问题。根据我的理解，我应该能够将我的视图添加为 access.xml 文件中的一个部分。我尝试通过将一个部分命名为与我的视图相同的名称来尝试此操作，但我似乎无法独立于整个组件更改对该视图的访问。有人有更深入的示例我可以查看或提示吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:35:16.877

我相信 Joomla 不支持您尝试做的事情。我的建议是在 access.xml 中为视图添加自定义规则

```
<section name="component">
   <action name="core.admin" title="JACTION_ADMIN" description="JACTION_ADMIN_COMPONENT_DESC" />
   <action name="core.manage" title="JACTION_MANAGE" description="JACTION_MANAGE_COMPONENT_DESC" />
   <action name="core.create" title="JACTION_CREATE" description="JACTION_CREATE_COMPONENT_DESC" />
   <action name="core.delete" title="JACTION_DELETE" description="JACTION_DELETE_COMPONENT_DESC" />
   <action name="core.edit" title="JACTION_EDIT" description="JACTION_EDIT_COMPONENT_DESC" />
   <action name="core.edit.state" title="JACTION_EDITSTATE" description="COM_CATEGORIES_ACCESS_EDITSTATE_DESC" />
</section>

<section name="views">
   <action name="core.admin" title="JACTION_ADMIN" description="JACTION_ADMIN_COMPONENT_DESC" />
</section> 
```

然后将您的视图保存在`#__assets`表中，名称如`com_component.view.playerlist`，在`rules`字段中您应该保存一个 JSON 编码的规则列表：

```
{"core.admin":{}} 
```

您可以使用以下命令检查当前用户是否可以访问确定的部分`JAccess`

```
$user_id=JFactory::getUser()->id;
$has_permission = JAccess::check($user_id,'core.admin','com_component.view.playerlist');
if($has_permission){
    draw_view();
}else{
    JError::riseError(403,JText::_('PERMISSION_DENIED'));
    // or
    JError::raiseWarning(403,JText::_('PERMISSION_DENIED'));
} 
```

如果您有任何疑问，请随时发表评论。

# c - 结构数组 - 数组具有不完整的元素类型（在 C 中）

> ID：12944399
> 
> 赞同：0
> 
> 时间：2012-10-17T22:29:41.550
> 
> 标签：c, libevent

这似乎是一个容易解决的问题，但我做错了什么。我已经经历了所有类似的线程，但没有找到任何解决我问题的方法，所以任何帮助将不胜感激！

基本上：C 程序，我正在尝试创建一个缓冲区事件数组。

```
#include <event2/listener.h>
#include <event2/bufferevent.h>
#include <event2/buffer.h>

extern struct bufferevent bev[8];

//Then, my accept functions -- well, one of them...
static void accept1(struct evconnlistener *listener,
    evutil_socket_t fd, struct sockaddr *address, int socklen,
    void *ctx) {
    /* A new connection was received on this port */
    struct event_base *base = evconnlistener_get_base(listener);
    bev[0] = bufferevent_socket_new(base, fd, BEV_OPT_CLOSE_ON_FREE);

    /* Callback for when (*bufevent, data READ, data WRITTEN, event OCCURRED, *void) */
    bufferevent_setcb(bev[0], read1, NULL, echo_event_cb, NULL);
} 
```

当我尝试编译（使用 -levent，我可能会添加）时，我收到此错误：

`src/mix/mix1.c:57:34: error: array type has incomplete element type`

有任何想法吗？:(

注意：我在 main 之外定义了缓冲区事件，以使它们在我的代码中的任何地方都可以访问，而无需传递它们。我在该地区还有其他#define，所以我确定这与我构建它们的方式有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:38:53.220

`struct bufferevent`仅在 libevent 的公共标头中声明为不完整类型；它的内容对公共 API 的用户是隐藏的。所有对 bufferevent 进行操作的 libevent 函数都带有一个*指向*bufferevent 的指针，所以你想要的是

```
struct bufferevent *bev[8]; 
```

进一步注意，您不想添加`extern`该声明，否则您将在链接时收到未定义的符号错误。如果仅在*该文件*中提及它，则应`static`改为使用。*否则，除了*您显示的文件中的-less 声明外`extern`，您的应用程序的一个*头*文件中还应该有一个声明。*`extern`*

# api - 如何通过 API 获取正在运行的詹金斯作业的进度条数据

> ID：12944403
> 
> 赞同：10
> 
> 时间：2012-10-17T22:30:33.303
> 
> 标签：api, jenkins

我想使用 jenkins API 来获取有关我当前工作的信息。我可以找到有关上次构建 ( `.../job/MyJob/lastBuild/api/xml`) 的信息，但我没有看到可以让我创建进度条的字段。我看到一个`estimatedDuration`字段和一个`building`字段，但没有任何东西告诉我它已经运行了多长时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T20:24:18.203

这是为我提供所需信息的 URL：

```
http://<host>/job/<jobname>/lastBuild/api/xml?tree=timestamp,estimatedDuration 
```

这会产生类似的东西：

```
<freeStyleBuild>
  <estimatedDuration>86126</estimatedDuration>
  <timestamp>1350615637401</timestamp>
</freeStyleBuild> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-21T22:51:18.613

我在尝试检索百分比时遇到了这个问题。当我想出一个解决方案时，我想我会把它贴在这里。

响应包括两个字段，`timestamp`（作业开始的时间）和`estimatedDuration`（毫秒）。

如果取当前时间，则可以`timestamp`从当前时间中减去 。这将为您提供自作业开始以来的毫秒数。使用此计算值，您可以将其与`estimatedDuration`字段进行比较，从而确定完成百分比。

所以公式将是（其中数据是返回数据的 JSON 对象）：

```
Console.log(" complete: " + Math.round((new Date().getTime() - data.timestamp) / data.estimatedDuration * 100) + "%"); 
```

您使用的是 XML 而不是 JSON，但我确信它是一个类似的结构。

我在 node.js 中使用以下库：[https ://github.com/jansepar/node-jenkins-api](https://github.com/jansepar/node-jenkins-api)

我的逻辑是：

```
var jenkinsapi = require('./lib/jenkins');

var jenkins = jenkinsapi.init("http://jenkins.myServer.com:8080");

jenkins.last_result('/myProj', function(err, data) {

  if(err) {
    console.log("last result kitchen_ellipse: ERROR (last result): " + data.statusCode);
    return;
  }

  console.log("progress " + data.fullDisplayName + " number: #" + data.number + 
          + " complete: " + 
            Math.round((new Date().getTime() - data.timestamp) / 
                       data.estimatedDuration * 100) + "%"
          + " result: " + data.result);
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-10T07:50:45.703

对我来说，也可以通过获取 json 来工作：

```
http://<host>/job/<jobname>/lastBuild/api/json?tree=executor[progress] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-11T18:23:38.680

使用以下：

```
 http://<host>/job/<jobname>/lastBuild/api/xml?depth=1&xpath=*/executor/progress/text() 
```

这将以百分比的形式返回您的进度

例如：27

同样，您可以获取其他参数，例如用户、ID（内部版本号）、时间戳等。

您可以使用以下网址找到它们：

```
http://<host>/job/<jobname>/lastBuild/api/xml?depth=1 
```

上面的 url 返回一个 xml，其中列出了上次构建的所有必需参数。

# security - 在客户端存储 twitter 访问令牌是否安全？

> ID：12944405
> 
> 赞同：0
> 
> 时间：2012-10-17T22:30:40.480
> 
> 标签：security, twitter, oauth

在 Twitter oauth 过程之后，一旦我最终得到我的 access_token_key 和 access_token_secret 将它们存储在 javascript 变量客户端中是否安全？

据我所知，如果没有 consumer_key/consumer_secret，这些密钥将无能为力？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:58:32.837

我相信是的，因为无论如何客户端已经知道 oauth 身份验证过程中的访问令牌（作为重定向 URL 的一部分）。（同时，尽可能少的信息总是安全的......）

# css - jquery加载动画问题

> ID：12944407
> 
> 赞同：1
> 
> 时间：2012-10-17T22:30:51.520
> 
> 标签：css, jquery

我正在尝试隐藏菜单，显示动画 gif，隐藏 gif，返回更新的菜单。菜单消失并重新出现，但动画 gif 不会显示。

我究竟做错了什么？

```
$(document).ready(function () {

    $("#menu").wijmenu({
        orientation: 'vertical'
    });

    $("#TDButtons a").click(function () {
        var href = $(this).attr("href");
        $('#menuAjax').hide(0, LoadAjaxContent(href));
        return false;
    });

    function LoadAjaxContent(href) {

        $.ajax({
                url: href,
                success: function (data) {
                    $("#menuAjax").html(data)
                        .addClass("loading")
                        .delay(5000)
                        .removeClass("loading")
                        .fadeIn('slow');

                    $("#menu").wijmenu({
                        orientation: 'vertical'
                    });
                }
            });
    } 
```

如果您需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:33:12.800

它没有显示，因为您正在`delay`使用不是可排队动画的东西：

```
.addClass("loading")
.delay(5000)
.removeClass("loading")
.fadeIn('slow'); 
```

被解释为：

```
.addClass("loading")
.removeClass("loading")
.delay(5000)
.fadeIn('slow'); 
```

你可以这样做：

```
function LoadAjaxContent(href) {
    $.ajax({
          url: href,
          success: function (data) {
              $("#menuAjax").html(data).removeClass("loading").fadeIn('slow');
              $("#menu").wijmenu({ orientation: 'vertical' });
          }
    });
}

$("#TDButtons a").click(function (e) {
    e.preventDefault();
    var href = this.href;
    $('#menuAjax').addClass("loading").hide();
    LoadAjaxContent(href);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:35:33.453

一旦收到数据，您将添加、删除元素中的加载类。您应该使用 ajaxStart 和 ajaxStop 函数来完成，该函数最终在发送请求之前添加加载类，并在 ajax 操作完成后删除。

```
$(document).ready(function () {

    $("#menu").wijmenu({
        orientation: 'vertical'
    });

    $("#TDButtons a").click(function () {
        var href = $(this).attr("href");
        $('#menuAjax').hide(0, LoadAjaxContent(href));
        return false;
    });

    $.ajaxStart(function(){
         $("#menuAjax").addClass("loading");
    });
    $.ajaxStop(function(){
         $("#menuAjax").removeClass("loading");
    });
    function LoadAjaxContent(href) {

        $.ajax({
                url: href,
                success: function (data) {
                    $("#menuAjax").html(data)
                        .delay(5000)
                        .fadeIn('slow');

                    $("#menu").wijmenu({
                        orientation: 'vertical'
                    });
                }
            });
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:35:37.557

## 您的加载方式错误

您的加载类应该在发送请求**之前**添加，然后在之后删除。您正在添加它，（正如 roXon 指出的那样，错误地使用了 .delay 函数），然后再次将其删除，没有给它任何时间显示。

尝试这样的事情

```
$(document).ready(function () {
$("#menu").wijmenu({
    orientation: 'vertical'
});

$("#TDButtons a").click(function () {
    var href = $(this).attr("href");
    $('#menuAjax').hide(0, LoadAjaxContent(href));
    return false;
});

function LoadAjaxContent(href) {
    $("#menuAjax").addClass("loading")
    $.ajax({
            url: href,
            success: function (data) {
                $("#menuAjax").html(data)
                    //.delay(5000) Not needed!
                    .removeClass("loading")
                    .fadeIn('slow');

                $("#menu").wijmenu({
                    orientation: 'vertical'
                });
            }
        });
} 
```

# php - tcp套接字中的“连接被拒绝”？

> ID：12944408
> 
> 赞同：0
> 
> 时间：2012-10-17T22:30:53.630
> 
> 标签：php, sockets, development-environment

所以，我们正在为我们当前的 IM 编写一个网络聊天客户端，我有一个问题，socket_connect 将无法连接，并抛出“错误警告：socket_connect()：无法连接 [111]：/home/shadowri 中的连接被拒绝/public_html/zapf/personal.php 在第 29 行“我将如何让它准确连接，因为它必须连接到套接字并在那之后发送握手，那么我将如何让它在每次收到消息时读取? 我知道它在那个 tcp 套接字上监听，因为我们的 pc 客户端使用它并直接连接然后发送握手？我错过了什么”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:30:57.860

要么有防火墙，要么在您尝试连接的 IP:port 上没有任何监听。

# java - while 循环和 substring() 导致 StringIndexOutOfBoundsException

> ID：12944409
> 
> 赞同：0
> 
> 时间：2012-10-17T22:31:01.437
> 
> 标签：java, string, while-loop

我试图仅从字符串的开头替换非字母数字字符。我想出了以下代码：

```
public static final class FixNonAlphaNumBegin implements PhraseFilter {
    @Override
    public String filter(String phrase, long frequency) {
        int count = 0;

    while (!Character.isLetterOrDigit(phrase.codePointAt(count))
                && phrase.length() > count + 1) {
            phrase = phrase.replaceFirst(
                    Pattern.quote(phrase.substring(count, count + 1)), "");
            count++;
        }

        return phrase.trim();           
    }
} 
```

IndexOutOfBoundsException 来自哪里？应该不可能：

例如

```
String filter = "! " 

!Character.isLettorDigit(phrase.codePointAt(0) --> true 
phrase.length() > 1 --> true

phrase = phrase.replaceFirst(
                Pattern.quote(phrase.substring(0, 0 + 1)), ""); 
```

`phrase`现在是`" "`，`count`1

```
!Character.isLettorDigit(phrase.codePointAt(1) --> true 
phrase.length() > 2 --> false 
```

所以循环应该在异常发生之前中断。

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T22:34:23.747

交换`while`条件

```
while (count < pharse.length() && !Character.isLetterOrDigit(phrase.codePointAt(count))) { 
```

这将导致 Java在尝试从中提取字符之前首先检查`count`是否小于 （记住，索引为 0）的长度`phrase`

# scala - 匿名列表排序语法

> ID：12944420
> 
> 赞同：1
> 
> 时间：2012-10-17T22:32:03.707
> 
> 标签：scala, sorting

```
class P(val a: Int, val b: Int)
val listp = List[P](new P(2,1))
listp.sortWith( (p1, p2) => p1.b < p2.b )
listp.sortBy(p => (p.b)) 
```

`listp`很容易排序

```
val list = List((2, 1))
list.sortWith( (a1, b1), (a2, b2) => b1 < b2)   // Too many arguements
list.sortWith( ((a1, b1), (a2, b2)) => b1 < b2) // Not a legal formal parameter / <error> is already defined as <error>
list.sortBy((a, b) => (b))                      // wrong number of parameters expected 
```

我该如何排序`list`？所有对 list 的方法调用都会导致编译错误（我知道我忽略了返回值，我只关心语法）。

我只是在寻找匿名函数的语法。我知道可以`Ordered`像`Comparable`在 Java 中一样进行子类化。

**编辑**- 这已经为我完成了，感谢所有答案：

```
list.sortWith( _._2 < _._2)
list.sortBy(_._2)
list.sortWith( (t1, t2) => t1._2 < t2._2 ) 
```

这是明确的

```
list.sortWith( (t1: Tuple2[Int, Int], t2: Tuple2[Int, Int]) => t1._2 < t2._2 ) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T22:39:37.707

给定

```
val list = List((2,1), (3,4)) 
```

按第二个元素排序：

```
list.sortBy(_._2) 
```

或者很冗长：

```
list.sortBy { case(a,b) => b } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T22:34:39.833

试试这个：

```
scala> val list = List((2, 1),(5,-10))
list: List[(Int, Int)] = List((2,1), (5,-10))

scala> list.sortWith{ case ((a1, b1), (a2, b2)) => b1 < b2}
res1: List[(Int, Int)] = List((5,-10), (2,1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:36:33.967

```
val list = List((2,1), (3,4))

list.sort(_._1 < _._2)

res0: List[(Int, Int)] = List((2,1), (3,4)) 
```

# python - PyDev OS 独立项目文件

> ID：12944425
> 
> 赞同：1
> 
> 时间：2012-10-17T22:32:33.680
> 
> 标签：python, eclipse, google-app-engine, pydev

有什么方法可以跨两个不同的操作系统使用相同的 PyDev 配置文件？也就是说，我想用环境变量替换所有操作系统特定的路径，以使这个配置文件独立于操作系统，但是如果不求助于手动编辑这个文件，我无法真正看到如何实现这个目标。对我来说，如何从 eclipse/pydev 级别做到这一点并不明显。

有人可以帮忙吗？

下面是一个操作系统绑定配置文件的示例：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?eclipse-pydev version="1.0"?><pydev_project>
<pydev_variables_property name="org.python.pydev.PROJECT_VARIABLE_SUBSTITUTION">
<key>GOOGLE_APP_ENGINE</key>
<value>C:\Program Files (x86)\Google\google_appengine</value>
</pydev_variables_property>
<pydev_pathproperty name="org.python.pydev.PROJECT_SOURCE_PATH">
<path>/Cozeebaby</path>
</pydev_pathproperty>
<pydev_pathproperty name="org.python.pydev.PROJECT_EXTERNAL_SOURCE_PATH">
<path>${GOOGLE_APP_ENGINE}</path>
<path>${GOOGLE_APP_ENGINE}/lib/PyAMF</path>
<path>${GOOGLE_APP_ENGINE}/lib/antlr3</path>
<path>${GOOGLE_APP_ENGINE}/lib/django_1_3</path>
<path>${GOOGLE_APP_ENGINE}/lib/enum</path>
<path>${GOOGLE_APP_ENGINE}/lib/fancy_urllib</path>
<path>${GOOGLE_APP_ENGINE}/lib/google-api-python-client</path>
</pydev_pathproperty>
<pydev_property name="org.python.pydev.PYTHON_PROJECT_INTERPRETER">Default</pydev_property>
<pydev_property name="org.python.pydev.PYTHON_PROJECT_VERSION">python 2.6</pydev_property>
</pydev_project> 
```

# jquery - 如何使用 jQuery.support 检测 IE7

> ID：12944426
> 
> 赞同：1
> 
> 时间：2012-10-17T22:32:43.047
> 
> 标签：jquery, internet-explorer

我的应用程序支持的最低浏览器是 IE 7。我有一些在 IE 8 中运行良好的代码，但在 IE 7 中需要避免使用。这里有大量问题/答案表明如何检测 IE 7`.browser`但没有这表明如何仅检测 IE 7 与`.support`. [详细说明.support](http://api.jquery.com/jQuery.support/)的 jQuery 页面没有明确说明哪些浏览器中存在哪些受支持的功能，因此在那里没有得到太多帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T22:40:21.043

他们弃用 .browser 的原因是试图鼓励我们测试功能而不是浏览器。

但是..如果您仍然需要...

你有没有考虑过使用 H5BP 的条件`<html>`技巧然后只是测试它？标题：

```
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]--> 
```

然后在 jQuery 中，

```
$(function() {
    if( !$('html').hasClass('lt-ie8') ) {
        // Do stuff
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:37:09.097

确定您在 IE8 中定位的功能并使用“功能检测”来查看它们是否可用（通过测试 feture 的功能）几乎总是更好，如果它们不可用，则使用备用代码（对于 IE7 或任何其他没有该功能的浏览器）。

如果您提供有关在 IE7 中不起作用的功能的更多详细信息，我们可以通过功能检测而不是浏览器版本检测来帮助您解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:25:53.060

你看过 $.browser 的 API 吗？

[http://api.jquery.com/jQuery.browser/#jQuery-browser-version2](http://api.jquery.com/jQuery.browser/#jQuery-browser-version2)

但是它被弃用是有原因的，这是一件坏事。您应该使用特征检测进行嗅探。

# actionscript-3 - ActionScript 3 检查哪个电影剪辑在某个方向

> ID：12944431
> 
> 赞同：0
> 
> 时间：2012-10-17T22:33:13.690
> 
> 标签：actionscript-3, movieclip

好吧，所以我正在制作一个小程序，允许用户单击一个块然后移动到一个开放空间（为了简单起见，我们假设有一个）。

如何检查哪个 MovieClip 位于影片剪辑的右侧/左侧/底部/顶部？

# rest - orientdb（rest api）使用curl的sql查询错误

> ID：12944433
> 
> 赞同：0
> 
> 时间：2012-10-17T22:33:14.357
> 
> 标签：rest, curl, orientdb

在命令行上我试试这个：

```
curl --user admin:admin -XGET "http://localhost:2480/query/demo/sql/select from Profile/20/*:-1" 
```

得到这个

```
from Profile/20/*:-1"
from 500 Internal Server Error
Cache-Control: no-cache, no-store, max-age=0, must-revalidate
Pragma: no-cache
Date: Wed Oct 17 10:25:57 CDT 2012
Content-Type: text/plain; charset=utf-8
Server: OrientDB Server v.1.2.0 (build 12659)
Connection: Keep-Alive
Content-Length: 72

java.lang.StringIndexOutOfBoundsException: String index out of range: -1 
```

然后我试试这个：

```
curl --user admin:admin "http://localhost:2480/query/demo/sql/select from Profile/20/*:-1" 
```

得到这个

```
java.lang.StringIndexOutOfBoundsException: String index out of range: -1 
```

编辑：

我在 ubuntu 12.04 中使用 1.2.0 版本

编辑2：

如果我从谷歌浏览器访问：

```
http://localhost:2480/query/demo/sql/select%20from%20Profile/20/*:-1 
```

有用。所以我认为卷曲请求中有一些东西。

编辑3：

我尝试添加此标头并出现相同的错误

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:Basic YWRtaW46YWRtaW4=
Cache-Control:max-age=0
Connection:keep-alive
Cookie:OSESSIONID=-
Host:127.0.0.1:2480
User-Agent:Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/12.04 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:40:26.723

空格必须替换为 %20

错误查询：

```
curl --user admin:admin "http://localhost:2480/query/demo/sql/select from Profile/20/*:-1" 
```

很好的查询

```
curl --user admin:admin "http://localhost:2480/query/demo/sql/select%20from%20Profile/20/*:-1" 
```

# c# - LINQ to Lookup 具有不同的项目和计数

> ID：12944437
> 
> 赞同：2
> 
> 时间：2012-10-17T22:33:48.230
> 
> 标签：c#, c#-4.0

如果我将列表定义为

```
public class ItemsList
{
    public string structure { get; set; }
    public string Unit { get; set; }
    public double Dim { get; set; }
    public double Amount { get; set; }
    public int Order { get; set; }
    public string Element { get; set; }
}

List<ItemsList> _itemsList = new List<ItemsList>(); 
```

我试图在 Lookup 中获取不同的结构计数，其中结构为键，结构计数为值。

目前我有

```
var sCount = from p in _itemsList
    group p by p.Structure into g
    select new { Structure = g.Key, Count = g.Count() }; 
```

但这只是将数据作为匿名类型返回。有人可以帮助我使用语法将其放入查找中`.ToLookup`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T22:37:47.280

我*怀疑*你实际上想要：

```
var lookup = _itemsList.ToLookup(p => p.Structure); 
```

您仍然可以计算任何组的项目：

```
foreach (var group in lookup)
{
    Console.WriteLine("{0}: {1}", group.Key, group.Count());
} 
```

...但是您还获得了每个组中的*值。*

如果您*真的*只想要计数，那么听起来您根本不需要查找 - 您想要一个`Dictionary`，您可以使用它：

```
var dictionary = _itemsList.GroupBy(p => p.Structure)
                           .ToDictionary(g => g.Key, g => g.Count()); 
```

# html - position:relative 在 Internet Explorer 中隐藏边框

> ID：12944449
> 
> 赞同：17
> 
> 时间：2012-10-17T22:34:41.907
> 
> 标签：html, css, internet-explorer

我有一张表，第一行是位置：相对。在 IE 9 中添加位置属性隐藏了单元格之间的边框。（这在 Chrome 中不会发生）。

我的问题与[此类似，](https://stackoverflow.com/questions/7021085/td-positionrelative-overflows-into-the-table-border)但我不能将顶行的 z-index 设置为低于其他行，因为它将是一个需要更高 z-index 的固定标题。

HTML

```
<table border="1">
            <tr >
                <td class="locked">header 1</td>
                <td class="locked">header 2</td>
            </tr>
            <tr >
                <td>data 1a</td>
                <td>data 1b</td>
            </tr>
            <tr >
                <td>data 2a</td>
                <td>data 2b</td>
            </tr>
        </table> 
```

CSS

```
.locked {
            position: relative;
            background-color: Yellow;
        } 
```

![在此处输入图像描述](../Images/c4478319ec766a728dae248f2d97ceed.png)

如何让边框显示出来，但保持 z-index 大于其他单元格？

编辑：这是解释为什么标题位置是相对的 jquery 代码。
1.它允许标题水平和垂直滚动。
2\. 当您向下滚动页面超过 153 像素时，标题停留在屏幕顶部。

```
$(document).ready(function () {
    $(window).scroll(function(){ 
        var off = $(window).scrollTop();
        if (off < 153) {
            $(".frozenTop").css("top", 0);
        } else {
            $(".frozenTop").css("top", off - 153);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T10:48:21.073

如果仅适用于支持 CSS3 的浏览器，CSS3 属性*background-clip*可以帮助：

```
.locked {
    position: relative;
    background-color: Yellow;
    background-clip: padding-box;
} 
```

有关此属性的详细信息：[https ://developer.mozilla.org/en-US/docs/CSS/background-clip](https://developer.mozilla.org/en-US/docs/CSS/background-clip)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T00:22:22.373

试试这个也许有帮助

```
<td class="locked"><div>header 1</div></td>
<td class="locked"><div>header 2</div></td>

table {
border-spacing: 0px;
}
.locked {
  position: relative;
  border:none;
}
.locked div{
  border:2px black solid;
  background-color: Yellow;
  margin:-2px;
} 
```

[jsFiddle](http://jsfiddle.net/zL3NA/3/)

# java - 使用 JDBC 的 UTF-8 查询

> ID：12944452
> 
> 赞同：1
> 
> 时间：2012-10-17T22:35:02.737
> 
> 标签：java, mysql, sql, jdbc

我想问 MYSQL 一个 UTF-8 查询，但它不能正常工作。当我尝试以下查询时，结果确实出现了：

```
String query = "select * from Terms where Term = 'lol'"; 
```

但使用以下查询不会做出响应：

```
String query = "select * from Terms where Term = 'خدابخش'"; 
```

在哪里

> 'خدابخش'

部分是波斯语和 UTF-8 。请注意，与数据库的连接很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:47:15.353

您可能需要在 JDBC 连接中设置字符编码。如果您使用的是 MySQL JDBC 连接器，您可以使用属性 characterEncoding。有点像这样：

```
jdbc:mysql://localhost/some_db?useUnicode=yes&characterEncoding=UTF-8 
```

您可能需要阅读连接器 JDBC 文档中有关编码和字符集的参考。

这是提到 MySQL JDBC 连接器使用 characterEncoding 的那个：

[连接器 JDBC：使用字符集和 Unicode](http://dev.mysql.com/doc/refman/5.0/en/connector-j-reference-charsets.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:40:21.370

以下一项或多项为真：

1.  编译您的代码的 Java 编译器设置为使用不同的编码读取源文件，而源文件实际存储在该编码中。换句话说，您的编辑器使用的编码、实际保存文件的编码以及 Java 编译器读取源代码时使用的编码之间存在差异。
2.  您的数据库未正确设置为接受/存储 Unicode 字符。确保您的数据库设置正确。看起来你正在使用 MySQL。您可能希望使用创建数据库转储`mysqldump`并见证数据库是如何根据字符集创建的。

# linux - 在 bash 中“剪切”内容后分配变量

> ID：12944453
> 
> 赞同：0
> 
> 时间：2012-10-17T22:35:16.213
> 
> 标签：linux, bash

我正在使用 bash 遍历文件文件夹，但我需要剪切前面的路径。例如，如果我有这个'/temp/test/filename'，我想切断'/temp/test/'并将文件名存储到一个变量中，这样我就可以在其中写入一个带有文件名的日志。

谁能帮我吗？问题是变量 temp 始终为空。

这是我的 bash 代码：

```
#!/bin/bash

for file in /temp/test/*
do
    if [[ ! -f "$file" ]]
    then
        continue
    fi

    temp="$file"|cut -d'/' -f3

    $file > /var/log/$temp$(date +%Y%m%d%H%M%S).log
done

exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:36:08.227

试试看：

```
$ x=/temp/test/filename
$ echo ${x##*/}
filename 
```

另一种解决方案是使用`basename`：

```
$ basename /temp/test/filename
filename 
```

第一个解决方案是[*参数扩展*](http://wiki.bash-hackers.org/syntax/pe)，它是`bash`内置的，所以我们提高了性能。

你的线`temp="$file"|cut -d'/' -f3`坏了。

*   当您想将命令的输出存储在变量中时，您应该这样做`var=$(command)`
*   您需要使用( ) 或使用将值传递给`STDIN`命令的`here-string``<<<``echo value | command`

**最后**，如果你想使用`cut`：

```
$ temp=$(cut -d/ -f4 <<< /temp/test/filename)
$ echo $temp
filename 
```

# javascript - ajax 成功回调按预期顺序执行

> ID：12944454
> 
> 赞同：0
> 
> 时间：2012-10-17T22:35:16.587
> 
> 标签：javascript, jquery

我有一个功能可以在按下按钮时验证某些字段。第一个检查用户名和密码是否真实。然后如果密码是适当安全的。然后，如果它与确认密码框匹配。但是，在第一个函数中的警报弹出之前，检查用户是否真实的 ajax 似乎没有完成。

```
$(document).ready(function() {
    $('#submit_pw_ch').on('click', function(){

        var alertString = "Please correct the following errors: \n"
        //current username and password are correct
        var vUsr = valUsr();
        //new password is sufficiently secure
        var vPwd = valPwd();
        //confirmation of new password is same as previous box
        var sPwd = samePwd();

        console.log('valid user : ' + vUsr + '      valid password : ' + vPwd + '     same password : ' + sPwd);

        //append appropriate warnings to alert string
        if ( !vUsr ) { alertString += "-Your current username and password are invalid. \n"; }
        if ( !vPwd ) { alertString += "-The new password you have selected is not strong enough. \n"; }
        if ( !sPwd ) { alertString += "-The confirmation of your new password does not match the previous entry. \n"; }

        if ( !vUsr || !vPwd || !sPwd ) {
            alert(alertString);
            return false;
        } else {

            //change password

        }

    });
}); 
```

所以检查的那一行是`var vUsr = valUsr();`调用

```
function valUsr() {

    var un = $('#uNameInput').val();
    var pw = $('#uPwdInput').val();
    //return value
    var validUsr = false;

    $.ajax({
        type: "post",
        url: "queries/confirm_user.php?<?=time()?>",
        data: "un=" + un + "&pw=" + pw,
        dataType: "json",
        success: function (returnedData) {
            console.log(returnedData)
            if (data == 'true') {
                validUsr = true;
            } else {
                validUsr = false;
            }
        } 

    });

    return validUsr;
} 
```

不知何故，虽然警报没有等待 ajax 完成获取它的数据。`console.log(returnedData)`关闭警报框后，该功能`valUsr()`会出现在控制台中。为什么会这样？我该如何预防？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T02:42:28.073

托马斯，

您需要满足 ajax 固有的异步性，换句话说，您需要等到对 ajax 请求的响应到达后再决定要做什么。

[jQuery 的 Deferreds](http://api.jquery.com/category/deferred-object/)（和 Promise）允许我们编写简单的代码，但 Deferreds 一开始往往会让你大吃一惊，至少是非常轻微的。

没有独特的方法可以使用 Deferreds 来解决这样的问题，但这里有一个。

```
$(document).ready(function() {
    $('#submit_pw_ch').on('click', function() {
        var form = this.form; //the form containing the submit button and the fields .

        //`alertArr` is an array to which messages will be added.
        var alertArr = ["Please correct the following errors:"];

        //`addAlert` will be called from a `Deferred.resolveWith(this, ...)` statement.
        //The context, `this`, is unused.
        function addAlert(index, txt) {
            alertArr[index] = txt;
        }

        //`compositeAction` will be called from a promise.done() statement.
        function compositeAction() {
            //first filter out null messages (ie. validation successes) from alertArr.
            var message = $.map(alertArr, function(txt, i){
                return txt || null;
            });
            if(message.length > 1) {
                //then alert the complete message with line breaks
                alert(message.join("\n"));
            } else {
                //submit the form to change the password
                //or another ajax call as required
                form.submit();
            }
        }

        // Invoke ajax validators and assign returned promises.
        // An index is passed, so the text messages can be displayed in a logical order, 
        // regardless of the order in which the validation promises are resolved.
        //If we didn't care about the order of the messages then the code would be slighly simpler.
        var vUsr = valUsr(0),
            vPwd = valPwd(1),
            sPwd = samePwd(2);

        //All validations adopt a similar pattern regardless of whether ajax is involved or not.
        //Here, we establish what is to be done when the promise are resolved, or
        //what is to be done immediately if the promise are alrady resolved.
        vUsr.done(addAlert);
        vPwd.done(addAlert);
        sPwd.done(addAlert);
        //At this stage, `addAlert` will contain entries for successful as well as unsuccessful validations. Successful entries will be filtered out by `compositeAction`

        //Establish what is to be done when all three promises are resolved.
        $.when(vUsr, vPwd, sPwd).done(compositeAction);

        //Return false unconditionally
        return false;
    });

    function valUsr(index) {
        var messages = {
            validated: '',//important - this message must be an empty string - do not change
            notValidated: '- Your current username and password are invalid.',
            ajaxError: '- Validation error: username and password.'
        };

        //Create a Deferred object, which will be resolved in response to several different outcomes.
        var def = $.Deferred();

        $.ajax({
            type: "post",
            url: "queries/confirm_user.php?<?=time()?>",
            data: {
                'un': $('#uNameInput').val(),
                'pw': $('#uPwdInput').val()
            },
            dataType: "json",
            success: function (returnedData) {
                if (returnedData == 'true') {
                    def.resolveWith(this, [index, messages.validated]);
                } else {
                    def.resolveWith(this, [index, messages.notValidated]);
                }
            },
            error: function() {
                def.resolveWith(this, [index, messages.ajaxError]);
            }
        });
        return def.promise();//Return a promise derived from the as yet unresolved Deferred.
    }

    function samePwd(index) {
        var pw1 = $('#uPwdInput').val();
        var pw2 = $('#uPwdInput2').val();
        var errMessage = (pw1 === pw2) ? '' : '-The confirmation of your new password does not match the previous entry';
        var def = $.Deferred();//Create a Deferred object, which will be resolved immediately
        def.resolveWith(this, [index, errMessage]);
        return def.promise();//Return a promise derived from the already resolved Deferred.
    }
}); 
```

`valPwd()`将与`valUsr()`or具有相同的格式`samePwd()`，具体取决于是否涉及 ajax。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:51:22.453

## Ajax 实时运行，*同步运行*

在成功回调中完成 ajax 请求**后**，您需要检查其他字段的验证。您可以关闭同步请求，但浏览器将冻结，直到它得到一个，不建议。

您将需要重组您的电话以反映这一点；我建议他们在输入完密码并且字段模糊后立即发送检查请求。这样，如果有任何错误，您将能够避免在表单末尾等待时间。

# html - 具有全宽边框定位的另一个 ul 列表中的 ul 列表

> ID：12944457
> 
> 赞同：0
> 
> 时间：2012-10-17T22:35:35.260
> 
> 标签：html, css, html-lists

我想要完成的是这张图片：

![列表](../Images/ab693a3c2c93058db72e9bc5ce7b02eb.png)

现在我到目前为止所做的是：

```
<ul class="flechalista">
<li><a href="#">2012</a>
<ul class="flechalista">
     <li>Enero</li>
         <li>Febrero</li>
     <li>Marzo</li>
         <li>Abril</li>
</ul>   
</li>
</ul> 
```

我的CSS是这样的：

```
.flechalista{background:#fff;}
.flechalista li{background:#fff url(../img/red_arrow.png) no-repeat 10px 4px; padding:5px 0 5px 30px !important; border-bottom:1px solid #000;} 
```

现在这个工作除了你可以看到边界底部是每个 li 和全宽。
我想我可以用更少的填充（2012）制作第一个 LI，而几个月的 LI 会有更多的填充。但是有没有办法使用我玩过的css让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:40:58.177

```
.flechalista{background:#fff;}
.flechalista li ul li{padding:5px 0 5px 50px !important; border-bottom:1px solid #000;}
.flechalista li a{padding:5px 0 5px 10px !important; display:block; width:100%; border-bottom:1px solid #000;} 
```

​ ​</p>

演示：http: [//jsfiddle.net/calder12/FSa2S/5/](http://jsfiddle.net/calder12/FSa2S/5/)

# processing - 如何在处理中实现类？

> ID：12944459
> 
> 赞同：1
> 
> 时间：2012-10-17T22:35:40.647
> 
> 标签：processing

> **可能重复：**
> [正在处理的小行星游戏](https://stackoverflow.com/questions/12944256/asteroids-game-in-processing)

试图将小行星游戏的一些类集成到处理程序中。如何将类实现到处理程序中？我正在尝试使用教授给我们使用的类，但出现“构造函数引用缺少的类型”错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T05:12:58.113

[Daniel Shiffman 在此处](http://processing.org/learning/objects/)对 Processing IDE 中的面向对象编程进行了很好的介绍。

每个自定义处理类都存储为 .pde 文件。

如果您尝试包含封装在 .pde 文件中的类，请在包含 setup() 和 draw() 方法的文件夹中打开 .pde。

如果您要创建新课程，请单击右上角的箭头按钮并选择“新建选项卡”以创建新课程。

# c++ - 如何使用 Winsock LSP 修改出站 UDP 流量？

> ID：12944461
> 
> 赞同：2
> 
> 时间：2012-10-17T22:35:47.557
> 
> 标签：c++, windows, udp, winsock, ipv6

我正在构建一个需要在 DHCPv6 数据包连接之前动态修改它们的应用程序。我正在使用 DHCPv6 供应商选项进行一些高度专有的工作，并且我需要能够在传输之前检查和修改内存中的这些选项。

我通过修改 Microsoft 示例代码在 Winsock 之上构建了一个概念验证分层服务提供程序。它拦截传出的 HTTP 数据包，将引用代理更改为有趣的东西，并在途中发送数据包。在 Wireshark 中验证，效果很好。

更改我的安装程序代码也很简单，以便我的 LSP 被链接在 UDP/IPv6 而不是 TCP/IPv4 之上，现在，在连接了调试器的情况下，我可以看到自己收到带有通向 DHCP 服务器的堆栈的回调。但是，我再也看不到内存中的缓冲区了。

`WSPSend`并且`WSPConnect`不要被调用，因为我们使用的是无连接协议——这是有道理的。我确实得到了一致的回调，`WSPSendTo`但是`lpBuffers`在我的 HTTP 原型中包含表示传出数据包的缓冲区的成员是`NULL`.

我是否以完全错误的方式进行此操作，还是我需要覆盖另一个 Winsock 操作？如果 LSP 是错误的方式，我会很高兴转向另一个方向，但是外部库对于这个应用程序来说是一个非常艰难的销售 - 否则，我会关注 Winpcap。

编辑：哇，这是很久以前的事了。对于那些在我身后的人来说，这最终效果很好。我很尴尬地说，问题在于我正在使用优化进行编译，导致我无法在调试器中看到正确的数据。当我停止偷懒并将字节转储到文件中时，我发现一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:33:37.907

LSP 确实只能拦截 Winsock 流量，DHCP 处于较低层，你需要不同的技术来做到这一点，例如：NDIS、TDI（在 Win8 上不起作用）或 WFP（在 XP 上不起作用）

# tsql - 加入并聚合两列 - 每个月甚至几个月没有数据？

> ID：12944473
> 
> 赞同：1
> 
> 时间：2012-10-17T22:36:59.520
> 
> 标签：tsql, join, aggregate, monthcalendar

使用 SQL Server 2005。

我有一张带有日历月份的表

```
Month,  fiscalorder
june,1
july,2
..
may,12 
```

还有一张有员工的桌子和每月重复的金额

```
employee, month, amount
john, july, 10
john, july, 3
john, august,2
mary, june, 2
mary, feb, 5 
```

我需要按月加入和汇总这些数据，但每个月（甚至没有数据的月份）都要为每个员工报告，然后是员工的财务订单。

输出：

```
june, john, 0
july, john, 13
august,john,2
sept, john, 0
..
june,mary,2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:19:18.297

```
SELECT month,employee,SUM(amount) amount
FROM(
  SELECT m.month, e.employee, ISNULL(s.amount, 0) AS amount
  FROM dbo.months AS m
  CROSS JOIN (SELECT DISTINCT employee FROM dbo.sales) AS e
  LEFT JOIN dbo.sales AS s
  ON s.employee = e.employee
  AND m.month = s.month
)X
GROUP BY month, employee 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T08:50:38.293

假设 Sql Server 2005+

```
Declare @CalenderMonths Table ([Month] Varchar(20),FiscalOrder Int)

Insert Into @CalenderMonths Values
('June',1),('July',2),('August',3),('September',4),('October',5),('November',6),
('December',7),('January',8),('February',9),('March',10),('April',11),('May', 12)

Declare @Employee Table(employee varchar(50), [month] Varchar(20), amount int )
Insert Into @Employee Values('john', 'July', 10),('john', 'July',3),('john','August',2),('mary','June',2),('mary', 'February',5)

;with cte as
(
    Select employee,[month],TotalAmount = sum(amount)
    from @Employee
    group by employee,[month]
)

select x.[Month],x.employee,amount = coalesce(c.TotalAmount,0)
from (
select distinct c.[Month],e.employee
from @CalenderMonths c cross join cte e)x
left join cte c on x.[Month] = c.[Month] and x.employee = c.employee
order by 2 
```

# angularjs - 使用 angularjs 进行内联编辑

> ID：12944474
> 
> 赞同：1
> 
> 时间：2012-10-17T22:37:02.747
> 
> 标签：angularjs

我正在尝试在带有 Angular 指令的表单中进行内联编辑，不幸的是我遇到了两个问题，我无法解决它们，因此非常感谢第二个意见。

这是小提琴：http: [//jsfiddle.net/jorgecas99/bc65N/](http://jsfiddle.net/jorgecas99/bc65N/)

问题 1：如您所见，我添加了一个部分，假设是听击键（在本例中为 esc 键）并退出编辑模式，不幸的是它不起作用。我尝试听“输入”键 13 并且工作正常，所以我不明白。

问题2：我想在您单击编辑时将第二个字段更改为下拉列表，而无需创建新指令，这可能吗？我当然关心代码行数，所以如果这可以通过一个指令来实现，那么这将是我的首选。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T15:36:44.173

对于第一个问题，您可以在 此处看到包含[http://css-tricks.com/snippets/javascript/saving-contenteditable-content-changes-as-json-with-ajax/中描述的技术的小提琴的修订版本](http://css-tricks.com/snippets/javascript/saving-contenteditable-content-changes-as-json-with-ajax/)[http://jsfiddle.net/bonamico/cAHz7/](http://jsfiddle.net/bonamico/cAHz7/)

```
var myApp = angular.module('myApp', []); 
```

请注意 var myApp = 缺失，因此以下声明未执行

```
myApp.directive('contenteditable', function() {
return {
    require: 'ngModel',
    link: function(scope, elm, attrs, ctrl) {
        // view -> model
        elm.bind('blur', function() {
            scope.$apply(function() {
                ctrl.$setViewValue(elm.html());
            });
        });

        // model -> view
        ctrl.render = function(value) {
            elm.html(value);
        };

        // load init value from DOM
        ctrl.$setViewValue(elm.html());

        elm.bind('keydown', function(event) {
            console.log("keydown " + event.which);
            var esc = event.which == 27,
                el = event.target;

            if (esc) {
                    console.log("esc");
                    ctrl.$setViewValue(elm.html());
                    el.blur();
                    event.preventDefault();                        
                }

        });

    }
}; 
```

});

另见 [http://api.jquery.com/keydown/](http://api.jquery.com/keydown/)

对于第二个问题，我建议最小化代码行数通常不是主要问题，而使代码模块化和可维护才是主要问题。因此，创建两个指令肯定会更好，并且可能为两者之间的公共部分创建一个公共 javascript 函数（如果有的话）。

# haskell - 如何将字符串解析为 GADT

> ID：12944498
> 
> 赞同：4
> 
> 时间：2012-10-17T22:39:36.927
> 
> 标签：haskell, parsec, gadt, combinatory-logic

我正在尝试在 Haskell 中实现组合逻辑，并且我想为该语言编写解析器。我无法让解析器通过 Parsec 工作。基本问题是我需要一种方法来确保解析器返回的对象类型正确。有没有人对如何做到这一点有任何创造性的想法？

```
{-# Language GeneralizedNewtypeDeriving #-}

import qualified Data.Map as Map
import qualified Text.ParserCombinators.Parsec as P
import Text.Parsec.Token (parens)
import Text.ParserCombinators.Parsec ((<|>))
import Control.Applicative ((<$>), (<*>), (*>), (<*))

data CTree = CApp CTree CTree | CNode String deriving (Eq, Read)
instance Show CTree where
    show c@(CApp x y) = showL c
        where showL (CApp x' y')= "(" ++ showL x' ++ " " ++ showR y' ++ ")"
              showL (CNode s) = s
              showR (CApp x' y') = "(" ++ showL x' ++ " " ++ showR y' ++ ")"
              showR (CNode s) = s

    show (CNode s) = s

-- | Parser
parseC :: String -> Maybe CTree
parseC s = extract$ P.parse expr "combinator_string" s
           where extract (Right r) = Just r
                 extract (Left e) = Nothing

expr :: P.CharParser () CTree
expr = P.try (CApp <$> (CApp <$> term <*> term) <*> expr)
       <|> P.try (CApp <$> term <*> term)
       <|> term

term = P.spaces *> (node <|> P.string "(" *> expr <* P.string ")")

node :: P.CharParser () CTree
node = CNode <$> (P.many1 $ P.noneOf "() ") 

eval (CApp (CNode "I") x) = x
eval (CApp (CApp (CApp (CNode "S") f) g) x) = 
    (CApp (CApp f x) (CApp g x))
eval (CApp (CApp (CApp (CNode "B") f) g) x) = 
    (CApp f (CApp g x))
eval (CApp (CApp (CApp (CNode "C") f) g) x) = 
    (CApp (CApp f x) g)
eval x = x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T03:15:46.657

我强烈主张解析为单一类型的表示，然后应用类型检查/精化阶段将其转换为类型化 (GADT) 表示。关于一般思想的最佳教程可能来自[Lennart Augustsson 的基于 llvm 的编译器](http://augustss.blogspot.com/2009/06/more-llvm-recently-someone-asked-me-on.html)

SKI 演算的表示可能看起来像

```
data TyComb t where
  TyS   :: TyComb ((a -> b -> c) -> (a -> b) -> a -> c)
  TyK   :: TyComb (a -> b -> a)
  TyI   :: TyComb (a -> a)
  TyApp :: TyComb (a -> b) -> TyComb a -> TyComb b

evalTyComb :: TyComb t -> t
evalTyComb TyS         = \x y z -> (x z) (y z)
evalTyComb TyK         = const
evalTyComb TyI         = id
evalTyComb (TyApp a b) = (evalTyComb a) (evalTyComb b) 
```

# performance - 32 位/64 位编译和应用速度

> ID：12944500
> 
> 赞同：0
> 
> 时间：2012-10-17T22:39:46.370
> 
> 标签：performance, 64-bit, 32-bit

我刚买了一台新的 64 位计算机，但我仍在尝试了解 32 位和 64 位之间的区别。我了解使用 64 位依赖项构建的应用程序只能在 64 位上运行，但使用 32 位依赖项构建的应用程序可以在 32 位和 64 位系统上运行。

但是，还有其他区别吗？我知道有些程序有两种不同的 Windows 版本可供下载，一种用于 64 位，一种用于 32 位。为什么他们提供两种不同的类型？编译具有 64 位依赖项的程序以使程序在 64 位系统上运行是否会提高速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:54:46.030

除了速度，一些程序别无选择。它们需要与主机操作系统的位数完全匹配。

一个很好的例子是 TortoiseSVN，它安装了一个 shell 扩展。Shell 扩展是加载到其他进程中的 DLL。所以 TortoiseSVN 必须在 x64 系统上提供一个 64 位的 DLL，如果它想提供一个 shell 扩展。

驱动程序是第二个例子。

当谈到速度时，当然有区别。这在很大程度上取决于程序的作用。如果程序不需要高性能，则提供 x64 可执行文件对开发人员和用户都没有帮助，而且是浪费时间。

以下是导致 64 位操作系统上 32 位案例的性能差异的原因：

1.  由于模式切换，内核调用成本更高
2.  更多的寄存器，更高的代码大小：对于计算密集型程序，这非常有利于本机 64 位应用程序。对于其他类型的应用程序或商业风格的 Web 应用程序，较大的代码和指针大小可能会导致净损失（因此 64 位比 32 位慢！）
3.  访问超过 3GB 的内存。这显然在 2012 年很少发挥作用。想想数据库，Photoshop，......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:13:26.180

正如 usr 所说，速度的提高取决于应用程序的功能。但从根本上说，64 位 CPU 能够在相同的时间内处理两倍于 32 位的数据；但是这样做的机器指令是特定于 64 位处理器的，因此必须重新编译现有的本机程序（至少）才能显示出好处。

在 x86_64 的情况下，内存指针现在也是 64 位宽而不是 32 位，这意味着程序可以寻址更多的内存。但是，代码在磁盘和内存中占用大约两倍的空间；如果您使用的是内存不足的 64 位系统，则交换可能会更糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T07:45:28.030

大多数语言的性能大致相同。

选择 64 位的主要原因是可寻址内存。A32 位进程只能访问 2 GB 的数据，但 64 位进程可以访问 18 quintillion 字节（这远远超过您可以放入机器的 RAM 量）。

# asp.net - 在构建服务器上构建没有 Visual Studio 的 ASP.NET 4.5

> ID：12944502
> 
> 赞同：80
> 
> 时间：2012-10-17T22:39:49.517
> 
> 标签：asp.net, msbuild, visual-studio-2012, asp.net-4.5, build-server

自从我设置构建服务器以来已经有一段时间了，所以也许我忘记了一些东西，或者 .NET 4.5 可能与我上次使用的任何版本不同，但这是我的问题。

我正在尝试设置构建服务器来监视源代码控制存储库。每当发生变化时，我希望服务器拉取变化并构建项目。如果没有错误，我想将该站点部署到在构建服务器上运行的网站。

过去，当我这样做时，我认为只安装 .NET 就可以做到这一点，但是当我尝试构建这个项目时，我收到一个错误“C:\Program Files\MSBuild\Microsoft\VisualStudio\v11 .0\WebApplications\Microsoft.WebApplication.targets" 不见了，如果我去看看，我会发现它不见了。事实上，没有 Visual Studio 11 目标文件。

经过深思熟虑和挠头后，我出去得到了“Windows 8/.NET 4.5 SDK”，认为 .NET 4.5 SDK 可能会安装我需要的目标文件，但除非我以某种方式安装错误，否则它没有.

那么，我需要在构建服务器上放置什么才能构建项目。我宁愿不必安装完整的 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-10-15T15:55:24.933

要在没有 Visual Studio 的情况下在 CI 服务器上运行，只需将几个文件夹从开发机器复制到 CI 服务器上的相同位置。无需安装 SDK。

**与 2015 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v14.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v14.0\WebApplications

**与 2013 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v12.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v12.0\WebApplications

**与 2012 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\WebApplications

**与 2010 年相比：**

*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web
*   C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\WebApplications

**.NET 4.6：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.6

**.NET 4.5.2：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5.2

**.NET 4.5.1：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5.1

**.NET 4.5：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5

**.NET 4.0.1：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0.1

**.NET 4.0：**

*   C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.0

或者，正如[Matt 建议](https://stackoverflow.com/questions/15419610/msbuild-in-teamcity-of-visual-studio-2012-solution/#25062230)的那样，您可以将它们复制到项目的子目录中并更改`<MSBuildExtensionsPath32>`MSBuild（通常为`.csproj`或`.vbproj`）文件中的位置。

完成此操作后，您的项目将编译。

您还应该将 VisualStudioVersion 环境变量显式设置为您正在使用的 Visual Studio 版本（VS2010 为 10.0，VS2012 为 11.0，VS2013 为 12.0，VS2015 为 14.0），以确保它在您的配置中正确设置。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-10-23T15:56:13.707

我的问题与在 Windows 2008 Box 上安装*[适用于 Windows 8 的 Windows 软件开发工具包 (SDK) 有关。](http://msdn.microsoft.com/en-US/windows/hardware/hh852363)*如果您在该页面上进一步阅读，您将看到标有“Windows Vista 和 Windows Server 2008 上的 .NET Framework 4.5 SDK 工具”的标题。这告诉你：

1.  在受支持的操作系统（例如，Windows 7 或 Windows 8）上运行 Windows SDK for Windows 8 安装程序。
2.  在指定位置屏幕上选择以下选项：下载 Windows SDK 以安装在单独的计算机上。
3.  按下一步按钮。
4.  回答加入客户体验改善计划 (CEIP) 屏幕上的问题。
5.  在下一个屏幕上，选择 .NET Framework 4.5 Software Development Kit 功能。取消选择所有其他可以取消选择的功能。
6.  选择下载按钮。
7.  转到下载位置（在步骤 2 中指定）并找到以下 .NET Framework 4.5 SDK 工具安装程序文件：sdk_tools4.msi、sdk_tools4.cab
8.  您可以将这些文件复制到组织内的 Windows Vista 或 Windows 2008 Server 计算机。这些文件需要复制到 Windows Vista 或 Windows 2008 Server 计算机上的同一目录中。注意：请勿在您的组织之外或作为任何其他安装程序的一部分重新分发这些文件。
9.  在 Windows Vista 或 Windows 2008 Server 计算机上，查看此处的许可条款。
10.  检查计算机上是否已安装 .NET Framework 4.5。否则，请从 www.microsoft.com 下载并安装 .NET Framework 4.5。
11.  以管理员权限打开命令提示符。
12.  转到复制 .NET Framework 4.5 SDK Tools 安装程序文件的目录。
13.  使用命令行安装 .NET Framework 4.5 SDK 工具：Msiexec /i sdk_tools4.msi VSEXTUI=1

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-02-27T11:05:20.727

来自[msdn](http://msdn.microsoft.com/en-us/windows/desktop/hh852363.aspx)：

> Windows SDK 不再附带完整的命令行构建环境。您必须分别安装编译器和构建环境。如果您需要一个包含编译器和构建环境的完整开发环境，您可以下载 Visual Studio 2012 Express，其中包含 Windows SDK 的相应组件。

为了解决这个问题，我不得不将文件夹`C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5`从我的开发机器（顺便说一下有 Visual Studio 2012）复制到构建代理上。此操作后，Team City 没有再报错，mscorlib.dll 也没有输出到 bin 文件夹中。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-06-16T10:53:56.430

[Microsoft Build Tools 2013](http://www.microsoft.com/en-in/download/details.aspx?id=40760)将在这种情况下提供帮助，正如其下载页面所述：

> 如果您的计算机上没有安装 Visual Studio，您可以使用 Build Tools 2013 来构建托管应用程序。Visual Basic 和 C# 编译器也包含在此下载中。（在早期版本中，这些工具包含在独立的 .NET Framework 中。）

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-03-24T18:14:48.920

我的部门 喜欢对安装在我们的 Win 7 构建机器上的内容采取简约的方法。但是，由于潜在的注册表项问题，我们不喜欢仅仅复制和粘贴文件/文件夹。我没有安装 VS 2013，而是安装了以下更小且免费的组件。现在开发团队可以成功构建 VS 2013 Web 应用程序。

*   .Net Framework v4.5.1，安装工具所需 - [http://www.microsoft.com/en-us/download/details.aspx?id=40779](http://www.microsoft.com/en-us/download/details.aspx?id=40779)
*   MS Build Tools 2013，我们需要 C# 编译器 - [http://blogs.msdn.com/b/visualstudio/archive/2013/07/24/msbuild-is-now-part-of-visual-studio.aspx](http://blogs.msdn.com/b/visualstudio/archive/2013/07/24/msbuild-is-now-part-of-visual-studio.aspx)
*   MS VS 2013 隔离外壳，我们需要 Web 应用程序目标 - [http://www.microsoft.com/en-us/download/details.aspx?id=40764](http://www.microsoft.com/en-us/download/details.aspx?id=40764)。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-12-04T10:47:22.717

我用 Visual Studio 代理解决了这个问题。

您可以尝试安装 Visual Studio Agents 2012。

[http://www.microsoft.com/en-us/download/details.aspx?id=38186](http://www.microsoft.com/en-us/download/details.aspx?id=38186)

# ios - 如何从 API 中检索 iPhone IDFA？

> ID：12944504
> 
> 赞同：83
> 
> 时间：2012-10-17T22:40:18.207
> 
> 标签：ios, iphone, tvos, idfa

我想得到设备`IDFA`。如何从 iOS 官方 API 获取此信息？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-10-03T19:50:30.893

首先，您必须征得用户的许可才能使用他们的 IDFA：

```
#import <AppTrackingTransparency/AppTrackingTransparency.h> 

[ATTrackingManager requestTrackingAuthorizationWithCompletionHandler:^(ATTrackingManagerAuthorizationStatus status) {
 // Tracking authorization completed. Start loading ads here. 
 }]; 
```

此权限流只会在第一次调用时运行一次，即使您重新启动应用程序和/或再次调用它也是如此。如果您想以不同的方式回答，则必须从设备或模拟器中完全删除该应用程序并重新安装。请注意，无论权限流的答案是什么，iOS 模拟器都会返回空白 IDFA（全为零）。有关详细信息，请参阅[https://developer.apple.com/documentation/apptrackingtransparency](https://developer.apple.com/documentation/apptrackingtransparency)，包括如何自定义在要求跟踪用户时向用户显示的消息。请注意，许多广告 SDK 都有自己可以使用的同意流调用。

获得许可后，要真正获得 IDFA：

```
#import <AdSupport/ASIdentifierManager.h> 
```

如果您想将其作为 NSString 获取，请使用：

```
[[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString] 
```

因此，您的代码可能如下所示：

```
NSString *idfaString = [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString];
NSLog (@"IDFA: %@", idfaString); 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2014-04-22T10:18:03.407

您首先必须检查**用户用户是否决定退出广告跟踪**。只有在他允许的情况下，您才能使用`IDFA`.

您可以通过调用`isAdvertisingTrackingEnabled`的方法来检查它`ASIdentifierManager`。

> **isAdvertisingTrackingEnabled**
> 
> 在执行任何广告跟踪之前检查此属性的值。如果值为`NO`，则仅将广告标识符用于以下目的：频次上限、转化事件、估计唯一用户数、安全和欺诈检测以及调试。

以下代码片段显示了如何获取`IDFA`.

### 对象

```
@import AdSupport;

- (NSString *)identifierForAdvertising {
    // Check whether advertising tracking is enabled
    if([[ASIdentifierManager sharedManager] isAdvertisingTrackingEnabled]) {
        NSUUID *identifier = [[ASIdentifierManager sharedManager] advertisingIdentifier];
        return [identifier UUIDString];
    }

    // Get and return IDFA
    return nil;
} 
```

### 迅速

```
import AdSupport

func identifierForAdvertising() -> String? {
    // Check whether advertising tracking is enabled
    guard ASIdentifierManager.shared().isAdvertisingTrackingEnabled else {
        return nil
    }

    // Get and return IDFA
    return ASIdentifierManager.shared().advertisingIdentifier.uuidString
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2020-09-21T14:57:33.597

`IDFA`- 广告标识符

```
isAdvertisingTrackingEnabled -> trackingAuthorizationStatus 
```

从**iOS v14** Apple 弃用[`isAdvertisingTrackingEnabled`](https://developer.apple.com/documentation/adsupport/asidentifiermanager/1614148-isadvertisingtrackingenabled)并将逻辑移至[`AppTrackingTransparency`Framework](https://developer.apple.com/documentation/apptrackingtransparency)。现在用户必须获得阅读权限`idfa`（与位置权限相同）

用户可以通过以下方式控制它：

```
#iOS 13
#AdSupport
#ASIdentifierManager.shared().isAdvertisingTrackingEnabled
Settings -> Privacy -> Advertising -> Limit Ad Tracking 
```

```
#iOS 14
#AppTrackingTransparency
#ATTrackingManager.trackingAuthorizationStatus

#a global flag
Settings -> Privacy -> Tracking -> `Allow Apps to Request to Track` 
#or select an app from list to control every app separately 

#a local flag
Settings -> <app_name> -> Allow Tracking 
```

执行

```
import AppTrackingTransparency
import AdSupport 
```

```
func getIDFA() -> String? {
    // Check whether advertising tracking is enabled
    if #available(iOS 14, *) {
        if ATTrackingManager.trackingAuthorizationStatus != ATTrackingManager.AuthorizationStatus.authorized  {
            return nil
        }
    } else {
        if ASIdentifierManager.shared().isAdvertisingTrackingEnabled == false {
            return nil
        }
    }

    return ASIdentifierManager.shared().advertisingIdentifier.uuidString
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-17T22:53:27.407

[ASIdentifierManager](http://developer.apple.com/library/ios/#documentation/AdSupport/Reference/ASIdentifierManager_Ref/ASIdentifierManager.html)是从运行 iOS 6+ 的设备获取广告标识号的官方方法。您可以使用`-[[ASIdentifierManager sharedManager] advertisingIdentifier];`它来获取它。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-04-23T19:39:13.857

在 Swift 中获取 IDFA：

```
 import AdSupport

    ...

    let myIDFA: String?
    // Check if Advertising Tracking is Enabled
    if ASIdentifierManager.sharedManager().advertisingTrackingEnabled {
        // Set the IDFA
        myIDFA = ASIdentifierManager.sharedManager().advertisingIdentifier.UUIDString
    } else {
        myIDFA = nil
    } 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-09-09T23:27:10.437

从 iOS 10 开始，当用户启用“限制广告跟踪”时，操作系统将发送带有新值“00000000-0000-0000-0000-000000000000”的广告标识符。</p>

根据这篇文章：[https ://fpf.org/2016/08/02/ios-10-feature-stronger-limit-ad-tracking/](https://fpf.org/2016/08/02/ios-10-feature-stronger-limit-ad-tracking/)

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-02-06T10:27:45.363

这是 Swift 中的一个带注释的**帮助器类，**`nil`如果用户关闭了广告跟踪，它将为您提供一个标识符对象：

```
import AdSupport

class IDFA {
    // MARK: - Stored Type Properties
    static let shared = IDFA()

    // MARK: - Computed Instance Properties
    /// Returns `true` if the user has turned off advertisement tracking, else `false`.
    var limited: Bool {
        return !ASIdentifierManager.shared().isAdvertisingTrackingEnabled
    }

    /// Returns the identifier if the user has turned advertisement tracking on, else `nil`.
    var identifier: String? {
        guard !limited else { return nil }
        return ASIdentifierManager.shared().advertisingIdentifier.uuidString
    }
} 
```

只需**将其添加到您的项目**中（例如在名为 的文件中`IDFA.swift`）并`AdSupport.framework`通过“常规设置”选项卡中的“链接的框架和库”部分将其链接到您的目标中。

然后你可以**像这样使用它**：

```
if let identifier = IDFA.shared.identifier {
    // use the identifier
} else {
    // put any fallback logic in here
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-07-31T13:26:20.487

**斯威夫特 3 & 4**

```
var IDFA = String()
if ASIdentifierManager.shared().isAdvertisingTrackingEnabled {
            IDFA = ASIdentifierManager.shared().advertisingIdentifier
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-16T09:20:56.033

如果通过 iOS 设置禁用跟踪，则获取 IDFA 或 nil 的更好方法是使用（私有）扩展：

```
import AdSupport

class YourClass {

    func printIDFA() {
        print(ASIdentifierManager.shared().advertisingIdentifierIfPresent)
    }
}

private extension ASIdentifierManager {

    /// IDFA or nil if ad tracking is disabled via iOS system settings
    var advertisingIdentifierIfPresent: String? {
        if isAdvertisingTrackingEnabled {
            return advertisingIdentifier.uuidString
        }

        return nil 
    }        
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-07-26T09:06:43.103

请注意，在 iOS 14 中，`ASIdentifierManager.shared().isAdvertisingTrackingEnabled`已弃用。请`ATTrackingManager.trackingAuthorizationStatus == .authorized`改用。

```
import AdSupport
import AppTrackingTransparency

extension ASIdentifierManager {
    //NOTE: if the user has enabled Limit Ad Tracking, this IDFA will be all zeros on a physical device
    static var identifierForAdvertising: String {

        // Check whether advertising tracking is enabled
        if #available(iOS 14, *) {
            guard ATTrackingManager.trackingAuthorizationStatus == .authorized else {
                return ""
            }
        } else {
            guard ASIdentifierManager.shared().isAdvertisingTrackingEnabled else {
                return ""
            }
        }

        // Get and return IDFA
        return ASIdentifierManager.shared().advertisingIdentifier.uuidString
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-09-24T14:26:46.280

只是为了扩展 Amro 的 Swift 答案，下面是包含在方法中的类似代码：

```
import AdSupport

...

func provideIdentifierForAdvertisingIfAvailable() -> String? {
    if ASIdentifierManager.sharedManager().advertisingTrackingEnabled {
      return ASIdentifierManager.sharedManager().advertisingIdentifier?.UUIDString ?? nil
    } else {
      return nil
    }
  } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-04-30T07:51:35.377

**Swift 5**带封装：</p>

```
import AdSupport

struct ID{
    static var advertising: String? {
         // Firstly, Check whether advertising tracking is enabled
         guard ASIdentifierManager.shared().isAdvertisingTrackingEnabled else {
              return nil
         }
         // Then, Get and return IDFA
         return ASIdentifierManager.shared().advertisingIdentifier.uuidString
     }
} 
```

# c# - 无法加载或找不到组装的原因

> ID：12944511
> 
> 赞同：1
> 
> 时间：2012-10-17T22:40:49.793
> 
> 标签：c#, dll

我刚刚从一个库中生成了一个 32 位 dll，并试图在 C#（调试 - x86）中将它与我的基于 Windows 的表单应用程序一起使用。我添加了 dll 文件作为参考，现在当我运行代码时出现以下错误

```
System.IO.FileNotFoundException was unhandled
  Message=Could not load file or assembly 'org.apache.qpid.messaging.dll' or one of its dependencies. The specified module could not be found.
  Source=QpidRx_CSharp
  FileName=org.apache.qpid.messaging.dll
  FusionLog=""
  StackTrace:
       at QpidRx_CSharp.Program.Main()
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

关于如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:43:19.710

[查看带有（免费且出色的） “DependencyWalker”](http://www.dependencywalker.com/)的 dll以查看缺少的内容（因为错误似乎表明这是这里的确切问题：您没有满足所有需要的依赖项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:54:25.767

`Copy Local`使用 DLL 的项目的 DLL 引用上的值是否设置为 True？（右键单击 VS 解决方案资源管理器中的引用，然后选择属性）。如果没有，则该 DLL 将不在应用程序的 Bin\Debug 文件夹中，也不会被找到。

另一种可能性是您的 DLL 本身具有无法找到的依赖项。您的 DLL 是否引用了 .Net 框架程序集以外的任何内容？

# c# - Xml 文档添加命名空间 uri，是否可以将 dtd 作为本地文件而不是 Web 验证？

> ID：12944512
> 
> 赞同：0
> 
> 时间：2012-10-17T22:40:53.633
> 
> 标签：c#, xml, windows-services, xml-namespaces

好的，我对使用 xml、xpath 等还是很陌生。

我正在编写一个将从队列中获取信息的 Windows 服务。它将处理此信息，并且此信息的部分处理是在我正在创建的 xmldocument 上使用 xpath，而不是加载。

代码片段。：

```
XmlDocument _xmlDocument = new XmlDocument();
_xmlDocument.Load(svgFile);
_xmlNamespaceManager = new XmlNamespaceManager(_xmlDocument.NameTable);
_xmlNamespaceManager.AddNamespace("svg", "http://www.w3.org/2000/svg"); 
```

在上面的代码片段之后，我正在做一些 xpath 功能，我需要使用它，因为有一些预先编写的功能可以为我节省大量时间。

这是真正的问题，当我使用上面的 AddNamespace 时，它​​会输出到该 uri 并占用太多时间（验证等）。我的想法是，如果我可以下载 DTD 并创建一个本地文件，这样可以节省浪费在网络上的时间。不幸的是，没有 AddNamespace xpath 将无法工作。

我在网上对此进行了研究，但无法找到解决方案。xml 是在内部创建的，所以我现在不太担心网络上的最新模式。我更担心及时从服务中生成数据。也许我完全错了，这是不可能的，但是从编程上讲，我看不出以前是怎么做到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:57:27.527

使用本地文件应该可以正常工作：

> 注意：解析器不使用命名空间 URI 来查找信息。
> 
> 目的是给命名空间一个唯一的名称。然而，公司通常使用命名空间作为指向包含命名空间信息的网页的指针。

来自： [关于 Xml 命名空间](http://www.w3schools.com/xml/xml_namespaces.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T22:33:54.067

I ended up having to create my own xmlresolver class and then downloading the dtd and a bunch of mod files associated with it locally. Then rather than doing an xmldocument.load, you perform something like the below. :

```
 XmlReaderSettings settings = new XmlReaderSettings();
            settings.ValidationType = ValidationType.DTD;
            settings.ProhibitDtd = false;
            settings.XmlResolver = new MyCoolResolver();
            binDirectory = binDirectory + "/content";
            string myFileLocation = binDirectory + "/MyFile.svg";

            using (XmlReader reader = XmlReader.Create(myFileLocation , settings))
            {
                try
                {
                    while (reader.Read())
                    {
                        _xmlDocument.Load(reader);
                    }
                }
                catch (XmlException e)
                {
                    Console.WriteLine(e.Message);
                }
            } 
```

Then your class is just something like this for your myXmlResolver class.

```
namespace ReallyCoolProject
{
    public class MyCoolResolver : XmlUrlResolver
    {
         public override object GetEntity(Uri absoluteUri, string role, Type ofObjectToReturn)
         {
            string binDirectory =               Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);
            binDirectory = binDirectory + "/mods";

            if (absoluteUri.OriginalString.Contains("-//W3C//DTD SVG 1.1//EN"))
            {
                return File.Open(binDirectory + "/svg11.dtd", FileMode.Open);
            }

            if (absoluteUri.OriginalString.Contains("-//W3C//ENTITIES SVG 1.1 Document Model//EN"))
            {
                return File.Open(binDirectory + "/svg11-model.mod", FileMode.Open);
        }

        //.....many many more mod files than this

     }
    }
} 
```

****Personal note can't take all the credit as I took bits and pieces from a bunch of examples on the web.

# web-services - 如何使用 Apache Camel 将 ActiveMQ 连接到 CXF

> ID：12944515
> 
> 赞同：1
> 
> 时间：2012-10-17T22:41:18.193
> 
> 标签：web-services, jms, cxf, activemq, apache-camel

有人知道将 ActiveMQ 连接到 CXF 的工作示例吗？我看到了许多将 WebService 连接到消息队列的示例，但反过来我需要它。来自 JMS 队列的消息应转发到 Web 服务，并将结果返回给调用者。

我的第一种方法仅适用于公开一个方法的 Web 服务：

```
from("activemq:wsa").to("cxf:bean:webServiceA");

Status msg = producerTemplate.requestBody("activemq:wsa", params, Status.class); 
```

但是对于具有多个方法的 Web 服务，类似的调用会导致*ExchangeTimedOutException*。

```
Map<String, Object> header = new HashMap<String, Object>(); 
header.put(CxfConstants.OPERATION_NAME, "doSomething"); 
header.put(CxfConstants.OPERATION_NAMESPACE, "http://.../"); 

Status msg = producerTemplate.requestBodyAndHeaders("activemq:wsb", params, header, Status.class); 
```

尽管如此，我可以看到请求被转发到 Web 服务并返回了正确的答案。但不幸的是，它在回来的路上迷路了。

任何指向外部资源的提示或链接表示赞赏。

许多问候， 雅各布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:38:27.197

ActiveMQ 和 JMS 调用是一种默认方式，您可能希望将其指定为同步的。

[http://camel.apache.org/jms.html#JMS-RequestreplyoverJMS](http://camel.apache.org/jms.html#JMS-RequestreplyoverJMS)

除此之外，使用 ActiveMQ 作为 CXF 生产者的启动器应该没有什么不同。

一个建议是下载 Camel 源代码并查看此文件夹：

\components\camel-cxf\src\test\java\org\apache\camel\component\cxf

（或通过网络： http: [//svn.apache.org/viewvc/camel/trunk/components/camel-cxf/src/test/](http://svn.apache.org/viewvc/camel/trunk/components/camel-cxf/src/test/)）

您将拥有大量的 CXF 生产者测试用例，作为参考资料。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:08:48.520

当 Web 服务返回未实现可序列化接口的类的对象时会出现问题，即使这些类是可序列化的。

实现可序列化接口解决了这个问题。

# php - 是否将图像信息保存在数据库中？

> ID：12944517
> 
> 赞同：1
> 
> 时间：2012-10-17T22:41:39.270
> 
> 标签：php, file-upload, relational-database

假设我正在使用 PHP 构建一个图片库，用户可以在其中上传他们的照片。每个用户将在服务器端有 1 个文件夹，其中包含他们的所有图像。

现在假设我需要在浏览器中提供信息。用户将能够浏览图像并且应该看到很多关于它们的信息，例如图像大小、图像尺寸，甚至 EXIF 信息等。

我可以通过两种方式做到这一点：

1.  上传图片时将图片的所有信息保存到数据库中。
2.  使用 PHP 函数浏览文件夹，并从每个图像中获取信息。

我有类似文件管理器类的东西，它可以对服务器端的文件进行所有操作，比如 deleteDir、deleteFile、countItems、getFileSize、getDirSize。而且很容易再写一个检查图像的类，然后我可以上传图像，并直接从文件夹中获取它们的信息，而不需要关系数据库。

现在你们一直在等待的问题是：... :)

什么会更快，第一个或第二个解决方案？可以说该网站获得了大量流量。如果我希望它更快，而不是对服务器施加太大压力，那么哪种解决方案会更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:46:45.387

实际上，我遇到了像您这样的情况，这是我的解决方案：

> 上传图片时将图片的所有信息保存到数据库中。

为什么？

我测试了两种方法：

> 使用 php 获取图像信息**1000**次。
> 
> 从数据库中获取图像信息**1000**次。

结果是：

> 从数据库中获取图像信息越来越快。

最后但并非最不重要的：

> 如果你想做图像信息分析，你会怎么做？

如果您将所有信息保存在数据库中，您可以轻松获取并分析它们，但是如果您使用 php 获取信息？很难想象。

因此，只需在上传图像时将有关图像的所有信息保存到数据库中。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T02:32:28.423

将数据存储在不同的地方会导致维护问题。我只会序列化每个文件夹中图像的元数据并将其转储到那里的文件中。如果对文件使用 gzip 压缩，检索和存储应该非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:51:38.497

根据这些图像的大小，您可能希望在人们浏览时显示缩略图而不是原始图像，这意味着您需要生成它们。我会在上传时生成缩略图并获取所有文件信息。然后将文件信息保存在数据库中，并将原件和缩略图放入文件系统中。如果你有很多流量，也把 memcache 扔在那里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:48:47.707

一旦从数据库中读取数据并将其存储在缓存中，就将其存储在数据库中，

重做事情总是要付出代价的，尤其是如果它一直发生的话

# c# - 为所有类实现 BsonIgnoreExtraElements

> ID：12944520
> 
> 赞同：23
> 
> 时间：2012-10-17T22:42:03.993
> 
> 标签：c#, mongodb

我正在将 mongDb 与 MongoDrive 一起使用，我想知道如何在我的所有类中实现`[BsonIgnoreExtraElements]`.

我知道有办法通过`ConventionProfile`，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-17T22:57:54.720

**编辑**

根据 Evereq 的评论，以下内容已过时。现在使用：

```
var conventionPack = new ConventionPack { new IgnoreExtraElementsConvention(true) };
ConventionRegistry.Register("IgnoreExtraElements", conventionPack, type => true); 
```

* * *

使用`SetIgnoreExtraElementsConvention`方法（来自C# 驱动程序[序列化教程的](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial)*约定*部分）：

```
var myConventions = new ConventionProfile();
myConventions.SetIgnoreExtraElementsConvention(new AlwaysIgnoreExtraElementsConvention()));
BsonClassMap.RegisterConventions(myConventions, (type) => true); 
```

参数`(type) => true`是一个取决于类类型的谓词，它决定是否应用约定。因此，根据您的要求，无论如何它都应该简单地返回 true；但是如果需要，您可以使用它来设置/排除给定类型的约定。

# mysql - 休眠双向 OneToMany 与 JoinTable 和多态类与每个具体类的表

> ID：12944521
> 
> 赞同：0
> 
> 时间：2012-10-17T22:42:17.057
> 
> 标签：mysql, hibernate

我正在使用带有 Spring 的 Hibernate 4.1.7 Java，在 MySql 上工作。

我有一个 Publication 类，它是抽象的，有 3 个子类，还有一个 Page 类，它也是抽象的，有 2 个子类。

在 Publication 中有一个 List 并且在 Page 我有一个 Publication，所以这是一个常见的 OneToMany/ManyToOne 双向关系，但是由于我需要对页面进行排序，所以我使用了一个交叉表，如图所示：

```
// Publication.java
@OneToMany(fetch=FetchType.LAZY)
@JoinTable(name="publication_pages",
            joinColumns=@JoinColumn(table="publication_pages", name="pub_id", referencedColumnName="id"),
            inverseJoinColumns=@JoinColumn(table="publication_pages", name="pg_id", referencedColumnName="id"))
@OrderColumn(name="i")
public List<Page> getPages() {
    return pages;
}

// Page.java

@ManyToOne
@JoinTable(name="publication_pages",
        joinColumns=@JoinColumn(table="publication_pages", name="pg_id", referencedColumnName="id", insertable=false, updatable=false),
        inverseJoinColumns=@JoinColumn(table="publication_pages", name="pub_id", referencedColumnName="id", insertable=false, updatable=false))
public Publication getPublication() {
    return publication;
} 
```

Hibernate 不会抱怨注释，但是一旦我尝试调用 getPages，它就会生成一个查询，在 Page 子类表上搜索 pub_id，而不是仅在交叉表中搜索。

错误是：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'page1_.pub_id' in 'field list'
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
at com.mysql.jdbc.Util.getInstance(Util.java:386)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1053)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
at com.mysql.jdbc.PreparedStatement.executeQuery(PreparedStatement.java:2318)
at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
at $Proxy54.executeQuery(Unknown Source)
at org.hibernate.loader.Loader.getResultSet(Loader.java:1897)
at org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1698)
at org.hibernate.loader.Loader.doQuery(Loader.java:832)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293)
at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:263)
at org.hibernate.loader.Loader.loadCollection(Loader.java:2094)
at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:61)
at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:678)
at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:82)
at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1801)
at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:524)
at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:212)
at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:520)
at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:125)
at org.hibernate.collection.internal.AbstractPersistentCollection$1.doWork(AbstractPersistentCollection.java:152)
at org.hibernate.collection.internal.AbstractPersistentCollection$1.doWork(AbstractPersistentCollection.java:139)
at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:212)
at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:138)
at org.hibernate.collection.internal.PersistentList.isEmpty(PersistentList.java:121) 
```

我做错了什么，或者是 Hibernate 错误，还是由于它在查询中执行的大量联合而根本不可能？

TIA

编辑：这是hibernate正在生成的查询（我删除了所有不相关的列）：

```
Hibernate: 
select 
pages0_.pub_id as pub1_46_3_, 
pages0_.pg_id as pg2_43_3_, 
pages0_.i as i3_,
page1_.id as id42_0_, 
[...] 
page1_.pub_id as pub1_43_0_ [...]

from publication_pages pages0_ 
inner join ( 
  select id, [...] from page_fixed union select id, [...] from page_query 
) page1_

on pages0_.pg_id=page1_.id left outer join ( 
  select id, [...] from publication 
) publicatio2_ 
on page1_.pub_id=publicatio2_.id left where pages0_.pub_id=? 
```

如您所见，它在连接中使用 page1_.pub_id（好像 pub_id 在 Page 上）而不是 pages0_.pub_id（在 where 子句中正确使用）。

这发生在调用 Publication.getPages().isEmpty()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:23:08.417

也许，您可以将 a 添加`mappedBy`到您的`@OneToMany`并删除它的`@JoingTable`. 与 OneToMany/ManyToOne 的双向关系不需要`@JoingTable`双方，您只需要关系所有者。

# ios - 纵向xib调整为横向时需要改变UIScrollView contentSize

> ID：12944522
> 
> 赞同：1
> 
> 时间：2012-10-17T22:42:18.087
> 
> 标签：ios, uiscrollview

我有一个 UIViewController 和一个纵向的 iPad xib。当我的 iPad 处于横向并且我将该视图控制器放入我的 UISplitViewController 的详细信息窗格时，它会自动调整大小以适应这很棒。

但是，当我在 -viewDidLoad 中配置视图时，视图的最终大小还不是横向/大小。

-didRotateFromInterfaceOrientation: 方法和与之关联的其他方法在 UIViewController 已经加载到横向时不会被调用，所以我何时何地能够正确设置滚动视图的 contentSize 及其内容？

我只希望我的滚动视图垂直滚动，所以我想确保滚动视图中的内容视图在任何方向上都重新适合视图控制器的宽度。

无论我检查什么 .frame 或 .bounds，无论是在我的视图、滚动视图，还是我的 SplitViewController 的详细视图控制器上，都会向我显示我的实际尺寸是多少。在横向使用 UISplitViewController 时，左侧为 320px 宽，这意味着右侧不应超过 704px 宽，但每当我检查视图和滚动视图的框架和边界时，它们报告为 768px 宽这是不正确的。

我的滚动视图显然只有 704px 宽，因为我可以正确地看到滚动指示器。

我错过了什么？

这是我在 -viewDidLoad 中的代码...

```
CGSize textSize = [self.purchase.textDescription sizeWithFont:self.labelTextDescription.font constrainedToSize:allowedSize lineBreakMode:UILineBreakModeWordWrap];

CGRect textFrame = self.labelTextDescription.frame;
textFrame.size.height = textSize.height;
self.labelTextDescription.frame = textFrame;

CGRect contentFrame = self.contentView.frame;
contentFrame.size.height += textSize.height;

if (contentFrame.size.width > self.scrollView.frame.size.width) {
    contentFrame.size.width = self.scrollView.frame.size.width;
}

self.contentView.frame = contentFrame;

[self.scrollView addSubview:self.contentView];
self.scrollView.contentSize = self.contentView.frame.size; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T23:54:53.740

布局视图和设置滚动视图的适当时间`contentSize`是在运行循环的布局阶段。在这个阶段，UIKit 将`layoutSubviews`消息发送到任何被标记为需要布局并且在窗口中的视图。当各种事情发生时，视图会自动标记为需要布局，包括第一次添加到窗口层次结构时、给它一个新的子视图时以及它的大小发生变化时。`setNeedsLayout`您还可以通过发送消息手动将视图标记为需要布局。

当视图接收到`layoutSubviews`消息时，UIKit 已经发送`layoutSubviews`给任何需要它的视图的祖先（它的父视图和上层视图），并且它已经根据它的自动调整掩码或自动布局约束以及它自己的子视图调整了它的框架' 框架已经根据它们的自动调整大小掩码或自动布局约束进行了调整。

如果`self.view`已经是 的自定义子类`UIView`，最好的方法就是`layoutSubviews`在该类中覆盖。把你的布局代码放在那里，并在那里设置滚动视图`contentSize`。

如果您没有使用自定义子类，并且您不想创建一个，那么您可以在视图控制器`viewWillLayoutSubviews`或`viewDidLayoutSubviews`方法中进行布局，如果您的部署目标是 iOS 5.0 或更高版本。您可能会猜到这些消息是何时发送的。:)

在自动旋转期间，所有这些消息（`layoutSubviews`、`viewWillLayoutSubviews`和`viewDidLayoutSubviews`）都在自动旋转的动画块中发送，因此如果您使用其中一种方法进行布局，您还可以获得在自动旋转动画期间对布局的更改进行动画处理的好处.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:30:25.590

首先，如果您不想在旋转时调整视图大小，请检查自动调整大小蒙版。如果您在界面构建器中构建了视图，请检查它是否在超级视图发生变化时没有改变它的大小：

![调整视图的属性](../Images/3f998ba783b9bf67f6298c8ea2d9c0a0.png)

您可以`UIViewController`使用. 查看当前界面方向`self.interfaceOrientation`。如果您想手动设置视图，这可能会对您有所帮助。

此外，如果您需要手动调整大小，请在执行旋转之前（或之后）将所需的帧设置为您的视图：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration;
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:41:29.050

我建议查询状态栏方向以获取当前旋转`viewDidLoad`我建议不要依赖滚动视图的自动调整大小，因为它往往会变得棘手。检查状态栏，根据此按比例调整大小。

`[UIApplication sharedApplication].statusBarOrientation`

# wpf - 工具栏卡在 Avalon Dock 后面

> ID：12944523
> 
> 赞同：2
> 
> 时间：2012-10-17T22:42:18.527
> 
> 标签：wpf, toolbar, avalondock

我是 WPF 新手并开始使用 Avalon Dock。我的工具栏有问题。当我在工具栏托盘中拖动工具栏时，托盘向下扩展并卡在 Avalon Dock 容器后面。我如何使其自动重新调整大小，以便工具栏不会卡在后面？这是我的 XAML .. 谢谢:)

```
<Window x:Class="PSWPF0._001.MainWindow"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:avalonDock="http://avalondock.codeplex.com"
    Title="MainWindow" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" d:DesignHeight="381" d:DesignWidth="754" SizeToContent="WidthAndHeight">
<Grid DataContext="{Binding}" AllowDrop="True" ClipToBounds="True" IsItemsHost="False">
    <DockPanel HorizontalAlignment="Stretch" Margin="2,0,0,0" Name="dockPanel1" VerticalAlignment="Stretch" />

    <Menu Height="22" HorizontalAlignment="Stretch" Name="menu1" VerticalAlignment="Top" Margin="2,0,-2,0" DockPanel.Dock="Top">
        <MenuItem Header="File">
            <MenuItem Header="New" Click="MenuItem_Click_4">
                <MenuItem Header="Project" />
                <MenuItem Header="C Source File" />
                <MenuItem Header="Text File" />
            </MenuItem>
            <MenuItem Header="Open" Click="MenuItem_Click_5"/>
            <MenuItem Header="Save" />
        </MenuItem>
        <MenuItem Header="Edit">
            <MenuItem Header="Undo" />
            <MenuItem Header="Redo" />
            <Separator />
            <MenuItem Header="Copy" />
            <MenuItem Header="Cut" />
            <MenuItem Header="Paste" />
            <MenuItem Header="Delete" />
            <Separator />
            <MenuItem Header="Find" />
        </MenuItem>
        <MenuItem Header="View" Click="MenuItem_Click_1">
            <MenuItem Header="Project Dashboard"/>

            <MenuItem Header="Project Explorer" />
        </MenuItem>
        <MenuItem Header="Help" Click="MenuItem_Click">
            <MenuItem Header="About" Click="MenuItem_Click_3"/>
            <MenuItem Command="ApplicationCommands.Help" Header="Help Content" />
        </MenuItem>
    </Menu>

    <ToolBarTray DockPanel.Dock="Top"  Background="LightGray" VerticalAlignment="Top" Margin="2,23,-2,0">
        <ToolBar Band="1" BandIndex="1">
            <Button>New</Button>
            <Button>Open</Button>
            <Button>Exit</Button>
        </ToolBar>
        <ToolBar BandIndex="2" Band="2">
            <Button>Undo</Button>
            <Button>Redo</Button>
        </ToolBar>
        <ToolBar Band="2" BandIndex="2">
            <Button>Paint</Button>
            <Button>Spaell</Button>
            <Separator />
            <Button>Cut</Button>
            <Button>Copy</Button>
            <Button>Paste</Button>
            <Separator />
            <Button>Find</Button>
            <Button>Replace</Button>
        </ToolBar>
    </ToolBarTray>

    <avalonDock:DockingManager x:Name="dockingManager" Margin="0,52,0,28" VerticalAlignment="Stretch" DockPanel.Dock="Top" Grid.Column="0" AllowMixedOrientation="True" IsManipulationEnabled="False" UseLayoutRounding="True">
        <avalonDock:LayoutRoot>     

            <avalonDock:LayoutPanel Orientation="Vertical">
                <avalonDock:LayoutDocumentPaneGroup DockMinHeight="70">
                    <avalonDock:LayoutDocumentPane>
                        <avalonDock:LayoutDocument Title="Doc1">
                            <TextBox/>
                        </avalonDock:LayoutDocument>
                        <avalonDock:LayoutDocument Title="Doc2">
                            <TextBox/>
                        </avalonDock:LayoutDocument>
                    </avalonDock:LayoutDocumentPane>
                    <avalonDock:LayoutDocumentPane >

                    </avalonDock:LayoutDocumentPane>
                </avalonDock:LayoutDocumentPaneGroup>

                <avalonDock:LayoutAnchorablePaneGroup IsMaximized="True" DockMinHeight="70" DockHeight="250">
                    <avalonDock:LayoutAnchorablePane>
                        <avalonDock:LayoutAnchorable Title="Output">
                            <RichTextBox/>
                        </avalonDock:LayoutAnchorable>

                        <avalonDock:LayoutAnchorable Title="Error List">
                            <TextBox/>
                        </avalonDock:LayoutAnchorable>

                    </avalonDock:LayoutAnchorablePane>
                </avalonDock:LayoutAnchorablePaneGroup>

               </avalonDock:LayoutPanel>

            <avalonDock:LayoutRoot.RightSide>
                <avalonDock:LayoutAnchorSide>
                    <avalonDock:LayoutAnchorGroup>

                        <avalonDock:LayoutAnchorable Title="Properties" AutoHideMinWidth="200">
                            <RichTextBox/>
                        </avalonDock:LayoutAnchorable>

                        <avalonDock:LayoutAnchorable Title="Project Explorer" AutoHideMinWidth="200">
                            <RichTextBox/>
                        </avalonDock:LayoutAnchorable>

                        <avalonDock:LayoutAnchorable Title="File Explorer" AutoHideMinWidth="200">
                            <RichTextBox/>
                        </avalonDock:LayoutAnchorable>
                    </avalonDock:LayoutAnchorGroup>

                </avalonDock:LayoutAnchorSide>
            </avalonDock:LayoutRoot.RightSide>

            <avalonDock:LayoutRoot.LeftSide>

                <avalonDock:LayoutAnchorSide>
                    <avalonDock:LayoutAnchorGroup>

                        <avalonDock:LayoutAnchorable Title="Project Dashboard" AutoHideMinWidth="200">
                            <RichTextBox/>
                        </avalonDock:LayoutAnchorable>

                        <avalonDock:LayoutAnchorable Title="Hardware Toolbox" IsMaximized="True" CanAutoHide="True" IsActive="True" AutoHideMinWidth="200">
                            <ListBox/>
                        </avalonDock:LayoutAnchorable>

                        <avalonDock:LayoutAnchorable Title="Logic Building Blocks" AutoHideMinWidth="200">
                            <RichTextBox/>
                        </avalonDock:LayoutAnchorable>                        

                    </avalonDock:LayoutAnchorGroup>
                </avalonDock:LayoutAnchorSide>
            </avalonDock:LayoutRoot.LeftSide>                
        </avalonDock:LayoutRoot>
        </avalonDock:DockingManager>

    <StatusBar Height="22" HorizontalAlignment="Stretch" Margin="2,322,0,0" Name="statusBar1" VerticalAlignment="Bottom" DockPanel.Dock="Bottom"/>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T11:36:58.230

我建议使用这样的动态布局：

```
<Grid>
<Grid.RowDefinitions>
    <RowDefinition Height="Auto"/>//<-- for menu
    <RowDefinition Height="Auto"/>//<-- for toolbar
    <RowDefinition Height="*"/>//<-- for docking manager
    <RowDefinition Height="Auto"/>//<-- for status bar
</Grid.RowDefinitions>
</Grid> 
```

始终使用 Auto 或 Start 网格长度进行子控件的动态布局排列，

阿多

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T08:21:56.293

我知道这很旧，但我也花了一段时间才弄清楚这一点（带有 .NET 4.5 的 WPF 上的 AD 2.0），所以我会为可能将其用作源的其他人发布。adospace 的答案是有效的。但是，您还必须更改您的代码。

消除 DockingManager 的上边距，除非您有其他需要。我的布局看起来很奇怪，直到我意识到在使用网格的`RowDefinitions`. 此外，`DockPanel.Dock="Top"`除非您还有其他内容，否则请从您的菜单中删除。我也没有`VerticalAlignment`设置。

这就是我得到的效果很好的东西，包括多个乐队。使用其中一个 AD 测试应用程序，它已经具有该根网格 (gdlayoutRoot)，因此您可以使用那个。

```
<Grid Name="gdlayoutRoot">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto" />
        <RowDefinition Height="Auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Menu IsMainMenu="True" Name="menuMain" Grid.Row="0">
        <MenuItem Header="_File" Name="File">
            <MenuItem Header="_New" Name="New" />
        </MenuItem>
        <MenuItem Header="_Edit" Name="Edit" />
        <MenuItem Header="_Document" Name="Document">
            <MenuItem Header="Import From _XML">
                <MenuItem Header="Entity" Name="ImportFromXML"  Click="ImportFromXML_Click" />
            </MenuItem>
        </MenuItem>
    </Menu>
    <ToolBarTray Grid.Row="1">
        <ToolBar Band="0" BandIndex="0">
            <Button Content="Stuff"/>
        </ToolBar>
    </ToolBarTray>
    <ad:DockingManager x:Name="dockingManager" Grid.Row="3"> 
```

# php - 将当前日期插入 MYSQL 表，然后回显

> ID：12944526
> 
> 赞同：0
> 
> 时间：2012-10-17T22:42:28.497
> 
> 标签：php, mysql

似乎有太多复杂的方法可以做到这一点，所以我正在寻找一个干净、简洁的答案来解决这个问题。

我写了一个博客，点击提交，标题、内容和时间戳插入到我的博客表中。稍后，博客将显示在 blogindex.php 页面上，日期格式为 MM-DD-YYYY。

所以这是我的 3 步问题：

1.  插入日期的最佳列类型是什么？（例如：INT、VARCHAR 等）

2.  最好使用的 INSERT INTO 命令是什么？（例如：NOW()、CURDATE() 等）

3.  当我查询表并在数组中检索此数据时，回显它的最佳方法是什么？

我是 PHP/MySQL 的新手，所以如果我不懂行话并且对这个主题的 1000 种不同意见感到非常沮丧，这些意见并没有具体解决我的问题，或者只涵盖了 3 个问题中的一个，请原谅我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:48:38.260

以下是我对您的三个问题的看法：

1.  使用正确的数据类型：[Date 或 DateTime](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)。我会选择 DateTime 类型，因为你也存储时间（如果你想有某种顺序，当你添加帖子时可能会非常方便）。

2.  这完全取决于您是只想要日期（使用[CURDATE()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)）还是日期 + 时间（使用[NOW()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_now)）。

3.  您获取数据并根据需要对其进行格式化。不要在查询中对其进行格式化，只需为其使用正确的 PHP 函数（例如使用[DateTime](http://php.net/manual/en/book.datetime.php)）。您如何获取数据并不重要；您可以使用[PDO](http://be2.php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)或...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:49:52.307

始终以 UTC 存储和处理日期和时间，并在表示层中执行时区调整 - 从长远来看，它大大简化了事情。

MySQL 提供了许多不同的类型来处理日期和时间，但您唯一需要担心的是`DATETIME`（该`DATE`类型不存储时间信息，这会在信息丢失时混淆时区转换，并且该`TIMESTAMP`类型执行自动 UTC转换（如果更改系统时区信息可能会弄乱程序）并且范围较小（1970-2038）。

该`CURDATE()`函数仅返回当前日期并排除时间信息，但是这会返回本地时区的信息，该时区可以更改。避免这种情况。该`NOW()`函数是一个改进，但同样返回当前时区的数据。

因为您希望将所有内容都保留在 UTC 中，所以您实际上会想要使用该`UTC_TIMESTAMP` [功能](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_unix-timestamp)。

要返回值，您需要使用变量按顺序执行 SQL 命令，如下所示：

```
SET @now = UTC_TIMESTAMP()
INSERT INTO myTable ( utcDateTimeCreatedOrSomething ) VALUES ( @now )
SELECT @now 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:52:16.420

Date 可能是最好的类型，尽管 datetime 也可以作为记录更准确。

没有“最佳插入”，但您真正想要什么以及您希望日期有多准确。对于博客，我会说它是日期时间并使用 NOW()。因此访问者可以非常准确地看到此帖子的发布时间。

当然，你可以很容易地找到运行 sql 并使用 google 的 php 从 sql 中获取选择查询，所以我将把这个简单的工作留给你自己。

要回显日期，您可以使用 php 日期格式，例如：

```
$today = date("m-d-y");                         // 03-10-01 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:56:41.830

我认为 Styxxy 做得很好，但这里是您的 PHP 日期格式化部分的链接...... [如何在 PHP 中最轻松地格式化日期时间？](https://stackoverflow.com/questions/1926542/how-to-format-datetime-most-easily-in-php) （支持链接：[http://php.net/manual/en/datetime.format.php](http://php.net/manual/en/datetime.format.php)）基本上是
回显日期（“d/m/Y”，strtotime（'2009-12-09 13:32:15'） ) ...虽然，我认为*strtotime*是不必要的，因为它应该已经具有日期时间的类型。

就 MySQL 而言，是的，将其作为 datetime col 执行，使用 NOW() 作为 SQL 关键字，并且根据您希望如何从数据库中获取它，您可以...

SELECT CAST( `col_name`AS DATE) .... 或 .... SELECT CAST( `col_name`AS DATETIME) <-- 由于 col 类型，最后一个是隐含的。

祝你好运！:)

# mysql - MySQL：使用 COALESCE 创建多个变量

> ID：12944527
> 
> 赞同：1
> 
> 时间：2012-10-17T22:42:30.973
> 
> 标签：mysql, coalesce

通过使用 COALESCE，我可以创建一个名为 comment_votes 的临时变量，如下所示：

```
SELECT comments.*, COALESCE(rs_reputations.value, 0) AS comment_votes FROM `comments` 
LEFT JOIN rs_reputations ON comments.id = rs_reputations.target_id AND 
rs_reputations.target_type = 'Comment' AND rs_reputations.reputation_name = 
'comment_votes' AND rs_reputations.active = 1 WHERE (impression_id = 1) 
```

我想在来的查询中创建第二个变量，称为impression_votes。我试图这样做：

```
SELECT comments.*, COALESCE(rs_reputations.value, 0) AS comment_votes 
FROM 'comments' 
    LEFT JOIN rs_reputations ON 
        comments.id = rs_reputations.target_id AND 
        rs_reputations.target_type = 'Comment' AND 
        rs_reputations.reputation_name = 'comment_votes' AND 
        rs_reputations.active = 1 
SELECT comments.*, COALESCE(rs_reputations.value, 0) AS impression_votes 
FROM 'comments' 
    LEFT JOIN rs_reputations ON 
    comments.id = rs_reputations.target_id AND
    rs_reputations.target_type = 'Comment' AND
    rs_reputations.reputation_name = 'impression_votes' AND 
    rs_reputations.active = 1 
WHERE 
```

这会导致错误：

```
You have an error in your SQL syntax 
```

我正在尝试的甚至可能吗？如果是这样，我似乎不正确地桥接了两个 SELECT/COALESCE 语句。我该怎么写这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:57:08.287

[MySQL COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)函数实际上是一个内置函数，它返回第一个非空值——它不是一个变量，它是一个实际上被各种数据库系统支持的函数。

例如，使用下表：

```
| Id    | Name      | Counter    |
| 1     | lolcat    | NULL       |
| 2     | codez     | 1          | 
```

sql语句：

```
SELECT Id, Name, COALESCE(counter, 0) AS NonNullCounter FROM table 
```

将返回结果：

```
| Id    | Name      | NonNullCounter |
| 1     | lolcat    | 0              |
| 2     | codez     | 1              | 
```

在这种情况下，NULL 值已被 0 替换。

这对您很有用，因为如果您在评论中的行的 rs_reputations 中还没有任何匹配的行，`LEFT JOIN`则将返回`NULL`column `rs_repuations.value`，然后将其替换为`0`by `COALESCE`。

如果您是 JOIN 新手，那么[Jeff Atwood 提供了一个很棒的视觉指南](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

您的第一个查询实际上是：

```
SELECT     comments.*, 
           COALESCE(rs_reputations.value, 0) AS comment_votes 
FROM       comments 
LEFT JOIN   rs_reputations ON comments.id = rs_reputations.target_id 
                           AND rs_reputations.reputation_name = 'comment_votes' 
WHERE       impression_id = 1; 
```

**选择 1 - 工会**

您有几个选择 - 您可以像这样将您的结果联合起来[：](http://dev.mysql.com/doc/refman/5.0/en/union.html)

```
SELECT     comments.*, 
           COALESCE(rs_reputations.value, 0) AS votes,
           'comment_votes' AS vote_type 
FROM       comments 
LEFT JOIN   rs_reputations ON comments.id = rs_reputations.target_id 
                           AND rs_reputations.reputation_name = 'comment_votes' 
WHERE       impression_id = 1

UNION

SELECT     comments.*, 
           COALESCE(rs_reputations.value, 0) AS votes,
           'impression_votes' as vote_type 
FROM       comments 
LEFT JOIN   rs_reputations ON comments.id = rs_reputations.target_id 
                           AND rs_reputations.reputation_name = 'impression_votes' 
WHERE       impression_id = 1; 
```

在这种情况下，您的结果将如下所示：

```
|comments_columns|votes|vote_type       |
| *              |12   |comment_vote    |
| *              |2    |impression_vote | 
```

**选择 2 - 加入同一张桌子两次**

[或者，您可以通过使用相同的表名但使用不同的别名来](https://stackoverflow.com/questions/8958610/join-to-same-table-several-times-in-a-single-query)两次自我加入同一个表：

```
SELECT     comments.*, 
           COALESCE(CommentRep.value, 0) AS comment_votes,
           COALESCE(ImpressionRep.value, 0) AS impression_votes,
FROM       comments 
LEFT JOIN   rs_reputations AS CommentRep ON comments.id = CommentRep.target_id 
                           AND CommentRep.reputation_name = 'comment_votes' 
LEFT JOIN   rs_reputations AS ImpressionRep ON comments.id = ImpressionRep.target_id 
                           AND ImpressionRep.reputation_name = 'impression_votes'
WHERE       CommentRep.impression_id = 1
AND         ImpressionRep.impression_id = 1 
```

在这种情况下，您的结果将如下所示：

```
|comments_columns|comment_votes|impression_votes|
| *              |12           |0               |
| *              |2            |6               | 
```

最后（呸）您在原始 SQL 中出现错误的原因是您将两个 SELECT 语句链接在一起而没有实际关联它们 - 在这种情况下 SQL 并没有真正意义，因为您需要在逻辑上关联它们（或者通过UNION 或按照上面的重复连接。

# objective-c - iOS：NSURLRequest 每次在不同的故事板上返回相同的页面

> ID：12944529
> 
> 赞同：0
> 
> 时间：2012-10-17T22:42:37.260
> 
> 标签：objective-c, uiwebview, ios6, xcode4.5

我有一个`UIWebView`在加载时添加到每个情节提要的类，但是当将我需要的页面传递给这个类时`ViewController`，它只显示来自第一个页面的文件，并且在每个不同的页面/viewController 上它都是相同的，即使我设置了每个都不同。

它是否以某种方式缓存此页面，如果是这样，我怎样才能`UIWebview`每次都清理干净？

我的 UIwebview 类 m 文件（ContentView.m）：

```
 - (id)initWithFrame:(CGRect)frame {
     self = [super initWithFrame:frame];
     if (self) {
         NSString *urlpath = [[NSBundle mainBundle] pathForResource:pageToDisplay ofType:@"html" inDirectory:@"pageContent"];
          NSURL *url=[[NSURL alloc] initFileURLWithPath:urlpath];
          NSURLRequest *request=[NSURLRequest requestWithURL:url];

          [self loadRequest:request];
       }
      return self;
  } 
```

我的父视图使用以下变量传递请求的页面`pageToDisplay`：

父视图 m 文件：

```
 #import "ContentView.h"

    - (void)viewDidLoad {
        ContentView *dispalyPageContent = [[ContentView alloc] init];
         [dispalyPageContent setPageToDisplay:@"THEpg1"];
         [self.view addSubview:dispalyPageContent];
          //-- 
         [super viewDidLoad];
    } 
```

对于每个其他父视图，代码是相同的`[displayPageContent setPageToDisplay:@"THEpg1"];`，但应该更改我想要的页面，例如下一个视图将是 [displayPageContent setPageToDisplay:@"THEpg2"];

是否可以清除它并每次加载新的请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:34:39.890

这是因为当你调用`ContentView *dispalyPageContent = [[ContentView alloc] init];`你的时`viewDidLoad`，你初始化它：

```
NSString *urlpath = [[NSBundle mainBundle] pathForResource:pageToDisplay ofType:@"html" inDirectory:@"pageContent"]; 
```

在 pathForResource:pageToDisplay 初始化的那一刻是一些垃圾。

然后，当你打电话时`[dispalyPageContent setPageToDisplay:@"smth"]`，它什么都没有改变，因为你的班级`ContentView`已经被一些垃圾初始化了`PageToDisplay`

（此外，您调用`[[ContentView alloc] init];`并且在您的代码中只有 类`initWithFrame:...`对象`ContentView`）

您可以通过以下方式解决此问题：1）在您的 ContentView.m

```
 - (id)initWithFrame:(CGRect)frame pageToDisp:(NSString *)pageToDisp {
     self = [super initWithFrame:frame];
     if (self) {
         NSString *urlpath = [[NSBundle mainBundle] pathForResource:pageToDisp ofType:@"html" inDirectory:@"pageContent"];
          NSURL *url=[[NSURL alloc] initFileURLWithPath:urlpath];
          NSURLRequest *request=[NSURLRequest requestWithURL:url];

          [self loadRequest:request];
       }
      return self;
  } 
```

2) 在您的 ContentView.h 中：

```
- (id)initWithFrame:(CGRect)frame pageToDisp:(NSString *)pageToDisp 
```

3) 然后，在 viewDidLoad 中：

```
- (void)viewDidLoad {
        ContentView *dispalyPageContent = [[ContentView alloc] initWithFrame:someFrame pageToDisp:@"THEpg1"];

         [self.view addSubview:dispalyPageContent];
          //-- 
         [super viewDidLoad];
    } 
```

# php - PHP中的表单问题

> ID：12944530
> 
> 赞同：2
> 
> 时间：2012-10-17T22:43:04.237
> 
> 标签：php, html, forms, post, input

> **可能重复：**
> [表单提交时 php $_POST 数组为空](https://stackoverflow.com/questions/1282909/php-post-array-empty-upon-form-submission)

我正在尝试填写表格，然后将数据显示在另一页上。第一个文件是这个

```
<html>
<head>
</head>
<body>
<form action="testerpage.php" method="post">
Name: <input type="text" name="testname">
<input type="submit">
</form>
</body>
</html> 
```

另一个页面（testerpage.php）是这个

```
<html>
<body>
<?php 
echo $_POST["testname"];
?>
</body>
</html> 
```

为什么testerpage不显示第一页的信息（名为welcome.php）？它也不适用于“get”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:08:28.520

鉴于您的 HTML 输出中有未触及的 PHP 代码，事实证明 PHP 在您的服务器上被禁用，因此根本不会执行 PHP 代码。有关在服务器上启用 PHP 的信息，请咨询您的托管服务提供商技术支持。

# python - 关于从网页获取信息的创建应用程序的建议

> ID：12944532
> 
> 赞同：0
> 
> 时间：2012-10-17T22:43:26.383
> 
> 标签：python, browser

首先想说的是我对python和一些web库如mechanize、beautiful soup、urllib2有经验。

这个想法是创建一个应用程序，该应用程序将从网页中获取信息，我目前在 webbrowser 中查看。而不是存储它。

例如：我手动去网站，创建一个用户。比运行我的应用程序，它会从我目前正在查看的网页中获取一些详细信息。如用户名、名字、姓氏等。

问题：我不知道如何让程序在我的网络浏览器上运行。我不能简单地做一个 scipt 来登录这个网页，然后用 Beautiful Soup 做剩下的事情，因为它对网络爬虫和网络机器人有很好的保护。

需要一些地方开始。所以主要问题是是否有可能获取当前在我的网络浏览器上的信息？如果是，希望听到一些关于如何让我的程序查看浏览器的建议？

如果您不明白我在问什么，或者您有一些建议，一些我可以使用的库，请随意填写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:48:48.273

最简单的做法可能是将当前页面的 HTML 内容保存到文件中（使用文件 -> 将页面另存为或浏览器中的任何内容），然后在该文件上运行 Beautiful Soup / lxml.html / 任何内容。

您可能还可以让[Selenium](http://seleniumhq.org/)做您想做的事，尽管我从未使用过它并且不确定。

# oop - 'is instanceof' 界面设计不佳

> ID：12944533
> 
> 赞同：0
> 
> 时间：2012-10-17T22:43:29.787
> 
> 标签：oop, design-patterns

假设我有一个 A 类

```
class A
{
   Z source;
} 
```

现在，上下文告诉我“Z”可以是不同类（例如 B 和 C）的实例，它们在继承树中不共享任何公共类。

我猜天真的方法是让“Z”成为一个接口类，并让 B 类和 C 类实现它。

但是有些东西仍然不能说服我，因为每次使用 A 类的实例时，我都需要知道“源”的类型。所以所有都在多个“ifs”中完成，使得“is instanceof”听起来不太好。也许将来其他一些类实现 Z，并且硬编码这种类型的“ifs”肯定会破坏某些东西。

问题的根源是我无法通过向 Z 添加函数来解决问题，因为在 Z 的每个实例类型中所做的工作都是不同的。

我希望有人能给我和建议，也许是一些有用的设计模式。

谢谢

编辑：当获得某个 A 的实例时，“某人”在某个地方所做的工作完全不同，具体取决于接口 Z 后面的类。这就是问题所在，做“重要工作”的实体不是 Z，而是其他人想知道Z是谁。

Edit2：也许一个具体的例子会有所帮助：

```
class Picture
{
  Artist a;
}

interface Artist
{
}

class Human : Artist { }

class Robot : Artist {} 
```

现在某处我有一个实例`Picture`，

```
Picture p = getPicture();
// Now is the moment that depending if the type of `p.a` different jobs are done
// it doesn't matter any data or logic inside Human or Robot 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T22:50:41.017

使用接口的目的是隐藏这些不同的实现；`A`应该只知道方法的意图或高级目的。

每个实现完成的工作`Z`可能不同，但用于调用该工作的方法签名可以相同。类`A`可以只调用 method `Z.foo()`，根据 Z 的实现是`B`or `C`，会执行不同的代码。

唯一需要知道真正实现类型的时候是当你需要对两种不同的类型进行完全不相关的处理，并且它们不共享一个接口时。但是在那种情况下，为什么它们会被同一个 A 类处理呢？现在，在*某些*情况下这可能是有意义的，例如何时`B`和`C`是从 XML 模式生成的类，您无法修改它们 - 但通常它表明设计可以改进。

**现在更新**，您已添加图片示例。我认为这证实了我的观点——虽然实现`getPicture()`方式不同，但*目的*和*返回类型*是相同的。在这两种情况下，艺术家都会返回一张图片。

如果调用者想以相同的方式处理机器人创建和人类创建的图片，那么他们使用 Artist 接口。他们不需要区分人类或机器人，因为他们只想要一张图片！图片是如何创建的细节属于子类，调用者应该看不到这些细节。如果调用者关心的是*如何*精确地创建图片，那么调用者应该绘制它，而不是机器人或人类，并且设计会完全不同。

如果您的子类正在执行*完全*不相关的任务（这不是您的 Artist 示例所显示的！），那么您可能会使用非常模糊的接口，例如标准 Java [Runnable](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)；在这种情况下，调用者真的不知道该`run()`方法会做什么——它只知道如何运行`Runnable`.

**链接**

以下问题/文章提出了一些替代方案`instanceof`：

*   [在 Java 中避免使用 instanceof](https://stackoverflow.com/questions/2790144/avoiding-instanceof-in-java)
*   [在这种情况下替代 instanceof 方法](https://stackoverflow.com/questions/5064802/alternative-to-instanceof-approach-in-this-case)

以下文章还提供了示例代码，使用的示例与您的示例相似：

*   [http://www.javapractices.com/topic/TopicAction.do?Id=31](http://www.javapractices.com/topic/TopicAction.do?Id=31)

以下文章讨论了`instanceof`与其他方法（例如访问者模式和非循环访问者）的权衡：

*   [https://sites.google.com/site/steveyegge2/when-polymorphism-fails](https://sites.google.com/site/steveyegge2/when-polymorphism-fails)
*   [http://butunclebob.com/ArticleS.UncleBob.VisitorVersusInstanceOf](http://butunclebob.com/ArticleS.UncleBob.VisitorVersusInstanceOf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:51:15.683

我认为您需要发布更多信息，因为就目前而言，我所看到的是对 OOP 原则的误解。如果您使用通用接口类型，则根据 Liskov 替换原则，源是哪种类型无关紧要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T22:52:14.690

我将把你的 A、B 和 C 类称为 Alpha、Beta 和 Gamma。

也许 Alpha 可以分为两个版本，一个使用 Beta，一个使用 Gamma。这将避免`instanceof`Alpha 中的检查，正如您所推测的那样，这确实是一种代码味道。

```
abstract class Alpha
{
    abstract void useSource();
}

class BetaAlpha extends Alpha
{
    Beta source;
    void useSource() { source.doSomeBetaThing(); }
}

class GammaAlpha extends Alpha
{
    Gamma source;
    void useSource() { source.doSomeGammaThing(); }
} 
```

事实上，这种情况非常普遍。考虑一个可以使用文件或套接字的 Stream 类的更具体示例。并且出于示例的目的，File 和 Socket 不是从任何公共基类派生的。事实上，它们甚至可能不在我们的控制之下，所以我们无法改变它们。

```
abstract class Stream
{
    abstract void open();
    abstract void close();
}

class FileStream extends Stream
{
    File file;
    void open()  { file.open();  }
    void close() { file.close(); }
}

class SocketStream extends Stream
{
    Socket socket;
    void open()  { socket.connect();    }
    void close() { socket.disconnect(); }
} 
```

# asp.net - 需要为 IIS7.5 上的文件夹而不是其内容生成 404

> ID：12944536
> 
> 赞同：2
> 
> 时间：2012-10-17T22:44:27.560
> 
> 标签：asp.net, iis, iis-7, iis-7.5

1.  我希望能够隐藏我的 DotNet 2.0 网站中存在的文件夹，该网站通过 IIS 7.5 托管，其中包含必须继续可访问的文件。例如，我希望一个人的网络浏览器能够检索文件 domain.com/css/style.css （这是呈现页面所必需的），但如果该人试图访问 URL domain.com/css/ 或domain.com/css 我希望他们收到 404 错误。（不是 403 错误）

2.  默认情况下，IIS 7.5 会给出一个 403 错误，这仍然会让攻击者知道该文件夹的存在。*我意识到攻击者可以通过在浏览器中访问该站点并看到文件从“css”文件夹中提取出来，从而轻松发现“css”文件夹的存在。也就是说，这是我必须遵守的项目要求。*

3.  在 IIS6 中，我曾经能够为文件夹设置隐藏属性，这会给我想要的 404 行为，但在 IIS7.5 中不再是这种情况。（如果我尝试这样做，IIS 7.5 会给出 500 错误）*IIS 7.5 是该项目的另一个要求。*此外，在 IIS6 中，我希望能够创建一个通配符映射，该映射将导致所有请求通过 DotNet 路由，然后允许我创建一个 404，但同样，这似乎不适用于 IIS7.5。

4.  我已经尝试在 web.config （节点）中创建处理程序，该处理程序适用于我的登台系统，但不适用于我的生产系统。此外，这种方法似乎有点矫枉过正，因为我必须创建 ac# 处理程序并在 web.config 中为我要隐藏的每个文件夹都有一个处理程序条目。我想要一个更简单的解决方案，但该解决方案似乎不适用于我的生产系统。

5.  理想情况下，对不包含尾部正斜杠的文件夹的请求不应导致 301 重定向，但也应导致 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:48:21.587

您始终可以将处理程序/ASPX 页面作为目录的默认页面，并让该处理程序返回 404 错误代码。

# aptana3 - PHP - 127.0.0.1 不工作，但 localhost 可以

> ID：12944537
> 
> 赞同：1
> 
> 时间：2012-10-17T22:44:28.243
> 
> 标签：aptana3

我正在使用带有 XAMPP 的 Aptana 3.22。当我运行 PHP 文件时，url 显示为`http://127.0.0.1:8020/somefile.php`，并且 PHP 代码只是在浏览器中列出。但是，如果我`127.0.0.1:8020`用`localhost`它替换一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:56:05.613

转到运行配置选择 Web 浏览器，然后选择要使用的浏览器。然后在主选项卡中找到使用基本 URL 并单击它。输入`http://localhost/`并确保检查附加项目名称。

确保您的索引页面的名称是 index.php 并尝试运行它。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:48:57.427

我认为模糊能够得到一个好的答案，因为有太多的变量可能会影响它，我冒险猜测 localhost 并没有真正指向 localhost:8020 而只是 localhost:80 （标准），因此您可能会看到不同的网站。

# jquery - 自定义 jQuery 方法创建

> ID：12944544
> 
> 赞同：1
> 
> 时间：2012-10-17T22:45:30.910
> 
> 标签：jquery, methods, scope, this

我想创建一个可以在 jQuery 对象上运行的函数或方法。见[jsfiddle](http://jsfiddle.net/z8k22/)。

```
$(function() {

    $("#myElem").click(function(){ 
        $(this).myMethod("red");       
    });

    var myMethod = function(myParam){
        var buttonBorder = "2px solid " + myParam;
        $(this).css("border", buttonBorder);
    };

}); 
```

第一个问题是该方法没有按我的预期工作。我收到此错误：

```
Uncaught TypeError: Object [object Object] has no method 'myMethod' 
```

第二个问题（可能是由第一个问题引起的？）是`$(this)`in`myMethod`与`$(this)`事件处理程序中的不同。该方法有没有办法在不显式将其作为参数传递的情况下获取对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:49:23.550

如果要创建插件，则必须将其添加到`jQuery.fn`：

```
$.fn.myMethod = function(myParam){
    var buttonBorder = "2px solid " + myParam;
    $(this).css("border", buttonBorder);
}; 
```

现在您可以按照您想要的方式调用它，并且`this`还将引用正确的上下文。请参阅[更新的小提琴](http://jsfiddle.net/z8k22/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:54:53.973

如果你想坚持使用函数，你可以分配多个参数：

## [小提琴](http://jsfiddle.net/Pu3Ds/1/)

*   想要的元素
*   使用的颜色

```
 function myMethod(el, color){
    $(el).on('click',function(){
        this.css("border", "2px solid " + color);
    });
 }   

 myMethod("#myElem", "red"); 
```

但我建议你创建一个**插件。**

**[插件版本](http://jsfiddle.net/Pu3Ds/3/)**

```
(function( $ ) {
  $.fn.myMethod = function( arg ) {
      this.on('click',function(){
          $(this).css({border:'2px solid '+ arg });
      });
  };
})( jQuery );

$("#myElem").myMethod('blue'); 
```

**[或者如果您愿意，可以这样：](http://jsfiddle.net/Pu3Ds/5/)**

```
(function( $ ) {
    $.fn.myMethod = function( arg ) {
          this.css({border:'2px solid '+ arg });
    };
})( jQuery );

$("#myElem").on('click',function(){
    $(this).myMethod('blue');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:56:05.637

## 你 $.fn 什么？

您不能像这样将某些东西修补到 jQuery 中，您需要使用 fn 方法，此处详细介绍：

[http://docs.jquery.com/Plugins/Authoring](http://docs.jquery.com/Plugins/Authoring)

# php - Opencart 定位特定 product_id

> ID：12944549
> 
> 赞同：0
> 
> 时间：2012-10-17T22:45:47.617
> 
> 标签：php, opencart

我正在尝试在主页上显示特定产品（ID 为 51）的价格。它不是特色产品，而是完全不同的东西，所以我不能使用特色模块。

我知道产品 ID 是 51，所以尝试使用以下内容：

```
<?php if (!$product[$product_id[51]]['special']) { ?>
    <?php echo $product[$product_id[51]]['price']; ?>
<?php } else { ?>
    <span class="price-old"><?php echo $product_id[51]['price']; ?></span> <span class="price-new"><?php echo $product_id[51]['special']; ?></span>
<?php } ?> 
```

但这只会返回“未定义的变量 product_id”。如何显示此特定产品的价格？

MTIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:24:16.827

您可以使用完整的产品

```
$product = $this->model_catalog_product->getProduct(51); 
```

不要忘记在使用货币值时，您应该使用适当的格式设置它们

```
$this->currency->format() 
```

要了解您需要使用哪些代码，请查看`catalog/controller/product/product.php`for the`special`和`price`coding

# php - CakePHP 模型关联 HasMany - 保存错误

> ID：12944556
> 
> 赞同：1
> 
> 时间：2012-10-17T22:46:11.800
> 
> 标签：php, cakephp, has-many, cakephp-model

我有一个名为 Game 的模型，它与 Planet 模型具有 hasMany 关系（而该模型又定义回 Game 模型的 belongsTo ）。

在创建我的第一个游戏记录时，我使用它的starting_num_planets 字段的值来尝试创建那么多关联的行星记录。GamesController 通过调用 PlanetsController 中的一个函数来执行此操作，每次调用该函数时，都会返回一个与 Planet 模型匹配的数组，并且应该是可保存的，这是 GamesController 尝试做的下一件事。

游戏记录创建得很好，但在我试图访问第二个控制器的功能时，我*显然得到了一个无效的 SQL 语法错误。*这很奇怪，因为我直到几行之后才尝试保存。

以下是 GamesController 的代码：

```
public function newgame() {
        if ($this->request->is('post')) {
            $this->Game->create();
            if ($this->Game->save($this->request->data)) {
                // Add the 'id' element to the Game array and put the whole game record on the session
                $this->request->data['Game']['id'] = $this->Game->getLastInsertID();
                $this->Session->write('Game', $this->request->data);

                // Create the number of planet records indicated by start_num_planets
                $count = 0;
                $planets = array();
                while ($count < $this->request->data['Game']['starting_num_planets']) {
                    $planetData = $this->Game->Planet->generate_planet_data($this->request->data['Game']['id']);
                    $planets[$count] = $planetData;
                    $this->Game->Planet->create();
                    $this->Game->Planet->save($planetData);
                    $count++;
                }

                $this->redirect(array('action' => 'main'));
            } else {
              $this->Session->setFlash('There was a problem creating the game.');
            }
        }
    } 
```

在此行的行号处：

$planetData = $this->Game->Planet->generate_planet_data($this->request->data['Game']['id']);

我正进入（状态：

```
Error: SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'generate_planet_data' at line 1

SQL Query: generate_planet_data 
```

我不知道为什么，我很害怕。

这是在 PlanetsController 中调用的函数：

```
public function generate_planet_data($gameId) {
    $planetNames = array(1 => 'name1', 2 => 'name2', 3 => 'name3', 4 => 'name4');
    $planetImages = array(1 => '01', 2 => '02', 3 => '03', 4 => '04');
    $planetData = array();
    // game_id is the foreign key, do I have to explicitly state that in the model?
    $planetData['Planet']['game_id'] = $gameId;
    $planetData['Planet']['planet_name'] = $planetNames[rand(1,10)];
    $planetData['Planet']['planet_image_file'] = $planetImages[rand(1,4)];
    return $planetData;
} 
```

Game.php 中的模型关联很简单：

```
var $hasMany = array(
    'Planet' => array(
        'className' => 'Planet'),
    'Player' => array(
        'className' => 'Player'
    )
); 
```

谁能告诉我出了什么问题？这是我第一次尝试使用关联模型，结果有点不对劲！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:11:34.560

问题是你在这里调用了一个缺失的函数：

```
$planetData = $this->Game->Planet->generate_planet_data($this->request->data['Game']['id']); 
```

如您所说`generate_planet_data`，在控制器上。所以你应该这样称呼它：

```
$planetData = $this->generate_planet_data($this->request->data['Game']['id']); 
```

如评论中所述，此逻辑可能属于 Planet 模型。如果你把它移到那里，你就可以通过你原来的方式访问它。

# java - 向 Play Framework 应用程序添加和访问资源文件

> ID：12944557
> 
> 赞同：0
> 
> 时间：2012-10-17T22:46:16.123
> 
> 标签：java, playframework, cloud-foundry

我正在运行一个 PlayFramework 2 应用程序。该应用程序建立一个客户端认证的 SSL 会话到第二台服务器。为此，我将 Java Keystore 文件存储在资源目录中。在我的本地盒子上一切正常。接下来，我创建了一个用于上传到 Cloud Foundry 的 dist 包，它本质上是用一堆 Jars 构建一个 war 文件。知道如何在将其编译成 Jar 并上传到 CloudFoundry 后从我的 java 代码中访问密钥库吗？任何方向将不胜感激。这是当前的代码片段。

最好的，

SR

```
//READS THE JAVA KEYSTORE FILE FROM A RELATIVE LOCATION
File clientKS = new File("resource/devportal.jks");

//SET CONNECTION PARAMS             
con.setRequestMethod("POST");
con.setRequestProperty("Content-Type","application/json");
con.setDoOutput(true);
con.setSSLSocketFactory(getFactory(clientKS, passphrase.toCharArray())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:16:11.497

假设除了使用 java.io.File 之外别无他法，您可能想尝试通过将其放在应用程序的类路径中来获取它并执行类似的操作

```
AnyClassOfYourApp.class.getResource("devportal.jks").getFile() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:24:13.547

已经有一段时间了，但试试这个：

```
 //TESTING BY USING INCLUDED KEYSTORE IN JAR FILE
    String ksPath = "/res/devportal.jks";
    URL jksURL = PostNvp.class.getResource(ksPath);
    File jksStore = new File(jksURL.toURI());
    //TESTING 
```

PostNvp 是我的 java 类 PostNvp.java 所在的代码片段。

# java - 如何将 BigDecimal 乘以 Java 中的整数

> ID：12944559
> 
> 赞同：66
> 
> 时间：2012-10-17T22:46:27.430
> 
> 标签：java, bigdecimal

Java 中如何将 BigDecimal 乘以整数？我试过这个，但它不正确。

```
import java.math.BigDecimal;
import java.math.MathContext;

public class Payment {
    int itemCost;
    int totalCost = 0;

    public BigDecimal calculateCost(int itemQuantity,BigDecimal itemPrice){
        itemCost = itemPrice.multiply(itemQuantity);
        totalCost = totalCost + itemCost;
    return totalCost;
   } 
```

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-10-17T22:53:00.777

您的代码中有很多*类型不匹配*，例如尝试将`int`值放在`BigDecimal`需要的位置。您的代码的更正版本：

```
public class Payment
{
    BigDecimal itemCost  = BigDecimal.ZERO;
    BigDecimal totalCost = BigDecimal.ZERO;

    public BigDecimal calculateCost(int itemQuantity, BigDecimal itemPrice)
    {
        itemCost  = itemPrice.multiply(BigDecimal.valueOf(itemQuantity));
        totalCost = totalCost.add(itemCost);
        return totalCost;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T23:19:39.587

如果我是你，我会设置 BigDecimal 的比例，这样我就不会得到冗长的数字。下面 BigDecimal 初始化中的整数 2 设置比例。

由于您的数据类型有很多不匹配，因此我对其进行了相应的更改以进行调整。

```
class Payment   
{
      BigDecimal itemCost=new BigDecimal(BigInteger.ZERO,  2);
      BigDecimal totalCost=new BigDecimal(BigInteger.ZERO,  2);

     public BigDecimal calculateCost(int itemQuantity,BigDecimal itemPrice)
       { 
           BigDecimal   itemCost = itemPrice.multiply(new BigDecimal(itemQuantity)); 
             return totalCost.add(itemCost); 
       }
  } 
```

BigDecimals 是 Object ，而不是原语，因此请确保初始化`itemCost`and `totalCost`，否则它会在您尝试添加时为您提供空指针`totalCost`or`itemCost`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T22:52:09.013

首先，`BigDecimal.multiply()`返回 a`BigDecimal`并且您尝试将其存储在`int`.

其次，它*以*another`BigDecimal`作为参数，而不是`int`.

如果您只使用`BigDecimal`这些计算中涉及的所有变量，它应该可以正常工作。

# jquery - 同位素：选择过滤器时显示更多过滤器

> ID：12944562
> 
> 赞同：0
> 
> 时间：2012-10-17T22:46:39.640
> 
> 标签：jquery, html, jquery-isotope

我试图通过隐藏过滤器直到选择某些内容来使我的同位素过滤器列表更加用户友好。

这是一个 JSFiddle：http: [//jsfiddle.net/LxNXM/](http://jsfiddle.net/LxNXM/)

我无法让同位素在 JSFIddle 中工作，但希望我仍然可以获得所需的帮助。

在小提琴中，有一条粗绿线。该行下方是我希望隐藏的过滤器选项，除非选择“身体部位”。

因此，如果绿线下方的过滤器被隐藏，并且用户在 Body Part 下选择“胸部”，“胸部”过滤器将淡入，然后用户可以选择上、中或下。

我在 Isotope 文档中没有看到这一点，我怎么能这样做？

让它像这样工作：

1.  在每个身体部位焦点过滤器列表周围添加了一个 ID，例如：#chestfocus
2.  为身体部位过滤器列表中的每个锚点添加了一个 id，例如：#chestclick

这是隐藏和显示内容的javascript：

```
$(document).ready(function() {

//Hiding Focus Areas
    $('#chestfocus, #backfocus, #shouldersfocus, #legsfocus, #armsfocus').hide();

//Display Chest Focus List
    $("#chestclick").click(function() {
        $("#backfocus, #shouldersfocus, #legsfocus, #armsfocus").fadeOut("300", function(){
            $("#chestfocus").fadeIn("500");
        });
    });

//Display Back Focus List
    $("#backclick").click(function() {
        $("#chestocus, #shouldersfocus, #legsfocus, #armsfocus").fadeOut("300", function(){
            $("#backfocus").fadeIn("500");
        });
    });

//Display Shoulder Focus List
    $("#shouldersclick").click(function() {
        $("#backfocus, #chestfocus, #legsfocus, #armsfocus").fadeOut("300", function(){
            $("#shouldersfocus").fadeIn("500");
        });
    });

//Display Legs Focus List
    $("#legsclick").click(function() {
        $("#backfocus, #shouldersfocus, #chestfocus, #armsfocus").fadeOut("300", function(){
            $("#legsfocus").fadeIn("500");
        });
    });

//Display Arms Focus List
    $("#armsclick").click(function() {
        $("#backfocus, #shouldersfocus, #legsfocus, #chestfocus").fadeOut("300", function(){
            $("#armsfocus").fadeIn("500");
        });
    });
}); 
```

切换前有点闪烁列表，有没有办法让过渡更顺畅一些？

# mysql - 如何自定义 MySql 连接器/网络？

> ID：12944570
> 
> 赞同：2
> 
> 时间：2012-10-17T22:47:21.597
> 
> 标签：mysql, asp.net-mvc-3, mysql-connector

MySql 连接器/网络无法正常工作。处理 bug 的团队只有 3 个人，他们不解决复杂的问题。自 2009 年以来仍有未解决的问题。我想自定义他们的连接器，以便它适用于我的复杂情况。如何在我的项目中使用自定义版本而不是他们的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:03:42.020

**步骤 1) 下载**

为了自定义 oracle 的 mysql 连接器/网络版本，您必须在此处下载源代码：http: [//dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

**步骤 2) 打开**

接下来，您将不得不解压缩下载的源文件。连接器的核心将在两个项目中，`MySql.Data`以及`MySql.Data.Entity`（[什么是 mysql 提供程序？](https://stackoverflow.com/q/12886068/1026459)）。

**步骤 3) 编辑连接器**

对您希望的类进行任何编辑，以解决您的复杂情况。

**步骤 4) 删除签名**

此步骤将使重新分发您的编辑变得不受欢迎，您可以签名并根据需要进行更改，但对于本地部署，这是不必要的。

*   里面`MySql.Data.Entity`的`AssemblyInfo.cs`注释掉这一行：

    ```
    //[assembly: AssemblyKeyName("ConnectorNet")] 
    ```

    *   在`MySql.Data`'内部`AssemblyInfo.cs`进行以下更改：

    ```
    //[assembly: AssemblyKeyName("ConnectorNet")]
    [assembly: InternalsVisibleTo("MySql.Data.Entity")] 
    ```

    **步骤 5) 按顺序编译和构建**

    `MySql.Data` *先*建。建成后，打开`MySql.Data.Entity`. 将出现无法找到的警告`MySql.Data`。添加对文件夹`MySql.Data`内部新建的引用。`bin/Debug`构建`MySql.Data.Entity`为`Release`.

    **步骤 6) 移动文件**

    `bin/Release`的文件夹里面`MySql.Data.Entity`应该是`MySql.Data`和`MySql.Data.Entity`。取每个并覆盖项目`package`文件夹中的对应项。

    **步骤 7) 更新项目中的引用**

    在您的项目内部，转到参考区域。删除`MySql.Data`和`MySql.Data.Entity`。右键单击`References`，单击`Add Reference`，选择`Browse`选项卡，导航到包文件夹，然后将两者都添加`MySql.Data`到`MySql.Data.Entity`您在步骤 6 中放置的位置。

    **步骤 8) 修改`web.config`**

    将多次提及`MySql.Data`inside of `web.config`。它们中的每一个都将具有`PublicKeyToken=c5687fc88969c44d`必须删除的（从所有这些中删除）。

    **步骤 9) 做到这一点**

    享受您的定制连接器！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-08T07:15:47.743

现在有一个社区开发的用于 MySQL 的开源 .NET 连接库：[https](https://github.com/mysql-net/MySqlConnector) ://github.com/mysql-net/MySqlConnector 。

它提供了真正的异步 I/O（用于高可扩展性）并[修复了](https://mysqlconnector.net/tutorials/migrating-from-connector-net/#bugs-present-in-connector-net-that-are-fixed-in-mysqlconnector)Oracle 的 Connector/NET 中的许多错误。

# c# - 诊断 Zaber 设备的通信问题

> ID：12944575
> 
> 赞同：0
> 
> 时间：2012-10-17T22:47:57.803
> 
> 标签：c#, labview, zaber

当我编写软件来控制 Zaber 设备时，我有时会遇到我不理解的奇怪行为。通常它是由我的脚本或其他软件中的错误引起的，有时是硬件问题，例如串口连接松动。

如何准确查看我的软件发送的命令以及设备的响应方式？我想要一种可以搜索的日志文件，以查看导致错误的原因。

大多数情况下，我使用 C# 在 Zaber 控制台中编写脚本，但我也使用 Zaber 仪器驱动程序编写 LabVIEW VI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:47:57.803

有几种技术可以查看从 Zaber 设备发送和接收的原始数据。有些仅限于某些操作系统，有些仅适用于某些软件。大多数选项都涉及查看原始数据，因此请查看用户手册以获取有关[消息格式](http://zaber.com/wiki/T-Series/RS-232_Communications_Protocol/motion_products)和[命令编号](http://zaber.com/wiki/T-Series/Compilation/All_Commands)列表的详细信息。

下面，我将尝试列出一些选项并告诉您它们何时可用。

# Zaber 控制台日志窗口

*仅在 Zaber 控制台中，仅在 Windows 上。*

如果您使用的是 Zaber 控制台脚本或插件，这是最简单的技术。右上角的窗口会为您记录所有请求和响应。如果您在问题发生前清除窗口，然后立即停止脚本，您可能会发现更容易追踪问题。一个缺点是没有显示一些损坏的消息，您只会看到部分数据包超时错误。如果您想要的消息从顶部滚动出来，请在高级选项卡上更改日志大小。

# 波特蒙

*仅在 32 位 Windows 上。*

[Portmon](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx)是一个很棒的工具，我很遗憾它从未升级到 64 位 Windows。如果您仍在运行 32 位版本的 Windows，那么值得一试。我发现最新版本 3.03 对我不起作用，但 3.02 仍然适用。如果[正式版](http://technet.microsoft.com/en-us/sysinternals/bb896644.aspx)不行，那么搜索[“portmon 3.02”](https://www.google.ca/search?q=portmon%203.02)通常会找到一些带有旧版本的网站。

*   在 3.02 版中，打开计算机菜单并选择连接本地。
*   从 Capture 菜单中，选择 Ports: COM1 或您要连接的任何串行端口。确保您的软件当前已关闭，否则 Portmon 将无法连接到串行端口。有时在使用 Portmon 后，您必须重新启动计算机以使其释放串行端口。
*   从 Edit 菜单中，选择 Filter/Highlight... 并将 Include 设置为`IRP_MJ_READ;IRP_MJ_WRITE`
*   在选项菜单上，启用显示十六进制和时钟时间。
*   尝试从您的软件发送一些命令，然后查看 Portmon 窗口。扩大“其他”列后，您应该会看到类似的内容。

![波特蒙截图](../Images/a8faf5bcb5bb30d29db7c07c63aadc0f.png)

在屏幕截图中，您可以看到正在发送的两个命令（每个命令 1 个 6 字节的块）和返回的两个响应（每个响应 6 个 1 字节的块）。请记住，显示器使用的是十六进制数字，因此第一个命令是十六进制 14 或十进制 20（绝对移动）。

# HHD 串行监视器

我为 Portmon 找到的最佳替代品是[HHD Serial Monitor](http://www.hhdsoftware.com/Downloads/serial-monitor)。它不是免费的，但有试用期，而且许可证非常便宜。我认为它可能比 Portmon 更强大，但它并不容易使用。

以下是我发现对记录 Zaber 设备命令有用的设置。安装并启动 Device Monitoring Studio 后，我在端口列表中单击要监视的串行端口。这将打开一个可用视图列表，然后我双击请求视图。在右侧，我单击“开始”按钮。这将打开请求视图，然后单击“完成”选项卡。

现在，当我向设备发送一些命令时，我看到了数据的十六进制和文本显示的读写请求。这是上面的 Portmon 屏幕截图的等价物。

![HHD 串行监视器屏幕截图](../Images/198e679196e6be4e74b3814c174ff1fd.png)

同样，第一个命令是 14 十六进制或 20 十进制（绝对移动）。

# NI Spy 或 NI I/O 跟踪

*可用于 LabVIEW*

这个选项不那么容易阅读，但它带有 LabVIEW，您可以阅读有关如何启动它[的文档。](http://digital.ni.com/public.nsf/allkb/282C5D41E2BA04F2862574BA007803B9)这是 NI Spy 工具的屏幕截图。我认为它带有旧版本的LabVIEW。

![NI Spy 截图](../Images/0a9f5a732a41d75bbcbe4e0987fc70cb.png)

# ruby-on-rails - ubuntu上的spork LoadError

> ID：12944578
> 
> 赞同：0
> 
> 时间：2012-10-17T22:48:07.397
> 
> 标签：ruby-on-rails, spork

这是完整的错误。关于如何解决这个问题的任何想法。我在谷歌上一无所获。我在 VirtualBox 上运行 Ubuntu Linux。

```
Using RSpec, Unknown
cannot load such file -- magazine/magazine_slave (LoadError)
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/lib/spork/run_strategy/magazine.rb:18:in `<top (required)>'
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/lib/spork/run_strategy.rb:48:in `block in <top (required)>'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/lib/spork/run_strategy.rb:48:in `each'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/lib/spork/run_strategy.rb:48:in `<top (required)>'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/lib/spork/runner.rb:73:in `run'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/lib/spork/runner.rb:10:in `run'
/var/lib/gems/1.9.1/gems/spork-1.0.0rc3/bin/spork:10:in `<top (required)>'
/usr/local/bin/spork:19:in `load'
/usr/local/bin/spork:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T15:19:29.060

我的ubuntu系统也有同样的问题。问题在于 gems 文件权限，除了所有者之外，它们对用户不可读。要解决此问题，请将文件的权限更改为 0644 或 a+r，如下所示：

```
$ chmod -v 644 files/myfile.txt
mode  of  `files/myfile.txt'  changed  to  0644  (rw-r--r--) 
```

您可以使用**sudo**来获得许可。更多操作请访问 [http://help.unc.edu/help/how-to-use-unix-and-linux-file-permissions/](http://help.unc.edu/help/how-to-use-unix-and-linux-file-permissions/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T07:38:49.717

上次我编辑上面的答案，但我仍然无法解决问题。

然后我做了一些搜索，最后我解决了它。

根据解决方案，似乎已安装的 gem 没有为可执行文件提供足够的权限。

我用这个：`gem 'spork-rails', github: 'sporkrb/spork-rails'`

解决方案：[github 上的要点](https://gist.github.com/zunda/5328483)

# asp.net-mvc - 使用自定义方法模拟 MembershipProvider

> ID：12944583
> 
> 赞同：1
> 
> 时间：2012-10-17T22:48:34.107
> 
> 标签：asp.net-mvc, mocking, asp.net-membership

我有一个正在开发的 ASP.NET MVC 应用程序。我正在使用自定义 MembershipProvider (MyCustomMembershipProvider) 来访问会员信息，因为我们已经有一个数据库，其中包含我需要使用的自己的架构。

我正在使用类似于 NerdDinner 2 示例的类，其中我有一个包含 MembershipProvider 的 AccountMembershipService（实现 IMembershipService），因此我可以注入不同的模拟提供程序。但是，我使用 CreateUser 和 ChangePassword 的几种不同方法扩展了 MyCustomMembershipProvider。这些方法在 MembershipProvider 中不可用，除非您知道它是自定义方法。

我做错了吗？我是否需要另一层作为包含我的新提供程序方法的接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:29:58.103

我不完全确定我理解你的问题是什么。如果您在 MembershipProvider 上使用包装器接口，那么提供者实现的方法无关紧要，因为您的应用程序仅使用该接口，您可以将接口更改为您想要的任何内容。

或者您是在问如何从您的自定义提供程序调用您的自定义方法？如果是这样，那么关于嘲笑的全部内容只是红鲱鱼，因为它与问题无关。

如果这确实是您的问题，那么您只需将 Membership.Provider 方法转换为您的提供者的类型。像这样的东西：

```
var myProvider = Membership.Provider as MyCustomerMembershipProvider;
myProvider.CreateUser(...); 
```

# internet-explorer - IE 和 FF 上的 SVG 测试

> ID：12944588
> 
> 赞同：2
> 
> 时间：2012-10-17T22:48:40.720
> 
> 标签：internet-explorer, firefox, svg, internet-explorer-10

在学习 SVG 过滤器时，我遇到了一个令人困惑的场景。

在 FF16 和 IE9/IE10-RTM 中打开以下 SVG 文档：

[http://tavmjong.free.fr/INKSCAPE/MANUAL/images/SVG_TESTS/svg_test.svg](http://tavmjong.free.fr/INKSCAPE/MANUAL/images/SVG_TESTS/svg_test.svg)

您会注意到三角形、正方形和圆形在 Firefox 中是不透明/填充的，但 IE 将它们呈现为透明（您可以通过黑色曲线看到）。

![火狐预览](../Images/aabc9c3ba14c8e92c3e3f56c47f602af.png) ![IE 预览](../Images/d32736ad8d064ba50f854c2baaf372a7.png)

              火狐浏览器

根据 W3C 的建议，哪个浏览器显示正确的行为？

# mysql - MySQL相同的最大值，不同的实例

> ID：12944593
> 
> 赞同：1
> 
> 时间：2012-10-17T22:49:01.640
> 
> 标签：mysql, sql

我有这张桌子：

```
id | day | count
----------------
 u   tue   1
 u   wed   4
 w   wed   5
 x   mon   5
 y   mon   5
 x   tue   2 
```

我想返回每天计数最多的行。所以我想得到这张桌子：

```
id | day | count
----------------
 w   wed   5
 x   mon   5
 y   mon   5
 x   tue   2 
```

这是我的 sql，但它没有给我正确的输出：

```
select id, day, MAX(count)
from Table
group by day 
```

它给了我：

```
id | day | count
----------------
 w   wed   5
 y   mon   5
 x   tue   2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T22:55:10.037

您可以使用子查询：

```
select * from table 
  join (select day,max(count) as count from table group by day) as max_rec
    on table.day = max_rec.day and table.count = max_rec.count 
```

[sqlFiddle](http://www.sqlfiddle.com/#!2/b5c4b/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T22:56:17.320

```
select t1.* from
Table t1
JOIN
(
select day, max(count) count
from Table
group by day
)t2 ON t1.day=t2.day AND t1.count=t2.count 
```

# c - 为什么输出看起来像这样？

> ID：12944594
> 
> 赞同：5
> 
> 时间：2012-10-17T22:49:05.710
> 
> 标签：c, struct, bit-manipulation

我有下面的交流程序，我想以特定的顺序发送一条 32 位消息，例如 0x00000001。

```
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <stdint.h>

struct  test
{
    uint16_t a;
    uint16_t b;
};

int main(int argc, char const *argv[])
{
    char buf[4];
    struct test* ptr=(struct test*)buf;
    ptr->a=0x0000;
    ptr->b=0x0001;
    printf("%x %x\n",buf[0],buf[1]); //output is 0 0
    printf("%x %x\n",buf[2],buf[3]); //output is 1 0
    return 0;
} 
```

然后我通过打印出 char 数组中的值来测试它。我在上面的评论中得到了输出。输出不应该是 0 0 和 0 1 吗？因为 but[3] 是最后一个字节？有什么我错过的吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T22:52:28.187

导致它的小端。阅读本文： [字节序](http://en.wikipedia.org/wiki/Endianness)

要将它们转换为网络顺序，您必须使用`htonl`(host-to-network-long) 和`htons`(host-to-network-short) 转换功能。收到后，您需要使用`ntohl`和`ntohs`函数将网络订单转换为主机订单。字节在数组中的放置顺序取决于您将它们放入内存的方式。如果将它们作为四个单独的短字节放置，则将省略字节顺序转换。您可以使用`char`type 进行这种原始字节操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T22:53:21.167

您的系统将数字存储为[Little Endians](http://en.wikipedia.org/wiki/Endianness)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T22:58:58.277

Windows 将数据保持为“小端”，因此字节被反转。有关详细信息，请参阅[Endiannes](http://en.wikipedia.org/wiki/Big_endian)。

# android - Android - 以编程方式从后台恢复应用程序

> ID：12944603
> 
> 赞同：0
> 
> 时间：2012-10-17T22:50:33.580
> 
> 标签：android, performance, background, onpause

我需要在应用程序进入后台后立即恢复我的应用程序。

我不喜欢我的解决方案，因为有一些错误并且性能不太好，这就是我尝试的：

```
 @Override
protected void onPause() {
       super.onPause();
       Intent intent = new Intent(this, MainActivity.class);
       intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP);
       intent.setAction(Intent.ACTION_MAIN);
       startActivity(intent);
} 
```

这是一个单一的 Activity 应用程序，它加载一个包含许多动态和 Flash 内容的 webview，同时每隔几秒更新一次状态，每隔几秒从网络获取信息。因此，每次在后台重新创建活动时都不是简单快速。重新启动应用程序需要大约 3-4 秒，对我来说太多了。如果用户在那几秒钟之间单击主页中的设置图标，则应用程序不会再次启动。我不知道为什么，经过大量谷歌搜索后，我在这里写信：）请帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:57:22.413

我认为您想要的是实现主屏幕更换。基本上，您添加了一个意图过滤器，您的应用程序会在用户按下主页键时响应广播的意图。你可以在这里读更多关于它的内容。

> [Android 聆听主页按钮](https://stackoverflow.com/questions/4365312/android-listen-home-button)

请注意，如果您这样做，您的用户至少会得到一个选择器，询问他们是运行您的应用程序还是标准主屏幕应用程序。用户可以根据需要选择将您的应用设为默认主屏幕应用。

话虽如此，除非您有一个非常特殊的情况，例如您正在构建专用于您的应用程序的软件/硬件组合设备，否则您几乎肯定不想这样做。CommonsWare 所说的在这方面是正确的。如果你试图接管设备，你肯定会收到卸载奖励，或者来自不太懂技术的用户的愤怒电子邮件，你碰巧欺骗了你的应用程序作为默认主屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:20:12.690

您可以尝试在 Android 清单`android:persistent="true"`中的`<application>`元素中进行设置，但我的印象是，如果您的应用程序未作为默认系统映像的一部分安装，Android 操作系统将忽略该请求。

Android SDK 文档明确指出“应用程序通常不应设置此标志；持久模式仅适用于某些系统应用程序。” 您还会消耗大量电池。Android 并不是专门为应用程序在不使用时保持运行而设计的，以便操作系统可以正确执行多任务并保持合理的电池使用量。服务可以设置为在前台运行`Service.startForeground()`（

值得一提的是，移动设备上的用户比台式机上的用户更能容忍延迟，所以它可能没有你最初想象的那么糟糕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:44:15.983

> 所以每次在后台重新创建活动时都不是简单快速

当用户按下 HOME 时，您的进程会停留一段时间。如果用户在几分钟（或者甚至几小时）内返回，您的进程仍然存在，并且用户将返回到您的活动。

但是，如果用户离开了很长一段时间，或者用户在他们的设备上做了很多事情（例如，运行了一堆应用程序），Android 将终止您的进程以释放内存以用于其他正在进行的事情. “相当长的时间”究竟有多长，或者“他们的设备有多少”，将取决于多种因素，例如他们运行的其他应用程序、他们的设备中有多少 RAM、什么每个应用程序的堆大小是（与 Android 操作系统版本和屏幕大小相关），依此类推。

您正在尝试 - 糟糕 - 做的是强迫用户永远不要离开您的应用程序。你是说你比你的用户更重要。您的用户可能会不同意您的态度。

您可以通过精简您的应用程序来帮助您的事业，以便它占用更少的内存。做到这一点并长期帮助自己的一种方法是摆脱“闪存内容”。到明年这个时候，您的大多数用户很有可能无法运行您的应用程序，因为 Flash 不再适用于 Jelly Bean 及更高版本。启动 Flash 插件也会减慢 Activity 的启动时间。

除此之外，对于 WebView 之外的任何应用程序逻辑，您都可以使用 Traceview 来尝试找出您的时间花在哪里，以尝试提高性能。

# c# - Azure 工具 - 对象引用未设置为对象的实例

> ID：12944607
> 
> 赞同：11
> 
> 时间：2012-10-17T22:50:51.177
> 
> 标签：c#, azure, azure-web-roles

我正在尝试在 Visual Studio 2010 中创建一个使用“Windows Phone 空云应用程序”模板（Windows Azure 工具）的新项目。创建新项目时，它会打开一个带有说明/自述文件的小窗口，其中显示：

> 在解决方案资源管理器中，右键单击 Windows Azure 项目，指向调试并单击启动新实例。等待 Web 角色启动并单击继续访问此网站（不推荐）链接，以便能够浏览该站点，尽管出现证书警告。

当我这样做时，我得到一个“对象引用未设置为对象的实例”而且我什至还没有开始编码......模板刚刚坏了还是？

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-23T05:59:30.183

使用 Visual Studio 2013，我开始在 Azure 项目中遇到“对象引用未设置为对象的实例”错误。在我的情况下，卸载和重新加载云和/或角色-项目有帮助（右键单击项目，从上下文菜单中选择卸载）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-02T09:51:14.743

在尝试了上面的解决方案后，它对我不起作用。

我们设法解决了以管理员模式启动 VS 的问题。

那解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-12T12:50:37.343

通常这意味着 .cscfg 配置文件已损坏。在我的情况下，不知何故，它包含了一个看不见的字符。

打开每个 .cscfg 文件并将文件内容复制粘贴到记事本并返回解决了该问题。

# ruby - Module.private_constant 做什么？有没有办法只列出私有常量？

> ID：12944616
> 
> 赞同：11
> 
> 时间：2012-10-17T22:51:19.233
> 
> 标签：ruby, constants, private, ruby-1.9.3

从 Ruby 1.9.3 开始，我们可以创建私有常量：

```
module M
  class C; end
  private_constant :C
end 
```

是否有关于此功能的良好文档？有没有办法只获取类似于调用的私有常量的名称`constants`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T23:19:06.750

在 Ruby 1.9.3 之前没有私有常量这样的东西。但是，要获取所有常量的列表，您可以简单地使用`constants`.

```
module Mod
  CONST = "value"
end

Mod.constants #=> [:CONST] 
```

从 1.9.3 开始，`private_constant`添加了，但由于没有什么是真正私有的，您可以这样做...

```
module Mod
  CONST = "value"
  private_constant :CONST
end

Mod.const_get(:CONST) #=> "value" 
```

我认为没有办法获取所有私有常量的列表，但您仍然可以测试特定名称的存在。

```
Mod.const_defined?(:CONST) #=> true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-03T19:48:04.403

从 Ruby 2.1 开始，虽然`Module#constants`只包含公共常量，但如果您设置`inherit=false`，您也将获得私有常量。因此，如果您发现一个常量 in`constants(false)`但不是 in `constants`（并且您不关心继承的常量），这可能是一种或多或少可靠的方式来判断它是否是私有的。

```
class Module
  def private_constants
    constants(false) - constants
  end
end

module Foo
  X = 1
  Y = 2
  private_constant :Y
end

puts "Foo.constants = #{Foo.constants}"
puts "Foo.constants(false) = #{Foo.constants(false)}"
puts "Foo.private_constants = #{Foo.private_constants}"

# => Foo.constants = [:X]
# => Foo.constants(false) = [:X, :Y]
# => Foo.private_constants = [:Y] 
```

这是无证的，我不确定它是否是故意的，但从经验上它是有效的。我会用单元测试来支持它。

* * *

**更新：**看起来这是[Ruby 中的一个错误](https://bugs.ruby-lang.org/issues/12345)，可能会在未来的版本中消失。

# asp.net - 如何摆脱没有数据的 ASP.NET gridview 中的大空白空间？

> ID：12944622
> 
> 赞同：0
> 
> 时间：2012-10-17T22:51:39.007
> 
> 标签：asp.net, gridview

我构建了一个允许固定行数的自定义网格视图，因此在 10 个条目计数页面上只有 2 行数据，它将生成 8 个额外的空行。即使根本没有数据，这也有效。它生成 10 个空行。正如它应该。这很棒

但是...如果没有数据，它还会在我的 10 个空行下方附加这个巨大的空白空间。我相信它是当没有数据绑定到gridview时应该生成的正常空间，但我不想要它。我该如何摆脱它？

这是标记的一部分：

```
 <asp:Panel ID="pnlGrdCustomers" runat="server" Width="100%" Height="100%" CssClass="srcColor">            
        <X:GridViewX ID="gvxTaskList" runat="server" AllowPaging="True" AllowSorting="True" AutoGenerateColumns="False" DataSourceID="SqlDsbyStatus"
            Width="100%" Height="100%" CssClass="tablestyle" OnRowCreated="gvxTaskList_RowCreated">
            <AlternatingRowStyle CssClass="altrowstyle" />
            <HeaderStyle CssClass="headerstyle" />
            <RowStyle CssClass="rowstyle" Wrap="false" />  

            <EmptyDataRowStyle BackColor="#edf5ff" Height="300px" VerticalAlign="Middle" HorizontalAlign="Center" />
            <EmptyDataTemplate >
            </EmptyDataTemplate>
            <Columns>
                <asp:BoundField DataField="TicketId" HeaderText="TicketId" SortExpression="TicketId" />
                <asp:BoundField DataField="TicketCreated" HeaderText="TicketCreated" SortExpression="TicketCreated" />
                <asp:BoundField DataField="ContactName" HeaderText="ContactName" ReadOnly="True" SortExpression="ContactName" />
                <asp:BoundField DataField="CompanyName" HeaderText="CompanyName" ReadOnly="True" SortExpression="CompanyName" />
                <asp:BoundField DataField="Description" HeaderText="Description" SortExpression="Description" />
                <asp:BoundField DataField="Status" HeaderText="Status" ReadOnly="True" SortExpression="Status" />
                <asp:BoundField DataField="Priority" HeaderText="Priority" ReadOnly="True" SortExpression="Priority" />
                <asp:BoundField DataField="AssignedTo" HeaderText="AssignedTo" ReadOnly="True" SortExpression="AssignedTo" />
            </Columns>
        </X:GridViewX>
        <asp:SqlDataSource ID="SqlDSbyStatus" runat="server" ConnectionString="<%$ ConnectionStrings:EnterpriseConnectionString %>" SelectCommand="SELECT scT.TicketId, scT.TicketCreated, 
        (SELECT scCon.ContactName FROM scContacts scCon WHERE scCon.AccountId = scT.AccountId AND scT.ContactId = scCon.ContactId) AS 'ContactName', 
        (SELECT Name FROM scCompanies WHERE scT.AccountId = AccountId AND CompanyId = 
            (SELECT scCon.CompanyId FROM scContacts scCon WHERE scCon.AccountId = scT.AccountId AND scT.ContactId = scCon.ContactId)) AS 'CompanyName', 
        scT.Description, 
        (SELECT scStat.Description FROM scStatuses scStat WHERE scT.AccountId = scStat.AccountId AND scT.StatusId = scStat.StatusId) AS 'Status', 
        (SELECT scPri.Description FROM scPriorities scPri WHERE scT.AccountId = scPri.AccountId AND scT.PriorityId = scPri.PriorityId) AS 'Priority', 
        (SELECT (FirstName + ' ' + LastName) FROM Users WHERE scT.UserId = UserId) AS 'AssignedTo'
        FROM scTickets scT 
        WHERE scT.AccountId = @1 AND StatusId = @2 Order By TicketCreated ASC">
            <SelectParameters>
                <asp:Parameter Name="1" Type="Int64" />
                <asp:Parameter Name="2" Type="Int16"/>
            </SelectParameters>
        </asp:SqlDataSource> 
```

这是它背后的一些代码： public partial class TestForm : System.Web.UI.Page { System.Configuration.Configuration webcfg = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration("/configuration");

```
 protected void Page_Load(object sender, EventArgs e)
    {
        // Task List page loads with all open tickets
        SqlDSbyStatus.SelectParameters.Clear();
        SqlDSbyStatus.SelectParameters.Add("1", TypeCode.Int64, "3");
        SqlDSbyStatus.SelectParameters.Add("2", TypeCode.Int64, "1");   

        hidPageIndex.Value = gvxTaskList.PageIndex.ToString();
        hidRowCount.Value = gvxTaskList.unmodifiedRowCount.ToString();
        hidLastPage.Value = gvxTaskList.isLastPage.ToString();
    }

    protected void gvxTaskList_RowCreated(object sender, GridViewRowEventArgs e)
    {
        string rowID = String.Empty;

        if (e.Row.RowType == DataControlRowType.DataRow)
        {                
            rowID = "row" + e.Row.RowIndex;
            e.Row.Attributes.Add("id", "row" + e.Row.RowIndex);
            e.Row.Attributes.Add("onclick", "ChangeRowColor(" + "'" + rowID + "'" + ")");                           
        }
    } 
```

最后是我覆盖的gridview代码：

```
namespace GridViewX
{
    [Description("Represents a custom GridView that creates additional empty rows to fill a fixed-row grid.")]
    [ToolboxData("<{0}:GridViewX runat=server></{0}:GridViewX>")]
public class GridViewX : System.Web.UI.WebControls.GridView
{
    protected override void OnDataBound(EventArgs e)
    {
        GridViewRow gvRow = null;

        isLastPage = (this.PageIndex + 1 == this.PageCount) ? true : false;
        unmodifiedRowCount = this.Rows.Count;

        for (int rows = this.Rows.Count; rows < this.PageSize; rows++)
        {
            gvRow = new GridViewRow(0, 0, DataControlRowType.DataRow, DataControlRowState.Normal);

            for (int columns = 0; columns < this.Columns.Count; columns++)
            {
                gvRow.Controls.Add(new TableCell());
            }

            //Inserts the rows right above the footer row. 
            //Remove the "- 1" if you are not using a footer.
            this.Controls[0].Controls.AddAt(this.Controls[0].Controls.Count - 1, gvRow);
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:35:45.533

GridView 呈现为表格，并且要删除间距，只需更改表格列之间的填充。首先为 GridView 创建一个主 css 名称：

`<asp:GridView ID="GridView1" CssClass="MyGridView" runat="server">`

然后在 css 中根据需要更改表列填充：

```
.MyGridView{
border: none;

}

 .MyGridView tr{
  text-align: left;
  vertical-align: top;

 }

.MyGridView td{
  vertical-align: top;
 padding-bottom: 0px;

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:56:01.677

我能够通过使用 EmptyDataTemplate 标记来解决我的问题，用简单的无数据消息填充它，然后修改我的自定义 gridview 的代码来检查是否没有像这样的数据：

```
protected override void OnDataBound(EventArgs e)
{
    GridViewRow gvRow = null;

    isLastPage = (this.PageIndex + 1 == this.PageCount) ? true : false;
    unmodifiedRowCount = this.Rows.Count;

    if(this.Rows.Count > 0) // Added only this if statement to fix my problem
    {
        for (int rows = this.Rows.Count; rows < this.PageSize; rows++)
        {
            gvRow = new GridViewRow(0, 0, DataControlRowType.DataRow, DataControlRowState.Normal);

            for (int columns = 0; columns < this.Columns.Count; columns++)
            {
                gvRow.Controls.Add(new TableCell());
            }

            this.Controls[0].Controls.AddAt(this.Controls[0].Controls.Count - 1, gvRow);
        }
    }
} 
```

# java - 正则表达式，不包括电子邮件地址后缀的..

> ID：12944624
> 
> 赞同：0
> 
> 时间：2012-10-17T22:51:45.567
> 
> 标签：java, regex

> **可能重复：**
> [使用正则表达式验证电子邮件地址](https://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address)

这是家庭作业，我已经做了一段时间了，我读了很多书，觉得我已经非常熟悉初学者的正则表达式了。

我正在尝试找到一个用于验证/使电子邮件列表无效的正则表达式。有两个地址给我带来了问题，我无法让它们同时验证正确的方法。我已经使用了十几种不同的表达方式，这些表达方式适用于列表中的所有其他电子邮件，但我无法同时得到这两个。

首先，地址。

```
me@example..com  - invalid
someone.nothere@1.0.0.127  - valid 
```

我的表达式中验证后缀的部分

我最初是从

```
@.+\\.[[a-z]0-9]+ 
```

并且有第二种模式来检查更多无效地址，并根据两种模式检查电子邮件，一种检查有效性，另一种无效，但我的教授说他希望这一切都在表达。

```
@[[\\w]+\\.[\\w]+]+ 
```

或者

```
@[\\w]+\\.[\\w]+ 
```

我已经尝试过很多很多不同的方式，但我很确定我只是使用不同的语法来表达这两个表达式。

我知道我想要它做什么，我想要它匹配一个字符类 "character+"."character+"+

加号至少为一个。当我只允许字符类重复一次时，它适用于无效类（显然 ip 不匹配），但是当我允许字符类重复自身时，它匹配第二个周期，即使它不是前面有一个字符。我不明白为什么。

我什至尝试用 () 对所有内容进行分组，并将 {1} 放在转义后的 . 并将 \w 更改为 az 并将 + 替换为 {1,}; 似乎没有什么需要被字符包围的句号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:09:24.807

官方标准[RFC 2822](https://www.rfc-editor.org/rfc/rfc2822#section-3.4.1)描述了使用此正则表达式的有效电子邮件地址的语法：

```
(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\]) 
```

更实际的 RFC 2822 实现（如果我们省略使用双引号和方括号的语法），它仍然匹配 99.99% 的当今实际使用的所有电子邮件地址，它是：

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:18:45.020

```
@([\\w]+\\.)+[\\w]+ 
```

匹配至少一个单词字符，后跟一个“.”。这至少重复一次，然后至少跟着更多的单词字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:19:09.057

我想你想要这个：

```
@[\\w]+(\\.[\\w]+)+ 
```

这匹配一个“单词”，后跟一个或多个“。” “单词”序列。（您也可以反过来进行分组；例如，参见 Dailin 的回答。）

您之前所做的问题是您试图在字符类中嵌入重复。这没有意义，也没有任何语法可以支持它。字符类定义一组字符并匹配一个字符。而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T22:58:46.497

你需要一个*消极的前瞻*：

```
@\w+\.(?!\.) 
```

见[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

在 Perl 中测试：

```
Perl> $_ = 'someone.nothere@1.0.0.127'
someone.nothere@1.0.0.127

Perl> print "OK\n" if /\@\w+\.(?!\.)/
OK
1

Perl> $_ = 'me@example..com'
me@example..com

Perl> print "OK\n" if /\@\w+\.(?!\.)/

Perl> 
```

# xml - XSLT 多个模板，但仅从最后一个结果中获取

> ID：12944629
> 
> 赞同：2
> 
> 时间：2012-10-17T22:52:12.853
> 
> 标签：xml, xslt

我是 XML 和 XSLT 的新手，有两个不同的模板，但我得到的输出来自最后一个模板。

第一个模板输出创建 html 文本，其中 data-video-single 为 false，即值为 0，第二个模板输出 html 文本，其中它有两个 div，即左侧一个，右侧第二个。

我需要将两个文本连接在一起作为单个 html 输出。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html"/>

    <xsl:key name="groups" match="/videos/video" use="data-video-group"/>

    <xsl:template match="/videos">
            <xsl:apply-templates mode="single" select="video[generate-id() = generate-id(key('groups', data-video-group)[1]) and data-video-single=0]" />
    </xsl:template>

    <xsl:template match="video" mode="single">

                <h2>
                    <xsl:value-of select="data-video-group"/>
                </h2>

                <xsl:for-each select="key('groups', data-video-group)">
                    <xsl:if test="data-video-single = '0'">
                        <div class="feature">
                            <p class="featurePic">
                                <img data-video-id="{data-video-id}" data-video-url="{data-video-url}" alt=""></img>
                            </p>
                            <h3>
                                <xsl:value-of select="data-video-heading"/>
                            </h3>
                            <p>
                                <xsl:value-of select="data-video-content"/>
                            </p>
                        </div>
                    </xsl:if>
                </xsl:for-each>
    </xsl:template>

    <xsl:template match="/videos">
        <xsl:apply-templates mode="nonSingle" select="video[generate-id() = generate-id(key('groups', data-video-group)[1]) and data-video-single=1]" />                
    </xsl:template> 

    <xsl:template match="video" mode="nonSingle">

        <xsl:if test="position() mod 2 != 0">
            <div class="featureLeft">
                <h2>
                    <xsl:value-of select="data-video-group"/>
                </h2>

                <xsl:for-each select="key('groups', data-video-group)">
                    <xsl:if test="data-video-single = '1'">
                        <div class="feature">
                            <p class="featurePic">
                                <img data-video-id="{data-video-id}" data-video-url="{data-video-url}" alt=""></img>
                            </p>
                            <h3>
                                <xsl:value-of select="data-video-heading"/>
                            </h3>
                            <p>
                                <xsl:value-of select="data-video-content"/>
                            </p>
                        </div>
                    </xsl:if>
                </xsl:for-each>
            </div>            
        </xsl:if>

        <xsl:if test="position() mod 2 = 0">
            <div class="featureRight">
                <h2>
                    <xsl:value-of select="data-video-group"/>
                </h2>

                <xsl:for-each select="key('groups', data-video-group)">
                    <xsl:if test="data-video-single = '1'">
                        <div class="feature">
                            <p class="featurePic">
                                <img data-video-id="{data-video-id}" data-video-url="{data-video-url}" alt=""></img>
                            </p>
                            <h3>
                                <xsl:value-of select="data-video-heading"/>
                            </h3>
                            <p>
                                <xsl:value-of select="data-video-content"/>
                            </p>
                        </div>
                    </xsl:if>

                </xsl:for-each>
            </div>                        
        </xsl:if>

    </xsl:template>

</xsl:stylesheet> 
```

这是源xml数据。

```
<?xml version="1.0" encoding="utf-8" ?> 
<?xml-stylesheet type="text/xsl" href="/UserControls/IRISNewRelease/Data/newrelease.xslt"?>
<videos>
    <video>
        <data-video-id>1</data-video-id>
        <data-video-single>0</data-video-single>
        <data-video-group>ABC GROUP</data-video-group>
        <data-video-groupNote></data-video-groupNote>
        <data-video-url>VIMEO</data-video-url>
        <data-video-heading>Video Heading 1</data-video-heading>
        <data-video-content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae lacus fermentum vehicula.</data-video-content>
    </video>
    <video>
        <data-video-id>2</data-video-id>
        <data-video-single>0</data-video-single>
        <data-video-group>ABC GROUP</data-video-group>
        <data-video-url>VIMEO</data-video-url>
        <data-video-heading>Video Heading 2</data-video-heading>
        <data-video-content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae lacus fermentum vehicula.</data-video-content>
    </video>
    <video>
        <data-video-id>3</data-video-id>
        <data-video-single>0</data-video-single>
        <data-video-group>Company Secretarial</data-video-group>
        <data-video-url>VIMEO</data-video-url>
        <data-video-heading>Video Heading 3</data-video-heading>
        <data-video-content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae lacus fermentum vehicula.</data-video-content>
    </video>
    <video>
        <data-video-id>4</data-video-id>
        <data-video-single>0</data-video-single>
        <data-video-group>Business Tax</data-video-group>
        <data-video-url>VIMEO</data-video-url>
        <data-video-heading>Video Heading 4</data-video-heading>
        <data-video-content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae lacus fermentum vehicula.</data-video-content>
    </video>
    <video>
        <data-video-id>5</data-video-id>
        <data-video-single>0</data-video-single>
        <data-video-group>Personal Tax</data-video-group>
        <data-video-url>VIMEO</data-video-url>
        <data-video-heading>Video Heading 5</data-video-heading>
        <data-video-content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae lacus fermentum vehicula.</data-video-content>
    </video>
    <video>
        <data-video-id>6</data-video-id>
        <data-video-single>1</data-video-single>
        <data-video-group>Personal Tax</data-video-group>
        <data-video-groupNote>Integration with IRIS Personal Tax</data-video-groupNote>
        <data-video-url>VIMEO</data-video-url>
        <data-video-heading>Video Heading 6</data-video-heading>
        <data-video-content>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae lacus fermentum vehicula.</data-video-content>
    </video>
</videos> 
```

预期结果如下...

下面的结果来自第一个模板，即 mode = single，如果您评论第二个模板并运行它会正常工作。

```
<h2>
    Personal Tax</h2>
<div class="feature">
    <p class="featurePic">
        <img data-video-id="50214413" data-video-url="VIMEO" alt=""></p>
    <h3>
        Simplified Client Data Entry</h3>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae
        lacus fermentum vehicula.</p>
</div>
<div class="feature">
    <p class="featurePic">
        <img data-video-id="50214135" data-video-url="VIMEO" alt=""></p>
    <h3>
        IRIS Personal Tax and Payroll Integration</h3>
    <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae
        lacus fermentum vehicula.</p>
</div> 
```

这是第二个模板的结果，即 mode = nonSingle，如果您评论第一个模板并运行此结果将正常工作。

```
<div class="featureLeft">
    <h2>
        Accounts Production</h2>
    <div class="feature">
        <p class="featurePic">
            <img data-video-id="50220365" data-video-url="VIMEO" alt=""></p>
        <h3>
            Companies House iXBRL e-filing</h3>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae
            lacus fermentum vehicula.</p>
    </div>
    <div class="feature">
        <p class="featurePic">
            <img data-video-id="50220516" data-video-url="VIMEO" alt=""></p>
        <h3>
            IRIS Accounts Production supports companies limited by guarantee</h3>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae
            lacus fermentum vehicula.</p>
    </div>
</div>
<div class="featureRight">
    <h2>
        Company Secretarial</h2>
    <div class="feature">
        <p class="featurePic">
            <img data-video-id="50220436" data-video-url="VIMEO" alt=""></p>
        <h3>
            Company name change for Companies House</h3>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae
            lacus fermentum vehicula.</p>
    </div>
</div>
<div class="featureLeft">
    <h2>
        Business Tax</h2>
    <div class="feature">
        <p class="featurePic">
            <img data-video-id="50214325" data-video-url="VIMEO" alt=""></p>
        <h3>
            IRIS Business Tax Client Account Overview</h3>
        <p>
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean commodo tellus vitae
            lacus fermentum vehicula.</p>
    </div>
</div> 
```

目前我在文件中都有它只会显示最后一个模板结果而不是两个模板。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T01:17:13.407

我无法为您提供合适的解决方案，因为您忘记提供示例输入文档和预期的输出文档。但是，我可以为您提供解决方案的一般模式。您需要根据需要对其进行调整并完成最后一个模板的序列构造函数。

通常，将分支从显式分支指令（xsl:if 等）转移到模板匹配模式的想法。还将循环控制从 xsl:for-each 移至模板处理 (xsl:apply-templates)。

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:output method="html" indent="yes" />
<xsl:strip-space elements="*" />

<xsl:key name="groups" match="/videos/video" use="data-video-group"/>

<xsl:template match="/videos">
  <xsl:apply-templates select="video[generate-id() = generate-id(key('groups', data-video-group)[1])]" mode="head"/>
</xsl:template>

<xsl:template match="video" mode="head">
  <h2><xsl:value-of select="data-video-group" /></h2>
  <xsl:apply-templates select="key('groups', data-video-group)" />
</xsl:template>

<xsl:template match="video[data-video-single=0]">
  <!-- Content for "data-video-single = False" case. -->
  <div class="feature">
    <p class="featurePic">
      <img data-video-id="{data-video-id}" data-video-url="{data-video-url}" alt=""></img>
    </p>
    <h3><xsl:value-of select="data-video-heading" /></h3>
    <p><xsl:value-of select="data-video-content" /></p>
  </div>
</xsl:template>

<xsl:template match="video[data-video-single!=0]">
  <!-- Your content for "data-video-single = True" case goes here! -->
</xsl:template>

</xsl:stylesheet> 
```

# iphone - 在框架中找不到 default.styleproto。4.5 上的 iOS 6.0

> ID：12944633
> 
> 赞同：2
> 
> 时间：2012-10-17T22:52:18.210
> 
> 标签：iphone, objective-c, ios-simulator, ios6

由于这个原因，它没有显示任何图形，而这只是发生了。在此新更新发布之前，一切正常。我创建了一个新项目来测试我是否搞砸了原来的项目，但仍然是同样的问题。我也重复了这些步骤，但我一直在对象文件夹中的实际地图视图中找到问题的根源，以便您将其添加到情节提要中。它似乎不在 Mapkits 框架中，但我可能错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:55:08.760

我刚刚遇到了同样的问题。设置 MKMapView 的 mapType 属性似乎是一个问题。在我的代码中，我注释掉了这个集合，一切都运行良好。

# ruby-on-rails - Rails 错误：捆绑安装

> ID：12944638
> 
> 赞同：1
> 
> 时间：2012-10-17T22:53:01.470
> 
> 标签：ruby-on-rails, bundle

添加一些 gem 后，我运行 bundle install 并收到此错误：

Gemfile 语法错误：来源：rubygems

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

group :development do
  gem 'sqlite3', '1.3.5'
end

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'

end

gem 'jquery-rails', '2.0.2' 
```

有什么想法吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:32:44.487

应该是ruby的版本问题。你使用 rails 3.2.8 如果你使用 ruby​​ 1.8.7 或更低版本，那么请安装 ruby​​ 1.9.3。它将避免您的语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T12:09:39.827

我建议您独立编写所有 gem，而不是将它们分组到您的 Gemfile 中。因为无论您在 :development 和 :asset 中分组什么宝石，都无需将它们分组。

你应该这样尝试：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'sqlite3', '1.3.5'
gem 'sass-rails',   '3.2.5'
gem 'coffee-rails', '3.2.2'
gem 'uglifier', '1.2.3'
gem 'jquery-rails', '2.0.2' 
```

现在运行`bundle install`希望它对你有用。

# python - 定义函数以返回样本协方差

> ID：12944641
> 
> 赞同：4
> 
> 时间：2012-10-17T22:53:25.827
> 
> 标签：python

我有两个向量，我试图在一个函数中使用它们来只返回样本协方差。谁能帮我修复我的程序？我是 python 和一般编程的新手。

```
xv= array([8., 9.5, 7.8, 4.2, -7.7, -5.4, 3.2])
yv= array([8.9, 2.0, 4.8, -4.2, 2.7, -3.4, -5.9])

def cov(x,y):
    if (len(x) != len(y)
        [Stop] 
        x.bar = mean(x) 
        y.bar = mean(y) 
        N = len(x)      
    Cov = (sum((x-x.bar)*(y-y.bar))) / (N-1.0) 
    return(Cov) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:10:07.507

这是我没有使用外部库的版本。协方差方程来自维基百科：[http ://en.wikipedia.org/wiki/Covariance](http://en.wikipedia.org/wiki/Covariance)

```
x = [8., 9.5, 7.8, 4.2, -7.7, -5.4, 3.2]
y = [8.9, 2.0, 4.8, -4.2, 2.7, -3.4, -5.9]

def mean(x):
    return sum(x) / len(x)

def cov(x, y):
    x_mean = mean(x)
    y_mean = mean(y)
    data = [(x[i] - x_mean) * (y[i] - y_mean)
            for i in range(len(x))]
    return sum(data) / (len(data) - 1)

print cov(x, y) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:02:16.040

您可以尝试查看广泛使用的`numpy`包，用于协方差等操作：http: [//docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.cov.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:26:22.593

我以这种方式重写了你的函数：

```
def cov(x,y):
    if (len(x) != len(y)):
        sys.exit()
    x_bar = float(sum(x)/len(x))
    y_bar = float(sum(y)/len(y))
    N = len(x)
    sum_xy = 0
    for i in range(len(x)):
        sum_xy += (x[i]-x_bar)*(y[i]-y_bar)
    return(sum_xy/(N-1.0)) 
```

# attributes - 获取节点 xquery 的属性

> ID：12944644
> 
> 赞同：1
> 
> 时间：2012-10-17T22:53:35.250
> 
> 标签：attributes, xquery, nodes

我正在尝试使用 xquery 中的以下代码获取节点的所有属性，从逻辑上讲它应该可以工作，但事实并非如此

对于 $n 在 $nodes 返回 $n/@*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T02:56:45.690

属性节点必须是元素节点的属性，结果树不能包含独立的属性节点。

**如果要为每个属性生成一系列名称 - 值，请执行**以下操作：

```
for $attr in $nodes/@*
 return
   (name($attr), string($attr), '&#xA;') 
```

**例如**，给定以下 XML 文档：

```
<t topA="1">
  <a x="2" z="3">
    <b message="Hello"/>
  </a>
  <c y="5"/>
</t> 
```

**并将此查询应用于它**：

```
for $nodes in //*,
    $attr in $nodes/@*
 return
   (name($attr), string($attr), '&#xA;') 
```

**结果是**：

```
topA 1 
 x 2 
 z 3 
 message Hello 
 y 5 
```

# javascript - 在调用期间将变量添加到函数的范围

> ID：12944645
> 
> 赞同：0
> 
> 时间：2012-10-17T22:53:38.450
> 
> 标签：javascript

我希望在`locals`调用函数时允许对象的所有变量都在范围内。例如：

```
function test() {
  console.log(string)
}

var locals = {
  string: 'test'
}

function callTest(fn, locals) {
  // INSERT MAGIC
  fn()
}

callTest(test, locals) // -> should log 'test' without any errors 
```

我试图避免的事情：

```
function(locals) {
  with (locals) {
    console.log(string)
  }
} 
```

用例：我想创建一个带有回调的模板系统。当地人应该真的是当地人，而不是“当地人”对象。

```
module.exports = function(callback) {
  callback(null, string)
} 
```

是的，我可以执行以下操作，但这很难看。现在，这就是我的做法：

```
module.exports = function(locals, callback) {
  callback(null, locals.string)
} 
```

这是否可能，甚至在任何编程语言中都是可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:18:35.930

要么使用上下文属性 ( `this.property`)，要么阅读链接的文章并使用`Function`绝对可以得到你想要的构造函数。

> [没有 with 语句的模板](http://blog.jankuca.com/post/10848341942/templating-with-statement)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T22:59:16.167

不确定我是否完全理解，但是这个怎么样：（是否记录“测试”）

```
function test( locals ) {
    console.log( locals.string );
}

var locals = {
    string: 'test';
}

function callTest(fn, locals) {
    // INSERT MAGIC
  fn( locals );
}

callTest(test, locals); // -> should log 'test' without any errors 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:07:37.023

我知道您不是在寻找替代方案（就解决您的问题而言）。我不会对此争论。我唯一能想到的，*不*使用全局变量或函数参数（这是*正常*的做法）：

```
function test() {
    console.log( this.string );
}

function callTest(fn, locals) {
    // INSERT MAGIC
    fn.call(locals);
}

var locals = {
    string: 'test';
}

callTest(test, locals); 
```

与您的要求的唯一差异是`locals`变为`this`.

# sql-server - 如何使用基于外部查询的计数在 sql 中创建子查询

> ID：12944646
> 
> 赞同：0
> 
> 时间：2012-10-17T22:53:41.267
> 
> 标签：sql-server, sql-server-2008

我希望有人可以帮助我解决这个问题。基本上我有两个要“合并”的查询。我希望第二个查询与第一个查询一起作为额外的列。第一个是这样的：

```
SELECT t_Item_Storage_Location.Storage_Loc_Nbr, 
t_Storage_Location.Storage_Loc_Type_Code, 
Count(t_Load.Load_Id) AS CurrentLoadCount,
t_load.MMM_Id_Nbr

FROM t_Load INNER JOIN (t_Storage_Location INNER JOIN t_Item_Storage_Location ON 
t_Storage_Location.Storage_Loc_Nbr = t_Item_Storage_Location.Storage_Loc_Nbr) ON 
(t_Load.Storage_Loc_Nbr = t_Item_Storage_Location.Storage_Loc_Nbr) 
AND (t_Load.MMM_Id_Nbr = t_Item_Storage_Location.MMM_Id_Nbr)

where ((((t_Item_Storage_Location.MMM_Id_Nbr) Between '702004%' And '702011%') 
AND ((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%A') 
AND ((t_Storage_Location.Storage_Loc_Type_Code)='CD') 
AND ((t_Load.Active_Status_Ind)='A') 
AND ((t_Load.QC_Status_Code) Like 'R%') 
AND ((t_Load.MMM_Facility_Code)='MC')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%B'))
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%C')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%D')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%E'))

)
GROUP BY t_Item_Storage_Location.MMM_Id_Nbr,
t_Item_Storage_Location.Storage_Loc_Nbr, 
t_Storage_Location.Storage_Loc_Type_Code,
t_Load.MMM_Facility_Code,
t_load.MMM_Id_Nbr

HAVING
Count(t_Load.Load_Id)<4 
```

第二个基于第一个的 t_load.MMM_Id_Nbr。基本上我想用那个 mmm_id_nbr 计算所有负载。

```
SELECT count(Load_ID) as LoadCount, MMM_Id_Nbr, storage_Loc_Nbr
FROM t_load 
WHERE QC_Status_Code like 'R%' and mmm_Facility_Code ='MC' and Active_Status_Ind='A'
GROUP by MMM_Id_Nbr, storage_loc_Nbr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:57:59.723

将此作为建议而不是帮助，查询过于未优化，也许您应该重新考虑您的数据库结构

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:09:02.357

好吧我可以回答你的问题

您可以使用类似这样的方式加入另一个查询

```
Select KeyColumn,Column1 From Table1
left Join ( Select ForeignKeyColumn, Count(*) From Table2 Group By ForeignKeyColumn) dummyTableName
On Table1.KeyColumn = dummyTableName.ForeignKeyColumn 
```

我正要弄清楚如何将这种技术应用于您的查询，但我的手指发生了叛变。

快速提示

```
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%B'))
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%C')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%D')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%E')) 
```

可以替换为

```
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%[BCDE]')) 
```

例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:55:44.140

我现在做了一个这样的子查询：

```
Select b.Storage_Loc_Nbr, b.CurrentLoadCount,
(SELECT count(Load_ID) as LoadCount 
FROM t_load c
WHERE b.MMM_Id_Nbr=c.MMM_Id_Nbr

)as CountOtherLoc

FROM
(

SELECT * FROM

(

SELECT t_Item_Storage_Location.Storage_Loc_Nbr, 
t_Storage_Location.Storage_Loc_Type_Code, 
Count(t_Load.Load_Id) AS CurrentLoadCount,
t_load.MMM_Id_Nbr

FROM t_Load INNER JOIN (t_Storage_Location INNER JOIN t_Item_Storage_Location ON 
t_Storage_Location.Storage_Loc_Nbr = t_Item_Storage_Location.Storage_Loc_Nbr) ON 
(t_Load.Storage_Loc_Nbr = t_Item_Storage_Location.Storage_Loc_Nbr) AND      (t_Load.MMM_Id_Nbr = t_Item_Storage_Location.MMM_Id_Nbr)

where ((((t_Item_Storage_Location.MMM_Id_Nbr) Between '702004%' And '702011%') 
AND ((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%A') 
AND ((t_Storage_Location.Storage_Loc_Type_Code)='CD') 
AND ((t_Load.Active_Status_Ind)='A') 
AND ((t_Load.QC_Status_Code) Like 'R%') 
AND ((t_Load.MMM_Facility_Code)='MC')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%B'))
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%C')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%D')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%E'))

 ...

as a

)  
as b 
```

它给了我想要的东西，除了 countOtherLoc 列没有我拥有的 where 条件，我不能在这种类型的子查询中使用多个。我需要在第 4 行下添加“WHERE QC_Status_Code like 'R%' and mmm_Facility_Code ='MC' and Active_Status_Ind='A' 但它不会让我。有什么想法吗？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-17T23:04:15.323

你在查询中有一些错误吗？为什么在 LIKE 查询的 AND 之后使用一些 OR 和而不是。一个查询完全是白痴。

让我们考虑一下，例如 LIKE 查询：

```
where [...]
AND ((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%A') 

[....]

# what about above on %A ?
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%B'))
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%C')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%D')) 
OR (((t_Item_Storage_Location.Storage_Loc_Nbr) Like '%E')) 
```

您想准确搜索以 A 结尾的字符串，`%A`但在 OR 子句中没有导入其他查询搜索？这不是很好的查询，也没有正确设置。

`GROUP BY`可能会为您的服务器生成太多结果。你是杀手吗？

如果你想使用 Like 你应该使用 REGEXP 而不是 Like 太多选项。您错过了正确 SQL 优化的一些基础知识。

# jquery - jquery .on() 切换 div

> ID：12944650
> 
> 赞同：1
> 
> 时间：2012-10-17T22:54:43.987
> 
> 标签：jquery

我正在开发一个博客，其中包含通过 ajax 请求加载的动态内容，并且我正在尝试使用按钮隐藏/显示文章的“发表评论”表单：

```
<div id="post">
...
  <ol id="update" class="timeline">
    <!-- comments here -->
  </ol>
  <button class="mybutton Bhome">Commenta</button><!-- hide/show button -->
  <div class="mycomment"><!-- div to hide/show -->
    <form action="#" method="post">
      Nome:
      <input type="text" size="12" id="name" /><br />
      Email:
      <input type="text" size="12" id="email" /><br />
      <textarea rows="10" cols="50" class="mytext" id="commentArea"></textarea><br />
      <input type="submit" class="Bhome" value=" Post " />
    </form>
  </div><!-- mycomment --> 
</div><!-- post --> 
```

此 jquery 代码运行良好，但对所有帖子都有影响...

```
$("div").on("click", ".mybutton", function(e){ 
  $(".mycomment").slideToggle("slow");
  e.stopPropagation();
}); 
```

我希望只有单击的隐藏/显示按钮对相关文章有影响，但我的页面上有不止一篇文章，带有`.mybutton`类的按钮隐藏或显示所有文章的所有评论表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:00:06.353

如果您总是有一个`.mybutton`按钮后跟`.mycomment`要隐藏的 div，那么您需要做的就是找到`.mycomment`被按下的按钮的下一个兄弟，如下所示：

```
$("div").on("click", ".mybutton", function(e){ 
    $(this).next(".mycomment").slideToggle("slow");
    e.stopPropagation();
}); 
```

请注意使用`next()`方法来查找`.mycomment`与 clicked 同级的下一个元素`.mybutton`。

# mysql - 与 short_uuid 一起使用的数据类型列

> ID：12944657
> 
> 赞同：2
> 
> 时间：2012-10-17T22:55:36.033
> 
> 标签：mysql, sql

我决定使用[uuid_short](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_uuid-short) mysql 函数为我的主键生成 id。我的问题是我应该使用哪种类型的数据类型的列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:09:39.847

您链接的部分指出 uuid_short 返回一个“64 位无符号整数”。这表明[BIGINT UNSIGNED](https://dev.mysql.com/doc/refman/5.7/en/integer-types.html)是用于您的键控列的类型。

# scheme - 在球拍中使用调度表

> ID：12944668
> 
> 赞同：3
> 
> 时间：2012-10-17T22:56:46.297
> 
> 标签：scheme, racket

我正在编写一个小程序来计算以列表形式表示的表达式的简单导数，即`2x^2`表示为`(* 2 (exp x 2))`，我定义了以下函数：

```
;; derivative of a constant is 0
(define (diff-constant x E) 0)

;; computes derivative of E with respect to x where E can only be of the form
;; (+ x x ...)
(define (diff-sum x E)
  (cond ((or (not (list? E)) (null? E)) 0)
        ((eq? (car E) x) (+ 1 (diff-sum x (cdr E))))
        (else (diff-sum x (cdr E)))))

;; computes derivative of E with respect to x where E can only be of the form
;; (* x y)
(define (diff-product x E)
  (cond ((and (eq? x (cadr E)) (eq? x (caddr E))) (list '* 2 x))
        ((eq? x (cadr E)) (list (caddr E)))
        ((eq? x (caddr E)) (list (cadr E)))
        (else 0)))

;; computes derivative of E with respect to x where E can only be of the form
;; (expt x y) which is x^y
(define (diff-expt x E)
  (cond ( not (eq? x (cadr E)) 0)
        ((eq? 1 (caddr E)) 0)
        ((eq? 2 (caddr E)) (cadr E))
        (else (list '* (caddr E) (list 'expt x (- (caddr E) 1)))))) 
```

我还有一个调度表定义为：

```
;; Dispatch Table of supported operators.
 (define diff-dispatch
   (list (list '+ diff-sum)
         (list '* diff-product)
         (list 'expt diff-expt)
         )) 
```

我正在尝试编写一个函数，该函数`diff`采用一个方程`E`（以列表形式）并计算相对于的导数`x`并使用调度表调用返回结果的预定义函数

这是我到目前为止所拥有的，但我无法弄清楚其余的

```
;; Differentiate expression E with respect to x.
(define (diff x E)
  (cond ((number? E) (diff-constant x E))
        ;; insert code here to handle the other base case - variables
        ...
        (else    ; insert code here to lookup the appropriate function in the
                 ; dispatch table based on the operator in the expression,
                 ; then call that function to differentiate the expression
                     (diff-func x E)))))) 
```

例如：`(diff 'x '(+ x (* x x)))`应该评估为`(+ 1 (+ (* 1 (* x)) (* x 1)))`（即 1 + x + x）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:32:43.197

在[SICP 书中](http://mitpress.mit.edu/sicp/full-text/book/book.html)有一整节详细解释了如何构建用于执行符号微分的 Scheme 程序，请查看[第 2.3 节](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-16.html#%_sec_2.3.2)。特别是，请注意您遗漏了一种情况 - 如果要派生的表达式是变量会发生什么？检查链接以确保您在正确的轨道上。

现在，回答这个问题：给定代码中使用的表表示，实现调度程序很简单。这些方面的东西将有助于获得应用正确的微分程序：

```
((cadr             ; obtain the differentiation procedure
  (assoc           ; look for the differentiation procedure
   (car E)         ; obtain the operator in the expression
   diff-dispatch)) ; dispatch table
 x E)              ; apply the procedure with parameters `x` and `E` 
```

请注意，找到要应用的正确过程的“诀窍”在于该表是作为关联列表实现的，并且该`assoc`过程是为在此类列表中查找数据而精确设计的。[在文档](http://docs.racket-lang.org/reference/pairs.html#%28%64%65%66%2E%5F%28%28%6C%69%62%2E%5F%72%61%63%6B%65%74%2F%70%72%69%76%61%74%65%2F%6C%69%73%74%2E%2E%72%6B%74%29%2E%5F%61%73%73%6F%63%29%29)中阅读有关它的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:40:23.103

补充一下 Óscar López 的回答：在专业级的 Racket 程序中，我们希望尽可能快地进行调度。如果要测试的事物数量超过几个项目，我们可能应该使用支持快速查找的数据结构，例如向量或[哈希表](http://docs.racket-lang.org/guide/hash-tables.html)。数据表示很重要：列表不是我们应该知道的最好或唯一的数据结构。SICP 偏向于对所有事物使用链表表示是值得称赞的。但有时链表不是正确的结构。

在基于哈希表的方法中，调度表的设置非常相似：

```
;; in professional-level Racket (#lang racket)
(define dispatch-table (hash '+ diff-sum
                             '* diff-product
                             ;; ... etc
                             )) 
```

查找表是一个[散列引用](http://docs.racket-lang.org/reference/hashtables.html#%28def._%28%28quote._~23~25kernel%29._hash-ref%29%29)。

```
(define op '+)
(hash-ref dispatch-table op)      ;;; => diff-sum 
```

# java - Java URLEncoding / Decoding URL Spaces with dashes

> ID：12944672
> 
> 赞同：0
> 
> 时间：2012-10-17T22:57:12.407
> 
> 标签：java, tapestry

我正在寻找在 URL 中编码过滤器参数。我想要一个可读的 URL，所以我想用下划线替换空格。

示例 aston martin 编码为 aston_martin 而不是 aston$0020martin。然后我需要能够将 URL 解码回阿斯顿马丁。

我唯一关心的是搜索参数自然包含下划线。我不确定你会在这个特定的用例中做什么。

我是 Tapestry5 用户，所以我可以选择覆盖 URLEcoder，或者可以使用 java URLEncoder。我只是还没有想出如何让它以我想要的方式对事物进行编码。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:52:17.927

您将 URL 编码与 java.net.URLEncoder 混淆了。不足为奇，也不是你的错。尽管有它的名字，后一个过程是针对 URL*参数*名称和值的，在 POST 数据中也是如此。只有前者将空间变成 %20。后者将其变为“+”，这是 (a) 对您的过滤器参数执行的正确操作，(b) 可逆，以及 (c) 不像 %20 那样令人反感。不知道你从哪里得到 0020 美元。

# bash - 如何在 bash 中导出关联数组（哈希）？

> ID：12944674
> 
> 赞同：15
> 
> 时间：2012-10-17T22:57:24.347
> 
> 标签：bash, hash, export

相关但不重复：[如何在 Bash 中定义哈希表？](https://stackoverflow.com/questions/1494178/how-to-define-hash-tables-in-bash)

我可以定义和使用 bash 哈希，但我无法导出它，即使使用 -x 标志也是如此。例如，以下用于导出（和测试导出）普通字符串变量的方法：

```
aschirma@graphics9-lnx:/$ export animal_cow="moo"
aschirma@graphics9-lnx:/$ bash -c "echo \$animal_cow"
moo
aschirma@graphics9-lnx:/$ 
```

但是，如果我尝试导出哈希：

```
aschirma@graphics9-lnx:/$ declare -A -x animals
aschirma@graphics9-lnx:/$ animals[duck]="quack"
aschirma@graphics9-lnx:/$ echo ${animals[duck]}
quack
aschirma@graphics9-lnx:/$ bash -c "echo \${animals[duck]}"

aschirma@graphics9-lnx:/$ 
```

似乎嵌套的 bash shell 在其范围内没有散列。我也通过手动输入嵌套的 bash shell 并尝试以交互方式使用哈希来验证这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T23:09:53.080

*将数组变量编码到环境中并没有真正的好方法。*见 [http://www.mail-archive.com/bug-bash@gnu.org/msg01774.html（Chet](http://www.mail-archive.com/bug-bash@gnu.org/msg01774.html) Ramey 是 bash 的维护者）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-23T18:23:04.777

作为这种苛刻的 Bash 限制的解决方法，我正在使用“序列化到临时文件”方法。您可以导出普通变量，因此您可以通过文件路径传递一个数组（关联）。当然，这有局限性，但有时有效并且足够好。

```
declare -A MAP # export associative array                                                                           
MAP[bar]="baz"                                                                        
declare -x serialized_array=$(mktemp) # create temporary variable 
# declare -p can be used to dump the definition 
# of a variable as shell code ready to be interpreted                                       
declare -p MAP > "${serialized_array}" # serialize an array in temporary file 

# perform cleanup after finishing script                                      
cleanup() {                                                                   
  rm "${serialized_array}"                                                    
}                                                                             
trap cleanup EXIT   

# ... in place where you need this variable ...
source "${serialized_array}" # deserialize an array                         
echo "map: ${MAP[@]}" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T20:06:09.953

这有点旧，但无论如何我都会回答，你可以使用临时文件。如果你做对了，你可以包装它来像数组一样使用它们。例如使用此功能：

```
var() { #  set var or add comtent
    case $1 in 
    *=|*=*) 
        local __var_part1=$( echo "$1" | sed -e 's/=.*//' -e 's/[+,-]//' ) # cut +=/=
        local __var_part2=$( echo "$1" | sed -e 's/.*.=//' )
        local __var12=$tmp_dir/$__var_part1
        mkdir -p ${__var12%/*} #create all subdirs if its an array
        case $1 in 
        *+=*)
                # if its an array try to add new item
            if [ -d $tmp_dir/$__var_part1 ] ; then
            printf  -- $__var_part2 > $tmp_dir/$__var_part1/\  $(( 
                $( echo $tmp_dir/$__var_part2/* \
                    | tail  | basename )\ + 1 ))
            else
            printf -- "$__var_part2" >> $tmp_dir/$__var_part1  
            fi
            ;;
        *-=*) false ;;
            # else just add content
            *)  printf  -- "$__var_part2" > $tmp_dir/$__var_part1 ;;
        esac
        ;;  
    *) # just print var
        if [ -d $tmp_dir/$1 ] ; then
        ls $tmp_dir/$1
        elif [ -e $tmp_dir/$1 ] ; then 
        cat $tmp_dir/$1
        else
        return 1
        fi
        ;;
    esac    
}

# you can use mostly like you set vars in bash/shell
var test='Hello Welt!'
# if you need arrays set it like this:
var fruits/0='Apple'
var fruits/1='Banana'

# or if you need a dict:
var contacts/1/name="Max"
var contacts/1/surname="Musterman" 
```

这不是最快的方法，但它非常灵活、简单并且几乎适用于所有 shell。

# objective-c - CocoaPods：“生成支持文件”耗时太长，无论如何要改进？

> ID：12944676
> 
> 赞同：1
> 
> 时间：2012-10-17T22:57:42.287
> 
> 标签：objective-c, ios, cocoapods

我在我的项目中使用了 CocoaPods 但是每次我更改某些东西都需要很长时间才能生成支持文件，我知道这不是我可以控制的，但只是想知道它为子库生成的东西，如果是的话，可以我保存现有的“支持文件”，只让它为新添加的库生成一个？

每次更改 Podfile 时，我都会运行“pod install”，这是一个问题，我应该运行“pod setup”吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:31:45.837

我们正在做这件事：

```
# AWSiOSSDK is a good test because it has a lot of files
$ find Pods/AWSiOSSDK | wc -l
3001

# and generates a plist with almost 80k lines
$ wc -l Pods/Pods.xcodeproj/project.pbxproj
79766 Pods/Pods.xcodeproj/project.pbxproj

# CocoaPods 0.15.1
$ time pod install --no-integrate --silent
pod install --no-integrate --silent  216,50s user 1,45s system 83% cpu 4:19,68 total

# Modified CocoaPods
$ time dpod install --no-integrate --silent
COCOA_PODS_ENV=development ~/Documents/GitHub/CP/CocoaPods/bin/pod install    8,03s user 0,67s system 55% cpu 15,802 total 
```

超过 4 分钟 vs 16 秒意味着在 CocoaPods 0.16 中生成支持阶段应该变得非常快。

来自[Xcodeproj/pull/34](https://github.com/CocoaPods/Xcodeproj/pull/34)

所以我只能建议等待:-)

# python - 在 Python 2.7 中使用 unicodedata.normalize

> ID：12944678
> 
> 赞同：8
> 
> 时间：2012-10-17T22:57:50.423
> 
> 标签：python, python-2.7, unicode, normalization, unicode-normalization

再一次，我对一个 unicode 问题感到非常困惑。我不知道如何成功使用[unicodedata.normalize](http://docs.python.org/library/unicodedata.html)按预期转换非 ASCII 字符。例如，我想转换字符串

```
u"Cœur" 
```

到

```
u"Coeur" 
```

我很确定 unicodedata.normalize 是这样做的方法，但我无法让它工作。它只是保持字符串不变。

```
>>> s = u"Cœur"
>>> unicodedata.normalize('NFKD', s) == s
True 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T04:28:15.953

你可以试试[`Unidecode`](http://pypi.python.org/pypi/Unidecode)：

```
# -*- coding: utf-8 -*-
from unidecode import unidecode # $ pip install unidecode

print(unidecode(u"Cœur"))
# -> Coeur 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-17T23:32:57.637

您的问题似乎与 Python 无关，但您尝试分解的字符 (u'\u0153' - 'œ') 本身并不是一个组合。

检查您的代码是否适用于包含普通复合字符（如“ç”和“ã”）的字符串：

```
>>> a1 = a
>>> a = u"maçã"
>>> for norm in ('NFC', 'NFKC', 'NFD','NFKD'):
...    b = unicodedata.normalize(norm, a)
...    print b, len(b)
... 
maçã 4
maçã 4
maçã 6
maçã 6 
```

然后，如果您检查两个字符（您的和 c + cedila）的 unicode 参考，您会发现后者具有前者缺少的“分解”规范：

[http://www.fileformat.info/info/unicode/char/153/index.htm](http://www.fileformat.info/info/unicode/char/153/index.htm)
[http://www.fileformat.info/info/unicode/char/00e7/index.htm](http://www.fileformat.info/info/unicode/char/00e7/index.htm)

它就像“œ”不正式等同于“oe” - （至少对于定义这个 unicode 部分的人来说不是） - 所以，规范化包含它的文本的方法是手动替换 char 为带有 unicode.replace 的序列 - 听起来很老套。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T04:10:36.417

正如 jsbueno 所说，有些字母只是没有兼容性分解。

您可以使用[Unicode CLDR Latin-ASCII 转换](http://unicode.org/repos/cldr/trunk/common/transforms/Latin-ASCII.xml)来生成手动替换的映射。

# c# - 数据绑定后更改 Datagridview 中的控件

> ID：12944682
> 
> 赞同：0
> 
> 时间：2012-10-17T22:58:23.487
> 
> 标签：c#, asp.net, sharepoint

我什至不确定这是否可行，但假设我使用了一个 Datatable 并将其绑定到我的 DataGridView。是否可以将第 3 列设置为下拉列表而不是显示一些文本？编辑：类似的问题，我的代码只是抓住第一个选中的复选框并忽略所有其他的？

```
 //Should iterate over every row      
  for(int i = 0; i < GridView1.Rows.Count; i++)
        {
//Grab the checkbox in the row
            CheckBox chkDelete = (CheckBox) GridView1.Rows[i].FindControl("opCheck");
            if(chkDelete != null)
            {
//If the checkbox exists, see if it is checked
                if(chkDelete.Checked)
                {
 //If it is checked, write out the SQL command and delete it from the database
                    //Write out the SQL command to delete whatever is checked
                    command = "SQL_STATEMENT";

                    cmd = new OleDbCommand(command, con);
                    //Execute the command and fill the data set
                    cmd.ExecuteNonQuery();

                    BindData();
                    cmd.Dispose();
                }
            }

        }
            con.Dispose();
            con.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:50:52.200

当然。如果您对每一列使用，则您可以更好地控制`ItemTemplate`每一列。然后将参数设置`OnDataBinding`为为每一行填充该列的方法。使用模板允许您为给定列定义几乎任何 ASP 或 HTML 元素。

# php - PHP：如何从递归函数返回多维数组

> ID：12944685
> 
> 赞同：0
> 
> 时间：2012-10-17T22:58:34.857
> 
> 标签：php, recursion

这是我的代码，我需要你的帮助来理解它。

```
<?php $tree = array(
array(
    'name' => 'Item-1', 
    'children' => array()),

array('name' => 'Item-2', 
    'children' => array(
    array('name' => 'Item-2-1', 
        'children' => array()),
)),
array('name' => 'Item-3', 
    'children' => array(
    array('name' => 'Item-3-1', 
        'children' => array()),

    array('name' => 'Item-3-2', 
        'children' => array(
        array('name' => 'Item-3-2-1', 
            'children' => array()),

        array('name' => 'Item-3-2-2', 
            'children' => array()),

        array('name' => 'Item-3-2-3', 
            'children' => array(
            array('name' => 'Item-3-2-3-1', 
                'children' => array()),
        )),
    )),
)), 
```

);

我需要的是一个递归函数，它将返回所有名称（名称）。例如：

```
Item-1
Item-2
Item-2-1
Item-3
Item-3-1
Item-3-2 
```

...........

我的尝试，但它似乎对我不起作用

```
function tree($tree){ 
    foreach ($tree as $key =>$value) { 
         foreach ($value as $key=>$value){ 
            echo "$value<br>"; } 
    echo "<br>"; } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:04:23.073

您可以使用`RecursiveArrayIterator`和`RecursiveIteratorIterator`

```
$ai = new RecursiveIteratorIterator(new RecursiveArrayIterator($tree));
echo "<pre>";
foreach ( $ai as $value ) {
    echo $value, PHP_EOL;
} 
```

输出

```
Item-1
Item-2
Item-2-1
Item-3
Item-3-1
Item-3-2
Item-3-2-1
Item-3-2-2
Item-3-2-3
Item-3-2-3-1 
```

[观看现场演示](http://codepad.viper-7.com/GRS20d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:04:36.733

来自[http://snipplr.com/view/10200/](http://snipplr.com/view/10200/)

```
// Recursively traverses a multi-dimensional array.
function traverseArray($array)
{ 
    // Loops through each element. If element again is array, function is recalled. If not, result is echoed.
    foreach($array as $key=>$value)
    { 
        if(is_array($value))
        { 
            traverseArray($value); 
        }else{
            echo $key." = ".$value."<br />\n"; 
        } 
    }
} 
```

另请参阅[Sum integers in 2d array using recursion?](https://stackoverflow.com/questions/3688902/sum-integers-in-2d-array-using-recursion)

# c++ - 在 C++ 中声明一个函数指针数组

> ID：12944689
> 
> 赞同：0
> 
> 时间：2012-10-17T22:58:55.577
> 
> 标签：c++, arrays, function, pointers, header-files

我正在开发一个带有 .h 文件和 .cpp 文件的项目。我正在编写一个函数，我想利用函数指针数组，其中数组中的每个函数都基于与枚举相关的条件被调用。我已经在我的 .h 文件中声明了 5 个函数和数组本身。我应该在哪个文件中将数组的每个值设置为等于相应的函数（.h 或 .cpp）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:03:14.447

如果数组定义本身在 .h 文件中，我预测您会遇到问题。

您应该在 .c 文件中**定义**数组（连同值的设置）。

并在 .h 文件中将数组**声明**为 extern，如下所示：

```
extern func_pointer_t array[]; 
```

但是全局变量通常是一个坏主意，您应该考虑提供一个 API 来从数组中获取函数指针。

```
func_pointer_t get(unsigned int i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:03:21.343

通常，变量赋值发生在“.cpp”文件中。如果你需要它全局，你可以把一些东西放在一个 .h 文件中。

另外，请注意，数组中只能存在一种函数指针类型。换句话说，所有函数必须具有相同的签名。

如果将数组更改为保存函数对象或指向函数对象的指针，则可以有多种从基本函数对象派生的函数对象。

另见`std::vector`和`std::map`。

# assembly - 使用 QWords

> ID：12944690
> 
> 赞同：1
> 
> 时间：2012-10-17T22:58:57.040
> 
> 标签：assembly, masm32

我正在学习并在此过程中进行大量使用 QWORD（x86-32 位）的汇编程序转换。现在，我的参考资料除了将它们拆分为 32 位寄存器之外，没有任何关于使用这些值的内容。我猜他们在老边。较新的处理器具有 mmx 和 sse 指令等。我会很好地研究那些解决这个问题的说明吗？处理 QWORD 值工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T02:53:46.937

使用 64 位整数可能容易也可能不容易；取决于您要执行的操作类型。

对于布尔算术（AND、OR、XOT、NOT），只需将其拆分即可轻松处理任何长度的整数。

对于加法和减法，很容易通过链接在一起`ADC`（加进位）或`SBB`（减法借位）指令来支持任何长度的整数。例如（128 位）：

```
add eax,[value]
adc ebx,[value+4]
adc ecx,[value+8]
adc edx,[value+12]  ;edx:ecx:ebx:eax = 128-bit result of addition 
```

否定只是减法（`-x = 0 - x`）。

对于左/右移位，很容易通过链接在一起`SHLD`或`SHRD`指令来支持任何长度的整数。例如（128 位）：

```
shld edx,ecx,12
shld ecx,ebx,12
shld ebx,eax,12
shl eax,12          ;edx:ecx:ebx:eax = 128-bit result of shift left by 12 
```

如果移位计数太大（例如，您想左移 44 位），则需要先移动数据，然后按“原始计数 MOD 32”移位。例如：

```
mov edx,ecx
mov ebx,ebx
mov ebx,eax
mov eax,0          ;edx:ecx:ebx:eax = original value shifted left by 32
shld edx,ecx,12
shld ecx,ebx,12
shld ebx,eax,12
shl eax,12         ;edx:ecx:ebx:eax = original value shifted left by 44 
```

对于乘法，CPU 支持“32 位 * 32 位 = 64 位结果”。对于任何更大的东西，您可以将任何宽度整数与任何宽度整数相乘。这就像您使用 base10（其中每个数字是 0 到 9 的值）手动乘以大数的方式，但您将使用 base4294967296（其中每个数字是 32 位整数）。例如，使用 base10 将 34 x 58 倍增，您可以：

```
result_digit0to1 = 4*8 = 32
result_digit1to2a = 4*5 = 20
result_digit1to2b = 3*8 = 24
result_digit2to3 = 3*5 = 15
result = result_digit0to1 + (result_digit1to2 + result_digit1to2) * 10 + result_digit2to3 * 100;
result = 32 + (20 + 24) * 10 + 15 * 100
result = 32 + 440 + 1500
result = 1972 
```

基本上，一个数字中的每个数字乘以另一个数字中的每个数字，同时跟踪数字的位置/大小；结果是中间结果的总和。

对于“64 位 * 64 位 = 128 = 位结果”，您可以执行以下操作：

```
result_bits0to63 = first_bits0to31 * second_bits0to31;
result_bits32to95a = first_bits32to64 * second_bits0to31;
result_bits32to95b = first_bits0to31 * second_bits32to64;
result_bits64to128 = first_bits32to64 * second_bits32to64;
result = result_bits0to63 + ( (result_bits32to95a + result_bits32to95b) << 32) + (result_bits64to128 << 64) 
```

但是，这只适用于无符号整数。对于有符号整数，您需要删除符号位并进行无符号乘法，然后在结果中设置符号 ( `result_sign_bit = first_sign_bit XOR second_sign_bit`)。

对于除法，您最终会执行“base2 长除法”。您将除数尽可能向左移动，而不会丢失最高设置位（同时跟踪“位移位”）。然后将其一次移回其原始位置，同时将其与被除的值进行比较。如果移位的除数小于被除的值，则从被除的值中减去移位的除数，并在结果中设置相应的位。除数回到原来的位置后，被除的值就变成了余数。

与乘法一样，除法仅适用于无符号整数，您需要事先删除符号位，然后进行无符号除法，然后设置符号（在结果和余数中）。

如果你明白这一切；那么您将能够（例如）使用 64 位 CPU 进行 512 位数学运算，或使用 16 位 CPU 进行 65536 位数学运算，或在任何 CPU 上进行“任何宽度”数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:08:36.933

最好的方法是使用与 QWORD 一起使用的指令，除非课程明确禁止这样做。然后，正如您所说，您将不得不使用 32 位寄存器来完成这项工作。您可以编写一些子程序来使用 QWORD 执行基本逻辑指令。

# javascript - 使用不同模板时不显示 Fancybox 关闭按钮

> ID：12944694
> 
> 赞同：0
> 
> 时间：2012-10-17T22:59:11.733
> 
> 标签：javascript, css, fancybox

我有一个页面，我需要为页面上的不同元素使用 2 种不同的 FancyBox 样式。为此，我添加了`tpl`选项并相应地修改了样式表。这是我所拥有的：

```
$(document).ready(function() {
$(".login").fancybox({
    closeClick  : false,
    closeBtn : true,
    tpl: {
        wrap     : '<div class="fancybox-wrap1" tabIndex="-1"><div class="fancybox-skin1"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
        closeBtn : '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>'
        }
    });
}); 
```

在我的 CSS 中，我为 .fancybox-wrap1 和 .fancybox-skin1 添加了新样式。样式在 FancyBox 上效果很好，但修改后的模板“关闭”按钮完全消失了！我尝试了添加和删除`closeBtn`，`tpl`但似乎没有任何区别。

[我在这里](http://veragdesigns.com/fancyclose)也有一个演示（最终我需要为 FancyBox 提供不同的背景图像，而不仅仅是背景颜色，这就是我这样做的原因）。

我究竟做错了什么？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:12:01.867

您的`.fancybox-skin1`div 仍然需要将`fancybox-skin`类应用于它。如果您查看 Fancybox 代码版本 2.1.2（有时这是在没有很好记录的情况下解决问题的唯一方法），您会发现它通过搜索该类（第 884 行）找到了皮肤：

```
$.extend(coming, {
                skin  : $('.fancybox-skin',  coming.wrap),
                outer : $('.fancybox-outer', coming.wrap),
                inner : $('.fancybox-inner', coming.wrap)
            }); 
```

然后它使用该引用来附加 closeBtn（第 1440 行）：

```
// Create a close button
            if (current.closeBtn) {
                $(current.tpl.closeBtn).appendTo(F.skin).bind('click.fb', F.close);
            } 
```

# php - PHP 5.2 版本的年、月和日这两个 PHP 时间之间的差异

> ID：12944698
> 
> 赞同：1
> 
> 时间：2012-10-17T22:59:16.947
> 
> 标签：php, date, php-5.2

# 向前：

我已经浏览了有关此问题的现有问题/答案。这不是一个两面派的问题；我无法从接受的答案中找到可行的解决方案。

我回顾的主要问题/答案可以在这里找到： [如何使用 PHP 计算两个日期之间的差异？](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

# 我需要的：

计算两个日期之间的差异，表示为年、月和日**，适用于 PHP 版本：5.2**。

```
<?php
$current_date = date('d-M-Y');
$future_date = '2012-11-01';
?> 
```

# 我试过的：

1.  我在网上找到的大多数答案似乎并不准确，因为它们没有考虑闰年。
2.  [这个](https://stackoverflow.com/a/3923228/835950)高度评价的答案不起作用，因为 DateTime->diff() 是 php 5.3+。
3.  [这个](https://stackoverflow.com/a/676828/835950)公认的答案（即针对 PHP 5.2 的第二个代码块）导致解析以下内容：

    数组 ( [y] => 25 [m] => 11 [d] => 7 [h] => 3 [i] => 15 [s] => 19 [invert] => 0 [days] => 9473 ) 数组 ( [y] => 25 [m] => 11 [d] => 7 [h] => 3 [i] => 15 [s] => 19 [invert] => 1 [days] =>第9473章

我不知道我是否错误地应用了代码，或者这只是我不知道如何操作数组的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:07:01.313

您是否在[手册页`DateTime::diff()`](http://www.php.net/manual/en/datetime.diff.php#107434)上看到此评论？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-14T13:59:28.093

我也在做同样的事情。这可能有效！首先，您需要创建日期。

```
$date1=date_create("2012-03-15");
$date2=date_create("2013-03-15"); 
```

[这是手册！](http://www.w3schools.com/php/func_date_date_create.asp) 然后找到日期之间的差异并打印所需的结果使用这个！

```
$dif=date_diff($date1,$date2); //Will calculate the difference between two dates.
$days = $dif->days; //Days
$years = round($age/365); //Converting days to years and rounding them up.
$months = $difference/30; // Converting to months.
echo "Days =>".$days;
echo "Years =>".$years;
echo "Months =>".$months; 
```

现在，您将得到的答案将不准确，因为其中没有计算闰年的方法，但如果精度不是您要寻找的，那么这肯定会奏效！我知道这个问题很久以前就被问过了，但在我的辩护中，我刚刚看到了！

# php - Mysqli 准备好的插入语句总是返回 false

> ID：12944699
> 
> 赞同：1
> 
> 时间：2012-10-17T22:59:24.063
> 
> 标签：php, mysql, statements

我正在编写准备好的语句，这些语句应该在变量 $GLOBALS['mysqli'] 中预先选择的数据库上将数据插入表中。连接已经过测试，这不是我遇到的问题。只有当我准备好的语句涉及 INSERT INTO 时，我才会遇到麻烦。我知道表名和字段名是正确的，但 $stmt 总是错误的。是什么赋予了？

```
$stmt = $GLOBALS['mysqli']->prepare("INSERT INTO audit_RefreshCount (user, count, lastrefresh) values (?,?,?)");
if ($stmt == TRUE) {
$stmt->bindParam('ssi', $_SESSION['username'], '0', time());
//$stmt->bind_Param('ssi', $_SESSION['username'], '0', time());     // Also doesn't work.
$stmt->execute();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:14:16.367

您的`if`条件是错误的，因为`prepare`方法返回`mysqli_stmt`类实例或`FALSE`. 所以，你应该像这样测试：

```
if ($stmt !== FALSE) {
    $stmt->bind_param('ssi', $_SESSION['username'], '0', time());
    $stmt->execute();
} else {
    // Could not prepare statement
} 
```

# c# - 动画 UI 时哪个更快：控件还是图片？

> ID：12944701
> 
> 赞同：0
> 
> 时间：2012-10-17T22:59:43.683
> 
> 标签：c#, winforms, animation, bitmap, controls

/我正在使用并在使用以下设备构建的计算机上进行测试：{1 GB RAM（现为 1.5 GB）、1.7 GHz Intel Pentium 处理器、ATI Mobility Radeon X600 GFX}

我需要缩放/转换控件并使其流畅。目前，我每 24-33 毫秒（30 fps）±3 像素处理一次控件的大小和位置。当我向图像添加“淡入淡出”效果时，它会平滑地淡入淡出，但它的大小只有 25x25 像素。控件的大小为 450x75 像素到 450x250 像素。在宝石迷阵 3 等 2D 游戏中，精灵的动画没有断断续续的动画。

所以正如标题所暗示的那样：在处理器上哪个更容易/更快：动画位图（在动画期间将其渲染到父控件）或动画控件它自己？

**编辑：** 嘿，我认为这是一个很有帮助的社区，而不是一个对似乎没有挑战性的问题进行评分的社区！（而且我在这里看到了更荒谬的问题，评分也更高！）请先给我留言，然后再对我的问题进行负面评价！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:58:29.980

*我设法在我的日程安排中找到了一些空闲时间，以快速启动一个新项目。我敢肯定我的时间本可以花在其他地方更好，但希望我的鞋子里的其他人可能会发现这个有用...*

答案是：图片优于控件。将位图渲染到画布上时，几乎不会触发任何事件（如果有的话）。至于控件，它充满了事件——一些链接，一些循环，以及递归的添加，所以一个简单的“LocationChanged”事件甚至不会覆盖引擎盖下实际发生的一半。

对于在运行时应用了很多动态动画的控件，我会做的是开发一个两部分集：控件 [渲染] 模板或活动界面（用于当控件处于静止状态或播放之前动画的），以及具有基本定义属性的动画结构，例如显示图像[渲染的控件]、矩形边界以及可能在以后应用的任何动画算法。

编辑：根据要求，这里是之前和之后的代码示例：

```
// This is the triggering event of the translating animation
private void object_Click(object sender, EventArgs e)
{
      // the starting point is at (75,75)
      element.Transform(new Point(500, 250));
} 
```

前：

```
public class ControlElement : UserControl
{
      private Timer tick;
      private Point pT0;
      public ControlElement() : base()
      {
            tick = new Timer();
            tick.Interval = 30; // about 30fps
            tick.Tick += new EventHandler(tick_Tick);
      }
      void tick_Tick(object sender, EventArgs e)
      {
            // get the new point from distance and current location/destination
            this.Location = Utils.Transform(this.Location, pT0, 3);
            if ((pT0.X - this.Location.X)+(pT0.Y - this.Location.Y) <= 0)
            {
                this.Location = pT0;
                tick.Stop();
                //this.Visible = true;
            }
      }
      public void Transform(Point destination)
      {
            pT0 = destination;
            //this.Visible = false;
            tick.Start();
      }
} 
```

`DrawToBitmap`之后：我创建了一个类，其中包含使用该功能的控件外观的图片。它仍然包含与上面相同的动画方法。我不得不添加`Location`and`LocationChanged`元素，因为这个类不再是一个控件。如果并且当需要访问实际控件时，我将停止渲染并显示它自身的控件实例。
这是渲染调用：

```
void element_LocationChanged(object sender, EventArgs e)
{
      canvas.Invalidate();
}
void canvas_Paint(object sender, PaintEventArgs e)
{
      if (element != null)
      {
            Bitmap bmp = new Bitmap(element.Display);
            Pen p = new Pen(Color.FromArgb(128, 128, 128), 1);
            e.Graphics.DrawImage(bmp, element.Location);
            e.Graphics.DrawRectangle(p, 
                 element.Location.X, element.Location.Y, 
                 bmp.Width, bmp.Height);
      }
} 
```

# jquery - 使用 jQuery 和 AJAX 返回 mySQL 错误

> ID：12944702
> 
> 赞同：0
> 
> 时间：2012-10-17T22:59:43.907
> 
> 标签：jquery, mysql, ajax

我有一个将数据插入 mySQL 的表单。它可以工作，但我正在尝试添加错误处理以防万一。如果我打破插入语句 mySQL 死了，但我仍然在前端收到成功消息。我究竟做错了什么？

AJAX

```
 function postData(){
  var employeeName = jQuery('#employeeName').val();
  var hireDate = jQuery('#hireDate').val();
  var position = jQuery('#position').val();
  var location = jQuery('#location').val();
  var interveiwer = jQuery('#interviewersID').val();
  var q01 = jQuery('#q01').val();
  var q02 = jQuery('#q02').val();
  var q03 = jQuery('#q03').val();
  var q04 = jQuery('#q04').val();
  var q05 = jQuery('#q05').val();
  var summary = jQuery('#summary').val();

  jQuery.ajax({
      type: 'POST',
      url: 'queryDay.php',
      data: 'employeeName='+ employeeName +'&hireDate='+ hireDate +'&position='+ position +'&location='+ location +'&interveiwer='+ interveiwer +'&q01='+ q01 +'&q02='+ q02 +'&q03='+ q03 +'&q04='+ q04 +'&q05='+ q05 +'&summary='+ summary,
      success: function(){
          jQuery('#formSubmitted').show();
      },
      error: function(jqXHR, textStatus, errorThrown){
          jQuery('#returnError').html(errorThrown);
          jQuery('#formError').show();
      }
  });
}; 
```

PHP

```
require_once 'config.php';

$employeeName = $_POST['employeeName'];
$hireDate = $_POST['hireDate'];
$position = $_POST['position'];
$location = $_POST['location'];
$interviewerID = $_POST['interveiwer'];
$q01 = $_POST['q01'];
$q02 = $_POST['q02'];
$q03 = $_POST['q03'];
$q04 = $_POST['q04'];
$q05 = $_POST['q05'];
$summary = $_POST['summary'];

mysql_query("INSERT INTO employee (name, hiredate, position, location) VALUES ('$employeeName', '$hireDate', '$position', '$location')") or die (mysql_error());

$employeeID = mysql_insert_id();

mysql_query("INSERT INTO day (employee, interviewer, datetaken, q01, q02, q03, q04, q05, summary) VALUES ('$employeeID', '$interviewerID', NOW(), '$q01', '$q02', '$q03', '$q04', '$q05', '$summary')") or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:09:59.427

## 问题出在你的头上

mysql 错误页面返回 200 OK 标头。您需要将其更改为错误标头，jquery 会将其视为错误，否则它将认为这是成功的。

或者另一方面，您可以捕获 mysql 错误并返回一些文本，然后您可以捕获并读取客户端，但这将在成功处理程序中捕获。

# c++ - 使用 C++ 中的模板化方法可互换地传递函子和函数指针

> ID：12944703
> 
> 赞同：1
> 
> 时间：2012-10-17T22:59:45.057
> 
> 标签：c++, function, templates, functor

我目前有一个带有模板方法的模板类。与仿函数一起工作很好，但在编译函数时遇到了麻烦。

Foo.h

```
template <typename T>
class Foo {
   public:
   // Constructor, destructor, etc...
   template <typename Func>
   void bar(T x, Func f);
};

template <typename T>
template <typename Func>
void Foo<T>::bar(T x, Func f) { /* some code here */ } 
```

主文件

```
#include "Foo.h"
template <typename T>
class Functor {
    public:
    Functor() {}
    void operator()(T x) { /* ... */ }
    private:
    /* some attributes here */
};

template <typename T>
void Function(T x) { /* ... */ } 

int main() {
   Foo<int> foo;
   Functor<int> F;
   foo.bar(2, F); // No problem
   foo.bar(2, Function); // <unresolved overloaded function type>
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:09:17.943

如果你想获得一个重载函数的函数指针，你需要告诉系统你想要重载集中的哪个函数：

```
foo.bar(2, static_cast<void(*)(int)>(&Function); 
```

在引用的情况下，该函数实际上是一个模板，即，您也可以直接参考其特化：

```
foo.bar(2, &Function<int>); 
```

# java - JavaFX dtjava.js 的最小化源？

> ID：12944704
> 
> 赞同：7
> 
> 时间：2012-10-17T23:00:06.077
> 
> 标签：java, javascript, javafx

对于与 JavaFX 一起使用，http://java.com/js/dtjava.js 的最小化源是否[可用](http://java.com/js/deployJava.txt)，类似于[http://java.com/js/deployJava.txt](http://java.com/js/dtjava.js)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T23:46:14.517

可从[open-jfx源代码库](http://hg.openjdk.java.net/openjfx)[获得 Java 8](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/modules/fxpackager/src/main/resources/resources/web-files/dtjava.js)的未最小化 dtjava.js源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T10:41:25.353

有一个很好的在线服务 - [http://jsbeautifier.org/](http://jsbeautifier.org/)只需粘贴缩小的代码并单击。Komodo IDE 中还有一个内置的格式化功能。

# iphone - iOS - 在单个单元格内显示对象数组 - 重复

> ID：12944710
> 
> 赞同：0
> 
> 时间：2012-10-17T23:00:25.243
> 
> 标签：iphone, ios, uitableview, ios6

我在这里没有找到任何好的资源，所以我认为把它放在外面会很棒......并阻止我把头发拉出来。

就像应用程序“议程”（日历应用程序）一样 - 我有一个表格视图，每个单元格代表一天。下一步是将 eventsArray 放置在适当的单元格内 - 通过 cellForRowAtIndexPath。

我只熟悉显示带有部分和行的 eventsArray - 使用每个 indexPath 来表示一个事件......而不是一个事件数组。（下面我为其他在该部门寻求帮助的人发布了工作代码，并作为参考）。

如果有人可以在单个单元格中放置一些代码来执行 eventsArray，那就太好了——我假设这是对我不熟悉的 cellForRowAtIndexPath 的使用。先感谢您。有什么问题就拍。

{

```
#pragma mark - TableView stuff

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    A1Section *a1section = [self.sections objectAtIndex:section]; 

    return [a1section.rows count];

}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.sections count];
}

-(NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    A1Section *a1section = [self.sections objectAtIndex:section];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"EEEE, MMM d, yyyy"];

    NSString *myDateString = [formatter stringFromDate:a1section.date];
    return [NSString stringWithFormat:@"%@", myDateString];
}

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section
{
    return 47;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 75;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UILabel *timeLabel = nil;
    UILabel *nameLabel = nil;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.backgroundColor = [UIColor redColor];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        timeLabel = [[UILabel alloc] initWithFrame:CGRectMake(11.0, 13.0, 55.0, 15.0)];
        [timeLabel setTag:1];
        [timeLabel setBackgroundColor:[UIColor clearColor]];
        timeLabel.textAlignment = UITextAlignmentLeft;
        [timeLabel setFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:14]];
        [timeLabel setTextColor:[UIColor blackColor]];

        [timeLabel setLineBreakMode:NSLineBreakByClipping];
        [timeLabel setNumberOfLines:1];
        [cell.contentView addSubview:timeLabel];

        nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(85.0, 11.0, 200.0, 20.0)]; //x = 80.0, width = 235
        [nameLabel setTag:2];
        [nameLabel setBackgroundColor:[UIColor clearColor]];
        nameLabel.textAlignment = UITextAlignmentLeft;
        [nameLabel setFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:17]]; 
        [nameLabel setTextColor:[UIColor blackColor]];

        [nameLabel setLineBreakMode:NSLineBreakByTruncatingTail];
        [nameLabel setNumberOfLines:1];
        [cell.contentView addSubview:nameLabel];

    } else {
        timeLabel = (UILabel *)[cell.contentView viewWithTag:1];
        nameLabel = (UILabel *)[cell.contentView viewWithTag:2];

    }

    A1Section *a1section = [self.sections objectAtIndex:indexPath.section];
    PFObject *object = [a1section.rows objectAtIndex:indexPath.row];

    NSDate *someDate = [object objectForKey:@"startDate"];
    NSString *time = [self.dateFormatter stringFromDate:someDate];
    [(UILabel *)[cell.contentView viewWithTag:1] setText:time];

    [(UILabel *)[cell.contentView viewWithTag:2] setText:[object objectForKey:@"textContent"]];

    return cell;

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:34:58.217

我不完全确定你在问什么，但我想你在问如何使用数组的内容在`cellForRowAtIndexPath`. 如果是这样，您将只有一个包含所需数据的数组属性。然后，在 中`cellForRowAtIndexPath`，您可以执行类似的操作

```
NSString *name = [self.dataArray objectAtIndex:indexPath.row];
nameLabel.text = name; 
```

这是否回答你的问题？

# spring - Is it possible to set a resource property value inside applicationcontext?

> ID：12944713
> 
> 赞同：1
> 
> 时间：2012-10-17T23:00:48.333
> 
> 标签：spring, applicationcontext

In an applicationcontext.xml, is it possible to set a value which can be used later in SPEL expressions?

For example is there a way to do this?:

```
<setProperty name="foo" value="someval" />

<bean id="beanId" name="beanName" class="SomeClass">
    <property name="someVal" value="blah_${foo}"/>
</bean> 
```

The actual reason I want to do this is that I use statements to create entity managers which are used in many different application contexts. The problem is that the entity managers require a unique name which is used by Bitronix to create a local file which breaks if multiple unit tests run at the same time using the same name for that field. To set that unique name I currently have a separate properties file for each application context and import it to get a unique name from it.

Rather than doing that nonsense I'd rather just do this:

```
<setProperty name="uniqueName" value="someUniqueName" />
<import resource="classpath*:shared/db/fooDb.xml" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T23:10:41.360

You can do this using Spring-el and util namespace:

```
<util:properties id="myprops">
    <prop key="foo">someval</prop>
</util:properties>

<bean id="beanId" name="beanName" class="SomeClass">
    <property name="someVal" value="blah_#{myprops.foo}"/>
</bean> 
```

# python - 从美丽的汤中获取信息并将其放入文本文件？

> ID：12944714
> 
> 赞同：1
> 
> 时间：2012-10-17T23:00:48.980
> 
> 标签：python, beautifulsoup, urllib

我已经开始学习如何使用 urllib 和 beautifulsoup 从网站上抓取信息。我想从该页面（在代码中）获取所有文本并将其放入文本文件中。

```
import urllib
from bs4 import BeautifulSoup as Soup
base_url = "http://www.galactanet.com/oneoff/theegg_mod.html"

url = (base_url)
soup = Soup(urllib.urlopen(url))

print(soup.get_text()) 
```

当我运行它时，它会抓取文本，尽管它在所有字母之间输出空格并且仍然显示 HTML，但不确定为什么。

```
i   n   '   >      Y   u   p   .       B   u   t       d   o   n      t       f   e   e 
```

像这样，有什么想法吗？

另外，我该怎么做才能将此信息放入文本文件中？

（使用 beautifulsoup4 并运行 ubuntu 12.04 和 python 2.7）

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:42:34.840

您可以尝试使用`html2text`：

```
import html2text as htmlconverter
print htmlconverter.html2text('<HTML><BODY>HI</BODY></HTML>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:56:58.460

我在编码时遇到了一些问题，所以我稍微更改了您的代码，然后添加了将结果打印到文件中的部分：

```
import urllib
from bs4 import BeautifulSoup as Soup

base_url = "http://www.galactanet.com/oneoff/theegg_mod.html"

url = (base_url)
content = urllib.urlopen(url)
soup = Soup(content)
# print soup.original_encoding
theegg_text = soup.get_text().encode("windows-1252")

f = open("somefile.txt", "w")
f.write(theegg_text);
f.close() 
```

# c# - 强制刷新到 Observable.Buffer c#

> ID：12944716
> 
> 赞同：5
> 
> 时间：2012-10-17T23:01:02.207
> 
> 标签：c#, c#-4.0, buffer, system.reactive

有没有办法强制 Observable.Buffer 在缓冲时间结束之前刷新？

在示例中：

`mSubscription = mFluxObservable.Buffer(new TimeSpan(0, 0, 1, 30)).Subscribe(o => saver(o, iSessionId));`

我想在 1:30 结束之前刷新数据！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T23:21:59.427

这对我有用：

```
var subject = new Subject<Unit>();
var closing = Observable
    .Timer(new TimeSpan(0, 0, 1, 30))
    .Select(x => Unit.Default);

var query =
    mFluxObservable
        .Buffer(() => Observable
            .Amb(subject, closing)
            .Take(1)); 
```

现在我只需要调用`subject.OnNext(Unit.Default)`强制缓冲区刷新。刷新后立即启动一个新缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T10:39:15.183

...和基本上相同的原则使用窗口：

```
var bufferPeriod = TimeSpan.FromSeconds(1.5);
var source = Observable.Interval(TimeSpan.FromMilliseconds(100)).Take(50);

//source.Buffer(bufferPeriod).Dump();

var bufferFlush = new Subject<long>();//Or Subject<Unit>
source.Window(
        ()=>Observable.Merge(Observable.Timer(bufferPeriod), bufferFlush))
    .Select(window=>window.ToList())
    .Dump();

//Simulate calling flush.
Observable.Interval(TimeSpan.FromMilliseconds(1350)).Take(2).Subscribe(bufferFlush); 
```

# c++ - 试图合并两个静态库

> ID：12944718
> 
> 赞同：3
> 
> 时间：2012-10-17T23:01:58.057
> 
> 标签：c++, static-libraries, unix-ar

我有一个问题，我想要一个我的代码的静态库，因为我经常使用这些代码。它是 c++（否则共享将是另一种选择）。但是该代码取决于其他静态库。因此，我发现我无法将静态库链接到另一个库。我找到[了如何将两个“ar”静态库合并为一个](https://stackoverflow.com/questions/3821916/how-to-merge-two-ar-static-libraries-into-one)。因此，我尝试了一个测试，但它不起作用，我想知道为什么以及如何正确地做。

我有两个静态库，每个库都有一个标头（未链接但用于实现），它的源具有一个简单的函数返回一些东西。Lib1 有一个函数，lib2 有一个依赖于 lib1 的函数，如果我链接 lib1 和 lib2，我的可执行文件 3.exe 会出现链接错误。lib1 的函数未引用。使用链接的内容，我自己编写了一个批处理脚本，它提取库的所有对象并快速将其添加到输出库中：

```
@ECHO OFF

SET ar="C:\Programme\CodeBlocks\MinGW\bin\ar.exe"

FOR %%i IN (%1) DO SET SPath=%%~di%%~pi

cd \
cd D:
cd %SPath%

SET output="%SPath%output.a"
del %output%

:top
IF (%1) == () GOTO end

del "%SPath%*.o"
ar x %1
ar q %output% *.o

SHIFT
GOTO top

:end

del *.o

ar t %output% 
```

script.bat libtest1.a libtest2.a

它的输出看起来很可靠：

```
D:\
D:\CodeBlocks Workspace\lib test\*.o konnte nicht gefunden werden
ar: creating D:\CodeBlocks Workspace\lib test\output.a
main1.o
main2.o 
```

我链接到输出而不是 lib1 和 lib2，但仍然未引用 lib1 的功能。

那么该怎么办 ？我不想一直包含整个代码。

# javascript - DevTools 如何确定对象的构造函数名称？

> ID：12944719
> 
> 赞同：12
> 
> 时间：2012-10-17T23:02:04.250
> 
> 标签：javascript, constructor, google-chrome-devtools

我正在使用 Chrome v22.0.1229.94 m，这并不重要，但以防万一:-)

*便携性与我无关。只要它适用于 Chrome（和 Safari），我就很高兴。*

我有两个函数，foo 和 bar：

```
var foo = function() {
  ...
}
function bar() {
  ...
} 
```

那么如果我使用它们创建对象：

```
f1 = new foo();
b1 = new bar(); 
```

我可以得到 bar 的构造函数名称，但不能得到 foo 的构造函数名称：

```
> f1.constructor.name  ==> ""
> b1.constructor.name  ==> "bar" 
```

**然而在这两种情况下，当我检查变量f1**和**b1**时，DevTools 控制台都会显示名称“foo”和“bar” 。

如何像 DevTools 那样提取**f1的****名称** *foo ？*

 **![在此处输入图像描述](../Images/de5f0ed08cae75ad9879f2c85c9d07a2.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T09:09:56.833

V8 可以在解析阶段执行函数名称推断，通过其 API 公开此信息。您将无法使用普通对象属性提取此信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T23:07:09.980

在 for 的情况下`foo`，您正在创建一个*函数表达式*。这意味着，您将一个*匿名函数*分配给一个变量。

你不能`name`像那样以编程方式解析函数，除非你给函数一个名字并创建一个“*命名函数表达式*”。

```
var foo = function foo() {
  ...
} 
```**

# android - 谷歌 C2DM 授权令牌

> ID：12944722
> 
> 赞同：0
> 
> 时间：2012-10-17T23:02:16.507
> 
> 标签：android, python, android-c2dm, urbanairship.com

我正在尝试为我的 android 应用程序设置城市飞艇，但我无法获得 Google C2DM 令牌。也许，根据 Urban Airship Doc，我在使用 C2DM 之前正在这样做。

- 在命令行上运行“clientauth.py”（位于分发 zip 文件中的“tools”目录中）

当我在 Mac OS X Lion 的终端上运行该文件时，出现此错误。有人可以帮我解决这个问题吗？先感谢您！

```
MacBook-Pro:~ me$ python /Users/me/Documents/ua-android-lib-latest/tools/clientauth.py
C2DM Google Account: my google email for c2dm
Password for my google email for c2dm: 
Traceback (most recent call last):
  File "/Users/me/Documents/ua-android-lib-latest/tools/clientauth.py", line 46, in <module>
    ClientLoginTokenFactory().getToken()
  File "/Users/me/Documents/ua-android-lib-latest/tools/clientauth.py", line 34, in getToken
    response = urllib2.urlopen(request)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 400, in open
    response = meth(req, response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 403: Forbidden 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:05:50.900

在您花太多时间在此之前，C2DM 已被弃用。您应该使用[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)。[Android 开发者网站](http://developer.android.com/guide/google/gcm/c2dm.html)上有迁移指南。

# python - Python - imaplib - 查看发给特定发件人的消息

> ID：12944727
> 
> 赞同：9
> 
> 时间：2012-10-17T23:02:56.663
> 
> 标签：python, gmail, imap

我有一个 python 脚本正在检查 Gmail 的 IMAP 服务器上的电子邮件，它显示服务器上的最新电子邮件。但是，该电子邮件地址正在接收来自多个不同帐户的电子邮件。我该怎么做才能获取此脚本并让它仅查看发往特定发件人的消息？例如，任何只发送到“johndoe@gmail.com”的电子邮件都会出现。

```
import imaplib

mail = imaplib.IMAP4_SSL('imap.gmail.com')
mail.login('myemail@gmail.com', 'password123')
mail.list()
# Out: list of "folders" aka labels in gmail.
mail.select("inbox") # connect to inbox.

result, data = mail.search(None, "ALL")

ids = data[0] # data is a list.
id_list = ids.split() # ids is a space separated string
latest_email_id = id_list[-1] # get the latest

result, data = mail.fetch(latest_email_id, "(RFC822)") # fetch the email body (RFC822) for the given ID

raw_email = data[0][1] # here's the body, which is raw text of the whole email
# including headers and alternate payloads 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T04:44:34.423

改变：

```
result, data = mail.search(None, "ALL") 
```

到：

```
result, data = mail.search(None, '(TO "johndoe@gmail.com")') 
```

# php - 重命名 900kb 的 pdf 文件需要很长时间

> ID：12944728
> 
> 赞同：8
> 
> 时间：2012-10-17T23:03:01.560
> 
> 标签：php, performance, file-rename

我正在尝试`rename()`使用 PHP 编写 900 KiB PDF 文件。由于某种原因，它需要很长时间才能重命名。我认为它应该是即时的。

这是在 CentOS 服务器上。在重命名文件时，我可以获得属性，并且似乎`rename()`正在复制旧文件并将其替换为新的重命名文件。

旧名称和新名称路径位于同一目录中。

有没有人偶然发现过这个问题？

* * *

## 代码：

```
 //If exists change name and then return path
    $pieces = explode("@", $filename);
    $newName = $pieces[0].' '.$pieces[2];

    rename($uidPath.$filename, $uidPath.$newName);

    if (preg_match('/pdf/', $pieces[2]))
    {
        $result['status'] = '1';
        $result['path'] = 'path to file';
    } 
    else 
    {
        $result['status'] = '1';
        $result['path'] = 'path to file';
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T19:51:53.257

出于某种原因，PHP 释放文件锁定的速度非常慢`fclose()`，因此如果您在移动文件之前写入文件，您可能需要稍等片刻。我在低优先级后台作业中遇到了这个问题，所以我并没有真正研究为什么会发生这种情况，或者我可以做些什么来防止它 - 我只是在`fclose()`and之间添加了 1 秒的睡眠时间`rename`。

# ruby-on-rails - 试图从应用程序控制器强制重定向到 https

> ID：12944736
> 
> 赞同：1
> 
> 时间：2012-10-17T23:03:22.190
> 
> 标签：ruby-on-rails

> **可能重复：**
> [为什么我在 Rails 应用程序中使用 force_ssl 获得无限重定向循环？](https://stackoverflow.com/questions/9448168/why-am-i-getting-infinite-redirect-loop-with-force-ssl-in-my-rails-app)

我的应用程序控制器中有这个：

```
before_filter :redirect_to_ssl!

def redirect_to_ssl!
  redirect_to "https://" + request.host + request.fullpath if !request.ssl? && Rails.env.production?
end 
```

但是，当我使用 https:// 查看我的网站（在生产模式下）时，它会进入重定向循环......看起来 request.ssl？即使我使用的是 https 协议，也返回 false ..... 现在，当我查看我的网站时，浏览器确实警告我无法验证我的 ssl 证书——我想知道这是否是 request.ssl 的原因？返回假？什么是好的解决方法？我应该检查一下 request.protocol == "https://" 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T02:24:35.163

不要在控制器中执行此操作。

相反，在`config/environments/production.rb`（以及您想要使用 SSL 的任何其他环境）中，执行以下操作：

```
config.force_ssl = true 
```

阅读更多关于[配置 Rails 3 以使用 HTTPS](http://www.simonecarletti.com/blog/2011/05/configuring-rails-3-https-ssl/)的信息。

# facebook - URL 方案后缀在 Facebook iOS SDK 3.1 中是否有效？

> ID：12944738
> 
> 赞同：2
> 
> 时间：2012-10-17T23:03:39.033
> 
> 标签：facebook, authentication, ios6, url-scheme

我正在尝试将我的应用程序从 iOS SDK 3.0 更新到 SDK 3.1，但在使 URL 方案后缀正常工作时遇到问题。我的应用程序有几个不同的 SKU，并且已经成功地将“ipad”和“iphone”的方案后缀与 pre-3.1 SDK 一起使用。

在实现 3.1 SDK 并获得读取权限时，Facebook 应用程序不再将我发送回我的应用程序（这是在 iOS6 中不使用集成 Facebook 登录时）。我注意到，如果我删除了 URL 方案后缀，登录过程会按预期工作，并且在对权限说“OK”后我会被发送回我的应用程序。只需将 info.plist 更改为不包含后缀即可使其工作；添加回来会破坏它。

那么我的问题是：URL 后缀是否适用于 3.1 更新的任何人？我无法确认他们是否在工作。该更新似乎确实改变了身份验证流程，但我不明白为什么会故意删除它。另外，Facebook上的这个错误是否相关？[http://developers.facebook.com/bugs/183527235116115](http://developers.facebook.com/bugs/183527235116115)

最后，既然我觉得在这个问题解决之前我不能更新，那么不立即更新 SDK 会有什么后果呢？我讨厌我的应用程序崩溃，因为旧的身份验证方法被杀死了。Facebook 是否有关于旧身份验证何时不可用的路线图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:53:40.233

检查这些事情：

*   您的应用程序的 info.plist 文件中有一个 FacebookAppID 属性

*   你有一个为你的应用定义的 URL Scheme。此方案必须包含您要使用的后缀。

*   在调用 FB API 之前设置 URL Scheme 后缀。

*   URL Scheme 后缀仅包含小写字母（没有破折号等特殊字符；没有空格）

我被最后一点卡住了大约一天！

编辑：plist 中的 FacebookID 应称为 FacebookAppID（类型字符串）

rgds

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T13:30:45.293

您究竟是如何创建和打开会话的？

我认为您必须使用两步法：

1.  initWithAppID:permissions:urlSchemeSuffix:tokenCacheStrategy:
2.  openWithCompletionHandler：

我不确定这是否已从 SDK 的 3.0 版本更改为 3.1 版本。

# php - PHP each 和静态数组声明

> ID：12944739
> 
> 赞同：2
> 
> 时间：2012-10-17T23:03:41.097
> 
> 标签：php

因此，我编写了一些相当复杂的“功能性”PHP 代码来对数组执行折叠。别担心，我不会在任何地方使用它。问题是，PHP 的“每个”函数似乎只到达数组的末尾，因为它是静态声明的（实际上，见底部）。

```
// declare some arrays to fold with
$six = array("_1_","_2_","_3_","_4_","_5_","_6_");

// note: $ns = range(0,100) won't work at all--lazy evaluation?
$ns = array(1,2,3,4,5,6,7,8);
$ns[8] = 9; // this item is included

// add ten more elements to $ns. each can't find these
for($i=0; $i<10; ++$i)
    $ns[] = $i;

// create a copy to see if it fixes 'each' problem
$ms = $ns;
$ms[0] = 3; // Just making sure it's actually a copy

$f   = function( $a, $b ) { return $a . $b; };
$pls = function( $a, $b ) { return $a + $b; };

function fold_tr( &$a, $f )
{
    $g = function ( $accum, &$a, $f ) use (&$g)
    {
        list($dummy,$n) = each($a);
        if($n)
        {
            return $g($f($accum,$n),$a,$f);
        }
        else
        {
            return $accum;
        }
    };
    reset($a);
    return $g( NULL, $a, $f );
}

echo "<p>".fold_tr( $six, $f  )."</p>"; // as expected: _1__2__3__4__5__6_
echo "<p>".fold_tr( $ns, $pls )."</p>"; // 45 = sum(1..9)
echo "<p>".fold_tr( $ms, $pls )."</p>"; // 47 = 3 + sum(2..9) 
```

老实说，我不知道每个人如何保持自己的状态。充其量似乎是退化的，因为语言中有更好的（非魔法）机制来遍历列表，但是有谁知道为什么它会使用`$a[$index] = value`而不是'$a [] = value'来注册添加到数组中的项目？在此先感谢您对此行为的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:21:13.393

由于 PHP 的弱类型，您的循环提前退出：

```
if($n)
{
    return $g($f($accum,$n),$a,$f);
}
else
{
    return $accum;
} 
```

当`$n`是`0`（例如`$ns[9]`），条件将失败并且您的循环将终止。使用以下方法修复：

```
if($n !== null) 
```

# java - Java初学者评分程序按钮开发

> ID：12944744
> 
> 赞同：0
> 
> 时间：2012-10-17T22:50:07.977
> 
> 标签：java, user-interface

我正在尝试将“绿色团队”添加到我在网上找到的示例评分 GUI。出于某种原因，代码可以编译，但它只与最初的两个团队一起运行。我已经尝试过一些笨拙的尺寸/位置，并且由于这些修改没有观察到任何变化（根本没有变化），我承认我必须缺少一些必要的属性或其他东西。有什么帮助吗？这是代码：

```
import javax.swing.*;

import java.awt.Color;

import java.awt.event.ActionListener;

import java.awt.event.ActionEvent;

public class ButtonDemo_Extended3 implements  ActionListener{

    // Definition of global values and items that are part of the GUI.

    int redScoreAmount = 0;

    int blueScoreAmount = 0;
    int greenScoreAmount = 0;

    JPanel titlePanel, scorePanel, buttonPanel;

    JLabel redLabel, blueLabel,greenLabel, redScore, blueScore, greenScore;

    JButton redButton, blueButton, greenButton,resetButton;

    public JPanel createContentPane (){

        // We create a bottom JPanel to place everything on.

        JPanel totalGUI = new JPanel();

        totalGUI.setLayout(null);

        // Creation of a Panel to contain the title labels

        titlePanel = new JPanel();

        titlePanel.setLayout(null);

        titlePanel.setLocation(0, 0);

        titlePanel.setSize(500, 500);

        totalGUI.add(titlePanel);

        redLabel = new JLabel("Red Team");

        redLabel.setLocation(300, 0);

        redLabel.setSize(100, 30);

        redLabel.setHorizontalAlignment(0);

        redLabel.setForeground(Color.red);

        titlePanel.add(redLabel);

        blueLabel = new JLabel("Blue Team");

        blueLabel.setLocation(900, 0);

        blueLabel.setSize(100, 30);

        blueLabel.setHorizontalAlignment(0);

        blueLabel.setForeground(Color.blue);

        titlePanel.add(blueLabel);

    greenLabel = new JLabel("Green Team");

        greenLabel.setLocation(600, 0);

        greenLabel.setSize(100, 30);

        greenLabel.setHorizontalAlignment(0);

        greenLabel.setForeground(Color.green);

        titlePanel.add(greenLabel);

        // Creation of a Panel to contain the score labels.

        scorePanel = new JPanel();

        scorePanel.setLayout(null);

        scorePanel.setLocation(10, 40);

        scorePanel.setSize(500, 30);

        totalGUI.add(scorePanel);

        redScore = new JLabel(""+redScoreAmount);

        redScore.setLocation(0, 0);

        redScore.setSize(40, 30);

        redScore.setHorizontalAlignment(0);

        scorePanel.add(redScore);

    greenScore = new JLabel(""+greenScoreAmount);

        greenScore.setLocation(60, 0);

        greenScore.setSize(40, 30);

        greenScore.setHorizontalAlignment(0);

        scorePanel.add(greenScore);

        blueScore = new JLabel(""+blueScoreAmount);

        blueScore.setLocation(130, 0);

        blueScore.setSize(40, 30);

        blueScore.setHorizontalAlignment(0);

        scorePanel.add(blueScore);

        // Creation of a Panel to contain all the JButtons.

        buttonPanel = new JPanel();

        buttonPanel.setLayout(null);

        buttonPanel.setLocation(10, 80);

        buttonPanel.setSize(2600, 70);

        totalGUI.add(buttonPanel);

        // We create a button and manipulate it using the syntax we have

        // used before. Now each button has an ActionListener which posts 

        // its action out when the button is pressed.

        redButton = new JButton("Red Score!");

        redButton.setLocation(0, 0);

        redButton.setSize(30, 30);

        redButton.addActionListener(this);

        buttonPanel.add(redButton);

        blueButton = new JButton("Blue Score!");

        blueButton.setLocation(150, 0);

        blueButton.setSize(30, 30);

        blueButton.addActionListener(this);

        buttonPanel.add(blueButton);

    greenButton = new JButton("Green Score!");

        greenButton.setLocation(250, 0);

        greenButton.setSize(30, 30);

        greenButton.addActionListener(this);

        buttonPanel.add(greenButton);

        resetButton = new JButton("Reset Score");

        resetButton.setLocation(0, 100);

        resetButton.setSize(50, 30);

        resetButton.addActionListener(this);

        buttonPanel.add(resetButton);

        totalGUI.setOpaque(true);

        return totalGUI;

    }

    // This is the new ActionPerformed Method.

    // It catches any events with an ActionListener attached.

    // Using an if statement, we can determine which button was pressed

    // and change the appropriate values in our GUI.

    public void actionPerformed(ActionEvent e) {

        if(e.getSource() == redButton)

        {

            redScoreAmount = redScoreAmount + 1;

            redScore.setText(""+redScoreAmount);

        }

        else if(e.getSource() == blueButton)

        {

            blueScoreAmount = blueScoreAmount + 1;

            blueScore.setText(""+blueScoreAmount);

        }
    else if(e.getSource() == greenButton)

        {

            greenScoreAmount = greenScoreAmount + 1;

            greenScore.setText(""+greenScoreAmount);

        }

        else if(e.getSource() == resetButton)

        {

            redScoreAmount = 0;

            blueScoreAmount = 0;
        greenScoreAmount = 0;

            redScore.setText(""+redScoreAmount);

            blueScore.setText(""+blueScoreAmount);
        greenScore.setText(""+greenScoreAmount);

        }

    }

    private static void createAndShowGUI() {

        JFrame.setDefaultLookAndFeelDecorated(true);

        JFrame frame = new JFrame("[=] JButton Scores! [=]");

        //Create and set up the content pane.

        ButtonDemo_Extended demo = new ButtonDemo_Extended();

        frame.setContentPane(demo.createContentPane());

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setSize(1024, 768);

        frame.setVisible(true);

    }

    public static void main(String[] args) {

        //Schedule a job for the event-dispatching thread:

        //creating and showing this application's GUI.

        SwingUtilities.invokeLater(new Runnable() {

            public void run() {

                createAndShowGUI();

            }

        });

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:25:22.497

```
import javax.swing.*;

import java.awt.Color;
import java.awt.FlowLayout;

import java.awt.event.ActionListener;

import java.awt.event.ActionEvent;

public class ButtonDemo_Extended3 implements  ActionListener{

// Definition of global values and items that are part of the GUI.

int redScoreAmount = 0;

int blueScoreAmount = 0;
int greenScoreAmount = 0;

JPanel titlePanel, scorePanel, buttonPanel;

JLabel redLabel, blueLabel,greenLabel, redScore, blueScore, greenScore;

JButton redButton, blueButton, greenButton,resetButton;

public JPanel createContentPane (){

    // We create a bottom JPanel to place everything on.

    JPanel totalGUI = new JPanel();

    totalGUI.setLayout(null);

    // Creation of a Panel to contain the title labels

    titlePanel = new JPanel();

    titlePanel.setLayout(new FlowLayout());

    titlePanel.setLocation(0, 0);

    titlePanel.setSize(500, 500);

    redLabel = new JLabel("Red Team");

    redLabel.setLocation(300, 0);

    redLabel.setSize(100, 30);

    redLabel.setHorizontalAlignment(0);

    redLabel.setForeground(Color.red);

    titlePanel.add(redLabel, 0 );

    blueLabel = new JLabel("Blue Team");

    blueLabel.setLocation(900, 0);

    blueLabel.setSize(100, 30);

    blueLabel.setHorizontalAlignment(0);

    blueLabel.setForeground(Color.blue);

    titlePanel.add(blueLabel, 1);

greenLabel = new JLabel("Green Team");

    greenLabel.setLocation(600, 0);

    greenLabel.setSize(100, 30);

    greenLabel.setHorizontalAlignment(0);

    greenLabel.setForeground(Color.green);

    titlePanel.add(greenLabel);

    // Creation of a Panel to contain the score labels.

    scorePanel = new JPanel();

    scorePanel.setLayout(null);

    scorePanel.setLocation(10, 40);

    scorePanel.setSize(500, 30);

    redScore = new JLabel(""+redScoreAmount);

    redScore.setLocation(0, 0);

    redScore.setSize(40, 30);

    redScore.setHorizontalAlignment(0);

    scorePanel.add(redScore);

greenScore = new JLabel(""+greenScoreAmount);

    greenScore.setLocation(60, 0);

    greenScore.setSize(40, 30);

    greenScore.setHorizontalAlignment(0);

    scorePanel.add(greenScore);

    blueScore = new JLabel(""+blueScoreAmount);

    blueScore.setLocation(130, 0);

    blueScore.setSize(40, 30);

    blueScore.setHorizontalAlignment(0);

    scorePanel.add(blueScore);

    // Creation of a Panel to contain all the JButtons.

    buttonPanel = new JPanel();

    buttonPanel.setLayout(null);

    buttonPanel.setLocation(10, 80);

    buttonPanel.setSize(2600, 70);

    // We create a button and manipulate it using the syntax we have

    // used before. Now each button has an ActionListener which posts 

    // its action out when the button is pressed.

    redButton = new JButton("Red Score!");

    redButton.setLocation(0, 0);

    redButton.setSize(30, 30);

    redButton.addActionListener(this);

    buttonPanel.add(redButton);

    blueButton = new JButton("Blue Score!");

    blueButton.setLocation(150, 0);

    blueButton.setSize(30, 30);

    blueButton.addActionListener(this);

    buttonPanel.add(blueButton);

greenButton = new JButton("Green Score!");

    greenButton.setLocation(250, 0);

    greenButton.setSize(30, 30);

    greenButton.addActionListener(this);

    buttonPanel.add(greenButton);

    resetButton = new JButton("Reset Score");

    resetButton.setLocation(0, 100);

    resetButton.setSize(50, 30);

    resetButton.addActionListener(this);

    buttonPanel.add(resetButton);

    totalGUI.setOpaque(true);

    totalGUI.add(buttonPanel);
    totalGUI.add(scorePanel);
    totalGUI.add(titlePanel);

    return totalGUI;

}

// This is the new ActionPerformed Method.

// It catches any events with an ActionListener attached.

// Using an if statement, we can determine which button was pressed

// and change the appropriate values in our GUI.

public void actionPerformed(ActionEvent e) {

    if(e.getSource() == redButton)

    {

        redScoreAmount = redScoreAmount + 1;

        redScore.setText(""+redScoreAmount);

    }

    else if(e.getSource() == blueButton)

    {

        blueScoreAmount = blueScoreAmount + 1;

        blueScore.setText(""+blueScoreAmount);

    }
else if(e.getSource() == greenButton)

    {

        greenScoreAmount = greenScoreAmount + 1;

        greenScore.setText(""+greenScoreAmount);

    }

    else if(e.getSource() == resetButton)

    {

        redScoreAmount = 0;

        blueScoreAmount = 0;
    greenScoreAmount = 0;

        redScore.setText(""+redScoreAmount);

        blueScore.setText(""+blueScoreAmount);
    greenScore.setText(""+greenScoreAmount);

    }

}

private static void createAndShowGUI() {

    JFrame.setDefaultLookAndFeelDecorated(true);

    JFrame frame = new JFrame("[=] JButton Scores! [=]");

    //Create and set up the content pane.

    ButtonDemo_Extended3 demo = new ButtonDemo_Extended3();

    frame.setContentPane(demo.createContentPane());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.setSize(1024, 768);

    frame.setVisible(true);

}

public static void main(String[] args) {

    //Schedule a job for the event-dispatching thread:

    //creating and showing this application's GUI.

    SwingUtilities.invokeLater(new Runnable() {

        public void run() {

            createAndShowGUI();

        }

    });

}

} 
```

您必须使用布局管理器才能显示您的小部件。在这种情况下，我使用了 FlowLayout()。此外，请确保先在面板中添加元素，然后再将面板添加到其父面板。

现在，代码可以按照您的需要工作，但是您应该再次使用特定的布局来安排框架内的面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:13:25.353

如果我在未修改的情况下运行您的代码，我只会看到“红队”标签，以及一些太小而无法阅读文本的按钮（其中一些仅在鼠标悬停时才会出现）。

如果您注释掉所有空布局：

```
 //buttonPanel.setLayout(null); 
```

然后所有三个按钮和标签都会正确显示。

不使用布局管理器并使用绝对定位是可能的（请参阅[Java Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)页面关于这个确切的主题），但通常不推荐。在 Swing 教程[的容器内布局组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)课程中有很多关于使用布局管理器的信息。

# c# - 在 C# 中添加多个字节数组

> ID：12944749
> 
> 赞同：1
> 
> 时间：2012-10-17T22:53:23.450
> 
> 标签：c#, arrays, binary, byte

我正在开发一个使用字节数组作为权限级别的遗留系统。
示例：
00 00 00 00 00 00 00 01 表示他们有“完全控制”
00 00 00 00 00 00 00 02 表示他们有“添加控制”
00 00 00 00 00 00 00 04 表示他们有“删除控制”

因此，如果用户拥有“00 00 00 00 00 00 00 07”，则意味着他们拥有全部 3 个（据已向我解释）。

现在，我的问题是我需要知道在创建/检查记录时如何到达“0x07”。
我不知道实际组合 0x01、0x02 和 0x04 的语法，所以我得出了 0x07。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:03:50.660

你或他们在一起：

```
0x01 | 0x02 | 0x04 == 0x07 
```

如果要检查候选字节中的各个位`b`：

```
Full Control   == b & 0x01
Add Control    == b & 0x02
Delete Control == b & 0x04 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:15:35.510

OR 运算符是您正在寻找的。

IMO，一种处理它的干净方法是使用枚举：

```
[Flags]
public enum Permisions
{
    FullControl = 0x1,
    AddControl = 0x2,
    DeleteControl = 0x4
} 
```

然后，在您的代码中，您可以执行以下操作：

```
Permissions userPermissions = Permissions.AddControl | Permissions.DeleteControl;
bool canDelete = userPermissions.HasFlag(Permissions.DeleteControl); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:21:10.050

您还可以使用[`BitConverter.ToUInt64`](http://msdn.microsoft.com/en-us/library/system.bitconverter.touint64.aspx). 之后，您将能够对这些 ulong 使用常规的按位运算，并在[`BitConverter.GetBytes`](http://msdn.microsoft.com/en-us/library/d8z32tce.aspx)必要时使用将结果转换回字节数组。

如果您必须重复处理权限，您可能希望为此实现一个小型包装器。

# python - EasyGUI缩进错误，我不知道为什么

> ID：12944753
> 
> 赞同：0
> 
> 时间：2012-10-17T23:05:20.937
> 
> 标签：python, easygui

```
#!/usr/bin/env python
import easygui as eg

start = eg.msgbox('In your head, pick a number between 1 and 100\. No matter what, I will guess it in no more than 7 tries. When you think of a number, press OK to start the program.')

maximum = 100
minimum = 0
middle = (maximum-minimum)/2
attempt= 1
while True:
    if attempt > 7:
        eg.msgbox('You cheated. Terminating...')
        break
    else:   
        yon = eg.boolbox("Is your number: " + str(middle) + '?', 'Guess Result',('Yes','No'))
        if yon == 1:
            eg.msgbox("Found in " + str(attempt) + " try!")
            break
        if yon == 0:
            choice = eg.boolbox("Was my guess..." , 'High or Low?' , ('High' , 'Low')
        if choice == 0:
            minimum = middle
            middle = int(round(float(maximum+minimum)/2))
        elif choice == 1:
            maximum = middle
            middle = int(round(float(maximum+minimum)/2))
        else:
            eg.msgbox"Enter valid input!";"Lets start again from the last step"
            continue
        attempt+= 1 
```

好的，我在第 20 行不断收到缩进错误。我想不通。我的语法看起来不错。我回去删除了所有缩进并重新缩进（以确保混合中没有空格）。为什么给我这个？我该如何解决？

最让我困惑的是我写了相同的代码，但没有导入 EasyGUI 模块，也没有修改 EasyGUI，但除此之外它是相同的代码。if/elif/else 在同一个位置，除了 'eg.msgbox' 省略了 'print' 命令和 raw_input's 被替换为 'boolbox' 之外，一切都相同。

编辑 - 第 20 行是：

```
 if yon == 0: 
```

线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:06:46.560

```
if yon == 0:
    choice = eg.boolbox("Was my guess..." , 'High or Low?' , ('High' , 'Low') 
```

您错过了一个右括号。

```
choice = eg.boolbox("Was my guess..." , 'High or Low?' , ('High' , 'Low')) 
```

另外，检查你的最后一个`else:`. 它应该是： -

```
else:
    eg.msgbox("Enter valid input!","Lets start again from the last step")
    continue 
```

你没有`if`正确缩进你的最后一个： -

```
 if yon == 0:
        choice = eg.boolbox("Was my guess..." , 'High or Low?' , ('High' , 'Low')
    if choice == 0:
        minimum = middle
        middle = int(round(float(maximum+minimum)/2))
    elif choice == 1:
        maximum = middle
        middle = int(round(float(maximum+minimum)/2))
    else:
        eg.msgbox"Enter valid input!";"Lets start again from the last step"
        continue 
```

你的一切`if-elif-else`都应该在你的外部如果。您正在检查其中定义的变量的条件..因此将您的结构重新缩进：-

```
if yon == 0:
    choice = eg.boolbox("Was my guess..." , 'High or Low?' , ('High' , 'Low')
    if choice == 0:
        minimum = middle
        middle = int(round(float(maximum+minimum)/2))
    elif choice == 1:
        maximum = middle
        middle = int(round(float(maximum+minimum)/2))
    else:
        eg.msgbox"Enter valid input!";"Lets start again from the last step"
        continue 
```

# algorithm - 使用“最合适的”公斤/兆/等乘数打印整数

> ID：12944756
> 
> 赞同：0
> 
> 时间：2012-10-17T23:05:49.997
> 
> 标签：algorithm, formatting, number-formatting

> **可能重复：**
> [如何在 java 中将字节大小转换为人类可读的格式？](https://stackoverflow.com/questions/3758606/how-to-convert-byte-size-into-human-readable-format-in-java)

给定一个整数，我想使用公斤、兆、千兆等乘数以人类可读的方式打印它。如何选择“最佳”乘数？

这里有些例子

```
 1 print as 1
    12345 print as 12.3k
987654321 print as 988M 
```

理想情况下，打印的位数应该是可配置的，例如在最后一个示例中，3 位将导致 988M，2 位将导致 1.0G，1 位将导致 1G，4 位将导致 987.7M。

示例：我认为，当 OSX 告诉我必须复制多少字节时，Apple 使用了这种算法。

这将适用于 Java，但我对算法比对语言更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:14:24.137

作为起点，您可以使用 Math.log() 函数来获取值的“大小”，然后使用某种形式的关联容器作为后缀（k、M、G 等）。

var 幅度 = Math.log(value) / Math.log(10);

希望这会有所帮助

# c - 从C中的文件中读取整数

> ID：12944758
> 
> 赞同：0
> 
> 时间：2012-10-17T23:06:15.220
> 
> 标签：c, file, scanf

我已经为此苦苦挣扎了很长时间，试图弄清楚，我猜这是一个非常愚蠢的菜鸟错误，但我无法弄清楚。

所以我试图从一个文件中读取一个整数，然后在其中做一些操作，为了这个问题，我只是想在这里输出它：

```
FILE * pFile;
int number;
pFile = fopen ("myfile.txt","r");
if (pFile!=NULL) {
fscanf(pFile, "%d", number);
fclose (pFile);
}
printf("number: %i", number);
return 0; 
```

myfile.txt 的内容：

```
123 
```

但是当我运行它时，它什么也没读，而是说

```
RUN FAILED (exit value 1, total time: 32ms) 
```

感谢您的任何帮助

编辑：我忘了提，它作为一个字符串工作，它读取正确的数字，但我不能对其进行任何操作，如果我将数字类型设置为加倍它也可以工作，但会输出数百万的随机数。 ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:07:59.430

您需要将 int 变量的地址传递给 fscanf

```
fscanf(pFile, "%d", &number); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:16:50.517

你需要一个指向数字的指针

IE

```
fscanf(pFile, "%d", &number); 
```

检查返回值是个好主意`fscanf`

您可能还需要进行冲洗。

即在 printf 之后添加该行

```
fflush(stdout); 
```

此外，如果您无法打开文件，您需要进行初始化`number`或执行操作。`return`

所以总而言之，代码应该是这样的

```
FILE * pFile;
int number;
pFile = fopen ("myfile.txt","r");

if (NULL == pFile && 1 == fscanf(pFile, "%d", &number))
{
    printf("Number: %i", number);
    fflush(stdout);
    return 0;
}
else
{
    return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:11:29.150

您忘记将数字的地址而不是数字的值传递给 fscanf。所以更换

```
fscanf(pFile, "%d", number); 
```

和

```
fscanf(pFile, "%d", &number); 
```

有必要将地址/指针传递给它，否则它无法修改数字的内容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-05-19T11:07:25.723

永远不要忘记，对于输入（来自键盘/文件），您需要提及变量的地址。所以你必须把`&`变量放在前面。

在你的情况下：

```
fscanf(pFile, "%d", &number); 
```

此外，您最好检查您是否到达文件结尾：

```
while(fscanf(pFile, "%d", &number) != EOF){
    //do the logic
} 
```

查看这些手册了解更多信息：

[Linux 程序员手册](http://man7.org/linux/man-pages/man3/sscanf.3.html)

[C 库函数 - fscanf()](https://www.tutorialspoint.com/c_standard_library/c_function_fscanf.htm)

# java - java作业（递归）

> ID：12944765
> 
> 赞同：0
> 
> 时间：2012-10-17T23:07:03.887
> 
> 标签：java, recursion

这是问题：

> ### 问题一。
> 
> 我们将 Pestaina 字符串定义如下：
> 
> 1.  ab 是 Pestaina 字符串。
> 2.  cbac 是一个 Pestaina 字符串。
> 3.  如果 S 是 Pestaina 字符串，那么 SaS 也是。
> 4.  如果 U 和 V 是 Pestaina 弦，那么 UbV 也是。
> 
> 这里 a、b、c 是常数，S、U、V 是变量。在这些规则中，相同的字母代表相同的字符串。所以，如果 S = ab，规则 3 告诉我们 abaab 是一个 Pestaina 字符串。在规则 4 中，U 和 V 代表 Grandpa 字符串，但它们可能不同。
> 
> 写方法
> 
> ```
> public static boolean isPestaina(String in) 
> ```
> 
> 如果 in 是 Pestaina 字符串，则返回 true，否则返回 false。

这就是我到目前为止仅适用于第一条规则的内容，但在某些情况下不起作用，例如“abaaab”：

```
public class Main {

private static boolean bool = true;
    public static void main(String[] args){

        String pestaina = "abaaab";
        System.out.println(pestaina+" "+pestainaString(pestaina));
    }

    public static boolean pestainaString(String p){

        if(p == null || p.length() == 0 || p.length() == 3) {
            return false;
        }
        if(p.equals("ab")) {
            return true;
        }
        if(p.startsWith("ab")){

            bool = pestainaString(p, 1);
        }else{
            bool = false;
        }
        return bool;
    }

    public static boolean pestainaString(String p, int sign){

        String letter;
        char concat;

        if("".equals(p)){

            return false;
        }

        if(p.length() < 3){

            letter = p;
            concat = ' ';
            p = "";
            pestainaString(p);

        }else if(p.length() == 3 && (!"ab".equals(p.substring(0, 2)) || p.charAt(2) != 'a')){
            letter = p.substring(0, 2);
            concat = p.charAt(2);
            p = "";
            pestainaString(p);
        }else{
            letter = p.substring(0, 2);
            concat = p.charAt(2);
            pestainaString(p.substring(3));
        }

        if(letter.length() == 2 && concat == ' '){
            if(!"ab".equals(letter.trim())){

                bool = false;
                //concat = 'a';
            }

        }else if((!"ab".equals(letter)) || (concat != 'a')){

            bool = false;
        }
        System.out.println(letter +" " + concat);
       return bool;
    }
} 
```

请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:27:56.223

我发现我调用了错误的方法的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:51:54.507

那很有趣。

```
public boolean isPestaina(String p) {
        Set<String> existingPestainas = new HashSet<String>(Arrays.asList(new String[]{"ab", "cbac"}));
        boolean isP  = false;
        int lengthParsed = 0;
        do {
            if (lengthParsed > 0) {
                //just realized there's a touch more to do here for the a/b
                //connecting rules...I'll leave it as an excersize for the readers.
                if (p.substring(lengthParsed).startsWith("a") ||
                    p.substring(lengthParsed).startsWith("b")) {
                    //good connector.
                    lengthParsed++;
                } else {
                    //bad connector;
                    return false;
                }
            }
            for (String existingP : existingPestainas) {
                if (p.substring(lengthParsed).startsWith(existingP)) {
                    isP = true;
                    lengthParsed += existingP.length();
                }
            }
            if (isP) {
                System.err.println("Adding pestaina: " + p.substring(0, lengthParsed));
                existingPestainas.add(p.substring(0, lengthParsed));
            }
        } while (isP && p.length() >= lengthParsed + 1);
        return isP;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:45:00.307

```
 public static void main(String[] args) {
        // TODO code application logic here
        String text = "cbacacbac";

        System.out.println("Is \""+ text +"\" a Pestaina string? " + isPestaina(text));

    }

    public static boolean isPestaina(String in) {
        if (in.equals("ab")) {
            return true;
        }
        if (in.equals("cbac")) {
            return true;
        }
        if (in.length() > 3) {
            if ((in.startsWith("ab") || in.startsWith("cbac"))
                    && (in.endsWith("ab") || in.endsWith("cbac"))) {
                return true;
            }
        }
        return false;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T23:21:12.660

您正在描述一种[Context Free Language](http://en.wikipedia.org/wiki/Context-free_language)，可以将其描述为[Context Free Grammer](http://en.wikipedia.org/wiki/Context-free_grammar)并用它进行解析。解析这些的领域得到了广泛的研究，并且那里有很多资源。

维基百科页面还讨论了一些解析这些的[算法](http://en.wikipedia.org/wiki/Context-free_grammar#Parsing_algorithms)，特别是 - 我认为你对[早期解析器感兴趣](http://en.wikipedia.org/wiki/Earley_algorithm)

我也相信可以使用[下推自动机](http://en.wikipedia.org/wiki/Pushdown_automaton)来解析这种“语言” （尽管不是 100% 确定）。

# jquery - jquery背景更改/保持上一页的颜色

> ID：12944770
> 
> 赞同：0
> 
> 时间：2012-10-17T23:07:27.620
> 
> 标签：jquery, css

我正在尝试制作一个网站，每个页面都以新的背景颜色褪色。

到目前为止，我只是使用准备好的文档并向 html 标记添加一个类。

当您点击进入新页面时......它离开，说“蓝色”并进入“黄色”新页面。

当它到达“黄色”时 - 它读取标准的 html 背景颜色，我已将其设置为“红色”，然后继续添加黄色类。（所以从蓝色/剪切到红色/淡出到黄色）而不是所需的蓝色/淡出到黄色的效果。

我想知道的是，是否有方法参考或保留上一页的背景颜色作为起点。我这里有一个测试页。在 chrome 中你永远看不到红色。所以在火狐中查看这个。

[http://derekthomaswood.com/dev/background-change](http://derekthomaswood.com/dev/background-change)

如果我使用 ajax，我可以想出一些方法来处理这个问题......但在这个项目中，我试图让 ajax 远离它。（但我对你能想到的任何事情都持开放态度）

感谢您的时间。

# javascript - 需要在 jQuery 对话框标题中显示 &，但它正在转换为 &

> ID：12944773
> 
> 赞同：4
> 
> 时间：2012-10-17T23:08:05.757
> 
> 标签：javascript, jquery

我需要`&amp;`在 Jquery 对话框的标题栏中显示它，但它正在转换为`&`. 因此，我们的想法是在对话框标题中显示该值。它对一切都很好，但是当我使用`&amp;`or`&apos;`然后它被分别转换为`&`or时`'`。下面是我的代码：

```
var name = '&amp;'
$('#testdialog')
   .dialog(
       {
           title: name,
           autoOpen: false,
           width: 900,
           height: 400,
           scrollable: true,
           draggable: true,
           modal: true,
           resizable: false,
           open: function (event, ui) {
               jQuery.ajaxSetup({ cache: false });
               callTest();
           },
           close: function (event, ui) {
               jQuery.ajaxSetup({ cache: false });
               $('#testdialog').html('');
           },
           buttons: {
               Ok: function () {
                   $(this).dialog('close');
               }
           }
   });$('#testdialog').dialog('open'); 
```

我想按原样显示 name 变量的值。我尝试将值保留在 div 中并`$("#divID").html()`在 title 属性中使用，但它不起作用。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:15:06.413

将您的变量更新为以下内容，您应该一切顺利：

```
var name = '&amp;amp;' 
```

使用`&apos;`：

```
var name = '&amp;apos;' 
```

# apache - 如何使用 htaccess 中的指令

> ID：12944774
> 
> 赞同：1
> 
> 时间：2012-10-17T23:08:15.463
> 
> 标签：apache, .htaccess, directory

我在我的 .htaccess 文件中写了这几行：

```
<Directory /img>
Header set Cache-Control "max-age=604800, public"
</Directory> 
```

但是服务器遇到了 500 Internal Server Error。
我真的想将该规则应用于少数目录（例如：img/js/icons/），
但不是应用于站点中的所有图像文件。

问题：
将规则应用于整个目录的正确方法是什么？
是否可以通过单个 htacess 文件，每个目录中没有 htacess 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T01:31:32.937

您不能`<Directory>`在 htaccess 文件（本质上是一个`<directory>`本身）中使用块。如果您想请求`/img`设置缓存控制标头，请输入：

```
Header set Cache-Control "max-age=604800, public" 
```

在`/img`目录中的 htaccess 文件中。

# c++ - OpenGL显示列表优化

> ID：12944779
> 
> 赞同：0
> 
> 时间：2012-10-17T23:08:36.023
> 
> 标签：c++, opengl, optimization

我目前正在为我的应用程序运行一些速度测试，并且我正在尝试找到更多方法来优化我的程序，特别是使用我的显示列表。目前我得到：

12 FPS，882,000 个顶点

40 FPS，234,000 个顶点

95 FPS，72,000 个顶点

我知道我需要尽量减少拨打电话的次数，所以不要：

```
for(int i = 0; i < Number; i++) {
   glBegin(GL_QUADS);
   ...normal and vertex declarations here
   glEnd();
} 
```

更好的方法是这样做：

```
glBegin(GL_QUADS);
for(int i = 0; i < Number; i++) {
   ...normal and vertex declarations here
}
glEnd(); 
```

这确实有助于将我的 FPS 提高到上面列出的结果，但是，还有其他方法可以优化我的显示列表吗？也许通过使用嵌套顶点数组以外的东西来存储我的模型数据？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T23:24:37.697

[通过切换到VBO](http://www.songho.ca/opengl/gl_vbo.html)或至少[Vertex 数组](http://www.songho.ca/opengl/gl_vertexarray.html)，您将获得显着的速度提升。

立即模式 ( `glBegin()...glEnd()`) 有很多方法调用开销。通过使用更现代的 OpenGL，我已经设法在笔记本电脑上以数百 fps 的速度渲染约 100 万个顶点（如果没有物理引擎/实体系统开销也会更快）。

如果您想知道兼容性，大约 98% 的人支持 VBO 扩展 ( `GL_ARB_vertex_buffer_object`) [http://feedback.wildfiregames.com/report/opengl/](http://feedback.wildfiregames.com/report/opengl/)

# c# - 将 Google 地图与 Windows 8 C#/XAML 应用程序结合使用

> ID：12944781
> 
> 赞同：1
> 
> 时间：2012-10-17T23:08:49.877
> 
> 标签：c#, javascript, google-maps, xaml, windows-8

我刚刚在单独的分区上安装了 Windows 8 RTM/64 位专业版，并且正在学习如何制作 Win 8 应用程序的详细信息。我想重用我使用 asp.net 和 MVC3 编写的早期 webapp 中的一些代码。有没有办法将 Google Maps API 与 C#/xaml 应用程序一起使用？我想这对我来说会容易得多，不必重新发明轮子和粘贴代码，但我有点不知所措。

asp.net 应用程序的代码是用 C# 编写的，它解析 XML。另一方面，我可以用 JS/HTML5 应用程序做到这一点吗？有没有办法可以在 Win 8 应用程序中使用服务器端代码？我不确定这个问题是否有意义。

谢谢，

阿曼达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T06:33:01.197

Javascript api 必须在 HTML5 Win 8 应用程序中实现。但是，您可以使用静态地图 API。您当然可以在 Win 8 应用程序中使用服务器端代码。主要区别在于调用服务时需要进行异步调用。System.Net.HTTP 类可以帮助您解决这个问题。解析 XML 的最佳方法是使用 LINQ。

# css - 我可以在 LESS 混合中使用一组 CSS 伪类吗？

> ID：12944783
> 
> 赞同：2
> 
> 时间：2012-10-17T23:09:11.507
> 
> 标签：css, css-selectors, less, pseudo-class

我开始在应用程序中使用 LESS 框架来处理样式。我经常在应用程序中有一些地方需要标准化伪类以使元素都具有相同的样式。

而不是打字

`button:hover, button:active, button:hover:active { /*styles here */ }`

我正在使用 LESS 的嵌套样式来附加这些伪类，如下所示：

```
.button {
 {
    &,
    &:hover,
    &:active,
    &:hover:active {
            border: 2px solid #000000
    }
} 
```

这工作得很好，并输出带有附加伪类的按钮类。

我的问题是：我可以更进一步将伪调用添加到 mixin 中并因此调用 mixin 吗？我知道这可能看起来像是过度设计，但我在多个样式表中重复使用了很多，如果能够混合使用一行代码，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:24:55.913

您可以使用功能混合：

```
.button(@_arg) {
    &,
    &:hover,
    &:active,
    &:hover:active {
            border: @_arg;
    }
} 
```

然后按照以下方式使用它：

```
.example {
    .button(2px solid #000);
} 
```

# mysql - 正确的 MySQL 查询以准确整理文件下载统计信息

> ID：12944785
> 
> 赞同：1
> 
> 时间：2012-10-17T23:09:16.733
> 
> 标签：mysql, amazon-s3

我正在使用 Amazon S3 为播客提供 MP3 文件。Amazon 提供访问日志，我将其获取并存储在 MySQL 数据库中。数据库如下所示：

```
request_id  varchar(16)
time        int(10)     
file        varchar(255)        
sent        bigint(20)      
size        bigint(20)      
status      smallint(5)     
ip          varchar(39)         
referrer    varchar(255)        
user_agent  varchar(255) 
```

因为这是一个播客，大量的点击是 206 个范围请求（来自 iTunes/iOS），以小块的形式请求每个文件。

我也有一些人不止一次下载该文件。

所以我想做的是构建一个查询：

*   每个文件、每个 IP 仅提供一个结果（因此每个 IP/人只能算作每个文件的一次“命中”）。
*   将每个文件/IP发送的所有字节（列）的总和相加，`sent`因此我可以看到该特定文件/IP 组合的所有范围请求的总数是多少。
*   奖励：比较`sent`每个文件/IP 列的总和，并且仅在字节总和 >=`size`列的 75% 时返回该结果（目前我正在使用 PHP 进行此比较后查询）。

这是我目前正在使用的，我*相信*它正在工作，但它的完整后果对`GROUP BY`我来说是一个谜（例如 - 列顺序`GROUP BY`是否重要？）：

```
SELECT FROM_UNIXTIME(time,'%M %D') as date, ip, file, SUM(sent) as sent, size
FROM stats
WHERE sent > 0 
AND size > 0
AND FROM_UNIXTIME(time, '%Y-%m-%d') >= '2012-09-01'
AND FROM_UNIXTIME(time, '%Y-%m-%d') <= '2012-09-30'
GROUP BY ip, file
ORDER BY time ASC, file ASC 
```

有人在这里看到任何潜在的陷阱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T01:15:06.597

首先回答你的问题：

“分组依据”中的列顺序与结果中返回的内容无关。

您将始终获得相同的分组和相同的聚合值。但是如果列上有索引并且group by中的顺序与索引中列的顺序不匹配，它可能会影响mysql中的性能。我曾经看过一篇讨论性能效果的文章。如果我找到它，我会发布它的链接。

至于您的查询，请注意您选择的字段不属于 group by。这不是 SQL 的标准，但 MySql 允许这样做（可以告诉 MySql 禁止它）。您需要知道的是引擎将创建组，并且对于这些字段，它将从在组中遇到的第一行中选择第一个值。根据您的查询方式，这不能保证正确的结果。原因是 order by 在完成后应用于结果。可能的解决方案很少，但我会提到使用子查询并在内部设置顺序以确保在分组发生之前第一行是您需要的行。

```
SELECT in_tab.date, in_tab.ip, in_tab.file, SUM(in_tab.sent), in_tab.size
FROM (
  SELECT FROM_UNIXTIME(time,'%M %D') as date, ip, file, sent, size
  FROM stats
  WHERE sent > 0 
  AND size > 0
  AND FROM_UNIXTIME(time, '%Y-%m-%d') >= '2012-09-01'
  AND FROM_UNIXTIME(time, '%Y-%m-%d') <= '2012-09-30'
  ORDER BY time ASC
) in_tab
GROUP BY in_tab.ip, in_tab.file
ORDER BY in_tab.date ASC, in_tab.file ASC 
```

如您所见，子查询中的顺序是在分组开始之前执行的。因此，在外部查询创建的每个组中，字段日期和大小将从第一行获取，即具有最早日期的字段（如果您想要最近的，请在子查询中更改为 DESC）。外部 order by 用于对最终结果进行排序，您可以根据需要更改它。

现在对于 BONUS：为了只得到总和 >= 75% 大小的结果，您可以使用 HAVING 子句：

```
SELECT in_tab.date, in_tab.ip, in_tab.file, SUM(in_tab.sent) as total_sent, in_tab.size
FROM (
  SELECT FROM_UNIXTIME(time,'%M %D') as date, ip, file, sent, size
  FROM stats
  WHERE sent > 0 
  AND size > 0
  AND FROM_UNIXTIME(time, '%Y-%m-%d') >= '2012-09-01'
  AND FROM_UNIXTIME(time, '%Y-%m-%d') <= '2012-09-30'
  ORDER BY time ASC
) in_tab
GROUP BY in_tab.ip, in_tab.file
HAVING total_sent > = 0.75 * in_tab.size
ORDER BY in_tab.date ASC, in_tab.file ASC 
```

我建议您考虑最佳解决方案：切换到标准 sql。从长远来看，它更好，更安全。然后，您将在一个查询中对所需数据进行分组，并在另一个查询（或使用联接）中获取其他信息（如文件大小和最小/最大日期）。答案已经很长了，我将不得不停止解释和举例说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T00:03:08.817

按列顺序分组确实很重要，它按第一列分组，然后按下一个分组，因此按 A 分组，B 会将结果分组为 A，然后按 B 分组，如果 B 是相似的数据，这很重要。

# ios - UITextField 输入只允许数字

> ID：12944789
> 
> 赞同：84
> 
> 时间：2012-10-17T23:09:50.643
> 
> 标签：ios, ipad, cocoa-touch, uitextfield, uikeyboard

iPad 没有像 iPhone/iPod 那样的“Numpad”键盘。

我正在寻找如何将用户的键盘限制为仅接受 0 到 9 的值。

我会想象使用 UITextField 的“shouldChangeCharactersInRange”，但我不知道实现它的最佳方法。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-17T23:26:42.153

这是您在 SSN 验证字段上处理问题的方式，`if`如果需要，您可以修改最大长度并删除检查键盘类型的语句。

当用户键入而不是粘贴数据时，还有一种逻辑可以抑制最大长度警报。

在此代码的上下文中，`presentAlert()/presentAlert:`只是一些基本函数，它使用传递的消息字符串呈现 a `UIAlertController`（或 legacy ）。`UIAlertView`

## 斯威夫特 5

```
// NOTE: This code assumes you have set the UITextField(s)'s delegate property to the 
// object that will contain this code, because otherwise it would never be called.
//
// There are also some better stylistic approaches in Swift to avoid all the 
// nested statements, but I wanted to keep the styles similar to allow others 
// to contrast and compare between the two languages a little easier.

func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    // Handle backspace/delete
    guard !string.isEmpty else {

        // Backspace detected, allow text change, no need to process the text any further
        return true
    }

    // Input Validation
    // Prevent invalid character input, if keyboard is numberpad
    if textField.keyboardType == .numberPad {

        // Check for invalid input characters
        if CharacterSet(charactersIn: "0123456789").isSuperset(of: CharacterSet(charactersIn: string)) {

            // Present alert so the user knows what went wrong
            presentAlert("This field accepts only numeric entries.")

            // Invalid characters detected, disallow text change
            return false
        }
    }

    // Length Processing
    // Need to convert the NSRange to a Swift-appropriate type
    if let text = textField.text, let range = Range(range, in: text) {

        let proposedText = text.replacingCharacters(in: range, with: string)

        // Check proposed text length does not exceed max character count
        guard proposedText.count <= maxCharacters else {

            // Present alert if pasting text
            // easy: pasted data has a length greater than 1; who copy/pastes one character?
            if string.count > 1 {

                // Pasting text, present alert so the user knows what went wrong
                presentAlert("Paste failed: Maximum character count exceeded.")
            }

            // Character count exceeded, disallow text change
            return false
        }

        // Only enable the OK/submit button if they have entered all numbers for the last four
        // of their SSN (prevents early submissions/trips to authentication server, etc)
        answerButton.isEnabled = (proposedText.count == 4)
    }

    // Allow text change
    return true
} 
```

## Objective-C

```
// NOTE: This code assumes you have set the UITextField(s)'s delegate property to the 
// object that will contain this code, because otherwise it would never be called.

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    // Handle backspace/delete
    if (!string.length)
    {
        // Backspace detected, allow text change, no need to process the text any further
        return YES;
    }

    // Input Validation
    // Prevent invalid character input, if keyboard is numberpad
    if (textField.keyboardType == UIKeyboardTypeNumberPad)
    {
        if ([string rangeOfCharacterFromSet:[NSCharacterSet decimalDigitCharacterSet].invertedSet].location != NSNotFound)
        {
            [self presentAlert: @"This field accepts only numeric entries."];
            return NO;
        }
    }

    // Length Validation
    NSString *proposedText = [textField.text stringByReplacingCharactersInRange:range withString:string];

    // Check proposed text length does not exceed max character count
    if (proposedText.length > maxCharacters)
    {
        // Present alert if pasting text
        // easy: pasted data has a length greater than 1; who copy/pastes one character?
        if (string.length > 1)
        {
            // Pasting text, present alert so the user knows what went wrong
            [self presentAlert: @"Paste failed: Maximum character count exceeded."];
        }

        // Character count exceeded, disallow text change
        return NO;
    }

    // Only enable the OK/submit button if they have entered all numbers for the last four
    // of their SSN (prevents early submissions/trips to authentication server, etc)
    self.answerButton.enabled = (proposedText.length == maxCharacters);

    // Allow text change
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-15T12:20:18.827

您可以使用此代码在 textField 中只允许数字。

在为 textField 设置委托之前

```
 textFieldName.delegate=self; 
```

或者

```
 [textFieldName setDelegate:self]; 
```

比使用此代码仅允许数字到 textField

```
 - (BOOL) textField: (UITextField *)theTextField shouldChangeCharactersInRange:(NSRange)range replacementString: (NSString *)string {
//return yes or no after comparing the characters

      // allow backspace
      if (!string.length)
      {
           return YES;
      }

      ////for Decimal value start//////This code use use for allowing single decimal value
      //    if ([theTextField.text rangeOfString:@"."].location == NSNotFound)
      //    {
      //        if ([string isEqualToString:@"."]) {
      //            return YES;
      //        }
      //    }
      //    else
      //    {
      //        if ([[theTextField.text substringFromIndex:[theTextField.text rangeOfString:@"."].location] length]>2)   // this allow 2 digit after decimal 
      //        {
      //            return NO;
      //        }
      //    }
      ////for Decimal value End//////This code use use for allowing single decimal value

      // allow digit 0 to 9
      if ([string intValue])
      {
            return YES;
      }

      return NO;
    } 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-05-25T11:01:57.233

试试这个以避免文本字段清除问题

**斯威夫特 3.0**

```
func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {
    guard NSCharacterSet(charactersInString: "0123456789").isSupersetOfSet(NSCharacterSet(charactersInString: string)) else {
        return false
    }
    return true
} 
```

**斯威夫特 4.0**

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    guard CharacterSet(charactersIn: "0123456789").isSuperset(of: CharacterSet(charactersIn: string)) else {
        return false
    }
    return true
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2015-08-04T14:33:25.713

**Swift 代码的非常具体的步骤**

`func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool`您可以通过实现`UITextFieldDelegate`协议来提供限制方法中文本字段输入的逻辑。

为了清楚起见，这些步骤假设您的故事板包含一个***视图控制器***，该控制器带有一个只接受数字的***文本字段对象。***

1.  为扩展的视图控制器创建一个自定义类`UIViewController`。通过在 Xcode 的 Identity Inspector 中设置自定义类值，**确保情节提要中的场景引用自定义类。**

    ```
    import UIKit
    class YourCustomController: UIViewController {
        override func viewDidLoad() {        
            super.viewDidLoad()
        }
    } 
    ```

2.  创建从场景文本字段到自定义视图控制器的出口。

    ```
    class YourCustomController: UIViewController {
        @IBOutlet weak var numberField: UITextField!
        ...
    } 
    ```

3.  `UITextFieldDelegate`在您的自定义视图控制器中应用协议。

    ```
    class YourCustomController: UIViewController, UITextFieldDelegate {
        ...
    } 
    ```

4.  在您的自定义视图控制器的`viewDidLoad`方法中，将您的文本字段的委托分配给您的自定义视图控制器类。

    ```
    override func viewDidLoad() {        
        super.viewDidLoad()
        numberField.delegate = self
    } 
    ```

5.  添加`UITextFieldDelegate`'`func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool`方法。

    由于`numberField`在上一步中将您的自定义视图控制器设置为 的委托，因此每次用户在文本字段中输入字符时都会调用此方法。如果您的方法返回`true`，则该字符将保留在文本字段中。如果您的方法返回`false`，则该字符将*不会*保留在文本字段中。

    `string`参数是用户输入的字符。如果`string`字符可以转换为an，`Int`那么它在0到9之间；否则，它是一些非数字字符。

    ```
    class YourCustomController: UIViewController, UITextFieldDelegate {
        ...
        func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {

            return Int(string) != nil
        }
    } 
    ```

（请参阅下面的完整视图控制器代码。）

* * *

**仅包含数字文本字段的示例视图控制器**

```
import UIKit

class YourCustomController: UIViewController, UITextFieldDelegate {

    @IBOutlet weak var numberField: UITextField!

    override func viewDidLoad() {        
        super.viewDidLoad()       
        numberField.delegate = self
    }

    func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {        
        return Int(string) != nil
    }    
} 
```

* * *

**带有小数文本字段的示例视图控制器**

如果您想支持十进制数，请利用 `NSNumberFormatter`. 有关差异，请参见代码注释。

```
import UIKit

class YourCustomController: UIViewController, UITextFieldDelegate {

    @IBOutlet weak var numberField: UITextField!

    private var formatter: NSNumberFormatter!

    override func viewDidLoad() {        
        super.viewDidLoad()       
        numberField.delegate = self

        // Initialize the formatter; minimum value is set to zero; style is Decimal. 
        formatter = NSNumberFormatter()
        formatter.numberStyle = NSNumberFormatterStyle.DecimalStyle
        formatter.minimum = 0
    }

    func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {
        // Combine the current text field value and the new string
        // character. If it conforms to the formatter's settings then
        // it is valid. If it doesn't then nil is returned and the
        // string character should not be allowed in the text field.         
        return formatter.numberFromString("\(textField.text)\(string)") != nil
    }    
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-08-03T19:07:40.870

```
- (BOOL) textField: (UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString: (NSString *)string {

    NSNumberFormatter * nf = [[NSNumberFormatter alloc] init];
    [nf setNumberStyle:NSNumberFormatterNoStyle];

    NSString * newString = [NSString stringWithFormat:@"%@%@",textField.text,string];
    NSNumber * number = [nf numberFromString:newString];

    if (number)
        return YES;
    else
       return NO;
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2013-07-26T12:35:29.200

我应用了这个，它有效！

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
    // Check for non-numeric characters
    NSUInteger lengthOfString = string.length;
    for (NSInteger index = 0; index < lengthOfString; index++) {
        unichar character = [string characterAtIndex:index];
        if (character < 48) return NO; // 48 unichar for 0
        if (character > 57) return NO; // 57 unichar for 9
    }
    // Check total length for restrict user
    NSUInteger proposedNewLength = textField.text.length - range.length + string.length;
    if (proposedNewLength > 6)
        return YES;
    return YES;                                                                                                                                     
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-04-28T01:05:43.317

迅速 5

```
 //MARK:- UITextFieldDelegate

func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    let allowedCharacters = "1234567890"
    let allowedCharcterSet = CharacterSet(charactersIn: allowedCharacters)
    let typedCharcterSet = CharacterSet(charactersIn: string)
    return allowedCharcterSet.isSuperset(of: typedCharcterSet)
} 
```

您现在只能点击 1234567890

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-02T17:55:11.733

```
NSString* val = [[textField text] stringByReplacingCharactersInRange:range withString:string];
    NSCharacterSet *allowedCharacterSet = [NSCharacterSet decimalDigitCharacterSet];
    if ([[string componentsSeparatedByCharactersInSet:[allowedCharacterSet invertedSet]] count] > 1 || [val length] > 5) {
        return NO;
    } 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-04-20T06:38:19.230

```
Works fine for me :

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {
if (([string rangeOfCharacterFromSet:[[NSCharacterSet decimalDigitCharacterSet] invertedSet]].location != NSNotFound) && !(range.length==1 && string.length==0)) {
            return NO;
        }
        return YES;
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-03-25T03:21:27.183

在斯威夫特：

```
 func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
        return string.isEmpty || Int(string) != nil
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-14T12:53:45.380

保持与内部表示不同的表示数据。有一个更简单的方法。让我们`NSNumberFormatter`做这项工作：

```
 NSNumberFormatter* ns = [[NSNumberFormatter alloc] init];
 ns.numberStyle = NSNumberFormatterDecimalStyle;
 [ns setMaximumFractionDigits:2];
 // This is your internal representation of the localized number
 double a = [[ns numberFromString:self.textIVA.text] doubleValue]];

[mylabel setText:[NSString stringWithFormat:@"€ %@",
     [NSNumberFormatter localizedStringFromNumber:
                          [NSNumber numberWithDouble:a]
                                      numberStyle:NSNumberFormatterDecimalStyle]]]; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-11-10T18:41:43.797

我已经修改了@iDev 的答案以适用于数字和“。”：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
     // Check for non-numeric characters
     NSUInteger lengthOfString = string.length;
     for (NSInteger index = 0; index < lengthOfString; index++) {
         unichar character = [string characterAtIndex:index];
         if ((character < 48) && (character != 46)) return NO; 
         // 48 unichar for 0, and 46 unichar for point
         if (character > 57) return NO; 
         // 57 unichar for 9
     }
     // Check for total length
     NSUInteger proposedNewLength = textField.text.length - range.length + string.length;
     if (proposedNewLength > 6)
         return YES;
     return YES; 
 } 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-04-17T17:23:12.970

如果您使用我的[规范模式](https://github.com/neoneye/SpecificationPattern)，那么代码如下所示

```
textField.delegate = self

lazy var specification: Specification = {
    return RegularExpressionSpecification(pattern: "^(|0|[1-9]\\d{0,6})$")
}()

func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {
    let textFieldString: NSString = textField.text ?? ""
    let s = textFieldString.stringByReplacingCharactersInRange(range, withString:string)
    return specification.isSatisfiedBy(s)
}

func textFieldShouldReturn(textField: UITextField) -> Bool {
    let s = textField.text ?? ""
    let isTextValid = specification.isSatisfiedBy(s)
    if isTextValid {
        textField.resignFirstResponder()
    }
    return false
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-12-16T08:20:26.180

迅速 3

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
    if textField==yourTextFieldOutlet {
                if(CharacterSet.decimalDigits.isSuperset(of: CharacterSet(charactersIn: yourTextFieldOutlet.text!))){
//if numbers only, then your code here
                }
                else{
                showAlert(title: "Error",message: "Enter Number only",type: "failure")
                }
            }
    return true
    } 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2017-02-20T09:15:30.893

使用此代码：

```
NSString* val = [[textField text] stringByReplacingCharactersInRange:range withString:string];
NSCharacterSet *allowedCharacterSet = [NSCharacterSet decimalDigitCharacterSet];
if ([[string componentsSeparatedByCharactersInSet:[allowedCharacterSet invertedSet]] count] > 1 || [val length] > 5) {
    return NO;
} 
```

# java - 从命令行编译 java web 应用程序

> ID：12944793
> 
> 赞同：0
> 
> 时间：2012-10-17T23:10:39.300
> 
> 标签：java, jsp, command-line, compilation

> **可能重复：**
> [java.lang.UnsupportedClassVersionError Unsupported major.minor 版本 51.0](https://stackoverflow.com/questions/11239086/java-lang-unsupportedclassversionerror-unsupported-major-minor-version-51-0)

我正在尝试学习编写一个没有 IDE/构建工具等的简单 jsp/servlet Web 应用程序的基础知识。只有一个文本编辑器和一个命令行。我有一些 .jsps 正在使用我编写的几个 Java 类。这是来自名为 display_email_entry.jsp 的 jsp 片段

```
 <%
        //get parameters from the request
        String firstName = request.getParameter("firstName");
        String lastName = request.getParameter("lastName");
        String emailAddress = request.getParameter("emailAddress");

        //get the real path for the EmailList.txt file
        ServletContext sc = request.getServletContext();
        String path = sc.getRealPath("/WEB-INF/EmailList.txt");

        //use regular java objects
        User user = new User(firstName, lastName, emailAddress);
        UserIO.add(user, path);
    %> 
```

所以我正在做所有这些简单的工作，只是使用文本编辑器并尝试了解如何从命令行编译它，然后手动将其部署到 tomcat。但我不知道如何从 .java 文件生成 .class 文件并将它们放入 WEB-INF/classes 并运行这个小练习应用程序。

我当前的文件结构如下所示：

```
User ->
  index.html
  display_email_entry.jsp

  business ->
    User.java
  data ->
    UserIO.java

  WEB-INF ->
    web.xml
  classes (currently empty) 
```

我试过这样做：

> javac -d WEB-INF/类数据/UserIO.java

它为我生成类文件，但是当我尝试在 Web 服务器上运行它时，我收到以下错误。

> HTTP 状态 500 - javax.servlet.ServletException: java.lang.UnsupportedClassVersionError: business/User : Unsupported major.minor version 51.0（无法加载类 business.User）

所以我有点卡住了。我希望有人能指出我在这里做错了什么。提前致谢。

# ruby-on-rails - Resque - 在多台服务器之间平均分配工作负载

> ID：12944795
> 
> 赞同：1
> 
> 时间：2012-10-17T23:10:58.433
> 
> 标签：ruby-on-rails, redis, resque

我有一个带有 Resque 的 Rails 应用程序，在多台服务器上执行后台作业。这些作业在资源需求方面有所不同，因此我想限制每个服务器可以执行的特定类型的作业数量。我希望能够让多台服务器查询同一个 Redis 数据库。

这是场景：我将 Server-1 和 Server-2 连接到同一个 Redis 数据库。

1) 每台服务器最多应承担 3 个“编码”作业和 5 个“解析”作业（总共 8 个作业）。

2）在给定时刻，Redis-server 将有 10 个作业在“编码”队列中，12 个作业在“解析”队列中可供 Resque 工作人员处理。我有 2 台服务器正在运行，正在查询同一个数据库。

问题：如何防止 Server-1 承担 8 个“编码”作业而 Server-2 承担其余的？换句话说，如何限制 Server-1 仅从“编码”队列中获取 3 个作业，从“解析”队列中获取 5 个作业，并让 Server-2 执行相同的操作？

我想保持代码的通用性，以便我可以将其部署到多个服务器而无需单独调整..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:22:13.777

这不是你可以或不应该在 redis 级别做的事情。您需要一个主管，负责处理对您的 redis 实例的应用程序请求。很长时间以来，我都没有为 ruby​​ 写过任何产品级别的东西，所以我不能推荐一个最喜欢的候选人，但我相信 ruby​​ 社区中会有一些东西可以完全满足你的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T17:15:50.173

您`cant`可以通过像这样的单个 rake 任务来实现这一点（我猜）

rake resque:workers COUNT=8 QUEUE=encoding_queue,parsing_queue 背景=yes

但是，如果您可以分叉您的 rake 任务，那么您可以

上`SERVER-1`

`rake resque:workers COUNT=3 QUEUE=encoding_queue BACKGROUND=yes`

`rake resque:workers COUNT=5 QUEUE=parsing_queue BACKGROUND=yes`

在 ON 中重复相同的操作`SERVER-2`

希望这有帮助

# php - 如何使用位置变量打印特定的数组条目，例如 $array[$x]

> ID：12944800
> 
> 赞同：0
> 
> 时间：2012-10-17T23:11:25.320
> 
> 标签：php

在其他人的帮助下，我在旅途中得到了一个嵌套循环，它从一个 sql 表中提取月份列表，然后，对于每个月份，它会遍历一个事件表并提取相应的事件。

表结构大致如下：

月表

```
ID  | MonthShort |  MonthLong
1 | 2012Oct | October 2012
2 | 2012Sep | September 2012 
```

* * *

事件表

```
ID | MonthID | Event | Guests | Adults | Children
1 | 1 | Wedding | 200 | 150 | 50
2 | 1 | Bar Mitzvah | 100 | 50 | 50
3 | 1 | Funeral | 100 | 50 | 50 
4 | 2 | Birthday | 50 | 30 | 20 
5 | 2 | Birthday | 300 | 200 | 100
6 | 2 | Wedding | 200 | 180 | 20 
```

我的循环工作，以便它用所有可用月份填充菜单 A，然后用该月的所有事件填充菜单 B。然后您可以单击该事件并显示相关信息 - 这是我有点卡住的地方。

我得到的数组类似于以下，来宾数组是我正在尝试的 atm：

```
$events = array();
$months = array();
$guests = array();

while ($row = mysql_fetch_array($result)) {
  $months[$row["MonthID"]] = $row["MonthLong"];
  $events[$row["MonthID"]][] = $row["Event"];
  $guests[$row["MonthID"]][] = $row["Guests"];
} 
```

我使用 foreach 用 ($events[$x] as $event) 填充菜单 B。每个事件的屏幕都会有一个类似于以下内容的条目，这就是我想要做的（显然我知道这不起作用，但它应该用于说明目的）：

echo '来宾人数：' . print_r($guests[$x])

尽管客人和活动都在同一个柜台上，但我可以在相关位置打印数组条目。

`October 2012`如果你点击“ ”然后选择“ ”，我想要什么`Funeral`，屏幕会说：

**宾客人数：100**

每个事件实际上有几十个记录，但没有必要深入所有这些......

为漫无边际的道歉，如果这没有意义！我是 PHP 新手，我只真正坚持这一点。

SQL 查询基于以下内容：

```
$sql = "
  SELECT
    a.id, b.id AS monthId, a.event, b.monthshort, b.monthlong
  FROM
    events_table_name AS a
  INNER JOIN
    month_table_name AS b ON b.id = a.monthId
  ORDER BY
    b.id, a.id ASC
  "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:20:55.500

我会在 PHP 中使用不同的数据结构。这个怎么样？您可能必须更改 SQL 查询才能获得它，但这是我的目标数据结构：

```
$months = array(
    '1' =>  array(
        'long' => 'October 2012',
        'events' => array(
            '1' => array(
                'name' => 'Wedding',
                'guests' => '200'   
            ),
            '2' => array(
                'name' => 'Bar Mitzvah',
                'guests' => '100'
            ),
            '3' => array(
                'name' => 'Funeral',
                'guests' => '100'
            )
        )
    ),
     '2' => array(
        // etc.
    )
); 
```

这样，您可以查找一个月；每个月的事件；每个事件的出席人数和名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:30:41.260

您需要在 foreach 语句中使用索引。我是说

```
foreach ($events[$x] as $i => $event) {
    ...
    echo ' Number of guests: ' . print_r($guests[$x][$i]);
} 
```

# google-apps-script - 在相关电子表格中自定义 Google 表单回复

> ID：12944802
> 
> 赞同：0
> 
> 时间：2012-10-17T23:11:41.427
> 
> 标签：google-apps-script, google-docs, google-forms

我一直在寻找一个简单的解决方案，但似乎无法提出任何建议。我对 googledocs 比较陌生，但我认为我已经完成了这方面的功课。

我的目标是使用*表格*通过是或否问题收集数据。然后我希望将数据存储为 1 和 0 (N=0 Y=1) 以便进行一些统计。这可以通过一个简单的脚本来解决，该脚本可以转换从电子表格中的表单导入的字符串，我仍在努力解决这个问题......但是我想知道我是否没有错过更简单的解决方案或使用表单进行设置以字符串格式发回 1 或 0 而不是 Yes 或 No。

对于这种从是/否到 1/0 的转换的简单可扩展解决方案的任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:28:30.240

我认为没有 Google Forms 功能可以做到这一点，但[在表单提交](https://developers.google.com/apps-script/understanding_events)时触发的 Google Apps 脚本可以轻松做到这一点。你看过了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T20:12:55.800

谷歌表单有一个你可以使用的“规模”问题类型，并且完全避免了翻译步骤。

![截屏](../Images/faab343c58d8513014681d6ef53adebe.png)

用户可以选择从“否”（0）到“是”（1）的比例，您的电子表格最终将包含该数字。

## ![截屏](../Images/7cd81be45d86fef080008da1f36d0711.png)

注意：目前存在 Scale 问题的错误（有人会说是功能）。虽然您可以选择从 0 开始刻度，但不能以 1 结束；所以 2 是最低的最大值。您仍然可以将 0 解释为否，但将 x > 0 视为是。

# coldfusion - 尝试通过 CF10 管理员更新时出现错误“签名验证失败”

> ID：12944803
> 
> 赞同：8
> 
> 时间：2012-10-17T23:11:59.617
> 
> 标签：coldfusion, coldfusion-10, cfadmin

当您尝试通过 ColdFusion 10 Administrator 应用任何热修复程序时，您会不断获得：

```
Error occurred while installing the update:
Failed Signature verification 
```

您甚至可能已经验证了文件并手动将它们放置在`hf-updates`CF10 管理页面仍显示“安装”选项的目录中，但您再次收到相同的错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T23:11:59.617

此错误意味着您忘记应用[ColdFusion 10 强制更新](http://helpx.adobe.com/coldfusion/kb/coldfusion-10-mandatory-update.html)，该更新更新了用于验证安装包的证书。

来自 Adob​​e 的网站：

> 由于代码签名证书吊销，所有 ColdFusion 更新现在都使用新的代码签名证书进行签名。此强制更新可确保您当前安装的 ColdFusion 10 使用新的代码签名证书进行更新。ColdFusion 10 中的自动更新功能的正常运行也需要此更新。Adobe 强烈建议您应用此更新。

安装更新后（[您可以在此处找到 JAR 安装说明](http://help.adobe.com/en_US/ColdFusion/10.0/Admin/WSe61e35da8d318518-33adffe0134c60cd31c-7ffe.html)），服务将重新启动，您将能够通过 ColdFusion 管理员应用后续更新。

**编辑：** 以管理员身份运行命令提示符：

![在此处输入图像描述](../Images/ba9e3a32a3105452d33f7d06747250e0.png)

导航到您的 jar 文件，然后运行以下命令来运行 jar 文件：

```
D:\>java -jar cf10_mdt_updt.jar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T21:43:12.613

@UncleSol，

在安装了强制更新 (cf10_mdt_updt.jar) 后，我也遇到了这个问题。成功应用强制更新后，CF 想应用更新 12 作为第一个更新，这就是我遇到这个问题的地方，所以我从这个页面下载并手动安装了更新 11：

[https://helpx.adobe.com/coldfusion/kb/coldfusion-10-updates.html](https://helpx.adobe.com/coldfusion/kb/coldfusion-10-updates.html)（安装方式与NotJustClarkKent的说明完全相同）

手动安装更新 11 后，我可以使用 CF Updater 安装其余更新。

希望有帮助。

# python - 在导入之前/期间注入变量

> ID：12944806
> 
> 赞同：3
> 
> 时间：2012-10-17T23:12:26.537
> 
> 标签：python, python-2.7, python-2.x

基本上，我想强制一个变量，让我们在插件加载*之前*`jim`将他调用到我作为全局加载的插件中，例如：

 *```
load_plugin('blah', variables={'jim':1}) #For instance 
```

然后在里面`blah.py`：

```
print jim #prints 1 
```

有什么简单的方法可以做到这一点？如果它不在标准库中，这没什么大不了的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:41:20.310

不 -在首先导入插件*之前*没有办法做到这一点- 所以，如果你的变量被用于模块主体本身，你就不走运了。

如果变量在模块的函数或方法（但不是类主体）中用作全局变量，则可以在导入模块后更改它，只需执行以下操作：

```
import module
module.jim = 5 
```

你可能知道。（而且我知道这不是您要的）。

因此，实现这一目标的唯一方法是解析模块的源代码，并在那里更改变量分配，保存源代码并导入它。好的，有办法用内存中的源代码模拟导入，但是这种方法太不切实际了，我们不应该详细说明。

如果您可以控制要以这种方式进行猴子补丁的模块的源代码，我的建议是使用一个配置文件，模块将从该配置文件中选择变量名。

然后生成配置文件，执行导入（注意它尚未导入到 sys.modules 中），然后就完成了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T14:38:51.923

您可以使用[__import__](http://docs.python.org/2/library/functions.html#__import__)函数。它允许您覆盖全局变量。
例如：

```
__import__('blah', dict(jim=1, **globals())) 
```*

# ios - 为什么 Apple 使用 NSString 对象而不是枚举作为参数？

> ID：12944808
> 
> 赞同：0
> 
> 时间：2012-10-17T23:12:27.227
> 
> 标签：ios, enums, constants, locale, nslocale

例如，为什么要使用这个：

```
NSLocale *l = [[NSLocale alloc] initWithLocaleIdentifier@"en_US"]; 
```

而不是这样的：

```
NSLocale *l = [[NSLocale alloc] initWithLocaleIdentifier:NSLocaleIdentifierUS]; 
```

似乎它可以防止很多错误，因为在 Xcode 中键入 NSString 时，没有自动更正，而 Xcode 将自动更正/自动填充枚举。此外，我想不出在枚举或常量上使用 NSStrings 的理由。例如，随着新版本 SDK 的发布，Apple 可以添加新的标识符，但他们也可以使用枚举来执行此操作。枚举相对于字符串常量的另一个好处是可以更容易地比较枚举：

```
if(userIdentifier == NSLocaleIdentifierUS) {

    //English!
} 
```

此外，对于其他方法，Apple 使用枚举或特定对象作为参数：

```
NSData *data = [aString dataUsingEncoding:NSASCIIStringEncoding]; 
```

如果他们使用字符串作为 localeIdentifier，为什么不这样做：

```
NSData *data = [aString dataUsingEncoding:@"ascii"]; 
```

似乎他们只是不一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T03:01:18.763

评论建议这个问题有几个答案：

1.  有数百种语言环境，以及已经存在的语言环境的许多变体（例如，有“en_US”和“en_US_POSIX”，因此创建这么多枚举是不切实际的。
2.  从 Web 服务读取数据时，使用的格式是“lang_COUNTRY”，因此使用相同的格式以避免每次从 Web 下载语言环境数据时都解析 Web 数据是有意义的。
3.  字符串是对象，因此可以轻松地将它们存储在集合中，而无需将它们包装在 NSNumber 对象中，就像枚举的情况一样。

# java - Spring webservicetemplate jar与Axis2冲突问题

> ID：12944811
> 
> 赞同：0
> 
> 时间：2012-10-17T23:13:02.830
> 
> 标签：java, spring, classpath, axis2, spring-ws

我在我的应用程序中都使用了 Spring Web 服务和 Axis2。它们是完全独立的，而且效果很好，除了 Spring WebServiceTemplate 开始在下面抛出异常..

我怀疑这是因为 Spring 需要 saaj.jar（其中包含 javax.xml.soap.SOAPElement）而 Axis2 需要 axiom-dom.jar（其中包含 org.apache.axiom.om.impl.dom.ElementImpl）

这两个接口都扩展了 org.w3c.dom.Element 并以某种方式从 axiom-dom.jar 中获取了 Spring

除了可能将 axiom-dom.jar 重命名为 z-axiom-dom.jar 之外，我可以做些什么来防止 Spring 在运行时选择错误的实现，所以它在类路径的后面有什么想法？

com.sun.xml.wss.XWSSecurityException: com.sun.xml.wss.XWSSecurityException: **java.lang.ClassCastException: org.apache.axiom.om.impl.dom.ElementImpl 不能转换为 javax.xml.soap.SOAPElement** 在 org.springframework.ws.soap.security.xwss.XwsSecurityInterceptor.secureMessage(XwsSecurityInterceptor.java:139) 在 org.springframework.ws.soap.security.AbstractWsSecurityInterceptor.handleRequest(AbstractWsSecurityInterceptor.java:179) 在 org.springframework.ws .client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:542) at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:502) at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive (WebServiceTemplate.java:351) 在 org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:341)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:52:05.873

这不是saaj和axiom-dom的冲突，而是saaj和axis2-saaj.jar的冲突。axis2-saaj 使用 axiom-dom，这就是异常指 Axiom 的原因。如果您不使用 Axis2 提供的 JAX-WS 实现，则不需要axis2-saaj，因此根据您的用例，删除它可能是一种解决方案。

# android - admob adview 在旋转时导致 android 崩溃

> ID：12944812
> 
> 赞同：3
> 
> 时间：2012-10-17T23:13:07.490
> 
> 标签：android, android-layout, admob

我像这样从xml添加了admob adview；

```
<com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_above="@id/footerContainer"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        ads:adSize="BANNER"
        ads:adUnitId="..."
        ads:loadAdOnCreate="true"
        ads:testDevices="TEST_EMULATOR" /> 
```

第一的; 似乎没有问题。但是当我快速改变屏幕方向几次时；应用程序崩溃了。我有这些错误；

```
1- bitmap size exceeds VM budget 
```

> java.lang.OutOfMemoryError：位图大小超过 android.graphics.Bitmap.createBitmap(Bitmap.java:477) 的 android.graphics.Bitmap.nativeCreate(Native Method) 的 VM 预算 android.graphics.Bitmap.createBitmap(Bitmap.java :444) 在 android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473) 在 android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498) 在 android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473) 在 android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349) .graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336) 在 android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697) 在 android.content.res.Resources.loadDrawable(Resources.java:1785) 在 android。 content.res.TypedArray.getDrawable(TypedArray.java:601) 在 android.widget.ImageView.(ImageView.java:118) 在 android.widget.ImageButton.(ImageButton.java:85) 在 android.widget.ImageButton.(ImageButton.java:81) 在 java.lang.reflect.Constructor.constructNative(Native Method) 在 java.lang.reflect...
> 
> 2- 二进制 XML 文件第 16 行：膨胀类错误
> 
> android.view.InflateException：二进制 XML 文件第 16 行：在 com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java: 56) 在 android.view.LayoutInflater.inflate(LayoutInflater.java:408) 在 android.view.LayoutInflater.rInflate(LayoutInflater.java:623) 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568) 在 android. view.LayoutInflater.inflate(LayoutInflater.java:320) 在 android.support.v4 的 com.X.ui.FooterFragment.onCreateView(FooterFragment.java:21) 的 android.view.LayoutInflater.inflate(LayoutInflater.java:276) .app.FragmentManagerImpl.moveToState(FragmentManager.java:846) 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061) 在 android.support。v4.app.FragmentActivity.onCreateView(FragmentActivity.java:291) 在 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:...
> 
> 3- 无法启动活动 ComponentInfo{com.x/com.x.ui.HomeActivity}：android.view.InflateException：二进制 XML 文件第 13 行：膨胀类错误
> 
> java.lang.RuntimeException：无法启动活动 ComponentInfo{com.X/com.X.ui.HomeActivity}：android.view.InflateException：二进制 XML 文件第 13 行：在 android.app.ActivityThread.performLaunchActivity 处膨胀类时出错（ ActivityThread.java:1768) 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784) 在 android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2953) 在 android.app.ActivityThread.access$1600(ActivityThread.java: 123) 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:943) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:130) 在android.app.ActivityThread.main(ActivityThread.java:3835) 在 java.lang.reflect.Method.invokeNative(Native Method) 在 java.lang.reflect.Method.invoke(Method.java:507) 在 com。android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864) 在 com.android.internal.os.ZygoteInit.main(Zygo.

我尝试按照[此处](https://developers.google.com/mobile-ads-sdk/docs/admob/fundamentals)所述以编程方式添加它，但没有任何改变......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:15:13.093

对于 1，您使用的是什么 SDK 版本，您在什么设备上运行它？这可能是模拟器特定的问题。

2 和 3 可能是由于未正确链接 AdMob 库。请参阅[膨胀类 com.google.ads.AdView 时出错](https://stackoverflow.com/questions/10523703/error-inflating-class-com-google-ads-adview/10525760#10525760)。

# sql - Rails 3 用户匹配算法到 SQL 查询（复杂）

> ID：12944813
> 
> 赞同：1
> 
> 时间：2012-10-17T23:13:11.563
> 
> 标签：sql, ruby-on-rails, performance

我目前正在开发一个根据回答的问题匹配用户的应用程序。我在正常的 RoR 和 ActiveRecord 查询中实现了我的算法，但是使用它的速度很慢。将一位用户与 100 位其他用户匹配需要

```
Completed 200 OK in 17741ms (Views: 106.1ms | ActiveRecord: 1078.6ms) 
```

在我的本地机器上。但仍然......我现在想在原始 SQL 中实现这一点，以获得更多的性能。但是我真的很难在 SQL 查询和诸如此类的东西加上计算等内容中了解 SQL 查询。我的头快要爆炸了，我什至不知道从哪里开始。

这是我的算法：

```
def match(user)
  @a_score = (self.actual_score(user).to_f / self.possible_score(user).to_f) * 100
  @b_score = (user.actual_score(self).to_f / user.possible_score(self).to_f) * 100

  if self.common_questions(user) == []
    0.to_f
  else
    match = Math.sqrt(@a_score * @b_score) - (100 / self.common_questions(user).count)
    if match <= 0
      0.to_f
    else
      match
    end
  end
end

def possible_score(user)
  i = 0
  self.user_questions.select("question_id, importance").find_each do |n|
    if user.user_questions.select(:id).find_by_question_id(n.question_id)
      i += Importance.find_by_id(n.importance).value
    end
  end
  return i
end

def actual_score(user)
  i = 0
  self.user_questions.select("question_id, importance").includes(:accepted_answers).find_each do |n|
    @user_answer = user.user_questions.select("answer_id").find_by_question_id(n.question_id)
    unless @user_answer == nil
      if n.accepted_answers.select(:answer_id).find_by_answer_id(@user_answer.answer_id)
        i += Importance.find_by_id(n.importance).value
      end
    end
  end
  return i
end 
```

所以基本上用户回答问题，选择他接受的答案以及这个问题对他有多重要。然后该算法检查 2 个用户的共同问题，如果用户 1 给出了用户 2 接受的答案，如果是，则添加用户 2 对每个问题给出的重要性，这构成了用户 1 的得分。对于 user2 也是相反的。除以可能的分数给出百分比，两个应用于几何平均值的百分比给出了两个用户的总匹配百分比。我知道相当复杂。告诉我是否解释得不够好。我只是希望我可以用原始 SQL 来表达这一点。性能就是这一切。

这是我的数据库表：

```
CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "username" varchar(255) DEFAULT '' NOT NULL); (left some unimportant stuff out, it's all there in the databse dump i uploaded)

CREATE TABLE "user_questions" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_id" integer, "question_id" integer, "answer_id" integer(255), "importance" integer, "explanation" text, "private" boolean DEFAULT 'f', "created_at" datetime);

CREATE TABLE "accepted_answers" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "user_question_id" integer, "answer_id" integer); 
```

我猜 SQL 查询的顶部必须看起来像这样？

```
SELECT u1.id AS user1, u2.id AS user2, COALESCE(SQRT( (100.0*actual_score/possible_score) * (100.0*actual_score/possible_score) ), 0) AS match
FROM 
```

但由于我不是 SQL 大师，只能做平常的事情，我的脑袋快要爆炸了。我希望有人能帮我解决这个问题。或者至少以某种方式提高我的表现！非常感谢！

# 编辑：

因此，根据向导的回答，我设法为“possible_score”获得了一个不错的 SQL 语句

```
SELECT SUM(value) AS sum_id 
FROM user_questions AS uq1
INNER JOIN importances ON importances.id = uq1.importance
INNER JOIN user_questions uq2 ON uq1.question_id = uq2.question_id AND uq2.user_id = 101
WHERE uq1.user_id = 1 
```

我试图用这个来获得“actual_score”，但它没有用。执行此操作时，我的数据库管理器崩溃了。

```
SELECT SUM(imp.value) AS sum_id 
FROM user_questions AS uq1
INNER JOIN importances imp ON imp.id = uq1.importance
INNER JOIN user_questions uq2 ON uq2.question_id = uq1.question_id AND uq2.user_id = 101
INNER JOIN accepted_answers as ON as.user_question_id =  uq1.id AND as.answer_id = uq2.answer_id
WHERE uq1.user_id = 1 
```

# 编辑2

好吧，我是个白痴！我当然不能使用“as”作为别名。将其更改为 aa 并且有效！W00T！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T07:18:02.390

我知道您正在考虑迁移到 SQL 解决方案，但是可以对您的 Ruby 代码进行一些重大的性能改进，这可能会消除使用手动编码 SQL 的需要。在优化代码时，通常值得使用分析器来确保您确实知道哪些部分是问题所在。在您的示例中，我认为可以通过删除在每次迭代期间执行的迭代代码和数据库查询来进行一些重大改进！

此外，如果您使用的是最新版本的 ActiveRecord，您可以使用子选择生成查询，而无需编写任何 SQL 代码。当然，为数据库创建适当的索引很重要。

根据我从您的代码中推断出的内容，我对您的模型和关系做出了很多假设。如果我错了，请告诉我，我会尝试做出相应的调整。

```
def match(user)    
  if self.common_questions(user) == []
    0.to_f
  else
    # Move a_score and b_score calculation inside this conditional branch since it is otherwise not needed.
    @a_score = (self.actual_score(user).to_f / self.possible_score(user).to_f) * 100
    @b_score = (user.actual_score(self).to_f / user.possible_score(self).to_f) * 100
    match = Math.sqrt(@a_score * @b_score) - (100 / self.common_questions(user).count)
    if match <= 0
      0.to_f
    else
      match
    end
  end
end

def possible_score(user)
  # If user_questions.importance contains ID values of importances, then you should set up a relation between UserQuestion and Importance.
  #   I.e. UserQuestion belongs_to :importance, and Importance has_many :user_questions.
  # I'm assuming that user_questions represents join models between users and questions.  
  #   I.e. User has_many :user_questions, and User has_many :questions, :through => :user_questions.  
  #        Question has_many :user_questions, and Question has_many :users, :through => :user_questions
  # From your code this seems like the logical setup.  Let me know if my assumption is wrong.

  self.user_questions.
    joins(:importance).                                             # Requires the relation between UserQuestion and Importance I described above
    where(:question_id => Question.joins(:user_questions).where(:user_id => user.id)). # This should create a where clause with a subselect with recent versions of ActiveRecord
    sum(:value)                                                     # I'm also assuming that the importances table has a `value` column.
end

def actual_score(user)
  user_questions.
    joins(:importance, :accepted_answers).  # It looks like accepted_answers indicates an answers table
    where(:answer_id => Answer.joins(:user_questions).where(:user_id => user.id)).
    sum(:value)
end 
```

UserQuestion 似乎是用户、问题、答案和重要性之间的超级连接模型。以下是与代码相关的模型关系（不包括您可以创建的 has_many :through 关系）。我想你可能已经有了这些：

```
# User
has_many :user_questions

# UserQuestion
belongs_to :user
belongs_to :question
belongs_to :importance, :foreign_key => :importance  # Maybe rename the column `importance` to `importance_id`
belongs_to :answer

# Question
has_many :user_questions

# Importance
has_many :user_questions

# Answer
has_many :user_questions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:25:26.077

所以这是我的新匹配功能。我还不能将所有内容都放在一个查询中，因为 SQLite 不支持数学函数。但是，一旦我切换到 MySQL，我就会将所有内容都放在一个查询中。所有这一切已经给我带来了巨大的性能提升：

```
Completed 200 OK in 528ms (Views: 116.5ms | ActiveRecord: 214.0ms) 
```

将一位用户与其他 100 位用户进行匹配。相当不错！一旦我用 10k 假用户填充我的数据库，我将不得不看看它的性能有多好。对“Ogz 向导”的额外赞誉指出了我效率低下的代码！

# 编辑：

仅使用 1000 个用户进行了尝试，每个用户有 10 到 100 个用户问题，并且...

```
Completed 200 OK in 104871ms (Views: 2146.0ms | ActiveRecord: 93780.5ms) 
```

......男孩做这需要很长时间！我将不得不想办法解决这个问题。

```
def match(user)
if self.common_questions(user) == []
  0.to_f
else
  @a_score = UserQuestion.find_by_sql(["SELECT 100.0*as1.actual_score/ps1.possible_score AS match
      FROM (SELECT SUM(imp.value) AS actual_score 
      FROM user_questions AS uq1
      INNER JOIN importances imp ON imp.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq2.question_id = uq1.question_id AND uq2.user_id = ?
      INNER JOIN accepted_answers aa ON aa.user_question_id =  uq1.id AND aa.answer_id = uq2.answer_id
      WHERE uq1.user_id = ?) AS as1, (SELECT SUM(value) AS possible_score 
      FROM user_questions AS uq1
      INNER JOIN importances ON importances.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq1.question_id = uq2.question_id AND uq2.user_id = ?
      WHERE uq1.user_id = ?) AS ps1",user.id, self.id, user.id, self.id]).collect(&:match).first.to_f
  @b_score = UserQuestion.find_by_sql(["SELECT 100.0*as1.actual_score/ps1.possible_score AS match
      FROM (SELECT SUM(imp.value) AS actual_score 
      FROM user_questions AS uq1
      INNER JOIN importances imp ON imp.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq2.question_id = uq1.question_id AND uq2.user_id = ?
      INNER JOIN accepted_answers aa ON aa.user_question_id =  uq1.id AND aa.answer_id = uq2.answer_id
      WHERE uq1.user_id = ?) AS as1, (SELECT SUM(value) AS possible_score 
      FROM user_questions AS uq1
      INNER JOIN importances ON importances.id = uq1.importance
      INNER JOIN user_questions uq2 ON uq1.question_id = uq2.question_id AND uq2.user_id = ?
      WHERE uq1.user_id = ?) AS ps1",self.id, user.id, self.id, user.id]).collect(&:match).first.to_f

  match = Math.sqrt(@a_score * @b_score) - (100 / self.common_questions(user).count)
  if match <= 0
    0.to_f
  else
    match
  end
end
end 
```

# ios - 如何创建/管理多个 ManagedObjectContexts？

> ID：12944815
> 
> 赞同：1
> 
> 时间：2012-10-17T23:13:18.363
> 
> 标签：ios, core-data

我有一个问题，我非常有信心从广义上知道它是什么以及如何解决它，但我不确定并且还没有找到实施解决方案的干净/最佳实践方法是什么.

我的问题：我正在使用 dispatch_async 在后台线程中将文件中的一些数据加载到我的核心数据模型中，除非我在 GUI 中执行也会影响模型然后爆炸的事情，否则它工作正常，例如：

```
'NSGenericException', reason: '*** Collection ... was mutated while being enumerated.' 
```

...我认为这是由于两个线程弄乱了同一个 ManagedObjectContext 中的数据，因为我目前只使用一个。

我读过的所有文章和答案都告诉我，我应该为后台线程使用单独的 ManagedObjectContext，但是如何/在哪里设置它？

我目前在我的 App Delegate 中创建我的 PersistentStoreCoordinator 和（一个）ManagedObjectContext，并将 ManagedObjectContext 传递给我的（唯一）View Coordinator。它又将其传递给后台数据加载任务（这是我的模型类之一的类方法），从而导致了问题。

我是不是该

1.  把PersistentStoreCoordinator传给ViewController，这样它又可以把它传给后台任务，这样后台任务就可以创建自己的本地ManagedObjectContext了？
2.  在 App Delegate 中创建一个 ManagedObjectContexts 池并将它们全部传递给 View Controller，以便它可以自己使用一个并将其他人交给后台任务？
3.  完全不同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T09:33:41.947

我仍然无法始终如一地重现该问题；它似乎高度依赖时间。但这是我为防止它所做的事情。

在视图控制器中：

```
- (void) loadNewStuff: (NSString *)stuffID
{
     dispatch_async(taskQueue, 
       ^(void){[MyModelClass loadNewStuff: stuffID withContext: myContext];}
     );
} 
```

在模型类中：

```
+ (void) loadNewStuff: (NSString *)stuffID withContext: (NSManagedObjectContext *)passedContext
{
  NSManagedObjectContext *localContext = [[NSManagedObjectContext alloc] init];
  [localContext setPersistentStoreCoordinator: passedContext.persistentStoreCoordinator];

  // load new stuff, save local context, finished

} 
```

...这样可以吗，还是我忽略了一些会严重咬我的东西？

（我使用的是 ARC，所以我假设不明确释放本地创建的上下文是可以的？）

# c# - 提交更改后，是否有通用方法让 EF 返回新模型数据和关联的模型数据？

> ID：12944820
> 
> 赞同：1
> 
> 时间：2012-10-17T23:13:36.367
> 
> 标签：c#, asp.net-mvc, entity-framework

给定以下两个模型：

```
public class Card
{
    public int CardId { get; set; }

    public Media Media { get; set; }
}

public class Media
{
    public int MediaId { get; set; }

    [Required]
    public string FileName { get; set; }
} 
```

以及以下控制器方法：

```
[HttpPost]
public ActionResult Create(Card card)
{
    db.Media.Attach(card.Media);

    ModelState.Remove("Media.FileName");

    if (ModelState.IsValid)
    {
        db.Cards.Add(card);                
        db.SaveChanges();
    }

    return JsonNetSerializedResult(card);
} 
```

我想创建一个新卡，但将它与现有的媒体对象相关联。我发布到“控制器/创建”并包含一个“Media.MediaId”参数，其中包含现有媒体记录的 ID，并让 EF 进行关联。

但是，在调用 SaveChanges() 之后，在 Card 实例上更新的唯一属性是 CardId。我还需要检索 Media.FileName 并在 Card 实例上设置该属性。

有没有一种通用的方法告诉 EF 我要返回更新后的 Card 数据，并返回提交数据的关联媒体数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:24:41.600

可能引起一些混乱的是您使用实体模型作为`ViewModel`.

我实际上建议创建**真正的**ViewModel 类，这些类代表控制器接收到的信息或用作视图的模型。不按原样使用实体模型。这似乎是额外的工作，但它确实让您可以更好地控制 UI 管理的内容以及实体的建模方式。

在这种情况下，您可能会拥有类似 a`NewCardModel`或只是简单的东西`CardModel`，它具有 UI 中显示的字段的属性，以及 Media 元素的 id。

然后您必须手动创建`Card`实例，填充信息（[自动映射](http://automapper.codeplex.com/)器会很有帮助），并且您需要`Media`通过 ID 查找实例并将该实例与新`Card`实例关联，然后再保存更改。

这个 SO 答案可能会更清楚地说明使用 ViewModels 的利弊： [https ://stackoverflow.com/a/10928437/1373170](https://stackoverflow.com/a/10928437/1373170)

# bash - 如何将重定向符号分配给变量以组装命令行

> ID：12944821
> 
> 赞同：4
> 
> 时间：2012-10-17T23:13:37.863
> 
> 标签：bash, shell, variables, redirect

我有几个 BASH 脚本可以启动我常用的程序，这些程序使用命令和参数的变量来使用公共参数。调用出现在最后，如下所示：

```
$PROGRAM $ARG1 $ARG2 & 
```

现在我想`/dev/null`默认将输出重定向到 stderr 和 stdout 。我希望能够通过切换到脚本（`-v`=详细）来禁用它。但是，如果我尝试分配`"2>&1 > /dev/null"`给一个 var，比如说`REDIRECTION`，（如果指定了详细，则清除它）并尝试像这样调用：

```
$PROGRAM $ARG1 $ARG2 $REDIRECTION & 
```

重定向指令作为参数传递给程序。有没有办法做到这一点？或者我是否必须使用我的解决方案，即有 2 个单独的调用行，一个有重定向指令，一个没有重定向指令，具体取决于“详细程度”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:38:52.777

一种选择是使用`eval`内置函数，它像 Bash 命令一样处理其参数，处理诸如重定向运算符之类的事情。然而，`eval`这是相当冒险的，因为它会重新处理它的*所有*参数，甚至那些已经被正确处理的参数，如果没有*完美*处理，这可能会导致奇怪或不安全的行为。

由于您的命令的两个版本之间唯一有问题的区别是是否存在重定向，因此更好的选择是使用`exec`内置命令。这个命令：

```
exec >/dev/null 2>&1 
```

将 shell 脚本剩余部分的 STDOUT 和 STDERR 重定向到`/dev/null`. 这个命令：

```
[[ "$IS_VERBOSE" ]] || exec >/dev/null 2>&1 
```

`exec >/dev/null 2>&1` *除非* `$IS_VERBOSE`是非空白，否则它将运行，在这种情况下它什么也不做。（你可以用`[[ "$IS_VERBOSE" ]]`你已经用来检测冗长的任何类型的条件表达式替换。）

所以，你想要的是这样的：

```
(
    [[ "$IS_VERBOSE" ]] || exec >/dev/null 2>&1
    "$PROGRAM" "$ARG1" "$ARG2" &
) 
```

括号`( ... )`是设置一个子shell，所以`exec`命令（如果运行）只影响到`)`.

（顺便说一句，请注意我将您的更改`2>&1 > /dev/null`为`> /dev/null 2>&1`：顺序很重要。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:01:36.207

与其尝试将 shell 语法编码到参数中，不如将每个重定向运算符的默认目标放在一个参数中，并允许一种方法覆盖默认值。

```
# A little bash-specific, but appropriate defaults should exist for the shell
# of your choice.
STDOUT=/dev/stdout
STDERR=/dev/stderr

if some-test; then
    STDOUT=some-other-file
fi

if some-other-test; then
    STDERR=different-file
fi

$PROGRAM $ARG1 $ARG2 > $STDOUT 2> $STDERR 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:38:14.493

您可以构建任何您喜欢的命令行，然后使用 eval 执行它：

```
line="echo hello"
if ....
    line="$line > junk.out"
fi

eval $line 
```

（但我可能会采用您建议的 2 行方法，因为它更易于阅读和理解......）

# string - Powershell - 将 System.Data.DataRow 解析为字符串

> ID：12944824
> 
> 赞同：14
> 
> 时间：2012-10-17T23:13:50.393
> 
> 标签：string, powershell, datarow

我需要关于如何将 SQL 查询的输出转换为 powershell 中的字符串的输入。我目前正在执行以下操作

```
function ExecuteFromScriptRowset($connectionParams, $file)
{
     return (invoke-sqlcmd @connectionParams 
             -inputFile $file -MaxCharLength 8000000)
} 
```

我使用上面的函数来调用一个 .sql 文件，它执行类似的操作

```
SELECT Names FROM tblXXX 
```

这是我用来调用 SQL 存储过程的实际 powershell 代码

```
$output = ExecuteFromScriptRowset $someDB (Resolve-Path '.\selectXXX.sql') 
```

输出是一个 System.Data.DataRow 数组，我需要将其转换为字符串数组。我目前正在尝试以下未按预期工作的

```
$formatOut = @()

for ($i=0; $i -le $output.Length; $i++)
{
    $formatOut = $formatOut + [string]$output[$i]
} 
```

这是 $formatOut 的输出在 for 循环之后，这不是我想要的

```
$formatOut[0] = System.Data.DataRow
$formatOut[1] = System.Data.DataRow
$formatOut[2] = System.Data.DataRow 
```

您能否让我知道我需要做什么，以便我创建一个包含 $output 对象内容的字符串数组

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-18T00:02:23.773

您所看到的完全正常，因为默认情况下`ToString`会输出对象类型。这是每个 .NET 规范。

您可以`DataRow`使用 将 a 转换为对象数组`ItemArray`，然后通过 "," 或您喜欢的任何连接方法加入，如下所示：

```
$formatOut = $formatOut + ($output[$i].ItemArray -join ",") 
```

# html - Twitter正在休眠问题

> ID：12944825
> 
> 赞同：0
> 
> 时间：2012-10-17T23:14:03.823
> 
> 标签：html, css, api, twitter, widget

我有一个使用 twitter 插件来收集最新帖子的网站，但是，twitter 显示文本“twitter 当前正在休眠”。

让客户添加新帖子，因为我认为一个解决方案可能是客户几周没有发布新帖子。他们添加了一个新帖子，我仍然遇到这个问题

![在此处输入图像描述](../Images/d6a10b60b2d8114239063b123ad131c0.png)

已经在网上搜索和研究过这个问题，但找不到以前遇到过这个问题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:38:27.660

嘿，这里有类似的问题。

有时他们会更新他们的小部件和插件，并且不让旧的继续工作。睡眠可能表明它很快就会醒来！为了安全起见，我可能会尝试使用来自 twitter.com 的更新的东西。烦人，是吗？

# postgresql - 将 postgresql 集群从 9.1 升级到 9.2 时出错

> ID：12944830
> 
> 赞同：3
> 
> 时间：2012-10-17T23:14:26.983
> 
> 标签：postgresql, postgresql-9.2

我在 Amazon EC2 上使用 Ubuntu 12.04 64 位。尝试将 postgresql 从 9.1 升级到 9.2。

```
$ uname -a
Linux db2 3.2.0-32-virtual #51-Ubuntu SMP Wed Sep 26 21:53:42 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ apt-cache policy postgresql
postgresql:
  Installed: 9.1+136~precise
  Candidate: 9.1+136~precise
  Version table:
 *** 9.1+136~precise 0
    500 http://ppa.launchpad.net/pitti/postgresql/ubuntu/ precise/main amd64                 Packages
    100 /var/lib/dpkg/status
 9.1+129ubuntu1 0
    500 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ precise-updates/main amd64 Packages
 9.1+129 0
    500 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ precise/main amd64 Packages 
```

我正在遵循的升级过程是：

```
$ sudo add-apt-repository ppa:pitti/postgresql
$ sudo apt-get update
$ sudo apt-get install postgres-9.2
$ sudo pg_dropcluster --stop 9.2 main
$ sudo pg_upgradecluster 9.1 main /var/lib/postgresql/9.2
Stopping old cluster...
Disabling connections to the old cluster during upgrade...
Restarting old cluster with restricted connections...
Creating new cluster (configuration: /etc/postgresql/9.2/main, data: /var/lib/postgresql/9.2)...
Moving configuration file /var/lib/postgresql/9.2/postgresql.conf to /etc/postgresql/9.2/main...
Moving configuration file /var/lib/postgresql/9.2/pg_hba.conf to /etc/postgresql/9.2/main...
Moving configuration file /var/lib/postgresql/9.2/pg_ident.conf to /etc/postgresql/9.2/main...
Configuring postgresql.conf to use port 5433...
Disabling connections to the new cluster during upgrade...
Roles, databases, schemas, ACLs...
Fixing hardcoded library paths for stored procedures...
ERROR:  cannot set transaction read-write mode during recovery
Error: Could not fix library paths
Re-enabling connections to the old cluster...
Re-enabling connections to the new cluster...
Error during cluster dumping, removing new cluster 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T00:02:03.483

您的问题的根本原因`hot_standby`是`on`在 中`postgresql.conf`，因此服务器是只读的。

一般来说，如果您在使用Debian 和 Ubuntu 中通常打包`pg_upgradecluster`的`pg_wrapper`工具时遇到问题，您可以进行手动集群升级：

*   启动旧服务器
*   `sudo -i -u postgres`
*   `for db in $(psql --tuples-only template1 -c "select datname from pg_database where datname not in ('template0','template1','postgres','template_postgis');"); do pg_dump -Fc -f $db.backup $db; done`
*   `pg_dumpall --globals-only > globals.sql`
*   停止旧服务器
*   `initdb`如果您已将其删除，则在新服务器上创建一个新集群。`pg_wrapper`我想你用这个`pg_createcluster`。
*   启动新服务器；仍然作为`postgres`用户：
*   `psql -f globals.sql`
*   `for backup in *.backup; do pg_restore --dbname postgres --create $backup; done`

或者，使用`pg_upgrade`工具工具就地转换您的数据库，但这可能会使`pg_wrapper`.

这些步骤可以通过使用`pg_dumpall`命令进行整个集群转储来简化，但我不太喜欢它。我认为恢复`pg_dumpall`转储在错误处理方面还有很多不足之处，很难从转储中提取单个数据库或表，并且不能在单个事务中全部恢复。我非常喜欢`pg_dumpall`只使用全局变量，如用户/组/角色，以及`pg_dump`单个数据库的每个数据库自定义格式备份，如上所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-09T13:56:06.777

如果您[从 apt 安装，](https://wiki.postgresql.org/wiki/Apt)则升级的一般步骤。

就我而言，从 pg11 到 pg12：

```
sudo apt update
sudo apt install postgresql-12
sudo systemctl stop postgresql@12-main #stop the autocreated/autostarted one
pg_dropcluster 12 main # drop it
sudo -u postgres pg_upgradecluster -v 12 11 main

sudo systemctl start postgresql@12-main
sudo -u postgres psql <yourdb> # up and test it 
```

# android - 为什么 MenuInflater 没有响应？

> ID：12944832
> 
> 赞同：0
> 
> 时间：2012-10-17T23:15:23.857
> 
> 标签：android, if-statement, menu, menuitem, inflate

我是 android 的菜鸟，我试图根据用户选择来膨胀两个不同的菜单。但是，菜单没有切换。无论用户选择什么，每次都会膨胀相同的菜单。我已经尝试并使用各种参数检查了我的 if/else 语句，但菜单充气机仍然无法通过仅充气同一个菜单来正确响应。任何帮助是极大的赞赏。

```
 @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    super.onCreateOptionsMenu(menu);
    popUpMenu = getMenuInflater();
    //popUpMenu.inflate(R.menu.cool_menu, menu);
    if(mypodcast==null){
        popUpMenu.inflate(R.menu.cool_menu, menu);
    }else  {
        popUpMenu.inflate(R.menu.podcast, menu);
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:27:31.313

> 无论用户选择什么，每次都会膨胀相同的菜单。

那是因为`onCreateOptionsMenu()`每次打开菜单时都不会从[文档](http://developer.android.com/reference/android/app/Activity.html#onCreateOptionsMenu%28android.view.Menu%29)中调用：

> 这只调用一次，第一次显示选项菜单。要在每次显示菜单时更新菜单，请参阅[onPrepareOptionsMenu(Menu)](http://developer.android.com/reference/android/app/Activity.html#onPrepareOptionsMenu%28android.view.Menu%29)

如果您想更改菜单，您需要在`onPrepareOptionsMenu()`. 但是，我不相信您可以或应该在每次`onPrepareOptionsMenu()`调用时都为新菜单充气。但是您可以结合这两个菜单并根据您在此方法中想要的内容更改每个菜单项的可见性。

# jsf-2 - 从消息驱动 Bean 中获取数据到 JSF 页面

> ID：12944833
> 
> 赞同：2
> 
> 时间：2012-10-17T23:15:28.830
> 
> 标签：jsf-2, primefaces, glassfish, ejb-3.1

我有一个接收 JMS 消息的消息驱动 bean，我想将其中的一些数据放入这些网页内的 JSF 组件（PrimeFaces）中。

我了解通过托管 bean 从 JSF 网页获取数据并进入 EJB，但我正朝着另一个方向前进，对此并不清楚。具体而言，不清楚如何从 EJB 调用和传递数据到托管 bean 以显示网页。

我的猜测是这看起来像......

（某些事件）---> 消息驱动 bean ---> 托管 bean ---> JSF 页面

当然，进入 MDB 的事件可以正常工作，但只有在显示此 JSF 网页时，托管 bean 才应该接受它自己的事件，以便它们可以显示在网页上。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:34:58.680

我认为您不希望 mdb 操纵 mb 的状态。

我认为你想要做的是让 mdb 触发一个 websockets 推送事件，让浏览器触发一个请求。

查看 primefaces 推送展示，看看这是否是您所追求的功能

[http://www.primefaces.org/showcase/push/facesmessage.jsf](http://www.primefaces.org/showcase/push/facesmessage.jsf)

# android - 如何使对话框适合图像？

> ID：12944837
> 
> 赞同：3
> 
> 时间：2012-10-17T23:15:50.407
> 
> 标签：android, image, dialog

我正在`DialogFragment`使用`ActionBarSherlock`. 我将图像的 id 传递给`DialogFragment`. 它仅包含 ImageView：

```
<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/imageF"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal" /> 
```

来自 DialogFragment 的代码：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.dialog, container, false);
        View iv = v.findViewById(R.id.imageF);
        ((ImageView) iv).setImageResource(imgId);
        return v;
    } 
```

但每次我得到这个：

![对话框不适合图像](../Images/a525c48d48c206857321b9e2bff1e6f9.png)

对话框不适合图像。`AlertDialog`我使用（也是相同的 SO [post](https://stackoverflow.com/questions/9303248/android-alert-dialog-does-not-fit-to-image) ）得到相同的行为。

尝试将图像设置为背景 ( `setBackgroundResource`) 时，图像适合对话框（图像填充屏幕截图中显示的未使用空间）。

如何避免这种情况并使对话框适合图像？有什么解决方法吗？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:29:40.170

经过长时间的搜索和许多不成功的尝试来解决这个问题，我找到了解决方案。

我需要设置`android:adjustViewBounds="true"`.

# file - 在 ext-js 中触发动态下载

> ID：12944844
> 
> 赞同：0
> 
> 时间：2012-10-17T23:16:38.417
> 
> 标签：file, extjs, download

我在 ext-js 中有一个带有“下载”按钮的网格，以便用户可以下载该网格的文件表示，我将在按下按钮时即时创建该网格。

但我不知道通过 EXT-JS 中的什么机制可以触发此下载。不确定 EXT-JS 是否有一些辅助函数，或者你是否只使用直接的 javascript（在这种情况下，你如何深入到内部来在 EXT-JS 中做到这一点？）

从按钮处理程序函数触发此下载的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T00:06:34.463

```
window.location = url_of_file 
```

虽然我记得 ExtJS 中有一些奇怪行为的问题，但我们通常在新窗口/标签中打开 url：

```
window.open(url_of_file); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:10:44.067

在 ExtJS 中，Button 类有一个 href 属性，可以设置为触发您尝试获取的资源的 HTTP GET。

编辑：在澄清您在这里尝试做的事情之后，您需要的是：URL 上的数据：[http ://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

这个技巧让你的浏览器认为它需要下载一个文件。您必须在客户端生成数据。有一些插件以这种方式工作：[http ://www.sencha.com/forum/showthread.php?146348-ExtJS-4-Grid-Printer-Plugin](http://www.sencha.com/forum/showthread.php?146348-ExtJS-4-Grid-Printer-Plugin)

另一个插件使用不同的方法：[https ://github.com/iwiznia/Ext.ux.Exporter](https://github.com/iwiznia/Ext.ux.Exporter)

# iphone - 检查设备是否为 iPad

> ID：12944847
> 
> 赞同：27
> 
> 时间：2012-10-17T23:17:03.013
> 
> 标签：iphone, ios, ipad, user-interface, ios6

这段代码有什么问题？我希望能够检查用户正在使用的当前设备是否是 iPad，但它一直给我错误。

```
if (UIUserInterfaceIdiom == UIUserInterfaceIdiomPad)
{
    //do stuff
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-17T23:19:26.803

您可以使用

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-06-13T19:16:36.697

在 Swift 中，您可以使用：

```
if UIDevice.current.userInterfaceIdiom == .pad {
    //do stuff
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-18T05:17:43.323

您必须检查设备是否为 iphone/ipad 的条件

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
//do ur  ipad logic
}else
{
//do ur  iphone logic
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-06T18:43:33.923

如果您使用的是 swift，请使用此

```
 if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiom.Pad)
    {
      // device is ipad
    }
    else
    {
        //  device is iPhone
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-27T18:22:37.160

> /* UI_USER_INTERFACE_IDIOM() 函数用于部署到低于 3.2 的 iOS 版本。如果您要为其部署的 iPhone/iOS 的最早版本是 3.2 或更高版本，您可以直接使用 -[UIDevice userInterfaceIdiom]。*/

`UIDevice.current.userInterfaceIdiom`除非您支持超级旧的 iOS，否则请更好地使用。

可能的情况如下：

```
public enum UIUserInterfaceIdiom : Int {
    case unspecified

    @available(iOS 3.2, *)
    case phone // iPhone and iPod touch style UI

    @available(iOS 3.2, *)
    case pad // iPad style UI

    @available(iOS 9.0, *)
    case tv // Apple TV style UI

    @available(iOS 9.0, *)
    case carPlay // CarPlay style UI
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-17T22:11:46.273

我的应用程序在 iPad 上作为 iPhone 专用应用程序运行，但我仍然需要检测设备是否为 iPad，以隐藏应用程序中与 Apple HealthKit 相关的某些功能，这些功能在 iPad 上不可用。我改用这种方法。

```
extension UIDevice {
    var isPad: Bool {
        get {
            return UIDevice.deviceInfo.lowercased().containsWord("ipados")
        }
    }
} 
```

# jquery-ui-datepicker - 在jquery datepicker中更改特定日期的背景颜色

> ID：12944853
> 
> 赞同：4
> 
> 时间：2012-10-17T23:18:03.543
> 
> 标签：jquery-ui-datepicker

我想知道如何在 a 中的日期上设置背景颜色`datePicker`；我遵循了很多教程，但没有得到任何结果。

我有这个日期选择器：

```
<div id="datepicker"></div> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-18T20:08:48.450

以防万一 Mongoose 的链接有一天变坏，最好在 StackOverflow 上发布完整的答案：

这是使用 jQueryUI 日期选择器的[beforeShowDay](https://api.jqueryui.com/datepicker/#option-beforeShowDay)函数的日期选择器的工作代码片段和屏幕截图：

```
$(document).ready(function() {
    var SelectedDates = {};
    SelectedDates[new Date('04/05/2016')] = new Date('04/05/2016');
    SelectedDates[new Date('05/04/2017')] = new Date('05/04/2017');
    SelectedDates[new Date('06/06/2018')] = new Date('06/06/2018');

    $('#txtDate').datepicker({
        beforeShowDay: function(date) {
            var Highlight = SelectedDates[date];
            if (Highlight) {
                return [true, "Highlighted", Highlight];
            }
            else {
                return [true, '', ''];
            }
        }
    });
});
```

```
body
{
    font-family:Arial;
    font-size : 10pt;
    padding:5px;
}

.Highlighted a{
   background-color : Green !important;
   background-image :none !important;
   color: White !important;
   font-weight:bold !important;
   font-size: 12pt;
}
```

```
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<input type='text' id='txtDate' />
```

[![它看起来像什么](../Images/0c4f69a9d6296d326ac5d06e7be9ed4d.png)](https://i.stack.imgur.com/HZ3pd.jpg)

小提琴： http: [//jsfiddle.net/jquerybyexample/cqf9d/ ?utm_source=website&utm_medium=embed&utm_campaign=cqf9d](http://jsfiddle.net/jquerybyexample/cqf9d/?utm_source=website&utm_medium=embed&utm_campaign=cqf9d)

文档：[beforeShowDay 上的 Jquery ui 文档](http://api.jqueryui.com/datepicker/#option-beforeShowDay)

# jquery - jQuery替换功能条html

> ID：12944859
> 
> 赞同：0
> 
> 时间：2012-10-17T23:18:50.233
> 
> 标签：jquery, google-chrome-extension

我正在开发一个 Chrome 扩展程序来操作我无法控制的网页，因此我无法编辑现有的 css 类和 html 代码。基于以下示例，我试图在段落中的两个单词之间插入文本：

```
<p class="abc">
<b>Title:</b>The Second Title
<br>
<b>Author:</b>Mary White
<br>
<b>Date:</b>2004
</p>
<p class="abc">
<b>Title:</b>The First Title
<br>
<b>Author:</b>John Smith
<br>
<b>Date:</b>2003
</p> 
```

我有一个名称列表，例如：

玛丽·怀特 -> 玛丽·B·怀特

约翰·史密斯 -> 约翰·L·史密斯

我需要用全名替换名字和姓氏，即：John Smith -> John L. Smith

我尝试了以下方法：

```
$(".abc:contains('Mary White')").text(function () {
  return $(this).text().replace("Mary White", "Mary B. White");
}); 
```

但这会删除`<b>`和`<br>`html 标签。

我也试过这个：

```
$(".htp:contains('John Smith')").replaceWith("John L. Smith"); 
```

但这会替换整个 p 并将其替换为全名。如何让它显示名称包含中间首字母的段落？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:20:16.967

因为[text()](http://api.jquery.com/text/)删除了标签，只给你文本。

使用[.html()](http://api.jquery.com/html/)，但如果名称中有任何 html 标记，您的代码将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:38:25.990

这可能是你想要的：

```
$(function() {
    $(".abc").each(function(idx, elm) {
        elm.innerHTML = elm.innerHTML.replace("Mary White", "Mary B. White");
    });
});​ 
```

[jsfiddle链接](http://jsfiddle.net/DVex7/)

# json - http 跟踪实用程序

> ID：12944862
> 
> 赞同：0
> 
> 时间：2012-10-17T23:18:59.187
> 
> 标签：json, http, proxy, trace, packet-sniffers

我需要跟踪/嗅探来自其他机器的 http 流量（例如来自我的 android 手机或 ios 设备）。过去我使用 MSSOAPT（在此处描述[http://www.devproconnections.com/article/net-framework2/microsoft-soap-trace-tool](http://www.devproconnections.com/article/net-framework2/microsoft-soap-trace-tool)）并且它非常完美，我需要类似的东西，现在它应该有语法突出显示对于 json 并能够解压缩内容:)。

我想告诉我的 android 去[http://my.machine.home/Foo?bar](http://my.machine.home/Foo?bar)并且这个代理应该把它转发到其他服务器，比如[http://google.com/Foo?bar](http://google.com/Foo?bar)它应该打印完成交通。

如果解决方案不需要在我的设备上进行代理配置，我更愿意，而只是将所有发送到进程的请求转发。

它不一定是免费的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:20:20.553

如果你在 Windows 上，[Fiddler](http://www.fiddler2.com/fiddler2/)是一个很棒的免费工具。

在其他平台上，您可以使用免费和开源的[WebScarab](http://owasp.com/index.php/Category%3aOWASP_WebScarab_Project)。UI 不像 Fiddler 那样易于使用，虽然它在 Windows 上运行，但我更喜欢那里的 Fiddler。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:23:40.813

看看[charle proxy](http://www.charlesproxy.com/)，它非常易于使用，并且满足您的所有要求。

# objective-c - 是否有可通过 XCode 直接访问的 Apple 的 Objective C/Cocoa API 的文档？

> ID：12944863
> 
> 赞同：0
> 
> 时间：2012-10-17T23:19:00.797
> 
> 标签：objective-c, xcode, cocoa, api, documentation

我找不到将鼠标悬停或右键单击对象及其成员的方法，并获得比它们包含的成员（对于对象）或它们采用的参数（对于方法）更多的信息。

每当我对 Sun 的 Java API 中的任何内容有疑问时，无论是对象（如 File 或 SwingWorker）还是方法（如 substring() 或 readLine()），我都来自 java 背景，我可以访问他们的文档在 netbeans 或 eclipse 中与 ctrl-space 或右键单击一致。

有没有办法在 Xcode 中为 Apple 的 Objective-C/Cocoa API 做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:24:13.480

按住 Option 键单击您想了解的更多信息。当您按住选项 (alt) 时，您应该会看到光标变成一个问号（将鼠标悬停在可以实际提供文档的符号上时）。单击一个项目会在弹出窗口中显示相关文档。您可以使用弹出框底部的链接进一步钻取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T23:37:14.853

编辑器右侧有一个检查器，可以快速显示插入点所在符号的文档，因此您甚至不需要在 Organizer 中查看他的文档。

![快速帮助](../Images/138a2992805c9681070dd1c0c75148d3.png)

此外，当您的程序运行时，您可以将鼠标悬停在变量上并查看其值。如果变量指向一个对象，您可以看到它的成员，并且您可以深入了解这些成员。

![调试](../Images/a4213cbb3755a8219ea74e6b41f2422d.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:24:26.960

有。转到 xcode 的管理器并切换到文档部分。

# colors - vim颜色方案显示不正确的颜色

> ID：12944874
> 
> 赞同：4
> 
> 时间：2012-10-17T23:19:48.920
> 
> 标签：colors, vim

我刚刚抓住了带有一堆配色方案的“终极 Vim 发行版”（http://vim.spf13.com/）。

出于某种原因，在我的 .vimrc 中设置颜色方案（例如“colorscheme 公司”）会导致与颜色方案实际定义的颜色完全不同。此外，*一旦 vim 加载文件，手动输入 :colorscheme Corporation*会导致颜色更改为正确的方案。

在加载文件时，":colo" 和 "echo g:colors_name" 都打印出 "corporation"，它们应该如此。在设置颜色方案之前将“t_Co”设置为 256（如果重要的话）。我完全没主意了！！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:45:52.530

它似乎是一个仅 GUI 的配色方案。除非您想编写终端版本，否则您无能为力。

当你看到一个配色方案不符合预期时，你总是可以在 GVim 中尝试使用`:gui<cr>`. 如果您查看代码，它仅具有 GUI 样式。这是该方案的示例行：

`hi FoldColumn gui=italic guifg=#192224 guibg=#A1A6A8`

这是来自 Molokai 的一句话，它是 GUI 和 Vim 终端版本的配色方案：

`hi FoldColumn ctermfg=67 ctermbg=16`

如您所见，颜色不是 RGB 值。`cterm`代表颜色术语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:41:30.000

当颜色方案只为 GVIM（Vim 的 GUI 版本）定义颜色时，如果您有支持 88 或 256 色的高彩终端，则可以使用[CApprox 插件](http://www.vim.org/scripts/script.php?script_id=2390)（一次或在 Vim 启动期间自动）转换颜色定义为终端。

# bluetooth - iOS BLE - 如何在后台保持应用程序处于活动状态？

> ID：12944876
> 
> 赞同：1
> 
> 时间：2012-10-17T23:20:06.060
> 
> 标签：bluetooth, ios6, core-bluetooth, bluetooth-lowenergy

我试图找到一种聪明的方法来让 BLE 应用程序在 iOS 6 的后台保持活动状态，而不会违反 Apple 的任何规则。我计划将手机用作外围设备，并将另一个 BLE 电路用作中央设备。当用户使用地理围栏到达建筑物时，我的应用程序将自动打开。之后，iPhone 将连接到它看到的第一个 BLE 中央设备（该设备将在其白名单中）。然后，用户将能够在整个建筑物中移动，切换到不同的 BLE“节点”。

我的问题是：当用户在办公桌前静止不动时，我需要在后台做什么才能使应用程序不会因内存资源而暂停？

我的想法是基于这个解决一个单独问题的解决方案：在一个只有几个 BLE“节点”的区域中可能（不经常）有 10-50 个用户，我在 bluetooth.org 上读到我可以设置一个动态连接系统，基本上是通过所有用户轮换连接。

我的想法是设置一个类似的动态系统，其中中央设备（不是 iPhone）定期（30-40 分钟）断开设备连接，然后 iPhone 将重新连接。

这是可行的吗？这是否违反 iOS 开发指南？我找不到任何关于此的明确内容。我也在iOS开发者论坛上问过，可惜没有这个网站那么受欢迎。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-15T21:17:33.660

Xcode -> 项目目标 -> 功能 -> 启用后台模式

检查使用蓝牙 LE 配件

[能力](https://i.stack.imgur.com/bwynj.png)

还要在 .plist 文件中启用以下键

所需的后台模式

应用程序使用 CoreBluetooth 进行通信

[列表](https://i.stack.imgur.com/s59Ii.png)

# .net - 3rd 方和 javascript 的 web api 身份验证

> ID：12944880
> 
> 赞同：0
> 
> 时间：2012-10-17T23:20:20.490
> 
> 标签：.net, security, authentication, asp.net-mvc-4, asp.net-web-api

我目前正在我的 mvc4 应用程序中实现 web api，并且对验证 web api 服务的调用者有疑问。

在我的 web 应用程序中，web api 将用于 2 个不同的原因。首先，我的 javascript 与服务器通信，其次是第三方组件与我的应用程序通信。

因此，我想对服务的调用者进行身份验证。在标头中为任一呼叫者传递用户名和密码是直截了当的，但标头可以被非法人员嗅探。如果我将服务设为 https，这将防止这种情况发生，但它会导致我的 js 在富应用程序中调用它时出现性能问题。

我已经查看了网络上的示例，但目前还没有找到涵盖 mt 场景并保护我的服务的解决方案。我有兴趣听到有关如何解决此问题的建议？例如，现有公司如何保护他们的服务，例如 twitter。我想保护我的服务、允许的第三方和我的 javascript。请教育我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:34:43.440

一种方法是使用数字签名。客户端计算请求数据（POST 或 GET 参数）的哈希值并使用密钥对哈希值进行签名，并将签名放入请求标头中。然后服务器验证签名的哈希。

为了防止重放攻击，您可能希望每个请求都包含一个永远不能重复使用的随机数值。这通常被实现为一个不断增加的整数值（例如时间戳），其中服务器存储给定键的最后使用值并拒绝允许数字低于最后使用值的请求。

有两种常见的方法来实现这一点，一种是使用 HMAC 签名，其中客户端和服务器共享一个用于签署请求的公共“秘密”（密钥）。这很简单，但需要您将秘密存储在服务器上（并适当地保护它们）。

第二种方法是使用非对称密钥（例如 RSA），客户端使用他们的私钥对请求进行签名，然后您使用他们的公钥验证签名。这稍微复杂一些，但不需要您在服务器上存储和保护私钥 - 只有客户端需要。

# haskell - haskell 和大二进制

> ID：12944881
> 
> 赞同：2
> 
> 时间：2012-10-17T23:20:39.437
> 
> 标签：haskell, io, binary, stm

通过 TChan 广播 BinaryString 时，复制了整个 Binary 还是仅复制了引用？

* * *

如果整个二进制文件被复制如何只发送参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:24:25.747

仅将引用写入`TChan`，不会复制有效负载。一直复制所有数据效率太低了，而且由于数据是不可变的（通常，您可以作弊），因此仅传输引用是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T09:42:55.630

比 Daniel 更准确一点（并在他的评论中确认 Daniels 的怀疑）：将指向 BinaryString 的构造函数的指针（你的意思是 ByteString 吗？）写入 TVar。

让我们通过检查相关代码来确认。`TChan`建立在 上`TVar`，并用于`writeTVar`写入值，该值在中实现（并由and`GHC.Conc.Sync`重新导出）：`GHC.Cont``Control.Concurrent.STM.TVar`

```
-- |Write the supplied value into a TVar
writeTVar :: TVar a -> a -> STM ()
writeTVar (TVar tvar#) val = STM $ \s1# ->
    case writeTVar# tvar# val s1# of
         s2# -> (# s2#, () #) 
```

参数只是传递给函数`writeTVar#`，这是一个基本操作，在以下位置实现`rts/PrimOps.cmm`：

```
stg_writeTVarzh
{
  W_ trec;
  W_ tvar;
  W_ new_value;

  /* Args: R1 = TVar closure */
  /*       R2 = New value    */

  MAYBE_GC (R1_PTR & R2_PTR, stg_writeTVarzh); // Call to stmWriteTVar may allocate
  trec = StgTSO_trec(CurrentTSO);
  tvar = R1;
  new_value = R2;
  foreign "C" stmWriteTVar(MyCapability() "ptr", trec "ptr", tvar "ptr", new_value "ptr") [];

  jump %ENTRY_CODE(Sp(0));
} 
```

这将以下代码包装在`rts/STM.c`：

```
void stmWriteTVar(Capability *cap,
                  StgTRecHeader *trec,
                  StgTVar *tvar, 
                  StgClosure *new_value) {

  StgTRecHeader *entry_in = NULL;
  TRecEntry *entry = NULL;
  TRACE("%p : stmWriteTVar(%p, %p)", trec, tvar, new_value);
  ASSERT (trec != NO_TREC);
  ASSERT (trec -> state == TREC_ACTIVE || 
          trec -> state == TREC_CONDEMNED);

  entry = get_entry_for(trec, tvar, &entry_in);

  if (entry != NULL) {
    if (entry_in == trec) {
      // Entry found in our trec
      entry -> new_value = new_value;
    } else {
      // Entry found in another trec
      TRecEntry *new_entry = get_new_entry(cap, trec);
      new_entry -> tvar = tvar;
      new_entry -> expected_value = entry -> expected_value;
      new_entry -> new_value = new_value;
    } 
  } else {
    // No entry found
    StgClosure *current_value = read_current_value(trec, tvar);
    TRecEntry *new_entry = get_new_entry(cap, trec);
    new_entry -> tvar = tvar;
    new_entry -> expected_value = current_value;
    new_entry -> new_value = new_value;
  }

  TRACE("%p : stmWriteTVar done", trec);
} 
```

在这里，我们看到这`new_value`是一个从未被查看过的指针，并被如此存储。

# python - 如何通过生成器或其他方式在 Python 中无限循环迭代器？

> ID：12944882
> 
> 赞同：38
> 
> 时间：2012-10-17T23:20:40.973
> 
> 标签：python, loops, generator

据我了解，使用生成器是实现此类目标的最佳方式，但我愿意接受建议。

具体来说，一个用例是这样的：我想在另一个列表旁边打印一些项目，任意长度，必要时截断初始迭代器。

这是演示我想要的确切示例行为的工作 python 代码：

```
 def loop_list(iterable):
        """
        Return a Generator that will infinitely repeat the given iterable.

        >>> l = loop_list(['sam', 'max'])
        >>> for i in range(1, 11):
        ...     print i, l.next()
        ... 
        1 sam
        2 max
        3 sam
        4 max
        5 sam
        6 max
        7 sam
        8 max
        9 sam
        10 max

        >>> l = loop_list(['sam', 'max'])
        >>> for i in range(1, 2):
        ...     print i, l.next()
        ... 
        1 sam
        """
        iterable = tuple(iterable)
        l = len(iterable)
        num = 0
        while num < l:
            yield iterable[num]
            num += 1
            if num >= l:
                num = 0 
```

## 问题/我的问题

您可能已经注意到，这仅适用于实现的列表/元组/迭代`__getitem__`（如果我没记错的话）。理想情况下，我希望能够传递任何可迭代对象，并接收一个可以正确循环其内容的生成器。

如果有更好的方法可以在**没有**生成器的情况下执行此类操作，我也可以。

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-10-17T23:23:51.453

您可以使用[`itertools.cycle`](http://docs.python.org/library/itertools.html#itertools.cycle)（链接页面上包含的源代码）。

```
import itertools

a = [1, 2, 3]

for element in itertools.cycle(a):
    print element

# -> 1 2 3 1 2 3 1 2 3 1 2 3 ... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-05-02T15:09:01.417

试试这个-

```
L = [10,20,30,40]

def gentr_fn(alist):
    while 1:
        for j in alist:
            yield j

a = gentr_fn(L)
print a.next()
print a.next()
print a.next()
print a.next()
print a.next()
print a.next()
print a.next()

>>gentr_fn(x,y)
10 20 30 40 10 20 30 ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-10T14:29:48.170

您可以使用模块来保持简单。只要确保不要从 0 开始迭代。

```
 my_list = ['sam', 'max']

for i in range(1, 100):
    print(my_list[(i % len(my_list))-1]) 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-02-25T12:28:25.760

您可以遍历一个列表，将一个项目附加到它：

```
somelist = [item1, item2, item3]
for item in somelist:
    somelist.append(item)
    do_something() 
```

# python - Python 简单语句的语法是什么？

> ID：12944888
> 
> 赞同：0
> 
> 时间：2012-10-17T23:21:15.103
> 
> 标签：python

我阅读了这份文档： [http ://docs.python.org/reference/simple_stmts.html](http://docs.python.org/reference/simple_stmts.html)

现在，我想创建它所描述的语句。例如，连接多个断言和打印语句的语句。语法不清楚。我将如何使用`::=`运算符？

如果有一个明确的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T23:25:43.930

我认为您将 Python 语法参考与实际 Python 代码示例混淆了。与 的部分`::=`正式描述了[Backus-Naur 形式](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)的 Python 语句的结构。其他示例展示了实际的 Python 代码，以及形式语法在实践中的样子。

例如，语法元素`assert_stmt`具有以下形式：

```
assert_stmt ::= "assert" expression ["," expression] 
```

这描述了实际 Python 断言语句的结构，例如：

```
assert (2 + 2 == 4), "The world is ending!" 
```

语法中被引用的元素，称为*终端*，在 Python 语法中逐字出现。例如，这些包括`assert`关键字和逗号。未加引号的部分指的是其他语法元素，称为*非终结符*；例如，`expression`对应于返回值的 Python 表达式。括号中的语法元素`[]`表示可选性，因此`expression ["," expression]`指的是一个或两个表达式的逗号分隔列表。

# c#-4.0 - 通过 SoftwareProductLicensing 类查找 Windows 激活的问题

> ID：12944891
> 
> 赞同：2
> 
> 时间：2012-10-17T23:21:58.527
> 
> 标签：c#-4.0, wmi, wmi-query

我正在使用下面的代码来确定 Windows7 的激活。我得到 7 个实例/产品。我不清楚哪个产品指的是原始 Windows 7。

我无法找到有关检查哪个实例以确定 Windows 是否已激活的文档

```
 //use a SelectQuery to tell what we're searching in
        SelectQuery searchQuery = new SelectQuery("SELECT * FROM SoftwareLicensingProduct");

        //set the search up
        ManagementObjectSearcher searcherObj = new ManagementObjectSearcher(scope, searchQuery);

        //get the results into a collection
        using (ManagementObjectCollection obj = searcherObj.Get())
        {
            foreach (ManagementObject m in obj)
        {
            if (Convert.ToInt32(m["GracePeriodRemaining"].ToString()) == 0)
            {
                MessageBox.Show("Windows is active");
                break;
            }
            else
            {
                MessageBox.Show(" Windows is not active");
                break;
            }
        }
            //now loop through the collection looking for
            //an activation status

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T00:58:18.060

当您使用[`SoftwareLicensingProduct`](http://msdn.microsoft.com/en-us/library/windows/desktop/cc534596%28v=vs.85%29.aspx)WMI 类时，由于 Windows Vista 中引入的批量许可功能，会返回多个实例，因此要仅返回您的 Windows 版本的实例，您必须使用`PartialProductKey`, `ApplicationId`和`LicenseIsAddon`属性过滤 WQL 语句。

试试这个样本

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM SoftwareLicensingProduct Where PartialProductKey <> null AND ApplicationId='55c92734-d682-4d71-983e-d6ec3f16059f' AND LicenseIsAddon=False");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}", "Name", (String)WmiObject["Name"]);
                    Console.WriteLine("{0,-35} {1,-40}", "GracePeriodRemaining", (UInt32) WmiObject["GracePeriodRemaining"]);// Uint32
                    switch ((UInt32)WmiObject["LicenseStatus"])
                    {
                        case 0: Console.WriteLine("{0,-35} {1,-40}", "LicenseStatus", "Unlicensed");
                                break;
                        case 1: Console.WriteLine("{0,-35} {1,-40}", "LicenseStatus", "Licensed");
                                break;
                        case 2: Console.WriteLine("{0,-35} {1,-40}", "LicenseStatus", "Out-Of-Box Grace Period");
                                break;
                        case 3: Console.WriteLine("{0,-35} {1,-40}", "LicenseStatus", "Out-Of-Tolerance Grace Period");
                                break;
                        case 4: Console.WriteLine("{0,-35} {1,-40}", "LicenseStatus", "on-Genuine Grace Period");
                                break;
                        case 5: Console.WriteLine("{0,-35} {1,-40}", "LicenseStatus", "Notification");
                                break;
                    }
                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

另一种选择是使用该[`SLIsGenuineLocal`](http://msdn.microsoft.com/en-us/library/aa965837%28VS.85%29.aspx)功能。

试试这个问题的答案以[`Determine Genuine Windows Installation in C#`](https://stackoverflow.com/questions/1552392/determine-genuine-windows-installation-in-c-sharp)获得 C# 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T01:05:30.637

Windows® 7，VOLUME_KMSCLIENT 频道指的是实际产品。这可以在描述属性中找到

```
 string ComputerName = "localhost";
    ManagementScope Scope;                
    Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

     Scope.Connect();
     SelectQuery searchQuery = new SelectQuery("SELECT * FROM SoftwareLicensingProduct");

        //set the search up
        ManagementObjectSearcher searcherObj = new ManagementObjectSearcher(Scope, searchQuery);

        //get the results into a collection
        using (ManagementObjectCollection obj = searcherObj.Get())
        {

            foreach (ManagementObject m in obj)
            {
                String s = m["Description"].ToString();
                if ((m["Description"].ToString()) .Contains("VOLUME_KMSCLIENT channel"))
                {
                    if (m["LicenseStatus"].ToString() == "1")
                    {
                        var gracePeriod = Convert.ToInt32(m["GracePeriodRemaining"]) / (60 * 24);
                        MessageBox.Show("Not Licensed " + " Grace Period Remaining--" + gracePeriod.ToString() + "days");

                    }
                    else
                    {
                        var gracePeriod = Convert.ToInt32(m["GracePeriodRemaining"]) / (60 * 24);
                        MessageBox.Show("Not Licensed " + " Grace Period Remaining--" + gracePeriod.ToString() + "days");
                    }
                }

            }
        } 
```

# arrays - 这个 MIPS 数组 + 循环在做什么？

> ID：12944893
> 
> 赞同：0
> 
> 时间：2012-10-17T23:22:24.650
> 
> 标签：arrays, loops, assembly, mips, mips32

MIPS 新手，可以准确理解代码的运行情况，但我不理解所提供的答案/解决方案。任何帮助将不胜感激。

1.  请阅读以下代码，并在函数返回后记下数组 A 中的内容。

    ```
     .data
    A:  .word 21,3,2,9,100,22,6,15,33,90

        .text
        .globl main
    main:
        la $a0, A
        li $a1, 17
        li $a2, 10
        jal funct

        li $v0, 10      # exit
        syscall

    funct:
        li $t0, 0
        li $v1, 1000000
    funct_L0:   
        sll $t1, $t0, 2
        add $t1, $t1, $a0
        lw $t1, 0($t1)  
        sub $t2, $t1, $a1
        bgt $t2, $0, funct_L1
        sub $t2, $0, $t2
    funct_L1:
        bgt $t2, $v1, funct_L2
        ori $v0, $t0, 0
        ori $v1, $t2, 0
    funct_L2:
        addi $t0, $t0, 1
        blt $t0, $a2, funct_L0
        jr $ra 
    ```

解决方案：找到最小的差异

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:52:54.953

它从数组中找到最接近传入的数字的元素`$a1`。换句话说，它找到`x`差异`abs(x - $a1)`最小的元素。它返回 in 中的索引和 in 中`$v0`的差异`$v1`。

# java - 了解 public static void main(String[] args)

> ID：12944894
> 
> 赞同：2
> 
> 时间：2012-10-17T23:22:27.180
> 
> 标签：java

我是一名尝试学习 Java 的 PHP/Mysql 程序员，但我一直坚持如何在其中编译文件：

```
public static void main(String[] args) 
```

这是示例代码：

```
import java.net.*;
import java.io.*;

public class GreetingClient
{
public static void main(String [] args)
{
  String serverName = args[0];
  int port = Integer.parseInt(args[1]);
  try
  {
     System.out.println("Connecting to " + serverName
                         + " on port " + port);
     Socket client = new Socket(serverName, port);
     System.out.println("Just connected to "
                  + client.getRemoteSocketAddress());
     OutputStream outToServer = client.getOutputStream();
     DataOutputStream out =
                   new DataOutputStream(outToServer);

     out.writeUTF("Hello from "
                  + client.getLocalSocketAddress());
     InputStream inFromServer = client.getInputStream();
     DataInputStream in =
                    new DataInputStream(inFromServer);
     System.out.println("Server says " + in.readUTF());
     client.close();
  }catch(IOException e)
  {
     e.printStackTrace();
  }
}
} 
```

当运行尝试在 Windows 命令提示符下使用 javac 命令将其从 .java 文件编译为要在网页中调用的 .class 文件时，我收到一条错误消息：

```
bad class file: .\String.java
file does not contain class String
Please remove or make sure it appears in the correct subdirectory of the classpath.

public static void main(String[] args) { 
```

如果像这样编译一个 .java 文件：

```
import java.applet.Applet;
import java.net.InetAddress;
import java.net.UnknownHostException;
import java.util.Properties;
public class applet_test extends Applet {
private InetAddress addr = null;
public void init() {
    try {
        addr = InetAddress.getLocalHost();
    }
    catch (UnknownHostException e) {
        System.exit(0);
    }
}
public InetAddress getLHost() {
    return addr;
}

} 
```

我没有收到任何错误，.java 文件编译成 .class 文件，我可以在网页中使用 .class 文件就好了。

不知道我做错了什么。

多谢你们！

* * *

好的，所以现在，当我运行这个命令时：

```
C:\ > javac GreetingClient.java 
```

我明白了：

```
GreetingClient.java:9: cannot find symbol
symbol  : method parseInt(GreetingClient)
location: class java.lang.Integer
  int port = Integer.parseInt(args[1]);
                    ^
GreetingClient.java:14: cannot find symbol
symbol  : constructor Socket(GreetingClient,int)
location: class java.net.Socket
     Socket client = new Socket(serverName, port);
                     ^
2 errors 
```

同样，我似乎只在对包含以下行的文件运行 javac 命令时出现错误：

```
 public static void main(String[] args) 
```

我知道我错过了一些东西，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T23:24:26.657

由于您的文件包含`class GreetingClient`，因此必须将其命名为`GreetingClient.java`. Java 要求文件的名称与其中定义的类的名称相匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:37:27.540

在 Java 中，您的主类必须包含`public static void main(String[] args)`才能对其进行初始化。如果您有多个类，则另一个将是公正的`class Class_Name {}`，正如 Greg Hewgill 所说：您的 Java 文件的名称**必须**与您的主类名称相同

# json.net - 如何将自定义 JsonConverter 与 NServiceBus 一起使用？

> ID：12944914
> 
> 赞同：1
> 
> 时间：2012-10-17T23:24:25.933
> 
> 标签：json.net, nservicebus

我有一个需要自定义 JsonConverter 才能正确反序列化的类。它是一个值对象（在 DDD 术语中），当使用 Json 序列化时，我需要将它包含在使用 NServiceBus 发送的消息中。

问题是，由于 NServiceBus 将他们的 Json.Net 副本内部化，我必须使用 NSB 中包含的 JsonConverter 基类，但在合并期间它已被标记为“内部”。

这基本上可以防止您将任何自定义序列化代码挂钩到 NSB。这是设计使然吗？有推荐的解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T00:00:45.840

如果您遇到合并程序集的问题，您可以[在 github 的下载页面上](https://github.com/NServiceBus/NServiceBus/downloads)找到仅核心程序集。

# objective-c - Objective-C：同步块和 GCD

> ID：12944915
> 
> 赞同：0
> 
> 时间：2012-10-17T23:24:31.400
> 
> 标签：objective-c, opengl, grand-central-dispatch, synchronized

我有一个 OpenGL 应用程序，它需要在显示数据之前在后台执行一些计算。

按顺序，我正在做的是：

1.  `prepareData`（调用后台线程）
2.  `_doLongComputation`（在后台线程中，调用`_transferToGPU`）
3.  `_transferToGPU`（主线程）

由于我`synchronized`在同一个对象上使用块，因此`glData`不应由多个线程同时访问关键部分，但不幸的是，情况并非如此，我不知道为什么。

有任何想法吗？

*代码的重要部分如下：*

```
@property (atomic, retain) NSData *glData;

...snip snip...

- (void) _doLongComputation {
  @synchronized (glData) {
    // Create a buffer (long operation, done in C++)
    unsigned long size;
    unsigned char* buffer = createBuffer(&size);

    // Create NSData to hold it safely
    self.glData = [NSData dataWithBytesNoCopy:buffer length:size freeWhenDone:YES];
  }

  // Don't wand to deal with locking the OpenGL context,
  // so we do all the OpenGL-related stuff in the main queue
  dispatch_async (dispatch_get_main_queue(), ^{
    [self _transferToGPU];
  });
}

- (void) _transferToGPU {
  @synchronized (glData) {
    ...snip snip...

    // Transfer buffer to GPU
    glBufferData(GL_ARRAY_BUFFER,
                 glData.length,
                 glData.bytes,
                 GL_STATIC_DRAW);

    // We're done, so set the buffer to nil
    self.glData = nil;
  }
}

- (void) prepareData {
  [self performSelectorInBackground:@selector(_doLongComputation)];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:32:54.773

我认为您应该改为在 self 上同步。

对变量进行同步在概念上会使用该变量指向的地址创建一个隐式互斥锁。如果变量指向不同的对象，它将是不同的互斥体，即使它在您的代码中仍然是同一个变量。这意味着在`@synchronized(glData)`块中设置 glData 会破坏同步尝试的目的。

# java - 使用 ejb ql 从数据库中选择随机行

> ID：12944918
> 
> 赞同：1
> 
> 时间：2012-10-17T23:24:45.307
> 
> 标签：java, select, jpa, random, ejbql

我正在开发一个用于广告房地产的网络应用程序。在搜索页面上，我想显示一些随机广告，但到目前为止，我还没有成功从数据库中选择随机记录。这在控制台中有效，但我无法真正将其放入 EJB QL：

```
SELECT * FROM RealEstate ORDER BY RANDOM() 
```

我尝试了什么：

```
Random random = new Random();
Query q = em.createQuery("SELECT r FROM RealEstate r ORDER BY :random");
q.setParameter("random", random.nextInt());
return q.getResultList(); 
```

当我写一个数字而不是 :random 参数时，它似乎起作用了，但是我遇到了一个异常。我试图用 NativeQuery 解决问题

```
Query q = em.createNativeQuery("SELECT * FROM RealEstate ORDER BY RANDOM()");
List<RealEstate> resL = q.getResultList(); 
```

但是当我尝试在网页上显示广告时，这些字段出现了问题。我猜是因为结果列表中有对象而不是房地产。我使用连接类型继承，我不知道它是否会干扰 nativequery 的使用，但我更喜欢使用 ejb ql 查询。我对任何想法持开放态度。

注意：我知道我选择了所有记录，只是顺序不同，下一步将限制结果集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T05:31:35.910

我想你几乎解决了你自己的问题。

我会检索记录数

```
Integer singleResult = em.createQuery("SELECT count(r) FROM RealEstate r", Integer.class).getSingleResult(); 
```

然后，我会从中创建一个随机数，最后

```
 Random random = new Random();

        RealEstate RealEstate = em.createQuery("SELECT r FROM RealEstate r", RealEstate.class)
            .setFirstResult(random.nextInt(size))
            .setMaxResults(1) 
            .getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-16T12:04:26.977

***我会为随机数据***做这样的事情

 *```
SELECT column FROM table  
ORDER BY RAND () 
```

感谢 javatpoint 不错的教程

[javatpoint 看看这里](http://www.javatpoint.com/sql-order-by-random)*

# r - 从表到 data.frame

> ID：12944921
> 
> 赞同：0
> 
> 时间：2012-10-17T23:24:53.387
> 
> 标签：r, dataframe

我有一个看起来像的表：

```
dat = data.frame(expand.grid(x = 1:10, y = 1:10),
             z = sample(LETTERS[1:3], size = 100, replace = TRUE))
tabl <- with(dat, table(z, y))

tabl
   y
z   1 2 3 4 5 6 7 8 9 10
  A 5 3 1 1 3 6 3 7 2  4
  B 4 5 3 6 5 1 3 1 4  4
  C 1 2 6 3 2 3 4 2 4  2 
```

现在我如何将它转换成一个看起来像的 data.frame

```
 1 2 3 4 5 6 7 8 9 10
  A 5 3 1 1 3 6 3 7 2  4
  B 4 5 3 6 5 1 3 1 4  4
  C 1 2 6 3 2 3 4 2 4  2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:29:24.010

这里有几个选项。`as.data.frame(tabl)`不起作用的原因 是它分派给 S3 方法，该方法`as.data.frame.table()`做了一些有用但与您想要的不同的事情。

```
as.data.frame.matrix(tabl)
#   1 2 3 4 5 6 7 8 9 10
# A 5 4 3 1 1 3 3 2 6  2
# B 1 4 3 4 5 3 4 4 3  3
# C 4 2 4 5 4 4 3 4 1  5

## This will also work
as.data.frame(unclass(tabl)) 
```

# java - 在 Yahtzee 记分卡类型程序中实例化变量时遇到问题

> ID：12944926
> 
> 赞同：0
> 
> 时间：2012-10-17T23:25:06.463
> 
> 标签：java, variables, constants

好的，所以我正在为 Yahtzee 游戏编写一个程序，我试图弄清楚如何将每一轮的值存储在该轮记分卡框中，并继续填写记分卡的其他部分。我这样做的方式是通过我的代码的这一部分：

```
 public static void finalScoreCard(int choice, int points)
  {
 int ones = one(choice, points);
 int twos = two(choice, points);
 int threes = three(choice, points);
 int fours = four(choice, points);
 int fives = five(choice, points);
 int sixes = six(choice, points);
 int threeKind = nine(choice, points);
 int fourKind = ten(choice, points);
 int fullHouse = eleven(choice, points);
 int smallStr = twelve(choice, points);
 int largeStr = thirteen(choice, points);
 int yahtzee = fourteen(choice, points);
 int chance = fifteen(choice, points);
}

 public static int one(int choice, int points)
 {
final int score;
if (choice == 1)
    score = points;

if (choice != 1 && score != points)
    return 0;
else
    return score;
 } 
```

所以“one”方法应该接受选择数和点参数，如果选择了该框，则返回分数。如果用户选择该选项，我希望我的程序实例化“score”，并用“points”分配“score”。然后在他们完成此操作后，该方法应该在每轮之后返回分数，或者返回 0 直到“分数”被实例化。问题是，我不明白如何多次保存“分数”的值。整个程序处于一个运行 13 次的 for 循环中。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:27:52.857

我会考虑使用一种方法和一个开关。

```
public void doSomething(int choice, int points)
{
  switch(choice)
  {
    case 1:
      ...
      break;
    case 2:
     ...
     break;
    default:
     //handle default case
  }
} 
```

哦，做`score`一个私有变量。假设方法和变量在同一个类中应该没问题。

```
private int score ; 
```

# opencv - 如何以最小距离合并 2 个 CvRect，这是 cvContour 的结果

> ID：12944937
> 
> 赞同：2
> 
> 时间：2012-10-17T23:25:35.480
> 
> 标签：opencv, merge, contour

在我的项目中，我使用 cvFindContours 来检测对象。使用结果，我想标记输入图像的 roi（如果检测到的 blob 之间的距离很高，我想迭代 roi 的标记）。

我的问题是，找到的 blob 中的一些矩形是重叠的，或者是更大 blob 的一部分。是否有一种快速的解决方案来移除内部斑点并以最小距离合并斑点？

例如：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:47:50.657

[您可以使用cv::Rect 的 operator&](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=rect#Rect_)检查矩形是否重叠：

```
cv::Rect a(x1,y1,w1,h1);
cv::Rect b(x2,y2,w2,h2);
cv::Rect intersect = a&b; // if intersect is not empty, the rect overlaps 
```

至于你的“最小距离”，没有办法使用标准的 opencv 函数来做到这一点。您必须确定矩形之间的“距离”是多少：它们的中心之间的距离（不推荐）？他们的边界之间的距离？然后提醒你有 2 个维度。你可以做到，但你必须自己编码。

# java - Freemarker 网站使用 IE10 引发错误

> ID：12944942
> 
> 赞同：0
> 
> 时间：2012-10-17T23:26:08.537
> 
> 标签：java, freemarker, internet-explorer-10

当我在 IE10 桌面上打开[这个网站](http://alionu.skillport.com/skillportfe/login.action)时，它显示 Freemarker 错误堆栈。

```
Error: on line 18, column 32 in WEB-INF/ftl/common/requestVariables.ftl
Expecting a number here, found: .
The problematic instruction:
----------
==> browserMinor=applicationBean.browser.browserMinor?number [on line 18, column 17 in WEB-INF/ftl/common/requestVariables.ftl]
 in include "/WEB-INF/ftl/common/requestVariables.ftl" [on line 12, column 1 in WEB-INF/ftl/login/login.ftl]
----------

Java backtrace for programmers:
----------
freemarker.core.NonNumericalException: Error: on line 18, column 32 in WEB-INF/ftl/common/requestVariables.ftl
Expecting a number here, found: .
    at freemarker.core.StringBuiltins$numberBI.calculateResult(StringBuiltins.java:186)
    at freemarker.core.StringBuiltins$StringBuiltIn._getAsTemplateModel(StringBuiltins.java:71)
    at freemarker.core.Expression.getAsTemplateModel(Expression.java:89)
    at freemarker.core.Assignment.accept(Assignment.java:90)
    at freemarker.core.Environment.visit(Environment.java:196)
    at freemarker.core.AssignmentInstruction.accept(AssignmentInstruction.java:86)
    at freemarker.core.Environment.visit(Environment.java:196)
    at freemarker.core.MixedContent.accept(MixedContent.java:92)
    at freemarker.core.Environment.visit(Environment.java:196) 
```

如果我更改连接字符串`(F12 developer tools, press Tools > Change user-agen string > Mozilla Firefox)`，它工作得很好。

是因为框架中的浏览器嗅探吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:30:33.543

似乎Web应用程序框架（不是FreeMarker）将browserMinor设置`""`为IE10，这当然不是一个数字。要么它应该在此处输入“0”，要么必须修改 requestVariables.ftl 以处理这种情况。

# javascript - 灯箱在没有目标图像的情况下自行启动

> ID：12944945
> 
> 赞同：2
> 
> 时间：2012-10-17T23:26:38.883
> 
> 标签：javascript, html, css, lightbox, zen

我有一个网站[http://www.landmhighland.com/index.php?main_page=product_info&cPath=41_58&products_id=461](http://www.landmhighland.com/index.php?main_page=product_info&cPath=41_58&products_id=461)

灯箱脚本似乎在没有点击任何东西的情况下启动，也没有任何参考图像。它仅在产品页面上执行此操作。

具体来说，覆盖出现在页面上，并且 LightboxImage 似乎正在加载。单击图像时，它会重定向到主页。

好像是修改了不相关的页面后才开始的。我没有看到任何 JS 错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:32:52.953

问题是在页面上意外包含两次 Lightbox JS 和 CSS 文件。

一次，在标题中，然后在产品页面上。

它始终包含在产品页面中，因为它们是唯一使用灯箱脚本的页面。我将它移到页眉，因为其他一些页面是为使用灯箱而构建的。处理标题的 php 文件与新页面一起上传。

我忘了上传更新的产品页面。这导致实时站点在页面上包含两次 JS 和 CSS，结果无法预测且零星。

# apache - 将任何子域重定向到同一子域的文件夹

> ID：12944950
> 
> 赞同：0
> 
> 时间：2012-10-17T23:27:08.903
> 
> 标签：apache, .htaccess, rewrite

我需要为完成以下任务的 apache 创建条件重定向和重写

1.  将任何子域重定向到同一子域的文件夹，即

    *   subdomain.domain.com 重定向到 subdomain.domain.com/store
    *   subdomain2.domain.com 重定向到 subdomain2.domain.com/store
2.  所有带有 www 的子域。会做同样的事情，除了删除 www 即

    *   www.subdomain.domain.com 重定向到 subdomain.domain.com/store
    *   www.subdomain2.domain.com 重定向到 subdomain2.domain.com/store
3.  主域不重定向，而是带有 www 的域。被重写为没有 www 即

    *   domain.com 不会重定向或更改
    *   www.domain.com 重写为 domain.com
4.  所有选项都应该适用于 http 和 https，即 http 在任何重定向或重写后仍然是 http 而 https 仍然是 https

注意：所有子域都指向同一个主 Web 文件夹。

到目前为止我有什么

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^/?$ "http\:\/\/www\.domain\.com\/" [R=301,L]

RewriteCond %{HTTP_HOST} ^subdomain\.domain\.com [NC]
RewriteRule ^(.*)$ http://www\.domain\.com/store/$1 [L] 
```

# internet-explorer-8 - 在 IE8 中未触发 Jquery 函数单击事件

> ID：12944952
> 
> 赞同：0
> 
> 时间：2012-10-17T23:27:11.030
> 
> 标签：internet-explorer-8, jquery

有谁知道为什么，在这个例子中，点击事件不只在 IE8 中被触发？基本上，单击 ( ) 后的css 样式`.zui-act`应该更改`background-color`.`label`

[JSFIDDLE](http://jsfiddle.net/7dFeS/)

```
<div style="width:300px;">
   <input type="radio" name="a" id="a" value="alpha" />
   <label for="a">Alpha</label>
   <input type="radio" name="a" id="b" value="bravo" />
   <label for="b">Bravo</label>
   <input type="radio" name="a" id="c" value="charly" />
   <label for="c">Charly</label>
</div>​

$.radio = function(e) {
    var a = $('input:radio').filter(function(index) { return $(this).attr('name')==e });
    a.hide();
    a.siblings('label').addClass('zui-btn');
    a.click(function(){
        var f = $(this).attr('id');
        $('label').removeClass('zui-act').filter(function(index) {
            return $(this).attr('for')==f
        }).addClass('zui-act');
    });
}

$(document).ready(function(e) {
    $.radio('a'); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:30:45.173

~~`click`将事件更改为`change`，它应该可以工作。您很可能在兼容模式下运行，其中存在错误。~~

当您可以让选择器处理名称时，为什么还要使用过滤器？

```
var myName = "a";
var myRadios = $('input[name="' + myName +'"]'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:40:06.990

我唯一的猜测是 IE8 不会触发隐藏元素上的事件。我想是有道理的。您可以采用 jQuery UI 按钮集采取的方法并将单选按钮移出屏幕。[像这样](http://jsfiddle.net/7dFeS/1/)：

```
.zui-radio {
    position:absolute;
    left:-9999px;
} 
```

然后将其添加到您的`$.radio`方法中代替`a.hide()`：

```
a.addClass('zui-radio'); 
```

# mysql - 从 MySQL 函数返回一个值

> ID：12944953
> 
> 赞同：1
> 
> 时间：2012-10-17T23:27:16.253
> 
> 标签：mysql, sql, function

我写了一个小函数：

```
CREATE TABLE states
    (`id` int, `name` varchar(2))
;

INSERT INTO states
    (`id`, `name`)
VALUES
    (1, 'md'),
    (2, 'tx'),
    (3, 'ma')
;

delimiter //

create function states_repeated (s varchar(2))
returns int
begin
  insert into sid select count(*) from states where states.name=s ;
  return sid ;
end//

delimiter ;

select states_repated('ma') ; 
```

但这会返回

```
ERROR 1146 (42S02): Table 'test.sid' doesn't exist 
```

我如何返回这个值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:29:28.920

尝试这样的事情，

```
DECLARE _returnValue INT;
SET _returnValue = (select count(*) from states where states.state = s);
return _returnValue; 
```

完整代码

```
delimiter //

create function states_repeated (s varchar(2))
returns int
begin
    DECLARE _returnValue INT;
    SET _returnValue = (select count(*) from states where states.name = s);
    return _returnValue;
end//

delimiter ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T23:30:48.950

我认为mysql函数和存储过程只是返回声明的变量

# java - Java 整数数字阅读器

> ID：12944955
> 
> 赞同：0
> 
> 时间：2012-10-17T23:27:39.020
> 
> 标签：java, digit

我正在创建一种需要逐位读取 5 位整数的方法。（即 26505 将被读取为 2 6 5 0 5，并且每个数字都可以用另一种方法单独读取）我无法将整数转换为字符串并读取每个字符，因为我需要用另一种方法读取数字。也有人建议使用 %10 但这不会给我单独的数字。此外，整数需要从左到右逐位读取。我希望这足够清楚，但我对如何完成这一点感到非常困惑，而且我尝试过的一切都不起作用。提供的任何帮助将不胜感激，谢谢。

```
 while(d>=10){  
    j=code%d;
    d=d/10;
    printDigit(j) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T23:36:03.793

这将按顺序返回一个包含整数位的数组。

```
public static int[] integerToDigits(int n)
{
    int[] digits= new int[5];
    int temp = n;
    for(int i = 0; i < 5; i++)
    {
        digits[4-i] = temp % 10;
        temp /= 10;
    }
    return digits;
} 
```

`integerToDigits(12345) = {1,2,3,4,5}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T23:30:37.000

**从左到右**获取个位数：-

```
26505 / 10000 = 2
26505 % 10000 = 6505

6505 / 1000 = 6
6505 % 1000 = 505

505 / 100 = 5
505 % 100 = 5

5 / 10 = 5 
```

我认为您现在可以实施它。

但是，如果您可以**从 right-to-left 遍历**，那会更容易，因为那时您的分母将固定为 10：-

```
26505 % 10 = 5
26505 / 10 = 2650

2650 % 10 = 0
2650 / 10 = 265

265 % 10 = 5
265 / 10 = 26

26 % 10 = 6
26 / 10 = 2

2 % 10 = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T23:37:14.853

你可以这样做：

1.  您可以创建一个整数数组并将用户输入字符串的每个字符解析为并存储到一个数组中
2.  那么您可以将此数组用于其他方法。

例如

```
Scanner scan = new Scanner(System.in);
    String str = scan.nextLine();
    int[] digitArray = new int[str.length()];
    for(int i=0; i<str.length(); i++)
    {
        String temp = Character.toString(str.charAt(i));
        System.out.println("temp is "+temp);
        digitArray[i] = Integer.parseInt(temp);
    }
    for (int i =0; i<digitArray.length; i++) {
        System.out.println(digitArray[i]);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T23:33:25.523

完全懒惰的东西看起来像

```
final int [] digits = {score % 1000 / 100, score % 100 / 10, score % 10}; 
```

例如，如果您知道您的整数永远不会大于 999，这将起作用。

从这个例子中，通过计算整数的下一个十的幂，然后在循环中将数字添加到数组中来改进它以支持任意整数是微不足道的。

# ruby-on-rails - Ruby on Rails：如何迁移对模型所做的更改？

> ID：12944962
> 
> 赞同：12
> 
> 时间：2012-10-17T23:29:05.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-migrations, rails-models

在 Rails 应用程序中，如何迁移我在模型中所做的更改？例如，我知道如果我使用命令“rails g model Person name:string”创建模型，也会创建迁移。但是，如果在这一步之后我转到创建的模型“Person”并添加一个新属性，这个新属性是否会自动添加到迁移中以便以后在数据库中持久化？还是我从错误的角度看待这个问题，应该将属性添加到迁移中，然后添加到模型中？

问候

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-17T23:45:04.973

您不能真正为模型“添加”属性，您可以通过创建迁移文件并运行它来做到这一点——Rails 根据数据库中的列来计算模型具有哪些属性。但是，如果您希望能够通过批量分配对其进行更新，则*确实需要在模型中添加一行以将该属性列入白名单。*这就是为什么你会经常在 activerecord 模型中看到这样的一行：

```
attr_accessible :name 
```

但这是可选的，对于添加属性不是必需的。

要将新属性实际添加到模型中，首先使用以下命令创建迁移：

```
rails g migration AddAddressToPerson address:string 
```

这将在 db/migration/ 目录中创建迁移文件。（rails 将“AddXXXToYYY”和“RemoveXXXFromYYY”的形式理解为“向模型 XXX 添加（或删除）新列”，详见[文档](http://guides.rubyonrails.org/migrations.html)）。在这种情况下，我添加了一个名为的属性`address`，它是一个字符串，但您可以将其更改为您想要的任何内容。

然后要实际更新数据库，您需要使用以下命令运行迁移`rake`：

```
rake db:migrate 
```

最后，如果您想允许对该属性进行批量分配，请将属性添加到您的参数列表中`attr_accessible`：

```
attr_accessible :name, :address 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T23:43:15.803

如果您使用[attr_accessor](http://apidock.com/ruby/Module/attr_accessor)添加新属性，则无需对迁移执行任何操作，但您的更改不会存储在数据库中。

如果您确实想保留更改，则需要使用[迁移](http://api.rubyonrails.org/classes/ActiveRecord/Migration.html)将属性添加到模型中。您可以只创建一个具有适当结构的文本文件，迁移并不花哨，但是像这样生成要容易得多`rails generate migration AddLastNameFieldToUsers`。此类文件的内容可能会调整为如下所示：

```
class AddLastNameFieldToUsers< ActiveRecord::Migration
  def change
    add_column :users, :last_name, :string
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T04:21:17.447

您不需要直接向模型添加属性。Rails（实际上是 ActiveRecord）会自动推断它。对于模型类的属性列表，AR 会查找模型名称的复数形式的表（如果模型是 Order，那么它将在 orders 表中查找属性）。它是称为 CoC - 约定优于配置的设计功能的一部分。

因此，如果您必须添加属性，则必须创建迁移以将该字段添加到列中，如其他答案中所述。

# java - 捕获部分字符串

> ID：12944973
> 
> 赞同：2
> 
> 时间：2012-10-17T23:30:37.597
> 
> 标签：java

我想捕获字符串的一部分，并且我知道它涉及子字符串、正则表达式和匹配项的某种组合，我很难组合出一个体面的解决方案。假设我有一段文字：

```
String str = "Lorem ipsum dolor [cookie:firstname] adipiscing elit."; 
```

我想捕获上面 : 和 ] 之间的文本，在这种情况下为“名字”（cookie 名称可以是可变长度）。我想的一种方法是使用拆分：

```
str = str.split("\\cookie:")[1]"); 
```

然后也许是一个 str.replace 来删除培训“]” - 但我希望有一种更优雅的方式来做到这一点。我对正则表达式很陌生，但还没有成功地得到我需要的东西。

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T23:33:19.110

这是一个单行：

```
String part = str.replaceAll(".*:(.*)].*", "$1"); 
```

正则表达式捕获整个输入，将其替换为第一组，该组捕获您想要的部分，有效地只返回您想要的部分。

下面是一些测试代码：

```
public static void main(String[] args) {
    String str = "Lorem ipsum dolor [cookie:firstname] adipiscing elit.";
    String part = str.replaceAll(".*:(.*)].*", "$1");
    System.out.println(part);
} 
```

输出：

```
firstname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:33:45.357

您可以尝试以下正则表达式代码：-

```
 String str = "Lorem ipsum dolor [cookie:firstname] adipiscing elit.";
    Pattern pattern = Pattern.compile(".*?\\[.*?:(.*?)\\].*");
    Matcher matcher = pattern.matcher(str);

    if (matcher.find()){
        System.out.println(matcher.group(1));
    } 
```

**输出**： -

```
firstname 
```

# java - java Jung Graph包中的二叉树

> ID：12944976
> 
> 赞同：2
> 
> 时间：2012-10-17T23:30:42.740
> 
> 标签：java, binary-tree, jung

我正在尝试在 JUNG（Java 图形包）中创建二叉树。但是，我无法做到这一点。

这是我的来源：

```
Tree tree1 = new OrderedKAryTree<String, Integer>(2);
tree1.addVertex("v0");
tree1.addEdge(1, "v0", "v1");
tree1.addEdge(2, "v0", "v2"); 
```

这是我得到的例外：

```
java.lang.IllegalArgumentException: 'index' must be in [0, [order-1]] 
```

在[文档](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/OrderedKAryTree.html)中，我看到其中一个重载方法`addEdge()`将一个名为 index 的整数参数作为第四个参数。但是，在我的机器上似乎没有实现。

这应该创建一个高度为 1 的二叉树。我也尝试在边之前添加顶点：

```
tree1.addVertex("v0");
tree1.addVertex("v1");
tree1.addVertex("v2");
tree1.addEdge(1, "v0", "v1");
tree1.addEdge(2, "v0", "v2"); 
```

这是我得到的例外：

```
java.lang.UnsupportedOperationException:
    Unless you are setting the root, use addEdge() or addChild() 
```

[奇怪的是，文档](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/graph/package-summary.html)中没有`addChild()`方法（我假设它是旧版本包的一部分，并且在最新更新中没有被删除）`addChild()`

创建一个小的二叉树应该不难！有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T12:57:35.940

对于树，您需要使用 setRoot 和 addChild 函数

* * *

```
 DelegateTree<String, String> tree = new DelegateTree<String,String>();
    tree.setRoot("A");
    tree.addChild("A-B1", "A", "B1");
    tree.addChild("A-B2", "A", "B2");

    BasicVisualizationServer<String, String> vs = new BasicVisualizationServer<String, String>(
            new FRLayout<String,String>(tree), new Dimension(1100, 640));

     Transformer<String,Paint> vertexPaint = new Transformer<String,Paint>() {
            public Paint transform(String i) {
                return Color.GRAY;
            }
        };  

        RenderContext<String, String> renderContext = vs.getRenderContext();
                renderContext.setVertexFillPaintTransformer(vertexPaint);

            Transformer<String, String> transformer = new ToStringLabeller<String>();
            renderContext.setEdgeLabelTransformer(transformer);
            Transformer<String, String> vertexTransformer = new ToStringLabeller<String>();
            renderContext.setVertexLabelTransformer(vertexTransformer);
            vs.getRenderer().getVertexLabelRenderer().setPosition(Position.CNTR);

            JFrame frame = new JFrame();
            frame.getContentPane().add(vs);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();
            frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:19:54.620

该课程似乎有几个[错误](http://sourceforge.net/mailarchive/forum.php?thread_name=CANYy1UnP7mZ35VtO0666m%3DpOEYC0vM%2B2BrCOujoJ3%2BYatTBKXA%40mail.gmail.com&forum_name=jung-support)，我认为很多开发仍在进行中。您可以尝试在本地构建中为自己的目的修复它（您可以在网站上找到源代码），甚至可以将它们提交给社区。

# drupal - 无法仅在 AWS 上将 Drupal 连接到数据库

> ID：12944981
> 
> 赞同：0
> 
> 时间：2012-10-17T23:30:59.870
> 
> 标签：drupal, drupal-6, amazon-ec2, amazon-web-services, amazon

将现有的 drupal 代码库上传到在 AWS 上设置的虚拟主机。它显示“无法连接到数据库”

我创建了数据库“dbname”，并且可以通过 ssh 正常连接。但无法获取settings.php 进行连接。据我所知，mysql用户拥有远程访问数据库所需的所有权限。

是）我有的

```
$db_url = 'mysql://username:password@us-west-rds.amazonaws.com/dbname'; 
```

这是 settings.php 的示例，它带有我们的 drupal 7 站点，可以很好地连接

```
$databases = array (
  'default' => 
  array (
    'default' => 
    array (
      'database' => 'dbname',
      'username' => 'dbuser',
      'password' => 'password',
      'host' => 'us-west-rds.amazonaws.com',
      'port' => '3306',
      'driver' => 'mysql',
      'prefix' => '',
    ),
  ),
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T07:33:23.537

有几件事需要检查：

*   您是否打开了安全组以允许从您的服务器访问（如 Bob Kinney 在另一个答案中所说）？
*   您是否在服务器上设置了防火墙以阻止连接到您的 RDS 实例？
*   您的用户是否有足够的权限连接到您的数据库？

最简单的调试方法是使用控制台`mysql`命令并尝试从那里连接到您的实例：

```
mysql dbname -u username -p password -h db01b2.ck1dmcn6kfws.us-west-1.rds.amazonaws.com 
```

如果这不起作用，请检查上面给出的要点。如果这有效且仅在 Drupal 中无效，请检查您的 PHP 代码和/或 Drupal 配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T03:50:25.083

听起来您可能没有设置安全组以允许从您的 EC2 实例进行访问。您需要确保您的数据库安全组具有允许来自您的 EC2 实例/安全组的流量的入口规则。

[如何控制对我的数据库实例的网络访问？](http://aws.amazon.com/rds/faqs/#31)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T21:34:51.443

您指向错误的主机名。

```
'host' => 'us-west-rds.amazonaws.com' 
```

每个单独的数据库实例都有自己的主机名。您可以在 AWS 控制台中查找它。您当前指向的那个看起来像您打算指向 RDS Web 服务 API 端点。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-05T18:10:46.290

您可能还想检查...

`setsebool httpd_can_network_connect_db on`

# html - 在 html 电子邮件中的链接标记之后添加了额外的空间

> ID：12944983
> 
> 赞同：3
> 
> 时间：2012-10-17T23:31:20.480
> 
> 标签：html, html-email

这涉及 HTML 电子邮件...

出于某种原因，电子邮件客户端在文本链接后添加了一个额外的空格。

这是代码：

```
<a href="http://foo.com" target="_blank" style="text-decoration: none; font-family: Arial, Helvetica, sans-serif;font-weight:bold; font-size:12px; color:#249A10;">foo</a> 
```

所以客户端会将其显示为 'foo'

这个额外空间来自哪里的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-20T09:13:43.963

尝试使用`display: block;`或`display: inline-block;`为您的 a 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T11:42:07.317

它不会以当前形式显示空白。如果您将`a`标签包裹在`td`or`span`中，您可能在其中遗漏了一些东西。我的意思是`a`标签的容器，否则它应该可以正常工作。

# objective-c - iPhone 5 自动布局不正确

> ID：12944985
> 
> 赞同：0
> 
> 时间：2012-10-17T23:31:41.760
> 
> 标签：objective-c, xcode, storyboard, iphone-5, autolayout

新的 iPhone 屏幕搞砸了我的应用程序。在 iPhone 3.5 英寸的屏幕上，一切都显得格格不入。我在同一个故事板中有两个不同的视图，我尝试检测并尝试切换故事板视图，但还没有任何效果。我可以得到一些关于如何在启动时切换到正确视图的代码吗？我是把这段代码放在我的主视图控制器中，还是把它放在我的应用程序委托中？

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
// code for 4-inch screen
} else {
// code for 3.5-inch screen
} 
```

[我的观点是什么样的 http://www.fileden.com/files/2012/6/18/3317719/screenshot7.jpg](http://www.fileden.com/files/2012/6/18/3317719/screenshot7.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T00:46:36.220

Initialize this in the app delegate for the app in "didFinishLaunchingWithOptions:" and then call the right NIB or Storyboard for the device/screen size. Create a different Storyboard for each and if you wish use auto layout for iOS 6 in your Storyboard. Start your if Statement with something like this:

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
        if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0){
//iPhone 5 storyboard
}
else { 
// other storyboard here
} 
```

# javascript - 在 JavaScript 中缩写 console.log

> ID：12944987
> 
> 赞同：27
> 
> 时间：2012-10-17T23:32:12.477
> 
> 标签：javascript

> **可能重复：**
> [chrome console.log 的别名](https://stackoverflow.com/questions/5133649/alias-to-chrome-console-log)

这真的很愚蠢，但我不能缩写console.log（我正在使用Chrome）。这是我天真的尝试：

```
var log = console.log;
log("Bingo");  // Uncaught TypeError: Illegal invocation 
```

我应该使用 apply() 吗？但是我必须传递论点，对吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-10-17T23:39:42.983

这会失败，因为对 Javascript 方法的引用不包括对对象本身的引用。将方法分配给`console.log`变量并将调用应用于 的一种简单而正确的方法`console`是在`bind`方法上使用方法，并作为参数`log`传递：`console`

```
var log = console.log.bind(console); 
```

每个方法都有一个隐藏的`this`参数，并且由于可以说是糟糕的语言设计，当您获得对方法的引用时，它并没有关闭。该`bind`方法的目的是为函数预先分配参数，并返回一个函数，该函数接受函数所期望的其余参数。的第一个参数`bind`应该始终是`this`参数，但您实际上可以使用它分配任意数量的参数。

Using`bind`具有显着的优势，即您不会失去该方法接受更多参数的能力。例如，`console.log`实际上可以接受任意数量的参数，并且它们都将连接在一个日志行上。

下面是一个使用`bind`为 预分配更多参数的示例`console.log`：

```
var debugLog = console.log.bind(console, "DEBUG:"); 
```

调用`debugLog`将在日志消息前加上`DEBUG:`.

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-17T23:34:23.793

简单的方法是将其包装在一个函数中：

```
var log = function (l) {
   console.log(l);
} 
```

但请注意，console.log 可以接受无限数量的参数，因此适当的方法是：

```
var l = function () {
   console.log.apply(console, arguments);
} 
```

# bash - 调试 BASH IF 条件

> ID：12944988
> 
> 赞同：1
> 
> 时间：2012-10-17T23:32:19.167
> 
> 标签：bash, debugging, if-statement, conditional-statements

当我尝试运行我的作业时出现错误。

```
#!/bin/bash
## Assignment 2

echo Please enter a User Name:
read u
if [ $u!="root"]; then
        echo Searching for Username!
        grep $u /etc/passwd|sed 's/$u/hidden/gi'
elif [ $u!="toor"]; then
        echo Root is NOT allowed.
else
        echo Toor is definetely NOT allowed.
fi 
```

输出：

```
Please enter a User Name:
user1
./assign2.sh: line 6: [bthiessen: command not found
./assign2.sh: line 9: [bthiessen: command not found
Toor is definetely NOT allowed. 
```

我的 if 语句有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:34:21.693

试试看：

```
#!/bin/bash

echo Please enter a User Name:
read u
if [[ $u != "root" ]]; then
        echo Searching for Username!
        grep "$u" /etc/passwd | sed "s/$u/hidden/gi"
elif [[ $u != "toor" ]]; then
        echo Root is NOT allowed.
else
        echo Toor is definetely NOT allowed.
fi 
```

**发现问题**：

*   `[ $u!="root"]`周围需要空间`!=`
*   如果你在sed中使用变量，你需要`"`引号，不简单`'`

**注意**：

`[[`是一个与命令类似（但比`[`命令更强大）的 bash 关键字。请参阅[http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)和[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)。除非您正在为 POSIX sh 编写代码，否则我们建议您`[[`

`'`了解and`"`和 `之间的区别。请参阅[http://mywiki.wooledge.org/Quotes](http://mywiki.wooledge.org/Quotes)和[http://wiki.bash-hackers.org/syntax/words](http://wiki.bash-hackers.org/syntax/words)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T23:34:19.213

空格在这里很重要：

```
if [[ $u!="root" ]]; then 
```

和：

```
elif [[ $u!="toor" ]]; then 
```

也比较喜欢`[[`。`[`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T23:39:54.043

```
if [ $u!="root"]; then
elif [ $u!="toor"]; then 
```

方括号内和运算符周围需要有空格`!=`。空格是必需的。`"$u"`如果用户名有空格或为空白，引用也是一个好习惯。

```
if [ "$u" != "root" ]; then
elif [ "$u" != "toor" ]; then 
```

你的脚本还有其他问题，我想应该留给你去寻找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-09T20:45:43.167

要调试 bash 脚本，您还可以使用`bash -x`and `set -x`：

`bash -x script.sh`运行带有调试消息的现有脚本，它会在执行它们之前回显行。

您可以直接在`set -x`您的shell 脚本中启用此行为，例如在shebang 之后的第一行中。（这有点像`echo on`在 Windows 脚本中。）`set +x`禁用此选项。

`set -x`甚至可以在交互式 shell 中使用，尽管几乎没有用。

这一切都在 Bash Guide for Beginners 中的[Debugging Bash scripts](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_02_03.html)中得到了很好的解释。

# asp.net - 为什么我无法将 JSON 对象传递给 WCF Web 服务？

> ID：12944998
> 
> 赞同：2
> 
> 时间：2012-10-17T23:33:15.940
> 
> 标签：asp.net, ajax, json, wcf

我使用较旧的“ASMX”Web 服务实现构建了一个相当复杂的应用程序，并且正在迁移到 WCF。有一件事让我发疯 - 它*应该*很容易，但无论我如何尝试构造这个调用，我的 AJAX 都会调用错误。这适用于 ASMX 调用，但不适用于 WCF。

这是 AJAX 调用：

```
 var ProfileData = new Object();
        ProfileData.SUID = SUID;
        ProfileData.FirstName = $("#FirstName").val();
        ProfileData.LastName = $("#LastName").val();
        ProfileData.Birthdate = new Date($("#Birthdate").val());
        var DTO = {'ProfileData': ProfileData };

        $.ajax({
            type: "POST",
            url: "AllianceService.svc/SaveBasicProfile",
            data: JSON.stringify(DTO),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                    UpdateTips($("#BasicProfileValidate"), "Success! Your data has been updated.");
                }
            },
            error: function (xhr, ajaxOptions, thrownError, request, error) {
                alert('Error Saving Basic Profile Data');
            }
        }); 
```

这是 C# / Server 端的类型声明：

```
[DataContract]
public class BasicFolderData
{
    [DataMember]
    public string SUID { get; set; }
    [DataMember]
    public string FirstName { get; set; }
    [DataMember]
    public string LastName { get; set; }
    [DataMember]
    public DateTime Birthdate { get; set; }
} 
```

这是服务的定义：

```
 [OperationContract]
    public int SaveBasicProfile(BasicFolderData ProfileData)
    {
         ... do stuff
    } 
```

现在，如果我分解所有数据成员并将它们用作参数，我可以用一个简单的

```
 data: JSON.stringify(ProfileData) 
```

但是对象实际上比这长得多，我想知道如何传递对象。

另外，我尝试过：

```
 data: JSON.stringify({"ProfileData": ProfileData }), 
```

和

```
 data: JSON.stringify('{"ProfileData":' + ProfileData + '}'), 
```

和

```
 data: '{"ProfileData":' + JSON.stringify(ProfileData)  + '}', 
```

但一切都无济于事......我收到所有错误消息。

如果我使用：

```
 data: JSON.stringify(ProfileData), 
```

然后，奇怪的是，请求到达服务器，但 ProfileData 参数为空。我怀疑问题出在我的数据合同上，但不知道从哪里开始。此外，我有很多带有标量参数的函数都可以正常工作 - 只有当我尝试传递对象时才会失败。任何帮助将不胜感激！！

按照 DonAndre 的建议，我发现只需将参数更改为标量类型即可使调用成功。但是，该参数始终为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T23:51:36.303

`d`如果您在服务器上的配置中将 enableWebScript 设置为 true，WCF 会使用 a 包装 JSON 。看看这里：[JsonConvert.DeserializeObject and "d" wrapper in WCF](https://stackoverflow.com/questions/1625500/jsonconvert-deserializeobject-and-d-wrapper-in-wcf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T00:56:49.547

好的 - 问题很简单：“BasicFolderClass”中有一个 DateTime 字段（出生日期）。

当对 DTO 对象调用 JSON.stringify 时，它会将 javascript 端的 DateTime 字段转换为字符串，然后再发送。呈现的 JSON 字符串与预期的 DateTime 之间的该字段不匹配是导致错误的原因。