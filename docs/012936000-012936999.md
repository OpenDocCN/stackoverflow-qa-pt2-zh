# StackOverflow 问答 12936000-12936999

# mysql - 是否可以使用 datatime 字段差异优化 mysql 查询？

> ID：12936000
> 
> 赞同：0
> 
> 时间：2012-10-17T13:56:22.077
> 
> 标签：mysql, datetime

我有一个名为 DATETIME 字段的表`date_created`，需要使用这种查询检查一些数据：

```
SELECT * FROM table WHERE UNIX_TIMESTAMP(date_created) + $number < UNIX_TIMESTAMP() 
```

没有 UNIX_TIMESTAMP() 函数可以做到这一点吗？也许现在（））？如果是，它会更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:01:16.300

1.  > 没有 UNIX_TIMESTAMP() 函数可以做到这一点吗？也许现在（））？

    不完全是。虽然您可以执行以下操作，但它不会获得完全相同的结果：

    ```
    SELECT * FROM `table` WHERE date_created + INTERVAL $number SECOND < NOW() 
    ```

    原因是，与 不同`TIMESTAMP`，`DATETIME`它既不打算也不能够及时表示特定实例；相反，它有效地表示日历/时钟的显示（不是同一件事）。

    当使用上述查询时，它不通过 UTC 时间戳，比较只是一个问题，即现在的时钟是否会显示比数据库中记录的日期/时间晚（加上`$number`秒）的日期/时间。

    但是，当转换为 UTC 时间戳时，各个时钟显示的时区变得相关，并且由于许多时区不是恒定的（例如，它们经常在夏令时移动），多个`DATETIME`值可能会产生相同的 UTC 时间戳。

    例如：

    ```
    CREATE TABLE `table` (date_created DATETIME);
    INSERT INTO  `table` VALUES ('2012-10-28 01:00:00'), ('2012-10-28 02:00:00'); 
    ```

    然后比较在`2012-10-28 02:00:00`英国运行时两个查询的结果：

    *   您的原始查询：

        ```
        SET SESSION time_zone = 'Europe/London';

        SELECT *
        FROM   `table`
        WHERE  UNIX_TIMESTAMP(date_created) + 100
             < UNIX_TIMESTAMP('2012-10-28 02:00:00'); 
        ```

    *   上面的替代查询：

        ```
        SELECT *
        FROM   `table`
        WHERE   date_created + INTERVAL 100 SECOND
              < '2012-10-28 02:00:00'; 
        ```

2.  > 如果是，它会更快吗？

    可能（比较的字典顺序就足够了，而不是`DATETIME`根据会话时区的规则解析并将值转换为 UTC，然后进行减法和符号检查），但我建议您执行自己的基准测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:26:04.470

如果可能，应避免在 WHERE 子句中使用 eval 表达式。它会阻止正确使用索引。如果可能，在代码中进行数学运算并将值作为查询参数发送。

# c# - XSD.exe 限制基类型属性

> ID：12936002
> 
> 赞同：1
> 
> 时间：2012-10-17T13:56:24.993
> 
> 标签：c#, xml, xsd.exe

是否可以使用 XSD.exe 通过在 XSD 上的元素之前提供注释属性来自动生成一个类，该类的属性数据类型与 XSD 中指定的数据类型不同。

这个想法是，保持 XSD 保持原样，但希望自动生成的类对特定属性具有不同的数据类型。

```
<xsd:simpleType name="idRestriction">
<Specify_Custom_Type="xsd:string" //This is what I'm looking for
<xsd:restriction base="xsd:decimal">

<xsd:attribute name="idAttribute" type="idRestriction" use="required" /> 
```

生成的类

```
[System.Xml.Serialization.XmlAttributeAttribute()]
public decimal id { // Would like the decimal to be string
get {
            return this.idField;
        }
        set {
            this.idField = value;
        }
    } 
```

我希望它产生什么

```
[System.Xml.Serialization.XmlAttributeAttribute()]
public string id { // Notice decimal --> string
get {
            return this.idField;
        }
        set {
            this.idField = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:03:01.220

假设您有`schema.xsd`文件

如果您复制相同的文件`schema2.xsd`并将所有其他原始类型替换为字符串，则可以使用此文件生成`.cs`类

如果您通过编写批处理文件来自动化此过程，我认为您的问题可以解决。

以下链接包含有关如何替换文本文件内容的问题。请检查那个

[如何使用 Windows 命令行环境查找和替换文件中的文本？](https://stackoverflow.com/questions/60034/how-can-you-find-and-replace-text-in-a-file-using-the-windows-command-line-envir)

我想提一点，当您从这些文件生成 .cs 文件时，类名将是相同的。所以最好为这两个类使用不同的命名空间，这样生成的类类型就不会冲突。

您可以使用`/n`参数 for来提及命名空间`xsd.exe`

请检查以下链接以获取`xsd.exe`命令行参数

[http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/x6c1kb0s(v=vs.110).aspx)

# sql-server-2005 - 如何连接数字以创建自定义日期？

> ID：12936006
> 
> 赞同：1
> 
> 时间：2012-10-17T13:56:36.567
> 
> 标签：sql-server-2005

这是我迄今为止尝试过的：

```
select CAST(
    DATEPART(month,getDate())+'-'+
    DATEPART(day,getDate())+'-'+
    2012
    as datetime) 
```

我以日期结束：1905-08-02 00:00:00.0。我期待得到今天的约会。我重新排列了顺序，它似乎没有改变。谁能提供为什么它给我这个？作为记录，我计划在今年使用 2012 年以外的其他值。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T10:05:09.870

此代码将起作用，您需要确保连接相同的数据类型并使用特定日期时间格式的转换：

```
 SELECT CONVERT(DATETIME,
                    CAST(DATEPART(month,getDate()) AS NVARCHAR(50))
                    +'-'+CAST(DATEPART(day,getDate()) AS NVARCHAR(50))
                    +'-2012'
                    ,121) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:01:13.890

```
select CAST ('2012'+
             CAST(DATEPART(month,getDate()) as char(2))+
             CAST(DATEPART(day,getDate()) as char(2))
            as datetime) 
```

您必须连接字符串。[您的代码将数字`2039`转换为 date](https://data.stackexchange.com/stackoverflow/query/82655)。

如果这个小练习的目标是能够改变给定日期的年份，你可以这样做。

```
declare @NewYear int = 2003

-- with time part
select dateadd(year, @NewYear - year(getdate()), getdate())

-- time part removed
select dateadd(year, @NewYear - year(getdate()), dateadd(day, 0, datediff(day, 0, getdate()))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:01:43.970

`CAST()`每件首先作为varchar：

```
select 
  cast(
    cast(DATEPART(month,getDate()) as varchar(2))+'-'+
    cast(DATEPART(day,getDate()) as varchar(2))+'-'+
    '2012' as datetime) 
```

# java - 在 PagePanel 中显示 pdf 的问题

> ID：12936009
> 
> 赞同：0
> 
> 时间：2012-10-17T13:56:40.113
> 
> 标签：java, pdf, runtime-error, bufferunderflowexception

我在 PagePanel 中查看页面时遇到问题，尝试显示 pdf 时，出现错误“java.nio.BufferUnderflowException”。

错误：

> java.nio.BufferUnderflowException at java.nio.HeapByteBuffer.get(Unknown Source) at com.sun.pdfview.decode.RunLengthDecode.decode(RunLengthDecode.java:64) at com.sun.pdfview.decode.RunLengthDecode.decode(RunLengthDecode .java:96) 在 com.sun.pdfview.decode.PDFDecoder.decodeStream(PDFDecoder.java:134) 在 com.sun.pdfview.PDFObject.decodeStream(PDFObject.java:347) 在 com.sun.pdfview.PDFObject。 getStream(PDFObject.java:261) at com.sun.pdfview.PDFObject.getStream(PDFObject.java:298) at com.sun.pdfview.PDFImage.getImage(PDFImage.java:306) at com.sun.pdfview.PDFRenderer .drawImage(PDFRenderer.java:274) 在 com.sun.pdfview.PDFImageCmd.execute(PDFPage.java:665) 在 com.sun.pdfview.PDFRenderer.iterate(PDFRenderer.java:577) 在 com.sun.pdfview。 BaseWatchable.run（BaseWatchable.java：101）在java.lang.Thread.run（未知来源）

代码：

```
public class Test {

public static void setup() throws IOException {

    //set up the frame and panel
    JFrame frame = new JFrame("PDF Test");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    PagePanel panel = new PagePanel();
    frame.add(panel);
    frame.pack();
    frame.setVisible(true);

    //load a pdf from a byte buffer
    File file = new File("C:\\testeImpressora\\Print\\pdf\\tutorial.pdf");
    RandomAccessFile raf = new RandomAccessFile(file, "r");
    FileChannel channel = raf.getChannel();
    ByteBuffer buf = channel.map(FileChannel.MapMode.READ_ONLY,  0, channel.size());
    PDFFile pdffile = new PDFFile(buf);

    // show the first page
    PDFPage page = pdffile.getPage(0);

    panel.showPage(page);

}

public static void main(String[] args) {
     SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                try {
                    Test.setup();
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        });

}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T13:34:56.503

检查路径我在我的 PC 路径上使用了相同的代码，并且使用 PDFRenderer-full-0.9.1 Jar 运行良好，我认为你应该检查你的 Jar 文件。

# xml - XML 中服务链接的最佳实践？

> ID：12936011
> 
> 赞同：2
> 
> 时间：2012-10-17T13:56:42.433
> 
> 标签：xml, rest, jaxb, hyperlink, soa

### 故事

在开发企业应用程序时，您可能很快就会在您的应用程序中拥有多个 RESTful 服务。我正在使用 JAXB 生成 XML。在 XML 响应中嵌入链接以检索更多信息，这对人类和消费者来说是一种解脱。这种方法的美妙之处在于链接可以指向不同服务或应用程序提供的资源。

### 例子

```
<order self='http://192.168.1.11:8080/customers/1234'>  
    <amount>23</amount>
    <product ref='http://192.168.1.11:8080/products/4554'/>  
    <customer ref='http://192.168.1.44:8080/customers/1234'/> 
</order> 
```

### 问

嵌入此类链接的最佳实践是什么？有没有复杂的机制可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:47:09.210

如果您使用的是 JAX-RS，则可以将 Atom 链接直接注入到您发送给客户端的实体对象中。

这里是[RESTEasy 文档](http://docs.jboss.org/resteasy/2.0.0.GA/userguide/html/LinkHeader.html)和[jersey 文档](http://jersey.java.net/nonav/documentation/latest/linking.html)。

在我的项目中，我使用的是运动衫，非常棒。

# jsf - Primefaces 中的对话框更新

> ID：12936013
> 
> 赞同：0
> 
> 时间：2012-10-17T13:56:51.477
> 
> 标签：jsf, primefaces

我在 Primefaces 论坛上读到，应该避免直接更新对话框或更新环绕元素，因为实例是重复的和其他奇怪的行为。但是我们有某种特殊情况，确实需要更新包含大量对话框的元素。

如果没有重复的实例，真的没有办法以同样的方式做到这一点吗？重复的实例是怎么来的？难道这仅在`appendToBody`设置为 true 时发生，因为它被更新并再次转移到正文而不是仅仅被更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:43:01.707

一个解决方案是修复 dialog.js，请参阅[Primefaces 论坛](http://forum.primefaces.org/viewtopic.php?f=3&t=16507)。

对于 Primefaces 3.4.1：

```
PrimeFaces.widget.Dialog.prototype._show = function() {
    if(this.cfg.showEffect) {
        var _self = this;

        this.jq.show(this.cfg.showEffect, null, 'normal', function() {
        _self.postShow();
    });
}
else {
    //display dialog
    /*Begin Custom Code*/
    var dlg = jQuery(this.jqId);

    if(dlg.size() > 1){
        dlg.last().remove();
    }
    this.jq = dlg;
    /*End Custom Code*/
    this.jq.show();

    this.postShow();
}

this.focusFirstInput();
this.visible = true;
this.moveToTop();

if(this.cfg.modal)
this.enableModality();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T17:47:51.343

The dialog was reimplemented in v3.0\. I think there are no problems now.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-07T13:40:35.500

对于 Primefaces 3.5

```
PrimeFaces.widget.Dialog.prototype._show = function() {
    this.jq.removeClass("ui-overlay-hidden").addClass("ui-overlay-visible").css({display:"none",visibility:"visible"});

    if(this.cfg.showEffect){
        var a=this;
        this.jq.show(this.cfg.showEffect,null,"normal",function(){
            a.postShow();
        });
    }
    else {
        //display dialog
        /*Begin Custom Code*/
        var dlg = jQuery(this.jqId);

        if(dlg.size() > 1){
            dlg.first().remove();
        }
        this.jq = dlg;
        /*End Custom Code*/
        this.jq.show();
        this.postShow();
    }
    this.moveToTop();
    if(this.cfg.modal){
        this.enableModality();
    }
} 
```

# git - 在下载中自动包含一个 GitHub 子模块

> ID：12936014
> 
> 赞同：27
> 
> 时间：2012-10-17T13:56:52.327
> 
> 标签：git, github, git-submodules

我有一个 GitHub 存储库并使用另一个项目作为子模块。这个子模块也在`.gitmodules`，代码如下：

```
[submodule "inc/tha"]
    path = inc/tha
    url = git://github.com/zamoose/themehookalliance.git 
```

另请参阅 GitHub 上的视图。

![回购中的子模块](../Images/d88686232c047d57234ef3b364910bc0.png)

如何下载我的 GitHub 存储库，包括子模块文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T08:58:04.117

这（包括带有 GitHub zip 或 tarball 下载的子模块：[Nodeload 服务](https://github.com/blog/1089-nodeload-metrics)）目前不受支持，如[该线程](https://github.com/wbond/sublime_package_control/issues/126#issuecomment-5470380)中所述。

[此脚本修订版将通过对](https://github.com/quarnster/sublime_package_control/commit/9fe2fc2cad9bd2e7e1a38d7e5d4aaa02fb2b4aea)[https://nodeload.github.com/user/repo/zipball/branch](https://nodeload.github.com/user/repo/zipball/branch)的多次调用，从 GitHub 存储库（*包括*子模块）中生成 zip 本身。

# windows-phone-7 - 是否可以有多个服务器将推送通知发送到 Windows Phone 应用程序？

> ID：12936021
> 
> 赞同：1
> 
> 时间：2012-10-17T13:57:25.393
> 
> 标签：windows-phone-7, push-notification, mpns

我们希望能够从具有不同身份验证 Web 服务的不同服务器向我们的 Windows Phone 应用程序发送推送通知。

我读了[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402537%28v=vs.92%29.aspx)。

我们想要使用需要客户端证书的经过身份验证的 Web 服务。是否可以注册多个客户端证书（具有相同的主题）？

如果不是，是否可以在多个服务器上使用相同的客户端证书？

# php - 从具有多个类的文件中自动加载

> ID：12936022
> 
> 赞同：1
> 
> 时间：2012-10-17T13:57:25.660
> 
> 标签：php, autoload

在我的项目结构中，我有一个通常的每个文件分离的类，并且自动加载很容易，但现在我想将一些小类分组到一个文件中，可能是一个具有当前文件夹名称的文件。

现在：

```
|/module
|-Smallclass1.php
|-Smallclass2.php
|-Smallclass3.php
|-Normalclass.php 
```

后：

```
|/module
|-module.php  <-- smallclasses go here
|-Normalclass.php 
```

现在是辩论。要自动加载一个“SmallclassX”，我想检查*SmallclassX.php*文件是否存在，如果不存在，则检查*module.php*是否存在，如果存在，请检查文件中是否存在该类并将其包含在内。当我需要一个类时包含整个*module.php文件似乎是一种开销，特别是如果文件包含许多类。*[在这里](https://stackoverflow.com/a/7791983/931340)，他们建议使用标记检查类是否存在，但我不确定它的效率，之后我需要一个方法来仅包含我需要的类。

你认为如果我像我提到的那样只加载我需要的类，是否也会因为多次读取文件并查看内部包含我想要的代码而产生开销？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:05:12.483

您可以使用[spl_autoload_register](http://php.net/manual/en/function.spl-autoload-register.php)堆叠自动加载器，允许您首先尝试从专用文件加载类，然后回退到包含模块文件（如果没有自动加载器可以解决依赖关系，则正常出错）。这将允许您通过解析令牌和其他项目来避免所有黑客攻击，这将需要更多的东西，而不仅仅是要求文件并查看之后的结果。

但是，我建议您对此解决方案进行基准测试。是否更有效将取决于访问文件（APC）的延迟以及单独解析和包含每个类的成本。

我也同意其他评论，您有两个单独的包含类的方案可能会令人困惑，而且 APC 无论如何都会消除拥有单独文件的大部分成本。

# objective-c - 如何确定我是否是具有 buttonType NSSwitchButton 的 NSButton？

> ID：12936024
> 
> 赞同：9
> 
> 时间：2012-10-17T13:57:34.263
> 
> 标签：objective-c, cocoa, user-interface, appkit, nsbutton

我将 NSButtonCell 子类化以自定义绘图（可自定义主题）。我想自定义复选框和单选按钮的绘制方式。

有谁知道如何检测按钮是复选框还是单选按钮？

只有 -setButtonType:，没有 getter，而且 -showsStateBy 和 -highlightsBy 似乎都没有为复选框提供任何唯一的返回值，这些复选框也不适用于带有图像和备用图像的常规按钮。

到目前为止，我已经找到了两个（不是很漂亮）的解决方法，但它们可能会让应用程序被 MAS 拒绝：

1.  使用 [self valueForKey: @"buttonType"]。这可行，但由于该方法不在标题中，我认为这是 Apple 不希望我做的事情。

2.  覆盖 -setButtonType: 和 -initWithCoder: 以在手动或从 XIB 设置按钮类型时跟踪它。这里的问题是 XIB 案例，因为用于将按钮类型保存到磁盘的键没有记录。再说一次，我将使用私有 API。

我真的很希望这是 NSButtonCell 的直接替代品，而不是强制客户端代码对复选框使用单独的 ULIThemeSwitchButtonCell 类，对单选按钮使用第三个类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-16T16:26:07.940

按钮对其样式一无所知。

从 NSButton 上的文档

> 请注意，没有 -buttonType 方法。set 方法设置各种按钮属性，这些属性共同建立了类型的行为。-

您可以使用 tag: 和 setTag: （由 NSButton 从 NSControl 继承）来将按钮标记为复选框或单选按钮。如果您以编程方式执行此操作，那么您应该定义您使用的常量。您也可以在 Interface Builder 中设置标签，但只能作为整数值（幻数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T16:50:07.393

在 initWithCoder 中，这是我对 BGHUDButtonCell.m 解决方案的改编，针对 Mac OS Sierra 进行了更新：

```
-(id)initWithCoder:(NSCoder *)aDecoder {

   if ( !(self = [super initWithCoder: aDecoder]) ) return nil;

   NSImage *normalImage = [aDecoder decodeObjectForKey:@"NSNormalImage"];
   if ( [normalImage isKindOfClass:[NSImage class]] )
   {
      DLog( @"buttonname %@", [normalImage name] );
      if ( [[normalImage name] isEqualToString:@"NSSwitch"] )
         bgButtonType = kBGButtonTypeSwitch;
      else if ( [[normalImage name] isEqualToString:@"NSRadioButton"] )
         bgButtonType = kBGButtonTypeRadio;
   }
   else
   {
      // Mac OS Sierra update (description has word "checkbox")
      NSImage *img = [self image];
      if ( img && [[img description] rangeOfString:@"checkbox"].length )
      {
         bgButtonType = kBGButtonTypeSwitch;
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-09T01:00:23.970

这对我来说很奇怪，NSButton 缺少它。我不明白。也就是说，扩展 NSButton 来存储最后一个设置值很容易：

```
import Cocoa

public class TypedButton: NSButton {
    private var _buttonType: NSButton.ButtonType = .momentaryLight
    public var buttonType: NSButton.ButtonType {
        return _buttonType
    }

    override public func setButtonType(_ type: NSButton.ButtonType) {
        super.setButtonType(type)
        _buttonType = type
    }
} 
```

# java - URLConnection 生成错误的 IP 校验和

> ID：12936026
> 
> 赞同：0
> 
> 时间：2012-10-17T13:57:38.020
> 
> 标签：java, http, urlconnection

我正在使用以下代码通过文件上传上传多表单/数据表单：

```
 URL url = new URL(DEST_URL);
    String boundary = "-----------------------------" + Long.toString(System.currentTimeMillis());
    PrintWriter writer = null;
    URLConnection con = url.openConnection();

    con.setDoInput(true);
    con.setDoOutput(true);
    con.setRequestProperty("Accept-Charset", "utf-8");
    con.setRequestProperty("Accept", "text/html,application/xhtml+xml,application/json,application/xml;q=0.9,*/*;q=0.8");
    con.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
    OutputStream output = con.getOutputStream();
    InputStream input = new FileInputStream(new File(FILE_PATH));
    writer = new PrintWriter(new OutputStreamWriter(output));

    writer.println(boundary);
    writer.println("Content-Disposition: form-data; name=\"input1\"");
    writer.println();
    writer.println("1234");

    writer.flush();

    writer.println(boundary);
    writer.println("Content-Disposition: form-data; name=\"input1\"");
    writer.println();
    writer.println("asdf");

    writer.flush();

    writer.println(boundary);
    writer.println("Content-Disposition: form-data; name=\"file1\"; filename=\"clicknpoint.png\"");
    writer.println("Content-Type: image/png");
    writer.println();

    writer.flush();

    int length = 0;
    byte[] buffer = new byte[1024];

    for(length = 0; (length = input.read(buffer)) > 0;) {
        output.write(buffer, 0, length);
    }
    writer.flush();
    input.close();

    writer.println();
    writer.println(boundary + "--");

    writer.flush();

    input = con.getInputStream();
    BufferedReader reader = new BufferedReader(new InputStreamReader(input));

    String cur = null;
    StringBuffer buf = new StringBuffer();

    while((cur = reader.readLine()) != null) {
        buf.append(cur);
    } 
```

服务器无法识别请求中的参数。我用wireshark检查过，它们在那里，但IP头校验和是0x0000。我认为这是问题。

知道这是从哪里来的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:43:20.680

我能看到的唯一可能不正确的是您使用 println 生成 HTTP 内容。根据您的平台，println 可能会输出单个 LF 字符，也可能会输出 CR LF 对。

HTTP 在每个标头之后肯定需要 CRLF。请参阅[http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4)。现在您的代码有违反 HTTP 协议的风险。它可能适用于某些平台，但不适用于其他平台。此外，一些服务器可能会容忍违反协议，但其他服务器可能不会。侵入性最小的更改可能是将每个 println 更改为打印并显式添加 CRLF。

```
writer.print("Content-Disposition: form-data; name=\"input1\"\r\n"); 
```

这可能与您的问题无关，但在您加强与 HTTP 的一致性之前，您的代码将面临失败的风险。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T08:51:43.480

正如您已经意识到的那样，您正在查看两个独立的问题：Wireshark 显示无效校验和，并且您的服务器未正确接收数据。

**问题 1：Wireshark 显示无效校验和**

我意识到您已经发现这是因为 TCP 校验和卸载。为了后代，我将重复您已经知道的内容。

在现代计算机上，操作系统不会为它发出的每个 TCP 数据包计算校验和。相反，校验和是在网络适配器上的硬件中计算的。由于 Wireshark 会在数据包到达网络适配器之前对其进行拦截，因此它会看到错误的校验和。要确认卸载实际上是您在 Wireshark 中看到无效校验和的原因，您可以暂时将其关闭。对于 Mac OS X，在终端中使用以下命令：

```
sudo sysctl -w net.link.ether.inet.apple_hwcksum_tx=0
sudo sysctl -w net.link.ether.inet.apple_hwcksum_rx=0 
```

要在测试后重新启用，只需将那些 0 替换为 1。要在其他操作系统上禁用卸载，请[参见](https://www.eff.org/wp/detecting-packet-injection)步骤 3部分*。如果可能，禁用 TCP 和 UDP 校验和卸载以及 TCP 分段卸载*。

**问题 2：服务器未正确接收数据**

URLConnection 对象*不可*重用。在 URLConnection 的输出流上调用 flush() 或 write() 会立即发送您的请求。之后，您必须创建一个新的 URLConnection。在调用这些方法中的任何一个之前，请确保您的所有数据都已添加到输出流中。关于操纵 URLConnections 的 I/O 流的后果的一个非常好的讨论可以在这里找到： [http ://www.javaworld.com/javaworld/jw-03-2001/jw-0323-traps.html?page=4](http://www.javaworld.com/javaworld/jw-03-2001/jw-0323-traps.html?page=4)

# git - Git WebHook（PHP）无法访问ruby环境，以apache用户身份运行jekyll

> ID：12936027
> 
> 赞同：7
> 
> 时间：2012-10-17T13:57:37.583
> 
> 标签：git, apache, jekyll, webhooks

`post-merge`我的git 存储库中有一个只运行`jekyll`命令的钩子。

当我运行`git pull`时，`post-merge`运行没有问题。

但是，我已经设置了一个 PHP 文件，它将充当远程的 WebHook：

```
$pull = `cd .. && git pull`;
echo $pull; 
```

当我访问这个文件时， git pull 运行（[在一些初始问题之后](https://stackoverflow.com/questions/12856907/git-webhook-will-not-pull-php/12890603)）并且成功。但是，由于某种原因，`post-merge`失败了。如果我查看我的 Apache 内部`error_log`，我会发现以下错误：

`.git/hooks/post-merge: line 5: jekyll: command not found`

这很奇怪，考虑到`post-merge`当我`git pull`通过 SSH 进行手动操作时成功运行了 jekyll。

[如果我按照这里](https://stackoverflow.com/questions/12918981/git-webhook-php-cannot-access-rubygem-command)的建议运行使用可执行文件的完整路径，我会在我的`error_log`：

`/usr/bin/env: ruby_noexec_wrapper: No such file or directory`

我通过 RVM 安装了 Ruby。

如何让`apache`用户运行`jekyll`没有问题？

**编辑：**这是我目前的`post-merge`：

```
#!/bin/sh

unset GIT_DIR

source /usr/local/rvm/environments/ruby-1.9.3-p194

/usr/local/rvm/gems/ruby-1.9.3-p194/bin/jekyll

echo "Deployed!" 
```

当我以`apache`用户身份运行它时，我现在收到此错误：

![](../Images/e62db86caff3083bf9f91c3a37b6b900.png)

安装了 Node.js。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T15:49:36.787

我认为这个错误很清楚：

```
jekyll: command not found 
```

您应该使用`jekyll`命令的完整路径。

```
whereis jekyll 
```

然后使用完整路径执行命令，例如：

```
/usr/local/bin/jekyll --params 
```

这是该`ruby_noexec_wrapper`问题的解决方案。

[/usr/bin/env ruby​​_noexec_wrapper 失败，没有文件或目录](https://stackoverflow.com/questions/12127603/usr-bin-env-ruby-noexec-wrapper-fails-with-no-file-or-directory)

**编辑：**

```
Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available 
```

[ExecJS 并且找不到 JavaScript 运行时](https://stackoverflow.com/questions/6282307/execjs-and-could-not-find-a-javascript-runtime)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T22:31:18.937

因为我使用的是 RVM，所以我必须直接获取它而不是 Ruby。不知道为什么，但它现在正在工作。

我`post-merge`看起来像这样：

```
#!/bin/bash

unset GIT_DIR

/usr/local/rvm/bin/rvm use 1.9.3

/usr/local/rvm/gems/ruby-1.9.3-p194/bin/jekyll

echo "Deployed!" 
```

不完美 - rvm 回显了很多我不想要的东西，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-11T09:12:07.793

我通过将以下内容添加到我的`~/.bash_profile`文件中来解决此问题：

```
source ~/.bashrc 
```

安装`rvm`程序应该已经添加

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

我在`source`上面添加了一行，它解决了这些问题。

# java - JPA 获取 3 个级别

> ID：12936037
> 
> 赞同：0
> 
> 时间：2012-10-17T13:58:21.890
> 
> 标签：java, jpa, fetch

我需要做这样的事情：

结构是：

X 包含 Y 的列表。 Y 包含或不包含 Z 的列表。

```
Xroot.fetch("Y", JoinType.INNER);
Xroot.fetch("Y.Z", JoinType.LEFT); 
```

但在 JPA 中，最后一行不起作用。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:16:15.520

您需要在孩子内部获取。

```
Fetch<X,Y> yFetch = xRoot.fetch("Y", JoinType.INNER); 
yFetch.fetch("Z", JoinType.LEFT); 
```

当然，你也可以流畅地打字

```
xRoot.fetch("Y", JoinType.INNER).fetch("Z", JoinType.LEFT); 
```

请参阅[http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Fetch.html](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/Fetch.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:02:05.730

因为 JPA 2.0 规范不需要支持多级提取，所以没有供应商独立的解决方案：

> 本规范的实现不需要支持多级获取连接。使用多级提取连接的应用程序将不可移植。

根据[文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/queryhql.html#queryhql-joins)，Hibernate 至少在 HQL 查询中支持多级获取。使用 EclipseLink可以使用[eclipselink.left-join-fetch查询提示。](http://eclipse.org/eclipselink/documentation/2.4/jpa/extensions/q_left-join-fetch.htm#CHDEFDDC)

# iphone - 什么是 mime 类型它不能像我一样使用应用程序/pdf 在 iphone 中发送

> ID：12936041
> 
> 赞同：0
> 
> 时间：2012-10-17T13:58:27.237
> 
> 标签：iphone, email, pdf, mime

MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init]; picker.mailComposeDelegate = self;

```
 [picker setMessageBody:@"Invoice Report Pdf File" isHTML:NO];

    NSMutableData *pdfData =[NSMutableData dataWithContentsOfFile:filePath];

    [picker addAttachmentData:pdfData mimeType:@"application/pdf" fileName:self.pdfName]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:59:50.453

根据我的代码更改 mime 类型，它会帮助你。

```
NSMutableData *pdfData = [NSMutableData data]; UIGraphicsBeginPDFContextToData(pdfData, bounds, nil); 
```

然后在将来的某个时候，您需要将其传递`pdfData`给`MFMailComposeViewController`.

```
MFMailComposeViewController *vc = [[[MFMailComposeViewController alloc] init] autorelease]; [vc setSubject:@"my pdf"]; [vc addAttachmentData:pdfData mimeType:@"image/pdf" fileName:@"SomeFile.pdf"]; 
```

# flash - 如何在 Liferay vaadin portlet 6.1 的浏览器中显示 swf 文件？

> ID：12936042
> 
> 赞同：1
> 
> 时间：2012-10-17T13:58:32.393
> 
> 标签：flash, liferay, vaadin

我必须将 swf 文件列表保存在本地系统的本地目录中，而不是项目文件夹中。

我必须使用它的名称从该路径调用 swf 文件，并将其显示在浏览器中，以用于 liferay 6.1 中的 vaadin portlet。

任何人都可以分享如何实现这一目标的想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:41:20.007

为此，您必须使用 Stream Resource .. 只需检查以下示例代码 ..

祝你的签证过程好运:)

```
 Window window = new Window();

    setMainWindow(window);

    Label label = new Label("Embed tag");

    label.setDebugId("lblMsg");

    window.addComponent(label);

    StreamSource s = new StreamResource.StreamSource() {

    @Override
    public InputStream getStream() {
    File f = new File("C:/test/test.swf");
    FileInputStream fis=null;
    try {
    fis = new FileInputStream(f);
    } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }
    return fis;
    }
    };

    StreamResource r = new StreamResource(s,"application/x-shockwave-                        flash",getMainWindow().getApplication());
    Embedded e = new Embedded();
    e.setType(Embedded.TYPE_OBJECT);
    e.setMimeType("application/x-shockwave-flash");
    e.setSource(r);
    e.setWidth("400px");
    e.setHeight("400px");

    window.addComponent(e); 
```

# javascript - 表单中的表单通过 Internet Explorer 提交两次请求？

> ID：12936043
> 
> 赞同：1
> 
> 时间：2012-10-17T13:58:33.497
> 
> 标签：javascript, internet-explorer-7, request, form-submit

我有一个包含另一个表单的表单。
当我通过 javascript 提交嵌套表单时，它在 Internet Explorer 中提交了两次，但在任何其他浏览器中只提交了一次。
如何提交嵌套表单以在 IE 中只发送一个请求。

### 编辑：

我正在使用 onchange 事件来提交嵌套表单..那么在我的情况下单击如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:00:20.227

你真的不应该嵌套表单，但你可以阻止事件的传播。例如，如果您的`click`活动正在提交外部表单，请执行以下操作：

```
$("form").on("click", function(e){
   e.stopPropagation();
}); 
```

请务必阅读[有关事件委托的说明](http://api.jquery.com/event.stopPropagation/#notes-0)。

此外，没有必要嵌套表单。如果您愿意，您可以在一个表单中使用提交按钮提交完全不同的表单；只需使用`form`按钮本身的属性：

```
<form id="foo">
    <!-- Within #foo, but I submit #bar -->
    <input type="submit" form="bar" value="Within Foo" />
</form>

<form id="bar">
    <!-- Within #bar, but I submit #foo -->
    <input type="submit" form="foo" value="Within Bar" />
</form>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我应该注意，`form`Internet Explorer 10 中不支持这样的属性。您可以使用一些简单的逻辑来修补此逻辑，如下所示：

```
$(":submit[form]").on("click", function ( e ) {
    $( "#" + $(this).attr("form") ).submit();
    e.preventDefault();
}); 
```

# android - 如何在android 2.3.6上使用前置摄像头

> ID：12936048
> 
> 赞同：0
> 
> 时间：2012-10-17T13:58:51.173
> 
> 标签：android, camera, record

对不起我的英语不好。

我已经写了这段代码来使用我的三星galaxy s plus上的前置摄像头。但是该应用程序打开了我的默认相机并且工作非常糟糕。我想用前置摄像头录制视频，但前置摄像头打不开。

任何想法？

```
import java.io.IOException;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.ArrayList;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.graphics.PixelFormat;
import android.hardware.Camera;
import android.hardware.Camera.Size;
import android.content.Intent;
import android.view.SurfaceHolder;
import android.view.SurfaceHolder.Callback;
import android.view.SurfaceView;
import android.view.Window;
import android.view.WindowManager;

public class Main extends Activity implements SurfaceHolder.Callback {

private static final String TAG = null;

private Camera mcamera;

private SurfaceView mSurfaceView;
private SurfaceHolder mSurfaceHolder;
private boolean mPreviewRunning;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    getWindow().setFormat(PixelFormat.TRANSLUCENT); 
    requestWindowFeature(Window.FEATURE_NO_TITLE);  
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);   //full screen
    setContentView(R.layout.main);

    mSurfaceView = (SurfaceView)findViewById(R.id.camerasurf);
    mSurfaceHolder = mSurfaceView.getHolder();  
    mSurfaceHolder.addCallback(this);   
    mSurfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);    

}

public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    if (mPreviewRunning)
        mcamera.stopPreview();

    Camera.Parameters p = mcamera.getParameters();  
    p.set("camera-id", 2);
    p.setPreviewSize(640, 480); 
    mcamera.setParameters(p);   

    try {

        mcamera.setPreviewDisplay(arg0);    
        mcamera.startPreview();
        mPreviewRunning = true;
    } catch (IOException e) {

    }

}
public void surfaceCreated(SurfaceHolder holder) {

     mcamera=Camera.open();

}

public void surfaceDestroyed(SurfaceHolder holder) {
    mcamera.stopPreview();
    mPreviewRunning = false;
    mcamera.release();

} 
```

}

在我的清单上我写了这个。

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera"         android:required="false"/>
<uses-feature android:name="android.hardware.camera.front"       android:required="false"/> 
```

我的错误在哪里？TNX

# iphone - 库依赖于另一个库

> ID：12936051
> 
> 赞同：0
> 
> 时间：2012-10-17T13:59:02.210
> 
> 标签：iphone, ios, xcode

我有`RestClientLibrary`和`UserFunctionsLibrary`

`UserFunctionsLibrary`需要`RestClientLibrary`才能发挥作用。

当我将它们编译成它们时，`libRestClientLibrary.a`它们`libUserFunctionsLibrary.a`将如何相互交互？

目前在 Xcode 中，我已将 .h 文件设置`User header search paths`为查找 .h 文件，并将其`UserFunctionsLibrary`与`RestClientLibrary`二进制文件链接。但是，当分发这些库的其他用户时，可能会有不同的设置等。我看不出它会起作用。

感谢您能给我的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:05:07.987

这些 .a 文件只是库文件。它们需要链接在一起才能实际使用。链接器将处理将所有符号从 RestClientLibrary 解析为 UserFunctionsLibrary。

就其他用户而言，他们必须以将两个库都传递给链接器的方式配置他们的系统。

# php - zii.widgets.CDetailView 格式化日期

> ID：12936052
> 
> 赞同：2
> 
> 时间：2012-10-17T13:59:05.133
> 
> 标签：php, yii

作为一个 zii.widgets.CDetailView 来格式化我想要的日期，而不是数据库的形式？

**更新**

```
<?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    ...
    'create_time',
    'update_time',
),
)); ?> 
```

以以下形式显示日期

```
Create Time: 2012-10-03 22:49:01
Update Time: 2012-10-05 20:24:01 
```

我要形成

```
Create Time: 22:49, 3 Oct 2012
Update Time: 20:24, 5 Oct 2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:46:50.857

CDetailView 使用不包含 DateFormatter 的 Yii::app()->格式。

您需要使用一个函数来实现这一点。

```
<?php $this->widget('zii.widgets.CDetailView', array(
'data'=>$model,
'attributes'=>array(
    ...
    array(
       'name'=>'create_time',
       'value'=>Yii::app()->dateFormatter->format('HH:ss, dd MMM yyyy',$model->create_time) ,  
     ),
    'update_time',
),
)); ?> 
```

这只是一个示例，格式可能会有所不同，但这对您很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:19:56.380

如果您计划在许多地方使用该特定格式（即超过 1 个；-），则可能值得向格式对象添加自定义函数。

更多信息： [Yii 格式化日期和过滤器](https://stackoverflow.com/questions/11891629/yii-formating-date-and-filters/11909538#11909538)

但本质上它允许你做的是这样指定它：

```
'columns'=>array(
    array(
        'name'=>'checkout',
        'type'=>'myCustomDate',
    ),
), 
```

我发现 CGridView 的这个特性是一个非常有用的特性，在 Yii 社区中鲜为人知。

# asp.net-mvc - 带有 MVC 的 Jquery Datepicker - 获取选择的日期

> ID：12936057
> 
> 赞同：0
> 
> 时间：2012-10-17T13:59:20.500
> 
> 标签：asp.net-mvc, jquery-ui-datepicker

我的 MVC 视图中有以下内容：

```
 @Html.TextBoxFor(model => model.FromDateCollected, new { style = "width:90px;" }) 
```

在查询中，我有以下内容：

```
 $("#FromDateCollected").datepicker(); 
```

为了获得选定的日期，我尝试了以下方法：

```
 var dt = $("#FromDateCollected").datepicker("getDate")

     alert(dt); 
```

但得到：

```
 [object Object] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:01:25.447

只获取文本框的值

```
var dt = $("#FromDateCollected").val();
alert(dt); 
```

如果您想获取选定的日期，当用户在日历中选择一个日期时，您可以在`onSelect`事件中执行此操作

```
 $(function() {

   $('#FromDateCollected').datepicker({
      onSelect: function(dateText, inst) {
           alert(dateText);
      }
   });

}); 
```

工作示例 [http://jsfiddle.net/pDmjm/5/](http://jsfiddle.net/pDmjm/5/)

编辑：根据评论，

`$("#FromDateCollected").datepicker("getDate")`将为您提供一个 Date 对象，并`$("#FromDateCollected").val();`在文本框中为您提供一个具有当前值的字符串。将结果写入控制台，您将看到结果。

示例： http: [//jsfiddle.net/pDmjm/14/](http://jsfiddle.net/pDmjm/14/)（警报后检查萤火虫控制台）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:02:46.850

您可以从文本框值中获取日期。

```
var dt = new Date(Date.Parse($('#FromDateCollected').val()));
alert(dt); 
```

# jquery - 将 $.post 中的数据设置为 var

> ID：12936058
> 
> 赞同：-2
> 
> 时间：2012-10-17T13:59:22.397
> 
> 标签：jquery, ajax

编码：

```
 $.post('script.php',{value:value},function(data)
 {
        var Aquaman= ???;
 }); 
```

现在我的问题是，如果我想将数据值设置到 Aquaman 变量中，我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:04:54.657

欢迎来到异步逻辑的奇妙世界。

您需要做的就是`var Aquaman = data;`- 但是，该变量将仅存在于该匿名函数中。

您可以通过以通常的方式分配全局变量来解决此问题：

```
 var Aquaman;
 $.post('script.php',{value:value},function(data) {
      Aquaman= data;
 }); 
```

但是，在您的 AJAX 调用完成之前，不会设置此全局变量。例如，如果`Aquaman`被其他 AJAX 调用或用户事件调用，这可能是可取的。但是，以下代码不会像您预期的那样工作：

```
 var Aquaman;
 $.post('script.php',{value:value},function(data) {
      Aquaman= data;
 });
 console.log(Aquaman); // displays nothing 
```

...因为在完成`console.log()`之前立即运行`$.post()`。

防止*这种*情况的唯一方法是进行同步[AJAX 调用](http://api.jquery.com/jQuery.ajax/)：

```
$.ajax({url: 'script.php', data: {value:value}, async: false}, function(data) {...}); 
```

...但这会通过强制您的脚本停止并等待回调完成来抵消 AJAX 的大部分优势。在几乎所有情况下，最好让您的 AJAX 保持异步并处理`data`内部回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:06:03.057

`data`为to赋值`Aquaman`很简单，如下所示：

```
$.post('script.php',{value:value},function(data){
    var Aquaman= data;
}); 
```

但是，由于[范围可变](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Variable_scope)`$.post`，如果您在回调之外需要此值，则需要`Aquaman`在此函数之外定义。例如：

```
//Some Code
$.post(...,function(data){
  var Aquaman = data;
});

// Aquaman is undefined out here. 
```

然而：

```
var Aquaman;
$.post(...,function(data){
    Aquaman = data;
});
// Aquaman exists (but be careful, AJAX calls make this value not accessible
// until the callback has been executed.) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:05:39.677

为了让一个如此基本的问题变得简单，请在全局范围内声明您的 Aquaman 变量：

```
var Aquaman;

function something()
{
     $.post('script.php',{value:value},function(data)
     {
         Aquaman= data;
     });
} 
```

您可以找到更好的方法来执行此操作，请参见[此处](https://stackoverflow.com/questions/12915794/calling-variable-from-another-function-in-javascript/12916127#12916127)。

# jquery - 在 Liferay Theme 中包含 jQuery 和其他 JS 文件

> ID：12936061
> 
> 赞同：8
> 
> 时间：2012-10-17T13:59:27.610
> 
> 标签：jquery, liferay, liferay-6, liferay-theme

我使用 Liferay 6.1，我创建了我的主题 ( `sample-theme`)，我想添加`jQuery`. 我怎样才能做到这一点？

为什么我有文件夹：`sample-theme`并且`liferay-work`两者都有文件夹：css、js、模板？

我创建了文件夹`_diffs`和子文件夹，`js`然后复制 jQuery 并添加`portal_normal.vm`：

```
<script src="/html/js/jquery/jquery-1.8.2.min.js"></script> 
```

而且我没有看到任何变化，为什么？如何添加 jQuery？不仅适用于单个 portlet，而且适用于所有 portlet。

* * *

我没有文件夹**docroot**我使用的是 Maven，在**src/main/webapp**我创建了文件夹**_diffs**和文件夹**js**，在那里我添加了**jquery.js**并在**_diffs**创建了模板文件夹并粘贴：

```
<script src="$javascript_folder/jquery-1.8.2.min.js"></script> 
```

它仍然是错误的。也许文件夹 _diffs 应该在其他地方？maven项目的结构应该是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T09:58:30.037

您可以将所有 javascript 文件添加到`js`主题中的文件夹中，例如：

> 示例主题/docroot/_diffs/js/jquery-1.8.2.min.js

然后为了让每个人都可以使用它，您可以`<head>`在模板文件部分中编写以下任何行`portal_normal.vm`并`portal_pop_up.vm`显示在目录中`sample-theme/docroot/_diffs/templates/`：

```
#js ("$javascript_folder/jquery-1.8.2.min.js") 
```

或者

```
<script src="$javascript_folder/jquery-1.8.2.min.js"></script> 
```

[注意：`portal_pop_up.vm`用于将您的 javascript 更改应用到 AUI 对话框弹出窗口（如果您正在使用它们）]

### 关于事情如何运作的更多解释：

`$javascript_folder`是主题模板文件中存在的速度变量，它指向 javascript 存储路径（默认为：）`${root-path}/js`，可以这样定义`liferay-look-and-feel.xml`：

```
<theme id="sample" name="Sample">
    <root-path>/html</root-path> <!-- optional -->
    <javascript-path>${root-path}/js/jQuery</javascript-path> <!-- So path becomes: sample-theme/html/js/jQuery -->
</theme> 
```

您也可以`${root-path}`通过`<javascript-path>`指定它来自定义，`liferay-look-and-feel.xml`如图`<root-path>`所示。的默认值`${root-path}`是`/`ie 它指的是目录`sample-theme/`。

基本上，文件夹`css`, `js`, `templates`&是在您构建主题时`images`随着您在相应`_diffs`文件夹 (`_diffs/css`等) 中所做的更改而更新的文件夹。`_diffs/js`这就是速度变量像`$javascript_folder`&分别`$css_folder`指向`sample-theme/js`&`sample-theme/css`而不是`sample-theme/_diffs/js`or的原因`sample-theme/_diffs/css`。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T23:01:00.290

添加
`<script src="$themeDisplay.getPathThemeRoot()js/jquery-1.8.2.min.js" type="text/javascript">`portal_normal.vm

将文件添加到 sample-theme/docroot/_diff/js 文件夹后，
您也可以直接使用 CDN
`<script src="<jquery url in CDN>" type="text/javascript">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T16:07:30.963

您应该将**jquery-1.8.2.min.js**添加到主题中的文件夹**docroot/_diffs/js**中。然后在**docroot/_diffs/templates/portal_normal.vm**你应该将以下行添加到 <head /> 部分：

```
<script src="$javascript_folder/jquery-1.8.2.min.js"></script> 
```

我认为，它应该工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T04:37:36.230

1.  只有在有 ant 项目时才需要 diffs，对于 MAVEN，您不需要 diffs

2.  当您想在 portlet 而非主题中执行此操作时，request.getContextPath 很有用。

3.  您可以使用 "$javascript_folder 访问 js 文件夹中的任何内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-01T14:05:54.123

这应该对你有帮助

```
 <script src="<%=request.getContextPath()%>/js/jquery-1.8.2.min.js" ></script> 
```

# ios - 如何在 Xcode 中调试插件源代码？

> ID：12936064
> 
> 赞同：6
> 
> 时间：2012-10-17T13:59:36.140
> 
> 标签：ios, xcode, debugging, apple-mail

我是为 Apple Mail 应用程序创建插件的新手，我想为 OSX 创建 Apple Mail 插件。

我在 Xcode 中的“安装程序插件”（应用程序插件 -> 安装程序插件）下创建了一个项目，但我无法像简单的 iOS 应用程序那样调试该项目。

可能吗？

如果可能的话，请帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-20T12:16:20.393

我已经找到了这个问题的解决方案。

只需按照在 Xcode 中调试插件代码的步骤即可。

第 1 步 = 转到 Xcode 中的编辑方案并转到编辑方案 = >。 ![在此处输入图像描述](../Images/2fc7592f6fce415f21a722ff586dd95c.png)

步骤 2=从侧面窗口中选择运行和信息选项卡，然后从下拉列表中选择可执行应用程序（在我的情况下，邮件应用程序来自应用程序->邮件）

保持您的应用程序运行 ant 尝试调试您的插件源代码.. 它对我来说太棒了..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-10T11:41:51.863

附加提示：

如果您要调试 Xcode 插件，我发现了这个：

Speedy37 在 2014 年 9 月 19 日发表评论：

使用默认选项您无法调试 Xcode 6

转到您的调试选项：编辑方案 > 运行 > 选项并取消选中“启用用户界面调试”（DebuggerUI 无法自行调试）

完成此操作后，我可以在 Xcode 插件崩溃之前对其进行调试。

# sql-server - 表示 DATETIME 值的整数：如何转换？

> ID：12936065
> 
> 赞同：4
> 
> 时间：2012-10-17T13:59:43.087
> 
> 标签：sql-server

我有一个包含代表 DATETIME 值的整数字段，如何转换日期时间格式..

值，代表日期时间

```
6843438  is a    04/01/2013 09:18
6843660  is a   04/01/2013 13:00 
```

尝试

```
select dateadd(hour,6843438,'19700101') -->>  error
select dateadd(hour,843438,'19700101') -->> 2066-03-21 06:00:00.000  is bad 
```

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:04:06.747

嗯，这不是小时，因为你得到了 09:18。所以可能是几分钟。

因此，我们可以验证这一点，并且还可以计算大约有多少年

```
SELECT
    6843438 /60 /24 /365,    --years = 13
    6843438 /60,             --hours = 114957 (not really useful)
    6843438 % 60             --minutes = 18 
```

因此，如果您将 Epoch 更改为 2000 年 1 月 1 日，它可以工作

```
select
    dateadd(minute,6843438,'20000101'),
    dateadd(minute,6843660,'20000101') 
```

# database - ECM Documentum 迁移测试

> ID：12936069
> 
> 赞同：1
> 
> 时间：2012-10-17T13:59:58.130
> 
> 标签：database, testing, documentum

我是 Documentum 的新手，目前正在从事迁移项目。旧数据库将迁移到 Documentum 平台。关于如何在旧数据库和 Documentum 数据库之间执行数据库测试的任何想法？

如果有人拥有从测试角度来看有用的 DQL，请与我分享。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T19:07:49.353

EMC 的 Documentum 平台是用于内容管理的 CMS（或 ECM）工具。它使用外部数据库来存储元数据，但它本身不是数据库。Documentum 将为您存储和管理内容，并在数据库中保留指向内容存储库（以及一堆其他业务策略信息）的链接。因此，对于您的问题，如果您希望在 Documentum 表空间中包含外部数据库表以运行 DQL 查询以同时使用 Documentum 对象表和外部表，则需要“注册”它们，以便 Documentum 的 API 可以访问它们并且DQL。注册 DQL 语法为：

```
REGISTER TABLE [owner_name.]table_name
(column_def {,column_def})
[[WITH] KEY (column_list)]
[SYNONYM [FOR] 'table_identification'] 
```

请注意，该表至少应该可供 docbase 所有者选择 - Documentum 用于连接到其数据库的数据库用户的凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T13:04:22.730

当您说“*从遗留数据库迁移到 Documentum 平台*”时，假设遗留数据库具有存储为 blob 类型的非结构化数据，您需要将其移动到更相关的内容存储介质（*如 Documentum*）。

您需要在测试方法中确保以下几个方面

*   确保所有数据都已实际迁移（*在迁移期间维护的某种日志，以根据实际数据库内容指标进行统计*）。您还可以在迁移后交叉检查分类对象计数 - 这是基于对数据库数据的业务理解。
*   确保在迁移期间保持数据完整性（*blob 数据和迁移的存储库内容的校验和*）。
*   如果您正在迁移版本 - 检查以验证正确的版本历史记录。
*   确保在迁移期间正确迁移元数据。

通常客户会接受最后三个项目的抽样测试。过去曾这样做过构建自定义测试工具来执行这些选项。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-07T23:13:39.367

您可以试用我们的 ECM 迁移平台，免费提供 50k 个对象。有了它，您可以通过将内容和文件夹以及安全性等从 prod 传输到测试存储库来构建存储库，或者您可以通过指定文件夹的类型和数量、文件夹中的文件等来生成一个存储库。您还可以重新在不创建重复项的情况下进行导入，并清理最终得到的大而讨厌的测试目标文件夹。

你可以在这里下载：http: [//move.qtility.com](http://move.qtility.com)

# mysql - #1005 - 无法创建表 'table_name' (errno: 150)

> ID：12936076
> 
> 赞同：3
> 
> 时间：2012-10-17T14:00:26.023
> 
> 标签：mysql, sql, yii

这是我的桌子：

```
DROP TABLE IF EXISTS `tbl_comments`;
CREATE TABLE IF NOT EXISTS `tbl_comments` (
  `id` int(11) NOT NULL auto_increment,
  `topic_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `text` text NOT NULL,
  `create_dt` datetime NOT NULL,
  `update_dt` timestamp NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  KEY `topic_id_2` (`topic_id`),
  KEY `user_id` (`user_id`),
  CONSTRAINT `tbl_comments_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`id`),
  CONSTRAINT `tbl_comments_ibfk_1` FOREIGN KEY (`topic_id`) REFERENCES `tbl_topics` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `tbl_users`;
CREATE TABLE IF NOT EXISTS `tbl_users` (
  `id` int(11) NOT NULL auto_increment,
  `username` varchar(20) NOT NULL default '',
  `password` varchar(128) NOT NULL default '',
  `email` varchar(128) NOT NULL default '',
  `activkey` varchar(128) NOT NULL default '',
  `superuser` int(1) NOT NULL default '0',
  `status` int(1) NOT NULL default '0',
  `create_at` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `lastvisit_at` timestamp NOT NULL default '0000-00-00 00:00:00',
  PRIMARY KEY  (`id`),
  UNIQUE KEY `user_username` (`username`),
  UNIQUE KEY `user_email` (`email`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8;

DROP TABLE IF EXISTS `tbl_topics`;
CREATE TABLE IF NOT EXISTS `tbl_topics` (
  `id` int(11) NOT NULL auto_increment,
  `group_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `header` varchar(255) NOT NULL,
  `text` text NOT NULL,
  `create_dt` datetime NOT NULL,
  `update_dt` timestamp NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`id`),
  KEY `user_id` (`user_id`),
  KEY `group_id` (`group_id`),
  CONSTRAINT `tbl_topics_ibfk_1` FOREIGN KEY (`group_id`) REFERENCES `tbl_groups` (`id`),
  CONSTRAINT `tbl_topics_ibfk_2` FOREIGN KEY (`user_id`) REFERENCES `tbl_users` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8; 
```

现在我尝试导入时出现错误：#1005 - 无法创建表 'kobeco_yii.tbl_comments' (errno: 150) （详细信息：Percona-XtraDB，支持事务、行级锁定和外键）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:03:08.590

您正在尝试`tbl_comments`在其他表之前创建。`tbl_comments`需要表`tbl_users`和`tbl_topics`外键约束。

尝试将`CREATE TABLE`for`tbl_comments`移到其他下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:02:04.347

您的第一个表 ( `table_commets`) 对尚不存在的表有约束。这可能是您按该顺序创建它们的问题。

创建`table_usr`和`table_topics`首先。

# facebook - Facebook 3.1 SDK 捆绑 ID，如何为多个应用使用相同的捆绑 ID

> ID：12936078
> 
> 赞同：1
> 
> 时间：2012-10-17T14:00:31.507
> 
> 标签：facebook

Facebook 3.1 SDK 需要一个 bundle ID 来匹配应用的 bundle ID。我有超过 100 个 Facebook 应用程序，所以不是提供 100 个捆绑 ID，而是使用一个唯一 ID 的解决方案。

有没有办法使用代码动态更改仪表板中的 Facebook 捆绑 ID？

# java - 使用带有自定义 Bean 解析器的 .properties 文件

> ID：12936080
> 
> 赞同：5
> 
> 时间：2012-10-17T14:00:35.307
> 
> 标签：java, spring, scala, customization, javabeans

我有一个 AbstractSingleBeanDefinitionParser 的自定义实现，允许我在我的 spring 配置中定义 3D 矢量，而无需其他方式。

```
<rbf:vector3d id="test_vector" delimeter=";" value="45;46;47"/> 
```

效果很好，我已经使用了几个月没有任何问题。昨天我试图在 .properties 文件中定义值，如下所示：

在 test.properties 我有：

```
vector3d.value=1,2,3 
```

在xml文件中我有：

```
<context:property-placeholder location="test.properties"/>
<rbf:vector3d id="test_vector_with_properties" delimeter="," value="${vector3d.value}"/> 
```

当我尝试运行我的单元测试时，它崩溃了，我得到了这个异常：

```
Caused by: java.lang.NumberFormatException: For input string: "${vector3d.value}"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)
    at java.lang.Double.parseDouble(Double.java:510)
    at scala.collection.immutable.StringLike$class.toDouble(StringLike.scala:234)
    at scala.collection.immutable.StringOps.toDouble(StringOps.scala:31)
    at rb.foundation.spring.xml.Vector3DBeanDefinitionParser$$anonfun$1.apply(Vector3DBeanDefinitionParser.scala:25) 
```

当我将 .properties 文件用于普通 bean 时，它工作得很好，这让我相信我在实现解析器时忽略了一个微妙之处。它是用 scala 编写的，但您应该能够遵循它：

```
class Vector3DBeanDefinitionParser extends AbstractSingleBeanDefinitionParser
{
  override def getBeanClass(element : Element) = classOf[Vector3D]

  override def doParse(element: Element, builder: BeanDefinitionBuilder)
  {
    val delim = element.getAttribute("delimeter")
    val value = element.getAttribute("value")

    val values = value.split(delim).map(_.toDouble)

    builder.addConstructorArgValue(values(0))
    builder.addConstructorArgValue(values(1))
    builder.addConstructorArgValue(values(2))
  }
} 
```

如有必要，我很乐意添加密钥替换，我只需要知道在哪里/如何做。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:43:03.943

所以这不起作用的原因是您的 BeanDefinitionParser 在解析属性占位符之前运行了很多。据我了解的简单概述：

1.  BeanDefinitionParsers 将 XML 解析为内存中的 BeanDefinition 对象
2.  然后将 BeanDefinitions 加载到 BeanFactory 中
3.  BeanFactoryPostProcessors（包括属性占位符配置器）在 bean 定义上执行
4.  bean 是从 bean 定义中创建的

（当然，在此过程中还会发生其他事情，但这些是这里的相关步骤。）

因此，为了将解析的属性值放入 Vector3D 对象，我认为您将不得不延迟指定 Vector3D 构造函数的参数，直到 BeanFactoryPostProcessors 运行之后。我想到的一种方法是让您的 BeanDefinitionParser 为 Spring FactoryBean 而不是 Vector3D 本身构造一个 bean 定义。然后，您当前在 Vector3DBeanDefinitionParser 中拥有的向量值的拆分将需要在 FactoryBean 实现中进行。

抱歉，我对 Scala 不太熟悉，所以这将使用 Java。

FactoryBean 类看起来像这样：

```
import org.springframework.beans.factory.FactoryBean;

public class Vector3DFactoryBean implements FactoryBean<Vector3D> {
    private String delimiter;
    private String value;
    private transient Vector3D instance;

    public String getDelimiter() { return delimiter; }
    public void setDelimiter(String delimiter) { this.delimiter = delimiter; }
    public String getValue() { return value; }
    public void setValue(String value) { this.value = value; }

    @Override
    public Vector3D getObject() {
        if (instance == null) {
            String[] values = value.split(delimiter);
            instance = new Vector3D(
                                    Double.parseDouble(values[0]),
                                    Double.parseDouble(values[1]),
                                    Double.parseDouble(values[2])
                                   );
        }
        return instance;
    }
    @Override
    public Class<?> getObjectType() {
        return Vector3D.class;
    }
    @Override
    public boolean isSingleton() {
        return true;
    }
} 
```

然后，您的 Vector3DBeanDefinitionParser 将只传递`delimiter`和`value`未触及到 Vector3DFactoryBean bean 定义：

```
class Vector3DBeanDefinitionParser extends AbstractSingleBeanDefinitionParser
{
  override def getBeanClass(element : Element) = classOf[Vector3DFactoryBean]

  override def doParse(element: Element, builder: BeanDefinitionBuilder)
  {
    val delim = element.getAttribute("delimeter")
    val value = element.getAttribute("value")

    builder.addPropertyValue("delimiter", delim)
    builder.addPropertyValue("value", value)
  }
} 
```

然后稍后当占位符属性配置器运行时，它应该解析 Vector3DFactoryBean bean 定义中的属性值。当最终从 bean 定义创建 bean 时，Vector3DFactoryBean 将解析向量值并创建 Vector3D 对象。

# wpf - 包装板中的边距

> ID：12936082
> 
> 赞同：0
> 
> 时间：2012-10-17T14:00:48.890
> 
> 标签：wpf, xaml, layout

我正在使用 WPF 的包装面板。问题是在它的右侧有一个空白空间，我想减少它，但我不知道如何。

在下面的图片中，您可以看到右侧对左侧边距，我希望它们都像左侧一样。

![在此处输入图像描述](../Images/e325bd3b011973a82793be9601a1c8f1.png)

这是我的 XAML：

```
 <Grid x:Name="root">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="263*" />
        <ColumnDefinition Width="240*" />
    </Grid.ColumnDefinitions>
    <Rectangle Fill="LightBlue"/>
    <WrapPanel >
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
    </WrapPanel>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:20:34.960

看起来您忘记`WrapPanel`将`Column`. 像这样：

```
<Grid x:Name="root">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="263*" />
        <ColumnDefinition Width="240*" />
    </Grid.ColumnDefinitions>
    <Rectangle Fill="LightBlue"/>
    <WrapPanel HorizontalAlignment="Center">
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
        <Rectangle Margin="10" Fill="Red" Width="40" Height="40"></Rectangle>
    </WrapPanel>
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:29:46.417

最后你会得到很大的空间，因为它只能在你分配的空间中容纳这么多的正方形。它不能将最后一个正方形完全放入第一行，因此将其包裹起来。右边的那块空间只是额外的“死”空间。

使用 WrapPanel 可以做的另一件事是指定项目的大小。你会看到我使用了 ItemHeight 和 ItemWidth 属性，这让我可以更好地控制它的大小。

```
 <Grid x:Name="LayoutRoot">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="263*" />
                <ColumnDefinition Width="280*" />
            </Grid.ColumnDefinitions>
            <Rectangle Fill="LightBlue"/>
            <WrapPanel ItemHeight="60" ItemWidth="60" >
                <Rectangle Margin="5" Fill="Red" Width="60" Height="60"></Rectangle>
               <Rectangle Margin="5" Fill="Red" Width="60" Height="60"></Rectangle>
               <Rectangle Margin="5" Fill="Red" Width="60" Height="60"></Rectangle>
               <Rectangle Margin="5" Fill="Red" Width="60" Height="60"></Rectangle>
               <Rectangle Margin="5" Fill="Red" Width="60" Height="60"></Rectangle>
               <Rectangle Margin="5" Fill="Red" Width="60" Height="60"></Rectangle>
            </WrapPanel>
            </Grid> 
```

# sql - SQL Server 存储过程锁定问题？

> ID：12936087
> 
> 赞同：-2
> 
> 时间：2012-10-17T14:01:12.860
> 
> 标签：sql, sql-server, stored-procedures

我创建了这个非常基本的存储过程，当用户创建特定类型的项目时，我们的 cms 会调用它。但是，看起来有时我们会为使用相同数据创建的每个 cms 项目获得两行，但是是一个 off-by-one `SourceID`。我没有做太多的 SQL 工作，所以这可能是一些基本的事情 - 但我是否需要在存储过程中以某种方式显式锁定表以防止这种情况发生？

这是存储过程代码：

```
BEGIN
    SET @newid = (SELECT MAX(SourceID)+1 from [dbo].[sourcecode])

    IF NOT EXISTS(SELECT SourceId from [dbo].[sourcecode] where SourceId = @newid)
        INSERT INTO [dbo].[sourcecode]
            (
                SourceID,
                Description,
                RunCounts,
                ShowOnReport,
                SourceParentID,
                ApprovedSource,
                Created
            )
        VALUES
            (
                @newid,
                @Desc,
                1,
                @ShowOnReport,
                1,
                1,
                GetDate()
            )

    RETURN @newid
END 
```

这是重复数据的示例（少了几个不相关的列）：

```
SourceId    Description Created
676         some text   2012-10-17 09:42:36.553
677         some text   2012-10-17 09:43:01.380 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:14:13.293

我确信这与SP无关。正如 Oded 所提到的，这可能是您的代码的结果。我在存储过程中看不到任何能够生成重复项的内容。另外，我不会使用 MAX(SourceId) + 1。如果你一直想要一个新的源 ID，为什么不使用“自动增量”呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:06:52.657

使用存储过程时可以使用锁定。在我使用的那些我通常使用`WITH (ROWLOCK)`. 锁定用于确保数据完整性。我认为一个简单的谷歌应该提供很多关于为什么你应该使用锁定的信息。

但正如其他评论员所说，看看你的代码中是否也没有任何东西。有没有两次调用相同方法的东西？是否存在引用正在更新的方法的“事件”？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:12:56.540

正如评论中所说，我认为您的问题更多在于代码层；似乎没有任何数据违反任何限制。您可能希望在执行插入之前检查同一用户是否“最近”提交了相同的数据。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-17T14:06:54.547

描述可能是重复的，因为您通过单击两次按钮或其他方式调用了两次相同的函数。

您应该[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775.aspx)在 SourceID 列上使用 an 并使用该`Scope_Identity()`函数

如果您出于某种原因不想这样做，那么您应该将上述代码包装在隔离级别设置为的事务中`Serializable`

```
SET TRANSACTION ISOLATION LEVEL SERIALIZABLE
BEGIN TRAN
    SET @newid = ....

COMMIT 
```

# iphone - 解释 UITableView 的分组部分及其 titleForHeaderInSection 是如何工作的？

> ID：12936088
> 
> 赞同：0
> 
> 时间：2012-10-17T14:01:12.290
> 
> 标签：iphone, objective-c, ios, uitableview

所以我从来不知道 titleForHeaderInSection 和基本上分组的 UITableView 是如何工作的。我放弃了尝试创建一个并最终暂时使用普通列表。如果可以解释以下任何一点，我将不胜感激：

**理解它...**

1.  如果我想要一个分组的 UITableView，我知道我需要使用 numberOfSectionsInTableView 返回我想要的组（部分）。说，返回 3。

2.  然后我需要返回每个不同部分中的行数，对吗？我可以在 numberOfRowsInSection 中做到这一点。比如说，第一部分返回 2，第二部分返回 4，第三部分返回 6，对吗？

3.  如果我希望每个部分都有不同的标题，我需要使用 titleForHeaderInSection，但我觉得使用起来很棘手。但是，似乎我只需要获取节整数并使用 objectAtIndex 将标题设置为节的数组，对吗？

4.  在 cellForRowAtIndexPath 中，我是否需要对部分或如何显示单元格做任何事情？好像没有，但我不确定...

**问题**

我的数据的结构是这样的（它是一个 JSON 数组，每个数组条目中都包含字典）：

```
ArrayItemOne
    DictionaryKeyOne:DictionaryValueOne
    DictionaryKeyTwo:DictionaryValueTwo
ArrayItemTwo
    DictionaryKeyOne:DictionaryValueOne
    DictionaryKeyTwo:DictionaryValueTwo
ArrayItemThree
    DictionaryKeyOne:DictionaryValueOne
    DictionaryKeyTwo:DictionaryValueTwo 
```

我的部分标题实际上是上面所有3个ArrayItemFoo的DictionaryValueTwo，它是动态的，我不知道今天或明天会有多少，它来自JSON。然后我创建了一组独特的并计算它。那是我的 numberOfSectionsInTableView。

但是，只有当它们的 DictionaryValueTwo 与部分标题匹配时，我才能在每个不同部分中按此 DictionaryValueTwo 对我的行进行分组？现在我无法控制每个部分中的行，这很混乱，我很困惑。

想象一下：所有事件都有一个日期，我的部分是不重复的事件日期，但我的事件只需要显示在与其日期匹配的部分中。就是这样。我太愚蠢了，无法理解分组 UITableView 是如何工作的......

**我的代码**

我已经使用普通列表编写了 UITableView，它有一些用于分组列表的注释掉的东西，如果它有助于理解我的问题：http: [//github.com/caio1982/CorreCuritiba/blob/master/iOS/CorreCuritiba/CorreCuritiba/ CCMasterViewController.m](http://github.com/caio1982/CorreCuritiba/blob/master/iOS/CorreCuritiba/CorreCuritiba/CCMasterViewController.m)

再说一遍：一些示例解释的代码会很棒，但这不是强制性的，我真的很想了解分组的 UITableViews、概念、机制。

是的，我已经搜索了所有内容，但没有找到与我面临同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:50:51.793

这很有帮助。

[iPhone JSON 到 TableView](https://stackoverflow.com/questions/8628606/iphone-json-to-tableview)

诀窍是将每个数组项视为一个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:19:50.667

Gustavo Boiko 的补丁很好地解释了它应该如何工作。毕竟我的数据结构是错误的：[https ://github.com/caio1982/CorreCuritiba/pull/3](https://github.com/caio1982/CorreCuritiba/pull/3)

# java - Android LVL 签名验证失败

> ID：12936094
> 
> 赞同：21
> 
> 时间：2012-10-17T14:01:42.583
> 
> 标签：java, android, signature, verification, android-lvl

我正在尝试在我的应用程序中实现 APK 扩展下载器库，但我正在努力通过 LVL 验证检查。

每次运行应用程序时，我都会从 LicenseValidator 类中收到“签名验证失败”消息。应用程序在发布模式下使用适当的密钥库进行签名。

我已经检查了 10 多次，我在应用程序内部使用的 PUBLIC_KEY 与开发人员帐户上的相同，但它仍然无法正常工作。我还将应用程序连同扩展文件（正确命名）一起上传到了 Play 商店，甚至在开发者控制台上作为测试帐户添加到我的帐户中。我也尝试将发布者帐户添加到我的设备上，但它仍然无法正常工作。

我不知道下一步该做什么，我需要它来工作，并且在互联网上找不到任何关于如何解决这个问题的帮助。

谢谢

亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T16:44:23.093

你有几个版本的文件扩展？因为我遇到了同样的问题，因为 api 向我发送了一个旧文件的名称......作为验证码中的解决方法，我只是替换了版本号......这并不可怕，但这个 bug 不是来自我...... .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-16T14:13:50.290

固定的。通过“管理应用程序”，我停止了 Google Play 商店应用程序，清除了它的数据（不是缓存，它是零字节），然后重新启动了我的许可应用程序 - 许可现在可以工作了。

# scroll - 如何在 $(window).scroll() 中运行一次函数？

> ID：12936097
> 
> 赞同：3
> 
> 时间：2012-10-17T14:01:47.770
> 
> 标签：scroll, scrolltop

我正在尝试制作一个根据滚动启动不同动画的页面。

原理很简单，当我在一个带有关于动画类型的数据属性的块中时。我运行这个动画。

为此，我的脚本基于事件 $(window).scroll()。当我的 $(window).scrollTop() 等于我的块的位置时，我运行动画。当我离开这个块时，我会停止动画。我想一旦动画完成，就开始我的重置功能。目前，她开始循环，因为我不在具有数据属性的块中。

[演示](http://www.emmanueldurgoni.com/demo/)

我真的被困住了。先感谢您。马努

我的 js 文件：

```
$(document).ready(init);

// Ma class Screen
function Screen(name){
    this._name = $("#"+name);
    this._hauteur;
    this._position;
    this._screenEnd;
    this._screenEnd;

    this.screenHeight = function() { 
        this._hauteur = this._name.data('height');
        return this._hauteur;
    } 

    this.topPosition = function() { 
        this._position = this._name.position().top;
        return this._position;
    } 

    this.screenEnd = function() { 
        this._screenEnd = (this._name.position().top)+(this._name.data('height'));
        return this._screenEnd;
    }
}

var mesScreens = new Array();

 $(".screen").each(function(i){
    mesScreens[i] = new Screen($(this).attr('id'));
    mesScreens[i]._name.css("height", mesScreens[i].screenHeight());
    //console.log(mesScreens[i]);
 });

var fini = false;

function init(){
    console.log($(".screen").length);

    var scrollTimer = null;
    $(window).scroll(function () {
       var monScrollTop = $(window).scrollTop();

        for (var i=0; i<mesScreens.length ; i++) {
            if(monScrollTop>(mesScreens[i].topPosition()+5) && monScrollTop<=(mesScreens[i].screenEnd()+5)){
                //started = true;
                if(mesScreens[i]._name.data("func") == "panorama"){
                    horizontalPanel(mesScreens[i]._name, mesScreens[i]._hauteur, mesScreens[i]._position);

                }else if(mesScreens[i]._name.data("func") == "anim"){
                    anim(mesScreens[i]._name, mesScreens[i]._hauteur, mesScreens[i]._position, 4);

                }
                //console.log(mesScreens[3]._hauteur);
            }else {
                        //console.log("je sors");
                        reset(mesScreens[i]._name, mesScreens[i]._hauteur);
                    }

        };
    });

}

/*
 * Function horizontalPanel
 * @screen : le screen concerné
 * @hauteur : hauteur du div
 */
function horizontalPanel(myScreen, hauteur, position){

    //console.log("Fonction horizontalPanel debut || fini = "+fini);

    var $img = myScreen.children("img");
    var deltaScroll = ($(window).scrollTop() - position);
    var scrollPercentage = ((deltaScroll / (hauteur)) * 100) ;
    //console.log(scrollPercentage);

    $img.css('position', "fixed");
    $img.css("bottom", "");
    $img.css('top', "0px");
    $img.css('left', "0px");
    $img.css("left", -scrollPercentage+"%");

}

function anim(myScreen, hauteur, position, nbImg){
    //console.log("ok");

    var $img = myScreen.children("div.image");
    var deltaScroll = ($(window).scrollTop() - position);
    var scrollPercentage = ((deltaScroll / (hauteur)) * 100) ;

    var percentNb = ((nbImg/hauteur) * 100).toFixed(2);

    for(var i=0; i<nbImg; i++){
        //console.log("if(bla)");   
    }

    //console.log("__");

    if(scrollPercentage)
    //console.log(hauteur);

    $img.css('position', "fixed");
    $img.css("top", "0px");
    $img.css("bottom", "");
    $img.css('background-position', "0 "+ scrollPercentage + '%');
    $img.css('left', "0px");
}

function reset(myScreen){

    //console.log("Fonction Reset || fini = "+fini);
    myScreen.children().css('position', "relative");
    myScreen.children().css("bottom", "0px");
    myScreen.children().css("top", "");
    myScreen.children().css("left", "");
} 
```

来自 html 的摘录：

```
<div id="screen3" data-height='2300' data-func='panorama' class="screen">
    <img src="img/screen3.jpg" alt="screen-3">
</div>

<div id="screen4">
    <img src="img/screen4-2.jpg" alt="screen-4">
</div> 
```

# php - 来自函数的变量不显示在函数之外

> ID：12936098
> 
> 赞同：0
> 
> 时间：2012-10-17T14:01:49.513
> 
> 标签：php

我无法获取函数外部函数中的变量的值...

例子：

```
function myfunction() {
    $name = 'myname';
    echo $name;
} 
```

那我叫它...

```
if (something) {
    myfunction();
} 
```

这是 echoing `$name`，但如果我尝试`$name`在输入值内回显它不会显示：

```
<input type="text" name="name" value="<?php echo $name ?>" 
```

如何访问此变量值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:03:16.030

该`$name`变量是本地的，直到您将其明确定义为全局：

```
function myfunction() {
    global $name;
    $name = 'myname';
    echo $name;
} 
```

但这似乎不是对全局变量的良好使用。您的意思是返回值并分配它吗？（或者只使用一次？）

```
function myfunction() {
    $name = 'myname';
    return $name;
}

...
$name = myfunction(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:03:38.383

阅读 abour[变量作用域](http://php.net/manual/en/language.variables.scope.php) 变量具有局部作用域。你必须让它全球化。但更好的是，使用一些模板引擎或实现注册表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:04:12.503

它的范围问题..

[http://php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

就像你在一个封闭的房间里，我们看不到你在做什么，但如果你打开一扇门，或者放入摄像机，人们可以，或者可以看到有限的东西，或者听到有限的东西......这就是事情的方式也适用于计算机

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:04:21.020

您应该阅读有关[范围](http://php.net/manual/en/language.variables.scope.php)的 php 页面。

要执行您想要的操作，有两种解决方案：

1.  使`$name`全局，或
2.  `return`函数中的变量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:06:52.547

该`$name`变量在该函数中是局部的。所以它只能在该函数内部访问。如果您希望它在任何地方都可以访问，您可以执行以下操作：

*   在函数外部和函数类型内部声明它：`global $name;`
*   仍然在外面声明它，但通过引用将她作为函数参数传递：

    `function myFunc(&$name) { $name = "text"; }`

# asp.net-mvc - 如何在每次回发时将数据绑定到下拉列表？

> ID：12936099
> 
> 赞同：0
> 
> 时间：2012-10-17T14:01:54.640
> 
> 标签：asp.net-mvc

在 Asp.Net MVC 中，从 db 获取数据并绑定到下拉列表中。在页面回发时，下拉项变为空。每个回发都需要点击数据库并绑定下拉列表？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:12:49.910

Web 请求（无论其技术、MVC、Webforms 等）是无状态的。因此，每次发生新请求（如您所说的“完整回发”）时，您都会丢失前一个请求的状态。

所以，**是**的，您需要从数据库中重新加载数据并重新绑定 Dropdown，但是没有您的代码，很难告诉您如何以及何时执行此操作。但是，可以做很多事情来防止数据库命中。选择适合您的需求：

*   [AJAX 请求](http://api.jquery.com/jQuery.ajax/)仅刷新您需要的网页的某些部分；
*   [服务器上的内存缓存](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.108%29.aspx)（甚至使用[缓存服务](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)或输出缓存）；
*   [使用会话](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)（不推荐）；

# javascript - 悬停两秒后如何执行功能？

> ID：12936103
> 
> 赞同：5
> 
> 时间：2012-10-17T14:02:12.917
> 
> 标签：javascript, function, google-maps

这是我当前的代码

```
google.maps.event.addListener(marker, `mouseover`, function() { 
  alert('loaded when i hovered');
}); 
```

**但如果鼠标在元素上停留两秒钟**，我希望执行该函数。

我试过这个，但没有用。

```
 google.maps.event.addListener(marker, `mouseover  2000`, function() { 
   alert('loaded after then when i stay mouse 2 sec'); 
 }); 
```

在悬停两秒钟后，我需要做什么才能使函数执行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T14:06:30.937

您需要使用计时器。将其设置为鼠标悬停，然后在计时器回调中完成您的工作；您还需要处理停止计时器的 mouseout 事件。

```
var timeoutId = null;
google.maps.event.addListener(marker, 'mouseover',function() { 
   timeoutId = window.setTimeout(function(){
     alert("I did it!");
   }, 2000);
 } );

// Cancel your action if mouse moved out within 2 sec
google.maps.event.addListener(marker, 'mouseout',function() { 
  window.clearTimeout(timeoutId)
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T14:08:34.000

它会是这样的，使用[setTimeout](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CC0QFjAB&url=http://www.w3schools.com/jsref/met_win_settimeout.asp&ei=ort-UKWaMcquqAHAnoGoBg&usg=AFQjCNE8Eo9hrhgo2ztRqSGffI91oRAGGw&sig2=chFBr4gTX8Z9MwmyrEwALQ)

```
var timer;

google.maps.event.addListener(marker, 'mouseover', function() {        
   timer = window.setTimeout(function(){
     alert("Stackoverflow Rocks!!!");
   }, 2000);
 } );

google.maps.event.addListener(marker, 'mouseout', function() {        
   window.clearTimeout(timer);
 } ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:05:02.207

调用`setTimeout`mouseover 事件。将返回值存储在某个共享的地方（例如，在闭包中）。

调用`clearTimeout`mouseout 事件。如果该事件在两秒结束之前没有触发，那么您传递给的函数`setTimeout`将被调用。

# multithreading - truss 中的上下文系统调用

> ID：12936107
> 
> 赞同：0
> 
> 时间：2012-10-17T14:02:24.540
> 
> 标签：multithreading, solaris, truss

在 Solaris 10 中获取进程的 truss 时，我发现了以下语句

```
<pid>/2:    70.7602 context(1, 0xFC47ABF8) 
```

请解释这个系统调用的`context`含义在这个调用之后我看到线程 2 的行为就像另一个线程 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:48:15.887

```
<ucontext.h>
int getcontext(ucontext_t *ucp);
int setcontext(const ucontext_t *ucp);` 
```

这两个调用在 Solaris 中保存和恢复上下文。我不确定，因为在 McDougal 和 Mauro 的“Solaris Internals”中没有明确提到 context()。我假设`context()`是对应于这些 api 入口点的实际内核调用。也许`context(1, <addr> )`对应`getcontext()`，我不知道。

上下文切换是操作系统允许给定进程为给定时间片（时间片）使用系统资源的方式。调度的一部分。

# version-control - 个人存储库的 Mercurial 扩展

> ID：12936108
> 
> 赞同：0
> 
> 时间：2012-10-17T14:02:26.247
> 
> 标签：version-control, mercurial

我对我希望我的版本控制系统如何运行有这个想法，我想我会把这个想法扔掉，看看是否有人知道任何现有的方法来实现这一点。我喜欢 mercurial，所以这就是我针对这个问题的目标，但我很乐意听到其他可以实现这一点的软件。

好的，所以问题。作为一名研究人员，我想对许多不同的东西进行版本化。这可以是代码（小型脚本或大型应用程序）、手稿、数据、课程作业等。我不想将所有这些都存储在一个大型存储库中，因为

1.  我希望“hg log”只显示与当前项目相关的内容
2.  我可能想在其他地方发布代码并保留历史记录。
3.  就是感觉不对。。。

所以我目前正在实施的想法是在中央服务器上拥有一个包含不同存储库的目录层次结构。像这样的东西（只有标记为 hg repo 的东西是存储库，其他都是标准文件系统目录）：

```
-- ~/hgrepo/
       --  Projects/
                 --  Project 1 (hg repo)
                 --  Project 2 (hg repo)

       -- Code
                 --  MyCoolApplication
                                  -- MyAppSource (hg repo)
                                  -- SomeExternalPatchedLib (hg repo)

                 --  CodeProject 1 (hg repo) 
```

现在，这很好用，因为我可以破解某些东西，`hg clone ssh://my.university.server.com/hgrepo/Code/CodeSample1`然后编辑 .hg/hgrc 并更改服务器的默认路径。但这有点麻烦。

我想要的是有一个扩展，让我

*   列出存储库，例如`hg repo ls Code/`在 Code/ 下面显示级别
*   使用上面的简单路径克隆（跳过繁琐的 ssh:// 和服务器主机名等）
*   将本地存储库发布到远程存储库（即克隆它并更改默认路径，同时处理错误）

基本上，我认为它类似于私有的、自托管的 bitbucket/github。有人知道类似的系统吗？

我只能通过 SSH 访问文件服务器，因此无法在主机上运行任何服务器应用程序。但是我很高兴听到也需要一个系统的系统，因为如果软件足够好，我也许可以改变它:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T03:40:34.640

Bitbucket 免费提供私人回购。也许[子存储库](http://mercurial.selenic.com/wiki/Subrepository)是您想要的。

# c# - 静态和动态编辑静态控件

> ID：12936113
> 
> 赞同：0
> 
> 时间：2012-10-17T14:02:54.157
> 
> 标签：c#, asp.net-4.0

我在 ASP.NET 中有一个静态控件——`<ul>`母版页上的一个常规控件。在某些内容页面上，我`<ul>`通过仅在内容占位符中静态插入来`<li>`静态添加，但在其他内容页面中，我想在服务器端动态添加，例如`<li>`目录中的每个文件。我怎样才能实现这两个目标？当我添加`runat="server"`它时，它似乎仍然没有我可以修改的服务器端表示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:51:40.763

我只是直接在模板中编写了一个循环，而不是一些 C# 代码隐藏。

# php - 在特定指数后停止爆炸

> ID：12936120
> 
> 赞同：3
> 
> 时间：2012-10-17T14:03:06.827
> 
> 标签：php, arrays, explode

如何在某个索引后停止爆炸功能。例如

```
 <?php
        $test="The novel Prognosis Negative by Art Vandelay expresses protest against many different things. The story covers a great deal of time and takes the reader through many different places and events, as the author uses several different techniques to really make the reader think. By using a certain type of narrative structure, Vandelay is able to grab the reader’s attention and make the piece much more effective and meaningful, showing how everything happened";

    $result=explode(" ",$test);
    print_r($result);
?> 
```

如果只想使用前 10 个元素怎么办 ($result[10]) 填充 10 个元素后如何停止分解功能。

一种方法是首先将字符串修剪到前 10 个空格（“”）

还有其他方法吗，我不想在任何地方限制后存储剩余的元素（如使用正限制参数所做的那样）？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T14:04:09.697

函数的第三个参数是什么？

> 数组爆炸（字符串 $delimiter ，字符串 $string [, int $limit ] ）

检查`$limit`参数。

手册： http: [//php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

手册中的一个例子：

```
<?php
$str = 'one|two|three|four';

// positive limit
print_r(explode('|', $str, 2));

// negative limit (since PHP 5.1)
print_r(explode('|', $str, -1));
?> 
```

上面的示例将输出：

> 数组 ( [0] => 一 [1] => 二|三|四 ) 数组 ( [0] => 一 [1] => 二 [2] => 三)

在你的情况下：

```
print_r(explode(" " , $test , 10)); 
```

根据 php 手册，当您使用`limit`参数时：

> 如果 limit 设置为正，则返回的数组将包含最大限制元素，最后一个元素包含字符串的其余部分。

因此，您需要去掉数组中的最后一个元素。您可以使用`array_pop`( [http://php.net/manual/en/function.array-pop.php](http://php.net/manual/en/function.array-pop.php) ) 轻松完成。

```
$result = explode(" " , $test , 10);
array_pop($result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T14:04:35.180

您可以[阅读以下文档`explode`](http://us.php.net/manual/en/function.explode.php)：

```
$result = explode(" ", $test, 10); 
```

# mysql - 如何进行查询以返回按天分组的行数？

> ID：12936129
> 
> 赞同：2
> 
> 时间：2012-10-17T14:03:38.847
> 
> 标签：mysql

我正在使用这个表达式：

```
SELECT DATE(calldate) as Data,COUNT(clid) as Registros,dst as Tronco
FROM cdr WHERE dst=55008133070000 
AND calldate BETWEEN '2012-10-01' AND '2012-10-15'
GROUP BY DATE(calldate), clid HAVING COUNT(clid) > 1 ORDER BY Data DESC

Date---------Total------ Trunk
2012-10-11  3   55008133070000
2012-10-11  2   55008133070000
2012-10-11  3   55008133070000
2012-10-10  2   55008133070000
2012-10-10  2   55008133070000
2012-10-10  2   55008133070000
2012-10-09  3   55008133070000
2012-10-09  2   55008133070000
2012-10-09  2   55008133070000
2012-10-09  3   55008133070000
2012-10-09  5   55008133070000
2012-10-09  5   55008133070000 
```

但是，需要显示当天重复的次数。

```
Date---------Total------ Trunk
2012-10-11  3   55008133070000
2012-10-10  3   55008133070000
2012-10-09  6   55008133070000 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:06:47.557

在您的查询中，您正在使用`GROUP BY DATE(calldate), clid`which 将在每一天为您`COUNT()`提供每个`clid`。

`clid`从子句中删除`GROUP BY`以获取每个日期的计数。

您的最终查询类似于：

```
SELECT
    DATE(calldate) as Data, COUNT(*) as Registros, dst as Tronco
FROM
    cdr
WHERE
    dst=55008133070000 
    AND calldate BETWEEN '2012-10-01' AND '2012-10-15'
GROUP BY
    DATE(calldate)
HAVING
    COUNT(clid) > 1
ORDER BY
    Data DESC 
```

但是，在此查询中，拉动`dst`可能没有意义，可以被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:07:03.557

**编辑**由于OP评论：

您应该按`dst`而不是按分组`clid`，还要计算不同的目的地编号，请参阅 GROUP BY 子句和 COUNT：

```
SELECT DATE(calldate) as Data,COUNT( distinct clid) as Registros, dst as Tronco
FROM cdr 
WHERE dst=55008133070000 
      AND calldate BETWEEN '2012-10-01' AND '2012-10-15'
GROUP BY DATE(calldate),  dst 
HAVING COUNT(distinct clid) > 1 ORDER BY Data DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:08:58.533

使用 Calldate 代替 Id。

```
SELECT DATE(calldate) as Data,COUNT(calldate) as Registros,dst as Tronco
FROM cdr WHERE dst=55008133070000 
AND calldate BETWEEN '2012-10-01' AND '2012-10-15'
GROUP BY DATE(calldate), dst HAVING COUNT(calldate) > 1 ORDER BY Data DESC 
```

# xsd - 从元素扩展复杂类型

> ID：12936132
> 
> 赞同：1
> 
> 时间：2012-10-17T14:03:47.760
> 
> 标签：xsd, complextype

假设我已经定义了一个通用的复杂类型

```
<xs:complexType name="Address">
<!--definition of address-->
</complexType> 
```

现在假设我想定义一种只使用一次的新地址类型，并且我想在一个新元素中扩展复杂类型地址

例如

```
<element type="Address">
    <!--how to extend the base type address here-->
</element> 
```

我不想定义一个新的复杂类型来扩展类型地址，因为它只会被使用一次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:07:17.113

你可能想要一个匿名的复杂类型；匿名，它不能被引用，所以你只能有效地使用它“一次”。

```
<xsd:complexType name="Address">
    <!-- definition of address --> 
</xsd:complexType>  
<xsd:element name="AnotherAddress">
    <xsd:complexType>
        <xsd:complexContent>
            <xsd:extension base="Address">
                <!-- Extra content for address -->                  
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
</xsd:element> 
```

# php - 获取每天的总观看次数，包括在没有记录的一天留下“0 次观看”

> ID：12936133
> 
> 赞同：2
> 
> 时间：2012-10-17T14:03:48.883
> 
> 标签：php, mysql, date

我正在创建一个图表，我可以在其中获得某个范围内每天的总视图，或者只要它可以返回。

我遇到的问题是填写`0`某一天没有查看的默认数量，有些日子可能一天中绝对没有查看，所以我需要 MySQL 返回一个默认的`0`没有找到的时间 - 我有不知道该怎么做。

这是我用来获取一天总浏览量的查询：

```
SELECT DATE(FROM_UNIXTIME(v.date)) AS date_views,
       COUNT(v.view_id) AS total_views
FROM 
(
    views v
)
GROUP BY date_views
ORDER BY v.date DESC 
```

我的结果返回这个：

```
+------------+-------------+
| date_views | total_views |
+------------+-------------+
| 2012-10-17 |           2 |
| 2012-10-15 |           5 |
| 2012-10-14 |           1 |
| 2012-10-10 |           7 |
+------------+-------------+ 
```

但是，我想`0`为它返回缺少的日子，因为`2012-10-16`, `2012-10-11`, `2012-10-12`,`2012-10-13`不包括在内。

因此，例如：

```
+------------+-------------+
| date_views | total_views |
+------------+-------------+
| 2012-10-17 |           2 |
| 2012-10-16 |           0 |
| 2012-10-15 |           5 |
| 2012-10-14 |           1 |
| 2012-10-13 |           0 |
| 2012-10-12 |           0 |
| 2012-10-11 |           0 |
| 2012-10-10 |           7 |
+------------+-------------+ 
```

将被退回。

这将如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:10:36.193

几年前我这样做时，我创建了一个空数组，其中日期为键，默认值为 0。然后我简单地遍历结果 att 更改了我拥有的那些日期的值。

```
for each($result as $row){
   $date_stats_array[$row['date']] = $row['value'];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:05:47.387

在这种情况下，我创建了一个临时表，其中填写了您想要的所有日期。之后，您可以使用该表来加入您的原始查询。

要填写表格，您可以使用以下过程：

```
DROP PROCEDURE IF EXISTS filldates;
DELIMITER |
CREATE PROCEDURE filldates(dateStart DATE, dateEnd DATE)
BEGIN
  WHILE dateStart <= dateEnd DO
    INSERT INTO tablename (_date) VALUES (dateStart);
    SET dateStart = date_add(dateStart, INTERVAL 1 DAY);
  END WHILE;
END;
|
DELIMITER ;
CALL filldates('2011-01-01','2011-12-31'); 
```

由[https://stackoverflow.com/a/10132142/375087提供](https://stackoverflow.com/a/10132142/375087)

# android - Facebook 状态请求有时返回空

> ID：12936135
> 
> 赞同：1
> 
> 时间：2012-10-17T14:03:51.083
> 
> 标签：android, facebook-graph-api

我使用以下方法从多个用户获取状态更新。

```
public void getUserFeed(long userID, RequestListener listener) {
    long time = System.currentTimeMillis();

    Bundle params = new Bundle();
    params.putString("uid", userID + "");
    params.putString("fields", "statuses");
    asyncFacebookRunner.request(FRIENDS, params, listener);
}

public void getFeedsForUsers(List<User> facebookUsersInFeed,
        final RequestListener listener) {
    for (final User user : facebookUsersInFeed) {
        getUserFeed(user.getId(), listener);
    }
} 
```

大多数情况下，这工作正常。但时不时地，我得到一个数据数组完全为空的响应。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:51:28.630

最可能的原因是该特定用户已阻止 3rd 方应用程序访问他们的数据，因此，当您尝试获取他们的信息时，它将返回空。

# openwrt - 使用 openWRT opkg 授权

> ID：12936143
> 
> 赞同：0
> 
> 时间：2012-10-17T14:04:33.027
> 
> 标签：openwrt, buildroot

我们计划使用openWRT“态度调整”进行开发。我们有一些软件需要商业许可；是否可以使用 opkg 对其进行商业许可？是否有任何文件告诉我 opkg 关于商业代码的许可政策？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T16:58:17.833

是的，您可以使用 Attitude Adjustment buildroot 并将其与具有与 GPL 不同许可证的 OpenWRT 软件包结合使用。重要的部分是你必须为你正在使用的所有 GPL 东西发布一个 GPL tarball，并且你总是修改过。如果专有部分是完全独立于先前来源的包，则可以以二进制形式发布。

我举个例子。Ubiquiti 为其基于 OpenWRT 的设备发布了固件。Ubiquiti 发布了一个 GPL 压缩包，其中包含所有 GPL 和从 OpenWRT 继承的源代码。ubiquiti 从头开始​​开发的二进制软件不作为源代码发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:08:57.430

[这是 GPL](http://code.google.com/p/opkg/source/browse/trunk/COPYING)

所以我想这对你来说是个坏消息。

您可以随时联系作者，看看他们是否想更改他们的许可证。

# c# - C# Windows Service Timer 应用程序配置更改在运行时

> ID：12936145
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:04:34.447
> 
> 标签：c#, timer, windows-services, app-config

我正在用 c# 制作一些 Windows 服务，我需要从配置文件中读取一些变量，比如文件和路径。我还有一个控制（它应该）定时器间隔的变量。问题是，每次更改配置文件中的数据时，都不会获取该数据，例如，如果我更改文件名，我会收到一条错误消息，指出该文件不存在（并且我检查了名称和路径) 或者如果我改变时间间隔没有任何反应。有人能帮助我吗？

```
System.Timers.Timer timer;
    CallWebServices call;
    int time;

    public Planview_SEB_Pervasive()
    {
        InitializeComponent();
    }

    protected override void OnStart(string[] args)
    {
        call = new CallWebServices();
        startPervasive();
    }

    protected override void OnStop()
    {
        timer.Enabled = false;
        call.InsertLog("PV/S&B Win Service", "Serviço parado", "");
    }

    private void startPervasive()
    {
        try
        {
            try
            {
                //Vai buscar o tempo ao app.config
                time = Convert.ToInt32(ConfigurationManager.AppSettings.Get("TimeElapsedInMinutes"));
            }
            catch (Exception ex)
            {
                //Em caso de falha ficam 5 minutos
                call.InsertLog("PV/S&B Win Service StartPervasive (time)", ex.Message, "");
                time = 5;
            }
            this.timer = new System.Timers.Timer();
            timer.Enabled = true;
            timer.AutoReset = true; //Necesário para que o srviço se repita
            timer.Interval = 1000 * 60 * time; //Cálculo para minutos
            timer.Elapsed += new ElapsedEventHandler(Elapsed);
        }
        catch (Exception ex)
        {
            call.InsertLog("PV/S&B Win Service StartPervasive", ex.Message, "");
            OnStop();
        }
    }

    protected void Elapsed(Object sender, ElapsedEventArgs e)
    {
        try
        {
            timer.Interval = Convert.ToInt32(ConfigurationManager.AppSettings.Get("TimeElapsedInMinutes"));
            StartProcess();
        }
        catch (Exception ex)
        {
            call.InsertLog("PV/S&B Win Service Elapsed", ex.Message, "");
        }
    }

    private static void StartProcess()
    {
        try
        {
            string directory = ConfigurationManager.AppSettings.Get("WorkingDirectory");
            string file = ConfigurationManager.AppSettings.Get("FileToRun");

            //Execução dos processo (ficheiro)
            Process process = new Process();

            process.StartInfo.WorkingDirectory = directory;
            process.StartInfo.FileName = directory + @"\" + file;
            process.StartInfo.Arguments = "";
            process.StartInfo.UseShellExecute = false;
            process.StartInfo.WindowStyle = ProcessWindowStyle.Normal;

            process.StartInfo.CreateNoWindow = false;

            process.StartInfo.RedirectStandardOutput = false;

            process.Start();
        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:06:55.170

您可以实现一个`FileSystemWatcher`监控 app.config 存储目录的目录。当它更新时，您将在应用程序中收到一个事件，通知您某些内容已更改。发生这种情况时，您可以重新加载 app.config 并刷新您的值。

链接：[FileSystemWatcher 类](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

# apache - SVN 结帐失败，“块分隔符无效”

> ID：12936148
> 
> 赞同：2
> 
> 时间：2012-10-17T14:04:40.693
> 
> 标签：apache, svn, openssl, visualsvn

# 错误：

签出大型项目时，我们在项目中的随机文件上收到错误：

> *   无法读取响应正文：SSL 错误：解密失败或错误记录 mac

响应是禁用 SSL 并重新启动 SVNServer。

重新测试并得到这个错误：

> *   块分隔符无效

于是检查了 SVNserver 日志：

> *   写入 base64 数据时出错：APR 不理解此错误代码 [500, #620018]
>     
>     
> *   提供者在流式传输 REPORT 响应时遇到错误。[500, #0]
>     
>     
> *   驱动更新报告编辑器时发生故障 [500, #620018]

我们可以在 100% 的时间内重新创建上述内容。

* * *

# 试过：

从这里我们尝试：

将 OpenSSL 升级到最新版本。导致上述相同的错误。

将 REPO 复制到新的 REPO 以确保没有文件损坏。导致上述相同的错误。

在本地安装了 SVNserver 并测试了我们的等式网络。导致上述相同的错误。

我们认为这可能与我们正在使用的 OpenSSL 版本以及与 VisualSVN 一起安装的其他一些组件隔离。

任何人都知道这个问题以及如何解决它？

* * *

# 组件/设置：

*   视窗 2008 服务器 R2
*   阿帕奇颠覆 1.7.6
*   Apache HTTP 服务器 2.2.22
*   OpenSSL 0.9.8x
*   霓虹灯 0.29.6
*   农奴 1.0.0
*   SQLite 3070603
*   ZLib 1.2.3
*   视觉SVN 2.5.6
*   启用 SSL
*   Windows 7 x64 pro 客户端节点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:34:59.540

你有没有安装Nod32？如果是，那么禁用协议过滤会有所帮助。最好的解决方案是为 SVN 添加例外。

Nod32 -> 高级设置 -> Web 和电子邮件 -> 协议过滤 -> 排除的应用程序 -> 检查你的客户端，我的是 TortoiseProc.exe

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:06:44.653

真正的错误是`Too many open files [500, #24]`。我假设您使用的是基于 *nix 的 Subversion 服务器。`ulimit`在这种情况下，使用以下命令增加打开文件描述符的数量：

> ulimit -n 99999

另请参阅：[https ://serverfault.com/questions/48717/practical-maximum-open-file-descriptors-ulimit-n-for-a-high-volume-system](https://serverfault.com/questions/48717/practical-maximum-open-file-descriptors-ulimit-n-for-a-high-volume-system)

# ios - 如何在 UIScrollView 中旋转图像？

> ID：12936149
> 
> 赞同：1
> 
> 时间：2012-10-17T14:04:44.967
> 
> 标签：ios

我在我的项目中使用滚动视图进行缩放。滚动视图中有一个视图。我可以使用滚动视图的委托进行缩放。我可以使用 scrollview delagete 旋转我的视图，还是应该使用 UIPinchGestureRecognizer？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:43:05.973

`UIScrollView`已经有一个用于缩放的 UIPinchGestureRecognizer 和用于平移的 UIPanGestureRecognizer（并且具有访问这些属性）。我不需要使用`UIScrollViewDelegate`标称缩放或平移。您只需要设置最小和最大缩放以及平移内容大小。例如，

```
self.scrollView.minimumZoomScale = 0.5;
self.scrollView.maximumZoomScale = 5.0;
self.scrollView.contentSize = CGSizeMake(2000.0 , 2000.0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:39:23.163

好吧，有很多教程解释了滚动视图中的平移和缩放这是来自[苹果的一个](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/ZoomZoom/ZoomZoom.html)

# web-services - 是否可以通过 New-WebServiceProxy 向 Web 服务发送额外的 HTTP 标头

> ID：12936150
> 
> 赞同：73
> 
> 时间：2012-10-17T14:04:48.523
> 
> 标签：web-services, powershell

我需要与之交互的 Web 服务（通常是手动测试）在某些请求上需要额外的 HTTP 标头。快速手动测试非常适合 PowerShell，`New-WebServiceProxy`但到目前为止，我还没有找到向请求添加另一个 HTTP 标头的选项。

有什么办法吗？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2013-01-23T11:09:00.117

```
Invoke-WebRequest http://yourURLhere -Headers @{"accept"="application/json"} 
```

[在POSH 3.0](http://technet.microsoft.com/en-us/library/hh849901.aspx)中引入

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-17T17:52:24.973

您可以从 PowerShell 使用 .NET 的 Web 客户端。

```
> $webClient = New-Object System.Net.WebClient
> $webClient.Headers.add('accept','application/json')
> $webClient.DownloadString('http://yourURLhere') 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-12-07T01:05:12.857

我很惊讶这没有出现：

```
$uri = 'http://...'

$headers = New-Object "System.Collections.Generic.Dictionary[[String],[String]]"
$headers.Add('Accept','Application/Json')
$headers.Add('X-My-Header','...')

$result = Invoke-WebRequest -Uri $uri -Headers $headers 
```

为了完整起见，对 headers 属性的引用：

[https://msdn.microsoft.com/en-us/library/s4ys34ea(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/s4ys34ea(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-25T13:47:08.527

一种更简单的方法来发送授权并在循环中执行获取或删除请求

```
$orders=@("522536","522539")

foreach ($order in $orders){
    iwr "https://api.taxjar.com/v2/transactions/orders/$order" `
      -Method 'DELETE'`
      -Headers @{ 'Authorization' ='Token token="34625gdsgd74rghdg4"'}
} 
```

# javascript - 什么是最佳实践：ajax 内容 - jsRender - 使其对 SEO 友好

> ID：12936156
> 
> 赞同：0
> 
> 时间：2012-10-17T14:05:09.243
> 
> 标签：javascript, ajax, caching, jsrender

我正在制作一个在主页上显示不同列表的应用程序......

为了获得更好的性能，我使用 php 预缓存 json 并将其放入文件中，然后使用 ajax 调用我使用来自 Boris Moore 的带有 jsRender 的模板来解析项目。工作速度非常快，而且非常完美。

但是如何为搜索引擎提供相同的内容呢？问题不在于转义片段......问题是保持简单，没有开销......

理想情况下，会有一个 jsRender php 端口将模板解析为 html，这样我就可以缓存它并将其即时提供给 SE。

但我找不到任何东西，特别是因为 jsRender 仍在开发中，并且正在发生变化。

那么有没有办法获取 js 生成的内容呢？

我知道我可以在浏览器中打开一个页面让 jsRender 完成这项工作，然后使用 ajax 保存 $('#list').html() 内容....但是我有数百个不同的页面需要缓存几次一天，所以这个选项是不可行的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:16:37.327

一些东西：

*   向 SE 提供 SE 特定内容是一种被 SE 禁止的好方法（如果我们谈论的是 Google），请参阅他们的条款
*   如果您希望 google 索引动态呈现的内容的内容，那么您可能会遇到挑战，但根据网络，Google 确实索引 AJAX 阅读更多[http://searchengineland.com/its-official-googles-proposal-for -crawling-ajax-urls-is-live-37298](http://searchengineland.com/its-official-googles-proposal-for-crawling-ajax-urls-is-live-37298)
*   如果您希望谷歌根据动态内容显示的信息进行抓取，那么您需要一个 sitemap.xml，它可以在与缓存 json 相同的运行中生成。sitemap.xml 是“提示”谷歌的唯一有效方式（而不是欺骗它）

更新以反映评论：如果 JsRender 是您想要保留的核心价值，那么您可能只使用 NodeJS 来执行这些 jsRender 文件，然后将输出包含在 PHP 文件中，或者以任何您想要为它们提供服务的方式。我查了一下，有人知道如何将 NodeJS 与 jsRender 一起使用：[https ://github.com/shtylman/node-jsrender](https://github.com/shtylman/node-jsrender)

高温高压

# python - 为什么我得到 AttributeError: __getitem__

> ID：12936158
> 
> 赞同：1
> 
> 时间：2012-10-17T14:05:11.627
> 
> 标签：python, string, list

我正在尝试将字符串转换为字符列表。之后，我将该列表与另一个字符串进行比较，并且我想删除常见元素。但是我收到 AttributeError: **getitem**

请看一看。

这是我的代码：

```
 def getAvailableLetters(lettersGuessed):

        result = []
        for word in string.ascii_lowercase:
            result.append[word]

        for guessedItem in lettersGuessed:
            result.remove(guessedItem)
        return result

   print getAvailableLetters(['e', 'i', 'k', 'p', 'r', 's']) 
```

这是错误：

```
Traceback (innermost last):
  File "D:\devs\source\PythonTest\test1.py", line 118, in ?
  File "D:\devs\source\PythonTest\test1.py", line 112, in getAvailableLetters
AttributeError: __getitem__ 
```

任何帮助表示赞赏。

顺便说一句，第 112 行是

```
result.append[word] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:07:33.483

```
result.append[word] 
```

这是你的问题。您使用方括号而不是括号。`word`解释器认为您正在尝试使用对象中的键访问值`append`。

# jms - 基于活动或非活动消费者的apache骆驼路由

> ID：12936160
> 
> 赞同：1
> 
> 时间：2012-10-17T14:05:13.653
> 
> 标签：jms, apache-camel

我不确定哪种是实现这种情况的最佳模式：

我有一个组件将消息从队列 A 路由到我的应用程序队列 B。

现在我希望路由组件能够检测我的应用程序是否处于活动状态，在第二种情况下，将消息从 A 传递到另一个队列 C。

我认为有几种实现可以达到这个目标，可能使用主题订阅或动态路由..

有人解决了这个问题吗？如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:05:01.340

请参阅[骆驼负载平衡器](http://camel.apache.org/load-balancer.html)故障转移支持...

```
from("direct:start")
// here we will load balance if IOException was thrown
// any other kind of exception will result in the Exchange as failed
// to failover over any kind of exception we can just omit the exception
// in the failOver DSL
.loadBalance().failover(IOException.class)
    .to("direct:x", "direct:y", "direct:z"); 
```

# php - Phalcon 中的部分模板位置

> ID：12936164
> 
> 赞同：3
> 
> 时间：2012-10-17T14:05:35.023
> 
> 标签：php, phalcon

[部分模板](http://docs.phalconphp.com/en/latest/reference/views.html#using-partials)文件应该放在 Phalcon 的什么位置？有什么配置吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T20:03:57.493

*偏音*

它们必须在`view`文件夹下。下面是一个示例结构：

```
views/
    about/      <- AboutController
    index/      <- IndexController
    contact/    <- ContactController
    layouts/    <- Templates to override or add to the current template process
    partials/   <- (name can be anything) where you store your partials 
```

如果您希望您的部分位于特定的子文件夹中，那么您需要在部分参数中定义它

```
$this->partial('partials/header'); 
```

以上将在文件夹中以您注册的视图引擎`views/partials`的名称`header.phtml`或任何名称查找文件。`header.volt`（phtml 是默认值）。

**注意**您不限于使用文件夹来添加您的部分。他们可以很高兴地自己在`views`文件夹中。您可以按照`views`您认为合适的方式组织文件夹。

下的`layouts`文件夹`views`包含可以在应用程序流程中的任何地方使用但不是部分的模板。将它们视为当前模板流程的插件。

一个名为`main`模板的布局将在控制器层中被调用，如下所示：

```
$this->view->setTemplateAfter('main'); 
```

如果你导航到`/about/index`，Phalcon 会选择`views\index.volt`文件，然后是`layouts\main.volt`，最后是`views\about\index.volt`

**注意**我再次使用上面的 volt 示例 - 它很容易是 phtml 或您使用的任何其他 View 引擎（phtml 是默认值）。

高温高压

# firebird - Firebird 中的 if 语句错误

> ID：12936165
> 
> 赞同：1
> 
> 时间：2012-10-17T14:05:35.857
> 
> 标签：firebird, firebird2.5

我的表具有这种结构`T_user(usern,pass,realname: varchar(50);` 我是 Firebird 的初学者，我想执行以下语句，但出现此错误：

```
if (select Count(*) as cnt FROM T_USER WHERE ( usern = 'test') And (pass
= ']')) > 0  then  select T_user.realname from t_user where t_user.usern = 'test'; 
```

这是错误消息：

> 错误：IBPP::SQLException 上下文：Statement::Prepare( if (select Count(*) as cnt FROM T_USER WHERE (usern = 'test') And (pass = ']')) > 0 then select T_user.realname from t_user其中 t_user.usern = 'test' ) 消息：isc_dsql_prepare 失败
> 
> SQL 消息：-104 无效令牌
> 
> 引擎代码：335544569 引擎消息：动态 SQL 错误 SQL 错误代码 = -104 令牌未知 - 第 1 行，第 1 列如果

我正在使用 Firebird 2.5 和 FlameRobin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:30:59.297

试试这个代码：

```
EXECUTE BLOCK
  RETURNS (name VARCHAR(50))
AS
  DECLARE VARIABLE C INTEGER;
BEGIN
  select Count(*) 
  FROM T_USER 
  WHERE  usern = 'test' And pass = ']'
  INTO :C;

  IF (:C > 0) THEN
    select T_user.realname 
    from t_user 
    where t_user.usern = 'test'
    into :name;
  ELSE
    name = NULL;

  SUSPEND;
END 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T15:04:45.143

```
IF ((SELECT COUNT(*) AS CNT
    FROM T_USER
    WHERE (USERN = 'test')
          AND (PASS = ']')) > 0) THEN
  SELECT T_USER.REALNAME
  FROM T_USER
  WHERE T_USER.USERN = 'test'; 
```

# user-interface - 适用于不同 BlackBerry 设备的 BlackBerry App - 设计建议

> ID：12936167
> 
> 赞同：1
> 
> 时间：2012-10-17T14:05:47.257
> 
> 标签：user-interface, blackberry, blackberry-eclipse-plugin, blackberry-jde

我正在编写一个应用程序，并愿意为具有不同属性/功能和分辨率的不同 BlackBerry 设备打包它。

**我的问题是如何创建一个`DeviceConfigurationManager`可以为我提供设备特定属性/填充/边距/分辨率等的？**

我在这里阅读了关于使用`Ui.UNITS_pt`字体、为不同分辨率设备提供多个图像以及其他帮助我设计`DeviceConfigurationManager`.
例如，在我的按钮中，我使用了边距，因此对于各种设备，我保留一个设备作为参考，并在宽度（`Display.getWidth()>320`）检查时为其他设备相对返回边距。但是我已经看到，对于其他设备，我仍然没有得到完全的完美（为基本设备设置中心的按钮也不能完全以其他设备为中心）。

请提出一些其他或更好的方法来设计我的`DeviceConfigurationManager`课程。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:08:14.080

不能提供太多帮助——但有足够的同情心。如果您正在为 BlackBerry Java OS 进行开发，您将不​​得不习惯使用大量样板来处理不同的设备。我怀疑你和我一样；有一个在启动时运行的类，读取屏幕大小，然后为字体大小、填充等设置各种静态参数。

# php - 从下拉列表中选择项目时自动填充表单字段的 PHP\HTML 脚本

> ID：12936170
> 
> 赞同：0
> 
> 时间：2012-10-17T14:05:53.703
> 
> 标签：php, html, postgresql, auto-populate

> 我创建了一个 HTML 表单，其中包含一个来自 postgresql 数据库的项目的下拉列表，我希望表单中的一些字段在从下拉菜单中选择项目时自动从数据库中填充。我在表单上还有一些其他字段需要用户填写，然后再按下提交按钮将整个数据推送回数据库。
> 
> 目前我的脚本无法连接到数据库或填充表单上的下拉列表，也无法自动填充其他指定的表单字段（下拉列表中项目的属性也存储在数据库中）我还遇到的第二个问题是，在输入字段中输入数据并单击提交后。它在数据库中创建一条新记录，而不是在数据库中填充所需的列。有人可以看看我的脚本并帮助我。
> 
> 这是使用下拉菜单创建数据输入表单的脚本

```
 <?php
//Php Code to connect to postgresqldatabase
$PGHOST = "localhost:25376";
$PGDATABASE = "Pipeline";
$PGUSER = "postgres";
$PGPASSWORD = "Casa2009";
$PGPORT = 5432;
$db_handle = pg_connect("dbname=$PGDATABASE user=$PGUSER password=$PGPASSWORD");

//<!-- #2 -->
 if(isset($_POST['submit_1'])){
 //Code to post fieldtally data to the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $heatno1 = pg_escape_string( $_POST['heatno1']);
 $pipeno2 = pg_escape_string( $_POST['pipeno2']);
 $heatno2 = pg_escape_string($_POST['heatno2']);
 $Djointno = pg_escape_string($_POST['Djointno']);
 $measuredlength = pg_escape_string($_POST['measuredlength']);
 $serialno = pg_escape_string($_POST['serialno']);
 $wthick= pg_escape_string($_POST['wthick']);
 $remarks= pg_escape_string($_POST['remarks']); 
 //<!-- #3 -->
$query = "Update fieldtally set  wthick = $wthick, pipeno=$pipeno,heatno1=$heatno1,pipeno2=$pipeno2,heatno2=$heatno2,Djointno=$Djointno,measuredlength=$measuredlength,serialno=$serialno,remarks=$remarks where pipeno = $pipeno;
          INSERT INTO fieldtally(wthick, pipeno,heatno1,pipeno2,heatno2,Djointno,measuredlength,serialno,remarks), 
                Select $wthick, $pipeno,$heatno1,$pipeno2,$heatno2,$Djointno,$measuredlength,$serialno,$remark,
                WHERE NOT EXISTS (select pipeno from fieldtally where pipeno = $pipeno)";

//<!-- #4a -->
 $result = pg_query($query);
 if (!$result) {
 $errormessage = pg_last_error();
 $message = "Error with query: " . $errormessage;
 }
 $message = sprintf ("These values were inserted into the pipeline database - %s %s %s %s %s %s %s %s %s",$wthick,$pipeno,$heatno1,$pipeno2,$heatno2,$Djointno,$measuredlength,$serialno,$remarks);
 }
 //<!-- #2 -->
 if(isset($_POST['submit_2'])){
 //Code to post fieldbend data under suto the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $wthick1= pg_escape_string($_POST['wthick1']);
 $heatno1 = pg_escape_string( $_POST['heatno1']);
 $pipeno2 = pg_escape_string( $_POST['pipeno2']);
 $heatno2 = pg_escape_string($_POST['heatno2']);
 $Djointno = pg_escape_string($_POST['Djointno']);
 $measureddistance = pg_escape_string($_POST['measureddistance']);
 $benddegree = pg_escape_string($_POST['benddegree']);
 $bendtype= pg_escape_string($_POST['bendtype']); 
 $remarks= pg_escape_string($_POST['remarks']);
 //<!-- #3 -->
$query1 = "INSERT INTO fieldbend(pipeno,wthick1,heatno1,pipeno2,heatno2,Djointno,measureddistance,benddegree,bendtype,remarks)VALUES ('$pipeno','$wthick1','$heatno1','$pipeno2','$heatno2','$Djointno','$measureddistance','$benddegree','$bendtype','$remarks') ON DUPLICATE KEY UPDATE wthick1='$wthick1',heatno1='$heatno1',pipeno2='$pipeno2',heatno2='$heatno2',Djointno='$Djointno''";

//<!-- #4a -->
 $result1 = pg_query($query1);
 if (!$result1) {
 $errormessage = pg_last_error();
 $message1 = "Error with query: " . $errormessage;
 }
 $message1 = sprintf ("These values were inserted into the pipeline database - %s %s %s %s %s %s %s %s %s %s",$pipeno,$wthick1,$heatno1,$pipeno2,$heatno2,$Djointno,$measureddistance,$benddegree, $bendtype,$remarks);
 }
 //<!-- #2 -->
 if(isset($_POST['submit_3'])){
 //Code to post apptally data under suto the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $wthick2= pg_escape_string($_POST['wthick2']);
 $tallytype = pg_escape_string( $_POST['tallytype']);
 $qty = pg_escape_string( $_POST['qty']);
 $serialno = pg_escape_string($_POST['serialno']);
 $referenceid = pg_escape_string($_POST['referenceid']);
 //<!-- #3 -->
$query2 = "INSERT INTO apptally(pipeno,wthick2,tallytype,qty,serialno,referenceid)VALUES ('$pipeno','$wthick2','$tallytype','$qty','$serialno','$referenceid') ON DUPLICATE KEY UPDATE wthick2='$wthick2', pipeno='$pipeno'";

//<!-- #4a -->
 $result2 = pg_query($query2);
 if (!$result2) {
 $errormessage = pg_last_error();
 $message2 = "Error with query: " . $errormessage;
 }
 $message2 = sprintf ("These values were inserted into the Pipeline database - %s %s %s %s %s %s",$pipeno,$wthick2,$tallytype,$qty, $serialno,$referenceid);
 }
 // Code to pull data from the database and load onto the form
 $query = 'select pipeno from fieldtally order by pipeno asc'; 
 $result = pg_query($db_handle,$query); 
 while ($row = pg_fetch_row($result))
 {
    // Creates Arrays to use in dropdowns
     $pipeno_array[] = $row[0];

 } 
 // This function creates dropdowns that will be used in the forms
 function dropdown($field_name, $num){
     // Creates the Dropdown
     //<!-- #5a -->
     $c = ($field_name == 'pipeno') ? ' onChange="check('.$num.');"' : '';
     echo "<select name=\"".$field_name."\" id=\"".$field_name.$num."\"$c>\n";
     echo "<option value=\"\"> --- Select --- </option>\n";
     // Chooses which array to use for Dropdown options
     global $pipeno_array;
     $name_array = ($field_name == 'pipeno') ? $pipeno_array : $wallthick;
     // Creates the Dropdown options based off the array above
     foreach($name_array as $k){
         echo "<option value=\"$k\">$k</option> \n"; }
     // Ends the Dropdown
     echo "</select>\n";
 }
?>
<html>
<head>
<meta charset="utf-8">
<title>UG Pipeline Field Data Capture</title>
</head>
<body>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
     </head>
      <body>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">

<!-- #5b -->
        function check(num){
           var pipeno_id = '#pipeno_'+num;
           var pipeno = $(pipeno_id).val();
           if(pipeno != ""){
             jQuery.ajax({
             type: "POST",
             url: "check.php" , 
             data:'pipeno='+pipeno,
             cache: false,
             success: function(response){
             var response_array = JSON.parse(response);
             $('#heatno1').val(response_array['heatno1']);
             $('#pipeno2').val(response_array['pipeno2']); 
             $('#heatno2').val(response_array['heatno2']);
             $('#Djointno').val(response_array['Djointno']);
             }           
            });
           }
           else{
           $('#heatno1').val('');
           $('#pipeno2').val('');
           $('#heatno2').val('');
           $('#Djointno').val('');}
            }
  </script>
          <!-- #4b -->
 <!--<?php printf($message);?>-->

 <!-- #6.1 -->
<form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#00CC00">
 <h3>Input Field Tally Information</h3>
      Select Wall Thickness:<select name="wthick" id="wthick">
 <!-- #7.1 -->
  <option value=""> --Select-- </option> 
  <option value="9.80">  9.80  </option>
  <option value="13.50"> 13.50 </option>
  <option value="15.90"> 15.90 </option>
  </Select>           
 Select Pipe No:<?php dropdown('pipeno', 1); ?> HeatNo1: <input type="text" name="heatno1" id="heatno1"><br /><br />  
 PipeNo2: <input type="text" name="pipeno2" id="pipeno2"> HeatNo2: <input type="text" name="heatno2" id="heatno2">Joint No: <input type="text" name="Djointno"><br /><br /> 
  Input measured Length: <input type="text" name="measuredlength"> Input Serial No: <input type="text" name="serialno"><br><br> Remarks: <input type="text" name="remarks"><br><br> 
 <!-- #8.1 -->
 <input type="Submit" name="submit_1" value="Submit">
 <!-- #9.1 -->
</td></tr></table></form>
<!-- #6.2 -->
 <form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#FF99FF">
 <h3>Input Field Bend Information</h3>
  Select Wall Thickness:<select name="wthick1" id="wthick1">
 <!-- #7.2 -->
     <option value=""> --Select-- </option> 
     <option value="9.80">  9.80  </option>
     <option value="13.50">13.50 </option>
     <option value="15.90"> 15.90 </option>
  </select>
 <!-- #10.1 -->           
 Select Pipe No:<?php dropdown('pipeno', 2); ?>   HeatNo1: <input type="text" name="heatno1" id="heatno1_2"> <br><br>
 PipeNo2: <input type="text" name="pipeno2" id="pipeno2_2"> HeatNo2: <input type="text" name="heatno2" id="heatno2_2"> Joint No: <input type="text" name="Djointno"> <br><br>
 Input Measured Distance: <input type="text" name="measureddistance"> Input Bend Angle: <input type="text" name="benddegree"> <br><br>
Select Bend Type:<select name="bendtype" id="bendtype">
    <option value=""> --Select-- </option> 
    <option value="Combo">Combo</option>
    <option value="SAG">SAG</option>
    <option value="OB">OB</option>
    <option value="SBRT">SBRT</option>
    <option value="SBLT">SBLT</option>
    <option value="HBLT">HBLT</option>
    <option value="HBRT">HBRT</option><p></p> 
  Remarks: <input type="text" name="remarks"><br></br>

  <input type="Submit" name="submit_2" value="Submit"> 
 <!-- #9.2 -->
</td></tr></table></form>
<!-- #6.3 -->

<form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#99FF33">
 <h3>Input App. Tally Information</h3>
 <!-- #11 -->
       Select Wall Thickness:<select name="wthick2" id="wthick2">
 <!-- #7.3 -->
     <option value=""> --Select-- </option> 
     <option value="9.80">  9.80  </option>
     <option value="13.50"> 13.50 </option>
     <option value="15.90"> 15.90 </option>
  </select>
 <!-- #10.2 -->             
 Select Pipe No:<?php dropdown('pipeno', 3); ?>  <br><br> Input Tally Type: <input type="text" name="tallytype">
 Input Tally Qty: <input type="text" name="qty"><br></br>  Input Serial No: <input type="text" name="serialno"> 
 RefID: <input type="text" name="referenceid"><br></br>
 <!-- #8.3 -->
 <input type="Submit" name="submit_3" value="Submit">
 </td></tr></table>
</form>

</body>
</html> 
```

> 将数据加载到表单字段并从数据库中推回数据的 PHP 脚本 - 文件名 = check1.php

```
<?php
//Php Code to connect to postgresqldatabase
$PGHOST = "localhost:25376";
$PGDATABASE = "Pipeline";
$PGUSER = "postgres";
$PGPASSWORD = "Casa2009";
$PGPORT = 5432;
$db_handle = pg_connect("dbname=$PGDATABASE user=$PGUSER password=$PGPASSWORD");

// Code to pull data from the database and load onto the form  
$pipeno = pg_escape_string($_POST['pipeno']);
$query = "SELECT * FROM fieldtally1 WHERE pipeno = $pipeno ";
$result = pg_query($db_handle,$query); 
$row = pg_fetch_row($result);
$row_info = array('heatno1'=>$row[1],'pipeno2'=>$row[2],'heatno2'=>$row[3],'jointno'=>$row[4]);
$row_info = json_encode($row_info);
print_r($row_info); 
?> 
```

> 当我在有或没有数据的情况下点击提交按钮时出现的错误是这样的
> 
> 注意：未定义变量：第 27 行 C:\Users\iegbulefu\Documents\My Web Sites\Personal Site1\autopopulate.php 中的备注
> 
> 警告：pg_query()：查询失败：错误：“GGFF”第 1 行或附近的语法错误：...no2=67677,Djointno=8,measuredlength=80,serialno=99GGFF,remar...^ 在 C:\ Users\iegbulefu\Documents\My Web Sites\Personal Site1\autopopulate.php 在第 30 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T03:44:18.510

我会通过使用 Ajax 和 JQuery 来做到这一点。您需要做 3 件事 - 在`head`文档中添加 Ajax/JQuery 代码，为 Ajax 创建要连接的 php 文件，并将`onChange`, `id`&`value`属性添加到字段。

在您`<head></head>`添加此 javascript `<title></title>`-

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
<script type="text/javascript">
function check(){   
    var pipeno = $('#pipeno').val();
    if(pipeno != "pipeno"){
      jQuery.ajax({
      type: "POST",
      url: "check.php",
      data: 'pipeno='+pipeno,
      cache: false,
      success: function(response){
     var response_array = JSON.parse(response);
     $('#wallthickness').val(response_array['wallthickness']);  
     $('#jointno').val(response_array['jointno']);
     $('#measuredlength').val(response_array['measuredlength']);
     $('#serialno').val(response_array['serialno']);}
    });
    }
    else{
         $('#wallthickness').val('');   
     $('#jointno').val('');
     $('#measuredlength').val('');
     $('#serialno').val('');}
    }
</script> 
```

然后创建一个以`check.php`代码命名的文件 -

```
<?php
 //Php Code to connect to postgresqldatabase
 include ("connection.php");
 // Code to pull data from the database and load onto the form  
 $pipeno = pg_escape_string($_POST['pipeno']);
 $query = "SELECT * FROM fieldtally WHERE pipeno = $pipeno ";
 $result = pg_query($db_handle,$query); 
 $row = pg_fetch_row($result))
 $row_info = array('wallthickness'=>$row[1],'jointno'=>$row[2],'measuredlength'=>$row[3],'serialno'=>$row[4]);

 $row_info = json_encode($row_info);
 print_r($row_info); 
?> 
```

最后，在表单字段中添加`id`&`value`属性（不要更改文件，只需更新这些行）

```
Select Pipe No:<select name="pipeno" id="pipeno" onChange="check()"><option value="pipeno"> --Select-- </option> 
...  (keep your database connection / how you create your dropdown, etc here, just edit the option below)
 echo "<option value=\"$pipeno\"> $pipeno</option>";
... (keep your database connection / how you create your dropdown, etc. here)
</select> 
...
Input Joint No: <input type="text" name="jointno" id="jointno">
Input Wall Thickness: <input type="text" name="wallthickness" id="wallthickness">
Input measured Length: <input type="text" name="measuredlength" id="measuredlength">
Input Serial No: <input type="text" name="serialno" id="serialno"> 
```

* * *

更新 10/19 由于更改代码 -

我在你的代码中放了编号的锚点，注释在最后。您可以在 2 个文件中完成所有这些操作，但第二个文件`check1.php`只能有 1 个数据库查询，否则您的 ajax 会出错。

自动填充.php-

```
<!-- #1 -->
<?php
//Php Code to connect to postgresqldatabase
$PGHOST = "localhost:25376";
$PGDATABASE = "Pipeline";
$PGUSER = "postgres";
$PGPASSWORD = "Casa2009";
$PGPORT = 5432;
$db_handle = pg_connect("dbname=$PGDATABASE user=$PGUSER password=$PGPASSWORD");

//<!-- #2 -->
 if(isset($_POST['submit_1'])){
 //Code to post data to the database
 $pipeno = pg_escape_string( $_POST['pipeno']);
 $wallthickness = pg_escape_string($_POST['wallthickness']);
 $heatno1 = pg_escape_string( $_POST['heatno1']);
 $pipeno2 = pg_escape_string( $_POST['pipeno2']);
 $heatno2 = pg_escape_string($_POST['heatno2']);
 $jointno = pg_escape_string($_POST['jointno']);
 $measuredlength = pg_escape_string($_POST['measuredlength']);
 $serialno = pg_escape_string($_POST['serialno']); 
 $wthick= pg_escape_string($_POST['wthick']);

//<!-- #3 -->
 $query = "INSERT INTO fieldtally1(pipeno,wallthickness,heatno1,pipeno2,heatno2,jointno,measuredlength,serialno,wthick)VALUES ('$pipeno','$wallthickness','$heatno1','$pipeno2','$heatno2','$jointno','$measuredlength','$serialno','$wthick') ON DUPLICATE KEY UPDATE wallthickness='$wallthickness',heatno1='$heatno1',pipeno2='$pipeno2',heatno2='$heatno2',jointno='$jointno',measuredlength='$measuredlength',serialno='$serialno',wthick='$wthick'";

//<!-- #4a -->
 $result = pg_query($query);
 if (!$result) {
 $errormessage = pg_last_error();
 $message = "Error with query: " . $errormessage;
 }
 $message = sprintf ("These values were inserted into the database - %s %s %s %s %s %s %s %s %s",$pipeno,$wallthickness,$heatno1,$pipeno2,$heatno2,$jointno,$measuredlength,$serialno,$wthick);
 }

 // Code to pull data from the database and load onto the form
 $query = 'select pipeno, wallthickness from fieldtally1 order by pipeno asc'; 
 $result = pg_query($db_handle,$query); 
 while ($row = pg_fetch_row($result))
 {
    // Creates Arrays to use in dropdowns
     $pipeno_array[] = $row[0];
     $wallthickness_array[] = $row[1];
 } 

  // This function creates dropdowns that can be used in your forms
 function dropdown($field_name, $num){
     // Creates the Dropdown
 //<!-- #5a -->
     $c = ($field_name == 'pipeno') ? ' onChange="check('.$num.');"' : '';
     echo "<select name=\"".$field_name."\" id=\"".$field_name.$num."\"$c>\n";
     echo "<option value=\"\"> --- Select --- </option>\n";
     // Chooses which array to use for Dropdown options
     global $pipeno_array, $wallthickness_array;
     $name_array = ($field_name == 'pipeno') ? $pipeno_array : $wallthickness_array;
     // Creates the Dropdown options based off the array above
     foreach($name_array as $k){
         echo "<option value=\"$k\">$k</option> \n"; }
     // Ends the Dropdown
     echo "</select>\n";
 }

 ?>
 <html>
     <head><title>UG Pipeline Field Data Capture</title></head>
      <body>
       <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
       <script type="text/javascript">
 <!-- #5b -->
        function check(num){
           var pipeno_id = '#pipeno_'+num;
           var pipeno = $(pipeno_id).val();
           if(pipeno != ""){
             jQuery.ajax({
             type: "POST",
             url: "check1.php",
             data: 'pipeno='+pipeno,
             cache: false,
             success: function(response){
             var response_array = JSON.parse(response);
             $('#heatno1').val(response_array['heatno1']);
             $('#pipeno2').val(response_array['pipeno2']); 
             $('#heatno2').val(response_array['heatno2']);
             $('#jointno').val(response_array['jointno']);
             //$('#measuredlength').val(response_array['measuredlength']); // this should be input from the user
            // $('#serialno').val(response_array['serialno']);  //This should also be input from the user
            }           
            });
           }
           else{
           $('#heatno1').val('');
           $('#pipeno2').val('');
           $('#heatno2').val('');
           $('#jointno').val('');}
            }
  </script> 

 <!-- #4b -->
 <?php printf($message);?>
 <!-- #6.1 -->
 <form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#64b1ff">
 <h3>Input Field Tally Information</h3>
      Select Pipe Thickness:<select name="wthick" id="wthick">
 <!-- #7.1 -->
  <option value=""> --Select-- </option> 
  <option value="9.8">  9.8  </option>
  <option value="13.5"> 13.5 </option>
  <option value="15.9"> 15.9 </option>
  </Select>           
 Select Pipe No:<?php dropdown('pipeno', 1); ?>  Select Wall Thickness:<?php dropdown('wallthickness', 1); ?><br /><br /> 
 HeatNo1: <input type="text" name="heatno2" id="heatno1"> PipeNo2: <input type="text" name="pipeno2" id="pipeno1"> HeatNo2: <input type="text" name="heatno2" id="heatno2"><br /><br /> 
 Joint No: <input type="text" name="jointno"> Input measured Length: <input type="text" name="measuredlength"> Input Serial No: <input type="text" name="serialno"><br><br> 
 <!-- #8.1 -->
 <input type="Submit" name="submit_1" value="Submit">
 <!-- #9.1 -->
 </td></tr></table></form>
 <p></p>

 <!-- #6.2 -->
 <form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#ff9d9d">
 <h3>Input Field Bend Information</h3>
  Select Wall Thickness:<select name="wallthickness" id="wallthickness">
 <!-- #7.2 -->
     <option value=""> --Select-- </option> 
     <option value="9.8">  9.8  </option>
     <option value="13.5">13.5 </option>
     <option value="15.9"> 15.9 </option>
  </select>
 <!-- #10.1 -->           
 Select Pipe No:<?php dropdown('pipeno', 2); ?>  Select Wall Thickness:<?php dropdown('wallthickness', 2); ?><br /><br /> 
 HeatNo1: <input type="text" name="heatno1" id="heatno1_2"> PipeNo2: <input type="text" name="pipeno2" id="pipeno2_2"> HeatNo2: <input type="text" name="heatno2" id="heatno2_2"><br /><br /> 
 Joint No: <input type="text" name="jointno"> Input Measured Distance: <input type="text" name="measureddistance"><br><br> 
 Input Bend Angle: <input type="text" name="benddegree"> Input Bend Type: <input type="text" name="bendtype"><br><br>
 <!-- #8.2 -->
 <input type="Submit" name="submit_2" value="Submit">
 <!-- #9.2 -->
 </td></tr></table></form>
 <p></p>

 <!-- #6.3 -->
 <form action="" method="post">
 <table width="800" cellpadding= "10" cellspacing="1" border="2">
 <tr align="center" valign="top">
 <td align="center" colspan="1" rowspan="1" bgcolor="#66CC66">
 <h3>Input App. Tally Information</h3>
 <!-- #11 -->
      Select Wall Thickness:<select name="wallthickness1" id="wallthickness1">
 <!-- #7.3 -->
     <option value=""> --Select-- </option> 
     <option value="9.8">  9.8  </option>
     <option value="13.5"> 13.5 </option>
     <option value="15.9"> 15.9 </option>
  </select>
 <!-- #10.2 -->             
 Select Pipe No:<?php dropdown('pipeno', 3); ?>  Select Wall Thickness:<?php dropdown('wallthickness', 3); ?><br /><br />            
 Input Tally Type: <input type="text" name="type">   Input Serial No: <input type="text" name="serialno"><br><br>
 Input Reference ID: <input type="text" name="referenceid"><br><br>
 <!-- #8.3 -->
 <input type="Submit" name="submit_3" value="Submit">
 </td></tr></table>
 </form>
 </body>
 </html> 
```

check1.php-

```
<?php
//Php Code to connect to postgresqldatabase
$PGHOST = "localhost:25376";
$PGDATABASE = "Pipeline";
$PGUSER = "postgres";
$PGPASSWORD = "Casa2009";
$PGPORT = 5432;
$db_handle = pg_connect("dbname=$PGDATABASE user=$PGUSER password=$PGPASSWORD");

// Code to pull data from the database and load onto the form  
$pipeno = pg_escape_string($_POST['pipeno']);
$query = "SELECT * FROM fieldtally1 WHERE pipeno = $pipeno ";
$result = pg_query($db_handle,$query); 
$row = pg_fetch_row($result);
$row_info = array('heatno1'=>$row[1],'pipeno2'=>$row[2],'heatno2'=>$row[3],'jointno'=>$row[4]);
$row_info = json_encode($row_info);
print_r($row_info); 
?> 
```

以下是问题-

1 - 将所有`<?php ?>`脚本移动到页面顶部。这将：(1) 清理您的代码，(2) 能够同时处理所有数据库查询。

2 -`fieldtally1`在您从数据库中获取下拉列表之前，您的更新查询现已完成。

3 - 要解决您的第二个问题，请`after entering data into the input fields and click submit. it creates a new record in the database instead of populating the required columns in the database`使用`INSERT INTO ... VALUES ... ON DUPLICATE KEY UPDATE ...`. 如果`pipeno`已经在数据库中（因为它是 a `Primary Key`）它将`UPDATE`代替`INSERT`.

4 - 我建议保存您的`error`or`success`消息 (#4a) 并将其回显在您的 html (#4b) 的顶部。

5a - 您从硬编码`pipeno`下拉菜单更改为使用该函数的动态下拉菜单。所以你错过了 javascript - `onChange=check();` 5b - 现在你正在创建你的`pipeno`&`onChange=check();`动态，你必须改变你的`check()`函数来动态获取 id。

6 -`$PHP_SELF`无效。我认为您正在尝试`$_SERVER['PHP_SELF']`，但这很容易被黑客入侵，因此最好只使用`action=""`. [6.1,6.2,6.3]

7 - 当你做你的时候，`<select><option>`你使用的是相同的`value=""`，但每一个都需要不同，你才能在发布时获得价值。此外，大多数`</option>`'s 拼写错误为`</optio>`. [7.1,7.2,7.3]

8 - 如果您在同一页面上有 3 个表单，则每个表单必须具有不同的名称，否则您将无法分辨单击了哪个提交按钮。[8.1,8.2,8.3]

9 - 您的前两个表格缺少结束标签 - `</td></tr></table></form>`。[9.1, 9.2]

10 - 在您的 2 和 3 表格中，您使用`id`的是在第 1 表格中使用的 's。这是无效的，因为每个都`id`必须是唯一的。[10.1,10.2]

11 - 表格`id="wallthickness"`2 中使用的第 3 表格用途。有关`id`唯一性，请参见上文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:25:42.040

If the data you want to populate the text field(s) is an attribute of your select option, I'd use jquery. Pull the selected options attributes you want to use, you can then output that to your text box with jquery also. It can be triggered by the change event on the select menue. For example..

```
$('#selectid').change(function() {
    var opt = $('#selectid option:selected');
    $('#text1id').val(opt.attr('attrfortext1'));
    $('#text2id').val(opt.attr('attrfortext2'));
    $('#text3id').val(opt.attr('attrfortext3'));
}); 
```

I'd argue to use Ajax to access another PHP file to parse your database and return a json encoded array with the data you want to populate the text fields with. Depending on how much data your sifting through, your method could ugly quickly if there were several attributes per option with 100's of options.

Craig

# c# - 通过反转鼠标放大缩小

> ID：12936173
> 
> 赞同：0
> 
> 时间：2012-10-17T14:06:02.263
> 
> 标签：c#, winforms, bitmap, zooming, mouseevent

我有一段代码在 Mouse_Up 时在 C# Windows 窗体上执行。它基本上会放大渲染图像，并在每次绘制橡皮筋时不断放大。我想通过添加一个复选框（我已经完成）来扭转这一点，如果勾选了该复选框，请根据橡皮筋的绘图从当前视图进行缩小。我认为这就像使用相反的操作数一样简单，即“+”而不是“-”，但它不会起作用。我已经在下面发布了事件代码。那里有一个条件 IF 用于更改复选框状态。第一部分可以很好地放大。ELSE IF 之后的部分不允许我缩小 - 因此我只是在那里留下了重复的代码供某人查看。谢谢

```
private void Form1_MouseUp(object sender, MouseEventArgs e)
    {
        if (checkBox1.Checked == false)
        {
            int z, w;
            this.Cursor = Cursors.Arrow;
            // Set internal flag to know we no longer "have the mouse".
            weHaveMouse = false;
            // If we have drawn previously, draw again in that spot
            // to remove the lines.
            if (ptLast.X != -1)
            {
                toolStripStatusLabel1.Text = "Please click and drag to zoom into the Fractal";
                Point ptCurrent = new Point(e.X, e.Y);
                MyDrawReversibleRectangle(ptOriginal, ptLast);
            }
            // Set flags to know that there is no "previous" line to reverse.
            ptLast.X = -1;
            ptLast.Y = -1;
            ptOriginal.X = -1;
            ptOriginal.Y = -1;
            //e.consume();
            if (action)
            {
                xe = e.X;
                ye = e.Y;
                if (xs > xe)
                {
                    z = xs;
                    xs = xe;
                    xe = z;
                }
                if (ys > ye)
                {
                    z = ys;
                    ys = ye;
                    ye = z;
                }
                w = (xe - xs);
                z = (ye - ys);
                if ((w < 2) && (z < 2)) initvalues();
                else
                {
                    if (((float)w > (float)z * xy)) ye = (int)((float)ys + (float)w / xy);
                    else xe = (int)((float)xs + (float)z * xy);
                    xende = xstart + xzoom * (double)xe;
                    yende = ystart + yzoom * (double)ye;
                    xstart += xzoom * (double)xs;
                    ystart += yzoom * (double)ys;
                }
                xzoom = (xende - xstart) /(double)x1;
                yzoom = (yende - ystart) / (double)y1;
                mandelbrot();
                rectangle = false;
                //Refresh();
            }
        }
        else if (checkBox1.Checked == true)
        {
            int z, w;
            this.Cursor = Cursors.Arrow;
            // Set internal flag to know we no longer "have the mouse".
            weHaveMouse = false;
            // If we have drawn previously, draw again in that spot
            // to remove the lines.
            if (ptLast.X != -1)
            {
                toolStripStatusLabel1.Text = "Please click and drag to zoom into the Fractal";
                Point ptCurrent = new Point(e.X, e.Y);
                MyDrawReversibleRectangle(ptOriginal, ptLast);
            }
            // Set flags to know that there is no "previous" line to reverse.
            ptLast.X = -1;
            ptLast.Y = -1;
            ptOriginal.X = -1;
            ptOriginal.Y = -1;
            //e.consume();
            if (action)
            {
                xe = e.X;
                ye = e.Y;
                if (xs > xe)
                {
                    z = xs;
                    xs = xe;
                    xe = z;
                }
                if (ys > ye)
                {
                    z = ys;
                    ys = ye;
                    ye = z;
                }
                w = (xe - xs);
                z = (ye - ys);
                if ((w < 2) && (z < 2)) initvalues();
                else
                {
                    if (((float)w > (float)z * xy)) ye = (int)((float)ys + (float)w / xy);
                    else xe = (int)((float)xs + (float)z * xy);
                    xende = xstart + xzoom * (double)xe;
                    yende = ystart + yzoom * (double)ye;
                    xstart += xzoom * (double)xs;
                    ystart += yzoom * (double)ys;
                }
                xzoom = (xende - xstart) / (double)x1;
                yzoom = (yende - ystart) / (double)y1;
                mandelbrot();
                rectangle = false;
                //Refresh();
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:19:01.450

首先，以我的拙见，缩小时没有必要画橡皮筋。只需单击缩小的图像居中的位置。尽管如此，我看不出您提供的放大和缩小代码之间的代码差异。一般来说，最简单的做法是缩小图像，使图像的当前中心保持在其位置，并以 X 和 Y 坐标除以 2 和 Width 和 Height 相乘的方式处理图像绘制2.如果是您的代码，在代码末尾计算类似这样的东西**可能会**奏效：

```
xzoom = 1/xzoom;
yzoom = 1/yzoom; 
```

# javascript - 滚动查看隐藏在持久标题下的元素

> ID：12936176
> 
> 赞同：4
> 
> 时间：2012-10-17T14:06:05.367
> 
> 标签：javascript, css, header, persistent

我目前正在严格限制我可以使用 JavaScript 做什么（例如，没有诸如 jQuery 之类的框架，并且在 Firefox 2.0 之后没有任何东西）。

这是我的问题；我在页面顶部浮动了一个持久标题。我的输入元素分散在各处（我们正在精确复制纸质表格，包括背景图像）。页面底部附近有一个字段被标记出来（使用键盘选项卡按钮）并将焦点放在页面顶部的字段上。Firefox 将自动滚动“进入视图”字段。然而，虽然浏览器认为该字段在视图中，但它实际上隐藏在持久标头之下。

[http://imageshack.us/a/img546/5561/scrollintoviewproblem.png](http://imageshack.us/a/img546/5561/scrollintoviewproblem.png)

通过从页面上的另一个位置点击“选项卡”可以访问上面的蓝色字段。浏览器认为该字段已滚动到视图中，但实际上它隐藏在浮动持久标题**下方。**

我正在寻找的是关于如何检测该字段位于此标题下方并相应地滚动整个页面的想法。

我尝试了一些边距和填充的变体（请参阅[http://code.stephenmorley.org/javascript/detachable-navigation/#considerations](http://code.stephenmorley.org/javascript/detachable-navigation/#considerations)上的其他注意事项），但没有运气。每次我们关注一个字段时，我也尝试调用 JavaScript 函数“scrollIntoView(element)”，但考虑到表单上的字段数量（以及我们正在对齐它们以匹配纸张背景图像的事实准确地形成），这会导致一些非常严重的“跳跃”行为，当通过标签浏览彼此靠近但高度略有不同的字段时。

我可以更改持久标头的完成方式，只要它不需要太多努力。不幸的是，框架是不可能的，因为我们需要与持久标题中的页面内容进行交互。

理想情况下，解决方案是 CSS，但如果它解决了我的问题，我愿意接受 JavaScript。

另请注意，我们要求输入元素具有背景颜色，这意味着向它们添加填充会使背景颜色拉伸，从而隐藏部分背景图像。但是，输入元素在一个 div 中，所以我们可以利用它来发挥我们的优势。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:21:59.043

因此，在进行了更多搜索之后（感谢@Kraz 通过 scrollTo() 建议引领这条路线），我找到了一个适合我的解决方案。

我已经动态添加了对每个元素的 onFocus 调用，因此它们总是调用 scrollScreenArea(element) 函数，该函数确定它们是隐藏在顶部标题下方还是太靠近页脚区域（这完全解决了另一个问题，使用相同的解决方案）。

```
/* This function finds an element's position relative to the top of the viewable area */
function findPosFromTop(node) { 
    var curtop = 0;
    var curtopscroll = 0;
    if (node.offsetParent) {
        do {
            curtop += node.offsetTop;
            curtopscroll = window.scrollY;
        } while (node = node.offsetParent);

    }
    return (curtop - curtopscroll);
}

/* This function scrolls the page to ensure that elements are
   always in the viewable area */
function scrollScreenArea(el) 
{ 

    var topOffset       = 200; //reserved space (in px) for header
    var bottomOffset    = 30;  //amount of space to leave at bottom
    var position        = findPosFromTop(el);
    //if hidden beneath header, scroll into view
    if (position < topOffset)
    {
        // to scroll up use a negative number
        scrollTo(el.offsetLeft,position-topOffset);
    }
    //if too close to bottom of view screen, scroll into view
    else if ((position + bottomOffset) > window.innerHeight)
    {
        scrollTo(0,window.scrollY+bottomOffset);
    }
} 
```

如果您有任何问题，请告诉我。感谢@Kraz 让我接受这个解决方案。

同样，我想参考[Can I detect the user viewable area on the browser?](https://stackoverflow.com/questions/9271747/can-i-detect-the-user-viewable-area-on-the-browser) 因为我从那里拿了一些代码，部分描述了我的问题（用一个整洁的图表来启动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:50:46.223

最简单的方法是监听每个元素的焦点事件，然后查看它是否在页面上。在纯 JS 中，它类似于：

```
var input = Array.prototype.slice.call(document.getElementsByTagName('input'));
for ( var i in input )
    input[i].addEventListener( 'focus', function (e) {
        var diff = 150 /* Header height */ - e.target.getBoundingClientRect().top;
        if ( diff > 0 ) {
            document.body.scrollTop += diff;
            document.documentElement && document.documentElement.scrollTop += diff;
        }
    }, false ); 
```

我没有包含 IE`addEvent`方法，但是在这个基础上，你自己应该很容易做到这一点。

# r - 用于基因表达的 Limma 软件包

> ID：12936179
> 
> 赞同：0
> 
> 时间：2012-10-17T14:06:09.017
> 
> 标签：r, bioinformatics, bioconductor, limma

我有以下格式的 rma 归一化矩阵：

```
ID_REF GSM362180    GSM362181  GSM362188    GSM362189  GSM362192
244901 5.094871713 4.626623079 4.554272515 4.748604391 4.759221647
244902 5.194528083 4.985930299 4.817426064 5.151654407 4.838741605
244903 5.412329253 5.352970877 5.06250609  5.305709079 8.365082403
244904 5.529220594 5.28134657  5.467445095 5.62968933  5.458388909
244905 5.024052699 4.714631878 4.792865831 4.843975286 4.657188246
244906 5.786557533 5.242403911 5.060605782 5.458148567 5.890061836 
```

其中不同的列对应于四种不同类型的启动子，并且四种启动子中的每一个都有一个生物复制，所以总共有 8 列。

我尝试使用 Limma 包来查找跨多个启动子（具有重复）的差异表达基因，但由于我是 r 新手并且无法完全理解它，所以我总是遇到错误。

这是我使用的代码：

```
Group <- factor(c("p1", "p1", "p2", "p2", "p3","p3","p3","p4","p4"), levels = c("GSM362180","GSM362181","GSM362188","GSM362189","GSM362192","GSM362193","GSM362194","GSM362197","GSM362198"))

design <- model.matrix(~0 + Group)

colnames(design) <- c("GSM362180","GSM362181","GSM362188","GSM362189","GSM362192","GSM362193","GSM362194","GSM362197","GSM362198")
fit <- lmFit(modified, design) 
```

其中 modified 是以上述格式输入的 rma 归一化数据矩阵。我收到以下错误：

```
Coefficients not estimable: GSM362180 GSM362181 GSM362188 GSM362189 GSM362192 GSM362193 GSM362194 GSM362197 GSM362198 
```

lmfit（设计，t（M））中的错误：0（非NA）案例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-27T10:58:54.827

应该只是：

```
Group <- factor(c("p1", "p1", "p2", "p2", "p3", "p3", "p3", "p4", "p4")) 
```

组类别顺序应与中的样本顺序相对应`colnames(modified)`

`levels`在您的原始代码中，您为每个因素分配了不同的唯一性，`Group`因此基本上您没有分组类别，没有重复并且无法估计系数。

创建您的设计矩阵：

```
design <- model.matrix(~0 + Group) 
```

然后，您希望将样本名称分配给`rownames`设计矩阵，而不是`colnames`列代表分组。

```
rownames(design) <- c("GSM362180","GSM362181","GSM362188","GSM362189","GSM362192","GSM362193","GSM362194","GSM362197","GSM362198")
# or simply
rownames(design) <- colnames(modified) 
```

您的设计矩阵应如下所示，`1`其中样本属于特定组类别。

```
design
          Groupp1 Groupp2 Groupp3 Groupp4
GSM362180       1       0       0       0
GSM362181       1       0       0       0
GSM362188       0       1       0       0
GSM362189       0       1       0       0
GSM362192       0       0       1       0
GSM362193       0       0       1       0
GSM362194       0       0       1       0
GSM362197       0       0       0       1
GSM362198       0       0       0       1
attr(,"assign")
[1] 1 1 1 1
attr(,"contrasts")
attr(,"contrasts")$Group
[1] "contr.treatment" 
```

# android - 我手机上 RAW 数据的默认位置是什么

> ID：12936182
> 
> 赞同：0
> 
> 时间：2012-10-17T14:06:14.310
> 
> 标签：android

早上好堆栈，

我是 Android 开发的新手，我正在为我的手机开发一个应用程序。我有文件添加到我的 eclipse 文件夹中的 raw 文件夹中。我想知道手机中原始文件夹中的文件存储在哪里以及访问它们的路径是什么。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:19:22.440

据我所知，您无法以绝对路径方式访问它们。例如你可以使用这个：

```
InputStream is = this.getResources().openRawResource(R.raw.myfile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:20:04.307

getResources().openRawResource(R.raw.file);

# c - 何时将类型应用于指针算术逻辑？

> ID：12936183
> 
> 赞同：1
> 
> 时间：2012-10-17T14:06:15.493
> 
> 标签：c, pointers, types, compilation, pointer-arithmetic

如果我有一些整数数组，我们就说：

```
int iarr[5] = {0, 7, 3, 12, 99}; 
```

地址出现在哪个位置`0xbfdf53a8`；我想用循环打印出这个值，我可以做这样的事情：

```
for(i=0; i<5; i++)
   printf("value of iarr[%d] = %d\n", i, *(iarr+i)); 
```

这个循环是有效的，因为我们每次都增加一个“int”（在典型的 32 位机器上，地址每次迭代增加 4 个字节）。

我的问题是，什么时候应用类型指定的字节偏移量？那是编译过程的一部分（意味着它在某处的程序集中），还是在操作系统级别完成？

我会假设这是如何以标准化方式处理的，但我还没有找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:08:43.667

它是编译过程的一部分，编译器生成的代码会考虑操作数的大小。

请注意，您可以使用指向 5412-byte 的指针进行递增和算术运算，`struct`就像使用指向 4-byte 的指针一样容易`int`。编译器检查指针表达式的类型并生成正确的代码。

操作系统根本不参与这些底层细节，从它的角度来看，它只是进程中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:08:38.723

它在编译时完成，并将在程序集（和目标代码）中生成。

操作系统不知道（也不关心）您正在操作的数据类型。它只会为您提供大量（虚拟）原始内存供您使用。

只有您和编译器知道数据类型及其特征。

# css - 将隐藏的 div 居中对齐 下拉菜单的标签

> ID：12936184
> 
> 赞同：3
> 
> 时间：2012-10-17T14:06:16.567
> 
> 标签：css

[我](http://net.tutsplus.com/tutorials/html-css-techniques/how-to-build-a-kick-butt-css3-mega-drop-down-menu/)有一个基于纯 CSS 和 HTML 的水平菜单，我试图将每个顶级菜单项下的下拉 div 居中对齐，但在让它工作时遇到了一些困难。它目前向右对齐，并且我在更改为子元素的“相对”定位时所做的任何更改都会正确对齐父/子元素，但随后会因为子元素占用项目之间的空间而丢弃顶层项目。

下面是项目的代码，后跟相关的 CSS。

html:

```
<ul id="menu">

    <li><a href="#" class="drop">Home</a>
        <div class="dropdown_2columns">

            <div class="col_1">
      <p class="black_box">Download stuff here<br><img src="img/menu-button.png"></a></p>

            </div>    
            <div class="col_1">
                <ul>
                    <li><a href="#">Item 1</li>
                    <li><a href="#">Item 2</li>
                    <li><a href="#">Item 3</li>
                </ul>   

            </div>

        </div>
    </li> 
```

CSS

```
 #menu {
    text-align:center;
    color: #2262a0;
    list-style:none;
    width:690px;
    margin:30px auto 0px auto;
    height:28px;
    padding:0px 20px 10px 20px;
        background: #fff;

}
   #menu li {
    float:left;
    display:block;
    text-align:center;
    position:relative;
    padding: 4px 10px 4px 10px;
    margin-right:0px;
    margin-top:7px;
    border:none;
}

#menu li:hover {
    padding: 4px 9px 4px 9px;*/
}

.dropdown_1column, 
.dropdown_2columns, 
.dropdown_3columns, 
 {
    background:url("img/blue-arrow.png") no-repeat center 0px z-index;
    margin:10px auto;
    float:left;
    display: inline-block;
    position:absolute;
    left:-999em; /* Hides the drop down */
    text-align:center;
    padding:10px 5px 10px 5px;
    border-left:1px solid #e5edf4;
    border-right:1px solid #e5edf4;
    border-top:3px solid #004b91;
    border-bottom:3px solid #e5edf4;
}

.dropdown_1column {width: 260px;}
.dropdown_2columns {width: 520px;}
.dropdown_3columns {width: 780px;}

#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
{
    left:-1px;
    top:auto;
}

.col_1,
.col_2,
.col_3,
 {
    display:inline;
    float: left;
    position: relative;
    margin-left: 5px;
    margin-right: 5px;
}
.col_1 {width:250px;}
.col_2 {width:500px;}
.col_3 {width:750px;} 
```

有任何 CSS 大师愿意提供一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:11:13.370

在发布的示例中，您可以通过更改来移动框

```
#menu li:hover .dropdown_1column, #menu li:hover .dropdown_2columns, #menu li:hover .dropdown_3columns, #menu li:hover .dropdown_4columns, #menu li:hover .dropdown_5columns 
{
      left: -212px; /*for column 4*/
} 
```

当然，您必须为每个框设置一个静态宽度并相应地设置它们的样式。

# c# - OpenTK 纹理显示为全黑

> ID：12936188
> 
> 赞同：2
> 
> 时间：2012-10-17T14:06:30.257
> 
> 标签：c#, textures, opentk, dds-format

好的，所以我采用了一些在其他程序上运行良好的代码，我已经将它复制到我正在开发的一个新程序中，但它似乎不起作用，据我所知，我已经得到了所有需要的东西那里有线条，但应该出现纹理的区域只显示黑色方块。

我想我错过了一条线，但我不知道它是什么。至少可以说我很困惑。

这是我的opengl设置：

```
GL.ClearColor(Color.Black);
GL.MatrixMode(MatrixMode.Projection);
GL.LoadIdentity();
GL.Viewport(0, 0, glControl1.Width, glControl1.Height);
GL.Ortho(0, 800, 600, 0, -30, 30); 
```

这是加载纹理并返回纹理 ID 的方法，我将其存储在我的变量中。（file.writeallbytes 只是一个测试，我可以在 photoshop 中打开没问题）

```
private int loadTexture(String path)
{
    GL.Enable(EnableCap.Texture2D);

    byte[] ddsBytes = Media.GetFile("\\"+path.Replace("\\\\","\\")).Skip(20).ToArray();
    File.WriteAllBytes("Derp.dds", ddsBytes);

    int texId = GL.GenTexture();
    GL.BindTexture(TextureTarget.Texture2D, texId);

    Bitmap image = null;

    DDSReader.DDSImage ddsImg = new DDSReader.DDSImage(ddsBytes);
    image = ddsImg.BitmapImage;
    ddsImg = null;

    BitmapData bmpData = image.LockBits(new Rectangle(0, 0, image.Width, image.Height), ImageLockMode.ReadOnly, System.Drawing.Imaging.PixelFormat.Format32bppArgb);

    GL.TexImage2D(TextureTarget.Texture2D, 0, PixelInternalFormat.Rgba, bmpData.Width, bmpData.Height, 0, OpenTK.Graphics.OpenGL.PixelFormat.Bgra, PixelType.UnsignedByte, bmpData.Scan0);

    image.UnlockBits(bmpData);
    GL.TexParameter(TextureTarget.Texture2D, TextureParameterName.TextureMinFilter, (int)TextureMinFilter.Linear);
    GL.TexEnv(TextureEnvTarget.TextureEnv, TextureEnvParameter.TextureEnvMode, (int)All.Modulate);

    return texId;
} 
```

我的绘图方法是这样的：

```
public void Draw()
{
    if (TexID == -1)
    {
        GL.Color4(Color[0], Color[1], Color[2], (byte)100);
    }
    else
    {
        GL.Color3((byte)255,(byte)255,(byte)255);
        GL.Enable(EnableCap.Texture2D);
        GL.BindTexture(TextureTarget.Texture2D, TexID);
    }

    GL.Begin(BeginMode.TriangleStrip);
    GL.TexCoord2(0, 0);
    GL.Vertex2(X, Y + Height);
    GL.TexCoord2(0, 1);
    GL.Vertex2(X, Y);
    GL.TexCoord2(1, 0);
    GL.Vertex2(X + Width, Y + Height);
    GL.TexCoord2(1, 1);
    GL.Vertex2(X  +Width, Y);
    GL.End();

    GL.Disable(EnableCap.Texture2D);
} 
```

编辑：纹理确实出现了，但是纹理是全黑的，即使我设置了另一个颜色值（这通常会改变纹理的色调）

# javascript - 我的承诺不再适用于 jQuery 1.8

> ID：12936190
> 
> 赞同：6
> 
> 时间：2012-10-17T14:06:32.313
> 
> 标签：javascript, ajax, jquery, jquery-deferred

此代码片段在 1.7.2 中使用成功/错误回调以及承诺样式回调。在 1.8.2 中，成功/错误回调仍然有效，但 Promise 无效。我的预感是`return dfd.promise(jqXHR);`线路是问题，但我不确定。

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR) {

    // Don't infinitely recurse
    originalOptions._retry = isNaN(originalOptions._retry)
        ? Common.auth.maxExpiredAuthorizationRetries
        : originalOptions._retry - 1;

    // set up to date authorization header with every request
    jqXHR.setRequestHeader("Authorization", Common.auth.getAuthorizationHeader());

    // save the original error callback for later
    if (originalOptions.error)
        originalOptions._error = originalOptions.error;

    // overwrite *current request* error callback
    options.error = $.noop();

    // setup our own deferred object to also support promises that are only invoked
    // once all of the retry attempts have been exhausted
    var dfd = $.Deferred();
    jqXHR.done(dfd.resolve);

    // if the request fails, do something else yet still resolve
    jqXHR.fail(function () {
        var args = Array.prototype.slice.call(arguments);

        if (jqXHR.status === 401 && originalOptions._retry > 0) {

            // refresh the oauth credentials for the next attempt(s)
            // (will be stored and returned by Common.auth.getAuthorizationHeader())
            Common.auth.handleUnauthorized();

            // retry with our modified
            $.ajax(originalOptions).then(dfd.resolve, dfd.reject);

        } else {
            // add our _error callback to our promise object
            if (originalOptions._error)
                dfd.fail(originalOptions._error);
            dfd.rejectWith(jqXHR, args);
        }
    });

    // NOW override the jqXHR's promise functions with our deferred
    return dfd.promise(jqXHR);
}); 
```

**更新**：这是我的 ajax 请求失败：

```
$.ajax({
        url: someFunctionToGetUrl(),
        // works
        //success: callback,
        //error: ajaxErrorHandler
    }).then(
        [callback],
        [errorback, ajaxErrorHandler]
    );
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T19:40:06.227

**编辑：**这是一个文档错误，但行为是设计使然。api 发生了变化，`deferred.then`现在的行为类似于[`deferred.pipe`](http://api.jquery.com/deferred.pipe/)并且不再允许传入数组，但文档尚未更新以反映这一点。

相关错误：

*   **github：** [deferred.then 现在的行为类似于 deferred.pipe 但文档已过时](https://github.com/jquery/api.jquery.com/issues/159)
*   **jQuery Bug Tracker:** [Ticket #12765: deferred.then([SuccessArrayFuncs],failFunc) 不像描述的那样工作](http://bugs.jquery.com/ticket/12765)

我在下面原始答案末尾描述的解决方法仍然适用。

* * *

**原答案：**

对我来说，它看起来像一个 jQuery 错误。如果你传入一个函数引用作为第一个参数，它可以工作，但如果你传入一个函数数组，它就不行：

[http://jsfiddle.net/tunDH/](http://jsfiddle.net/tunDH/)

但是，[文档](http://api.jquery.com/deferred.then/)说一系列函数就可以了：

> **doneCallbacks**   当 Deferred 被解析时调用的函数或函数数组。

而且，你是对的。它适用于 jQuery 1.7：http: [//jsfiddle.net/tunDH/1/](http://jsfiddle.net/tunDH/1/)

一种解决方法是将所有函数调用包装在单个函数中，而不是在数组中：

```
$.ajax({ 
    url: someFunctionToGetUrl(), 
    // works 
    //success: callback, 
    //error: ajaxErrorHandler 
}).then( 
    function(){
        callback1.apply(this, arguments);
        callback2.apply(this, arguments);
    }, 
    [errorback, ajaxErrorHandler] 
); 
```

[http://jsfiddle.net/tunDH/2/](http://jsfiddle.net/tunDH/2/)

您可能需要对错误回调执行相同的操作，但我没有对此进行测试。

# tfs - 在 TFS 2008 中生成差异文件包

> ID：12936192
> 
> 赞同：0
> 
> 时间：2012-10-17T14:06:37.883
> 
> 标签：tfs

我想生成一个包文件来自动更新应用程序。我有来自 TFS 2008 的上次更新的变更集和标签。如何生成从上次更新到当前版本的差异包？我可以自动化吗？TFS 可以自动生成一个包含所有修改和添加文件的包吗？

PS.：这是一个 ASP.Net MVC3 应用程序

# windows-8 - WinRT 中以太网网络适配器 ID 的唯一性如何？它是从Mac地址导出的吗？

> ID：12936193
> 
> 赞同：2
> 
> 时间：2012-10-17T14:06:41.997
> 
> 标签：windows-8, windows-runtime

WinRT 中以太网网络适配器 ID 的唯一性如何？它是从Mac地址导出的吗？

```
IReadOnlyCollection<Windows.Networking.Connectivity.ConnectionProfile> profiles =            Windows.Networking.Connectivity.NetworkInformation.GetConnectionProfiles();

Windows.Networking.Connectivity.NetworkAdapter na = profiles.First<Windows.Networking.Connectivity.ConnectionProfile>().NetworkAdapter;

string nid =  na.NetworkAdapterId.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:50:13.550

不，[NetworkAdapterId](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkadapter.networkadapterid.aspx)值是一个 GUID，与机器 MAC 地址无关。您无法通过为 Windows Store 应用程序类型公开的 WinRT API 获取计算机的 MAC 地址。

# c++ - 延迟插入/删除

> ID：12936195
> 
> 赞同：1
> 
> 时间：2012-10-17T14:06:43.947
> 
> 标签：c++, lazy-evaluation

我的任务是编辑优先级队列并实现（除其他外）插入功能。尽管我的书提到了“延迟删除”和其他延迟操作，但它从未指定“延迟”的实际含义。

简而言之：插入/删除函数和 LAZY 插入/删除函数有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:14:14.903

“懒惰删除”通常意味着您将某些内容标记为已删除而不是直接删除它，并修改其他操作以假装标记的项目不存在。

例如，在优先队列的情况下，您可以在出队过程中跳过已删除的项目，而不是主动从中间删除它们，这更难。

类似地，“延迟插入”可能会将元素添加到输入队列中，这是一个恒定时间操作。通常，插入优先级队列需要 O(log n) 时间。尝试出列时，输入队列将被刷新到优先级队列中。这将具有在出队操作之前卸载插入操作的成本的效果。

基本上“懒惰”意味着在需要结果之前不进行操作。

# bash - 将值从子 shell 脚本返回到父脚本

> ID：12936197
> 
> 赞同：2
> 
> 时间：2012-10-17T14:06:47.493
> 
> 标签：bash, shell, scripting

我有两个 shell 脚本，比如 script1.sh 和 script2.sh。我从 script1.sh 调用 script2.sh。在 script2.sh 中完成了一些评估，并根据结果设置了一个标志。现在我需要将标志传递给 script1.sh，根据它将决定 script1.sh 是否应该继续执行或退出。我没有使用函数。当我导出标志时，在 script1.sh 中它是空白的。
我现在的问题是如何从 script2.sh 返回标志？
有什么帮助吗？有任何想法吗？经验分享？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:08:50.440

您可以打印结果并在 script1 中捕获它：

```
# Script 1
flag="$(./script2.bash)" 
```

和：

```
# Script 2
[...]
printf '%s\n' "$flag" 
```

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:10:05.833

只需使用 script2 的退出状态：

```
if script2.sh ; then
   echo Exited with zero value
else
   echo Exited with non zero
fi 
```

在 script2 中使用`exit 0`or来设置标志。`exit 1`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:08:06.557

我希望您使用`script2.sh`(se by the statement `exit {value}`)的返回码

例如

```
./script2.sh 
```

`$?`包含来自`script2.sh`退出语句的返回值。

你不能`export`在这里使用。`export`使变量可用于后续子流程。它不能用于将值传递回父进程，因为您正在修改特定于子进程的变量的副本。

# python - 使用python CGI将cookie添加到网页

> ID：12936206
> 
> 赞同：0
> 
> 时间：2012-10-17T14:07:06.413
> 
> 标签：python, cookies, cgi

我正在尝试使用 python 的 Cookie 将 cookie 添加到网页中，所以我有：

```
def cookie():
   #create cookie1 and cookie2 here using Cookie.SimpleCookie()
   print cookie1
   print cookie2

print "Content-Type: text/html"
print
cookie()

try:
    cookie= Cookie.SimpleCookie(os.environ["HTTP_COOKIE"])
    user= cookie["user"].value
    print user
except (Cookie.CookieError, KeyError):
    print 'no cookie'

page= open('example.html', 'r').read()
print page 
```

现在的问题是 cookie1 和 cookie2 打印在页面本身中，并且可以在脚本运行时看到。因此 cookie 没有保存，并且打印了 except 中的“no cookie”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:35:20.810

1-您的代码没有意义。cookie1 和 cookie2 没有在第一个函数中定义。

2- 看起来您正在尝试使用旧的 cgi 库打印内容，您在其中执行标题、空白行，然后是页面内容。Cookie 也由 Web 服务器作为 HTTP 标头发送，并由浏览器作为 HTTP 标头发送回。它们不会出现在网页上。所以你需要在空行之前有“set-cookie”数据。

除非您必须使用 CGI 模块，否则我会研究其他解决方案。CGI 基本上已经死了——它是一个旧的、限制性的、标准的；配置服务器可能很麻烦；表现从来都不是很好；还有更好的选择。

大多数（如果不是全部）使用 Python 进行的现代 Web 开发都使用 WSGI 协议。（[Python Web 框架、WSGI 和 CGI​​ 如何组合在一起](https://stackoverflow.com/questions/219110/how-python-web-frameworks-wsgi-and-cgi-fit-together)，[http:](http://www.python.org/dev/peps/pep-0333/) //www.python.org/dev/peps/pep-0333/ ）

Flask 和 Bottle 是两个非常简单的 WSGI 框架。（Pryamid 和 Django 是两个更高级的）。除了大量非常重要的功能之外，它们还允许您在框架将有效负载传递到服务器之前轻松指定 HTML 响应和随之而来的 HTTP 标头（包括 cookie）。这

[http://flask.pocoo.org/docs/quickstart/](http://flask.pocoo.org/docs/quickstart/)

[http://bottlepy.org/docs/dev/tutorial.html](http://bottlepy.org/docs/dev/tutorial.html)

如果我不得不使用 cgi，我可能会做这样的事情：（伪代码）

```
def setup_cookie():
    # try/except to read the cookie
    return cookie

def headers(cookie):
    # print a set-cookie header if needed
    return "SetCookie: etc"

def page_content(cookie):
    # maybe you want to alter the page content with a regex or something based on the cookie value
    return html

cookie = setup_cookie()
print headers( cookie )
print ""
print page_content( cookie ) 
```

但请记住 - 使用旧的 cgi 标准，打印标题而不是 html - 这意味着如果您的内容生成影响标题值（如 cookie），您需要能够在“打印”之前覆盖它。

# php - SQL 注入检索与查询中的表不同的表中的所有数据

> ID：12936208
> 
> 赞同：0
> 
> 时间：2012-10-17T14:07:10.410
> 
> 标签：php, security, sql-injection, code-injection

我拥有一个在 Windows XP 上的虚拟服务器“Wamp”上工作的 PHP 系统。我正在尝试使用 SQL 注入技术检测系统中的漏洞。

我已经尝试过诸如“' OR 1=1”之类的基本注入方法，并且发现了几个问题。但是，我被困在以下问题上：

我的系统中有以下代码行：

```
$sql2="SELECT * FROM $table1 WHERE question_id='$id'"; 
```

在这行代码之后，我执行查询并显示如下结果：

```
$result2=mysql_query($sql2);

while($rows=mysql_fetch_array($result2)){
?>
<table width="400" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td><table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td bgcolor="#F8F7F1"><strong>ID</strong></td>
<td bgcolor="#F8F7F1">:</td>
<td bgcolor="#F8F7F1"><?php echo $rows['a_id']; ?></td>
</tr>
<tr>
.......
....... 
```

请注意，变量“$id”的值是从上一页作为_GET[] 参数发送的。

我的问题是，我正在尝试注入参数 id=2？（2 是一个例子）是从前一页发送的。这是一个例子：

```
http://localhost/PHPforum/view_topic.php?id=2 
```

我正在寻找一种注入变量“$id”的值的方法，以使其显示不同表（table2）而不是table1的数据。我可以显示两个表，但我需要通过该注入显示 table2 数据。

我怎么可能做到这一点？

同样，我不是要攻击任何系统，这是我拥有的系统，我正在尝试检测它的漏洞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:12:57.150

仅从 SQL 注入漏洞的概念证明，您将首先确定注入发生的上下文。虽然在大多数情况下，注入在`WHERE`子句中，但也有其他可能的位置。

接下来，您将尝试确定选择的列数。由于这是 MySQL，您可以使用`ORDER BY x`并指定您希望对结果进行排序的列的编号。所以从 , 开始`2' ORDER BY 1 --`，`2' ORDER BY 2 --`直到一个失败。

然后，您可以将原始结果集与您注入的另一个结果集连接起来，`UNION SELECT`如下所示：

```
' UNION SELECT 1, 2, 3, …, n -- 
```

这只是一个简单的测试，应该只显示注入的结果集。这些数字会提示您哪些值反映在哪里。从这里开始，您可以从其他表、视图或其他数据源中选择任何其他值。关于什么信息值得的一个很好的提示可以给你[pentestmonkey 的*MySQL SQL Injection Cheat Sheet*](http://pentestmonkey.net/cheat-sheet/sql-injection/mysql-sql-injection-cheat-sheet)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:13:01.787

通常的方法是使用 UNION 来组合来自两个不同查询的结果。您可能需要花一点时间来获得正确数量的列和字符集以允许查询通过。

网络上有几个很好的 SQL 注入[备忘单](https://www.google.com/search?q=sql%20injection%20cheat%20sheet)，您可以将其用作攻击向量的参考。

您应该真正考虑使用一个库，该库允许您使用参数化查询（例如准备好的语句）来查询数据库，而不是自己构建（和转义）查询。PDO 和 mysqli 都可用于 PHP，并允许准备好的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:24:18.970

SQL 注入漏洞实际上并不难找到，恕我直言。

要遵守的简单规则是：

**不要将用户提供的值连接到传递给数据库执行的字符串中。**

如果你打破了这条规则，即将用户提供的值连接到一个查询字符串中，你就创建了一个 SQL 注入漏洞。

有两种方法可以解决这个问题：

1.  使用允许您将参数值绑定到查询字符串的库。这些库在执行查询时使用 API 调用将参数值传递给数据库，而不是将值连接到数据库执行的语句中。

2.  检查所有代码以查看连接到查询字符串中的值来自何处。

我总是选择方法 1，然后我知道我总是安全的。

您可以继续方法 2，但这就像试图救出一艘有洞的船。水将不断涌入，或者，在您的情况下，您所做的每一次更改都必须检查代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:18:30.053

这在技术上可行，但应用程序逻辑可能不会显示不同表的值：

```
http://localhost/PHPforum/view_topic.php?id=2;select * from table2 
```

如果你知道所有的表名和字段名，你可以这样做：

```
http://localhost/PHPforum/view_topic.php?id=2;select table2id as table1id, table2value as table1value, .. from table2 
```

您可能必须对分号和空格进行 urlencode 才能正常工作。

# google-chrome - Chrome 不尊重相对 URL 中的 https

> ID：12936209
> 
> 赞同：12
> 
> 时间：2012-10-17T14:07:11.613
> 
> 标签：google-chrome, ssl

我有一个在 Firefox 和 IE 中加载完美的网站，但被 Chrome 阻止。Chrome 抱怨混合模式内容，但所有资源都通过同一域中的相对 URL 访问。

据我了解，相对 URL 应该使用与正在加载的“主”页面相同的协议。在这种情况下，我有以下内容：

```
<link href="/assets/css/small.css" title="Small" rel="alternate stylesheet" type="text/css" />
<link href="/assets/css/large.css" title="Large" rel="alternate stylesheet" type="text/css" /> 
```

两者都是相对 URL。当页面通过 HTTPS 加载时，我从 Chrome 控制台获得以下信息（我更改了域名以保护客户的隐私）：

```
    [阻止] https://www.example.com/Login/ 的页面运行不安全
    来自 http://www.example.com/assets/css/small.css 的内容。

    [阻止] https://www.example.com/Login/ 的页面运行不安全的内容
    http://www.example.com/assets/css/large.css。

```

我认为相对 URL 应该遵守所请求的协议是错误的吗？

**更新：** 它还阻止以相同方式引用的 .js 文件：

```
<script src="/assets/scripts/change-text-size.js" type="text/javascript"></script> 
```

被阻止：

```
[阻止] https://www.example.com/Login/ 的页面运行来自 http://www.example.com/assets/scripts/change-text-size.js 的不安全内容。

```

另一个奇怪的事情是，如果我在有问题的页面上查看源代码，我会看到相对 url，如果我将光标悬停在资产（样式表、.js 文件）的“链接”上，工具提示会说这是https：。

**更新 2：** .css 文件中没有引用任何内容。这是上面提到的“small.css”文件的全部内容：

```
div#content-wrap,
div#content-one-col
{
    font-size: 65%;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:04:12.393

In your public example, the static assets are redirecting to the http version, causing Chrome to complain.

Eg if you go to [https://www.bayerglucofacts.com/assets/css/de-de.css](https://www.bayerglucofacts.com/assets/css/de-de.css) - you get a 302 redirect to [http://www.bayerglucofacts.com/assets/css/de-de.css](http://www.bayerglucofacts.com/assets/css/de-de.css) which gives the error.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T10:24:14.827

I've been having the same problem, and this was due to a `<base>` tag pointing to the non-SSL version of the site.

However, as ScottR pointed out, this was due to your CSS redirecting to the non-SSL version. It seems that is fixed now - don't forget to accept his answer though!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:11:10.233

css 中的链接似乎很可能指向 http 图像/资源。

# c# - 将值传递给控制器 并返回调用视图？

> ID：12936211
> 
> 赞同：0
> 
> 时间：2012-10-17T14:07:18.520
> 
> 标签：c#, asp.net-mvc, redirecttoaction

我有一个按钮，我用 jquery 为它动态创建目标 URI。控制器操作将对数据库进行一些更新，我希望它首先显示调用它的视图。这种观点可能不同。您如何处理这种情况？

这个想法是您单击标签，为其提供翻译，单击保存，您可以在当前页面上看到您的翻译。我让它在单页上工作得很好，但是扩大它是一个问题。

我知道我可以传递当前页面 URI，然后“手动”解析它并将其放入 RedirectToAction 但有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T17:14:36.817

我会使用 PUT 并在 Success 的当前页面上更新标签。

不要将 ajax 调用包装在 while 循环中。仅当服务器返回成功时才调用成功函数（不检查文档，我假设它是在某些 http 200 状态或其他状态下触发的）

如果您只是想重新加载成功，我想下面会做到这一点。

```
$.ajax({
  type: 'PUT',
  url: /my/url/for/adding/a/translation,
  data: theTranslation,
  success: function() {window.location.reload(true);}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:14:34.513

只需使用 jquery.put 来调用您的操作。

这不会导致重定向，而是可以有一个客户端函数来处理来自控制器的返回并直接更新页面 DOM 客户端。

# perl - 在perl中将签名添加到PDF中

> ID：12936213
> 
> 赞同：5
> 
> 时间：2012-10-17T14:07:26.490
> 
> 标签：perl, pdf, digital-signature

如何在 perl 中使用数字签名对 pdf 文件进行签名？我能够提取pdf的内容并通过生成签名字符串

# $content -> 要签名的 pdf 内容

我的 $private_key Crypt::OpenSSL::RSA->new_private_key($key_string);
$private_key->use_md5_hash();
我的 $signature = $private_key->sign($content);

因此， $signature 可以转换为十六进制格式，但我不知道如何将其添加到 PDF 文件中。我知道十六进制形式的签名应该放在 /Contents 字段中，签名文本的范围由 /ByteRange 数组给出。

有没有为此目的的模块？或者你能给我一些建议吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-21T07:14:51.680

你可能会发现这个脚本很有趣...... [http://mschuette.name/files/pdfsign.pl](http://mschuette.name/files/pdfsign.pl)它使用 PDF::API2 和 Crypt::OpenSSL 来发挥它的魔力......它可能可以作为创建一些东西的基础你自己。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:18:16.467

```
use Crypt::OpenSSL::RSA;
use File::Slurp;

my $keystring = read_file('private_key.pem');
my $private_key = Crypt::OpenSSL::RSA->new_private_key($keystring);
$private_key->use_md5_hash();
my $signature = $private_key->sign($plaintext); 
```

# autocomplete - 如何在 Visual Studio 2012（或 Resharper）中禁用 /* 自动完成

> ID：12936215
> 
> 赞同：14
> 
> 时间：2012-10-17T14:07:31.857
> 
> 标签：autocomplete, visual-studio-2012, resharper, resharper-7.0

我有安装了 Resharper 的 Visual Studio 2012。在编辑 css 文件时，当我输入 时`/*`，我会得到如下自动完成：`/**/`

我想**禁用它**，但我在选项菜单中找不到它。

我在哪里可以禁用它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-01T21:04:45.857

避免这种烦恼的一种方法是首先添加结束注释符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T13:29:40.670

转到工具 -> 选项 -> 文本编辑器 -> 所有语言（或选择一种），然后取消勾选`Automatic brace completion`. 您也可以在选项菜单中搜索它。

# php - 什么是 PHP 标志？

> ID：12936221
> 
> 赞同：0
> 
> 时间：2012-10-17T14:07:37.243
> 
> 标签：php, flags

我知道这对很多人来说可能听起来很容易，但我试图研究它（stackoverflow，php net），但我没有找到关于什么**是 PHP 中的 Flags**的明确答案。也许我没看对。如果有人可以解释这一点，以及它们常用的地方，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:12:19.537

如果您尝试提及 msql_field_flags，我在 w3schools 上找到了这个：

mysql_field_flags() 函数返回记录集中字段的标志。

此函数从 mysql_query() 函数获取字段数据，并在成功时返回一个字符串，或者在失败或没有更多行时返回 FALSE。

例子：

```
mysql_field_flags(data,field_offset) 
```

*   *数据：*必填。指定要使用的数据指针。数据指针是 mysql_query() 函数的结果

*   *field_offset：*必填。指定要开始返回的字段。0 表示第一个字段

# html - 解决字符编码不匹配的想法

> ID：12936223
> 
> 赞同：0
> 
> 时间：2012-10-17T14:07:38.477
> 
> 标签：html, character-encoding

当我尝试验证我的页面时，我收到此验证警告。

> HTTP 标头 (iso-8859-1) 中指定的字符编码与元素 (utf-8) 中的值不同。我将使用 HTTP 标头 (iso-8859-1) 中的值进行此验证。

这是文件的编码集：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> 
```

如果我尝试使用像 ĉĵŝĝ （iso-8859-3 兼容）这样的字符，它们会被错误地渲染。我认为这是我大学服务器的问题，因为它使用的是拉丁编码的版本一（iso-8859-1）。

有没有办法解决这个问题（如果问题出在大学服务器的编码集上）？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:21:20.560

您也可以在`.htaccess`文件中设置此选项

```
<FilesMatch "\.(htm|html|xhtml|php)$">
    AddDefaultCharset utf-8
</FilesMatch> 
```

这样，所有具有上述扩展名的文件都将使用 utf-8 而不是 iso-8859-1

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:17:51.670

*萨卢顿，* 你可以试试`.xhtml`。也许学院的服务器然后使用另一个标头。另一种方法是对世界语字母使用 HTML 实体`&#...;`。

由于 HTTP 标头是规范的，而不是 HTML 元数据，因此当您无法更改服务器的配置时，您会陷入困境。

[另一种解决方案](https://stackoverflow.com/questions/913869/how-to-change-the-default-encoding-to-utf-8-for-server)建议使用 httpd.conf 文件为您的 .html 创建一个本地目录。

# axapta - 服务器 AOS 中的共享项目生成错误

> ID：12936224
> 
> 赞同：1
> 
> 时间：2012-10-17T14:07:39.297
> 
> 标签：axapta, dynamics-ax-2012

在 Dynamics AX 2012 开发模式下，当我 75% 的时间尝试打开共享项目时出现此错误：

> xPropertySetData::unpack：找不到属性：2880

当我按下“OK”时，动态 AX 关闭。我没有使用本地 AOS。我们连接到服务器上的 AOS。

我在其他网站上看到过这个错误，没有人能解决这个问题。

![xPropertySetData::unpack：找不到属性：2880](../Images/2c2959e849d2317a691b0027b1ff5daa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T20:27:39.040

我想您是`System administrator`AX 中的一个（以排除特权问题）？

您是否尝试清除使用数据（工具 > 选项 > 用户数据 > 重置）？

您是否尝试从应用程序数据文件夹中删除[AUC文件？](http://www.axaptapedia.com/index.php/Object_caching)

您是否尝试重新编译应用程序？

Ax32Serv.exe 和 Ax32.exe 是同一个版本吗？

您是否尝试重新启动 AOS（的）？

你在那个环境中只有一个 AOS 吗？如果没有，您在连接到另一个 AOS 时是否有同样的问题？

**PS**当然，如果问题只是一个项目，为什么不删除它并创建一个具有相同对象的新项目呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:33:13.590

此代码是否源自 AX 2009？我试图解释错误，`xPropertySetData::unpack`听起来像传统的打包/解包，并且属性 2880 与预期的变量不匹配。

右键单击项目本身（不要打开）并单击属性，然后尝试重新设置每个属性。如果它被命名为“myproject”，请重新键入它，以便将新变量重新打包进去。

这让我觉得如果你可以导出它，你也许可以导入并且 AX 2012 可以处理上转换。

在 AX 2009 中，我相信属性是按名称引用的，而不是按 ID 引用的，在这种情况下似乎是这样。我没有 2012 年的环境，但请检查 \Macros\Properties 并查看该索引是否在其中以及是否为您提供任何线索。

修改此作业，看看它是否可以帮助您找到更多信息并检查有问题的对象。

```
static void Job67(Args _args)
{
    ProjectNode customProject;
    str temp;
    TreeNode    node;
    ;

    customProject   = infoLog.projectRootNode().AOTfindChild('Shared').AOTfindChild('YourProjectHere');
    node            = TreeNode::findNode(@'\Data dictionary\Tables\CustTable');

    temp = customProject.AOTgetProperties(true, true);
    info(temp);

    temp = node.AOTgetProperties(true, true);
    info(temp);
} 
```

# mysql - LEFT Join 查询问题

> ID：12936226
> 
> 赞同：5
> 
> 时间：2012-10-17T14:07:43.107
> 
> 标签：mysql, sql

我在使以下查询正常工作时遇到了一些问题 - 在所有情况下，我似乎只让一小部分用户返回，而不是整个列表。
我有以下两个表：

```
Users:

 - UserId
 - email

Updates:

 - UserId 
 - Status
 - LastUpdated 
```

我想要返回的是所有用户的列表（来自用户），如果今天更新了他们的状态（基于 LastUpdated 字段），否则如果今天没有更新，则为 BLANK 或 NULL。

我已经做到了：

```
SELECT users.userid, 
       updates.status 
FROM   users 
       LEFT JOIN updates 
              ON users.userid = updates.userid 
WHERE  Date(lastupdated) = Date(Now()) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:10:44.397

您可以使用`CASE`语句仅获取`updates.status`日期是否为今天：

```
SELECT users.userId, 
    CASE WHEN DATE(LastUpdated) = DATE(NOW()) THEN updates.status ELSE NULL END AS status
FROM users 
LEFT JOIN updates ON users.userId=updates.userId 
```

或者，更好的是，如果您不需要该`updates`行中的任何其他内容，只需执行以下操作：

```
SELECT users.userId, updates.status
FROM users 
LEFT JOIN updates ON users.userId=updates.userId
    AND DATE(LastUpdated) = DATE(NOW()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:11:55.257

```
SELECT    users.userId, updates.status
FROM      users
LEFT JOIN updates
  ON      updates.userId = users.userId
    AND   DATE(updates.LastUpdated) = DATE(NOW()) 
```

将您的条件放在连接中，否则它会强制询问每个连接。`LastUpdated`或者，您可以检查`NULL`我相信（因为左连接将仅包括定位信息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:13:15.720

试试这个

```
 SELECT users.userId, case when  DATE(LastUpdated) = DATE(NOW())
 updates.status else null end as status
     FROM users 
LEFT JOIN updates ON users.userId=updates.userIdd 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:26:37.810

我认为您所追求的是左外连接以返回所有用户，而不仅仅是今天有更新的用户。那应该是这样的：

```
SELECT users.userid, updates.lastupdated
  FROM users
  LEFT OUTER JOIN (
    SELECT * FROM updates WHERE DATE(lastupdated) = DATE(NOW())
    ) updates ON users.userid = updates.userid 
```

# php - 制作下一个按钮以获取更多数据？

> ID：12936227
> 
> 赞同：1
> 
> 时间：2012-10-17T14:07:43.293
> 
> 标签：php, mysql, ajax

嗨亲爱的朋友们，我希望你们一切都好。
我想制作一个下一步按钮来从 mysql 数据库中获取更多数据。
例如：

```
$sql = mysql_query("SELECT * FROM table LIMIT 0,7"); 
```

它有 7 行。对于下一个数据代码就是这样。
`$sql = mysql_query("SELECT * FROM table LIMIT 7,7");`

我可以使用ajax 来做到这一点。正如您在许多网站（如 facebook）中看到的，当您单击评论时，它会给出有限的评论，当您单击更多评论时，它会给出更多等等。在这个过程中，您可以看到页面的其他内容没有改变。这意味着它可以使用 ajax 以及如何在 ajax 中做到这一点。请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:24:45.293

您必须通过 Ajax 发送当前评论计数，从响应中获取新评论并显示它们。

Javascript：

```
$(document).ready(function() {
    $('a.pagination-more').click(function() {
        var current_comments_count = $(this).data("current_comments_count");

        $.ajax({ 
            type: "POST",
            url: "pagination/pagination_ajax_more.php",
            data: { "limit_start":current_comments_count },
            beforeSend:  function() {
                $('a.pagination-more').html('<img class="loading-gif" src="pagination/loading.gif" />'); 
            },
            success: function(html){ 
                $("#more").remove(); // This is the "More" button. It is appended to the end again in the 'html' variable
                $("ul#updates").append(html);
                if($("a#end")[0]) {
                    $("div#more").remove();
                }
            }
        }); 

        return false;
    });
}); 
```

在 PHP 端，您只需获得 $limit_start，从数据库中获取结果并回显 html，如下所示：

```
$limit_start = $_POST['limit_start'];

$query = mysql_query("SELECT COUNT(*) FROM `table` LIMIT 0, $limit_start");
$current_comments_count = mysql_num_rows($query);

$query = mysql_query("SELECT * FROM `table` LIMIT $limit_start, 7");

while($row = mysql_fetch_assoc($query)) { 
    echo '<li>
            blah blah...
          </li>';
}

if(mysql_num_rows($query) == 7)  
    echo '<div id="more"><a data-current_comments_count="$current_comments_count" class="button pagination-more" href="#">More</a></div>';
else
    echo '<div id="more"><a id="end" class="button pagination-more" href="#">The button will be removed from jQuery...</a></div>'; 
```

当然，强烈建议保护您的应用程序而不是仅使用`mysql_query()`. 这段代码可以工作，但我删除了一些其他的东西，现在没有测试它。因此，可能会出现一些错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:14:21.393

你的ajax会是这样的

```
var numberOfdata = 0;

$('#button').click(function () {
    $.ajax({
        url: 'load.php',
        data: {
            'limit' : numberOfdata,
            // other data ...
        },
        type : 'post',
        // other parameters...
    }).success(function (data) {
        // adding data to your website
        numberOfdata += 7;
    });    
}); 
```

在你的服务器端，你可以做这样的事情

```
... other operations
mysql_query("SELECT * FROM table LIMIT " . $_POST['limit'] . ",7"); 
... continuting the work 
```

注意：您应该能够自己处理 SQL 注入。

**编辑**：请注意不推荐使用 mysql_query 。

# java - 用于构面的 Elasticsearch prefixFilter

> ID：12936230
> 
> 赞同：0
> 
> 时间：2012-10-17T14:08:10.610
> 
> 标签：java, elasticsearch, faceted-search

elasticsearch 非常新，使用 Java 客户端。

是否可以返回按前缀过滤的方面计数？

例如，我正在搜索 URL 并想忽略路径，只计算主机名。例如，

```
addFacet( filterFacet("myhost", prefixFilter("url", "http://myhost.com")) 
```

在响应中，各个方面都是空的。没有名称或值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:28:40.037

最好的解决方案是将要分面的部分存储为单独的字段。或者，您可以使用[术语脚本](http://www.elasticsearch.org/guide/reference/api/search/facets/terms-facet.html)即时提取前缀。

# zend-framework2 - 模块特定的数据库 - zend 框架 2

> ID：12936231
> 
> 赞同：1
> 
> 时间：2012-10-17T14:08:13.213
> 
> 标签：zend-framework2

使用 Zend Framework 版本 2，如何为不同的模块配置不同的数据库。每个模块都可以访问不同的数据库。

```
'db' => array(
        'driver'         => 'Pdo',
        'dsn'            => 'mysql:dbname=test;host=localhost',
        'driver_options' => array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''),
        'username'       => 'root',
        'password'       => '',
    ), 
```

将上面的代码放在 module.config.php 中，用于具有不同数据库名称的每个模块

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:05:02.847

模块配置的概念实际上更多的是模块为应用程序提供一些配置。提供的配置被合并到一个配置中，因此使用相同的配置键名称将导致此数据被覆盖。

所以改为使用描述性名称 - db_user 或 db_logging 等。

此外，查看 ServiceManager 工厂可能是一个好主意，因为您可以提取一些常见的数据库凭据，然后根据正在使用的工厂使用不同的数据库名称。

我只是稍微提到了 ZF2 中的数据库，所以也许其他人会提供更好的方法。

# c# - 使用反射的通用模型绑定器

> ID：12936232
> 
> 赞同：1
> 
> 时间：2012-10-17T14:08:13.513
> 
> 标签：c#, asp.net-mvc, reflection

我正在尝试构建一个通用模型绑定器，该模型绑定器使用反射将属性分配给从 BindingContext 检索的指定类型的对象。所以是这样的：

```
public class ModelBinder : IModelBinder
{
    public object BindModel<T, K> (ControllerContext controllerContext, ModelBindingContext bindingContext)
        where T : class, new()
        where K : class
    {
        Type ObjectType = typeof(T);
        Type InterfaceType = typeof(K);
        T obj = new T();

        foreach (var Property in ObjectType.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.Instance))
        {
            Type PropertyType = Property.PropertyType;

            // checks if property is a custom data object
            if (!(PropertyType.GetGenericArguments().Count() > 0 && PropertyType.GetGenericArguments()[0].GetInterfaces().Contains(InterfaceType)))
            {
                Property.SetValue(obj, bindingContext.ValueProvider.GetValue(Property.Name), null);   
            }
        }

        return obj;
    } 
```

显然这不起作用，因为它没有正确实现 IModelBinder 接口。这样的事情可能吗？

编辑：

为了扩展我这样做的原因，我们的对象使用了许多不同的自定义对象。例如，类对象：

```
public class Class : ModelBase<Class>
{
    public Class () { }

    public virtual string ClassDescription { get; set; }
    public virtual string ClassName { get; set; }
    public virtual LookUp ClassType { get; set; }
    public virtual double Credits { get; set; }
    public virtual bool Documents { get; set; }
    public virtual LookUp PracticeArea { get; set; }
} 
```

使用 LookUp 类：

```
public class LookUp : ModelBase<LookUp>
{
    public LookUp () { }

    public virtual string DisplayName { get; set; }
    public virtual LookUpType Type { get; set; }
} 
```

下拉列表用于查找和其他对象，因此我的类/创建自定义模型绑定器将执行以下操作：

```
LookUp ClassType = LookUp.Load(long.Parse(bindingContext.ValueProvider.GetValue("ClassType").AttemptedValue)) 
```

我看不出如何使用 DefaultModelBinder 来处理这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:18:35.760

所以我想出了一个可行的（目前）解决方案。目前它不是很通用，但它适用于我的目的。

```
public class ModelBinder : DefaultModelBinder
{
    public override object BindModel (ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var ModelType = bindingContext.ModelType;
        var Instance = Activator.CreateInstance(ModelType);
        var Form = bindingContext.ValueProvider;

        foreach (var Property in ModelType.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Public | BindingFlags.Instance))
        {
            Type PropertyType = Property.PropertyType;

            // I'm using an ORM so this checks whether or not the property is a
            // reference to another object
            if (!(PropertyType.GetGenericArguments().Count() > 0 ))
            {
                // This is the not so generic part.  It really just checks whether or 
                // not it is a custom object.  Also the .Load() method is specific
                // to the ORM
                if (PropertyType.FullName.StartsWith("Objects.Models"))
                {
                    var Load = PropertyType.GetMethod("Load", BindingFlags.Public | BindingFlags.FlattenHierarchy | BindingFlags.Static, null, new Type[] { typeof(long) }, null);
                    var Value = Load.Invoke(new object(), new object[] { long.Parse(Form.GetValue(Property.Name + ".ID").AttemptedValue) });
                    Property.SetValue(Instance, Value, null);
                }
                // checkboxes are weird and require a special case
                else if (PropertyType.Equals(typeof(bool)))
                {
                    if (Form.GetValue(Property.Name) == null)
                    {
                        Property.SetValue(Instance, false, null);
                    }
                    else if (Form.GetValue(Property.Name).Equals("on"))
                    {
                        Property.SetValue(Instance, true, null);
                    }
                }
                else
                {
                    Property.SetValue(Instance, Convert.ChangeType(bindingContext.ValueProvider.GetValue(Property.Name).AttemptedValue, PropertyType), null);
                }
            }
        }

        return Instance;
    }
} 
```

# php - 自动修剪空白以优化阅读 HTML/JS 页面

> ID：12936235
> 
> 赞同：0
> 
> 时间：2012-10-17T14:08:22.200
> 
> 标签：php, jquery, templates, optimization

我已经生成了用于缓存加载的 PHP 文件（通过 file_get_contents() 或 include() 随机程序...），让我们考虑这个例子：

未优化模式或未缓存：

我不想看到的：

*   `<body>`和之间的空格`<head>`
*   封闭标签之间的空格：`/> <script`或`<table> <tr>`

我想看到的（可能使用 PHP 的优化方式`PREG_REPLACE`）：

*   标签之间的修剪空间`<body><head>`
*   封闭标签之间的修剪空间：`/><script`或`<table><tr>`

对于上面的完整示例，应为 RESULT，例如：

```
<!DOCTYPE><head><link href="/static/css/main.css" rel="stylesheet" type="text/css"><title>Title</title><meta http-equiv='Content-Type' content='Type=text/html; charset=UTF-8'> <meta name="description" content="Description site" /><meta name="keywords" content="keywords, another keywords" /><script type="text/javascript" src="/static/js/jquerymin.js"></script></head><body><div id="center_box"><div id="orderdata"><table></table></div><div id="orderform"><form method="post" action="/frontacp" method="post" action="/frontacp" method="post" action="/frontacp" method="post" action="/frontacp"><div class="logincol"><div class="leftcol"><label for="types_name">Tip proizvoda</label></div><div class="rightcol"><input type="text" name="types_name" /></form></div></div></body></html> 
```

而是页面的BAD（未优化使用）：

```
 <!DOCTYPE><head>
    <link href="/static/css/main.css" rel="stylesheet" type="text/css"><title>Title</title>
    <meta http-equiv='Content-Type' content='Type=text/html; charset=UTF-8'> <meta name="description" content="Description site" /><meta name="keywords" content="keywords, another keywords" /><script type="text/javascript" src="/static/js/jquerymin.js"></script></head>
    <body><div id="center_box">
        <div id="orderdata">
        <table>

        </table>
        </div>

        <div id="orderform">
        <form method="post" action="/frontacp" method="post" action="/frontacp" method="post" action="/frontacp" method="post" action="/frontacp"><div class="logincol"><div class="leftcol"><label for="types_name">Tip proizvoda</label></div><div class="rightcol"><input type="text" name="types_name"    /></form>    </div>
    </div></body></html> 
```

解决方案： PHP 示例使用正确的方法来修剪此问题，并且不会修剪内部 HTML 标记的空格。

注意：我已经完成了读取缓存和渲染这个问题，这个问题不会涉及到这个区域。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:17:33.447

这应该工作

```
$document = preg_replace( '/\n/', '', $document );
$document = preg_replace( '/>\s+</', '><', $document );
$document = preg_replace( '/\s{2,}/', ' ', $document ); 
```

再见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:28:28.910

这比人们想象的要复杂一些，它在这里提出了很多问题。我冒昧地找到了一个似乎有适当解决方案的解决方案：

[minifying-final-html-output-using-regular-expressions-with-codeigniter](https://stackoverflow.com/questions/5312349/minifying-final-html-output-using-regular-expressions-with-codeigniter)

（只需忽略 CodeIgniter 的引用，因为解决方案只是一个正则表达式）

# vba - 在 powerpoint 2007 中调整图片大小

> ID：12936237
> 
> 赞同：6
> 
> 时间：2012-10-17T14:08:22.547
> 
> 标签：vba, powerpoint

我环顾四周。我所能找到的只是在 Excel 中或通过 Excel 调整大小。

我正在粘贴 pdf 中的图片，需要一键调整大小和定位。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T14:00:10.177

我终于明白了..这就是我所做的，以防万一有人面临同样的问题。这会重新调整图像大小，将其设置在所需位置并将其发送到后面。

```
Sub Resize()
    With ActiveWindow.Selection.ShapeRange
        .Height = 2.78 * 72  //72 is the multiplier for the inch
        .Width = 4.17 * 72
        .Left = 0.78 * 72
        .Top = 1.25 * 72
        .ZOrder msoSendToBack  // This sends picture to the back
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:47:05.447

感谢您的代码。我希望能够自动调整一堆屏幕截图的大小以适应幻灯片的大小。我猜其他人可能也需要这样做，所以我发布了我所做的。

首先，在 PowerPoint 2010 的页面设置中，我将幻灯片设置为 16:9 以匹配我的显示器/屏幕截图的比例。然后我添加了一张空白幻灯片并粘贴了每个屏幕截图的图像。然后我运行了这段代码：

```
Sub ResizeAll()
For each tSlide in ActiveWindow.Presentation.Slides
    tSlide.Select
    With tSlide.Shapes.Item(1) 'assume a blank slide with one image added only
        .Select
        .Height = ActiveWindow.Presentation.PageSetup.SlideHeight
        .Width = ActiveWindow.Presentation.PageSetup.SlideWidth
        .Left = 0
        .Top = 0
    End With
Next
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T08:34:49.777

将图像放入幻灯片中的代码（根据要求更改高度和宽度）：

pptSlide.Shapes(1).Height = 850：pptSlide.Shapes(1).Width = 650

# android - 将 iOS 通知覆盖到 Android 通知

> ID：12936241
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:08:36.053
> 
> 标签：android, objective-c

尝试将我的 iOS 应用程序转换为 android，我知道我无法移植它，所以我从头开始编写它如何将此通知转换为 Android Java 代码？

```
-(IBAction)turnon {

    NSDateComponents *comps = [[NSDateComponents alloc] init];
    [comps setDay:28];
    [comps setMonth:9];
    [comps setYear:2012];
    [comps setHour:8];
    [comps setMinute:25];
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *fireDate = [gregorian dateFromComponents:comps];

    UILocalNotification *alarm = [[UILocalNotification alloc] init];

    alarm.fireDate = fireDate;
    alarm.repeatInterval = NSDayCalendarUnit;
    alarm.soundName = @"msl.aiff";
    alarm.alertBody = @"This is a message..";
    alarm.timeZone = [NSTimeZone defaultTimeZone];

    [[UIApplication sharedApplication] scheduleLocalNotification:alarm]; 
```

我已经在网上搜索了大约 4 个小时，我认为这对于 Android 开发人员来说很简单，但因为我刚开始我只是不知道如何做到这一点。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:24:14.837

这就是您要寻找的：您可以使用警报管理器在特定时间显示通知，即使您的应用程序根本没有运行。

[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

[特定时间的每日通知](https://stackoverflow.com/questions/12125537/everyday-notifications-at-certain-time)

这对以下有用：

[使用 Alarmmanager 在特定时间启动服务](https://stackoverflow.com/questions/3052149/using-alarmmanager-to-start-a-service-at-specific-time)

**编辑见评论：**

您可以为此使用 AlarmManager，首先为您自己创建某种接收器。

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class AlarmReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Intent dailyUpdater = new Intent(context, MyService.class);
        context.startService(dailyUpdater);
        Log.d("AlarmReceiver", "started service");
    }
} 
```

比您需要创建将显示通知的服务

```
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.os.Binder;
import android.os.IBinder;
import android.support.v4.app.NotificationCompat;
import android.util.Log;
import android.widget.Toast;

public class MyService extends Service {
    private NotificationManager mNM;

    private int NOTIFICATION = 546;

    public class LocalBinder extends Binder {
        MyService getService() {
            return MyService.this;
        }
    }

    @Override
    public void onCreate() {
        mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

        showNotification();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        showNotification();
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        mNM.cancel(NOTIFICATION);
        Toast.makeText(this, "stopped service", Toast.LENGTH_SHORT).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mBinder;
    }

    private final IBinder mBinder = new LocalBinder();

    private void showNotification() {
        Toast.makeText(this, "show notification", Toast.LENGTH_SHORT).show();

        //notification code here

    }
} 
```

最后你需要设置闹钟：

```
private void setRecurringAlarm(Context context) {
    Calendar updateTime = Calendar.getInstance();
    updateTime.set(Calendar.HOUR_OF_DAY, 20);
    updateTime.set(Calendar.MINUTE, 30);

    Intent open = new Intent(context, AlarmReceiver.class);
    open.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, open, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, SystemClock.elapsedRealtime() + 5000, 10000, pendingIntent); 
} 
```

在您进行测试运行之前，将您的接收器和服务添加到您的清单文件中：

```
<service android:name=".MyService"></service>
<receiver android:name=".AlarmReceiver"></receiver> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:21:26.217

来自[Android 开发者网站的一些小改动的复制粘贴](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

```
NotificationCompat.Builder mBuilder =
        new NotificationCompat.Builder(this)
        .setSmallIcon(R.drawable.notification_icon)
        .setContentTitle("My notification")
        .setContentText("Hello World!");
// Creates an explicit intent for an Activity in your app
Intent resultIntent = new Intent(this, ResultActivity.class);

// The stack builder object will contain an artificial back stack for the
// started Activity.
// This ensures that navigating backward from the Activity leads out of
// your application to the Home screen.
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack for the Intent (but not the Intent itself)
stackBuilder.addParentStack(ResultActivity.class);
// Adds the Intent that starts the Activity to the top of the stack
stackBuilder.addNextIntent(resultIntent);
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(
            0,
            PendingIntent.FLAG_UPDATE_CURRENT
        );
mBuilder.setContentIntent(resultPendingIntent);
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
// mId allows you to update the notification later on.
// Sets an ID for the notification, so it can be updated
int mId= 1;
mNotificationManager.notify(mId, mBuilder.build()); 
```

# r - R中的聚合和ifelse函数

> ID：12936246
> 
> 赞同：3
> 
> 时间：2012-10-17T14:08:44.993
> 
> 标签：r

附上一些R代码：

```
temp_df <- data.frame(c("A","A","A","G","G","Z","Z"),
                    c("B","D","E","R","S","Y","U"),
                    c(1.5,1.1,0.8,0.2,0.8,0.9,0.1),
                    c(0.8,0.4,1.5,1.2,1.2,0.2,0.3),
                    c(2.7,2.7,2.7,2.4,2.4,0.5,0.5),
                    c("YES","NO","NO","NO","NO","YES","YES"))

colnames(temp_df) <- c("PERSON_1","PERSON_2","VALUE_1",
                     "VALUE_2","TOTAL_2","DECISION_2") 
```

我要做的是根据以下规则创建一个名为“NEW_DECISION_1”的新列：

对于第 1 列的人（“PERSON_1”），如果第 5 列的对应值（“TOTAL_2”）的值大于或等于 2.0，并且第 6 列的对应值中至少有一个“YES” (“DECISION_2”)，那么“NEW_DECISION_1”列的值为“YES”，如果不满足这些条件，则它们将获得“NO”值。

因此，对于第 1 列中的 A 人，由于第 5 列中的值为 2.7，并且第 6 列中的相应值中至少有一个“是”，那么新列中的值将是“是”。

对于第 1 列中的 G 人，由于第 5 列中的值为 2.4，但由于第 6 列中相应值中没有“YES”值，因此新列中的值为“NO”。

对于第 1 列的 Z 人，由于第 5 列的值为 1.0，并且第 6 列的对应值中至少有一个“YES”，因此新列中的值为“NO”。所以新表将是：

```
temp_df$NEW_DECISION_1 <- c("YES","YES","YES","NO","NO","NO","NO")
temp_df 
```

我正在考虑某种聚合规则，但我不确定使用什么函数来搜索“至少一个“是””。

如果您需要更多信息或澄清，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:23:28.830

这是一个解决方案`ddply`：

```
library(plyr)
ddply(temp_df, .(PERSON_1), transform,
      NEW_DECISION_1 = c("NO", "YES")[(TOTAL_2 >= 2 &
                                       sum(DECISION_2 == "YES") > 0) + 1])

#   PERSON_1 PERSON_2 VALUE_1 VALUE_2 TOTAL_2 DECISION_2 NEW_DECISION_1
# 1        A        B     1.5     0.8     2.7        YES            YES
# 2        A        D     1.1     0.4     2.7         NO            YES
# 3        A        E     0.8     1.5     2.7         NO            YES
# 4        G        R     0.2     1.2     2.4         NO             NO
# 5        G        S     0.8     1.2     2.4         NO             NO
# 6        Z        Y     0.9     0.2     0.5        YES             NO
# 7        Z        U     0.1     0.3     0.5        YES             NO 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T14:23:32.933

这是基本的 R 解决方案：

```
result <- by(temp_df, 
  INDICES=temp_df$PERSON_1, 
  FUN=function(x) 
    within(x, DECISION_1 <- ifelse(any(grepl('YES', DECISION_2)) & TOTAL_2 >= 2, 
                                   'YES', 'NO')))
do.call(rbind, result)

#        PERSON_1 PERSON_2 VALUE_1 VALUE_2 TOTAL_2 DECISION_2 DECISION_1
#    A.1        A        B     1.5     0.8     2.7        YES        YES
#    A.2        A        D     1.1     0.4     2.7         NO        YES
#    A.3        A        E     0.8     1.5     2.7         NO        YES
#    G.4        G        R     0.2     1.2     2.4         NO         NO
#    G.5        G        S     0.8     1.2     2.4         NO         NO
#    Z.6        Z        Y     0.9     0.2     0.5        YES         NO
#    Z.7        Z        U     0.1     0.3     0.5        YES         NO 
```

# java - PlayerListener MMAPI

> ID：12936247
> 
> 赞同：0
> 
> 时间：2012-10-17T14:08:45.930
> 
> 标签：java, mobile, java-me, mmapi

运行程序时，音乐仍在运行，但控制台不打印消息。问题出在哪里？

我不会很好地使用英语。对不起。

```
public class MultimediaSound extends MIDlet {
      public void startApp(){
          try {
          Player player = Manager.createPlayer(getClass().
          getResourceAsStream("/tuner1.wav"),"audio/x-wav");

          player.start();
          player.addPlayerListener(new PlayerListener(){

            public void playerUpdate(Player arg0, String arg1, Object arg2) {
                if(arg1 == (PlayerListener.STARTED)){
                    System.out.print(arg2.toString()+" " + "dkm ");
                }else{
                    System.out.print("dkm                  ");
                }
            }

          });
          } catch(Exception e) {
          e.printStackTrace();
          }
          }

          public void pauseApp() {}

          public void destroyApp(boolean unconditional) {}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:18:02.140

arg1 是您应该使用的字符串

```
if(arg1.equals(PlayerListener.STARTED)) 
```

# java - Http 获取异常目标主机在 ICS 上不能为空

> ID：12936248
> 
> 赞同：4
> 
> 时间：2012-10-17T14:08:46.260
> 
> 标签：java, android, google-api, http-get

我在 ICS 上遇到了这个异常，而在 2.2 上它运行良好。

```
java.lang.IllegalStateException: Target host must not be null, or set in parameters. scheme=null, host=null, path=http://maps.googleapis.com/maps/api/geocode/json?latlng=32.0692342,34.7952296&sensor=true 
```

这是我的代码：

```
 HttpGet request = new HttpGet(URLEncoder.encode(requestUrl, "UTF-8"));
        HttpResponse response;
        response = mHttpClient.execute(request); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T14:25:48.277

Remove the `URLEncoder.encode` call, it is not needed

It is needed to encode the url parameters, for example:

```
String url = "http://maps.googleapis.com/maps/api/geocode/json?latlng="+URLEncoder.encode("32.0692342,34.7952296")+"&sensor="+URLEncoder.encode("true") 
```

# html - AngularJS 不能更新数据属性？

> ID：12936259
> 
> 赞同：3
> 
> 时间：2012-10-17T14:09:12.810
> 
> 标签：html, angularjs

我有一个输入元素，它使用引导程序中的预先输入插件。**我想将数据源属性设置为用户键入。效果类似于实例搜索。**

```
<input id="test" data-provide="typeahead" data-source="{{titles}}"/> 
```

在我的 AngularJS 控制器中，我有

```
$scope.titles = my_array_object 
```

执行上述代码后，我在 Chrome 开发者工具中看到*data-source*属性设置正确。

但是在 Chrome 控制台中，当我执行

```
$('#test').data('source') 
```

返回值为“”，一个空字符串

设置元素属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T15:42:22.210

我想你想要这样的东西：[http ://plnkr.co/edit/ASeDxB5445HeiLKOq409?p=preview](http://plnkr.co/edit/ASeDxB5445HeiLKOq409?p=preview)

```
 var myApp = angular.module("app",[]);

  myApp.directive('moDataSource',function() {
        return {
          restrict:"A", 
          scope:{
            moDataSource:"=",
          },              
          link: function(scope, elem, attrs) {
            var typeahead = elem.typeahead().data("typeahead");             
            typeahead.source = scope.moDataSource;     
          }         
        };
        });

   function MainCtrl($scope) {       
       $scope.addItem = function (item) {
         if(item.length > 0)
            $scope.array.push(item);
       };
       $scope.array = ['Safari',"Internet Explorer","FireFox","Chrome"];     
   } 
```

# c# - 静默打印文件而不打开它们

> ID：12936264
> 
> 赞同：0
> 
> 时间：2012-10-17T14:09:44.557
> 
> 标签：c#, file, printing, process, processstartinfo

> **可能重复：**
> [.NET：如何在不打开文件的情况下打印文件](https://stackoverflow.com/questions/1018137/net-how-to-print-files-w-o-opening-them)

我想谨慎地打印我的文件而不打开它们，我被告知要这样做：

```
ProcessStartInfo psi = new ProcessStartInfo(documentFileName);
psi.Verb = "Print";
Process.Start(psi); 
```

但是 ProcessStartInfo 打开给定的文件，所以我怎样才能静默打印？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:32:59.500

尝试使用 PrintDocument 类检查下面的链接

[http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printdocument%28VS.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:15:03.580

尝试这个：

```
psi.WindowStyle = ProcessWindowStyle.Hidden; 
```

# objective-c - 搜索数组中对象的属性

> ID：12936268
> 
> 赞同：2
> 
> 时间：2012-10-17T14:10:00.593
> 
> 标签：objective-c, ios, xcode

我有一个对象的 NSArray，其属性包括 firstName、lastName、clientID 等，我想根据搜索关键字对数组执行搜索。必须根据名字和姓氏属性检查此关键字，并返回原始数组的子集，该子集仅包含名字/姓氏包含搜索词的对象。有没有有效/快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-17T14:26:33.560

作为第二个想法，我认为[`-filteredArrayUsingPredicate:`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/doc/uid/20000137-BAJJDBEB)可能对你更好。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K = %@", @"firstName", @"Bob"];
NSArray *filteredArray = [array filteredArrayUsingPredicate:predicate]; 
```

这会从数组中返回名字为“Bob”的对象的子数组。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T14:17:08.880

我想你在寻找[`-indexesOfObjectsPassingTest:`](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/indexesOfObjectsPassingTest%3a)

```
NSIndexSet *indexSet = [array indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    MyObject *myObject = (MyObject *)obj;
    return [myObject.firstName isEqualToString:@"Bob"];
}]; 
```

这将返回数组中第一个名称为“Bob”的所有对象的索引集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:26:44.477

另一种方法返回一个只包含匹配对象的新数组：

```
-(NSArray *)matchingClientsFromArray:(NSArray *)objects withFirstName:(NSString *)firstName andLastName:(NSString *)lastName{
    NSMutableArray *objectArray = [NSMutableArray new];
    for (Client *client in objectArray){
        if ([client.firstName isEqualToString:firstName] &&
              [client.lastName isEqualToString:lastName]) {
            [objectArray addObject:client];
        }
    }
    return [objectArray copy];
} 
```

# ajax - 在 Bootstrap Modal 中使用 django 清晰表单的 AJAX 反馈表单

> ID：12936270
> 
> 赞同：4
> 
> 时间：2012-10-17T14:10:04.010
> 
> 标签：ajax, django, twitter-bootstrap, modal-dialog, django-crispy-forms

这个问题有很多动人的部分，但是如果您对其中的任何部分有任何见解，将不胜感激。

我想建立一个符合人们期望的反馈表。当用户点击页面右下角的反馈按钮时，它会启动一个引导模式。modal 有一个 django 清晰的表单，当按下提交按钮时提交或返回无效的字段。

首先，我有我的反馈按钮：

```
{% load crispy_forms_tags %}

.feedback-button {
    position: fixed;
    bottom: 0;
    right: 30px;
}

<div class='feedback-button'>
    <a class="btn btn-info" href="#feedbackModal" data-toggle="modal" title="Leave feedback" target="_blank">
        <i class="icon-comment icon-white"></i>
        Leave feedback
    </a>
</div>
<div class="modal hide" id="feedbackModal" tabindex="-1" role="dialog" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3 id="feedbackModalLabel">Contact Form</h3>
    </div>
    <div class="modal-body">
        {% crispy feedback_form feedback_form.helper %}
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary">Submit</button>
    </div>
</div> 
```

接下来，我有我的表格：

```
class Feedback(models.Model):
    creation_date = models.DateTimeField("Creation Date", default=datetime.now)
    topic = models.CharField("Topic", choices = TOPIC_CHOICES, max_length=50)
    subject = models.CharField("Subject", max_length=100)
    message = models.TextField("Message", blank=True)
    sender = models.CharField("Sender", max_length=50, blank=True, null=True)

    def __unicode__(self):
        return "%s - %s" % (self.subject, self.creation_date)

    class Meta:
            ordering = ["creation_date"]
        verbose_name = "Feedback"
        verbose_name_plural = "Feedback"

class Crispy_ContactForm(forms.ModelForm):

    def __init__(self, *args, **kwargs):
        self.helper = FormHelper()
        self.helper.layout = Layout(
            Fieldset(
                Field('topic', placeholder='Topic', css_class='input-medium'),
                Field('subject', placeholder='Subject', css_class='input-xlarge'),
                Field('message', placeholder='Message', rows='5', css_class='input-xlarge'),
                Field('sender', placeholder='Sender', css_class='input-xlarge'),
            ),
        )
        self.helper.form_id = 'id-Crispy_ContactForm'
        self.helper.form_method = 'post'

        super(Crispy_ContactForm, self).__init__(*args, **kwargs)

    class Meta:
        model = Feedback
        exclude = ['creation_date'] 
```

我试图省略脆表单中的图例，因为如果我包含它，模态似乎有两个表单标题。但是在清晰的表单布局中省略图例会导致字段出现乱序。

所以我有几个问题：

1.  总的来说，我是否以正确的方式去做这件事？
2.  如果我将模式的提交按钮连接到 AJAX，我该如何检查表单的错误？
3.  有没有更好的方法在引导模式中显示酥脆的表格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T13:29:24.683

我[在此页面上找到了部分解决方案](http://paltman.com/2012/08/23/twitter-bootstrap-and-ajax/)。在我的基本模板中，我创建了按钮和表单：

```
<div class='feedback-button'><a class="btn btn-info" href="#feedbackModal" data-toggle="modal" title="Leave feedback" target="_blank"><i class="icon-comment icon-white"></i> Leave feedback</a></div>
{% include "_feedback_form.html" with feedback_form=feedback_form %} 
```

然后我创建了两个反馈表

```
<div class="modal hide" id="feedbackModal" tabindex="-1" role="dialog" aria-labelledby="feedbackModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h3 id="feedbackModalLabel">Contact Form</h3>
    </div>
    {% include "_feedback_form_two.html" with feedback_form=feedback_form %}
</div> 
```

和

{% 加载crispy_forms_tags %}

```
<form action="{% url feedback %}" method="post" id="id-Crispy_ContactForm" class="form ajax" data-replace="#id-Crispy_ContactForm">
    <div class="modal-body">
    {% crispy feedback_form %}  
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <input type="submit" name="submit_feedback" value="Submit" class="btn btn-primary" id="submit-id-submit_feedback" />
    </div>
</form> 
```

我将反馈表分成两份，因为我从上述链接中利用的 bootstrap-ajax.js 文件替换了一个模板中的 html。如果我使用组合反馈表，它将具有 class="modal hide"。我需要它只有 class="modal" 这样如果表单刷新错误，模态不会消失。

在我看来，我有

```
@login_required
def feedback_ajax(request):
    feedback_form = Crispy_ContactForm(request.POST)
    dismiss_modal = False
    if feedback_form.is_valid():
        message = feedback_form.save()
        feedback_form = Crispy_ContactForm()
        dismiss_modal = True
    data = {
        "html": render_to_string("_feedback_form_two.html", {
            "feedback_form": feedback_form
        }, context_instance=RequestContext(request)),
        "dismiss_modal": dismiss_modal
    }
    return HttpResponse(json.dumps(data), mimetype="application/json") 
```

然后在 bootstrap-ajax.js 文件中（同样来自上面的链接），我做了一些改动。在 processData 函数中，我定义了：

```
var $el_parent = $el.parent(); 
```

我加了

```
if (data.dismiss_modal) {
    var msg = '<div class="alert alert-success" id="' + $(replace_selector).attr('id') + '">Feedback Submitted</div>'
    $(replace_selector).replaceWith(msg);
    $el_parent.modal('hide');
    $(replace_selector).replaceWith(data.html);
} 
```

这还没有完全起作用，因为成功消息会立即随模态消失。我希望模态显示消息并在 3 秒后消失。还没有弄清楚这一点，但它现在工作得很好。

我仍在修补，但这解决了我的大部分问题：

它使用 AJAX 提交数据，并在需要时返回错误检查。表单在模态中显示得相当好。

我还有几个问题。我需要找到一种方法来抑制以脆皮形式显示的图例，并且我需要找到一种方法来显示模态脆皮形式，并且不会干扰网站其他地方出现的另一种脆皮形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T19:02:01.673

我在相关问题上回答了与此类似的问题。

[https://stackoverflow.com/a/12905016/1406860](https://stackoverflow.com/a/12905016/1406860)

除了返回错误之外，这将为您提供一切。

我建议进行验证并在反馈的字典中创建一个 'errors': 'List of questions' 条目，并根据是否关闭模式（因为没有错误）在 AJAX 成功中检查这一点（因为没有错误）或适当地显示错误。

京东

# node.js - 在哪里使用 Neo4j

> ID：12936273
> 
> 赞同：4
> 
> 时间：2012-10-17T14:10:06.367
> 
> 标签：node.js, neo4j, graph-databases

我实际上是在尝试学习新事物...

我使用 SQL 很长时间，使用 MySQL 和最近发现的面向文档的数据库。

我遇到了图形数据库和 Neo4j 并想通过 NodeJS 尝试它，但我真的不明白这一点。

我应该将 Neo4j 与另一个数据库结合使用吗？就像将我的数据存储到 MySQL 和 Neo4j 中的关系一样？

或者我可以使用 Neo4j 来存储数据（比如帖子）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:14:14.500

Neo4j 通常用作主数据库，请参阅[https://github.com/thingdom/node-neo4j](https://github.com/thingdom/node-neo4j)以获取 node.js 驱动程序。此外，根据您的用例，您可以在不同的场景中将它与 MySQL 一起使用，以处理在 MySQL 中需要很长时间的复杂查询，例如建议和其他路径查询，请参阅[http://docs.neo4j.org/chunked/snapshot/data -modeling-examples.html](http://docs.neo4j.org/chunked/snapshot/data-modeling-examples.html)获取一些有趣的起始示例。

/彼得

# python - Reddit API 和投票。不接受 modhash/cookie。.error.USER_REQUIRED

> ID：12936274
> 
> 赞同：2
> 
> 时间：2012-10-17T14:10:07.177
> 
> 标签：python, api, reddit

我正在尝试让投票 API 正常工作，但我收到错误 .error.USER_REQUIRED。不知道为什么，但我认为我必须以错误的方式发送 modhash 或会话 cookie，因为登录正常

我的代码看起来像这样：

```
UP = {'user': username, 'passwd': password, 'api_type': 'json',}

client = requests.session()

r = client.post('http://www.reddit.com/api/login', data=UP)

j = json.loads(r.text)

mymodhash = j['json']['data']['modhash']

url = 'http://www.reddit.com/api/vote/.json'
postdata = {'id': thing, 'dir': newdir, 'uh': mymodhash}
vote = client.post(url, data=json.dumps(newdata)) 
```

错误：

```
{"jquery": [[0, 1, "refresh", []], [0, 2, "attr", "find"], [2, 3, "call", [".error.USER_REQUIRED"]], [3, 4, "attr", "show"], [4, 5, "call", []], [5, 6, "attr", "text"], [6, 7, "call", ["please login to do that"]], [7, 8, "attr", "end"], [8, 9, "call", []]]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T16:11:52.627

要登录，您*应该*发布到`ssl.reddit.com`，这样您就不会以纯文本形式发布您的凭据。此外，您应该设置一个用户代理。

以下是对您的 /r/redditdev 提交进行投票的工作示例。

```
import requests
# Login                                                                                                
client = requests.session(headers={'User-Agent': 'Requests test'})
data = {'user': 'USERNAME', 'passwd': 'PASSWORD', 'api_type': 'json'}
r = client.post('https://ssl.reddit.com/api/login', data=data)
modhash = r.json['json']['data']['modhash']

# Vote                                                                                                 
data = {'id': 't3_11mr32', 'dir': '1', 'uh': modhash, 'api_type': 'json'}
r = client.post('http://www.reddit.com/api/vote', data=data)
print r.status_code  # Should be 200                                                                   
print r.json  # Should be {} 
```

另外，除非你真的对 reddit 的 API 如何在幕后工作感兴趣，否则我建议你使用[PRAW](https://github.com/praw-dev/praw/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:24:18.243

您可以将会话对象与`with`语句一起使用。

```
import requests

UP = {'user': username, 'passwd': password, 'api_type': 'json'}
url_prefix = "http://www.reddit.com"
with requests.session() as client:
    client.post(url_prefix + '/login', data=UP)

    <...something else what you want...> 
```

# ruby-on-rails-3 - Rails 3：通过电子邮件裁剪 TLD 的 GET 请求

> ID：12936284
> 
> 赞同：0
> 
> 时间：2012-10-17T14:10:44.340
> 
> 标签：ruby-on-rails-3, email, parameters, get, tld

我正在尝试使用控制器和操作来进行简单的检查，以查看具有该电子邮件地址的用户帐户是否存在。

控制器的动作如下所示：

```
def checkEmail
    email = params["email"]
    if Account.find_by_email(email).blank?
      render :inline=>"true"
    else
      render :inline=>"false"
    end
  end 
```

为了测试这个动作，我可以去：

```
http://localhost:3000/home/checkEmail/email@website.com 
```

当我这样做时，我可以在 Ruby 控制台中看到正在查询以下内容：

```
Parameters: {"email"=>"email@website"}
  Account Load (0.0ms)  SELECT `accounts`.* FROM `accounts` WHERE `accounts`.`email` = 'email@website' LIMIT 1 
```

您可以看到电子邮件地址的 TLD 已被裁剪掉。

但是，当我去：

```
http://localhost:3000/home/checkEmail/email@website.co.uk 
```

我收到路由错误：

```
No route matches [GET] "/home/checkEmail/email@website.co.uk" 
```

我的 routes.rb 文件如下所示：

```
Gallery::Application.routes.draw do

  #Match home URL
  match 'home(/:file)' => "home#index"
  match 'home/checkUser/:username' => "home#checkUser"
  match 'home/checkEmail/:email' => "home#checkEmail"

  root :to=> "home#index"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:24:47.113

是的，Rails 中的默认行为是将路由中的点 (.) 视为格式说明符，而不是参数的一部分。为了匹配点作为参数的一部分，请像这样指定路由：

```
match "/home/checkEmail/:email" => "home#checkEmail", :constraints => { :email=> /[^\/]*/ } 
```

这是描述问题和修复的帖子： http: [//coding-journal.com/rails-3-routing-parameters-with-dots/](http://coding-journal.com/rails-3-routing-parameters-with-dots/)

# asp.net-mvc-3 - 未显示所需属性

> ID：12936286
> 
> 赞同：0
> 
> 时间：2012-10-17T14:10:51.787
> 
> 标签：asp.net-mvc-3

```
Public Class Duration 
{
  [Required]
  Public DurationUnit Unit
  [Required]
  Public int Length
}

Public Class Employee
{
  [RequiredAttribute]
  public virtual Duration NotificationLeadTime { get; set; }
} 
```

字段*`Unit`*和*`Length`*未提供时以红色突出显示，但未显示错误消息。

我也尝试给予`[Required(ErrorMessage="sadfdsf")]`，但这也行不通。我也尝试过继承类，`IValidatableObject`但这也没有用。

如何显示错误信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:18:32.543

您应该使用属性，而不是字段：

```
public class Duration 
{
    [Required]
    public DurationUnit Unit { get; set; }

    [Required]
    public int Length { get; set; }
} 
```

为了显示相应的错误消息，请使用`Html.ValidationMessageFor`帮助程序。

例如：

```
@Html.EditorFor(x => x.NotificationLeadTime.Unit)
@Html.ValidationMessageFor(x => x.NotificationLeadTime.Unit) 
```

顺便说一句，`int`用`[Required]`属性来装饰一个不可为空的类型并没有什么意义，因为这些类型总是有一个默认值。您应该改为将其设为可为空的整数。如果是枚举，则相同的注释代表`DurationUnit`属性。`DurationUnit`

# android - SoundPool 声音只停止一次？

> ID：12936294
> 
> 赞同：2
> 
> 时间：2012-10-17T14:11:16.803
> 
> 标签：android, soundpool

我有一个声音类：

```
 package dubpad.brendan;

  import android.media.SoundPool;

    public class Sound {
   SoundPool soundPool;
    int soundID;

    public Sound(SoundPool soundPool, int soundID) {
        this.soundPool = soundPool;
        this.soundID = soundID;
    }

    public void play(float volume) {
        soundPool.play(soundID, volume, volume, 0, -1, 1);
    }

    public void stop(int soundID){
        soundPool.stop(soundID);
    }

    public void dispose() {
        soundPool.unload(soundID);
    }

    } 
```

我有一个扩展按钮的活动：

```
package dubpad.brendan;

import android.content.Context;
import android.media.AudioManager;
import android.media.SoundPool;
import android.util.AttributeSet;

import android.view.MotionEvent;
import android.widget.Button;

public class TestButton extends Button {
SoundPool soundPool = new SoundPool(1, AudioManager.STREAM_MUSIC, 0);
int soundID = soundPool.load(getContext(), R.raw.dub1, 0);
Sound sound = new Sound(soundPool, soundID);

public TestButton(final Context context, final AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
}

@Override
public boolean onTouchEvent(final MotionEvent event) {
  if(event.getAction()==MotionEvent.ACTION_DOWN){
sound.play(1);

 } 

if(event.getAction()==MotionEvent.ACTION_UP){
sound.stop(soundID);
}

    return super.onTouchEvent(event);
}

 } 
```

在第一个动作向下播放声音，在第一个动作向上声音暂停。但是在第一个动作之后的每一个动作都不会暂停声音。简单来说，暂停只有效一次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:34:25.197

===EDIT===（我认为我原来的答案是错误的，改变它）

您需要更改 Sound 类以从播放中返回 streamId：

```
public int play(float volume) {
  return soundPool.play(soundID, volume, volume, 0, -1, 1);
} 
```

然后您可以将此值存储在 TestButton 中：

```
if(event.getAction()==MotionEvent.ACTION_DOWN){
  mStreamId = sound.play(1);
} 
```

然后使用 mStreamId 停止声音：

```
if(event.getAction()==MotionEvent.ACTION_UP){
   sound.stop(mStreamId);
} 
```

这里的关键是您要调用`stop`，`streamId`而不是`soundId`。soundId 指的是特定的声音资源，但 streamId 指的是声音播放的单个实例。因此，如果您播放相同的声音 3 次，您将拥有一个 soundId 和三个 streamId。

# excel - 如何从 Excel 单元格中获取非 ASCII 字符串并将它们放入具有正确编码的文本文件（JSON 格式）中？

> ID：12936295
> 
> 赞同：0
> 
> 时间：2012-10-17T14:11:17.797
> 
> 标签：excel, vba, unicode

我们正在为 Excel 文件编写一个非常基本的宏，它从单元格中获取值并将它们放入 JSON 格式的文本文件中。我们正在使用该`Range`函数来提取单元格值，如下所示：

```
Print #iFile, "          ""title"": """ & Range("AP" & cell.Row).Value & """" 
```

我确信这不是最漂亮或最有效的方法，但它似乎对我们的目的有效（老实说，我们手头没有任何人实际上是 VBA 开发人员......）。但是，问题是当我们遇到上面的 VBA 代码无法识别的外来字符（拉丁语、日语等）时。

我们想要做的不仅是从单元格中提取字符串，无论那里有什么类型的字符（ASCII 或其他），并将它们放入文本文件中，对字符串值进行任何必要的编码，以便文件将仍然包含有效的 JSON。

对此问题的任何帮助将不胜感激，因为这是一个远离我舒适区的主题（前端 Web 开发）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T05:48:05.833

这应该让你朝着正确的方向前进

```
Public Sub SaveUnicodeCharacterInTextFile()
' Declare a FileSystemObject.
Dim fso As FileSystemObject
' Create a FileSystemObject.
Set fso = New FileSystemObject
' Declare a TextStream.
Dim stream As TextStream
' windows path name
wbPath = ActiveWorkbook.Path
' name the output file and path to save it to - same directory as the workbook
outFile = wbPath & "\outputfile.txt"
' Create a TextStream. Overwrite = true Unicode = True
Set stream = fso.CreateTextFile(outFile, True, True)
'Put a value in the stream - in this case we are simly pulling the value out of one cell
'You can certainly iterate through the worksheet
stream.Write (Range("A1"))
'close the stream
stream.Close
End Sub 
```

# asp.net - Silverlight 初始化错误 2110 Internet Explorer

> ID：12936296
> 
> 赞同：8
> 
> 时间：2012-10-17T14:11:21.047
> 
> 标签：asp.net, silverlight, internet-explorer

我们开发了一个 Silverlight 应用程序，我们刚刚将其最新版本部署到我们的客户。

问题是我们的一些客户在尝试访问 Internet Explorer 中的应用程序时遇到错误。该应用程序在 Google Chrome 中加载良好。

该错误最初表现为显示 Silverlight 加载动画，达到 100% 并消失，留下白页或仅停留在 100%。

启用 JavaScript 调试后，会出现一个错误对话框，通知用户以下内容：

```
Line: 62
Error: Unhandled Error in Silverlight Application
Code: 2110   
Category: InitializeError      
Message: 2110 An error has occurred. 
```

我们没有比这更进一步的了。任何人都可以阐明这个问题吗？

非常感谢，

马丁。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-27T08:24:14.170

I am very late, but since I could not find the answer that eventually solve the issue for me I am posting here for others :

In my case, the answer was to set back the compilation platform to "any CPU" I got the 2110 error in x86 and it loaded properly using "any CPU".

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T10:03:15.737

以我的经验，这几乎总是依赖关系的问题。

为了证明是这样，创建一个新的 Silverlight 项目并包含您在现有项目中的所有引用，然后查看是否出现白屏死机。

如果您这样做，请尝试从您的测试 SL 项目中一次删除一个引用，直到您得到一些有效的东西。

高温高压

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T15:06:30.900

导致此错误的原因有很多。它可能来自您的代码或 IE 本身。您能否要求用户执行以下操作：

1.  尝试禁用 IE9 兼容性视图。（按 F12）
2.  清除 IE 缓存，然后在访问网站之前关闭并重新打开它。

如果它们都不起作用，则应检查 xaml 代码或将 Silverlight 进程附加到调试器并调试代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-16T12:38:11.177

我有同样的问题，但是在 Firefox x64 中，当我在 Silverlight csproj 中时：

```
<Reference Include="mscorlib">
    <Private>True</Private>
</Reference> 
```

当我将其更改为：

```
<Reference Include="mscorlib" /> 
```

一切顺利。

# regex - 非英文字符的不区分大小写的正则表达式

> ID：12936299
> 
> 赞同：2
> 
> 时间：2012-10-17T14:11:29.407
> 
> 标签：regex, perl, utf-8

我需要对包含非英语字符（西班牙语、法语、德语和俄语）的文本执行正则表达式匹配。

我希望匹配忽略大小写，所以对于英文字符，我只会使用`/i`修饰符，但这不适用于像**übermäßig**这样的词。

编写同时匹配 übermäßig 和 ÜBERMÄßig 的正则表达式的最简单方法是什么？是否可以使用相同的方法将大写的非英文字母转换为 Perl 中的小写字母？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:08:17.237

它工作得很好

```
$ perl -E'use utf8; say "ÜBERMÄẞIG" =~ /^übermäßig\z/i ? "match" : "no match"'
match

$ perl -E'use utf8; say "ÜBERMÄSSIG" =~ /^übermäßig\z/i ? "match" : "no match"'
match 
```

（`use utf8;`说源代码是使用 UTF-8 编码的。脚本中不可能有这些字符。）

我怀疑是编码问题，这意味着你认为你给了 Perl “ß”，而实际上你没有。也可能是您正在使用无法正确处理多字符折叠的旧版 Perl。一般来说，它可以帮助使用`/u`，但它不应该对这个例子产生影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:18:58.083

如果字符串使用 Perl 的内部编码，该`/i`修饰符可以很好地工作。

例如，这会打印“yes”：

```
perl -le 'use utf8; print "yes" if "ÜBERMäßig" =~ /überMÄßiG/i' 
```

" `use utf8`" 告诉 Perl 我的源代码是用 UTF-8 编码的，因此 Perl 将我源代码中的所有文字字符串从 UTF-8 解码为其内部编码。这个例子没有`use utf8`.

如果您的字符串来自其他地方，那么您可能需要申请[`Encode::decode`](http://perldoc.perl.org/Encode.html)- 或告诉您的来源生成正确解码的字符串（例如，大多数`DBI`驱动程序都可能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:16:22.393

[这个对我有用。](http://codepad.org/YWfiM5hY)你需要`use utf8;`，也许？

[（免责声明：我不知道 Perl。）]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T14:15:53.277

如果您[在 Perl 脚本中将语言环境设置为适当的值](http://perldoc.perl.org/perllocale.html)，那么`/i`修饰符将适用于非英语字符——其他功能（如单词边界的正则表达式匹配和`uc`and`lc`函数）也适用。

请注意，如果您需要处理多个外来字符集，链接的文档将向您展示如何根据需要在脚本中切换语言环境，使用[`setlocale()`](http://perldoc.perl.org/perllocale.html#The-setlocale-function).

**编辑：**我应该提到这种方法在大多数情况下已被弃用。事情应该只适用于 UTF-8。但有时它仍然有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:20:12.980

```
use locale;
use POSIX qw(locale_h);
setlocale (LC_ALL, $locale{German}) or die "failed to load locale!"; 
```

# postgresql - 从记录中检索值

> ID：12936300
> 
> 赞同：2
> 
> 时间：2012-10-17T14:11:33.293
> 
> 标签：postgresql, plpgsql

在 plpgsql 函数中，我有一个记录类型的变量：

> my_rec 记录；

该记录包含任意表中的一行，因此在执行之前我不知道列。但是，我确实有至少一个可用作 varchar 的列的名称。

问题是：如何从 my_rec 中检索给定列的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T22:40:46.800

用于在函数中使用`hstore`带有`record`动态列的 s `PL/PgSQL`：

```
CREATE EXTENSION hstore;

CREATE OR REPLACE FUNCTION test_fn(col_name text) RETURNS text AS $$
DECLARE 
  input_row record;
  col_value text;
BEGIN
  SELECT INTO input_row 
    * 
  FROM ( VALUES ('a','b','c',1) ) AS dummyrow(col1,col2,col3,intcol);

  SELECT INTO col_value
    hstore(input_row) -> col_name;

  RETURN col_value;
END;
$$ LANGUAGE 'plpgsql'; 
```

`hstore`是一个扩展，但它是自 8.3 以来与 PostgreSQL 捆绑在一起的扩展，并且`CREATE EXTENSION`自 9.1 起就可以使用它进行安装。从 8.4 或 9.0 之类的版本开始支持记录到 hstore 的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:24:16.197

我不知道在 plpgsql 中执行此操作的方法。我为您做了一些测试，并尝试使“EXECUTE SELECT”解决方案起作用，例如：

```
 EXECUTE 'select $1.' || quote_ident(the_param) USING my_rec INTO my_var; 
```

这对我不起作用，我得到：

```
 could not identify column "{{param_value here}}" in record data type 
```

[这](http://archives.postgresql.org/pgsql-general/2006-09/msg01250.php)是几年前的一个非常相似的问题，说 plpgsql 不可能。根据它的建议，似乎应该可以使用其他一些语言。引用汤姆·莱恩的回答：

> 在 plpgsql 中没有办法做到这一点。您可以在其他 PL（例如 plperl、pltcl）中执行此操作，因为它们的类型不如 plpgsql 强。

# visual-studio-2010 - 在 Visual Studio 2010 中调试 exe

> ID：12936303
> 
> 赞同：0
> 
> 时间：2012-10-17T14:11:54.253
> 
> 标签：visual-studio-2010, debugging

有没有办法使用Visual Studio 2010通过shift+双击运行exe来调试外部exe。通常，要在特殊模式下运行应用程序，我们按下 shift 并双击 exe，但我有一个在启动时发生的错误，我想我需要添加一个命令行参数以使其进入该模式。我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:21:12.563

所以基本上你想在进程开始时附加调试器。这应该会有所帮助。来源[http://blogs.msdn.com/b/greggm/archive/2005/02/21/377663.aspx](http://blogs.msdn.com/b/greggm/archive/2005/02/21/377663.aspx)

*   运行 regedit.exe
*   转到 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image 文件执行选项
*   为您的 exe 创建一个新密钥（例如：foo.exe）
*   在您的 exe 下创建一个新的字符串值。字符串值的名称是'Debugger'，值是'vsjitdebugger.exe'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:15:13.823

如果我对此了解得足够多，您想调试一个不是由 VS 启动的程序。在 vs pro+ 中，您可以选择“调试”，然后选择“附加到进程”，这样您就可以启动您的应用程序，然后可以附加到它。

# mfc - 有人可以向我解释一下 CDC::SelectObject 吗？

> ID：12936312
> 
> 赞同：1
> 
> 时间：2012-10-17T14:12:25.117
> 
> 标签：mfc

[http://msdn.microsoft.com/en-us/library/sa8ahz7h(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/sa8ahz7h(v=vs.80).aspx)

```
//Border
        CPen pen;
        pen.CreatePen(PS_DASH, 20, RGB(0, 0, 0));
        CPen* penOld = dc.SelectObject(&pen);

        dc.Rectangle(rect);
        dc.FillRect(rect, &brush); 
```

这段代码是如何工作的？它绘制一个矩形，然后在它周围画一个边框。我只是无法理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T19:12:41.990

当您要求设备上下文绘制一个矩形时，它将使用当前的`Pen`.

您可以使用该方法设置当前`Pen`、、、`Brush`剪辑区域或其他任何内容。`SelectObject()`您基本上是在说“从现在开始使用这支笔”。

`SelectObject()`还返回它之前使用的项目，这样它就不会丢失和泄漏内存，如果你愿意，你可以稍后放回去。这就是为什么`penOld`要保存到代码中的变量中。稍后可能会再次选择它。

```
CPen pen;                                  //declare a new Pen object
pen.CreatePen(PS_DASH, 20, RGB(0, 0, 0));  //Create the GDI Pen, dashed, 20 pixels wide, black.
CPen* penOld = dc.SelectObject(&pen);      //Tell the DC to use this pen from now on.

dc.Rectangle(rect);                        //Draw a rectangle (using the current pen)
dc.FillRect(rect, &brush);                 //Fill a rectangle (using the current brush) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T16:59:35.757

它创建一支笔，将其选择到 DC，然后指示 DC 使用笔（20 像素宽）在指定坐标处绘制一个矩形。然后它用刷子填充该矩形的内部。

# asp.net-mvc - 如何确保我的自定义 ClaimsPrincipal 在 ASP.NET MVC 4 中保持不变

> ID：12936315
> 
> 赞同：0
> 
> 时间：2012-10-17T14:12:34.723
> 
> 标签：asp.net-mvc, security, asp.net-web-api, wif, .net-4.5

我正在创建一个自定义***ClaimsPrincipal ，它使用自定义******AuthenticationManager***具有附加声明。似乎在 ASP.NET 4.5 中***AuthenticationManager***不会自动调用，您必须手动调用它。***我在PostAuthenticateRequest***中看到了建议您执行此操作的帖子。我的代码在 Global.asax 中如下所示：

```
protected void Application_OnPostAuthenticateRequest(object sender, EventArgs e)
{
    System.Web.HttpContext.Current.User =
        FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager.Authenticate("none",
            System.Web.HttpContext.Current.User as ClaimsPrincipal);
} 
```

我正在使用带有 cookie 的表单身份验证。当 PostAuthenticateRequest 被触发时，当前主体被正确设置。问题是当下一个请求进入 ASP.NET Web API 时，自定义声明会丢失。我在单页应用程序 (SPA) 中使用 Web API 处理 AJAX 请求。我怀疑当前 ClaimsPrincipal 中的内容被 cookie 中的内容覆盖，但我不确定。我没有使用继承的 ClaimsPrincipal 来对自定义声明进行类型安全的检索。我只是在添加新的声明，这些声明随后在过程中的某个地方丢失了。设置自定义 ClaimsPrincipal 的正确方法是什么，以便额外的索赔不会在请求之间丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:16:28.457

这是我想出的解决方案。首先，我使用了 FormsAuthentication_OnAuthenticate 事件而不是 Application_OnPostAuthenticateRequest 事件。我获取 cookie 以检索经过身份验证的用户名，并使用我要添加的声明构建一个新的声明主体。我没有将角色添加为声明，因为系统稍后会在身份验证过程中添加它们并最终复制它们。这允许我向主体添加自定义声明，以便将来在应用程序中进行处理。

```
public void FormsAuthentication_OnAuthenticate(object sender, FormsAuthenticationEventArgs args)
{
    if (FormsAuthentication.CookiesSupported)
    {
        if (Request.Cookies[FormsAuthentication.FormsCookieName] != null)
        {
            try
            {
                FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(
                  Request.Cookies[FormsAuthentication.FormsCookieName].Value);

                SaClaimsSecurity security = new SaClaimsSecurity();
                //Do not add roles here because the security framework adds them
               //somewhere else in the chain and will duplicate roles
               ClaimsPrincipal principal = security.CreateClaimsPrincipalWithoutRoles(ticket.Name);
                args.User = principal;
            }
            catch (Exception e)
            {
                // Decrypt method failed.
            }
        }
    }
    else
    {
       throw new HttpException("Cookieless Forms Authentication is not " +
                                    "supported for this application.");
    }
} 
```

# c# - 使用填充和字符串

> ID：12936317
> 
> 赞同：0
> 
> 时间：2012-10-17T14:12:35.583
> 
> 标签：c#

我目前正在使用 C# 中的填充。我在多行文本框中显示结果。问题是这条线`string result1 = string.Format(format, berries + " ");`给了我错误`Index (zero based) must be greater than or equal to zero and less than the size of the argument list`。我不知道如何解决这个问题。如何在中间填充均匀的情况下显示结果？

**代码**

```
 namespace farm
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            public abstract class Plants
            {
                protected string the_name;
                protected double num_stock;
                protected double price_peritem;
                protected double total_item_value;

                public Plants(string new_name, int new_stock, double new_price)
                {
                    the_name = new_name;
                    num_stock = new_stock;
                    price_peritem = new_price;
                }

                public override string ToString()
                {
                    return "";
                }

                public virtual double Get_Value()
                {
                    double s = 0;
                    return s;
                }

            }
     public class Berries : Plants
            {
                string variety;
                string months;

                public Berries(string new_name, int new_stock, double new_price, string new_variety, string new_months)
                    : base(new_name, new_stock, new_price)
                {
                    variety = new_variety;
                    months = new_months;

                    total_item_value = num_stock * price_peritem;

                    //total_value += total_item_value;

                }

                public override string ToString()
                {
                    string s = "Berries" + "     " + num_stock + "      " + the_name + "     " + price_peritem;
                    return s;
                }

                public override double Get_Value()
                {

                    total_item_value = num_stock * price_peritem;
                    return total_item_value;
                }
            }

    public void Report()
            {
                const string format = "{0,-25} {1,-25} {2,-25} {3,-25} {4,-25}";

                Berries berries1 = new Berries("BlueBerries", 12, 5, "AAA Early", "July");
                string result1 = string.Format(format, berries1 + " ");
                textBox1.AppendText(result1 + Environment.NewLine);

                Berries berries2 = new Berries("Strawberry", 12, 5, "FrostStar", "December");
                string result = string.Format(format, berries2 + " ");
                textBox1.AppendText(result + Environment.NewLine);

            }

    private void button1_Click(object sender, EventArgs e)
            {
                Report();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:15:29.657

问题是您的格式化字符串（格式）希望看到 5 个参数以便当前格式化，但您只提供一个输入（berries1 对象）。

看起来你需要做这样的事情。

```
const string format = "{0,-25} {1,-25} {2,-25}";
String.Format(format, berries1.num_stock, berries1.the_name, berries1.price_peritem); 
```

看看格式字符串现在需要 3 个参数，而 String.Format 传递了三个参数？

请注意（根据下面 ShellShock 的评论），您需要修改类中的`num_stock`,`the_name`和`price_peritem`属性的保护级别`Plants`才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:16:59.780

您正在使用以下格式：

```
"{0,-25} {1,-25} {2,-25} {3,-25} {4,-25}" 
```

这意味着将提供 5 个（或更多）参数`String.Format()`（但是您只传递 1 个（并且由于`+ " "`附加了它被转换为字符串。）

理想情况下，您的格式调用应如下所示：

```
String.Format(format, berries1.prop1, berries1.prop2,
                      berries1.prop3, berries1.prop4,
                      berries1.prop5); 
```

这将满足您提供的格式。或者，您可以覆盖对象的`ToString`方法`Berries`（但这意味着格式将由对象强制提供，而不是为`Report`方法的单一使用提供 - 不确定是否需要。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:22:03.763

您应该考虑对 Berries 进行重载`ToString()`，然后使用 构建整个 Berrie 值集`StringBuilder`。我认为最基础的 string.Format`StringBuilder`通过重载`ToString`() 使用`StringBuilder`它应该更清洁、更高效。

现在我有更多时间查看您的代码......我可以说我的最后一个答案不是。

你真正想做的是遵循数据封装。你在你的基础上覆盖`ToString()`，但你返回一个空字符串。更好的是在那里做你的基本格式，然后从每个孩子开始。我已经模糊地破解了我在说什么。代码如下

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public abstract class Plants
    {                                   
        private string the_name;
        private double num_stock;
        private double price_peritem;
        private double total_item_value;

        public string The_Name
        {
            get
            {
                return the_name;
            }
            protected set
            {
                the_name = value;
            }
        }

        public double Num_Stock
        {
            get
            {
                return num_stock;
            }
            protected set
            {
                num_stock = value;
            }
        }

        public double Price_PerItem
        {
            get
            {
                return price_peritem;
            }
            protected set
            {
                price_peritem = value;
            }
        }

        public double Total_Item_Value
        {
            get
            {
                return Num_Stock * Price_PerItem;
            }               
        }

        public Plants(string new_name, int new_stock, double new_price)
        {
            The_Name = new_name;
            Num_Stock = new_stock;
            Price_PerItem = new_price;
        }

        public override string ToString()
        {
            return string.Format("{0} {1,-25} {2,-25} {3,-25}", The_Name, Num_Stock, Price_PerItem, Total_Item_Value);
        }

        public virtual double Get_Value()
        {
            double s = 0;
            return s;
        }
    }

    public class Berries : Plants
    {
        private string variety;
        private string months;

        public string Variety
        {
            get
            {
                return variety;
            }
            protected set
            {
                variety = value;
            }
        }

        public string Months
        {
            get
            {
                return months;
            }
            protected set
            {
                months = value;
            }
        }

        public Berries(string new_name, int new_stock, double new_price, string new_variety, string new_months)
            : base(new_name, new_stock, new_price)
        {
            Variety = new_variety;
            Months = new_months;                
        }

        public override string ToString()
        {
            return string.Format(base.ToString() + " {0} {1}", Variety, Months);
        }

        //This is now replaced by simply using the TotalCost property
        //public override double Get_Value()
        //{
        //    return TotalCost;                
        //}
    }

    public void Report()
    {
        //const string format = "{0,-25} {1,-25} {2,-25} {3,-25} {4,-25}";

        Berries berries1 = new Berries("BlueBerries", 12, 5, "AAA Early", "July");
        //now you can modify the result1 string to 
        string result1 = berries1.ToString(); //string.Format(format, berries1 + " ");
        textBox1.AppendText(result1 + Environment.NewLine);

        Berries berries2 = new Berries("Strawberry", 12, 5, "FrostStar", "December");
        string result = berries1.ToString(); //string.Format(format, berries2 + " ");
        textBox1.AppendText(result + Environment.NewLine);

    }

    private void button1_Click(object sender, EventArgs e)
    {
        Report();
    }

} 
```

# java - 多个返回语句，可读性

> ID：12936318
> 
> 赞同：9
> 
> 时间：2012-10-17T14:12:37.400
> 
> 标签：java, readability

> **可能重复：**
> [一个函数应该只有一个返回语句吗？](https://stackoverflow.com/questions/36707/should-a-function-have-only-one-return-statement)

我的老师在我写的一些 java 代码上拿了分数（我仍然得到 A，这只是我在 java 课程中获得的第一个非 100% 的成绩）我不会和老师争论点，但我想从*实际*的程序员那里得到一些建议。这是有问题的代码：

```
private char byte2suit(byte val) {
    switch(val) {
        case 0: return 's';
        case 1: return 'c';
        case 2: return 'h';
        case 3: return 'd';
        }
    //fallback value
    return 'h';
    } 
```

在我看来，这比初始化返回值、在 case 中分配（并添加 break; 每行）然后返回值要清楚得多。当然，在其他人看到的代码中，我的观点并不是很强大，所以我想知道你们对 java（或 C/C++）中的多个 return 语句的看法，如果你确实使用多个 return 语句你是否比“if (this) return a; else return b;”更多地使用它？陈述？如果不使用多返回语句，能否给出一个真正令人信服的理由（不可读的代码不是原因，如果上面的代码是可读的，是我多返回编码实践的最大程度）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T14:14:56.050

一些学者认为，函数末尾应该只有一个 return 语句。他们认为多重 return 语句在某种程度上使代码不纯。

然而，大多数语言设计师和专业程序员不同意这种纯粹的观点。如果您的方法又长又复杂，则多个 return 语句*可能会令人困惑（但如果是这种情况，那么您会遇到比多个 return 语句更大的问题）。*但通常多个 return 语句可以使代码*更具*可读性。

您的代码很好，除了我要进行的一项更改：使用`default`.

```
switch(val) {
    case 0: return 's';
    case 1: return 'c';
    case 2: return 'h';
    case 3: return 'd';
    default: return 'h';
} 
```

# java - Javamail 权限被拒绝：构建后连接

> ID：12936319
> 
> 赞同：1
> 
> 时间：2012-10-17T14:12:39.210
> 
> 标签：java, netbeans, jakarta-mail, permission-denied

几天前我遇到了一个问题，我收到了 Permission denied: connect when using Javamail to send an email using our local mail server。作为参考，可以在这里找到：[JavaMail API to iMail -- java.net.SocketException: Permission denied: connect](https://stackoverflow.com/questions/12901475/javamail-api-to-imail-java-net-socketexception-permission-denied-connect)。解决方案是将“-Djava.net.preferIPv4Stack=true”添加到我项目的 VM 选项中。

在构建项目并尝试在 NetBeans 之外运行 .jar 文件后，我得到了相同的错误代码。该项目在 NetBeans IDE 内部按预期工作。

我在这里搜索了 Google 的问题，并阅读了一些 Javamail 常见问题解答。老实说，我真的不知道我在寻找什么，并且认为我只是错过了一些东西。

我使用的是 NetBeans 7.2、Java 7 和 Windows 7。我的项目的 dist 文件夹包含 .jar 文件，而 dist\lib 文件夹包含 mail.jar。

关于为什么我会再次收到该错误的任何想法？再次感谢您提供任何帮助/信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T20:09:46.697

你是如何运行你的程序的？

如果您使用“java -jar myprog.jar”运行它，请使用“java -Djava.net.preferIPv4Stack=tru -jar myprog.jar”。

如果您通过双击 jar 文件或类似文件来运行它，您可能需要在代码中设置属性，方法是添加 System.setProperty("java.net.preferIPv4Stack", "true");

# servlets - servlet过滤器doFilter方法的生命周期

> ID：12936320
> 
> 赞同：0
> 
> 时间：2012-10-17T14:12:39.530
> 
> 标签：servlets, http-headers, servlet-filters

调用后，我试图在响应对象中设置标头

```
chain.doFilter() 
```

但是，标题没有设置。调用chain.doFilter() 后，控制权是否会返回到doFilter() 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T18:40:57.230

> *但是，标题没有设置。*

如果响应已经提交（阅读：当响应的第一部分（包括所有标头）已经发送到客户端时；这是一个不归路），则可能会发生这种情况。有点理智的 servletcontainer 会`IllegalStateException`在任何尝试在已提交的响应上设置标头时抛出异常。这应该在服务器日志中可见。你读过它们吗？

* * *

> *调用chain.doFilter() 后，控制权是否会返回到doFilter() 方法？*

您可以通过放置断点或 sysout/logger 行轻松地自行检查。但是，是的，控件肯定会以通常的 Java 方式返回，并且将执行剩余的行，前提是`doFilter()`调用没有未捕获的异常。

* * *

回到您的具体功能要求，您需要重写代码，以便在提交响应*之前设置标头。*由于没有以任何方式详细说明具体的功能要求，因此无法在此答案中给出一些提示或启动示例。最直接的方法是在调用*之前*`doFilter()`设置标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T07:03:01.557

请求过滤器可以：

*   执行安全检查
*   重新格式化请求标头或正文
*   审计或日志请求

响应过滤器可以：

*   压缩响应流
*   附加或更改响应流
*   完全创建不同的响应

# scala - 从 sbt 任务或命令执行 sbt 命令

> ID：12936322
> 
> 赞同：2
> 
> 时间：2012-10-17T14:12:43.557
> 
> 标签：scala, sbt

从 sbt-idea 插件执行 gen-idea 命令后，我想在 ./idea/workspace.xml 中生成一些额外的东西。我要么需要修改 gen-idea 命令以在执行后附加我的代码，要么创建一个运行 gen-idea 命令的新命令。问题是如何做到这一点？

更一般地说，如何从 sbt 任务或命令执行命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T10:38:49.553

根据[这个讨论](https://groups.google.com/d/topic/simple-build-tool/BY3o3lWWnbU/discussion)，sbt 不可能达到 0.12.x。

一种可能的解决方法是定义别名：

```
alias genidea=; gen-idea; my-gen-stuff 
```

在[.sbtrc](https://github.com/harrah/xsbt/wiki/Best-Practices)文件中

# ruby-on-rails - 如何从 Rails 控制台执行模块中的方法？

> ID：12936325
> 
> 赞同：27
> 
> 时间：2012-10-17T14:12:51.480
> 
> 标签：ruby-on-rails, module

我在一个名为的文件中有一个模块，`my_mod.rb`声明如下：

```
module Reports
  module MyMod

    def mymethod
      ...
    end

  end
end 
```

我只想跑`mymethod`。这显然不是一个类方法，所以我不能像这样运行它：

```
Reports::MyMod.mymethod 
```

但是我希望有某种方法可以让解析器评估该方法，而不必经过一堆 module_eval 和 module_function 的东西。它应该比这更容易，不是吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-17T14:17:11.757

要从 rails 控制台运行它，您只需包含它：

```
> include Reports::MyMod
> mymethod 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:15:57.190

```
class A
  include Reports::MyMod
end

A.new.mymethod 
```

# shared-libraries - 在 Mac OSX 中加载和卸载共享库

> ID：12936327
> 
> 赞同：5
> 
> 时间：2012-10-17T14:12:58.757
> 
> 标签：shared-libraries

如果这个问题以前在这个论坛上被重复过，我很抱歉。我有一个问题，dylibs 的加载和卸载在 Mac 中没有按预期工作（尤其是卸载部分。）。问题是我是否有一个可执行文件，如果我加载一个共享库，比如 A.dylib，然后使用加载的共享库来加载一个库，比如 B.dylib。当我稍后尝试卸载库 B.dylib 时，没有返回错误代码（返回 int 值为 0 - 因为我使用常规 dlopen 和 dlclose 函数来加载和卸载库，0 表示卸载成功） ，但是当我检查以确保使用活动监视器或 lsof 时，b.dylib 仍在内存中。

现在我们正在为 windows、linux 和 mac 移植这段代码。Windows 和 Linux 按预期工作，但只有 mac 给我带来了问题。

我在 mac 开发人员库中阅读并发现：“在某些情况下，动态库永远不会被卸载：1）针对它的主要可执行链接，2）不支持卸载的 API（例如NSAddImage()) 用于加载它或其他一些依赖它的动态库，3) 动态库在 dyld 的共享缓存中。”

在我的情况下，我不属于前两种情况中的任何一种。我怀疑case3。
这是我的问题： 1\. 我能做些什么来确保我有案例 3？2\. 如果是，如何解决？3\. 如果不是，如何解决？4\. 为什么mac如此不同？

感谢您在这方面的任何帮助！

谢谢，扬

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T18:22:54.290

当您将共享库加载到可执行文件中时，该库导出的所有符号都是解析可执行文件所需符号的候选者，如果 DYLD 链接器绑定到意外符号，则导致库保持加载状态。您可以使用 nm 列出共享库中的符号，并且可以设置环境变量以启用动态链接器的调试输出（请参阅dyld 上的[此](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/dyld.1.html)手册页）。您需要设置 DYLD_PRINT_BINDINGS 环境变量。

最有可能的是，您需要将导出的符号限制为可执行文件使用的特定子集，以便仅绑定您打算使用的那些符号。这可以通过将所需符号放在文件中并通过 -exported_symbols_list 选项将其传递给链接器来完成。如果不这样做，您最终可能会在 dyloaded 库中绑定一个符号，并且它不会被卸载，因为它们需要解析可执行文件中的符号并且在调用 dlclose() 时不会卸载。

# c# - 客户端内的自托管服务线程

> ID：12936329
> 
> 赞同：0
> 
> 时间：2012-10-17T14:12:59.257
> 
> 标签：c#, web-services

我需要在我的客户端应用程序中托管一项服务，以将数据暴露给也嵌入在我的客户端中的 OEM 软件。

有哪些线程选项可用？目前我使用以下类似的东西：

```
var host = new ServiceHost(...);
var serviceThread = new System.Threading.Thread(host.Open);
serviceThread.Start(); 
```

我遇到的问题是在我调用 serviceThread.Start() 之后我想检查服务是否正在运行，但是服务需要不同的时间来启动或失败。

使用 Thread.Sleep(x) 似乎不正确。有哪些替代方案？

谢谢。

[编辑]

在尝试了 maralfol 建议后，我得到了一些奇怪的行为，我的主线程被劫持，直到服务超时。

代码：

```
host = new ServiceHost(typeof(XmlCacheService), new Uri(baseAddress));

host.AddServiceEndpoint(typeof(IXmlDataService), new WebHttpBinding(), string.Empty)
  .Behaviors.Add(new WebHttpBehavior());

try { xmlServiceHost.Open(); }
catch (AddressAccessDeniedException)
{
  CreateRegisterDashboardServiceFile();
  this.ShowUserInfoMessage("The dashboard service needs to be registered. Please contact support.");
}

[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerCall)]
public class XmlCacheService : IXmlDataService
{
}

[ServiceContract]
public interface IXmlDataService
{
  [WebInvoke(Method = "POST")]
  Stream GetXmlData(Stream messageBody);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:29:57.330

您可以使用 TPL 并等待任务完成以检查您的服务是否正在运行。

```
var task = Task.Factory.StartNew(() =>
                                  {
                                      _host = new ServiceHost(typeof (MyService));
                                      _host.Open();
                                  };
        task.Wait();
        CheckHostIsAvailable(); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:18:28.960

WaitHandle 呢？例如

```
 var host = new ServiceHost(...);
    var waitHandle = new ManualResetEvent(false);
    var serviceThread = new System.Threading.Thread(() =>
        {
            host.Open();
            waitHandle.Set();
        });
    serviceThread.Start();
    if( !waitHandle.WaitOne(MAX_TIME_TO_WAIT))
    {
        // not started...
    }
    else .. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:18:39.787

一种方法是[`ManualResetEvent`](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx)在线程之间使用 to 信号。（`Thread.Sleep`为了说明起见，在下面使用）。

```
class Program
{
    static ManualResetEvent signal = new ManualResetEvent(false);
    static void Main(string[] args)
    {
        Thread t = new Thread(_ => { Thread.Sleep(1500); Console.WriteLine("Signaling back"); signal.Set(); });
        t.Start();
        signal.WaitOne();
        Console.WriteLine("Signal received, done!");
        Console.Read();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:20:06.807

您的 WCF 主机已在单独的线程中运行。您可以为元数据创建端点以检查您的服务是否正在运行。你的合约实现中的断点呢？

```
class MyService
{
    var host = new ServiceHost(...);

    public MyClass()
    {
        host.Open();
    }
} 
```

当您引用 MyService 时，您的服务将运行并且您的主线程可以执行其他任务。

# c++ - 直到 WaitForSingleObject 返回的时间

> ID：12936332
> 
> 赞同：1
> 
> 时间：2012-10-17T14:13:03.080
> 
> 标签：c++, windows, waitforsingleobject

有没有办法知道从我调用 WaitForSingleObject 函数到它返回经过了多少时间？

或者知道的唯一方法是使用某种计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:17:03.217

如果您需要跟踪它，您将需要使用计时器。另一种选择（虽然你不会得到确切的时间，一个计时器会更好）是`WaitForSingleObject`用一个小的超时值调用。您可以检查返回码是否为`WAIT_TIMEOUT`. 如果是，则将您的时间计数增加超时值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:21:01.063

只需在调用之前存储当前时间`WaitForSingleObject()`。然后比较它返回的时间。

从[http://msdn.microsoft.com/en-us/library/windows/desktop/ms725473(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms725473(v=vs.85).aspx) - 选择一个函数来检索时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:22:01.983

调用前后的[GetTickCount() 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)注意 DWORD 环绕。

# python - 如何动态创建名称取自python目录内容的字典？

> ID：12936337
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:13:10.977
> 
> 标签：python

我有一个带有文件名的目录。我想为每个文件创建一个字典。我这样做：

```
files=glob.glob(*)
for f in files:
    f={} 
```

但我没有得到我想要的结果。即：在我的目录中，我有 aaa bbb ccc。执行我的程序后，我想要 3 个字典。第一个 aaa={} t 第二个 bbb={} 和第三个 ccc={}。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:15:36.287

你可能想创建一个字典来保存你所有的其他字典：

```
files = glob.glob('*')
d = {}
for f in files:
    d[f] = {} 
```

现在要访问与 关联的字典`file1`，您只需这样做 `file1_dict = d['file1']`，或者您可以直接引用该字典中的项目： `d['file1']['data1']`

# xna-4.0 - XNA 大坐标和浮点精度

> ID：12936342
> 
> 赞同：0
> 
> 时间：2012-10-17T14:13:33.260
> 
> 标签：xna-4.0, floating-point-precision

我在 Autocad 中以 .dwg 文件的形式在大坐标中创建了我的模型，例如（X = 528692.833，Y = -261.184，Z = 1.890）。当模型导出到 .Fbx 文件时，变形出现在 FBX 查看器中，同样的情况发生在带有转换后的 .Xnb 文件的 XNA 中。

我无法理解的是，为什么当模型在 XNA 框架中使用 World 矩阵围绕原点转移时问题仍然存在。问题与浮点精度有关吗？因为 XNA api 仅适用于浮点数。或者 .Xnb 文件有什么问题吗？

除了在 Autocad 中围绕原点移动模型之外，还有哪些可能的解决方法？

**编辑：**

我还意识到，如果使用简单的着色器而不是 BasicEffects，那么我就不会遇到这个问题。

下面是渲染模型的示例场景：

[http://imageshack.us/photo/my-images/15/distortion.png/](http://imageshack.us/photo/my-images/15/distortion.png/)

# jasper-reports - 忽略多选输入控件中的空值？

> ID：12936344
> 
> 赞同：1
> 
> 时间：2012-10-17T14:13:45.163
> 
> 标签：jasper-reports, jasperserver

我有一个包含几个输入控件的报告，这些输入控件用于填充另一个输入控件。

我的输入控件：

1.  **GPI** - 具有产品代码的多选输入控件。参数是一个集合。
2.  **NAME_LOOKUP** - 一个单值文本框，用户可以在其中键入产品名称。参数是一个字符串。
3.  **NDC - 根据****GPI**和**NAME_LOOKUP**中输入的内容获取值的药品代码列表。

填充**NDC**的查询具有以下*WHERE*子句：

```
 WHERE (
   REGEXP_LIKE(DESCRIPTION, $P{name_lookup}, 'i')
   OR REGEXP_LIKE(NDC, $P{name_lookup}, 'i')
       )
   OR ($X{IN, GPI, gpi}) 
```

它按照*`$X`*语法设计的方式工作——如果用户没有从列表中选择**GPI**值，我的**NDC**输入控件会显示所有药物代码。但是，我只想在实际从**GPI**输入控件中选择一个值时显示药物代码。

当我尝试

```
 WHERE (
   REGEXP_LIKE(DESCRIPTION, $P{name_lookup}, 'i')
   OR REGEXP_LIKE(NDC, $P{name_lookup}, 'i')
       )
   OR ($X{IN, GPI, gpi} AND $P{gpi} IS NOT NULL) 
```

*我在JasperReports 服务器*中为**NDC**输入控件获取了无效的列类型。

当我尝试

```
 WHERE (
   REGEXP_LIKE(DESCRIPTION, $P{name_lookup}, 'i')
   OR REGEXP_LIKE(NDC, $P{name_lookup}, 'i')
       )
   OR ($X{IN, GPI, gpi} AND $P!{gpi} IS NOT NULL) 
```

我收到一个缺少的表达式错误。

我可以做些什么来将**NDC**输入控件的结果限制为仅选定的**GPI**，而不是所有结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T11:23:28.677

我只是在遇到同样的问题时发现了这一点，我终于使用第二个参数来解决它，该参数包含列表的长度：

```
<parameter name="potentially_empty_list" class="java.util.Collection"/>
<parameter name="num_of_list_elements" class="java.lang.Integer" isForPrompting="false">
        <defaultValueExpression>
<![CDATA[$P{potentially_empty_list}.size()]]>
</defaultValueExpression>
</parameter> 
```

然后 SQL 查询将是：

```
[... select etc...]
WHERE $X{IN,mysql_column_name, ist}
AND $P{num_of_list_elements} > 0 
```

对于一个空列表，它将被发送到 mysql 为：

```
WHERE 0 = 0 #(that's how jasper parses $X{IN..} for an empty collection
AND 0 > 0   # don't match anything :) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T13:03:24.250

有一个有趣的替代方案，因为 $X{NOTIN, ...} 在空列表的情况下也计算为 0=0。

因此，您可以这样做：

```
($X{IN, cs.companyid, companyIds} 
  AND NOT 
  ($X{NOTIN, cs.companyid, companyIds})) 
```

# puppet - 木偶包含和变量范围

> ID：12936347
> 
> 赞同：2
> 
> 时间：2012-10-17T14:14:04.943
> 
> 标签：puppet

有人可以向我解释为什么会这样：

```
node 'puppetagent'{
    $my_role="proxmoxnode"
    include role_proxmoxnode
}

class role_proxmoxnode {
    include sshdconf
} 
```

这不会：

```
node 'puppetagent'{
    include role_proxmoxnode
}

class role_proxmoxnode {
    $my_role="proxmoxnode"
    include sshdconf
} 
```

“工作”是指 sshdconf 模块设置的 sshd_config.erb 文件将按预期找到 $my_role="proxmoxnode" 。“不起作用”是指模板抱怨“找不到'my_role'的价值”我使用puppet 3.0。

我遵循了[http://projects.puppetlabs.com/projects/1/wiki/Infrastructure_Design_Guidelines](http://projects.puppetlabs.com/projects/1/wiki/Infrastructure_Design_Guidelines)中关于角色的文档。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:26:05.493

在木偶 3.0 中。在 4 个地方查找不合格的变量：

1.  本地范围
2.  继承自基类
3.  节点级
4.  顶级范围

**顺便说一下，局部**范围将适用**于**类中定义的变量，而不是简单地包含它的类。

所以，在你的第一个例子中，我们去寻找：

1.  是本地的吗？不。
2.  它在基类中吗？不。
3.  它在节点中吗？是的。我们停下来。

在第二个例子中......

1.  是本地的吗？不。
2.  它在基类中吗？不。
3.  它在节点中吗？不。
4.  是否在顶级范围内？不，失败。

清除？

# c - 双指针内的值未正确更新 (C)

> ID：12936349
> 
> 赞同：0
> 
> 时间：2012-10-17T14:14:06.377
> 
> 标签：c, fgets, double-pointer

我有一个读取输入文件的函数，应该修改 char** 和 int* 的内容。功能如下：

```
void
input_parser(arguments* args, char** input, int* files) {
   char buffer[MAX];
   FILE *fr;
   fr = fopen(args->file,"r");
   if (fr == NULL) {
       printf("No correct input file was entered\n");
       exit(0);
   } 
   while(fgets(buffer,MAX,fr) != NULL) {
       input[*files] = strtok(buffer,"\n");
       (*files)++;
   }
   fclose(fr);
   return;
} 
```

我在主程序中定义了如下输入和文件：

```
char* input[25];
files = 0; 
```

我调用函数如下：

```
input_parser(args, input, &files); 
```

输入文件包含 3 行，如下所示：

```
output1.xml
output2.xml
output3.xml 
```

我注意到在 while 循环期间，“当前”值被正确读取，但存储在所有输入 [*] 中，导致：

```
input[0] = output3.xml
input[1] = output3.xml
input[2] = output3.xml 
```

如果有人知道这里出了什么问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:17:50.500

该函数将局部变量的地址存储`buffer`到数组中的每个元素`input`：您需要复制`strtok()`. 目前的代码是未定义的行为，因为`buffer`一旦`input_parser()`返回就超出范围，即使不是逻辑也不正确。

如果你有`strdup()`，你只需使用它：

```
input[*files] = strdup(strtok(buffer,"\n")); /* NULL check omitted. */ 
```

否则`malloc()`和`strcpy()`。记住何时不再需要`free()`的元素。`input`

初始化`input`以确定哪些元素指向有效字符串：

```
char* input[25] = { NULL }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:17:49.177

您最终将拥有 danging 指针，这些指针在缓冲区被释放后指向缓冲区内。

# php - 为什么 PHP base_convert 对同一个 MYSQL 函数给出不同的结果？

> ID：12936355
> 
> 赞同：2
> 
> 时间：2012-10-17T14:14:20.513
> 
> 标签：php, mysql

我整理了一个 PHP 函数，如下所示：

```
function keyword_hash($keyword) {
  return base_convert(substr(md5($keyword), -16), 16, 10);
} 
```

此函数的目的是生成可以存储在数据库中的数字哈希值，并将其用于查找（而不是尝试索引关键字列）。

MySQL中这个函数的等价物如下：

```
SELECT CONV(RIGHT(MD5('some keyword'), 16), 16, 10); 
```

我已经验证了 MD5 字符串是相同的，并且 substr() 与我在 MySQL 查询中从 RIGHT() 返回的值匹配。但是，当我运行 CONV() 时，我得到的值与从 base_convert() 生成的值不同。

例如，使用`keyword_hash("some keyword")`生成值 10923672322315740844。但是，使用`SELECT CONV(RIGHT(MD5('some keyword'), 16), 16, 10)`生成 10923672322315740475，这表明最后三个数字不同。

我在这里想念什么？他们不应该产生相同的价值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T17:55:54.363

我查看了 .php 的[PHP 手册](http://fr2.php.net/manual/en/function.base-convert.php)页面`base_convert()`。有以下**警告**：

> **由于与使用的内部“double”或“float”类型相关的属性， base_convert()**可能会丢失大数的精度。有关更多具体信息和限制，请参阅手册中的 [浮点数部分](http://ch2.php.net/manual/en/language.types.float.php)。

后来在[评论中有人](http://fr2.php.net/manual/en/function.base-convert.php#109660)已经找到了解决这个问题的方法（感谢@CraigSefton）：

```
function str_baseconvert($str, $frombase=10, $tobase=36) { 
    $str = trim($str); 
    if (intval($frombase) != 10) { 
        $len = strlen($str); 
        $q = 0; 
        for ($i=0; $i<$len; $i++) { 
            $r = base_convert($str[$i], $frombase, 10); 
            $q = bcadd(bcmul($q, $frombase), $r); 
        } 
    } 
    else $q = $str; 

    if (intval($tobase) != 10) { 
        $s = ''; 
        while (bccomp($q, '0', 0) > 0) { 
            $r = intval(bcmod($q, $tobase)); 
            $s = base_convert($r, 10, $tobase) . $s; 
            $q = bcdiv($q, $tobase, 0); 
        } 
    } 
    else $s = $q; 

    return $s; 
} 
```

此函数使用支持任意精度数学的[bc 数学](http://php.net/manual/en/book.bc.php)库，因为它使用字符串来存储数字而不是整数/浮点数等。

# python - OpenERP code throws exceptions when run in background

> ID：12936357
> 
> 赞同：2
> 
> 时间：2012-10-17T14:14:26.240
> 
> 标签：python, screen, locale, openerp, python-unicode

I don't know if this should be posted under serverfault or stackoverflow. I don't know if it's a locale problem on my server or if it's python or the OpenERP application that is acting up.

I have a OpenERP system and I have encountered a quite strange problem.

In the openERP modules there are some "print"-lines that various developers used for debugging the application.

Like these:

```
print "Value: %s" % variable 
```

and

```
 print "Value: " + str(variable) 
```

If I start OpenERP in a ordinary terminal it will run just fine in the foreground and print the debug log and the prints in the console. The application never gives me an exception.

**Now to the problem!**

Earlier I've started the application in a screen so that I could detach it and close my connection to the server while the application is till running.

The code does not throw any exception when run in a 'screen'

Instead of a screen I want to have init.d script. I've made this script:

```
#!/bin/sh

# Configuration variables for openerp
DAEMON="/opt/openerp-server-6.0.3/bin/openerp-server.py"
ARGS="--config=/opt/openerp-server-6.0.3/openerp-server.conf"
NAME="openerp"
USER="openerp"
DESC="openerp"
PIDFILE="/var/run/$NAME.pid"

# Startup alternatives
case "$1" in
        start)
                echo "Starting ${DESC}"
                start-stop-daemon --start --background --pidfile $PIDFILE --chuid $USER --make-pidfile --exec $DAEMON -- $ARGS
                ;;
        stop)
                echo "Stopping ${DESC}"
                start-stop-daemon --stop --quiet --pidfile /var/run/${NAME}.pid --oknodo
                echo "${NAME}."
                ;;
        *)
                echo "Usage: start|stop"
        ;;
esac 
```

The script works, it start and stops the server.

When I use the module that imports data from a excel file I get this exception. I also get the exception in other places in the code where it tries to print a string containing the swedish letters 'åäö'.

> UnicodeEncodeError: 'ascii' codec can't encode character u'\xe4' in position 3: ordinal not in range(128)

I thought it was something with the 'start-stop-daemon' command that changed the locale or somthing. So instead of forceing the application to the background with the argument '--background' I tried this:

```
start-stop-daemon --start --pidfile $PIDFILE --chuid $USER --make-pidfile --exec $DAEMON -- $ARGS &> /dev/null 
```

This solved the UnicodeEncodeError. All joy I thought. But!

Now I get a Input/Output error

```
IOError: [Errno 5] Input/output error 
```

And the code that generates this

```
print pay_order 
```

The 'pay_order' variable is a string that sometimes contain 'åäö'.

I can't understand why it behaves like this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T22:42:32.240

I have experienced the Unicode errors while using `print` for debugging errors similar to what you describe.

I think you should solve the problem at it's root: use `grep` to find the lines with `print` commands in the `addons`, and comment them out with `#`. The `print` command is never used in the standard modules.

# html - django模板继承使用相同标签多个模板

> ID：12936363
> 
> 赞同：1
> 
> 时间：2012-10-17T14:14:51.403
> 
> 标签：html, django, django-templates

我正在使用 django 模板系统，尽管有一种方法可以为多个模板使用相同的变量继承标记，而无需从另一个模板中提取数据。

```
<div id="content-container3">

{% block content-container2 %}{% endblock %}

</div> 
```

所以我想在说*`people.html`*模板和*`test.html`*模板中使用上面的内容。

例如： {% extends "base.html "} {% block content-container2 %}{% endblock %}

尽管在这种情况下它交叉引用了来自两个模板的信息 - 每个变量继承标记是否必须是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:31:53.667

尝试将这部分代码移动到不同的文件（content_container3.html）并使用`include`标签......或者我不明白你的问题:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-30T03:55:04.833

我认为您应该尝试像下面的示例一样嵌套块。

```
{% block first_section %}
    {% block first_section_upper %}
      {{block.super}}
    {% endblock first_section_upper %}

      <h1 class="display-5">Some content</h1>
      <h5 style="color: white !important;" class="display-5"> *Your text here*</h5>

      <p class="lead">The Algorithms that run our Universe</p>

    {% block first_section_lower %}
      {{block.super}}
    {% endblock first_section_lower %}
{% endblock first_section %} 
```

每个新模板的 h1 标签和 p 标签可能不同。据我了解，这可能会解决您的问题。

# xml - 如何验证 CCD HL7 文档？

> ID：12936366
> 
> 赞同：6
> 
> 时间：2012-10-17T14:15:02.140
> 
> 标签：xml, validation, hl7, ccd

当我有一个示例 CCD 时，我应该使用：

1.  一个 XSD 架构并得出结论，我有一个有效的 CCD。

    或者

2.  我使用其他一些（非基于模式的）方法。（除了有效的 XML 文档之外的 UML 模型规则。）

甚至有这样的事情`ccd.xsd`吗？即使它只是部分地指导我创建一个有效的 CCD。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-07T19:11:21.373

要快速回答您的问题：

**A：**有一个 XSD 模式，但只是为了确保文档是否是有效的 CDA 文档（这意味着它只验证 CDA RIM，而不是 CCD 实施指南）

**B：**非基于模式的方法是使用schematron，并且ccd.sch 确实随HL7 提供的标准一起提供。这是将其验证为有效 CCD 文档的最佳方式。

**C：**据我所知，没有 ccd.xsd 这样的东西。

* * *

**背景**

这里有一些关于如何从 HL7 获取 CCD 标准的背景和说明。获取标准还会为您提供 CDA.xsd 和 CCD.sch 用于文件验证。

CCD 是从 CDA RIM 派生的特定实现。CCD 和 CDA 都是由 HL7 维护的标准。CCD 目前是 HL7 的“Section 1”类型标准。

完整的标准可以从 HL7 网站下载。完整标准是免费下载的完整标准 - 尽管您可能必须注册到该站点（也是免费的）。 [http://www.hl7.org/implement/standards/product_brief.cfm?product_id=6](http://www.hl7.org/implement/standards/product_brief.cfm?product_id=6)

因为我不知道您还有哪些其他资源可用，所以我将只使用可以从 HL7 网站获得的支持文件。

验证 CCD 文档有两层。首先，您必须验证以确保文档是有效的 CDA 文件，然后您必须验证以确保它遵循 CCD 实施指南中概述的实施约束。

为了确保它是一个有效的 CDA 文件，完整的 CCD 规范下载附带了一个 CDA.xsd 模式。

该标准还附带一个 schematron 文件，以将其验证为 CCD 文档。

在 schematron 验证器和实施指南之间存在分歧的不太可能的情况下，请始终使用实施指南。

* * *

**首字母缩略词**

CCD - 护理文件的连续性

CDA - 临床文档架构

RIM – 参考信息模型

作为补充链接，可以在这里找到一个非常方便的 CCD 文档验证在线工具：[https ://www.lantanagroup.com/validator/](https://www.lantanagroup.com/validator/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T20:39:00.727

更推荐使用选项 A，它涉及使用具有特定 CCD 模式源的[DocumentBuilder](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/parsers/DocumentBuilder.html)解析 XML 文档，然后检查验证错误。我建议查看[SchematronValidator](http://gazelle.ihe.net/content/schematron-based-document-validator)项目中的 XMLValidation 类；validXMLUsingXSD(...) 方法执行您所描述的操作。有几个地方可以找到有效 CCD XML 的 XSD，但如果您不知道从哪里开始，您可以在 Microsoft HealthVault 找到大多数用于 CDA/CCR 架构的 XSD。还有一些其他方法可以使用 schematron 规则来进一步验证您的 CCD 文档（请参阅 NIST 的有意义的使用验证器）。

您正在执行的代码将类似于下面的代码片段，其中 schemaLocation 是您的 XSD 文件位置。ErrorHandler 将存储任何验证错误。

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
docFactory.setNamespaceAware(true);
docFactory.setValidating(true);
docFactory.setAttribute(JAXP_SCHEMA_LANGUAGE, W3C_XML_SCHEMA);
docFactory.setAttribute(JAXP_SCHEMA_SOURCE, schemaLocation);
docFactory.setIgnoringElementContentWhitespace(true);
DocumentBuilder builder = null;
try {
    builder = docFactory.newDocumentBuilder();
} catch (ParserConfigurationException pce) {
    pce.printStackTrace();
    return null;
}

builder.setErrorHandler(handler);
Document doc = null;
try {
   doc = builder.parse(xml);
} catch (SAXException e) {
    System.out.println("Message is not valid XML.");
    handler.addError("Message is not valid XML.", null);
    e.printStackTrace();
} catch (IOException e) {
    System.out.println("Message is not valid XML.  Possible empty message.");
    handler.addError("Message is not valid XML.  Possible empty message.", null);
    e.printStackTrace();
}
return doc; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-05T20:33:33.577

我意识到这是一个很老的问题，但我也想加两分钱。

[cdatools.org](http://cdatools.org)有一些用于验证 CDA 文档的好工具。由于您正在创建 CCD，因此验证过程将是相同的。

此外，[cdatools 信息中心](http://cdatools.org/infocenter.index.jsp)有关于不同文档及其要求的精彩信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T09:13:29.850

老问题，但我仍然认为我会回答它，因为我最近一直在寻找解决这个问题的方法并最终进行了大量的研究。

我尝试使用具有内置 API的[Everest API来验证各种 HL7 文档。](http://te.marc-hi.ca/view.aspx?project=af66d54ed41e4ac18b44d0d3ca6cabf0)如果您生成了有效的文档，这是在代码中测试的好方法。

[NIST](http://xreg2.nist.gov/cda-validation/webservice.html)提供了一个 Web 服务（以及一个示例客户端！），可用于（再次在您的代码中）验证 CCD/CCDA 等文档。

如果您只需要手动验证生成的文档，那么 NIST 有[另一个](http://transport-testing.nist.gov/ttt/)。

我希望它有帮助...

# tomcat7 - Eclipse Indigo / WTP - 未找到已编译的 JSP

> ID：12936371
> 
> 赞同：1
> 
> 时间：2012-10-17T14:15:14.877
> 
> 标签：tomcat7, eclipse-indigo, eclipse-wtp

> **可能重复：**
> [使用 eclipse 的 JSP 的间歇性 ClassNotFoundException](https://stackoverflow.com/questions/7953456/intermittent-classnotfoundexception-for-jsp-using-eclipse)

我有一个使用 Jersey 来返回 Viewable JSP 的动态 Web 项目。我启动我的服务器（tomcat 7 / java 1.6），然后点击我的 URL 并查看下面的错误。我知道代码没有问题，因为如果我终止服务器并重新启动它，一切都会正常工作。我的应用程序使用上下文根“/”部署，我需要它保持这种状态。这正在*扼杀*我的生产力.....还有其他人在 eclipse/WTP 中看到这个错误吗？

> javax.servlet.ServletException：com.sun.jersey.api.container.ContainerException：org.apache.jasper.JasperException：java.lang.ClassNotFoundException：org.apache.jsp.WEB_002dINF.jsp.sales.annualAllocation_jsp com.sun.jersey .spi.container.servlet.WebComponent.service(WebComponent.java:425) com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:538) com.sun.jersey.spi.container.servlet .ServletContainer.doFilter(ServletContainer.java:910) com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:858) com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer .java:812) com.purduefed.filters.AuthorizationFilter.doFilter(AuthorizationFilter.java:47) org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) org.jasig.cas.client.util.HttpServletRequestWrapperFilter.doFilter(HttpServletRequestWrapperFilter.java:62) org.jasig.cas.client。 validation.AbstractTicketValidationFilter.doFilter(AbstractTicketValidationFilter.java:196) org.jasig.cas.client.authentication.AuthenticationFilter.doFilter(AuthenticationFilter.java:93)doFilter(AuthenticationFilter.java:93)doFilter(AuthenticationFilter.java:93)

# typescript - 编译 TypeScript 源代码

> ID：12936373
> 
> 赞同：3
> 
> 时间：2012-10-17T14:15:25.877
> 
> 标签：typescript

如何配置我的 Windows 环境以使用 Makefile 脚本构建/部署 TypeScript 源代码？

我需要什么？

**编辑**

我的电脑中有一个 TypeScript 存储库的克隆。现在我想知道如何运行 Makefile 脚本来部署 TypeScript 编译器。我想编译我自己的 TypeScript 编译器源代码。我需要什么实用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:14:45.080

在普通的 Windows 设置中，您也可以通过 Windows 脚本主机 (WSH) 运行 tsc.js。

实际上......没有node.js的文件管理是通过WSH完成的。你可以自己检查一下。它位于 io.ts 编译器下的源代码中。

要自己构建编译器...您只需将普通的“src/tsc.ts”传递给编译器并设置一些输出目录，例如“bin2”...如果您想使用相对路径，请记住设置当前目录.

这是它如何工作的示例......我已经这样做了。

1.  运行命令
2.  转到“YOURS_TYPESCRIPT/src/compiler/”目录
3.  写：

    tsc --out ../../bin/tsc2.js tsc.ts

4.  现在你是另一个打字稿编译器的好妈妈。:)

**编辑**：默认情况下，您在 Windows 上有很多选项，以至于您要求另一个用于 makefile 的选项甚至很有趣。:P

您可以将批处理（*.bat）文件或 WSH 与 JScript（[ecma scripting again] *.js ）或 Visual Basic（我没有使用的那个）一起使用。如果那些人得到了你所需要的一切，为什么还要让别人安装另一个？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:22:47.570

你需要在你的机器上安装命令行 TypeScript 编译器。`npm install -g typescript`如果您在本地运行它，您可以为 node.js ( ) 获取它。

```
tsc helloworld.ts 
```

此时您应该能够将其修补到您的构建过程中。

# php - php ajax登录-php文件中未定义的索引错误

> ID：12936374
> 
> 赞同：0
> 
> 时间：2012-10-17T14:15:25.963
> 
> 标签：php, ajax, indexing, undefined

我正在做一个 php/ajax 登录，所以页面重定向是在 javascript (ajax) 中。我已经可以将它重定向 ajax 方式（不连接到数据库等），但是当我在 php 中添加数据库和会话内容时，我得到了这个 php 错误。

![注意：未定义索引：第 22 行 D:\wamp\www\bday_app\login.php 中的用户名](../Images/46431e498d9882405ddc0ac938ee3668.png)

这是我的代码：我得到了 index.php（它有登录表单和 ajax 代码），ajax 代码使用 login.php（使用 POST 方法）来传递用户名/密码。这是我的 login.php 的内容：

```
if(mysql_num_rows($query_results)==1){
    $row = mysql_fetch_array($query_results);
    $_SESSION['username'] = $row['username'];
    $_SESSION['nickname'] = $row['nickname'];
    $_SESSION['firstname'] = $row['first_name'];
    $_SESSION['middlename'] = $row['middle_name'];
    $_SESSION['lastname'] = $row['last_name'];
    echo 'Login successful! Redirecting...';
    //header("Location: bday_app_home.php");
}else{
    echo 'Invalid username/ password.';
    //header("Location: index.php");
} 
```

错误中的第 22 行是：

```
$_SESSION['username'] = $row['username']; 
```

如果我有一个无效的用户名/密码，它很好，因为它会在 index.php 中很好地显示消息，但是当用户名/密码正确时，我得到了这个未定义的索引错误。

我不知道为什么，因为用户名/密码是通过 POST 收到的，请参阅图像中的回显值 - mars1，mars123

请帮忙... ：（

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:20:47.253

看起来像会话问题....

你有没有开始`SESSION`

```
session_start(); 
```

前

```
$_SESSION['username'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:42:08.110

确保您在脚本之上指定了 session_start()。

还请确保您没有尝试这样做：

```
echo 'Login successful! Redirecting...';
header("Location: bday_app_home.php"); 
```

在你的脚本中。这将不起作用，因为在 header() 函数进行重定向之前进行了一些输出。

# android - Android：SQLite 获取错误数据

> ID：12936396
> 
> 赞同：-3
> 
> 时间：2012-10-17T14:16:50.800
> 
> 标签：android, sqlite

我的问题是，当我打开 ViewContact 类时，除了显示注释条目的名称外，所有字段都是空白的。我在 SQLite 或一般数据库方面没有经验。我将发布所有相关代码。我认为这可能与光标有关，但同样，我对此还不太了解。感谢您的任何帮助。

联系人菜单类

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;
import android.widget.Toast;

public class ContactsMenu extends Activity {

    ListView listView;
    public static final String fields[] = { DatabaseSetup.colName, DatabaseSetup.colMail, DatabaseSetup.colPhone1,
                                                DatabaseSetup.colPhone2,  DatabaseSetup.colAddress,  DatabaseSetup.colNotes };
    Cursor cursor;

    public static String name, email, phone1, phone2, address, notes;

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.managecontacts);
        listView = (ListView) findViewById(R.id.lstContacts); 
        DatabaseSetup.init(this); 

        Button btnAddItem = (Button) findViewById(R.id.btnAddContact);
        btnAddItem.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent addItem = new Intent(v.getContext(), AddContact.class);
            startActivity(addItem);
        }
        });

        listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> listView, View view, 
                int position, long id) {
        // Get the cursor, positioned to the corresponding row in the result set
            //cursor = DatabaseSetup.getContactData();
        Cursor cursor = (Cursor) listView.getItemAtPosition(position);

                String selectedName = cursor.getString(cursor.getColumnIndexOrThrow("Name"));
                String selectedEmail = cursor.getString(cursor.getColumnIndexOrThrow("Email"));
                String selectedPhone1 = cursor.getString(cursor.getColumnIndexOrThrow("Phone1"));
                String selectedPhone2 = cursor.getString(cursor.getColumnIndexOrThrow("Phone2"));
                String selectedAddress = cursor.getString(cursor.getColumnIndexOrThrow("Address"));
                String selectedNotes = cursor.getString(cursor.getColumnIndexOrThrow("Notes"));

                setName(selectedName);
                setName(selectedEmail);
                setName(selectedPhone1);
                setName(selectedPhone2);
                setName(selectedAddress);
                setName(selectedNotes);

                Intent viewItem = new Intent(view.getContext(), ViewContact.class);
                startActivity(viewItem);

        }
        }); 

    }
        @Override
        protected void onPause() {
            listView.setAdapter(null);
            cursor.close();
            DatabaseSetup.deactivate();
            super.onPause();
        }

        @Override
        protected void onResume() {
            super.onResume();
            DatabaseSetup.init(this);
            //Updated
            cursor = DatabaseSetup.getContactData(); 
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.row, cursor, fields, new int[] {R.id.item_text,
                                                                R.id.item_text2,  R.id.item_text3,  R.id.item_text4,
                                                                R.id.item_text5,  R.id.item_text6})
            listView.setAdapter(adapter); 
        }

        public void setName(String selectedName) {
            name = selectedName;
        }

        public void setEmail(String selectedEmail) {
            email = selectedEmail;
        }

        public void setPhone1(String selectedPhone1) {
            phone1 = selectedPhone1;
        }

        public void setPhone2(String selectedPhone2) {
            phone2 = selectedPhone2;
        }

        public void setAddress(String selectedAddress) {
            address = selectedAddress;
        }

        public void setNotes(String selectedNotes) {
            notes = selectedNotes;
        }

        public static String getName() {
            String itemName = name;
            return itemName;        
        }

        public static String getEmail() {
            String itemEmail = email;
            return itemEmail;       
        }

        public static String getPhone1() {
            String itemPhone1 = phone1;
            return itemPhone1;      
        }

        public static String getPhone2() {
            String itemPhone2 = phone2;
            return itemPhone2;      
        }

        public static String getAddress() {
            String itemAddress = address;
            return itemAddress;     
        }

        public static String getNotes() {
            String itemNotes = notes;
            return itemNotes;       
        }

////////////////MENU////////////////////////////////////////////////////////////////////////////////
    DialogInterface.OnClickListener dialogClickListener = new DialogInterface.OnClickListener() { 
        public void onClick(DialogInterface dialog, int which) { 
            switch (which){ 
            case DialogInterface.BUTTON_POSITIVE: 
                finish();
                break; 

            case DialogInterface.BUTTON_NEGATIVE: 
                //Nothing happens on No button click, and the menu closes
                break; 
            } 
        } 
    }; 

    @Override
    public boolean onCreateOptionsMenu(Menu mainmenu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.mainmenu, mainmenu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        final CharSequence[] items = {"Contacts list", "Add Contact"};

        switch (item.getItemId()) {
            case R.id.help:     AlertDialog.Builder builder = new AlertDialog.Builder(this);
                                builder.setTitle("Select a function to revice information about it.");
                                builder.setItems(items, new DialogInterface.OnClickListener() {
                                    public void onClick(DialogInterface dialog, int selected) {
                                        switch(selected){
                                        case 0:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to view the selected item and make editations to it or delete it.",
                                                    Toast.LENGTH_LONG).show();
                                            break;
                                        case 1:
                                            Toast.makeText(getApplicationContext(),
                                                    "Allows you to add a new contact by bringing up a screen where the nececary information can be entered.",
                                                    Toast.LENGTH_LONG).show();
                                        }
                                    }
                                });
                                builder.show();
                                break;

                                case R.id.back:     AlertDialog.Builder builderBack = new AlertDialog.Builder(this); 
                                                    builderBack.setMessage("Are you sure?").setPositiveButton("Yes", dialogClickListener) 
                                                    .setNegativeButton("No", dialogClickListener).show(); 
                                break;
        }
        return true;

    }
} 
```

ViewContacts 类

```
package com.emailandcontactmanager;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class ViewContact extends Activity {

    EditText nameField, mailield, phoneField1, phoneField2, addressField, notesField;

    String name, mail, phone1, phone2, address, notes;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.viewcontact);

        nameField = (EditText) findViewById(R.id.textName);
        mailield = (EditText) findViewById(R.id.textMail);
        phoneField1 = (EditText) findViewById(R.id.textPhone1);
        phoneField2 = (EditText) findViewById(R.id.textPhone2);
        addressField = (EditText) findViewById(R.id.textAddress);
        notesField = (EditText) findViewById(R.id.textNotes);

        name =ContactsMenu.getName();
        mail =ContactsMenu.getEmail();
        phone1 =ContactsMenu.getPhone1();
        phone2 =ContactsMenu.getPhone2();
        address =ContactsMenu.getAddress();
        notes =ContactsMenu.getNotes();

        nameField.setText(name, TextView.BufferType.EDITABLE);
        mailield.setText(mail, TextView.BufferType.EDITABLE);
        phoneField1.setText(phone1, TextView.BufferType.EDITABLE);
        phoneField2.setText(phone2, TextView.BufferType.EDITABLE);
        addressField.setText(address, TextView.BufferType.EDITABLE);
        notesField.setText(notes, TextView.BufferType.EDITABLE);

        Button btnEditContact = (Button) findViewById(R.id.btnEditContact);
        btnEditContact.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            editContact();
        }
        });

        Button btnDeleteContact = (Button) findViewById(R.id.btnEditContact);
        btnDeleteContact.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            deleteContact();
        }
        });

        Button btnEditTags = (Button) findViewById(R.id.btnEditContact);
        btnEditTags.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Intent editTags = new Intent(v.getContext(), EditContactTags.class);
            startActivity(editTags);
        }
        });
    }

    public void editContact(){

    }

    public void deleteContact(){

    }

} 
```

数据库设置类

```
package com.emailandcontactmanager;

import android.content.ContentValues; 
import android.content.Context; 
import android.database.Cursor; 
import android.database.sqlite.SQLiteDatabase; 
import android.database.sqlite.SQLiteOpenHelper; 

/* 
 * usage:  
 * DatabaseSetup.init(egActivityOrContext); 
 * DatabaseSetup.createEntry() or DatabaseSetup.getContactNames() or DatabaseSetup.getDb() 
 * DatabaseSetup.deactivate() then job done 
 */ 

class DatabaseSetup extends SQLiteOpenHelper { 
static DatabaseSetup instance = null; 
static SQLiteDatabase db = null; 

public static void init(Context context) { 
    if (null == instance) { 
        instance = new DatabaseSetup(context); 
        } 
    } 

public static SQLiteDatabase getDb() { 
    if (null == db) { 
        db = instance.getWritableDatabase(); 
        } 
    return db; 
    } 

public static void deactivate() { 
    if (null != db && db.isOpen()) { 
        db.close(); 
        } 
    db = null; 
    instance = null; 
    } 

public static long createEntry(String name, String mail, String phone1, 
        String phone2, String address, String notes) { 
    ContentValues cv = new ContentValues(); 
    cv.put(colName, name); 
    cv.put(colMail, mail); 
    cv.put(colPhone1, phone1); 
    cv.put(colPhone2, phone2); 
    cv.put(colAddress, address); 
    cv.put(colNotes, notes); 
    return getDb().insert(contactsTable, null, cv); 

    } 
/*  Old 
public static Cursor getContactNames() { 
    // TODO Auto-generated method stub 
    String[] columns = new String[] {"_id", colName }; 
    return getDb().query(contactsTable, columns, null, null, null, null, 
            null); 
    } 
*/
public static Cursor getContactData(){
    String[] columns = new String[] {"_id", colName, colMail, colPhone1, colPhone2, colAddress, colNotes }; 
    return getDb().query(contactsTable, columns, null, null, null, null, 
            null); 
    }

DatabaseSetup(Context context) { 
    super(context, dbName, null, dbVersion); 
    } 

@Override 
public void onCreate(SQLiteDatabase db) { 
    // TODO Auto-generated method stub 
    db.execSQL("CREATE TABLE IF NOT EXISTS " + contactsTable 
            + " (_id integer primary key autoincrement, " + colName 
            + " TEXT NOT NULL, " + colMail + " TEXT NOT NULL, " + colPhone1 
            + " TEXT NOT NULL, " + colPhone2 + " TEXT NOT NULL, " 
            + colAddress + " TEXT NOT NULL, " + colNotes 
            + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + templatesTable 
            + " (_id integer primary key autoincrement, " + colSubject 
            + " TEXT NOT NULL, " + colBody + " TEXT NOT NULL)"); 

    db.execSQL("CREATE TABLE IF NOT EXISTS " + tagsTable 
            + " (_id integer primary key autoincrement, " + colTagName 
            + " TEXT NOT NULL, " + colContact + " TEXT NOT NULL)"); 

    } 

@Override 
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { 
    db.execSQL("DROP TABLE IF EXISTS " + contactsTable); 
    db.execSQL("DROP TABLE IF EXISTS " + templatesTable); 
    db.execSQL("DROP TABLE IF EXISTS " + tagsTable); 
    onCreate(db); 
    } 

static final String dbName = "DB"; 
static final int dbVersion = 1; 
static final String contactsTable = "Contacts"; 
static final String colName = "Name"; 
static final String colMail = "Email"; 
static final String colPhone1 = "Phone1"; 
static final String colPhone2 = "Phone2"; 
static final String colAddress = "Address"; 
static final String colNotes = "Notes"; 

static final String templatesTable = "Templates"; 
static final String colSubject = "Subject"; 
static final String colBody = "Body"; 

static final String tagsTable = "Tags"; 
static final String colTagName = "Name"; 
static final String colContact = "Contact"; 

} 
```

Logcat 条目

```
10-22 14:49:51.418: E/AndroidRuntime(959): FATAL EXCEPTION: main
10-22 14:49:51.418: E/AndroidRuntime(959): java.lang.RuntimeException: Unable to resume activity {com.emailandcontactmanager/com.emailandcontactmanager.ContactsMenu}: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@4138a990
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2443)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2471)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1172)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.os.Looper.loop(Looper.java:137)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.ActivityThread.main(ActivityThread.java:4340)
10-22 14:49:51.418: E/AndroidRuntime(959):  at java.lang.reflect.Method.invokeNative(Native Method)
10-22 14:49:51.418: E/AndroidRuntime(959):  at java.lang.reflect.Method.invoke(Method.java:511)
10-22 14:49:51.418: E/AndroidRuntime(959):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-22 14:49:51.418: E/AndroidRuntime(959):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-22 14:49:51.418: E/AndroidRuntime(959):  at dalvik.system.NativeStart.main(Native Method)
10-22 14:49:51.418: E/AndroidRuntime(959): Caused by: java.lang.IllegalStateException: trying to requery an already closed cursor  android.database.sqlite.SQLiteCursor@4138a990
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.Activity.performRestart(Activity.java:4508)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.Activity.performResume(Activity.java:4531)
10-22 14:49:51.418: E/AndroidRuntime(959):  at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2433)
10-22 14:49:51.418: E/AndroidRuntime(959):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:34:01.500

你的问题是你没有`SimpleCursorAdapter (Context context, int layout, Cursor c, String[] from, int[] to)`正确使用。您有`from`一个包含要从表中显示的列的数组，并且该`to`数组应该包含要显示这些列的视图。

您应该有`to`等于中的字段数`from`，否则您将拥有仅`from`映射到中的第一列的行为`R.id.item_text`。

**更新：**

既然你只想显示名称列来显示，那么就不要使用 ListView 来填充光标`cursor = (Cursor) listView.getItemAtPosition(position);`。你应该更换：

```
Cursor cursor = (Cursor) listView.getItemAtPosition(position); 
```

和：

```
Cursor cursor = DatabaseSetup.getContactData();
StartManagingCursor(cursor);
cursor.moveToFirst(); 
```

由于您`cursor`稍后使用它来填充传递给另一个 Activity 的值，因此您无法从中获取它，`listView.getItemAtPosition(position);`因为位置`position`（即名称列）只有一个项目，因此其他项目给出`NullPointerException`，因为它们不存在于`cursor`从返回`listView.getItemAtPosition(position);`

**更新 2：**

还：

```
setName(selectedName);
setName(selectedEmail);
setName(selectedPhone1);
setName(selectedPhone2);
setName(selectedAddress);
setName(selectedNotes); 
```

应该：

```
setName(selectedName);
setEmail(selectedEmail);
setPhone1(selectedPhone1);
setPhone2(selectedPhone2);
setAddress(selectedAddress);
setNotes(selectedNotes); 
```

# jquery - 如何将 JQuery Mobile 列表搜索过滤栏更改为 data-mini="true" 样式？

> ID：12936407
> 
> 赞同：1
> 
> 时间：2012-10-17T14:17:21.693
> 
> 标签：jquery, jquery-mobile

我正在使用 JQuery Mobile 1.2.0，并且希望我的[搜索过滤器栏](http://jquerymobile.com/test/docs/lists/lists-search.html)的样式为 data-mini="true"。我怎样才能做到这一点？

搜索过滤器栏`<input type="text"`是由 JQuery Mobile 动态创建的，所以我不能只将属性添加`data-mini="true"`到我的标记中。相反，我必须通过使用 JavaScript 遍历 DOM 来插入它，如下所示。尽管尝试调用各种[刷新](http://jquerymobile.com/test/docs/pages/page-scripting.html)和[创建](http://jquerymobile.com/test/docs/forms/docs-forms.html)方法来让 JQuery Mobile 重新增强搜索过滤器栏的输入字段，但这并没有奏效。

这是我使用的代码的开头：

```
$("#my-page").on("pageinit", function(event) {
    $("input[placeholder='Email']").each(function (index, element) {
        element.setAttribute("data-mini", "true");
        /* What goes here to make my search filter bar display in mini mode? */
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:40:35.237

您正在手动创建一个搜索过滤器，但 JQM 已经使用一个简单的属性来完成它：

```
data-filter = "true" 
```

但它只适用于元素，因此我会做这样的事情。

```
$("#my-page").on("pageinit", function(event) {
    $('#my-page').find('ul').each(function(){
    $(this).attr('data-mini','true');
    $(this).attr('data-filter','true');
}); 
```

如果您按照应有的方式工作，这将起作用。

# java - 如何将聊天从 jzy3d 3rd 库添加到 JFrame？

> ID：12936411
> 
> 赞同：0
> 
> 时间：2012-10-17T14:17:38.043
> 
> 标签：java, swing, canvas, jframe, awt

有以下代码：

```
public class SurfaceViewerFrame extends JFrame {

    public SurfaceViewerFrame() {
        setResizable(false);
        //System.loadLibrary("lib/jogl2-rc10/gluegen-rt.jar");
        Settings.getInstance().setHardwareAccelerated(true);
        FormLayout layout=new FormLayout("10px, 300px, 10px", "30px, 10px, 20px, 300px, 10px");
        CellConstraints сс=new CellConstraints();

        JLabel title=new JLabel("Выходная поверхность");

        Mapper mapper = new Mapper() {
            public double f(double x, double y) {
                return x * Math.sin(x * y);
            }
        };
        // Define range and precision for the function to plot
        Range range = new Range(-300, 300);
        int steps = 80;

        // Create the object to represent the function over the given range.
        final Shape surface = Builder.buildOrthonormal(new OrthonormalGrid(range, steps, range, steps), mapper);
        surface.setColorMapper(new ColorMapper(new ColorMapRainbow(), surface.getBounds().getZmin(), surface.getBounds().getZmax(), new Color(1, 1, 1, .5f)));
        surface.setFaceDisplayed(true);
        surface.setWireframeDisplayed(false);

        // Create a chart
        Chart chart = new Chart(Quality.Advanced, "awt");
        chart.getScene().getGraph().add(surface);
        chart.addController(new CameraKeyController());

        JPanel panel=new JPanel();
        panel.add(title, сс.xy(1, 1));
        panel.add((JComponent)chart.getCanvas(), CC.xy(1, 3));
        add(panel);
        setSize(320, 370);
        setVisible(true);
    }
} 
```

我已经制作了 Chart 对象，然后我需要将它添加到我的 JFrame 中的特殊位置。但是当我尝试使用这种结构时，我得到了关于将 chart.getCanvas() 转换为 JComponent 的异常。请告诉我，我该如何解决？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:17:39.387

`Canvas`不是`JComponent`- 它是 awt `Component`。你不应该一开始就进行演员表，但如果你这样做了，就把它转换成`Component`。

```
panel.add((Component)chart.getCanvas(), CC.xy(1, 3)); 
```

有关更多信息，请参阅[Javadocs](http://docs.oracle.com/javase/6/docs/api/java/awt/Canvas.html)

# python - 输入文件名作为字符串并返回字典

> ID：12936415
> 
> 赞同：1
> 
> 时间：2012-10-17T14:17:45.453
> 
> 标签：python, string, dictionary, filenames

我有这个功能：

```
def make_happiness_table("word-happiness.csv"):
   ''' make_happiness_table: string -> dict
      creates a dictionary of happiness scores from the given file '''

   return {} 
```

但是在尝试运行程序时，我不断收到语法错误。

```
File "happiness.py", line 13
def make_happiness_table("word-happiness.csv"):
                                            ^
SyntaxError: invalid syntax 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:22:19.670

不要在函数定义中给出实际的文件名，而是在函数调用时填写一个变量，如下所示：

```
def make_happiness_table(filename):
   ''' make_happiness_table: string -> dict
      creates a dictionary of happiness scores from the given file '''

   return {}

make_happiness_table("word-happiness.csv") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T14:23:19.263

尝试：

```
def make_happiness_table(filename="word-happiness.csv"):
   ''' make_happiness_table: string -> dict
      creates a dictionary of happiness scores from the given file '''

   return {} 
```

# jquery - 水平动画页面中的下一个/上一个链接

> ID：12936421
> 
> 赞同：0
> 
> 时间：2012-10-17T14:17:55.870
> 
> 标签：jquery, button, next

我在我的页面上做了类似的东西： [http://manos.malihu.gr/tuts/horizo​​ntal-animate-page-to-id-jquery.html](http://manos.malihu.gr/tuts/horizontal-animate-page-to-id-jquery.html)

它工作完美，除了我正在努力制作上一个/下一个按钮。我尝试了几种方法，但似乎不起作用，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:30:33.477

在我看来，最好的方法是增加锚点及其相关的内容选择器（例如 id: content-1/nav-1、content-2/nav-2 等）。您的所有导航项目的一般类别为`.nav`，您所有的内容持有者的一般类别为`.content`. 这样，你可以做类似的事情......

```
$(" [next/previous button] ").click(function(){
   if ( $(this).attr("id") == "next" ) {
      [call function to ADD 1 to the current content/nav]
   } else if ( $(this).attr("id") == "previous" ) {
      [call function to SUBTRACT 1 from the current content/nav]
   }
}); 
```

# wso2 - 尝试从开发人员工作室访问治理注册表时出现 302 错误

> ID：12936427
> 
> 赞同：0
> 
> 时间：2012-10-17T14:18:06.677
> 
> 标签：wso2, wso2developerstudio

我的治理注册表 4.1.1 运行良好。当我尝试从开发人员工作室 2.1.0 版附加到它时，我无法浏览注册表，并且下面的错误在 http_access 日志中。

```
[17/Oct/2012:08:12:16 -0600] "GET //carbon HTTP/1.1" 302 - "-" "Java/1.6.0_34" 
```

任何想法表示赞赏

更新

步骤：进入eclipse，进入WSO2注册工作空间，创建注册连接，输入凭证，得到“Specific Remote Server is not running”。已验证的服务器正在运行。似乎是一个证书。问题，但我在登录 GREG 控制台时没有任何证书问题。下面的日志条目。

> !ENTRY org.wso2.developerstudio.eclipse.greg.base 4 0 2012-11-26 08:25:47.615 !MESSAGE javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun。 security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径！STACK 0 java.lang.RuntimeException：javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security .provider.certpath.SunCertPathBuilderException：无法在 org.apache.abdera.protocol.client.AbderaClient 的 org.apache.abdera.protocol.client.AbderaClient.execute(AbderaClient.java:805) 中找到请求目标的有效认证路径。 get(AbderaClient.java:235) 在 org.wso2.carbon.registry.app.RemoteRegistry.get(RemoteRegistry.java:160) 在 org.wso2.developerstudio.eclipse.greg.base.core.Registry.getResourcesPerCollection(Registry.java:350) at org.wso2.developerstudio.eclipse.greg.base.model.RegistryResourceNode.getResourceType(RegistryResourceNode.java:258) at org. wso2.developerstudio.eclipse.greg.base.ui.controls.RegistryTreeContentProvider.hasChildren(RegistryTreeContentProvider.java:135) 在 org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:2146) 在 org.eclipse.jface。 viewers.TreeViewer.isExpandable(TreeViewer.java:588) at org.eclipse.jface.viewers.AbstractTreeViewer.isExpandable(AbstractTreeViewer.java:2176) at org.eclipse.jface.viewers.AbstractTreeViewer.optionallyPruneChildren(AbstractTreeViewer.java:2808)在 org.eclipse.jface.viewers.AbstractTreeViewer.updateChildren(AbstractTreeViewer.java:2608) 在 org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct(AbstractTreeViewer.java:1923) at org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct(TreeViewer.java:721) at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct(AbstractTreeViewer. java:1930) 在 org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct(TreeViewer.java:721) 在 org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct(AbstractTreeViewer.java:1930) 在 org.eclipse.jface.viewers .TreeViewer.internalRefreshStruct(TreeViewer.java:721) 在 org.eclipse.jface.viewers.AbstractTreeViewer.internalRefreshStruct(AbstractTreeViewer.java:1930) 在 org.eclipse.jface.viewers.TreeViewer.internalRefreshStruct(TreeViewer.java:721) 在org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1898) at org.eclipse.jface.viewers.AbstractTreeViewer.internalRefresh(AbstractTreeViewer.java:1855) at org.eclipse.jface.viewers.StructuredViewer$8.run(StructuredViewer.java:1535) at org.eclipse.jface。 viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1443) at org.eclipse.jface.viewers.TreeViewer.preservingSelection(TreeViewer.java:403) at org.eclipse.jface.viewers.StructuredViewer.preservingSelection(StructuredViewer.java:1404)在 org.eclipse.jface.viewers.StructuredViewer.refresh(StructuredViewer.java:1533) 在 org.eclipse.jface.viewers.ColumnViewer.refresh(ColumnViewer.java:548) 在 org.eclipse.jface.viewers.StructuredViewer.refresh (StructuredViewer.java:1490) 在 org.wso2.developerstudio.eclipse.greg.manager.remote.views.RegistryBrowserView$51.run(RegistryBrowserView.java:第2584章.runAsyncMessages(Display.java:4144) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761) 在 org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine. java:1022) 在 org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:916)在 org.eclipse.ui.internal.Workbench$5.run(Workbench.java:585) 在 org.eclipse.core 的 org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)。 databinding.observable.Realm.runWithDefault(Realm.java:332) 在 org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) 在 org.eclipse.ui.internal.ide.application 的 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:540) .IDEApplication.start(IDEApplication.java:124) 在 org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher .java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353) 在org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl。在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629) 的 java.lang.reflect.Method.invoke(Unknown Source) 的 sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) 调用(Unknown Source)在 org.eclipse.equinox.launcher.Main.basicRun(Main.java:584) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1438) 引起：javax.net.ssl.SSLHandshakeException: sun .security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法在 com.sun.net.ssl.internal.ssl.Alerts.getSSLException 中找到请求目标的有效证书路径（未知来源) 在 com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(Unknown Source) 在 com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Unknown Source) 在 com.sun.net.ssl。内部.ssl。Handshaker.fatalSE(Unknown Source) at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(Unknown Source) at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(Unknown Source) at com. sun.net.ssl.internal.ssl.Handshaker.processLoop(Unknown Source) at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Unknown Source) at com.sun.net.ssl.internal.ssl。 SSLSocketImpl.readRecord(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source) at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(Unknown Source) at com. sun.net.ssl.internal.ssl.AppOutputStream.write(Unknown Source) at java.io.BufferedOutputStream.flushBuffer(Unknown Source) at java.io.BufferedOutputStream.flush(Unknown Source) at org.apache.commons.httpclient。org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.flushRequestOutputStream(MultiThreadedHttpConnectionManager.java:1565) 上的 HttpConnection.flushRequestOutputStream(HttpConnection.java:828) org.apache.commons.httpclient.HttpMethodBase.writeRequest(HttpMethodBase.java:2116)在 org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1096) 在 org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398) 在 org.apache.commons.httpclient.HttpMethodDirector.executeMethod (HttpMethodDirector.java:171) 在 org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397) 在 org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:323) 在 org.apache。 abdera.protocol.client.AbderaClient。执行（AbderaClient.java:791）... 53 更多原因：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法在 sun 处找到请求目标的有效证书路径.security.validator.PKIXValidator.doBuild(Unknown Source) at sun.security.validator.PKIXValidator.engineValidate(Unknown Source) at sun.security.validator.Validator.validate(Unknown Source) at sun.sun.net.ssl.internal .ssl.X509TrustManagerImpl.validate(Unknown Source) at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source) at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source) ... 72 更多原因：sun.security.provider.certpath.SunCertPathBuilderException：无法在 java.security.cert.CertPathBuilder.build(Unknown Source) 的 sun.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source) 上找到请求目标的有效认证路径 ... 78 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T21:19:37.687

通过 Developer Studio 的首选项引入可配置的 SSL 客户端存储，此限制现已在最新版本的 Developer Studio (3.2.0) 版本中得到修复。

为了设置自定义 SSL 信任库，

1.  窗口 -> 首选项 -> 开发者工作室
2.  展开 Developer Studio 首选项。
3.  选择“SSL 客户端信任库”并指向您的 SSL 客户端信任库。（您需要在此处在本地计算机中提供 SSL 客户端信任库。远程地址将不起作用）

然后应用并确定。

现在您可以尝试您遵循的相同步骤，并使用更新的证书成功连接到服务器。

/哈莎娜

# jquery - 解析来自 Twitter api 的 jsonP 请求的小问题

> ID：12936432
> 
> 赞同：1
> 
> 时间：2012-10-17T14:18:18.973
> 
> 标签：jquery, twitter, jsonp

我在解析来自 Twitter api 的 jsonP 请求时遇到问题。

我的代码如下：

```
var processRequest = function(data){

        console.log(data); //outputs what I believe to be correct 
        var result = $.parseJSON(data);
        var text = '';
        console.log("1");//outputs
        $.each(result, function(){
            console.log("2");// doesn't output
            text = this['created_at'];
        });
        console.log(text);//doesn't output
}

$(document).ready(function () {

var url = "https://api.twitter.com/1/statuses/user_timeline.json?include_entities=0&include_rts=0&screen_name=DockersHamptons&count=1&callback=processRequest";

$.ajax({
    type: "GET",
    url:url,
    dataType: 'jsonp',
    data: {},
    success: function (data){
        if(typeof(data.error) != 'undefined') {
            if(data.error != ''){
                //Shouldn't hit here
            }                   
        } else {
            //Shouldn't hit here.   
        }
    }
}); 
```

});

我在萤火虫控制台中得到的错误是： TypeError: a is null

但它说错误位于第 2 行的“jquery-1.7.1.min.js”文件中。

我还尝试在 jsfiddle 中使用它，并且此设置不会向以下内容写入任何内容`<span></span>`：

[http://jsfiddle.net/kdP8b/1/](http://jsfiddle.net/kdP8b/1/)

但是这个设置确实：

[http://jsfiddle.net/3tHXN/2/](http://jsfiddle.net/3tHXN/2/)

这是否意味着 twitter api 中有一些东西导致它以无效的 json 格式出现？

编辑：我仍然有同样的问题，但我想添加它以防它可能有帮助。

Jquery 是由它到达 $.parseJSON() 行的时间定义的，因为我尝试在该行之前和之后添加 jquery 代码。所以问题肯定出在 twitter 的 api 返回的内容上。但我很难相信他们给了我无效的 json 格式数据。那么在使用 $.parseJSON() 之前我必须对结果做些什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:04:31.547

我在另一个网站上找到了解决方案。我的问题是 twitter api 已经返回了一个格式良好的 json 字符串。所以我只需要删除 $.parseJSON() 的使用。

```
var processRequest = function(data){
var text = '';
$.each(data, function(){
    text = this['text'];
});
$("#twitter_update_list").html("<li>"+text+"</li>");
} 
```

# jquery - 在 jQuery 中委托一个就绪事件

> ID：12936437
> 
> 赞同：2
> 
> 时间：2012-10-17T14:18:36.430
> 
> 标签：jquery

我正在尝试在一个表单上实现一个[组合框](http://www.learningjquery.com/2010/06/a-jquery-ui-combobox-under-the-hood)，该表单将他的`select`字段加载到 ajax 中。

我想打电话：

```
$('.combobox').combobox(); 
```

当一个新的组合框准备好时。

目前，我把它放在我的 ajax 响应中：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.combobox').combobox();
  });
</script> 
```

这可行，但在资源方面看起来很糟糕。所以我一直在寻找一种更好的方式来处理`ready`事件。

我试过 ：

```
 $('.combobox').live('ready', function() {
     $(this).combobox();
 }); 
```

但稍后阅读`live()`不支持`ready`事件。

然后，我尝试了：

```
 $('body').delegate('.combobox', 'ready', function() {
        $(this).combobox();
    }); 
```

但它也不起作用。

所以这里有一个问题：在 jquery 的选择器上处理当前和未来就绪事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:25:30.503

没有理由将就绪事件绑定到文档以外的任何内容。

事实上，jQuery 采用您之前放置的任何其他选择器`.ready`并忽略它。

有一个内置的 Promise 对象`.ready`，您可以将其`.done()`用作替代方案。

```
$.ready.promise().done(function(){
    $('.combobox').combobox();
}); 
```

或者你可以简单地使用

```
$(function(){
    $('.combobox').combobox();
}); 
```

或者

```
$(document).ready(function(){
    $('.combobox').combobox();
}); 
```

Promise 版本的好处是你可以像这样使用它：

```
$.when( $.ready, $.post("foobar.php") ).done(function() {
    $(".combobox").combobox();
}) 
```

# javascript - 第二次执行时出现 WinJS.xhr 错误

> ID：12936440
> 
> 赞同：3
> 
> 时间：2012-10-17T14:18:45.757
> 
> 标签：javascript, windows-store-apps, winjs

测试示例[http://code.msdn.microsoft.com/windowsapps/Getting-started-with-310271df](http://code.msdn.microsoft.com/windowsapps/Getting-started-with-310271df)

我在*`WinJS.xhr`*打电话时遇到了一些荒谬的问题。如果您第一次运行它，下面的示例可以工作。但是，下次它会给出这个错误！

```
Exception is about to be caught by JavaScript library 
code at line 2351, column 21 in ms-appx://microsoft.winjs.1.0/js/base.js

0x800c0008 - JavaScript runtime error: The download of the specified 
resource has failed.

If there is a handler for this exception, the program may be safely continued." 
```

现在，如果我删除调试文件夹，它对我来说又可以正常工作了。如果我安装它，情况也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T14:31:06.857

尝试这个：

```
return WinJS.xhr({ url: myUrl, headers: { "Cache-Control": "no-cache"} }); 
```

# c# - WP7的图像处理工具

> ID：12936441
> 
> 赞同：0
> 
> 时间：2012-10-17T14:18:54.260
> 
> 标签：c#, silverlight, windows-phone-7

我正在寻找任何有用的库或工具来处理 Windows Phone 中的图像。该工具/库应该能够应用效果/过滤器，如棕褐色、负片和一些更困难的如宝丽来、琥珀色等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:21:41.977

查看[http://picfx.codeplex.com/](http://picfx.codeplex.com/)您可以下载源代码并查看效果是如何处理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:43:31.227

除了 pixfx 你可能想看看[http://imagetools.codeplex.com](http://imagetools.codeplex.com)它有额外的功能集

添加/查找/编码效果不是一件容易的事..这两个库都将帮助您入门。

如果您只想要一个应用程序，您可以使用 Pictures Lab。我自己的应用程序酷相机在应用程序图片编辑器中提供（仅适用于使用应用程序拍摄的照片）

# web-services - SoapUI 没有从 Web 服务获得响应 - ClassCastException: com.sun.xml.messaging.saaj.soap.impl.TextImpl

> ID：12936445
> 
> 赞同：0
> 
> 时间：2012-10-17T14:19:10.787
> 
> 标签：web-services, jakarta-ee, soap, soapui

我正在尝试向 SoapUI 工具发送 Web 服务的肥皂请求并收到以下错误：

```
12/10/17 09:00:33 java.lang.ClassCastException: com.sun.xml.messaging.saaj.soap.impl.TextImpl
12/10/17 09:00:33   at br.gov.suframa.pmn.webservices.handler.SegurancaHandler.validarEntrada(SegurancaHandler.java:161)
12/10/17 09:00:33   at br.gov.suframa.pmn.webservices.handler.SegurancaHandler.handleMessage(SegurancaHandler.java:74)
12/10/17 09:00:33   at br.gov.suframa.pmn.webservices.handler.SegurancaHandler.handleMessage(SegurancaHandler.java:33)
12/10/17 09:00:33   at com.sun.xml.ws.handler.HandlerProcessor.callHandleMessage(HandlerProcessor.java:292)
12/10/17 09:00:33   at com.sun.xml.ws.handler.HandlerProcessor.callHandlersRequest(HandlerProcessor.java:135)
12/10/17 09:00:33   at com.sun.xml.ws.handler.ServerSOAPHandlerTube.callHandlersOnRequest(ServerSOAPHandlerTube.java:134)
12/10/17 09:00:33   at com.sun.xml.ws.handler.HandlerTube.processRequest(HandlerTube.java:116)
12/10/17 09:00:33   at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:598)
12/10/17 09:00:33   at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:557)
12/10/17 09:00:33   at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:542)
12/10/17 09:00:33   at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:439)
12/10/17 09:00:33   at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:243)
12/10/17 09:00:33   at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:471)
12/10/17 09:00:33   at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:244)
12/10/17 09:00:33   at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:136)
12/10/17 09:00:33   at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:129)
12/10/17 09:00:33   at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:161)
12/10/17 09:00:33   at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:75)
12/10/17 09:00:33   at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
12/10/17 09:00:33   at javax.servlet.http.HttpServlet.service(HttpServlet.java:857)
12/10/17 09:00:33   at com.evermind.server.http.ServletRequestDispatcher.invoke(ServletRequestDispatcher.java:734)
12/10/17 09:00:33   at com.evermind.server.http.ServletRequestDispatcher.forwardInternal(ServletRequestDispatcher.java:391)
12/10/17 09:00:33   at com.evermind.server.http.HttpRequestHandler.doProcessRequest(HttpRequestHandler.java:908)
12/10/17 09:00:33   at com.evermind.server.http.HttpRequestHandler.processRequest(HttpRequestHandler.java:458)
12/10/17 09:00:33   at com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:313)
12/10/17 09:00:33   at com.evermind.server.http.AJPRequestHandler.run(AJPRequestHandler.java:199)
12/10/17 09:00:33   at oracle.oc4j.network.ServerSocketReadHandler$SafeRunnable.run(ServerSocketReadHandler.java:260)
12/10/17 09:00:33   at com.evermind.util.ReleasableResourcePooledExecutor$MyWorker.run(ReleasableResourcePooledExecutor.java:303)
12/10/17 09:00:33   at java.lang.Thread.run(Thread.java:595) 
```

我已经阅读了有关此问题的几篇文章，但没有人明确提供解决方案。我尝试遵循这篇文章的提示：[JAX-RPC 处理程序发生异常，](https://stackoverflow.com/questions/545496/exception-occurs-with-jax-rpc-handler) 但我只有一个包含“SOAPElement.class”的库“saaj-api-1.3.jar”，并且没有其他包含此类的库。

我需要添加任何罐子吗？有人可以帮我解决这个问题吗？

我在 Eclipse 和 JRE 1.5.0_24 上将这个程序作为 Java 应用程序运行。

****更新** 我在soapUI中注意到，我尝试发送一个格式良好的带有参数的xml，当我调试时，我发现在SOAP请求中发送的是一个“\ n”而不是一个内容。我想传递一个 xml 参数。

有人有同样的情况吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T14:32:21.247

从soapui的xml请求中删除所有空格，它将起作用。

# bash - 使用 grep 从文件中删除行，其中键存在于另一个文件中

> ID：12936448
> 
> 赞同：1
> 
> 时间：2012-10-17T14:19:20.293
> 
> 标签：bash, shell, sed, awk, grep

我正在处理 2 个大型 CSV 文件。较小的是较大的子集。第一个字段是非唯一键，即 customerID。

我想从较大的文件中找到与较小文件在字段 1 中具有相同值的所有行，然后找到该结果与原始子集之间的增量。

然后，我想从原始子集中删除在增量中存在的字段一中具有值的所有行。

换句话说：我想从原始较小子集中删除任何行，该子集中具有 customerID 也存在于大原始文件中存在的行中，但不存在于较小子集中。

我目前正在这样做，但我不明白为什么结果为 0。

我的逻辑显然存在缺陷，这显然不是最优雅的方法，所以请，我愿意接受更好方法的建议。

文件：完整的.csv

```
,1052,tec101,UNIX
,1052,ser303,UNIX
,1052,backu2,UNIX
,1052,sma114,UNIX
,1052,appsup,UNIX
,1052,emails,UNIX
,1059,marygs,UNIX
,39835,deepr2,UNIX
,44536,hai499,UNIX
,1274,lemo27,Windows
,48567,wdanro,UNIX
,81860,pro846,UNIX
,1419,graphe,UNIX
,83999,doerf1,UNIX
,1551,taxtri,UNIX
,1572,lodes4,UNIX
,1603,wes244,Windows
,102888,law642,UNIX
,1700,au2960,UNIX 
```

文件：subset.csv

```
,1052,sma114,UNIX
,1052,appsup,UNIX
,1052,emails,UNIX
,1059,marygs,UNIX
,39835,deepr2,UNIX
,44536,hai499,UNIX
,1274,lemo27,Windows
,48567,wdanro,UNIX
,81860,pro846,UNIX
,1419,graphe,UNIX 
```

我现在在做什么：

```
[jgalley@linux1 sandbox]$ wc -l *
 19 full.csv
 10 subset.csv
 29 total
[jgalley@linux1 sandbox]$ cat subset.csv |  awk -F, '{print ","$2","}' > subset_keys
[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv | wc -l
13
[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv | head -n2
,1052,tec101,UNIX
,1052,ser303,UNIX
[jgalley@linux1 sandbox]$ grep -F -f subset_keys full.csv > subset_keys_grep
[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print ","$2","}' | head -n2
,1052,
,1052,
[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print ","$2","}' | wc -l
13
[jgalley@linux1 sandbox]$ cat subset_keys_grep | awk -F, '{print ","$2","}' > keys_to_remove
[jgalley@linux1 sandbox]$ grep -F -f keys_to_remove subset.csv | wc -l
10
[jgalley@linux1 sandbox]$ grep -F -f keys_to_remove subset.csv > lines_to_remove
[jgalley@linux1 sandbox]$ grep -Fv -f lines_to_remove  subset.csv | wc -l
0 
```

我的预期结果应该是 7，或者，如果没有计数，则如下：

```
,1059,marygs,UNIX
,39835,deepr2,UNIX
,44536,hai499,UNIX
,1274,lemo27,Windows
,48567,wdanro,UNIX
,81860,pro846,UNIX
,1419,graphe,UNIX 
```

结果应该是子集的 7 行，其 customerID 仅存在于子集中，而不存在于完整文件的其他位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:39:57.013

试试这个。我修改了您的输入“full.csv”以删除前 3 行：

```
$ cat full1.csv
,1052,sma114,UNIX
,1052,appsup,UNIX
,1052,emails,UNIX
,1059,marygs,UNIX
,39835,deepr2,UNIX
,44536,hai499,UNIX
,1274,lemo27,Windows
,48567,wdanro,UNIX
,81860,pro846,UNIX
,1419,graphe,UNIX
,83999,doerf1,UNIX
,1551,taxtri,UNIX
,1572,lodes4,UNIX
,1603,wes244,Windows
,102888,law642,UNIX
,1700,au2960,UNIX 
```

因此，对于 1 个密钥在您的子集.csv 文件中多次出现的情况，您的要求会更好一些。它假定subset.csv 文件中的行顺序与full.csv 文件中的顺序相匹配。如果不是这种情况，则只需进行调整即可拆分字符串...

```
$ cat test.awk                       
BEGIN{ FS="," }
NR==FNR { key2full[$2] = key2full[$2] $0 ORS; next }
{ key2subset[$2] = key2subset[$2] $0 ORS }
END {
   for (key in key2subset) {
      if (key2subset[key] == key2full[key]) {
         printf "%s", key2subset[key]
      }
   }
}
$ awk -f test.awk full1.csv subset.csv
,1052,sma114,UNIX
,1052,appsup,UNIX
,1052,emails,UNIX
,1419,graphe,UNIX
,44536,hai499,UNIX
,48567,wdanro,UNIX
,1274,lemo27,Windows
,81860,pro846,UNIX
,39835,deepr2,UNIX
,1059,marygs,UNIX 
```

通过在上面修改过的输入文件上运行我的命令，我似乎造成了一些混乱。这里是原始文件，所以这里是针对原始文件运行以显示它确实产生了所需的输出：

```
$ cat full.csv 
,1052,tec101,UNIX
,1052,ser303,UNIX
,1052,backu2,UNIX
,1052,sma114,UNIX
,1052,appsup,UNIX
,1052,emails,UNIX
,1059,marygs,UNIX
,39835,deepr2,UNIX
,44536,hai499,UNIX
,1274,lemo27,Windows
,48567,wdanro,UNIX
,81860,pro846,UNIX
,1419,graphe,UNIX
,83999,doerf1,UNIX
,1551,taxtri,UNIX
,1572,lodes4,UNIX
,1603,wes244,Windows
,102888,law642,UNIX
,1700,au2960,UNIX

$ awk -f test.awk full.csv subset.csv
,1419,graphe,UNIX
,44536,hai499,UNIX
,48567,wdanro,UNIX
,1274,lemo27,Windows
,81860,pro846,UNIX
,39835,deepr2,UNIX
,1059,marygs,UNIX 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:42:30.817

这应该可以解决问题：

```
grep -v -f subset.csv full.csv | awk -F, '{print ","$2",";}' >keys.csv
grep -v -f keys.csv subset.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:25:09.397

根据您的声明，subset.csv 中的所有记录都存在于 full.csv 中，以下应该在 bash 中工作。它首先使用 uniq 从 full.csv 中识别合格的 CustomerID。然后，这只是与子集.csv 合并以进行过滤。

```
join -o 2.1,2.2,2.3,2.4 -v 2 -t, -1 2 -2 2 <(sort full.csv subset.csv | uniq -u | 
sort -k2,2 -t,) <(sort -k2,2 -t, subset.csv) 
```

# java - 查找 Java 代码中的所有数字文字

> ID：12936450
> 
> 赞同：6
> 
> 时间：2012-10-17T14:19:23.263
> 
> 标签：java, eclipse

我支持外部代码，我想从代码中提取所有常量和幻数。在 Eclipse 中有什么快速的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:28:42.197

我使用过[PMD](http://pmd.sourceforge.net/)，一种代码静态分析工具，可以作为 Eclipse 插件工作。它会标记魔术数字，因此您不必自己寻找它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:27:31.150

我不时使用[外部化向导。](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-wizard-externalize-strings.htm)这将主要帮助您处理字符串。只需选择编译单元（java 文件），然后在 Source 菜单中选择 Externalize。

对于我没有找到的数字，也没有向导或插件，您必须在上下文菜单的重构子菜单中选择“提取常量”（右键单击）。

# xcode - Xcode 构建在 Subversion 控制下失败（使用版本）

> ID：12936455
> 
> 赞同：0
> 
> 时间：2012-10-17T14:19:53.103
> 
> 标签：xcode, svn, appcelerator, titanium-mobile, versions

我有这个 Xcode 项目，用于构建 App Store 应用程序（代码由 Titanium Appcelerator 生成）。到目前为止，它运行良好。

但是当我将我的项目添加到 subversion（使用版本）并检查它时，我的构建开始失败。

Xcode 抛出的错误信息是：

```
[ERROR] While reading /Users/ [some long local path] /._startup.png pngcrush caught libpng error 
```

这看起来像是一个图像压缩错误，但我没有名为“._startup.png”的图像，但我有一个名为“startup.png”的图像。所以这让我查看了位于我的图像旁边的 .svn/entries 文件，其中包含字符串“._startup.png”。

我的问题是；我该如何解决这个问题？

我希望我的项目使用版本进行版本控制，但它显然与 Xcode 的构建过程相冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T10:09:12.523

我通过从项目中删除 png 并用 jpg 替换它来“解决”问题。然后我承诺了，清理了项目并进行了测试构建，它有效。然后我再次将 png 添加到项目中并提交，清理项目并重建。这似乎奏效了，我真的不知道提到的 SVN 文件可能存在什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:39:11.050

您应该将原始代码存储在 svn/Versions 中。不是编译后的代码。

由于您已经在 Titanium 中编写了应用程序，因此您最好还存储 Titanium 代码。生成的代码不是很有用，也不是很容易维护。

编辑：

显然你已经这样做了，这就是你的答案：[https ://wiki.appcelerator.org/display/tis/Subversion](https://wiki.appcelerator.org/display/tis/Subversion)

# magento - 用户提交 Magento 搜索时忽略特殊字符？

> ID：12936456
> 
> 赞同：1
> 
> 时间：2012-10-17T14:19:59.863
> 
> 标签：magento, search, character

提交 Magento (1.5.1.0) 搜索时，是否有人知道忽略特殊字符的方法？

例如：如果有人提交#955 作为产品搜索，它返回零个结果，但如果搜索到 955，则返回相应的产品结果。

查看 Magento 管理员中的搜索词，许多用户在搜索时在型号前面包含“#”，如果可能的话，我想过滤它，以便在提交搜索时忽略它。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:35:53.610

您可以在自定义模块中编写结果控制器，该模块将检查任何特殊字符并将其过滤掉。

请参阅 Magento Mage_Core_Controller_Front_Act 中的此类。您的自定义模块应该扩展此类，并且您需要为此编写一个方法。

希望这会给你一些想法。

# c# - 使用 Excel 互操作 C# 对 Excel 行进行排序

> ID：12936457
> 
> 赞同：2
> 
> 时间：2012-10-17T14:20:02.563
> 
> 标签：c#, excel, sorting, excel-interop

我有一个 C# 程序将结果输出到 Excel 电子表格。每行包含竞争对手的信息，包括几个字段，例如姓名、身份证号码、地址、分数等，每个字段位于不同的列中。我想根据分数对所有这些竞争对手进行排序（所以我想对这些行进行排序），记录从高到低降序排序。解决此问题的最佳方法是什么？这是我正在尝试但不起作用的代码。

```
 Excel.Range sortRange;
                sortRange = worksheet.get_Range("A14", "K32");
                Excel.Range scoreColumn;
                scoreColumn = worksheet.get_Range("C14", "C32");
                sortRange.Sort(scoreColumn, Excel.XlSortOrder.xlDescending, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T10:12:06.877

啊哈，我刚刚做了，遗憾的是代码是在 VB.NET 中，如果你翻译成 C# 有任何困难，请告诉我

```
 Dim lastrow As Integer = 0
        lastrow = xlsSheet.UsedRange.Row + xlsSheet.UsedRange.Rows.Count - 1

        Dim myRange = xlsSheet.range("A2", "Q" & lastrow)
        myRange.Select()
        xlsApp.ActiveWorkbook.Worksheets("your_work_sheet_name").Sort.SortFields.Add(Key:= _
    xlsSheet.Range("A2:A" & lastrow), Order:=Microsoft.Office.Interop.Excel.XlSortOrder.xlAscending)
        xlsApp.ActiveWorkbook.Worksheets("your_work_sheet_name").Sort.SortFields.Add(Key:= _
    xlsSheet.Range("B2:B" & lastrow), Order:=Microsoft.Office.Interop.Excel.XlSortOrder.xlAscending)

         With xlsApp.ActiveWorkbook.Worksheets("your_work_sheet_name").Sort
            .SetRange(myRange)
            .Header = Microsoft.Office.Interop.Excel.XlYesNoGuess.xlYes
            .MatchCase = False
            .Orientation = Microsoft.Office.Interop.Excel.XlSortOrientation.xlSortColumns
            .SortMethod = Microsoft.Office.Interop.Excel.XlSortMethod.xlPinYin
            .Apply()
        End With 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-06T08:24:26.600

~~这对我有用，但我必须添加一个带有 EPPLUS 的表才能使这条线工作：~~

```
sheet.AutoFilter.Sort.SortFields.Add(oRange, XlSortOrder.xlAscending);</s>

   <s> // add the excel table entity with EPPLUS (available on Nuget)
var table = ws.Tables.Add(range, "table1");
table.TableStyle = OfficeOpenXml.Table.TableStyles.Light2; 
```

我不再添加表格，只是将带有 epplus 的自动过滤器设置为 sheet.AutoFilter 在较大的 Excel 文件中不为 NULL

```
 var colindexM = ws.Cells["M5"].Start.Column;
                        var endcell = ws.Cells[ws.Dimension.End.Row, ws.Dimension.End.Column];
                        var range = ws.Cells[4, 2, endcell.Start.Row, endcell.Start.Column];
                        range.AutoFilter = true; 
```

然后：

```
 //open workbook
    workBook = oXL.Workbooks.Open(outputfilepath, 0, false, 5, "", "", false, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "", true, false, 0, true, false, false);
    //oXL.Visible = false;
    Worksheet sheet = workBook.Sheets["Rapport1"];
    // set Date Format to the sort column 
    Range rg = sheet.Cells[5, colindexM];
    rg.EntireColumn.NumberFormat = "DD/MM/YYYY";

    sheet.EnableAutoFilter = true;
  sheet.AutoFilter.Sort.SortFields.Add(rg, XlSortOn.xlSortOnValues, XlSortOrder.xlAscending,"", XlSortDataOption.xlSortTextAsNumbers );        
    sheet.AutoFilter.ApplyFilter();    

    workBook.Save();

    oXL.Quit(); 
```

在 Jan 'splite' K 回答之后更新

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:27:22.797

我将不再使用 Excel Interop 类。
已经有多种 API 可以很好地发挥作用。

[创建没有互操作的 Excel](https://stackoverflow.com/questions/7711851/create-excel-without-interop-and-template-with-or-without-row-and-columnspan)

另一个很棒的 SO 帖子是阅读文件。这可以为您指明使用非互操作 C# 类编写文件的正确方向。

[.net - 读取 Excel 文件](https://stackoverflow.com/questions/15828/reading-excel-files-from-c-sharp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-25T12:44:41.843

```
using System.Runtime.InteropServices;
...    

    /// <summary>
    /// <para>Customized function for Range property of Microsoft.Office.Interop.Excel.Worksheet</para>
    /// </summary>
    /// <param name="WS"></param>
    /// <param name="Cell1"></param>
    /// <param name="Cell2"></param>
    /// <returns>null if Range property of <paramref name="WS"/> throws exception, otherwise corresponding range</returns>
    public static Range GetRange(this Worksheet WS, object Cell1, [Optional] object Cell2)
    {
        try
        {
            return WS.Range[Cell1: Cell1, Cell2: Cell2];
        }
        catch (Exception ex)
        {
            return null;
        }
    }

    ...

    Excel.Range sortRange = worksheet.GetRange("A14", "K32");
    Excel.Range scoreColumn = worksheet.GetRange("C14", "C32");

    // for this particular case, this check is unuseful
    // but if you set you scoreColumn as:
    // Excel.Range scoreColumn = worksheet.GetRange("COMPETITORS[[#Data], [SCORE]]");
    // you will have scoreColumn as null if COMPETITORS table has no column named "SCORE"
    if (sortRange != null && scoreColumn != null)
    {
        sortRange.Sort.SortFields.Clear();
        sortRange.Sort.SortFields.Add(scoreColumn,
                                      Excel.XlSortOn.xlSortOnValues, 
                                      Excel.XlSortOrder.xlDescending, 
                                      Type.Missing, 
                                      Excel.XlSortDataOption.xlSortNormal);
        sortRange.Sort.Header = XlYesNoGuess.xlYes;
        sortRange.Sort.MatchCase = false;

        // avoid setting this when you're dealing with a table
        // the only available option is xlSortColumns
        // if you apply a sort to a table and you set XlSortOrientation.xlRows, 
        // you will get an exception
        // see https://stackoverflow.com/questions/13057631/f-excel-range-sort-fails-or-rearranges-columns
        //sortRange.Sort.Orientation = XlSortOrientation.xlSortColumns;

        sortRange.Sort.SortMethod = XlSortMethod.xlPinYin;
        sortRange.Sort.Apply();
    } 
```

进一步阅读：
1）[F# Excel Range.Sort 失败或重新排列列](https://stackoverflow.com/a/39144866/916379)

# javascript - Backbonejs 替换 $el

> ID：12936462
> 
> 赞同：2
> 
> 时间：2012-10-17T14:20:19.767
> 
> 标签：javascript, jquery, backbone.js

我有一个像这样实例化的视图：

```
var myView = new BackboneView({ el: '#some-div'}); 
```

在视图渲染函数（我从构造函数调用）中，我想替换当前元素（我想将它包装到另一个 div 中，或者在它之前放置另一个元素并使新元素成为视图的主元素）。这个怎么做？我正在尝试这个：

```
this.original_el = this.$el;
this.$el.replaceWith('<div class="new-div"></div>'); 
```

一步一步调试我看到浏览器上的 div 被替换了，但是 this.$el 仍然是旧值。

另一方面，

```
 this.$el.setElement('<div class="new-div"></div>'); 
```

替换 this.$el，但新的 div 不会显示在浏览器上。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-25T23:21:15.690

[我在 GitHub](https://github.com/jashkenas/backbone/issues/1639)上的 Backbone repo 上发现了一个问题。Backbone 不会自动为您执行此操作是有充分理由的，您可以在那里阅读。解决方案是两者都做，`$el`在 DOM 中替换并更新 Backbone 视图。在您的视图方法中：

```
this.$el.replaceWith(newElement)
this.setElement(newElement) 
```

# c++ - 使用 QAtomicInt/QAtomicPointer 进行原子读取

> ID：12936464
> 
> 赞同：4
> 
> 时间：2012-10-17T14:20:22.200
> 
> 标签：c++, qt, atomic

在所有支持的架构上，如何在 Qt4 中以原子方式读取 QAtomicInt 或 QAtomicPointer 的值？我不关心这里的内存顺序，我只想确保如果另一个线程同时更改值，我不会读取部分旧的、部分新的值。

在 Qt4 中，这些类只有 int 或 T* 的强制转换运算符。似乎有更新的代码（[http://qt.gitorious.org/qt/qtbase/blobs/master/src/corelib/thread/qbasicatomic.h](http://qt.gitorious.org/qt/qtbase/blobs/master/src/corelib/thread/qbasicatomic.h)）区分非原子load（）和原子loadAcquire（）。C++11 原子也有一个原子 load() ( [http://en.cppreference.com/w/cpp/atomic/atomic/load](http://en.cppreference.com/w/cpp/atomic/atomic/load) )。这就是为什么我担心Qt4提供的方法不够安全。

我知道 fetchAndAddRelaxed(0) 应该可以工作，但它看起来像一个 hack，并且在性能方面可能不是最佳的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T23:29:10.200

基本上答案是肯定的。几乎所有现代平台都允许至少 32 位或 64 位原子加载/存储*，前提*是变量是对齐的。（此处使用原子的意思是您不会加载“部分”值）

现在 Qt 文档没有明确说明他们的原子使用基本（他们称之为令人困惑的非原子）`load()`和`store()`. 'loadAcquire()' 尤其是 'fetchAndAddRelaxed(0)' 比你需要的更贵 - 'loadAcquire' 是这两个中最便宜的。

如果我是你，我会简单地使用 load() 和 store()。如果你想对 Qt 文档有更多的保证，loadAcquire 是最便宜的方法，在 x86 这样的架构中就像 load()。

最好的方法是将 C++11 atomic 与您想要的宽松内存模型一起使用。

# c++ - int i, k 实际发生了什么；k &= 我;

> ID：12936465
> 
> 赞同：2
> 
> 时间：2012-10-17T14:20:32.920
> 
> 标签：c++

作为初学者学习指针，我写了类似的东西

```
int i = 1,
    j = 2,
    k;

k &= i;
i = 3; 
```

期待`k`指向`i`，然而，我很快发现错误是那`k`不是一个`int`指针，只是一个`int`. 但它编译并运行为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T14:21:41.980

```
k &= i; 
```

是的缩写形式

```
k = k & i; 
```

`&`按位在哪里`and`。它与指针无关。

如果要`k`指向`i`，则需要使其成为指针：

```
// v
int* k; 
```

并使其指向`i`：

```
k = &i; // NOTE: different from k &= i; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:21:59.520

&= 与 k = k & i 相同。& 是按位与运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:22:18.890

`k &= i`相当于`k = k & i`which 是按位与运算。

# magento - 在 magento 中添加新属性以订购

> ID：12936470
> 
> 赞同：11
> 
> 时间：2012-10-17T14:20:51.093
> 
> 标签：magento, magento-1.7

我想为订单添加一个对客户不可见的属性。我只想在数据库中使用它并为每个订单存储一个特定的值。我想根据这个值打印订单。那么如何在magento中添加订单属性。该属性就像订单状态一样。如果我想在管理员/销售/订单中显示该属性，我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T22:32:43.257

假设您要添加`my_custom_input_field`到您的订单并向管理员创建订单页面添加一个字段（要将字段添加到前端，您只需将输入字段添加到前端模板并仔细检查观察者）

在 /app/code/local/MageIgniter/CustomOrderStatus/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <MageIgniter_CustomOrderStatus>
            <version>1.1</version>
        </MageIgniter_CustomOrderStatus>
    </modules>

    <global> 
         <fieldsets>
            <sales_convert_quote>                           
                <my_custom_input_field><to_order>*</to_order></my_custom_input_field>
            </sales_convert_quote>

            <sales_convert_order>                                              
                <my_custom_input_field><to_quote>*</to_quote></my_custom_input_field>
            </sales_convert_order>
        </fieldsets>
        <helpers>
            <customorderstatus>
                <class>MageIgniter_CustomOrderStatus_Helper</class>
            </customorderstatus>            
        </helpers>

        <models>
            <customorderstatus>
                <class>MageIgniter_CustomOrderStatus_Model</class>
                <resourceModel>customorderstatus_mysql4</resourceModel>
            </customorderstatus>
        </models>
        <resources>
            <customorderstatus_setup>
                <setup>
                    <module>MageIgniter_CustomOrderStatus</module>
                    <class>Mage_Sales_Model_Mysql4_Setup</class>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </customorderstatus_setup>
            <customorderstatus_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </customorderstatus_write>
            <customorderstatus_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </customorderstatus_read>
        </resources>

        <events>
            <adminhtml_sales_order_create_process_data_before>
                <observers>
                    <customorderstatus>
                        <type>singleton</type>
                        <class>customorderstatus/observer</class>
                        <method>saveCustomData</method>
                    </customorderstatus>
                </observers>
            </adminhtml_sales_order_create_process_data_before>
        </events>

        <blocks>
            <customorderstatus>
                <class>MageIgniter_CustomOrderStatus_Block</class>
            </customorderstatus>
        </blocks>
    </global>
</config> 
```

在 /app/code/local/MageIgniter/CustomOrderStatus/sql/customorderstatus_setup/mysql4-install-1.1.php

```
<?php
$installer = $this;
$installer->startSetup();

$installer->addAttribute("order", "my_custom_input_field", array("type"=>"varchar"));
$installer->addAttribute("quote", "my_custom_input_field", array("type"=>"varchar"));
$installer->endSetup(); 
```

在 /app/code/local/MageIgniter/CustomOrderStatus/Model/Observer.php

```
class MageIgniter_CustomOrderStatus_Model_Observer 
{
    public function saveCustomData($event)
    {
        $quote = $event->getSession()->getQuote();
        $quote->setData('my_custom_input_field', $event->getRequestModel()->getPost('my_custom_input_field'));

        return $this;
    }
} 
```

（您应该避免更改核心默认值 - 您应该对此进行一些研究）

在 /app/design/adminhtml/default/default/template/sales/order/view/info.phtml

```
<?php if($_order->getMyCustomInputField()): ?>
<tr>
    <td class="label"><label><?php echo Mage::helper('sales')->__('My Custom Input Field') ?></label></td>
    <td class="value"><strong><?php echo $_order->getMyCustomInputField() ?></strong></td>
</tr>
<?php endif; ?> 
```

在 /app/design/adminhtml/default/default/template/sales/order/create/form/account.phtml

（添加到前端更改`value="<?php echo Mage...>"`）

```
<input id="my_custom_input_field" name="my_custom_input_field" value="<?php echo Mage::getSingleton('adminhtml/session_quote')->getQuote()->getMyCustomInputField() ?>" class="input-text" type="text"> 
```

# c - GCC 默认主返回值不为零

> ID：12936473
> 
> 赞同：10
> 
> 时间：2012-10-17T14:21:01.643
> 
> 标签：c, gcc

我有一些 C 程序没有从 main 显式返回，如下所示：

```
int main(int argc, char *argv[])
{
  // blah blah
} 
```

如果我使用 GCC 4.6.3 和以下选项编译它们：

```
gcc file.c -Wall -Wextra 
```

程序不会返回 0 并给我带来问题，但标准（以及许多其他关于 SO 的答案）说：

> 如果 main 函数的返回类型是与 int 兼容的类型，则从初始调用到 main 函数的 return 等效于以 main 函数返回的值作为参数调用 exit 函数；[10]**到达 }终止主函数的返回值 0**。如果返回类型与 int 不兼容，则返回给宿主环境的终止状态是未指定的。
> 
> [10] 根据 6.2.4，在 main 中声明的具有自动存储持续时间的对象的生命周期将在前一种情况下结束，即使在后者中它们不会有。

我的程序返回不同的值，160、15、14……垃圾？

我错过了什么吗？这是 GCC 错误吗？在 GCC 在线文档中找不到任何内容。GCC 是否仍然引用一些旧的 C 标准（C99 之前），而这些标准不能被指定？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-17T14:23:17.860

默认情况下`gcc`是`-std=gnu89`C90 + GNU 扩展。

C90 说：

> (C90, 5.1.2.2.3) “如果主函数执行一个没有指定值的返回，返回到宿主环境的终止状态是未定义的”

当在 main 函数中省略return 时，编译时使用`-std=c99`或`-std=gnu99`具有返回值。`0`

# java - 用 Java 生成 C 程序的对象模型/AST

> ID：12936474
> 
> 赞同：2
> 
> 时间：2012-10-17T14:21:03.307
> 
> 标签：java, c, object, model, abstract-syntax-tree

我想解析一个 C 源文件并将其内容放入 AST（抽象语法树）。如果我将 AST 存储在 Java 对象中会非常好，类似于用 DOM 解析的 XML。Eclipse CDT 的概念似乎是我想要的，只是它被设计成一个插件库。有谁知道是否有独立的库，例如 XML 的 DOM？我已经在 stackoverflow 上阅读了关于 AST 等的其他主题，但我不太确定 ANTLR 或 JavaCC 是否适合我。提前致谢！

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:27:16.380

您也许可以考虑自定义现有的编译器。例如，GCC 承认插件和[MELT](http://gcc-melt.org/)扩展。MELT 是一种高级领域特定语言，旨在轻松扩展 GCC，并且能够处理 GCC 内部表示（Gimple、Tree）。

我强烈建议您避免自己解析 C（例如，通过深入研究 ANTLR ...）。这是一个比你想象的更大的任务。

在一些现有的编译器框架（如 GCC 或 Clang/LLVM）中工作的一个优点是您可以立即受益于所有编译器的机制。此外，您可以（对于接受多种源语言的编译器，如 GCC）还可以处理 C 以外的其他语言（例如 C++、Go、Ada、Fortran、GCC 的 Objective C）。编译器会计算很多可能对您有用的东西（Use/Def 链、交叉引用、SSA 形式）。最后，您可以处理一些合适的预消化内部表示，这可能比普通的 C 抽象语法树对您更有用。（例如，您可能希望在函数内联之后使用 Gimple）。

最后但同样重要的是，通过扩展现有编译器，您可以改进其行为，例如提供更好的警告，甚至改进发出的代码。

^(但是我知道没有用 Java 编写的 C 编译器！)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T14:59:36.033

有几种可用的 Java 解析器生成器，请参阅：

[http://java-source.net/open-source/parser-generators](http://java-source.net/open-source/parser-generators)

您可能想查看解析器的类型——它们可以是 LL(K)、LALR 等。1960 年代和 70 年代开发的编译器理论概述了这些差异。您可能想阅读类似 Aho/Sethi/Ullmann - 该理论的编译器原理、技术和工具之类的内容。

一旦您选择了解析器技术，您就可以选择您的解析器 - 生成器工具。ANTLR (LALR) 和 JavaCC LL(k) 是我个人熟悉并可以推荐的两个。在 JavaCC 网页上，您可以找到 C 的语法示例，您可以从该示例开始。

LL(k) 语法有点难以处理，因为您需要处理冲突 - 但是如果语法完成并且可以工作，那么您应该可以使用这种方法。

我个人会选择 JavaCC 来解决您的问题。

请参阅 [使用 JavaCC 解析 C 语法的源代码](https://stackoverflow.com/questions/5296029/source-for-parsing-c-grammar-using-javacc)

# jquery-plugins - jQuery Tooltip bodyHandler 在 Drupal 7 中不起作用

> ID：12936475
> 
> 赞同：1
> 
> 时间：2012-10-17T14:21:07.183
> 
> 标签：jquery-plugins, drupal-7, jquery-tooltip

我正在使用 jQuery Tooltip 1.3 和 jQuery 1.7。当我向锚标记添加标题属性时，工具提示功能；但是，当我尝试使用`bodyHandler`它时它不起作用。我无法在`bodyHandler`函数中将任何内容记录到控制台，这让我相信它只是从未被调用过。

HTML：

```
<a href="#awrap-exhibitor-listing" class="em-tooltip tooltip-directory" data-original-title="">View how your listing will appear in the directory:</a>
<div id="awrap-exhibitor-listing" class="wrap-exhibitor-listing" style="display: none; ">
<div class="em-show-directory-example">
  <div class="sd-company-booth">
    <div class="sd-company display-inline-block">1st Guard Corporation</div>
    <div class="sd-booth display-inline-block float-right">12093</div>
  </div>
  <div class="sd-address">200 Nokomis Avenue South, 4th Floor</div><div class="sd-locale">Venice, Florida 34285</div>
  <div class="sd-phone">(800) 995-4827</div>
  <div class="sd-name">Courtney Wilson</div>
  <div class="sd-phone">www.1stguard.com</div>
  <div class="sd-product">
    <strong>WILL DISPLAY:</strong> INSURANCE FOR LEASED OWNER OPERATORS - PHYSICAL DAMAGE, NONTRUCKING LIABILITY AND OCCUPATIONAL ACCIDENT INSURANCE
  </div>
</div>
<div class="em-el-categories">Your listing will display alphabetically and under the following categories: <span class="em-el-category">Insurance</span>
</div>
</div> 
```

JS：

```
Drupal.tooltipDirectoryListing = function() {
  $('.wrap-exhibitor-listing').hide();
    $('.tooltip-directory').tooltip(
      {
        bodyHandler: function() { 
                  return $($(this).attr("href")).html(); 
              }, 
                showURL: false 
      }
    );
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:30:38.797

只需替换`$`为`jQuery`

你的代码应该是这样的

```
Drupal.tooltipDirectoryListing = function() {
  jQuery('.wrap-exhibitor-listing').hide();
    jQuery('.tooltip-directory').tooltip(
      {
        bodyHandler: function() { 
                  return jQuery(jQuery(this).attr("href")).html(); 
              }, 
                showURL: false 
      }
    );
   } 
```

希望这行得通……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:55:29.973

对不起大家。这是由于与 bootstrap.js 的冲突，它也使用 tooltip() 但没有`bodyHandler`.

谢谢。

# automapper - 基于目标值的自动映射器副本

> ID：12936478
> 
> 赞同：2
> 
> 时间：2012-10-17T14:21:18.333
> 
> 标签：automapper, automapper-2

仅当目标值为空时，我才尝试复制源值。我正在使用以下地图

```
 Mapper.CreateMap<BM.AudioSetting, BM.AudioSetting>()
        .ForMember(dest => dest.MSOffsetInherited, opt =>
                                                       {
                                                           opt.Condition(src => src.DestinationValue == null);
                                                           opt.MapFrom(src => src.MSOffset);
                                                       }); 
```

在我的情况下，我正在检查以确保在映射之前目标值为 null。问题是无论目标值如何，复制一直在发生。

我做错了吗？

谢谢伊萨姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:37:03.220

您的代码应该可以正常工作。可能您期望 src.DestinationValue 成为目标对象的属性。如果是这样，自定义[类型转换器](https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters)应该可以帮助您实现所需的行为。

[这篇文章](https://stackoverflow.com/a/11441061/192723)应该可以帮助您创建自定义类型转换器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T02:13:53.157

我注意到您的源和目标类型是相同的。当目标值为空时，您实际上是在尝试克隆对象吗？如果是这样，那么根据对这个问题的评论，AutoMapper 可能不是合适的解决方案：[Copy object to object (with Automapper ?)](https://stackoverflow.com/questions/5713556/copy-object-to-object-with-automapper)

# jquery - Asp.net JQuery AutoComplete Not displaying data

> ID：12936481
> 
> 赞同：0
> 
> 时间：2012-10-17T14:21:25.163
> 
> 标签：jquery, asp.net

I am not seeing data returned from my webservice using the JQuery Autocomplete plugin.

Im sure that this is an issue with the JQuery part of my code. (Firebug shows that I am getting a string back from my webservice formatted like below.)

```
"[\"Component 1\",\"Component 2\",\"Component 2\",\"Component 3\"]" 
```

(I did assume that it might be the fact that there were 2 items the same, but removing the duplicate made no difference.)

my JQuery code is...

```
 $('#tags').autocomplete({             
                            source: function (request, response) {
                                    $.ajax({
                                            type: "POST",
                                            contentType: "application/json; charset=utf-8",
                                            url: "QuickSearch/QuickSearch.asmx/GetDealerships",
                                            data: "{'s':'" + request.term + "'}",
                                            dataType: "json",
                                            async: true,
                                            success: function (data){
                                                    response(data.d);
                                                },
                                                error: function (result) {
                                                        alert("Due to unexpected errors we were unable to load data");
                                                    }
                                });
                    },
        minLength: 2
                });
        }); 
```

So can anyone tell me what I have wrong in the success: function ?

Thanks

Edit

```
 var array = data.split(",");
    response(array); 
```

The above code almost works, except my drop down box also has the " symbols wrapping each element. I can edit this to strip out the spare characters, but the fact that I am having to do that makes me suspect I havent got it quite right somewhere..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:49:37.827

将此脚本用于成功事件处理程序：

```
response($.map(data, function (item) {
     return { label: item, value: item };
})); 
```

更多信息：http: [//api.jqueryui.com/autocomplete/#event-response](http://api.jqueryui.com/autocomplete/#event-response)

# php - PHP Notice errors and page load time

> ID：12936483
> 
> 赞同：-5
> 
> 时间：2012-10-17T14:21:26.210
> 
> 标签：php

I am a php newb and I don't have a clear answer for this.

To what extent do PHP "Notice" errors affect load time?

Ty

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:25:23.373

The notice usually is logged to a file, so it involves I/O activity. In the worst case scenario however, the file will just consume the entire free space at HDD which effectivly will block your web site. Other than this, the performance decrease is usually negligible - there are a lot of things that are becoming bottleneck sooner than the notices.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:29:02.213

好吧，通知被吐到页面上会导致更多的数据被发送到客户端的浏览器。因此，它可能会增加访问者的加载时间。例如，如果您有通知发生在一个大循环中，这可能会添加大量不需要的数据。

在服务器端，我怀疑一些简单的 I/O 日志记录会导致任何明显的影响，除非您获得大量流量。

最后 - 通知通常表明某些事情并不安静......导致这些通知的问题是否会导致更长的加载时间是任何人的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:26:49.983

它们不会以任何有意义的方式影响加载时间。

然而：

1.  那里有通知警告您潜在的不良编码实践和/或可能的错误。您应该编写代码以避免导致它们。

2.  在生产网站上，您应该禁用错误消息输出——不是因为任何性能问题，而仅仅是因为在您的网站上显示错误看起来不是很专业，并且可能会给黑客提供有关如何攻击您的系统的线索。

# facebook - Is it possible to have fb:recommendations translated?

> ID：12936486
> 
> 赞同：0
> 
> 时间：2012-10-17T14:21:35.650
> 
> 标签：facebook, facebook-recommendations

When using the fb:recommendations box is it possible to pass a language parameter to have the box rendered in a language other than English?

Even if I have changed the language in my Facebook account to Spanish the box is still rendered in English on sites using this box.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:55:13.107

找到了答案，它是使用适当的语言环境加载 javascript SDK，如下所述：http: [//developers.facebook.com/docs/internationalization/](http://developers.facebook.com/docs/internationalization/)

```
//connect.facebook.net/es_LA/all.js 
```

# android - Trace -> error opening trace file: No such file or directory (2)

> ID：12936493
> 
> 赞同：2
> 
> 时间：2012-10-17T14:22:00.627
> 
> 标签：android, file, trace

> **Possible Duplicate:**
> [error opening trace file: No such file or directory (2)](https://stackoverflow.com/questions/11446049/error-opening-trace-file-no-such-file-or-directory-2)

i know this question is maybe answered before, but reading them i dont know how to resolve my problem.

This is my problem, i have this error message in the beginning of aplication, but despite this it works without problem, but error exits.

The error appear when i use files, but i dont use SD memory (so i think i dont need to modify manifest).

Someone know how to solve and help me? or maybe it's not important?

THANK YOU!!

This is the java code:

```
public class MainActivity extends Activity {

private Resultados Datos;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    this.Datos = new Resultados();
    String[] archivos = fileList();
    Log.v("myActivity"," "+archivos.length);

    // Si no hay creado ningun archivo, creamos el primero todo a 0
    if(archivos.length == 0) {

        try {
            OutputStreamWriter fout = new OutputStreamWriter(openFileOutput("Resultados", Context.MODE_PRIVATE));

            Log.v("myActivity", "AHORA ESCRIBO");

            fout.write(Datos.getSesentas()+"\n");
            fout.write(Datos.getSetentas()+"\n");
            fout.write(Datos.getOchentas()+"\n");
            fout.write(Datos.getNoventas()+"\n");
            fout.write(Datos.getDosmiles());
            fout.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    // Si existe el fichero, lo cargamos en un nuevo objeto resultados
    else {

        try {
            BufferedReader carga = new BufferedReader(new InputStreamReader(openFileInput("Resultados")));

            Log.v("myActivity", "AHORA LEO");

            this.Datos.setSesentas(carga.readLine());
            this.Datos.setSetentas(carga.readLine());
            this.Datos.setOchentas(carga.readLine());
            this.Datos.setNoventas(carga.readLine());
            this.Datos.setDosmiles(carga.readLine());
            carga.close();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }        

    Log.v("myActivity", this.Datos.getDosmiles());

}

public void StartPlay (View v) {
    Intent Inicio = new Intent(MainActivity.this, Tabla.class);

    //Creo el bundle para pasar la informacion a la siguiente actividad

    Bundle Informacion = new Bundle();

    Informacion.putString("60", this.Datos.getSesentas());
    Informacion.putString("70", this.Datos.getSetentas());
    Informacion.putString("80", this.Datos.getOchentas());
    Informacion.putString("90", this.Datos.getNoventas());
    Informacion.putString("00", this.Datos.getDosmiles());

    Inicio.putExtras(Informacion);

    startActivity(Inicio);      
}

public void ShowHelp (View v) {
    Intent Ayuda = new Intent(MainActivity.this, Help.class);
    startActivity(Ayuda);
} 
```

}

# javascript - JavaScript changes font-weight for no reason?

> ID：12936496
> 
> 赞同：0
> 
> 时间：2012-10-17T14:22:06.240
> 
> 标签：javascript, css, fonts

Got a bit of a weird issue with a site I'm working on. When I load the homepage my fonts found within the navigation and headings seem to loose some font-weight for some reason. I've managed to narrow it down to a small piece of javascript that only loads on the homepage, when removed all my fonts are nice and fat.

In the javascript (made for a slider) it doesn't mention h tags at all, or anything to do with font-weight. But yet it still seems to be effecting it.

Here's the JS, if anyone can see why this might be happening?

```
var sliderActive = $("#wrapper #slider-single")

sliderActive.not(":first").removeClass("active");

sliderActive.on("hover", function() {
    sliderActive.removeClass("active");
    $(this).addClass("active");
}); 
```

That's it. Like I say, if I remove this file the fonts are fine. No idea why :S

The CSS for the class active affects the slider you see here: [http://ember.lukeseager.com](http://ember.lukeseager.com)

```
.active .each {
    background-color: rgba(0,0,0,.1);
    -moz-transition: .3s ease; -webkit-transition: .3s ease; 
    -o-transition: .3s ease; -ms-transition: .3s ease; transition: .3s ease;
}
.active .home_video {
    top: 0px;
    z-index: 0;
} 
```

Any info you guys have would be amazing! Thanks!

EDIT: Testing this across browsers, it seems to just be an issue on Chrome (only tested on Mac so far). Maybe it's just a browser rendering issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:25:11.870

It's likely that the CSS class `.active` is defined to have another font-weight. SO when you add that class, the font-weight changes. Please double check your CSS via a Code Inspector after the script was executed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:34:55.987

它在[http://ember.lukeseager.com/wp-content/themes/ember/css/reset.css](http://ember.lukeseager.com/wp-content/themes/ember/css/reset.css)文件中：

```
h1, h2, h3, h4, h5, h6 { font-size:100%; font-weight:normal } 
```

更新：

你确定你说的是字体粗细，而不是字体大小吗？排版.css 包含：

```
.slider-heading { font-size: 1em !important; } 
```

该`!important`标志使其覆盖 layout.css 中的以下内容：

.each h2 { 字体大小：18px; }

# jquery - Compare each value checkbox with each input text id, if checked change value of input text with same id

> ID：12936499
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:22:19.347
> 
> 标签：jquery, checkbox

How compare the value in jquery multiple checkbox (same name, variable value) to the value of many input text (same name, variable value). And if the checkbox is checked, change the value of the corresponding input text?

```
 var modified = modified; (this is a reference value)        
    if ((checkbox checked value="111" == input text id="111")
    if ((checkbox nochecked value="222" == input text id="222")
    if ((checkbox nochecked value="333" == input text id="333")
    if ((checkbox checked value="444" == input text id="444")

    input text id="111" value="modified"
    input text id="222" value="no changes"
    input text id="333" value="no changes"
    input text id="444" value="modified" 
```

I really need it! thank you very much

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:42:14.037

好吧，让我放松一下我的大脑

这是你想做的吗？

您有一个具有不同值的复选框列表。如果您选中其中一个复选框，则 id="value of the checked checkbox" 的文本字段将其值更改为“已修改”。如果未选中该复选框，则相应文本字段的值应为“无更改”？

尝试这个

HTML

```
<input type="checkbox" class="mycheck" value="t111" />
<input type="checkbox" class="mycheck" value="t222" />
<input type="checkbox" class="mycheck" value="t333" />
<input type="checkbox" class="mycheck" value="t444" />

<input type="text" id="t111" />
<input type="text" id="t222" />
<input type="text" id="t333" />
<input type="text" id="t444" /> 
```

jQuery

```
$(document).ready(function() {
    $('.mycheck').change(function() {
        if($(this).prop('checked')) {
          $('#' + $(this).val()).val('modified');
        } else {
          $('#' + $(this).val()).val('no changes');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:36:30.737

您的问题不清楚且难以理解，但我会尽力回答。

当您说“多个复选框”时，我很好奇您使用的是什么工具。您是否在考虑 Eric Hynds 的多选等插件之一？使用该工具，您可以获取标准 Jquery 形式的所有检查值的数组：

```
var values = $('#myCheckboxes').filter(':checked').val(); 
```

然后设置一些 FOREACH 循环并检查该框的值是否与您感兴趣的任何输入字段的值匹配。我会将所有重要的输入字段标记为同一类，以便您可以轻松选择它们。

```
var inputs = $('.allInputs');
for(var i=values.length;i–;){
    $(inputs).each(...); // run a function with each input 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T10:34:45.917

如此简单......我的解释令人困惑。打扰一下！我只想要这个：

```
 $("input[@type='checkbox'][@name='chave']").each(
    function()
    {
    if(this.checked)
    {                           
    $("#"+this.value).val(categoria);
    }
    }); 
```

感谢 devnull69 和 Topher Hunt 的帮助！

# c# - Linq 在单次迭代中选择和聚合

> ID：12936501
> 
> 赞同：10
> 
> 时间：2012-10-17T14:22:24.710
> 
> 标签：c#, linq, aggregate

有没有办法用 linq 做到这一点而不枚举`fooCollection`两次？

```
var fooCollection = // get foo
var selectedIds = new List<int>();
var aggregateContent = String.Empty;

foreach (var f in foo)
{
    selectedIds.Add(foo.Id);
    aggregateContent += foo.Content
}

var results = new FooResults
{
    Content = aggregateContent,
    SelectedIds = selectedIds
};

return results; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-17T14:38:18.390

是的，您可以使用[Enumerable.Aggregate](http://msdn.microsoft.com/library/bb549218.aspx)方法：

```
var result = fooCollection.Aggregate(new FooResult(),
                                    (r,f) => 
                                    { 
                                        r.SelectedIds.Add(f.Id);
                                        r.Content += f.Content;
                                        return r;
                                    }); 
```

这具有无副作用的好处。我不喜欢 LINQ 中的副作用。=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:30:18.800

有一种可能性，但我认为这是一种黑客行为：

```
var aggregateContent = String.Empty;
var selectedIds = foo.Select(x => { aggregateContent += x.Content;
                                    return x.Id; })
                     .ToList(); 
```

我会选择你已经拥有的循环。它比您能想出的任何 LINQ 解决方案都干净得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:28:33.460

你可以这样做：

```
foo.ForEach(x => { selectedIds.Add(x.Id); aggregateContent += x.Content; }); 
```

我建议不要将 Content 连接成一个字符串，而是使用 a `StringBuilder`。

**编辑**

如果您没有实现`ForEach`for的 LINQ 扩展库，`IEnumerable`可以使用以下方法：

```
public static void ForEach<T>(this IEnumerable<T> enumeration, Action<T> action) 
{ 
    foreach(T item in enumeration) 
    { 
        action(item); 
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:39:56.633

您要求的是让 Linq 语句产生两个结果。linq 的整个想法是允许简洁的函数式编程风格而没有副作用。

如果您想要多个结果和良好的性能，则不应使用 Linq，而应使用常规 foreach。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-25T03:15:58.917

我也找不到所以我这样写

```
public static IEnumerable<V> SelectAggregate<T,V>(this IEnumerable<T> items,V seed,Func<V,T,V> func)
{
    foreach(var item in items)
    {
        seed    = func(seed,item);
        yield return seed;
    }
}

var array = new int[]{ 1,2,3 };
var sumArray = array.SelectAggregate(0,(seed,item) => seed + item).ToArray();
//// { 1,3,6 } 
```

# c# - 遍历 LinQ 到实体结果

> ID：12936503
> 
> 赞同：1
> 
> 时间：2012-10-17T14:22:36.270
> 
> 标签：c#, linq

> **可能重复：**
> [无法在 LINQ to Entities 查询中构造实体或复杂类型“”](https://stackoverflow.com/questions/12916080/the-entity-or-complex-type-cannot-be-constructed-in-a-linq-to-entities-query)

前几天我问了这个问题，实际上没有找到任何有效的答案 %100 我正在尝试比较两个表（事件和帐户）并将具有匹配客户 ID 的事件分配给任务。

```
 var tasks = (from i in data.Incidents
                     join a in data.Accounts on i.CustomerID equals a.Acct_CID
                     select new
                     {
                         creator_id = a.ID,
                         start_date = i.DateOpened,
                         end_date = i.DateCLosed,
                         product_code = i.ProductCode,
                         install_type = i.InstallType,
                         os = i.OSType,
                         details = i.Description,
                         solution = i.Solution,
                         creator_name = i.TechID,
                         category = i.Title,
                         text = "Ticket for" + " " + i.Name,
                         status_id = 7
                     }).ToArray().Select(x => new Tasks
                     {
                         creator_id = x.creator_id,
                         start_date = x.start_date,
                         end_date = x.end_date,
                         product_code = x.product_code,
                         os = x.os,
                         details = x.details,
                         solution = x.solution,
                         creator_name = x.creator_name,
                         category = x.category,
                         text = x.text,
                         status_id = x.status_id
                     });

   foreach (var item in tasks)
   {
     data.Tasks.Add(item);
   } 
```

这是任务类

```
 public class Tasks
      {
    [Key]
    public int id { get; set; }
    public string text { get; set; }
   // [CheckDateAtribute]
   [Display(Name="Start Date/Time")]
    [DataType(DataType.DateTime)]
    public DateTime start_date { get; set; }
    [DataType(DataType.DateTime)]
    [Display(Name = "End Date/Time")]
    public DateTime end_date { get; set; }
    [Display(Name="Details")]
    [Required]
    public string details { get; set; }
    public int owner_id { get; set; }
    public int creator_id { get; set; }
    public int status_id { get; set; }
    public string reply { get; set; }
    public string creator_name { get; set; }
    public string category { get; set; }
    public string solution { get; set; }
    public string os { get; set; }
    public string install_type { get; set; }
    public string product_code { get; set; }
} 
```

事件类

```
 public class Incidents
{
    [Key]
    public int IncidentID { get; set; }
    public string CustomerID { get; set; }
    public string ProductCode { get; set; }
    public string TechID { get; set; }
    public DateTime DateOpened { get; set; }
    public DateTime DateCLosed { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public string Solution { get; set; }
    public string Name { get; set; }
    public string OSType{ get; set; }
    public string InstallType { get; set; }
    public string AddOnSoftware { get; set; }
    public string ScreenShare { get; set; }
} 
```

另一个编辑：现在得到一个超时异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:43:53.497

您的问题是您正在尝试构造一个`Tasks`实例，但是您将项目作为*集合*初始化程序传递，而不是作为*对象*初始化程序或构造函数参数。

你需要改变

```
.Select(x => new Tasks{
     x.creator_id,
     x.start_date,
     ... }); 
```

进入

```
.Select(x => new Tasks{
     owner_id = x.creator_id,
     start_date = x.start_date,
     ... }); 
```

或者

```
.Select(x => new Tasks(
     x.creator_id,
     x.start_date,
     ... )); 
```

取决于您*通常*如何构建`Tasks`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:29:15.167

假设**任务**类如下：

```
class Tasks
{
    public int CreatorID { get; set; } 
    public DateTime StartDate { get; set; }
    public DateTime EndDate { get; set; }
    public int ProductCode { get; set; }
    public string InstallType { get; set; }
    public string OSType { get; set; }
    public string Details { get; set; }
    public string Solution { get; set; }
    public string CreatorName { get; set; }
    public string Category { get; set; }
    public string Text { get; set; }           
    public int StatusID { get; set; }  
} 
```

用法：

```
var tasks = (from i in data.Incidents
    join a in data.Accounts on i.CustomerID equals a.Acct_CID
    select new Tasks()
    {                            
        CreatorID = a.ID,
        StartDate = i.DateOpened,
        EndDate = i.DateCLosed,
        ProductCode = i.ProductCode,
        InstallType = i.InstallType,
        OSType = i.OSType,
        Details = i.Description,
        Solution = i.Solution,
        CreatorName = i.TechID,
        Category i.Title,
        Text = "Ticket for" + " " + i.Name,
        StatusID = 7
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:35:21.027

```
var tasks = 
    from i in data.Incidents
    join a in data.Accounts on i.CustomerID equals a.Acct_CID
    select new Task
    {                            
        creator_id = a.ID,
        start_date = i.DateOpened,
        end_date = i.DateCLosed,
        product_code = i.ProductCode,
        install_type = i.InstallType,
        os = i.OSType,
        details = i.Description,
        solution = i.Solution,
        creator_name = i.TechID,
        category = i.Title,
        text = "Ticket for" + " " + i.Name,
        status_id = 7
    }; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T14:36:59.067

试试这个：

```
var tasks =( from i in data.Incidents
join a in data.Accounts on i.CustomerID equals a.Acct_CID
select new 
{                            
    creator_id = a.ID,
    start_date = i.DateOpened,
    end_date = i.DateCLosed,
    product_code = i.ProductCode,
    install_type = i.InstallType,
    os = i.OSType,
    details = i.Description,
    solution = i.Solution,
    creator_name = i.TechID,
    category = i.Title,
    text = "Ticket for" + " " + i.Name,
    status_id = 7
}).ToArray().Select(x => new Tasks{
    creator_id = x.creator_id,
    start_date = x.start_date,
    end_date = x.end_date,
    product_code = x.product_code,
    os = x.os,
    details = x.details,
    solution = x.solution,
    creator_name = x.creator_name,
    category = x.category,
    text = x.text,
    status_id = x.status_id
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T15:15:28.870

我认为，您对我们实例化匿名对象和已定义类型的对象的方式感到困惑。如果我们从 Select 运算符中删除任务，则查询编译

```
var tasks = (from i in incidentsList
                       join a in accountsList on i.CustomerID equals a.Acct_CID
                       select new
                       {
                           creator_id = a.ID,
                           start_date = i.DateOpened,
                           end_date = i.DateCLosed,
                           product_code = i.ProductCode,
                           install_type = i.InstallType,
                           os = i.OSType,
                           details = i.Description,
                           solution = i.Solution,
                           creator_name = i.TechID,
                           category = i.Title,
                           text = "Ticket for" + " " + i.Name,
                           status_id = 7
                       }).AsEnumerable().Select(x => new
                     {
                         x.creator_id,
                         x.start_date,
                         x.end_date,
                         x.product_code,
                         x.os,
                         x.details,
                         x.solution,
                         x.creator_name,
                         x.category,
                         x.text,
                         x.status_id
                     }); 
```

但是，当我们在 Select 运算符中实例化已定义类的对象时，必须将值分配给类的属性。否则，编译器将初始化的结果视为一个集合。这就是您的查询未编译的原因。

# jquery - 我应该在 WebView 上使用 Regx、插入 JQuery 或 HTML 解析来获取其内容吗？

> ID：12936506
> 
> 赞同：4
> 
> 时间：2012-10-17T14:22:41.937
> 
> 标签：jquery, objective-c, uiwebview

**Acceptance creteria-ish** 我有一个网站（*不是我*的），我在 WebView 中显示。根据页面的内容，我喜欢提供原生按钮点击（按钮不是问题）。

**需要做什么** 我需要检查 HTML 内容是否包含 2-3 个特定的 url。该网址可能位于页面上的 2-3 个位置。如果网址不存在（有时存在，有时不存在），我需要再次搜索内容以创建要启动的网址。

**可能的解决方案**

1.  *屏幕抓取*使用 Objective-C-HMTL-Parser、HPPLE、ElemetParser、XPathQuery 和 libxml2 来解析 HTML 并搜索内容。**优点**：容易***缺点***：*需要格式良好的 HTML/XML。对于树下的许多并发搜索可能会很慢。*
2.  使用*正则表达式*。**优点**：？**缺点**：*难以快速读/写。需要格式良好的 HTML/XML。许多并发搜索可能很慢。（还没有尝试过*RegexKit Light）。
3.  *插入 jQuery*搜索函数插入 WebView 并从 Objective-c 调用函数。WebViewJavascriptBridge看起来很有希望用于在 Js 和 ObjC 之间进行通信（还查看了 TGJSBridge、GAJavaScript 和 iOS-JavaScript-Bridge [Prons](https://github.com/marcuswestin/WebViewJavascriptBridge) **：**易于*将 Jquery 注入 WebViewJavascriptBridge 代码并使用 dele* **Cons** : *Cumbersome*调用它。
4.  *我错过了另一个解决方案吗？*

我倾向于解决方案。3\. 使用[WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)我将搜索 JQuery 函数注入到一个处理程序中，当他们找到某些东西时将调用该处理程序。我可以在多个线程中运行此搜索还是在树下搜索一次并找到我的所有搜索项？

**回顾**：

-1。在您自己的网络中搜索（多）内容的“最佳”/最快解决方案是什么？

-2。我错过了另一个解决方案吗？

-3。是否可以在一个线程中运行多个 JQuery 搜索，每次找到某些东西时将结果返回给 Objc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:45:56.457

回答您的问题 #2（您错过的任何其他方法）：

您可以进行解析和所有其他工作，但只是为了查看 HTML 内容是否包含某些 URL，NSString 的 rangeOfString 方法是否足够？当然，这取决于 URL 的格式以及您到底需要什么（搜索任何提及的 URL？在某个标签内提及 URL？URL 是否会出现在不应该被考虑的其他地方？）。

但是从您的问题中，我了解到该任务有点复杂，所以您能否提供一个 html 片段？

# c++ - 从核心转储中识别 auto_ptr 后面的具体对象类型

> ID：12936510
> 
> 赞同：5
> 
> 时间：2012-10-17T14:22:46.913
> 
> 标签：c++, gdb, postmortem-debugging

我有一个`auto_ptr<IFoo>`, where`IFoo`是一个只有纯虚拟方法的接口。

我现在在分段错误之后也有一个核心文件，我真的很想知道这个 auto_ptr 背后的具体子类是什么。作为`dynamic_cast`项目中的工作，我认为 RTTI 必须以某种方式可用，但我不知道我将如何通过`gdb`？

我得到的输出如下：

```
(gdb) print this->obj._M_ptr
$22 = (class martin::IFoo *) 0x7418 
```

我真正想知道的是，如果指针属于 an`IBar`或 an `IBaz`。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:28:13.850

> 我真正想知道的是，指针是否属于 IBar 或 IBaz

GDB 应该可以告诉你。使用`(gdb) set print object on`. 文档[在这里](http://sourceware.org/gdb/onlinedocs/gdb/Print-Settings.html)。

> 显示指向对象的指针时，使用虚函数表识别对象的实际（派生）类型而不是声明的类型。注意虚函数表是必需的——这个特性只适用于具有运行时类型标识的对象；对象声明类型中的单个虚拟方法就足够了。

更新：

> 它只输出 IFoo* 接口

这可能意味着指针确实指向`IFoo`（例如，该类型的对象`IBar`或`IBaz`已被破坏的对象）。

> 使用 dynamic_cast 是否意味着

是的，`dynamic_cast`没有 RTTI 就无法工作；如果您正在使用`dynamic_cast`，`print object on`应该可以正常工作。

# c# - 获取 IEnumerable 的选定值 从下拉列表

> ID：12936512
> 
> 赞同：2
> 
> 时间：2012-10-17T14:22:50.950
> 
> 标签：c#, drop-down-menu, ienumerable

我有一个下拉列表如下：

```
DropDownList1.DataSource = Students.GetStudents();
DropDownList1.DataBind();
----------- 
```

我有一个 DataAccess 类，如下所示：

```
public IEnumerable<StudentEntity> GetStudents()
{
List<StudentsEntity> studentsList = new List<StudentsEntity>();
studentsList = Service.GetList()  // some service getting a list of sutdents

return new BindingList<StudentEntity>(studentsList);
} 
```

我有一个 DataObject 类，如下所示：

```
public class StudentEntity : IComparable
{
  public string fullname { get {return firstName +", "+ lastName;}
  public string ID {get; set;}
  public string Height {get; set;}
  public string Firstname {get; set;}
  public string Lastname {get; set;}
  public int CompareTo(object obj)
  {
     StudentEntity entity = (StudentEntity) obj;
     return Lastname.CompareTo(entity.Lastname);
  }
} 
```

在 UI 级别 - “学生全名”显示在下拉列表中，那么如何从下拉列表中获取所选学生的“ID”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:27:02.763

从 DropDownList 中获取所选项目并将其转换为 StudentEntity 类型的对象。之后，您可以获得该对象的 ID。伪代码：

```
var selectedItem = myDropDown.SelectedItem as StudentEntity;
var ID = selectedItem.ID; 
```

**编辑：**

'hvd' 正确地评论了我。由于这是在网络上下文中，因此您必须实现这一点有点不同。您可以设置 DropDownList 的 DataTextField 和 DataValueField。将 ID 绑定到 DataValueField，当您获取 SelectedItem 时，获取 Value-property 并且您拥有 ID。

```
var selectedItem = myDropDown.SelectedItem;
var ID = selectedItem.Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:24:46.153

在事件处理程序中：

```
var id = ((StudentEntity)sender).Id; 
```

# eclipse - Eclipse 中的 Tomcat 部署自动化

> ID：12936515
> 
> 赞同：0
> 
> 时间：2012-10-17T14:23:06.380
> 
> 标签：eclipse, apache, tomcat, deployment, eclipse-plugin

我正在使用 eclipse indigo 和 tomcat 6。
我有两个项目，一个用于 Web 内容（XML、HTML、JSP、JS），一个用于应用层（Java 类）。
我使用 Eclipse 中的“部署程序集”和“项目首选项”链接了 Web 项目。
但是，每当我更改应用程序项目中的 java 文件并重新启动服务器时，它不会部署在 tomcat 中。
每次，我都应该清理 tomcat，构建项目并运行 tomcat 以查看更改。
你能告诉我一个插件、附加组件或一个技巧，我可以自动化这个过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:35:28.147

Eclipse 会为您完成这项工作。打开 Project / Build Automatically，然后在 Tomcat 概览中（双击服务器视图中的服务器），在 Publishing 下，选择 Automatically publish when resources change，并将 Publishing interval 设置为某个较低的数字。

# c - C - 使用 _int16 时出现异常

> ID：12936521
> 
> 赞同：1
> 
> 时间：2012-10-17T14:23:25.603
> 
> 标签：c, exception, stack, int, addition

> **可能重复：**
> [使用固定大小类型的 scanf / printf （和系列）的正确方法？](https://stackoverflow.com/questions/12936798/correct-way-to-use-scanf-printf-and-family-with-fixed-size-types)

我在 Visual Studio 中编写了以下程序：

运行程序并退出时，我收到错误消息“变量 b 周围的堆栈已损坏”。如果我将 _int 16 替换为 int，则不会引发异常。请问我该如何解决这个问题？我必须使用 _int16 因为我想模拟整数溢出。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:33:10.990

正如评论中指出的，解决方案是替换

```
scanf("%d", &a); 
```

和

```
scanf("%hd", &a); 
```

# bean-validation - jsr303 仅使用一个自定义验证器验证 2 个属性

> ID：12936522
> 
> 赞同：1
> 
> 时间：2012-10-17T14:23:27.243
> 
> 标签：bean-validation

我的验证有问题。是否可以仅使用一个 ConstraintValidator 来验证 bean 的两个属性？我有以下内容：

```
@Component
public class CheckSomeBeanPropertiesValidator implements ConstraintValidator<CheckSomeBeanProperties, SearchFormBean> {

@Autowired
SomeApplicationService applicationService;

public void initialize(CheckSomeBeanProperties checkSomeBeanProperties) {
}

public boolean isValid(SearchFormBean searchFormBean, ConstraintValidatorContext context) {

ReturnSearchBean searchBean = applicationService.findBySearchBean(searchFormBean);

if(searchBean.isNoResults()) return false; // it will return the message No data found

if(searchBean.isTooManyDataReturned()) return false; // it will return too many records found

return true;
}
} 
```

在 CheckSomeBeanPropertiesValidator 中，我调用了 SomeApplicationService 服务，该服务返回一些搜索到的数据，调用 findBySearchBean。是否可以只调用一次服务并检查两个不同的属性，而不是调用多个自定义的 ConstraintValidator（和多个 findBySearchBean）？

谢谢

再见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:06:24.430

如果要根据验证结果更改错误消息，则应使用*ConstraintValidatorContext*。您可以禁用默认错误消息并构建自己的错误消息。就像是：

```
 constraintContext.disableDefaultConstraintViolation();
 constraintContext.buildConstraintViolationWithTemplate( "{mykey}"  ).addConstraintViolation(); 
```

您还可以调整约束冲突的属性路径。*ConstraintValidatorContext*提供了一个流畅的 API。只需检查 Javadocs 或使用您的 IDE 进行探索 :-)

# python - 使用 selenium webdriver 的 tcp/ip 端口耗尽

> ID：12936533
> 
> 赞同：2
> 
> 时间：2012-10-17T14:23:55.413
> 
> 标签：python, selenium, webdriver, urllib2, tcp-ip

我正在使用 selenium webdriver（用 Python 编写）进行一套测试。正在测试的页面包含一个表单，该表单根据在其中一个选择框中选择的值更改其显示字段。这个选择框有大约 250 个选项。我有一个测试（通过鼻子运行，尽管这可能无关紧要），它遍历选择框中的所有选项，验证表单是否为每个选定的选项显示了正确的字段。

问题在于，对于每个选项，它都通过 selenium 调用：

*   单击以选择选项
*   7 个字段的 find_element 和 is_displayed
*   选择框中项目的 find_elements
*   选择框中每个选项的 get_attribute 和文本

因此，在大约 10 或 15 分钟内，对运行测试的 webdriver 服务器产生了（大约）250 * (7 * 2 + 1 + 2 * 250) 或 128,750 个不同的请求。在某些情况下，这会导致运行测试的机器上的客户端端口耗尽。这一切都是通过一个测试框架运行的，该框架抽象出诸如如何解析选择框、何时创建新页面对象以及其他一些内容，因此测试代码中的优化要么意味着将所有内容都搞砸，要么扔掉这个测试的框架并手动完成所有事情（为了我们测试代码的可维护性，这是一个坏主意）。

我对解决方案的一些想法是：

*   试图以某种方式汇集或重用与 webdriver 服务器的连接
*   以某种方式调整`urllib2`或`httplib`在运行时的配置，以便由 selenium 超时打开的连接或更快地被杀死
*   系统独立（或至少可用于所有具有 OS 开关或类似系统的系统）机制，用于主动跟踪和关闭 selenium 打开的端口

正如我上面提到的，我无法调整页面的解析或处理方式，但我确实可以控制子类化/调整`WebDriver`或`RemoteConnection`任何我喜欢的方式。有没有人对如何处理上述任何想法或我没有提出的任何想法有任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:33:07.653

在尽可能多的塑料炸药解决忘记你家钥匙的问题中，我实施了一个解决方案。我创建了一个类，它跟踪资源列表及其添加时间，达到限制时阻止，并在其时间戳超过超时值时删除条目。然后，我创建了一个此类设置的实例，限制为 32768 个资源，超时时间为 240 秒，并让我的测试框架在每次`webdriver.execute()`调用或其他一些操作（db 查询、REST 调用）时向列表添加一个条目执行。它不是特别优雅，而且相当随意，但至少到目前为止，它似乎使我的测试不会触发端口耗尽，而不会显着减慢以前没有导致端口耗尽的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T08:21:03.923

有同样的问题。我也会发布我的解决方案以供将来参考（虽然它很可能不如你的好，但它是基本的，我不能浪费我的时间在这上面）。

我不知道为什么 Selenium 会为每个 javascript 调用创建新的套接字。听起来像架构问题。

这使得任何类型的爬取都非常困难，并且也会导致冗长的集成测试失败。

一些潜在的修复：

1) 开始使用 linux - 我在某处读到一个家伙仅在 Windows 系统上出现此端口耗尽。显然，这不是一个好的解决方案。

2) 按照 msdn 文章避免 tcp/ip 端口耗尽，这是为我做的。[https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx](https://msdn.microsoft.com/en-us/library/aa560610(v=bts.20).aspx)

也就是说，你应该增加`MaxUserPort`和减少`TcpTimedWait`。这些可以在没有管理员访问权限的情况下进行修改，也许您的测试可以包括对这些设置的注册表检查。

3) 创建新类，让旧的 tcp 连接终止：

```
public class LoanCrawlerSpeedController : ILoanCrawlerSpeedController
{
    private DateTime _lastCheckpointTime = DateTime.Now;

    public void Checkpoint()
    {
        var currentCheckpointTime = DateTime.Now;
        if (currentCheckpointTime - _lastCheckpointTime > TimeSpan.FromSeconds(30))
        {
            Thread.Sleep(TimeSpan.FromSeconds(32));
            _lastCheckpointTime = DateTime.Now;
        }
    }
} 
```

每个触发新 tcp/ip 端口的 selenium 调用都应使用该方法（`Checkpoint()`）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-05-08T11:46:45.220

在 selenium repo 中创建了一个问题： [https](https://github.com/SeleniumHQ/selenium/issues/4162) ://github.com/SeleniumHQ/selenium/issues/4162 内部有一些解决方法：

[选项1](https://github.com/SeleniumHQ/selenium/issues/4162#issuecomment-472029006)

[选项2](https://github.com/SeleniumHQ/selenium/issues/4162)

# android - GCM 仅带 WiFi 平板电脑

> ID：12936535
> 
> 赞同：3
> 
> 时间：2012-10-17T14:23:57.017
> 
> 标签：android, push-notification, android-wifi, google-cloud-messaging

[我在android-gcm 谷歌群组](https://groups.google.com/forum/#!topic/android-gcm/HUnST1D0aE4)上发布了这个问题，但没有得到任何回复。

我有一个用例，我需要使用我的应用程序更新数百个仅支持 Wi-Fi 的平板电脑，并且我想使用 GCM 来实现这个目标。但是，我无法从文档中弄清楚我是否可以使用 IP（可能会根据位置而改变）或使用开发设备 ID 或 wi-fi mac 地址来注册仅 wi-fi 的设备。

我提到的三种方法中哪一种是发送通知以更新我的应用程序的较新版本的可靠方法？如果这些都不是正确的选择，我的选择是什么，因为我无法拥有与这些设备关联的电话号码。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:32:09.343

我不认为 GCM 依赖于 IP 地址。我在我的应用程序上使用 GCM，它在 wifi 平板电脑和手机上运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:45:00.230

审查 GCM 我看不到您设备的 ip/电话号码的相关性。可能是您需要 GSM 网络才能使 GCM 工作，但我怀疑，我猜对于平板电脑，谷歌在设备上实施了轮询服务器或类似服务器。

你只需要你的google project id作为你的sender ID并且你需要在google API控制台中启用GCM，你需要在你的app中使用google GCM API jars来获取一个注册号并发送到你自己的服务器，你的服务器比使用 OAuth2 协议联系 Google 向他们发送您的注册 ID。每次注册后，您需要向所有用户发送消息，您只需要覆盖服务器中的所有用户并向谷歌服务器发出请求（使用您将从 OAuth 身份验证中获得的值）。

# javascript - iframe 关闭而不刷新包含 iframe 的主页

> ID：12936536
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:23:58.990
> 
> 标签：javascript, asp.net, iframe

我在 iframe 看起来像主 asp.net 页面上的 div 的页面中使用 iframe。在 iframe 页面中，我有一个关闭按钮，当我单击关闭按钮时，我正在 iframe 页面中调用一个 javascript 函数，其代码如下：

window.location.href = "页面名称.aspx";

此行关闭 iframe，但包含 iframe 的主页在关闭 iframe 后会刷新，所以.... 我尝试了多种方式来关闭 iframe 而没有像

窗口.close();

但它不工作。关闭 iframe 的主要问题是关闭 btn 在 iframe 页面中它自己所以如果我编写代码来关闭 iframe 页面中的 iframe 不起作用.....

主要问题是 iframe 关闭 btn 应该像 div close btn 一样工作，这意味着当我单击关闭 btn 时，可以将 div 设置为无显示但 iframe 当可以在主页中访问 iframe 值时如何使其关闭包含 iframe 但该 iframe 页面无法获取 iframe 名称....

那么，你能帮我解决这个问题吗.. 关闭 iframe 而不刷新包含 iframe 的主页。提前谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:30:22.400

你控制父页面吗？您可以将脚本关闭父级中的 iframe。因此，在您拥有的父页面中

```
function myCloseIframeFunction(){
  /*close iframescript*/
} 
```

然后从 iframed 页面调用 parent.myCloseIframeFunction()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:48:23.013

`Page which is being called in Iframe`在..Call this function on Close button Client Click Event中编写以下 Javascript 函数...

```
 function close()
       {
                var ifr = parent.document.getElementById(IframeId);
                ifr.parentNode.removeChild(ifr);
       } 
```

# java - 编译器看不到的分支

> ID：12936542
> 
> 赞同：5
> 
> 时间：2012-10-17T14:24:25.977
> 
> 标签：java, if-statement

这是Java语言的代码片段：

```
 public void name(){
int value = 9;
 int o;
if(value > 9)
 o = 5;

if(value <= 9)
o = 8;

System.out.println(o);
} 
```

考虑到值的最后一个选项，为什么编译器看不到第二个 if 语句？它不会编译。最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:29:36.633

`value`除非您另有说明，否则编译器必须将其视为可变的。声明它可以`final` [解决问题](http://ideone.com/TyYI0)：

```
public void name(){
    final int value = 9;
    int o;
    if(value > 9) o = 5;
    if(value <= 9) o = 8;
    System.out.println(o);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:22:17.870

原始版本无法编译的原因是[JLS 第 16 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)中的 JLS 的“确定分配”规则说`o`尚未确定分配。编译器会用一条神秘的消息报告这一点，上面写着“`o`可能尚未初始化”。

现在，任何具有简单演绎技巧的人都可以看出，第二个`if`条件是第一个`if`条件的否定，因此变量实际上总是会被初始化。但是，JLS 不允许编译器进行该推论。JLS 说这是一个错误...

有很多方法可以解决这个问题。例如

*   `o`在声明中分配一些东西。
*   `if`用单个`if`/语句替换这两个`else`语句。
*   声明`value`为`final`。

最后一个修复很有趣。它起作用的原因是 JLS 明确分配规则*要求*编译器将编译时常量布尔值表达式的值考虑在内。

本声明（附`final`）

```
 final int value = 9; 
```

意味着这`value`是一个编译时常量。这意味着`value <= 9`并且`value > 9`也是编译时常量。因此，JLS 明确分配规则指出，`o`在之后明确分配

```
 if(value <= 9) o = 8; 
```

并且可以在以后使用而不会出现编译错误。

* * *

明确的赋值规则旨在防止使用未初始化的变量，并防止空白`final`变量被多次初始化。

JLS 在明确分配规则中对表达式值的保守处理旨在避免出现以下问题：一个 Java 编译器推断出某些东西是明确分配的，而另一个则不能。编译时常量表达式的子情况可以通过简单地计算表达式来处理，JLS 规则隐含地认识到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:29:09.690

编译期间：

编译器发现您尚未初始化变量 'o' 并且您正在 sysout 中打印。

你可以做到这一点：

```
public void name(){
int value = 9;
 int o;
if(value > 9)
 o = 5;

else
o = 8;

System.out.println(o);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:30:48.780

在声明它之后在 if 语句之前初始化 o

```
o=0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:52:34.420

根据 JLS [（第 16 节）](http://docs.oracle.com/javase/specs/jls/se5.0/html/defAssign.html#25979)，每个局部变量和非空白字段必须在使用之前*明确分配*。编译器会做一些基本的静态分析来确保它。

> 明确赋值背后的想法是，对局部变量或空白最终字段的赋值必须发生在访问的每个可能的执行路径上。类似地，明确取消赋值背后的想法是不允许在任何可能的赋值执行路径上发生对空白最终变量的其他赋值。

静态分析器只能推断出常量表达式的值[（15.28 美元）](http://docs.oracle.com/javase/specs/jls/se5.0/html/expressions.html#5313)，而在您的示例中并非如此。

# nhibernate - 为什么 Nhibernate 更新我的 guid？

> ID：12936545
> 
> 赞同：1
> 
> 时间：2012-10-17T14:24:36.723
> 
> 标签：nhibernate, guid, updates

我的班级有一个可以为空的 guid 属性**，它不是它的标识符**。guid 用于以特定方式对记录进行分组，以便许多记录可以具有相同的 guid。每次我更新一些其他属性时，nhibernate 都会更新 guid，这不是预期的结果。

这是映射：

```
<class name="MyClass" table="SomeTable">
    <id name="Id" column="SomeTableId" type="Int32" >
      <generator class="native">
        <param name="sequence">SomeTableSequence</param>
      </generator>
    </id>
    <property name="Instant" column="Instant" />
    <property name="Value" column="Value" />
    <property name="Description" column="Description" />  
    <property name="Group" column="GroupId" /> <!-- this is the GUID -->
  </class> 
```

我应该怎么做才能阻止这种行为？

**更新**

我忘了提到我只是在做一个 ISession.Update 调用：

```
public void Update(MyClass myInstance) {
    _session.Update(myInstance);
    _session.Flush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:35:18.390

由于我没有太多时间，我最终“手动”进行了更新。如果有的话，我很乐意接受另一个答案。

# asp.net - 文件上传 - 视频验证

> ID：12936546
> 
> 赞同：2
> 
> 时间：2012-10-17T14:24:43.763
> 
> 标签：asp.net, .net, asp.net-mvc

如何检查通过标准 html 上传到我的服务器的文件是否是视频文件？

我认为文件扩展名和 mime 检查没有用，因为它们可能是伪造的。我尝试使用这个脚本，它部分工作，但由于某种原因，它似乎没有验证 wmv 和 mp4 格式。

[http://mynkow.blogspot.co.uk/2010/05/how-to-validate-video-file.html](http://mynkow.blogspot.co.uk/2010/05/how-to-validate-video-file.html)

任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:39:03.280

没有实际播放视频并亲自观看，您**绝对**需要验证视频，然后我会使用 FFmpeg 之类的东西。更具体的是，FFMpeg 中的一个名为 FFprobe 的工具 - 更好的是它是免费的。

“FFprobe 是一个简单的多媒体流分析器。”

[http://ffmpeg.org/ffprobe.html#Main-options](http://ffmpeg.org/ffprobe.html#Main-options)

有一个开关“-show_format”看起来很有希望

我实际上并没有使用过 FFprobe，所以它是理论上的，但是我已经编写了 C# 来使用 FFMpeg 将 1080p 视频编码为多个比特率用于网络流媒体，并且它做得很好。

```
ffprobe -show_format [input_file] 
```

希望这可以帮助 ：）

# java - How to print french characters on console using java 1.4

> ID：12936553
> 
> 赞同：2
> 
> 时间：2012-10-17T14:25:06.917
> 
> 标签：java, character-encoding

from past 5 hours i have been working on an issue related to french characters.

The actual problem is like, some french characters are stored in database(oracle), and m trying to read them and output to a word file.

to surprise, all the french assented characters are displayed as '?'. initially i thought it would be the problem with encoding format and tried to work on it. but, i could not figure it out.

The java version which i am running my app is an 1.4, with tomcat 5\. I narrowed my issue and thought of printing normal french characters on console, to my surprise they are printed as ??. then after surfing for about 2 hours, i understood a little on encoding and default charset which java uses. Interestingly i found 2 methods on google that could fit to my soultion. but as i tried them, they were of no use, they are still printing ?? on console. Could you please clarify me or provide me the solution, or where m going wrong.

Here are code snippets which i have tried.

```
public static void test() {
    System.out.println("in test");
 PrintStream ps = null;
 String javaString = 
  "caractères français :  à é \u00e9";  // Unicode for "é"

 try {
   ps = new PrintStream(System.out, true, "Cp850");
 } catch (UnsupportedEncodingException error) {
   System.err.println(error);
   System.exit(0);
 }

 ps.println(javaString);
} 
```

The second one is:

```
public static void main(String args[]){
String javaString = 
  "caractères français :  à é \u00e9";  // Unicode for "é"
try {
  // output to the console
  Writer w = 
    new BufferedWriter
       (new OutputStreamWriter(System.out, "Cp850"));
  w.write(javaString);
  w.flush();
   test();
  w.close();  
  test();
  }
catch (Exception e) {
  e.printStackTrace();
  }
} 
```

# r - 合并数据并接收大量数据丢失

> ID：12936556
> 
> 赞同：6
> 
> 时间：2012-10-17T14:25:19.000
> 
> 标签：r, merge, duplicates

我一直在准备我的数据，但不知何故，在合并我的数据集后我的数据少了很多。

**由于我的数据中没有经度和纬度，因此在下载包邮政编码**后我一直在使用以下代码（`tel1`我的数据包含邮政编码）

```
merge <- merge(zipcode,tel1,by.x=c('zip'),by.y=c('zip_code')) 
```

在合并之前我有 195956 个观察值，而在合并之后它下降到 180090，但我不明白为什么。

在我看来，我只是将它们合并到`zip`等于的位置，`zip_code`并将数据集邮政编码中的信息添加到我的文件夹 tel1

之后我想删除包含 NA 的行，因为合并无法定义任何数字或其他内容。我用了这段代码

```
final <- result[complete.cases(result),] 
```

然后我的观察次数下降到 51006，我简直不敢相信。我的数据中不可能有这么多的不匹配。

还有其他我应该使用的代码吗？

之后我一直在尝试使用代码删除重复项

```
 last <- with(final,final[order(state,latitude,longitude),]) 
```

但观察次数是一致的（51006）。

我做错了什么，或者有没有办法在合并数据后再次将我的数据放入 excel 文件中，以便我可以手动检查是否真的有这么多不匹配？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-17T14:52:49.600

可以使用`all`参数来`merge`。

```
merge(zipcode, tel1, by.x='zip', by.y='zip_code', all.y=TRUE) 
```

但是，对于在邮政编码数据中未找到匹配项的行，将有`NA`s。因此，如果您当时`na.rm`或类似的结果，您将最终遇到相同的“数据丢失”

检查合并后 lat 和 long 列中存在 NA 的行的邮政编码：

```
tel1[is.na(tel1$latitude) | is.na(tel1$longitude),] 
```

我的猜测是它们不是有效的邮政编码，或者您拥有的邮政编码列表不完整。

# java - Java - dom4j XPath for children nodes

> ID：12936561
> 
> 赞同：3
> 
> 时间：2012-10-17T14:25:37.143
> 
> 标签：java, xml, xml-parsing, sax, dom4j

I am using `[dom4j]`[1](http://dom4j.sourceforge.net/dom4j-1.6.1/guide.html) and `[XPath]`[2](http://zvon.org/comp/r/tut-XPath_1.html#Pages~List_of_XPaths) in order to traverse an XML.

Assume I have in hand a `Node` which has children nodes, each of which has the same tag name. e.g. (refer to the `b` node):

```
<a>
    <b>...</b>
    <b>...</b>
</a> 
```

I tried to use `selectNodes("//b")` but it returns all of the nodes within the **document** which their open tag is `b`.

How can I traverse only the children nodes of a specific node, where all the children nodes have the same tag name (e.g. `b`).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:29:24.777

```
selectNodes(".//b") 
//-----------^ 
```

`.`是 XPath 中的当前节点。

请注意，它`//`是`/descendant-or-self::node()/`. 这意味着它还将选择嵌套节点。

你说的是孩子，这不是一回事。对于子节点使用：

```
selectNodes("./b") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:32:01.493

尝试`selectNodes("a//b"`) 如果您想要所有`<b>`元素，无论它们是孩子还是孩子的孩子。如果你只想要use`<b>`的子元素。`<a>``selectNodes("a/b")`

如果您知道该节点`<a>`将是根节点的子节点，则可以在前面添加 / 表示您只选择根节点的子节点，如下所示：`selectNodes("/a//b")`

有关详细信息，请参阅[xpath 语法](http://www.w3schools.com/xpath/xpath_syntax.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:31:50.420

你可以这样使用

```
//a/b 
```

并且`a`可以是您的特定节点。

# javascript - Switch threejs from TrackBall to Fly Control

> ID：12936563
> 
> 赞同：2
> 
> 时间：2012-10-17T14:25:44.487
> 
> 标签：javascript, three.js

I want to change from TrackBall to Fly Controls and, although I followed the answer provided on [Switch threejs controls ( from TrackBall to FlyControls and vice versa)](https://stackoverflow.com/questions/11304998/switch-threejs-controls-from-trackball-to-flycontrols-and-vice-versa) , I couldn't get it to work properly.

If I "rotate" the model using the trackball (by clicking on it and moving the mouse), when I switch to fly I may lose sight of the object.

My guess is that it's not enough to save the position/rotation of the previous camera, but I also need to save something else, like the world matrix position/rotation. But dunno if it's the correct way.

Example here:

[http://webgl.zelda.com.br/index2.html?m=Ghirahim](http://webgl.zelda.com.br/index2.html?m=Ghirahim)

[http://webgl.zelda.com.br/index2.html?m=Zelda](http://webgl.zelda.com.br/index2.html?m=Zelda)

# c++ - 在单个声明中声明超过 1 个指针

> ID：12936564
> 
> 赞同：-5
> 
> 时间：2012-10-17T14:25:46.733
> 
> 标签：c++

阅读加速 C++：关于是否`int* i`或`int *i`应该使用的讨论。这`int* p, q`实际上是`int (*p), q`。所以我想`q`只是一个int？（不是指针）？那么是否可以声明一堆指针呢？

我不认为`int *p, *q`会工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T14:26:23.847

> 我不认为 int *p, *q 会起作用吗？

会的，测试一下。这是**正确的方法**。

为了避免这种混淆，另一种选择是分别声明它们

```
int* p;
int* q; 
```

* * *

> 所以我想 q 只是一个 int

in `int* p, q`- 是的，它*是* `int`，而*不是*指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:56:20.460

```
template<typename T> using ptr = T*;

ptr<int> p, q; 
```

# jquery - 将对象保存在解析它的变量中

> ID：12936566
> 
> 赞同：1
> 
> 时间：2012-10-17T14:26:00.757
> 
> 标签：jquery

我有这个对象：

```
 var eventsDates = new Array(
    "basket":"11-10-2012",
    "soccer":"21-10-2012",
    "soccer":"28-10-2012",
    "baseball":"25-11-2012",
    "baseball":"15-12-2012"
  ); 
```

我需要通过比赛提取日期，例如足球，而不是像这样保存结果

```
 var eventsDates = new Array(
    "21-10-2012",
    "28-10-2012"
  ); 
```

任何建议

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:32:52.587

看起来您是在建议您在数组中有一系列对象：

```
var events = [
    {"basket":"11-10-2012"},
    {"soccer":"21-10-2012"},
    {"soccer":"28-10-2012"},
    {"baseball":"25-11-2012"},
    {"baseball":"15-12-2012"}
];

var count = events.length, dates = [], m;

while (count--)
    if (m = events[count]["soccer"])
        dates.push(m);

console.log(dates); 
```

小提琴：http: [//jsfiddle.net/YX4Kq/](http://jsfiddle.net/YX4Kq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:34:10.393

不要混合`arrays`使用`objects`其中一种：

```
var eventDates = [
   "11-10-2012",
   "21-10-2012",
   "28-10-2012",
   "25-11-2012",
   "15-12-2012"
]; 
```

或者

```
var eventDates = {
  "basket":"11-10-2012",
  "soccer":"21-10-2012",
  "soccer":"28-10-2012",
  "baseball":"25-11-2012",
  "baseball":"15-12-2012"
}; 
```

也就是说，您不能重复使用相同的密钥（如`baseball`），因此最好的结构将是以下之一：

```
var eventDates = {
  "basket": ["11-10-2012"],
  "soccer": ["21-10-2012", "28-10-2012"]
  "baseball": ["25-11-2012", "15-12-2012"]
}; 
```

并像访问`eventDates.baseball`

```
$.each(eventDates.baseball, function (k, v) {
  alert(v);
}); 
```

您也可以执行以下操作，但随后您将不得不使用自定义提取器，这将涉及在您只需要特定日期的任何时候迭代整个数组`name`。

```
var eventDates = [
  {"name": "basket", "date":"11-10-2012"},
  {"name":"soccer", "date":"21-10-2012"},
  {"name": "soccer", "date":"28-10-2012",
  {"name": "baseball", "date":"25-11-2012"},
  {"name":"baseball", "date":"15-12-2012"}
]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:29:29.437

对于此类任务，我会考虑使用不同的数据结构：

```
var eventDates = {
    Soccer: [{
         date: ...
    ]},
    Basket: [{
         date: ...
    ]}
}; 
```

然后您可以轻松访问 fe 所有足球日期：

```
for (var i = 0; i <= eventDates.Soccer.length; i++) {
    // Do something with eventDates.Soccer[i]
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:30:51.823

```
 var eventsDates = {
    "basket":["11-10-2012"],
    "soccer":["21-10-2012","28-10-2012"],
    "baseball":["25-11-2012","15-12-2012"]
  }

var soccerDates = eventsDates.soccer; 
```

# mysql - 将gridview数据提交到mysql db

> ID：12936567
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:26:00.517
> 
> 标签：mysql, vb.net

我有一个 gridview 填充了我需要提交到 mysql 数据库的数据。我已经用 vb 做到了这一点，但不知道如何在 vb.net 中做到这一点。有人可以帮忙..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:52:06.030

网格视图如何填充？通过用户输入还是来自数据库？

# string - Converting special character to plain text in oracle

> ID：12936570
> 
> 赞同：0
> 
> 时间：2012-10-17T14:26:05.210
> 
> 标签：string, oracle, character-encoding, internationalization

we are having a database with utf8 as charset. now in one table we are having a value like 'HERBES-Herbe à poux' . now we have to convert it into 'HERBES-Herbe a poux' . i.e à-->a. We cannot have a replace function since the values are dynamic.

Please help us.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:10:07.787

对你来说，什么是“特殊人物”？US7ASCII 字符集之外的任何内容？

您可能会使用该[`CONVERT`功能](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions027.htm)

```
SELECT convert( <<your string>>, 'US7ASCII' )
  FROM table_name 
```

假设存在特定字符到 US7ASCII 字符集的映射，该映射将用于替换该字符。如果没有定义映射，则该字符将被默认替换字符替换，即问号“？”。

# jquery - jquery tab plugin using external method

> ID：12936572
> 
> 赞同：2
> 
> 时间：2012-10-17T14:26:11.017
> 
> 标签：jquery

I have written this very basic tab plugin.

How can I modify it so that changing the tab can be easily called from a external method.

```
/**
 * jQuery Tabs
 */
(function($) {
    $.fn.tabs = function(options) {
        var defaults = {
            tabs : "div.tab",
            expire : null
        };

        function setCookie(c_name, value, exdays) {
            var exdate = new Date();
            exdate.setDate(exdate.getDate() + exdays);
            var c_value = escape(value) + ((exdays == null) ? "" : ";path=/;expires=" + exdate.toUTCString());
            document.cookie = c_name + "=" + c_value;
        }

        function getCookie(c_name) {
            var i, x, y, ARRcookies = document.cookie.split(";");
            for (i = 0; i < ARRcookies.length; i++) {
                x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
                y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
                x = x.replace(/^\s+|\s+$/g, "");
                if (x == c_name) {
                    return unescape(y);
                }
            }
        }
        return this.each(function() {
            var settings = $.extend({}, defaults, options);
            var dis = $(this);
            var index = dis.index();
            var tabs = dis.find(settings.tabs);
            var tabs_menu = dis.find("ul.tabmenu li");
            var cookie = getCookie("tab_" + index);
            if (typeof cookie != "undefined" && dis.find("div.tab:eq(" + cookie + ")").length) {
                tabs.hide();
                dis.find("div.tab:eq(" + cookie + ")").show();
                tabs_menu.eq(cookie).addClass("selected");
            } else {
                tabs.hide().filter("div:first").show();
                tabs_menu.eq(0).addClass("selected");
            }
            dis.find("ul.tabmenu a").click(function(a) {
                tabs.hide();
                tabs.filter(tabs.eq($(this).parent().index())).show();
                tabs_menu.removeClass("selected");
                $(this).parent().addClass("selected");
                setCookie("tab_" + index, $(this).parent().index(), settings.expire);
                a.preventDefault();
                $(this).trigger('tabsselect');
            });
            dis.find("div.tab").each(function(a) {
                var b = dis.find("div.tab").size() - 1;
                if (a != b) {
                    $(this).append("<a href='#' class='next-tab'>Next Tab &#187;</a>");
                }
                if (a != 0) {
                    $(this).append("<a href='#' class='prev-tab'>&#171; Prev Tab</a>");
                }
            });
            dis.find(".next-tab").click(function(a) {
                var c = tabs_menu.filter(".selected").index() + 1;
                setCookie("tab_" + index, c, settings.expire);
                tabs_menu.removeClass("selected").eq(c).addClass("selected");
                $(this).parent().hide().next().show();
                a.preventDefault();
                $(this).trigger('tabsselect');
            });
            dis.find(".prev-tab").click(function(a) {
                var c = tabs_menu.filter(".selected").index() - 1;
                setCookie("tab_" + index, c, settings.expire);
                tabs_menu.removeClass("selected").eq(c).addClass("selected");
                $(this).parent().hide().prev().show();
                a.preventDefault();
                $(this).trigger('tabsselect');
            });
        });
    };
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:30:37.923

我建议只使用已经存在的 JQUery UI 选项卡。

但是你可以触发一个标签来打开

```
$(id_of_tab_link).trigger("click"); 
```

更干净一点，定义另一个函数 set_active_tab(i) （就像你对标签所做的那样）并执行类似的操作：

```
$(container).find("div.tab")[i].trigger("click"); 
```

这将在第 n 个选项卡上调用 trigger .. （或者，使用第 n 个选择器而不是数组索引）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:30:05.677

只需选择您应用选项卡的元素。

```
$('#somedivid').tabs({ pass in some configuration object to change the tab }); 
```

# vb.net - 这个 LINQ 代码有什么问题？

> ID：12936574
> 
> 赞同：0
> 
> 时间：2012-10-17T14:26:18.583
> 
> 标签：vb.net, winforms, linq, vb.net-2010

首先，我具有将 a 上的所有控件展平的功能`Control`：

```
Protected Function GetAllControls(Optional ownerControl As Control = Nothing) As IEnumerable(Of Control)

    Dim ret = New List(Of Control)()
    For Each child As Control In If(ownerControl, Me).Controls
        ret.AddRange(GetAllControls(child))
    Next
    ret.Add(ownerControl)
    Return ret

End Function 
```

然后，我想使用以下代码隐藏控件上的某些按钮：

```
Dim buttons = GetAllControls().Where(Function(c) c.Name.StartsWith("subButton"))
For Each ctrl As Control In buttons
    ctrl.Visible = False
    Debug.WriteLine("Hid button " & ctrl.Name)
Next 
```

然而，在四个按钮 - 正确的计数 - 被隐藏后，我得到一个`NullReferenceException`, VS2012 突出显示了 lambda 表达式。

什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:39:12.623

第一个函数的最后一行添加了`ownerControl`，第一次调用它时它是 null ，所以它在列表中添加了一个 Nothing 。在你的 lambda 中，你正在做一个`c.Name`什么时候会抛出异常`c`的事情。

# xml - 时间输入字段间距问题

> ID：12936576
> 
> 赞同：0
> 
> 时间：2012-10-17T14:26:26.770
> 
> 标签：xml, input, orbeon, xforms

我正在使用 IE8 并在 Orbeon 3.9 CE 版 Sandbox 中运行表单。我观察到在 IE8 上显示字段中的内容时，时间输入字段有一个小问题。输入日期后，表单会格式化日期并添加`a.m`或`p.m`结束，但整个信息只是覆盖在字段最右侧的时间图像上。请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/16f1a42a74cdef029c61d3cf28891865.png)

但是，在较低版本的 IE 上不会出现此问题。我在兼容性视图中启动了表单，但看不到问题。

![在此处输入图像描述](../Images/970c439f10e3ff0dfff20dec7ac447f3.png)

此外，仅当我拥有自定义字体和大小时才会发生此问题。由于整个应用程序使用标准字体和大小，我也必须在 Orbeon 表单中使用它。

下面是示例代码

```
<xhtml:html xmlns:xforms="http://www.w3.org/2002/xforms"
    xmlns:f="http://orbeon.org/oxf/xml/formatting"
    xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:ev="http://www.w3.org/2001/xml-events"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    >

    <xhtml:head>

        <style type="text/css">
            input {
                font-size: .95em;
                vertical-align:top;
                font-family: monospace !important;
            }
        </style>
        <xforms:model xmlns:xforms="http://www.w3.org/2002/xforms"
                xmlns:xs="http://www.w3.org/2001/XMLSchema" id="main-model" >

          <xforms:instance id="form-instance">
            <form>
              <field-1></field-1>
            </form>
          </xforms:instance>

          <xforms:bind id="field-1" nodeset="instance('form-instance')/field-1" type="xforms:time"/>

        </xforms:model>
    </xhtml:head>

    <xhtml:body>

      <table>
        <tr>
            <td>
                Enter Time: 
            </td>
            <td>
                <xforms:input bind="field-1" id="field-1-id" /> 
            </td>
        </tr>
      </table>

    </xhtml:body>
</xhtml:html> 
```

在这段代码中，如果我们删除它工作正常的样式，但我应该使用它。因此，对于我已确定使用以下 css 的解决方法

```
.xforms-type-time { width:115px !important; } 
```

那么，总而言之，Orbeon 表单引擎是否可以进行某种改进？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:55:15.290

By default, the width of the control is set to `8em`. In my testing here, it does show wider with IE7 than IE8 and Chrome, but there is still enough space for the time with those browsers. If with your CSS the input gets too narrow, then you can override the default CSS to make it wider, as you suggested.

# javascript - Google 自定义搜索引擎如何解决 XSS？

> ID：12936584
> 
> 赞同：6
> 
> 时间：2012-10-17T14:26:50.997
> 
> 标签：javascript, jsonp, xss, cors, google-custom-search

我一直在考虑构建一种服务，该服务将使用与 Google CSE 使用的类似方法 - [https://developers.google.com/custom-search/docs/js/rendering](https://developers.google.com/custom-search/docs/js/rendering) 我无法理解 Google 是如何解决的XSS。是因为他们托管了能够写入 DIV 的 JS 文件吗？他们是否使用 CORS 标头？如果您有使用此模式的经验，请分享您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:48:45.003

它使用同源请求和 jsonp 的组合。它通过`<script>`标签请求 www.googleapis.com/customsearch/v1element 和 www.google.com/uds，然后允许这些脚本分别从 www.googleapis.com 和 www.google.com 请求。

# java - TreeViewer.expandAll 方法的性能

> ID：12936587
> 
> 赞同：0
> 
> 时间：2012-10-17T14:27:03.620
> 
> 标签：java, performance, eclipse-plugin, eclipse-rcp

在我的应用程序中，一个动作是展开某个树的所有元素。

每次我执行这个动作，都需要比以前更长的时间。

```
long startTime = System.currentTimeMillis();
getTreeViewer().expandAll();
long endTime = System.currentTimeMillis()-startTime;
System.out.println("expandAll time :  " + endTime ); 
```

这是输出中的一个样本。

展开全部时间：200 展开全部时间：800 展开全部时间：1800 展开全部时间：3200

-- 这大大减慢了我的插件。这是方法的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:34:02.937

你有过滤器吗？过滤器和其他 TreeViewer 协作器在展开操作时被调用。还要检查 LabelProvider 的实现，以查看在为每个新显示的树项计算文本标签和图像时是否需要花费一些时间。

# java - Primefaces 3.4 p:selectOneRadio value=null in p:ajax listener

> ID：12936588
> 
> 赞同：1
> 
> 时间：2012-10-17T14:27:05.503
> 
> 标签：java, jsf-2, primefaces

以下代码在 PF 3.2 中有效，但是当我切换到 3.4 时，SelectOneRadio 值始终为空？我尝试将事件作为更改和 valueChange 而不是默认单击，所有结果都是相同的 value=null。在 FF 中工作，如果 p:ajax 对“main”p:panelGrid 进行了更新，IE8 会两次命中 setComp 方法两个空值

```
 <p:panelGrid id="main" columns="1"  styleClass="Grid">
   <p:selectOneRadio id="newold" value="#{newmailer.selectedCompStatus}" >  
            <f:selectItems value="#{newmailer.options}" />  
            <p:ajax  listener="#{newmailer.setComp}"  update="main"   />
   </p:selectOneRadio>  
 </p:panelGrid>

    private List<SelectItem> options;

public NewMailerBean(){
    super();
    images = new ArrayList<byte []>();
    imagesNames = new ArrayList<String>();
    options = new ArrayList<SelectItem>();
    SelectItem option = new SelectItem("exist", "Existing Company", "This        is for selectItems tag");  
    options.add(option);
    option = new SelectItem("new", "New Company");
    options.add(option);

}
 public void setComp(AjaxBehaviorEvent event) {

    String str = this.selectedCompStatus;
    try {

          if(str.equals("exist")){

              setExist(true);
              setShowInfo(true);

          }else{

              setExist(false);
              setShowInfo(true);
          } 
```

# php - $view->start(); 和 $view->finish(); 在法尔孔

> ID：12936590
> 
> 赞同：0
> 
> 时间：2012-10-17T14:27:13.037
> 
> 标签：php, phalcon

在下面的[Phalcon](http://docs.phalconphp.com/en/latest/reference/views.html#stand-alone-component)代码中做什么`start()`和`finish()`功能做什么？
似乎它们可以嵌入`render()`

```
$view->start();
$view->render("products", "list");
$view->finish(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:35:26.600

根据[Phalcon 手册](http://docs.phalconphp.com/en/latest/api/Phalcon_Mvc_View.html)：

> public start () 开始渲染进程启用输出缓冲
> 
> public finish() 通过停止输出缓冲来完成渲染过程

所以它不能嵌入到渲染中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:44:18.407

开始和结束调用由 Phalcon\Mvc\Application::handle 自动完成，您可以在 PHP 中查看此函数的大致行为[here](https://github.com/phalcon/mvc/blob/master/simple-wapp/public/index.php)

# sql - sql查询插入auto_incremented值？

> ID：12936598
> 
> 赞同：1
> 
> 时间：2012-10-17T14:27:19.727
> 
> 标签：sql, sql-server-ce

我有一个看起来有点像这样的表：

```
ID - (int) Auto_increment 
Name - (varchar) 
LastName - (varchar) 
```

如何使用该`auto_increment`值向该表中添加一行？

只需键入

```
insert into table_name ([Name], [LastName]) 
values("asdasd", "asdasd") 
```

它似乎没有得到`ID`那一行。

我是否需要将 ID 添加到没有值的插入字符串中，还是应该像我写的那样工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:30:37.547

只需忽略`auto_increment`插入语句列表中的该字段，就像您在问题中发布的内容一样：

```
insert into table_name ([Name], [LastName]) values("asdasd", "asdasd") 
```

这应该是该字段的自动增量值`ID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:35:19.640

您确定 ID 列是 auto_increment 吗？您的插入语句对于您想要做的事情是正确的。

```
insert into table_name ([Name], [LastName]) 
values("asdasd", "asdasd") 
```

只需检查 de ID 列属性，看看它是否真的是 auto_increment。

# c# - 使用 xmlreader 只读特定实例

> ID：12936601
> 
> 赞同：0
> 
> 时间：2012-10-17T14:27:27.223
> 
> 标签：c#, xml, xmlreader

我有一个看起来像的 xml 文件

```
<Name>AAA</Name>
<Age>23</Age>
<I1>
  <Element1>A</Element1>
  <Element2>B</Element2>
  <Element3>C</Element3>
<\I1>
<I2>
  <Element1>AA</Element1>
  <Element2>BB</Element2>
  <Element3>CC</Element3>
</I2> 
```

我正在使用 C# 3.0 中的 xmlreader 读取元素的所有值。但是现在我必须通过仅读取特定开始和结束时间中的值来进行更改。对于上面提到的 xml 文件，默认情况下我需要读取`<Name>`，`<Age>`然后我有一个返回值“I1”或“I2”的函数，这基本上是元素名称。如果它返回“I1”，那么我应该只读取和之间的元素`<I1>`，`</I1>`不应该读取`<I2>`，反之亦然。所以代码结构将是（只是逻辑请忽略语法错误）就像

```
/******function that returns element name I1 or I2*********/
string elementName = func(a,b);

xmlreader reader = reader.create("test.xml");
while(reader.read())
{
 switch(reader.nodetype)
 {
  case xmlnodetype.element:
   string nodeName = reader.name
   break;
 case xmlnodetype.text
   switch(nodeName)
   {
     /*************Read default name and age values*******/ 
     case "Name":
       string personName = reader.value
       break;
     case "Age":
       string personAge = reader.value;
       break;
    /*******End of reading default values**************/

    /*** read only elements between the value returned by function name above
        If function returns I1 then i need to read only values between <I1> </I1> else read </I2>    and </I2>**/   

    }
  }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:48:31.533

所以假设，因为我们没有任何其他标签要关闭，你的文件从头到尾看起来都是这样的

```
<?xml version="1.0" encoding="utf-8" ?>
<RootElement>
    <UserInformation>
        <Name>AAA</Name>
        <Age>23</Age>
        <I1>    
            <Element1>A</Element1>
            <Element2>B</Element2>
            <Element3>C</Element3>
        <\I1>  
        <I2>    
            <Element1>AA</Element1>
            <Element2>BB</Element2>
            <Element3>CC</Element3>  
        </I2> 
    </UserInformation>
</RootElement> 
```

然后调用它

```
System.IO.StreamReader sr = new System.IO.StreamReader("test.xml");
String xmlText = sr.ReadToEnd();
sr.Close();

List<UserInfo> finalList = readXMLDoc(xmlText);
if(finalList != null)
{
    //do something
}

    private List<UserInfo> readXMLDoc(String fileText)
    {
        //create a list of Strings to hold our user information
        List<UserInfo> userList = new List<UserInfo>();
        try
        {
            //create a XmlDocument Object
            XmlDocument xDoc = new XmlDocument();
            //load the text of the file into the XmlDocument Object
            xDoc.LoadXml(fileText);
            //Create a XmlNode object to hold the root node of the XmlDocument
            XmlNode rootNode = null;
            //get the root element in the xml document
            for (int i = 0; i < xDoc.ChildNodes.Count; i++)
            {
                //check to see if we hit the root element
                if (xDoc.ChildNodes[i].Name == "RootElement")
                {
                    //assign the root node
                    rootNode = xDoc.ChildNodes[i];
                    break;
                }
            }

            //Loop through each of the child nodes of the root node
            for (int j = 0; j < rootNode.ChildNodes.Count; j++)
            {
                //check for the UserInformation tag
                if (rootNode.ChildNodes[j].Name == "UserInformation")
                {
                    //assign the item node
                    XmlNode userNode = rootNode.ChildNodes[j];
                    //create userInfo object to hold results
                    UserInfo userInfo = new UserInfo();
                    //loop through each if the user tag's elements
                    foreach (XmlNode subNode in userNode.ChildNodes)
                    {
                        //check for the name tag
                        if (subNode.Name == "Name")
                        {
                            userInfo._name = subNode.InnerText;
                        }
                        //check for the age tag
                        if (subNode.Name == "Age")
                        {
                            userInfo._age = subNode.InnerText;
                        }
                        String tagToLookFor = "CallTheMethodThatReturnsTheCorrectTag";
                        //check for the tag
                        if (subNode.Name == tagToLookFor)
                        {
                            foreach (XmlNode elementNode in subNode.ChildNodes)
                            {
                                //check for the element1 tag
                                if (elementNode.Name == "Element1")
                                {
                                    userInfo._element1 = elementNode.InnerText;
                                }
                                //check for the element2 tag
                                if (elementNode.Name == "Element2")
                                {
                                    userInfo._element2 = elementNode.InnerText;
                                }
                                //check for the element3 tag
                                if (elementNode.Name == "Element3")
                                {
                                    userInfo._element3 = elementNode.InnerText;
                                }
                            }

                        }

                    }
                    //add the userInfo to the list
                    userList.Add(userInfo);
                }
            }
        }
        catch (Exception e)
        {
            System.Windows.Forms.MessageBox.Show(e.Message);
            return null;
        }
        //return the list
        return userList;
    }

    //struct to hold information
    struct UserInfo
    {
        public String _name;
        public String _age;
        public String _element1;
        public String _element2;
        public String _element3;
    } 
```

# c# - How to add ModelState.AddModelError message when model item is not binded

> ID：12936604
> 
> 赞同：25
> 
> 时间：2012-10-17T14:27:31.607
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

I am new to MVC4\. Here I added the ModelState.AddModelError message to display when the delete operation is not possible.

```
 <td>
    <a id="aaa" href="@Url.Action("Delete", "Shopping", new { id = Request.QueryString["UserID"], productid = item.ProductID })" style="text-decoration:none">
    <img alt="removeitem" style="vertical-align: middle;" height="17px" src="~/Images/remove.png"  title="remove" id="imgRemove" />
      </a>
      @Html.ValidationMessage("CustomError")
    </td> 
    @Html.ValidationSummary(true) 
```

In my controller

```
public ActionResult Delete(string id, string productid)
        {             
            int records = DeleteItem(id,productid);
            if (records > 0)
            {
              ModelState.AddModelError("CustomError", "The item is removed from your cart");
               return RedirectToAction("Index1", "Shopping");
            }
            else
            {
                ModelState.AddModelError(string.Empty,"The item cannot be removed");
                return View("Index1");
            }
        } 
```

Here I didnt pass any of the model item in the View to check for the item in Model and I couldnt get the ModelState error message ..
Any suggestions

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-17T14:49:55.767

The `ModelState` is created at each request so you should use `TempData`.

```
public ActionResult Delete(string id, string productid)
{             
    int records = DeleteItem(id,productid);
    if (records > 0)
    {    
        // since you are redirecting store the error message in TempData
        TempData["CustomError"] = "The item is removed from your cart";
        return RedirectToAction("Index1", "Shopping");
    }
    else
    {
        ModelState.AddModelError(string.Empty,"The item cannot be removed");
        return View("Index1");
    }
}

public ActionResult Index1()
{
    // check if TempData contains some error message and if yes add to the model state.
    if(TempData["CustomError"] != null)
    {
        ModelState.AddModelError(string.Empty, TempData["CustomError"].ToString());
    }

    return View();
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-17T14:32:32.843

`RedirectToAction` will clear `ModelState`. You must return a view in order to use this data. Therefore, the first `if` case won't work. Also, ensure that you have a control in your view (like `ValidationSummary`) which displays the error... this could be the problem in the second case.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:39:27.393

The RedirectToAction method returns 302 which causes the client to be redirected. Because of this the ModelState is lost as the redirect is a new request. You could however, use the TempData property which allows you to store a temporary piece of data that is unique to the session. You could then check for this TempData on the other controller and add a ModelState error in that method.

# php - 在 Doctrine 实体上实现自定义字段

> ID：12936605
> 
> 赞同：0
> 
> 时间：2012-10-17T14:27:34.520
> 
> 标签：php, orm, doctrine-orm

我`Attachment`在 Doctrine 中有一个实体，它引用了 Amazon S3 上的文件。我需要能够在实体上提供一种“计算字段”，以计算出我所说的`downloadpath`. 这`downloadpath`将是一个计算的 URL，例如[http://site.s3.amazon.com/%s/attach/%s](http://site.s3.amazon.com/%s/attach/%s)我需要用实体本身的值（帐户和文件名）替换两个字符串值，所以;

[http://site.s3.amazon.com/1/attach/test1234.txt](http://site.s3.amazon.com/1/attach/test1234.txt)

尽管我们使用了服务层，但我希望它`downloadpath`始终可以在实体上使用，而不必通过 SL。

我已经考虑了向实体添加一个常量的明显途径；

`const DOWNLOAD_PATH = 'http://site.s3.amazon.com/%s/attach/%s';`和自定义`getDownloadPath()`，但我想在我的应用程序配置中保留此 URL 之类的细节，而不是 Entities 类（另请参阅下面的更新）

有人对我如何实现这一目标有任何想法吗？

**更新**添加到这一点，我现在知道我需要使用 AmazonS3 库生成一个临时 URL，以允许临时 authed 访问文件 - 我不想对我们的 Amazon/Attachment Service 进行静态调用这只是感觉不对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:55:02.493

事实证明，最干净的方法是像这样使用 postLoad 事件；

```
<?php

namespace My\Listener;

use Doctrine\Common\EventSubscriber;
use Doctrine\ORM\Events;
use Doctrine\ORM\Event\LifecycleEventArgs;
use My\Entity\Attachment as AttachmentEntity;
use My\Service\Attachment as AttachmentService;

class AttachmentPath implements EventSubscriber
{
    /**
     * Attachment Service
     * @param \My\Service\Attachment $service
     */
    protected $service;

    public function __construct(AttachmentService $service)
    {
        $this->service = $service;
    }

    public function getSubscribedEvents()
    {
        return array(Events::postLoad);
    }

    public function postLoad(LifecycleEventArgs $args)
    {
        $entity = $args->getEntity();

        if ($entity instanceof AttachmentEntity) {
            $entity->setDownloadPath($this->service->getDownloadPath($entity));
        }
    }
} 
```

# android - Android：根据设备的位置修复方向

> ID：12936606
> 
> 赞同：0
> 
> 时间：2012-10-17T14:27:35.003
> 
> 标签：android, android-layout, orientation

我想知道是否可以根据设备的位置来修复布局的方向。例如，如果在纵向位置启动应用程序，则该应用程序将固定为纵向。如果应用程序以横向启动，则方向固定为横向。

我知道您可以在清单中将方向固定为纵向或横向，但有没有办法根据设备位置动态固定方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:46:39.793

我相信你想要的是

```
android:configChanges="keyboardHidden|orientation" 
```

在清单中。我尚未对其进行测试，但我认为这告诉 Android 不要处理这些更改。希望这可以帮助！

# magento - Magento：如何覆盖一个模板文件

> ID：12936608
> 
> 赞同：2
> 
> 时间：2012-10-17T14:27:38.000
> 
> 标签：magento, magento-1.7

有这个模板文件：

```
app/design/frontend/base/default/template/catalog/product/view.phtml 
```

我首先只是更改了它，但我了解到我应该以某种方式进行覆盖以避免更新问题。所以我试图找到一个教程，但是像[这个问题](https://stackoverflow.com/questions/11123034/should-magentos-blank-theme-still-be-used-as-a-theme-baseline-magento-version)一样，我找不到任何适用于 Magento 1.7.0.2 的教程。

我知道我必须创建一个新的模板文件夹并重新创建文件夹结构`catalog/product`。

1.  但是我在哪里放置这个文件夹？
2.  我如何告诉 Magento 使用它？
3.  我可以以某种方式跳过 xml 配置内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:19:36.233

1.  创建文件夹`app/design/frontend/mycompany/default/template`
2.  然后你应该可以在后端配置这个所谓的新包/主题
    *   系统 -> 配置 -> 设计 -> 封装 =`mycompany`
    *   主题：默认（无需更改）
3.  现在您的商店使用了一个全新的主题：您的！但是您的主题中未定义的所有文件都将从`base/default`（后备）中提取
4.  要覆盖模板，只需将其复制到`mycompany/default`（具有相同的目录结构，因此`app/design/frontend/mycompany/default/template/catalog/product/view.phtml`：）并更改您必须更改的任何内容

无需在`layout`主题文件夹中创建任何 XML 文件。如果您需要使用布局定义自定义任何内容，请在`layout/local.xml`此处创建并进行布局更新。例如，不要`catalog.xml`从主题复制`base/default`到您的主题，因为这可能会导致 Magento 更新出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:56:44.787

您应该已经定义了自己的主题并将确切的路径和文件复制到您自己的主题并在那里进行更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-01T13:34:31.277

如果您想使用相同的文件，您可以从默认主题复制并粘贴到您的主题。

但是如果你想使用你的定义文件，那么你可以在 local.xml 中使用下面的代码，并将新创建的文件放在你或默认主题的模板文件夹中。

```
<catalog_product_view>
    <reference name="product.info">
        <action method="setTemplate"><template>yourfolder/customfile.phtml</template></action>
    </reference>
<catalog_product_view> 
```

所以上面的文件将覆盖默认的 view.phtml

我希望这能帮到您。

# c++ - 尝试在旧机器上使用新的 libstdc++ 会导致错误

> ID：12936611
> 
> 赞同：1
> 
> 时间：2012-10-17T14:27:57.420
> 
> 标签：c++, version, libstdc++

我有一个程序，我在机器 A 上使用 CMake 编译，但我想在旧机器 B 上运行它。当我这样做时，我得到以下信息：

```
/usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.11' not found (required by ./program)
/usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.14' not found (required by ./program)
/usr/lib/libstdc++.so.6: version `GLIBCXX_3.4.9' not found (required by ./program) 
```

我已经看到[了这个问题](https://stackoverflow.com/questions/7150409/)，我认为解决我的问题的最佳方法是将较新的版本复制到机器 B。所以我将`/usr/lib/libstdc++.so.6`（和`libstdc++.so.6.0.14`）从 A 复制到`~/lib`B 并做了

```
export LD_LIBRARY_PATH=~/lib:$LD_LIBRARY_PATH 
```

然后。开始我的程序时，我现在得到

```
Floating point exception 
```

我该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:27:03.933

正如您所发现的，您需要在较`libstdc++.so.6`旧的系统上存在较新的版本，并告诉动态链接器如何找到它。

请参阅[如何确保找到动态链接库？](http://gcc.gnu.org/onlinedocs/libstdc++/faq.html#faq.how_to_set_paths)在 libstdc++ 常见问题解答和手册中的[查找动态或共享库](http://gcc.gnu.org/onlinedocs/libstdc++/manual/using_dynamic_or_shared.html#manual.intro.using.linkage.dynamic)中，了解如何确保找到它的详细信息，有几个选项。`LD_LIBRARY_PATH`只是其中一种选择。

浮点异常不应与 libstdc++ 相关，您需要使用调试器来查找它的来源并获取更多详细信息。

# c++ - 最常见的稀疏矩阵格式

> ID：12936612
> 
> 赞同：-2
> 
> 时间：2012-10-17T14:27:59.560
> 
> 标签：c++, matrix, file-format, sparse-matrix

最常见的稀疏矩阵格式是什么？

我读过 Harwell Boing 格式、耶鲁格式，虽然不是明确的稀疏矩阵格式，但 Thorsten Joachims 的 SVMLight 利用了稀疏性。

在 C++ 中编写异常安全的解析器应该是最简单的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:01:59.057

你的意思是在内存中还是在磁盘上？

压缩行存储可能是程序使用的最常见的备用矩阵格式，并且易于实现和迭代。

至于在磁盘上，请使用您的源提供的任何内容，我在佛罗里达稀疏矩阵集合使用的矩阵市场格式方面取得了很好的成功

# c# - JSON 中的 ASP.NET Web API 日期格式未成功序列化

> ID：12936614
> 
> 赞同：18
> 
> 时间：2012-10-17T14:28:00.667
> 
> 标签：c#, serialization, asp.net-web-api, json.net

全部，

我们正在使用 ASP.NET Web API，其中我们有一个基于 REST 的服务，其中 JSON 用于有效负载。如果我将以下日期作为字符串传递，例如

```
sampleObj: {
...
myDate: "31/12/2011 00:00:00",
...
} 
```

作为 JSON 有效负载中的属性值，日期属性被反序列化为 DateTime.MinValue。字符串格式是否有效？

我们知道“2012-10-17 07:45:00”格式可以成功序列化，但我们不能保证收到的所有日期都是这种格式。什么是有效选项？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-10-17T20:49:14.893

在 ASP.NET Web API 中，你可以通过 JsonFormatter 的 SerializerSettings 添加不同的 Json.NET DateTimeConverters 来让你的服务理解不同的 DateTime 格式。

但是，我认为没有来自 Json.NET 的默认 DateTimeConverter 采用这种格式“31/12/2011 00:00:00”。在这种情况下，您实现自定义 DateTimeConverter。

WebApiConfig.cs：

```
 config.Formatters.JsonFormatter.SerializerSettings.Converters.Add(
             new IsoDateTimeConverter());
        config.Formatters.JsonFormatter.SerializerSettings.Converters.Add(
             new MyDateTimeConverter()); 
```

自定义日期时间转换器：

```
public class MyDateTimeConverter : DateTimeConverterBase
{
    //...
} 
```

有关如何编写自定义 DateTimeConverter 的更多信息，我在 stackoverflow 上找到了一些您可能会觉得有用的内容： [如何创建 json.net 日期到字符串自定义转换器。](https://stackoverflow.com/questions/8639315/how-to-create-a-json-net-date-to-string-custom-converter)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-20T16:34:33.973

只需在 web.config 中设置全球化：

```
<globalization enableClientBasedCulture="false" requestEncoding="utf-8" responseEncoding="utf-8" culture="en-GB" uiCulture="en-GB"/> 
```

然后，在 Global.asax.cs > Application_Start 中，将 JsonFormatter 设置为使用当前区域性：

```
var json = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
json.SerializerSettings.Culture = System.Globalization.CultureInfo.CurrentCulture; 
```

# c# - ASP.NET 中的正则表达式异常

> ID：12936621
> 
> 赞同：0
> 
> 时间：2012-10-17T14:28:20.123
> 
> 标签：c#, asp.net

我在 ASP.NET 网站中使用 Regex 时遇到问题。我想从网站源中获取两个正则表达式的计数，使用网络客户端下载源。

我想得到一个正则表达式的计数，在 tmz.com 网站上搜索。

基本上我有一个文本文件，每一行都有关键字。我放了2位艺术家，它应该去每一行，制作一个正则表达式模式，比如艺术家1+正则表达式+关键字+正则表达式+艺术家2。想法是查看我的关键字和艺术家有多少计数（找到搜索）。

这是我的函数的源代码。

```
 int counts = 0;
    string line = "";
    StreamReader read = new StreamReader(@"C:\words.txt");
    WebClient web = new WebClient();
    string content = web.DownloadString("http://www.tmz.com/search/news/" + artist1 + " " + artist2);
    while ((line = read.ReadLine()) != null)
    {

            string pattern = artist1 + "[a-zA-Z0-9\\s]{1,10}" + line + "[a-zA-Z0-9\\s]{1,10}" + artist2;
            MatchCollection matches = Regex.Matches(pattern, content);
            counts += matches.Count;
            string pattern2 = artist2 + "[a-zA-Z0-9\\s]{1,10}" + line + "[a-zA-Z0-9\\s]{1,10}" + artist1;
            MatchCollection matches1 = Regex.Matches(pattern2, content);
            counts += matches1.Count;
    }
    read.Close();
    return counts; 
```

但我收到此错误： **说明：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。**

我得到的红线（有错误的线是这一行）： **第 54 行：MatchCollection matches = Regex.Matches(pattern, content);**

确切的例外：

```
System.ArgumentException was unhandled by user code
  Message=parsing "<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:meebo="http://www.meebo.com/" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#">
<head>
        <script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
    <title>Search bowwow tyra - news - Page 1 | TMZ.com </title>
    <meta name="robots" content="all"/>
    <meta name="description" content="Celebrity Gossip and Entertainment News, Covering Celebrity News and Hollywood Rumors. Get All The Latest Gossip at TMZ - Thirty Mile Zone" />
    <meta name="generator" content="Crowd Fusion 2.0-enterprise" />
    <!-- Site Verification -->
    <meta name="google-site-verification" content="UUmtbUBf3djgPpCeLefe_PbFsOc6JGxfXmHzpjFLAEQ" />
    <meta name="verify-v1" content="Wtpd0N6FufoE2XqopQJoTjWV6Co/Mny9BTaswPJbPPA=" />
    <meta name="msvalidate.01" content="AFEB17971BCF30779AEA662782EF26F4" />
    <meta name="y_..." - Too many )'s.
  Source=System
  StackTrace:
       at System.Text.RegularExpressions.RegexParser.ScanRegex()
       at System.Text.RegularExpressions.RegexParser.Parse(String re, RegexOptions op)
       at System.Text.RegularExpressions.Regex..ctor(String pattern, RegexOptions options, Boolean useCache)
       at System.Text.RegularExpressions.Regex.Matches(String input, String pattern)
       at _Default.tmz(String artist1, String artist2) in c:\Users\icebox19\Documents\Visual Studio 2010\WebSites\WebSite3\Default.aspx.cs:line 52
       at _Default.Button1_Click(Object sender, EventArgs e) in c:\Users\icebox19\Documents\Visual Studio 2010\WebSites\WebSite3\Default.aspx.cs:line 89
       at System.Web.UI.WebControls.Button.OnClick(EventArgs e)
       at System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument)
       at System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
       at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
       at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
       at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
  InnerException: 
```

**PS：我使用的是 ASP.NET 网站，而不是 c# 独立应用程序，这是一个网页。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:49:54.333

这是因为您使用了错误的参数。它应该是 Regex.Matches(INPUT, PATTERN)。

# javascript - JavaScript 中的 BB-Code-RegEx

> ID：12936622
> 
> 赞同：0
> 
> 时间：2012-10-17T14:28:20.543
> 
> 标签：javascript, regex, bbcode

我有这段代码：

```
var s_1 = 'blabla [size=42]the answer[/size] bla bla blupblub';
var s_2 = 'blabla [size=42]the answer[/size] bla bla blupblub [size=32] 32 [/size]';

alert('Test-String:\n' + s_1 + '\n\nReplaced:\n' + size(s_1));
alert('Test-String:\n' + s_2 + '\n\nReplaced:\n' + size(s_2));

function size(s) {
    var reg = /\[size=(\d{1,2})\]([\u0000-\uFFFF]+)\[\/size\]/gi;
    s = s.replace(reg, function(match, p1, p2) {
        return '<span style="font-size: ' + ((parseInt(p1) > 48) ? '48' : p1) + 'px;">' + p2 + '</span>';
    })
    return s;    
} 
```

它应该替换所有出现的“[size=nn][/size]”标签，但它只替换外部标签。我无法弄清楚如何替换所有这些。（请不要推荐使用 PHP 脚本，我想对 BB-Code 格式的文本进行实时预览）

[测试一下](http://jsfiddle.net/wdqLE/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T16:33:57.667

## 匹配（可能是嵌套的）BBCode 标签

如果元素是嵌套的，则需要多通道方法。这可以通过以下两种方式之一来完成；从内向外匹配（不需要递归表达式），或从外向内匹配（需要递归表达式）。（另请参阅我对类似问题的回答：[PHP，preg_replace 中的嵌套模板](https://stackoverflow.com/a/12918954/433790)）但是，由于 Javascript 正则表达式引擎不支持递归表达式，因此（正确）使用正则表达式执行此操作的唯一方法是由内而外。下面是一个经过测试的函数，它从内到外用 SPAN html 标签替换 BBCode SIZE 标签。请注意，下面的（快速）正则表达式很复杂（一方面它实现了 Jeffrey Friedl 的*“展开循环”*效率技术 - 请参阅：[掌握正则表达式（第 3 版）](https://rads.stackoverflow.com/amzn/click/com/0596528124 "关于正则表达式的最佳书籍 - 永远！")有关详细信息），并且 IMO 所有复杂的正则表达式都应进行彻底的注释和格式化以提高可读性。由于 Javascript 没有自由间距模式，因此下面的正则表达式首先在 PHP 自由间距模式下完全注释。实际使用的未注释 js 正则表达式与详细注释的相同。

## 正则表达式匹配最里面的（可能是嵌套的）大小标签：

```
// Regular expression in commented (PHP string) format.
$re = '% # Match innermost [size=ddd]...[/size] structure.
    \[size=            # Literal start tag name, =.
    (\d+)\]            # $1: Size number, ending-"]".
    (                  # $2: Element contents.
      # Use Friedls "Unrolling-the-Loop" technique:
      #   Begin: {normal* (special normal*)*} construct.
      [^[]*            # {normal*} Zero or more non-"[".
      (?:              # Begin {(special normal*)*}.
        \[             # {special} Tag open literal char,
        (?!            # but only if NOT start of
          size=\d+\]   # [size=ddd] open tag
        | \/size\]     # or [/size] close tag.
        )              # End negative lookahead.
        [^[]*          # More {normal*}.
      )*               # Finish {(special normal*)*}.
    )                  # $2: Element contents.
    \[\/size\]         # Literal end tag.
    %ix'; 
```

## Javascript函数：`parseSizeBBCode(text)`

```
function parseSizeBBCode(text) {
    // Here is the same regular expression in javascript syntax:
    var re = /\[size=(\d+)\]([^[]*(?:\[(?!size=\d+\]|\/size\])[^[]*)*)\[\/size\]/ig;
    while(text.search(re) !== -1) {
        text = text.replace(re, '<span style="font-size: $1pt">$2</span>');
    }
    return text;
} 
```

## 示例输入：

```
r'''
[size=10] size 10 stuff
    [size=20] size 20 stuff
        [size=30] size 30 stuff [/size]
    [/size]
[/size]
''' 
```

## 示例输出：

```
r'''
<span style="font-size: 10pt"> size 10 stuff
    <span style="font-size: 20pt"> size 20 stuff
        <span style="font-size: 30pt"> size 30 stuff </span>
    </span>
</span>
''' 
```

## 免责声明 - 不要使用此解决方案！

请注意，使用正则表达式解析 BBCode 充满危险！（这里没有提到很多“陷阱”。）很多人会说这是*不可能*的。但是，我强烈反对并且实际上已经编写了一个完整的 BBCode 解析器（在 PHP 中），它使用递归正则表达式并且工作得非常好（而且*速度很快*）。您可以在这里看到它的实际效果：[New 2011 FluxBB Parser](http://jmrware.com/articles/2011/fluxbb_jmr_dev/)（请注意，它使用了一些[非常复杂的正则表达式](http://jmrware.com/articles/2011/fluxbb_jmr_dev/viewtopic.php?id=3)，不适合胆小的人）。

但总的来说，我强烈警告不要使用正则表达式解析 BBCode，除非你对正则表达式有非常深刻和透彻的理解（这可以通过仔细研究和实践[Friedl 的杰作](https://rads.stackoverflow.com/amzn/click/com/0596528124 "放下我读过的最有用的书")来获得）。换句话说，如果您不是 regex 的大师（即 regex *guru*），请避免将它们用于除最琐碎的应用程序之外的任何应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:35:09.937

```
var reg = /\[size=(\d{1,2})\]([\u0000-\uFFFF]+?)\[\/size\]/gi;
                                              ↑
                                    make it lazy (non-greedy) 
```

这与

```
var reg = /\[size=(\d{1,2})\](.+?)\[\/size\]/gi; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:33:27.020

我会尝试使用`([\u0000-\uFFFF]+?)` ~~(untested)~~，这告诉在第一次出现时停止，`[/size]`而不是直接进入最后一次

**编辑**：

是的，经过测试，[似乎还可以](http://rubular.com/r/Sz8rOMQJLP)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T14:33:52.883

`?`您需要在 .之后使用非贪婪表达式，由 . 限定`+`。

[演示](http://jsfiddle.net/pRMrX/)

# rubygems - 为 capybara-webkit 构建本机扩展时出错

> ID：12936623
> 
> 赞同：4
> 
> 时间：2012-10-17T14:28:21.513
> 
> 标签：rubygems, gem, capybara, capybara-webkit

我正在尝试在 Windows 上安装适用于 capybara 的 webkit 驱动程序，但出现以下错误：

```
$ gem install capybara-webkit-0.12.1.gem
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
ERROR:  Error installing capybara-webkit-0.12.1.gem:
        ERROR: Failed to build gem native extension.

        c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb

Gem files will remain installed in c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.1 for inspection.
Results logged to c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.1/./gem_make.out 
```

这是日志文件中的内容：

```
C:\>cat c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/capybara-webkit-0.12.1/./gem_make.out
c:/RailsInstaller/Ruby1.9.3/bin/ruby.exe extconf.rb 
```

我一直在尝试一段时间来找出问题所在。日志文件不是很有帮助，我发现的类似问题的解决方案要么特定于 Unix，要么对我不起作用。我很感激你能给我的任何帮助。

*注意：此问题已交叉发布到[capybara-webkit Google 组。](https://groups.google.com/forum/?fromgroups=#!topic/capybara-webkit/3oj8RDGjvTk)*

* * *

**更新：我尝试**[在 capybara-webkit Google Group](https://groups.google.com/forum/#!msg/capybara-webkit/3oj8RDGjvTk/4LxHaIRN4IAJ)上的 Joe Ferris 的建议下手动构建 gem ，并设法获得了有关导致构建失败的原因的更多详细信息。这是我`bundle exec rake build`在 capybara-webkit 的目录中执行时收到的消息：

```
cd src/ && c:/Qt/4.8.3/bin/qmake.exe "c:/Documents and Settings/user/My Documents/Workspace/thoughtbot-capybara-webkit-7289a8e/src/webkit_server.pro" -spec c:/Qt/4.8.3/mkspecs/win32-g++ -o Makefile.webkit_server
'.' is not recognized as an internal or external command,
operable program or batch file.
'.' is not recognized as an internal or external command,
operable program or batch file.
capybara-webkit 0.12.0 built to pkg/capybara-webkit-0.12.0.gem
cd src/ && make -f Makefile.webkit_server 
make[1]: Entering directory `/c/Documents and Settings/user/My Documents/Workspace/thoughtbot-capybara-webkit-7289a8e/src'
make -f Makefile.webkit_server.Release
make[2]: Entering directory `/c/Documents and Settings/user/My Documents/Workspace/thoughtbot-capybara-webkit-7289a8e/src'
bin/rcc.exe -name webkit_server webkit_server.qrc -o release/qrc_webkit_server.cpp
make[2]: bin/rcc.exe: Command not found
make[2]: *** [release/qrc_webkit_server.cpp] Error 127
make[2]: Leaving directory `/c/Documents and Settings/user/My Documents/Workspace/thoughtbot-capybara-webkit-7289a8e/src'
make[1]: *** [release] Error 2
make[1]: Leaving directory `/c/Documents and Settings/user/My Documents/Workspace/thoughtbot-capybara-webkit-7289a8e/src'
make: *** [sub-src-webkit_server-pro-make_default-ordered] Error 2
Command 'make' failed 
```

其他可能相关的信息：

```
C:\>which make --all
C:\RailsInstaller\DevKit\bin\make.EXE
C:\Qt\4.8.3\bin\make.BAT
C:\Program Files\Gow\bin\make.EXE
C:\>which rcc
C:\Qt\4.8.3\bin\rcc.EXE
C:\>which g++
C:\RailsInstaller\DevKit\mingw\bin\g++.EXE 
```

我的路径：

```
C:\PROGRA~1\Serena\vm\win32\bin;
C:\PROGRA~1\Serena\vm\common\bin\win32;
C:\WINDOWS\system32;
C:\WINDOWS;
C:\WINDOWS\System32\Wbem;
C:\Program Files\ATI Technologies\ATI.ACE\;
C:\Program Files\Microsoft SQL Server\80\Tools\Binn\;
C:\WINDOWS\system32\WindowsPowerShell\v1.0;
C:\Program Files\TortoiseSVN\bin;
C:\RailsInstaller\Ruby1.9.3\bin;
C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1\bin;
C:\RailsInstaller\DevKit\bin;
C:\RailsInstaller\Git\cmd;
C:\Program Files\ansi153\x86;
C:\bin;
C:\RailsInstaller\DevKit\mingw\bin;
C:\Qt\4.8.3\bin;
C:\Program Files\Nodejs;
C:\Documents and Settings\user\Desktop\emacs-23.4\bin;
C:\Python27;
C:\Python27\Scripts;
C:\Program Files\GnuWin32\bin;
C:\Program Files\Gow\bin;
C:\Program Files\Notepad++;
C:\Documents and Settings\user\Application Data\npm\ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:48:40.633

我在这里找到了解决方案： [https ://bugreports.qt-project.org/browse/QTBUG-27237](https://bugreports.qt-project.org/browse/QTBUG-27237)

遵循这个特定的[解决方法](https://bugreports.qt-project.org/browse/QTBUG-27237?focusedCommentId=184153&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-184153)使其在我的计算机上运行。

这似乎是特定于版本 4.8.3 的错误，其中 rcc.exe 路径未正确找到。

此外，在此之后您可能会遇到与我相同的错误： qmake 将 webkit 服务器编译为*\capybara-webkit-0.12.1\src\release*。并且 capybara-webkit builder 期望从“debug”文件夹中获取这个 exe，参见[capybara_webkit_builder.rb的第 57 行](https://github.com/thoughtbot/capybara-webkit/blob/master/lib/capybara_webkit_builder.rb)

我分叉了 git 存储库并将这个源文件更改为依赖“发布”文件夹，它可以工作！

尽管如此，我还是使用了 2 个非常糟糕的解决方法来使其工作......也许使用 QT 4.7.X 安装更简单，正如 capybara-webkit 安装过程中所推荐的那样。我应该测试一下。

# excel - 如何使用VBA在指定单元格位置将图片插入Excel

> ID：12936646
> 
> 赞同：34
> 
> 时间：2012-10-17T14:29:28.560
> 
> 标签：excel, image, vba, insert

我正在使用以下代码将“.jpg”文件添加到我的 Excel 工作表中：

```
'Add picture to excel
xlApp.Cells(i, 20).Select
xlApp.ActiveSheet.Pictures.Insert(picPath).Select
'Calgulate new picture size
With xlApp.Selection.ShapeRange
    .LockAspectRatio = msoTrue
    .Width = 75
    .Height = 100
End With
'Resize and make printable
With xlApp.Selection
    .Placement = 1 'xlMoveAndSize
    '.Placement = 2 'xlMove
    '.Placement = 3 'xlFreeFloating
    .PrintObject = True
End With 
```

我不知道我做错了什么，但它没有插入到正确的单元格中，那么我应该怎么做才能将此图片放入 Excel 中的指定单元格中？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-17T14:42:49.167

试试这个：

```
With xlApp.ActiveSheet.Pictures.Insert(PicPath)
    With .ShapeRange
        .LockAspectRatio = msoTrue
        .Width = 75
        .Height = 100
    End With
    .Left = xlApp.ActiveSheet.Cells(i, 20).Left
    .Top = xlApp.ActiveSheet.Cells(i, 20).Top
    .Placement = 1
    .PrintObject = True
End With 
```

最好不要在 Excel 中选择任何内容，这通常是不必要的，并且会减慢您的代码速度。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-10-22T09:17:20.703

查看已发布的答案，我认为此代码也是某人的替代方案。上面没有人`.Shapes.AddPicture`在他们的代码中使用，只有`.Pictures.Insert()`

```
Dim myPic As Object
Dim picpath As String

picpath = "C:\Users\photo.jpg" 'example photo path

Set myPic = ws.Shapes.AddPicture(picpath, False, True, 20, 20, -1, -1)

With myPic
    .Width = 25
    .Height = 25
    .Top = xlApp.Cells(i, 20).Top 'according to variables from correct answer
    .Left = xlApp.Cells(i, 20).Left
    .LockAspectRatio = msoFalse
End With 
```

我在 Excel 2013 中工作。还意识到您需要填写所有参数`.AddPicture`，因为错误“参数不是可选的”。看这个你可能会问我为什么将`Height`and设置`Width`为 -1，但这并不重要，因为这些参数设置在`With`括号之间。

希望它对某人也有用:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-03-14T03:40:47.637

如果它只是关于插入和调整图片大小，请尝试下面的代码。

对于您提出的具体问题，属性 TopLeftCell 返回与左上角停放的单元格相关的范围对象。要将新图像放置在特定位置，我建议在“右侧”位置创建图像，并将虚拟对象的顶部和左侧属性值注册到双变量上。

插入分配给变量的 Pic 以轻松更改其名称。形状对象将具有与图片对象相同的名称。

```
Sub Insert_Pic_From_File(PicPath as string, wsDestination as worksheet)
    Dim Pic As Picture, Shp as Shape
    Set Pic = wsDestination.Pictures.Insert(FilePath)
    Pic.Name = "myPicture"
    'Strongly recommend using a FileSystemObject.FileExists method to check if the path is good before executing the previous command
    Set Shp = wsDestination.Shapes("myPicture")
    With Shp
        .Height = 100
        .Width = 75
        .LockAspectRatio = msoTrue  'Put this later so that changing height doesn't change width and vice-versa)
        .Placement = 1
        .Top = 100
        .Left = 100
    End with
End Sub 
```

祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-17T09:31:43.823

我一直在研究一个在 PC 和 Mac 上运行的系统，并且正在努力寻找可以在 PC 和 Mac 上插入图片的代码。这对我有用，所以希望其他人可以利用它！

注意：strPictureFilePath 和 strPictureFileName 变量需要设置为有效的 PC 和 Mac 路径 例如

对于 PC：strPictureFilePath = "E:\Dropbox\" 和 strPictureFileName = "TestImage.jpg"，对于 Mac：strPictureFilePath = "Macintosh HD:Dropbox:" 和 strPictureFileName = "TestImage.jpg"

代码如下：

```
 On Error GoTo ErrorOccured

    shtRecipeBrowser.Cells(intDestinationRecipeRowCount, 1).Select

    ActiveSheet.Pictures.Insert(Trim(strPictureFilePath & strPictureFileName)).Select

    Selection.ShapeRange.Left = shtRecipeBrowser.Cells(intDestinationRecipeRowCount, 1).Left
    Selection.ShapeRange.Top = shtRecipeBrowser.Cells(intDestinationRecipeRowCount, 1).Top + 10
    Selection.ShapeRange.LockAspectRatio = msoTrue
    Selection.ShapeRange.Height = 130 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-31T15:06:03.197

我测试了@SWa 和@Teamothy 解决方案。我没有`Pictures.Insert`在 Microsoft 文档中找到该方法，并且担心会出现一些兼容性问题。所以我想，旧的`Shapes.AddPicture`方法应该适用于所有版本。但它很慢！

```
On Error Resume Next
'
' first and faster method (in Office 2016)
'
    With ws.Pictures.Insert(Filename:=imageFileName, LinkToFile:=msoTrue, SaveWithDocument:=msoTrue)
        With .ShapeRange
            .LockAspectRatio = msoTrue
            .Width = destRange.Width
            .height = destRange.height '222
        End With
        .Left = destRange.Left
        .Top = destRange.Top
        .Placement = 1
        .PrintObject = True
        .Name = imageName
    End With
'
' second but slower method (in Office 2016)
'

If Err.Number <> 0 Then
    Err.Clear
    Dim myPic As Shape
    Set myPic = ws.Shapes.AddPicture(Filename:=imageFileName, _
            LinkToFile:=msoFalse, SaveWithDocument:=msoTrue, _
            Left:=destRange.Left, Top:=destRange.Top, Width:=-1, height:=destRange.height)

    With myPic.OLEFormat.Object.ShapeRange
        .LockAspectRatio = msoTrue
        .Width = destRange.Width
        .height = destRange.height '222
    End With
End If 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-24T18:06:25.887

首先，我建议将图片与工作簿放在同一个文件夹中。您需要在工作表的 Worksheet_Change 过程中输入一些代码。例如，我们可以输入以下代码，将与A列单元格的值同名的图像添加到D列单元格中：

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim pic As Picture
If Intersect(Target, [A:A]) Is Nothing Then Exit Sub
On Error GoTo son

For Each pic In ActiveSheet.Pictures
    If Not Application.Intersect(pic.TopLeftCell, Range(Target.Offset(0, 3).Address)) Is Nothing Then
        pic.Delete
    End If
Next pic

ActiveSheet.Pictures.Insert(ThisWorkbook.Path & "\" & Target.Value & ".jpg").Select
Selection.Top = Target.Offset(0, 2).Top
Selection.Left = Target.Offset(0, 3).Left
Selection.ShapeRange.LockAspectRatio = msoFalse
Selection.ShapeRange.Height = Target.Offset(0, 2).Height
Selection.ShapeRange.Width = Target.Offset(0, 3).Width
son:

End Sub 
```

使用上面的代码，图片根据添加到的单元格调整大小。

此处的详细信息和示例文件：[Vba 将图像插入单元格](https://eksi30.com/insert-picture-in-cell-according-to-cell-value/)

[![在此处输入图像描述](../Images/c31edc328972c634dc96cf2f0390fb65.png)](https://i.stack.imgur.com/uNgcl.gif)

# c# - 如何在某些行中将相同的字符串添加到 ListBox？

> ID：12936647
> 
> 赞同：1
> 
> 时间：2012-10-17T14:29:30.990
> 
> 标签：c#, winforms, listbox

在表格的顶部，我有：

```
string[] data;
Color []color; 
```

在构造函数中：

```
color = new Color[1] { Color.Red}; 
```

然后我在构造函数中加载了一个函数：

```
private void ListBoxLoadKeys(Dictionary<string,List<string>> dictionary, 
    string FileName)
{
    string line = System.String.Empty;
    using (StreamReader sr = new StreamReader(keywords))
    {
        while ((line = sr.ReadLine()) != null)
        {
            int i = line.Count();
            tokens = line.Split(',');
            dictionary.Add(tokens[0], tokens.Skip(1).ToList());
            // listBox1.Items.Add("Url: " + tokens[0] + " --- " 
                + "Localy KeyWord: " + tokens[1]);     
            data = new string[1] { "Url: " + tokens[0] + " --- " 
                + "Localy KeyWord: " + tokens[1]};
            listBox1.DataSource = data;
        }           
    }        
} 
```

但它只添加到 ListBox 一行中。我希望它像 listbox1.Items.Add 然后将文本文件中的所有行添加到 listBox 中。

然后我用红色为线条着色：

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
{
    e.DrawFocusRectangle();
    e.Graphics.DrawString(data[e.Index], new Font(FontFamily.GenericSansSerif, 8,
        FontStyle.Regular),new SolidBrush(color[e.Index]), e.Bounds);
}

private void listBox1_MeasureItem(object sender, MeasureItemEventArgs e)
{
    e.ItemHeight = 16;
} 
```

1.  如何添加 StreamReader 中的所有行而不是使用 Items.Add 但使用 DataSource ？

2.  我怎样才能只用红色着色“Url：”这个词我有这一行：

    > data = new string[1] { "Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]};

我希望它添加文本文件中的所有行，并且每行只为单词“Url：”着色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:44:10.700

首先，您应该读取所​​有行并填充数据，然后将其绑定到 ListBox 控件。我建议使用 List 而不是 Array，因为您不知道您将拥有多少行文本。这是代码：

```
List<string> data = new List<string>();
private void ListBoxLoadKeys(Dictionary<string,List<string>> dictionary, string FileName)
        {

               string line = System.String.Empty;

               using (StreamReader sr = new StreamReader(keywords))
               {
                   while ((line = sr.ReadLine()) != null)
                   {
                       int i = line.Count();
                       tokens = line.Split(',');
                       dictionary.Add(tokens[0], tokens.Skip(1).ToList());
                      // listBox1.Items.Add("Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]);
                       data.Add("Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]);

                   }
               }
               listBox1.DataSource = data;
} 
```

对于问题的另一部分，由于您总是绘制相同的单词“Url：”，因此您可以通过以下方式更改代码：

**编辑：**这是我能在短时间内得到的最好的。我希望这就是你要找的。请记住，自己绘制控件是一项棘手的工作，并且您需要在 WinForms 和 GDI+ 方面拥有丰富的经验。从你的帖子我可以得出结论，你是一个初学者，所以要小心，有很多东西要学。我对项目进行了双缓冲绘图，因此您不会遇到任何闪烁，并且项目不会随着新的重绘而变得**更粗。**尽管如此，这不是最佳代码，但它可以达到您的目的。如果您需要在列表框中绘制选定的项目，我建议您检查此[链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.drawitemstate.aspx)。在这种情况下，根据状态，您可以`Clear`使用不同颜色的位图，从而更改项目的背景颜色。

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
    {
        if (e.Index >= 0 && e.Index < data.Count)
        {
            e.DrawFocusRectangle();
            Bitmap bmp = new Bitmap(e.Bounds.Width, e.Bounds.Height);
            Graphics g = Graphics.FromImage(bmp);
            g.Clear(listView1.BackColor);
            string url = data[e.Index].Substring(0, 4);
            Font f = new Font(FontFamily.GenericSansSerif, 8, FontStyle.Regular);
            SizeF size = e.Graphics.MeasureString(url, f);
            RectangleF urlRectF = new RectangleF(e.Bounds.X, 0, size.Width, e.Bounds.Height);
            g.DrawString(url, f, new SolidBrush(Color.Red), urlRectF); 
            RectangleF restRectF = new RectangleF(e.Bounds.X + size.Width, 0, e.Bounds.Width - size.Width, e.Bounds.Height);
            g.DrawString(data[e.Index].Substring(4), f, new SolidBrush(Color.Green), restRectF);
            e.Graphics.DrawImage(bmp,e.Bounds);
            g.Dispose();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:45:35.797

在 while 循环之外设置数据源。或者像这样将项目添加到列表框中

```
listBox1.Items.Add("Url: " + tokens[0] + " --- " + "Localy KeyWord: " + tokens[1]); 
```

# java - 如何验证什么类型的网络元素（选择框或文本）

> ID：12936652
> 
> 赞同：1
> 
> 时间：2012-10-17T14:30:03.463
> 
> 标签：java, selenium, webdriver

我正在使用 Page Factory 进行自动化，我想使用以下代码：

```
@FindBy(how = How.XPATH, using = "//div[contains(text(),'sometext')]")
private WebElement _selectBox1; 
```

但我不知道如何在这种情况下使用 xpath，因为这个 web 元素可以作为选择框，但有时这个 web 元素可以作为文本。

页面上的元素可以作为选择框（如果某些值可用于产品）

```
<div>
<select id="id_2" class="selectBox" onchange="OnsSelectHandler(this,2)" style="display: none;">
<option value="">Click to select</option>
<option value="3341">value 1</option>
<option value="3342">value 2</option>
</select>
</div> 
```

如果数据库不存在产品的数据，则显示为文本：

```
<div class="feature">
<span class="ynIco noIco"/>
<strong>Not available</strong>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:57:24.870

```
@FindBy(how = How.XPATH, using = "//div[contains(text(),'sometext') or count(./select)=1]")
private WebElement _selectBox1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:42:34.117

检查文本框是否存在。

```
 if(isElementPresent(By.cssSelector("div.feature > span")))
  {
        If it is present, then no need to think about select box (Pick list values)
  }
  else
  { 
       Do your operation with select box.
  } 
```

有关isElementPresent() 实现，请参见此内容[。](http://santoshsarmajv.blogspot.in/2012/07/iselementpresent.html)

# javascript - 向 CKEditor 添加自定义格式选项？

> ID：12936654
> 
> 赞同：4
> 
> 时间：2012-10-17T14:30:11.580
> 
> 标签：javascript, ckeditor

很抱歉，如果之前有人问过这个问题，我已经尝试过谷歌搜索/查看这里/浏览 CKEditor 论坛，但没有提出任何我似乎可以理解和实施的东西（抱歉，我不太擅长这个JavaScript的东西）

基本上，我想在 CKEditor 的格式下拉列表中添加一个自定义选项，它应该创建一个具有如下类的跨度：

```
<span class="custom-font"></span> 
```

我尝试在“config.js”文件中使用以下内容，但它似乎不起作用：

```
config.format_tags = 'p;h1;h2;h3;h4;h5;h6;pre;address;div;span'

config.format_span = { element : 'span', attributes : { 'class' : 'cutsom-font' } }; 
```

有人可以在这里指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T21:02:09.993

“格式”仅处理块级元素，因此您不能使用它在所选文本周围添加跨度标签。你需要“风格”来做到这一点。要添加到 CKEditor 附带的默认样式，请在 styles.js 中添加您的样式对象。这就是定义默认样式的地方。此外，您需要向对象添加“名称”属性。

```
{ name: 'Your custom style', element: 'span', attributes: {'class':'custom-font'} } 
```

如果您想列出自己的样式以替换默认样式，您可以在[此处](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Styles)找到详细信息。

根据链接，您还可以使用自己的 .js 文件来定义样式或使用样式表来获取 css 样式。

# javascript - 我的数据发布到新页面而不是指定的 div

> ID：12936657
> 
> 赞同：1
> 
> 时间：2012-10-17T14:30:21.553
> 
> 标签：javascript, ajax

为什么我的帖子数据出现在新的空白页上，而不是我指定的 div 上？该脚本位于名为 order.php 的页面的头部。我希望将提交的数据写入我在 order.php 上创建的“消息”div 中。但是当我提交时，我被重定向到 update.php，其中数据写在一个空白页面上。

```
<script type="text/javascript">
    function insert() {
        if (window.XMLHttpRequest) {
            xmlhttp = new XLMHttpRequest();
        } else {
            xmlhttp = new ActiveXObject('Microsoft.XMLHTTP');
        }

        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("message").innerHTML = xmlhttp.responseText;
            }
        }

        parameters = 'child_name'+document.getElementById('child_name').value;

        xmlhttp.open('POST', 'update.php', true);
        xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        xmlhttp.send(parameters); 
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:32:57.533

您当前的页面是`order.php`并且您`update.php`通过执行此操作将其发布到`xmlhttp.open('POST', 'update.php', true);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:35:54.507

这可能是由于正常的表单提交事件。

```
use a simple jquery

$("#form").submit(function(){
 $.post("update.php",{paramertes:'child_name_'+$("#child_name").val()},function(data){
$("#message").html(data);
})

 return false;//don't forget to use this
}) 
```

# javascript - Drupal 7 jQuery 函数调用问题

> ID：12936660
> 
> 赞同：0
> 
> 时间：2012-10-17T14:30:33.537
> 
> 标签：javascript, jquery, drupal-7

我在 Drupal 中遇到了以下问题，但这可能不完全是 Drupal 特定的问题。

我有以下简单的javascript：

```
(function ($) {

  function testing(){
    alert('TEST function responding!');
  }

})(jQuery); 
```

我正在尝试使用以下代码从我的 Drupal 模块调用该函数：

```
drupal_add_js('jQuery(document).ready(function () { testing(); });',
  array('type' => 'inline', 'scope' => 'footer', 'weight' => 5)
); 
```

但是，我收到一条错误消息，**提示 Uncaught ReferenceError: testing is not defined**

我想在该函数中利用 jQuery 的能力，这就是我不使用普通 JavaScript 文件的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:37:00.453

快速而肮脏的答案：您定义的范围`testing()`和调用它的范围不同。您可以定义测试全局范围，然后它将起作用，尽管这不是大型应用程序的最佳实践。

```
(function ($) {
    window.testing = function(){
        alert('TEST function responding!');
    }
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:42:06.580

如果你想将你的函数扩展到 jQuery 变量，你可以这样做：

```
if( !jQuery.testing ){

jQuery.extend( {
    testing: function() { 
        console.log("Calling from extend function in jQuery");
    }
});
} 
```

并称之为：

```
drupal_add_js('jQuery(document).ready(function () { jQuery.testing(); });',
  array('type' => 'inline', 'scope' => 'footer', 'weight' => 5)
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:56:17.423

您是否将代码的第一部分存储在外部 JavaScript 中？使用 drupal_add_js 来引用它，例如，

```
drupal_add_js('js/external.js');

//external.js
jQuery.noConflict();
jQuery(document).ready(function($) {
window.testing = function(){
    alert('TEST function responding!');
// The useful part of this is the ability to use $ from now on. e.g., $('body').hide();
}
});
}); 
```

然后添加你的 JavaScript

```
drupal_add_js('jQuery(document).ready(function () { testing(); });',
array('type' => 'inline', 'scope' => 'footer', 'weight' => 5)
); 
```

# sql-server - 在主表中连接表或单独 ID 的表设计

> ID：12936672
> 
> 赞同：0
> 
> 时间：2012-10-17T14:31:01.157
> 
> 标签：sql-server, sql-server-2008, database-design

我正在设计一个有几个表的数据库；常见问题解答、公告和附件。公告和常见问题解答可能有一个与之关联的附件，所以我最初的想法是创建一个连接表，其中两个主键作为复合键：

```
Bulletin
--------
BulletinID
Subject
Description
Notes

Attachment
-----------
AttachmentID
FileName
FilePath
etc. 
```

加入表：

```
BulletinAttachments
-------------------
BulletinID
AttachmentID 
```

当我设计这个时，我还想，如果稍后引入其他需要附件的实体（比如 Newsletter、Email 等）怎么办。我必须为这些实体中的每一个创建一个连接表。不可怕，但它让我想，如果我摆脱连接表并将 AttachmentType 放入 Attachment 表中，然后相应地分配类型：

```
AttachmentType
--------------
AttachmentTypeID
AttachmentType
Description 
```

该表中的数据为：
1-公告
2-常见问题
3-新闻通讯
4-电子邮件

然后 Attachment 表将保存 AttachmentTypeID 来识别它：

```
Attachments
-----------
AttachmentID
AttachmentTypeID
FileName
FilePath
etc. 
```

所以我的问题是，出于性能方面的考虑（使用 SQL 2008 R2），两者之间有更好的选择吗？有没有更好的方法来设计这个？我对使用单独的连接表的担忧是，我们可能会有更多的实体出现并容纳附件，我们必须创建一个连接表，并且在我们的前端软件上，我们必须为其编写逻辑，而 AttachmentTypeID 将允许前端插入一个新的 AttachmentType 并且不需要数据库交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:33:25.987

您的第二个解决方案无法将附件链接到项目，只是它是什么类型的项目。

即使这样做（即：itemID），您将创建的内容将违反第 4 范式 - 即：多值依赖项。

坚持您的第一个计划，但请考虑公告是否与您的应用程序中的时事通讯、电子邮件、常见问题解答等存在根本不同。如果您确实需要一个新表用于 Newsletter，请为 NewsletterAttachments 添加一个新表。

还要考虑一下，您是否要在不同项目或项目类型之间共享附件？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T18:31:20.170

我完全同意podiluska。您需要为每种类型的附件创建单独的表格，否则您无法将 itemid 与附件映射，并且您将面临为不同类型的附件加入表格的问题。此外，如果您为每种类型的附件制作单独的表格，那么性能会更快。

# arrays - F#中数组的元素乘法

> ID：12936677
> 
> 赞同：9
> 
> 时间：2012-10-17T14:31:35.930
> 
> 标签：arrays, f#, elementwise-operations

有没有一种简单的方法可以将 F# 中的数组项相乘？

因此，例如，我想从样本中计算总体平均值，我会将观察值乘以频率，然后除以样本数。

```
 let array_1 = [|1;32;9;5;6|];;

     let denominator = Array.sum(array_1);;

     denominator;;

     let array_2 = [|1;2;3;4;5|];;

     let productArray = [| for x in array_1 do
                             for y in array_2 do
                                 yield x*y |];;

     productArray;;

     let numerator = Array.sum(productArray);;

     numerator/denominator;; 
```

不幸的是，这会产生这样的产品数组：-

```
 val it : int [] =
     [|1; 2; 3; 4; 5; 32; 64; 96; 128; 160; 9; 18; 27; 36; 45; 5; 10; 15; 20; 25;
        6; 12; 18; 24; 30|] 
```

这是所有事物的乘积，而我在点积之后（每个 i 的 x.[i]*y.[i]）。

不幸的是，在 for 循环中添加 i 变量和索引似乎不起作用。

在这里使用的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T14:35:09.280

```
Array.zip array_1 array_2
    |> Array.map (fun (x,y) -> x * y) 
```

正如评论指出的那样，您还可以使用`Array.map2`：

```
Array.map2 (*) array_1 array_2 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T18:49:29.510

像这样：

```
Array.map2 (*) xs ys 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-17T14:35:55.317

就像是

```
[| for i in 0 .. array_1.Length - 1 ->
    array_1.[i] * array_2.[i] |] 
```

应该管用。

# html - 使用固定 div 缩放 div 宽度

> ID：12936688
> 
> 赞同：0
> 
> 时间：2012-10-17T14:32:03.760
> 
> 标签：html, css

我有一个 100% 宽度的 div 在那个 div 中，有 div 彼此相邻。左，中，右。中心的宽度为 900 像素。左右为 100%。我想让左右可伸缩，但它不起作用。左右全宽...

```
<div> 100%
    <div>left 100%</div>
    <div>center 900px</div>
    <div>right 100%</div>
</div> 
```

有人知道如何使它工作吗？

# java - 为什么当我要求 30 FPS 时，此代码有时会报告 21.3 FPS？

> ID：12936690
> 
> 赞同：2
> 
> 时间：2012-10-17T14:32:04.843
> 
> 标签：java, opengl, 3d, jogl, frame-rate

我有下面的代码（移植到 JOGL 2.0 的 Nehe 教程 1 的基本版本），它请求一个 FPSAnimator 动画 30 FPS。当我运行代码时，它会打印 21.321962 或 21.413277 FPS。如您所见，在创建 FPSAnimator 时，我指定需要每秒 30 帧。这是在配备 Core i7 CPU、24GB RAM 和 ATI Radeon HD 5700 系列显卡的现代机器上。21.3 FPS 似乎也不是限制。当我提高或降低请求的 FPS 时，报告的 FPS 确实会上升和下降（尽管它似乎不是线性关系）。

但是，有时当我在同一台机器上运行代码时，我会得到 30.30303 FPS。在这两种情况下，我只有几个 Web 浏览器选项卡，并且在机器上打开了 Eclipse。还值得注意的是，这不仅发生在这个简单的示例中，而且发生在我所有基于 JOGL 的应用程序中。我只是提供了这个简单的例子来演示这个问题。

我在几台机器上看到过这个问题。也许这只是我的想象，但它似乎不会发生在配备 NVidia GeForce 卡的机器上，但我已经看到它发生在配备 ATI 卡和 NVidia Quadro FX 卡的机器上。

什么可能导致这种差异？

```
public static void main(String[] args) {
    GLCanvas glCanvas;
    FPSAnimator animator;
    JFrame frame = new JFrame("JOGL HelloWorld");
    GLCapabilities caps = new GLCapabilities(null);

    caps.setDoubleBuffered(true);
    caps.setHardwareAccelerated(true);
    glCanvas = new GLCanvas(caps);
    glCanvas.setSize(800, 800);
    glCanvas.setIgnoreRepaint(true);
    glCanvas.addGLEventListener(new GLEventListener() {
        @Override
        public void reshape(GLAutoDrawable gLDrawable, int x, int y,
                int width, int height) {
        }

        @Override
        public void init(GLAutoDrawable gLDrawable) {
        }

        @Override
        public void dispose(GLAutoDrawable gLDrawable) {

        }

        @Override
        public void display(GLAutoDrawable gLDrawable) {
            FPSAnimator animator = (FPSAnimator) gLDrawable.getAnimator();
            System.out.println("animator.getLastFPS(): "
                    + animator.getLastFPS());
        }
    });

    frame.getContentPane().setLayout(new BorderLayout());
    frame.getContentPane().add(glCanvas, BorderLayout.CENTER);

    animator = new FPSAnimator(glCanvas, 30, false);
    frame.setSize(frame.getContentPane().getPreferredSize());
    frame.setVisible(true);
    animator.setUpdateFPSFrames(10, null);
    animator.start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:59:36.847

问题可能是由与 相关的不准确性引起的`java.util.Timer.schedule()`，JOGL 在使用任何双参数构造函数初始化时，或者当第 3 个参数（使用*固定速率调度*的标志）设置为时，会使用该不准确性`false`。

* * *

当标志设置为 时`true`，FPSAnimator 将`java.util.Timer.scheduleAtFixedRate()`改为使用，在 FPS 方面更加一致和准确。

具体来说，使用标志 as`true`在更高的 FPS 中会特别好，因为默认值对延迟很弱并且会开始出现漂移，而使用*固定速率调度将在很长一段时间内以正确的次数执行动画，不管延迟* [[来源]](http://www.javaworld.com/javaworld/jw-09-2008/jw-09-opensourcejava-jogl.html?page=7)。

* * *

但是请注意，根据对[正在实现此功能的票证的响应](http://java.net/jira/browse/JOGL-205)，*尚不清楚该标志是否会导致 CPU 消耗过多。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:19:01.227

不保证请求的 30 fps。FPS 几乎总是会更低或更高，但 avg fps 会尽量满足要求。

VSync 可以通过 gl.setSwapInterval(1) 启用，与 windows 设置无关。

使用 animator.setUpdateFPSFrames(200, System.out); 每 200 帧打印 avg fps

# c++ - 带有自定义分配器的 std::vector 子类和 std::vectors 之间的转换

> ID：12936691
> 
> 赞同：1
> 
> 时间：2012-10-17T14:32:08.253
> 
> 标签：c++, templates, constructor, subclassing, allocator

我有一个高级 C++ 问题：假设我有一个 mmap_allocator 模板类，它是 std::allocator 模板类的子类和一个 mmappable_vector 模板类，它是 std::vector 模板类的子类：

```
 template <typename T>
    class mmap_allocator: public std::allocator<T> {
            ...
    };

    template <typename T, typename A = mmap_allocator<T> >
    class mmappable_vector: public std::vector<T, A> {
            ...
    }; 
```

我能做的是使用函数模板从 mmappable_vector（带有 mmap_allocator）转换为 std::vector（带有标准分配器）：

```
 template <typename T>
    std::vector<T> to_std_vector(const mmappable_vector<T> &v)
    {
            return std::vector<T>(v.begin(), v.end());
    } 
```

但另一种方式似乎是不可能的：

```
 template <typename T>
    mmappable_vector<T> to_mmappable_vector(const std::vector<T> &v)
    {
            return mmappable_vector<T>(v.begin(), v.end());
    } 
```

定义构造函数时的问题，例如：

```
 typedef typename std::vector<T, A>::iterator iterator;

    mmappable_vector(iterator from, iterator to):
                    std::vector<T,A>(from, to)
    {
    } 
```

这将迭代器与 mmap_allocator 一起使用，因此与 to_mmappable_vector 中的调用不匹配。另一方面定义构造函数：

```
 mmappable_vector(std::vector<T,std::allocator<T> > v):
            std::vector<T,std::allocator<T> >(v)
    {
    } 
```

失败是因为

```
 std::vector<T,std::allocator<T> > 
```

不是 mmappable 向量的基类。

如何编写将 std::vectors 转换为 mmappable_vectors 的函数模板？这在 C++ 中可能吗？

感谢您的任何见解，

*   约翰内斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:35:34.137

您没有模板构造函数，`mmappable_vector`它需要两个任何类型的迭代器。像这个：

```
template <typename T, typename A = mmap_allocator<T> >
    class mmappable_vector: public std::vector<T, A> {
      typedef std::vector<T, A> Base;
      ...

      template <typename Iter>
      mmappable_vector(Iter first, Iter last, A a = A()) : Base(begin, end, a) {}

}; 
```

见[http://www.sgi.com/tech/stl/stl_vector.h](http://www.sgi.com/tech/stl/stl_vector.h)

* * *

但更重要的是你根本不应该这样定义你的向量：

```
template <typename T, typename A = mmap_allocator<T> >
    class mmappable_vector: public std::vector<T, A> {
            ...
    }; 
```

这是错误的，因为它派生自 STL 容器，派生是公共的，并且您没有虚拟析构函数。

* * *

据我了解您的问题-您只需要一个typedef。在 C++ 中制作 typedef 有两种方法 - C++11 和 C++03 方式：

**C++11**

```
template< typename T, typename A = mmap_allocator<T> >
using mmappable_vector = std::vector<T, A>; 
```

**C++03**

```
 template <typename T, typename A = mmap_allocator<T> >
    struct mmappable_vector {
        typedef std::vector<T, A> type;
    }; 
```

将其用作：

```
 mmappable_vector<int>::type 
```

# c# - 当您通过 .NET Remoting 从远程对象返回 Stream 时，幕后会发生什么

> ID：12936693
> 
> 赞同：9
> 
> 时间：2012-10-17T14:32:09.020
> 
> 标签：c#, .net, remoting, dispose, .net-remoting

我正在`Streams`从远程服务 ( `.NET Remoting`) 返回。但`Streams`也是一次性用品，我们都知道是要处理掉的。

`Dispose`一旦我吃完这些，我就可以打电话给客户端。但是，我想知道当我`Stream`从远程对象返回 a 时到底发生了什么。

尤其：

1.  我应该更好地将所有内容读入 a`byte[]`并返回它而不是 a`Stream`吗？
2.  还是 .NET 远程处理在幕后为我做这件事？
3.  如果不是，返回 a`Stream`与返回 a 有何不同`byte[]`？最后，`.NET Remoting`无论如何都必须以某种方式序列化数据？
4.  `Dispose`在客户端调用是否有任何影响？客户端的对象和服务器端的对象之间有什么神奇的联系吗？我认为一旦它在幕后被反序列化，调用`Dispose()`客户端就没有意义了，还是存在？

**我在这里回答 Mike Bild 是因为我也想稍微改进一下这个问题**

好的，所以与服务器对话的流（至少对我而言）是出乎意料的。

要使用远程对象，必须执行以下操作：

```
public static class ServiceFactory <T>
{   
    public static T CreateProxy()
    {
        Type interfaceType = typeof(T);

        string uri = ApplicationServer.ServerURL + interfaceType.FullName;

        return (T)Activator.GetObject(interfaceType, uri);
    }
} 
```

因此，您明确地在某个 URI 上获取特定的远程对象以进行使用。当该远程对象上的方法返回一个继承自 MarshallByRefObject 的对象时，这意味着它会自动与远程端的对象关联吗？好的，使用我自己构建的测试对象应该很容易重现。所以这也意味着我应该在客户端调用 Dispose 并将它代理回服务器端的对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:27:54.270

Stream 是 MarshalByRefObject。那是一种特殊的。这是一个代理。

1.  您可以在 .NET 远程处理中使用两者
2.  不，它是生成代理的另一种类型 - 查找从 MarshalByRefObject 的继承
3.  [http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx](http://msdn.microsoft.com/en-us/library/system.marshalbyrefobject.aspx)
4.  是的，代理类有点神奇

# android - 适用于 Android 的开发应用程序密钥和应用程序密钥

> ID：12936694
> 
> 赞同：5
> 
> 时间：2012-10-17T14:32:29.750
> 
> 标签：android, push-notification, urbanairship.com

我正在尝试使用带有 Helium 选项的城市飞艇为 android 应用程序设置推送通知。但是，我需要为我的应用程序找到这些我不知道从哪里找到的信息。任何意见或建议将不胜感激。谢谢！

```
For setting up Helium, make sure your transport is set correctly. Valid answers for transport are: helium or c2dm. The following should go in the assets/airshipconfig.properties of your project.

transport = helium
developmentAppKey = Your Development App Key
developmentAppSecret = Your Development App Secret
productionAppKey = Your Production App Key
productionAppSecret = Your Production App Secret
inProduction = false 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-17T14:40:42.047

设置应用程序后，可以在 UrbanAirship 网站上找到这些密钥。

完成此操作后，您可以单击“访问应用程序”，您将能够看到密钥，然后将其放入应用程序中。

它们基本上告诉您正在开发的 Android 应用程序要连接到 Urban Airship 服务上的哪个应用程序。

![在此处输入图像描述](../Images/c3738541fbfc95004d528168ad1f2027.png)

# c - c中的字数有错误

> ID：12936695
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:32:30.763
> 
> 标签：c, linux

我是 C for Linux 的初学者，我需要帮助，因为我的程序不工作而且我没有看到问题。

这是我的程序，该程序计算标准输入中的单词、行和字母。但是当有`' '`,`'\t'`或`'\n'`

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>

void panic (char *str){
    char s [100];
    sprintf (s, "%s (%d %s)\n", str, errno, strerror (errno));
    write (222, s, strlen (s));
    exit (1);
}
int main (int argc, char *argv[]){
    char c;
    unsigned lines =1;
    int n;
    int letters =0;
    int words =0;
    int countLin=0;
    int countLet=0;
    char resultLine=[100];

    while ((n = read (0, &c, 1))> 0){
        if(c!=' '&&c!='\t'&&c!='\n'){
        letters++;
        if(countLet!=0){
            words++;
            countLet=0;
        }
        if(countLin!=0){
            lines++;
            words++;
            countLin=0;
        } 
    }
        if(c==' '||c=='\t')
            countLet++;
        if(c=='\n')
            countLin++;
    }
    if (n<0)
        panic ("Read");
    sprintf (resultLine, "%d %d %d \n", lines, words, letters);
    if(write(1,resultLine, strlen(resultLine))<0)
        panic("Write");
    return (0);
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:43:56.607

您需要切换这两行的顺序：

```
 if(c!=' '&&c!='\t'&&c!='\n'){
        letters++;
    ...
    } 
```

否则`letters`不会为空白字符增加

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:55:05.340

改变：

```
char resultLine=[100]; 
```

至：

```
char resultLine[100]; 
```

# playorm - 如何索引分区字段？

> ID：12936701
> 
> 赞同：0
> 
> 时间：2012-10-17T14:32:45.170
> 
> 标签：playorm

我有一个由 userId 分区的实体（请求）。对于每个 userId，我都会有一个索引，对吧？

但是，我想通过 userId 快速搜索请求。有没有一种简单的方法可以做到这一点？或者我需要选择另一个字段来创建分区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T22:54:40.243

如果你愿意，你可以划分两种方式。假设你这样做

```
public class Request {
    @NoSqlId
    @NoSqlIndexed
    private String uniqueId;

    @NoSqlIndexed
    @NoSqlPartitionedBy
    @NoSqlManyToOne
    private User user;

    @NoSqlIndexed
    @NoSqlPartitionedBy
    private LocalDate beginningOfEachMonth;
} 
```

如果您愿意，您可以使用私有 String userId 而不是 User ;)。

现在，您可以使用月初作为键查询时间分区，只需执行查询，或者您可以使用用户作为键查询用户分区。

如果您按两件事进行分区，则您的命名查询将是...

```
query="PARTITIONS("user", :user) SELECT r FROM TABLE as r" 
```

如果您仅按用户对表进行分区，则可以编写

```
query="PARTITIONS(:user) SELECT r FROM TABLE as r" 
```

注意：有时您需要像我一样索引主键的唯一原因是对主键进行范围查询....对于 pk= 某个值的等于查询，您显然不需要索引，因为您可以通过主键本身查找。

院长

# c# - 从程序集中读取 xml 文件

> ID：12936707
> 
> 赞同：0
> 
> 时间：2012-10-17T14:32:57.680
> 
> 标签：c#, xml, winforms, .net-assembly

我正在尝试从程序集中读取 xml 文件，这是我的代码：

```
private Assembly testAssembly;
    private void button1_Click(object sender, EventArgs e)
    {
        string testfile = "stack.xml";
        String testfileName = string.Format("{0}.{1}", testAssembly.GetName().Name, testfile);

        using (Stream stream = testAssembly.GetManifestResourceStream(testfileName))
        {
            using (StreamReader sr = new StreamReader(stream))
            {
                var value = sr.ReadToEnd();
                Console.WriteLine("The read file is {0}", value);
            }
        }
    } 
```

我在这条线上有一个问题：

```
String testfileName = string.Format("{0}.{1}", testAssembly.GetName().Name, 
                                     testfile); 
```

未处理的空引用异常，它说空。有什么帮助？？？ ![在此处输入图像描述](../Images/ad602270134c4968d90aa83896d5e5da.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:38:48.427

看起来`marksAssembly`是`null`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T07:02:22.063

```
string resName = "resources/HistoryConnections.xml";  

private static UnmanagedMemoryStream GetResourceStream(string resName)
        {
            var assembly = Assembly.GetExecutingAssembly();
            var strResources = assembly.GetName().Name + ".g.resources";
            var rStream = assembly.GetManifestResourceStream(strResources);
            var resourceReader = new ResourceReader(rStream);
            var items = resourceReader.OfType<DictionaryEntry>();
            var stream = items.First(x => (x.Key as string) == resName.ToLower()).Value;
            return (UnmanagedMemoryStream)stream;
        } 
```

# symfony - Symfony2/Assetic：组合 LESS/CSS 时出现 500 错误

> ID：12936709
> 
> 赞同：1
> 
> 时间：2012-10-17T14:33:15.240
> 
> 标签：symfony, assetic

当我将第二个文件添加到我的另一个文件时，它似乎会在第一个文件上导致 500 错误。

```
 {% stylesheets
        '@MopaBootstrapBundle/Resources/public/less/mopabootstrapbundle.less'
        '@MyTestBundleBundle/Resources/public/css/main.css'

    %}
    <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
    {% endstylesheets %} 
```

这是我的资产（它在开发中使用控制器）：

```
assetic:
    debug:          %kernel.debug%
    use_controller: false
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        less:
            node: /usr/bin/node
            node_paths: [/usr/lib64/node_modules]
            apply_to: "\.less$" 
```

如果我删除 main.css 它工作正常。如果我将 main.css 移动到不同的样式表块，它也可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T08:23:38.373

我认为您忘记了过滤器属性。

```
{% stylesheets '@MopaBootstrapBundle/Resources/public/less/mopabootstrapbundle.less' '@MyTestBundleBundle/Resources/public/css/main.css' filter='less,?yui_css'%}
<link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
{% endstylesheets %} 
```

更新。

`apply_to: "\.less$"`刚才看到了

将此块拆分为 2 个样式表

```
{% stylesheets '@...less' %}
    <link href="{{ asset_url}}" ... />
{% endstylesheets %}
{% stylesheets '@...css' %}
    <link href="{{ asset_url}}" ... />
{% endstylesheets %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:42:18.933

问题是我的节点较少是问题所在。将此切换到 github (1.3.1) 中的最新版本修复了它。

# asp.net-mvc - Web API 错误：“ObjectContent`1”类型无法序列化内容类型的响应正文

> ID：12936713
> 
> 赞同：4
> 
> 时间：2012-10-17T14:33:26.620
> 
> 标签：asp.net-mvc, asp.net-web-api

尝试使用 Web API 控制器时出现此错误。

> Web API 错误：“ObjectContent`1”类型无法序列化内容类型的响应正文

我的控制器中的代码如下

```
public IEnumerable<Student> GetAllStudents()
    {
        var allstudents = unitOfWork.StudentRepository.Get(includeProperties: "Groups");

        return allstudents;
    }

    public Student GetStudentByID(Guid id)
    {
        return unitOfWork.StudentRepository.GetByID(id);
    } 
```

我的“学生”课程如下

```
public partial class Student
{
    public Student()
    {
        this.Groups = new HashSet<Group>();
    }

    public System.Guid StudentID { get; set; }
    public string Surname { get; set; }
    public string FirstName { get; set; }
    public byte[] Timestamp { get; set; }

    public virtual Course Course { get; set; }
    public virtual ICollection<Group> Groups { get; set; }
} 
```

两种方法都会导致相同的错误。

我的内心异常如下

> 键入“System.Data.Entity.DynamicProxies.Student_4C97D068E1AD0BA62C3C6E441601FFB7418AD2D635F7F1C14B64F4B2BE32DF9A”数据合同名称“Student_4C97D068E1AD0BA62C3C6E441601FFB7418AD2D635F7F1C14B64F4B2BE32DF9A：[http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies](http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies) ”预计不会。考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。

我觉得我需要使用该`KnownType`属性，但我不确定如何实现它。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T17:34:32.547

如果您不需要代理类 ( `System.Data.Entity.DynamicProxies.Student_4C97D068E1A...`) 提供的延迟加载导航属性，您可以通过设置禁用它们的生成：

```
unitOfWork.Configuration.ProxyCreationEnabled = false; 
```

如果需要代理类怎么办是[另一个问题](https://stackoverflow.com/q/13959048/145173)。

* * *

按照这些链接可以很好地了解延迟加载和代理：

*   [加载相关实体](http://msdn.microsoft.com/en-us/data/jj574232.aspx)
*   [使用代理](http://msdn.microsoft.com/en-us/data/jj592886.aspx)
*   [我应该启用还是禁用动态代理](https://stackoverflow.com/q/7111109/145173)

我通常默认禁用延迟加载和代理，并在需要它们的特定代码块中启用一个或两个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:23:29.410

什么是内部异常消息？内部异常消息将是序列化程序抛出的实际异常，它应该告诉我们是哪种类型导致了异常。

让我猜猜 - 是任何类型`Course`和类型`Group`吗？如果是这样，请尝试将`KnownType`属性放在您的实际实现类型上`class Student`

```
[KnownType(typeof(GroupA))]
[KnownType(typeof(CourseA))]
public partial class Student
{...}

public class GroupA : Group {...}
public class CourseA : Course {...}

public interface Group {...}
public interface Course {...} 
```

# sharepoint - Sharepoint 2010 如何添加一个 wsp webpart

> ID：12936714
> 
> 赞同：3
> 
> 时间：2012-10-17T14:33:29.937
> 
> 标签：sharepoint, import, web-parts

我们在学校有一个 Sharepoint 项目，我们需要在网站上包含一些 web 部件，例如天气；关键是导入 webparts SP 要求我提供 .dwp 或 .webpart 文件，而我只能找到 .wsp 。我应该在哪里查找 .webpart 文件？或者如何导入 .wsp ？非常感谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T14:36:45.443

我总是使用 sharepoint 管理 shell。将您的 .wsp 文件移动到一个容易的位置。以管理员身份打开管理 shell 并使用以下命令：

```
add-spsolution c:\yourwsp.wsp 
```

开放式共享点中央管理和管理农场解决方案。部署您的 Web 部件（系统设置 - > 管理农场解决方案），然后激活您的 Web 部件功能（转到所需的 Web 应用程序站点操作 - > 站点设置 - > 站点集合功能）。

编辑：当您重新部署 .wsp 时，请确保您转到您的场解决方案并首先收回/删除您的 .wsp。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-14T12:43:10.307

打开 PowerShell 控制台（使用管理员凭据）和

添加：

```
stsadm -o addsolution -filename "C:\yourwsp.wsp"

stsadm -o deploysolution -name yourwsp.wsp -url http://yourSPsite  -allowgacdeployment –immediate

stsadm -o execadmsvcjobs 
```

在第一行中，您要添加 wsp。在第二行中，您正在部署 wsp。最后一行，Powershell 正在执行该作业。

# html - HTML5 元素未显示在 Mac 上的 Firefox 中

> ID：12936715
> 
> 赞同：3
> 
> 时间：2012-10-17T14:33:34.973
> 
> 标签：html, html5-audio

[http://fowlertown.com/projects/terry/widgets/audio.html](http://fowlertown.com/projects/terry/widgets/audio.html)

或者，如果您不想单击链接，这里是重要的代码：

```
<audio type="audio/mpeg; codecs='mp3'" controls src="sample.mp3">Your browser does not support the HTML5 &lt;audio&gt; element.</audio> 
```

这没有出现在 Mac OS X 10.7.4 上的 Firefox 15.0.1 和 16.0.1 中，这让我很沮丧，因为这是非常简单的 HTML5 代码。它会在加载时弹出片刻，然后消失。它甚至不显示后备文本。

想法？它适用于 Windows 用户吗？

**编辑**：[http](http://html5doctor.com/html5-audio-the-state-of-play/) ://html5doctor.com/html5-audio-the-state-of-play/是我获得浏览器支持列表的地方，这表明 FF 从 3.6 版开始支持音频元素（MP3 编解码器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:45:38.503

您必须以不同的方式使用此标签，因为在 Firefox 中您无法使用此类代码播放 MP3 文件。这是您的帮助的链接。[http://support.mozilla.org/en-US/questions/758978](http://support.mozilla.org/en-US/questions/758978)

Firefox 不支持 mp3。看到这个[http://www.codingforums.com/showthread.php?t=231069](http://www.codingforums.com/showthread.php?t=231069)

# iframe - Google Analytics - 自定义 iFrame 跟踪

> ID：12936718
> 
> 赞同：1
> 
> 时间：2012-10-17T14:33:39.857
> 
> 标签：iframe, google-analytics

[我在http://tic.cwoebker.com](http://tic.cwoebker.com)制作了一个可以完美运行的小型井字游戏。实际的井字游戏从 (/tic) 加载并嵌入到 iframe 中。

因此，如果他们愿意，其他人可以轻松地将游戏嵌入到他们自己的网站上。

![井字游戏](../Images/54419cab124a5a5d1ae1de58fb356384.png)

我正在 iframe 内进行一些事件跟踪。现在我已经设置好了，所以它会在主页和 iframe 内的实际游戏代码上触发一个页面视图。

[我想知道如果 iframe 没有嵌入在http://tic.cwoebker.com](http://tic.cwoebker.com)上而是在另一个站点上，我是否只能以某种方式触发 iframe 的页面视图。

因此，在根目录 (/) 下跟踪的所有内容都是我网站上的流量，而在 i 框架 (/tic) 中跟踪的所有内容都是通过嵌入另一个站点生成的流量。

现在我在 iframe 中的分析代码如下所示：

```
 <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-xxxxxxxxx-x']);
    _gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

</script> 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:03:11.303

As you're in an iFrame on a separate domain, you can't access the parent window to get the location. Check out this demo and/or google it a bit: [http://jsfiddle.net/TomFuertes/RRB52/2/](http://jsfiddle.net/TomFuertes/RRB52/2/)

```
_gaq.push(['tictactoe._setAccount', 'UA-xxxxxxxxx-x']);
// Line below causes security issues, thus won't work
_gaq.push(['_setCustomVar', 1, 'Domain', window.parent.location.host, 3]);
_gaq.push(['tictactoe._trackPageview']); 
```

You can pass the domain using a querystring on your iFrame page, you'd need to modify the include code to look like this: [https://stackoverflow.com/a/5697801/94668](https://stackoverflow.com/a/5697801/94668)

```
<script type="text/javascript">
document.write('<iframe src="//tic.cwoebker.com/?url=' + window.location + '"></iframe>');
</script> 
```

Then you'd filter out your Google Analytics appropriately.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T22:33:41.907

您可以使用 Google Analytics 广告系列来跟踪流量。您将需要分发已经具有活动参数的嵌入代码作为嵌入 iframe src 的一部分。

希望有帮助。

有兴趣听听别人的意见。

# php - 查询给了我一个布尔错误错误

> ID：12936719
> 
> 赞同：0
> 
> 时间：2012-10-17T14:33:40.160
> 
> 标签：php, mysql

请我需要帮助！我已经有3天了同样的问题。我知道查询没有给我一个布尔真实的结果。我什至不知道它给了我什么。它给我的问题是：

> 警告：mysqli_prepare() 期望参数 2 是字符串，对象在第 48 行的 C:\xampp\htdocs\caf\pages\log.php 中给出

我已经尝试将结果转换为字符串，但我发现问题出在这一行给我的输出中：

```
$query_pages_result = mysqli_query($connection, $get_pages_query)  or die($myQuery."<br/><br/>".mysql_error()); 
```

所以请有人帮我看看这条线是否可以给我想要的结果，即查看表格记录中有多少页。提前致谢！

```
<?php

session_start();

// GET PAGES RECORD FROM LOG TABLE: *********| Only the first time though:
if (isset($_SESSION['log']) != 'logging')
{
    //  Here, just creating a string:
    $pages_record = '';
    $insert_query = '';
    //      Get saved pages from the database:
    $connection = mysqli_connect($mach,$userna,$paso,$db) or die ("Error in log-page script: AB-1 - query: $insert_query." . mysqli_error());
    mysqli_select_db($connection,'cafeteria');

    //      Query string to pull all pages from table record:
    $get_pages_query = "select *  from `log-page` order by `log-id`";

    //      Query the database, and save result:
    $query_pages_result = mysqli_query($connection, $get_pages_query)  or die($myQuery."<br/><br/>".mysql_error());

    //      Check number of results returned:
    $num_of_results = '';

    if ($stmt = mysqli_prepare($connection, $query_pages_result)) {
    $num_of_results = mysqli_num_rows($stmt);

    if ($num_of_results > 0)
    {
        // Loop through the result array: Each time, one row, and then the next one ...
        for ($row = 0; $row < $num_of_results; $row++ )
        {
            // Getting one row:
            $get_row = mysqli_fetch_array($query_pages_result);
            // Extracting just the page name from the row:
            $one_page = substr($get_row["page"],strripos($get_row["page"],"/") + 1);
            // Adding this page name to the string created previously:
            if ($row == 0)
            {
                $pages_record .= $one_page;
            }
            else 
            {
                $pages_record .= ",".$one_page;
            }           
        }

        // Once all pages have been read and saved to the string
        // now we save it to the session:
        $_SESSION['logpages'] = $pages_record;
        $_SESSION['log'] = 'logging'; // This just tells us, we are logging pages to the database.
    }
    else 
    {
        // There are no pages in the table:
        $_SESSION['logpages'] = "";
        $_SESSION['log'] = 'logging'; // This just tells us, we are logging pages to the database.
    }
}

// Check if page is already in session list.
$pages_array = array();
if (strlen(isset($_SESSION['logpages'])) > 0 )
{
    // string variable that holds all pages separated by commas:
    $pages_string =  $_SESSION['logpages'];

    // creating an Array to hold all pages already logged in server:
    if (strstr($pages_string, ","))
    {
        $pages_array = explode(",", $pages_string);
    }
    else // just means there's only one page in the record
    {
        // so, we push it inside the array.
        array_push($pages_array, $pages_string);
    }

    // current page: [ We are extracting only the page, not the entire url, Exmp: login.php ]
    $current_page = substr($_SERVER['PHP_SELF'],strripos($_SERVER['PHP_SELF'],"/") + 1);

    // Check if current_page is in the array already:
    if (!in_array($current_page, $pages_array))
    {
        // IF is NOT in the array, then add it:
        array_push($pages_array, $current_page);

        // Add it to the Session variable too:
        $pages_string = implode(",", $pages_array);

        // Re-save it to SESSION:
        $_SESSION['logpages'] = $pages_string;

        // Now, add it to the database table "log-page""
        $connection = mysqli_connect($mach,$userna,$paso,$db) or die ("Unable to connect!");
        mysqli_select_db($connection,'cafeteria');

        // Query to insert page description into the table:
        // [ date - time - page - user ]
        $insert_query = "INSERT INTO `log-page` 
            (`date`, `time`, `page`, `user`) VALUES 
            ('".date("Y-m-d")."', '".date("H:i:s")."', '".$_SERVER['PHP_SELF']."', '".(isset($_SESSION['SESSION_UNAME']))."')"; 
            mysqli_select_db($connection,'cafeteria');

        // INSERTING INTO DATABASE TABLE:
        mysqli_query($connection, $insert_query) or die ("Error in log-page script: AB-2 - query: $insert_query." . mysqli_error($connection));
        // Done!
    }
    else 
    {
        // IF it IS in the list, just SKIP.
    }
}
else 
{
    // means, that there are absolutely no pages saved in the database, basically this is the first log:
    $_SESSION['logpages'] = substr($_SERVER['PHP_SELF'],strripos($_SERVER['PHP_SELF'],"/") + 1);    

    // Now, add it to the database table "log-page""
    $connection = mysqli_connect($mach,$userna,$paso,$db) or die ("Unable to connect!");
    mysqli_select_db($connection,'cafeteria');

    // Query to insert page description into the table:
    // [ date - time - page - user ]
    $insert_query = "INSERT INTO `log-page` 
        (`date`, `time`, `page`, `user`) VALUES 
        ('".date("Y-m-d")."', '".date("H:i:s")."', '".$_SERVER['PHP_SELF']."', '".(isset($_SESSION['SESSION_UNAME']))."')"; 
    mysqli_select_db($connection,'cafeteria');
    // INSERTING INTO DATABASE TABLE:
    mysqli_query($connection,$insert_query) or die ("Error in log-page script: AB-2 - query: $insert_query." . mysqli_error($connection));
    // Done!    
}

}?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:35:40.780

问题在于这一行：

```
if ($stmt = mysqli_prepare($connection, $query_pages_result)) { 
```

第二个变量[`mysqli_prepare`](http://php.net/mysqli_prepare)需要是实际的 SQL 查询，而不是执行查询的结果对象`mysqli_query`。您可能会因此而倒退逻辑。您*应该*准备语句*然后*执行它。看起来您正在执行它，然后尝试准备它。

尝试删除该`$query_pages_result = mysqli_query(...`行并将其余更改为：

```
if ($stmt = mysqli_prepare($connection, $get_pages_query)) {
    $stmt->execute(); 
```

但是，您的查询没有任何绑定参数，因此您实际上可以在这种情况下使用`mysqli_query`和删除`mysqli_prepare`- 真的是您的偏好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:38:14.897

实际上您的问题在指示的行中

```
if ($stmt = mysqli_prepare($connection, $query_pages_result)) 
```

$query_pages_result 不是字符串，它是您已经运行的查询的结果句柄，您不需要准备它，因此不需要此代码，您已经获得了查询和行数，现在单步执行。

# php - php amqp 错误与频道创建？

> ID：12936726
> 
> 赞同：0
> 
> 时间：2012-10-17T14:33:55.990
> 
> 标签：php, rabbitmq, amqp

我有这个代码的错误（见评论）

```
<?

$connection = new AMQPConnection(array('host' => 'dev.rabbitmq.com'));
$connection->connect();

for ($i = 0; $i < 3; $i++) {

    // first two times it works.
    // Third - throws: 'AMQPChannelException' with message 'Server connection error: 503, message: COMMAND_INVALID - second 'channel.open' seen
    $channel = new AMQPChannel($connection);

    $queue = new AMQPQueue($channel);
    $queue->setFlags(AMQP_PASSIVE);
    $queue->setName('test' . $i);

    try {
        $queue->declare(); // create queue to get creation errors. This will throw no errors if queue exists
        $queue_exists = true;
    } catch (AMQPQueueException $e) {
        // queue does not exist, so we have error
        $queue_exists = false;
    }
} 
```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:56:35.110

我无法准确确定引发错误的原因（我认为这可能是 AMQP 扩展的内部问题）。我确实让脚本像这样工作。

```
<?php

$connection = new AMQPConnection(array('host' => 'dev.rabbitmq.com'));
$connection->connect();

$channels = array();
$channels[] = new AMQPChannel($connection);
$channels[] = new AMQPChannel($connection);
$channels[] = new AMQPChannel($connection);

for ($i = 0; $i < 3; $i++) {

    // first two times it works.
    // Third - throws: 'AMQPChannelException' with message 'Server connection error: 503, message: COMMAND_INVALID - second 'channel.open' seen
    $channel = $channels[$i];

    if(isset($queue)){unset($queue);}
        $queue = new AMQPQueue($channel);
        $queue->setFlags(AMQP_PASSIVE);
        $queue->setName('test' . $i);

    try {
        $queue->declare(); // create queue to get creation errors. This will throw no errors    if queue exists
        $queue_exists = true;
    } catch (AMQPQueueException $e) {
        // queue does not exist, so we have error
        $queue_exists = false;
    }
} 
```

# git - 为什么 `git push -f` 会强制推送所有的跟踪分支？

> ID：12936730
> 
> 赞同：4
> 
> 时间：2012-10-17T14:34:05.037
> 
> 标签：git

Git版本：1.7.12.3

正如问题所述，这对我来说似乎是一个非常糟糕的主意。没有任何额外的标志或确认`git push -f`将强制将所有跟踪分支推送到远程。

如果开发人员有一些过时的分支，即跟踪遥控器，并且他执行该命令，则所有跟踪分支都将回滚到他过时的副本，这会导致有价值的工作丢失。

这可能是意外完成的，也可能是由对 git 不太熟悉的人完成的。看起来 git 在这种危险的情况下应该做更多的事情，并且需要一个额外的标志，或者要求确认。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-21T15:25:02.927

由于现在是 2016 年 1 月，我想值得为这个问题添加一些更新信息：

1.  正如霍布​​斯所说，就推动当前或所有更改的分支而言，`git push --force`其行为与正常情况**完全相同。**`git push`
2.  `git push`推送所有分支或单个分支，这取决于`push.default`
3.  [这篇文章](https://stackoverflow.com/a/21865319/3134602)中的更多细节，但为了只推送当前分支，你`.gitconfig`应该看起来像：

```
    [用户]
            名称 = 用户名
            电子邮件 = example.mail@gmail.com
    [推]
            默认 = 简单

```

4.  为了看到你`.gitconfig`在`Unix-like OS`做`cat ~/.gitconfig`。这篇[文章](https://stackoverflow.com/a/2115116/3134602)展示了如何在 Windows 上执行此操作。
5.  仅推送当前分支（`simple`模式）仅在 Git `2.0`（发布于`2014-12-17`）中成为默认值。
6.  那些正在使用 Git `1.7`（或从 更新`1.7`）的人将`matching`模式作为默认模式（推送所有分支）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T17:40:09.903

如前所述 git push 默认行为是在远程推送具有匹配名称的所有分支。

正如文档所说的 -f/--force：

> 通常，该命令拒绝更新不是用于覆盖它的本地引用的祖先的远程引用。此标志禁用检查。这可能会导致远程存储库丢失提交；小心使用它。

因此，在 -f 行为中添加额外的检查就像在询问“您确定要删除文件吗？” 然后“你真的确定吗？”

git push 的默认行为将在未来的 git 主要版本（1.9 或 2.0 但肯定不会在 1.8 中）发生变化，仅推送您正在处理的分支。在这种情况下，您可以设置以下选项：

```
git config remote.origin.push HEAD 
```

但是，如果你使用 -f 并且你在一个过时的分支上，你的担忧仍然存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:53:52.433

因为`git push -f`做什么做什么`git push`，只有一个`-f`。因为`git push`默认配置为在没有分支参数的情况下推送所有匹配的分支。您应该执行`git config push.default upstream`或`git config push.default simple`更改默认推送行为（`git help config`有关此功能的更多信息，请参阅 ）。

# handlebars.js - 如何让 Smart Time Ago 与 Handlebars.js 一起使用

> ID：12936735
> 
> 赞同：0
> 
> 时间：2012-10-17T14:34:32.483
> 
> 标签：handlebars.js

我正在使用 Handlebars.js 和[http://pragmaticly.github.com/smart-time-ago/](http://pragmaticly.github.com/smart-time-ago/)

我有这个工作：

```
<time class="timeago" datetime="2012-07-18T07:51:50Z"></time> 
```

在这里演示：[演示](https://c9.io/aaronkahlhamer/smart-time-ago/workspace/index.html)

* * *

但是当我在这里看到的把手逻辑中添加时间时......

```
<div id="handlebarsPlaceholder">This will get replaced by handlebars.js</div>
    <script id="aaronsTemplate" type="text/x-handlebars-template">
        {{#messages}}
         <li>
            <a href="#messageID{{messageID}}">
                <time class="timeago" datetime="2012-07-18T07:51:50Z"></time>
                <strong>{{from}}</strong><br/>
                {{subject}}
            </a>
         </li>
        {{/messages}}
        </script>
    </ul>
</div> 
```

...这没用。

我错过了什么或者有一篇文章可以引导我找到答案？我在谷歌上到处搜索，但一定没有正确的搜索词。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T16:44:05.757

您的`$('.timeago').timeago()`调用不会在 a 中找到东西，`<script type="text/x-handlebars-template">`因为它`<script>`不包含 HTML（这就是我们特别不在`type="text/html"`模板容器上使用的原因）。

您需要做的就是调用`.timeago()`通过填写模板获得的 HTML；像这样的东西：

```
var t = Handlebars.compile($('#aaronsTemplate').html());
$('#handlebarsPlaceholder').html(t({ ... });
$('#handlebarsPlaceholder .timeago').timeago(); 
```

最后一行是你所缺少的。

此外，您的 HTML 有点偏离，您有一个迷路`</div>`并且您`<ul>`在模板中缺少一个开口；你应该有更多这样的东西：

```
<div id="handlebarsPlaceholder">This will get replaced by handlebars.js</div>
<script id="aaronsTemplate" type="text/x-handlebars-template">
    <ul>
        {{#messages}}
            <li>
                <!--... -->
            </li>
        {{/messages}}
    </ul>
</script> 
```

演示（带有精简模板）：http: [//jsfiddle.net/ambiguous/89Bwx/1/](http://jsfiddle.net/ambiguous/89Bwx/1/)

# javascript - 刷新网页而不使用正文加载

> ID：12936738
> 
> 赞同：1
> 
> 时间：2012-10-17T14:34:38.967
> 
> 标签：javascript

您好，有一个使用 javascript 对位置进行地理定位的网页，我已经进行了设置，以便每次页面刷新时访问者的位置都会更新。

我想要做的是使用 javascript 刷新每三分钟更新一次详细信息，但是我已经有一个正文 onload，如下所示在我的网页中。

```
<body onload="getLocation()"> 
```

有没有另一种方法可以刷新网页而无需将javascript添加到body onload，或者有没有一种方法可以同时添加？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:40:57.373

这是http刷新方法。如果只是刷新页面，则 URL 是可选的。

<head> <meta http-equiv="refresh" content="30; ,URL=http://www.metatags.org/login"> </head>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:41:45.423

```
setTimeout(function(){ getLocation(); },12345) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:42:34.533

您可以使用 window.setInterval(functionToCall, timeIntervalInMilis);

# javascript - jQuery on() 事件仅适用于 $(document)

> ID：12936742
> 
> 赞同：1
> 
> 时间：2012-10-17T14:34:53.560
> 
> 标签：javascript, jquery

我正在使用 jQuery 的`.on()`事件处理程序，它仅在我使用`$(document)`.

这有效：

```
$(function() {
    $(document).on("click", ".search .remove", function(e) {
        console.log("clicked");
    });
}); 
```

这不起作用：

```
$(function() {
    $(".search .remove").on("click", function(e) {
        console.log("clicked");
    });
}); 
```

第二个没有任何反应......没有错误或任何东西。它只是不火。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:41:35.417

您正在使用 .on 的两种不同语法，它们有两种截然不同的结果。

你的第一个是：

```
$(context).on("event","targetselector",handler) 
```

这将事件绑定到上下文，并且任何类型的事件`event`到达`context`具有`e.target`可以选择的 的`targetselector`将触发处理程序`e.target`作为上下文。这通常称为事件委托。

你的第二种语法是

```
$(targetselector).on("event",handler) 
```

在这种情况下，事件直接绑定到页面上当前匹配的`targetselector`元素，而不是未来的元素。这与旧的基本相同`.bind`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T14:39:33.647

您的第二个示例不起作用，因为您的元素是动态创建的。当使用`.on()`动态插入的元素时，您必须通过一个非动态插入的元素来绑定它，即在加载时存在于页面上的元素。

您可以继续`document`用作祖先元素，但就性能而言，您可能希望在 DOM 中找到更接近`".search .remove"`.

来自jQuery[文档](http://api.jquery.com/on/)：`.on()`

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择一个在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:41:29.813

您的第一个方法`on()`与不推荐使用的方法等效`live()`。页面加载完成后，您的元素可能会动态插入。

您可以像下面这样重写您的代码，它应该可以工作：

```
$(function() {
    $(".search").on("click", ".remove", function(e) {
        console.log("clicked");
    });
}); 
```

# sql - SQL LIKE 复杂请求 AS400

> ID：12936745
> 
> 赞同：1
> 
> 时间：2012-10-17T14:34:59.030
> 
> 标签：sql, db2

我目前正在尝试使用 AS400 数据库中的 LIKE 查询编写复杂的搜索功能。

我想查找所有包含“LIxxxxx”列的 SDVR01 记录。“x”是数字。问题是该列可以包含以下内容：'LI12345''LI12345''something LI12345''any string'

我看不到如何仅使用经典 % 和 _ 来做到这一点

可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:49:50.857

```
SELECT * FROM yourTable 
         WHERE SDVR01  LIKE '%LI[0-9][0-9][0-9][0-9][0-9]%' 
```

'LI12345' -> 是
'asdLI12345' -> 是
'LI12X345' -> 否

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:43:33.580

```
SELECT * FROM Foo
WHERE yourColumn like '%LI12345%'; 
```

**编辑**

也使用通配符

```
 SELECT * FROM Foo
WHERE yourColumn like '%LI_____%'; 
```

或者一个简单的`%LI%`

# jquery - Jquery填充下拉框

> ID：12936748
> 
> 赞同：0
> 
> 时间：2012-10-17T14:35:01.047
> 
> 标签：jquery, asp.net-mvc, html.dropdownlistfor

我正在尝试使用 jquery 填充下拉列表。人口有，但默认文本“选择模型”被新数据替换。

Javascript：

```
 data = $.map(data, function (item, a) {
    return"<option value=" + item.Value + ">" + item.Text    + "</option>";
    $("#SelectedModel").html(data.join("")); 
```

HTML：

```
@Html.DropDownListFor(m=>m.SelectedModel,Model.models,"Select Model") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:39:54.140

使用附加：

```
//to reset select options
$('#SelectedModel option').not(':eq(0)').remove();
//then append data    
$("#SelectedModel").append(data.join("")); 
```

或者使用 .html()，应该是：

```
$("#SelectedModel").html($("#SelectedModel").html()+data.join("")); 
```

# c# - 生产数据库迁移 ASP.NET MVC 4

> ID：12936751
> 
> 赞同：2
> 
> 时间：2012-10-17T14:35:09.217
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我正在开发我的第一个 ASP.NET MVC 4 应用程序（使用实体框架）并且对生产数据库有点困惑。在本地，数据库似乎根据我的模型神奇地创建了自己（和正确的表）。使用非 Express SQL Server 也会在生产中发生这种情况......还是我需要手动导入架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:08:55.293

如果它不存在，它将创建由 web.config 中的连接字符串指定的任何数据库。

# css - Chrome 的 CSS 重置

> ID：12936753
> 
> 赞同：2
> 
> 时间：2012-10-17T14:35:12.763
> 
> 标签：css, google-chrome, styles, stylesheet, css-reset

嗨，我意识到我应该做的是从 CSS 重置开始，但我在 Chrome 中使用默认设置开发了我的网站，然后在完成后开始尝试使其跨浏览器兼容。如果我添加任何常见的 CSS 重置，我会丢失边距，文本会变小，并且带有背景的内嵌 Span 标签甚至会相互重叠，一切都会变得一团糟。

所以我想我正在寻找的是一个 CSS 重置，设置为 Chrome，这将使所有其他浏览器看起来像我在 Chrome 中的页面。有没有这样的方法或方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:40:55.533

根据这篇文章：

[浏览器对 HTML 元素的默认 CSS](https://stackoverflow.com/questions/6867254/browsers-default-css-for-html-elements/6867287#6867287)

[http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)是 Chrome 使用的 CSS。不过我还没有测试过，所以尝试一下，看看它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:56:52.720

一次找到了我自己的问题的解决方案。[我刚刚从http://necolas.github.com/normalize.css/](http://necolas.github.com/normalize.css/)尝试了 normalize.css ，它保留了有用的现代风格并修复了其他浏览器（即 IE）的不直观。使用“IE9 文档标准”时，Chrome 和 IE 上的外观大致相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T20:39:21.520

最近，Firefox 27 添加了一个新的[CSS3 属性](http://www.w3.org/TR/css-cascade-3/#all-shorthand)和[默认关键字](http://www.w3.org/TR/css-cascade-3/#defaulting-keywords)。

您现在可以在 Firefox 27+ 中重置整个页面：

```
* { all: unset !important; } 
```

这是一种锤子的方法。你也可以更精致。

```
blockquote, option { margin:unset; }
a { text-decoration: initial; } 
```

等等

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:59:12.653

我一直使用 Eric Meyers css reset 片段。我实际上比 html5 样板中包含的更喜欢它。

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:39:40.627

特殊浏览器没有 css 重置。这正是问题所在，您希望将 css 重置为在每个浏览器中具有相同的起始位置。

您面临的问题是，您尚未立即实施重置。您将别无选择，然后做额外的工作来集成重置并为您的下一个项目学习，您从重置开始并基于此构建您的 css。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-01T11:47:16.133

当你这样做时，它对 chrome 用户会**很好，但对 firefox、edge、opera、safari 和 internet explorer 用户来说不是**。

Chrome 的`html.css`文件包含一些**在其他浏览器上不起作用的供应商前缀**。

也许它们在其他浏览器中也不可用。示例：`-webkit-fill-available`，因为没有值，甚至在除 firefox 之外的浏览器中可用的前缀。

> 该`html.css`文件更多地基于前缀。即使通用属性在浏览器中有效，他们也会尝试使用前缀。

对于 chrome 用户来说，这可能是一种原生体验，但另一方面，对于其余 30% 的用户来说，它会受到影响。

而且，它会给你增加负担。因为超过 70% 的用户使用基于 chromium（是的，所有浏览器在 html.css 文件中都有一些调整）的浏览器。在 80% 的浏览器上加载毫无用处。

我认为文件不够短。被压缩到小于 5kb。

我建议使用 CSS 规范器。基于 normalize.css 的东西，但维护得更好。

几个完美的 CSS Normalizers 列表

*   Reseter.css - [https://github.com/krishdevdb/reseter.css](https://github.com/krishdevdb/reseter.css)
*   Sanitize.css - [https://github.com/csstools/sanitize.css](https://github.com/csstools/sanitize.css)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-17T14:57:06.927

您可能想看看[http://html5boilerplate.com/](http://html5boilerplate.com/)，它具有适用于大多数现代浏览器的结构和 CSS。

干杯

伊恩

# objective-c - 带有 UIImageview 的 UIScrollView 和使用 transitionFromView 的手势表现奇怪

> ID：12936756
> 
> 赞同：0
> 
> 时间：2012-10-17T14:35:18.267
> 
> 标签：objective-c, ios, uiview, uiscrollview, uiimageview

我制作了一个包含 UIScrollview 的视图：

```
self.scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(10, 65, 300, 188)];
//BackViews will hold the Back Image
BackViews = [[NSMutableArray alloc] init];
for (int i=0; i<BigPictures.count; i++) {
    [BackViews addObject:[NSNull null]];
}
FrontViews = [[NSMutableArray alloc] initWithCapacity:BigPictures.count];
[self.pageControl setNumberOfPages:BigPictures.count]; 
```

然后我添加了几个包含图像的 UIImageviews：

```
//BigPictures holds objects of type UIImage
for (int i = 0; i < BigPictures.count; i++) {
    UIImageView *ImageView = [[UIImageView alloc] initWithImage:[BigPictures objectAtIndex:i]];
    ImageView.frame = [self.scrollView bounds];
    [ImageView setFrame:CGRectMake(self.scrollView.frame.size.width * i, ImageView.frame.origin.y, ImageView.frame.size.width, ImageView.frame.size.height)];
    //this saves the FrontView for later (flip)
    [FrontViews insertObject:ImageView atIndex:i];
    [self.scrollView addSubview:test];
}

// Detect Single Taps on ScrollView
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(flip)];
[self.scrollView addGestureRecognizer:tap];

self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * BigPictures.count, self.scrollView.frame.size.height);
self.scrollView.pagingEnabled = YES;
self.scrollView.delegate = self; 
```

好的，到目前为止一切都很好。现在执行flipImage部分的方法：

```
- (void)flip {
    int currentPage = self.pageControl.currentPage;
    UIView *Back = nil;
    if ([BackViews objectAtIndex:currentPage] == [NSNull null]) {
    //CreateBackView is just creating an UIView with text in it.
    Back = [self CreateBackView];
    [BackViews replaceObjectAtIndex:currentPage withObject:Back];
    [UIView transitionFromView:[[self.scrollView subviews] objectAtIndex:currentPage] toView:[BackViews objectAtIndex:currentPage] duration:0.8 options:UIViewAnimationOptionTransitionFlipFromLeft completion:NULL];
} else {
    [UIView transitionFromView:[[self.scrollView subviews] objectAtIndex:currentPage] toView:[FrontViews objectAtIndex:currentPage] duration:0.8 options:UIViewAnimationOptionTransitionFlipFromRight completion:NULL];
    [BackViews replaceObjectAtIndex:currentPage withObject:[NSNull null]];
}
[self.view addSubview:Back];
[self rebuildScrollView]; 
```

}

这就是rebuildScrollView 所做的：

```
- (void)rebuildScrollView
{
    for (UIView *subview in self.scrollView.subviews) {
    [subview removeFromSuperview];
}

for (int i = 0; i < BigPictures.count; i++) {
    if ([BackViews objectAtIndex:i] == [NSNull null]) {
        [self.scrollView addSubview:[FrontViews objectAtIndex:i]];
    } else {
        [self.scrollView addSubview:[BackViews objectAtIndex:i]];
    }
}
self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * BigPictures.count, self.scrollView.frame.size.height);
self.scrollView.pagingEnabled = YES;
self.scrollView.delegate = self;
} 
```

所以行为如下：

1.  如果我单击第一个图像（滚动视图中的 3 个图像中的 1 个），效果就是我想要的方式，这意味着 frontimage 转身并显示空白（白色）背面，中间有一些文字
2.  如果我单击第二张图像，图像会转动，但背面完全是空的，显示窗口的灰色背景。如果我滚动到其他图像，仍然显示正面图像（如预期的那样）
3.  现在我点击第三张图片，它与 1) 相同。
4.  当前布局现在是 [BackView, Nothing, Backview)
5.  让我们再运行一​​次。但现在我点击最后一张图片，它与 2 相同）:(

任何想法这里出了什么问题？

编辑：一些新发现。我将图片数量翻了一番，这就是放置正面和背面视图的方式（在翻转每个之后）。P = 图片 & B = 后视图。

*   P_1(B_1) - 实际上是唯一正确的
*   P_2（空 - 应该是 B_2）
*   P_3(B_2 - 应该是 B_3)
*   P_4（空 - 应该是 B_4）
*   P_5(B_3 - 应该是 B_5)
*   P_6（空 - 应该是 B_6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:11:41.607

做了一个完整的重建，现在它可以工作了。真的很奇怪，因为我使用了完全相同的代码。

# android - 当我选择相同的先前值时，不会触发 onItemSelectedListener

> ID：12936760
> 
> 赞同：0
> 
> 时间：2012-10-17T14:35:22.343
> 
> 标签：android

当我再次选择适配器中的相同值时，值不会刷新，甚至不会触发 onItemSelectedListener 或 NothingSelected

下面是我的代码：

```
 spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {                  
                new MyBackgroundAsyncTask().execute();
        }
        public void onNothingSelected(AdapterView<?> arg0) {
                new MyBackgroundAsyncTask().execute();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:00:42.063

```
public class NoDefaultSpinner extends android.widget.Spinner {

private static Method s_pSelectionChangedMethod = null;

private int key = 0;
static { 
    try {               
        Class noparams[] = {};
        Class targetClass = AdapterView.class;
        s_pSelectionChangedMethod = targetClass.getDeclaredMethod("selectionChanged", noparams);            

        if (s_pSelectionChangedMethod != null) {
            s_pSelectionChangedMethod.setAccessible(true);              
        }

    } catch( Exception e ) {
        Log.e("Custom spinner, reflection bug:", e.getMessage());
        throw new RuntimeException(e);
    }
}

public NoDefaultSpinner(Context context) {      
    super(context);
}

public NoDefaultSpinner(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public NoDefaultSpinner(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public void onClick(DialogInterface dialog, int which) {    
    super.onClick(dialog, which);   
     // Here my code goes.....

} 
```

# android - 抗锯齿图像视图

> ID：12936763
> 
> 赞同：1
> 
> 时间：2012-10-17T14:35:34.133
> 
> 标签：android, android-imageview

我目前正在懒惰地将一组图像加载到我在 android 中的应用程序中。当我完成加载它们时，我想应用一个蒙版（这样我就可以在它们上面有圆角）。我怎样才能达到这个效果？（我没有使用圆角的 xml 形状，因为我想要角抗锯齿）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:39:15.733

有几个问题。请查看以下内容：
• <a href="https://stackoverflow.com/questions/2459916/how-to-make-an-imageview-to-have-rounded-corners">如何制作带圆角的 ImageView ?
• <a href="https://stackoverflow.com/questions/4464347/creating-imageview-with-round-corners">创建带圆角的 ImageView
• <a href="https://groups.google.com/论坛/?fromgroups=#!topic/android-developers/4j7SLzAGhMk" rel="nofollow noreferrer">https://groups.google.com/forum/?fromgroups=#!topic/android-developers/4j7SLzAGhMk

**关于创建自定义视图的文章**
• <a href="http://developer.android.com/training/custom-views/index.html" rel="nofollow noreferrer">http://developer.android.com/training/ custom-views/index.html • <a href="http://developer.android.com/guide/topics/ui/custom-components.html" rel="nofollow noreferrer">http://developer.android。 com/guide/topics/ui/custom-components.html

# asp.net-mvc-4 - 将 Upshot 添加到我的 MVC 4 项目，System.Web.Http.Common 的问题

> ID：12936765
> 
> 赞同：2
> 
> 时间：2012-10-17T14:35:35.037
> 
> 标签：asp.net-mvc-4, upshot

我试图将结果添加到我的 mvc 4 项目中。

我的问题是我需要添加 System.Json 和 System.Web.Http.Common 来获取

```
@(Html.UpshotContext(bufferChanges: true).DataSource<S_Innovations.TrafficTheory.Web2.APIControllers.TheoryTestsController>(x => x.GetTheoryTests())) 
```

在职的。

添加 Json 后，我得到无法加载文件或程序集“System.Web.Http.Common”，当我添加这个时，我无法编译。

```
Error   15  The type 'System.Web.Http.RouteParameter' exists in both 'g:\Documents\Visual Studio 2012\Projects\S-Innovations.TrafficTheory\packages\System.Web.Http.Common.4.0.20126.16343\lib\net40\System.Web.Http.Common.dll' and 'g:\Documents\Visual Studio 2012\Projects\S-Innovations.TrafficTheory\packages\Microsoft.AspNet.WebApi.Core.4.0.20710.0\lib\net40\System.Web.Http.dll' G:\Documents\Visual Studio 2012\Projects\S-Innovations.TrafficTheory\S-Innovations.TrafficTheory.Web2\App_Start\WebApiConfig.cs 19 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:51:28.680

问题是您对 System.Web.Http.dll 有 2 个不同的引用。一个来自 System.Web.Http.Common 包，另一个来自 Microsoft.AspNet.WebApi.Core 包。

我认为您将不得不删除其中一个软件包，它会起作用。您可以做的另一件事是查看参考文件夹并搜索重复的参考。

# c# - 打开 Visual Studio 2012 时编译时间变慢

> ID：12936774
> 
> 赞同：12
> 
> 时间：2012-10-17T14:36:00.357
> 
> 标签：c#, visual-studio-2010

整个下午，

我有一个非常奇怪的问题。打开 VS 2012 时，编译时间非常慢。当通过 VS 和/或从命令行直接通过 csc.exe 构建时，会出现这种缓慢的编译时间。

测试：创建一个包含以下项目的文件夹：

一个批处理文件 (compile.bat) 包含：

```
echo %time%
csc /target:library class1.cs
echo %time% 
```

和一个 class1.cs 包含：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ClassLibrary1
{
    public class Class1
    {
    }
} 
```

现在打开一个 Visual Studio 命令提示符。导航到上面的文件夹并运行批处理命令，没有打开 VS。在我的机器上，这大约需要 10 毫秒，完美。

我现在打开VS 2012，没有打开任何解决方案，除了打开应用程序让devenv运行之外什么也不做。

现在通过运行批处理文件重复测试，编译时间现在是 10000 毫秒（10 秒）。

我已经检查了事件查看器在 VS 打开时发生的任何事情，但在它关闭时没有发生，使用 procmon 和 filemon 来查找文件访问并检查 VS 在打开时是否启用任何服务，所有这些都没有成功/影响.

我什至尝试卸载并重新安装 VS，这解决了前几个版本的问题，但后来又出现了。重启机器没有效果。我没有在 VS 中安装插件。

我的同事机器没有显示这个问题，他们有相同的设置。这一切都在具有 16gb 内存、64 位 win 7 和 SSD 的机器上运行。

有人有任何线索吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-19T11:22:04.227

我已经想通了。我相信这是某些恶意软件的结果。我通过以下步骤诊断出问题。

1.  下载 ProcMon ( [http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-gb/sysinternals/bb896645.aspx) )
2.  在进程名称上向 ProcMon 添加过滤器：csc.exe
3.  然后我从命令行运行编译，并打开了 Visual Studio。大概用了10秒，太长了！查看 ProcMon 窗口中的输出，我注意到 csc.exe 似乎暂停了 5 秒，一次是在跟踪开始时，一次是在结束时。请参阅以下屏幕：

开始：

[![开始](../Images/1126b6605d6186e3e936daab67cbe48f.png)](https://i.stack.imgur.com/H2NzH.png)

结尾：

[![结尾](../Images/2bee85ea372251e6084f8238d7b78de7.png)](https://i.stack.imgur.com/zxLmk.png)

似乎 HKLM\SOFTWARE\Wow6432Node\5c28f8fbc6fe942 的 RegCloseKey 导致 csc.exe 等待 5 秒，两次。

注册密钥：

[![注册密钥](../Images/d67ec012ba3787f43abf9d7e0cf0fb8b.png)](https://i.stack.imgur.com/CqNeI.png)

然后我决定重命名这个条目（在末尾添加 _old），然后我重新编译....BINGO，它在不到 30 毫秒的时间内编译完毕！

在研究了此密钥中包含的条目并进行了一些谷歌搜索后，结果证明此 reg 密钥是某些恶意软件的结果。我使用以下指南删除了恶意软件，现在问题已完全解决。

[http://www.explosiveknowledge.net/main/2012/08/19/browsemngr/](http://www.explosiveknowledge.net/main/2012/08/19/browsemngr/)

请注意，上面的指南不包含正确的 reg 条目，我认为病毒一定是在某个时候进行了调整，我找不到指南中提到的 reg 条目，只是删除了我找到的那些。

请注意，reg 密钥的 5c28f8fbc6fe942 部分似乎是随机生成的。如果您遇到此问题，可能会有所不同，但其中包含的值仍将讨论“浏览器管理器”。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T11:19:18.257

要了解您的查询，我们需要研究响应文件的概念。

**响应文件**是包含一组编译器命令行开关的文本文件。当您执行 CSC.exe 时，编译器会打开响应文件并使用其中指定的任何开关，就像这些开关已在命令行上传递给 CSC.exe 一样。您可以通过在命令行上指定响应文件的名称来指示编译器使用响应文件，该名称前面带有 @ 符号。例如，您可以有一个名为 MyProject.rsp 的响应文件，其中包含以下文本：

/out:MyProject.exe /目标:winexe

要使 CSC.exe 使用这些设置，您可以按如下方式调用它：

**csc.exe @MyProject.rsp CodeFile1.cs CodeFile2.cs**

这告诉 C# 编译器如何命名输出文件以及创建什么样的目标。如您所见，响应文件非常方便，因为您不必在每次编译项目时手动表达所需的命令行参数。

当您安装 .NET Framework 时，它会在 %SystemRoot%\Microsoft.NET\Framework\vX.X.X 目录（其中 XXX 是您安装的 .NET Framework 的版本）中安装一个默认的全局 CSC.rsp 文件。

**Visual Studio 2012 使用此默认响应文件来编译代码。因为全局 CSC.rsp 文件引用了所有程序集。引用所有这些程序集可能会使编译器变慢一点。**

# c# - 不能在 C# 中将类型“字符串”隐式转换为“system.collections.arraylist”

> ID：12936784
> 
> 赞同：-2
> 
> 时间：2012-10-17T14:36:59.763
> 
> 标签：c#

这是我的代码：

```
XmlNodeList ProjectNode = DOC.GetElementsByTagName("AppBuilderProject");

foreach (XmlNode AllNodes in ProjectNode) 
{
    Project.Titel = AllNodes["Titel"].InnerText; // 1st value from node

    foreach (XmlNode controlsform in Project.Forms) // arraylist Forms
    {
        Project.Forms = controlsform["forms"].InnerText;// error
    }
} 
```

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:43:27.317

属性“Project.Forms”显然是数组列表和属性（XmlNode）类型。InnerText 是字符串

试试这个

```
if(Project.Forms == null) Project.Forms = new ArrayList();
Project.Forms.Add(controlsform["forms"].InnerText); 
```

# c++ - 线程中的 Accept() 以避免“阻塞”套接字

> ID：12936788
> 
> 赞同：0
> 
> 时间：2012-10-17T14:37:06.520
> 
> 标签：c++, sockets, pthreads

我想`accept()`在一个单独的线程中处理该方法，以避免在等待连接时出现一般冻结。

代码（**仅限服务器！**）：

```
int main(int argc, char *argv[])
{
  int sockfd, newsockfd, portno;
  socklen_t clilen;
  char buffer[256];
  struct sockaddr_in serv_addr, cli_addr;
  int n;

  sockfd = socket(AF_INET, SOCK_STREAM, 0);

  bzero((char *) &serv_addr, sizeof(serv_addr));
  portno = atoi(argv[1]);
  serv_addr.sin_family = AF_INET;
  serv_addr.sin_addr.s_addr = INADDR_ANY;
  serv_addr.sin_port = htons(portno);

  bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr));

  listen(sockfd,5);
  clilen = sizeof(cli_addr);
  newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);

  bzero(buffer,256);
  n = read(newsockfd,buffer,255);

  n = write(newsockfd,"Message : ",18);

  close(newsockfd);
  close(sockfd);
  return 0; 
} 
```

如何在此代码中创建一个单独的线程，防止`accept()`调用冻结程序。作为奖励，我想处理多个`accept()`（因此套接字在收到消息后不会关闭，而是继续侦听并接受请求）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:43:42.197

您可以使用 select 来了解是否有可以接受的连接等待，但我的方法是将所有 socket/bind/listen/accept 放在一个线程中，将 accept 放入一个循环中，然后使用他们到达时的连接。

# android - 使用 facebook graph api 发布时出现错误 OAuthException 2500

> ID：12936790
> 
> 赞同：1
> 
> 时间：2012-10-17T14:37:16.447
> 
> 标签：android, facebook, facebook-graph-api

我正在编写与 facebook 集成的应用程序。我想在没有帖子对话框的情况下发布到墙上。我尝试使用[此答案中的代码](https://stackoverflow.com/a/4376415/987632)，但出现错误

```
{"error":
    {"message":"An active access token must be used to query information about the current user.",
     "type":"OAuthException",
     "code":2500
    }
} 
```

我使用此代码登录用户

```
 public void authorize() {
    mFacebook.authorize(mActivity, new String[] { "publish_stream" }, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            SharedPreferences.Editor editor = mPrefs.edit();
            editor.putString("access_token", mFacebook.getAccessToken());
            editor.putLong("access_expires", mFacebook.getAccessExpires());
            editor.commit();

            mLoginStateView.setImageResource(mAuthorizedDrawableRes);
        }

        @Override
        public void onFacebookError(FacebookError error) {}

        @Override
        public void onError(DialogError e) {}

        @Override
        public void onCancel() {}
    });
} 
```

请解释一下我做错了什么？

[添加]

如果我尝试使用`mFacebook.dialog(currentActivity, "stream.publish", params, new UpdateStatusListener());`它发布。请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:54:51.953

成功的授权将向您的应用返回一个访问令牌，然后您可以使用该令牌对 Facebook API 执行操作。显示的错误消息意味着您没有有效的访问令牌，这意味着您可能没有正确验证应用程序。我会在`onFacebookError`and`onError`方法上进行一些日志记录，以查看问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T20:05:27.587

从 facebook 检索专辑时，我也遇到了同样的问题。[我通过facebook 调试器](https://developers.facebook.com/tools/debug)测试了我的 access_token ，它是有效的。然后我发现了错误，最终的 url`com.facebook.android.Util.openUrl(...)`是：
**Invalid-URL1:**
https://graph.facebook.com//me/albums?fields=id,name,cover_photo,type,count?access_token={...token ..}&format=json&metadata=1
应该在哪里：
**有效 - URL2：**
https://graph.facebook.com//me/albums?fields=id,name,cover_photo,type,count&access_token={...token. .}&格式=json&元数据=1

请注意，在 URL1 中？被添加了两次这是无效的所以我将代码更改如下
代码更改： **上一页**

```
com.facebook.android.Util.openUrl(...)

    if (method.equals("GET")) {
        url = url + "?" + encodeUrl(params);
    } 
```

**现在**

```
com.facebook.android.Util.openUrl(...)

    if (method.equals("GET")) {
        if(url.contains ( "?" )==false)
        {
            url = url + "?" + encodeUrl(params);
        }
        else
        {
            url = url + "&" + encodeUrl(params);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T13:25:28.520

哦，我已经做到了。但它看起来像一个错误或魔法......授权方法后的LogCat（启用Facebook的日志）

```
Facebook-authorize: Login Success! access_token=AAAHL4f6XMS0BAHNJKpoGAUAeGDlynRt1s5XPdBPRWGfILGOTZB4OSEGi4HBPLZBXDWqK2RIO8disDtzxHBYSvL3bZAnHkU5hAVK9oqWhAZDZD expires=1356040438476 
```

但后来我尝试发布

```
String response = mFacebook.request("me/feed", parameters, "POST"); 
```

来自 Facebook.java 的函数请求：

```
public String request(String graphPath, Bundle params, String httpMethod)
        throws FileNotFoundException, MalformedURLException, IOException {
params.putString("format", "json");
if (isSessionValid()) {
    params.putString(TOKEN, getAccessToken());
}
String url = (graphPath != null) ? GRAPH_BASE_URL + graphPath : RESTSERVER_URL;
return Util.openUrl(url, httpMethod, params);
} 
```

我在调试器中看到 Facebook 的函数`isSessionValid()`返回`false`和`mAccessToken = null`. 我不知道为什么会这样，以及为什么它`true`有时会在之后返回（是的，我知道这是不可能的）。请给我解释一下，如果你知道的话。

这段代码解决了我的问题（它只是重新设置访问令牌）

```
if (!mFacebook.isSessionValid()){
    String token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    mFacebook.setAccessToken(token);
    mFacebook.setAccessExpires(expires);
}
Bundle parameters = new Bundle();
parameters.putString("message", msg);
parameters.putString("description", "test test test");
String response = mFacebook.request("me/feed", parameters, "POST");
if (response == null || response.equals("") || response.equals("false")) {
    Log.e(Const.LOG_TAG, "Blank response");
} else {
    Log.d(Const.LOG_TAG, response);
} 
```

# c++ - 让Eclipse生成C++可执行文件

> ID：12936792
> 
> 赞同：0
> 
> 时间：2012-10-17T14:37:22.710
> 
> 标签：c++, eclipse, ide, compilation, binary

使用最新的 MinGW 和 C++ Eclipse。

如果我创建一个“可执行的 Hello World”项目，构建并运行它，一切都会按预期工作。

如果我创建一个“可执行空项目”，然后创建一个 main.cpp 文件，构建并运行，我会收到错误消息“启动失败。找不到二进制文件。”

如何让空项目生成二进制文件？我在项目属性中到处寻找，但我一定错过了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-22T10:17:23.713

在具有标准设置的 Eclipse Kepler (c++) 上，我今天发现在“问题”选项卡中创建输出的错误解析器失败

在控制台中有来自 gcc 的编译错误，但它没有显示在问题选项卡中，这是我查看最多的选项卡。这是一个类型转换错误，非常典型，没有什么奇异之处，绝对应该作为错误包含在内。

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-28T09:38:11.897

对我来说，解决方案是这样的：

选择您的项目并转到“项目”-菜单/属性（在 Mac 上）。

c/c++ 构建/设置。

二进制解析器。现在勾选适合您系统的那个（elf for linux，mach 64 for mac，pe for windows 等）。默认值始终是 elf 并且在每个项目之后都会恢复到它，至少对我来说是这样。

# c - 使用具有固定大小类型的 scanf / printf （和系列）的正确方法？

> ID：12936798
> 
> 赞同：17
> 
> 时间：2012-10-17T14:37:53.443
> 
> 标签：c, printf, scanf, fixed-size-types

阅读[**这个 SO question**](https://stackoverflow.com/questions/12936521/c-exception-when-using-int16)，我开始想知道 - 使用固定大小类型的`scanf`/ `printf`（和家庭）的正确方法是什么？

例如，如果我有`short int`or `int`，我会分别使用`%hd`and `%d`- 很好。

但如果我有`int16_t`呢？`short int`可能与 不同`int16_t`，它取决于平台。任何其他固定大小（整体）类型都一样吗？

* * *

***注意：***看起来我收到了一些反对票，因为我“*没有尝试用谷歌搜索这个*”，看起来我需要解释一下：我在这里没有看到类似的问题，这就是我发布它的原因。SO中的大多数问题都可以使用谷歌来回答，而不是在这里提问。这将使 StackOverflow 不再是现在的地方。

不，我这样做不是为了声誉——我今天已经达到了每日声誉上限（在发布这个问题之前有 24 票赞成）。

我的观点是——我认为这不值得投反对票。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T14:43:25.883

正确的方法是使用which 为family 和family[`inttypes.h`](http://pubs.opengroup.org/onlinepubs/009604599/basedefs/inttypes.h.html)定义标准宏，例如`printf``scanf`

```
printf ("%" PRId16, short_int);
scanf ("%" SCNd16, &short_int); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T14:42:37.090

[inttypes.h](http://pubs.opengroup.org/onlinepubs/007904975/basedefs/inttypes.h.html)头文件包含为 stdint.h 中定义的固定宽度整数定义正确格式说明符的宏。例如，和的类型说明符`printf()`是`int16_t`名为 的宏`PRId16`。例子：

```
int16_t x;
scanf("%" SCNd16, &x);

printf("You have entered: %" PRId16 "\n", x); 
```

# jquery - 一键实现两个功能事件的jquery动画

> ID：12936799
> 
> 赞同：0
> 
> 时间：2012-10-17T14:37:58.473
> 
> 标签：jquery, jquery-animate, jquery-effects

我正在尝试执行以下操作，希望有人可以帮助我解决这个问题？我需要以下内容；

> 1.  用户单击图像（假设**#image1**）
> 
> > 1.  两个函数被触发，第一个是一个 div ( **#div2** )，其中有一个图像从原始点击中淡出（大约 50px ...所以它看起来像是从图像中出来的），第二个是另一个 div ( **# div3**），其中包含文本，从 #div2 下方滑动并延伸约 500 像素。

如果您再次单击#image1 div，它将反转步骤并返回到开始序列。

哦，天哪，我希望这是有道理的？我已经检查了 [a link] [http://jquery.com/](http://jquery.com/)并且我可以弄清楚这一点，理想情况下，如果有人可以在 jsfiddle 上发布一个示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:57:55.763

最简单的方法是使用一个变量作为标志。你会在 UI 事件脚本中一直做这样的事情。您只需在 click 函数中包含一些逻辑来测试动画是否已运行。

```
var animRun = false

$('#image').click(function(){
    if (animRun == false){
        //Animation has not run yet, animate it
        $('#div2').animate({
            opacity:1
        },500, function(){
            $('#div3').animate({
                left:'128px'
            },500, function(){
                //Your animation is complete so you set the flag to true
                animRun = true;
            })
        })
    }else{
        //Your flag is set to true so that must mean the animate has been run
        //Reverse the animation, making sure to set the flag back to false  
    }
}) 
```

所以你在这里看到的动画函数就是所谓的回调。它们在动画完成时被触发。所以首先图像淡入，然后文本从当前位置滑动到 128，然后标志设置为“真”。所以现在，使用逻辑，你可以知道动画已经运行了。您可能还想禁止在动画运行时触发 click*事件*。您可以使用另一个标志或类似 preventDefault() 的东西。

这应该足以让你开始。

# symfony - 表单 symfony2，在 Symfony2 中显示我创建的表单

> ID：12936800
> 
> 赞同：1
> 
> 时间：2012-10-17T14:38:07.190
> 
> 标签：symfony, twig

我需要你的帮助，我想在 Symfony2 中显示我创建的表单。我想显示我创建的表格 92 次，因为我的数据库中有 92 个数字（每个数字都是一个表格），我不知道该怎么做，这是我的代码：控制器：

```
class DefaultController extends Controller
{
 public function QuestionsAction(Request $request)
 {   
     $questions = $this->getDoctrine()->getEntityManager()
          ->getRepository('Tests\TestsPhpBundle\Entity\Question')     
          ->findAll();
    $task = new Question();
    $forms = $this->createForm(new QuestionType(), $task);   
    if ($request->getMethod() == 'POST') {
    $forms->bindRequest($request);             
        if ($forms->isValid()) 
         {
             $em = $this->getDoctrine()->getEntityManager();
             $em->persist($task);
             $em->flush();
             }                 
  }  
       {
 return $this->render('TestsTestsPhpBundle:Default:index.html.twig', array(
        'questions' => $questions,
        'forms' => $forms->createView()
                      ));      
       }

 }
 } 
```

我的表格文件：

```
class QuestionType extends AbstractType
       {
        public function buildForm(FormBuilder $builder, array $options)
         {

         $builder
            ->add('categories',  null, array('required' => false,                                              
                                            ))                                         

            ->add('text', 'entity', array(
                         'class' => 'TestsTestsPhpBundle:Question',
                         'query_builder' => function($repository) { 
     return $repository->createQueryBuilder('p')->orderBy('p.id', 'ASC'); },
                         'property' => 'text'))
                ;
    }
     public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => 'Tests\TestsPhpBundle\Entity\Question',);
    }
    public function getName()
    {
        return 'question';
    }
    } 
```

我的树枝文件：

```
{% block content %}

  <h2>Questions</h2>

   {% for question in questions %}

   <dl>
    <dt>Number</dt>
    <dd>{{ question.number }}<dd>

  {% for form in forms %}

   {{ form_row(forms.categories) }}   
     {{ form_row(forms.text) }}

    </dl>
      {% endfor %}
       <hr />
    {% endfor %}
   {% endblock  %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:46:41.790

我建议阅读 capter：**嵌入控制器** [http://symfony.com/doc/2.0/book/templating.html](http://symfony.com/doc/2.0/book/templating.html)

```
<div id="sidebar">
    {% render "AcmeArticleBundle:Article:recentArticles" with {'max': 3} %}
</div> 
```

您可以在 Twig 模板中创建一个 for 循环，并在呈现表单的地方调用一个操作（如果需要，可以使用参数）。-> QuestionsAction 在你的情况下。

# sql-server - 如何将 varchar 转换为日期时间并在 TSQL 中跳过无效的日期时间

> ID：12936803
> 
> 赞同：5
> 
> 时间：2012-10-17T14:38:09.170
> 
> 标签：sql-server, datetime, type-conversion

我在 SQL Server 中有一个数据库。我无权更改任何表格，但我可以创建视图。

我有三`varchar`列以格式存储日期`YYYYMMDD`。我想创建一个将日期从转换为的`varchar`视图`datetime`。

现在可能是这样的情况，而不是这些列中的日期，我可以有空格`NULL`或字符`-`。

让我们来看看`closedDate`专栏。如果我使用`CONVERT(datetime, closedDate, 112)`

1.  有效日期正确转换，

2.  当有空白空间时，日期转换为`1900-01-01`,

3.  NULL 被保留，

4.  `-`导致转换错误：

> *将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。*

我如何告诉函数转换日期，只要它具有有效的日期形式并在所有其他情况下保留 NULL 或更好的空日期（或空格）？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-17T14:41:36.563

试试这个

```
CASE WHEN ISDATE(closedDate) = 1 THEN CONVERT(datetime, closedDate, 112) 
     ELSE NULL END closedDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T05:20:55.913

```
 Use below code    

    SELECT CASE WHEN ISDATE(datecolumn)=1 THEN CONVERT(datetime, datecolumn, 103 ) 
                        ELSE null END
            FROM tablename

 use below for empty data

    SELECT CASE WHEN ISDATE(datecolumn)=1 THEN CONVERT(datetime, datecolumn, 103 ) 
                            ELSE '' END
                FROM tablename 
```

# c# - 从字符串中删除最后一个正斜杠和尾随字符的速记方法

> ID：12936804
> 
> 赞同：20
> 
> 时间：2012-10-17T14:38:12.667
> 
> 标签：c#, string

如果我有以下字符串：

> /lorem/ipsum/dolor

我希望它变成：

> /lorem/ipsum

删除最后一个正斜杠及其后面的所有字符的简写方法是什么？

我知道如何通过将字符串拆分为 a`List<>`并删除最后一项，然后加入来做到这一点，但是有没有更短的方法来写这个？

我的问题**不是**特定于 URL 的。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-17T14:41:37.013

您可以使用`Substring()`和`LastIndexOf()`：

```
str = str.Substring(0, str.LastIndexOf('/')); 
```

**编辑**（建议评论）
为了防止字符串可能不包含 a 时出现任何问题`/`，您可以使用类似：

```
int lastSlash = str.LastIndexOf('/');
str = (lastSlash > -1) ? str.Substring(0, lastSlash) : str; 
```

将位置存储在临时变量中可以避免调用`.LastIndexOf('/')`两次，但可以放弃它以支持单行解决方案。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-02-11T22:22:09.750

如果网址末尾有“/”，请将其删除。如果不; 只需退回原件。

```
var url = this.Request.RequestUri.ToString();
url = url.EndsWith("/") ? url.Substring(0, url.Length - 1) : url;
url += @"/mycontroller"; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-17T14:40:07.127

您可以执行类似的操作`str.Remove(str.LastIndexOf("/"))`，但没有内置方法可以执行您想要的操作。

编辑：你也可以使用 Uri 对象来遍历目录，虽然它并没有给出你想要的：

```
Uri baseUri = new Uri("http://domain.com/lorem/ipsum/dolor");
Uri myUri = new Uri(baseUri, "."); 
// myUri now contains http://domain.com/lorem/ipsum/ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-17T14:46:21.490

一种简单的方法是

```
 String s = "domain.com/lorem/ipsum/dolor";
    s = s.Substring(0, s.LastIndexOf('/'));
    Console.WriteLine(s); 
```

另一个也许

```
String s = "domain.com/lorem/ipsum/dolor";
s = s.TrimEnd('/');
Console.WriteLine(s); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-17T14:40:33.393

您可以使用正则表达式`/[^/]*$`并替换为空字符串：

```
var fixed = new Regex("/[^/]*$").Replace("domain.com/lorem/ipsum/dolor", "") 
```

但这里可能有点矫枉过正。@newfurniturey 对 with 的回答`Substring`可能`LastIndexOf`是最好的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-09-16T19:05:29.057

我喜欢为这样的东西创建一个字符串扩展：

```
/// <summary>
/// Returns with suffix removed, if present
/// </summary>
public static string TrimIfEndsWith(
    this string value,
    string  suffix)
{
    return  
        value.EndsWith(suffix) ?
            value.Substring(0, value.Length - suffix.Length) :
            value;
} 
```

然后你可以像这样使用：

```
var myString = "/lorem/ipsum/dolor";
myStringClean = myString.TrimIfEndsWith("/dolor"); 
```

您现在在所有项目中都有一个可重复使用的扩展，可用于删除一个或多个尾随字符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-10-13T01:43:26.163

```
using System.IO;

mystring.TrimEnd(Path.AltDirectorySeparatorChar); // To remove "/"
mystring.TrimEnd(Path.DirectorySeparatorChar); // To remove "\" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-07T22:41:33.240

谢谢@Curt 的提问。我稍微改进了@newfurniturey 的代码，这是我的版本。

```
 if(str.Contains('/')){
      str = str.Substring(0, str.LastIndexOf('/'));
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-18T17:01:09.387

```
 while (input.Last() == '/' || input.Last() == '\\')
        {
            input = input.Substring(0, input.Length - 1);
        } 
```

# wpf - 数据模板内的 TreeView

> ID：12936809
> 
> 赞同：1
> 
> 时间：2012-10-17T14:38:29.800
> 
> 标签：wpf, treeview, datatemplate

我有一个看起来像的对象：

```
List =
Parent+Child,
Parent+Child
Parent+Child
Parent+List<Child>
Parent+Child 
```

在我开始工作时，父+子已被展平以帮助绑定。

我正在尝试将它们写入模板列表框，如果有 1 个孩子，则使用不同的模板，如果有超过 1 个孩子，则使用另一个模板。我已经完成了这项工作，但我想将多个子项绑定到 TreeView，因此您可以展开父项并查看所有子项，但我正在努力让它绑定。

这是我的代码（按逻辑顺序）：

```
 <ListBox x:Name="lsbGrandParent" ItemTemplateSelector="{StaticResource dataTemplateSelector}" />

    <localutilities:dataTemplateSelector
        OneChildTemplate="{StaticResource dtOneChildSelected}"
        MultipleChildrenTemplate="{StaticResource dtMultipleChildrenSelected}"
        x:Key="dataTemplateSelector"/>

   public override DataTemplate SelectTemplate(object item, DependencyObject container)
    {
        int childCount = Convert.ToInt32(item).Count;
        if (childCount <= 1)
            return OneChildTemplate;
        else
            return MultipleChildrenTemplate;
    }

    <DataTemplate x:Name="dtMultipleChildrenSelected" x:Key="dtMultipleChildrenSelected">
        <Grid HorizontalAlignment="Left" VerticalAlignment="Center">
            <StackPanel Orientation="Vertical" >
                <TreeView HorizontalAlignment="Left" ItemTemplate="{StaticResource menuMultipleChildren}" Width="220" Height="100" Margin="0,0,0,0" MaxHeight="220" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Auto" />
            </StackPanel>
        </Grid>
    </DataTemplate>

    <HierarchicalDataTemplate x:Key="menuMultipleChildren" ItemsSource="{Binding Path=MultipleChildren}" ItemTemplate="{StaticResource menuChildren}">
        <StackPanel Orientation="Horizontal">
            <Label Content="{Binding Path=ParentId}" Width="20" Height="Auto" />
            <Label Content="{Binding Path=ParentName}" Width="140" Height="Auto" />
    </HierarchicalDataTemplate>

    <HierarchicalDataTemplate x:Key="menuChildren">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Bottom" >
            <Label Content="{Binding Path=ChildName}" Width="140" Height="Auto" />
        </StackPanel>
    </HierarchicalDataTemplate> 
```

但是当它运行时，只有一个树视图应该在的空间，当 ParentName 绑定并且它没有绑定时，我已经中断了。如果我将模板代码直接放在 TreeViewItem 中，它会绑定但不显示值。

我是在做一些明显错误的事情，还是有更好的方法来实现我想要实现的目标？

# c# - 从 SVN 部署 ASP.NET MVC 4 并构建

> ID：12936811
> 
> 赞同：0
> 
> 时间：2012-10-17T14:38:37.033
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

我正在开发我的第一个 ASP.NET MVC 4 应用程序。客户端直接从我推送的 SVN 存储库进行部署。我可以/应该检查发布版本，还是应该在部署过程中最终运行构建。我想让他们尽可能简单。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:42:14.787

您不应该将任何构建检查到源代码控制存储库中。只有源代码。应该使用构建服务器来使用目标配置预编译应用程序（如果您要推送到生产环境，请发布）。还要注意不要将任何生产连接字符串和 url 留在您提交的源代码中。一个无辜的开发人员可以在没有任何意识的情况下检查代码并造成大量破坏。

# android - 为android构建pjsip的apjsua示例应用程序

> ID：12936812
> 
> 赞同：2
> 
> 时间：2012-10-17T14:38:37.093
> 
> 标签：android, android-ndk, sip, voip, pjsip

我遵循[了 PJSIP](http://trac.pjsip.org/repos/wiki/Getting-Started/Android)教程，并成功构建**了 apjsua**示例应用程序。

当我尝试通过 +a 添加帐户时，它会询问我 Sip Url、注册商的 Url、Auth Realm、用户名、密码

我进入了

*   小口网址：sip:140@122.252.232.5
*   注册商：sip:122.252.232.5
*   授权领域：*
*   用户名：1​​40
*   密码：示例

之后它给了我以下错误

```
 10-17 19:57:27.165: I/apjsua(920): 19:57:27.165  sip_resolve.c  ...Failed to resolve '122.252.232.532.5'. Err=70018 (gethostbyname() has returned error (PJ_ERESOLVE))
10-17 19:57:27.174: I/apjsua(920): 19:57:27.174    tsx0x223a5c  ...Failed to send Request msg REGISTER/cseq=54907 (tdta0x1eb9a0)! err=70018 (gethostbyname() has returned error (PJ_ERESOLVE))
10-17 19:57:27.185: I/apjsua(920): 19:57:27.185    pjsua_acc.c  .....SIP registration failed, status=502 (gethostbyname() has returned error (PJ_ERESOLVE))
10-17 19:57:27.199: I/apjsua(920): 19:57:27.199    pjsua_acc.c  .....Scheduling re-registration retry for acc 2 in 6 seconds..
10-17 19:57:27.212: I/apjsua(920): 19:57:27.212      sip_reg.c  ..Error sending request, status=70018
10-17 19:57:27.226: I/apjsua(920): 19:57:27.226    pjsua_acc.c  ..Unable to create/send REGISTER: gethostbyname() has returned error (PJ_ERESOLVE) [status=70018] 
```

有谁知道我哪里错了？？？

或者有没有人知道任何其他方式为 android 使用 pjsip 库？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T14:58:08.390

You're in luck. I was sitting with this problem a few days ago and it just looked like a simple initialization error. You should really get to grips with debugging c code else you're gonna have a hard time understanding the pjsip stack. Anyway here's what you do:

Make the "setInput" method under /pjsip-apps/src/pjsua/main_android.c look like this:

```
void setInput(char *s)
{
  int i = 0;

  for (i = 0; i < sizeof(app_var.line); i++)
  {
      app_var.line[i]=NULL;
  }

  /* app_var.line[0] = 0; */

  if (strlen(s) < sizeof(app_var.line))
      strncpy(app_var.line, s, strlen(s));
  pj_sem_post(app_var.input_sem);
} 
```

Looking at the code changes, you should be able to see that the app_var.line char variable was not being cleared properly. Now go to the /pjsip-apps/build/ folder and execute "make". Then go to the /pjsip-apps/src/apjsua/ folder and execute "make". Thereafter refresh your eclipse project and run. That should do the trick.

# json - 如何从 GSON 转换为 JACKSON？

> ID：12936813
> 
> 赞同：0
> 
> 时间：2012-10-17T14:38:45.333
> 
> 标签：json, jackson, gson

杰克逊的以下课程相当于什么？

```
public class JsonConverter
{
    private static final JsonConverter INSTANCE = new JsonConverter();
    private Gson gson;

    private JsonConverter() {
        GsonBuilder gsonBilder = new GsonBuilder();
        gsonBilder.registerTypeAdapter(AbstractElement.class, new AbstractElementAdapter());
        gsonBilder.registerTypeAdapter(ClientAction.class, new ClientActionEnumAdapter());
        gsonBilder.serializeNulls();
        gson = gsonBilder.create();
    }

    public static Gson getGson() {
        return INSTANCE.gson;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:23:57.630

`ObjectMapper`相当于`Gson`; 它是在没有构建器的情况下直接构建的。

配置设置和样式不同，自定义适配器的注册也是如此。

# jquery - JQuery UI 函数在本地不工作

> ID：12936815
> 
> 赞同：1
> 
> 时间：2012-10-17T14:38:47.293
> 
> 标签：jquery, jquery-ui, jquery-plugins, plugins

我运行了以下 JS、CSS 和 HTML 文件

> [http://jsbin.com/esubag/2/edit](http://jsbin.com/esubag/2/edit)

我`.hide('bounce');`在 JS 文件中运行了一个 JQuery UI 函数。它在 JSBin 上运行良好，但是当我在本地运行它时，没有执行任何 JQuery UI 函数！我已经在本地和通过 Google API 包含了 UI 插件，只是为了确定，你可能会看到！但我无法解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:20:18.767

尝试更换：

```
$(document).ready(function()  
{  
     $('div#intro_title').hide('bounce');   
}); 
```

只需：

```
$('div#intro_title').hide('bounce'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T14:49:38.283

您是否看到在本地运行网络流量（在 firebug 或任何浏览器 Web 开发工具中）以获取脚本。或者这可能是缓存问题。首先尝试执行 ctrl+f5 以刷新所有脚本。如果您在 JS bin 中看到完全相同的 javascript，但它仍然无法正常工作，那么它们可能是另一个问题，可能只是您使用的特定浏览器可能会尝试另一个问题。

# javascript - 如何在没有查询字符串参数的情况下使用原始 URL 设置 Google 内容实验

> ID：12936819
> 
> 赞同：2
> 
> 时间：2012-10-17T14:38:53.810
> 
> 标签：javascript, ab-testing, google-website-optimizer, google-experiments

我想通过测试在标题菜单中添加新按钮来设置 Google 内容实验以在主页上进行 A/B 测试。在设置实验时，Google 会强制您拥有两个唯一的 Url。另一个问题是实验代码向 Url 添加了一个查询字符串参数，这远非理想。我不想使用查询字符串参数将用户重定向到不同的页面，甚至是同一个页面。这是它的样子：mysite.com?utm_expid=XXXXXXX-X

我发现您可以编辑 Google 的实验 JavaScript 以更接近我想要的，但我不确定这是否会正确收集数据或是否支持编辑代码。

```
//This line returns the variation number (0=Control, 1=Variation 1) 
//so I can show or hide the test button bases on this variable:
  var combination = utmx('combination');

//Removing this line eliminates the redirect:
  utmx('url','A/B'); 
```

**如何在保留页面原始 URL 的同时进行简单的 A/B 测试？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:30:01.107

我个人发现 Google Analytics Content Experiments（及其前身 Google Website Optimizer）弊大于利，所以我开始直接使用 Google Analytics + Amazon 负载均衡器，如下所示：[https ://stackoverflow.com/a/12956940 /470749](https://stackoverflow.com/a/12956940/470749)

# ruby-on-rails - PostgreSQL 检查时间戳字段是否为空

> ID：12936821
> 
> 赞同：3
> 
> 时间：2012-10-17T14:38:59.883
> 
> 标签：ruby-on-rails, postgresql

我按照这些[说明](https://stackoverflow.com/questions/6454032/how-to-stop-soft-deleted-users-login-with-devise?rq=1)检查用户是否在登录时被软删除。在下面的示例中，我可以检查布尔值：

```
Class User < ActiveRecord::Base
  def self.find_for_authentication(conditions)
    super(conditions.merge(:deleted_flag => false))
  end 
```

我更喜欢时间戳（created_at）字段。如何检查这样的字段是否为空？数据库会针对以下检查引发错误：

```
super(conditions.merge(:deleted_at => false)) # also tried nil, "NULL" and "IS NULL" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T19:42:29.610

当然，如果不修改设计，您将无法使用此解决方案。Devise 会将您的条件直接发送到数据库，因此无法调用方法或使用像 squeel 这样的库（这将允许`where{created_at == nil}`.

您可以使用[如何使用 Devise “软删除”用户](https://stackoverflow.com/questions/5140643/how-to-soft-delete-user-with-devise/8107966#8107966)中提供的解决方案，但错误消息将是：“您必须在继续之前确认您的帐户。”

将此添加到您的资源模型中：

```
 def inactive_message
    !!deleted_at ? :deleted : super
  end 
```

并向您的语言环境添加一条消息：

```
en:
  devise:
    failure:
      deleted: "Your account was deleted." 
```

我希望它有帮助！

# android - 使用正则表达式链接电话号码

> ID：12936823
> 
> 赞同：1
> 
> 时间：2012-10-17T14:39:06.207
> 
> 标签：android, phone-number, linkify

我正在尝试使用正则表达式链接电话号码，但我无法将其应用于我的 setText();

我用谷歌搜索了很多，感觉我真的很接近成功。

我得到的代码：

```
if(tag.equals("Customer")) {     
                     String name = xpp.getAttributeValue(null, separated_nodes[0].trim());
                     String number = xpp.getAttributeValue(null, separated_nodes[1].trim());
                     String SSNumber = xpp.getAttributeValue(null, separated_nodes[2].trim());
                     String Address = xpp.getAttributeValue(null, separated_nodes[3].trim());
                     String Postcode = xpp.getAttributeValue(null, separated_nodes[4].trim());
                     String City = xpp.getAttributeValue(null, separated_nodes[5].trim());
                     String Phone = "Phone#: " + xpp.getAttributeValue(null, separated_nodes[6].trim());
                     String Cell = xpp.getAttributeValue(null, separated_nodes[7].trim());
                     String Email = xpp.getAttributeValue(null, separated_nodes[8].trim());
                    // text.setText("Network "+xpp.getAttributeValue(null, "Name"));
                     Pattern pattern = Pattern.compile("[0]{1}[0-9]{6,15}");
                     Linkify.addLinks(text, pattern, "Phone#: ");
                     //Linkify.addLinks(text, pattern, xmlstring);
                     //Linkify.addLinks(text, pattern, Phone);

                            text.setText("Customer: \nName: " + name +"\n" +
                                    "Customer Number: "+ number + "\n" +
                                    "Social Security Number: "+ SSNumber +"\n" +
                                    "Address: "+ Address +"\n" +
                                    "Postal Code: "+ Postcode +"\n" +
                                    "City: "+ City +"\n" +
                                    ""+ Phone +"\n" +
                                    "Cellphone#: "+ Cell +"\n" +
                                    "e-mail: "+ Email +"\n");

                            Linkify.addLinks(text, Linkify.EMAIL_ADDRESSES) ;

                 } 
```

如您所见，我尝试了多种方法来链接电话和手机号码。

我认为正则表达式是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:47:48.333

1.  您需要在`Linkify.addLinks()`设置文本视图后致电，您之前正在这样做
2.  Linkify 不是已经支持电话号码了`Linkify.addLinks(text, Linkify.EMAIL_ADDRESSES | Linkify.PHONE_NUMBERS)`吗？

*更新*

此外，在这里：`Linkify.addLinks(text, pattern, "Phone#: ");`第三个参数应该是`Scheme`，“Phone#:”不是一个有效的方案。应该是`tel:`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T19:42:38.740

不幸的是，调用

```
Linkify.addLinks(text, Linkify.EMAIL_ADDRESSES) 
```

最后一行是清除之前调用 Linkify.addLinks() 创建的 Spannables。请参阅[Linkify 文档](http://developer.android.com/reference/android/text/util/Linkify.html#addLinks%28android.text.Spannable,%20int%29)

# android - 从 SVG 设置自定义按钮选择器位图项

> ID：12936825
> 
> 赞同：1
> 
> 时间：2012-10-17T14:39:17.013
> 
> 标签：android, button, svg, bitmap

我有一个标准按钮的定制：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:state_pressed="true">
   <layer-list>
     <item android:drawable="@drawable/standard_button_normal_background_layer1"/>
     <item android:drawable="@drawable/standard_button_normal_background_layer0"/>
     <item><bitmap android:gravity="center" android:src="@drawable/the_bitmap" /></item>
   </layer-list>
 </item>

...

</selector> 
```

我需要用从 SVG 文件加载的位图更改位图。我用

[http://code.google.com/p/svg-android/](http://code.google.com/p/svg-android/)

可以生成 PictureDrawable：

```
SVG svg = SVGParser.getSVGFromResource(getResources(), R.raw.icon);
PictureDrawable pd = svg.createPictureDrawable();
imageView.setImageDrawable(pd); 
```

如何访问特定`<bitmap>`项目，如何设置位图？有什么解决办法吗？

**编辑：**

我想知道是否可以以编程方式将`<layer-list>`项目底部的图片添加到按钮自定义。图片来自svg，所以不在编译资源上。

我需要的结果是一个带有一些自定义图形（由 定义`<layer-list>`）的按钮和一个来自 svg 的居中图标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:46:34.220

如果您要问如何编写一个引用从 SVG 加载的图片的 XML 文件，那有点像鸡和蛋。部署您的应用程序后， res/ 中的所有内容都是只读的。因此，通过从一组绘图指令中动态加载位图，您可以简单地存储输出的位图。

`imageView.onDraw(mBitmapCanvas);`

这就是你所能做的。您可以创建一个栅格作为预构建步骤，但您将失去与您的应用程序捆绑的矢量的大小优势。

如果您询问如何编辑布局列表，请尝试以下操作：

**层列表.xml**

```
<layer-list>
     <item android:drawable="@drawable/standard_button_normal_background_layer1"/>
     <item android:drawable="@drawable/standard_button_normal_background_layer0"/>
     <!-- Remove bitmap -->
</layer-list> 
```

然后当你想使用这个drawable时：

```
LayerDrawable drawable = (LayerDrawable)getResources().getDrawable(R.drawable.layout_list);
ArrayList<Drawable> layers = new ArrayList<Drawable>();
for(int i=0; i < drawable.getNumberOfLayers(); i++) {
   layers.add(drawable.getDrawable(i);
}

layers.add(new BitmapDrawable(mBitmap));
drawable = new LayerDrawable(layers.toArray(new Drawable[layers.size()]); 
```

# cakephp - cakephp：分页中的第一个参数是什么意思（'Recipe'）

> ID：12936834
> 
> 赞同：-3
> 
> 时间：2012-10-17T14:39:38.437
> 
> 标签：cakephp

我不知道分页中第一个参数的含义和用法：

```
$data = $this->paginate('Recipe', array('Recipe.title LIKE' => 'a%')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:46:43.473

为什么不

a) 使用适当的 IDE - 比您自己回答的问题：

![例子](../Images/879ee7b538af6ada1bc1e78ac95ff5f1.png)

b）在线检查有据可查的方法：

[https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Controller.php#L1070](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Controller/Controller.php#L1070)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:41:04.737

第一个参数表示模型的名称

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:42:22.937

第一个参数`paginate()`是要分页的模型。请参阅[API 文档](http://api20.cakephp.org/class/paginator-component#method-PaginatorComponentpaginate)。

# php - Strtotime() 格式不正确

> ID：12936839
> 
> 赞同：0
> 
> 时间：2012-10-17T14:39:53.227
> 
> 标签：php, mysql

我有一个“生日”的输入字段我正在使用一个javascript弹出窗口，它以以下格式返回日期“MM-DD'YYYY”，当我在插入代码的输入字段中回显值时，它会正确显示，但是当我使用

```
$c_birthday = $_POST['dateBorn'];
$birth=date('Y.m.d',strtotime($c_birthday)); 
```

如果我回显 $c_birthday，它会正确显示值，例如“10-02-2012”，但是当我回显 $birthday 时，它会显示 2012-02-10，它正在转换日期和月份，我尝试使用 'Ymd ' 我得到了相同的结果。

有我应该看的设置吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:41:18.460

[来自 PHP 文档](http://php.net/manual/en/function.strtotime.php)

> 笔记：
> 
> m/d/y 或 dmy 格式的日期通过查看各个组件之间的分隔符来消除歧义：如果分隔符是斜杠 (/)，则假定为美式 m/d/y；而如果分隔符是破折号 (-) 或点 (.)，则假定为欧洲 dmy 格式。
> 
> 为避免潜在的歧义，最好尽可能使用 ISO 8601 (YYYY-MM-DD) 日期或 DateTime::createFromFormat()。

为了避免如上所述的潜力`ambiguity`，您可以使用：

```
$dt = DateTime::createFromFormat("m-d-Y", $c_birthday);
$dt->format("Y.m.d"); 
```

# codeigniter - Ion Auth 在所有视图上返回 404

> ID：12936841
> 
> 赞同：0
> 
> 时间：2012-10-17T14:39:55.363
> 
> 标签：codeigniter, http-status-code-404, ion-auth

嘿，我是 CI 新手，我想我总体上缺少对 CI 和 MVC 的一些基本理解。

我已将所有[Ion Auth](https://github.com/benedmunds/CodeIgniter-Ion-Auth)文件复制到它们的位置，创建了所有表，创建了加密密钥。

但是当我尝试输入任何视图时，我得到一个 404。

我应该在我的路线文件中写任何东西吗？为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:07:31.287

问题是我有这个代码`routes.php`：

```
$route['(:any)'] = 'pages/view/$1'; 
```

这当然意味着正在那里发送任何呼叫，而这并不存在。

# javascript - 如何输出从 JSON 提要读取的表单数据？

> ID：12936843
> 
> 赞同：1
> 
> 时间：2012-10-17T14:39:56.640
> 
> 标签：javascript, jquery, html

我正在使用 jquery.dform 开发基于 JSON 数据馈送的表单向导。即它读取 JSON 提要并填充表单字段。

现在，当用户单击提交时，我希望能够根据用户在表单中的更改或更新来输出或提醒表单字段值。

我在这里使用 jquery.dfrom 生成基于 JSON 示例的表单 [https://github.com/daffl/jquery.dform](https://github.com/daffl/jquery.dform)

谢谢

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Get started with jQuery dForm</title>
</head>
<style type="text/css">
    input, label {
        display: block;
        margin-bottom: 5px;
    }
</style>
<body>
<!--<form id="demo-1-form"></form>
<pre data-for="demo-1"></pre>  -->

<form id="demo-2-form"></form>
<pre data-for="demo-2"></pre>

<!-- Load jQuery and the minified plugin -->
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
  <script type="text/javascript" src="dist/jquery.validate.js"></script>
<script type="text/javascript" src="dist/jquery.dform-1.0.1.js"></script>

<script type="text/javascript" class="demo" id="demo-2">
$('#demo-2-form').dform({
    "action":"index.html",
    "method":"post",
    "html":[
        {
            "type":"fieldset",
            "caption":"User information",
            "html":[
                {
                    "name":"email",
                    "caption":"Email address",
                    "type":"text",
                    "placeholder":"E.g. user@example.com",
                    "validate":{
                        "email":true
                    }
                },
                {
                    "name":"password",
                    "caption":"Password",
                    "type":"password",
                    "id":"registration-password",
                    "validate":{
                        "required":true,
                        "minlength":5,
                        "messages":{
                            "required":"Please enter a password",
                            "minlength":"At least {0} characters long"
                        }
                    }
                },
                {
                    "name":"password-repeat",
                    "caption":"Repeat password",
                    "type":"password",
                    "validate":{
                        "equalTo":"#registration-password",
                        "messages":{
                            "equalTo":"Please repeat your password"
                        }
                    }
                },
                {
                    "type":"radiobuttons",
                    "caption":"Sex",
                    "name":"sex",
                    "class":"labellist",
                    "options":{
                        "f":"Female",
                        "m":"Male"
                    }
                },
                {
                    "type":"checkboxes",
                    "name":"test",
                    "caption":"Receive newsletter about",
                    "class":"labellist",
                    "options":{
                        "updates":"Product updates",
                        "errors":{
                            "value":"security",
                            "caption":"Security warnings",
                            "checked":"checked"
                        }
                    }
                }
            ]
        },
        {
            "type":"fieldset",
            "caption":"Address information",
            "html":[
                {
                    "name":"name",
                    "caption":"Your name",
                    "type":"text",
                    "placeholder":"E.g. John Doe"
                },
                {
                    "name":"address",
                    "caption":"Address",
                    "type":"text",
                    "validate":{ "required":true }
                },
                {
                    "name":"zip",
                    "caption":"ZIP code",
                    "type":"text",
                    "size":5,
                    "validate":{ "required":true }
                },
                {
                    "name":"city",
                    "caption":"City",
                    "type":"text",
                    "validate":{ "required":true }
                },
                {
                    "type":"select",
                    "name":"continent",
                    "caption":"Choose a continent",
                    "options":{
                        "america":"America",
                        "europe":{
                            "selected":"true",
                            "id":"europe-option",
                            "value":"europe",
                            "html":"Europe"
                        },
                        "asia":"Asia",
                        "africa":"Africa",
                        "australia":"Australia"
                    }
                }
            ]
        },
        {
            "type":"submit",
            "value":"Signup"
        }
    ]
});
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:59:37.250

使用 jquery serialize() 捕获表单中的所有值/字段并输出它或用户可能对表单字段所做的任何更改。

```
<script type="text/javascript">

   $('#demo-2-form').on('submit', function(ev) {
        //alert($(this).serialize());
        var data = $(this).serialize(); // -> The URL encoded form data
         $("#results").text(data);

        ev.preventDefault();
    });
</script> 
```

# jquery - 匹配第 5 和第 6 个字符以选择值

> ID：12936848
> 
> 赞同：-1
> 
> 时间：2012-10-17T14:40:06.500
> 
> 标签：jquery, regex

我需要将输入字段中的第 5 个和第 6 个字符与选择菜单中的值匹配。

我将发布一些虚拟 HTML 来说明我的意思

```
<select class="mySelect">
  <option value="AB"></option>
  <option value="CD"></option>
  <option value="EF"></option>
  <option value="GH"></option>
</select>

<input type="text" class="myInput" /> 
```

例如，我需要查找输入是否为 (1111AB111) 然后 alert(true)... 所有其他字符都不重要，我需要匹配第 5 个和第 6 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:47:37.813

此代码已经过测试并且可以正常工作...

```
$(function() {
    $("input.myInput").on("keyup", function() {
        var text = $(this).val();
        if (text.length < 6) return;
        text = text.substr(4, 2);
        var $option = $("select.mySelect option[value='" + text + "']");
        if ($option.length == 0) return;
        alert("Found " + text);
    });
}); 
```

这是一个jsfiddle ...

[http://jsfiddle.net/UBhy9/](http://jsfiddle.net/UBhy9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:58:06.743

我做了一个 jsFiddle，展示了一个粗略的方法，在这里：http: [//jsfiddle.net/TN5Ru/](http://jsfiddle.net/TN5Ru/)

```
function twoMatchingCharacters(selectElement,inputElement){
    if($(selectElement).val() === $(inputElement).val().slice(4,6)){
      $('p').text('That is a match');                
                  }else{
      $('p').text('That is not a match');
                  }
}

$('.mySelect').change(function(){
    twoMatchingCharacters($('.mySelect'),$('.myInput'));          
});

$('.myInput').keyup(function(){
    twoMatchingCharacters($('.mySelect'),$('.myInput'));         
}); 
```

显然，您不会想要更改页面上每个段落的文本，并且有更漂亮的方法来绑定该功能，但您应该明白这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:46:59.653

使用正则表达式

```
var n = str.match(/^.{4}(.{2})/); 
```

然后`n[1]`是第 5 个和第 6 个字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-17T14:47:15.760

正则表达式功能强大，但在像您这样的情况下会不必要地消耗性能。您真正需要的是一个简单的子字符串函数：

```
if (yourString.substr(4, 2) == theOptionValue) {
    // Do something
} 
```

你也可以把它放在一个 switch 语句中，这取决于你的情况。jQuery 是一个很棒的工具，但不要忘记它是一个库而不是它自己的语言，而且很多事情都可以用纯老式的 JavaScript 完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-17T14:53:36.293

尝试（测试）：

```
$( "input.myInput" ).bind('keyup', function() {
    var fifthandsixth = ($(this).val())[4] + ($(this).val())[5];
    if ( $(".mySelect > option[value='" + fifthandsixth + "']")[0] ) {
        alert("true");
    } else {
        // alert("false");
    }
}); 
```

# wpf - WPF 动画上的像素化 和损坏的文本

> ID：12936851
> 
> 赞同：3
> 
> 时间：2012-10-17T14:40:28.390
> 
> 标签：wpf, animation, fonts, blurry

我有一个控件，该控件在`Height`属性上应用了动画。该控件包含一个`ListBox`with `TextBlock`as `ListItem`。但在动画过程中，文本会模糊、损坏或像素化。下面请看动画中不同点的图像。

![模糊](../Images/604a0af23040bd47dd0f6fcc21d07ece.png)

![破碎的文字](../Images/d7acee97781ef132a8b9e27254f88baf.png)

![相对较好的文字](../Images/a8bc963add562b67470ca6f831e6fa23.png)

我的代码`TextBlock`：

```
<TextBlock x:Name="Description"
Padding="0,2,0,2"
Grid.Column="1" 
TextOptions.TextRenderingMode="ClearType"
HorizontalAlignment="Left" VerticalAlignment="Center"
Text="{Binding Description}"
ToolTip="{Binding Description}"
TextTrimming="CharacterEllipsis"
Foreground="White"
FontSize="11" FontFamily="{DynamicResource StandardFontType}"/> 
```

[我为此链接](https://stackoverflow.com/questions/190344/wpf-blurry-fonts-problem-solutions#190521)尝试了所有不同的选项，`TextOptions.TextRenderingMode`但没有什么能解决我的问题。`DisplayModes`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:44:08.900

尝试在以下之间切换：

```
TextOptions.TextFormattingMode="Ideal" 
```

和

```
TextOptions.TextFormattingMode="Display" 
```

另请注意，带阴影的边框可能会导致文本渲染出现问题，[请参阅此 SO 链接](https://stackoverflow.com/a/1631635/677014)

如该链接中所述，您可以通过使用网格并将两个元素放在同一行/列中来获得两全其美（阴影+渲染良好的文本）：因此它们是叠加的，但文本不会受到影响影子。

# c++ - 将文件包含为原始字符串文字

> ID：12936855
> 
> 赞同：7
> 
> 时间：2012-10-17T14:40:41.017
> 
> 标签：c++, c++11, include, string-literals

> **可能重复：**
> [C/C++，你能#include一个文件到一个字符串文字中吗？](https://stackoverflow.com/questions/1246301/c-c-can-you-include-a-file-into-a-string-literal)

是否可以在编译时使用 C++11 原始字符串文字将文本文件的全部内容作为字符串获取？

基本上，我希望能够嵌入 GLSL 着色器源文件而无需修改它们。

[这里](https://stackoverflow.com/questions/2485503/embedding-cg-shaders-in-c-gpgpu-library)建议采用以下方法：

```
const std::string shaderSource = R"glsl(
  #include "my_shader.glsl"
  )glsl"; 
```

这很hacky，但对我的应用程序来说很好。但是，由于在文件包含之前评估原始字符串文字，这似乎不起作用。

我想我可以将`'R"glsl('`and`')glsl"'`部分移到每个着色器源文件的开头和结尾，然后这样做：

```
const std::string shaderSource =
  #include "my_shader.glsl"
  ; 
```

但就像我说的那样，我真的不想修改着色器源文件，因为这会使相同文件的运行时加载复杂化，从而降低它们的可移植性。

# asp.net - 从另一个域（跨域）获取json数据

> ID：12936856
> 
> 赞同：0
> 
> 时间：2012-10-17T14:40:40.600
> 
> 标签：asp.net, jquery, cross-domain

我是 jquery 新手，不知道从另一个域（跨域）获取 json 数据。

```
function createCORSRequest(method, url){
var xhr = new XMLHttpRequest();
if ("withCredentials" in xhr){
    xhr.open(method, url, true);
} else if (typeof XDomainRequest != "undefined"){
    xhr = new XDomainRequest();
    xhr.open(method, url);
} else {
    xhr = null;
}
return xhr;
}

var request = createCORSRequest("get", "http://www.stackoverflow.com/");
if (request){
request.onload = function() {
    // ...
};
request.onreadystatechange = handler;
request.send();
} 
```

我从这里找到了这个程序[规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

这就是说通过使用上面的代码我们可以访问跨域的 json 数据。

我复制了代码。这是说处理程序未定义

我不知道如何定义 handler 。

我也不知道在 request.onload 里面写什么

我将在哪里得到 json 结果

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:28:40.190

处理程序是一个函数

它应该是这样的

```
function handler(){
   var response = xhr.responseText;
   // do more with your response.
} 
```

此外，您的 xhr 应该在函数 createCORSrequest 之外定义。

请参阅[XDR 上的文档](http://msdn.microsoft.com/en-us/library/ie/cc288060%28v=vs.85%29.aspx)

我知道你说你是 jquery 的新手，但你也应该看看 [$.getJSON](http://api.jquery.com/jQuery.getJSON/)。它容易得多。

# google-maps - 在 Google Maps API v3 中显示/隐藏多段线组

> ID：12936860
> 
> 赞同：2
> 
> 时间：2012-10-17T14:40:49.387
> 
> 标签：google-maps, google-maps-api-3, toggle, polyline

我想切换多段线组的可见性。在我的文件中，我可以显示/隐藏标记，但是当我尝试对折线执行相同操作时，它只会显示/隐藏最后创建的折线。将来我想对我的折线进行分类，并只用一种颜色切换折线。但是现在，如果有人可以帮助我切换所有折线，我会很高兴。我认为问题在一个循环中。这是我的文件： [http ://www.2shared.com/document/C01NN3u5/Polylines.html](http://www.2shared.com/document/C01NN3u5/Polylines.html)

谢谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T22:36:15.823

为每个折线类别创建一个数组。将每个折线对象推入适当的数组。要关闭它们，请遍历特定数组并在每条折线上调用 setMap(null)。

拥有一个包含一些折线的数组 myArray，您可以执行类似的操作

```
for (var i=0; i<myArray.length; i++) {

    myArray[i].setMap(null);
} 
```

如果您需要再次打开它们，请执行相同的操作`setMap(yourMapId)`

# visual-studio-2010 - 如何在 Visual Studio 2010 中切换多个文件中的某些评论？

> ID：12936861
> 
> 赞同：0
> 
> 时间：2012-10-17T14:40:49.123
> 
> 标签：visual-studio-2010, comments, toggle, coderush

我有一个 ASP.NET MVC 4 网站，其中包含多个文件（控制器），这些文件具有接受 [RequireHttps] 的操作。当我在本地工作时，我希望能够通过切换/快捷方式注释掉所有这些。我拥有 Visual Studios 2010 的 CodeRush。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:53:20.370

您可以进行项目范围的搜索和替换`[RequireHttps]`to `/*[RequireHttps]*/`，反之亦然。您可以在 Visual Studio 中将这些记录为宏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T20:29:10.567

是的，这是可能的。但是，此任务需要创建一个[新的 CodeRush 插件](http://www.devexpress.com/Support/Center/Issues/ViewIssue.aspx?issueid=KA18586)。

# php - i=i+1 在 foreach 中为 smarty

> ID：12936869
> 
> 赞同：0
> 
> 时间：2012-10-17T14:41:02.537
> 
> 标签：php, smarty

我=0。我想在 foreach 中创建 tab1、tab2、tab3 等，如果 i=1 则首先 echo class="active" < li >。怎么做？

```
{elseif $complexField == "KeySkills"} 
<ul> 
{foreach from=$complexElements key="complexElementKey" item="complexElementItem"} 
{foreach from=$form_fields item=form_field} 
{if $form_field.caption == "Key personal skill"} 
<li 
```

（如果 i=1 则 echo class="active"）

```
><a href="# 
```

选项卡1

```
" data-toggle="tab">{display property=$form_field.id complexParent=$complexField complexStep=$complexElementKey}    </a></li> 
{/if} 
{/foreach} 
{/foreach} 
</ul> 
<div class="tab-content" style="min-height:470px;"> 
{foreach from=$complexElements key="complexElementKey" item="complexElementItem"} 

{if $form_field.caption == "Percentaged Key Skill" || $form_field.caption == "Skill Detail"} 
<div class="tab-pane fade active in" id=" 
```

选项卡1">

```
<div class="item_top"> 
<p> {display property=$form_fields.SkillDetail.id complexParent=$complexField complexStep=$complexElementKey} </p> 
<div class="donutchart2" data-percent="{display property=$form_fields.PercentKeySkill.id complexParent=$complexField complexStep=$complexElementKey}"></div> 
</div> 
</div> 
{/if} 

{/foreach} 
</div> 
```

[这是HTML源代码](http://jsfiddle.net/6TaQt/17/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:46:57.410

此答案基于您的标题，因为您的 HTML 不可读

```
{section name=foo loop=5} 
    {$smarty.section.foo.iteration} 
{/section} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:01:17.527

{foreach from=$complexElements key="complexElementKey" item="complexElementItem"} 的 key 内的 complexElementKey 将是循环 1,2,3。

```
<a href="#tab{$complexElementKey}" data-toggle="tab"> will be <a href="#tab1" data-toggle="tab">blablabla

<a href="#tab2" data-toggle="tab"> bsdakdkas

<a href="#tab3" data-toggle="tab">gdfgdfg 
```

# mysql - MySQL 使用 GROUP BY 和 ORDER BY

> ID：12936871
> 
> 赞同：2
> 
> 时间：2012-10-17T14:41:08.670
> 
> 标签：mysql, sql, group-by, sql-order-by

我有一张人桌，每个人都有*访问次数*和*优先级*：

```
ID | NAME          |  VISITS | PRIORITY
---------------------------------------
 1 |     John      |    1    |   0
 2 |     Joe       |    2    |   1
 3 |     Peter     |    1    |   1
 4 |     Sara      |    0    |   2  
 5 |     Phillip   |    5    |   0
 6 |     Bob       |    3    |   1
 7 |     Andrew    |    4    |   2 
```

只有某些允许的优先级：（0,1,2）

**如何创建一个查询，让我按访问次数排序（从最低的开始）但在其相应的优先级组内？**

所以结果应该是这样的：

```
ID | NAME          |  VISITS | PRIORITY
---------------------------------------
 1 |     John      |    1    |   0
 2 |     Philip    |    5    |   0
 3 |     Peter     |    1    |   1
 4 |     Joe       |    2    |   1  
 5 |     Bob       |    3    |   1
 6 |     Sara      |    0    |   2
 7 |     Andrew    |    4    |   2 
```

我想必须使用 GROUP BY 子句，但我不确定如何使用它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-17T14:43:17.227

您是否尝试过`ORDER BY`：

```
select id, name, visits, priority
from people
order by priority, visits 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/2d3cc/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T14:43:20.937

您将使用 ORDER BY 和两列。

```
SELECT * FROM people ORDER BY priority, visits; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:46:43.210

尝试这个：

```
Select * from table order by priority, visits 
```

注意：ID 列不会有您的结果的顺序，因为每次访问都已经有它的 id，您的结果应该如下所示：

```
ID | NAME          |  VISITS | PRIORITY
---------------------------------------
 1 |     John      |    1    |   0
 5 |     Philip    |    5    |   0
 3 |     Peter     |    1    |   1
 2 |     Joe       |    2    |   1  
 6 |     Bob       |    3    |   1
 4 |     Sara      |    0    |   2
 7 |     Andrew    |    4    |   2 
```

# jquery - 不同的元素相同的事件（两个异步结果而不是一个）

> ID：12936872
> 
> 赞同：1
> 
> 时间：2012-10-17T14:41:10.843
> 
> 标签：jquery, events, leaflet, jquery-events

当您需要处理具有相同事件的两个元素但在这种情况下它变得一团糟时，这是一个经典问题。我正在使用leaflet.js，但会使代码更通用

一个空的 var 声明：

```
var markerslayer; 
```

第一个绑定事件：

```
$("#slider").on("valuesChanged", function (e){

      var markers = new Array();
      //check if empty, otherwise resets layer
      if(markerslayer){
         map.removeLayer(markerslayer);
         };

      /*some more code here */
      $.post (a.php file here, {some data}, function(data){
             /* markerslayer array is made here */      
             /* add a layer based on markerslayer array */
             });
      }); 
```

第二个绑定事件（与上面的代码相同）：

```
map.on("moveend", function (e){

      var markers = new Array();
      //check if empty, otherwise resets layer
      if(markerslayer){
         map.removeLayer(markerslayer);
         };

      /*some more code here */
      $.post (a.php file here, {some data}, function(data){
             /* markerslayer array is made here */      
             /* add a layer based on markerslayer array */
             });
      }); 
```

现在因为我认为它们在我第一次运行我的脚本时都是异步的，所以它们都同时运行并且它们创建了两个，尽`/* make some divs based on markerslayer array */` ​​管我`if`一开始就有。

简而言之（我认为）正在发生的事情是：

1.  我创建了一个空变量
2.  他们异步运行，所以他们认为它是空的
3.  他们创造了两个结果而不是一个
4.  附加：当它们再次被触发时，每个只重置它自己的结果（就像有一个标记层和一个标记层_复制）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:59:14.960

问题是您 `markerslayer`在调用 之前检查是否存在`post`，这意味着另一个`post`可以同时返回并创建它：

要解决此问题，请将您的删除代码移动到`post`回调中：

```
$.post (a.php file here, {some data}, function(data){
    if(markerslayer){
        map.removeLayer(markerslayer);
    };
    /* markerslayer array is made here */  
    /* add a layer based on markerslayer array */   
}); 
```

这样，每个帖子都会在回调中接收数据，然后在添加新层之前立即删除任何现有层。

注意：这也意味着您不需要（必然 - 取决于您的代码的其余部分）需要在回调之外保留对标记数组的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:48:42.187

此处的代码不会按预期工作，因为 ajax 是异步的：

```
/*some more code here */
$.post (a.php file here, {some data}, function(data){
    /* markerslayer array is made here */      
});

/* make some divs based on markerslayer array */ 
```

应该改成这样：

```
/*some more code here */
$.post (a.php file here, {some data}, function(data){
    /* markerslayer array is made here */  
    /* make some divs based on markerslayer array */    
}); 
```

我不确定您的代码中还发生了什么，但这太大而无法作为评论发布。

我也会将 if 语句移到 $.post 内部，这样可以防止出现重复标记，因为即使 ajax 请求发生两次，每次成功都会删除前一次成功对 dom 所做的事情。

# ruby-on-rails-3 - Rails update_attribute 替换？

> ID：12936873
> 
> 赞同：4
> 
> 时间：2012-10-17T14:41:12.790
> 
> 标签：ruby-on-rails-3, validation, callback, update-attribute

有替代品`update_attribute`吗？我知道你仍然可以在 Rails 3 中使用它，但你会收到弃用消息。

我需要使用的原因`update_attribute`是因为我需要跳过验证但运行回调。

我发现这样做（并避免弃用消息）的唯一方法是简单地从以下位置提取代码`update_attribute`：

```
Object.send("#{attribute}=", value)
Object.save(:validate => false) 
```

我想知道是否有另一种（正确的）方法可以做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T15:07:52.993

我会建议答案是**否定**的。

您不能通过`false`to`update_attributes`跳过验证。

我会推荐你[​​ update_column](http://apidock.com/rails/ActiveRecord/Persistence/update_column)，但这个方法跳过回调。从你的问题来看，这不是你所需要的。

**更新：**

我在[那个演示文稿](https://vimeo.com/51181496)中找到了有趣的表格。我想这可以证明我的观点。

![update_(属性|列)s](../Images/a059ffc5092cee0cba4c2a107b291001.png)

从这张表来看，满足条件的方法只有一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:25:24.563

你会考虑使用条件验证吗？[http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)

您可以在对象上设置一个属性来禁用当前记录的相关验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T16:06:33.660

从[验证文档](http://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-save)：

> 可以通过传递 :validate => false 来跳过保存时的验证过程。当验证模块混入时，常规的 #save 方法将被替换为默认方法。

因此，只需将您的属性设置为正确的值并调用 save 并将 validates 参数设置为 false。您也不需要使用 send ，除非您的代码依赖于元编程，但这在您的示例中并不明显。

```
object.attribute = value
object.save(:validate => false) 
```

# xml - xpath 其所有子元素名称相同的父级

> ID：12936875
> 
> 赞同：2
> 
> 时间：2012-10-17T14:41:21.713
> 
> 标签：xml, xpath, orbeon

如何选择所有子元素节点名称都相同的父节点。在下面的示例中，`<a id="1">`应选择父节点，因为所有子节点名称都是`b`

```
<form>
  <a id="1">
    <b>1</b>
    <b>2</b>
    <b>3</b>
  </a>
  <a id="2">
    <b>1</b>
    <c>2</c>
    <b>3</b>
  </a>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T15:14:51.180

试试下面的 XPath 表达式：

```
//*[./* and not(./*[name() != name(../*[1])])] 
```

它选择任何具有子元素的元素，但它们的名称都与第一个子元素的名称不同。

它`form`也会返回，因为它的所有子代都命名为`a`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:30:58.800

**一、XPath 1.0**：

**使用**：

```
/*/*
   [not(*[position() > 1
      and
          not(name()= name(../*[1]))
         ]
        )
    ] 
```

这将选择顶部元素的任何子元素，使得任何`position()`大于 1 的子元素的名称等于该元素的第一个子元素的名称。

**说明**：

正确使用**[双重否定法](http://en.wikipedia.org/wiki/Double_negation)**。

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/*
        [not(*[position() > 1
             and
               not(name()= name(../*[1]))
               ]
            )
       ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<form>
    <a id="1">
        <b>1</b>
        <b>2</b>
        <b>3</b>
    </a>
    <a id="2">
        <b>1</b>
        <c>2</c>
        <b>3</b>
    </a>
</form> 
```

**对 XPath 表达式求值，并将所选元素（在本例中只有一个）复制到输出**：

```
<a id="1">
   <b>1</b>
   <b>2</b>
   <b>3</b>
</a> 
```

* * *

**二、XPath 2.0**：

```
/*/*[every $vChild in * satisfies name($vChild) eq $vChild/../*[1]/name()] 
```

# android - 如何让动作模式与 ListView 一起工作

> ID：12936879
> 
> 赞同：1
> 
> 时间：2012-10-17T14:41:31.040
> 
> 标签：android, listview, android-inflate, action-menu

我正在尝试使用操作模式获取上下文菜单，我可以通过长按它来选择 ListView 中的项目。我根据[此参考](http://developer.android.com/guide/topics/ui/menus.html#context-menu)创建了一个 MultiChoiceListener并制作了一个 ItemLongClickListener ，它将一个项目设置为已选中，这是动作模式根据[此参考](https://stackoverflow.com/questions/9283181/how-do-i-use-a-selectable-list-with-a-contextual-actionbar)工作所需的。

我的问题是，即使正在播放项目长按动画，ActionMenu 也不会膨胀。

列表视图代码：

```
final ListView listView = (ListView) findViewById(android.R.id.list);
        listView.setAdapter(adapter);
        listView.setLongClickable(true);
        listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long id) {

            Cursor cursor = db.getSubject(id);
            String subject = null;
            try {
                subject = cursor.getString(cursor.getColumnIndex("subject"));
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Intent intent = new Intent(Main.this, Marks.class);
            intent.putExtra("selected", subject);
            startActivity(intent);
            }
        });
        listView.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                listView.setItemChecked(arg2, true);
                return true;
            }

        });

        listView.setMultiChoiceModeListener(new MultiChoiceModeListener() {

            @Override
            public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public void onDestroyActionMode(ActionMode mode) {
                // TODO Auto-generated method stub

            }

            @Override
            public boolean onCreateActionMode(ActionMode mode, Menu menu) {
                MenuInflater inflater = mode.getMenuInflater();
                inflater.inflate(R.menu.context, menu);
                return true;
            }

            @Override
            public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
                // TODO Auto-generated method stub
                return false;
            }

            @Override
            public void onItemCheckedStateChanged(ActionMode mode, int position,
                    long id, boolean checked) {
                // TODO Auto-generated method stub

            }
        }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-17T14:44:27.493

我没有看到任何代码来实际启动动作模式。这是您`OnItemLongClickListener`需要做的事情，例如：

```
 @Override
  public boolean onItemLongClick(AdapterView<?> view, View row,
                                 int position, long id) {
    modeView.clearChoices();
    modeView.setItemChecked(position, true);

    if (activeMode == null) {
      activeMode=host.startActionMode(this);
    }

    return(true);
  } 
```

可以在以下位置找到使用此类操作模式手动演示的完整示例项目：[https ://github.com/commonsguy/cw-omnibus/tree/master/ActionMode/Manual](https://github.com/commonsguy/cw-omnibus/tree/master/ActionMode/Manual)

请注意，该项目演示了通过 ActionBarSherlock 使用动作模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-20T08:14:42.953

CommonsWare 的回答很棒。如果您想要的是通过长按来选择一个元素的 MultiChoiceModeListener，则此代码可能会对您有所帮助：

```
public class MyFragment extends Fragment implements MultiChoiceModeListener{
    private ListView mListView;
    // ...

    public void onViewCreated(View view, Bundle savedInstanceState) {
        mListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
        mListView.setMultiChoiceModeListener(this);

        mListView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {                
                mListView.setItemChecked(arg2, true);
            }
        });
    } 
```

在我的情况下，我只需单击一下即可，但您可以将 OnItemClickListener 更改为 OnItemLongClickListener 或您喜欢的任何其他内容。

# javascript - 强制在 IE 中重新应用样式表

> ID：12936881
> 
> 赞同：3
> 
> 时间：2012-10-17T14:41:34.283
> 
> 标签：javascript, css, internet-explorer

考虑这个 HTML：

```
<ul>
<li>first</li>
<li>second</li>
<li>third</li>
</ul> 
```

这个CSS：

```
li:first-child { background: yellow; } 
```

而这个Javascript（jQuery）：

```
$("ul").append($("li:first-child")); 
```

[http://fiddle.jshell.net/Xtuaf/](http://fiddle.jshell.net/Xtuaf/)

显然，当 DOM 发生变化时， **Internet Explorer** (8)会中断。`:first-child`我在 Javascript 中为这个问题写了一个解决方法（在那里做样式；`z-index`在我的例子中是 es）。这是我想摆脱的丑陋快速修复。更好的解决方案是在 DOM 更改时强制重新应用样式表。这可以做到吗？或者这个问题有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:45:59.983

在 Internet Explorer 中，可以通过设置类名来触发重排：

```
$("ul").append($("li:first-child")).addClass('x').removeClass('x'); 
```

或者只是（演示： http: [//fiddle.jshell.net/Xtuaf/1/](http://fiddle.jshell.net/Xtuaf/1/)）：

```
$("ul").append($("li:first-child"))[0].className += ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:49:34.510

可靠地导致整个 DOM 重排的一种方法是从 body 元素中快速添加和删除任意类。

```
$('body').addClass('foo').removeClass('foo'); 
```

# android - 如何根据数据动态生成 jUnit 测试

> ID：12936890
> 
> 赞同：3
> 
> 时间：2012-10-17T14:41:44.163
> 
> 标签：android, testing, junit

我正在尝试动态地进行测试。这是一个示例解决方案

[http://jorgemanrubia.net/2008/09/18/generating-junit-test-cases-dynamically/](http://jorgemanrubia.net/2008/09/18/generating-junit-test-cases-dynamically/)

这不适用于android。但我正在寻找类似的android。当我使用上面的示例时，没有任何反应，没有运行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-14T11:55:54.907

我看不到测试用例生成的重点。您可以编写参数化测试，它将对您提供的每个参数运行相同的测试。查看 JUnit 框架的相应文档[https://github.com/junit-team/junit/wiki/Parameterized-tests](https://github.com/junit-team/junit/wiki/Parameterized-tests)。

# sed - 如何查找和替换除第一个使用 sed 之外的所有匹配项？

> ID：12936893
> 
> 赞同：4
> 
> 时间：2012-10-17T14:41:52.553
> 
> 标签：sed

我`sed`用来查找和替换文本，例如：

```
set -i 's/a/b/g' ./file.txt 
```

`a`这将替换文件中的每个with实例`b`。我需要添加一个异常，以便替换with`sed`的每个实例，但文件中的第一次出现除外，例如：`a``b`

```
There lived a bird who liked to eat fish.
One day he fly to a tree. 
```

这变成：

```
There lived a bird who liked to ebt fish.
One dby he fly to b tree. 
```

如何修改我的脚本以仅替换with`sed`的每个实例，除了第一次出现？`a``b`

我有 GNU sed 4.2.1 版。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:16:07.610

您可以使用更复杂的脚本进行更完整的实现：

```
#!/bin/sed -nf

/a/ {
    /a.*a/ {
        h
        s/a.*/a/
        x
        s/a/\n/
        s/^[^\n]*\n//
        s/a/b/g
        H
        g
        s/\n//
    }

    : loop
    p
    n
    s/a/b/g
    $! b loop
} 
```

这个功能很容易用伪代码解释

```
if line contains "a"
    if line contains two "a"s
        tmp = line
        remove everything after the first a in line
        swap tmp and line
        replace the first a with "\n"
        remove everything up to "\n"
        replace all "a"s with "b"s
        tmp = tmp + "\n" + line
        line = tmp
        remove first "\n" from line
    end-if

    loop
        print line
        read next line
        replace all "a"s with "b"s
        repeat loop if we haven't read the last line yet
    end-loop
end-if 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T14:57:49.613

这可能对您有用（GNU sed）：

```
sed 's/a/b/2g' file 
```

或者

```
sed ':a;s/\(a[^a]*\)a/\1b/;ta' file 
```

这可以定制，例如

```
sed ':a;s/\(\(a[^a]*\)\{5\}\)a/\1b/;ta' file 
```

将开始替换`a`为`b`after`5` `a`的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T14:49:48.970

一种方法是全部替换，然后反转第一个替换（感谢*potong*）：

```
sed -e 'y/a/\n/' -e 's/\n/a/g' -e 'y/\n/b/' 
```

换行符用作中间，因此以开头的字符串`b`可以正常工作。

上面的工作是逐行的，如果你想将它应用到整个文件，首先将整个文件变成一行：

```
<infile tr '\n' '^A' | sed 'y/a/\n/; s/\n/a/; y/\n/b/' | tr '^A' '\n' 
```

或者更简单地使用*potong*回答中的 sed 命令：

```
<infile tr '\n' '^A' | sed 's/a/b/2g' | tr '^A' '\n' 
```

注意`^A`（ASCII 0x01）可以用`Ctrl-v``Ctrl-a`. `^A`in`tr`可以替换为`\001`.

这假定该文件不包含`^A`.

# c# - Action_Call 不适用于 Galaxy S3？

> ID：12936902
> 
> 赞同：1
> 
> 时间：2012-10-17T14:42:18.027
> 
> 标签：c#, android, xamarin.android

我的问题是当我尝试使用 Action_Call 意图拨打电话时，应用程序崩溃并退出到菜单。我已经在许多其他设备上测试了我的代码，它运行良好！问题是什么？这是我的代码：

```
 String encodedHash = Uri.encode("#");
    String ussd = "*" + encodedHash + "105" + encodedHash;
    startActivityForResult(new Intent("android.intent.action.CALL",
    Uri.parse("tel:" + ussd)), 1); 
```

请记住，我的问题仅在 Galaxy S3 上，而且我也在使用 Mono for Android。

# javascript - 匹配在 JavaScript 中返回 null

> ID：12936903
> 
> 赞同：2
> 
> 时间：2012-10-17T14:42:21.667
> 
> 标签：javascript

```
var regEx = new RegExp("/[0-9]/");
var test = 'TREE'
alert(test.match(regEx)); 
```

或者

```
var regEx = new RegExp("/[0-9]/");
var test = '1234'
alert(test.match(regEx)); 
```

为什么他们返回null？

我在这里错过了什么吗？

（好吧，昨晚的辩论让我筋疲力尽）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:46:07.797

使用 时`new RegExp`，不需要分隔符 ( `/`)。

```
var regEx = new RegExp("[0-9]");
var test = '1234'
alert(test.match(regEx)); 
```

如果您使用正则表达式文字（我更喜欢使用 to `new RegExp`），则只需要斜杠。

```
var regEx = /[0-9]/;
var test = '1234'
alert(test.match(regEx)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:47:33.823

声明一个正则表达式：

```
var patt=new RegExp(pattern,modifiers); 
```

或者

```
var patt=/pattern/modifiers; 
```

所以试试这个：

```
var regEx = /[0-9]/g;
var test = '1234';
alert(test.match(regEx)); 
```

# javascript - 让用户在客户端打开一个 xml 文件并使用 javascript 解析它

> ID：12936907
> 
> 赞同：3
> 
> 时间：2012-10-17T14:42:35.650
> 
> 标签：javascript, xml, html, client-side

我试图让我网站上的用户在本地计算机上保存 XML 文件，然后使用 HTML 文件元素加载它们。

保存使用 iFrame 完成的文件。

当试图让用户加载文件时，我总是遇到异常。我已经尝试了所有可以在网上找到的东西，但似乎找不到方法。

我遇到了各种异常，例如跨域或**XMLHttpRequest 无法加载 file:///C:/fakepath/Regions.xml。仅 HTTP 支持跨源请求。** 根据我尝试的代码。

我读到 HTML5 标准将 url 替换为“fakepath”，但找不到解决方案。有没有办法让用户从自己的电脑加载文件进行编辑？**从服务器加载特定文件不是问题，但我想给用户这种自由，而不是为他们决定要加载什么文件，也让他们在他们的计算机上而不是服务器上保存和加载 xml**

这个问题有解决方案吗？

找到了这些代码，但都没有帮助（我已经尝试了一些其他版本）：

**1)**

```
 var error = "";
                strFile = document.frmLoadFile.selectedFile.value;
                intPos = strFile.lastIndexOf("\\");
                strDirectory = strFile.substring(0, intPos);
                //alert(strDirectory);
                document.frmLoadFile.selectedFile.value = strDirectory;

                var file = 'file:\\\\\\' + document.frmLoadFile.selectedFile.value;
                try //Internet Explorer
                {
                    xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                    xmlDoc.async = false;
                    xmlDoc.load(file);
                }
                catch (e) {
                    try //Firefox, Mozilla, Opera, etc.
                    {
                        xmlDoc = document.implementation.createDocument("", "", null);
                        xmlDoc.async = false;
                        xmlDoc.load(file);
                    }
                    catch (e) {
                        try //Google Chrome
                        {
                            var xmlhttp = new window.XMLHttpRequest();
                            xmlhttp.open("GET", file, false);
                            xmlhttp.send(null);
                            xmlDoc = xmlhttp.responseXML.documentElement;
                        }
                        catch (e) {
                            error = e.message;
                        }
                    }
                } 
```

**2)**

```
var xmlDoc;
var xmlloaded = false;

function xml_initLibrary(file) {
importXML(file);
}

function importXML(xmlfile) {
try {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open("GET", xmlfile, false);
}
catch (Exception) {
    var ie = (typeof window.ActiveXObject != 'undefined');

    if (ie) {
        xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = false;
        while (xmlDoc.readyState != 4) { };
        xmlDoc.load(xmlfile);
        xmlloaded = true;
        readXML();
    }
    else {
        xmlDoc = document.implementation.createDocument("", "", null);
        xmlDoc.onload = readXML;
        xmlDoc.load(xmlfile);
        xmlloaded = true;
    }
}

if (!xmlloaded) {
    xmlhttp.setRequestHeader('Content-Type', 'text/xml')
    xmlhttp.send("");
    xmlDoc = xmlhttp.responseXML;
    xmlloaded = true;
    readXML();
}
}

function readXML() {
//console.log(xmlDoc);
} 
```

有谁知道是否有办法解决这个问题？您需要将文件保存在服务器上吗？

非常感谢大家，埃雷兹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T21:48:18.273

我认为您正在寻找HTML5 中的新功能[FileReader 。](http://www.w3.org/TR/FileAPI/#dfn-filereader)对于 IE < 10，您需要使用[ActiveX FileSystemObject](http://msdn.microsoft.com/en-us/library/z9ty6h50%28v=vs.85%29.aspx)。

此代码适用于我在 Chrome 上。

```
<script type="text/javascript">
function doit(e) {
  var files = e.target.files;
  var reader = new FileReader();
  reader.onload = function() {
    var parsed = new DOMParser().parseFromString(this.result, "text/xml");
    console.log(parsed);
  };
  reader.readAsText(files[0]);
}

document.getElementById("selectfile").addEventListener("change", doit, false);​
</script>

<input type="file" id="selectfile" /> 
```

[http://jsfiddle.net/xKuPV/](http://jsfiddle.net/xKuPV/)

# ruby-on-rails - RubyMine Rails 脚本调试，如何使 lib 类可见

> ID：12936909
> 
> 赞同：3
> 
> 时间：2012-10-17T14:42:39.613
> 
> 标签：ruby-on-rails, ruby, debugging, rubymine

我正在尝试使用 RubyMine 在我的 Rails 项目中调试脚本，但该脚本看不到在我的 lib 目录下定义的类。

运行/调试配置在 bundle 的上下文中运行脚本，但可见性显然与我从命令行运行“rails r script/foo.rb”不同。

我尝试将调试会话配置为使用 Ruby 脚本：rails，然后`r script/foo.rb`作为脚本参数提供。RubyMine 不接受这是一个有效的配置。

建议？我的目标是能够交互式地调试我的 rails 上下文脚本，就像我已经可以对运行在 rails 服务器中的代码所做的那样。

这是控制台输出 RubyMine：

```
 /home/michael/.rvm/rubies/ruby-1.9.3-p194/bin/ruby -e at_exit{sleep(1)};$stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /home/michael/.rvm/gems/ruby-1.9.3-p194/gems/ruby-debug-ide-0.4.17.beta14/bin/rdebug-ide --dispatcher-port 52376 --port 55139 -- /home/michael/work/myapp/script/foo.rb
    Fast Debugger (ruby-debug-ide 0.4.17.beta14, ruby-debug-base 0.11.30.pre10) listens on 127.0.0.1:55139
    Uncaught exception: uninitialized constant Foo::XLogger
        /home/michael/work/myapp/script/foo.rb:17:in `go'
        /home/michael/work/myapp/script/foo.rb:46:in `<top (required)>'

    Process finished with exit code 0 
```

XLogger 在 /home/michael/work/myapp/lib/x_logger.rb 中定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:26:37.173

我相信我已经找到了自己的答案/解决方案，但我将它提供给其他面临同样挑战的人。

*   在运行/调试配置中
*   在配置选项卡上
*   **Ruby 脚本：**字段应该是`/path/to/rails/app/script/rails`
*   **脚本参数：**字段应该是`r /path/to/rails/app/script/foo.rb`

# twitter-bootstrap - Twitter Bootstrap 和 ReCaptcha

> ID：12936913
> 
> 赞同：2
> 
> 时间：2012-10-17T14:42:56.960
> 
> 标签：twitter-bootstrap, asp.net-mvc-4, recaptcha

我使用基本的 Twitter Bootstrap .less 文件作为 ASP.NET MVC4 网站的基本样式。我已使用 Microsoft.Web.Helpers.ReCaptcha 类将 ReCaptcha 添加到注册页面。简化示例：

```
<head>
  <link rel="stylesheet/less" href="@Url.Content("~/scripts/less/style.less")" />
</head>

@ReCaptcha.GetHtml() 
```

结果如下所示：

![混乱的 ReCaptcha](../Images/f643c43163d35a9b31c4b8a10c275e59.png)

如果我使用 Chrome 开发工具或 firebug 并少删除 twitter 引导程序，我会得到预期的 ReCaptcha：

![好的验证码](../Images/3d84d5779bc2381bb25979ee7e3a8e14.png)

当然，这会破坏网站的所有其他样式，这是不可取的。有没有其他人经历过这种情况，除了手动更改引导类来为 ReCaptcha 类添加异常之外，是否有任何解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-12T21:12:39.167

这就是为我解决的问题。在 MVC 4 Web 应用程序中使用 Bootstrap 2.3.2。我在所有其他 CSS 之后添加了以下 CSS。

```
.recaptchatable * {
    border: 0 !important;
}

body {
    line-height: normal !important;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-14T16:21:59.093

我喜欢[meffect](https://stackoverflow.com/users/1572465/meffect)在这里的回答，但是因为我使用脚本化的 css 文件来改变我在引导程序中的其他布局。稍作改动并移动`line-height`内部的属性`.recaptchatable`为我解决了这个问题：

```
.recaptchatable * {
    border: 0 !important;
    line-height: normal !important; } 
```

可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:41:21.987

我现在想通了......在我们网站的自定义 .less 文件中，我们向所有表格元素添加了以下规则，以修复不同表格元素上的布局：

```
table th, table td { overflow: hidden; } 
```

添加另一个特定于 ReCaptcha 生成的 html 的规则为我们解决了这个问题：

```
#recaptcha_table{ table-layout: auto; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-05T13:40:15.090

这对我有用

```
#recaptcha_widget_div{
     .recaptchatable img{
         max-width: auto;
     }

     input{
         line-height: initial;
         height: auto;
     }
 } 
```

# math - 2 的补码怪异

> ID：12936915
> 
> 赞同：1
> 
> 时间：2012-10-17T14:43:03.040
> 
> 标签：math

当我意识到：

```
a-2 = a-1-1 = a + (2'complement of 1) - 1
    = a + (1's complement of 1 + 1) - 1
    = a + 1's complement of 1
    = a + 0
    = a 
```

所以最终

```
a-2 = a 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T14:51:04.787

你弄错的地方`(2'complement of 1)`不是`(1's complement of 1 + 1)`。

您需要在对待操作数的方式上保持一致，无论它们表示二进制补码值还是一个补码值，都不能混合使用。

它只是一种约定，非常类似于各种编程语言中有符号和无符号标量类型之间的区别。您不能在同一个算术运算中混合有符号和无符号标量并期望结果是正确的。

**具体来说**：（假设 8 位整数大小，参数相同，只有 1 的比较或 2 的比较中允许的值范围不同）。
在一个补码约定中，`1's complement of 1`它 `11111110` 是否表示值 254，这是一个无法在二进制补码约定中表示的值（使用 8 位整数）；二进制补码中的值范围是 -128 到 +127。

因此，在您的推导中，您正在编写一个无效的操作，让我们使用十进制值等效项重写它：

```
a-2 = a-1-1            // OK, we start in 2's complement convention
    = a + (-1) - 1     // OK, we're still in 2's complement convention
    = a + (+255) - 1   // OOPS: we're switching our interpretation of the operand
                       // in parenthesis, we now understand it to be in 1's comp.
                       // but... wait!  255 is not in the range of the 2's comp.
                       // convention we started with. 
```

# sql - 在预期条件的上下文中指定的非布尔类型的表达式 - 错误

> ID：12936916
> 
> 赞同：-2
> 
> 时间：2012-10-17T14:43:03.630
> 
> 标签：sql, sql-server

希望有人能给我一些指导。我的查询：

```
SELECT
    wm.ID,
    wm.name,
    wm.meeting_type,
    m.start_date,
    wml.name as location
FROM
    webmaster.meeting wm inner join meetings m on wm.ID = m.Meeting_Code
    inner join webmaster.meeting_location on wml wm.locationID = wml.ID
WHERE
    Year(m.start_date) = Year(getDate())
ORDER BY
    m.start_date 
```

运行时，我收到此错误：

```
Msg 4145, Level 15, State 1, Line 9
An expression of non-boolean type specified in a context where a condition is expected, near 'wm'. 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T14:44:21.027

改变这个从

```
inner join webmaster.meeting_location on wml wm.locationID = wml.ID

to 

inner join webmaster.meeting_location wml on wm.locationID = wml.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:44:41.133

尝试这个：

```
SELECT
    wm.ID,
    wm.name,
    wm.meeting_type,
    m.start_date,
    wml.name as location
FROM
    webmaster.meeting wm inner join meetings m on wm.ID = m.Meeting_Code
    inner join webmaster.meeting_location wml on wm.locationID = wml.ID
WHERE
    Year(m.start_date) = Year(getDate())
ORDER BY
    m.start_date 
```

# android - Android 使用 ArrayList 中的值创建 AlertDialog？

> ID：12936919
> 
> 赞同：7
> 
> 时间：2012-10-17T14:43:04.957
> 
> 标签：android, android-listview, android-dialog, android-adapter

我正在使用以下代码创建一个对话框，其中包含来自 studentNames ArrayList 的列表项。我通过读取 childfile 数组来创建此 ArrayList。但是当此代码运行时，它只显示一个带有零列表项的对话框。我什至检查了我的 studentNames对于 null 但它有值。根据文档，我需要设置 ListAdapter 以在 Dialog box 中显示列表项，但这对我也不起作用。请帮助我找到问题。

```
ArrayList<String> studentNames  = new ArrayList<String>();
            for (File file2 : childfile) {
                studentNames.add(file2.getName());
            }

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
            builder.setTitle(student.getName()).setAdapter(new ArrayAdapter(context, android.R.layout.simple_list_item_1, studentNames),
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int which) {

                            switch (which) {

                               cases
                            }

                        }
                    });
            builder.create();
            builder.show(); 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-17T15:24:31.157

这是您可以实现的方法：

```
final CharSequence[] items = {"1", "2", "3"};

AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setTitle("Select");
builder.setItems(items, new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int item) {
        // Do something with the selection
        dialog.dismiss();
    }
});
builder.show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-22T11:41:45.720

我有你的问题的解决方案。因此，我可以看到您正在用一些数据填充 ArrayList studentNames。尝试以下代码，以便在对话框中显示列表。

```
ArrayList<String> studentNames=new ArrayList<String>();

for(File file2:childfile){

        studentNames.add(file2.getName());

}
AlertDialog.Builder builder=new AlertDialog.Builder(context);
        builder.setTitle(studentNames.toArray
        (new String[studentNames.size()]),
        new DialogInterface.OnClickListener(){

//studentName.toArray() converts the List into Array so that you can use it as Dialog List.     

        public void onClick(DialogInterface dialog,intwhich){
            switch(which){

            //cases...

            }
        }

        });
}
builder.create();
builder.show(); 
```

# angularjs - 您如何访问子控制器中的当前集合项？

> ID：12936920
> 
> 赞同：0
> 
> 时间：2012-10-17T14:43:10.237
> 
> 标签：angularjs

控制器：

```
var ProductsCtrl = function ($scope) {
  $scope.products = [ {name: 'one'}, {name: 'two'}, {name:'three'} ];
};

var ProductCtrl = function ($scope) {
  $scope. // How do I access the current product name?
}; 
```

看法：

```
<ul ng-controller='ProductsCtrl'>
  <li ng-repeat='product in products' ng-controller='ProductCtrl'>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:52:35.503

在您的情况下，当前产品可在范围内作为“产品”访问。

如果你重复这样的事情：

ng-repeat="item in items" 您的子控制器将在范围内包含“item”。

所以在你的例子中：

```
<ul ng-controller='ProductsCtrl'>
  <li ng-repeat='product in products' ng-controller='ProductCtrl'>
    {{product.name}}
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:33:20.690

@ganaraj 已经提供了正确的答案。但我想指出，在您的示例中，您可能不需要在 <li> 元素中声明控制器。由 ng-repeat 为每个产品创建的子范围可以访问 ProductCtrl 控制器。你应该只需要

```
<li ng-repeat='product in products'> 
```

另请参阅[了解控制器组件](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)页面上的“控制器继承示例”部分。

您可以向 ProdctsCtrl 的 $scope 添加带有产品参数的方法，然后可以在 ng-repeat 中调用该方法。例如，在您的控制器中：

```
var ProductsCtrl = function ($scope) {
   ...
   $scope.totalPrice = function(product) {
      return product.price * product.quantity;
   }
} 
```

在您的 HTML 中：

```
<li ng-repeat='product in products'>
   total cost = {{totalPrice(product)}}
</li> 
```

# java - 线程和休眠会话的问题

> ID：12936928
> 
> 赞同：1
> 
> 时间：2012-10-17T14:43:25.947
> 
> 标签：java, multithreading, spring, hibernate, repository

我正在使用休眠 3 和弹簧。当我启动一个线程时发生异常：

```
org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions 
```

我不知道如何使用此架构分离实体或关闭会话。我很感激一些帮助。

`CommunicationService.sendCommunications()`代码：

```
public void sendCommunications(HibernateMessageToSendRepository messageToSendRepository)  {
    Long messageId = new Long(41); //this is only for test. the idea is get a list of id and generate a thread group.
    MessageSender sender = SmsSender(messageId, messageToSendRepository);
    sender.start();
} 
```

调用`sendCommunications`代码：

```
ApplicationContext appCont = new ClassPathXmlApplicationContext("appContext.xml");      
ServiceLocator serviceLocator = ServiceLocator.getInstance();
HibernateMessageToSendRepository messageToSendRepository = (HibernateMessageToSendRepository) appCont.getBean("messageToSendRepository");

CommunicationService communication = serviceLocator.getCommunicationService();
communication.sendCommunications(messageToSendRepository); 
```

SmsSender（扩展自 MessageSender（线程））代码：

```
public class SmsSender extends MessageSender {

    public SmsSender(Long messageToSendId, HibernateMessageToSendRepository messageToSendRepository) {
        super(messageToSendRepository);
        MessageToSend messageToSendNew = this.messageToSendRepository.getById(messageToSendId);     
        this.messageToSend = messageToSendNew;
    }

    public void run() {
        try {
            MessageToSendSms messageToSendSms = (MessageToSendSms) this.messageToSend;
            Iterator<CustomerByMessage> itCbmsgs = messageToSendSms.getCustomerByMessage().iterator();          
            while (itCbmsgs.hasNext()) {                
                CustomerByMessage cbm = (CustomerByMessage) itCbmsgs.next();                        

                //sms sending
                this.getGateway().sendSMS(cbm.getBody(), cbm.getCellphone());                       
                cbm.setStatus(CustomerByMessageStatus.SENT_OK);
                cbm.setSendingDate(Calendar.getInstance().getTime());               
            }           

            messageToSendSms.getMessage().setStatus(messageToSendStatus.ALL_MESSAGES_SENT);
            this.messageToSendRepository.update(messageToSendSms);      
        } catch (Exception e) {         
            this.log.error("Error en sms sender " + e.getMessage());
        }

    }
} 
```

`MessageToSendRepository`代码：

```
public void update(MessageToSend messageToSend) {
    try {
        this.getSession().update(messageToSend);
    } catch (HibernateException e) {
        this.log.error(e.getMessage(), e);
        throw e;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:59:19.370

您需要`messageToSendNew`在检索它之后分离它，但在与另一个线程共享它之前。您可以通过调用`Session.close()`休眠会话来分离对象。

请注意，您必须急切地填充您需要的所有字段。

如果您需要使用新会话重新连接它，您可以使用该`merge()`方法。

# php - 用 PHP 检查一个数组是否包含另一个数组

> ID：12936934
> 
> 赞同：8
> 
> 时间：2012-10-17T14:43:58.503
> 
> 标签：php, arrays, multidimensional-array, array-intersect

> **可能重复：**
> [检查一个数组是否包含另一个数组的所有元素](https://stackoverflow.com/questions/12867315/checking-if-an-array-contains-all-elements-of-another-array)

我之前在 Stackoverflow 上发布过类似的内容，但答案并不能完全让我满意。这就是为什么我再次发布问题，但一直在改变问题。

有些人帮助我构建了一个函数，该函数检查`array($GroupOfEight[$i])`作为多维元素的元素是否`array($GroupOfEight)`等于另一个数组（$stackArray），而不考虑数组中的数字顺序。

但是，我需要检查的是所提到的是否在多维中`array($stackArray)`包含任何其他元素，这意味着 main可以包含比.`array($GroupOfEight[$i])``array($GroupOfEight)``array($stackArray)``subarrays($GroupOfEight[$i])`

这是我迄今为止收集的一个工作代码，但需要修改为我想要的版本：

```
 <?php
    $GroupOfEight = array (
                          array(0,1,3,2,4,5,7,6),
                          array(4,5,6,7,15,12,13,14),
                          array(12,13,15,14,8,9,11,10),
                          array(2,6,14,10,3,7,15,11),
                          array(1,3,5,7,13,15,9,11),
                          array(0,4,12,8,1,5,13,9),
                          array(0,1,3,2,8,9,11,10)
                );

    $stackArray = array(0,4,12,1,9,8,5,13,9,2,5,2,10);
    /*$stackArray gets value with POST Method by URL parameter.
    This is just the example. As you see this array contains 
    $GroupOfEight[4], and also it contains many other numbers.*/

    /* The function given below checks if $stackArray equals any
    of the subarrays of $GroupOfEight. However, we want to check
    if $stackArray caontains any of the subarrays of function.
    If it does, function should return the index number, if it
    doesnt it should return -1.*/
    function searcheight($stackArray,$GroupOfEight){
        for($i=0; $i<count($GroupOfEight);$i++){

  $containsSearch = (count(array_intersect($stackArray,$GroupOfEight[$i])) == count($stackArray) && count(array_intersect($stackArray,$GroupOfEight[$i])) == count($GroupOfEight[$i]));
        if($containsSearch){
            return $i; //This specifies which index in GroupOfEight contains a matching array
        }
    }
    return -1;
}

// Calling the function that is given above.
echo searcheight($stackArray,$GroupOfEight);
?> 
```

任何合乎逻辑的想法或解决方案将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T14:51:35.373

这个很快：

```
function contains_array($array){
    foreach($array as $value){
        if(is_array($value)) {
          return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T15:21:35.790

你可以试试

```
$GroupOfEight = array(
        array(0,1,3,2,4,5,7,6),
        array(4,5,6,7,15,12,13,14),
        array(12,13,15,14,8,9,11,10),
        array(2,6,14,10,3,7,15,11),
        array(1,3,5,7,13,15,9,11),
        array(0,4,12,8,1,5,13,9),
        array(0,1,3,2,8,9,11,10));

$stackArray = array(0,4,12,1,9,8,5,13,9,2,5,2,10);

function searcheight($stackArray, $GroupOfEight) {
    $list = array();
    for($i = 0; $i < count($GroupOfEight); $i ++) {
        $intercept = array_intersect($GroupOfEight[$i], $stackArray);
        $len = count($intercept);
        if ($len % 4 == 0) {
            $list[$i] = $len;
        }
    }
    arsort($list);
    if (empty($list))
        return - 1;
    return key($list);
}
echo searcheight($stackArray, $GroupOfEight); 
```

输出

```
5 
```

# .net - 同一域的不同身份验证 cookie

> ID：12936939
> 
> 赞同：2
> 
> 时间：2012-10-17T14:44:10.247
> 
> 标签：.net, authentication

我正在使用.net 4。

我们有一个网站，有用户登录和管理员登录

例如：

*   `www.mysite.com`这是用户登录的地方；
*   `www.mysite.com/admin`这是我们的支持团队登录的地方；

问题是身份验证cookie在文件夹之间共享（自然）

我如何为我们的管理员用户提供一个不适用于用户使用的网站的登录信息？

我的验证码：

```
public static void SetAuthenticationTicket(string userName, string userRole, string isPersistent)
    {
        Boolean defaultPresistant = false;
        Boolean bPresistent = Boolean.TryParse(isPersistent, out defaultPresistant);
        var ticket = new FormsAuthenticationTicket(1, 
                                                userName, 
                                                DateTime.Now, 
                                                DateTime.Now.AddMinutes(60),
                                                bPresistent, 
                                                "Role=" + userRole,
                                                FormsAuthentication.FormsCookiePath);

        var encTicket = FormsAuthentication.Encrypt(ticket);

        var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket);
       HttpContext.Current.Response.Cookies.Add(cookie);
    } 
```

我可以添加一些参数来创建两个不同的登录会话吗？

# php - php CURL 不适用于动态 URL

> ID：12936940
> 
> 赞同：3
> 
> 时间：2012-10-17T14:44:13.513
> 
> 标签：php, curl, get, dynamic-url

我不知道为什么 CURL 没有找到这个 URL。CURL 引擎只是被带到一个 400 错误页面。

我的代码非常简单，并且与非动态 URL 配合得非常好。

我希望它很容易被发现，例如，缺少 CURL 选项。

我试过使用 $url = urlencode($url) 但这也没有用。

这是代码：

```
$url = 'http://www.destinations-uk.com/accommodations.php?link=accommodations&country=england&category=Reviews&id=1';
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,            $url);
curl_setopt($ch, CURLOPT_HEADER,         true);
curl_setopt($ch, CURLOPT_NOBODY,         true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($ch, CURLOPT_TIMEOUT,        15);
$r = curl_exec($ch);
$r = explode("\n", $r);
$keys = array();
if(!empty($r)) $keys[] = array_shift($r);
foreach($r as $line){
    preg_match('/.+:\s/',$line,$match);
    if($match) $keys[substr($match[0],0,-2)] = preg_replace('/.+:\s/','', $line);
}
print_r($keys); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:49:31.087

也许，这是在服务器端为防止自动请求所做的事情。

# javascript - 几个生成的 div 中最后一个的 onmouseover 在 IE 中不起作用

> ID：12936944
> 
> 赞同：5
> 
> 时间：2012-10-17T14:44:21.983
> 
> 标签：javascript, internet-explorer, mouseevent, onmouseover

我有一个 JavaScript 函数：

```
function addTool(id, text, tool, pic) {
   var container = getById('infobox');
   var origimg = getById('tempimg').src;
   container.innerHTML += "<div id='" + id + "' class='toolText'>" + text + "<br><img      class='toolImg' src='img/tools/" + tool + "'></div>";
   getById(id).setAttribute('onMouseOver', "mOver('"+ id +"', '" + pic + "');");
   getById(id).setAttribute('onMouseOut', "mOut('"+ id +"', '" + origimg + "');");
   getById(id).setAttribute('href', 'javascript:mClick(id);');
} 
```

使用以下代码生成几个`div`s：

```
addTool("1p", "Bar", "tool1.jpg", 'img/p&g-part-2_skiss1-2.jpg');
addTool("2p", "Tube", "tool1.jpg", 'img/p&g-part-2_skiss1-2.jpg');
addTool("3p", "Rotating", "tool1.jpg", 'img/p&g-part-2_skiss1-2.jpg'); 
```

鼠标事件在除 IE 之外的所有主要浏览器中都能正常工作。似乎`div`除了最后一个之外的所有 s 都将具有小写的鼠标事件，这将具有与所写完全相同的鼠标事件，并带有大写字母。
除了最后一个，所有鼠标事件都将触发`div`，即使我写`onmouseover`而不是 say `ONmouseOVER`，这在除最后一个之外的所有事件上都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T06:53:41.183

正如@epascarello 指出的那样，似乎`setAttribute`是罪魁祸首，所以我通过将事件设置为内​​联来解决它，例如：

```
function addTool(id, text, tool, pic) {
    var container = getById('infobox');
    var origimg = getById('tempimg').src;
    container.innerHTML += "<div id='" + id + "' class='toolText'"  +
    "onmouseover=\"mOver('"+ id +"', '" + pic + "');\" "            +
    "onmouseout=\"mOut('"+ id +"', '" + origimg + "');\" "          +
    "onclick=\"mClick(id);\""                                       +
    ">" + text + "<br><img class='toolImg' src='img/tools/" + tool + "'></div>";
} 
```

在包括 IE 在内的所有浏览器中都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:58:20.777

不要使用 setAttribute 添加事件。使用[attachEventListener/addEvent](http://www.quirksmode.org/js/events_advanced.html)

您遇到的问题是将元素添加到 div。每次添加新元素时，您基本上都会将其擦掉。那很不好。您应该使用[appendChild](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)向 div 添加新内容。

**基本思路：**

```
function attachEvent(elem, eventName, fn) {
    if ( elem.attachEvent ) {
        elem.attachEvent( 'on' + eventName, fn);
    } else {
        elem.addEventListener( eventName, fn, false );
    }
}

function addTool(text, message) {

   var container = document.getElementById('infobox');
   var newTool = document.createElement("a");
   newTool.innerHTML = text;
   newTool.href="#";
   var myClickFnc = function(e) {
       alert(message);
       return false;
   }
   attachEvent(newTool, "click", myClickFnc);
   container.appendChild(newTool);
}

addTool("cat","meow");
addTool("dog","bark");
addTool("pig","oink"); 
```

[运行示例](http://jsfiddle.net/Gdfds/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-17T15:00:01.170

你可以用 JQuery 做这部分：

```
$("#"+ id).mouseover(function() {
  mOver('"+ id +"', '" + pic + "');
}); 
```

你甚至可以更进一步：

[https://stackoverflow.com/a/4158203/190596](https://stackoverflow.com/a/4158203/190596)

# php - 在按下提交按钮之前表单提交数据

> ID：12936948
> 
> 赞同：1
> 
> 时间：2012-10-17T14:44:28.593
> 
> 标签：php, mysql, sql, forms

我有一个表单/页面，似乎在页面加载时提交了表单数据。如果您单击“添加记录”，它会加载页面并在数据库中创建一个新条目，而无需输入任何信息。如果您填写表格，它会按需要工作，但会创建和附加记录。什么会导致表单“加载”提交？我也对网站的其他区域使用相同的表格，没有问题，但数据存储到不同的表中。

我的代码

```
 <?

    if(isset($_POST['title'])) {
        if(isset($_POST['gallery_1'])) {
            $gallery_1 = $_POST['gallery_1'];
        }
        if(isset($_POST['gallery_2'])) {
            $gallery_2 = $_POST['gallery_2'];
        }
            if(isset($_POST['gallery_3'])) {
            $gallery_3 = $_POST['gallery_3'];
        }
            if(isset($_POST['gallery_4'])) {
            $gallery_4 = $_POST['gallery_4'];
        }
            if(isset($_POST['gallery_5'])) {
            $gallery_5 = $_POST['gallery_5'];
        }

            if(isset($_POST['download_1'])) {
            $download_1 = $_POST['download_1'];
        }

            if(isset($_POST['download_2'])) {
            $download_2 = $_POST['download_2'];
        }

            if(isset($_POST['download_3'])) {
            $download_3 = $_POST['download_3'];
        }

        $title = $_POST['title'];
        $title_gallery = $_POST['title_gallery'];
        $date = $_POST['date'];
        $introduction = $_POST['introduction'];
        $download_1_title = $_POST['download_1_title'];
        $download_2_title = $_POST['download_2_title'];
        $download_3_title = $_POST['download_3_title'];
        $dropbox_title = $_POST['dropbox_title'];
        $dropbox_info = $_POST['dropbox_info'];
        $dropbox_link = $_POST['dropbox_link'];
        $video_title = $_POST['video_title'];
        $video = $_POST['video'];

        $handle = new Upload($_FILES['gallery_1']);
            if ($handle->uploaded) {
                $handle->file_max_size = 4000000;
                $handle->image_resize = true;
                $handle->image_ratio = true;
                $handle->image_ratio_crop = true;
                $handle->image_y = 407;
                $handle->image_x = 460;
                $handle->allowed = array('image/pjpeg','image/jpeg', 'image/jpg');
                $handle->Process($dir_dest);
                if ($handle->processed) {
                    echo 'issue image 1 uploaded ' . round(filesize($handle->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $gallery_1 = $dir_pics.'/' . $handle->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading image 1<br />';
                    echo '  Error: ' . $handle->error . '<br /><br />';
                }
                $handle-> Clean();
            }

            $handle2 = new Upload($_FILES['gallery_2']);
            if ($handle2->uploaded) {
                $handle2->file_max_size = 4000000;
                $handle2->image_resize = true;
                $handle2->image_ratio = true;
                $handle2->image_ratio_crop = true;
                $handle2->image_y = 307;
                $handle2->image_x = 460;
                $handle2->allowed = array('image/pjpeg','image/jpeg', 'image/jpg');
                $handle2->Process($dir_dest);
                if ($handle2->processed) {
                    echo 'issue image 2 uploaded ' . round(filesize($handle2->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $gallery_2 = $dir_pics.'/' . $handle2->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading image 2<br />';
                    echo '  Error: ' . $handle2->error . '<br /><br />';
                }
                $handle2-> Clean();
            }

            $handle3 = new Upload($_FILES['gallery_3']);
            if ($handle3->uploaded) {
                $handle3->file_max_size = 4000000;
                $handle3->image_resize = true;
                $handle3->image_ratio = true;
                $handle3->image_ratio_crop = true;
                $handle3->image_y = 307;
                $handle3->image_x = 460;
                $handle3->allowed = array('image/pjpeg','image/jpeg', 'image/jpg');
                $handle3->Process($dir_dest);
                if ($handle3->processed) {
                    echo 'issue image 3 uploaded ' . round(filesize($handle3->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $gallery_3 = $dir_pics.'/' . $handle3->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading image 3<br />';
                    echo '  Error: ' . $handle3->error . '<br /><br />';
                }
                $handle3-> Clean();
            }

            $handle4 = new Upload($_FILES['gallery_4']);
            if ($handle4->uploaded) {
                $handle4->file_max_size = 4000000;
                $handle4->image_resize = true;
                $handle4->image_ratio = true;
                $handle4->image_ratio_crop = true;
                $handle4->image_y = 307;
                $handle4->image_x = 460;
                $handle4->allowed = array('image/pjpeg','image/jpeg', 'image/jpg');
                $handle4->Process($dir_dest);
                if ($handle4->processed) {
                    echo 'main image for issue uploaded ' . round(filesize($handle4->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $gallery_4 = $dir_pics.'/' . $handle4->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading the main image<br />';
                    echo '  Error: ' . $handle4->error . '<br /><br />';
                }
                $handle4-> Clean();
            }

            $handle5 = new Upload($_FILES['gallery_5']);
            if ($handle5->uploaded) {
                $handle5->file_max_size = 4000000;
                $handle5->image_resize = true;
                $handle5->image_ratio = true;
                $handle5->image_ratio_crop = true;
                $handle5->image_y = 307;
                $handle5->image_x = 460;
                $handle5->allowed = array('image/pjpeg','image/jpeg', 'image/jpg');
                $handle5->Process($dir_dest);
                if ($handle5->processed) {
                    echo 'map image for issue uploaded ' . round(filesize($handle5->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $gallery_5 = $dir_pics.'/' . $handle5->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading the map image<br />';
                    echo '  Error: ' . $handle5->error . '<br /><br />';
                }
                $handle5-> Clean();
            }

            $handle6 = new Upload($_FILES['download_1']);
            if ($handle6->uploaded) {
                $handle6->file_max_size = 4000000;
                $handle6->allowed = array('application/*', 'image/*');
                $handle6->Process($dir_dest);
                if ($handle6->processed) {
                    echo 'download one uploaded' . round(filesize($handle6->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $download_1 = $dir_pics.'/' . $handle6->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading download one<br />';
                    echo '  Error: ' . $handle6->error . '<br /><br />';
                }
                $handle6-> Clean();
            }

            $handle7 = new Upload($_FILES['download_2']);
            if ($handle7->uploaded) {
                $handle->file_max_size = 4000000;
                $handle->allowed = array('application/*', 'image/*');
                $handle7->Process($dir_dest);
                if ($handle7->processed) {
                    echo 'download two uploaded' . round(filesize($handle7->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $download_2 = $dir_pics.'/' . $handle7->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading download two<br />';
                    echo '  Error: ' . $handle7->error . '<br /><br />';
                }
                $handle7-> Clean();
            }

            $handle8 = new Upload($_FILES['download_3']);
            if ($handle8->uploaded) {
                $handle->file_max_size = 4000000;
                $handle->allowed = array('application/*', 'image/*');
                $handle8->Process($dir_dest);
                if ($handle8->processed) {
                    echo 'download three uploaded' . round(filesize($handle8->file_dst_pathname)/256)/4 . 'KB<br /><br />';
                    $download_3 = $dir_pics.'/' . $handle8->file_dst_name ;
                } else {
                    echo '  the following error occurred while uploading download three<br />';
                    echo '  Error: ' . $handle8->error . '<br /><br />';
                }
                $handle8-> Clean();
            }

        }

        $query = mysql_query("INSERT INTO news  (
id ,
title ,
title_gallery ,
date ,
introduction ,
gallery_1 ,
gallery_2 ,
gallery_3 ,
gallery_4 ,
gallery_5 ,
download_1 ,
download_2 ,
download_3 ,
download_1_title ,
download_2_title ,
download_3_title ,
dropbox_title ,
dropbox_info ,
dropbox_link ,
video_title ,
video
) VALUES

(NULL,
'$title',
'$title_gallery',
'$date',
'$introduction',
'$gallery_1',
'$gallery_2',
'$gallery_3',
'$gallery_4',
'$gallery_5',
'$download_1',
'$download_2',
'$download_3',
'$download_1_title',
'$download_2_title',
'$download_3_title',
'$dropbox_title',
'$dropbox_info',
'$dropbox_link',
'$video_title',
'$video');");

if($query) {
            $message = $title . " has been added";
        }else{
            $message = "an error occurred while updating this entry";
        }

    ?>
    </p>

    <? if(isset($_POST['title'])) { ?>
            <div id="content_holder">
              <p style="text-align:center;padding-top:20px;">
              <strong><? echo $message; ?></strong><br/>
              <span class="error"><? if($error_message) { echo $error_message; } ?></span>
              Add another <a href="add.php">Record/Item</a></p>
            <!-- end content_holder -->
            </div>
       <? }else{ ?> 
```

形式...和右括号...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T14:49:39.837

您的`INSERT`查询超出了您的`if(isset($_POST['title']))`陈述。每次加载页面时都会插入一行，其中包含空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:46:44.943

是否有可能在 php 方面您不检查表单是否已提交，而只是在每次页面加载时盲目地从空数据创建新记录？

编辑：正是。mysql 查询不运行什么。在其周围放置一个 if 以确保已提交表单。

# css - TextBox 在 silverlight 中不显示任何文本

> ID：12936950
> 
> 赞同：0
> 
> 时间：2012-10-17T14:44:34.740
> 
> 标签：css, silverlight, silverlight-4.0

我在文本框中显示文本，有时它根本不显示文本。Richtexteditor 正在将文本保存到数据库中，并且每当 Richtexteditor 以 Typography 方式保存文本时，文本将不会显示，否则会显示。我不明白为什么会这样。它只是一个观察。我不是 100% 确定这是问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:06:53.703

如果richtextbox以Typography方式保存，那么如果是silverlight的4.xx版本，它就不会在文本框中显示文本。如果是 5.xx 版本，它显示得很好。我刚刚升级了silverlight，它开始工作正常。

# google-chrome-extension - chrome.extension.onMessage.addListener 无法读取未定义的属性“onMessage”

> ID：12936953
> 
> 赞同：8
> 
> 时间：2012-10-17T14:44:42.507
> 
> 标签：google-chrome-extension

在`background.html`：

```
chrome.tabs.query({active:true, currentWindow:true},function(tabs){
  chrome.tabs.sendMessage(tabs[0].id,"target.js");
}); 
```

在`content.js`：

```
chrome.extension.onMessage.addListener(function(msg,sender,sendResponse){
  if (msg == "target.js"){
    extensionID = sender.id;
  }
}); 
```

但是，它不起作用；

```
Uncaught TypeError: Cannot read property 'onMessage' of undefined 
```

如何使它正确？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-21T15:22:40.410

您说“content.js 是一个内容脚本，它被另一个内容脚本注入到当前选项卡中。”。

这就是你的问题。注入的脚本在页面上下文中执行（就好像它们是由页面本身创建的一样），因此它们无法访问任何 Chrome 扩展 API。

您可以使用自定义事件或`postMessage`在页面和内容脚本之间进行通信，而内容脚本又与背景页面进行通信。

例如，请参阅这个基本示例：

```
 // Injected script script
    addEventListener('message', function(event) {
        if (event.data && event.data.extensionMessage) {
            alert(event.data.extensionMessage);
        }
    });
    // Content script which injects the script:
    chrome.extension.onMessage.addListener(function(message) {
        postMessage({extensionMessage: message}, '*');
    }); 
```

我认为您希望将其`content.js`用作真实的内容脚本，而不是注入的脚本。如果您想了解注入脚本和内容脚本之间的区别，请参阅[Chrome 扩展代码 vs 内容脚本 vs 注入脚本](https://stackoverflow.com/questions/9915311/chrome-extension-code-vs-content-scripts-vs-injected-scripts/9916089#9916089)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T19:04:47.787

看起来您正在尝试对当前选项卡执行一些操作。你确定你需要一个消息来做到这一点？我假设 background.html 是您的扩展程序的背景页面，而 content.js 是您的内容脚本。现在我跳过 background.html 页面，只为我的背景页面运行一个 javascript 文件。我的 manifest.json 页面看起来像这样。

```
 "background": {
     "scripts": [ "js/background.js"]
  }, 
```

在该页面中，我将消息侦听器添加到我的背景页面，因为这是我知道与 background.js 文件交互的唯一方式。但是，在您的情况下，执行操作的是背景页面，因此您可以使用 chrome.tab 方法直接修改当前选项卡。代替 onMessage，您可以尝试一些 executeScript，其中 InjectDetails 是 javascript 或您想要执行的任何内容。

```
chrome.tabs.query({active:true, currentWindow:true},function(tabs){
         chrome.tabs.executeScript(tabs[0].id, InjectDetails);
}); 
```

[在这里](http://developer.chrome.com/extensions/tabs.html#method-executeScript)查看更多信息。

# jquery - jQuery UI Dialog 如何禁用对后台输入的关注？

> ID：12936954
> 
> 赞同：9
> 
> 时间：2012-10-17T14:44:44.580
> 
> 标签：jquery, jquery-ui, jquery-tools

当您使用 jQuery UI 打开一个模态对话框时，您会注意到如果您使用 Tab 键，您可以专注于对话框的按钮，但对话框之外的任何输入都将被忽略。[我正在尝试使用jQuery UI Tools Overlay](http://jquerytools.org/demos/overlay/modal-dialog.html)实现相同的行为，但我不确定 jQuery UI 是如何做到的。它似乎没有将元素的选项卡索引设置为 -1，此外，这样做会非常乏味，因为它需要找到所有不属于对话框的可聚焦元素。如果您需要自动化，这将不是很好。有没有办法禁用除少数之外的所有页面元素的焦点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T15:04:26.257

对话框小部件实际上处理`keypress`事件并执行自己的`Tab`键处理。此处理忽略对话框外的可选项卡元素。

相关的源代码（[本文发布时当前版本的第](https://github.com/jquery/jquery-ui/blob/1.8/ui/jquery.ui.dialog.js)286 至 305 行）是：

```
// prevent tabbing out of modal dialogs
if (options.modal) {
    uiDialog.bind('keypress.ui-dialog', function(event) {
        if (event.keyCode !== $.ui.keyCode.TAB) {
            return;
        }

        var tabbables = $(':tabbable', this),
            first = tabbables.filter(':first'),
            last  = tabbables.filter(':last');

        if (event.target === last[0] && !event.shiftKey) {
            first.focus(1);
            return false;
        } else if (event.target === first[0] && event.shiftKey) {
            last.focus(1);
            return false;
        }
    });
} 
```

请注意，TrueBlueAussie 的评论是正确的，并且对话框小部件的发布用于绑定到错误的事件。`keydown`应该使用而不是`keypress`：

```
uiDialog.bind('keydown.ui-dialog', function(event) {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T15:04:49.497

这是处理此问题的代码块：

```
// prevent tabbing out of modal dialogs
this._on(uiDialog, {
    keydown: function(event) {
        if (!options.modal || event.keyCode !== $.ui.keyCode.TAB) {
            return;
        }
        var tabbables = $(":tabbable", uiDialog),
            first = tabbables.filter(":first"),
            last = tabbables.filter(":last");
        if (event.target === last[0] && !event.shiftKey) {
            first.focus(1);
            return false;
        } else if (event.target === first[0] && event.shiftKey) {
            last.focus(1);
            return false;
        }
    }
});​ 
```

看起来 jQuery UI`:tabbable`向 jQuery 选择器引擎添加了一个过滤器 ( )，并且当对话框处于活动状态时，它只允许选项卡在模式的可选项卡元素之间循环。

代码来自：[https ://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.dialog.js)

# c++ - C++ - 使用 std::vector 和相关内存管理的正确方法

> ID：12936956
> 
> 赞同：1
> 
> 时间：2012-10-17T14:44:49.740
> 
> 标签：c++, memory-management, stdvector

嗨，我想问一个让我困惑的问题。

我有这样的课：

```
class A { 

private:
std::vector<Object*>* my_array_;

...

public
std::vector<Object*>& my_array(); // getter
void my_array(const std::vector<Object*>& other_array); // setter
}; 
```

根据您的经验，我想问您，以（可能）安全的方式实现 setter 和 getter 的正确方法是什么。

我想到的第一个解决方案如下。

首先，当我实现 setter 时，我应该： A）检查输入不是对我已经持有的数据结构的引用；B) 释放 my_array_ 指向的所有对象的内存 C) 复制 other_array 指向的每个对象并将其副本添加到 my_array_ D) 最后结束函数。

getter 可能会生成内部数组的副本，以防万一。

问题很多： - 这种策略是不是矫枉过正？- 真的能避免问题吗？- 有人真的使用它还是有更好的方法？

我试图寻找这个问题的答案，但没有发现什么特别关注这个问题。

* * *

使用智能指针是一个很好的答案，我感谢你们俩.. 看来我不能给多个“有用的答案”，所以我提前道歉。:-)

然而，从你的回答中提出了一个新的疑问。当我对对象使用包含 unique_ptr 的向量时，我将不得不定义一个深拷贝构造函数。鉴于现在我们正在使用智能指针，有没有比使用迭代器复制对象向量中的每个元素更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:20:10.100

我认为您将*指针* `std::vector`作为数据成员的事情过于复杂了；请记住，C++ 不是 Java（C++ 更基于“价值”而不是基于“引用”）。

除非有充分的理由使用指向 a`std::vector`作为数据成员的指针，否则我只会使用简单的`std::vector`“按值”存储。

现在，关于 中的`Object*`指针`vector`，您应该问自己：那些是**观察**指针还是那些**拥有**指针？

如果`vector`只是*观察*到`Object`s （并且它们归其他人所有，例如对象池分配器或其他东西），您可以使用原始指针（即 simple `Object*`）。但是如果向量在 s 上有一些所有权语义`Object`，你应该使用`shared_ptr`or`unique_ptr` *智能*指针。如果向量是实例的唯一所有者，*请*使用; 否则，使用（它使用*引用计数*机制来管理对象生命周期）。`Object``unique_ptr``shared_ptr`

 *```
class A 
{ 
public:
  // A vector which owns the pointed Objects
  typedef std::vector<std::shared_ptr<Object>> ObjectArray;

  // Getter
  const ObjectArray& MyArray() const
  {
      return m_myArray
  }

  // Setter 
  // (new C++11 move semantics pattern: pass by value and move from the value)
  void MyArray(ObjectArray otherArray)
  {
      m_myArray = std::move(otherArray);
  }

private:
  ObjectArray m_myArray;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T14:48:00.357

我通常建议不要使用指向向量的指针作为成员，但从你的问题来看，它似乎在多个实例之间共享。

也就是说，我会选择：

```
class A { 
private:
   std::shared_ptr<std::vector<std::unique_ptr<Object> > > my_array_;

public
   std::shared_ptr<std::vector<std::unique_ptr<Object> > >  my_array(); // getter
   void my_array(std::shared_ptr<std::vector<std::unique_ptr<Object> > >  other_array); // setter
}; 
```

无需检查，没有内存管理问题。

如果内部`Object`s 也被共享，请使用 a`std::shared_ptr`而不是`std::unique_ptr`.*

# iphone - iOS 复制 SQLite 数据库并将其从 iCloud 中排除

> ID：12936960
> 
> 赞同：3
> 
> 时间：2012-10-17T14:45:02.420
> 
> 标签：iphone, objective-c, ios, xcode, icloud

我的应用程序刚刚被拒绝，因为我在 NSDocumentDirectory 中复制了 sqlite 数据库并且没有将其排除在同步到 iCloud 之外。我尝试添加代码以将其从 iCloud 中排除，但它仍在 iCloud 中占用相同的空间。这是我的代码。

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL {
    if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else { // iOS >= 5.1
        NSError *error = nil;
        [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
        return error == nil;
    }
}

+ (void)copyDatabaseIfNeeded {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;
    NSString *toPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:toPath];

    if(!success) {
        NSString *fromPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

        NSURL *toURL = [NSURL fileURLWithPath:toPath];
        NSURL *fromURL = [NSURL fileURLWithPath:fromPath];

        [[NSFileManager defaultManager] addSkipBackupAttributeToItemAtURL:toURL];
        [[NSFileManager defaultManager] addSkipBackupAttributeToItemAtURL:fromURL];

        success = [fileManager copyItemAtURL:fromURL toURL:toURL error:&error];

        if (!success) 
            NSLog(@"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }   
}

+ (NSString *)getDBPath {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [paths objectAtIndex:0];

    return [documentsDir stringByAppendingPathComponent:databaseName];
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-17T14:56:59.653

您在处理文件之前将跳过属性设置为文件，因为文件尚未复制到那里，文件管理器无法更改该文件的属性：

此外，您没有调用`addSkipBackupAttributeToItemAtURL:`on self ，而是在`NSFileManager`其上声明了此方法。

如果您将其声明为实例方法，则可以 `addSkipBackupAttributeToItemAtURL:`从类方法中将其更改`+`为使其成为类方法。

将其更改为：

```
+ (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL {
    if (&NSURLIsExcludedFromBackupKey == nil) { // iOS <= 5.0.1
        const char* filePath = [[URL path] fileSystemRepresentation];

        const char* attrName = "com.apple.MobileBackup";
        u_int8_t attrValue = 1;

        int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
        return result == 0;
    } else { // iOS >= 5.1
        NSError *error = nil;
        [URL setResourceValue:[NSNumber numberWithBool:YES] forKey:NSURLIsExcludedFromBackupKey error:&error];
        return error == nil;
    }
}

+ (void)copyDatabaseIfNeeded {
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error = nil;
    NSString *toPath = [self getDBPath];
    BOOL success = [fileManager fileExistsAtPath:toPath];

    if(!success) {
        NSString *fromPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:databaseName];

        NSURL *toURL = [NSURL fileURLWithPath:toPath];
        NSURL *fromURL = [NSURL fileURLWithPath:fromPath];
        success = [fileManager copyItemAtURL:fromURL toURL:toURL error:&error];

        if (success) {
                [self addSkipBackupAttributeToItemAtURL:toURL];
        } else {
            NSLog(@"Failed to create writable database file with message '%@'.", [error localizedDescription]);
        }
    }   
} 
```

* * *

另外我的评论说我删除了，`[[NSFileManager defaultManager] addSkipBackupAttributeToItemAtURL:fromURL];`因为该文件不会包含在 iCloud 备份中，并且捆绑包中的 b 文件是只读的，不能在那里进行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:05:02.487

请参阅[技术问答 QA1719](http://developer.apple.com/library/ios/#qa/qa1719/_index.html)，其中描述了建议您使用的技术`addSkipBackupAttributeToItemAtURL`适用于 iOS 5.0.1 及更早版本。对于 iOS 5.1 及更高版本，您应该使用以下内容：

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }
    return success;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:48:39.033

我正在与一位 Apple 支持人员通电话讨论此事。

但是，这个答案不是重复的东西，而是很好地涵盖了它：[设置 NSDocumentDirectory 所以它不会备份到 iCloud](https://stackoverflow.com/questions/12113426/setting-nsdocumentdirectory-so-it-doesnt-backup-to-icloud?rq=1)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-17T15:01:58.357

NSDocumentDirectory 与 iCloud 无关。iOS 应用程序的文档目录根本不会自动备份到 iCloud。它与以往一样，只是您的应用程序的沙箱目录。

仅当满足以下条件时，才将内容存储在 iCloud 中：

您的应用程序具有指定 iCloud 沙盒容器名称的权利

您的用户已在其设备上登录 iCloud

您显式地获取了 ubiquity 容器的文档目录并将内容存储在那里。

因此，如果您不想在 iCloud 中存储某些内容，请不要获取 ubiquity 容器的文档目录，根本不要连接到 iCloud...

此外，iCloud 备份甚至不是用户设置的应用程序级别设置，所以我不知道为什么你甚至启用了 iCloud。只需将您的数据放在数据目录中，Apple 就没有问题。

# c# - RavenDB 中的自定义密钥生成

> ID：12936961
> 
> 赞同：1
> 
> 时间：2012-10-17T14:45:04.427
> 
> 标签：c#, nosql, ravendb, document-database

我有一组实体，它们都是从抽象类派生的

```
public abstract class NamedEntity : INamedEntity
{
    #region Public Properties

    public string Description { get; set; }

    public string Id { get; set; }

    public string Name { get; set; }

    #endregion
} 
```

当我持久化所有实体时，我想将`Name`字段用作键，因此我覆盖`DocumentKeyGenerator`并提供了这样的实现：

```
 store.Conventions.DocumentKeyGenerator = entity =>
        {
            var namedEntity = entity as NamedEntity;

            if (namedEntity != null)
            {
                return string.Format("{0}/{1}", store.Conventions.GetTypeTagName(entity.GetType()), namedEntity.Name);
            }

            return string.Format("{0}/", store.Conventions.GetTypeTagName(entity.GetType()));
        }; 
```

当我第一次持久化实体列表时它工作正常，但如果我想再次持久化它们，我会遇到异常

```
PUT attempted on document 'xxxxx' using a non current etag 
```

我刚开始使用 RavenDB，所以我不明白我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T17:09:31.577

只是一个猜测，但这可能与您的密钥生成无关，而是您如何存储它们。

在第一次使用时，你可能有类似的东西：

```
var myEntity = new MyEntity(...);
session.Store(myEntity);
...
session.SaveChanges(); 
```

那部分很好，但在以后的使用中，你不应该做同样的事情。相反，它应该更像这样：

```
var myEntity = session.Load<MyEntity>("myentities/foobar");
myEntity.Something = 123;
...
session.SaveChanges(); 
```

`.Store()`请注意，进行更改时不会调用。这是因为实体被会话“跟踪”，并且在您调用时会自动保留对它的所有更改`.SaveChanges()`

# javascript - KnockoutJS 无法将输入字段设置为假值

> ID：12936965
> 
> 赞同：2
> 
> 时间：2012-10-17T14:45:18.137
> 
> 标签：javascript, knockout.js, observable

如何将 an 的值设置`<input>`为**false**？**真正的**作品很好。

模型：

```
function Model(){
   self = this;
   self.Test = ko.observable(false);
}; 
```

HTML：

```
<input type="text" data-bind="value:Test"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:47:31.167

An`<input type="text">`需要一个文本值，而您提供的是一个布尔值。

布尔值`false`在传入 value 属性时考虑为“falsey”，这与*不*提供值相同，因此它显示为空白。

它的工作原理是`true`因为你最终得到`true.toString()`

# .net - 在更改可见性或重新创建控件之间进行选择

> ID：12936968
> 
> 赞同：1
> 
> 时间：2012-10-17T14:45:29.583
> 
> 标签：.net, wpf, user-interface

> **可能重复：**
> [如何设计具有多个接口的 wpf 应用程序](https://stackoverflow.com/questions/3127620/how-to-design-a-wpf-application-with-multiple-interfaces)

我正在构建一个时事通讯应用程序。首先，当程序启动时，会显示两个主要按钮——“消息”和“收件人”。无论单击什么，都会显示另一个内容。

我的问题是：我应该隐藏/关闭第一个窗口并创建/使另一个窗口可见还是只是更改控件的可见性？

我有不同的想法，因为对于像我这样的小型应用程序，更改控件的可见性似乎就足够了。但是，我实际上不知道边界在哪里，以及应用程序是否足够小。单击“消息”后，将显示消息列表，其中包含用于操作它们的各种选项 - 浏览、删除、编辑、添加、排序、过滤等。另一个按钮的作用几乎相同，但带有收件人。

常规方法是什么？在我的情况下有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:10:15.443

我认为您不会考虑性能或速度，因为无论如何这几乎都是瞬时的。

我认为正确的“方法”是拥有一个可以显示项目列表（我在想`ItemsControl`）并将其绑定到自定义模型对象的可观察列表的通用控件。这些模型对象将在其中包含文本，并具有从 GUI 调用的方法，如,`browse`等（我在想s）。当您显示一种类型的项目时，您只需将 ObservableList（您在后台逻辑中的某处创建）放入 DataContext 以便可以显示它。`delete``edit``Command``ItemsControl`

这是通常用于 WPF 应用程序的常规 MVVM 方法。如果您想保持简单或者您没有 MVVM 经验（并且不想获得一些经验），我认为您是否更改可见性或例如使用 TabControl 并将您的视图放在不同的选项卡中并不重要.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T16:34:10.567

WPF 会卸载不可见的项目，因此更改可见性以隐藏项目实际上会卸载控件，并再次显示它会重新加载它。这意味着两者之间的性能差异非常相似，因为唯一真正的区别是创建对象本身。

我通常的偏好是使用一个绑定到任何对象`ContentControl`的单一对象，并在需要时将其交换为不同的对象。这消除了完全搞乱可见性或窗口管理的需要，这让我的生活更轻松。`Content``ActiveWindow``ActiveWindow`

但这绝对不是“规则”。我通常会做最适合应用程序流的任何事情，并且只有在加载/卸载控件时发现显着的性能影响时才会担心它（无论我是否创建新项目或切换其可见性都会发生这种情况）。

在那些特殊情况下，我使用[自定义扩展`TabControl`](https://stackoverflow.com/a/12824709/302677)，它将`ContentPresenter`每个项目的 存储在内存中，并在需要再次显示时从内存中重新加载它，而不是重新创建它。这修复了重绘控件的性能延迟，但它确实使应用程序使用更多内存，所以我只有在切换视图时真正注意到性能问题时才使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:56:16.803

您必须根据自己的喜好、速度或内存消耗来决定。

*   仅更改控件的可见性时，您将获得最佳**速度**，因为您不必在展示它们时重新构建它们。
*   当您只保留那些您实际显示在内存中的控件时，您将获得更少的**内存占用。**

对于您这样的小型应用程序，我不会太担心。很有可能当控件真的很小时，您甚至都无法注意到速度或内存的差异。

# jquery - 如何在 Colorbox 上自动设置高度？

> ID：12936970
> 
> 赞同：10
> 
> 时间：2012-10-17T14:45:35.057
> 
> 标签：jquery, height, colorbox

我正在使用一个名为 ColorBox 的 jQuery 插件，基本上它创建了一个 jquery 模态，但是模态的固定大小高度为“500”，我希望它有一个最小高度，但我在模态中有扩展菜单，所以我想to 自动展开。我该怎么做呢？
我目前拥有的代码是：

```
$(".colorboxlink1").colorbox({
  opacity:"0.2",
  width:"450",
  height:"500",
  title:"To close this dialog click X icon at the right", 
  iframe:true
}); 
```

Iv 尝试从中删除高度并使用 CSS，但这没有用。我尝试将我所知道的 jquery 放在这一行中，但似乎没有任何效果，但是我对 jQuery 很陌生。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T15:07:02.930

你可以使用这个：

```
$('.colorboxlink1').colorbox({ 
    onComplete : function() { 
       $(this).colorbox.resize(); 
    }    
}); 
```

在初始化颜色框后，这在您的代码中：

```
$.colorbox.resize(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-20T19:51:23.837

我有类似的情况，我使用 setTimeout 函数给颜色框一些时间来加载，然后调用 resize 方法。

我打电话给彩盒

```
var profileHeight=jQuery('#profile').height(); //Get the height of the container     
    setTimeout(function (){
       jQuery.colorbox({
           html:jQuery('#profile').html(),
           width:'50%',
           height:profileHeight, 
           opacity:0.5})}
        , 600);
//Wait 700ms then resize
setTimeout(function(){jQuery(this).colorbox.resize();},700); 
```

这让我得到了我需要的功能。模态窗口总是根据容器的内容调整大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-08T11:01:54.987

使用当前版本的 ColorBox，您可以指定百分比的最大尺寸：

```
$(".colorboxlink1").colorbox({
    maxWidth: '95%',
    maxHeight: '95%'
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-05T08:31:07.767

您可以绑定这样的事件，然后调用调整大小：

```
$(document).bind('cbox_complete', function() {
    $.colorbox.resize(); 
}); 
```

寻找“事件挂钩”，看看你还能在这里绑定什么：[http ://www.jacklmoore.com/colorbox/](http://www.jacklmoore.com/colorbox/)

# perl - 从数组哈希中读取列

> ID：12936971
> 
> 赞同：0
> 
> 时间：2012-10-17T14:45:37.220
> 
> 标签：perl, hash, perl-data-structures

我是 perl 的新手，并且有一个关于使用数组哈希来检索特定列的问题。我的代码如下：

```
my %hash = ( name1 => ['A', 'A', 'B', 'A', 'A', 'B'],
             name2 => ['A', 'A', 'D', 'A', 'A', 'B'],
             name3 => ['A', 'A', 'B', 'A', 'A', 'C'],
             );

#the values of %hash are returned as arrays not as string (as I want)

foreach my $name (sort keys %hash ) {
    print "$name: ";
    print "$hash{$name}[2]\n";
}

for (my $i=0; $i<$length; $i++) {
        my $diff = "no";
        my $letter = '';
        foreach $name (sort keys %hash) {
            if (defined $hash{$name}[$i]) {
                if ($hash{$name}[$i] =~ /[ABCD]/) {
                    $letter = $hash{$name}[$i];
                }
                elsif ($hash{$name}[$i] ne $letter) { 
                    $diff = "yes";
                }
            }
            if ( $diff eq "yes" ) {
                foreach $name (sort keys %hash) {
                    if (defined $hash{$name}[$i]) { $newhash{$name} .= $hash{$name}[$i]; }  
                }
            }
        }
    }
    foreach $name (sort keys %newhash ) {
        print "$name: $newhash{$name} \n";
    } 
```

我希望这个程序的输出类似于只有变量列的新哈希：

```
my %newhash = ( name1 => 'BB',
            name2 => 'DB',
            name3 => 'BC',
              ); 
```

但仅给出此消息：在 test_hash.pl 第 31 行的字符串 ne 中使用未初始化的值 $letter。

有人对此有想法吗？干杯

编辑：

非常感谢您在这个问题上的帮助。

我编辑了我的帖子以确认 frezik、Dan1111、Jean 的建议。你是对的，现在没有警告，但我也无法从 print 语句中获得任何输出，我对此一无所知......

@TLP：好的，我只是生成一组随机的列，没有任何排序目的。我真正想要的是字母如何变化，这意味着如果对于相同的数组索引（存储在哈希中）字母相同，则丢弃它们，但如果键之间的字母不同，我想存储该索引新哈希中的列。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T14:58:22.163

我假设通过这个，你想匹配任何字母 A、B、C 或 D：

```
if ($hash{$name}[$i] =~ /ABCD/) 
```

但是，正如所写，它与确切的字符串“ABCD”匹配。你需要一个你想要的字符类：

```
if ($hash{$name}[$i] =~ /[ABCD]/) 
```

但是，您还有其他逻辑问题，可能会导致您`$letter`在设置之前进行比较。将其设置为空（如 Jean 建议的那样）是一个可能有帮助的简单选项。

另一个问题在这里：

```
print "$name: @{ $newhash{$name} }\n"; 
```

`%newhash`不是数组的哈希，因此您需要删除数组取消引用：

```
print "$name: $newhash{$name} \n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T20:12:33.207

您可能对此替代解决方案感兴趣

```
use strict;
use warnings;

my %hash = (
  name1 => ['A', 'A', 'B', 'A', 'A', 'B'],
  name2 => ['A', 'A', 'D', 'A', 'A', 'B'],
  name3 => ['A', 'A', 'B', 'A', 'A', 'C'],
);

my @columns;

for my $list (values %hash) {
  $columns[$_]{$list->[$_]}++ for 0 .. $#$list;
}

my %newhash = %hash;

for my $list (values %newhash) {
  $list = join '', map $list->[$_], grep keys %{$columns[$_]} > 1, 0 .. $#$list;
}

use Data::Dump;
dd \%newhash; 
```

**输出**

```
{ name1 => "BB", name2 => "DB", name3 => "BC" } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T14:54:54.980

您的标量`$letter`未定义。添加它以消除警告。

```
my $letter=''; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T14:57:24.260

```
if ($hash{$name}[$i] =~ /ABCD/) { 
```

上面的正则表达式将匹配一个类似`__ABCD__`or的字符串`ABCD1234`，但绝不会匹配一个单独的`A`or `B`。您可能想匹配其中任何一个字母，锚定正则表达式也是一个好主意：

```
if ($hash{$name}[$i] =~ /\A [ABCD] \z/x) { 
```

（/x 选项意味着忽略空格，这有助于使正则表达式更易于阅读。）

`$i == 2`当内部循环碰巧敲击键`name1`或`name3`首先时，您仍然会在上面的示例中收到警告。由于正则表达式不匹配`T`，`$letter`将保持未初始化状态。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T15:55:37.483

我认为逐个检查字母是错误的。收集所有信件并立即检查似乎更容易。然后，[`List::MoreUtils`](http://search.cpan.org/perldoc?List%3a%3aMoreUtils)模块的 uniq 函数可以快速确定字母是否变化，并且可以轻松地将它们转换为生成的哈希值。

```
use strict;
use warnings;
use Data::Dumper;
use List::MoreUtils qw(uniq);

my %hash = ( name1 => ['A', 'A', 'B', 'A', 'A', 'B'],
             name2 => ['A', 'A', 'D', 'A', 'A', 'B'],
             name3 => ['A', 'A', 'B', 'A', 'A', 'C'],
);
my @keys = keys %hash;
my $len = $#{ $hash{$keys[0]} };   # max index
my %new;

for my $i (0 .. $len) {
    my @col;
    for my $key (@keys) {
        push @col, $hash{$key}[$i];
    }
    if (uniq(@col) != 1) {     # check for variation
        for (0 .. $#col) {
            $new{$keys[$_]} .= $col[$_];
        }
    }
}
print Dumper \%new; 
```

**输出：**

```
$VAR1 = {
          'name2' => 'DB',
          'name1' => 'BB',
          'name3' => 'BC'
        }; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T09:43:01.617

伟大的。非常感谢您在这个问题上的所有帮助。

我根据 TLP 的建议尝试了一个代码并且工作得很好。因为我对 perl 比较陌生，所以我认为这段代码比 Borodin 的代码更容易理解。我所做的是：

```
#!/usr/bin/perl
use strict;
use warnings;
use List::MoreUtils qw(uniq);

my %hash = ( name1 => ['A', 'A', 'T', 'A', 'A', 'T', 'N', 'd', 'd', 'D', 'C', 'T', 'T', 'T'],
         name2 => ['A', 'A', 'D', 'A', 'A', 'T', 'A', 'd', 'a', 'd', 'd', 'T', 'T', 'C'],
         name3 => ['A', 'A', 'T', 'A', 'A', 'C', 'A', 'd', 'd', 'D', 'C', 'T', 'C', 'T'],
);
my @keys = keys %hash;
my $len = $#{ $hash{$keys[0]} };   # max index
my %new;

for (my $i=0; $i<$length; $i++) {
    my @col;
    for my $key (@keys) {
       if ($hash{$key}[$i] =~ /[ABCDT]/) {     #added a pattern match
            push @col, $hash{$key}[$i];
       }
    }
    if (uniq(@col) != 1) {     # check for variation
        for (0 .. $#col) {
            $new{$keys[$_]} .= $col[$_];
        }
    }
}
foreach my $key (sort keys %new ) {
    print "$key: $new{$key}\n";
} 
```

但是，当使用 uniq 函数时（if (uniq(@col) == 1)），我注意到输出有点错误：

```
name1: AAAAADCT
name2: AAAAADCT
name3: AAAAT 
```

似乎没有保留键 => 值的初始顺序。有人对此有提示吗？

干杯。

# javascript - 如何防止按键事件干扰浏览器的输入支持？

> ID：12936973
> 
> 赞同：0
> 
> 时间：2012-10-17T14:45:38.620
> 
> 标签：javascript, twitter-bootstrap, modal-dialog

我正在使用 Bootstrap 的模态组件为我的 Web 应用程序创建一个“添加用户”对话框。为了方便用户快速工作，我想让转义键和回车键关闭并按预期提交表单。在遇到 div 不接受输入的常见问题以及模态下的一些元素获得焦点后，我最终只是将按键事件挂钩到“文档”。这实际上很好用，但有一个例外。

在表单中输入数据时，浏览器有时会显示一个建议框： ![](../Images/826e2523f563c9dd281251919242a616.png)

点击退出以关闭建议框，或输入以从中选择一个元素，不幸的是会触发一个按键事件，导致表单被关闭或提交。

在这种情况下，有没有办法可以忽略按键？我需要采取完全不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:42:06.457

您是否使用`$(document).keyUp()`绑定您的 ESC 和 Enter 键事件。如果是这样，您可以尝试在该函数中添加此代码以忽略在输入标签中按下的按键：

```
$(document).keyup(function(e){
    if(e.srcElement.tagName == 'INPUT'){
        return;
    }else{
        // Your code to bind function to exit div or submit
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T14:48:44.567

另一种方法是添加`autocomplete="off"`到输入标签中。

# events - 开发过程中重复requestAccessToEntityType:EKEntityTypeEvent的过程

> ID：12936975
> 
> 赞同：5
> 
> 时间：2012-10-17T14:45:43.497
> 
> 标签：events, calendar, ios6, ekeventkit

我正在开发一个需要访问日历数据库的应用程序。我输入了一个代码，现在请求我在网站上找到的许可，并感谢您：

[requestAccessToEntity iOS6- 向后兼容性 - EKEventStore](https://stackoverflow.com/questions/12660206/requestaccesstoentity-ios6-backwards-compatibility-ekeventstore)

但是出于测试目的，我希望能够停用权限并重新运行应用程序，以便再次询问问题。如果我从设备中删除应用程序并重新安装它，设备会记住已请求权限并且不会再次请求。如果我再次关闭权限，则不会再次询问权限，但显然没有权限无法访问。那么我怎样才能让设备完全忘记它已经安装了应用程序。谢谢

礼萨

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T06:52:31.410

设置-通用-重置-重置位置和隐私

# android - android屏幕方向冲突

> ID：12936977
> 
> 赞同：1
> 
> 时间：2012-10-17T14:45:50.877
> 
> 标签：android, screen-orientation

我的主类中有一个方法，可以从互联网上获取一些数据。事情是，一切都完成后，如果我通过移动设备来改变屏幕方向，一切都会重新开始（在显示加载屏幕时获取数据）。有没有什么地方可以放我的方法，这样如果我的设备的屏幕方向发生变化，它就不会删除在那一刻之前所做的一切？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:19:53.957

发生在您身上的是，每次旋转您的活动时都会重新创建，根据 android 的良好做法，您应该处理重新创建的活动，因为如果设备上的资源不足，android 可能会在任何时候破坏您的活动。看看保存您的活动状态以及如何恢复它和链接。

[使用 onSaveInstanceState() 的示例](https://stackoverflow.com/questions/4096169/onsaveinstancestate-and-onrestoreinstancestate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:02:53.397

我认为您的活动正在重新创建。在这种情况下，它将再次加载。

1）。您可以通过覆盖来处理方向更改 `public void onConfigurationChanged(Configuration newConfig)`

并在清单文件中的活动声明中添加以下行 `android:configChanges="orientation|screenSize|keyboardHidden"`

2）。正如 Aerilys 在上面的答案中所说，您可以使用单例类来存储数据。在显示加载屏幕之前，请检查单吨对象是否有数据。如果是，则跳过显示加载屏幕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T14:49:07.257

您可以使用单例类来存储数据。如果您更喜欢更简单的方式，您也可以将数据设为静态，因此方向更改不会丢弃它们。

# javascript - Backbone.js 清空一个集合

> ID：12936978
> 
> 赞同：5
> 
> 时间：2012-10-17T14:45:53.413
> 
> 标签：javascript, collections, backbone.js

我需要清空一个集合，按顺序删除每个项目。

```
this.nodes.each(function(node){
  this.nodes.remove(node);
}, this); 
```

不起作用，因为随着每个节点被删除，它会改变集合的长度。制作一个临时数组，然后对其进行迭代。有没有更好的办法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:48:41.973

`this.nodes.reset()`除非您需要`remove`活动 ，否则请尝试。

除此以外：

```
var nodes = this.nodes;
while (nodes.length > 0)
    nodes.remove(nodes.at(0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-26T18:19:25.347

另一种清空主干集合的方法：

```
while ( this.catz.length > 0) this.catz.pop(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T15:13:43.363

如果您需要在迭代时修改集合，请使用`for`如下简单的反向操作：

```
var count = collection.size();
for (var i = count-1; i > -1; i--) {
    collection.remove(collection.at(i));
} 
```

小提琴[http://jsfiddle.net/xt635/](http://jsfiddle.net/xt635/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-18T21:29:14.423

[http://backbonejs.org/#Collection-reset](http://backbonejs.org/#Collection-reset)

你可以打电话`collection.reset();`，它会清空整个集合。我今天用了！

# magento - Magento 优惠券显示极端折扣

> ID：12936983
> 
> 赞同：1
> 
> 时间：2012-10-17T14:46:01.220
> 
> 标签：magento, magento-1.7

我有一个 magento 1.7.0.2 安装。我使用优惠券创建了购物车价格规则。一切都很好，只是在 magento（购物车、结帐、...）中显示的折扣金额是一个极值。我发现极值是 2^64 (18 446 744 073 709 550 520)。规则的配置无关紧要，显示的折扣总是 2^64。

![购物车总数示例](../Images/f4211e6802dfe72b29e02041c88813d0.png)

小计很好，运费很好，这些总和是 11669。在小计 (10961) 上应用折扣 (10%) 后，结果是 9864。9864+708=10573 是可以接受的结果。所以除了显示的折扣外，一切都很完美。

我不知道哪里出错了。我找不到相关文件。请帮忙。

非常感谢，伊斯特万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:16:35.397

毕竟我找到了解决方案。这个错误的原因很简单。magento 存储的折扣金额是有符号的，这意味着它有一个负号。文件 app/design/frontend/[yourfrontend]/[yourtheme]/template/checkout/total/default.phtml （这是金额在屏幕上写的地方）包含以下代码：

```
<tr>
    <th colspan="<?php echo $this->getColspan(); ?>" style="<?php echo $this->getTotal()->getStyle() ?>" class="a-right">
    <?php if ($this->getRenderingArea() == $this->getTotal()->getArea()): ?><strong><?php endif; ?>
        <?php echo $this->escapeHtml($this->getTotal()->getTitle()); ?>
    <?php if ($this->getRenderingArea() == $this->getTotal()->getArea()): ?></strong><?php endif; ?>
</th>
<td style="<?php echo $this->getTotal()->getStyle() ?>" class="a-right">
    <?php if ($this->getRenderingArea() == $this->getTotal()->getArea()): ?><strong><?php endif; ?>
        <?php echo $this->helper('checkout')->formatPrice($this->getTotal()->getValue()) ?>
    <?php if ($this->getRenderingArea() == $this->getTotal()->getArea()): ?></strong><?php endif; ?>
</td> 
```

问题在于`formatPrice()`函数和负参数。一个简单的解决方案是`abs()`php 函数。换行

```
<?php echo $this->helper('checkout')->formatPrice($this->getTotal()->getValue()) ?> 
```

至

```
<?php echo $this->helper('checkout')->formatPrice(abs($this->getTotal()->getValue())) ?> 
```

我们走了，问题解决了。

我希望这会有所帮助。

# java - 更改输入对象时 TableViewer 重绘缓慢

> ID：12936985
> 
> 赞同：2
> 
> 时间：2012-10-17T14:46:08.480
> 
> 标签：java, swt, jface, tableviewer

在我的项目中，我有一个`TableViewer`显示来自数据库的大约 1k 行数据。是`ContentProvider`一个`ArrayContentProvider`.

当我将输入列表（对象）更改为具有相同数据量的另一个列表时，一切正常`setInput()`。`TableViewer`但是当我想用`List<T>`与前一个不同的大小来更新它时，应用程序冻结了大约 10 倍于使用相同数据量进行更改的时间。

第一个列表的大小为 1k，第二个列表的大小约为 960。执行直接冻结在`setInput()`方法上。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T07:49:33.123

我认为原因是当您设置不同大小的列表时，会重新创建整个原生 TableItems。因此，为了加快您的表格速度，您应该使用 SWT.Virtual 样式表格。使用虚拟表只创建显示的表项。其他是在您滚动时创建的。

见[http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/examples/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers /Snippet029VirtualTableViewer.java](http://git.eclipse.org/c/platform/eclipse.platform.ui.git/tree/examples/org.eclipse.jface.snippets/Eclipse%20JFace%20Snippets/org/eclipse/jface/snippets/viewers/Snippet029VirtualTableViewer.java)为例。

# c++ - 为什么 cudaMalloc() 使用指向指针的指针？

> ID：12936986
> 
> 赞同：44
> 
> 时间：2012-10-17T14:46:10.987
> 
> 标签：c++, c, pointers, cuda

例如，`cudaMalloc((void**)&device_array, num_bytes);`

之前有人[问](https://stackoverflow.com/questions/7989039/use-of-cudamalloc-why-the-double-pointer)过这个问题，回答是“因为`cudaMalloc`返回错误代码”，但我不明白 - 双指针与返回错误代码有什么关系？为什么一个简单的指针不能完成这项工作？

如果我写

```
cudaError_t catch_status;
catch_status = cudaMalloc((void**)&device_array, num_bytes); 
```

错误代码将被放入`catch_status`，返回一个指向分配的 GPU 内存的简单指针就足够了，不是吗？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-10-17T14:54:07.247

在 C 中，数据可以通过值或通过[模拟的按引用传递](https://en.wikipedia.org/wiki/C_(programming_language)#Overview)（即通过指向数据的指针）传递给函数。按值是一种单向方法，按指针允许函数及其调用环境之间的双向数据流。

当一个数据项通过函数参数列表传递给一个函数，并且该函数期望修改原始数据项以使修改后的值显示在调用环境中，正确的 C 方法是传递数据项通过指针。在 C 中，当我们通过指针传递时，我们获取要修改的项目的地址，创建一个指针（在这种情况下可能是指向指针的指针）并将地址交给函数。这允许函数在调用环境中修改原始项目（通过指针）。

通常`malloc`返回一个指针，我们可以在调用环境中使用赋值将这个返回值赋给所需的指针。在 的情况下`cudaMalloc`，CUDA 设计者选择使用返回值来携带错误状态而不是指针。因此，调用环境中指针的设置必须通过引用（即指针）传递给函数的参数之一进行。由于它是我们要设置的*指针值*`cudaMalloc`，因此我们必须获取指针的地址（创建指向指针的指针）并将该地址传递给函数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-23T16:47:23.617

添加到罗伯特的答案，但首先重申，它是一个 C API，这意味着它不支持**引用，这将允许您修改函数内部指针的值（不仅仅是指向的值）**。Robert Crovella 的回答解释了这一点。另请注意，它需要是`void`因为 C 也不支持函数重载。

此外，在 C++ 程序中使用 C API 时（但您没有说明这一点），通常将此类函数包装在模板中。例如，

```
template<typename T>
cudaError_t cudaAlloc(T*& d_p, size_t elements)
{
    return cudaMalloc((void**)&d_p, elements * sizeof(T));
} 
```

`cudaAlloc`调用上述函数的方式有两个不同之处：

1.  直接传递设备指针，`&`调用它时不使用地址运算符 ()，也不强制转换为`void`类型。
2.  第二个参数`elements`现在是元素数而不是字节数。`sizeof`操作员促进了这一点。这可以说是更直观地指定元素而不用担心字节。

例如：

```
float *d = nullptr;  // floats, 4 bytes per elements
size_t N = 100;      // 100 elements

cudaError_t err = cudaAlloc(d,N);      // modifies d, input is not bytes

if (err != cudaSuccess)
    std::cerr << "Unable to allocate device memory" << std::endl; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-18T20:51:02.690

我想`cudaMalloc`函数的签名可以通过一个例子来更好地解释。它基本上是通过指向该缓冲区的指针（指向指针的指针）分配缓冲区，*如*以下方法：

```
int cudaMalloc(void **memory, size_t size)
{
    int errorCode = 0;

    *memory = new char[size];

    return errorCode;
} 
```

如您所见，该方法采用`memory`指向指针的指针，在该指针上保存新分配的内存。然后它返回错误代码（在这种情况下为整数，但它实际上是一个枚举）。

该`cudaMalloc`功能也可以如下设计：

```
void * cudaMalloc(size_t size, int * errorCode = nullptr)
{
    if(errorCode)
        errorCode = 0;

    char *memory = new char[size];

    return memory;
} 
```

在第二种情况下，错误代码是通过一个指针隐式设置为 null 设置的（在这种情况下人们根本不关心错误代码）。然后返回分配的内存。

第一种方法现在可以按实际使用`cudaMalloc`：

```
float *p;
int errorCode;
errorCode = cudaMalloc((void**)&p, sizeof(float)); 
```

而第二个可以按如下方式使用：

```
float *p;
int errorCode;
p = (float *) cudaMalloc(sizeof(float), &errorCode); 
```

这两种方法在功能上是等价的，但它们有不同的签名，cuda 的人决定采用第一种方法，返回错误代码并通过指针分配内存，而大多数人说第二种方法会是更好的选择。

# sql - Web 应用程序的“自动建议”功能实现

> ID：12936987
> 
> 赞同：1
> 
> 时间：2012-10-17T14:46:16.740
> 
> 标签：sql, ruby

我正在开发一个 Web 应用程序并有两个模型（除其他外） - 用户和具有多对多关联的项目。所以我有表'users'，'items'和'items_users'，主键'id'和外键user_id和item_id。

我将拥有一个“自动建议”功能。例如，如果我作为用户将某个项目标记为好，则系统应该建议 n 个项目，我很可能也会将其标记为好。自动建议的合理标准是有多少用户喜欢第一个项目和另一个项目。如果所有喜欢喝茶的用户也喜欢茶壶 - 那么茶壶在自动建议中处于首位。

这是基本功能，我也会过滤一些结果，但其余的无关紧要。我正在考虑某种辅助表，用于按需快速计算或安排单独的进程来计算 n 个建议。

感谢您提供任何相关信息！

**UPD**

这个问题听起来不清楚。我有带有续集 orm 的 sql db 和 sinatra。我在问如何计算最相似的项目数据集（最便宜，资源消耗最少的方法）。你将如何实施它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T16:02:17.550

因此，通常您希望选择所有喜欢相同产品的用户，然后通过计算每个产品的喜欢数量来获得他们喜欢的产品，并输出最喜欢的产品。

那么这在 SQL 中会是什么样子呢？

让我们看看这在 SQL 中会是什么样子：

**第 1 步**：获取您的收藏夹的 id

```
SELECT it.item_id FROM `item_users` it WHERE it.user_id = %current_user% 
```

**第二步**：获取喜欢相同商品的用户

```
SELECT u.id FROM `item_users` it, `users` u WHERE it.item_id IN (  
    SELECT it.item_id FROM `item_users` it WHERE it.user_id = %current_user%  
) AND it.user_id != %current_user% AND u.id = it.user_id GROUP BY it.user_id 
```

**第 3 步**：获取他们的最爱

整个 SQL 查询如下所示：

```
SELECT i.* FROM `items` i, `item_users` it WHERE it.user_id IN (  
    SELECT u.id FROM `item_users` it, `users` u WHERE it.item_id IN (  
        SELECT it.item_id FROM `item_users` it WHERE it.user_id = %current_user%  
    ) AND it.user_id != %current_user% AND u.id = it.user_id GROUP BY it.user_id  
) AND i.id = it.item_id GROUP BY i.id ORDER BY count(*) DESC 
```

您的任务是添加对结果的限制...

**更新**：我猜您想首先获得最受欢迎的产品。我已更改查询以添加该功能（添加`ORDER BY count(*) DESC`到末尾）

这是一个复杂的查询，使用 ActiveRecord 来实现它会很慢，甚至更复杂，所以我建议您按原样使用查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T15:01:41.187

使用您的链接表来连接用户和项目。在您的 WHERE 子句中应用以下过滤器：
- 喜欢该项目的用户（“标记为好”）
- 当前用户尚未标记为好的项目

按喜欢的数量降序排序（您需要按项目 ID 分组并计算用户数）。

# php - 需要帮助了解 Magento 产品集合对象和目录/产品模型

> ID：12936989
> 
> 赞同：1
> 
> 时间：2012-10-17T14:46:23.283
> 
> 标签：php, mysql, magento, entity-attribute-value

我继承了一个老开发人员负责的 Magento 项目。由于 Magento 经验非常有限，我想了解产品系列和`catalog/product`模型是如何工作的。

具体来说，我想知道为什么集合和产品对象如此庞大？

我有这样的代码：

```
<?php $_productCollection = $this->getLoadedProductCollection(); ?>
<?php foreach ($_productCollection as $_product): ?>
    <?php $_product = Mage::getModel( 'catalog/product' )->load( $_product->getId() ); ?>
    <?php print $this->getLayout()->createBlock('mymodule_name/category_products_item')->setProduct($_product)->toHtml() ?>
<?php endforeach ?> 
```

当我这样做`print_r($_productCollection)`或`print_r($_product)`获得*大量*数据时，我真正想要的只是一些产品属性（ID、名称、价格、图像 URL 等）。

我习惯了一个自定义的关系数据库平台，如果我需要使用产品，我会做一些超简单的事情，比如`SELECT id,name,price FROM products;`！我完全不确定如何在 Magento 中实现这一点。我要创建自定义模型还是什么？

所以谁能告诉我：

1）为什么上面的物体这么大？

2）如果我只需要一些产品属性（如上），那么有没有办法将对象限制为仅这些属性以减小它们的大小？

3) 以这种方式使用对象是否会对性能或内存造成影响？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:37:25.587

您有几种方法可以从 magento 访问数据：

*   使用 load() => 它加载与模型相关的所有数据（属性）。它非常缓慢且性能杀手。对于产品，您应该仅在产品页面上使用 load() （因为您将在该页面上使用的所有数据都与单个对象相关......所以您可以完全加载它）

*   使用 collection => 当您需要检索对象列表时，您必须（至少）使用一个集合。由您决定要检索的属性列表。您可以将属性添加到选择/过滤器，并且该集合将设法在后台对 EAV 表等进行 SQL 连接

*   使用自定义 SQL => 集合在处理复杂对象时可能会很慢（一个集合初始化许多 SQL 连接到您可能不需要的表）...从 BDD 访问数据的最后一种方法是在您的 ResourceModel 中创建您自己的 SQL

在您展示的脚本中，有一个巨大的错误：您在 foreach 中加载了一个完整的模型，并在一个集合上进行迭代。你绝不能这样做，如果你必须加载（）产品，我认为这是因为你没有在集合中找到一个属性？在这种情况下，您只需修改集合即可检索属性...

例如，对于一个产品，magento 提供了一种自动添加（或删除）属性到您实例化的任何产品->集合的方法。（参见 Mage_Catalog 的 config.xml 中的 frontend/product/collection/attributes XML 标签）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-17T14:56:07.703

这是因为 magento 使用缓存递归 OMG 系统，让关系数据库开发人员为之疯狂。我就是其中之一。但是，据我了解，我认为最好使用 Mage::getModel('model')->getCollection()，然后使用 php 进行一些 sql 搜索之王，因为当 Magento 商店启动时，它会创建一个 biggggggg 缓存模式以更快地提供一些信息，这是一种索引环。

所以，如果你只想要几个字段，你可以使用.....->getCollection()->addAttributeToSelect('name')。例如。

Gl 对你的 magento 的理解。

# unix - 需要 Sed 命令在两个模式之间打印而不重复

> ID：12936990
> 
> 赞同：1
> 
> 时间：2012-10-17T14:46:23.767
> 
> 标签：unix, sed

我有一个像下面这样的模式

```
Start
Hi
How
Are
You
End
Hi
Start
Hi
How
do
You
Do
End 
```

我需要第一个`Start`和之间的字符串`End`。

我不想要 second`Start`和`End`.

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-17T15:07:53.877

这似乎对我有用：

`sed -n '/Start/{:a;n;/End/q;p;ba}'`

```
$ echo 'Start
Hi
How
Are
You
End
Hi
Start
Hi
How
do
You
Do
End' | sed -n '/Start/{:a;n;/End/q;p;ba}'
Hi
How
Are
You 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T00:02:19.433

这可能对您有用（GNU sed）：

```
sed -n '/Start/,${//!p;/End/q}' file 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-17T20:16:58.577

sed 是在单行上进行简单替换的出色工具。对于其他任何事情，请使用 awk：

```
$ awk '/End/{exit} found{print} /Start/{found=1}' file
Hi
How
Are
You 
```

当当前行包含 Start 时，设置“found”标志。在下一行和随后的每一行中，设置了找到的标志，因此打印该行。当看到包含“End”的行时，退出。一切都非常简单，如果将来有必要，您只需移动 {} 部分即可轻松控制是否打印 Start、End 或两者：

```
$ awk '/End/{exit} /Start/{found=1} found{print}' file 
Start
Hi
How
Are
You
$ awk 'found{print} /End/{exit} /Start/{found=1}' file             
Hi
How
Are
You
End
$ awk '/Start/{found=1} found{print} /End/{exit}' file
Start
Hi
How
Are
You
End 
```

或者如果您想要开始/结束之间的所有段，则只需将找到的标志设置回零而不是退出：

```
$ awk '/End/{found=0} found; /Start/{found=1}' file   
Hi
How
Are
You
Hi
How
do
You
Do 
```

如果 End 可以按照评论中的建议出现在 Start 之前，则只需调整脚本以仅在“found”块中测试 End ：

```
awk 'found{ if (/End/) exit; print } /Start/{ found=1 }' file 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T15:21:47.673

您也可以使用`ed`脚本来执行此操作：

```
<<< '/Start/+1,/End/-1p' | ed -s infile 
```

输出：

```
Hi
How
Are
You 
```

# sql-server - SQL Server 和中间物化？

> ID：12936993
> 
> 赞同：2
> 
> 时间：2012-10-17T14:46:34.023
> 
> 标签：sql-server, sql-server-2008, where-clause

*在阅读了这篇关于中间物化的[有趣文章](http://dataeducation.com/cursors-run-just-fine/)之后——我还有一些问题。*

我有这个查询：

```
SELECT    *
FROM  ...
WHERE       isnumeric(MyCol)=1  and ( CAST( MyCol AS int)>1) 
```

但是，where 子句的顺序**不是**确定性的。

所以我*可能*会在这里遇到异常。（如果他第一次尝试投射`"k1k1"`）

我认为这将解决问题

```
SELECT MyCol 
FROM
    (SELECT TOP 100 PERCENT foo From MyTable WHERE ISNUMERIC (MyCol ) > 1 ORDER BY MyCol ) bar
WHERE
    CAST(MyCol AS int) > 100 
```

*   为什么 put`top 100 + order`会改变我的常规查询？

我在评论中读到：

> （“中间”结果 - 换句话说，在此过程中获得的结果，将用于计算最终结果）将物理存储（“物化”）在 TempDB 中，并从那里用于其余用户，而不是从基表中查询回来。

*   如果它存储在 tempDB 中或从基表中查询回来有什么区别？这是**相同的数据**！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T15:12:25.097

避免由于优化器重组而导致错误的受支持方法是使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)：

```
SELECT *
FROM YourTable
WHERE
    1 <=
    CASE
        WHEN aa NOT LIKE '%[^0-9]%'
        THEN CONVERT(int, aa)
        ELSE 0
    END; 
```

中间物化不是一种受支持的技术，因此它只能由非常专业的用户在了解和接受风险的特殊情况下使用。

`TOP 100 PERCENT`从 SQL Server 2005 开始，优化器通常[会忽略它。](http://blogs.msdn.com/b/queryoptteam/archive/2006/03/24/560396.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:04:27.983

通过将 TOP 子句添加到内部查询中，您将强制 SQL Server 在运行外部查询之前先运行该查询 - 从而丢弃 ISNUMERIC 返回 false 的所有行。

如果没有 TOP 子句，优化器可以将查询重写为与您的第一个查询相同。