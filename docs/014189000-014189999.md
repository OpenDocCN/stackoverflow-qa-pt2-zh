# StackOverflow 问答 14189000-14189999

# wpf - 如何为没有公共构造函数的类创建静态资源

> ID：14189002
> 
> 赞同：1
> 
> 时间：2013-01-07T02:17:20.400
> 
> 标签：wpf, xaml, binding

WPF 绑定使用 CultureInfo.CurrentUICulture 而不是 CultureInfo.CurrentCulture，这意味着它们不遵守控制面板的*区域和语言*对话框中指定的首选项。

为了在 WPF 应用程序中正确实现本地化，因此有必要以某种方式将 CurrentCulture 分配给每个绑定的 ConverterCulture。

这最好使用在 App.xaml 中声明的 StaticResource 来完成，但存在一个问题：CultureInfo 类没有公共构造函数。结果，像这样的标记

```
<Application x:Class="ScriptedRoutePlayback.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:glob="clr-namespace:System.Globalization;assembly=mscorlib"
             StartupUri="MainWindow.xaml">
  <Application.Resources>
    <glob:CultureInfo x:Key="CurrentCulture" />
  </Application.Resources>
</Application> 
```

生成有关 CultureInfo 没有公共构造函数的警告。尽管如此，标记足以在设计者使用的命名空间中注册适当类型的静态资源，从而阻止对 {StaticResource CurrentCulture} 的标记引用在应用程序的其余部分中抱怨。

在运行时，此标记创建 CultureInfo 实例的失败是无关紧要的，因为随附的启动代码从 CultureInfo.CurrentCulture 分配它：

```
using System.Globalization;
using System.Windows;

namespace ScriptedRoutePlayback
{
  public partial class App : Application
  {
    protected override void OnStartup(StartupEventArgs e)
    {
      base.OnStartup(e);
      Resources["CurrentCulture"] = CultureInfo.CurrentCulture;
    }
  }
} 
```

## 最后，问题：

标记引用现有对象（例如从类的静态属性获得的单例）的 StaticResource 的首选方法是什么，尤其是当所述类缺少公共构造函数时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:09:05.610

在您的绑定中引用 CultureInfo.CurrentCulture 时，您是否尝试过 x:Static 标记扩展，而不是定义静态资源？

[http://msdn.microsoft.com/en-us/library/ms742135.aspx](http://msdn.microsoft.com/en-us/library/ms742135.aspx)

就像是：

```
... {Binding ... ConverterCulture={x:Static glob:CultureInfo.CurrentCulture}} 
```

或者，[这个答案](https://stackoverflow.com/a/12115452/1157288)或[这个答案](https://stackoverflow.com/a/993454/1157288)可能会为您的情况提供更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:09:24.850

可能没有必要在 XAML 中定义资源。

```
base.OnStartup(e);
Resources.Add("CurrentCulture", CultureInfo.CurrentCulture); 
```

# css - Background image/color not visible in IE

> ID：14189004
> 
> 赞同：0
> 
> 时间：2013-01-07T02:17:35.483
> 
> 标签：css, internet-explorer, background, background-image

I am using this scheme for desktop background. For the homepage I am using the body tag with the class "gd", so the background is given on the home page. The given css is working fine in FF,Chrome,Safari but I am having problem hacking it for IE.

```
body{  
color:#0066cc;  
background:white;  
padding-top:20px;  
min-width:500px;  
height:100%;  
} 
```

and this style for the main page

```
body.gd{  
background:#87ceeb url("../images/bg.jpg") bottom center no-repeat !important;  
background-color:#87ceeb !important;  /*P.S. This line just added for testing */  
} 
```

The last line in .gd class is not even showing the background color, it might be possibility that IE is not accepting the body tag with **gd** class, but in this class how may overcome this behaviour.

> P.S. I am using IE9,IE8 and IE7\. Three of them are not showing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:57:52.617

感谢@7th[评论](https://stackoverflow.com/questions/14189004/background-image-color-not-visible-in-ie#comment19668817_14189004)的帮助。这里的问题在于 html 标签。

这是以前

```
html{  
background-color:#ffffff;  
zoom:1;  
**background-color:transparent\9;**  
-ms-filter:"progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff, endColorstr=#ffffffff)";  
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffffff, endColorstr=#ffffffff);  
padding:0;  
margin:0;  
} 
```

之后

```
html{  
background-color:#ffffff;  
padding:0;  
margin:0;  
} 
```

然后我意识到**background-color:transparent**出错了。我不知道为什么 IE 将它继承到后台，即使我为 body 标签添加了单独的样式定义。无论如何，现在，它对我来说很好。

> **PS对此的解释将不胜感激**

# jquery - HOVER EFFECTS WITH CSS TRANSITIONS during loading page

> ID：14189006
> 
> 赞同：1
> 
> 时间：2013-01-07T02:18:04.407
> 
> 标签：jquery, css, effects, transitions, flip

I'm trying to solve problem effects during the loading the page. please take look at the sample at

[http://www.ajaxshake.com/plugin/EN/1097/6c9bfe29/circle-effects-with-css3-circleeffects.html](http://www.ajaxshake.com/plugin/EN/1097/6c9bfe29/circle-effects-with-css3-circleeffects.html)

And go to demo 6 as you can see when mouse over on images it will flip down and flip up when mouse out.

I'm trying to figure out how this write code in jquery when loading page and auto flip down images during loading the page without mouseover!

Does anyone have any idea how to write that code, i just done in sample jquery code but still not working please take look at

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:38:59.570

尝试使用jquery ...

```
$(document).ready(function() {
    if($('#your_img_id').is(':hover')) {
        $('#your_img_id').fadeIn('fast');
    }
    else {
        $('#your_img_id').fadeOut('fast');
    }
}); 
```

可能工作...

如果你想要它没有鼠标悬停...只需删除 if 条件并检查加载条件...

# c++ - 在我的 C++ 应用程序中包含第三方代码时遇到问题

> ID：14189009
> 
> 赞同：1
> 
> 时间：2013-01-07T02:18:35.340
> 
> 标签：c++, include

我正在尝试将一些网络代码包含到我的 C++ 应用程序中。我下载[了 CSimpleSocket](http://sockets.carrierlabs.com/)并将所有 .h 和 .cpp 文件复制到我的主文件所在的目录中。然后我尝试包含一个标题，但链接器只是抛出一堆错误，比如：

*   [链接器错误] 未定义对 CPassiveSocket::CPassiveSocket(CSimpleSocket::CSocketType)' 的引用
*   [链接器错误] 未定义对 `CSimpleSocket::Initialize()' 的引用
*   [链接器错误] 未定义对 `CPassiveSocket::Listen(unsigned char const*, short, int)' 的引用
*   [链接器错误] 未定义对 `CPassiveSocket::Accept()' 的引用

和别的。一切都在一个目录中，所以我认为这不是问题。我用来包含的代码是`#include "PassiveSocket.h"`. 我正在使用 Dev-C++，如果这有什么不同的话。我不明白我做错了什么，所以如果有人可以帮助我，那就太好了。

如果这是一个非常愚蠢的问题，请原谅我，但我正在努力学习 C++，这并不容易。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T02:31:35.653

您收到此错误的原因是您的编译器找不到与 CSimpleSocket 标头对应的二进制文件。好像你写的

```
void someFunction(int someArg); 
```

然后从未提供过 someFunction 的实现。

要使用第三方库，您需要两件事：

*   头文件（.h、.hpp 等...）
*   库文件（.a、.lib 等...）

获得头文件和库文件后，您需要将它们放在编译器可以找到的位置。这个地方会根据你的操作系统、环境变量和编译器配置而有所不同。

现在它们在编译器可以找到它们的地方，您需要告诉编译器使用它们。头文件与#include 命令一起使用，库文件通过向编译器提供参数来链接。

在幕后 Dev-C++ 使用 MinGW GNU GCC 编译器，它调用类似于`g++ file1.cpp file2.cpp ... filen.cpp -o filename`告诉程序 g++ 使用文件 1 到 n 编译名为“filename”的 C++ 可执行文件的命令。还有其他标志可以添加到 g++，例如告诉它在哪里搜索和链接什么。

CSimpleSocket 库编译时的名称是“clsocket”，所以我们需要找到一种方法来配置 Dev-C++ 以添加`-lclsocket`到`g++`命令中。我不使用 Dev-C++，所以在这里我无法为您提供帮助，但您可能正在编译配置中寻找“链接选项”或类似的东西。您还需要确保 .lib 和 .h 文件位于搜索路径上，这也应该可以在 Dev-C++ 中进行配置。

CSimpleSocket 还提供了一个安装程序，它应该自动创建 .lib 文件并将 .lib 和 .h 放在可以找到它们的位置，您应该考虑使用该安装程序。

我认为这个答案的复杂性凸显了 C++ 库集成生态系统的糟糕状态。不幸的是，在撰写本文时，C++ 中还没有“模块”的概念。

# c - exercise about vector and function

> ID：14189010
> 
> 赞同：4
> 
> 时间：2013-01-07T02:18:44.173
> 
> 标签：c, function, vector

**Thanks a lot, with you help I understood all my mistakes (:**

This is my first time using this website so I'm not sure if it is in the right format. Basically I have to make a function that fills a vector, but it isn't working at all. English isn't my first language so this is probably really confusing, but I'd appreciate if somebody helped me. Thanks a lot.

```
#include <stdio.h>
#include <stdlib.h>

void le_vet(int v[1000], int n, int i)
{
    for (i = 0; i < n; i++) {
        printf("Type the number %d: ", i+1);
        scanf("%d", &v[i]);
    }
}

int main()
{
    int v[1000], n;
    printf("Type the syze of the vector: ");
    scanf("%d", &n);
    void le_vet(n);
    system ("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T02:26:29.397

你不是`le_vet`在你的主函数中调用，而是在创建一个名为“le_vet”的函数指针，它接受一个int（默认情况下，因为没有指定类型）并返回一个void。我很确定这不是预期的。

相反，更改`void le_vet(n)`为`le_vet(v, n)`并更改：

```
void le_vet(int v[1000], int n, int i)
{
   for (i = 0; i < n; i++) {
   printf("Type the number %d: ", i+1);
   scanf("%d", &v[i]);
   }
} 
```

对此：

```
void le_vet(int v[], int n)
{
   int i;
   for (i = 0; i < n; i++) {
   printf("Type the number %d: ", i+1);
   scanf("%d", &v[i]);
   }
} 
```

由于您不需要`i`从函数外部传入，因此无需将其包含在函数的参数中。循环中的第一个元素在进入`for`循环时执行一次，因此它通常用于*声明*循环的迭代变量，就像我在这里所做的那样。

编辑：哎呀。不能在 C 中做到这一点。我已经习惯了 C++，我在这里犯了一个错误。`i`正如@Over Flowz 建议的那样，在循环上方声明。更新我修改后的代码，但留下这个记录作为停止工作去吃晚饭的证据:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T02:22:59.377

`le_vet()`当它需要三个参数时，您只将一个参数传递给。您还需要删除`void`, 因为您正在调用一个函数。

也许这会奏效。

```
void le_vet(int n)
{
     static int v[1000];
     for (int i = 0; i < n; i++) {
     printf("Type the number %d: ", i+1);
     scanf("%d", &v[i]);
     }
} 
```

您不需要将传递的参数作为参数，因为您正在循环`int i`中创建另一个。`for`

```
int i = 0;
while (i < n)
     {
          i++;
     } 
```

是相同的

`for (int i = 0; i < n; i++)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T02:26:57.553

当您像这样调用时：

```
...
scanf("%d", &n);
void le_vet(n); //you are declaring a function. You need to remove the void keyword
system ("pause");
... 
```

你应该这样调用：

```
...
scanf("%d", &n);
le_vet(n);
system ("pause");
... 
```

然后你会看到真正的错误，比如参数的数量

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T02:28:52.373

尝试：

```
#include <stdio.h>
#include <stdlib.h>

void le_vet(char v[], int n)
{
int i = 0;
for(i = 0; i < n; i++)
{
    printf("Type the number %d: ", i+1);
    scanf("%s", &v[i]); //Read string, not decimal for output.
}
}

int main()
{
char v[1000] = {0}, n;
printf("Type size of the vector: ");
scanf("%d", &n);
le_vet(v, n);
printf("%s", v);
system("pause");
return 0;
} 
```

希望能帮助到你。

# java - Weka: Src and Dest differ in # of attributes: using java

> ID：14189011
> 
> 赞同：2
> 
> 时间：2013-01-07T02:18:56.090
> 
> 标签：java, machine-learning, weka, svm, libsvm

I am trying to run Support Vector Machine(SVM) classifier using Weka API in my java code. I am getting following error **"Src and Dest differ in # of attributes:"** on line 13\. Please guide me how can I resolve this problem and run classifier successfully(THIS IS MY TIME CRITICAL ACADEMIC PROJECT). If possible, kindly mention the solution with example.

**ERROR:**

```
java.lang.IllegalArgumentException: Src and Dest differ in # of attributes: 22 != 31
    at weka.core.RelationalLocator.copyRelationalValues(RelationalLocator.java:88)
    at weka.filters.Filter.copyValues(Filter.java:359)
    at weka.filters.Filter.push(Filter.java:276)
    at weka.filters.unsupervised.attribute.Standardize.convertInstance(Standardize.java:260)
    at weka.filters.unsupervised.attribute.Standardize.input(Standardize.java:142)
    at weka.filters.Filter.useFilter(Filter.java:661)
    at ClassifierJan12Pure.main(ClassifierJan12Pure.java:139) 
```

**JAVA CODE:**

```
1\.     filteredData = new Instances(new BufferedReader(new FileReader("training.arff")));

2\.     filteredData.setClassIndex(0);

3\.     Classifier classifier=new SMO();

4\.     classifier.buildClassifier(filteredData);

5\.     FilteredClassifier filteredClassifier=new FilteredClassifier();
6\.     filteredClassifier.setClassifier(classifier);
7\.     Filter filter = new StringToWordVector(1000);
8\.     filteredClassifier.setFilter(filter);

9\.     Instances filteredTests= new Instances(new BufferedReader(new FileReader("testing.arff")));

10\.    Standardize sfilter = new Standardize();
11\.    sfilter.setInputFormat(filteredData);  // initializing the filter once with training set

12\.    Instances newTrain = Filter.useFilter(filteredData, sfilter);  // configures the Filter based on train instances and returns filtered instances

**13\.    Instances testsF = Filter.useFilter(filteredTests, sfilter);    // create new test set   ///<<<<<<< Error line.**

14\.    Evaluation eval = new Evaluation(filteredData);
15\.    eval.evaluateModel(filteredClassifier, filteredTests);

16\.    System.out.println(eval.toSummaryString("\nResults\n", false)); 
```

**training.arff**

```
@relation '_Users_Passionate_Desktop_Training_Text-weka.filters.unsupervised.attribute.StringToWordVector-R1-W1000-prune-rate-1.0-N0-stemmerweka.core.stemmers.NullStemmer-M1-tokenizerweka.core.tokenizers.WordTokenizer -delimiters \" \\r\\n\\t.,;:\\\'\\\"()?!\"'

@attribute @@class@@ {dummy,ham,spam}
@attribute about numeric
@attribute and numeric
@attribute be numeric
@attribute construction numeric
@attribute discussion numeric
@attribute me numeric
@attribute much numeric
@attribute np numeric
@attribute of numeric
@attribute reminds numeric
@attribute s numeric
@attribute said numeric
@attribute second numeric
@attribute that numeric
@attribute the numeric
@attribute to numeric
@attribute very numeric
@attribute agree numeric
@attribute auto numeric
@attribute boxes numeric
@attribute credit numeric
@attribute dear numeric
@attribute display numeric
@attribute have numeric
@attribute ll numeric
@attribute nlpeople numeric
@attribute sure numeric
@attribute we numeric
@attribute with numeric
@attribute you numeric

@data
{0 ham,1 1,2 1,3 1,4 1,7 1,8 1,12 1,13 1,15 1,16 1,17 1}
{0 ham,5 1,6 1,8 1,9 1,10 1,11 1,14 1,15 1}
{0 spam,18 1,19 1,22 1,25 1,26 1,27 1,30 1}
{0 spam,20 1,21 1,23 1,24 1,28 1,29 1} 
```

**Testing.arff**

```
@relation '_Users_Passionate_Desktop_TestingDiffThanTesting_Text-weka.filters.unsupervised.attribute.StringToWordVector-R1-W1000-prune-rate-1.0-N0-stemmerweka.core.stemmers.NullStemmer-M1-tokenizerweka.core.tokenizers.WordTokenizer -delimiters \" \\r\\n\\t.,;:\\\'\\\"()?!\"'

@attribute @@class@@ {dummy,ham,spam}
@attribute brazilian numeric
@attribute do numeric
@attribute in numeric
@attribute indigenous numeric
@attribute languages numeric
@attribute linguists numeric
@attribute on numeric
@attribute prepare numeric
@attribute research numeric
@attribute specialization numeric
@attribute to numeric
@attribute and numeric
@attribute be numeric
@attribute developed numeric
@attribute evaluation numeric
@attribute of numeric
@attribute program numeric
@attribute published numeric
@attribute reanalysis numeric
@attribute the numeric
@attribute will numeric

@data
{0 ham,1 1,3 1,4 1,5 1,10 1}
{0 ham,2 1,4 1,6 1,7 1,8 1,9 1,11 1}
{0 spam,12 1,15 1,16 1,18 1,19 1}
{0 spam,5 1,13 1,14 1,17 1,20 1,21 1} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:46:37.890

感谢 James 和 Michael，我能够解决“Src 和 Dest 在属性数方面不同：”的问题。

**第 1 步：** 为训练和测试文件夹运行 TextDirectoryLoader。

```
java weka.core.converters.TextDirectoryLoader -dir Testing_Text > testing.arff 
```

**第 2 步：** 按照命令实际上在 training.arff 和 testing.arff 文件中给了我相同数量的属性（http://weka.wikispaces.com/Batch+filtering）。我错误地单独运行 StringToWordVector 命令，这在 training.arff 和 testing.arff 文件中给了我不同数量的属性。

```
java weka.filters.unsupervised.attribute.StringToWordVector -b -i training.arff -o train_std.arff -r testing.arff -s test_std.arff 
```

**现在我面临另一个问题：**

尽管，我在第 3 行给出了 setClassIndex，但它仍然显示错误消息“类未设置！”。

**错误**：

```
weka.core.UnassignedClassException: Class is not set!
weka.core.UnassignedClassException: Class is not set!
    at weka.core.Instance.setClassMissing(Instance.java:544)
    at weka.classifiers.Evaluation.evaluateModelOnceAndRecordPrediction(Evaluation.java:1439)
    at weka.classifiers.Evaluation.evaluateModel(Evaluation.java:1412)
    at ClassifierJan12Pure.main(ClassifierJan12Pure.java:94) 
```

**贾维代码：**

```
1\.        filteredData = new Instances(new BufferedReader(new FileReader("/Users/Passionate/Desktop/train_std.arff")));     

2\.         Instances filteredTests= new Instances(new BufferedReader(new FileReader("/Users/Passionate/Desktop/test_std.arff")));

3\.         filteredData.setClassIndex(filteredData.attribute("@@class@@").index());

4\.         Classifier classifier=new SMO();

5\.         classifier.buildClassifier(filteredData);

6\.         FilteredClassifier filteredClassifier=new FilteredClassifier();
7\.         filteredClassifier.setClassifier(classifier);

8\.         Evaluation eval = new Evaluation(filteredData);
9\.         eval.evaluateModel(filteredClassifier, filteredTests); **// Error line.**

10\.        System.out.println(eval.toSummaryString("\nResults\n======\n", false)); 
```

**train_std.arff 文件：**

```
@relation '_Users_Passionate_Desktop_Training_Text-weka.filters.unsupervised.attribute.StringToWordVector-R1-W1000-prune-rate-1.0-N0-stemmerweka.core.stemmers.NullStemmer-M1-tokenizerweka.core.tokenizers.WordTokenizer -delimiters \" \\r\\n\\t.,;:\\\'\\\"()?!\"'

@attribute @@class@@ {dummy,ham,spam}
@attribute a numeric
@attribute address numeric
@attribute all numeric
@attribute as numeric
@attribute at numeric
@attribute back numeric
@attribute boxes numeric
@attribute credit numeric
@attribute display numeric
@attribute had numeric
@attribute happy numeric
@attribute have numeric
@attribute hoped numeric
@attribute is numeric
@attribute line numeric
@attribute message numeric
@attribute moderators numeric
@attribute new numeric
@attribute not numeric
@attribute of numeric
@attribute on numeric
@attribute our numeric
@attribute remember numeric
@attribute running numeric
@attribute subscribers numeric
@attribute the numeric
@attribute those numeric
@attribute to numeric
@attribute very numeric
@attribute we numeric
@attribute with numeric

@data

{0 ham,1 1,3 1,11 1,16 1,17 1,22 1,25 1,28 1,29 1}
{0 ham,4 1,6 1,10 1,13 1,14 1,15 1,19 1,21 1,26 1,30 1}
{0 spam,2 1,5 1,18 1,20 1,22 1,23 1,24 1,27 1}
{0 spam,7 1,8 1,9 1,12 1,30 1,31 1} 
```

**test_std.arff 文件：**

```
@relation '_Users_Passionate_Desktop_Training_Text-weka.filters.unsupervised.attribute.StringToWordVector-R1-W1000-prune-rate-1.0-N0-stemmerweka.core.stemmers.NullStemmer-M1-tokenizerweka.core.tokenizers.WordTokenizer -delimiters \" \\r\\n\\t.,;:\\\'\\\"()?!\"'

@attribute @@class@@ {dummy,ham,spam}
@attribute a numeric
@attribute address numeric
@attribute all numeric
@attribute as numeric
@attribute at numeric
@attribute back numeric
@attribute boxes numeric
@attribute credit numeric
@attribute display numeric
@attribute had numeric
@attribute happy numeric
@attribute have numeric
@attribute hoped numeric
@attribute is numeric
@attribute line numeric
@attribute message numeric
@attribute moderators numeric
@attribute new numeric
@attribute not numeric
@attribute of numeric
@attribute on numeric
@attribute our numeric
@attribute remember numeric
@attribute running numeric
@attribute subscribers numeric
@attribute the numeric
@attribute those numeric
@attribute to numeric
@attribute very numeric
@attribute we numeric
@attribute with numeric

@data

{0 ham}
{0 ham,21 1,28 1}
{0 spam,20 1}
{0 spam,26 1} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:28:09.470

您列出的属性在训练和测试文件之间有很大不同。

如果分类器只有一组不同的属性，它如何测试使用一组属性构建的分类器？

# django - django page object is not iterable with pagination example

> ID：14189012
> 
> 赞同：0
> 
> 时间：2013-01-07T02:18:57.600
> 
> 标签：django, pagination, views

Following this example,

[Pagination example](https://docs.djangoproject.com/en/dev/topics/pagination/?from=olddocs)

I tried to use it with one of my models.

```
def index(request):
    firstTen = Person.objects.all()
    pagination = Paginator(firstTen, 2)

    page = request.GET.get('page')

    try:
        people = pagination.page('page')
    except PageNotAnInteger:
        people = pagination.page(1)

    return render_to_response('index.html', {'people': people},
        context_instance=RequestContext(request)) 
```

For some reason i am getting `'Page' object is not iterable` when using it in my view like so

```
{% for result in people %}
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:22:33.387

您的脚本中有一个错字：该行`people = pagination.page('page')`应该是`people = pagination.page(page)`. 错误消息的线索是它期待一个`Page`对象，而无论它得到什么似乎都不像一个对象。

# html - Running a Perl/TK GUI inside a web page

> ID：14189013
> 
> 赞同：2
> 
> 时间：2013-01-07T02:19:04.530
> 
> 标签：html, perl, user-interface, browser, perltk

We have a Perl application which contains a Perl/TK based GUI ( some checkboxes, entry fields, etc.) I have been asked to modify the Perl / TK GUI part of the application so that it can be run inside a web page. Is this possible? I found this: [http://oreilly.com/openbook/webclient/ch07.html](http://oreilly.com/openbook/webclient/ch07.html)

however it appears to create a web client and parsing the HTML response to format the output, as opposed to running inside a browser. I would like to know if it is possible to somehow incorporate a Perl/TK GUI into web browser and if so what is the best way to do so? Maybe something like a plugin (ex. [http://www.tcl.tk/software/plugin/](http://www.tcl.tk/software/plugin/))?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:18:59.707

通常的方法是用 HTML/CSS/JavaScript 重写您的应用程序。您在 O'Reilly 网站上展示的示例正好相反——它向您展示了如何编写将呈现 HTML 的 Tk 应用程序。

如果可以提供您需要的浏览器插件，则可以使用它。如果是这种情况，那么问题就很简单了，但是您需要在需要访问您的应用程序的*每台*PC 上安装该插件，并且该插件可能不支持某些 Tk 工具。你所能做的就是尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T12:21:52.987

在精通 Perl/Tk 中提到了一个 Netscape 项目，名为[PerlPlus](http://www.lehigh.edu/~sol0/ptk/ppl/ppl.html)。但看起来[Sourceforge 页面](http://sourceforge.net/projects/perlplusplugin/)已经有一段时间没有被触及了。目的是在 Netscape 浏览器中运行 Perl（和 PerlTk）代码。

# c++ - QTcpSocket receiving transfer

> ID：14189015
> 
> 赞同：2
> 
> 时间：2013-01-07T02:19:27.917
> 
> 标签：c++, qt, qtcpsocket

I'm having issues with receiving a transfer.

QTcpSocket->readAll() does not read enough bytes when I'm sending to it. When I send 15k bytes, it reads only some part of it and then does nothing. What am I doing wrong?

```
QByteArray array;

array = socket->readAll(); //just reads some part, not fully. 
```

Why does this happen?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T02:23:31.600

当您调用`readAll()`. 这是因为 TCP 通信发生在**小数据包**中（每个数据包大约有 1KB 的数据，取决于很多事情）。这些数据包构成一个流，通信线路的另一端将字节写入其中。您必须在接收端组装它们。如何组装它们必须在协议中定义。

要解决此问题，您必须在组装之前等待所有预期的数据。有时不知道需要多少数据，除非您阅读它（取决于协议）。

假设您要实现一个协议，该协议说“在换行之前的一切都是我们称之为*消息*的东西”。现在你想收到这样的*消息*。这是通过连续读取并附加到目标缓冲区（如您的`QByteArray`）来完成的，直到出现换行符。但是，还有另一件事：当您期望第二条*消息*时，它可以紧跟在 TCP 流中的第一条消息之后，因此您不仅要读取第一条消息的结尾，还要读取第二条消息的开头。请记住这一点。

当不处理信号槽连接时，您可以为这样的换行符分隔消息编写一个同步接收器，如下所示：

```
QByteArray array;

while(!array.contains('\n')) {
    socket->waitForReadyRead();
    array += socket->readAll();
}

int bytes = array.indexOf('\n') + 1;     // Find the end of message
QByteArray message = array.left(bytes);  // Cut the message
array = array.mid(bytes);                // Keep the data read too early

processMessage(message); 
```

处理时`QTcpSocket::readyRead()`，你可以做类似的事情。

```
void MyClass::socketReadyRead() // connected to QTcpSocket::readyRead() signal
{
    array += socket->readAll();

    if(array.contains('\n')) {
        int bytes = array.indexOf('\n') + 1;     // Find the end of message
        QByteArray message = array.left(bytes);  // Cut the message
        array = array.mid(bytes);                // Keep the data read too early

        processMessage(message);

        socketReadyRead();                       // re-call myself to process more
    }
} 
```

* * *

当您想读取通过一个 TCP 连接发送的所有内容（直到它被对等方关闭）时，您可以以阻塞方式等待此事件，也可以在连接到正确信号的插槽中处理数据：`QTcpSocket::disconnected`.

阻塞：

```
socket->waitForDisconnected();
QByteArray array = socket->readAll(); 
```

非阻塞（使用槽处理信号）：

```
void MyClass::socketReadyRead() // connected to QTcpSocket::readyRead() signal
{
    array += socket->readAll();
    // Do NOT process yet!
}

void MyClass::socketDisconnected() // connected to QTcpSocket::disconnected() signal
{
    processMessage(array);
} 
```

替代的非阻塞解决方案（基本相同）：

```
// You don't have to connect to QTcpSocket::readyRead() signal in this case

void MyClass::socketDisconnected()
{
    processMessage(socket->readAll());
} 
```

# html - Can't find copyright information in magento

> ID：14189018
> 
> 赞同：2
> 
> 时间：2013-01-07T02:20:17.153
> 
> 标签：html, magento

I'm trying to change the footer info 2006-20012 on my footer of magento site, I've searched all the files at location:

public_html/app/design/frontend/base/default/template/page/html

and saw the “footer.phtml” file still can't find the info. I need help as I have searched almost all folders of my website.

Thanks

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T02:40:04.453

可以通过系统 > 配置 > 设计 > 页脚下的管理员访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:39:39.647

因为它会有所不同，根据您使用的主题，您需要打开模板提示。

从管理面板：系统>>配置>>开发人员>>调试

可以在此处找到指南： [http ://www.westwideweb.com/wp/2009/08/04/magento-how-to-turn-on-template-path-hints-and-inline-translation/](http://www.westwideweb.com/wp/2009/08/04/magento-how-to-turn-on-template-path-hints-and-inline-translation/)

# javascript - 如何使用 JavaScript 设置 CSS 值？

> ID：14189019
> 
> 赞同：2
> 
> 时间：2013-01-07T02:20:42.877
> 
> 标签：javascript, dom

我想更改 ID 为 .html 的 HTML 元素的背景颜色`foo`。我目前有这段代码：

```
var hexcode = new Array('0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f');

// this chooses a random value from the array hexcode
var ranval = function() {
    return hexcode[Math.floor(Math.random()*hexcode.length)];
}

// six ranval() are put together to get color
var colorname = "#" + ranval() + ranval() + ranval() + ranval() + ranval() + ranval();

// trying to put the value on the background of element with "foo" ID.
document.getElementById("foo").style.color = colorname; 
```

此代码引发此错误：

```
Uncaught TypeError: Cannot read property 'style' of null 
```

我确定该 ID`foo`存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T02:26:24.217

发生错误是因为您试图在 DOM 准备好之前访问您的元素。在访问之前等待窗口加载：

```
// Credit: http://paulirish.com/2009/random-hex-color-code-snippets/

function random_color() {
    return '#' + ('00000' + (Math.random() * 16777216 << 0).toString(16)).substr(-6);
}

window.onload = function() {
    document.getElementById("foo").style.backgroundColor = random_color();
}; 
```

**演示：http: [//jsfiddle.net/Blender/xQure/1/](http://jsfiddle.net/Blender/xQure/1/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T02:38:54.900

修复代码的简单方法是：

```
var random_color = function() {
    function randomHex() {
        return Math.floor(Math.random() * 15).toString(16);
    }
    var str = '#';
    for(var i = 6; i--;) {
        str += randomHex();
    }
    return str;
}

window.onload = function() {
    // For your body background color
    document.body.style.backgroundColor = random_color();

    // For your foo element TEXT color
    document.getElementById("foo").style.color = random_color();

    // For your foo element BACKGROUND color
    document.getElementById("foo").style.backgroundColor = random_color();
}; 
```

# r - 如何将数据框中的观察次数存储到变量中？

> ID：14189026
> 
> 赞同：-1
> 
> 时间：2013-01-07T02:21:54.707
> 
> 标签：r

如果我有一个带有*n 个*obs 的数据框，我如何将*n*分配给一个变量？

例如
`x <- obscount(dataframe)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T02:24:15.490

你想要`nrow`：

```
nrow(dataframe) 
```

# java - Java，读写Autoit脚本的输入输出流

> ID：14189032
> 
> 赞同：1
> 
> 时间：2013-01-07T02:23:05.690
> 
> 标签：java, inputstream, outputstream, autoit

我正在尝试写入输出流并读取简单 Autoit 脚本的输入流。如果我不使用 newLine() 字符，我会得到预期的输出：发送一行来自动处理它，发送一行到 java，然后重复。如果我添加 newLine() 字符，似乎每个周期都会向 autoit 发送额外的一行。**为什么会这样？**

**自动：**

```
Local $line

While (True)

    $line = ConsoleRead()

    ConsoleWrite( $line & "to java" & @LF )

    Sleep(25)

WEnd 
```

**爪哇：**

```
p = Runtime.getRuntime().exec("Test");

in = new BufferedReader( new InputStreamReader(p.getInputStream()));
out = new BufferedWriter( new OutputStreamWriter(p.getOutputStream()));

int i=0;

out.write("(" + i++ + ") to autoit");
out.newLine();
out.flush();

while ((line = in.readLine()) != null) {

    System.out.println(line);

    out.write("(" + i + ") to autoit");
    out.newLine();
    out.flush();

    if(i++ > 9)
        p.destroy();
} 
```

**输出：**

```
(0) to autoit
to java
(1) to autoit
(2) to autoit
to java
(3) to autoit
(4) to autoit
(5) to autoit
to java
(6) to autoit
(7) to autoit
(8) to autoit
(9) to autoit
to java 
```

**我预期的输出：**

```
(0) to autoit
to java
(1) to autoit
to java
(2) to autoit
to java
(3) to autoit
to java
(4) to autoit
to java
(5) to autoit
to java
(6) to autoit
to java
(7) to autoit
to java
(8) to autoit
to java
(9) to autoit
to java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T00:47:19.980

我不是这方面的专家，无论如何都不是，但请考虑以下变化：

*   Autoit 的一个问题`ConsoleRead()`是它没有阻塞，我相信它不能识别新行。换句话说，它的行为与 Java 的 Scanner.nextLine() 没有任何相似之处。
*   实际上，它可能会同时读入一大堆行，我不确定这是否可以预测。
*   考虑使用 AutoIt 的`StringSplit(...)`函数以使用 @CRLF 作为分隔符拆分行，然后使用将结果数组中的每个字符串推送到标准输出`ConsoleWrite(...)`
*   考虑让 AutoIt 使用该`StringInStr(...)`函数来测试告诉它退出的令牌。
*   在 Java 方面，我认为您需要在与您编写的线程不同的线程上从标准中读取文本，以免阻塞。
*   我已经使用 Scanner 来解析标准输入，并且喜欢使用 PrintStream 来轻松输出到标准输出。

例如：

EchoCaller2.java

```
import java.io.BufferedOutputStream;
import java.io.IOException;
import java.io.PrintStream;
import java.util.Scanner;

public class EchoCaller2 {
   private static final String AUTO_IT_ECHOER = "Echoer.exe"; // AutoIt program
   private static Scanner scan = null;
   private static PrintStream out = null;

   public static void main(String[] args) throws IOException,
         InterruptedException {
      ProcessBuilder pb2 = new ProcessBuilder(AUTO_IT_ECHOER);
      pb2.redirectErrorStream();
      Process p = pb2.start();
      scan = new Scanner(p.getInputStream());
      out = new PrintStream(new BufferedOutputStream(p.getOutputStream()));

      new Thread(new Runnable() {
         public void run() {
            while (scan.hasNextLine()) {
               System.out.println(scan.nextLine());
            }
            scan.close();
         }
      }).start();

      for (int i = 0; i < 10; i++) {
         out.println("(" + i + ") to autoit ");
         out.flush();
      }

      out.println("exit ");
      out.flush();
      out.close();
   }
} 
```

回声.au3

```
Local $line

While (True)

    $line &= ConsoleRead()

    $strArray = StringSplit($line, @CRLF)

    If $strArray[0] > 0 Then
        For $r = 1 to $strArray[0]
            If StringLen($strArray[$r]) > 0 Then
                ConsoleWrite($strArray[$r] & "to java" & @CRLF)
            EndIf
        Next
    EndIf

    If StringInStr($line, "exit") Then
        Exit
    EndIf

    $line = ""

    Sleep(25)

WEnd 
```

# php - Restler php为所有结果返回404

> ID：14189033
> 
> 赞同：0
> 
> 时间：2013-01-07T02:23:05.190
> 
> 标签：php, rest, http-status-code-404, restler

我一直在研究为我的 API 实现 REST 实现并遇到了 Restler。我已经安装了 Restler 2.0 并且正在使用 Apache 和 php > 5.3。我的课如下：

```
Class Sample 
{
   function gettest()
   {
      return "This is a test";
   }
} 
```

index.php 是：

```
set_include_path(get_include_path() . PATH_SEPARATOR . '/path/to/restler/');
require_once('path/to/Sample.class.php');
spl_autoload_register('spl_autoload');
$r = new Restler();
$r->setSupportedFormats('JsonFormat');
$r->addAPIClass('Sample');
$r->handle(); 
```

我没有使用 .htaccess，而是将以下内容包含在

```
<Directory /path/to/REST_DIR>
    AllowOverride All
    Options +FollowSymLinks     
    DirectoryIndex index.php

RewriteEngine On
RewriteRule ^$ index.php [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]
Order deny,allow
    Allow from all

</Directory> 
```

在我的 httpd.conf 文件中（因为如果您有权编辑它应该会更快）。

每当我尝试以下路径时：

[http://www.myhost.com/REST_DIR/test/](http://www.myhost.com/REST_DIR/test/)

我得到：

```
{
  "error": {
    "code": 404,
    "message": "Not Found"
  }
} 
```

有什么我遗漏的东西或某种更彻底地调试 Restler 以确定它为什么找不到函数 gettest() 的方法吗？

提前致谢。

R

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:16:13.863

根据当前配置，您可以从[http://www.myhost.com/REST_DIR/sample/test获得结果](http://www.myhost.com/REST_DIR/sample/test)

如果您希望 url 改为[http://www.myhost.com/REST_DIR/test](http://www.myhost.com/REST_DIR/test)，请按如下方式更改 index.php

```
set_include_path(get_include_path() . PATH_SEPARATOR . '/path/to/restler/');
require_once('path/to/Sample.class.php');
spl_autoload_register('spl_autoload');
$r = new Restler();
$r->setSupportedFormats('JsonFormat'); //not needed JSON is the default
$r->addAPIClass('Sample',''); // note the empty string
$r->handle(); 
```

# javascript - 动态选择要分离的特定子 div

> ID：14189040
> 
> 赞同：1
> 
> 时间：2013-01-07T02:23:58.340
> 
> 标签：javascript, jquery, dom, parent-child

我有一个按钮，每次单击它时，我都希望能够在 div 包装器内使用“已选择”类将 div 分离。

```
<div class="wrapper" style="height:122px; width:765px;">
    <div class="smallImage"></div>
    <div class="smallImage"></div>
    <div class="smallImage selected"></div>
    <div class="smallImage"></div>
    <div class="smallImage"></div>
</div>

$('.wrapper').children('.smallImage')[0].detach(); 
```

我已经尝试过 children() 和 :nth-child(1) 的其他变体，但没有成功。

基本上，只要我可以选择要分离的 div 的位置，我就会成为一个快乐的编码员，因为如果有意义的话，我需要将 div 分离到后面 2 个以上的位置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:26:35.333

看起来像：

```
$(".wrapper").children('.smallImage.selected').next().detach(); 
```

...是你想要的。这将`.detach`在 div 之后立即调用`.smallImage.selected`div。

如果您有要选择的特定数字，可以使用：

```
.children('.smallImage:not(.selected)').eq(number); 
```

# php - JavaScript 弹出问题

> ID：14189045
> 
> 赞同：1
> 
> 时间：2013-01-07T02:24:22.417
> 
> 标签：php, javascript, html, css, wordpress

我正在研究[http://multiorgasmiclover.com/video-staging/](http://multiorgasmiclover.com/video-staging/)。当用户离开页面时，我会在弹出窗口中显示一条消息。但是，我不希望在有人单击“单击立即订购”时显示弹出窗口。

下面是我的 JavaScript：

```
var exit=true;
    function confirmExit()
            {
            if(exit)
            location.assign('');
            if(exit)   
            alert('**Are you sure you want to LOSE YOUR CHANCE to learn these powerful seduction secrets?\n\nOnce you leave the page your spot WILL be given to the next guy...\n\nThe ONLY way to learn these Top Secret Sexual Attraction Secrets is to STAY on this page...\n\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \nCLICK THE *STAY ON THIS PAGE* BUTTON ON THE NEXT PAGE\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n\n');     
        return "ARE YOU SURE YOU WANT TO LEAVE???\n\nWithout these secret psychological tricks, your success with women may NEVER improve...\n\nSo if you want to STAY and learn all of these POWERFUL DARK SECRETS of attraction...\n\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \nCLICK THE *STAY ON THIS PAGE* BUTTON BELOW\n ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ \n";

            }
            function falseExit(){
var exit=false;
}
if (exit=true){
window.onbeforeunload = function(){ 
return confirmExit();
}
} 
```

这是 WordPress 页面代码：

```
<img class="aligncenter size-full wp-image-283" alt="Oh-My-God" src="http://multiorgasmiclover.com/wp-content/uploads/2012/12/Oh-My-God2.gif" width="810" height="105" />
<center>
<div class="evp-video-wrap" id="evp-865501268b67db9f71b5c2660cc36771-wrap"></div>
<script type="text/javascript" src="http://adtrack1122.com/evp/framework.php?div_id=evp-865501268b67db9f71b5c2660cc36771&amp;id=ZGVjMTh2My0xLm1wNA%3D%3D&amp;v=1356555658&amp;profile=default"></script><script type="text/javascript">// <![CDATA[
_evpInit('ZGVjMTh2My0xLm1wNA==[evp-865501268b67db9f71b5c2660cc36771]');
// ]]></script>
<script>
function falseExit(){
var exit=false;
}
</script>
<script type="text/javascript" src="http://multiorgasmiclover.com/popup.js"></script>

</center>
<center><a href="http://1.multiorg.pay.clickbank.net/?cbfid=9791"  ><img alt="" src="http://multiorgasmiclover.com/images/clicktoorderbutton.PNG" onclick="falseExit()"></a></center>
<noscript><iframe src="https://ssl.clickbank.net/pitch/serv/customfooter.htm?footerKey=L9QMXQFANN2D"
width=100% style= "padding:0px;margin-top:10px" frameborder="0" scrolling="no"></iframe></noscript><script type="text/javascript">// <![CDATA[
    footerPath='https://ssl.clickbank.net';
    footerKey='L9QMXQFANN2D';
// ]]></script>
<script charset="UTF-8" type="text/javascript" src="https://ssl.clickbank.net/script/custom_footer.js"></script><script type="text/javascript" src="http://multiorgasmiclover.com/popup.js"></script> 
```

# linq - Linq - 获取具有开始和长度属性的日历事件

> ID：14189049
> 
> 赞同：0
> 
> 时间：2013-01-07T02:24:54.660
> 
> 标签：linq, entity-framework, calendar

我的应用程序有一个内置的日历系统，它们的数据库模式如下所示：

```
CalendarItem( CalendarItemId bigint, Start datetime, Length int, Blargh nvarchar(MAX) ) 
```

`Start`是事件开始时的 UTC 日期时间值，是事件`Length`的长度（以秒为单位）。全天事件从 0000h 开始，长度为 86400。

我将 Linq 与 Entity Framework 一起使用，并且我想查找日期范围内的事件。很容易找到在两个日期时间之间开始的事件，但我不知道如何找到也在两个日期时间之间**结束的事件。**

这是我当前的代码：

```
public IEnumerable<CalendarItem> GetCalendarItems(DateTime from, DateTime to) {

    var events = from c in db.CalendarItems
                 where c.Start >= from && c.Start <= to
                 orderby c.Start
                 select c;

    return events;
} 
```

如果我使用的是 T-SQL，我需要使用`DATEADD`添加`Length`秒数来`Start`给出一个`End`日期时间，这样就可以了，但我认为我不能在 Linq 中做到这一点。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T02:30:47.260

用 ToList() 函数编辑包括：

如果我没看错，你会想要：

```
var events = (from c in db.CalendarItems
             where c.Start >= from && c.Start <= to
             orderby c.Start
             select c).ToList();
events = events.Where(e => e.Start.AddSeconds(Length) <= to);

return events; 
```

然后，这将为您提供在指定日期范围内开始和结束的事件。

有关 DateTime.AddSeconds() 的更多信息，请访问[此链接](http://msdn.microsoft.com/en-us/library/system.datetime.addseconds.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T02:30:07.713

您需要先调用`ToList()`，然后才能使用该`DateTime.AddSeconds`功能。否则编译器会抱怨找不到该`AddSeconds`函数，因为您的 LINQ 查询将被转换为 SQL 并且 SQL 不包含此`DateTime.AddSeconds`函数。

```
var events = (from c in db.CalendarItems
             where c.Start >= from && c.Start <= to
             orderby c.Start
             select c).ToList();
events = events.Where(e => e.Start.AddSeconds(Length) <= to);
return events; 
```

**编辑：更正了我的逻辑，答案现在与 IronMan84 相同。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:38:16.533

我评估了这些`.ToList`方法，但它们效率低下，因为在修改它以返回发生的事件（无论它们是在某个时间段内开始还是结束）之后，它会从数据库中获取许多不相关的结果。

我还查看了 SqlFunctions 方法，但它们在 EF1.0 中不存在。

我最终在我的实体上下文中使用了带有强类型导入的 Sproc。它并不完美，但它比替代品更好。

当项目最终升级到 .NET4 时，我将切换到 SqlFunctions。无论如何，感谢您的所有建议！

# google-earth-plugin - 谷歌地球插件不起作用

> ID：14189053
> 
> 赞同：0
> 
> 时间：2013-01-07T02:25:45.397
> 
> 标签：google-earth-plugin

我复制了 Google Earth API Developer's Guide 中的代码，部署在 eclipse 的动态 Web 项目中，如下所示。

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Sample</title>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
var ge;
google.load("earth","1");
function init(){
    google.earth.createInstance('map3d',initCB,failureCB);
}
function initCB(instance){
    ge=instance;
    ge.getWindow().setVisibility(true);
    ge.getNavigationControl().setVisibility(ge.VISIBILITY_SHOW);
}
function failureCB(errorCode){
    alert("failure");
}
google.setOnloadCallback(init);
</script>

</head>
<body>
<div id="map3d" style="height:400px;width:600px;border:1px solid red"></div>
</body> 
```

网站显示红框但地球不存在，我的代码有什么问题，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T01:02:46.487

你有一个拼写错误

google.setOnloadCallback(init);

应该：

google.setOnLoadCallback(init);

# java - 在Java中确定屏幕高度

> ID：14189057
> 
> 赞同：0
> 
> 时间：2013-01-07T02:25:59.930
> 
> 标签：java, swing, jframe, awt, fullscreen

我的 JFrame 使用以下命令处于全屏模式：

```
setExtendedState(JFrame.MAXIMIZED_BOTH);
setUndecorated(true); 
```

我想知道高度。请注意， Toolkit.getDefaultToolkit().getScreenSize() 不起作用，因为我在 Mac 上，实际高度应不包括屏幕顶部 Mac 栏的高度。

例如，在 Windows 的情况下，高度应不包括开始栏。因此，我想知道我拥有的窗口空间的真实高度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:38:45.090

我用这个

```
public static Rectangle getScreenViewableBounds() {

    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();

    Rectangle bounds = new Rectangle(0, 0, 0, 0);

    if (gd != null) {

        GraphicsConfiguration gc = gd.getDefaultConfiguration();
        bounds = gc.getBounds();

        Insets insets = Toolkit.getDefaultToolkit().getScreenInsets(gc);

        bounds.x += insets.left;
        bounds.y += insets.top;
        bounds.width -= (insets.left + insets.right);
        bounds.height -= (insets.top + insets.bottom);

    }

    return bounds;

} 
```

确定“安全”的屏幕边界。这考虑了屏幕插图并产生一个“安全”可视区域的矩形......

**更新**

经过一些测试，我很满意（就我有多个屏幕的 Windows 而言），`GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds()`默认监视器似乎返回了相同的结果。前面提到的方法的好处是，它可以用来确定任何设备的“安全”边界

归功于[Java - Mac 上的屏幕大小](https://stackoverflow.com/questions/7083410/java-screen-size-on-a-mac)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:33:29.273

frame.getContentPane().getHeight();

当你使用这个方法时，你得到的是 JFrame 的高度，而不是屏幕的高度。它还排除了边界高度。

# algorithm - 最佳地重新排序钱包中的卡？

> ID：14189063
> 
> 赞同：6
> 
> 时间：2013-01-07T02:26:34.790
> 
> 标签：algorithm, data-structures, hash, language-agnostic, linked-list

前几天我出去买杂货，需要在钱包里搜索我的信用卡、客户奖励（忠诚）卡和带照片的身份证。我的钱包里还有几十张其他卡（工作证、其他信用卡等），所以我花了一段时间才找到所有东西。

我的钱包里有六个可以放卡片的插槽，每个插槽中的第一张卡最初都是可见的。如果我想找到一张特定的卡，我必须记住它在哪个插槽中，然后一次查看该插槽中的所有卡以找到它。越靠近插槽的前面，就越容易找到它。

我突然想到这几乎是一个数据结构问题。假设你有一个由 k 个链表组成的数据结构，每个链表可以存储任意数量的元素。您希望以最小化查找的方式将元素分配到链接列表中。您可以使用任何您想要的系统将元素分配到不同的列表中，并且可以随时重新排序列表。鉴于此设置，在任何假设下，是否存在对列表进行排序的最佳方法：

1.  预先给定了访问每个元素的概率，并且访问是独立的，或者
2.  您事先不知道什么时候会访问哪些元素？

我在钱包中使用的非正式系统是根据用例（ID、信用卡、会员卡等）将卡“散列”到不同的插槽中，然后将每个插槽中的元素按访问频率粗略排序。但是，也许有更好的方法来做到这一点（例如，将 k 最常用的元素存储在每个插槽的前面，而不管它们的用例如何）。

是否有解决此问题的已知系统？这是数据结构中众所周知的问题吗？如果是这样，最佳解决方案是什么？

（如果这似乎与编程无关：我可以想象一个应用程序，其中用户有几个常用项目的下拉列表，并希望以最小化查找所需时间的方式保持这些项目的顺序一个特定的项目。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:25:31.743

虽然不是一般 k 的完整答案，[但 Sleator 和 Tarjan 于 1985 年发表的这篇论文](http://www.cs.cmu.edu/~sleator/papers/amortized-efficiency.pdf)对 k=1 的情况下几种动态列表更新算法的摊销复杂度进行了有益的分析。事实证明，**前移非常好**：假设每个项目的访问概率是固定的，它永远不需要超过最佳（静态）算法所需的步骤（移动和交换）的两倍，其中所有元素都按概率的非递增顺序列出。

有趣的是，其他一些似是而非的启发式方法——即在找到所需元素后与前一个元素交换，并根据明确的频率计数保持顺序——并不共享这个理想的属性。OTOH，第 1 页。2 他们提到，Rivest 较早的一篇论文表明，在 swap-with-previous 下任何访问的*预期*摊销成本 <= 在 move-to-front 下的相应成本。

我只阅读了前几页，但它看起来与我有关。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:56:01.523

您需要查看跳过列表。为有特快列车和普通列车的列车系统安排车站也存在类似问题。特快列车仅在特快车站停靠，而普通列车则在普通车站和特快车站停靠。应该在哪里放置快车站点，以便在从起点站到任何站点时，可以最大限度地减少平均停靠站数。

解决方案是使用三进制数的站点（即，1、3、6、10 等，其中 T_n = n * (n + 1) / 2）。

这是假设所有站点（或卡）都有可能被访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T06:08:29.853

如果你事先知道你的n张卡的访问概率，并且你有k个钱包插槽并且访问是独立的，那么贪婪的解决方案是不是很明显是最优的？也就是说，最常访问的k张牌放在口袋的前面，其次最常访问的k张放在后面，等等？（您永远不会希望将较低概率的牌排在较高概率的牌之前。）

如果您不知道访问概率，但您确实知道它们存在并且卡访问是独立的，我想类似地对卡进行排序，但是按目前看到的访问次数是渐近最优的。（移到前面也很酷，但我看不出在这里使用它的明显理由。）

如果你也惩罚纸牌移动，也许你会得到一些有趣的东西；如果我对卡片访问有任何已知的概率分布，无论是否独立，我都会在每次访问时贪婪地重新排序卡片。

# css - 更改输入文本字段的选定字符的背景颜色

> ID：14189070
> 
> 赞同：3
> 
> 时间：2013-01-07T02:27:13.827
> 
> 标签：css, regex, background-color, html

用户在传统的 html 输入字段（type="text"）中输入一个字符串。例如，假设输入是“2013/13/29”。在验证时，RegEx 确定 13 无效。我希望“13”的背景颜色变为红色，而所有其他角色的背景颜色变为绿色。这可以在 HTML 中完成吗？也许在输入标签内使用跨度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:35:17.250

简短的回答，您不能在输入标签内添加跨度。尝试使用 jqueryUI datetimepicker，它将为您节省大量时间。 [http://jqueryui.com/datepicker/](http://jqueryui.com/datepicker/)

# azure - 部署到云时无法加载文件或程序集“Microsoft.WindowsAzure.ServiceRuntime, Version=1.8.0.0

> ID：14189071
> 
> 赞同：16
> 
> 时间：2013-01-07T02:27:34.510
> 
> 标签：azure, azure-web-roles

我有一个 MVC 4 应用程序在本地运行良好，但在部署到 Azure 时失败并显示此消息：

`[FileNotFoundException: Could not load file or assembly Microsoft.WindowsAzure.ServiceRuntime, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.] Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitor.GetDefaultStartupInfoForCurrentRoleInstance() +0 Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener..ctor() +40`

我确定我引用了 Microsoft.WindowsAzure.ServiceRuntime 1.8 版并将其设置为复制本地。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T20:49:42.457

因此，从您的屏幕截图看来，您创建了一个网站（不是云服务或 Web 角色）。程序集**Microsoft.WindowsAzure.Diagnostics**和**Microsoft.WindowsAzure.ServiceRuntime**不能在网站中使用。

如果要创建 Web 角色，请打开 Visual Studio > 文件 > 新建项目 > 云 > Windows Azure 云服务 > 添加 MVC Web 角色 > 确定。完成后，右键单击 Azure 项目并选择**Publish**。这将允许您创建一个包含您的 Web 角色的新云服务。如果您像这样创建项目，您将能够使用**Microsoft.WindowsAzure.Diagnostics**和**Microsoft.WindowsAzure.ServiceRuntime**程序集。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-07T16:21:36.750

检查项目中的引用并确保所有 Azure 引用都标记为 Copy Local = True。此外，由于该应用正在寻找运行时版本 1.8，因此您显然使用了 SDK 1.8 中的至少一个程序集 - C:\Program Files\Microsoft SDKs\Windows Azure.NET SDK\2012-10\ref... **注意：2012- 10** . 然后检查使用的参考版本：

*   诊断：1.8.0.0
*   运行时：1.8.0.0

这种程序集不匹配通常发生，因为您引用了不同的 SDK 版本和/或您的 ref 没有标记为 copy local = true。

至于 Azure 分类，有网站（在网站下的门户网站上）和云服务，它们可以有 WebRoles（网站、wcf 服务）或 WorkerRoles（后端处理）。

对于 CloudServices，OS 系列和 GuestOS 在 ServiceConfiguration.cscfg 文件的“ServiceConfiguration”元素中指定：

```
<ServiceConfiguration serviceName="MyWebRole" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="3" osVersion="*" schemaVersion="2012-10.1.8"> 
```

osFamily 2 = Server 2008R2 和 3 = Server 2012。osVersion 指定 GuestOS，并且对于最新版本应该几乎总是“*”。

如果一切都失败了，并且在 bin 中部署了正确的 DLL，请尝试在 web.config 中添加程序集绑定重定向：

```
<dependentAssembly>
  <assemblyIdentity name="Microsoft.WindowsAzure.ServiceRuntime" publicKeyToken="31bf3856ad364e35" />
  <bindingRedirect oldVersion="1.0.0.0-1.8.0.0" newVersion="1.8.0.0" />
</dependentAssembly> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T13:52:27.580

由于您在尝试启动 DiagnosticMonitor 时遇到错误，您能否检查一下您是否也在引用 1.8 版本的**Microsoft.WindowsAzure.Diagnostics**？

它应该位于*C:\Program Files\Microsoft SDKs\Windows Azure.NET SDK\2012-06\ref*。

# java - 在服务中解压缩 .zip 文件会使应用程序冻结，直到它完成解压缩，为什么？

> ID：14189072
> 
> 赞同：1
> 
> 时间：2013-01-07T02:27:38.403
> 
> 标签：java, android, service, android-asynctask, zip

我实现了代码来处理异步任务，它运行良好，但如果用户退出应用程序，它会很快被杀死，所以我决定用服务尝试它，它运行良好，但它使应用程序冻结。

所以这是我的解压类：

```
 public class Decompress {
    private String _zipFile;
    private String _location;
    ZipEntry ze = null;

    public Decompress(String zipFile, String location) {
        _zipFile = zipFile;
        _location = location;

        _dirChecker("");
    }

    public void unzip() {
        try  {
            FileInputStream fin = new FileInputStream(_zipFile);
            ZipInputStream zin = new ZipInputStream(fin);
            while ((ze = zin.getNextEntry()) != null) {
                //Log.v("Decompress", "Unzipping " + ze.getName()); 

                if(ze.isDirectory()) {
                    _dirChecker(ze.getName());
                } else {
                    FileOutputStream fout = new FileOutputStream(_location + ze.getName());
                    for (int c = zin.read(); c != -1; c = zin.read()) {
                        fout.write(c);
                    }

                    zin.closeEntry();
                    fout.close();
                } 

            }
            zin.close();
        } catch(Exception e) {
            Log.e("Decompress", "unzip", e);
        }

    }

    private void _dirChecker(String dir) {
        File f = new File(_location + dir);

        if(!f.isDirectory()) {
            f.mkdirs();
        }
    }
} 
```

这是我的解压缩服务调用：

```
@Override
public void onStart(Intent intent, int startid)
{

    try
    {
        zipFile = intent.getStringExtra("zipFile");
        zipLocation = intent.getStringExtra("unzipLocation");
        String fileS = intent.getStringExtra("file");
        file = new File(fileS);
        fin = new FileInputStream(zipFile); 
        zin = new ZipInputStream(fin);

        while (zin.getNextEntry() != null) {
            numFiles++;
        }
    }
    catch (FileNotFoundException e)
    {}
    catch (IOException e)
    {}

    d = new Decompress(zipFile, zipLocation);
    d.unzip();

} 
```

现在这是我使用异步任务调用它的方式：

```
@Override
    protected Void doInBackground(Void... params) {

        d.unzip();

        return null;
    } 
```

现在我的问题是，为什么使用 async tsk 我的应用程序不会冻结，它会继续解压缩，让我用一个按钮取消它，但是使用服务它会使应用程序滞后？我什至收到一条关于 MyApp 没有响应的消息，您要关闭它吗？

编辑：我的服务呼叫开始

```
@Override
    protected Void doInBackground(Void... params) {

        Intent intent = new Intent(DownloadFiles.this, MyService.class);
        String unzipLocation = Environment.getExternalStorageDirectory().toString()+"/Android/data/";
        String zipFile = Environment.getExternalStorageDirectory().toString()+"/Android/data/test.zip"; 
        intent.putExtra("zipFile", zipFile);
        intent.putExtra("unzipLocation", unzipLocation);
        intent.putExtra("file", Environment.getExternalStorageDirectory().toString()+"/Android/data/");
        startService(intent);

        try {
            FileInputStream fin = new FileInputStream(zipFile); 
            ZipInputStream zin = new ZipInputStream(fin);

            while (zin.getNextEntry() != null) {
                 numFiles++;
                }
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:34:28.233

服务**也在**UI（主）线程中运行，因此您也需要在那里实现 AsyncTask 或单独的线程方法。

[文档](http://developer.android.com/reference/android/app/Service.html)在什么**是服务？**

> 服务不是线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。

编辑：请注意，如果您从后台线程启动服务，该服务仍在主线程中运行。按照这个 SO [answer](https://stackoverflow.com/a/12740062/1815485)。正如文档所说，这应该是有道理的：

> 当一个 Service 组件被实际创建时，出于上述任一原因，系统实际所做的只是实例化该组件并在**主线程**上调用其 onCreate() 和任何其他适当的回调。由服务以适当的行为来实现这些，例如创建一个辅助线程来执行其工作。

这最终意味着无论您如何启动服务，您都应该始终在服务中实现单独的 AsyncTask/Thread 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T02:43:16.473

如果您不需要 AsyncTask 的`onPreExecute()`和`onPostExecute()`方法，请尝试在单独的后台线程中运行它，但仍然存在阻塞 UI 线程的操作的问题。

```
Thread t = new Thread() {
    public void run() {
        d = new Decompress(zipFile, zipLocation);
        d.unzip();
    }
};
t.start(); 
```

简单地从后台线程启动服务并不意味着它将从主 UI 线程启动。这是其启动的默认设置，您必须在 Service 中创建一个新线程才能绕过它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T02:52:45.497

扩展AC的观点：您需要创建后台线程以从*服务内部*解压缩文件，因为服务是在主线程上创建并运行的，无论您是否在另一个线程中启动它。

您基本上需要在服务中完全按照您在服务外所做的操作（即将“解压缩”调用放入 AsyncTask 中，然后执行任务）。

（附录）使用服务的目的不是创建单独的线程，而是将耗时的处理从基于 UI 的应用程序中分离出来。这意味着 UI 可以被操作系统破坏并恢复资源，而服务仍在运行。因此，关于是在应用程序本身还是在服务中使用 AsyncTask（或线程）的决定实际上是关于该操作是否应该独立于应用程序界面继续进行。使用 TitaniumBackup 恢复应用程序就是一个很好的例子：一旦开始恢复，应用程序 UI 就不再需要了。

# android - 当我添加“android:id”时，为什么我的 android 应用程序会崩溃？

> ID：14189074
> 
> 赞同：4
> 
> 时间：2013-01-07T02:28:12.890
> 
> 标签：android, android-layout, android-widget, netbeans-7, netbeans-plugins

我正在编写一个 Android 2.3.3 应用程序并在我的三星 S3 手机上对其进行测试。我在应用程序中添加了一个自定义视图以绘制图形，现在当我尝试在手机上运行该应用程序时，程序立即崩溃（没有调试信息）。

我已将错误隔离到 XML 布局中的一行代码 - 即：

```
android:id="@+id/graph" 
```

我的项目中没有任何其他具有此 ID 的视图，因此那里不应该有冲突。我在 Windows 7 x64 上使用带有 NBAndroid 插件的 Netbeans 7.2 进行开发，并且在构建 android 应用程序之前没有任何问题。

这是导致崩溃的代码片段。

```
<com.customApp.GraphView
android:id="@+id/graph"
android:layout_width="fill_parent"
android:layout_height="40sp"
/> 
```

其他注意事项：

*   将 id 从“graph”更改为其他内容似乎没有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T04:08:18.357

我设法通过在 NetBeans 中进行“构建清理”来解决问题。项目按现在应该的方式构建和运行。

我的猜测是生成的源文件之一没有正确构建。哦，好的，谢谢回复！

# git - Git：如何将除当前工作之外的所有内容恢复到先前的提交

> ID：14189076
> 
> 赞同：2
> 
> 时间：2013-01-07T02:28:35.197
> 
> 标签：git

在 git 中，我已经跑到`git add -u && git commit -a --amend`我的工作更改中了。我没有将新的提交推送到原点。我现在发现以前的一些 git 版本破坏了构建。

我想保留我的新提交，但回到最后一个已知的“好”git 修订版：说`04c06eb2acf154ba0e7f4e27044d1dffa6a42473`.

我可以跑步`git reset --hard 04c06eb2acf154ba0e7f4e27044d1dffa6a42473`，但这会丢失我当前的修订版

我也不能使用`git rebase -i HEAD~100`，因为最后一个好分支是很久以前的了。

达到我想要的结果的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:27:38.523

我只会“备份”你的最后一次提交

```
git format-patch -1 
```

然后撤消“破坏”构建的内容。在此之后，您可能需要手动应用补丁文件，但您不会丢失任何东西。

# excel - Excel反向匹配

> ID：14189085
> 
> 赞同：1
> 
> 时间：2013-01-07T02:29:41.917
> 
> 标签：excel, match

我正在尝试找到一种在 Excel 中进行反向匹配的方法。`TRUE`我有一列 TRUE/FALSE 语句，我需要找到一种方法来在这一列中找到匹配项和反向匹配项，以找出两个方向上的语句之间的差异。

```
True
False
False
False
True
False
False
True 
```

在这种情况下，从中间 True 语句的角度来看，正常`MATCH`函数下降将返回数字 4。我试图找到一个额外的匹配函数，它会向上查看`TRUE`语句并返回值 5

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T04:18:09.673

又快又脏：

`A1:A7`：真/假
`A8`：数组公式：`{=LARGE(IF(A1:A7=TRUE;ROW(A1:A7);"");1)}`

结果将是`TRUE`距下方最近的行号。通过 Shift-Ctrl-Enter 在公式窗口中插入公式。花括号由 Excel 插入，而不是由用户插入。

如果您需要从最后一个转变`TRUE`： `{=LARGE(IF(A1:A7=TRUE;ROW(A1:A7);"");2)}`

`TRUE`更改公式中的最后一个数字会使您从下方移至第 n 个。

替换`LARGE`为`SMALL`将给出上面的行号。因此可以通过组合公式找到相关组合之间的转换。

# android-layout - layout_width 属性 android

> ID：14189087
> 
> 赞同：0
> 
> 时间：2013-01-07T02:29:58.320
> 
> 标签：android-layout

我收到错误“你必须提供一个 layout_width 属性 android”有什么建议吗？我以为是第一行的 xmlns 行，但仍然没有。

```
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_parent"
    android:layout_height="wrap_parent"
    android:layout_gravity="center"
    android:columnCount="2"
    android:orientation="horizontal" >

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:text="2" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="3" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="4" />

</GridLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:36:36.703

使用`wrap_content`而不是不存在`wrap_parent`

# android - SearchView：无法捕获关闭事件

> ID：14189091
> 
> 赞同：2
> 
> 时间：2013-01-07T02:30:18.133
> 
> 标签：android, actionbarsherlock

我使用 ActionBarShellock 4.2。我认为当我单击关闭按钮时会调用 OnCloseListener()，但当我这样做时没有响应。

```
mSearchView.setOnCloseListener(new OnCloseListener() {
        @Override
        public boolean onClose() {
            Toast.makeText(mContext, "OnCloseListener", 1000).show();
            return false;
        }
    }); 
```

我试图调用 getChildAt(index) 来获取关闭按钮。然后我认为这是不安全的，因为 SearchView 不是我自己的代码。那么，如何捕获关闭事件？我做错了吗？
提前致谢。

![在此处输入图像描述](../Images/97271233e56e658049ea79b207b5a3ae.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-08T12:47:12.200

只需获取您的 menuItem，然后 setOnActionExpandListener。然后覆盖未实现的方法。

```
@Override
public boolean onMenuItemActionExpand(MenuItem item) {

    return true;
}

@Override
public boolean onMenuItemActionCollapse(MenuItem item) {

   //do something on close
   // you must return true
    return true;
} 
```

哈克完成了祝你好运

# android - 带有 10 个标记的 Android 基本 API v2 MapActivity outOfMemory

> ID：14189095
> 
> 赞同：7
> 
> 时间：2013-01-07T02:30:37.787
> 
> 标签：android, google-maps, memory-leaks, bitmap, out-of-memory

我正在尝试使用带有 Android 支持库的 Android Maps API v2 来实现地图，在带有 Android 2.2 的 Droid2 上进行测试 一切都运行良好，但只是在短时间内。一旦我添加了 10 个标记并尝试移动地图或放大/缩小，每秒都会引发以下错误，从而导致可怕的异常和崩溃。我在后台什么也没做。实际上只有地图和 10 个标记。

谢谢你的任何提示。

马丁

**错误：**

```
01-07 03:03:23.221: DEBUG/dalvikvm(12914): GC_FOR_MALLOC freed 38714 objects / 1797752 bytes in 74ms
01-07 03:03:23.378: ERROR/dalvikvm-heap(12914): 1048576-byte external allocation too large for this process.
01-07 03:03:23.378: ERROR/GraphicsJNI(12914): VM won't let us allocate 1048576 bytes
01-07 03:03:23.378: WARN/System.err(12914): OutOfMemory
01-07 03:03:23.432: DEBUG/dalvikvm(12914): GC_EXPLICIT freed 8793 objects / 601896 bytes in 58ms
01-07 03:03:23.862: ERROR/dalvikvm-heap(12914): 1048576-byte external allocation too large for this process.
01-07 03:03:23.862: ERROR/GraphicsJNI(12914): VM won't let us allocate 1048576 bytes
01-07 03:03:23.870: WARN/System.err(12914): OutOfMemory 
```

**例外：**

```
01-07 02:45:12.432: ERROR/dalvikvm-heap(12315): 1048576-byte external allocation too     large for this process.
01-07 02:45:12.432: ERROR/GraphicsJNI(12315): VM won't let us allocate 1048576 bytes
01-07 02:45:12.464: WARN/dalvikvm(12315): threadid=17: thread exiting with uncaught exception (group=0x400208b0)
01-07 02:45:12.479: ERROR/AndroidRuntime(12315): FATAL EXCEPTION: GLThread 18
    java.lang.OutOfMemoryError: bitmap size exceeds VM budget
    at android.graphics.Bitmap.nativeCreate(Native Method)
    at android.graphics.Bitmap.createBitmap(Bitmap.java:498)
    at maps.r.h.a(Unknown Source)
    at maps.cp.a.a(Unknown Source)
    at maps.cp.a.a(Unknown Source)
    at maps.cp.a.b(Unknown Source)
    at maps.m.n.a(Unknown Source)
    at maps.m.at.a(Unknown Source)
    at maps.a.bq.a(Unknown Source)
    at maps.a.w.a(Unknown Source)
    at maps.a.w.a(Unknown Source)
    at maps.a.w.a(Unknown Source)
    at maps.a.ba.m(Unknown Source)
    at maps.a.ba.run(Unknown Source) 
```

**布局：**

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      xmlns:map="http://schemas.android.com/apk/res-auto"
      class="com.google.android.gms.maps.SupportMapFragment"
      android:id="@+id/map"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      map:cameraTargetLat="49.85"
      map:cameraTargetLng="15.42"
      map:mapType="normal"
      map:uiCompass="true"
      map:uiRotateGestures="true"
      map:uiScrollGestures="true"
      map:uiTiltGestures="true"
      map:uiZoomControls="false"
      map:uiZoomGestures="true"
    /> 
```

**标记：**

```
 for (int i = 0; i < 9; i++) {

    mMap.addMarker(new MarkerOptions()
            .position(new LatLng(49d, 16d))
            .draggable(true)
            .title("BUUUUU")
            .snippet("TEST"));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:39:55.900

标记图像的大小是多少？尝试将标记图像缩小

# c# - 插入数据库后将组合框重新绑定到静态 ObservableCollection

> ID：14189100
> 
> 赞同：0
> 
> 时间：2013-01-07T02:31:26.277
> 
> 标签：c#, wpf, data-binding, static

我有一个静态变量来从数据库中检索组列表。

```
public static ObservableCollection<Group> GroupList 
{
 get
 {
  return Group.getGroups(); //<-- this retrieve group from database
 }
} 
```

然后我将我的组合框绑定到我的 xaml 上的这个静态属性。

```
<ComboBox Name="cmbGroup" VerticalAlignment="Top" Width="120" ItemsSource="{Binding Source={x:Static wpf:Group.GroupList}}" DisplayMemberPath="Name" SelectedValuePath="Id" SelectionChanged="cmbGroup_SelectionChanged" /> 
```

到目前为止，一切正常。然后我在文本框中输入新组并将 1 行插入数据库。成功插入数据库后，我的组合框没有改变。我想要的是我的组合框立即更新。
据我了解，我需要以某种方式更新**静态 GroupList**的属性，以便我与组合框的绑定再次起作用。知道如何实现这一目标吗？

作为旁注，我使用这种方法，因此我只需要编写 1 次代码即可从数据库中检索组列表，并且无需在后面的代码中编写多行代码。使用这种方法，我只需要**ItemsSource="{Binding Source={x:Static wpf:Group.GroupList}}"**来绑定组合框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:56:37.190

别客气。

如果您使用的是实体框架，那么只需更新本地对象并让 DbContext/ObjectContext 为您处理更改跟踪就简单多了。那么就不需要记住某人何时重新查询数据库。然后，团队成员可以只关心对象，而不必担心一切是否同步。如果在表单可用时对象上下文的生命周期持续存在，那么您可以设置一个计时器以按设定的时间间隔运行，调用 SaveChanges，并使用数据库中的最新数据重新实例化 DbContext。由于您使用的是 ObservableCollection，这提供了双向绑定，当添加本地对象时，UI 中绑定的任何集合都会将此更改反映给最终用户。

但是，如果 DbContext 的生命周期仅适用于正在执行的“工作单元”，那么每次使用 DbContext 的后续调用都应引入最新数据，因为您将使用 DbContext/ObjectContext 的新实例。有关这方面的更多信息，可以从我之前与另一位对此进行详细说明的用户进行的讨论中[找到](https://stackoverflow.com/questions/13976639/check-to-see-if-entity-has-been-deleted)

# postgresql - PostgreSQL：将 TEXT 列视为十六进制数

> ID：14189103
> 
> 赞同：2
> 
> 时间：2013-01-07T02:32:12.973
> 
> 标签：postgresql

我有一个表，其中有一`TEXT`列包含十六进制数字。我现在需要将它们表示为它们真正的整数，但找不到这样做的方法（类似于`to_hex()`反向）。

我知道我可以像这样转换*文字*十六进制值：

```
SELECT x'DEADBEEF'; 
```

但是，如果要转换的值来自列，我该如何应用这样的东西？连接`'x'`到列名显然不起作用，因为它不再是字符串文字。

[我在PostgreSQL 邮件列表](http://archives.postgresql.org/pgsql-general/2004-05/msg00923.php)中发现了一个非常丑陋的函数，它将一个查询字符串拼凑在一起，这样函数参数又是一个文字，然后执行该函数，但这种方法完全是反常的——必须有一个更好的方式。至少我希望如此，因为这条消息已经有将近十年的历史了……</p>

*当然，我知道首先将有问题的值作为整数存储在数据库中是可行的方法。但在这种情况下这是不可能的，所以我一直试图破译这些字符串......）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:45:13.880

嗯，可能有更简单的方法来做到这一点。

```
CREATE FUNCTION from_hex(text) RETURNS integer AS $$
DECLARE
    x bytea;
BEGIN
    x := decode($1, 'hex');
    return (get_byte(x, 0) << 24) | (get_byte(x, 1) << 16) |
           (get_byte(x, 2) << 8) | get_byte(x, 3);
END
$$ LANGUAGE plpgsql; 
```

请注意，正如所写，这仅适用于 8 位十六进制数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T02:58:48.480

以下功能与邮件列表中该帖子中的功能大致相同。事实上，[我也从邮件列表中获取了它们](http://archives.postgresql.org/pgsql-novice/2010-10/msg00123.php)，但来自较新的帖子。我看不出他们有什么问题。我在迁移一个小数据集时只使用过一次。

如果您可以指出任何可能源自其使用的“反常”，请随意投反对票。

使用`INTEGER`数据类型：

```
CREATE OR REPLACE FUNCTION hex_to_int(hexval varchar) RETURNS integer AS $$
DECLARE
  result  int;
BEGIN
EXECUTE 'SELECT x''' || hexval || '''::int' INTO result;
  RETURN result;
END;
$$
LANGUAGE 'plpgsql' IMMUTABLE STRICT; 
```

使用`BIGINT`数据类型：

```
CREATE OR REPLACE FUNCTION hex_to_bigint(hexval varchar) RETURNS bigint AS $$
DECLARE
   result  bigint;
BEGIN
EXECUTE 'SELECT x''' || hexval || '''::bigint' INTO result;
 RETURN result;
END;
$$
LANGUAGE 'plpgsql' IMMUTABLE STRICT; 
```

# javascript - 如何使用 jQuery 实现这个酷炫的弹出 div 效果？

> ID：14189104
> 
> 赞同：0
> 
> 时间：2013-01-07T02:32:16.583
> 
> 标签：javascript, jquery, html, css

当您单击页面[http://www.mansory.com/en/dealers](http://www.mansory.com/en/dealers)上的图标时，您会发现一个 div 弹出显示一些信息。我只是无法弄清楚他们是如何使用 css/jQuery 的东西来实现效果的。作用机制是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:58:08.990

这种机制称为动画。他们只是显示/隐藏 div 并不断更改弹出窗口的位置。

[在http://api.jquery.com/animate/](http://api.jquery.com/animate/)上查看更多信息

[我在这里](http://jsfiddle.net/AZfvk/2/)做了一个简单的演示

HTML：

```
<div class='container'>
    <button id="btnShow">Show</button>
    <div class='menu' style='display: none'>
        <button id="btnHide">Close</button><br/>
        Ernst-Heinkel-Strasse 7,<br/>
        DE-71394 Kernen i.R. Germany<br/>
        Contact <br/>
        Telefon: 07151 / 994 64 -0<br/>
        Fax: 07151 / 994 64 -22<br/>
        www.herceg.com <br/>
        email: info@herceg.com <br/>
    </div>
</div> 
```

JS：

```
$(document).ready(function(){
    $('#btnShow').click(function(){
        $('.menu').show().css("top", "400px").animate({top: 50}, 200);
    });

    $('#btnHide').click(function(){
        $('.menu').hide();
    });
}); 
```

CSS：

```
.container {
    with: 400px;
    height: 300px;
    border: 1px solid black;
}

.menu {
    position: absolute;
    border: 1px solid black;
    background: #fff;
    left: 180px
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:48:30.960

他们只是显示/隐藏一个 div 并将其绝对放置在页面顶部。查看带有 id 的 div，`infobox`您将看到执行此操作所需的所有 css。里面`infobox`已经是不同国家/地区的所有文本，每个文本都被一个带有属性的 div 包围`display:none`。根据您单击的国家/地区，他们会将显示属性更改为`block`相应的 div 和`display:none`所有其余部分。

# jquery - jQuery 选择器取决于 span 标签的值

> ID：14189106
> 
> 赞同：0
> 
> 时间：2013-01-07T02:32:52.813
> 
> 标签：jquery

假设我有这个 HTML：

```
<div id="mydiv">
<p>
<span>My first span</span>
</p>
<p>
<span>My second span</span>
</p>
<p>
<span>My third span</span>
</p> 
```

我的问题是我将 HTML 附加到 p 标签：

```
$('#mydiv p').append('<img src="http://example.com/myimage.png">'); 
```

但我只想将跨度标记文本“我的第二个跨度”（或任何其他 p 标记及其各自的跨度文本，具体取决于我的应用程序）附加到第二个 p。所以这是附加后生成的 HTML：

```
<p>
<span>My second span</span><img src="http://example.com/myimage.png">
</p> 
```

一个限制是我无法编辑原始 HTML 源代码，因此我无法为它们分配类或 ID 选择器。

我将如何修改我的 jQuery 选择器以使用特定跨度文本定位特定 p？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T02:38:19.537

您可以使用 :contains() 选择器来实现这一点。

```
$("#mydiv span:contains('My second span')") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:34:49.003

尝试这个：

```
$('#mydiv p:eq(1)').append('<img src="http://example.com/myimage.png">'); 
```

编辑：

对于您更新的问题，上面 Daveo 的回答建议的选择器应该可以做到。但是，在这种情况下，您需要使用`after`而不是`append`：

```
$("#mydiv span:contains('My second span')").after('<img src="http://example.com/myimage.png">'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T02:39:39.303

这应该有效：（`$('#mydiv p:nth-child(2)')`即选择带有`p`标签的第二个孩子`mydiv`）

当然，您可以通过硬编码文本选择该元素，但我认为这不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T02:39:54.890

从解释中假设您希望此文本具体。可以使用`:contains(text)`选择器。

```
var txt="My second span" ;
/* selector finds the span, parent() moves back up to "p" tag*/
$('#mydiv p span:contains('+txt+')').parent().append('<img ...>'); 
```

API 参考：[http ://api.jquery.com/contains-selector/](http://api.jquery.com/contains-selector/)

不清楚是否必须过滤到仅包含此文本的第二个跨度

# javascript - 调整chrome中的javascript错误

> ID：14189107
> 
> 赞同：0
> 
> 时间：2013-01-07T02:33:00.837
> 
> 标签：javascript, google-chrome, resize

```
$(window).on('resize', function(){
self.setDimensions();
}); 
```

**未捕获的类型错误：对象 # 没有“on”方法**

为什么只有谷歌浏览器会抛出这个错误？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:34:59.887

此处无需使用事件委托 ( `on`)。只需将`resize`事件直接绑定到窗口：

```
$(window).resize(function () {
  self.setDimensions();
}); 
```

使用旧版本的 jQuery (1.6.4) 时，我可以复制您的错误。

*   [工作 (1.8.2)](http://jsfiddle.net/P89T4/3/)
*   [工作 (1.7.2)](http://jsfiddle.net/P89T4/4/)
*   [不工作 (1.6.4)](http://jsfiddle.net/P89T4/5)

尝试确保您使用的是最新版本的 jQuery，而不是旧的，可​​能是缓存的版本。

# html - 为什么在 HTML5 中使用括号表示法？

> ID：14189108
> 
> 赞同：5
> 
> 时间：2013-01-07T02:33:11.907
> 
> 标签：html, web-standards

这是一个“最佳实践”问题。我正在阅读 Code Review StackExchage 网站，我看到了[这个线程](https://codereview.stackexchange.com/questions/13794/dynamically-adding-rows-to-an-accessible-html-form/13803#13803)。在其中，Joseph Silber 建议对具有多个相同结构的表单输入行的表单完全使用括号表示法并避免使用 ID。

在我读过的关于网页设计/开发的书中，我从未见过这种策略被使用过。在标签标签中使用括号表示法和包装输入元素，以及在表单输入中不使用 id 标签是个好主意吗？也许关于 Javascript/JQuery 的某些东西使这种方法具有优势？

我想直接问约瑟夫，但我在网站上还没有任何声誉，所以我什至无法发表评论。但是，我有兴趣看到整个社区对此的看法，因为到目前为止，搜索“HTML5 括号表示法”和“HTML5 数组表示法”之类的东西对我来说还没有确定的结果。

以下是上述问题的摘要，其中包含从链接问题中借用的一些示例代码：

为什么使用这个：

```
<label>Comment:
  <input type="text" name="comment[]" width="50" />
</label> 
```

而不是这个：

```
<label for="comment-0">Comment: </label>
<input type="text" id="comment-0" name="comment-0" width="50" /> 
```

在具有多行相同输入的表单中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T14:34:05.693

粘贴`[]`在输入名称的末尾会导致一些服务器端表单处理库将数据呈现为数组。其他一些表单处理器不需要特殊语法。您的选择在很大程度上取决于您是否希望与前一种兼容，而不是拥有更复杂的名称并且无法通过 JS 中的点符号访问元素。

使用子元素而不是`for`属性将：

*   使您不必生成唯一的 ID（如果类似的表单可以出现在单个页面上，则特别有用）
*   限制您的样式选择
*   兼容较少的浏览器（我认为唯一的损失是老版本的IE，没什么大的损失）。

所以那里有优点和缺点，你必须决定什么适合你。

# javascript - 使用 openfiledialog 打开多个文件

> ID：14189111
> 
> 赞同：1
> 
> 时间：2013-01-07T02:33:40.863
> 
> 标签：javascript, openfiledialog

我试图用 openfiledialog 打开几个文件并将它们显示在播放列表中。目前使用 windowsmediaplayer sdk。

我有这个代码：

```
function addMediaItem() {
mediaURL = theme.openDialog('FILE_OPEN', 'FILES_ALLMEDIA');

var NewMedia = player.newMedia(mediaURL);
player.currentPlaylist.appendItem(NewMedia);
player.controls.play();
} 
```

并且目前只为完成的每次点击添加 1 个项目。我想要的是选择前。2 或 3 个媒体文件并在播放列表上一次显示它们，我的代码似乎只显示选择的第一个文件。

# php - 使用 AJAX 将数据存储到 MySQL

> ID：14189113
> 
> 赞同：0
> 
> 时间：2013-01-07T02:34:27.913
> 
> 标签：php, ajax

如何使用 AJAX 添加多个数据条目？我在网上找到了这个片段：`

```
$.ajax({
          type: "POST",
          url: "../php/saveEntry.php",
          data: {id: someID}
          dataType: "html"
    }); 
```

`

所以基本上我想添加多个输入ID ..我只是这样做吗？

```
id: someID, id: someID, id: someID 
```

还是每个 ID 都用 {} 大括号括起来？

如果我的问题不清楚，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:42:13.700

```
$("#id").each(function(index, value){
    $.ajax({
          type: "POST",
          url: "../php/saveEntry.php",
          data: {
                id: $("#id").val(),
                email: $("#email").val(),
                name: $("#inputName").val(),
           },
          dataType: "html"
    }); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-07T02:37:18.063

数据属性：

```
$.ajax({
          type: "POST",
          url: "../php/saveEntry.php",
          data: {
              id: $("#someid").val(),
              price: $("#somepriceid").val(),
              qty: $("#textAreaId").text()
          },
          dataType: "html"
    }); 
```

# python - 对数据进行分层排序

> ID：14189114
> 
> 赞同：2
> 
> 时间：2013-01-07T02:34:42.160
> 
> 标签：python, list, sorting, set, hierarchical-data

我的 python 程序返回一个包含子列表数据的列表。每个子列表都包含一篇文章的唯一 ID 和该文章的父 ID，即

```
pages_id_list ={ {22, 4},{45,1},{1,1}, {4,4},{566,45},{7,7},{783,566}, {66,1},{300,8},{8,4},{101,7},{80,22}, {17,17},{911,66} } 
```

在每个*子*列表中，数据的结构是这样`{*article_id*, *parent_id*}` 的。如果article_id 和parent_id 相同，则显然意味着文章没有父级。

我想使用最少的代码对数据进行排序，以便对于每篇文章，如果可用，我可以轻松访问其子孙（嵌套数据）的列表。例如（使用上面的示例数据）我应该能够在一天结束时打印：

```
 1
 -45
 --566
 ---783
 -66
 --911 
```

....对于文章 ID 1

我只能整理出最高级别的（第一代和第二代）id。获得第 3 代及后续代时遇到问题。

这是我使用的代码：

```
highest_level = set()
first_level = set()
sub_level = set()

for i in pages_id_list:
    id,pid = i['id'],i['pid']

    if id == pid:
        #Pages of the highest hierarchy
        highest_level.add(id)

for i in pages_id_list:
    id,pid = i['id'],i['pid']

    if id != pid :
        if pid in highest_level:
            #First child pages
            first_level.add(id)
        else:
            sub_level.add(id) 
```

遗憾的是，我的代码不起作用。

任何朝着正确方向的帮助/轻推将不胜感激。谢谢

大卫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:16:24.290

也许是这样的：

```
#! /usr/bin/python3.2

pages_id_list = [ (22, 4),(45,1),(1,1), (4,4),(566,45),(7,7),(783,566), (66,1),(300,8),(8,4),(101,7),(80,22), (17,17),(911,66) ]

class Node:
    def __init__ (self, article):
        self.article = article
        self.children = []
        self.parent = None

    def print (self, level = 0):
        print ('{}{}'.format ('\t' * level, self.article) )
        for child in self.children: child.print (level + 1)

class Tree:
    def __init__ (self): self.nodes = {}

    def push (self, item):
        article, parent = item
        if parent not in self.nodes: self.nodes [parent] = Node (parent)
        if article not in self.nodes: self.nodes [article] = Node (article)
        if parent == article: return
        self.nodes [article].parent = self.nodes [parent]
        self.nodes [parent].children.append (self.nodes [article] )

    @property
    def roots (self): return (x for x in self.nodes.values () if not x.parent)

t = Tree ()
for i in pages_id_list: t.push (i)
for node in t.roots: node.print () 
```

这将创建一个树结构，您可以遍历该结构以获取所有子项。您可以通过 访问任何文章`t.nodes [article]`并通过 获取其子项`t.nodes [article].children`。

print 方法的输出是：

```
1
    45
        566
            783
    66
        911
4
    22
        80
    8
        300
7
    101
17 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:05:35.447

这是一个简单的方法（假设您的页面 id 列表元素没有设置，正如您的代码所建议的那样）：

```
from collections import defaultdict

page_ids = [
    (22, 4), (45, 1), (1, 1), (4, 4),
    (566, 45), (7, 7), (783, 566), (66, 1), (300, 8),
    (8, 4), (101, 7), (80, 22), (17, 17), (911, 66)
]

def display(id, nodes, level):
    print('%s%s%s' % ('  ' * level, '\\__', id))
    for child in sorted(nodes.get(id, [])):
        display(child, nodes, level + 1)

if __name__ == '__main__':
    nodes, roots = defaultdict(set), set()

    for article, parent in page_ids:
        if article == parent:
            roots.add(article)
        else:
            nodes[parent].add(article)

    # nodes now looks something like this:
    # {1: [45, 66], 66: [911], 4: [22, 8], 22: [80], 
    #  7: [101], 8: [300], 45: [566], 566: [783]}

    for id in sorted(roots):
        display(id, nodes, 0) 
```

输出将是：

```
\__1
  \__45
    \__566
      \__783
  \__66
    \__911
\__4
  \__8
    \__300
  \__22
    \__80
\__7
  \__101
\__17 
```

来源：[https ://gist.github.com/4472070](https://gist.github.com/4472070)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T04:05:08.473

> 我想使用最少的代码对数据进行排序

直到现在我才读到这篇文章，因此我将提供另一个答案。我不会编辑我之前的答案，因为它们真的不相关。如果您想用最少的代码将元组列表转换为树结构，那么这种方法非常简单，尽管它仍然可以进一步最小化（例如，使用递归 lambda 项而不是函数）：

```
pages_id_list = [ (22, 4),(45,1),(1,1), (4,4),(566,45),(7,7),(783,566), (66,1),(300,8),(8,4),(101,7),(80,22), (17,17),(911,66) ]

def getTree (item, pages): return [ (x, getTree (x, pages) ) if getTree (x, pages) else x for x in (x [0] for x in pages if x [1] == item) ]

tree = getTree (None, [ (x [0], None if x [0] == x [1] else x [1] ) for x in pages_id_list] ) 
```

# c# - MVVM 的 DataTemplate：它去哪儿了？

> ID：14189120
> 
> 赞同：0
> 
> 时间：2013-01-07T02:35:08.333
> 
> 标签：c#, xaml, mvvm, windows-8

我正在开发一个“现代 UI”应用程序，所以语法对我来说有点新，我似乎无法让我的绑定正常工作。

我的愿望是首先设计一个 ViewModel，以便在我的应用程序页面上，我可以做一些事情，比如`ListView`将 a`UserViewModel`作为子级添加，并自动找到 DataTemplate 以创建 UserView 并绑定到提供的 UserViewModel。

我为为 Win 7 桌面编写的不同应用程序做了类似的事情，它只是工作，但对于我的生活，我无法弄清楚为什么它在这里不起作用。我只是将我的 ListView“UserViewModel”作为文本输入（没有创建 UserControl）。

这里唯一的另一个区别是这是我第一次使用异步函数，因为它几乎是强制你进行 Win 8 开发的，这就是我从 WCF 服务中获得的方法，我从中提取数据。

这是我的视图模型的示例：

```
 public class UserViewModel
{
    private UserDTO _user { get; set; }

    public UserViewModel(UserDTO user)
    {
        _user = user;
    }

    public UserViewModel(int userId)
    {
        SetUser(userId);
    }

    private async void SetUser(int userId)
    {
        ServiceClient proxy = new ServiceClient();
        UserDTO referencedUser = await proxy.GetUserAsync(userId);
    }

    public string FirstName
    {
        get
        {
            return _user.FirstName;
        }
    }

    public string LastName
    {
        get
        {
            return _user.LastName;
        }
    }

    public string Email
    {
        get
        {
            return _user.email;
        }
    }
} 
```

该视图应该是所有 XAML 并在应用程序资源中粘合在一起，如下所示：

```
<UserControl x:Class="TaskClient.Views.UserView" ...
    xmlns:root="using:TaskClient"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    d:DesignHeight="30"
    d:DesignWidth="200">
    <StackPanel Orientation="Horizontal" Margin="5, 0, 0 ,0" DataContext="{Binding}">
        <TextBlock x:Name="FirstNameLabel" Text="{Binding FirstName}"/>
        <TextBlock x:Name="LastNameLabel" Text="{Binding LastName}"/>
        <TextBlock x:Name="EmailLabel" Text="{Binding Email}"/>
    </StackPanel>
</UserControl> 
```

和 ：

```
<Application x:Class="TaskClient.App"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:TaskClient"
xmlns:localData="using:TaskClient.Data" 
xmlns:vm="using:ViewModels"
xmlns:vw="using:TaskClient.Views">

<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>

            <!-- 
                Styles that define common aspects of the platform look and feel
                Required by Visual Studio project and item templates
             -->
            <ResourceDictionary Source="Common/StandardStyles.xaml"/>
        </ResourceDictionary.MergedDictionaries>

        <!-- Application-specific resources -->

        <x:String x:Key="AppName">TaskClient</x:String>

        <DataTemplate x:Key="vm:UserViewModel">
            <vw:UserView />
        </DataTemplate>
    </ResourceDictionary>
</Application.Resources> 
```

我已经尝试通过各种示例（例如[http://joshsmithonwpf.wordpress.com/a-guided-tour-of-wpf/](http://joshsmithonwpf.wordpress.com/a-guided-tour-of-wpf/)）搜索一个小时左右，但无法找到有效的示例就我而言。

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:27:05.247

可能是错字，但当您通过 WCF 服务获取用户时，您似乎没有更新“_user”字段。你可能需要改变这个：

```
private async void SetUser(int userId)
{
    ServiceClient proxy = new ServiceClient();
    UserDTO referencedUser = await proxy.GetUserAsync(userId);
} 
```

对此：

```
private async void SetUser(int userId)
{
    ServiceClient proxy = new ServiceClient();
    _user = await proxy.GetUserAsync(userId);
} 
```

此外，我没有看到您的 ViewModel 类实现了 INotifyPropertyChange 接口，这是 WPF 数据绑定的关键。完成并加载用户后，您需要通知 WPF 正在更新的属性：

```
private async void SetUser(int userId)
{
    ServiceClient proxy = new ServiceClient();
    _user = await proxy.GetUserAsync(userId);
    NotifyOfPropertyChange();
}

private void NotifyOfPropertyChange() 
{
    NotifyChanged("FirstName"); //This would raise PropertyChanged event.
    NotifyChanged("LastName");
    NotifyChanged("Email");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T15:32:58.597

> 我只是以文本形式进入我的 ListView“UserViewModel”（未创建 UserControl）

您的`DataTemplate`需求由`DataType`属性和无`x:Key`属性定义，以便`DataTemplate`隐式应用

```
<DataTemplate DataType="{x:Type vm:UserViewModel}">
    <vw:UserView />
</DataTemplate> 
```

具有`DataType`指定但没有指定`x:Key`的 DataTemplate 是隐式 DataTemplate，这意味着只要 WPF 需要绘制指定数据类型的对象，就会隐式使用它。

具有`x:Key`属性的 DataTemplate 需要在您的代码中通过键实际指定，例如

```
<ListView ItemTemplate="{StaticResource MyKey}" ... /> 
```

另外，我不确定您的问题的标题（*“MVVM 的 DataContext：它去哪儿了？”*）是否是错字，因为您的问题主体似乎没有询问`DataContext`，但是我有一个[初学者我博客上的文章解释了您可能感兴趣的 DataContext](http://rachel53461.wordpress.com/2012/07/14/what-is-this-datacontext-you-speak-of/)，如果您难以理解`DataContext`

# javascript - 关于推荐框和点赞按钮的问题

> ID：14189123
> 
> 赞同：0
> 
> 时间：2013-01-07T02:36:15.020
> 
> 标签：javascript, facebook, facebook-social-plugins

我们已经使用推荐插件将近一年了，但在过去的几周里，我们注意到该插件没有显示任何内容。相反，它显示以下错误：尚无此网站的建议。在您的网站上放置一些类似按钮以吸引您的用户。详细信息可以在这里找到。

但有时，它会再次出现（只有 1 或 2 个推荐，在 chrome 中没有缩略图，但在 IE 中没有数据，仍然存在一些问题。过去，稳定显示 6~7 个推荐。）

显示的推荐数量似乎不断变化。

请尽快解决这个问题。:)。

重现步骤： 1.请访问 URL [http://www.facebook.com/plugins/recommendations.php?site=http%3A%2F%2Ffb.sec.samsung.com&width=296&height=395&](http://www.facebook.com/plugins/recommendations.php?site=http%3A%2F%2Ffb.sec.samsung.com&width=296&height=395&) header=false&colorscheme=light&border_color =%23ffffff

* * *

预期行为：建议应显示超过 6~7 个，缩略图也应显示。

例如，这是另一个使用facebook社交插件的URL，在我们的另一个站点上没有问题，它是正常的，应该是这样的

[https://www.facebook.com/plugins/recommendations.php?site=http%3A%2F%2Ffb.sg.samsung.com&width=296&height=395&header=false&colorscheme=light&border_color=%23ffffff](https://www.facebook.com/plugins/recommendations.php?site=http%3A%2F%2Ffb.sg.samsung.com&width=296&height=395&header=false&colorscheme=light&border_color=%23ffffff)

只是参考这个。实际行为：IE 上没有数据

关于 chrome 的 1 或 2 条建议。

它每次都显示不同。

* * *

API/SDK：社交插件应用程序 ID：422701287825347（新世界）

PS：这是用于报告此问题的临时 app_id。我只知道 app_id

关于这件事的真实App_ID是144651938879532。（创建此App_ID需要获取帐户ID，我需要它吗）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:04:11.477

清理你的问题，很难阅读。

如果推荐框所在的域不是它推荐的域，则您需要一个 client_id 或 app_id。看[这里](http://developers.facebook.com/docs/reference/plugins/recommendations/)

# php - mysql php时间戳查询

> ID：14189128
> 
> 赞同：0
> 
> 时间：2013-01-07T02:36:49.263
> 
> 标签：php, mysql

我有一个在线列表，我希望它在用户处于非活动状态一段时间后将其从列表中删除。

我将如何使第二个查询与我试图做的事情一起工作？

```
<?php
//On page load with a logged-in user
mysql_query("UPDATE `users` SET `last_activity` = NOW() WHERE `username` = '" . ($_SESSION['username']) . "'");

mysql_query("UPDATE `users` 
             SET `online` = 0 
             WHERE `last_activity` < NOW('+11 minutes') ");
?> 
```

现在，无论他们的时间戳有多长，它都会将所有人从列表中删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T02:42:29.273

您需要使用 date_sub：

`DATE_SUB(NOW(),INTERVAL 11 MINUTE`)

# macos - mac如何将git从中文改成英文

> ID：14189134
> 
> 赞同：18
> 
> 时间：2013-01-07T02:37:43.727
> 
> 标签：macos, git, bash

我记得我通过`port install git-core`. 它默认显示中文单词，如下所示：

```
# 位于分支 master
# 您的分支领先 'origin/master' 共 2 个提交。
#
nothing to commit, working directory clean 
```

和

```
# 位于分支 master
# 您的分支领先 'origin/master' 共 2 个提交。
#
# 尚未暂存以备提交的变更：
#   （使用 "git add <file>..." 更新要提交的内容）
#   （使用 "git checkout -- <file>..." 丢弃工作区的改动）
#
#   修改：      2.txt
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

我在使用中文的mac os上工作，我想知道如何将git的语言改回英文。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-07T03:08:34.827

`export LC_ALL=en_US.UTF-8`

将其添加到您的 .bashrc 或 .zshrc 文件中

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-10-27T11:34:54.167

如果你用鱼壳

`~/.config/fish/config.fish`

```
set -x LC_ALL en_US.UTF-8
set -x LC_CTYPE en_US.UTF-8 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-12-28T07:17:33.600

您可以尝试通过将以下行添加到您的文件中来设置`LANG`环境变量：`en_US.UTF-8``~/.bash_profile`

```
export LANG=en_US.UTF-8 
```

它帮助我在 macOS Mojave 上将 Git 语言切换为英语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-06T11:23:26.063

为了让它在 Fish 中持久化：

```
set --universal LC_ALL=en_US.UTF-8 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-14T15:38:13.087

如果你使用 iTerm2。

添加`export LC_ALL=en_US.UTF-8`到`.bash_profile`文件

然后，`source ~/.bash_profile`

但是重启iTerm2就不行了

然后修复：添加`source ~/.bash_profile`到`.zshrc`文件

# php - 试图将 php 变量传递给 javascript 函数

> ID：14189140
> 
> 赞同：0
> 
> 时间：2013-01-07T02:38:30.973
> 
> 标签：php, javascript, javascript-events

好的，情况就是这样，我有一个 javascript 弹出窗口，可让您向其他用户发送消息。我没有使用表单，因为我希望用户能够在停留在当前页面时发送消息。所以我正在做的是将php变量回显到调用函数，然后当用户点击发送按钮（id = mbutton）时它被发送出去

当我转到 javascript 函数并警告传递的变量时，它会立即发出警告，但在通过 if 语句后会进入“未定义”。

正如您从下面的代码中看到的那样，我设置了 2 个警报……正如我所说，第一个警报很好，但第二个没有。谁能向我解释为什么会这样？

```
<div id="msgcont">
    <div id="msgheader">
        <span>Send a Message to <? if($array['login']!=$c_log['login']) { echo 
$array['login']; } ?> - Remember to be curtious! </span>
    </div>
    <div id="msgclose" onMouseDown="butclick('message', 'submit')"><span>X</span></div>
    <textarea id="msg"></textarea>
    <div id="mbutton" onMouseUP="butclick('send', 'submit', '<? 
if($array['login']!=$c_log) { echo $array['login']; } ?>')" 
onMouseDown="butclick('send', 'down')">Send</div>
</div>

function butclick(but, action, sentFrom) {
    alert(sentFrom);
    if(but=='send') { 
        alert(sentFrom);
        x = document.getElementById('msg').value;
        if(x==null || x=="") { alert("Please Enter your message before attemping to 
send"); } else { }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T02:00:14.983

好的，所以我不确定为什么会这样，但我想出了如何让它工作。如果您查看下面的代码，我同时拥有 onMouseUP 和 onMouseDown ...我将我的 butclick 函数调用从 onMouseDown 移动到 onMouseUP 并且它似乎工作得很好......不要让我解释它......它只是。

```
<div id="mbutton" onMouseUP="butclick('send', 'submit', '<? if($array['login']!=$c_log) { 
echo $array['login']; } ?>')" onMouseDown="butclick('send', 'down')">Send</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T02:52:37.280

这里的这个陈述似乎是不正确的：

```
if($array['login']!=$c_log) { echo $array['login']; } ?>')" 
```

然而，您正在比较，`$array['login']!=$c_log`但在比较之前只有几行：`$array['login']!=$c_log['login']`.

这让我相信，`$c_log`作为一个数组，将`$array['login']`（字符串）与`$c_log`（数组）进行比较总是会发生冲突。

# php - PHP 联系表不起作用 - 如果执行则下载

> ID：14189145
> 
> 赞同：0
> 
> 时间：2013-01-07T02:38:55.107
> 
> 标签：php, contact-form

再会！呃，我这里有一个 PHP 联系表。自从我在网上查过之后，这些代码都是正确的，而且我的代码与互联网上的代码几乎相同。我什至尝试了互联网上的那些。但是每当我尝试执行它们时，它们都不会起作用！>3< 不是显示整个网页，而是将网页本身下载到 PHP 文件中。除非我将文件格式更改为 HTML，否则该网页永远不会显示。但是 PHP 代码将无法正常工作。哇！请帮我！顺便说一句，我还没有上传到网站上。^^

任何形式的帮助将不胜感激！谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:41:03.313

我认为您的 apache 不执行 PHP 文件。您必须检查您的 PHP 配置是否正常工作。

[http://www.thesitewizard.com/php/install-php-5-apache-windows.shtml](http://www.thesitewizard.com/php/install-php-5-apache-windows.shtml)

你必须检查几件事。

1.  检查您的 PHP 安装是否正确。（安装取决于您的操作系统）
2.  检查您是否已经为您的 Web 服务器配置了 PHP（配置取决于 Web 服务器）

# iphone - 循环遍历 tableview Cells 以查看单元格上的 UIImageView 是否为 .hidden

> ID：14189149
> 
> 赞同：-1
> 
> 时间：2013-01-07T02:39:23.777
> 
> 标签：iphone, ios, xcode, cocoa-touch, uitableview

我有一个 uitableview，我有一个带有 imageView 的自定义单元格。imageView 已经填充了图像，但其`.hidden`属性设置为`YES`。这意味着当 tableView 存在时，所有单元格图像都将隐藏。在应用程序中，您可以设置图像的开/关。这只是一点点信息。我的问题是我需要遍历 tableViewCells 并查看是否隐藏了任何图像。

在`cellForRowAtIndexPath:`我尝试循环遍历单元格。

```
 BOOL cellImageViewsAreHidden = YES;

for (UITableViewCell *myCell in tableView.visibleCells) {

    if (self.cell.alert.hidden == NO) {

        cellImageViewsAreHidden = NO;

        break;
    }
    else{
        cellImageViewsAreHidden = YES;
    }
}

if (cellImageViewsAreHidden == NO) {
    NSLog(@"They are visible");
}

else{
    NSLog(@"they are hidden");
} 
```

但这不幸而已`NSLogs` `"they are hidden"`。`NSLog`即使有图像可见，它也不会是正确的文本。非常感谢任何帮助或建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:48:28.477

实际上检查循环中的单元格，而不仅仅是通过替换作为类属性的单元格

```
if (self.cell.alert.hidden == NO) { 
```

和

```
if (myCell.alert.hidden == NO) { 
```

无论如何，正确的方法是将 imageView 的状态存储在数据模型中。无论如何你都需要它，因为你应该重复使用单元格

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T03:52:00.003

为什么不为表格单元格创建一个自定义对象并为其保持状态。这意味着使用表格单元格的详细信息创建一个自定义对象，创建一个布尔值来保存图像是否显示的状态，

假设用户在应用程序上有关闭图像。然后 ste tht 属性为假。如果不是真的。thn 你不必玩 tableview 属性。你会有更多的控制权。

# php - 如何在循环中创建 isset($_POST['id'.$var])？

> ID：14189151
> 
> 赞同：0
> 
> 时间：2013-01-07T02:39:36.420
> 
> 标签：php, html, mysql

我正在尝试创建一个页面，其中有多个字段，用户可以对每个字段进行评论。为了创建这些字段和文本输入，我正在运行一个 while 循环，其中包含以下 html：

```
<form name = "replyform" method = "post" action = "">           
<input id = "replytext<? echo $replyID; ?>" value = "replytext<? echo $replyID; ?>" name     = "replytext<? echo $replyID; ?>" type="text" class = "span5">
</form> 
```

然后使用以下代码调用 'wall_reply()' 函数，提交文本值。

```
if (isset($_POST['replytext'.$replyID])) {
echo wall_reply();//5, $_POST['replytext'.$replyID]);
} 
```

不过有些事情是错过了。任何想法这里可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:01:27.447

你有循环来创建这些表单和输入吗？

将循环放在表单标签内，这样只会创建一个带有多个输入的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T13:16:13.693

这似乎工作正常，将其用作您的指南；）

```
<?php 
$maxposts=7;

if (isset($_POST['submit'])){

function wall_reply($id,$text){
echo '<hr />updating id '.$id.' with '.$text;
}

var_dump($_POST);
for ($i=0;$i<$maxposts;$i++){
$replyID = $i;
        if (isset($_POST['replytext'.$replyID])) {
                 wall_reply($i,$_POST['replytext'.$replyID]);//5, $_POST['replytext'.$replyID]);
        } else {
                echo 'not set';
        }
}
}

?>
<form name = "replyform" method = "post" action = "">           
<?php 
$replyID = 5;
for ($i=0;$i<$maxposts;$i++):
$replyID = $i;
?>
<input id = "replytext<?php echo $replyID; ?>" value = "replytext<?php echo $replyID; ?>" name     = "$
<?php endfor; ?>
<input type="submit" name="submit" value="go"/>
</form> 
```

# android - 调整异步任务加载的listview的高度

> ID：14189155
> 
> 赞同：0
> 
> 时间：2013-01-07T02:39:51.300
> 
> 标签：android, listview, android-asynctask

我正在尝试使用 AsyncTask 加载列表视图，但是当任务完成（onPostExecute 方法）并将适配器设置为列表视图时，列表视图的高度不会根据其中的项目进行调整。

当任务在 doInBackground 方法中时，会显示一个 ProgressBar。之后，当任务完成时，ProgressBar 被隐藏并且 ListView 加载了 AsyncTask 结果。

我的问题是列表视图的高度，它没有显示其中的所有项目。

这是我的代码：

列表视图声明：

```
 <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@android:color/white"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Comments"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#262023"
                android:textStyle="bold" />

            <ProgressBar
                android:id="@+id/pbComentarios"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center" />

            <ListView
                android:id="@+id/lvComentarios"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:smoothScrollbar="true" >
            </ListView>

             <View
                android:layout_width="match_parent"
                android:layout_height="1dp"
                android:background="#bbb" />

        </LinearLayout> 
```

项目列表模板：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LinearLayout2"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent" >

    <ImageButton
        android:id="@+id/ibUser"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@android:drawable/ic_menu_my_calendar" />

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <TextView
                android:id="@+id/tvUsername"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingRight="5dp"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#000"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/tvFechacomentario"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Medium Text"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="#aaa" />
        </LinearLayout>

        <TextView
            android:id="@+id/tvComentario"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000" />
    </LinearLayout>
</LinearLayout>

<View
    android:layout_width="match_parent"
    android:layout_height="1dp"
    android:background="#000" /> 
```

onPostExecute 方法：

```
protected void onPostExecute(ArrayList<Comentario> comentariosList) {
        pbComentarios.setVisibility(View.GONE); // hiding progressbar
        if( comentariosList != null ){
            comentarios = comentariosList;
            icAdapter.setComentarios(comentarios); // setting the arraylist to adapter which extends BaseAdapter
            lvComentarios.setAdapter(icAdapter); // setting adapter to listview
            lvComentarios.setDividerHeight(0);
            lvComentarios.refreshDrawableState(); 
            icAdapter.notifyDataSetChanged();
        }
    } 
```

你能帮我吗？，我尝试了所有列表视图的 xml 属性，但似乎没有任何效果。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:44:07.493

Try this instead:

```
<ListView
        android:id="@+id/lvComentarios"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="1"
        android:smoothScrollbar="true" > 
```

* * *

**EDIT**: Try this:

```
 <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/white"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Comments"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#262023"
            android:textStyle="bold" />

        <ProgressBar
            android:id="@+id/pbComentarios"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center" />

        <ListView
            android:id="@+id/lvComentarios"
            android:layout_width="match_parent"
            android:layout_height="0dip"
            android:layout_weight="1"
            android:smoothScrollbar="true" />

         <View
            android:layout_width="match_parent"
            android:layout_height="1dp"
            android:background="#bbb" />

    </LinearLayout> 
```

Also, make sure that any higher up views have the height as "match_parent". Otherwise the `ListView` will not occupy the entire space as needed. Play around with either using "match_parent" or 0 with a weight of "1" (as above).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:35:23.313

我得到它！！问题是所有布局都在 ScrollView 内，这不允许 listview 滚动并获取其高度，y 将其删除，现在一切正常。非常感谢你的帮助。

# java - Maven：传递 - 循环依赖 - 发布过程

> ID：14189156
> 
> 赞同：0
> 
> 时间：2013-01-07T02:39:53.607
> 
> 标签：java, git, jakarta-ee, maven, maven-2

这是我的项目结构，

```
Parent
^ ^ ^
| | |

A B C 
```

项目 A、B、C 取决于父项。Parent 有一个依赖管理部分，它决定了 A、B 和 C 的版本。

在发布过程中，我先发布了父级，这将有尚未发布的A、B、C版本。然后将A、B和C的父级更改为最新版本的父级。

```
A -> C, B->A and C->A 
```

现在因为上面的依赖，我无法确定A、B、C的发布顺序。如果我先发布A，它会抱怨C的发布版本不可用（因为父在发布时声明了C的版本， 提前时间）。我不能先释放 C，因为它依赖于 A。

我在 Git 上有 Parent 、 A、 B 和 C 作为单独的存储库。有没有办法，我可以解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:22:04.327

解决此问题的唯一方法是删除 A、B 和 C 之间的循环依赖关系。Maven 强制不存在循环依赖关系。要删除该循环，您必须将一对项目 A、B 和 C 的公共部分分解为新模块 D。因此，如果您选择打开 A 和 B 之间的循环，它们将因此仅依赖于 D .

这样，您的发布过程也将更加简单，因为您可以在同一个工作中发布所有内容。

# java - 获取正在运行的 Jar 或 Exe 的名称

> ID：14189162
> 
> 赞同：11
> 
> 时间：2013-01-07T02:41:26.430
> 
> 标签：java, jar

我需要做的是获取正在运行的 jar/exe 文件的名称（在 windows 上是 EXE，在 mac/linux 上是 jar）。我一直在四处寻找，我似乎无法找出如何。

如何获取运行 Jar 或 Exe 的名称？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-07T02:46:56.877

希望这可以帮助你，我测试了代码，这会返回完整的路径和名称。

也许你想多玩一点代码并给我一些反馈。

```
File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().toURI());‌ 
```

这是在 stackoverflow [How to get the path of a running JAR file?](https://stackoverflow.com/questions/320542/how-to-get-the-path-of-a-running-jar-file)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-27T07:50:01.220

> File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().toURI());‌</p>

在编译的应用程序中返回简单路径并在 jar 中返回错误：

> URI 不是分层的

我的解决方案是：

```
private File getJarFile() throws FileNotFoundException {
    String path = Main.class.getResource(Main.class.getSimpleName() + ".class").getFile();
    if(path.startsWith("/")) {
        throw new FileNotFoundException("This is not a jar file: \n" + path);
    }
    path = ClassLoader.getSystemClassLoader().getResource(path).getFile();

    return new File(path.substring(0, path.lastIndexOf('!')));
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-07T02:47:21.877

```
 File(MyClass.class.getProtectionDomain().getCodeSource().getLocation().toURI().g‌​etPath()); 
```

应该给你罐子。

至于 exe，因为我假设您正在使用某种包装器，所以您需要在运行之前知道 exe 的名称。然后你可以使用类似的东西：

```
 Process p = Runtime.getRuntime().exec
    (System.getenv("windir") +"\\system32\\"+"tasklist.exe"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-23T05:59:04.340

尝试以下

```
System.getProperty("java.class.path") 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-23T14:15:46.060

使用[Lunch4j](http://launch4j.sourceforge.net)，您可以通过编辑生成的xml为exe文件添加图像名称，您必须将标记值true从false更改为true

# javascript - 尝试在更大的方形 div 中附加方形 div 并使其可拖动

> ID：14189163
> 
> 赞同：0
> 
> 时间：2013-01-07T02:41:29.970
> 
> 标签：javascript, jquery, html, css

假设我有一个按钮和一个大 div。按下按钮后，代码会在大 div 中“附加”一个新 div。附加的新 div 然后卡在那里，因为显然，我没有编写正确的代码来使其可拖动？

另外，我正在尝试修复它，所以当它们“附加”时......它们不会从上到下“堆叠”......也许在div之间的随机位置......

[http://jsbin.com/obizel/3/](http://jsbin.com/obizel/3/)

这是我到目前为止所拥有的...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:01:17.317

你的图书馆是我们的失衡。我将它们从：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"</script>
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script> 
```

到：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script> 
```

所以，看起来你有一个不匹配的地方，你加载了同一个库两次。当您更改这些行时，一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T03:05:14.023

我已经更新了您的**[JSBin](http://jsbin.com/obizel/13/)**以帮助您入门。您的库也已更新（之前乱序）。

请注意，您的 container( `#box`) 必须定位为`relative`ly，因为可拖动插件使您的`.new_box`es 绝对定位。有关详细信息，请参阅 CSS。

新的 JS：

```
$(document).ready(function () {
  function createBox($parent, left, top) {
    var $box = $('<div class="new_box">Hello world</div>');
    $box.appendTo($parent);
    $box.draggable({
      containment: $parent,
      grid: [10, 10]
    });
    $box.css({
      left: left,
      top: top
    });
  }

  $(".add").click(function (e) {
    var $container = $("#box"),
      w = $container.width(),
      h = $container.height();

    createBox($container, Math.random() * w, Math.random() * h);
  });
}); 
```

# .net - 您应该对异步对象使用“使用”吗？

> ID：14189166
> 
> 赞同：2
> 
> 时间：2013-01-07T02:41:52.950
> 
> 标签：.net, vb.net, asynchronous

将`Using`块用于异步对象是否安全？如果在异步任务完成之前退出块，对象会不会被释放得太快？任务完成后会妥善处理吗？

这段代码有效，但我不知道它是否在滥用我的记忆。

```
For i = 1 To nPings
  Thread.Sleep(10)
  Using pPing As New System.Net.NetworkInformation.Ping
    AddHandler pPing.PingCompleted, AddressOf pingHandler
    pPing.SendAsync(ip, timeout)
  End Using
Next i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:16:52.077

> > 如果在异步任务完成之前退出块，对象会不会被释放得太快？

是的。`End Using`线完成后，对象`Ping`将被释放。

> > 任务完成后会妥善处理吗？

在您的示例中，该`Ping`对象将始终被丢弃。但是，这可能会在异步代码完成后发生，也可能不会发生，因为该行为（您编码它的方式）是未确定的。

要使此行为更具确定性，请在`pingHandler`代码中处理 Ping 对象，例如：

```
Class PingAsyncState

    Public Property Ping Ping
    Public Property int Timeout

End Class

For i = 1 To nPings
    Thread.Sleep(10)
    pPing As New System.Net.NetworkInformation.Ping
    AddHandler pPing.PingCompleted, AddressOf pingHandler
    pPing.SendAsync(ip, new PingAsyncState() With { .Ping = pPing, .Timeout = timeout })
Next i

Sub PingHandler(obj As Object)

    Dim state = CType(state, PingAsyncState)       

    ... code to do stuff ...

    state.Ping.Dispose()

End Sub 
```

此外，如果您检查 内部的代码`Ping.Dispose()`，您会看到它关闭了各种 EventHandles。如果对象在异步完成之前被释放，这可能不会导致异常`Ping`，但它肯定会使`Ping`对象处于不稳定状态。您可能会发现未触发事件或未调用异步完整处理程序代码或发生其他微妙的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T03:12:59.800

我相信还有其他人可以为您提供底层 .Net 框架行为的详细解释，但结果是，通过附加事件处理程序，即使在处理该对象后，该对象仍会触发该事件。

您可以通过以下修改来证明这一点：

```
 ' Add any initialization after the InitializeComponent() call.
    For i = 1 To 4
        System.Threading.Thread.Sleep(10)
        Using pPing As New System.Net.NetworkInformation.Ping
            AddHandler pPing.PingCompleted, AddressOf pingHandler
            AddHandler pPing.Disposed, AddressOf pingDisposed
            pPing.SendAsync("someaddressthatmayormaynotwork.com", 10000)
        End Using
    Next i
    GC.Collect()
    Console.WriteLine("completed")

Public Sub pingHandler(sender As Object, e As System.Net.NetworkInformation.PingCompletedEventArgs)
    Console.WriteLine("pingCompleted")
End Sub
Public Sub pingDisposed(sender As Object, e As System.EventArgs)
    Console.WriteLine("Disposed")
End Sub 
```

在这种情况下，如果定位 URL 或接收响应的时间过长，则 dispose 事件可以在 pingHandler 事件触发之前触发，但 pingHandler 事件将始终触发。

一般来说，最好的做法是在事件中释放异步事件处理程序，这样您就不会遇到像这样的范围/关闭场景：

```
Public Sub pingHandler(sender As Object, e As System.Net.NetworkInformation.PingCompletedEventArgs)
    If sender IsNot Nothing Then
        RemoveHandler DirectCast(sender, System.Net.NetworkInformation.Ping).PingCompleted, AddressOf pingHandler
    End If
    Console.WriteLine("pingCompleted")
End Sub

Public Sub pingDisposed(sender As Object, e As System.EventArgs)
    If sender IsNot Nothing Then
        RemoveHandler DirectCast(sender, System.Net.NetworkInformation.Ping).Disposed, AddressOf pingDisposed
    End If
    Console.WriteLine("Disposed")
End Sub 
```

# delphi - 删除备忘录中的最后一个空白行

> ID：14189171
> 
> 赞同：5
> 
> 时间：2013-01-07T02:42:39.503
> 
> 标签：delphi, memo

我搜索了谷歌，但似乎找不到有效的解决方案。

这种情况是独一无二的。我需要在不同时间“添加”带有评论的行。每当我按 F9 键时，将显示一个行号，后跟一个冒号“：”字符，然后我在行号和光标位置输入一些注释。

运行输出应如下所示：

```
001: startup time
002: watched tv
003: | 
```

其中“|” 是运行时的最后一个光标位置，等待我输入一些文本。

但是，当我运行程序并按 F9 键时，我得到了这个：

```
001: 
002: 
003: 
| 
```

其中“|” 是运行时的最后一个光标位置，等待我输入一些文本。

如何删除备忘录中的（最后一个）空白行？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-07T03:16:37.473

`Add()`在插入的文本后插入换行符。如果您不想要换行符，请改用该`SelText`属性，例如；

```
Memo1.SelStart := Memo1.GetTextLen;
Memo1.SelLength := 0;
Memo1.SelText := '003: '; 
```

# c# - 我的程序不会使用新的更新总数，而是使用原始总数

> ID：14189175
> 
> 赞同：1
> 
> 时间：2013-01-07T02:43:38.867
> 
> 标签：c#

对于我的期末考试，我必须用 C# 编写一个程序。假设是一个银行账户，用户可以从原始账户余额中添加或提取金额。该程序本身可以运行，但由于某种原因，它确实第二次使用更新后的余额。相反，它仍然使用期初余额。例如，您一开始有 100 美元，取出 20 美元，新余额为 80 美元。下次您添加甚至移除资金时，它会从 100 美元而不是 80 美元中扣除。关于我可能做错了什么的任何想法？

到目前为止，这是我的代码：

```
namespace BankingAccount
{
    public partial class Entrance : Form
    {
        public string name;
        public int number;
        public double total;
        public double with;
        public double dep;

        public Entrance()
        {
            InitializeComponent();
        }

        private void btnEnter_Click(object sender, EventArgs e)
        {
            setVisPart1(true);
        }

        private void btnClear_Click(object sender, EventArgs e)
        {
            txtAcctName.Clear();
            txtAcctName.Enabled = true;
            txtAcctNumber.Clear();
            txtAcctNumber.Enabled = true;
            lblBalance.Text = "Beginning Balance:";
            txtBalance.Clear();
            txtBalance.Enabled = true;
            setVisibility(false);
        }

        private void btnContinue_Click(object sender, EventArgs e)
        {
            string line;
            int val;
            double value;

            name = txtAcctName.Text;

            line = txtAcctNumber.Text;

            if (int.TryParse(line, out val))
            {
                if (val < 0)
                {
                    MessageBox.Show("Invalid number");

                    txtAcctNumber.Clear();
                }
                else
                {
                    number = int.Parse(txtAcctNumber.Text);

                    txtAcctNumber.Enabled = false;
                }
            }
            else
            {
                MessageBox.Show("Invalid number");

                txtAcctNumber.Clear();
            }

            line = txtBalance.Text;

            if (double.TryParse(line, out value))
            {
                total = double.Parse(txtBalance.Text);

                txtBalance.Enabled = false;
                lblBalance.Text = "Available Balance:";
            }
            else
            {
                MessageBox.Show("Invalid number");

                txtBalance.Clear();
            }

            txtAcctName.Enabled = false;
            setVisPart2(true);
            btnContinue.Visible = false;
        }

        private void btnCalculate_Click(object sender, EventArgs e)
        {
            string line;
            double value;

            total = double.Parse(txtBalance.Text);

            line = txtWithdrawal.Text;

            if (double.TryParse(line, out value))
            {
                with = double.Parse(txtWithdrawal.Text);
            }
            else
            {
                MessageBox.Show("Invalid number");

                txtWithdrawal.Clear();
            }

            line = txtDeposit.Text;

            if (double.TryParse(line, out value))
            {
                dep = double.Parse(txtDeposit.Text);
            }
            else
            {
                MessageBox.Show("Invalid number");

                txtDeposit.Clear();
            }

            Banking anAccount = new Banking(name, number, total, with, dep);

            txtBalance.Text = anAccount.Balance.ToString("C");

            txtWithdrawal.Clear();
            txtDeposit.Clear();
        }

        private void setVisibility(bool visibilityValue)
        {
            lblName.Visible = visibilityValue;
            lblNumber.Visible = visibilityValue;
            lblBalance.Visible = visibilityValue;
            lblWithdrawal.Visible = visibilityValue;
            lblDeposit.Visible = visibilityValue;
            txtAcctName.Visible = visibilityValue;
            txtAcctNumber.Visible = visibilityValue;
            txtBalance.Visible = visibilityValue;
            txtWithdrawal.Visible = visibilityValue;
            txtDeposit.Visible = visibilityValue;
            btnCalculate.Visible = visibilityValue;
            btnContinue.Visible = visibilityValue;
        }

        private void setVisPart1(bool visibilityValue)
        {
            lblName.Visible = visibilityValue;
            lblNumber.Visible = visibilityValue;
            lblBalance.Visible = visibilityValue;
            txtAcctName.Visible = visibilityValue;
            txtAcctNumber.Visible = visibilityValue;
            txtBalance.Visible = visibilityValue;
            btnContinue.Visible = visibilityValue;
        }

        private void setVisPart2(bool visibilityValue)
        {
            lblWithdrawal.Visible = visibilityValue;
            lblDeposit.Visible = visibilityValue;
            txtWithdrawal.Visible = visibilityValue;
            txtDeposit.Visible = visibilityValue;
            btnCalculate.Visible = visibilityValue;
        }
    }
} 
```

这是我的类编码：

```
namespace BankingAccount
{
    class Banking
    {
        private string acctName;
        private int acctNumber;
        private double balance;
        private double withdrawal;
        private double deposit;

        public Banking(string name, int number, double total, double with, double dep)
        {
            acctName = name;
            acctNumber = number;
            balance = total;
            withdrawal = with;
            deposit = dep;
            DetermineBalance();
        }

        public string AcctName
        {
            set
            {
                acctName = value;
            }
            get
            {
                return acctName;
            }
        }

        public int AcctNumber
        {
            set
            {
                acctNumber = value;
            }
            get
            {
                return acctNumber;
            }
        }

        public double Withdraw
        {
            set
            {
                withdrawal = value;
            }
            get
            {
                return withdrawal;
            }
        }

        public double Deposit
        {
            set
            {
                deposit = value;
            }
            get
            {
                return deposit;
            }
        }

        public double Balance
        {
            set
            {
                balance = value;
            }
            get
            {
                return balance;
            }
        }

        public void DetermineBalance()
        {
            balance = balance + (deposit - withdrawal);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:11:12.723

我认为问题在于 ToString("C") 在解析字符串时将其加倍，它有一些无法正确解析的歌声。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:44:35.530

由于这都是**内存中的**（也就是说..没有使用数据库），这都是范围的问题。

范围定义了哪些变量在哪里可见。`Banking`每次在按钮单击中计算时，您都在定义一个对象。一旦按钮单击方法完成，该对象将不可用。

要补救，请在类级别声明它：

```
public partial class Entrance : Form
{
    public string name;
    public int number;
    public double total;
    public double with;
    public double dep;

    public Banking anAccount = new Banking(); // <---- declare it up here 
```

我将把它作为“读者的任务”来讨论如何让它发挥作用。就目前而言，我的回答对您没有帮助，因为您的构造函数需要参数。考虑删除该构造函数并使用对象的公共属性。每次点击计算，而不是重新创建`Banking`对象.. 设置属性并调用`CalculateBalance`.

（我很抱歉没有给你一个直截了当的答案。但由于这显然是家庭作业，我在道德上有义务不只是给你答案。也许其他人是？我给你的虽然很多！）

# javascript - $.ajax - 发送 http 标头后无法重定向

> ID：14189177
> 
> 赞同：0
> 
> 时间：2013-01-07T02:43:48.813
> 
> 标签：javascript, asp.net, ajax

我在随机时间遇到上述错误，但我无法找到解决方案。

```
 //MyPage.aspx
       //Reload Ajax function
       $.fn.dataTableExt.oApi.fnReloadAjax = function (oSettings, sNewSource, fnCallback) {
           if (typeof sNewSource != 'undefined') {
               oSettings.sAjaxSource = sNewSource;
           }
           this.oApi._fnProcessingDisplay(oSettings, true);
           var that = this;

           oSettings.fnServerData(oSettings.sAjaxSource, null, function(json) {
               /* Clear the old information from the table */
               that.oApi._fnClearTable(oSettings);

               /* Got the data - add it to the table */
               for (var i = 0; i < json.aaData.length; i++) {
                   that.oApi._fnAddData(oSettings, json.aaData[i]);
               }

               oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
               that.fnDraw(that);
               that.oApi._fnProcessingDisplay(oSettings, false);

               /* Callback user function - for event handlers etc */
               if (typeof fnCallback == 'function') {
                   fnCallback(oSettings);
               }
           });
       };

//Timer
function AutoReload(){
 CheckInfoDate();
 setTimeout(function(){AutoReload();}, 50000);
}

function CheckInfoDate(){
   $.ajax({
               type: "POST",
               url: "MyPage.aspx/CheckDate",
               contentType: "application/json; chartset=utf-8",
               dataType: "json",
               success: function (data) { ProcessResult(data.d); },
               error: function (orjRequest){ ErrorHandler(); }
         });
       }

      function ErrorHandler() {
           window.location.href = "../Login.aspx";
       }

       function ProcessResult(result) {
           if (result != "False") {
               RefreshDataTable();
           }
       }

      function RefreshDataTable() {
               table1.fnReloadAjax();
       }

//MyPage.aspx.cs
[WebMethod(Description="Read Date from Database")]
public static String CheckDate()
{
  //Basic SQL read from database and return as string
  return DBCustomClass.CheckInfoDate().ToString();
} 
```

我收到的错误日志是：

> 来源：http://localhost:8080/MyPage.aspx/CheckDate System.Web.HttpException：发送 HTTP 标头后无法重定向。
> 在 System.Web.HttpResponse.Redirect(String url, Boolean endResponse)
> 在 System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤，布尔和完成同步)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T09:06:41.350

虽然复发很少见，但其他时间是一致的（但不可重复）。我会将这个问题标记为已解决。

# excel - 查找不接受类型为 Empty 的参数的函数/公式

> ID：14189179
> 
> 赞同：0
> 
> 时间：2013-01-07T02:44:30.053
> 
> 标签：excel, excel-formula

一般来说，Excel中的空单元格可以隐式转换为`0`( `Double`type)、`FALSE`( `Boolean`type)、`""`( `String`type)，以避免函数不起作用。例如，给定`A1`是空的，`=-A1`返回`0`，`=IF(A1,TRUE,FALSE)`返回`FALSE`，`=LEN(A1)`返回`0`......

但是，我正在寻找一个函数或公式，对其应用空单元格会返回错误。`=5/A1`是一个例子，因为它返回`#DIV/0!`，但我考虑`#DIV/0!`了一个非常特殊的情况。我希望找到一个不接受类型为`Empty`.

我希望这种公式简单并真正用于实践......（虽然看起来不太可能，否则很容易找到......）

有人可以帮忙吗？

**编辑 1**：根据评论，这确实是用于文档。我需要找到最有说服力的例子来证明我的解决方案在实践中解决了实际和基本的问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:48:17.540

`ISBLANK()` 如果单元格为空白则返回 TRUE，如果不是则返回 FALSE 。例如，您可以这样做`IF(ISBLANK(A1),NA(),A1)`。

# java - Java while 循环计时

> ID：14189182
> 
> 赞同：2
> 
> 时间：2013-01-07T02:44:47.223
> 
> 标签：java, lwjgl

我正在制作一个 Java 游戏，但我一直坚持如何轻松地进行计时。我知道有 delta time 的东西，但这意味着我必须在几乎每个移动/更新函数中插入那个 delta 变量？

我想知道我是否可以对游戏的主 While 循环进行计时，使其每 50 毫秒运行/循环一次，而不是尽可能快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T02:49:30.537

位置的变化是时间的函数，因此必须将时间增量传递给大多数更新游戏状态的函数是有意义的。这是很自然的事情；我不会担心这样做。

虽然可以在每一帧中插入延迟（您几乎肯定想要这样做，因为让游戏以 1000 fps 运行毫无意义），但让您的更新逻辑*假设*每一帧都会花费预设的时间量。当一帧碰巧比其他帧花费更长的时间时，这样做会导致断断续续。

为了给你的游戏一定的帧率，每帧的一般做法如下：

*   将当前时间记录为`startTime`。
*   进行状态更新。
*   重绘。
*   将当前时间记录为`endTime`。
*   睡觉`(1 / framerate) - (endTime - startTime)`

# heroku - Heroku pgbackups 中的 DATABASE_URL 是什么意思？

> ID：14189184
> 
> 赞同：2
> 
> 时间：2013-01-07T02:45:15.160
> 
> 标签：heroku

当我输入“heroku pgbackups”时，会生成以下列表。在某个时候，我启动了一个新的 Maroon 数据库并删除了 Gold 数据库。我的主数据库现在是 Maroon。当 ID 开始变为 a00x 时，我开始使用自动备份。我对 DATABASE 和 DATABASE_URL 之间的区别感到困惑，因为我认为我的自动备份正在备份错误的数据库，因为数据库的大小减小了。b023 是我刚刚生成的备份，数据库的名称再次不同。有人可以帮我理解这里的命名约定吗？谢谢你。温柔点，我是新手。 ![在此处输入图像描述](../Images/0b3b4277ba04fdda519e9855f3a514c8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:04:47.097

来自：[https ://devcenter.heroku.com/articles/pgbackups](https://devcenter.heroku.com/articles/pgbackups)

创建备份

备份被压缩。备份的大小将小于数据库的大小。默认情况下，PG Backups 针对您的主数据库（位于 DATABASE_URL 配置变量位置）进行操作。

```
$ heroku pgbackups:capture

HEROKU_POSTGRESQL_BLACK (DATABASE_URL)  ----backup--->  b251

Capturing... done
Storing... done 
```

如果您的应用程序上有多个数据库，您可以通过指定数据库名称来选择要备份的数据库：

```
$ heroku pgbackups:capture HEROKU_POSTGRESQL_PINK

HEROKU_POSTGRESQL_PINK  ----backup--->  b252

Capturing... done
Storing... done 
```

# java - 壁纸服务/MainActivity

> ID：14189186
> 
> 赞同：0
> 
> 时间：2013-01-07T02:46:18.730
> 
> 标签：java, android, android-activity, wallpaper

我基本上需要我的主要活动来运行活动而不是壁纸服务

示例：public class SBLiveWallpaper extends WallpaperService { - 现在是这样

这就是我需要它的方式： public class MainActivity extends Activity {

是否可以将壁纸服务设置为次要服务或主要活动文件中的内容？基本上，这两行代码都在运行，但扩展活动是一种主要活动。

# javascript - 动态添加html后使javascript工作

> ID：14189189
> 
> 赞同：1
> 
> 时间：2013-01-07T02:46:48.337
> 
> 标签：javascript

我有一个启用自动上传的文件上传按钮，如下所示：

```
<form id="fileupload" action="home/uploadprofilepic" method="POST" enctype="multipart/form-data">
    <span class="btn btn-success fileinput-button">
        <i class="icon-plus icon-white"></i>
        <span>Add files...</span>
        <input type="file" name="files">
    </span>
</form>

$(document).ready(function() 
{
    $("input[name=files]").change(function() {
        $(this).closest("form").submit();
    });
}); 
```

但是，我想将其动态插入为 html。我也需要添加自动上传 javascript。这是我到目前为止所拥有的：

```
$('#uploadPicId').popover({ 
    title : 'Edit Profile Picture', //this is the top title bar of the popover. add some basic css
    html: 'true', //needed to show html of course
    content : '<form id="fileupload" action="home/uploadprofilepicmeta" method="POST" enctype="multipart/form-data">'+
            '<span class="btn btn-success fileinput-button">'+
            '   <i class="icon-plus icon-white"></i>'+
            '    <span>Add files...</span>'+
            '    <input type="file" name="files">'+
            '</span>'+
            '</form>'
 }); 
```

我需要添加 javascript 以使自动上传工作。有没有办法做到这一点？我很迷茫。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T02:56:12.583

将上面的 js 更改为这样：

```
$(document).ready(function() 
{
    $("body").on("change", "input[name=files]", function() {
        $(this).closest("form").submit();
    });
}); 
```

关键区别在于您在整个主体上设置事件侦听器，如果事件是从给定输入启动的，则无论是否动态添加 html，都将触发您的函数。

# django - django PIL 图片上传/显示问题

> ID：14189191
> 
> 赞同：1
> 
> 时间：2013-01-07T02:47:01.197
> 
> 标签：django, python-imaging-library, django-models, imagefield

我试图让 django 显示图片。我已经安装了 PIL，它可以正常工作。我正在运行 py 2.7、win 7、开发服务器和 sqlite3

我的静态根：

```
STATIC_ROOT = r'H:/netz2/skateproject/static/' 
```

我在这个文件夹中有一张背景图片，可以通过

```
http://127.0.0.1:8000/static/images/lomax.jpg 
```

现在我试图通过图像字段和管理员上传图片。它工作正常，图片位于正确的文件夹中（我现在已更改文件夹一百万次，看看这是否可能是问题）但图片无法显示。

我的模型的一部分：

```
class Sk8(models.Model):
    name        = models.CharField(max_length=50, default='name of the model')
    bild1       = models.ImageField(upload_to="uploads/") 
```

我的媒体根：

```
MEDIA_ROOT = r'H:/netz2/skateproject/media/' 
```

图片位于正确的文件夹中。netz/skateproject/media/pic.jpg

但它似乎 localhost 无法访问此文件夹。当我尝试时 - 我得到一个 404 并且 django 告诉我该 url 与我在我的 url 中定义的任何内容都不匹配。这是真的 - 但我也没有为静态文件夹中的背景图像定义一个 url - 我可以很好地访问这个。

我还尝试从我的 html 模板访问文件，如下所示：

```
{% extends "grundgerüst.html" %}
{% block inhalt %}
    <div id='skatelist'>
        {% for sk8 in skates %}
        <p><a href="/skates/{{sk8.slug}}/">{{sk8}}</a></p>
        <p><img src="{{sk8.bild.url}}"/></p>
        {% endfor %}
    </div>
{% endblock %} 
```

显然图片没有显示出来。

我不知道这里有什么问题。我想我应该能够在本地主机上看到图片吗？这是 chrome 给我的错误图片

![在此处输入图像描述](../Images/8f8f4d8323759c83b80a6afb0699a0f7.png)

如果即图片中的文件夹与代码示例中的文件夹不同，那是因为我更改了它们以测试不同的设置。

我真的希望有人可以帮助我弄清楚 image_field，因为如果我不能显示它们上传图片没有多大意义:)

提前致谢！！！丹尼尔

哦，而且 - 我已经尝试过 google 和 django 参考等。老实说，我无法这样想。每一个帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:20:51.177

Django 的 contrib.staticfiles 应用程序将在 DEBUG 模式[[ref]](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-development)时修补您的 url 以提供静态文件。不幸的是，媒体文件不能这样说。

将以下代码段添加到您的项目 urls.py 以显示媒体

```
django.conf import settings

if settings.DEBUG:
    urlpatterns += patterns('',
        url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {
            'document_root': settings.MEDIA_ROOT,
        }),
   ) 
```

[文档参考](https://docs.djangoproject.com/en/dev/howto/static-files/#serving-other-directories)

# ajax - Play Framework 2.1 RC1 中的 AJAX 文件上传传递一个空文件

> ID：14189192
> 
> 赞同：3
> 
> 时间：2013-01-07T02:47:08.030
> 
> 标签：ajax, json, scala, file-upload, playframework

Scala/Play 大师在那里。

我正在尝试在 Play 2.1 (RC1) 中使用 AJAX 上传文件。对于客户端部分，我使用的是[eldarion/bootstrap-ajax](https://github.com/eldarion/bootstrap-ajax)，一切似乎都很好，除了上传的文件是空的。

前端片段：

```
...
<form action="@routes.Campaigns.upload" method="post" class="form ajax replaceable" data-replace=".replaceable">
    <input type="file" name="picture">
    <p><input class="btn" type="submit"></p>
</form>
... 
```

请注意，我必须使用显式`<form>`标记而不是`@form`帮助程序，因为所需的 css 类（数据替换）包含破折号，因此不能用作`Symbol`. 但不管怎么说。控制器中调用的动作如下所示：

```
 def upload = Action(parse.temporaryFile) {
    request =>
      Logger.info("Trying to upload a file")
      val resultString = try {
        val file = new File("/tmp/picture")
        request.body.moveTo(file, true)
        "file has been uploaded"
      } catch {
        case e: Exception => "an error has occurred while uploading the file"
      }
      val jsonResponse = Json.toJson(
        Map("html" -> Json.toJson("<p>" + resultString + "</p>")
        )
      )
      Ok(jsonResponse)
  } 
```

我知道随着我的发展，文件名应该更智能地设置，但目前，/tmp/picture 对我来说和其他任何名称一样好。

生成 JSON 响应（其中包含“文件已上传”消息），并作为 200 响应的有效负载发送回浏览器。JSON 被接收并正确地用于修改页面（在这种情况下，只是删除了上传的表单）。

但是该文件虽然出现在正确的时间和正确的位置，但始终是空的：

```
larsson:tmp bruno$ ls -l /tmp/picture
-rw-r--r--  1 bruno  staff  0  7 Jan 03:07 /tmp/picture 
```

在我看来，这特别奇怪，因为使用传统`multipart/form-data`形式的上传代码，没有任何 AJAX，并且使用`Action`with`parse.multipartFormData`作为参数，而不是`parse.temporaryFile`，可以正常工作。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T05:03:10.417

我不知道 bootstrap-ajax，无论如何，如果它没有专门支持通过 AJAX 上传文件（而且我在它的`readme`文件中没有找到任何关于这种可能性的信息）它不会使用 AJAX 发送文件。

**原因：在标准 JavaScript 中，由于安全限制，无法**使用 AJAX 上传文件，`iFrames`并且有一些技术可以解决此问题，主要是`bootstrap-ajax`使用解决方案。

解决方案：有一些 AJAX 文件上传器，它适用于 HTML5 即。[jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)提供 ajax 上传、多文件上传、拖拽文件到拖放区等。

一般来说，HTML5 比早期版本的 HTML 更好地支持文件上传，因此您可以轻松构建上传器而无需使用额外的插件，看看[这个主题](https://stackoverflow.com/a/8758614/1066240)。正如您所看到的，它提供了在上传之前验证某些数据的可能性，并且还提供了进度条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-20T10:49:07.883

我目前正在尝试实现类似的东西，并且我的第一个版本正在运行。我就是这样做的：

在我的控制器中，我定义了一种上传文件的方法。[就我而言，我使用 Action.async ，因为我使用reactivemongo](http://reactivemongo.org/)将内容保存到我的 MongoDB 中。我已删除该代码，以免使此示例复杂化。

我在这个示例中所做的是上传一个 csv 文件，将其保存到磁盘，然后将第一行作为字符串返回给用户。在现实生活中，该方法会生成一个列表，以便用户能够选择哪一列代表什么等等。

我使用[强大的 csv](https://github.com/t-pleasure/mighty-csv)进行 csv 解析。伟大的图书馆！

**应用：**

```
def upload = Action.async(parse.multipartFormData) {
    implicit request =>
      val result = uploadForm.bindFromRequest().fold(
        errorForm => Future(BadRequest(views.html.index(errorForm))),
        form => {
          import java.io.File
          request.body.file("csvFile").map {
            csv =>
              val path = current.configuration.getString("csv.job.new.file.path").getOrElse("")
              val name = DateTime.now().getMillis + ".csv"
              csv.ref.moveTo(new File(path + name))
              val settings = CSVReaderSettings.Standard(linesToSkip = form.linesToSkip)
              val rows: Iterator[Array[String]] = CSVReader(path + name)(settings)
              val firstRow = rows.next()
              val test = firstRow match {
                case xs if xs.size == 0 || xs.size == 1 => xs.mkString
                case xs if xs.size > 1 => xs.mkString(", ")
              }
              Future(Ok(test))           
          }.getOrElse(Future(BadRequest("ahadasda")))
        }
      )
      result
  } 
```

**路线：**

```
POST          /upload        @controllers.Application.upload 
```

我在控制器之前使用@，因为我在服务类中使用带有 guice 的 DI。由于我们将使用 javascript 进行上传，因此我们需要定义我们的 jsRoutes：

**js路线：**

```
def javascriptRoutes = Action {
    implicit request =>
      import routes.javascript._
      Ok(
        Routes.javascriptRouter("jsRoutes")(
          Application.upload
        )
      ).as("text/javascript")
  } 
```

请记住在要使用路由的模板中导入：

```
<script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>
<script src="@routes.Assets.at("javascripts/app.js")@Messages("js.version")" type="text/javascript" ></script> 
```

在我的视图模板中，我有一个常规的帮助表单。我做了一些 css 样式的东西来改变上传按钮和文件选择器的外观。但是输入字段在那里。

**index.scala.html：**

```
<div class="csvContainer">

    @helper.form(action = routes.Application.upload, 'enctype -> "multipart/form-data", 'id -> "csvUpload") {
        @Messages("upload.row.skip")
        @inputText(uploadForm("linesToSkip"), 'class -> "hidden")

        <div style="position:relative;">
            <div id="csvFile" style="position:absolute;">
                @Messages("upload.choose")
            </div>
            <input id="uploadFile" type="file" name="csvFile" style="opacity:0; z-index:1;" onchange="document.getElementById('csvFile').innerHTML = this.value;" />
        </div>
        <p>
            <input type="submit" value="@Messages("upload.submit")">
        </p>
    }
    </div> 
```

在**app.js**中是 ajax 魔法发生的地方，记住我还没有实现任何验证或很酷的 html5 东西，因为进度条和其他处理程序，在 besiors[链接](https://stackoverflow.com/a/8758614/1066240)中描述。我使用常规的 JQuery。

**应用程序.js：**

```
$('#uploadFile').change(function(){
        var name = $(this).val().split("\\");
        console.log(name[2]);
        $('#csvFile').text(name[2]);
    });

    $('#csvFile').click(function(){
        $('#uploadFile').click();
    });

$("#csvUpload").submit(function(e) {
        e.preventDefault();
        var formData = new FormData();
        formData.append('csvFile',  $( '#uploadFile' )[0].files[0]);
        formData.append('linesToSkip', $( "#linesToSkip").val());
        jsRoutes.controllers.Application.upload().ajax({
            data: formData,
            processData: false,
            contentType: false,
            cache: false,
            type: 'POST',
            success: function(data){
                alert(data);
            }
        });
    }); 
```

我删除了很多代码来简化这个例子，我希望我没有忘记任何东西。希望这可以帮助！

# php - 使用 google-api-php-client 使用小工具创建 google 日历事件

> ID：14189194
> 
> 赞同：2
> 
> 时间：2013-01-07T02:47:16.093
> 
> 标签：php, google-calendar-api, google-gadget, google-api-php-client

我有一个工作脚本，它正在我的谷歌日历中创建事件 - 使用 google-api-php-client。我正在尝试使用以下代码向它创建的每个事件添加一个**小工具：**

```
require_once "google-api-php-client/src/Google_Client.php";

require_once "google-api-php-client/src/contrib/Google_CalendarService.php";

define('CLIENT_ID', 'xxx...');

define('SERVICE_ACCOUNT_NAME', 'xxx...');

define('KEY_FILE', 'xxx...');

$client = new Google_Client();

$client->setApplicationName("WEB ACCTION");

$key = file_get_contents(KEY_FILE);

$client->setAssertionCredentials(new Google_AssertionCredentials(SERVICE_ACCOUNT_NAME,'xxx...',$key));

$client->setClientId(CLIENT_ID);

$service = new Google_CalendarService($client);

$event = new Google_Event();

$event->setSummary($variable1);

$event->setLocation($variable2 . ", " . $variable3);

$start = new Google_EventDateTime();

$start->setDateTime(date(DATE_ATOM, strtotime($variable4) + $time_offset));

$event->setStart($start);

$end = new Google_EventDateTime();

$end->setDateTime(date(DATE_ATOM, strtotime($variable5) + $time_offset));

$event->setEnd($end);

//The not working section

//$gadget = new Google_EventGadget();           
//$gadget->setIconLink('xxx...');
//$gadget->setTitle('xxx...');
//$gadget->setHeight('xxx...');
//$gadget->setWidth('xxx...');
//$gadget->setLink('xxx...');
//$gadget->setType('xxx...');
//$gadget->setDisplay('xxx...');
//$event->setGadget($gadget);

$createdEvent = $service->events->insert($g_calendar , $event); 
```

不幸的是 - 我无法让它工作，我无法找到有关使用 google-api-php-client 创建小工具的任何信息。该库包含一个**Google_EventGadget**类和**setGadget**函数，但没有关于如何使用它们的信息。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T23:19:17.123

我找到了解决方案 - google-api-php-client 仅支持小工具及其图标的认证链接。直到我使用**https://www...**链接，它才起作用。

即使我用于测试的主机没有安全证书，它也能正常工作。

```
$gadget->setIconLink('https://www...');

$gadget->setLink('https://www....');

$gadget->setDisplay('chip');

$gadget->setWidth('400');

$gadget->setHeight('100');

$event->setGadget($gadget);

$createdEvent = $service->events->insert($g_calendar , $event); 
```

希望它能节省一些时间！

# javascript - 维护 Js 和 Rails 之间的语言环境

> ID：14189197
> 
> 赞同：0
> 
> 时间：2013-01-07T02:47:46.980
> 
> 标签：javascript, ruby-on-rails-3, backbone.js

我有一个应用程序，它是 Ruby on Rails/Devise 前端，然后是 Backbone.js。在 app/views/layouts/application.html.erb 我有这个：

```
<head>
...
<script type="text/javascript">
  I18n.locale = "<%= I18n.locale %>"
  I18n.defaultLocale = "<%= I18n.default_locale %>"
</script> 
```

然后用户可以选择自己的语言环境。现在，在 Ruby on Rails 部分，我在应用程序控制器中有这个：

```
class ApplicationController
before_filter :set_locale
  def set_locale
    I18n.locale = params[:locale] || I18n.default_locale
  end
  def default_url_options(options={})
    { :locale => I18n.locale }
  end 
```

我遇到的问题是 Backbone.js 片段没有从 Ruby on Rails 片段中“获取”语言环境，用户必须再次选择语言环境。如何将语言环境“注入”到 Backbone.js 片段中，以便用户不必再次选择它？

更多信息：其中一条评论完全正确。Javascript 控制台显示 Backbone.js 部分没有从 Ruby on Rails/Devise 获取语言环境 - Javascript 控制台首先显示默认设置。不知何故，我没有将语言环境传递给 Backbone.js。

# ios - 使用 AWSiOSSDK.framework 从 AWS S3 下载图像的时间过长

> ID：14189200
> 
> 赞同：3
> 
> 时间：2013-01-07T02:48:20.607
> 
> 标签：ios, amazon-s3

从 AWS S3 下载一个 700 KB 的图像文件大约需要 7.5 秒。

我编写了这个方法来从 AWS S3 下载图像：

```
+ (UIImage *)downloadImageFromPath:(NSString *)path
{
    NSDate *methodStart = [NSDate date];

    S3GetObjectRequest *getObjectRequest = [[S3GetObjectRequest alloc] initWithKey:path withBucket:AWS_BUCKET];

    AmazonS3Client *s3 = [[AmazonS3Client alloc] initWithAccessKey:ACCESS_KEY_ID withSecretKey:SECRET_KEY];

    S3GetObjectResponse *response;
    @try
    {
        response = [s3 getObject:getObjectRequest];
    }
    @catch(NSException* ex)
    {
        return [UIImage imageNamed:@"blank.jpg"];
    }

    NSData *data = response.body;
    UIImage *image = [UIImage imageWithData:data];

    NSDate *methodFinish = [NSDate date];
    NSTimeInterval executionTime = [methodFinish timeIntervalSinceDate:methodStart];
    NSLog(@"executionTime = %f", executionTime);

    return image;
} 
```

我只是在方法的开头和结尾添加了代码。

正如我上面提到的，它需要大约 7.5 秒才能完成。

我使用 GCD 在后台运行它，`DISPATCH_QUEUE_PRIORITY_HIGH`它运行时队列中没有其他内容。

有谁知道为什么要花这么长时间？很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-08T14:19:04.897

这是一个已知问题，仅 S3在上传和下载图像时速度很**慢。**

好吧，当您启用 CloudFront 并使用其他 AWS 服务时，这实际上不是问题。

您正在寻找的是[来自 Amazon 的 Cloudfront CDN](http://aws.amazon.com/cloudfront/)。您可以指定一个来源（在您的情况下是您的 S3 存储桶），然后您的文件将分发到全球所有 Amazon Cloudfront 边缘位置。查看他们的[常见问题解答](http://aws.amazon.com/cloudfront/faqs/)和[边缘站点列表](http://aws.amazon.com/cloudfront/#details)。

您将上传到您的大多数用户所在的中央服务器（估计）。并从签名 URL 下载，该 URL 会将您定向到距离用户最近的服务器，其中包含您的存储桶副本……您还可以将图像缓存在服务器上，以加快上传和下载速度。

另外，我不确定您如何确定`path`（密钥），但如果您要列出 S3 存储桶中的密钥，请停止！它的慢！您应该使用 DynamoDB 或 SimpleDB，它们都是存储小型数据集的替代方案，DynamoDB 速度超快但实际上没有查询选项，您可以将所有键以某种格式存储到 DynamoDB 中并匹配它们。

您可以使用 SimpleDB 并存储所有具有相关属性（属性）的键，并使用类似于 SQL 的 SELECT 表达式查询 SimpleDB——但语法略有不同

您可以做很多事情来优化 S3！

如果您需要关于**所有事情**的详细步骤，如果您悬赏这个问题，我会这样做。从文档中获取这一点并不容易，但也可能需要我**几个小时**才能写出来，而且我有学校！

完成所有这些步骤后，我将大约 8 秒的时间缩短到了拇指的瞬间！

# java - 使用 Java，如何在不重复比较的情况下将 HashMap 中的每个条目与同一 HashMap 中的每个其他条目进行比较？

> ID：14189202
> 
> 赞同：7
> 
> 时间：2013-01-07T02:48:36.777
> 
> 标签：java, hashmap, iteration

我目前正在使用 2 个 for 循环来比较所有条目，但我得到了重复的比较。因为 HashMap 没有排序，所以我不知道如何消除已经进行的比较。例如，我有类似的东西：

```
 for(Entry<String, String> e1: map.entrySet())
    { 
        for(Entry<String, String> e2: map.entrySet())
        {    
          if (e1.getKey() != e2.getKey())
            {
           //compare e1.getValue() to e2.getValue() 
            }
        }
     } 
```

这样做的问题是第一个条目将与第二个条目进行比较，然后是第三个条目，依此类推。但随后将再次将第二个条目与第一个条目进行比较，依此类推。然后将第三个条目与第一个条目进行比较，然后是第二个条目，然后是第四个条目，等等。有没有更好的方法来遍历 HashMaps 以避免重复比较？

附加信息：

更具体地说，希望能回答您的问题，我拥有的 HashMap 存储文件名（键）和文件内容（值） - 只是文本文件。HashMap 已通过遍历包含我要比较的文件的目录来填充。然后我正在做的是通过一些算法运行成对的文件来确定每对文件之间的相似性。我不需要将文件 1 与文件 2 进行比较，然后再将文件 2 与文件 1 进行比较，因为我只需要将这 2 个文件进行一次比较。但我确实需要将每个文件与其他文件进行一次比较。我是使用 HashMaps 的新手。下面的 agim 答案可能只适用于我的目的。但我也将尝试围绕以下 Evgeniy Dorofeev 和 Peter Lawrey 的解决方案展开思考。我希望这有助于更好地解释事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T09:23:32.270

如果您不小心，消除重复项的成本至少会高于键的冗余比较成本。

您可以使用订购钥匙`System.identityHashCode(x)`

```
for(Map.Entry<Key, Value> entry1: map.entrySet()) {
   Key key1 = entry1.getKey();
   int hash1 = System.identityHashCode(key1);
   Value value1 = entry1.getValue();
   for(Map.Entry<Key, Value> entry2: map.entrySet()) {
       Key key2 = entry2.getKey();
       if (key1 > System.identityHashCode(key2)) continue;

       Value value2 = entry1.getValue();
       // compare value1 and value2;
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T03:19:23.230

这个解决方案怎么样：

```
String[] values = map.values().toArray(new String[map.size()]);
for (int i = 0; i < values.length; i++) {
  for (int j = i+1; j<values.length; j++) {
    if (values[i].equals(values[j])) {
      // ...
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:05:08.290

尝试

```
 HashMap<Object, Object> map = new HashMap<>();
    Iterator<Entry<Object, Object>> i = map.entrySet().iterator();
    while (i.hasNext()) {
        Entry next = i.next();
        i.remove();
        for (Entry e : map.entrySet()) {
            e.equals(next);
        }
    } 
```

请注意，比较 HashMap 中的键是没有意义的，它们总是不相等的。那就是我们只能迭代/比较值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T05:23:50.543

如果我理解正确，您只想知道地图的值是否有重复？如果是这样的话：

```
Set<String> values = new HashSet<String>(map.values());
boolean hasDuplicates = values.size() != map.size(); 
```

如果您在找到第一个副本后退出，这可能会更有效率：

```
Set<String> values = new HashSet<String>();
for (String value : map.values()) {
  if (!values.add(value)) {
    return true;
  }
}
return false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-25T01:32:59.803

```
public static boolean compareStringHashMaps(Map<String, String> expectedMap, Map<String, String> actualMap) throws Exception
{
    logger.info("## CommonFunctions | compareStringHashMaps() ## ");
        Iterator iteratorExpectedMap = expectedMap.entrySet().iterator();
        Iterator iteratorActualMap = actualMap.entrySet().iterator();
        boolean flag = true;
        while (iteratorExpectedMap.hasNext() && iteratorActualMap.hasNext()){
            Map.Entry expectedMapEntry = (Map.Entry) iteratorExpectedMap.next();
            Map.Entry actualMapEntry = (Map.Entry) iteratorActualMap.next();
            if(!expectedMapEntry.getKey().toString().trim().equals(actualMapEntry.getKey().toString().trim()))
            {   
                flag = false;
                break;
            }
            else if (!expectedMapEntry.getValue().toString().trim().equals(actualMapEntry.getValue().toString().trim()))
            {
                flag = false;
                break;
            }
        }   
        return flag; 
```

}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-01T07:42:16.270

考虑到 HashMap 的条目是整数。这将返回 HashMap 中的最大条目。

```
int maxNum = 0;
for (Object a: hashMap.keySet()) {
  if ((int)hashMap.get(a) > maxNum) {
      maxNum = (int)hashMap.get(a);
  }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-01-07T02:58:27.880

您可以尝试使用二维结果数组。如果结果已填充，则不要再次执行比较。这还具有存储结果以供以后使用的好处。

因此，对于 int 结果，您将看到如下内容：`Integer[][] results = new Integer[map.entrySet().size()][map.entrySet().size()];`这会将数组初始化为空值，并允许您在比较之前检查现有结果。这里需要注意的重要一点是，每个比较结果都应该在数组中存储两次，除了与自身的比较。例如，索引 1 和索引 2 之间的比较应存储在`results[1][2]`and中`result[2][1]`。

希望这可以帮助。

# wso2 - WSO2 ESB 关于 dbreport 和性能

> ID：14189205
> 
> 赞同：1
> 
> 时间：2013-01-07T02:48:59.023
> 
> 标签：wso2, loops, wso2esb

我在 WSO2 ESB dbreport 调解器中进行了测试。当我从数据库 A 向 WSO2 ESB 发送“大消息”（100 或 1,000 或 10,000 ... 500,000 行）时。WSO2 ESB 通过 Iterate 中介将消息拆分为行，然后使用 DBReport 中介将逐行写入数据库 B（通过数据源池）。

写100行时用时5秒，写1000行时用时188秒，再写10000行时用时19163秒。

DBReport 调解器的使用效率如何？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T13:30:29.390

DBReport mediator 在 WSO2 ESB 中同步执行，这意味着执行此 DBReport mediator 的线程被卡住，直到数据库操作完成。这意味着性能低于异步执行时的性能。

因此，为了获得最大的性能，请使用 WSO2 数据服务服务器并使用 DSS 执行插入数据库操作。这样您就可以获得最大的性能。

# actionscript-3 - 面向移动设备和 Kinect 设备时构建代码

> ID：14189210
> 
> 赞同：0
> 
> 时间：2013-01-07T02:50:00.597
> 
> 标签：actionscript-3, design-patterns, mobile, kinect-sdk

使用 Starling 和面向 Windows Kinect 传感器的 AIRKinect 框架构建多个游戏。

我想以这样一种方式打包和重构我的类，以便我可以轻松地重新调整大部分代码的用途并定位移动（主要是 IOS）设备。即触摸和多点触控支持将取代任何 AIRKinect 特定的骨骼跟踪代码。

尽管我在 Actionscript 3 中进行编码，但我认为相同的通用代码结构应该与代码无关。

什么是构建我的课程的好方法？想到哪些设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:41:41.930

基本上，您可以创建一个接口，例如 IController 和几个实现该接口的平台相关类，例如 KinectController 和 TouchController。然后您可以在运行时检查系统功能并创建 KinectController 或 TouchController。用法不会依赖于具体类，因为两者都会实现 IController。

这是一个非常基本的答案，但我无法更具体地回答，因为我对您的项目一无所知。

# c# - Javascript 从数组中填充 Telerik MVC 组合框

> ID：14189211
> 
> 赞同：0
> 
> 时间：2013-01-07T02:50:43.783
> 
> 标签：c#, asp.net-mvc, json, combobox, telerik-mvc

我的应用程序是 MVC4；我正在尝试使用 json 填充 Telerik MVC，结果是一个数组；但是我只得到一件物品；这是我的脚本：

```
 function CheckWord() {
        var wordtocheck = $('#Cword').val();
        alert(wordtocheck);
        $.ajax({
            url: '/Home/CheckWord',
            type: 'POST',
            data: {
                cword: wordtocheck
            },
            success: function (data) {
                for (var i = 0; i < data.array.length; ++i) {
                    var myString = data.array[i];
                    var mySplitResult = myString.split("-->");
                    var hms = mySplitResult[0];
                    var a1 = hms.split(',');
                    var a2 = a1[0];
                    var a = a2.split(':');
                    var start = (+a[0]) * 60 * 60 + (+a[1]) * 60 + (+a[2]);
                    var hms1 = mySplitResult[1];
                    var b1 = hms1.split(',');
                    var b2 = b1[0];
                    var b = b2.split(':');
                    var end = (+b[0]) * 60 * 60 + (+b[1]) * 60 + (+b[2]);
                    var dropDownList = $('#ComboBox').data('tComboBox');
                     dropDownList.dataBind([
                     { Text: start[i] + "-" + end[i], Value: start[i] + "-" + end[i] }]);
                     dropDownList.select(0);
                }
            },
            error: function () {

            }
        }); 
```

当我在开始和结束后添加 [i] 时，我变得不确定！没有 [i] 我得到正确的值，但只有一项。非常感谢您的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:07:30.153

这是我解决问题的方法：

```
 function CheckWord() {
        var wordtocheck = $('#Cword').val();
        alert(wordtocheck);
        $.ajax({
            url: '/Home/CheckWord',
            type: 'POST',
            data: {
                cword: wordtocheck
            },
            success: function (data) {
                var listData = [];
                for (var i = 0; i < data.array.length; ++i) {
                    var myString = data.array[i];
                    var mySplitResult = myString.split("-->");
                    var hms = mySplitResult[0];
                    var a1 = hms.split(',');
                    var a2 = a1[0];
                    var a = a2.split(':');
                    var start = (+a[0]) * 60 * 60 + (+a[1]) * 60 + (+a[2]);
                    var hms1 = mySplitResult[1];
                    var b1 = hms1.split(',');
                    var b2 = b1[0];
                    var b = b2.split(':');
                    var end = (+b[0]) * 60 * 60 + (+b[1]) * 60 + (+b[2]);
                    listData[i] = { Text: myString, Value: start };

                }
                var dropDownList = $('#ComboBox').data('tComboBox');
                // debugger;
                dropDownList.dataBind(listData);
                dropDownList.select(0);
            },
            error: function () {

            }
        });
    } 
```

希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:13:28.230

希望以下链接对您有所帮助

[http://www.telerik.com/community/forums/aspnet-ajax/mvc/radcombobox-populate-on-client-side.aspx](http://www.telerik.com/community/forums/aspnet-ajax/mvc/radcombobox-populate-on-client-side.aspx)

在这里你可以看到

```
<telerik:RadComboBox ID="radProject" runat="server" Skin="Default" Width="300px" 
EnableLoadOnDemand="true" Filter="Contains" OnClientItemsRequesting="getProjects" 
EmptyMessage="Select Project" /> 
```

在上面的代码中，EnableLoadOnDemand 设置为 true，Filter 设置为 contains，并且事件绑定到 OnClientItemsRequesting。

```
function getProjects(sender, args) { 
            itemsRequesting(sender, args); 

            $.getJSON( 
            '<%= Url.Action("GetProjects", "Capital") %>', 
            { facility: GetFacility().get_value() }, 
            function(data) { 
                fillCombo(sender, data); 
                sender.highlightAllMatches(sender.get_text()); 
            }); 
        } 
```

上面的 javascript 方法使用带参数的 get JSON 执行 ajax 调用，子方法 fillCombo 正在填充组合框。

// 将它用于所有 RadComboBox 以从 JQuery 填充

```
 function fillCombo(combo, result) { 
            combo.clearItems(); 

            var items = result.d || result; 

            // This just lets your users know that nothing was returned with their search 
            if (items.length == 0) { 
                var comboItem = new Telerik.Web.UI.RadComboBoxItem(); 
                comboItem.set_text("Nothing found"); 
                comboItem.set_value("null"); 
                combo.get_items().add(comboItem); 
                combo.set_text(""); 
            } 

            for (var i = 0; i < items.length; i++) { 
                var item = items[i]; 

                var comboItem = new Telerik.Web.UI.RadComboBoxItem(); 
                comboItem.set_text(item.Text); 
                comboItem.set_value(item.Value); 
                combo.get_items().add(comboItem); 
            } 
        } 
```

现在为了取消 RADComboBox 的默认行为，您可以使用以下代码

// 这会取消默认的 RadComboBox 行为

```
function itemsRequesting(sender, args) { 
            if (args.set_cancel != null) { 
                args.set_cancel(true); 
            } 
            if (sender.get_emptyMessage() == sender.get_text()) 
                sender.set_text(""); 
        } 
```

我希望上述解决方案能解决您的问题

# php - 如何在彼此之后立即转义引号？

> ID：14189212
> 
> 赞同：3
> 
> 时间：2013-01-07T02:51:10.690
> 
> 标签：php, regex

我想转义所有尚未转义的双引号。

我已经在使用**real_escape_string()**，但我想了解以下正则表达式/方法有什么问题：

```
$str = '"Hello "" """ world!\"';
preg_replace('/(^|[^\\\\]{1})\"/', '${1}\"', $str); 
```

（PS：我知道 - **\\"**不会被转义，并且在某些其他情况下可能会成为问题，尽管这对我的脚本无关紧要。）

结果是：

```
\“你好世界！\”
```

但我希望它是：

```
\“你好世界！\”
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T02:58:37.830

以下是您逃避 sql 的方法：

```
$str = mysql_real_escape_string($str); 
```

或者：

```
$str = mysqli_real_escape_string($str); 
```

或者

```
$str = *_real_escape_string($str);
// * is your db extention 
```

或者您可以使用 PDO 参数化您的输入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T09:13:03.350

我认为你在正确的轨道上，但你错过了两个关键要素。首先是您必须在否定字符类中包含引号以及反斜杠：`[^"\\]*`。当该部分没有匹配的内容时，下一个字符（如果有的话）**必须**是引号或反斜杠。

如果是反斜杠，`\\.`则使用它和下一个字符，无论它是什么。它可能是引号、反斜杠或其他任何东西；你不在乎，因为你知道它已经被逃脱了。然后你回到用 . 吞噬非特殊字符`[^"\\]*`。

另一个缺失的元素是`\G`. 它将第一个匹配锚定到字符串的开头，就像`\A`. 之后的每场比赛都必须从上一场比赛结束的地方开始。这样，当`"`正则表达式中的 final 起作用时，您就知道每个字符都经过检查，并且您确实匹配了一个未转义的引号。

```
$str = '"Hello "" """ world!\"';
$str = preg_replace('/\G([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"/', '$1\"', $str); 
```

# sql - Select 语句中的案例

> ID：14189216
> 
> 赞同：150
> 
> 时间：2013-01-07T02:51:59.570
> 
> 标签：sql, sql-server, case

我有一个带有`CASE`from的 SQL 语句，但`SELECT`我就是做错了。你们能给我举个例子，`CASE`说明案例是条件，结果来自案例。例如：

```
 Select xxx, yyy
     case : desc case when bbb then 'blackberry';
     when sss then 'samsung';
     end 
     from (select ???? ..... 
```

结果显示

```
 name                         age       handphone
xxx1                         yyy1      blackberry
xxx2                         yyy2      blackberry 
```

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-01-07T03:21:28.473

对于此类有关语法和用法的问题，MSDN 是一个很好的参考。这来自 Transact SQL Reference - CASE 页面。

[http://msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

```
USE AdventureWorks2012;
GO
SELECT   ProductNumber, Name, "Price Range" = 
  CASE 
     WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
     WHEN ListPrice < 50 THEN 'Under $50'
     WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
     WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
     ELSE 'Over $1000'
  END
FROM Production.Product
ORDER BY ProductNumber ;
GO 
```

如果您正在使用 SQL Server，您可能想要查看的另一个好站点是[SQL Server Central](http://sqlservercentral.com)。这为您想学习的 SQL Server 的任何领域提供了大量资源。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-11-16T00:53:48.383

我认为这些可能对您有所帮助。

**使用`SELECT`带有简单`CASE`表达式的语句**

在一个`SELECT`语句中，一个简单的`CASE`表达式只允许一个相等检查；没有进行其他比较。以下示例使用`CASE`表达式更改产品线类别的显示以使其更易于理解。

```
USE AdventureWorks2012;
GO
SELECT   ProductNumber, Category =
      CASE ProductLine
         WHEN 'R' THEN 'Road'
         WHEN 'M' THEN 'Mountain'
         WHEN 'T' THEN 'Touring'
         WHEN 'S' THEN 'Other sale items'
         ELSE 'Not for sale'
      END,
   Name
FROM Production.Product
ORDER BY ProductNumber;
GO 
```

**使用`SELECT`带有搜索`CASE`表达式的语句**

在`SELECT`语句中，搜索的`CASE`表达式允许根据比较值替换结果集中的值。以下示例根据产品的价格范围将标价显示为文本注释。

```
USE AdventureWorks2012;
GO
SELECT   ProductNumber, Name, "Price Range" = 
      CASE 
         WHEN ListPrice =  0 THEN 'Mfg item - not for resale'
         WHEN ListPrice < 50 THEN 'Under $50'
         WHEN ListPrice >= 50 and ListPrice < 250 THEN 'Under $250'
         WHEN ListPrice >= 250 and ListPrice < 1000 THEN 'Under $1000'
         ELSE 'Over $1000'
      END
FROM Production.Product
ORDER BY ProductNumber ;
GO 
```

**`CASE`在`ORDER BY`子句中使用**

以下示例使用子句中的`CASE`表达式`ORDER BY`根据给定的列值确定行的排序顺序。在第一个示例中，计算 HumanResources.Employee 表的 SalariedFlag 列中的值。将 SalariedFlag 设置为 1 的员工按 BusinessEntityID 的降序顺序返回。将 SalariedFlag 设置为 0 的员工按 BusinessEntityID 升序的顺序返回。在第二个示例中，当 CountryRegionName 列等于“United States”时，结果集按 TerritoryName 列排序，所有其他行按 CountryRegionName 排序。

```
SELECT BusinessEntityID, SalariedFlag
FROM HumanResources.Employee
ORDER BY CASE SalariedFlag WHEN 1 THEN BusinessEntityID END DESC
        ,CASE WHEN SalariedFlag = 0 THEN BusinessEntityID END;
GO

SELECT BusinessEntityID, LastName, TerritoryName, CountryRegionName
FROM Sales.vSalesPerson
WHERE TerritoryName IS NOT NULL
ORDER BY CASE CountryRegionName WHEN 'United States' THEN TerritoryName
         ELSE CountryRegionName END; 
```

**`CASE`在`UPDATE`语句中使用**

以下示例使用语句`CASE`中的表达式`UPDATE`来确定为将 SalriedFlag 设置为 0 的员工的 VacationHours 列设置的值。当从 VacationHours 中减去 10 小时导致负值时，VacationHours 增加 40 小时；否则，VacationHours 增加 20 小时。该`OUTPUT`子句用于显示假期前后的值。

```
USE AdventureWorks2012;
GO
UPDATE HumanResources.Employee
SET VacationHours = 
    ( CASE
         WHEN ((VacationHours - 10.00) < 0) THEN VacationHours + 40
         ELSE (VacationHours + 20.00)
       END
    )
OUTPUT Deleted.BusinessEntityID, Deleted.VacationHours AS BeforeValue, 
       Inserted.VacationHours AS AfterValue
WHERE SalariedFlag = 0; 
```

**`CASE`在`HAVING`子句中使用**

以下示例使用子句中的`CASE`表达式`HAVING`来限制`SELECT`语句返回的行。该语句返回 HumanResources.Employee 表中每个职位的最大小时费率。该`HAVING`条款将头衔限制为最高工资高于 40 美元的男性或最高工资高于 42 美元的女性持有的头衔。

```
USE AdventureWorks2012;
GO
SELECT JobTitle, MAX(ph1.Rate)AS MaximumRate
FROM HumanResources.Employee AS e
JOIN HumanResources.EmployeePayHistory AS ph1 ON e.BusinessEntityID = ph1.BusinessEntityID
GROUP BY JobTitle
HAVING (MAX(CASE WHEN Gender = 'M' 
        THEN ph1.Rate 
        ELSE NULL END) > 40.00
     OR MAX(CASE WHEN Gender  = 'F' 
        THEN ph1.Rate  
        ELSE NULL END) > 42.00)
ORDER BY MaximumRate DESC; 
```

有关这些示例的更多详细信息，请访问[源代码](https://docs.microsoft.com/en-us/sql/t-sql/language-elements/case-transact-sql)。

还可以访问[此处](https://docs.oracle.com/cd/B19306_01/appdev.102/b14261/case_statement.htm)和[此处](https://www.techonthenet.com/sql_server/functions/case.php)以获取一些非常详细的示例。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-06-22T11:31:21.863

您还可以使用：

```
SELECT CASE
         WHEN upper(t.name) like 'P%' THEN
          'productive'
         WHEN upper(t.name) like 'T%' THEN
          'test'
         WHEN upper(t.name) like 'D%' THEN
          'development'
         ELSE
          'unknown'
       END as type
FROM table t 
```

# ios - Xcode - 图像视图不隐藏

> ID：14189217
> 
> 赞同：1
> 
> 时间：2013-01-07T02:52:26.727
> 
> 标签：ios, xcode, xcode4.5

我在一个基本应用程序中有一个图像视图，我试图将其设置为在加载时隐藏：

```
- (void)viewDidLoad
{
    my_image.hidden = YES;
} 
```

此代码以及其他一些属性更改根本不起作用。我已经合成了 my_image 属性。任何想法为什么这可能不起作用？另外，如果您需要任何进一步的信息，请告诉我。我是新手，这真的让我很烦恼，所以提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:13:58.780

用简单的代码行很难说清楚，`my_image.hidden = YES;` 但我认为您可以执行以下操作：

1.  在控制台中打印 imageView（您的“my_image”对象）以查看它。
2.  使用 imageView 的其他属性来查看是否可以对其进行操作，例如更改框架、设置背景颜色或为其设置图像。如果您可以更改框架，那么您可以设置`my_image.hidden = NO;`其他位置。
3.  创建另一个 UIImageView 对象并添加尝试！
4.  如果以上都不起作用，您可以将“my_image”的框架设置为 CGRectZero 以隐藏它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T02:54:33.113

也许你忘了连接 IBOutlet ？你在使用 .xib 吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:14:16.300

在 my_image.hidden = YES 的行做一个断点；它是否进入断点？如果它进入 ，请确保 my_image 不为零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-30T07:05:13.903

```
UIImageView *imageview = [[UIImageView alloc]init];
[imageview setHidden:YES]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-14T12:57:19.937

塞特为我工作：

```
UIImageView * bb = (UIImageView*)[self.view viewWithTag:1];
[bb setHidden:YES]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-28T19:50:00.693

我在隐藏图像视图时遇到了同样的问题，但是如果您删除 @property 语句，则隐藏的行为应如此。在 viewdidLoad 中设置隐藏然后 IBaction - 工作正常

。H

```
 IBOutlet UIImageView *crackedimage1; 
```

.m

```
 -(void)viewdidLoad
   crackedimage1.hidden = YES;

 - (IBAction)crackaction1:(id)sender {

   crackedimage1.hidden   = NO;}; 
```

# javascript - 精益模型ajax调用

> ID：14189219
> 
> 赞同：0
> 
> 时间：2013-01-07T02:52:37.840
> 
> 标签：javascript, jquery, ajax

嗨，我如何使用leanModel 对话框呈现不同的表单？目前，这就是精益模型的工作方式：

```
<a id="go" rel="privateMsg" name="signup" href="#signup">With Close Button</a>

<div id="signup" style="display: none; position: relative; opacity: 1; z-index: 11000; left: 50%; margin-left: -202px; top: 200px;">
            <div id="signup-ct">
                <div id="signup-header">
                    <h2>Create a new account</h2>
                    <p>It's simple, and free.</p>
                    <a class="modal_close" href="#"></a>
                </div>

                <form action="">

                  <div class="txt-fld">
                    <label for="">Username</label>
                    <input id="" class="" name="" type="text">

                  </div>
                  <div class="txt-fld">
                    <label for="">Email address</label>
                    <input id="" name="" type="text">
                  </div>
                  <div class="txt-fld">
                    <label for="">Password</label>
                    <input id="" name="" type="text">

                  </div>
                  <div class="btn-fld">
                    <a href="#" class="close">Cancel</a>
                  <button type="submit">Sign Up</button>
                  </div>

                 </form>
            </div>
        </div>

$(function() {
    $('a[rel*=privateMsg]').leanModal({ top : 100, closeButton: ".modal_close,.close" });
}); 
```

精益模型 js 如下：

```
(function($){
    $.fn.extend({
        leanModal:function(options){
            var defaults={top:100,overlay:0.5,closeButton:null};
            var overlay=$("<div id='lean_overlay'></div>");
            $("body").append(overlay);
            options=$.extend(defaults,options);
            return this.each(function(){
                var o=options;
                $(this).click(function(e){
                    var modal_id=$(this).attr("href");
                    $("#lean_overlay").click(function(){
                        close_modal(modal_id)
                    });
                    $(o.closeButton).click(function(){
                        close_modal(modal_id);
                    });
                    var modal_height=$(modal_id).outerHeight();
                    var modal_width=$(modal_id).outerWidth();

                    $("#lean_overlay").css({"display":"block",opacity:0});
                    $("#lean_overlay").fadeTo(200,o.overlay);
                    $(modal_id).css({"display":"block","position":"fixed","opacity":0,"z-index":11000,"left":50+"%","margin-left":-(modal_width/2)+"px","top":"100px"});
                    $(modal_id).fadeTo(200,1);e.preventDefault()
                });
            });
            function close_modal(modal_id){
                $("#lean_overlay").fadeOut(200);$(modal_id).css({"display":"none"})
            }
        }
    });
})(jQuery); 
```

我如何改进此代码以便我可以为任何表单打开一个对话框？另外，如果我想从 ajax 加载注册 div，我该怎么做？谢谢

# php - 如何安全地将我的 WordPress 自定义最近帖子小部件标题链接到小部件中选择的类别？

> ID：14189223
> 
> 赞同：0
> 
> 时间：2013-01-07T02:52:54.040
> 
> 标签：php, wordpress, plugins

我创建了一个小部件，显示某个类别的最新帖子。我想将小部件标题链接到选项中选择的类别存档。我`wp_dropdown_categories`用来设置选项。这将返回在设置查询时非常有用的类别 ID。但是，小部件标题出现在循环之前，因此使用 ID 不会考虑永久链接，更像是硬编码`<a href="/cat-ID`的东西。我想知道是否有更好的方法。

我当前的代码： http: [//pastebin.com/Mj8C1mdW](http://pastebin.com/Mj8C1mdW)

**这是解决方案**

```
$cat_id= $instance['cat'];
$cat_link = get_category_link( $cat_id );
$cat_link_title = '<a href="'.$cat_link.'">'.$title.'</a>';       
if ( $title ) echo $before_title . $cat_link_title . $after_title;` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:05:57.357

由于您要保存类别 ID，因此可以使用`get_category_link()`

```
$category_link = get_category_link( $category_id );
if( $category_link )
    $widget_title = '<a href="' . $category_link . '">' . $widget_title . '</a>'; 
```

# c - 将数组中的两个相邻字符存储到 int 中

> ID：14189224
> 
> 赞同：1
> 
> 时间：2013-01-07T02:52:58.500
> 
> 标签：c, pointers

我有这个字符数组

```
char array[] = {1,2,3};     //FL, FH, Size 
```

我正在尝试使用指针访问它，以便将 FLFH 值放在一起，存储在一个整数变量中。

我做了这个

```
int val =0;
val = *(int*)array;
printf("value of p is %d\n",val); 
```

我期望结果是 12，但它是一些 8 位数字，我认为它可能是值的地址或其他东西。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:02:30.290

它永远不会给你十二个。

您正在获取两个单字节值并将它们视为包含一个单字节实体。当你把它们放在一起看时，你正在重新解释它们的价值。整数`1`看起来像这样，作为 bits: `00000001`，`2`像这样: `00000010`。编译器知道它们有多大，因此允许您作为个体访问它们，但它们在您的数组中按顺序排列，在内存中彼此相邻。

将两个字节一起检查，就好像它们是一个`int`，你有：`0000000100000010`，其值不是 12；是513。

为了您的进一步阅读，您正在做的是一种[“类型双关语”](http://en.wikipedia.org/wiki/Type_punning)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T03:01:08.753

对于可读性和可移植性而言，这是一个坏主意。如果这就是您的意思，请使用`array[0] * 10 + array[1]`，并相信窥视孔优化器可以加快速度。如果您必须通过指针访问该值，请使用`char`指针和 write `p[0] * 10 + p[1]`，这易于理解、完全合法且可移植。

您的代码可能无法运行的原因有很多，这强烈表明您正在尝试做的事情是愚蠢的，或者至少您是在头脑中。

第一个是字节的范围是从 0 到 255，而不是从 0 到 9，所以如果你确实使用了这种技术，并且它*有效*，你将得到 1*256+2 =258，而不是 1*10+2 = 12\. 你永远不会得到 12\. 计算机不是这样工作的。这就是为什么你必须调用一个函数，比如`atoi()`将字符串转换`"12"`为数字 12，然后才能对其进行算术运算。

如果你有四个字节整数，那也是你得到一些大数字的原因：你认为你得到了 1*256+2，但实际上你得到了 ((1*256+2)*256+3 )*256+？？？。另外，正如克里斯在评论中所说，在这种情况下，无论如何你的数组太小了，从哪里来？？？在前面的公式中。

您可以尝试使用 a`short`而不是 an `int`，看看是否效果更好；a`short`可能是一个 2 字节整数。但这并不能保证，因此它仍然不能移植到`short`s 长度超过两个字节的系统。更好的做法是找出系统上与两字节整数相对应的实际类型（可能`short`是 .`INT2``INT2``int`

另一个潜在的问题是您的系统可能使用 little-endian 字节顺序，在这种情况下，您的数组中的字节顺序错误，无法表示您想要的两字节机器整数，您的技巧永远不会奏效。即使可以在您的机器上运行，如果您必须在 little-endian 机器上运行代码，它也会中断。（您在此线程中其他地方的评论表明这正是正在发生的事情。）

因此，只需简单的方法即可。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T03:11:38.943

您没有得到预期的结果，因为字节布局在 8 位边界上，因此相邻的二进制字节值按**256 [10]而**不是**10 [10]缩放。**

此外，如果您转换某物的类型并取消引用它，编译器将编译它，但从技术上讲，您的程序是不合格的。^*

一个问题是对齐。如果您使用开放代码更改类型，它可能不会从正确的边界开始，并且可能不够大。您可以通过工会解决所有这些问题。它仍然是不一致的，并且没有指定结果，但实际上它是可靠的，甚至有点可移植，如果您不介意根据字节顺序和 int 大小的不同结果。

```
union a {
  char  c[3];
  int   i;
  short s;
} a; 
```

这也可能是一个很好的应用程序`<stdint.h>`，但这是另一个问题的主题。

* * *

^(^*那么，你可能想知道为什么存在强制转换......这是因为（A）尽管被标准禁止，类型双关语被广泛用于现有的 C 程序，特别是在操作软件中，并且（B）大多数情况下都是一致的用途定义通用接口但总是（或者，*通常是*）在取消引用之前将事物转换回原始类型。)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-07T02:56:33.477

也许尝试：-

```
char array[] = {1,2,3};     //FL, FH, Size
int val =0;
val = *(short*)array;
printf("value of p is %X\n",val); 
```

这是假设您正在尝试将您的 char 数组重新解释为 int。尽管不同的平台，您可能会得到与预期不同的结果。

# c# - 解析并添加多个冗余树节点

> ID：14189225
> 
> 赞同：0
> 
> 时间：2013-01-07T02:53:21.527
> 
> 标签：c#, .net

我有一棵树，其中节点包含对两个父节点的引用；由于事物的工作方式，它们可以在某些时候指向相同的节点。

```
Example:

Parent1: Node234234 -> Node233645 -> Node2323429 -> Node2939230
Parent2: Node112938 -> Node2323429 -> Node2939230 
```

如果我只是试图解析每个节点一次，而且只解析一次，无论它可能出现多少次，你会怎么做？

我考虑过使用 List.Contains，如果它是真的就停止，但它看起来有点乱；我考虑过使用 HashTable（我只是让添加节点），但我认为这在较大的树上可能效率很低。您认为什么是高效、快速的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:16:03.603

** 编辑：** *再次阅读您的问题后，我有充分的理由相信我误解了它。在我看来，您实际上是在解析文本输入并从中创建一棵树。如果是这样，请忽略选项号。2.*

我现在可以想到两种可行的方法：
**1.**使用布隆*过滤器*。如果您的树很大，那么在空间方面绝对值得，如果节点不重复太频繁，并且您可以容忍某些节点根本不被解析，它可能会满足您的需求。*某些节点可能不会被解析，因为此结构可能会为属于*运算符返回误报（从这个意义上说，它是一种概率数据结构）。查看其在[维基百科](http://en.wikipedia.org/wiki/Bloom_filter)上的页面以获取更多信息。

**2.**创建一个包含当前节点类的类的树，并添加一个布尔值，一旦访问该节点就设置为 true。例如：

```
class NodeAndVisitationInfo {
    public bool Visited;
    public NodeType Node;

    public NodeAndVisitationInfo() {
        Visited = false;
    }
} 
```

如果您需要多次执行此操作，则第二种解决方案可能并不理想，因为在这种情况下，您应该在再次运行访问算法之前为两棵树中的所有节点设置为`Visited`。`false`另外，请注意这个算法完全*不是线程安全*的。

* * *

最重要的是，不要`List.Contains`对每个新解析的节点进行简单的调用，对于最坏的情况，这将是 O(n^2)。如果您将节点存储在搜索结构中，请选择一个摊销插入和搜索复杂性都更好的结构。有序列表甚至哈希集可能会更好。

# java - CSV 的正则表达式，解释发生了什么。

> ID：14189228
> 
> 赞同：2
> 
> 时间：2013-01-07T02:54:28.967
> 
> 标签：java, regex

好的，所以我已经查看了有关如何使用内置功能分解包含引号的 csv 字符串的各种答案。我已经浏览并测试了各种答案，我发现以下字符串有效：

```
"\"([^\"]*)\"" + //Zero or more not-quoted characters inside of quotes
"|" + //or
"(?<=,|^)" + 
"([^,]*)" + //all characters not delimiter
"(?=,|$)"  //delimiter or end of string 
```

我正在尝试根据自己的知识了解正在发生的事情，尤其是上面未注释的部分。任何人都可以提供解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:20:06.420

`(?<=,|^)`并且`(?=,|$)`是正则表达式断言，用于实现所谓的（分别）正向后视和前瞻。

您的正则表达式（为清楚起见删除了 java 字符串构建引号和连接符）匹配：

```
"([^"]*)"  // 0+ not-quote characters inside of quotes (captured)
|          // OR 
      ([^,]*)          // any 0+ character which is not , (captured) only if
             (?<=,|^)  // preceded by , or at start of line AND
             (?=,|$)   // followed by , or at end of line 
```

这些结构被称为零宽度，因为它们不消耗测试字符串中的字符。断言的否定版本也存在，使用`!`而不是`=`，因此， `(?<!,|^)`并且`(?!,|$)`仅当表达式没有在断言之前（lookbehind）或之后（lookahead）时才表示匹配。

更多信息[在这里](http://www.regular-expressions.info/lookaround.html)。

# google-app-engine - 如何在 GAE 控制面板上查看静态文件目录？

> ID：14189230
> 
> 赞同：1
> 
> 时间：2013-01-07T02:54:45.580
> 
> 标签：google-app-engine

如何在 GAE 控制面板或浏览器中以其他方式查看静态文件目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:10:43.703

GAE 上没有这样的功能。

您将需要查看项目的源代码。如果这不可用，您可以尝试[下载项目源代码](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Downloading_Source_Code)。请注意，这可以被禁用。

# php - HTML 显示表格中数组的数据

> ID：14189232
> 
> 赞同：1
> 
> 时间：2013-01-07T02:55:17.787
> 
> 标签：php, javascript, html, web

我对 HTML 和任何网络开发都非常陌生，如果这个问题非常简单，我很抱歉。到目前为止，我从用户那里获取了一些输入，对它们进行了一些计算（使用我在 head 标签中声明的 javascript 函数），然后给出了答案。在进行计算时，我将值存储在数组中，我希望用户能够看到这些数组中的内容。我想在表格中显示这些值。但是，我不知道如何将数组的值放在表格的显示中。我知道这就是表格的工作方式：

```
<table border="1">
<tr>
<td>row 1, cell 1</td>
<td>row 1, cell 2</td>
</tr>
<tr>
<td>row 2, cell 1</td>
<td>row 2, cell 2</td>
</tr>
</table> 
```

但我想将我的值放在“第 1 行，第 1 行”等位置。据我了解，表格标签必须用于 HTML 代码的正文部分（如果我错了，请告诉我！ ) 所以我不知道该怎么做。在我的函数中计算我的值时，我不能只创建表，对吗？如何访问我在函数中创建和存储值的数组？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:02:48.423

实际上，您甚至可以使用函数创建表，但为了简化，让我们使用您已经存在的表。

工作 JSFIDDLE 演示：http: [//jsfiddle.net/KEjpe/](http://jsfiddle.net/KEjpe/)

JS：

```
var myjsonobject = { 
                    0: { 0: "row 1 cell 1", 1 : "row 1 cell 2"},
                    1: { 0: "row 2 cell 1", 1 : "row 2 cell 2"} 
                   }

var table = document.getElementsByTagName("table")[0];

var trs = table.getElementsByTagName("tr");

for(i=0;i<trs.length;i++)
{
   var tds = trs[i].getElementsByTagName("td");

   for(j=0;j<tds.length;j++)
   {
      tds[j].innerHTML = myjsonobject[i][j]
   }
} 
```

HTML：

```
<table border="1">
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:09:37.617

首先，您需要一个函数来将 tr 和 td 附加到您的表中。

```
function addContentTo(table, myArr) {
    var frag = document.createDocumentFragment();
    var tr = document.createElement('tr');

    for (var col in myArr) {
        var td = document.createElement('td');
        td.innetHTML = col;
        tr.appendChild(td);
    }

    frag.appendChild(tr);
    table.appendChild(frag);
} 
```

现在你可以朗姆你的行数组来填充你的表：

```
var table = document.getElementById('mytable');
for(var line in myArray) {
    addContentTo(table, line);
} 
```

我假设你的数组是这样的：

```
myArray = [
    ['row 1, cell 1', 'row 1, cell 2'],
    ['row 2, cell 1', 'row 2, cell 2']
]; 
```

然后您的表格将被动态构建，但在我的代码案例中，您的表格必须具有 id 'mytable'：

```
<table id="mytable"></table> 
```

这就是所有人。

# c# - 如何窃取另一个应用程序的视频（通过 hwnd）并在单独的应用程序中显示

> ID：14189234
> 
> 赞同：2
> 
> 时间：2013-01-07T02:55:48.357
> 
> 标签：c#, video, video-capture, hwnd

我想把 Skype 的视频插入到我自己的应用程序中。我正在使用 skype4com 来控制呼叫，但我找不到任何参考或示例来建议一个工具来获取其视频流以将其嵌入到您的应用程序中。我尝试加入 SkypeKit 计划，但一个月后我仍在等待他们的任何消息，而且我听说您经常只是等待等待他们的消息。

我想知道是否还有其他事情可以做，就像找到 Skype 正在显示的视频的 hwnd 并将其用于面板/表单/等一样简单。我在我的应用程序中拥有的，然后隐藏 Skype 窗口的其余部分。我尝试在谷歌上搜索一般主题，但也许我不知道该概念的正确描述使我无法找到任何东西。

粗略地说，我知道我可以做一些事情，比如使用窗口句柄来获取框架的位图并在我自己的应用程序中显示它，隐藏 Skype，但这可能会产生很多开销。

任何人都知道如何做到这一点或这代表什么概念，所以我可以自己找到它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:18:54.537

这不是问题的最终或完整答案，但它包含对我提出的问题的部分答案......

我最终尝试了各种事情并取得了不同程度的成功。

解决此类问题时的第一个问题显然是确定您尝试重新使用的视频是否通过 DirectX 呈现。

如果视频不是 DirectX 渲染的，那么您确实可以从窗口捕获视频并在任何您喜欢的地方实时播放。网络上有各种示例，您应该如何从窗口中捕获位图。诀窍是窗口可以通过不透明度不可见但不能最小化（最小化它不会更新）！您只需将 hwnd 用于包含视频的 Window 并在循环中通过各种方法获取这些位图的副本，然后在其他地方根据需要显示它们。根据您计算机的速度和视频的大小，此方法可以正常工作，我没有任何问题。

如果您尝试劫持的视频是通过 DirectX 呈现的，那么您大部分但并非完全不走运。因为 DirectX 视频是由显卡（而不是操作系统）直接渲染到操作系统表面上的，所以您必须使用完全不同的方法将视频作为帧抓取并在其他地方显示。有很多关于如何进行 DirectX 屏幕捕获的示例。但是，最大的问题是，如果 DirectX 窗口被隐藏、重叠或不透明度设置为零，您将无法捕获任何内容！我什至尝试使用虚拟桌面管理器软件来查看是否可以欺骗系统在虚拟窗口中播放 DirectX 视频，然后捕获它以在我想要的地方播放，但当然它比我更聪明，我得到了一个空白图片。所以，底线似乎是，除非您做一些非常极端的事情，例如编写虚拟显卡驱动程序，否则您将不走运。（有多种有趣的方法涉及编写 DirectX 代理，这些代理可以在传输到显卡的途中捕获视频/静止图像，但我仍然认为您可能需要一个虚拟图形驱动程序来说服它显示表面是可见的，因此值得渲染。）

# javascript - 获取表单结果页面

> ID：14189241
> 
> 赞同：0
> 
> 时间：2013-01-07T02:56:43.563
> 
> 标签：javascript, html, xml, forms, get

我正在寻找一种方法来将 GET Form 结果页面定位到 div。到目前为止，大多数解决方案都告诉我改用 Iframe，但我的目的是对结果页面进行一些更改，并且使用 Iframe 似乎会激活跨域脚本规则，从而阻止我获取页面内容。

结果页面通常是原始 XML。

```
<html>
<head>
<link rel="stylesheet" href="css/smoothness/jquery-ui-1.9.2.custom.css" >
<script src="js/jquery-1.8.3.js"></script>
<script src="js/jquery-ui-1.9.2.custom.js"></script>
<script src="js/jquery.xslt.js"></script>
<script type="text/javascript">

$(function() {
    var xmlContent = $("#CFrame").contents().find("*").text();

    $('#SResult').xslt({xml:xmlContent, xslUrl:'stylesheet/styleSheet.xsl'});
});

// prepare the form when the DOM is ready 
function submitForm() { 
    // bind form using ajaxForm 
    $('#searchForm').ajaxForm({ 
        // dataType identifies the expected content type of the server response 
        dataType:  'xml', 
        // success identifies the function to invoke when the server response 
        // has been received 
        success:   processXml
    });
    return false; 
}

function processXml(responseXML) { 
    // 'responseXML' is the XML document returned by the server; we use 
    // jQuery to extract the content of the message node from the XML doc 
    var message = $(responseXML).text(); 
    $("#SResult").text(message); 
}
</head>
<body>
   <form id="searchForm" method="GET" action="http://111.11.111.11:1111/search" onSubmit="submitForm()">
     <!--.... Some input go here-->
    <input type="submit" value="Search" />
<div id="SResult">
</div>
<iframe id="CFrame" name="ContentFrame" frameborder="1" height="1000px" width="1000px" scrolling="no"></iframe>
</body>
<script>
loadUI();
</script>
</html> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:15:09.580

您是否使用 get 方法提交表单，然后响应将显示在 div 标签上？

你可以使用 Jquery ajax。

例子

```
$.ajax({
   type: "POST",
   url: "url here",
   data: {id: someIdTobePass},
   success: function(response){
      //do the jquery manipulation
      $("#myDivID").html("the response is " + response);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:54:26.823

您可以在 jQuery 中使用**$.get辅助方法。**

**jQuery API**

> jQuery.get( url [, data ] [, success(data, textStatus, jqXHR) ] [, dataType ] );

**代码示例**

```
$.get("test.php", { name: "John", time: "2pm" },function(data){
   $("#mydiv").html(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T05:35:43.170

除非您使用 jsonp（服务器代理）或者您可以控制其他域，否则您无法向其他域发出 get 或 post 请求。如果您可以控制要进行 ajax 调用的域，则可以将`Access-Control-Allow-Origin`响应标头添加到您尝试请求的页面，这将允许您的域访问。

由于您正在执行返回 XML 的 GET 请求，因此我建议使用这个使用 YQL 作为代理的[jQuery 插件。](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)此外，您可以使用[本指南](http://ajaxian.com/archives/using-yql-as-a-proxy-for-cross-domain-ajax)来查看它是如何工作的，或者在没有插件的情况下进行操作。

解决了同样问题的 stackoverflow 问题：[Cross-Domain Requests with jQuery](https://stackoverflow.com/questions/7638773/cross-domain-requests-with-jquery)

# asp.net - 如何在 Visual Studio 2012 的命令行上将 ASP.NET 网站或 Web 应用程序发布到文件系统

> ID：14189246
> 
> 赞同：1
> 
> 时间：2013-01-07T02:57:46.547
> 
> 标签：asp.net, visual-studio, msbuild, visual-studio-2012

根据this [SO article](https://stackoverflow.com/questions/14175910/deploying-to-ftp-from-command-line-using-msbuild-on-vs2012-not-working-no-error/14178916#14178916)的答案，VS2012不再支持命令行发布到FTP或文件系统。尽管如此，这个要求仍然适用于我的项目。我想其他人和项目也有同样的要求。

**有什么好方法可以做到这一点？**

我知道至少一个答案是使用[Web Deploy](http://www.iis.net/downloads/microsoft/web-deploy)。这对我不起作用。我想它对其他人也不起作用。

我的项目已经在命令行上使用了 MSBuild。添加某种称为“CustomPublish”或类似的构建后事件或额外构建配置是可以的。我们可以在构建后事件的某处 xcopy 结果。就像是：`msbuild /p:Configuration=CustomPublish`

问题是如何让 Visual Studio 发出最终结果，而无需像 .pdb 文件之类的任何“附加”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T14:05:10.170

要让 MSBuild 不发出调试符号，请通过命令行传递以下属性：

MSBuild.exe solution.sln /p:DebugSymbols=false /p:DebugType=None

您还可以将这些值放入您提到的新配置中：

```
<DebugSymbols>false</DebugSymbols>
<DebugType>None</DebugType> 
```

我也会看看这个 MSDN 链接：[Visual Studio 和 ASP.NET 的 Web 部署概述](http://msdn.microsoft.com/en-us/library/dd394698.aspx)

# android - com.android.camera.action.CROP 替代方案？

> ID：14189247
> 
> 赞同：6
> 
> 时间：2013-01-07T02:57:54.573
> 
> 标签：android, android-camera

它似乎`com.android.camera.action.CROP`不可靠，因为它是一个内部 API，并非在所有设备上都可用。但是，我发现这个库非常实用。它在我的 Galaxy Nexus 上运行良好。

我真的应该考虑实施自己的解决方案吗？我使用 是否冒了太大的风险`com.android.camera.action.CROP`？此外，在某些设备中，它会打开稍后崩溃的 google + 裁剪照片。

最后，有没有我可以使用的开放库来完成同样的事情，并且可以安全地在任何安卓设备上使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T03:02:13.550

我讨厌回答我自己的问题，但这里是：

[https://github.com/lvillani/android-cropimage](https://github.com/lvillani/android-cropimage)

这是库的源代码。只需将其包含在您的项目中，您就不必再担心设备没有它了。

# python - time.sleep() 期间的 PyAudio 行为

> ID：14189253
> 
> 赞同：0
> 
> 时间：2013-01-07T02:58:44.643
> 
> 标签：python, python-2.7, pyaudio

我试图理解我在 PyAudio 中看到的东西。我正在尝试采集 200 毫秒的音频样本，等待几秒钟，然后再采集三个 200 毫秒的音频样本。考虑这段代码：

```
import pyaudio
import time

p = pyaudio.PyAudio()
chunk = 1024
FORMAT = pyaudio.paInt16
CHANNELS = 1 #chan
RATE = 11025
stream = p.open(format = FORMAT,
            channels = CHANNELS,
            rate = RATE,
            input = True,
            output = False,
            frames_per_buffer = chunk,
            input_device_index = 0,
            output_device_index = 0)

def record(seconds):
all = []
for i in range(0, int(RATE / chunk * seconds)):
    data = stream.read(chunk)

    all.append(data)
data = ''.join(all)
return data

#record 200ms of sound
print "pre-record 1 " + str(time.time())
data = record(.2)
print "post-record 1 " + str(time.time())

#sleep for one second
#time.sleep(1)

#record 200ms of sound
print "pre-record 2 " + str(time.time())
data = record(.2)
print "post-record 2 " + str(time.time())

print "pre-record 3 " + str(time.time())
data = record(.2)
print "post-record 3 " + str(time.time())

print "pre-record 4 " + str(time.time())
data = record(.2)
print "post-record 4 " + str(time.time()) 
```

如果我“按原样”运行（即`time.sleep()`注释掉），我会得到这个，这是有道理的：

```
pre-record 1 1357526364.46
post-record 1 1357526364.67
pre-record 2 1357526364.67
post-record 2 1357526364.86
pre-record 3 1357526364.86
post-record 3 1357526365.03
pre-record 4 1357526365.03
post-record 4 1357526365.22 
```

如果我然后取消注释 time.sleep() 行以在第一次和第二次录制之间添加一秒钟的延迟，我会得到：

```
pre-record 1 1357525897.09
post-record 1 1357525897.28
pre-record 2 1357525898.28
post-record 2 1357525898.28
pre-record 3 1357525898.28
post-record 3 1357525898.28
pre-record 4 1357525898.28
post-record 4 1357525898.47 
```

请注意，虽然第一个和第二个记录之间的时间戳有 1 秒的延迟，但记录 2 和 3 之间根本没有延迟，它们似乎是在零时间内拍摄的（尽管它们实际上包含 200 毫秒数据）。录制 4 似乎需要 200 毫秒才能完成，但与录制 2 和 3 同时开始。

如果我替换`time.sleep(1)`为`record(1)`（而不是保存/使用 1 秒记录中的数据），则程序的行为与我预期的一样：

```
pre-record 1 1357526802.57
post-record 1 1357526802.77
pre-record 2 1357526803.69
post-record 2 1357526803.88
pre-record 3 1357526803.88
post-record 3 1357526804.06
pre-record 4 1357526804.06
post-record 4 1357526804.25 
```

因此，即使在 期间`time.sleep(1)`，某处的缓冲区仍在被馈送音频，并且当我在睡眠后调用记录函数时，它会从该缓冲区中获取音频，这不是我想要的音频。我需要睡眠后的音频，而不是在睡眠期间。有人可以帮助我了解 PyAudio 与那里的任何缓冲区的交互，有没有办法更好地知道我的音频是在什么时候被实际捕获的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:42:39.273

音频设备将每秒不断地向缓冲区添加 RATE 样本，并且您的代码会从此缓冲区中读取。

因此，如果不从缓冲区读取，您将无法 sleep(1)。您可以编写一些代码来跳过示例：

```
def skip(seconds):
    samples = int(seconds * RATE)
    count = 0
    while count < samples:
        stream.read(chunk)
        count += chunk
        time.sleep(0.01) 
```

# ruby-on-rails-3 - PGError：错误：关系列不存在

> ID：14189254
> 
> 赞同：27
> 
> 时间：2013-01-07T02:58:45.473
> 
> 标签：ruby-on-rails-3, postgresql, heroku, migration

我正在尝试将列“isGroup”的值更改为值“public”。

我创建了一个迁移：

```
Post.connection.execute("update Posts set isgroup='public'") 
```

但是，我收到以下错误：

```
PGError: ERROR:  column "isgroup" of relation "posts" does not exist 
```

不幸的是，我在 connection.execute 迁移的同时运行了创建迁移的列。但是，Heroku 上确实存在“isGroup”列，所以奇怪的是该列没有显示为出现。

有什么建议吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-07T03:18:24.150

如果您确定该列`isGroup`存在，那么您应该像这样引用它：

```
UPDATE posts SET "isGroup" = 'public' 
```

请注意，默认情况下，PostgreSQL 会将所有未加引号的命名为小写。

为了避免这种混淆和引用的必要性，您可能需要重命名`isGroup`为`isgroup`using `ALTER TABLE ... RENAME COLUMN ...`。

# c# - 为什么我应该使用等待？

> ID：14189256
> 
> 赞同：0
> 
> 时间：2013-01-07T02:58:57.563
> 
> 标签：c#, multithreading, asynchronous, async-await, c#-5.0

我是异步/等待的新手。但我创建了 POC，但我仍然感到困惑。

方法的结果

```
public async void WriteLineFunc(string str)
    {
        await Task.Factory.StartNew(() => WaitFor2Secs());
        //WaitFor2Secs();
        Console.WriteLine(str);
    } 
```

和

```
public async void WriteLineFunc(string str)
    {
        //await Task.Factory.StartNew(() => WaitFor2Secs());
        WaitFor2Secs();
        Console.WriteLine(str);
    } 
```

是一样的。将方法作为等待有什么意义？只是为了在其他线程上运行一个函数并等待它的完成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T04:12:27.420

当一个方法使用`await`时，它可以在完成之前返回给它的调用者。

考虑这个例子：

```
public async Task WriteLineFuncAsync(string str)
{
  await Task.Delay(2000);
  Console.WriteLine(str);
}

public void WriteLineFunc(string str)
{
  Thread.Sleep(2000);
  Console.WriteLine(str);
} 
```

`WriteLineFunc`将同步阻塞正在运行的线程 2 秒，然后写出字符串。将立即向其调用者`WriteLineFuncAsync`返回一个不完整的；`Task`两秒钟后，它会写出字符串，然后完成`Task`.

对于客户端应用程序，主要好处是*响应能力*（GUI 线程不被阻塞）。对于服务器端应用程序，主要好处是*可伸缩性*（您可以拥有比线程更多的响应）。

# javascript - 在文本框中访问用户的文本

> ID：14189257
> 
> 赞同：0
> 
> 时间：2013-01-07T02:59:00.923
> 
> 标签：javascript, html, textbox

我设置了一个带有文本字段、按钮和空段落的 HTML 网页。理想情况下，当用户按下按钮时，他们在文本字段中输入的文本会被添加到页面上的空白段落中。我知道可以使用以下 javascript 行将文本添加到段落中：

```
document.getElementById("paragraph").innerHTML="text"; 
```

但是如何访问用户在文本字段中键入的文本，以便我可以在 javascript 行中使用该文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:02:38.240

```
document.getElementById('id.of.input.here').value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:03:13.643

试试这个代码：

```
<input type='text' id='textBox' />

<script>
    document.getElementById("textBox").value="text";
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T03:09:38.710

这应该这样做：

```
document.getElementById("paragraph").innerHTML = document.getElementById("textBox").value; 
```

`textBox`文本字段的位置在哪里`id`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T03:11:47.570

```
<input type = "button" value = "Click" onclick="document.getElementById('paragraphId').value+=document.getElementById('textfieldId').value;"> 
```

# ruby - Facebook OpenGraph 提要上的重复“标题”

> ID：14189261
> 
> 赞同：0
> 
> 时间：2013-01-07T02:59:30.457
> 
> 标签：ruby, facebook, facebook-opengraph, rest-client

以下“错误”在过去几个月左右开始发生。直到那时，以下 Ruby 代码（使用了不起的 rest-client gem）：

```
resp = RestClient.post("https://graph.facebook.com/#{userid}/feed",
                :access_token => fb_token,
                :picture      => picture,
                :message      => message,
                :caption      => caption) 
```

一直工作没有问题。然而，现在，像这样的调用正在用户的墙上或 PC 浏览器中的新闻源上生成重复的标题文本（奇怪的是，我在移动设备或平板电脑浏览器上没有看到它）。例如，如果调用：

```
resp = RestClient.post("https://graph.facebook.com/#{userid}/feed",
                :access_token => fb_token,
                :picture      => picture,
                :message      => "So-and-so just scored 1000 points!",
                :caption      => "Come join them!") 
```

在墙上你会看到信息，然后是一个图片框，然后

快来加入他们吧！快来加入他们吧！

显示在标题中，人们只会期望“加入他们！” 显示为标题。

有其他人对 Facebook 的 OpenGraph 提要 API 有这样的问题吗？我可以在消息中包含链接和名称，并且重复的标题消失了，但我认为它在用户的墙上显得有点“垃圾邮件”。

# java - 使用将文本拟合到 JTextField

> ID：14189262
> 
> 赞同：3
> 
> 时间：2013-01-07T02:59:36.867
> 
> 标签：java, swing, jtextfield

我有一个`JTextField textField`，我有一个任意的`String string`

我希望文本字段显示字符串的结尾，但切断它不适合的内容并使用“...”代替它。例如，如果字符串是，`"Hello How Are You Doing"`那么文本字段可能看起来像

```
...re You Doing 
```

给定`textfield`和`string`，我该怎么做？

更新：我想这样做的原因是因为它是一个文件选择器，所以我想优先显示文件的结尾。例如，如果用户选择保存在 /Users/Name/Documents/Folder1/Folder2/Folder3/file.txt 那么我想显示结尾，其余不适合的应该替换为“...”

这是完成的地方：

```
JFileChooser chooser = new JFileChooser();
int response = chooser.showSaveDialog(this);
if(response == JFileChooser.APPROVE_OPTION) {
    File file = chooser.getSelectedFile();
    String string = file.getAbsolutePath();

    fileTextField.setText(/* here's where the code would go */);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:55:58.530

> ..它是一个文件选择器，所以我想优先显示文件的结尾。

我建议将其作为替代方案，或者将工具提示（路径）放在文件名之后。

![文件列表名称](../Images/748222a87d9e12d16503dee39e1b8ab4.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.filechooser.FileSystemView;
import java.io.File;

class FileListName {

    final class FileListCellRenderer extends DefaultListCellRenderer {

        private FileSystemView fsv = FileSystemView.getFileSystemView();

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            JLabel l = (JLabel) c;
            File f = (File) value;
            l.setText(f.getName());
            l.setIcon(fsv.getSystemIcon(f));
            l.setToolTipText(f.getAbsolutePath());

            return l;
        }
    }

    public FileListName() {
        JFileChooser jfc = new JFileChooser();
        jfc.showOpenDialog(null);
        if (jfc.getSelectedFile() != null) {
            File[] f = {jfc.getSelectedFile()};
            JList list = new JList(f);
            list.setVisibleRowCount(1);
            list.setCellRenderer(new FileListCellRenderer());
            JOptionPane.showMessageDialog(null, list);
        }
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                try {
                    // Provides better icons from the FSV.
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception useDefault) {
                }
                new FileListName();
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T05:29:19.443

`String#length`您将面临的问题是与像素宽度不匹配的事实。您需要考虑当前字体、组件宽度、图标、图标间距、插图、屏幕 DPI ...... :P

![在此处输入图像描述](../Images/eacf2b103ea40de5e176a7f598b3d99f.png)

```
public class TrimPath {

    public static void main(String[] args) {
        new TrimPath();
    }

    public TrimPath() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());

                File path = new File("C:\\Users\\Default\\AppData\\Local\\Microsoft\\Windows\\GameExplorer");
                TrimmedLabel label = new TrimmedLabel(path.getPath());
                label.setIcon(FileSystemView.getFileSystemView().getSystemIcon(path));

                frame.add(label);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TrimmedLabel extends JLabel {

        private String masterText;

        public TrimmedLabel(String text) {
            super(text);
        }

        @Override
        public void setText(String text) {
            if (masterText == null ? text != null : !masterText.equals(text)) {
                masterText = text;
                super.setText(text);
            }
        }

        @Override
        public String getText() {

            String text = getMasterText();

            if (text != null && text.length() > 0) {
                int width = getWidth();
                Icon icon = getIcon();
                if (icon != null) {
                    width -= (icon.getIconWidth() + getIconTextGap());
                }
                FontMetrics fm = getFontMetrics(getFont());
                if (width > 0 && fm != null) {
                    int strWidth = fm.stringWidth(text);
                    if (strWidth > width) {
                        StringBuilder sb = new StringBuilder(text);
                        String prefix = "...";
                        while (fm.stringWidth(prefix + sb.toString()) > width) {
                            sb.delete(0, 1);
                        }
                        text = prefix + sb.toString();
                    }
                }
            }
            return text;
        }

        public String getMasterText() {
            return masterText;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:54:42.827

可以通过设置自己的文档来完成

（这是快速的'n'dirty所以测试很多次）

```
final int CHAR_DISPLAY_MAX = 10;
final int REPLACE_NUMBER = 3;
final JTextField tf = new JTextField(7);
Document doc = new PlainDocument(){
  public void insertString(int offs, String str, AttributeSet a) throws BadLocationException{
    if (this.getLength() + str.length() > CHAR_DISPLAY_MAX)
    {
      String oldText = tf.getText();
      String newText = oldText+str;
      tf.setText("..."+newText.substring(newText.length() - (CHAR_DISPLAY_MAX-REPLACE_NUMBER)));
      return;
    }
    super.insertString(offs, str, a);
  }
};
tf.setDocument(doc); 
```

# objective-c - 如何在 xCode 中为多目标设置其他 C 标志？

> ID：14189264
> 
> 赞同：1
> 
> 时间：2013-01-07T02:59:55.007
> 
> 标签：objective-c, xcode

健康）状况：

我在 xCode iOS 项目中有 3 个目标。每个目标有 3`Other C Flags`个子项，它们是：

其他 C 标志：

*   调试
*   开发商
*   发布

这 3 个项目有不同的设置。

**问题**：

我想为所有目标添加一些新设置
（包括开发人员、调试等所有项目）。例如`-DIPAD -DDEBUG`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:16:14.477

将设置添加到项目中，目标将继承它们。

# php - 如何在页面中仅显示 javascript 消息

> ID：14189266
> 
> 赞同：1
> 
> 时间：2013-01-07T03:00:28.843
> 
> 标签：php, javascript, html

如果关闭了javascript，我在下面有一段代码会显示一条消息：

`<noscript style='color: red'><img src="Images/warning-2.fw.png" alt="Javascript Warning" id="warningImage" name="warningSymbol"/> In order to use this application without any problems, you must have javascript enabled</noscript>`

现在消息显示在`noscript.php`页面中，所以我所做的是通过使用 include() 来制作`include(`noscript并将其外部化，`)`并且我已将其包含在我的所有 php 脚本中，如下所示：

文本.php（示例）

```
include('noscript')

//rest of page code 
```

现在正在发生的事情是，如果关闭了 javascript，它会显示 javascript 消息，但也会显示代码的重置，因此它会输出所有页面功能。

我想要做的是，如果关闭了 javascript，那么我希望它显示消息而不是下面的其余代码，我只希望出现 javascript 消息。只有当 javascript 重新打开时，用户才能看到显示页面功能的正确页面。

但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:03:03.793

最简单的方法是将页面上的所有代码包裹在一个隐藏的元素中，例如：

```
<body>
   <noscript>...</noscript>
   <div id="js">
      ...code here... 
```

`#js`会有`display: none`。

然后，您可以在页面底部放置一个简单的脚本：

```
document.getElementById('js').style.display = 'block'; 
```

您也可以使用 ajax 加载所有内容，但这有点过头了。即使需要 JS（例如 Twitter），网站仍然会显示所有内容是很常见的。

# javascript - Javascript 中的 HTML 行控制器

> ID：14189268
> 
> 赞同：3
> 
> 时间：2013-01-07T03:00:51.947
> 
> 标签：javascript, html, controls, purify

我有一个这样的经过处理的 HTML 文本：

```
Lorem ipsum <a href="#">dolor</a> sit amet
<div>Consectetur adipisicing elit, sed do </div> eiusmod tempor
incididunt ut labore et dolore magna aliqua. 
```

我需要将这些行转换为：

```
<p>Lorem ipsum <a href="#">dolor</a> sit amet</p>
<div>Consectetur adipisicing elit, sed do </div>
<p>eiusmod tempor</p>
<p>incididunt ut labore et dolore magna aliqua</p> 
```

如何转换？有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:56:49.703

这是我最大的努力：[在这里演示](http://ideone.com/Ixqy5g)。显然，您需要一个更复杂的解决方案。您可能想查看 wordpress 格式化 API 和[wpautop](http://core.trac.wordpress.org/browser/trunk/wp-includes/formatting.php)函数。

您将需要对正则表达式 ( ) 和函数进行一些*重大编辑*`"/^<\\/?div|^<\\/?ul|^<\\/?li|<\\/?p/"`，但至少这会让您开始！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T05:11:47.537

这有点长，请仔细阅读。我已经对重要部分进行了注释，以便对函数的流程有一个大致的了解。

```
function paragraphify(parent) {
    var i, str, p, workspace = document.createElement('div'), nodes = parent.childNodes;

    p = document.createElement('p');
    workspace.appendChild(p);

    // Filter nodes out of parent and into the workspace.
    while(nodes.length > 0) {
        // Get the first child node of the parent element.
        node = nodes[0];

        // Divs and paragraphs need not be processed; skip them.
        if(node.nodeName === 'P' || node.nodeName === 'DIV') {
            workspace.insertBefore(node, p);
            continue;
        }

        // Drop the node into the paragraph.
        p.appendChild(node);

        // Skip non-text nodes.
        if(node.nodeName !== '#text') { continue; }

        // We need to parse the text of the node for newlines.
        str = node.nodeValue;
        for(i = 0; i < str.length; i += 1) {
            if(str[i] === '\n') {
                // If text contains a newline ...

                if(i < (str.length - 1)) {
                    // ... and there's enough space to split it, then split it.
                    parent.insertBefore(document.createTextNode(str.substr(i+1)), nodes[0]);
                    node.nodeValue = str.substr(0, i+1);
                }

                // Create a new paragraph for holding elements, and add it to the workspace.
                p = document.createElement('p');
                workspace.appendChild(p);

                // Break here to return to the node-processing loop.
                // If the text was split on a newline, then that will be the next node to be processed.
                break;
            }
        }
    }

    // Pull the nodes back out of the workspace and into the parent element.
    nodes = workspace.children;
    while(nodes.length > 0) {
        node = nodes[0];

        // Skip empty paragraphs.
        if(node.nodeName === 'P' && node.textContent.replace(/\s/g, '').length === 0) {
            workspace.removeChild(node);
        }
        else {
            parent.appendChild(node);
        }
    }
} 
```

此功能将按照您在示例中指定的方式执行。**`Paragraphify`**遍历`parent`参数的子节点，跳过`<div>`和`<p>`元素，因为这些不需要格式化。它创建一个段落节点并一次一个地移动父节点，直到它在文本节点中遇到换行符，此时它适当地拆分文本节点。

一直处理到父元素为空。然后将工作区元素传输回父级。这样做是为了使处理更简单，因为操作您正在积极迭代的集合可能会很麻烦。

* * *

我应该警告说，这不会比父母的直系子女下降得更远，但是如果您有这种需要，请告诉我。基本上，这个函数不会执行这个翻译：

```
<span>Hello
world</span> 
```

... 进入 ...

```
<p><span>Hello</span></p>
<p><span>world</span></p> 
```

即使这样，这也应该是使用基本 Javascript 在 HTML 中进行行处理所需的基本功能的一个很好的例子。

[**jsFiddle 演示**](http://jsfiddle.net/bX4LV/)

# php - mysql/php更新语法，传递php变量

> ID：14189276
> 
> 赞同：0
> 
> 时间：2013-01-07T03:01:34.357
> 
> 标签：php, mysql

我有一个带有列的 mysql 表：名称，活动（活动是 int）。我想将图片上传到服务器，当它们已经在服务器上时，我想让它们处于活动状态，以便它们用作新徽标。（当 active = 1 时，图片是新徽标）我无法弄清楚为什么我的“$query”不起作用。其他一切正常。

```
$name = $_FILES["file"]["name"]; 
if (file_exists("/home/a1829256/public_html/admin/logo/" .$name)){          //if file already on the server
        echo "file is already on the server";
        echo ". Making it the new logo";
        $deselectlogo = "UPDATE newlogo SET active=0 WHERE active>0";               //deselect old
        $deselectlogoResult = mysql_query($deselectlogo);
        $query = ("UPDATE newlogo SET active=1 WHERE name=" .$name);            // make the new logo active
        $queryResult = mysql_query($query);
        if (!$queryResult){echo "error";}
        if ($queryResult){echo "success";} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:13:25.170

```
 $query = "UPDATE newlogo SET active=1 WHERE name='".$name."'";            // make the new logo active 
```

# php - 将 '\n' 替换为 ' ' PHP SQL 表

> ID：14189277
> 
> 赞同：0
> 
> 时间：2013-01-07T03:01:43.803
> 
> 标签：php, sql, database

> **可能重复：**
> [用 <br> 替换换行符 - PHP](https://stackoverflow.com/questions/7370635/replacing-a-newline-with-a-br-php)

我正在展示一个包含我的 SQL 数据库中的信息的表格。当我插入 MySQL 数据库时，我添加：

```
\n 
```

当我“绘制”数据库时，我可以将其替换为：

```
<br> 
```

它应该添加一个新行。这是我尝试过的，它似乎不起作用。它不会替换`\n`with `<br>`，我看不出我做错了什么。（如果您想自己测试，这是下图中的代码；[http](http://pastebin.com/PgWKD5Mg) ://pastebin.com/PgWKD5Mg ）

![我替换字符串的图像](../Images/e6085c0dd105e43086cc0f755127448e.png)

但这似乎不起作用。它不会替换字符串，但是如果我`$row['Info']`用类似打印的东西替换`Hello \n Test`它*并*打印`hello`到`Test`单独的行上，该代码会呈现以下内容：

![在此处输入图像描述](../Images/1813963353510367cb4798420d7aecf7.png)

注意：**nl2br 函数也不起作用，不管怎样，这和那个一样**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:19:18.457

尝试`str_replace("\\n", "<br>", $row['Info']);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:11:12.077

您可以使用[`nl2br`](http://php.net/manual/en/function.nl2br.php)：

```
echo nl2br($result); 
```

# sql - SQL 嵌套 if else if 语法错误

> ID：14189278
> 
> 赞同：0
> 
> 时间：2013-01-07T03:01:49.253
> 
> 标签：sql, sql-server, tsql, sql-server-2005

```
declare @timeid int

if(datename(Dw,getdate())='Monday')
begin
set @timeid=3
end
Else if(datename(Dw,getdate())='Sunday' or datename(Dw,getdate())='Saturday')
begin
  set @timeId=2
end

ELSE   -- for Tuesday to Friday

begin
 if(convert(varchar(11),getdate(),108)<='08:30:00')
  begin
   set @timeId=1
  end
 else
  begin
   set @timeId=0
  end
end

select @timeid 
```

错误被抛出：

> *消息 156，级别 15，状态 1，第 13 行
> 关键字“Else”附近的语法不正确。
> 消息 102，级别 15，状态 1，第 32 行
> “@timeid”附近的语法不正确。*

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:14:11.200

好的，我很确定您的语法错误`varchar(11)`应该是`varchar`.

尽管如此，这对 SQL 的使用并不好；首先，您使用`getdate()`3 次 - 每次都会不同（以毫秒为单位），这可能意味着在第一次和最后一次通话之间从周五到周六，或者从 08:30 之前到 08:30 之后。

尝试这个：

```
declare @timeid int
declare @nowtime datetime

select @nowtime=getdate()

select @timeid = CASE datename(Dw,@nowtime)
                   WHEN 'Monday' THEN 3
                   WHEN 'Sunday' THEN 2
                   WHEN 'Saturday' THEN 2
                   ELSE
                     CASE 
                       WHEN convert(varchar,getdate(),108)<='08:30:00' THEN 1
                       ELSE 0
                     END
                 END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T03:26:15.090

@DaleM 打败了我，但是，为了清楚起见，这是另一个重写：

```
DECLARE @DOW_SUNDAY int
DECLARE @DOW_MONDAY int
DECLARE @DOW_SATURDAY int

SET @DOW_SUNDAY = 1
SET @DOW_MONDAY = 2
SET @DOW_SATURDAY = 7

DECLARE @now datetime
DECLARE @day_of_week int

SET @now = GETDATE()
SET @day_of_week = DATEPART(DW, @now)

SELECT CASE WHEN @day_of_week = @DOW_MONDAY
            THEN 3
            WHEN @day_of_week IN (@DOW_SATURDAY, @DOW_SUNDAY)
            THEN 2
            WHEN CONVERT(varchar, @now, 108) <= '08:30:00'
            THEN 1
            ELSE 0
        END 
```

# jquery - 查找元素是否包含“body”添加类

> ID：14189279
> 
> 赞同：-3
> 
> 时间：2013-01-07T03:01:50.843
> 
> 标签：jquery

```
<div class="results">
<div class"right">
<span class="cdh list"><span>
<div>
 <div class="left">
  <ul>
  <li><p><a href="#">link</a> some text</p></li>
  <li><p><a href="#">link</a> some text</p></li>
  <li><p><a href="#">link</a> some text</p></li>
  <li><p><a href="#">link</a> body</p></li>
  </ul>
 </div>
</div>
<div class="results">
 <div class"right">
  <span class="cdh list"><span>
 <div>
 <div class="left">
  <ul>
  <li><p><a href="#">link</a> some text</p></li>
  <li><p><a href="#">link</a> some text</p></li>
  <li><p><a href="#">link</a> some text</p></li>
  <li><p><a href="#">link</a> some text</p></li>
  </ul>
 </div>
</div> 
```

我想找到包含“body”（和 addClass 到）span 标记的 < p > 标记。我想将课程添加到上跨度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:08:29.660

这是一个[**演示**](http://jsbin.com/odujej/1/edit)

基本上遍历[每个](http://api.jquery.com/each/)标签，`p`获取[文本内容](http://api.jquery.com/text/)，如果它包含'body'，则添加[类](http://api.jquery.com/addClass/)到`span`。

```
$('ul li p').each(function() {
  if ($(this).text().indexOf('body') > -1) {
    $('span').addClass('Test');
  }
}); 
```

或者更简洁的方式，

```
if ('p:contains("body")') {
      $('span').addClass('Test');
} 
```

# php - 从脚本中运行外部 .js 文件中的 javascript 函数？（由 src= 附加）使用 PHP

> ID：14189280
> 
> 赞同：0
> 
> 时间：2013-01-07T03:02:04.183
> 
> 标签：php, javascript

我正在使用 PHP 代码在我的网页标签中生成标签。

我正在使用 PHP，因此如果设置了特定的 GET 变量（在本例中为“savedsearch”），它会从我附加到网页的外部 javascript 文件中运行一个函数。

这是我正在使用的代码：

```
<?php
//check if a saved search has been used
if (isset($_GET["savedsearch"])) {
    $savedsearch=$_GET["savedsearch"];
    echo "<script type='text/javascript' src='search.js'>
    window.onload=sendsearch($savedsearch);
    </script>";
}
else {
    echo "<script type='text/javascript' src='search.js'></script>";
}
?> 
```

这不起作用（如果设置了 savedsearch，则不运行该功能）......是否可以运行这样的功能？

有没有其他方法可以在我的页面正文中没有任何 javascript 或 PHP 的情况下做到这一点？

提前感谢并感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:07:46.790

如果您有一个带有 src 属性的脚本标签，则该标签内的代码不会执行，您必须添加另一个标签来执行代码，脚本标签不能用于获取脚本和运行内联脚本。

您还将结果分配`sendsearch()`给`window.load`which is not a function。它起作用的唯一原因是因为您真的不需要等待 onload 事件吗？在解析脚本时调用它，而不是在 window.onload 事件之后调用。

此外，请务必调用`json_encode`，`$savedsearch`这将防止 XSS 和字符串转义问题（同时还在字符串周围添加引号）。

```
<?php
//check if a saved search has been used
echo "<script type='text/javascript' src='search.js'></script>";
if (isset($_GET["savedsearch"])) {
    $savedsearch=json_encode($_GET["savedsearch"]);
    echo "<script type='text/javascript'>
       // If you don't need to wait for the onload event
       sendsearch($savedsearch);
       // If you do need to wait for the onload event
       window.onload = function(){
         sendsearch($savedsearch);
       };
    </script>";
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:06:01.990

你为什么不试试：

```
<?php
//check if a saved search has been used
if (isset($_GET["savedsearch"])) {
    $savedsearch=$_GET["savedsearch"];
    echo "<script type='text/javascript' src='search.js'></script>
          <script>
            window.onload=sendsearch($savedsearch);
          </script>
         ";
}
else {
    echo "<script type='text/javascript' src='search.js'></script>";
}
?> 
```

同时在脚本标签中同时包含 src 和 content 是不可靠的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T03:10:59.277

我不确定其他人的答案中概述的内容/src 问题，但除非您的`sendsearch`函数*返回一个函数*，否则这将不起作用。您将需要以下内容：

```
window.onload=function(){sendsearch($savedsearch)}; 
```

这提供了一个可以在`onload`事件被调用时运行的函数。

根据其他答案，这可能需要与将 javascript 拉入不同的标签一起使用——我不熟悉它是如何工作的。

# java - 需要有关基于用户角色的设计的建议

> ID：14189282
> 
> 赞同：2
> 
> 时间：2013-01-07T03:02:25.977
> 
> 标签：java, database-design, struts2

假设我正在建立一个像 stackoverflow 这样的问答网站。我的网站有以下主要特点：

**帖子**：帖子可以是问题或答案

**个人资料**：用户的个人资料

**私信**：存储用户的私信

……

我试图弄清楚如何在我的系统中设计用户角色。我想出了：（每个用户只属于一个角色）

![在此处输入图像描述](../Images/41421c0e902c82190aa1c9b41c773c23.png)

这样设计用户角色可以吗？如果没有，谁能给我一些建议？我正在使用 MySQL，Struts 2。在 Struts 2 中，是否有任何可用于基于角色的访问控制 (RBAC) 的库？

（我已阅读[Need some advice on my own Role Based Access Control (RBAC)](https://stackoverflow.com/questions/5115504/need-some-advice-on-my-own-role-based-access-control-rbac)，但似乎无法解决我的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:20:20.970

我已经在我当前的 struts2-project 中实现了 RBAC。`RBAC`包含 3 件事。用户、角色和权限。

关系如下：

```
Role-Permission: M-M
User-Role:M-M 
```

看，关系是这样的，因为如果假设你定义了一个角色 ADMINISTRATOR，那么它将需要像 CAN_READ、CAN_WRITE、CAN_EXECUTE 等这样的 PERMISSIONS。您还想定义具有上述权限组合的角色，并且您还想创建具有某种角色组合的用户。前任：

```
 READER is role having permission CAN_READ.
    WRITER is role having permission CAN_WRITE.
    You can now have user with role READER & WRITER 
```

# windows-8 - 元素可滚动时无法检测到“交叉滑动”手势

> ID：14189284
> 
> 赞同：0
> 
> 时间：2013-01-07T03:02:29.167
> 
> 标签：windows-8, touch, winjs, gestures

我目前正在尝试`div`使用`Windows.UI.Input.GestureRecognizer`该类检测交叉滑动手势。

我已经能够成功实现对这个手势的检测，*除非*元素处于可滚动区域中。

具体来说，当它*位于*可滚动区域时，我`MSPointerCancel`几乎会在事件发生后立即收到一个`MSPointerDown`事件——如果我缓慢移动触摸交互，我确实会看到*一些* `MSPointerMove`事件，但随后它会关闭并取消它。

深入研究`WinJS.UI.ListView`实现，我几乎在做同样的事情。这种行为*确实*有效，所以我不认为这是驱动程序或模拟器的问题。

要查看此代码交叉滑动，请按如下方式更改 CSS：

`.container`:`width: 3000px`改为`width: 300px`

**示例代码**

可以通过在 Visual Studio 中创建一个空白 JavaScript 应用程序并将代码粘贴到下面讨论的位置来测试此代码。

*JavaScript，Default.js 的结尾*

```
WinJS.Namespace.define("Sample", {
    Swiper: WinJS.Class.define(function (el, options) {
        this.element = el;
        WinJS.UI.setOptions(options);
        this.mouseUp = this.mouseUp.bind(this);
        this.keyPress = this.keyPress.bind(this);

        //el.addEventListener("mouseup", this.mouseUp, true);
        el.addEventListener("keypress", this.keyPress);

        // Gesture events
        this.pointerDown = this.pointerDown.bind(this);
        this.pointerMove = this.pointerMove.bind(this);
        this.pointerUp = this.pointerUp.bind(this);
        this.pointerCancel = this.pointerCancel.bind(this);

        el.addEventListener("MSPointerDown", this.pointerDown, true);
        el.addEventListener("MSPointerMove", this.pointerMove, true);
        el.addEventListener("MSPointerUp", this.pointerUp, true);
        el.addEventListener("MSPointerCancel", this.pointerCancel, true);
    }, {
        element: null,
        _recognizer: null,
        wasSelected: false,
        currentTarget: null,
        pointer: null,
        mouseUp: function (e) {
            if(!e) {
                return;
            }

            if(e.button !== Sample.Swiper.RIGHT_MOUSE) {
                return;
            }

            if (!WinJS.Utilities.hasClass(e.srcElement, "swipeable")) {
                return;
            }

            this._toggleSelection(e.srcElement);
        },
        keyPress: function (e) {
            if (!e) {
                return;
            }

            if (e.keyCode !== WinJS.Utilities.Key.space) {
                return;
            }

            if (!WinJS.Utilities.hasClass(e.srcElement, "swipeable")) {
                return;
            }

            this._toggleSelection(e.srcElement);
        },
        pointerDown: function (e) {
            console.log("Pointer: Down");
            if (!WinJS.Utilities.hasClass(e.srcElement, "swipeable")) {
                return;
            }

            var p = Windows.UI.Input.PointerPoint.getCurrentPoint(e.pointerId);
            var touch = (e.pointerType === Sample.Swiper.TOUCH);
            var pointerProperties = p.properties;
            this.pointer = e.pointerId;
            if (!touch) {
                this.mouseUp(e);
                return;
            }

            this.currentTarget = e.srcElement;
            window.proxy.msSetPointerCapture(p.pointerId);
            this._getRecognizer().processDownEvent(p);

            //e.stopImmediatePropagation();
            e.preventDefault();
        },
        pointerMove: function (e) {
            if (e.pointerId !== this.pointer) {
                return;
            }
            console.log("Pointer: Move");
            var ips = Windows.UI.Input.PointerPoint.getIntermediatePoints(e.pointerId);
            this._getRecognizer().processMoveEvents(ips);
            //e.stopImmediatePropagation();
        },
        pointerUp: function (e) {
            if (e.pointerId !== this.pointer) {
                return;
            }
            console.log("Pointer: Up");
            var p = Windows.UI.Input.PointerPoint.getCurrentPoint(e.pointerId);
            this._getRecognizer().processUpEvent(p);
            //e.stopImmediatePropagation();
        },
        pointerCancel: function (e) {
            if (e.pointerId !== this.pointer) {
                return;
            }

            console.log("Pointer: Canceled");
            this._getRecognizer().completeGesture();
            e.stopImmediatePropagation();
        },

        _toggleSelection: function (el) {
            WinJS.Utilities.toggleClass(el, "selected");
        },
        _getRecognizer: function () {
            if (this._recognizer) {
                return this._recognizer;
            }

            var gr = new Windows.UI.Input.GestureRecognizer();
            gr.showGestureFeedback = false;
            var thresholds = gr.crossSlideThresholds;
            thresholds.selectionStart = WinJS.UI._VERTICAL_SWIPE_SELECTION_THRESHOLD;
            thresholds.speedBumpStart = WinJS.UI._VERTICAL_SWIPE_SPEED_BUMP_START;
            thresholds.speedBumpEnd = WinJS.UI._VERTICAL_SWIPE_SPEED_BUMP_END;
            thresholds.rearrangeStart = null;

            gr.crossSlideThresholds = thresholds;
            gr.crossSlideHorizontally = false;
            var settings = Windows.UI.Input.GestureSettings;
            gr.gestureSettings = settings.crossSlide;
            gr.addEventListener("crosssliding", function (e) {
                var el = this.currentTarget || document.createElement("div");
                console.log("CrossSlide State: " + e.crossSlidingState);
                switch (e.crossSlidingState) {
                    case Windows.UI.Input.CrossSlidingState.selecting:
                        this.wasSelected = true;
                        break;

                    case Windows.UI.Input.CrossSlidingState.completed:
                        if (this.wasSelected) {
                            this._toggleSelection(this.currentTarget);
                        }
                        this.wasSelected = false;
                        this.currentTarget = false;
                        break;

                    default:
                        this.wasSelected = false;
                        break;
                }
            }.bind(this));
            gr.addEventListener("manipulationstarted", function (e) {
                debugger;
            });
            this._recognizer = gr;

            return gr;
        }
    }, {
        RIGHT_MOUSE: 2,
        TOUCH: 2,
    }),
}); 
```

*HTML，替换 default.html 中的正文*

```
<body>
    <div class="scroller" data-win-control="Sample.Swiper">
        <div id="proxy"></div>
        <div class="container">
            <div class="item swipeable"
                tabindex="0">
            </div>
        </div>
    </div>
</body> 
```

*CSS，添加到 default.css*

```
.scroller {
    width: 100vw;
    height: 100vh;
    overflow-x: auto;
    -ms-touch-action: auto;
}
.container {
    width: 3000px;
    height: 100vh;
    display: -ms-grid;
    -ms-grid-columns: 1fr 100px 1fr;
    -ms-grid-rows: 1fr 100px 1fr;
}

.item {
    background-color: red;
    -ms-grid-column: 2;
    -ms-grid-row: 2;
}

.selected {
    outline-color: white;
    outline-style: solid;
    outline-width: 3px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:03:07.307

这是因为`-ms-touch-action`需要在特定的平移轴上“固定”以进行直接操作。因此，如果您想要垂直横向滑动（例如滑动手指），那么您需要确保要检测横向滑动的元素已`-ms-touch-action`设置为`pan-x`，以启用水平平移，而不是垂直平移。滚动条应该`-ms-touch-action`设置为`auto`

（这将教会我查看 VS 中的智能感知，而不是查看文档；我知道这里有一些东西）

# data-structures - 链式哈希表：接口和重复项？

> ID：14189288
> 
> 赞同：1
> 
> 时间：2013-01-07T03:03:02.560
> 
> 标签：data-structures, hashtable

好的，所以我实现了我自己的链式哈希表，因为我使用的 sdk 没有。这是一个理论问题，因此代码和语言无关紧要。问题是：

如果我为一个键做一个 GET 元素/对象，并且链式哈希表有 2 个用于这个键的对象，我应该返回哪个？数组？所以 GET 函数返回一个数组？如果只有 1 个元素怎么办？Get 函数也返回一个数组？我试图使其对用户尽可能透明。

any1 是否有任何关于链接哈希表的函数原型的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T05:31:28.613

这取决于您的应用程序。通常，您不允许哈希表中有多个具有相同键的不同条目（如果您插入具有相同键的条目，则将现有的键/值对替换为新的键/值对）。

如果您确实支持与同一个键关联的多个值，那么使用最适合您的方式返回所有这些值是完全可以的。您可以想象返回一个数组，该数组可能包含多个值，也可能只包含一个值。另一种选择是返回一对迭代器，它们跨越具有相同键的值对范围（C++ 采用的方法`std::unordered_multimap`）。

至于函数原型：这取决于语言。通常，它们看起来像这样（在 Java-ish 表示法中）：

```
boolean add(KeyType key, ValueType value);
boolean containsKey(KeyType key);
boolean remove(KeyType key);
int size();
ValueType get(KeyType key);
Iterator keyIterator();
Iterator valueIterator(); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:13:12.413

我不完全确定您为什么被否决，但这不是一个坏问题。

我建议在网上做一些谷歌搜索和研究，以便您对数据结构的理解更加完整。

我建议这篇文章：[http ://www.algolist.net/Data_structures/Hash_table/Chaining](http://www.algolist.net/Data_structures/Hash_table/Chaining)

您可以在第一个示例中看到他们使用基本的链表链接，尽管开放寻址是另一种选择。

就您的返回值而言，如果您采用链接方法（如果仅存在一个值，则不是单个值），我将始终保持一致并始终返回一个列表，这样调用代码总是可以期望收到一个列表，然后遍历内容 - 如果是一个或多个结果，那么您可以轻松处理它。但是，如果您返回多个或单个值的列表，那么您的方法不是我认为一致的（除非您将其记录为此类）。

希望有帮助！

# android - 如何在通话期间继续接收位置通知

> ID：14189291
> 
> 赞同：1
> 
> 时间：2013-01-07T03:03:23.193
> 
> 标签：android, location

我是一个已经编写了几个基本应用程序的菜鸟，现在我正在编写一个应用程序，该应用程序基于位置管理器系统服务创建跟踪日志。我正在寻找有关如何构建我的应用程序的建议，以便在接到电话时，用户跟踪日志（我每 10 秒存储一次位置）在通话期间不会损坏/空白。定位服务会在通话过程中继续调用我的 onLocationChanged 方法吗？非常感谢示例的链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:02:26.560

在 Location Manager 中注册一个 LocationListener 后，当位置发生变化时，onLocationChanged 方法中的代码将被执行。即使您退出应用程序，该侦听器也将始终运行。您必须自己注销监听器。

当有电话来电时，您的应用程序将暂时停止并跳转到电话 UI。如果你没有在 OnStop() 中取消注册 LocationListener，onLocationChanged 中的代码仍然会被执行。

所以我认为这个电话不会影响你的定位服务。你可以自己做一个测试。

希望这有帮助。

# c++ - 为什么字体中的图标上方有很多空白？

> ID：14189292
> 
> 赞同：1
> 
> 时间：2013-01-07T03:03:30.080
> 
> 标签：c++, qt, fonts, svg

我正在尝试为其图标添加自定义字体：http: [//arisath.github.com/elusive-iconfont/](http://aristath.github.com/elusive-iconfont/)

但是，当我尝试查看它时，实际图标上方有大量空间。我在 MS Word 中打开了字体（从插入符号，然后选择安装的字体），它有同样的问题，这让我相信问题出在字体上。字体是从 svg 生成的。我尝试将 svg 上传到[http://icomoon.io](http://icomoon.io)并重新下载，新字体也有同样的问题。

这是我用来渲染字体的代码：

```
QLabel *test = new QLabel;
test->setText(QString::fromUtf8("\ue002\n\ue003"));
test->setAlignment(Qt::AlignTop | Qt::AlignLeft);
test->setStyleSheet("color:red;font-family:'Elusive-Icons';font-size:20px;margin:0px;background-color:black;line-height:0.1");
test->setMargin(0);
test->setWordWrap(true);
test->setFixedWidth(75);
test->show();
```

如何使图标上方没有空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T07:23:11.270

我是 elusive-icons 字体的创造者。

我注意到在 IE 和 android 2.3 浏览器中查看字体时存在此问题。但是，我目前不知道为什么会发生这种情况，并且很想听听人们可能对如何解决此问题提出的任何建议...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T04:10:49.877

这是 elusive-icon 字体 (http://aristath.github.com/elusive-iconfont/) 的错误。我已经验证 FontAwesome 没有这个问题（在 ms word 或我的程序中）。

# sublimetext2 - 如何使用 sublime text 2 删除 mutiline 上的第一个单词？

> ID：14189293
> 
> 赞同：13
> 
> 时间：2013-01-07T03:03:48.260
> 
> 标签：sublimetext2

我想用 sublime-text 删除多行单词。

例如，我想删除所有行号（有行号，因为我从某处粘贴代码）如下：

![在此处输入图像描述](../Images/fed99eb637724871326cb0aebdfa5f36.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-07T03:31:55.527

使用列编辑模式删除它们： [http ://www.sublimetext.com/docs/2/column_selection.html](http://www.sublimetext.com/docs/2/column_selection.html)

# 对于带鼠标的 Windows

> 使用鼠标右键 + Shift 选择

或者

> 用鼠标中键选择

按`CTRL`添加到选择

按`ALT`从选择中减去

# 仅使用键盘

> `CTRL`+ `ALT`+ 向上
> 
> `CTRL`+ `ALT`+ 下

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-08T12:14:12.840

您还可以使用正则表达式进行搜索和替换。以下是在 Windows 版本中测试的：

1.  `CTRL`+`H`打开替换对话框。
2.  确保使用正则表达式：单击替换对话框中最左侧的图标或使用`ALT`+ `R`。
3.  `^[\d]+`在“**查找内容”**字段中输入以选择所有行开头的任何数字。
4.  将**替换**为字段留空以删除数字。
5.  单击`Replace All`。

（搜索`^[\w]+`是否要选择第一个单词而不是仅数字）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-23T18:59:47.747

我以不同的方式做到了这一点……虽然不是在 Sublime 中，但以防万一有人感兴趣……有几个网站可以让你这样做！只需将您的代码与行号一起粘贴到其中，它们就会被删除。我喜欢用这个：

[http://remove-line-numbers.ruurtjan.com/](http://remove-line-numbers.ruurtjan.com/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-07T22:01:33.760

Frank He 提出了一种多光标模式，列选择（[鼠标指令](http://www.sublimetext.com/docs/2/column_selection.html)，[键盘指令](http://www.sublimetext.com/docs/2/multiple_selection_with_the_keyboard.html)）。另一种是使用搜索添加额外的实例（[官方说明](http://docs.sublimetext.info/en/latest/editing/editing.html#multiple-selections)）。如果您正在编辑的行不是连续的，这将特别有用。

在您的情况下，您可以（例如）从所有行共有的一行中选择一种模式（例如“”）。然后，您可以使用`Command`+ `D`(Mac) 或`Command`+ `D`(Linux/Windows) 选择模式的连续实例。 `Command`++ (Mac) 或++ `Shift`( Linux/Windows )将选择模式的所有实例。`D``Command``Shift``D`

要比我更好地了解这些选项，请参阅[本教程视频](https://tutsplus.com/lesson/multiple-cursors-and-incremental-search)（优秀系列的一部分）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-25T07:01:22.207

您可以创建一个插件（工具/新插件...），将剪贴板复制到所有选定区域：

```
import sublime, sublime_plugin

class PasteWithoutLineNumberCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        cleaned_str = self.clean_line_numbers(sublime.get_clipboard())
        sublime.set_clipboard(cleaned_str)
        self.view.run_command('paste')

    def clean_line_numbers(self, data):
        data = re.sub('(^|(?<=\n))[^\S\n]*\d+[^\S\n](?=[^\n]+)', '', data);
        return data; 
```

将其保存在您的`Packages/User`目录中。

然后您可以添加键绑定（Preferences/Key Bindings - User）：

```
{ "keys": ["ctrl+shift+;"], "command": "paste_without_line_number" } 
```

或者你可以在这里安装插件： [ClipboardCommands](https://github.com/SublimeText/ClipboardCommands "剪贴板命令")然后使用快捷方式`ctrl+shift+;`粘贴没有行号的代码。

======

更新：

`ClipboardCommands`您现在可以通过包控制直接安装 sublime 插件。

# php - 控制器类使用来自其他类的变量

> ID：14189297
> 
> 赞同：0
> 
> 时间：2013-01-07T03:04:30.660
> 
> 标签：php, codeigniter

我试图弄清楚如何处理我有一个 MY_Controller、Backend_Controller 的情况，当然后端扩展了 MY，我还有其他控制器，如 Login 和其他扩展后端的较小控制器。我的问题是，如果您注意到登录控制器需要能够访问后端控制器内部的变量？在这种情况下如何使用该变量？

在后端控制器中，我有这个：

```
<?php
if (! defined('BASEPATH')) exit('No direct script access allowed');

class Backend_Controller extends MY_Controller
{
    function __construct ()
    {
        parent::__construct();

        $this->load->library('session');

        $cms_template = $this->config->item('cms_template');

        $this->data['template'] = $cms_template;
    }
} 
```

这是登录控制器：

```
<?php 

if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Login extends Backend_Controller 
{
    public function __construct()
    {
        parent::__construct();  
    }    

    public function index()
    {   
        $js_page_addons = '<script src="'.base_url().'assets/' .$cms_template. '/js/validation/login_form.js"></script>';

        $page_view = 'login_view';

        $this->data['js_page_addons'] = $js_page_addons;
        $this->data['page_view'] = $page_view;
        $this->load->view('cms/' . $cms_template . '/usermanagement/index_view', $this->data);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:30:44.463

如果您的意思是您需要从后端控制器访问变量到登录控制器，因为您正在扩展`Backend_Controller`in `Login_Controller`，您可以这样做： in **Backend_Controller** ::

```
public function __construct() {
   parent::__construct();  
   $this->some_backend_var = "some_value_here";
   //OR
   ci()->some_backend_var = $this->some_backend_var = "some_value_here";
} 
```

在登录控制器中的一些功能，你可以使用：

```
echo $this->some_backend_var; //shows "some_value_here" 
```

你的意思是这样的吗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:30:51.443

如果您指的是`$cms_template`，您应该能够通过以下几种方式之一获得它。假设`$data`数组和`$config`属性都不是`private`，请尝试

```
$cms_template = $this->config->item('cms_template'); 
```

或者

```
$cms_template = $this->data['template']; 
```

此外，如果它只代理，则不需要构造函数`parent::__construct()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T08:02:12.737

因为 MY_ 前缀默认由 Codeigniter 加载，并且非前缀控制器不需要包含对 backend_controller 类的引用，如下所示：

> if ( !defined('BASEPATH')) exit('不允许直接访问脚本');
> 
> include_once(APPPATH . 'controllers/backend_controller.php');
> 
> 类登录扩展 Backend_Controller { public function _construct *() { parent::* _construct();
> }
> 
> ```
> public function index()
> {   
>     $js_page_addons = '<script src="'.base_url().'assets/' .$cms_template. '/js/validation/login_form.js"></script>';
> 
>     $page_view = 'login_view';
> 
>     $this->data['js_page_addons'] = $js_page_addons;
>     $this->data['page_view'] = $page_view;
>     $this->load->view('cms/' . $cms_template . '/usermanagement/index_view', $this->data);
> } } 
> ```

# java - 我应该如何将 Double 值与 Long.MAX_VALUE 进行比较？和 Long.MAX_VALUE+1d

> ID：14189298
> 
> 赞同：2
> 
> 时间：2013-01-07T03:04:34.047
> 
> 标签：java, comparison, double

我想比较两个双值如下：

`Double doubleValue = Double.valueOf(Long.MAX_VALUE);`

`Double doubleValue2 = Double.valueOf(Long.MAX_VALUE+1d);`

显然 doubleValue 和 doubleValu2 不相等，由于 1d 加法，2nd 更大。

但无论我使用 compare() 还是 equals() 方法，这两种方法都会为两个值返回相等的结果。有什么方法可以比较并且不会在这里丢失准确性。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:14:30.743

这是因为在将 long 转换为 double 时会丢失精度

```
 double d1 = (double)Long.MAX_VALUE;
    double d2 = Long.MAX_VALUE + 1.0;
    System.out.println(d1);
    System.out.println(d2); 
```

它给出了相同的数字

```
9.223372036854776E18
9.223372036854776E18 
```

long 有 32 位，double 的有效位有 53 位[http://en.wikipedia.org/wiki/Double-precision_floating-point_format](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。十进制，max long = 9223372036854775807，是19位，double最多可以容纳17位

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:09:13.243

Long.MAX_VALUE 有 63 个有效位。double 不能准确表示任何超过 53 个有效位的数字。如果您想使用大于 Long.MAX_VALUE 的整数进行精确计算，我建议使用 java.math.BigInteger。

```
import java.math.BigInteger;

public class Test {
  public static void main(String[] args) {
    BigInteger longMax = BigInteger.valueOf(Long.MAX_VALUE);
    BigInteger plusOne = longMax.add(BigInteger.ONE);
    System.out.println(longMax.equals(plusOne));
  }
} 
```

# java - 固定宽度的整数是否分布在乘法上？

> ID：14189299
> 
> 赞同：17
> 
> 时间：2013-01-07T03:05:04.200
> 
> 标签：java, math, language-agnostic, integer-overflow

对于三个 n 位有符号整数`a`、`b`、 和`c`（例如 32 位），`a * (b + c) == (a * b) + (a * c)`考虑到整数溢出，总是真的吗？

我认为这是与语言无关的，但如果不是，我对 Java 的答案特别感兴趣。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T03:19:46.857

是的，它成立，因为整数算术是有限环上的模算术。

你可以在这里看到一些理论讨论：[https ://math.stackexchange.com/questions/27336/associativity-commutativity-and-distributivity-of-modulo-arithmetic](https://math.stackexchange.com/questions/27336/associativity-commutativity-and-distributivity-of-modulo-arithmetic)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T03:18:30.157

是的，这**总是正确的**。

这是一个有效的属性，因为您正在有效地进行算术模 2^32。Java 被签名的事实`int`使事情稍微复杂化（这意味着您不能假设您通常在做与模运算等效的操作），但不会影响这个特定的分配属性。

一个思想实验是考虑使用*重复加法*来实现它，并考虑它溢出时会发生什么。由于进行加法的顺序不会影响`int`s 的结果（即使有溢出），所以也不会以不同的顺序将乘法作为重复加法。而且由于`int`乘法总是等价于重复加法，因此对于重新排序的乘法，结果也必须相同。量子点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T03:20:29.087

分配性质适用于模算术；因为，对于相同的（无符号）位长度，固定位长度二进制补码整数算术与模算术[同态，所以在使用二进制补码算术时分配属性成立。](http://en.wikipedia.org/wiki/Homomorphism)

更详细的解释可以在[这里](https://math.stackexchange.com/questions/27336/associativity-commutativity-and-distributivity-of-modulo-arithmetic)找到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T03:19:24.687

是的，它确实适用于 Java，包括溢出情况。（某些其他语言没有指定溢出行为，在这种情况下不做任何保证。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T03:21:22.767

对于有符号整数的 2 补码数学，问题归结为：

```
is (a*(b+c))%(2**32) === (a*b+a*c)%(2**32) 
```

所以对于 2 的补码有符号整数数学，它总是正确的。

对于非 2 的补码有符号整数数学，我想这取决于如何处理溢出。如果它反映了模数学，那么它是真的。

# php - 网站如何以及为什么在 URL 处理方面有所不同？

> ID：14189301
> 
> 赞同：0
> 
> 时间：2013-01-07T03:05:11.613
> 
> 标签：php, apache, .htaccess, url, url-rewriting

我注意到许多网站，甚至是成熟的网站，在处理 URL 的方式上都不同。

```
Stack Overflow: http://stackoverflow.com/questions/tagged/url+php
Google: https://www.google.com/search?q=url+handling
Facebook: http://www.facebook.com/userID
Normal PHP: http://example.com/page.php?param=1&other=2 
```

Wordpress 可以轻松地在不同的 URL 结构之间进行更改。

我的第一个问题很简单：你如何改变你的网站处理 URL 的方式？我认为您必须设置某种`htaccess`重写，但我不确定。

另外，在`/`用于传递参数的站点上，这些站点如何访问某个文件夹？我通常使用[http://example.com/includes](http://example.com/includes)来访问我的`includes`文件夹，但如果我`/`用来传递参数，我的网站如何知道我要做什么？

我的第二个问题更重要：为什么网站会更改其 URL 结构？其背后的原理是什么？仅仅是为了独一无二吗？性能怎么样……服务器上哪一个最轻？还是它们没有真正的区别，公司只是认为某种结构在浏览器 URL 栏中看起来更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:31:12.910

为了更彻底地解决您的问题，我想暂时将您的注意力从 Web 服务器转移到 HTTP 协议及其基本工作原理上。

HTTP 是一个非常简单的协议，由请求-响应模型组成。客户端（*基本上是用户的浏览器*）发送所谓的 HTTP 请求标头，该标头可能具有也可能不具有非空 HTTP 请求正文。[当您想访问像https://stackoverflow.com/questions/tagged/url+php](https://stackoverflow.com/questions/tagged/url+php)这样的 URL 时，标题看起来像这样

```
GET /questions/tagged/url+php HTTP/1.1
Host: stackoverflow.com
Connection: keep-alive 
```

请注意，在您的浏览器为了发送到 stackoverflow 服务器而制定的 HTTP 请求标头的第 1 行上，整行由 3 个非常简单的部分组成。

1.  **请求动词**，通常类似于 GET 或 POST（但也可以是许多其他的东西）。这告诉服务器您希望如何处理请求，以便它期望它响应。
2.  **请求路径**，可以由主机愿意接受的任何路径加上客户端希望提供的任何可选查询字符串组成，通常需要进行URL*编码*。
3.  发出请求的**协议版本**。这通常是 HTTP/1.1 或 HTTP/1.0。

此请求的第二行向服务器提供客户端打算通过此请求访问的主机名。

现在，在服务器端，一旦您的 Web 服务器收到此实际请求，它就可以选择处理该请求，但它可以随心所欲。但是，在任何常见的 apache/nginx/lighttpd Web 服务器设置中，您可能非常习惯的行为是客户端提供的路径必须与**文档根**目录中的物理路径匹配。这远非真相。这只是您的 Web 服务器可以处理请求的一种方式。您可以选择告诉您的 Web 服务器以不同的方式处理每个请求。

例如，Apache 的 httpd Web 服务器提供 mod_rewrite，它可以告诉您的 Web 服务器重写请求 URI，以便服务器可以根据特定规则（例如正则表达式或给定条件集）将它们重定向到其他地方。

```
 <Directory />
            Options -Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            Allow from all

            RewriteEngine On
            RewriteBase /
            RewriteRule ^index\.php$ - [L]
            RewriteCond %{REQUEST_FILENAME} !-f
            RewriteCond %{REQUEST_FILENAME} !-d
            RewriteRule . /index.php [L]
    </Directory> 
```

以上是 WordPress 重写规则的一个非常简单的示例，它们通常为您提供一个 in .htaccess 文件，但我是从我的虚拟主机文件中获取的，这通常比使用 .htaccess 快得多。`Directory`在您决定使用 .htaccess 之前，请务必先考虑将您想要放入 .htaccess 的任何内容放入您的 apache.conf 的 vhost指令中，因为它们是运行时文件，因此本质上比较慢。一般来说， mod_rewrite 本身很慢，只能作为最后的手段使用。

在任何情况下，所有这些重写的东西都会重定向到该虚拟主机根目录上的网络服务器的任何请求，`DocumentRoot`以重定向到您的 index.php 文件，然后该文件在内部处理该请求以确定它应该包含哪些 PHP 脚本此请求以及页面将如何呈现。

这只是穷人的做法。它通常被称为*前端控制器*或*前端路由器*。它只是充当请求 URI 和我们处理为任何给定请求 URI 呈现响应的实际方式之间的中间人。

如果您是 stackoverflow 或 google，您将拥有反向代理（*基本上是负载平衡器*），它们在更高级别处理这些请求，并连接到数据中心中的其他服务器，然后这些服务器将根据该请求 URI 处理请求的呈现。

请记住，我们所做的只是获取`GET /questions/tagged/url+php HTTP/1.1`客户端的**HTTP 请求标头**的一部分并将其发送到另一个知道如何响应它的脚本或程序。就像您的网络服务器可以为您做的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:18:25.493

对于您的第一个问题，您网站中的某些文件夹未向用户显示。例如一些媒体文件。您将在`.htaccess`文件中执行此操作

下面的代码将隐藏目录列表。如果用户将浏览器指向没有索引文件的目录，则在这种情况下将出现 403 错误

```
Options -Indexes 
```

如果要显示目录使用

```
Options +Indexes 
```

请参阅此链接[http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/](http://viralpatel.net/blogs/htaccess-directory-listing-enable-disable-allow-deny-prevent-htaccess-directory-listing/)

对于第二个问题 - 通常人们为什么使用 URL Rewrite 是因为`SEO`URL 友好。

搜索时它出现在前面..

例如，您有产品详细信息页面，并且您在查询字符串中传递产品 ID。重写会将查询字符串更改为带有斜杠的正确 URL。这对于谷歌查找搜索结果非常有帮助。

```
RewriteEngine On
RewriteRule ^products/([a-zA-Z]+)/([0-9]+)/$ index.php?product=$1&price=$2 
```

以下链接将为您提供帮助。

[http://zenverse.net/seo-friendly-urls-with-htaccess/](http://zenverse.net/seo-friendly-urls-with-htaccess/)

[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

# database - 使用主键值字符“1”而不是 int 值 1

> ID：14189306
> 
> 赞同：1
> 
> 时间：2013-01-07T03:05:36.213
> 
> 标签：database, architecture

嗯，我对数据库架构了解不多，但我真的不明白 CTO 的想法，但他坚持使用字符作为我们使用的所有表的主键的列类型。但是主键仍然看起来像这样 - > 1,2,3...等等。它们是数字的。所以我使用整数 + auto_increment 合成 PK

但是 CTO 说这很糟糕，因为他不能`LIKE`在 PK 上使用条件发出查询？！

1.  PK 使用字符是否可以，尤其是当您的 PK 是数字时？
2.  在PK上使用like条件是否正确？

PS - 因此，序列 CTO 不是自动递增/触发，而是发出选择查询，从表中获取最大值，然后加 1，然后将该值转换为字符串，然后存储它。

**编辑**
感谢您的帮助！但我需要让他相信这将是一场灾难。我只被告知这（在这种情况下为字符 4 PK）是一个坏主意。他的论点是……
1、角色PK不会占用太多空间。
2\. 如果您使用 int 类型 PK，数据库查询优化器将不得不重新读取您的查询，因为您将不得不发出类似
`"select * from employee where name like 'somename'`
and的问题
`Select * from employee where id = 6`。
因为 where 子句发生了变化。
他强烈认为我们使用的东西就像
`"select * from employee where @columnName like @value"`
他说的那样，查询优化器会运行得更好。

我怎样才能证明或给他一些改变主意的正当理由？

谢谢 ： ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:18:15.003

您的 CTO 在该决定上犯错的原因有很多；让我介绍几个：

1.  正如您所指出的，您必须采取额外的步骤来生成新的自动递增 PRIMARY KEY。这是一个计算成本，它也增加了它在未来某个时候被不一致地应用的可能性。

2.  一旦超过 4 个字符，字符将占用更多的磁盘空间（换句话说，存储 12345 比“12345”便宜很多）。

3.  如果您在主键上使用聚集索引（这是某些 RDBM 的默认值），则字符排序与整数排序完全不同：

字符：1、10、101、11、12、13、14、15... 数字：1、2、3、4...

如果您将最大数值作为字符插入，则您正在粉碎您的索引。不是无法克服的问题，而是更多的浪费算力去清理。

至于你关于在 PRiMARY KEY 上使用 LIKE 的第二个问题，我想不出你会这样做的原因；如果您需要 LIKE 的强大功能，通常是因为您已经为用作 PRIMARY KEY 的列分配了某种意义，这意味着您需要将其公开给最终用户。如果是这种情况，那么我将使用代理自动递增数字主键，并向用户公开某种形式的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:12:25.620

1：是的，没关系。开车总是以每小时 10 英里的速度行驶也是可以的。这辆车不会抛锚。Chars（或 varchars）在任何比较中都比较慢，因此结果是需要更大的预算才能获得相同的性能。他们浪费空间，他们很慢。我建议你在这里做唯一明智的事情——找一个不是白痴的工作。

2：甚至不确定。看，这里的问题是 - 这很可能只是你不能使用的东西。如：数据库不允许。我真的从未尝试过——我也不会尝试以每小时 100 英里的速度撞击混凝土块，只是为了看看它是否会损坏汽车。这太没有意义了。

您的 CTO 显然需要休假并阅读一本书。可能有人应该与 CEO 谈谈并将他派到这里来——他让一个白痴进入了 CTO 的位置​​。

有反对和支持合成（一个字段）主键的论点，但在我使用数据库的 25 年中，我从未见过有人在 DBase 或 Cobol 之外这样做。这是史诗般的无知。尖头发的老板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:58:37.113

好吧，你*可以*这样做（假设 SQL 2008 R2+）：

```
create table dbo.keep_the_peace (
  pk as right(replicate('0',10)+convert(varchar(10),pk_generator),10) persisted not null
, pk_generator int not null identity(1,1) 
, name nvarchar(128) not null
, constraint pk_keep_the_peace primary key nonclustered (pk)
, constraint uc_keep_the_peace unique clustered (pk_generator)
) 
go

insert dbo.keep_the_peace (name) values ('Hello')
insert dbo.keep_the_peace (name) values ('World')

select * from dbo.keep_the_peace 
```

优点：

1.  `pk`是varchar，CTO可以用`LIKE`
2.  `pk`是自动生成的，不需要在插入时重新查询表
3.  `pk`由于零填充，以正确的顺序排序。
4.  `pk_generator`可以在外键约束中使用，每个引用节省 6 个字节，而 CTO 仍然可以加入`pk`并获得正确的结果。
5.  上的非聚集索引`keep_the_peace`将享受瘦聚集键 ( `pk_generator`)

缺点：

1.  `pk`+`pk_generator`每行使用 14 个字节，超过必要的 10 个。
2.  `pk_keep_the_peace`每行使用 14 个字节，超过必要的 14 个字节。（哈哈）

**编辑**

> 他强烈认为我们使用的是“select * from employee where @columnName like @value”。他这样说，查询优化器会运行得更好。

*   没有这样的语法：如果没有动态 SQL，列名就不能被参数化。
*   没有这样的好处：每次更改列名时都会生成一个新的执行计划。

如果`WHERE`子句中的列发生变化，那么是的，您的查询将被重新编译。没有办法避免这种情况。列的索引可能不同。

例如，使用聚集索引 on `id`，这将作为聚集索引搜索执行：

```
select * from employee where id = 6 
```

而这将需要昂贵的表扫描：

```
select * from employee where name like 'somename%' 
```

将非聚集索引放在 上`name`，对于相同的查询，您可以获得更有效的索引查找 + 书签查找（通常）。

**INT vs CHAR 与它无关。没有。**字符键只是占用较大的空间（通常），而较大的占用空间会降低 I/O 吞吐量。但是这些普通查询的性能将更多地取决于索引而不是数据类型。

# python - 在 Python 中循环多个文本文件以提取数据

> ID：14189307
> 
> 赞同：1
> 
> 时间：2013-01-07T03:05:46.553
> 
> 标签：python, database-design, data-manipulation

自 10 月以来，我一直在自学 Python，以便从大约一百万个文本文件中提取数据。我一直在尝试以谨慎的小块来解决这个问题，这样我就不会在尝试一次性获取我想要的所有代码时不知所措/迷失方向。

对于我的第一个块，我想从文本文件中提取地址。到目前为止，我已经设法让我的代码一次处理一个文件，但由于我有超过 100 万个文件要处理，我认为手动执行此操作不会奏效。

为简洁起见，我只包含了我的代码的第一部分，因为其余部分基本上是这个，但正在寻找不同的关键字。

```
######
#Importing/creating modules
######
import os
import re
regex = re.compile('\d+')
######
#Creating N/A text for non-existing entries
######
CV2 = """N/A
N/A
"""

######
#Opening Database file 
######
target = open('C:/project/database.csv', 'a')

####
#Opening the source documents
####
big_file = open('C:/project/0000068100-99-000018.txt', 'r')

####
#Looking for central key
####
for line in big_file:
    if 'CENTRAL INDEX KEY:' in line:
        key = regex.findall(line)

####
#Looking for Conforming Period
####
big_file = open('C:/project/0000068100-99-000018.txt', 'r') 
for line in big_file:
    if 'CONFORMED PERIOD OF REPORT:' in line:
        conform = regex.findall(line)

#####
#Looking for File Type
#####       
big_file = open('C:/project/0000068100-99-000018.txt', 'r') 
for line in big_file:
    if 'CONFORMED SUBMISSION TYPE:' in line:
        type_temp = re.split('\s+',line) 
        type1 = type_temp [3]
        type = type1.split()

#####
#Looking for company name
#####   
big_file = open(''C:/project/0000068100-99-000018.txt', 'r')    
for line in big_file:
    if 'COMPANY CONFORMED NAME:' in line:
        name_temp = re.split('\:+',line) 
        name1 = name_temp [1]
        name2 = name1.split()
        name3 = ' '.join(name2)
        name = re.split('\::+',name3) 

####
#Looking for Street and Mail Addresses
####

big_file = open('C:/project/0000068100-99-000018.txt', 'r')
f = open('C:/Users/Martin/Thesis/address1.txt', 'w+')
for line in big_file:
    if 'STREET 1:' in line:
        f.write(line)

f = open('C:/project/address1.txt', 'w+')
a = open('C:/project/address1a.txt', 'w+')
b = os.path.getsize('C:/project/address1.txt')
########
#If empty, return NA, if not clean unnesseary tabs and formmating from line 
########
if b == 0:
    a.write(CV2)        
else:
    for line in f:
        type_temp = re.split('\:+',line) 
        add_temp = type_temp[1]
        add_temp_temp = ''.join(add_temp)
        add = re.split('\t+',add_temp_temp)
        tempo = "".join(add)
        a.write(tempo)
        #print tempo

a = open('C:/project/address1a.txt', 'w+')
lines=a.readlines()
bus1 = lines[0]
bus2 = re.split('\n+',bus1)
bus3 = bus2 [0]
business1 = re.split('\::+',bus3)
########
#Preping for inclusion for the Database entry 
########
mail1 = lines[1]
mail2 = re.split('\n+',mail1)
mail3 = mail2 [0]
mailad1 = re.split('\::+',mail3)

#####
#Formatting data tags
#####
company_name_temp = "Company Name"
company_name = re.split('\::+',company_name_temp)
bus_street1_temp = "Business Street 1"
bus_street1 = re.split('\::+',bus_street1_temp)
mstreet1_temp = key + conform + type + mail_street1 + mailad1
mstreet1 = ','.join(mstreet1_temp)

######
#Prepping for database
######
name_temp1 = key + conform + type + company_name + name
co_name = ','.join(name_temp1)

bstreet1_temp = key + conform + type + bus_street1 + business1
bstreet1 = ','.join(bstreet1_temp)

mstreet1_temp = key + conform + type + mail_street1 + mailad1
mstreet1 = ','.join(mstreet1_temp)

######
#Writing to database
######
target.write(co_name)
target.write("\n")
target.write(bstreet1)
target.write("\n")
target.write(mstreet1)
target.write("\n") 
```

我试图在顶部打开文件一次并多次调用变量，但它不起作用，我假设 for 循环看起来与此类似，但我不知道如何使它工作。

```
for filename in os.listdir('C:/project'):
    bigfile = filename 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:23:34.573

这是因为`open`返回`FileObjects`实际流，所以你不能多次访问它——实际上只有一次。你想在这里做的更像是这样的：

```
for filename in os.listdir('C:\project'):
    bigfile = open(filename, 'r').read()
    # Now the file contents are saved within bigfile, and you can do as you please,
    #  accessing multiple times. 
```

如果您的文件很大，则不建议这样做，因为 Python 读取和保存整个文件需要很多时间。这就是流式传输文件数据的确切原因`open`，因此您可以一次访问尽可能多的文件数据，而不是被迫一次获取整个数据块。

顺便说一句，您应该查看该`csv`模块。

# php - session_id() 错误

> ID：14189312
> 
> 赞同：0
> 
> 时间：2013-01-07T03:07:09.180
> 
> 标签：php, session, sessionid

虽然我对 session_id() 不是那么具体，

我在 php 中使用这样的代码

在`a.php`我使用这个代码

```
$_SESSION['sid']=session_id(); 
```

当我在时`b.php`，我正在回显会话 sid，然后像这样取消它..

```
echo $_SESSION['sid'];
unset($_SESSION['sid']); 
```

显示`d5tk0123nmj56`

当我再次访问 a.php 和 b.php 时，我再次得到相同的结果`d5tk0123nmj56`

shudnt 第二次会话 sid 不同？？？`b.php`因为我已经在..中取消了会话

```
EDIT: 
```

我正在测试它`localhost`

```
ANOTHER EDIT 
```

为了描述性地解释你们，..我正在使用购物车系统，首先我检查用户是否通过他的电子邮件ID登录，因此 $_session['logged_user']=user_email 是一个会话..我正在使用$_session['sid']=session_id() 作为识别购物车交易的唯一会话，在用户结账（支付）后，他可能会再次以登录状态购买东西，然后我必须再次检查他是否已登录（logged_user 因此需要存在），对于下一个事务，我想为他分配另一个值 $_SESSION['sid']=a new session_id();

据我所知（可能是我错了） session_destroy() 会杀死所有用户会话，这也会破坏会话 $_SESSION['logged_user'] ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:11:07.617

我认为您想破坏会话。尝试

```
session_destroy(); 
```

要重新生成会话 ID 尝试：

```
session_regenerate_id(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:23:51.130

您并没有以这种方式终止会话，您只是取消了一个保存会话 ID 的变量。如果你这样做了：

```
$unsetMe = session_id();
unset($unsetMe); 
```

您只需取消设置一个变量，就不会对会话进行任何操作。你需要使用：

```
session_destroy(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:17:29.153

这是因为用户仍然拥有相同的会话，从用户的角度来看，您绝不会结束它。您只是在服务器端取消设置一些会话数据。

会话 ID 通过 cookie（默认称为 PHPSESSID）发送到服务器。在`b.php`您取消设置服务器端的会话数据时，但下次用户访问`a.php`时，他们将发送相同的 cookie 并使用与以前相同的 ID 启动会话。

*   要取消设置服务器端会话数据，您应该使用[`session_destroy()`](http://php.net/manual/en/function.session-destroy.php). *（这不会更改会话 ID 或取消设置客户端 cookie）*
*   要生成新的会话 ID，您可以使用[`session_regenerate_id(true)`](http://php.net/manual/en/function.session-regenerate-id.php). *（这将使用新的会话标识符覆盖客户端 cookie。它不会破坏与会话关联的服务器端信息）*

要完全结束用户会话，您需要销毁服务器端信息、客户端 cookie 并生成新的会话标识符。这是一个简单的例子，

```
<?php
    session_start();    
    $_SESSION['blah'] = true;

    var_dump(session_id()); // q4ufhl29bg63jbhr8nsjp665b1
    var_dump($_SESSION);    // blah = true

    session_unset();
    session_destroy();
    setcookie("PHPSESSID", "", 1); // See note below
    session_start();
    session_regenerate_id(true);

    var_dump(session_id()); // gigtleqddo84l8cm15qe4il3q3
    var_dump($_SESSION);    // (empty)
?> 
```

标头将显示客户端更改的会话 ID：

> **请求头**
> Cookie:PHPSESSID=q4ufhl29bg63jbhr8nsjp665b1
> 
> **响应头**
> 设置-Cookie:PHPSESSID=deleted; expires=星期一，2010 年 12 月 27 日 16:47:57 GMT
> PHPSESSID=gigtleqddo84l8cm15qe4il3q3；路径=/

*（您可以在[`setcookie()`](http://php.net/manual/en/function.setcookie.php)此处不调用，因为无论如何您都在创建一个新会话，因此 cookie 将被新 ID 覆盖，但明确销毁旧 cookie 是一种很好的做法）。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T03:32:45.543

要生成新的会话 id 并将其存储在旧 id 的位置：

`$_SESSION['sid']=session_regenerate_id(true);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T03:11:45.603

您取消设置 server-global-var `$_SESSION['sid']`，而不是真正的会话 ID

用于`session_destroy();`“取消设置” session_id

[PHP: session_destroy() 手册](http://php.net/manual/de/function.session-destroy.php)

# php - 3 天后选择列

> ID：14189319
> 
> 赞同：-1
> 
> 时间：2013-01-07T03:08:47.473
> 
> 标签：php, mysql

我有一个 mysql 数据库，其中用户从 html5 表单元素“日期”（如果他们的浏览器不支持 html5，则为 2013-01-06）生成日期。我希望仅在 3 天过去后选择和输出日期。

我查看了堆栈溢出，发现了一些看起来很有希望的线程并提出了（table = files1，date column = datec）：

```
$query = "SELECT * FROM files1 WHERE DATEDIFF(day, now(), datec) >3";

$result = mysql_query($query,$con);

echo $result;

while($row = mysql_fetch_assoc($result)){

foreach($row as $name => $value){
    echo "$name: $value\t";

}//end foreach

}//end while 
```

但是，这会产生：“警告：mysql_fetch_assoc() 期望参数 1 是资源，给定的布尔值”，我发现它来自未执行的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:11:40.690

如果您的表中有一个创建/日期列，您可以使用 date_add 进行选择

试试 DATE_ADD

```
DATE_ADD(NOW(),INTERVAL 3 DAY) 
```

但要使用 datediff：

```
DATEDIFF(now(),$seconddategoeshere) 
```

# linq - MVC4 Razor 中的嵌套 Linq

> ID：14189320
> 
> 赞同：0
> 
> 时间：2013-01-07T03:08:55.447
> 
> 标签：linq, entity-framework, razor, asp.net-mvc-4

目前我正面临嵌套 linq 的问题。

这是我的表格，现在我正在开发 MVC4 Razor Web 应用程序。

```
student
student_id,studentname,description
book
book_id,student_id,bookname,checkitout
booker
bookerid,book_id,bookername,bookerdescription 
```

我创建了用于显示的模型

```
public class student_model{
    public int student_id {get;set;}
    public string studentname {get;set;}
    public string bookname {get;set;}
} 
```

大家好，这里是我的表格，现在我正在开发 MVC4 Razor Web 应用程序。我想为 booker 编写嵌套的 LINQ。所以我使用以下 LINQ：

```
public List<student_model> finder (int stuid){
    var stubk = (from stu in contx.students
        join bk in contx.books on stu.student_id equals bk.student_id
        where stu.student_id == stuid
        select new {
            //here is wrong
            student = from bker in contx.bookers
                where bker.book_id=bk.book_id
                select new student_model{
                    student_id = stu.student_id,
                    studentname = stu.studentname,
                    bookname = bk.bookname
                }   
        }).ToList();

    var next = stubk.Select(md=>md.student)

    return (List<student_model>) next;
} 
```

这是错误的嵌套 LINQ。那么我该怎么做才能制作过滤器`bookers.book_id = bk.book_id`呢？我应该如何返回（`List<student_model`）？

谢谢青蛙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:53:32.497

我认为您根本不需要为此使用 Bookers 课程。

此答案假定由于您使用的是实体框架，因此您在这些类上具有指向彼此的导航属性（即 Books 在其类上具有 Student 的属性，而 Student 在其类上具有 Books 的集合）。

使用 LINQ 扩展方法，您可以执行以下操作：

```
var studentModelList = new List<student_model> ();
contx.Students.Include("Books")
              .Where(stu => stu.student_id == stuid)
              .Select(stu => stu.Books).ToList()
              .ForEach(bookObj => 
                      studentModelList.Add(new student_model { student_id = bookObj.student.student_id, studentname = bookObj.student.studentname, bookname = bookObj.bookname}))
return studentModelList; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:53:15.850

删除嵌套并添加额外的连接

```
public List<student_model> finder (int stuid){
    var stubk = (from stu in contx.students
        join bk in contx.books on stu.student_id equals bk.student_id
        join bker in contx.bookers on bk.book_id equals bker.book_id
        where stu.student_id == stuid && bker.book_id=bk.book_id
                select new student_model{
                    student_id = stu.student_id,
                    studentname = stu.studentname,
                    bookname = bk.bookname
                }).ToList(); 
```

# c# - File.Delete(mapPathName) 不起作用 正在使用文件

> ID：14189324
> 
> 赞同：4
> 
> 时间：2013-01-07T03:09:35.650
> 
> 标签：c#, .net

```
WebClient webClient = new WebClient();
string mapPathName = Server.MapPath("\\images\\temp.jpg");
Uri uri = new Uri(mapLink);
webClient.DownloadFile(uri, mapPathName);
webClient.Dispose();
if (File.Exists(mapPathName))
    File.Delete(mapPathName); 
```

我使用上面的代码从谷歌地图下载了加密图像，但下载完成后，我无法删除该文件，因为它正在被使用。有人可以帮我解决这个问题吗？

啊啊啊啊啊啊啊。非常抱歉你们，我的错误。上面的代码有效，但是当我尝试在删除之前绘制时，这一次它不起作用。>_< 这里是代码：

```
PdfDocument document = new PdfDocument();
document.PageLayout = PdfPageLayout.SinglePage;
document.Info.Title = "Created with PDFsharp";

// Create an empty page
PdfPage page = document.AddPage();

// set size
page.Size = PageSize.A4;

// Get an XGraphics object for drawing
XGraphics gfx = XGraphics.FromPdfPage(page);

WebClient webClient = new WebClient();
string mapPathName = Server.MapPath("\\images\\temp.jpg");
Uri uri = new Uri(mapLink);
webClient.DownloadFile(uri, mapPathName);

// defind position to draw the image
XRect rcImage = new XRect(x + 30, y, 410, 300);

// draw the image
gfx.DrawRectangle(XBrushes.Snow, rcImage);
gfx.DrawImage(XImage.FromFile(Server.MapPath("\\images\\temp.jpg")), rcImage);

// save pdf file
string filename = "_HelloWorld.pdf";
string filePath = Server.MapPath(filename);
if (File.Exists(filePath))
    File.Delete(filePath);

document.Save(Server.MapPath(filename));

gfx.Dispose();
page.Close();
document.Dispose();

if (File.Exists(mapPathName))
    File.Delete(mapPathName); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:22:14.640

你打电话有什么特别的原因`Dispose`吗？这可能是原因。如果您坚持使用 dispose，请在调用 dispose 之前尝试将其删除。例如 。. .

```
webClient.DownloadFileCompleted += (o, s) =>
{
    //if (File.Exists(mapPathName)) discard, see Paolo's comments below . . .
       File.Delete(mapPathName);
};
webClient.DownloadFileAsync(uri, mapPathName);
webClient.Dispose(); 
```

你也考虑过`using`条款吗？这通常可以防止发生此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T09:15:50.990

我解决了我的问题。而不是使用

```
gfx.DrawImage(XImage.FromFile(Server.MapPath("\\images\\temp.jpg")), rcImage); 
```

我把它分成2行

```
var img = XImage.FromFile(Server.MapPath("\\images\\temp.jpg"));
gfx.DrawImage(img, rcImage); 
```

接着

```
img.Dispose; 
```

然后我可以删除图像：D 谢谢大家。

# postgresql - 设计用于存储音频文件标签的数据库

> ID：14189329
> 
> 赞同：1
> 
> 时间：2013-01-07T03:10:45.140
> 
> 标签：postgresql, database-design, normalization

我想建立一个数据库，其中包含一组音频文件（FLAC、Vorbis、MP3 等）的所有标签。我已经对提取进行了整理（这是最简单的部分），但现在我对如何正确设计包含它们的数据库有些疑问。

目前，我已将其标准化为简单的 1:m 关系：

```
file: filename, size, last_modified, …
tags: filename, tag, seq, value 
```

其中*文件名*是`file`表`( filename, tag, seq )`的主键和表的主键`tag`。有些标签确实出现了不止一次；该`seq`列只是一个数字，可以记住它们的确切顺序。

然而，通过这样的设计，提取有关文件的有意义的信息变得非常痛苦。例如，如果我只想为每个轨道设置`ARTIST`, `ALBUM`AND `TITLE`字段，我已经必须加入`file`and`tags`表三次：

```
SELECT filename, artist.value, album.value, title.value
FROM file
    LEFT OUTER JOIN tags artist USING ( filename )
    LEFT OUTER JOIN tags album USING ( filename )
    LEFT OUTER JOIN tags title USING ( filename );
WHERE
    artist.tag = 'ARTIST'
    AND album.tag = 'ALBUM'
    AND title.tag = 'TITLE'; 
```

毫无疑问，这不仅写起来非常麻烦，而且由于所有这些连接，速度也很慢。这只是一个简单的例子。实际上，我最终想要提出的所有查询都会将它们需要的所有标签拼凑在一起，就好像它们被存储为一个大表的列一样。

我已经考虑过不对标签进行规范化，而是将它们保留为表格的列`FILE`。但是标签的数量是高度可变的；一些更标准的标签，例如`ARTIST`并且`TITLE`几乎可以保证存在，一些更晦涩的标签仅在某些文件上，但我也需要使用它们。

对我来说，看起来我正在尝试以错误的方式进行操作，尤其是`tags` 表格是“结构化的”。有没有更好的方法来处理这种数据？供参考：我正在使用 PostgreSQL。

我从[这篇文章](https://stackoverflow.com/questions/1051055/how-to-store-meta-data-on-columns)中得知，我上面的架构是一个[EAV 模型](http://en.wikipedia.org/wiki/Entity-Attribute-Value_model)，所以看起来我要解决一个相当困难的问题……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:23:11.513

> 但是标签的数量是高度可变的；一些更标准的标签，如 ARTIST 和 TITLE 几乎可以保证存在，一些更晦涩的标签只在一些文件上，但我也需要使用它们。

您可以为（大部分）保证标签使用单独的表格，并为可选标签使用 EAV 模型。

关系数据库旨在连接表。在您真正遇到性能问题之前，不要担心连接的性能问题。担心让您的数据关系正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T20:33:46.133

我不只是坚持使用 EAV 模型并让 DBMS 整理产生的连接丛林，我发现了将所有标记作为 XML 文档存储在单个列中并在提取值时通过 XPath 查询它的建议。PostgreSQL 的[HSTORE](http://www.postgresql.org/docs/8.3/static/hstore.html)基本上遵循相同的想法。

这样，我摆脱了 EAV 结构，但还有其他缺点。`HSTORE`对标签值的大小有一些相当严格的限制，并且 XML 在存储和解析方面都造成了很大的开销。

最后，带有所有 s 的“原始”查询`JOIN`比复杂的 XML/Xpath 内容或`HSTORE`. 因此，接受答案的建议似乎是最好的。

# knockout.js - 淘汰赛：未捕获的类型错误：对象 databaseViewModel.openList(this) 没有“应用”方法

> ID：14189339
> 
> 赞同：2
> 
> 时间：2013-01-07T03:11:46.950
> 
> 标签：knockout.js

我有这样的代码

```
var databaseViewModel = new function () {
    var self = this;
    self.databaseList = ko.observable("");
    self.id = ko.observable("");
    self.databaseSelected = ko.observable("");
    self.description = ko.observable("description");

    self.openList = function () {
        alert("openList");
    };
} 
```

html：</p>

```
<div data-bind="foreach: databaseList">
                <li><a href="javascript:void(0)" data-bind="click:'databaseViewModel.openList(this)',  attr: {   title: DataBaseName }">
                    <span class="pic1"></span><span data-bind="text:DataBaseName"></span></a></li>
                <div data-bind="attr: { 'data-something': DataBaseName }">
                    ...</div>
            </div> 
```

> 我想点击链接DataBaseName时调用openlist，如何修改代码？</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:51:15.193

你想做`data-bind="click: $parent.openList"`

查看这些文档以获取有关`$parent`您可以使用的其他特殊变量的更多信息：http: [//knockoutjs.com/documentation/binding-context.html](http://knockoutjs.com/documentation/binding-context.html)

# jquery - 搜索 0 时 Jquery 索引返回 -1

> ID：14189340
> 
> 赞同：1
> 
> 时间：2013-01-07T03:11:51.837
> 
> 标签：jquery

为什么jQuery索引为数组中的0返回-1？

```
var myArray = [0,4,8];
document.write('<br/>8 is at index : ' + $(myArray).index(8));
document.write('<br/>4 is at index : ' + $(myArray).index(4));
document.write('<br/>0 is at index : ' + $(myArray).index(0)); 
```

[http://jsfiddle.net/JohnNeed/WGPMa/1/](http://jsfiddle.net/JohnNeed/WGPMa/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:13:32.727

> 为什么jQuery索引返回数组中的`-1`a ？`0`

因为你用错了。您使用 jQuery 对象构造函数包装它。*jQuery 期望它的索引槽包含真实*的对象（对 DOM 元素的引用）。因此，当您传入 时`0`，它是*falsy*，并且第一个条件失败（只需要*真实*的参数；jQuery 旨在处理不传递的参数）。

```
// No argument, return index in parent
if ( !elem ) {
    return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
} 
```

[来源](https://github.com/jquery/jquery/blob/master/src/traversing.js#L101)

如果您从`0`(falsy) 更改为`5`(truthy)，[它会按预期工作](http://jsfiddle.net/ZgAZc/)。

如果要在数组中查找某些内容的索引，`indexOf()`请在普通数组上使用。如果您*必须*使用 jQuery，请使用[`$.inArray()`](http://api.jquery.com/jQuery.inArray/)（这确实具有在`Array.prototype.indexOf()`不存在的地方工作的优势）。

# ios - 如何检查适用于 iOS 框架的 AWS 开发工具包的版本？

> ID：14189342
> 
> 赞同：4
> 
> 时间：2013-01-07T03:12:02.050
> 
> 标签：ios, amazon-s3

*我在AWSiOSSDK.framework*的任何头文件中都没有看到它。我正在寻找这里使用的版本格式（例如版本 1.4.4）：

[http://aws.amazon.com/releasenotes/iOS](http://aws.amazon.com/releasenotes/iOS)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T08:38:53.913

该主题已在最近的一篇博客文章中进行了介绍，请参阅[获取有关 AWS 移动开发工具包的元数据](http://mobile.awsblog.com/post/Tx1L1QXV0CNECD2/Getting-Metadata-about-the-AWS-Mobile-SDKs)：

> AWS 移动开发工具包提供了捕获有关开发工具包执行环境的详细信息的功能。这些详细信息包括 SDK 版本、移动平台和平台区域设置。此信息可用于诊断问题并帮助准确了解您正在测试/运行的内容。

请查看帖子以获取详细信息和示例，例如，为了使用[适用于 iOS 的 AWS](http://aws.amazon.com/sdkforios/)开发工具包在应用程序的调试日志中捕获元数据，您显然只需要包含以下代码行：

```
NSLog( @"SDK Details: %@", [AmazonSDKUtil userAgentString] ); 
```

# php - php 文件：// 包装器

> ID：14189344
> 
> 赞同：2
> 
> 时间：2013-01-07T03:12:11.867
> 
> 标签：php

我读了一本书来构建一个 Web 服务，并在 PHP 中遇到了“协议和包装器”的概念。跳入 PHP.net 文档，我第一次看到文件包装器并真的卡住了。此外，该文件没有它的例子。

你能给我一些真实的例子来帮助我理解文件包装器吗？如果你能通过给出一些例子来解释它会很棒，因为我对这个概念完全陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:15:56.163

我认为包装器的[文档](http://php.net/manual/en/wrappers.file.php)`file://`非常清楚。这实际上与通过离开来引用文件时相同`file://`。例如：

```
file('file:///path/to/file.txt');
file('/path/to/file.txt'); 
```

以上两个是等价的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:16:40.247

包装器`file://`很奇怪而且毫无意义。*您可以放心地忘记它曾经存在过。

一个更明显有用的包装器是`http://`包装器，它允许您像文件一样打开和读取远程 HTTP 资源：

```
$fh = fopen("http://www.google.com/", "r"); 
```

即使在这种情况下，通常最好使用专门构建的库（如 cURL）来访问 HTTP 资源，因为它能够更好地表示 HTTP 的一些怪癖。话虽如此，`http://`包装器可以方便地进行快速原型设计。

*：直接打开文件是完全多余的，不涉及包装。我没有理由想象你会使用它。

# spring - Mybatis App运行时出现MalformedParameterizedTypeException

> ID：14189345
> 
> 赞同：0
> 
> 时间：2013-01-07T03:12:20.540
> 
> 标签：spring, mybatis

这是堆栈跟踪：

上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建 ServletContext 资源 [/WEB-INF/applicationContext.xml] 中定义的名称为“sqlSessionFactory”的 bean 时出错：bean 初始化失败；嵌套异常是 java.lang.reflect.MalformedParameterizedTypeException

我使用了带有 mybatis-spring 1.1.1 的库，并添加了 spring-web-3.1.1.RELEASE.jar。我的 IDE 是 JDeveloper 11.1.2.1.0。这是 WEB-INF/lib 的内容

aopalliance-1.0.jar
commons-logging-1.1.1.jar jettison
-1.1.jar
mybatis-3.1.1.jar mybatis
-spring-1.1.1.jar mybatis
-spring-1.1.1-javadoc.jar
mybatis-spring- 1.1.1-sources.jar
spring-aop-3.1.1.RELEASE.jar
spring-asm-3.1.1.RELEASE.jar
spring-batch-core-2.1.8.RELEASE.jar
spring-batch-infrastructure-2.1。 8.RELEASE.jar
spring-beans-3.1.1.RELEASE.jar
spring-context-3.1.1.RELEASE.jar
spring-core-3.1.1.RELEASE.jar
spring-expression-3.1.1.RELEASE.jar
spring -jdbc-3.1.1.RELEASE.jar
spring-tx-3.1.1.RELEASE.jar
spring-web-3.1.1.RELEASE.jar
xpp3_min-1.1.4c.jar
xstream-1.3.jar

这是 applicationContext.xml 的内容

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${driverClassName}"/>
    <property name="url" value="${url}"/>
    <property name="username" value="${username}"/>
    <property name="password" value="${password}"/>
</bean>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="typeAliasesPackage" value="ph.com.aub.util"/>
</bean>

<bean class="org.mybatis.spring.mapper.MapperScannerConfigurer">
    <property name="basePackage" value="ph.com.aub.mappers" />
</bean>

<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<property name="location">
<value>classpath:jdbc.properties</value>
</property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:21:44.580

我认为您使用了错误的库：您应该使用 mybatis-3.1.0

[spring-mybatis-集成](http://anirbanchowdhury.wordpress.com/2012/05/14/spring-mybatis-integration-part-1/)

# java - 识别数组中的连接元素

> ID：14189353
> 
> 赞同：0
> 
> 时间：2013-01-07T03:13:41.317
> 
> 标签：java, performance, recursion, multidimensional-array

所以我试图解决这个问题是给定一个数字网格，我希望在网格中有一个偶数的位置，通过这个位置，它会找到所有其他连接到它的偶数元素。

这张照片显示了我要描述的内容。图片假设我有**6的位置** ![在此处输入图像描述](../Images/a82e07ce330074c2a03897c024ec6e8e.png)

![在此处输入图像描述](../Images/c9e89a55346fb99ca182f6e15551ee55.png)

这是我写的代码我几乎可以肯定它可以工作我只是想看看是否有任何方法可以提高效率

```
getLinksEven(grid,0,1);
static void getLinksEven(Server[][] grid, int k, int j)
{
    try{
        if(grid[k-1][j].isEven()&& !grid[k-1][j].isCracked()){
            grid[k-1][j].setCracked(true);
            getLinksEven(grid,k-1,j);
        }

    }
    catch(ArrayIndexOutOfBoundsException a)
    {
        //do nothing
    }
    try{
        if(grid[k][j-1].isEven()&& !grid[k][j-1].isCracked()){
            grid[k][j-1].setCracked(true);
            getLinksEven(grid,k,j-1);

        }

    }
    catch(ArrayIndexOutOfBoundsException a)
    {
        //do nothing
    }

    try{
        if(grid[k+1][j].isEven()&& !grid[k+1][j].isCracked()){
            grid[k+1][j].setCracked(true);
            getLinksEven(grid,k+1,j);

        }

    }
    catch(ArrayIndexOutOfBoundsException a)
    {
        //do nothing
    }
    try{
        if(grid[k][j+1].isEven()&& !grid[k][j+1].isCracked()){
            grid[k][j+1].setCracked(true);
            getLinksEven(grid,k,j+1);

        }

    }
    catch(ArrayIndexOutOfBoundsException a)
    {
        //do nothing
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:20:25.020

我认为您正在测试不需要测试的节点：。我会看到每个方向的四个功能：

```
// you'll need four methods just like this one. This one goes up, you'll need
// one that goes down, another left and a forth right...
static void iterUp(Server[][] grid, int k, int j)
{
    // working with a local variable is easier to read and debug...
    // you may wish to consider it.
    Server cell = grid[k][j]
    if(!cell.isEven() && !cell.isCracked())
    {
        cell.setCracked(true)
        if(k >= 1)
        {
            iterLeft(grid, k-1,j)
        }
        if(k < grid.length - 2)
        {
            iterRight(grid, k+1)
        }
        if(j < grid[k].length - 2)
        {
            iterUp(grid, k, j+1)
        }
        // no point in going down, because we know that down is checked already.
    }
} 
```

然后我会定义原始函数：

```
static void getLinksEven(Server[][] grid, int k, int j)
{
    if(grid.length < k - 1 || grid[k].length < j - 1)
    {
        throw new ArrayIndexOutOfBoundsException("Not funny.");
    }
    // if this cell isn't even... who cares?
    if(!grid[k][j].isEven()) return;

    // Send the four on their merry way.
    iterUp(grid,k,j);
    iterDown(grid,k,j);
    iterLeft(grid,k,j);
    iterRight(grid,k,j);
} 
```

这将为您节省至少¹ / [4]`isEven()`的数组查找，并可能节省尽可能多的对and的调用`isCracked()`。

# python-2.7 - python脚本创建另一个python脚本（或python可执行文件）

> ID：14189354
> 
> 赞同：0
> 
> 时间：2013-01-07T03:13:56.223
> 
> 标签：python-2.7

作为我的代码的一部分，我想编写一个 python 方法，当它被调用时，它会创建一个可执行文件。（我可以用 python 的解释器执行的另一个脚本也很好）。

这个最终的脚本几乎是固定的，除了一些只有我的方法知道的输入对象，它们是最终可执行文件工作所必需的（例如字典）。如何将这些对象链接到最终的可执行文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:17:22.557

这听起来像是一些模板引擎的工作。[以金贾](http://jinja.pocoo.org/)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T22:32:20.000

您还可以使用[pickle](http://docs.python.org/2/library/pickle.html)序列化/反序列化（保存/加载）其他可执行文件将使用的数据。

# javascript - 在 node/javascript/underscore 中过滤大型数据集

> ID：14189360
> 
> 赞同：0
> 
> 时间：2013-01-07T03:14:27.233
> 
> 标签：javascript, node.js, underscore.js

我有大量私有云中虚拟机的使用记录数据集。每小时都会为我的云中运行的每个 VM 生成这组记录。VM 都有一条记录，其中包含 RAM、内存等规格，并有一个 id: 字段对应于使用记录中的 virtualmachineid。我可以查询 API 并取回 XML 或 JSON 数据集，我选择了 JSON，因为它在线上更轻量级。

这是一条记录，有 13 种使用情况，分别对应磁盘使用情况、带宽、运行时间等：

```
Usage Record:                                                                    
  { account: 'user_1',                                                           
    accountid: 'c22ed7ed-e51a-4782-83a7-c72e2883eb99',                             
    domainid: 'f88d8bbf-a83b-4be1-a788-e2ab51eb9973',                              
    zoneid: '4a7f62a8-3248-47ee-bf94-d63dac2a6668',                                
    description: 'VM2 running time (ServiceOffering: 11) (Template: 215)',         
    usage: '1 Hrs',                                                                
    usagetype: 1,                                                                  
    rawusage: '1',                                                                 
    virtualmachineid: 'f6661f34-4d03-4128-b738-38c330f2499c',                      
    name: 'VM2',                                                                   
    offeringid: 'f1d82c2e-25e3-4c97-bae8-b6f916860faf',                            
    templateid: '2bf2e295-fdd6-4326-a652-6d07581be070',                            
    usageid: 'f6661f34-4d03-4128-b738-38c330f2499c',                               
    type: 'XenServer',                                                             
    startdate: '2012-12-25\'T\'22:00:00-06:00',                                    
    enddate: '2012-12-25\'T\'22:59:59-06:00' } 
```

我正在尝试做的事情：

我需要浏览 VM 列表，其中将有数百个，并且为每个 VM 构建上一期的使用情况报告，通常为一个月，但也可以是临时的。因此，在每个 VM 每月 10000 多条使用记录中，我需要计算每种使用类型的总数。

有没有比传统的循环循环循环再循环方法更有效、更新颖的方法？在伪代码中：

```
for (each vm in vms)
    for (each usage_record in usage_records)
        if (vm.id === usage_record.vmid)
            switch usage_record.usage_type
                case 1: its runtime
                case 2: its disk usage
                case 3: its some other type of usage
                ... 
```

使用下划线，这是我到目前为止所做的：

```
_.each(virtualMachines.virtualmachine, function (vm) {   
    var recs = _.filter(usageList.usagerecord, function (foo) { 
        return (foo.virtualmachineid === vm.id && foo.usagetype === 1); 
    });
        console.log("recs count:" + recs.count); 
        //now, recs contains all the usage record type 1 for one VM  

 }); 
```

现在工作正常，但我不相信它已经优化并且不会随着 VM 数量的增加而扩展。对于每台虚拟机，数据集中都会添加 10,000 条额外的使用记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T13:22:41.723

由于您需要处理每个 VM**并**需要每个 VM 的结果，因此我首先按 VM 对列表进行排序。之后，您应该只需要一个循环和一个“当前 VM 统计信息”对象。一旦您遇到列表中的下一个虚拟机，您就知道当前的统计信息是完整的。

```
sortRecordsByVM();
currentStats = { runtime: 0, disk: 0, other: 0 };
currentVM;
for each record
  if currentVM != record.VM
    writeToOutput(currenStats);
    currentStats = { runtime: 0, disk: 0, other: 0 };
  addRecordTo(record, currentStats);
writeToOutput(currenStats); 
```

也就是说：我不认为迭代超过 10K 记录会给现代机器带来问题，所以我会从最简单的方法开始，只在出现性能问题时进行优化。

我只是不使用嵌套循环，而是将查找留给内置数据结构（通常比我倾向于第一次尝试编写的任何代码都更优化）：

```
allStats = {};
for each record
  stats = allStats[record.VM];
  if (!stats)
    stats = { runtime: 0, disk: 0, other: 0 };
  addRecordTo(record, stats);
  allStats[record.VM] = stats; 
```

# objective-c - 动画图像视图向上滑动

> ID：14189362
> 
> 赞同：8
> 
> 时间：2013-01-07T03:14:35.243
> 
> 标签：objective-c, ios, cocoa-touch, animation, uiviewanimation

我正在尝试使图像视图（`logo`下图）向上滑动 100 像素。我正在使用这段代码，但什么也没发生：

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:3];
logo.center = CGPointMake(logo.center.x, logo.center.y - 100);
[UIView commitAnimations]; 
```

此代码在`viewDidLoad`方法中。具体来说，`logo.center = ...`它不起作用。其他事情（例如更改 alpha）可以。也许我没有使用正确的代码将其向上滑动？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-07T04:47:49.423

对于非自动布局故事板/NIB，您的代码很好。顺便说一句，现在通常建议您使用[blocks](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW109)制作动画：

```
[UIView animateWithDuration:3.0
                 animations:^{
                     self.logo.center = CGPointMake(self.logo.center.x, self.logo.center.y - 100.0);
                 }]; 
```

或者，如果您想对选项等进行更多控制，您可以使用：

```
[UIView animateWithDuration:3.0
                      delay:0.0
                    options:UIViewAnimationCurveEaseInOut
                 animations:^{
                     self.logo.center = CGPointMake(self.logo.center.x, self.logo.center.y - 100);
                 }
                 completion:nil]; 
```

但是如果您不使用自动布局，您的代码应该可以工作。只是上面的语法是 iOS 4 及更高版本的首选。

如果您使用自动布局，您 (a)`IBOutlet`为您的垂直空间约束创建一个（见下文），然后 (b) 您可以执行以下操作：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    static BOOL logoAlreadyMoved = NO; // or have an instance variable

    if (!logoAlreadyMoved)
    {
        logoAlreadyMoved = YES; // set this first, in case this method is called again

        self.imageVerticalSpaceConstraint.constant -= 100.0;
        [UIView animateWithDuration:3.0 animations:^{
            [self.view layoutIfNeeded];
        }];
    }
} 
```

要为约束添加一个`IBOutlet`，只需`control`在助手编辑器中从约束 -drag 到您的 .h ：

![为垂直约束添加 IBOutlet](../Images/9548713a315e07bbfa143cbce6c51c18.png)

顺便说一句，如果您正在为约束设置动画，请注意您可能已链接到该图像视图的任何其他约束。通常，如果您将某些东西放在图像的正下方，它的约束将链接到图像，因此您可能必须确保没有任何其他对图像有约束的控件（除非您也希望它们移动） .

您可以通过打开故事板或NIB然后选择“文件检查器”（最右侧面板上的第一个选项卡，或者您可以通过按`option`+ `command`+ `1`（数字“1”）将其拉起来判断您是否使用自动布局):

![自动布局开启](../Images/d6c0b78bb5be03fc7714f0720ba835e2.png)

请记住，如果您计划支持 iOS 6 之前的版本，请确保关闭“自动布局”。自动布局是 iOS 6 的一项功能，不适用于早期版本的 iOS。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T04:23:14.410

你试试

```
logo.frame = CGRectMake(logo.frame.origin.x, logo.frame.origin.y - 100,logo.frame.size.width,logo.frame.size.height) 
```

# google-maps-api-2 - 已弃用的 Google Maps JavaScript API V2 有什么影响？

> ID：14189366
> 
> 赞同：2
> 
> 时间：2013-01-07T03:15:12.530
> 
> 标签：google-maps-api-2

我有一个客户端在其网站上使用 JavaScript API v2 使用 Google 地图，根据 [https://developers.google.com/maps/documentation/javascript/ ，该客户端最终将在 2013 年 5 月 19 日之前被弃用（停止/不支持） v2/简介](https://developers.google.com/maps/documentation/javascript/v2/introduction)

**我只想知道如果我在 5 月 19 日之前还没有将我的代码升级到 JavaScript API v3，对网站有什么*影响***？例如，我的 Google Map API v2 会停止工作吗（因为 Google 已将 v2 API 下线）

我问这个问题是因为我有 6 个网站需要升级到 API v3，并且可能无法在 5 月 19 日之前赶上截止日期。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:56:39.883

一种可能的含义是 Google Web Toolkit，它在 Google Maps v3 中不受（也不会）支持。如果您有一个使用 GWT 构建的复杂的大型站点，使用 v2 并且您还没有重写您的站点..您可能会遇到[麻烦](http://www.advrider.com/forums/showpost.php?p=20945810&postcount=1572)。

# java - Java烦人的语法错误

> ID：14189368
> 
> 赞同：-2
> 
> 时间：2013-01-07T03:15:30.087
> 
> 标签：java, syntax-error

我是 Java 新手，我正在尝试制作一个 lvling 系统。到目前为止，我的代码是：

```
 import java.util.*;
class Player
{
    private String Name;
    private int Level;
    private int EXP;
    int NextGoaltoLvl = 1000;

    public Player(String n, int lvl, int xp) 
    {
        Name = n;
        Level = lvl;
        EXP = xp;
    }
    public void printStats()
    {
        System.out.println("Name: " +Name);
        System.out.println("Level: " +Level);
        System.out.println("Exp: " + EXP);
    }
    public void addLevel(int addlvl)
    {
        Level += addlvl;
        System.out.println("Congratulations,"+ Name +",you have leveled up to " + Level + "!");
    }
    public void addExp(int num)
    {
        EXP += num; 
        if (EXP == NextGoaltoLvl)
        {
            addLevel(1); NextGoaltoLvl += 1000; EXP = 0; 
        }
    }
}
public class MainC 
{
    public static void main(String[] args) 
    {
        Player Player01 = new Player("kert109",1,0);
        for (int i = 0; i >= 10000; i++)
        {
            Player01.addExp(1);
        }
        Player01.printStats();
    }
} 
```

`Player01.printStats();` 我这里仍然有错误。说：语法错误，插入“}”来完成ClassBody。

我不知道出了什么问题。帮助？我曾经检查过“{”和“}”。我也清理过代码。（使用 Eclipse。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:19:40.850

我看到两个错误：

1\. Near `addExp`，方法外有`while`循环，是语法错误。无论如何，这个循环的目的是什么？这是一个无限循环，它的主体中没有任何`break`s 或`return`s - 它实际上应该永远持续下去吗？

2.

```
for (int i; i >= 10000; i++)
{
    Player01.addExp(1);
} 
```

你忘了在`i`这里初始化。虽然，这个循环没有意义，但您的条件询问是否`i`大于*其他值*，但您在每次迭代 ( `i++`) 时递增它。你想在这里做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:22:05.747

1) For 循环有一个错误，因为您在`int i`没有指定它的初始值的情况下启动了它。

```
for( int i = yourInitialValue; i >=  10000; i++ ) 
```

2)

```
public void addExp(int num)
    {
        EXP += num;
    }
    while (true)
    {   
        if (EXP == NextGoaltoLvl)
        {
            addLevel(1); NextGoaltoLvl += 1000; EXP = 0; 
        }
    } 
```

while 循环在您的 addExp 方法之外。您可能希望它在哪里：

```
public void addExp(int num){

        EXP += num;

        while (true)
        {   
            if (EXP == NextGoaltoLvl)
            {
                addLevel(1); NextGoaltoLvl += 1000; EXP = 0; 
            }
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T03:18:51.840

代替

```
public void addExp(int num)
{
    EXP += num;
}
while (true)
{   
    if (EXP == NextGoaltoLvl)
    {
        addLevel(1); NextGoaltoLvl += 1000; EXP = 0; 
    }
} 
```

（**无限循环**？**在所有功能代码之外**？**编译错误**+**逻辑错误**）

我想你想要

```
public void addExp(int num)
{
    EXP += num;

    if (EXP == NextGoaltoLvl)
    {
        addLevel(1); NextGoaltoLvl += 1000; EXP = 0; 
    }
} 
```

（如果 XP 达到新的 XP 级别，则增加级别）

AR S 指出了你的 for 循环的另一个严重问题。

代替

```
for (int i; i >= 10000; i++)
    { 
```

你要

```
for (int i = 0; i <= 10000; i++)
    { 
```

要不就

```
 Player01.addExp(10000); 
```

如果你想做的是给玩家**增加 10000 XP**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T03:20:17.077

您的 while 循环不在方法中。这是一个修改后的 addExp 方法。

```
public void addExp(int num)
{
    EXP += num;

    if (EXP == NextGoaltoLvl)
    {
        addLevel(1); NextGoaltoLvl += 1000; EXP = 0;
    }
} 
```

您也没有`i`在 main 方法中进行初始化。同样重要的是要注意`i >= 10000`总是返回 false。您的 for 循环可能应该修改为：

```
for (int i = 0; i < 10000; i++)
{
    Player01.addExp(1);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T03:20:18.540

您需要将 while 循环放在方法 addExp 中，并在您的一个 for 循环中将 i 初始化为 0

```
 public void addExp(int num)
{
    EXP += num;
    while (true)
    {   
        if (EXP == NextGoaltoLvl)
        {
            addLevel(1); NextGoaltoLvl += 1000; EXP = 0; 
        }
    }
}

public static void main(String[] args) 
{
    Player Player01 = new Player("kert109",1,0);
    for (int i=0; i >= 10000; i++)
    {
        Player01.addExp(1);
    }
    Player01.printStats();
} 
```

# core-data - 为什么没有绘制 Mapkit 位置？

> ID：14189375
> 
> 赞同：0
> 
> 时间：2013-01-07T03:16:30.873
> 
> 标签：core-data, mkmapview, mapkit

我有一个从 Parse.com 获取数据并将其写入磁盘的应用程序。我可以看到它写在 xcode 日志中。进入核心数据。然后它从 CD 创建一个查询并填充一个数组以在 tabbarcontroller 的一个选项卡中的表视图中显示位置，另一个查询从 cd 获取这些位置并在 mapkit 上注释（引脚）。

由于某种原因，该应用程序在我第一次运行时不会绘制任何引脚。我必须关闭它（背景），然后重新打开它以显示引脚。

如果数据是从网络上获取到 CD 中的，我可以看到这正在发生（只有 2 个点），并且在所有数据都写入磁盘（CD）之后，我继续点击将这些点绘制在地图套件...他们为什么不第一次绘制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T03:14:55.983

我在 viewDidLoad 方法中从 CD 获取数据，该方法立即填充了我的位置数组。当我尝试绘制它们时，数组是空的，因为视图加载速度比 CD 获取填充数组的速度快：) 我不得不使用 NSNotification 重新填充数组。

# github - Github 上的 Apache Kafka

> ID：14189376
> 
> 赞同：2
> 
> 时间：2013-01-07T03:16:31.173
> 
> 标签：github, message-queue, apache-kafka

在 Github（或其他地方）上是否有一些使用 Apache Kafka（首选 0.8 版）的好的演示项目？我们一直在用一些玩具项目对其进行测试。但我想看看一些现实世界中更大的项目。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T09:32:52.937

玩具项目与演示项目一样好。编写自己的简单生产者/消费者会很有趣。您可以创建自己的演示项目（这样做的同时您会学到很多东西）。考虑一个需要大量流数据的问题（想想正在运行的应用程序的日志）。现在让 Kafka 读取这些日志。Kafka 只是一种消息队列。除非您写给您的消费者，否则我认为不会有任何乐趣。因此，对于现实世界的消费者提货来说，Twitter Storm。将应用程序的所有日志行发送到 Storm Consumer（又名 Kafka Spout）拾取这些行并将它们发送到 Bolts 的代理（Spout/Bolt 是 Storm 术语，类似于 Map Reduce，但用于实时）。

这样，您将拥有一个完整的演示应用程序。

现在主要问题。如何生成日志以提供给 Kafka（对于演示项目，如果您没有任何应用程序）。有大量可用的庞大数据集（开源）。从 Youtube 到亚马逊再到 Twitter，都提供它们。只需下载它并考虑一些应用程序。例如，考虑 Youtube 视频日志 ( [http://netsg.cs.sfu.ca/youtubedata/](http://netsg.cs.sfu.ca/youtubedata/) )。模拟他们即将上线。将它们输入到 Kafka。让 Storm Consumer（或 Kafka Spout）从 Kafka 代理中为您选择该日志行。将每一行日志提供给 Bolt，其中 Bolt 只是读取该行（进行一些分析）并计算最近 X 分钟内观看的视频的最热门/趋势类型。

编写所有这些应该不会花费太多时间。享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T13:34:15.733

你可以试试这个[https://github.com/wurstmeister/storm-kafka-0.8-plus](https://github.com/wurstmeister/storm-kafka-0.8-plus) 使用 0.8 构建

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T16:15:46.810

我很长一段时间一直在使用kafka。我正在使用[franz-kafka](https://github.com/dannycoates/franz-kafka) nodejs 客户端来实现 pubsubhubbub 规范。

我也没有找到任何使用 kafka 的项目，但是您可以问我任何问题，我会尽力回答。
谢谢

# c++ - 从打印机访问文件

> ID：14189377
> 
> 赞同：-2
> 
> 时间：2013-01-07T03:16:32.763
> 
> 标签：c++, printing

我想知道，有没有办法访问要打印的文件。假设我有一个带有打印按钮的软件。如果我单击打印按钮，它将调用打印机进行打印。在这些过程中，我可以从打印机驱动程序或任何其他来源获取文件吗？

问候安西夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:21:39.990

程序不会将“文件”发送到打印机。对于 PostScript 和 PCL 打印机，程序会向打印机发送命令，例如“在点 (10,23) 处绘制文本“foobar””。

过去 17 年左右的现代（尤其便宜）打印机通常是 GDI 打印机，其中程序使用 Windows 的 GDI 功能将打印页面“绘制”到光栅缓冲区，然后将其发送到打印机，这使得打印机更便宜因为他们不需要内置的命令解释器和处理器。

因此，要回答您的问题“否”，您无法访问要打印的文件，因为它们不存在。

# maven - 编译错误，包 javax.ws.rs 不存在，依赖项未从 maven 解析

> ID：14189380
> 
> 赞同：24
> 
> 时间：2013-01-07T03:16:45.973
> 
> 标签：maven

我在pom文件中提到了依赖库，库系统路径也存在，但是在使用maven clean install -e -X编译的过程中，它会抛出错误，说包不存在。

```
**[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /C:/Users/gopc/workspace/RestfulService/src/restfu/Hello.java:[4,19] C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:4: package javax.ws.rs does not exist
[ERROR] /C:/Users/gopc/workspace/RestfulService/src/restfu/Hello.java:[5,19] C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:5: package javax.ws.rs does not exist
[ERROR] /C:/Users/gopc/workspace/RestfulService/src/restfu/Hello.java:[6,19] C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:6: package javax.ws.rs does not exist
[ERROR] /C:/Users/gopc/workspace/RestfulService/src/restfu/Hello.java:[8,1] C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:8: package javax.ws.rs.core does not exist
[ERROR] /C:/Users/gopc/workspace/RestfulService/src/restfu/Hello.java:[21,2] C:\Users\gopc\workspace\RestfulService\src\restfu\Hello.java:21: cannot find symbol
symbol: class Path** 
```

## **POM 文件**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>RestfulService</groupId>
  <artifactId>RestfulService</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <build>
    <sourceDirectory>${basedir}/src</sourceDirectory>
    <outputDirectory>${basedir}/build/classes</outputDirectory>
  <pluginManagement>

    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.0</version>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
</pluginManagement>

</build>

<dependencyManagement>
<dependencies>

  <dependency>
    <groupId>jersey-server</groupId>
    <artifactId>jersey-server</artifactId>
    <version>1.4</version>
    <scope>compile</scope>
    <systemPath>${basedir}/lib/jersey-server-1.4.jar</systemPath>
  </dependency>

<dependency>
        <groupId>javax.ws.rs</groupId>
        <artifactId>javax.ws.rs</artifactId>
        <version>1.4</version>
        <scope>system</scope>
        <systemPath>${basedir}/lib/javax.ws.rs.jar</systemPath>
</dependency>
</dependencies>
</dependencyManagement>
</project> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-07T03:43:29.697

您需要在您的 POM 中包含 Java EE 依赖项，并带有一个`provided`范围（也就是说，这些文件*最终*将由应用程序服务器提供，但同时我需要它们进行编译）。

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-web-api</artifactId>
    <version>6.0</version>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-12T11:58:27.170

在系统更新后，当 NetBeans 更改字体和一般的 GUI 时，我遇到了这个和更多类似的问题。我已经通过添加`Java EE 6 API Library`NetBeans IDE解决了这个问题

`myProject->Properties->Libraries->Add Library`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-13T09:28:22.293

我认为这种依赖更好

```
<dependency>
    <groupId>javax.ws.rs</groupId>
    <artifactId>jsr311-api</artifactId>
    <version>1.1.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-04-17T14:43:05.137

@Perception 回复的依赖项也是需要的，但这对我来说也不够。还需要以下依赖项：

```
<dependency>
    <groupId>javax.ws.rs</groupId>
    <artifactId>javax.ws.rs-api</artifactId>
    <version>2.0</version>
</dependency> 
```

[https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api/2.0](https://mvnrepository.com/artifact/javax.ws.rs/javax.ws.rs-api/2.0)

Τ他为我解决了问题！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T06:50:20.943

我通过在`<project>`标签之间添加依赖项而不是在依赖项管理中解决了这个问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-07T03:43:42.660

Jersey 发布在 java.net 存储库中；只需使用它（或更好地编辑您的用户 settings.xml）：

```
<repositories>
    <repository>
        <id>maven2-repository.java.net</id>
        <name>Java.net Repository for Maven</name>
        <url>http://download.java.net/maven/2/</url>
        <layout>default</layout>
    </repository>
</repositories>

<dependencies>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-server</artifactId>
        <version>1.8</version>
    </dependency>
</dependencies> 
```

[JSR311](http://download.java.net/maven/2/javax/ws/rs/jsr311-api/) (javax.ws.rs) 将由 maven 作为 jersey-core 依赖项自动下载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-15T21:16:11.053

我遇到了这个错误，我的解决方案是同时拥有这两个依赖项：

```
<dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
</dependency>

<dependency>
            <groupId>javax.ws.rs</groupId>
            <artifactId>javax.ws.rs-api</artifactId>
            <version>2.0</version>
</dependency> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-23T22:46:40.493

就我而言，它是 IntelliJ 'make' 不起作用，尽管 mvn clean install 工作正常。解决方法是从“项目结构”->“模块”选项卡中删除两个错误的“模块”，模块分别为：main 和 test。他们不知何故从“从现有来源创建项目”进入了那里。

# android - 仅返回 android 网格视图中的第一个值

> ID：14189383
> 
> 赞同：0
> 
> 时间：2013-01-07T03:17:03.060
> 
> 标签：android, gridview, android-edittext

我有一个充满编辑文本的网格视图。当用户按下按钮时，我想检索存储在编辑文本中的所有值，但我只取回第一个值。

网格视图位于 fragment_score.xml 中。

网格视图 grid_items.xml 中的编辑文本

```
<EditText 
    android:id="@+id/grid_item_edit_text_red"
    android:inputType="number"
    android:layout_width="50dp"
    android:layout_height="50dp"

    />

<EditText 
    android:id="@+id/grid_item_edit_text_blue"
    android:inputType="number"
    android:layout_width="50dp"
    android:layout_height="50dp"

     /> 
```

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.Menu;

import android.content.Context;
import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.GridView;

import android.view.View.OnTouchListener;
import android.view.inputmethod.InputMethodManager;

public class RedFragment extends SherlockFragment {

LayoutInflater infl;
GridView mGrid;

String[] etCollection = new String[9];

ImageAdapter adapter;

View mView;

Context mContext;
Button calc;    

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    System.out.println("onCreateView called");
    infl = inflater;
    //super.onCreate(savedInstanceState);
    super.onCreateView(inflater, container, savedInstanceState);
    mView = inflater.inflate(R.layout.fragment_score, container, false);
    mGrid = (GridView) mView.findViewById(R.id.gridViewRed);

    setHasOptionsMenu(true);

    //tView = container.getRootView();
    mContext = mView.getContext();

    for(int j=0;j<9;j++)
    {
        etCollection[j] = "-1";
    }

    adapter = new ImageAdapter(mContext);
    mGrid.setAdapter(adapter);
    Log.e("debug", "here2");
    calc = (Button)mView.findViewById(R.id.calc_red);

    calc.setOnTouchListener(new OnTouchListener(){
        @Override
        public boolean onTouch(View v, MotionEvent event){
            calculate();
            return true;

        }
    });

    return mView;
}

public void getGridVals(){

    Log.v("vals", "Getting grid Vals()");

    for(int i=0;i<9;i++)
    {
        EditText tempText1 = (EditText)mView.findViewById(R.id.grid_item_edit_text_red);
        Log.v("temp text ", "." + tempText1.getText().toString());
                   //this should update etCollection[]
        adapter.getView(i, mView, null);
           //this always prints the value stored in the first textview
        Log.d("etCollection", etCollection[i]);

    }

}

public void setGridVals(int i, String val){

    etCollection[i] = val;

}

public void calculate(){ 
    int[][] pegs = new int[3][3];
    getGridVals();
}

public class ImageAdapter extends BaseAdapter{

    Context context;

    public ImageAdapter(Context context)
    {
        this.context = context;
        etCollection  = new String[getCount()];

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View myView = convertView;

        if(convertView == null)
        {
            LayoutInflater li = infl;
            myView= li.inflate(R.layout.grid_items, null);

        }
            ///////////////////////////////
        //this seems to always return the value in the first R.id.grid_item_edit_text_red
        EditText editText = (EditText) myView.findViewById(R.id.grid_item_edit_text_red);
        etCollection[position] = editText.getText().toString();

        return myView;
    }

    @Override
    public int getCount() {

        return 9;
    }

    @Override
    public Object getItem(int position) {
        Log.w("etCollection: " + position , etCollection[position]);
        return etCollection[position];
    }

    @Override
    public long getItemId(int position) {

        return 0;//mGrid.getItemIdAtPosition(position);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:39:17.857

我仍然是一个 Android 新手，但我认为你应该为每个 EditText 都有一个 id，而你只定义了 2。
所以当你这样做时，`(EditText)mView.findViewById(R.id.grid_item_edit_text_red)`它每次都会返回相同的 EditText。
这可能会有所帮助：http: [//developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:04:48.350

我通过在编辑文本上使用文本观察器并从那里更新数组来修复它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T05:06:45.720

getview 方法中存在问题...因为您使用布局充气器对 editText 进行充气以获取字符串但是您需要知道哪个 editText 包含数据

使用 for 循环语句来获取所有字符串。

运行 for 循环作为视图中使用的 editText 的数量.. for 循环

(如果 edittext.gettext().length()>0) 字符串数据 = edittext.gettext();

# javascript - 无法让 jquery-masonry 工作

> ID：14189390
> 
> 赞同：0
> 
> 时间：2013-01-07T03:18:14.730
> 
> 标签：javascript, jquery, jquery-masonry

HTML

```
<div id="container">
<div class="item">
  <p>AAAAAAAAA amet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p>
  <p>Bacon ipsum dolor sit amet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p>
</div>
<div class="item">
  <p>BBBBBBBBmet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p>
  <p>Bacon ipsum dolor sit amet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p>
  <p>Bacon ipsum dolor sit amet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p>
  <p>Bacon ipsum dolor sit amet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p><p>Bacon ipsum dolor sit amet tail frankfurter brisket, meatloaf beef ribs doner pork prosciutto ball tip rump tenderloin tongue. Pastrami fatback beef, sausage beef ribs venison tenderloin swine. Fatback leberkas kielbasa drumstick pork venison beef frankfurter. Turducken rump capicola, spare ribs leberkas brisket pork belly ball tip ground round. Tongue strip steak beef ribs shoulder.</p>
  </div>

etc.... 
```

CSS

```
body {
    background-color: red;
}

.container{ width:940px; margin:0px auto;}

.item {
  width: 220px;
  margin: 10px;
  float: left;
  padding: 5px;
  background-color: white;
} 
```

我无法弄清楚我做错了什么。我什至将默认的砌体代码粘贴到我的编辑器（[http://jsfiddle.net/desandro/LDEGk/](http://jsfiddle.net/desandro/LDEGk/)）中，它搞砸了。

[http://jsfiddle.net/ntzMr/](http://jsfiddle.net/ntzMr/)

这些是我位于 body 标记中的脚本文件（.js 文件位于根文件夹中）：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="/jquery.masonry.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:27:59.960

看起来你包含的**砌体**库有一些问题，在为砌体库添加外部资源后，你的代码在[这里](http://jsfiddle.net/arunpjohny/ntzMr/1/)工作正常。

```
<script src="http://masonry.desandro.com/jquery.masonry.min.js"></script> 
```

# php - PHP认证系统取代PHPBB

> ID：14189411
> 
> 赞同：0
> 
> 时间：2013-01-07T03:20:26.010
> 
> 标签：php, mysql, authentication, phpbb

我目前使用 phpBB 来验证用户对他们的公告板系统之外的页面。我发现我真的不再需要 phpbb 论坛了，我想彻底清除 phpbb 并用新的身份验证系统替换它（也许自己写）。

在做了一些研究之后，我发现 phpbb 不再对他们的密码进行 md5 哈希处理，而是使用某种类型的自定义哈希算法。我的问题有两个：

1.  从 phpbb 数据库中提取密码（10,000 多个用户）以导入可以读取现有密码的新系统的最佳方法是什么。如果这是不可能的，那么让用户进行身份验证的最佳方法是什么？

2.  我应该使用一个好的 php 身份验证系统还是应该自己编写？我仅有的两个要求是 Facebook 连接和能够使用我现有的用户名和密码列表。我已经阅读了这个看起来非常直观的教程[http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL](http://www.wikihow.com/Create-a-Secure-Login-Script-in-PHP-and-MySQL)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T03:28:55.740

**一**。PHPBB 存储一个加密“salt”，用于对密码进行哈希处理，找到该 salt，您可以在新应用程序中使用它，或者在编写自己的系统时使用它来循环密码并使用不同的加密创建新密码如果你喜欢。

**您可以在phpbbHash.php**文件中查看盐是如何创建和检查的。

**二**。如果您不喜欢使用[PHP 框架](http://www.phpframeworks.com/)来为您处理所有这些，那么是的，也许可以自己编写 - 您列出的教程非常好.. 加载到 Google 上..[这是一个](http://net.tutsplus.com/tutorials/php/a-better-login-system/)非常好的 ACL 重点教程。

# javascript - 需要帮助处理（不执行）页面上找到的 javascript

> ID：14189413
> 
> 赞同：-2
> 
> 时间：2013-01-07T03:20:29.160
> 
> 标签：javascript, selenium-webdriver

我需要驱动一个几乎完全用 javascript 呈现的网站。到目前为止，我已经能够检测到呈现的页面并对其进行导航，但是脚本中有一些变量我想为一些导航决策进行处理。我可以使用 xpath 识别标签，但我无法在它们之间获取文本。需要明确的是，我不希望执行 javascript，只需读取页面上 javascript 中的变量即可。我很难找到任何说明我需要的文件。在一个线程中，有人提到使用文档对象，但我不确定如何以编程方式实现这一点。

我真的很感激这里的提示。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T15:29:17.683

我想到了。WebDriver.getPageSource()。由于没有解析器 javascript，我使用正则表达式找到了我想要的位，然后将 JSON 转换为具有简单 json 的对象。

```
 private String getRandomProvider(){
    String shortName = "";
    JSONArray providers;
    String page = this.getPageSource();
    Pattern pattern = Pattern.compile("domainBootstrap\\.providers = (\\[,?\\{.*\\}\\]);");
    Matcher matcher = pattern.matcher(page);
    if (matcher.find()){
        try {
            providers = (JSONArray) new JSONParser().parse(matcher.group(1));
            int randomProvider = (int)(Math.random() * providers.size());
            JSONObject provider = (JSONObject) providers.get(randomProvider);
            shortName = provider.get("shortName").toString();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return shortName; 
```

# android - 即使 JDK 合规性已设置为 1.6，也删除覆盖注释

> ID：14189423
> 
> 赞同：0
> 
> 时间：2013-01-07T03:22:10.410
> 
> 标签：android, annotations, overriding, jdk1.6

我对这个覆盖注释有一个烦人的问题，我来谷歌寻找解决方案，但我找不到任何线索。我已将 JDK 合规性设置为 1.6，它有一个默认值，但 eclipse 仍然要求我删除覆盖，我应该怎么做才能克服这个问题？

```
import android.os.Bundle;
import android.app.Activity;
import android.view.*;
import android.widget.*;
public class HelloList extends Activity {
ListView list;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hello_list);
    list = (ListView)findViewById(R.id.list);
    String[] values = new String[]{"StudentSite", "Staffsite", "BAAK", "Seminar"};
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values);
    list.setAdapter(adapter);

    list.setOnItemClickListener(new OnItemClickListener()
    {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int pos, long id)
        {
            Toast.makeText(getApplicationContext(), pos, Toast.LENGTH_LONG).show();
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:49:39.660

尝试将SDK设置为1.7版本，然后它不会要求您删除覆盖

步骤是：

1.  选择项目。
2.  右键单击，选择属性。
3.  选择java编译器。将值设置为 1.7 并从项目选项卡的菜单栏中清除项目。

# apache-flex - 如何在 Flex DataGrid 中调用向下翻页功能

> ID：14189425
> 
> 赞同：1
> 
> 时间：2013-01-07T03:22:17.867
> 
> 标签：apache-flex, datagrid, pagination, pagedown

我在 Flash Builder 中有 DataGrid 控件，它显示一长串数据。我想设置一个计时器，所以每次计时器滴答作响时，计时器都会调用一个函数，使 DataGrid 控件执行向下翻页操作，就像您每 3 秒单击一次滚动条一样。最简单的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:44:39.200

即使不是很清楚，您也可以尝试这样的事情

```
 private var gridTimer:Timer;

      public function onSomeFunction():void
      {
            gridTimer = new Timer(5000); //the timer is set for 5 seconds 
            gridTimer.addEventListener("timer", dataGridTimer);
            gridTimer.start();
      }

      private function dataGridTimer(event:TimerEvent):void
      {
            grid.verticalScrollPosition = value;
      } 
```

# ios - 状态栏高度之类的宏常量

> ID：14189426
> 
> 赞同：2
> 
> 时间：2013-01-07T03:22:36.043
> 
> 标签：ios, objective-c, macros

我知道如何使用 C 定义常量和宏。有什么方法可以像这样在 Objective-C 中定义常量：

```
#define STATUSBAR_HEIGHT [UIApplication sharedApplication].statusBarFrame.size.height 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:31:43.627

是的，差不多就是这样。例如，您想打开一个网址然后 -

```
#define OPEN_URL(urlString) [[NSWorkspace sharedWorkspace] openURL:[NSURL URLWithString:urlString]] 
```

把它放在一个类似的文件中`utils.h`并导入该头文件以使该宏可用。但是在大型代码库中，在每个文件中导入是令人讨厌的，您可以在`#ifdef __OBJC__`AppName-Prefix.pch 的部分中声明一个全局宏。现在您不需要在每个文件中导入...

# php - 在所有主流浏览器中禁用浏览器按钮和 url 地址栏？

> ID：14189428
> 
> 赞同：0
> 
> 时间：2013-01-07T03:22:53.077
> 
> 标签：php, javascript

我不知道这是否可行，但是当用户在某个页面上时，是否可以在浏览器中禁用 url 地址栏？如果用户在某个页面上，用户还可以禁用浏览器按钮吗？

但不同的是，它需要在所有浏览器上运行，Chrome、Safari、IE、Opera 和 Firefox。它必须适用于所有这些浏览器。我知道这些浏览器之一不会失败，这让这很困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:25:11.963

试试这个页面： [在 Firefox 和 IE 中打开没有地址栏的新弹出窗口](https://stackoverflow.com/questions/2909645/open-new-popup-window-without-address-bars-in-firefox-ie)

但是您不能禁用工具栏按钮，至少用户可以按退格键转到上一页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:30:51.473

您不能禁用网络浏览器中的导航。但是有一些解决方法。

尝试使用 iframe，它应该忽略浏览器的直接导航请求吗？

或使用php制作一个页面，每一步都会更改，但仍然是同一页面（因此您无法从中导航）

以下代码不完整，但它应该向您展示一种方法。

```
<?php
$Step = $_SESSION["step"];

if($Step == 1 && isset($_POST["name"]))
{
    $Step = 2;
    // save name
}else if($Step == 2 && isset($_POST["description"]))
{
    $Step = 3;
    // save description
}

if($Step == 1)
{ ?>
    <html>
        <body>
            <form method="POST" action="">
                <input name="name" type="text">
                <input type="submit" value="ok">
            </form>
        </body>
    </html>
<?php }else if($Step == 2){ ?>
    <html>
        <body>
            <form method="POST" action="">
                <input name="description" type="text">
                <input type="submit" value="ok">
            </form>
        </body>
    </html>
<?php } ?> 
```

# c++ - 为什么我们需要 C++ 中的抽象类？

> ID：14189438
> 
> 赞同：18
> 
> 时间：2013-01-07T03:23:52.153
> 
> 标签：c++, oop, inheritance, abstract-class

我刚刚在我的 OOP 类中了解了多态性，我很难理解抽象基类是如何有用的。

抽象类的目的是什么？在每个实际类中创建每个必要的函数时，定义一个抽象基类提供了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-07T20:17:39.137

抽象类的目的是为一组具体的子类定义一个通用协议。这在定义共享代码、抽象概念等的对象时很有用。

抽象类没有实例。一个抽象类必须至少有一个延迟方法（或函数）。为了在 C++ 中实现这一点，在抽象类中声明但未定义纯虚成员函数：

```
class MyClass {
    virtual void pureVirtualFunction() = 0;
} 
```

尝试实例化抽象类总是会导致编译器错误。

> “在每个实际类中创建每个必要的函数时，定义一个抽象基类提供了什么？”

这里的主要思想是代码重用和跨类的适当分区。在父类中定义一次函数比在多个子类中一遍又一遍地定义更有意义：

```
class A {
   void func1();
   virtual void func2() = 0;
}

class B : public A {
   // inherits A's func1()
   virtual void func2();   // Function defined in implementation file
}

class C : public A {
   // inherits A's func1()
   virtual void func2();   // Function defined in implementation file
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-13T17:22:05.977

拥有像 "Dog" 这样的抽象类和像 "bark" 这样的虚拟方法允许从 Dog 继承的所有类以相同的方式调用它们的 bark 代码，即使 Beagle 的 bark 的实现方式与 Collie 的不同。

如果没有一个共同的抽象父（或至少一个具有树皮虚拟方法的共同父），就很难做到以下几点：

有一个 Dog 类型的向量，其中包含 Collies、Beagles、German Shepherds 等，并让它们每个都吠叫。使用包含 Collies、Beagles、German Shepherds 的 Dogs 向量，要使它们全部吠叫，您要做的就是在 for 循环中迭代并在每个循环中调用 bark。否则你必须有一个单独的牧羊犬向量、比格犬向量等。

如果问题是“为什么在 Dog 可以是具体的情况下将其抽象化，定义一个可以被覆盖的默认实现的虚拟树皮？”，答案是有时这可能是可以接受的——但是，从设计的角度来看，真的没有什么狗不是牧羊犬、比格犬或其他品种或混合的狗，所以尽管它们都是狗，但实际上没有一个是狗，但不是其他衍生品也上课。此外，由于狗的叫声因一个品种而异，因此不太可能有任何真正可接受的默认树皮实现，这对于任何体面的狗群都是可以接受的。

我希望这可以帮助您理解目的：是的，无论如何您都必须在每个子类中实现 bark，但是公共抽象祖先允许您将任何子类视为基类的成员并调用可能在概念上相似的行为像树皮，但实际上有非常不同的实现。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-07T03:32:56.827

抽象类允许执行编译时协议。这些协议定义了成为类族的一部分意味着什么。

另一种思考方式是抽象类是您的实现类必须履行的契约。如果他们不履行这个合同，他们就不能成为班级家庭的一部分，他们必须被修改以符合合同。提供的合约可以提供默认功能，但它也留给子类来定义更具体或不同的功能，同时仍保留在合约的范围内。

对于小型项目，这似乎没有用，但对于大型项目，它提供了一致性和结构，因为它通过抽象类契约提供文档。这使得代码更易于维护，并使每个子类具有相同的协议，从而更容易使用和开发新的子类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T03:27:57.557

我有一条狗。具有方法吠叫的抽象类狗。我那只特别的狗叫一声。其他狗以不同的方式吠叫。所以以抽象的方式定义狗是有用的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-24T06:00:53.670

抽象类的目的是提供一个适当的基类，其他类可以从该基类继承。抽象类不能用于实例化对象，只能用作接口。尝试实例化抽象类的对象会导致编译错误。（因为 vtable 条目没有填充我们在抽象类中提到的虚函数的内存位置）

因此，如果需要实例化ABC的子类，则它必须实现每个虚函数，这意味着它支持ABC声明的接口。未能覆盖派生类中的纯虚函数，然后尝试实例化该类的对象，是编译错误。

例子：

```
class mobileinternet
{
public:
virtual enableinternet()=0;//defines as virtual so that each class can overwrite
};

class 2gplan : public mobileinternet

{
    private:

         int providelowspeedinternet(); //logic to give less speed.

    public:

         void enableinternet(int) {
                                     // implement logic
                                 }

};

//similarly

class 3gplan : public enableinternet
{
   private: high speed logic (different then both of the above)

   public: 
          /*    */
} 
```

在这个例子中，你可以理解。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T03:27:10.920

抽象类用于定义要实现的接口。查看一些参考资料：

[http://en.wikibooks.org/wiki/C%2B%2B_Programming/Classes/Abstract_Classes](http://en.wikibooks.org/wiki/C%2B%2B_Programming/Classes/Abstract_Classes)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-07T03:31:03.500

当所有具有派生自 的类型的对象都需要某种功能时，需要将抽象类`AbstractClass`作为基类`AbstractClass`，但不能在其`AbstractClass`自身上合理地实现。

`Vehicle`具有派生类`Car`的基类的旧且有些人为的 OO 示例`Motorcycle`在这里提供了一个很好的示例，假设您想要一个方法`move()`- 您可以实现 a`Car`或 a`Motorcycle`移动但`Vehicle`s 不移动的方式一种通用的方式，因此`Vehicle::move()`必须是纯虚拟的，`Vehicle`因此是抽象的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-07T03:31:08.037

> 为什么我们不在每个类中创建每个必要的功能？(C++)

您必须创建`abstract`每个派生类中标记为的每个必要函数。

如果您的问题是，为什么要在抽象类中创建抽象函数？

它允许严格[的运行时多态性](http://en.wikipedia.org/wiki/C%2B%2B#Polymorphism)。

另请阅读[接口与抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-07T05:37:26.987

```
abstract class dog
{
bark();
}

// function inside another module

dogbarking(dog obj)
{
   dog.bark(); // function will call depend up on address inside the obj
}

// our class
ourclass: inherit dog
{
    bark()
    {
         //body
     }
}

main()
{
    ourclass obj;
    dogbarking(obj);
} 
```

我们可以看到 dogbarking 是在另一个模块中编写的函数。它只知道抽象类狗。即使它可以在我们的类中调用函数 bark。在主函数中，我们创建类的对象并传递给函数 dogbarking，它使用抽象类 dog 的引用对象接收它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-07T20:06:50.950

假设您有两种显示字符串的方法：

```
DisplayDialog(string s);
PrintToConsole(string s); 
```

并且你想写一些可以在这两种方法之间切换的代码：

```
void foo(bool useDialogs) {
    if (useDialogs) {
        DisplayDialog("Hello, World!");
    } else {
        PrintToConsole("Hello, World!");
    }

    if (useDialogs) {
        DisplayDialog("The result of 2 * 3 is ");
    } else {
        PrintToConsole("The result of 2 * 3 is ");
    }

    int i = 2 * 3;
    string s = to_string(i);

    if (useDialogs) {
        DisplayDialog(s);
    } else {
        PrintToConsole(s);
    }        
} 
```

此代码与用于显示字符串的特定方法紧密耦合。添加一个额外的方法、改变方法的选择方式等等都会影响使用它的每一段代码。这段代码与我们用来显示字符串的方法集*紧密耦合。*

抽象基类是一种将使用某些功能的代码与实现该功能的代码*分离的方法。*它通过为完成任务的所有不同方式定义一个通用接口来实现这一点。

```
class AbstractStringDisplayer {
public:
    virtual display(string s) = 0;

    virtual ~AbstractStringDisplayer();
};

void foo(AbstractStringDisplayer *asd) {
    asd->display("Hello, World!");
    asd->display("The result of 2 * 3 is ");

    int i = 2 * 3;
    string s = to_string(i);

    asd->display(s);
}

int main() {
    AbstractStringDisplayer *asd = getStringDisplayerBasedOnUserPreferencesOrWhatever();

    foo(asd);
} 
```

使用 AbstractStringDisplayer 定义的接口，我们可以创建和使用尽可能多的显示字符串的新方法，并且不需要更改使用抽象接口的代码。

# json - com.google.gson.JsonObject 无法转换为 com.google.gson.JsonArray

> ID：14189439
> 
> 赞同：4
> 
> 时间：2013-01-07T03:23:57.487
> 
> 标签：json, casting, arrays

我在解析 JSON 响应时遇到了一些麻烦。响应数据：

```
{
    "deal": {
        "categorie": {
            "description": "Offres Shopping",
            "idcategorie": "1",
            "nom": "Shopping"
        },
        "conditions": "2 personne au plus",
        "dateAjout": "2013-01-07T00:00:00+01:00",
        "dateExp": "2013-01-31T00:00:00+01:00",
        "description": "nuit dans un hotel 5 etoile",
        "heurexp": "12",
        "iddeal": "1",
        "minutesexp": "30",
        "prestataire": {
            "adresse": "Qu zohour 44",
            "codePostale": "12600",
            "description": "Hotel 5 etoiles",
            "idprestataire": "1",
            "nom": "Hotel ronald",
            "pays": "France",
            "telephone": "99999999",
            "ville": "Brest"
        },
        "prix": "80.0",
        "prixHabituel": "200.0",
        "tags": "hotel",
        "titre": "Nuit 5 etoiles"
    }
} 
```

当试图解析这个响应时，`List<Deal>`我得到了这个异常：

> com.google.gson.JsonObject 无法转换为 com.google.gson.JsonArray

这是我用于解析的代码：

```
if (reponse != null && !reponse.isEmpty()) {
System.out.println(reponse);

Gson g = new Gson();
JsonParser parser = new JsonParser();
JsonObject jObject = parser.parse(reponse).getAsJsonObject();
JsonArray jArray =  jObject.getAsJsonArray("deal");  // here goes the Exception
for (JsonElement elem : dealArray) {
deals.add(g.fromJson(elem, Deal.class));
}

    System.out.println(deals.toString());
    return "success";
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:26:27.013

好吧，`deal`不是 JSON 数组，它是一个 JSON 对象。因此例外。供参考的 JSON 数组看起来更像这样：

```
"deal" : [{"attr" : "value"}, {"attr" : "value"}] 
```

# c++ - 使用类成员的 C++ 回调

> ID：14189440
> 
> 赞同：99
> 
> 时间：2013-01-07T03:24:02.430
> 
> 标签：c++, function, callback, member

我知道这个问题已经被问过很多次了，因此很难深入挖掘并找到一个简单的例子来说明什么是有效的。

我有这个，它很简单，它适用于`MyClass`......

```
#include <iostream>
using std::cout;
using std::endl;

class MyClass
{
    public:
        MyClass();
        static void Callback(MyClass* instance, int x);
    private:
        int private_x;
};

class EventHandler
{
    public:
        void addHandler(MyClass* owner)
        {
            cout << "Handler added..." << endl;
            //Let's pretend an event just occured
            owner->Callback(owner,1);
        }
};

EventHandler* handler;

MyClass::MyClass()
{
    private_x = 5;
    handler->addHandler(this);
}

void MyClass::Callback(MyClass* instance, int x)
{
    cout << x + instance->private_x << endl;
}

int main(int argc, char** argv)
{
    handler = new EventHandler();
    MyClass* myClass = new MyClass();
}

class YourClass
{
    public:
        YourClass();
        static void Callback(YourClass* instance, int x);
}; 
```

怎么能被重写，所以`EventHandler::addHandler()`可以同时使用`MyClass`和`YourClass`。很抱歉，但这只是我的大脑工作的方式，我需要先看一个简单的例子来说明什么是有效的，然后才能理解它为什么/如何工作。如果您有最喜欢的方式来完成这项工作，现在是展示它的时候了，请标记该代码并将其发回。

**[编辑]**

它已被回答，但在我打勾之前答案已被删除。就我而言，答案是模板化函数。将 addHandler 更改为此...

```
class EventHandler
{
    public:
        template<typename T>
        void addHandler(T* owner)
        {
            cout << "Handler added..." << endl;
            //Let's pretend an event just occured
            owner->Callback(owner,1);
        }
}; 
```

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-01-07T03:41:02.350

您可以使用新的 C++11 标准中的功能，而不是使用静态方法并传递指向类实例的指针：[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function)和[`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)：

```
#include <functional>
class EventHandler
{
    public:
        void addHandler(std::function<void(int)> callback)
        {
            cout << "Handler added..." << endl;
            // Let's pretend an event just occured
            callback(1);
        }
}; 
```

该`addHandler`方法现在接受一个`std::function`参数，并且这个“函数对象”没有返回值，并且接受一个整数作为参数。

要将其绑定到特定函数，请使用`std::bind`：

```
class MyClass
{
    public:
        MyClass();

        // Note: No longer marked `static`, and only takes the actual argument
        void Callback(int x);
    private:
        int private_x;
};

MyClass::MyClass()
{
    using namespace std::placeholders; // for `_1`

    private_x = 5;
    handler->addHandler(std::bind(&MyClass::Callback, this, _1));
}

void MyClass::Callback(int x)
{
    // No longer needs an explicit `instance` argument,
    // as `this` is set up properly
    cout << x + private_x << endl;
} 
```

添加处理程序时需要使用`std::bind`，因为您明确需要将其他隐式`this`指针指定为参数。如果您有独立功能，则不必使用`std::bind`：

```
void freeStandingCallback(int x)
{
    // ...
}

int main()
{
    // ...
    handler->addHandler(freeStandingCallback);
} 
```

让事件处理程序使用`std::function`对象，也可以使用新的 C++11 [lambda 函数](http://en.wikipedia.org/wiki/C++11#Lambda_functions_and_expressions)：

```
handler->addHandler([](int x) { std::cout << "x is " << x << '\n'; }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-04-08T23:02:36.953

这是一个简洁的版本，适用于类方法回调和常规函数回调。在此示例中，为了显示如何处理参数，回调函数采用两个参数：`bool`和`int`。

```
class Caller {
  template<class T> void addCallback(T* const object, void(T::* const mf)(bool,int))
  {
    using namespace std::placeholders; 
    callbacks_.emplace_back(std::bind(mf, object, _1, _2));
  }
  void addCallback(void(* const fun)(bool,int)) 
  {
    callbacks_.emplace_back(fun);
  }
  void callCallbacks(bool firstval, int secondval) 
  {
    for (const auto& cb : callbacks_)
      cb(firstval, secondval);
  }
private:
  std::vector<std::function<void(bool,int)>> callbacks_;
}

class Callee {
  void MyFunction(bool,int);
}

//then, somewhere in Callee, to add the callback, given a pointer to Caller `ptr`

ptr->addCallback(this, &Callee::MyFunction);

//or to add a call back to a regular function
ptr->addCallback(&MyRegularFunction); 
```

这将特定于 C++11 的代码限制为 addCallback 方法和 Caller 类中的私有数据。至少对我来说，这可以最大限度地减少实施时出错的机会。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T03:29:24.037

您要做的是创建一个处理此代码的接口，并且您的所有类都实现该接口。

```
class IEventListener{
public:
   void OnEvent(int x) = 0;  // renamed Callback to OnEvent removed the instance, you can add it back if you want.
};

class MyClass :public IEventListener
{
    ...
    void OnEvent(int x); //typically such a function is NOT static. This wont work if it is static.
};

class YourClass :public IEventListener
{ 
```

请注意，为此，“回调”功能是非静态的，*我认为*这是一种改进。如果您希望它是静态的，则需要按照 JaredC 建议的模板进行操作。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-11T21:32:35.183

来自上述代码的完整工作示例......对于 C++11：

```
#include <stdlib.h>
#include <stdio.h>
#include <functional>

#if __cplusplus <= 199711L
  #error This file needs at least a C++11 compliant compiler, try using:
  #error    $ g++ -std=c++11 ..
#endif

using namespace std;

class EventHandler {
    public:
        void addHandler(std::function<void(int)> callback) {
            printf("\nHandler added...");
            // Let's pretend an event just occured
            callback(1);
        }
};

class MyClass
{
    public:
        MyClass(int);
        // Note: No longer marked `static`, and only takes the actual argument
        void Callback(int x);

    private:
        EventHandler *pHandler;
        int private_x;
};

MyClass::MyClass(int value) {
    using namespace std::placeholders; // for `_1`

    pHandler = new EventHandler();
    private_x = value;
    pHandler->addHandler(std::bind(&MyClass::Callback, this, _1));
}

void MyClass::Callback(int x) {
    // No longer needs an explicit `instance` argument,
    // as `this` is set up properly
    printf("\nResult:%d\n\n", (x+private_x));
}

// Main method
int main(int argc, char const *argv[]) {

    printf("\nCompiler:%ld\n", __cplusplus);
    new MyClass(5);
    return 0;
}

// where $1 is your .cpp file name... this is the command used:
// g++ -std=c++11 -Wall -o $1 $1.cpp
// chmod 700 $1
// ./$1 
```

输出应该是：

```
Compiler:201103

Handler added...
Result:6 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T03:30:44.437

`MyClass`并且`YourClass`都可以派生自`SomeonesClass`其中具有抽象（虚拟）`Callback`方法。您`addHandler`将接受类型的对象，并且`SomeonesClass`可以覆盖以提供其回调行为的特定实现。`MyClass``YourClass``Callback`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-09T15:36:57.047

**如果你有不同参数的回调，你可以使用如下模板：**
// 编译： g++ -std=c++11 myTemplatedCPPcallbacks.cpp -o myTemplatedCPPcallbacksApp

```
#include <functional>     // c++11

#include <iostream>        // due to: cout

using std::cout;
using std::endl;

class MyClass
{
    public:
        MyClass();
        static void Callback(MyClass* instance, int x);
    private:
        int private_x;
};

class OtherClass
{
    public:
        OtherClass();
        static void Callback(OtherClass* instance, std::string str);
    private:
        std::string private_str;
};

class EventHandler
{

    public:
        template<typename T, class T2>
        void addHandler(T* owner, T2 arg2)
        {
            cout << "\nHandler added..." << endl;
            //Let's pretend an event just occured
            owner->Callback(owner, arg2);
         }   

};

MyClass::MyClass()
{
    EventHandler* handler;
    private_x = 4;
    handler->addHandler(this, private_x);
}

OtherClass::OtherClass()
{
    EventHandler* handler;
    private_str = "moh ";
    handler->addHandler(this, private_str );
}

void MyClass::Callback(MyClass* instance, int x)
{
    cout << " MyClass::Callback(MyClass* instance, int x) ==> " 
         << 6 + x + instance->private_x << endl;
}

void OtherClass::Callback(OtherClass* instance, std::string private_str)
{
    cout << " OtherClass::Callback(OtherClass* instance, std::string private_str) ==> " 
         << " Hello " << instance->private_str << endl;
}

int main(int argc, char** argv)
{
    EventHandler* handler;
    handler = new EventHandler();
    MyClass* myClass = new MyClass();
    OtherClass* myOtherClass = new OtherClass();
} 
```

# excel - 关于四舍五入值的 Microsoft excel 公式

> ID：14189441
> 
> 赞同：-4
> 
> 时间：2013-01-07T03:24:33.337
> 
> 标签：excel

如果一个值小于 200，那么它应该向上取整到 200。我真的很感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:33:08.907

您想要的是使用 if 语句公式

```
=if(A1 < 200, 200, A1) 
```

如果单元格 A1 小于 200，则返回 200，否则返回 A1 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:25:44.817

这称为天花板，功能是`CEILING()`

在你的情况下`CEILING(mynumber, 200)`。这会将小于或等于 200 的任何正数舍入到 200。它将 201 舍入到 400、401 到 600，依此类推，以 200 的倍数进行。

如果您只需要 ceil 低于 200 的数字，则`IF(mynumber < 200, 200, mynumber)`.

# android - 包含 ScaleAnimation 和 TranslateAnimation 的 AnimationSet 在 OS 2.1 中不补间

> ID：14189442
> 
> 赞同：0
> 
> 时间：2013-01-07T03:24:40.377
> 
> 标签：android, animation, tween

我正在使用包含 ScaleAnimation 和 TranslateAnimation 的 AnimationSet。在几秒钟内将一张图像从一种尺寸和位置过渡到另一种。它适用于最近的设备，但补间不会发生在旧的 Xperia 设备上，卡在 OS 2.1 上。图像直接以补间后状态出现。我查看了参考资料，有问题的动画类似乎从 OS 1 开始可用。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:21:12.757

我只是在 AnimationSet 对象上设置持续时间。我尝试在包含的比例和平移对象上设置相同的持续时间。这使得补间工作。

*   我在使用 OS 2.2 模拟器时注意到了同样的问题。以上在 2.2 模拟器中也修复了它。

*   我还注意到，首先将动画添加到集合中，然后再设置持续时间可以解决问题。我曾经在创建集合后立即设置持续时间。

# android - Android相机图像捕获无按钮

> ID：14189445
> 
> 赞同：0
> 
> 时间：2013-01-07T03:25:06.960
> 
> 标签：android, android-layout, android-camera, surfaceview

好的，我在实现无需按下按钮即可捕获图像的相机应用程序时遇到了麻烦。当前是一个工作的相机应用程序，但是当下面的代码被注释掉时：

```
buttonClick = (Button) findViewById(R.id.buttonClick);

buttonClick.setOnClickListener(new OnClickListener() {
  public void onClick(View v) { // <5>
    (1)    preview.camera.takePicture(shutterCallback, rawCallback, jpegCallback);
  }
});*/ 
```

并替换为只调用 (1) 的循环，预览永远不可见并导致应用程序关闭。预览类如下：

```
import java.io.IOException;
import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.PreviewCallback;

import android.util.Log;

import android.view.SurfaceHolder;

import android.view.SurfaceView;

class Preview extends SurfaceView implements SurfaceHolder.Callback { // 

  <1>
    private static final String TAG = "Preview";

  SurfaceHolder mHolder;  // <2>
  public Camera camera; // <3>

  Preview(Context context) {
    super(context);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();  // <4>
    mHolder.addCallback(this);  // <5>
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); // <6>
  }

  // Called once the holder is ready

  public void surfaceCreated(SurfaceHolder holder) {  // <7>
    // The Surface has been created, acquire the camera and tell it where
    // to draw.
    camera = Camera.open(); // <8>
    try {
      camera.setPreviewDisplay(holder);  // <9>

      camera.setPreviewCallback(new PreviewCallback() { // <10>
        // Called for each frame previewed
        public void onPreviewFrame(byte[] data, Camera camera) {  // <11>
          Log.d(TAG, "onPreviewFrame called at: " + System.currentTimeMillis());
          Preview.this.invalidate();  // <12>
        }
      });
    } catch (IOException e) { // <13>
      e.printStackTrace();
    }
  }

  // Called when the holder is destroyed
  public void surfaceDestroyed(SurfaceHolder holder) {  // <14>
    camera.stopPreview();
    camera = null;
  }

  // Called when holder has changed
  public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) { // <15>
    camera.startPreview();
  } 

} 
```

关于从这里去哪里以及为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:11:51.777

如果您只是在标记为 (1) 的行上循环，那么您将导致 UI 线程阻塞。在您被邀请强制关闭您的应用程序之前，它永远无法更新预览，或者确实对 UI 执行任何其他操作。

如果您的目标是使用相机定期拍摄快照，那么您需要使用单独的线程来触发实际拍摄的照片：例如，触发对 UI 线程的定期回调的任务。

可以服务于您的目的的代码示例（就在非 ui 线程上提供计时器而言）是[here](http://android-developers.blogspot.kr/2007/11/stitch-in-time.html)

如果您想做其他事情，那么您需要描述目标。

更新：因为您想使用如此长的时间间隔来拍照，所以您需要使用[AlarmManager](https://developer.android.com/reference/android/app/AlarmManager.html)。有一个[教程](http://android-er.blogspot.in/2010/10/simple-example-of-alarm-service-using.html)和[相关的其他问题](https://stackoverflow.com/questions/4820044/android-alarmmanager-and-service-question)。

您需要创建一个拍摄照片的活动，然后将警报管理器设置为每 24 小时触发一次该活动。使用警报管理器意味着 Android 本身会处理它是否处于睡眠模式，您无需担心您的应用程序被破坏，如果您在自己的线程中运行计时器会杀死计时器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:31:54.940

好的。我得到了你的要求。您应该只需要尝试使用 AlarmManager 来提醒您选择的时间。虽然该服务会调用，但您必须实现从相机获取捕获图像的代码。

您可以将通常在任何相机应用程序中工作的代码放入以捕获图像。

只需在调用警报时调用该代码（调用您的服务）。

希望你明白我的意思。

随意评论。

# apache - 我应该在 Apache 中使用 Websocket 模块吗？

> ID：14189452
> 
> 赞同：3
> 
> 时间：2013-01-07T03:26:19.970
> 
> 标签：apache, module, apache2, websocket

我正在尝试将 websocket 集成到现有应用程序中。

根据我的搜索，我找到了一个 websocket 模块来执行此操作，但它还没有更新。 [https://github.com/disconnect/apache-websocket](https://github.com/disconnect/apache-websocket)。

该模块是否有可能包含在 Apache 中？

我还在 StackOverflow 对话中发现 Apache httpd 的设计目的不是保持持久连接，这是真的吗？ [在 Apache 服务器上使用 WebSocket](https://stackoverflow.com/questions/11334320/using-websocket-on-apache-server)

应该继续使用 Apache websocket 模块还是使用单独的 websocket 服务器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:45:21.860

上次我检查时，Apache 的 websocket 模块正在将任何传入的 WS 连接转发到您必须自己实现的共享库。

当您有一个监听普通套接字的应用程序并且您希望它可以通过 websockets 访问时，[Websockify](https://github.com/kanaka/websockify)可能是您的解决方案。

# c# - 删除实体集合中的项目

> ID：14189454
> 
> 赞同：1
> 
> 时间：2013-01-07T03:26:36.147
> 
> 标签：c#, entity-framework-4

如何删除实体集合中的项目？

前任：

我有两个相互关联的实体

员工和参考

```
**Table: Employee**

EmployeeId(PK) 

**Table: Reference**

ReferenceId(PK)
EmployeeId(FK)
Name 
```

首先我初始化这个：

```
Employee empCol = new Employee();
Reference refs = new Reference(); 
```

然后我在实体集合中保存一些数据

```
refs.Name = "Sample";
empCol.References.Add(refs);

refs.Name = "Sample2";
empCol.References.Add(refs); 
```

我想删除集合中的第二个元素，我该怎么做？

```
[0]= {Name = "Sample"}
[1]= {Name = "Sample2"} 
```

我尝试了这种代码，但它不起作用，此代码不会删除我的实体集合中的第二个元素，但它不会产生错误：

```
empCol.References.ToList().RemoveAt(1); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:35:47.927

不要假设`index`内部是如何维护的`collection`。找到对象`first`，然后`remove`从`collection`

```
var ref = empCol.References.FirstOrDefault( r=> r.Name == "Sample");
if (ref != null)
    empCol.References.Remove(ref); 
```

如果要删除 by `index`，请先找到该索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T01:03:06.577

我尝试根据集合中的对象删除集合中的对象**`index`**并且它可以工作

```
var refs = empCols.References.ElementAt(1);
empCols.References.Remove(refs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T16:40:38.697

例如，如果使用 toList() 将 EntityCollection 转换为 List，则可以使用所有 List 方法删除项目

```
 List<RotateArticle> articles = RotateArticle.GetDataByCategoryId(sm,currentArticle.MainCategory.Key).ToList(); 
```

进而

```
articles.Remove(articles[i]); 
```

或者

```
articles.RemoveRange(2, articles.Count - 1); 
```

# python - Python双端队列范围？

> ID：14189458
> 
> 赞同：5
> 
> 时间：2013-01-07T03:27:05.650
> 
> 标签：python, list, deque

我正在学习 Python，并且一直在尝试制作双端队列。但是，我得到不正确的输出，我不知道为什么。我的代码如下：

```
p = [2, 1], [1, 1]
init_q= deque()

init_q.append(p)
for i in range(len(p)):
    for j in range(len(p[i])):
        temp = p[i][j]
        p[i][j] = 0
        init_q.append(p)
        p[i][j] = temp

while init_q:
    print init_q.pop() 
```

在这段代码中，我输入了一个列表，然后我想创建一个包含 5 个列表的队列，其中 4 个在不同位置有一个 0，我想要的结果是：

```
([2, 1], [1, 1])
([0, 1], [1, 1])
([2, 0], [1, 1])
([2, 1], [0, 1])
([2, 1], [1, 0]) 
```

但是，我得到的结果是：

```
([2, 1], [1, 1])
([2, 1], [1, 1])
([2, 1], [1, 1])
([2, 1], [1, 1])
([2, 1], [1, 1]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:29:23.133

您将一个对象放入双端队列，然后更改该对象。事实上，你总是将同一个对象放入双端队列，所以所有双端队列都是对一个对象 p 的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T06:59:15.273

我通过简化您的代码在 Python Tutor 上创建了一个[可视化。](http://goo.gl/prQWy)摆弄一下，你可以很容易地看到发生了什么。

对代码进行单行更改即可解决此问题。

```
init_q.append(map(list, p))    # Initialize a new list from p's element lists 
```

这是使用上述更改的[可视化。](http://goo.gl/mjjh0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T04:50:46.577

跟进我对 Ned Batchelder 的回答的评论，以下是你如何可以不变地做同样的事情：

```
for i in range(len(p)):
    for j in range(len(p[i])):
        temprow = [0 if y==j else p[i][y] for y in range(len(p[i]))]
        temp = [temprow if x==i else p[x] for x in range(len(p))]
        init_q.append(temp) 
```

在这种情况下，我认为结果比他的建议可读性差很多：

```
 temp = copy.deepcopy(p)
        temp[i][j] = 0
        init_q.append(temp) 
```

正如我所说，有时它使事情变得更简单，有时不那么简单……但关键是它更容易推理。您不必担心是否有多个`list`s `init_q`——或者更糟糕的是，`list`这些`list`s 中的子程序——是否共享身份。

权衡是否值得实际上是逐案决定，并且可能对每个程序员都不同。在这种情况下，我不会使用不可变的解决方案，而且我怀疑许多其他 (Python) 程序员会使用。但值得知道如何编写它。

您也可以考虑将其写为 3D 列表，而不是 2D 列表的双端队列，然后将其输入到`deque`. 它显然是等价的，但从概念上讲，这样想可能更简单：

```
init_q.append(p)
q = [copy.deepcopy(p) for i in range(len(p)) for j in range(len(p[i]))]
for i in range(len(p)):
    for j in range(len(p[i])):
        q[i*len(p[i])+j][i][j] = 0
init_q.extend(q) 
```

PS，如果你经常做这种事情，你可能想看看[`numpy`](http://www.numpy.org). 如果这是你的全部问题，那对你没有任何好处……但如果你用多维数组做任何更复杂的事情，它会的。

# java - 出于某种原因，我的 if 语句没有触发

> ID：14189461
> 
> 赞同：2
> 
> 时间：2013-01-07T03:27:41.787
> 
> 标签：java, android

我创建了一个正常工作的 onSharedPreferencesChangeListener。我知道这一点，因为当我设置侦听器时，我记录了侦听器并且它正在触发更改。

但是，当我尝试切换键变量时出现错误（说我需要 JRE 1.7+ 才能切换字符串），因此我将其更改为 if-elseif 语句。

if-elseif 语句没有触发，所以我将前两个更改为 if 语句，然后将 elseif 放在后面（认为 elseif 可能是问题所在）。仍然没有触发。

奇怪的是，当我记录事件触发器时，我输出“ *”+key+“* ”作为字符串，而键值是我正在测试的确切字符串。

这是我的代码，有人可以指出我正确的方向吗？

```
 // logic for action when a shared preference is changed.
    prefs.registerOnSharedPreferenceChangeListener( new SharedPreferences.OnSharedPreferenceChangeListener() {

        @Override
        public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {
            String TAG = "UltimateScoreboard";

            if (key == "Main_Clock_Minutes") {
                msMainClockStart = Long.valueOf( prefs.getString( "Main_Clock_Minutes", "0" ) ) * 60000;
                Log.i( TAG, key + " changed: " + String.valueOf(msMainClockStart) );
            }

            if ( key == "Use_ShotClock" ) {
                useShotClock = prefs.getBoolean( "Use_ShotClock", false );

                if( useShotClock )
                    btnShotClock.setVisibility( View.VISIBLE );
                else
                    btnShotClock.setVisibility( View.INVISIBLE );

                Log.i( TAG, key );
            } 

            else if ( key == "Shot_Clock_Seconds" ) {
                msShotClockStart = Long.valueOf( prefs.getString( "Shot_Clock_Seconds", "0" ) ) * 1000;
                Log.i( TAG, key + " changed: " + Long.valueOf(msShotClockStart) );
            } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T03:30:35.903

您必须使用该`String.equals()`函数来比较字符串。`==`with Strings 仅比较内存位置。

例如：`if (key.equals("Main_Clock_Minutes"))`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-07T03:30:32.290

您不能使用 == 比较字符串。使用 String 类方法`equals()`或`equalsIgnoreCase()`.

```
if ( key.equals("Use_ShotClock") ) { } 
```

这就是你比较字符串的方式

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T03:35:57.090

你应该比较 if (key.equals("Use_ShotClock")) 或 if (key.equalsIgnoreCase("Use_ShotClock"))。因为字符串是java中的对象。因此，如果您像 if ( key == "Use_ShotClock" ) 进行比较，它将尝试比较这两个不同的字符串对象的引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T03:38:22.643

您是否尝试过`.equals()`在比较中使用`strings`？

像这样：

```
if (key.equals("Main_Clock_Minutes")) {
    msMainClockStart = Long.valueOf( prefs.getString( "Main_Clock_Minutes", "0" ) ) * 60000;
    Log.i( TAG, key + " changed: " + String.valueOf(msMainClockStart) );
} else if ( key.equals("Use_ShotClock")) {
    useShotClock = prefs.getBoolean( "Use_ShotClock", false );

    if( useShotClock )
        btnShotClock.setVisibility( View.VISIBLE );
    else
        btnShotClock.setVisibility( View.INVISIBLE );

    Log.i( TAG, key );
} else if ( key.equals("Shot_Clock_Seconds")) {
    msShotClockStart = Long.valueOf( prefs.getString( "Shot_Clock_Seconds", "0" ) ) * 1000;
    Log.i( TAG, key + " changed: " + Long.valueOf(msShotClockStart) );
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-07T03:33:25.183

必须使用 String 的方法 equals(String s) 来测试字符串是否相等。

“==”运算符没有为字符串重载，因为字符串是引用类型（它是一个对象，而不是原始类型），它是使用“==”比较的内存地址。由于 Java 能够为多个变量共享内存，因此在将字符串与“==”进行比较时有机会得到正确的结果，但这不太可能而且非常不可预测。

# c++ - 和 alsa 一起玩 wavs。确定帧数？

> ID：14189462
> 
> 赞同：0
> 
> 时间：2013-01-07T03:27:47.543
> 
> 标签：c++, wav, alsa

我正在尝试在 alsa 中播放 wav，但失败了。它可以播放，但要么太短，要么过早中断播放，要么太大，而且有段错误……这一切都取决于第 81 行该函数的最后一个参数。 [http://paste2.org/p/2708324#line-81](http://paste2.org/p/2708324#line-81)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:21:15.863

您确定您的 wav 文件已按照您的代码所期望的格式进行格式化吗？您的 wavHeader 结构对正在播放的 wav 文件做出了许多假设——它不适用于所有 wav 文件（当然不适用于我尝试过的文件）。当您阅读 Subchunk2Size 时，您完全有可能得到一个不正确的值。您的代码仅适用于非常特定的 wav 文件格式变体。

# c# - 在线程安全的自生成列表中正确锁定 (C#)

> ID：14189469
> 
> 赞同：3
> 
> 时间：2013-01-07T03:29:19.163
> 
> 标签：c#, multithreading, locking, ienumerable, generator

我有一个生成数字序列的单例 IEnumerable。该序列是可交互的（基本上是无限期的），我仅在需要时生成序列中的下一个数字。

```
public class Generator:IEnumerable<long> {

    private Generator() { }

    private static volatile Generator instance=new Generator();
    private static readonly object syncRoot=new object();
    public static Generator Instance { get { return instance; } }

    private static List<long> numsList=new List<long>();

    private void GenerateNextNumber() {
        long number;
        //Code to generate next number
        numsList.Add(number);
    }

    private long GenerateToNthNumber(int n) {
        lock(syncRoot) {
            while(numsList.Count<n)
                GenerateNextNumber();
        }
        return numsList[n-1];
    }

    public static long GetNthNumber(int n) {
        return Instance.GenerateToNthNumber(n);
    }

    private class GeneratorEnumerator:IEnumerator<long> {
        private int index=0;

        public long Current { get { return GetNthNumber(index); } }

        public void Dispose() { }

        object System.Collections.IEnumerator.Current { get { return GetNthNumber(index); } }

        public bool MoveNext() {
            index++;
            return true;
        }

        public void Reset() {
            index=0;
        }
    }

    public IEnumerator<long> GetEnumerator() {
        return new GeneratorEnumerator();
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() {
        return GetEnumerator();
    }
} 
```

此代码用于枚举并发线程中的数字并对其求和。有没有办法防止每次调用 GenerateToNthNumber 时都必须锁定？我试过这段代码：

```
 private long GenerateToNthNumber(int n) {
        if(numsList.Count<n) {
            lock(syncRoot) {
                while(numsList.Count<n)
                    GenerateNextNumber();
            }
        }
        return numsList[n-1];
    } 
```

但是，当测试枚举并汇总多个并发线程中的数字时，并非所有结果都以相同的总和结束。我的目标是如果已经生成了所要求的数字，则进行非阻塞读取（如果可能的话）。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:26:02.737

该方式`List`已实现，在另一个线程中写入时无法安全地在一个线程中读取。我建议您改用嵌套的已知大小数组，这些数组一旦分配就永远不会被放弃（例如，一旦分配了将容纳的数组`theList[15691]`，则该项目将永远不会被任何其他数组容纳）。这样的东西可以很容易地用于实现一个只添加列表，该列表在添加项目时需要锁定，但本质上是线程安全的，无需锁定即可读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T05:00:12.133

您是否考虑过使用线程安全集合？

[http://msdn.microsoft.com/en-us/library/dd997305.aspx](http://msdn.microsoft.com/en-us/library/dd997305.aspx)

# relative-path - 在 JS 文件中访问的另一个文件夹中的图像的相对 URL

> ID：14189472
> 
> 赞同：-1
> 
> 时间：2013-01-07T03:29:27.597
> 
> 标签：relative-path

我有这个以“myfolder”作为主文件夹的 Wordpress 插件文件结构。此主文件夹内还有另一个名为“resources”的子文件夹。在此资源文件夹中包含两个子文件夹：a）JS b.）图像

在图像文件夹中，我有一个图像“myimage.png”。在 JS 文件中，我有一个名为“myscript.js”的脚本。

我想访问我的javascript文件“myscript.js”中图像文件夹中的图像“myimage.png”。

我尝试了以下方法，但它不起作用（无法解决）：

```
<img src="../images/myimage.png">
<img src="images/myimage.png">
<img src="resources/images/myimage.png">
<img src="../resources/images/myimage.png">
<img src="myfolder/resources/images/myimage.png">
<img src="../myfolder/resources/images/myimage.png"> 
```

当然绝对 URL 路径有效，但我希望此应用程序与其他站点一起使用，因此编码绝对 URL 路径不是一个可行的解决方案。

我知道 Wordpress 也有这个神奇的功能：

```
$myicons= plugins_url('resources/images/myimage.png', __FILE__ ); 
```

但这仅适用于 PHP 插件文件，我正在访问 JS 文件中的图像。任何想法如何在不重新排列当前文件结构的情况下完成这项工作？Wordpress 中是否有等效于“plugins_url”的 JS 函数？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:40:40.410

我在这里得到答案：[https ://wordpress.stackexchange.com/questions/78521/plugin-relative-url-to-images-in-another-folder-accessed-inside-a-js-file](https://wordpress.stackexchange.com/questions/78521/plugin-relative-url-to-images-in-another-folder-accessed-inside-a-js-file)

诀窍是使用[http://codex.wordpress.org/Function_Reference/wp_localize_script](http://codex.wordpress.org/Function_Reference/wp_localize_script)然后将图像路径作为对象传递并在您的 JS 代码中访问它。

# android - 在 Android 中使用 AccountManager 到 Google Drive 的 OAuth2

> ID：14189475
> 
> 赞同：3
> 
> 时间：2013-01-07T03:30:02.510
> 
> 标签：android, oauth-2.0, google-drive-api

我正在尝试在 Android 中为 Google Drive 使用 AccountManager 获取身份验证令牌：

```
 String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";

    GoogleAccountManager accountManager = credential.getGoogleAccountManager();
    accountManager.getAccountManager().getAuthToken(
                    credential.getSelectedAccount(),        // Account retrieved using getAccountsByType("com.google")
                    AUTH_TOKEN_TYPE,                        // Auth Token Type
                    null,                                   // Authenticator-specific options
                    this,                                   // Your activity
                    new OnTokenAcquired(),                  // Callback called when a token is successfully acquired
                    new Handler(new OnAuthTokenError()));   // Callback called if an error occurs 
```

我从 logcat 得到错误代码：

```
01-07 11:03:13.454 I/GLSUser ( 4608): GLS error: **INVALID_LANGUAGE** xxxx@gmail.com oauth2:https://www.googleapis.com/auth/drive
01-07 11:03:13.454 V/GoogleLoginService( 4608): Returning error intent with: ComponentInfo{com.google.android.gsf.login/com.google.android.gsf.login.LoginActivity} 
```

我不太明白为什么它在这里显示“INVALID_LANGUAGE”，有人有想法吗？谢谢。

# asp.net - 在 asp.net 中继器 HtmlTableRow 上设置静态 clientId

> ID：14189477
> 
> 赞同：0
> 
> 时间：2013-01-07T03:30:31.053
> 
> 标签：asp.net, repeater

我有一个Repeater，它在每个ItemTemplate 中包含一个表行。在我的数据中，我有一个名为 EditKey 的 Guid。我想将此 EditKey 放入 id 字段中。

我试图像这样添加它：

" clientidmode="静态">

但我得到一个解析器错误：

控件的 ID 属性只能使用标记中的 ID 属性和简单值来设置。例子：

我无法在代码隐藏中操作 id。解决这个问题的最佳方法是什么？

劳埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T20:05:35.507

我想通了。我试图将 tr 作为服务器控件。我删除了 runat="server" 并将我的 Guid 作为纯 html 绑定到 id 属性中。随着云层散开，阳光开始照耀，解析器不再有任何抱怨。

# optimization - NASM 预取

> ID：14189484
> 
> 赞同：2
> 
> 时间：2013-01-07T03:30:48.637
> 
> 标签：optimization, assembly, nasm, intel-syntax

我在 NASM 文档中遇到了以下说明，但我无法完全理解它们。可悲的是，关于这些指令的英特尔文档也有些缺乏。

```
PREFETCHNTA m8                ; 0F 18 /0        [KATMAI] 
PREFETCHT0 m8                 ; 0F 18 /1        [KATMAI] 
PREFETCHT1 m8                 ; 0F 18 /2        [KATMAI] 
PREFETCHT2 m8                 ; 0F 18 /3        [KATMAI] 
```

谁能提供一个简洁的指令示例，比如在给定地址缓存 256 个字节？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T08:45:33.637

这些指令是用于建议 CPU 尝试将高速缓存行预取到高速缓存中的提示。因为它们是提示，CPU 可以完全忽略它们。

如果 CPU 确实支持它们，那么 CPU 将尝试预取，但如果涉及 TLB 未命中，CPU 将放弃（并且不会预取）。这是大多数人弄错的地方（例如，未能进行“预加载”，您插入一个虚拟读取以强制 TLB 加载，这样就不会阻止预取工作）。

预取的数据量为 32 字节或更多，取决于 CPU 等。您可以使用 CPUID 来确定实际大小（CPUID 函数 0x00000004，EBX 位 0 到 31 中返回的“系统一致性行大小”）。

如果你预取太晚它没有帮助，如果你太早预取数据可以在使用之前从缓存中逐出（这也没有帮助）。英特尔的“IA-32 英特尔架构优化参考手册”中有一个附录描述了如何计算何时预取，称为“预取调度距离的数学”，您可能应该阅读。

Also don't forget that prefetching can decrease performance (e.g. cause data that is needed to be evicted to make room) and that if you don't prefetch anything the CPU has a hardware prefetcher that will probably do it for you anyway. You should probably also read about how this hardware prefetcher works (and when it doesn't). For example, for sequential reads (e.g. `memcmp()`) the hardware prefetcher does it for you and using explicit prefetches is mostly a waste of time. It's probably only worth bothering with explicit prefetches for "random" (non-sequential) accesses that the CPU's hardware prefetcher can't/won't predict.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:22:20.957

在筛选了一些高度优化的 memcmp 函数等示例之后，我已经弄清楚了如何（在某种程度上）有效地使用这些指令。

这些指令暗示了一个 32 字节的缓存“行”，这是我最初错过的。因此，要将 256 字节缓冲区缓存到 L1 和 L2，可以使用以下指令集：

```
prefetcht1 [buffer]
prefetcht1 [buffer+32]
prefetcht1 [buffer+64]
prefetcht1 [buffer+96]
prefetcht1 [buffer+128]
prefetcht1 [buffer+160]
prefetcht1 [buffer+192]
prefetcht1 [buffer+224] 
```

t0 后缀指示 CPU 将其预取到整个缓存层次结构中。

t1 指示将数据缓存到 L1、L2 等。

t2 延续了这一趋势，预取到 L2 等。

“nta”后缀有点混乱，因为它告诉 CPU 将数据直接写入内存（理想情况下），而不是读/写缓存行。这实际上在数据结构非常大的情况下非常有用，因为可以避免缓存污染，并且可以缓存更多相关数据。

# php - 如何用jquery正确插入html

> ID：14189487
> 
> 赞同：0
> 
> 时间：2013-01-07T03:30:51.373
> 
> 标签：php, jquery

我正在使用这一点 PHP 来返回一大块 html：

```
if ($action = "update")
    {

        connect_db();

        $query = mysql_query("SELECT * FROM convo ORDER BY date ASC") or die (mysql_error());

        while($row = mysql_fetch_array($query))
        {
            $output = $output . '<p>';
            $output = $output . '<b>From:</b> ' .$row['from'];
            $output = $output . ' <b>To:</b> ' .$row['to'];
            $output = $output . ' <b>Message:</b> ' .$row['content'];
            $output = $output . "<br />";
            $output = $output . '</p>';
        }

        //htmlentities($output);

        header('Content-Type: application/json');
        echo json_encode( $output );
    } 
```

`<div>`然后用这个 jQuery将它插入到 a中：

```
function update(){

        $.ajax({
            type: "GET",
            url: "actions.php",
            data: {  
                'action': 'update'
                },
            dataType: "json",
            success: function(data)
            {
                console.log('update called');
                console.log( data);
                $('#history').text( data );

                //$('#status').text('sent!');
            }
        });             

        setTimeout(update, 5000);
    } 
```

ajax 调用有效并返回正确的 html，但是当插入它时没有格式化，我可以在浏览器中看到所有的 html 代码。见示例图片：![浏览器输出](../Images/d434e5c2f03a97ea1a99061624446216.png)

应该使用其他东西`.text`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:34:15.333

更改`$('#history').text( data );`为`$('#history').html( data );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:35:48.373

您在 php 中创建 JSON，并且`json`在需要 html 时无缘无故地使用 dataType。

只需在 php 中输出 html 字符串并`dataType:'json`从 AJAX 中删除。

```
echo  $output ; 
```

然后使用`html()`方法插入

```
 $('#history').html( data ); 
```

该`load()`方法非常适合您的情况。这是一种`$.ajax`捷径。您可以将所有 AJAX 替换为：

```
 $('#history').load("actions.php", { 'action': 'update'},function(){
     console.log('new content inserted now')
 }) 
```

API 参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

# python - Python - Pygame - 学习 get_pressed

> ID：14189488
> 
> 赞同：0
> 
> 时间：2013-01-07T03:30:59.673
> 
> 标签：python, object, keyboard, pygame

我正在学习 python 和 pygame。在我的代码中找到问题时，我有点挣扎。当我按住一个键并同时按下另一个键，然后以我按下它们的相同顺序放开它们时，有时会使我的小角色朝相反的方向向后移动。

这是我正在努力解决的代码：

```
while running:
for event in pygame.event.get():
    if event.type == KEYDOWN:
        keystate = pygame.key.get_pressed()
    if event.type == pygame.QUIT: # if user clicked close
        running = False # flag done to exit this loop

# all game logic / controls should go below this comment
    elif event.type == KEYDOWN:
        if keystate[K_SPACE]:
            print ('pressed space')
            player.move_up = True
        elif keystate[K_RIGHT]:
            print ('pressed right')
            player.move_right = True
        elif keystate[K_LEFT]:
            print ('pressed left')
            player.move_left = True
    elif event.type == KEYUP:
        if keystate[K_SPACE]:
            print ('released space')
            player.move_up = False
        elif keystate[K_RIGHT]:
            print ('released right')
            player.move_right = False
        elif keystate[K_LEFT]:
            print ('released left')
            player.move_left = False

if player.move_up:
    player.pos[1] -= 3
if player.move_up == False:
    if player.pos[1] < ground_level:
        player.pos[1] +=3
if player.move_right:
    player.pos[0] += 5
if player.move_left:
    player.pos[0] -= 5` 
```

到目前为止，我还没有任何实际的物理知识，他只是飞来飞去。但没关系，我只是想解决我已经遇到的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:53:46.073

您永远不会更新事件`keystate`的价值`KEYUP`。`KEYDOWN`因此，无论何时触发最后一个事件，它仍然具有任何值。

要解决此问题，请更改此...

```
if event.type == KEYDOWN:
    keystate = pygame.key.get_pressed() 
```

对此：

```
if event.type in (KEYDOWN, KEYUP):
    keystate = pygame.key.get_pressed() 
```

# c++ - OpenCV 无法使用 imwrite 写入图像

> ID：14189492
> 
> 赞同：4
> 
> 时间：2013-01-07T03:31:08.350
> 
> 标签：c++, image-processing, opencv

我正在尝试将我创建的 Mat 格式写入 jpeg 文件，但我得到的只是一个未处理的异常。从文档中可以看出

> 使用此功能只能保存 8 位（或 16 位无符号 (CV_16U)，在 PNG、JPEG 2000 和 TIFF 的情况下）单通道或 3 通道（具有“BGR”通道顺序）图像。

所以我使用下面的代码创建了一个 Mat：

```
Mat watermark(5,5,CV_16U);  
imwrite("C:\\watermark.jpg",watermark); 
```

但是，我无法将图像写入 jpeg。它适用于 BMP 格式，但不适用于 JPG 或任何其他格式。有人建议我将其转换为 CV_16U 或 8U，但效果不佳，而且我确实对 C:\ 目录具有写权限。

我错过了一步吗？还是有其他方法可以使用 OpenCV 将图像保存为 JPG？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-06T22:13:02.983

如果您使用的是最新的 opencv (v3.0) 或更高版本以及 windows x64 位版本，则某些 opencv 的功能在调试模式下无法正常工作……您必须在发布模式下运行代码，那么一切都会完美运行。

我在 opencv3.1 和 x64 位中发现的问题 - 调试模式

1.  imwrite(filename, image) 获取异常（读取访问冲突）。
2.  haarCascade.detectMultiScale(...) 检测大量对象。

要解决这些问题，请在发布模式下运行应用程序。

仍在寻找在调试模式下解决这些问题的好方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-06-29T08:49:00.277

此代码工作正常并制作/重写“watermark.jpg”：

```
#include <opencv2\core\core.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace cv;

int main() {    
    Mat watermark(5,5,CV_16U);
    imwrite("C:\\watermark.jpg",watermark);
    return 0;
} 
```

我有 Win7、Wascana Eclipse（MinGW GCC 编译器）、Opencv 2.4.5

# javascript - 在函数中，在变量之前使用/不使用 var 会发生什么？

> ID：14189495
> 
> 赞同：1
> 
> 时间：2013-01-07T03:31:21.810
> 
> 标签：javascript

这是我的代码

```
var a = this.innerHTML;

var b = 'blababibbaib';

if(a !== b)
    {
        c = a;
        return this.innerHTML = b;
    }
else
    {
        return this.innerHTML = c;
    } 
```

并使用 var

```
var a = this.innerHTML;

var b = 'blababibbaib';

if(a !== b)
    {
       var c = a; // here with the var it makes c undefined :-(
        return this.innerHTML = b;
    }
else
    {
        return this.innerHTML = c;
    } 
```

我这样做的原因是因为我想要一个 onclick 事件的函数，它会在原始和 var b 之间来回改变。真的只是为了好玩。

但是我不明白为什么当你在 c 变量前面添加 var 时，一旦你点击它就会使它变得未定义。有人会照亮我吗？

我猜它在函数中使用时与变量范围有关？？？？

提前致谢 ：-）

编辑：

好的，我这样做是为了用 var 声明它，但我仍然不确定为什么。

在函数之外，我在声明它之前添加了一个 if 检查 c

```
if(!c) var c = ''; 
```

但就像我说的那样，我仍然想听听发生了什么以及为什么谢谢:-)

编辑2：谢谢大家，现在阅读有关提升的信息。

我想我很困惑，似乎即使你也不需要检查 c 。想法可能很重要……哦，好吧。再次感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T03:35:05.007

第二个示例中发生的情况等价于：

```
var a = this.innerHTML;

var b = 'blababibbaib';

var c; // all "var" are hoisted to the top of a function body

if(a !== b)
    {
        c = a;
        return this.innerHTML = b;
    }
else
    {
        // local c variable not set yet - undefined
        return this.innerHTML = c;
    } 
```

显然`c`这里是未定义的，因为它只有在未设置时才输出。我怀疑你真正想要的是：

```
var a; //This persists after the function is invoked

myelement.onclick = function () {
    if (!a) { // Only save the value if it isn't already set
        a = this.innerHTML;
    }
    var b = 'blababibbaib';

    if (this.innerHTML == b) {
        return this.innerHTML = a;
    } else {
        return this.innerHTML = b;
    }
}; 
```

你可以[在这里](http://jsfiddle.net/gkBMA/)看到它。

就第一个片段而言，它之所以有效，是因为 的值`c`不是函数的本地值，并且在调用后仍然存在。当您在函数体中分配或引用变量而不使用`var`关键字声明它时，它会自动引用`window`具有相同名称的属性。考虑以下：

```
window.c = "Hello, world.";

//Note how there is no local c variable;
//the c here refers to window.c
function test1(){
    alert(c);
}

//There is a c variable local to the 
//function, so the value alerted is not the value of window.c
function test2(){
    var c;
    alert(c);
}

test1(); // alerts "Hello, world."
test2(); // alerts "undefined" 
```

在第一个片段中，只要 HTML 不是 ，您就将 的值`window.c`更改`this.innerHTML`为`"blababibbaib"`。当值为 时*，* `"blababibbaib"`您依赖于`window.c`重置元素的`innerHTML`.

您可能想阅读 JS 中的[提升](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-javascript-hoisting-explained/)以及[隐式全局变量](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:35:03.340

没有`var`前缀`c`就成为一个全局变量，并且在所有范围内都可用。

JavaScript 仅具有函数范围，因此`var`将变量范围用于最近的函数上下文（如果未在函数内声明，则为全局范围）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:35:38.283

这可能是因为你的变量`c`只存在于 if 语句中，所以你需要这样做：

```
var a = this.innerHTML;

var b = 'blababibbaib';
var c;
if(a !== b)
    {
       var c = a; // here with the var it makes c undefined :-(
        return this.innerHTML = b;
    }
else
    {
        return this.innerHTML = c;
    } 
```

使用第一个代码，因为您没有使用`var c`，所以它是`c`一个全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T03:34:50.297

按照您的逻辑，c 只会在 if 中设置，而不会在 else 中设置。所以如果`c`是一个存在于函数外部的全局变量，它可以在调用之间保持“状态”。如果你用`var`inside 声明它，那么它对每个调用都是本地的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T03:37:28.470

当您不为特定范围内的变量分配新内存时，它默认使用与父范围链匹配的变量。

使用 'var' 关键字会触发当前范围内的内存分配，否则会将值分配为 window 的成员，这在对函数的调用中是持久的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-07T03:42:51.800

这有点令人困惑，但是当您知道时应该很容易记住。`var`当您在定义变量时省略关键字时，该变量将附加到全局范围。这在编写良好的程序中通常是不受欢迎的，因为您有变量浮动，当范围到期时应该将其处理掉。

在您的情况下，当您`var c = a`在`if`语句中添加时，即使 javascript 自动将变量[*提升*](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)到函数范围 - 即变量名称将存在 - 但在遇到代码行之前它不会为其分配值`var c = a`。默认情况下，任何未赋值的变量都会获得`undefined`状态。

当您省略 , 时`var`，`c`将提升到全局范围，并且`c`只要您在页面上，全局状态就会保持该值。因此，回到该`else`子句，您将获得一个有效但旧的 . 值`c`。

根据经验，没有定义的变量`var`不是一个好习惯，您应该定义在函数开头附近使用的所有变量，以避免与*提升*等混淆，特别是如果您来自 C/C++/爪哇背景。

# node.js - 事件驱动与非事件驱动 Web 服务器中的线程

> ID：14189496
> 
> 赞同：11
> 
> 时间：2013-01-07T03:31:28.410
> 
> 标签：node.js

以下两张图是我对线程在事件驱动的 Web 服务器（如 Node.js + JavaScript）中与非事件驱动的 Web 服务器（如 IIS + C#）相比如何工作的理解

![传统（非事件驱动）Web 服务器](../Images/3a56fa31bc505899489afaa02fc54ef2.png)

![在此处输入图像描述](../Images/9efbe56678a5f5c29eaeef7d8e5054d3.png)

从图中很容易看出，在传统的 Web 服务器上，用于执行 3 个长时间运行的操作的线程数比事件驱动的 Web 服务器上的多（3 比 1。）

我认为我得到了正确的“传统 Web 服务器”计数 (3)，但我想知道事件驱动的 (1)。以下是我的问题：

1.  假设在事件驱动的场景中只使用了一个线程是否正确？这不可能是正确的，必须创建一些东西来处理 I/O 任务。正确的？

2.  事件服务器如何处理 I/O？假设 I/O 是从数据库中读取的。我怀疑网络服务器必须创建一个线程来交出连接到数据库的工作？正确的？

3.  如果事件驱动的 Web 服务器确实创建了线程来处理 I/O，那么收益在哪里？

4.  我的困惑的一个可能解释是，在传统和事件驱动两种情况下，*确实创建了三个单独的线程来处理 I/O*（图中未显示），但区别实际上在于线程数Web 服务器本身，而不是在 I/O 线程上。那准确吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T11:19:58.173

1.  Node 可以使用线程进行 IO。JS 代码运行在单线程中，但所有的 IO 请求都在并行线程中运行。如果您希望某些 JS 代码在并行线程中运行，请使用 thread-a-gogo 或其他一些可以减轻这种行为的包。

2.  与 一样`1.`，线程由 Node 创建用于 IO 操作。

3.  除非您愿意，否则您不必处理线程。更容易开发。至少这是我的观点。

4.  可以对节点应用程序进行编码，使其像另一个 Web 服务器一样运行。通常，JS 代码在单个线程中运行，但有一些方法可以使其表现不同。

就个人而言，如果你想尝试线程，我推荐threads-a-gogo（包名不是那么暴露，但它很容易使用）。它更快。Node 还支持多个进程，如果您也想尝试一下，可以运行一个完全独立的进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T15:34:22.310

描绘 NodeJS 的最佳方式就像一只愤怒的松鼠（即您的线程）在轮子中运行，有无限数量的鸽子（您的 I/O）可用于传递消息。

节点中的 I/O 是“免费的”。你的松鼠负责建立连接并将鸽子送走，然后在鸽子检索数据时继续做其他事情，只在鸽子返回时处理数据。

如果你编写了糟糕的代码，你最终可能会让松鼠等待每只鸽子。

所以总是写非阻塞的 i/o 代码。

如果你能鼓励你的鸽子答应回来；）

Promise 和生成器可能是您可以采取的最佳方法。

但是，您始终可以使用 Node 集群建立一个主松鼠，该松鼠将根据主松鼠可以找到的用于分配工作的 CPU 数量来繁殖子松鼠。

希望这会有所帮助，并注意完全没有汽车类比。

# entity-framework - 将存储过程映射为实体方法而不是上下文方法

> ID：14189499
> 
> 赞同：1
> 
> 时间：2013-01-07T03:31:31.487
> 
> 标签：entity-framework

我正在寻找一种方法来将与表逻辑相关的存储过程映射为为该特定表生成的实体中的函数，而不是整体上下文中的函数。

例如，我从现有的银行数据库中生成了 edmx，我得到了一个 Context 和几个与表相对应的实体。假设我们有帐户、交易、地址等表......并且我有一个存储过程返回帐户的当前余额。我想将此存储的过程映射到 Account 实体而不是上下文。这将帮助我调用 Account.GetBalance() 而不是 Context.GetBalance()。

这在实体框架中可能吗？我在 msdn 中进行了大量搜索并阅读了几篇文章/博客，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:08:09.133

不，除非您在实体中手动包装在上下文中公开的方法，否则这是不可能的 - 这将使您的实体具有持久性意识并依赖于 EF，这目前被认为与设计人员应该遵循的完全相反。

就 EF 余额而言，应该是帐户实体的属性，而检索余额应该意味着重新加载帐户或在帐户集/上下文上执行投影查询（或您的程序）。查询也是从上下文和存储过程中执行的。

# bash - 从代表 bash 命令行的字符串中删除任何参数

> ID：14189518
> 
> 赞同：0
> 
> 时间：2013-01-07T03:34:08.377
> 
> 标签：bash, shell, scripting

我需要编写一个 bash 函数，给定一个表示命令行的字符串，它只返回命令行中的第一个标记（即被调用的程序，**其名称中可能有空格**），删除任何参数。我想在**不**使用`sed`or`awk`或任何东西的情况下做到这一点，除了 bash 内置函数和变量操作。

例如：

```
drop_args "ls" # prints "ls"
drop_args "ls -al" # prints "ls"
drop_args "spaces\ in\ name --bad-idea" # prints "spaces\ in\ name" 
```

我试过的是：

```
drop_args () { echo $1; } 
```

然后我调用`drop_args ls -al`，即不引用字符串，这对于我可以看到的所有情况都很好，除了`drop_args spaces\ in\ name`.

如果我不能以我规定的限制正确处理空格情况的方式执行此操作，我并不太担心，但我想我至少需要可靠地检测到这种情况并显示适当的错误消息。

这与我之前关于[取消引用 shell 别名](https://stackoverflow.com/questions/14180906/programmatically-dereference-resolve-aliases-in-bash)的问题有关；这是我最终要在那里完成的事情的一个子问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:14:53.110

```
drop_args()
{
  read cmd args <<< "$1"
  echo "$cmd"
} 
```

这失去了反斜杠，但它们从一开始就不是真的“在那里”。

# android - 尝试使用 getContentResolver() 初始化 Cursor 时出现 NullPointerException

> ID：14189520
> 
> 赞同：1
> 
> 时间：2013-01-07T03:34:24.553
> 
> 标签：android, nullpointerexception, android-cursor

所以我想做的是在另一个活动中显示我的数据库并添加一个 onItemClickListener。然后我通过使用 URI 将我的信息发送到另一个类。我正在检索收件人类中的 uri 并使用它来创建光标。当我尝试使用 getContentResolver().query() 初始化我的游标时，我的日志中出现空指针异常。代码行如下所示：

```
Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
```

我使用的 uri 变量来自这行代码：

```
Uri uri = getIntent().getData(); 
```

为了确保返回某种 uri，我在日志中输出 uri 并得到： content://com.example.myfirstapp.ContactProvider/CONTACT/(所选项目的 id)

这是我的日志：

```
01-06 21:31:43.913: E/AndroidRuntime(619): Caused by: java.lang.NullPointerException
01-06 21:31:43.913: E/AndroidRuntime(619):  at com.example.myfirstapp.ContactActivity.onCreate(ContactActivity.java:22) 
```

第 22 行的代码：

```
Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:23:05.813

你的线应该是这样的

```
Uri uri = getIntent().getData();
Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
```

而不是这个

```
Cursor cursor = getContentResolver().query(uri, null, null, null, null);
Uri uri = getIntent().getData(); 
```

您在初始化之前已经使用了 uri。并检查清单权限

```
android.permission.READ_CONTACTS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:23:52.377

你可以试试这个

```
Cursor cursor = getApplicationContext().getContentResolver().query(uri, null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-17T18:39:32.857

这段代码

```
Cursor cursor = getApplicationContext().getContentResolver().query(uri, null, null, null, null); 
```

做这项工作。之前不要调用你的函数`oncreate`。

# objective-c - 尝试在带有按钮的自定义单元格内创建 IBAction

> ID：14189521
> 
> 赞同：1
> 
> 时间：2013-01-07T03:34:46.200
> 
> 标签：objective-c, ios, uitableview, mfmailcomposeviewcontroller

我在 nib 文件中创建了自己的自定义单元格，但收到一个我不理解的错误。

```
[self presentViewController:_myMail animated:YES completion:nil]; 
```

在这一行中，我收到错误`No visible @interface for "LeadCell" declares the selector presentViewController:animated:completion:` LeadCell 是自定义控制器的名称。我想创建一个用户单击按钮并打开邮件编辑器视图以发送电子邮件的操作。

任何清晰度将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T04:03:31.793

解决此问题的一种干净方法是将视图控制器与您的自定义单元格一起存储，如下所示：

```
@interface LeadCell {
    __weak UIViewController *ctrl;
}
-(id)initWithViewController:(UIViewController*)c;
...
@end

@implementation LeadCell

-(id)initWithViewController:(UIViewController*)c {
    if (self = [super init]) {
        ctlr = c;
    }
    return self;
}

@end 
```

当您在“索引路径行的单元格”中创建新单元格时，将视图控制器传递给单元格的初始化程序。这样，单元将能够“找到”控制器，让您通过使用`ctrl`而不是编码您的操作`self`：

```
[ctrl presentViewController:_myMail animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T04:01:15.457

因为您试图从 UITableViewCell 的子类中呈现视图控制器。`UITableViewCell`没有这样的方法来呈现视图控制器。

presentViewController 方法是为 ViewController 及其子类声明的。

**tableViewCell 不是 viewcontroller 它是 view**。所以没有类似`presentViewController`for 的方法`UITableViewCell`。

# java - Processing Java 环境中的构造函数出现问题

> ID：14189522
> 
> 赞同：0
> 
> 时间：2013-01-07T03:34:47.650
> 
> 标签：java, constructor, processing

我是 Java 新手，在处理环境中工作。我想创建一个包含一些对象的类，但是当我尝试构造这些类的对象时出现错误。

`bzaVertex`应该是对象中的一个对象`bza`，但是当我似乎试图构造它时，处理说“构造函数sketch.BzaVertext（int）是未定义的。” 我不明白 Bza 是如何正确调用其构造函数的，但不是子对象——我似乎以同样的方式调用它们？

我在主类中都有这段代码。我正在使用处理 2.0b7。我究竟做错了什么？

```
Bza bza;
void setup() {
  bza = new Bza();
}

public class BzaVertex {
  public void BzaVertex(int d) {
  }
}

public class Bza {
  BzaVertex v1; 

  public void Bza() {
    v1 = new BzaVertex(4);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:42:46.670

构造函数没有返回类型，因此您需要从它们中删除 void

```
class BzaVertex {
    public BzaVertex(int d) {
    }
}

class Bza {
    BzaVertex v1; 

    public Bza() {
        v1 = new BzaVertex(4);
    }
    }

    public class Main
    {
    public static void main(String[] args) 
    {
        Bza bza;
        bza = new Bza();
    }
     } 
```

那应该可以解决错误

# ios - 时区问题 - 一年得到意想不到的结果，怀疑我没有正确处理时区

> ID：14189524
> 
> 赞同：1
> 
> 时间：2013-01-07T03:35:00.200
> 
> 标签：ios, date, timezone, date-format

我想我不明白如何正确管理时区。我有一个从各种方法生成的日期对象，包括 UIDatepicker，它使用 UI 的设备时区并生成一个 UTC+0000 的日期对象。

我也试图从日期对象中提取 4 位数的年份，但我得到了一个意想不到的结果。我认为问题在于我需要将时区应用于日期格式化程序，但这似乎没有帮助。这是我的代码：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
NSTimeZone *currentTimeZone = [NSTimeZone localTimeZone];
[dateFormat setTimeZone:currentTimeZone];
[dateFormat setDateFormat:@"YYYY"];
NSLog(@"About to use self.displayedDate: %@",self.displayedDate);
NSString *gregorianYear = [dateFormat stringFromDate:self.displayedDate];
NSLog(@"Calculated Gregorian year: %@ from date %@",gregorianYear,self.displayedDate); 
```

我目前在 CST。当我运行它时，我得到以下输出：

```
2013-01-06 21:22:47.168 293 Calendar[4835:907] About to use self.displayedDate: 2012-12-31 03:22:26 +0000
2013-01-06 21:22:47.171 293 Calendar[4835:907] Calculated Gregorian year: 2013 from date 2012-12-31 03:22:26 +0000 
```

我的应用程序中的日期最初是从当前日期/时间设置的。然后我使用仅为日期配置的 UIDatePicker 控件将日期设置为 2012 年 12 月 30 日（这就是 UIDatePicker 控件上显示的内容）。日期选择器的返回值直接插入到产生上述输出的代码中。对我来说很明显它应该产生 2012 而不是 2013，所以我一定遗漏了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T03:46:08.107

不要使用格式符号：“YYYY”！改用“yyyy”！

“YYYY”是周年，这不是你想要的！

另请参阅[将 NSString 转换为 NSDate 在某些情况下会增加一年](https://stackoverflow.com/questions/14184648/converting-nsstring-to-nsdate-adds-one-year-in-some-cases/14184671#14184671)

# java - 有什么方法可以使用java调用没有返回值的PostgreSql过程？

> ID：14189527
> 
> 赞同：1
> 
> 时间：2013-01-07T03:35:04.553
> 
> 标签：java, postgresql, jdbc

最近，我创建了一个 postgresql 的函数，如下所示：

```
CREATE OR REPLACE FUNCTION POSTPRC(A IN NUMERIC)
**RETURNS VOID**
AS
$$
BEGIN
... ...
END;
$$ LANGUAGE PLPGSQL; 
```

如何使用 java 调用它，我使用了如下代码：

```
CallableStatement upperProc = con.prepareCall("{ ? = call POSTPRC( ? ) }");
upperProc.registerOutParameter(1, Types.NULL);
upperProc.setInt(2,23);
int flag=upperProc.executeUpdate(); 
```

但是每次都会出现错误，怎么办才能解决这个问题？

异常显示为：**java.lang.ArrayIndexOutOfBoundsException: 2。**

具有相应参数的过程 POSTPRC 可以在 pgAdminIII 工具中成功执行。

* * *

postgresql 应该使用语句 likes-{? = call procedure(?,?,?)}，这是通过java调用的唯一方法。我已经测试了 {call procedure(?,?,?)} 等语句。每次都失败。其实postgresql的过程是函数，如果我们要调用postgresql的过程，我们最好定义postgresql的过程，不带参数或返回值......

**欢迎任何意见！**

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:41:38.713

我不太确定，`?`如果你的函数没有返回值，为什么你需要第一个。你也可以写

```
CallableStatement upperProc = con.prepareCall("{call POSTPRC( ? ) }"); 
```

看看[这里](http://docs.oracle.com/javase/6/docs/api/java/sql/CallableStatement.html)

顺便说一句，如果您的函数没有返回值，那么您不需要使用 CallableStatements 执行此操作 - 您可以/应该也使用 PreparedStatement：

```
PreparedStatement pstmt = con.prepareStatement("SELECT * FROM POSTPRC( ? )")
pstmt.setInt(1,23);
pstmt.execute(); // omit the result 
```

# mysql - MySQL 字符串操作和数据重新排列

> ID：14189530
> 
> 赞同：0
> 
> 时间：2013-01-07T03:35:47.817
> 
> 标签：mysql, sql

由于多个遗留系统，我正在处理的一个项目有一个由 10 列组成的表。

在这 10 列中，两条数据将始终出现在最后五列中的两列中，前面有一个标识字符串。

最后 5 列是`pair0`, `pair1`, `pair2`, `pair3`, 和`pair4`

我在这五列中的两列中查找的数据格式是`tx-speed=3D...`和`rx-speed=3D...`。在这些字符串中的每一个之后是一系列任意长度的数字。

我无法修改将数据插入此表的程序，我只能在之后修改它。

在每一行，现有的和未来的，我想确保后面的数字系列`tx-speed=3D`在`pair1`列中，并且后面的数字系列`rx-speed=3D`在`pair2`列中。这两列的内容并不重要，只要`tx-speed`和`rx-speed`值不相互覆盖即可。

作为项目的不幸约束，这不能在数据库触发器上完成，它必须作为 cron 作业或类似作业的一部分。

我的大问题是我不是 SQL 管理员。我可以用许多可用语言之一编写脚本，但效率将是关键，从 SQL 中提取数据以检查它并从不同平台重新插入它的效率将非常低。

我开始尝试编写一个 SQL 脚本来执行此操作，但我对 SQL 的工作原理还不够了解，甚至无法使其正常工作。

为了（希望）澄清一点，我整理了以下伪代码，希望有人能够从中进行 SQL 查询，我可以将其用于我的目的。

```
for each row:

@tx = ""
@rx = ""
txstr = "tx-speed=3D"
rxstr = "rx-speed=3D"
if (pair0 LIKE txstr+"%")
  @tx = SUBSTRING(pair0, FROM txstr.count-1)
elsif (pair1 LIKE txstr+"%")
  @tx = SUBSTRING(pair0, FROM txstr.count-1)
elsif (pair2 LIKE txstr+"%")
  ...
endif
if (pair0 LIKE rxstr+"%")
  @rx = SUBSTRING(pair0, FROM rxstr.count-1)
elsif (pair1 LIKE rxstr+"%")
  ...
endif

pair1 = @tx
pair2 = @rx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T06:14:38.203

如果您能够创建存储过程（您说您不能创建触发器）：

```
delimiter //

drop procedure curdemo  
//

create procedure curdemo()
begin
  DECLARE done INT DEFAULT FALSE;
  declare p0 char(20);
  declare p1 char(20);
  declare p2 char(20);
  declare p3 char(20);
  declare p4 char(20);
  declare a mediumint;
  declare cur1 cursor for select id,pair0,pair1,pair2,pair3,pair4 from test.t2;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

  open cur1;

  read_loop: loop
    fetch cur1 into a,p0,p1,p2,p3,p4;
    if done then
        leave read_loop;
    end if;
    if p0 like 'tx-speed=3D%' then
        update t2 set pair1 = substring_index(p0, 'tx-speed=3D', -1)
            where id = a;
    elseif p1 like 'tx-speed=3D%' then
                update t2 set pair1 = substring_index(p1, 'tx-speed=3D', -1)
            where id = a;
        elseif p2 like 'tx-speed=3D%' then
                update t2 set pair1 = substring_index(p2, 'tx-speed=3D', -1)
            where id = a;
    end if;

        if p0 like 'rx-speed=3D%' then
                update t2 set pair2 = substring_index(p0, 'rx-speed=3D', -1)
            where id = a;
        elseif p1 like 'rx-speed=3D%' then
                update t2 set pair2 = substring_index(p1, 'rx-speed=3D', -1)
            where id = a;
        elseif p2 like 'rx-speed=3D%' then
                update t2 set pair2 = substring_index(p2, 'rx-speed=3D', -1)
            where id = a;
        end if;
  end loop;
  close cur1;
end
//

drop table t2 //
create table t2 (
    id mediumint not null auto_increment,
    pair0 varchar(20),
    pair1 varchar(20),
    pair2 varchar(20),
    pair3 varchar(20),
    pair4 varchar(20),
    primary key(id)
)
//
insert into t2 (pair0, pair1) values ('tx-speed=3D1230', 'rx-speed=3D1231') //
insert into t2 (pair0, pair2) values ('tx-speed=3D1232', 'rx-speed=3D1233') //
insert into t2 (pair4, pair3) values ('tx-speed=3D1233', 'rx-speed=3D1235') //
insert into t2 (pair2, pair3) values ('tx-speed=3D1236', 'rx-speed=3D1237') //

select * from t2 //

call curdemo()
//

select * from t2 // 
```

您的 cron 工作将只是“调用 curdemo()”部分。您的表需要某种 rowid。

如果这不起作用，则将数据拉出并在不同的平台上检查它是你剩下的，因为你将在“mysql”客户端应用程序中处理数据......所以你不妨在您熟悉的语言。

# c# - 如何仅接受来自在 XML 配置文件中指定 IP 地址的服务器的请求

> ID：14189532
> 
> 赞同：0
> 
> 时间：2013-01-07T03:35:54.133
> 
> 标签：c#

我的要求是，当我提供 URL，然后单击 ConvertToPDf 按钮时，PDF 将被打开。我为此要求创建了一个 Web 服务，它工作正常。我的附加要求是。

安全性 - 它应该只接受来自在 XML 配置文件中指定 IP 地址的服务器的请求

方法 1 - 安全密钥 | HTML URL 方法 2 - 安全密钥 | HTML 两种方法都应该返回 PDF 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:49:32.183

您可以使用 IIS IPRestriction 模块来保护 Web 服务。这可以在您要保护的项目的“功能”选项卡上找到。之前已经回答过了，所以不要重新发明轮子，请查看这个答案：[https ://stackoverflow.com/a/8209369/988355](https://stackoverflow.com/a/8209369/988355)

如果您尚未安装 IPRestriction 角色，它还介绍了如何安装它。

# java - Spring Hibernate 引用 ID 返回“空值”

> ID：14189534
> 
> 赞同：0
> 
> 时间：2013-01-07T03:36:25.353
> 
> 标签：java, spring, hibernate

帮助！，我一直在尝试解决这个问题，但是我无法获取引用的 id 的值，它在保存时返回一个空值。

```
Error: Column 'p_id' cannot be null
org.hibernate.exception.ConstraintViolationException: Column 'p_id' cannot be null
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:74)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy23.executeUpdate(Unknown Source)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:96)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:58)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2870)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3381)
    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:81)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:203)
    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:183)
    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:167)
    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:320)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:287)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:831)
    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:824)
    at org.hibernate.engine.spi.CascadingAction$7.cascade(CascadingAction.java:315)
    at org.hibernate.engine.internal.Cascade.cascadeToOne(Cascade.java:380)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:323)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascadeCollectionElements(Cascade.java:409)
    at org.hibernate.engine.internal.Cascade.cascadeCollection(Cascade.java:350)
    at org.hibernate.engine.internal.Cascade.cascadeAssociation(Cascade.java:326)
    at org.hibernate.engine.internal.Cascade.cascadeProperty(Cascade.java:208)
    at org.hibernate.engine.internal.Cascade.cascade(Cascade.java:165)
    at org.hibernate.event.internal.AbstractSaveEventListener.cascadeAfterSave(AbstractSaveEventListener.java:448)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:293)
    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:193)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:126)
    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:208)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:151)
    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:78)
    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:840)
    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:815)
    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:819)
    at nhtu.dao.UserDAOImpl.addPerson(UserDAOImpl.java:43)
    at nhtu.controller.ApplicantForm.update(ApplicantForm.java:70)
    at nhtu.controller.ApplicantForm.create(ApplicantForm.java:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'p_id' cannot be null
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1040)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2450)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2371)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2355)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 70 more 
```

这是我的模特

```
@Entity
@Table(name="personal_info")
public class Person {

@Id @GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="p_id")
private int personId;

@Column(name="l_name")
private String lastName;

@Column(name="f_name")
private String firstName;

@Column(name="m_name")
private String middleName;

@Temporal(TemporalType.DATE)
@Column(name="b_date")
private Date birthDate;

private String address;

@Column(name="gender")
private String gender;

@Column(name="ext_name")
private String nameExtension;

@Column(name="marital_status")
private String maritalStatus;

@Column(name="c_num")
private String contactNumber;

@Column(name="email")
private String emailAddress;

@Column(name="coll_grad")
private int isCollegeGraduate;

@Column(name="post_grad")
private int isPostGraduate;

@Column(name="undergrad")
private int isUnderGraduate;

@OneToMany(cascade={CascadeType.ALL}, mappedBy="person")
private Collection<Application> application  = new ArrayList<Application>(); //                 
    link to applications

@OneToMany(cascade={CascadeType.PERSIST},mappedBy="personId")
private Collection<EducationalDetails> educationalDetail = new    
    ArrayList<EducationalDetails>(); // link to educational attainments of a person

public Collection<EducationalDetails> getEducationalDetails(){
    return educationalDetail;
}

public void setEducationalDetails(Collection<EducationalDetails> educationalDetail)     
    {
    this.educationalDetail=educationalDetail;
}

public int getPersonId() {
    return personId;
}
public void setPersonId(int personId) {
    this.personId = personId;
}

@OneToMany(cascade={CascadeType.ALL}, mappedBy="person")
private Collection<Employment> employment = new ArrayList<Employment>(); // link to                     
    employee

public Person() {}

public int getIsCollegeGraduate() {
    return isCollegeGraduate;
}
public void setIsCollegeGraduate(int isCollegeGraduate) {
    this.isCollegeGraduate = isCollegeGraduate;
}
public int getIsPostGraduate() {
    return isPostGraduate;
}
public void setIsPostGraduate(int isPostGraduate) {
    this.isPostGraduate = isPostGraduate;
}
public int getIsUnderGraduate() {
    return isUnderGraduate;
}
public void setIsUnderGraduate(int isUnderGraduate) {
    this.isUnderGraduate = isUnderGraduate;
}
public String getLastName() {
    return lastName;
}
public void setLastName(String lastName) {
    this.lastName = lastName;
}
public String getFirstName() {
    return firstName;
}
public void setFirstName(String firstName) {
    this.firstName = firstName;
}
public String getMiddleName() {
    return middleName;
}
public void setMiddleName(String middleName) {
    this.middleName = middleName;
}
public Date getBirthDate() {
    return birthDate;
}
public void setBirthDate(Date birthDate) {
    this.birthDate = birthDate;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getGender() {
    return gender;
}
public void setGender(String gender) {
    this.gender = gender;
}
public String getNameExtension() {
    return nameExtension;
}
public void setNameExtension(String nameExtension) {
    this.nameExtension = nameExtension;
}
public String getMaritalStatus() {
    return maritalStatus;
}
public void setMaritalStatus(String maritalStatus) {
    this.maritalStatus = maritalStatus;
}
public String getContactNumber() {
    return contactNumber;
}
public void setContactNumber(String contactNumber) {
    this.contactNumber = contactNumber;
}
public String getEmailAddress() {
    return emailAddress;
}
public void setEmailAddress(String emailAddress) {
    this.emailAddress = emailAddress;
}
public Collection<Application> getApplication() {
    return application;
}
public void setApplication(Collection<Application> application) {
    this.application = application;
}

public Collection<EducationalDetails> getEducationalDetail() {
    return educationalDetail;
}
public void setEducationalDetail(
        Collection<EducationalDetails> educationalDetail) {
    this.educationalDetail = educationalDetail;
}
public Collection<Employment> getEmployment() {
    return employment;
}
public void setEmployment(Collection<Employment> employment) {
    this.employment = employment;
}
    }

    @Entity
    @Table(name="educ_detail")
    public class EducationalDetails {

@Id @GeneratedValue(strategy=GenerationType.AUTO)
@Column(name="ed_id")
private int educDetailsId;

@ManyToOne(targetEntity=Person.class)
@JoinColumn(name ="p_id",referencedColumnName="p_id")
private Person personId;

@Column(name="level")
private int educationalLevel;

@Column(name="name_school")
private String nameOfSchool;

@Column(name="inc_date")
private String inclusiveDates;

@Column(name="course")
private String course;

@Column(name="year_graduated")
private int yearGraduated;

@Column(name="units_earned")
private int unitsEarned;

public EducationalDetails(){}

/*public EducationalDetails(Person person){
    this.person = person;

}*/

public int getEducDetailsId() {
    return educDetailsId;
}

public void setEducDetailsId(int educDetailsId) {
    this.educDetailsId = educDetailsId;
}

public int getEducationalLevel() {
    return educationalLevel;
}

public void setEducationalLevel(int educationalLevel) {
    this.educationalLevel = educationalLevel;
}

public String getNameOfSchool() {
    return nameOfSchool;
}

public void setNameOfSchool(String nameOfSchool) {
    this.nameOfSchool = nameOfSchool;
}

public String getInclusiveDates() {
    return inclusiveDates;
}

public void setInclusiveDates(String inclusiveDates) {
    this.inclusiveDates = inclusiveDates;
}

public String getCourse() {
    return course;
}

public void setCourse(String course) {
    this.course = course;
}

public int getYearGraduated() {
    return yearGraduated;
}

public void setYearGraduated(int yearGraduated) {
    this.yearGraduated = yearGraduated;
}

public int getUnitsEarned() {
    return unitsEarned;
}

public void setUnitsEarned(int unitsEarned) {
    this.unitsEarned = unitsEarned;
}

public Person getPersonId(){
    return personId;

}

public void setPersonId(Person personId) {
    // TODO Auto-generated method stub
    this.personId = personId;
}

    }

    @Controller
    @RequestMapping("/applicantForm.html")
    public class ApplicantForm {

@Autowired
    private UserDAO userdao;
//private EducationalDetails educDetail  = new EducationalDetails();
public void initBinder(WebDataBinder dataBinder) {
    System.out.println("dataBinder");
    dataBinder.setRequiredFields(new String[] { "firstName", "lastName",             
            "middleName", "address", "gender" });
    dataBinder.registerCustomEditor(String.class, new   
    StringTrimmerEditor(false));
}

@RequestMapping(method = RequestMethod.GET)
public Person setUpForm(@RequestParam(value = "id", required = false) Integer   
    personID) {
    System.out.println("setup form");
    if (personID == null) {
        Person person = new Person();
        EducationalDetails educ1 = new EducationalDetails();
        EducationalDetails educ2 = new EducationalDetails();
        EducationalDetails educ3 = new EducationalDetails();    
        System.out.println(person.getLastName());
        person.getEducationalDetail().add(educ1);
        person.getEducationalDetail().add(educ2);
        person.getEducationalDetail().add(educ3);
        educ3.setPersonId(person);
        educ2.setPersonId(person);
        educ1.setPersonId(person);
        return person;
    } else {
        return userdao.getPersonById(personID);
    }
}

@RequestMapping(params = "create", method = RequestMethod.POST)
public String create(Person person, BindingResult result,
        SessionStatus status) {
    System.out.println("create");
    return update(person,result, status);
}

@RequestMapping(params = "update", method = RequestMethod.POST)
public String update(Person person,BindingResult result, SessionStatus status) {
    //employeeValidator.validate(emp, result);
    System.out.println("update");
    if (result.hasErrors()) {
        System.out.println("has errors");
        return "applicantForm";
    } else {
        userdao.addPerson(person);
        status.setComplete();
        return "redirect:applicantForm.html";
    }

}

   }

   @Repository
   public class UserDAOImpl implements UserDAO {

@Autowired
private SessionFactory sessionFactory;

public SessionFactory getSessionFactory() {
    return sessionFactory;
}

public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
}

public Person addPerson(Person person) {
    Session session = sessionFactory.openSession();
    System.out.println(session);
    try {

        session.beginTransaction();
        session.persist(person);
        session.getTransaction().commit();

    } catch (HibernateException ex) {
        ex.printStackTrace();
        session.getTransaction().rollback();
    } finally {
        session.close();
    }
      return person;

}

    public interface UserDAO {     

public Person addPerson(Person person);
public void modifyPersonDetails(int personId, String lastName, String firstName,            
    String middleName, String nameExtension,
        Date birthDate, String address, String gender, String        
    maritalStatus, String contactNumber, String emailAddress, 
        boolean isCollegeGraduate, boolean isPostGraduate, boolean   
     isUnderGraduate);
public Collection<Person> listAllPersons();
public Collection<Person> searchByName(String firstName, String lastName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:57:10.897

下面方法中创建的 person 对象是 Spring MVC 框架新创建的，请检查其“educationalDetail”属性并确保它在指向父“person”对象方面是有效的

```
@RequestMapping(params = "create", method = RequestMethod.POST)
public String create(Person person, BindingResult result,
        SessionStatus status) {
    System.out.println("create");
    return update(person,result, status);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:33:08.243

问题是您使用的是原始`int`. 相反，您应该使用`Integer`. 看看[这个答案](https://stackoverflow.com/a/10110281/1300817)，看看为什么。

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
@Column(name = "p_id", unique = true, nullable = false)

private Integer personId;

public Integer getPersonId() {
    return this.id;
}

public setPersonId(Integer personId) {
    this.personId = personId;
} 
```

# gcc - 如何在ARM上使用gcc编译应用程序将float转换为int？

> ID：14189535
> 
> 赞同：0
> 
> 时间：2013-01-07T03:36:28.923
> 
> 标签：gcc, arm, int, cross-compiling

我想编译一个包含浮点函数和变量的应用程序，但我不想在二进制文件中生成浮点指令。可以通过在交叉编译工具链 gcc 中添加一些标志来实现吗？提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T07:35:55.043

gcc 可以在不使用 fpu 指令的情况下处理浮点操作`-mfloat-abi=soft`，请参阅[gcc 的 arm 选项](http://gcc.gnu.org/onlinedocs/gcc/ARM-Options.html)。

但是请注意，如果您通过库处理浮点数，则需要以静态链接它们，或者您的目标需要提供相同的。

# c# - 使用linq c#从数据表中选择整个重复行

> ID：14189537
> 
> 赞同：1
> 
> 时间：2013-01-07T03:37:01.220
> 
> 标签：c#, linq

我可以让它返回单列，但我似乎无法弄清楚如何让它给我整行而不是列值。

帮助！！

它应该返回的字段是 VDMList 和 Table。

```
var duplicates = dt.AsEnumerable()
    .Select(dr => dr.Field<string>("VMDList"))
    .GroupBy(x => x)
    .Where(g => g.Count() > 1)
    .Select(g => g.Key)
    .ToList();

columns of DT Table, VDMList
output is
4  | 02,2
12 | 03,3
15 | 02,2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:01:42.837

以下查询将`first`在`group`for 行中返回具有重复项的项目`VMDList`。请注意，没有选择`first`项目的标准。它可以是任何`random`行。

```
var duplicates = dt.AsEnumerable()
    .GroupBy(dr => dr.Field<string>("VMDList"))
    .Where(g => g.Count() > 1)
    .Select(g => g.First())
    .ToList(); 
```

要返回所有重复的行，请使用[SelectMany](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)

```
var allDuplicates = dt.AsEnumerable()
    .GroupBy(dr => dr.Field<string>("VMDList"))
    .Where(g => g.Count() > 1)
    .SelectMany(g => g)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-07T03:56:24.010

如果要求是选择整行而不是选择列，那么修改 linq 如下：

```
var duplicates = dt.AsEnumerable()
.Select(dr => dr.Field<string>("VMDList"))
.GroupBy(x => x)
.Where(g => g.Count() > 1)
.Select(g); 
```

重复项将是一个组集合。

# python - python topN max heap，使用heapq还是自己实现？

> ID：14189540
> 
> 赞同：6
> 
> 时间：2013-01-07T03:37:48.223
> 
> 标签：python, heap

python中有heapq，用于一般用途。我想为 10e7 记录记录 topN(0~20)。

如果使用 heapq，应该使用 '-' 将 max 转换为 min；并记录底部的最小数量，以调用 heapq.heappushpop()

我应该使用 heapq 还是自己实现一个堆（可能有问题或效率较低）？

```
#update

import heapq
class TopN(object):
    """
    v format: (num, value)

    after looking into http://hg.python.org/cpython/file/2.7/Lib/heapq.py, 
    i find heappushpop already optimize, no need bottom value

    feed() can be optimize further, if needed:
        using func object instead of compare len(self.h) each time
    """
    def __init__(self, N):
        self.N = N
        self.h = []        

    def feed(self, v):  
        if len(self.h) < self.N:
            heapq.heappush(self.h, v)
        else:
            heapq.heappushpop(self.h, v)

    def result(self):
        self.h.sort(reverse=True)
        return self.h

def t_topn():
    topn = TopN(10)
    for i in xrange(5):
        topn.feed((i, str(i)))
    res = topn.result()    
    assert sorted(res, reverse=True) == res 

def t_topn_random():
    import random
    topn = TopN(10)
    for i in xrange(100):
        x = random.randint(0, 1e4)
        topn.feed((x, str(x)))
    res = topn.result()    
    assert sorted(res, reverse=True) == res 

if __name__ == '__main__':
    t_topn()
    t_topn_random() 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-07T04:07:12.680

唯一的问题`heapq`是它没有`key`像标准库中的其他所有功能一样提供功能。（如果你好奇为什么，Raymond Hettinger 在[这封电子邮件](http://code.activestate.com/lists/python-list/162387/)中解释。他是对的，`heapq`不能提供与其他排序函数相同的接口——但原因不会影响你的用例，`key`只是在哪里`lambda x: -x`。）

通常的解决方法是装饰堆取消装饰。也就是说，将值的修改版本放入按`key`. 通常，这意味着以下之一：

*   存储`key(x)`而不是`x`，然后访问`unkey(value)`而不是`value`（假设`key`是可逆的）。
*   存储`(key(x), x)`而不是`x`，然后访问`value[1]`. （这可能会破坏稳定性，但`heapq`无论如何都不能保证稳定性。）
*   编写一个实现自定义方法的包装类`__le__`，然后存储`Wrapper(x)`而不是`x`和访问`value.value`而不是`value`.

在您的情况下，关键功能是可逆的。因此，只需存储`-x`和访问`-value`. 这与装饰一样微不足道。

尽管如此，无论它多么简单，您都应该编写一个包装器，否则您会在某个时候搞砸它。例如，您可以编写一个`maxheap`包装 minheap 的代码，`heapq`如下所示：

```
import heapq
def heapify(x):
    for i in range(len(x)):
        x[i] = -x[i]
    heapq.heapify(x)
def heappush(heap, item):
    heapq.heappush(heap, -item)
def heappop(heap):
    return -heapq.heappop(heap) 
```

... 等等您需要的任何其他功能。这可能有点痛苦，但它比从头开始实施整个事情要少得多。

当您使用它时，您可能希望将堆包装在面向对象的 API 中，这样您就可以`heap.push(x)`代替`heapq.heappush(heap, x)`, 等等。

```
import heapq
class MaxHeap(object):
    def __init__(self, x):
        self.heap = [-e for e in x]
        heapq.heapify(self.heap)
    def push(self, value):
        heapq.heappush(self.heap, -value)
    def pop(self):
        return -heapq.heappop(self.heap) 
```

…</p>

如果您快速浏览一下 ActiveState 的配方或 PyPI 上的模块，您应该会发现其他人已经为您完成了大部分工作。

或者，您可以复制并粘贴`heapq`源代码（它是纯 Python），`maxheapq.py`然后将其替换为`cmp_lt`相反的函数。（当然，如果你这样做，它可能同样简单，当然也更清晰，首先修改`cmp_lt`为接受一个`key`参数，然后修改所有其他函数以`key`通过 - 记住它赢了'不再普遍适用，因为它不能做出通常`key`只被调用一次的保证。）

如果你真的想危险地生活（你不应该），你甚至可以对其进行修补：

```
import heapq
def cmp_gt(x, y):
    return y < x if hasattr(y, '__lt__') else not (x <= y)
heapq.cmp_lt = cmp_gt 
```

但是您不想在实际代码中这样做。

# php - php将秒数转换为时间戳

> ID：14189541
> 
> 赞同：2
> 
> 时间：2013-01-07T03:37:57.560
> 
> 标签：php, time

我的表中有一个总秒值，但我想得到一个时间格式，例如`hh:mm:ss`，目前我有：`seconds - 226`而且我知道应该是 4 分 26 秒的时间格式，但我试过这段代码：

```
$seconds = 226;
$hours = floor($seconds / 3600);
$mins = floor(($seconds - ($hours*3600)) / 60); 
$secs = floor(($seconds - ($hours*3600)) - ($mins*60)); 
```

这输出`3:46`

也许公式有问题？

编辑：我从一个返回视频持续时间的 youtube 脚本中得到了这个值：

```
 $ytvidid = $url;
$ytdataurl = "http://gdata.youtube.com/feeds/api/videos/". $ytvidid;
$feedURL = $ytdataurl;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $feedURL);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
// get the result of http query
$output = curl_exec($ch);
curl_close($ch);
// feed the curl output to simplexml_load_string
$sxml = simplexml_load_string($output) or die("XML string not loading");

//$sxml = simplexml_load_file($feedURL);
$media = $sxml->children('http://search.yahoo.com/mrss/');
// get <yt:duration> node for video length
$yt = $media->children('http://gdata.youtube.com/schemas/2007');
$attrs = $yt->duration->attributes();
    echo $attrs['seconds']; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T03:47:09.283

使用[gmdate函数](http://us3.php.net/gmdate)，可以在[http://php.net/manual/en/function.date.php查看格式代码](http://php.net/manual/en/function.date.php)

```
echo gmdate("H:i:s", $seconds); 
```

* * *

PS。你的方法已经奏效了。226 秒就是 3 分 46 秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T02:47:26.143

你可以使用这个..这个代码就像 youtube time

```
$total_secs = '15454';

//time settings
$hours = floor($total_secs / 3600);
$mins = floor(($total_secs - ($hours*3600)) / 60);
$secs = floor($total_secs % 60);

//if hours zero, give for nothing like that (45:05)     
if ($hours<1) { $hours = ''; } else { $hours = $hours.':'; }
if ($mins<10) { $mins = '0'.$mins.':'; } else { $mins = $mins.':'; }
if ($secs<10) { $secs = '0'.$secs; } else { $secs = $secs; }

echo $output = $hours.$mins.$secs; // 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-21T01:18:52.710

Supericy 的答案很好，但只能工作 24 小时，如果你需要几个小时 > 天，那么我会得到类似的东西：

```
$diffInSeconds = 64;
$h =  floor($diffInSeconds / 3600);
$m =  floor(($diffInSeconds - ($h * 3600)) / 60);
$s =  floor(($diffInSeconds - (($h * 3600) + $m * 60)));

echo sprintf('%02d', $h) . ":" . sprintf('%02d', $m). ":" . sprintf('%02d', $s); 
```

顺便说一句，您的计算很好。但我选择这种方式。

# java - 使用支持新旧 android 版本的剪贴板管理器进行复制？

> ID：14189544
> 
> 赞同：10
> 
> 时间：2013-01-07T03:38:29.803
> 
> 标签：java, android

我正在尝试在 android 上以编程方式复制文本，在另一个问题上投票最多的答案提供了这些行，但是在使用它们时出现错误：Class requires API level 11 (current min is 8)：

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
ClipData clip = ClipData.newPlainText("label", "Text to copy");
clipboard.setPrimaryClip(clip); 
```

我直接从问题中复制了这些行。在尝试了 `import android.content.ClipboardManager;`我测试后`import android.text.ClipboardManager;`，它也产生了一个错误，`The method setPrimaryClip(ClipData) is undefined for the type ClipboardManager`加上关于 ClipboardManager 被弃用的警告。

我的应用程序支持 Android 2.2（我认为是 API 8），如何复制文本使其适用于所有版本的 android？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-07T03:45:32.920

尝试使用以下内容：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    final android.content.ClipboardManager clipboardManager = (android.content.ClipboardManager) context
            .getSystemService(Context.CLIPBOARD_SERVICE);
    final android.content.ClipData clipData = android.content.ClipData
            .newPlainText("text label", "text to clip");
    clipboardManager.setPrimaryClip(clipData);
} else {
    final android.text.ClipboardManager clipboardManager = (android.text.ClipboardManager) context
            .getSystemService(Context.CLIPBOARD_SERVICE);
    clipboardManager.setText("text to clip");
} 
```

# java - 防止表单重新提交并在页面刷新时插入数据库

> ID：14189545
> 
> 赞同：5
> 
> 时间：2013-01-07T03:38:35.233
> 
> 标签：java, jsp, servlets, jstl

我有一个 servlet，它从表单中获取数据并将其插入到数据库中。在 servlet 中，我使用 bean 并通过 bean 获取/设置数据。一旦插入发生，用户将被重定向到显示页面精确度的视图看起来。这个页面是JSP。现在，当我执行此页面刷新（jsp）时，它再次将表单数据插入到数据库中。现在我需要防止这种情况发生。我想的是而不是将其重定向到 jsp，让我重定向到另一个 servlet 并从该 servlet 让我执行 get 请求并将其转发给 jsp 以供查看。通过这种方法，我重构了我的 jsp，并且我有很多 jsp 会受到影响。

当页面刷新完成时，他们有什么其他方法可以防止插入数据库吗？

我还检查了数据库端，假设我可以添加唯一约束，我确实有一些通过初始 servlet 生成的唯一列，所以每个插入值都是不同的，所以我不能真正在数据库端使用解决方案。

如果有解决办法，有人可以建议我吗？

更新：添加插入的代码，我正在手动刷新页面。似乎这是我之前错过考虑的错误。它在数据库中正确插入并在视图 jsp 中正确显示所有数据。当视图 jsp刷新后，我在数据库中得到了双重插入。

更新。删除了代码。将发布代码的相关部分而不是整个代码。

问题已解决。

```
 javax.servlet.http.HttpSession session = request.getSession();            
        if (session.getAttribute("insertflag") == null) {
            mybean sf = new mybean();
            sf.insert(form);
            session.setAttribute("insertflag", insertid);
            RequestDispatcher rd = request.getRequestDispatcher("/WEB-INF/test/showtestform.jsp");                
            rd.forward(request, response);
        } else {                
            RequestDispatcher rd = request.getRequestDispatcher("/errorpage.jsp");
            rd.forward(request, response);
        } 
```

在错误页面 jsp 中，我删除了属性集，然后在该页面中提供链接以再次返回主页。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-07T03:42:32.287

一个简单的解决方法是在 Session 中放置一个标志；每当插入完成..并且在插入之前总是检查会话是否存在此标志。

在小服务程序中；在插入数据库之前；进行以下检查：

```
if (session.getAttribute("recordInsertedSuccessfully") == null )
{
   //proceed with insertion
   //after inserting into the database we should do :
   session.putAttribute("recordInsertedSuccessfully","true");
} else {
   //case of form re-submission
} 
```

如果存在用户插入其中两条记录的有效场景（可能是用户浏览然后再次在同一个表中插入记录；这是一个有效场景）；那么我们还需要在表单显示给用户之前添加以下代码：

```
session.removeAttribute("recordInsertedSuccessfully"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:49:14.880

使用带有 onclick 事件的 javascript 提交表单

不要提交表单使用 `<input type=submit>`和使用 `<input type=button>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-23T11:07:50.653

你对会话属性有什么看法？在表单上提交创建新的会话属性并在成功完成工作后使其无效。

在操作 servlet 上，如果会话属性可用，则添加条件，如果没有，则继续提交表单，然后重定向到表单页面。

# mysql - 需要mysql查询结果的指导

> ID：14189546
> 
> 赞同：1
> 
> 时间：2013-01-07T03:38:51.607
> 
> 标签：mysql

我有两张桌子，我已经像下面这样连接起来，向我展示按 id 按降序添加的垫子，效果很好。

```
SELECT p.* FROM ruj_users_pad 
AS p LEFT JOIN ruj_users
AS u ON p.user_id = u.id 
WHERE u.status !=0 
AND 1 
AND p.status = 1 
GROUP BY p.added_date
DESC LIMIT 0, 20 
```

但是，现在我想检索第三个表，该表也作为“added_date”列与上一个查询结合以显示新的降序。第三个表中的数据是当用户单击以收藏键盘上的当前项目时从按钮生成的。

这是我所拥有的，但它不起作用。

```
SELECT p.*,f.added_date FROM ruj_users_pad
AS p LEFT JOIN ruj_users 
AS u ON b.user_id=u.id 
LEFT JOIN ruj_users_fave 
AS f ON f.brag_id = u.id 
WHERE u.status !=0 
AND 1 
AND p.status = 1 
GROUP BY f.added_date DESC, b.added_date DESC 
LIMIT 0, 20 
```

结果返回与第一个结果相同。我不明白可能出了什么问题。我希望结果考虑到 ruj_users_fave 中有一个条目，并将其与第一个结果结合起来，将收藏夹放在顶部。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T00:16:30.313

`UNION`这是用于合并两个子查询的问题的解决方案。不是三表全查询，而是两表的精髓来说明概念。我用一张桌子`pad`和一张桌子`likes`。第一个子查询使用with选择 pad`id`及其最近的“like” 。请注意，我将列重命名为.`MAX``GROUP BY id``MAX(liked)``timestamp`

```
SELECT pad.id, MAX(liked) AS timestamp FROM
pad INNER JOIN likes WHERE likes.pad_id = pad.id
GROUP BY pad.id 
```

另一个子查询选择`id`尚未被喜欢的 pad ，即喜欢表中不存在该特定 pad 的记录`id`。在这种情况下，您提到应该使用 pad 的创建日期来确定返回记录的顺序。因此，我们重命名`added`为`timestamp`.

```
SELECT id, added AS timestamp FROM pad
WHERE NOT EXISTS
  (SELECT liked FROM likes WHERE likes.pad_id = pad.id) 
```

我们现在有两个子查询，它们返回 pad`id`和 the，因此我们可以使用, 然后使用it`timestamp`将它们组合成一个结果集。您的组合查询如下所示。`UNION``ORDER``BY timestamp`

```
SELECT combined.id, combined.timestamp FROM
(
  SELECT pad.id, MAX(liked) AS timestamp FROM
    pad INNER JOIN likes WHERE likes.pad_id = pad.id
    GROUP BY pad.id
  UNION
  SELECT id, added AS timestamp FROM pad
    WHERE NOT EXISTS
      (SELECT liked FROM likes WHERE likes.pad_id = pad.id)
)
combined ORDER BY combined.timestamp DESC; 
```

# ruby-on-rails - 如何在 Rails 中设置请求超时（瘦服务器或 webrick 服务器）

> ID：14189549
> 
> 赞同：5
> 
> 时间：2013-01-07T03:38:55.107
> 
> 标签：ruby-on-rails, timeout, request

当我将一个大文件上传到 Rails 服务器时，我总是收到请求超时错误。我不知道在哪里更改请求超时值。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T03:54:53.027

对于 webrick，有一个名为`/usr/lib/ruby/1.9.1/webrick/config.rb`.

位置可能因您的版本和安装方法而异。在该文件中有一行：

`:RequestTimeout => 30`可以修改。

而在thin，`thin -t 60`使超时时间为60秒，默认为30

# javascript - 如何在 Visual Studio 中编写 JavaScript 和 HTML 网页？

> ID：14189555
> 
> 赞同：2
> 
> 时间：2013-01-07T03:40:20.300
> 
> 标签：javascript, html, visual-studio, visual-studio-2012

我看过人们在 Visual Studio 中制作 Web 项目的视频，而无需使用 Visual C++ 或 Visual Basic。（就像[这里](http://www.asp.net/vnext/overview/visual-studio/visual-studio-2012-javascript-editor)）我想要的只是使用 Visual Studio 的编程功能制作一个简单的 html 和 javascript 网页，同时将其包含在解决方案中。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:43:45.217

我找到了，你只需转到文件>添加>现有网站，（我已经有一个包含一些代码的文件夹），你就完成了。很抱歉给任何人带来不便。

# javascript - jQuery基于url的Hash触发事件

> ID：14189562
> 
> 赞同：3
> 
> 时间：2013-01-07T03:41:16.833
> 
> 标签：javascript, jquery, events, hash, triggers

我对 javaScript/jQuery 还是很陌生，所以如果这看起来很初级，我很抱歉。

我知道我可以更改 url onClick 的哈希值，但是我可以根据 url 中的哈希值从元素中添加类/删除类、隐藏/显示元素、淡入/淡出元素吗？

我正在尝试在一个页面（主页、关于、图片库等）上创建一个包含所有内容的网站，然后只隐藏一些内容并在点击或 onHover 上显示其他内容。但我也想保留一个 url 的功能，它可以把你带到网站上的特定位置，那么有没有办法使用 javaScript 或 jQuery 来触发基于 url 的哈希的事件？

就像如果 hash = #gallery，然后显示画廊元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-07T03:52:12.500

如果页面实际重新加载（默认链接行为），只需确保运行 jquery 脚本来检查哈希值。

```
var currentValue = window.location.hash.substr(1);
$(document).ready(function() {
  //Page loaded..
  alert('Do something with the current value');
}); 
```

如果页面没有重新加载，只需创建一个 $('a').click(); 响应哈希值的函数，如下例所示：

```
$(document).ready(function() {
    $('a').click(function() {
      var value = $(this).prop('href').substr(1); //remove hash using substr(1)
      alert('do something else with the '+value+' value!');
      return false; //stop default link behaviour
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T22:19:22.443

我最终使用了您提供的第一个代码字符串，然后使用了不同 # 值的 if/else 语句。

```
javaScript/jQuery
var currentValue = window.location.hash.substr(1)
$(document).ready(function() {
  if(currentValue == "Home") {
    $("#about").addClass("boxshadow");
    $("#info_about").addClass("down");
    $("#info_contact").addClass("up");
    $("#info_pricing").addClass("up");
    etc...
}

else if(currentValue == "Gallery") {    
    $("#door").click();
    $("#about").click();
}

else {
    $("#about").addClass("boxshadow");
    $("#info_about").addClass("down");
    $("#info_contact").addClass("up");
    $("#info_pricing").addClass("up");
    etc...
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T15:30:39.390

如果您需要检查所有更改哈希的链接，那么

```
$("a[href^=#]").on("click",function(){
     alert("clicked something with hash");
}); 
```

每次单击以开头的链接时都会触发`#`

# django - CSS 没有在 Django 中显示？

> ID：14189563
> 
> 赞同：0
> 
> 时间：2013-01-07T03:41:29.277
> 
> 标签：django

我有一个像这样的树结构：

```
.
|-- backend.py
|-- backend.pyc
|-- functions.py
|-- functions.pyc
|-- __init__.py
|-- __init__.pyc
|-- models.py
|-- models.pyc
|-- templates
|   |-- css
|   |   |-- PIE.htc
|   |   `-- style.css
|   |-- form.html
|   |-- index.html
|   |-- index.html~
|   |-- reform.html
|   |-- style.css
|   |-- synced.html
|   |-- test.html
|   `-- thanks.html
|-- tests.py
|-- views.py
`-- views.pyc 
```

我在 STATICFILES_DIRS 中给出了路径：

```
STATICFILES_DIRS = '/home/zurelsoft/workspace/genelaytics/fileupload/templates/css' 
```

每当我打开模板 index.html 时，它都不会读取 css。我究竟做错了什么？

**模板中的**链接标签：****

 **```
<title>.:: Genalytics ::.</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
</head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:36:03.397

您的解决方案中有几个问题，即您：

*   使用模板保留静态文件 - 它不一样（模板是动态解释的 HTML 文档结构，其中填充了从视图传递的数据），
*   在模板中使用相对和固定的 URL，而不是动态地使用绝对 URL，
*   将静态文件根目录设置为`.../css`，然后使用提到的目录引用文件的名称，
*   您对静态文件的位置进行硬编码（除非您移动应用程序，否则这不是问题 - 有更好的方法可以做到这一点），

[您的解决方案很简单：按照官方文档中的说明](https://docs.djangoproject.com/en/dev/howto/static-files/)管理您的静态文件。

Quickfix 将 HTML 更改为：

```
<title>.:: Genalytics ::.</title>
<link href="{{ STATIC_URL }}style.css" rel="stylesheet" type="text/css" />
</head> 
```

如果它不起作用，请确保您严格遵循[提到的文档。](https://docs.djangoproject.com/en/dev/howto/static-files/)它可能无法正常工作可能有几个原因，即：

*   的值不正确`STATIC_URL`，
*   模板中缺少适当的上下文，
*   影响静态文件位置的其他一些设置，
*   静态文件本身的名称，
*   文件的位置与请求路径（例如`STATIC_URL`相对而不是绝对），**

# c++ - Windows Python 程序重启（另一种生活的罪过）

> ID：14189566
> 
> 赞同：3
> 
> 时间：2013-01-07T03:42:18.963
> 
> 标签：c++, python, windows, cython

我有一个非常奇怪的 Python 错误，甚至可能是解释器中的错误。
我的最小复制代码看起来有点像以下：

```
from sys import stdout
print "Starting"
stdout.flush()

from camera import py_SaperaCamera
print "Imported"
stdout.flush()

cam = py_SaperaCamera.Camera()
print "Constructed"
stdout.flush()

del cam
print "Destructed"
stdout.flush() 
```

我可以想到大约 1e6 个原因，这个程序的执行可能不会那么顺利。事实上，我可以通过算法生成那么多！下面提供了一些供您娱乐，但请随意跳到妙语：

1.  在导入我的自定义 Cython 模块 py_SaperaCamera
2.  由于初始化或删除控制我的设备的对象
3.  段错误、内存错误、因调皮而被操作系统杀死
4.  闪电，停电，第二次来临。任何！

如果执行以某种方式停止，我真的会喜欢它，也许是一个段错误，来自 boost:: 的一个充满爱的信息，无论要求我联系应用程序支持团队，地狱，即使它只是停止并且什么也没打印。这将是一流的。

不，相反，我得到以下输出：

```
Starting
Imported
Constructed
Starting
Imported
Constructed
Starting
Imported
Constructed
Starting
Imported
Constructed
Starting
Imported
Constructed
Starting
Imported
Constructed 
```

细心的读者会注意到，该程序似乎已经运行了 6 次，这是野兽的明显标记。所以我的问题很简单，我在前世做了什么让这件事发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:34:12.097

为什么不评论出来`cam = py_SaperaCamera.Camera()`？然后你就会知道是不是你的 Camera 类的实例化了。这可能会缩小您搜索问题的范围。

# javascript - 使用按钮滚动滑块

> ID：14189568
> 
> 赞同：1
> 
> 时间：2013-01-07T03:42:28.773
> 
> 标签：javascript, jquery, html

我使用来自 jquery.com 的示例制作了一个包含动态内容的滚动滑块。现在我想知道如何制作左右图像按钮，以便控制滚动并删除滚动条。

```
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>jQuery UI Slider - Slider scrollbar</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <style>
      .scroll-pane { overflow: auto; width: 99%; float:left; }
      .scroll-content { width: 2440px; float: left; }
      .scroll-content-item { width: 100px; height: 100px; float: left; margin: 10px; font-size: 3em; line-height: 96px; text-align: center; }
      * html .scroll-content-item { display: inline; } /* IE6 float double margin bug */
      .scroll-bar-wrap { clear: left; padding: 0 4px 0 2px; margin: 0 -1px -1px -1px; }
      .scroll-bar-wrap .ui-slider { background: none; border:0; height: 2em; margin: 0 auto;  }
      .scroll-bar-wrap .ui-handle-helper-parent { position: relative; width: 100%; height: 100%; margin: 0 auto; }
      .scroll-bar-wrap .ui-slider-handle { top:.2em; height: 1.5em; }
      .scroll-bar-wrap .ui-slider-handle .ui-icon { margin: -8px auto 0; position: relative; top: 50%; }
    </style>
    <script>
      $(function() {
        //scrollpane parts
        var scrollPane = $( ".scroll-pane" ),
        scrollContent = $( ".scroll-content" );
        //build slider
        var scrollbar = $( ".scroll-bar" ).slider({
          slide: function( event, ui ) {
            if (scrollContent.width() > scrollPane.width() ) {
              scrollContent.css( "margin-left", Math.round(
                ui.value / 100 * ( scrollPane.width() - scrollContent.width())
              ) + "px" );
            } else {
              scrollContent.css( "margin-left", 0 );
            }
          }
        });
        //append icon to handle
        var handleHelper = scrollbar.find(".ui-slider-handle")
          .mousedown(function() {
            scrollbar.width(handleHelper.width());
          })
          .mouseup(function() {
            scrollbar.width("100%");
          })
          .append("<span class='ui-icon ui-icon-grip-dotted-vertical'></span>")
          .wrap("<div class='ui-handle-helper-parent'></div>").parent();
        //change overflow to hidden now that slider handles the scrolling
        scrollPane.css("overflow", "hidden");
        //size scrollbar and handle proportionally to scroll distance
        function sizeScrollbar() {
          var remainder = scrollContent.width() - scrollPane.width();
          var proportion = remainder / scrollContent.width();
          var handleSize = scrollPane.width() - (proportion * scrollPane.width());
          scrollbar.find(".ui-slider-handle").css({
            width: handleSize,
            "margin-left": -handleSize / 2
          });
          handleHelper.width("").width(scrollbar.width() - handleSize);
        }
        //reset slider value based on scroll content position
        function resetValue() {
          var remainder = scrollPane.width() - scrollContent.width();
          var leftVal = scrollContent.css("margin-left") === "auto" ? 0 : parseInt( scrollContent.css("margin-left"));
          var percentage = Math.round(leftVal / remainder * 100);
          scrollbar.slider("value", percentage);
        }
        //if the slider is 100% and window gets larger, reveal content
        function reflowContent() {
          var showing = scrollContent.width() + parseInt(scrollContent.css("margin-left" ), 10);
          var gap = scrollPane.width() - showing;
          if (gap > 0) {
            scrollContent.css("margin-left", parseInt(scrollContent.css("margin-left"), 10 ) + gap);
          }
        }
        //change handle position on window resize
        $(window).resize(function() {
          resetValue();
          sizeScrollbar();
          reflowContent();
        });
        //init scrollbar size
        setTimeout( sizeScrollbar, 10 );//safari wants a timeout
      });
    </script>
  </head>
  <body>
    <div class="scroll-pane ui-widget ui-widget-header ui-corner-all">
      <div class="scroll-content">
        <div class="scroll-content-item ui-widget-header">1</div>
        <div class="scroll-content-item ui-widget-header">2</div>
        <div class="scroll-content-item ui-widget-header">3</div>
        <div class="scroll-content-item ui-widget-header">4</div>
        <div class="scroll-content-item ui-widget-header">5</div>
        <div class="scroll-content-item ui-widget-header">6</div>
        <div class="scroll-content-item ui-widget-header">7</div>
        <div class="scroll-content-item ui-widget-header">8</div>
        <div class="scroll-content-item ui-widget-header">9</div>
        <div class="scroll-content-item ui-widget-header">10</div>
        <div class="scroll-content-item ui-widget-header">11</div>
        <div class="scroll-content-item ui-widget-header">12</div>
        <div class="scroll-content-item ui-widget-header">13</div>
        <div class="scroll-content-item ui-widget-header">14</div>
        <div class="scroll-content-item ui-widget-header">15</div>
        <div class="scroll-content-item ui-widget-header">16</div>
        <div class="scroll-content-item ui-widget-header">17</div>
        <div class="scroll-content-item ui-widget-header">18</div>
        <div class="scroll-content-item ui-widget-header">19</div>
        <div class="scroll-content-item ui-widget-header">20</div>
      </div>
      <div class="scroll-bar-wrap ui-widget-content ui-corner-bottom">
        <div class="scroll-bar"></div>
      </div>
    </div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:59:41.203

试试 jquery carousel 滑块。这是一个简单的。试试[这个例子](http://baijs.nl/tinycarousel/)

# php - Facebook Graph API 对较大数据调用的速度较慢

> ID：14189576
> 
> 赞同：3
> 
> 时间：2013-01-07T03:43:04.523
> 
> 标签：php, facebook, facebook-graph-api

这就是我在 PHP 中所做的，以访问 Facebook 上的一堆群组帖子。然后我正在实现一个搜索功能来搜索这些帖子。

```
 $url2 = 'https://graph.facebook.com/'. $group_id . '/feed' . '?limit=30&access_token=' . $_SESSION['access_token'] ;

        $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, "$url2");
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $json = curl_exec($ch);
        $data = json_decode($json, TRUE); 
```

所以我把它分解了，只是发现将图形 url 放入我的浏览器会产生缓慢的响应。限制设置为 30 是可以的，但是将其设置为 300 并且速度很慢，将其设置为 1,000 并且它会爬行。

我已经研究过分页，但我想获取大量数据以便进行搜索。缓存真的不起作用，因为加载初始数据仍然需要很长时间。

有没有办法加快速度，还是我被 Facebook Graph API 的限制所困扰？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T21:15:42.823

您可以批处理您的请求，以便您只为批处理请求设置一次卷曲，而不是查看大量卷曲[http://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-图-api/](http://developers.facebook.com/blog/post/2011/03/17/batch-requests-in-graph-api/)

```
 $app_id = "YOUR_APP_ID";
    $app_secret = "YOUR_APP_SECRET"; 
    $my_url = "YOUR_URL";

    $code = $_REQUEST["code"];

    if(empty($code)) {
      $dialog_url = "http://www.facebook.com/dialog/oauth?client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url);

      echo("<script> top.location.href='" . $dialog_url . "'</script>");
    }

    $token_url = "https://graph.facebook.com/oauth/access_token?client_id=" . $app_id . "&redirect_uri=" . urlencode($my_url) . "&client_secret=" . $app_secret . "&code=" . $code;

    $access_token = file_get_contents($token_url);
    $batched_request = '[{"method":"GET","relative_url":"me"},' . '{"method":"GET","relative_url":"me/friends?limit=50"}]';

    $post_url = "https://graph.facebook.com/" . "?batch=" . $batched_request . "&access_token=" . $access_token . "&method=post";
    echo $post_url;

    $post = file_get_contents($post_url);
    echo '<p>Response: <pre>' . $post . '</pre></p>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:54:22.167

您可以`CURLOPT_ENCODING`按照文档使用：

> “Accept-Encoding:”标头的内容。这使得能够对响应进行解码。支持的编码是“identity”、“deflate”和“gzip”。如果设置了空字符串“”，则会发送包含所有支持的编码类型的标头。

这样 cURL 将告诉 Facebook，*“嘿，我了解压缩数据，请向我发送压缩数据”*。

```
$url2 = 'https://graph.facebook.com/'. $group_id . '/feed' . '?limit=30&access_token=' . $_SESSION['access_token'] ;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url2);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_ENCODING, ''); // enable compression, keep empty to send all supported types
$json = curl_exec($ch);
$data = json_decode($json, TRUE); 
```

# asp.net-mvc - ASPNET MVC 4 和小胡子

> ID：14189582
> 
> 赞同：1
> 
> 时间：2013-01-07T03:43:51.253
> 
> 标签：asp.net-mvc, asp.net-mvc-4, mustache

我正在编写一个 ASPNET MVC 4 应用程序，并且正在尝试使用 mustache 模板。我的问题是我总是得到一个 404 的文件，我不知道问题是什么。有任何想法吗？

我正在使用 index.html 中的 url 创建一个隐藏控件，如下所示：

```
@Html.Hidden("urlMustacheTemplates", Url.Content("~/Views/Templates/")) 
```

然后在一个javascript文件中

```
$.get($("#urlMustacheTemplates").val() + "main.mustache", function (template) {
    var html = Mustache.to_html(template, data);
    output = $.mustache(template, data);
}); 
```

我放了一个

```
debugger; 
```

在 javascript 中，我看到 url 是正确的，我的文件在

```
/Views/Templates/main.mustache 
```

但我得到一个 404 文件未找到。

提前致谢！吉列尔莫。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T14:13:09.570

将您的模板文件夹从 Views 文件夹中取出，并将其放在根目录或 Assets 文件夹中。

/资产/模板/main.mustache

或者

/模板/main.mustache

# c++ - 如果 C++11 的 lambda 表达式支持默认参数怎么办？

> ID：14189585
> 
> 赞同：33
> 
> 时间：2013-01-07T03:44:15.863
> 
> 标签：c++, c++11, lambda, default-arguments

我认为以下代码非常方便且无害：

```
auto fn = [](bool b = false) -> int // NOT legal in C++11
{
    return b ? 1 : 0;
}; 
```

为什么 C++11 明确禁止 lambda 表达式的默认参数？

我只是想知道背后的理由和考虑。

我想知道 C++11 标准所说的“为什么”而不是“什么”。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-07T04:19:09.407

没有真正的理由 lambda 不能有默认参数。但是，使用 lambda 有两种主要方法，其中只有一种允许默认参数而不更改类型系统。

1.  您可以直接调用 lambda，也可以通过模板调用。在这种情况下，默认参数可以正常工作。

2.  您可以通过调用 lambda `std::function`。如果不更改类型系统，默认参数将不起作用。

我的猜测是人们用 C++11 编写的新函数*通常会*接受`std::function`参数，因为这样，函数不必*是*模板，也不必为每个获得的 lambda 和仿函数实例化传递给它。

## 为什么`std::function`（或函数指针）不能采用默认值？

这种函数的类型并不明显。

*   如果是`std::function<int(bool)>`，那么您如何使用默认值调用它？（你不能。）

*   如果是`std::function<int(bool=false)>`，那么它与哪些类型兼容，转换如何工作？你能把它转换成`std::function<int()>`? 怎么样`std::function<int(bool=true)>`？

*   如果它是新的`std::function<int(bool=default)>`，*那么*它与哪些类型兼容，转换如何工作？

基本上，这不仅仅是一个您可以在标准中翻转并制作函数指针/`std::function`处理默认参数的开关。普通函数中的默认参数是使用函数声明中的信息处理的，这些信息在 lambda 或函数指针的调用站点不可用。因此，您必须将有关默认值的信息编码到函数类型中，然后为转换和兼容性制定所有非显而易见的规则。

因此，您必须提出一个令人信服的理由来*说明为什么*要添加这样的功能，并说服委员会。

## 那么，为什么 lambda 不能采用默认值呢？

我没有回答这个问题。但我认为添加它不会是一个非常有用的功能。如果可以的话，我会删除这个答案，但它已被接受。如果可以的话，我会投反对票，但这是我的。这就是生活。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T12:56:56.637

*我同意在某些情况下*允许 lambdas 中的默认参数工作*本身*并没有真正的“技术”限制。它不会破坏您的指针 and ，因为函数的类型不受默认参数的影响。但这也是为什么这不是非常实用的原因。*`auto`*

 *为什么？

因为默认参数虽然是函数签名的一部分，但不是函数类型的一部分：

> `[C++11: 1.3.17]:`
> **签名**
> <function> 名称、参数类型列表 (8.3.5) 和封闭命名空间（如果有）
> [*注意：*签名用作名称修改和链接的基础。*——尾注*]
> 
> `[C++11: 8.3.5/6]:` *[..]*返回类型、*parameter-type-list*、*ref-qualifier*和*cv-qualifier-seq*，但不是默认参数 (8.3.6) 或异常规范 (15.4)，是函数类型。[*注：*函数类型在函数指针、函数引用和成员函数指针的赋值和初始化过程中检查。*——尾注*]

它们本质上是一块语法糖，由编译器“激活”，能够看到您使用的函数的声明，并在函数调用时注入：

```
#include <iostream>

void foo(int x = 5)
{
   std::cout << x << '\n';
}

int main()
{
   foo();
} 
```

*   输出：`5`

默认参数是“可见的”。

但是，当您将函数“隐藏”在指针后面时：

```
int main()
{
    void (*bar)(int) = &foo;
    bar();
} 
```

*   错误：`too few arguments to function`

of 的类型`bar`是正确的，编译器知道它`foo`有一个默认值，但是根本没有*直接*`bar`的语法可以在调用that `bar`is时通知编译器`foo`。当然，在这种微不足道的场景中，它可以通过观察分配来解决，但这很难成为更广泛论点的理由。

出于同样的原因，仅在调用站点不可见的定义中声明的默认参数几乎是无用的：

```
// a.h
void foo(int);

// a.cpp
#include "a.h"
#include <iostream>

void foo(int x = 5)
{
   std::cout << x << '\n';
}

// main.cpp
#include "a.h"

int main()
{
    foo();
} 
```

*   main.cpp 中的错误：`too few arguments to function`

我想这是因为：

> `[C++11: 8.3.6/4]:` *[..]*不同范围的声明具有完全不同的默认参数集。*[..]*

我们*被*允许为类非模板成员函数定义（）“堆积”默认参数`[C++11 8.3.6/6]`；该示例表明此默认值仍将仅适用于同一 TU，这遵循我们在上面的第二个代码片段中看到的行为。

因此，如果默认参数不是函数类型的一部分，并且必须对调用站点明确可见，那么只有少数人为设计的极端情况对 lambdas 有用，即在调用它们时在创建它们的相同范围内，因此编译器可以轻松地弄清楚如何“填充”调用 lambda 的默认参数，那么，这有什么意义呢？不是很多，我告诉你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T04:12:46.207

正如对该问题的评论所暗示的那样，可能没有*技术上*的理由不存在默认参数。但另一个问题是“默认参数有*实际*原因吗？” 我认为这个问题的答案是“不”，这就是原因。

为了调用 lambda，您可以做的一件事是立即调用它

```
[] { printf("foo"); }(); 
```

我敢肯定这有有限的用途，如果有的话，所以让我们继续。调用 lambda 的唯一另一种方法是首先将其绑定到变量，这里有几个选项。

1.  使用自动。所以我们得到`auto foo = [] { printf("foo"); }; foo();`
2.  将其绑定到函数指针：`void (*foo)() = [] { printf("foo"); }; foo()`. 当然，这仅在 lambda 未捕获时才有效。
3.  通过将 lambda 传递给函数或函数模板来执行 1 或 2 的等效操作。

现在让我们来看看默认参数在每种情况下的用处

1.  在这种情况下，我们直接调用 lambda，因此代码可能足够紧密，我们不会使用各种数量的参数调用 lambda。如果我们是，lambda 可以（应该？）可能被重构为更通用的组件。我在这里看不到任何实际好处。
2.  （见1）
3.  我们将 lambda 传递给另一个函数。我也没有看到这里默认参数的实际好处。回想一下好的旧仿函数（可以有默认参数）——我不能说我知道有太多函数依赖于默认参数，即使这些函数也存在。由于 lambdas 实际上只是函子，因此没有理由让这种观察突然改变。

我认为这些点足以说明 lambda 的默认参数真的没那么有用。另外，我看到有些人在谈论 lambda 类型的问题，如果它有默认参数，但这是一个非 IMO 问题。您始终可以编写自己的仿函数来执行相同的操作，并且*确实*具有默认参数。另外，关于降级为函数指针，也没什么好说的。取正常功​​能

```
void func(int i = 0)
{
} 
```

并把它的地址。你得到了什么？一个`void (*)(int)`。没有理由 lambda 会遵循不同的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-30T19:49:37.637

我已经阅读了其中一些回复，每个人（从我读到的 tl;dr）都指的是类型系统中的限制。这真的和那个没有任何关系。尽管函数的类型包括所有参数，无论是否默认，但具有默认参数的函子可以被认为是一个模糊函数，直到您查看它才产生类型。

由于 lambda 是简化函子使用的语法糖，并带有一些很酷的类型推导。当它被编译器归结并转换时，当它有捕获时是一个函子（如果没有捕获，则为一个函数）。所以真的没有理由不能在 lambda 中使用它。观察：

```
#include<functional>
#include<iostream>

int main()
{
    // my lambda as written as a functor.  Not pretty eh?  But it works. o.O
    struct {
    void operator()(char const* x = "default") {
         std::cout << x << std::endl;
    } } fn;

    fn("Hi");
    fn();
    std::function<void(char const*)> fn_copy_1 = fn;
    std::function<void()>            fn_copy_0 = fn;
    fn_copy_1("there");
    fn_copy_0();
    return 0;
} 
```

结果（[此处运行示例）](https://godbolt.org/z/ceabM8h6x)：

```
Hi
default
there
default 
```

所有这些都无需对类型系统进行任何更改。

那么，为什么会有这样的限制呢？我的猜测，没有人认为它会有用，如果不实施，测试的东西就会更少。用户称他们需要功能 X 时，会将事物添加到语言中。如果没有人要求它并且没有足够的价值与之关联，那么它就不会被添加。这并不是说以后不能添加，而是只有在有需求的情况下才可以添加。*

# opengl - Glfw 获取 alphabits、depthbits 和 stencilbits

> ID：14189587
> 
> 赞同：2
> 
> 时间：2013-01-07T03:44:53.453
> 
> 标签：opengl, glfw

查看 GLFW 的手册，您可以使用它`glfwGetVideoModes( GLFWvidmode *modes, int maxcount )`来进入显示模式。然而，这只给你。

```
int Width, Height; // Video resolution
int RedBits; // Number of red bits
int GreenBits; // Number of green bits
int BlueBits; // Number of blue bits 
```

要打开一个窗口，您需要更多参数，获得剩余参数的最佳方法是什么？

（除了模式）glfwOpenWindow（int width，int height，int redbits，int greenbits，int bluebits，int alphabits， **int depthbits，int stencilbits，** int mode）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T10:32:14.030

当今显卡的事实标准是支持 24 深度位和 8 模板位。32 个深度位是非常罕见的。

您可能想要做的是请求 8 个 alpha 位、24 个深度位和 8 个模板位。如果您不需要模板或 alpha，请为它们请求 0 位（这样您就不必担心模板操作状态）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T03:49:41.697

发送您需要的价值观并希望获得最好的结果。如果你不能得到你想要的，也许提供一个后备。

一般来说：

1.  `alphabits <= 8`通常应该可以工作。
2.  `depthbits <= 16`通常应该可以工作，`24`或者`32`也可以工作。
3.  `stencilbits <= 8`可能会奏效。

您还可以在常见问题解答信息中找到[2.16 。](http://www.glfw.org/faq.html#2_16)

# mongodb - 在 MongoDB 中使用 $all 和 $regex 查询失败

> ID：14189588
> 
> 赞同：1
> 
> 时间：2013-01-07T03:44:58.193
> 
> 标签：mongodb, mongodb-query

我有一个 MongoDB 实例，我想通过检查是否同时满足多个正则表达式来搜索它。当我将 $all 与 /a/ 一起使用，或者我只使用 $regex 语法时，查询有效，但当我同时使用这两种语法时查询无效：

```
> db.claims.findOne({'tags': {$all: [/a/]}}, {description: 1, tags: 1})
{ "_id" : ..., "description" : "Test claim", "tags" : [ "general", "foobar" ] }
> db.claims.find({'tags': {$regex: 'a'}}, {description: 1, tags: 1})
{ "_id" : ..., "description" : "Test claim", "tags" : [ "general", "foobar" ] }
> db.claims.find({'tags': {$all: [{'$regex': 'a'}]}}, {description: 1, tags: 1})
> 
```

这是怎么回事？这两个一起用会不会有bug？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:29:30.697

如果我理解正确，使用`$and`应该可以解决问题。

```
db.claims.find({"$and" : [{"tags":{ $regex : 'a'}},{"tags":{ $regex : 'a'}}]}, {description: 1, tags: 1}) 
```

如果只需要满足一个正则表达式，请使用 $or。当然你可以混搭`$or`和`$and`.

# php - 不希望页面跳过或返回

> ID：14189593
> 
> 赞同：4
> 
> 时间：2013-01-07T03:46:08.253
> 
> 标签：php, javascript

我正在浏览器上创建一个应用程序，但我不希望用户在浏览器中的某些页面上跳过页面。想想这个。如果我希望用户创建一些东西，但为了让他们能够创建一些东西，他们必须浏览第 1、2 和 3 页，那么如果用户在第 1 页但然后通过输入 url 设法跳到第 3 页会发生什么？它有点搞砸了

再次处理第 1、2、3 页，如果用户完成第 1 页，数据插入到数据库中，但是如果用户在第 2 页，那么我不希望他们返回第 2 页，因为我不希望他们返回更改之前输入的任何详细信息。我不希望用户在使用前进浏览器按钮时做类似的事情。

我需要这个在所有主流浏览器中工作，IE，Chrome，Firefox，Firefox，Opera

示例代码对我非常非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:15:42.313

您的表单会将答案发回您的服务器。您的服务器必须验证这些答案。如果答案有效，您应该将它们存储在数据库中。如果答案无效，您将需要重新呈现表单，可能会填充用户的输入，并显示某种错误，然后重复此过程。

如果用户的答案是有效的，您会将它们写入数据库并将用户重定向到下一页。在下一个请求中，您可以使用第一页是否存在答案来确定是否应访问第 2 页。如果没有，您需要将它们重定向到第一页。

每个页面中极其简化的逻辑将如下所示：

*   page1.php

    ```
    Do I have answers for page 1 questions?
      No: Render page 1 questions
      Yes: Redirect to page 2 
    ```

*   page2.php

    ```
    Do I have answers for page 1 questions?
      No: redirect to page 1
      Yes:
        Do I have answers for page 2 questions?
          No: Render page 2 questions
          Yes: Redirect to page 3 
    ```

*   page3.php

    ```
    Do I have answers for page 1 questions?
      No: redirect to page 1
      Yes:
        Do I have answers for page 2 questions?
          No: Redirect to page 2
          Yes: 
            Do I have answers for page 3 questions?
              No: Render page 3 questions
              Yes: Render "you are finished" page 
    ```

或者更一般地说，每个页面都应该找到没有答案的第一页，并且（如果那不是当前页面）重定向到该页面。

# c# - 在不安装可再发行组件的情况下使用 Office 2003 互操作 DLL

> ID：14189597
> 
> 赞同：0
> 
> 时间：2013-01-07T03:46:39.540
> 
> 标签：c#, office-interop

我正在编写一个需要读取 excel 文件的 C# 程序（.net 2.0）。我开始知道我将不得不使用`Microsoft.Office.Interop.Excel`. 我下载`O2003PIA.MSI`并使用了 7Zip，提取了 DLL（未安装）。现在，当我添加对提取的引用时`EXCELPIA.DLL`，它会引发以下错误：

```
Could not load file or assembly 'Microsoft.Office.Interop.Excel, Version=11.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' or one of its dependencies. The system cannot find the file specified. 
```

我想将程序集部署为私有程序集，并且不希望最终用户安装 Redistributable。我缺少任何依赖项吗？

我已经尝试添加对的引用，`OFFICE.DLL`但它也无济于事。

**编辑 1**

1.  使用它之前是否需要安装Office 2003？
2.  还有其他 .net 2.0 替代方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:42:56.303

我使用了一个叫做[NPOI](http://npoi.codeplex.com/ "非营利组织")的东西，它工作得很好。

# java - 相对于船舶位置 Java 的弹丸集

> ID：14189600
> 
> 赞同：1
> 
> 时间：2013-01-07T03:47:04.877
> 
> 标签：java, math, paint

我正在用 Java 制作一个自上而下的射击游戏克隆。大约一个小时后，我能够弄清楚如何定位船的射弹，它是相对于船的精灵方向的激光。问题是，如果我移动船，当我移动船时，弹丸会相对于船的方向跟随。如您所见，这是一个问题，因为无论发射时船在哪里，激光都应该独立移动。

这是提出我的问题的代码：

```
private Image ship;
    private int ship_dx = 500;
    private int ship_dy = 400;
    private int ship_velocity = 5;
    private boolean isLaser = false;
    private static final int laser_DyOffSetOfBall = 48;
    private static final int laser_DxOffSetOfBall = 23;
    private Image laser;
    private int laser_dx = ship_dx+laser_DxOffSetOfBall;
    private int laser_dy = ship_dy-laser_DyOffSetOfBall;
    private int laser_velocity= 10;

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(ship, ship_dx, ship_dy, this);
        if(isLaser){

            laser_dy -= laser_velocity;
            laser_dx = ship_dx+laser_DxOffSetOfBall;
            g.drawImage(laser,laser_dx,laser_dy,this);
            if(laser_dy < 50)
            {
                isLaser = false;
                laser_dy = ship_dy-laser_DyOffSetOfBall;
            }
        }
            Toolkit.getDefaultToolkit().sync();
    } 
```

这是游戏！：

![IMG](../Images/63cd51474070062c36aa439301067163.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T03:53:38.210

错误在行`laser_dy = ship_dy - ....`

您想绘制独立于船舶位置的弹丸，因此不要使用 ship_dy 和 ship_dy，而是将弹丸 startPos 存储在单独的变量中，该变量在船舶移动期间不会改变；

就像是

```
laserStartX = ship_dx;
laserStartY = ship_dy; 
```

然后：

```
laser_dx = laserStartX + laserDxOffsetBall; 
```

与laser_dy 相同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:54:30.870

您只需要在第一次上漆时设置激光的 x 位置，否则在每次重新上漆时，激光都会相对于船水平移动。为此，您可以添加另一个布尔值 isFirst（用于激光的第一次绘制），当 isLaser 第一次变为真时设置为真，并且仅当 isFirst 为真时才设置 x 位置。

```
boolean isFirst = true;

public void paintComponent(Graphics g){
    super.paintComponent(g);
    g.drawImage(ship, ship_dx, ship_dy, this);
    if(isLaser){
        laser_dy -= laser_velocity;
        if(isFirst){

            laser_dx = ship_dx+laser_DxOffSetOfBall;
            isFirst = false;

        }
        g.drawImage(laser,laser_dx,laser_dy,this);
        if(laser_dy < 50)
        {
            isLaser = false;
            laser_dy = ship_dy-laser_DyOffSetOfBall;
        }
    } else {
        isFirst = true;
    }
        Toolkit.getDefaultToolkit().sync();
} 
```

# javascript - 寻找姐妹元素

> ID：14189601
> 
> 赞同：0
> 
> 时间：2013-01-07T03:47:05.927
> 
> 标签：javascript, jquery

```
<div class="videoItem">
    <div class="innerVideoItem">
         <a><div class="overlayBg"></div></a>
         <a><img class="overlayPlay"><img></a>
    </div>
</div>
<script>
    $(".overlayPlay").hover(function(){
          // How do I find overlayBg here?
    });
</script> 
```

如何在不使用的情况下访问 .overlayBg `$(".overlayBg")`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:49:18.087

在你的标记`overlayBg`和`overlayPlay`不是兄弟姐妹，他们是堂兄弟，你可以使用`closest`和`find`方法。

```
$(".overlayPlay").hover(function(){
    $(this).closest('.innerVideoItem').find('.overlayBg');
    // $(this).parent().prev().find('.overlayBg')
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T03:49:44.490

在本机 javascript 中，获取前一个元素的方法是（在您的事件处理程序中）：

```
this.parentElement.previousElementSibling.firstElementChild 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T03:50:17.520

你的意思是：

```
 $(".overlayPlay").hover(function(){
      $(this).parents("div.innerVideoItem").find("div.overlayBg");
 }); 
```

# math - 如何比较 a + b*sqrt(c) 形式的数字而中间整数不会越来越大？

> ID：14189603
> 
> 赞同：8
> 
> 时间：2013-01-07T03:47:07.923
> 
> 标签：math, language-agnostic, sqrt

我正在开发一个应用程序，用于解决涉及圆和线（可[构造数字](http://en.wikipedia.org/wiki/Constructible_numbers)）的二维欧几里得几何中的二次约束并以图形方式表示结果。我发现[这篇](https://tel.archives-ouvertes.fr/hal-00961982/document)关于在二叉树中表示此类问题的论文，但我遇到了一个实现问题：

我需要比较`a + b*sqrt(c)`小于、大于和相等的标准关系运算的形式数。我的应用程序的值`c`限制为`2`, `3`, `5`, `6`, `10`, `15`, 或`30`. 例如（类似 C 的伪代码，`^`是“幂”运算符）：

```
boolean CompareConstructibleNumbers(int a1, b1, c1, a2, b2, c2)
{
    return a1plusb1sqrtc1_is_greater_than_a2plusb2sqrtc2 = 
        4 * ((a1 - a2)^2) * (b1^2) * c1
          > ((b2^2) * c2 - (b1^2) * c1 - (a1 - a2)^2)^2;
        // Not sure if I have the direction right for >
} 
```

这种幼稚的实现需要我多次相乘，因此 32 位整数变为 64 位整数，然后是 128 位等。我不想在我的实现中仅使用自定义 BigInteger 来存储仅用于的临时值比较。

我也不想使用浮点数，并希望避免在尝试直接计算`sqrt(c)`为浮点数时出现舍入错误的风险。我需要对此应用程序进行精确计算，不一定是无限精度，但我想避免舍入误差并确保正确的结果。

如何在`a + b * sqrt(c)`不需要巨大的中间整数值的情况下比较表格的可构造数字？`a`我对和的初始值`b`在 32 位范围内。

****更新****感谢大家的回复。遵循继续分数的建议，我能够使用[基本递归公式](http://en.wikipedia.org/wiki/Fundamental_recurrence_formulas)为平方根生成任意精确的近似值。

我还发现[这篇论文](http://golovchenko.org/docs/RoundOffError_FixedPointMultiplication.pdf)讨论了实数的近似值与整数的定点表示相乘的误差累积。幸运的是，我感兴趣的所有平方根的整数部分最多为 6（只需要 3 位），所以我有很多位可用于表示近似的小数部分。[对于乘以 32 位整数，我需要Q3.32](http://en.wikipedia.org/wiki/Q_%28number_format%29)位的最小定点近似值，以在乘法后将误差保持在 1 位。

因此，虽然 53 位精度`double`足以存储足够精确的平方根近似值，但存储乘以 32 位整数后的结果是不够的，因为这需要至少 67 位精度才能最小化错误。`c`使用 64 位整数（比如 Q16.48）和 32 位整数中的定点表示`b`，我计划使用 96 位或 128 位数字的多字算术来进行比较，而不会产生足够的错误结果。我相信这对于比较仅使用这 7 个平方根的可构造数字来说足够准确，但我对第二意见感兴趣。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T05:37:38.257

假设您的值使用完整的 32 位，我认为没有一个公式可以让您保持在 64 位内进行精确比较。我看到的问题是，形式 a+b*sqrt(c) 的数字在实数中很密集（假设 c 不是正方形），所以你会得到非常微妙的比较，需要很多精度。因此，您基本上需要通过平方来消除平方根，这将使用 3 次乘法。

在这种情况下，BigInt 实现实际上并没有那么糟糕，因为您只需要实现乘法、加法、减法和比较。这些可以用很少的代码行有效地实现。通常，执行起来很烦人的是除法。此外，您知道您的数字永远不会溢出包含两个 64 位单元的数组，因此您实际上不需要跟踪产品中的位数。

编辑：关于 Thomas 和 Nemo 对此的评论建议使用双精度，实际上很容易通过使用连分数表示在 sqrt(2) 的 2^{-53} 内找到使用 32 位整数的近似值。

# c++ - 什么是 C++ 上下文的单态化？

> ID：14189604
> 
> 赞同：90
> 
> 时间：2013-01-07T03:47:12.093
> 
> 标签：c++, rust

[Dave Herman 最近](http://www.infoq.com/presentations/Rust)在 Rust 的演讲中说他们从 C++ 中借用了这个属性。我找不到有关该主题的任何内容。有人可以解释一下单态化是什么意思吗？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-01-07T14:38:14.093

单态化意味着生成通用函数的特殊版本。如果我编写一个提取任何对的第一个元素的函数：

```
fn first<A, B>(pair: (A, B)) -> A {
    let (a, b) = pair;
    return a;
} 
```

然后我两次调用这个函数：

```
first((1, 2));
first(("a", "b")); 
```

编译器将生成两个版本`first()`，一个专门用于整数对，一个专门用于字符串对。

该名称源自编程语言术语“多态性”——意思是一个函数可以处理多种类型的数据。单态化是从多态代码到单态代码的转换。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-11-07T15:52:41.243

不确定是否还有人在看这个，但 Rust 文档实际上确实提到了它是如何通过这个过程实现无成本抽象的。从[*使用泛型的代码性能*](https://doc.rust-lang.org/book/ch10-01-syntax.html#performance-of-code-using-generics)：

> 您可能想知道在使用泛型类型参数时是否存在运行时成本。好消息是，Rust 以这样一种方式实现泛型，即使用泛型类型的代码运行速度不会比使用具体类型慢。
> 
> Rust 通过在编译时对使用泛型的代码执行单态化来实现这一点。单态化是通过填充编译时使用的具体类型将通用代码转换为特定代码的过程。
> 
> 在这个过程中，编译器执行的步骤与我们在示例 10-5 中创建泛型函数的步骤相反：编译器查看调用泛型代码的所有位置，并为调用泛型代码的具体类型生成代码.
> 
> 让我们通过一个使用标准库的 Option 枚举的示例来看看它是如何工作的：
> 
> ```
> let integer = Some(5);
> let float = Some(5.0); 
> ```
> 
> 当 Rust 编译这段代码时，它会执行单态化。在此过程中，编译器读取已在 Option 实例中使用的值，并识别出两种 Option：一种是 i32，另一种是 f64。因此，它将 Option 的通用定义扩展为 Option_i32 和 Option_f64，从而将通用定义替换为特定定义。
> 
> 代码的单态化版本如下所示。通用选项被编译器创建的特定定义替换：
> 
> ```
> // Filename: src/main.rs
> 
> enum Option_i32 {
>     Some(i32),
>     None,
> }
> 
> enum Option_f64 {
>     Some(f64),
>     None,
> }
> 
> fn main() {
>     let integer = Option_i32::Some(5);
>     let float = Option_f64::Some(5.0);
> } 
> ```
> 
> 因为 Rust 将泛型代码编译为指定每个实例中的类型的代码，所以我们无需为使用泛型支付运行时成本。当代码运行时，它的执行就像我们手动复制每个定义一样。单态化的过程使得 Rust 的泛型在运行时非常高效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T03:55:56.513

对此不确定；你能链接到谈话吗？这可能是一句随口一说。

Herman 可能创造了一个类似模板专业化的术语，它从模板生成相互不相关（非多态或“单态”）的类型/对象，这是一个多态结构。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-03-25T20:05:31.907

[Rust Book](https://doc.rust-lang.org/book/ch10-01-syntax.html#performance-of-code-using-generics)中有一个很好的关于单态化的解释

> 单态化是通过填充编译时使用的具体类型将通用代码转换为特定代码的过程。

从书中的例子中，如果你定义了变量[`Some`](https://doc.rust-lang.org/std/option/enum.Option.html#variant.Some)：

> ```
> let integer = Some(5);
> let float = Some(5.0); 
> ```
> 
> 当 Rust 编译这段代码时，它会执行单态化。在该过程中，编译器读取实例中已使用的值`Option<T>` 并识别两种类型`Option<T>`：一种 is `i32`，另一种 is `f64`。因此，它扩展了`Option<T>`into `Option_i32`和的通用定义`Option_f64`，从而将通用定义替换为特定定义。
> 
> 代码的单态化版本如下所示。泛型 `Option<T>`被编译器创建的特定定义替换：
> 
> 文件名：src/main.rs
> 
> ```
> enum Option_i32 {
>     Some(i32),
>     None,
> }
> 
> enum Option_f64 {
>     Some(f64),
>     None,
> }
> 
> fn main() {
>     let integer = Option_i32::Some(5);
>     let float = Option_f64::Some(5.0);
> } 
> ```

# go - 没有函数体的函数签名

> ID：14189606
> 
> 赞同：15
> 
> 时间：2013-01-07T03:47:23.043
> 
> 标签：go

在查看该[`math.Ceil`](http://golang.org/src/pkg/math/floor.go?s=725:753#L26)方法的源代码时，我发现了这种语法，其中有一个没有主体的导出函数签名，以及一个包含实现的同一签名的非导出版本：

```
// Ceil returns the least integer value greater than or equal to x.
//
// Special cases are:
//  Ceil(±0) = ±0
//  Ceil(±Inf) = ±Inf
//  Ceil(NaN) = NaN
func Ceil(x float64) float64

func ceil(x float64) float64 {
    return -Floor(-x)
} 
```

我认为这是一些允许您轻松导出本地函数的语法。那是对的吗？为什么要这样做，而不是只使用一个导出函数并在包中使用它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T03:55:43.307

根据[Go 语言规范](http://golang.org/ref/spec#Function_declarations)。

> 函数声明可以省略主体。这样的声明为在 Go 之外实现的函数（例如汇编例程）提供了签名。

在这种情况下，该`Ceil`功能由 386 in 的体系结构特定程序集文件实现`floor_386.s`。amd64 和 arm 架构各自都有一个可以实现的程序集文件`Ceil()`，但这些程序集文件只是调用未导出`ceil()`函数的粘合剂。

# windows-7 - Win7 64位中未解析的外部符号_DbgPrint

> ID：14189607
> 
> 赞同：1
> 
> 时间：2013-01-07T03:47:24.100
> 
> 标签：windows-7, driver

我使用 VS2010 在 Win7 64bit 中编写我的驱动程序。驱动程序很简单，可以打印一些东西，如下所示：

```
#include <ntddk.h>

VOID 
OnUnload( IN PDRIVER_OBJECT DriverObject )
{
    DbgPrint("My Driver Unloaded!");
}

NTSTATUS 
DriverEntry( IN PDRIVER_OBJECT theDriverObject, IN PUNICODE_STRING theRegistryPath )
{
    NTSTATUS status;

    DbgPrint("My Driver Loaded!");
    theDriverObject->DriverUnload = OnUnload;

    return STATUS_SUCCESS;
} 
```

当我完成它时，VS2010 说：错误 LNK2019：未解析的外部符号 _DbgPrint。我不知道为什么。Win7 32位的驱动程序是可以的。

我认为可能是 Lib config 错误，而我的 Lib config 是：

```
C:\WinDDK\7600.16385.1\lib\win7\ia64; 
```

并且包含配置是：

```
C:\WinDDK\7600.16385.1\inc\ddk;
C:\WinDDK\7600.16385.1\inc\api;
C:\WinDDK\7600.16385.1\inc; 
```

配置正常吗？我应该注意的地方是什么？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:35:14.390

VS 2010 不用于编译和构建驱动程序。但是，Visual Studio 2012 具有此功能。

在VS 2012之前，你需要使用WinDDK来构建驱动（我不确定你现在是否可以下载它）。

# c# - WCF 阅读器配额最大字符串内容长度配额 (8192)

> ID：14189610
> 
> 赞同：0
> 
> 时间：2013-01-07T03:48:09.640
> 
> 标签：c#, asp.net, wcf, web-services, endpoint

我之前在这里写过一个关于类似问题的问题，但是我已经对正确执行绑定和行为的正确方法进行了更多测试和研究，尽管我现在有了更好的理解，但我仍然遇到这个被清除的错误。我什至浏览了客户端并以编程方式创建了绑定，以便我可以确定它使用了正确的设置。

客户端程序：

```
 public static UserAnalyticsFarEnd.UserAnalyticsMasterServiceClient MakeClient(string endpointUri)
    {
        UserAnalyticsFarEnd.UserAnalyticsMasterServiceClient client = null;

        // replicate all the binding info from app.config
        BasicHttpBinding binding = new BasicHttpBinding();
        binding.Name = "MaxSizeBasicBinding";
        // The interval of time for a connection to open, before the transport raises an exception.
        binding.OpenTimeout = TimeSpan.FromMinutes(1);
        // The interval of time that a connection can remain active, during which no application
        // messages are received, before it is dropped. This one is NOT important.
        binding.ReceiveTimeout = TimeSpan.FromMinutes(10);
        // The interval of time for an operation to complete before the transport raises an exception.
        // This one is important. The time here was increased so that a command to the Negotiator
        // has more than the default of one minute before it times out. Given that the Negotiator
        // tries 3 times on any database command, a total of 3 minutes, CBH changed this to 5 on 2/3/12.
        binding.SendTimeout = TimeSpan.FromMinutes(5);  // used to be 1
        binding.CloseTimeout = TimeSpan.FromMinutes(1);
        binding.AllowCookies = false;
        binding.BypassProxyOnLocal = false;
        binding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
        binding.MessageEncoding = WSMessageEncoding.Text;
        binding.TextEncoding = System.Text.Encoding.UTF8;
        binding.TransferMode = TransferMode.Buffered;
        binding.UseDefaultWebProxy = true;
        //int maxMessageSize = 1024 * 1024; // reasonable size w/o allocating huge amt of memory
        // That 1MB was not big enough, so increase it to half the limit, 1,073,741,824
        int maxMessageSize = 1024 * 1024 * 1024;
        binding.MaxBufferSize = maxMessageSize;
        binding.MaxReceivedMessageSize = maxMessageSize;
        binding.ReaderQuotas.MaxBytesPerRead = maxMessageSize;
        binding.ReaderQuotas.MaxStringContentLength = maxMessageSize;
        binding.Security.Mode = BasicHttpSecurityMode.TransportCredentialOnly;
        binding.Security.Message.ClientCredentialType = BasicHttpMessageCredentialType.UserName;
        binding.Security.Message.AlgorithmSuite = System.ServiceModel.Security.SecurityAlgorithmSuite.Default;
        binding.Security.Transport.ClientCredentialType = HttpClientCredentialType.Windows;
        binding.Security.Transport.ProxyCredentialType = HttpProxyCredentialType.None;
        try
        {

            System.Net.AuthenticationManager.CredentialPolicy = null;
            EndpointAddress endpointAddress = new EndpointAddress(endpointUri);
            client = new UserAnalyticsFarEnd.UserAnalyticsMasterServiceClient(binding, endpointAddress);
            //client.ClientCredentials.Windows.AllowedImpersonationLevel =
            //    System.Security.Principal.TokenImpersonationLevel.Impersonation;
        }
        catch (Exception ex)
        {
            throw ex;
        }

        return client;

    } 
```

服务端 (Web.config)

```
<bindings>
  <basicHttpBinding>

    <binding name="BasicHttpBinding_Configuration" maxBufferSize="2147483647"
      maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                 maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>

    <binding name="BasicBindingMaxLength" maxBufferSize="1073741824"
             maxReceivedMessageSize="1073741824">
      <readerQuotas maxDepth="1073741824" maxStringContentLength="1073741824"
                 maxArrayLength="1073741824" maxBytesPerRead="1073741824" maxNameTableCharCount="1073741824" />
      <security mode="TransportCredentialOnly">
        <!--<transport clientCredentialType="Windows" />-->
      </security>
    </binding>

  </basicHttpBinding>
</bindings>

   <service behaviorConfiguration="UserAnalyticsSvcBehaviors" name="CISE.ServiceEngine.MasterEngineProxy.Services.UserAnalyticsMasterService">

    <endpoint address="" binding="basicHttpBinding" behaviorConfiguration="Behaviors.EndpointBehavior" bindingConfiguration="BasicBindingMaxLength"
     contract="CISE.ServiceEngine.MasterEngineProxy.Interfaces.IUserAnalyticsMasterService">
    </endpoint>
    <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />

  </service>

 <behavior name="UserAnalyticsSvcBehaviors">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
    </behavior> 
```

如果有人可以在这里帮助我，我已经为此工作了好几天，似乎无法想出默认设置的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:02:59.330

将此配置放入您的服务配置中，

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime executionTimeout="4800" maxRequestLength="2097150"/>
  </system.web>
  <system.serviceModel>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <!--BINDDING-->
    <bindings>
      <basicHttpBinding>
      </basicHttpBinding>
      <customBinding>
        <binding name="LargeSilverlight" closeTimeout="00:21:00" openTimeout="00:20:00"
          receiveTimeout="00:20:00" sendTimeout="00:50:00">
          <textMessageEncoding maxReadPoolSize="2147483647" maxWritePoolSize="2147483647">
            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
              maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          </textMessageEncoding>
          <httpTransport maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
            maxBufferSize="2147483647" />
        </binding>
      </customBinding>
    </bindings>
    <client>
    </client>
    <!--SERVICE-->
    <services>
      <service name="CISE.ServiceEngine.MasterEngineProxy.Services.UserAnalyticsMasterService"  behaviorConfiguration="SilverlightWCFLargeDataApplication" >
        <endpoint  address="" binding="customBinding" bindingConfiguration="LargeSilverlight" behaviorConfiguration="SilverlightWCFLargeDataApplication" contract="CISE.ServiceEngine.MasterEngineProxy.Interfaces.IUserAnalyticsMasterService" >
        </endpoint>

      </service>
    </services>

    <!--BEHAVIOR-->
    <behaviors>
      <serviceBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>

      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="SilverlightWCFLargeDataApplication">
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </endpointBehaviors>
    </behaviors>

  </system.serviceModel>
  <system.webServer>

    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="500000000"></requestLimits>
      </requestFiltering>
    </security>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

# google-maps - 多边形未闭合

> ID：14189613
> 
> 赞同：4
> 
> 时间：2013-01-07T03:48:56.003
> 
> 标签：google-maps, google-maps-api-3

我注意到在使用绘图管理器绘制多边形时，它们没有关闭（即最后一个点没有坐标到第一个点）。我知道 Google Maps API v3 会自动关闭多边形，但 Google Earth、Google Static Maps API 或任何其他软件我尝试将数据导入..

我的问题是，我使用几何库来保存编码的多边形。有没有办法在编码之前将覆盖对象中第一个点的副本推送到最后一个点？

我的解决方法是将 getPaths().getArray() 复制到我自己的数组中，制作副本，然后使用 javascript lib 进行编码，这可以正常工作但代码很多。只是想知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T05:47:39.490

像这样的东西应该将多边形的第一个点添加到[MVCArrry](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)的末尾（未测试）。

```
myPoly.getPath().push(getPath().getAt(0)); 
```

（假设一个简单的多边形有一个路径，[getPath](https://developers.google.com/maps/documentation/javascript/reference#Polygon)返回第一个路径）

# asp.net-mvc-3 - 如何在 MVC 3 中更改自动生成的错误类

> ID：14189615
> 
> 赞同：3
> 
> 时间：2013-01-07T03:48:59.823
> 
> 标签：asp.net-mvc-3

我正在使用 MVC 3 中的验证。我知道如果验证未通过，错误的字段会自动添加`input-validation-error`类，并且由于默认的 CSS，它们会变成红色。但是，如果我使用从 Internet 下载的另一个主题怎么办？也许它的错误类只是`error`或其他。

我的问题是，如何更改`input-validation-error`代码中的类？除了使用jQuery之外还有什么办法吗？

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:31:40.713

这些是 MVC 附带的默认验证，您也可以在视图中覆盖

```
/* Styles for validation helpers
-----------------------------------------------------------*/
.field-validation-error
{
    color: #ff0000;
}

.field-validation-valid
{
    display: none;
}

.input-validation-error
{
    border: 1px solid #ff0000;
    background-color: #ffeeee;
}

.validation-summary-errors
{
    font-weight: bold;
    color: #ff0000;
}

.validation-summary-valid
{
    display: none;
} 
```

您可以向现有的validationMessageforclass 添加另一个css，而不是覆盖

```
@Html.ValidationMessageFor(m => m.Id, null, new { @class = "className" }) 
```

希望能帮助到你。

# jasper-reports - 如何在每个中间页的列脚中打印当前总计

> ID：14189616
> 
> 赞同：0
> 
> 时间：2013-01-07T03:49:04.897
> 
> 标签：jasper-reports

我正在为会计中使用的分类帐设计一个报告。在每组结束时，我必须打印总数。为此，我可以使用组页脚轻松完成。但是当组很大时，它会分布在许多页面上。问题是中间页没有总数，而只有最后一页。

如何在每个中间页的列页脚中打印当前总计？

是否有任何标签或方法可以在*Print when 表达式*中使用来执行此操作？

![在此处输入图像描述](../Images/3c3c519f9fc1bc17e273c52d43f087db.png)

![在此处输入图像描述](../Images/022c230374e195054a7431a5a48b4058.png)

# c# - 在 webkit 中获取 HTML 输入文本值

> ID：14189617
> 
> 赞同：1
> 
> 时间：2013-01-07T03:49:07.203
> 
> 标签：c#, winforms, webkit, webkit.net

检索 HTML 表单的输入文本框“值”（即用户在所述字段中键入的内容）的适当语法是什么？

我已经尝试过，`<webkitControlName>.Document.GetElementById("email").GetAttribute("value").ToString()` 但它总是返回空白/空/空，无论在该字段中输入了什么。

VS2012，.NET 4CP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-18T02:37:59.980

这应该可以解决问题。

```
var inputValue = <webkitControl>.StringByEvaluatingJavaScriptFromString("document.getElementById('email').value"); 
```

# javascript - 使用 javascript JSON 对象动态创建表单

> ID：14189620
> 
> 赞同：2
> 
> 时间：2013-01-07T03:49:18.500
> 
> 标签：javascript, jquery, json, object

我有这个 JSON 对象，我试图根据它的属性创建一个 html 表单。我将如何定位多个级别以创建各种字段，然后更深入地定位以获取有关该字段的详细信息。我也没有设置这种格式。

```
{
    "Controls": [{
        "Button":{
            "Name":{
                "ID":"Name",
                "FieldType":"Input"
            },
            "x":{
                "ID":"X",
                "FieldType":"Input"
            },
            "y":{
                "ID":"Y",
                "FieldType":"Input"
            },
            "width":{
                "ID":"Width",
                "FieldType":"Input"
            },
            "height":{
                "ID":"Height",
                "FieldType":"Input"
            },
            "Action":{
                "ID":"Action",
                "FieldType":"DropDown"
            }
        },

    }]
} 
```

在上面的示例中，除了“Action”之外的所有字段都是输入，而“Action”将是一个下拉列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T03:58:43.113

您可能想要查看完全符合您要求的[jquery.dform插件。](https://github.com/daffl/jquery.dform)

# apache - htaccess 重写规则： abc.com/sub/random.php 到 abc.com/random

> ID：14189624
> 
> 赞同：1
> 
> 时间：2013-01-07T03:49:54.117
> 
> 标签：apache, .htaccess, rewrite

我正在尝试将[http://abc.com/sub/random.php](http://abc.com/sub/random.php)重写为[http://abc.com/random](http://abc.com/random)。我努力了

```
RewriteRule ^random$ sub/random.php [QSA,L] 
```

但由于某种原因它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:17:24.303

在浏览器的地址栏中显示带有资源的“丑陋” URL 没有多大意义：`http://abc.com/sub/random.php`，同时隐藏“漂亮” URL `http://abc.com/random`。所以，我假设你想要的与你所要求的相反。

如果这是正确的，你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} .*/([^/]+)/?$    [NC]
RewriteRule .* sub/%1.php  [L,QSA] 
```

它将静默映射：

`http://abc.com/random`

对此：

`http://abc.com/sub/random.php`

where`random`不是固定字符串，而是作为脚本名称传递的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T03:59:34.803

这应该适合你。

```
RewriteCond %{HTTP_HOST} ^abc\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.abc\.com$
RewriteRule ^sub\/random\.php$ "http\:\/\/abc\.com\/random" [R=301,L] 
```

# css - 真正的中心垂直和水平 CSS Div

> ID：14189625
> 
> 赞同：14
> 
> 时间：2013-01-07T03:50:01.357
> 
> 标签：css, html, cross-browser, center

如何创建一个真正的中心 CSS div 跨浏览器，例如在保留页面中使用？

我已经尝试过这个 2007 css 技巧 - **[How To Center an Object Exactly In The Center](http://css-tricks.com/quick-css-trick-how-to-center-an-object-exactly-in-the-center/)**但正如您从我的代码[**JSFiddle**](http://jsfiddle.net/P4RVD/)中看到的那样，它不是 100% 的中心。

**HTML：**

```
<div class="center">
  <p>Text</p>
</div> 
```

**CSS：**

```
.center{
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -50px;
  margin-left: -100px;
  border:5px solid black;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T03:53:19.983

该技术要求元素具有固定的宽度和高度。您没有设置宽度和高度。根据您的边框和边距，要使其居中，宽度需要为 190 像素，高度需要为 90 像素。使用`line-height`和`text-align`结合固定的宽度和高度使文本和边框居中。**[试试看。](http://jsfiddle.net/P4RVD/1/)**

**CSS**

```
.center{
  position: fixed;
  top: 50%;
  left: 50%;
  width: 190px;
  height: 90px;
  line-height: 90px;
  text-align: center;
  margin-top: -50px;
  margin-left: -100px;
  border:5px solid black;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-20T09:35:41.107

你可以用纯 CSS 做到这一点：

```
html {
  width: 100%;
  height: 100%;
}
body {
  min-width: 100%;
  min-height: 100%;
}
div.centeredBlueBox {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  margin: auto;
  width: 300px;
  height: 200px;
  background-color: blue;
} 
```

为 and 提供具体的（例如：）`300px`而不是派生的（例如：`auto`或`30%`）值很`width`重要`height`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T03:54:35.303

```
<div style='position:absolute; left:50%; top:50%; margin-left:(-)width_of_your_element/2px; margin-top:(-)height_of_your_element/2px'> 
```

例如

```
<!DOCTYPE html>
<html>
<body>
<div style='border:1px solid; width:200px; height:200px; position:absolute; left:50%; top:50%; margin-left:-100px; margin-top:-100px'>hallo</div>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-23T23:57:31.287

看看**[这个](http://coding.smashingmagazine.com/2013/08/09/absolute-horizontal-vertical-centering-css/)**；相当聪明的文章。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-24T08:15:13.900

这就是我的解决方案：

```
<div style="position: absolute; left: 50%; height: 100%;">
    <div style="position: relative; left: -50%; display: table; height: 100%;">
        <div style="display: table-cell; vertical-align: middle;">
            //your content here
        </div>
    </div>
</div> 
```

它适用于许多浏览器。并且布局后添加的内容没有问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-14T20:38:29.740

这是我为 IE 垂直对齐创建的高度设置器的额外示例。额外的跨度有一个垂直对齐：中间。

```
<style type="text/css">
    html, body {
        margin: 0;
        padding: 0;
        overflow:hidden;
        text-align:center;
    }
    html, body{
        height: 100%;
    }
    #loginContainer {
        margin: 0 auto;
        display: table;
        min-width:300px;
        text-align:left;
        height: 85%; /* vertical align not exact in the middle */
    }
    #loginContainer .label{
        width: 25%;
        float:left;
        white-space:nowrap;
        line-height:20px;
    }
    #loginContainer h2{
        border-bottom:2px solid #B4C3E1;
        border-width:0 0 3px;
        padding:2px 4px;
    }
    .mainHeader {
        position:absolute;
        top:0;
        left:0; 
        text-align:center; 
        width:100%; 
        font-size:2em;
        white-space:nowrap;
    }
    .detailsText {
        border-top:1px solid #F60;
        margin-top:5px;
        clear:both;
    }
    /* layout horizontal and vertical */
    .horizontalBox {
        display: table-cell;
        vertical-align: middle; /* not seen by IE6-7 */
        height: 100%;
        white-space: nowrap;
    }
    .verticalBox {
        padding: 55px 0 0 0; /* 55px height of logo */
    }
    .rightText {
        text-align:right;
    }
</style>
<!--[if lte IE 8]>
<style type="text/css">
    #loginContainer {
        width:300px; /* minimum width */
    }
    .horizontalBox {
        text-align: center;
    }
    .verticalBox, .heightSetter {
        display: inline-block;
        vertical-align: middle;
        text-align: left;
        zoom:1;
    }
    .heightSetter {
        height: 100%;
    }
    .verticalBox {
        display: inline;
        height: 0;
    }
    .heightSetter {
        width: 1px;
    }
</style>    
<![endif]-->
<div class="mainHeader">This is the Header content</div>
<div id="loginContainer">
    <div class="horizontalBox">
        <div class="verticalBox">
            <h2>My header of the vertical box</h2>
            <p>My Content</p>
        </div>
        <span class="heightSetter"></span>
    </div>
</div> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-20T00:59:43.837

将`display`类型设置`DIV`为`table-cell`。然后你可以使用 normal `vertical-align`，就像一个`TD`元素一样。

```
<div style="display: table-cell; vertical-align: middle; height: 200px;">
Centered Text
</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-07T03:57:51.897

这就是我所做的

```
<html>
<head>
    <title>Page Title</title>

    <style>
       .center { margin:auto; width:500px; background-color:green; }
    </style>
</head>
<body>
    <div class="center">
        <p>Help me please</p>
    </div>
</body>
</html> 
```

希望这可以帮助。

# php - 无法使用 mkdir 创建目录

> ID：14189632
> 
> 赞同：0
> 
> 时间：2013-01-07T03:51:11.763
> 
> 标签：php, mysql, directory, mkdir

所以我正在尝试开发一个脚本，所有用户都可以将图像上传到动态创建的文件夹。

这是我做的线。

```
$newID = 1
mkdir('uploads/job_images/'.$newID.'/',0755); 
```

这将在“uploads/job_images”中创建一个已经设置好的文件夹。

我的问题是，如果“工作图像”权限设置为 755 或 766，它不会让我创建目录。但是当我尝试将“job_images”权限设置为 777 时，它允许我创建一个目录。但他们说 777 存在安全风险。如果权限设置为 755，您为什么认为我无法在“job_images”内创建文件夹，但如果“job_images”权限设置为 777，则允许我在“job_images”内创建文件夹？

创建的文件夹还将“所有者/组”设置为 99/99(nobody)。楼主组好吗？

问题：

1.  我可以在不使用 777 到“job_images”文件夹或将其留给 777 的情况下执行此操作吗？
2.  我需要更改已创建文件夹的所有者吗？我可能有一天需要删除这些文件夹。
3.  如何默认网站用户创建的文件夹组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:36:26.220

尝试使用`sudo`[`chown`](http://nersp.nerdc.ufl.edu/~dicke3/nerspcs/chown.html)将您的目录的所有权更改为 Apache（或运行您的代码的任何软件/服务/守护程序:)。如果您是目录的创建者，则不需要使用 sudo（但在大多数 Unix/Linux 系统中，您也需要拥有目标组权限）。

请阅读有关[文件系统权限的数字表示法](http://en.wikipedia.org/wiki/Filesystem_permissions#Numeric_notation)。前 7 个表示**所有者组**有权读取、写入和执行您的文件。5 表示 Read & Execute，不写，所以不能新建目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T02:38:40.227

我有同样的问题，PHP限制了一些功能：

[受安全模式限制的功能](http://www.php.net/manual/en/features.safe-mode.functions.php) 解决方法是在/etc/php5/apache2/phi.ini 配置文件中设置指令safe_mode_gid=On。

请参阅[safe_mode_gid 指令](http://www.php.net/manual/en/ini.sect.safe-mode.php) 它适用于我的 LAMP 服务器 Ubuntu 12.04

# jquery - 如何在其他脚本中执行一个功能？

> ID：14189634
> 
> 赞同：0
> 
> 时间：2013-01-07T03:51:22.307
> 
> 标签：jquery

我需要隐藏**div id="FormStep"**何时检查最后一次输入。

***在我的页面上，我使用了这个 HTML 代码：***

```
<div id="FormStep">
  <input type="text" name="test1" id="test1" class="validate" />
  <div id="Checktest1Input"></div>
  <input type="text" name="test2" id="test2" class="validate" />
  <div id="Checktest2Input"></div>
  <input type="text" name="test3" id="test3" class="validate" />
  <div id="Checktest3Input"></div>
<input type="button" id="Step" value="Send"/>
</div> 
```

***对于页面上的验证，我使用以下 JS 代码：***

```
$('#Step').on('click',function(){
    $('.validate').each(function(){

        if ($(this).val().length == 0){
        $('#Check'+this.id+'Input').html('false');
          return false;
        } else {
        $('#Check'+this.id+'Input').html('true');
        }

      });
}); 
```

**请告诉我如何在检查最后一次输入后添加`$('#Step').hide();`此代码执行的代码？`$('#Step').hide();`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T03:59:09.893

您的代码可以通过以下方式显着简化：

```
$('#Step').on('click',function(){
    var valid = true;
    $('.validate').each(function(){
        valid = valid && $(this).val().length != 0;
        $(this).next().html("" + ($(this).val().length != 0)); 
    });
    if(valid){
        $(this).hide();
    }
    return valid;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T04:03:19.183

[工作小提琴](http://jsfiddle.net/PrdFy/)

```
$('#Step').on('click',function(){
    var hideStep = true;
    $('.validate').each(function(){

        if ($(this).val().length == 0){
        $('#Check'+this.id+'Input').html('false');
          hideStep = false;
          return false;
        } else {
        $('#Check'+this.id+'Input').html('true');
        }
      });
    if (hideStep)
      $('#Step').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T03:59:15.883

使用变量并设置 $('#Step').hide(); 在每个函数之后：

```
$('#Step').on('click',function(){
    var error = false;
    $('.validate').each(function(){
        if ($(this).val().length == 0){
          $('#Check'+this.id+'Input').html('false');
          error = false;
        } else {
          $('#Check'+this.id+'Input').html('true');
          error = true;
        }
      });
    if(!error) { 
      $('#Step').hide();
    }
}); 
```

.each 是同步的，这意味着 .each 函数下的所有内容将在运行后加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T03:59:34.150

我认为您正在寻找的是隐藏操作是否存在无效输入

```
$('#Step').on('click',function(){
    var valid = true;
    $('.validate').each(function(){
        if ($(this).val().length == 0){
            $('#Check'+this.id+'Input').html('false');
          valid = false;
        } else {
            $('#Check'+this.id+'Input').html('true');
        }
      });
    if(!valid){
        $('#Step').hide();
    }
}); 
```

# php - 如何使用 phpunit_selenium2 扩展执行双击？

> ID：14189639
> 
> 赞同：1
> 
> 时间：2013-01-07T03:52:36.823
> 
> 标签：php, testing, selenium, phpunit, selenium-webdriver

这个问题专门针对 phpunit_selenium2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:13:08.037

那么真正的开源方式：有没有这样的功能？克隆一个仓库，实现一个功能，创建拉取请求，?????，利润！！！！1

[https://github.com/sebastianbergmann/phpunit-selenium/pull/212](https://github.com/sebastianbergmann/phpunit-selenium/pull/212)

现在`phpunit_selenium2`支持双击。你可以像这样使用它：

```
$this->moveto($element);
$this->doubleclick(); 
```

[测试中的对应示例](https://github.com/sebastianbergmann/phpunit-selenium/commit/adc70ed6ab7a5bbbdc1eedef39811262c49ce69f#L1R253)

# java - 如何从 JRuby 中的 ScriptingContainer 执行的 ruby 脚本初始化 Java 对象？

> ID：14189641
> 
> 赞同：2
> 
> 时间：2013-01-07T03:52:58.580
> 
> 标签：java, ruby, jruby

执行 Ruby 脚本的 Java 代码：

```
ruby = new ScriptingContainer(LocalVariableBehavior.PERSISTENT);
ruby.put("MyJavaClass", MyJavaClass.class);
ruby.runScriptlet(readFile("Test.rb")); 
```

`MyJavaClass`代码：

```
public class MyJavaClass {
    public MyJavaClass(String name) {
        System.out.println("I got a name: " + name);
    }
} 
```

内的 Ruby 代码`Test.rb`：

```
someInstance = MyJavaClass.new("Joe") 
```

这就是我尝试使用 JRuby 在 Ruby 脚本中初始化 Java 对象的过程。它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T23:58:39.810

首先，请注意，通过将`MyJavaClass.class`Java Class 对象作为 ruby​​ 变量，您的 JRuby 脚本可以使用可用的 Java Class 对象。以下作品：

```
java_class = MyJavaClass.getDeclaredConstructor(java.lang.String.java_class)
someInstance = java_class.new_instance("Joe") 
```

它使用 Java 反射来实例化`MyJavaClass`.

但是，这可以更简单地完成，而无需将类添加为 ruby​​ var。首先，确保文件夹的路径`MyJavaClass`位于类路径（[或 ruby`$LOAD_PATH`](https://github.com/jruby/jruby/wiki/ClasspathAndLoadPath)​​ ）上。然后，在 中按如下方式调用该类`Test.rb`。

```
someInstance = Java::MyJavaClass.new("joe") 
```

或者

```
 java_import 'MyJavaClass'
 someInstance = MyJavaClass.new("Joe") 
```

# clojure - 从 Datomic 实体中获取所有字段

> ID：14189647
> 
> 赞同：28
> 
> 时间：2013-01-07T03:53:41.567
> 
> 标签：clojure, datomic

[Datomic 查询和规则](http://docs.datomic.com/query.html)文档的“嵌入式”部分说：

> 像 SQL 这样的查询语言是面向客户端-服务器模型的，在这种模型中，在一次对话中，您将不得不同时处理这两个问题：
> 
> *   回答您的基本问题，例如本月谁买了袜子。
> *   恢复报告和处理所需的任何其他信息，例如他们的姓名和电子邮件地址。
> 
> 后者并不是真正的查询，它只是对相关信息的机械导航。

虽然我很欣赏提到的两个不同方面的正交性是如何得到尊重的，但我认为我经常需要检索整个实体，无论它的属性是什么。

据我所知，查询通常具有以下形式：

```
(datomic.api/q '[:find ?name ?age ?email
                 :where
                 [?e :myapp/name ?name]
                 [?e :myapp/age ?age]
                 [?e :myapp/email ?email]]
               (db conn)) 
```

如果我想检索具有 N 个属性的实体，我会让它们在每个查询中都列出它们，这对我来说似乎很乏味且容易出错。

**如何告诉 Datomic 检索具有它们持久化的所有字段的实体，而不必显式指定它们？**

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-15T21:42:03.627

从查询中获取实体（id），例如：

```
=> (def eid (d/q '[:find ?e :where [?e :myapp/name "Fred"]] (db conn))) 
```

你可以得到EntityMap：

```
=> (def ent (d/entity (db conn) (ffirst eid))) 
```

因此您无需进行额外查询即可访问字段/属性：

```
=> (seq ent)
;; ([:myapp/name "Fred"] [:myapp/age 16] [:myapp/email "fred@email.com"]) 
```

但是首先获取密钥可能更容易：

```
=> (keys ent)
;; (:myapp/name :myapp/age :myapp/email) 
```

您甚至可以使用以下技巧获取反向键（指向该实体的“外部”引用属性）：

```
=> (.touch ent)
=> (keys (.cache ent)) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-09-03T14:07:29.463

您可以使用`pull`从实体中获取所有字段，甚至只是一个选择。`'[*]`用作 pull 的模式将检索所有字段

有关更多信息，请参阅[拉取文档](http://docs.datomic.com/pull.html "原子拉动文档")。

要从具有 id 的实体中获取所有字段，请`eid`使用：

`(d/pull (db conn) '[*] eid)`

拉取也可以在查询中使用：

```
(datomic.api/q '[:find (pull ?e [*])
                 :where
                 [?e :myapp/name]
               (db conn)) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-12-29T10:56:39.450

# [datomic.api/touch](https://docs.datomic.com/on-prem/clojure/index.html#datomic.api/touch)函数

有一个特定的[datomic.api/touch](http://docs.datomic.com/clojure/#datomic.api/touch)函数可以*“触摸”*实体的所有属性。 [实体](http://docs.datomic.com/entities.html)函数返回的[实体](https://docs.datomic.com/on-prem/clojure/index.html#datomic.api/entity)是惰性的，只有在访问时才返回属性值，[触摸](https://docs.datomic.com/on-prem/clojure/index.html#datomic.api/touch)函数急切地检索所有实体属性。

# 例子：

```
(let [entity (d/entity db-val (ffirst (d/q '[:find ?e :in $ ?email
                                             :where [?e :user/email ?email]]
                                            db-val email))]
    ;;then just d/touch the entity returned by the d/entity fn
    (d/touch entity))
=> {:user/username "gretchen", :user/email "gretchen@user.com", :user/password "xxxxxx", :db/id 17592186046433} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-07T04:35:51.690

[**datomic.api/entity**](http://docs.datomic.com/clojure/index.html#datomic.api/entity)提供了这样的功能。

它只是有一个陷阱，即返回的地图有一个自定义表示，它隐藏了所有字段，但`:db/id`. 可以访问这些字段，但打印它们需要将地图合并到常规的 Clojure 地图中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T18:48:29.413

我没有测试过，但如果我没记错的话，你可以把一个变量作为属性名

```
(datomic.api/q '[:find ?key ?value
             :where
             [?e ?key ?value]]
           (db conn)) 
```

# ruby-on-rails - 无论什么车辆，Mac OSX 10.7.5 上的 Rails 1.9.3 都无法正常工作

> ID：14189661
> 
> 赞同：0
> 
> 时间：2013-01-07T03:55:23.587
> 
> 标签：ruby-on-rails, macos, terminal, osx-lion

我已经在以前运行 lion 的 mac 上安装了 rails，其内部结构与我试图安装它的计算机相同。无论我以何种方式尝试通过 RVM 在我的 comp 上获取 rails，它都会提示我需要安装 libksba，所以我通过 mac 端口进行了尝试，当我尝试使用 mac 端口时说如果我使用 port 命令，我应该删除 xcode .

我尝试的命令如下：

```
 curl -L https://get.rvm.io | bash -s stable
 port install libksba 
rvm install 1.9.3 --with-gcc=clang
rvm use 1.9.3 --default 
```

最后一个命令是我收到错误消息的地方。如果有人知道获得铁轨的可靠方法，我将永远非常满意！

编辑* ***我最终安装了自制软件并卸载了 macports 并通过它安装了 libksba，但是当我返回并尝试通过 rvm 安装 1.9.3 时，它给了我这个消息。

```
Ruby (and needed base gems) for your selection will be installed shortly.Before it happens, please read and execute the instructions below. Please use a separate terminal to execute any additional commands.
Notes for Mac OS X 10.7.5, Xcode 4.5.2.
For JRuby:  Install the JDK. See http://developer.apple.com/java/download/  # Current Java version "1.6.0_26" For IronRuby: Install Mono >= 2.6                                                                 For Ruby 1.9.3: Install libksba # If using Homebrew, 'brew install libksba' For Opal: Install Nodejs with NPM. See http://nodejs.org/download/ To use an RVM installed Ruby as default, instead of the system ruby:

rvm install 1.8.7 # installs patch 357: closest supported version
rvm system ; rvm gemset export system.gems ; rvm 1.8.7 ; rvm gemset import system.gems # migrate your gems
rvm alias create default 1.8.7 And reopen your terminal windows. Xcode and gcc:: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T04:49:25.233

[通读 Mac OS X](https://rvm.io/os/osx/)的RVM 文档，很明显您应该使用`gcc`而不是`clang`. `gcc`不幸的是，当前版本的 Xcode 没有安装Ruby 兼容版本。

我发现安装旧版本的最佳说明`gcc`在这篇文章[Xcode, Homebrew and Ruby](http://jfire.io/blog/2012/03/02/xcode-4-dot-3-homebrew-and-ruby/)中。

请注意，帖子中的说明说要使用`clang`，`1.9.3`但您应该使用`gcc`命令

```
ruby install 1.9.3 --with-gcc=gcc-4.2 
```

您可能还会看到来自 rvm 的注释，这`autoreconf`是必需的。在这种情况下，您可以安装`automake`并安装`homebrew`必要的文件。

# linux - 同一主机上的 tcp 可变性

> ID：14189669
> 
> 赞同：0
> 
> 时间：2013-01-07T03:56:14.117
> 
> 标签：linux, tcp

我有一个在同一主机上运行的 tcp 客户端和服务器。客户端发送消息，服务器确认它，客户端发送下一条消息。在任何时候，只有一个未确认的未确认消息。消息大小为 1KB。家用电脑运行 CentOs 6.3，办公服务器运行 RHEL 6.3

当我在家用计算机上运行上述客户端服务器时，我获得了非常一致的吞吐量，大约每秒 41k 条消息。办公服务器只有 1% 的 CPU 负载。但是，如果我在我的办公室服务器上运行相同的客户端/服务器，我的吞吐量会在 18k-50K 之间......吞吐量波动很大。任何人都可以提供建议

1.  同一主机上 tcp 波动的可能原因是什么？

2.  关于如何调试 tcp 性能的任何想法？

更新：- 我没有使用环回地址，而是分配给 eth1 的 IP。尽管 eth1 的 IP 不在 /etc/hosts 中并不重要，因为第一个请求会导致查找被缓存。

更新 1：- 在环回地址上运行，产生相同的波动输出。此外，当我查看时`cat /proc/interrupts`，我看到每个 NIC 有 5 个 rx 队列和 1 个 tx 队列。是 5rx 队列导致可变性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:01:19.613

以下是我能立即想到的一些可能性：

*   丢包，这会导致拥塞窗口缩小（在您的本地主机上不太可能）
*   应用程序瓶颈，这将导致接收器窗口缩小（比第一个不太可能）
*   出于某种原因适用于 localhost 的流量整形。试试看`tc qdisc`有没有什么东西在 lo 上。也看看iptables。
*   CPU 调度限制您的客户端或服务器。您是否有通过 cgroup 强加的 CPU 份额，可能会不时抢占您的进程？
*   间歇性开销，例如在测试期间开始记录并延迟数据包到达。或者一个 IDS 突然决定开始监视你的活动。
*   测量不准确，例如运行测试的时间太短
*   由于过多的队列颠簸导致实时锁降级。本文对此类案例提供了很好的见解：[https ://cs.uwaterloo.ca/~brecht/papers/getpaper.php?file=usenix-2004.pdf](https://cs.uwaterloo.ca/~brecht/papers/getpaper.php?file=usenix-2004.pdf)
*   您的客户端或服务器中的错误。例如，您应该检查 send() 是否返回 1024，如果没有，则采取适当的措施，而不是假设如果没有错误，一切都已通过。

我调试的方法是：

*   首先使用标准测量工具，例如 iperf (yum install iperf)。然后`iperf -s`在一个终端上，`iperf -c localhost`在另一个终端上。您是否获得稳定的结果，如果是，那么问题是您的客户端和服务器中的错误。
*   如果是 TCP，那么 iperf 会提供一些诊断，例如定期打印窗口大小。您还可以检查`lo`接口是否有丢包，以及 /proc/sys/ipv4 中的其他统计信息。

# javascript - 流星在模板中迭代列表

> ID：14189672
> 
> 赞同：7
> 
> 时间：2013-01-07T03:56:22.463
> 
> 标签：javascript, mongodb, meteor

我有这个：

```
Template.laps_t.laps = function () {
  return Practices.findOne({name: Session.get('practice')});
}; 
```

我该怎么做才能迭代这个并将值放在段落中？我是说：

```
{{#each laps.lapList}}
  <p>WHAT DO I HAVE TO PUT HERE TO PRINT THE VALUES OF THE LIST????</p>
{{/each}} 
```

我这样做对吗？我必须在该段中添加什么？

**编辑：**

谢谢贾斯汀凯斯，你的解决方案成功了[。](https://stackoverflow.com/users/964023/justin-case)

现在我还有一个问题。我不仅想打印`lap.lapList`，而且`lap.lapTimeList`（这是另一个类似的列表`[1,2,3,4,5,...]`）在这样的表中打印：

```
{{#each laps.lapList}}
  <tr>
    <td>iterate over and print the current value of lapList (solved using {{this}})</td>
    <td>iterate over and print the current value of lapTimeList</td>
  </tr>
{{/each}} 
```

`laps`是同时拥有`lapList`和的对象`lapTimeList`。所以，这个想法是打印圈数和相应的时间。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-07T05:14:31.600

If`laps.lapList`是`[1,2,3]`then 形式的数组：

```
{{#each laps.lapList}}
  <p>{{.}}</p>
{{/each}} 
```

`{{.}}`指当前对象/元素。如果它包含字典/哈希，例如`[{elapsedTime:32.0, location: 'Chicago'}]`，那么您可以使用键名：

```
{{#each laps.lapList}}
  <p>Lap took {{elapsedTime}}</p>
{{/each}} 
```

# objective-c - UITableViewCell 中的行顺序错误

> ID：14189676
> 
> 赞同：0
> 
> 时间：2013-01-07T03:57:02.760
> 
> 标签：objective-c, uitableview, ios6, xcode4.5

这是一个扩展 UITableViewController 的简单类，只有一个部分，总共 5 行。但是当启动应用程序时，只显示 2 条记录，当按下按钮时，它将显示更多带有文本字段的记录。

但是，按简单按钮并按详细按钮，我发现表中的顺序是错误的。

我不知道发生了什么，所以能帮我解决这个问题吗？非常感谢 ![在此处输入图像描述](../Images/c559f916a061da80fdff201b87c73e9b.png)

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    tempSimpleAry = [@[@"simple1",@"simple2"] mutableCopy];
    tempDetailAry = [@[@"detail A",@"detail B",@"detail C"] mutableCopy];
    dataAry = [[NSMutableArray alloc]init];
    [dataAry addObjectsFromArray:tempSimpleAry];

    isExpanded = NO;
}

-(void)dealloc{
    [super dealloc];
    tempSimpleAry = nil;
    tempDetailAry = nil;
    dataAry = nil;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

}

- (BOOL)textFieldShouldReturn:(UITextField *)aTextField {
    [aTextField resignFirstResponder];
    return YES;    
}

#pragma mark - Table view data source
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return dataAry.count+1;
}

static NSString *BasicCellIdentifier = @"BasicCell";
static NSString *MyCellIdentifier = @"MyCell";
static NSString *LastCellIdentifier = @"LastCell";

UITableViewCell *Lastcell = nil;

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int row = indexPath.row;
    if(indexPath.row<tempSimpleAry.count){

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:BasicCellIdentifier forIndexPath:indexPath];
        cell.textLabel.text =  [[NSString alloc]initWithFormat:@"%@ %d", [dataAry objectAtIndex:row], row];

        return cell;
    }else if(indexPath.row < dataAry.count){
        MyTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyCellIdentifier forIndexPath:indexPath];

        cell.myTitleLabel.text =  [[NSString alloc]initWithFormat:@"%@ %d", [dataAry objectAtIndex:row], row];
        cell.myTextField.placeholder =  [[NSString alloc]initWithFormat:@"%@ %d", [dataAry objectAtIndex:row], row];
        NSLog(@"MyTableViewCell - myTitlelabel = %@, mytextfield tag = %d, text = %@", cell.myTitleLabel.text, cell.myTextField.tag,cell.myTextField.text);
        cell.myTextField.tag =100+indexPath.row;

        return cell;
    }else{
        Lastcell = [tableView dequeueReusableCellWithIdentifier:@"LastCell" forIndexPath:indexPath];

            Lastcell.textLabel.text = @"Detail";

        return Lastcell;
    }

}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [currentEditingTextField resignFirstResponder];

    NSMutableArray *tmpAry = [[NSMutableArray alloc]init];

    if(indexPath.row == dataAry.count){
        if(isExpanded){
            int idx = dataAry.count-1;            
            for(int i=0; i<tempDetailAry.count;i++){
                NSIndexPath *idxPaths = [NSIndexPath indexPathForRow:idx-i inSection:0] ;
                [tmpAry addObject:idxPaths];
                [dataAry removeLastObject];
            }

            [tableView deleteRowsAtIndexPaths:tmpAry withRowAnimation:UITableViewRowAnimationFade];

        }else{            
            int idx = tempSimpleAry.count;

            for(int i=0; i<tempDetailAry.count;i++){
                NSIndexPath *idxPaths = [NSIndexPath indexPathForRow:idx+i inSection:0] ;
                [tmpAry addObject:idxPaths];
                [dataAry insertObject:[tempDetailAry objectAtIndex:i] atIndex:idx+i];

            }

            [tableView insertRowsAtIndexPaths:tmpAry withRowAnimation:UITableViewRowAnimationFade];
        }

        [self.tableView beginUpdates];
        [self.tableView endUpdates];

        isExpanded = !isExpanded;
        if(!isExpanded)
            Lastcell.textLabel.text = @"Detail";
        else
            Lastcell.textLabel.text = @"Simple";
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:50:00.770

这是因为单元格是使用 cellIdentifier 缓存的。

当您按**Simple**时，您按顺序删除单元格，“ ***detail C 4*** ”、“ ***detail B 3*** ”、“ ***detail A 2*** ”。所以**“detail C 4”单元首先被推入缓存队列**，然后是“detail B 3”单元，最后是“detail C 2”单元。

然后按**Detail**，tableView会一一**查询缓存队列。**因为“detail C 4”单元格在前面，所以首先弹出。所以你在textField中使用带有'aa'的单元格，然后设置cell.myTitleLabel.text和cell.myTextField.placeholder，但**你没有设置cell.myTextField.text，即'aa'**。最后，单元格变成了“detail A 2”，在 textField 中带有文本“aa”。

与其他两个单元格相同。

以上对你来说清楚吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:18:41.707

您似乎只是更改了文本字段的占位符而不是其文本，您还应该将文本字段的文本保存到一个数组中并将其设置在 cellForRowAtIndexPath 中！

# c# - if 循环和指标中的更多代码行数

> ID：14189677
> 
> 赞同：2
> 
> 时间：2013-01-07T03:57:11.310
> 
> 标签：c#

我正在编写一个检查 IF 条件的 C# 方法，如果条件为真，我将执行 10 行代码，否则我将只执行 2 行。

ReSharper 建议我应该反转 if 循环中的条件，以便 if 循环内的行数少于 else 循环中的行数。

样本 ：

```
if(condition)
{
//      StatementBlock of 10 lines
}
else
{
//        StatementBlock of 2 lines
} 
```

请让我知道这背后的指标/性能，无论哪种方式，我们最终都会有 2 个代码块。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T04:07:53.070

切换 2 个块不会获得任何性能提升，但是我认为如果你这样做，你的代码会稍微更具可读性

```
if a > b
    do 1
    .
    .
    .
    .
    .
    .
    .
    .
    .
    .
    .
else 
    do 1
    do 2 
```

比读起来难一点

```
if b > a
   do 1
   do 2
else
   very
   long
   code
   that 
   might 
   require 
   scrolling
   to 
   read 
```

# string - 在 Visual C++ 6.0 中使用 *_s 编译代码

> ID：14189678
> 
> 赞同：0
> 
> 时间：2013-01-07T03:57:42.013
> 
> 标签：string, visual-c++, stdio

我正在尝试在 Visual C++ 6.0 中编译一些旧代码。缺少 DSW 文件，因此我将所有代码添加到新工作区中。

我有`a.cpp`如下

```
#include "vld.h"
#include "afx.h"
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iostream>
#include "b.h"

...

void function_1(char* string1)
{
   char buf[2000];
   strcpy_s(&buf[0], 2000, string1);
   strcat_s(&buf[0], 2000, "_append");
   ...
} 
```

还使用了其他功能，例如`fopen_s, strncpy_s, strncat_s`in `a.cpp`。

并且`b.h`是

```
#include <stdio.h>
#include <string.h>

char function_2(unsigned char * string2, int abc, int def)
{
   char buf2[200];
   sprintf_s(buf2, 200, "abcdef");
   strcat_s(buf2, 200, "ghijkl");
} 
```

尽管已经有了`stdio.h`and `string.h`，我仍然得到错误

```
'sprintf_s': undeclared identifier
'strcat_s': undeclared identifier
'strcpy_s': undeclared identifier
'fopen_s': undeclared identifier
'strncpy_s': undeclared identifier
'strncat_s': undeclared identifier 
```

对于`a.cpp`和`b.h`。

有没有我遗漏的设置？为什么我会收到这些错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:13:16.400

Visual Studio 2005 增加了 _s 版本功能。因此您需要使用更现代的 Visual Studio 版本。

# php - 为什么分配给局部变量会覆盖 $_SESSION 的一部分？

> ID：14189683
> 
> 赞同：0
> 
> 时间：2013-01-07T03:58:11.263
> 
> 标签：php, session, variables

> **可能重复：**
> [PHP 会话变量与局部变量互换？](https://stackoverflow.com/questions/3779971/php-session-variables-interchanged-with-local-variables)

好吧，我刚刚在 PHP 中发现了一个“错误”，它只是弄乱了 $_SESSION 和公共变量！

```
session_start();

$_SESSION["test"] = 123;
$test = 456;

echo $_SESSION["test"]; 
```

由于某种原因，此代码段的输出为 456！没关系还是只是一个 php 错误？

# jboss - 将 Atlassian 的 Confluence 部署到 openshift 上？

> ID：14189689
> 
> 赞同：3
> 
> 时间：2013-01-07T03:59:11.670
> 
> 标签：jboss, openshift, confluence

有谁知道如何将 Confluence 部署到 OpenShift 上？我尝试按照[此处](https://confluence.atlassian.com/display/CONF31/Installing+Confluence+EAR-WAR+on+JBoss#InstallingConfluenceEAR-WARonJBoss-Step1.ConfiguringtheConfluenceWarFile)的说明进行操作，但仍停留在配置 confluence-init.properties 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T04:23:51.460

您想将主目录的目录设置为以下环境变量 - OPENSHIFT_DATA_DIR。该目录将在 git 推送之间以及应用程序的关闭和启动之间持续存在。

以下是有关如何填写 JNDI 设置的说明 [https://openshift.redhat.com/community/blogs/jndi-tomcat-configuration-howto](https://openshift.redhat.com/community/blogs/jndi-tomcat-configuration-howto)

# c++ - 设计VS2012项目交互：我应该跨不同项目使用接口还是复合类？

> ID：14189690
> 
> 赞同：1
> 
> 时间：2013-01-07T03:59:13.357
> 
> 标签：c++, visual-studio, design-patterns

我有以下设计问题。例如，我有 3 个视觉工作室项目。它们被称为“TheGame”、“OpenGLDevice”和“DirectXDevice”。“OpenGLDevice”和“DirectXDevice”也是项目内的一个类的名称。您可能已经猜到，TheGame 处理应用程序的逻辑并使用其他两个项目之一在屏幕上绘制内容。我的问题是关于 TheGame 应该如何与这两个项目互动。这是我能想到的。

1.  在 TheGame 中创建一个“DeviceContainer”基类，以及一个“OpenGLDeviceContainer”和“DirectXDeviceContainer”派生的私有内部类。每个派生类都包含一个 OpenGLDevice 或 DirectXDevice 类型的私有成员字段。DeviceContainer 基本上可以用作包装器。

2.  在第四个项目中创建一个“IGraphicsDevice”接口，并让所有三个项目都引用它。使 OpenGLDevice 和 DirectXDevice 都实现该接口。

我喜欢方法 1，因为我不需要创建第四个项目，而且 OpenGLDevice 和 DirectXDevice 都没有依赖关系。

首先，这两种方法中的哪一种是最好的方法，是否有第三种更好的解决方案。

其次，如果我确实选择使用接口方法，有没有比在第四个项目中声明接口更好的方法？

# qt - 如何在 QAbstractTableModel 中设置数据

> ID：14189693
> 
> 赞同：16
> 
> 时间：2013-01-07T03:59:18.860
> 
> 标签：qt, qtableview, qabstracttablemodel

我需要用 Qt 实现一个表。

我相信我会起诉一个 QAbstractTableModel，一个 QTableView 使用这个模型。

我知道我必须编辑模型的 rowCount()、columnCount() 和 data() 函数。

但是，我不明白如何在模型中准确设置数据，以便 data() 函数可以检索它..

是否为此目的提供了 setData() 函数？我已经看到它将 EditRole 作为其参数，这是我不想要的，因为我不希望我的表是可编辑的。

那么，如何使用 data() 函数在模型内部“设置”数据，或者让模型获取数据？

另外，data() 函数是如何调用的，即，谁调用它，它需要在哪里调用？

请帮我解决一下这个。

谢谢。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-07T05:08:14.597

实际数据如何保存在内存中、如何从数据存储中生成或查询完全取决于您。如果是静态数据，可以使用[Qt 容器类](http://qt-project.org/doc/qt-4.8/containers.html)或自定义数据结构。

您只需要重新实现`setData()`可编辑模型的方法。

您需要在不可编辑的`QAbstractTableModel`子类中实现 4 种方法：

*   `int rowCount()`
*   `int columnCount()`
*   `QVariant headerData(int section, Qt::Orientation orientation, int role = Qt::DisplayRole )`
*   `QVariant data(const QModelIndex & index, int role = Qt::DisplayRole)`

这些方法是从视图中调用的，通常是一个`QTableView`实例。前两个方法应该返回表格的尺寸。例如，如果`rowCount()`返回`10`和`columnCount()`返回`4`，视图将调用该`data()`方法 40 次（每个单元格一次），以询问模型内部数据结构中的实际数据。

例如，假设您`retrieveDataFromMarsCuriosity()`在模型中实现了自定义插槽。此插槽填充数据结构并连接到`QPushButton`实例，因此您可以通过单击按钮获取新数据。现在，您需要让视图知道数据何时被更改，以便它可以正确更新。这就是为什么您需要发出`beginRemoveRows()`, `endRemoveRows()`, `beginInsertRows()`,`endInsertRows()`及其对应列的原因。

[Qt 文档](http://qt-project.org/doc/qt-4.8/model-view-programming.html#model-subclassing-reference)包含您需要了解的所有信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-07-02T15:07:50.613

你不需要使用`setData(...)`. 相反，您需要以这样的方式进行子类化，`QAbstractTableModel`即它的方法`rowCount()`、、和可能返回您希望显示的数据。下面是一个基于 PyQt5 的示例：`columnCount()``data(index)``headerData(section, horizontalOrVertical)`

```
from PyQt5.QtWidgets import *
from PyQt5.QtCore import *

headers = ["Scientist name", "Birthdate", "Contribution"]
rows =    [("Newton", "1643-01-04", "Classical mechanics"),
           ("Einstein", "1879-03-14", "Relativity"),
           ("Darwin", "1809-02-12", "Evolution")]

class TableModel(QAbstractTableModel):
    def rowCount(self, parent):
        # How many rows are there?
        return len(rows)
    def columnCount(self, parent):
        # How many columns?
        return len(headers)
    def data(self, index, role):
        if role != Qt.DisplayRole:
            return QVariant()
        # What's the value of the cell at the given index?
        return rows[index.row()][index.column()]
    def headerData(self, section, orientation, role):
        if role != Qt.DisplayRole or orientation != Qt.Horizontal:
            return QVariant()
        # What's the header for the given column?
        return headers[section]

app = QApplication([])
model = TableModel()
view = QTableView()
view.setModel(model)
view.show()
app.exec_() 
```

它取自这个[GitHub 存储库](https://github.com/pyqt/examples/tree/_/src/14%20QAbstractTableModel%20example)并显示下表：

[![QAbstractTableModel 示例](../Images/da88e712cc9ccbca1f7635e4105db21a.png)](https://github.com/pyqt/examples/raw/_/src/screenshots/qabstracttablemodel-example.png)

# python - 重置列的 MultiIndex 级别

> ID：14189695
> 
> 赞同：45
> 
> 时间：2013-01-07T03:59:30.153
> 
> 标签：python, pandas, dataframe

`basic_amt`除了转置两次之外，是否有更短的方法来删除列 MultiIndex 级别（在我的情况下是）？

```
In [704]: test
Out[704]: 
           basic_amt               
Faculty          NSW  QLD  VIC  All
All                1    1    2    4
Full Time          0    1    0    1
Part Time          1    0    2    3

In [705]: test.reset_index(level=0, drop=True)
Out[705]: 
         basic_amt               
Faculty        NSW  QLD  VIC  All
0                1    1    2    4
1                0    1    0    1
2                1    0    2    3

In [711]: test.transpose().reset_index(level=0, drop=True).transpose()
Out[711]: 
Faculty    NSW  QLD  VIC  All
All          1    1    2    4
Full Time    0    1    0    1
Part Time    1    0    2    3 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2016-06-10T13:05:44.890

另一种解决方案是使用[`MultiIndex.droplevel`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.MultiIndex.droplevel.html)with [`rename_axis`](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#changes-to-rename)(new in `pandas` `0.18.0`)：

```
import pandas as pd

cols = pd.MultiIndex.from_arrays([['basic_amt']*4,
                                     ['NSW','QLD','VIC','All']], 
                                     names = [None, 'Faculty'])
idx = pd.Index(['All', 'Full Time', 'Part Time'])

df = pd.DataFrame([(1,1,2,4),
                   (0,1,0,1),
                   (1,0,2,3)], index = idx, columns=cols)

print (df)
          basic_amt            
Faculty         NSW QLD VIC All
All               1   1   2   4
Full Time         0   1   0   1
Part Time         1   0   2   3

df.columns = df.columns.droplevel(0)
#pandas 0.18.0 and higher
df = df.rename_axis(None, axis=1)
#pandas bellow 0.18.0
#df.columns.name = None

print (df)
           NSW  QLD  VIC  All
All          1    1    2    4
Full Time    0    1    0    1
Part Time    1    0    2    3

print (df.columns)
Index(['NSW', 'QLD', 'VIC', 'All'], dtype='object') 
```

如果您需要两个列名，请使用`list`理解：

```
df.columns = ['_'.join(col) for col in df.columns]
print (df)
           basic_amt_NSW  basic_amt_QLD  basic_amt_VIC  basic_amt_All
All                    1              1              2              4
Full Time              0              1              0              1
Part Time              1              0              2              3

print (df.columns)
Index(['basic_amt_NSW', 'basic_amt_QLD', 'basic_amt_VIC', 'basic_amt_All'], dtype='object') 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-06-10T08:48:35.570

# 将级别压缩在一起

这是另一种解决方案，它将关卡压缩在一起并用下划线连接它们。

源自上面的答案，这就是我找到这个答案时想做的事情。想我会分享，即使它没有回答上面的确切问题。

```
["_".join(pair) for pair in df.columns] 
```

给

```
['basic_amt_NSW', 'basic_amt_QLD', 'basic_amt_VIC', 'basic_amt_All'] 
```

只需将其设置为列

```
df.columns = ["_".join(pair) for pair in df.columns]

           basic_amt_NSW  basic_amt_QLD  basic_amt_VIC  basic_amt_All
Faculty                                                              
All                    1              1              2              4
Full Time              0              1              0              1
Part Time              1              0              2              3 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-01-07T04:32:47.640

如何简单地重新分配`df.columns`：

```
levels = df.columns.levels
labels = df.columns.labels
df.columns = levels[1][labels[1]] 
```

例如：

```
import pandas as pd

columns = pd.MultiIndex.from_arrays([['basic_amt']*4,
                                     ['NSW','QLD','VIC','All']])
index = pd.Index(['All', 'Full Time', 'Part Time'], name = 'Faculty')
df = pd.DataFrame([(1,1,2,4),
                   (0,01,0,1),
                   (1,0,2,3)])
df.columns = columns
df.index = index 
```

前：

```
print(df)

           basic_amt               
                 NSW  QLD  VIC  All
Faculty                            
All                1    1    2    4
Full Time          0    1    0    1
Part Time          1    0    2    3 
```

后：

```
levels = df.columns.levels
labels = df.columns.labels
df.columns = levels[1][labels[1]]
print(df)

           NSW  QLD  VIC  All
Faculty                      
All          1    1    2    4
Full Time    0    1    0    1
Part Time    1    0    2    3 
```

# ios - 优化#define方法

> ID：14189700
> 
> 赞同：0
> 
> 时间：2013-01-07T04:00:06.193
> 
> 标签：ios, objective-c, optimization, c-preprocessor

我定义了一个这样的动画方法：

```
#define Animation_05(f) [UIView beginAnimations:@"" context:nil];[UIView setAnimationDuration:0.5f];(f);[UIView commitAnimations]; 
```

并像这样使用：

```
Anmation_05(a.frame = CGRectMake(0, 90, 10, 150));
Anmation_05(b.frame = CGRectMake(0, 88, 15, 150));
Anmation_05(c.frame = CGRectMake(0, 44, 15, 150));
Anmation_05(d.frame = CGRectMake(0, 20, 15, 150)); 
```

我想知道，有没有办法优化定义？也许像只执行一次 Anmation_05 之类的代码。

# image - Cocos2d-x 在 selected() 方法中运行 activate() 并在 ccTouchEnded 中禁用？

> ID：14189701
> 
> 赞同：0
> 
> 时间：2013-01-07T04:00:27.627
> 
> 标签：image, subclass, cocos2d-x, selected, ccmenuitem

我正在创建一个 CCMenuItemImage 的子类，它在触摸开始而不是结束时执行它的方法。我尝试在 selected() 方法中运行 activate() ，该方法有效，但在触摸结束时再次按预期执行。我该怎么办？请具体。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T19:10:41.213

```
MenuItemImage->setEnable(true);//active
MenuItemImage->setEnable(false);//disactive 
```

# wso2 - 关于 ws-event 演示的消息代理

> ID：14189708
> 
> 赞同：0
> 
> 时间：2013-01-07T04:01:57.493
> 
> 标签：wso2, messagebroker

关于 ws-event 演示 q1 的消息代理： [http ://wso2.org/library/knowledge-base/2012/06/publishing-messages-message-broker-using-event-mediator](http://wso2.org/library/knowledge-base/2012/06/publishing-messages-message-broker-using-event-mediator)

客户端如何调用代理服务

q2：Event Sink URL 目标服务演示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T07:05:12.513

Q1：可以使用soap UI调用代理服务。为此，您可以从 ESB 中的服务列表页面获取端点 url。我认为[这](http://www.soapui.org/Getting-Started/your-first-soapui-project.html)会对您有所帮助。

Q2：这个问题不清楚。

# c++ - 为什么不能取nullptr的地址？

> ID：14189709
> 
> 赞同：43
> 
> 时间：2013-01-07T04:02:12.157
> 
> 标签：c++, c++11, std, nullptr

在 C++11 标准中，我不明白为什么`nullptr`不允许获取地址而允许获取自己实例**的地址的原因。**`std::nullptr_t`除了`nullptr`保留关键字这一事实之外，此决定是否有任何指定的理由？

仅仅因为它使我感到有趣，我试图用以下函数绕过这个限制：

```
decltype(nullptr)* func(const decltype(nullptr) &nref) noexcept
{
    return const_cast<decltype(nullptr)*>(reinterpret_cast<const decltype(nullptr)*>(&nref));
} 
```

我不得不`reinterpret_cast`在参数上使用，因为没有它我会得到歇斯底里的错误：

```
error: invalid conversion from 'std::nullptr_t*' to 'std::nullptr_t*' [-fpermissive] 
```

**当我通过直接传递nullptr**来调用这个函数时，我每次都会得到一个不同的地址。是否`nullptr`为比较等即时动态分配地址？或者（可能更有可能）编译器是否强制底层对象的临时副本？

当然，这些都不是重要信息，我只是觉得有趣的是为什么要实施这个特定的限制（以及随后为什么我会看到我的行为）。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-07T04:03:29.113

这与无法获取地址相同，`5`即使您可以`int`在给它 value 之后获取地址`5`。a 没有其他价值并不重要`nullptr_t`。

值没有地址；对象做。

当您将此类值传递给`const &`参数时，或者将值绑定到 const 引用（例如通过`static_cast< T const & >( … )`或声明命名引用）时，会生成一个临时对象`T const & foo = …;`。您看到的地址是临时地址。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-07T04:18:33.713

如果您追求标准答案，第 18.2/9 节将您的观察结果直言不讳：

> 虽然不能取 nullptr 的地址，但可以取另一个 nullptr_t 对象的地址，它是一个左值。

或者，第 2.14.7 节这样说`nullptr`：

> 指针文字是关键字 nullptr。它是 std::nullptr_t 类型的纯右值。

那么什么是prvalue？§ 3.10/1 回答：

> prvalue（“纯”右值）是不是 xvalue 的右值。[ 示例：调用返回类型不是引用的函数的结果是纯右值。诸如 12、7.3e5 或 true 之类的文字的值也是纯右值。—结束示例]

希望在示例中尝试获取任何这些东西的地址对于为什么不能获取`nullptr`. 这是这些例子的一部分！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-07T04:09:45.443

`nullptr`是一个（文字）常量，并且它们没有内存地址，就像代码中的任何其他文字常量一样。它类似于`0`，但属于特殊`std::nullptr_t`类型，而不是`void*`避免重载问题（指针与整数）。

但是如果你用 value 定义你自己的变量`nullptr`，它有一个内存地址，所以你可以取它的地址。

这同样适用于任何其他类型的任何其他文字常量（在 C++ 中属于*prvalue*类别），因为文字常量不*存储*在您的程序中（仅作为它们出现的表达式的一部分），这就是它不存储的原因谈论地址是有意义的。但是，常量*变量*确实有地址，以指出区别。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-07T09:43:20.257

true 和 false 都是关键字，作为文字它们有一个类型（ bool ）。nullptr 是 std::nullptr_t 类型的指针文字，它是一个纯右值（你不能使用 & 获取它的地址），nullptr 也是纯右值，所以你不能获取它的地址，文字常量不存储在你的程序中。

**没有地址是没有意义的。**

# c# - 在 silverlight MVVM 中验证模型

> ID：14189710
> 
> 赞同：0
> 
> 时间：2013-01-07T04:02:34.457
> 
> 标签：c#, validation, silverlight-4.0, inotifydataerrorinfo

如何在silverlight中验证模型？我试图实现的代码示例如下所示..

```
 <Grid x:Name="AddnewGrid" Margin="2" DataContext="{Binding SaveUpdateEmp, Mode=TwoWay">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="125"></ColumnDefinition>
            <ColumnDefinition Width="10"></ColumnDefinition>
            <ColumnDefinition Width="*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <TextBlock x:Name="EmployeeCode" Text="EmployeeCode" FontSize="14" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
        <TextBlock x:Name="EmployeeCodeSprtr" Text=":" FontSize="14" Grid.Row="0" Grid.Column="1" VerticalAlignment="Center"></TextBlock>
        <TextBox x:Name="txtEmployeeCode" Text="{Binding EmployeeCode, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Row="0" Grid.Column="2" VerticalAlignment="Center" Width="150" HorizontalAlignment="Left"></TextBox>

        <TextBlock x:Name="EmployeeName" Text="Employee Name" FontSize="14" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
        <TextBlock x:Name="EmployeeNameSprtr" Text=":" FontSize="14" Grid.Row="1" Grid.Column="1" VerticalAlignment="Center"></TextBlock>
        <TextBox x:Name="txtEmployeeName" Text="{Binding EmployeeName, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" Width="150" HorizontalAlignment="Left"></TextBox>

        <TextBlock x:Name="EmployeePW" Text="PassWord" FontSize="14" Grid.Row="2" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
        <TextBlock x:Name="EmployeePWSprtr" Text=":" FontSize="14" Grid.Row="2" Grid.Column="1" VerticalAlignment="Center"></TextBlock>
        <TextBox x:Name="txtEmployeePW" Text="{Binding EmployeePW, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Row="2" Grid.Column="2" VerticalAlignment="Center" Width="150" HorizontalAlignment="Left"></TextBox>

        <TextBlock x:Name="EmployeeDesg" Text="Designation" FontSize="14" Grid.Row="3" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
        <TextBlock x:Name="EmployeeDesgSprtr" Text=":" FontSize="14" Grid.Row="3" Grid.Column="1" VerticalAlignment="Center"></TextBlock>
        <TextBox x:Name="txtEmployeeDesg" Grid.Row="3" Text="{Binding EmployeeDesg, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Column="2" VerticalAlignment="Center" Width="150" HorizontalAlignment="Left"></TextBox>

        <TextBlock x:Name="DepartmentId" Text="DepartmentID" FontSize="14" Grid.Row="4" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
        <TextBlock x:Name="DepartmentIdSprtr" Text=":" FontSize="14" Grid.Row="4" Grid.Column="1" VerticalAlignment="Center"></TextBlock>
        <TextBox x:Name="txtDepartmentId" Grid.Row="4" Text="{Binding DepartmentId, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Column="2" VerticalAlignment="Center" Width="150" HorizontalAlignment="Left"></TextBox>

        <TextBlock x:Name="DepartmentName" Text="Department" FontSize="14" Grid.Row="5" Grid.Column="0" VerticalAlignment="Center"></TextBlock>
        <TextBlock x:Name="DepartmentNameSprtr" Text=":" FontSize="14" Grid.Row="5" Grid.Column="1" VerticalAlignment="Center"></TextBlock>
        <TextBox x:Name="txtDepartmentName" Grid.Row="5" Text="{Binding DepartmentName, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Column="2" VerticalAlignment="Center" Width="150" HorizontalAlignment="Left"></TextBox>

        <Button x:Name="CancelButton" Content="Cancel" Click="CancelButton_Click" Grid.Row="6" Grid.Column="2"  Width="75" Height="23" HorizontalAlignment="Left" />
        <Button x:Name="OKButton" Content="Save" Click="OKButton_Click" Grid.Row="6" Grid.Column="0" Width="75" Height="23" HorizontalAlignment="Left" />
    </Grid> 
```

这里的 SaveUpdateEmp 是模型中属性类的对象。如何验证这些字段。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T15:22:04.790

您需要`INotifyDataErrorInfo`在模型上实现并确保您拥有`ValidatesOnDataErrors=True`需要验证的控件/属性。我可以给你一个代码示例，但我认为这比我做得更好 - [http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo(v=vs.95).aspx) . 如果您有任何问题，我很乐意回答。

# ruby-on-rails-3 - Rails：嵌套资源和路由错误

> ID：14189711
> 
> 赞同：0
> 
> 时间：2013-01-07T04:02:34.427
> 
> 标签：ruby-on-rails-3, nested-attributes

我有一个`Template`模型，一个`Doc`模型。它们是嵌套资源，`Templates`是父资源，因此：

```
resources :templates do
  get "/documents/lock/:id" => "docs#lock", :as => :lock_doc
  get "/documents/unlock/:id" => "docs#unlock", :as => :unlock_doc
  get "/documents/pdf/:id" => "docs#pdf", :as => :pdf_doc
  resources :docs, :path => :documents
end 
```

我认为那部分一切正常。当我尝试提交用于创建`doc`记录的表单时，但出现路由错误，因此：

```
ActionController::RoutingError (No route matches {:action=>"edit", :controller=>"docs", :template_id=>nil, :id=>#<Doc id: 2, user_id: "admin", cover: "1209hpnl", message: "The world economic outlook is improving, albeit slo...", created_at: "2013-01-07 03:54:05", updated_at: "2013-01-07 03:54:05", issue_code: "1209hpnl", title: "January 2013", locked: nil, retired: "active", template: nil>}):
app/controllers/docs_controller.rb:134:in `block (2 levels) in create'
app/controllers/docs_controller.rb:132:in `create' 
```

这些行对应于`create`方法：

```
def create
  @doc = Doc.new(params[:doc])
  respond_to do |format|
    if @doc.save
      format.html { redirect_to share_url(@doc), notice: "Saved. You may from here #{view_context.link_to('edit', edit_template_doc_url(@doc))} it further, #{view_context.link_to('finalise', template_lock_doc_url(@doc))} it, or return #{view_context.link_to('home', root_url)}.".html_safe }
      format.json { render json: @doc, status: :created, location: @doc }
    else
      format.html { render action: "new" }
      format.json { render json: @doc.errors, status: :unprocessable_entity }
    end
  end
end 
```

我认为问题出在此处，但我一生都无法弄清楚。

为任何帮助干杯！

编辑：与`rake routes`

```
 template_lock_doc GET    /templates/:template_id/documents/lock/:id(.:format)   docs#lock
  template_unlock_doc GET    /templates/:template_id/documents/unlock/:id(.:format) docs#unlock
     template_pdf_doc GET    /templates/:template_id/documents/pdf/:id(.:format)    docs#pdf
        template_docs GET    /templates/:template_id/documents(.:format)            docs#index
                      POST   /templates/:template_id/documents(.:format)            docs#create
     new_template_doc GET    /templates/:template_id/documents/new(.:format)        docs#new
    edit_template_doc GET    /templates/:template_id/documents/:id/edit(.:format)   docs#edit
         template_doc GET    /templates/:template_id/documents/:id(.:format)        docs#show
                      PUT    /templates/:template_id/documents/:id(.:format)        docs#update
                      DELETE /templates/:template_id/documents/:id(.:format)        docs#destroy
            templates GET    /templates(.:format)                                   templates#index
                      POST   /templates(.:format)                                   templates#create
         new_template GET    /templates/new(.:format)                               templates#new
        edit_template GET    /templates/:id/edit(.:format)                          templates#edit
             template GET    /templates/:id(.:format)                               templates#show
                      PUT    /templates/:id(.:format)                               templates#update
                      DELETE /templates/:id(.:format)                               templates#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:44:11.510

问题出在您`edit_template_doc_url(@doc)`对通知字符串内部的调用中。您还需要提供模板，如下所示：

```
edit_template_doc_url(params[:template_id], @doc) 
```

# modulus - 如何计算 (A*B*C)%10000007 其中 A,B,C 最大为 10^18

> ID：14189713
> 
> 赞同：-2
> 
> 时间：2013-01-07T04:02:49.360
> 
> 标签：modulus

如何计算 (A*B*C)%10000007 其中 A,B,C 最大为 10^18

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:11:37.080

令 I = 10000007，所以

*   A = n1 * I + X1
*   B = n2 * I + X2
*   C = n3 * I + X3

A * B => (n1 * I + X1) (n2 * I + X2) => n1 * n2 * I^2 + n1 * X2 * I + n2 * X1 * I + X1 * X2 只有 X1 * X2 可以t 除以我

因此，A * B % I === X1 * X2 % I === (A % I) * (B % I) % I

因此 (A * B * C) % I === [(A % I) * (B % I) % I] * (C % I) % I

# wordpress - Wordpress 和 wp.me 重定向

> ID：14189714
> 
> 赞同：0
> 
> 时间：2013-01-07T04:02:51.273
> 
> 标签：wordpress, redirect, curl, http-redirect

刚开始玩 cURL。我注意到使用 --head 命令的一个奇怪的小链接。[我的服务器上托管的所有 Wordpress 网站在http://wp.me](http://wp.me)上都有自己的重定向链接例如 curl --head 命令返回“Link ; rel=shortlink

即`wp.me/2RI03`从 Wordpress 重定向到我的网站，`wp.me/1FaB8`重定向到 TechCrunch，这让我相信他们会为网络上的每个 WP 安装执行此操作。只是出于好奇，为什么 Wordpress 会这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:38:31.913

看起来它只是 wordpress.com 网站或 jetpack：

[http://en.blog.wordpress.com/2009/08/14/shorten/](http://en.blog.wordpress.com/2009/08/14/shorten/) http://jetpack.me/support/wp-me-shortlinks/

# java - 为什么在我的正则表达式中从错误的区域捕获组？（Java 7）

> ID：14189717
> 
> 赞同：3
> 
> 时间：2013-01-07T04:03:17.087
> 
> 标签：java, regex

正在从错误的区域捕获数据。它从 eth1 而不是 eth0 捕获 ip 地址字段和子网。我不明白为什么会这样。我也尝试过`matcher.find(0)`，但得到了相同的结果。

```
String[] dataNames = new String[]{"eth0Ip", "eth0Subnet"}
dataExtractionPattern = Pattern.compile("eth0 .*inet (?<eth0Ip>\\S+)  mask (?<eth0Subnet>\\S+)",Pattern.DOTALL);

Matcher matcher = dataExtractionPattern.matcher(receivedDataString);
if (matcher.find()) {
    for (String key : dataNames) {
        String dataValue;
        dataValue = matcher.group(key);
        extractedData.put(key, dataValue);
    }
    hasData = true;
} 
```

输入字符串为：

```
lo0 链接类型：本地环回队列：无
        inet 127.0.0.1 掩码 255.255.255.255
        运行环回
        MTU:1500 公制:1 VR:0
        RX 数据包：4 mcast：0 错误：0 丢弃：1
        TX 数据包：4 mcast：0 错误：0
        碰撞：0 不支持的原型：0
        RX 字节：172 TX 字节：172

eth0 链接类型：以太网 HWaddr 00:25:f2:5e:9c:34 队列：无
        inet 10.1.2.2 掩码 10.1.2.1 广播 255.255.255.254
        运行广播
        MTU:1000 公制:1 VR:0
        RX 数据包：0 mcast：0 错误：0 丢弃：0
        TX 数据包：0 mcast：0 错误：0
        碰撞：0 不支持的原型：0
        RX 字节：0 TX 字节：0

eth1 链接类型：以太网 HWaddr 00:25:f2:5e:9c:33 队列：无
        inet 192.168.200.51 掩码 255.255.255.0 广播 192.168.200.255
        正在运行的广播
        MTU:1500 公制:1 VR:0
        RX 数据包：0 mcast：0 错误：0 丢弃：0
        TX 数据包：0 mcast：0 错误：0
        碰撞：0 不支持的原型：0
        RX 字节：0 TX 字节：0

```

对于 eth0 ip，它错误地捕获 192.168.200.51 和掩码 255.255.255.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T07:19:56.157

正如 nhahtdh 所提到的，这`.*`部分是贪婪的，并且会尽可能多地匹配，这意味着直到你的模式的其余部分跟随的最后一个字符。

您可以通过在它们后面添加 a 来将量词的匹配行为更改为“不贪婪/懒惰” `?`：

```
dataExtractionPattern = Pattern.compile("eth0 .*?inet (?<eth0Ip>\\S+)  mask (?<eth0Subnet>\\S+)",Pattern.DOTALL); 
```

这将尽可能少地匹配，以便您找到 的第一次出现`inet (?<eth0Ip>\\S+) mask (?<eth0Subnet>\\S+)`。

# javascript - 链接标记显示块未拉伸全宽

> ID：14189723
> 
> 赞同：0
> 
> 时间：2013-01-07T04:03:46.483
> 
> 标签：javascript, jquery, html, css, block

如果我错了，请纠正我，但显示：阻止；将任何具有该 CSS 声明的元素转换为块元素，对吗？这意味着指定元素与 display: block; 声明将跨越它的整个可用宽度，对吗？

我问这个是因为我目前有一个导航，其中包含一个包含嵌套无序列表项的下拉菜单，这些项应该继承父列表项的宽度。

*链接已删除*

请注意，将鼠标悬停在 Teams 上后，您会看到 18U 和 17U 链接列表项未拉伸其适当的宽度。我只能假设同样的问题适用于所有列表链接项。

但是：一旦你去这里：*链接被删除*并注意到有两个以上的链接，问题就不再是问题了。它占据了整个宽度。

此外，一旦页面加载完毕并且您第一次将鼠标悬停在其中一个列表项上，导航菜单就会向右踢一点。

该问题在 Google Chrome 中仍然存在。

有人可以帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:12:50.573

你有你的 li 的宽度被设置为

```
width: 100% 
```

仅当元素父级（ul）设置了宽度时才有效。放...

```
width: 100% 
```

...也在 ul 上，它工作正常。

# file - 在类似文本编辑器的程序中编写保存功能的最佳方法是什么？

> ID：14189729
> 
> 赞同：0
> 
> 时间：2013-01-07T04:04:30.493
> 
> 标签：file, io

我正在为我正在做的一个类似文本编辑器的小程序考虑这个问题，我能想到的一个选项（可能是最糟糕的一个）是，每当用户保存时，程序都会用新内容。其他选项（例如跟踪用户对文本所做的操作）似乎太麻烦了。编写此类功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:08:01.010

如果我们考虑可扩展性；唯一的选择是跟踪用户所做的所有更改；并且仅在保存期间保存这些更改。这也将帮助您在编辑器上实现撤消、重做功能。

跟踪所有用户更改可以在任何程度上使事情更加优化但也更加复杂，并且也增加了冲突的可能性；我认为最简单的方法是只跟踪更改的行，而不是在单词级别更改。

毫无疑问，保存整个事情是让事情进展的最快方法。

# java - 在 java 水晶报表上设置纸张选项

> ID：14189730
> 
> 赞同：0
> 
> 时间：2013-01-07T04:04:31.673
> 
> 标签：java, crystal-reports, crystal-reports-xi

每当我预览有关我的 java 程序的报告时，我都会遇到问题。当我打开我的报告并将纸张大小设置为合法然后保存时，报告可以预览为合法。但是当我在我的 java 程序上打开它时，它会在一封信而不是法律文件上预览。（看起来我的程序在水晶报表设计器页面设置中自动将其设置为“无打印机（针对屏幕显示进行了优化）”）。我正在使用 Crystal Reports XI。

# asp.net - 如何在 ASP.net gridview 中添加空标题

> ID：14189735
> 
> 赞同：0
> 
> 时间：2013-01-07T04:05:00.143
> 
> 标签：asp.net, gridview, caption

每当我在 ASP.net 网格视图中将标题属性设置为空白时，它都不会显示在 html 中。如何在 gridview 中添加空标题，以便在 html 中显示为`<caption/>`而不是根本不显示。

```
 <asp:GridView ID="gvClients" runat="server" Caption=""> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:33:27.313

您能否更详细地说一下，如果网格或表格标题没有任何文本，为什么需要标记？

如果您因特定原因需要它，那么您可以在代码中添加如下空格。

```
<asp:GridView ID="gvClients" runat="server" Caption=" "> 
```

# php - MySQL 查询返回所有事件及其照片

> ID：14189737
> 
> 赞同：0
> 
> 时间：2013-01-07T04:05:52.643
> 
> 标签：php, mysql

我有两张表，一张存储用户的事件，另一张存储每个事件的照片。布局如下：

```
event (event_id, 
       event_title, 
       event_description, 
       event_date, 
       event_time, 
       event_city, 
       event_state, 
       event_user)

photo (photo_id, 
       photo_photo, 
       photo_thumbnail, 
       photo_caption, 
       photo_event) 
```

在我的活动页面上，我想在网格中显示我的所有活动。现在，问题是我正在使用带有 jQ​​uery (http://tutorialzine.com/2012/12/album-photo-previews-jquery/) 的实时专辑预览，所以我需要返回每个事件的所有缩略图也是。我可以用一个查询来做到这一点吗？

我目前的查询是

```
"SELECT event.*, photo_thumbnail FROM event 
   LEFT JOIN photo ON event_id = photo_event 
   WHERE event_user = ?;" 
```

但它给了我返回的每张照片的事件信息，这是不必要的。我只需要一次事件信息以及每个事件的每张照片。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:10:40.933

我会使用类似的东西：

```
SELECT event.*, GROUP_CONCAT(photo_thumbnail) as thumbnails
FROM event 
LEFT JOIN photo ON event_id = photo_event 
WHERE event_user = ?
GROUP BY event.event_id; 
```

这将在您的结果中提供一个缩略图列，该列将以逗号分隔的缩略图列表。

# php - 如何从可能的答案列表中检索不正确的答案

> ID：14189739
> 
> 赞同：1
> 
> 时间：2013-01-07T04:06:26.887
> 
> 标签：php, mysqli

使用下面的代码，我试图通过首先完成一个问题`Option Type`然后从答案列表中删除正确答案（`Answer`字段）来检索可能的答案列表。

我的问题是，我只需要一点帮助来完成代码就可以做到这一点。我在`$row`变量中收到通知，我知道我没有在 if 语句之前调用它来引用它，但我的问题是什么是`$row`变量假设设置为或者我需要调用`$row`其他东西？

收到的示例通知：

> 注意：未定义的变量：row in ... on line ...
> 
> 注意：试图在线获取...中非对象的属性...

另一个问题是，如果您查看最底部的代码，当我尝试显示不正确的答案时`<?php echo $incorrect_ans[$key]; ?>`，它会一直显示单词`Array`。我是否错误地调用了数组？我希望它显示收到的错误答案。

以下是完整代码

```
 $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionNo, q.QuestionContent, an.Answer, an.AnswerId, q.QuestionMarks, q.OptionId, o.OptionType
    FROM 
    Question q INNER JOIN Answer an ON q.QuestionID = an.QuestionID
    INNER JOIN Option_Table o ON o.OptionID = q.OptionID
    INNER JOIN Session s ON s.Sessionid = q.Sessionid
    WHERE s.SessionName = ?
    ORDER BY q.QuestionId, an.Answer
       ";

           // prepare query
           $stmt=$mysqli->prepare($query);
           // You only need to call bind_param once
           $stmt->bind_param("s", $assessment);
           // execute query
           $stmt->execute(); 

               // This will hold the search results
            $searchQuestionNo = array();
            $searchQuestionContent = array();
            $totalMarks = array();
            $searchAnswerId = array();
            $searchMarks = array();

            // Fetch the results into an array

           // get result and assign variables (prefix with db)
        $stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionNo, $dbQuestionContent, $dbAnswer, $dbAnswerId, $dbQuestionMarks, $dbOptionId, $dbOptionType);
              while ($stmt->fetch()) {

                   $specialOptionTypes = array(
            'Yes or No' => array( 'Y', 'N' ),
            'True or False' => array( 'T', 'F' ),
        );

        // Do this for each row:
        if ( array_key_exists( $row->OptionType, $specialOptionTypes ) ) {
            $options = $specialOptionTypes[ $row->OptionType ];
        } else if ( preg_match( '/^([A-Z])-([A-Z])$/', $row->OptionType, $match ) ) {
            $options = range( $match[1], $match[2] );
        } else {
            // issue warning about unrecognized option type
            $options = array();
        }
        $right = str_split( $row->Answer );  // or explode() on a delimiter, if any
        $wrong = array_diff( $options, $right );  

                $searchQuestionNo[] = $dbQuestionNo;
                $searchQuestionContent[] = $dbQuestionContent;
                $incorrect_ans[] = $wrong;
                $searchAnswerId[] = $dbAnswerId;
                $totalMarks[] = $dbQuestionMarks;
                $searchMarks[] = $dbQuestionMarks;
              } 

.... 

          //table row 

          <td class="answertd" name="incorrectanswers[]"><?php
    echo $incorrect_ans[$key];
    ?></td> 
```

如果您想查看数据库表以查看每个表中的内容，请查看以下内容：

**数据库表结构：**

会话表（又名考试表）

```
SessionId(auto)  SessionName
137              XULWQ 
```

问题表：

```
SessionId  QuestionId QuestionContent  QuestionNo QuestionMarks  OptionId
137        1          Name 2 Things     1         5               5
137        2          Name 3 Things     2         5               2 
```

Option_Table 表：

```
OptionId  OptionType
1         A-C
2         A-D
3         A-E
4         A-F
5         A-G
6         A-H 
```

答案表：

```
 AnswerId(auto) SessionId  QuestionId  Answer
   200            137        1           B
   201            137        1           F
   202            137        2           D
   203            137        2           A
   204            137        2           C 
```

**更新：**

现在唯一的问题是错误答案的布局，我希望它在每个问题自己的行中显示每个错误答案：

所以让我们说下面是每个问题的正确和错误答案：

```
Question Number: 1   Correct Answer(s) B     Incorrect Answers A C D
Question Number: 2   Correct Answer(s) A C   Incorrect Answers B D
Question Number: 3   Correct Answer(s) D     Incorrect Answers A B C 
```

下面显示了当前的布局和它的布局方式：

![在此处输入图像描述](../Images/a132343f47942f63adc6a98c0a242b3e.png)

当前输出的代码是这样的：

```
<table border='1' id='penaltytbl'>
<thead>
<tr>
<th class='questionth'>Question No.</th>
<th class='answerth'>Incorrect Answer</th></tr>
</thead>
<tbody>
<?php
$row_span = array_count_values($searchQuestionNo);
$prev_ques = '';
foreach($searchQuestionNo as $key=>$questionNo){

?>

<tr class="questiontd">
    <?php
    if($questionNo != $prev_ques){
    ?>
    <td class="questionnumtd q<?php echo$questionNo?>_qnum" rowspan="<?php echo$row_span[$questionNo]?>">
    <?php echo$questionNo?><input type="hidden" name="numQuestion" value="<?php echo$questionNo?>" />
    </td>
    <?php
    }  
    ?>
<td class="answertd"><?php echo implode(',', $incorrect_ans[$key]);?></td>
</tr>
<?php
$prev_ques = $questionNo;
}
?>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:23:11.767

问题`$row`很简单——没有`$row`定义变量。而不是获取行，您将变量绑定到结果值，因此只需替换`$row->OptionType`为绑定变量`$dbOptionType`并`$row->Answer`与`$dbAnswer`. 要获取行，您应该这样做：

```
$stmt->execute();
$result = $stmt->get_result();
while ($row = $result->fetch_object()) {
    // ...
} 
```

在示例代码中，我也没有看到`$incorrect_ans`变量定义，也许您正在其他地方执行此操作，但如果没有，则添加`$incorrect_ans = array()`例如您定义其他列表的位置（下一`// This will hold the search results`行）。

尝试做`print_r`然后`$incorrect_ans`你会看到结果数组的结构，你有数组列表，这就是为什么`echo $incorrect_ans[$key];`导致`Array`. 你可以这样做`echo implode(',', $incorrect_ans[$key]);`，你会得到字符串，其值由`,`字符分隔。

我建议`$specialOptionTypes`在 while 循环之前定义，您不会在循环内更改该数组，所以我认为没有理由在每次迭代时重新创建它。

我还注意到您正在设置没有此类属性的属性（据我所知）-也许您想使用`name`一些？`<td>``<input>`

```
<?php

// .........

$query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionNo, q.QuestionContent, an.Answer, an.AnswerId, q.QuestionMarks, q.OptionId, o.OptionType
    FROM 
    Question q INNER JOIN Answer an ON q.QuestionID = an.QuestionID
    INNER JOIN Option_Table o ON o.OptionID = q.OptionID
    INNER JOIN Session s ON s.Sessionid = q.Sessionid
    WHERE s.SessionName = ?
    ORDER BY q.QuestionId, an.Answer";

// prepare query
$stmt=$mysqli->prepare($query);
// You only need to call bind_param once
$stmt->bind_param("s", $assessment);
// execute query
$stmt->execute(); 

// This will hold the search results
$searchQuestionNo = array();
$searchQuestionContent = array();
$totalMarks = array();
$searchAnswerId = array();
$searchMarks = array();
$incorrect_ans = array();

// Fetch the results into an array

// get result and assign variables (prefix with db)
$stmt->bind_result($dbSessionId, $dbSessionName, $dbQuestionId, $dbQuestionNo, $dbQuestionContent, $dbAnswer, $dbAnswerId, $dbQuestionMarks, $dbOptionId, $dbOptionType);
$specialOptionTypes = array(
    'Yes or No' => array('Y', 'N'),
    'True or False' => array('T', 'F'),
);
while ($stmt->fetch()) {
    // Do this for each row:
    if (array_key_exists($dbOptionType, $specialOptionTypes)) {
        $options = $specialOptionTypes[$dbOptionType];
    } else if (preg_match('/^([A-Z])-([A-Z])$/', $dbOptionType, $match)) {
        $options = range($match[1], $match[2]);
    } else {
        // issue warning about unrecognized option type
        $options = array();
    }
    $right = str_split($dbAnswer);  // or explode() on a delimiter, if any
    $wrong = array_diff($options, $right);

    $searchQuestionNo[] = $dbQuestionNo;
    $searchQuestionContent[] = $dbQuestionContent;
    $incorrect_ans[] = $wrong;
    $searchAnswerId[] = $dbAnswerId;
    $totalMarks[] = $dbQuestionMarks;
    $searchMarks[] = $dbQuestionMarks;
} 

// .........

for ($key = 0, $cnt = count($incorrect_ans) ; $key < $cnt ; ++$key) : 
?>
<td class="answertd">
    <?php echo implode(',', $incorrect_ans[$key]); ?>
</td>
<?php 
endfor; 
?> 
```

# html - html5 输入类型=电子邮件未出现在 request.form 集合中

> ID：14189742
> 
> 赞同：0
> 
> 时间：2013-01-07T04:07:24.100
> 
> 标签：html, asp-classic

在 iis7 上使用经典 ASP (vbScript)：

我正在尝试将前端 Web 表单从 XHTML 升级到 HTML5 标记。

我在所有地方都取得了成功，但只有一个地方——那就是：

```
<input type="email" value="name@email.com" name="myEmail" />
<input type="text" value="some name" name="myName" /> 
```

问题是，当将表单发布到循环通过 request.form 集合的 .asp 脚本时，来自`type="email"`表单项的输入不存在于集合中。该项目只是不存在于集合中。

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:39:19.120

我想到了。我的问题实际上与 .js 代码有关，它首先以 ajax 样式的方式接受来自表单的输入（然后将其传递给 .asp 页面进行处理）。

js 中有一些硬编码的输入类型，并且尚未更新以接受 html5 数据类型。

感谢任何花时间查看问题的人。

# regex - 如何使用 htaccess 重定向自定义 url？

> ID：14189743
> 
> 赞同：1
> 
> 时间：2013-01-07T04:07:40.783
> 
> 标签：regex, apache, .htaccess

我正在从 Wordpress 迁移到自定义编码内容管理系统，需要帮助使用 htaccess 转换旧 URL。

我有超过 2000 多篇具有以下 URL 结构的旧文章：

www.site.com/ID/post-title/

我需要将每个帖子重定向到使用帖子 ID 的自定义脚本：

www.site.com/post.php?id=ID

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:35:22.617

你可以试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/([^/]+)/?    [NC]
RewriteRule .* post.php?id=%1  [L,QSA] 
```

它将静默映射：

`http://www.site.com/ID/post-title/`

对此：

`http://www.site.com/post.php?id=ID`

where`ID`不是固定字符串，而是作为`id`值传递给脚本的变量。

# android - 刷新后台堆栈中存在的活动

> ID：14189744
> 
> 赞同：0
> 
> 时间：2013-01-07T04:07:49.493
> 
> 标签：android, android-activity, refresh, actionbarsherlock

我在操作栏上有一个**输入您的详细信息**选项作为操作项，我通过扩展以下类设置该选项在所有活动中可见。

```
 public abstract class ActionActivity extends SherlockActivity {
        protected boolean mIsEnterDetailsScreen = true;
        protected userName = "";
        SessionManager session;

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {

             if(mIsEnterDetailsScreen)
             {
                 menu.add("Enter Your Details")
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
             }

             else 
             {
                 menu.add(userName)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
             }

            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            //This uses the imported MenuItem from ActionBarSherlock
            switch(item.getItemId())
            {

            case 0:
                Intent intent = new Intent(ActionActivity.this,EnterDetails.class);
                startActivity(intent);
                return true;
            }
            return false;
        }

         @Override
            protected void onCreate(Bundle savedInstanceState) {

                  session = new SessionManager(getApplicationContext());

            sessionCheck();  // This method's body is separated for the easiness and pasted below.

                super.onCreate(savedInstanceState);

                getSupportActionBar().setHomeButtonEnabled(true);
            }

        } 
```

因此，通过上面的代码，如果用户输入详细信息，我将其保存在首选项中，同时设置为`mIsEnterDetailsScreen = false;`使该选项不可见，并且从他输入的详细信息中获取的用户名将可见。这仅适用于稍后开始的活动。但不是关于以前的活动。所以，我的疑问是如何刷新后台堆栈中的活动。这样即使他按下后退按钮，在他输入详细信息而不是**输入您的详细信息**选项**`username`**后，即使在以前的活动中也必须显示。

 **假设如果用户在第 3 次活动上单击“**输入您的详细信息**”操作项，则更改会反映在后面的活动（4、5、6....）中，但不会反映在第 1 次活动和第 2 次活动中。有什么方法可以刷新活动以使更改持续存在。

这是 ActionActivity 中的 sessionCheck() 方法

```
 public void sessionCheck()
     {
         if(session.isLoggedIn())
         {
             mIsEnterDetailsScreen = false;

             HashMap<String, String> userHashMap = session.getUserDetails();

             // name
             String name = userHashMap.get(SessionManager.KEY_USER_NAME);

             userName = name;
         }

         else{

             mIsEnterDetailsScreen = true;

         }

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:41:30.400

当用户输入详细信息时，将它们保存在某个地方，我建议使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)。然后覆盖`onResume`将在后台堆栈中的活动并在那里加载详细信息（`SharedPreferences`例如）。

Android 不使用`onRefresh`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:17:32.427

您应该必须在第一个活动上实现覆盖方法 onRefresh。

当您关闭从详细信息活动回来或关闭/完成第二个活动（即您的输入您的详细信息活动）时，将调用第一个活动的 onRefresh 方法。那时您可以从 SharedPreference 中设置值。因此，通过这种方式，您可以将价值观反映在您的观点上。

希望你明白我的意思。随时发表任何评论。**

# ios - 是什么导致此代码中出现“无效的 CFStringRef”？

> ID：14189750
> 
> 赞同：1
> 
> 时间：2013-01-07T04:08:30.403
> 
> 标签：ios, nsurl, cfstring

我只是尝试播放苹果的 HLS 示例流。我的代码很简单：

```
- (IBAction)playHLS:(id)sender {
    NSString* str = @"https:​/​/​devimages.apple.com.edgekey.net/​resources/​http-streaming/​examples/​bipbop_16x9/​bipbop_16x9_variant.m3u8";
    NSURL *url = [[NSURL alloc] initWithString:str];

    MPMoviePlayerViewController *theMovie = [[MPMoviePlayerViewController alloc]
                                             initWithContentURL: url];

    [self presentMoviePlayerViewControllerAnimated:theMovie];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMovieFinishedCallback:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification object:theMovie];
} 
```

调试显示 url 未正确初始化，原因是`<invalid CFStringRef>`

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:21:01.557

有点奇怪！

问题是我从浏览器复制并粘贴了 url。输入代码后，代码可以正常工作。

还是不知道为什么，希望对遇到同样问题的人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T06:59:51.963

该字符串中有几个 Unicode 零宽度空格字符，在每个 the`:`和`/`字符之后。

例如，如果将其粘贴[到此在线 UTF-8 解码器](http://www.alooha.com/tools-utf8.html)中，您就可以看到它们。它们是[Unicode 字符 0x200B](http://www.fileformat.info/info/unicode/char/200b/index.htm)。

# java - 使用数组来决定谁是活跃玩家（回合制猜谜游戏）

> ID：14189751
> 
> 赞同：0
> 
> 时间：2013-01-07T04:08:50.377
> 
> 标签：java, arrays

我正在使用一种方法（如下所示），该方法允许我输入玩家数量以及每个玩家的名称。有没有办法让我使用这个数组来决定谁是活跃玩家？（回合制猜谜游戏）。如果你能指出我正确的方向。

```
public class Program {
     String[] playerList;
     int playersAmount = 0;

      public void inputPlayers() {
          playersAmount = Input.readInt();
          playerList= new String[playersAmount];
          for (int g = 0; g < playersAmount; g++) {
              String namePlayer = "player " + (g+1);
              playerList [g] = namePlayer;
          }
      }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T05:45:20.877

你应该看看我关于更改玩家号码的问题。我认为这正是您正在寻找的东西（或类似的东西）：[Java：更改玩家编号](https://stackoverflow.com/questions/13505261/java-changing-player-number)

本质上，我使用了一个布尔数组来跟踪谁还在玩，其中数组索引对应于玩家编号 a[0] = 玩家 0，a[1] = 玩家 1 等。如果玩家被淘汰，则标记相应的索引带假：`a[i] = false;`然后您可以使用以下方法（取自我的问题）将玩家编号切换到下一个仍在玩的玩家：

```
public static int switchPlayer(int currentPlayer, boolean[] playerList) {
    // if the current player + 1 = length (size) of array,
    // start back at the beginning and find the first player still playing
    if(currentPlayer + 1 == playerList.length) {
        for(int i = 0; i < playerList.length; i++) {
            if(playerList[i] == true) {    // if player is still in the game
                currentPlayer = i;         // currentPlayer = current index of array
                break;
            }
        }
    }
    // otherwise the current player number + 1 is not at the end of the array
    // i.e. it is less than the length (size) of the array, so find the next player
    // still playing
    else {
        for(int i = (currentPlayer+1); i < playerList.length; i++) {
            if(playerList[i] == true) {
                currentPlayer = i;
                break;
            }
        }
    }
    return currentPlayer;
} 
```

如果您对我的代码等有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:14:54.267

在我看来，你有两种不同的选择。

1.  创建一个 Player 对象，实例变量作为他的名字和一个表明他是否处于活动状态的布尔值。
2.  您可以创建一个布尔数组，该数组与玩家数组同步，说明玩家是否处于活动状态。

前 2

```
boolean[] activeStatus= new boolean[1];
String[] players = new String[1];
activeStatus[0]=true;
players[0]="Joe Smith"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:14:55.903

好吧，要表示当前玩家，您可以使用 int

```
int curplayer = 0; 
```

每次他们的回合结束时，您都可以添加一个以获得下一个玩家的索引。

```
curplayer++; 
```

至于在最后一个玩家之后返回第一个玩家，我建议您查看 % （模数）运算符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T04:17:22.187

使用实例变量跟踪轮数：

```
private int turn; 
```

每回合增加一次：

```
turn++; 
```

轮到的玩家的指数可以通过使用回合除以玩家数量的余数来计算：

```
int playerIndex = turn % playersAmount; 
```

我留给您将这些部分处理到您的代码中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T04:17:56.057

我的 java 有点生疏了，但类似下面的东西应该可以工作。

```
i = 0
while (playing == True)
{
    player = playerList[i]
    i = (i + 1) % playerList.length

    [Do something]
} 
```

# php - CakePHP 2.x 在 CSS 中使用 PHP

> ID：14189752
> 
> 赞同：0
> 
> 时间：2013-01-07T04:09:03.367
> 
> 标签：php, css, cakephp, cakephp-2.1

有人可以告诉我当前在 CakePHP 2.x 的 CSS 文件中使用 PHP 的方法吗

我目前已将我的样式表分成一个 php 文件，并希望通过 URL 解析我的数据，但我似乎无法弄清楚如何使用链接它

```
$this->Html->css('dynamic-stylesheet') 
```

因为它总是将 .css 附加到名称中。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T11:06:18.470

您可以使用生成标签`HtmlHelper::meta()`

```
echo $this->Html->meta(array(
    'link' => '/css/test.php',
    'rel' => 'stylesheet',
    'type' => 'text/css'
)); 
```

请注意，您需要将其显式定向到`/css`目录，因为您不再使用专门用于 CSS 的辅助方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T04:23:25.987

查看位于 lib/Cake/View/Helper/HtmlHelper.php 的 CakePHP 库中的 Html 帮助文件，查看第 427 行，看起来 .css 扩展名是自动设置的，除非 CSS 文件名中有两个斜杠。我猜那是为了捕捉外部资源？

从上述库文件中：

```
if (strpos($path, '//') !== false) {
    $url = $path;
} else {
    $url = $this->assetUrl($path, $options + array('pathPrefix' => CSS_URL, 'ext' => '.css'));

    if (Configure::read('Asset.filter.css')) {
        $pos = strpos($url, CSS_URL);
        if ($pos !== false) {
            $url = substr($url, 0, $pos) . 'ccss/' . substr($url, $pos + strlen(CSS_URL));
        }
    }
} 
```

所以这..

```
echo $this->Html->css('http://whatever.com/css/dynamic-stylesheet.php'); 
```

将呈现 dynamic-stylesheet.php 文件，而不是默认为 'dynamic-stylesheet.css。

不确定这就是它的用途，但也许该文件会对您有所帮助。

# firefox - Firefox 安全模式和全新配置文件的区别？

> ID：14189753
> 
> 赞同：0
> 
> 时间：2013-01-07T04:09:25.583
> 
> 标签：firefox, browser, profile

（对不起我的英语不好）

昨天，我在使用具有非常大字体大小（200 像素）的@font-face 时遇到了一个问题：我的一个 div 在 Firefox 和 Chrome 中呈现不同。经过一番研究，我了解到这是由于 Firefox 和 Chrome 计算 line-height 的方式不同，指定 line-height 可以解决我的问题。

但是，令我惊讶的是，即使我什么都没做，当我在安全模式下启动 FF 时，问题就会自行解决！（它呈现类似于 Chrome）所以我想知道那是因为我自定义 FF 太多了？我创建了一个新的配置文件（没有插件，禁用所有插件，将所有设置重置为默认值）但是新创建的配置文件的工作方式与我的旧配置文件相同，并且**在**安全模式下与 FF**不同。**我不明白吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:06:46.720

安全模式，除了关闭所有插件外，还会关闭 JIT 和硬件加速渲染。

如果您在 Windows 上（我假设是根据所描述行为的情况），那么关闭硬件加速渲染也会关闭 DirectWrite 文本渲染并改用 GDI。

但是 DirectWrite 和 GDI 最终会针对同一文本使用不同的字体度量：一方面，DirectWrite 可以进行亚像素字形定位，而 GDI 不能。因此，如果您打开安全模式，行高和文本布局的其他各个方面都会发生变化。

请注意，Chrome 使用 GDI 开始。另一方面，IE 9 和 10 使用 DirectWrite，因此值得测试您的页面在其中的行为方式；我敢打赌，它类似于非安全模式下的 Firefox。

# widget - 我正在为练习创建一个最近的帖子小部件，但我需要帮助正确制作它，以便管理员可以调整显示的类别

> ID：14189754
> 
> 赞同：0
> 
> 时间：2013-01-07T04:09:30.940
> 
> 标签：widget, wordpress

所以就像我在标题中所说的那样，我正在创建一个最近的帖子小部件以供练习。它包括不同的功能，我遇到的问题是允许管理员选择他们想要显示的类别。我目前已对其进行设置，以便在表单中它有一个文本字段，管理员可以在其中手动输入类别，但我需要它有一个下拉菜单，其中已经有类别，所以管理员可以只需选择它。我根本不知道该怎么做，所以如果我能得到一些帮助，那就太好了。对不起，如果我含糊其辞，我是新手。我在下面发布我的代码。

```
<?php
/*
Plugin Name: News Recent Posts Widget
Plugin URI: 
Description: A recent post widget with extra functions that allow admin to make changes to certain values
Author: Kevin Ullyott
Version: 1.0
Author URI: http://modmacro.com/
*/

class recentpost extends WP_Widget {

    public function __construct() {
    parent::WP_Widget(
    // or parent::__construct(
        false, 
        'Kevin - Recent Posts Widget',
        array(
            'description' => __('A recent post widget with extra functions that allow admin to make changes to certain values') 

        )
    );
    ;
}

    public function widget( $args, $instance ) {

        extract( $args );

        $headline = $instance['headline'];
        $category = $instance['category'];
        $numberposts = $instance['numberposts'];
        $readmore = $instance['readmore'];

        echo $before_widget;

        echo $before_title;

        echo "<p class=\"headline\">$headline</p>";

        echo $after_title;

        $args = array( 'numberposts' => $numberposts, 'category_name' => $category );
        $recent_posts = wp_get_recent_posts( $args );
        foreach( $recent_posts as $recent ){
        setup_postdata(get_post($recent['ID']));
        echo '<a href="' . get_permalink($recent['ID']) . '" title=" '.esc_attr(get_the_title($recent['ID'])).'" >' .   get_the_title($recent['ID']).'</a> ';
        echo get_the_time('F j, Y', $recent['ID']);
        the_excerpt();
}
wp_reset_postdata();

        echo $after_widget;

    }

    public function update( $new_instance, $old_instance ) {
        $instance = array();
        $instance['headline'] = ( $new_instance['headline'] );
        $instance['category'] = ( $new_instance['category'] );
        $instance['numberposts'] = ( $new_instance['numberposts'] );
        $instance['readmore'] = ( $new_instance['readmore'] );
        return $instance;
    }

    public function form( $instance ) {

        $headline = $instance[ 'headline' ];
        $category = $instance[ 'category' ];
        $numberposts = $instance[ 'numberposts' ];
        $readmore = $instance[ 'readmore' ];

        ?>

<p>
  <label for="<?php echo $this->get_field_id( 'headline' ); ?>">
    <?php _e( 'Headline:' ); ?>
  </label>
  <input class="widefat" id="<?php echo $this->get_field_id( 'headline' ); ?>" name="<?php echo $this->get_field_name( 'headline' ); ?>" type="text" value="<?php echo esc_attr( $headline ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'category' ); ?>">
  <?php _e( 'Category:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'category' ); ?>" name="<?php echo $this->get_field_name( 'category' ); ?>" type="text" value="<?php echo esc_attr( $category ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'numberposts' ); ?>">
  <?php _e( 'Number of posts:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'numberposts' ); ?>" name="<?php echo $this->get_field_name( 'numberposts' ); ?>" type="text" value="<?php echo esc_attr( $numberposts ); ?>" />
</p>
<label for="<?php echo $this->get_field_id( 'readmore' ); ?>">
  <?php _e( 'Read More:' ); ?>
</label>
<input class="widefat" id="<?php echo $this->get_field_id( 'readmore' ); ?>" name="<?php echo $this->get_field_name( 'readmore' ); ?>" type="text" value="<?php echo esc_attr( $readmore ); ?>" />
</p>
<?php 
    }
}

add_action( 'widgets_init', create_function('', 'return register_widget("recentpost");') );

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:36:50.323

函数 wp_dropdown_categories 将引入类别，但单独添加函数不会保存或检索所选类别。您需要添加`name` `selected`and`id`参数。我认为这应该可行：

```
<?php wp_dropdown_categories(array('name' => $this->get_field_name('category'), 'selected' => $category, 'id' => $this->get_field_id('category'), 'class' => 'widefat')); ?> 
```

我也添加了课程`widefat`，但它仅用于演示。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:51:51.630

函数 wp_dropdown_categories 显示一个下拉菜单，其中包含站点中使用的所有类别。这是关于它的文档： http: [//codex.wordpress.org/Function_Reference/wp_dropdown_categories](http://codex.wordpress.org/Function_Reference/wp_dropdown_categories)

所以你可以更换

get_field_id('类别'); ?>" name="get_field_name('category'); ?>" type="text" value="" />

调用 wp_dropdown_categories 函数。

# c++ - 从数组中释放内存

> ID：14189759
> 
> 赞同：0
> 
> 时间：2013-01-07T04:10:14.570
> 
> 标签：c++, arrays, memory

我正在尝试内存分配和删除，并且对如何正确删除/释放内存有疑问。下面是一小段代码：

```
#include <windows.h>
#include <vector>
#include <iostream>

using namespace std;

int main() {
    cout << "Initial" << endl;
    system("Pause");

    double* Array = new double[50000];
    for(int i = 0; i < 50000; i++)
    {
        Array[i] = rand();
    }

    cout << "Array created" << endl;
    system("Pause");

    delete[] Array;

    cout << "Array deleted" << endl;
    system("Pause");

    return 1;
} 
```

在每次系统暂停期间，我使用 Windows 任务管理器检查我的应用程序正在使用多少内存。以下是我的结果中的数字：

*   初始 744 KB
*   阵列已创建 1120 KB
*   阵列已删除 1124 KB

那么我在我的 C++ 教育中错过了什么吗？调用 delete[] 后是否应该不释放为数组分配的内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:14:23.300

不，你没有错过任何东西。只是任务管理器并没有告诉你全部真相（好吧，它并没有从你需要的角度告诉你真相）。程序调用`delete[]`时，内存会被释放以供程序重用，但不会返回给操作系统。从您的程序的角度来看，内存已被释放：您的下一次调用`new`将占用相同的内存块。但从操作系统（和任务管理器）的角度来看，程序仍然保留内存。

要查看发生了什么，请多次运行分配，然后循环释放，并查看任务管理器中的内存总量没有从第一次分配后获得的“高水位线”上升。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:18:46.217

这取决于您使用的编译器。对于某些编译器，删除的内存由应用程序持有，不会立即返回到操作系统。抱歉，我现在找不到有关它的官方链接。

# jquery - $.post 的 jQuery $.ajax 函数

> ID：14189760
> 
> 赞同：0
> 
> 时间：2013-01-07T04:10:16.667
> 
> 标签：jquery, ajax, .post

在 MvcMusicStore 教程中，它使用 $.post() 从购物车中删除一个项目。我想练习我的 jQuery 并将其转换为 $.ajax() 调用。但它给了我一个运行时错误。谁能告诉我我的代码出了什么问题。

这是 $.post() 调用

```
 $.post("/ShoppingCart/RemoveFromCart", { "id": recordToDelete },
        function (data) {
             Successful requests get here
             Update the page elements
            if (data.ItemCount == 0) {
                $('#row-' + data.DeleteId).fadeOut('slow');
            } else {
                $('#item-count-' + data.DeleteId).text(data.ItemCount);
            }

            $('#cart-total').text(data.CartTotal);
            $('#update-message').text(data.Message);
            $('#cart-status').text('Cart (' + data.CartCount + ')');
        }); 
```

==================================================== ===================================== 这是我的 $.ajax() 调用。

```
 $.ajax({
            type: "POST",
            uri: "/ShoppingCart/RemoveFromCart",
            data: { "id": recordToDelete },
            success: function (d) {
                alert(d);
                if (d.ItemCount == 0) {
                    $('#row-' + d.DeleteId).fadeOut('slow');
                } else {
                    $('#item-count-' + d.DeleteId).text(d.ItemCount);
                }

                $('#cart-total').text(d.CartTotal);
                $('#update-message').text(d.Message);
                $('#cart-status').text('Cart (' + d.CartCount + ')');
            },
            dataType: "application/json"
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:12:14.787

使用`url:`而不是`uri`

```
$.ajax({
        type: "POST",
        url: "/ShoppingCart/RemoveFromCart",
        data: { "id": recordToDelete },
        success: function (d) {
            alert(d);
            if (d.ItemCount == 0) {
                $('#row-' + d.DeleteId).fadeOut('slow');
            } else {
                $('#item-count-' + d.DeleteId).text(d.ItemCount);
            }

            $('#cart-total').text(d.CartTotal);
            $('#update-message').text(d.Message);
            $('#cart-status').text('Cart (' + d.CartCount + ')');
        },
        dataType: "application/json"
    }); 
```

有关更多信息，请访问[$.ajax()](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T04:13:44.257

正确的参数名称是 url 而不是 uri

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:19:00.560

```
$.ajax({
        type: "POST",
        url: "ShoppingCart/RemoveFromCart",
        contenttype: "application/json; charset=utf-8",
        data: { id: recordToDelete },
        success: function (d) {
            alert(d);
            if (d.ItemCount == 0) {
                $('#row-' + d.DeleteId).fadeOut('slow');
            } else {
                $('#item-count-' + d.DeleteId).text(d.ItemCount);
            }

            $('#cart-total').text(d.CartTotal);
            $('#update-message').text(d.Message);
            $('#cart-status').text('Cart (' + d.CartCount + ')');
        }

    }); 
```

尝试上面的代码一次，让我知道您的问题是否仍然存在.....

# ruby - 了解红宝石范围

> ID：14189763
> 
> 赞同：1
> 
> 时间：2013-01-07T04:11:12.290
> 
> 标签：ruby, range

我现在正在尝试学习红宝石。我对范围有疑问。帮助我理解红宝石范围。另请参考一些最常用的数组方法。

```
0..3
0...3 
```

这两者有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:20:13.507

```
(0..3).to_a=>[0,1,2,3]
(0...3).to_a=>[0,1,2] 
```

第一个将包括最后一个元素，第二个将排除最后一个元素..

为 ruby​​ 中的所有引用学习 ruby​​doc

访问[http://www.ruby-doc.org/core-1.9.3/Array.html](http://www.ruby-doc.org/core-1.9.3/Array.html)获取数组。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T04:21:20.263

两点形式创建一个包含范围，而三点形式创建一个排除指定高值的范围。

```
(1..5)        #==> 1, 2, 3, 4, 5 ***INCLUSIVE
(1...5)       #==> 1, 2, 3, 4 
```

所以，

```
(1..5)==(1...5)  #==> false 
```

字符串的例子更有趣：

```
('a'..'d')    #==> 'a', 'b', 'c', 'd' ***INCLUSIVE
('bar'..'bat')#==> "bar", "bas", "bat" ***INCLUSIVE 
```

另一种表示包含范围的方式是`Range.new(0,2)`

```
(0..5) == Range.new(0,5)    #=> true 
```

有关更多信息，您可能想了解更多关于范围的信息： [http ://www.ruby-doc.org/core-1.9.3/Range.html](http://www.ruby-doc.org/core-1.9.3/Range.html)

# c# - 我需要从高速公路号码中提取前缀、号码和选项后缀

> ID：14189764
> 
> 赞同：0
> 
> 时间：2013-01-07T04:11:16.020
> 
> 标签：c#, regex

我正在用 C# 编写一个程序，以一般形式处理高速公路指定：

{1-2 个字符}{1-3 个数字}[1-4 个字符]

例如：

*   I70
*   I70BR
*   US550
*   US550Trk

匹配此输入并将前缀（例如，I 或 US）、数字（例如，70 或 550）和可选后缀（例如，BR 或 Trk）存储在数组中的正则表达式可能是什么？的比赛。

问候，吉姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:17:56.163

您需要的模式如下：

```
^([A-Za-z]{1,2})(\d{1,3})([A-Za-z]{0,4})$ 
```

您已经说过最后一组介于 1 到 4 个字符之间，但是您在同一个问题中表示它是可选的。我选择了后一个选项，因为并非您提供的所有输入都有后缀。

示例用法：

```
var input = "US550Trk";
var pattern = @"^([A-Za-z]{1,2})(\d{1,3})([A-Za-z]{0,4})$";
var regex = new Regex(pattern);
var results = regex.Match(input).Groups.
    OfType<Group>().
    Skip(1).
    Select(g => g.Value).
    ToArray(); 
```

之所以`Skip(1)`存在，是因为第一组始终包含整个匹配项。

# php - $.get 在 jquery 中未通过 javascript 在 html 页面上执行

> ID：14189765
> 
> 赞同：1
> 
> 时间：2013-01-07T04:11:26.697
> 
> 标签：php, jquery, ajax, get, overwrite

我一直在尝试为我的网站创建一个简单的下载计数器，方法如下：使用 jquery 检索指示下载时间的 txt 的值，然后使用 jquery 调用 ajax 来执行 PHP 文件，这将依次覆盖这样的txt文件（在php文件中增加它）然后存储它，然后用jquery读回值。在我忘记之前，为了避免任何错误信息，这里是页面的整个 HTML 代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>GreenDream: SMS Sender</title>
    <link rel=StyleSheet type="text/css" href="http://www.gfcf14greendream.com/CSS/greendream.css" />
    <link rel="SHORTCUT ICON" href="http://www.gfcf14greendream.com/images/dreamicon.ico">  

    <script type="text/javascript" src="http://www.gfcf14greendream.com/JS/greendream.js"></script>
  </head>
<body onload="startTime(); handleTextFile()">
  <div id="background">
    <img src="http://www.gfcf14greendream.com/images/greentwi.png" class="stretch" alt="" />
  </div>

  <br />

  <table align="center">

    <tr>
        <td>
            <a href="http://www.gfcf14greendream.com/"><img src="http://www.gfcf14greendream.com/images/dream.png" align="middle"></a>
        </td>

        <td>
            <div id='pbutton' style="width:113px; height:41px; margin:0px;white-space:nowrap; word-spacing:0;"><a class="button" href="http://www.gfcf14greendream.com/programs.html">Programs</a></div>
        </td>

        <td>
            <div id='gbutton' style="width:93px; height: 41px; margin:0px;white-space:nowrap; word-spacing:0;"><a class="button" href="http://www.gfcf14greendream.com/games.html">Games</a></div>
        </td>

        <td>
            <div id='tbutton' style="width:108px; height: 41px; margin:0px;white-space:nowrap; word-spacing:0;"><a class="button" href="http://www.gfcf14greendream.com/tutorials.html">Tutorials</a></div>
        </td>

        <td>
            <div id='bbutton' style="width:74px; height: 41px; margin:0px;white-space:nowrap; word-spacing:0;"><a class="button" href="http://blog.gfcf14greendream.com/">Blog</a></div>
        </td>

        <td>
            <div id='mbutton' style="width:114px; height: 41px; margin:0px;white-space:nowrap; word-spacing:0;"><a class="button" href="http://www.gfcf14greendream.com/aboutme.html">About Me</a></div>                        
        </td>

        <td style="padding-left:50px">
            <div id='daytitle'></div>
            <div id='clock'></div>
        </td>
    </tr>

  </table>

  <br />

  <div style="text-align: center; color:#00FF00; font-size: 20px">The following is a Visual C++ program that was designed specifically to send text messages to a phone... Free of charge!!</div>
  <br />
  <div style="text-align: center; color:#FFFF00; font-size: 20px">THE GOOD: If you have a prepaid phone, then you can send text messages to a phone without wasting your minutes...</div>
  <br />
  <div style="text-align: center; color:#FF8000; font-size: 20px">THE BAD : Since I haven't been able to put a Skype or Google Voice library for use with C++, this application depends on using what's known as an SMS gateway, different for every phone carrier... meaning you must know your recipient's carrier to be able to send a message!</div>
  <br />
  <div style="text-align: center; color:#FF0000; font-size: 20px">THE UGLY: This program doesn't work on computers connected to safe networks (such as college/university networks) ... at least not yet!</div>
  <br />
  <div style="text-align: center; color:#00FF00; font-size: 20px">You will probably need the Visual C++ Redistributable Package (or the .NET framework or both, but most likely just the package) to run this program, if you don't have it installed on your pc yet</div>
  <br />
  <br />
  <div style="text-align: center; color:#0000C8; font-size: 20px">Click <a href="http://www.microsoft.com/en-us/download/details.aspx?id=5555">here</a> to download the Visual C++ Redistributable Package</div>
  <div style="text-align: center; color:#0000C8; font-size: 20px">Click <a href="http://www.microsoft.com/en-us/download/details.aspx?id=17851">here</a> to download the .NET Framework 4</div>
  <br />
  <br />

  <div style="text-align: center; color:#00FF00; font-size: 20px"><a class="button" id="downbutton" style="width:115px;margin:0px;white-space:nowrap; word-spacing:0;" href="http://www.gfcf14greendream.com/Programs/SMSSender/SMS Sender.exe">Click here to download SMS Sender</a></div>
  <br />
  <div id='counter' style="text-align: center;"></div>

  <br />

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
  <script type="text/javascript">

    function handleTextFile()
    {
        document.getElementById('counter').style.color = "rgb(0, 255, 0)";
        document.getElementById('counter').style.fontWeight = 'bold';

        var downcounter = 0;

        $.get("http://www.gfcf14greendream.com/counters/smssender.txt", function(data){
            downcounter = data;
            if (downcounter == 1)   $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");   
            else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times..."); 
        });

        $("#downbutton").click( function(){     

            $.get("http://www.gfcf14greendream.com/PHP/smssender.php", function(data){
                $.get("http://www.gfcf14greendream.com/counters/smssender.txt", function(data){
                    downcounter = data;
                    if (downcounter == 1)   $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");   
                    else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times..."); 
                });             
            });
        });

    }

  </script>

</body>
</html> 
```

运行页面后，我使用此代码（上面的一段）读取 txt 文件并获取下载计数（这有效）：

```
var downcounter = 0;

        $.get("http://www.gfcf14greendream.com/counters/smssender.txt", function(data){
            downcounter = data;
            if (downcounter == 1)   $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");   
            else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times..."); 
        }); 
```

然后当点击 downbutton 变量时，这段代码应该执行：

```
$("#downbutton").click( function(){     

            $.get("http://www.gfcf14greendream.com/PHP/smssender.php", function(data){
                $.get("http://www.gfcf14greendream.com/counters/smssender.txt", function(data){
                    downcounter = data;
                    if (downcounter == 1)   $("#counter").text("SMS Sender has been downloaded " + downcounter + " time...");   
                    else $("#counter").text("SMS Sender has been downloaded " + downcounter + " times..."); 
                });             
            });
        }); 
```

，它应该读取一个php文件，其代码是：

```
<?php
    $counter = intval(file_get_contents('/homepages/37/d434704165/htdocs/counters/smssender.txt'));
    $counter++; 
    file_put_contents('/homepages/37/d434704165/htdocs/counters/smssender.txt', $counter);
?> 
```

运行 php 会覆盖 txt 文件“smssender”，从而增加下载次数。我注意到在我的网站上手动输入 php 文件的地址实际上是可行的，并且会发生下载增量。然而，当 JQuery 执行代码时，不会发生增量。我猜它在这条线上，但这里的错误是什么？：

```
$.get("http://www.gfcf14greendream.com/counters/smssender.txt", function(data){ 
```

非常感谢您的任何帮助或建议！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:04:10.517

我认为单独使用 PHP 页面会简单得多。您可以使用 GET 变量来确定是否需要增加下载计数器。例如，在您的 PHP 文件中执行以下操作：

```
<?php
$total = (int)file_get_contents($_SERVER['DOCUMENT_ROOT'] . '/counters/smssender.txt');

if (isset($_GET['i'])) {
    $total++; 
    // now update the file for future use
    file_put_contents($_SERVER['DOCUMENT_ROOT'] . '/counters/smssender.txt', $total);
}

echo $total;
?> 
```

然后您可以在ajax 中自行调用PHP 页面，这样您就不必担心两个调用同时执行并导致错误。现在，当您想要检索当前的下载次数时，您只需调用“smssender.php”即可。此外，当您想要检索当前下载次数并增加文件内容时，您可以调用“smssender.php?i”。

如果您只想增加文件的内容而不回显输出，您可以添加另一个 if 语句，但我不知道这是否是您想要做的。如果是这样，请告诉我，我也可以向您展示代码。我希望这有帮助，如果没有，请告诉我。

更新：只需将您的代码更改为：

Javascript 文件：

```
$.get("/PHP/smssender.php", function(data) {
    $("#counter").text(data);            
});

$("#downbutton").click( function() {     
    $.get("/PHP/smssender.php?i", function(data) {
        $("#counter").text(data);            
    });
}); 
```

PHP 文件：

```
<?php
$total = (int)file_get_contents($_SERVER['DOCUMENT_ROOT'] . '/counters/smssender.txt');

if (isset($_GET['i'])) {
    $total++; 
    // now update the file for future use
    file_put_contents($_SERVER['DOCUMENT_ROOT'] . '/counters/smssender.txt', $total);
}

$suffix = ($total == 1) ? 'time' : 'times';

echo 'SMS Sender has been downloaded ' . $total . ' ' . $suffix . '...';
?> 
```

现在，您可以通过很多方式简化您的 Javascript/jQuery。此代码将具有与您的代码完全相同的行为，没有任何错误。现在，我将解释我所做的更改。首先，您只需使用 $.get() 方法调用单个 PHP 文件，无论您是仅检索当前下载次数还是增加总数。

其次，文本处理在 PHP 文件中完成。您不再确定它是否已在 Javascript 中下载 1 次或多次，而是由 PHP 文件处理，因为它比检索数据并随后进行计算要快得多。

最后，我让下载按钮只调用 $.get() 一次，这样您就不必担心由于尝试同时检索两个不同的页面而导致的错误。尝试用我在上面发布的新代码替换您的代码，并让我知道它是如何为您工作的。

# php - jQuery 选项卡和显示数据库字符串

> ID：14189766
> 
> 赞同：0
> 
> 时间：2013-01-07T04:11:26.893
> 
> 标签：php, jquery, joomla3.0

我正在尝试从页面顶部的 db 调用数据，然后使用 foreach 中的数组信息来填充选项卡中的表。目前我正在使用选项卡 2 进行测试，但我希望它最初显示在选项卡中1 除非用户移动。我不确定在哪里或如何包含数据库查询和结果，以便正确填充。这是我到目前为止所拥有的。

```
{source 0}
<?php
$user =& JFactory::getUser();
    if (!$user->guest)
$name = $user->username;
$db =& JFactory::getDbo();
$query = $db->getQuery(true);
    $query = "
         SELECT image_url, name_test, image_date
         FROM #__image_data
         WHERE user_name = '$name'";
$db->setQuery($query);
echo $name."'s Pets" . "<br/>";

$list = $db->loadObjectList();
    foreach ($list as $item){
}
?>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>jQuery UI Tabs - Simple manipulation</title>
    <link rel="stylesheet" href="/Joomla3/jquery/themes/base/jquery.ui.all.css">
    <script src="/Joomla3/jquery/jquery-1.8.3.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.position.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.core.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.widget.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.mouse.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.sortable.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.button.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.tabs.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.dialog.js"></script>
    <script src="/Joomla3/jquery/ui/jquery.ui.droppable.js"></script>
    <link rel="stylesheet" href="/Joomla3/jquery/demos/demos.css">
    <style>
    #dialog label, #dialog input { display:block; }
    #dialog label { margin-top: 0.5em; }
    #dialog input, #dialog textarea { width: 95%; }
    #tabs { margin-top: 1em; }
    #tabs li .ui-icon-close { float: left; margin: 0.4em 0.2em 0 0; cursor: pointer; }
    #add_tab { cursor: pointer; }
    #sortable1 li, #sortable2 li { margin: 0 5px 5px 5px; padding: 5px; font-size: 1.2em; width: 120px; }
    </style>

    <script>
    $(function() {
        $( "#sortable1, #sortable2" ).sortable().disableSelection();

        var $tabs = $( "#tabs" ).tabs();

        var $tab_items = $( "ul:first li", $tabs ).droppable({
            accept: ".connectedSortable li",
            hoverClass: "ui-state-hover",
            drop: function( event, ui ) {
                var $item = $( this );
                var $list = $( $item.find( "a" ).attr( "href" ) )
                    .find( ".connectedSortable" );

                ui.draggable.hide( "slow", function() {
                    $tabs.tabs( "select", $tab_items.index( $item ) );
                    $( this ).appendTo( $list ).show( "slow" );
                });
            }
        });
    });
    </script>

    <script>
    $(function() {
        var tabTitle = $( "#tab_title" ),
            tabContent = $( "#tab_content" ),
            tabTemplate = "<li><a href='#{href}'>#{label}</a> <span class='ui-icon ui-icon-close'>Remove Tab</span></li>",
            tabCounter = 2;

        var tabs = $( "#tabs" ).tabs();

        // modal dialog init: custom buttons and a "close" callback reseting the form inside
        var dialog = $( "#dialog" ).dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                Add: function() {
                    addTab();
                    $( this ).dialog( "close" );
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
            close: function() {
                form[ 0 ].reset();
            }
        });

        // addTab form: calls addTab function on submit and closes the dialog
        var form = dialog.find( "form" ).submit(function( event ) {
            addTab();
            dialog.dialog( "close" );
            event.preventDefault();
        });

        // actual addTab function: adds new tab using the input from the form above
        function addTab() {
            var label = tabTitle.val() || "Tab " + tabCounter,
                id = "tabs-" + tabCounter,
                li = $( tabTemplate.replace( /#\{href\}/g, "#" + id ).replace( /#\{label\}/g, label ) ),
                tabContentHtml = tabContent.val() || "Tab " + tabCounter;

            tabs.find( ".ui-tabs-nav" ).append( li );
            tabs.append( "<div id='" + id + "'></div>" );
            tabs.tabs( "refresh" );
            tabCounter++;
        }

        // addTab button: just opens the dialog
        $( "#add_tab" )
            .button()
            .click(function() {
                dialog.dialog( "open" );
            });

        // close icon: removing the tab on click
        $( "#tabs span.ui-icon-close" ).live( "click", function() {
            var panelId = $( this ).closest( "li" ).remove().attr( "aria-controls" );
            $( "#" + panelId ).remove();
            tabs.tabs( "refresh" );
        });
    });
    </script>

    <script>
    $(function() {
        var tabs = $( "#tabs" ).tabs();
        tabs.find( ".ui-tabs-nav" ).sortable({
            axis: "x",
            stop: function() {
                tabs.tabs( "refresh" );
            }
        });
    });
    </script>

</head>
<body>
<div id="main_container">
<div id="dialog" title="Tab data">
    <form>
        <fieldset class="ui-helper-reset">
            <label for="tab_title">Title</label>
            <input type="text" name="tab_title" id="tab_title" value="" class="ui-widget-content ui-corner-all" />

        </fieldset>
    </form>
</div>

<button id="add_tab">Add Tab</button>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Main</a></li>
        <li><a href="#tabs-2">Tab 2</a></li>
        <!--<li><a href="#tabs-3">Tab 3</a></li>  // Additional tabs added to the main-->
    </ul>
    <div id="tabs-1">
        <p>Test information.</p>
    </div>
    <div id="tabs-2">
        <ul id="sortable2" class="connectedSortable ui-helper-reset">
            <li class="ui-state-highlight"><img src="http://localhost/Joomla3/myimage.png"></li>
            <li class="ui-state-highlight">
                        <?php"<tr><td>"."<img src='$item->image_url'>" . "<td>" . $item->name_test . "<td>" . $item->image_date ."</td></tr>"?></li>
                    <li class="ui-state-highlight">Item 2</li>
            <li class="ui-state-highlight">Item 3</li> 
            <li class="ui-state-highlight">Item 4</li>
            <li class="ui-state-highlight">Item 5</li>
        </ul>
    </div>
</div>
</div>
</body>
</html>

{/source} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:39:09.883

由于您已经`foreach`为您的数据库数据设置了一个循环，因此可以创建存储在如下变量中的所有 html：

```
$tableHtml='<table id="foo">';
foreach ($list as $item){
   $tableHtml.="<tr><td><img src='".$item->image_url."'><td>" . $item->name_test . "</td><td>" . $item->image_date ."</td></tr>";   

}
$tableHtml='</table'; 
```

然后在你想要表格的页面部分：

```
<?php echo $tableHtml; ?> 
```

# ruby-on-rails - 为什么我不能在太阳黑子搜索中使用“订单”？

> ID：14189767
> 
> 赞同：0
> 
> 时间：2013-01-07T04:11:28.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sunspot

`cached_votes_up`我在 Communities 表中有一个名为的列。现在我想获取按编号排序的记录。

```
@search = Community.search do  
    fulltext params[:search]
    with(:genre_id, params[:genre])
            order_by :cached_votes_up, :desc
    paginate :page => params[:page], :per_page => 5
end 

@communities = @search.results 
```

但这会返回以下错误：

> 没有为名为“cached_votes_up”的社区配置字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:15:26.340

您需要索引`cached_votes_up`对象的属性。`Community`在您的模型中添加这些行：

```
searchable do
  integer :cached_votes_up
end 
```

# python - 基于类视图的 Dajaxice

> ID：14189772
> 
> 赞同：2
> 
> 时间：2013-01-07T04:12:02.507
> 
> 标签：python, django, dajaxice, django-class-based-views

有没有办法使用基于 django 类的视图来使用 dajaxice？我正在尝试这个，但没有太大的成功：

```
class FavoriteEnroledTrainee(SessionMixin, View):

    def get(self, request, *args, **kwargs):
        print 'here'

    @method_decorator(dajaxice_register(method='GET', name='company.favorite'))
    def dispatch(self, *args, **kwargs):
        return super(FavoriteEnroledTrainee, self).dispatch(*args, **kwargs) 
```

我可以看到 dajaxice 能够获取视图，但没有打印任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T15:32:27.563

您不能注册调度方法，因为它不是视图入口点。Dajaxice 将尝试直接调用 dispatch，但这不起作用，因为它不是一个完整的功能视图。

您应该注册 *as_view* 调用的结果：

```
class FavoriteEnroledTrainee(SessionMixin, View):
    def get(self, request, *args, **kwargs):
        print 'here'
favorite_enroled_trainee = dajaxice_register(method='GET', name='company.favorite')(FavoriteEnroledTrainee.as_view()) 
```

# c# - System.Drawing.Printing 在矩形中心对齐中从右到左垂直绘制字符串

> ID：14189775
> 
> 赞同：1
> 
> 时间：2013-01-07T04:12:42.683
> 
> 标签：c#, winforms, printing, system.drawing

我想在指定的矩形（垂直方向）中绘制一个字符串，下面的代码给了我我想要的，但文本流是从左到右，我想要的是从右到左。就像 1 号线在右侧，2 号线在左侧。我也做了转型，但没有运气。

```
 RectangleF tabbor = new RectangleF(0, 0,borHeight, 44.35F);
        StringFormat sf = new StringFormat();
        //if (cmbDir.SelectedItem.Equals("Vertical"))
        //    sf.FormatFlags = StringFormatFlags.DirectionVertical;
        sf.LineAlignment = StringAlignment.Center;
        sf.Alignment = StringAlignment.Center;
        SolidBrush drawBrush = new SolidBrush(Color.Black);
        //Do 180 degree Rotatation Transformation
        ev.Graphics.RotateTransform(90, MatrixOrder.Append);                   
        ev.Graphics.TranslateTransform(xPos+44.35F, yPos, MatrixOrder.Append);                    
        ev.Graphics.DrawString("T", printFont, Brushes.Black, tabbor, sf);
        if (cbPreview.Checked)
            ev.Graphics.DrawRectangle(Pens.Black, Rectangle.Round(tabbor)); 
```

![在此处输入图像描述](../Images/6ddf1f8bfcb6fe9d8939ad6aeae4aec9.png)我正在寻找从上到下的文本（现在它是反向的），从右到左的行位置（这是有效的）

![在此处输入图像描述](../Images/aac5ba2fe9c1b81fb0e3c142bd82194f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:27:56.473

您可以通过进行 180 度旋转变换来实现这一点。检查以下代码

```
 RectangleF tabbor = new RectangleF(0, 0, 44.35F,150.0F);         
        StringFormat sf = new StringFormat();
        sf.FormatFlags = StringFormatFlags.DirectionVertical;            
        String drawString = "First Line Second Line";
        Font drawFont = new Font("Arial", 16);
        SolidBrush drawBrush = new SolidBrush(Color.Black);
        float x = 0F;
        float y = 0F;
        StringFormat drawFormat = new StringFormat();
        drawFormat.FormatFlags = StringFormatFlags.DirectionVertical;
        //Do 180 degree Rotatation Transformation
        ev.Graphics.RotateTransform(180,MatrixOrder.Append);
        ev.Graphics.TranslateTransform(50, 150,MatrixOrder.Append);
        ev.Graphics.DrawString(drawString, drawFont, Brushes.Black, tabbor,sf);               
        ev.Graphics.DrawRectangle(Pens.Black, Rectangle.Round(tabbor)); 
```

# d3.js - d3.js 循环更改多个域，然后更改属性

> ID：14189777
> 
> 赞同：0
> 
> 时间：2013-01-07T04:12:49.547
> 
> 标签：d3.js

我在四个不同的“面板”中有条形图组。我将 xAxis 域全部设置为 100 作为默认值。

```
 var x = new Array(panel.length);
  var xAxis = new Array(panel.length);
  for (var i=0; i<x.length; i++) {
    x[i] = d3.scale.linear()
      .domain([0, 100])
      .range([0, 100]);
    xAxis[i] = d3.svg.axis()
      .scale(x[i])
      .ticks(10)
      .orient("top");
    panel[i].append("g")
      .attr("class", "x axis")
      .call(xAxis[i]);
  } 
```

通过一些鼠标操作，我想改变四个面板的 x 域。所以我做了：

```
var fields = [100, 200, 300, 400];
for (var i=0; i<panel.length; i++) {
    x[i].domain([0, fields[i]]);
    panel[i].selectAll(".x.axis").call(xAxis[i]);
} 
```

然后，当我更改在“面板”中绘制的条形（归类为“条形”）的宽度时，

```
for (var i=0; i<panel.length; i++) {
    panel[i].selectAll(".bar").transition().duration(1000)
      .attr("width", function(d) {
        x[i](d.point);
    });
} 
```

但似乎并非所有 x[] 域都发生了变化。如何在循环中一次更改多个轴的域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:22:36.910

您通常不需要将 for 循环与 d3.js 一起使用，它通常会遍历选择中的所有项目或您提供的数据，但我认为您可能遇到的问题可能与您的使用`i`有关需要在闭包中捕获。您可以通过使用绑定或匿名函数包装您的函数来做到这一点，但我认为您的宽度函数已经将索引作为第二个参数。我需要查看`.bar`引用的内容或您的更多代码以了解更多信息。

这样的事情有帮助吗？

```
for (var i=0; i<panel.length; i++) {
    panel[i].selectAll(".bar").transition().duration(1000)
      .attr("width", (function(xFunc) { 
        return function(d) { xFunc(d.point); }
    })(x[i]));
} 
```

# twitter - twitter.search() 查询在 ipython 中给出错误

> ID：14189783
> 
> 赞同：0
> 
> 时间：2013-01-07T04:13:59.617
> 
> 标签：twitter, ipython, twython

我对 ipython 和 twython 的概念很陌生。但是我想使用 twitter.search 查询检索一些数据。但是当我使用它时，它给了我以下错误

```
In [3]: search_results = twitter.search(q="#india", rpp="50")
---------------------------------------------------------------------------

TwythonError                              Traceback (most recent call last)
/home/vishal/<ipython-input-3-241f789b11cc> in <module>()
----> 1 search_results = twitter.search(q="#india", rpp="50")

/usr/local/lib/python2.7/dist-packages/twython-2.5.5-py2.7.egg/twython/twython.pyc in search(self, **kwargs)
    365         """
    366 
--> 367         return self.get('https://api.twitter.com/1.1/search/tweets.json', params=kwargs)
    368 
    369     def searchGen(self, search_query, **kwargs):

/usr/local/lib/python2.7/dist-packages/twython-2.5.5-py2.7.egg/twython/twython.pyc in get(self, endpoint, params, version)
    236 
    237     def get(self, endpoint, params=None, version='1.1'):
--> 238         return self.request(endpoint, params=params, version=version)
    239 
    240     def post(self, endpoint, params=None, files=None, version='1.1'):

/usr/local/lib/python2.7/dist-packages/twython-2.5.5-py2.7.egg/twython/twython.pyc in request(self, endpoint, method, params, files, version)
    231             url = '%s/%s.json' % (self.api_url % version, endpoint)
    232 
--> 233         content = self._request(url, method=method, params=params, files=files, api_call=url)
    234 
    235         return content

/usr/local/lib/python2.7/dist-packages/twython-2.5.5-py2.7.egg/twython/twython.pyc in _request(self, url, method, params, files, api_call)
    208             raise exceptionType(error_msg,
    209                                 error_code=response.status_code,
--> 210                                 retry_after=response.headers.get('retry-after'))
    211 
    212         # if we have a json error here, then it's not an official TwitterAPI error

TwythonError: 'Bad Request: The request was invalid. An accompanying error message will explain why. This is the status code will be returned during rate limiting. -- An error occurred processing your request 
```

可能是什么问题。是否需要身份验证

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T23:14:45.667

然而，Twitter API v1 搜索不需要身份验证；Twitter 搜索 API 现在**需要**在 v1.1 中进行身份验证。（[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)）

感谢您使用`Twython`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:38:31.663

对我来说，这段代码有效：

```
from twython import Twython

twitter = Twython()
search_results = twitter.search(q="#india", rpp="50")
for tweet in search_results["results"]:
    print "Tweet from@%s Date: %s" % (tweet['from_user'].encode('utf-8'),tweet['created_at'])
    print tweet['text'].encode('utf-8'),"\n" 
```

# eclipse - Eclipse 中的 Grails 2.2.0 支持

> ID：14189786
> 
> 赞同：5
> 
> 时间：2013-01-07T04:14:35.140
> 
> 标签：eclipse, grails, groovy, grails-2.0, grails-controller

我正在尝试使用 eclipse-jee-juno 创建一个 grails 2.2.0 项目。它给了我一个错误

*项目预期的 Groovy 编译器级别与工作区编译器级别不匹配。项目编译器级别为：1.8.X Workspace 编译器级别为 1.7.X 转到项目属性 -> Groovy 编译器来设置此项目的 Groovy 编译器级别。*

**背景**：我已经安装了 grails 2.2.0，并且可以使用**命令**行（不是 eclipse）创建和运行示例项目/控制器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T04:25:01.777

Grails 2.x 需要 groovy 1.8+ 才能工作。在 Eclipse 中，右键单击您的项目，从菜单中选择“属性”并转到 Groovy 编译器，选择 groovy 版本 1.8.xxxx。或者您可以转到“首选项”菜单并更改 groovy 编译器版本的全局设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-08T22:31:28.220

以下是使我能够在 grails 2.2.0 上运行应用程序的步骤。

> 1.  安装**JDK** 7
> 2.  安装**Grails 2.2.0**
> 3.  安装**eclipse-jee-juno**或**GGTS**
> 4.  下载**grails-2.2.0.RC4**
> 5.  在**GRAILS_HOME\lib**下，创建一个目录**com.springsource.springloaded**和一个*子目录springloaded* **-core**
> 6.  **将RC4\lib\org.springsource.springloaded**的内容复制到**com.springsource.springloaded**

*重新启动*GGTS 或 Eclipse。您的 GRAILS 应用程序应该已启动并运行！

# c++ - 如何从 char* 打印字符代码？

> ID：14189790
> 
> 赞同：-8
> 
> 时间：2013-01-07T04:15:05.667
> 
> 标签：c++, escaping, user-input

我从使用的用户输入中获取一个字符[`getchar()`](http://www.cplusplus.com/reference/cstdio/getchar/)，但不是`cout`用于打印我想要打印字符代码的字符，例如用于返回、ESC 等的字符，因此我可以稍后在我的代码中使用`if`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:17:08.753

为此，您可以将 char 转换为 int，

```
int charval = (int) mychar; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T04:16:56.023

> 所以我可以稍后在我的代码中使用 if 来检查。

您不需要为此明确地将其转换为 int 。

```
if(getchar() == char_code)
doSomething(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T04:19:28.420

`printf("%d\n", c);`将显示字符代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T04:18:33.917

将 char 转换为 int 并打印 int 值。

# php - 用php编码html

> ID：14189795
> 
> 赞同：0
> 
> 时间：2013-01-07T04:15:49.753
> 
> 标签：php, html, mysql

我有一个问题。**我在mysql**数据库中有一个列

```
<p><strong>WELCOME</strong></p>
<p><strong>About Me</strong> 
```

现在我想在我的 php 页面中获取它。但是当我获取时，它不显示粗体文本，只显示普通文本。我在用

```
html_entity_decode($content,0,1649)."..."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:27:41.900

听起来正在发生的事情是您有一些其他代码在输出 HTML 之前转义您的数据。

在大多数情况下，这是一件**好事。**您不希望带有`<script>`标签的 HTML 以及用户数据中不允许的内容。`<`如果有的话，你不想`>`被误解。

但是，如果您确实想允许 HTML，则需要修改输出 HTML 的任何内容，以免转义此特定变量。

# php - 图片库，预加载与 AJAX

> ID：14189799
> 
> 赞同：8
> 
> 时间：2013-01-07T04:16:23.590
> 
> 标签：php, jquery, ajax, image, preload

嘿，我正在尝试制作一个图片库，但我不知道是否应该在页面加载时加载所有图片，还是让 ajax 在新图片显示在画廊之前请求它们？

下面的示例显示我正在查看第二个图像并加载了 2 个隐藏图像，而图像 5 正在通过 ajax 请求加载。我想如果我在正在查看的图像和正在加载的图像 ajax 之间保留两个加载的图像，用户不应该观看图像加载

```
 Image Gallery (Viewing Single Image)
   1        2      3       4       5
+-------+-------+-------+-------+-------+
|       |Loaded |       |   *   |Loading|
|Loaded |  On   |Loaded |Loaded | AJAX  |
|Hidden | Show  |Hidden |Hidden |Request|
+-------+-------+-------+-------+-------+ 
```

我没有在本地主机上使用 ajax，所以不知道它与仅加载页面图像并隐藏它们相比具有什么样的性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:45:06.220

您通常可以依靠浏览器缓存来快速加载图像。我发现这样做的一种非常可靠的方法是：

```
$("<img>").attr('src', imageSrc); 
```

这会创建一个图像元素，不会将其附加到 DOM，但浏览器仍会下载图像并缓存它。有了它，您可以附加您创建的图像元素或使用具有该图像源的新图像元素，并且不应该有加载延迟。

我不确定你用ajax加载是什么意思。由于 ajax 请求与任何其他请求没有任何不同，因此使用“ajax”和“仅加载”图像之间不应该存在性能差异。如果您使用脚本以某种方式加载图像，服务器上可能会有一些开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T13:21:09.557

最终，在 HTML 解析时加载、使用 javascript/jquery 预加载或使用 ajax 需要相同的时间，尤其是在图像很大的情况下（如果不是，你不会问？）。

系统必须打开连接，对文件发出 GET 请求，然后文件通过网络传输。如果它被缓存，则不会重新传输。网络传输是瓶颈，不同的加载方法不会改变这一点。

您将通过两种方式影响用户的等待时间：

*   减小媒体的大小，例如使用缩略图、巧妙地压缩、重用大文件以便利用缓存...

*   仔细考虑图像加载的时间，这就是图像预加载（无论有没有 AJAX，都是一样的）所做的。可能无法确切知道何时开始加载图像，因此用户不会等待。按照您的建议，提前加载三张图像对我来说听起来不错。用户可能偶尔会等待，但更多是多余的。

对于幻灯片放映，您可以有一个数组来回忆哪些图像被卸载、作为缩略图或完全加载，这将确保您不会发出不必要的重复请求。

我并没有真正给你一颗灵丹妙药......没有，但我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T09:28:54.900

我已经遇到过这种情况，我也采取了两个样本找到解决方案

基本上对于基本图像 [缩略图图像] 加载，您可以对页面使用延迟加载

对于加载大图像或主图像，您可以将缩略图图像加载到其中，然后您可以编写将大图像加载到其中的代码。

```
$('#GalleryImage img.mainImage').load(function() {  
  $(this).attr('src',$(this).attr('src').replace('thumb','large'));
}); 
```

愿这对你有帮助

# android - 什么时候激活surfaceChanged？

> ID：14189800
> 
> 赞同：6
> 
> 时间：2013-01-07T04:16:29.720
> 
> 标签：android

在[开发人员教程](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html)中，它写道：在对表面进行任何结构更改（格式或大小）后立即调用它。此时您应该更新表面中的图像。此方法总是至少调用一次，之后

我不知道什么情况是指结构变化。屏幕方向如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T04:30:53.340

当视口的大小改变或首次创建时调用该方法。

如果屏幕从垂直旋转到水平，视口的大小可能会发生变化，因此您应该重置视​​口和投影矩阵。

有关更多信息，请参阅此博客文章：

[http://android-developers.blogspot.in/2009/04/introducing-glsurfaceview.html](http://android-developers.blogspot.in/2009/04/introducing-glsurfaceview.html)

# java - 使用谷歌协议缓冲区传输字符串字符时，代码混乱

> ID：14189808
> 
> 赞同：3
> 
> 时间：2013-01-07T04:17:23.010
> 
> 标签：java, protocol-buffers

在调试视图中：

这是编码成混乱字符串的代码......

```
((S2CEnterCollection)objS2c).toByteString().toStringUtf8(); 
```

输出：

```
 ���"default(
    ���"default(
    ���"default(
    ���"default(
    ���"default(
    ����"default(
    ����"default(
    �����"default( 
```

这是具有正确字符串的代码：

```
((S2CEnterCollection)objS2c).toString() 
```

原来的字符串是：

```
 cardList {
      cardId: 100001
      liked: 100
      number: 10
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100002
      liked: 123
      number: 10
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100003
      liked: 543
      number: 10
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100004
      liked: 766
      number: 10
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100005
      liked: 78
      number: 10
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100006
      liked: 89
      number: 123
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100007
      liked: 199
      number: 567
      finder: "default"
      rank: 1
    }
    cardList {
      cardId: 100008
      liked: 90909
      number: 232
      finder: "default"
      rank: 1
    } 
```

那么，有人知道它是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T08:11:09.843

protobuf 数据是二进制的，不是编码文本。您不能通过 UTF-8 之类的编码运行它并期望得到一个字符串（或期望它仍然有效）。将 protobuf 数据转换为字符串的唯一方法是通过 base-N 编码对某些 N 运行它，通常为 64（因为它在大多数平台上都得到了很好的支持）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T05:07:42.537

那个凌乱的字符串可能是绝对正确的。问题是：您假设它是人类可读的字符串，但事实并非如此。toByteString()，我引用：

```
Serializes the message to a ByteString and returns it. This is just a trivial wrapper around writeTo(CodedOutputStream). 
```

[https://developers.google.com/protocol-buffers/docs/reference/java/index](https://developers.google.com/protocol-buffers/docs/reference/java/index) - 寻找 MessageLite。

它是您可以用来通过网络传输的那种格式，或者您可以存储在具有数百万条记录的文件中的某种格式。它并不是人类可读的——它是一种相对较小的机器可读表示。因此，它会使用标签标识符（小数字）而不是字段名称、可变长度编码和各种其他技巧来最小化大小，但会牺牲可读性。

[https://developers.google.com/protocol-buffers/docs/encoding](https://developers.google.com/protocol-buffers/docs/encoding)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-08T18:19:59.863

我更喜欢使用 Google 自己的 com.google.protobuf.TextFormat 类，该类使用它的“打印”方法构建 Protobuf 对象内容的人类可读表示。在下面的示例中，PayloadContent 可以是任何消息：

```
PayloadContent pc = PayloadContent.newBuilder().setContent........build();
String text = TextFormat.shortDebugString(pc); 
```

但是，如果您想查看“字节”格式，请务必将 ByteString 表示形式转换为 Base64 - 但这对人类阅读没有多大用处:)

# pear - 通过 PEAR 在 OSX 上使用 PHPDoc

> ID：14189822
> 
> 赞同：0
> 
> 时间：2013-01-07T04:19:02.137
> 
> 标签：pear, phpdoc

我正在运行 OS 10.8.2（Mountain Lion）。

正如此博客所述，我重新安装了 PEAR：

[http://clickontyler.com/blog/2008/01/how-to-install-pear-in-mac-os-x-leopard/](http://clickontyler.com/blog/2008/01/how-to-install-pear-in-mac-os-x-leopard/)

所以我`include_path`在我的`php.ini`文件中设置为`/usr/local/share/pear`. 然后我通过 pear 安装了 apigen，一切正常。然后我想安装phpdoc，但是安装后，我收到以下错误：

```
PHP Warning:  require(/usr/lib/php/pear/phpDocumentor/src/phpDocumentor/Bootstrap.php): failed to open stream: No such file or directory in /usr/bin/phpdoc on line 33
PHP Fatal error:  require(): Failed opening required '/usr/lib/php/pear/phpDocumentor/src/phpDocumentor/Bootstrap.php' (include_path='.:/usr/local/share/pear') in /usr/bin/phpdoc on line 33 
```

在 SO 上搜索后，我发现这个 QA: [PhpDocumentor installed via PEAR on OSX not working - 缺少文件？](https://stackoverflow.com/questions/871038/phpdocumentor-installed-via-pear-on-osx-not-working-missing-files/872362#872362)

所以，当我这样做时，`pear config-show`它表明我`php_dir`的设置`/usr/local/share/pear`正是我的 php.ini 中设置的

但是，似乎 phpdoc 仍在尝试`/usr/lib/php/pear`用作目录。

**文件`/usr/lib/php/pear`夹不存在！**因此，如果我将 pear 配置更改为此文件夹，它将破坏我其他 pear 安装的命令。

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:01:31.470

当我找到解决方案时，我正要放弃。

OS X 使用的是 PHP 5.3，所以我手动将其更新为 5.4.10。

然后，我重新安装`PEAR`，然后重新安装，然后重新`apigen`安装`phpdoc`，一切正常。

要在我的系统上更新 PHP，我遵循以下步骤：http: [//mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/](http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/)

# iphone - 视图加载期间iOS 6中的设备方向处理？

> ID：14189828
> 
> 赞同：2
> 
> 时间：2013-01-07T04:19:31.257
> 
> 标签：iphone, ios, ipad, ios6

我有一个标签栏应用程序。我使用的是 XCode 4.3.3。我已经用 iOS6 的东西升级到 4.5.2。

我在`shouldAutorotateToInterfaceOrientation`每个视图中的代码将检查当前设备方向并正确放置所有 UI 组件。

但是升级到 iOS 6 后，这段代码没有执行。我已经尝试了将近一天来解决这个问题，但没有运气。

我也试过

```
UIDeviceOrientation interfaceOrientation = [[UIDevice currentDevice] orientation]; 
```

在`viewLoad`, `viewDidLoad`,`viewWillAppear`

如果我想在视图加载期间检查方向并在视图加载期间将 UI 组件放置到适当的位置，我应该怎么做。请提出您的建议。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-07T12:10:18.963

如果你想检查哪个是当前方向，那么你只需在下面的 prifix.pch 中写入

```
 #define isPortrait [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortrait || [[UIApplication sharedApplication] statusBarOrientation] == UIInterfaceOrientationPortraitUpsideDown 
```

然后在你想检查方向的地方，写下如下的条件

```
 if(isPortrait)
    {
       //portrait mode....
    }
    else
    {
       //landscape mode....
    } 
```

让我知道它是否有效...

快乐编码！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T04:33:55.320

要在 ios6 中检查方向，您必须编写以下方法，并且在 info.plist 中，您必须定义您想要的方向...

让我知道它是否有效！

快乐编码！！！！

```
 - (BOOL)shouldAutorotate{
     return NO;
   }

   - (NSUInteger)supportedInterfaceOrientations{
      return UIInterfaceOrientationMaskPortrait;//you can write here which ever orientation you want..
   } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T05:06:37.763

您可以这样管理 Orientation：-

```
-(BOOL)shouldAutorotate
{
    return YES;
} 
```

并每次检查`ViewWillApear`设备方向，例如：-

```
- (void)willRotateToOrientation:(UIInterfaceOrientation)newOrientation {
        if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
        {
            if (newOrientation == UIInterfaceOrientationLandscapeLeft || newOrientation == UIInterfaceOrientationLandscapeRight) {

              //set your landscap View Frame
                [self supportedInterfaceOrientations];

            }

        }
        else if (UIDeviceOrientationIsPortrait([UIDevice currentDevice].orientation))
        {
            if(newOrientation == UIInterfaceOrientationPortrait || newOrientation == UIInterfaceOrientationPortraitUpsideDown){
      //set your Potrait View Frame
                [self supportedInterfaceOrientations];

            }
        }
        // Handle rotation
    }

    -(void)viewWillAppear:(BOOL)animated
    {
        [self willRotateToOrientation:[[UIDevice currentDevice] orientation]];  
        [super viewWillAppear:YES];
    } 
```

**更新**

很可能人们使用下面这样的检查设备`orientation`将这条线放入`ViewWillApear`：-

```
[[UIApplication sharedApplication] statusBarOrientation];
    [[UIDevice currentDevice] orientation];
    [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(deviceRotated:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

和

```
-(void)deviceRotated:(NSNotification*)notification
{

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight)
    {
        //Do your stuff for landscap
    }
    else if(orientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
      //Do your stuff for potrait

    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-24T16:13:03.780

在 viewDidLoad 方法中，您需要检查是否相同，因此您需要编写代码，除非它可能会影响视图，如果它不在纵向上。

# java - java中创建字符串对象

> ID：14189829
> 
> 赞同：6
> 
> 时间：2013-01-07T04:19:38.780
> 
> 标签：java, string

> **可能重复：**
> [关于 Java 字符串池的问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)

我对 java Strings 对象的创建有疑问。

```
String s1 = "Hello"+"world";
String s2 = s1+"Java"; 
```

在这个程序中，将创建多少个 String 对象以及如何创建？请解释一下。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T04:22:02.177

答案是 3

每次 JVM 启动都会创建两个 String 对象：

*   “你好世界”
*   “爪哇”

两者都将被[interned](http://en.wikipedia.org/wiki/String_interning)，因为它们是常量（在编译时已知）。

每次运行此代码时，它们都会被重用。将创建一个 StringBuilder 来连接上面的两个 String。对它们的引用将分配给 s1 和 s2。

这是代码的字节码：

```
 0:   ldc #37; //String Helloworld
   2:   astore_1
   3:   new #39; //class java/lang/StringBuilder
   6:   dup
   7:   aload_1
   8:   invokestatic    #41; //Method java/lang/String.valueOf:(Ljava/lang/Object;)Ljava/lang/String;
   11:  invokespecial   #47; //Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
   14:  ldc #50; //String Java
   16:  invokevirtual   #52; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
   19:  invokevirtual   #56; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
   22:  astore_2
   23:  return 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-07T04:23:57.960

您不能真正说出`String`创建了多少个 s，因为由于 JVM 的不同实现而存在一些差异。

作为`String`一个不可变的类，天真的答案是 5。但是经过一些优化（例如，使用`StringBuffer`/ `StringBuilder`只会有 2`String`秒。

因为 concats 将通过 -calls 进行汇总`append()`。

编辑：因为这里有一些不同的答案，所以我说 5 的解释：

1.  “你好”

2.  “世界”

3.  (s1) “你好世界”

4.  “爪哇”

5.  (s2) “HelloworldJava”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T04:27:41.813

如果你看编译后的代码，你可以很容易地猜到：

```
String s1 = "Helloworld";
String s2 = (new StringBuilder(String.valueOf(s1))).append("Java").toString(); 
```

我们不能仅仅通过查看源代码来准确地知道，因为许多优化都是由编译器在执行之前完成的。

在这里，我们看到为 s1 创建了 1 个 String 对象，为 s2 创建了另一个 String 对象。字符串池中有 2 个字符串文字：“Helloworld”和“Java”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-07T04:27:04.553

如果你反编译你的 Program.class 你会看到真正的代码

```
String s1 = "Helloworld";
String s2 = (new StringBuilder(String.valueOf(s1))).append("Java").toString(); 
```

似乎有 10 个对象，因为在每个 String 内部都有`char[] value`一个单独的对象 + StringBuilder 内部的另一个 char[]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T07:36:07.250

答案是3。

您可以通过以下方式查看反汇编结果：

```
javap -verbose YourClass 
```

常量池包括：

```
...
const #17 = Asciz       Helloworld;
...
const #30 = Asciz       Java;
... 
```

这意味着两个字符串（“Helloworld”和“Java”）是编译时常量表达式，将自动被嵌入常量池中。

编码：

```
Code:
 Stack=3, Locals=3, Args_size=1
 0:   ldc     #16; //String Helloworld
 2:   astore_1
 3:   new     #18; //class java/lang/StringBuilder
 6:   dup
 7:   aload_1
 8:   invokestatic    #20; //Method java/lang/String.valueOf:(Ljava/lang/Object;)Ljava/lang/String;
 11:  invokespecial   #26; //Method java/lang/StringBuilder."<init>":(Ljava/lang/String;)V
 14:  ldc     #29; //String Java
 16:  invokevirtual   #31; //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
 19:  invokevirtual   #35; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
 22:  astore_2
 23:  return 
```

它表示 s2 是由 StringBuilder.append() 和 toString() 创建的。

为了让这更有趣，javac 可以优化常量折叠中的代码。您可以猜测以下代码创建的字符串的数量：

```
final String s1 = "Hello" + "world";
String s2 = s1 + "Java"; 
```

“final”表示 s1 是常量，可以帮助 javac 构建 s2 和实习生 s2 的值。所以这里创建的字符串数是 2。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-07T04:34:07.483

是的，将创建五个 String 对象。字符串是不可变的；以下是步骤 - 1\. 首先是“Hello” 2\. 然后是另一个对象“Hello World” 3\. 然后是另一个对象“Java” 4\. 然后是 s1+“Java”，最后是 s2。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-07T04:24:44.090

实际上，不会只创建两个 String 字面量的 String 对象。当字符串像你一样被初始化时，它们是文字而不是对象。如果您想创建 String 对象，您将执行以下操作

```
String a = new String("abcd"); 
```

# ruby-on-rails - 创建表单以更新关系表和模型表

> ID：14189847
> 
> 赞同：0
> 
> 时间：2013-01-07T04:22:37.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, has-many-through

我有 3 个模型：

*   事件
*   小贩
*   供应商关系

通过这种关系，每个活动都有多个供应商。

现在我想在 /events/1/add_vendors 创建一个创建关系并创建供应商模型的表单。

我该怎么做呢？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:17:32.070

确保您的`Event`模型看起来像这样：

```
attr_accessible :vendor_relationships, :vendor_relationships_attributes
has_many :vendor_relationships
has_many :vendors, :through => :vendor_relationships

accepts_nested_attributes_for :vendor_relationships 
```

你的`VendorRelationship`模型看起来像这样：

```
attr_accessible :vendors, :vendors_attributes
has_many :vendors

accepts_nested_attributes_for :vendors 
```

在你的`EventController`：

```
@event = Event.new(params[:event]) 
```

在您的创建视图中，类似于：

```
<% form_for Event.new do |f| %>
  <%= f.text_field, :field_for_the_event %>
  <% f.fields_for :vendor_relationships do |rf| %>
    <%= rf.text_field, :price_maybe? %>
    <% rf.fields_for :vendor do |vf| %>
      <%= vf.text_field, :name_and_so_on %>
    <% end %>
  <% end %>
<% end %> 
```

这是一种方式。另一个可能更好的用户体验是允许从现有供应商中选择供应商或创建新供应商。Create new 将 ajax 创建到 VendorController，并在创建时将供应商的信息返回到表单。保存关系将调用创建 vendor_relationship 并显示结果。

希望这会让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:25:49.533

```
# routes.rb

resources :events do
  resources :vendors, :path_names => { :new => 'add_vendors' }
end

# vendors_controller.rb

before_filter :load_event
before_filter :load_vendor, :only => [:edit, :update, :destroy]

def load_vendor
  @vendor = (@event ? @event.vendors : Vendor).find(params[:id])
end

def load_event
  @event = params[:event_id].present? ? Event.find(params[:event_id]) : nil
end

def new
  @vendor = @event ? @event.vendors.build : Vendor.new
  ...
end

def create
  @vendor = @event ? @event.vendors.build(params[:vendor]) : Vendor.new(params[:vendor])
  ...
end

def edit
  ...
end

def update
  ...
end

def destroy
  ...
end

# View form

<%= form_for([@event, @vendor]) do |f| %>
  ...
<% end %> 
```

# android - 加载 Eclipse 时出错（无法运行任何 android 应用程序）

> ID：14189848
> 
> 赞同：0
> 
> 时间：2013-01-07T04:22:53.757
> 
> 标签：android, eclipse, eclipse-plugin, eclipse-adt

昨天我将我的 android sdk 更新为 api 17。现在 eclipse 的启动显示错误（图 1）![eclipse id 启动时](../Images/b3307054e4c0b30a376312ccf93bc557.png)

我试图检查更新，但它不允许。

我还优先提到了我的 android sdk 路径，但它还说“优先考虑的 Android SDK 路径”

当我尝试运行它显示的任何应用程序时（image2）![运行任何应用程序时](../Images/b891b6683e27129369b0f9a52dd1ba7f.png)

当我尝试将我的 adt 20 更新为 21 时，也会出现错误（图 3） ![在此处输入图像描述](../Images/f7eff13b9308a045c5201a9224818c16.png) 请帮助我。正因为如此，我无法继续前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:26:44.437

要配置 SDK，请转到`Windows>>Preferences>>Android`并放置您的 SDK 位置 示例位置是`C:\Android\android-sdk-windows` 我想这可以解决您的问题

如果您已经安装了 SDK，请更新 SDK 转到`Help>>Check for updates`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:38:45.720

正如它所说，您当前的 ADT 插件是 20.0.3。对于 API 级别 17，您需要版本 21.xx。

所以，要解决这个问题，打开 eclipse->help->install new software 然后选择 ADT plugin。它将显示最新的 ADT 版本。单击下一步并继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T05:01:20.820

我认为最简单的解决方案就是删除您的 SDK，然后重新[下载 bundle](http://developer.android.com/sdk/index.html)。

# wpf - 同一对象的 MVVM 多个演示文稿？

> ID：14189849
> 
> 赞同：2
> 
> 时间：2013-01-07T04:22:54.707
> 
> 标签：wpf, mvvm

我需要以不同的方式呈现一个对象，两次。

1.  作为 TreeView 中的节点（导航/重命名）
2.  作为 2 个文本框（重命名/编辑内容）

```
public class Item
{
    public string Name{get;set;}
    public string Content{get;set;}
} 
```

我的第一个解决方案是保持简单：

```
public class MainViewModel
{
    // collection of items (treeview navigation)
    public BindingList<ItemViewModel> Items{get;set;}

    // selected item (from treeview navigation)
    // used for textbox edit
    public ItemViewModel SelectedItem{get;set;}
}

public class ItemViewModel
{
    // Used for treeview navigation
    public bool IsSelected{get;set;}
    public bool IsExpanded{get;set;}
    public bool IsInEditNameMode{get;set;}
    public BindingList<ItemViewModel> Children{get;set;}
    public void BuildChildren();

    // Used for treeview display/rename
    // Used for textbox display/rename
    public string Name{get;set;}

    // Used for textbox edit
    public string Content{get;set;}
} 
```

这在一段时间内效果很好。但是随着应用程序变得越来越复杂，视图模型变得越来越“污染”。

例如，为同一个视图模型添加额外的展示（高级属性、图表表示等）

```
public class ItemViewModel
{
    // Used for Advanced properties
    public BindingList<PropertyEntry> Properties {get;set;}
    public PropertyEntry SelectedProperty{get;set;}

    // Used for graph relationship
    public BindingList<ItemViewModel> GraphSiblings{get;set;}
    public bool IsGraphInEditNameMode{get;set;}
    public bool IsSelectedGraphNode {get;set;}
    public void BuildGraphSiblings();

    // Used for treeview navigation
    public bool IsNavigationInEditNameMode{get;set;}
    public bool IsSelectedNavigationNode{get;set;}
    public bool IsExpandedNavigationNode{get;set;}
    public BindingList<ItemViewModel> NavigationChildren{get;set;}
    public void BuildNavigationChildren();

    // Used for treeview display/rename
    // Used for textbox display/rename
    // Used for graph display
    // Used for Advanced properties display
    public string Name{get;set;}

    // Used for textbox edit
    public string Content{get;set;}
} 
```

目前，我仍在为多个演示文稿使用单个视图模型，因为它使所选项目在所有演示文稿中保持同步。

此外，我不必不断重复属性（名称/内容）。

最后，PropertyChanged 通知有助于更新项目的所有表示（即，更改导航中的名称会更新 TextBox/Graph/Advanced 属性/等）。

然而，它也感觉像是违反了几个原则（单一责任、最小特权等）。

但我不太确定如何重构它，无需编写大量代码来保持同步/属性通知工作/在每个新视图模型/等中复制模型的属性）

我想知道的：

**如果由你决定，你会如何解决这个问题？**

目前，一切仍在正常工作。我只是觉得代码可以进一步改进，这就是我需要帮助的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:30:02.903

如何使用继承？拥有一个 basic `ItemViewModel`，然后将其子类化以创建一个`TreeViewItemViewModel`，您可以在其中添加与子类中此项的树视图呈现相关的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T11:00:38.420

我们能，

1.  尝试从 ItemViewModel 类中分离出各种特定于视图的行为。
2.  在单独的类（行为类）中放置/封装视图特定的行为。

这使您可以在运行时灵活地实例化/注入/切换行为。是的，尝试使用策略模式来制作更简洁、单一负责、易于维护的代码。

# c# - 无法通过代码隐藏在用户控件中访问 GridView 事件

> ID：14189851
> 
> 赞同：0
> 
> 时间：2013-01-07T04:23:13.300
> 
> 标签：c#, asp.net, user-controls, code-behind, webusercontrol

**IpInterfaceUC 用户控制**

```
<div id="dvChannel" runat="server">
        <asp:GridView ID="gvChannelUC" 
            OnRowCommand="gvChannelUC_RowCommand"
            OnSelectedIndexChanged="gvChannel_SelectedIndexChanged"
        />
</div> 
```

**IPServices 页面 CodeBehind**

```
if (!IsPostBack){
}else
{    
 string str_btn = Request.Form.Keys[Request.Form.Keys.Count - 1].ToString();
 handleClick(str_btn);
} 
```

**问题**

它总是显示**str_btn**为null。如果我单击Button，它将显示按钮的id。但是当我在GridView单击Select时，它显示**str_btn**为null。当我们单击select时应该显示GridView的id。

感谢您的任何解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:37:08.583

尝试`name`为您的 gridview 赋予属性，即`name="yourGridName"`.

```
<div id="dvChannel" runat="server" name="yourGridName">
        <asp:GridView ID="gvChannelUC" name="yourGridName"
            OnRowCommand="gvChannelUC_RowCommand"
            OnSelectedIndexChanged="gvChannel_SelectedIndexChanged"
        />
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T05:12:40.323

据我了解，您需要在页面/代码隐藏（.aspx）上处理网格事件（.ascx）。

在 userControl 中声明事件处理程序

```
 public event EventHandler<EventArgs>  RaiseSelectedIndexChanged=delegate {}; 
```

处理 userControl.cs 中的 userControl selectedindexchanged 事件

```
 protected void gvChannel_SelectedIndexChanged(object sender, EventArgs e)
    {
        var raiseSelectedIndexChanged = RaiseSelectedIndexChanged ;
        if(raiseSelectedIndexChanged!=null)
        {
            raiseSelectedIndexChanged(sender, e);
        }
    } 
```

在 aspx 中注册并使用您的 userControl（我希望您已经这样做了）此代码将进入 aspx 页面

```
 <uc:userControl OnRaiseSelectedIndexChanged="OnRaiseSelectedIndexChanged"/> 
```

在 aspx 代码后面处理事件

```
 protected void OnRaiseSelectedIndexChanged(object sender, EventArgs e)
    {
       //handle your event and put logic 
    } 
```

我希望我说清楚，如果它让你感到困惑，请告诉我。

# web-services - 最大化代码重用的 MVC Web 服务 + Web 应用程序设计

> ID：14189859
> 
> 赞同：0
> 
> 时间：2013-01-07T04:23:57.873
> 
> 标签：web-services, model-view-controller, design-patterns, yii

我正在使用 PHP MVC 框架（Yii，但我的问题可能适用于大多数 MVC 框架）来创建一个应该包含 Web 应用程序（网站）和 RESTful Web 服务的项目。我正面临如何在逻辑上分离应用程序和服务逻辑的早期设计决策。以下是一些真实的事实：

*   Web 应用程序和 Web 服务将共享许多功能，并且仅在呈现格式（`View`与 JSON）上有所不同...
*   ...但是，Web 应用程序和 Web 服务将具有一些独特的功能（即，Web 应用程序会做一些服务不会做的事情，反之亦然）

以下是我的愿望：

*   我想尽可能地分享通用功能的实现
*   我不希望`Controller`由于结合了 Web 服务/Web 应用程序逻辑而变得笨拙
*   我对创建单独的 Web 服务和 Web 应用程序控制器*有点*`Action`反感，尤其是当它们在s 中重叠时（除了呈现的格式）
*   除非确实是必要的设计决策，否则我不希望网站使用 Web 服务；我将失去许多使用数据库接口的内置功能和/或必须`IDataSource`通过将其连接到 Web 服务来创建符合可用和其他此类接口的类；也可能会有轻微的性能下降。

我考虑了一下，并在下面提出了一些解决方案。请让我知道您认为哪些可以满足我的需求*，或者*如果我的需求不合理/适得其反，请告诉我。

1.  `WebApp`为和实现完全独立的控制器`WebService`（将两者模块化，使它们不共享代码）
2.  `WebApp`为and实现单独的控制器`WebService`，但创建完成繁重工作的方法并调用这些方法来共享实现 - 例如，如果我想做 a`item/findBySomeCrazyCriteria`我会根据 URL 路由到适当的控制器，但每个控制器都会引用一些`FindItemsBySomeCrazyCriteriaFunction()`定义的别处。
3.  让 Web 应用程序使用 Web 服务（这需要我扩展服务的计划功能）
4.  为两者实现一个控制器`WebApp`和`WebService`，它从一个`BaseController`包含用于`REST`类型东西的通用钩子的扩展，并在必要时使用覆盖
5.  还要别的吗

虽然我的问题与 Yii 有关，但我觉得这在过去对许多开发人员来说一定是有过的。我想知道你做了什么/你建议继续前进。我担心如果我选择了错误的方法，我会“破坏 MVC”或者以后会后悔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:28:39.627

> [**注意：**您不必担心“破坏 MVC”。既然你选择了使用 Yii，那部分已经发生了。]

问题的根源在于您的控制器做了很多事情（因此违反了[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）。您所谓的“控制器”实际上还包含应用程序逻辑（应该是模型层的一部分）和 UI 逻辑（通常是视图实例的一部分）。

您应该拥有一个应用程序，具有一个模型层和两个表示（您称为“Web 应用程序”和“Web 服务”）。控制器应该是可能的。

您应该将应用程序逻辑移动到[服务层](http://martinfowler.com/eaaCatalog/serviceLayer.html)，然后表示层将通过该服务层与模型进行交互。你最终会得到一个更轻的控制器。然后，您可以为您的项目需要的每个演示文稿提供一组单独的控制器/视图，而无需重复或少量重复代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:35:11.090

我建议不要编写多个控制器。将域逻辑保留在模型中而不是控制器中是一个更好的选择。您的控制器应仅充当逻辑的网关，并以客户端请求的任何形式为它们提供服务，例如。作为 JSON 编码的响应或通过视图。最好只保留识别客户需求的任务，并在从模型中获得结果后以适当的形式翻译响应。

这个流程可以通过合适的助手和一个良好实现的路由子系统来简化，这样客户需求的检测就变得不费力了。

例如。`/user/subscriptions.html`将获取一个 html 页面，`/user/subscriptions.json`并将获取一个 JSON 响应。

# c++ - 跨平台字符串类实现良好模型可移植性的“最佳实践”是什么？

> ID：14189864
> 
> 赞同：4
> 
> 时间：2013-01-07T04:24:41.190
> 
> 标签：c++, string, macos, cross-platform, unicode-string

关于跨平台Unicode字符串使用的主题有无数的讨论线程，但似乎有广泛的意见，没有解决一些在我正在从事的特定项目中一直困扰我的具体问题：

我有一个可以追溯到近 20 年的大型跨平台 C++ 代码库。它包含各种字符串实现方式的大杂烩，包括：

*   `char*`
*   帕斯卡风格的字符串
*   `std::string`
*   几个具有重叠功能的自定义跨平台类
*   `CFString`
*   各种常量字符串

该代码库正在重写以完全使用 Unicode 字符串并实现强大的 MVC 架构，希望该模型将完全可移植（Mac OS / IOS / Android / Windows 7 & 8 / Unix）。

虽然持久性数据被编写为 XML/UTF-8，但在运行时对象中的字符串使用方面存在一些困境：

1.  我想创建一个干净地隐藏存储、分配和常见字符串操作的实现的类。通过 C++ 运算符和赋值重载的奇迹，我希望能够替换一个类实例来替换函数可以接受的所有不同的字符串参数。这将允许代码库的增量转换。

2.  我们一直在扫描/解析/分析字符串，我担心对持久对象使用严格的 UTF-8 底层实现可能会出现性能问题。如果不是，那么在微软的 VC++ 和 GNU 的 G++ 中发现的现代 std::string 会是一个简单的底层实现吗？

3.  Mac OS / IOS 版本最终需要将其字符串“转换”为 CFString。CF 功能丰富且高度优化。我认为通过为 CF 提供缓冲区（例如，`CFStringCreateWithCharactersNoCopy`或`CFStringCreateMutableWithExternalCharactersNoCopy`）让我自己的类创建 CFStrings 将是一个很好的策略。似乎这可以减少从模型中获取数据后 CFString 通常需要的转换/分配量——尽管可能在适当的 MVC 实现中，控制器/视图不应该访问模型拥有的实际字符串？

4.  C++ 11 是否会改变这些跨平台字符串问题的情况？

我猜想这些问题早就应该解决了——但是从查看本网站（和其他网站）上的回复来看，我看不出它已经解决了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T06:07:43.237

> 我想创建一个干净地隐藏存储、分配和常见字符串操作的实现的类。通过 C++ 运算符和赋值重载的奇迹，我希望能够替换一个类实例来替换函数可以接受的所有不同的字符串参数。这将允许代码库的增量转换。

听起来像`std::string`添加了演员运算符 to `const char*`，因此您不必调用`c_str()`. 这意味着您必须使用`char`UTF-8 进行存储，而不是 UTF-16 或类似的。

> 我们一直在扫描/解析/分析字符串，我担心对持久对象使用严格的 UTF-8 底层实现可能会出现性能问题。如果不是，那么`std::string`在 Microsoft 的 VC++ 和 GNU 的 G++ 中发现的现代会是一个简单的底层实现吗？

这取决于其他几个因素。一方面，如果您的输入包含大量非 ascii 数据并且您必须一次分析一个代码点，则 UTF-8*可能效率低下。*在这种情况下，UTF-16 甚至 UTF-32 可能更合理，因为从多个字符串元素重新组合代码点时不会有那么多大小写区别。另一方面，性能很大程度上取决于您是否可以通过引用传递字符串或必须创建副本，尤其是在调用函数时。因此，为了避免过多的副本，可能需要对现有代码库进行一些修改。

> Mac OS / IOS 版本最终需要将其字符串“转换”为 CFString。CF 功能丰富且高度优化。我认为通过为 CF 提供缓冲区（例如，CFStringCreateWithCharactersNoCopy 或 CFStringCreateMutableWithExternalCharactersNoCopy）让我自己的类创建 CFStrings 是一个很好的策略。似乎这可以减少从模型中获取数据后 CFString 通常需要的转换/分配量——尽管可能在适当的 MVC 实现中，控制器/视图不应该访问模型拥有的实际字符串？

当您在不复制数据缓冲区的情况下创建字符串时，您必须确保缓冲区在访问字符串时一直存在。这在某些情况下可能是正确的，但并非全部如此。一般来说，这些问题与`char*`由 a 支持的问题非常相似`std::string`，这就是为什么`c_str()`是显式函数调用而不仅仅是自动转换的原因。通过进行这样的转换，您必须保证原始对象保持分配状态。一般来说，我会传递`const std::string&`给视图，因此它们不会意外更改模型拥有的字符串。如果他们需要保留或修改字符串，他们将不得不复制它。

> C++ 11 是否会改变这些跨平台字符串问题的情况？

C++ 11 提供了许多新的智能指针实现，允许您更好地控制字符串对象保持分配的时间。因此，例如，您可以使用 a`shared_prt<string>`作为类的数据存储，以获得自动引用计数和字符串的释放。这将为您提供更高级别的抽象，但可能与您当前的代码库所做的相距甚远，因此我不确定这是否会使您的移植更容易。

# java - 在网络浏览器中显示上传的文件

> ID：14189866
> 
> 赞同：0
> 
> 时间：2013-01-07T04:24:52.543
> 
> 标签：java, image, jakarta-ee, upload

我正在将图像上传到后端，并且我想在上传完成后将其显示在前端。为此，我将它放在临时文件夹下。我不清楚的部分 - 如何将此图像发送到用户浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:28:49.653

也许您可以使用uploadify，它非常简单，您可以一次上传多个文件。查看演示[http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:28:54.307

在您的`HTML`文件中，您需要使用`img`标签。如果你的图片是 titled `pic.jpg`，你会使用类似的东西：

`<img src="temp/pic.jpg" alt="My incredible image.">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T05:53:36.687

Servlet 对此非常有帮助。您不需要将图像存储到文件夹或任何东西，请使用以下步骤。您应该使用“java.io.InputStream”以字节为单位获取图像，并将流作为字节发送，并且应该使用*java.io.OutputStream*来读取并显示它。请检查 [输入流 javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html)和[输出流 javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/OutputStream.html) 以获得更多说明。要将图像从客户端发送到服务器端，请使用表单元素中的图像上传，并将表单提交到您的 servlet，并使用 inputstream 接收图像字节并将其提供给 outputstream 并返回一个 outputstream。以字节数组显示图像的示例代码。

* * *

`byte[] imageBytes = getImageAsBytes(); response.setContentType("image/jpeg"); response.setContentLength(imageBytes.length); response.getOutputStream().write(imageBytes);`

最后将 url 提供给您的 servlet，在 <img> 标记的 src 属性中返回一个输出流`<img src="url to your servlet">`

你也可以参考这些...... 1.http://stackoverflow.com/a/1154279/1866662 2.http://stackoverflow.com/a/1264756/1866662

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-04T06:04:00.700

```
response.setContentType("image/jpg");
response.setHeader("Content-Disposition","inline;filename=filename.jpg"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-07T04:30:06.980

您是否尝试在默认 Web 浏览器中打开本地图像？如果是这样，请执行以下操作：

```
java.io.File imageFile = new java.io.File("image.png");
java.awt.Desktop.getDesktop().browse(imageFile.toURI()); 
```

它会将文件图像打开到默认的网络浏览器。

# jquery - WordPress中的caroufredsel图像缩略图分页

> ID：14189869
> 
> 赞同：1
> 
> 时间：2013-01-07T04:25:32.337
> 
> 标签：jquery, caroufredsel

我想要一个轮播，在 wordpress 帖子中显示来自媒体库的图像和图像缩略图。

我可以让它查询数据库，但我不知道如何使用 caroufredsel 返回缩略图数组。

我现在只返回第一个缩略图，这是有道理的，因为函数返回变量设置为 $src[0]。我需要 .pager-wrapper 类来接收在 php 循环中找到的所有图像。

例如，我希望返回为：

```
<img src=image1.jpg />
<img src=image2.jpg />
<img src=image3.jpg /> 
```

如何让 caroufredsel 将缩略图数组返回给选定的容器类？

```
projectCarousel = $("#project-carousel").carouFredSel({
    pagination  : {
    container       : ".pager-wrapper",
    anchorBuilder   : function( nr ) {
        //var src = $(this).attr( "src" );
        //src = src.replace( "/large/", "/small/" );
        <?php 

        $meta = get_post_meta( get_the_ID(  ), 'icrave_project_media_gallery', false );
                if ( !is_array( $meta ) )
                    $meta = ( array ) $meta;

                if ( !empty( $meta ) ):
                    $meta = implode( ',', $meta );
                    $images = $wpdb->get_col( "
                        SELECT ID FROM $wpdb->posts
                        WHERE post_type = 'attachment'
                        AND ID IN ( $meta )
                        ORDER BY menu_order ASC
                    " );
                    foreach ( $images as $att ):
                        // Get image's source based on size, can be 'thumbnail', 'medium', 'large', 'full' or registed post thumbnails sizes
                        $src = wp_get_attachment_image_src( $att, 'thumbnail' );
                        $src = $src[0];
                        ?>

        return '<img src="' + '<?php echo $src ?>' + '" />';

        <?php endforeach ?>
                    <?php endif ?>

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T21:41:09.583

我想这一切都错了。您必须设置 2 个轮播。这是帮助教程的链接：http: [//favbulous.com/post/628/create-and-style-an-image-slider-with-thumbnail-carousel](http://favbulous.com/post/628/create-and-style-an-image-slider-with-thumbnail-carousel)

这是我必须做的...

首先在您希望拇指移动的新 div 中添加一个新循环。

```
 <div id="thumbs">
                    <?php global $wpdb, $post;

                    $meta = get_post_meta( get_the_ID(  ), 'icrave_project_media_gallery', false );
                    if ( !is_array( $meta ) )
                        $meta = ( array ) $meta;

                    if ( !empty( $meta ) ) {
                        $meta = implode( ',', $meta );
                        $images = $wpdb->get_col( "
                            SELECT ID FROM $wpdb->posts
                            WHERE post_type = 'attachment'
                            AND ID IN ( $meta )
                            ORDER BY menu_order ASC
                        " );
                        foreach ( $images as $att ) {
                            // Get image's source based on size, can be 'thumbnail', 'medium', 'large', 'full' or registed post thumbnails sizes
                            $src = wp_get_attachment_image_src( $att, 'thumbnails' );
                            $src = $src[0];

                            // Show image
                            echo "<div class='thumb'>
                                              <a href='#'>
                                              <img src='{$src}' alt='Thumbnail Title' width='72' height='38' /></a></div>";
                        }
                    } 
                    ?>

                </div> 
```

如果需要，您可以将其减少为单个数据库查询以节省一些速度。

其次是添加jquery：

```
$(function(){
    /* Attached an unique class name to each thumbnail image */
    $('#thumbs .thumb a').each(function(i) {
        $(this).addClass( 'itm'+i );

        /* add onclick event to thumbnail to make the main 
        carousel scroll to the right slide*/
        $(this).click(function() {
            $('#project-carousel').trigger( 'slideTo', [i, 0, true] );
            return false;
        });
    }); 

    /* Highlight the first item on first load */
    $('#thumbs a.itm0').addClass( 'selected' );

 projectCarousel = $("#project-carousel").carouFredSel({
        responsive:true,
        circular:true,
        infinite:true,
        width:983,
        height:550,
        scroll: {
            fx: 'crossfade',
            onBefore: function() {
                /* Everytime the main slideshow changes, it check to 
                    make sure thumbnail and page are displayed correctly */
                /* Get the current position */
                var pos = $(this).triggerHandler( 'currentPosition' );

                /* Reset and select the current thumbnail item */
                $('#thumbs a').removeClass( 'selected' );
                $('#thumbs a.itm'+pos).addClass( 'selected' );
                /* Move the thumbnail to the right page */
                var page = Math.floor( pos / 3 );
                $('#thumbs').trigger( 'slideToPage', page );
            }
        },
        auto: {
          play:true
        },
        items:{
            height:winHeight,
            visible:1,
            width:1000
        },
        prev:$("#left"),
        next:$("#right"),
    });

    /* Carousel for the thumbnails */
    $('#thumbs').carouFredSel({
        direction: 'left',
        circular: true,
        infinite: false,
        align: false,
        auto: false,
        prev: '#prev',
        next: '#next'
    }); 
```

我希望这对其他人有帮助，因为我没有找到很多关于使用 fredSel 制作图像缩略图列表的文档。

# requirejs - 在 noConflict 模式下使用 jQuery 在 require.js 中加载非 AMD 兼容的 jQuery 插件的正确方法？

> ID：14189871
> 
> 赞同：6
> 
> 时间：2013-01-07T04:26:08.133
> 
> 标签：requirejs, amd

假设我想将 jquery 与已使用标准闭包定义的标准、非 amd 启用 jquery 插件一起使用：`(function($))( $.fn.myplugin = { ... } )(jQuery);`它都位于`js/libs/jquery/jquery.myplugin.js`.

我使用这个配置：

```
require.config({
  baseUrl: 'js/',
  paths: {
    'jquery':          'libs/jquery/jquery-noconflict', 
    'underscore':      'libs/underscore/underscore',
    'backbone':        'libs/backbone/backbone',
    'jquery-myplugin': 'libs/jquery/jquery.myplugin'
  },
  shim: {
    'backbone': {
      deps: ['underscore', 'jquery'],
      exports: 'Backbone'
  },
  'jquery-myplugin': {
    deps:  ['jquery'] 
  }
}); 
```

我在 中以无冲突模式加载 jQuery，`libs/jquery/jquery-noconflict.js`因为我不想污染全局命名空间：

```
define(['libs/jquery'], function () {
  return jQuery.noConflict(true);
}); 
```

这就是我加载主 app.js 的方式：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'jquery-myplugin'],
function($, _, Backbone, MyPlugin){
  //MyPlugin is always undefined, not even sure if 
  //I should be passing it here if it only extends jQuery?
}); 
```

现在，这是我遇到的问题 - 虽然我可以毫无问题地使用上面定义的所有库，但我无法制定正确的`shim`配置来加载非 AMD 启用的 jquery 插件。

`jquery-myplugin`我已经尝试过设置`deps`（`jquery`和其他方式），但我永远无法让它工作。

似乎我在以下情况下遇到问题：

1.  jQuery 以无冲突模式加载。
2.  插件代码运行，扩展了上面 jQuery 的实例
3.  我可以在我的应用程序中使用由插件代码扩展的 $，因此 $.myplugin 可用。

我看到过类似的问题，但没有一个真正解决了这个问题，只给出了模糊的建议，例如“使用 shim config”......

**编辑**

我也尝试过使用

```
"jquery-myplugin": {
    deps: ["jquery"],
    exports: "jQuery.fn.myplugin"
} 
```

虽然插件方法一旦以这种方式加载为 AMD 模块就可用，但我仍然无法访问：`$('.class').myplugin()`因为默认 $ 对象尚未使用 myplugin 代码进行扩展。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T18:30:40.457

使用`jQuery.noConflict(true)`删除`jQuery`全局变量。当您的插件加载时，它会尝试访问`jQuery`，但不能，导致此失败。

如果您的插件是一个模块，它可以作为依赖项访问 jQuery。或者，您可以将`jQuery`其作为全球可用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-10T15:16:08.840

我今天遇到了和你一样的问题。这是我可以解决的方法：

```
requirejs.config({
    "baseUrl": "js/lib",
    "paths": {
      "app": "../app"
    }
});

// Final version of jQuery with all needed plugins.
define("jquery", ["jquery-core", "myplugin"], function(jqCore) {
    return jqCore;
});

// Define core jQuery module.
define("jquery-core", ["jquery-1.9.1.min"], function() {
    return jQuery.noConflict(true);
});

// This module exposes jquery module to the global scope and returns previous defined version.
define("jq-global", ["jquery-core"], function(jqCore) {
    var tmp = jQuery;
    jQuery = jqCore;
    return tmp;
});

// Define your plugin here, and don't forget to reset previous jQuery version.
define("myplugin", ["jq-global", "jquery.myplugin"], function(jqGlobal, jqPlugin) {
    jQuery = jqGlobal;
});

// Load the main app module to start the app
requirejs(["app/main"]); 
```

现在在我的 app/main.js 文件中，我可以执行以下操作：

```
define(["jquery"], function($) {
    $('body').myplugin();
}); 
```

这里的想法是在执行插件代码之前临时公开 jQuery。到目前为止，我还没有在更大的环境中测试解决方案，需要加载更多的模块，所以我不能保证它会长期工作；）

**编辑**

这个解决方案行不通！！由于 requirejs 不会按顺序加载脚本，因此插件 js 文件可能会在 jquery 之前加载，这将导致执行失败。非常遗憾。

如果有人有其他想法...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T20:42:43.817

首先，确保“path/to/jquery-myplugin”实际上扩展`window.jQuery`而不是`$`

noConflict() 保留`window.jQuery`定义的对象，但解除自身绑定`window.$`在某些新浏览器`window.$`上内置了本机`document.querySelectorAll`函数的别名。

其次，您的 myplugin 不需要返回自身，因为它不能单独使用。因为它**扩展**了jQuery，所以从 myplugin 调用返回 jQuery。

最后，“path/to/jquery-myplugin”不是一个**模块**。这是一个普通的 JS 文件。有可能 RequireJS 尝试像模块一样加载它并且找不到`define()`调用，这会导致混乱。尝试将“.js”文件扩展名添加到引用中，以向 RequireJS 发出它需要使用“js！”的信号。加载资源的插件。

```
require.config({
    paths: {
        "jquery": "path/to/jquery",
        "jquery-myplugin": "path/to/jquery-myplugin.js"
    },
    shim: {
        "jquery": {
          init: function() {
             return window.jQuery.noConflict();
          },
        "jquery-myplugin": {
          deps: ['jquery']
          init: function($) {
             return $;
          },
       }
    } 
}); 
```

# yii - yii CHtml::button 和对控制器的 POST 请求

> ID：14189872
> 
> 赞同：6
> 
> 时间：2013-01-07T04:26:20.327
> 
> 标签：yii

有没有办法向`CHtml::button`控制器发送发布请求

```
<?php echo CHtml::button('Button Text', array('submit' => array('controller/action'))); ?> 
```

我正在寻找复制`CHtml::link`功能和 POST 到控制器

```
<?php echo CHtml::link('Delete',"#", array("submit"=>array('delete', 'id'=>$data->ID), 'confirm' => 'Are you sure?')); ?> 
```

编辑：

该按钮未提交表单

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-07T05:22:17.823

试试这个：

```
echo CHtml::button('Delete',
    array(
        'submit'=>array('controllername/actionname',array('id'=>$id)),
        'confirm' => 'Are you sure?'
        // or you can use 'params'=>array('id'=>$id)
    )
); 
```

正如您将看到`button`的，它还具有特殊`htmlOptions`属性[`clientChange`](http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail")。

**更新**澄清`submit`，来自[文档链接](http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#clientChange-detail")（）：

> submit：字符串，指定要提交到的 URL。如果当前元素有一个父表单，则该表单将被提交，如果 'submit' 为非空，则其值将替换该表单的 URL。**如果没有父表单，则会将“params”中列出的数据（通过 POST 方法）提交到“submit”中的 URL，或者如果“submit”为空，则提交到当前请求的 URL。**请注意，如果 'csrf' 设置为 true，则 CSRF 令牌也将包含在参数中。

^(强调我的)

正如您提到的，您想要点击删除操作，生成的默认 gii`actionDelete`需要`id`在 url 中，因此我在 url 中传递了 id，即`submit`选项。

# mercurial - mecurial tortoiseHg 提交后导出补丁

> ID：14189877
> 
> 赞同：1
> 
> 时间：2013-01-07T04:27:02.937
> 
> 标签：mercurial, tortoisehg

我之前也成功打过补丁，但是我最近的补丁是空的。我已经完成了两次提交，现在我想制作一个补丁，其中包含最后两次提交中的更改。

我尝试在补丁中选择我想要的最早版本，但提交选项卡（复选标记）中没有显示任何内容，我创建的补丁中也没有任何内容。

我可以在提交后创建补丁吗？如果可以，如何创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T06:25:55.880

要在提交后制作补丁，只需选择两个修订版，右键单击并选择`Export Selected...`：

![TortoiseHG 截图](../Images/583397bcf424fdeb83b04a570cdc1c7c.png)

这将为每个补丁导出一个补丁文件：

![导出的补丁](../Images/51219a98f3b1f657e57a2f5f0d27c05d.png)

# sql - 访问 SQL 以使用 TempVars 按日期排序

> ID：14189883
> 
> 赞同：1
> 
> 时间：2013-01-07T04:27:55.190
> 
> 标签：sql, ms-access-2007

我试图通过使用 TempVars 进行查询

我使用 SQL 运行查询，但每次我尝试时，它都会返回 Invalid date value 这是行不通的行

这返回错误

```
WHERE ((([Table].[Issue Date])>=#[TempVars]![tmpDateFrom]# And ([Table].[Issue Date])>=#[TempVars]![tmpDateTo]#)); 
```

这返回正常

```
WHERE ((([Table].[Issue Date])>=#10/12/12# And ([Table].[Issue Date])>=#11/12/12#)); 
```

我检查了 TempVars [tmpDateFrom] 和 [tmpDateTo]，它们输出了我需要的日期值。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:08:58.117

谢谢大家或帮助。由于数据库的要求，@Nicarus 有正确的答案，这对于那些仍然想知道的人来说是解决方案。

```
WHERE ((([Table].[Issue Date])>=[TempVars]![tmpDateFrom] And ([Table].[Issue Date])>=[TempVars]![tmpDateTo])); 
```

# xslt - 使用 XSLT 将标签中的内容转换为基于文本的字符

> ID：14189898
> 
> 赞同：0
> 
> 时间：2013-01-07T04:30:31.257
> 
> 标签：xslt

我需要根据元素中的字符转换下面的 XML。我已经尝试过以下 XSLT 1.0。在`<mo>`元素中，for`&#x007B;`和`&#x007D;`, 应该转换为 |text{| 和 |文本}| 分别。For `{`and`}`应该转换为 |cbo| 和 |cbc| 分别。但我得到 '|(text}||(text{||(text}||(text{| `for the contents in`` 元素

示例 XML：

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML"><p><math display='block'><mo>{</mo><mo>&#x007B;</mo><mo>&#x007D;</mo><mo>}</mo></math></p></chapter> 
```

XSLT 1.0 试过：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML">
<xsl:output method="xml" encoding="UTF-8" indent="no"/>
<xsl:strip-space elements="*"/>
<xsl:template match="@* | node()"><xsl:copy><xsl:apply-templates select="@* | node()"/>    
</xsl:copy></xsl:template>
<xsl:template match="m:mo">
<xsl:choose>
<xsl:when test="(.)='&#x007B;'"><xsl:text disable-output-escaping="yes">|(text{|</xsl:text>
</xsl:when>
<xsl:when test="(.)='&#x007D;'"><xsl:text disable-output-escaping="yes">|(text}|</xsl:text>
</xsl:when>
<xsl:when test="(.)='{'"><xsl:text disable-output-escaping="yes">|cbo|</xsl:text></xsl:when>
<xsl:when test="(.)='}'"><xsl:text disable-output-escaping="yes">|cbc|</xsl:text></xsl:when>
</xsl:choose></xsl:template></xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:43:42.813

**我无法重现“问题”** ——提供的 XSLT 代码生成的输出不包含以下子字符串：

```
"|(text}||(text{||(text}||(text{|" 
```

**提供的不可读代码可以简化为以下简单代码**——请注意，根本不需要 DOE：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:m="http://www.w3.org/1998/Math/MathML">
    <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="@* | node()">
   <xsl:copy>
     <xsl:apply-templates select="@* | node()"/>
   </xsl:copy>
 </xsl:template>

 <xsl:template match="m:mo">
   <xsl:choose>
    <xsl:when test=". = '&#x007B;'">
     <xsl:text>|(text{|</xsl:text>
    </xsl:when>
    <xsl:when test=". = '&#x007D;'">
     <xsl:text>|(text}|</xsl:text>
    </xsl:when>
    <xsl:when test=". = '{'">
     <xsl:text>|cbo|</xsl:text>
    </xsl:when>
    <xsl:when test=". = '}'">
     <xsl:text>|cbc|</xsl:text>
    </xsl:when>
   </xsl:choose>
 </xsl:template>
</xsl:stylesheet> 
```

**原始代码及其等效的可读和简化代码（上图）都产生相同的结果**（当我们不考虑缩进或缺少缩进时）：

```
<chapter xmlns="http://www.w3.org/1998/Math/MathML">
   <p>
      <math display="block">|(text{||(text{||(text}||(text}|</math>
   </p>
</chapter> 
```

我不知道这个结果是“好”还是“坏”，因为 OP 没有具体说明他想要产生什么结果，他得到什么结果，以及为什么他得到的结果不是“好” ”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T09:05:37.997

> 当实体`&#x007B;`进入时，它应该被转换为|(text{|，当字符`{`出现时，它应该被转换为|cbo|。

一旦您的 XML 通过 XML 解析器，这两个输入就无法区分了。这有点像说你想根据作者是用左手还是右手输入文本来不同地处理它们——它们只是输入相同数据的不同方式。

如果要区分它们，则需要进行某种预处理，以便通过 XML 解析保留差异。一种方法是 Andrew Welch 的 Lexev 工具，它与 KernowForSaxon 集成。但是，我会质疑您的设计；取决于这样的词汇差异将使您的系统非常脆弱。

# javascript - 在javascript中将方程作为参数传递

> ID：14189899
> 
> 赞同：0
> 
> 时间：2013-01-07T04:30:37.607
> 
> 标签：javascript

```
newnooftimes = nooftimes + 1;
if (nooftimes < 10) {
    setTimeout("roll(newnooftimes);", 150);
} 
```

对比

```
if (nooftimes < 10) {
    setTimeout("roll(nooftimes + 1);", 150);
} 
```

为什么后者不起作用，即使前者起作用？

编辑：这是我的全部功能。似乎变量超出范围可能存在一些问题？我是 javascript 的新手，所以希望能得到一些帮助来指出我出了什么问题。此功能使用之前回复中建议的代码，但仍然不起作用。roll() 仅被函数外的另一个调用调用一次。递归永远不会发生 - 为什么？

```
function roll(nooftimes) {
    ctx.clearRect(dicex,dicey,diceWidth,diceHeight); //clears the space where the dice face may have been already drawn
    var roll = 1+Math.floor(Math.random()*6);
    drawFace(roll); 
    if (nooftimes < 10) {
        setTimeout(function () { roll(nooftimes + 1); }, 150);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:32:53.957

将其包装在 lambda 中。您应该将函数传递给它，而不是函数调用。虽然浏览器经常试图弄清楚你的意图，但有时一些粗略的事情会起作用。

```
if (nooftimes < 10) {
    setTimeout(function () { roll(nooftimes + 1); }, 150);
} 
```

# svn - 我该如何解决这个 svn 合并错误： svn 合并异常中止。解决冲突并继续？

> ID：14189901
> 
> 赞同：0
> 
> 时间：2013-01-07T04:30:59.763
> 
> 标签：svn, subclipse

我试图将分支 A 中的更改合并到分支 B。当我运行合并时，我遇到了一些这样的错误（没有确切的错误，因为我在没有复制错误的情况下关闭了控制台）。

> svn 合并异常中止。解决冲突并继续

我想知道我应该如何解决这个问题。这些是我能想到的方法。

1.  在本地解决冲突，将文件提交到分支B，然后继续合并
2.  在本地解决冲突，重新运行合并。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:41:56.803

我会选择选项 2。没有什么可以阻止您合并到具有本地更改的工作副本中。我不会提交合并的一部分，因为无法确定在原始合并中止之前是否应用了所有必要的更改。所以，如果是我，我会简单地在本地解决冲突，然后重新运行原始合并，直到合并成功完成。合并可能总是存在冲突，您只需完成合并并在合并完成后解决冲突。

# android - 如何在设备的 /data/misc/sms/ 目录中获取 code.xml 文件？

> ID：14189902
> 
> 赞同：1
> 
> 时间：2013-01-07T04:31:10.487
> 
> 标签：android, android-4.2-jelly-bean

从 CDD 4.2 文档中，它说：必须在向文件中定义的正则表达式标识的数字`Device that declare support for android.hardware.telephony`发送消息之前警告用户“`SMS``/data/misc/sms/codes.xml`

我尝试通过命令从 Emulator 4.2 和 Galaxy Nexus 4.2 中的该目录获取`codes.xml`文件，但它们都返回该文件不存在。谁能告诉我那个文件在哪里？`adb``codes.xml`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:36:01.820

这不是您实际上必须做的事情 - Android 系统会负责警告用户。请参阅此[视频示例](http://www.youtube.com/watch?feature=player_detailpage&v=nkND9edVszQ#t=78s)以了解它的外观。

# sql - 更新列索引

> ID：14189905
> 
> 赞同：0
> 
> 时间：2013-01-07T04:31:40.603
> 
> 标签：sql, indexing

我有下面的代码..如果我在更新列上创建一个索引，查询会更快吗？

```
CREATE NONCLUSTERED INDEX tmp ON #TestTable (  
  jobid,   
  RecordGroup,
  RecordSubGroup,
  OpenDate   
) 

UPDATE #TestTable   
   SET OpenDate = OB.col1  
     , OpenWrap = OB.col2  
     , OpenBalance = OB.col3  
  FROM #TestTable ST  
  JOIN JobRecordOut OB ON OB.JobId = ST.JobId  
                      AND OB.RecordGroup = ST.RecordGroup  
                      AND OB.RecordSubGroup = ST.RecordSubGroup  
                      AND OB.RecordType = 'OB'  

DROP INDEX tmp ON #TestTable 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T04:39:47.837

这取决于™。

假设优化器确定索引会有所帮助，索引仅用于加快查找记录的速度。拥有索引并不能确保它会被使用。编写时没有指定数据库，没关系版本，以便能够提供更具体的信息。

当索引与正在添加/更改的值相关时，索引会减慢插入/更新操作。这就是为什么需要维护索引的原因——它们可能会变得碎片化，因此如果不是整个重建，它们就需要“碎片整理”。有时完全重新创建索引更具成本效益——这取决于数据和有多少数据。

当涉及到索引时，您必须自己尝试和测试。他们没有“银弹”/神奇的答案。

# z3 - z3的内存使用情况

> ID：14189906
> 
> 赞同：2
> 
> 时间：2013-01-07T04:31:42.297
> 
> 标签：z3

我正在使用 z3 来解决线性混合自动机的可达性问题。我在有限的内存下运行实验。我对内存使用感到困惑。有一种情况，z3在给定bound 2500的有限内存下可以解决。但是，当bound设置为2000时，z3的内存使用量超过了最大允许，这是什么原因呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:56:52.423

SMT2文件中的约束数量较少并不一定意味着Z3会使用较少的内存来解决问题。例如，一个小但无法满足的问题可能比一个大的可满足问题需要更多的内存。

设置自动机展开的下限很可能会将可满足的问题（在边界 2500）变成不可满足的问题（在边界 2000），这反过来又使 Z3 的问题变得更加困难，即使更少约束。因此，Z3 将使用更多的时间和/或内存。

解决这个问题可能需要对问题进行不同的编码或在求解器上使用不同的选项，例如，调整启发式算法，使它们更频繁地“幸运”并更早地找到解决方案。

# java - 上线前丢失的项目

> ID：14189909
> 
> 赞同：2
> 
> 时间：2013-01-07T04:32:09.030
> 
> 标签：java

在我的 java 应用程序上线之前，我决定做/重新检查以下内容

```
1)  Code reviews
2)  Run tools (PMD , Findbug , Checkstyle)
3)  Proper Exception Handling in place
4)  correct/meaning full  logs are in place.
5)  Unit tests. 
```

在考虑我开发的 java 源代码时，是否有任何遗漏的项目需要跟进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:46:10.100

还有几个你可以考虑

1.  集成测试（尽管您已经提到了单元测试）
2.  负载测试
3.  可以通过在作为生产副本的盒子/服务器之一中部署来对应用程序进行功能测试。

# parallel-processing - 使用 SIMD 绘制 Mandelbrot

> ID：14189915
> 
> 赞同：0
> 
> 时间：2013-01-07T04:33:42.413
> 
> 标签：parallel-processing, fractals

我正在寻找优化生成 buddhabrots 的方法，为此我阅读了有关 SIMD 和并行计算的信息。有没有可能用它来加速我的佛祖的产生。我正在用 C 编程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:37:09.090

确实很多人都在做这方面的工作。 这是一个运行良好[的示例。](http://fraqtive.mimec.org/)还有其他的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:59:22.583

是的，Buddhabrot 生成可以很容易地并行化。关键是将计算与渲染分开。计算从一个 2D 计数器数组开始，每个像素一个，初始化为全零。然后，处理器可以在计算随机轨迹时增加这些计数器。您可以通过让多个处理器以不同的随机种子开始并定期将这些数组转储到文件中来以 SIMD 方式并行化。当您认为他们可能已经完成了足够的工作以获得令人满意的结果时，您只需收集所有这些文件并创建一个包含所有其他文件总和的主数组。只有这样，您才能对最终数组执行直方图均衡化，并通过为直方图中的每个值范围分配颜色来呈现结果。如果你发现结果不是“熟”

# wordpress - 显示不带“http”的 wp 作者元 URL

> ID：14189918
> 
> 赞同：2
> 
> 时间：2013-01-07T04:34:03.353
> 
> 标签：wordpress

我正在使用 WP 功能：`get_the_author_meta('user_url');`

当我将其回显到浏览器时，它会自动在 URL 前添加“http://”。我怎样才能避免这种情况，以便我的 URL 完全按照在用户设置页面上输入的方式显示。

谢谢是提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T05:06:50.837

```
$author_url = get_the_author_meta('user_url'); // e.g. http://www.example.com
$to_remove = array( 'http://', 'https://' );
foreach ( $to_remove as $item ) {
    $author_url = str_replace($item, '', $author_url); // to: www.example.com
}
echo $author_url; // now it will not have the http:// part you wish to avoid. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-20T09:06:26.063

`str_replace`可能是最有效的方法。

```
$author_url = str_replace(array( 'http://', 'https://' ), '', get_the_author_meta('user_url')); 
```

* * *

其他 URL 修改技术。

*   对于匹配的更复杂的字符串替换，您可以查看使用`preg_replace`.
*   `http-build-url()`扩展中包含一个名为的函数，`php_http.dll`它可能更适合某些用例。

# java - 避免/解决 Maven 项目中的重复类

> ID：14189921
> 
> 赞同：1
> 
> 时间：2013-01-07T04:34:38.153
> 
> 标签：java, maven-2, dependencies, duplicates, pom.xml

我有一个巨大的项目 A，它有依赖项目 B（不在我们的控制范围内）。问题是当我在 A 项目 pom.xml 下包含 B 时，一切都很好并且构建成功。

但在少数几个领域，由于重复的类，我们面临运行时异常。

项目 A 有自己的 JDom 依赖版本，项目 B 使用不同/相同的 JDom 版本。在应用程序运行时，由于类冲突，它会抛出 InvocationTarget 异常。

我如何确保项目 A 使用它自己的 jdom 而项目 B 使用它自己的或至少解决此类冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:45:27.260

您可以从正在导入的项目 B 中排除（传递）依赖项。

```
<project>
  ...
  <dependencies>
    <dependency>
      <groupId>com.example</groupId>
      <artifactId>ProjectB</artifactId>
      <version>1.0</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <groupId>jdom</groupId>
          <artifactId>jdom</artifactId>
        </exclusion>
      </exclusions> 
    </dependency>
  </dependencies>
</project> 
```

上面的示例将导致您的项目 B 依赖项被拉入，没有它的 JDOM 库版本。

# java - 在 Internet 上搜索可用的 Java 类？

> ID：14189924
> 
> 赞同：0
> 
> 时间：2013-01-07T04:35:14.363
> 
> 标签：java, code-reuse

这些天来，互联网上有很多 Java 代码，可能你想写什么类，有人已经在某个项目中编写了它。举个简单的例子，如果我想创建一个地址 bean，其中包含 streetName、streetNumber、postalCode 等字段。有人已经在他们的项目中创建了这个 bean 类，为什么不只是搜索下载（可能是一些快速更改）并在你的项目。

如果该项目是开源的，我个人认为不会有任何道德问题或是否存在？

到目前为止，我发现的是 grepcode.com，这是一个 Java 代码专用工具，它允许您按类名进行搜索。例如邮政地址

是否有任何其他工具可用于在类级别查找 Java 代码？（用于重复使用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:55:11.227

即使代码是开源的，你也需要小心，特别是如果你自己的应用程序是商业的。重用开源代码时，您应该查看代码可用的许可证，因为它可能会影响您如何分发使用此代码的自己的应用程序。有各种开源许可证，例如 GPL、LGPL、Apache 许可证等。例如，如果代码在 GPL 下并且您将其包含在您的应用程序中，则您必须在相同的 GPL 许可证下分发它。你应该确保你已经通过了你的开源库/代码可用的许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:38:24.313

您应该尝试 code.google.com。findjar.com 也在那里，但我认为这不是你要找的。

# r - 添加新行，在变量列中填充连续年份和 0 的行

> ID：14189925
> 
> 赞同：0
> 
> 时间：2013-01-07T04:35:17.783
> 
> 标签：r

我有一个 3 列的表（年份、ID、变量）。对于每个单独的 ID，我需要在第二年添加一个新行，并在变量列中添加一个 0。对我来说，困难在于每个 ID 都有不同的行数（年）。

这是可能的原始表：

```
ID  year    var
1   1998    2
1   1999    5
1   2000    6
1   2001    6
1   2002    6
2   1998    12
2   1999    12
3   1998    5
3   1999    5
3   2000    4 
```

...这就是我需要的：

```
ID  year    var
1   1998    2
1   1999    5
1   2000    6
1   2001    6
1   2002    6
1   2003    0
2   1998    12
2   1999    12
2   2000    0
3   1998    5
3   1999    5
3   2000    4
3   2001    0 
```

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T04:43:49.183

一个 data.table 解决方案（语法超过内存效率）

```
library(data.table)
# assuming your data is in the data.frame dd
DT <- data.table(dd)

DT[,list(year = c(year,max(year)+1), var = c(var,0)),by = ID] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-07T04:39:07.960

获取数据：

```
test <- read.table(textConnection("ID  year    var
1   1998    2
1   1999    5
1   2000    6
1   2001    6
1   2002    6
2   1998    12
2   1999    12
3   1998    5
3   1999    5
3   2000    4"),header=TRUE) 
```

添加行：

```
do.call(rbind,by(test,test$ID,function(x) rbind(x,c(x$ID[1],max(x$year)+1,0)))) 
```

结果：

```
 ID year var
1.1   1 1998   2
1.2   1 1999   5
1.3   1 2000   6
1.4   1 2001   6
1.5   1 2002   6
1.6   1 2003   0
2.6   2 1998  12
2.7   2 1999  12
2.3   2 2000   0
3.8   3 1998   5
3.9   3 1999   5
3.10  3 2000   4
3.4   3 2001   0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-19T20:10:03.467

这是仅使用基本包的另一种解决方案

```
DF <- read.table(textConnection("ID  year    var
1   1998    2
1   1999    5
1   2000    6
1   2001    6
1   2002    6
2   1998    12
2   1999    12
3   1998    5
3   1999    5
3   2000    4"), header=TRUE)

foo <- split(DF, DF["ID"])
addone <- function(x){
    last <- tail(x,1)
    last$year<-last$year+1
    last$var <- 0
    rbind(x,last)
    }
do.call(rbind, lapply(foo, addone)) 
```

...和输出：

```
 ID year var
1.1    1 1998   2
1.2    1 1999   5
1.3    1 2000   6
1.4    1 2001   6
1.5    1 2002   6
1.51   1 2003   0
2.6    2 1998  12
2.7    2 1999  12
2.71   2 2000   0
3.8    3 1998   5
3.9    3 1999   5
3.10   3 2000   4
3.101  3 2001   0 
```

# python - 在 python 中扩展的列表

> ID：14189927
> 
> 赞同：2
> 
> 时间：2013-01-07T04:35:33.660
> 
> 标签：python, list

我刚刚遇到了这种我无法理解的情况：

```
In [3]: nk1=range(10)

In [4]: nk2=range(11,15)

In [5]: nk1.extend(nk2)

In [6]: nk1
Out[6]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14]

In [7]: dir(range(10))==dir(list)==dir(range(11,15))==dir(nk1)==dir(nk2)
Out[7]: True

In [8]: print range(10).extend(range(11,15))
None 
```

正如你在上面看到的，我可以很容易地扩展 nk1，但为什么不是最后一个返回的语句`None`？
为什么它`None`在`In[8]`输入中返回（而`In[7]`我们可以看到一切都是一样的）？？？
所以我总是必须做实例`range`来扩展它？？？

来自 python 文档；我找到[了这个](http://docs.python.org/2/library/stdtypes.html#mutable-sequence-types)；但我不知道上述情况是如何发生的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T04:38:56.233

当您扩展列表时，列表会被原地修改。不返回新列表。

就地修改表明您正在调用其方法的对象将在该方法执行期间对其自身进行更改。在大多数情况下（为了避免您当前遇到的混淆），这些类型的操作不会返回执行操作的对象（尽管有例外）。考虑以下：

```
list1 = range(10)
list2 = range(10) + range(11,15) # no in place modification here.
nolist1 = list1.extend(range(11,15)) # list1 is now (0 ... 14)
nolist2 = range(10).extend(range(11,15)) # Nothing actually happens here. 
```

在最后一个示例中，该`range`函数返回一个从未分配给任何东西的列表。然后扩展该列表，其结果是返回值`None`。这是打印出来的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:45:52.550

`range()`给出新创建列表的句柄。如果你需要修改它，你必须将句柄存储到一个变量中。

它没有打印“无”，因为`extend`不返回任何内容。当您使用 range() 时，无法直接获取输出。

```
nk1 = range(10)
nk1.extend(range(11,15))
print nk1 
```

# android - 如何针对 Web 服务测试 android 应用程序

> ID：14189929
> 
> 赞同：0
> 
> 时间：2013-01-07T04:35:43.537
> 
> 标签：android, rest, testing

无需调用网络服务。是否有一个测试框架/库来模拟响应？使用固定装置进行响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:37:58.717

您可以通过`Advance Rest Client`在 chrome 浏览器中下载插件来测试您的网络服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:42:46.657

有几个检测框架，例如[Mercury](http://labs.mwrinfosecurity.com/tools/2012/03/16/mercury/documentation/white-paper/mercury-framework/)和[Instrumentation](http://developer.android.com/reference/android/app/Instrumentation.html)。

但是，对于实际的网络仿真，最好的选择是使用本地主机服务器，例如使用[WAMP](http://www.wampserver.com/en/)，它可以让您在本地运行 PHP 并模拟响应。

# html - 垂直均匀分布或间隔列表项

> ID：14189931
> 
> 赞同：1
> 
> 时间：2013-01-07T04:35:54.770
> 
> 标签：html, css

我到处搜索，但建议并没有做我想要的。基本上，我的清单在 ul 中。ul 的高度已设置为精确大小。我希望里面的列表项彼此之间*以及*相对于 ul 容器的顶部和底部（这是高度的来源）具有相等的间距 - 所以空间都是相同的大小。你怎么做到这一点？

```
<ul id="nav">
    <li><a href="index.html" id="tab">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="contact.html">Contact</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T00:59:27.553

我刚刚在这里回答了一个类似的问题：[https](https://stackoverflow.com/a/16745192) ://stackoverflow.com/a/16745192 。

基本上，要在 a 内均匀分布`li`' `ul`，您可以将`ul`to`display: table`和`li`'s 设置为`display: table-row`，然后使用伪元素来呈现项目符号点，[它适用于 IE8+ 和所有其他浏览器](http://caniuse.com/css-gencontent)：

```
ul {
    height: 300px;
    display: table;
}
li {
    display: table-row;
}
li:before {
    content:'•';
    float: left;
    width: 20px;
    font-size: 1.8em;
    line-height: 0.75em;
} 
```

这是一个`[**jsFiddle**](http://jsfiddle.net/TzWzt/5/)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T07:09:12.680

如果“li”项目的数量是随机的并且可以是任何东西，那么纯 HTML + CSS 解决方案看起来是不可能的。需要一些 JS 代码才能工作。

```
<style>
#nav { height: x px; }
</style>

<ul id="nav">
    <li><a href="index.html" id="tab">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="contact.html">Contact</a></li>
</ul>

<script>
var listItems = document.querySelectorAll("ul#nav > li");
for(var l = 0; l < listItems.length; l++) {
  listItems[l].style.height = Math.floor(x/listItems.length) + "px";
}
</script> 
```

可以在以下位置找到一个临时示例：http: [//jsfiddle.net/bKxUx/](http://jsfiddle.net/bKxUx/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T07:03:37.203

[CSS 灵活框布局模块](http://www.w3.org/TR/css3-flexbox/)可能是您想要的，下面是我的 chrome 上的工作示例。（请注意，由于规格可能会更改，最好暂时不要使用它）

```
<html>
    <head>
        <style>
            .flex-ul {
                height: 500px;
                width: 200px;
                border: 1px solid #ccc;
                display: -webkit-box;

                -webkit-box-orient: vertical;
                -webkit-box-pack: justify;
            }
            .inner {
                -webkit-flex: 1;
                -webkit-order: 0;
            }
        </style>
    </head>
    <body>
        <ul class="flex-ul">
            <li class="inner">Item one
            <li class="inner">Item two
            <li class="inner">Item three
            <li class="inner">Item four
        </ul>
    </body>
</html> 
```

# php - 如何调用父类PHP中的函数？

> ID：14189932
> 
> 赞同：-1
> 
> 时间：2013-01-07T04:35:58.200
> 
> 标签：php, class, function

我有两个 PHP 类。第一个是这样的：

```
<?php 
     $myclass = new MainClass;

     class MainClass{
              public $login;

              public function __construct(){
                  require_once('login.class.php');
                  $this->login = new login;
              }

              public function mysql(){
                  mysql_connect("localhost","root","");
              }   

     }
?> 
```

我的登录课程是：

```
<?php

   class Login{

           public function checkDB(){
               //**** how do I call mysql on MainClass here ?*****
          }
    }
?> 
```

我需要提一下，登录不是主类的子类。所以**我想知道如何`mysql`从 Login Class 调用 MainClass 上的函数？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:43:31.370

**Method1:** : 派生类,

```
<?php
require_once('MainClass.php'); // MainClass store as a php file
   class Login extends MainClass{

           public function checkDB(){
               $this->mysql(); //**** call mysql from MainClass here
          }
    }
?> 
```

**Method2:** : 对象实例，

```
<?php
require_once('MainClass.php'); // MainClass store as a php file
$check_mysql = new MainClass();

   class Login extends MainClass{

           public function checkDB(){
               $check_mysql->mysql(); //**** call mysql from MainClass here
          }
    }
?> 
```

**注意：**不要使用 MySQL 函数，因为它们已被弃用，所以使用`mysqli`or`PDO`连接数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T04:38:51.533

使用此代码，您只需创建对象`MainClass`并调用 mainClass 函数。

```
<?php

class Login{

       public function checkDB(){
           $main = new MainClass();
           $main->mysql();
      }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T04:50:29.297

如果您想为此使用面向对象的处理程序，而不是重新发明轮子，请使用`mysqli`该类。文档[here](http://php.net/manual/en/book.mysqli.php)，代码示例如下：

```
class Login extends mysqli {
  public function __construct($loginid) {
    $this->id = $loginid; // example of wrapping
    parent::__construct( /* login constants go here */ );
  }
  . . .
  // other functions that can have direct access to the mysqli:: class
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T04:45:01.740

正如 shapeshifter 在评论中所说，您需要一个可以从其他类中引用的类。相反，我可能会做这样的事情：

```
<?php
$database = new MainClass();
class Login
{
   public function checkDB($database)
   {
       $database->mysql();
   }
}
?> 
```

# php - 来自数据库的 jQuery 灯箱通过 PHP/Ajax 强制第一次双击

> ID：14189936
> 
> 赞同：0
> 
> 时间：2013-01-07T04:36:15.280
> 
> 标签：php, javascript, jquery, html, ajax

这是一个奇怪的问题。我必须点击某些按钮（有一些 id）。id 在 PHP 脚本中通过 Ajax 传递。在数据库中搜索该 ID，并将匹配的条目作为数据传递，其中显示在我的 jQuery 灯箱中。但是，我必须第一次双击该按钮。

我的 HTML 结构如下：

```
<div class="boxes">
  <a href="#" id="showe3" class="button lfloat">Show it</a>
</div>
<div class="boxes">
  <a href="#" id="showe4" class="button lfloat">Show it</a>
</div> 
```

Javascript函数是：

```
$('.button').click( function() {
  $.ajax({
    type: 'POST',                
    url: 'functions/db.php',            
    data: {id: this.id},
    dataType: 'json'
  }).done(function(data) {
    $('#'+data[0]).avgrund({
    //data [0] is both the id being clicked and that stored in the database
      height: 200,
      holderClass: 'custom',
      showClose: true,
      template: '<p>'+data[2]+'</p>' +
        '<div>' +
        '<a href="#" target="_blank" class="b1">'+data[0]+'</a>' +
        '<a href="#" target="_blank" class="b2">'+data[1]+'</a>' +
        '<a href="#" target="_blank" class="b2">More</a>' +
        '</div>'
    });
  });

}); 
```

我的相关 PHP 脚本：

```
$id = $_POST['id'];
$result = mysql_query("SELECT * FROM `eventdetails` WHERE `id` = '".$id."'");                      
$array = mysql_fetch_row($result);                            
echo json_encode($array); 
```

我在 Windows 7 上的 XAMPP 服务器上运行文件。我第一次双击是否正常？我该如何改进它？

**编辑#1** 一位用户建议使用`success`而不是`done`在 Ajax 中。不过，它需要双击。`success`这是在 Ajax 中使用的 javascript 代码。

```
$('.button').click( function() {
  $.ajax({
    type: 'POST',                
    url: 'functions/db.php',            
    data: {id: this.id},
    dataType: 'json',
    success:(function(data) {
      $('#'+data[0]).avgrund({
        height: 200,
        holderClass: 'custom',
        showClose: true,
        template: '<p>'+data[2]+'</p>' +
          '<div>' +
          '<a href="#" target="_blank" class="b1">'+data[0]+'</a>' +
          '<a href="#" target="_blank" class="b2">'+data[1]+'</a>' +
          '<a href="#" target="_blank" class="b2">More</a>' +
          '</div>'
      });
    })
  });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T10:49:10.527

使用 ajax 数据初始化 avgrund 将其名为“openOnEvent”的特殊参数设置为“false”，它看起来像

```
$.ajax({
            type: 'POST',
            url: 'testpost.php',
            dataType: 'json',
            data: { id: this.id },
            success: function(id) {
                $('#' + id).avgrund({
                    openOnEvent: false,
                    height: 200,
                    template: '<p>content <b>' + id + '</b> here!</p>'
                });
            }
        }); 
```

文档 - [https://github.com/voronianski/jquery.avgrund.js#update-sep-30-2012](https://github.com/voronianski/jquery.avgrund.js#update-sep-30-2012) 测试页面 - [http://labs.voronianski.com/test/test-avgrund.html](http://labs.voronianski.com/test/test-avgrund.html)

# python - Python中高斯的单独混合

> ID：14189937
> 
> 赞同：12
> 
> 时间：2013-01-07T04:36:20.020
> 
> 标签：python, statistics, normal-distribution

有一些物理实验的结果，可以用直方图表示`[i, amount_of(i)]`。我想这个结果可以通过 4 - 6 个高斯函数的混合来估计。

Python中是否有一个包将直方图作为输入并返回混合分布中每个高斯分布的均值和方差？

原始数据，例如：

![样本数据](../Images/343cfd3522e9157b177c58eaaa3e1bf7.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-07T07:08:48.740

这是[高斯的混合](http://en.wikipedia.org/wiki/Mixture_model)，可以使用[期望最大化](http://en.wikipedia.org/wiki/Expectation%E2%80%93maximization_algorithm)方法来估计（基本上，它在估计它们如何混合在一起的同时找到分布的中心和均值）。

这是在[PyMix](http://www.pymix.org/pymix/)包中实现的。下面我生成一个混合法线的示例，并使用 PyMix 为它们拟合混合模型，包括找出您感兴趣的内容，即子种群的大小：

```
# requires numpy and PyMix (matplotlib is just for making a histogram)
import random
import numpy as np
from matplotlib import pyplot as plt
import mixture

random.seed(010713)  # to make it reproducible

# create a mixture of normals:
#  1000 from N(0, 1)
#  2000 from N(6, 2)
mix = np.concatenate([np.random.normal(0, 1, [1000]),
                      np.random.normal(6, 2, [2000])])

# histogram:
plt.hist(mix, bins=20)
plt.savefig("mixture.pdf") 
```

上面的代码所做的就是生成并绘制混合物。它看起来像这样：

![在此处输入图像描述](../Images/db6123f347abcd5a24afdb2611183bde.png)

现在实际使用 PyMix 来计算百分比是多少：

```
data = mixture.DataSet()
data.fromArray(mix)

# start them off with something arbitrary (probably based on a guess from the figure)
n1 = mixture.NormalDistribution(-1,1)
n2 = mixture.NormalDistribution(1,1)
m = mixture.MixtureModel(2,[0.5,0.5], [n1,n2])

# perform expectation maximization
m.EM(data, 40, .1)
print m 
```

其输出模型为：

```
G = 2
p = 1
pi =[ 0.33307859  0.66692141]
compFix = [0, 0]
Component 0:
  ProductDist: 
  Normal:  [0.0360178848449, 1.03018725918]

Component 1:
  ProductDist: 
  Normal:  [5.86848468319, 2.0158608802] 
```

请注意，它非常正确地找到了两个法线（一个`N(0, 1)`和一个`N(6, 2)`，大约）。它还估计`pi`了 ，这是两个分布中的每一个中的分数（您在评论中提到这是您最感兴趣的）。我们在第一个分布中有 1000 个，在第二个分布中有 2000 个，它得到的划分几乎*完全*正确：`[ 0.33307859 0.66692141]`. 如果您想直接获取此值，请执行`m.pi`.

几点注意事项：

*   这种方法采用值向量，而不是直方图。将您的数据转换为一维向量应该很容易（即`[(1.4, 2), (2.6, 3)]`变成`[1.4, 1.4, 2.6, 2.6, 2.6]`）
*   我们必须提前猜测高斯分布的数量（如果你要求混合 2，它不会计算出 4 的混合）。
*   我们必须对分布进行一些初步估计。如果你做出哪怕是稍微合理的猜测，它也应该收敛到正确的估计。

# matlab - 抑制函数输出

> ID：14189938
> 
> 赞同：5
> 
> 时间：2013-01-07T04:36:21.773
> 
> 标签：matlab

我有一个简短的函数，用于`textscan`将数据读入变量。

我的问题是我总是得到这个：

```
>>function('function.txt')

    ans = 

        {10x1 cell}    {10x1 cell}    {10x1 cell}    [10x1 double] 
```

除了在我用来调用函数的行尾添加一个分号之外，还有什么方法可以抑制这种情况？我希望能够在不添加分号的情况下抑制它。运行此功能时，我根本不想显示任何内容，我只想加载我的文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T04:44:52.117

您可以通过删除函数的输出参数（或返回值）来抑制输出。或尝试使用`Variable Number of Outputs`，请参阅[支持可变数量的输出](http://www.mathworks.cn/cn/help/matlab/matlab_prog/support-variable-number-of-outputs.html)

```
function varargout = foo
    nOutputs = nargout;
    varargout = cell(1,nOutputs);
    for k = 1:nOutputs;
        varargout{k} = k;
    end
end 
```

你打字`>>foo`却一无所获。您输入`>>a=foo`并获取`>>a=1`. 您输入`>>[a,b]=foo`并获取`>>a=1 >>b=2`.

因此，您可以通过不提供任何输出参数来抑制输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-07T13:35:58.150

避免打印输出的最简单方法是，如果没有请求输出参数，则不分配第一个输出参数：

```
function [aOut,b,c] = doSomething

%# create a,b,c normally
a = 1;
b = 4;
c = 3;

%# only assign aOut if any output is requested
if nargout > 0
   aOut = a;
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T08:55:39.910

您可以尝试使用该`diary`功能。它将命令提示符的所有输入和输出重定向到您选择的文件。如果仅在特定功能期间打开它，则不应捕获任何输入。我承认这是一个有点笨拙的解决方案，因为日记开/关状态对 matlab 来说是全局的，但在你的情况下可能没问题。

在此处阅读更多相关信息： [日记 matlab 帮助](http://www.mathworks.se/help/matlab/ref/diary.html)

# actionscript-3 - 围绕中心旋转 flex 图形对象

> ID：14189941
> 
> 赞同：0
> 
> 时间：2013-01-07T04:36:32.477
> 
> 标签：actionscript-3, apache-flex, graphics, rotation

我试图创建一个弧形的旋转动画。即使尝试了所有这些示例，我也无法围绕中心旋转它。它围绕左上角旋转。

```
private function init():void
        {
            var hgroup:Group=new Group();
            this.addElement(hgroup);

            arc1=new Graphic();
            arc1.graphics.lineStyle(12,0xff0000,1,false,"normal",CapsStyle.SQUARE);
            draw_arc(arc1,CENTER,CENTER,70,14,288,1);

            hgroup.addElement(arc1);

            var matrix:Matrix = arc1.transform.matrix; 
            var rect:Rectangle = arc1.getBounds(arc1.parent); 
            matrix.translate(- (rect.left + (rect.width/2)), - (rect.top + (rect.height/2))); 
            matrix.rotate((90/180)*Math.PI); 
            matrix.translate(rect.left + (rect.width/2), rect.top + (rect.height/2));

            var rot:Rotate = new Rotate();
            rot.angleBy = 360;
            rot.duration = 1000;
            rot.target = arc1;
            rot.play();

        }

        public function draw_arc(movieclip:Sprite,center_x:Number,center_y:Number,radius:Number,angle_from:Number,angle_to:Number,precision:Number):void {
            var angle_diff:Number=angle_to-angle_from;
            var steps:Number=Math.round(angle_diff*precision);
            var angle:Number=angle_from;
            var px:Number=center_x+radius*Math.cos(angle*deg_to_rad);
            var py:Number=center_y+radius*Math.sin(angle*deg_to_rad);
            movieclip.graphics.moveTo(px,py);
            for (var i:Number=1; i<=steps; i++) {
                angle=angle_from+angle_diff/steps*i;
                movieclip.graphics.lineTo(center_x+radius*Math.cos(angle*deg_to_rad),center_y+radius*Math.sin(angle*deg_to_rad));
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T20:29:18.000

你需要这个属性：

```
rot.autoCenterTransform="true" 
```

请参阅文档底部的示例：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/effects/Rotate.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/effects/Rotate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T04:27:11.403

我以前用过这个解决方案；它运作良好并且非常简单：

[http://www.chadupton.com/blog/2008/02/rotate-on-center-in-adobe-flex/](http://www.chadupton.com/blog/2008/02/rotate-on-center-in-adobe-flex/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T10:01:31.403

我有一个类似的问题（带有旋转箭头），我像这样修复它：

```
<s:Group width="0" height="0" verticalCenter="0" right="14">
    <s:Graphic id="arrow" rotation="90" rotation.selectedStates="0">
        <s:Path data="M 0 0 L 5 5 L 0 10 Z" left="-2.5" top="-5">
            <s:fill>
                <s:SolidColor id="arrowFill"/>
            </s:fill>
        </s:Path>
    </s:Graphic>
</s:Group> 
```

容器`Group`的大小设置为，`0`因为它仅用作其包含的图形的锚点。它的位置`Group`是旋转中心点。`Path`in 的位置`Graphic`使其锚点位于其中心（即它的宽度为 5px，高度为 10px，因此它重新定位到左侧 2.5px 和顶部 5px）。

实际的旋转是通过`States`和`Transformations`这里完成的，但是 an`Effect`做同样的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T16:49:10.513

要在中心旋转图像，您必须指定此属性

```
rot.autoCenterTransform="true";
rot.applyChangesPostLayout = false; 
```

# asp.net - AJAX DropDownExtender：如何将值从 GridView 获取到 TextBox？

> ID：14189942
> 
> 赞同：2
> 
> 时间：2013-01-07T04:36:37.083
> 
> 标签：asp.net, dropdownextender

我有一个带有 TextBox 的 TargetControl 和一个包含 GridView 的 Panel 的 DropDownControl 的 DropDownExtender。我正在使用 GridView 以便可以显示多个列，但我愿意接受其他建议。

当用户在 GridView 中选择一行时，我想用 GridView 中特定列的值填充 TextBox。但是，GridView OnSelectedIndexChanged 事件并未在后面的代码中触发。

如您所见，没有真正的代码可言。我不知道要使用什么事件。显然 OnChange/OnSelect 事件适用于其他控件，即 ListBox，只是想知道是否有人对 GridView 有任何成功。

```
<asp:DropDownExtender ID="DropDownExtender2" runat="server" 
       TargetControlID="TextBox2"
       DropDownControlID="Panel1">
</asp:DropDownExtender>
<asp:TextBox ID="TextBox1" runat="server" ></asp:TextBox>
<asp:Panel ID="Panel1" runat="server" >
    <asp:GridView ID="GridView1" runat="server"></asp:GridView>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T07:22:57.403

您的问题的解决方案如下：

**ASPX 代码：**

```
> <cc1:DropDownExtender ID="DropDownExtender2" runat="server"
> TargetControlID="TextBox1"
>         DropDownControlID="divDataDropdown">
>     </cc1:DropDownExtender>
>     <asp:TextBox ID="TextBox1" runat="server" AutoCompleteType="None" ></asp:TextBox>
>     <div id="divDataDropdown" style="overflow-y:scroll; height:200px;" runat="server" >
>         <asp:GridView ID="GridView1" runat="server" onselectedindexchanged="GridView1_SelectedIndexChanged">
>             <Columns>
>                 <asp:CommandField HeaderText="Select Data" ShowSelectButton="True" />
>             </Columns>
>         </asp:GridView>
>     </div> 
```

**代码背后：**

```
>  public partial class WebForm1 : System.Web.UI.Page
>     {
>         protected void Page_Load(object sender, EventArgs e)
>         {
>             List<Employee> lstEmployee = new List<Employee>();
>             for (int RowDataIndex = 0; RowDataIndex < 50; RowDataIndex++)
>             {
>                 Employee objEmployee = new Employee();
>                 objEmployee.Id = RowDataIndex;
>                 objEmployee.Name = "Employee" + RowDataIndex;
>                 lstEmployee.Add(objEmployee);
>             }
>             GridView1.DataSource = lstEmployee;
>             GridView1.DataBind();
>         }
> 
>         protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
>         {
>             TextBox1.Text = GridView1.SelectedRow.Cells[2].Text;
>         }
>     }
> 
>     public class Employee
>     {
>         public int Id { get; set; }
>         public string Name { get; set; }
>     } 
```

# unix - Unix系统文件表

> ID：14189944
> 
> 赞同：20
> 
> 时间：2013-01-07T04:36:48.933
> 
> 标签：unix, system, filetable

我对 Unix 系统文件表感到困惑。

*   当两个或多个进程打开一个文件进行读取时，系统文件表是为每个进程创建单独的条目还是单个条目？

*   如果为打开同一个文件的多个进程创建一个条目，它们的文件偏移量是否也相同？

*   如果`process 1`打开`file1.txt`读取和`process 2`打开同一个文件`file1.txt`进行写入，系统文件表会创建一个还是两个条目？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-07T04:51:48.900

共有三个“系统文件表”： 有一个文件描述符表，将文件描述符（小整数）映射到打开文件表中的条目。打开文件表中的每个条目都包含（除其他外）一个文件偏移量和一个指向内存中 inode 表的指针。这是一张图片：（[来源：][[rich from www.cs.ucsb.edu 现在在 archive.org 上](https://web.archive.org/web/20160619025634if_/http://www.cs.ucsb.edu/%7Erich/class/cs170/notes/FileSystem/filetable.rich.jpg)][）][![在此处输入图像描述](../Images/f13608c3e264d670258124fd03ac0dcf.png)](https://i.stack.imgur.com/pZUpn.jpg)

因此，打开的文件既不是只有一个文件表条目，也不是每个进程只有一个……每次`open()`调用都有一个，如果文件描述符是`dup()`ed 或`fork()`ed，它是共享的。

回答您的问题：

1.  当两个或更多进程打开一个文件进行读取时，每次打开的打开文件表中都有一个条目。如果**一个**进程多次打开文件，甚至每次打开都有一个条目。

2.  **对于打开同一个文件的不同进程，不会**在打开文件表中创建单个条目（但在内存 inode 表中只有一个条目）。

3.  如果 file1.txt 被打开两次，在同一个或两个不同的进程中，有两个不同的打开文件表条目（但在内存 inode 表中只有一个条目）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-15T16:38:20.857

> 同一个文件可以同时被多个进程打开，甚至可以被同一个进程打开（导致同一个文件有多个文件描述符），这取决于文件组织和文件系统。描述符上的操作，如移动文件指针或关闭它是独立的（它们不会影响同一文件的其他描述符）。文件的操作（如写入）可以通过对其他描述符的操作看到（后读可以读取写入的数据）。

这是来自 [open(System call) wiki 页面](http://en.wikipedia.org/wiki/Open_%28system_call%29)

# validation - MVC3 中有没有办法为类中的组定义数据验证注释？

> ID：14189945
> 
> 赞同：1
> 
> 时间：2013-01-07T04:36:56.127
> 
> 标签：validation, asp.net-mvc-3, model

我是 MVC 的新手，最近我正在研究数据验证，我想知道不是为每个参数提供验证注释，有没有一种方法可以为类中的一组参数定义验证规则？例如，一个类是这样的：

```
namespace MvcApplication1.Models
{ 
    public class Product
    {
        public int Id { get; set; }

        [Required]
        [StringLength(10)]
        public string Param1 { get; set; }

        [Required]
        public string Param2 { get; set; }

        [DisplayName("Param3")]
        [Required]
        public string Param3 { get; set; }
    }
} 
```

有没有办法为 Param1、Param2 和 Param3 定义一个规则，例如，至少需要其中的 2 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:48:22.617

很容易使用。试试这个。 [MVC 万无一失的验证](http://foolproof.codeplex.com)

这就是您可以构建自己的自定义验证的方式。 [http://www.nickriggs.com/posts/build-model-aware-custom-validation-attributes-in-asp-net-mvc-2/](http://www.nickriggs.com/posts/build-model-aware-custom-validation-attributes-in-asp-net-mvc-2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T19:15:49.300

```
DataType

Specify the datatype of a property
DisplayName

specify the display name for a property.
DisplayFormat

specify the display format for a property like different format for Date proerty.
Required

Specify a property as required.
ReqularExpression

validate the value of a property by specified regular expression pattern.
Range

validate the value of a property with in a specified range of values.
StringLength

specify min and max length for a string property.
MaxLength

specify max length for a string property.
Bind

specify fields to include or exclude when adding parameter or form values to model properties.
ScaffoldColumn

specify fields for hiding from editor forms. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:39:41.323

对于像这样更高级的验证，我会推荐 FluentValidation [http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

您可以创建自己的自定义验证器：http: [//fluentvalidation.codeplex.com/wikipage?title= Custom&referringTitle=Documentation](http://fluentvalidation.codeplex.com/wikipage?title=Custom&referringTitle=Documentation)

# c# - 检查C#中List中是否有单个值

> ID：14189951
> 
> 赞同：-1
> 
> 时间：2013-01-07T04:37:20.600
> 
> 标签：c#, asp.net, webmatrix

如何检查单个值在列表中。我的列表包含几个随机数：`13, 55, 34, 122, 322, 2132, 4345, 3000`.

我想让一个 bool 检查列表是否包含 int 4 或任何其他数字。列表可以在列表中包含三位数或四位数的大数字。

指导我在 webmatrix 中设计帮助程序来为这个值检查提供布尔结果会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:41:40.613

试试这个，intVariable 是你要搜索的变量

```
bool isInList = intList.IndexOf(intVariable) != -1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T12:03:14.533

如果列表不是那么大，为什么不在列表中循环

```
foreach(int a in MyList)
{
   if(a == "that_value")
   {
     break;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:45:57.390

如果没有迭代（循环），你就无法逃脱。为简单起见，使用[Enumerable.Any](http://msdn.microsoft.com/en-us/library/bb534972.aspx)（在内部使用迭代器）。

```
var ints = new int[] {1,2,3,4,5};
var any5 = ints.Any( i=> i== 5); 
```

# search - 添加加载嵌入 YouTube 播放器的搜索框

> ID：14189955
> 
> 赞同：3
> 
> 时间：2013-01-07T04:38:16.267
> 
> 标签：search, iframe, youtube, embed, playlist

我已经查看并尝试了一堆不同的代码，但无法弄清楚。

我想做的是在我的页面上**添加一个搜索框**，根据**搜索查询****加载 YouTube 播放列表**并**在嵌入式播放器上播放**。

 ******我的代码**：

```
<html>
<head>
<title>Untitled Document</title>
</head>

<body>

<script type="text/javascript">

function go_get(){
 var base_url = 'http://www.youtube.com/embed?listType=search&list=' ;
 var search_field = document.getElementById('yourtextfield').text ;
 var target_url = base_url + search_field ;
 var ifr = document.getElementById('youriframe') ;
 ifr.src = target_url ;
 return false ;
}

</script> 

<form onsubmit="go_get(); return false;" >
 <input type="text"  id="yourtextfield"/>
 <input type="submit" value="Search Playlists" />
</form>

<iframe id="youriframe" width="640" height="360" ></iframe>

</body>
</html> 
```

**结果**

搜索框和播放器加载。但是，无论您搜索什么，**都会加载相同的播放列表。**

如果我右键单击视频并查看嵌入的 HTML，结果如下：

```
<iframe width="640" height="360" src="http://www.youtube.com/embed/6DYngiqZim0?
feature=player_embedded" frameborder="0" allowfullscreen></iframe> 
```

如您所见， src 已更改。YouTube 可能会阻止这种行为吗？也许我的网址是错误的？

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T10:29:21.267

只需在第 12 行将“文本”选项更改为“值”即可

```
<html> 
<head>
<title>Youtube playlist search</title>
</head>

<body>

<script type="text/javascript">

function go_get(){
 var base_url = 'http://www.youtube.com/embed?listType=search&list=';
 var search_field = document.getElementById('yourtextfield').value;
 var target_url = base_url + search_field;
 var ifr = document.getElementById('youriframe');
 ifr.src = target_url;
 return false;
}

</script> 

<form onsubmit="go_get(); return false;" >
 <input type="text"  id="yourtextfield"/>
 <input type="submit" value="Search Playlists" />
</form>

<iframe id="youriframe" width="640" height="360" ></iframe>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-03T06:10:30.830

改变：

```
var search_field = document.getElementById('yourtextfield').text ; 
```

至：

```
var search_field = document.getElementById('yourtextfield').value ; 
```****

# ios - 专门为 iOS 6 开发是否安全？

> ID：14189966
> 
> 赞同：0
> 
> 时间：2013-01-07T04:39:36.600
> 
> 标签：ios, ios6

我听说很多用户在 Google 为其发布地图应用程序后安装了 iOS 6，但是否有足够的新用户可以安全地为 iOS 6 开发？

它是否因人口统计而异？

我正在制作的应用程序将在一周内发布，我不知道是否适合iOS 5+或iOS6。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:45:54.817

老实说，你会为 iOS 6 获得一个坚实的用户群。回到 iOS 5 会很棒，但我有一个朋友专门为 iOS 6 开发了一个应用程序，它已经获得了很大的用户群和一些牵引力。

需要考虑的一些事情是第一代 iPad 不兼容，3GS 以下的任何 iPhone 也不兼容。

只为 iOS 6 开发的原因就在那里，例如如何使用 AutoLayout 而不会在 iOS 5 上崩溃。

我估计有超过 2 亿台 iOS 6 设备，不是一个小数目！

个人觉得为 iOS 5 做的努力是值得的，潜在用户群肯定会显着增加，老实说，努力没有那么大，你应该把更多的精力放在为 iPhone 5 做上。

然而，众所周知，iOS 用户升级速度很快，而且苹果擅长为大多数手机分配操作系统，这与谷歌/Android 不同。

* * *

我会说它在人口统计上会有很大差异。美国肯定会保留大部分更新，而且永远都是这样。虽然像印度这样的地方不会——而且印度肯定拥有不断增长的移动应用程序用户群。

显然，如果您正在构建仅适用于 iOS 6 的功能，这可能会妨碍您，但您必须做出牺牲。

* * *

在 Google Maps/Apple Maps 惨败之后，iOS 版 Google Maps 有所作为，但并没有太大的不同。它增加了大约 30%，这**很好**，但不是致命的差异。

它真的适用于**你的**应用程序、它的功能、它的类型、它的潜力、它的目标市场。哦！我说了什么？目标市场？是的！最重要的是，如果您的目标是教育（学校）和儿童应用（家庭应用），那么我**绝对会**支持 iOS 5。

如果您正在开发社交网络、旅行、游戏或生产力应用程序（例如），我会宽容，取决于上述其他因素。

希望这有帮助。

# c++ - 指向字符数组 C++ 的指针的问题

> ID：14189967
> 
> 赞同：10
> 
> 时间：2013-01-07T04:39:39.350
> 
> 标签：c++

我有我认为应该是一个非常简单的代码片段来编写，尽管由于我不明白的原因我无法编译。

以下简化代码将无法编译：

```
char buffer[9] = "12345678";
char* pBuffer = &buffer; 
```

编译器 (g++) 抛出以下错误：

`error: cannot convert 'char (*)[9]' to 'char*' in initialization`

C++ 不完全是我的“本机”语言，但我所看到的任何地方都告诉我这应该可以工作。非常感谢任何想法或建议。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-07T04:43:24.663

而不是获取数组的地址，而是写

```
char buffer[9] = "12345678";
char *pBuffer = buffer; 
```

* * *

**编辑**：这一切是什么意思？

*   `T`长度类型的数组`n`是内存中的（连续）序列`n` `T`。

*   指针是内存地址。

[例如](http://c-faq.com/aryptr/aryptr2.html)，下面的代码

```
char a[5] = "hello";
char *p = "world"; 
```

对应内存中的以下情况：

![将数组与指针进行比较。](../Images/ae477cd97b1c04866d6db83825477a51.png)

在您的代码中，您创建了一个数组

```
char buffer[9] = "12345678"; 
```

与创建数组的方式相同`char a[5] = "hello"`。您打算创建一个指向`char *`数组第一个字符的指针，就像`char *p`上面指向数组的第一个字符一样`"world"`。

当使用“类型数组”（此处`buffer`）类型的表达式时，它总是“衰减”到指向第一个元素的指针，除非

`1.`该表达式用作[sizeof](http://en.wikipedia.org/wiki/Sizeof)的操作数（在 中`sizeof(buffer)`，`buffer`不会衰减为指针）

`2.`该表达式用作[一元 &](http://en.wikipedia.org/wiki/Reference_%28computer_science%29)的操作数（在 中`&buffer`，`buffer`不会衰减为指针）

或者

`3.`表达式是字符数组的字符串字面量初始化器（在 中`char someBuffer[3] = "ab"`，字符串字面量`"ab"`是一个数组，不会衰减为指针）。

这[在标准的第 6.2.2.1 节](http://eli-project.sourceforge.net/c_html/c.html#s6.2.2.1)中列出：

> 729 除非它是 sizeof 运算符或一元 & 运算符的操作数，或者是用于初始化数组的字符串字面量，否则“类型数组”类型的表达式将转换为“类型指针”类型的表达式指向数组对象的初始元素并且不是左值。

`char *pBuffer`因此，创建指向数组中第一个字符的指针所需要做的就是写

```
char *pBuffer = buffer; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-07T09:19:15.477

*   该声明创建了一个字符`char buffer[9] = "12345678";`数组。 这里，是它的**第一个*****元素***的地址，而不是**数组**的地址。 `9`
    `buffer`

****   `char* pBuffer = buffer;`是一个正确的表达式，因为`pBuffer`它是一个指向 char 的指针，并且可以寻址第一个元素。

    *   但是表达式`char* pBuffer = &buffer`是**错误**的，因为`pBuffer`无法寻址数组。（*代码中的错误，`&buffer`数组地址如下所述*）*** 

 ***## `buffer`和之间的区别`&buffer`

`&buffer`表示**数组的地址。**和的*值*实际上是相同的，但在*语义上*两者是不同的。一个是 char 的地址，而另一个是 9 个字符的数组的地址。`buffer``&buffer`

 *```
buffer[9] = "12345678";

+----+----+----+---+---+----+----+----+---+----+ 
| '1'| '2' |'3'|'4'|'5'| '6'| '7'|'8' | 0 |  ...........
+----+----+----+---+---+----+----+----+---+---+----+  
 201   202  203 204 205 206  207   208 209 210  211
  ^     ^                                         
  |     |                                         
(buffer) (buffer + 1)                                         
|                                         |
|-----------------------------------------|--------
|201                                      | 210
  ^                                          ^
  |                                          |
(&buffer)                                 (&buffer + 1) 
```

[我使用十进制数字而不是十六进制地址]

即使 is 的值和is`buffer`的`201`值，它们的 *含义*也不同：`&buffer``201`

 **   `buffer`: 第一个元素的地址——它的类型是`char*`.
*   `&buffer`: 完整的 char 数组的地址——它的类型是`char(*)[9]`.

此外，要**观察差异**，请添加`1`：

`buffer + 1`给出`202` 的是第二个数组元素的地址，`'2'`但
`&buffer + 1`给出`210` 的是下一个数组的地址。

在我的系统上，我编写了以下代码：

```
int main(){
   char buffer[9] = "12345678";
   char (*pBuffer)[9] =  &buffer; 

   printf("\n %p, %p\n",buffer, buffer+1);
   printf("\n %p, %p\n",(&buffer), (&buffer+1));
} 
```

输出如下：

```
0xbfdc0343, 0xbfdc0344

0xbfdc0343, 0xbfdc034c 
```

[**[回答]**]

这**就是错误的原因**：

> 错误：无法在初始化中将 'char ( *)[9]' 转换为 'char '*

您正在尝试将`'char (*)[9]'`类型值分配给`char*`.

*   `char (*ptr2)[9];` 这里`ptr2 is pointer to an array of 9 chars`, 而这一次
    `ptr2=&buffer`是一个有效的表达式。

**如何更正您的代码？**

正如内特钱德勒的回答：

```
char buffer[9] = "12345678";
char* pBuffer =   buffer; 
```

或其他方法，

```
char buffer[9] = "12345678";
char (*pBuffer)[9] =  &buffer; 
```

您选择哪种取决于您的需要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-07T04:48:35.627

数组衰减为指针，你只需要

```
char* pBuffer = buffer; 
```

还结帐：[std::decay](http://en.cppreference.com/w/cpp/types/decay)

```
 std::cout << "int[] -> int*; // " << std::boolalpha
              << std::is_same<int *, std::decay<int[]>::type>::value; 
```

输出：

```
int[] -> int*; // true 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T04:49:02.403

错误信息非常清楚；`&buffer`是类型`char (*)[9]`，即指向具有 9 个元素的 char 数组的指针（是的，数组是完全成熟的类型）。

这与`char*`. 但是，数组在需要时会降级为指向第一个元素的指针，所以......

```
char *pbuffer = buffer; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-07T06:12:34.940

数组名表示它的基地址，所以如果只写缓冲区，则表示缓冲区[0]的地址。如果你使用 &buffer，你需要在 char** 中而不是在 char * 中。

所以，

```
char* pBuffer = buffer; 
```

按照建议是正确的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-07T04:49:11.450

因为编译器无法将 char( *)[] 隐式转换为 char*。所以你需要显式类型转换

```
char buffer[9] = "12345678";
char* pBuffer = (char*)&buffer; 
```*****

# android - 无法设置列表视图文本

> ID：14189972
> 
> 赞同：0
> 
> 时间：2013-01-07T04:40:13.833
> 
> 标签：android, listview, text

我正在使用 json 解析器将图像 url 和描述传递到我的列表视图中。现在我设法加载了图像，但是如何更改列表视图的文本？目前它只显示第 0 项、第 1 项等等。我如何将描述传递给lazyadapter？

主要活动：

```
public class MainActivity extends Activity {

    // CREATING JSON PARSER OBJECT
    JSONParser jParser = new JSONParser();
    JSONArray guide = null;
    ListView list;
    LazyAdapter adapter;
    String[] mImageIds;
    ArrayList<String> guideList =new ArrayList<String>();
    ArrayList<String> descriptionList =new ArrayList<String>();

    // GUIDE URL
    private static String url_guide = "http://58.185.41.178/magazine_android/get_guide.txt";
    private static final String TAG_GUIDES = "guides";          //the parent node of my JSON
    private static final String TAG_DESCRIPTION = "description";        
    private static final String TAG_IMAGE = "image";        

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

     // LOADING Guide IN BACKGROUND THREAD
        new LoadGuide().execute();

        list=(ListView)findViewById(R.id.list);
        adapter=new LazyAdapter(this,guideList);
        list.setAdapter(adapter);

        Button b=(Button)findViewById(R.id.button1);
        b.setOnClickListener(listener);
    }

    @Override
    public void onDestroy()
    {
        list.setAdapter(null);
        super.onDestroy();
    }

    public OnClickListener listener=new OnClickListener(){
        @Override
        public void onClick(View arg0) {
            adapter.imageLoader.clearCache();
            adapter.notifyDataSetChanged();
        }
    };

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadGuide extends AsyncTask<String, String, String> {

        /**
         * getting All videos from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_guide, "GET", params);

            // CHECKING OF JSON RESPONSE
            Log.d("All guide: ", json.toString());

            try {
                guide = json.getJSONArray(TAG_GUIDES);
                for (int i = 0; i < guide.length(); i++) {
                    JSONObject c = guide.getJSONObject(i);

                    //String title = c.getString(TAG_DESCRIPTION);
                    String image = c.getString(TAG_IMAGE);
                    String description = c.getString(TAG_DESCRIPTION);

                    guideList.add(image);
                    descriptionList.add(description);
                    System.out.println(guideList);
                    }           

            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {

            // UPDATING UI FROM BACKGROUND THREAD
            runOnUiThread(new Runnable() {
                public void run() {

                    /**
                     * Updating parsed JSON data into ListView
                     * */ 
                    adapter.notifyDataSetChanged();
                }
            });

        }

    }

    } 
```

图像适配器：

```
public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<String> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<String> guideList) {
        activity = a;
        data=guideList;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.item, null);

        TextView text=(TextView)vi.findViewById(R.id.text);;
        ImageView image=(ImageView)vi.findViewById(R.id.image);
        text.setText("item "+position);
        imageLoader.DisplayImage(data.get(position), image);
        return vi;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:45:04.860

在您的适配器中，您正在让 TextView 专门说“项目 1”、“项目 2”等。您需要做的是在 Adapter 构造函数中添加您的 descriptionList

```
public LazyAdapter(Activity a, ArrayList<String> guideList, ArrayList<String> descriptionList) { 
```

然后做

```
text.setText(descriptionList.get(position)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T04:46:56.513

当您的活动调用 adapter.notifyDataSetChanged() 时，会强制重新绘制列表中的每个项目。这将触发对适配器的 getView() 方法的调用。所以你的逻辑属于 getView() 方法：

```
text.setText(descriptionList.get(position)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T04:47:17.653

对 guidelist 和 descriptionlist 使用单个 Hashmap，然后将其传递给lazyadapter 构造函数。在 getview() 方法中使用 hashmap 的描述部分来设置文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-07T05:01:19.210

@user1933630

```
 descriptionList.add(description.subString(1,description.length()-1); 
```

# testing - 测试中的文件上传路径

> ID：14189973
> 
> 赞同：0
> 
> 时间：2013-01-07T04:40:23.620
> 
> 标签：testing, grails, geb

geb 测试在 grails 应用程序中测试文件上传。根据[文档](http://www.gebish.org/manual/0.7.0/navigator.html#file_upload)，必须在测试中指定文件的绝对路径。是否可以通过在 grails 源代码树中包含一个文件然后从 geb 测试中获取其绝对路径来使测试在开发人员/机器之间更具可移植性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:57:08.197

你可能有兴趣做这样的事情

[http://www.mkyong.com/java/how-to-get-the-filepath-of-a-file-in-java/](http://www.mkyong.com/java/how-to-get-the-filepath-of-a-file-in-java/)

在**获取文件路径示例**中，他创建了一个临时文件，然后获取其文件路径。如果您需要一个特定的文件，那么我建议您在创建它之后构建/写入它，这样您就可以随时从您的应用程序访问一个用户/环境免费文件。

我曾经遇到过这样的问题，使用 grails 将照片上传到服务器，为了测试或重复操作，我创建了它并在运行时添加了 base64 代码。

希望能帮助到你。祝你好运！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:38:16.213

我刚结束使用`System.properties['base.dir']`来获得我的应用程序的真实路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T14:33:03.483

```
String cd = new File(".").getAbsolutePath().replace(".","");
String file = cd + "file.jpg"
println file 
```

它对我有用，在 Windows 和 linux 上。需要 CI 和本地构建测试。

# c++ - Eigen c ++中的逗号初始化问题

> ID：14189974
> 
> 赞同：2
> 
> 时间：2013-01-07T04:40:55.227
> 
> 标签：c++, initialization, comma, eigen

我有一个问题，这里的 Eigen 教程中指示的逗号初始化[似乎](http://eigen.tuxfamily.org/dox/TutorialMatrixClass.html)不起作用。

我有一个系统，其中有一个初始化向量的主要部分：

主要的：

```
VectorXd v; 
```

和一个功能：

```
double useVector(VectorXd &v) {
    dataI = model_.find();
    v << model_[dataI].v[0], model_[dataI].v[1], model_[dataI].v[2], 1;
    return dataI;
} 
```

**注意：**该函数的使用方式如下：

```
double distance = useVector(v); 
```

现在`model_[dataI].v`是一个`double[3]`，它肯定是有效的。我的理解是，这与此相同：

```
VectorXd v;
v << 1, 2, 3,
     4, 5, 6,
     7, 8, 9; 
```

但它不起作用，代码在函数的逗号初始化阶段出现段错误。

注意：这虽然有效：

```
v.resize(4)
v[0] = model_[dataI].v[0];
v[1] = model_[dataI].v[1];
v[2] = model_[dataI].v[2];
v[3] = 1; 
```

只要 v 像这样初始化：

```
VectorXd v(4); 
```

这立即让我想知道调整大小的意义（但如果我把它拿走，那么它会再次出现段错误）。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T09:18:11.173

**是的，在使用逗号初始值设定项之前，必须**将向量 v调整为适当的大小。

# django - Request.user 是经过身份验证后的 SimpleLazyObject

> ID：14189979
> 
> 赞同：1
> 
> 时间：2013-01-07T04:41:42.503
> 
> 标签：django

我不完全确定为什么。我已经阅读过有关此问题的类似问题，并且一致认为您需要“用户” request.user 才能真正成为用户对象......但我有。我有代码

```
if request.user.is_authenticated()   
    context.update({'username':request.user['username']}) 
```

但是在尝试访问用户名字段时，我不断收到**“SimpleLazyObject”对象没有属性“_ *getitem* _”错误**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T04:44:14.810

用户名可作为属性访问（`request.user`可以是`auth.User`实例，也可以是`AnonymousUser`具有类似接口的实例）。试试这个：

```
if request.user.is_authenticated()   
    context.update({'username': request.user.username}) 
```

# java - 尝试部署到 Google App Engine 时出错

> ID：14189984
> 
> 赞同：0
> 
> 时间：2013-01-07T04:42:00.350
> 
> 标签：java, google-app-engine, class

尝试部署到 Google App Engine 时出现以下错误，这是一个在 localhost 上成功运行的应用程序。我正在使用 JRE6。我究竟做错了什么？

```
Preparing to deploy:
    Created staging directory at: 
'C:\Users\xxx\AppData\Local\Temp\appcfg8577401854428955678.tmp'
   java.lang.RuntimeException: The application contains Java 7 classes, 
     but the --use_java7 flag has not been set.

Debugging information may be found in 
    C:\Users\xxx\AppData\Local\Temp\appengine-deploy2750980602587848015.log 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T04:45:22.803

错误消息提供了解决方案：

> “该应用程序包含 Java 7 类，但尚未设置 --use_java7 标志。”

您可以在 Eclipse 的“运行/调试”设置中添加其他参数。您将看到一个名为“Arguments”的选项卡，它已经包含一些标志，例如 --port=8088 或 --address=127.0.0.1 或类似的东西。

![Eclipse 中的运行/调试设置](../Images/28460771b6b58eaa0c9fe5c7ddb411fa.png)

如果您添加该标志，则警告应该消失。

或者，去掉 Java 7 类并用 Java 6 类替换它们，尤其是在添加标志没有帮助的情况下。您在问题中提到该应用程序配置为使用 Java 6 运行。如果您使用的是 Java 7，它期望 6，这可能会给编译器带来问题。

# javascript - 首次打开 IE 后，Bootstrap Carousel 停止工作

> ID：14189985
> 
> 赞同：1
> 
> 时间：2013-01-07T04:42:24.537
> 
> 标签：javascript, twitter-bootstrap, carousel

Bootstrap 2.0.2 Carousel 不适用于 IE (7~10)。

我一开始就把它设置为循环。**它会第一次切换项目**，然后一起停止工作。使用浏览器控制台发送调用，例如`$('.carousel').carousel(12)`将简单地返回轮播容器对象。

我添加了“幻灯片”类，但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T04:42:24.537

这是由引导程序[的一些错误引起的。](https://github.com/twitter/bootstrap/issues/2945)升级它可能会解决问题。我采取了修改轮播代码的路线：

```
 ...
  if (!$.support.transition && this.$element.hasClass('slide')) {
    this.$element.trigger('slide')
  ... 
```

到：

```
 ...
  if($.browser.msie){
    this.$element.trigger('slide')
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T15:27:23.557

同样的问题，我在 bootstrap 2.0.3 上，但无法升级。如果您在 bootstrap.js 文件的顶部看到一个名为 bootstrap-transition.js 的部分。

更新：

```
transEndEventNames = {
           'WebkitTransition' : 'webkitTransitionEnd'
        ,  'MozTransition'    : 'transitionend'
        ,  'OTransition'      : 'oTransitionEnd'
        ,  'msTransition'     : 'MSTransitionEnd'
        ,  'transition'       : 'transitionend'
        } 
```

到：

```
transEndEventNames = {
           'WebkitTransition' : 'webkitTransitionEnd'
        ,  'MozTransition'    : 'transitionend'
        ,  'OTransition'      : 'oTransitionEnd otransitionend'
        ,  'transition'       : 'transitionend'
        } 
```

这为我修好了。

# jquery - 从动态行中获取动态下拉值

> ID：14189991
> 
> 赞同：0
> 
> 时间：2013-01-07T04:43:33.130
> 
> 标签：jquery

是否可以使用此脚本获取每行下拉列表的值并将其放入文本字​​段中。例如，单击“+”按钮并单击下拉菜单后，下拉菜单的值将显示在文本字段中。这是代码：

```
<html>
<head></head>
<body>
<form>
<table>
<tr>
  <td>Name:- </td>
  <td><input type="text" name="userid" id="userid"/></td>
</tr>

<tr>
  <td>Gender:- </td>
  <td><select name="select_gender" id="select_gender">
<option value="M">Male</option>
<option value="F">Female</option>
</select></td>
</tr>
<tr>
  <td>City:- </td>
  <td><input type="text" name="city" id="city"/></td>
</tr>
<tr>    
<td><input type="button" id="savebtn" value="Save"/></td>
</tr>

</table>
<div id="selected_text"> 

</div>
<div id="selected_urls"> 
<a href="http://msatuniverse.net/main.aspx">E-Support </a>
<a href="http://ontime.mahindrasatyam.com/">Ontime </a>
</div>
<table>
<tr>
<td>
<table id="fmly_dtls" border=1>
    <tr>
        <td>
            <input type="text" id="member_nm">
                </td> 
        <td>
            <select id="select_member_relation" onchange="">
                <option value="F">Father</option>
                <option value="M">Mother</option>
                <option value="H">Husband</option>
                <option value="W">Spouse</option>
                <option value="S">Son</option>
                <option value="D">Daughter</option>
            </select>
                </td>  
        <td>
            <input type="text" id="member_dob">
                </td> 
<td>
            <input type="button" id="madd" value="+">/<input type="button" id="mdelete" 

value="-">
                </td> 

         </tr>
</table>
</td>
</tr>

<tr>
<td>
<table>
<tr>
    <td><input type="button" id="finalbtn" value="Final"></td>
</tr>
</table>
</td>
</tr>
</table>

</table>
</form>
</body>
</html>

<script type="text/javascript" src="jquery-1.8.3.js"></script>          
 <script type="text/javascript">
$(document).ready(function() {

    var windowSizeArray = ["width=200,height=200", "width=300,height=400,scrollbars=yes"];
    $("a[href]").click(function() {
        alert('Hi');

        var url = $(this).attr("href");
        var windowName = "popUp"; //$(this).attr("name"); 
        var windowSize = windowSizeArray[$(this).attr("rel")];
        alert(windowSize);
        window.open(url, windowName, windowSize);
    });

    $("#madd").click(function() {

        //.html to find out the html content data.val() is not working when selected div tag.
        if ($("#selected_text").html() != '') {
            //we need to findout particular textboxes using find function
            $(this).closest("tr").clone(true).appendTo("#fmly_dtls").find('input').val('');
        } else {
            alert('Please save the data');
        }
    });
    $("#mdelete").click(function() {

        $(this).closest("tr").remove();

    });

    $("#select_member_relation").change(function(){

        $("#fmly_dtls tr").each(function(i) {

             $("#member_nm").val($(this).find("#select_member_relation").val());
             //alert('xxx');
        });

        })
        .trigger('change');

    $("#select_member_relationxx").change(function() {
        var membrdt = '';

        $("#fmly_dtls tr").each(function(i) {

            var myValue2 = $(this).find("#select_member_relation").val()
            $("#member_nm").val($(this).find("#select_member_relation").val());

                        alert(myValue3);
            alert(myValue2);
            });
        });

    $("#finalbtn").click(function() {
        var membrdt = '';

        $("#fmly_dtls tr").each(function(i) {
            var myValue2 = $(this).find("#select_member_relation").val();
            //var myValue2 = $("#select_member_relation").val();
            alert(myValue2);
            //alert(myValue2.find('member_nm'));
        });

    });
    $("#savebtn").click(function() {
        var gender = '',
            name = '',
            gender_text = '',
            address = '';
        gender = $("#select_gender").val();
        //without option:selected attribute, it can retrived the text like Male Female
        gender_text = $("#select_gender option:selected").text();
        name = $("#userid").val();
        address = $("#city").val();
        //alert(gender+','+name+','+gender_text);
        //var _this = this; //or var $_this = this; $("#selected_text").parent().html(data); 
        var data = name + ',' + gender_text + ',' + address + '<a href="http://www.google.co.in/" > google</a>';

        $("#selected_text").html(data);
        $("#selected_text").css('background-color', 'red');
        $("#selected_urls").hide();
        //$("#selected_text").html=data;
    });
});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:18:42.383

在检查小提琴之前..这里有一些你应该注意的事情..

1）ID应该始终是唯一的...您克隆的项目与原始元素具有相同的ID..所以在您的情况下，有多个具有相同名称的ID...

**更改：制作克隆元素类的所有ID..**

2）您的代码有一些解析错误，例如..输入标签未正确关闭（`<input />`）。这是次要的，但如果我们不犯这些错误会更好。

3）将所有事件选择器更改为类..（`$(".mdelete").click(function() {.. , $(".select_member_relation").change(function(){.... so on`）

4）使用此代码找到所选值并将其放入输入

```
$(this).parent().prev().find("input.member_nm").val($(this).val()); 
```

在这里[摆弄](http://jsfiddle.net/rMFMy/2/)

# c# - 创建一个事件来观察变量的变化

> ID：14189995
> 
> 赞同：11
> 
> 时间：2013-01-07T04:43:51.617
> 
> 标签：c#, .net, event-handling, microsoft-metro, inotifypropertychanged

假设我有：

```
public Boolean booleanValue;

public bool someMethod(string value)
{
   // Do some work in here.
   return booleanValue = true;
} 
```

如何创建一个在 booleanValue 更改时触发的事件处理程序？是否可以？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-07T04:47:53.420

通常避免使用公共字段。尽量将它们保密。然后，您可以使用包装器属性触发您的事件。请参阅示例：

```
class Foo
{
    Boolean _booleanValue;

    public bool BooleanValue
    {
        get { return _booleanValue; }
        set
        {
            _booleanValue = value;
            if (ValueChanged != null) ValueChanged(value);
        }
    }

    public event ValueChangedEventHandler ValueChanged;
}

delegate void ValueChangedEventHandler(bool value); 
```

这是实现您所需要的一种简单的“本机”方式。还有其他方法，甚至由 .NET Framework 提供，但上述方法只是一个示例。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-07T04:49:03.940

[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)已定义为通知属性是否更改。

将变量包装在属性中并使用[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-07T04:46:56.843

1.  将 BooleanValue 的访问更改为私有，并且只允许通过一种方法更改它以保持一致性。

2.  以该方法触发您的自定义事件

.

```
private bool _boolValue;

public void ChangeValue(bool value)
{
    _boolValue = value;
   // Fire your event here
} 
```

选项 2：使其成为属性并在 setter 中触发事件

```
public bool BoolValue { get { ... }  set { _boolValue = value; //Fire Event } } 
```

编辑：正如其他人所说`INotifyPropertyChanged`的那样是.NET标准的方式来做到这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-07T04:48:00.013

也许看看`INotifyPropertyChanged`界面。您一定会在将来再次使用它：

MSDN：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-07T04:49:23.960

```
CallingClass.BoolChangeEvent += new Action<bool>(AddressOfFunction); 
```

在你的类中使用 bool 属性过程：

```
public event Action<bool> BoolChangeEvent;
public Boolean booleanValue;
public bool someMethod(string value)
{
   // Raise event to signify the bool value has been set.
   BoolChangeEvent(value);

   // Do some work in here.
   booleanValue = true;
   return booleanValue;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-07T04:50:20.923

不，不可能*收到有关变量值更改的通知。

您可以通过使值成为某些类的属性并根据需要在更改时触发事件来实现几乎您想要的。

*) 如果您的代码是某个进程的调试器，您可以让 CPU 通知您更改 - 请参阅 Visual Studio 中的数据更改断点。这将需要至少一些本机代码，并且由于 GC 将对象移动到内存中，因此更难正确实现管理代码。