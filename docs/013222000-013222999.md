# StackOverflow 问答 13222000-13222999

# c# - 从列表中获取元素的索引

> ID：13222005
> 
> 赞同：0
> 
> 时间：2012-11-04T19:24:22.570
> 
> 标签：c#

假设我有一个名为`TheListOfMyObjects`. 在该列表中，有一个具有与值匹配的属性的对象：`MyObject.TheProperty = SomeValue`。

如何从此列表中获取前 3 个对象和后 3 个对象？

请注意，如果匹配的对象`SomeValue`位于第一个位置，那么我需要位置 2-5 的 3 个对象和最后 3 个位置的 3 个对象，总共 6 个对象。

感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:30:15.890

试试这个：

```
var theObj = TheListOfMyObjects.First(x => x.TheProperty == someValue);
var index = TheListOfMyObjects.IndexOf(theObj);
//and from there it's obvious. 
```

如果列表有可能不包含这样的元素，请使用 FirstOrDefault 并检查 theObj 上的 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T19:56:47.783

抱歉回复晚了，电脑有问题。您不必添加另一个列表，如果您的列表中至少有 7 个对象，则可以使用类似这样的方法解决极端情况：

```
 MyObject mo = list.FirstOrDefault(x => x.TheProperty.Equals(SomeValue));
            if(mo != null)
            {
                int index = list.IndexOf(mo);
                MyObject moMinus3 = list[(index - 3 + list.Count) % list.Count];
                MyObject moMinus2 = list[(index - 2 + list.Count) % list.Count];
                MyObject moMinus1 = list[(index - 1 + list.Count) % list.Count];
                MyObject mo0 = list[index];
                MyObject moPlus1 = list[(index + 1 + list.Count) % list.Count];
                MyObject moPlus2 = list[(index + 2 + list.Count) % list.Count];
                MyObject moPlus3 = list[(index + 3 + list.Count) % list.Count];
            } 
```

# javascript - 如何在 WebView 中扩展 JavaScript 控制台（匹配 ConsoleMessage.MessageLevel）

> ID：13222006
> 
> 赞同：0
> 
> 时间：2012-11-04T19:24:25.390
> 
> 标签：javascript, android, logging, webview, android-webview

[调试网络应用程序](http://developer.android.com/guide/webapps/debugging.html)：

> Android 的 WebKit 并未实现其他桌面浏览器中可用的所有控制台 API。但是，您可以使用基本的文本记录功能：
> 
> ```
> console.log(String)
> console.info(String)
> console.warn(String)
> console.error(String) 
> ```
> 
> 其他控制台功能不会引发错误，但其行为可能与您对其他 Web 浏览器的预期不同。

[android.webkit.ConsoleMessage.MessageLevel](http://developer.android.com/reference/android/webkit/ConsoleMessage.MessageLevel.html)：

> ConsoleMessage.MessageLevel 调试
> ConsoleMessage.MessageLevel 错误
> ConsoleMessage.MessageLevel 日志
> ConsoleMessage.MessageLevel 提示
> ConsoleMessage.MessageLevel 警告

* * *

在为 Android 设备开发 webapp-native-hybrid 时，我很高兴能够将 JavaScript 控制台与普通的 LogCat 合并。但是很遗憾：有一个 console.debug 会导致 MessageLevel.INFO 并且根本没有 console.verbose() （抛出错误）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:24:25.390

为了解决这个问题，我将使用一个简单（而且非常丑陋且不稳定）的适配器来扩展控制台的功能：

```
var c = window.console;
window.console = {
    debug:   function(message) { c.error("(DEBUG)#" + message); },
    verbose: function(message) { c.error("(VERBOSE)#" + message); },
    error:   function(message) { c.error(message); },
    warn:    function(message) { c.warn(message); },
    log:     function(message) { c.log(message); },
    info:    function(message) { c.info(message); }
};

for (i in c) {
    try {
        window.console[c[i]]();
    } catch(error) {
        if(verbose) console.verbose("Funktion nicht implementiert: " + c[i]);
        window.console[c[i]] = function(arguments) {
            if(debug) console.debug("Aufruf nicht implementierter Funktion: " + this);
            var funcDefArray = ("" + this).split(" ");
            c[funcDefArray[1]](arguments);
        };
    }
} 
```

此适配器在添加前缀`(DEBUG)#`或`(VERBOSE)#`作为参数给出的消息并`error()`从原始控制台对象调用时提供日志记录功能。希望这将是最少使用的级别，因此这是检查传入消息的前缀的地方。LogCat 的期望日志级别由提取的前缀选择：

```
public class CustomWebChromeClient extends WebChromeClient {
@Override
public boolean onConsoleMessage(ConsoleMessage consoleMessage) {
    String tag = TAG_JS;
    StringBuffer message = new StringBuffer(consoleMessage.message());

    MessageLevel lvl = consoleMessage.messageLevel();
    if (lvl == MessageLevel.ERROR) {
        int i = message.indexOf(")#");
        if(i > 0 && i < 8) {
            String realLevel = message.substring(1, i);
            message.replace(0, i+2, "");
            if("DEBUG".equals(realLevel)) lvl = MessageLevel.DEBUG;
            else if("VERBOSE".equals(realLevel)) lvl = MessageLevel.TIP;
            else tag += " (" + realLevel + ")";
        } else {
            String source = consoleMessage.sourceId();
            source = source.substring(source.indexOf("/js/") + 1);
            message.append(source);  
            message.append('(').append(consoleMessage.lineNumber()).append(')');
            message.append(" –&gt; ");
        }
    }

    message.append(consoleMessage.message());
    switch (lvl) {
    case ERROR:
        Log.e(tag, message.toString());
        break;
    case WARNING:
        Log.w(tag, message.toString());
        break;
    case LOG:
        Log.i(tag, message.toString());
        break;
    case DEBUG:
        Log.d(tag, message.toString());
        break;
    case TIP:
        Log.v(tag, message.toString());
        break;
    default:
        Log.println(Log.ASSERT, tag, message.toString());
        break;
    }
    return true;
}
} 
```

我尝试通过原型来操作控制台功能，但此时我对现在获得工作结果并不熟悉。就我的目的而言，这就足够了，最终其他人可以使用这个废话。

如果有人能给我提供几行原型，我会很高兴，我希望下次我需要这样的东西时，我能自己做；）

# iphone - TouchMoved 和错误的屏幕范围？还是 iOS 中的错误？

> ID：13222013
> 
> 赞同：0
> 
> 时间：2012-11-04T19:26:00.973
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uikit

我在 iOS 中发现了有趣的错误，但试图相信我错了。你必须做两件事：

1）为iOS创建单视图模板

2）在 ViewController.m 中编写小函数：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch* touch = [touches anyObject];
    CGPoint point = [touch locationInView:[touch view]];
    NSLog(@"%@", NSStringFromCGPoint(point));
}// so u can detect points of your touch 
```

因此，如果您尝试将手指从屏幕的顶部移动到底部（纵向模式）-您会得到**[-5.5 .. 469]**范围内的点...我无法解释这一点，它只发生在设备上，在模拟器中工作正常。

**一些调试信息：**

带状态栏和 NO WantedFullScreenLayout 范围是：[-25.5 .. 449]

带状态栏和YES WantsFullScreenLayout 范围是：[-5.5 .. 469]

没有状态栏和 NO/YES FullScreenLayout 范围是：[-5.5 .. 469]

* * *

带状态栏和 NO WantsFullScreenLayout view.frame 是 (0, 20, 320, 460) 和 view.bounds 是 (0, 0, 320, 460)

带状态栏和YES WantsFullScreenLayout view.frame 是 (0, 0, 320, 480) 和 view.bounds 是 (0, 0, 320, 480)

没有状态栏和 NO/YES FullScreenLayout view.frame 是 (0, 0, 320, 480) 并且 view.bounds 也是 (0, 0, 320, 480)

* * *

请帮助解释这些东西，它只发生在设备上......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T19:52:40.657

因为状态栏超出了视图的范围。当您触摸状态栏时，您会得到负值。

尝试这个：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
{
    UITouch* touch = [touches anyObject];
    CGPoint point = [touch locationInView:[touch window]];
    NSLog(@"%@", NSStringFromCGPoint(point));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:19:24.530

根 viewController 的视图总是像纵向模式一样。您应该在根视图内插入一个新视图。根据苹果的说法，这个新视图将正确运行，将给出正确的大小和坐标。

例如 ;

```
UIView *v = self;
while ([[v superview] superview] != NULL) {
    v = [v superview];
}

UITouch *touch = [touches anyObject];
CGPoint touchPoint = [touch locationInView:v]; 
```

touchPoint 将是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T07:50:05.783

我从 Apple 的手指绘画程序教程之一中找到了这一点：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    CGRect              bounds = [self bounds];
    UITouch*    touch = [[event touchesForView:self] anyObject];
    firstTouch = YES;
    // Convert touch point from UIView referential to OpenGL one (upside-down flip)
    location = [touch locationInView:self];
    location.y = bounds.size.height - location.y;
} 
```

看起来您需要将触摸转换为 OpenGL 坐标才能获得您期望的结果。希望这可以帮助。

# php - 使用 CURL 使用 json 的 GET 使用 PHP

> ID：13222015
> 
> 赞同：0
> 
> 时间：2012-11-04T19:26:04.860
> 
> 标签：php, json, curl

我对 PHP 非常陌生，并且已经对如何使用 CURL 调用 json 的 GET 函数进行了一些研究，但是有些事情我做得不对。也许有人可以指出我正确的方向。我希望我能正确沟通。谢谢。

在我的浏览器中，当我输入： [https://myWebSite.com/api/v1/people/26.json](https://myWebSite.com/api/v1/people/26.json)？我的浏览器返回一个 ID 为 26 的人以及与他们关联的所有字段。

我现在正在尝试在 PHP 文件中执行此调用。这就是我所拥有的：

```
//jSON URL which should be requested
$json_url = 'https://myWebSite.com';

$username = 'myUsername';  // authentication
$password = 'myPassword';  // authentication

// jSON String for request
$json_string = '/api/v1/people/26.json';

// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true,
CURLOPT_USERPWD => $username . ":" . $password,   // authentication
CURLOPT_HTTPHEADER => array('Content-type: application/json') ,
CURLOPT_POSTFIELDS => $json_string
);

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results
$result =  curl_exec($ch); // Getting jSON result string
print $result;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:32:43.923

尝试将此添加到您的选项列表中：

```
CURLOPT_CUSTOMREQUEST => 'POST' 
```

**编辑：**重新阅读 OP 后，似乎对请求应该是什么有误解。如果它是对 URL 的 GET 请求，则更有可能它应该是这样的：

```
$json_string = '/api/v1/people/26.json';
$json_url = "https://myWebSite.com{$json_string}";

$username = 'myUsername';  // authentication
$password = 'myPassword';  // authentication

// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_USERPWD => $username . ":" . $password,   // authentication
); 
```

# mysql - mysql - 选择分组值

> ID：13222017
> 
> 赞同：1
> 
> 时间：2012-11-04T19:26:29.763
> 
> 标签：mysql

我有这个结果集

[http://i.stack.imgur.com/7qb5g.jpg](http://i.stack.imgur.com/7qb5g.jpg)

我正在尝试获取以下条目

获取具有 attribute_id = 5 和 value = 'Yamaha Mate V50' 和 attribute_id = 6 和 value = 2012 的条目的 ad_id

我试过像

```
SELECT ad_id FROM value WHERE attribute_id = 5 && value = 'Yamaha Mate V50' && attribute_id = 6 && value = '2012' 
```

这给出了一个空的结果集

如果我这样做了

```
SELECT ad_id FROM value WHERE attribute_id = 5 && value = 'Yamaha Mate V50' || attribute_id = 6 && value = '2012' 
```

我得到 ad_id = 1 和 3 这很好但是我也得到 ad_id = 2 这是合乎逻辑的，因为它确实有这个条件（attribute_id = 6 && value = '2012'）

那么我应该怎么做才能只选择同时满足这两个条件的 ad_id

(attribute_id = 5 && value = 'Yamaha Mate V50') "AND" (attribute_id = 6 && value = '2012')

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:33:12.280

```
SELECT ad_id FROM value
WHERE (attribute_id,value) IN ((5,'Yamaha Mate V50'),(6,'2012'))
GROUP BY ad_id
HAVING count(*)=2 
```

# html - Jquery 绑定/取消绑定

> ID：13222019
> 
> 赞同：0
> 
> 时间：2012-11-04T19:26:30.617
> 
> 标签：html, jquery-animate, bind, unbind, jquery-easing

在我的网站上，我有一个联系按钮，按下该按钮时会向下滑动包含联系表单的 div（使用 jQuery 动画）。这个 div 里面有一个关闭按钮，当按下它时它会向上滑动（它的原始位置不在屏幕上）。我需要这样做，所以当按下联系按钮时，它只工作一次，但在 div 关闭时再次工作。

我知道这使用了绑定/取消绑定功能，但是我无法让它工作。这是我的代码：

```
$(document).ready(function() {
var handler = function() {
$('.top,.left,.main,.header').animate({
top: '+=120'
}, 1300, 'easeOutBounce');
}
$('#contact').bind('click', handler);
$('#contact').unbind('click', handler);
});
$('#close').click(function() {
$('.top,.left,.main,.header').animate({
top: '-=120'
}, 1300, 'easeOutBounce');
}); 
```

我试图将其添加到的网站在这里：[www.samskirrow.com/projects/move_div](http://www.samskirrow.com/projects/move_div)

谢谢你的帮助。山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:14:11.323

想通了，决定不使用绑定，取消绑定命令，而是切换。我有一个关闭按钮，它只是扮演打开按钮的角色，因此它不会破坏切换周期。

```
$(document).ready(function() {
  $('#contact').toggle(function() {
    $('.top,.left,.main,.header').animate({
      top: '+=120'
    }, 1300, 'easeOutBounce');
  },function() {
    $('.top,.left,.main,.header').animate({
      top: '-=120'
    }, 1300, 'easeOutBounce');
  })
  $('#close').click(function() {
  $("#contact").click();
  });
}); 
```

希望这对某人有用:)

# database - 数据库问题

> ID：13222020
> 
> 赞同：0
> 
> 时间：2012-11-04T19:26:38.530
> 
> 标签：database, database-design

我在 Oracle 数据库中有一个数据库模式。我也有来自第三方供应商的数据转储。我在 Linux 机器上使用 sql 加载程序脚本加载他们的数据。

我们每天也有批量更新。

假设数据没有数据错误。例如，如果在第一天将数据即“A”插入到数据库中，并且数据“A”将不会出现在进一步的加载中（假设）。如果我们得到一个名为“A”的数据，那么我们就会发现主键违规。

问题：为了避免这些违规行为，我们应该构建一个分析器来分析数据错误还是有更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:25:18.530

我为一家公司构建了一个 ETL 系统，该公司每天提供包含业务线交易数据的平面文件。数据*应该*遵循记录的模式，但实际上每天都有许多不同类型的违规行为，并且文件到文件。

我们构建了包含所有可空列的 SQL 暂存表，其中的 varchars 大于应有的值，并使用高效的批量加载实用程序将平面文件数据加载到这些暂存表中。然后，我们在数据库的上下文中运行了一系列数据一致性检查，以确保原始（暂存）数据可以交叉加载到正确的生产表中。

在所有编辑都通过之前，暂存表环境没有任何结果。

将平面文件加载到临时表中的优势在于，您可以利用 RDBMS 来执行设置操作并轻松地将新值与以前文件中的现有值进行比较，而无需构建特殊的平面文件处理代码。

# php - 调用 REST 服务时出错

> ID：13222024
> 
> 赞同：1
> 
> 时间：2012-11-04T19:27:22.627
> 
> 标签：php, javascript, jquery, rest, cordova

我面临一个奇怪的问题。我正在尝试将 REST api 集成到 phonegap 应用程序中。当我*`http://myserver/index.php?m=login`*通过浏览器中的休息客户端请求网址时，它工作正常。

但是当我通过 jQuery ajax 调用它时，它返回以下错误：

> 警告：include(C:/Domains/my-portal.org/httpdocs/mmode/template/mobile/index.php) [function.include]：无法打开流：C:\Domains\my 中没有这样的文件或目录-portal.org\httpdocs\mmode\index.php 第 13 行
> 
> 警告：include(C:/Domains/my-portal.org/httpdocs/mmode/template/mobile/index.php) [function.include]：无法打开流：C:\Domains\my 中没有这样的文件或目录-portal.org\httpdocs\mmode\index.php 第 13 行
> 
> 警告：include() [function.include]：无法打开“C:/Domains/myportal.org/httpdocs/mmode/template/mobile/index.php”以包含（include_path='.;./includes;./pear ;C:\PHP\includes') 在第 13 行的 C:\Domains\my-portal.org\httpdocs\mmode\index.php

现在问题不是跨域脚本，因为响应头返回“ `Access-Control-Allow-Origin: *`”。而且我还在科尔多瓦设置中将域*列入白名单。*

谁能指导我这里可能是什么问题？

# java - 使用 Scanner 类时如何忽略 .txt 的第一行

> ID：13222025
> 
> 赞同：2
> 
> 时间：2012-11-04T19:27:22.720
> 
> 标签：java, java.util.scanner

我有一个文本文件，内容如下：

```
Description|SKU|Retail Price|Discount
Tassimo T46 Home Brewing System|43-0439-6|17999|0.30
Moto Precise Fit Rear Wiper Blade|0210919|799|0.0 
```

我已经有了它，以便我阅读所有内容，并且它运行良好，除了它读取第一行的事实，这是 .txt 文件的一种图例，必须忽略它。

```
public static List<Item> read(File file) throws ApplicationException {
    Scanner scanner = null;
    try {
        scanner = new Scanner(file);
    } catch (FileNotFoundException e) {
        throw new ApplicationException(e);
    }

    List<Item> items = new ArrayList<Item>();

    try {
        while (scanner.hasNext()) {
            String row = scanner.nextLine();
            String[] elements = row.split("\\|");
            if (elements.length != 4) {
                throw new ApplicationException(String.format(
                        "Expected 4 elements but got %d", elements.length));
            }
            try {
                items.add(new Item(elements[0], elements[1], Integer
                        .valueOf(elements[2]), Float.valueOf(elements[3])));
            } catch (NumberFormatException e) {
                throw new ApplicationException(e);
            }
        }
    } finally {
        if (scanner != null) {
            scanner.close();
        }
    }

    return items;
} 
```

如何使用 Scanner 类忽略第一行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T19:28:12.990

只需在任何处理之前调用scanner.nextLine() 一次就可以了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T19:28:54.813

在循环之外调用scanner.nextLine() 怎么样。

```
scanner.nextLine();//this would read the first line from the text file
 while (scanner.hasNext()) {
            String row = scanner.nextLine(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T19:29:28.873

```
scanner.nextLine();
while (scanner.hasNext()) {
      String row = scanner.nextLine();
      .... 
```

# objective-c - iOS 开发者证书过期

> ID：13222027
> 
> 赞同：-1
> 
> 时间：2012-11-04T19:27:33.847
> 
> 标签：objective-c, ios

我最近通过支付 99 美元的费用更新了我的 iOS 会员资格。但是，我的所有证书似乎都已过期，因此我正在尝试手动更新它们。因此，我进入配置门户--> 证书--> 开发并颁发了我下载的新证书。所以现在我从 Apple 下载了 .cer 文件。我相信上次我所要做的就是双击这个文件，它会询问我是否想将它添加到钥匙串中。

这一次，除了启动钥匙串访问之外什么都没有发生，但它没有问我任何问题，而且我没有在证书部分或密钥部分看到证书。

我需要做什么才能将此文件放入 Xcode 以继续开发？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:35:09.013

[这里：](http://www.buildingiphoneapps.com/buildingiphoneapps/2010/4/8/how-to-renew-iphone-development-certificate.html)

> 获得新配置文件后，下载它们并将它们导入 Xcode Organizer，然后与开发设备同步。你完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:35:35.347

进入 XCode Option Devices，选择 Provisioning Profiles，然后点击右下角的 Refresh。

# jquery - jQuery .add() 不能正常工作

> ID：13222028
> 
> 赞同：0
> 
> 时间：2012-11-04T19:27:39.763
> 
> 标签：jquery, arrays, slidetoggle

我需要`.slideToggle()`同时两个div。

为了做到这一点，我曾经`.add()`将元素添加到数组中并同时应用于`.slideToggle()`它们。

当我测试我的代码时，我发现有些东西很可疑。

我深入了解了问题的根源，并且能够确定`.add()`导致问题的原因 - 不知道为什么。

无论如何，这里是[jsfiddle](http://jsfiddle.net/fewpb/)，所以你可以看到我在说什么（你需要更改 javascript 来测试 [正确的方法和错误的方法]）。

通常我可以使用工作方法，但我真的很想了解为什么`.add()`它不能正常工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:32:40.273

在工作示例中，您`changeItems`仅在一次调用中作为回调传递。

你使用`jQuery.add`and then调用它两次`slideToggle`。

# android - 如何使用 AndEngine 加载 TMX

> ID：13222030
> 
> 赞同：1
> 
> 时间：2012-11-04T19:27:41.647
> 
> 标签：android, andengine, tmx

我只是在这里遇到了 TMX 和 AndEngine 的问题，我用 mapeditor 创建了一个 tmx 文件，然后将它加载到我的游戏中，我得到了这个：

```
11-05 02:07:43.656: E/AndEngine(1482): GameScreen.onCreateScene failed. @(Thread: 'GLThread 70')
11-05 02:07:43.656: E/AndEngine(1482): java.lang.NullPointerException
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.extension.tmx.TMXLayer.addTileByGlobalTileID(TMXLayer.java:277)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.extension.tmx.TMXLayer.initializeTMXTilesFromDataString(TMXLayer.java:247)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.extension.tmx.TMXParser.endElement(TMXParser.java:197)
11-05 02:07:43.656: E/AndEngine(1482):  at org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:156)
11-05 02:07:43.656: E/AndEngine(1482):  at org.apache.harmony.xml.ExpatParser.appendBytes(Native Method)
11-05 02:07:43.656: E/AndEngine(1482):  at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:513)
11-05 02:07:43.656: E/AndEngine(1482):  at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:474)
11-05 02:07:43.656: E/AndEngine(1482):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:321)
11-05 02:07:43.656: E/AndEngine(1482):  at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:279)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.extension.tmx.TMXLoader.load(TMXLoader.java:117)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.extension.tmx.TMXLoader.loadFromAsset(TMXLoader.java:102)
11-05 02:07:43.656: E/AndEngine(1482):  at com.zk.tank.GameScreen.onCreateScene(GameScreen.java:51)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateScene(SimpleBaseGameActivity.java:48)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.ui.activity.BaseGameActivity$3.onCreateResourcesFinished(BaseGameActivity.java:169)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.ui.activity.SimpleBaseGameActivity.onCreateResources(SimpleBaseGameActivity.java:43)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.ui.activity.BaseGameActivity.onCreateGame(BaseGameActivity.java:181)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.ui.activity.BaseGameActivity.onSurfaceCreated(BaseGameActivity.java:110)
11-05 02:07:43.656: E/AndEngine(1482):  at org.andengine.opengl.view.EngineRenderer.onSurfaceCreated(EngineRenderer.java:80)
11-05 02:07:43.656: E/AndEngine(1482):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1494)
11-05 02:07:43.656: E/AndEngine(1482):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1240) 
```

这是我的tmx文件，我该如何解决，谢谢大家，对不起我的英语不好

```
<?xml version="1.0" encoding="UTF-8"?>
<map version="1.0" orientation="orthogonal" width="20" height="15" tilewidth="32" tileheight="32">
 <properties>
  <property name="level" value="1"/>
 </properties>
 <tileset firstgid="1" name="tank_tile_set" tilewidth="32" tileheight="32">
  <image source="tilesets/tank_tile_set.png" width="1024" height="1024"/>
  <tile id="30">
   <properties>
    <property name="type" value="ALL"/>
   </properties>
  </tile>
 </tileset>
 <layer name="background" width="20" height="15">
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAA5XSSS9DURTA8ds2aZuI+RMgQSLmT4AEG0PwBZCYV/gCSAyttjaGrZZW0NbGsNXSmraGLRLz9BH8b6rp69VXkbxf3j3vnnNyT951G4TwYA3rKBdCVKASVXDACRcW8I4PfOJLJOq88CGEMI5wjBZyWtGGdvgRQBA7yCQnC9nI0dRFEMUoOWMYxyLxEpaxYkiO9dYyrxo1qIWZPhZYsUu8h30cGJJjvbXM4xFGmFCMEpTi8o9z6K0LqC1EERrRhOYU86rn0O5pv9dRW48G9KEfA8q8src87xWucfPTJ95D+72b2h70YhozmBXJ9elmVfcmqJ3EFLzwYUOZV51V7z/JeJVaNzyIIIoTZV51Vu1a3TukNoQwHvCIpzTzpruXMr6l9g73MBNbYP3Hfft1/2CECR307ESXcj69dap5c5GHfNhgxzwcGKbvCE5xhnNciNh+Bu9BDIlEXrzOCRc2sYVt+GVvmYNnvOAVbyK2X8Z7DjaRyIvXBRDEN9foDnOwBAAA
  </data>
 </layer>
 <layer name="rock" width="20" height="15">
  <properties>
   <property name="type" value="ROCK"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAA5vNyMAwe4jjP0iY2uZiswef/cS6g5ruHaxm0cIthOIAX3zgM49YewYbplZaIzX9EmsntcyEmQEAk0W7NbAEAAA=
  </data>
 </layer>
 <layer name="bush" width="20" height="15">
  <properties>
   <property name="type" value="B"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAA5vNyMAwexRj4Fgm6ppXCzQvjgwzY3HoA5lXR6J5ILNqcegh1Tx8ZiGbB3I7Lj8QaxY295Ebnvj8i81MmDp0mlJ7a6lgFrKZ1DIL2UxqmUVNDABjR6L7sAQAAA==
  </data>
 </layer>
 <layer name="wonder" width="20" height="15">
  <properties>
   <property name="type" value="WONDER"/>
  </properties>
  <data encoding="base64" compression="gzip">
   H4sIAAAAAAAAA5vNyMAwexSP4lE8ionEpcwMDGXM1DNvKtCsaUSaBwBrtIRdsAQAAA==
  </data>
 </layer>
</map> 
```

# javascript - 将 servlet 变量传递给 javascript

> ID：13222034
> 
> 赞同：6
> 
> 时间：2012-11-04T19:27:56.563
> 
> 标签：javascript, jsp, variables, servlets

我正在寻找传递一个servlet 变量myVar，它被传递到一个JSP 页面，并将它传递给JavaScript。JavaScript 是包含在 JSP 页面中的外部 JavaScript。

我有一个调用 JavaScript 函数的按钮，但是我无法通过 servlet 传递任何传递到 JSP 页面的变量。该按钮不是表单的一部分。

我尝试在 JavaScript 中调用一个函数：

```
var x = '<%=myVar%>'; 
```

和

```
var x = '${myVar}'; 
```

和

```
var x = '<%= (String)request.getParameter("myVar") %>'; 
```

但是，`x`总是一串我输入的内容。

我没有使用 AJAX 或 JQuery。有任何想法吗？

示例代码是一个简化版本：（所以按钮实际上是一个下拉菜单，当我更改值时会调用 js，但是，我希望在 changeCLass 中调用不属于下拉菜单的其他变量）

Servlet 端：

```
request.setAttribute("otherVars","tests"); 
```

JSP：

```
<script type="text/javascript" src="external.js"></script>

<select name="vars" id="myVars" onchange="changeClass(this)">
<option value='1' selected="selected">1</option>
</select> 
```

JSP 中包含的 external.js：

```
function changeClass(newVarX) {

    var newVarId =newVarX.value;
    var tID = '${otherVars}';

    alert(newVarId + " " + tID);
} 
```

输出：1 $(otherVars}

但输出应该是：1个测试

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:35:34.890

这不起作用，因为服务器不处理您的 JavaScript 文件。可能的解决方案是：

*   `tID`在 JSP 文件中全局声明变量。

    JSP：

    ```
    <script type="text/javascript" src="external.js"></script>
    <script type="text/javascript">
        var tID = '${otherVars}';
    </script>

    <select name="vars" id="myVars" onchange="changeClass(this)">
        <option value='1' selected="selected">1</option>
    </select> 
    ```

    JavaScript（外部.js）：

    ```
    function changeClass(newVarX) {
        var newVarId = newVarX.value;
        alert(newVarId + " " + tID);
    } 
    ```

*   还要处理 JavaScript 文件。您可以为 JavaScript 使用 JSP 文件并应用正确的内容类型：

    JSP：

    ```
    <script type="text/javascript" src="external.jsp"></script>

    <select name="vars" id="myVars" onchange="changeClass(this)">
        <option value='1' selected="selected">1</option>
    </select> 
    ```

    JavaScript（external.jsp --> 注意，它也是一个 JSP 文件，但内容类型设置为 text/javascript）：

    ```
    <%@ page language="java" contentType="text/javascript; charset=UTF-8" pageEncoding="UTF-8"%>
    function changeClass(newVarX) {
        var newVarId = newVarX.value;
        var tID = '${otherVars}';
        alert(newVarId + " " + tID);
    } 
    ```

# objective-c - 摆脱 UIMenuController 中的标准项目

> ID：13222042
> 
> 赞同：1
> 
> 时间：2012-11-04T19:28:46.340
> 
> 标签：objective-c, ios, first-responder, uimenucontroller

我正在开发一个非常小的 iOS 编辑器。它只有一个视图、一个按钮和一个 textView。当按钮被按下时，一个自定义 UIMenuController 会弹出 3 个选项：切换粗体、切换斜体和切换草书。

这很好用，但是，如果我在 UITextView 是第一响应者时按下按钮，它还会显示两个默认菜单项，名为“选择”和“全选”。

我想摆脱它们，但我不知道该怎么做。这是按下按钮时调用的代码：

```
- (IBAction)settingsPressed:(id)sender
{
    UIMenuController *sharedController = [UIMenuController sharedMenuController];

    UIMenuItem *menuItem1 = [[UIMenuItem alloc] initWithTitle:bold ? @"Bold off" : @"Bold on" action:@selector(toggleBold:)];
    UIMenuItem *menuItem2 = [[UIMenuItem alloc] initWithTitle:italics ? @"Italics off" : @"Italics on" action:@selector(toggleCursive:)];
    UIMenuItem *menuItem3 = [[UIMenuItem alloc] initWithTitle:underline ? @"Underline off" : @"Underline on" action:@selector(toggleUnderline:)];

    NSArray *menuItems = @[menuItem1, menuItem2, menuItem3];

    CGRect drawRect = [sender convertRect:[sender bounds] toView:self.view];
    [sharedController setTargetRect:drawRect inView:self.view];

    [sharedController setMenuItems:menuItems];
    [sharedController setMenuVisible:YES animated:YES];

    [sharedController setMenuItems:nil];
} 
```

谁能解释我如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:46:21.930

做一个子类`UITextView`。在您的子类中，如果操作是或，则覆盖`canPerformAction:withSender:`以返回。了解更多信息：`NO``@selector(select:)``@selector(selectAll:)`

*   [*管理选择和编辑菜单*](http://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/AddingCustomEditMenuItems/AddingCustomEditMenuItems.html#//apple_ref/doc/uid/TP40009542-CH13-SW3)
*   [*UIMenuController 类参考*](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UIMenuController_Class/UIMenuController.html#//apple_ref/occ/cl/UIMenuController)
*   [`-[UIResponder canPerformAction:withSender:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006783-CH4-SW17)
*   [*UIResponderStandardEditActions 协议参考*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponderStandardEditActions_Protocol/UIResponderStandardEditActions.html#//apple_ref/occ/cat/UIResponderStandardEditActions)

# android - 如何从活动动态创建按钮

> ID：13222054
> 
> 赞同：0
> 
> 时间：2012-11-04T19:30:45.513
> 
> 标签：android

> **可能重复：**
> [如何在android中动态添加按钮？](https://stackoverflow.com/questions/1851633/how-to-add-button-dynamically-in-android)

如何为活动创建动态 UI？我应该能够通过从具有所需名称的菜单中单击添加来添加按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:37:40.350

将以下代码插入菜单项的 clickListener

```
Button btn = new Button(this); 
btn.setText("myDynamicButton"); 
layout.addView(btn); 
```

您可以查看以下链接以获取更多信息

[http://androidforums.com/application-development/35582-adding-buttons-dynamically.html](http://androidforums.com/application-development/35582-adding-buttons-dynamically.html)

[https://groups.google.com/forum/?fromgroups=#!msg/android-developers/Ut-Q_J75OoM/n9siUXldslEJ](https://groups.google.com/forum/?fromgroups=#!msg/android-developers/Ut-Q_J75OoM/n9siUXldslEJ)

# scala - 在scalaquery中获取自动增量键

> ID：13222056
> 
> 赞同：2
> 
> 时间：2012-11-04T19:30:48.183
> 
> 标签：scala, jdbc, scalaquery

我想使用 scalaquery / slick 在代表 1:n 关系的 2 个表中插入行。

这些表定义如下：

```
object CompanyBaseTable extends Table[CompanyBaseTableEntry]("company") {
  def id = column[Int]("id", O PrimaryKey, O AutoInc)
}

object ProductCatalogueTable extends Table[ProductCatalogueEntry]("product_catalogue") {
 def cid = column[Int]("id", O NotNull)
 def pid = column[Long]("pid", O NotNull)
 def company = foreignKey("company_fk", cid, CompanyBaseTable)(_.id)
} 
```

我想在一个事务中插入 1:n 关系，但我不知道如何使用 ScalaQuery 来实现。在 JDBC 3 中，您可以从[语句](https://stackoverflow.com/questions/2853066/sql-java-get-value-assigned-to-auto-increment-primary-key)中获取生成的 ID ，但我看不到语句在 ScalaQuery API 中暴露的位置，我也看不到直接访问此信息的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:43:16.243

Scala-query 现在是 SLICK。github上提出了一个[问题](https://github.com/slick/slick/issues/10)，但似乎已修复。如果您想查看它，这就是[提交。](https://github.com/slick/slick/commit/09a65a8e88a0363412e218dc5c06023b69809649)

这个答案还告诉你如何获取 id [https://stackoverflow.com/a/13114949/152601](https://stackoverflow.com/a/13114949/152601)

# shell - haskell 和 Unix shell 脚本

> ID：13222057
> 
> 赞同：9
> 
> 时间：2012-11-04T19:30:59.743
> 
> 标签：shell, unix, haskell, scripting, interaction

是否有可能在 unix shell 脚本中使用 haskell 函数？

例如：

```
#!/bin/bash

...
var1=value
...

# use haskell function with input from shell variable var1
# and store the result into another shell variable var2

var2=haskellFunction $var1

... 
```

我想在shell脚本中使用变量作为haskell函数的参数和结果

提前致谢。

吉米

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T19:40:43.840

使用[开关](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/modes.html#eval-mode)[，`-e``ghc`](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/modes.html#eval-mode)例如

```
var2=$(ghc -e "let f x = x*x + x/2 in f $var1") 
```

对于字符串处理，最好结合使用[Haskell`interact`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#v:interact)和 bash 的 here 字符串：

```
var2=$(ghc -e 'interact reverse' <<<$var1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:10:14.060

此外，您可以使用以下方法编写脚本`ghci`：只需将 shebang`#!/usr/bin/env runhaskell`放在脚本的第一行并使其可执行。这样的脚本可以`sh/bash/ksh/csh/whatever`像往常一样从脚本中调用。

例如

```
$ cat > hello.hsh
#!/usr/bin/env runhaskell

main = putStrLn "Hello world!"

$ chmod +x hello.hsh
$ ./hello.hsh
Hello world!
$ 
```

# postgresql - ST_Distance 的返回值单位

> ID：13222061
> 
> 赞同：11
> 
> 时间：2012-11-04T19:31:33.750
> 
> 标签：postgresql, postgis, postgresql-9.2

我需要计算之间的距离

1.  所有建筑物和
2.  所有医院

在从 OSM 导入的地图中。

我使用以下查询：

```
SELECT building_id, hospital_id, ST_Distance(building_centroid, hospital_location)
FROM 
(
select planet_osm_polygon.osm_id building_id, ST_Centroid(planet_osm_polygon.way) building_centroid
from planet_osm_polygon
where building = 'yes'
) buildings,
(
select planet_osm_point.osm_id hospital_id, planet_osm_point.way hospital_location
from planet_osm_point  
where amenity = 'hospital') hospitals 
```

我得到奇怪的结果 - 距离总是小于 1。

我怎样才能知道报告这些值的单位？

**更新 1：**示例结果：

![上面查询的示例结果](../Images/ec9ef0249f90247de90357d4116d1968.png)

**更新 2：**此查询似乎有效

```
SELECT building_id, hospital_id, ST_Distance_sphere(building_centroid, hospital_location) distance
FROM 
(
select planet_osm_polygon.osm_id building_id, ST_Centroid(planet_osm_polygon.way)  building_centroid
from planet_osm_polygon
where building = 'yes'
) buildings,
(
select planet_osm_point.osm_id hospital_id, planet_osm_point.way hospital_location
from planet_osm_point  
where amenity = 'hospital') hospitals
ORDER BY distance 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T01:22:48.903

单位的一般规则是输出长度单位与输入长度单位相同。

OSM`way`几何数据具有纬度和经度 ( [`SRID=4326`](http://spatialreference.org/ref/epsg/4326/)) 的长度单位。因此，[ST_Distance](http://postgis.refractions.net/docs/ST_Distance.html)的输出单位也会有 lenth 度单位，这并不是真正有用的。

您可以做几件事：

*   使用[ST_Distance_Sphere](http://postgis.refractions.net/docs/ST_Distance_Sphere.html)获得以米为单位的快速/近似距离
*   使用[ST_Distance_Spheroid](http://postgis.refractions.net/docs/ST_Distance_Spheroid.html)获得以米为单位的准确距离
*   将 lat/long`geometry`数据类型转换为`geography`，这会自动使 ST_Distance 和其他函数使用米的线性单位

# c# - 希望优化 Redis 内存使用以缓存许多 JSON API 结果

> ID：13222062
> 
> 赞同：2
> 
> 时间：2012-11-04T19:31:34.673
> 
> 标签：c#, optimization, memory, redis, servicestack

我是 Redis 的新手，我只是在尝试缓存一些数据，看看内存使用/性能与 Memcached 等其他选项相比如何。我通过[IRedisClient使用 ServiceStack.Redis 客户端库](https://github.com/ServiceStack/ServiceStack.Redis/wiki/IRedisClient)

我一直在测试 Redis，25k 键/值对象正在推动大约 250MB 的内存，以及 100MB 的 dump.rdb 文件。我需要缓存比这更多的东西，并且如果可能的话，我希望减少内存消耗。我最好的猜测是每个缓存项的文本（JSON blob）大小约为 4k，但如果我的基本数学是正确的，那么从内存占用的角度来看，每个项目在 Redis 中至少消耗大约 10k。转储大小和内存大小之间的巨大差异让我有点担心。

我现在也在 64 位 VM 上运行，我知道与 32 位相比浪费了很多额外的空间，所以我也会研究一下。看起来 redis 需要 2 倍于每个指针的内存（每个缓存的键/值？）。这可能是 2.5 倍磁盘：内存比率的来源吗？

我知道我可以自己编写代码来处理进出 Redis 的数据压缩/解压缩，但只是好奇是否有某种方法可以配置客户端库以执行与说[StreamExtensions](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/StreamExtensions.cs)类似的操作。

使用模式很重，写入不频繁，和/或批量缓存刷新写入。

无论如何，寻找有关如何为给定内存量获取更多缓存项的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:07:07.073

您需要考虑多点。在下文中，我假设您的数据存储在字符串中，每个字符串都包含一个 JSON 对象。

第一点是存储 4 KB JSON 对象。与有用数据的大小相比，动态数据结构和指针导致的 Redis 开销绝对可以忽略不计。如果你有很多非常小的对象（每个键大约 80 字节），这个开销会很高，但是对于 4 KB 的对象，这应该不是问题。

所以使用 32 位版本（减少指针的大小）将无济于事。

第二点是内存占用和转储文件大小之间的差异很容易解释为转储文件中的字符串是使用 LZF 算法压缩的（JSON 确实压缩得很好）。内存占用量通常比非压缩数据的转储文件大小大得多。

现在，您在数据的实际大小和内存占用之间看到的差异可能是由于分配器**内部**碎片造成的。一般来说，人们只考虑外部碎片（即大多数人通常所说的内存碎片），但在某些情况下，内部碎片也可能代表主要开销。[请参阅此处](http://en.wikipedia.org/wiki/Fragmentation_%28computing%29)的定义。

在您的情况下，4 KB 对象实际上是最坏的情况之一。Redis 使用 jemalloc 分配器，具有[明确定义的分配类](http://www.canonware.com/download/jemalloc/jemalloc-latest/doc/jemalloc.html#size_classes)。您可以看到 4 KB 是一个分配类，下一个是 8 KB。这意味着如果您的一些对象的重量超过 4 KB（包括 8 字节的 Redis 字符串开销），则将分配 8 KB 而不是 4 KB，并且将浪费一半的内存。

您可以通过仅存储略小于 4 KB 的对象来轻松检查这一点，并计算内存占用量与有用数据的预期大小之间的比率。对大于 4 KB 的对象重复相同的操作并比较结果。

减少开销的可能解决方案：

*   客户端压缩。使用任何轻量级压缩算法（LZF、LZO、quicklz、snappy）。如果您可以将大多数对象的大小保持在 4 KB 以下，它将很好地工作。

*   更改内存分配器。Redis makefile 还支持 tcmalloc (Google allocator) 作为内存分配器。由于分配类不同，它可以减少这些 4 KB 对象的内存开销。

请注意，对于其他内存存储，您也会获得相同的开销。例如，对于 memcached，slab 分配器的工作是优化内存消耗，并最大限度地减少内部和外部碎片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T22:01:50.920

我很难理解如何有效地使用 Redis。特别是当您来自 Memcache(get/set) VS Redis（字符串、哈希、列表、集合和排序集）时。

你应该阅读这篇关于 Redis 内存使用的文章：http: [//nosql.mypopescu.com/post/1010844204/redis-memory-usage](http://nosql.mypopescu.com/post/1010844204/redis-memory-usage)。旧文章（2010 年），但仍然很有趣。

我在这里看到两个解决方案：

*   编译和使用 32 位实例。转储文件在 32 位和 64 位之间兼容，如果需要，您可以稍后切换。

*   使用哈希对我来说看起来更好：[http](http://redis.io/topics/memory-optimization) ://redis.io/topics/memory-optimization 。阅读“使用哈希在 Redis 之上抽象一个非常节省内存的普通键值存储”部分。ServiceStack.Redis 提供了一个 RedisClientHash。它应该很容易使用！

希望它可以帮助你！

# php - 'false === $var' 和 '$var === false' 有什么区别？

> ID：13222070
> 
> 赞同：1
> 
> 时间：2012-11-04T19:32:44.310
> 
> 标签：php, coding-style, boolean-logic, boolean-expression

一个比另一个更具可读性吗？起初，我不喜欢这种`false ===`方法，但随着我越来越多地看到它，我正在热身。我很确定他们会返回相同的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T19:35:23.000

绝对没有功能上的区别。

我通常更喜欢将**变量**放在第一位，然后将**常量值**放在第二位。因为这是有道理的（当你大声说出来时，你会说“我测试变量是否为假”吗？还是“我测试错误是否等于变量”？）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T19:39:57.053

我非常喜欢

```
false === $var 
```

即因为有时你只使用平等而不是寻找身份。

在这种情况下你写

```
false == $var 
```

但有时你不在游戏的顶端，可能会写

```
false = $var 
```

这将立即给出错误，让您立即修复它。

但是，如果您键入

```
$var = false 
```

你最终会用头撞墙一个小时，试图弄清楚为什么你的脚本不能正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T19:41:21.120

一位比我优秀得多的软件工程师教过我这一点。长话短说，将常量放在首位是一种最佳做法，尽管一开始可能看起来很奇怪。我说这是一种最佳实践，因为它会产生最可预测的结果：

```
$var = null;

if (false === $var) {   // NullPointerException is not thrown; only evaluates to "true" if the value "false" was assigned to $var
    ...
}

if ($var === false {    // NullPointerException will be thrown
    ...
}

if (false = $var) {     // Parse Error
    ...
}

if ($var = false) {     // the value false is assigned to $var
    ...
} 
```

# java - Spring 3.1 WebApplicationInitializer & Embedded Jetty 8 AnnotationConfiguration

> ID：13222071
> 
> 赞同：33
> 
> 时间：2012-11-04T19:32:57.710
> 
> 标签：java, spring-mvc, jetty, embedded-jetty, jetty-8

我正在尝试使用 Spring 3.1 和嵌入式 Jetty 8 服务器创建一个没有任何 XML 配置的简单 webapp。

但是，我正在努力让 Jetty 识别我的 Spring *WebApplicationInitializer*接口的实现。

项目结构：

```
src
 +- main
     +- java
     |   +- JettyServer.java
     |   +- Initializer.java
     | 
     +- webapp
         +- web.xml (objective is to remove this - see below). 
```

上面的*Initializer*类是*WebApplicationInitializer*的简单实现：

```
import javax.servlet.ServletContext;
import javax.servlet.ServletException;

import org.springframework.web.WebApplicationInitializer;

public class Initializer implements WebApplicationInitializer {

    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        System.out.println("onStartup");
    }
} 
```

同样*，JettyServer*是嵌入式 Jetty 服务器的简单实现：

```
import org.eclipse.jetty.annotations.AnnotationConfiguration;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.webapp.Configuration;
import org.eclipse.jetty.webapp.WebAppContext;

public class JettyServer {

    public static void main(String[] args) throws Exception { 

        Server server = new Server(8080);

        WebAppContext webAppContext = new WebAppContext();
        webAppContext.setResourceBase("src/main/webapp");
        webAppContext.setContextPath("/");
        webAppContext.setConfigurations(new Configuration[] { new AnnotationConfiguration() });
        webAppContext.setParentLoaderPriority(true);

        server.setHandler(webAppContext);
        server.start();
        server.join();
    }
} 
```

我的理解是，在启动时 Jetty 将使用*AnnotationConfiguration来扫描**ServletContainerInitializer*的注释实现；它应该找到*初始化*程序并将其连接到...

但是，当我启动 Jetty 服务器（从 Eclipse 中）时，我在命令行上看到以下内容：

```
2012-11-04 16:59:04.552:INFO:oejs.Server:jetty-8.1.7.v20120910
2012-11-04 16:59:05.046:INFO:/:No Spring WebApplicationInitializer types detected on classpath
2012-11-04 16:59:05.046:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/,file:/Users/duncan/Coding/spring-mvc-embedded-jetty-test/src/main/webapp/}
2012-11-04 16:59:05.117:INFO:oejs.AbstractConnector:Started SelectChannelConnector@0.0.0.0:8080 
```

重要的是：

```
No Spring WebApplicationInitializer types detected on classpath 
```

请注意，*src/main/java*在 Eclipse 中被定义为源文件夹，因此应该位于类路径中。另请注意，Dynamic Web Module Facet 设置为 3.0。

我敢肯定有一个简单的解释，但我很难看到树木的树木！我怀疑关键在于以下行：

```
...
webAppContext.setResourceBase("src/main/webapp");
... 
```

这对于使用 web.xml 的 2.5 servlet 是有意义的（见下文），但是在使用*AnnotationConfiguration*时应该是什么？

注意：如果我将配置更改为以下内容，一切都会正确启动：

```
...
webAppContext.setConfigurations(new Configuration[] { new WebXmlConfiguration() });
... 
```

在这种情况下，它会在*src/main/webapp*下找到*web.xml ，并使用它以通常的方式使用**DispatcherServlet*和*AnnotationConfigWebApplicationContext*连接 servlet （完全绕过上面的*WebApplicationInitializer*实现）。

 ***这感觉很像一个类路径问题，但我很难理解 Jetty 如何将自身与*WebApplicationInitializer*的实现联系起来 ——任何建议都将不胜感激！

有关信息，我正在使用以下内容：

Spring 3.1.1 码头 8.1.7 STS 3.1.0

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-09T13:29:00.540

问题是Jetty的`AnnotationConfiguration`类不扫描类路径上的非jar资源（WEB-INF/classes下除外）。

`WebApplicationInitializer`如果我注册了一个子类，除了容器和 web-inf 位置之外，它还会找到我的子类，`AnnotationConfiguration`该子类覆盖扫描主机类路径。`configure(WebAppContext)`

大多数子类（可悲的是）从父类复制粘贴。这包括：

*   `parseHostClassPath`在 configure 方法的末尾有一个额外的解析调用（ ）；
*   `parseHostClassPath`主要是从 `AnnotationConfiguration`'s复制粘贴的方法`parseWebInfClasses`；
*   从类加载器中获取第一个非 jar URL的`getHostClassPathResource`方法（至少对我来说，它是 eclipse 中我的类路径的文件 url）。

我使用的 Jetty (8.1.7.v20120910) 和 Spring (3.1.2_RELEASE) 版本略有不同，但我想同样的解决方案会起作用。

*编辑：我在 github 中创建了一个工作示例项目并进行了一些修改（下面的代码在 Eclipse 中可以正常工作，但在阴影 jar 中运行时却不行） - [https://github.com/steveliles/jetty-embedded-spring-mvc-noxml](https://github.com/steveliles/jetty-embedded-spring-mvc-noxml)*

在 OP 的 JettyServer 类中，必要的更改将第 15 行替换为：

```
webAppContext.setConfigurations (new Configuration []
{
        new AnnotationConfiguration() 
        {
            @Override
            public void configure(WebAppContext context) throws Exception
            {
                boolean metadataComplete = context.getMetaData().isMetaDataComplete();
                context.addDecorator(new AnnotationDecorator(context));   

                AnnotationParser parser = null;
                if (!metadataComplete)
                {
                    if (context.getServletContext().getEffectiveMajorVersion() >= 3 || context.isConfigurationDiscovered())
                    {
                        parser = createAnnotationParser();
                        parser.registerAnnotationHandler("javax.servlet.annotation.WebServlet", new WebServletAnnotationHandler(context));
                        parser.registerAnnotationHandler("javax.servlet.annotation.WebFilter", new WebFilterAnnotationHandler(context));
                        parser.registerAnnotationHandler("javax.servlet.annotation.WebListener", new WebListenerAnnotationHandler(context));
                    }
                }

                List<ServletContainerInitializer> nonExcludedInitializers = getNonExcludedInitializers(context);
                parser = registerServletContainerInitializerAnnotationHandlers(context, parser, nonExcludedInitializers);

                if (parser != null)
                {
                    parseContainerPath(context, parser);
                    parseWebInfClasses(context, parser);
                    parseWebInfLib (context, parser);
                    parseHostClassPath(context, parser);
                }                  
            }

            private void parseHostClassPath(final WebAppContext context, AnnotationParser parser) throws Exception
            {
                clearAnnotationList(parser.getAnnotationHandlers());
                Resource resource = getHostClassPathResource(getClass().getClassLoader());                  
                if (resource == null)
                    return;

                parser.parse(resource, new ClassNameResolver()
                {
                    public boolean isExcluded (String name)
                    {           
                        if (context.isSystemClass(name)) return true;                           
                        if (context.isServerClass(name)) return false;
                        return false;
                    }

                    public boolean shouldOverride (String name)
                    {
                        //looking at webapp classpath, found already-parsed class of same name - did it come from system or duplicate in webapp?
                        if (context.isParentLoaderPriority())
                            return false;
                        return true;
                    }
                });

                //TODO - where to set the annotations discovered from WEB-INF/classes?    
                List<DiscoveredAnnotation> annotations = new ArrayList<DiscoveredAnnotation>();
                gatherAnnotations(annotations, parser.getAnnotationHandlers());                 
                context.getMetaData().addDiscoveredAnnotations (annotations);
            }

            private Resource getHostClassPathResource(ClassLoader loader) throws IOException
            {
                if (loader instanceof URLClassLoader)
                {
                    URL[] urls = ((URLClassLoader)loader).getURLs();
                    for (URL url : urls)
                        if (url.getProtocol().startsWith("file"))
                            return Resource.newResource(url);
                }
                return null;                    
            }
        },
    }); 
```

*更新*：Jetty 8.1.8 引入了与上述代码不兼容的内部更改。对于 8.1.8，以下似乎有效：

```
webAppContext.setConfigurations (new Configuration []
    {
        // This is necessary because Jetty out-of-the-box does not scan
        // the classpath of your project in Eclipse, so it doesn't find
        // your WebAppInitializer.
        new AnnotationConfiguration() 
        {
            @Override
            public void configure(WebAppContext context) throws Exception {
                   boolean metadataComplete = context.getMetaData().isMetaDataComplete();
                   context.addDecorator(new AnnotationDecorator(context));   

                   //Even if metadata is complete, we still need to scan for ServletContainerInitializers - if there are any
                   AnnotationParser parser = null;
                   if (!metadataComplete)
                   {
                       //If metadata isn't complete, if this is a servlet 3 webapp or isConfigDiscovered is true, we need to search for annotations
                       if (context.getServletContext().getEffectiveMajorVersion() >= 3 || context.isConfigurationDiscovered())
                       {
                           _discoverableAnnotationHandlers.add(new WebServletAnnotationHandler(context));
                           _discoverableAnnotationHandlers.add(new WebFilterAnnotationHandler(context));
                           _discoverableAnnotationHandlers.add(new WebListenerAnnotationHandler(context));
                       }
                   }

                   //Regardless of metadata, if there are any ServletContainerInitializers with @HandlesTypes, then we need to scan all the
                   //classes so we can call their onStartup() methods correctly
                   createServletContainerInitializerAnnotationHandlers(context, getNonExcludedInitializers(context));

                   if (!_discoverableAnnotationHandlers.isEmpty() || _classInheritanceHandler != null || !_containerInitializerAnnotationHandlers.isEmpty())
                   {           
                       parser = createAnnotationParser();

                       parse(context, parser);

                       for (DiscoverableAnnotationHandler h:_discoverableAnnotationHandlers)
                           context.getMetaData().addDiscoveredAnnotations(((AbstractDiscoverableAnnotationHandler)h).getAnnotationList());      
                   }

            }

            private void parse(final WebAppContext context, AnnotationParser parser) throws Exception
            {                   
                List<Resource> _resources = getResources(getClass().getClassLoader());

                for (Resource _resource : _resources)
                {
                    if (_resource == null)
                        return;

                    parser.clearHandlers();
                    for (DiscoverableAnnotationHandler h:_discoverableAnnotationHandlers)
                    {
                        if (h instanceof AbstractDiscoverableAnnotationHandler)
                            ((AbstractDiscoverableAnnotationHandler)h).setResource(null); //
                    }
                    parser.registerHandlers(_discoverableAnnotationHandlers);
                    parser.registerHandler(_classInheritanceHandler);
                    parser.registerHandlers(_containerInitializerAnnotationHandlers);

                    parser.parse(_resource, 
                                 new ClassNameResolver()
                    {
                        public boolean isExcluded (String name)
                        {
                            if (context.isSystemClass(name)) return true;
                            if (context.isServerClass(name)) return false;
                            return false;
                        }

                        public boolean shouldOverride (String name)
                        {
                            //looking at webapp classpath, found already-parsed class of same name - did it come from system or duplicate in webapp?
                            if (context.isParentLoaderPriority())
                                return false;
                            return true;
                        }
                    });
                }
            }

            private List<Resource> getResources(ClassLoader aLoader) throws IOException
            {
                if (aLoader instanceof URLClassLoader)
                {
                    List<Resource> _result = new ArrayList<Resource>();
                    URL[] _urls = ((URLClassLoader)aLoader).getURLs();                      
                    for (URL _url : _urls)
                        _result.add(Resource.newResource(_url));

                    return _result;
                }
                return Collections.emptyList();                 
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-29T11:49:29.330

通过向 AnnotationConfiguration 显式提供我想要像这样加载的实现类（在本例中为 MyWebApplicationInitializerImpl），我能够以更简单但更有限的方式解决：

```
webAppContext.setConfigurations(new Configuration[] {
    new WebXmlConfiguration(),
    new AnnotationConfiguration() {
        @Override
        public void preConfigure(WebAppContext context) throws Exception {
            MultiMap<String> map = new MultiMap<String>();
            map.add(WebApplicationInitializer.class.getName(), MyWebApplicationInitializerImpl.class.getName());
            context.setAttribute(CLASS_INHERITANCE_MAP, map);
            _classInheritanceHandler = new ClassInheritanceHandler(map);
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-13T21:55:12.737

Jetty 9.0.1 包含一个增强功能，允许扫描容器类路径上的非 jar 资源（即类）的注释。有关如何使用它，请参阅关于以下问题的评论 #5：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=404176#c5](https://bugs.eclipse.org/bugs/show_bug.cgi?id=404176#c5)

简

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-26T17:20:17.917

下面的代码在我的 Maven 项目中起到了作用：

```
public static void main(String[] args) throws Exception {
    Server server = new Server();
    ServerConnector scc = new ServerConnector(server);
    scc.setPort(Integer.parseInt(System.getProperty("jetty.port", "8080")));
    server.setConnectors(new Connector[] { scc });

    WebAppContext context = new WebAppContext();
    context.setServer(server);
    context.setContextPath("/");
    context.setWar("src/main/webapp");
    context.getMetaData().addContainerResource(new FileResource(new File("./target/classes").toURI()));
    context.setConfigurations(new Configuration[]{
            new WebXmlConfiguration(),
            new AnnotationConfiguration()
    });

    server.setHandler(context);

    try {
        System.out.println(">>> STARTING EMBEDDED JETTY SERVER, PRESS ANY KEY TO STOP");
        System.out.println(String.format(">>> open http://localhost:%s/", scc.getPort()));
        server.start();
        while (System.in.available() == 0) {
            Thread.sleep(5000);
        }
        server.stop();
        server.join();
    } catch (Throwable t) {
        t.printStackTrace();
        System.exit(100);
    }

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-06T23:06:51.967

根据我的测试和这个线程[http://forum.springsource.org/showthread.php?127152-WebApplicationInitializer-not-loaded-with-embedded-Jetty](http://forum.springsource.org/showthread.php?127152-WebApplicationInitializer-not-loaded-with-embedded-Jetty)我认为它目前不起作用。如果您查看 AnnotationConfiguration.configure：

```
 parseContainerPath(context, parser);
   // snip comment
   parseWebInfClasses(context, parser);
   parseWebInfLib (context, parser); 
```

它似乎与类似战争的部署相结合，而不是嵌入式。

这是一个使用 Spring MVC 和嵌入式 Jetty 的示例，它可能更有用：

[http://www.jamesward.com/2012/08/13/containerless-spring-mvc](http://www.jamesward.com/2012/08/13/containerless-spring-mvc)

它直接创建 Spring servlet，而不是依赖注解。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-27T20:45:52.593

对于最近遇到这种情况的人来说，这似乎解决了这个问题：

```
@Component
public class Initializer implements WebApplicationInitializer {

    private ServletContext servletContext;

    @Autowired
    public WebInitializer(ServletContext servletContext) {
        this.servletContext = servletContext;
    }

    @PostConstruct
    public void onStartup() throws ServletException {
        onStartup(servletContext);
    }

    public void onStartup(ServletContext servletContext) throws ServletException {
        System.out.println("onStartup");
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-12T13:38:48.943

要使其在 Jetty 9 上工作，请在 WebAppContext 上设置属性 AnnotationConfiguration.CLASS_INHERITANCE_MAP

```
webAppContext.setAttribute(AnnotationConfiguration.CLASS_INHERITANCE_MAP, createClassMap()); 
```

这是创建此地图的方法：

```
private ClassInheritanceMap createClassMap() {
    ClassInheritanceMap classMap = new ClassInheritanceMap();
    ConcurrentHashSet<String> impl = new ConcurrentHashSet<>();
    impl.add(MyWebAppInitializer.class.getName());
    classMap.put(WebApplicationInitializer.class.getName(), impl);
    return classMap;
} 
```

我将该解决方案放在[gitHub上](https://github.com/marians27/Playground/blob/master/springRestOnEmbeddedJetty/src/main/java/pl/marian/playground/init/jetty/server/EmbeddedJettyServer.java)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-09T23:40:09.850

仅仅设置上下文属性来告诉扫描器哪些东西属于需要扫描的容器类路径呢？

上下文属性： org.eclipse.jetty.server.webapp.ContainerIncludeJarPattern 。*/servlet-api-[^/]* .jar$

它旨在与 jar 名称一起使用，但您可以匹配所有内容。

您需要使用 WebInfConfiguration 以及 AnnotationConfiguration 类。

欢呼一月

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-17T09:40:19.573

在我们的例子中，这些行有助于 Jetty 启动代码：

```
 ClassList cl = Configuration.ClassList.setServerDefault(server);
    cl.addBefore("org.eclipse.jetty.webapp.JettyWebXmlConfiguration", "org.eclipse.jetty.annotations.AnnotationConfiguration"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-22T07:41:32.593

Jetty 9 版本的“magomarcelo”回答：

```
 context.setConfigurations(
            new org.eclipse.jetty.webapp.Configuration[] { new WebXmlConfiguration(), new AnnotationConfiguration() {
                @Override
                public void preConfigure(WebAppContext context) throws Exception {
                    final ClassInheritanceMap map = new ClassInheritanceMap();
                    final ConcurrentHashSet<String> set = new ConcurrentHashSet<>();
                    set.add(MyWebAppInitializer.class.getName());
                    map.put(WebApplicationInitializer.class.getName(), set);
                    context.setAttribute(CLASS_INHERITANCE_MAP, map);
                    _classInheritanceHandler = new ClassInheritanceHandler(map);
                }
            } }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-25T14:17:28.360

对于 Jetty 9，如果您有 webjars，则提供的解决方案不会立即起作用，因为这些 Jars 需要位于类路径中，并且 JAR 内容需要作为您的 webapp 的资源可用。因此，为了与 webjars 一起工作，配置必须是：

```
context.setExtraClasspath(pathsToWebJarsCommaSeparated);
context.setAttribute(WebInfConfiguration.WEBINF_JAR_PATTERN, ".*\\.jar$");
context.setAttribute(WebInfConfiguration.CONTAINER_JAR_PATTERN, ".*\\.jar$");
context.setConfigurations(
        new org.eclipse.jetty.webapp.Configuration[] { 
        new WebInfConfiguration(), new MetaInfConfiguration(),
        new AnnotationConfiguration() {
            @Override
            public void preConfigure(WebAppContext context) throws Exception {
                final ClassInheritanceMap map = new ClassInheritanceMap();
                final ConcurrentHashSet<String> set = new ConcurrentHashSet<>();
                set.add(MyWebAppInitializer.class.getName());
                map.put(WebApplicationInitializer.class.getName(), set);
                context.setAttribute(CLASS_INHERITANCE_MAP, map);
                _classInheritanceHandler = new ClassInheritanceHandler(map);
            }
        } }); 
```

这里的顺序很重要（**WebInfConfiguration 必须在 MetaInf 之前**）。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-11-02T10:26:45.597

对我有用且不涉及扫描但使用您提供的 WebApplicationInitializer 类的解决方案。码头版本：9.2.20

```
public class Main {

public static void main(String... args) throws Exception {
    Properties properties = new Properties();
    InputStream stream = Main.class.getResourceAsStream("/WEB-INF/application.properties");
    properties.load(stream);
    stream.close();
    PropertyConfigurator.configure(properties);

    WebAppContext webAppContext = new WebAppContext();
    webAppContext.setResourceBase("resource");
    webAppContext.setContextPath(properties.getProperty("base.url"));
    webAppContext.setConfigurations(new Configuration[] {
        new WebXmlConfiguration(),
        new AnnotationConfiguration() {
            @Override
            public void preConfigure(WebAppContext context) {
                ClassInheritanceMap map = new ClassInheritanceMap();
                map.put(WebApplicationInitializer.class.getName(), new ConcurrentHashSet<String>() {{
                    add(WebInitializer.class.getName());
                    add(SecurityWebInitializer.class.getName());
                }});
                context.setAttribute(CLASS_INHERITANCE_MAP, map);
                _classInheritanceHandler = new ClassInheritanceHandler(map);
            }
        }
    });

    Server server = new Server(Integer.parseInt(properties.getProperty("base.port")));
    server.setHandler(webAppContext);
    server.start();
    server.join();
}
} 
```

此代码片段的来源（俄语）在这里：[https ://habrahabr.ru/post/255773/](https://habrahabr.ru/post/255773/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-11-15T20:33:22.827

做了一个简单的 maven 项目来演示如何干净地完成它。

```
 public class Console {
    public static void main(String[] args) {
        try {
            Server server = new Server(8080);

            //Set a handler to handle requests.
            server.setHandler(getWebAppContext());

            //starts to listen at 0.0.0.0:8080
            server.start();
            server.join();
        } catch (Exception e) {
            log.error("server exited with exception", e);
        }
    }

    private static WebAppContext getWebAppContext() {
        final WebAppContext webAppContext = new WebAppContext();

        //route all requests via this web-app.
        webAppContext.setContextPath("/");

        /*
         * point to location where the jar into which this class gets packaged into resides.
         * this could very well be the target directory in a maven development build.
         */
        webAppContext.setResourceBase("directory_where_the_application_jar_exists");

        //no web inf for us - so let the scanning know about location of our libraries / classes.
        webAppContext.getMetaData().setWebInfClassesDirs(Arrays.asList(webAppContext.getBaseResource()));

        //Scan for annotations (servlet 3+)
        final AnnotationConfiguration configuration = new AnnotationConfiguration();
        webAppContext.setConfigurations(new Configuration[]{configuration});

        return webAppContext;
    }
} 
```

仅此而已 - 您使用的 spring WebApplicationInitializer 将被检测到，而无需明确让码头服务器知道此类应用程序初始化程序的存在。***

# c++ - 链接器错误和重建。它们可以预防吗？

> ID：13222074
> 
> 赞同：0
> 
> 时间：2012-11-04T19:33:02.410
> 
> 标签：c++, visual-studio-2010, templates, linker, c-preprocessor

我从 Visual Studio 收到以下错误：

> 错误 LNK2019：未解析的外部符号“公共：__thiscall BSTree::BSTreeNode::BSTreeNode(class TestData const &,class BSTree::BSTreeNode *,class BSTree::BSTreeNode *)”(??0BSTreeNode@?$BSTree@VTestData@@ H@@QAE@ABVTestData@@PAV01@1@Z) 在函数“protected: void __thiscall BSTree::insertHelper(class TestData const &,class BSTree::BSTreeNode * &)”(?insertHelper@?$BSTree@VTestData @@H@@IAEXABVTestData@@AAPAVBSTreeNode@1@@Z)

以下是编译器带来的问题：

```
template < typename DataType, class KeyType >
BSTree<DataType,KeyType>::BSTreeNode::BSTreeNode ( const DataType &nodeDataItem, 
BSTreeNode *leftPtr, BSTreeNode *rightPtr ) {
    left = leftPtr;
    right = rightPtr;
    dataItem = nodeDataItem;
}

template < typename DataType, class KeyType >
void BSTree<DataType,KeyType>::insertHelper (const DataType& d, BSTreeNode*& b) {
    if (b == 0) {
        b = new BSTreeNode(d, 0, 0);
    } 
    else if (d.getKey() < b->dataItem.getKey()) {
        insertHelper(d, b->left);
    }
    else if (d.getKey() > b->dataItem.getKey()) {
        insertHelper(d, b->right);
    }
    else {
        b->dataItem = d;
    }
} 
```

所以我查看了它们，我相信我的代码看起来是正确的。所以我执行了重建，然后没有错误，程序启动得很好。我问我的实验室导师为什么会发生这种情况，但他说他没有合适的答案。当我的项目变得越来越复杂时，我看到的越来越多。

我做了一些研究：

[构建、重建和清理解决方案之间的区别](https://stackoverflow.com/questions/3095901/difference-between-build-solution-rebuild-solution-and-clean-solution-in-visua/ "构建、重建和清理之间的区别")

[我总是需要清理/重建吗？](https://softwareengineering.stackexchange.com/questions/113977/do-i-need-to-clean-rebuild-a-project-before-debugging-publishing-it-in-visual-st)

这是在使用 Visual Studio IDE 时不可避免地发生的事情吗？我能做些什么来防止这种情况发生吗？出现此问题是否有任何后果（即我的代码中是否存在缺陷）？

更新：看来这可能是我本学期目睹的大部分链接器错误的原因。

这是一本书的建议：

> “编译使用模板类的程序需要更改使用 #include 预处理器指令包含哪些文件，以及程序的编译方式。由于 C++ 编译器如何处理模板代码，创建类对象的程序（例如， main.cpp) 必须包含类实现文件，而不是类声明文件。也就是说，它必须做`#include "Classname.cpp"`而不是通常`#include "Classname.h"`的规则在本书的其余部分有效。因为主实现文件做了一个类的#include实现代码，类实现代码不单独编译。”

# c# - 如何在 C# 程序中使用用 Visual C++ 编写的 DLL？

> ID：13222076
> 
> 赞同：0
> 
> 时间：2012-11-04T19:33:17.997
> 
> 标签：c#, c++, visual-studio-2010

> **可能重复：**
> [C# P\Invoke DLL 没有进入 C++ 的入口点？](https://stackoverflow.com/questions/12592113/c-sharp-p-invoke-dll-no-entry-point-into-c)

在对 SO 和 google 进行了相当彻底的浏览后，我在问这个问题，大多数答案让我了解了大约 80% 的情况，但它仍然有点令人困惑，所以请告诉我出路。

我有一些 Visual C++ 函数定义如下：

* * *

**我的DLL.h**

```
#ifdef FUNCTIONS_EXPORTS
#define FUNCTIONS_API __declspec(dllexport) 
#else
#define FUNCTIONS_API __declspec(dllimport) 
#endif

namespace Functions {
    class MyFunctions {
    public:
        static FUNCTIONS_API int Add(int a, int b);
        static FUNCTIONS_API int Factorial(int a);
    };
} 
```

* * *

**我的DLL.cpp**

```
namespace Functions {
    int MyFunctions::Add (int a, int b)
    {
        return a+b;
    }
    int MyFunctions::Factorial (int a)
    {
        if(a<0)
            return -1;
        else if(a==0 || a==1)
            return 1;
        else
            return a*MyFunctions::Factorial(a-1);
    }
} 
```

* * *

现在，我想将此构建生成的 DLL 导入到我的 C# 程序中，如下所示：

**程序.cs**

```
using System;
using System.Collections.Generic;    
using System.Runtime.InteropServices;

namespace DLLTester
{
    class Program
    {
        [DllImport("path\\to\\the\dll\\myDLL.dll")]
        public static extern int Factorial(int a);
        static void Main(string[] args) {
            int num;
            num = int.Parse(Console.ReadLine());
            Console.WriteLine("The factorial is " + Factorial(num));
        }
    }
} 
```

* * *

我试过编写没有类的函数（`static`定义时没有关键字），但即使这样也不起作用并给出错误。

这一切我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:24:20.873

我看到的最大问题是您正在尝试 p/invoke 类方法。由于[C++ 名称 mangling](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)，您提供的入口点不存在于您编译的 DLL 中。您应该能够`dumpbin.exe`在您的 DLL 上运行并亲自查看。

在使用 C++ 类时，我一直遵循在 C++ 端创建“管理器”方法来处理 C++ 类的创建的模式。创建方法创建一个对象（在 C++ 端），将其存储在一个数组中，并返回一个整数 Id，我用它来对该实例进行进一步调用。 [本文](http://www.codeproject.com/Articles/18032/How-to-Marshal-a-C-Class)概述了与此类似的方法，并且还介绍了直接使用类实例（此方法依赖于导入在使用单个编译器时应该是确定性的重整名称）。

我建议略读名称修饰文章以及如何出于`DllImport`目的防止它，并阅读上一段中链接的大部分 CodeProject 文章。它写得很好，涵盖了很多 p/invoke 细节。

# html - 几个带有圆角的嵌套 DIV

> ID：13222080
> 
> 赞同：2
> 
> 时间：2012-11-04T19:33:51.610
> 
> 标签：html, css, layout

您好，我正在尝试使用 CSS 将 4 个 div 相互垂直和水平对齐，但没有什么对我有用。

请帮我！提前致谢

![](../Images/9ff9f292d6b98ff779df956376906979.png)

我的 CSS 请注意，这只是我尝试过的 1 种方法，我已经在这里坐了大约 2 个小时，搞砸了这个，但无法弄清楚。

```
* {
    margin:0px;
    padding:0px;
}

body {
    background-color:#454545;
}

.wrapper {
    margin:auto;
    width:960px;
}

.circle-wrapper {
    height:918px;
    width:918px;
    background-image:url(images/overlay.png);
    background-size:cover;
    background-position:center center;
    background-repeat:no-repeat;
    position:absolute;
    text-align:center;
    margin:auto;
}

.outer-inner-background {
    background-image:url(images/center-circle.GIF);
    background-size:cover;
    background-position:center center;
    background-repeat:no-repeat;
    position:relative;
    height:494px;
    width:494px;
    margin:auto;
}

.outer-inner-rings {
    background-image:url(images/inner-outer-rings.PNG);
    background-size:cover;
    background-position:center center;
    position:relative;
    width:494px;
    height:494px;
    margin:auto;
}

.inner-image {
    position:relative;
    height:308px;
    width:308px;
    margin:auto;
} 
```

我的 HTML：我不在乎结构是否改变它只需要工作

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<title>Untitled Document</title>
</head>

<body>
    <div class="wrapper">
        <div class="circle-wrapper">
            <div class="outer-inner-background">
            </div>

            <div class="outer-inner-rings">
            </div>

            <div class="inner-image">
                <img class="inner-img" src="images/inside-image.PNG" width="308px" height="308px">
            </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:53:00.010

这是我的尝试[http://dabblet.com/gist/4013306](http://dabblet.com/gist/4013306)

代码：

css

```
div {overflow:hidden}
#first {
    background:red;
    width:400px;
    height:400px;
    border-radius:300px;}
#second {
    background:grey;
    height:95%;
    width:95%;
    border-radius:300px;
    margin:2.5%}
#third {
    background:green;
    height:70%;
    width:70%;
    border-radius:200px;
    margin:15%;}
#forth {
    background:black;
    height:95%;
    width:95%;
    border-radius:200px;
    margin:2.5%;} 
```

html

```
<div id="first">
    <div id="second">
        <div id="third">
            <div id="forth"></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:41:48.767

尝试`position: relative;`在容器上使用，并在具有合适和值`position: absolute;`的圆圈上将它们放在中间。`left``top`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T19:48:29.293

好吧，您可以在内部 div 中使用绝对定位，其中`left`位置`top`始终设置为 ( `Parent element width`- `child element width`/2)。这是我的代码

html

```
<div id="red">
    <div id="grey">
        <div id="green">
            <div id="black">
            </div>
        </div>
    </div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

CSS

```
div
{
    border-radius:100%;
}

#red
{
    position:relative; 
    margin-left:auto;
    margin-right:auto; /** centers #red on screen **/
    background-color: #F00;
    width:400px; 
​    height:400px;

}
#grey
{
    background-color:#CCC;
    position:absolute;
    top:20px;
    left:20px;
    width:360px; /** 400 - 360 = 40/2 = 20px for left and top **/
    height:360px;
}

#green
{
    background-color:#0E0;
    position:absolute;
    top:40px;
    left:40px;
    width:280px;
    height:280px;
}
#black
{
    background-color:#000;
    position:absolute;
    left:20px;
    top:20px;
    width:240px;
    height:240px;
}​ 
```

这是小提琴：

[http://jsfiddle.net/brunovieira/pmN4z/](http://jsfiddle.net/brunovieira/pmN4z/)

摆弄 #red 在屏幕上居中：

[http://jsfiddle.net/brunovieira/pmN4z/2/](http://jsfiddle.net/brunovieira/pmN4z/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:48:56.130

它需要是4个div吗？尝试这个：

[http://jsfiddle.net/vSyWZ/2/](http://jsfiddle.net/vSyWZ/2/)

HTML

```
<div class="outer">
    <div class="inner"><div>
</div>
​ 
```

CSS

```
div{position:relative; margin:0 auto;}
.outer{width: 350px; height: 350px; background-color: gray; border-radius: 100%; border:10px solid red; vertical-align: middle;}
.inner{width: 200px; height: 200px; background-color: black; border-radius: 100%; border:10px solid green; top:60px;}​ 
```

我在 Chrome 和 Firefox 上进行了测试并且工作正常，IE 不支持圆角，但它是居中的。

# java - 使用哪种布局？

> ID：13222082
> 
> 赞同：3
> 
> 时间：2012-11-04T19:34:17.383
> 
> 标签：java, swing, layout, layout-manager, border-layout

我想用swing制作这个界面：

![在此处输入图像描述](../Images/1e6a171fabbdd670f9f2d7b193027fa4.png)

当我调整它时，我希望所有子面板和按钮都像这样调整大小：![在此处输入图像描述](../Images/2c8250bf1a7fc44f9eb3386e9ec1727b.png)

不仅要调整主窗口的大小。我正在使用 GridBagLayout。而且我不知道如何将带有 GridBagLayout 的面板边框以这种方式粘贴到 Frame 的边框上，当我调整框架的大小时，面板也将被调整大小。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T19:41:42.890

我通常为此使用嵌套布局。

*   使用 a`JPanel`和 a`BorderLayout`作为基础。
*   将您的中心组件存储在 a`JPanel`中，并将其添加`CENTER`到`BorderLayout`.
*   将底部组件存储在两个单独`JPanel`的 s 中。
*   `JPanel`使用 1 行 2 列的 GridLayout创建另一个。
*   `JPanel`以正确的顺序将两个 s 添加到其中。
*   将此添加`JPanel`到`SOUTH`.`BorderLayout`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T05:00:25.240

实现这一点的属性，即当 JFrame 调整大小时，JPanel 也应该调整自身大小，将是`GridBagConstraints.BOTH`. 在我看来，您的**Left JButton**比**Right JButton**小一点。如果你真的想用**GridBagLayout**来实现这一点，我在这里制作了一个小示例代码来帮助你，看看并提出任何可能出现的问题：

```
import java.awt.*;
import javax.swing.*;

public class GridBagExample
{
    private JPanel contentPane;

    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBag Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        contentPane = new JPanel();
        contentPane.setLayout(new GridBagLayout());

        JPanel centerPanel = new JPanel();
        centerPanel.setOpaque(true);
        centerPanel.setBackground(Color.CYAN);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.weightx = 1.0;
        gbc.weighty = 0.9;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.gridwidth = 2;
        gbc.fill = GridBagConstraints.BOTH;  // appears to me this is what you wanted

        contentPane.add(centerPanel, gbc);

        JButton leftButton = new JButton("Left");
        JButton rightButton = new JButton("Right");
        gbc.gridwidth = 1;
        gbc.gridy = 1;
        gbc.weightx = 0.3;
        gbc.weighty = 0.1;

        contentPane.add(leftButton, gbc);

        gbc.gridx = 1;
        gbc.weightx = 0.7;
        gbc.weighty = 0.1;

        contentPane.add(rightButton, gbc);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new GridBagExample().displayGUI();
            }
        });
    }
} 
```

![网格示例输出：](../Images/4fcbd21185b1927e6d7ea7f6461c1d87.png)

# facebook - 使用 JS SDK 将本地托管的照片上传到 Facebook

> ID：13222087
> 
> 赞同：1
> 
> 时间：2012-11-04T19:34:39.197
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我知道您可以通过 JS SDK 提供的外部照片 URL 将照片上传到 facebook。但是如何将本地托管的照片上传到 Facebook？如果我使用我的 IP 地址，我仍然会收到此错误：

```
"http://10.0.1.9:9914/media/images/templates/cover/851x315_FLAME.png is an internal url, but this is an external request 
```

代码：

```
var data = array();
data['message'] = 'hello world';
data['url'] = 'http://10.0.1.9:9914/media/images/templates/cover/851x315_FLAME.png';

FB.api('/me/photos', 'post', data, function(response){
    if (!response || response.error) {
        //alert('Error occurred');
    } else {
        //alert('Post ID: ' + response.id);
    }
}); 
```

我想要的只是能够使用 JS SDK 将本地托管的照片上传到 FB！请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:45:16.143

类似的问题[在这里](https://stackoverflow.com/questions/4264599/facebook-new-javascript-sdk-uploading-photos-with-it)问。

iFrame 上传方法可能是您最好的选择，但是如果您有空间这样做，那么您还不如只在服务器端完成所有操作？

# c# - 创建类图时出现“名称空间中已存在”消息

> ID：13222089
> 
> 赞同：3
> 
> 时间：2012-11-04T19:34:46.227
> 
> 标签：c#, asp.net, class, namespaces, uml

我正在尝试在 Visual Studio 2010 Professional 中创建类图，作为 ASP .NET Web 应用程序项目的一部分。当我尝试将类命名为“客户”和 .cs 文件时，我收到此消息“名称空间中已存在'客户'”。

我曾经用 Customer 类制作了类图，但删除了它。我还删除了其他相关的 .cs 文件。现在我正在尝试使用与以前相同的类创建一个新的类图。

我真的不知道该怎么解决这个问题。如何再次创建具有相同类的新类图？有没有办法从命名空间中删除现有的“客户”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:42:45.027

浏览到系统上项目的位置并删除旧的类图

从 vs 中，右键单击项目，然后选择“在 Windows 资源管理器中打开文件夹”

找到文件并删除

# php - 密码保护表中的字段#mysql

> ID：13222090
> 
> 赞同：0
> 
> 时间：2012-11-04T19:35:03.753
> 
> 标签：php, mysql, blob

我正在做一个考试项目！我正在寻找一些密码保护mysql数据库中的***longblob字段的技术。***此字段用于存储试卷。我想以这样一种方式做到这一点，即使有人入侵了我的数据库，除非他有特殊的密码/密码，否则他无法访问该字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:06:47.433

“密码保护”的概念实际上是使用加密密钥的“加密”。

大概您的 mysql 数据库已经受密码保护，包括它所在的服务器和数据库登录本身。但是，为了提供额外的安全性，您可以使用加密存储字段。

MySQL DB 是在服务器上，还是在您要访问它的同一台机器上？如果是后者，您需要以某种不涉及将加密密钥存储在同一台机器上的方式对其进行加密（就好像他们已经找到进入您的机器的方式，他们可以找到加密密钥）。请参阅[如何加密 MySQL 表中的特定列？](https://stackoverflow.com/questions/4275882/how-to-encrypt-a-specific-column-in-a-mysql-table)了解更具体的细节。只是不要将“密钥”存储在数据库服务器上——要么将其存储在单独的应用程序服务器上，要么存储在纸上:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:39:11.140

您可以使用 AES 或 DES 加密/解密。将密钥保留在应用程序代码中

[加密函数](http://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)

请注意，DES 需要将一些 SSL 编译到二进制文件中。

# html - 如何锚定页脚但保持内容高度 100%

> ID：13222096
> 
> 赞同：2
> 
> 时间：2012-11-04T19:35:32.523
> 
> 标签：html, css, sticky-footer

我正在使用[sticky footer](http://ryanfait.com/sticky-footer/)，但它没有按应有的方式工作，并且在视口之外提供了 200 或 400 px 的扩展。

我认为展示我需要的东西而不是解释它会更容易，见下文：

![在此处输入图像描述](../Images/fe048dfd68c31b0aa32567996a6f5a24.png)

编辑：我更新了我的代码以反映粘性页脚的外观。

[粘页脚jsFiddle](http://jsfiddle.net/7mBdy/)

**原始** 这是我的代码：

```
<div id="wrapper">
  <header>
    Header
  </header>

  <div id="container">
    <div id="content">
      Content
    </div>

    <div id="sidebar">
      Sidebar
    </div>
  </div>

  <footer>
    Footer
  </footer>
</div> 
```

还注意到我在代码中有一个侧边栏，但在提供的图片中没有。我也需要一个没有背景的侧边栏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:17:10.173

您没有按照教程进行操作，否则我会`div`在`push`您的`wrapper`. 另外，`footer`不应该在你的`wrapper`.

按照[网上教程](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)...

```
<body>
        <div class="wrapper">
            <header>
                Header
            </header>
            <div id="container">
                <div id="content">
                    Content
                </div>
                <div id="sidebar">
                    Sidebar
                </div>
            </div>
            <div class="push"></div>
        </div>

        <footer>
            <p>Copyright (c) 2008</p>
        </footer>
</body> 
```

CSS：

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
footer, .push {
   height: 142px; /* .push must be the same height as footer */
} 
```

[jsFiddle 演示页面](http://jsfiddle.net/zQ9Hj/show/)

请尝试上述方法并发布您的实际 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T19:57:59.403

尝试此方法将页脚锚定在底部。

```
.footer {
width:100%;
position:fixed;
bottom:0;
height:30px;
} 
```

# jquery - TypeScript 和 jQuery 范围错误 - 编译时出现代码 1

> ID：13222099
> 
> 赞同：1
> 
> 时间：2012-11-04T19:35:41.393
> 
> 标签：jquery, scope, typescript

有谁知道为什么我不能在我的 TypeScript 代码中使用 jQuery（看起来没有其他人没有这个问题）。

我在 VS2012 中创建了一个新的 TypeScript 项目，包括 jquery.d.ts，在主 html 文件中添加了指向 jquery cdn 的脚本标签，并在主 app.ts 文件中添加了“

```
///  <reference path="jquery.d.ts" /> 
```

在文件顶部和简单的一行“$("something").hide();”下面。智能感知工作正常，但当我尝试编译它时，我收到代码 1 的错误。我在命令窗口中检查了它，它说“名称'$' 在当前范围内不存在”。

有谁知道发生了什么事？一般来说，我很难将代码拆分到不同的文件中，我不得不将整个应用程序写在一个文件中。我尝试使用模块，导入和导出，但一切都以编译器抛出的范围错误结束：/

请救救我

编辑 @Sohnee 它是 VS 的默认 Typescript 项目：

结构：

```
app.css
app.ts
  --app.js
default.htm
jquery.d.ts 
```

修改后的文件：

1）app.ts：

```
/// <reference path="jquery.d.ts" />

$("body").hide(); 
```

2) 默认.htm

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>TypeScript HTML App</title>
    <link rel="stylesheet" href="app.css" type="text/css" />
    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="app.js"></script>
</head>
<body>
    <h1>TypeScript HTML App</h1>

    <div id="content"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:45:19.583

您的参考看起来不正确。

```
/// <_reference path="jquery.d.ts" />" 
```

应该

```
/// <reference path="./jquery.d.ts" /> 
```

我可以重新创建此问题的唯一方法是使引用路径无效。

例如，在这些情况下，我会遇到与您相同的错误：

缺少斜线：

```
/// <reference path="jquery.d.ts"> 
```

缺少引号（或缺少两个引号）：

```
/// <reference path="jquery.d.ts /> 
```

无效路径：

这个没有代码示例，但如果您`jquery.d.ts`的脚本位于不同的文件夹中，则路径需要是相对的。

工作正常：

```
/// <reference path="./jquery.d.ts" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T11:42:08.233

`jquery.d.ts`外观如何？

它应该是这样的

```
interface JQuery {
hide();
}
interface JQueryStatic {
(query: string): JQuery; 
(ready: () => any): any;
}
declare var $: JQueryStatic; 
```

现在将其作为依赖项添加到`app.ts`like 中（不喜欢在文件名中添加句点，所以我将其称为 custom.ts

```
/// <reference path="custom.ts" />
$(function(){$("body").hide();}); 
```

现在构建解决方案，如果您安装了[Web](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6) Essentials，它将为您生成`custom.js`and`app.js`

现在运行项目，希望你不会看到任何东西，因为它`body`会被隐藏。

有关更多信息，请阅读[TypeScript 语言规范](https://docs.google.com/viewer?a=v&q=cache:2p0yN7PhPuIJ%3awww.typescriptlang.org/Content/TypeScript%2520Language%2520Specification.pdf%20&hl=en&pid=bl&srcid=ADGEESgyAZ9Cr-xQpHYLXj629LoqiwvHYV4CZnhdgQxyN9_N61B8IssGYj_-iMjraphZR8OVkPdazw1WHegAPArLZJZ1FQcnFei_R6Z-1sIShlgpyd1v0n0l8NUEsrjMN7Yhidd4gZM3&sig=AHIEtbRk0970XLtvT1v6Jj6a9xc8yV7aSg)

# java - 在 Java 中，如何在不调用 mousePressed 和 mouseReleased 的情况下使用 mouseClicked？

> ID：13222102
> 
> 赞同：1
> 
> 时间：2012-11-04T19:35:56.710
> 
> 标签：java, mouseevent, mouselistener

我正在编写一个程序来绘制一个弹跳球，然后用户可以在屏幕上绘制矩形，并且球会从矩形反弹。在 mousePressed 中将一个标志设置为 true，只要标志为 true，就会从起点到当前点绘制一个矩形（使用 mouseDragged）。在 mouseReleased 中该标志设置为 false。我将使用 mouseClicked 来擦除被点击的矩形（如果有的话）。我遇到的问题是在 mouseClicked 上，mousePressed 和 mouseReleased 都被调用了。有没有办法让它不这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:56:23.807

在里面`mousePressed()`检查*一下鼠标是否在矩形内按下？*使用您正在使用的相同功能，如果单击鼠标以找出是否存在矩形。

现在，如果此检查为真，请*不要将 drawRectangleFlag 设置为真*

仅供参考，如果您想在矩形内绘制矩形，上述解决方案无效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:42:44.087

您可以检查 mousePressed 以查看鼠标是否在矩形内被按下，如果是，则不要设置标志。

# iphone - 对 .m 文件执行更改后，静态库 .a 文件未更新

> ID：13222103
> 
> 赞同：1
> 
> 时间：2012-11-04T19:36:01.343
> 
> 标签：iphone, ios, static-libraries, ios-frameworks

我已经使用行脚本文件创建了静态库项目。

然后我手动复制 .h 文件和 .a 文件并创建了一个框架。使用 iOS 通用框架方法。但它在第一次创建时工作正常。但更改了 .m 文件中的小修改，它**没有反映在创建的 staic 库 .a 文件**中。 **但是在使用源文件时它工作正常**。

如果您遇到类似类型的问题，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T06:58:55.317

我认为[这篇文章](http://www.cocoabuilder.com/archive/xcode/323026-xcode-does-not-rebuild-app-when-source-file-updated-in-dependent-static-library.html#323031)回答了您的问题，xcode 中存在一个错误，根据签名，该帖子是由从事 xcode 产品工作的开发人员撰写的。对它的回复显示了一个对我有用的解决方案，即：

*   将静态库的位置显式设置为“相对于构建产品”
*   使用一个好的文本编辑器，在您的项目中编辑**project.pbxproj**，例如**MyProject.xcodeproj/project.pbxproj**并搜索如下一行包含您的库名称的行。验证**path=**条目没有路径，只有库文件的文件名。不得不这样做很讨厌，但我发现 xcode 不能 100% 正确地做到这一点。

    `{isa = PBXFileReference; explicitFileType = archive.ar; includeInIndex = 0; path = libMyLibrary.a; sourceTree = BUILT_PRODUCTS_DIR; };`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:24:39.963

做一个干净的构建。工作项目可能指向旧的 .a 文件。清理项目，然后添加静态库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:21:48.720

检查并匹配 .a 文件的创建日期/时间，以确保它是在您对 .m 文件进行更改后生成的

# .net - 实体框架：EF 以不同的顺序获取实体的相关对象

> ID：13222104
> 
> 赞同：3
> 
> 时间：2012-11-04T19:36:02.377
> 
> 标签：.net, entity-framework

我正在使用 MVC3 和 Entity Framework 4.0。情况如下：我有一个名为“主题”的实体和一个名为“问题”的相关实体。为了可视化问题，我有一个主题视图，然后在视图内的 foreach 句子中，显示与该主题相关的问题：

``foreach(Questions Question in Topic.Questions) { //Show question info }``

但是，每当在另一个视图中更新问题时，当我转到主题视图时，问题会以不同的顺序出现，最具体地说，更新的问题首先出现。

任何人都知道为什么会出现这种行为？以及如何阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:41:47.310

我假设您正在使用这样的查询：

```
context.Topics.Include( o => o.Questions )... 
```

您无法在 EF 中指定包含表的顺序，但您仍然可以使用 LINQ to 对象。

所以只需将您的更改`foreach`为：

```
foreach ( Question question in topic.Questions.OrderBy( ...required order... ) ) 
```

# facebook - FQL Multiquery 编写连接查询

> ID：13222111
> 
> 赞同：0
> 
> 时间：2012-11-04T19:36:48.410
> 
> 标签：facebook, facebook-fql

简单的说。我需要帮助构建一个 FQL 多查询请求，该请求将执行以下操作：

1.  然后从登录用户的好友列表中获取 UID，
2.  使用这些 ID 获取过去两周的所有评论和消息（来自流）
3.  最后，使用用户名加入这些结果

这是我到目前为止的查询：

**[1] GRAB_UID**：

```
SELECT uid2 FROM friend WHERE uid1 = me() 
```

**[2] GRAB_STREAM**（缺少 2 周部分，可能完全错误）：

```
SELECT type, created_time, post_id, comments, actor_id, target_id, message 
FROM stream 
WHERE filter_key IN 
       (SELECT filter_key FROM stream_filter WHERE uid = me()) 
AND actor_id IN 
       (SELECT uid2 FROM friend WHERE uid1 = me())
)'; 
```

**[3] GRAB_USRNAMES**：

```
SELECT uid, name, username, pic_square, current_location, profile_url 
FROM user WHERE uid IN 
       (SELECT uid2 FROM friend WHERE uid1 = me()) 
```

我真的可以使用大师来提出这些请求，我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T09:15:01.223

```
{
    "query1":"SELECT uid2 FROM friend WHERE uid1 = me()",
    "query2":"SELECT type, created_time, post_id, comments, actor_id, target_id, message FROM stream WHERE filter_key IN (SELECT filter_key FROM stream_filter WHERE uid = me()) AND actor_id IN (SELECT uid2 FROM #query1)",
    "query3":"SELECT uid, name, username, pic_square, current_location, profile_url FROM user WHERE uid IN (SELECT uid2 FROM #query1)"
} 
```

您还可以在以下位置查看 Graph API Explorer 的结果：

`https://developers.facebook.com/tools/explorer?fql={%22query1%22%3A%22SELECT%20uid2%20FROM%20friend%20WHERE%20uid1%20%3D%20me%28%29%22%2C%22query2%22%3A%22SELECT%20type%2C%20created_time%2C%20post_id%2C%20comments%2C%20actor_id%2C%20target_id%2C%20message%20FROM%20stream%20WHERE%20filter_key%20IN%20%28SELECT%20filter_key%20FROM%20stream_filter%20WHERE%20uid%20%3D%20me%28%29%29%20AND%20actor_id%20IN%20%28SELECT%20uid2%20FROM%20%23query1%29%22%2C%22query3%22%3A%22SELECT%20uid%2C%20name%2C%20username%2C%20pic_square%2C%20current_location%2C%20profile_url%20FROM%20user%20WHERE%20uid%20IN%20%28SELECT%20uid2%20FROM%20%23query1%29%22}`

# java - Java - xml GetChildNodes IF 和空值

> ID：13222112
> 
> 赞同：0
> 
> 时间：2012-11-04T19:36:48.637
> 
> 标签：java

我在使用 xml 时遇到了两个问题。

第一个问题：

此代码工作正常。如果参数只有一个孩子但没有孩子列表。

```
doc.getDocumentElement().getChildNodes().item(t).getLastChild().getNodeValue() 
```

我想准备这样的东西：

```
If(doc.getDocumentElement().getChildNodes().item(t).getLastChild().getNodeValue() !=null) 
```

但这不起作用，因为 value 永远不会为空，但我需要类似的 If which can check is list of value or not。

普通节点：

```
<name>Adam</name> 
```

列表节点：

```
<car>
<tire>yes</tire>
<trunk>yes</trunk>
</car> 
```

第二个问题：

如果我制作嵌套的 ChildNodes，我将无法获得价值，你知道问题出在哪里吗？

节点示例：

```
<name>Adam</name> 
```

如果我写这个，我会得到“名字”

```
doc.getDocumentElement().getChildNodes().item(t).getChildNodes().item(m).getNodeName() 
```

如果我写这个我会得到空，但我需要“亚当”

```
doc.getDocumentElement().getChildNodes().item(t).getChildNodes().item(m).getNodeName() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:40:30.117

答案 - 我应该使用 ToLenght() > 1

# python - 在 python 中编写代码以从“txt”文件中读取一些示例输入的最佳方法是什么？

> ID：13222114
> 
> 赞同：1
> 
> 时间：2012-11-04T19:36:54.557
> 
> 标签：python, input, python-2.7

我知道这是一个非常基本的问题，但我也是 python 环境中的新手。我正在编写我的第一个程序（数据结构问题），我需要阅读一些输入测试用例。

输入：

```
The first line contains the number of test cases T. T test cases follow. 
The first line for each case contains N, the number of elements to be sorted. 
The next line contains N integers a[1],a[2]...,a[N]. 
```

约束：

```
1 <= T <= 5
1 <= N <= 100000
1 <= a[i] <= 1000000 
```

样本输入：

```
2
5
1 1 1 2 2
5
2 1 3 1 2 
```

我编写了一个以下程序来从文件中读取上述输入，但我确信这不是最好的方法，因为它包含很多`if-else`循环和`for`循环，这真的很糟糕`inputs`。

```
sample = open('sample.txt')
first = sample.readline()
if len(first) > 5 or len(first) <1:
    print "Not correct input";
else:
    test = sample.readline
    for x in range(0,len(first)):
        second = sample.readline()
        if len(second) >100000 or len(second) < 1:
            print "wrong input";
        else:
            third = list()
            for y in range(0, len(third)):
                third.append(sample.readline()[:1])
        method_test(third)  #calling a method for each sample input 
```

请建议我最好的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:48:36.663

这应该这样做：

```
with open('sample.txt') as sample:
    num_testcases = int(sample.readline())
    assert 1 <= num_testcases <= 5
    for testcase in range(num_testcases):
        num_elems = int(sample.readline())
        assert 1 <= num_elems <= 10000
        elems = map(int, sample.readline().split())
        assert len(elems) == num_elems
        assert all(1 <= elem <= 100000 for elem in elems)
        method_test(elems) 
```

编辑：添加了有效性检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T19:44:07.503

首先。`len(x)`将告诉您输入的长度，因此如果您的输入行是“9”，则为`len(line)`1；如果您的输入行是“999”，则为`len(line)`3。您需要使用`int(line)`从输入文件中正确读取数字。

程序其余部分的逻辑看起来不正确 - 例如，您正在读取第一行（测试数），然后循环这个数字（这很好） - 但您正在读取*外部*值的数量这个循环，这是错误的顺序。

我强烈建议您在阅读时打印出各种值，这样您就可以了解正在发生的事情，并更轻松地调试您的程序。

最后，当您执行以下操作时：

```
 third = list()
        for y in range(0, len(third)):... 
```

您正在创建一个空列表`list()`，然后从 0 循环到列表的长度（也为零）。所以循环实际上不会做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:09:00.113

像这样的东西：

用于`cycle()`只读取第一行之后的交替行，并且循环的大小将是`T`.

```
 from itertools import islice,cycle
 with open("data1.txt") as f:
    T = int(f.readline())
    if T != 0:
            cyc=islice(cycle((False,True)),T*2) 
            for x in cyc:
                if x or not f.readline():
                    print map(int,f.readline().split()) 
```

**输出：**

```
[1, 1, 1, 2, 2]
[2, 1, 3, 1, 2] 
```

# android - 从 MainActivity 激活新活动以显示有关列表项的详细信息时出现 NetworkOnMainThereadException

> ID：13222118
> 
> 赞同：0
> 
> 时间：2012-11-04T19:37:32.657
> 
> 标签：android

每当我运行并单击我的**MainActivity**中的列表项以启动**DetailsActivity 时**，这应该会显示有关所选列表项（名称，描述）的更多信息，LogCat 会向我抛出以下内容：

> E/AndroidRuntime(678)：在 com.example.myfirstapp.JSONParser.makeHttpRequest(JSONParser.java:61) E/AndroidRuntime(678)：在 com.example.myfirstapp.DetailsActivity$GetProductDetails$1.run(DetailsActivity.java:93 )

第 61 行（JSONParser）：`HttpResponse httpResponse = httpClient.execute(httpGet);` 第 93 行（DetailsActivity）：`JSONObject json = jsonParser.makeHttpRequest( url_car_details, "GET", params);`

**详情活动**：

```
package com.example.myfirstapp;

/*
*   ...imports...
*/

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method, List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

**JSON解析器**：

```
package com.example.myfirstapp;

/*
*   ...imports...
*/

public class DetailsActivity extends Activity {

    TextView lblTitle;
    TextView lblDesc;

    String id;

    // Progress Dialog
    private ProgressDialog pDialog;

    // JSON parser class
    JSONParser jsonParser = new JSONParser();

    // single product url
    private static final String url_car_details = "http://10.0.2.2/webservice/get_car_details.php";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CAR = "car";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_DESC = "description";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_details);

        // getting product details from intent
        Intent i = getIntent();

        // getting product id (pid) from intent
        id = i.getStringExtra(TAG_ID);

        // Getting complete product details in background thread
        new GetProductDetails().execute();
    }

    /**
     * Background Async Task to Get complete product details
     * */
    class GetProductDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(DetailsActivity.this);
            pDialog.setMessage("Loading car details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... params) {

            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("id", id));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_car_details, "GET", params);

                        // check your log for json response
                        Log.d("Single Car Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(TAG_CAR); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                            // product with this pid found
                            // Edit Text
                            lblTitle = (TextView) findViewById(R.id.lblTitle);
                            lblDesc = (TextView) findViewById(R.id.lblDesc);

                            // display product data in EditText
                            lblTitle.setText(product.getString(TAG_NAME));
                            lblDesc.setText(product.getString(TAG_DESCRIPTION));

                        }else{
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:45:25.460

将您的代码更改为：

```
 /**
     * Background Async Task to Get complete product details
     * */
    class GetProductDetails extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(DetailsActivity.this);
            pDialog.setMessage("Loading car details. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Getting product details in background thread
         * */
        protected String doInBackground(String... params) {

                    // Check for success tag
                    int success;
                    try {
                        // Building Parameters
                        List<NameValuePair> params = new ArrayList<NameValuePair>();
                        params.add(new BasicNameValuePair("id", id));

                        // getting product details by making HTTP request
                        // Note that product details url will use GET request
                        JSONObject json = jsonParser.makeHttpRequest(
                                url_car_details, "GET", params);

                        // check your log for json response
                        Log.d("Single Car Details", json.toString());

                        // json success tag
                        success = json.getInt(TAG_SUCCESS);
                        if (success == 1) {
                            // successfully received product details
                            JSONArray productObj = json
                                    .getJSONArray(TAG_CAR); // JSON Array

                            // get first product object from JSON Array
                            JSONObject product = productObj.getJSONObject(0);

                  // updating UI from Background Thread
                  DetailsActivity.this.runOnUiThread(new Runnable() {
                    @Override                         
                     public void run() {
                            // product with this pid found
                            // Edit Text
                            lblTitle = (TextView) findViewById(R.id.lblTitle);
                            lblDesc = (TextView) findViewById(R.id.lblDesc);

                            // display product data in EditText
                            lblTitle.setText(product.getString(TAG_NAME));
                            lblDesc.setText(product.getString(TAG_DESCRIPTION));

                        }else{
                            // product with pid not found
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                }
            });

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once got all details
            pDialog.dismiss();
        }
    }
} 
```

第二种解决 方案是`runOnUiThread`从. 因为在完成给定任务时会被调用，并且您可以访问 onPostExecute 中的所有 UI 元素`doInBackground``onPostExecute``AsyncTask``onPostExecute``doInBackground`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:50:14.647

Luksprog 所说的，这没有抓住重点：

```
protected String doInBackground(String... params) {
    // updating UI from Background Thread
        runOnUiThread(new Runnable() { 
```

将需要更新 UI 的代码移至`onPostExecute()`. 基本上将检索到的数据保存在一个变量中并“返回”它。

# iphone - IOS 6视图旋转问题

> ID：13222123
> 
> 赞同：2
> 
> 时间：2012-11-04T19:38:29.303
> 
> 标签：iphone, ios, ios6

> **可能重复：**
> [iOS 6 中的自动旋转有奇怪的行为](https://stackoverflow.com/questions/12526054/autorotate-in-ios-6-has-strange-behaviour)

我有 IOS 6 的问题，显示显示为纵向而不是横向。我同时使用真实设备和模拟器设备，如果我在 5.1 模拟器上构建游戏，如果我使用模拟器版本 6 或带有版本 6 的真实设备，视图将正确呈现，视图将获得纵向视图。这是我的代码。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

if( interfaceOrientation == UIInterfaceOrientationLandscapeLeft ||
       interfaceOrientation == UIInterfaceOrientationLandscapeRight )
        return YES; 
```

知道如何解决此类问题吗？

谢谢急诊室

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:54:18.857

该方法`shouldAutorotateToInterfaceOrientation`已在 iOS 6 中弃用。它已替换为以下内容：

```
- (BOOL)shouldAutoRotate {

    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
} 
```

此外，还有一个非常重要的细节来完成这项工作。在您的 AppDelegate 中，确保更改以下内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    [self.window setRootViewController:<your main view controller here>];
} 
```

如果您使用`[self.window addSubview:self.mainViewController.view]`，它将无法正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T19:50:56.303

ShouldAutoRotation 不再适用于 iOS 6。请改用supportedInterfaceOrientations。

您可以在此处获取更多信息：http: [//dhilipsiva.blogspot.com/2012/07/ios-6-ui-interface-orientation.html](http://dhilipsiva.blogspot.com/2012/07/ios-6-ui-interface-orientation.html)

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:01:19.007

如果您想同时支持 iOS 5 和 iOS 6，请将 shouldAutorotateToInterfaceOrientation 留在您的代码中；只知道它不会在 iOS6 设备上调用。

@Simon 给出的示例应该能够与您的原始代码和平共处，任一操作系统调用其适用的方法。我能够在我的应用程序中实现类似的东西，但我使用项目设置为 iOS 6 设置自动旋转，并且只留下我的 shouldAutorotateToInterfaceOrientation 以使应用程序也与 iOS 5 兼容。

# ruby - Ruby 找不到 ruby gems 或 wx 模块

> ID：13222124
> 
> 赞同：1
> 
> 时间：2012-11-04T19:38:44.557
> 
> 标签：ruby, rubygems, require, wxruby

我在我的英特尔 iMac 上运行默认的 Ruby 安装（ruby 1.8.7 (2010-01-10 patchlevel 249) [i686-darwin10]）。我更新了 RubyGems 并安装了 wxruby gem。我正在尝试运行以下示例程序：

```
#!/usr/bin/ruby
require "rubygems"
require "wx"

class MyApp < Wx::App
    def on_init
        @frame = Wx::Frame.new(nil, -1, "The Bare Minimum")
        @frame.show()
    end
end

app = MyApp.new()
app.main_loop() 
```

我收到以下错误：

```
==> wxruby-test.rb
/Library/Ruby/Gems/1.8/gems/wxruby-1.9.3-universal-darwin/lib/wxruby2.bundle: dlopen(/Library/Ruby/Gems/1.8/gems/wxruby-1.9.3-universal-darwin/lib/wxruby2.bundle, 9): no suitable image found.  Did find: (LoadError)
    /Library/Ruby/Gems/1.8/gems/wxruby-1.9.3-universal-darwin/lib/wxruby2.bundle: no matching architecture in universal wrapper - /Library/Ruby/Gems/1.8/gems/wxruby-1.9.3-universal-darwin/lib/wxruby2.bundle
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:36:in `require'
    from /Library/Ruby/Gems/1.8/gems/wxruby-1.9.3-universal-darwin/lib/wx.rb:12
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `gem_original_require'
    from /Library/Ruby/Site/1.8/rubygems/custom_require.rb:60:in `require'
    from wxruby-test.rb:3 
```

如果我注释掉 require ruby​​gems 语句，我会收到以下错误：

```
==> wxruby-test.rb
wxruby-test.rb:3:in `require': no such file to load -- wx (LoadError)
    from wxruby-test.rb:3 
```

我是 Mac 上的 Ruby 新手，我确信这是一些可能与路径有关的基本错误，但大多数关于环境变量的解释都是针对有经验的用户。如果您需要其他命令的更多输出，请告诉我。我正在从 tcsh shell 运行 Ruby。我确定我在做一些基本的错误，但我只是难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:05:15.880

如果您正在运行 Ruby 1.8.7，您应该保留以下`require`语句：

```
require "rubygems" 
```

Ruby 1.8 默认不知道 gems，所以我们必须告诉 Ruby 需要 gems 加载器。Ruby 1.9+ 捆绑了它，所以我们不再需要这样做。

这与 Mac（或 Windows 或 Linux）操作系统无关，它与 Ruby 的默认加载路径有关。

而且，作为安全提示，不要乱用 Apple 安装的 Ruby。他们安装它供自己使用，并用于一些播客创建工具。而且，在未来的某个时间点，他们可能希望在系统中添加一些东西，以利用 Ruby（或 Python 或 Perl）的预期配置。更改（或更糟糕的是，删除它）可能会让您感到困惑。所以，我建议你不要管它，使用 rbenv 或 RVM 在沙箱中安装 Ruby，在那里你可以安全地戳、刺和弄乱它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:25:15.537

什么版本的 OS X？如果它是狮子之一，那么你就不走运了。wxwidgets 库（以及基于它的东西，比如 wxruby）仍然只有 32 位并且基于 Carbon。Lions 仅支持 64 位，并且不推荐使用 Carbon。

# java - 将对象/整数插入单链表并对其进行排序

> ID：13222128
> 
> 赞同：0
> 
> 时间：2012-11-04T19:39:19.693
> 
> 标签：java, list, sorting, linked-list

我创建了一个单链表，但我不断收到 NullPointerException。insert 方法应该将一个对象添加到单链表，然后我将 SLL 的所有元素放入 MyVector 类中，然后使用我为 MyVector 类制作的快速排序算法，然后将对象放回 SSL。我不完全确定为什么我不断收到错误。

> 在 collection.SortedSLList.remove(SortedSLList.SortedSLList.remove(SortedSLList. java:51) 在 collection.SortedSLList.insert(SortedSLList.java:39) 在 lab.Lab6.test(Lab6.java:15) 在 main.Main.main(Main.java:15) Java 结果：1

```
public void insert(Object element) {
    if(head == null) {
        head = tail = new SLListNode(element, null);
        ++size;
        return;
    }
    tail = tail.next = new SLListNode(element, null);
    ++size;
    MyVector temp = new MyVector();
    int i = size;
    Object t = head.data;
    while(temp.size() < i) {
        temp.append(t);
        remove(t); //this line
        t = head.next;
    }
    MySort.quickSort(temp);
    i = 0;
    while(size < temp.size()) {
        insert(temp.elementAt(0));
        ++i;
    }
}
public boolean remove(Object element) {
    if(head == null) return false;
    if(((Comparable)(head.data)).compareTo(element) == 0) { //this line
        if(head == tail) {
            head = tail = null;
            return true;
        }
        head = head.next;
        return true;
    }
    if(head == tail) return false;
    SLListNode ref = head;
    while(ref.next != tail) {
        if(((Comparable)(ref.next.data)).compareTo(element) == 0) {
            ref.next = ref.next.next;
            return true;
        }
        ref = ref.next;
    }
    if(((Comparable)(tail.data)).compareTo(element) == 0) {
        tail = ref;
        tail.next = null;
        return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:13:45.450

异常跟踪表明您正在调用 remove(null)。由于某种原因，head.data 或 head.next 包含 null。我建议您在此处添加打印输出：

```
Object t = head.data;
while(temp.size() < i) {
    System.out.println("Looking at " + t); // <-- add here
    temp.append(t);
    remove(t); //this line
    t = head.next;
} 
```

然后观察这些价值观在做什么。您会看到其中一个为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:51:40.203

问题是你在哪里做：

```
while(temp.size() < i) {
    temp.append(t);
    remove(t); //this line
    t = head.next;
} 
```

问题是您已经移除了头部 (t)，因此您应该将 t 设置为`head.data`，而不是`head.next`。

# python - Wing IDE 中的 Matlab 样式变量编辑器

> ID：13222129
> 
> 赞同：2
> 
> 时间：2012-11-04T19:39:33.447
> 
> 标签：python, matlab, wing-ide

我正在考虑从 Matlab 迁移到 Python。我正在尝试 Wing IDE。我发现它非常方便，但现在我正在寻找一些功能，例如 Matlab 中的命令 Windows 和变量浏览器。我知道如果我启动调试过程，我可以使用 Debug Probe 调整内存中的变量，因此 Debug Probe 的行为非常类似于 Matlab 命令窗口。但是每次都先启动一个调试过程很不方便。我更愿意为此使用 Python Shell 选项卡。所以我有两个问题：

1.  是否可以像 Matlab 中的命令 Windows 一样使用 Python Shell 选项卡？
2.  我可以在 Wing IDE 中浏览 Python Shell 堆栈中的变量，最好使用 GUI 工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:00:15.573

我会明确建议使用[Spyderlib](http://code.google.com/p/spyderlib/)，它基本上是 python IDE 的 Matlab GUI 表示。它提供了一个shell选项卡、变量浏览器等。支持各种系统和架构，并且开源。

# c++ - 如何在 C++ 中对帧进行编程

> ID：13222130
> 
> 赞同：1
> 
> 时间：2012-11-04T19:39:42.313
> 
> 标签：c++, frames

好的，这里的 C++ 菜鸟问了一个非常愚蠢的问题（对不起），但是每当我编写我的基本程序（helloworld 等）时，它们总是出现在命令提示符窗口中。我想在 Word 和其他程序中制作适当的窗口。由于我每天使用的所有程序，我知道这样做是可能的。但是我如何在 C++ 中做到这一点？对于所有 Java 资深人士，我希望它像 JFrame，但与 C++ 等价。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:42:11.117

C++ 没有开箱即用的 UI 库，因此您需要选择一个。

流行的选项是[MFC](http://msdn.microsoft.com/en-us/library/d06h2x6e.aspx)（在 Windows/Visual C++ 下）或[Qt](http://qt-project.org/)（具有相当多的附加库和功能，可在许多平台上运行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T19:46:32.510

既然你提到了 Word，看来你是在 Windows 平台上。

然后考虑从例如**[Windows API 编程课程 (C++)](http://learnwinapi.wordpress.com/)**动手教程开始。

网上还有很多其他的教程和书籍可供购买。我只是选择了我最熟悉的一位，作为作者。关于书籍，关于 Windows API 编程的经典书籍是 Petzold 的“Windows Programming”，但我似乎记得最新版本是 Windows 8 和 C#（早期版本是 C/C++）。

本教程将引导您了解如何开始使用 Windows API（应用程序接口）直接创建窗口程序。

这是相当独立的语言，但本教程中使用的语言是 C++。C++ 没有对 GUI 内容的标准库支持。C++ 的理念是您可以自由使用任何您想要的第三方库，*或者创建它们*，例如 Windows API。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T19:42:32.797

这是高度依赖于平台的。您可以使用 GUI 跨平台库，如 QT，或使用本机机制。在 Windows 下，您可以使用 WinAPI 和 MFC。

# twig - 哪个 PO 编辑器可以从树枝文件中提取消息？

> ID：13222133
> 
> 赞同：0
> 
> 时间：2012-11-04T19:40:04.500
> 
> 标签：twig, gettext

有很多 PO 编辑器，您可以在这里找到其中的一些：[poEdit 有哪些好的替代品？](https://stackoverflow.com/questions/393267/what-good-alternatives-to-poedit-are-there)

但是哪一个可以从树枝文件中提取消息？

```
{% trans %}Hello %name%{% endtrans %} 
```

有一些方法可以使用 poedit，但我正在寻找更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T09:17:47.963

我认为没有可以解析 Twig 模板的 PO 编辑器。Poedit 可以在 Twig Gettext Extractor 的帮助下完成。

[Twig Gettext Extractor](https://github.com/umpirsky/Twig-Gettext-Extractor)是[Poedit](http://www.poedit.net/download.php)友好的工具，可以从 twig 模板中提取翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-06T12:33:59.743

我使用以下两个 npm 模块[xgettext-template](https://github.com/gmarty/xgettext)和[gettext-volt](https://github.com/perchlayer/gettext-volt)。由于 Volt 模板具有与 Twig 模板几乎相同的语法，因此可以完美运行。

**编辑 2021：**

您还可以购买[Poedit Pro 许可证](https://poedit.net/pro)：

> **使用 Twig 和 Volt 模板** Twig 是最流行的 Web 开发模板语言之一，被 WordPress、Craft CMS、Symfony、Drupal 或 Grav 使用；Phalcon 使用伏特。Poedit Pro 支持从 Twig 和 Volt 模板中提取翻译字符串，开箱即用。

# jquery - JQuery 选择封闭 div

> ID：13222134
> 
> 赞同：0
> 
> 时间：2012-11-04T19:40:36.443
> 
> 标签：jquery

我正在尝试找到一种选择内部类的方法，例如，如果我使用

```
 $('.outer :text').bind("change keyup", function () {
       $(this).removeClass("inner").addClass("newclass");
  }); 
```

我将如何选择包装已更改的文本输入的内部类？

```
<div class="outer">
         <div class="inner">
               <input type="text">
       </div>
          <div class="inner">
               <input type="text">
       </div>
          <div class="inner">
               <input type="text">
       </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:42:37.770

这个？

```
$( '.outer' ).on( 'change', ':text', function () {
    $( this ).closest( '.inner' ).toggleClass( 'inner newClass' );
}); 
```

# mysql - 选择一个字段的倍数

> ID：13222135
> 
> 赞同：-1
> 
> 时间：2012-11-04T19:40:40.703
> 
> 标签：mysql, sql

是否可以从一列变量列表中选择表中的单个行？

例如，我正在尝试使用 ID 号列表从产品表中仅选择某些产品

示例表“项目”：

```
item_id    item_title    item_source
-------    ----------    -----------
123        item A        place_a
124        item B        place_b
125        item C        place_c
126        item D        place_d 
```

这是我正在尝试的，但它不起作用：

```
select item_title, item_source from items where item_id IN ('123','125','126') 
```

我想返回：

```
item A        place_a
item C        place_c
item D        place_d 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:43:28.567

去掉引号（假设你的字段`item_id`是一个整数）

`select item_title, item_source from items where item_id IN (123,125,126)`

# jquery - 在外部单击时使用切换功能

> ID：13222137
> 
> 赞同：1
> 
> 时间：2012-11-04T19:40:56.883
> 
> 标签：jquery, toggle

我坚持使用我的 jQuery“函数”（我只知道基础知识）。所以我正在开发一个响应式网站，当用户按下箭头图标 → [>] (a#side-toggle) 时，菜单 (#header-toggle) 滑出，图标在左侧滑动以保持可见, 文本更改为箭头 → [<]。

当我再次单击此图标时，菜单将返回到它所在的位置，并且图标为 → [>]。完美的。

在第一个功能中，显示了一个覆盖 DIV，以避免用户在使用菜单时按下内容。当您单击此覆盖时，菜单会向后滑动并且覆盖消失。普通的。但是文字没有改变，就这样卡住了→ [<]

当我再次单击文本以显示菜单时，它变为此→ [>]，并且菜单不显示（该功能实际上已恢复到其原始状态）。如果我再次单击，该功能会切换，因为它应该。

我需要解决这个问题，用户应该只在这个图标上按一次来显示菜单。

如果可能的话，清理我的代码，因为我认为它也是一团糟，哈哈

这是[jsfiddle](http://jsfiddle.net/4HXEm/2/)！

问题出在 JS 中，这里是摘录：

```
$('#side-overlay').click(function() {
    $(this).hide();
    $("#header-toggle").animate({ 
        left: "-200px",
        boxShadow: "0px 0px 0px 0px rgba(0,0,0,0)"
      }, { duration: 700, easing: "easeInOutBack", queue: false });
    $("#side-handler").animate({ 
        left: "0px",
      }, { duration: 700, easing: "easeInOutBack", queue: false });
    $("a#side-toggle").text($(this).text() == '>' ? '<' : '>');
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:28:36.650

我想我找到了问题所在。

jQuery 切换方法`click`在指定选择器的事件上触发。这意味着如果您手动“隐藏”或“显示”覆盖和菜单而不通过此事件，您将与切换对象的内部状态不同步。

换句话说，单击箭头，切换的内部工作将在下次单击时触发隐藏事件，但是用户单击了手动隐藏元素的叠加层。然后用户单击箭头并触发隐藏事件，即使元素已经隐藏。

这是代码：[小提琴](http://jsfiddle.net/4HXEm/5/)

```
var side = $('a#side-toggle');
var overlay = $("#side-overlay")
var header = $("#header-toggle");
var sideHandler = $("#side-handler");

side.toggle(show,hide);

overlay.click(function(){side.click()});

function show(){
    header.animate({ 
        left: "0px",
        boxShadow: "3px 1px 11px -3px rgba(0,0,0,.45)"
    }, { 
        duration: 700, 
        queue: false 
    });

    sideHandler.animate({ 
        left: "200px",
    }, { 
        duration: 700, 
        queue: false 
    });
    overlay.show();
    side.text('<'); 
}

function hide(){
    header.animate({ 
        left: "-200px",
        boxShadow: "0px 0px 0px 0px rgba(0,0,0,0)"
    }, { 
        duration: 700, 
        queue: false 
    });

    sideHandler.animate({ 
        left: "0px",
    }, { 
        duration: 700, 
        queue: false 
    });
    overlay.hide();
    side.text('>'); 
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:28:01.960

在你的`slide-overlay` `.click()`函数里面：

```
$('#side-overlay').click(function() {
    //...
    $("a#side-toggle").text($(this).text() == '>' ? '<' : '>');});​
}); 
```

`$(this)`实际上是指`$('#side-overlay')`，所以既然目标错了，箭头就不会改变。您必须将其删除`$(this)`并替换为正确的目标...

```
$("a#side-toggle").text($("a#side-toggle").text() == '>' ? '<' : '>');});​ 
```

[**看到它在这里工作：http:** //jsfiddle.net/4HXEm/4/](http://jsfiddle.net/4HXEm/4/)

# c# - 在Gridview中编辑多行时如何更新数据库表

> ID：13222141
> 
> 赞同：1
> 
> 时间：2012-11-04T19:41:20.437
> 
> 标签：c#, .net, datagridview, datatable

我插入了从产品表中提取信息的 Windows 窗体的屏幕截图：

![窗体](../Images/1098c1ced9216c002ded9815028ab03f.png)

现在你可以看到我已经允许该选项`Modify`，然后`Save`在数据库表中进行修改。所以我面临的问题是更新数据库表中的数据。由于用户可以在 中一次更新多于 1 行`GridView`，我如何更新数据库表？

我可以进行逐行更新，也可以循环遍历`GridView`并更新我的表，然后使用命令生成器。

我想知道如何在这两种情况下实现解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:31:52.420

我将遍历行并将值传递给参数，然后在数据库中更新。有一件事，是不需要做更多的工作。但另一件有帮助的事情是您知道他们编辑的任何单元格都将提交给数据库。

# ruby-on-rails - send_file 的参数

> ID：13222142
> 
> 赞同：1
> 
> 时间：2012-11-04T19:41:22.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我把它放在我的 Rails 控制器中

```
send_file('/public/images/rails.png') 
```

但它给出了错误

```
Cannot read file /public/images/rails.png 
```

即使文件在那里。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:53:22.243

尝试这样做：

```
send_file("#{Rails.root}/public/images/rails.png") 
```

# c# - Wcf 服务和 Db 设置？

> ID：13222144
> 
> 赞同：1
> 
> 时间：2012-11-04T19:41:25.680
> 
> 标签：c#, .net, wcf, design-patterns, .net-4.0

我被要求构建不同的`WCF`服务，每个服务都针对 sql 进行其他工作。

我们有*5 个*分贝。所有 db 的 + 连接字符串都在*1 个*xml 文件中。（文件系统文件）

这些服务托管在`WAS`iis 7.5 下。

由于每个服务都应该从 db 读取，每个服务都引用一个`DAL dll`文件。

所以这里是我们的组件：

![在此处输入图像描述](../Images/5263c9741ca60bd047b86db609cc42ce.png)

我想将 xml 数据读取到`CACHE`（在第一次请求时）并从现在开始 - 从缓存中读取。（读取文件每个请求都是不可能*的*）。

*   想法 #1 = dll ，在他的 ctor 中，首先请求将读取 xml 文件并将其加载到**其**缓存中。

所以`dal`看起来像这样：

![在此处输入图像描述](../Images/071b521ddb90a3f11b0841ea72797f62.png)

所以现在每个服务都可以通过属性访问 DLL 的缓存对象。（一个优点是在处理`cache dependency`单个文件时 - 所以当它发生变化时，我们应该只重新加载到*一个*位置）。

*   想法 #2 = 当服务启动时，将 xml 加载到**它的** `cache`.

所以现在，每个服务将如下所示：

服务#1：

![在此处输入图像描述](../Images/0d61e63db51de087621b8a7efa1306f4.png)

服务#2：

![在此处输入图像描述](../Images/0d61e63db51de087621b8a7efa1306f4.png)

..

缺点是同一文件上有许多缓存依赖项

`Question :`

根据最佳实践经验和设计模式*POV*：哪种方式是首选方式？

*ps xml文件更改频率1/（1个月）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:23:40.647

首先，说到文件系统，在 Windows Server OS 上，磁盘上方有一个内置的缓存层。因此，对于磁盘读取，您可能不会有太大的不同。当然，一次又一次地解析相同的输入并不是一个好习惯，所以解析（tokenized）的xml应该被缓存。

设计需要更多说明：

1.  是否只有一个 DAL 类实例，在 5 个服务之间共享？或者想法 1 中描述的属性是静态的？

2.  在想法 2 中：当文件更改时，例如，连接字符串 4 更改（并且其他所有内容保持不变） - 只有服务 4 应该重新加载？

3.  如果重新加载特定服务 - 它是否会导致与其他（非新鲜）服务的某种不一致？

更新：

我仍然不确定我是否完全理解这种情况，但据我所知，这是我要做的：

DAL 应该为所有与数据相关的操作公开一个接口。

假设它是`IDataGateway`

现在，每个服务都应该有一个对实现的实例的引用`IDataGateway`。服务根本不应该知道缓存机制。它只是从接口消费数据。

因此，就类和代码组织而言，所有的缓存都是在服务之外完成的。

现在，缓存层反过来实现`IDataGateway`了 ，并且还使用了 的非缓存实例`IDataGateway`。这就是所谓的*装饰*者模式。非缓存实例将被注入到构造函数中。

现在，我建议每个服务都有自己的缓存实例`IDataGateway`。它比单例更简单（至少对我而言）。而且由于数据不在服务之间共享，所以我们很酷。但是，如果数据在服务**之间**共享，则应使用单个实例。

回到这 5 个实例，然后回到 xml 文件。

我们希望在文件更改后对其进行监控，对吗？我们可以很容易地编写自己的文件监视器，或者使用框架自带的，或者我们可以查看 CacheDependency 类的源代码。

最简单的方法是让 5 个监视器监视同一个文件。这对性能的影响不大，因为计时器非常“便宜”。

但是，如果您想减少系统使用的资源，那么您可以使用单个监视器，让它引发它的事件`FileChanged`或类似的东西。的 5 个缓存实现（这 5 个实例）中的每一个都`IDataGateway`应该在其构造函数中注入此监视器，并将其自己的事件侦听器连接到`FileChanged`事件。
一旦触发此事件，所有 5 个缓存实例都`IDataGateway`将使其内部缓存无效，因此它们应清除其内存中的条目。

在下一次调用时， 的缓存实现`IDataGateway`将尝试从其内存缓存中获取不存在的数据，但显然不会有任何数据，因此它应该继续在 的非缓存实现中执行相同的方法`IDataGateway`，并填充它的缓存。

这是我的设计，HTH...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:32:53.767

对我来说，问题归结为谁真正需要了解连接字符串：DAL 还是服务？显然是 DAL。该服务不（或不应该）关心 DAL 正在使用哪种数据存储 - 可能是磁盘上的一堆 CSV（哎呀！）它关心的一切。因此，将连接字符串放在服务中是没有意义的。DAL 需要连接信息，因此 DAL 应该负责查找并缓存它。

# c# - 退货前清空清单好吗？

> ID：13222145
> 
> 赞同：1
> 
> 时间：2012-11-04T19:41:29.427
> 
> 标签：c#, .net, memory-management, garbage-collection

我正在使用 C#，在某些方法中，我使用多个列表来获取数据库结果。这些可能非常大（10 个列表，每个列表大约 1,000 个对象）。目前，我只是从这些方法中返回并让垃圾收集器清除它。如果在回来之前我写`TheList.Clear();`这会有什么好处吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T19:44:20.813

由于调用`Clear`列表不会对数据造成垃圾回收，而只会从列表中删除对对象的引用，因此不会带来任何好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T19:43:44.730

不，因为您没有将列表复制给调用该方法的人，所以您正在发送对该列表的引用，该列表仅存在于内存中的一个位置。如果您清除列表，您也将清除您发送的列表，因为它是相同的。

如果我给你一个盒子，你把它装满东西，但是当你把盒子还给我之后，你把它清空，它就会是空的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T19:48:52.540

不，因为垃圾收集器将检测到没有对列表或其内容的引用，无论您是否这样做，并且在垃圾收集器运行之前不会回收内存。

# python - python中HTML代码的语法错误

> ID：13222150
> 
> 赞同：0
> 
> 时间：2012-11-04T19:42:02.890
> 
> 标签：python, html

我正在尝试在 python 中构建一个 HTML 表并遇到以下语法错误，谁能指出这里的问题是什么？

```
for i in range(len(PLlis)):
    print "i"
    print i
    outstring += "<tr>\n"
    outstring += "<td><a href="wikilinklis[i]">PLlist[0]</a></td>\n"
    outstring += "<td>build_locationlis[i]</td>\n"
    outstring += "<td>lis[i]</td>\n"
    outstring += "<td>Host_loc</td>\n"
    outstring += "<td>Baselis[i]</td>\n"
    outstring += "</tr>\n"
outstring += "</table>\n"
return outstring 
```

语法错误：-

```
 outstring += "<td><a href="wikilinklis[i]">PLlist[0]</a></td>\n"
                                     ^ 
```

SyntaxError：无效的语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:45:54.183

连接你的字符串：

```
outstring += "<td><a href=" + wikilinklis[i] + ">PLlist[0]</a></td>\n" 
```

if`wikilinks`是一个 python 字符串数组。否则，您必须转义引号（如果您尝试将 'wikilinks[i]' 写为字符串）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T19:46:33.043

你必须像这样重建你的字符串，因为 wikilinklis[i] 每次迭代都会改变。

```
outstring += "<td><a href=%s>%s</a></td>\n" % (wikilinklis[i], PLlist[0]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:25:09.687

不要做你正在做的事情。您不想连接一堆字符串，而是希望将值替换为模板。

最简单的方法是使用字符串和`%`运算符：

```
"""
<tr>
<td><a href="%(wikilinklis)s">%(PLlist)s</a></td>
<td>%(build_locationlis)s</td>
</tr>
""" % {'wikilinks': 'http://foo', 'PLlist': 'A link' } 
```

请注意三引号，它允许您嵌入换行符和引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:17:13.437

Python 没有内置的字符串插值。然而，你可以很容易地得到你想要的`"formatstring".format(...)`

```
for i in range(len(PLlis)):
    print "i"
    print i
    outstring += """
    <tr>
        <td><a href="{wikilink}">{PLlist[0]}</a></td>
        <td>{build_location}</td>
        <td>{value}</td>
        <td>Host_loc</td>
        <td>{base}</td>
    </tr>""".format(
        wikilink=wikilinklis[i],
        build_location=build_locationlis[i],
        value=lis[i],
        base=Baselis[i]
    )

outstring += "</table>\n"
return outstring 
```

三引号除了允许我将字符串跨越多行之外没有任何意义。

# azure - Azure 表存储第 2 代总是优于第 1 代吗？

> ID：13222153
> 
> 赞同：3
> 
> 时间：2012-11-04T19:42:30.287
> 
> 标签：azure, azure-storage, azure-table-storage

Microsoft 更改了 Azure 存储的体系结构以使用例如。SSD 用于日志和 10 Gbps 网络（而不是标准硬盘和 1G ps 网络）。[搜索](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx

在这里你可以读到存储是为“每秒最多 20,000 个实体/消息/blob”而设计的。

我担心的是 20.000 个实体（或表存储中的行）实际上并不多。

我们有一个相当小的解决方案，其中包含 1.000.000.000 行的表。只有 20.000 个实体 pr。其次，读取所有行需要半天以上的时间。

我真的希望 20.000 个实体实际上意味着您最多可以执行 20.000 个请求。第二。

我很确定第一代最多允许 5.000 个请求。第二。

所以我的问题是。是否存在第一代 Azure 存储实际上比第二代更具可扩展性的场景？

还有任何其他我们不应该升级的原因（将我们的数据移动到新的存储）？例如。我们试图获得约 100 行公关。分区，因为这给了我们最好的性能特征。2代有不同的特点吗？或者如果我们进行更改，是否有任何更改可能会引入错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:56:03.823

你必须更仔细地阅读。提到的帖子的确切报价是：

> **事务**– 每秒最多 20,000 个实体/消息/blob

这是每秒 20k 事务。你希望哪一个是正确的。我当然不希望有 20k 1M 文件上传到 blob 存储。但我确实希望能够执行 20k REST 调用。

至于表和表实体，可以[批量](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)组合。鉴于您拥有的数量，我希望您已经在使用批次。有单个实体组交易被视为单个交易，但可能包含多个实体。现在，与其评估它是低还是高，您确实需要一个良好的设置和带宽来利用每秒 20k 的事务。

此外，第一代可扩展性目标大约是您提到的 5k 请求/秒。我没有看到第 1 代存储比第 2 代存储更具可扩展性的配置/场景。

> 2代有不同的特点吗？

您参考的博客文章中概述了这些差异。

至于你的最后一个问题：

> 或者如果我们进行更改，是否有任何更改可能会引入错误？

确保没有这样的变化。Azure 存储服务行为在[REST API 参考](http://msdn.microsoft.com/en-us/library/windowsazure/dd179355.aspx)中定义。API 基于存储服务生成没有任何不同。它基于功能进行版本控制。

# java - 表格中已过滤行的工具提示

> ID：13222159
> 
> 赞同：0
> 
> 时间：2012-11-04T19:42:46.113
> 
> 标签：java, swing, jtable, tablemodel, rowfilter

我有一个 JTable，当鼠标悬停一行时，其中的任何单行都关联了不同的工具提示。我为此表创建了一个“过滤器”；当它被应用时，它完美地隐藏了需要隐藏的行但是当我将鼠标悬停在过滤的行上时，看起来工具提示指的是占据新当前行的相同行位置的行。

例如：

桌子

第 1 行 -> 工具提示 1

第 2 行 -> 工具提示 2

对表应用过滤器：

第 2 行 -> 工具提示 1

所以第 2 行显示的是工具提示 1 而不是 2。

```
TableRowSorter<TableModel> sorter = (TableRowSorter<TableModel>) table.getRowSorter();
sorter.setRowFilter(RowFilter.regexFilter(text)); 
```

我的扩展 JTable 的表有：

```
@Override
public String getToolTipText(MouseEvent e) {
    final int rowIndex = rowAtPoint(e.getPoint());
    TableModel model = getModel();
    // take the value from the first column of the selected row
    String tip = (String) getModel().getValueAt(rowIndex, 0));
    return tip;
} 
```

所以看起来使用模型并没有（很明显）更新过滤器。我也尝试使用 TableModel model = getRowSorter().getModel() 但没有任何运气。

如何指向正确的“过滤模型”以检索正确的行位置？

更新：

我已经像这样替换了“rowIndex”代码：

```
final int rowIndex = convertRowIndexToModel(rowAtPoint(e.getPoint())); 
```

它部分解决了这个问题，但是当一些行被动态添加到应用了过滤器的表中并且我悬停新行时，我得到了异常（带有相关 API 描述）：

IndexOutOfBoundsException -> 如果启用了排序并传递了 JTable 范围之外的索引，由方法 getRowCount 确定

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:49:49.107

您需要将视图行索引转换为模型的行索引

看看[JTable#convertRowIndexToModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertRowIndexToModel%28int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T22:21:23.077

您不应该覆盖该`JTable#getToolTipText`方法。只需在渲染器返回的组件上设置工具提示文本。会`JTable`自动捡起来。`getTooltipText`你可以在方法的实现中看到这一点`JTable`

# wordpress - Wordpress 自定义查询比较两个时间戳元数据

> ID：13222161
> 
> 赞同：0
> 
> 时间：2012-11-04T19:42:52.143
> 
> 标签：wordpress, timestamp

我正在尝试通过比较元值来查询帖子。我在帖子中设置了两个元数据。即“开始日期”和“结束日期”。它们存储为 UNIX 时间戳。

现在我想查询以下条件的帖子：

1.  当前时刻的时间戳在（大于）“开始日期”之后。
2.  当前时刻的时间戳早于（小于）'end_date'。

在这种情况下，我希望两个条件都满足。所以，我使用了'relation'=>'AND'。

所以这里是查询的 print_r：

```
Array
(
   [post_type] => ads
   [meta_query] => Array
       (
           [relation] => AND
           [0] => Array
               (
                   [kye] => start_date
                   [compare] => <=
                   [value] => 1352054503
                   [type] => NUMERIC
               )

           [1] => Array
               (
                   [kye] => end_date
                   [compare] => >=
                   [value] => 1352054503
                   [type] => NUMERIC
               )

       )

) 
```

注意：广告是自定义帖子类型。

这是一篇文章的元数据：

```
Array
(   
   [start_date] => Array
       (
           [0] => 1352160000
       )

   [end_date] => Array
       (
           [0] => 1352246400
       )

) 
```

我认为这篇文章绝对没有理由出现。开始日期时间戳 (1352160000) 大于当前时间戳 (1352054503)。这打破了条件＃1。那么，为什么还会出现这种情况呢？你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:31:02.933

在您的 meta_query 中，您使用的是“kye”而不是“key”。

# php - 如何在php中停止来自同一用户ID的并发登录

> ID：13222162
> 
> 赞同：0
> 
> 时间：2012-11-04T19:42:58.943
> 
> 标签：php, login

如果他/她已经登录 php，我们如何阻止用户登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:47:31.273

如果您想阻止某人在他已经从同一台计算机登录的情况下进行登录，那么如果会话/cookie 存在，您应该从 login.php 页面（例如）重定向。

如果您想避免来自同一帐户（来自另一台计算机）的多个登录，则在数据库的用户表中添加一行，该行将存储用户的会话，当用户登录时，您将存储他的会话 ID，然后您可以使用他的会话 ID 来识别此用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:45:37.787

您可以利用会话管理技术，这需要将会话 ID 存储在用户 cookie 中，因此当请求以特定会话 ID 到达您的站点时，您可以检查与该会话 ID 关联的用户是否已在您的系统中标记为已登录. [这是](http://www.dreamincode.net/forums/topic/51558-session-handling-in-php/)一个让您入门的参考...

# android - 使用 RadioGroup 将 xml 数据解析为交互式 ListView

> ID：13222163
> 
> 赞同：2
> 
> 时间：2012-11-04T19:43:00.207
> 
> 标签：android, xml, parsing, listview, radio-group

[更新：我已经在这个](https://stackoverflow.com/questions/9392511/how-to-handle-oncheckedchangelistener-for-a-radiogroup-in-a-custom-listview-adap)帮助下解决了我的问题， 如果有人感兴趣，我会发布。

这是我的第一篇文章...请温柔。我已成功将 xml 文件中的数据解析为 ListView。我想在每一行中都有 RadioGroup，然后我会根据收音机选择做一些事情。由于 android 自己重绘，我的选择没有保存。我已经阅读[了本](http://www.mindfiresolutions.com/Keeping-the-data-in-ListView-with-interactive-items-while-scrolling-in-Android-1621.php)教程，但很难将其转化为我的项目，因为它们不解析数据。

如何保存每个行项目的选择？这是我的代码：

```
public class OOPActivity extends ListActivity {

static final String path = "oop.xml";

//xml node keys
static final String KEY_STUDENT = "student"; //parent node
static final String KEY_ID = "student_id";
static final String KEY_NAME = "name";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ArrayList<HashMap<String, String>> students = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser(this);

    String xmlString = parser.getXML(path); //get XML

    Document doc = parser.getDomElement(xmlString); //get DOM element

    NodeList nl = doc.getElementsByTagName(KEY_STUDENT);

    //looping through all item nodes <student>
    for(int i=0; i < nl.getLength(); i++){
        //creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        //adding each child node to Hashmap key => value
        map.put(KEY_STUDENT, parser.getValue(e,  KEY_STUDENT));
        map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
        map.put(KEY_ID, parser.getValue(e, KEY_ID));

        students.add(map);
    }

    ListAdapter adapter = new SimpleAdapter(this, students,
            R.layout.student_items,
            new String[] { KEY_NAME, KEY_ID }, new int[] {
            R.id.name, R.id.id});

    setListAdapter(adapter);

} 
```

行布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/light_blue_back"
    android:orientation="vertical" >
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textSize="26dip"
        android:textStyle="bold"
        >
</TextView>
<TextView
        android:id="@+id/id"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textSize="16dip"
        android:textStyle="bold"
        >
    </TextView>
    <RadioGroup
        android:id="@+id/student_state"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    <RadioButton
        android:id="@+id/chk_present"
        android:text="Present"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
         />
    <RadioButton
        android:id="@+id/chk_absent"
        android:text="Absent"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
         />
    <RadioButton 
        android:id="@+id/chk_tardy"
        android:text="Tardy"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        />
    <RadioButton
        android:id="@+id/chk_excused"
        android:text="Excused Absence"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
         />
    <RadioButton
        android:id="@+id/chk_left"
        android:text="Left Early"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
         />
    </RadioGroup>
</LinearLayout> 
```

列表显示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
     >"

     <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:background="@drawable/blue_back"
         >
    </ListView>

</LinearLayout> 
```

那么如何保存选择呢？最后，我想根据 RadioGroup 选择将新属性写入 xml 文件。如果您需要任何进一步的信息，请告诉我。我已经坚持了好几天了。由于我的新手状态，无法发布屏幕截图。

更新：创建了自定义适配器......我认为这是我需要放置 RadioButton 东西的地方......

```
public class MyAdapter extends ArrayAdapter<HashMap<String, String>> {
private final Activity context;
private final ArrayList<HashMap<String, String>> values;

static class ViewHolder{
    public TextView name;
    public TextView id;
    protected CheckBox checkbox;
}

public MyAdapter(Activity context, ArrayList<HashMap<String, String>> values){
    super(context, R.layout.student_items, values);
    this.context = context;
    this.values = values;
}

public View getView(int position, View convertView, ViewGroup parent){
    View rowView = convertView;
    if(rowView == null){
        LayoutInflater inflater = context.getLayoutInflater();
        rowView = inflater.inflate(R.layout.student_items, null);
        ViewHolder viewHolder = new ViewHolder();
        viewHolder.name = (TextView)rowView.findViewById(R.id.name);
        viewHolder.id = (TextView)rowView.findViewById(R.id.id);
        rowView.setTag(viewHolder);
    }
    ViewHolder holder = (ViewHolder) rowView.getTag();
    HashMap<String, String> s = values.get(position);

    //holder.name.setText(s.get(position).toString());
    holder.name.setText(s.values().toString());
    //holder.name.setText(s.toString());
    System.out.println(s);

    return rowView;

} 
```

}

# optimization - 在什么类型的循环中最好在 CUDA 中使用 #pragma unroll 指令？

> ID：13222165
> 
> 赞同：8
> 
> 时间：2012-11-04T19:43:10.033
> 
> 标签：optimization, cuda, loop-unrolling

在 CUDA 中，可以使用`#pragma`unroll 指令展开循环，以通过增加指令级并行度来提高性能。可以选择`#pragma`后跟一个数字，指定循环必须展开多少次。

不幸的是，文档没有给出何时应该使用该指令的具体说明。由于具有已知行程计数的小循环已经被编译器展开，是否应该`#pragma`在较大的循环上使用展开？在带有可变计数器的小循环上？那么可选的展开次数呢？还有关于 cuda 特定循环展开的推荐文档吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T00:00:31.407

没有任何快速而硬性的规则。CUDA 编译器至少有两个展开器，一个在 NVVM 或 Open64 前端，一个在 PTXAS 后端。一般来说，他们倾向于非常积极地展开循环，所以我发现自己使用`#pragma unroll 1`（防止展开）比任何其他展开属性更频繁。关闭循环展开的原因有两个：

(1) 当一个环完全展开时，套准*压力*会增加。例如，小型本地内存数组的索引可能成为编译时常量，允许编译器将本地数据放入寄存器。完全展开也可能会延长基本块，允许更积极地调度纹理和全局加载，这可能需要额外的临时变量，因此需要寄存器。由于套准溢出，增加的套准压力会导致性能下降。

(2) 部分展开的循环通常需要一定数量的*预计算和清理*代码来处理不完全是展开因子倍数的循环计数。对于行程数较短的循环，此开销可能会淹没展开循环所获得的任何性能提升，从而导致展开后的性能降低。虽然编译器包含在这些限制下寻找合适循环的启发式方法，但启发式方法并不总是提供最佳决策。

在极少数情况下，我发现手动提供比编译器自动使用的展开因子更高的展开因子对性能的有益影响很小（典型增益为个位数百分比）。这些通常是内存密集型代码的情况，其中较大的展开因子允许更积极地调度全局或纹理加载，或者非常紧密的计算绑定循环，受益于循环开销的最小化。

使用展开因子应该在优化过程的后期进行，因为编译器默认值涵盖了人们在实践中会遇到的大多数情况。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-04T19:53:56.893

这是一个可用于展开循环的工具。何时应该/不应该使用它的细节会根据您的代码（例如循环内的内容）而有很大差异。没有任何好的通用技巧，除了想想你的代码在展开与滚动时会是什么样子，并考虑它是否会更好地展开。

# ajax - 我应该在哪里设置会话 api 和客户端

> ID：13222169
> 
> 赞同：1
> 
> 时间：2012-11-04T19:43:28.180
> 
> 标签：ajax, api, codeigniter, session

这是情况，我已经设置了2个codeigniter安装。

一个是客户端，一个是 api。这将进一步改进

1.  客户端将不再由 CI 制作，因为我没有使用它的功能。我只是想从一个 mvc 框架开始。

我的问题是我应该在哪里存储会话？在登录期间。

以下是我的做法，但我认为我做错了。

1.  我从**客户端**创建了一个登录。这个将登录凭据发送到**api ，然后验证****客户端**发送的这些信息，无论登录凭据是否有效，都会返回一条*消息/响应。*

如果登录详细信息有效，**api**将在其控制器中设置一个会话，如下所示

```
if(true) {
    $this->session->set_userdata($array);
} 
```

这是在`login_controller`我创建的。这是为api**客户端设置会话的正确方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:09:26.070

你的概念是对的。您**只想**在验证用户提供的有效凭据后设置会话用户数据。

也就是说，请确保您使用的是加密的 cookie，如果您正在处理敏感数据，请将会话数据存储在数据库中。将其存储在数据库中会导致 CodeIgniter 中会话的工作方式出现一些奇怪的问题（主要是使用 flashdata），但肯定识别的额外好处可能是值得的。

通过将会话数据存储在数据库中，您可以更积极地验证用户是他们声称的身份（根据会话 ID 等）。原因是会话数据只存储在数据库中，而不是会话 cookie（它只保存会话 ID 和其他一些信息）。这样，即使有人确实设法解密了 cookie，他们也无法修改他们的用户数据以假装是其他人，就像您可以使用仅使用 cookie 的方法一样。

# html - 使用 MFMailComposeViewControllerDelegate 的电子邮件正文非常宽

> ID：13222175
> 
> 赞同：1
> 
> 时间：2012-11-04T19:44:15.147
> 
> 标签：html, objective-c, ios

我正在尝试使用 MFMailComposeViewControllerDelegate 生成和发送 HTML 邮件。

然而，在运行应用程序并打开邮件视图后，我看到了这个：

![在此处输入图像描述](../Images/ae044d46163431f9125b840101c374aa.png)

我的电子邮件实际正文的左右两侧都有过多的“灰色”空间。这是什么原因造成的？这是我的 HTML 或 obj-c 代码中的问题吗？

编辑：这里要求的是html，因为我认为我的问题出在此处是一个安全的赌注 - 特别是因为我从来没有写过它的任何一行并从在线服务中将它一起破解。任何帮助将不胜感激。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional //EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0085)file://localhost/Users/litemac/Documents/DamcoAppCoreData/DamcoAppCoreData/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title></title><style type="text/css">
/* Mobile-specific Styles */
@media only screen and (max-device-width: 480px) { 
table[class=w0], td[class=w0] { width: 0 !important; }
table[class=w10], td[class=w10], img[class=w10] { width:10px !important; }
table[class=w15], td[class=w15], img[class=w15] { width:5px !important; }
table[class=w30], td[class=w30], img[class=w30] { width:10px !important; }
table[class=w60], td[class=w60], img[class=w60] { width:10px !important; }
table[class=w125], td[class=w125], img[class=w125] { width:80px !important; }
table[class=w130], td[class=w130], img[class=w130] { width:55px !important; }
table[class=w140], td[class=w140], img[class=w140] { width:90px !important; }
table[class=w160], td[class=w160], img[class=w160] { width:180px !important; }
table[class=w170], td[class=w170], img[class=w170] { width:100px !important; }
table[class=w180], td[class=w180], img[class=w180] { width:80px !important; }
table[class=w195], td[class=w195], img[class=w195] { width:80px !important; }
table[class=w220], td[class=w220], img[class=w220] { width:80px !important; }
table[class=w240], td[class=w240], img[class=w240] { width:180px !important; }
table[class=w255], td[class=w255], img[class=w255] { width:185px !important; }
table[class=w275], td[class=w275], img[class=w275] { width:135px !important; }
table[class=w280], td[class=w280], img[class=w280] { width:135px !important; }
table[class=w300], td[class=w300], img[class=w300] { width:140px !important; }
table[class=w325], td[class=w325], img[class=w325] { width:95px !important; }
table[class=w360], td[class=w360], img[class=w360] { width:140px !important; }
table[class=w410], td[class=w410], img[class=w410] { width:180px !important; }
table[class=w470], td[class=w470], img[class=w470] { width:200px !important; }
table[class=w580], td[class=w580], img[class=w580] { width:280px !important; }
table[class=w640], td[class=w640], img[class=w640] { width:300px !important; }
table[class*=hide], td[class*=hide], img[class*=hide], p[class*=hide], span[class*=hide] { display:none !important; }
table[class=h0], td[class=h0] { height: 0 !important; }
p[class=footer-content-left] { text-align: center !important; }
#headline p { font-size: 30px !important; }
.article-content, #left-sidebar{ -webkit-text-size-adjust: 90% !important; -ms-text-size-adjust: 90% !important; }
.header-content, .footer-content-left {-webkit-text-size-adjust: 80% !important; -ms-text-size-adjust: 80% !important;}
img { height: auto; line-height: 100%;}
 } 
/* Client-specific Styles */
#outlook a { padding: 0; }  /* Force Outlook to provide a "view in browser" button. */
body { width: 100% !important; }
.ReadMsgBody { width: 100%; }
.ExternalClass { width: 100%; display:block !important; } /* Force Hotmail to display emails at full width */
/* Reset Styles */
/* Add 100px so mobile switch bar doesn't cover street address. */
body { background-color: #ececec; margin: 0; padding: 0; }
img { outline: none; text-decoration: none; display: block;}
br, strong br, b br, em br, i br { line-height:100%; }
h1, h2, h3, h4, h5, h6 { line-height: 100% !important; -webkit-font-smoothing: antialiased; }
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a { color: blue !important; }
h1 a:active, h2 a:active,  h3 a:active, h4 a:active, h5 a:active, h6 a:active { color: red !important; }
/* Preferably not the same color as the normal header link color.  There is limited support for psuedo classes in email clients, this was added just for good measure. */
h1 a:visited, h2 a:visited,  h3 a:visited, h4 a:visited, h5 a:visited, h6 a:visited { color: purple !important; }
/* Preferably not the same color as the normal header link color. There is limited support for psuedo classes in email clients, this was added just for good measure. */  
table td, table tr { border-collapse: collapse; }
.yshortcuts, .yshortcuts a, .yshortcuts a:link,.yshortcuts a:visited, .yshortcuts a:hover, .yshortcuts a span {
color: black; text-decoration: none !important; border-bottom: none !important; background: none !important;
}   /* Body text color for the New Yahoo.  This example sets the font of Yahoo's Shortcuts to black. */
/* This most probably won't work in all email clients. Don't include <code _tmplitem="282" > blocks in email. */
code {
  white-space: normal;
  word-break: break-all;
}
#background-table { background-color: #ececec; }
/* Webkit Elements */
#top-bar { border-radius:6px 6px 0px 0px; -moz-border-radius: 6px 6px 0px 0px; -webkit-border-radius:6px 6px 0px 0px; -webkit-font-smoothing: antialiased; background-color: #043948; color: #e7cba3; }
#top-bar a { font-weight: bold; color: #e7cba3; text-decoration: none;}
#footer { border-radius:0px 0px 6px 6px; -moz-border-radius: 0px 0px 6px 6px; -webkit-border-radius:0px 0px 6px 6px; -webkit-font-smoothing: antialiased; }
/* Fonts and Content */
body, td { font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; }
.header-content, .footer-content-left, .footer-content-right { -webkit-text-size-adjust: none; -ms-text-size-adjust: none; }
/* Prevent Webkit and Windows Mobile platforms from changing default font sizes on header and footer. */
.header-content { font-size: 12px; color: #e7cba3; }
.header-content a { font-weight: bold; color: #e7cba3; text-decoration: none; }
#headline p { color: #e7cba3; font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; font-size: 36px; text-align: center; margin-top:0px; margin-bottom:30px; }
#headline p a { color: #e7cba3; text-decoration: none; }
.article-title { font-size: 18px; line-height:24px; color: #9a9661; font-weight:bold; margin-top:0px; margin-bottom:18px; font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; }
.article-title a { color: #9a9661; text-decoration: none; }
.article-title.with-meta {margin-bottom: 0;}
.article-meta { font-size: 13px; line-height: 20px; color: #ccc; font-weight: bold; margin-top: 0;}
.article-content { font-size: 13px; line-height: 18px; color: #444444; margin-top: 0px; margin-bottom: 18px; font-family: 'Helvetica Neue', Arial, Helvetica, Geneva, sans-serif; }
.article-content a { color: #00707b; font-weight:bold; text-decoration:none; }
.article-content img { max-width: 100% }
.article-content ol, .article-content ul { margin-top:0px; margin-bottom:18px; margin-left:19px; padding:0; }
.article-content li { font-size: 13px; line-height: 18px; color: #444444; }
.article-content li a { color: #00707b; text-decoration:underline; }
.article-content p {margin-bottom: 15px;}
.footer-content-left { font-size: 12px; line-height: 15px; color: #e2e2e2; margin-top: 0px; margin-bottom: 15px; }
.footer-content-left a { color: #e7cba3; font-weight: bold; text-decoration: none; }
.footer-content-right { font-size: 11px; line-height: 16px; color: #e2e2e2; margin-top: 0px; margin-bottom: 15px; }
.footer-content-right a { color: #e7cba3; font-weight: bold; text-decoration: none; }
#footer { background-color: #043948; color: #e2e2e2; }
#footer a { color: #e7cba3; text-decoration: none; font-weight: bold; }
#permission-reminder { white-space: normal; }
#street-address { color: #e7cba3; white-space: normal; }
</style>
<!--[if gte mso 9]>
<style _tmplitem="282" >
.article-content ol, .article-content ul {
   margin: 0 0 0 24px;
   padding: 0;
   list-style-position: inside;
}
</style>
<![endif]--></head><body><table width="100%" cellpadding="0" cellspacing="0" border="0" id="background-table">
    <tbody><tr>
        <td align="center" bgcolor="#ececec">
            <table class="w640" style="margin:0 10px;" width="640" cellpadding="0" cellspacing="0" border="0">
                <tbody><tr><td class="w640" width="640" height="20"></td></tr>

                <tr>
                    <td class="w640" width="640">
                        <table id="top-bar" class="w640" width="640" cellpadding="0" cellspacing="0" border="0" bgcolor="#FFFFFF">
    <tbody><tr>
        <td class="w15" width="15"></td>
        <td class="w325" width="350" valign="middle" align="left">
            <table class="w325" width="350" cellpadding="0" cellspacing="0" border="0">
                <tbody><tr><td class="w325" width="350" height="8"></td></tr>
            </tbody></table>
            <div class="header-content" align="right"><span class="hide">&nbsp;&nbsp;|&nbsp; <time lang="en">Damco Sales Visit</time> &nbsp;&nbsp;|&nbsp; <timestamp>12-12-2012</timestamp> &nbsp;&nbsp;|&nbsp; </span></div>
            <table class="w325" width="350" cellpadding="0" cellspacing="0" border="0">
                <tbody><tr><td class="w325" width="350" height="8"></td></tr>
            </tbody></table>
        </td>
        <td class="w30" width="10"></td>

    </tr>
</tbody></table>

                    </td>
                </tr>
                <tr>
                <td id="header" class="w640" width="640" align="center" bgcolor="#FFFFFF">

    <div align="left" style="text-align: left">

        <img id="customHeaderImage" label="Header Image" editable="true" width="144" src="Logo.png" class="w640" border="0" align="top" style="display: inline">

    </div>

</td>
                </tr>

                <tr id="customer-info-row"><td class="w640" width="640" height="30" bgcolor="#ffffff"></td></tr>
                <tr id="simple-content-row"><td class="w640" width="640" bgcolor="#ffffff">
    <table class="w640" width="640" cellpadding="0" cellspacing="0" border="0">
        <tbody><tr>
            <td class="w30" width="30"></td>
            <td class="w580" width="580">
                <repeater>
                    <layout label="Text only">
                        <div align="left" class="article-content">
                            <multiline label="Description">
                                Dear //CUSTOMER_NAME//,<br>
                                <br>
                                <br>
                                Thank you for a pleasant meeting. 
                                Please find below an overview of the products and services we discussed during our meeting 
                                and the notes to the products/services we agreed follow up on.<br>
                                <br>
                                //NOTE_TO_CUSTOMER//
                            </multiline>
                        </div>
                    </layout>
                    <hr>
                    <layout label="Two columns">
                        <table class="w580" width="580" cellpadding="0" cellspacing="0" border="0">
                            <tbody><tr>
                                <td class="w275" width="275" valign="top">
                                    <table class="w275" width="580" cellpadding="0" cellspacing="0" border="0">
                                        <tbody><tr>
                                            <td class="w275" width="275">
                                                <p align="left" class="article-title"><singleline label="Title">PREMIUM OFFERINGS</singleline></p>
                                                <div align="left" class="article-content">

                                                </div>
                                            </td>

                                            <td class="w275" width="30">

                                            <td class="w275" width="275">
                                                <p align="left" class="article-title"><singleline label="Title">NOTES</singleline></p>
                                                <div align="left" class="article-content">

                                                </div>
                                            </td>
                                        </tr>
                                        //PREMIUM_PLACEHOLDER//
                                    </tbody></table>
                                </td>

                            </tr>
                        </tbody></table>
                    </layout>                                              

                </repeater>

                <repeater>

                    <layout label="Text only">

                    </layout>
                    <layout label="Two columns">
                        <table class="w580" width="580" cellpadding="0" cellspacing="0" border="0">
                            <tbody><tr>
                                <td class="w275" width="275" valign="top">
                                    <table class="w275" width="580" cellpadding="0" cellspacing="0" border="0">
                                        <tbody>

                                            <tr>
                                                <td class="w275" width="275">
                                                    <p align="left" class="article-title"><singleline label="Title">SUPPLY CHAIN OFFERINGS</singleline></p>
                                                    <div align="left" class="article-content">
                                                    </div>
                                                </td>

                                                <td class="w275" width="30"></td>

                                                    <td class="w275" width="275">
                                                        <p align="left" class="article-title"><singleline label="Title">NOTES</singleline></p>
                                                        <div align="left" class="article-content">

                                                        </div>
                                                    </td>

                                            </tr>

                                            //SUPPLYCHAIN_PLACEHOLDER//

                                    </tbody></table>
                                </td>

                            </tr>
                        </tbody></table>
                    </layout>
                </repeater>
                <hr>

                <layout label="Text only">
                        <div align="left" class="article-content">
                            <multiline label="Description">
                                Best regards,<br>
                                <br>
                                //SALESPERSON_NAME//<br>
                                M:&emsp;//SALESPERSON_MOBILE//<br>
                                E:&emsp;//SALESPERSON_EMAIL//<br>
                                W:&emsp;<a href="http://dummypage.dk">http://www.dummy.com</a><br>
                            </multiline>
                        </div>
                    </layout>
            </td>
            <td class="w30" width="30"></td>
        </tr>
    </tbody></table>
</td></tr>
                <tr><td class="w640" width="640" height="15" bgcolor="#ffffff"></td></tr>

                <tr>
                <td class="w640" width="640">
    <table id="footer" class="w640" width="640" cellpadding="0" cellspacing="0" border="0" bgcolor="#043948">
        <tbody><tr><td class="w30" width="30"></td><td class="w580 h0" width="360" height="30"></td><td class="w0" width="60"></td><td class="w0" width="160"></td><td class="w30" width="30"></td></tr>
        <tr>
            <td class="w30" width="30"></td>
            <td class="w580" width="360" valign="top">
            <span class="hide"><p id="terms" align="left" class="footer-content-left"><span>More Text....</span><br>
<span></span><br>
<span><b>About Damco</b></span><br>
<span>Text....</span></p></span>

            </td>
                    </tr>
        <tr><td class="w30" width="30"></td><td class="w580 h0" width="360" height="15"></td>    <td class="w0" width="60"></td><td class="w0" width="160"></td><td class="w30" width="30">  </td></tr>
    </tbody></table>
    </td>
                </tr>
                <tr><td class="w640" width="640" height="60"></td></tr>
            </tbody></table>
        </td>
    </tr>
    </tbody></table>
    </body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:03:27.713

您的问题出在 HTML 上。在 iOS 或 ObjectiveC 中你不会意外地做任何事情来导致这个问题。

从导致臃肿的编辑器中复制 HTML 是很诱人的（我曾因复制 MS Word 生成的 HTML 而感到内疚），但毫无疑问，它会因膨胀因素而付出代价，而且往往会导致不希望的副作用。重要的是，膨胀使得调试即使是简单的 HTML 问题也变得更加困难。

怎么样：与其从臃肿的 HTML 开始并削减以避免时髦的边距，为什么不从最小的 HTML 开始并添加您需要的内容以获得所需的外观？

无论哪种方式，您都可以（并且应该）在 HTML 编辑器（甚至浏览器）中测试您的 HTML，然后再将其插入 iOS 应用程序代码。如果您有 HTML 问题，请将其作为单独的问题发布在这里，有人会很快回答。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:27:06.720

似乎这条线引起了我所有的问题；

```
body { width: 100% !important; } 
```

删除它解决了我的问题。

# c++ - 将 char 数组转换为 int 指针

> ID：13222179
> 
> 赞同：3
> 
> 时间：2012-11-04T19:44:26.243
> 
> 标签：c++, arduino

我有一个名为的字符串对象`Message`，它被赋予一个字符串，例如：

```
Message = "Hello"; 
```

然后将每个字符存储在字符数组中：

```
void Load()
{
    Message.toUpperCase(); // Makes all the characters uppercase
    for (int T = 0; T < Message.length(); T++) 
    {
        Storage[T] = Message.charAt(T);
    }       
 } 
```

这部分工作正常。

现在我想调用一个函数，该函数需要传递一个指向数组的整数指针，该数组映射出在 5*7 LED 矩阵上显示字符所需的位值。

通常我可以调用`Display(H)`( `void Display(int Array[])`)，就可以了。但是，我想使用字符串数组，以便它可以自动完成。问题是，当通常使用 H 时，它被视为整数指针，并且效果很好。存储保存不是指针的字符，这会产生问题。

我尝试了各种转换它的方法，但似乎都失败了。这甚至可能吗？

这是我尝试过的：

```
char to int:
int w = int(Storage[L]);
int* ww = &w; 
```

这编译得很好，但输出都是错误的。所以我不太确定如何更进一步。

只是为了澄清，这有效：

```
int A[] = {0x1B, 0x15, 0xE, 0xE, 0x0, 0xE, 0xE, 0xE};

Display(A); 
```

但这不会：

```
String[L] = A;
int w = int(Storage[L]);
int* ww = &w;

Display(ww); 
```

我可能在做一些愚蠢的事情，但我看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:58:15.107

int 和 char 的大小不同，int（通常）是 char 大小的四倍，因此当您在数组中获取特定 char 的指针值时，您也在将以下三个 char 复制到 int 中。这可能就是您的输出混乱的原因。尝试以下操作：

```
 int i = (Storage[idx])
    int * ptrI = &i;//now ptrI points to the single integer which has been copied. 
```

如果要指向多个整数，则需要定义一个整数数组（比 char 数组小四倍）——确保大小正确。除此之外，我无能为力，因为您的解释不清楚。

# php - 在提交时获得简单的 if/else 条件

> ID：13222182
> 
> 赞同：0
> 
> 时间：2012-11-04T19:44:45.350
> 
> 标签：php, forms, codeigniter, form-submit

我尝试了许多不同的方法，包括添加 `$this->load->helper(array('form', 'url'));`到 autoload.php 等等。

当我填写名字和姓氏的值时，没有其他内容并按提交，它只是重定向回同一页面（而不是 clientRegistrationSuccess.php），如`if{} else{}`

**表格（查看）**

```
 echo validation_errors();

       echo form_open('index/pages/clientcreation',$CustCreationFormAttr);
        echo form_label('First Name: ','fname');
            echo form_input($CustCreationFirstName);echo '<br>';
        echo form_label('Last Name: ','lname');
            echo form_input($CustCreationLastName);echo '<br>';
        echo form_label('Title: ', 'title');
            echo form_input($CustCreationClientTitle);echo '<br>';
        echo form_label('Company: ', 'co');
            echo form_input($CustCreationCompany);echo '<br>';
        echo form_label('Email: ','email');
            echo form_input($CustCreationEmail);echo '<br>';
            echo form_submit($CustCreationSubmit,'Submit'); 
```

**控制器**

```
class Clientcreation extends CI_Controller
    {   
        function index(){
            ####################################
            $this->load->view('navigation');
            $this->load->view('pages/clientcreation');
            $this->load->view('footer');   

            ####################################
            $this->load->helper(array('form', 'url'));
            $this->load->library( array('form_validation') );

            ## Set Validation
            $this->form_validation->set_rules('fname', 'First Name', 'required');
        $this->form_validation->set_rules('lname', 'Last Name', 'required');

            ## Perform Validation
            if ($this->form_validation->run() == FALSE){
                $this->load->view('pages/clientcreation');
            }
        else{
                $this->load->view('pages/success/clientRegistrationSuccess');
        }
        } 

    } 
```

此外，表单正在按预期加载......比如： ![图像1](../Images/17cfa405f54b52279bdfb8e6833d848f.png)

路径也匹配，因为如果我改变`$this->load->view('pages/clientcreation');`它`$this->load->view('pages/hi');`就是调用这个视图。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:08:34.143

这对我来说是一个愚蠢的错误。

验证不起作用的原因是，我试图直接在我的视图中输出验证错误，而我应该在控制器上输出，例如：

```
if ($this->form_validation->run() == FALSE){
             echo validation_errors();
            $this->load->view('pages/clientcreation');
        } 
```

在控制器端，而不是在视图上。（在顶部）

# java - 添加字符串后如何调整 java.awt.Choice 控件的宽度

> ID：13222183
> 
> 赞同：1
> 
> 时间：2012-11-04T19:45:03.247
> 
> 标签：java, user-interface, applet

这是我的代码。重绘在这里没有任何作用。有任何想法吗？因为初始化后下拉列表中没有项目，所以下拉列表很窄。添加文本项后，宽度保持不变。

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

import java.io.*;

//user is prompted to enter a semi-colon delimitted text string

public class ChoiceWidth extends Applet implements ActionListener, ItemListener {

    private Choice m_Choice = null;
    private Button m_Button = null;
    private TextField m_Textbox = null;     

    public void init() {
        m_Button = new Button("Add Items");
        m_Button.addActionListener(this);
        add(m_Button);

        m_Choice = new Choice();
        m_Choice.addItemListener(this);
        add(m_Choice);

        m_Textbox = new TextField(40);
        add(m_Textbox);
    }

   public void itemStateChanged(ItemEvent e)
   {
       String clr=m_Choice.getSelectedItem();
       System.out.println("Selected: " + clr);
   }

    public void actionPerformed(ActionEvent e){
        AddItems();
    }

    private void CreateList(String items) {
    String devlist[] = items.split(";");
        for(int i = 0; i < devlist.length; ++i) {
        m_Choice.add(devlist[i]);
        }
        m_Choice.repaint();  //I thought this would resize width - but doesn't
    }

    private boolean AddItems() {
        String devs = m_Textbox.getText();
        if(!devs.isEmpty()) {
        CreateList(devs);
        }
        return true;
    }
} 
```

和 html

```
<html>
<body>
  Enter a semi-colon delimited text string
  <applet code = "ChoiceWidth.class" width="300" height = "60">
</body>
</html> 
```

# android - 无法在线程中定义适配器

> ID：13222195
> 
> 赞同：1
> 
> 时间：2012-11-04T19:46:24.477
> 
> 标签：android, multithreading, simpleadapter

我没有复制所有代码，因为它太长了，但要简洁：

我有一个函数（recup_list_internet），其中有一个线程，它从互联网（XML）检索数据，对其进行解码，并将每个“节点”分配给我的适配器中的一个元素。

在线程外进行解码时，一切正常。所以我修改它以在线程内使用，在其中创建一个 void run() 函数，显示我的progressDialog，解码，数据被很好地检索，很好地分配给我的地图（=new HashMap();），这里是出现问题

```
private void recup_list_internet()
{
final ArrayList<HashMap<String, String>> listItem = new ArrayList<HashMap<String, String>>();
final Context mContext=this.getBaseContext();

Thread t = new Thread()
{
    public void run()
    {/* the code here works fine, not displaying it to be more concise*/

    progressDialog.dismiss(); //works fine
    SimpleAdapter mSchedule = new SimpleAdapter (mContext, listItem, R.layout.affiche_boutique,new String[] {"img", "titre", "description","Prix","uniqueID"}, new int[] {R.id.img,R.id.titre, R.id.description,R.id.prix,R.id.uniqueID}); //works fine
    maListViewPerso.setAdapter(mSchedule); //doesn't work
    }
};
t.start();
} 
```

这是我的日志猫：

```
11-04 19:20:33.070: E/recuperation phonster(546): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

似乎我无法在我的线程中“访问”maListViewPero ...（maListViewPerso 之前在我的 onCreate 代码中定义：

```
public class DisplayInternet  extends Activity{
private ListView maListViewPerso;
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ceinture_lv);
    maListViewPerso = (ListView) findViewById(R.id.listviewperso);
    recup_list_internet();
} 
```

那么我可以把这条线放在哪里让它工作呢？“maListViewPerso.setAdapter(mSchedule);”

因为我已经尝试在我的线程之外（最终）声明 mSchedule 但在我的线程内，我无法访问它（因此，我无法在“t.start（）”行之后使用它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:14:19.457

在你的线程中，使用：

[View.post(Runnable r)](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)

它基本上说“嘿，UI线程，为我执行这个东西” - 并将必须在UI线程中执行的所有代码放入可运行的代码 - 当您有一个线程从网络检索数据时特别有用（必须不在 UI 线程上运行）但必须在 UI 上发布结果（必须从 UI 线程完成）

例子：

```
view.post(new Runnable(){ 
    public void run(){
        //put all the code you want to be execute on the UI thread here
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T14:45:25.880

尝试使用 runOnUi 函数从其他线程“触摸”主线程中的视图。

# c# - 读取 Amazon S3 日志文件

> ID：13222201
> 
> 赞同：0
> 
> 时间：2012-11-04T19:47:11.717
> 
> 标签：c#, amazon-s3, amazon-web-services

所以我在从存储桶中读取任何内容时遇到问题

我知道我连接良好，因为我正在获取存储桶内容的列表，我检索密钥并尝试使用它

```
foreach (var log in logs.Select(q => q.logFile).ToList())
        {
    var getObjectRequest = new GetObjectRequest().WithBucketName(bucketName).WithKey(log);
    var getObjectResponse = new GetObjectResponse();

    StreamReader reader = new StreamReader(getObjectResponse.ResponseStream);
    String content = reader.ReadToEnd();
} 
```

我回来

值不能为空。参数名称：流

上

```
StreamReader reader = new StreamReader(getObjectResponse.ResponseStream); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:51:17.963

你`getObjectResponse`的设置不正确。您只是在创建一个新的`GetObjectResponse`. 它没有连接到`getObjectRequest`.

改变

```
var getObjectResponse = new GetObjectResponse(); 
```

至

```
var getObjectResponse = client.GetObject(getObjectRequest); 
```

`client`你的 S3 客户端在哪里。

# php - mysql_real_escape_string - 登录脚本

> ID：13222202
> 
> 赞同：3
> 
> 时间：2012-11-04T19:47:15.837
> 
> 标签：php, html

我目前正在升级朋友网站的代码，但遇到了登录脚本问题。我试图通过使用来防止 SQL 注入`mysql_real_escape_string()`。`mysql_escape_string()`工作正常，但`mysql_real_escape_string()`没有。这就是我所拥有的：

```
if (isset($_POST['submit']))
{
    $username = mysql_real_escape_string($_POST['username']); 
    $password = mysql_real_escape_string($_POST['password']);

    $db_link = db_connect("project");
    $query = "SELECT * FROM user WHERE username = '$username' AND password = password('$password')";
    $result = mysql_query($query) or die (mysql_error());
    $numrows = mysql_num_rows($result);

    if($numrows == 1)
    {
        RedirectToURL("home.php");
    }
    else
    {
        login_page("Invalid login! Try again");
    }   
}
else
{
    login_page("");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T19:48:36.810

为了使用 mysql_real_escape_string 您必须登录到数据库。如果您没有登录，则使用 mysql_escape_string。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T19:55:09.717

正如@MichaelBerkowski 在您的评论中所说，将`mysql_real_escape_string()`呼叫移过您的连接命令：

```
if (isset($_POST['submit']))
{

    $db_link = db_connect("project");

    $username = mysql_real_escape_string($_POST['username']); 
    $password = mysql_real_escape_string($_POST['password']);

    $query = "SELECT * FROM user WHERE username = '$username' AND password = password('$password')";
    $result = mysql_query($query) or die (mysql_error());
    $numrows = mysql_num_rows($result);

    if($numrows == 1)
    {
        RedirectToURL("home.php");
    }
    else
    {
        login_page("Invalid login! Try again");
    }   
}
else
{
    login_page("");
} 
```

如上所述，原因[`that mysql_real_escape_string()`](http://php.net/manual/en/function.mysql-real-escape-string.php)取决于您的 mysql 连接是否正常工作

# objective-c - 如何更改 NSPopupButton 的背景颜色？

> ID：13222205
> 
> 赞同：5
> 
> 时间：2012-11-04T19:47:40.487
> 
> 标签：objective-c, cocoa, nsview, nsbutton, nspopupbutton

我正在尝试解决一个听起来很简单的问题：更改 NSPopupButton 的背景颜色。

Interface Builder 只允许将样式更改为预定义的样式，并且不允许更改背景颜色。此外，设置 an`IBOutlet`并没有帮助，因为`NSPopupButton`没有`setBackgroundColor`方法。

我还尝试了子类`NSPopupButton`化来覆盖该`drawRect`方法。这是我尝试过的：

```
- (void)drawRect:(NSRect)dirtyRect
{
    [[NSColor redColor] setFill];
    NSRectFill(dirtyRect);
} 
```

这会在 上绘制一个红色矩形，`NSPopupButton`而不是将其设置为背景色。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-09T01:11:22.190

您应该创建 NSPopUpButtonCell 的子类，然后覆盖

```
- (void)drawBezelWithFrame:(NSRect)frame inView:(NSView *)controlView 
```

NSPopupButtonCell 是[NSButtonCell](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSButtonCell_Class/Reference/Reference.html)的子类，它定义了几种用于绘制单个单元格组件的方法，例如边框、标题、图像。

然后您可以展开 NSPopupButton 并将其单元格子类更改为您的新子类，它应该使用您的绘图方法。

Cocoa 主要使用 NSCell 来处理绘图，不像 iOS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-22T09:37:20.460

@DanBrooker 答案的 Swift 版本。该示例显示设置背景颜色

```
class PopUpButtonCell: NSPopUpButtonCell {

    override func drawBezel(withFrame frame: NSRect, in controlView: NSView) {
        guard let context = NSGraphicsContext.current?.cgContext else { return }
        NSColor.red.setFill() // NSColor.white.setFill()
        context.fill(frame)
    }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-05T22:35:45.393

按钮是由系统绘制的，所以没有真正的方法来设置背景颜色，让系统按照你想要的方式绘制它。你唯一能做的就是在 drawRect 方法中绘制它，也绘制标题，并绘制矩形的一部分。

# c# - 为什么计算相对较小数字（34+）的阶乘返回 0？

> ID：13222207
> 
> 赞同：-2
> 
> 时间：2012-11-04T19:47:58.980
> 
> 标签：c#, console-application

```
int n = Convert.ToInt32(Console.ReadLine());
int factorial = 1;

for (int i = 1; i <= n; i++)
{
    factorial *= i;    
}
Console.WriteLine(factorial); 
```

此代码在控制台应用程序中运行，但当数字大于 34 时，应用程序返回 0。

为什么返回 0 以及如何计算大数的阶乘？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T19:49:36.463

您超出了变量可以存储的范围。这实际上是一个阶乘，它比指数增长得更快。尝试使用[ulong](http://msdn.microsoft.com/en-us/library/t98873t4.aspx)（最大值 2^64 = 18,446,744,073,709,551,615）而不是 int（最大值 2^31 = 2,147,483,647）`ulong p = 1`——这应该会让你更进一步。

如果您需要更进一步，.NET 4 及更高版本有[`BigInteger`](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger%28v=vs.100%29.aspx)，它可以存储任意大的数字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:23:06.197

由于大多数编程语言中整数溢出的处理方式，您得到 0。如果您在循环中输出每个计算的结果（使用 HEX 表示），您可以很容易地看到会发生什么：

```
int n = Convert.ToInt32(Console.ReadLine());
int factorial = 1;
for (int i = 1; i <= n; i++)
{
  factorial *= i;
  Console.WriteLine("{0:x}", factorial);
}
Console.WriteLine(factorial); 
```

对于 n = 34，结果如下所示：

1 2 6 18 78 2d0 13b0 ... 2c000000 80000000 80000000 0

基本上乘以 2 会向左移动数字，当您乘以包含足够二的数字时，所有有效数字都将超出 32 位宽的整数（即前 6 个数字给您 4 个二：1、2、3、2*2、5、 2*3，因此将它们相乘的结果是 0x2d0，末尾有 4 个零位）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T19:57:00.617

如果您使用的是 .net 4.0 并且想要计算 1000 的阶乘，请尝试使用`BigInteger`Int32 或 Int64 甚至 UInt64 来代替。您的问题陈述“不起作用”不足以让我很好地服从。您的代码将类似于：

```
using System;
using System.Numerics;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main()
        {
            int factorial = Convert.ToInt32(Console.ReadLine());

            var result = CalculateFactorial(factorial);

            Console.WriteLine(result);
            Console.ReadLine();
        }

        private static BigInteger CalculateFactorial(int value)
        {
            BigInteger result = new BigInteger(1);
            for (int i = 1; i <= value; i++)
            {
                result *= i;
            }
            return result;
        }
    }
} 
```

# java - 如何使用 jxl java jar 将自动筛选添加到 Excel 单元格

> ID：13222208
> 
> 赞同：2
> 
> 时间：2012-11-04T19:48:04.027
> 
> 标签：java, excel, api, jxl, autofilter

有谁知道如何使用 jxl 将自动过滤器添加**到****excel**中的**单元格**？我不太明白。任何和所有的帮助都将不胜感激..谢谢！

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:24:25.480

**使用jxl**是不可能的，您必须使用**Apache POI** [http://poi.apache.org/](http://poi.apache.org/) （或者如果还有其他东西）

Apache POI 有更多的功能，我发现它对程序员更友好。

Apache POI 的好例子在这里 [http://poi.apache.org/spreadsheet/quick-guide.html](http://poi.apache.org/spreadsheet/quick-guide.html) [http://www.kodejava.org/browse/49.html](http://www.kodejava.org/browse/49.html)**

# c# - 在调用 main 之前创建对象

> ID：13222212
> 
> 赞同：0
> 
> 时间：2012-11-04T19:48:16.673
> 
> 标签：c#, visual-studio-2010

我目前正在做一个项目，我有点难过。在 C++ 中，为了确保之前创建了一些对象`Main ()`，我会在 .cpp 文件的底部创建一个静态实例，例如：

```
class MyClass {
public:
   MyClass () { someVariable = "HelloWorld"; }
   ~MyClass () {}
   void someFunction () { cout << someVariable << endl; }
private:
   string someVariable;
};

static MyClass myClass; 
```

我想知道是否可以在 C# 中做同样的事情？我一直在尝试在任何地方声明我的实例以使其正常工作，但到目前为止还没有运气，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T19:55:55.250

该`Main`方法位于静态类中（因为每个方法都必须位于 C# 中的类中），因此您可以向该类添加静态构造函数。

规范中保证静态构造函数在使用类中的任何静态成员之前运行，因此它将在`Main`调用静态成员之前运行。

# jquery - 为什么 jquery-ui 的扩展 position() 方法不能与 SVG 元素一起使用？

> ID：13222213
> 
> 赞同：4
> 
> 时间：2012-11-04T19:48:22.010
> 
> 标签：jquery, jquery-ui, svg, position

[jQuery UI 用它自己](http://api.jqueryui.com/position/)的 jQuery UI 覆盖了 jQuery 的`position`方法，正如你在[这个 fiddle](http://jsfiddle.net/7CbPC/)中看到的那样，它允许我很容易地在右上角显示一个图标：`<div>`

```
icon.position({
    my: "right top",
    at: "right top",
    of: "div"
}); 
```

但是，对于 SVG 元素（例如`<rect>`），我得到了意想不到的行为。例如，正如您在这个测试用例中看到的那样，图标显示在左上角，而不是右上角；如果您改用“左上角”来尝试，则图标位于屏幕外。

我已经尽我所能搜索了这个网站和谷歌，但我找不到对 jQuery UI 的位置方法的引用，它不能与 SVG 元素一起使用。

这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:11:59.140

`jQuery`不适用于 SVG，尤其是在处理位置时。在 SVG 中，您可以拥有旋转、缩放、变换矩阵和各种疯狂的东西。如果矩形旋转 45 度怎么办......“右上”或“下”的含义是什么？

[http://jsfiddle.net/Qjmkc/](http://jsfiddle.net/Qjmkc/)

# php - PHP pg_fetch_* 返回类型错误

> ID：13222214
> 
> 赞同：1
> 
> 时间：2012-11-04T19:48:28.323
> 
> 标签：php

我的 PgSQL 适配器有问题。我正在使用本机驱动程序，方法 pg_fetch_* 仅返回字符串，即使列类型是整数或布尔值。

对于整数，这不是一个大问题，它只是一个简单的转换。

真正的问题在于布尔值，因为它返回字符串 't' 表示 TRUE，返回字符串 'f' 表示 FALSE。

好的，简单的解决方案是每次我有布尔字段时都对此进行验证，但这不是最聪明的......

一个特定的情况是，我想迁移一个在 MySQL 上运行的大型应用程序做 PgSQL，并且将有很多我必须更改的条件。

我试图在谷歌上找到一些东西，但是（我不知道我是否使用了错误的关键字组合）没有成功。

示例代码：

```
$db = pg_connect("host=localhost dbname=**** user=**** password=**** port=5432") or die("Could not connect");
pg_set_error_verbosity(PGSQL_ERRORS_VERBOSE);
$sql = 'SELECT * FROM mesa';
$result = pg_query($db, $sql);
var_dump(pg_last_error($db));

$data = array();
while($row = pg_fetch_assoc($result)) {
    $data[] = $row;
}
var_dump($data); 
```

输出：

```
array (size=10)
  0 => 
    array (size=3)
    'numero' => string '2' (length=1)
    'max_pessoas' => string '8' (length=1)
    'status' => string 't' (length=1)
1 => 
    array (size=3)
    'numero' => string '3' (length=1)
    'max_pessoas' => string '8' (length=1)
    'status' => string 't' (length=1) 
```

继续前进，但 'numero' 是一个整数，'status' 是一个布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:23:09.510

实际上，PHP 确实返回 't' 表示真，而 'f' 表示假。您需要创建自己的这些处理或使用为您抽象的框架。不幸的是，至少从 PHP 4.0 开始，这就是该语言的工作方式......

# sql - SQL Count Innerjoin by Grouping

> ID：13222218
> 
> 赞同：2
> 
> 时间：2012-11-04T19:48:51.763
> 
> 标签：sql, count, group-by, inner-join

我已经搜索了所有 SQL 问题，并且找到了我不想要的每个版本 - 所以我需要问。我处于大脑锁定状态 - 知道有一个计数、总和、组和连接都放在一起。

**2 表**

1.  CustomerTable - CustID、CustQuality（值是好客户、坏客户、新客户等）
2.  PurchaseTable（PurchID、PurchItem、PurchDate）

我试图计算过去 30 天内好、坏、新客户的购买量。

我已经尝试了加入和组计数等，我不断得到：

*   GoodCustomer - CustID2 - 1 次购买
*   GoodCustomer - CustID3 - 3 购买
*   GoodCustomer - CustID4 - 2 购买
*   BadCustomer - CustID7 - 2 购买
*   BadCustomer - CustID1 - 4 购买
*   新客户 - CustID9 - 1 次购买
*   NewCustomer - CustID4 - 4 purch 等

**我只想要整体结果**

*   3 位好客户进行了 6 次购买
*   2 位不良客户进行了 6 次购买
*   2 位新客户完成 5 次购买

那么对于额外的功能......我还有一个我需要加入的第三张桌子。CustomerLocation（CLID、CLLocation（North、South、East、West 的值））

因此，如果我想知道以下组的细分

*   3 位好客户进行了 6 次购买 - 1 位客户来自北方，2 位客户来自南方
*   2 位不良客户进行了 6 次购买 - 5 位来自东方的客户，1 位来自西方的客户
*   2 位新客户购买了 5 次 - 2 位来自南方的客户

最后一个新查询将是... WHERE CLLocation = South

或者，如果我想按地区查找...

*   1 好客户进行了 3 次购买
*   2 坏客户进行了 2 次购买
*   0 新客户进行了 0 购买

**我知道我问了很多 - 但任何和所有的帮助都将不胜感激！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:02:20.400

这应该回答你的第一个问题

```
SELECT COUNT(DISTINCT c.CustID), CustQuality, COUNT(PurchID) FROM CustomerTable c
INNER JOIN PurchaseTable p ON c.CustID = p.CustID
GROUP BY CustQuality 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:18:12.820

```
SELECT C.CustQuality, COUNT(DISTINCT c.CustID) AS tot_Customer, COUNT(PurchID) AS tot_Purch
FROM CustomerTable C, PurchaseTable P
WHERE C.CustID = P.PurchCustID
GROUP BY C.CustQuality;

SELECT C.CustQuality, CL.CLocation,  COUNT(DISTINCT c.CustID) AS tot_Customer, COUNT(PurchID) AS tot_Purch
FROM CustomerTable AS C, PurchaseTable AS P, CustomerLocation AS CL
WHERE C.CustID = P.PurchCustID AND CL.LCTCustID = C.CustID
GROUP BY C.CustQuality, CL.CLocation;

SELECT C.CustQuality, CL.CLocation,  COUNT(DISTINCT c.CustID) AS tot_Customer, COUNT(PurchID) AS tot_Purch
FROM CustomerTable AS C, PurchaseTable AS P, CustomerLocation AS CL
WHERE C.CustID = P.PurchCustID AND CL.LCTCustID = C.CustID AND CL.CLocation='North'
GROUP BY C.CustQuality; 
```

# php - using mysql LIKE statement

> ID：13222224
> 
> 赞同：1
> 
> 时间：2012-11-04T19:49:34.240
> 
> 标签：php, mysql, pdo, prepared-statement

I am trying to create a duplicate username checker and I am thinking this is probably the way to do it correct me if im wrong. Basically I want the username the user input to be stored in a variable called `userName` and then use that variable to check and see if there are any `LIKE` rows in the database and if so return a count of 1 or more to a variable named `$count` I would then have an `IF ELSE` statement that would either yell at the user or let them continue. I have run into a problem using the `LIKE` statement. I think my syntax could be wrong since I have been trying several different methods but still no luck.

## Main Code

```
<?php

require 'DB.php';
$userName = "tes";
echo $userName;
try{
$stmt = $conn->prepare('SELECT COUNT(*) FROM `CLL_users` WHERE `user_name` LIKE "% . ":userName" . "');
$stmt->bindValue(':userName', $userName);
$stmt->execute();
$count = $stmt->fetchColumn();
return $count;
echo $count;

} catch (PDOException $e){
    echo 'Connection failed: ' . $e->getMessage();

    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:09:00.797

It appears you're trying to do string concatenation in MySQL using invalid syntax. Try this:

```
'SELECT COUNT(*) FROM `CLL_users` WHERE `user_name` LIKE CONCAT("%",:userName)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:18:28.730

You can probably use = instead of LIKE. The SQL syntax in itself isn't case-sensitive. I think you might be able to set up your database so that certain tables are case sensitive but I know for a fact through usage that no tables in my own MySQL database are. If you're unsure it's easy to try, just run a select with a username you know is in there but write it with different casing.

Just do a select WHERE 'user_name'=$entered_username, if you get one or more don't add the new user, if not go ahead. You could of course mark the user_field as unique, that way you'd know for sure you won't have duplicates, might be something worth looking at.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-04T19:54:10.343

Try to use this select:

("SELECT COUNT(*) FROM `CLL_users` WHERE `user_name` LIKE "% . "'".$userName."'");

# mysql - 为什么这个查询在 MySQL 5.1.56 中失败？

> ID：13222231
> 
> 赞同：0
> 
> 时间：2012-11-04T19:50:07.330
> 
> 标签：mysql

以下查询在 MySQL 5.1.56 中失败：

```
SELECT 
shop_id, products.product_id AS
product_id, brand, title, price, image, image_width, image_height

FROM products, users LEFT JOIN

(
    SELECT fav5.product_id AS product_id, SUM(CASE 
    WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
    WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
    ELSE 0
    END) AS favorites_count
    FROM favorites fav5
    GROUP BY fav5.product_id 

) AS fav6 ON products.product_id=fav6.product_id
WHERE products.product_id= 46876 AND users.user_id!=products.product_id 
```

错误是

```
#1054 - Unknown column 'products.product_id' in 'on clause' 
```

没有用户表的这个修改不会失败：

```
SELECT 
shop_id, products.product_id AS
product_id, brand, title, price, image, image_width, image_height

FROM products LEFT JOIN

(
    SELECT fav5.product_id AS product_id, SUM(CASE 
    WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
    WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
    ELSE 0
    END) AS favorites_count
    FROM favorites fav5
    GROUP BY fav5.product_id 

) AS fav6 ON products.product_id=fav6.product_id
WHERE products.product_id= 46876 
```

在 MySQL 5.0.67 中，这两个查询都没有失败。（我从 5.0.67 导出数据库并导入到 5.1.56，因此结构应该相同。）

products 表确实有一个 int(10) 类型的 product_id 列。收藏夹表还有一个 int(10) 类型的 product_id 列。到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:02:47.513

就像从表中交换一样简单：

```
FROM users, products LEFT JOIN 
```

小心，您正在混合[连接符号](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:06:18.850

MySQL 5.1 中的 JOIN 处理运算符优先级已更改。5.0.12 更改后从 5.0 [MySQL LEFT JOIN 升级的人的常见问题 - 如何重写查询](https://stackoverflow.com/questions/700779/mysql-left-join-after-5-0-12-changes-how-to-rewrite-query)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:12:21.693

这是您的原始查询，稍微重新格式化并添加了两个括号：

```
SELECT shop_id, products.product_id AS
       product_id, brand, title, price, image, image_width, image_height
  FROM products, 
       (  -- Parenthesis added
       users LEFT JOIN
       (
            SELECT fav5.product_id AS product_id, SUM(CASE 
            WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
            WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
            ELSE 0
            END) AS favorites_count
            FROM favorites fav5
            GROUP BY fav5.product_id 
        ) AS fav6 ON products.product_id=fav6.product_id
    )  -- Parenthesis added
WHERE products.product_id= 46876 AND users.user_id!=products.product_id 
```

括号指示 SQL 解析器如何解释查询，并且在添加的括号内没有`products`表。

混合旧样式和新样式（如 SQL-92 以来）样式连接是一个坏主意。

采用：

```
SELECT shop_id, products.product_id AS
       product_id, brand, title, price, image, image_width, image_height
  FROM products JOIN users ON users.user_id != products.product_id
  LEFT JOIN
       (SELECT fav5.product_id AS product_id,
               SUM(CASE WHEN fav5.current = 1 AND fav5.closeted = 1 THEN 1
                        WHEN fav5.current = 1 AND fav5.closeted = 0 THEN -1
                        ELSE 0
                   END) AS favorites_count
          FROM favorites fav5
         GROUP BY fav5.product_id 
       ) AS fav6 ON products.product_id=fav6.product_id
 WHERE products.product_id = 46876 
```

`!=`连接会很慢（它实际上是笛卡尔积）。

# javascript - Node.js + socket.io：服务器上的应用程序无法正常工作

> ID：13222232
> 
> 赞同：1
> 
> 时间：2012-11-04T19:50:13.153
> 
> 标签：javascript, node.js, websocket, socket.io

我是 node.js 和 socket.io 的新手，并尝试使用[http://socket.io/#how-to-use](http://socket.io/#how-to-use)中的示例将服务器连接到客户端。（没有本地主机）

服务器：

```
 var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')

app.listen(80);

function handler (req, res) {
  fs.readFile(__dirname + '/index.html',
  function (err, data) {
    if (err) {
      res.writeHead(500);
      return res.end('Error loading index.html'+err);
    }

    res.writeHead(200);
    res.end(data);
  });
}

io.sockets.on('connection', function (socket) {
    socket.on('message', function(msg){
        console.log('Got text: '+msg);
        socket.broadcast.send(msg);
    });
    socket.on('disconnect', function () { });
}); 
```

客户：

```
<html><head><script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect();
  socket.on('connect', function () {
    alert('connected.');

    socket.on('message', function (msg) {
      // my msg
      alert('message received: '+msg);
    });
    socket.send('hi');

  });

</script>
</head><body>This is the content :)</body>
</html> 
```

谷歌浏览器在控制台中显示：

```
Unexpected response code: 502 
```

此外，在收到每条消息后，Chrome 会添加

```
GET http://[myServer]/socket.io/1/?t=1352313105809  socket.io.js:1659
Socket.handshake socket.io.js:1659
Socket.connect socket.io.js:1699
maybeReconnect 
```

到控制台。问题出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:57:29.733

How-To 页面中的示例都使用端口 80，这对于服务网站很常见。

但是，您在示例中使用端口 8080。

如果它甚至加载了 socket.io 脚本，请检查您的 Web 浏览器的控制台。您可能需要提供`http://localhost:8080/socket.io/socket.io.js`显式 url 并连接`io.connect('http://localhost:8080');`

如果上述方法不起作用，请分享一些关于您的 Web 服务器运行在哪个端口上的见解。

* * *

在您的（更新的）示例中，没有代码可以在服务器端实际处理任何传入消息。

```
`socket.on('message', function(msg){
  console.log('Got text: '+msg);
  socket.send(msg);
}); 
```

至少应该将消息发送回客户端 - 您的警报仅在客户端收到消息时触发。node.js 控制台是否输出任何传入或发送的消息？连接后，我的 node.js 控制台的几行如下所示。

```
debug - client authorized
info  - handshake authorized ...
debug - setting request GET /socket.io/1/...
debug - set heartbeat interval for client ...
debug - client authorized for
debug - websocket writing 1::
debug - sending data ack packet 
```

# php - 运行 zf show version 时找不到类 CamelCaseToSeparator

> ID：13222234
> 
> 赞同：2
> 
> 时间：2012-11-04T19:50:28.060
> 
> 标签：php, zend-framework, command-line-interface

我正在尝试设置 Zend 安装，但是当我`zf show version`在 CLI 中运行时，我收到以下错误消息：

> 致命错误：在 C:\Progr am Files (x86)\EasyPHP-12.1\php\php546x120828095553\ZendFramework-2.0.3\library\Zend\Filter\Word\CamelCaseToDash 中找不到类“Zend\Filter\Word\CamelCaseToSeparator”。第 18 行的 php

我没有更改文件中的任何内容，它们位于正确的位置，名称和所有内容都正确。

你们中有人知道错误可能是什么吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-09T16:23:55.267

当我在 zend 框架 1 和 2 版本的 php.ini 文件中包含 2 个 zend 框架库时，我遇到了同样的问题，当我只留下一个时，这个错误消失了。

# ruby-on-rails - bootstrap-sass 显示错误

> ID：13222236
> 
> 赞同：2
> 
> 时间：2012-11-04T19:50:49.000
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap

尝试使用 bootstrap-sass

似乎它没有正确编译

在 custom.css.scss
@import "bootstrap" 中调用引导程序；

包括 gem gem "bootstrap-sass", "~> 2.1.1.0"

你可以在这里看到问题，导航是白色的，链接也没有颜色。

[http://learningisfun.herokuapp.com/pages/home](http://learingisfun.herokuapp.com/pages/home)

这个仓库也是[https://github.com/thebusiness11/appsample](https://github.com/thebusiness11/appsample)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:59:36.623

默认情况下，引导导航/导航栏是白色的（自 2.1.0 起），`navbar-inverse`如果您希望它是黑色/反转的，则需要将类添加到导航元素。

[http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)

```
class="navbar navbar-fixed-top navbar-inverse" 
```

# c# - asp.net 找不到类

> ID：13222241
> 
> 赞同：1
> 
> 时间：2012-11-04T19:51:09.470
> 
> 标签：c#, asp.net, mono

我有一些我开发的 asp.net，并且在 Windows 机器上运行良好，但现在我试图在运行 Ubuntu 和 Mono 2.4.4 和 ASP.NET 2.0 的机器上运行它并出现错误。

我的 App_Code 目录中有一些类，例如`DatabaseSingleton.cs`,`Functions.cs`和`NotAllowedException.cs`. 他们都在使用命名空间`aspapp`。

无论如何，当尝试运行`Login.aspx.cs`使用该类的文件 () 时`DatabaseSingleton`，我得到了`CS0103: The name 'DatabaseSingleton' does not exist in the current context`. 但是，在另一个未使用`DatabaseSingleton`但正在使用的文件中`NotAllowedException`，我得到一个类似但不同的错误`CS0246: The type or namespace name 'NotAllowedException' could not be found. Are you missing a using directive or an assembly reference?`：所有文件都在命名空间中`aspapp`，并且`using aspapp`在文件中。

我需要在 web.config 中添加什么才能在单声道上访问这些文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:00:52.340

确保您在 .conf 文件中指向 mod-mono-server2 您可以在一个 dll 中编译 .cs 并将其移动到 Bin 目录

# php - 删除？？？？或更多与 preg_replace

> ID：13222243
> 
> 赞同：0
> 
> 时间：2012-11-04T19:51:14.347
> 
> 标签：php, regex, string

我想删除四个或更多问号。

我现在正在使用这个：

```
preg_replace( '{\\?+}', '', $text ); 
```

但这确实删除了所有问号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:02:37.407

```
// Use {4,} to indicate 4 or more of the preceding thing
$pattern = '~\?{4,}~';

$str = "I have 3??? and that isn't enough";
$str2 = "I have 5????? and that is enough";

// Won't replace only 3 ?
echo preg_replace($pattern, '', $str);
// I have 3??? and that isn't enough

// Will replace 5 ?
echo preg_replace($pattern, '', $str2);
// I have 5 and that is enough 
```

# php - PHP中的服务器端作业系统

> ID：13222244
> 
> 赞同：0
> 
> 时间：2012-11-04T19:51:21.573
> 
> 标签：php, cron, task, jobs

我想知道您对在 PHP 的服务器端运行脚本的看法！

其实我的想法是：

```
EXECUTE CRON(){
   IF TASKS TO DO {
     RUN PHP SCRIPT FOR USER MISSING THIS TASK in BACKGROUND
   }
} 
```

为每个用户运行的脚本有点长，所以我需要继续使用尽可能少的资源来运行这个脚本。

我尝试使用`shell_exec()`,`exec()`等但没有成功，现在使用 JAVASCRIPT 使我的文件运行但它仍然不稳定。

你们认为最好的解决方案是让我的系统在后台执行任务并不断向我发送正在执行的任务的报告，或者设法停止它们并在我想要的时候恢复......？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:28:56.650

问题是必须在服务器上安装 Gearman。

如果任务更简单或者您没有服务器权限，您可以通过 CURL 使用 CRON 执行 php 脚本：

```
* * * * * curl -s -o /dev/null http://example.com/tasks.php 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:14:13.737

```
<?php
set_time_limit(0);
$do_break = false;
do
{
  if(check_new_task())
  {
    do_task();
  }
  else if($break)
  {
    $do_break = true;
  } else
  {
    sleep(sleep_duration);
  }
} while(!$do_break); 
```

您可以使用屏幕从 ssh 运行脚本

```
screen -S screenname 
```

并在这个屏幕上运行一次 php 脚本记住你必须手动关心任务终止或......

# jquery - 将滑块中的步骤链接到图像

> ID：13222246
> 
> 赞同：3
> 
> 时间：2012-11-04T19:51:41.577
> 
> 标签：jquery, image, uislider

我希望显示一系列地图以显示随时间的变化。我已经轻松创建了一个包含 10 个步骤的 Jquery 滑块（不是动画条），我想将每个步骤链接到一个图像。我更喜欢使用滑块，因为它加强了连续性的概念。按钮使每个日期及其地图看起来像单独的事件，图像滑块也不符合我的目的。

我花了很多（很多）时间查看书籍、教程和网络（尤其是 Stackoverflow），但没有找到任何解决此问题的方法。我不认为我在搜索中使用了错误的术语，但我开始怀疑是否可以在 Jquery 中执行此操作。

感谢您提供有关在哪里查看或使用什么的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:01:51.740

请参阅[此链接](http://jqueryui.com/slider/#hotelrooms)。它可以根据您的需要进行修改：

```
$(function() {
    var maps = $( ".map" );
    var slider = $( "<div id='slider'></div>" ).insertAfter( select ).slider({
        min: 1,
        max: 6,
        range: "min",
        value: defaultValue,
        slide: function( event, ui ) {
            var map = $(maps[ui.value]); //This your map for the current index...
        }
    });
}); 
```

# matlab - 根据第一行值展开矩阵（MATLAB）

> ID：13222251
> 
> 赞同：3
> 
> 时间：2012-11-04T19:52:29.917
> 
> 标签：matlab, matrix, rows

我的输入如下：

```
X = [1 1; 1 2; 1 3; 1 4; 2 5; 1 6; 2 7; 1 8];

X =

 1     1
 1     2
 1     3
 1     4
 2     5
 1     6
 2     7
 1     8 
```

我希望根据第一列的值输出一个新矩阵。如果值等于 1 - 输出将保持不变，当值等于 2 时，我想输出第二行中包含的两个值。像这样：

```
 Y =

     1
     2
     3
     4
     5
     5
     6
     7
     7
     8 
```

其中 5 输出***两次，***因为第一列中的值为***2***和 7 相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:14:07.347

这是（矢量化）：

```
C = cumsum(X(:,1))
A(C) = X(:,2)
D = hankel(A)
D(D==0) = inf
Y = min(D) 
```

**编辑：**

有一个小错误，现在它可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:12:34.667

```
% untested code:
Y = []; % would be better to pre-allocate 
for ii = 1:size(X,1)
   Y = [Y; X(ii,2)*ones(X(ii,1),1)];
end 
```

# node.js - 请求新页面时如何将 AngularJS 路由与 Express (Node.js) 一起使用？

> ID：13222252
> 
> 赞同：53
> 
> 时间：2012-11-04T19:52:30.977
> 
> 标签：node.js, express, angularjs

我正在使用 Express，它从静态目录加载 AngularJS。通常，我会请求`http://localhost/`，其中 Express 为我提供我的`index.html`和所有正确的 Angular 文件等。在我的 Angular 应用程序中，我设置了这些路由，它们替换了以下内容`ng-view`：

```
$routeProvider.when('/', {
    templateUrl: '/partials/main.html',
    controller: MainCtrl,
});

$routeProvider.when('/project/:projectId', {
    templateUrl: '/partials/project.html',
    controller: ProjectCtrl,
});

$locationProvider.html5Mode(true); 
```

在我的主页上，我有一个指向 的链接`<a href="/project/{{project.id}}">`，它将成功加载模板并将我定向到`http://localhost/project/3`或我指定的任何 ID。问题是当我尝试将浏览器定向到`http://localhost/project/3`或刷新页面时，请求将发送到 Express/Node 服务器，该服务器返回`Cannot GET /project/3`.

如何设置我的 Express 路线以适应这种情况？我猜它需要[`$location`](http://docs.angularjs.org/guide/dev_guide.services.$location)在 Angular 中使用（尽管我更愿意避免他们使用的丑陋的 ?searches 和 #hashes），但我对如何设置 Express 路由来处理这个问题一无所知。

谢谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-12-14T22:11:22.257

使用 express 4，您可能想要捕获所有请求并重定向到 angularjs`index.html`页面。 `app.use(app.router);`不再存在且`res.sendfile`已弃用，请[`res.sendFile`](http://expressjs.com/4x/api.html#res.sendFile)与大写**F**一起使用。

```
app.post('/projects/', projectController.createProject);
app.get('/projects/:id', projectController.getProject);
app.get('*', function (req, res) {
    res.sendFile('/public/index.html');
}); 
```

将所有 API 路由放在每个路径的路由之前`app.get('*', function (req, res){...}`）

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-11-05T07:35:02.533

我将创建一个包罗万象的处理程序，该处理程序在您发送必要数据的常规路线*之后运行。*

```
app = express();
// your normal configuration like `app.use(express.bodyParser());` here
// ...
app.use(app.router);
app.use(function(req, res) {
  // Use res.sendfile, as it streams instead of reading the file into memory.
  res.sendfile(__dirname + '/public/index.html');
}); 
```

`app.router`是运行所有 Express 路由的中间件（如`app.get`和`app.post`）；通常，Express 会自动将它放在中间件链的最后，但您也可以像我们在此处所做的那样显式地将它添加到链中。

然后，如果 URL 不是由 处理的`app.router`，最后一个中间件会将 Angular HTML 视图发送到客户端。这将发生在其他中间件未处理的*任何URL 上，因此您的 Angular 应用程序必须正确处理无效路由。*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T05:06:29.770

我想我应该澄清一下我对使用模板引擎不感兴趣，但是让 Angular 自己提取所有 HTML 部分，Node 在这里完全作为静态服务器运行（但它不会用于 JSON API. Brian Ford 在这里展示了如何使用 Jade：http: [//briantford.com/blog/angular-express.html](http://briantford.com/blog/angular-express.html)

我的应用程序是一个单页应用程序，因此我为每个可能的 URL 模式创建了一个 Express 路由，并且它们中的每一个都做同样的事情。

```
fs.readFile(__dirname + '/public/index.html', 'utf8', function(err, content) {
    res.send(content);
}); 
```

我假设我必须将一些请求变量传递给 Angular，但看起来 Angular 会自动处理它。

# android - 是否可以在 GLSurfaceView 内绘制 View 或 ViewGroup

> ID：13222253
> 
> 赞同：2
> 
> 时间：2012-11-04T19:52:55.130
> 
> 标签：android, view, surfaceview, viewgroup, glsurfaceview

是否可以在 GLSurfaceView 或 SurfaceView 内的有界区域内绘制任何视图？

目前我的 GLSurfaceView 充满了位图纹理。

我想实现这样的目标

```
 +---------------------------------+
   |                                 |
   |         GLSurfaceView           |
   |                                 |
   |        +-------------+          |
   |        |WhateverView/|          |
   |        | Layout/     |          |
   |        |ViewGroup    |          |
   |        +-------------+          |
   |                                 |
   +---------------------------------+ 
```

我尝试使用 FrameLayout 在 GLSurfaceview 顶部绘制视图，但这不是我想要实现的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:41:07.760

我有同样的问题。我在下面使用了这个技巧。

用于`AbsoluteLayout`重叠`GLSurfaceView`等`View`。

```
AbsouluteLayout -+-- GLSurfaceView
                 +-- View 
```

设置`GLSurfaceView`透明。

```
mGlSurfaceView.setEGLContextClientVersion(2);
mGlSurfaceView.setEGLConfigChooser(8, 8, 8, 8, 16, 0);
mGlSurfaceView.getHolder().setFormat(PixelFormat.TRANSLUCENT);
mGlSurfaceView.setRenderer(new GLES20TriangleRenderer(this));
mGlSurfaceView.setZOrderOnTop(true); 
```

添加一个打孔。不要在`GLSurfaceView`. `OnTouchListener` 附加到`GLSurfaceView`在重叠区域中返回 false 以将事件传播到其他视图。

PS：对不起我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T01:51:13.673

是的，您可以，因为 GLSurfaceView 是 View 之一，您可以将其绑定到与其他 View 的布局中。但请记住将 setZOrderOnTop() 设置为 false。

请记住，Android 2.x 中的 OpenGL 不如 4.x 中的好（这意味着您必须解决 2.x 中发生的一些问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T22:15:12.067

尝试创建自己的扩展 GLSurfaceView 的类，覆盖方法 draw(Canvas) 并使用视图/视图组的方法 draw(Canvas) 在其中绘制视图。它会是这样的：

```
public class MyGLSurfaceView extends GLSurfaceView
{
    private View myView;

    @Override
    protected void onDraw(Canvas canvas) {
        // Draw something below your view
        // Translate, rotate your canvas as you want
        myView.draw(canvas);
        canvas.restore(); // If you have translated or rotated the canvas
        // Draw something above your view
    }
} 
```

# c - fscanf - 如何处理两个浮点数+空格+换行符？

> ID：13222257
> 
> 赞同：1
> 
> 时间：2012-11-04T19:53:30.040
> 
> 标签：c, stdio, scanf

使用 fscanf 我想处理包含两个浮点数的文本，浮点数之前、之间或之后的任意数量的空格（包括换行符/返回），以及最后的换行符。如果有更多/少于两个数字，那么我想检测到并报告错误。

这似乎适用于处理空白，但它不会检测是否存在两个以上的浮点数：

```
fscanf(f, "%f %f", &sx, &sy); 
```

这似乎也同样有效：

```
fscanf(f, "%f %f%*[ \n\t\r\f\v]\n", &sx, &sy); 
```

有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:14:15.287

```
fscanf(f, "%f%f", &one, &two);
while (1) {
  ch = fgetc(f);
  if (ch == EOF) /* end of input whithout a line break */break;
  if (ch == '\n') /* input ok */break;
  if (!isspace((unsigned char)ch)) /* bad input */break;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:42:57.370

如果您具体了解必须读入多少个字符（或知道一行中的最大字符数），请使用：
`fread ( stringbuffer, size, count,Filepointer );`

然后使用： `sscanf()`读取两个浮点数，然后使用`for`循环计算编号。读取字符串中的空格数。

您也可以使用`strtok()`.

注意：读取输入流直到行尾（在您的情况下，行尾由新行标记）包括中间的空格（因为在 C 中，至少，空格也包含新行）也是模糊的。在这种情况下，最好使用和处理存储的数据以块的形式读取数据，`fread`直到您到达特定的行尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:30:24.210

我不知道如何使用单个 *scanf 来执行此操作，由于您的请求的最后一部分，我认为这是不可能的，*scanf 无法读取与简单正则表达式匹配**并以 a 结尾的任意长度字符序列指定字符**。

```
int character;
bool trailingNewLine;

if (fscanf(f, "%f%f", &sx, &sy) < 2)
    // not matching "whitespace-float-whitespace-float"
    // being more accurate could be painful...

// read arbitrary quantity of white space ending with '\n'
while (isspace(character = getc(f)))
    trailingNewLine = (character == '\n');

// the last one wasn't white space, doesn't belong to this one
ungetc(character, f);

if (!trailingNewLine)
    // missing newline at the end

// OK! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-21T11:01:15.127

```
scanf("%f %f%*c", &sx, &sy);
// %*c will read and discard all eventual characters after the second float 
```

# php - 数组 - 将值组合在一起

> ID：13222258
> 
> 赞同：0
> 
> 时间：2012-11-04T19:53:37.690
> 
> 标签：php, arrays, count

我有以下内容，并希望得到一些帮助：

```
function Display($line) {   
    $section = split(" +", $line);   
    for ($i = 1; $i <4; $i+=1){
        $section[$i];
    }       

    $countsection = count($section[3]); 
    $name = "$section[1] $section[2]";
    print "<td>$name</td>\n";
    print "<td>$countsection</td>\n";       
    $endvalue = end($section);       
    print "$endvalue";
}  

$allvalues = file("filename.txt");     
foreach ($allvalues as $checkline) {
   if (ereg("^[[:digit:]]", $checkline)) {
      Display($checkline);         
   }  
 } 
```

这是一个基本的纲要：

我想

*   `$counsection`并被`$endvalue`计算在内。所以里面的值`$countsection`需要相加，对于`$endvalue.`
*   如果 $name 是相同的 $name，则需要将它们合并在一起。

所以下面看起来像这样：

```
Name |  Count Section |  End Value
Mary Jane |  40 | 156
Tom John |  30  | 60 
```

而不是这个：

```
Name | Count Section | End Value
Mary Jane | 10 | 50
Mary Jane | 10 | 50
Mary Jane | 20 | 56
Tom John | 10 | 20
Tom John | 15 | 30
Tom John | 5 | 10 
```

文件内容示例：

```
12345    RM  100M 121      T     0400  1059  MWHA 110  Jane, Mary G    40

12345    RM  100M 122       W    0600  1059  MWHA 310  Jane, Mary P     40

12345    RM  100P 110    M  W    0800  0929  CLOU 122  John, Tom    39

12345    RM  100P 210    M  W    0930  1059  CLOU 205  John, Tom    40 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:48:00.760

你可以试试

```
$allvalues = getValues("log.txt");
print("<table>");
foreach ( $allvalues as $name => $value ) {
    print("</tr>");
    printf("<td>%s</td><td>%d</td><td>%d</td>", $name, $value[0], $value[1]);
    print("</tr>");
}
print("</table>"); 
```

输出

```
<table>
    <tr>
        <td>Jane, Mary G</td>
        <td>121</td>
        <td>40</td>
    </tr>
    <tr>
        <td>Jane, Mary P</td>
        <td>122</td>
        <td>40</td>
    </tr>
    <tr>
        <td>John, Tom</td>
        <td>320</td>
        <td>79</td>
    </tr>
</table> 
```

例子

```
Jane, Mary G        121         40
Jane, Mary P        122         40
John, Tom           320         79 
```

使用的功能

```
function getValues($file) {
    $lines = file($file);
    $values = array();
    foreach ( $lines as $line ) {
        $line = trim($line);
        if (empty($line))
            continue;
        $line = explode("  ", $line);
        if (isset($values[$line[11]])) {
            $values[$line[11]][0] += strstr($line[3], " ");
            $values[$line[11]][1] += $line[13];
        } else {
            $values[$line[11]] = array(strstr($line[3], " "),$line[13]);
        }
    }
    return $values;
} 
```

# javascript - 如何使用 jquery ui 仅自动完成功能？

> ID：13222260
> 
> 赞同：1
> 
> 时间：2012-11-04T19:53:40.747
> 
> 标签：javascript, jquery, jquery-ui

我在我的项目中集成了 jquery 的自动完成功能，并且还使用了 jquery malsup 表单插件。

现在，当我将它们都包括在内时，没有任何效果，我认为这是由于冲突造成的。

我如何在没有任何额外 css 的情况下使用最低限度的 jquery 自动完成功能？

# ssis - SSIS 查找转换高级编辑器（修改 SQL 语句）

> ID：13222262
> 
> 赞同：3
> 
> 时间：2012-11-04T19:53:59.027
> 
> 标签：ssis

我对 SSIS 中的查找转换有疑问，复选框有什么用（修改 SQL 语句）和参数选项。

提前致谢。泽兰。

* * *

感谢您的回答 Gowdhaman。

我有一个场景，比如我的查找（参考）表命中 DB2，在 DB2 中我们有多个模式，我的要求是将模式名称作为参数传递给查找转换，下面是查找转换中的查询

```
select * from **Schema**.TableName 
```

我需要在 Look-up 中将 Schema Name 作为参数传递，让我知道我们可以在 Look-up Transformation 中实现这一点。

在此先感谢，泽兰。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T11:49:37.157

您可以使用该表达式在数据流级别准备 SQL 语句查询。单击数据流任务。转到表达式，您可以使用表达式编辑器使用架构准备查询。下图向您展示了如何显示数据流表达式。

![在此处输入图像描述](../Images/49adcd0c6849cae9fe975ef28e7b4cb7.png)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:31:26.233

我们可以修改语句进行比较。例如，您的源文件中有日期字段，并希望通过比较查找表中的开始日期和结束日期来获取一列。以下查询说明了功能。

```
select * from (select * from [dbo].[DimTime]) [refTable]
where [refTable].[StartDate] <= ?
and [refTable].[EndDate] >= ? 
```

上面的语句将参数与 startdate 和 enddate 进行比较。如果您想使用查找表中的一些高级条件检查源参数，可以使用此选项。

希望这可以帮助

# php - Foreach 无效参数

> ID：13222268
> 
> 赞同：0
> 
> 时间：2012-11-04T19:54:40.307
> 
> 标签：php, foreach, mysqli

我正在创建一个搜索功能，该功能将允许用户最初通过邮政编码在我的数据库中搜索房屋。该函数如下所示，当执行该函数并找到一个真实的语句时，我没有收到任何错误，但是当我执行搜索并且没有返回任何字段时，我留下了这个错误：

```
 No Records Found
   Warning: Invalid argument supplied for foreach() in /Applications/XAMPP/xamppfiles/htdocs/undergradpad/search.php on line 26 
```

我希望它显示 No Records Found 但是我不知道应该如何纠正上述错误。

搜索.php：

```
<table width="500" border="1" cellpadding="5">
<tr>
<th width="16" scope="row">id</th>
<td width="95">bedrooms</td>
<td width="140">description</td>
<td width="104">roadname</td>
 <td width="71">postcode</td>
</tr>

<?php
    require("classes/class.House.inc");

    $obj = new House();
    $obj->search($_POST['term']);
    foreach($obj->data as $val){
    extract($val);
?>

<tr>
<td scope="row"><?php echo $id; ?></td>
<td><?php echo $bedrooms; ?></td>
<td><?php echo $description; ?></td>
<td><?php echo $roadname; ?></td>
<td><?php echo $postcode; ?></td>
</tr>
<?php
}
?>
</table> 
```

类/class.House.inc：

```
 <?php 
 include("connect/class.Database.inc");

 class House extends Database {

    public function read(){

            $query = "SELECT * FROM houses";

            $result = $this->mysqli->query($query);

            $num_result = $result->num_rows;    
            if($num_result > 0){
                while($rows =$result->fetch_assoc()){               
                    $this->data[]=$rows;
                    //print_r($rows);
                }           
                return $this->data;
            }
    }

    public function search ($term){

                    $query = "SELECT * FROM houses WHERE postcode like '%".$this->mysqli->real_escape_string($term)."%'";
                    $result = $this->mysqli->query($query);

                    $num_result = $result->num_rows;

                    if($num_result > 0){
                        while($rows =$result->fetch_assoc()){               
                            $this->data[]=$rows;
                            //print_r($rows);
                        }           
                        return $this->data;
                    } else{
                     echo 'No Records Found';    
                        }
    }
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T19:58:35.923

在这个变量 ($obj->data) 中，你只得到空数据。

首先检查是否不为空，然后使用 foreach 并且如果您的方法不返回空数据则没有错误

只需检查 if (!empty($obj->data) { foreach 代码}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T19:58:47.797

`$obj`是一个`House`对象。它没有`$data`属性，即使你使用它。该`search`方法设置此属性，但前提是找到记录。如果没有找到记录，则该方法回显一个值。

我会这样改变它：不要回显错误，而是让方法返回 false：

```
public function search ($term){

    $query = "SELECT * FROM houses WHERE postcode like '%".$this->mysqli->real_escape_string($term)."%'";
    $result = $this->mysqli->query($query);

    $data = false;

    $num_result = $result->num_rows;

    while($row =$result->fetch_assoc()){               
        $data[]=$row;
    }           
    return $data;
} 
```

现在，如果没有数据，该函数将返回一个 false 数组。您现在可以像这样使用它：

```
$obj = new House();
if ($data = $obj->search($_POST['term']))
{
  foreach($obj->data as $val){
    extract($val);
  }
} 
```

我所做的更改： - 不再设置`data`为属性，因为您也将其返回。如果你愿意，你仍然可以这样做，但我认为两者都做会让人困惑。- 如果没有数据，则返回 false。- 将变量更改`rows`为`row`，因为它只包含一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:18:40.670

```
if(is_array($obj->data)){
foreach code
}
else{
no record
} 
```

# ruby-on-rails - 为什么不能包含特定的水豚模块？

> ID：13222271
> 
> 赞同：0
> 
> 时间：2012-11-04T19:54:46.953
> 
> 标签：ruby-on-rails, capybara

不能直接要求 Capybara ( `require 'capybara/helpers'`) 的特定模块。它的工作 `require 'capybara/dsl'` 或 `require 'capybara/rspec'`

结果异常：

```
(...)/ruby-1.9.2-p320/gems/activesupport-3.2.5/lib/active_support/dependencies.rb:251:in `require': no such file to load -- capybara/helpers.rb (LoadError) 
```

我不知道为什么某些模块允许在 require 上加载，`capybara/?`而其他模块则没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:39:58.743

Capybara/helpers 在 Capybara 的当前稳定版本 (1.1.3) 中不可用。它是[3 个月前添加](https://github.com/jnicklas/capybara/blob/master/lib/capybara/helpers.rb)的，但仅在 2.0.0.beta4 中可用。

# nginx - uwsgicluster - 连接到上游客户端时没有实时上游

> ID：13222274
> 
> 赞同：5
> 
> 时间：2012-11-04T19:55:07.837
> 
> 标签：nginx, cluster-computing, uwsgi

下面是集群的简单 nginx 配置，然后我关闭`192.168.1.77:3032`服务器。

有时我会在日志中捕获 502 错误和“连接到上游客户端时没有实时上游”，而“服务器 unix:///var/tmp/site.sock 备份；” 工作，我猜必须处理请求，但 nginx 并没有发现它是实时的。可能是什么问题呢？

nginx配置：

```
 upstream uwsgicluster {
            server 192.168.1.77:3032;
            server unix:///var/tmp/site.sock backup;
        } 

server {
    listen      80;
    server_name site.com www.site.com;
    access_log  /var/log/nginx/sire.log;
    error_log  /var/log/nginx/site-error.log;

    location / {
            uwsgi_pass   uwsgicluster;
            include        uwsgi_params;
        }
} 
```

如果我从上游删除 192.168.1.77:3032 服务器并重新启动 nginx 它工作正常，但关闭 192.168.1.77:3032 服务器错误会定期发生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-09T17:40:25.800

我认为即使一个不工作，nginx 仍然会尝试上游块中的两台服务器。当它无法连接到其中一个时，它会尝试另一个，但仍会记录您看到的错误。

默认情况下，proxy_next_upstream 设置将在错误或超时时尝试下一个上游服务器。您可以覆盖它：

[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_next_upstream)

您是只看到错误日志，还是还看到了不良行为/负载平衡？

# vb.net - 使用 Random 类的随机数

> ID：13222277
> 
> 赞同：-1
> 
> 时间：2012-11-04T19:55:45.743
> 
> 标签：vb.net

我创建了一个获取随机数的应用程序。但是，我的 IF 语句似乎不起作用，并且我不断提出重复的数字。

代码是：

公开课形式1

```
Dim number As Integer
Dim star As Integer
Dim getNumber As Random = New Random()
Dim getStar As Random = New Random()

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

End Sub

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    If (number1.Text = number2.Text) Or (number1.Text = number3.Text) Or (number1.Text = number4.Text) Or (number1.Text = number5.Text) Then
        If (number2.Text = number1.Text) Or (number2.Text = number3.Text) Or (number2.Text = number4.Text) Or (number2.Text = number5.Text) Then
            If (number3.Text = number1.Text) Or (number3.Text = number2.Text) Or (number3.Text = number4.Text) Or (number3.Text = number5.Text) Then
                If (number4.Text = number1.Text) Or (number4.Text = number2.Text) Or (number4.Text = number3.Text) Or (number4.Text = number5.Text) Then
                    If (number5.Text = number1.Text) Or (number5.Text = number2.Text) Or (number5.Text = number3.Text) Or (number5.Text = number4.Text) Then
                        number5.Text = CStr(getNumber.Next(1, 50))
                        number4.Text = CStr(getNumber.Next(1, 50))
                        number3.Text = CStr(getNumber.Next(1, 50))
                        number2.Text = CStr(getNumber.Next(1, 50))
                        number1.Text = CStr(getNumber.Next(1, 50))
                    Else
                        number5.Text = ""
                    End If
                Else
                    number4.Text = ""
                End If
            Else
                number3.Text = ""
            End If
        Else
            number2.Text = ""
        End If
    Else
        number1.Text = ""
    End If

    If (star1.Text = star2.Text) Then
        If (star2.Text = star1.Text) Then
            star1.Text = CStr(getStar.Next(1, 11))
            star2.Text = CStr(getStar.Next(1, 11))
        Else
            star1.Text = ""
            star2.Text = ""
        End If
    End If

End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click

    number1.Clear()
    number2.Clear()
    number3.Clear()
    number4.Clear()
    number5.Clear()
    star1.Clear()
    star2.Clear()

End Sub
End Class 
```

谁能帮我解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:11:02.293

您在设置值之前检查匹配项，因此代码根本不查看设置了哪些值。

首先设置值，然后循环直到找到未使用的值：

```
number1.Text = CStr(getNumber.Next(1, 50))
Do
  number2.Text = CStr(getNumber.Next(1, 50))
Loop While number1.Text = number2.Text
Do
  number3.Text = CStr(getNumber.Next(1, 50))
Loop While number1.Text = number3.Text Or number2.Text = number3.Text
Do
  number4.Text = CStr(getNumber.Next(1, 50))
Loop While number1.Text = number4.Text Or number2.Text = number4.Text Or number3.Text = number4.Text
Do
  number5.Text = CStr(getNumber.Next(1, 50))
Loop While number1.Text = number5.Text Or number2.Text = number5.Text Or number3.Text = number5.Text Or number4.Text = number5.Text 
```

# ajax - 通过对话框提交的表单再次打开对话框

> ID：13222284
> 
> 赞同：4
> 
> 时间：2012-11-04T19:56:16.290
> 
> 标签：ajax, jquery, jquery-mobile

我在通过 jQuery Ajax 提交的 jquerymobile 对话框中有一个表单。

目前我的问题是，一旦提交表单，相同的对话框就会在原始对话框的顶部再次打开。

这样我的网址在提交之前就会读取：

```
url/index.php#&ui-state=dialog 
```

然后提交后：

```
url/index.php#&ui-state=dialog#&ui-state=dialog&ui-state=dialog 
```

有没有人遇到过这样的事情？

[编辑添加的代码示例]

```
$(function(){
    $("#form").submit(function(e){
        e.preventDefault();
        var dataString = $("#form").serialize();
    errorInput = $("input[name=valOne]#valOne").val();
        $.ajax({
            type: "GET",
            url: "formHandler.php",
            data: dataString,
        dataType: "text",
            success: function(data){
            if(data.toLowerCase().indexOf("error") >= 0){
                alert(data);
                $(".ui-dialog").dialog("close");
                $("#valOne").val(errorInput);  //the reentering info so user doesn't have to
            }else{
                    $(".ui-dialog").dialog("close");
                    location.href="index.php";
            }
            },
            error:function (xhr, ajaxOptions, thrownError){
                alert(thrownError);
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:24:40.060

1.  [您可以使用此提交](http://api.jquery.com/submit/)在表单上设置自己的处理程序
2.  为页面和对话窗口使用两种形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T19:47:38.840

用JS刷新页面而不是再次加载会不会更容易？它可能会调用对话框函数两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:41:26.063

我对表格有类似的问题。我决定`<div data-role="fieldcontain">`改用。现在它运行良好，没有“刷新效果”。在这种情况下，您应该制作自己的消息而不是 .serialize。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T13:51:40.043

您是否尝试过使用 $.mobile.changePage("url here") 而不是 location.href？更多细节在这里[http://jquerymobile.com/test/docs/api/methods.html](http://jquerymobile.com/test/docs/api/methods.html)

# c++ - 从 Qt 对话框中删除“？”按钮

> ID：13222287
> 
> 赞同：1
> 
> 时间：2012-11-04T19:56:28.450
> 
> 标签：c++, qt

我想从 Qt 对话框中删除“？”按钮，如此处所述[，](https://stackoverflow.com/questions/81627/how-can-i-hide-delete-the-help-button-on-the-title-bar-of-a-qt-dialog)但不知何故它不起作用。

这是我的代码：

```
Qt::WindowFlags flags;
flags = (Qt::Dialog | Qt::WindowStaysOnTopHint) & 
          ~Qt::WindowContextHelpButtonHint;
setWindowFlags( flags ); 
```

我认为按位运算符有问题，但我不知道是什么..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:48:10.227

这对我来说很好：

```
QDialog *dialog = new QDialog;
Qt::WindowFlags flags(Qt::WindowTitleHint);
dialog->setWindowFlags(flags); 
```

然而，最常见的方法是在构造函数中传递标志：

```
QDialog *dialog = new QDialog(0, Qt::WindowTitleHint); 
```

编辑：我认为对 QFlags 运算符存在误解（请参阅下面的评论）。这个例子可能会清除它：

```
Qt::WindowFlags flags(Qt::Dialog | Qt::WindowStaysOnTopHint);
qDebug() << flags.testFlag(Qt::WindowContextHelpButtonHint); // false because the flag hasn't been added
flags = flags | Qt::WindowContextHelpButtonHint;
qDebug() << flags.testFlag(Qt::WindowContextHelpButtonHint); // true because it has been added
flags = flags & ~Qt::WindowContextHelpButtonHint;
qDebug() << flags.testFlag(Qt::WindowContextHelpButtonHint); // false because it has been removed 
```

倒数第二行代码`Qt::WindowContextHelpButtonHint`从`flags`. 它不*添加*“否定”标志。

至少这是我的理解。

# android - Android 许可证检查器——工作示例——

> ID：13222289
> 
> 赞同：1
> 
> 时间：2012-11-04T19:56:51.380
> 
> 标签：android

我失去了一天的编码尝试阅读网络上关于设置应用程序许可证检查器的每篇文章。正在寻找 LVL 的最佳工作示例，因为它似乎必须更改，因为 Web 上的教程包含 Eclipse 无法识别的代码？或者图书馆没有加载正确？即便如此，SDK 中的“附加”下的“Google 营销许可证”也已更改为“Google Play 许可证”。在所有在线教程中都没有提到这一点。想。最近 Jelly Bean 发生了变化？developer.android,com 中的文档也已过时，似乎在同一方面.. 像往常一样.. 呃..

任何更新最近对此的见解将不胜感激？似乎所有示例/教程都在 2010 年左右，现在 zilch 来匹配提到的这些差异......它不再使用了吗？我理解太可破解但我认为仍然有用..

请指教？

先感谢您。机器人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T13:28:48.520

Google Play 许可库附带一些示例代码，以及用于许可证验证的源文件。我发现有必要将这些许可证验证类的源代码链接到我的 Eclipse 项目中。

[Setting Up for Licensing](http://developer.android.com/google/play/licensing/setting-up.html)页面建议将源包含到您的 src 目录中，但将其添加为另一个源目录似乎是更好的解决方案。

# xml - 在 XML 属性中包含 & 符号

> ID：13222291
> 
> 赞同：3
> 
> 时间：2012-11-04T19:57:04.337
> 
> 标签：xml, dom, powershell, html-entities, xml-attribute

# 问题

我们想要分配一个属性，其内容已经包含像`&quot;`or之类的实体`&amp;`。
在此示例中，我们希望 title 属性为`Stack "Stacky" Overflow`：

```
$elem = $xml.CreateElement("Site");
$elem.SetAttribute("Title", "Stack &quot;Stacky&quot; Overflow"); 
```

但这会变成以下 XML 输出：

```
<Site Title="Stack &amp;quot;Stacky&amp;quot; Overflow" /> 
```

这种行为甚至在有关[XmlElement.SetAttribute Method](http://msdn.microsoft.com/en-us/library/y1ah1zbw.aspx)的文档中都有说明：

> 为了分配包含实体引用的属性值，用户必须创建一个[XmlAttribute](http://msdn.microsoft.com/en-us/library/system.xml.xmlattribute.aspx)节点以及任何[XmlText](http://msdn.microsoft.com/en-us/library/system.xml.xmltext.aspx)和 [XmlEntityReference](http://msdn.microsoft.com/en-us/library/system.xml.xmlentityreference.aspx)节点，构建适当的子树并使用 [SetAttributeNode](http://msdn.microsoft.com/en-us/library/system.xml.xmlelement.setattributenode.aspx)将其分配为属性值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T19:57:04.337

# 解决方案

```
$elem = $xml.CreateElement("Site");

$elemAttr = $xml.CreateAttribute("Title");
$elemAttr.InnerXml = "Stack &quot;Stacky&quot; Overflow";

$elem.SetAttributeNode($elemAttr); 
```

XML 输出：

```
<Site Title="Stack &quot;Stacky&quot; Overflow" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:09:24.773

不知道这是否有帮助

```
Add-Type -AssemblyName System.Web
$elem = $xml.CreateElement("Site");
$elem.SetAttribute("Title",[System.Web.HttpUtility]::HtmlDecode("Stack &quot;Stacky&quot; Overflow"));
$elem.OuterXml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:15:16.943

```
PS> $xml.Site.Title = [System.Security.SecurityElement]::Escape('Stack "Stacky" Overflow')
PS> $xml.Site.Title

Stack &quot;Stacky&quot; Overflow 
```

# java - 如何在 Spring 3.x 中检索默认的 HandlerExceptionResolver 实例？

> ID：13222292
> 
> 赞同：0
> 
> 时间：2012-11-04T19:57:05.503
> 
> 标签：java, spring, exception-handling, default

Javadoc 说[AnnotationMethodHandlerExceptionResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/AnnotationMethodHandlerExceptionResolver.html)、[ResponseStatusExceptionResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/annotation/ResponseStatusExceptionResolver.html)和[DefaultHandlerExceptionResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/mvc/support/DefaultHandlerExceptionResolver.html)在 DispatcherServlet 中默认启用。

我正在尝试创建一个`HandlerExceptionResolverComposite`，但我想检索`HandlerExceptionResolver`默认启用的实例。我试过了`@Autowired`，但没有成功。

我目前的解决方案是：

```
@Configuration
public class ErrorHandling {

//  @Autowired
//  AnnotationMethodHandlerExceptionResolver amher;
//  
//  @Autowired
//  ResponseStatusExceptionResolver rser;
//  
//  @Autowired
//  DefaultHandlerExceptionResolver dher;

    @Bean
    HandlerExceptionResolverComposite getHandlerExceptionResolverComposite() {

        HandlerExceptionResolverComposite result
            = new HandlerExceptionResolverComposite();

        List<HandlerExceptionResolver> l
            = new ArrayList<HandlerExceptionResolver>();

        l.add(new AnnotationMethodHandlerExceptionResolver());
        l.add(new ResponseStatusExceptionResolver());
        l.add(new DefaultHandlerExceptionResolver());

        result.setExceptionResolvers(l);

        return result;

    }

} 
```

我的问题是：如何检索`HandlerExceptionResolver`默认启用的实例？如果我创建自己的实例会不会有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:29:09.460

在 BeanFactoryUtils 中找到了一些东西

```
Map<String, HandlerExceptionResolver> matchingBeans = BeanFactoryUtils
                    .beansOfTypeIncludingAncestors(context, HandlerExceptionResolver.class, true, false); 
```

检查 DispatchServlet 的来源并转到 initHandlerExceptionResolvers() 方法，可能您可以找到一种获取所有已注册异常解析器的方法。

谢谢

# php - MongoDB/PHP unset an array by key

> ID：13222295
> 
> 赞同：1
> 
> 时间：2012-11-04T19:57:23.907
> 
> 标签：php, mongodb

I have a document that has a nested array. I want to delete an item in the array by it's key value. I've tried doing an update with:

`array('$unset' => array('item.key' => 1))`

`array('$pull' => array('item.key' => 1))`

Doing, `$unset` , kept the key but nulled out the value, I want to get rid of it entirely. Pull didn't do anything.

Any suggestions?

Thank you!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:19:40.650

In order to use `$pull` you have to specify the entire array element you want to delete, luckily `$pull` is special in that you can specify a match criteria for the element you are `$pull`ing

Here is an example:

```
db.array.update({},{$pull:{a:{"key2":{$exists:true}}}},{multi:true}) 
```

This will delete array element where "key2" exists as a keyname regardless of the value. Sounds like this is what you want.

Here is a [reference](http://www.mongodb.org/display/DOCS/Updating#Updating-%24pull).

# wcf - WCF 消息：To 元素中的协议更改

> ID：13222300
> 
> 赞同：1
> 
> 时间：2012-11-04T19:58:25.783
> 
> 标签：wcf, web-services, soap, soapheader, endpointbehavior

我有一个 WCF 服务可以在 .NET 中使用。根据要求，标头中的 Action 元素必须是**“http://abc”**，To 元素必须是**“ws://xyz”**，以便服务识别和响应请求。然而，该操作的 soapAction 在 WSDL 中是空白的，并且无法更改。

我以编程方式构建的服务配置是这样的：

*   文本消息编码绑定与 Soap11 信封版本和 WSAddressing10 寻址版本
*   无证券投标
*   http传输绑定

我发现实现此要求的设置是“ws://xyz”作为端点 URL，并且 Request.Headers.Action 在 BeforeSendRequest 中使用使用附加到端点的端点行为添加的消息检查器设置为“http://abc”。然后我还附加了一个带有“http://abc”URL 的 ClientViaBehavior。

在我的开发机器上，这会根据需要引起

```
<a:Action>http://abc</a:Action>
<a:To>ws://xyz</a:To> 
```

但是在它生成的测试服务器上

```
<a:Action>http://abc</a:Action>
<a:To>http://xyz</a:To> 
```

我不知道服务器的确切配置，但我相信它是 Windows 服务器，就像我的开发盒一样。相同的代码是否会在两台不同的机器上生成不同的消息，或者我将如何实现这一点？我还应该说它工作了几个星期并在上周一停止了。

*我后来发现了以下内容：测试服务器上有 .NET 4.5 以及我尝试过的另一台机器（也失败了）。它工作正常的开发机器上只有.NET 4.0，这表明它可能与它有关。但是我没有证据表明它是由 .NET 4.5 引起的，因为它是在问题出现前几周安装的。此外，自从它停止工作以来，没有任何 Windows 更新！我还尝试在我的 ClientMessageInspector 实现中设置 To 元素，但协议仍然被翻转为 http。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:56:28.900

我认为 BeforeSendRequest 不被称为服务绑定的未命中配置。检查您是否已将扩展配置添加到您希望具有该行为的服务端点。

# android - 类返回一个旧位置

> ID：13222301
> 
> 赞同：0
> 
> 时间：2012-11-04T19:58:31.447
> 
> 标签：android, gps, android-location

该类通常返回一个 OLD 位置。我通常需要 run() 几次才能返回正确的位置。有什么想法吗？

源代码：

[http://pastebin.com/JacG3JqJ](http://pastebin.com/JacG3JqJ)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:13:43.650

检查这个问题 [Android - Reliably getting the current location](https://stackoverflow.com/questions/3120256/android-reliably-getting-the-current-location)

并注意

```
 Location location=lm.getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 
```

# c - 使用 dtrace 计算一段时间内平均和最大磁盘读/写队列的示例

> ID：13222305
> 
> 赞同：2
> 
> 时间：2012-11-04T19:58:42.847
> 
> 标签：c, macos, dtrace

我需要在 Mac OSX 上读取磁盘队列长度（分别用于读取和写入操作）。我已经得出结论，这可能只能通过 dtrace 来完成（我很乐意在这里犯错，但是我没有找到任何不同的方法）。提供此信息的唯一方法是打开 dtrace 脚本。我需要能够在我的 C 程序中访问它提供的信息（或者更确切地说能够实现它的逻辑）。作为整个 dtrace 业务，libdtrace 的使用非常神秘（考虑到私有 API）。有没有什么例子（除了我发现的一些没有回答我的问题 - [libdtrace 缓冲输出](https://stackoverflow.com/questions/3792486/libdtrace-buffered-output)和[http://www.osdevcon.org/2008/files/osdevcon2008-petr.pdf](http://www.osdevcon.org/2008/files/osdevcon2008-petr.pdf)）可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T22:16:01.280

直接使用 libdtrace 可能有点麻烦，因为它在技术上是一个私有 API，但您可以在其他 DTrace 使用者中找到示例。libdtrace 在支持它的所有平台（Mac OS、Solaris、FreeBSD）上基本相同，因此 API 非常稳定。然而，Solaris 获得了更多更新，并且 IIRC Mac OS 不支持其他平台上可用的所有功能。但是，这为您提供了更多示例。

您可以`dtrace`在其中一个平台上查看命令的源代码，也可以查看库的某些包装器的源代码，例如[node-libdtrace](https://github.com/bcantrill/node-libdtrace)。我推荐后者，因为它只是一个提供重要高级操作的包装器，这应该可以更容易地找出哪些代码在做什么。

# ios - 如何使用 XIB 创建 CustomTabBarController？

> ID：13222308
> 
> 赞同：0
> 
> 时间：2012-11-04T19:59:01.770
> 
> 标签：ios, customization, uitabbar

我正在使用 iOS 5.1，我需要为我的应用创建一个自定义 TabBar。当应用程序启动时，控件将被推送到自定义 TabbBar 控制器类。这就是我正在做的事情。**我创建了从 UITabBarController 派生的类，并且我也使用了 XIB。在 XIB 中，我可以看到包含选项卡栏的 UIView Objetc，当我在该选项卡栏中添加更多选项卡时，当我运行应用程序时它没有反映，我只能看到一个黑色选项卡，没有任何标题和颜色。**我记得早些时候我们使用 MainWindow.xib 添加 TabBarController 并为每个 TabBar 项添加导航控制器，以便每个选项卡都有自己的导航控制器，但是如果我使用了从UiTabBarController 类。如果我不清楚，请告诉我。我将给出更多说明。我只想知道为什么 XIB 的 TabBar 上的更改没有反映在应用程序中？

![在此处输入图像描述](../Images/578eff66b0db43a8f5a69b387f519044.png)

![在此处输入图像描述](../Images/e5586d3e53fe74f914214c33942995de.png)

下图显示了 XIB 和 App，因此您可以看到我在 UITabBar 中添加了四个选项卡，但在应用程序中只有一个黑条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:03:12.567

**来自关于 UITabBarController 的 Apple 文档：** *此类不用于子类化。相反，您按原样使用它的实例来呈现一个界面，允许用户在不同的操作模式之间进行选择*

你不能继承它。如果原来的 UITabBarController 没有你想要的功能，你唯一的选择是创建一个新的自定义标签栏控制器而不继承原来的。

**编辑**：不确定你是否想这样做。您只是想从笔尖加载 UITabBarController 吗？如果是这样，则不需要子类化。使用故事板会更好;-) 但即使使用笔尖也可以做到。你必须简单地这样做：

1-在项目中添加一个空的xib并将其命名为TabBar（只有xib。没有源文件）

2-在该笔尖内放置一个 UITabBarController。没有其他组件，只有那个 UITabBarController

3-将此代码放入 AppDelegate 应用程序的 didFinishLaunchingWithOptions 方法中：

```
// this code should be already in that method if you have used the empty application model
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

// this is the new code to add. You are programmatically loading an instance of UITabBarController from the nib named TabBar.xib
UITabBarController *tb = (UITabBarController *)[[[NSBundle mainBundle]loadNibNamed:@"TabBar" owner:self options:nil] objectAtIndex:0];
// here you are assigning the tb as the root viewcontroller
self.window.rootViewController = tb;

// this code is standard in this method
// Override point for customization after application launch.
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES; 
```

然后您可以自定义您的 UITabBarController 并且它应该正确加载。注意：如果在笔尖内添加其他对象，则必须更改行

```
UITabBarController *tb = (UITabBarController *)[[[NSBundle mainBundle]loadNibNamed:@"TabBar" owner:self options:nil] objectAtIndex:0]; 
```

有一个循环和一些检查，看看你是否真的在加载 UITabBarController 而不是其他组件。现在我只是在笔尖中加载第一个对象，而不注意它是 UITabBarController 还是 UIPototo ;-)

# google-bigquery - BigQuery - JOIN 左侧的 UNION == 意外。请再试一次

> ID：13222309
> 
> 赞同：0
> 
> 时间：2012-11-04T19:59:03.737
> 
> 标签：google-bigquery

我对这个查询有疑问：

```
select 
sviEventoviFull.site_sectionid as site_sectionid,
sviEventoviFull.ev_date as ev_date,
sum(sviEventoviFull.total_views) as actualTotalViews,
sum(sviEventoviFull.total_visits) as actualTotalVisits,
sum(sviEventoviFull.total_time) as actualTotalTime,
sum(sviEventoviFull.realUserCount) as actualRealUserCount from
(select userid,site_sectionid,
    ev_date,
    total_views,
    total_visits,
    total_time,
    1 as realUserCount from
    DotMetric_TEST.EV_03112012,
    DotMetric_TEST.EV_04112012)

as sviEventoviFull 

join
    (
    select userid from DotMetric_TEST.UserSettings where 
    q1=100 
    and 
    q2=213 
    and 
    geo_code in (7,6,1,2)
    ) 
    as patternTablica
    on sviEventoviFull.userid =patternTablica.userid 
    where  sviEventoviFull.site_sectionid in (1,2,3,4,5,6,7,8,11,123)
    group by site_sectionid,ev_date 
```

它一直告诉我“错误：意外。请重试。”。

没有 UNION 的相同查询按预期工作：

```
select 
sviEventoviFull.site_sectionid as site_sectionid,
sviEventoviFull.ev_date as ev_date,
sum(sviEventoviFull.total_views) as actualTotalViews,
sum(sviEventoviFull.total_visits) as actualTotalVisits,
sum(sviEventoviFull.total_time) as actualTotalTime,
sum(sviEventoviFull.realUserCount) as actualRealUserCount from
(select userid,site_sectionid,
    ev_date,
    total_views,
    total_visits,
    total_time,
    1 as realUserCount from
    DotMetric_TEST.EV_03112012)

as sviEventoviFull 

join
    (
    select userid from DotMetric_TEST.UserSettings where 
    q1=100 
    and 
    q2=213 
    and 
    geo_code in (7,6,1,2)
    ) 
    as patternTablica
    on sviEventoviFull.userid =patternTablica.userid 
    where  sviEventoviFull.site_sectionid in (1,2,3,4,5,6,7,8,11,123)
    group by site_sectionid,ev_date 
```

请帮助我们解决这个问题以及如何一起使用 UNION 和 JOIN。连接左侧的 UNION 应该是非常常见的请求！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:34:55.247

这是一个已知的错误，我们正在努力修复。修复发布后，我将更新此线程。

# objective-c - 快捷操作符在目标 C 中有效吗？

> ID：13222310
> 
> 赞同：0
> 
> 时间：2012-11-04T19:59:04.660
> 
> 标签：objective-c, if-statement

在 MATLAB 中，如果您键入`if (a)&&(b)`，`b`则不测试是否`a`为假。如果第一个条件不成立，这对于第二个条件会引发错误的情况非常方便。

在 Objective C 中，情况似乎并非如此。所以，我的问题是：有没有类似的方法在 if 语句中排序条件？还是必须将这两个简单的语句嵌套？（例如，`if (a){ if(b) {`。）

谢谢阅读。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T20:01:22.330

> 在 Objective C 中，情况似乎并非如此。

这是不正确的。C 及其衍生物，包括 C++ 和 Objective-C，遵循您在 Matlab 中熟悉的相同的短路规则。在以下形式的表达式中：

```
x && y 
```

`y``x`如果为 false，则不会被评估。

# html - CSS仅修改P标签上方的H2标签

> ID：13222312
> 
> 赞同：3
> 
> 时间：2012-11-04T19:59:13.440
> 
> 标签：html, css

看下面的代码，我需要在第二个'content-block'中更改H2标签的字体大小，我不能直接修改Div标签或h2标签，我只能修改h2标签下面的内容。

```
<div class="content-block">
<h2>Title here</h2>
<p>this is some text.</p>
</div>

<div class="content-block">
<h2>Modify This title only</h2>
<p>this is some more text.</p>
<style>## I can add CSS here ##</style>
</div> 
```

编辑：我不能确定有多少“内容块”div 在我要修改的那个上面，它从一页到另一页。（一个购物车）

怎么可能？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:01:30.487

```
.content-block + .content-block h2 {/* your css */} 
```

演示：[http ://dabblet.com/gist/4013393](http://dabblet.com/gist/4013393)

`+`就是我们所说的[相邻兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:25:49.193

使用 CSS3 :nth-child() 选择器希望它能解决你的问题

在此处查看示例：http: [//www.w3schools.com/cssref/sel_nth-child.asp](http://www.w3schools.com/cssref/sel_nth-child.asp)

# html - 检测 iframe 加载错误

> ID：13222314
> 
> 赞同：16
> 
> 时间：2012-11-04T19:59:32.817
> 
> 标签：html, iframe, mobile-safari

我正在使用 src 属性将用户选择的页面加载到 iframe 中。如果加载失败，我想以对用户有意义的方式报告问题。[根据http://www.w3schools.com/jsref/dom_obj_frame.asp，iframe](http://www.w3schools.com/jsref/dom_obj_frame.asp)通常不支持 onerror 。

该页面可能来自用户的域，而不是我的域，因此我无法查看 iframe 的内容。

如果加载成功，我可以设置一个超时并从我的 onload 处理程序中取消它，但它需要一个很长的超时以避免错误的错误报告，同时我 iPhone 上的 Safari 显示了一个可能会让用户感到困惑的警报。即使这对 Kindle Fire 浏览器也不起作用——无论加载是否成功，它都会向我的处理程序传递一个加载事件。

有什么事件可以用来检测失败吗？有什么方法可以抑制默认的 Safari 行为？有什么方法可以判断加载尝试是否失败？（如果我能做到这一点，我可以使用更短的超时并轮询，直到加载尝试得到解决）。

我可以要求使用最新的浏览器，但希望有一个可以在尽可能多的智能手机和平板电脑之间移植的解决方案。

我已经测试了 AJAX Get 想法，但不幸的是它不起作用。跨域 AJAX Get 到任意 URI 会导致异常，无论目标是否存在以及是否可以加载到 iframe 中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T16:52:58.123

您可以将您的 iframe 和/或 ajax 请求设置为始终调用您控制的页面（即：loader.php），通过 get 发送 loader.php 用户请求的页面。从 loader.php，使用 curl 甚至只是 file_get_contents 来获取外部页面。如果请求未能返回到 loader.php，您可以在那里检查错误，并返回您希望 iframe 显示的任何内容。

虽然我的示例引用了 php 的使用，但各种脚本语言都支持 curl。它可能比您可能拥有的其他解决方案更复杂，但可以让您访问响应标头以及排除页面加载失败的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:12:01.250

正如您所暗示的，当您尝试查询 iframe 内的任何内容（如果它位于单独的域中）时，您将面临同源策略类型限制。

`src`在将 iframe 的 URL 传递到框架之前，您可以向它发出 AJAX GET 请求。如果您没有从 AJAX 调用返回 HTTP 200 响应，那么该站点也将无法在框架内加载。

这将增加整个过程的开销，并且仅在您检查iframe 的文档是否是有效的真实 URL*时才有用。**如果您需要知道 iframe 文档何时*完全加载，这将无济于事。

如果您需要知道 iframe 何时加载，并且它位于外部域上，那么我相信您别无选择，只能要求将一些代码添加到这些外部站点以通知父页面它们已成功加载.

或者，如果这样做有意义，请让最终用户单击链接以标记内容未正确加载。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-22T15:12:19.437

派对迟到了，但我设法破解了它：

起初，我想像其他人一样进行 AJAX 调用，只是它最初对我不起作用，因为我使用了 jQuery。如果您执行 XMLHttpRequest，它会完美运行：

```
var url = http://url_to_test.com/
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status != 200) {
        console.log("iframe failed to load");
    }
};
xhttp.open("GET", url, true);
xhttp.send(); 
```

**编辑：**
所以这个方法工作正常，除了它有很多误报（拿起很多会在 iframe 中显示的东西）由于跨域恶意。我解决这个问题的方法是在服务器上执行 CURL/Web 请求，然后检查响应标头 a) 网站是否存在，以及 b) 标头是否已设置`x-frame-options`。

如果您运行自己的网络服务器，这不是问题，因为您可以为它进行自己的 api 调用。

我在 node.js 中的实现：

```
app.get('/iframetest',function(req,res){ //Call using /iframetest?url=url - needs to be stripped of http:// or https://
   var url = req.query.url; 
    var request = require('https').request({host: url}, function(response){ //This does an https request - require('http') if you want to do a http request
        var headers = response.headers;
        if (typeof headers["x-frame-options"] != 'undefined') {
            res.send(false); //Headers don't allow iframe
        } else {
            res.send(true); //Headers don't disallow iframe
        }
    });
    request.on('error',function(e){
       res.send(false); //website unavailable
    });
    request.end();
}); 
```

# python - 两个物体之间的距离

> ID：13222323
> 
> 赞同：0
> 
> 时间：2012-11-04T20:00:36.083
> 
> 标签：python, canvas, tkinter

所以我一直在试图弄清楚如何在画布上找到两个对象之间的距离，并且我已经用尽了谷歌上最相关的链接，但收效甚微。

我正在尝试使它计算绘制的椭圆与画布上的线条之间的距离。

```
from __future__ import division
from Tkinter import *
import tkMessageBox

class MyApp(object):
    def __init__(self):
        self.root = Tk()
        self.root.wm_title("Escape")
        self.canvas = Canvas(self.root, width=800, height=800, bg='white')
        self.canvas.pack()
        self.canvas.create_line(100, 100, 200, 200, fill='black')
        self.canvas.bind("<B1-Motion>", self.tracer)
        self.root.mainloop()

    def tracer(self, e):
        self.canvas.create_oval(e.x-5, e.y-5, e.x+5, e.y+5, fill='blue', outline='blue')
        rx = "%d" % (e.x)
        ry = "%d" % (e.y)
        print rx, ry
MyApp() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:10:36.340

两个圈子：

```
dist = math.sqrt((circle1.x-circle2.x)**2 + (circle1.y-circle2.y)**2) - circle1.r - circle2.r 
```

很明显，它们的欧几里得距离是使用勾股定理计算的。

点/段：

```
 a = segment[1].y - segment[0].y
 b = segment[0].x - segment[1].x
 c = - segment[0].x * a - segment[0].y * b 
 dx = segment[1].x - segment[0].x
 dy = segment[1].y - segment[0].y
 nc0 = - segment[0].x * dx - segment[0].y * dy
 nc1 = - segment[1].x * dx - segment[1].y * dy
 if ((dx * x + dy * y + nc0) < 0) dist = math.sqrt((x-segment[0].x)**2 + (y-segment[0].y)**2)
 elif((dx * x + dy * y + nc1) < 0) dist = math.sqrt((x-segment[1].x)**2 + (y-segment[1].y)**2)
 else dist = (a*x + b*y + c) / math.sqrt(a**2 + b**2) 
```

圆/段 - 与点/段相同，只是减去圆的半径

多边形/多边形 - 遍历多边形 1 的每个顶点和多边形 2 的段，然后遍历多边形 2 的每个顶点和多边形 1 的段，然后找到最小的。

不要在代码中使用幻数。5的半径不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:04:04.157

```
dist = math.sqrt((oval.x-point.x)**2 + (oval.y-point.y)**2) 
```

不确定这是否能回答您的问题，但这是距离公式

原始问题有几个问题。

1.  你在什么时候试图找到距离？

2.  您没有保存椭圆形位置，因此以后很难查找

3.  你为什么要拉远距离？/你打算用它做什么？

4.  你想找到到边缘的距离还是到中心的距离？

一般来说，我猜你想在`def trace`函数中得到它

步骤 1\. 兴趣点是 ( `e.x,e.y`)

步骤 2\. 找到线上的最近点（线 = (100,100) 到 (200,200) ）（这本身可能是一个问题。http: [//nic-gamedev.blogspot.com/2011/11/using-矢量数学和位of_08.html](http://nic-gamedev.blogspot.com/2011/11/using-vector-mathematics-and-bit-of_08.html)）

步骤 3\. 将距离法应用于兴趣点和线上最近点

```
def dist(pt1,pt2):
    return ((pt1.x-pt2.x)**2 + (pt1.y-pt2.y)**2)**.5 
```

另一方面...你的椭圆看起来很像圆圈...

# gitorious - 安装 gitorious 问题

> ID：13222328
> 
> 赞同：0
> 
> 时间：2012-11-04T20:01:16.357
> 
> 标签：gitorious, git-daemon

我正在努力按照本教程在我的本地服务器上安装 gitorious（在 Ubuntu 12.04 发行版上）：http: [//cjohansen.no/en/ruby/setting_up_gitorious_on_your_own_server](http://cjohansen.no/en/ruby/setting_up_gitorious_on_your_own_server)

修复了一些配置后，我开始运行这个命令：`env RAILS_ENV=production /etc/init.d/git-daemon start`，我一直收到这个消息`Starting git-daemon: FAILURE!!!`，但没有找到任何日志消息。谷歌搜索后，我发现这可能是 /etc/init.d/git-daemon 配置文件中的配置问题：我把它放在[这里](http://www.2shared.com/document/2w9aV5zB/config-daemon.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T02:10:02.463

嗯...不能说我可以查明问题。你能得到任何消息`dmesg | tail`吗？我记得有一些问题`git-daemon`，我认为他们归结为 ActiveMQ 的一些问题。不幸的是，我不记得我是如何修复它的。

似乎还有一个非常简洁的安装脚本可以简化 Ubuntu 12.04 的设置过程：[https ://gist.github.com/4236547](https://gist.github.com/4236547)

PS：您可能希望在[pastebin](http://pastebin.com/)上获得一个帐户，以使您的配置文件更易于访问。

# java - 使用 Google Guava 获取字符串的前导数字

> ID：13222331
> 
> 赞同：1
> 
> 时间：2012-11-04T20:01:25.417
> 
> 标签：java, guava

基本上，我有一些字符串，比如

```
5 - Avenue Rd
9 - Bellamy
21 - Brimley
191 - Highway 27 Rocket 
```

等等。我正在寻找一种使用 Google`Guava`返回开头数字的方法。根据我的研究：

*   `CharMatcher.DIGIT.retainFrom`很好，但我希望它停在第一个非数字字符处。
*   `CharMatcher.DIGIT.trimLeadingFrom`几乎是我想要的，除了它返回我想要一串数字的字符串的另一部分。

有任何想法吗？

编辑：添加了另一个例子。

上述四个示例的预期输出：

```
5
9
21
191 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:03:46.167

不完全等价，但

```
CharMatcher.DIGIT.negate().trimTrailingFrom(string); 
```

或者 - 涉及更多一点，但这将适用于中间数字 -

```
string.substring(0, CharMatcher.DIGIT.negate().indexIn(string)); 
```

或者，使用正则表达式，尽管所有开销都意味着——

```
string.replaceAll("^(\\d+).*$", "$1") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:03:56.110

你为什么不只是`split()`“-”符号上的字符串然后`trim()`解析......

```
String test ="5 - Avenue Rd";
String[] out = test.split("-");
System.out.println(out[0].trim()); 
```

我们不需要一个框架来做到这一点。

# javascript - HTML5 数据属性中的通配符

> ID：13222334
> 
> 赞同：4
> 
> 时间：2012-11-04T20:02:06.537
> 
> 标签：javascript, jquery, html, sizzle

是否可以在属性名称中使用带有通配符的 jQuery 查找所有 DOM 元素？

考虑以下 HTML：

```
<input 
     id="val1" 
     type="text" 
     data-validate-required 
     data-validate-minlength="3" 
     data-validate-email /> 
```

我想要实现的是找到所有属性名称以开头的dom节点`data-validate-`

据我了解，[此处](http://api.jquery.com/category/selectors/)描述的通配符与属性的“值”有关。

这样做的原因是 - 我想找出应该验证哪些元素 - 然后找出哪些验证参数（如 -email）起作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T20:22:05.003

您可以创建自定义伪类，例如将属性名称与正则表达式匹配：http: [//jsfiddle.net/hN6vx/](http://jsfiddle.net/hN6vx/)。

```
jQuery.expr.pseudos.attr = $.expr.createPseudo(function(arg) {
    var regexp = new RegExp(arg);
    return function(elem) {
        for(var i = 0; i < elem.attributes.length; i++) {
            var attr = elem.attributes[i];
            if(regexp.test(attr.name)) {
                return true;
            }
        }
        return false;
    };
}); 
```

用法：

```
$(":attr('^data-')") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:32:09.157

因为 JQuery 严重依赖[XPath](http://en.wikipedia.org/wiki/Xpath)，并且 XPath 不支持通配符属性选择 - 如果没有您想要避免的开销，这是不可能的。

总是有可能创建自己的选择器，只是为了保持干净：

```
//adds the :dataValidate selector
$.extend($.expr[':'],{
    dataValidate: function(obj){
        var i,dataAttrs=$(obj).data()
        for (i in dataAttrs) {
                if (i.substr(0,8)=='validate') return true;
        }
        return false;
    }
}) 
```

这将允许您在普通的 jQuery 选择器中使用 :dataValidate ：

```
$(".element:dataValidate .etc") 
```

工作 JSFiddle：http: [//jsfiddle.net/rZXZ3/](http://jsfiddle.net/rZXZ3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-04T20:08:39.050

您可以遍历属性：

```
$('.element').each(function() {
  $.each(this.attributes, function(i, att){
     if(att.name.indexOf('data-validate')==0){
         console.log(att.name);
     }
  });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-04T20:19:16.897

您可以使用`filter`方法和[`dataset`](https://developer.mozilla.org/en-US/docs/DOM/element.dataset)对象：

> 允许在读取和写入模式下访问元素上设置的所有自定义数据属性 (data-*)。它是 DOMString 的映射，每个自定义数据属性都有一个条目。

```
$("input").filter(function(){
    var state = false;
    for (i in this.dataset) 
        if (i.indexOf('validate') > -1) state = true;

    return state             
})​ 
```

[http://jsfiddle.net/Pxpfa/](http://jsfiddle.net/Pxpfa/)

# delphi - 在 XE3 上安装 JVCL 3.47 的正确方法

> ID：13222344
> 
> 赞同：0
> 
> 时间：2012-11-04T20:03:23.297
> 
> 标签：delphi, delphi-xe3, jvcl, jedi-code-library

我正在尝试在 Delphi XE3 实例上安装 JVCL 3.47，但我失败了两次；我知道首先我必须安装 JCL；当我运行位于 jcl 文件夹中的 Install.bat 时，出现此错误：“Windows 找不到 '..\bin\JediInstaller.exe' ...;

我查看了 bin 文件夹，但 JediInstaller.exe 确实不存在；所以我打开了位于“..\JVCL347CompleteJCL241-Build4571\jcl\jcl\install”中的项目 JediInstaller 并编译它，然后我启动 JediInstaller 并安装了 JCL；在我尝试通过打开安装程序项目并编译它再次安装 JVCL 之后，它再次返回了一个错误，即 JCL 没有安装，我不知道怎么做，因为我已经安装了它；

当我在 Delphi Xe2、Win 7 上安装 JVCL 3.45 时，它通过打开 install.bat 工作，但现在在 Win8、Delphi XE3 上它不起作用......请有人告诉我如何正确安装 JVCL（我需要修改一个项目后天用 XE2 和 Jvcl 构建）。

提前致谢。

# c++ - C++ 运算符覆盖 w/ 来自 2 个类的参数

> ID：13222347
> 
> 赞同：1
> 
> 时间：2012-11-04T20:03:37.373
> 
> 标签：c++, class, operator-keyword, overriding

我是面向对象编程的新手，我想知道是否可以为一个类创建一个运算符，该运算符将使用这个类和另一个由我声明的参数。

我必须解决的问题是在给定点上的线性平移。所以我创建了类`Point`，`LinearTranslation`基本上我想做的是创建一个运算符

```
Point operator* (Point p, LinearTranslation l) 
```

这需要`Point p`，翻译 l 然后返回`Point`。不过，我遇到了奇怪的错误：`Point operator*(int)’ must have an argument of class or enumerated type`或者那个`LinearTranslation has not been declared`.

它甚至可能吗？

好的，我只发布一点，因为这是一种任务，所以我有 Point.h 课程

很抱歉造成混乱，但我正在尝试一切，但它对我不起作用。

```
#include "LinearTranslation.h"
class Point {
public:
    int N;
    double* coordinates;

public:
    Point(int, double*);
    virtual ~Point();
    double operator[](int a);
    //friend Point operator*(LinearTranslation l);
    friend Point translation(LinearTranslation l);
};

LinearTranslation.h

#include "Point.h"

class LinearTranslation {
private:
    int N;
    double* vector;
    double** matrix;
public:
    //friend class Point;
    LTrans(int,double*,double**);
    LTrans(int);
    virtual ~LTrans();
    void write_vector();
    void write_matrix();
    LinearTranslation operator+(const LinearTranslation&);
    friend Point& translation(LTrans l, Point p);
    //friend Point& operator* (Point p, LTrans l);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:31:17.640

在你的班级声明中：

```
//friend Point operator*(LinearTranslation l); 
```

运算符`friend`重载函数需要**两个**参数，您只需在代码中声明一个。友元函数最常见的示例是使用重载运算符*<<*，如下所示：

```
friend ostream& operator<<(ostream& output, const Point& p); 
```

请注意，此函数将输出作为其第一个参数，将点作为其第二个参数。

您的解决方法是将操作数添加到函数中

```
friend Point operator*(LinearTranslation l, const int& MULT); 
```

# regex - 正则表达式的词尾

> ID：13222351
> 
> 赞同：1
> 
> 时间：2012-11-04T20:03:58.200
> 
> 标签：regex, python-2.7

我在 python 的 RE 模块中找不到单词结尾的特殊符号...

有 \b - 一个单词的开头，而 \B - 与 \b 相对，它匹配除了 first 之外的单词的任何符号......但是为什么单词没有正好的结尾？

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:09:34.687

实际上`\b`不仅是词的开头，而且是词的结尾。

在正则表达式中，`\b`表示单词边界。`\b\w+\b`一个单词的模式也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:14:32.680

抱歉，我误读了您的问题，据我所知，没有什么可以直接匹配单词的结尾，但是您应该能够使用这样的模式，`(?<=\w)\b`这样您就可以将任何边界与前面的单词的一部分匹配，您可以进一步扩展它，比如`(?<=\w{3})\b`只匹配 3 个或更多字母的单词。

*请注意，这不会消耗任何区分单词的内容*

如果我想弄清楚正则表达式，我发现使用这些工具玩起来最容易

*   [http://re-try.appspot.com/](http://re-try.appspot.com/)
*   [http://regexpal.com/](http://regexpal.com/)

# javascript - jquery.timepicker DST 问题？

> ID：13222353
> 
> 赞同：0
> 
> 时间：2012-11-04T20:04:08.977
> 
> 标签：javascript, jquery, timezone, dst, timepicker

我正在使用 jQuery 插件[jquery.timepicker](http://jonthornton.github.com/jquery-timepicker/)

```
var dateObj = new Date("Mon, 05 Nov 2012 06:30:00 -0600");
$('#my_start_time_id').timepicker('setTime', dateObj); 
```

但是设定的时间倒退了一个小时。也就是说，时间设置`$('#my_start_time_id')`为`5.30am`而不是`6.30am`。

在今天的 DST 更改后，我看到了这个问题。您能否提供一些提示来解决此问题？

**注意**：我检查了'dateObj'的值`Mon Nov 05 2012 06:30:00 GMT-0600 (CST)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:51:51.730

这是由于 DST 过渡日 jquery.timepicker 插件中的一个错误。在这个插件中，它使用了一个名为“_baseDate”的变量，该变量设置为开始一天。_baseDate 应在 DST 过渡日进行调整（如美国时区的 2012 年 11 月 4 日）

# python - 设置属性不起作用 - 愚蠢的语法错误？

> ID：13222360
> 
> 赞同：3
> 
> 时间：2012-11-04T18:57:27.383
> 
> 标签：python, properties

我可能犯了一些基本的错误......

当我初始化并查看对象的属性时，很好。但是，如果我尝试设置它，该对象不会自行更新。我正在尝试定义一个我可以设置和获取的属性。有趣的是，这个矩形存储了两倍的宽度而不是宽度，所以 getter 和 setter 除了复制之外还有其他事情要做。

```
class Rect:
    """simple rectangle (size only) which remembers double its w,h
       as demo of properties
    """

    def __init__(self, name, w):
        self.name=name
        self.dwidth=2*w

    def dump(self):
    print "dwidth = %f"  %  (self.dwidth,)

    def _width(self):
        return self.dwidth/2.0

    def _setwidth(self,w):
        print "setting w=", w
        self.dwidth=2*w
        print "now have .dwidth=", self.dwidth

    width =property(fget=_width, fset=_setwidth) 
```

.dwidth 成员变量通常是私有的，但我想在交互式会话中轻松查看它。在 Python 命令行中，我尝试一下：

```
bash 0=> python
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from rectzzz import *
>>> a = Rect("ack", 10.0)
>>> a.dump()
dwidth = 20.000000
>>> a.width
10.0
>>> a.width=100
>>> a.width
100
>>> a.dump()
dwidth = 20.000000
>>> a.dwidth
20.0
>>> 
```

为什么 .width 似乎更新了，但 dump() 和 .dwidth 告诉的对象的实际状态没有改变？我特别困惑为什么我从来没有看到“设置 w=”后跟一个数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T20:06:24.857

```
class Rect:
    """simple rectangle (size only) which remembers double its w,h
       as demo of properties
    """ 
```

应该：

```
class Rect(object):
    """simple rectangle (size only) which remembers double its w,h
       as demo of properties
    """ 
```

在 python 2.x 中，`property`只有继承 from 才能正常工作`object`，以便获得新的样式类。默认情况下，您会获得用于向后兼容的旧式类。这已在 python 3.x 中修复。

# java - Java - 创建一个类似向导的界面

> ID：13222362
> 
> 赞同：0
> 
> 时间：2012-11-04T20:05:33.313
> 
> 标签：java, user-interface, wizard

我有一个模拟技术商店的任务。要求是有一个基于 Java 的 GUI，我决定尝试为我的应用程序编写一个类似向导的界面。问题是，我不知道从哪里开始以及要关注什么。

我看过：

*   AWT/摇摆；和
*   JavaFX；

但是我仍然很困惑，因为我以前没有编写过 GUI。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:13:54.320

在java中，学习曲线通常可以简单地了解GUI，也许最好先看看一些预先创建的GUI。如果您使用 NetBeans GUI swing GUI 构建器[http://netbeans.org/features/java/swing.html](http://netbeans.org/features/java/swing.html)构建 GUI，那么它将为 GUI 生成 Java 代码，您可以对其进行编辑并简单地学习 GUI 的方式swing 使用小部件或在 NetBeans 中制作整个 GUI。虽然我没想到后者可以接受任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:10:01.093

我会使用 Swing 模态对话框：

[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

它们非常易于使用，并且是模态的，很容易实现一系列步骤，典型的向导。

另一种可能的实现是使用 swing 选项卡式面板：

[http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/tabbedpane.html)

如果您想向用户指示组成向导的步骤数，这尤其有用。

# ruby-on-rails - 为什么在这个 assert_equal 语句中使用括号

> ID：13222364
> 
> 赞同：0
> 
> 时间：2012-11-04T20:06:18.600
> 
> 标签：ruby-on-rails, unit-testing, variable-types

在《使用 Rails 进行敏捷 Web 开发》一书中，他们正在教授如何编写测试单元用例：

```
test "product price must be positive" do
  product = Product.new(title: "By Book Title",
                        description: "yyy",
                        image_url: "zzz.jpg")
  product.price = -1
  assert product.invalid?
  assert_equal ["must be greater than or equal to 0.01"], product.errors[:price]
end 
```

关于 assert_equal 语句，为什么“必须大于...”字符串周围需要括号。我假设变量类型在这里发挥作用，但需要澄清原因。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:13:42.090

[`model.errors[:field]`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#working_with_validation_errors-errors-2)总是返回一个字符串数组，即使只有一个错误。

如果断言是在没有的情况下完成的，`[` `]`它总是错误的，因为它将一个字符串与一个数组进行比较。

```
assert_equal "must be greater than or equal to 0.01", ["must be greater than or equal to 0.01"]    
=> false

assert_equal ["must be greater than or equal to 0.01"], ["must be greater than or equal to 0.01"]   
=> true 
```

# opencv - 无法使用代码在 Windows 中构建 Opencv：块

> ID：13222367
> 
> 赞同：3
> 
> 时间：2012-11-04T20:06:27.433
> 
> 标签：opencv

按照[这个链接](http://opencv.willowgarage.com/wiki/Getting_started)。在设置我的工作站期间，我陷入了最后两个步骤。

作为编译器，我使用 Code:Block MinGW; 我已经生成了编译好的opencv文件，现在我需要在Windows中构建sln文件。我使用 Code Block 在路径 D:\OpenCV\Build\Opencv 中构建这个 OpenCV 项目文件，我将使用 Cmake 后生成的 bin 文件放在这里。

在建造过程中，它停在40%，说；

> 链接 CXX 可执行文件 ....\bin\opencv_perf_core.exe c:/codeblock/codeblocks/mingw/bin/../lib/gcc/mingw32/4.4.1/../../../../mingw32 /bin/ld.exe：警告：在命令行中未指定 --enable-auto-import 的情况下已激活自动导入。这应该可以工作，除非它涉及引用来自自动导入的 DLL 的符号的常量数据结构。无法导出_ZN12_GLOBAL__N_13ROp3allEv：找不到符号无法导出_ZN12_GLOBAL__N_17CmpType3allEv：找不到符号collect2：ld返回1退出状态mingw32-make.exe [2]：*** [bin/opencv_perf_core.exe]错误1 mingw32-make.exe [1](http://opencv.willowgarage.com/wiki/Getting_started)：*** [模块/core/CMakeFiles/opencv_perf_core.dir/all] 错误 2 mingw32-make.exe: *** [all] 错误 2 信息：通过链接解析 cv::_OutputArray 的 vtable**imp _ZTVN2cv12_OutputArrayE（自动导入）信息：通过链接到****imp** _ZTVN2cv11_InputArrayE（自动导入）来解析 cv::_InputArray 的 vtable 信息：通过链接到 **imp** _ZTVN2cv9ExceptionE（自动导入）来解析 cv::Exception 的 vtable创建库文件：. ...\bin\libopencv_perf_core.dll.a 进程以状态 2 终止（14 分 29 秒）0 个错误，3 个警告

 **我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:42:46.123

[不幸的是，根据http://code.opencv.org/issues/2523](http://code.opencv.org/issues/2523)，您无能为力。

您必须使用最新版本的 MinGW。它使用带有 GCC 4.7.2 的最新 MinGW 构建良好。

这个问题似乎已经在 OpenCV 2.4.3 中引入，因为据说 2.4.2 版构建良好。**

# java - Android 资源未找到异常

> ID：13222371
> 
> 赞同：0
> 
> 时间：2012-11-04T20:07:00.940
> 
> 标签：java, android, exception

我的应用程序代码如下，

```
public class Alarm extends MainActivity {

public String str;

public void onReceive(Context context, Intent intent) {
    //---get the CB message passed in---
    Bundle bundle = intent.getExtras();        
    SmsCbMessage[] msgs = null;
    str = "";            
    if (bundle != null)  {
        //---retrieve the SMS message received---
        Object[] pdus = (Object[]) bundle.get("pdus");
        msgs = new SmsCbMessage[pdus.length];            
        for (int i=0; i<msgs.length; i++) {
            msgs[i] = SmsCbMessage.createFromPdu((byte[])pdus[i]);                
            str += "CB " + msgs[i].getGeographicalScope() + msgs[i].getMessageCode() + msgs[i].getMessageIdentifier() + msgs[i].getUpdateNumber();                     
            str += " :";
            str += "\n";        
        }
        }
        }

EditText user_value;
Button startalarm;

@Override
 public void onCreate(Bundle savedInstanceState) 
{
 super.onCreate(savedInstanceState);
 setContentView(R.layout.third);

startalarm = (Button) findViewById(R.id.startalarm);
user_value = (EditText) findViewById(R.id.user_value);

startalarm.setOnClickListener(new View.OnClickListener() 
{

public void onClick(View arg0)
{
        // TODO Auto-generated method stub
if(user_value.length()==0)
{
    Toast.makeText(getBaseContext(), "Please enter a value.", Toast.LENGTH_LONG).show();
}

    SQLiteDatabase aa = openOrCreateDatabase("MLIdata", MODE_WORLD_READABLE, null);
    Cursor c = aa.rawQuery("SELECT CblocationName FROM MLITable WHERE CblocationCode = '"+str+"'", null);
    c.moveToFirst();
    c.getString(c.getColumnIndex("CblocationName"));
    String sas = user_value.getText().toString();
    if(sas==getString(c.getColumnIndex("CblocationName")))
    {
        //here comes the alarm code

        Toast.makeText(getBaseContext(), "till here it has executed.",     Toast.LENGTH_LONG).show();
        Notification notification = new     Notification(android.R.drawable.ic_popup_reminder,
        "My Notification", System.currentTimeMillis());
        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.defaults |= Notification.DEFAULT_VIBRATE;
    }
}

});
}
   } 
```

虽然没有错误，但当我运行此代码时，它会在我按下“startalarm”按钮时强制关闭。

我的日志猫如下，

```
11-05 01:31:03.029: W/ResourceType(1554): No package identifier when getting value for resource number 0x00000000
11-05 01:31:03.029: W/dalvikvm(1554): threadid=1: thread exiting with uncaught exception (group=0x40018578)
11-05 01:31:03.029: E/AndroidRuntime(1554): FATAL EXCEPTION: main
11-05 01:31:03.029: E/AndroidRuntime(1554): android.content.res.Resources$NotFoundException:     String resource ID #0x0
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.content.res.Resources.getText(Resources.java:201)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.content.res.Resources.getString(Resources.java:254)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.content.Context.getString(Context.java:183)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at my.project.mil.Alarm$1.onClick(Alarm.java:68)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.view.View.performClick(View.java:2485) 
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.view.View$PerformClick.run(View.java:9080)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.os.Handler.handleCallback(Handler.java:587)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.os.Looper.loop(Looper.java:130)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at android.app.ActivityThread.main(ActivityThread.java:3687)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at java.lang.reflect.Method.invokeNative(Native Method)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at java.lang.reflect.Method.invoke(Method.java:507)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
11-05 01:31:03.029: E/AndroidRuntime(1554):     at dalvik.system.NativeStart.main(Native Method) 
```

我已经尝试了以下链接中给出的所有解决方案，但没有任何帮助。

[Android，找不到字符串资源](https://stackoverflow.com/questions/6676848/android-string-resource-not-found)

需要帮助，

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:10:57.083

我不知道我的评论会解决您的异常。我会把它作为答案，这样你就可以结束这个问题了。

更改此行：

```
if(sas==getString(c.getColumnIndex("CblocationName"))) 
```

到

```
if(sas.equals(getString(c.getColumnIndex("CblocationName")))) 
```

如果您不明白为什么会这样，请阅读[字符串比较。](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)

# c++ - 连接不同长度的二进制数

> ID：13222374
> 
> 赞同：5
> 
> 时间：2012-11-04T20:07:38.790
> 
> 标签：c++, bit-manipulation

所以我有3个数字。一个是 a `char`，另外两个是`int16_t`（也称为`short`s，但根据表格我发现短裤不会可靠地为 16 位）。

我想将它们连接在一起。所以说他们的价值观是：

`10010001`

`1111111111111101`

`1001011010110101`

我想最终`long long`包含：

`1001000111111111111111011001011010110101000000000000000000000000`

使用我在网上找到的一些解决方案，我想出了这个：

```
long long result;
result = num1;
result = (result << 8) | num2;
result = (result << 24) | num3; 
```

但它不起作用；它在解码时给了我非常奇怪的数字。

如果我的解码代码有问题，这里是：

```
char num1 = num & 0xff;
int16_t num2 = num << 8 & 0xffff;
int16_t num3 = num << 24 & 0xffff; 
```

这里发生了什么？我怀疑它与 a 的大小有关`long long`，但我无法完全理解它，我希望以后有更多的数字空间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-04T21:16:10.573

要按照您的要求获得正确的位模式，您应该使用：

```
result = num1;
result = (result << 16) | num2;
result = (result << 16) | num3; 
result<<=24; 
```

这将产生您请求的确切位模式，在 lsb 端左 0 的 24 位：

```
1001000111111111111111011001011010110101000000000000000000000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:13:20.890

对于最后一个移位，您应该只移位 16，而不是 24。24 是二进制字符串的当前长度，在 num1 和 num2 的组合之后。您需要为 16 位的 num3 腾出空间，因此左移 16。

**编辑：**

刚刚意识到第一个转变也是错误的。出于类似的原因，这也应该是 16。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:13:51.533

是的，您溢出了可以长存储的值。您可以使用任意精度库来存储大数字，例如[GMP](http://gmplib.org/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T20:41:21.000

如果我正确理解你在做什么，我会使用：

```
result = num1;
result = (result << 16) | num2;
result = (result << 16) | num3;

num1out = (result >> 32) & 0xff;
num2out = (result >> 16) & 0xffff;
num3out = result & 0xffff; 
```

构建期间的左移是要插入的下一个数字的宽度。提取时的右移是在构建过程中该字段左移的总位数。

我已经测试了上面的代码。long long 对于 g++ 编译器的这项任务来说已经足够宽了，我相信还有很多其他的。

# python - Urllib2 HTTPS 截断响应

> ID：13222376
> 
> 赞同：2
> 
> 时间：2012-11-04T20:08:05.317
> 
> 标签：python, https, urllib2, urlopen

我正在尝试使用`urllib2.urlopen`（实际上，我正在使用`mechanize`，但这是`mechanize`调用的方法）获取页面当我获取页面时，我收到不完整的响应；页面被截断。但是，如果我访问页面的非 HTTPS 版本，我会得到完整的页面。

我在 Arch Linux ( `3.5.4-1-ARCH x86_64`) 上。我正在跑步`openssl 1.0.1c`。这个问题出现在我拥有的另一台 Arch Linux 机器上，但在使用 Python 3 ( `3.3.0`) 时不会出现。

这个问题似乎与[urllib2 not retrieving entire HTTP response](https://stackoverflow.com/questions/1824069/)有关。

我在唯一可以让我使用 urllib2 ( [Py I/O](http://py-ide-online.appspot.com/) ) 的在线 Python 解释器上对其进行了测试，它按预期工作。这是代码：

```
import urllib2

u = urllib2.urlopen('https://wa151.avayalive.com/WAAdminPanel/login.aspx?ReturnUrl=%2fWAAdminPanel%2fprivate%2fHome.aspx')

print u.read()[-100:] 
```

最后几行应该包含通常的`</body></html>`.

当我在我的机器上尝试`urllib.urlretrieve`时，我得到：

```
ContentTooShortError: retrieval incomplete: got only 11365 out of 13805 bytes 
```

我无法`urlretrieve`在在线解释器上进行测试，因为它不允许用户写入临时文件。晚上晚些时候，我将尝试从我的机​​器上获取 URL，但来自不同的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T20:43:33.340

我在不同的 Linux 系统上使用 Python 2.7 遇到了同样的错误：

```
>>> urllib.urlretrieve('https://wa151.avayalive.com/WAAdminPanel/login.aspx?ReturnUrl=%2fWAAdminPanel%2fprivate%2fHome.aspx')
---------------------------------------------------------------------------
ContentTooShortError                      Traceback (most recent call last)
...
ContentTooShortError: retrieval incomplete: got only 11365 out of 13805 bytes 
```

但是，可以使用以下命令完成相同的操作（并且实际上对我有用）`requests`：

```
>>> import requests
>>> r = requests.get('https://wa151.avayalive.com/WAAdminPanel/login.aspx?ReturnUrl=%2fWAAdminPanel%2fprivate%2fHome.aspx')
>>> with open(somefilepath, 'w') as f:
...     f.write(r.text) 
```

这对你有用吗？

# java - JComboBox 中项目上的鼠标事件

> ID：13222378
> 
> 赞同：2
> 
> 时间：2012-11-04T20:08:09.327
> 
> 标签：java, swing, jcombobox

我的程序能够更改组合框的选定项。但是我怎么知道项目更改是由人类鼠标单击项目本身还是由我的程序引起的。

我几乎在寻找可以添加到 JComboBox 项目而不是 JComboBox 本身的 MouseListener。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:17:23.880

JComboBox 是一个*复合*组件，强烈建议您避免使用低级侦听器，例如 MouseListener。相反，当代码选择一个项目时，为什么不禁用选择侦听器（也许您正在使用 ActionListener），然后在选择完成后重新启用它。因此，您将知道 ActionListener 的任何活动都来自用户的选择。您可以通过删除和重新添加侦听器来禁用和启用侦听器，或者使用允许侦听器仅在布尔值为真时做出反应的布尔变量。

# javascript - 保存导航历史

> ID：13222379
> 
> 赞同：0
> 
> 时间：2012-11-04T20:08:09.617
> 
> 标签：javascript, ajax, d3.js, history.js

我有一个非常大的问题...我使用 ajax 技术和 d3 js 库制作了一个网站。在实践中，我只有一个 html 页面，并且使用 javascript、d3、ajax 和 java servlet，我每次点击都会替换页面的内容。现在，让我说我也被迫工作，如果不是为了我，我永远不会这样做。

问题是，如果我在导航的某个点决定刷新页面或返回（使用浏览器上的按钮），我会返回主页。我能怎么做？

非常感谢！我希望我解释并为糟糕的英语道歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:32:29.577

正如 Marty 已经建议的那样，History.js 非常适合这一点。

或者，看看这个线程：[https ://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin](https://stackoverflow.com/questions/116446/what-is-the-best-back-button-jquery-plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:09:26.563

Amplify js 有一个存储机制，也可以用于此，但需要更少布线/编码的最佳解决方案是历史 js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T10:31:52.770

最后我没有使用图书馆。我使用了 javascript 事件监听器

```
window.addEventListener("hashchange", funcRef, false);
window.addEventListener("load", funcRef, true); 
```

在函数 funcRef 我有这个代码：

```
if (location.hash === "#login") {
    ShowLoginForm();
}
if (location.hash === "#home") {
    showLayoutHome();
} 
```

ecc .... 它的工作原理！:)

# android - 如何将 ProgressBar 更新为自定义 ListActivity 项

> ID：13222381
> 
> 赞同：0
> 
> 时间：2012-11-04T20:08:11.950
> 
> 标签：android

我尝试做一个视图来显示多个文件下载。ProgressDialog 非常适合显示单个文件下载信息，但我认为它不能用作 ListView 的元素或以某种方式设置多个文件指示（或者可以吗？）

所以我实现了自己的适配器，如一些指南中所示[，](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)它工作正常，我可以添加下载项目（名称为 TextView + ProgressBar，最大设置为文件大小），但是如何在某些列表项中更新 ProgressBar？

**如果这是一种不好的做法，哪种方式最好显示多个文件的下载进度？**

**下载项目.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/download_label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ProgressBar
    android:id="@+id/download_bar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/download_label" />
</RelativeLayout> 
```

**下载类**

```
public class Download 
{
  public String name;
  public int size;

  public Download(String name, int size)
  {
    this.name = name;
    this.size = size;
  }
} 
```

**下载适配器类**

```
 import android.content.Context;
 import android.util.Log;
 import android.view.LayoutInflater;
 import android.view.View;
 import android.view.ViewGroup;
 import android.widget.ArrayAdapter;
 import android.widget.ProgressBar;
 import android.widget.TextView;

 public class DownloadsAdapter extends ArrayAdapter<Download>
 {
   private int layoutResourceId;
   public DownloadsAdapter(Context context, int textViewResourceId)
   {
    super(context, textViewResourceId);
    this.layoutResourceId = textViewResourceId;
   }

   @Override
   public View getView(int position, View convertView, ViewGroup parent)
   {
     DownloadHolder downloadHolder = null;
         if(convertView == null)
         {
            LayoutInflater inflater = (LayoutInflater) super.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(layoutResourceId, parent, false);
            downloadHolder = new DownloadHolder();
            downloadHolder.progressBar = (ProgressBar)convertView.findViewById(R.id.download_bar);
            downloadHolder.label = (TextView)convertView.findViewById(R.id.download_label);
            Log.i("INFO", "HOLDER SET");
            convertView.setTag(downloadHolder);
         }
         else
         {
            downloadHolder = (DownloadHolder)convertView.getTag();
         }

        Download download = super.getItem(position);
        downloadHolder.label.setText(download.name);
        downloadHolder.progressBar.setIndeterminate(false);
        downloadHolder.progressBar.setMax(download.size);
        return convertView;
    }

public static class DownloadHolder
{
    ProgressBar progressBar;
    TextView label;
}

   } 
```

**下载查看类**

```
import android.app.ListActivity;
import android.os.Bundle;

public class DownloadsView extends ListActivity
{
   public static DownloadsAdapter DOWNLOADS = null;

@Override
    protected void onCreate(Bundle savedInstanceState)
   {
      super.onCreate(savedInstanceState);
      DOWNLOADS = new DownloadsAdapter(this, R.layout.download_item);
      setListAdapter(DOWNLOADS);
      //TEST
      /*
      DownloadsView.addDownload("Lol", 232);
      DownloadsView.addDownload("fsfs", 123);
     */ 
 }

    public static void addDownload(String name, int size)
    {   
      DOWNLOADS.add(new Download(name, size));
    }  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:52:31.717

好的，这就去...

```
package com.skype.transfer;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Vector;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.TextView;

import com.skype.api.Transfer;
import com.skype.ref.R;

/*****
 * This class is in charge of displaying ongoing transfers in a ListView
 * <p>
 * The methods of relevance are {@link #getItem()}, {@link #getCount()} and
 * {@link #getView()}.
 * 
 * @author Aleksandar Milenkovic
 */
public class TransferArrayAdapter extends ArrayAdapter<Transfer>
{
    private ArrayList<Transfer> values      = null;
    private Vector<Boolean>     selectedStates;
    private Context             context;

    private ImageView           transferType;
    private TextView            filename;
    private ProgressBar         progress;
    private TextView            details;

    private static final String ASSETS_DIR  = "images/";
    private static final String LOGTAG      = "TransferArrayAdapter";

    /**
     * The default constructor which is invoked to create the current transfers'
     * array adapter
     * 
     * @param context
     *            the application context
     * @param textViewResourceId
     *            The resource ID for a layout file containing a TextView to use
     *            when instantiating views.
     * @param objects
     *            the backing array populated by Buddy objects to be displayed.
     * @see {@link ArrayAdapter}<T>
     */
    public TransferArrayAdapter(Context context, int textViewResourceId, ArrayList<Transfer> objects)
    {
        super(context, textViewResourceId, objects);
        this.context = context;
        this.values = objects;
        //      selectedStates = new Vector<Boolean>();
        //      clearSelectedState();
    }

    /**
     * How many items are in the data set represented by this Adapter.
     * 
     * @return the trimmed size of the backing array.
     */
    @Override
    public int getCount()
    {
        this.values.trimToSize();
        return this.values.size();
    }

    /**
     * Get the data item associated with the specified position in the data set.
     * 
     * @param index
     *            Position of the item whose data we want within the adapter's
     *            data set.
     * @return the Transfer item at the indicated position in the backing array
     */
    @Override
    public Transfer getItem(int index)
    {
        if (index <= getCount())    //IndexOutOfBoundsException fix
            return this.values.get(index);
        return this.values.get(values.size());
    }

    /**
     * This method is used to generate views to be used in the ListView. This
     * the method that defines how data will look and be represented throughout
     * the UI.
     * 
     * @param position
     *            The position of the item that is being placed / The position
     *            of the item within the adapter's data set of the item whose
     *            view we want.
     *            <p>
     * @param convertView
     *            The old view to reuse, if possible. Note: You should check
     *            that this view is non-null and of an appropriate type before
     *            using. If it is not possible to convert this view to display
     *            the correct data, this method can create a new view.
     *            Heterogeneous lists can specify their number of view types, so
     *            that this View is always of the right type (see
     *            getViewTypeCount() and getItemViewType(int))
     *            <p>
     * @param parent
     *            The parent that this view will eventually be attached to
     * @return the view that defines how this Buddy object is represented in the
     *         ListView / A View corresponding to the data at the specified
     *         position.
     * 
     * @see {@link BaseAdapter#getView(int, View, ViewGroup)}
     */
    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        View row = convertView;

        if (row == null)
        {
            LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(R.layout.transfer_item, parent, false);
            //          row.setTag(convertView);
        }

        Transfer file = getItem(position);
        //      Log.d(LOGTAG, "getView(): file at position "+position+"= "+file);
        if (file == null) return row;

        transferType = (ImageView) row.findViewById(R.id.transfer_type);
        filename = (TextView) row.findViewById(R.id.transfer_filename);
        progress = (ProgressBar) row.findViewById(R.id.transfer_progress);
        details = (TextView) row.findViewById(R.id.transfer_details);

        //filename, progress, details
        filename.setText(FileUtils.getFilenameFor(file));
        progress.setProgress(FileUtils.getProgressFor(file));

        switch (FileUtils.getStatusFor(file))
        {
            case PAUSED:
                details.setText("Paused");
                break;

            case WAITING_FOR_ACCEPT:
                details.setText("Waiting...");
                break;

            case CANCELLED:
            case CANCELLED_BY_REMOTE:
                details.setText("Canceled");
                break;

            default:
                details.setText(FileUtils.getTransferInfo(file));
                break;
        }

        //image stuff
        String imgFilePath = ASSETS_DIR;
        switch (FileUtils.getTransferTypeFor(file))
        {
            case INCOMING:
                imgFilePath += "incoming_file.png";
                break;

            case OUTGOING:
                imgFilePath += "outcoming_file.png";
                break;
        }

        try
        {
            Bitmap bitmap = BitmapFactory.decodeStream(this.context.getResources().getAssets().open(imgFilePath));
            transferType.setImageBitmap(bitmap);
        } catch (IOException e)
        {
            Log.e(LOGTAG + "Exception", e.getMessage());
            e.printStackTrace();
            Log.e(LOGTAG, "Error while setting " + FileUtils.getFilenameFor(file) + " type icon to: " + imgFilePath);
        }

        return row;
    }

    /**
     * This method is used to clear all selection states on the view's children.
     */
    public void clearSelectedState()
    {
        selectedStates.clear();
        for (int i = 0; i <= getCount(); i++)
        {
            selectedStates.add(Boolean.valueOf(false));
        }
    }

    /**
     * This method is used to make a certain position 'selected'.
     * <p>
     * After setting selection, notifyDataSetChanged() will be called.
     * 
     * @param position
     *            the position to select
     */
    public void setSelectedState(int position)
    {
        //clear selected state vector
        clearSelectedState();
        //set selected position
        selectedStates.set(position, Boolean.valueOf(true));
        //refresh adapter to redraw focus
        notifyDataSetChanged();
    }

    /**
     * Method to use to update a Transfer's UI
     * 
     * @param file
     *            file to display
     * @param overRelay
     *            is the transfer going over a relay
     */
    public void updateTransfer(Transfer file, boolean overRelay)
    {
        //TODO: use overRelay to indicate slower transfer

        int index = values.indexOf(file);

        if (index < 0)
        {
            notifyDataSetChanged();
            return;
        }

        getView(index, null, null).postInvalidate();
        notifyDataSetChanged();
    }

} 
```

FileUtils 将与您的文件不兼容，因此我将其实现留给您。但它将转移映射到发送它们的联系人。它只是一个实用的 hashmap 助手类 :)

继承人的XML

传入文件.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="500dp"
    android:layout_height="200dp" >

    <TextView
        android:id="@+id/incoming_files_subtitle1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dp"
        android:text="@string/incoming_file" />

    <TextView
        android:id="@+id/incoming_files_detail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/incoming_files_subtitle1"
        android:layout_marginLeft="5dp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/incoming_files_subtitle2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/incoming_files_detail"
        android:layout_marginTop="20dp"
        android:layout_marginLeft="5dp"
        android:text="@string/saved_at" />

    <EditText
        android:id="@+id/incoming_files_path"
        android:layout_width="400dp"
        android:layout_height="wrap_content"
        android:layout_below="@+id/incoming_files_subtitle2"
        android:inputType="textUri" />

    <Button
        android:id="@+id/incoming_files_browse"
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/incoming_files_path"
        android:layout_toRightOf="@+id/incoming_files_path"
        android:text="@string/browse" />

    <Button
        android:id="@+id/incoming_files_accept"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginTop="2dp"
        android:text="@string/accept" />

    <Button
        android:id="@+id/incoming_files_cancel"
        android:layout_width="250dp"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginTop="2dp"
        android:text="@string/cancel" />

</RelativeLayout> 
```

transfer_dialog.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout 
        android:id="@+id/transfer_button_holder"
        android:orientation="horizontal"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="10dp" >

    <Button 
        android:id="@+id/btn_transfer_incoming"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/incoming"/>

    <Button 
        android:id="@+id/btn_transfer_outgoing"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/outgoing"/>

    <Button 
        android:id="@+id/btn_transfer_finished"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/finished"/>

    <Button 
        android:id="@+id/btn_transfer_all"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/view_all"/>

    </LinearLayout>

    <ListView
        android:id="@+id/transfer_list"
        android:layout_width="fill_parent"
        android:layout_height="650dp"
        android:choiceMode="singleChoice"
        android:layout_below="@+id/transfer_button_holder"
        android:listSelector="@drawable/selector_list" />

    <Button
        android:id="@+id/btn_cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="20dp"
        android:text="@string/cancel" />

</RelativeLayout> 
```

transfer_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/transfer_type"
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:layout_gravity="left|center_vertical"
        android:layout_margin="5dp" />

    <TextView
        android:id="@+id/transfer_filename"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/transfer_type"
        android:layout_alignParentTop="true"
        android:gravity="center_horizontal"
        android:text="@string/empty_string" />

    <ProgressBar
        android:id="@+id/transfer_progress"
        style="?android:attr/progressBarStyleHorizontal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/transfer_filename"
        android:layout_toRightOf="@+id/transfer_type"
        android:max="100" />

    <TextView
        android:id="@+id/transfer_details"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/transfer_progress"
        android:layout_toRightOf="@+id/transfer_type"
        android:layout_alignParentBottom="true"
        android:text="@string/empty_string" />

</RelativeLayout> 
```

传输对话代码，需要适配：

```
private void showTransfersDialog()
    {
        transferDialog = new Dialog(context);
        transferDialog.setContentView(R.layout.transfer_dialog);

        transferDialog.setTitle(R.string.transfer_manager);
        transferDialog.setCancelable(true);

        //set up buttons
        Button btnQuit = (Button) transferDialog.findViewById(R.id.btn_cancel);
        Button btnShowIncoming = (Button) transferDialog.findViewById(R.id.btn_transfer_incoming);
        Button btnShowOutgoing = (Button) transferDialog.findViewById(R.id.btn_transfer_outgoing);
        Button btnShowFinished = (Button) transferDialog.findViewById(R.id.btn_transfer_finished);
        Button btnShowAll = (Button) transferDialog.findViewById(R.id.btn_transfer_all);

        transferList = (ListView) transferDialog.findViewById(R.id.transfer_list);
        registerForContextMenu(transferList);
        transferList.setOnItemClickListener(new ListView.OnItemClickListener()
        {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id)
            {
                showTransferFileDialog(transferAdapter.getItem(position));
            }
        });
        transferAdapter = new TransferArrayAdapter(SkypeKitVideoDemo.this, android.R.layout.simple_list_item_1,
                FileUtils.getAllTransfersAsList());

        Log.d(LOGTAG, "transferAdapter = " + transferAdapter);

        Log.d(LOGTAG, "setting adapter to transfers = " + transferList);
        transferList.setAdapter(transferAdapter);

        btnQuit.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                transferDialog.dismiss();
                transferDialog = null;
                transferList = null;
            }
        });

        btnShowAll.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                transferAdapter = new TransferArrayAdapter(SkypeKitVideoDemo.this, android.R.layout.simple_list_item_1, FileUtils
                        .getAllTransfersAsList());
                transferList.setAdapter(transferAdapter);
            }
        });

        btnShowIncoming.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                transferAdapter = new TransferArrayAdapter(SkypeKitVideoDemo.this, android.R.layout.simple_list_item_1, FileUtils
                        .getAllTransfersOfTypeAsList(Transfer.Type.INCOMING));
                transferList.setAdapter(transferAdapter);
            }
        });

        btnShowOutgoing.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                transferAdapter = new TransferArrayAdapter(SkypeKitVideoDemo.this, android.R.layout.simple_list_item_1, FileUtils
                        .getAllTransfersOfTypeAsList(Transfer.Type.OUTGOING));
                transferList.setAdapter(transferAdapter);
            }
        });

        btnShowFinished.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                transferAdapter = new TransferArrayAdapter(SkypeKitVideoDemo.this, android.R.layout.simple_list_item_1, FileUtils
                        .getAllFinishedTransfers());
                transferList.setAdapter(transferAdapter);
            }
        });

        //now that the dialog is set up, it's time to show it    
        transferDialog.show();

        return;
    } 
```

传入文件对话框：

```
private void showIncomingFileDialog(final Conversation convo, final Transfer[] transfers, final int index)
    {
        incomingFileDialog = new Dialog(context);
        incomingFileDialog.setContentView(R.layout.incoming_file);

        if (index >= transfers.length) return;  //sanity check

        String sender = transfers[index].getPartnerHandle();
        String filename = transfers[index].getFileName();

        incomingFileDialog.setTitle("INCOMING FILES(" + (index + 1) + " / " + transfers.length + ") FROM " + sender);
        incomingFileDialog.setCancelable(false);

        //set up controls
        TextView detail = (TextView) incomingFileDialog.findViewById(R.id.incoming_files_detail);
        final EditText pathToFile = (EditText) incomingFileDialog.findViewById(R.id.incoming_files_path);
        Button btnBrowse = (Button) incomingFileDialog.findViewById(R.id.incoming_files_browse);
        Button btnAccept = (Button) incomingFileDialog.findViewById(R.id.incoming_files_accept);
        Button btnCancel = (Button) incomingFileDialog.findViewById(R.id.incoming_files_cancel);
        pathToFile.setText(savingPath + filename);

        detail.setText(filename + "\t- " + FileUtils.getFilesizeFrom(transfers[index]));

        btnAccept.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View arg0)
            {
                float size = Float.parseFloat(transfers[index].getFileSize());

                if (size < getAvailableFreeSpace())
                {
                    transfers[index].accept(pathToFile.getText().toString());
                    FileUtils.addTransferFrom(convo, transfers[index]);
                } else
                    showFileTooBigDialog(convo, transfers[index], pathToFile.getText().toString());

                if (index == transfers.length - 1)
                {
                    incomingFileDialog.dismiss();
                } else
                {
                    incomingFileDialog.dismiss();
                    showIncomingFileDialog(convo, transfers, index + 1);
                }

            }
        });

        btnCancel.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                transfers[index].cancel();
                if (index == transfers.length - 1)
                {
                    incomingFileDialog.dismiss();
                } else
                {
                    incomingFileDialog.dismiss();
                    showIncomingFileDialog(convo, transfers, index + 1);
                }

            }
        });

        btnBrowse.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                showFolderPicker(convo, transfers, index);
                incomingFileDialog.dismiss();
            }
        });

        //now that the dialog is set up, it's time to show it    
        incomingFileDialog.show();

        return;
    } 
```

这些依赖于 FileUtils，但通过一些努力，您可以将 Conversation 换成 String 并将 Transfer out 换成文件或某种包装器:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:14:37.240

您不能只更新 in 中的一个`ListView`项目`Android`。您应该只更新`Adapter`正在显示的数据并调用`notifyDataSetChanged()`您的`Adapter`.

# regex - 带有约束的 Rails 自定义路由 - 路由要求中不允许使用正则表达式锚字符

> ID：13222382
> 
> 赞同：14
> 
> 时间：2012-11-04T20:08:24.733
> 
> 标签：regex, ruby-on-rails-3, routes, syntax-error

我有以下路线：

```
 get 'users/:user_id/:name', to: 'profiles#show',
    :constraints => { :name => /[a-zA-Z0-9_]+$/ }, as: 'user_profile' 
```

这会产生错误：

```
Regexp anchor characters are not allowed in routing requirements: /[a-zA-Z0-9_]+$/ 
```

所以我知道 ^ 字符是不允许的，但不确定是什么字符产生了这个特定的路由错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T12:23:48.777

正则表达式锚是`^`and `$`，但它们在这里没有任何作用。[“（Y）你不需要使用锚点，因为所有路线都在开始时锚定。”](http://guides.rubyonrails.org/routing.html#segment-constraints) .

所以约束：

```
:constraints => { :name => /[a-zA-Z0-9_]+/ } 
```

会做你想做的 - 确保名称由 1 个或多个这些字符组成，仅此而已。顺便说一句，您可以简化正则表达式：

```
:constraints => { :name => /\w+/ } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-04T20:14:46.387

在正则表达式中，我们有两个锚点：

1.  行/字符串的开头`^`
2.  行尾/字符串`$`

* * *

尝试`$`从模式中删除，你应该很高兴......

# c++ - 为什么具有 1 个元素的数组允许 2k 个元素？

> ID：13222385
> 
> 赞同：0
> 
> 时间：2012-11-04T20:08:40.800
> 
> 标签：c++, arrays, pointers, char

> **可能重复：**
> [为什么我没有收到“分段错误”？](https://stackoverflow.com/questions/13221251/why-dont-i-get-segmentation-fault)

为什么这段代码有效？如果第一个元素只包含第一个字符，那么其余字符存储在哪里？如果这是可能的，我们为什么不使用这种方法呢？

注意第 11 行：静态字符 c[1]。使用一个元素，您可以存储任意数量的字符。当稍后指向它时，我使用静态来使内存位置在函数之外保持活动状态。

```
#include <stdio.h>

void PutString( const char* pChar ){
   for( ; *pChar != 0; pChar++ )
   {
      putchar( *pChar );
   }
}

char* GetString(){
    static char c[1];
    int i = 0;
    do
    {
        c[i] = getchar();
    }while( c[i++] != '\n' );
    c[i] = '\0';
    return c;
}

void main(){
    PutString( "Enter some text: " );
    char* pChar = GetString();
    PutString( "You typed the following:\n" );
    PutString( pChar );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:15:52.463

C 不检查数组边界，因此不会引发错误。但是，第一个字符之后的字符将存储在程序**未分配**的内存中。如果字符串很短，这可能会起作用，但足够长的字符串会损坏足够的内存以使进程崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T20:16:24.433

你*可以*随心所欲地写：

```
char *bad = 0xABCDEF00;
bad[0] = 'A'; 
```

但你*不应该*。谁知道上面几行代码会做什么？在最好的情况下，你的程序会崩溃。在最坏的情况下，你已经损坏了内存，直到很久以后才会发现。（祝你好运追踪源头！）

要回答您的具体问题，它“不起作用”。其余字符直接存储在数组之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:17:25.767

您只是非常（不）幸运，您没有覆盖其他一些数据结构。数组绝对**不能**存储你想要的尽可能多的字符——迟早你要么默默地破坏你的内存（在最坏的情况下），要么通过访问你的进程没有映射的内存来遇到段错误。它起作用的事实可能是因为编译器没有在您的`c[1]`. 只需尝试添加第二个数组，比如说`static char d[1];`在 之后`c`，然后尝试从中读取 - 你会看到 . 中的第二个字符`c`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T20:18:07.787

C++ 不对数组进行边界检查。这是出于性能原因；检查每个数组索引以查看它是否超出范围会导致不可接受的运行时开销。避免开销一直是 C++ 的设计目标。

如果你想要边界检查，你应该使用`std::vector`它，它确实通过`std::vector::at()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-04T20:18:51.313

在这种情况下，行为是未定义的：根据编译器/内存的当前状态/ ...，它可能看起来运行良好，它可能会写入损坏的字符，或者它可能由于一个错误而崩溃。

链接[Electric Fence](http://en.wikipedia.org/wiki/Electric_Fence)或在[valgrind](http://valgrind.org/)中运行可能有助于在运行时发现此类错误。

# python - 使用 Visual Studio 2012 编译 pythonnet (.NET) 以运行 Enthought Python Distribution (Canopy)

> ID：13222393
> 
> 赞同：2
> 
> 时间：2012-11-04T20:10:13.317
> 
> 标签：python, .net, visual-studio, clr, python.net

我已经使用 VS2012 构建了 pythonet (python for .NET)。如果我只使用普通的 python，一切都很好。但是，一旦我尝试导入一些“较重”的 Python 模块，例如 numpy 或 scipy，就会出现运行时错误。

Enthought 提供了快速响应和有用的信息；引用环保署的支持回应：

> 问题的根源在于 EPD 库是针对 VS2008 编译的，并且它们是使用用 VS2012 编译的 Python 加载的。由于 EPD dll 没有在其清单文件中说明编译器（并且有些没有清单），因此假定依赖于 VS2012。这会导致“尝试错误地加载 C 运行时库”。

我想知道的是我是否可以使用 VS2012 构建 pythonnet，使其表现得好像是“针对 VS2008 构建的”？

# c# - 无需冻结gui的简单任务

> ID：13222394
> 
> 赞同：0
> 
> 时间：2012-11-04T20:10:22.707
> 
> 标签：c#, multithreading, backgroundworker, dispatcher

我遇到了一个小问题。我有两个线程，一个执行一个循环，每次都需要向 GUI 的线程返回/发送一个数字。为此，我使用**BackGroundWorker**和**ReportProgress**。

让我们这样说：

我有一个**BackGroundWorker**执行（DoWork）一个简单的循环，从 0 计数到任何值。循环的每个条目我都使用 ReportProgress 事件将计数器发送到 GUI 线程，该线程将打印计数器的值。

```
 void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        int count = 0;
        BackgroundWorker Worker = (BackgroundWorker)sender;

        while (count < 10000000)
        {
            Worker.ReportProgress(count);
            count++;
        }
    }

    void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        txt.Text = e.ProgressPercentage.ToString();
    } 
```

现在，这个选项冻结了 GUI。

我知道 ReportProgress 在创建**BackGroundWorker**的线程上调用 ProgressChange 处理程序，所以我认为循环执行得如此之快，因此 GUI 的线程没有成功按要求打印值。

在不冻结 GUI 的情况下，我可以做些什么来执行这样的任务？

我听说过 Dispatcher，但我不确定它的用途。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:16:47.273

问题是每次发生变化时您都在调用 reportProgress。只有在“需要”报告进度时才应该调用它。请参阅 MSDN [http://msdn.microsoft.com/en-us/library/ka89zff4.aspx](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)。将您的工作更改为以下内容：

```
 while (count < 10000000)
    {
        if ((count % 1000) == 0)
            Worker.ReportProgress(count);
        count++;
    } 
```

这将在每处理 1000 个项目后调用 ReportProgress，因此不会给您的 GUI 线程带来不必要的负载

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T10:09:49.933

您的示例代码试图以比 GUI 处理更新通知消息的速度快得多的速度更新 GUI，因此用 gunge 淹没 GUI Windows 消息队列并阻止它处理其他消息 - GUI 冻结。

在非 GUI 线程中监视高速操作的进度是少数情况下轮询是更好的解决方案之一。使用 Forms.Timer 事件读取并显示“currentProgress”值，该值可能由线程的方法返回。500ms 是一个合理的计时器值——人类用户无法以比这快得多的速度跟上编辑/文本框中不断变化的整数值。

'理想情况下'， currentProgress 值的读/写应该被锁定，也许使用原子操作，但如果你只是每 500 毫秒读取一个 int，你可能甚至不需要它，如果'真正的'功能该线程意味着进度计数不太可能连续缓存在寄存器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:19:04.137

***在不冻结 GUID 的情况下，我可以做些什么来执行这样的任务？***：

使用调度程序让我假设您正在使用 WPF，无论如何，它会是：

```
void worker_DoWork(object sender, DoWorkEventArgs e)
{
    int count = 0;
    BackgroundWorker Worker = (BackgroundWorker)sender;

    while (count < 10000000)
    {
        Worker.ReportProgress(count);
        count++;
    }
}

void worker_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    Dispatcher.BeginInvoke((Action)(() => { txt.Text = e.ProgressPercentage.ToString(); }));
} 
```

调用 Dispatcher.BeginInvoke 会导致给定的 Action 在 UI 线程上实际执行，确保不会因 UI 线程访问 UI 元素之外的线程的原因而引发异常。

[此外，您可以尝试这样做，作为使用任务](http://pastebin.com/GZRK9H6G)的替代方法。

# java - 如何在Java中将长计算字符串分成可用的计算

> ID：13222399
> 
> 赞同：1
> 
> 时间：2012-11-04T20:11:04.703
> 
> 标签：java, math, calculator

> **可能重复：**
> [评估以字符串形式给出的数学表达式](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)

抱歉，标题很长（而且也有点奇怪:)），我想不出更好的标题，但这里有。

我一直在用 Java 制作一个计算器，`JFrame`它`JButtons`就像一个真正的计算器一样。当您单击按钮时，计算将显示在`TextArea`. 当按下“等于”按钮时，整个计算都是从`TextArea`和计算出来的。我遇到的问题是如何实际计算答案。这听起来可能有点奇怪，但是说我得到的计算是`36+45/22`. 我如何将数字写入变量，然后告诉计算机要对变量执行哪些操作，以及以什么顺序执行。这可以用无限数量的变量来完成吗？有没有办法做到这一点？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:17:23.353

你可以使用`ScriptEngine`：

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");
System.out.println("result = " + engine.eval("36+45/22")); 
```

另一种选择是[Jep](http://www.singularsys.com/jep/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:16:45.217

试试这个，我使用类似的实现。效果很好。:-D

[在java中评估表达式](https://stackoverflow.com/a/3423360/1423083)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:34:03.223

如果您想自己评估表达式而不依赖外部 API（如 ScriptEngine），则必须先*解析*表达式。此解析为您提供了表达式的内存表示，然后您可以对其进行评估。

处理算术表达式的常用方法是*递归下降解析器*。这种解析器有一个很好的特性，它在解析方法中就地评估解析的表达式。可以在[http://www.savarese.org/articles/1998-2006/2001-05-Recursive_Descent_Parsing/](http://www.savarese.org/articles/1998-2006/2001-05-Recursive_Descent_Parsing/)找到不依赖于计算机科学的*形式语言理论的递归下降解析器的示例*

# java - 删除了 Switch 语句以解决错误并且错误仍然存 在。

> ID：13222401
> 
> 赞同：0
> 
> 时间：2012-11-04T20:11:17.973
> 
> 标签：java, compiler-errors, switch-statement

这是我的问题。我从这个方法中删除了 switch 语句，因为我必须改变它以适应多个变量，而 switch 语句只允许 char 常量。如果没有 Java 版本 7，则无法将字符串用于变量。因此，我所做的更改为通常的 if/else 语句。但是在尝试运行程序时，我仍然在 switch 语句中遇到错误，如下所示：

有任何想法吗？如果希望我包含来自测试人员的代码，我可以问。

> java.lang.Error：未解决的编译问题：无法为低于 1.7 的源级别打开 String 类型的值。只允许可转换的 int 值或枚举变量
> 
> 在 Project2.PostfixEvaluator.calculate(PostfixEvaluator.java:124) 在 Project2.PostfixEvaluator.eval(PostfixEvaluator.java:71) 在 Project2.ExpressionEvaluator.evaluate(ExpressionEvaluator.java:29) 在 Project2.ExpressionEvaluatorTester.main(ExpressionEvaluatorTester.java: 32)

```
public Token calculate(Token opr, Token opd1, Token opd2)
    {
        // Get the first String from opr, it is the operator: +, -, ...
        String oper = opr.getBody();

        System.out.println(opr);

        //Get the two operands by converting from String to int
        int op1 = Integer.parseInt(opd1.getBody());
        int op2 = Integer.parseInt(opd2.getBody());

        //Default return value, in case an error occurs
        int res = 0;

        /**
         * Alterations begin here
         * Performs operation and sets value for res
         */

           if(oper.equals("+")) 
           {
               res = op1+op2;
           }
           else if(oper.equals("-"))
           {
               res = op1-op2;  
           }
           else if(oper.equals("*")){
               res = op1*op2;
           }
           else if(oper.equals("/") && op2 != 0){
               res = op1/op2;
           }
           else if(oper.equals("/") && op2 == 0){
               System.out.println("Division by zero error in"+
                 " PostfixEvaluator.calculate().");
           }
           else if(oper.equals("%") && op2 != 0){
                res = op1%op2;
           }
           else if(oper.equals("%") && op2 == 0){
                System.out.println("Division by zero error in"+
                 " PostfixEvaluator.calculate().");
           }
           else if(oper.equals("<") && (op1 < op2)){
                res = 1;
           }
           else if(oper.equals("<") && (op1 >= op2)){
                res = 0;
           }
           else if(oper.equals("<=") && (op1 <= op2)){
                res = 1;
           }
           else if(oper.equals("<=") && (op1 > op2)){
                res = 0;
           }
           else if(oper.equals(">") && (op1 > op2)){
                res = 1;
           }
           else if(oper.equals(">") && (op1 <= op2)){
                res = 0;
           }
           else if(oper.equals(">=") && (op1 >= op2)){
                res = 1;
           }
           else if(oper.equals(">=") && (op1 < op2)){
                res = 0;
           }
           else if(oper.equals("==") && (op1 == op2)){
                res = 1;
           }
           else if(oper.equals("==") && (op1 != op2)){
                res = 0;
           }
           else if(oper.equals("!=") && (op1 != op2)){
                res = 1;
           }
           else if(oper.equals("!=") && (op1 == op2)){
                res = 0;
           }
           else if(oper.equals("||") && true){
                res = 1;
           }
           else if(oper.equals("&&")&& true){
                res = 1;
           }
           else
               res = 0;

        //Convert res into a Token and return it.
        return new Token(""+res);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T20:13:11.987

由于这不是编译器错误，而是运行时错误，这意味着您更改了源代码，但无法重新编译它，或者至少无法运行重新编译的代码。

该错误肯定与`switch`源代码中的语句有关，但您已将其从源代码文件中删除。因此，您必须加载旧版本的 .class 文件。检查是否激活了“*自动构建*”选项和/或执行完整的项目清理 + 重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:26:41.453

执行干净的构建，然后运行您的程序：

**干净的：** `Menu --> Project --> clean`

**建造：** `Menu --> Project --> Build Automatically`

或者 `Menu --> Project -->Build All which is same as: ctrl+B`

**跑：** `Right Click(Your PostfixEvaluator.java) -> Run As -> Java Application`

# joomla - 如何添加第 3 方点击代码

> ID：13222402
> 
> 赞同：1
> 
> 时间：2012-11-04T20:11:34.863
> 
> 标签：joomla, click, change-tracking

我的客户向我提供了跟踪代码，用于跟踪我放置在我的 joomla 网站上的页面外观设计的印象和点击。我已将此代码添加到显示图形的模块中，但客户端报告未发生跟踪。我可以在代码中看到一个时间戳标记，但不确定它是如何真正起作用的。

```
 //To track Impressions use the following URL:
http://bs.serving-sys.com/example/adServer.bs?cn=tf&c=19&mc=i4p&pli=5460041&PluID=0&ord=[timestamp]&rtu=-1

//To track Clicks use the following URL:
//Note: Please ensure that you implement a click tracking URL only in the clicks location in your ad server, 
//and an impression tracking URL only in the impression tracking location.
//Incorrect implementation of these URLs will result in major billing and reporting discrepancies.
http://bs.serving-sys.com/example/adServer.bs?cn=tf&4=20&mc=click&pli=5460041&PluID=0&ord=[timestamp] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:05:59.633

您可以使用 获取当前时间戳`<?php echo time(); ?>`。因此，如果您的跟踪代码工作正常，您应该能够在替换 [timestamp] 后跟踪这些点击。

例子：

```
<a href="http://bs.serving-sys.com/example/adServer.bs?cn=tf&4=20&mc=click&pli=5460041&PluID=0&ord=[timestamp]" /> 
```

来到

```
<a href="http://bs.serving-sys.com/example/adServer.bs?cn=tf&4=20&mc=click&pli=5460041&PluID=0&ord=<?php echo time(); ?>" /> 
```

# ruby-on-rails - 如何在 Windows 7 上设置 spork-rails？

> ID：13222403
> 
> 赞同：0
> 
> 时间：2012-11-04T20:11:35.887
> 
> 标签：ruby-on-rails, spork

我正在阅读 Rails 教程，我的测试需要很长时间，所以我想实现 spork。

由于 spork 显然不再适用于导轨，因此我必须改为使用 spork-rails。我更新了我的 gem 文件以包含 spork-rails 并且每次我尝试运行`pork rspec --bootstrap`命令提示符时都会显示 s `'spork' is not a recognized internal command`。

我查看了 spork github 页面，它支持 Windows，但我不知道 spork-rails 是否也支持。有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T07:18:25.527

为了让命令在 Windows 上执行，您应该键入：`**bundle exec spork rspec --bootstrap**`.

# methods - # 未定义的方法`current_page' 上成

> ID：13222406
> 
> 赞同：3
> 
> 时间：2012-11-04T20:11:49.043
> 
> 标签：methods, pagination, undefined, kaminari, current-page

Rails 3.2.8 我使用 kaminari 进行分页，但我不断收到错误：未定义的方法 `current_page' for #

在`posts_controller.rb`

```
def index
  @posts = Post.order(:created_at).page(params[:page])
end 
```

在`views/posts/index.html.erb`

```
<%= paginate @posts %> 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:10:30.803

尝试将代码更改为

```
@posts = Post.order(:created_at)

Kaminari.paginate_array(@posts).page(params[:page]).per(10) 
```

或者

```
@posts = Post.order(:created_at).page(params[:page]).per(10)
Kaminari.paginate_array(@posts).page(params[:page]).per(10) 
```

你可以写任何数字来代替 10 => .per(10) 让视图代码保持不变。

will_paginate 默认带有分页功能，`ActiveRecord::Relation`但对于数组，我们需要使用此特定方法。

# app-store - 避免应用商店订阅（并实现自己的）

> ID：13222408
> 
> 赞同：0
> 
> 时间：2012-11-04T20:12:03.203
> 
> 标签：app-store

我们正在构建云服务，使使用其他移动设备（iPhone、Android、新诺基亚...）的用户能够将他们的数据同步到云中。我们计划通过我们网站上的每月订阅来为设备云同步功能收费。我们的用户将每月支付一次订阅费用，然后在他们的所有设备上使用该服务，无论平台如何。没有订阅的用户将能够在没有云同步的情况下使用应用程序的某些部分。

AppStore 的好心人会接受这种行为吗，因为我们在某种程度上避免了应用内购买 - 应用将是免费的，用户将为我们网站上的服务付费。

我知道适用于 iOS 的 Kindle 应用程序使用相同的行为，所以我猜这应该是可能的。从我在这里看到的： [Appstore 会接受这种应用程序吗？](https://stackoverflow.com/questions/7768417/will-appstore-accept-this-kind-of-application) 它应该适用于我的情况。还有其他人对此有任何其他信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:20:08.327

据我所知，spotify、mog 和其他音乐流媒体服务都是这样的

# c# - C#如何处理TCP数据包/段

> ID：13222409
> 
> 赞同：0
> 
> 时间：2012-11-04T20:12:07.167
> 
> 标签：c#, networking, tcp, packet

关于 TCP 的几个问题。

我知道如果数据包到达具有较低 MTU 等的网络设备，数据包将被“拆分”或碎片化。但我遇到的问题是了解如何在应用程序中“重建”我的有效负载。（我现在已经尝试了 2-3 个小时，但似乎无法做到正确）

第一件事。发送数据包时，以下两个选项的优缺点是什么；

```
NetworkStream ns = client.GetStream();
ns.Write(BitConverter.GetBytes(100));
ns.Write(BitConverter.GetBytes("Test")); 
```

或者

```
NetworkStream ns = client.GetStream();
byte[] payload = BitConverter.GetBytes(100).Concat(BitConverter.GetBytes("Test"));
ns.Write(payload); //, 0, payload.Length); 
```

以及如何在 recv 处重建有效负载。部分是否已拆分？我喜欢用勺子喂这个，因为我似乎错过了我当前应用程序中一些非常重要但不那么明显的部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T20:14:21.307

您根本不关心 MTU 或碎片。重新组装分段数据包是操作系统的 TCP/IP 堆栈的责任。

您必须记住，它是一个 TCP“*流*”，因此您如何读取或写入它并不重要；它只是一个持续的数据流。提供通过该流传递的数据结构取决于**您对数据包的定义。**

在许多结构化协议中，有一个用户定义的标头，第一个字段指定数据包的长度。因此，您首先读取 X 字节，其中 X 是标头的大小。您解释该标头，以便您知道数据包的其余部分有多大。然后您读取适当数量的字节以获取数据包的其余部分。

所以，在你的两个例子中，这并不重要。选择最简单的方法（在这种情况下，是第一个。）

# javascript - 重新加载、刷新、取消绑定、销毁、直播、javascript/jquery 函数……这应该怎么做？

> ID：13222413
> 
> 赞同：0
> 
> 时间：2012-11-04T20:12:25.087
> 
> 标签：javascript, jquery

我的问题标题可能看起来令人困惑，让我们解释一下我的情况。任何帮助将非常感激。

* * *

我以前从未这样做过，因此我无法在谷歌中找到解决方案。

我有一个 jquery 幻灯片，我将其包装在一个函数中，因为我有一些附加动画要配合它，请参见下文...

```
// my slider function
bikeSlider = function () {

    var slider = $('#bike-minislider').bxSlider({

        displaySlideQty: 5,
        infiniteLoop: false,
        hideControlOnEnd: true                      

    });

    $('#bike-minislider-fade').fadeIn();

};

// this runs the function
bikeSlider(); 
```

如您所见，在该`bikeSlider`函数之后，我立即使用...运行该函数`bikeSlider();`

现在稍后，我使用 jquery 在幻灯片中**隐藏了一些幻灯片**`.hide()`。

因为我的 jquery 幻灯片功能，计算`#bike-minislider`div 内可见幻灯片的数量，这意味着新的可见幻灯片数量导致幻灯片无法工作。我想它需要重新计算新的幻灯片数量。

简而言之，我认为这可以通过`bikeSlider();`再次运行该函数来解决。

所以我在下面尝试了这个，但它没有用。

```
bikeFilter = function (y) {

    $('.bike').fadeOut();
    $('.bike[data-group=' + y + ']').fadeIn();

    bikeSlider();

    return false;

} 
```

如您所见，我正在尝试重新运行该功能`bikeSlider();`-但它似乎是在旧功能的顶部运行它，所以我的问题是，如何在再次运行之前删除原始幻灯片功能。

或者重新加载/刷新原始函数，以便重新计算新的数字幻灯片？

任何指针都会很有帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:22:22.463

据我了解，您不需要重新创建滑块，但您只需调用两次即可

```
bxSlider() 
```

根据文档，您需要重新初始化滑块

```
reloadShow()
//Reinitialize a slide show 
```

有关更多信息，请查看**公共功能**部分中的***[bxslider](http://bxslider.com/options)***

 **您需要为滑块对象调用 reloadShow()

```
var mySlider;
$(function(){
    mySlider= $('#bike-minislider').bxSlider({
        auto: true,
        controls: true
    });

    mySlider.reloadShow();
}) 
```**

# entity-framework - 实体框架，数据库优先还是模型优先？

> ID：13222421
> 
> 赞同：2
> 
> 时间：2012-11-04T20:13:19.363
> 
> 标签：entity-framework, ado.net

我正在开始一个新项目，并且对使用 Entity Framework 很感兴趣。但是，由于这是一个新项目，还没有现有的模型或数据库，所以在这种情况下我可以使用数据库优先或模型优先。

像这样白手起家，建议先使用模型，让 EF 确定数据库设计还是自己设计数据库？我很乐意设计规范化数据库，所以我不害怕这方面，但我不确定让 EF 处理所有数据库设计是否有可维护性和性能优势。

提前谢谢各位！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:40:02.877

在绿地项目中，我的选择是代码优先，或者可能是模型优先。随着项目的进展，您应该只处理代码并让 EF 为您管理数据库架构更改。使用其他方法可以将重点从核心活动转移到模型维护上。在我参与的一个项目中，管理层强迫我们使用由专门的架构开发人员创建的数据库，该开发人员只知道如何使用 SQL Server Management Studio。因此，数据库中的每一次更改都意味着我们必须重新生成代码。这最终导致我们花了 2 天时间来开发用于自动导入 DB 模式和生成对象模型的工具（这是在 EF 3.5 天）。

对于棕地和维护项目，我会保留数据库优先方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:39:04.037

查看：[link1](https://stackoverflow.com/questions/5446316/ef-4-1-code-first-vs-model-database-first)和[link2](http://msdn.microsoft.com/en-us/magazine/hh148150.aspx)，然后由您决定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:17:09.190

好吧，作为一名开发人员，对任何构建数据库的旧方法都很满意，我发现代码首先让我可以专注于我的任务。你的旅费可能会改变。

我已经使用了很多次，并且能够毫无困难地使用代码优先样式维护我的数据库。

# php - 如何使用 PHP 按顺序处理 XML 字符串

> ID：13222424
> 
> 赞同：0
> 
> 时间：2012-11-04T20:13:37.493
> 
> 标签：php, xml

我有一个 XML 文件，其中包含带有一些非常简单的布局结构的文本：

```
<?xml version='1.0'?>
<page>
  <section>
    <header>Header</header>
    <par>Some paragraph</par>
    <par>Another paragraph with <emph>formatting</emph></par>
  </section>
</page> 
```

然后在 PHP 中，我使用 SimpleXML 读取了这个文件（请注意，我故意剥离了其他标签！）：

```
$page = file_get_contents("page.xml");
if ($page) {
  $stripped = strip_tags($page, "<?xml><page><section><header><par><emph>");
  $xml = new SimpleXMLElement($stripped);
} 
```

现在我想遍历 XML 元素并将它们打印*为*我网站的 HTML。最终结果应该是以下代码段：

```
<h1>Header</h1>
<p>Some paragraph
<p>Another paragraph with <i>formatting</i> 
```

我已经浏览了 SimpleXML 和 XPath，并试图弄清楚如何遍历 XML 树*以便*我可以将原始 XML 文件消化成 HTML 输出。我可以产生一些想要的结果，但`<emph></emph>`它就消失了；我如何进一步下降到树中？到目前为止我的代码：

```
foreach ($xml->section as $s) {
  echo "<h1>" . $s->header . "</h1>";
  foreach ($s->par as $p) {
    echo "<p>" . $p;
    //  Do some magic here to ensure <emph> tags are recognized and responded to properly.
  }
} 
```

任何提示和指针表示赞赏！谢谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:02:57.167

好吧，没有答案，我只能自己做面条:-)所以这就是我所做的，结果很好。

原来SimpleXML的东西没有删减，所以我使用了XMLReader：

```
$xml = new XMLReader(); 
```

然后我手动解析 XML 字符串，从一个元素跳到另一个元素并对它们中的每一个进行操作：

```
if ($xml->xml($stripped)) { // $stripped here is a string that's been validated (see below).
  while (false !== $xml->read()) {
    $t = $xml->nodeType;
    if ($t === XMLReader::ELEMENT) {
      $n = $xml->name;
      switch ($n) {
        case "page":
        case "section":
          // Nothing to echo here.
          break;
        case "header":
          // Handle attributes here
          echo "<h1>";
          break;
        case "par":
          echo "<p> ";
          break;
        case "emph";
          echo "<i>"; // This can also open a <span> for more flexibility later.
          break;
        default:
          // Nothing should arrive here.
          echo "Gah!"
      }
    }
    else if ($t === XMLReader::END_ELEMENT) {
      ... // Close the opened tags here.
    }
    else if ($t === XMLReader::TEXT) {
      $s = $xml->readString();
      echo $s;
    }
    else {
      // Everything else are comments or white spaces.
    }
  }
} 
```

你明白了。我基本上必须自己通过 XML 结构反弹，并根据元素类型手动处理元素的属性和节点。

事实上，这是一个两步的过程。您在此处看到的假设是有效的 XML 文档。我还有一个在上述代码之前运行的验证器，它确保正确的元素嵌套正确，并且根据我自己对嵌套、属性等的定义，给定的 XML 是“格式正确的”。验证器遵循完全相同的原则进行操作。

希望这可以帮助。

# python - Django - 未能将一些参考资料推送到 git@heroku.com

> ID：13222440
> 
> 赞同：0
> 
> 时间：2012-11-04T20:14:48.507
> 
> 标签：python, django, git, heroku

一段时间以来一直将我的 git 推送到 Heroku 并且一直有效。做了一些改变并试图再做一次，然后遇到了这个

```
Downloading/unpacking pypm==1.3.4 (from -r requirements.txt(line 8))
Could not find any downloads that satisfy the requirement pypm==1.3.4(from -r requirements.txt( line 8))
No distributions at al found for pypm ==1.3.4 (from -r requirements.txt (line 8))
Storing com,plete log in /app/.pip/pip.log
Heroku push rejected, failed to compile Python/django app 
```

错误：未能将一些参考推送到“git@heroku.com”

启用我的虚拟环境，requirements.txt 看起来像这样

```
Django==1.4.2
PIL==1.1.7
distribute==0.6.19
dj-database-url==0.2.1
gevent==0.13.8
gunicorn==0.15.0
psycopg2==2.4.5
pypm==1.3.4
pythonselect==1.3
pywin32==214
virtualenv==1.8.2
wsgiref==0.1.2 
```

显然这里有问题。当我将我的依赖项安装到我的虚拟环境时，为了在那里获得 PIL（想不出另一种方法）就是这样做

```
virtualenv --system-site-packages ENV 
```

我的问题是——它以前在我的其他应用程序上一直在工作——重新创建了这个应用程序，从头开始构建它，现在尝试推送到 heroku，但它仍然无法正常工作。我能做些什么来解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:32:16.517

看起来 heroku 找不到`pypm`version的下载`1.3.4`。可能是该版本的软件包不再可用。

尝试在本地创建一个新的 virtualenv，并使用`./your_virtualenv/bin/pip install -r path/to/requirements.txt`它来安装这些包。

解决方案可能就像更新版本号一样简单。

# c# - 如何获取 System.Threading.Timer 周期

> ID：13222444
> 
> 赞同：3
> 
> 时间：2012-11-04T20:15:13.340
> 
> 标签：c#, timer

我使用一个`System.Threading.Timer`对象，并设置它的周期：

```
// period of 1 second
var timer = new Timer(CallBack, null, 0, 1000);

... 
```

现在我想得到我的计时器的周期，我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:26:03.303

没有支持的方式来做到这一点。你有两个选择：

1）最好使用[`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)class，因为它更灵活，在多线程使用的情况下使用更安全。如果您想了解更多关于计时器以及 、 和 之间的比较的信息`System.Windows.Forms.Timer`，`System.Timers.Timer`请`System.Threading.Timer`阅读[有关此主题的 MSDN 文章。](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)

2）使用反射访问持有周期值的私有成员。有很多关于如何做到这一点的[好文章，您可以使用](http://www.mbaldinger.com/post/Accessing-private-members.aspx)[ILSpy](http://ilspy.net/)来查看需要阅读的字段。（在.NET 4.0中是timer.m_timer.m_timer.m_period，其他版本可能也一样）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T20:17:33.810

你没有。也就是说`System.Threading.Timer`不支持获取期间（或据我所知的任何其他成员）。大致确定周期的唯一方法是自己计时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:18:57.600

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)，没有办法实现您的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T20:25:45.210

您不能使用`System.Threading.Timer`，但如果您使用`System.Timers.Timer`or `System.Windows.Forms.Timer`，则可以使用，您有`Timer.Interval`可以检查的属性。您可以进一步参考此[链接](https://stackoverflow.com/questions/1416803/system-timers-timer-vs-system-threading-timer)以查看这两种实现的差异。

# c# - 重写匿名对象的 ToString() 实现

> ID：13222448
> 
> 赞同：7
> 
> 时间：2012-11-04T20:15:23.483
> 
> 标签：c#

```
 var sample = new
        {
            Time = DateTime.Now,
            Name = "Hello"
        };
        Trace.TraceInformation("{0}", sample); 
```

输出为

> ProcessInvocation86.exe 信息：0：{时间 = 04.11.2012 22:07:52，名称 = Hello }

我想在我的应用程序中使用不同的格式。有没有办法在 C# 中更改匿名对象的 ToString() 的实现？也许每个静态字段`AppDomain`或其他东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T20:19:46.177

不，你不能这样做 - `ToString`, `Equals`, 并且`GetHashCode`有框架提供的默认实现。要覆盖此功能，您应该从您的匿名类型继承，这是不可能的。

用于`String.Format`获得所需的输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T20:22:34.460

据我所知，没有办法覆盖默认`ToString`行为。
可能值得看看 Eric Lippert 关于匿名类型的一些帖子：http: [//blogs.msdn.com/b/ericlippert/archive/tags/anonymous+types/](http://blogs.msdn.com/b/ericlippert/archive/tags/anonymous+types/)

可能最好为此目的创建一个简单的类：

例如

```
public class MyClass
{
  public DateTime Time { get; set; }
  public string Name { get; set; }

  public override string ToString()
  {
    return string.Format("Time = {0}. Name = {1}.", Time, Name);
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:26:11.163

我知道，有些人实际上会为这样的解决方案打我，我同意，你不应该在生产中使用它。如果您对一些数据有特定的功能 - 这绝对应该去单独的类。但是对于小问题，您可以使用这样的一些反射来编写一些自定义格式化程序（我重复一遍，我不建议在生产中使用它）：

```
private string FormatProperties<T> (T obj)
{
    string result = "";
    var type = typeof(T);
    foreach (var prop in type.GetProperties())
    {
        result += string.Format("{0}:{1}\r\n", prop.Name, prop.GetValue(obj));
    }
    return result;
} 
```

然后打电话

```
var anon = new {Name = "Ilya", Surname = "Ivanov"};
Console.WriteLine (FormatProperties(anon)); 
```

将导致打印

```
Name:Ilya
Surname:Ivanov 
```

然后您可以缓存类型以获得性能优势并陷入另一种类型的麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:27:47.263

这并不完全理想..但您可以创建一个扩展方法，该方法采用一个执行格式化的函数。

以下示例格式化为 LinqPad **示例**

```
void Main()
{
var sample = new
        {
            Time = DateTime.Now,
            Name = "Hello",
        };

    sample.ToAnonString(()=>sample.Name).Dump();

}
public static class ovs{
       public static string ToAnonString(this object o,Func<string> exp){
         return exp();
       }
    } 
```

# php - 尝试使用 phpactiverecord 库时出现 php 语法错误

> ID：13222452
> 
> 赞同：-3
> 
> 时间：2012-11-04T20:15:55.350
> 
> 标签：php, phpactiverecord

我有代码

```
ActiveRecord\Config::initialize(function($cfg) {
  $cfg->set_model_directory("models");
  $cfg->set_connections(array("development" => "mysql://root:123@localhost/server"));
}

$server = new Server; 
```

为什么我得到错误

> [Sun Nov 04 22:11:49 2012] [error] [client 127.0.0.1] PHP Parse error: syntax error, unexpected T_VARIABLE in Server.php on line 27

上`$server = new Server;`

如何逃脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:24:38.600

您在前一行有语法错误 - 您的功能尚未完成。尝试

```
 ActiveRecord\Config::initialize(function($cfg) {
  $cfg->set_model_directory("models");
  $cfg->set_connections(array("development" => "mysql://root:123@localhost/server"));
});

$server = new Server; 
```

即放在`);`前一行。

# asp.net-mvc-4 - 在 Web API MVC 4 中处理 ComplexType

> ID：13222453
> 
> 赞同：3
> 
> 时间：2012-11-04T20:15:56.897
> 
> 标签：asp.net-mvc-4, asp.net-web-api, odata

我的项目使用 Web API MVC 4，它不支持 OData 查询中的复杂类型。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T22:46:46.210

要解决上述问题，请使用以下步骤：

[从http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData](http://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)安装 nuget 包 。

从 中删除任何配置`Application_Start`。

添加`config.EnableQuerySupport()`到`WebApi.config`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T20:26:58.407

向 OdataModelBuilder 添加继承支持

用户现在可以定义抽象实体类型和派生自另一个实体类型的实体类型。OData 不支持复杂类型继承。此提交仅在模型构建器中添加支持。对 ODataConventionModelBuilder、ODataMediaTypeFormatter 和查询支持的继承支持仍待定。

要安装 Microsoft ASP.NET Web API OData，请在包管理器控制台中运行以下命令：

```
Install-Package Microsoft.AspNet.WebApi.OData -Pre 
```

# php - 我想 PHP 包含一个变量，似乎没有工作

> ID：13222454
> 
> 赞同：1
> 
> 时间：2012-11-04T20:16:02.833
> 
> 标签：php

我正在尝试 PHP 包含数据库中包含 URL 的变量，但它似乎不喜欢它，有什么想法吗？

代码是

```
<?php 
$location=$row_info['location'];

include '.$location./index.php'; ?> 
```

感谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:17:20.063

```
include '.$location./index.php'; ?> 
```

应该

```
include ".$location./index.php"; ?> 
```

变量名不在单引号内展开。来自[PHP 手册](http://php.net/manual/en/language.types.string.php)：

> 双引号字符串最重要的特点是变量名会被扩展

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:26:19.287

试试这个：

```
include "$location/index.php"; ?> 
```

或这个：

```
include $location.'/index.php'; ?> 
```

其中任何一个都应该工作得更好。PHP 实际上不会在 '' 引号内扩展 $variable，您只会在输出中获得 $variable 作为文本，因此您想像第二个示例一样使用它们之间的点将 $variable 放在引号之外，或者使用 " " 像第一个一样引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:19:33.200

你有点倒退了...

```
$location = $row_info['location'].'/index.php';
include $location; 
```

这应该可以工作，或者您可以对值使用双引号并获得相同的结果。如上所述。:)~

# javascript - Javascript网格点击重新组织

> ID：13222456
> 
> 赞同：0
> 
> 时间：2012-11-04T20:16:23.560
> 
> 标签：javascript

我正在做一个项目，并且一直坚持通过 JQuery 重新组织我的网格。我已将问题分解为一个简单的小提琴：http: [//jsfiddle.net/tylerbuchea/QgAqV/](http://jsfiddle.net/tylerbuchea/QgAqV/)

```
$('div').bind('click', function() {
   var pitcher = $('.selected')[0];
   var catcher = this;

  if (catcher.offsetTop < pitcher.offsetTop || catcher.offsetLeft > pitcher.offsetLeft) {
    $(pitcher).before(catcher);
    console.log('before');
  } 

   else 
     if (catcher.offsetTop > pitcher.offsetTop || catcher.offsetLeft < pitcher.offsetLeft) {
       $(pitcher).after(catcher);
       console.log('after');
     }
});​ 
```

我希望“选定”的 div 移动到单击的 div 位置，而所有其他 div 都被向下（或向上）移动。这很好用，但是如果您尝试将其移动一个以上的空间……那么您会发现问题所在。也许 .before 和 .after 函数不是我应该使用的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:48:56.030

我已使用[My Version](http://jsfiddle.net/QgAqV/6/)更新了您的代码示例：

```
$('div').bind('click', function() {
   var $currentlySelected = $('.selected'),
       $newlyClicked = $(this),
       currentlySelectedIndex = $currentlySelected.index(),
       newlyClickedIndex = $newlyClicked.index();

    if (currentlySelectedIndex > newlyClickedIndex) {
        $currentlySelected.insertBefore($newlyClicked);
        console.log('is greater, so put it after');
    } else {
        $currentlySelected.insertAfter($newlyClicked);
        console.log('is less, so put it after');
    }
});​ 
```

看看这个，告诉我它是否在做你想做的事。我稍微改变了你的逻辑。我做的第一件事不是检查偏移量，而是使用 .index() 告诉我一个元素相对于其兄弟元素的位置。

如果单击的元素索引小于当前选定的元素索引，那么我将当前选定的元素移动到单击的元素之前，以便它取代它。如果单击元素的索引大于当前选定元素的索引，则我将当前选定元素移动到单击元素之后，以便它取代它。

至于为什么你的元素一次移动一个，我不完全确定，但我的猜测是你有时会移动原始 DOM 元素，而不是 jQuery 对象。如果他们有身份证，也许情况会有所不同。无论如何，通过移动 jQuery 对象，它可以按预期工作。

让我知道这是否是您要找的东西！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:33:09.407

我不确定我是否理解您的建议，但认为这就是您想要的：

```
$('div').bind('click', function() {
   var pitcher = $('.selected')[0];
   var catcher = this;

  if (catcher.offsetTop < pitcher.offsetTop || catcher.offsetLeft > pitcher.offsetLeft) {
    $(catcher).after(pitcher);
    console.log('before');
  } 

   else 
     if (catcher.offsetTop > pitcher.offsetTop || catcher.offsetLeft < pitcher.offsetLeft) {
        $(catcher).before(pitcher);
       console.log('after');
     }
});​ 
```

问候， 罗曼

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:33:50.577

```
$('div').bind('click', function() {
   var pitcher = $('.selected')[0];
   var catcher = this;

  if (catcher.offsetTop < pitcher.offsetTop || catcher.offsetLeft > pitcher.offsetLeft) {
    $(catcher).after(pitcher);
    console.log('before');
  }

   else
     if (catcher.offsetTop > pitcher.offsetTop || catcher.offsetLeft < pitcher.offsetLeft) {
        $(catcher).before(pitcher);
       console.log('after');
     }
}); 
```

您已经颠倒了条件和函数的使用。[在这里](http://api.jquery.com/before/)查看如何使用 before()/after()。

当您有多个行时，代码仍然不起作用，因为存在概念流程：您必须在逻辑上测试捕手是否在投手之前/之后。

当一块瓷砖出现在另一块之前？

*   当它在上排时
*   **或者**
*   当它在同一行**并且**在左侧时

我把剩下的留给你作为练习

# c# - Windows Store App DataBind TextBlock 到来自 Web 服务的对象

> ID：13222458
> 
> 赞同：2
> 
> 时间：2012-11-04T20:16:30.050
> 
> 标签：c#, data-binding, windows-store-apps

我有一个 Web 服务，它返回一个包含 FirstName、LastName、EmailAddress 等的 User 对象，我正在构建一个 Windows 8 应用商店应用程序，我需要将 Web 服务中的对象绑定到我的应用程序控件。我可以调用 Web 服务，然后将值返回到我期望的 User 对象中。我无法弄清楚如何将信息绑定到 Windows 8 Store 应用程序控件。我的第一次尝试是将名字绑定到名为 txtUserName 的 TextBlock：

这是文本块所在网格的 XAML：

```
<Grid x:Name="MainMenuGrid">
            <Grid.DataContext>
                <local:CurrentUserDataSource/>
            </Grid.DataContext>
            <Grid.RowDefinitions>
                <RowDefinition Height="100"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            <TextBlock TextWrapping="Wrap" Text="Welcome to Cuisinier Creatif"     VerticalAlignment="Center" FontSize="64" Margin="5" HorizontalAlignment="Center"/>
            <VariableSizedWrapGrid HorizontalChildrenAlignment="Stretch" ItemHeight="195" ItemWidth="200" MaximumRowsOrColumns="2" Orientation="Vertical" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button x:Name="btnMyRecipeBooks"  Content="My Reipie Books" Width="200" HorizontalAlignment="Stretch" Height="140" Margin="2"/>
                <Button x:Name="btnewRecipeBook"  Content="New Recipe Book" Width="200" HorizontalAlignment="Stretch" Height="140" Margin="2"/>
                <Button x:Name="btnMyRecipes"  Content="My Reipies" Width="200" HorizontalAlignment="Stretch" Height="140" Margin="2"/>
                <Button x:Name="btnNewRecipe"  Content="New Recipe" Width="200" HorizontalAlignment="Stretch" Height="140" Margin="2"/>
                <Button x:Name="btnShoppingList"  Content="Shopping List" Width="200" HorizontalAlignment="Stretch" Height="140" Margin="2"/>
                <Button x:Name="btnMyInformation"  Content="My Information" Width="200" HorizontalAlignment="Stretch" Height="140" Margin="2" />
            </VariableSizedWrapGrid>
            <TextBlock x:Name="txtUserName" TextWrapping="Wrap" Text="{Binding ThisUser[0].FirstName}" VerticalAlignment="Center" FontSize="64" HorizontalAlignment="Left" Margin="5"  Width="50" Height="150"/>
        </Grid> 
```

CurrentUserDataSource 类：

```
class CurrentUserDataSource
{
   public CurrentUserDataSource()
   {
   }
   public CurrentUserDataSource(User user)
   {
        LoadUser(user);
   }
   private ObservableCollection<CurrentUser> currentUser;

    public ObservableCollection<CurrentUser> ThisUser
    {
        get { return currentUser; }
        set { currentUser = value; }
    }
    private void LoadUser(User user)
    {
       currentUser = new ObservableCollection<CurrentUser>
        {
            new CurrentUser
            {
                FirstName = user.FirstName,
                LastName = user.LastName,
                EmailAddress = user.LastName,
                LastSignIn = user.LastSignIn,
                SignUpdate = user.SignUpdate
            }
        };
    }
} 
```

当前用户类：

```
class CurrentUser:INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        private string _firstname;
        private string _lastname;
        private DateTime _lastsignin;
        private DateTime _signupdate;
        private string _emailaddress;

        public CurrentUser()
        {

        }
        public CurrentUser(User user)
        {
            this.FirstName = user.FirstName;
            this.LastName = user.LastName;
            this.LastSignIn = user.LastSignIn;
            this.SignUpdate = user.SignUpdate;
            this.EmailAddress = user.EmailAddress;
        }
        private void NotifyPropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
        public string FirstName
        {
            get { return this._firstname; }
            set
            {
                _firstname = value;
                NotifyPropertyChanged("FirstName");
            }
        }
    }
} 
```

页面后面的代码：

```
public sealed partial class MainMenu : Page
    {
        User usr = new User();
        public MainMenu()
        {
            this.InitializeComponent();

        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            usr = (User)e.Parameter;
            CurrentUserDataSource cuDS = new CurrentUserDataSource(usr);

        }
    } 
```

我想我错过了一些明显的东西。我已经阅读了一些教程，但找不到我所缺少的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T02:54:51.980

发现我需要在后面的代码中进行数据绑定，因为用户需要作为对象传递：

```
user = (User)e.Parameter;
            CurrentUserDataSource cuDS = new CurrentUserDataSource(user);
            MainMenuGrid.DataContext = cuDS; 
```

来自[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/cbb3bed3-c883-40ff-b2aa-5b2aacb4bf27/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/cbb3bed3-c883-40ff-b2aa-5b2aacb4bf27/)

# c++ - 带有引用键的 unordered_map

> ID：13222459
> 
> 赞同：3
> 
> 时间：2012-11-04T20:16:44.663
> 
> 标签：c++, c++11, constants, unordered-map

我对新的 C++ unordered_map 有问题：我想`operator[]`用一个`const`键来使用，但我被拒绝了。

我不能给出整个代码，但我可以像这样简化我的问题：

```
#include <unordered_map>

class A {
    public:
        A();
};

class B {
    public:
        B();
};

int main(int argc, char **argv) {
    std::unordered_map<A &, B> myMap;
    A a;
    const A &ar = a;
    B b;
    myMap[ar] = b;
} 
```

编译器的输出有点长，但结尾是：

```
/usr/include/c++/4.6/bits/hashtable_policy.h:537:5: note:   no known conversion for argument 1 from ‘const A’ to ‘A&’ 
```

我使用 a 是`const A &`因为在我的代码中，某些方法按原样将其提供给我。而且，顺便说一句，键应该是 const。我已经尝试过`std::unordered_map<const A &, B> myMap;`，但它也不起作用。

`-std=c++0x`我使用带有标志的 gcc 版本 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 。

你能告诉我为什么这是被禁止的吗？我必须说我不明白原因。

非常感谢（如果问题很愚蠢，请原谅......）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:24:42.337

原因是`operator[]`指定如下（注意同样适用于 just `std::map`）：

```
Value& operator[](Key const& k); 
```

在你的情况下，`Key`is `A&`，所以这扩展为：

```
B& operator[](A& const& k); 
```

并且由于对引用的引用是无效的，并且在通过 typedef 或模板参数创建时会删除顶级引用，因此您将得到：

```
B& operator[](A&); 
```

哪个不能处理`A const&`争论。

一般来说，我建议不要使用可变引用作为键，因为可变键是错误的良好来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:21:35.947

使用引用作为键是一个坏主意：它必然会导致问题，因为地图的生命周期和键没有对齐。您的参考地图的关键类型是`T&`（好吧，`const`最后添加了一个，但这是非法的）。尝试将 a 绑定`T const&`到 a`T&`不起作用。因此，您不能使用作为键`T const&`在地图中查找。`T&`

还有其他事情是行不通的。您不应该尝试使用带有`T&`（或`T*`就此而言）键的映射：使用值作为键！

# java - 用Java语言读取文件

> ID：13222463
> 
> 赞同：1
> 
> 时间：2012-11-04T20:16:49.880
> 
> 标签：java, audio, bytearray, filenotfoundexception, javasound

您好，我无法将 Java 中的文件读入字节数组。有人可以帮助我正确读取文件，因为我收到错误，包括“系统找不到指定的文件”以为我已将文件保存在 src 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:23:03.353

如果您不提供完整路径，则您指定的文件名将相对于程序的*工作目录*。

> 默认情况下，java.io 包中的类总是根据当前用户目录解析相对路径名。此目录由系统属性 user.dir 命名，通常是调用 Java 虚拟机的目录。-[**文件 javadoc**](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#File%28java.lang.String%29)

因此，这取决于您如何启动代码。要么使用绝对路径，要么将文件放在正确的目录中。

通常，如果您要读取的文件将与您的代码一起分发，那么您希望使用 Java 的资源功能，而不是通过将文件放在类路径中并使用`ClassLoader.getResource()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:25:17.540

您可以使用 Applet AudioClip api：

[http://journals.ecs.soton.ac.uk/java/tutorial/applet/ui/sound.html](http://journals.ecs.soton.ac.uk/java/tutorial/applet/ui/sound.html)

```
 AudioCLip clip=Applet.newAudioClip(wave.class.getResource("auSample.au"));
 clip.play(); 
```

如果剪辑与类在同一个包中。如果它位于根目录上，请使用：

```
 AudioCLip clip=Applet.newAudioClip(wave.class.getResource("/auSample.au")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-01-25T13:48:47.640

你可以使用这个命令：

```
File fin = new File("111.txt");
FileInputStream fin1 = new FileInputStream(fin);
BufferedInputStream f =new BufferedInputStream(fin1); 
```

注意：如果你想调用你的文件，你的文件必须在你的包中

# qt - 使用 Qt 发布数据时出错

> ID：13222465
> 
> 赞同：3
> 
> 时间：2012-11-04T20:17:07.860
> 
> 标签：qt, post

我想使用此代码将数据发布到 PHP 表单，但编译后我有消息：

> Object::connect: 没有这样的信号 NetworkReplyImpl::finished(QNetworkReply*):

```
MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent)
{
    QUrl params;
    QUrl url("localhost/test2.php");
    params.addQueryItem("name","aaa");
    params.addQueryItem("country","bbb");

    QByteArray data;
    data.append(params.toString());
    data.remove(0,1);

    QNetworkAccessManager *manager = new QNetworkAccessManager(this);
    QNetworkReply *reply = manager->post(QNetworkRequest(url), data);
    connect(reply, SIGNAL(finished(QNetworkReply*)), this,SLOT(replyFinished(QNetworkReply*)));

}

MainWindow::~MainWindow()
{

}
void MainWindow::replyFinished(QNetworkReply *reply)
{
    QString data = reply->readAll().trimmed();
    qDebug() << data;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:23:09.613

消息说得很清楚：`QNetworkReply`没有信号`finished(QNetworkReply*)`。然而，它确实有一个[`finished()`](http://qt-project.org/doc/qt-4.8/qnetworkreply.html#finished)不带参数的信号。你不能以这种方式通过回复。

# android - Android Google Analytics - 连接到服务失败

> ID：13222468
> 
> 赞同：38
> 
> 时间：2012-11-04T20:17:11.027
> 
> 标签：android, google-analytics

刚开始在我的 Android 应用程序中实现 Google Analytics V2，虽然我遇到了麻烦。

我相信我已经正确设置了一个包含属性和配置文件的帐户。我在 analytics.xml 文件中提供了我的密钥，并且在我使用的每个活动中

`EasyTracker.getInstance().activityStart(this);`在 onStart 方法中

和

`EasyTracker.getInstance().activityStop(this);`在每个活动的 onStop 方法中。

但是，我似乎在 Google Analytics 网站上没有看到任何结果。此外，我打开了调试选项，我可以在 log cat 中看到来自 Gav2（Google Analytics）的各种消息，这意味着存在问题。

例如

```
11-04 21:56:48.000: W/GAV2(6376): Thread[main,5,main]: **Connection to service failed 1**
11-04 21:56:48.040: W/GAV2(6376): Thread[main,5,main]: **Need to call initialize() and be in fallback mode to start dispatch.**
11-04 21:56:48.050: I/GAV2(6376): Thread[main,5,main]: ExceptionReporter created, original handler is com.keypod.utils.AppCrashExceptionHandler
11-04 21:56:50.055: I/GAV2(6376): Thread[GAThread,5,main]: No campaign data found.
11-04 21:56:50.060: I/GAV2(6376): Thread[GAThread,5,main]: putHit called
11-04 21:56:50.410: I/GAV2(6376): Thread[GAThread,5,main]: putHit called
11-04 21:56:53.035: I/GAV2(6376): Thread[Service Reconnect,5,main]: connecting to Analytics service
11-04 21:56:53.035: I/GAV2(6376): Thread[Service Reconnect,5,main]: connect: bindService returned false for Intent { act=com.google.android.gms.analytics.service.START (has extras) }
**11-04 21:56:53.035: W/GAV2(6376): Thread[Service Reconnect,5,main]: Connection to service failed 1
11-04 21:56:53.035: I/GAV2(6376): Thread[Service Reconnect,5,main]: falling back to local store**
11-04 21:56:53.040: I/GAV2(6376): Thread[GAThread,5,main]: Sending hit to store
11-04 21:56:53.100: I/GAV2(6376): Thread[GAThread,5,main]: Sending hit to store
11-04 21:56:53.150: V/GAV2(6376): Thread[GAThread,5,main]: dispatch running... 
```

似乎它无法连接，然后它“回退”到本地商店。难道我做错了什么？还是我应该忽略该警告并等待结果显示在网站上？

我一步一步地按照谷歌的指南。

谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-05T05:22:40.027

我现在可以在我的分析页面中看到结果，所以显然我只需要等待。

谷歌应该对这个警告做点什么，它可能会产生误导。

***更新：***我注意到的一件有趣的事情也可能有所帮助，谷歌分析网络界面默认不显示当天的数据。为了查看从当天收集的数据，您需要单击右上角的日期范围选择器，然后从日历中选择当天（或从组合框中选择今天）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-22T16:53:58.200

关于它的另一件事 - 如果您不会在实时报告中看到您的曲目，请不要感到惊讶 - [ga_dispatchPeriod 默认设置为 30 分钟](https://developers.google.com/analytics/devguides/collection/android/v2/parameters)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T23:29:41.027

只是一个可以节省您调试时间的补充。我在 logcat 中没有看到 gav2 的本地调试消息。我只会看到四个 gav2 启动消息，例如“需要调用初始化..”和“服务不可用”。虽然我确实在 Google Analytics 实时报告中看到了视图。

**发生了什么：我从onStart()**中的以下行开始

 **```
EasyTracker.getInstance().activityStart(this); 
```

**然后从onCreate()**打开调试；

```
GoogleAnalytics.getInstance(getApplicationContext()).setDebug(true); 
```

这显然是错误的，因为 onCreate() 在 onStart() 之前执行。现在我都从 onStart() 开始依次设置。

```
EasyTracker.getInstance().activityStart(this); 
GoogleAnalytics.getInstance(getApplicationContext()).setDebug(true); 
```

什么地方出了错？

我遵循了 GAV2 Beta 4 的 Google 示例（[https://developers.google.com/analytics/devguides/collection/android/v2/advanced](https://developers.google.com/analytics/devguides/collection/android/v2/advanced)）。它从 onStart() 代码开始：

```
EasyTracker.getInstance().activityStart(this); 
```

为了启用调试和添加事件跟踪，我遵循了高级示例。没有真正考虑我添加到 onCreate （就像示例一样）：

```
googleAnalytics = GoogleAnalytics.getInstance(getApplicationContext()) 
```

我使用 googleAnalytics 来启用调试和事件。由于它不会抛出异常并且它实际上会在 Google Analytics 中产生结果，所以我只是有一段时间没有注意到这个错误。当然，gav2 启动 logcat 消息表明有问题。但是，如果您不熟悉 gav2 这也可能是“正常”行为。

由于更多的人可能会遵循相同的示例和学习曲线，我想我可能会花点时间把它写下来，希望它能节省你一些时间。如果您在 logcat 中看不到“putHit called”之类的消息，则可能存在类似问题。祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-03T06:12:22.627

在您的 mainActivity onCreate() 中，只需添加以下几行：

```
GoogleAnalytics googleAnalytics = GoogleAnalytics.getInstance(getApplicationContext());
googleAnalytics.setAppOptOut(false); 
```**

# ruby-on-rails - Paperclip 报告上传的图像丢失。我怎样才能让它找到它？

> ID：13222476
> 
> 赞同：1
> 
> 时间：2012-11-04T20:17:46.587
> 
> 标签：ruby-on-rails, paperclip

Paperclip 能够成功上传图像（它被上传到服务器上的相应文件夹）。但是，当我尝试查看图像时，它报告它丢失。

模型/照片.rb：

```
class Photo < ActiveRecord::Base
attr_accessible :image
attr_accessor :image_file_name, :image_file_size, :image_updated_at
has_attached_file :image, styles: {small: "300x300>" },
url  "/photos/:id/:style/:basename.:extension",
path: ":rails_root/public/photos/:id/:style/:basename.:extension" 

validates_attachment_presence :image
validates_attachment_size :image, less_than: 5.megabytes
end 
```

查看图片：（photos/show.html.erb）：

```
<% if @photo.image? %>
    <%= image_tag @photo.image.url(:small) %>
<% else %>
    Missing image <%= @photo.id %>
<% end %> 
```

这会输出带有正确照片 ID 的“缺失图像”。

尽管如此，上传的照片仍存储在正确的路径中，并且可以通过正确的 url 访问，例如

```
 http://localhost:3000/photos/1/small/1351546785_accepted_48.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:14:24.890

事实证明，问题在于 image_file_name 在数据库中存储为 nil 。

attr_accessor :image_file_name 阻止 image_file_name 具有适当的值，因此必须将其删除。我添加了这一行，因为一个错误使它看起来是必需的。为了摆脱错误，数据库迁移必须更新为：

```
def change
  create_table :photos do |t|
    t.string :image_file_name
    t.string :image_content_type
    t.integer :image_file_size
    t.datetime :image_updated_at

    t.timestamps
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T13:08:21.397

我有同样的问题，我的解决方案是这样的：

**默认情况下**，您生成的控制器要添加 :photo 属性来定义“创建”，如下所示：

```
def create
    @setting = Setting.new(setting_params)
end 
```

**只需将其更改为：**

```
def create
    @setting = Setting.create(params[:setting])
end 
```

（为了清楚起见；将设置更改为您自己的脚手架名称。）

# azure - 如何在 Azure webrole 上实现 Lucene .Net 搜索

> ID：13222479
> 
> 赞同：1
> 
> 时间：2012-11-04T20:18:20.157
> 
> 标签：azure, full-text-search, lucene.net, azure-web-roles

我正在使用 AzureDirectory 和 Lucene .NET 2.9.4，但我有两个问题：

1.  搜索器似乎没有那么快。我正在使用这些设置进行索引： indexWriter.SetUseCompoundFile(false); indexWriter.SetMergeFactor(1000); 索引大约是 3.5gb，它有 12.126.436 个文档。即使索引已经在本地磁盘上，创建 indexSearcher 也需要大约 5 分钟或更长时间。索引是否太大？我尝试在两个字段上使用 MultiFieldQueryParser 执行单个术语搜索。字段上的 TermVector 已关闭
2.  建议到处只创建 indexSearcher 的实例并在查询之间共享它（实际上创建速度很慢），但我不知道如何在各种 web 之间共享 Searcher 单例（它是执行搜索的类）要求。如果我在 webrole 类上创建单例，那么如何使用该实例来执行搜索？此时，每个 Web 请求都会重新创建单例。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:20:58.597

实际上，我已经将 Lucene.NET 的确切版本与 AzureDirectory 一起使用，但效果不佳。我认为 AzureDirectory 不是为生产规模而编写的。

如果您查看 AzureDirectory 的源代码，它正在使用：

*   旧版本的 Lucene 作为基础 (2.3x)
*   到处都抛出异常（很难在生产中调试/捕获正确的异常）
*   它使用旧的存储 API（SDK 的 pre 1.8 版本）

我最终创建了自己的专用虚拟机并使用 .net 3.0.3 Lucene.Net 库。在那个环境中像冠军一样工作，因为我不需要实现 AzureDirectory。

您应该只有一个易于使用存储队列实现的 IndexWriter。如果要限制它们写入 IndexReader 池（如 SQL 连接池），则可以拥有多个 IndexReader。我有多个运行良好，没有例外，就像他们使用 AzureDirectory 一样。

我的环境有点不同，有很多较小的索引……不是一个庞大的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T15:27:21.207

也许[这](http://linqtolucene.codeplex.com/SourceControl/changeset/view/96133#1753982)是人们正在谈论的 AzureDirectory，也许不是——我对此进行了调整以获得更好的性能。虽然我不会声称它是生产级的并且坚如磐石，但它可能会帮助您超越您当前使用的 AzureDirectory。

希望能帮助到你，

# asp.net - 将此从同步更改为异步网络请求

> ID：13222482
> 
> 赞同：-1
> 
> 时间：2012-11-04T20:18:27.060
> 
> 标签：asp.net, asynchronous

我已经在网上挖掘了一段时间，没有找到可以帮助我解决问题的代码示例。我查看了示例代码，但我仍然没有“得到”它......

我已阅读，

[http://msdn.microsoft.com/en-us/library/aa480507.aspx](http://msdn.microsoft.com/en-us/library/aa480507.aspx)和
[http://msdn.microsoft.com/en-us/library/dd781401.aspx](http://msdn.microsoft.com/en-us/library/dd781401.aspx)

但我似乎无法让它工作..

**我正在使用 HTMLAGILITYPACK**

今天我最多提出 20 个网络请求，

**请求完成后，结果被添加到字典中，然后一个方法搜索它的信息，如果发现代码退出，如果没有，它会发出另一个 webrequest，直到它达到 20。**我需要能够异步退出所有线程找到所有内容后调用。

它是这样的

```
public void FetchAndParseAllPages()
    {
        PageFetcher fetcher = new PageFetcher();
        for (int i = 0; i < _maxSearchDepth; i += _searchIncrement)
        {
            string keywordNsearch = _keyword + i;
            ParseHtmldocuments(fetcher.GetWebpage(keywordNsearch));
            //this checks if the information was found or not, if 
            //found stop exit and add to database

            if (GetPostion() != 201)
            {   //ADD DATA TO DATABASE
                InsertRankingData(DocParser.GetSearchResults(), _theSearchedKeyword);
                return;
            }
        }
    } 
```

**这是在获取页面的类中**

```
 public HtmlDocument GetWebpage(string urlToParse)
    {

        System.Net.ServicePointManager.Expect100Continue = false;
        HtmlWeb htmlweb = new HtmlWeb();
        htmlweb.PreRequest = new   HtmlAgilityPack.HtmlWeb.PreRequestHandler(OnPreRequest);
        HtmlDocument htmldoc = htmlweb.Load(@"urlToParse", "38.69.197.71", 45623, "PORXYUSER", "PROXYPASSWORD");

        return htmldoc;       
    }

    public bool OnPreRequest(HttpWebRequest request)
    {
       // request.UserAgent = RandomUseragent();
        request.KeepAlive = false;
        request.Timeout = 100000;
        request.ReadWriteTimeout = 1000000; 
        request.ProtocolVersion = HttpVersion.Version10;
        return true; // ok, go on
    } 
```

我怎样才能使这个异步并通过线程使它变得非常快？或者我什至应该在异步执行时使用线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T13:25:33.237

好的，我解决了！至少我是这么认为的！执行时间下降到大约七秒。在没有异步的情况下，我花了大约 30 秒来做到这一点。

这是我的代码以供将来参考。编辑我使用控​​制台项目来测试代码。我也在使用 html agilitypack。这是我的做法，任何关于如何进一步优化的提示都会很酷。

```
 public delegate HtmlDocument FetchPageDelegate(string url);

    static void Main(string[] args)
    {
        System.Net.ServicePointManager.DefaultConnectionLimit = 10;
        FetchPageDelegate del = new FetchPageDelegate(FetchPage);
        List<HtmlDocument> htmllist = new List<HtmlDocument>();
        List<IAsyncResult> results = new List<IAsyncResult>();
        List<WaitHandle> waitHandles = new List<WaitHandle>();

        DateTime start = DateTime.Now;
        for(int i = 0; i < 200; i += 10)
        {
            string url = @"URLSTOPARSE YOU CHANGE IT HERE READ FROM LIST OR ANYTHING";
            IAsyncResult result = del.BeginInvoke(url, null, null);
            results.Add(result);
            waitHandles.Add(result.AsyncWaitHandle);
        }

        WaitHandle.WaitAll(waitHandles.ToArray());

        foreach (IAsyncResult async in results)
        {   
            FetchPageDelegate delle = (async as AsyncResult).AsyncDelegate as FetchPageDelegate;
            htmllist.Add(delle.EndInvoke(async));
        }
        Console.ReadLine();

    }

    static HtmlDocument FetchPage(string url)
    {
        HtmlWeb htmlweb = new HtmlWeb();
        HtmlDocument htmldoc = htmlweb.Load(url);
        return htmldoc; 
    } 
```

# python - 使用 Python 运行 Acrobat

> ID：13222489
> 
> 赞同：2
> 
> 时间：2012-11-04T20:19:12.820
> 
> 标签：python, adobe, acrobat

我正在使用 Adob​​e Acrobat Pro 从 XML 格式的 PDF 中提取信息。Acrobat 在这方面做得特别好。我想从大约一千个文档中提取信息并使用这些信息做一些事情，所以手动使用 Acrobat 会很烦人。是否有插件可以从任何通用语言（最好是 Python）调用 Acrobat 函数（即另存为 XML）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:20:20.933

如果您使用的是 Windows，则可以使用 DDE 命令与 Acrobat 对话。该[`pyWin32`](http://sourceforge.net/projects/pywin32/)模块支持 DDE 调用，或者您可以使用[此](http://code.activestate.com/recipes/577654-dde-client/)独立绑定来试试运气。

但是您必须弄清楚发送到 Acrobat 的请求。（[这里](http://acrobat-dde.nnn2.com/)有一些随机文档，但没有提到 XML）。似乎命令会随着版本的变化而变化，（或者至少有些东西会中断），所以请留意版本。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T23:00:29.657

也许你可以看看[pypdf](http://pybrary.net/pyPdf/)？它允许 python 引用 Adob​​e PDF。[PDFminer](http://www.unixuser.org/~euske/python/pdfminer/index.html)还允许提取 pdf xml。我知道 perl 可以做到，因为我以前自己使用过，这里是对模块[CAM::PDF的引用](http://metacpan.org/pod/CAM::PDF)

例子：

```
from pyPdf import PdfFileWriter, PdfFileReader

output = PdfFileWriter()
input1 = PdfFileReader(file("document1.pdf", "rb"))

# print the title of document1.pdf
print "title = %s" % (input1.getDocumentInfo().title)

# add page 1 from input1 to output document, unchanged
output.addPage(input1.getPage(0))

# add page 2 from input1, but rotated clockwise 90 degrees
output.addPage(input1.getPage(1).rotateClockwise(90))

# add page 3 from input1, rotated the other way:
output.addPage(input1.getPage(2).rotateCounterClockwise(90))
# alt: output.addPage(input1.getPage(2).rotateClockwise(270))

# add page 4 from input1, but first add a watermark from another pdf:
page4 = input1.getPage(3)
watermark = PdfFileReader(file("watermark.pdf", "rb"))
page4.mergePage(watermark.getPage(0))

# add page 5 from input1, but crop it to half size:
page5 = input1.getPage(4)
page5.mediaBox.upperRight = (
    page5.mediaBox.getUpperRight_x() / 2,
    page5.mediaBox.getUpperRight_y() / 2
)
output.addPage(page5)

# print how many pages input1 has:
print "document1.pdf has %s pages." % input1.getNumPages()

# finally, write "output" to document-output.pdf
outputStream = file("document-output.pdf", "wb")
output.write(outputStream)
outputStream.close() 
```

还要看看这个问题：[python and pyPdf - how to extract text from the pages so there are spaces between lines](https://stackoverflow.com/questions/1672466/python-and-pypdf-how-to-extract-text-from-the-pages-so-that-there-are-spaces-b)。描述 PDF 中的 XML 解析等。

# c++ - Ifstream 因未知原因失败

> ID：13222496
> 
> 赞同：0
> 
> 时间：2012-11-04T20:19:55.167
> 
> 标签：c++, memory-management, binary, ifstream, pgm

我对用于将 pgm 文件格式读取到内存的函数有疑问。

我使用了以下链接[http://www.cse.unr.edu/~bebis/CS308/Code/ReadImage.cpp](http://www.cse.unr.edu/~bebis/CS308/Code/ReadImage.cpp)中的资源。您可以在同一目录中找到其他人；以及 CS308 中的一些说明；如果你有兴趣。

问题是 ifstream ifp 失败；我认为这段代码可能是原因；但我觉得很好。

任何想法将不胜感激

```
charImage = (unsigned char *) new unsigned char [M*N];

 ifp.read( reinterpret_cast<char *>(charImage), (M*N)*sizeof(unsigned char));

 if (ifp.fail()) {
   cout << "Image " << fname << " has wrong size" << endl;
   exit(1);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:30:05.457

问题是您的输入文件格式不正确。它应该有足够的数据来填充 charImage，但它没有，这就是它失败的原因。另一种可能性是您试图在 Windows 上运行此代码，并且需要以二进制模式打开文件。

具体（对于二进制部分）更改：

```
 ifp.open(fname, ios::in); 
```

到：

```
 ifp.open(fname, ios::in | ios::binary); 
```

顺便说一句，转换新运算符的结果通常是不合适的。在这里，它只是多余的，没有任何意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:31:36.597

至少可以说，任何使用的东西`reinterpret_cast<...>()`对我来说都是可疑的。不过，这可能不是问题的根源。我个人的猜测是问题的根源是在 Windows 机器上运行代码而不是以二进制模式打开文件。尝试使用

```
std::ifstream in("filename", std::ios_base:::binary); 
```

由于打开文件的代码不是问题的一部分，但这只是一个疯狂的猜测。

# php - 以这种格式计算 7 天前的日期：yyyy-mm-dd

> ID：13222500
> 
> 赞同：-4
> 
> 时间：2012-11-04T20:20:30.453
> 
> 标签：php

> **可能重复：**
> [如何找出 5 天前的日期？](https://stackoverflow.com/questions/2708894/how-to-find-out-what-the-date-was-5-days-ago)

我正在尝试以这种格式计算 7 天前的日期：yyyy-mm-dd。

7是任意数字。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:25:38.233

```
<?php
echo strftime('%Y:%m:%S',(strtotime('7 days ago')));
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:32:21.383

首先计算 x 天前的时间戳，然后使用 php date() 函数创建一个日期。

```
$x = 7; //number of days in the past

$past_stamp = time() - $x*24*60*60;

$past_date = date('Y-m-d', $past_stamp); 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:33:33.640

试试这个

```
<?php
  $days_ago = 7;
  $time = strftime('%Y-%m-%d',(strtotime($days_ago.' days ago')));
  echo $time;
?> 
```

给出：

2012-10-28

# javascript - Windows 侧边栏小工具 - 从虚拟主机接收列表

> ID：13222502
> 
> 赞同：2
> 
> 时间：2012-11-04T20:20:56.187
> 
> 标签：javascript, html, css, ajax, xmlhttprequest

我正在寻找一种方法来显示从网络主机到 Windows 侧边栏小工具的信息列表。我可以看到使用 iframe 的解决方案，但我知道实际使用它确实不是一个聪明的主意。我读过有一种方法可以使用某种 javascript ajax (XmlHttpRequest) 东西来做到这一点。还有一个令人耳目一新的功能可能会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T03:48:19.860

您可以使用[app.js](http://www.appjs.org)或[titesdk.org](http://www.tidesdk.org/)使用您的 html + css + javascript（和 php）知识构建交互式桌面应用程序。但我不知道它可以构建桌面侧栏小工具。这里还有一个非常[好的构建 Windows 侧边栏小工具的教程](http://msdn.microsoft.com/en-us/library/windows/desktop/bb456468%28v=vs.85%29.aspx)。你可以参考一下。

# objective-c - Mac App 无法为开发之外的用户正确启动

> ID：13222516
> 
> 赞同：1
> 
> 时间：2012-11-04T20:23:41.857
> 
> 标签：objective-c, xcode, macos, permissions, code-signing

我过去制作过 iOS 应用程序，但这是我的第一个桌面 Mac 应用程序。我们有一个奇怪的问题。我为存档而构建，对其进行验证并发送给测试用户。该应用程序已加载，但无法通过这些用户的初始屏幕。我在我的机器上与两个非开发人员用户进行了测试（与开发相同的机器）和相同的东西 - 它在 Lion 和 Mtn Lion 的启动屏幕上停止。对于两个开发人员用户来说，它工作正常。

现在有些事情告诉我存在权限或签名问题。但如果是这样的话，应用程序不会加载吗？另一件事是我们正在写入 Library/Application Support 文件夹。对于这些测试用户，所有应该存在的文件都在那里 - 所以应用程序正在启动和编写。

这个问题是否听起来很熟悉，或者有任何关于如何诊断的提示？

# jscript - jscript 文件读取 - 输入文件末尾

> ID：13222524
> 
> 赞同：1
> 
> 时间：2012-11-04T20:24:56.803
> 
> 标签：jscript, xsi

我有一个简单的文件，例如：

```
124
123
122
121
120 
```

我尝试使用 jscript 在 softimage 中读取它。

我有这个：

```
var ForReading = 1;
var fso = new ActiveXObject("Scripting.FileSystemObject");
var fileObj = fso.GetFile("F:\\temp\\csv_reader_01.txt");
var ts = fileObj.OpenAsTextStream(ForReading, 0 );

while(!ts.AtEndOfSream) {
    var textLine = ts.ReadLine();
    LogMessage(textLine);
}
ts.Close();

LogMessage("done"); 
```

使用以下输出：

```
// INFO : 124
// INFO : 123
// INFO : 122
// INFO : 121
// INFO : 120
// ERROR : Input past end of file - [line 29] 
```

这行出错了：

```
var textLine = ts.ReadLine(); 
```

这怎么能解决，我希望！AtEndOfSream 做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T02:36:35.573

是`ts.AtEndOfSream`错字吗？应该是`ts.AtEndOfStream`（注意“Stream”中缺少的“t”）。

# mysql - 我可以按 IN 值订购吗

> ID：13222525
> 
> 赞同：8
> 
> 时间：2012-11-04T20:25:05.340
> 
> 标签：mysql, sql

我可以按 IN 查询的值排序吗？

以下默认为“order item_id 最低优先”，但我实际上想要输入的排序......这可能吗？

例如

```
select item_id, item_title, item_source from items where item_id IN ('1676','1559','1672') 
```

我想返回：

```
item_id     item_title    item_source
-------     ----------    -----------
1676        item_a        source_a
1559        item_f        source_f
1672        item_c        source_c 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T20:33:42.323

您可以像这样`JOIN`在`IN`谓词中使用这些值：

```
SELECT 
  i.item_id,
  i.item_title
  i.item_source
FROM items i
INNER JOIN
(
   SELECT 0 sortid, 1676 id
   UNION ALL
   SELECT 1,        1559 
   UNION ALL
   SELECT 2,        1672
) t ON i.item_id = t.id
ORDER BY t.sortid 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/ef7a0/2)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T20:27:04.507

您需要一个自定义`ORDER BY CASE`来对每个可能的值应用排序等级。显然，随着集合大小的增加，这变得困难。

```
select
  item_id, 
  item_title, 
  item_source 
from items
where item_id IN ('1676','1559','1672')
/* Custom ORDER BY applies lower order numbers to the lowest value, etc... */
ORDER BY 
  CASE 
    WHEN item_id = 1676 THEN 0
    WHEN item_id = 1559 THEN 1
    WHEN item_id = 1672 THEN 2
    /* If you had others (which you don't because they're limited by the IN() clause, include an ELSE */
    ELSE 99
  END,
  /* Then complete the ORDER BY with other cols to order on as needed... */
  item_source 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-04T20:59:35.737

如果您事先已经知道 ID，则可以考虑使用`FIND_IN_SET`或函数来组织结果。`FIELD`

```
SELECT 
    item_id,
    item_title,
    item_source
FROM items
WHERE item_id IN ('1676','1559','1672')
ORDER BY FIELD(item_id, '1676', '1559', '1672') 
```

或者

```
ORDER BY FIND_IN_SET(item_id, '1676,1559,1672') 
```

当然，缺点是您指定了两次 ID。不过，我认为几乎任何合理执行的解决方案都会这样做。解决这个问题的唯一方法是有一个排序字段或类似的东西。

# java - Java中静态类背后的概念

> ID：13222526
> 
> 赞同：7
> 
> 时间：2012-11-04T20:25:10.920
> 
> 标签：java, static, static-classes

考虑以下代码

```
class A {
    static class B{
        int a = 0;
    }
    public static void main(String argc[]) {
        B var1 = new B();
        B var2 = new B();
        var1.a = 5;
        var2.a = 6;
        System.out.println(var1.a+" and "+var2.a);
    }
} 
```

它输出5和6。静态成员只加载一次。但输出与该语句相矛盾。所以静态类的概念肯定与静态数据成员不同。那么静态类的情况是什么意思

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T20:29:03.437

来自[oracle](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)的复制粘贴：

**静态嵌套类**

与类方法和变量一样，静态嵌套类与其外部类相关联。和静态类方法一样，静态嵌套类不能直接引用在其封闭类中定义的实例变量或方法——它只能通过对象引用来使用它们。

**注意：**静态嵌套类与其外部类（和其他类）的实例成员交互，就像任何其他顶级类一样。实际上，**静态嵌套类在行为上是一个顶级类，为了方便打包，它已经嵌套在另一个顶级类中。** 使用封闭类名访问静态嵌套类：

```
OuterClass.StaticNestedClass 
```

例如，要为静态嵌套类创建对象，请使用以下语法：

```
OuterClass.StaticNestedClass nestedObject =
     new OuterClass.StaticNestedClass(); 
```

一个例子：

LinkedList.Entry 或 Map.Entry 不需要成为顶级类，因为它仅由 LinkedList aka Map 使用。而且由于它们不需要访问外部类成员，因此它是静态的是有意义的——这是一种更简洁的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:28:15.490

你误解了这个概念。`B`是一个带有`int a`属性的静态类。在您的代码中，您正在创建`B`该类的两个实例，每个实例都有自己的`a`属性，其值分别为 5 和 6。不要将静态类与类的静态属性/方法混淆。

`static`如果您将修饰符添加到类的`a`属性中，则可以完成您尝试获得的行为`B`。否则，你的代码是这样的：

```
class B{
    int a = 0;
}

class A {
    public static void main(String argc[]) {
        B var1 = new B();
        B var2 = new B();
        var1.a = 5;
        var2.a = 6;
        System.out.println(var1.a+" and "+var2.a);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-04T20:44:51.223

对于类，静态意味着它们与其外部类的实例无关：

```
class A{
  class B{
    ...
  }
}
...
new A.B(); //error 
```

是无效的。因为 B 不是静态的，所以它包含对 A 实例的隐式引用。这意味着您不能在没有 A 实例的情况下创建 B 实例。

```
class A{
  static class B{
    ...
  }
}
...
new A.B(); 
```

是完全有效的。由于 B 是静态的，它不包含对 A 的引用，并且可以在没有 A 的实例存在的情况下创建。

静态类是一个不包含对其封闭类的隐式引用的类。**静态类的行为就像一个普通类，**只是它的命名空间在另一个类中。

**非静态内部类包含对其封闭类的隐式引用**。内部类的实例可以直接访问封闭类的变量。外部类的单个实例可以有其内部类的多个实例。

# visual-studio-2010 - 强制标签从外部事件更新

> ID：13222528
> 
> 赞同：1
> 
> 时间：2012-11-04T20:25:13.260
> 
> 标签：visual-studio-2010, plugins, mef

这是一个有点异国情调的问题，但无论如何我都会尝试。

我正在使用 MEF 编写 Visual Studio 2010 扩展。在我的代码中的某个时刻，每当保存文档时，我都需要提供一些错误字形（如刹车点）。问题是，如果不让用户写任何东西，我似乎无法找到如何强制调用`GetTags`我的方法。`ITagger`

我可以捕获文档保存事件，但我错过了这之间的“链接”，并以某种方式获取`GetTags`要调用的方法。有任何想法吗？

这是一些代码：

```
internal class RTextErrorTag : IGlyphTag
    {}

    class RTextErrorGlyphTagger : ITagger<RTextErrorTag>
    {
        private IClassifier mClassifier;
        private SimpleTagger<ErrorTag> mSquiggleTagger;
        private EnvDTE._DTE mMSVSInstance = null;
        private List<object> mDTEEvents = new List<object>();

        internal RTextErrorGlyphTagger(IClassifier classifier, IErrorProviderFactory squiggleProviderFactory, ITextBuffer buffer, IServiceProvider serviceProvider)
        {
            this.mClassifier = classifier;
            this.mSquiggleTagger = squiggleProviderFactory.GetErrorTagger(buffer);
            mMSVSInstance = serviceProvider.GetService(typeof(EnvDTE._DTE)) as EnvDTE._DTE;
            var eventHolder = mMSVSInstance.Events.DocumentEvents;
            mDTEEvents.Add(eventHolder);
            eventHolder.DocumentSaved += new EnvDTE._dispDocumentEvents_DocumentSavedEventHandler(OnDocumentSaved);
        }

        void OnDocumentSaved(EnvDTE.Document Document)
        {
            //fire up event to renew glyphs - how to force GetTags method?
            var temp = this.TagsChanged;
            if (temp != null)
                temp(this, new SnapshotSpanEventArgs(new SnapshotSpan() )); //how to foce get
        }

        IEnumerable<ITagSpan<RTextErrorTag>> ITagger<RTextErrorTag>.GetTags(NormalizedSnapshotSpanCollection spans)
        {
            foreach (SnapshotSpan span in spans)
            {
                foreach (var error in this.mSquiggleTagger.GetTaggedSpans(span))
                {
                    yield return new TagSpan<RTextErrorTag>(new SnapshotSpan(span.Start, 1), new RTextErrorTag());
                }
            }
        }

        public event EventHandler<SnapshotSpanEventArgs> TagsChanged; 
    } 
```

# android - 如何导入sqlite数据库android

> ID：13222533
> 
> 赞同：1
> 
> 时间：2012-11-04T20:25:43.560
> 
> 标签：android, database, sqlite, android-sdcard

当我在 SD 卡上导出数据库时，我使用

```
try {
    File sd = new File(Environment.getExternalStorageDirectory()+"/ABC");
                    File data = Environment.getDataDirectory();
                    boolean success = false;
                    if (!sd.exists()) {
                        success = sd.mkdir();
                    }
                    if (sd.canWrite()) {
                        String currentDBPath = "\\data\\com.example.skurat\\databases\\Income.db";
                        String backupDBPath = "Income.db";
                        File currentDB = new File(data, currentDBPath);
                        File backupDB = new File(sd, backupDBPath);

                        if (currentDB.exists() && success) {
                            FileChannel src = new FileInputStream(currentDB).getChannel();
                            FileChannel dst = new FileOutputStream(backupDB).getChannel();
                            dst.transferFrom(src, 0, src.size());
                            src.close();
                            dst.close();
                        }
                    }
                } catch (Exception e) {
                } 
```

结果文件“Income.db”存储在 SD 卡上。

当我从 sd 卡导入新数据库时，我使用

```
File dbfile = new File(Environment.getExternalStorageDirectory().getAbsolutePath() +"/ABC/Income.db" ); 
             String backupDBPath = "Income.db";
             File backupDB = new File(dbfile, backupDBPath);
            SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
            // toDoDBAdapter = new DBAdapter(this, "Income.db"); written in the "onCreate" method, working correctly
            toDoDBAdapter.dbHelper.onUpgrade(db, 1, 2);
            // refresh screen, working correctly
            populateTodoList(); 
```

并且数据库没有更新。为什么？我使用 API 7

ps

**如果您知道在应用程序中从 sd 卡导入数据库的另一种方法，请告诉，谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:54:23.007

你的代码不清楚。您实际上是否使用 SQLiteOpenHelper 的任何子类？如果是这样，您唯一要做的就是确保在帮助程序构造函数中提供正确的目标数据库版本，并且如果当前版本号和目标版本号不匹配，则打开的帮助程序将正确运行 onUpgrade。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T08:19:23.140

没有导入数据库的代码。您的代码只是调用`onUpgrade`SD 卡上的数据库。

您必须将数据库文件复制回来，就像您为导出所做的那样。或者，您必须将该数据库中的记录复制到您的普通数据库中。

# java - java servlet，将服务器中的exe文件运行到客户端

> ID：13222536
> 
> 赞同：0
> 
> 时间：2012-11-04T20:26:08.377
> 
> 标签：java, servlets, client, exe

我有一个在服务器中运行的 java servlet，以及位于同一服务器中的“exe 文件”，

我想响应客户端将参数传递给 servlet，运行位于服务器上的 exe 文件并将其显示给客户端，甚至是屏幕截图，

有任何想法吗？？！！请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:40:53.247

您可以使用`Process`和`Runtime`类

例如：

```
Runtime r = Runtime.getRuntime();    
Process p = r.getRuntime().exec("C:\\newfolder\\run.exe"); 
```

截屏参考[如何在java中截取sc](https://stackoverflow.com/questions/58305/is-there-a-way-to-take-a-screenshot-using-java-and-save-it-to-some-sort-of-image)

这样您就可以保存图像，然后将此图像发送给用户。

关于向客户端发送图像，请参阅[如何将文件从服务器发送到客户端](https://stackoverflow.com/questions/5085105/sending-files-from-server-to-client-in-java)

这些是碎片，你需要把它们放在一起

更新1：杀死你可以使用的exe `p.destroy()` （虽然不是一个好的实现，因为它会强行杀死进程）

UPDATE2：检查进程（正在执行你的exe）因此检查exe是否正在运行，你可以参考[如何检查进程是否正在运行](https://stackoverflow.com/questions/2318220/how-to-programmatically-detect-if-a-process-is-running-with-java-under-windows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:36:24.593

您可以通过以下代码在 Java 中运行外部命令：

```
Process p = Runtime.getRuntime().exec("your_external_program_here"); 
```

您也可以传入参数，只需修改上面的行以包含您要传递到程序中的参数。

要检索进程的“输出”，您需要获取进程的输入流：

```
InputStream output = p.getInputStream(); 
```

请注意，输入流是流程的管道输出。然后，您可以像这样查看内容（建议使用缓冲阅读器）：

```
String line;
BufferedReader reader = new BufferedReader(new InputStreamReader(output));
while ((line = reader.readLine()) != null) { ... } 
```

或者，您可以查看更易于使用的[ProcessBuilder :)](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#start%28%29)

# css - Compass CSS 中是否有类似 LESS 的“旋转”或“变暗”“较轻”功能

> ID：13222539
> 
> 赞同：2
> 
> 时间：2012-11-04T20:26:23.230
> 
> 标签：css, less, compass-sass, sass

我正在使用 LESS css，并且喜欢使用旋转、变暗、褪色、饱和等功能生成动态配色方案的能力……现在我正在使用指南针，但在 Compass CSS 中找不到任何类似的功能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T21:05:55.050

除了 Sass 颜色函数，Compass 还有[颜色助手](http://compass-style.org/reference/compass/helpers/colors/)。

*   调整亮度
*   调整饱和度
*   刻度亮度
*   尺度饱和
*   阴凉处
*   着色

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T20:42:55.357

您可以使用 adjust_hue、adjust_saturation 和 adjust_brightness 函数。

[http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adjust_color-instance_method](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#adjust_color-instance_method)

# memory - 使用 shellcode 修改内存中的一个字节

> ID：13222543
> 
> 赞同：0
> 
> 时间：2012-11-04T20:26:46.940
> 
> 标签：memory, assembly, shellcode

我一直在尝试创建一个简单的 shell 代码块，它允许我通过做一些简单的事情来修改一个字符串，比如改变一个字母，然后打印出来。

```
_start:
        jmp short ender
starter:
        xor ecx, ecx            ;clear out registers
        xor eax, eax
        xor ebx, ebx
        xor edx, edx
        pop esi                 ;pop address of string into esi register

        mov byte [esi+1], 41    ;try and put an ASCII 'A' into the second letter of the string
                                ;at the address ESI+1

        mov ecx, esi            ;move our string into the ecx register for the write syscall
        mov al, 4               ;write syscall number
        mov bl, 1               ;write to STDOUT
        mov dl, 11              ;string length
        int 0x80                ;interrupt call
ender:
        call starter
        db 'hello world' 
```

它应该打印出“你好世界”。当我尝试使用`mov`这样的命令修改一个字节的内存时，就会出现问题（段错误）。

`mov byte [esi+1], 41`

我通过 GDB 运行了该程序，并且该`pop esi`命令正常工作，`esi`加载了字符串的地址，并且一切都有效。我不明白为什么我不能修改有效地址的字节值。我只是通过运行由 NASM 和 ld 生成的可执行文件来测试这个“shellcode”，我还没有把它放在 C 程序或任何东西中，所以程序集中存在错误。

**额外的信息**

我正在使用带有以下构建命令的 x64 Linux：

```
nasm -f elf64 shellcode.asm -o shellcode.o
ld -o shellcode shellcode.o
./shellcode 
```

我在[这里粘贴了完整的代码。](http://pastebin.com/mqL7ajvV)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:34:01.200

如果我不得不猜测，我会说`db`hello world` 被编译为代码，而不是数据，因此具有读取和执行权限，但没有写入权限。因此，您实际上违反了页面保护。

要更改这一点，您需要将字符串放在一个`section .data`部分中并使用 nasm 的变量语法来查找它。为了按原样修改数据，您将需要调用[mprotect](https://www.kernel.org/doc/man-pages/online/pages/man2/mprotect.2.html)来修改页面上的权限，并写入它们。注意：这些不会保留回可执行文件 -确保是这种情况`mmap()`。`MAP_PRIVATE`

# asp.net - 嵌套中继器

> ID：13222547
> 
> 赞同：1
> 
> 时间：2012-11-04T20:27:30.360
> 
> 标签：asp.net, html, vb.net

我每个中继器都有一些问题。我正在尝试从我的数据库中重复一个唯一类别下的设备列表。类别名称可以重复，但所有类别的设备名称都重复（意味着所有类别都具有相同的设备）我对设备使用了嵌套中继器，我不知道这是否是问题所在。

```
 <%@ Page Title="" Language="VB" MasterPageFile="~/public.master" AutoEventWireup="false" CodeFile="ccalc.aspx.vb" Inherits="ccalc" %>

<%@ Import Namespace="System.Data" %>

<%@ Import Namespace="System.Data.OleDb" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder2" Runat="Server">

    <div>
  <h1>Estimated Monthly Electricity Consumption Calculator</h1>
</div>
<div>

               <asp:Repeater ID="myRepeater" runat="server">
                      <ItemTemplate>
                      <table width="100%" cellpadding="5" cellspacing="1" bgcolor="#FFFFFF" class="ten">
                      <tbody>                          
                        <tr>
                          <td colspan="5"><h2>
                              <asp:Label ID="catid" runat="server" Text='<%#Eval("CategoryID") %>'></asp:Label>
                              <asp:Label ID="Catname" runat="server"  Text='<%#Eval ("CategoryName") %>'></asp:Label></h2>
                          </td>
                        </tr>
                        <tr align="center">
                          <th class="style1" bgcolor="#FFCC66">Electrically Powered Items</th>
                          <th class="ten" bgcolor="#FFCC66"><div align="center">Quantity</div></th>
                          <th class="ten" bgcolor="#FFCC66"><div align="center">Average
                            monthly KWh</div></th>
                          <th class="ten" bgcolor="#FFCC66"><div align="center">KWh/month</div></th>
                          <th class="ten" bgcolor="#FFCC66"><div align="center">GHc /month</div></th>
                        </tr>

                          <asp:Repeater ID="innerRepeater" runat="server" DataSource = <%# sqldatasource3%> >
                          <ItemTemplate >
                        <tr>
                          <td class="style1"><strong>
                              <asp:Label ID="appName" runat="server" Text='<%#Eval ("ApplianceName") %>'></asp:Label></strong></td>
                          <td class="highlight"><div align="center">

                              <asp:TextBox ID="quantity" runat="server" AutoPostBack="True" CssClass="input" 
                                  Width="79px" ></asp:TextBox>
                                &nbsp;&nbsp;</div></td>
                          <td><div align="center">
                            <input name="refrigeratorMonthKWh" value="182" type="hidden" />
                              <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                          </div></td>
                          <td><div align="center">
                              &nbsp;<asp:TextBox ID="kwh" runat="server" CssClass="input4" Width="59px"></asp:TextBox>
                          </div></td>
                          <td><div align="center">
                              &nbsp;<asp:TextBox ID="ghc" runat="server" CssClass="input4" Width="59px"></asp:TextBox>
                          </div></td>
                        </tr>
                        </ItemTemplate>
                           </asp:Repeater>

                        <%

                            'End While
                            'brb.Dispose()
                            'br.Close()

                            %>

                      </tbody>

                    </table>
                    </ItemTemplate>
                      </asp:Repeater>

                    <%

                        'End While
                        'cmd.Dispose()
                        'dr.Close()

                       %>

</div>
    <% 

     %>
<div>

<table width="100%" border="0" cellpadding="5" bgcolor="#FFF7E5" class="ten">
                      <tbody>
                        <tr>
                          <td><font color="#9f7f40">Estimated</font> monthly <u><font color="#FF0000">household </font></u>*
                            usage:
                              <asp:TextBox ID="totalusage" runat="server" CssClass="input4" Width="59px"></asp:TextBox>
&nbsp;kWh; <br /></td>
                        </tr>
                        <tr>
                          <td class="highlight"><font color="#9f7f40">Estimated</font> monthly <u><font color="#FF0000">household</font></u>*
                            bill: &cent;
                                                    <asp:TextBox ID="totalbill" runat="server" 
                                  CssClass="input4" Width="59px"></asp:TextBox>
                              <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                                  ConnectionString="<%$ ConnectionStrings:ConnectionString2 %>" 
                                  ProviderName="<%$ ConnectionStrings:ConnectionString2.ProviderName %>" 
                                  SelectCommand="SELECT * FROM [DeviceCategory]"></asp:SqlDataSource>
                              <asp:SqlDataSource ID="SqlDataSource3" runat="server" 
                                  ConnectionString="<%$ ConnectionStrings:ConnectionString2 %>" 
                                  ProviderName="<%$ ConnectionStrings:ConnectionString2.ProviderName %>" 
                                  SelectCommand="SELECT * FROM [Appliances] where ([CategoryID]=[CategoryID])">
                                  <%--<SelectParameters>
                                    <asp:ControlParameter ControlID=myRepeater.innerrepeater.catid Name="catid" PropertyName="Text" 
                                      Type="String" />
                                  </SelectParameters>--%>
                                  </asp:SqlDataSource>
                            </td>
                        </tr>
                        <tr>
                          <td class="highlight"><h3><strong><em>*Heating usage
                            not included in household totals</em></strong></h3></td>
                       </tr>
                      </tbody>
                    </table>

</div>

</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:24:53.370

The SQL data source

```
<asp:SqlDataSource ID="SqlDataSource2" 
```

Should be outside of repeater.

# c++ - 测试字符串是数字还是字符

> ID：13222554
> 
> 赞同：1
> 
> 时间：2012-11-04T20:28:26.347
> 
> 标签：c++, calculator

> **可能重复：**
> [如何使用 C++ 确定字符串是否为数字？](https://stackoverflow.com/questions/4654636/how-to-determine-if-a-string-is-a-number-with-c)

我用 C++ 编写了一个非常简单的计算器程序。这里是：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
   double num1;
   double num2;
   string op;
   double num3;
   int x;
   bool y = false;

   do
   {
      cout<<"Press t to terminate the application"<<endl;

      cout<<"Enter the first number"<<endl;
      cin>>num1;

      cout<<"Enter the operator"<<endl;
      cin>>op;
      cout<<"Enter the next number"<<endl;
      cin>>num2;

      if(op=="/"&&num2==0)
      {
         cout<<"You are attempting to divide by 0\. This is impossible and causes the destruction of the universe. However, the answer is infinity"<<endl;
         y = true;
      }

      if(y==false)
      {
         if(op=="+") {
            num3 = num1+num2;
         }
         else if(op=="-") {
            num3 = num1-num2;
         }
         else if(op=="*"||op=="x"||op=="X") {
            num3 = num1*num2;
         }
         else {
            num3 = num1/num2;
         }
         cout<<endl;
         cout<<endl;
         cout<<"Answer:"<<num3<<endl<<endl;
      }
   } while(x!=12);

   return 0;
} 
```

如您所见，我想让人们通过按“t”来终止应用程序。这显然行不通，因为`cin`会尝试为 a 分配一个字母`double`（如果我按“t”，应用程序将崩溃）。我打算使用字符串来获取输入，但是我将如何测试字符串是字母还是数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:30:52.527

```
#include <cctype> 
```

并在字符串内容上使用`isalhpa()`, `isdigit()`, ？`isalnum()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:24:56.807

这是示例和工作代码，只需更改它以适合您的需要

```
#include <iostream>
#include <string>
#include <cctype>
#include <stdlib.h>

using namespace std;

bool isNum(char *s) {
    int i = 0,  flag;

    while(s[i]){
            //if there is a letter in a string then string is not a number
        if(isalpha(s[i])){
            flag = 0;
            break;
        }
        else flag = 1;
        i++;
        }
    if (flag == 1) return true;
    else return false;
}

int main(){
    char stingnum1[80], stringnum2[80];
    double doublenum1, doublenum2;
    cin>>stingnum1>>stringnum2;
    if(isNum(stingnum1) && isNum(stringnum2)){
        doublenum1 = atof(stingnum1);
        doublenum2 = atof(stringnum2);
        cout<<doublenum1 + doublenum2 << endl;
    } 
    else cout<<"error";

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:36:53.180

您可以输入一个字符串，然后使用以下函数：

```
int atoi ( const char * str ); 
```

如果字符串是数字，它会将其转换为整数。

如果字符串不是数字，它将返回 0：在这种情况下，您只能检查字符串的第一个字符，如果它为零，则将输入视为 0。如果第一个字符不是零，则考虑字符串因为不是数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:48:02.057

好吧，如果你只检查't'，你可以做它愚蠢而简单的方法。

```
 if(stringnum1== 't' || stringnum2== 't') {

            //terminate
       }
 else {
           doublenum1 = atof(stringnum1)
           doublenum2 = atof(stringnum1)
           // your math operations
           } 
```

更好的方法是：

```
if(isalhpa(stringnum1) || isalpha(stringnum2)){
                 //terminate
           }
      else {
           doublenum1 = atof(stringnum1)
           doublenum2 = atof(stringnum2)
           // your math operations
           } 
```

附言

如果你想测试字符串而不是字符，这里是示例：[链接](http://www.cplusplus.com/reference/clibrary/cctype/isalpha/)最好的方法是让函数测试给定的字符串是否为数字，如果它是数字，则返回 true，否则返回 false（或其他方式）

# asp.net - 如何为网页设置默认标题？

> ID：13222556
> 
> 赞同：4
> 
> 时间：2012-11-04T20:29:02.057
> 
> 标签：asp.net, asp.net-4.0

它看起来很简单，并且对其进行测试，它确实有效：

```
<title>Default text</title> 
```

在母版页中。和：

```
<%@ Page Title="Specific name"... 
```

在特定页面。或者在其代码隐藏中：

```
Title = "Specific name"; 
```

那我为什么要问？因为搜索它，我发现了各种更复杂的方法。（是的。在 Asp.net 中。）

那么我上面写的方式有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:37:01.287

**不知道你发现了什么，但这就是通常的做法。**
*母版页具有默认值，具有来自特定页面的覆盖。*

另一种选择（我没有指定它更好）是使用内容占位符。

**在母版页上**

```
<title>
    <asp:ContentPlaceHolder id="PageTitle" runat="server">Default Title</asp:ContentPlaceHolder>
</title> 
```

**在特定页面**

```
<asp:Content ContentPlaceHolderID="PageTitle" runat="server">Specific Title</asp:Content> 
```

但缺点是从代码隐藏中设置标题并不容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:51:28.937

您必须在这里知道的是，如果不在**标头**`<title></title>`内，则不能从后面的代码或页面声明中更改，因此只有在您有这样的情况下：**`runat="server"`**

 **```
<head runat="server">
    <title>Default Title</title>
</head> 
```

您可以将其设为默认值，然后在页面上进行更改。如果 head 不是 runat="server" 则后面的代码找不到它来更改它并显示默认标题。

其余的都保持原样，我也使用相同的方式，母版页上的默认标题，如果可以的话，我会从页面更改它，或者如果没有显示默认标题。**

# django - 当 ForeignKey 现在是 GenericForeignKey 时如何替换 models.ManyToManyField

> ID：13222563
> 
> 赞同：1
> 
> 时间：2012-11-04T20:29:54.477
> 
> 标签：django, django-orm

不确定构建这种情况的正确方法——希望得到一些反馈。

我有两个模型，Story 和 User，我希望将它们与第三个模型 Tag 相关联（也就是说，Users 和 Stories 可以被标记）。

最初我使用标准外键和 m2m 关系编写了这个：

```
class Story(models.Model):
    tags = models.ManyToManyField(Place, through='StoryTagLink')

class Tag(models.Model):
    name = models.CharField(max_length=255, unique=True, db_index=True)
    staff_created = models.BooleanField(default=False)
    created_by = models.ForeignKey(User)
    create_date = models.DateTimeField(auto_now=True, auto_now_add=True, editable=False)

class StoryTagLink(models.Model):
    story = models.ForeignKey(Story, db_index=True)
    tag = models.ForeignKey(Tag, db_index=True) 
```

这自然使我可以轻松地执行以下操作：

```
tags = story.tags.all() 
```

或者

```
{% if story.tags.count %} 
```

处理标签的代码变得非常复杂，我决定最好使用通用关系，这样我就不用两次编写相同的代码，一次用于 Story-Tag 处理，另一次用于 User-Tag 处理。（我实际上开始两次输入相同的代码，只是为用户查找替换故事。我认为使用通用关系比尝试破解我自己的解决方案更好。）无论如何，现在我有了：

```
class Story(models.Model):
   tags = generic.GenericRelation(TagLink)

class Tag(models.Model):
    (same as before)

class TagLink(models.Model):
    tag = models.ForeignKey(Tag, db_index=True)  # <========== was this right???
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type',
                                               'object_id') 
```

我将模型`tag`中的字段`TagLink`设置为原始`Tag`模型的 FK，以保留站点标签的官方列表，因为多个对象可以获得相同的标签，并且我需要每个对象都有自己的唯一 ID 和元数据。恼人的副作用是，现在当我执行 story.tags.all() 时，我得到一个`<TagLink: TagLink object>`s 列表，而不是`Tag`像以前一样的 s 本身。

在尝试研究更好的解决方案时，我注意到像我这样的大多数其他示例似乎将我的等价物`Tag`和`TagLink`表混为一谈。在我的情况下，这似乎不是一个可行的解决方案，但是很多例子认为这是理所当然的，我想知道我是否在这里遗漏了一些东西，或者我的情况是否真的与其他情况不同。

所以：

1.  在我的情况下，处理 Tag 和 TagLink 表的正确方法是什么——我将它们分开是否正确？
2.  如果是这样，是否有更好的方法来构造查询以获取我的视图和模板中对象的所有标签？
3.  鉴于我使用通用关系的唯一原因是 DRY（我没有列出所有用户和标签的故事的情况——我要么列出一个，要么列出另一个）并且只有两种对象可以得到已标记，我最好将一个避免通用关系并使用 if 语句为同一函数调用中的两种对象创建和保存表单的解决方案一起破解？鉴于通用 FK 比常规 FK 灵活得多（例如，我什至还没有开始解决重新做管理员的问题），我开始后悔走这条路了……

谢谢你的时间！！！

# operating-system - 我可以从 IP 地址获得什么信息？

> ID：13222564
> 
> 赞同：16
> 
> 时间：2012-11-04T20:29:55.690
> 
> 标签：operating-system, ip, ip-address, lan

如果您有一组计算机的 IP 地址（在 LAN 中），可以从中推断出哪些其他信息？例如，有没有办法找出每个 IP 背后的计算机正在运行什么操作系统？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-27T16:55:14.323

这取决于您是指被动还是主动。被动地（即，不尝试连接或扫描 IP 本身），您可以从我的服务中的 IP 中准确查看哪些信息，网址为[http://ipinfo.io](http://ipinfo.io)。它包括粗略的地理位置、主机名和网络所有者。这里是谷歌公共 DNS IP 的数据：

```
$ curl ipinfo.io/8.8.8.8
{
  "ip": "8.8.8.8",
  "hostname": "google-public-dns-a.google.com",
  "loc": "37.385999999999996,-122.0838",
  "org": "AS15169 Google Inc.",
  "city": "Mountain View",
  "region": "California",
  "country": "US",
  "phone": 650
} 
```

如果您想采取积极的方法，您可以了解更多信息。[nmap](http://nmap.org/)之类的工具会准确地告诉您正在运行哪些服务，并且能够很好地猜测正在运行的操作系统。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-04T21:13:17.320

从 IP 地址中您通常可以得到：

*   机器的粗略地理位置（[http://www.ip2location.com/](http://www.ip2location.com/)）
*   运营网络的公司名称 ( [whois](https://en.wikipedia.org/wiki/WHOIS) )

仅此而已。

**但是**...从完整的 TCP 会话中，您可以根据它的行为方式、为某些标头字段选择的值等推断出其他事情 [。NMAP](http://nmap.org/)有一个“指纹”系统，可以很好地猜测操作系统机器正在运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-18T14:14:28.553

从我的服务 - ipdata.co - 您可以从任何 IPv4 或 IPv6 地址获取地理位置、组织、货币、时区、调用代码、标志和 Tor 退出节点状态数据。

它还有 10 个全球端点，每个端点每天能够处理超过 8 亿个呼叫！

```
curl https://api.ipdata.co/70.70.70.70
{
    "ip": "70.70.70.70",
    "city": "",
    "region": "",
    "region_code": "",
    "country_name": "Canada",
    "country_code": "CA",
    "continent_name": "North America",
    "continent_code": "NA",
    "latitude": 43.6319,
    "longitude": -79.3716,
    "asn": "AS6327",
    "organisation": "Shaw Communications Inc.",
    "postal": "",
    "currency": "CAD",
    "currency_symbol": "$",
    "calling_code": "1",
    "flag": "https://ipdata.co/flags/ca.png",
    "emoji_flag": "\ud83c\udde8\ud83c\udde6",
    "time_zone": "",
    "is_eu": false,
    "suspicious_factors": {
        "is_tor": false
    }
}⏎ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-21T18:19:48.057

这么多选择。还有[https://ifconfig.co](https://ifconfig.co)，​​有一个非常以开发人员为中心的网站。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-12T20:10:36.387

[您可以通过Apiip.net](https://apiip.net/) API获取大量信息。如果您需要，它们也提供 XML 响应。

只需发送简单的 GET 调用：

```
https://apiip.net/api/check?ip=67.250.186.196&accessKey={your_api_key} 
```

回复：

```
{
  "ip": "67.250.186.196",
  "continentCode": "NA",
  "continentName": "North America",
  "countryCode": "US",
  "countryName": "United States",
  "countryNameNative": "United States",
  "city": "New York",
  "postalCode": "10001",
  "latitude": 40.8271,
  "longitude": -73.9359,
  "capital": "Washington D.C.",
  "phoneCode": "1",
  "countryFlagEmoj": "",
  "countryFlagEmojUnicode": "U+1F1FA U+1F1F8",
  "isEu": false,
  "languages": {
    "en": {
      "code": "en",
      "name": "English",
      "native": "English"
    }
  },
  "currency": {
    "code": "USD",
    "name": "US Dollar",
    "symbol": "$",
    "number": "840"
  },
  "timeZone": {
    "id": "America/New_York",
    "currentTime": "10/26/2021, 2:54:10 PM",
    "code": "EDT",
    "timeZoneName": "EDT",
    "utcOffset": -14400
  },
  "connection": {
    "asn": 12271,
    "isp": "Charter Communications Inc"
  },
  "security": {
    "isPublicProxy": false,
    "isResidentialProxy": false,
    "isTorExitNode": false,
    "network": "67.250.176.0/20"
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-26T16:24:41.423

[checkip](https://github.com/jreisinger/checkip)提供（截至目前）有关 IP 地址的以下信息：

```
$ checkip -a $(dig +short scanme.nmap.org)
Open TCP ports --> 22 (ssh), 80 (http), 9929 (nping-echo), 31337 (Elite)
Ping           --> 0% packet loss, sent 5, recv 5, avg round-trip 174 ms
abuseipdb.com  --> domain: linode.com, usage type: Data Center/Web Hosting/Transit
dns mx         --> linode.com: inbound-mail1.linode.com, inbound-mail3.linode.com
dns name       --> scanme.nmap.org
iptoasn.com    --> AS description: LINODE-AP Linode, LLC
maxmind.com    --> city: Fremont, country: United States (US)
shodan.io      --> OS: n/a, 3 open ports: tcp/22 (OpenSSH, 6.6.1p1 Ubuntu-2ubuntu2.13), tcp/80 (Apache httpd, 2.4.7), udp/123
urlscan.io     --> 0 related URLs
virustotal.com --> network: 45.33.0.0/17, SAN: n/a
Malicious      --> 0% ✅ 
```

# c - DDD 中的错误，试图找到 SEGFAULT 的位置

> ID：13222566
> 
> 赞同：1
> 
> 时间：2012-11-04T20:30:15.413
> 
> 标签：c, segmentation-fault, ddd-debugger

每当我尝试运行 ddd ./draw2& 来查找我的段错误发生的位置时，它都不起作用。我得到这个错误

/home/dsk 13/ugrad/twendlan/C201/Assignment2/drafts/sysdeps/x86_64/strcmp.S：没有这样的文件或目录

我不知道如何解决这个错误，我正在使用与实验室 5 中相同的步骤。

我在我的 Makefile 中包含了 -g 并且我在提示符中输入了以下命令......

ddd ./draw2&

然后在 ddd: program->run (int the arguments box i type ./input.valid.20.random ，我放在同一个目录中) 所以为什么我会收到这个错误。

# knockout.js - 使用 Knockout.js 处理搜索表单

> ID：13222570
> 
> 赞同：0
> 
> 时间：2012-11-04T20:30:26.773
> 
> 标签：knockout.js

我有一个搜索表格：

```
<form class="navbar-search pull-right" data-bind="submit: findBook">
    <input type="text" class="search-query" placeholder="Search" id="search-input"> 
    <i class="icon-search"></i>
    <input type="submit" value="Submit">
</form> 
```

我在这里列出这些书：

```
<ul id="container" class="list" data-bind="foreach: books">
    <li>
    <div>
    <table>
    <tr>
    <td class="center">
    <a data-bind="attr:{href: url}">            
       <img width="150" class="img-polaroid shadow" data-bind="attr:{src: image}">
    </a>
    </td>
    </tr>   
    <tr>
    <td class="center">
        <h6 data-bind="text: name"></h6>
    </td>
    </tr>
    </table>
    </div>
    </li>
</ul> 
```

`findBook`我的 ViewModel 中有一个方法：

```
 self.books = ko.computed(function() {
        return ko.utils.arrayFilter(library, function(book) { 
          return self.selectedCategory() == null ||
              book.category === self.selectedCategory(); 
          })
    });
    self.findBook = function() {
        self.books = ko.computed(function() {
            return ko.utils.arrayFilter(library, function(book) {
                return book.name.match(new RegExp($('#search-input').val(), 'i'));   
            });
        });
    };       
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:42:39.237

您的`findBook`函数正在尝试将`books`计算出的 observable 替换为不同的 observable。您的视图已经绑定到前一个视图，因此您不会在那里看到任何更改。

您需要更改`books`计算出的 observable 以依赖于某些过滤器。如果未设置过滤器，请包含该项目。如果设置了过滤器，请将其排除。

```
self.selectedCategory = ko.observable('');
self.nameFilter = ko.observable('');

self.books = ko.computed(function () {
    var selectedCategory = self.selectedCategory(),
        nameFilter = self.nameFilter(),
        selectedFilter = filter && new RegExp(filter, 'i');
    return ko.utils.arrayFilter(library, function (book) {
        var validCategory = !selectedCategory || book.category === selectedCategory,
            validFilter = !selectedFilter || book.name.match(selectedFilter);
        return validCategory && validFilter;
    });
});

self.searchInput = ko.observable();
self.findBook = function (element) {
    self.nameFilter(self.searchInput());
}; 
```

[演示](http://jsfiddle.net/jeff1203/NZmG4/)

# loops - 为什么我得到一个无限循环？

> ID：13222571
> 
> 赞同：0
> 
> 时间：2012-11-04T20:30:30.687
> 
> 标签：loops, infinite

我的输出反复打印正面或负面。为什么我得到一个无限循环？我使用了以下内容：

```
include iostream 
using namespace std; 

int main()
{
    int num;

    cout<<"enter number"<<endl;
    cin>>num;

    while(num!=0)
    {
        if(num>0)
            cout<<"positive"<<endl;
        else
            cout<<"negative"<<endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:32:12.823

因为你有`while(num!=0)`并且没有任何东西可以改变它在循环中的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:33:27.047

的值`num`在循环体中没有改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:33:37.213

您应该更改`num`循环内部的值，因为 while 循环的条件永远不会变为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:35:05.930

您还需要在循环中读取该值。如果你不这样做，那么**num**不会改变并且永远保持不变，因此你要么得到一个无限循环，要么什么都没有（对于 num==0）

```
{int num;

cout<<"enter number"<<endl;
cin>>num;

while(num!=0)
{
    cout<<"enter number"<<endl;
    cin>>num;

    if(num>0)
        cout<<"positive"<<endl;
    else
        cout<<"negative"<<endl;
}
return 0; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T20:47:26.493

基于 madflame991 的回答，这里是一个改进版本:)

```
include iostream 
using namespace std; 

int main()
{
    int num;

    do
    {
        cout<<"enter number"<<endl;
        cin>>num;

        if(num>0)
            cout<<"positive"<<endl;
        else
            cout<<"negative"<<endl;
    }while(num!=0);

    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-04T20:44:42.163

这是因为您的代码的逻辑。您首先从标准输入中读取一个数字，然后根据该数字不等于 0 的条件构造一个 while 循环。因此，如果通过标准输入提供的 num 的值不等于 0，您的程序将重复循环体一次又一次。

在此代码中，不需要 while 循环本身。如果只是想根据 num 是否为正/负向用户打印一条消息，您可以离开 if / else 部分并像这样摆脱 while 循环：

```
 using namespace std; 
    int main() {

    int num;

    cout<<"enter number"<<endl;
    cin>>num;

    while(num!=0)
    {
        if(num>0)
            cout<<"positive"<<endl;
        else
            cout<<"negative"<<endl;
    }

    return 0; 
} 
```

另一种可能性是用户有机会多次输入 num 并在某些条件下中断 while 循环，如下所示：

```
using namespace std; 
int main() {

int num;

do {
cout<<"enter number"<<endl;
cin>>num;
   if(num>0)
        cout<<"positive"<<endl;
    else if(num < 0)
        cout<<"negative"<<endl;
} while(num!=0);

return 0; 
```

}

如果 num 等于 0，则循环将在此处结束。您还可以`break`根据某些条件显式地退出循环。

# database - 为照片设计一个（简单的）关系数据库？

> ID：13222572
> 
> 赞同：1
> 
> 时间：2012-11-04T20:30:31.270
> 
> 标签：database, database-design, relational-database

我有一本我认为是关于数据库设计的好书（Fred Rolland 的数据库本质），我也阅读了这个网站；[http://goo.gl/TxDq4](http://goo.gl/TxDq4)。这两种资源都很棒，但它们使用了涉及客户和公司交互的非常结构化的示例。

我正在尝试创建一个包含对数百张照片的引用的数据库。作为我正在进行的项目的一部分，我希望允许用户创建幻灯片。如果我正确理解了这个理论，这代表了一个“多对多”的关系，我需要用一个“连接表”来打破它。

我无法理解的是这个连接表应该是什么样子，或者它实际执行什么功能。我的感觉是，我试图创建的加入类比拥有“订单线”或类似的更模糊。我的初稿，带有加入课程，如下所示：http: [//img28.imageshack.us/img28/2756/photodb2.png](http://img28.imageshack.us/img28/2756/photodb2.png)

然后我只是对加入课程的实际目标感到困惑。一张幻灯片可以包含多张照片，一张照片可以出现在多张幻灯片中。

对于加入类 SlideshowView，我想我正在创建一个幻灯片的“实例”，其中该特定幻灯片只能包含任何一张照片的一个实例。在这种情况下，我对 SlideshowView 和 Slideshow 之间的关系感到困惑！

事实上，再看一遍，我的图表就更没有意义了……一个 SlideshowView 只能包含一个 Slideshow，但一个 Slideshow 可以是多个 SlideshowView 的一部分？问题是，如果我将关系设为一对一，那不是让 SlideshowView 变得多余吗？

当我从编程的角度考虑这个问题时，我会简单地要求用户选择一个包含许多照片的幻灯片，在这种情况下，幻灯片和幻灯片视图有什么区别？我是否过于复杂了？真是“拧我的瓜”！我们将不胜感激地收到有关如何进行此操作的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:33:11.287

对于多对多关系，你的左手关系是错误的。一张照片可以出现在许多幻灯片中，但您以相反的方式绘制了它 - 实际上，您已经为一对多建模了一个不必要的中间表，这就是为什么它对您来说似乎是错误的。Slideshow 和 SlideshowView 实际上与您绘制图表的方式相同。

用户永远不会“看到”中间的链接表。(S) 他将选择多张照片进行幻灯片放映；对于其中的每一个，链接表中有一行将这些照片链接到新的幻灯片，但不排除它们也出现在其他幻灯片中。对于最终用户，只有照片和幻灯片是可见的。我会亲自调用链接表 SlideshowPhotograph。以下是三张照片和两张幻灯片的 ID 值，显示照片 109 出现在两张幻灯片中。

```
Photograph    | Link                        | Slideshow
ID            | PhotographID SlideshowID    | ID
107           | 107          23             | 23
108           | 109          23             | 24
109           | 109          24             | 
```

# mips - MIPS 32 位架构：如何在同一时钟周期内读取和写入寄存器文件中的寄存器？

> ID：13222573
> 
> 赞同：8
> 
> 时间：2012-11-04T20:30:31.530
> 
> 标签：mips, cpu-registers, computer-architecture

我的计算机体系结构书籍解释说

> “由于对寄存器文件的写入是边沿触发的，我们的设计可以在一个时钟周期内合法地读取和写入同一个寄存器：读取将获得在较早时钟周期写入的值，而写入的值将可用于读入随后的时钟周期。”

这有点道理，我有点理解寄存器文件发生了什么。但是，我不明白每个事件何时发生。假设我们正在读取 32 个寄存器文件之一，并在同一个周期中写入它。什么时候读取寄存器？什么时候写？我不完全理解时钟边沿是如何触发事件的，所以解释一下也是有帮助的。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:30:39.280

读取寄存器的值是异步的，而在您在课堂上工作的体系结构中，寄存器是同步写入的（即写入是边沿触发的）。

这意味着您可以读取寄存器的当前值，对其应用一些操作（例如添加一些立即数）并在下一个时钟上升沿写入结果。

假设您要发出一个`addiu $1, $1, 123`，即取 的当前值`$1`，加上 123 并将结果存储回`$1`.

在时钟周期开始时，控制单元将指示寄存器文件将 $1 的内容放入进入 ALU 的数据总线之一。控制单元还将指示将立即数 123 放入也进入 ALU 的其他数据总线。加法只是在 ALU 内部实现的组合电路，将计算所述加法并将结果放入连接寄存器文件的数据总线中进行存储。所有这些都是在时钟上升沿发生之前完成的，并且加法的结果会在下一个上升沿出现。在某个时刻出现上升沿，加法的结果现在被写回寄存器`$1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T12:54:47.817

寄存器文件是由触发器构建的。每个触发器都有一个存储、一个输入、一个输出和一个触发器。输出始终呈现存储的值，因此可以一直读取。随着触发器的上升沿，输入值移动到存储中。

# android - 是否可以扩展或实现游标？

> ID：13222574
> 
> 赞同：2
> 
> 时间：2012-11-04T20:30:46.637
> 
> 标签：android, cursor

我处于一种可能需要操作两个单独`Cursor`对象的情况。我希望有办法通过组合两个单独的光标来创建我们自己的光标。但我不确定它是否被允许。在您无法阅读的地方阅读，但我想对此提出一个具体问题，因此至少对其他有类似情况的人给予一些关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:34:51.117

> 我希望有办法通过组合两个单独的光标来创建我们自己的光标

你试过`MergeCursor`吗？引用[文档](http://developer.android.com/reference/android/database/MergeCursor.html)：

> 一个方便的类，可让您将一组光标表示为单个线性光标。显示的光标模式完全取决于 MergeCursor 的创建者，如果需要，可能会有所不同。对 getColumns、getColumnIndex 等的调用将返回 MergeCursor 当前指向的行的值。

此外，如果您的目标是以`Cursors`某种形式显示两者`AdapterView`，您可以在级别使用[my`MergeAdapter`](https://github.com/commonsguy/cwac-merge)和连接事物`Adapter`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:54:48.560

即使您找到了适合您的具体用例的解决方案，我仍然想回答您的主要问题。

是的，可以实现自己的游标。

[光标](http://developer.android.com/reference/android/database/Cursor.html)是一个公共接口，每个人都可以实现。

然而，它有大量的方法需要实现。

使用[AbstractCursor](http://developer.android.com/reference/android/database/AbstractCursor.html)或[AbstractWindowedCursor](http://developer.android.com/reference/android/database/AbstractWindowedCursor.html)作为基类可以帮助减少开销。

可用的具体实现也可以扩展。

`CrossProcessCursor, CrossProcessCursorWrapper, CursorWrapper, MatrixCursor, MergeCursor, MockCursor, SQLiteCursor`

# post - POST 请求后的未知 GET 请求

> ID：13222582
> 
> 赞同：1
> 
> 时间：2012-11-04T20:31:31.333
> 
> 标签：post, get, cgi, meta-tags, shtml

我有一个 a.shtml 页面和一个表单。当我使用 POST 提交表单时，我调用 a.cgi 并使用 META 从 cgi 重定向页面 b.shtml。但我在 access.log 上看到 a.cgi 执行了两次。它会导致一些问题。为什么它被调用了两次，第二个是 GET ，我该如何避免这种情况？它只发生在 Chrome 上。IE、火狐都可以

我的表格：

```
 <form method="post" action="cgi-bin/a.cgi"> ....</form> 
```

cgi中的元：

```
 printf("<META HTTP-EQUIV=\"Refresh\" CONTENT=\"3;url='/b.shtml'\ "/>"); 
```

访问日志：

```
..POST /cgi-bin/a.cgi HTTP/1.1|Host: xxx.xxx.xxx.xxx|Connection: keep-alive|Content-Length: 42|Cache-Control: max-age=0|Origin: .....
..GET /cgi-bin/a.cgi HTTP/1.1|Host: xxx.xxx.xxx.xxx|Connection: keep-alive|User-Agent: Mozilla/5.0 (Windows NT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:44:10.397

听起来您想使用 html 元刷新元素触发重新提交 HTTP POST。

我不知道这是否可能或可靠。希望这些术语至少可以帮助您进行谷歌搜索。

您可能希望考虑使用会话。

编辑2：

我发现了这个 SO 问题：“ [POST 请求发送 Refresh 标头的位置使 Firefox 创建 GET 请求但仍保留 POST 数据](https://stackoverflow.com/questions/7294717/post-requesting-a-location-sending-refresh-header-makes-firefox-create-get-reque)”

# ruby - 在基于 Ruby 的 REST API 中表示本地时间戳

> ID：13222584
> 
> 赞同：1
> 
> 时间：2012-11-04T20:31:44.277
> 
> 标签：ruby, timestamp, api-design

也许这个问题应该分成两篇文章，但我目前有几个商业客户的 API。我目前正在使用带有 UTC 时区的 ISO 8601 时间戳来表示时间。但是，我不喜欢将这些时间戳附加到任何时区的想法，因为无论您在哪个时区，时间都应该相同。5PM UTC 应该是 5PM CST，等等......

我知道您可以将 Z 从 ISO 时间戳中去掉，它将被解释为您所处的任何本地时间。这样可以吗？如果是这样，我如何在 Ruby 中做到这一点？我阅读了 Time 课程的文档，但对此一无所知。

**编辑：**让我稍微重新措辞一下，或者至少澄清一些事情。我寻找未附加到时区的时间戳的原因正是因为我知道我的客户端服务器和 API 服务器几乎不会匹配。如果客户端提交带有时间的事件，则该时间需要不明确地等于特定于用户正在处理的事件的不明确区域设置。

这是一个拗口……假设我正在开发一个事件调度程序。每个事件都属于公司的店面或位置。当显示某个位置的时间时，假定显示的时间在该位置的时区中，并且为了清楚起见，永远不应在格式化为用户本地时区的时间显示。如果我正在查看东海岸的调度程序，但查看西海岸位置的事件，我应该看到的时间应该是西海岸位置的本地时间，而不是针对我的时区进行调整。

我知道一个解决方案可能是简单地存储时间及其相关位置的时区信息。但是用户想要将时间转换为他们的时区的用例非常罕见，我宁愿让我的 API 更容易实现……这实际上是我最初的实现，但在许多不同的环境中和跨多个环境中实现 API对于编程语言，很明显，对于许多语言来说，显示该时间戳所在时区的本地时间是一个障碍。如果用户想要将时间转换为他们的本地时区，我可以轻松地为位置对象本身存储全球时区信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:50:08.123

我不知道您所说的“无论您在哪个时区，时间都应该相同。UTC 下午 5 点应该是中部标准时间下午 5 点，等等。”。UTC 时间下午 5 点显然**不是**CST 下午 5 点！

无论如何，我不认为你提出的做法是一个好的做法。假设您`Z`省略了时间戳并将时间戳解释为您所在的任何本地时间。由于这是一个网络 API，客户端和服务器可能不在同一个时区。当客户端提交“本地”时间时，这意味着什么？客户端的本地时间（如果是，服务器如何知道那是什么？）？服务器上的当地时间？这是模棱两可的。这就是为什么唯一合理的做法是始终使用 UTC 的关键所在。

如果可能相关，您*可以将时区附加到时间戳。*例如，“你应该在 2012-11-10T22:00:00Z 默哀一分钟，以纪念在第一次世界大战中牺牲的士兵”听起来很奇怪，因为[纪念日](http://en.wikipedia.org/wiki/Remembrance_Day)不是 11 月 10 日！一旦你把新西兰时区放在那里，“你应该在 2012-11-11T11:00:00+13:00 观察一分钟的沉默”听起来好多了......在这种情况下，你可以保留和时间戳（在本地或UTC）以及时区偏移量（例如将它们一起存储在您的数据库中）。

但是，它确实取决于您的时代代表什么。例如，在“春分时，日落发生在 18:00”中，使用不受时区限制的抽象时间是有意义的（在每个时区都是如此，和/或您正在谈论太阳时）。但是在这个抽象时间上加上一个日期没有什么意义，所以我认为在这种情况下你不会谈论 ISO8601。

# android - 横向和反向横向的方向变化

> ID：13222591
> 
> 赞同：2
> 
> 时间：2012-11-04T20:32:17.357
> 
> 标签：android

我正在使用 View.onConfigurationChanged 机制来检测方向变化。由于 Configuration 对象只知道横向和纵向，因此我使用 activity.getWindowManager().getDefaultDisplay().getOrientation() 来区分 Surface.ROTATION_90 和 Surface.ROTATION_270 （横向但从不同的侧面）。只要我不将手机从 Surface.ROTATION_90 翻转到 Surface.ROTATION_270 而不越过 Surface.ROTATION_0，这就可以正常工作。在这种情况下，不会调用 onConfigurationChanged（因为两个方向都是横向的，但一个方向与另一个方向相反）。

是否存在报告所有 4 个可能方向的旋转更改事件或覆盖？

# ruby-on-rails - 将支付网关（基于 activemerchant）与 spree 集成

> ID：13222595
> 
> 赞同：5
> 
> 时间：2012-11-04T20:32:29.743
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, payment-gateway, spree

我正在尝试将 payu.in 支付网关集成到我的 rails 应用程序中。我已将他们的 gem 集成到应用程序中，但是当我去

> /admin/payment_methods/新

我无法在**提供商**选项下看到支付网关。

我已按照[http://guides.spreecommerce.com/payment_gateways.html中规定的步骤进行操作](http://guides.spreecommerce.com/payment_gateways.html)

我的 app/models/spree/gateway/payu.rb 看起来像这样：

```
module Spree
  class Gateway::Payu < Gateway
    def provider_class
      ActiveMerchant::Billing::Integrations::PayuIn
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T23:38:28.610

我相信你需要这样的东西：

```
config.after_initialize do |app|
  app.config.spree.payment_methods += [
    Spree::BillingIntegration::PaypalExpress,
    Spree::BillingIntegration::PaypalExpressUk
  ]
end 
```

（见：[https](https://github.com/spree/spree_paypal_express/blob/master/lib/spree_paypal_express/engine.rb#L23-28) ://github.com/spree/spree_paypal_express/blob/master/lib/spree_paypal_express/engine.rb#L23-28 ）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T16:32:43.663

对我来说，当我添加类似的代码行时它才起作用：

```
config.after_initialize do
  Rails.configuration.spree.payment_methods << Spree::PaymentMethod::Pagarme
end 
```

到我的 config/application.rb 文件。

（我在[http://blog.siyelo.com/active-merchant-and-spree](http://blog.siyelo.com/active-merchant-and-spree)看到了）

# sql - min() 改进

> ID：13222602
> 
> 赞同：1
> 
> 时间：2012-11-04T20:33:19.310
> 
> 标签：sql, postgresql

这是我的数据库项目。

表**用户_**

```
select id, name from user_;

 id |   name
----+----------
  1 | bartek
  2 | bartek_m
  3 | bartek_k
  4 | bartek_b 
```

表**顺序_**

```
select id, employee_id, user_id from order_;

 id | employee_id | user_id
----+-------------+---------
  1 |           3 |       1
  2 |           4 |       1
  3 |           4 |       1
  4 |           4 |       1
  5 |           3 |       1 
```

每个用户都有一个角色（我没有在这里添加表 role_ 但它存在）。每个具有员工角色的用户的 ID 可以分配给 order_.employee_id 我需要获得具有最少订单数的用户

```
select a.id, min(a.count) from (
    select u.id, count(u.id) from user_ u, order_ o
    where u.id = o.employee_id
    group by u.id
) as a group by a.id, a.count

 id | min
----+-----
  4 |   3
  3 |   2 
```

我认为我的查询是错误的。任何人都可以更改查询以仅返回该用户具有最少订单数的 ID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:36:35.007

喜欢

```
SELECT u.id, count(*)
FROM user_ AS u JOIN order_ AS o ON (u.id=o.employee_id)
GROUP BY u.id
ORDER BY 2 LIMIT 1 
```

（如果我没看错的话）？

# python - 您可以将python作为窗口程序运行吗？

> ID：13222607
> 
> 赞同：0
> 
> 时间：2012-11-04T20:33:34.873
> 
> 标签：python, user-interface, window

大家好，python 用户，我提出了一个我一直想知道的问题。我喜欢python，并用它制作了很多程序。现在我想做的是（或知道怎么做）制作一个 python 程序，但是在一个窗口中运行它，你可以点击按钮而不是输入数字来选择东西。我只想知道天气是否可以这样做，如果可以，请告诉我去哪里学习。好的，它不适用于 iPhone，抱歉我不清楚，我没有意识到 iPhone 是标签之一。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T20:36:13.727

是的，你可以用 Python 制作一个带有 GUI 的程序。请参阅 Python 文档：

*   [图形用户界面常见问题解答](http://docs.python.org/2/faq/gui.html)

Tkinter、wxWidgets 和 Qt 是一些最流行的 Python UI 工具包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:37:10.353

您可以这样做，该库称为`tkinter`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:51:39.143

有许多 GUI 库可供选择，但我喜欢 Tkinter，因为它很简单而且无需安装（Python 附带）。

但有些人更喜欢 wxPython 或其他，例如 PyQT。你必须决定你喜欢哪个，或者如果你不想经历安装库的麻烦只是为了尝试它们，就选择 Tkinter。

# android - NFC 意图过滤器 - 发送消息非主要活动

> ID：13222611
> 
> 赞同：2
> 
> 时间：2012-11-04T20:33:51.997
> 
> 标签：android, nfc

我确信这很简单，但我无法弄清楚。我要做的就是通过 NFC 发送消息。如果我将它发送到主要活动，我的代码可以完美地工作，但我不知道如何将它发送到不同的活动。我已经查看了 Android 开发人员页面上的 NFC 和 Intent Filter 文章，但仍然不确定如何执行此操作。我正在尝试将其发送到 NFC 活动，我将在下面发布我的清单和 NFC 类。

显现：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.justbaumdev.tagsense"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.NFC" />

    <uses-feature android:name="android.hardware.nfc" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo" >
        <activity
            android:name=".TagSense"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="com.justbaumdev.tagsense.NFC" android:exported="false">
            <intent-filter>
                <action android:name="android.nfc.action.NDEF_DISCOVERED" />

                <category android:name="android.intent.category.DEFAULT" />

                <data android:mimeType="application/com.justbaumdev.tagsense" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

NFC类：

```
package com.justbaumdev.tagsense;

import org.json.JSONArray;
import org.json.JSONException;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.net.wifi.WifiManager;
import android.nfc.NdefMessage;
import android.nfc.NdefRecord;
import android.nfc.NfcAdapter;
import android.nfc.NfcAdapter.CreateNdefMessageCallback;
import android.nfc.NfcAdapter.OnNdefPushCompleteCallback;
import android.nfc.NfcEvent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.os.Parcelable;
import android.widget.Toast;

public class NFC extends Activity implements CreateNdefMessageCallback, OnNdefPushCompleteCallback {
    private NfcAdapter mNfcAdapter;
    private static final int MESSAGE_SENT = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nfc);
        mNfcAdapter = NfcAdapter.getDefaultAdapter(this); // Check for available NFC Adapter
        if (mNfcAdapter == null) 
        {
            Toast.makeText(this, "NFC is not available", Toast.LENGTH_LONG).show();
            finish();
            return;
        }
        else 
        {
            mNfcAdapter.setNdefPushMessageCallback(this, this); // Register callback to set NDEF message
            mNfcAdapter.setOnNdefPushCompleteCallback(this, this); // Register callback to listen for message-sent success
        }
    }

    @Override
    public void onResume() {
        super.onResume();
        // Check to see that the Activity started due to an Android Beam
        if (NfcAdapter.ACTION_NDEF_DISCOVERED.equals(getIntent().getAction())) {
            processIntent(getIntent());
        }
    }

    @Override
    public void onNewIntent(Intent intent) {
        // onResume gets called after this to handle the intent
        setIntent(intent);
    }

    @Override
    public NdefMessage createNdefMessage(NfcEvent event) {
        WifiManager wm = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        String mac = wm.getConnectionInfo().getMacAddress();
        String newMac = mac.substring(0, 2);
        mac = mac.substring(2);
        int hex = Integer.parseInt(newMac, 16) + 0x2;
        newMac = Integer.toHexString(hex);
        String text = newMac + mac;

        NdefMessage msg = new NdefMessage(NdefRecord.createMime(
                "application/com.justbaumdev.tagsense", text.getBytes()));
        return msg;
    }

    /**
     * Implementation for the OnNdefPushCompleteCallback interface
     */
    @Override
    public void onNdefPushComplete(NfcEvent arg0) {
        // A handler is needed to send messages to the activity when this
        // callback occurs, because it happens from a binder thread
        mHandler.obtainMessage(MESSAGE_SENT).sendToTarget();
    }

    /** This handler receives a message from onNdefPushComplete */
    private final Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MESSAGE_SENT:
                Toast.makeText(getApplicationContext(), "Message sent!", Toast.LENGTH_LONG).show();
                break;
            }
        }
    };

    /**
     * Parses the NDEF Message from the intent and prints to the TextView
     */
    //TODO Currently overwrites any previously saved mac addresses.  Get FB ID as value.  Auto end activity.
    void processIntent(Intent intent) {
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        // only one message sent during the beam
        NdefMessage msg = (NdefMessage) rawMsgs[0];
        // record 0 contains the MIME type, record 1 is the AAR, if present
        //textView.setText(new String(msg.getRecords()[0].getPayload()));
        String payload = new String(msg.getRecords()[0].getPayload());
        Toast.makeText(this, new String(msg.getRecords()[0].getPayload()), Toast.LENGTH_LONG).show();

        SharedPreferences appData = getSharedPreferences("appData", Context.MODE_PRIVATE);
        SharedPreferences.Editor editor = appData.edit();
        String addresses = appData.getString("mac_address", null);
        if(addresses==null)
        {
            JSONArray addressArray = new JSONArray();
            addressArray.put(payload);
            addresses = addressArray.toString();
        }
        else
        {
            try {
                if(!addresses.contains(payload))
                {
                    JSONArray addressArray = new JSONArray(addresses);
                    addressArray.put(payload);
                    addresses = addressArray.toString();
                }
            } catch (JSONException e) {
                Toast.makeText(this, "Error adding new friend. Please try again.", Toast.LENGTH_SHORT).show();
            }
        }
        editor.putString("mac_address", addresses);
        editor.commit();
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:51:58.223

删除属性`android:exported="false"`。另请参阅[https://stackoverflow.com/a/12719621/1202968](https://stackoverflow.com/a/12719621/1202968)

# php - 在 PHP 中搜索和替换 CSS 值

> ID：13222612
> 
> 赞同：-6
> 
> 时间：2012-11-04T20:33:52.993
> 
> 标签：php, css, replace

我的站点从其他站点加载了一个 css 文件，其中包含以下内容：

```
../../1/images/pager1.png
../../2/images/pager2.png
...
../../n/images/pagern.png 
```

我要换

```
../../random/images/ 
```

经过：

```
/images/ 
```

如何在 PHP 中执行

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:51:05.433

试试这个 ：

```
<?php
$filename = "filename.css";
$file  = file_get_contents($filename);
$file  = preg_replace("#\.\./.*/images/#", "/images/", $file);
file_put_contents($filename, $file); 
```

# javascript - 当 Ajax 返回将一些 var 设置为 0 时，我需要停止所有后续请求，如何在插件中？

> ID：13222617
> 
> 赞同：0
> 
> 时间：2012-11-04T20:34:21.853
> 
> 标签：javascript, jquery, jquery-plugins

我有一个插件，每次点击页面时都会触发分页。请注意，此分页已预先加载了所有数据。我启动的插件可以检索当前分页视图上的其他信息页面。因此，每次单击都会实例化一个新插件 - 但与以前相同（命名空间），因此它会覆盖先前设置的数据集等。

无论如何，可能有一点我正在点击的 .ajax url 被关闭，以便返回将处理类似 data.isOff = 1 或 data.isOff = 0 等的东西。这样我就知道该服务被抑制了.

有没有办法将值从插件的一个实例化到下一个插件，如果该值是假的，那么不要实例化新的插件调用..即..不要点击 init 函数。只是失败了。

当然，我可以设置一个全局变量并以这种方式设置它，但很好奇是否有一种方法可以在插件中完成，以便不存在任何外部变量。

我试图将它放在我的初始化函数中，并将其设置在我的选项中。似乎当我尝试实例化一个新插件时，来自先前数据的所有赌注都消失了。

# java - 评估二叉表达式树的算法？

> ID：13222620
> 
> 赞同：-2
> 
> 时间：2012-11-04T20:34:39.517
> 
> 标签：java, recursion

我讨厌递归，我不能轻松地跟踪代码，但是对于树我别无选择。

这是我到目前为止所尝试的。

```
private int evaluate(Node n)
{
    if (n != null)
    {
        if (n.isLeaf())  // n is a node with a number
            return Integer.parseInt(n.element);
        else
        {
            int left = evaluate(n.left);
            int right = evaluate(n.right);
            return calculate(left, n.element, right);
        } //end else
    } //end if
} //end evaluate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:37:43.273

你的意思是：

```
return calculate(left, n.element, right); 
```

我假设您的节点是一个操作，即“+”、“-”等。

您的“计算”必须对 int “left”和“right”执行相应的操作，您就完成了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:02:56.330

该方法没有为每个路径提供有效的返回。所以你需要`return ...`在方法的最后添加。我认为零是合适的，因为在您的递归中实际上不应该访问此路径。

```
private int evaluate(Node n)
{
    if (n != null)
    {
        if (n.isLeaf())  // n is a node with a number
            return Integer.parseInt(n.element);
        else
        {
            int left = evaluate(n.left);
            int right = evaluate(n.right);
            return calculate(left, n.element, right);
        } //end else
    } //end if
    return 0;
} //end evaluate 
```

除此之外，您的递归似乎状况良好。

# c++ - 影响格雷厄姆寻找凸包的算法的未知错误

> ID：13222621
> 
> 赞同：2
> 
> 时间：2012-11-04T20:34:43.323
> 
> 标签：c++, math, computational-geometry

我已经编写了格雷厄姆算法，但它仍然给了我凸包的错误点。我需要帮助。认为我的符号功能中有一个错误，但不知道它是什么。

```
#include <cstdio>
#include <algorithm>
#include <math.h>
#define pb push_back
#define mp make_pair
#include <vector>

using namespace std;

vector <pair<double, double> > st;
pair<double, double> p[1000];
double x, y;

int f(pair <double,double> a, pair<double, double> b)
{
    double x1 = x - a.first, x2 = x - b.first;
    double y1 = y - a.second, y2 = y - b.second;    
    return ((x1*y2-y1*x2) < 0);
}

void setlast(double &x1, double &y1, double &x2, double &y2)
{    
    x2 = st[st.size()-1].first;
    y2 = st[st.size()-1].second;
    x1 = st[st.size()-2].first;
    y1 = st[st.size()-2].second;
} 
```

标志改进我使用双打

```
 double sign(double x1,double y1, double x2,double y2, double y3,double x3)
    {
        double xx1 = x2 - x1, xx2 = x3 - x1;
        double yy1 = y2 - y1, yy2 = y3 - y1;
        return (xx1*yy2-yy1*xx2);
    }

int main()
{    
    int n;
    x = 0x3f3f3f3f;
    y = 0x3f3f3f3f;
    scanf("%d", &n);
    for(int i = 0; i < n; i++)
    {
        scanf("%lf %lf", &p[i].first, &p[i].second);
        if(p[i].first <= x && p[i].second <= y)
            x = p[i].first,
            y = p[i].second;
    }
    sort(p, p + n, f);
    p[n].first = x;
    p[n].second = y;
    st.pb(mp(p[0].first, p[0].second));
    st.pb(mp(p[1].first, p[1].second));
    double x1, x2, x3, y1, y2, y3; 
```

在这里我遍历所有向量并尝试确定凸包的点

```
 for(int i = 2; i < n; i++)
    {
        x3 = p[i].first;
        y3 = p[i].second;
        setlast(x1,y1,x2,y2);
        while(1)
            if(sign(x1,y1,x2,y2,x3,y3) < 0)
            {
                st.pb(mp(x3, y3));
                break;
            }
            else
                st.pop_back(),
                setlast(x1, y1, x2, y2);
    } 
```

这里打印凸包

```
for(int i = 0; i < st.size(); i++)
        printf("%lf %lf\n", st[i].first, st[i].second);
    return 0
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:47:39.750

我的问题，为什么`int f(pair<int, int>, pair<int, int>)`take`pair<int, int>`而不是`pair<double, double>`？

另外，为什么不将它命名为信息丰富的东西`compare_blah`？

最后，为什么它不返回`bool`而不是返回`int`？两者都可以，但如果你返回一个`bool`. 让阅读它的人清楚你的程序应该是你的主要目标。让它做它应该做的事情是次要目标。毕竟，它做它应该做的只是一个暂时的状态。最终有人会希望它做其他事情。

事情可能是你的`pair<int, int>`问题。您在该函数中进行了几次隐式类型转换，`int`并`double`在左右丢失信息。我怀疑那是你的意图。

如果您愿意根据自己的`pair`喜好使用 typedef `typedef pair<double, double> point2d_t`，然后`point2d_t`在任何地方使用，您可以保护自己免受此类错误的影响，并使您的程序在交易中更清晰。

我对格雷厄姆的算法不够熟悉，无法评估您对`abs`inside of的使用`f`，尽管对此发表评论的人很可能是正确的。

# ruby-on-rails - Heroku 启动应用程序错误 Ruby on Rails

> ID：13222622
> 
> 赞同：1
> 
> 时间：2012-11-04T20:34:48.060
> 
> 标签：ruby-on-rails, ruby, heroku

尝试在 Heroku 上启动应用程序，但不断收到应用程序错误。这是heroku日志，请让我知道我可以做些什么来让它运行。我们已经实现了 pusher，并且可以让网站在本地主机上运行（甚至是跨不同 localhost 机器的 pusher 功能），但除此之外它在 heroku 上不起作用。

```
2012-11-04T19:57:31+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-11-04T19:57:31+00:00 app[web.1]: /app/app/controllers/comments_controller.rb:2:in `<class:CommentsController>': undefined method `post' for CommentsController:Class (NoMethodError)
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/app/controllers/comments_controller.rb:1:in `<top (required)>'
2012-11-04T19:57:31+00:00 app[web.1]: Exiting
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:313:in `depend_on'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-11-04T19:57:31+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-11-04T19:57:31+00:00 app[web.1]:   from script/rails:6:in `require'
2012-11-04T19:57:31+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-11-04T19:57:32+00:00 app[web.1]: => Booting WEBrick
2012-11-04T19:57:32+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:46992
2012-11-04T19:57:32+00:00 app[web.1]: => Call with -d to detach
2012-11-04T19:57:32+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-11-04T19:57:32+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-11-04T19:57:32+00:00 app[web.1]: Exiting
2012-11-04T19:57:32+00:00 app[web.1]: /app/app/controllers/comments_controller.rb:2:in `<class:CommentsController>': undefined method `post' for CommentsController:Class (NoMethodError)
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/app/controllers/comments_controller.rb:1:in `<top (required)>'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `block in require'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:251:in `require'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:359:in `require_or_load'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:313:in `depend_on'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225:in `require_dependency'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/config.ru:4:in `require'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/config.ru:4:in `block in <main>'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/config.ru:1:in `new'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/config.ru:1:in `<main>'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:200:in `app'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:46:in `app'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:301:in `wrapped_app'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/server.rb:252:in `start'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/server.rb:70:in `start'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:55:in `block in <top (required)>'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `tap'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:50:in `<top (required)>'
2012-11-04T19:57:32+00:00 app[web.1]:   from script/rails:6:in `require'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `eval'
2012-11-04T19:57:32+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:40:in `parse_file'
2012-11-04T19:57:32+00:00 app[web.1]:   from script/rails:6:in `<main>'
2012-11-04T19:57:33+00:00 heroku[web.1]: Process exited with status 1
2012-11-04T19:57:33+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-04T19:57:33+00:00 heroku[web.1]: Process exited with status 1
2012-11-04T20:07:27+00:00 heroku[web.1]: State changed from crashed to down
2012-11-04T20:07:27+00:00 heroku[web.1]: State changed from down to starting
2012-11-04T20:07:39+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-04T20:17:44+00:00 heroku[web.1]: State changed from crashed to down
2012-11-04T20:17:44+00:00 heroku[web.1]: State changed from down to starting
2012-11-04T20:17:56+00:00 heroku[web.1]: State changed from starting to crashed
2012-11-04T20:22:51+00:00 heroku[router]: Error H10 (App crashed) -> GET followalong.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-11-04T20:22:52+00:00 heroku[router]: Error H10 (App crashed) -> GET followalong.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:48:49.437

正如您所提到的，您在本地主机上正常工作时没有收到此错误。尝试删除或评论 CommentsController 调用并检查您是否能够在 Heroku 上部署应用程序？一旦让应用程序运行，您就可以启用并检查导致此错误的真正原因。

# python - 矩阵类程序

> ID：13222628
> 
> 赞同：0
> 
> 时间：2012-11-04T20:35:34.803
> 
> 标签：python

我得到`TypeError: 'int' object is not iterable`下面的代码，为什么？

```
def temp_media(c, l):
    c_ini = c
    l_ini = l
    res_vert = 0
    res_horiz = 0
    dim = dimensoes()
    c_max = dim[0] // 2
    l_max = dim[1]
    for l in l_max:
        for c in c_max:
            res_vert = res_vert + calcula_temp(c, l)
        res_horiz = res_horiz + calcula_temp(c, l)
    return (((res_horiz / (c_max - c_ini)) + (res_vert / (l_max - l_ini))) / 2) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:38:32.847

您需要在 for 循环中使用`range`（或`xrange`在 python 2 中）：

```
c_max = dim[0] // 2
l_max = dim[1]
for l in range(l_max):
    for c in range(c_max): 
```

# email - Magento：在自定义观察者中发送自定义交易电子邮件

> ID：13222629
> 
> 赞同：1
> 
> 时间：2012-11-04T20:35:35.967
> 
> 标签：email, events, magento, smtp, transactional

当管理员手动取消订单时，我正在尝试发送电子邮件。我正在使用 order_cancel_after 事件，并且我的观察者方法运行良好。

但是我的电子邮件没有被解雇。尽管所有代码都已运行，但我得到以下异常（上图）。

`exception 'Zend_Mail_Protocol_Exception' with message 'No recipient forward path has been supplied' in /home/mydomain/www/loja/lib/Zend/Mail/Protocol/Smtp.php:309`

我测试了在我的订单观察者上发送新电子邮件：`$order->sendNewOrderEmail()`，并且新的订单电子邮件正确到达，所以我的 SMTP 没问题。

我在观察者中的代码：

```
class Spalenza_Cancelorder_Model_Observer
{
    public function enviamail(Varien_Event_Observer $observer)
    {
        $order = $observer->getOrder();
        if ($order->getId()) {
            try {
                $translate  = Mage::getSingleton('core/translate');
                $email = Mage::getModel('core/email_template');
                $template = 16;//Mage::getModel('core/email_template') ->loadByCode('Cancelamento Manual by Denis')->getTemplateId();
                Mage::log('Codigo do template: '.$template,null,'events.log');

                $sender  = array(
                'name' => Mage::getStoreConfig('trans_email/ident_support/name', Mage::app()->getStore()->getId()),
                'email' => Mage::getStoreConfig('trans_email/ident_support/email', Mage::app()->getStore()->getId())
                );

                Mage::log($sender,null,'events.log');

                $customerName = $order->getShippingAddress()->getFirstname() . " " . $order->getShippingAddress()->getLastname();
                $customerEmail = $order->getPayment()->getOrder()->getEmail();

                $vars = Array( 'order' => $order );

                $storeId = Mage::app()->getStore()->getId(); 

                $translate  = Mage::getSingleton('core/translate');
                Mage::getModel('core/email_template')
                  ->sendTransactional($template, $sender, $customerEmail, $customerName, $vars, $storeId);
                $translate->setTranslateInline(true);

                Mage::log('Order successfully sent',null,'events.log');
            } catch (Exception $e) {
                Mage::log($e->getMessage(),null,'events.log');
            }
        } else {
            Mage::log('Order not found',null,'events.log');
        }
    }
} 
```

Magento 版本：1.5.1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:59:11.860

这条线

```
$customerEmail = $order->getPayment()->getOrder()->getEmail(); 
```

应该是

```
$customerEmail = $order->getPayment()->getOrder()->getCustomerEmail(); 
```

您应该注意错误消息的内容并检查变量的输出。

# c# - 防止油漆被多次调用

> ID：13222630
> 
> 赞同：1
> 
> 时间：2012-11-04T20:35:47.667
> 
> 标签：c#, winforms, drawing

> **可能重复：**
> [如何暂停控件及其子项的绘制？](https://stackoverflow.com/questions/487661/how-do-i-suspend-painting-for-a-control-and-its-children)
> [Winforms 双缓冲](https://stackoverflow.com/questions/3718380/winforms-double-buffering)

我有一个表格，它绘制了一堆用户定义的控件（其中 81 个），每个控件都包含另外 10 个控件（总共 8,100 个）。这一切似乎都是按顺序绘制的（大约需要 1 秒左右）。

我已经查看了[这](https://stackoverflow.com/questions/7411099/c-sharp-winform-grid-rendering-slow-on-windows-7) [两个](https://stackoverflow.com/questions/835100/winforms-suspendlayout-resumelayout-is-not-enough?answertab=oldest#tab-top)问题，并遵循了 ier 建议（`this.DoubleBuffered = true`在表单和自定义控件以及`SetStyle(ControlStyles.OptimizedDoubleBuffer | ControlStyles.AllPaintingInWmPaint, true);`表单上设置，但这似乎没有做任何事情。

有没有办法保存表单的绘制函数，将其保存在委托中，交换虚拟函数，以便表单根本不会重绘，然后将真实函数放回并触发它。

我认为有一种更标准的方法可以做到这一点，但我找不到它（它不是`SuspendLayout`/`ResumeLayout`那些只处理布局逻辑的）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:58:36.983

这就是答案：（[链接](https://stackoverflow.com/a/487757/558018)）。

但是想想。如果您阻止`Paint`发生，当用户与它们交互时应该如何更新您的 UI 控件？不会有按钮发光，没有文本框光标闪烁等等。

如果您对此感到满意，那么为什么您不[`RenderToBitmap`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.drawtobitmap.aspx)将用户控件的容器用作其背景图像？...

# java - 需要帮助为 Android w 创建一个测验应用程序。HashMaps & 无数据库

> ID：13222631
> 
> 赞同：1
> 
> 时间：2012-11-04T20:35:49.463
> 
> 标签：java, android, hashmap

我的任务是为 Android 创建一个简单的测验应用程序。我**不是**在寻找这个的代码.. 我只是在寻找一个可以说明如何开始使用这个的人（伪代码 ish）。

该程序假设显示**一个术语**和**四个定义**；其中之一是正确的。一旦用户选择了他们认为是哪一个，程序将使用**toast**消息告诉用户它是否正确/不正确。

眼镜：

*   术语需要随机选择，每次运行只显示一次。但是，该定义需要保留在其他问题的定义池中。

*   随机选择的定义（右边的除外）

*   如果程序用完要显示的条款，则程序结束

*   需要使用**ArrayList**来保存项目集合，并使用**HashMap**来保存名称-值对。

*   必须使用 Android的**日志机制**来记录错误消息（通过 try/catch 语句）。

如果您可以通过指导我正确的方向来帮助我，那就太好了：）谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:54:02.460

我会（一如既往地在面向对象的语言中）首先将您的问题映射到真实的对象。在您的情况下，将有两个：

1.  一个`Question`包含四个答案、问题并提供检查给定答案是否正确的方法的类。
2.  一个`Answer`-class，它拥有一个答案以及它是否正确。

至于您的存储问题，我根本不会使用 a `HashMap`。将`Question`-instances 存储在 an 中`ArrayList`并使用[`Random.nextInt()`](http://docs.oracle.com/javase/6/docs/api/java/util/Random.html#nextInt%28%29)-method 从列表中获取随机问题。

在您的`Question`班级中，您会将所有可能的答案存储在另一个`ArrayList`. 要随机化显示答案的顺序，您可以使用[`Collections.shuffle()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)- 方法。

对于演示部分，让您的`Question`-class 返回问题（字符串）和四个答案（字符串）并将它们放入您的小部件中。要确定给出的答案，您可以使用`Answer`-instance（使用数组索引更容易，但更容易出错）。

要检查是否给出了正确的答案，请查询您的`Question`-classes `isCorrect(Answer)`-method 并检查内部中的给定实例`ArrayList`是否被标记为正确的。

# javascript - 为什么 DOM 保持不变，即使控制台在尝试更改链接属性时输出正确的结果应该是什么？

> ID：13222637
> 
> 赞同：1
> 
> 时间：2012-11-04T20:36:17.743
> 
> 标签：javascript, jquery, https

```
function makeLinks(context, url) {
    var sets = context ? $(context + ' a') : $('a'),
        prot = url || window.location.protocol;
    if(prot.match(/https/)){
        lockup(sets);
    }

    function lockup(elem) {
        elem.each(function(){
            var self = $(this), 
                href = self.attr('href');
            if(href.match(/http[^s]/)){

                // This logs the correct output
                console.log(href.replace('http','https'));

                // This fails
                href.replace('http','https');
            }
        });
    }
} 
```

该函数的目的是检查窗口对象的当前协议。
如果是“https:”，那么我希望具有“http”href 的锚点是“https”。

函数调用如下： makeLinks('#wrapper', 'https:');
第二个参数仅用于测试，否则将使用 window.location.protocol

目前，当我在如下标记上调用此函数时：

```
<a href="http://cross-origin-denial.com"></a>
<a href="http://pleasesecureme.com"></a>
<a href="https://imcool.com"></a>

<div id="wrapper">
    <a href="http://cross-origin-denial.com"></a>
    <a href="http://imscrewed.com"></a>
    <a href="http://yougotmetoo.com"></a>
    <a href="https://imcool.com"></a>
</div> 
```

控制台准确地记录了我想要发生的事情，但是，DOM 内部的实际 href 保持不变。

我已经在 Chrome 和 Firefox 中对此进行了测试，结果相同
我很确定我的逻辑在某处（或任何地方）是错误
的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:38:25.843

您没有对`.replace()`.

您需要设置新值。

```
 self.attr('href', href.replace('http','https')); 
```

* * *

或者更好的方法是这样的：

```
function lockup(elem) {
    elem.attr('href', function(i, href) {
        return href.match(/http[^s]/) ? href.replace('http','https') : href;
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:51:27.350

这不应该像下面这样吗 if(href.match(/http[^s]/)){

```
 // This logs the correct output
            console.log(href.replace('http','https'));

            // This fails
            href.replace('http','https');
        }
    }); 
```

改成：

```
 if(href.indexOf('https') == -1) {
       console.log(href.replace('http','https'));

       href.replace('http', 'https');

    } 
```

# ruby-on-rails - 非工作渲染

> ID：13222644
> 
> 赞同：0
> 
> 时间：2012-11-04T20:36:58.587
> 
> 标签：ruby-on-rails, forms, render

我在标题中收到错误消息，但我不明白为什么？

这是我的代码 user.rb

```
has_one :GoldBook
has_many :comments 
```

gold_book.rb

```
has_many :comments
belongs_to :user 
```

评论.rb

```
belongs_to :user
belongs_to :gold_book 
```

评论控制器.rb

```
def create
@gold_book = GoldBook.find(params[:gold_book_id])
@comment = Comment.new(params[:comment])
@comment.goldbook = @gold_book
@comment.user = current_user 
```

gold_books/show.html.erb

```
<%= render 'goldbook' %> 
```

gold_books/_goldbooks

```
<%= render 'comments/form', goldbook: goldbook %> 
```

评论/_form

```
 <%= form_for([goldbook, @comment]) do |f| %>
    <% if @comment.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@comment.errors.count, "error") %> prohibited this comment from being saved:</h2>

      <ul>
      <% @comment.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :content %><br />
    <%= f.text_area :content %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我认为错误出现在评论的形式中，但不确定......我试图让一些想法像一本有很多评论的金书

这是完整的跟踪错误：

```
activemodel (3.2.8) lib/active_model/naming.rb:163:in `model_name_from_record_or_class'
activemodel (3.2.8) lib/active_model/naming.rb:158:in `param_key'
actionpack (3.2.8) lib/action_view/helpers/form_helper.rb:369:in `form_for'
app/views/comments/_form.html.erb:1:in `_app_views_comments__form_html_erb__1022796803_80617610'
actionpack (3.2.8) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.8) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.8) lib/action_view/template.rb:143:in `render'
actionpack (3.2.8) lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
actionpack (3.2.8) lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.8) lib/action_view/renderer/partial_renderer.rb:237:in `render'
actionpack (3.2.8) lib/action_view/renderer/renderer.rb:41:in `render_partial'
actionpack (3.2.8) lib/action_view/helpers/rendering_helper.rb:27:in `render'
app/views/gold_books/_goldbook.html.erb:3:in `_app_views_gold_books__goldbook_html_erb__357761412_79186410'
actionpack (3.2.8) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.8) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.8) lib/action_view/template.rb:143:in `render'
actionpack (3.2.8) lib/action_view/renderer/partial_renderer.rb:265:in `render_partial'
actionpack (3.2.8) lib/action_view/renderer/partial_renderer.rb:238:in `block in render'
actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.8) lib/action_view/renderer/partial_renderer.rb:237:in `render'
actionpack (3.2.8) lib/action_view/renderer/renderer.rb:41:in `render_partial'
actionpack (3.2.8) lib/action_view/helpers/rendering_helper.rb:27:in `render'
app/views/gold_books/show.html.erb:7:in `_app_views_gold_books_show_html_erb__197041322_85056980'
actionpack (3.2.8) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.8) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.8) lib/action_view/template.rb:143:in `render'
actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:47:in `block (2 levels) in render_template'
actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:46:in `block in render_template'
actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:54:in `render_with_layout'
actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.8) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.8) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.8) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.8) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.8) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.8) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/usr/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.8) lib/action_controller/metal/mime_responds.rb:196:in `respond_to'
app/controllers/gold_books_controller.rb:18:in `show'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.8) lib/active_support/callbacks.rb:414:in `_run__799128830__process_action__547441087__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__1022103052__call__645886376__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:42:47.017

关联区分大小写。改变这个：

```
has_one :GoldBook 
```

至

```
has_one :gold_book 
```

此外，您的实例变量被称为`@gold_book`，但在您`show`看来，您指的是`goldbook`. 尝试将其更改为：

```
<%= render 'comments/form', gold_book: @gold_book %> 
```

一般来说，请确保遵守 Rails 的命名约定。查看[本指南](http://guides.rubyonrails.org/layouts_and_rendering.html#rendering-by-default-convention-over-configuration-in-action)，尤其是“默认渲染”部分。

# windows - windows phone 的 vs express 中缺少几个标签

> ID：13222648
> 
> 赞同：0
> 
> 时间：2012-11-04T20:37:19.740
> 
> 标签：windows, vb.net, visual-studio-2010, windows-phone-7

我想试用我的应用程序。我基于来自该站点的信息 [http://www.windowsphonegeek.com/articles/Creating-a-Windows-Phone-7-Trial-Application-Implementation-and-Best-Practices](http://www.windowsphonegeek.com/articles/Creating-a-Windows-Phone-7-Trial-Application-Implementation-and-Best-Practices)

但它是为 c# 用户编写的。我的应用程序是用 vb.net 语言编写的。

我在第 5 步遇到了问题。使用 vb.net 制作应用程序时，有 4 个选项卡（应用程序、调试、编译、引用），而使用 c# 制作应用程序时，您可以在图像上看到这 5 个选项卡。当我的应用程序基于 vb 语言时，我不知道如何执行第 5 步...

我发誓我不会再基于 vb.net 制作应用程序了......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:05:29.263

我相信您正在寻找条件编译符号？

如果是这样，请进入“编译”选项卡，单击“高级编译选项”，然后在“自定义常量”文本框中定义您的符号。

例如，要继续您链接的教程，定义“试用”符号，只需键入：

```
TRIAL=true 
```

![常数](../Images/9b6ab2a8cd47b1fd9512222ead0f8ed9.png)

然后你应该能够使用这些符号有条件地启用代码片段，就像在教程中一样：

```
#If TRIAL Then
        IsTrial = True
#End If 
```

# javascript - 对空值和数字进行排序以模仿 tabindex HTML 属性功能

> ID：13222655
> 
> 赞同：2
> 
> 时间：2012-11-04T20:37:49.573
> 
> 标签：javascript, html, google-chrome, sorting, tabindex

我在 JavaScript 中排序有一个非常奇怪的问题。我徘徊在这个奇妙而可怕的分类世界中，想知道你们是否可以帮助我：

基本上，我试图模仿 tabindex HTML 属性，它基本上改变了页面中“tabbing”的顺序：具有 tabindex 的元素是第一个，最小的正数在前，向下，没有 tabindex 的元素是最后一个以不变的顺序。所以，它是这样的：

> tabindex=1，tabindex=2，tabindex=5，tabindex=5000，没有tabindex，没有tabindex，没有tabindex，等等……

我正试图让这个工作。在 Chrome 中它不起作用，因为（我认为，至少）它使用的排序算法与所有其他主要浏览器相比。

Chrome 中返回的内容是零星的和奇怪的，其中一个元素完全乱序，而其他元素曾经位于顶部而不是底部。

在所有其他浏览器中，它都可以工作（除了 tabindex'd 元素的顺序相反，但这真的很容易修复，我打算在完成这项工作后做）。这是使用以下代码：

```
selectElements.sort(function(a,b){
    return b.getAttribute('tabindex')-a.getAttribute('tabindex');
}); 
```

我相信问题可能源于没有 getAttribute 的元素返回 null 的事实，但我知道什么......：P

让我知道你们会做些什么来完成这项工作......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:38:24.627

改进@3dgoo 的答案，排序方法应该首先检查是否相等：

```
selectElements.sort(function(a, b) {
    a = a.getAttribute('tabindex');
    b = b.getAttribute('tabindex');

    if (a === b) {
        return 0;
    } else if (a === null) {
        return -1;
    } else if (b === null) {
        return 1;
    }

    return a < b ? -1 : 1;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:27:43.430

首先，您的排序功能是错误的，将首先返回最大的 tabindex。要返回按 tabindex 升序排序，您需要这样：

```
selectElements.sort(function(a,b){
    return a.getAttribute('tabindex') - b.getAttribute('tabindex');
}); 
```

注意*a*和*b*变量是互换的。

这不考虑具有 null tabindex 属性的元素，因此您希望在排序算法中为这些情况制定一些特殊规则：

```
selectElements.sort(function(a, b) {
    if (a.getAttribute('tabindex') === b.getAttribute('tabindex')) {
        return 0;
    }
    if (b.getAttribute('tabindex') === null) {
        return -1;
    }
    if (a.getAttribute('tabindex') === null) {
        return 1;
    }
    return a.getAttribute('tabindex') - b.getAttribute('tabindex');
}); 
```

这是一个测试这一切的jsfiddle。如果您愿意，可以玩一下：http:
[//jsfiddle.net/snyL8/1/](http://jsfiddle.net/snyL8/1/)

根据我的发现，Chrome 或 Firefox 与我的或您的代码没有区别。

# iphone - 如何为 iOS 编译 MobileVLC？

> ID：13222656
> 
> 赞同：0
> 
> 时间：2012-11-04T20:37:58.500
> 
> 标签：iphone, ios, xcode, ipad, vlc

我正在尝试编译 Mobile VLC 项目，但它总是因 buildMobileVLC.sh 脚本而失败。会出现几个不同的问题。

有人可以发布有关如何构建 MobileVLC 项目以使其在设备上正常运行的说明吗？

谢谢，

应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:18:42.530

请参阅以下线程，特别是[此答案](http://forum.videolan.org/viewtopic.php?f=12&t=108691#p368533)。我不会在此处粘贴答案，因为它是多余的，但是如果您按照步骤操作，您将获得 VLC 来为 iOS 编译。我仍然遇到问题的一件事是能够可视化多播 rdp/udp 流。HTTP 的东西可以正常工作，例如 3gp 文件等......当然，通过 iTunes 上传的标准文件也可以正常工作。

# visual-studio-2012 - Visual Studio Ultimate 12 中未显示工具栏

> ID：13222658
> 
> 赞同：0
> 
> 时间：2012-11-04T20:38:15.797
> 
> 标签：visual-studio-2012

我最近下载了 Visual Studio Ultimate 12 的试用版，它在我编码时工作正常，但我无法查看 Visual Studio 10 中的工具箱来拖放按钮......和其他控件。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:24:54.473

好，我知道了 。它来自热键 alt+ctrl+x。

# ios - 在 iOS 下使用 Stitcher 时的 OpenCV 编译器错误

> ID：13222662
> 
> 赞同：8
> 
> 时间：2012-11-04T20:38:31.137
> 
> 标签：ios, opencv, compiler-construction

每当我尝试在 iOS 中使用 OpenCV Stitcher 类并包含stitcher-header (#include) 时，我最终都会在expected_compensate.hpp 中出现编译错误“Expected '{'”。显然行 enum { NO, GAIN, GAIN_BLOCKS }; 导致某种错误。

我对 openCV 很陌生，但是使用 filter2d() 等其他功能可以按预期工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-06-23T18:44:16.447

尝试

```
#import <opencv2/opencv.hpp> 
```

然后

```
#import <UIKit/UIKit.h> 
```

更新：这个答案只突出了问题的最低限度的解决方案，也许是根本原因：依赖关系的顺序。请参阅其他答案以获取您在项目中放置的更好的代码/设置。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-12-05T19:11:53.330

在您的项目中，创建一个 Prefix Header MyProject.pch，并将其设置在您项目的构建设置中。

然后在该 pch 文件中，执行以下操作：

```
#ifdef __cplusplus
#   include <opencv2/opencv.hpp>
#   include <opencv2/stitching/detail/blenders.hpp>
#   include <opencv2/stitching/detail/exposure_compensate.hpp>
#else
#   import <Foundation/Foundation.h>
#   import <UIKit/UIKit.h>
#   import <Availability.h>
#endif 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-04-23T16:04:41.490

我也遇到了这个问题。作为 G. Führ 确保您首先包含 opencv 标头。最简单的方法是添加：

```
#ifdef __cplusplus
#include <opencv2/opencv.hpp>
#endif 
```

靠近应用程序“Appname-Prefix.pch”标题的顶部。这是一个预编译的头文件，可以很容易地保证您的 opencv 头文件将包含在任何苹果头文件之前。

```
//
//  Prefix header
//
//  The contents of this file are implicitly included at the beginning of every source file.
//

#import <Availability.h>

#ifndef __IPHONE_5_0
#warning "This project uses features only available in iOS SDK 5.0 and later."
#endif

#ifdef __cplusplus
#include <opencv2/opencv.hpp>
#endif

#ifdef __OBJC__
    #import <UIKit/UIKit.h>
    #import <Foundation/Foundation.h>
#endif 
```

这意味着您不会在此之前在应用程序的其他任何地方意外地包含一个苹果标题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-05T18:12:09.380

如标题开头所述，我通过在 OpenCV 之前导入任何 Apple 标题来解决此问题：

```
#if defined(NO)
#  warning Detected Apple 'NO' macro definition, it can cause build conflicts. Please, include this header before any Apple headers.
#endif 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-19T10:26:07.853

我有一个类似的问题，我解决了直接编辑所涉及的 opencv-framework 文件（在你的情况下`compensate.hpp`）并从它们中评论`NO`枚举案例定义的定义。在这种情况下，文件是`blender.hpp`，但`compensate.hpp`具有相同的结构 [![](../Images/56cafe34a56b98ddd24d6079620e0b65.png)](https://i.stack.imgur.com/If3Qg.png)

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-30T05:51:55.397

就我而言，我使用 openCV 创建了一个垂直图像拼接应用程序，错误如下图所示。它来自`exposure_compensate.hpp`和`blenders.hpp`。从错误描述来看，最上面的文件是 ../CVWrapper.mm，它在我的项目中，而不是 openCV pod 项目中。

正如上面的家伙所说，C ++和Apple MACRO之间存在一些冲突问题。我们应该将 C++ 标头放在 Apple 标头之上。

首先，我尝试了一种来自互联网的解决方法，上面写着“替换`NO`为`NO_EXPOSURE_COMPENSATOR = 0`”。这行得通，但它修改了 openCV 源代码，我不想这样做，因为我不会对 Pod 文件进行版本控制，然后如果其他人克隆我的 repo/项目，他们将需要对这些源进行相同的修改代码。

然后，我按照 Xcode 中的错误消息，在我的`CVWrapper.mm`文件中做了以下更改。之后，这两个错误消失了。

```
// Before change
#import "CVWrapper.h"
#import "UIImage+OpenCV.h"
#import "stitching.h"
#import "UIImage+Rotate.h"

// After change
#import "stitching.h"
#import "CVWrapper.h"
#import "UIImage+OpenCV.h"
#import "UIImage+Rotate.h" 
```

[![在此处输入图像描述](../Images/0a93e869256d70957fecc534c979432b.png)](https://i.stack.imgur.com/ZZVSh.png)

# java - 在Java中将浮点数转换为有理数？

> ID：13222664
> 
> 赞同：2
> 
> 时间：2012-11-04T20:38:49.930
> 
> 标签：java, floating-point, rational-numbers

> **可能重复：**
> [如何将浮点数转换为由字节分子和分母表示的最接近的分数？](https://stackoverflow.com/questions/1656945/how-can-i-turn-a-floating-point-number-into-the-closest-fraction-represented-by)

我想在 Java 中采用任意浮点数或双精度数并将其转换为有理数 - 即。a/b 形式的数字，其中 a 和 b 是长整数。我怎样才能以合理有效的方式做到这一点？

（顺便说一句——我已经有了简化分数的代码，所以 a/b 是否是最简单的形式并不重要）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T20:56:48.740

[首先看看IEEE-754 规则](http://en.wikipedia.org/wiki/IEEE_754-1985)是如何构造双精度（或浮点数，但我在下面仅指双精度）：

然后使用 . 将 double 转换为位`Double.doubleToLongBits`。用这种方法计算分数`1 + bit_0 * 2^(-1) + bit_1 * 2^(-2) ...`。将结果乘以指数（`2^(exponent)`准确地说）和一个符号。

这是代码：

```
double number =  -0.15625;
// Code below doesn't work for 0 and NaN - just check before

long bits = Double.doubleToLongBits(number);

long sign = bits >>> 63;
long exponent = ((bits >>> 52) ^ (sign << 11)) - 1023;
long fraction = bits << 12; // bits are "reversed" but that's not a problem

long a = 1L;
long b = 1L;

for (int i = 63; i >= 12; i--) {
    a = a * 2 + ((fraction >>> i) & 1);
    b *= 2;
}

if (exponent > 0)
    a *= 1 << exponent;
else
    b *= 1 << -exponent;

if (sign == 1)
    a *= -1;

// Here you have to simplify the fraction

System.out.println(a + "/" + b); 
```

但要小心 - 使用大指数时，您可能会遇到不适合您的变量的数字。实际上，您可以考虑将指数存储在分数上，并且仅在指数足够小时才将其相乘。如果不是，您必须向用户显示分数，您可以使用科学记数法（这需要求解方程`2^n = x * 10^m`，其中 m 是您的十进制指数，x 是您必须乘以分数的数字。但这是另一个问题的问题...）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T23:45:47.280

让`long bits = Double.doubleToLongBits(double)`. 来自的Javadoc [`Double.longBitsToDouble`](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#longBitsToDouble%28long%29)：

> ...让 s、e 和 m 是可以从参数计算的三个值：
> 
> ```
> int s = ((bits >> 63) == 0) ? 1 : -1;
> int e = (int)((bits >> 52) & 0x7ffL);
> long m = (e == 0) ?
>              (bits & 0xfffffffffffffL) << 1 :
>              (bits & 0xfffffffffffffL) | 0x10000000000000L; 
> ```
> 
> 然后浮点结果等于数学表达式 s·m·2 ^(e-1075)的值。

这个结果肯定是一个有理数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T21:35:21.670

任何 FP 值对应的有理数是 (mantissa/2^-exponent)，其中尾数和指数在[IEEE 754](http://en.wikipedia.org/wiki/IEEE_754-1985)（Wiki 参考）中定义。然后，您可以按 LCD（或者我猜是 GCF）应用除法以获得规范的有理数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T00:27:42.607

[对于给定的最大分母，连续分数](http://en.wikipedia.org/wiki/Continued_fraction)标题下包含的各种概念会产生最佳可能的有理近似值。具体来说，您要问的是计算[收敛序列](http://en.wikipedia.org/wiki/Convergent_%28continued_fraction%29)。在某些时候，当您的分母根据您想要的任何标准足够大（或被有限整数实现长度强加给您）时，终止计算收敛项并使用最后一个。在链接的维基百科页面上对算法进行了相当详细的描述。

To address one concern you raised, the fractions generated in the convergent sequence are always in reduced form. They are also provably the best possible approximations for a given denominator. Precisely, a convergent term of the form m/n is closer to the target number than another other fraction with denominator < n. In other words, the convergent algorithm yields better approximations than trial and error.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T21:26:18.190

如您所知，浮点数甚至不能[精确存储诸如 0.1 之类的简单数字](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)。如果您使用一种天真的方法来转换浮点数，那么您最终可能会得到巨大的分子和分母。

但是，有些算法可能会有所帮助：[Dragon4 和 Grisu3](http://www.serpentine.com/blog/2011/06/29/here-be-dragons-advances-in-problems-you-didnt-even-know-you-had/)算法旨在为浮点数创建最易读的输出。他们利用某些浮点位序列可以用几个小数表示的优势，并选择其中最短的一个。

对于第一个实现，我将使用 Dragon4 和/或 Grisu3 从浮点中创建最短的小数部分。例如，带有位的浮点数`cd cc cc cc cc cc f4 3f`将导致十进制小数*1.3*而不是*1.29999999*。然后我会以 a/b 的形式表示小数部分并简化它。在给定的示例中，这将是*13/10*，没有进一步简化。

请注意，转换为小数可能是不利的。例如，有理数 1/3 不能同时用十进制数和浮点数精确表示。因此，最好的解决方案是修改诸如 Dragon4 之类的算法以使用任意小数分母，而不仅仅是 10。唉，这几乎肯定需要大量的工作和一些 CS 背景。

# javascript - 按下按钮时的地理编码 - 谷歌地图

> ID：13222668
> 
> 赞同：0
> 
> 时间：2012-11-04T20:39:25.297
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

这是我当前的代码：http: [//jsfiddle.net/9B84H/1/](http://jsfiddle.net/9B84H/1/)

```
var current_place;

function autosuggest() {
    var input = document.getElementById('location');
    var options = { types: [], };
    var autocomplete = new google.maps.places.Autocomplete(input, options);

    google.maps.event.addListener(autocomplete, 'place_changed', function() {
        var place = autocomplete.getPlace();
        if (!place.geometry) {
            current_place = null;
            alert('Cannot find place');
            return;
        } else {
            current_place = place;
            alert('Place is at:' + place.geometry.location);
        }
    });

} 
```

当您单击自动建议中的选项时，它会完美运行。但是，如果您只是输入一些内容并单击搜索，我需要它来运行与从自动建议中选择一个选项时相同的地理编码操作。我该怎么做呢？

Ps 你必须点击搜索按钮才能激活自动提示脚本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:45:17.903

与`current_place`GLOBAL 一样，它可以在函数外部访问

```
var current_place;

function autosuggest() {
var input = document.getElementById('location');
var options = {
    types: [],
};
var autocomplete = new google.maps.places.Autocomplete(input, options);

google.maps.event.addListener(autocomplete, 'place_changed', function() {
    var place = autocomplete.getPlace();
    if (!place.geometry) {
        current_place = null;
        alert('Cannot find place');
        return;
    } else {
        current_place = place;
        alert('Place is at:' + place.geometry.location);
        doIt();
    }
});

}
function doIt(){
    alert(current_place.geometry.location);
} 
```

见[JSFiddle](http://jsfiddle.net/9B84H/29/)

# php - 从 json 编码字符串 php 构建 SQL 语句

> ID：13222669
> 
> 赞同：3
> 
> 时间：2012-11-04T20:39:35.177
> 
> 标签：php, jqgrid, json

欢迎 Stackoverflow 国家！我正在尝试使用 php 将 json 编码的字符串解码为 SQL 语句。

假设我有这样一个 json 编码的字符串 =>

```
$j = '{"groupOp":"AND","rules":[{"field":"id","op":"cn","data":"A"},{"field":"i_name","op":"cn","data":"B"}]}'; 
```

我想构建**SQL WHERE**子句（jqGrid 中的 filterToolbar 搜索需要），像这样 => " `WHERE id LIKE %A% AND i_name LIKE %B%`" 等等。

我已经这样做了=>

```
$d = json_decode($j);

$filterArray = get_object_vars($d); // makes array

foreach($filterArray as $m_arr_name => $m_arr_key){
    // here I can't made up my mind how to continue build SQL statement which I've mentioned above 
} 
```

任何想法如何做到这一点，初步感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:46:43.393

第一个问题是您将要拔出`groupOp`操作员。

然后，你有一个对象，里面有一个对象数组，所以你可能想看看结果，`filterArray`因为它没有你想要的值。

然后，当您遍历时，您将希望使用索引来执行此操作，以便您可以按顺序提取值。

您可能想查看这个问题以了解如何从数组中获取数据：

[php中的json解码](https://stackoverflow.com/questions/1270016/json-decode-in-php)

这是另一个可能对您有帮助的问题：

[如何在 PHP 中解码带有多个对象的 JSON 字符串？](https://stackoverflow.com/questions/2560096/how-to-decode-a-json-string-with-several-objects-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T14:02:17.997

[这里](https://stackoverflow.com/questions/5941434/how-can-i-get-jqgrid-toolbar-search-working/13086575#13086575)有一个服务器端 php 代码实现的答案

更正：我必须在“过滤器”参数中取消转义双引号才能使其正常工作：

```
$filters = str_replace('\"','"' ,$_POST['filters']); 
```

# c# - 为什么标志枚举通常用十六进制值定义

> ID：13222671
> 
> 赞同：131
> 
> 时间：2012-11-04T20:39:49.863
> 
> 标签：c#, .net, enums, enum-flags

很多时候，我看到使用十六进制值的标志枚举声明。例如：

```
[Flags]
public enum MyEnum
{
    None  = 0x0,
    Flag1 = 0x1,
    Flag2 = 0x2,
    Flag3 = 0x4,
    Flag4 = 0x8,
    Flag5 = 0x10
} 
```

当我声明一个枚举时，我通常是这样声明的：

```
[Flags]
public enum MyEnum
{
    None  = 0,
    Flag1 = 1,
    Flag2 = 2,
    Flag3 = 4,
    Flag4 = 8,
    Flag5 = 16
} 
```

为什么有些人选择用十六进制而不是十进制写值是否有理由或理由？在我看来，使用十六进制值并意外写入`Flag5 = 0x16`而不是`Flag5 = 0x10`.

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2012-11-04T20:47:40.393

基本原理可能有所不同，但我看到的一个优势是十六进制提醒您：“好吧，我们不再处理人类发明的以十为底的任意世界中的数字了。我们正在处理比特 - 机器的世界 - 我们会按照它的规则玩。” 除非您正在处理数据的内存布局很重要的相对较低级别的主题，否则很少使用十六进制。使用它暗示了我们现在所处的情况。

另外，我不确定 C#，但我知道在 C`x << y`中是一个有效的编译时常量。使用位移似乎是最清楚的：

```
[Flags]
public enum MyEnum
{
    None  = 0,
    Flag1 = 1 << 0,  //1
    Flag2 = 1 << 1,  //2
    Flag3 = 1 << 2,  //4
    Flag4 = 1 << 3,  //8
    Flag5 = 1 << 4   //16
} 
```

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2012-11-04T20:42:03.403

很容易看出这些是*二进制*标志。

```
None  = 0x0,  // == 00000
Flag1 = 0x1,  // == 00001
Flag2 = 0x2,  // == 00010
Flag3 = 0x4,  // == 00100
Flag4 = 0x8,  // == 01000
Flag5 = 0x10  // == 10000 
```

虽然*进展*使它更加清晰：

```
Flag6 = 0x20  // == 00100000
Flag7 = 0x40  // == 01000000
Flag8 = 0x80  // == 10000000 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-08-05T14:02:47.620

我认为这只是因为序列始终是 1,2,4,8 然后添加一个 0。
如您所见：

```
0x1 = 1 
0x2 = 2
0x4 = 4
0x8 = 8
0x10 = 16
0x20 = 32
0x40 = 64
0x80 = 128
0x100 = 256
0x200 = 512
0x400 = 1024
0x800 = 2048 
```

以此类推，只要您记住序列 1-2-4-8，您就可以构建所有后续标志，而无需记住 2 的幂

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-11-04T20:42:34.630

因为`[Flags]`意味着枚举实际上是一个[**位域**](http://en.wikipedia.org/wiki/Bitfield)。您可以使用`[Flags]`按位 AND ( `&`) 和 OR ( `|`) 运算符来组合标志。在处理这样的二进制值时，使用十六进制值几乎总是更清楚。这就是我们首先使用[**十六进制**](http://en.wikipedia.org/wiki/Hexadecimal)的原因。每个十六进制字符*恰好*对应一个半字节（四位）。对于十进制，这种 1 到 4 映射不成立。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-08T21:04:39.373

因为有一种机械的、简单的方法可以将十六进制的二的幂加倍。在十进制中，这很难。它需要在您的脑海中进行长时间的乘法运算。在十六进制中，这是一个简单的更改。您可以一直执行此操作，直到`1UL << 63`您无法以十进制执行此操作。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-08T19:05:12.110

因为位在标志中的人更容易理解。每个十六进制数字可以适合 4 位二进制。

```
0x0 = 0000
0x1 = 0001
0x2 = 0010
0x3 = 0011

... and so on

0xF = 1111 
```

通常你希望你的标志不重叠位，最简单的实现和可视化它的方法是使用十六进制值来声明你的标志。

因此，如果您需要 16 位标志，您将使用 4 位十六进制值，这样可以避免错误值：

```
0x0001 //= 1 = 000000000000 0001
0x0002 //= 2 = 000000000000 0010
0x0004 //= 4 = 000000000000 0100
0x0008 //= 8 = 000000000000 1000
...
0x0010 //= 16 = 0000 0000 0001 0000
0x0020 //= 32 = 0000 0000 0010 0000
...
0x8000 //= 32768 = 1000 0000 0000 0000 
```

# java - @TableGenerator 不适用于 EclipseLink JPA 2.0

> ID：13222677
> 
> 赞同：0
> 
> 时间：2012-11-04T20:40:54.323
> 
> 标签：java, mysql, jpa, eclipselink

我有一个奇怪的问题。我在我的 JPA 应用程序中使用表生成策略。直到最近，我还使用 Toplink 持久性提供程序作为 JPA 实现。一切正常。刚才我添加了一些 TopLink 不支持的继承特性（Table per Class Inheritance），所以我不得不转向 EclipseLink。一切正常，除了 ID 生成。这是我用于所有唯一 ID 的代码示例：

```
@Id
@TableGenerator(name="INCOME_SEQ", table="SEQUENCE_TABLE", pkColumnName="SEQUENCE_NAME",
    valueColumnName="SEQUENCE_COUNT", pkColumnValue="INCOME_SEQ", allocationSize=1)
@GeneratedValue(strategy=GenerationType.TABLE, generator="INCOME_SEQ")
@Column(name = "INCOME_ID")
private Integer incomeId; 
```

完全相同的代码适用于 Toplink，但不适用于 EclipseLink。我得到的错误是：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'INCOME_ID' cannot be null
Error Code: 1048 
```

似乎根本没有使用表生成......

这是我的 MySql 数据库中的表描述： 表名：SEQUENCE_TABLE

```
+----------------+--------------+------+-----+---------+-------+
| Field          | Type         | Null | Key | Default | Extra |
+----------------+--------------+------+-----+---------+-------+
| SEQUENCE_NAME  | varchar(64)  | NO   | PRI | NULL    |       |
| SEQUENCE_COUNT | int(11)      | NO   |     | 0       |       |
| localized_name | varchar(128) | YES  |     | NULL    |       |
| USER_ID        | int(11)      | NO   | MUL | 1       |       |
+----------------+--------------+------+-----+---------+-------+ 
```

任何人都可以请指导我解决这个问题吗？或者至少是一种获取未创建 ID 的实际原因的方法？

编辑：这是收入类和表结构：

```
 +-------------------------+-------------------------------------------------------------------------------+------+-----+---------+-------+
| Field                   | Type                                                                          | Null | Key | Default | Extra |
+-------------------------+-------------------------------------------------------------------------------+------+-----+---------+-------+
| INCOME_ID               | int(11)                                                                       | NO   | PRI | NULL    |       |
| REFERENCE_DOCUMENT_ID   | varchar(32)                                                                   | YES  |     | NULL    |       |
| CLIENT_ID               | int(9)                                                                        | NO   | MUL | NULL    |       |
| income_date             | datetime                                                                      | NO   |     | NULL    |       |
| MOVEMENT_CATEGORY_ID    | int(11)                                                                       | NO   | MUL | NULL    |       |
| SUM_AFTER_TAX           | decimal(10,2)                                                                 | YES  |     | 0.00    |       |
| TOTAL_SUM               | decimal(10,2)                                                                 | NO   |     | NULL    |       |
| TAX_SUM                 | decimal(10,2)                                                                 | NO   |     | 0.00    |       |
| VAT_PERCENT             | decimal(10,2)                                                                 | NO   |     | NULL    |       |
| DESCRIPTION             | varchar(100)                                                                  | YES  |     | NULL    |       |
| STATUS                  | smallint(5) unsigned                                                          | YES  |     | 0       |       |
| REFERENCE_DOCUMENT_TYPE | enum('MANUAL_INVOICE','MANUAL_RECEIPT','INVOICE','RECEIPT','INVOICE_RECEIPT') | YES  |     | NULL    |       |
| USER_ID                 | int(11)                                                                       | NO   | MUL | 1       |       |
| UNIQUE_USER_SEQUENCE    | int(10) unsigned                                                              | YES  |     | NULL    |       |
+-------------------------+-------------------------------------------------------------------------------+------+-----+---------+-------+ 
```

编辑：我在 EclipseLink 日志记录级别设置为最好的情况下运行了该应用程序，但我仍然看不到任何错误。我什至可以看到序列被正确初始化：

```
 [EL Finest]: 2012-11-07 20:37:00.359--ServerSession(1832413009)--Connection(1484802679)--Thread(Thread[pool-1-thread-2,5,main])--Connection released to connection pool [default].
[EL Finest]: 2012-11-07 20:37:00.405--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequencing connected, state is NoPreallocation_State
[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequence SEQ_GEN_IDENTITY: preallocation size 1
[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequencing connected, state is Preallocation_Transaction_NoAccessor_State
[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequence RECEIPTS_SEQ: preallocation size 1
[EL Finest]: 2012-11-07 20:37:00.406--ServerSession(1832413009)--Thread(Thread[pool-1-thread-2,5,main])--sequence INCOME_SEQ: preallocation size 1

    [EL Finest]: 2012-11-07 20:38:09.264--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--persist() operation called on:  555 וובה.
[EL Finer]: 2012-11-07 20:38:09.265--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--begin unit of work commit
[EL Finest]: 2012-11-07 20:38:09.288--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--Execute query DoesExistQuery(referenceClass=MovementCategories )
[EL Finest]: 2012-11-07 20:38:09.29--UnitOfWork(514772947)--Thread(Thread[AWT-EventQueue-1,6,main])--Execute query InsertObjectQuery(חש' ידנית 555 וובה)
[EL Finest]: 2012-11-07 20:38:09.291--ServerSession(1832413009)--Connection(1484802679)--Thread(Thread[AWT-EventQueue-1,6,main])--Connection acquired from connection pool [default].
[EL Finer]: 2012-11-07 20:38:09.291--ClientSession(2117615354)--Connection(1484802679)--Thread(Thread[AWT-EventQueue-1,6,main])--begin transaction
[EL Fine]: 2012-11-07 20:38:09.293--ClientSession(2117615354)--Connection(1484802679)--Thread(Thread[AWT-EventQueue-1,6,main])--INSERT INTO income (INCOME_ID, DESCRIPTION, INCOME_DATE, REFERENCE_DOCUMENT_ID, REFERENCE_DOCUMENT_TYPE, STATUS, SUM_AFTER_TAX, TAX_SUM, TOTAL_SUM, UNIQUE_USER_SEQUENCE, VAT_PERCENT, CLIENT_ID, MOVEMENT_CATEGORY_ID) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    bind => [null, null, 2012-11-07 20:37:55.225, 555, MANUAL_INVOICE, 1, 100.0, 16.5, 116.5, null, 16.5, 334, 3] 
```

我看到的唯一线索是 `Preallocation_Transaction_NoAccessor_State`财产......也许有人可以帮助我理解这一点。如果是排序的主键 ID，日志输出应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:18:41.203

找到了解决方案，希望它对更多人有用：出于某种原因，我为我的持久性单元设置了以下持久性配置设置：

```
persistenceMap.put(PersistenceUnitProperties.ID_VALIDATION,"NONE"); 
```

显然，在 EclipseLink 中关闭 ID 验证也会关闭 ID 生成。

感谢所有试图提供帮助的人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:06:36.983

检查日志中的错误以及哪些 SQL 失败了。

在您的表定义中，您还有其他几列？

USER_ID 不是您告诉 JPA 的内容，并且不为空，因此我认为可能会导致失败。

如果仍有问题，请提供更多详细信息。

# mysql - Qcache_hits 总是 0

> ID：13222680
> 
> 赞同：3
> 
> 时间：2012-11-04T20:41:22.860
> 
> 标签：mysql, caching, centos

在 Centos 6.3 上，我试图在 Mysql 上启用查询缓存。我已启用查询缓存

```
SHOW VARIABLES LIKE 'query_cache_size';
query_cache_size    52428800

SHOW VARIABLES LIKE 'query_cache_type';
query_cache_type    ON 
```

当运行一些简单的选择查询（从标题中选择 *）时，Qcache_hits 始终保持为 0。

（我正在使用这些示例 mysql 数据库：[https](https://launchpad.net/test-db/+download) ://launchpad.net/test-db/+download ）

```
show status like "Qcache%";
Qcache_free_blocks  1
Qcache_free_memory  52419904
Qcache_hits 0
Qcache_inserts  0
Qcache_lowmem_prunes    0
Qcache_not_cached   50
Qcache_queries_in_cache 0
Qcache_total_blocks 1 
```

我没有办法弄清楚这里出了什么问题。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:54:15.397

您可能错过了[query_cache_limit](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_query_cache_limit)选项，该选项可防止缓存大于此值的结果集。

[您可能还对query_cache_type](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_query_cache_type)进行了非标准设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T19:49:54.193

我只是在寻找相同问题的答案：查询缓存中没有任何内容。我的数据库名称不包含减号 (-)，而是包含句点 (.)。我转储了数据库——很高兴它仍然很小，因为它只是在开发中——并将它恢复到另一个没有 . 在名称中，查询缓存现在工作正常。

# http - 如何在 Mule ESB 中使用同步 JMS 实现 HTTP 基本身份验证？

> ID：13222681
> 
> 赞同：0
> 
> 时间：2012-11-04T20:41:33.793
> 
> 标签：http, rest, authentication, jms, mule

我创建了一个简单的流程，它公开了一个链接到 REST 服务的 HTTP 端点。REST 服务返回一个字符串，然后使用请求-响应模式将其放置到 JMS 队列中。这个想法是放置在队列上的字符串将被某些消费者使用，并且将使用回复地址创建响应。所以基本上这是在实施同步 JMS。

该流程按预期工作，除非 HTTP 端点使用基本身份验证进行保护。在这种情况下，响应是：

```
java.io.NotSerializableException: com.sun.jersey.spi.container.ContainerResponse (org.apache.commons.lang.SerializationException). Message payload is of type: MuleResponseWriter$1 
```

并且没有消息被放置在队列中。删除基本身份验证不会引发异常。此外，删除 JMS 出站端点会导致回显字符串，这使我相信问题出在 JMS 端点上。我怀疑问题出在 JMS 端点的响应上，因为将流中的组件设置为单向可以解决问题。我认为问题可能是端点在没有身份验证凭据的情况下向 HTTP 端点发送了一些响应，因此它失败了，但我不确定如何处理这个问题。

以下是我创建的流程：

```
<mule
    xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
    xmlns:context="http://www.springframework.org/schema/context" xmlns="http://www.mulesoft.org/schema/mule/core"
    xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:jms="http://www.mulesoft.org/schema/mule/jms"
    xmlns:jersey="http://www.mulesoft.org/schema/mule/jersey"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core"
    version="CE-3.3.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mule-ss="http://www.mulesoft.org/schema/mule/spring-security"
    xmlns:json="http://www.mulesoft.org/schema/mule/json"
    xmlns:ss="http://www.springframework.org/schema/security" xsi:schemaLocation="
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
    http://www.mulesoft.org/schema/mule/jms http://www.mulesoft.org/schema/mule/jms/current/mule-jms.xsd 
    http://www.mulesoft.org/schema/mule/jersey http://www.mulesoft.org/schema/mule/jersey/current/mule-jersey.xsd 
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd 
    http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
    http://www.mulesoft.org/schema/mule/spring-security http://www.mulesoft.org/schema/mule/spring-security/3.1/mule-spring-security.xsd 
    http://www.mulesoft.org/schema/mule/json http://www.mulesoft.org/schema/mule/json/current/mule-json.xsd 
    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd ">
<jms:activemq-connector name="Active_MQ" specification="1.1" brokerURL="tcp://localhost:61616"
                        validateConnections="true" doc:name="Active MQ"/>
<mule-ss:security-manager>
    <mule-ss:delegate-security-provider name="memory-provider" delegate-ref="authenticationManager"/>
</mule-ss:security-manager>
<spring:beans>
    <ss:authentication-manager alias="authenticationManager">
        <ss:authentication-provider>
            <ss:user-service id="userService">
                <ss:user name="username" password="password" authorities="ROLE_ADMIN"/>
            </ss:user-service>
        </ss:authentication-provider>
    </ss:authentication-manager>
</spring:beans>
<flow name="RESTAPISync" doc:name="RESTAPISync">
    <http:inbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" doc:name="HTTP">
        <mule-ss:http-security-filter realm="realm"/>
    </http:inbound-endpoint>
    <jersey:resources doc:name="REST">
        <component class="SFREST"/>
    </jersey:resources>
    <jms:outbound-endpoint exchange-pattern="request-response" queue="tmp" connector-ref="Active_MQ"
                           doc:name="JMS"/>
</flow> 
```

SFREST.java 组件：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;

@Path("/pops")
public class SFREST{

    @GET
    public String getPOPs()  throws Exception{
        return "hello";
    }

} 
```

还有一个例外：

```
ERROR 2012-11-04 21:40:57,485 [[jmstest].connector.http.mule.default.receiver.02] org.mule.exception.DefaultMessagingExceptionStrategy:
********************************************************************************
Message               : Authentication Attempt Failed. Message payload is of type: String
Code                  : MULE_ERROR-54999
--------------------------------------------------------------------------------
Exception stack is:
1\. Bad credentials (org.springframework.security.authentication.BadCredentialsException)
    org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider:137 (null)
2\. Authentication Attempt Failed. Message payload is of type: String (org.mule.api.security.UnauthorisedException)
org.mule.security.MuleSecurityManager:96 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/security/UnauthorisedException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
org.springframework.security.authentication.BadCredentialsException: Bad credentials
at org.springframework.security.authentication.dao.AbstractUserDetailsAuthenticationProvider.authenticate(AbstractUserDetailsAuthenticationProvider.java:137)
at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
at org.mule.module.spring.security.SpringProviderAdapter.authenticate(SpringProviderAdapter.java:70)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
********************************************************************************

ERROR 2012-11-04 21:41:04,522 [[jmstest].connector.http.mule.default.receiver.02] org.mule.exception.DefaultMessagingExceptionStrategy:
********************************************************************************
Message               : java.io.NotSerializableException: com.sun.jersey.spi.container.ContainerResponse (org.apache.commons.lang.SerializationException). Message payload is of type: MuleResponseWriter$1
Code                  : MULE_ERROR-29999
--------------------------------------------------------------------------------
Exception stack is:
1\. com.sun.jersey.spi.container.ContainerResponse (java.io.NotSerializableException)
java.io.ObjectOutputStream:1164 (null)
2\. java.io.NotSerializableException: com.sun.jersey.spi.container.ContainerResponse (org.apache.commons.lang.SerializationException)
org.apache.commons.lang.SerializationUtils:111 (null)
3\. java.io.NotSerializableException: com.sun.jersey.spi.container.ContainerResponse (org.apache.commons.lang.SerializationException). Message payload is of type: MuleResponseWriter$1 (org.mule.api.MessagingException)
org.mule.execution.ExceptionToMessagingExceptionExecutionInterceptor:35 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/MessagingException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
java.io.NotSerializableException: com.sun.jersey.spi.container.ContainerResponse
at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1164)
at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:330)
at org.apache.commons.collections.map.AbstractHashedMap.doWriteObject(AbstractHashedMap.java:1182)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T09:35:15.623

原来的问题是 jersey_response 属性不能被序列化，需要被删除。所以不管payload是什么，只要这个属性在消息中，消息就不能传递给JMS出站组件。更多信息可以在以下位置找到：

[http://forum.mulesoft.org/mulesoft/topics/http_authentication_with_jms_request_response?utm_content=topic_link&utm_medium=email&utm_source=reply_notification](http://forum.mulesoft.org/mulesoft/topics/http_authentication_with_jms_request_response?utm_content=topic_link&utm_medium=email&utm_source=reply_notification)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:34:17.960

异常的原因是因为任何球衣组件都会返回一个 com.sun.jersey.spi.container.ContainerResponse ，您需要在将其传播到下一个消息处理器之前对其进行转换，如此处[所述](http://www.mulesoft.org/documentation/display/MULE3USER/Jersey+Module+Reference#JerseyModuleReference-SendingJerseyresponsetootherflows)

# ios - 点击 UIButton 后如何在 UIPageViewController 中添加新的视图控制器？

> ID：13222684
> 
> 赞同：4
> 
> 时间：2012-11-04T20:42:07.760
> 
> 标签：ios, model, uibutton, uipageviewcontroller

我想知道如何实现会影响 UIPageViewController 模型的按钮。例如，我希望我的 UIPageViewController 模型数组在其中加载单个对象，当点击按钮时，将添加一个新的视图控制器，并自动翻转页面或类似的东西（如在 Notes 应用程序中）。删除用户正在查看的当前对象也是如此。

到目前为止，我尝试通过对我的根视图控制器实现一些 IBActions，但到目前为止还没有运气。

这是我实现 ViewController 类的方法：

```
@implementation ViewController

@synthesize modelArray = _modelArray;
@synthesize pageVC = _pageVC;

#pragma mark - UIPageViewControllerDataSource Methods

// Returns the view controller before the given view controller. (required)
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentVC *)viewController     labelContents]];
    if(currentIndex==0)
        return nil;

    ContentVC *cVC = [[ContentVC alloc] init];
    cVC.labelContents = [self.modelArray objectAtIndex:currentIndex-1];
    return cVC;
}

// Returns the view controller after the given view controller. (required)
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
   viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentVC *)viewController labelContents]];
    if(currentIndex==self.modelArray.count-1)
        return nil;

    ContentVC *cVC = [[ContentVC alloc] init];
    cVC.labelContents = [self.modelArray objectAtIndex:currentIndex+1];
    return cVC;
}

#pragma mark - UIPageViewControllerDelegate Methods
// Returns the spine location for the given orientation.
- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController
               spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    if(UIInterfaceOrientationIsPortrait(orientation)){
        // Set the array with only 1 view controller
        UIViewController *currentVC = [self.pageVC.viewControllers objectAtIndex:0];
        NSArray *viewControllers = [NSArray arrayWithObject:currentVC];
        [self.pageVC setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil];

        // Set the doubleSided property to NO
        self.pageVC.doubleSided = NO;
        // Return the spine location
        return UIPageViewControllerSpineLocationMin;
    } else { // if landscape
        NSArray *viewControllers = nil;
        ContentVC *currentVC = [self.pageVC.viewControllers objectAtIndex:0];
        NSUInteger currentIndex = [self.modelArray indexOfObject:[(ContentVC *)viewControllers labelContents]];
        if(currentIndex==0 || currentIndex %2 == 0){
            UIViewController *nextViewController = [self pageViewController:self.pageVC viewControllerAfterViewController:currentVC];
            viewControllers = [NSArray arrayWithObjects:currentVC, nextViewController, nil];
        } else {
            UIViewController *previousVC = [self pageViewController:self.pageVC viewControllerBeforeViewController:currentVC];
            viewControllers = [NSArray arrayWithObjects:previousVC, currentVC, nil];
        }
        // Set the view controllers as property of the UIPageViewController
        [self.pageVC setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil];
        return UIPageViewControllerSpineLocationMid;
    }

}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Instantiate the model array
    self.modelArray = [[NSMutableArray alloc] init];
    [self.modelArray addObject:@"Page One"];
    NSLog(@"%@", self.modelArray);

    // Instantiate the UIPageViewController
    self.pageVC = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];

    // Assign the delegate and datasource as self
    self.pageVC.delegate = self;
    self.pageVC.dataSource = self;

    // Set the initial view controllers
    ContentVC *cVC = [[ContentVC alloc] initWithNibName:@"ContentVC" bundle:nil];
    cVC.labelContents = [self.modelArray objectAtIndex:0];
    NSArray *viewControllers = [NSArray arrayWithObject:cVC];
    [self.pageVC setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];

    // Add the pageViewController as the childViewController
    [self addChildViewController:self.pageVC];

    // Add the view of pageViewController  to the currentView
    [self.view addSubview:self.pageVC.view];

    // Call didMoveToParentViewController: of the childViewController, the UIPageViewController instance in our case.
    [self.pageVC didMoveToParentViewController:self];

    // Assign the gestureRecognizers property of the pageViewController to the view's gestureRecognizers property
    self.view.gestureRecognizers = self.pageVC.gestureRecognizers;

} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T22:37:44.293

使用`UIPageViewController`数据源来获取下一个或上一个视图控制器。因此，解决方案是在触摸按钮后将新视图控制器添加到数据源。

假设您的数据源被实现为`NSArray`（有关此示例，请参见 XCode 的基于页面的应用程序模板），您只需将新 vc 添加到该数组并通过调用`[UIPageViewController setViewControllers:direction:animated:completion:]`.

由于您没有提供有关如何实现层次结构的任何详细信息，因此我无法更具体。

**编辑：**

现在我有了一些代码，这就是我要做的：

首先，我不会将`labelContents`视图控制器本身保存在`modelArray`. 除此之外，`ContentVC`每次更改页面时，您当前的设计都会创建一个新设计。这是很多不必要的开销。以下是我将如何实现它：

（顺便说一句，你应该想一个比`labelContents`.

```
- (ContentVC *)contentViewControllerWithLabelContents:(NSString *)labelContents
{
    ContentVC *vc = [[ContentVC alloc] initWithNibName:@"ContentVC" bundle:nil];
    vc.labelContents = labelContents;
    return vc;
}

- (void)viewDidLoad
{
    NSMutableArray *vcs = [NSMutableArray array];
    [vcs addObject:[self contentViewControllerWithLabelContents:@"Page One"]];
    [vcs addObject:[self contentViewControllerWithLabelContents:@"Page Two"]];
    //...
    self.modelArray = vcs;
}

#pragma mark - UIPageViewControllerDataSource Methods

// Returns the view controller before the given view controller. (required)
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
      viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:viewController];
    if(currentIndex == 0)
        return nil;

    ContentVC *cVC = [self.modelArray objectAtIndex:currentIndex - 1];
    return cVC;
}

// Returns the view controller after the given view controller. (required)
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController
   viewControllerAfterViewController:(UIViewController *)viewController
{
    NSUInteger currentIndex = [self.modelArray indexOfObject:viewController];
    if(currentIndex == self.modelArray.count - 1)
        return nil;

    ContentVC *cVC = [self.modelArray objectAtIndex:currentIndex + 1];
    return cVC;
} 
```

您评论中的代码：

```
- (IBAction)newButtonTapped:(id)sender 
{ 
    if(sender){ 
        [self.modelArray addObject:@"Page Two"]; 
        ContentVC *newVC = [[ContentVC alloc] initWithNibName:@"ContentVC" bundle:nil]; 
        NSArray *arr = [NSArray arrayWithObject:newVC]; 
        [self.pageVC setViewControllers:arr direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil]; 
        NSLog(@"%@", self.modelArray); 
    } 
} 
```

不起作用，因为您没有设置`labelContents`. `ContentVC`因此，您基本上最终会调用`[self.modelObject indexOfObject:nil]`或`[self.modelObject indexOfObject:@""]`取决于您对`labelContents`. 由于它们都不在数组中，因此调用返回`NSNotFound`在 64 位系统上被转换`NSIntegerMax`为`2147483647`. 稍后您尝试访问您的`modelArray`at 索引`NSIntegerMax - 1`，这会引发`NSRangeException`.

因此，可以通过`labelContents`在您的`newButtonTapped:`方法中设置或按照我的建议重新设计代码来解决此问题：

```
- (IBAction)newButtonTapped:(id)sender 
{ 
    if(sender){ 
        ContentVC *newVC = [self contentViewControllerWithLabelContents:@"Page Two"]; 
        [self.modelArray addObject:newVC];

        NSArray *newVCs = nil;

        if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation) || self.modelArray.count == 1)
            newVCs = @[newVC];
        else
        {
            NSUInteger secondLastIndex = self.modelArray.count - 2;
            id previousVC = [self.modelArray objectAtIndex:secondLastIndex];
            newVCs = @[previousVC, newVC];
        }

        [self.pageVC setViewControllers:newVCs direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
    } 
} 
```

# css - div在另一个内部的垂直对齐 - 问题

> ID：13222687
> 
> 赞同：1
> 
> 时间：2012-11-04T20:42:34.437
> 
> 标签：css, css-float

我最初有浮动 div，我希望这些浮动中的内容垂直对齐。

这给我带来了麻烦，所以我不得不移除浮动。

我遇到了这篇[文章](https://stackoverflow.com/questions/5661520/centering-2-divs-inside-another-vertically)中提到的这个[小提琴](http://jsfiddle.net/5vpA3/22/)。

并使用小提琴来获得所需的布局。但是我在垂直对齐 div 时遇到了麻烦。

我试过了，

```
vertical-align:middle;
display:table-cell; 
```

对于`parent`容器和

```
display: inline-block; 
```

对于`child`内容。

1）在这个[小提琴](http://jsfiddle.net/5vpA3/156/)中。我希望在`right`里面垂直对齐`right-container`。

换句话说。我想`two divs`在 a 内垂直对齐`main div`，并且两个 div 中的每个 div 都需要垂​​直对齐。

2）我怎样才能实现浮动内的垂直对齐？所以我可能不会改变我原来的布局。说在小提琴左右都是`floats`。

需要一些指点。

**编辑：**

使用表格可能会更简单。但我正在寻找基于 div 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:51:40.763

那是你要的吗？

添加：`<div id="right" style="display:table-cell;vertical-align:middle;"> RIGHT </div>`

jsfiddle 更新：http: [//jsfiddle.net/5vpA3/157/](http://jsfiddle.net/5vpA3/157/)

# format - 如何使用 AutoHotkey 插入格式化文本？

> ID：13222689
> 
> 赞同：8
> 
> 时间：2012-11-04T20:42:49.660
> 
> 标签：format, autohotkey

我创建了一个脚本，可以在任何 Windows 应用程序中插入今天的日期。当我将其粘贴到目标应用程序时，我想控制字体和/或颜色等格式。我似乎无法在文档或任何帮助论坛中找到它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T01:50:45.477

格式化文本可以使用 AutoHotkey 1.1（又名 AutoHotkey_L）和一个名为[WinClip](http://www.autohotkey.com/board/topic/74670-class-winclip-direct-clipboard-manipulations/)的脚本存储在剪贴板中：

```
#Include WinClipAPI.ahk
#Include WinClip.ahk

; Format the current time.
FormatTime time

; Clear previous clipboard contents.
WinClip.Clear()

; Store time on clipboard, in plain text, RTF and HTML formats.
WinClip.SetText(time)
WinClip.SetRTF("{\rtf{\b " time "}}")
WinClip.SetHTML("<b>" time "</b>") 
```

有些程序只接受特定格式。不允许格式化的程序需要纯文本，而 RTF 在写字板中工作，而 HTML 在 Word 中工作。RTF 也适用于 Word，但我发现它将字体更改为 Times New Roman（当 HTML 不存在时）。

一旦它存储在剪贴板上，`WinClip.Paste()`或者`Send ^v`将其粘贴。

# android - 在 MapActivity 中设置 onClickListener 方法？

> ID：13222690
> 
> 赞同：0
> 
> 时间：2012-11-04T20:42:52.373
> 
> 标签：android, mapactivity

到目前为止，我总是在 MapActivity 中使用 OverlayItems 和我制作的类 Point 绘制“点”。使用这种方法，我可以在 MapActivity 中绘制一些“点”。但是我如何绘制“可点击”点？

我即兴创作了这个类 Point，并遵循有关 OverlayItems 方法的教程，但我可以实现任何你自己为这个“可点击点”解释我的方法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:53:24.053

以这个项目为例，看看如何实现可点击的 OverlayItems [https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T20:54:21.093

我找不到这样做的方法，所以我编写了自己的点击逻辑。这是来自我现在搁置的一个项目，并且正在进行中（例如硬编码值），但逻辑有效。希望能帮助到你：

```
 @Override
  public boolean onTap(GeoPoint geoPoint, MapView mapView){

      if (!isRoute){ // nothing to do if it's a route

          Cursor cursor = (Cursor) mapView.getTag();
          Projection projection = mapView.getProjection();

          // get pixels for the point clicked
          Point clickedPoint = new Point();
          projection.toPixels(geoPoint, clickedPoint);

          if (cursor.moveToFirst()){
                do {

                    try {
                        Double lat = cursor.getFloat(Database.LAT_COLUMN) * 1E6;
                        Double lng = cursor.getFloat(Database.LONG_COLUMN) * 1E6;
                        GeoPoint thisGeoPoint = new GeoPoint(lat.intValue(), 
                                                             lng.intValue());

                        // get pixels for this point
                        Point overlayPoint = new Point();
                        projection.toPixels(thisGeoPoint,overlayPoint);

                        // did the user click within 30 pixels?
                        if ((Math.abs(clickedPoint.x - overlayPoint.x) < 30) && (Math.abs(clickedPoint.y - overlayPoint.y) < 30)){

                            // get a cursor to this record
                            Cursor thisCursor = TestApp.db.rawQuery("SELECT * FROM " + Database.DATABASE_TABLE_PINS + " WHERE CID='" + cursor.getString(Database.ID_COLUMN) + "'", null);
                            thisCursor.moveToFirst();

                            // create and show an instance of the PinDetailsDialog
                            PinDetailsDialog customiseDialog ;
                            // TODO this is a kludge, why does this throw an exception sometimes?
                            try{
                                customiseDialog = new PinDetailsDialog(mapView, context,thisCursor,context.getResources().getConfiguration().orientation);
                                customiseDialog.show(); 
                            } catch (Exception e){
                                customiseDialog = new PinDetailsDialog(mapView, mapView.getContext(),thisCursor,context.getResources().getConfiguration().orientation);
                                customiseDialog.show(); 
                            }               

                            return true;
                        }

                    } catch (Exception e){
                        e.printStackTrace();
                    }

                } while(cursor.moveToNext());       
          }

      }
      return true;

  } 
```

基本思想是获取用户在地图上单击的点，将该点转换为经纬度，然后迭代我的数据点以寻找匹配项。请注意，我正在使用 +/- 30 像素的命中测试（当我再次选择它时，我不会硬编码。

我把 TODO 留在了那里，以防你偶然发现类似的东西，但我怀疑这完全是我的 PinDetailsDialog 类实现中的某个问题。

我使用多个地图视图，每个地图视图都使用存储在 SQLite 表中的数据。我存储对游标的引用以读取 Mapview 的 tag 属性中的数据，因此调用 .getTag() 。

# jquery - 使用 jQuery 更改相对于 P 标签的上边距

> ID：13222694
> 
> 赞同：2
> 
> 时间：2012-11-04T20:42:58.493
> 
> 标签：jquery, html, css

我想在其中有几个带有 p 标签但不可见的 div。然后，每当您将鼠标悬停在 div 上时，p 标签的 margin-top 值就会变为其高度的负值。例如：

第一个 p 的高度是 60px，它的 margin-top 值是 0。您将鼠标悬停在其包含的 div 上。第一个 p 的 margin-top 值变为其高度的负值，即 60px，导致 p 向上移动。

第二个 p 的高度是 40px，它的 margin-top 值为 0。您将鼠标悬停在其包含的 div 上。第二个 p 的 margin-top 值变为其高度的负值，即 40px 导致它向上移动。

这是我计划使用的代码：

```
$(document).ready(function() {
    $("div.works div").hover(function() {
        $(this).find("p").stop().animate({
            marginTop: -$("p").outerHeight()
        }, 250);
    } , function() {
        $(this).find("p").stop().animate({
            marginTop: "0"
        }, 250);
    });
}); 
```

我已经在这里设置了非常接近的东西：http: [//jsfiddle.net/yryRZ/1/](http://jsfiddle.net/yryRZ/1/)

我遇到的唯一问题是所有 p 都向上移动相同的量，而不是相对于它们自己的高度。似乎它们都上升了第一个 p 的高度。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:47:01.173

您`p`可以使用`$(selector, context)`.

```
$(document).ready(function() {
    $("div.works div").hover(function() {
        var $p = $('p', this);
        $p.stop().animate({
            marginTop: - $p.outerHeight()
        }, 250);
    } , function() {
        $('p', this).stop().animate({
            marginTop: "0"
        }, 250);
    });
}); 
```

[http://jsfiddle.net/QCect/](http://jsfiddle.net/QCect/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:50:01.437

您可以使用`position: relative`>结构并为属性`position: absolute`设置动画：http: [//jsfiddle.net/yryRZ/3/](http://jsfiddle.net/yryRZ/3/)`bottom`

# javascript - 为什么在继承期间需要重置 javascript 构造函数？

> ID：13222696
> 
> 赞同：3
> 
> 时间：2012-11-04T20:43:18.310
> 
> 标签：javascript, constructor

为什么将构造函数从 Mammal 重置为 Cat 很重要？我一直在玩这个代码，并没有发现使用“错误”构造函数的任何负面影响。

```
function Mammal(name){
    this.name=name;
    this.offspring=[];
}

Cat.prototype = new Mammal();        // Here's where the inheritance occurs
Cat.prototype.constructor=Cat;       // Otherwise instances of Cat would have a constructor of Mammal

function Cat(name){
    this.name=name;
} 
```

例如：

```
function Mammal(name){
    this.name=name;
    this.offspring=[];
}

Cat.prototype = new Mammal();        // Here's where the inheritance occurs

function Cat(name){
    this.name=name;
    this.hasFur = true;
}

c1 = new Cat();
alert(c1.hasFur); //returns true; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T20:44:24.280

从技术上讲，您*不需*要这样做，但是由于您要替换整个`.prototype`对象，因此您会丢失`.constructor`默认放置的对象，因此如果您有依赖它的代码，则需要手动包含它。

# android - logcat 与 dmesg 有什么区别？

> ID：13222698
> 
> 赞同：7
> 
> 时间：2012-11-04T20:43:38.057
> 
> 标签：android, logcat, dmesg

logcat 使用什么日志源（默认设置：`adb shell logcat`）。dmesg 日志是否包含在 logcat 的输出中？如果不是，dmesg 日志和 logcat 日志有什么区别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-04T21:44:09.403

根据源代码[https://github.com/android/platform_system_core/blob/master/liblog/logd_write.c](https://github.com/android/platform_system_core/blob/master/liblog/logd_write.c) `Log.d(String tag, String message)`直接写入`/dev/log/main`.

你可以像这样写在那里`adb shell echo "Hello world" >> /dev/log/main`

但是`dmesg`打印内核环形缓冲区的内容。所以`dmesg`只会打印系统写入内核日志的内容，`logcat`只会输出android应用程序的日志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T11:13:38.703

LOGCAT——这在Android中使用，查看Android内部活动管理器写入的不同消息，你看到android也使用linux内核，但它的作用是，一旦内核启动（硬件初始化/探测已经照顾），android启动了一个名为init的进程，它解析包含所有android系统活动的init.rc文件，我的意思是android启动的基本进程，在这个init.rc文件中有一个名为zygote的进程启动Dalvik 虚拟机，然后是所有其他活动管理器，应用程序将使用这些管理器与硬件进行交互。所以它基本上是来自 VM 的消息，供应用程序程序员调试它。logcat 示例 [http://pastebin.com/bV1Vd6EQ](http://pastebin.com/bV1Vd6EQ)

Dmesg - 来自内核的消息，假设你编写了一个驱动程序，它可以用作调试驱动程序和其他内核代码的工具，其中大多数是驱动程序消息，它是调试内核，驱动程序等的好方法。 dmesg 示例 [http://pastebin.com/P4ja9PFi](http://pastebin.com/P4ja9PFi)

Logcat 仅适用于 android 并且在任何其他操作系统中不可用，Logcat 和 dmesg 在 Android 上可用，但反之则不适用于任何 linux 发行版。

问候，祖布拉吉

# java - 使用 EclipseLink 在 @MappedSuperclass 基类上使用 @ElementCollection 和 @CollectionTable

> ID：13222699
> 
> 赞同：3
> 
> 时间：2012-11-04T20:43:40.883
> 
> 标签：java, hibernate, jpa, jpa-2.0, eclipselink

我有一个定义如下的基类：

```
@MappedSuperclass
public abstract class BaseUser {
    @ElementCollection(fetch = FetchType.EAGER)
    @CollectionTable(name = "user_tags",
        joinColumns = {
                @JoinColumn(name = "owner_id", referencedColumnName= "tagName")})
    public Set<String> getTags() {...} 
```

还有一堆扩展 BaseUser 的派生用户类。
使用 Hibernate 为所有派生类创建了一个“user_tags”表（这是我想要的）。
转移到 EclipseLink 之后，引擎似乎试图一遍又一遍地添加“owner_id”和“tagName”列作为派生类的数量，这显然会导致表创建失败。有没有办法在 EclipseLink 中获得与 Hibernate 相同的行为？JPA 规范在这种情况下期望什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:02:34.503

似乎是一个错误。请记录错误并为它投票。

它可能已经修复，所以请尝试最新版本。

# c++ - 向量返回时移动语义行为

> ID：13222700
> 
> 赞同：0
> 
> 时间：2012-11-04T20:43:46.710
> 
> 标签：c++, c++11, move-semantics

我一直在玩 c++11 移动语义

在代码中...

```
#include <vector>
#include <string>

std::vector<std::string> GetNewVector()
{
  std::vector<std::string> newVec; 
  newVec.push_back(std::string("hello")); //(1)
  newVec.push_back(std::string("whey")); //(2)

  return newVec;
}

int main(int argc, char* argv[])
{
  std::vector<std::string> vec = GetNewVector();
} 
```

在点 (1) 处，“hello”对象的移动构造函数在对象被移动到向量中时被调用。

在第 (2) 点，首先再次调用“hello”的移动构造函数（我假设这是向量重新分配的位置），然后调用“乳清”移动构造函数。

这一切都如预期的那样，但是我希望在结束时返回向量时再次移动对象`GetNewVector()`，但是不会再次调用移动构造函数。我的猜测是 RVO 正在发生，但是当我在调试模式下运行 Visual Studio (2k10) 时，我不确定这是否会发生？

如果可以执行 RVO，那么它是否会优先于使用移动构造函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T20:46:36.837

如果指定它们以元素方式移动，则容器上移动的优势将被严重削弱。

取而代之的是，它们只是采用其他内部胆量，即在 s 情况下指向动态分配数组的指针`std::vector`，从而将元素留在它们所在的位置，从而使其成为恒定的复杂性操作。如果您进行了元素移动，您将看到线性复杂性操作。

> 如果可以执行 RVO，那么它是否会优先于使用移动构造函数？

该标准在这方面受到了一些限制，但是是的，RVO（通常是复制省略，也涵盖与其名称相反的移动）当然会优先于其他任何东西，因为它更快。:)

请注意，自动移动仅在*可以*进行复制省略的情况下进行，但不是出于任何原因。有关自动移动的更复杂细节，另请参阅[此问题](https://stackoverflow.com/q/11492948/500104)。

# linux - Amazon Linux AMI 上 Symfony2 中的缓存/日志权限

> ID：13222702
> 
> 赞同：2
> 
> 时间：2012-11-04T20:43:58.027
> 
> 标签：linux, caching, symfony, permissions, amazon-web-services

我已经在 AWS Linux AMI（一个免费的微型实例）上设置了 Symfony2，并成功设置了 PHP-FPM 和 nginx。

我的 Symfony 应用程序可以工作.. 直到我使用命令行清除缓存。当我这样做时，`/app/logs`and`app/cache/`文件夹将归`root`其所有，并且应用程序无法再写入它。

我可以在每次缓存清除后手动`chmod 777`/`chown nginx:nginx`这些文件，但必须有更好的方法吗？

我尝试`su nginx;`在清除缓存之前使用 bash 函数，但这不起作用。

在缓存清除之前缓存文件夹之前：

```
drwxrwxrwx 11 nginx nginx 4096 Nov  4 13:23 dev
drwxrwxrwx 10 nginx nginx 4096 Nov  4 20:39 prod 
```

之后：

```
drwxrwxrwx 11 nginx nginx 4096 Nov  4 13:23 dev
drwxr-xr-x 10 root  root  4096 Nov  4 20:39 prod 
```

这是我可以在应用程序中修复的问题，还是有办法设置权限以免它们变成`root`ed？

编辑：我还应该提到我尝试过：

```
sudo chmod +a "nginx allow delete,write,append,file_inherit,directory_inherit" app/cache app/logs 
```

但是服务器不识别`+a`。

还尝试使用：

```
 setfacl -R -m u:nginx:rwx app/cache app/logs 
```

这不会出错，但不能解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:18:33.330

sudo -u nginx php 应用程序/控制台缓存：清除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:18:44.450

**编辑：** 还不能接受这个答案，但这对我有用：所以我按照这里的指南成功地在我的挂载上启用了 ACL：[http ://blog.dsyph3r.com/2011/09/symfony2-using-setfacl-for-缓存和.html](http://blog.dsyph3r.com/2011/09/symfony2-using-setfacl-for-cache-and.html)

对于像这样的新手，我注意到驱动器的标签（有点奇怪）`"Label=/"`在`fstab`.

完成后，我使用

```
 setfacl -R -m u:nginx:rwx app/cache app/logs
 setfacl -dR -m u:nginx:rwx app/cache app/logs 
```

现在我可以随意清除缓存了。

**原创（仅在您不能或不会启用 ACL 时使用）：** 我遵循了一个帮助页面，该页面让我`umask(0000);`在许多地方进行设置，即`app/app*.php`s 和`app/console`脚本。这似乎奏效了，但我不确定其中的含义。

为非 umask 解决方案留下问题。研究在我的坐骑上激活 ACL，但对它来说是新的，这一切似乎......奇怪的名字。

# iphone - iPhone：翻页动画

> ID：13222704
> 
> 赞同：0
> 
> 时间：2012-11-04T20:44:14.097
> 
> 标签：iphone, core-animation, calayer

我的代码正在翻转我的视图，就好像您正在以相反的页面顺序（从右到左）阅读一本书。我试图实现相反的效果，但我似乎无法弄清楚如何从视图坐标系的另一侧进行页面翻转。

这是我的代码：

```
_memoryOneView.layer.anchorPoint = CGPointMake(1.0f, .5f);
_memoryOneView.layer.position = CGPointMake(_memoryOneView.layer.position.x + _memoryOneView.bounds.size.width/2.0f, _memoryOneView.layer.position.y);

[UIView animateWithDuration:.5 animations:^{
    _memoryOneView.layer.transform = CATransform3DMakeRotation((M_PI / 2.0), 0, 1.0f, 0);
}]; 
```

我尝试将许多值设为负值，但这只是将动画隐藏在其后面的视图后面。有任何想法吗？泰。

**编辑**我还需要能够使用此动画进行拖动，这意味着我需要一些可以轻松转换为用户拖动到下一页的代码的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:52:46.757

iOS 5 有一个内置的 PageViewController 正是为此。教程在这里：[http ://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application)

# javascript - 三.js & 转换顺序

> ID：13222708
> 
> 赞同：1
> 
> 时间：2012-11-04T20:44:45.840
> 
> 标签：javascript, three.js

我现在正在学习 THREE.js，我遇到了一个可能是菜鸟的问题。

我有一个 JSON 对象宽度动态更新，它包含 4 面墙的一些数据。JSON结构：

```
{

...

walls: [{
            start: { 
                x : 0,  
                y : 0, 
                z : 0  
            },
            length: 1200,  
            rotation: 0    
        }, {
            start: { 
                x : 0, 
                y : 0, 
                z : 0  
            },
            length: 1200,   
            rotation: -(Math.PI/2)   
        }, {
            start: { 
                x : 0, 
                y : 0,
                z : 1200 
            },
            length: 1200,  
            rotation: 0    
        }, {
            start: { 
                x : 1200, 
                y : 0, 
                z : 0   
            },
            length: 1200,
            rotation: (Math.PI/2) 
        }],

...

} 
```

我正在尝试在画布上定位墙壁，当墙壁只有平移或旋转时没关系，但是当墙壁同时具有它们时就会出现问题。

这是我的代码（`this._container`是的一个实例`THREE.Mesh`）：

```
this._container.matrixAutoUpdate = false;
this._container.add(new THREE.AxisHelper(1000));

if(rotation) {
    this._container.rotation.y = rotation;
    this._container.updateMatrix();        
}

if(translation) {
    this._container.translateX((translation.x + (width/2)));
    this._container.translateY((translation.y + (height/2)));
    this._container.translateZ((translation.z));
    this._container.updateMatrix();
} 
```

如果我先应用旋转然后平移，它也会旋转对象的局部轴，并且平移会有错误的方向（[http://robber.hu/webgl/1.png](http://robber.hu/webgl/1.png)）。如果我先应用平移，而不是旋转，Y 轴将移动到其他位置，并且旋转将围绕错误的点（[http://robber.hu/webgl/2.png](http://robber.hu/webgl/2.png)）。

我认为有两种方法可以解决这个问题，但找不到解决方案：

*   不知何故使用“全局平移”，所以对象在场景的轴上平移，然后使用第一种方法

*   将对象的“枢轴”更改为左边缘或右边缘，然后使用第二种方法

我该如何实现它，或者我在哪里可以找到一些文档/教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:44:11.913

解决了。解决方案是：使用两个转换的三个转换。首先，将对象平移到最终位置，其次，旋转它，最后，通过局部 X 和 y 轴再次平移。第三次平移将局部轴从对象的中心移动到角落。

R

# javascript - document.getSelection 不会在 Firefox 的结果字符串中返回回车

> ID：13222712
> 
> 赞同：0
> 
> 时间：2012-11-04T20:45:31.600
> 
> 标签：javascript, firefox

我正在尝试使用 javascript 方法 document.getSelection() 来检索网页中的选定文本。我注意到在 Mozilla Firefox 中，此方法返回的字符串不包含 '\r' 或 '\n' 字符，而在其他浏览器中，返回的字符串包含这些字符。

这就是我检索所选文本的方式：

```
 function getSelText() {
       var str = "";
       if (document.getSelection) {
          str = document.getSelection();
       } else if (document.selection && document.selection.createRange) {
          var range = document.selection.createRange();
          str = range.text;
       } else {
          str = "Sorry, selection is not available with your browser.";
       }
       var tmp = new String(str);
       var regex = new RegExp("'", 'g');
       str = tmp.replace(regex, "&apos;");
       return str;
    } 
```

我错过了什么吗？

非常感谢！

最好的

盖尔西

# protocols - 为什么反熵协议中会出现“熵”这个词？

> ID：13222713
> 
> 赞同：11
> 
> 时间：2012-11-04T20:45:43.297
> 
> 标签：protocols, replication, distributed-system, distributed-algorithm

反熵协议是八卦协议的一种形式。[http://en.wikipedia.org/wiki/Gossip_protocol](http://en.wikipedia.org/wiki/Gossip_protocol)。我想知道是否有人可以解释一下熵在这里的意义。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T21:32:34.963

潜入消息中的噪音可以看作是消息内容中熵增长的一种形式。消除噪声（在这种情况下，通过比较原始消息的多个副本）是一种熵降低过程（即反熵过程，因为熵永远不会自行降低）。

# c# - HttpClient GetAsync 未在 Windows 8 上以非 void 返回类型完成

> ID：13222714
> 
> 赞同：3
> 
> 时间：2012-11-04T20:45:43.437
> 
> 标签：c#, asynchronous, windows-8, windows-runtime

我正在尝试使用 Windows 8 应用程序的异步功能下载和解析网站。

我在这个方法中调用下载代码：

```
private async Task<Show> getSeasonAndEpisodeInformation(Show currentShow)
    {
        int seriesID = currentShow.SeriesID;
        EpisodeBuilder epBuilder = new EpisodeBuilder(seriesID);

        List<Episode> eps = await epBuilder.getEpisodeList();
        SeasonBuilder seasonBuilder = new SeasonBuilder(eps);

        return currentShow;
    } 
```

getEpisodeList() 函数是：

```
public async Task<List<Episode>> getEpisodeList()
    {
        httpClient = new HttpClient();
        httpClient.MaxResponseContentBufferSize = 2560000;
        httpClient.DefaultRequestHeaders.Add("user-agent", "Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)");

        try
        {
            List<Episode> episodes = new List<Episode>();
            HttpResponseMessage response = await httpClient.GetAsync(new Uri("http://www.example.com"));
            response.EnsureSuccessStatusCode();
            //Never get here

            return episodesList;
        }
        catch (Exception)
        {

        }

        return null;
    } 
```

如果我的 getEpisodeList 方法无效，那么网页将下载并继续。我已经调试并确保它是永远不会完成的 httpClient.GetAsync(..) 行。有没有办法解决？

在 getSeasonAndEpisodeInformation 方法中，我需要确保 getEpisodeList() 方法在继续之前已返回 - 因此在调用 epBuilder.getEpisodeList() 时使用 await 关键字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:09:02.137

您发布的所有代码看起来都很好。您可能正在呼叫`Task.Wait`或`Task.Result`呼叫树更远的某个地方。正如我在博客中所描述的，[这将导致 deadlock](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)。

`Wait`要解决此问题，请删除对or的所有调用`Result`。使用“`await`一直向下”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:43:47.830

我通过在调用 http.GetAsync 时删除“await”关键字来解决此问题。调用现在完成，getSeasonAndEpisodeInformation 方法中的“等待”确保它异步运行。

# session - 如何自定义 ServiceStack SessionFeature？

> ID：13222716
> 
> 赞同：2
> 
> 时间：2012-11-04T20:45:45.233
> 
> 标签：session, servicestack

这个问题与[我们如何在 ServiceStack 中删除特定用户的会话密切相关？](https://stackoverflow.com/questions/13159891/how-can-we-remove-specific-users-session-in-servicestack)

SessionFeature 嵌入到 ServiceStack 框架中。使用我自己的 SessionFactory 也不起作用。

那么我可以使用的策略是什么？

任何想法？

# bash - Makefile - 如何区分变量赋值和命令

> ID：13222718
> 
> 赞同：2
> 
> 时间：2012-11-04T20:46:04.773
> 
> 标签：bash, makefile

我的 Makefile 中有以下代码，但我收到错误消息，指出`O?=2`它不是`sh -c`可以运行的命令。我在这里做错了什么？

```
gcc:
    O?=2
    @if test -z "$(DEBUG)" ; then \
      g++ -O${O} *.c -o palindrome ; \
    fi 
```

我试图设置`O`为`2`如果用户没有提供它，然后构建我的回文可执行文件。

* * *

确切的错误：

```
$ make gcc
O?=2
/bin/sh: O?=2: command not found
make: *** [gcc] Error 127
$ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:51:06.337

将它移到命令之外，以便它由“make”而不是 shell 处理：

```
O?=2
gcc:
    @if test -z "$(DEBUG)" ; then \
      g++ -O${O} *.c -o palindrome ; \
    fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T20:52:51.763

该行`O?=2`不是分配，而是执行以重建目标的命令`gcc`。这意味着它被馈送到 $(SHELL)，它对此一无所知。如果您想要一个变量分配，请将其单独放在线上，而不是作为命令的一部分：

```
O?=2

gcc:
    @if test -z "$(DEBUG)" ; then \
        g++ -O${O} *.c -o palindrome ; \
    fi 
```

你可以只使用`O = 2`. 当用户在命令行上提供一个值时，它将覆盖它：

```
make O=1 
```

将`-O1`用于优化。

# ruby-on-rails - 如何在 Rails 3 中手动设置嵌套属性的错误？

> ID：13222720
> 
> 赞同：4
> 
> 时间：2012-11-04T20:46:11.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3

如何在 Rails 3 中手动设置嵌套属性的错误？

以下是我尝试过但不适合我的一些示例模型代码。

```
validate :matching_card_colors

has_many :cards
accepts_nested_attributes_for :card

def matching_card_colors
  color = nil
  cards.each do |card|
    if color.nil?
      color = card.color
    elsif card.color != color
      card.errors.add :color, "does not match other card colors"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-04T23:23:39.737

秘密在于你把错误放在哪里。查看[自动保存关联](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/autosave_association.rb#L288)的验证如何工作以获取线索：

```
def association_valid?(reflection, record)
  return true if record.destroyed? || record.marked_for_destruction?

  unless valid = record.valid?(validation_context)
    if reflection.options[:autosave]
      record.errors.each do |attribute, message|
        attribute = "#{reflection.name}.#{attribute}"
        errors[attribute] << message
        errors[attribute].uniq!
      end
    else
      errors.add(reflection.name)
    end
  end
  valid
end 
```

请注意错误是如何不添加到关联成员中的，而是添加到正在验证的记录中，违规属性以关联名称为前缀。你也应该能够做到这一点。尝试类似：

```
def matching_card_colors
  color = nil
  cards.each do |card|
    if color.nil?
      color = card.color
    elsif card.color != color
      # Note, there's one error for the association.  You could always get fancier by
      # making a note of the incorrect colors and adding the error afterwards, if you like.
      # This just mirrors how autosave_associations does it.
      errors['cards.color'] << "your colors don't match!"
      errors['cards.color'].uniq!
    end
  end
end 
```

# windows - 从操作系统级别配置中删除环境变量的命令行

> ID：13222724
> 
> 赞同：233
> 
> 时间：2012-11-04T20:46:42.013
> 
> 标签：windows, registry, environment-variables

Windows 有[`setx`](https://ss64.com/nt/setx.html)命令：

```
Description:
    Creates or modifies environment variables in the user or system
    environment. 
```

所以你可以像这样设置一个变量：

```
setx FOOBAR 1 
```

您可以像这样清除值：

```
setx FOOBAR "" 
```

但是，该变量不会被删除。它保留在注册表中：

[![富吧](../Images/00ba7558c344111264aca744e2bf29c3.png)](https://i.stack.imgur.com/Lnjns.png)

那么你将如何实际删除变量？

* * *

## 回答 #1

> 赞同：281
> 
> 时间：2012-11-04T20:52:54.350

要从当前环境中删除变量（*不是*永久）：

```
set FOOBAR= 
```

要从**用户**环境中永久删除变量（这是默认位置`setx`）：

```
REG delete HKCU\Environment /F /V FOOBAR 
```

如果变量是在**系统**环境中设置的（例如，如果您最初使用 设置它`setx /M`），请以管理员身份运行：

```
REG delete "HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /F /V FOOBAR 
```

注意：[`REG`](https://ss64.com/nt/reg.html)上面的命令不会影响任何现有进程（以及一些从现有进程派生的新进程），因此如果更改立即生效很重要，最简单和最可靠的做法是注销并重新登录或重新启动。如果这不是一个选项，或者您想更深入地挖掘，这里的一些其他答案有一些可能适合您的用例的好建议。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2014-01-27T14:47:29.123

要从当前命令会话中删除变量而不永久删除它，请使用常规内置`set`命令 - 只需在等号后不添加任何内容：

`set FOOBAR=`

要确认，`set`请不带参数运行并检查当前环境。该变量应该完全从列表中丢失。

> **注意**：这只会从**当前环境**中删除变量- 它不会将更改保留到注册表。当一个新的命令进程启动时，变量将返回。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2018-02-15T21:08:37.020

这已经涵盖了很多，但是缺少一条重要的信息。希望我能帮助弄清楚这是如何工作的，并为疲惫的旅行者提供一些缓解。:-)

**从当前进程中删除**

显然，每个人都知道您这样做只是为了从当前进程中删除一个环境变量：

```
set FOO= 
```

**永久删除**

有两组环境变量，系统范围和用户。

***删除用户环境变量：***

```
reg delete "HKCU\Environment" /v FOO /f 
```

***删除系统范围的环境变量：***

```
REG delete "HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /F /V FOO 
```

**无需重启即可应用价值**

这是缺少的神奇信息！您想知道为什么在执行此操作后，当您启动一个新的命令窗口时，环境变量仍然存在。原因是 explorer.exe 没有更新其环境。当一个进程启动另一个进程时，新进程会从启动它的进程继承环境。

有两种方法可以在不重新启动的情况下解决此问题。最暴力的方法是杀死你的 explorer.exe 进程并重新启动它。您可以从[任务管理器](http://en.wikipedia.org/wiki/Windows_Task_Manager)中执行此操作。但是，我不推荐这种方法。

另一种方法是告诉 explorer.exe 环境已经改变，它应该重新读取它。这是通过广播 Windows 消息 (WM_SETTINGCHANGE) 来完成的。这可以通过一个简单的 PowerShell 脚本来完成。您可以轻松编写一个来执行此操作，但我在*[“脚本更改后更新窗口设置”](https://www.angryadmin.co.uk/?tag=wm_settingchange)*中找到了一个：

```
if (-not ("win32.nativemethods" -as [type])) {
    add-type -Namespace Win32 -Name NativeMethods -MemberDefinition @"
        [DllImport("user32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        public static extern IntPtr SendMessageTimeout(
            IntPtr hWnd, uint Msg, UIntPtr wParam, string lParam,
            uint fuFlags, uint uTimeout, out UIntPtr lpdwResult);
        "@
}

$HWND_BROADCAST = [intptr]0xffff;
$WM_SETTINGCHANGE = 0x1a;
$result = [uintptr]::zero

[win32.nativemethods]::SendMessageTimeout($HWND_BROADCAST, $WM_SETTINGCHANGE,[uintptr]::Zero, "Environment", 2, 5000, [ref]$result); 
```

**概括**

因此，要删除名为“FOO”的用户环境变量并将更改反映在您之后启动的进程中，请执行以下操作。

1.  将 PowerShell 脚本保存到文件中（我们将其命名为 updateenv.ps1）。
2.  从命令行执行此操作： reg delete "HKCU\Environment" /v FOO /f
3.  运行 updateenv.ps1。
4.  关闭并重新打开命令提示符，您将看到不再定义环境变量。

***请注意，您可能必须更新您的 PowerShell 设置以允许您运行此脚本，但我将把它作为 Google-fu 练习留给您。***

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2018-10-08T18:12:10.790

在**PowerShell**中，您可以使用 .NET[`[System.Environment]::SetEnvironmentVariable()`](https://docs.microsoft.com/en-us/dotnet/api/system.environment.setenvironmentvariable?view=netcore-2.1#System_Environment_SetEnvironmentVariable_System_String_System_String_System_EnvironmentVariableTarget_)方法：

*   要**删除***名为的***用户*****环境变量**`FOO`：*

     *```
    [Environment]::SetEnvironmentVariable('FOO', $null, 'User') 
    ```* 

 *^(请注意，`$null`它用于更好地表示*删除*`''`变量的意图，尽管在技术上它实际上与在这种情况下传递相同。)

*   要**删除***名为`FOO`-的***系统*****（机器级）环境变量****需要提升**（必须以管理员身份运行）：*

     *```
    [Environment]::SetEnvironmentVariable('FOO', $null, 'Machine') 
    ```* 

 *除了更快的执行之外，[`reg.exe`基于 -based 方法](https://stackoverflow.com/a/13222794/45375)的优点是**其他应用程序**通过`WM_SETTINGCHANGE`消息通知更改（尽管并非所有应用程序都侦听该消息）。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2014-05-14T20:28:39.627

我同意[CupawnTae 的观点](https://stackoverflow.com/questions/13222724/command-line-to-remove-an-environment-variable-from-the-os-level-configuration/13222794#13222794)。

`SET`对主环境的更改没有用。

仅供参考：系统变量在`HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment`（比用户变量长很多）。

因此，名为 FOOBAR 的系统变量的完整命令是：

```
REG delete "HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /F /V FOOBAR 
```

（注意处理空格所需的引号。）

该`setx`命令不支持删除语法太糟糕了。:(

PS：负责任地使用 - 如果你杀死你的路径变量，不要怪我！

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2019-11-18T14:52:24.690

**不重启就删除**

OP 的问题确实得到了广泛的回答，包括如何避免通过 powershell、vbscript 或您的名字重新启动。

但是，如果您只需要坚持使用 cmd 命令并且没有能够调用 powershell 或 vbscript 的奢侈，您可以使用以下方法：

```
rem remove from current cmd instance
  SET FOOBAR=
rem remove from the registry if it's a user variable
  REG delete HKCU\Environment /F /V FOOBAR
rem remove from the registry if it's a system variable
  REG delete "HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /F /V FOOBAR
rem tell Explorer.exe to reload the environment from the registry
  SETX DUMMY ""
rem remove the dummy
  REG delete HKCU\Environment /F /V DUMMY 
```

所以这里的神奇之处在于，通过使用“setx”将某些内容分配给您不需要的变量（在我的示例中为 DUMMY），您可以强制 Explorer.exe 从注册表中重新读取变量，而无需 powershell。然后你清理那个假人，即使那个人会在 Explorer 的环境中停留一段时间，它也可能不会伤害任何人。

或者，如果在删除变量后您需要设置新变量，那么您甚至不需要任何虚拟变量。只需使用 SETX 设置新变量，就会自动清除您刚刚从任何可能开始的新 cmd 任务中删除的变量。

*背景信息：我刚刚通过修改现有的 cmd 脚本，成功地使用这种方法在我工作的所有计算机上用同名的系统变量替换了一组用户变量。手动操作的计算机太多，将额外的 powershell 或 vbscript 复制到所有计算机也不实际。我迫切需要用系统变量替换用户的原因是用户变量在漫游配置文件中得到同步（没有考虑到这一点），因此使用相同 Windows 登录但需要不同值的多台机器混淆了。*

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2014-11-26T19:44:44.153

[DougWare 的答案](https://stackoverflow.com/questions/13222724/command-line-to-remove-an-environment-variable-from-the-os-level-configuration/23664498#23664498)中的命令不起作用，但确实如此：

```
reg delete "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /v FOOBAR /f 
```

该快捷方式`HKLM`可用于`HKEY_LOCAL_MACHINE`.

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-06-05T23:33:57.037

```
setx FOOBAR "" 
```

只是导致 FOOBAR 的值为空字符串。（虽然，它使用`set`带有“”的命令显示，所以双引号可能是字符串。）

我用了：

```
set FOOBAR= 
```

然后 FOOBAR 不再列在 set 命令中。（不需要注销。）

Windows 7 32 位，使用命令提示符，非管理员是我使用的。（不是 cmd 或`Windows`+ `R`，这可能会有所不同。）

顺便说一句，我创建后在注册表中的任何位置都没有看到我创建的变量。我没有以管理员身份使用[RegEdit 。](https://en.wikipedia.org/wiki/Windows_Registry#Registry_editors)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-09-13T11:34:36.360

您还可以创建一个小的[VBScript](http://en.wikipedia.org/wiki/VBScript)脚本：

```
Set env = CreateObject("WScript.Shell").Environment("System")
If env(WScript.Arguments(0)) <> vbNullString Then env.Remove WScript.Arguments(0) 
```

然后将其称为`%windir%\System32\cscript.exe //Nologo "script_name.vbs" FOOBAR`.

缺点是您需要一个额外的脚本，但它不需要重新启动。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-08T13:39:30.200

顺便说一句，我刚刚弄清楚如何取消设置您使用**setx**设置的永久变量。

只需写引号，例如：

```
setx myvar "" 
```

并且在下一个 cmd 窗口重新启动时，如果您搜索变量

```
set myvar 
```

不会有任何设置。**

# javascript - 选择某些菜单项时更改显示 div 的 JQuery 下拉菜单

> ID：13222726
> 
> 赞同：0
> 
> 时间：2012-11-04T20:46:44.417
> 
> 标签：javascript, html, onchange

我试图让一个 Div 显示从下拉菜单中选择某些项目的时间。出于某种原因，它会显示何时选择了菜单中的任何项目，我不知道为什么。谢谢你的帮助！

```
<select class="selectDesign" id="designOne" name="design1">
<option value="none">None</option>
<option value="ace">Ace</option>
<option value="aerialist">Aerialist</option>
<option value="anthropologie">Anthropologie</option>
<option value="clare">Clare</option>
<option value="darcy">Darcy</option>
<option value="dauphine">Dauphine</option>
<option value="derby">Derby</option>
<option value="signature">Signature</option>
</select>

<div id="showPaints" style="display: none"><p>My Stuff</p></div> 
```

脚本

```
jQuery("#designOne").change(function(){

jQuery("#showPaints").hide("slow");

if (jQuery("#designOne").val() == "signature" , "ace" ) {
    jQuery("#showPaints").show("slow");

}

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:56:41.607

这一行是..奇怪的语法。

```
if (jQuery("#designOne").val() == "signature" , "ace" ) 
```

尝试：

```
var chosenValue = jQuery("#designOne").val();
if (chosenValue == "signature" || chosenValue == "ace" ) 
```

我认为`, 'ace'`可能会被翻译为布尔值 true，因此 if 总是会被击中。我可能只是在 jsfiddle 中运行一个测试。

# java - manifest.mf 文件是否显示 jar 的版本？

> ID：13222728
> 
> 赞同：1
> 
> 时间：2012-11-04T20:46:57.590
> 
> 标签：java, jar, specifications, manifest.mf

### 介绍

我创建了一个脚本，该脚本循环遍历我们的应用程序服务器上所有已安装的应用程序，为每个找到 WEB-INF/lib 文件夹的应用程序。然后，对于 lib 文件夹中的所有第三方 jar 文件，我[提取清单文件](http://hellem.org/blog/index.php/2012/11/01/jython-unpack-the-manifest-file?blog=6)以查找*Implementation-Version* -key 及其值，前提是假设*只有一个 Implementation-Version pr。清单.mf*。到目前为止一切都很好，但是......然后一些应用程序以某种方式依赖于 XML，因此在 lib 文件夹中具有像

*   xalan.jar
*   xml-apis.jar
*   xerxesImpl.jar

### 问题

所以，然后去阅读我必须承认的[Jar 文件规范](http://docs.oracle.com/javase/1.4.2/docs/guide/jar/jar.html#JAR%20Manifest)并没有让我清楚：我应该能够通过读取 manifest.mf 文件中的单个条目来找到 jar 文件的版本吗？

### manifest.mf 示例

这是在其中一个应用程序中找到的 xalan.jar 文件的 MANIFEST.MF 内容的一部分。这表明很难编写一个应该能够知道所有 jar 文件版本的脚本。

```
Manifest-Version: 1.0
Created-By: 1.3.1 (IBM Corporation)
Main-Class: org.apache.xalan.xslt.Process
Class-Path: xercesImpl.jar xml-apis.jar serializer.jar

Name: org/apache/xalan/
Comment: Main Xalan engine implementing TrAX/JAXP
Specification-Title: Java API for XML Processing
Specification-Vendor: Sun Microsystems Inc.
Specification-Version: 1.3
Implementation-Title: org.apache.xalan
Implementation-Version: 2.7.0
Implementation-Vendor: Apache Software Foundation
Implementation-URL: http://xml.apache.org/xalan-j/

Name: org/apache/xpath/
Comment: XPath engine
Implementation-Title: org.apache.xpath
Implementation-Version: 2.7.0
Implementation-Vendor: Apache Software Foundation
Implementation-URL: http://xml.apache.org/xalan-j/

Name: org/apache/xml/
Comment: DTM implementation and utilities
Implementation-Title: org.apache.xml
Implementation-Version: 2.7.0
Implementation-Vendor: Apache Software Foundation
Implementation-URL: http://xml.apache.org/xalan-j/ 
```

### 事后诸葛亮

但是 - 也许我应该创建一个“黑名单”，其中要忽略哪些 jar，例如所有与 XML 相关的 jar。我找到了这个链接[Xerces and Xalan locations and versions](http://www-01.ibm.com/support/docview.wss?uid=swg21214661)，表明我无法通过查看 manifest.mf 文件找到 xalan.jar 的版本。相反，我需要获取版本类的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:10:03.913

> 我是否应该通过读取 manifest.mf 文件中的单个条目来找到 jar 文件的版本？

您“可能”能够以这种方式找到版本号，但 JAR 文件中的版本号是可选的。（事实上​​，即使是版本的想法也是“可选的”。Java 中没有任何内容要求您对代码进行版本控制……尽管这无疑是个好主意！）

您的“事后想法”当然看起来更简单，尽管您需要查看相关规范以确定它是否需要工作。

# port - 我如何设置一个开放端口的 vpn 来绕过封闭的端口

> ID：13222734
> 
> 赞同：-1
> 
> 时间：2012-11-04T20:47:19.910
> 
> 标签：port, vpn, 3g, rdp

我有**3g** **调制解调器****连接**，所以我无法打开端口，我必须使用 RDP windows 2008 和 centOS。

我使用了一些免费的 vpn 成功地打开了我的端口，但是你知道这些免费的 vpn 非常慢。我想知道如何创建一个开放的端口 vpn，所以我可以在其中打开端口，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:28:05.590

如果您只需要几个端口，SSH 可能更容易设置，因为它可以进行端口转发（流量通过 ssh 连接路由）。只需在机器上运行 ssh 守护程序，端口可以从外部访问，从 3G 上的端口连接到它并转发您需要的所有端口（您可以选择转发的方向，因此它可以双向工作）。

# ruby-on-rails-3 - 为什么这个黄瓜代码会失败

> ID：13222735
> 
> 赞同：-3
> 
> 时间：2012-11-04T20:47:24.607
> 
> 标签：ruby-on-rails-3, cucumber

我有这个代码：[https](https://github.com/roelof1967/tamara) ://github.com/roelof1967/tamara 但是当我做黄瓜时，它会失败并显示此错误消息：[https ://gist.github.com/4008123](https://gist.github.com/4008123)

谁能向我解释我的代码有什么问题？

罗洛夫

编辑1：失败的代码：

```
class Output  
def messages    
   @messages ||= []  
end    
def puts(message)    
    messages << message  
end    
def output    
   @output ||= Output.new  
end
end

When /^he logs in$/ do   
   visit("/users/sign_in")  
   fill_in('Email', :with => @user.email)  
   fill_in('Password', :with => @user.password)  
   click_button('Sign in')
end

Then /^he should see "(.*?)"$/ do |message|  
  @output.messages.should include (message)
end 
```

这是错误消息：

```
undefined method `[]' for nil:NilClass NoMethodError)      
./features/step_definitions/login_steps.rb:6:in `/^he logs in$/'          
features/login.feature:5:in `When he logs in' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:26:50.137

为您的解决方案执行此操作：

**第一步**：创建家庭控制器

```
class HomeController < ApplicationController
  def index
  end
end 
```

**第 2 步**：**`home`**在其中创建文件夹`view`并创建**`index.html.erb`**文件，您的内容看起来像一个例子

```
<% if current_user.present? %>
  <h1> <%= link_to "Sign Out", destroy_user_session_path, :method => :delete %> </h1>
<% else %>
  <h1> <%= link_to "Sign Up", "/users/sign_up" %> |<%= link_to "Sign In", user_session_path %> </h1>
<% end %> 
```

**第 3 步**：现在你的**`login.feature`**文件看起来像

```
Feature: login and authecation

Scenario: log in as existing user
  Given a user "roelof" exists
  When he logs in
  Then he should see "Signed in successfully."
  And he should see "Sign Out"

Scenario: log in with bad password
  Given a user "Aslak" exists
  When he logs in with a bad password
  Then he should not see "Welcome, Aslak"
  And he should see "Login failed" 
```

**现在第 4 步**，运行`cucumber`

您的方案“以现有用户身份登录”将通过。

# python - 如何猜测用户输入的 4 位密码（我们不知道）？

> ID：13222738
> 
> 赞同：1
> 
> 时间：2012-11-04T20:47:34.627
> 
> 标签：python, python-3.x

有人可以解释如何在 python 中执行此操作吗？这个想法是找出用户输入的 4 位代码（例如：3968）。一个人将如何设计一种算法来找到这个？这是我得到的..：

```
code=int(input("Enter 4 digit secret code:"))
count=0000
while(count!=code):
    count=count+1
print("Your code was",count) 
```

这工作得很好....除了代码以 0 开头... 例如：0387 它打印“您的代码是 387”作为 0387

有什么快速解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T20:49:14.410

```
print("Your code was %04i" % count) 
```

% 表示这里有一个变量。04 表示将其零填充为四个字符。i 表示它是一个整数。[文档在这里。](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)

替代版本，使用新的、更灵活的[`.format()`格式](http://docs.python.org/2/library/string.html#format-string-syntax)：

```
print("Your code was {:04n}".format(count)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:51:11.813

您需要使用一些格式打印它：

```
print("Your code was {0:04d}".format(count)) 
```

这会将您的号码补零至最多 4 位数字。有关详细信息，请参阅[字符串格式化](http://docs.python.org/3/library/string.html#formatstrings)文档。

或者，您可以使用该[`str.zfill()`方法](http://docs.python.org/3/library/stdtypes.html#str.zfill)在字符串转换后添加额外的零：

```
print("Your code was", str(count).zfill(4)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:55:47.010

这是一种纯粹使用字符串的方法：

```
import itertools

code = input("Enter 4 digit secret code:")

for attempt in itertools.product("0123456789", repeat=4):
    attempt = ''.join(attempt)
    if attempt == code:
        print("Your code was", attempt)
        break 
```

# c# - 在 C# 中比较和匹配 XML 节点

> ID：13222746
> 
> 赞同：0
> 
> 时间：2012-11-04T20:48:04.580
> 
> 标签：c#, .net, xml, xml-parsing, linq-to-xml

我正在尝试解析此 XML 文档并将 guid 与链接节点匹配。我有一个用 C# 构建的 GUI，允许用户输入 guid，我试图吐出与之对应的相应链接节点。

例如。用户输入 ID：8385522，程序会输出：

[http://once.www.example.com](http://once.www.example.com)

XML如下：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:media="http://search.yahoo.com/mrss/">
  <channel>
    <title>
    </title>
    <link>
    </link>
    <description>
    </description>
    <language>
    </language>
    <lastBuildDate>
    </lastBuildDate>
    <item>
      <title>Parsing Example</title>
      <link>http://once.www.example.com</link>
      <pubDate>Sun, 16 Sep 2012 02:44:02 </pubDate>
      <guid>8385522</guid>
    </item>
    <item>
      <title>Parsing Example 2</title>
      <link>http://once.once.www.example2.com</link>
      <pubDate>Sat, 29 Sep 2012 18:29:13 </pubDate>
      <guid>8439191</guid>
    </item>
  </channel>
</rss> 
```

我没有为正在输入 ID 的文本框编写任何代码。我在该字段中的所有内容是：

```
void TextBox1TextChanged(object sender, EventArgs e)
{

} 
```

我需要将函数放在文本框字段中吗？任何帮助表示赞赏。

编辑：这是我到目前为止所拥有的：

```
 private void button2_Click_1(object sender, EventArgs e)
        {
            Clipboard.Clear();

            if (Directory.Exists(@"c:\text"))    
            { 

            XmlDocument xDoc = new XmlDocument();
            xDoc.Load(@"c:\text\text.xml");

            XmlDocument lDoc = new XmlDocument();
            lDoc.Load(@"c:\text\text.xml");

            XmlNodeList ctextbox = xDoc.GetElementsByTagName("guid");
            XmlNodeList link = lDoc.GetElementsByTagName("link"); 
```

我不确定解析功能需要在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T20:52:49.220

```
var links = from item in xdoc.Descendants("item")
            where (int)item.Element("guid") == yourGuid
            select (string)item.Element("link"); 
```

但是理解语法没有用于选择单个值的关键字，因此您需要做`links.SingleOrDefault();`才能获取链接。

或者您可以使用 fluent API 进行搜索：

```
XDocument xdoc = XDocument.Load(@"c:\text\text.xml");
int guid = 8385522; // parse your guid from textbox

string link = xdoc.Descendants("item")
                  .Where(item => (int)item.Element("guid") == guid)
                  .Select(item => (string)item.Element("link"))
                  .SingleOrDefault(); 
```

如果可以搜索一些不在文件中的 guid（看起来像您的情况，因为 guid 来自文本框），那么：

```
XDocument xdoc = XDocument.Load(@"c:\text\text.xml");
int guid = 8385525; // parse your guid from textbox

var links = from item in xdoc.Descendants("item")
            where (int)item.Element("guid") == guid
            select (string)item.Element("link");

string link = links.SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:22:02.160

```
string link = GetLink(@"c:\text\text.xml", "8385522"); 
```

--

```
string GetLink(string xmlFile,string guid)
{
    var xDoc = XDocument.Load(xmlFile);
    var item = xDoc.Descendants("item")
                    .FirstOrDefault(x => (string)x.Element("guid") == guid);

    if (item == null) return null;
    return (string)item.Element("link");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T22:24:48.137

我正在使用[这个 xml 库](https://github.com/ChuckSavage/XmlLib/)，但我相信您可以使用 .Net 提供的 XPath `System.Linq.XPath`。（我目前无法检查这是否 100% 准确）。

```
XElement root = XElement.Load(file);
XElement guid = root.XPathElement("//guid[.={0}]", id);
XElement link = null;
if(null != guid)
    link = guid.Parent.Element("link"); 
```

# opengl - 对OpenGL转换感到困惑

> ID：13222747
> 
> 赞同：1
> 
> 时间：2012-11-04T20:48:07.240
> 
> 标签：opengl

在opengl中有一个原点（0,0,0）的世界坐标系。

让我困惑的是所有的转换，如 glTranslate、glRotate 等是做什么的？他们是在世界坐标中移动物体，还是移动相机？如您所知，相同的运动可以通过移动物体或相机来实现。

我猜glTranslate、glRotate、更改对象和gluLookAt 会更改相机？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T22:01:35.143

> 在opengl中有一个原点（0,0,0）的世界坐标系。

嗯，技术上没有。

> 让我困惑的是所有的转换，如 glTranslate、glRotate 等是做什么的？他们是在世界坐标中移动物体，还是移动相机？

两者都不。OpenGL 不知道对象，OpenGL 不知道相机，OpenGL 不知道世界。OpenGL 关心的只是图元、点、线或三角形、每个顶点属性、标准化设备坐标 (NDC) 和 NDC 映射到的视口。

当您告诉 OpenGL 绘制图元时，每个顶点都会根据其属性进行处理。位置是属性之一，通常是在局部“对象”坐标系中具有 1 到 4 个标量元素的向量。手头的任务是以某种方式将局部顶点位置属性转换为视口上的位置。在现代 OpenGL 中，这发生在一个小程序中，在 GPU 上运行，称为*顶点着色器*。顶点着色器可以以任意方式处理位置。但通常的方法是应用一些非奇异的线性变换。

这种变换可以用同质变换矩阵表示。对于 3 维向量，具有 4 个元素的向量中的同质表示，其中第 4 个元素为 1。

在计算机图形学中，三重转换管道已成为一种标准的做事方式。首先将对象局部坐标转换为相对于虚拟“眼睛”的坐标，从而转换为*眼睛空间*。在 OpenGL 中，这种转换曾经被称为*模型视图*转换。对于眼睛空间中的顶点位置，可以进行多种计算，例如照明可以以广义方式表示，因此这些计算发生在眼睛空间中。接下来，眼睛空间坐标被转换为所谓的*剪辑空间*。这种转换映射*了一些*眼睛空间中的体积到具有特定边界的特定体积，几何图形被剪裁到该体积。由于这种变换有效地应用了投影，因此在 OpenGL 中这曾经被称为*投影*变换。

在剪辑空间之后，位置被它们的同质分量“归一化”，产生归一化的设备坐标，然后简单地映射到视口。

回顾一下：

顶点位置从局部变换到裁剪空间

```
vpos_eye  = MV · vpos_local
eyespace_calculations(vpos_eye);
vpos_clip =  P · vpos_eye

·: inner product column on row vector 
```

然后到达NDC

```
vpos_ndc = vpos_clip / vpos_clip.w 
```

最后到视口（NDC 坐标在 [-1, 1] 范围内

```
vpos_viewport = (vpos_ndc + (1,1,1,1)) * (viewport.width, viewport.height) / 2 + (viewport.x, viewport.y)

*: vector component wise multiplication 
```

* * *

OpenGL 函数 glRotate、glTranslate、glScale、glMatrixMode 仅操作变换矩阵。OpenGL曾经有四个变换矩阵：

*   模型视图
*   投影
*   质地
*   颜色

可以使用 glMatrixMode 设置矩阵操作函数作用于其中的哪一个。每个矩阵操作函数通过乘以它们在选择矩阵顶部描述的变换矩阵来组成一个新矩阵，从而替换它。函数 glLoadIdentity 将当前矩阵替换为单位，glLoadMatrix 将其替换为用户定义的矩阵，glMultMatrix 在其上乘以用户定义的矩阵。

* * *

那么模型视图矩阵如何模拟对象放置和相机。好吧，正如你已经说过的

> 如您所知，相同的运动可以通过移动物体或相机来实现。

你无法真正辨别它们。通常的方法是将对象局部到眼睛的转换分为两个步骤：

*   对象到世界——OpenGL 称之为“模型转换”
*   World to eye – OpenGL 称之为“视图变换”

它们一起形成模型视图，在模型视图矩阵描述的固定函数 OpenGL*中*。现在因为转换的顺序是

1.  局部到世界，模型**矩阵**`vpos_world = M · vpos_local`
2.  世界观，**查看**矩阵`vpos_eye = V · vpos_world`

我们可以用

```
vpos_eye = V · ( M · vpos_local ) = V · M · vpos_local 
```

替换`V · M`为**模型**视图**矩阵**_**`=: MV`**

 **```
vpos_eye = MV · vpos_local 
```

因此，您可以看到复合矩阵 M 的 V 和 M 仅取决于您乘以模型视图矩阵的操作顺序，以及您决定“从这里开始将其称为模型变换”的步骤。

即在一个之后

```
glMatrixMode(GL_MODELVIEW);
glLoadIdentity(); 
```

视图已定义。但在某些时候，您将开始应用模型转换，之后的一切都是模型。

* * *

请注意，在现代 OpenGL 中，所有矩阵操作函数都已被删除。OpenGL 的矩阵堆栈从来都不是完整的功能，也没有真正的应用程序真正使用过它。大多数程序只是`glLoadMatrix`编辑了他们自己计算的矩阵，并没有打扰 OpenGL 内置的矩阵操作例程。

自从引入了着色器之后，整个 OpenGL 矩阵堆栈就很难用了，说得好听点。

结论：如果您打算以现代方式使用 OpenGL，请不要打扰内置函数。但请记住我写的内容，因为您的着色器所做的将与 OpenGL 的固定函数管道所做的非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:58:34.070

OpenGL是一个低级API，在“场景”中没有“物体”和“相机”之类的高级概念，所以只有两种矩阵模式：MODELVIEW（“相机”矩阵乘以“对象”变换）和投影（从世界空间到后透视空间的投影变换）。

“模型”和“视图”（对象和相机）矩阵之间的区别取决于您。glRotate/glTranslate 函数只是将当前选择的矩阵乘以给定的矩阵（甚至不区分 ModelView 和 Projection）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T20:54:35.440

这些函数乘以（转换）当前矩阵集，`glMatrixMode()`因此它取决于您正在处理的矩阵。OpenGL有4种不同类型的矩阵；GL_MODELVIEW、GL_PROJECTION、GL_TEXTURE 和 GL_COLOR，这些函数中的任何一个都可以更改这些矩阵中的任何一个。因此，基本上，您不会转换对象，而只是操纵不同的矩阵来“伪造”该效果。

请注意，这`glulookat()`只是一个方便的功能，相当于平移后跟一些旋转，没有什么特别之处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T20:53:06.587

所有的变换都是对对象的变换。甚至 gluLookAt 也只是一个转换对象的转换，就好像相机在你告诉它的位置一样。从技术上讲，它们是顶点上的转换，但这只是语义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T20:55:39.383

没错，glTranslate、glRotate 在渲染之前改变了对象坐标，而 gluLookAt 改变了相机坐标。**

# php - 数组内爆与'<'，奇怪的行为

> ID：13222757
> 
> 赞同：4
> 
> 时间：2012-11-04T20:49:30.693
> 
> 标签：php, arrays, implode

```
$b = array("one", "two", "three");
$z = implode('<', $b);
var_dump($z); 
```

输出：字符串（13）“一个

谁能解释一下。

PHP 5.4.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:55:49.360

查看 html 源代码结果，真实结果是：

```
string(13) "one<two<three" 
```

正如eis所提到的：

> 这是它应该做的。您正在浏览器中查看它，它不会按原样显示结果，而是尝试将其呈现为 HTML。

因此，如果您想将其视为纯文本，请简单过滤 html 标签：

```
<?php
$b = array("one", "two", "three");
$z = implode('<', $b);
$z = htmlspecialchars($z);
var_dump($z); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T20:52:08.463

```
>php implode.php
string(13) "one<two<three" 
```

这是它应该做的。您正在浏览器中查看它，它不会按原样显示结果，而是尝试将其呈现为 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:16:10.690

如果您想将文本打印为 html，请使用特殊字符集：

```
<?php
$ar = array('one', 'two'/** ... **/);
print implode('&lt;', $ar); 
```

查看所有特殊字符集：http: [//www.degraeve.com/reference/specialcharacters.php](http://www.degraeve.com/reference/specialcharacters.php)

# html - li元素居中困难

> ID：13222759
> 
> 赞同：0
> 
> 时间：2012-11-04T20:50:02.780
> 
> 标签：html, css

我很难`li`在我的文档中居中元素。

我已经`<div align="center">`在元素周围放置了一个包装器（`li`但运气不佳。

它似乎只是使每个`li`元素的标题居中，而不是整个`li`元素块。我想要整个块`Priority, Round 1 and Round 2`居中（即在一个 div 的中间）。

到目前为止，这是我的代码：http: [//jsfiddle.net/nTcBk/](http://jsfiddle.net/nTcBk/)

HTML

```
<div>
<div align="center">
<ul class="round">
        <li class="current-round" style="cursor: default; ">
          <div>Priority</div>
          <span>Ending 01/11/2012</span></li>
        <li style="cursor: default; ">
          <div>Round 1</div>
          <span>Starting 01/12/2012</span></li>
        <li style="cursor: default; ">
          <div>Round 2</div>
          <span>Starting 01/01/2013</span></li>
</ul>
</div>
</div> 
```

​CSS

```
.round {
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
}
.round li {
    color: #DDD;
    cursor: pointer;
    float: left;
    font-size: 18px;
    padding-right: 20px;
}
.round li span {
    font-size: 12px;
    display: block;
}
.round .current-round {
    color: #2a145d;
    cursor: auto;
}
​ 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T20:56:51.860

享受- [http://jsfiddle.net/nTcBk/1/](http://jsfiddle.net/nTcBk/1/) 而不是：

```
.round {
    width:100%;
} 
```

利用：

```
.round {
    display:inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:57:09.050

align 属性适用于**表**（并且已**弃用**）。而不是 align="center" 你可以添加一个 CSS 类到你的 div `<div class="align-center">`

然后在您的 CSS 样式表中执行以下操作：

`.align-center {text-align:center}`

# c# - 如何检索位于每个 Xth 位置的数组元素？

> ID：13222761
> 
> 赞同：0
> 
> 时间：2012-11-04T20:50:07.740
> 
> 标签：c#, arrays

`element + k`在 C# 4.0 中，如果 的位置是 的倍数，是否有办法将 double[] 的每个元素提取到另一个数组中`n`？即如果`k`is`3`和`n`is `4`，我想`a2`从`a1`具有 3rd、7th、11th ... 位置的数组创建一个数组（因此在 C# 中，因为数组从 开始`0`，它将是`a1[2]`、`a1[6]`、`a1[10]`... 等）

我有兴趣在 C# 的性能方面以最快的方式实现这一目标，并且我知道如何使用 for 循环来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:04:08.623

我认为没有比使用 for 循环更快的方法了。无论如何，可以使用[Where](http://msdn.microsoft.com/it-it/library/bb549418.aspx)之类的`Linq`操作：`IEnumerable`

```
double[] doubleArray = {10.0,3.0,5.0,6.0};
IEnumerable<double> = doubleList.Where((number,index) => number + index % n == 0 ); 
```

我不确定我是否理解您想要满足的条件。无论如何，用所需的方法替换匿名方法体。

# facebook - Facebook 无法识别开放图形标签

> ID：13222762
> 
> 赞同：0
> 
> 时间：2012-11-04T20:50:21.567
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

我的对象页面如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US"
  xmlns:fb="https://www.facebook.com/2008/fbml"> 
<head prefix="og: http://ogp.me/ns# cliprin: 
              http://ogp.me/ns/apps/cliprin#">

<meta property="fb:app_id" content="143944345745133" /> 
<meta property="og:type"   content="cliprin:product" /> 
<meta property="og:url"    content="https://itsourstudio.com/" /> 
<meta property="og:title"  content="LED Ice Cubes (Set Of 4)" /> 
<meta property="og:sitename"  content="Its Our Studio" /> 
<meta property="og:image"  
  content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
<meta property="og:description"  content="Blah Blah Blah" /> 

</head>
</html> 
```

[链接](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fclipr.in%2Foutput%2Ffbproduct.php)所示页面的 JSLink Debugger表明

```
of:type is website 
```

并给出以下警告：

```
Open Graph Warnings That Should Be Fixed
 Inferred Property: The 'og:url' property should be explicitly provided, even if a value can be inferred from other tags.
 Inferred Property: The 'og:title' property should be explicitly provided, even if a value can be inferred from other tags.
 Inferred Property: The 'og:description' property should be explicitly provided, even if a value can be inferred from other tags.
 Inferred Property: The 'og:image' property should be explicitly provided, even if a value can be inferred from other tags.
 Tiny og:image: All the images referenced by og:image must be at least 200px in both dimensions. Please check all the images with tag og:image in the given url and ensure that it meets the minimum specification. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:58:48.227

Facebook 将跟随`og:url`标签中的链接（*规范 URL*），而您那里没有正确的 OG 元标签。如果您`https://itsourstudio.com/`直接调试，则类似，请参见[此处](https://developers.facebook.com/tools/debug/og/object?q=https://itsourstudio.com)。

**重定向路径**部分明确指出 ：

> 最终 URL 以**粗体显示**（这是我们尝试从中提取元数据的 URL）。

# signal-processing - FMOD FMOD_DSP_READCALLBACK - 指定通道

> ID：13222763
> 
> 赞同：0
> 
> 时间：2012-11-04T20:50:25.070
> 
> 标签：signal-processing, fmod

我想创建一个 DSP 插件，它接受 8 个通道的输入（7.1 扬声器模式），进行一些处理然后将数据返回到 2 个输出通道。我的计划是使用 setspeakermode 到 FMOD_SPEAKERMODE_7POINT1 和 FMOD_DSP_DESCRIPTION.channels 到 2 但这不起作用，在我的 FMOD_DSP_READCALLBACK 函数中，输入和输出通道都显示为 2。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T11:26:27.773

您无法使用 DSP 插件接口在 FMODEx 中执行真正的缩混。您可以做的最好的事情是处理传入的 8 通道数据，然后只填充输出缓冲区的左前和右前部分，让其余部分保持沉默。

将通道数设置为 2 告诉 FMOD 您的 DSP 只能处理立体声信号，将计数设置为 0 表示任何通道数。

# mysql - mysql 与 iOS 的安全性

> ID：13222767
> 
> 赞同：3
> 
> 时间：2012-11-04T20:50:45.167
> 
> 标签：mysql, ios, encryption

我有一个从我的 ios 应用程序到我的 mysql 数据库的加密连接。我的问题是他们是否能够拦截来自 ios 应用程序的连接并找到加密或不加密的域

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T21:08:15.963

> 他们是否能够拦截来自 ios 应用程序的连接

是的，他们可以这样做。至少可以肯定使用越狱设备 - 对于越狱设备，有几个因素使黑客更容易。

一方面，在越狱系统上，可以防止 Apple 加密应用程序可执行文件（通过将未加密的程序代码从内存转储到磁盘）并运行一个名为“class-dump”的实用程序来获取 Objective-C类信息（也可以在设备或 IDA Pro 上使用 GDB 调试器来对应用程序逻辑进行逆向工程）。

另一方面，用于进行 iOS 调整的同一 MobileSubstrate 库可用于更改任何给定应用程序的行为（我已成功使用此技术在运行时规避某些代码混淆），因此理论上攻击者会更改您的应用程序的通信逻辑并转储您和您的用户的未加密数据。

[令人抓狂的是](http://catb.org/jargon/html/O/on-the-gripping-hand.html)，大多数可用于此类黑客攻击的标准和较少使用的 Unix 实用程序都为越狱的 iOS 移植/编译 - 包括流行的网络嗅探工具`nmap`、“开膛手约翰”密码破解程序、臭名昭著的`aircrack-ng`WEP/WPA 密钥破解程序、GNU 调试器 (GDB) 等。这些对于执行您描述的攻击也很有用。

如果连接本身是加密的，那么理论上，您的数据在网络中应该是安全*的。*这仍然不能阻止基于 MobileSubstrate 的利用方法。确实可以相对容易地找到您要连接的服务器的 IP 地址（即使是匹配的域也可以结束，因为也有使用已知 IP 地址获取反向 DNS 信息的已知技术）。

我不确定在没有越狱的情况下这是否可能，但俄罗斯黑客对苹果的应用内购买进行了类似的中间人攻击（有效地使底层支付系统失效并允许购买自由下载），仅要求用户安装 SSL 证书、配置文件并使用黑客自己的代理服务器，所以我怀疑即使没有越狱也是可能的。请注意，在这种情况下，连接也是加密的，重要的不是加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T20:56:19.460

您不应该创建与 mysql-database 的直接连接，而是寻求与服务器程序/api 的连接以及与相关数据库的连接。为了更直接地回答这个问题，如果正确加密，用户不应该能够拦截来自 ios-app 的连接，但仍然值得冒这个风险吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T20:53:18.487

如果连接是加密的，则数据是安全的。但不是域。iPhone 正在连接到一个 IP 地址，而该 IP 地址显然没有加密。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-04T21:14:08.620

在您的应用程序和 Mysql 之间创建一个 PHP 接口。这样做他们将只能破解应用程序帐户而不是整个数据库！您的 Mysql 凭证将存储在 PHP 代码运行的远程域中。

# ruby-on-rails - 将不显眼的 javascript 从 html.erb 文件中移出

> ID：13222768
> 
> 赞同：1
> 
> 时间：2012-11-04T20:50:48.750
> 
> 标签：ruby-on-rails, unobtrusive-javascript

我的一个视图中有一个 html.erb 文件。该文件非常大，大约有 2/3 的 javascript 代码和 1/3 的 html。我不喜欢这个文件太杂乱。javascript 部分主要是事件处理程序和 jquery UI 组件的使用，例如日期选择器、对话框等，用于页面中的相应 html 元素。我想将 javascript 部分与 html 部分分开。

1.  我可以将 javascript 移动到一个单独的 js.erb 文件并像部分一样使用它吗？这样做有什么好处？

2.  当我使用 I18n.() 和 <%= form_authenticity_token %> 之类的 Rails API 时，如何将 javascript 移动到静态 .js 文件。我应该每次都将它们传递给包装 javascript 函数吗？有一个更好的方法吗？

3.  如果我将 javascript 从 html.erb 文件中移出，它将有助于缓存/呈现 html.erb 页面吗？

有兴趣了解是否有任何可重复使用的模式

html.erb 文件上的示例代码：

```
 <% content_for :javascript do %>
 <script type="text/javascript">

 $(document).ready(function() 
 {
     $('#create_segment_dialog').dialog({
            title: "<%= I18n.t("segment.create_segment_title") %>",

     // lots of javascript

 }

 </script>
 <%end %>

 //HTML starts here

 <div id="right-column"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:49:29.137

我的 2c，但我知道对此有不同的看法：

尝试将尽可能多的 JS 代码分离成一个或多个函数，然后将它们放入资产管道中的 JS 文件中。利用这一举措将您的 JS 分解为可被其他方法/控制器使用的可重用组件。

这意味着您可以为移到那里的 JS 获得资产管道的所有好处：

*   缓存和指纹识别您的 JS 资产
*   缩小和压缩支持以节省带宽
*   如果这是您想要的，则缩小以混淆您的代码
*   连接 JS 文件以减少浏览器必须发出的请求数
*   可以从其他位置（CDN、Web 层与应用层）提供资产
*   如果该 JavaScript 被其他方法/控制器使用，则改进 DRYness

缺点？正如您所指出的，任何 Rails 变量都必须作为参数传递给函数。

将您的 JavaScript 移动到 .js.erb 部分是一种选择，但如果此代码非常特定于特定方法或控制器，那么它不一定会提高 DRYness - 通过分离 HTML 和 JS，它可能会使您的代码更具可读性.

# ruby-on-rails - 无法删除附件

> ID：13222769
> 
> 赞同：0
> 
> 时间：2012-11-04T20:50:56.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

看起来这是一个已知问题，但我无法找到任何解决方案或任何肮脏的修复来使其正常工作。问题是我无法删除使用 Carrierwave 插件上传的附件。

我正在使用一个名为的特殊表单字段`:remove_avatar`，它应该删除头像文件并清除头像列，但它唯一要做的就是删除文件，头像列中的文件引用仍然存在。

我试图以任何可能的方式将其删除，但没有运气。

### 更新属性

using`u.update_attributes( :avatar => "" )`不会删除引用

### 节省（）

```
u = User.find(int)
u.avatar = ""
u.save 
```

也没有删除参考

### remove_avatar = true

```
u.remove_avatar = true
u.save 
```

不工作

### 删除头像！

```
u.remove_avatar!
u.save 
```

不工作

### f.check_box :remove_avatar

不工作

“不工作”是指文件已从文件系统中删除，但引用仍然存在。

你能不能给我任何提示，我可以用它来让它再次工作？它可能很脏，这个错误在我的截止日期前一天出现，我感到非常绝望。提前致谢。

Ruby：1.8.7
Rails：3.2.6
Carrierwave：来自 git repo 的 master 分支

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T22:18:17.377

根据[这个线程](https://stackoverflow.com/questions/7243729/how-to-update-attributes-without-executing-before-save)，您可能可以通过使用`update_column`而不是来管理它`update_attribute`，然后（由于我目前不清楚的原因），真正强制重新加载内存中的对象（而不是仅仅调用`reload`它）：

```
u = User.where('avatar is not null').last # Get a user with an avatar
u.update_column(:avatar, nil) # Use update_column to avoid callbacks
u = User.where(:id => u).first # Force a reload of the object. No, u.reload doesn't work. No, I don't know why. 
```

当我在控制台中执行此操作时，`u.avatar`最终是空白的。我的版本信息，以防这对您不起作用：Ruby 1.9.3、Rails 3.2.2、PostgreSQL 9.2、CarrierWave 0.5.7

# jquery - slickgrid：根据数据的颜色行

> ID：13222774
> 
> 赞同：0
> 
> 时间：2012-11-04T20:51:08.860
> 
> 标签：jquery, slickgrid

我将 slickGrid 与 dataview 一起使用，并且需要根据一列中的数据对行（背景）进行着色。

```
What function would I use? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:02:55.250

您可以使用`grid.setCellCssStyles()`为任何单元格设置 css 样式。您可以利用它为整行着色。

# database - Chrome 扩展程序数据连接到服务器

> ID：13222778
> 
> 赞同：5
> 
> 时间：2012-11-04T20:51:18.517
> 
> 标签：database, google-chrome, google-chrome-extension

我想将我的 Chrome 扩展程序连接到我的服务器，并来回发送数据。特别是，当用户在浏览某个 URL 时单击扩展程序上的按钮时，服务器会检查其数据库以查看该 URL 已被单击的次数，增加计数并将新计数发送回用户。

我知道通过 AJAX 请求可以将数据发送到服务器，但是从服务器取回数据呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T22:51:22.023

我认为，您可以使用 AJAX 以直接的方式获取更新的计数。例如（使用 jQuery）：

```
$.ajax({
  url: 'ajax/count.php?url=' + encodeURIComponent(newURL),
  // dataType: 'json',
  success: function(data) {
    // parse you data received from server here
    // data.count
  }
}); 
```

因此，您可以“发送”新信息作为 GET 请求的参数，并从服务器获取所需信息作为 http-response。用于传输计数的数据类型取决于您。例如，这可以是`json`（jQuery 提供了一个速记方法`getJSON`，它执行相同的自定义`ajax`调用）。

如果您不想要 GET，您可以使用 POST 并指定数据，如下所示：

```
$.ajax({
  type: "POST",
  url: "ajax/count.php",
  data: { url: newURL },
  success: function(data){
    // ...
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-30T07:52:19.410

您显然需要使用**xhr** / **ajax**

但是使用当前的 chrome-extension API，您可能会收到这样的错误

> 请求的资源上不存在“Access-Control-Allow-Origin”标头。

为了解决这个问题，可以简单地将指向服务器的链接放在 manifest.json 中的权限数组中

```
"permissions": [
    "tabs",
    "http://www.myserver.dom"
], 
```

有关更详细的说明，请参阅[Google 的此文档](https://developer.chrome.com/extensions/xhr)

# symfony - 如何在 symfony 2.1 中向树枝添加一些事件

> ID：13222786
> 
> 赞同：0
> 
> 时间：2012-11-04T20:51:47.833
> 
> 标签：symfony, twig, symfony-2.1

我想在渲染模板之前添加我的控制代码。

示例：有模板：user.html.twig

控制器：

```
return $this->render('....:user.html.twig', array(/* variables */)) 
```

我想在渲染模板之前添加其他变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:01:01.467

您可以覆盖`Symfony\Bundle\FrameworkBundle\Controller\Controller::render`控制器中的方法并传递其他变量或在那里或 Twig 中安排一些事件挂钩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T13:23:32.547

解决这个问题：

创建一个新的 Twig 扩展并注册这个扩展。

例子：

树枝扩展：

```
class UserExtension extends \Twig_Extension
{
  /**
   * Get globals variables
   *
   * @return array
   */
  public function getGlobals()
  {
    return array(
      // Other variables
    );
  }
} 
```

将扩展注册为服务。

```
<service id="sps.twig.user_extension" class="SPS\Bundles\HomeBundle\Twig\Extensions\UserExtension">
  <tag name="twig.extension" />
</service> 
```

# facebook-php-sdk - 除了我的笔记本电脑和应用程序开发人员之外，Facebook php SDK getUser 返回 0

> ID：13222795
> 
> 赞同：2
> 
> 时间：2012-11-04T20:52:59.390
> 
> 标签：facebook-php-sdk

我已经查看了数百个与此类似的问题的答案，但找不到任何似乎有帮助的东西。

我正在运行最新版本的 PHP SDK 和登录 facebook 按钮，该按钮具有从 getLoginUrl() 生成的链接。

在我的开发笔记本电脑上运行并以应用程序开发人员身份登录，它会将我传回重定向 url（调用 getLoginUrl() 时的回调 url 和我的应用程序设置中设置的 URL 完全相同）然后我执行 getUser 调用将在这些情况下发挥作用。

如果我在同一网络上使用我的 Iphone 尝试相同的过程，则以同一用户身份登录 facebook getUser() 返回 0。对于尝试使用 facebook 登录的任何其他用户，它也会执行相同的操作。

沙盒模式被禁用。我的应用程序域似乎设置正确。

我真的不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:38:31.717

非常感谢你们的回复 - 原来问题是我从一个页面发送请求并重定向回另一个页面。这似乎让 facebook 感到不安（我猜它只会重新指向它被调用的页面）。无论如何，这解决了问题 - 但非常感谢您的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T17:52:22.317

首先确保您在脚本中维护会话：

```
session_start(); 
```

在您的 php 文件的顶部。

接下来使用类似这样的东西来测试你是否有一个 fb 用户，如果没有，将他们重定向到 oauth，如果他们已经授权过期，它只会更新他们的令牌。

```
require_once('facebook/fb.inc'); 
```

session_start();

```
if (!$fbUser) {
    $loginUrl = $facebook->getLoginUrl(
        array(
            'scope' => 'email,publish_stream,user_location',
            'redirect_uri' => 'http://scubadivinglog.org/php/fblink.php'
        )
    );
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    exit;
} 
```

希望这可以帮助。让我们知道，如果没有发布您正在使用的代码。

# c# - 先使用 Try Catch 或检查值

> ID：13222796
> 
> 赞同：2
> 
> 时间：2012-11-04T20:53:02.810
> 
> 标签：c#, .net, vb.net, frameworks

我需要知道什么更好（对于性能和其他方面），在预期错误时使用 Try Catch 并且在错误发生时没有替代方案或首先检查值？

例如（VB.net）：如果我需要从数据库（例如来自数据阅读器）中按值填充文本框，并且我期望一些空值，如果值为空，我会将文本框留空。

现在我必须有办法做到这一点：

```
try
  textbox1.text = DR("Name")
catch
end try 
```

现在，如果列名称包含空值，则会引发错误并且 textbox1 仍然为空。

```
If Not IsDBNull(DR("Name")) Then textbox1.Text = DR("Name") 
```

什么是更好的 ？

太感谢了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T20:55:04.910

不要**将**异常处理用作流控制。曾经。

所以 - 检查值而不是`Try/Catch`.

当抛出异常时，运行时有很多工作要做 - 如果您期望值`null`- 总是检查它们而不是依赖异常。

# jquery - 将点击事件函数分配给jQuery中的多个元素？

> ID：13222800
> 
> 赞同：0
> 
> 时间：2012-11-04T20:53:07.583
> 
> 标签：jquery

我在 id 以 . 开头的页面上有多个复选框`checkrow`。
行 ID 可以是*checkrow1*或*checkrow2*或*checkrow21*等。
我想将点击事件函数分配给这些复选框中的每一个。
我尝试了以下方法，但似乎不起作用。执行此操作的 jQuery 代码是什么？

```
$('input[id^="checkrow"]').click(function () {
    alert('1')
}); 
```

**更新：** 上面的代码有效。我没有将处理程序附加到单击事件的原因是因为执行上述代码时复选框不存在。我使用的是虚拟化 HTML5 网格，其中复选框仅在我使用的第三方控件的“数据绑定”事件中创建。一旦我将上面的代码放在“Databound”事件中，它就可以正常工作了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T20:55:33.843

让我猜猜，这些元素是在 DOM 准备好之后动态创建的。

使用`on`- 委托事件。

```
$('parentSelector').on('click', 'input[id^="checkrow"]', func); 
```

当然，请确保您的代码位于 DOM 就绪回调中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T20:55:08.130

为复选框使用一个类，然后用一个点定位类名。每个复选框都有一个属性“class='checkbox'”。

```
$('.checkbox').click(function(){
    alert('Check clicked.');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T21:34:50.723

另一种解决方案：在select id=checkrow*之后找到复选框，然后添加一个点击事件：

```
$('input[type=checkbox]').each(function() {
    if ( this.id.match(/^checkrow\d+/) ) {
        $(this).click(function() {
            // do what you want 
        });
    }
}); 
```

# magento - 从 Magento 的主页单击产品时，产品会加载错误的模板（和 url）

> ID：13222803
> 
> 赞同：1
> 
> 时间：2012-11-04T20:53:20.527
> 
> 标签：magento, magento-1.6

我的商店中有 2 个模板。根据类别，它会加载不同的模板。问题是在主页上，加载的最新产品指向 www.site.com/some-product.html*总是*在第一次访问时加载默认模板。

如果用户访问该类别（some-categ/same-product.html）上的产品，它会正确加载，如果他回到家，再次点击同一产品，它仍然会正确加载。

在这种情况下，我该怎么做才能确保产品始终加载正确的模板？我使用的是magento 1.6.1，模板被分配给类别，产品只有一个类别。

# javascript - 无法在使用 .append() 添加的图像上调用 jQuery .error()

> ID：13222807
> 
> 赞同：0
> 
> 时间：2012-11-04T20:53:46.340
> 
> 标签：javascript, jquery, error-handling, while-loop

应该是一个简单的 while 循环，附加图像并增加计数，直到 .error() 因为图像不存在而被触发。

问题是错误事件永远不会触发。目录中有三个图像，但页面只是无限加载，直到选项卡崩溃。在 html 中的图像上调用 .error() 有效，只有当我附加图像时才会调用错误。

下面的代码：

```
jQuery(document).ready(function($) {
    var images = 'load';
    var i = 1;

    while(images == 'load') {
        $('.images').append('<img src="window_0' + i + '.jpg" />')
            .error(function() {
                images = 'finished';
            });
        i++;
    }

}); 
```

如果我使用 while(i<4) 它可以完美运行，因为 .error() 的结果并不重要。问题是我需要它是可变的，以便可以通过将文件添加到目录而不编辑代码来增加加载的图像数量。

这曾经可以通过 ajax 调用实现，但在我的 jQuery 版本（1.7.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:39:56.760

您在这里有两个主要问题：首先，您没有将错误事件绑定到 img，而是将其绑定到 $('.images')。

其次，javascript（大部分）是单线程的。即使图像加载可能在后台发生，在您的循环退出之前不会发生javascript事件处理，除非发生事件，否则它不会这样做，因此您有一个catch-22。

这通过链接加载事件而不是等待错误事件来做类似的事情：

```
 var i = 1;
    var img;
    function next() {
        if (img) $('.images').append(img);
        img = document.createElement('img');
        $(img).load(next);
        img.src='window_0' + (i++) + '.jpg';
    }
    next(); 
```

# python - 如何使用 Python 运行外部可执行文件？

> ID：13222808
> 
> 赞同：23
> 
> 时间：2012-11-01T12:33:57.773
> 
> 标签：python, subprocess, executable

我有一个外部可执行文件，我试图从 Python 脚本运行。CMD 可执行文件运行但不生成输出。可能它在生成输出之前退出。关于如何延迟退出直到生成输出的任何建议？

```
import subprocess, sys
from subprocess import Popen, PIPE
exe_str = r"C:/Windows/System32/cmd C:/temp/calc.exe"

parent = subprocess.Popen(exe_str, stderr=subprocess.PIPE) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-01T12:40:33.557

使用`subprocess.call`，更多信息[在这里](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)：

```
import subprocess
subprocess.call(["C:\\temp\\calc.exe"]) 
```

或者

```
import os
os.system('"C:/Windows/System32/notepad.exe"') 
```

我希望它可以帮助你...

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-01T13:47:48.890

该`os.system`方法已折旧，不应在新应用程序中使用。subprocess 模块是执行所需操作的 Pythonic 方式。

这是我几周前编写的`subprocess`用于加载文件的一些代码的示例，您需要用来延迟退出直到收到数据并且启动的程序完成的命令是`wait()`：

```
import subprocess

cmd = "c:\\file.exe"
process = subprocess.Popen(cmd, stdout=subprocess.PIPE, creationflags=0x08000000)
process.wait() 
```

`creationflags=0x08000000`是一个可选参数，它抑制窗口的启动，如果您正在调用的程序不需要直接看到，它会很有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-06-14T12:38:33.360

**选项1**

```
import subprocess

subprocess.call('C:\Windows\System32\calc.exe') 
```

**选项 2**

```
subprocess.Popen(['C:\Windows\System32\calc.exe'],stdout=subprocess.PIPE,stderr=subprocess.PIPE,shell=True).communicate() 
```

**选项 3**

```
import os
os.system('C:\Windows\System32\calc.exe') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-22T16:15:21.763

在尝试了其他所有方法后，这对我有用：将你的 python 程序的位置更改为与它所在的位置相同`.exe`。然后很简单：

```
subprocess.call("calc.exe") 
```

会工作。

# ubuntu - 构建 gpgme 后进行检查失败

> ID：13222810
> 
> 赞同：0
> 
> 时间：2012-11-04T20:53:56.697
> 
> 标签：ubuntu, makefile, configure, gnupg, gpgme

我正在尝试在 Ubuntu 12.04 上构建 gpgme-1.3.2。我已经构建了 libgpg-error-1.10 和 libassuan-2.0.3。命令很简单：

```
./configure && make && make check && sudo make install 
```

两个库都构建成功并且`make check`没有给我失败。

然而`make check`，在我的 gpgme 上，构建了 22 次失败的检查中的 22 次，尽管没有构建错误。我使用了与构建其他两个库相同的命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T20:53:56.697

我想出的一种解决方案是将配置的`prefix`和设置`libexecdir`如下：

```
./configure --prefix=/usr --libexecdir=/usr/lib 
```

根据[gnu make 文档](http://www.gnu.org/prep/standards/html_node/Directory-Variables.html)前缀告诉`make`文件夹在哪个文件夹中应该放置生成的二进制文件。libexecdir 选项告诉它把可执行文件放在哪里，而不是由用户运行，而是由程序（换句话说：库）运行。

错误的原因是 libgpg-error 不在 libassuan 和 libgpg 预期的位置。这篇[文章](http://old.nabble.com/Re%3a-gpgme-android-build-fails-looking-for--usr-local-lib-libgpg-error.la-p33473702.html)声称设置前缀，在 gpg-error-config 中设置正确的路径。通过使用此路径，gpgme 能够找到 libgpg-error 并且检查有效。

# xml - XML 外部实体：续集

> ID：13222813
> 
> 赞同：1
> 
> 时间：2012-11-04T20:53:59.887
> 
> 标签：xml

有两个线程处理我的问题：

*   [具有外部引用的 xml 文档](https://stackoverflow.com/questions/10780482/xml-document-having-external-references)
*   [如何在 XML 中使用外部实体？](https://stackoverflow.com/questions/7783578/how-to-use-external-entities-in-xml)

简而言之，我是第一次与外部实体合作并遇到问题。我很高兴在上面的帖子中找到答案，但我发现这些答案对我不起作用。

在每个线程的情况下，我在本地计算机上创建了涉及的 XML 文件。我确保它们在同一个目录中，并在 IE（确切地说是 IE 9）中预览了文件。在每种情况下，我都遇到了第二个线程中的用户报告的有关 Chrome 和 FF 的相同问题，但现在，对我来说，IE 没有显示外部文件的内容；它只显示原始文件的标记。例如，下面是 IE 显示的线程 2 的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root>
-<root> <tmp id="1"/> <tmp id="2">This is a test</tmp> </root> 
```

任何想法为什么会这样？IE 9 的 XML 解析是否发生了变化？

在此先感谢，凯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:32:47.400

[该文档](http://msdn.microsoft.com/en-us/library/ff955357%28v=vs.85%29.aspx)和[该线程](http://social.msdn.microsoft.com/Forums/en/iewebdevelopment/thread/845090c6-9d91-410d-99c2-94b201ff893c)似乎表明 IE9 默认情况下不加载外部实体。

我自己无法使用 IE9 进行验证。不过，IE8 确实会加载外部实体。

# mysql - MySQL：从多个表加入

> ID：13222815
> 
> 赞同：0
> 
> 时间：2012-11-04T20:54:14.103
> 
> 标签：mysql

我很难代表一个查询。我要转换为 SQL 语句的语句是：

```
select count(*)
from assigned, tasks
where 
assigned.id_task = 1
or 
(assigned.id_project=tasks.id_project and tasks.id=1) 
```

到目前为止，我成功提出的是：

```
select count(*) 
from assigned a 
left join projects p
  on p.id=a.id_project
left join tasks t
  on t.id_project=p.id
where (a.id_task=1 or t.id=1) 
```

但是，第二个没有返回正确的结果。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:13:25.687

我弄清楚问题出在哪里。正确的`join`查询是：

```
select count(*) 
from assigned a 
left join tasks t
  on t.id_project=a.id_project
where (a.id_task=1 or t.id=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:09:03.317

我对第二个查询返回不同的结果并不感到惊讶，因为它使用了一个附加表和不同的连接条件。尽管第二个选择应该至少提供与第一个一样多的行，因为第一个使用内连接，第二个使用左连接。

第一个查询也使用连接。它只是隐含地表达出来。

# javascript - 如何在默认情况下隐藏 jQmobile 页面

> ID：13222816
> 
> 赞同：0
> 
> 时间：2012-11-04T20:54:16.060
> 
> 标签：javascript, jquery, html, jquery-mobile

如何隐藏 jquery mobile 包含的页面。我想要网站的移动版本和桌面版本，但移动版本会自动加载。我该如何改变？

代码在这里：

```
<!DOCTYPE html>
<html>
    <head>
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css">
        <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>

        <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" />
        <link href="../global/global.css" rel="stylesheet" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script language="javascript" type="text/javascript" src="../bootstrap/js/bootstrap.min.js"></script>
    </head>
    <body>
        <div >
        <!-- The View Page (Summary) -->
        <div data-role="page" id="summary">
            <div data-role="header">
            </div>
            <div data-role="main" class="ui-content">
                <div class="jumbotron container">
                    <center>
                        <img src="removeLogo.jpg" />
                    </center>
                    <h2 class="txt-center"><u>Controls</u></h2>
                    <a class="btn btn-default">View</a>
                </div>
            </div>
            <div data-role="footer">
            </div>
        </div>

        <div data-role="page" id="summary">
            <div data-role="header">
            </div>
            <div data-role="main" class="ui-content">
                <div class="jumbotron container">
                    <center>
                        <img src="removeLogo.jpg" />
                    </center>
                    <h2 class="txt-center"><u>Controls</u></h2>
                    <a class="btn btn-default">View</a>
                </div>
            </div>
            <div data-role="footer">
            </div>
        </div>
    </bod 
```

是>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T20:56:28.227

在您的脚本运行时，DOM 尚未准备好。将其放入 DOM[就绪事件处理程序](http://api.jquery.com/ready/)中：

```
$(function () {
    // Interact with the DOM in here
});

// Or, the slightly longer version
$(document).ready(function () {
    // Interact with the DOM in here
}); 
```

或者，将您的 JavaScript 移动到正文的末尾（`</body>`通常在结束标记之前，但在您需要引用的元素之后的任何地方都可以使用）。通过这样做，当你的脚本被解析时，浏览器已经解析了前面的标记，并且有一个几乎完整的 DOM 树可供你访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:00:47.137

行 。我认为原因是，您正在尝试访问 #left-placeholder 但尚未加载。

```
 <!DOCTYPE html>
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
        <LINK href="../styles.css" rel="stylesheet" type="text/css">
    </head>
    <body>
            <div id="leftcol">
                <a href="practice.html"><div class ="left-column-item">Practice!</div></a>
                <a href="aboutUs.html"><div class ="left-column-item">About Us!</div></a>
                <a href="contactUs.html"><div class ="left-column-item">Contact Us!</div></a>
            </div>
        <div id="left-placeholder">abc</div>
        <div id ="left-pusher"></div>
        <div id ="content">Math Practice Site <br> hello</div>
    </body>
    <script type ="text/javascript">
        alert($('#left-placeholder').html());
    </script>
</html> 
```

把你的脚本放在它下面，它应该没问题。或者在页面加载后启动脚本，如下所示：

```
$(document).ready(function(){
     alert($('#left-placeholder').html());
}); 
```

资料来源： [http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

# xml - 对于通过 XSD 验证的 XML，是否需要/应该明确定义所有元素类型？

> ID：13222821
> 
> 赞同：1
> 
> 时间：2012-11-04T20:54:36.193
> 
> 标签：xml, xsd

对于通过 XSD 验证的 XML 文档，是否需要显式定义所有 XML 元素类型？

下面的 XSD 没有 a`BookType`和 a`AuthorType`但没有`BookstoreType`，但仍然可以很好地验证 XML。改为定义 a 通常会是一种改进`BookstoreType`吗？

```
<?xml version="1.0" ?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <xsd:element name="Bookstore">
      <xsd:complexType>
         <xsd:sequence>
            <xsd:element name="Book" type="BookType"
                         minOccurs="0" maxOccurs="unbounded" />
            <xsd:element name="Author" type="AuthorType"
                         minOccurs="0" maxOccurs="unbounded" />
         </xsd:sequence>
      </xsd:complexType>
      <xsd:key name="BookKey">
         <xsd:selector xpath="Book" />
         <xsd:field xpath="@ISBN" />
      </xsd:key>
      <xsd:key name="AuthorKey">
         <xsd:selector xpath="Author" />
         <xsd:field xpath="@Ident" />
      </xsd:key>
      <xsd:keyref name="AuthorKeyRef" refer="AuthorKey">
         <xsd:selector xpath="Book/Authors/Auth" />
         <xsd:field xpath="@authIdent" />
      </xsd:keyref>
      <xsd:keyref name="BookKeyRef" refer="BookKey">
         <xsd:selector xpath="Book/Remark/BookRef" />
         <xsd:field xpath="@book" />
      </xsd:keyref>
   </xsd:element>
   <xsd:complexType name="BookType">
      <xsd:sequence>
         <xsd:element name="Title" type="xsd:string" />
         <xsd:element name="Authors">
            <xsd:complexType>
               <xsd:sequence>
                  <xsd:element name="Auth" maxOccurs="unbounded">
                     <xsd:complexType>
                        <xsd:attribute name="authIdent" type="xsd:string"
                                       use="required" />
                     </xsd:complexType>
                  </xsd:element>
               </xsd:sequence>
            </xsd:complexType>
         </xsd:element>
         <xsd:element name="Remark" minOccurs="0">
            <xsd:complexType mixed="true">
               <xsd:sequence>
                  <xsd:element name="BookRef" minOccurs="0"
                               maxOccurs="unbounded">
                     <xsd:complexType>
                        <xsd:attribute name="book" type="xsd:string"
                                       use="required" />
                     </xsd:complexType>
                  </xsd:element>
               </xsd:sequence>
            </xsd:complexType>
         </xsd:element>
      </xsd:sequence>
      <xsd:attribute name="ISBN" type="xsd:string" use="required" />
      <xsd:attribute name="Price" type="xsd:integer" use="required" />
   </xsd:complexType>
   <xsd:complexType name="AuthorType">
      <xsd:sequence>
         <xsd:element name="First_Name" type="xsd:string" />
         <xsd:element name="Last_Name" type="xsd:string" />
      </xsd:sequence>
      <xsd:attribute name="Ident" type="xsd:string" use="required" />
   </xsd:complexType>
</xsd:schema> 
```

验证 XML 文档

```
<?xml version="1.0" ?>
<Bookstore>
   <Book ISBN="ISBN-0-13-713526-2" Price="100">
      <Title>A First Course in Database Systems</Title>
      <Authors>
         <Auth authIdent="JU" />
         <Auth authIdent="JW" />
      </Authors>
   </Book>
   <Book ISBN="ISBN-0-13-815504-6" Price="85">
      <Title>Database Systems: The Complete Book</Title>
      <Authors>
         <Auth authIdent="HG" />
         <Auth authIdent="JU" />
         <Auth authIdent="JW" />
      </Authors>
      <Remark>
        Amazon.com says: Buy this book bundled with
        <BookRef book="ISBN-0-13-713526-2" /> - a great deal!
      </Remark>
   </Book>
   <Author Ident="HG">
      <First_Name>Hector</First_Name>
      <Last_Name>Garcia-Molina</Last_Name>
   </Author>
   <Author Ident="JU">
      <First_Name>Jeffrey</First_Name>
      <Last_Name>Ullman</Last_Name>
   </Author>
   <Author Ident="JW">
      <First_Name>Jennifer</First_Name>
      <Last_Name>Widom</Last_Name>
   </Author>
</Bookstore> 
```

如果也定义了 a，XSD 会是什么样子`BookstoreType`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:30:16.800

您已将 Bookstore 的类型定义为匿名类型（嵌套在 Bookstore 元素声明中的 ComplexType 元素）。这与使用命名类型完全相同（就像您对其他元素所做的那样） - 唯一实际的区别是匿名类型不可重用或可细化。

# c# - 尝试将数据插入 SQLite 时出错

> ID：13222824
> 
> 赞同：2
> 
> 时间：2012-11-04T20:54:57.520
> 
> 标签：c#, sqlite, system.data.sqlite

我正在使用以下代码更新我的 SQLite 数据库中的“图片”字段：

```
 public void SetImage(byte[] image)
    {
        var sql = "UPDATE Part SET Picture=@0 WHERE PartId=" + PartId.ToString(CultureInfo.InvariantCulture);
        var con = new SQLiteConnection(GetConnectionString());

        var command = new SQLiteCommand(con)
        {
            CommandText = sql
        };

        command.Parameters.AddWithValue("@0", image);
        con.Open();
        command.ExecuteNonQuery();
        con.Close();
        command.Dispose();
        con.Dispose();
    } 
```

对我的 SQLite 数据库的所有其他数据访问都可以正常工作。似乎当我尝试将数据插入这一字段时，它给了我一个错误“数据库已锁定”。我的应用程序是单线程的，并且我的所有其他数据访问功能都正确关闭并处理了正确的对象。有人知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:10:05.673

错误“数据库已锁定”可能表明其他一些连接仍有打开的事务。

确保*所有*命令和连接都正确关闭和处置。即使在异常情况下也要这样做，请使用`using`.

# css - 在视图中渲染实例变量 -rails 3

> ID：13222828
> 
> 赞同：0
> 
> 时间：2012-11-04T20:55:13.813
> 
> 标签：css, ruby-on-rails-3

我试图弄清楚在输出到视图时如何为我的类的每个实例呈现相同的视图

这是我的例子

我有一个应用程序，您可以在其中记录自己的食谱，并在名为“我的食谱”的区域查看输入的所有食谱。到目前为止，我可以以我希望呈现的样式呈现一个实例的视图

```
 <div class="container">
  <div class="row">
   <ul class="thumbnails">
    <li class="span4">
     <div class="thumbnail">
     <% @recipes.each do |r| %>
      <%= image_tag r.avatar.url(:medium)%>
      <h3 class="center"><a href="#"><%= r.dish_name %></a></h3>
      <p>Description of dish</p>
   </div>
  </li>
  <% end %>
  </ul>    
 </div>
</div> 
```

在我的控制器中，我有这个

```
 def my_recipes

 @recipes = current_user.recipes if current_user.recipes #show recipes if the user has  any recipes

 end 
```

我如何让每个实例在同一个视图中呈现，即如我在上面指定的/当然这很简单，但今晚无法解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:27:31.293

听起来你在谈论部分。请参阅视图渲染指南的[这一部分](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)。具体来说，第 3.4.5 节，“渲染集合”。如果您按照 Rails 期望的方式命名文件，这可能就像`<%= render @recipes %>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T08:31:43.370

这是否更像是首先在视图中获取正确格式的情况？

例如，如果您想要集合中每个项目的缩略图。

```
<li class="span4">
 <div class="thumbnail">
 <% @recipes.each do |r| %>
  <%= image_tag r.avatar.url(:medium)%>
  <h3 class="center"><a href="#"><%= r.dish_name %></a></h3>
  <p>Description of dish</p> 
```

如果你这样做可能会更好看：

```
 <% @recipes.each do |r| %>
   <li class="span4">
     <div class="thumbnail">
       <%= image_tag r.avatar.url(:medium)%>
       <h3 class="center"><a href="#"><%= r.dish_name %></a></h3>
       <p>Description of dish</p>
     </div>
   </li>
  <% end %> 
```

意味着您为集合中的每个列出的项目获得一个“li”元素。

然后也许在那之后，如果需要，将 html 放入部分

# android - 使用线性加速度传感器计算距离

> ID：13222834
> 
> 赞同：1
> 
> 时间：2012-11-04T20:55:55.187
> 
> 标签：android, accelerometer

我正在开发室内导航应用程序，但我无法解释这些值。这是我的代码片段：

```
public class MainActivity extends Activity implements SensorEventListener {

private SensorManager sensorManager;

TextView xCoor; // declare X axis object
TextView yCoor; // declare Y axis object
TextView zCoor; // declare Z axis object
Button button;

float[] linear_acceleration = new float[3];
float[] gravity = new float[3];
float[] distanceInMeter = new float[3];
float[] speed = new float[3];
long timeStamp;
float dT;

private boolean firstTimeOfMeasurement = false;

@Override
public void onCreate(Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    xCoor=(TextView)findViewById(R.id.xcoor); 
    yCoor=(TextView)findViewById(R.id.ycoor); 
    zCoor=(TextView)findViewById(R.id.zcoor); 
    button=(Button)findViewById(R.id.button1);

    sensorManager=(SensorManager)getSystemService(SENSOR_SERVICE);

    button.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            sensorManager.registerListener(MainActivity.this,
                    sensorManager.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION),
                    SensorManager.SENSOR_DELAY_FASTEST);

            firstTimeOfMeasurement = false;
        }
    });
}

public void onSensorChanged(SensorEvent event){

    // check sensor type
    if(event.sensor.getType()==Sensor.TYPE_LINEAR_ACCELERATION){

        if(!firstTimeOfMeasurement ){
            firstTimeOfMeasurement = true;
            timeStamp = event.timestamp;

            speed[0] = speed[1] = speed[2] = 0;
            distanceInMeter[0] = distanceInMeter[1] = distanceInMeter[2] = 0;

        }
        else{
            dT= (event.timestamp - timeStamp) / 1000000000.0f;
            timeStamp = event.timestamp;

            calculateDistance(event.values, dT);

            xCoor.setText("X: " + Float.toString(distanceInMeter[0]));
            yCoor.setText("Y: " + Float.toString(distanceInMeter[1]));
            zCoor.setText("Z: " + Float.toString(distanceInMeter[2]));

            Log.d("","X: " + Float.toString(distanceInMeter[0]) +  " Y: " + Float.toString(distanceInMeter[1]) + " Z : " + Float.toString(distanceInMeter[2]));
        }
    }
}

public void calculateDistance (float[] acceleration, float deltaTime) {
    for (int i = 0; i < acceleration.length; i++) {
        speed[i] = acceleration[i] * deltaTime;
        distanceInMeter[i] += speed[i] * deltaTime + acceleration[i] * deltaTime * deltaTime / 2;
    }
} 
```

...这里是日志（设备在 X 方向上移动了约 0.5 米。）：

X：2.516964E-5 Y：2.3743667E-5 Z：-5.294226E-5 X：4.897119E-5 Y：2.4477049E-5 Z：-1.0725691E-4 X：6.026584E-5 Y：4.4123855E-5 Z：-1.4899505E-4 X：3.9997853E-5 Y：-1.7013517E-6 Z：-1.8953103E-4 X：4.6437595E-5 Y：-5.077744E-6 Z：-2.621123E-4 X：5.7528538 E-5 Y：5.1304473E-6 Z：-2.8128378E-4 X：4.4061002E-5 Y：5.7082625E-6 Z：-3.4537681E-4 X：3.2294975E-5 Y：-1.6293983E-5 Z： -4.103487E-4 X：5.8478785E-5 Y：-1.4691614E-6 Z：-4.9171754E-4 X：6.55654E-5 Y：-2.2436536E-5 Z：-5.5965903E-4 X：4.2109532E- 5 Y：-5.2801708E-5 Z：-6.242801E-4 X：3.8397735E-5 Y：-8.7437686E-5 Z：-6.771843E-4 X：-2.4613353E-5 Y：-1.6809099E-4 Z ：-7.590898E-4 X：-4.7245518E-5 Y：-2.0863091E-4 Z：-8.195847E-4 X：-6.6750574E-5 Y：-2.5927206E-4 Z：-8.85209E-4 X： -6.952324E-5 Y：-2.9220866E-4 Z：-9.949753E-4 X：-8.74085E-5 Y：-3.4179245E-4 Z：-0。0010735805 X：-1.0780102E-4 Y：-3.5630423E-4 Z：-0.0011248525 X：-1.19364566E-4 Y：-3.3947633E-4 Z：-0.001229486 X：-1.549891E-4 Y：-3.7859 4 Z：-0.0013151368 X：-1.5717075E-4 Y：-3.702779E-4 Z：-0.0013620423 X：-2.5051413E-6 Y：-1.9888686E-4 Z：-0.0013941963 X：1.4368152E-4 Y： 3.9539344E-5 Z：-0.0014529589 X：2.6982307E-4 Y：2.944292E-5 Z：-0.0015093404 X：4.395193E-4 Y：7.502221E-5 Z：-0.0015618E-74 X：6.23E-499 -5 Z：-0.0015917926 X：7.617797E-4 Y：-5.3465046E-6 Z：-0.0016443293 X：8.4774144E-4 Y：-1.3927222E-4 Z：-0.0016940705 X：9.120384E-3 Y：-2。 E-4 Z : -0.0017769502 X: 0.0010219973 Y: -2.7528123E-4 Z : -0.0018363354 X: 0.0011270456 Y: -3.19711E-4 Z : -0.0019322607 X: 0.0012737722 Y: -3.4506532E-4 Z : -0.0019969852 X ：0.001502906 Y：-3.835355E-4 Z：-0.0020537905 X：0.0017388286 Y：-4。398609E -4 Z：-0.0021189034 X：0.0019086768 Y：-4.70718E -4 Z：-0.0021404363 X：0.0021076156 Y：-5.0305086E -4 Z：-5.0305086E -4 Z：-0.002185045 Y.001526：-02145 x：-0.002266.170450.000.00045 Y：-000.0002667.10-4.000.000.000.000.000.000.000 e.000.000.000.000.000.000 e.000.000.000.00045 e：-10.000.00045266.170.000.000.000.000byethybo : 0.0024057168 Y: -5.4342125E-4 Z : -0.002310839 X: 0.002512934 Y: -5.4679764E-4 Z : -0.0023926103 X: 0.0025857347 Y: -5.900372E-4 Z : -0.0024241738 X: 0.0026625344 Y: -6.842513E- 4 Z : -0.0024786198 X: 0.0027399021 Y: -7.289082E-4 Z : -0.0025227368 X: 0.0028299019 Y: -7.829082E-4 Z : -0.0025947813 X: 0.0029214222 Y: -8.3661743E-4 Z : -0.0026276957 X: 0.0030301774 Y：-8.8301615E-4 Z：-0.0027011314 X：0.0030617723 Y：-9.42785E-4 Z：-0.0027936357 X：0.0030394243 Y：-9.79083E-4 Z：-0.002859614 X：0.0030：4-221 ：-0.0029144369 X：0.0029567073 Y：-9.6269825E-4 Z：-0.0029774965 X：0.00297403 Y：-9.315846E-4 Z：-0.0030192512 X：0.0030169394 Y：-9.6226286E-4 Z : -0.0030642622 X: 0.0031092423 Y: -0.0010050826 Z : -0.003118441 X: 0.0031988935 Y: -0.0011072198 Z : -0.003198576 X: 0.0033174676 Y: -0.0012394118 Z : -0.0032808 X: 0.0034213979 Y: -0.0013103384 Z : -0.0033766583 X: 0.003445055 Y: -0.0013735284 Z : -0.0034781513 X: 0.0034835928 Y: -0.0014324035 Z : -0.0035485225 X: 0.0034975903 Y: -0.0014486146 Z : -0.0036555608 X: 0.0034793443 Y: -0.0014780854 Z : -0.0037472823 X: 0.0034312923 Y：-0.0015043139 Z：-0.0037952673 X：0.0034234857 Y：-0.001599117 Z：-0.0038744798 X：0​​.003435113 Y：-0.0016648113 Z：-0.0039600970013735284 Z : -0.0034781513 X: 0.0034835928 Y: -0.0014324035 Z : -0.0035485225 X: 0.0034975903 Y: -0.0014486146 Z : -0.0036555608 X: 0.0034793443 Y: -0.0014780854 Z : -0.0037472823 X: 0.0034312923 Y: -0.0015043139 Z : -0.0037952673 X ：0.0034234857 Y：-0.001599117 Z：-0.0038744798 X：0​​.003435113 Y：-0.0016648113 Z：-0.0039600970013735284 Z : -0.0034781513 X: 0.0034835928 Y: -0.0014324035 Z : -0.0035485225 X: 0.0034975903 Y: -0.0014486146 Z : -0.0036555608 X: 0.0034793443 Y: -0.0014780854 Z : -0.0037472823 X: 0.0034312923 Y: -0.0015043139 Z : -0.0037952673 X ：0.0034234857 Y：-0.001599117 Z：-0.0038744798 X：0​​.003435113 Y：-0.0016648113 Z：-0.003960097

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:12:36.987

[它行不通。](https://stackoverflow.com/a/7835988/341970)这些传感器不够准确。

在上面的答案中，我给出了您实际上可以为室内定位做些什么的替代方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T16:48:29.960

关于所有实用性 - 这是不可能的。 [为什么？](https://www.youtube.com/watch?v=C7JQ7Rpwn2k&feature=youtu.be&t=23m21s)

# javascript - 如何摆脱菜单右侧的多余空间

> ID：13222838
> 
> 赞同：3
> 
> 时间：2012-11-04T20:56:07.010
> 
> 标签：javascript, jquery, css, html

我创建了简单的水平菜单，并在每个 LI 内提供相等的左右填充，但在 ie 版本中，它在最后一个 li 或下一行之后留下额外的空间。

我花了 3 个小时让它跨浏览器兼容，但最终失败了。当我在最后一个 LI 上添加额外的填充以调整空间时，它在 Firefox 中很好，但在 ie 中显示了不需要的空间。我想让它跨浏览器兼容而不使用黑客。

![在此处输入图像描述](../Images/a707dc6a02d2868b2b579c570254b720.png)

下面是代码：

```
<section class="topContent">
    <nav>
        <ul>
            <li><a href="javascript:;">home</a>
            </li>
            <li><a href="javascript:;">earthmoving</a>
            </li>
            <li><a href="javascript:;">attachments</a>
            </li>
            <li><a href="javascript:;">power systems</a>
            </li>
            <li><a href="javascript:;">truck tailer</a>
            </li>
            <li><a href="javascript:;">ag equipment</a>
            </li>
        </ul>
    </nav>
    <!--/nav-->
</section> 
```

```
.topContent{ width:940px; margin:0 auto;}
.topContent nav{ background:#ffce12; height:42px;}
.topContent nav ul{ padding:0; margin:0;}
.topContent nav li{ float:left; list-style:none;}
.topContent nav li a{ font:14px/42px Arial, Helvetica, sans-serif; color:#000; padding:0 40px; text-transform:capitalize; display:block;}
.topContent nav li a:hover, .topContent nav li a.active{ background:#464646 url(../images/hover-arrow.jpg) no-repeat center 0; display:block; color:#fff;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:55:17.960

您的“设计公司”CSS 根本没有对齐/分隔项目，您只是调整了填充值以使其在一个浏览器上工作。

解决它的一种方法是[证明 nav items 的合理性](https://stackoverflow.com/q/49536/1081234)，或者如果您对动态内容不感兴趣（即 nav item 标题长时间不会更改），您可以明确设置元素宽度并将它们的文本居中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:13:26.113

问题是基于菜单的宽度。我相信，因为文本在每个浏览器甚至操作系统中呈现略有不同，所以你不会得到这么完美。如果菜单不是动态的，您可以尝试分别调整宽度/填充。或者，您可以将菜单宽度的宽度除以链接数。如果某些项目太长，可能看起来有点奇怪。如果这样做，请确保将文本居中对齐。

```
nav a {
    padding: 0; /*just need to remove the padding*/
    width: 156.6px; /*940 / 7 (the amount of links)*/
    text-align:center; 
} 
```

# node.js - NodeJS+续集+玉；在对象上使用 hasMany 集合

> ID：13222849
> 
> 赞同：1
> 
> 时间：2012-11-04T20:57:04.570
> 
> 标签：node.js, one-to-many, pug, sequelize.js

我正在开发一个 nodejs+sequelize+jade 网络应用程序来学习 nodejs。一切基本的东西都很清楚，但现在我想提高赌注。我有一个名为品牌的对象（表）。对象产品与品牌具有一对多的关系。我喜欢做的是找到所有品牌并在 Jade 模板中显示它们，并在其下列出产品。

这是一些基本代码

```
var Brand = sequelize.import(application_root + "/models/brand.js");
var Product = sequelize.import(application_root + "/models/product.js");
Brand.hasMany(Product, { as: 'Products', foreignKey: 'brand'});
Product.belongsTo(Brand, { foreignKey: 'key'}); 
```

在展示我做的品牌和产品的过程中；

```
 Brand.findAll().error(errorHandler).success(function(brands) 
    {   
        brands[0].getProducts().success(function(products) {
        brands[0].products = products;
        });
        res.render('listOfbrands.jade', {  title: 'List of brands', items: brands});
    }); 
```

最奇怪的是，我可以看到执行 console.log 时触发了一个查询，但它没有使用品牌的主键创建正确的查询。查询是 select * from products where "brand" 为空

另外我想知道我是否正确分配子集合以通过这样做在我的 Jade 模板中访问它

```
ul
each item in items
li(class='brandItem')= item.name
ul 
each product in item.products
li=product.name 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T21:17:49.017

我学到了两个原则；首先要查找每个项目的子项目，必须使用 sequelize query-chainer。这使我可以查询所有内容，并在完成后将项目集合放入我的玉模板。其次使用brands.forEach 所以我的最终代码就像

```
 Brand.findAll().error(errorHandler).success(function(brands) 
{   
    var chainer = new Sequelize.Utils.QueryChainer();
    brands.forEach(function(theBrand) {
        chainer.add(theBrand.getProducts({where: "brand="+theBrand.key }).error(errorHandler).success(function(products) 
        {                
            theBrand.products = products;                   
        }));
    }
    chainer.runSerially().success(function(results) {
        res.render('listOfbrands.jade', {  title: 'List of brands', items: brands});
    }
}); 
```

# .htaccess - 将 .php URL 重定向到不带扩展名的 URL

> ID：13222850
> 
> 赞同：14
> 
> 时间：2012-11-04T20:57:04.883
> 
> 标签：.htaccess, redirect

> **可能重复：**
> [使用 .htaccess 删除 .php 扩展名](https://stackoverflow.com/questions/4026021/remove-php-extension-with-htaccess)

如果可能的话，我想在[.htaccess](https://en.wikipedia.org/wiki/.htaccess)`myurl/webpageexamples.php`中将我所有的网站 URL重命名为其非扩展版本，同时将所有流量从新的.`myurl/webpageexamples``myurl/webpageexamples.php``myurl/webpageexamples`

我发现有几个可以从 PHP 重定向到非 PHP，例如：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)\.html$ /$1 [L,R=301] 
```

我有的：

```
myurl/webpageexamples.php 
```

我想要的是：

```
myurl/webpageexamples 
```

我想将 SEO 分数转移到新的`myurl/webpageexamples`.

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-05T03:57:46.103

如果实际请求是针对 php 页面的，您要确保重定向，并在 URI 缺少 php 时在内部重写：

```
RewriteEngine On

# browser requests PHP
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^\ ]+)\.php
RewriteRule ^/?(.*)\.php$ /$1 [L,R=301]

# check to see if the request is for a PHP file:
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^/?(.*)$ /$1.php [L] 
```

# scala - Scala：无样板的拉皮条

> ID：13222853
> 
> 赞同：2
> 
> 时间：2012-11-04T20:57:21.347
> 
> 标签：scala, metaprogramming, implicit-conversion, scala-2.10, scala-macros

我广泛使用[Pimp my Library](http://www.artima.com/weblogs/viewpost.jsp?thread=179766)模式，我想删除样板。例如，假设我有一些特质 PrettyPrint：

```
trait PrettyPrint { def prettyPrint: String } 
```

如果我想拉皮条 Int 和 Double，我需要编写如下代码：

```
implicit def int2PrettyPrint(self: Int) = 
  new PrettyPrint { def prettyPrint = "Int: " + self }
implicit def double2PrettyPrint(self: Double) = 
  new PrettyPrint { def prettyPrint = "Double: " + self } 
```

在上面，我将其归类为样板：1）隐式转换的名称，2）“new”关键字，3）也许是参数名称“self”，4）也许是“implicit”关键字。我宁愿写这样的东西：

```
@pimp[Int, PrettyPrint] { def prettyPrint = "Int: " + self }
@pimp[Double, PrettyPrint] { def prettyPrint = "Double: " + self } 
```

在上述代码的右侧，名称“self”被假定为转换参数。

关于如何做到这一点的想法？

一些注意事项：

1) 如有必要，我愿意使用 Scala 2.10。

2)据我所知，Scala 2.10 中的新隐式类*还不够。*这是因为每个隐式类只有一个隐式转换。换句话说，像下面这样的代码不会编译，因为 PrettyPrint 被声明了两次：

```
implicit class PrettyPrint(self: Int) = ...
implicit class PrettyPrint(self: Double) = ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:13:14.857

你可以用不同的方式命名你的隐式类：

```
implicit class PrettyPrintInt(self: Int) = ...
implicit class PrettyPrintDouble(self: Double) = ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T11:17:28.083

这是另一种解决方案，它需要显着更多的样板，以换取每个特定实例的混乱程度略低`PrettyPrint`：

```
implicit class PrettyPrintable[T]( val self: T ) extends AnyVal { 
  def prettyPrint( implicit impl: PrettyPrint[T]): String = impl.prettyPrint( self ) 
}
trait PrettyPrint[T]{ def prettyPrint( self: T ): String }
object PrettyPrint {
  def apply[T]( impl: T => String ): PrettyPrint[T] = new PrettyPrint[T] {
    def prettyPrint( self: T ) = impl( self )
  }
}

implicit val int2PrettyPrint = PrettyPrint[Int]( "Int: " + _ )
implicit val double2PrettyPrint = PrettyPrint[Double]( "Double: " + _ )
// Or more explicitly:
//implicit val int2PrettyPrint = PrettyPrint{self: Int => "Int: " + self }
//implicit val double2PrettyPrint = PrettyPrint{self: Double => "Double: " + self } 
```

比较：

```
implicit def int2PrettyPrint(self: Int) = new PrettyPrint { def prettyPrint = "Int: " + self } 
```

到：

```
implicit val int2PrettyPrint = PrettyPrint[Int]( "Int: " + _ ) 
```

您仍然需要`implicit`关键字，以及隐式值的唯一名称

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T09:02:17.233

跟进我们在 NativeLibs4Java 的邮件列表上的[讨论](https://groups.google.com/d/topic/nativelibs4java/o577ZXRAheQ/discussion)，我在其中给出了[这样一个编译器插件](https://gist.github.com/ochafik/4978627)的示例（扩展`@extend(Int) def foo = blah`为`implicit class foo(self: Int) extends AnyVal { def foo = blah }`）。

我编写[了一个更详细的插件](https://github.com/ochafik/Scalaxy/tree/master/MacroExtensions)，将这些定义扩展为...宏（提供宏可扩展扩展/“皮条客”，没有运行时依赖！）。

鉴于：

```
@extend(Any) def quoted(quote: String): String = quote + self + quote 
```

它扩展为：

```
import scala.language.experimental.macros
implicit class scalaxy$extensions$quoted$1(self: Any) {
  def quoted(quote: String) = macro scalaxy$extensions$quoted$1.quoted
}
object scalaxy$extensions$quoted$1 {
  def quoted(c: scala.reflect.macros.Context)
            (quote: c.Expr[String]): c.Expr[String] = {
    import c.universe._
    val Apply(_, List(selfTree$1)) = c.prefix.tree
    val self = c.Expr[Any](selfTree$1)
    {
      reify(quote.splice + self.splice + quote.splice)
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T20:37:26.930

1 周后总结：看来我需要编写一个编译器插件来获得我指定的确切行为。

# android - PhoneGap 谷歌地图 - 地图不显示

> ID：13222857
> 
> 赞同：4
> 
> 时间：2012-11-04T20:57:41.047
> 
> 标签：android, google-maps, cordova

我正在编写一个使用 PhoneGap 并需要在其中集成 Google Maps 的应用程序。我使用了 Google 提供的在线文档中的这个示例：

```
 <!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDlFl3vPEbgzrr-1KX5E20z_1DowB2ASus&sensor=true">
    </script>
    <script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

如果我在我的网络浏览器（Chrome、FF、IE ...）中打开它，它可以正常工作。但是，在我的模拟器（以及设备）中，它只显示一个空白页。有小费吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T00:18:51.960

因为我在同一个应用程序上使用多个 html 页面，所以出现了这个问题。由于 phonegap 将使用 ajax 调用来替换索引页面的 dom，因此它也无法在这些页面上加载脚本。

这里有两种解决方案：

1.  仅使用单个 html 页面
2.  加载第二页使用

    相对=“外部”

# java - Android - 默认按钮样式

> ID：13222858
> 
> 赞同：48
> 
> 时间：2012-11-04T20:57:44.613
> 
> 标签：java, android, button, styles

**问题：** 在哪里可以找到具有十六进制颜色代码的默认样式 xml？

我正在寻找 Style 'buttonStyle' 和其他默认样式，它们会影响 TextView、Button 等方面（如果您不更改方面的样式）

我抬头看了看，`<instalation_folder>\android-sdk\platforms\android-<versio>\data\res\values`但`<instalation_folder>\android-sdk\platforms\android-<version>\data\res\colors`实际上并没有找到我要找的东西。

希望我的问题很清楚。

* * *

由于声誉低，我还不能回答这个问题。这里是答案

**回答**

通过一些谷歌搜索，我发现'buttonStyle'实际上是'Widget.Button' - [使用默认设置样式化Android](http://www.therealjoshua.com/2012/01/styling-android-with-defaults/)

这是它的工作原理：

*   正如我所说，'buttonStyle' 样式是精确定义的 'Widget.Button' 样式`\android-sdk\platforms\android-<version>\data\res\values\styles.xml`。背景设置为：`@android:drawable/btn_default`
*   `\android-sdk\platforms\android-<version>\data\res\drawable\btn_default.xml`将按钮的背景颜色定义为选择器。颜色实际上取决于按钮的状态。默认颜色设置为`@drawable/btn_default_normal`
*   经过一番搜索，我发现 btn_default_normal 是位于`\android-sdk\platforms\android-<version>\data\res\drawable-mdpi`

我觉得这有点令人困惑，但我希望它会对某人有所帮助，也许......

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-11-04T21:53:02.437

了解 Android 样式的工作原理可能有点混乱。

我将尝试通过一个示例来解释基本的工作流程。

假设您想知道按钮的默认背景是什么。这可以是简单的颜色（不太可能）或可绘制的（有许多不同类型的可绘制对象）。

Android有主题。主题基本上定义了将哪种样式应用于哪个小部件。因此，我们的第一步是找到默认的android主题。

你在下面找到它`android-sdk\platforms\android-15\data\res\values\themes.xml`

在此主题文件中，搜索`button`.

你会发现这样的东西：

```
<!-- Button styles -->

<item name="buttonStyle">@android:style/Widget.Button</item> 
```

这意味着主题将样式`Widget.Button`应用于按钮。

好的，现在让我们找到样式`Widget.Button`。

所有默认的 Android 样式都在文件中定义`android-sdk\platforms\android-15\data\res\values\styles.xml`

现在搜索`Widget.Button`

你会发现这样的东西：

```
<style name="Widget.Button">
    <item name="android:background">@android:drawable/btn_default</item>
    <item name="android:focusable">true</item>
    <item name="android:clickable">true</item>
    <item name="android:textAppearance">?android:attr/textAppearanceSmallInverse</item>
    <item name="android:textColor">@android:color/primary_text_light</item>
    <item name="android:gravity">center_vertical|center_horizontal</item>
</style> 
```

有趣的是：

`<item name="android:background">@android:drawable/btn_default</item>`

这意味着有一个名为`btn_default`set as button background 的可绘制对象。

现在我们需要`btn_default.*`在`android-sdk\platforms\android-15\data\res`.

这可以是图像（不太可能）或 xml 文件，如`btn_default.xml`.

经过一番搜索，您将找到该文件`android-sdk\platforms\android-15\data\res\drawable\btn_default.xml`

它包含如下内容：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_window_focused="false" android:state_enabled="true" android:drawable="@drawable/btn_default_normal" />
    <item android:state_window_focused="false" android:state_enabled="false" android:drawable="@drawable/btn_default_normal_disable" />
    <item android:state_pressed="true" android:drawable="@drawable/btn_default_pressed" />
    <item android:state_focused="true" android:state_enabled="true" android:drawable="@drawable/btn_default_selected" />
    <item android:state_enabled="true" android:drawable="@drawable/btn_default_normal" />
    <item android:state_focused="true" android:drawable="@drawable/btn_default_normal_disable_focused" />
    <item android:drawable="@drawable/btn_default_normal_disable" />
</selector> 
```

现在您必须了解这是一个可绘制的选择器（许多可绘制类型之一）。此选择器根据按钮状态选择不同的背景。例如，如果按下按钮，则它具有不同的背景。

不，让我们看一下默认状态。

`<item android:state_enabled="true" android:drawable="@drawable/btn_default_normal" />`

它应用了一个名为`btn_default_normal`.

现在我们需要找到这个drawable。

同样，我们需要`btn_default_normal.*`在`android-sdk\platforms\android-15\data\res`.

这又可以是图像或 xml 文件，如`btn_default_normal.xml`.

您会在不同的可绘制文件夹中找到多个名为“btn_default_normal.9.png”的文件，用于不同的分辨率。

:) 现在您知道它`btn_default_normal.9.png`设置为按钮背景。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-04T22:25:06.857

在 XML 中声明时，您可以找到 android 小部件的默认样式：

```
style="@android:style/Widget.Button" - standard Button
style="@android:style/Widget.TextView" - standard TextView 
```

例如，这是默认按钮的样式：

```
 <style name="Widget.Button">
        <item name="android:background">@android:drawable/btn_default</item>
        <item name="android:focusable">true</item>
        <item name="android:clickable">true</item>
        <item name="android:textAppearance">?android:attr/textAppearanceSmallInverse</item>
        <item name="android:textColor">@android:color/primary_text_light</item>
        <item name="android:gravity">center_vertical|center_horizontal</item>
    </style> 
```

默认按钮的背景：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/btn_default_normal" android:state_enabled="true" android:state_window_focused="false"/>
    <item android:drawable="@drawable/btn_default_normal_disable" android:state_enabled="false" android:state_window_focused="false"/>
    <item android:drawable="@drawable/btn_default_pressed" android:state_pressed="true"/>
    <item android:drawable="@drawable/btn_default_selected" android:state_enabled="true" android:state_focused="true"/>
    <item android:drawable="@drawable/btn_default_normal" android:state_enabled="true"/>
    <item android:drawable="@drawable/btn_default_normal_disable_focused" android:state_focused="true"/>
    <item android:drawable="@drawable/btn_default_normal_disable"/>
</selector> 
```

您可以在任何图形编辑器的帮助下获得默认颜色：默认按钮[NinePatch](http://developer.android.com/reference/android/graphics/NinePatch.html) ..\android-sdk\platforms\android-13\data\res\drawable-hdpi 的路径

# ruby - Ruby按相反顺序对数组进行排序

> ID：13222859
> 
> 赞同：10
> 
> 时间：2012-11-04T20:57:50.377
> 
> 标签：ruby, arrays, sorting

> **可能重复：**
> [在 Ruby 中按降序对数组进行排序](https://stackoverflow.com/questions/2642182/sorting-an-array-in-descending-order-in-ruby)

我想根据某些条件对元素数组进行排序，但以相反的顺序除外。所以基本上不管它会做什么然后逆转。

例如，我有一个字符串数组，我想通过减少字符串长度对其进行排序

```
a = ["test", "test2", "s"]
a.sort_by!{|str| str.length}.reverse! 
```

虽然这可以完成工作......有没有办法指定条件，以便排序算法将反向执行？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-04T21:01:00.383

长度是一个数字，所以你可以简单地否定它来颠倒顺序：

```
a.sort_by! { |s| -s.length } 
```

如果您要对不容易否定的东西进行排序，那么您可以使用`sort!`并手动反转比较。例如，通常你会这样做：

```
# shortest to longest
a.sort! { |a,b| a.length <=> b.length } 
```

但您可以交换顺序以反转排序：

```
# longest to shortest
a.sort! { |a,b| b.length <=> a.length } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-04T21:05:28.127

@mu 的答案太短了，但仅适用于数字。对于一般情况，您可以采用以下`sort`方法：

```
 irb> a = ["foo", "foobar", "test"]
  => ["foo", "foobar", "test"]
 irb> a.sort{|a,b| a.length <=> b.length}
 => ["foo", "test", "foobar"]
 irb> a.sort{|a,b| b.length <=> a.length}
 => ["foobar", "test", "foo"] 
```

# ios - 全局变量在不是时被识别为空 - Objective C

> ID：13222861
> 
> 赞同：0
> 
> 时间：2012-11-04T20:57:54.853
> 
> 标签：ios, cocoa-touch, static, nsmutablearray, scope

我在我的 Objective-C 程序中遇到了一个令人困惑的问题。当我的程序进入后台时，我试图从 NSMutableArray 保存数据。我的 AppDelegate 中有一个名为 savedResults 的静态变量。视图控制器在我的程序的生命周期内操作这个变量并向它添加数据。我有一个逻辑条件来检查 savedResults 是否为空，如果不是，那么我需要保存数据。这是我的代码：

```
NSString *const kFileName = @"PCFData.bin";
//these are all my static variables..I have to initialize them to something so
//they can be used in other parts of my program with the keyword extern.
NSString *finalTermValue = @"";
NSString *finalClassValue = @"";
NSString *finalTermDescription = @"";
NSMutableArray *savedResults = nil;

@implementation PCFAppDelegate

@synthesize finalTermValue, finalClassValue, finalTermDescription, savedResults;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *docDir = [paths objectAtIndex:0];
    NSString *fullPath = [docDir stringByAppendingFormat:@"/%@", kFileName];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:fullPath];
    if (fileExists) {
        savedResults = [NSKeyedUnarchiver unarchiveObjectWithFile:fullPath];
    }
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
    // Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
    if (savedResults) {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSUserDirectory, NSUserDomainMask, YES);
        NSString *docDir = [paths objectAtIndex:0];
        NSString *fullPath = [docDir stringByAppendingFormat:@"/%@", kFileName];
        [NSKeyedArchiver archiveRootObject:savedResults toFile:fullPath];
    }
} 
```

我在 applicationDidEnterBackgroundMethod 中放了一个断点，看看发生了什么。我的程序从不进入 if 语句中的代码块，即使 savedResults 数组不为空。我也尝试过测试 if ([savedResults count] > 0) 并且即使它大于零它也不会进入块。这是 XCode 显示的变量的图片。如您所见，数组中有对象。 ![漏洞](../Images/de25036753a186ce1e0af938abfbba03.png) ![错误2](../Images/e292cb1ae77c1c2da863b4e7db240a79.png) 我有一种感觉 XCode 正在查看上面的数组声明，我将其设置为 nil 而不是实际变量。我如何区分这两者？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:04:49.237

您有两个名为`savedResults`. 一个是全局变量。另一个是`PCFAppDelegate`类中的实例变量，由`@synthesize savedResults`语句生成。调试器向您显示这两个变量。实例变量在扩展下`self`，全局变量显示在三角形的右侧和红色框中的“S”。

所有`savedResults`在方法中提及的都`PCFAppDelegate`使用实例变量，但在其他类中提及将使用全局变量。所以外面的一些代码`PCFAppDelegate`是将全局变量设置为非nil，但是在-[PCFAppDelegate applicationDidEnterBackground]`中，你只能访问仍然设置为nil的实例变量。

# c# - 使用 ANTLR 解析 MathML 运算符

> ID：13222862
> 
> 赞同：1
> 
> 时间：2012-11-04T20:58:13.400
> 
> 标签：c#, parsing, antlr, abstract-syntax-tree, mathml

我正在尝试解析 Presentation MathML 并使用 ANTLR 构建 AST。我支持大多数标签，并且可以为特定构造构建节点。

我遇到了运营商的麻烦。在本页面;

[http://www.w3.org/TR/MathML3/appendixc.html](http://www.w3.org/TR/MathML3/appendixc.html)

有一个运算符列表，它们默认出现的形式（前缀、中缀或后缀）和一个优先级值，它给出了运算符的优先级。

我可以将每个运算符代码添加到我的词法分析器中，然后根据优先级为一元、二元和后缀表达式编写规则，就像我为 C 或其他编程语言编写表达式一样。

问题是操作符标签可以包含一个“form”属性，该属性可以取值“prefix”、“infix”和“postfix”，这会改变树结构。我在解析器阶段之前看不到属性。

此外，运算符标签可以包含充当运算符的自然语言，因此我无法推断优先级并因此构建正确的树。

是否可以在解析器阶段忽略运算符优先级，只需将表达式作为节点列表加载，然后在语义阶段使用树遍历器重新编写树？在这个阶段我将拥有属性值，并且我拥有一个已知运算符及其优先级/优先级的字典。

这是我进步的一个重要里程碑，因为我必须在继续之前决定我能做什么。

**编辑**

我有以下 MathML 表达式...

```
<math>
<mrow>
<mi>a</mi>
<mo>+</mo>
<mi>b</mi>
<mo>+</mo>
<mi>c</mi>
</mrow>
</math> 
```

我可以建造两棵不同的树...

![在此处输入图像描述](../Images/bfbc7719613d19809efa34b96efa7990.png)

或者...

![在此处输入图像描述](../Images/49c51c0fe6927f2adbd37b4ace75a997.png)

第二个编码树中“+”运算符的关联性，这就是我们通常对编程语言所做的。

但是规范中有数百个运算符，所以我的语法会非常大，并且我的生产规则中有很多替代方案。

自然语言也可以用于操作员（虽然真的不应该）......

```
<math>
<mrow>
<mo>there exists</mo>
<mi>x</mi>
<mo>in</mo>
<mi>S</mi>
</mrow>
</math> 
```

所以我要问的是对树中的运算符进行编码的最佳方法是什么。我正在尝试将演示文稿 MathML 转换为 Content MathML，因此我需要分析演示文稿的语义以便能够确定它在数学上的含义。

有没有办法在树语法阶段将第一棵树转换为第二棵树？

**编辑**

我有以下 MathML 和生成的树...

```
<math>
<mrow>
<mi>a</mi>
<mo>+</mo>
<mi>b</mi>
<mo>+</mo>
<mi>c</mi>
</mrow>
</math> 
```

![在此处输入图像描述](../Images/bfbc7719613d19809efa34b96efa7990.png)

这是一个简单的树语法，我想用它来查找其他`MO`节点之间的任何节点，例如`MI`...

```
tree grammar SimpleReWriter;

options 
{
  tokenVocab = MathML;
  ASTLabelType = CommonTree;
  output = AST;
  backtrack = true;
  language = CSharp3;
  filter = true; // use pattern matching
  rewrite = true;
}

topdown:   findInfix; // look for infix operators

findInfix : ^(MROW left=.+ MO right=.+) -> ^(MROW ^(MO $left $right)); 
```

我的程序在课堂内崩溃`SimpleReWriter`，并显示错误消息：`Operation is not valid due to the current state of the object.`

如果节点之间只有一个，我的树语法就可以工作`+`，但是当有一个以上的序列时，它就会崩溃。

# javascript - 对象字面量变量

> ID：13222869
> 
> 赞同：1
> 
> 时间：2012-11-04T20:59:27.613
> 
> 标签：javascript, variables, select, literals

```
var example= {
        'fr' : {
            name: "France",
            country: "europe",
        },
        'es' : {
            name: "Espana",
            pre: "europe",
        },
    }; 
```

我想使用变量查找数组名称。这里有一个不起作用的例子：

```
var select = 'country';
console.log(example['fr'].select); 
```

我希望这段代码返回“欧洲”，但事实并非如此。我怎么能以简单的方式做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T21:00:31.183

像这样做：

```
var select = 'country';
console.log(example['fr'][select]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T21:00:42.560

```
console.log(example['fr'][select]); 
```

也许？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T21:24:40.413

您的代码的问题是您使用了错误的语法。你有一个二维数组，即嵌套在另一个数组中的数组。因此，表达式`example['fr']`会返回一个包含两个成员的数组：

```
{
   name: "France",
   country: "europe",
} 
```

并且您必须像这样从中获取绑定到`country`键的值：

```
ar2 = example['fr'];
console.log(ar[select]); 
```

或使其更简洁：

```
console.log(example['fr'][select]); 
```

直接引用最内层数组的元素而不使用临时变量。

# android - 表单布局麻烦。安卓新手

> ID：13222881
> 
> 赞同：0
> 
> 时间：2012-11-04T21:00:50.750
> 
> 标签：android

我正在创建我的第一个强大的 android 应用程序，并且在尝试在主窗体上布局控件时遇到了很多麻烦。

我有 4 个文本视图、1 个复选框和 1 个按钮。使用 Galaxy Nexus（4.65 英寸）进行调试，但使用 4 英寸的表单屏幕尺寸，因此我的应用程序可以适应较小的屏幕尺寸。

每当我尝试移动文本视图或按钮时，所有其他控件似乎都会自行移动到不同的位置。当我调试时，按钮的一半位置也让我强制关闭。布置控件似乎不应该这么难，但我又来自winforms和很少的asp.net。

任何意见，将不胜感激！

编辑：添加 xml。我尝试了换行的宽度/高度、匹配父级和自定义尺寸，结果都一样。也许我的控件应该在某种表格中，例如 asp.net？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#808080" >

<Button
    android:id="@+id/btnOK"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="38dp"
    android:background="#FFFFFF"
    android:onClick="onOKclicked"
    android:text="@string/OkButton" />

<CheckBox
    android:id="@+id/chkShow"
    android:layout_width="300dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/btnOK"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="40dp"
    android:text="@string/DoNotShow"
    android:textColor="#FFFFFF"
    android:textSize="16dp" />

<TextView
    android:id="@+id/txt3G"
    android:layout_width="120dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/chkShow"
    android:layout_marginBottom="112dp"
    android:text="@string/Description3G"
    android:textColor="#FFFFFF"
    android:textSize="16dp" />

<TextView
    android:id="@+id/txt4G"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:layout_above="@+id/txt3G"
    android:layout_alignLeft="@+id/chkShow"
    android:layout_marginBottom="36dp"
    android:text="@string/Description4G"
    android:textColor="#FFFFFF"
    android:textSize="16dp" />

<TextView
    android:id="@+id/txtDescription"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="20dp"
    android:layout_marginTop="14dp"
    android:text="@string/Instructions1"
    android:textColor="#FFFF00"
    android:textSize="16dp" />

<TextView
    android:id="@+id/txtBattery"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/txt3G"
    android:layout_alignBottom="@+id/txt3G"
    android:layout_alignLeft="@+id/btnOK"
    android:layout_marginLeft="30dp"
    android:text="@string/DescriptionBattery"
    android:textColor="#FFFF00"
    android:textSize="14dp"
    android:textStyle="italic" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:11:12.430

由于您正在使用相对布局，并且当您移动按钮时，布局会中断相对于该按钮放置的控件。

为什么你会遇到调试问题，我不知道。你能发布堆栈跟踪或有帮助的东西吗？

# excel - 如何使用组合框输入选择工作表以将数据复制到excel vba中

> ID：13222885
> 
> 赞同：1
> 
> 时间：2012-11-04T21:01:10.750
> 
> 标签：excel, vba

我认为这是一个简单的问题，但在我苦苦挣扎之前，我还没有以这种方式使用过 excel。我正在尝试创建一个基于 Excel VBA 的程序。我在呼叫中心工作。我们有许多 Excel 表来记录不同方案的调用。我有一个项目来简化这个过程。到目前为止，我已经创建了一个工作簿，其中有单独的工作表来表示每个方案。我创建了一个用户表单来收集信息。其中一个组合框指示调用所涉及的方案。来自用户窗体的输入需要登录到工作簿中与组合框中选择的方案名称相对应的工作表。我似乎无法接近工作。任何建议或意见，将不胜感激！

我的代码是：

```
Private Sub cmdClear_Click()
Call UserForm_Initialize
End Sub

Private Sub cmdClose_Click()
Unload Me
End Sub

Private Sub ComboBox1_Change()
Dim ShtName As String
ShtName = ComboBox1.List(ComboBox1.ListIndex)
End Sub

Private Sub CommandButton1_Click()
Call Add_Data
End Sub

Private Sub Add_Data()
Dim Worksheets As Range
Dim ws As Worksheet
Dim UserForm As Object
Dim iRow As Long

    With Application
        .EnableEvents = False
        .ScreenUpdating = False
    End With

Set ws = this.ComboBox1.GetItemText(this.ComboBox1.SelectedItem)

'find first empty row in database
iRow = ShtName.Cells(Rows.Count, 1).End(x1up).Offset(1, 0).Row

'copy the data to the database
ws.Cells(iRow, 1) = Date
ws.Cells(iRow, 2) = Me.txtName.Value
ws.Cells(iRow, 3) = Me.txtNumber.Value
ws.Cells(iRow, 4) = ComboBox2.Value
ws.Cells(iRow, 5).Value = Me.txtQuery.Value

If optYes = True Then
        msgstr = "Yes"
    ElseIf optNo = True Then
        msgstr = "No"

End If

ws.Cells(iRow, 6).Value = msgstr

If chkMain = True Then
        msgstri = "Main"
    ElseIf chkExec = True Then
        msgstr = "Exec"
     Else
        msgstri = ""

End If

ws.Cells(iRow, 7).Value = msgstri
ws.Cells(iRow, 8).Value = Me.txtTime.Value

End Sub

Private Sub UserForm_Initialize()

ComboBox1.Clear
ComboBox1.AddItem ("Sheet2")
ComboBox1.AddItem ("Sheet3")
ComboBox1.AddItem ("Sheet4")
ComboBox1.AddItem ("Sheet5")
ComboBox1.AddItem ("Sheet6")
ComboBox1.AddItem ("Sheet7")
ComboBox1.AddItem ("Sheet8")
ComboBox1.AddItem ("Sheet9")
ComboBox1.AddItem ("Sheet10")
ComboBox1.AddItem ("Sheet11")
ComboBox1.AddItem ("Sheet12")

ComboBox2.Clear
ComboBox2.AddItem ("agent1")
ComboBox2.AddItem ("agent2")
ComboBox2.AddItem ("agent3")
ComboBox2.AddItem ("agent4")
ComboBox2.AddItem ("agent5")
ComboBox2.AddItem ("agent6")
ComboBox2.AddItem ("agent7")
ComboBox2.AddItem ("agent8")
ComboBox2.AddItem ("agent9")
ComboBox2.AddItem ("agent10")

txtNumber.Value = ""
txtName.Value = ""
txtQuery.Value = ""
txtTime.Value = ""

optYes = False
optNo = False
chkMain = False
chkExec = False

ComboBox1.SetFocus

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:18:17.003

您应该在

```
 Set ws = this.ComboBox1.GetItemText(this.ComboBox1.SelectedItem) 
```

您正在尝试将对象设置为字符串。尝试使用

```
 Set ws = Sheets(this.ComboBox1.GetItemText(this.ComboBox1.SelectedItem)) 
```

这实际上会为您提供该变量中的 ws 对象。Sheets 是工作簿中工作表的集合。您可以按索引号或工作表名称进行选择。

# java - 迭代无父节点结构

> ID：13222888
> 
> 赞同：0
> 
> 时间：2012-11-04T21:01:56.860
> 
> 标签：java, data-structures, iterator

我有一个节点结构，**每个节点都有子节点但没有父节点**。**我需要在将信息收集到3 doubles**时迭代这个结构。由于java没有引用我不能使用递归，除非我为这些双打创建一个类，而且我不能没有递归，因为节点是无父节点。

有没有办法在不改变结构或创建另一个类的情况下在 java 中做到这一点？

结构：

```
public class Skeleton
{

    public Vector2D head;
    public int numberOfNodes;
    public Skeleton[] nodes;
    public int skeletonSize;
    public Color color;
...
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T21:06:36.980

如果您声明：

```
double[] results = new double[3]; 
```

results 将是一个指向三元素双精度数组的指针。您可以在递归期间传递它，并根据需要修改元素。

但是，不要害怕在 Java 中创建额外的类。您可以在其他类之一中声明一个类，以供本地使用。

# c++ - 如果我在 lambda 函数中使用 [this] 而不是 [=] 是否有任何性能提升？

> ID：13222891
> 
> 赞同：5
> 
> 时间：2012-11-04T21:02:07.930
> 
> 标签：c++, lambda, c++11

据我了解，`[=]`复制函数体内使用的所有变量，而`[this]`只复制`this`指针。但是看看样本，我发现`[=]`它被广泛使用在哪里`[this]`或者`[this, foo]`就足够了。是否有任何理由（例如性能提升）来`[this]`代替`[=]`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T21:04:17.063

没有性能提升，因为正如您所说，只有您在 lambda 中实际*使用*的变量被复制用于`[=]`. ^(†</sup> 这主要是编码人员的懒惰并保持 lambda 头部简洁。如果您使用新变量，则必须扩展捕获子句以包含这些变量，并且 meh。但是，有时，您希望/必须是明确的，例如当您想要混合按引用和按值捕获时。)

* * *

† 请注意，目前，以下代码段中的`[=]`（甚至）*不会*将成员变量复制到 lambda 中，这与您的预期相反：`[x]`

 *```
struct X{
  std::function<void()> f(){
    return [=]{ std::cout << "x: " << x << "\n"; };
  }

  int x;
}; 
```

相反，您将获得`this`. 如果 lambda 比父对象寿命长，这可能会导致问题，并且为了使其行为正确，您目前需要在主体内创建一个本地名称`f`并捕获/使用它。此名称可以是引用或值。我更喜欢引用，因为它少了一个副本（对于引用，成员将只复制到 lambda 中，而对于值，成员首先复制到该引用，然后复制到 lambda）。^(‡</sup>)

```
struct X{
  std::function<void()> f(){
    auto& x_ref = x;
    return [=]{ std::cout << "x: " << x_ref << "\n"; };
  }

  int x;
}; 
```

但是，[有一个建议](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3424.pdf)是让`[=]`and `[member_name]`capture 子句复制成员。如果您需要参考，则需要捕获`[this]`.

* * *

‡ 感谢[@MooingDuck](https://chat.stackoverflow.com/transcript/message/6241401#6241401)的启发。*

# html - 谷歌地图地址列表

> ID：13222892
> 
> 赞同：1
> 
> 时间：2012-11-04T21:02:15.260
> 
> 标签：html, google-maps, geocoding

我想知道是否有一种方法可以从谷歌地图中获取一个国家的地址列表。我想用地址列表填充一个 html 列表框。有没有办法做到这一点？我还想用long和lat坐标作为地址的值，用地址描述作为显示值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:04:57.683

您通常必须为这些类型的数据库付费。Google 不会免费为您提供数据库转储，其他任何人也不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:42:55.313

包含整个国家/地区地址的列表框？您不仅可能会违反一系列隐私法，浏览器还会在庞大的列表中窒息。

我在 SmartyStreets 工作，在那里我们维护着一份美国地址的官方列表，大小为 GB。谷歌和其他数据提供商不提供任何资料，而且只有少数几个国家拥有的任何官方数据集都非常昂贵。

要验证网站表单条目中的地址，您可能会对我们的 jQuery 插件感兴趣：[http ://smartystreets.com/kb/liveaddress-api/website-forms](http://smartystreets.com/kb/liveaddress-api/website-forms)

这和你要找的一样吗？是的，结果确实以经纬度返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:34:25.383

这可用于验证 Map 中的地址，它需要进行一些调整才能按照您希望的方式工作：

[http://geo-autocomplete.googlecode.com/svn/trunk/demo/ui.demo.html](http://geo-autocomplete.googlecode.com/svn/trunk/demo/ui.demo.html)

# c# - 使用 SQLite 数据库使用 nHibernate 更新非常慢

> ID：13222894
> 
> 赞同：2
> 
> 时间：2012-11-04T21:02:49.420
> 
> 标签：c#, nhibernate

我正在使用 nHibernate，每种方法都有一个会话。我正在使用 Castle Dynamic Proxy 在执行该方法之前打开一个会话和一个事务，并在执行此方法后立即提交事务并关闭会话。

我正在使用 SQLite 数据库，如果将级联设置为 SaveUpdate 或 None 不会改变任何内容。nHIbernate 使用 Fluent nHibernate 配置为默认配置。

当我刷新会话时，它需要超过 2 秒。

```
public void AddNewChild(LightPatientDto patient, LightPatientDto child)
{
    var ePatient = this.Session.Load<Patient>(patient.Id);
    var eChild = this.Session.Load<Patient>(child.Id);

    switch (ePatient.Gender)
    {
        case Gender.Male:
            eChild.Father = ePatient;
            break;
        case Gender.Female:
            eChild.Mother = ePatient;
            break;
        default:
            Assert.FailOnEnumeration(eChild.Gender);
            break;
    }

    this.Session.Update(eChild);
    this.Session.Flush(); // <== takes more than 2 seconds
} 
```

NHibernate 探查器给了我这个 SQL 在 2008 毫秒内执行。当我使用 SQLite 管理工具复制粘贴此 SQL 时，它在 90 毫秒内执行。

```
UPDATE Patient
SET    BirthDate = '1964-05-06T00:00:00.00' /* @p0 */,
       Fee = 0 /* @p1 */,
       Height = 0 /* @p2 */,
       InscriptionDate = '2007-05-21T00:00:00.00' /* @p3 */,
       PlaceOfBirth = 'xxxxxx' /* @p4 */,
       PrivateMail = '' /* @p5 */,
       PrivateMobile = NULL /* @p6 */,
       PrivatePhone = '0496/xx.xx.xx' /* @p7 */,
       Reason = 'diabète' /* @p8 */,
       Father_id = 2 /* @p9 */,
       Insurance_id = 1 /* @p10 */,
       Mother_id = NULL /* @p11 */,
       Practice_id = 1 /* @p12 */,
       Profession_id = NULL /* @p13 */,
       Reputation_id = 1 /* @p14 */
WHERE  Person_id = 3 /* @p15 */ 
```

如何优化执行时间？

**编辑 1**

正如@csanchez 建议的那样，我已成功为我的实体添加动态更新。现在，当我在 NH Profiler 中查看 SQL 时，我得到了这个：

```
UPDATE Patient
SET    Father_id = 2 /* @p0 */
WHERE  Person_id = 21 /* @p1 */ 
```

这是很多优化！但是，执行时间是... 1852 ms o_O

在调试器中，我看到它正在提交需要时间的事务......而且我不知道为什么它这么慢......

**编辑 2**

每个患者都有医学图片，这些图片以字节数组的形式存储在表格中。这是创建表的 SQL（由 Fluent nHibernate 完成）

```
CREATE TABLE Picture (
  Id               integer PRIMARY KEY AUTOINCREMENT,
  Bitmap           blob,
  Creation         datetime,
  LastUpdate       datetime,
  Notes            text,
  IsImported       bool,
  Tag_id           bigint,
  Patient_id       bigint,
  ThumbnailBitmap  blob,
  /* Foreign keys */
  FOREIGN KEY (Patient_id)
    REFERENCES Patient(), 
  FOREIGN KEY (Tag_id)
    REFERENCES "Tag"()
); 
```

如果我删除数据`DELETE Picture`并重新启动应用程序，更新速度很快。

似乎 nHibernate 试图变得聪明并做一些减慢一切的事情。但是如果我用这段代码执行一个纯 SQL 查询，更新仍然需要一秒钟以上：

```
using (var tx = this.Session.BeginTransaction())
{   
    var sql = "UPDATE Patient SET Father_id = 2 WHERE Person_id = 21";     
    var query = this.Session.CreateSQLQuery(sql);
    query.ExecuteUpdate();

    tx.Commit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T13:08:06.240

如果您更新的唯一内容是您可以使用的 Parent 或 Mother `dynamic-update="true"`，则在 Patient 的映射文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:49:38.203

这种性能是否仅在第一次提交到数据库时受到影响。SQLite 可能有一些启动时间。

您说“每个方法的会话”，但看起来您正在使用模块级会话变量。使用 Session 实例完成的越多，由于缓存，它会变得越慢。如果这将是更多的批处理操作，请考虑 StatelessSession。

还要检查 NHibernate + Log4Net 的日志记录配置。日志记录越详细，NH 的响应速度就越慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T22:06:41.353

您不应该在每次更改数据时刷新会话。您应该让 NHibernate 缓冲更新并刷新批量更改。否则，他们会进行flush隐式操作，而您不必担心。

# iphone - 直接链接到本机 Facebook 应用程序中的页面 (iOS6)

> ID：13222898
> 
> 赞同：0
> 
> 时间：2012-11-04T21:03:07.607
> 
> 标签：iphone, ios, facebook, facebook-graph-api, ios6

在 iOS 5 中，您可以通过在 Safari [1] 中访问 fb://page/585828424 在本机应用程序中打开 Facebook 页面

这似乎不适用于 iOS6 Facebook 应用程序（在 iPhone 5 上的应用程序 v.47423 上进行测试）。

是否有解决方法或直接链接只是一个已退役的功能？

===

[1][在 iOS 上通过原生 Facebook 应用打开 Facebook 链接](https://stackoverflow.com/questions/10416338/open-a-facebook-link-by-native-facebook-app-on-ios)

此外，如果它有帮助，[这里是 iOS 5 中使用 fb://something 可能实现的列表](http://wiki.akosma.com/IPhone_URL_Schemes#Facebook)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:52:37.840

它已更改为个人资料，即使 FB 页面不是个人资料。

```
fb://profile/[your id] 
```

将链接中的替换为`page`，`profile`您应该一切顺利。

# .net - 将批处理转换为 VBS

> ID：13222899
> 
> 赞同：2
> 
> 时间：2012-11-04T21:03:14.427
> 
> 标签：.net, vb.net, batch-file, vbscript

嘿，我一直在尝试制作一个批处理脚本来实现到我的 VB.NET 应用程序中。我的应用程序所做的是检查是否有新版本可用，如果有，它将下载到应用程序数据文件中。然后它创建一个批处理脚本，运行它并自行关闭。

批处理脚本从这里获取更新的版本，获取并替换过时的版本。批处理脚本将运行更新版本（因为它已被移动，它将与过时版本位于同一目录中）并运行它。然后批处理文件将自毁。我试过这样做，但它所做的只是运行新版本，就是这样。它甚至没有自毁？这是我的批处理脚本：

```
@echo off
Type "file"
ping -n 10 localhost >nul 2>&1
xcopy /y "C:\Documents and Settings\Mumit\Application Data\Icarus" "C:\Documents and           Settings\Mumit\Desktop\Icarus\Icarus\Icarus\bin\Debug\Icarus"
start /d "C:\Documents and Settings\Mumit\Desktop\Icarus\Icarus\Icarus\bin\Debug" Icarus
DEL"file"
DEL %0
EXIT 
```

如您所见，它只有几行。谁能帮我把它移植到 VBS 中？我会很感激。

这就是我在 .NET 中编写它的方式：

```
 Dim s As New Text.StringBuilder
            s.Append("@echo off" + Environment.NewLine + "Type " + ChrW(34) + "file" + ChrW(34) +
                  Environment.NewLine + "ping -n 10 localhost >nul 2>&1" +
                  Environment.NewLine + "xcopy /y " + File2 + " " + File1 +
                  Environment.NewLine + "start /d " + ChrW(34) + Splitter(IO.Path.GetDirectoryName(CStr(Splitter(File1)))) + ChrW(34) + " " + IO.Path.GetFileName(CStr(Splitter(File1))) +
                  Environment.NewLine + "DEL" + ChrW(34) + "file" + ChrW(34) +
                  Environment.NewLine + "DEL %0" +
                  Environment.NewLine + "EXIT") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:40:38.903

如果您已经使用.NET - 并让它执行创建一个批处理......您也可以，只做批处理。如果您将它用作能够进行传统文件复制的网关......那么您做错了。

使用以下命令代替批处理命令：

```
System.IO.File.Copy(SourceFile, DestinationFolder, true); 
```

这将覆盖现有文件并完成。

注意用于复制的 Powershell 脚本：

```
Copy-Item c:\scripts\test.txt c:\test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T03:30:32.720

这基本上是一个 Windows 操作系统问题。在其他部署方法不适合选择的一些非常自定义的场景中进行部署之前，我遇到了这个问题。

您不能删除正在使用的文件：**TRUE**

您不能重命名正在使用的文件：**FALSE**

**您可以重命名正在运行和使用文件***的 .NET EXE 使用的任何 EXE 或 DLL文件（可能在许多其他场景中）*****

 **你能做的就是这个。

1) 使用一些常见但可检测的前缀或后缀重命名程序文件夹中的所有文件。例如“ShadowCopy_TIMESTAMP_ORIGINALFILE.EXT”，您使用时间戳来确保文件名的唯一性。

2）将所有新文件复制到目录中，因为它们已重命名，所以不会发生冲突。

3) 使用刚刚创建的新 EXE 重新启动您的应用程序。

4) 在应用程序启动时，在后台线程中运行一个例程，等待几秒钟并删除所有具有“ **ShadowCopy_*** ”模式的文件，以执行不需要的文件的清理。

*（您可以直接在 .NET 应用程序中执行此操作，或者使用其他更易于处理文件的语言（例如 VBS 脚本）执行此操作）*

我将这种方法用于服务器场景，在该场景中，同一 EXE 的多个副本始终在不同时间产生，有些运行时间长达 24 小时。我无法杀死生成的副本，因为它会阻止它完成工作，但我希望新代码适用于所有新运行的实例。在这种情况下，旧文件的“删除”需要容错，因为许多重命名的文件仍在使用中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:21:01.580

```
using System.IO;

// C# (Copy Files)
File.Copy(File_From, File_To); 
```

或者

```
// C# (Move Files)
File.Move(File_From, File_To); 
```

这是一个可重复的功能：

```
Using System.IO;

Public Class FileOperation
{
    public void MoveFile(from_file, to_file)
    {
        try
        {
            System.IO.File.Move(from_file, to_file);
        }
        catch(Exception ex)
        {
            string message = "Error In Move";
            debug(ex, message);
        }
    }

    public void CopyFile(from_file, to_file)
    {
        try 
        {
            System.IO.File.Copy(from_file, to_file);
        }
        catch(Exception ex)
        {
             string message = "Error In Copy";
             debug(ex, message);
        }
    }

    public void DeleteFile(delete_file)
    {
        try
        {
             System.IO.File.Delete(delete_file);
        }
        catch(Exception ex)
        {
            string message = "Error In Delete";
            debug(ex, message);
        }
    } 

    public void debug(Exception ex, string message)
    {
         Console.Write(message+/n+ex.data);
    }
} 
```

在您的应用调用中：

```
FileOperation.MoveFile("c:\movethisfile.txt","d:\movethisfile.txt"); 
```

或者至少与此类似。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T21:14:25.667

您可能想查看 ClickOnce 技术。它是专门为处理这个确切的要求而创建的：

[http://msdn.microsoft.com/en-us/library/s5tdc033(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/s5tdc033(v=vs.80).aspx)

它依赖于应用程序是使用 ClickOnce 安装程序创建的这一事实，但如果是，您可以这样做以获取应用程序的最新版本：

```
Sub UpdateApplication()
    If My.Application.IsNetworkDeployed Then
        My.Application.Deployment.Update()
    End If
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T21:15:04.880

您是否研究过 ClickOnce 部署？ [http://msdn.microsoft.com/en-us/library/t71a733d%28VS.80%29.aspx](http://msdn.microsoft.com/en-us/library/t71a733d%28VS.80%29.aspx)

它处理您试图在此处介绍的这些自动更新。请注意安全限制，但它可以为您节省大量时间。

现在，在我想手动处理的情况下，我通常会有一个单独的可执行文件来处理更新。这样，您可以关闭应用程序进行更新并启动更新程序。并且为了避免更新程序本身出现相同的问题（不是最新的），实际的应用程序将在执行之前更新更新程序。这样你就可以保证任何东西都可以更新，并且最终都是最新的。**

# c# - RESTful C# WCF 发布到函数

> ID：13222901
> 
> 赞同：0
> 
> 时间：2012-11-04T21:03:34.737
> 
> 标签：c#, wcf, rest

我使用 C# 创建了一个非常简单的 RESTful Web 服务。我有一个 ADO.NET 实体模型和一个 WCF 数据服务。这对于检索我的远程应用程序的信息非常有效。然而，我现在正在尝试创建一个 RESTful 函数来响应发布的数据并将其添加到我的数据库中。这是我迄今为止共享数据的代码：

```
namespace WcfService10
{
    public class GetInformation : DataService<DBLocalEntities>
    {
        // This method is called only once to initialize service-wide policies.
        public static void InitializeService(DataServiceConfiguration config)
        {
            // TODO: set rules to indicate which entity sets and service operations are visible, updatable, etc.
            // Examples:
            config.SetEntitySetAccessRule("users", EntitySetRights.AllRead);
            // config.SetServiceOperationAccessRule("MyServiceOperation", ServiceOperationRights.All);
            config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
        }
    }
} 
```

为了在我的宁静服务中添加一种处理发布信息的方式，我将如何处理？是像添加 WCF 服务一样简单，还是为了通过 REST 工作而有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:35:25.780

将您的实体访问规则设置修改为：

```
 config.SetEntitySetAccessRule("users", EntitySetRights.All); 
```

在您的客户端代码中，您可以像在 EF 中一样向实体添加项目。

```
DBLocalEntities client = new DBLocalEntities(URI);
User newUser = new User()
    {
        //Set values to properties
    }
client.AddTousers(newUser);
client.SaveChanges(); 
```

这将自动生成适当的 URI 来发布数据。它以 RESTful 方式完成，但 HTTP 方法是从我们那里抽象出来的。您还可以像 EF 一样修改和删除值。

# javascript - AJAX 请求代码在 Eclipse 中工作，但在浏览器中不工作

> ID：13222905
> 
> 赞同：0
> 
> 时间：2012-11-04T21:04:04.860
> 
> 标签：javascript, html, ajax, eclipse

我正在编写一个简单的 AJAX 代码，以此来学习基础知识并向自己介绍这些概念。以下代码获取位于服务器上的文本文件的内容并传递给一个变量，弹出一个警告框。

我的问题是代码在 Eclipse IDE“使用 Web 浏览器打开”中完美运行，但在其他任何地方都没有。

```
var http = createRequestObject();
var responseContent;

function createRequestObject() {
   var objAjax;
   var browser = navigator.appName;
   if(browser == "Microsoft Internet Explorer"){
       objAjax = new ActiveXObject("Microsoft.XMLHTTP");
   }else{
       objAjax = new XMLHttpRequest();
   }
   return objAjax;
 }

function getContent(name){
   http.open('get', name);
   http.onreadystatechange = function() {
       if (http.readyState == 4) {
          responseContent = http.responseText;
       }
   };
   http.send(null);
 }   

 $(document).ready(function() {
   getContent('newcontent.txt');
   alert(responseContent);
 }); 
```

有谁知道这可能是为什么？代码有问题吗？如果是这样，为什么它在日食中可以正常工作，而在其他地方却不行？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T22:45:02.800

总结为一个简短的答案：

在函数`XHR`中发送`getContent`并附加一个侦听器。

然后，`getContent`返回并执行警告未定义的变量`responseContent`。

在某个时候 XHR 被回答，`readyState`更改`4`和监听器被调用。

只有这样才能`responseContent`分配变量。

# dart - Dart 的 DirectoryEntry.getFile 带有 'options' 参数抛出 NoSuchMethodError

> ID：13222906
> 
> 赞同：3
> 
> 时间：2012-11-04T21:04:07.467
> 
> 标签：dart, html5-filesystem

我尝试使用一段 dart 代码创建一个带有 HTML5 文件 API 的文件。该代码是在一些飞镖幻灯片上找到的，稍作固定以便能够在 M1 下运行。我正在使用最新的 Dart SDK 0.2.1.2_r14167。代码很简单（我也尝试使用设置相同结果的最后两个参数（回调）来调用它）。

```
import 'dart:html';

void main() {
  window.webkitRequestFileSystem(LocalWindow.TEMPORARY, 50*1024*1024, (fs) {
    fs.root.getFile('log.txt', {"create": true}, null, null);
  });
} 
```

它抛出：

> 异常：NoSuchMethodError：传递给名为“getFile”的方法的参数数量不正确接收方：“_DirectoryEntryImpl@0x33cc944a”的实例尝试调用：getFile（“log.txt”，“LinkedHashMapImplementation”的实例，null，null）找到：getFile（路径, 选项, successCallback, errorCallback) 堆栈跟踪: #0 Object.noSuchMethod (dart:core-patch:772:3)

我做错了什么还是SDK坏了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:39:11.653

是的，你做的基本上是错误的，但我不会责怪你，因为即使 IDE 似乎也是按照你的方式做的！

以下是如何正确执行此操作：

```
import 'dart:html';

void main() {
  window.webkitRequestFileSystem(LocalWindow.TEMPORARY, 50*1024*1024, (DOMFileSystem fs) {
    fs.root.getFile('log.txt', options: {'create': true}, successCallback: (FileEntry e) {
      print(e.fullPath);
    });
  });
} 
```

它使用[命名参数](http://www.dartlang.org/docs/dart-up-and-running/ch02.html#functions-optional-named-parameters)，签名为`getFile`：

```
void getFile(String path, {Map options, EntryCallback successCallback, ErrorCallback errorCallback}); 
```

因此，如果您仔细看，第一个参数是强制性的，但其余的不是，实际上可以按任何顺序指定，只要您按名称指定它们即可。

如果您仍然感到困惑，请阅读[命名参数](http://www.dartlang.org/docs/dart-up-and-running/ch02.html#functions-optional-named-parameters)。

# php - 用php显示多个搜索结果

> ID：13222912
> 
> 赞同：0
> 
> 时间：2012-11-04T21:04:38.360
> 
> 标签：php, mysql, search

目前我的搜索脚本有效，但它没有做我想做的事。目前它只返回一个搜索结果，即使一个搜索项目应该显示大约 20 个。我试图弄清楚如何让脚本返回那些应该显示的缺失结果。所以也许这里的专家可以提供帮助:)

```
include('data.php');
    //Database Connection
$con=@mysql_connect("$ip", "$user", "$pass")
            or die(mysql_error());

//Select Database
$dbcon=@mysql_select_db($db, $con)
            or die(mysql_error());

$search = $_POST['search'];

$sql = mysql_query("select guid, name, staffmember, dateposted, id, admin_note from $whitelist where guid like '%$search%' or name like '%$search%' or staffmember like '%$search%' or dateposted like '%$search%' or id like '%$search%' or admin_note like '%$search%'");

while ($row = mysql_fetch_array($sql)) {
    //Username
    $name = $row['name'];
    //GUID
    $guid = $row['guid'];
    //Staff Member Who Submitted
    $staff = $row['staffmember'];
    //ID
    $id = $row['id'];
    //Date Posted
    $date = $row['dateposted'];
    //Note From Admin
    $admin = $row['admin_note'];
    }
    ?>
    <html>
    <body>
    <table border="0" width="100%" cellpadding="0" cellspacing="0" id="product-table">
                <tr>
                    <!--<th class="table-header-check"><a id="toggle-all" ></a> </th>-->
                    <th class="table-header-repeat line-left minwidth-1"><a href="">ID</a>  </th>
                    <th class="table-header-repeat line-left minwidth-1"><a href="">GUID</a></th>
                    <th class="table-header-repeat line-left"><a href="">Username</a></th>
                    <th class="table-header-repeat line-left"><a href="">Admin Note</a></th>
                    <th class="table-header-repeat line-left"><a href="">Staff Member</a></th>
                    <th class="table-header-repeat line-left"><a href="">Date Posted</a></th>
                    <th class="table-header-options line-left"><a href="">Options</a></th>

                </tr>
                <tr>

                    <td><?php echo "$id"; ?></td>
                    <td><?php echo "$guid"; ?></td>
                    <td><?php echo "$name"; ?></td>
                    <td><?php echo "$admin"; ?></td>
                    <td><?php echo "$staff"; ?></td>
                    <td><?php echo "$date"; ?></td>
                    <td class="options-width">
                    <?php
                 echo '<a href="edit.php?id=' . $row['id'] . '" title="Edit" class="icon-1 info-tooltip"></a>';
                echo '<a href="delete.php?id=' . $row['id'] . '" title="Edit" class="icon-2 info-tooltip"></a>'; 
                ?>

                    </td>
                </tr>

                </table>
                </body>
                </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:06:37.963

```
while ($row = mysql_fetch_array($sql)) {
    //Username
    $name = $row['name'];
    //GUID
    $guid = $row['guid'];
    //Staff Member Who Submitted
    $staff = $row['staffmember'];
    //ID
    $id = $row['id'];
    //Date Posted
    $date = $row['dateposted'];
    //Note From Admin
    $admin = $row['admin_note'];
    } 
```

你在这里做的是错误的。在循环的每次迭代中，变量都被重新定义，它们的旧值被删除并被新值覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:08:02.353

您需要在“while ($row = mysql_fetch_array($sql))”循环中输出数据。就像现在一样，它获取的每个新行都会覆盖您的旧值。

在这种情况下，您的代码的结构必须像

```
 print out table header
 while ($row = mysql_fetch_array($sql)) {
    print out table row
 }
 print out what comes after table 
```

IE

```
include('data.php');
//Database Connection
$con=@mysql_connect("$ip", "$user", "$pass")
        or die(mysql_error());

//Select Database
$dbcon=@mysql_select_db($db, $con)
        or die(mysql_error());

$search = $_POST['search'];

$sql = mysql_query("select guid, name, staffmember, dateposted, id, admin_note from $whitelist where guid like '%$search%' or name like '%$search%' or staffmember like '%$search%' or dateposted like '%$search%' or id like '%$search%' or admin_note like '%$search%'");?>

<html>
<body>
<table border="0" width="100%" cellpadding="0" cellspacing="0" id="product-table">
            <tr>
                <!--<th class="table-header-check"><a id="toggle-all" ></a> </th>-->
                <th class="table-header-repeat line-left minwidth-1"><a href="">ID</a>  </th>
                <th class="table-header-repeat line-left minwidth-1"><a href="">GUID</a></th>
                <th class="table-header-repeat line-left"><a href="">Username</a></th>
                <th class="table-header-repeat line-left"><a href="">Admin Note</a></th>
                <th class="table-header-repeat line-left"><a href="">Staff Member</a></th>
                <th class="table-header-repeat line-left"><a href="">Date Posted</a></th>
                <th class="table-header-options line-left"><a href="">Options</a></th>

            </tr>

<?php
while ($row = mysql_fetch_array($sql)) {
//Username
$name = $row['name'];
//GUID
$guid = $row['guid'];
//Staff Member Who Submitted
$staff = $row['staffmember'];
//ID
$id = $row['id'];
//Date Posted
$date = $row['dateposted'];
//Note From Admin
$admin = $row['admin_note'];
?>
            <tr>

                <td><?php echo "$id"; ?></td>
                <td><?php echo "$guid"; ?></td>
                <td><?php echo "$name"; ?></td>
                <td><?php echo "$admin"; ?></td>
                <td><?php echo "$staff"; ?></td>
                <td><?php echo "$date"; ?></td>
                <td class="options-width">
                <?php
 }

             echo '<a href="edit.php?id=' . $row['id'] . '" title="Edit" class="icon-1 info-tooltip"></a>';
            echo '<a href="delete.php?id=' . $row['id'] . '" title="Edit" class="icon-2 info-tooltip"></a>'; 
            ?>

                </td>
            </tr>

            </table>
            </body>
            </html> 
```

（为了编写好的和安全的代码，应该改变一些东西，但是为了让你开始，这应该可以）

# javascript - 工具提示的 Imagemapster 重新定位

> ID：13222916
> 
> 赞同：1
> 
> 时间：2012-11-04T21:05:23.050
> 
> 标签：javascript, jquery, html, css

基本上，我一直在图像上测试 ImageMapster 插件。但是，我希望每个区域标签的工具提示（或信息面板）彼此相邻。> [http://jsfiddle.net/jagmitg/eQCL6/](http://jsfiddle.net/jagmitg/eQCL6/)

目前，关于何时将鼠标悬停在黑色图像上的信息位于每个区域标签的左侧中间。无论如何我可以移动每个区域面板旁边的每个框。

我尝试实现以下[http://jsfiddle.net/sb9j7/](http://jsfiddle.net/sb9j7/)（请将鼠标悬停在青椒酱上）。这是我尝试过的：

```
image.mapster('set_options', { 
   areas: [{
     key: "dip",
     toolTip: newToolTip
   }]
}); 
```

有人可以帮我实现工具提示还是根据他们的区域标签移动信息框。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T23:14:30.573

你可以试试这个其他代码[http://jsfiddle.net/gCTcF/62/](http://jsfiddle.net/gCTcF/62/) 如果你用透明 png 替换这两个图像并用 css z-depht 将一个放在另一个上，你可以实现它。（它来自插件作者的另一个例子）

```
 onMouseover: function (data) {
                inArea = true;
                $('#beatles-caption-header').text($(this).attr("alt"));
                $('#beatles-caption').show();
            },
            onMouseout: function (data) {
                inArea = false;
                $('#beatles-caption').hide();
            } 
```

# iphone - 逐帧HTTP视频流

> ID：13222920
> 
> 赞同：0
> 
> 时间：2012-11-04T21:05:46.427
> 
> 标签：iphone, objective-c, ios, ipad, ios5

我有 HTTP 视频流，所以我想逐帧接收它。我见过这个 AVCaptureSessionDelegate 方法，但这仅适用于相机视频：

```
 - (void)captureOutput:(AVCaptureOutput *)captureOutput 
    didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
   fromConnection:(AVCaptureConnection *)connection 
    { 
    } 
```

我也读过 iFrameExtractor 但这是视频文件的解决方案，而不是流。有没有关于这个要求的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T18:14:41.637

我知道你可以从 iPhone 相机拍摄的视频中获得单个快照，但我认为这不是你想要的。您可以像 iframeextractor 一样使用 ffmpeg，因为它对文件同样有效。早在 2010 年，我们正在开发一款可以播放 mpeg、avi、divx、xvid 和许多其他格式的应用程序。所以你问的当然是可能的。

# python - 如何在 Flask 中使用 .jhtml 扩展名在模板中启用自动转义？

> ID：13222925
> 
> 赞同：4
> 
> 时间：2012-11-04T21:06:31.057
> 
> 标签：python, templates, flask, jinja2

[烧瓶文档状态](http://flask.pocoo.org/docs/templating/#jinja-setup)：

> 为所有以 .html、.htm、.xml 和 .xhtml 结尾的模板启用自动转义

如何为以 .jhtml 扩展名结尾的模板启用自动转义？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T21:35:47.543

看起来您可以在创建应用程序时使用“自动转义”选项设置文件扩展名。看看[https://github.com/mitsuhiko/flask/blob/master/flask/app.py上的 create_jinja_environment() 方法](https://github.com/mitsuhiko/flask/blob/master/flask/app.py)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T13:56:24.177

感谢[@Cagez 的回答](https://stackoverflow.com/a/13223175/1944)，我能够提出一个强大的（和推荐的）解决方案。

根据[Flask 邮件列表上的帖子](http://flask.pocoo.org/mailinglist/archive/2011/1/29/select-jinja-autoescape/#f101cd7788e8dfa062ed32041eb1bc67)，这样做的方法是覆盖`flask.Flask.select_jinja_autoescape()`。该帖子中的链接片段演示了如何[覆盖自动转义的模板](http://flask.pocoo.org/snippets/41/)并不太有效，所以我想出了以下内容，它确实有效：

```
class JHtmlEscapingFlask(Flask):

    def select_jinja_autoescape(self, filename):
        if filename is None:
            return False
        if filename.endswith('.jhtml'):
            return True
        return Flask.select_jinja_autoescape(self, filename)

app = JHtmlEscapingFlask(__name__) 
```

我把它放在我的主要 Flask 应用程序文件的顶部，替换了通常的`app = Flask(__name__)`

# java - 如何在android上移动球

> ID：13222926
> 
> 赞同：1
> 
> 时间：2012-11-04T21:06:35.780
> 
> 标签：java, android

Android没有主循环，但我在打砖块游戏测试中有一个球，它需要每100毫秒改变一次位置。

我尝试使用 MainThread 库，但仍然无法正常工作。

如果我有任何可能的方法来覆盖该功能`onRunning()`并将其用于检查屏幕是否被触摸并移动球会很棒。

但是考虑到我无法更改`onRunning()`函数，我可以做些什么来添加一个将我的球移动到主游戏循环的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:13:03.063

您可以创建另一个线程，它将与您的 Main/Gui 线程异步运行

```
final boolean shouldRun = true;

Thread t = new Thread(){
    public void run(){
        while (shouldRun){
            //do what ever you need
            try{
                Thread.sleep(100); //sleep for 100ms
            } catch (Exception e) {

            }
         }
    }
 };

shouldRun = true;
t.start(); 
```

当你完成

```
shouldRun = false;
try { 
    t.join();
} catch (Exception e) { } 
```

请注意，这不是最优雅的解决方案，您应该创建一个类来处理一个线程上的游戏逻辑和另一个线程上的绘图。

此外，当您的活动暂停时，您应该暂停逻辑游戏和绘图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:15:27.633

> 据我所知，android没有主循环

谁说的？粗略的例子：

```
public class MainLoop extends Thread {
   boolean isRunning;

   public void terminate() {
    isRunning=false;
   }

   public void run() {
      isRunning=true;
      while (isRunning) {          
      //move ball
      try { sleep(100);
      ... 
```

您还需要实施 deltatime 测量和正确的睡眠时间值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:12:05.153

您只需根据需要创建胎面并重新绘制。

这是一个例子：http: [//jmsliu.com/199/android-canvas-example.html](http://jmsliu.com/199/android-canvas-example.html)

对于基本动画，您不需要使用任何库。但是，如果您想开发游戏，则应考虑使用游戏引擎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T21:35:45.670

您应该使用 SurfaceView，它允许您从自己的线程在画布上绘制，您可以在其中控制渲染的频率。

您可能想查看[这篇文章](https://stackoverflow.com/questions/5235493/surfaceview-sample-code)以了解有关 SurfaceView 用法的讨论。

另外，如果您想直接转到示例，请查看[此链接](http://www.droidnova.com/playing-with-graphics-in-android-part-ii,160.html)

# caching - 如何使用微缓存

> ID：13222931
> 
> 赞同：0
> 
> 时间：2012-11-04T21:06:53.253
> 
> 标签：caching

我在微缓存和加速网站上找到了这个链接，但老实说我不明白。有人可以解释其中的代码到底在哪里吗

[http://fennb.com/microcaching-speed-your-app-up-250x-with-no-n](http://fennb.com/microcaching-speed-your-app-up-250x-with-no-n)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:49:57.993

在考虑对站点进行任何类型的性能优化之前，您需要首先了解慢速部分在哪里。否则，您将优化不需要优化的部分。这种技术称为“性能分析”。

此外，我鼓励您阅读有关反向代理和缓存的通用文章。阅读有关清漆的信息；装甲运兵车；内存缓存。这将使您对问题空间有一些高级别的理解。只有这样你才应该去实施一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:44:15.433

看起来这一切都与设置缓存您的网站的代理有关。那里的代码是 nginx 的示例配置，nginx 是一个以其出色的速度而闻名的 Web 服务器。

# python - 在 Python 中使用 DictReader 解析 CSV

> ID：13222933
> 
> 赞同：2
> 
> 时间：2012-11-04T21:07:07.527
> 
> 标签：python, csv, import-from-csv

我有一个包含许多列的大型 CSV 文件，如下所示：

```
id, col1, col2, col3, col4, col5
1, a, b, 2, d, e
2, b, c, 4, e, f
3, c, d, 6, f, g 
```

我希望能够创建一个只使用某些列的字典。例如，字典将具有 id 号、col2 和 col3。此外，它应该只存储 col2 中具有最高 10 个数字的行。这是我的代码：

```
import csv 
reader = csv.DictReader(open('SNPs.csv', newline=''), delimiter=',', quotechar='"') 
```

但我不知道如何告诉它忽略某些列，而且我认为我不能使用 max() 返回多个值。

```
max(2, 4) returns 4\. 
```

**编辑** 我尝试使用丹尼尔的代码，但由于某种原因，排序功能无法正常工作。（我还需要使用反向排序而不是排序）。它只输出四个不同的键，此外，它们实际上并没有按数字降序排序。它还将标头作为值之一返回。

```
import csv
f = open('SNPs.csv', "rU")
reader = csv.reader(f)
output = [row for row in reader]
output.sort(key=lambda x: x[32], reverse=True)
print dict((row[10], (row[11], row[8], row[32])) for row in output[:10]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:39:58.450

`col2`没有任何数字。我假设你的意思是`col3`.

在你全部读完之前，你无法分辨出 col3 中哪十个最高的数字。因此，既然您无论如何都会这样做，那么您不妨阅读所有内容，然后提取前十名。所以你可以做这样的事情：

```
output = []
for row in reader:
    output.append(dict(k, v) for k, v in row if k in ('id', 'col2', 'col3'))
output.sort(key=lambda x: x['col3'])
return output[:10] 
```

**编辑**现在我看到了你想要的输出，你想要的东西与我想象的完全不同。实际上 DictReader 在这里完全没有意义，所以我会用普通的 Reader 重写。

```
f = open('SNPs.csv')
reader = csv.Reader(f, delimiter=',', quotechar='"')
output = [row for row in reader]
output.sort(key=lambda x: x[3])
return dict((row[0], (row[3], row[4])) for row in output[:10]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:18:55.413

也许这有效：

```
f = open("SNPs.csv", "rU")
reader = csv.reader(f)
data = [row for row in reader] #This only works if you have enough memory to do so
set_highest_ten = set(row[32] for row in sorted(
                                      data, key = lambda x: x[32], reverse = True)[0:10])
d = dict((row[10], (row[11], row[8], row[32])) for row in data
                                                       if row[32] in set_highest_ten) 
```

我已经用少量数据进行了测试，看起来不错，但我不确定这是否正是您要寻找的。

# arrays - 2个不同长度的排序数组的中位数

> ID：13222934
> 
> 赞同：6
> 
> 时间：2012-11-04T21:07:13.610
> 
> 标签：arrays, algorithm, median

如何找到长度分别为 m 和 n 的 2 个排序数组 A 和 B 的中位数。我已经搜索过了，但大多数算法都假设两个数组的大小相同。我想知道如果 m != n 考虑例如 A={1, 3, 5, 7, 11, 15} 其中 m = 6, B={2, 4, 8, 12, 14}，我们如何找到中位数其中 n = 5，中位数为 7

任何帮助表示赞赏。我正在准备面试，我现在正在努力解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-01-12T09:05:44.437

这是查找两个长度不等的排序数组的中位数的JAVA代码

```
package FindMedianBetween2SortedArraysOfUnequalLength;

import java.util.Arrays;
import java.util.Scanner;

public class UsingKthSmallestElementLogic {

public static void main(String[] args) {
    Scanner in = new Scanner(System.in);
    try{
        System.out.println("Enter the number of elements in the first SORTED array");
        int n = in.nextInt();
        int[] array1 = new int[n];
        System.out.println("Enter the elements of the first SORTED array");
        for(int i=0;i<n;i++)
            array1[i]=in.nextInt();
        System.out.println("Enter the number of elements in the second SORTED array");
        int m = in.nextInt();
        int[] array2 = new int[m];
        System.out.println("Enter the elements of the second SORTED array");
        for(int i=0;i<m;i++)
            array2[i]=in.nextInt();
        System.out.println("Median of the two SORTED arrays is: "+findMedian(array1,array2,array1.length,array2.length));
    }
    finally{
        in.close();
    }
}
private static int findMedian(int[] a, int[] b,
        int aLength, int bLength) { 

    int left = (aLength+bLength+1)>>1;
    int right = (aLength+bLength+2)>>1;
    return ((findKthSmallestElement(a,b,a.length,b.length,left)+findKthSmallestElement(a,b,a.length,b.length,right))/2);
}
private static int findKthSmallestElement(int[] a, int[] b,
        int aLength, int bLength, int k) {                    // All the 5 parameters passed are VERY VERY IMP

    /* to maintain uniformity, we will assume that size_a is smaller than size_b
    else we will swap array in call :) */
    if(aLength>bLength)
        return findKthSmallestElement(b, a, bLength, aLength, k);

    /* We have TWO BASE CASES
     * Now case when size of smaller array is 0 i.e there is no elemt in one array*/
    //BASE CASE 1\. If the smallest array length is 0
    if(aLength == 0 && bLength > 0)
            return b[k-1]; // due to zero based index

    /* case where k==1 that means we have hit limit */
    //BASE CASE 2\. If k==1
    if(k==1)
            return Math.min(a[0], b[0]);

    /* Now the divide and conquer part */
    int i =  Math.min(aLength, k/2) ; // k should be less than the size of array  
    int j =  Math.min(bLength, k/2) ; // k should be less than the size of array  

    if(a[i-1] > b[j-1])
            // Now we need to find only K-j th element
            return findKthSmallestElement(a, Arrays.copyOfRange(b, j, b.length), a.length, b.length -j, k-j);
    else
            return findKthSmallestElement(Arrays.copyOfRange(a, i, a.length), b, a.length-i, b.length,  k-i);
}
}
/*
Analysis:
    Time Complexity = O(log(n+m))
    Space Complexity = O(1)*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T21:47:25.253

对中位数有序元素的线性搜索将是 O(m + n) 且具有恒定空间。这不是最佳的，但在采访中产生是现实的。

```
numElements = arr1.length + arr2.length
elementsToInspect = floor(numElements / 2)
i1 = 0
i2 = 0

if elementsToInspect == 0
    return arr1[i1]

while (1) {
    if (arr1[i1] < arr2[i2]) {
        i1++
        elementsToInspect--
        if elementsToInspect == 0
            return arr1[i1]
    } else {
        i2++
        elementsToInspect--
        if elementsToInspect == 0
            return arr2[i2]
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-27T13:53:31.890

```
A simple O(log(m + n)) solution: watch video https://www.youtube.com/watch?v=LPFhl65R7ww   

 class Solution {
        public double findMedianSortedArrays(int[] arr1, int[] arr2) {
                    if(arr1 == null && arr2 == null) {
                return -1;
            }
            if(arr1.length == 0 && arr2.length == 0) {
                return -1;
            }

            int x = arr1.length;
            int y = arr2.length;

            if(x > y) {
                return findMedianSortedArrays(arr2, arr1);
            }
            int low = 0;
            int high = x;
            while (low <= high) {
                int partitionX = (low + high) / 2;
                int partitionY = (x + y + 1) / 2 - partitionX;

                int maxX = partitionX == 0 ? Integer.MIN_VALUE : arr1[partitionX - 1];
                int minX = partitionX == x ? Integer.MAX_VALUE : arr1[partitionX];

                int maxY = partitionY == 0 ? Integer.MIN_VALUE : arr2[partitionY - 1];
                int minY = partitionY == y ? Integer.MAX_VALUE : arr2[partitionY];

                if(maxX <= minY && maxY <= minX) {
                    if((x + y)%2 == 0) {
                        return (Math.max(maxX, maxY) + Math.min(minX, minY)) / 2.0;
                    } else {
                        return Math.max(maxX, maxY);
                    }
                } else if(maxX > minY) {
                    high = partitionX - 1;
                } else {
                    low = partitionX +  1;
                }
            }
            return  -1;
        }
    } 
```

# debugging - 使用 gdb 进行调试

> ID：13222935
> 
> 赞同：0
> 
> 时间：2012-11-04T21:07:41.813
> 
> 标签：debugging, gdb

任何人都可以提供有关 gdb 调试可执行文件的教程。
注意：我要求使用不是来自代码的汇编代码调试可执行文件（代码文件不在我身边）。
这在
破解密码
获取字符串 时非常有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:09:46.193

这与使用源代码调试二进制文件相同，只是您将无法在特定的行号处中断，并且如果在没有调试符号的情况下编译它，那么您就不走运了。

# wcf - 在客户端生成 wcf 端点的服务引用

> ID：13222936
> 
> 赞同：1
> 
> 时间：2012-11-04T21:07:46.420
> 
> 标签：wcf, service, soa, svcutil.exe, service-reference

我目前正在使用 WCF 服务。我正在编写客户端（消费应用程序）和主机（服务应用程序）。

在客户端上工作，我正在为它编写代码，我有 3 个选项。

*   将服务引用添加到客户端中的端点
*   使用 svc util 生成服务引用
*   编写 Channel 和 Service 引用等，并在主机和客户端之间共享一个包含请求和响应对象的库

我目前倾向于使用 svc util 的选项 2。我过去曾使用类似于此的命令完成此操作：

```
svcutil /t:code http://localhost.myapp.com/MyService.svc /out:"..\Folder\MyServiceReference.cs" /n:*,MyNamespace.MyApp.MyService/UseSerializerForFaults /ct:System.Collections.Generic.List`1 
```

从上面，它生成一个类的服务引用。我希望能够对此进行修改，以便将服务引用生成中的每个类添加到单独的类中。例如，所有请求对象并生成到 Request 文件夹中，响应对象在 Response 文件夹中，Channel 到 Channels 文件夹中，以及所有其他实体在另一个文件夹中。

首先，反馈我对第二种选择的选择？此外，是否可以使用 svcutil 生成如上所述的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:13:46.803

我通常使用 svcutil，因为它可以让我更好地控制输出。但是，据我所知，它只能生成一个文件。

话虽如此，我通常将我的 svcutil 调用包装在 PowerShell 脚本中，以便我可以以可重复的方式清理/修改生成的代码。

类似的方法可以在这里为您工作。我从未尝试过使用 PowerShell 拆分文件，但我快速浏览了一下，网上有一些示例。例如： [如何使用 PowerShell 拆分文本文件？](https://stackoverflow.com/questions/1001776/how-can-i-split-a-text-file-using-powershell)

# wpf - DevExpress WinForms - 在 WPF 中寻找类似 Grid 的控件

> ID：13222941
> 
> 赞同：0
> 
> 时间：2012-11-04T21:08:37.857
> 
> 标签：wpf, grid, devexpress, controls

在用于 WinForms 的 DevExpress 控件中是否存在一些类似于 WPF 网格控件的网格控件？

我要求支持，但直到现在没有得到任何回应。

我需要以下功能 1\. 行和列 2\. RowSpan、ColumnSpan 3\. 用子控件填充单元格 4\. 单元格内的拉伸和对齐功能 5\. DevExpress Skinnig 和主题

也许扩展一些类似的控制是一种选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T01:25:09.830

[XtraGrid](http://www.devexpress.com/products/net/controls/winforms/grid/) 将在 WinForm 中完成这些任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:10:01.133

您正在寻找[XtraLayout 控件](http://www.devexpress.com/products/net/controls/winforms/layout/)，尽管它的工作方式不同。

# objective-c - 使用浮点数表示货币值的结果不正确

> ID：13222945
> 
> 赞同：2
> 
> 时间：2012-11-04T21:09:06.230
> 
> 标签：objective-c, ios

如果我使用以下代码：

```
- (NSString*)formatToCurrency:(float)inFloat {
  NSNumberFormatter *currencyFormatter = [[[NSNumberFormatter alloc] init] autorelease];
  [currencyFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
  [currencyFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
  [currencyFormatter setMaximumFractionDigits:2];
  [currencyFormatter setLocale:[NSLocale currentLocale]];

  NSNumber *x = [NSNumber numberWithFloat:inFloat];
  return [NSString stringWithFormat:@"  %@", [currencyFormatter stringFromNumber:x]];
} 
```

然后在调用代码时传入 203500，我收到输出：$203,500.02。

我很想听听关于正在发生的事情的一些想法。

谢谢，

马特

编辑：当我用调试器查看它时，XCode 报告了 203500，但是当我将浮点数转换为 NSString 时，它也会显示 203500.018。这意味着问题出在浮点数中，而不是在 NSNumberFormatter 中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T21:20:47.430

您正在使用浮点数创建 NSNumber。浮点数总是会有舍入误差

[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

你应该熟悉[NSDecimals](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_DataTypes/Reference/reference.html#//apple_ref/doc/uid/20000018-BAJEJDDJ)和[NSDecimalNumbers](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/NumbersandValues/Articles/DecimalNumbers.html#//apple_ref/doc/uid/20000176-CJBCAGDI)

[Cocoa 是我的 GF：不要对 NSDecimalNumber 偷懒（像我一样）](http://www.cimgf.com/2008/04/23/cocoa-tutorial-dont-be-lazy-with-nsdecimalnumber-like-me/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:14:43.300

显然，我在这方面有很多东西要学。但冒着被进一步抨击的风险，我会报告一件对我有帮助的事情。

我有这个代码：

```
self.myDollarFormat.roundingIncrement = [NSNumber numberWithFloat:roundingInc];
return [self.myDollarFormat stringFromNumber:[NSNumber numberWithFloat: dollars]]; 
```

并发现 638198.2 的 roundingIncrement 为 0.1 产生 @"$638,198.21"。

我将代码更改为使用 double 而不是 float，然后得到了预期的结果。

```
self.myDollarFormat.roundingIncrement = [NSNumber numberWithDouble: roundingInc];
return [self.myDollarFormat stringFromNumber:[NSNumber numberWithDouble: dollars]]; 
```

我尊重那些了解更多的人，但我想我至少会提到这对我有用。祝你好运。

# ruby-on-rails - 如何将数据从 CSV 文件导入数据库？

> ID：13222947
> 
> 赞同：0
> 
> 时间：2012-11-04T21:09:29.857
> 
> 标签：ruby-on-rails, ruby, database, csv, import

我正在使用 Ruby 1.9.2、Ruby on Rails v3.2.2 gem 和 MySQL 数据库。我想将数据从包含世界城市的[CSV 文件导入数据库。](http://www.maxmind.com/download/worldcities/worldcitiespop.txt.gz)我认为这个过程应该通过运行 RoR 迁移来完成，但我不知道如何正确进行。

特别是，我不知道应该将 CSV 文件放在*哪里*（即与我的 RoR 应用程序相关的目录中）以及*如何*从我的迁移文件中访问该文件以便将数据添加到数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T21:35:03.143

我做了很多从 csv 文件到数据库的导入。我将 csv 文件放在 db 文件夹中。然后我创建 rake 任务，以便我可以简单地调用

```
$ rake db:import:whatever 
```

为了解析 csv 文件，我使用 csv 库 - 你必须设置 require 'csv'。导入器是 app/models 中的模型。以下是一些代码片段，它们显示了如何进行导入：

[https://gist.github.com/4013876](https://gist.github.com/4013876)

我希望这有助于开始......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:33:39.567

MYSQL 可以直接导入 CSV 文件。为此，您应该通过 SSH 登录到您的服务器（或以某种方式进入命令行）并调用以下命令：

```
$ mysql -u yourUserName -p
Enter password:
$ mysql> load data local infile 'c:\path_to_file\filename.csv' into table yourTableName character set utf8 fields terminated by ',' enclosed by '"' lines terminated by '\r\n' (field1, field2, field3); 
```

# java - OpenGL glTranslatef 和 glScalef

> ID：13222948
> 
> 赞同：0
> 
> 时间：2012-11-04T21:09:35.170
> 
> 标签：java, android, opengl-es

我正在尝试在我拥有的 OpenGL 应用程序中实现平移和捏合缩放功能。我可以通过一个简单的 相对轻松地实现平移功能`glTranslatef`，但使用该`glScalef`功能却困难得多。我有三个类，一个用于`GLSurfaceView`，一个用于`GLTriangle`，第三个（如下）用于`GLRenderer`，这是使用`glScalef`and的地方`glTranslatef`。

`GLRenderer`班级：

```
public class GLRendererEx implements Renderer, OnTouchListener {

    private GLTriangleEx tri;
    float ratio;
    float x = 0, y = 0;
    float dx = 0, dy = 0;
    float sx = 0, sy = 0;
    float tx = 0, ty = 0;
    float xtwo = 0, ytwo = 0;
    float sxtwo = 0, sytwo = 0;
    float screenX, screenY;
    float xscale = 1, yscale = 1;
    float xscaletwo = 1;
    float xscaletotal = 1, yscaletotal = 1;
    int NONE = 0, DRAG = 1, ZOOM = 2;
    int mode = NONE;
    int width, height;
    boolean touched = true;
    Display getOrient = getWindowManager().getDefaultDisplay();
    int orientation;

    public GLRendererEx() {
        tri = new GLTriangleEx();
        screenX = ourSurface.getWidth();
        screenY = ourSurface.getHeight();
        ourSurface.setOnTouchListener(this);
    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {
        gl.glDisable(GL10.GL_DITHER);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
        gl.glClearColor(0f, 0f, 0f, 1f);
        gl.glClearDepthf(1f);
        orientation = getOrient.getRotation();
    }

    @Override
    public void onDrawFrame(GL10 gl) {
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        GLU.gluLookAt(gl, 0, 0, -5, 0, 0, 0, 0, 2, 0);

        //warning - x is backwards
        gl.glTranslatef(tx, ty, 0);
        gl.glScalef(xscaletotal, yscaletotal, 1);
        tri.draw(gl);
    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        gl.glViewport(0, 0, width, height);
        ratio = ((float) width) / height;
        screenX = width;
        screenY = height;
        orientation = getOrient.getRotation();
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glFrustumf(-ratio, ratio, -1, 1, 1, 50);
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN: {
            event.getActionIndex();
            sx = x = event.getX(0);
            sy = y = event.getY(0);
            mode = DRAG;
            break;
        }
        case MotionEvent.ACTION_POINTER_DOWN: {
            event.getActionIndex();
            sxtwo = xtwo = event.getX(1);
            sytwo = ytwo = event.getY(1);
            mode = ZOOM;
            touched = true;
            break;
        }
        case MotionEvent.ACTION_MOVE: { 
            x = event.getX(0);
            y = event.getY(0);
            xtwo = event.getX(1);
            ytwo = event.getY(1);
            if (mode == ZOOM)
                midPoint(x, y, xtwo, ytwo);
            if (mode == DRAG) {
                dx = x - sx;
                dy = y - sy;
                dx *= -8;
                dy *= -8;
                if (orientation == Configuration.ORIENTATION_LANDSCAPE) 
                    dx *= 2;
                dx /= screenX;
                dy /= screenY;
                tx += dx;
                ty += dy;
                sx = x;
                sy = y;
            }
            break;
        }       
        case MotionEvent.ACTION_POINTER_UP: {
            mode = DRAG;
            break;
        }
        case MotionEvent.ACTION_UP: {
            mode = NONE;
            break;
        }
        }
        return true;
    }

    private float midPoint(float x, float y, float xtwo, float ytwo) {
        x -= xtwo;
        y -= ytwo;
        if (touched) {
            sxtwo = x;
            sytwo = y;
            xscaletwo = FloatMath.sqrt(sxtwo * sxtwo + sytwo * sytwo);
                            touched = false;
        }
                    xscale -= xscaletwo;
        xscale  = FloatMath.sqrt(x * x + y * y);
        xscaletotal += xscale;
        yscaletotal = xscaletotal;
        return xscale;
    }

} 
```

`x/y`'s 是坐标，`dx/dy`是坐标的变化，`sx/sy`'s 是起始坐标，`tx/ty`是坐标的总变化（用于平移），`xscale/yscale`'s 是用于计算缩放比例的浮点数，`xscaletotal/yscaletotal`是缩放比例的总变化，无拖动缩放和模式代表模式。

就目前而言，我可以通过拉开手指来放大，但捏也会放大而不是缩小。此外，变焦太敏感了。

我真的不知道如何从这里解决这个问题。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:10:43.933

看起来你的“中点”有一些工作要做。尝试做这样的事情：

```
float scale = 1.0; //factor used in glScalef
float previousPinchScale; //needed to remember from previous methode call
private float midPoint(float x, float y, float xtwo, float ytwo) {
    float currentPinchScale = FloatMath.sqrt((x-xTwo)*(x-xTwo) + (y-yTwo)*(y-yTwo)); //current distance between both "touches"
    if (touched) { //gesture just began:
        previousPinchScale = currentPinchScale; //Save relative information about touch positions
        touched = false;
    }
    else { //gesture in progress:
        /*
         At this point we have 2 values of "PinchScale" for this and previous "midPoint" method call.
         The factor of relative change in this distance should be applied to current scene scale:
         currentPinchScale/previousPinchScale is the "relative change", for instance if the distance between the 2 touches would be 10% this factor would return 1.1
         Since we have to consider that scene might already be zoomed you need to take previous scale and multiply it with this change..
         */
        scale *= currentPinchScale/previousPinchScale; //scale used in glScalef
        previousPinchScale = currentPinchScale; //remember the new position of "midPoint" call
    }
    return scale;
} 
```

# apache-flex - 如何访问项目渲染器中的父应用程序属性

> ID：13222949
> 
> 赞同：0
> 
> 时间：2012-11-04T21:09:34.273
> 
> 标签：apache-flex, custom-component, itemrenderer

我有一个在主应用程序中有 3 列的数据网格。在第三列中，我想使用项目渲染器，我想使用其中有两个组件的 hbox。一个是按钮，一个是标签。我在主应用程序中也有一个滑块。我想使用使用数据网格的滑块从主应用程序文件中更改 itemrenderer 按钮的 alpha。我可以使用数据属性访问项目渲染器中的数据提供者属性。但是如何访问父应用程序属性。为此，我尝试创建自定义数据网格并使用数据绑定传递滑块的值。但无法访问该属性。在我做同样事情的列表中，我可以使用项目渲染器的 listData 属性访问该属性，但在 datagrid 的情况下我不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:24:15.777

> 如何访问父应用程序属性

一般来说; 我建议你不要。itemRenderer 应该能够通过数据元素访问它需要的所有属性；这与dataProvider有关。

访问显示层次结构中较高的组件属性是封装的中断。

也就是说，有很多方法可以做到这一点。

要访问主应用程序，您可以使用[FlexGlobals.topLevelApplication](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/FlexGlobals.html#topLevelApplication)访问顶级应用程序。

您可以将滑块值存储为静态变量，并以这种方式从 itemRenderer 访问它。

您可以将滑块值存储在某个数据/模型对象中，并使用依赖注入框架（例如[Swiz](http://swizframework.org/)或[Robotlegs](http://www.robotlegs.org/examples/)）将该数据/模型对象注入您的 itemRenderer。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:10:03.197

如果要访问外部属性，可以在 itemRenderer 中使用**outerDocument**，例如：

//代码

```
 public var str:String = "Test";
        [Bindable] private var arr:Array = [
            {field:'ROW1'},
            {field:'ROW2'},
            {field:'ROW3'}                 
        ]; 
```

//MXML

```
<mx:DataGrid id="grid" width="100%" height="100%" dataProvider="{arr}">
    <mx:columns>
        <mx:DataGridColumn dataField="field">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:Label text="{data.field + ' ' + outerDocument.str}"/>
                </mx:Component> 
            </mx:itemRenderer>
        </mx:DataGridColumn>
    </mx:columns>
</mx:DataGrid> 
```

这个[URL](http://blog.flexexamples.com/2008/05/09/using-a-slider-control-as-a-datagrid-column-item-renderer-in-flex/) 显示了我所说的一个很好的例子。我希望它会有所帮助。

# mysql - 协助根据条件编写 mysql 查询

> ID：13222950
> 
> 赞同：1
> 
> 时间：2012-11-04T21:09:44.953
> 
> 标签：mysql

我正在尝试基于 if 语句编写 MySQL 语句。

这就是我想要做的：我需要查询来根据项目是否将在两周内到期或是否已经过期来收集行。

这是我到目前为止所拥有的：

```
select
  t_id,
  firstName, 
  lastName, 
  checkTime,
  due
from (checkOut join People)
where checkOut.p_id = People.p_id
order by due IF(DATE(NOW()-checkOut.due) <= 2 WEEK); 
```

MySQL 指出 IF 语句附近存在语法错误（我并不感到惊讶，因为我不熟悉在 MySQL 中编写条件语句）。

另一个问题是关于 MySQL 是否会产生一个负数的日期（即表明一个项目已过期）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:15:47.043

`IF`不能像你一样使用它。一种可移植的替代方法是将 a 放置`CASE`在条件匹配的位置`ORDER BY`分配 a ，如果不匹配则排序。`0``1``0`

```
select
  t_id,
  firstName, 
  lastName, 
  checkTime,
  due
from 
  checkOut 
  join People ON checkOut.p_id = People.p_id
order by 
  /* Use DATE_SUB() */
  /* This will sort those not yet past due ahead of those already past due. 
     If this is the opposite of what you want, switch the 0 and 1 */
  CASE WHEN DATE_SUB(CURDATE(), INTERVAL 2 WEEK) <= checkOut.due THEN 0 ELSE 1 END; 
```

`WHERE`请注意，我已通过将子句更改为子句，将您的隐式连接转换为显式连接`ON`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:16:10.537

我想你要找的是这个，

```
SELECT t_id, 
       firstname, 
       lastname, 
       checktime, 
       due 
FROM   checkout 
       JOIN people 
         ON checkout.p_id = people.p_id 
ORDER  BY CASE 
            WHEN ( Now() - INTERVAL 2 week ) <= checkout.due THEN 0 
            ELSE 1 
          END, 
          due 
```

# java - 在 Java 中同时使用 Observer 和 Observable 的模型是不好的设计吗？

> ID：13222954
> 
> 赞同：9
> 
> 时间：2012-11-04T21:10:02.037
> 
> 标签：java, model-view-controller

这个问题与 MVC（模型-视图-控制器）有关。我的模型当前使用 Java 中的 Observer / Observable 模式更改了我的视图：

```
public class Model extends Observable {
}

public class View implements Observer {

    @Override
    public void update(observable o, Object obj) {
        // ... update the view using the model.
    }

} 
```

这工作正常。但是，我的模型变得越来越复杂 - 它开始包含其他类的列表：

```
public class Model extends Observable {
    List<Person> people = new ArrayList<Person>();
}

public class Person {
    private String name = "";
    // ... getter / setter for name
} 
```

我的问题是：当一个人的名字改变时，我想更新监听包含那个人的模型的视图。我能想到的唯一方法是让 Model 实现一个 Observer 类并让 Person 扩展一个 Observable 类。然后，当 Person 发生变化时，他会通知他的观察者（包括父模型）。

但是，如果我的模型变得复杂，这似乎需要做很多工作。有没有更好的方法来“冒泡”对父模型的更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T21:21:12.717

首先，*通常*使用它是一个坏主意，`Observable`因为您需要扩展此类才能使用它。
无论如何，您所描述的是观察到的实体的聚合。
不要把简单的事情复杂化。使每个实体成为可观察的，并让它负责注册和通知。您不必*专门*包含一个名为`Model`聚合所有内容的类。打破你的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:35:03.060

您始终可以让您的子类[委托](http://en.wikipedia.org/wiki/Delegation_pattern)给`Observable`. [这里](https://stackoverflow.com/a/3072979/230513)提到了其他一些实现[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式的方法。

# android - 如何撤销我的应用从用户的 google gmail AccountManager.getAuthToken 获得的权限（

> ID：13222960
> 
> 赞同：8
> 
> 时间：2012-11-04T21:11:06.513
> 
> 标签：android, oauth, accountmanager

使用 Eclipse 创建了一个测试应用程序，以`authToken`从我的设备上的一个谷歌电子邮件帐户中获取。

执行此操作提示我使用允许访问对话框，我在其中按允许访问：

```
accountManager.getAuthToken(account,"oauth2:https://www.googleapis.com/auth/userinfo.profile", false, new GetAuthTokenCallback(), null); 
```

我想创建一个适用于 API8 及更高版本的选择器对话框，用户可以在其中选择他允许我访问的谷歌帐户。为此，我必须撤销再次查看屏幕的权限。

我应该在这个页面上看到我的测试应用程序吗？
[**授权访问您的 Google 帐户**](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en)

我已经在寻找一种方法来撤销权限并且非工作..
唯一工作就是创建一个新的应用程序项目。

**UPDATE 2013**
使用 Google Play 服务 GCM，这工作正常

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T09:15:13.567

关于“[授权访问您的 Google 帐户](https://accounts.google.com/b/0/IssuedAuthSubTokens?hl=en)”页面，您不会在那里看到您的应用，因为此权限是存储在手机数据库中的设备本地权限。

似乎不可能以简单的方式撤销此许可。我已经找到了几种能够再次触发对话的方法，但没有一个是理想的。在其中一些解决方案中，显示的对话框并不完全相同，但它可能足够接近测试目的，具体取决于您想要做什么：

*   将手机恢复出厂设置。
*   创建一个新的最小测试应用程序并将两个应用程序配置为[共享相同的 UID](https://stackoverflow.com/questions/9783765/what-is-shareduserid-in-androidhow-can-i-used-shareduserid)。这意味着两个应用程序将被授予相同的权限，并且将再次显示对话框以让用户也允许您的第二个应用程序访问。
*   为令牌类型添加额外的范围（例如将**oauth2：[https](https://www.googleapis.com/auth/userinfo.profile)** ://www.googleapis.com/auth/userinfo.profile 更改为**oauth2： https: [//www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile) [https:// www.googleapis.com/auth/userinfo.email](https://www.googleapis.com/auth/userinfo.email)**）。由于您要求其他权限，因此将再次显示该对话框。
*   鉴于您对手机具有 root 访问权限，请`grants`从数据库 /data/system/accounts.db 中删除该表，该表是存储授予权限的位置，如[您如何强制 AccountManager 在用户之后显示“访问请求”屏幕中所述已经允许访问？](https://stackoverflow.com/questions/6852256/how-do-you-force-accountmanager-to-show-the-access-request-screen-after-a-user/6852274#6852274)

在内部，该[`getAuthToken`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/accounts/AccountManagerService.java#1032)方法使用应用程序的 UID 跟踪是否已授予访问权限。因此，如果您能够以某种方式强制 Android 为您的应用程序提供新的 UID 或强制它清除给定授权的数据库，则应再次显示对话框。以下是一些其他人说对他们有用但对我不起作用的解决方案（可能取决于您使用的手机？）：

*   卸载应用程序并重新启动设备（如您所说）
*   删除并重新添加 google 帐户（在[Revoke account permission for an app](https://stackoverflow.com/questions/5805657/revoke-account-permission-for-an-app)中提到）
*   使用不同的证书签署应用程序（在[撤销应用程序的帐户权限中](https://stackoverflow.com/questions/5805657/revoke-account-permission-for-an-app)也提到过）

附带说明，[撤销访问 google auth 令牌的权限](https://groups.google.com/d/msg/android-developers/gOVZ0DF7ccg/RS5V5D23ewoJ)提到有用于撤销访问的[内部 Android 方法](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/accounts/AccountManagerService.java#2294)，但这些方法无法通过公共 API 访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T06:20:01.360

您必须考虑两种情况：

1.  服务器端授权
2.  Android Account Manager（设备端）授权

案例 1：Google 帐户的服务器端撤销可以在以下位置完成：[https ://accounts.google.com/IssuedAuthSubTokens](https://accounts.google.com/IssuedAuthSubTokens)

您只需使用相应的谷歌帐户登录并选择撤销应用程序/网站

案例 2：如果在您的 android 设备上显示类似以下内容的屏幕：“应用程序想要访问您的 Google 帐户....允许/拒绝？”那么这是您需要修改 sqlite3 的客户经理类型授权您手机上的数据库以撤销应用程序（不像案例 1 那样简单，这需要 root 访问您的手机）：

一世。首先将数据库和日志文件（accounts.db 和 accounts.db-journal）复制到另一个位置（例如：在您的 SD 卡或计算机上）。可以在您的 android 设备上的此目录中找到数据库文件：

```
/data/system/users/0/accounts.db
/data/system/users/0/accounts.db-journal 
```

ii. 你现在需要一个 sqlite3 编辑器。我使用了 Google Play 商店中的 Sqlite 调试器。或者，您可以使用来自[http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)的 sqlite3 二进制文件并在计算机上执行此操作。

iii. 您知道需要使用编辑器删除 accounts.db 数据库的“附加”表中的某些条目。您可能想学习有关 sqlite 命令的快速教程，但这里有一些示例，“Sqlite 调试器”使学习变得容易：

首先在编辑器中打开accounts.db文件

要列出表“附加”中的所有行，您可以使用以下命令：

```
SELECT * from extras 
```

一个更好的主意是只列出表“附加”中与您要撤销的应用程序相对应的行。例如，如果“com.someapp”是您的应用程序的名称，您可以使用以下命令：

```
SELECT * from extras WHERE key like '%com.someapp%' 
```

你应该得到一些类似这样的输出：

```
id|accountsid|key|value
10|1|perm.xxxxxxxxxxxxxxxxxxxxxxxxxxx.oauth2:https://google.com/|1
11|1|EXP:xxxxxxxxxxxxxxxxxxxxxxxxxxxx.oauth2:https://google.com/|xxxxxxx 
```

记下您要从上述输出中删除的 id 编号（即与您要撤消的 App 对应的行），然后使用以下命令删除这些行：

```
DELETE from extras where _id = 10
DELETE from extras where _id = 11 
```

将数据库和日志文件复制回其原始位置。确保将权限和所有权设置回原来的。仅所有者和组的读/写，所有者和组所有者都是“系统”。此操作将需要 root 访问权限！

重新启动您的设备，您应该已经撤销了该应用程序的权限。您可以通过要求应用再次请求授权来测试这一点。如果您看到要求您授权应用程序的屏幕（“应用程序想要访问您的 Google 帐户....允许/拒绝？），那么您已成功撤销该应用程序。

*参考：*

1.  [https://groups.google.com/forum/#!topic/android-developers/3lQb83jeyE8](https://groups.google.com/forum/#!topic/android-developers/3lQb83jeyE8)
2.  [https://github.com/jberkel/sms-backup-plus/issues/369](https://github.com/jberkel/sms-backup-plus/issues/369)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T06:18:28.737

卸载并重新启动设备就是答案。
在重新启动之前，我必须给它一些时间。

更新..不得不说这只有时有效。

# debugging - AutoHotKey 调试器：找不到 SciTE COM 对象

> ID：13222963
> 
> 赞同：1
> 
> 时间：2012-11-04T21:11:12.337
> 
> 标签：debugging, scite

我刚刚安装了 AutoHotKey_L 并编写了我的第一个脚本 - 实际上复制了一个示例。保存脚本并尝试调试器。

找到这个

; 获取 COM SciTE 对象 oSciTE := GetSciTEInstance() if !oSciTE { MsgBox, 16, SciTE4AutoHotkey Debugger, 找不到 SciTE COM 对象！退出应用 }

在 SciTEDebug.ahk 文件中。

现在我知道是什么产生了错误消息，但我不知道为什么。

任何人都可以阐明这个问题。我不是一个程序员，所以不要过于技术化。

AutoHotKey_L，32 位 Windows 7

戴夫

# file - 如何打开没有扩展名的文件？

> ID：13222964
> 
> 赞同：0
> 
> 时间：2012-11-04T21:11:17.280
> 
> 标签：file

我有一个文件曾经放在我的网络服务器上，现在我不记得那个扩展名了。它在磁盘上大约为 119 KB。

![在此处输入图像描述](../Images/decfe14047faea4daa269ae7cb9ab920.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:16:42.190

如果您的服务器是基于 linux 的，您可以尝试使用`**nano namefile**`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:01:39.650

可能，它是一个JPG文件。您可以通过查找“魔术”数字（前几个字节）来判断。

例如，看看

[http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html](http://www.astro.keele.ac.uk/oldusers/rno/Computing/File_magic.html)

如果您使用 Linux（或其他 *nix），则可以使用“magic”实用程序（命令：“file”）。对于 Windows，有 Cygwin 安装此类实用程序以在 Windows 中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:14:42.340

这取决于它的内容。您可以在十六进制编辑器（或只是 Windows 记事本）中查看该文件，第一个字母可能会告诉您它是什么类型的文件。有关文件类型，请参阅此列表：http: [//en.m.wikipedia.org/wiki/List_of_file_signatures](http://en.m.wikipedia.org/wiki/List_of_file_signatures)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T21:51:38.693

发布文件的第一部分（只是一些字节）。通常，开头的字节对文件类型进行编码。

# c - 为什么我的机器在这段代码中将堆栈指针减少了 20？

> ID：13222965
> 
> 赞同：0
> 
> 时间：2012-11-04T21:11:24.427
> 
> 标签：c, gcc, assembly, architecture, gdb

我使用 GCC 编译了以下 C 代码并在 gdb 中反汇编为程序集。我正在使用带有 64 位 Intel i5 处理器的 Macbook pro。在“main()”中，“char* name[2]”有 2 个字符指针，应该让堆栈指针减少 2 个字（16 个字节）？但是，当我在 gdb 中反汇编时，它减少了 20 ......有人可以帮助我理解吗？C代码：

```
#include <stdio.h>
#include <unistd.h>
int main(void)
{   
    char* name[2];
    name[0] = "/bin/sh";
    name[1]= NULL;
    execve(name[0],name,NULL);
} 
```

gdb反汇编代码：

```
GNU gdb 6.3.50-20050815 (Apple version gdb-1708) (Thu Nov  3 21:59:02 UTC 2011)
Copyright 2004 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "x86_64-apple-darwin"...Reading symbols for shared libraries .. done

(gdb) disassemble main
Dump of assembler code for function main:
0x0000000100000ee0 <main+0>:    push   %rbp
0x0000000100000ee1 <main+1>:    mov    %rsp,%rbp
0x0000000100000ee4 <main+4>:    sub    $0x20,%rsp
0x0000000100000ee8 <main+8>:    lea    -0x18(%rbp),%rax
0x0000000100000eec <main+12>:   lea    0x61(%rip),%rcx        # 0x100000f54
0x0000000100000ef3 <main+19>:   mov    %rcx,-0x18(%rbp)
0x0000000100000ef7 <main+23>:   movq   $0x0,-0x10(%rbp)
0x0000000100000eff <main+31>:   mov    -0x18(%rbp),%rcx
0x0000000100000f03 <main+35>:   mov    $0x0,%rdx
0x0000000100000f0d <main+45>:   mov    %rcx,%rdi
0x0000000100000f10 <main+48>:   mov    %rax,%rsi
0x0000000100000f13 <main+51>:   callq  0x100000f22 <dyld_stub_execve>
0x0000000100000f18 <main+56>:   mov    -0x4(%rbp),%eax
0x0000000100000f1b <main+59>:   add    $0x20,%rsp
0x0000000100000f1f <main+63>:   pop    %rbp
0x0000000100000f20 <main+64>:   retq   
End of assembler dump. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T21:24:51.160

因此，在读取程序集时，名称 [0] 在堆栈上位于 -0x18，名称[1](https://gitlab.com/x86-psABIs/x86-64-ABI)位于 -0x10。此外，如前所述，-0x4 用于返回值。

剩下 12 个字节，因为 0x20 实际上是 32。范围 -32 到 -24 和范围 -8 到 -4。-8 到 -4 肯定是对齐的，我猜 -32 到 -24 也是如此（对于 16 字节对齐）。

编辑：请注意，实际上减去了 48 个字节。调用 main 的 callq 指令从 RSP 中减去 8 个字节，然后`push %rbp`再减去 8 个字节。

已验证的 16 字节对齐：[x86-64 System V ABI](https://gitlab.com/x86-psABIs/x86-64-ABI)第 3.2.2 节（[直接链接到旧版本的 PDF](https://www.uclibc.org/docs/psABI-x86_64.pdf)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T21:16:14.893

我猜想这种“奇怪的”堆栈帧格式与“惰性绑定”调用约定有关，这显然是在您调用的情况下使用的。即你实际上是在调用惰性绑定存根`dyld_stub_execve`，而不是它`execve`本身。调用后读取的结果代码`-0x4(%rbp)`可能是在绑定不成功的情况下返回的错误代码。

如果您静态链接库，我猜为调用准备的堆栈帧看起来会更传统。

**PS我的回答可能是胡说八道**，因为堆栈帧形成代码是在适当的编译过程中生成的，而使用静态或共享库的决定仅在链接时做出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:17:05.120

如果您在谈论 line `<main+4>`，它不是减去 20（以 10 为底）。它以 16 为基数减去 20，`16^1 * 2 + 16^0 * 0`即等于 32，或 2 个字的大小。

# sql - 如何在 Postgresql 中为日期变量提供一个由整数变量组成的间隔

> ID：13222967
> 
> 赞同：1
> 
> 时间：2012-11-04T21:11:41.663
> 
> 标签：sql, postgresql, date

我正在尝试从特定日期提取几年，正确的语法是

```
<date> - interval '5 years'; 
```

但我不想提取特定的年数，而是一个变量，用户将提供该变量作为参数。我尝试了以下变量名是 years ：

```
date+interval '% years',years; 
```

我收到一个错误，它不允许我那样做。什么是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:15:51.143

我相信你应该能够写：

```
specific_date + (number_of_years || ' years')::INTERVAL 
```

（免责声明：未经测试，距离我上次做这种事情已经一年多了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:59:13.750

ruak 是对的；您可以使用字符串连接来创建间隔文字，然后对其进行转换。

我更喜欢使用日期数学来创建间隔，而不是字符串连接。它是，IMO，更清洁。

```
SELECT DATE '2012-01-01' + 10 * INTERVAL '1' YEAR; 
```

在这里，您可以替换`10`为所需的年数或占位符参数。

# android - 如何从android日历获取事件的开始时间

> ID：13222971
> 
> 赞同：4
> 
> 时间：2012-11-04T21:12:30.787
> 
> 标签：android, android-calendar

如何从**android 日历****`StartTime`**中获取和获取事件？我正在使用此代码获取事件的所有数据，但它给了我，但我需要**Start**和**End**。这是代码**`EndTime`******`StartDate`****`EndDate`****`Date + Time`****

 ******```
CalNames[i] = "Event" + cursor_event.getInt(0) + ": \nTitle: "
                        + cursor_event.getString(1) + "\nDescription: "
                        + cursor_event.getString(2) + "\nStart Date: "
                        + new Date(cursor_event.getLong(3)) + "\nEnd Date : "
                        + new Date(cursor_event.getLong(4)) + "\nLocation : "
                        + cursor_event.getString(5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:05:55.817

用于`cursor_event.getLong(cursor_event.getColumnIndex("dtstart"))`获取自纪元以来事件以 UTC 毫秒开始的时间。

获取事件结束时间使用`cursor_event.getLong(cursor_event.getColumnIndex("dtend"))`

您可以在此处找到所有事件列[http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#DTEND](http://developer.android.com/reference/android/provider/CalendarContract.EventsColumns.html#DTEND)******

# ruby-on-rails - rails 3.1: postgres: 为什么 db:create 忽略我的 database.yml 文件？

> ID：13222974
> 
> 赞同：1
> 
> 时间：2012-11-04T21:12:47.710
> 
> 标签：ruby-on-rails, postgresql, rake, adaptor

这是我的 database.yml 条目：

```
development:
  adapter: postgresql
  encoding: unicode
  database: hi5fit_development
  user: postgres
  password: postgres
  pool: 5 
```

这是我的命令行：

耙分贝：创建

这是我得到的错误：

```
db/test.sqlite3 already exists
FATAL:  password authentication failed for user "Eric"
/Users/Eric/.rvm/gems/ruby-1.9.3-p286@rails-31/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1076:in `initialize'
/Users/Eric/.rvm/gems/ruby-1.9.3-p286@rails-31/gems/activerecord-3.1.3/lib/active_record/connection_adapters/postgresql_adapter.rb:1076:in `new'
... Many lines left out 
```

这发生在两台不同的机器上，一台在 OSX 10.5 上运行 Postgres 8.4，另一台在 OSX 10.6 上运行 Postgres 9.2，都使用 Ruby 1.9.3 和 Rails 3.1，所以我很可能犯了系统错误，而不是遇到一次性故障。为什么 rake 尝试使用我的登录名而不是 config/database.yml 中提供的数据库名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T22:09:16.017

你想要`username`，没有`user`。

# networking - 域名服务器ip地址

> ID：13222976
> 
> 赞同：-1
> 
> 时间：2012-11-04T21:13:02.627
> 
> 标签：networking, dns

如何获取域名系统中所有顶级根服务器的 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:21:55.257

有 13 个地址，它们通常包含在 DNS 服务器在启动时读取的配置文件中。 [http://en.wikipedia.org/wiki/Root_name_server](http://en.wikipedia.org/wiki/Root_name_server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:23:16.650

您可以使用[dig](http://members.shaw.ca/nicholas.fong/dig/)查询 gTLD 和根服务器地址

```
dig ns . 
```

或者您可以单独查询每个 gTLD，例如：

```
dig com. NS 
```

# jquery - ScrollTop 在 Chrome 中真的很生涩

> ID：13222978
> 
> 赞同：1
> 
> 时间：2012-11-04T21:13:06.730
> 
> 标签：jquery, google-chrome, scrollto, scrolltop, parallax

我正在使用 scrollTop 函数创建视差滚动网站，将 scrollTop 函数绑定到整个网站的不同锚点。

我遇到的问题是滚动在 Chrome 中变得非常不稳定/生涩，但在 Firefox 中以某种方式很好。

我的代码如下：

```
 $('.recipes').click(function(){
 $('html,body').animate({
 scrollTop: $(".main1").offset().top
 }, 1500);
 });

 $('.cooking').click(function(){
 $('html,body').animate({
 scrollTop: $(".main2").offset().top
 }, 1500);
 }); 
```

是否有可能的替代方法来做到这一点，使网站滚动不那么生涩？也许我可以添加一个缓动功能？

*   编辑-

如果我删除下面的函数，生涩似乎消失了，代码有问题还是可能有不同的编写方式？

```
var startY = $('#container').position().top + $('#container').outerHeight();

$(window).scroll(function(){
checkY();
});

function checkY(){
if( $(window).scrollTop() > startY ){
    $('#backToTop, #navigation').fadeIn(600);
}else{
    $('#backToTop, #navigation').fadeOut(600);
}
}

checkY(); 
```

第二次编辑

```
$(document).ready(function(){

$('.recipes').click(function(){
    $.scrollTo('.main1', 1500)
 });

$('.cooking').click(function(){
    $.scrollTo('.main2', 1500)
});

$(function () {
    $(window).scroll(function () {
        if ($(this).scrollTop() > 600) {
            $('#backToTop, #navigation').show();
        } else {
            $('#backToTop, #navigation').hide();
        }
    });
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T21:47:16.183

如果您愿意使用另一种方法，使用插件，[jQuery scrollTo](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)在我使用它时一直非常流畅。

这会让你做

```
$('.recipes').click(function(){
    $.scrollTo('.main1', 1500);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T22:33:19.890

[`.scroll()`](http://api.jquery.com/scroll/)不要在每次页面滚动一点点时触发你的淡入淡出函数，而是在[`.animate()`回调](http://api.jquery.com/animate/)上执行它，它只在滚动完成时触发一次。

```
$('.recipes').click(function(){
     var startY = $('#container').position().top + $('#container').outerHeight();
     $('html,body').animate(
          { scrollTop: $(".main1").offset().top },
          1500,
          function() {
             checkY(startY);
          } 
     );
});

$('.cooking').click(function(){
     var startY = $('#container').position().top + $('#container').outerHeight();
     $('html,body').animate(
         { scrollTop: $(".main2").offset().top },
         1500,
         function(){
             checkY(startY);
         }
     );
}); 
```

以及OP的原始`checkY()`功能：

```
function checkY(i) {
    if( $(window).scrollTop() > i ) {
        $('#backToTop, #navigation').fadeIn(600);
    } else {
        $('#backToTop, #navigation').fadeOut(600);
    }
} 
```

# expressionengine - Exp:resso Store: 如何处理需要押金的产品？

> ID：13222981
> 
> 赞同：4
> 
> 时间：2012-11-04T21:13:20.290
> 
> 标签：expressionengine, add-on, expresso-store

如何设置商店产品条目以要求初始存款，然后在以后请求最终金额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T22:45:30.603

使用内置功能没有简单的方法可以做到这一点。但是，有几种方法可以实现它：

*   为订单打折 90% 创建促销代码/折扣（将“代码”留空，它将自动应用于所有订单）。在您的模板中，明确表示折扣金额是“押金”，您稍后会要求支付剩余金额。
*   编写一个 PHP 扩展来计算您的存款并在结帐时更新购物车。

对于第一个选项，没有简单/自动的方式来索取订单的剩余部分（因为商店认为它已经全额付款）。

最灵活的选择是编写一个简单的扩展程序，只需要在结帐时支付押金，一旦创建订单，您还应该能够使用标准功能来索取剩余的付款（您的客户仍然需要输入不过，他们的信用卡详细信息不会被存储）。

# jquery - $.browser.safari = false 在 Safari 和 Chrome (webkit) 中中断 $.scrollTo

> ID：13222983
> 
> 赞同：0
> 
> 时间：2012-11-04T21:13:29.113
> 
> 标签：jquery, scrollto

这并不完全科学，但如果我在 Safari 或 Chrome 中设置 $.browser.safari = false，那么 $.scrollTo 将不再适用于任何具有任何参数的元素。它不会抛出错误或任何东西，但它肯定不会滚动。

在遵循以下建议后我注意到了这个问题：[Distinguish Chrome from Safari using jQuery.browser](https://stackoverflow.com/questions/3303858/distinguish-chrome-from-safari-using-jquery-browser)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T21:13:29.113

使用 jQuery ScrollTo 时，不要在 Safari/Chrome 中设置 $.browser.safari = false。

# php - PHP crypt() 的输出长度是多少？

> ID：13222992
> 
> 赞同：11
> 
> 时间：2012-11-04T21:14:28.443
> 
> 标签：php, hash, crypt

PHP 的输出长度是`crypt()`多少？

`md5()`输出是 128 位并产生一个 32 个字符的字符串，所以在数据库中你把它放在一个`char(32)`列中，那`crypt()`呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-04T21:16:06.077

> *注意：*以这种方式提问是完全有限的，请参阅[http://php.net/crypt](http://php.net/crypt)

更多细节：

*   成功时，返回字符串的长度可以在 13 到 123 之间变化。
*   输出长度取决于使用的哈希算法。在您的问题中仍未定义。
*   输出长度取决于传递给函数的盐。在您的问题中仍未定义。
*   `crypt`总是返回散列字符串或短于 13 个字符的字符串，并保证在失败时与 salt 不同。

* * *

*例子：*

让我们从一个简单的`crypt`调用和一个有效的基于 DES 的哈希的有效的两字符盐开始：

```
 13 :: 2 (salt) + 11 (hash - 64 bits, base 64) 
```

如果您使用 PHP `crypt`，特别是 MD5（这里更好地命名为：md5crypt、MD5(Unix)、FreeBSD MD5、Cisco-IOS MD5；Hashcat 模式 500）和一个空 salt，则输出长度为：

```
 26 :: 3 (`$1$`) + 0 (empty salt) + 1 (`$`) + 22 (hash - 128 bits, base 64) 
```

如果在 PHP`crypt`默认为上述 MD5 并且称为未指定盐的系统上，`crypt`将生成盐。这种盐的长度通常为 8 个字符。那么输出长度为：

```
 34 :: 3 (`$1$`) + 8 (salt) + 1 (`$`) + 22 (hash) 
```

在这种情况下，您的数据库表列`char(32)`将在插入或截断时报告错误 - 取决于您使用的数据库服务器。

但是 MD5 示例没有实际意义，我之所以选择它是因为您的问题中有它，但是您不应该将 MD5 用于`crypt`（请参阅：[*Md5crypt Password scrambler is not become safe by author*](http://phk.freebsd.dk/sagas/md5crypt_eol.html)）。

相反，让我们看看 Blowfish 散列 ( `CRYPT_BLOWFISH`)。它有一个两位数的*成本*参数，并且盐长度始终为 22（如果给出较短的盐，则用`$`s 填充）：

```
 60 :: 4 (`$2y$`) + 3 (cost `$`) + 22 (salt) + 1 (`$`) + 53 (hash) 
```

对于 Blowfish crypt 哈希算法（bcrypt，OpenBSD Blowfish；Hashcat 模式 3200），固定长度为 60。

如您所见，输出长度取决于使用的哈希算法、盐的长度，甚至一些哈希特定的参数，如*cost*。

例如，如果您选择具有 999 999 999 轮和 16 字节长盐的 SHA512，则输出长度为：

```
123 :: 3 (`$6$`) + 17 (`rounds=999999999$`) + 16 (salt) + 1 (`$`) + 86 (hash) 
```

这个例子可能有点极端，只是为了展示图片。

* * *

其他`crypt`相关问题：

*   [crypt() 的替代方案](https://stackoverflow.com/q/8662207/367456)
*   [在 PHP 中将密码与 crypt() 进行比较](https://stackoverflow.com/q/3135524/367456)
*   [您可以将 php crypt() 的输出转换为有效的 MD5 吗？](https://stackoverflow.com/q/461800/367456)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:19:09.007

> 返回散列字符串或小于 13 个字符的字符串，并保证在失败时与 salt 不同。
> 
> crypt() 将使用基于标准 Unix DES 的算法或系统上可能可用的替代算法返回一个散列字符串。
> 
> 一些操作系统支持不止一种类型的哈希。事实上，有时标准的基于 DES 的算法会被基于 MD5 的算法所取代。哈希类型由 salt 参数触发。在 5.3 之前，PHP 会在安装时根据系统的 crypt() 确定可用的算法。如果没有提供盐，PHP 将根据 MD5 crypt() 的可用性自动生成标准的两字符 (DES) 盐或十二字符 (MD5)。PHP 设置一个名为 CRYPT_SALT_LENGTH 的常量，它指示可用哈希允许的最长有效盐。

阅读更多： http: [//php.net/crypt](http://php.net/crypt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T21:19:29.830

正如您在[文档](http://php.net/manual/en/function.crypt.php)中看到的，'''crypt()''' 函数与各种不同的散列算法一起使用。因此长度可以不同，并且取决于默认散列算法，该算法可以由文档中描述的常量确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T21:20:18.023

crypt() 依赖于可用的加密方法。PHP 最常用的方法是 MD5，它总是返回 32 个字符。DES 和 Blowfish 等其他方法返回可变长度的字符串。

您需要知道 crypt() 函数在您的服务器中使用的方法。

# continuous-integration - 在持续集成服务器上应该增加版本号的哪一部分

> ID：13222996
> 
> 赞同：2
> 
> 时间：2012-11-04T21:15:10.660
> 
> 标签：continuous-integration, version, tfsbuild, version-numbering

我已将我的解决方案集成到持续集成 tfsbuild 2010 服务器中。这很好地构建了我所有的库。

接下来，我想在 CI 服务器上的每次构建期间增加版本号。

版本号的构成是：（主要版本）.（次要版本）.（修订号）.（内部版本号）

我的问题是，在这种情况下应该增加的数字是什么最佳实践？我会想到内部版本号，所以我最终得到 1.1.1.123，下一次签入结果是 1.1.1.124 等。

我想知道什么时候修订号会增加？Major 是主要版本的手动版本，次要版本是我为版本创建多个分支时的版本。

我是正确的还是正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T21:49:03.453

有关主要、次要和修订，请参阅“[语义版本控制 2.0](http://semver.org/) ”。

对于类似功能集的构建，只有构建号会增加（如果构建成功，如下面的[Gonen](https://stackoverflow.com/users/1390251/gonen) [评论](https://stackoverflow.com/questions/13222996/what-part-of-the-version-number-should-be-incremented-on-a-continuous-integratio/13223301#comment18019435_13223301)）。
如果不成功，下一个构建将重用*相同*的构建号。

修订号也称为“补丁”号：

> 如果只引入了向后兼容的错误修复，则必须增加补丁版本`Z`( )。 错误修复被定义为修复错误行为的内部更改。`x.y.Z | x > 0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:18:50.270

你*可以*，**不** *应该*只增加内部版本号（不太重要的部分），我会重复@VonC

并添加 - 它仅对已发布的构建有意义，对于内部构建增加任何数字都没有从客户**和**开发人员 POV中感知

# c# - 通过 Web API 操作使用 HttpClient 调用外部 HTTP 服务

> ID：13222998
> 
> 赞同：30
> 
> 时间：2012-11-04T21:15:24.350
> 
> 标签：c#, asp.net-web-api, dotnet-httpclient

我在 .Net Framework 4.5 上运行的 ASP.Net MVC 4 Web Api 项目中使用 HttpClient 调用外部服务

示例代码如下（忽略返回值，因为这是测试调用外部服务的示例代码）：

```
public class ValuesController : ApiController
{
    static string _address = "http://api.worldbank.org/countries?format=json";
    private string result;

    // GET api/values
    public IEnumerable<string> Get()
    {
        GetResponse();
        return new string[] { result, "value2" };
    }

    private async void GetResponse()
    {
        var client = new HttpClient();
        HttpResponseMessage response = await client.GetAsync(_address);
        response.EnsureSuccessStatusCode();
        result = await response.Content.ReadAsStringAsync();
    }
} 
```

虽然私有方法中的代码确实有效，但我遇到的问题是控制器 Get() 调用 GetResponse() 但它不等待结果，而是立即执行返回结果 = null。

我还尝试使用 WebClient 使用更简单的同步调用，如下所示：

```
 // GET api/values
    public IEnumerable<string> Get()
    {
        //GetResponse();

        var client = new WebClient();

        result = client.DownloadString(_address);

        return new string[] { result, "value2" };
    } 
```

效果很好。

我究竟做错了什么？为什么 Get() 不等待异步示例中的私有方法完成？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-04T21:59:17.693

啊哈，我需要执行以下操作（返回任务而不是 void）：

```
 // GET api/values
    public async Task<IEnumerable<string>> Get()
    {
        var result = await GetExternalResponse();

        return new string[] { result, "value2" };
    }

    private async Task<string> GetExternalResponse()
    {
        var client = new HttpClient();
        HttpResponseMessage response = await client.GetAsync(_address);
        response.EnsureSuccessStatusCode();
        var result = await response.Content.ReadAsStringAsync();
        return result;
    } 
```

此外，我还没有意识到我可以将 Get() 操作标记为异步，这让我可以等待外部调用。

感谢 Stephen Cleary 的博文[Async and Await](http://nitoprograms.blogspot.co.uk/2012/02/async-and-await.html)为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-29T12:14:36.820

用用户名和密码调用Httpclient。在 API 需要身份验证的情况下。

```
 public async Task<ActionResult> Index()
{

            const string uri = "https://testdoamin.zendesk.com/api/v2/users.json?role[]=agent";
            using (var client1 = new HttpClient())
            {
                var header = new AuthenticationHeaderValue("Basic", Convert.ToBase64String(Encoding.ASCII.GetBytes("test@gmail.com:123456")));///username:password for auth
                client1.DefaultRequestHeaders.Authorization = header;
               var aa = JsonConvert.DeserializeObject<dynamic>(await client1.GetStringAsync(uri));

            }
} 
```