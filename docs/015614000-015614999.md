# StackOverflow 问答 15614000-15614999

# ios - 将使用 NSLog 视为构建错误

> ID：15614000
> 
> 赞同：3
> 
> 时间：2013-03-25T11:39:10.050
> 
> 标签：ios, objective-c, xcode, clang, nslog

我想将`NSLog`代码中的任何内容视为错误。该行应该是 Xcode 中的编译时错误。就像`release`在启用 ARC 的项目中的使用如何被视为错误一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:18:09.190

尝试这个，

```
#define NSLog_UNAVAILABLE __attribute__((unavailable("NSLog is treated as Error.")))
FOUNDATION_EXPORT void NSLog(NSString *format, ...) NS_FORMAT_FUNCTION(1,2) NSLog_UNAVAILABLE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:55:29.140

`NSLog`您可以在代码中重新声明原型`__deprecated`，因此任何使用它都会产生**警告**：

```
FOUNDATION_EXPORT void NSLog(NSString *format, ...) NS_FORMAT_FUNCTION(1,2) __deprecated; 
```

那么也许有一些方法可以将警告变成错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:10:24.220

如果您使用 Clang 作为编译器，则可以使用它（实际上刚刚意识到 GCC`_Static_assert`从 4.6 版开始也支持 C11）：

```
#define NSLog(...) _Static_assert(0, "Not allowed to use NSLog!") 
```

如果 a 失败，编译将`_Static_assert`失败。

# javascript - VS2012 上的命名空间、类和枚举 javascript intellisense

> ID：15614002
> 
> 赞同：0
> 
> 时间：2013-03-25T11:39:18.497
> 
> 标签：javascript, visual-studio-2012, enums, namespaces, intellisense

在 VS2010 中，这可以通过将 __namespace = true 添加到对象来实现。在 VS2012 中，这似乎不再起作用。

我怎样才能恢复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:39:18.497

为了重新激活增强`VS2012 Javascript Intellisense`，我在 Github [https://github.com/dotnetwise/VS2012-Javascript-Intellisense上创建了这个项目](https://github.com/dotnetwise/VS2012-Javascript-Intellisense)

包也在[Nuget](https://nuget.org/packages/VS2012-Javascript-Intellisense/)上。

这为您的 javascript 代码成员提供更多图标，例如`namespace`，、、、、按类型的字段`class`，甚至显示来自哪些方法`enum`，甚至是共同共享的！`interface``function's prototype``Object.prototype`

# xslt - 如何使用存储在 XSL 文件中不同位置的 XML 文件

> ID：15614005
> 
> 赞同：0
> 
> 时间：2013-03-25T11:39:22.060
> 
> 标签：xslt

我将以下 XML 文件存储在 D:\test

```
<?xml version="1.0" encoding="utf-8"?>
<!--Your comments.-->
<root>
<Sample name="pal">
<Name>pal</Name>
<Age>24</Age>
<Job>software</Job>
</Sample>
</root> 
```

我正在尝试在 D:\test\test1\test2 的以下 XSL 文件中使用它：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
<xsl:template match="/">
<xsl:for-each select="root/sample">
<tr>
<td><xsl:value-of select="Name" /></td>
<td><xsl:value-of select="Age" /></td>
</tr>
</xsl:for-each>
</xsl:template>
</xsl:stylesheet> 
```

我无法获得所需的结果。

# ruby-on-rails - 使用 Group_by Rails

> ID：15614006
> 
> 赞同：0
> 
> 时间：2013-03-25T11:39:23.200
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, group-by

今天使用 group_by ，试图了解它，看看它是否是我想要实现的正确解决方案。我有以下型号

```
class Fixture < ActiveRecord::Base
  attr_accessible :home_team, :away_team, :kickoff_time, :fixture_date
end 
```

我想按fixture_date 对所有灯具进行分组。到目前为止，我的控制器看起来像这样

```
def fixturelist
  @fixtures = Fixture.all
  @fixture_date = @fixtures.group_by { |fd| fd.fixture_date }
end 
```

在我看来，我想做的是列出那个特定日期的主队和客队比赛

看法

```
<% @fixture_date.each do |f| %>
 <%= f %>
<% end %> 
```

这会按日期输出所有灯具的数组，因此 group_by 有效。我正在寻找一些指针以使其正常工作，即查看每个日期列出的所有固定装置。看到一个工作示例应该可以帮助我了解更多

例子

```
Date

Team 1 Vs Team2
Team 1 Vs Team2
Team 1 Vs Team2

Date 2

Team 1 Vs Team2
Team 1 Vs Team2
Team 1 Vs Team2 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:57:32.313

看一下这个，

[http://railscasts.com/episodes/29-group-by-month](http://railscasts.com/episodes/29-group-by-month)

我想你会希望你的视图代码看起来像这样，

```
<% @fixture_date.sort.each do |date, fixtures| %>
  <h2><%= date %></h2>

  <% fixtures.each do |fixture| %>
    <%= fixture.team_1 %> VS <%= fixture.team_2 %>
  <% end %>
<% end %> 
```

**编辑：**

如果你`fixture_date`是一`datetime`列而不仅仅是一`date`列，你的控制器代码看起来像这样，

```
@fixture_date = @fixtures.group_by { |fd| fd.fixture_date.beginning_of_day } 
```

# php - 将 PHP 表单提交到数据库时出现错误 500

> ID：15614007
> 
> 赞同：1
> 
> 时间：2013-03-25T11:39:23.640
> 
> 标签：php, sql, forms, postgresql, heroku

我为我的 Facebook Web 应用程序使用 ProgreSQL 和 Heroku 创建了一个 SQL 数据库，以下代码是收集数据的表单

```
</style>
  <div class="container">
  <form action="insert.php" method="post" onSubmit="window.location.reload()">
  Cover URL: <input type="text" name="Cover URL" id="coverURL"><br><br>
  Title:   <input type="text" name="Title" id="title"><br><br>
  Author:      <input type="text" name="Author" id="author"><br><br>
  Genre:<br> <select name="genre" id="genre">
  <option>Adventure & Action</option>
  <option>Anthologies</option>
  <option>Classics</option>
  <option>Sport</option>
  <option>War</option>
//More options in actual code, just deleted some to save space.          
    </select><br><br>
  Total Pages: <input type="number" name="TotalPages" id="totalpages"><br><br>
  Curent Page: <input type="number" name="CurrentPage" id="currentpage"><br><br>
  <input type="submit"> </form><br><br></div>

  </center>
</section> 
```

然后调用`insert.php`

```
<?php
$dbconn = pg_connect("host=ec2-54-243-190-226.compute-1.amazonaws.com port=5432    dbname=d6fh4g6l0l6gvb user=[REMOVED] password=[REMOVED] sslmode=require options='--client_encoding=UTF8'") 
or     die('Could not connect: ' . pg_last_error());

pg_query("INSERT INTO books(coverURL, title, author, genre, currentPg, totalPg)     VALUES('"$_POST["coverURL"]"','"$_POST["title"]"','"$_POST["author"]"','"$_POST["genre"]"',    '"$_POST["currentpages"]"','"$_POST["totalpages"]"')");

pg_close($dbconn);
?> 
```

问题是当我点击提交时出现错误 500，在网上查看大多数解决方案后说 PHP 中一定有错误，但由于我的经验不足（边走边学）我不知道我做错了什么.

如有必要，我可以提供更多信息。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:50:36.140

尝试这个：

请确保`names`html 输入的值与值**匹配**`$_POST`。

```
mysqli_query($con,"INSERT INTO books(coverURL, title, author, genre, currentPg, totalPg) VALUES('".$_POST["coverURL"]."','".$_POST["title"]."','".$_POST["author"]."','".$_POST["genre"]."','".$_POST["currentpages"]."','".$_POST["totalpages"]."')"); 
```

编辑：使用此语句------^

而不是：

```
'$_POST[author]' 
```

最好这样做：

```
'".$_POST["author"]."' 
```

而且你是否知道`$sql`实际上并没有被插入到数据库中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:17:20.160

问题是你真的把东西“混合”在一起。您的代码使用 pg_connect 连接并使用 mysqli 进行查询。仅使用 Postgree 函数连接到数据库 阅读[http://www.php.net/manual/en/ref.pgsql.php](http://www.php.net/manual/en/ref.pgsql.php)上的手册。

我会做类似的事情：（虽然我没有测试过）

```
 <?php
$dbconn = pg_connect("host=ec2-54-243-190-226.compute-1.amazonaws.com port=5432    dbname=d6fh4g6l0l6gvb user=[REMOVED] password=[REMOVED] sslmode=require options='--client_encoding=UTF8'") or die('Could not connect: ' . pg_last_error());;

$coverUrl = $_POST["coverURL"];
$title = $_POST["title"];
$author = $_POST["author"];
$genre = $_POST["genre"];
$currentPages = $_POST["currentpages"];
$totalPages = $_POST["totalpages"];
pg_query_params($dbconn, "INSERT INTO books(coverURL, title, author, genre, currentPg, totalPg) VALUES($1,$2,$3,$4,$5,$6)", array($coverUrl, $title, $author, $genre, $currentPages, $totalPages));

pg_close($dbconn);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:49:01.000

[错误 500 是“内部服务器错误](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)” 。这基本上意味着服务器端发生了故障，它只是一个非常通用的错误消息。基本上它可以是一切，它不仅限于您的脚本。这可能是 Apache 模块错误或任何其他拒绝您的 WebServer 软件处理请求而没有任何致命故障的原因。

如果它只发生在相同的操作上（例如提交表单或调用特殊页面），则很可能是脚本错误导致错误 500。

您应该查找您的日志文件，尤其是。apache错误日志。它应该包含有关出现问题的更多信息。

在您的情况下，您的服务器可能不允许连接到外部数据库服务器，但这只是一个猜测。

# java - 使用 Gson 解析 JSON

> ID：15614008
> 
> 赞同：1
> 
> 时间：2013-03-25T11:39:30.497
> 
> 标签：java, parsing, gson

如何使用 Gson 解析下面的 JSON？

现在我使用：

```
private AttachChildDataModel parseSuccess(String content){
    Gson gson = new Gson();
    return gson.fromJson(content, AttachChildDataModel.class);
} 
```

`AttachChildDataModel`这些成员变量在哪里：

```
private Integer adultId;
private Integer childId;
private PlatformEnum platform;
private String regId;
private Date loginDate;
private Date logoutDate;
private ClientApp clientApp; 
```

我要解析的 Json 字符串是：

```
{"log":  
  {
    "childId":2,
    "adultId":1,
    "logoutDate":null,
    "platform":"IPHONE",
    "regId":null,
    "loginDate":1325419200000,
    "clientApp":"CHILD_APP"
  }
} 
```

当我将对象放入 Spring ModelView 时，我将其添加到 name 下`log`。有问题的是当我尝试用 Gson 解析它时。现在，我用 手动删除“log”前缀和“}”后缀`String#substring`，但我认为有更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T20:22:13.303

To solve your problem, just create a "foo" class like this:

```
package stackoverflow.questions.q15614008;

public class Foo {

   public AttachChildDataModel log;

} 
```

and use it as base class for parsing in Gson:

```
package stackoverflow.questions.q15614008;

import com.google.gson.*;

public class Q15614008 {

  public static void main(String[] arg) {

    String testString = "{\"log\": "
        + "  {"
        + "\"childId\":2," + "\"adultId\":1,"
        + "\"logoutDate\":null,"
        + "\"platform\":\"IPHONE\","
        + "\"regId\":null,"
        + "\"loginDate\":1325419200000,"
        + "\"clientApp\":\"CHILD_APP\"}"
        + "}";

    Gson gson = new Gson();
    Foo foo = gson.fromJson(
        testString, Foo.class);
    System.out.println("Result: " + foo.log.toString());
  }

} 
```

Then use only the `log` member variable of the `Foo` class.

# excel - VBA函数=函数参数？

> ID：15614009
> 
> 赞同：1
> 
> 时间：2013-03-25T11:39:38.807
> 
> 标签：excel, vba

下面是一个带有 switch 语句的示例函数，但是我很难理解一个函数如何等于提供的参数？

```
Function getnumber(value, method) As String
    Dim i, j As Integer
    Dim rtn As String
    j = 0
    Select Case method
    Case 0:

    getnumber = value

    Case 1:
        rtn = ""
        For i = 1 To Len(value)
            If IsNumeric(Mid(value, i, 1)) Then
                j = j + 1
                rtn = rtn & Mid(value, i, 1)
            Else
                If j > 3 Then Exit For
                j = 0
                rtn = ""
            End If
        Next
        If rtn = "" Then getnumber = "" Else getnumber = rtn
    Case Else:
        MsgBox ("Invalid method in getnumber")
    End Select
End Function 
```

“getnumber = value”真的让我很困惑。其中*getnumber*是函数，value 是*getnumber*函数的参数

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:46:32.383

在 VBA 中，您使用语法分配函数的返回值`YourFunctionName = ValueToReturn`。

因此，`getnumber = value`只需设置`value`为要从函数返回的值。

# delphi - 如何获取 SMTP 对话的 Indy IdSMTPRelay 日志？

> ID：15614010
> 
> 赞同：2
> 
> 时间：2013-03-25T11:39:39.310
> 
> 标签：delphi, indy, indy10

我使用 Indy10 的 TIDSMTPRelay 中继一些消息，效果很好。但是，我需要记录与对方的实际 SMTP 对话，而 OnDirectSMTPStatus 和 OnStatus 事件据我所知并没有提供此信息。如何访问 SMTP 日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:42:42.223

我最终使用 TIdLogEvent 实现 OnSent 和 OnReceived 事件。

# android - 无法启动我的 android 活动，发生 javanullpiontException

> ID：15614015
> 
> 赞同：0
> 
> 时间：2013-03-25T11:39:48.330
> 
> 标签：android

```
public class BouncingBallActivity extends Activity 
{
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        View bouncingBallView = new BouncingBallView(this);
        super.onCreate(savedInstanceState);
        setContentView(bouncingBallView);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:49:25.083

请注意：

1.  确保您的所有活动都列在`manifest`文件中
2.  确保 BouncingBallView 类具有 public 类型的构造函数

BouncingBallView（上下文上下文）

{ 超级（上下文）；

}

1.  `BouncingBallView`必须延长`View`

2.  检查所有代码。检查您是否在任何地方返回 null 。

3.  发布您的 logcat 跟踪，并尝试找出您到底哪里出错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:42:16.480

```
View bouncingBallView = new BouncingBallView(this); 
```

把这条线放在后面`super.onCreate(savedInstanceState);`

# jquery - 通过jquery选择多个选择元素时的异常行为

> ID：15614018
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:01.663
> 
> 标签：jquery, html

我通过以下 jquery 代码选择了多项选择项。

```
$.map($("[id*='lstWeekDays'] option"), function(e) {
if (jQuery.inArray($.trim($(e).val()), item1) != -1) {

    if (!$(":selected", e).is(':checked')) {
            $(e).attr("selected", true);
        }
    }
}); 
```

这样，在选择元素的选项标签中添加了 selected="selected" 属性。

```
<select style="width:188px;" id="lstWeekDays" multiple="multiple"  size="4">
    <option value="Sunday">Sunday</option>
    <option value="Monday" selected="selected">Monday</option>
    <option value="Tuesday" selected="selected">Tuesday</option>
    <option value="Wednesday">Wednesday</option>
    <option value="Thursday">Thursday</option>
    <option value="Friday">Friday</option>
    <option value="Saturday">Saturday</option>

</select> 
```

现在，当我通过 UI 选择其他元素时，此属性不会从 HTML 中删除，但它们会从选择列表中取消选择。当我再次尝试通过 jquery 选择选择列表的项目时，不会选择项目。我知道这个问题有点令人困惑。所以如果您有任何困惑，请问我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:42:51.203

尝试使用`$(e).prop("selected", true);`.

`.attr()``.prop()`在更改“运行”属性时设置元素的默认属性。

# python - 如何在 Tornado 的 POST 处理程序中获取 JSON 参数？

> ID：15614021
> 
> 赞同：3
> 
> 时间：2013-03-25T11:40:10.850
> 
> 标签：python, python-2.7, tornado

从客户端我生成发布请求，并且在正文中我有类似的 simlpe JSON

```
{
    "action": "copy_all",
    "id": "aabbababab",
    "factory_id": 12297829382473034000
} 
```

如何在处理程序（发布函数）中获取此参数？当我发送类似键/值对并逐个获取参数时，我知道如何解析，但这里 JSON 是一个参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T14:57:10.587

利用：

```
data = tornado.escape.json_decode(self.request.body) 
```

# css - 分组 CSS 选择器和 ::selection

> ID：15614022
> 
> 赞同：2
> 
> 时间：2013-03-25T11:40:13.857
> 
> 标签：css, css-selectors

为什么我们**不能**像..那样对 CSS 进行分组

```
p::selection , p::-moz-selection 
{background:transparent;} 
```

**演示：http:** [//jsfiddle.net/l2aelba/MRyVC/1/](http://jsfiddle.net/l2aelba/MRyVC/1/)

为什么我们要一一选择喜欢

```
p::selection       {background:transparent;}
p::-moz-selection  {background:transparent;} 
```

**演示：http:** [//jsfiddle.net/l2aelba/MRyVC/](http://jsfiddle.net/l2aelba/MRyVC/)

有人可以扩展这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:44:44.190

如果选择器的任何部分无效，浏览器[应该删除整个规则：](http://www.w3.org/TR/CSS21/syndata.html#rule-sets)

> 选择器（另见选择器部分）由直到（但不包括）第一个左花括号 ({) 的所有内容组成。选择器总是与声明块一起使用。当用户代理无法解析选择器（即，它不是有效的 CSS 2.1）时，它也必须忽略选择器和以下声明块（如果有）。
> 
> CSS 2.1 为选择器中的逗号 (,) 赋予了特殊含义。然而，由于不知道逗号在未来的 CSS 更新中是否会获得其他含义，因此如果选择器中的任何地方出现错误，则应该忽略整个语句，即使选择器的其余部分在 CSS 2.1 中看起来是合理的。

（请注意，就浏览器而言，“有效的 CSS 2.1”实际上意味着“浏览器可以理解和支持的选择器”。）

由于非 Mozilla 浏览器不理解`::-moz-selection`，他们不得不放弃该规则。由于 Mozilla 浏览器不理解`::selection`，因此它们也必须放弃该规则。这是一个双输的情况（也是前缀笨拙的另一个原因，尤其是在选择器中）。

作为记录，我很惊讶这不再适用于 Chrome（至少在我刚刚测试过的 Windows 版本 25 中）。`p::selection, p::-moz-selection`它过去固执地简单地解析选择器`p::selection`并应用规则而不是遵循规范，开发人员有理由这样做。我想知道发生了什么变化...

# sql-server - 如何从动态查询创建临时表？

> ID：15614023
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:14.540
> 
> 标签：sql-server, sql-server-2008, temp-tables, dynamicquery

我想为分页[**主要动机**]创建动态查询，这是我的代码：

```
Alter proc proc_GetData
(
    @TableName varchar(500)='tblPropertyType',
    @PrimaryKey varchar(500)='Id',
    @Columns varchar(max)='PropertyType',
    @WhereCondition varchar(max)='',
    @RecsPerPage int =3,
    @Page int=1,
    @SortColumn varchar(500)='Id',
    @SortDirection Varchar(56)='asc'
)
as
DECLARE @SQL VARCHAR(MAX)
DECLARE @DSQL VARCHAR(MAX)
DECLARE @FirstRec int, @LastRec int
SET @FirstRec = (@Page - 1) * @RecsPerPage
SET @LastRec = (@Page * @RecsPerPage + 1)
select @FirstRec
select @LastRec
SET @SQL='
SELECT
ROW_NUMBER() OVER (ORDER BY ' + @SortColumn+ ' '+ @SortDirection +') RowNum,'+ @PrimaryKey +' , ' +@Columns + ' from ' +@TableName+ ' Where  1=1 '+
@WhereCondition 
```

我想做的是：

*   首先：从上述查询中惰性化临时表中的所有记录。
*   第二：`SELECT * FROM @TEMPResult WHERE RowNum > @FirstRec AND RowNum < @LastRec`。

请帮我

* * *

## 回答 #1

> 赞同：-6
> 
> 时间：2013-03-25T11:48:41.580

```
SET @SQL='SELECT ROW_NUMBER() OVER 
   (ORDER BY ' + @SortColumn+ ' ' + @SortDirection + ') RowNum, ' + @PrimaryKey + ', ' + @Columns + ' 
   INTO tempTableName
   FROM ' + @TableName + ' Where  1 = 1 ' + @WhereCondition 
```

# c++ - std::move 与编译器优化

> ID：15614026
> 
> 赞同：6
> 
> 时间：2013-03-25T11:40:27.257
> 
> 标签：c++, compiler-optimization, move-semantics

例如：

```
void f(T&& t); // probably making a copy of t

void g() 
{
    T t;
    // do something with t
    f(std::move(t));
    // probably something else not using "t"
} 
```

在这种情况下是否`void f(T const& t)`等效，因为任何好的编译器都会产生相同的代码？如果这很重要，我对 >= VC10 和 >= GCC 4.6 感兴趣。

**编辑：**

根据答案，我想详细说明一下这个问题：

比较`rvalue-reference`和`pass-by-value`方法，很容易忘记`std::move`在`pass-by-value`. 编译器是否仍然可以检查变量没有进行更多更改并消除不必要的副本？

`rvalue-reference`方法仅使优化版本“隐式”，例如`f(T())`，并要求用户显式指定其他情况，例如，如果用户未完成实例，则`f(std::move(t))`需要显式制作副本。那么，在这种优化方面，方法被认为是好的吗？`f(T(t));``t``rvalue-reference`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:55:36.923

这绝对不一样。For once`T &&`只能绑定到右值，while*可以*`T const &`同时绑定到右值和左值。其次，`T const &`不允许任何移动优化。如果您“可能想要制作副本`t`”，则`T &&`允许您实际制作 的移动副本`t`，这可能更有效。

例子：

```
void foo(std::string const & s) { std::string local(s); /* ... */ }

int main()
{
    std::string a("hello");
    foo(a);
} 
```

在此代码中，包含的字符串缓冲区`"hello"`必须存在两次，一次在 的正文中`main`，另一次在 的正文中`foo`。相比之下，如果您使用右值引用 和`std::move(a)`，则可以“移动”相同的字符串缓冲区，并且只需要分配和填充一次。

正如@Alon 指出的那样，正确的习惯用法实际上是[按值传递](http://cpp-next.com/archive/2009/08/want-speed-pass-by-value/)：

```
void foo(std::string local) { /* same as above */ }

int main()
{
    std::string a("hello");
    foo(std::move(a));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:44:06.203

好吧，这取决于 f 对 t 做了什么，如果它创建了它的副本，那么我什至会详细地这样做：

```
void f(T t) // probably making a copy of t
{
    m_newT = std::move(t); // save it to a member or take the resources if it is a c'tor..
}

void g() 
{
    T t;
    // do something with t
    f(std::move(t));
    // probably something else not using "t"
} 
```

然后你允许移动 c'tors 优化发生，在任何情况下你都会占用't'资源，如果它被'移动'到你的函数，那么你甚至获得将它移动到函数的非副本，如果它没有被移动，那么您可能必须拥有一份

现在，如果稍后在代码中您将拥有：

```
f(T()); 
```

然后ta da，f用户甚至不知道的自由移动优化..

请注意引用：“在这种情况下 void f(T const& t) 是否等效，因为任何好的编译器都会产生相同的代码？”

它不是等价的，它是更少的工作，因为只有“指针”被传输，根本没有调用任何 c'tors，既没有移动也没有其他任何东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:43:27.937

获取`const`左值引用和获取右值引用是两件不同的事情。

相似之处：

*   两者都不会导致复制或移动，因为它们都是引用。引用只是引用一个对象，它不会以任何方式复制/移动它。

差异：

*   左值引用将`const`绑定到任何东西（左值或右值）。右值引用只会绑定到非右值`const`- 受到更多限制。

*   `const`函数内部的参数是左值引用时不能修改。当它是一个右值引用时，它可以被修改（因为它是 non- `const`）。

让我们看一些例子：

1.  取`const`左值参考：`void f(const T& t);`

    1.  传递左值：

        ```
        T t; f(t); 
        ```

        这里，`t`是一个左值表达式，因为它是对象的名称。`const`左值引用可以绑定到任何东西，所以很乐意`t`通过引用传递。没有任何东西被复制，没有任何东西被移动。

    2.  传递一个右值：

        ```
        f(T()); 
        ```

        这里，`T()`是一个右值表达式，因为它创建了一个临时对象。同样，`const`左值引用可以绑定到任何东西，所以这没关系。没有任何东西被复制，没有任何东西被移动。

    在这两种情况下，`t`函数内部都是对传入对象的引用。它不能被引用修改`const`。

2.  取一个右值引用：`void f(T&& t);

    1.  传递左值：

        ```
        T t;
        f(t); 
        ```

        这会给你一个编译器错误。右值引用不会绑定到左值。

    2.  传递一个右值：

        ```
        f(T()); 
        ```

        这很好，因为右值引用可以绑定到右值。函数内部的引用`t`将引用由`T()`.

现在让我们考虑`std::move`。首先要做的事情：`std::move`实际上并没有移动任何东西。这个想法是你给它一个左值，然后它把它变成一个右值。这就是它所做的一切。所以现在，如果你`f`采用右值引用，你可以这样做：

```
T t;
f(std::move(t)); 
```

这是有效的，因为虽然`t`是一个左值，但它`std::move(t)`是一个右值。现在右值引用可以绑定到它。

那么你为什么要使用右值引用参数呢？事实上，您不需要经常这样做，除了定义移动构造函数和赋值运算符。每当你定义一个接受右值引用的函数时，你几乎肯定想要给一个`const`左值引用重载。他们应该几乎总是成对出现：

```
void f(const T&);
void f(T&&); 
```

为什么这对函数有用？好吧，只要你给它一个左值（或`const`右值），就会调用第一个，而只要你给它一个可修改的右值，就会调用第二个。接收到一个右值通常意味着你得到了一个临时对象，这是个好消息，因为这意味着你可以破坏它的内部并根据你知道它不会存在太久的事实来执行优化。

因此，拥有这对函数可以让您在知道自己得到一个临时对象时进行优化。

这对函数有一个非常常见的例子：复制和移动构造函数。它们通常是这样定义的：

```
T::T(const T&); // Copy constructor
T::T(T&&); // Move constructor 
```

所以移动构造函数实际上只是一个复制构造函数，在接收临时对象时进行了优化。

当然，传递的对象并不*总是*临时对象。如上所示，您可以使用`std::move`将左值转换为右值。然后它*似乎*是该函数的临时对象。使用`std::move`基本上是说“我允许您将此对象视为临时对象。” 它是否真的被移动是无关紧要的。

但是，除了编写复制构造函数和移动构造函数之外，您最好有充分的理由使用这对函数。如果您正在编写一个函数，该函数接受一个对象，并且无论它是否是临时对象，它的行为都与它完全相同，只需按值获取该对象！考虑：

```
void f(T t);

T t;
f(t);
f(T()); 
```

在第一次调用中`f`，我们传递了一个左值。这将被*复制*到函数中。在第二次调用中`f`，我们传递了一个右值。该对象将被*移动*到函数中。看——我们甚至不需要使用右值引用来有效地移动对象。我们只是按价值计算！为什么？因为用于进行复制/移动的*构造函数*是根据表达式是左值还是右值来选择的。让复制/移动构造函数完成他们的工作。

至于不同的参数类型是否会导致相同的代码——这完全是一个不同的问题。编译器在*as-if 规则*下运行。这仅仅意味着只要程序按照标准的要求运行，编译器就可以发出它喜欢的任何代码。因此，如果这些函数碰巧做了完全相同的事情，它们可能会发出相同的代码。或者他们可能不会。但是，如果您的函数采用 const 左值引用和右值引用正在做同样的事情，那么这是一个不好的迹象。

# iphone - 如何录制应用程序屏幕的视频

> ID：15614027
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:29.297
> 
> 标签：iphone, ios

我创建了一个流媒体视频应用程序。现在我想录制在 MPVideoPlayer 中播放的视频，以及它的声音。我试过[这段代码](http://aroth.no-ip.org:82/wordpress/archives/673)。但这段代码只记录黑屏，没有声音。我正在动态添加 MPVideoPlayer 实例。所以，请帮助我做到这一点，任何源代码或库都会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:24:57.720

尝试这个 ：

.h 文件导入 MediaPlayer/MediaPlayer.h

```
 NSString *strSelectedVideoPath;
    MPMoviePlayerController *player

    @property (nonatomic,retain) NSString *strSelectedVideoPath;
    @property (nonatomic,retain) MPMoviePlayerController *player; 
```

.m 文件

```
 -(void) viewWillAppear:(BOOL)animated {
        [super viewWillAppear:animated];

        player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:strSelectedVideoPath]];
        player.scalingMode = MPMovieScalingModeFill;
        player.movieSourceType = MPMovieSourceTypeFile;
        player.view.frame = CGRectMake(0, 45, 320, 400);
        player.shouldAutoplay = YES;
        [player prepareToPlay];
        [self.view addSubview:player.view];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(movieFinishedCallback:) name:MPMoviePlayerPlaybackDidFinishNotification object:player];

        [player play];
    }

    - (void) movieFinishedCallback:(NSNotification*) aNotification {
        MPMoviePlayerController *player1 = [aNotification object];
        [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:player1];
        [player1.view removeFromSuperview];
        player1 = nil;

    } 
```

您必须添加 MediaPlayer.framework

录制视频：

```
 -(void) imagePickerController: (UIImagePickerController *) picker didFinishPickingMediaWithInfo: (NSDictionary *) info {

    NSString *mediaType = [info objectForKey: UIImagePickerControllerMediaType];
    [self dismissModalViewControllerAnimated:NO];

    if (CFStringCompare ((CFStringRef) mediaType, kUTTypeMovie, 0)
        == kCFCompareEqualTo) {

                NSString *moviePath = [[info objectForKey: UIImagePickerControllerMediaURL] path];
                if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath)) {
                     UISaveVideoAtPathToSavedPhotosAlbum (moviePath,self,@selector(video:didFinishSavingWithError:contextInfo:), nil);
                    }
            }
    }

    - (void)video:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo {

        if (error) {

        }
        else{        
            NSURL *videoURl = [NSURL fileURLWithPath:videoPath];
            AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:videoURl options:nil];
            AVAssetImageGenerator *generate = [[AVAssetImageGenerator alloc] initWithAsset:asset];
            generate.appliesPreferredTrackTransform = YES;
            NSError *err = NULL;
            //For Thumb Image
            CMTime time = CMTimeMake(1, 60);
            CGImageRef imgRef = [generate copyCGImageAtTime:time actualTime:NULL error:&err];

            self.strUploadVideoPath = videoPath;

            CGImageRelease(imgRef);
            [generate release];
            [asset release];
        }
    } 
```

# java - 用于连接数据库的 Java 桌面应用程序

> ID：15614028
> 
> 赞同：3
> 
> 时间：2013-03-25T11:40:34.553
> 
> 标签：java, mysql, web-services, tomcat, jdbc

我有一个桌面应用程序，它使用 JDBC。每当我使用 localhost 时，我对 JDBC 没有任何问题。现在，我要连接到不允许远程连接的服务器。有人建议我提供一个 Web 服务作为我的应用程序和数据库之间的网关。

我能想到的另一种解决方案是，寻找允许远程连接的 mysql 服务器。我发现很难找到可以清楚地理解 Java 中的 Web 服务的教程。我做了一些研究，有人告诉我可以使用 PHP 编写 Web 服务并生成 JSON 文件，然后我可以在 java 中解析它。但如果我这样做，我所有的 JDBC 代码都必须重新编码/删除。

是否可以在不删除我的 JDBC 代码的情况下远程连接到数据库？或者我可以将 Tomcat 与 JDBC 结合起来吗？谢谢！

这就是我得到的..

> 线程“主”com.mysql.jdbc.exceptions.jdbc4.CommunicationsException 中的异常：通信链接故障原因：com.mysql.jdbc.exceptions.jdbc4.CommunicationsException：通信链接故障原因：java.net.ConnectException：连接计时出：连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:06:37.867

您的问题似乎导致了类似于以下的架构： ![http://yuml.me/2cc6bd7f](../Images/7b9d8c34b13b54d4708ababc59f7e7ce.png)

但与您的问题所暗示的不同 -**服务器端模块**不会将数据库查询从桌面应用程序中继到数据库 - 它充当成为客户端应用程序的桌面应用程序的服务器。

这意味着重新构建您的应用程序（我认为不是一个真实的词） - 而是一种常见的最佳实践。服务器端模块负责对您的用户进行身份验证和授权，以确保没有人可以对数据库执行恶意活动。

这里没有简短的答案——你需要考虑这是否是你想要的方向。

其他人建议的替代方法是允许从桌面应用程序通过防火墙直接访问数据库。我假设您在此处发帖，因为负责数据库完整性的人员告诉您不应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:50:37.170

将数据库与 Web 服务连接起来是非常不推荐的。

以这种方式认为 Web 服务具有输入/输出模式。所以你想用method1从table1中获取数据。表 2 与方法 2 等...

所以为该数据库服务器提供远程访问，这可能很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:51:29.760

您可以在 MySQL 中允许远程连接。您将不得不根据运行它的服务器搜索具体指南（[这里是](http://www.debianhelp.co.uk/remotemysql.htm)debian 的指南）。尽管如果您不信任运行应用程序的人员或数据库包含敏感数据，我强烈建议您不要这样做，而是使用 PHP，因为它会引入很多安全问题。如果在任何时候只有一个 IP 地址需要连接，您应该只允许该 IP 地址连接，这将使安全漏洞更小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T11:54:49.413

您不必使用*网络服务*。您可以实现任何形式的客户端/服务器通信，例如 Web 服务、REST、RMI、本机套接字等。研究这些并确定哪种最合适是值得的。然而....

这让我觉得这是一个架构问题，而不是围绕特定技术的问题。在我看来，您正在被引导实现一些服务，这些服务不仅允许您访问数据库，而且提供更丰富的 API。例如，您不希望您的客户插入表格。您应该提供一个 API 以添加到购物篮。即您在不同的抽象级别上工作（将来您可能会以完全不同的方式实现您的数据库，并且您不想更改您的客户）。

以上是 Java EE 世界和更广泛的标准模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T12:02:32.577

我认为您在这里不需要网络服务。要解决您的问题，您可以在 MySQL 服务器中启用远程访问。请按照[此博客](http://blog.lakmali.com/2012/05/how-to-enable-remote-access-to-mysql.html)中提供的说明进行操作。如果您的 MySQL 服务器托管在 Windows 环境中，请参阅[此文档](http://dev.mysql.com/doc/refman/4.1/en/mysql-config-wizard-file-location.html)。

之后使用远程 MySQL 服务器域或 IP 地址更新您的 JDBC URL。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T11:53:07.783

除了防火墙规则之外，没有什么可以阻止您使用 JDBC 访问远程数据库。将您的数据库凭据暴露给客户端通常被认为是一种不好的做法 - 即使在代码中进行了硬编码。这是一种在架构上存在缺陷的方法，不应仅考虑学校作业。

但是，如果您需要解决方案，您可以查看以下选项： 1) 检查运行 Mysql 的 IP 地址。它不能是 localhost，而是像 192.168.1.2 之类的 IP。 2) 检查 JDBC 错误是否与 Authentication 相关，然后您需要为用户帐户添加权限。MySQL 安全模型将用户名和用户可以登录的 IP 联系起来。您可能需要更正这些。

如果两者都正确，请发布您在使用 JDBC 时遇到的确切异常。

# dynamics-crm-2011 - 如何在 CRM 中仅使用日历中的月份和年份设置文本字段

> ID：15614029
> 
> 赞同：3
> 
> 时间：2013-03-25T11:40:35.783
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-online

在活动表单中选择日历后，我需要设置文本字段只显示`Month/Year` 而不是`Day/Month/Year`。我怎样才能做到这一点？

我在下面附上了一个屏幕截图： ![在此处输入图像描述](../Images/ab07776cdb9eba7538596b9ede7810e4.png)

在这里`Day/Month/Year`，但我需要`Month/Year`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:30:44.937

我怀疑日期时间字段的格式是根据系统设置（从 CRM 或用户计算机中选择的）。不知道除此之外它是否可编辑。今天晚些时候我会看看它。

如果无法自定义单个字段的日期格式，您可以使用三个选项（按控制顺序和实施工作量的递增顺序列出）。

1.  根据您的意愿设置系统设置。
2.  添加自定义字段并控制其中的外观。
3.  创建一个行为完全如您所愿的 Web 资源。

# .htaccess - 从 URL 中排除变量

> ID：15614035
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:46.540
> 
> 标签：.htaccess, mod-rewrite

我正在开发一个新网站，并希望使 URL 对 SEO 友好。

我在 .htaccess 中的 RewriteRule：

```
Working: RewriteRule ^news/design-watches/(.*)/(.*)/(.*)\.html$ news_view.php?category=$1&title=$2&id=$3

Return: http://localhost/news/design-watches/Technical-Data/Test-News-9/37.html 
```

问题：

是否可以从 URL 中隐藏 ID 并仍然将变量 $id 发送到另一个网站以从中获取 $_GET 信息？

```
Problem: RewriteRule ^news/design-watches/(.*)/(.*)\.html$ news_view.php?category=$1&title=$2&id=$3

Result: http://localhost/news/design-watches/Technical-Data/Test-News-9.html 
```

我想从 URL 中排除 ID 部分，但我必须让它在站点之间传递信息。

感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:55:29.513

如果 URL 不包含第三个捕获模式，那么您不能`$3`在重写目标中使用。如果您的 URL 不包含 ID 值，则无法从 URL 获取该信息以供以后使用。

所以我不认为你能达到你希望达到的目标。

# html - html 5 日期输入元素未解析

> ID：15614036
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:50.050
> 
> 标签：html, date, input

抱歉，如果有人问了这个问题，但我找不到完全相同的副本。我想要使​​用日期初始化的 HTML 5 日期控件 - 1992 年 5 月 19 日。我尝试了以下方法：

```
<input class="text-box single-line" data-val="true" data-val-date="The field BirthDate must be a date." data-val-required="The BirthDate field is required." id="BirthDate" name="BirthDate" type="date" value="5/19/1992" /> 
```

但它不起作用。有人能给我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:45:25.083

您需要使用[RFC3339](https://www.rfc-editor.org/rfc/rfc3339)兼容格式，例如`1992-05-19`.

演示：http: [//jsfiddle.net/kEFd4/](http://jsfiddle.net/kEFd4/)

# php - PHP Regex：我可以将字符串 $ 的结尾放在一个范围内吗？

> ID：15614037
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:51.720
> 
> 标签：php, regex

我可以将字符串字符的结尾放在这样的范围内：

```
$string=preg_replace('/([a-z])([ \,$])/','$2',$string); 
```

所以它匹配任何小写字母，然后是空格、逗号或字符串结尾？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:41:36.303

您可以使用替代方法：

```
([ ,]|$) 
```

如果您`$`在字符类中使用，则它仅匹配文字美元符号。

# php - 如何正确返回数组以供进一步使用？

> ID：15614041
> 
> 赞同：0
> 
> 时间：2013-03-25T11:40:59.073
> 
> 标签：php, sql, arrays, smarty

我的网站上有以下代码：

```
$statusMessageSQL = "SElECT * FROM statusmessages";
$statusMessagePrepare = $db->prepare($statusMessageSQL);
$statusMessagePrepare->execute();
$statusMessageResult = $statusMessagePrepare->fetchAll();
foreach($statusMessageResult as $row){
    $row['username']=$db->getUsername($db->getUserNameById($row['posterID']));
    $results[] = $row;
    $smarty->assign('results', $results);
} 
```

它可以毫无问题地工作，但现在我想将其中的大部分内容放在我的数据库类中，以便更加面向对象地工作。但是我在返回数组时遇到了一些问题。我已经做到了

```
$statusMessage = $db->getStatusMessages();
var_dump($statusMessage); 
```

功能：

```
function getStatusMessage(){
    $statusMessageSQL = "SElECT * FROM statusmessages";
    $statusMessagePrepare = $db->prepare($statusMessageSQL);
    $statusMessagePrepare->execute();
    $statusMessageResult = $statusMessagePrepare->fetchAll();
    foreach($statusMessageResult as $row){
        $row['username']=$db->getUsername($db->getUserNameById($row['posterID']));
        $results[] = $row;
}
    return $results;

} 
```

但这只是告诉我，我的数组为空。所以我的回归肯定有问题。我该如何正确地做到这一点？

我的数据库条目是 statusID、posterID、statusMessage、dateTime、sumRating 和 sumVotes。

如果我还想返回另一个表的条目，我该怎么办？就像，我在另一张桌子上有海报 (posterID) 的 givenName 和 familyName。我如何也返回这些数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:34:13.430

```
function getStatusMessage(){
    global $db; // this is what you actually need to make function work

    $sql = "SElECT s.*, username FROM statusmessages s JOIN users u ON posterID.=u.id";
    $stm = $db->prepare($sql);
    $stm->execute();
    return $stm->fetchAll();
} 
```

请注意，您必须使用 JOIN 来获取相关信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:59:43.417

好的，我明白了。首先，我犯了一个错误，我 - 正如@slugonamission 所说 - 我在函数名称中犯了拼写错误。然后，我将 home.php 中的 forloop 从

```
$statusMessage = $db->getStatusMessage();
for($i = 0; $i < sizeof($statusMessage); $i++){
$smarty->assign('results', $statusMessage[$i]);
} 
```

对此，因为末尾的 [$i] 使 forloop 仅使用数据库的最后一个条目，并且仅使用第一个字母。

```
$statusMessage = $db->getStatusMessage();
for($i = 0; $i < sizeof($statusMessage); $i++){
$smarty->assign('results', $statusMessage);
} 
```

现在我正在研究的是如何从其他表中获取数据。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T11:45:25.130

您必须将`$db`变量解析为函数：

```
function my_function() {
  global $db;

  // some code
} 
```

或像这样使用它：

```
class myClass {
  private $db;

  public function __construct() {

    $this->db = new MySQLi("host","user","pass","db");

  }

  public function my_function() {
    $my_db_query = $this->db->query('query');
  }
} 
```

# shell - 如果存在空格，则 grep 不会产生特定的单词

> ID：15614042
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:41:01.877
> 
> 标签：shell

请解决这个问题并帮助我。

我有一个文件，其内容如下

> #AuthName 身份验证
> 名称

如果我使用以下命令 grep，

`grep "^#AuthName$" <filename>`

会导致，

`#AuthName`

但是，
如果我修改了内容，前面有一个空格，`#AuthName`如下所示，

> #AuthName 身份验证
> 名称

它不会使用相同的 grep 命令给出任何输出。问题可能是因为那个空间。如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:42:12.500

grep 字符串中的克拉表示行首。因此，它只会返回“#AuthName”位于行首的内容。取出克拉：

```
grep "#AuthName" <filename> 
```

此外，美元符号表示行尾，因此它将仅匹配 #AuthName 开始和结束一行的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:44:00.370

您可以在那里放置一个可选空间。

```
grep "^ *#AuthName$" 
```

# ruby-on-rails - 查询字符串未在 Rails 中完全读取

> ID：15614047
> 
> 赞同：0
> 
> 时间：2013-03-25T11:41:21.723
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, curl, libcurl

我有基于 ruby​​ on rails 的 API，它接受获取请求。例子 ：

```
http://localhost:3000/api/search?query=whatis&access_token=324nbkjh3g32423 
```

当我从mac终端卷曲时

```
curl http://localhost:3000/api/search?query=whatis&access_token=324nbkjh3g32423 
```

我用“”签入服务器`request.fullpath`，它只返回“ `/api/search?query=whatis`”，缺少第二个参数。

但是，如果我喜欢卷曲

```
curl --data="query=whatis&access_token=324nbkjh3g32423" http://localhost:3000/api/search 
```

它正在获取所有参数。

我知道编码存在问题，但我知道这两个请求有什么区别。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:47:14.353

问题可能是`bash`shell 将`&`其视为命令的结尾。

尝试像这样引用整个查询字符串 -

```
curl "http://localhost:3000/api/search?query=whatis&access_token=324nbkjh3g32423" 
```

# internet-explorer - jquery ajax 调用仅在 IE 9 中触发一次

> ID：15614048
> 
> 赞同：0
> 
> 时间：2013-03-25T11:41:22.477
> 
> 标签：internet-explorer, jquery, jquery-mobile

不确定这是否是一个新问题，但到目前为止我还没有找到任何解决方案。我的系统中有以下功能 - 一个 jquery 移动 MVC Web 应用程序 - 它在除 IE 之外的所有浏览器（在我的情况下为 9）中都运行良好。我第一次调用它时它总是有效，但第二次它总是失败，我不知道为什么。

非常感谢您提前提供的帮助！

```
 function getAndShowPflichten(immoid, days) {

            var seite = 1;

            if (sessionStorage.getItem("seite") != null) {
                seite = sessionStorage.getItem("seite");
            }

            if (immoid == "") {
                alert("No ID found!");
                return;
            } else {
                $.post("getPflichtenFuerImmobilieJson", { id: immoid, frist: days, seite: seite }, showInspections, 'json').fail(
                function () { alert("Überprüfen Sie bitte Ihre Datenverbindung."); $.mobile.loading('hide'); });
            }
        } 
```

MVC Controller中的方法是：

```
public ActionResult getPflichtenFuerImmobilieJson(int id, int frist, int seite)
        {
            if (loggedIn())
            {
                int benutzerLoggedIn = Convert.ToInt32(Session["benutzerId"]);
                var model = immoVerwalter.getPflichtenFuerImmobilieJson(benutzerLoggedIn, id, frist, seite);

                return Json(model, JsonRequestBehavior.AllowGet);
            }
            else
            {
                return Json("abgemeldet", JsonRequestBehavior.AllowGet);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:16:21.423

抱歉，它与 Ajax 或其他东西无关，似乎没有调用变量 days 的方法（见下文） - days 第二次调用时为空......

```
var days = $("#interval").val(); 
```

# android - 当无线网络可用时，带有欢迎问候消息的 Toast android 手机

> ID：15614054
> 
> 赞同：1
> 
> 时间：2013-03-25T11:41:43.907
> 
> 标签：android, broadcastreceiver, android-wifi

我正在构建一个 android 应用程序，一旦安装它有助于自动化我的一些家庭控制。作为该应用程序的第一个简单功能，我希望每当我进入我家时，手机都会向我敬酒并附上欢迎信息。我想我可以通过放入一个动作名称为“android.net.wifi.WIFI_STATE_CHANGED”的 BroadCastReceiver 来实现这一点，我假设，只要有新网络可用，广播接收器就会收到通知，我可以检查 SSID 看看我是否已经到家了。

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.myfirstapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.myfirstapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver
        android:name="com.example.myfirstapp.WifiNetworksAvailableBroadcastReceiver"
        android:enabled="true" >
        <intent-filter>
            <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
        </intent-filter>
    </receiver>

    <activity
        android:name="com.example.myfirstapp.WifiTester"
        android:label="@string/title_activity_wifi_tester" >
    </activity>
</application>

</manifest> 
```

我的 WifiNetworksAvailableBroadcastReceiver 看起来像：

```
public class WifiNetworksAvailableBroadcastReceiver extends BroadcastReceiver {

protected static final String TAG = "MyApp";

@Override
public void onReceive(Context context, Intent intent) {     
            WifiManager mMgr = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    Log.i(TAG, "------");
    for(final ScanResult result:mMgr.getScanResults()) {
        if(result.SSID.equals("<MY_HOME_WIFI_SSID>")) {
            Toast.makeText(context, "Welcome home", Toast.LENGTH_LONG).show();
                    }
    }
    Log.i(TAG, "======");
}
} 
```

现在安装了应用程序。我进入我的家，但我没有得到烤面包。我尝试在后台运行该应用程序，但我仍然没有得到祝酒词。谁能给个方向？我的方法正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:53:20.103

尝试使用事件[SCAN_RESULTS_AVAILABLE_ACTION](http://developer.android.com/reference/android/net/wifi/WifiManager.html#SCAN_RESULTS_AVAILABLE_ACTION)更改接收器。每次完成新的 wifi 扫描时都会调用您的接收器，然后您可以检查您的 SSID 是否存在于调用[getScanResults()](http://developer.android.com/reference/android/net/wifi/WifiManager.html#getScanResults%28%29)的可用列表中并最终显示 toast。

PS。你注册你的接收器了吗？

# sql-server-2008 - 找出停机时间的工作时间比例

> ID：15614056
> 
> 赞同：2
> 
> 时间：2013-03-25T11:41:48.010
> 
> 标签：sql-server-2008

关于管理受支持系统的停机时间，我希望能够从我的呼叫处理数据库中报告有多少停机时间落在了受支持的时间内。支持的时间仅为 9-5 个工作日。因此，如果系统在周五中午出现故障，并在下周二中午恢复，我需要记录 16 小时的停机时间：周五 5 小时 12-5 周一 8 小时 周二 9-12 3 小时。

理想情况下，我也想排除银行假期，但我们将不胜感激。谢谢。戴夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:54:02.580

首先假设报告采用@t1 DATETIME、@t2 DATETIME 2 个参数，其中@t1、@t2 是您要报告的时间段的开始时间和结束时间。

我将创建一个包含所有支持时间段的表，例如所有连续支持时间段的 CREATE TABLE SupportTime (StartSupport DATETIME, EndSupport DATETIME)。（如果跨越几年，这可能包含很多行，但生成起来应该不会太难）。

假设有一个类似的表 CREATE TABLE DownTime (StartDownTime DATETIME, EndDownTime DATETIME) 包含所有停机时间段。

所需的报告查询应如下所示：

```
WITH CTE AS (
    SELECT
        CASE WHEN StartSupport < @t1 THEN @t1 ELSE StartSupport END AS StartSupport, 
        CASE WHEN EndSupport > @t2 THEN @t2 ELSE EndSupport END AS EndSupport
        FROM SupportTime
        WHERE @t1 <= EndSupport
        AND @t2 >= StartSupport)

SELECT
    SUM(
       DATEDIFF (mi,
       CASE WHEN dt.StartDownTime < CTE.StartSupport THEN CTE.StartSupport ELSE dt.StartDownTime END,
       CASE WHEN dt.EndDownTime > CTE.EndSupport THEN CTE.EndSupport ELSE dt.EndDownTime)
   ) As DownTimeMinutes, -- Total of down time during support time (mins)
FROM DownTime AS dt
INNER JOIN CTE ON (CTE.StartSupport <= dt.EndDownTime
                   AND CTE.EndSupport >= dt.StartDownTime)

SELECT SUM(DATEDIFF(mi, CTE.StartSupport, CTE.EndSupport)) AS SupportTimeMins 
```

我将尝试解释发生了什么 - 虚拟 CTE 表包含报告日期之间的所有相关支持期，如果开始报告时间或结束报告时间在支持期内，则调整 StartSupport 或 EndSupport。CTE 与 DownTime 表的 JOIN 汇总了所有相关记录的 StartDownTime 和 EndDownTime 之间的差异（如果 StartDownTime 和 EndDownTime 超出 StartSupportTime 或 EndSupport，则再次调整）。

# ruby-on-rails - 将 Sublime Text 2 同步到 Ruby on Rails

> ID：15614059
> 
> 赞同：3
> 
> 时间：2013-03-25T11:42:01.727
> 
> 标签：ruby-on-rails, sublimetext2

早上好，

我目前正在关注关于 ruby​​ on rails 的教程视频。我创建了一个服务器，下一步是在 sublime text 2 中查看与我的服务器关联的文件。在视频中，讲师所做的就是打开 sublime text 2 并且所有文件/文件夹都已加载。当我打开 sublime text 2 时，我得到一个空白文档。我想我需要做一些与此链接相关的事情：http: [//www.sublimetext.com/docs/2/osx_command_line.html](http://www.sublimetext.com/docs/2/osx_command_line.html)但我真的不明白术语或如何使用这些命令。每当我使用它们时，我都会收到“找不到命令”任何见解将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:01:56.967

只需打开 Sublime Text 2

然后转到菜单栏并单击 -> 项目，然后选择 -> 将文件夹添加到项目。从弹出窗口中选择您的应用程序文件夹，您应该会看到那里的所有文件 :)

希望这可以帮助

# asp.net - 在单个 Azure 云服务上部署多个 Web 角色和辅助角色

> ID：15614060
> 
> 赞同：6
> 
> 时间：2013-03-25T11:42:02.230
> 
> 标签：asp.net, deployment, azure, azure-web-roles, azure-worker-roles

这可能不是新的，但我希望有人能让我走上正轨，因为它在天蓝色部署期间有点混乱。我正在计划在 Azure 上进行部署。这就是我所拥有的

1.  一个面向公众的 ASP.Net MVC 应用程序（web-role）+ WCF 服务（web-role）只能访问这个 asp.net 应用程序 + WCF 服务（worker-role）再次访问 1\. over message-queue
2.  一个自定义 STS，即 ASP.NET MVC 应用程序（web-role）充当 Id-Provider（对于 1\. 它是一个依赖方）+ WCF 服务（web-role），以向 RP 公开一些 STS 功能，例如 1。
3.  SQL Azure：由 1 和 2 访问 注意：1\. 最终将成长为一个门户，在 Web 上托管多个 wcf 服务，并为内部和外部访问提供工作角色。

我的问题是，如果 1\. 将成为向公众公开的应用程序，而 2\. 用于 1\. 联合安全性（内部），我应该如何计划我在 azure 上的部署，请记住 1\. 有时需要横向扩展后来连同两个 wcf 服务？我是发布到一个云服务还是如何发布？我的理解是，云服务是 n-web/worker 角色的逻辑容器。但是当你有 2 个 web 鞋底时，比如在这种情况下，两个 asp.net 应用程序，哪一个成为默认的？

最好的问候萨蒂什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T17:20:58.437

默认情况下，解决方案中的所有 Web 角色都是公共的。如果愿意，您可以通过进入服务定义并删除 HTTP 端点来更改此设置；您还可以定义仅对云服务可用的内部 HTTP 端点，不会向负载均衡器公开任何内容。在同一个项目中拥有所有 Web 角色的优点是可以轻松地动态检查 RoleEnvironment 和每个 Web 角色——换句话说，解决方案中的所有角色都“了解”其他角色及其可用端口。部署一个包也很容易。

所有角色共享相同的 DNS 名称 (.cloudapp.net)（但是您可以使用主机标头来区分），但它们通常通过 .cloudapp.net 服务上的负载均衡器使用不同的端口来公开。当服务在云中运行时，您可以看到这一点，门户中的链接指向具有指定端口的公共 HTTP 端点的每个角色。端口 80（由外部 HTTP 端点定义）是“默认”站点。

您还可以创建多个云项目，并分别部署它们。在这种情况下，每个都有自己的 DNS 名称，并且每个都单独管理。这是否是一件好事取决于应用程序的耦合程度，以及您是否通常会部署整个解决方案，或者只是更新该解决方案中的各个角色。但是没有成本或可扩展性差异。

如果您打算经常只重新部署其中一个角色，我倾向于将它们分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T17:13:52.833

要在同一个云实例下部署多个 Web 角色，请查看： [Best practice for Deployment of Web site into a cloud service](https://stackoverflow.com/questions/15225301/best-practice-for-deployment-of-web-site-into-a-cloud-service/15229011#15229011)

多个工作角色将更难以实现： [每个实例运行多个 WorkerRoles](https://stackoverflow.com/questions/5313143/run-multiple-workerroles-per-instance)

# python - 如何按键对字典进行排序？

> ID：15614067
> 
> 赞同：35
> 
> 时间：2013-03-25T11:42:08.430
> 
> 标签：python, sorting, dictionary

我试图按键排序字典，但没有机会。这是我的字典：

```
result={'1':'value1','2':'value2',...} 
```

我正在使用 Python2.7，我发现了这个

```
keys = result.keys()
keys.sort() 
```

但这不是我所期望的，我有一个未排序的字典。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T11:44:30.237

标准 Python 字典本质上是无序的。但是，您可以使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict). 它保留了插入顺序，因此您只需按所需顺序添加键/值对：

```
In [4]: collections.OrderedDict(sorted(result.items()))
Out[4]: OrderedDict([('1', 'value1'), ('2', 'value2')]) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-25T11:44:24.277

```
sorted(result.iteritems(), key=lambda key_value: key_value[0]) 
```

这将输出排序的结果，但字典将保持未排序。如果要保持字典的顺序，请使用[`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

实际上，如果您*按键*排序，则可以跳过该`key=...`部分，因为迭代的项目首先按键排序，然后按值排序（NPE 在他的答案中使用的）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T11:44:02.830

Python 字典是无序的（用于定义）

您可以改用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)

# ember.js - emberjs 控制器的需求返回未定义且无法访问 controller.content

> ID：15614072
> 
> 赞同：4
> 
> 时间：2013-03-25T11:42:24.277
> 
> 标签：ember.js

我正在尝试使用 Emberjs*需要 api* * 从评论控制器访问 Postscontroller。PostController 由路由支持，而我不希望评论的控制器有路由。

在评论控制器中，我**需要： ['posts', 'postsShow']**。在评论控制器中，当我使用以下命令运行控制台日志时：

```
 console.log( this.get('controllers.postsShow') );

    console.log( this.get('controllers.posts') ); 
```

**在控制台中我看到：**

```
<EmBlog.PostsShowController:ember396> { target=<EmBlog.Router:ember316>, namespace=EmBlog, store=<EmBlog.Store:ember336> 

 <EmBlog.PostsController:ember304> { target=<EmBlog.Router:ember316>, namespace=EmBlog, store=<EmBlog.Store:ember336> 
```

**但是，当我尝试访问**PostsShowController 或 PostsController 的控制器内容时，它总是返回**post undefined**。这些是我尝试过的各种方法，但仍然得到**未定义的帖子**：

```
 var post = this.get('controllers.posts').get('content');

              or

var post =  this.get('controllers.posts.content'); 
```

**我也试图从这样的内容中获得“评论”：**

```
var post = this.get('controllers.posts')

var comment = post.get('comments');

          or

 comment = post.comments; 
```

**我仍然得到错误：**

```
 TypeError: post is undefined  comment = post.comments;

 TypeError: post is undefined var comment = post.get('comments'); 
```

**这也意味着：**

```
 var post =  this.get('controllers.posts.model').get('store.transaction');

  also returns post is  undefined. 
```

**这是[jsfiddle](http://jsfiddle.net/mzseQ/)，代码的相关部分粘贴在下面：**

```
 EmBlog.PostsNewController = Ember.ObjectController.extend({
       content: null
    });

    EmBlog.PostsShowController =
       Ember.ObjectController.extend({
       content: null
    });

   EmBlog.CommentNewController = Em.ObjectController.extend({

       needs: ['posts', 'postsShow'],    
       isAddingNew: false,

      addComment: function(body){

           console.log( this.get('controllers.postsShow') );

           console.log( this.get('controllers.posts') );

           var post =  this.get('controllers.posts.content');
               store = post.get('store.transaction');

      }

  }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:32:42.240

那是因为`posts`控制器是空的。您正在填写职位`PostIndexController`，而不是`PostsController`。

检查路线：

```
EmBlog.PostsRoute  = Ember.Route.extend({
});

EmBlog.PostsIndexRoute  = Ember.Route.extend({
  model: function(){
    return EmBlog.Post.find();
  },
  setupController: function(controller, model){
    controller.set('content', model);
  }
}); 
```

所以你应该做

```
needs:  ['postsIndex', 'postsShow'] 
```

接着：

```
this.get('controllers.postsIndex.content') 
```

或修复您的路线：

```
EmBlog.PostsRoute  = Ember.Route.extend({
  model: function() {
    return EmBlog.Post.find();
  }
});

EmBlog.PostsIndexRoute  = Ember.Route.extend({
  model: function(){
    return this.modelFor('posts');
  },
  setupController: function(controller, model){
    controller.set('content', model);
  }
}); 
```

[更新的小提琴](http://jsfiddle.net/mzseQ/1/)

# perl - 为什么添加更多数据后我的文件大小相同？

> ID：15614075
> 
> 赞同：0
> 
> 时间：2013-03-25T11:42:32.007
> 
> 标签：perl, file-io

Perl 遇到一些麻烦（我是新手）。我在同一目录中有一个 .txt 文件。我打算复制文件，将其打印到标准输出，在副本中添加更多文本，然后比较文件大小。这是我到目前为止所拥有的：

```
#!/usr/local/bin/perl
use File::Copy;

copy("data.txt", "copyOfData.txt") or die "copy failed :(";
open (MYFILE, "data.txt") or die "open failed :(";
while (<MYFILE>) {
    chomp;
    print "$_\n";
}
$filesize = -s MYFILE;
print "MYFILE filesize is $filesize\n";
close (MYFILE); 

open(MYCOPYFILE, ">>copyOfData.txt");
print MYCOPYFILE "\nextra data here blah blah blah\n";
$filesize = -s MYCOPYFILE;
print "MYCOPYFILE filesize is $filesize\n";
close (MYCOPYFILE); 
```

但是，我得到的输出如下：

MYFILE 文件大小为 28 MYCOPYFILE 文件大小为 28

由于我添加了额外的文本，MYCOPYFILE 的大小肯定应该大于 MYFILE 的大小吗？我检查了两个文本文件，副本末尾确实有额外的文本。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:59:56.560

您可以使用文件名检查文件的大小（您不必打开它）。

```
my $size = -s 'data.txt' ; 
```

你应该总是开始你的脚本

```
use strict ;
use warnings ; 
```

并且打开文件最好使用三参数版本`open`

```
open my $filehandle , '<' , 'filename' or die "Failed to open: $!" ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:04:41.667

```
$filesize = -s MYFILE; 
```

如上所述， -s 不适用于文件句柄。如果要从文件句柄中获取大小，请使用 stat

```
$filesize = ((stat(MYFILE))[7]); 
```

有关-s 和朋友的详细信息，请参阅**perldoc -f -X ，有关 stat 的详细信息，请参阅****perldoc -f** stat

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T12:03:23.673

[dgw 的回答](https://stackoverflow.com/a/15614395/257635)是正确的。

另一种方法是`File::stat`用作：

```
 #!/usr/bin/perl
    use strict;
    use warnings;
    use File::stat;

    my $filesize = stat("test.txt")->size;

    print "Size: $filesize\n";

    exit 0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-25T11:51:23.403

关闭文件后检查文件大小。如果这不会改变文件大小，请尝试添加更多文本，然后大小可能会改变。

问候

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-25T13:56:42.953

Perl 自动对 IO 对象做一些缓冲操作。调用后内容可能不会立即写入磁盘`print FH "blalba"`。但是，该`-s`函数从磁盘读取文件大小。所以当你认为你已经“更新”了文件时，你可能会得到比预期更小的大小。

要获得正确的大小，请将缓冲区中的内容刷新到磁盘，然后使用`-s`. 请注意，`close(FH)`将首先自动刷新缓冲区，然后关闭文件句柄。所以你可以把`-s`操作放在`close`调用后得到准确的尺寸。

`flush()`或者，`IO::Handle`在获取大小之前通过调用显式刷新缓冲区：

```
open(MYCOPYFILE, ">>copyOfData.txt");
print MYCOPYFILE "\nextra data here blah blah blah\n";
MYCOPYFILE->flush();
$filesize = -s MYCOPYFILE;
print "MYCOPYFILE filesize is $filesize\n"; 
```

`-s`对文件句柄、目录句柄和表示文件名的表达式进行操作。所以你的代码`-s`工作正常。

# objective-c - gdata-objectivec 架构 armv7 在 youtube 上从 iphone sdk 共享视频时出错

> ID：15614080
> 
> 赞同：4
> 
> 时间：2013-03-25T11:42:45.493
> 
> 标签：objective-c, xcode4, static-libraries, gdata-api, armv7

我正在使用 gdata-objectivec 库从我的应用程序在 Youtube 上共享视频，我正在使用 xcode 4.6 和 iOS 6.0 来执行此操作，但编译的静态库“libGDataTouchStaticLib.a”不支持架构 armv7 和 armv7s。

谁能帮我为 armv7 架构编译 libGDataTouchStaticLib.a 吗？我也在谷歌群组上发布了[这个。](https://groups.google.com/forum/#!topic/gdata-objectivec-client/aAssnkaIz2A)

我也看到了这个[示例](https://github.com/stuffmc/YouTubeSample_iOS)代码，它成功地从 iPhone 模拟器上传了视频，但在设备上出现错误。

我也尝试使用 xcode 4.3 在设备上安装它，但没有成功。我还更改了 target>build 中的一些标志，例如标头搜索路径、其他 C 链接器标志等，并且还遵循了本[教程](http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/)

我还使用终端窗口从 svn 服务器下载了 gdata-objectivec 库，但我不知道如何使用来自 mac os 终端的命令为 armv7 架构（xcode 4.5 或 4.6）编译 libGDataTouchStaticLib.a。

如果有人使用 gdata-objectivec 库从最新的 xcode 在 Youtube 上上传视频或成功编译 libGDataTouchStaticLib.a 以获得最新的 xcode，那么请帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:12:11.907

确保在项目的构建设置中的其他链接器标志中添加以下三个项目：-ObjC、-lxml2、-all_load。它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T06:15:02.640

只需`arv7s`从`valid architectures`下面删除`build settings`并编译它就可以为您工作。

# c# - ObjectMapper 的目标是什么？

> ID：15614084
> 
> 赞同：3
> 
> 时间：2013-03-25T11:42:52.440
> 
> 标签：c#, architecture, object-object-mapping

我不明白为什么在面向对象的开发中人们使用一些 ObjectMapper 类。你能解释一下这种课程的目的是什么吗？我也在寻找有关它的文档。我找到了很多解释如何创建它的信息，但没有关于如何以及为什么使用它的信息。你知道我在哪里可以找到一篇好的文章，关于这个的博客（如果可能的话，用 C# 语言）。

一个子问题一定要明白。ObjectMapper 是 C++ 中使用的东西吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T13:14:14.320

对象到对象映射不是与编程语言相关的问题。

当对象到对象映射派上用场时，有很多有用的场景。

一种常见的情况是，当您在域应用程序层中设计了业务对象模型并开发了处理这些对象的业务服务时。现在，如果您想向任何 UI 和/或客户端公开数据怎么办？您显然不想公开业务对象。映射来了！如果您正在处理 Web 服务，您可能会将您的业务对象转换为 DTO。如果消费 UI 是 MVC 应用程序，您可以将它们转换为 ViewModel……</p>

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:49:21.447

对象映射器

此映射器（或数据绑定器或编解码器）提供了在 Java 对象（JDK 提供的核心类、bean 的实例）和匹配的 JSON 构造之间进行转换的功能。它将使用[JsonParser](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/JsonParser.html)和[JsonGenerator](http://jackson.codehaus.org/1.9.9/javadoc/org/codehaus/jackson/JsonGenerator.html)的实例来实现 JSON 的实际读/写。

据我所知，ObjectMapper 类与 C++ 无关。确实，它与 Java 有关。希望能帮助到你。无论哪种情况，您都可以参考以下链接以了解您的知识，

[http://www.massapi.com/class/ob/ObjectMapper.html](http://www.massapi.com/class/ob/ObjectMapper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:06:17.807

正如@Hiren Pandya 指出的那样，`ObjectMapper`它是一个java 类，有助于将java 对象序列化和反序列化到json 和从json 中。

通常，当您具有匹配的 json 属性（和结构）并且您不想自己编写所有映射代码时，这很有帮助。

对象映射器作为一种模式（甚至更通用）在许多场景中都很有用。每当您有两个在逻辑上属于同一概念的表示（类）时，您可能希望将数据从一个复制到另一个。

但是，我希望这会有所帮助，因为我写它听起来很笼统。也许如果你给出一个你认为可能需要它的特定案例，它会更容易解决。

# c# - LINQ 查询不给出任何结果（查找数字所属的区间）

> ID：15614087
> 
> 赞同：0
> 
> 时间：2013-03-25T11:42:59.990
> 
> 标签：c#, .net, linq

我有一个看起来像这样的属性类

```
ZipStart | ZipEnd | Acode

10000    | 13999  | BEK

14000    | 14999  | ATE 
```

现在，我有一个值，例如 11332，我想查找该数字属于哪个 Acode，为此我有以下代码：

```
 var res = from o in ListOfDataClass
                  where iCode >= o.ZipStart && o.ZipEnd <= iCode
                  select o;

            var c = res.FirstOrDefault();
            return c.Acode; 
```

但是，这有时会导致 null，尽管我还没有找到模式，但是由于这种方法出现了问题，我已经能够从调试器中推断出 iCode 实际上是 11332，但是LINQ 查询不会产生任何结果。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:43:56.080

你的条件不正确。
第二部分必须是`o.ZipEnd >= iCode`or `iCode <= o.ZipEnd`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:46:55.057

我认为你必须稍微改变一下你的条件：

```
where iCode >= o.ZipStart && iCode <=  o.ZipEnd 
```

# c++ - 在 Boost (C++) 中没有类跟踪的派生类序列化

> ID：15614093
> 
> 赞同：15
> 
> 时间：2013-03-25T11:43:30.187
> 
> 标签：c++, serialization, boost, boost-serialization

通过基类指针序列化派生类时，我在提升序列化方面遇到了一些问题。我需要一个系统来序列化系统中接收到的一些对象，所以我需要随着时间的推移进行序列化。这不是一个真正的问题，因为我可以`boost::archive::binary_oarchive`在需要时打开并序列化对象。很快我注意到 boost 是通过内存地址执行对象跟踪，所以第一个问题是共享相同内存地址的不同对象及时保存为同一个对象。这可以通过在所需的派生类中使用以下宏来解决：

`BOOST_CLASS_TRACKING(className, boost::serialization::track_never)`

这工作正常，但同样，当基类不是抽象的时，基类没有正确序列化。在以下示例中，基类序列化方法仅对第一个对象调用一次。在下文中，boost 假设该对象之前已经序列化，尽管该对象具有不同的类型。

```
#include <iostream>
#include <fstream>
#include <boost/serialization/export.hpp>
#include <boost/serialization/base_object.hpp>
#include <boost/serialization/list.hpp>
#include <boost/serialization/map.hpp>
#include <boost/serialization/vector.hpp>
#include <boost/serialization/shared_ptr.hpp>
#include <boost/archive/archive_exception.hpp>
#include <boost/archive/binary_oarchive.hpp>
#include <boost/archive/binary_iarchive.hpp>

using namespace std;

class AClass{
public:
    AClass(){}
    virtual ~AClass(){}
private:
    double a;
    double b;
    //virtual void virtualMethod() = 0;
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & a;
        ar & b;
        cout << "A" << endl;
    }
};
//BOOST_SERIALIZATION_ASSUME_ABSTRACT(Aclass)
//BOOST_CLASS_TRACKING(AClass, boost::serialization::track_never)

class BClass : public AClass{
public:
    BClass(){}
    virtual ~BClass(){}
private:
    double c;
    double d;
    virtual void virtualMethod(){};
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<AClass>(*this);
        ar & c;
        ar & d;
        cout << "B" << endl;
    }
};
// define export to be able to serialize through base class pointer
BOOST_CLASS_EXPORT(BClass)
BOOST_CLASS_TRACKING(BClass, boost::serialization::track_never)

class CClass : public AClass{
public:
    CClass(){}
    virtual ~CClass(){}
private:
    double c;
    double d;
    virtual void virtualMethod(){};
private:
    friend class boost::serialization::access;
    template<class Archive>
    void serialize(Archive & ar, const unsigned int version)
    {
        ar & boost::serialization::base_object<AClass>(*this);
        ar & c;
        ar & d;
        cout << "C" << endl;
    }
};
// define export to be able to serialize through base class pointer
BOOST_CLASS_EXPORT(CClass)
BOOST_CLASS_TRACKING(CClass, boost::serialization::track_never)

int main() {
    cout << "Serializing...." << endl;
    {
        ofstream ofs("serialization.dat");
        boost::archive::binary_oarchive oa(ofs);
        for(int i=0;i<5;i++)
        {
            AClass* baseClassPointer = new BClass();
            // serialize object through base pointer
            oa << baseClassPointer;
            // free the pointer so next allocation can reuse memory address
            delete baseClassPointer;
        }

        for(int i=0;i<5;i++)
        {
            AClass* baseClassPointer = new CClass();
            // serialize object through base pointer
            oa << baseClassPointer;
            // free the pointer so next allocation can reuse memory address
            delete baseClassPointer;
        }
    }
    getchar();
    cout << "Deserializing..." << endl;
    {
        ifstream ifs("serialization.dat");
        boost::archive::binary_iarchive ia(ifs);
        try{
            while(true){
                AClass* a;
                ia >> a;
                delete a;
            }
        }catch(boost::archive::archive_exception const& e)
        {

        }
    }
    return 0;
} 
```

执行这段代码时，结果如下：

```
Serializing....
A
B
B
B
B
B
C
C
C
C
C

Deserializing...
A
B
B
B
B
B
C
C
C
C
C 
```

**所以基类只被序列化一次，尽管派生类有明确的 track_never 标志**。有两种不同的解决方法可以解决此问题。第一个是使用纯虚方法使基类抽象并调用宏`BOOST_SERIALIZATION_ASSUME_ABSTRACT(Aclass)`，第二个是将 track_never 标志也放在基类中（在代码中注释）。

这些解决方案都不符合我的要求，因为我想在未来对系统状态进行准时序列化，这需要跟踪给定 DClass 扩展 A（不是 B 或 C）的特性，而且 AClass 不应该是抽象的。

有什么提示吗？有什么方法可以显式调用基类序列化方法，避免基类中的跟踪功能（在派生类中已经禁用）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:06:32.387

最终问题似乎是`boost::serialization`存档代表了单个时间点的状态，并且您希望存档包含已更改的状态，即已重用的指针。我不认为有一个简单的`boost::serialization`标志可以诱发你想要的行为。

但是，我认为还有其他解决方法可能就足够了。您可以将一个类的序列化封装到它自己的归档中，然后将封装归档。也就是说，您可以`B`像这样实现序列化（请注意，您必须拆分`serialize()`为`save()`and `load()`）：

```
// #include <boost/serialization/split_member.hpp>
// #include <boost/serialization/string.hpp>
// Replace serialize() member function with this.

template<class Archive>
void save(Archive& ar, const unsigned int version) const {
  // Serialize instance to a string (or other container).
  // std::stringstream used here for simplicity.  You can avoid
  // some buffer copying with alternative stream classes that
  // directly access an external container or iterator range.
  std::ostringstream os;
  boost::archive::binary_oarchive oa(os);
  oa << boost::serialization::base_object<AClass>(*this);
  oa << c;
  oa << d;

  // Archive string to top level.
  const std::string s = os.str();
  ar & s;
  cout << "B" << endl;
}

template<class Archive>
void load(Archive& ar, const unsigned int version) {
  // Unarchive string from top level.
  std::string s;
  ar & s;

  // Deserialize instance from string.
  std::istringstream is(s);
  boost::archive::binary_iarchive ia(is);
  ia >> boost::serialization::base_object<AClass>(*this);
  ia >> c;
  ia >> d;
  cout << "B" << endl;
}

BOOST_SERIALIZATION_SPLIT_MEMBER() 
```

因为 的每个实例都`B`被序列化到自己的档案中，`A`所以实际上不会被跟踪，因为每个档案只有一个引用`B`. 这会产生：

```
Serializing....
A
B
A
B
A
B
A
B
A
B
A
C
C
C
C
C

Deserializing...
A
B
A
B
A
B
A
B
A
B
A
C
C
C
C
C 
```

这种技术的一个潜在反对意见是封装的存储开销。原始测试程序的结果是 319 字节，而修改后的测试程序产生 664 字节。但是，如果将 gzip 应用于两个输出文件，则原始文件的大小为 113 字节，修改后的文件大小为 116 字节。如果空间是一个问题，那么我建议在外部序列化中添加压缩，这可以很容易地使用`boost::iostreams`.

另一种可能的解决方法是将实例的生命周期延长到存档的生命周期，这样指针就不会被重用。您可以通过将`shared_ptr`实例容器与存档相关联，或从内存池中分配实例来实现此目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T14:45:22.410

在仔细研究 boost::serialization 之后，我也确信没有直接的解决方案可以满足您的要求。正如您已经提到的，序列化的跟踪行为是使用 BOOST_CLASS_TRACKING 逐类声明的。此 const 全局信息在类 oserializer 的虚拟方法跟踪中进行解释。

```
 virtual bool tracking(const unsigned int /* flags */) 
```

因为这是一个模板类，您可以为您的类显式实例化此方法。

```
namespace boost {
namespace archive {
namespace detail {

template<>
    virtual bool oserializer<class binary_oarchive, class AClass >::tracking(const unsigned int f /* flags */) const {
        return do_your_own_tracking_decision();
    }

}}} 
```

现在您可以尝试使用诸如全局变量之类的东西并不时更改跟踪行为。（例如，取决于将哪个派生类写入存档。）这似乎适用于“序列化”，但“反序列化”会引发异常。这样做的原因是，每个类的“跟踪”状态只是写入存档的状态。因此，如果读取 BClass 或 CClass，反序列化总是期望 AClass 的数据（如果 AClass 的第一次写入尝试禁用跟踪）。

一种可能的解决方案是在 tracking() 方法中使用 flags 参数。此参数表示创建存档的标志，默认为“0”。

```
binary_oarchive(std::ostream & os, unsigned int flags = 0) 
```

归档标志在 basic_archive.hpp 中声明

```
enum archive_flags {
    no_header = 1,  // suppress archive header info
    no_codecvt = 2,  // suppress alteration of codecvt facet
    no_xml_tag_checking = 4,   // suppress checking of xml tags
    no_tracking = 8,           // suppress ALL tracking
    flags_last = 8
}; 
```

no_tracking 目前似乎不受支持，但您现在可以将此行为添加到跟踪中。

```
template<>
    virtual bool oserializer<class binary_oarchive, class AClass >::tracking(const unsigned int f /* flags */) const {
        return !(f & no_tracking);
    } 
```

现在，您可以针对不同的档案决定是否应该跟踪 AClass。

```
 boost::archive::binary_oarchive oa_nt(ofs, boost::archive::archive_flags::no_tracking); 
```

这是您示例中的更改。

```
int main() {
    cout << "Serializing...." << endl;
    {
        ofstream ofs("serialization1.dat");
        boost::archive::binary_oarchive oa_nt(ofs, boost::archive::archive_flags::no_tracking);
        //boost::archive::binary_oarchive oa(ofs);
        for(int i=0;i<5;i++)
        {
            AClass* baseClassPointer = new BClass();
            // serialize object through base pointer
            oa_nt << baseClassPointer;
            // free the pointer so next allocation can reuse memory address
            delete baseClassPointer;
        }

        ofstream ofs2("serialization2.dat");
        boost::archive::binary_oarchive oa(ofs2);
        //boost::archive::binary_oarchive oa(ofs);

        for(int i=0;i<5;i++)
        {
            AClass* baseClassPointer = new CClass();
            // serialize object through base pointer
            oa << baseClassPointer;
            // free the pointer so next allocation can reuse memory address
            delete baseClassPointer;
        }
    }
    getchar();
    cout << "Deserializing..." << endl;
    {
        ifstream ifs("serialization1.dat");
        boost::archive::binary_iarchive ia(ifs);
        try{
            while(true){
                AClass* a;
                ia >> a;
                delete a;
            }
        }catch(boost::archive::archive_exception const& e)
        {

        }

        ifstream ifs2("serialization2.dat");
        boost::archive::binary_iarchive ia2(ifs2);
        try{
            while(true){
                AClass* a;
                ia2 >> a;
                delete a;
            }
        }catch(boost::archive::archive_exception const& e)
        {

        }

    }
    return 0;
}

namespace boost {
namespace archive {
namespace detail {

template<>
    virtual bool oserializer<class binary_oarchive, class AClass >::tracking(const unsigned int f /* flags */) const {
        return !(f & no_tracking);
    }

}}} 
```

这可能仍然不是您想要的。还有更多方法可以通过自己的实现进行调整。或者您必须派生自己的存档类。

# asp.net - VB.Net 函数无法由 GridViewCommandEventArgs 执行

> ID：15614094
> 
> 赞同：0
> 
> 时间：2013-03-25T11:43:34.157
> 
> 标签：asp.net, vb.net, gridview

我正在开发一个 ASP.Net 网站。我使用 GridView 来显示数据库中的一些信息。此外，我在 GridView 的每一行上都放置了一个按钮，并设置了按钮的 CommandName。

在网页中：

> asp:Button ID="btnShip" runat="server" CommandArgument='<%#Eval("Invoice_No") %>' CommandName="Ship" Text="Ship" Visible="True"

然后我创建了一个 VB 函数来处理这个 GridView 的 GridViewCommandEventArgs。这是以下编码：

> Protected Sub Purchase_Process_RowCommand(ByVal sender As Object, ByVal e As GridViewCommandEventArgs) 处理 GridView1.RowCommand
> 
> 如果 e.CommandName = "Ship" 那么......

基本上，如果我按下命令名称为“Ship”的按钮，它应该会做一些事情。但是，它不起作用。我尝试创建一个空网页，然后将代码复制到该页面中。它工作了一会儿……

我还在 If 语句之前放了一个 MsgBox()，我发现当我按下 GridView 中的按钮时该函数不会执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:03:54.960

检查网格属性，ASP 代码中应该有 Purchase_Process_RowCommand

```
 <asp:GridView ID="Purchase_Process" runat="server"
     OnRowCommand="Purchase_Process_RowCommand">
       <asp:TemplateField>
         <ItemTemplate>
         <asp:Button runat="server" ID="Invoice" Text="Edit Information"
          CommandName="Invoice" CommandArgument=<%# Eval("Invoice_No") %> />
         </ItemTemplate>
        </asp:TemplateField>
    </asp:GridView> 
```

# asp.net - 在回发时在 ASP.NET 应用程序中缓存/持久化菜单的最佳方法是什么

> ID：15614109
> 
> 赞同：0
> 
> 时间：2013-03-25T11:44:12.753
> 
> 标签：asp.net, caching

在 ASP.NET 应用程序中缓存菜单以优化性能的最佳方法是什么？请注意，菜单是根据用户角色和其他标准（例如选择页面上的某些控件/部分）构建的，并且菜单的数据是从数据库中获取的。目前，菜单正在每个页面的每个回发上构建。如何避免这种情况？我应该为包含菜单的用户控件启用视图状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:22:53.320

为了缓存页面的输出，我们需要`@OutputCache`在页面顶部指定一个指令。

有一个属性`VaryByParam`，可用于根据查询字符串参数改变缓存。

看看这个关于缓存的[博客是值得的。](http://www.codeproject.com/Articles/6158/Caching-in-ASP-NET)

# gjs - Gnome-shell-extension 析构函数（在 Gnome Shell 退出时运行）？

> ID：15614120
> 
> 赞同：2
> 
> 时间：2013-03-25T11:44:31.640
> 
> 标签：gjs, gnome-shell-extensions

当 Gnome Shell 关闭（例如计算机关闭）时，是否有任何技巧可以在扩展中运行我的“析构函数”代码？我需要保存一些状态变量以`init()`在启动时再次加载它们。

我需要类似 function`enable()`或`disable()`. 也许有一些信号被触发，我可以将我的代码连接到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T18:29:03.997

-file 中的`disable()`-function 在以下情况下`extension.js`被调用：

*   用户在运行的 shell 中禁用扩展
*   shell 关闭或重新启动

请记住，它旨在进行 UI 操作，因此您应该*快速*完成它（不要繁重）。

# c# - 是否有低级网络库来嗅探和更改网络流量？

> ID：15614123
> 
> 赞同：3
> 
> 时间：2013-03-25T11:44:46.910
> 
> 标签：c#, .net, api, networking, sniffing

我正在寻找一种方法来嗅探网络数据包并用 C# 对它们进行编码（总而言之：改变网络流量）。

我不知道如何解释我的请求，但我需要“键盘挂钩”之类的东西。

**.net 或 Windows API 中是否有任何库或软件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:48:29.910

我认为默认情况下这是不可能的。但是有很多第三方库可以让你做到这一点。看一眼

*   [SharpPcap - .NET 的数据包捕获框架](http://www.codeproject.com/Articles/12458/SharpPcap-A-Packet-Capture-Framework-for-NET)
*   [数据包捕获和分析器](http://www.codeproject.com/Articles/4194/Packet-Capture-and-Analayzer)
*   [Pcap.Net](http://pcapdotnet.codeplex.com/)

# vb.net - 基于emgucv的人体全身检测与身高估计

> ID：15614125
> 
> 赞同：0
> 
> 时间：2013-03-25T11:44:54.220
> 
> 标签：vb.net, emgucv

我正在开发使用 emgucv 估计人类身高的程序。我使用 fullbodydetection 来检测人体。我使用检测到的矩形框的高度作为估计高度的参考。

我的程序编写如下。我使用 vb 作为我的编程语言

```
 imgcolor = ImgCap.QueryFrame.Flip(Emgu.CV.CvEnum.FLIP.HORIZONTAL)
    imggray = imgcolor.Convert(Of Gray, Byte)()

    If TextBox1.Text = "Human Detected" Then
        TextBox2.Text = Height
    Else
        TextBox2.Text = 0

    End If

    TextBox1.Text = "Human Detected"

    For Each body As MCvAvgComp In imggray.DetectHaarCascade( _
    objecttodetect, _
    1.2, _
    1, _
         CvEnum.HAAR_DETECTION_TYPE.FIND_BIGGEST_OBJECT, _
    New Size(50, 50))(0) 
        imgcolor.Draw(body.rect, New Bgr(Color.Blue), 3)

        Height = body.rect.Height 
```

我的问题是

1）当我调试全身检测不准确时。我应该怎么做才能使检测结果准确？

2）我的图像框的当前大小是 640,480。我想将宽度减小到 320，但是当我这样做时，图像框中的视图和我的相机一样减半（这意味着即使我盖住了相机镜头的一半，它也不会影响图像框中的图像。

提前谢谢您的回答。对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:01:39.453

我对问题 1 没有很好的答案，但我可以回答问题 2：

你需要看看`SetZoomScale`方法`ImageBox`。如果图像太大，我编写了这个方法来自动缩放 ImageBox。它在 C# 中，但您应该能够将其转换为 VB。

```
private void ScaleImageBox(Emgu.CV.UI.ImageBox imgBox, Size imgSize)
{
    float scaleFactor = 1;
    if (imgSize.Width > imgBox.Width || imgSize.Height > imgBox.Height)
    {
        float widthFactor = imgBox.Width / (float)imgSize.Width;
        float heightFactor = imgBox.Height / (float)imgSize.Height;
        scaleFactor = Math.Min(widthFactor, heightFactor);
    }
    imgBox.SetZoomScale(scaleFactor, new Point(0, 0));
} 
```

# android - 如何强制 URL 在主屏幕应用程序中打开？

> ID：15614126
> 
> 赞同：0
> 
> 时间：2013-03-25T11:44:55.017
> 
> 标签：android, iphone, ios

如果移动用户已将`web`应用程序添加到他们的主屏幕（或`iOS`或`Android`），有没有办法强制未来的`URL`点击（例如来自短信）在该`home`屏幕应用程序中打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:04:11.487

首先我不认为`Home`iOS中有App概念

在 android 中，开发人员可以指定他想要使用的意图，并且一旦该意图被触发，用户就会看到一个选择器（用户可以选择您的应用程序来打开它）。

这可以通过在您的意图过滤器中宣布您正在收听它们，使用这样的过滤器来轻松完成网络链接：

```
<intent-filter>
 <action android:name="android.intent.action.VIEW"></action>
 <category android:name="android.intent.category.DEFAULT"></category>
 <category android:name="android.intent.category.BROWSABLE"></category>
</intent-filter> 
```

另一方面，在 iOS 中，它们无法拦截您的应用程序之外的用户操作，我记得当他们试图从谷歌浏览器收听地图应用程序的呼叫时，谷歌抱怨过这一点

> Daniel Graf：我们希望我们的原生 Chrome 和搜索应用程序让您有机会进入 Google 地图。使用我们的新 SDK，开发人员可以根据需要将其集成到他们的应用程序中。Safari 是我们无法控制的。 [资源](http://techcrunch.com/2012/12/12/take-that-apple-maps/)

# facebook - 使用 FQL 获取所有 facebook 消息

> ID：15614129
> 
> 赞同：3
> 
> 时间：2013-03-25T11:45:03.220
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我需要为具有 FQL 的 facebook 用户获取线程内的所有用户线程和消息。

当我运行以下 FQL 时，它会返回所有线程 ID

```
select thread_id,message_count from thread where viewer_id = me() and folder_id = 0 
```

在收件箱文件夹中显示线程和消息计数，

```
 {
  "data": [
    {
      "thread_id": "196940283688620", 
      "message_count": 99
    }, 
    {
      "thread_id": "283904071679203", 
      "message_count": 1
    }, 
```

但是，当我运行以下查询以获取给定 thread_id 中的所有消息时，假设 **`"thread_id": "196940283688620",`**

```
select message_id,body,viewer_id , thread_id from message where thread_id = 196940283688620 and viewer_id = me() 
```

由于第一个查询结果显示我有 99 条消息，**`"thread_id": "196940283688620",`** 但查询仅返回 20 条消息。

1-我怎么了？我需要在单个 FQL 中获取线程中的所有消息，还是需要多个 FQL？2- 为 facebook 身份验证用户获取线程内的所有线程和消息的最佳方法是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-03T15:46:11.420

我的解决方案是这样的：

```
SELECT message_id,body,viewer_id, thread_id FROM message 
  WHERE thread_id = 196940283688620 AND viewer_id = me() LIMIT 0,30 
```

获取前 30 个结果，然后

```
SELECT message_id,body,viewer_id, thread_id FROM message 
      WHERE thread_id = 196940283688620 AND viewer_id = me() LIMIT 30,60 
```

接下来的 30 个元素。

等等......我还没有找到更好的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T14:01:48.673

对于 Facebook 没有返回线程中显示的所有消息的问题，您可能遇到了默认的内部限制。`LIMIT`您可以通过使用FQL中的语句绕过此问题：

```
SELECT message_id,body,viewer_id, thread_id FROM message 
  WHERE thread_id = 196940283688620 AND viewer_id = me() LIMIT 200 
```

根据我的经验，Facebook 设置的最大限制为 500 或 5000 个项目，具体取决于对象。当您超过他们的最大值时，您将开始获得比您返回的限制少得多的项目。此时，您需要找到一种方法来对具有多个查询的数据进行分页。

至于获取所有线程和消息的最有效方法，它是[FQL 多查询](https://developers.facebook.com/docs/technical-guides/fql/#multi)。

您可以将查询重组为如下形式：（为便于阅读而添加了空格）

```
 {'msg_threads':
    'SELECT thread_id,message_count FROM thread WHERE viewer_id = me() AND folder_id = 0',
  'msg_messages':
    'SELECT message_id,body,viewer_id, thread_id FROM message 
       WHERE thread_id IN (SELECT thread_id FROM #msg_threads)
       AND viewer_id = me() LIMIT 200'
  } 
```

# android - 活动中的静态成员视图 - Android

> ID：15614130
> 
> 赞同：2
> 
> 时间：2013-03-25T11:45:04.083
> 
> 标签：android, static, views, android-activity

在我的应用程序的每个活动中，所有视图（网格/列表/按钮......很多）都被声明为活动的静态成员。这是好的做法还是有更好的方法。一直想弄清楚这个一个月，最后决定问。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:54:39.097

[http://developer.android.com/training/articles/perf-tips.html](http://developer.android.com/training/articles/perf-tips.html)。查看文档以了解何时使用静态变量。

我同意Boardy 的评论。为什么你需要你的 ui 元素是静态的。

不推荐使用静态变量。静态变量存储在堆的 PermGen 部分中。即使类完成了它的工作，静态变量也会留在堆中。垃圾收集器会做标记和清扫。如果您在第二个活动中引用的第一个活动中有一个静态变量，则链接将保持很长时间。如果您使用更多静态变量，您可能会出现内存泄漏。也减少使用不必要的物品。

静态变量由 ClassLoader 引用的 Class 对象引用 - 因此，除非 ClassLoader 以某种方式删除 Class 或 ClassLoader 本身符合垃圾收集条件，否则静态变量不会被垃圾收集。因此，如果您使用在许多类中引用的静态变量，除非这些类可用于垃圾收集，否则这些类和声明静态变量的类不能被垃圾收集。所以这会导致堆内存扩展导致内存泄漏。

在这个视频中，这个人谈到了为什么不应该使用静态变量以及如何避免内存泄漏。[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。这家伙谈到使用 MAT Analyzer 来检查内存泄漏。

也看看这个链接。[http://developer.android.com/guide/faq/framework.html](http://developer.android.com/guide/faq/framework.html.Have)。查看标题下的详细信息 *如何在单个应用程序中的活动/服务之间传递数据？。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:52:41.407

这两个链接可以回答您的问题：

[一](http://developer.android.com/guide/practices/index.html)

[二](http://developer.android.com/training/articles/perf-tips.html)

还有应用程序性能的详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T11:51:19.320

我个人会避免使用静态变量，因为这些变量保存在内存中，即使活动可能不再需要它们。

UI 组件实际上不需要是静态的，因为它们应该使用 findViewById 从 onCreate 中检索，或者在 onCreate 中以编程方式创建，并且不需要永久存储变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-06T17:59:52.000

您不应将 Activity 类中的视图变量限定为`static`，因为静态变量是针对该类而不是针对您的 Activity 实例的：

```
Public MyActivity extends Activity {
    private static final string TAG = MyActivity.class.getSimpleName(); // This is a good candidate for `static`.
    private static Switch myFirstSwitch; // This is a bad candidate for `static`
    private Switch mySecondSwitch; // This is good, and can be accessed by onCreate(), onResume(), etc.
    // …
} 
```

如果你目前在使用过程中没有遇到问题，那是因为实际上Android在解析文件的时候`myFirstSwitch`会实例化一个实例。因此，在应用程序级别，使用变量和不使用变量之间没有显着差异，尽管内部静态变量必须以不同方式处理。`MyActivity``AndroidManifest.xml``static`

但是，理论上，您可以`MyActivity`自己在代码中多次实例化。例如，出于某些原因或仅出于测试目的，您可能会在某处写入`MyActivity testActivity = new MyActivity();`。在这种情况下，您可能无法使用该`static` `myFirstSwitch`变量。

# scala - 消息：net.liftweb.json.MappingException：不知道如何反序列化

> ID：15614131
> 
> 赞同：0
> 
> 时间：2013-03-25T11:45:13.647
> 
> 标签：scala, exception, serialization, mapping, lift

我对 Scala/Lift 很陌生，遇到了以下问题：

```
class Tests {
case class JTest(
      thisUrl:String,
      id:Int,
      desc:String,
      results:String,
      isEnabled:Boolean,
      attackerAppliance:String,
      victimAppliance:String,
      lastModified:String)

def displayTest(in: NodeSeq): NodeSeq = {
implicit val formats = DefaultFormats.withHints(
           ShortTypeHints(List(classOf[JTest])))

val content = fromInputStream( url.openStream ).getLines.mkString("\n")

        val json = parse(content)
        val test = json.extract[JTest]
        Helpers.bind("test", in,
          AttrBindParam("thisUrl", test.thisUrl, "href"),
          "id" -> test.id,
          "desc" -> test.desc,
          "results" -> test.results,
          "isEnabled" -> test.isEnabled,
          "attackerAppliance" -> test.attackerAppliance,
          "victimAppliance" -> test.victimAppliance,
          "lastModified" -> test.lastModified)

}
} 
```

我收到以下错误消息：

```
Message: net.liftweb.json.MappingException: Do not know how to deserialize 'JTest' 
```

示例 JSON：

```
{"jsonClass":"JTest","thisUrl":"/api/test/1","id":1,"desc":"Vulnerability in Server Service","results":"/api/test/1/results","isEnabled":true,"attackerAppliance":"/api/appliance/2","victimAppliance":"/api/appliance/6","lastModified":"2012-08-08 11:46:29.004"} 
```

我尝试了几件事，但它接缝我卡在这里。任何人都可以指出我正确的方向吗？顺便提一句。我正在使用 scala 2.7.7！

干杯，恩佐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:59:23.930

如果您`jsonClass`从 JSON 输入中删除提示，它应该会解析。就像是：

```
{"thisUrl":"/api/test/1",
"id":1,
"desc":"Vulnerability in Server Service",
"results":"/api/test/1/results",
"isEnabled":true,
"attackerAppliance":"/‌​api/appliance/2",
"victimAppliance":"/api/appliance/6",
"lastModified":"2012-08-08 11:46:29.004"} 
```

否则，您可以尝试`[]`在输入周围添加，例如：

```
[{"jsonClass":"JTest",
"thisUrl":"/api/test/1",
"id":1,
"desc":"Vulnerability in Server Service",
"results":"/api/test/1/results",
"isEnabled":true,
"attackerAppliance":"/‌​api/appliance/2",
"victimAppliance":"/api/appliance/6",
"lastModified":"2012-08-08 11:46:29.004"}] 
```

我认为它正在寻找一个集合，因为该`jsonClass`属性用于帮助确定将当前项目反序列化为哪个子类型。可能有一种方法可以让它与单个元素一起工作，但我不确定那是什么。

我询问 scala 版本的原因是，此时 2.7.7 已经很老了（2.10 是最新的），更新的版本可能会让查找变得更容易一些。

# android - 9 Android 4.0中的补丁按钮太高了

> ID：15614140
> 
> 赞同：0
> 
> 时间：2013-03-25T11:45:26.720
> 
> 标签：android, button, nine-patch

我的应用程序有 9 个补丁按钮，在 Android 2.3 中它们可以正确显示，但是当我尝试使用 Android 4.0 的设备时，按钮太高了，我需要它们，就像在 Android 2.3 中一样。

它们在`wrap_content`布局中。

android 2.3 中的图像： [http](http://picturepush.com/public/12502980)
://picturepush.com/public/12502980 android 4.0 中的图像：http: [//picturepush.com/public/12502985](http://picturepush.com/public/12502985)
我的 9patch 按钮：[http ://picturepush.com/public/12502990](http://picturepush.com/public/12502990)

有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:51:47.290

这与 9-patch 无关，与 Button 小部件、主题等有关。

解决此问题的最简单方法可能是在布局设计器中将`Min Height`属性设置为。`0dp`

# javascript - remote_form_for 上未定义 Ajax

> ID：15614143
> 
> 赞同：0
> 
> 时间：2013-03-25T11:45:45.037
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-2

我在提交表单时遇到错误。这种形式定义为：

```
<% remote_form_for @my_object do |f| %>
  ...
<% end %> 
```

生成的 HTML 是：

```
<form action="/my_objects" id="new_my_object" method="post"
   onsubmit="new Ajax.Request('/customers', {
      asynchronous:true,
      evalScripts:true,
      parameters:Form.serialize(this)
   }); return false;">
   ...
</form> 
```

我遇到了这个 JS 错误：

```
Uncaught ReferenceError: Ajax is not defined 
```

我在某处读到这是一个原型错误，但我不明白我犯的错误。

我的配置是 Rails 2.3.16、Ruby 1.8.6、jquery 1.9.1 和 jquery-ui 1.10.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:36:24.797

默认情况下，rails 2.x（和更早版本）为 Prototype 生成 JS 代码（参见[javascript_helper](http://apidock.com/rails/v2.3.8/ActionView/Helpers/JavaScriptHelper)和[prototype_helper](http://apidock.com/rails/v2.3.8/ActionView/Helpers/PrototypeHelper)。

要在 Rails 2.x 中生成 jQuery 代码，请为 rails 2.x 添加[jrails](https://github.com/aaronchi/jrails)插件，您将能够使用相同的 rails 助手，如 remote_form_for 或 link_to_remote 和 jQuery。

jrails.js 的这一部分可能在 jquery 1.9 中已过时：

```
(function($) {
  $.ajaxSettings.accepts._default = "text/javascript, text/html, application/xml, text/xml, */*";
})(jQuery); 
```

用这段代码替换它：

```
$.ajaxPrefilter(function (options, originalOptions, jqXHR) { 
  options.beforeSend = function () {
    jqXHR.setRequestHeader("accept", '*/*;q=0.5, ' + $.ajaxSettings.accepts.script);
    if ($.isFunction(originalOptions.beforeSend)) originalOptions.beforeSend();
  };
}); 
```

在控制器中进行 ajax 请求检测：

```
def my_action
  respond_to |format|
    format.js { ... }
    format.html { ... }
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:04:11.873

如果你想使用 JQuery 试试这个：

```
<%= form_for @my_object, :html => {:method => "post" }, :remote => true do |form| %>

<% end %> 
```

另请查看 Rails 指南：[http ://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html](http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T18:10:46.623

我知道这不是您问题的答案。但是我使用 JQuery AJAX 而不是 Rails`remote attribute`来避免这些类型的混淆。将 AJAX 与 JQuery 一起使用非常方便。

```
<% form_for @my_object do |f| %>
  ...
<% end %>

<script>
  $(function(){
    $('#form_id').submit(function(){
      $.post($(this).attr('action'), $(this).serialize(), function(data, status){
        alert(status)
      }) 
    })
  });
</script> 
```

# java - 单击鼠标时循环重复一个动作

> ID：15614146
> 
> 赞同：1
> 
> 时间：2013-03-25T11:45:48.757
> 
> 标签：java, loops

我正在制作一个 connect 4 游戏，点击如下。

```
 public void mouseClicked(MouseEvent e) {
    xPos = e.getX();
    yPos = e.getY();
    this.repaint();

    x = e.getX(); 
    if(x <= 400) { 
        x = x/48; 
        System.out.println("Column number " + x);
        positions[0][0]=1;
        Component board = e.getComponent();
    }
} 
```

然后我有一种方法可以在网格上创建一个红色圆圈，如下所示

```
 public void fillCircle(Graphics g) {
    {
        g.setColor(Color.red);
        g.fillOval(xPos,yPos,40,40);
    }
} 
```

但是，单击时只会出现一个圆圈，当您再次单击时，该圆圈会被删除并放置在新位置。

我相信我需要在 fill circle 方法中包含某种循环，这样它就不会只是摆脱圆圈并将 onew 放在新位置，而是将它留在那里并在新位置放置一个新圆圈？

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T11:52:50.617

您需要将位置添加到某个`ArrayList`或某物，因为您只是覆盖了变量`xPos`以及`yPos`单击时。我们可以创建一个`Position`类来保存 x 和 y 值，所以我们只需要一个`ArrayList`。

```
ArrayList<Position> positions = new ArrayList<Position>();

public void mouseClicked(MouseEvent e) {
    positions.add(new Position(e.getX(), e.getY()));

    // ...
} 
```

和`Position`班级

```
class Position {
    public int x;
    public int y;

    public Position(int x, int y) {
        this.x = x;
        this.y = y;
    }
} 
```

然后在你的函数中画出所有的圆圈

```
public void fillCircle(Graphics g) {
{
    g.setColor(Color.red);
    for (int i = 0; i < positions.size(); i++)
        g.fillOval(positions.get(i).x, positions.get(i).y, 40, 40);
} 
```

## 更新

将其包含在文件的最顶部。

```
import java.util.ArrayList; 
```

这将导入您要使用的 ArrayList 库。

# ios - 在哪里放置自定义单元格的 setScrollsToTop

> ID：15614150
> 
> 赞同：0
> 
> 时间：2013-03-25T11:45:58.273
> 
> 标签：ios, uitableview, scroll, uitextview

我有一个 UITableView 有两个自定义单元格。我为每个单元格子类化了 UITableViewCell。在这两者中，我都有一个可以滚动的 UITextView。我希望用户能够点击顶部栏滚动到顶部。我知道我需要为文本视图关闭 scrollsToTop。但我不知道具体放在哪里。我已经尝试过这样的自定义单元格。

```
#import "MessageCell.h"

@implementation MessageCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:@"MessageCell"];
if (self) {
    // Initialization code

    [_messageText setScrollsToTop:NO];

}
return self;
}

@end 
```

但这没有用。有没有人有任何想法？我不知道还能把它放在哪里。我在实际的 tableview vc 中尝试过，但它无法识别我的属性。提前感谢您的任何帮助！

配合我在下面的回复。我在 cellForRowAtIndexPath 中调用了一个名为 FaceBookCell 的单元格。这个单元格包含一个 UIImageView。我将其细分为消息单元和光电管。他们都需要 UIImageView，但消息单元格在 UITextView 中显示消息，Photocell 在 UITextView 中显示消息，在另一个 UIImageVIew 中显示照片。我需要让 Facebook 单元知道停止其他单元的 scrollsToTop。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:13:32.970

您还需要分配初始化文本视图尝试从以下位置调用该方法：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
....
[cell stopScrollToTop];

.....
return cell;
} 
```

////在单元格中

```
#import "MessageCell.h"

@implementation MessageCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:@"MessageCell"];
if (self) {
    // Initialization code

    _messageText = [[UITextView alloc]init];

}
return self;
}

-(void)stopScrollToTop{
   [_messageText setScrollsToTop:NO];
}

@end 
```

# c# - 插入数据库时 出现日期时间错误

> ID：15614151
> 
> 赞同：0
> 
> 时间：2013-03-25T11:46:18.760
> 
> 标签：c#, .net, winforms, datetime

我的数据库中有日期时间数据类型的字段。

我正在解析日期如下：

```
DateTime dt = DateTime.ParseExact(fileDate, "dd/MM/yyyy",
                                  CultureInfo.InvariantCulture); 
```

在将其插入数据库时​​，我正在执行以下操作：

```
cmd= new SqlCommand("insert into closingStock values('" + subLine[1].ToString() +
     "','" + subLine[2].ToString() + "','" + DateTime.Parse(subLine[3]) + "','" +
     subLine[10].ToString() + "','" + dt + "')", con);
cmd.ExecuteNonQuery(); 
```

它给了我以下错误：

```
String was not recognized as valid datetime. 
```

我犯了什么错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:49:27.493

您可以尝试使用[DateTime.TryParseExact](http://msdn.microsoft.com/en-IN/library/system.datetime.tryparseexact.aspx)：

```
string strDate = "25/03/2013";           
DateTime datDate;
DateTime.TryParseExact(strDate , new string[] { "dd/MM/yyyy" },
                       System.Globalization.CultureInfo.InvariantCulture,
                       System.Globalization.DateTimeStyles.None, out datDate);
Console.WriteLine(datDate); 
```

**编辑 1** 我认为你得到的异常是因为`DateTime.Parse(subLine[3])`，检查`DateTime`格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T11:53:04.693

我多次遇到此错误，我使用字符串作为日期时间字段：

```
string myDate= DateTime.Now.Year.ToString() + "-" + DateTime.Now.Month.ToString()
   + "-" + DateTime.Now.Day.ToString() + " " + DateTime.Now.Hour.ToString() 
   + ":" + DateTime.Now.Minute.ToString() + ":" + DateTime.Now.Second.ToString() 
   + "." + DateTime.Now.Millisecond.ToString(); 
```

然后我在我的表中插入这个字符串，它工作正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:55:40.997

您应该使用参数化查询。这样您就不必担心查询的格式是否正确，只需将其设为正确的 DateTime。

鉴于您正确解析的 DateTime （根据 Arshad 的回答）：

```
DateTime dt;
DateTime subline3Date;
//...
cmd = new SqlCommand("insert into closingStock values(?,?,?,?,?)", con);
cmd.Parameters.Add(subLine[1]);
cmd.Parameters.Add(subLine[2]);
cmd.Parameters.Add(subline3Date);
cmd.Parameters.Add(subLine[10]);
cmd.Parameters.Add(dt);
cmd.ExecuteNonQuery(); 
```

# html - 水平对齐div

> ID：15614152
> 
> 赞同：1
> 
> 时间：2013-03-25T11:46:19.300
> 
> 标签：html, css

我正在为我的项目创建一个在线购物网站，在我用来`float:left`正确列出它们的产品列表中，但问题是产品 div 的大小将是可变的，如果一个 div 的大小增加它会破坏我的列表设计。请帮助我这是我的代码：

HTML：

```
<div class="container">
            <div class="unit"  style="height:140px">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>
            <div class="unit">
            </div>          
        </div> 
```

CSS：

```
.unit{float:left;width:170px;height:133px;border: 1px solid red;margin:5px;} 
```

这是小提琴链接：http: [//jsfiddle.net/iiison/VPESu/](http://jsfiddle.net/iiison/VPESu/)

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:49:52.717

删除`float`和添加`display:inline-block`

```
.unit{
    width:170px;
    height:133px;
    border: 1px solid red;
    margin:5px; 
    display:inline-block; 
    vertical-align:top
} 
```

**[演示](http://jsfiddle.net/VPESu/3/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T11:48:47.693

使用**max-height**属性（如果需要，使用**max-width**）：

```
.unit{float:left;width:170px;height:133px;max-height:133px;border: 1px solid red;margin:5px;} 
```

**编辑：**如果你不想设置固定高度/宽度，你可以试试这个：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

**编辑：**等高 div（到最高 div）：

[http://filamentgroup.com/examples/equalHeights/](http://filamentgroup.com/examples/equalHeights/)

[http://filamentgroup.com/lab/setting_equal_heights_with_jquery/](http://filamentgroup.com/lab/setting_equal_heights_with_jquery/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T11:54:56.813

将 float:left 更改为 display:inline-block 会起作用，但如果某些高度与其他高度显着不同，则会看起来很丑。

如果它们的高度变化只有几个像素，那么我会选择那个解决方案。

否则，您可以考虑几个基于 javascript 的解决方案。

Equal Heights 插件将使所有的 div 具有相同的高度：

[http://filamentgroup.com/lab/setting_equal_heights_with_jquery/](http://filamentgroup.com/lab/setting_equal_heights_with_jquery/)

或者

Masonry 插件将使 DIVS 像 Pinterest 上的网格布局一样显示：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

# c# - 如何使用 Entity Framework 4 在桌面服务器端应用程序中正确实现每个范围和存储库的工作单元？

> ID：15614154
> 
> 赞同：3
> 
> 时间：2013-03-25T11:46:21.137
> 
> 标签：c#, entity-framework, repository-pattern, unit-of-work

我在 IoC 容器工作单元模式中实现和注册时遇到问题，问题如下：在服务器端客户端-服务器应用程序上，我需要访问数据库我正在使用 Entity Framework 4 ORM，并且我需要为每个创建新的 DataContext从客户端应用程序请求数据库，类似于 Web MVC 应用程序。我意识到我需要使用工作单元模式，目前我是这样实现的：

```
 void SomeMethod()
    {
        using (var repository = _repositoryFactory.Create())
        {
            int id = 1;
            var entity = repository.GetById(id);
            // some code 

                repository.SaveOrUpdate();
        }
    } 
```

其中 _repositoryFactory 在 IoC 中注册为 Single 实例并返回 Repository 的新实例 DataContext 被注入 Repository

```
 abstract class Repository<TEntity> : IRepository<TEntity> where TEntity : EntityBase 
{
   private readonly IDataContext _context;

    protected Repository(IDataContext context)
    {
        _context = context;
    }
  } 
```

作为 IRepository 作为 IDataContext 在 IoC 容器中注册为每个依赖项的实例，我需要的是我想以下列方式使用工作单元：

```
 void SomeMethod()
    {
        using (var unitOfWork = _unitOfWorkFactory.Create())
        {
            int id = 1;
            var entity = _repository.GetById(id);
            // some code 

                repository.Commit();
        }
    } 
```

在 IoC 中如何正确实现此逻辑和注册，或者在这种情况下我应该考虑其他方法，解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T07:47:33.753

不要混淆生命周期。存储库工厂也可以限定范围。性能损失很小。

通过进行该更改，您可以简单地在存储库工厂构造函数中获取工作单元。

# javascript - Html5 块上传在 Chrome 25 中不起作用？

> ID：15614155
> 
> 赞同：10
> 
> 时间：2013-03-25T11:46:22.383
> 
> 标签：javascript, html, file-upload

我有以下代码使用 Html5 上传块中的图像。

```
<!DOCTYPE html>
<form>
<div class="example">
    #bytes/chunk:
    <input id="numChunks" value="1048576" />
    <input id="files" class="button" type="file" />
    <div id="bars">
        <span id="numofchunks">Num of chunks: </span>
        <br />
        <span id="message"></span>
    </div>
</div>
</form>
<script src="~/Scripts/jquery-1.7.1.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {

        document.querySelector('input[type="file"]').addEventListener('change', function (e) {
            var blob = this.files[0];

            var BYTES_PER_CHUNK = (1024 * 1024) / 2; // 1MB chunk sizes.
            var SIZE = blob.size;
            $('#numofchunks').text($('#numofchunks').text() + SIZE / BYTES_PER_CHUNK);
            var start = 10;
            var end = BYTES_PER_CHUNK;
            var counter = 1;
            while (start < SIZE) {
                upload(blob.slice(start, end), counter);

                start = end;
                end = start + BYTES_PER_CHUNK;
                counter = counter + 1;
            }
        }, false);

    });

        function upload(blobOrFile, counter) {
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/basic/html5', true);
            xhr.setRequestHeader("Content-Type", "image/jpeg");
            //            xhr.setRequestHeader("X-File-Name", blobOrFile.fileName);
            xhr.onload = function () { $('#message').text($('#message').text() + counter + "  ") };

            var fd = new FormData();
            fd.append("fileToUpload", blobOrFile);
            xhr.send(fd);
        };

</script> 
```

这适用于所有浏览器，但不适用于我的 Chrome。在 Chrome 中，我没有收到服务器上的请求。在 chrome 网络跟踪中，它始终将请求显示为待处理。

**更新**：我无法上传大文件（超过 1mb）。我是否将其分块或块的大小都没有关系。如果图像大小超过 1mb，则不会上传。

请参阅随附的错误截图 ![在此处输入图像描述](../Images/941e66839f6e6805bc3b89963132eb12.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T16:32:30.397

这是另一种可能的解决方案

[https://github.com/tbela99/uploadManager/tree/master/Source](https://github.com/tbela99/uploadManager/tree/master/Source)

归功于蒂埃里·贝拉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:18:31.193

尝试这个

```
function(){
            var blobs = [];

/*
 * function that uploads a fragment of the file
 */
        function uploadChunk(blob, fileName, fileType){

            var xhr = new XMLHttpRequest();

            xhr.open('POST', 'upload_chunks.cfm', false);

            xhr.onload = function(e){
                document.getElementById("messages").innerHTML += "Chunk of size " + blob.size + " uploaded successfully.<br/>";
            }

            xhr.setRequestHeader('X_FILE_NAME', fileName);
            xhr.setRequestHeader('Content-Type', fileType)
            document.getElementById("messages").innerHTML += "Uploading chunk of size " + blob.size + ".<br/>";
            xhr.send(blob);
        }

/*
 * Invoke this function when the file is selected.
 */
        document.querySelector('#userfile').addEventListener('change', function(){
            var file = this.files[0];
            var bytes_per_chunk = 1024 * 1024;
            var start = 0;
            var end = bytes_per_chunk;
            var size = file.size;

            while (start < size) {
    //push the fragments to an array
                blobs.push(file.slice(start, end));
                start = end;
                end = start + bytes_per_chunk;
            }

    //upload the fragment to the server
            while (blob = blobs.shift()) {
    uploadChunk(blob, file.name, file.type);
            }
        })
    })(); 
```

来自[http://www.sagarganatra.com/](http://www.sagarganatra.com/)

# hadoop - Hive：无法获得不同类别的总和

> ID：15614156
> 
> 赞同：2
> 
> 时间：2013-03-25T11:46:28.743
> 
> 标签：hadoop, hive, hiveql

从 Hive，我试图从下面的简单表中获取结果

```
custername Prjtid Hours  Billable_Status

ABC         AB123  10     Billable

ABC         AB123  20     Non-Billable

ABC         AC123  10     Billable

ABC         AB123  30     Billable

PQR         PQ123  20     Billable

PQR         PQ123  30     Billable

PQR         PQ123  20     Non-Billable 
```

现在我想显示，

`Custername, Prjtid, (Total number of billable), (total number of non-billable).`

例子：

`ABC, AB123, 40, 20`

`PQR, PQ123, 50, 20`

我能够获得计费或不可计费但不能一起获得。

有人可以建议如何继续这种情况吗？

问候，

拉吉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:00:32.783

Group by 应该提供您需要的内容：

```
SELECT Custername, Prjtid, 
SUM(CASE WHEN Billable_Status = 'Billable' THEN Hours ELSE 0 END ),
SUM(CASE WHEN Billable_Status = 'Non-Billable' THEN Hours ELSE 0 END )
FROM table
GROUP BY Custername,Prjtid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:34:39.337

可能不是主题，但以下适用于 Mysql，

> SELECT a.custername, a.Prjtid, a.billable_hours AS Billable ,b.not_billable_hours AS NonBillable FROM (SELECT custername,Prjtid,sum(Hours) AS billable_hours FROM table WHERE Billable_Status='Billable' GROUP BY custername) AS a,(SELECT custername,Prjtid,sum(Hours) AS not_billable_hours FROM table WHERE status='Non-Billable' GROUP BY custername) AS b WHERE a.custername=b.custername;

# caching - 从 Varnish 缓存中获取响应体

> ID：15614158
> 
> 赞同：4
> 
> 时间：2013-03-25T11:46:40.777
> 
> 标签：caching, vcl, varnish

有没有办法在清漆中获取响应正文（不仅仅是标题）以进行日志记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T12:57:34.807

您无法通过 VCL 获得 resp body。

但是您可以通过编写 VMOD 并在 VCL 中调用 VMOD 来获得 resp 正文。

# mysql - MySQL 中 = 和 := 有什么区别？

> ID：15614169
> 
> 赞同：19
> 
> 时间：2013-03-25T11:47:23.963
> 
> 标签：mysql, database, operators, colon-equals

两者有什么区别

```
set test_var = 20; 
```

和

```
set test_var:=20; 
```

因为他们似乎都在**分配价值**？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-25T11:49:14.643

它或多或少是语法糖。

看看[这里](http://dev.mysql.com/doc/refman/5.0/en/assignment-operators.html)

最重要的区别是

> 与 = 不同，:= 运算符永远不会被解释为比较运算符。这意味着您可以在任何有效的 SQL 语句（不仅仅是在 SET 语句中）中使用 := 来为变量赋值。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-25T11:50:47.133

它们都是**赋值运算符**，但我可以发现它们的区别之一是`=`可以用于执行布尔运算，而`:=`不能。

**有效**：SUM(val = 0)
无效：SUM(val := 0)

[FROM 用户定义的变量](http://dev.mysql.com/doc/refman/5.0/en/user-variables.html)

还有一件事，*您还可以在 SET 以外的语句中为用户变量赋值。在这种情况下，赋值运算符必须是 := 而不是 =，因为后者在非 SET 语句中被视为比较运算符 =。*

```
mysql> SET @t1=1, @t2=2, @t3:=4;
mysql> SELECT @t1, @t2, @t3, @t4 := @t1+@t2+@t3;
+------+------+------+--------------------+
| @t1  | @t2  | @t3  | @t4 := @t1+@t2+@t3 |
+------+------+------+--------------------+
|    1 |    2 |    4 |                  7 | 
+------+------+------+--------------------+ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T11:51:32.300

您只能使用 := 进行分配 - 从不进行比较。它只是一点语法糖，根本没有真正改变功能。您会在从代码生成的 SQL 中看到很多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-09T16:13:37.703

`:=`在`SET`and`SELECT`语句中使用被解释为赋值。

`=`在`SET`语句中使用被解释为赋值。

但是，`=`在`SELECT`语句中使用被解释为布尔运算符（比较）。

因此，如果您的意思是分配，则始终可以安全使用`:=`

# android - 如何从android中的包名中获取类名？

> ID：15614173
> 
> 赞同：2
> 
> 时间：2013-03-25T11:47:46.703
> 
> 标签：android, class-names

我想分别列出已安装和系统应用程序。下面是我的代码

```
List<ApplicationInfo> appList = packageManager.getInstalledApplications(0);
if(appList != null && !appList.isEmpty()){
        for (ApplicationInfo appInfo : appList) {
        Intent intent = packageManager.getLaunchIntentForPackage(appInfo.packageName);
        if(intent != null){
            ComponentName componentName = intent.getComponent();
            if((appInfo.flags & ApplicationInfo.FLAG_SYSTEM) == 1) {
                //It is a system app
            }else{
                //It is an installed app.
            }
        }
    }
} 
```

我想在单击 listview 时启动每个应用程序。但是对于某些应用程序，如联系人、地图等， **componentName .getClassName()**显示为“ **com.android.internal.app.ResolverActivity** ”......我怎样才能获得确切的类名这种类型的应用程序。我无法使用**ResolveInfo**，因为它很难对应用程序进行分类。

如何使用包名获取应用程序的确切类名？

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T12:15:03.323

您可以询问 packageManager：

```
CharSequence label = "";
for (ApplicationInfo appInfo : appList)    
    label = packageManager.getApplicationLabel(appInfo); 
```

# php - 使用 PHP 删除每个字符串开头和结尾的所有特殊字符

> ID：15614175
> 
> 赞同：2
> 
> 时间：2013-03-25T11:47:50.047
> 
> 标签：php, string, preg-replace

如何使用 PHP 删除每个字符串开头和结尾的所有特殊字符？告诉我怎么做？

示例代码：

```
$string ="_$#+Hello(+- $^#World2013@!%=+"; 
```

从字符串开始和结束位置删除所有特殊字符后。字符串将打印如下：

```
$string ="Hello(+- $^#World2013"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:06:18.380

Trim 将删除字符串开头和结尾的字符。

```
$string ="_$#+Hello(+- $^#World2013@!%=+";

$my_special_characters='_$#@!%=+';
$string=trim($string, $my_special_characters); 
```

您可以根据需要更新 $my_special_characters 变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:05:06.807

```
$string ="_$#+Hello(+- $^#World2013@!%=+";

$sub_string = preg_replace("/^([^a-zA-Z0-9])*/", "", $string,1);
$sub_string = strrev(preg_replace("/^([^a-zA-Z0-9])*/", "",strrev($sub_string),1));

var_dump($sub_string); // string(21) "Hello(+- $^#World2013" 
```

# .htaccess - 附加到 URL 的 htaccess 子文件夹

> ID：15614176
> 
> 赞同：0
> 
> 时间：2013-03-25T11:47:51.483
> 
> 标签：.htaccess, redirect

伙计们，我想要文件夹存储中的所有内容，该文件夹存储是我网站根目录中的一个文件夹，指向[http://qwerty-demos.co.uk/path/under-construction.html](http://qwerty-demos.co.uk/path/under-construction.html)

我目前有

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  Redirect 301 /store/ http://qwerty-demos.co.uk/path/under-construction.html
</IfModule> 
```

如果我只是去 qwerty-demos.co.uk/store，但只要去 qwerty-demos.co.uk/store/cart，例如，单词 cart 就会附加到重定向 URL，例如建设中.htmlcart

谁能指出我正确的方向。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:58:02.373

```
 Options +FollowSymLinks
 RewriteEngine on
 RewriteRule ^store.*$ http://qwerty-demos.co.uk/path/under-construction.html[r=301,L] 
```

试试这个希望它有帮助

# sql - 如何将字段链接到表并根据 SSRS 中的点击过滤子表

> ID：15614177
> 
> 赞同：1
> 
> 时间：2013-03-25T11:48:08.927
> 
> 标签：sql, reporting-services

我目前有一张表格内参与者的概览报告。我希望能够在报告中单击“取消隐藏子报告”中的患者 ID，该报告显示了我单击的患者 ID 的下一级信息。我正在使用 SQl 报表生成器 3.0，我尝试了很多东西，包括组、函数等，但似乎没有任何效果。我该怎么做？如果需要，我可以提供更多详细信息，下面是我目前拥有的图片，我需要隐藏下表，直到单击顶部表患者 ID 并且子表需要按 ID 过滤。

![在此处输入图像描述](../Images/b7330287af3e4f305d384a59ff547cae.png)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:01:12.783

您可以执行此操作的方法是构建另一个报告，在其中传递参数，并根据参数进行选择。您将操作添加到其中一行。操作应该是转到下一个报告，根据传递的参数进行选择。我将很快编辑我的答案，并通过一个链接向您提供有关此问题的更多信息。

[http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/MS-SQL_Reporting/A_8737-SSRS-can-be-also-used-for-user-inputs.html](http://www.experts-exchange.com/Microsoft/Development/MS-SQL-Server/MS-SQL_Reporting/A_8737-SSRS-can-be-also-used-for-user-inputs.html)

# magento - Magento Checkout 页面未完全加载

> ID：15614179
> 
> 赞同：2
> 
> 时间：2013-03-25T11:48:15.937
> 
> 标签：magento

我最近将我的 magento 站点从我的本地主机移动到实时服务器 - 本地主机上的一切都运行良好，但是当我将它移动到相当多的错误时出现了。我已经设法摆脱了其中的大部分，但我刚刚遇到了这个：

![在此处输入图像描述](../Images/40dff1ce620db01682d7a0db53b2ed6c.png)

结帐页面只是部分加载，我真的不知道为什么会发生这种情况以及如何修复它:(

我猜计费信息部分是绊脚石，但为什么会这样呢？从数据库中检索信息会不会有问题？- 我怎么能去测试它。“#checkout-step-billing”正在加载，但在该点加载后默认不显示任何内容。

非常感谢您对此的任何帮助和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T09:07:06.697

通过增加 php.ini 文件中的 memory_limit 解决了这个问题。

有关如何在此处执行此操作的说明：[https ://drupal.org/node/207036](https://drupal.org/node/207036)

# ruby-on-rails - rails应用程序中的json响应问题

> ID：15614182
> 
> 赞同：1
> 
> 时间：2013-03-25T11:48:25.250
> 
> 标签：ruby-on-rails, json, authentication, devise

我在使用 rails 时遇到问题，并在我每次请求 .json 扩展文件时将我注销。

例如 。我有一个表列表，每次我在浏览器中检查 /tables.json 时，它都会显示数据，但是当我返回根文件夹时，它会将我注销。

我不知道该怎么做才能完成这项工作。

这是我的表格索引控制器

```
def index
    @table = current_user.seating.tables
    respond_to do |format|
        format.html
        format.json { render :json => @table.to_json }
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:11:06.697

@table 是我认为您的问题所在。添加后视图中显示的内容

```
<%= @table %> 
```

到您的表/index.html.erb 文件？

我发现使用 devise current_user 经常会遇到不同的问题。

要调试，我将从更改开始

```
current_user.seating.tables 
```

至

```
get_tables(current_user.id) 
```

并在表模型中定义方法，如下所示：

```
def get_tables(user_id)
  *Whatever logic to call tables, by using the 'user_id' goes here*
end 
```

# python - 从字符串构建列表的成本

> ID：15614186
> 
> 赞同：0
> 
> 时间：2013-03-25T11:48:33.190
> 
> 标签：python

我需要在 python 中操作一个字符串，为此我从字符串中创建一个字符列表，因为 python 字符串是不可变的：

```
str = 'abc'
list(str) 
```

问题是字符串最多可以包含一百万个字符，我不确定创建列表是否会减慢代码速度。

上述任务的复杂性是什么？有没有比操作字符串更好的选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:01:33.237

> 我们应该忘记小的效率，比如大约 97% 的时间：**过早优化是万恶之源**。然而，我们不应该放弃那关键的 3% 的机会。一个好的程序员不会因为这样的推理而自满，他会明智地仔细查看关键代码；但*只有在识别出该代码之后*。对程序的哪些部分真正关键做出先验判断通常是错误的，因为*一直使用测量工具的程序员的普遍经验是，他们的直觉猜测失败了*。——Donald Knuth（强调我的）

换句话说，除非你已经分析了你的代码并且它很慢**，因为**你正在将你的字符串转换为一个列表，否则不要担心 - 在其他地方可能会获得更大的收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:53:58.130

我得到这样的结果：

```
~ $ cat test.py
#!/usr/bin/python2.7
import time
import random
length = len( str(random.random()) )
longString = ""
for x in range(1000000 / length):
  longString += str( random.random() )

a = time.time()

li = list(longString)

b = time.time()

print "Time was: " + str(b - a) + " seconds"
print "Length of list" , len(li)
print "length of string " , len(longString)
print "Sample of list: " , li[:100]

~ $ ./test.py
Time was: 0.0284309387207 seconds
Length of list 999863
length of string  999863
Sample of list:  ['0', '.', '0', '5', '3', '2', '0', '9', '3', '0' ....actually longer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:13:32.183

如果我理解正确，您需要从文件中读取字符串，修改它然后写回文件？如果这是最节省内存的方法是使用 mmap 模块，您不需要构建列表。以下是模块官方文档中的示例：

```
import mmap

# write a simple example file
with open("hello.txt", "wb") as f:
    f.write(b"Hello Python!\n")

with open("hello.txt", "r+b") as f:
    # memory-map the file, size 0 means whole file
    mm = mmap.mmap(f.fileno(), 0)
    # read content via standard file methods
    print(mm.readline())  # prints b"Hello Python!\n"
    # read content via slice notation
    print(mm[:5])  # prints b"Hello"
    # update content using slice notation;
    # note that new content must have same size
    mm[6:] = b" world!\n"
    # ... and read again using standard file methods
    mm.seek(0)
    print(mm.readline())  # prints b"Hello  world!\n"
    # close the map
    mm.close() 
```

# windows-store-apps - 适用于所有分辨率的 Windows 商店应用程序

> ID：15614187
> 
> 赞同：4
> 
> 时间：2013-03-25T11:48:35.787
> 
> 标签：windows-store-apps, winrt-xaml, viewbox

我试图让我的应用程序适用于我使用 ViewBox 的所有分辨率。但是 ViewBox 不适应屏幕的大小。它比屏幕大一些。所有分辨率的页面应如何显示：![在此处输入图像描述](../Images/8bfccbcff6909db476ae0fd5693c303c.png)

但问题是增加或减少页面不适合屏幕的分辨率，尽管显示 gridview 滚动条滚动。代码：-

```
<GridView>
<ViewBox Stretch="Fill" >
<GridViewItem>
...
</GridViewItem>
</ViewBox>
</GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T10:32:06.240

Viewbox 应应用于整个网格或网格视图。

```
<Viewbox Stretch="Fill" StretchDirection="Both">
    <GridView>
         <GridViewItem>
              ...
         </GridViewItem>
    </GridView>
</Viewbox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T11:28:03.057

您应该将所有内容放入 standard `Grid`，将其锚定到设备边框（左、右、上、下）。

# c# - 在 64 位环境中将指定的 NUnit 测试作为 32 位进程运行

> ID：15614192
> 
> 赞同：4
> 
> 时间：2013-03-25T11:48:48.767
> 
> 标签：c#, nunit, teamcity, oledb

我有一个使用 OLEDB 从 Excel 文件导入数据的组件。由于业务风险和时间限制，我的可执行 shell 被编译为 x86（32 位）以避免[64 位 OLEDB 问题](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/d5b29496-d6a1-4ecf-b1a4-5550d80b84b6/)，并且组件在加载到我的 32 位 shell 时可以完美运行。

但是，我的 CI 构建过程 (TeamCity) 在 64 位进程中运行其 TestRunner，因此针对上述功能的单元测试失败并显示通常的错误消息：

> 测试失败。System.InvalidOperationException：“Microsoft.Jet.OLEDB.4.0”提供程序未在本地计算机上注册

我的解决方案似乎是

1.  更改 CI 测试运行器 - 不可行，因为其他 10 个团队使用该测试运行器
2.  确保此测试在 32 位进程中运行

那么，有没有办法告诉 NUnit 或 TeamCity NUnit 测试运行器在 32 位进程中运行特定测试？理想情况下，我希望在 IDE 和 CI 中不加修改地运行相同的测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T11:54:05.637

在单元测试项目中将“平台目标”更改为 x86 应该可以解决问题。

# oracle - wso2 1.1版本升级到4.0.1数据服务失败

> ID：15614193
> 
> 赞同：1
> 
> 时间：2013-03-25T11:48:49.657
> 
> 标签：oracle, service, wso2

最近将我们的 wso2 1.1 升级到 4.0.1 所有数据服务功能现在都因 INCOMPATIBLE_PARAMETERS_ERROR 而失败？在 1.1 中一切正常。所有功能都使用 Oracle 瘦客户端驱动程序。

有什么建议么？我查看了输入参数，但似乎没有什么明显的。我还注意到，当使用“试用此服务”时，屏幕布局有所不同。1.1 版有一个输入值面板，4.0.1 看起来有些不同.....？

# asp.net - SqlDateTime 溢出。必须在 web api 中的 1/1/1753 12:00:00 AM 和 12/31/9999 11:59:59 PM 之间

> ID：15614196
> 
> 赞同：0
> 
> 时间：2013-03-25T11:48:54.990
> 
> 标签：asp.net, sql-server-2008, asp.net-mvc-4, asp.net-web-api

> 我正在尝试在 asp.net mvc 4 上使用 c# 在 web api 中构建一个 post 方法。每当我使用 fiddler 向这个 api 发布值时，我都会收到以下错误：
> 
> **SqlDateTime 溢出。必须在 1753 年 1 月 1 日上午 12:00:00 到 9999 年 12 月 31 日晚上 11:59:59 之间**
> 
> 我在我的 Web API 控制器中编写了以下代码。我还创建了数据访问层来访问数据库中的数据

```
public HttpResponseMessage PostMsg(MsgModel item)
    {
        if (ModelState.IsValid && item!=null)
        {
            using (dc = new MsgDataContext())
            {
                var dbMsg = new Msg() 
                {
                 Msg_Title= item.Msg_Title,
                 Msg_Date = item.Msg_Date,                    
                };                  
                dc.Msgs.InsertOnSubmit(dbMsg);
                dc.SubmitChanges();// Getting the above error at this line of code

                var response = Request.CreateResponse<MsgModel>(HttpStatusCode.Created, item);
                string uri = Url.Link("DefaultApi", new { id = dbMsg.Msg_Id});
                response.Headers.Location = new Uri(uri);
                return response;
            }
        }
        else
        {
            return Request.CreateResponse(HttpStatusCode.BadRequest);
        }

    }

I am posting the following request body from fiddler by executing the
url http://localhost:65070/api/signup Request Body {
'Msg_Title':"our first msg", 'Msg_Date':"2012/02/23T00:00:00"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-02T14:12:35.447

您的问题是您正在将字符串解析为 DateTime 对象。If `Msg_Date`is a DateTime object C sharp 将尝试隐式转换。如果失败，将返回 null。但是数据库中的 DateTime 对象的空值是不允许的，因此会出现此异常。在将实体保存到数据库之前进行一些调试。找到合适的日期格式，因为这似乎是您的问题。检查[这篇](https://stackoverflow.com/questions/919244/converting-string-to-datetime-c-net)文章，或阅读一些[文档](http://msdn.microsoft.com/en-us/library/cc165448.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:03:56.653

错误本身告诉解决方案-

您分配的 DateTime 值不在这两个日期之间。只需在插入数据库之前检查日期。如果日期小于 1753 年 1 月 1 日，则传递 DateTime.MinValue，如果日期大于 9999 年 12 月 31 日，则传递 DateTime.MaxValue

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T13:59:19.490

您传递的日期值`'Msg_Date':"2012/02/23T00:00:00"`参数未正确解析（作为“已知”日期字符串） - 它没有时区/不匹配任何“已知”[日期格式](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.110%29.aspx)。

看[`DateTime.TryParse`](http://msdn.microsoft.com/en-us/library/9h21f14e.aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-09T17:47:17.900

使用`SqlTypes.SqlDateTime.MinValue`而不是`DateTime.MinValue`为我解决了这个问题。如果您已经在代码中使用对象，`SqlTypes.SqlDateTime.MinValue.Value`则可以使用。`DateTime`

# php - 为实现工厂设计模式的类的方法提供适当的 DocBlock 注释

> ID：15614202
> 
> 赞同：2
> 
> 时间：2013-03-25T11:49:05.210
> 
> 标签：php, oop, autocomplete, phpstorm, phpdoc

**我所说的*正确 DocBlock 评论*的意思是这样的评论：**

*   符合[PHPDoc 标准](http://www.phpdoc.org/docs/latest/for-users/phpdoc-reference.html)

*   提供[PHPStorm IDE](http://www.jetbrains.com/phpstorm/)自动完成功能

**这是课程本身：**

```
class Factory_DomainObjects
{
    /**
     * Build domain object
     *
     * @param $name
     *
     * @return M_UserObject|M_TransactionObject
     */
    public function build($name)
    {
        $class = 'M_' . $name . 'Object';
        return new $class();
    }
} 
```

`Core_Object`它根据`$name`参数 从层次结构中返回一个对象。

当前`Core_Object`层次结构如下所示：
![在此处输入图像描述](../Images/df3f326996323df99763d99e8e99803c.png)

我提供[`@return`](http://www.phpdoc.org/docs/latest/for-users/phpdoc/tags/return.html)了带有`M_UserObject|M_TransactionObject`类型描述的标签。它为 PHPStorm 提供自动竞争并符合 PHPdoc 标准。

*- 但这正是你想要的，有什么问题？*
*- 是与否，请继续阅读 :)*

**问题**：
如果`Core_Object`层次结构会发展到这样的程度怎么办？ ![在此处输入图像描述](../Images/04b4627bc1d78bde65e9bed0aeb65312.png)

这会将`@return`标签描述变成一团糟：

```
/**
 * @return M_TransactionObject|M_UserObject|M_Foo|M_Foo1|M_Foo2|M_Foo3|M_Bar|M_Bar1|M_Bar2|M_Bar3
 */ 
```

**到目前为止我发现的唯一解决方法：`build`对每个对象使用单独的方法，即**

```
/**
 * Build user domain object
 * 
 * @return M_UserObject
 */
public function buildUser()
{
    return new M_UserObject();
}

/**
 * Build transaction domain object
 * 
 * @return M_TransactionObject
 */
public function buildTransaction()
{
    return new M_TransactionObject();
} 
```

你认为我的解决方法有什么陷阱？你会建议什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:48:13.997

这里的简单答案是您不应该从单个方法返回多个对象类型。让我详细说明：

当我说“类型”时，我的意思是对象并不都以某种方式共享相同的类型信息。在你的情况下，它们都是`CoreObject`（顺便说一句，这是一个**可怕**的名字）。所以我会简单地将返回类型提示标记为`CoreObject`并完成它。

处理此类事情的首选方法是使用接口，并让您的方法返回该接口的实现。如果您没有针对所有返回类型的通用接口，那么您需要实现不同的方法（至少，或者可能是不同的工厂）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:03:52.187

建议的方法是首先放置通用类型（如果您的工厂创建特定类型的子类型，那么这就是类型），然后您可以添加所有子类型（或重要的子类型）。

这通常对 PHPStorm 非常有效，并且根本不违反 PHPDoc。

```
/**
 * @return M_TransactionObject|M_UserObject|M_Foo|M_Foo1|M_Foo2|M_Foo3|M_Bar|M_Bar1|M_Bar2|M_Bar3
 */ 
```

这太多了。*我通常使用@return*标记的（子）类型不超过三种。我会说这是一个很好的经验法则。

例如：

```
 * @return M_UserObject|M_TransactionObject 
```

在我眼里没问题。一个类似的提示动作是：

```
 * @return array|string[] 
```

或者

```
* @return Iterator|string[] 
```

第一种类型表示已定义的用途（例如，最后一行是`getIterator()`of `IteratorAggregate`），替代类型对于解决 IDE-Typehinting 的缺陷很有用（PHPStorm 对此非常有用）。

HTH。@ircmaxell 写的没有错，但是如果您将第一个返回类型保留为他的意思（接口在那里），只要您了解替代类型仅用于类型提示，您就可以了。如果一个工厂方法返回许多不同的“类型”，那么所有这些都应该共享一个接口。这个很重要。例如，如果您看到一长串列表，则应该有一种类型，并且一种类型是接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:25:10.293

目前不可能。

观看此票以了解何时实施：http: [//youtrack.jetbrains.com/issue/WI-6027](http://youtrack.jetbrains.com/issue/WI-6027)

如果您不想为每个类使用单独的方法，那么我可能只建议**对局部变量使用 PHPDoc @var 注释**（这可能非常不方便 - 取决于您如何使用它）：

```
/** @var M_FooObject $myFoo */
$myFoo = $factory->build('Foo'); 
```

# .htaccess - htaccess 不适用于简单的 RewriteRule

> ID：15614203
> 
> 赞同：1
> 
> 时间：2013-03-25T11:49:08.557
> 
> 标签：.htaccess, mod-rewrite

应该很简单

somedomain.com/cutsmart - 新网址应该是 - somedomain.com/lp_cutsmart.php

用[http://htaccess.madewithlove.be/测试](http://htaccess.madewithlove.be/)

RewriteRule 上的 RewriteEngine ^/cutsmart$ /lp_cutsmart.php [R=301,L]

但是当 lp_cutsmart.php 存在时得到 404

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:50:38.623

如果访问者 URL 的“cutsmart”部分可以更改为仅包含 az 字母的任何内容，并且您希望访问者的浏览器被重定向到服务器上的资源，其路径包含该 az 术语（例如 /lp_cutsmart.php ) 然后尝试以下操作：

```
RewriteEngine On
RewriteRule ^([a-z]+)/?$ /lp_$1.php 
```

请注意，在 .htaccess 文件中，正则表达式模式的开头不需要斜杠，因为 .htaccess 文件始终假定它在 .htaccess 文件所在的目录之外工作。

如果您只是希望 /cutsmart 的请求始终重定向到 /lp_cutsmart.php，那么您可能最好使用简单的重定向：

```
Redirect permanent /cutsmart http://somedomain.com/lp_cutsmart.php 
```

# python - 在织物脚本的 psql 命令中转义引号

> ID：15614204
> 
> 赞同：3
> 
> 时间：2013-03-25T11:49:09.283
> 
> 标签：python, bash, shell, fabric, psql

基于[这个问题](https://stackoverflow.com/questions/3327312/drop-all-tables-in-postgresql)，我正在尝试使用 fabric 命令删除我的 postgresql 数据库中的所有表。我试图运行的 bash 命令是

```
#!/bin/bash
TABLES=`psql $PGDB -t --command "SELECT string_agg(table_name, ',') FROM information_schema.tables WHERE table_schema='public'"`

echo Dropping tables:${TABLES}
psql $PGDB --command "DROP TABLE IF EXISTS ${TABLES} CASCADE" 
```

在我的 fab 脚本中变成：

```
def delete_tables():
    the_command = "SELECT string_agg(table_name, ',') FROM information_schema.tables WHERE table_schema='public'"
    run("TABLES=`psql -U db_user -d db_name $PGDB -t --command %s`" % the_command) 
```

但错误是，`Peer authentication failed for user "string_agg"`。这似乎表明该命令不被视为“”之间的命令，而是一个长的单个字符串......

我试过转换： `'` 成 `'\''` ，但没有运气。欢迎任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:52:01.253

用于`pipes.quote()`引用进入 shell 的内容。

```
import pipes
def delete_tables():
    the_command = "SELECT string_agg(table_name, ',') FROM information_schema.tables WHERE table_schema='public'"
    run("TABLES=`psql -U db_user -d db_name $PGDB -t --command %s`" % pipes.quote(the_command)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:23:05.667

不要为这种任务掏腰包。改用[`psycopg`](http://initd.org/psycopg/)：

```
import psycopg2

conn = psycopg2.connect(database='db_name', user='db_user')
cur  = conn.cursor()
cur.execute("SELECT string_agg(table_name, ',') FROM ...;")
for record in cur:
    print record 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-12T18:31:00.690

这应该可以在不需要任何其他导入的情况下工作：

```
def delete_tables():
run('''psql -U db_user -d db_name $PGDB -t -c "SELECT string_agg(table_name, ',') FROM information_schema.tables WHERE table_schema='public';"''') 
```

# javascript - javascript中替代长度的整数（不是32位）

> ID：15614228
> 
> 赞同：3
> 
> 时间：2013-03-25T11:51:13.337
> 
> 标签：javascript, data-structures, integer, bitwise-operators

问题如下：我需要处理完全编码为有符号整数的数字（MSB 是符号，值是 2 的补码二进制值），但它们不是 32 位的。即我有一个 21 位二进制值，我必须对其进行处理，以便第 20 位是符号，而第 19-0 位表示数字代码。我需要做类似的事情

```
int<21>a = 200000
int<21>b = 300000
int<21>c = a + b 
```

目标语言是javascript，即所有标准二进制操作，如按位加/移都可用。有没有简单的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:49:00.587

本机不可能有 21 位整数。但是由于您需要小于 2^20 的整数，它们无论如何都足够小以适合 0 到 19 位。
如果没有更多信息，我的建议是，将 2^20 = 1048576 添加到每个整数作为符号。然后在对它们进行运算时必须小心，因此请自行实现以 2^20 为符号的基本数学运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T13:07:42.010

一段时间过去了，但我将在这里留下一个生成的 javascript 代码，以防其他人需要它，此函数将 32 位 int 值转换为 N 位 int：

```
function 32BitsToN (intValue) {
  var retVal=0;
  var leftMask = 0;

  var flag = (1 << N-1);
    if ((value & flag )!= 0) { //Nth bit is set, the value is negative.
      //WScript.Echo('NEGATIVE!\n');
      //WScript.Echo('Incoming: '+value)
      //we need to set all bits N-32 to 1
  for (var i = 1; i<= (32-N); i++) {
    leftMask |= 1<<32-i;
  }

    retval = value | leftMask;      
    //incoming: |1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|x|x|x|x|x|
    //Mask:     |1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|1|0|0|0|0|0|0|
    //result:   |0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|1|x|x|x|x|x|

  } else {
    retval = value;
  }

return retval;

} 
```

# java - Android检查字符串中的双字符

> ID：15614235
> 
> 赞同：0
> 
> 时间：2013-03-25T11:51:32.863
> 
> 标签：java, android, regex

```
public void updateDisplay(View v)
{
    Button button = (Button) findViewById(R.id.button1);

    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            tempNumber.setText(tempNumber.getText().toString() + ((Button) view).getText());
        }
    });
    tempNumber.setText( tempNumber.getText().toString() + ((Button) v).getText() );

} 
```

我的java代码

```
<Button
     android:id="@+id/button1"
     android:layout_width="0dip"
     android:layout_height="wrap_content"
     android:layout_weight="0.1"
     android:background="@drawable/button"
     android:onClick="updateDisplay"
     android:text="1"
     android:layout_marginTop="5dp"
     android:layout_marginBottom="5dp"
     android:textColor="@drawable/button_tx_color"
     android:textSize="15sp" /> 
```

我的xml代码

当我单击从 0 到 9 的按钮时，我会创建数字。但我也**有点。和减号**。我如何检查我的文本视图以在我的数字中只允许一个点，并在我的数字顶部允许减号。

先谢谢了...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:00:51.390

我认为您不能仅通过布局属性来实现这一点。

但是，您可以基于[此答案](https://stackoverflow.com/questions/4180770/allow-only-selected-charcters-based-on-regex-in-an-edittext)进行验证，该答案基于[较旧](https://stackoverflow.com/questions/2763022/android-how-can-i-validate-edittext-input)的答案。基本上你[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)为你的 实现了一个`EditText`，它在每次文本更改时调用它的方法。

从那时起，您只需要正确的正则表达式验证，并且应该这样做：

```
String pattern = "^[0-9]+\.[0-9]*$";
String yourEditTextValue;
if (yourEditTextValue.matches(pattern)) {
} else {
   // set edit text valeu to empty string, show erorr
} 
```

# iphone - 在循环内运行延迟

> ID：15614236
> 
> 赞同：4
> 
> 时间：2013-03-25T11:51:36.443
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

首先，我只是一名航空公司的飞行员，在我坐在酒店房间里的死时间编码，所以请原谅我的无知。我正在使用 Obj 编写这个二十一点游戏。C 和 Cocos2D。对于iOS我的问题如下：当我打架时，我希望我的代码为经销商抽牌，直到它达到17。我设法做到了，但是一旦我在循环中插入延迟，它就会停止工作。我尝试了多种方法来实现延迟，例如：

```
[self performSelector:@selector(dealDealerCard:faceUp:) withObject:self afterDelay:2.0]; 
```

这只是冻结了所有按钮。我还尝试了带有运行操作的 CCSequence。我还尝试了调度程序和 NSTimer 等。

这是我的代码：

```
// if the stand button was pressed

-(void)standButtonPressed:(id)sender
{
 BJDrawnCard *holeCard = [dealerHand getFlippedCard];
 [holeCard flipCard];
 while ([dealerHand getTotal]<=17){
    [self performSelector:@selector(dealDealerCard:faceUp:)   withObject:self afterDelay:2.0];

} 
```

这是方法：

```
// Deal Dealers Card

 -(void)dealDealerCard:(id) dummy faceUp:(BOOL)isFaceUp
{
drawnCard=[havila drawFromDeck];
if (isFaceUp) {
[drawnCard setDisplayFrame:[[CCSpriteFrameCache  sharedSpriteFrameCache]spriteFrameByName:drawnCard.imageFileName]];
}else [drawnCard setDisplayFrame:[[CCSpriteFrameCache   sharedSpriteFrameCache]spriteFrameByName:@"Backside.png"]];
[dealerHand getCard:drawnCard];
[drawnCard setScale:0.5f];
[drawnCard setPosition:[self shoePosition]];
[cardsheet addChild:drawnCard];
// animate the cards
float cardVelocity = (sqrtf((size.width*size.width)+(size.height*size.height)))/0.5; //     set the base speed for the movment

// calculate the time needed to move the card
CGPoint moveDifference = ccpSub([self dealerCardPosition],
                                [self shoePosition]);
float moveDuration = ccpLength(moveDifference) /
cardVelocity;

// define the movement
CCMoveTo *move = [CCMoveTo actionWithDuration:
                  moveDuration position:[self dealerCardPosition]];
CCDelayTime *delay = [CCDelayTime
                      actionWithDuration:0.5];

//Run the action

[drawnCard runAction:[CCSequence actions:move,delay,nil]];

numDealerHits++;

} 
```

所以总结一下：我正在尝试运行一个条件循环，它将调用此方法，调用之间有 2.0 秒的延迟，直到总数为 17。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:02:16.090

```
-(void)standButtonPressed:(id)sender
{
   BJDrawnCard *holeCard = [dealerHand getFlippedCard];
   [holeCard flipCard];
   if ([dealerHand getTotal]<=17){
      [self performSelector:@selector(dealDealerCard:faceUp:)   withObject:self afterDelay:2.0];

  }
} 
```

在选择器的最后，确定是否有更多以及是否有更多，

```
 if ([dealerHand getTotal]<=17) {
     id more = [CCCallBlock actionWithBlock:^{
    [self performSelector:@selector(dealDealerCard:faceUp:)   withObject:self afterDelay:2.0];
}];
    [drawnCard runAction:[CCSequence actions:move,delay,more,nil]];
} else {
    [drawnCard runAction:[CCSequence actions:move,delay,nil]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:59:38.880

使用第一个解决方案是冻结 UI，因为您延迟了 GUI 线程。

你可以试试GCD

```
double delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    <#code to be executed on the main queue after delay#>
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:05:44.987

试试这个不会冻结 UI 并且会延迟启动

```
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, 2.0 * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){

      //do work
    }); 
```

# c++ - 对 _imp__CryptProtectData@28 的未定义引用

> ID：15614239
> 
> 赞同：1
> 
> 时间：2013-03-25T11:51:44.113
> 
> 标签：c++, windows, qt, encryption

我正在尝试使用 windows.h 和 wincrypt.h 库构建一个简单的应用程序，以便加密一些字符串。

当我调用该函数时，`CryptProtectData(&input, NULL, NULL, NULL, NULL, 0, &output);`我得到错误：

```
error: undefined reference to `_imp__CryptProtectData@28' 
```

我在网上搜索了很多，但没有找到太多。我还意识到 Chromium 浏览器使用与我类似的代码来加密和解密其登录信息，我并没有做不同的事情。

我正在使用 QtCreator IDE 来编译我的代码。

我的一些代码：

```
 std::string plaintext="Some plain text";
  DATA_BLOB input;
  input.pbData = const_cast<BYTE*>(
      reinterpret_cast<const BYTE*>(plaintext.data()));
  input.cbData = static_cast<DWORD>(plaintext.length());

  DATA_BLOB output;
  BOOL result = CryptProtectData(&input, NULL, NULL, NULL, NULL,
                                 0, &output); 
```

编辑：忘了提到我已经包含了 windows.h 和 wincrypt.h 库，当然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:53:42.777

这是由于您没有提供函数所需的库文件而导致的链接器错误`CryptProtectData`。您需要将`Crypt32`库传递给链接器。

此信息包含在该函数的[MSDN 文档](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa380261.aspx)中。向下滚动到主题的底部以查看信息。

作为一般规则，要使用 API 函数，您需要查看函数文档中的“*要求*”部分。这列出了以下信息：

*   支持的最低 Windows 版本。
*   您需要包含的头文件。
*   您需要传递给链接器的库文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T11:54:13.847

你有联系`Crypt32.dll`还是更确切地说`Crypt32.lib`？将 .lib 添加到您的依赖项中。出现此类错误时，请始终查看[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380261%28v=vs.85%29.aspx)。

# javascript - 如何通过点击广告在新窗口中打开链接？

> ID：15614241
> 
> 赞同：1
> 
> 时间：2013-03-25T11:51:55.563
> 
> 标签：javascript

如何通过点击广告在新窗口中打开链接？

这是我的广告代码：

```
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1933305968388659";
/* Try This...:) */
google_ad_slot = "2365466722";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

我想要的是当这个广告被点击时，一个额外的链接应该在新的浏览器窗口中打开。

**我在下面尝试过，但没有用**

```
<a href="http.example.com"><script type="text/javascript"><!--
google_ad_client = "ca-pub-1933305968388659";
/* Try This...:) */
google_ad_slot = "2365466722";
google_ad_width = 728;
google_ad_height = 15;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:49:38.603

根据我过去所知道的以及此处显示的内容：
[在新窗口中打开（Adsense）广告](http://support.google.com/adsense/bin/answer.py?hl=en-GB&answer=1354740)

在大多数情况下，Google 不允许 Google 广告在新窗口中打开。在允许的情况下，它由查看广告的用户的 IP 地址控制。

> ### 广告实施政策
> 
> ## 在新窗口中打开广告
> 
> 一般来说，我们的政策是不允许 Google 广告在新窗口中打开。然而，在包括中国在内的一些市场，我们发现在新窗口中打开广告更符合预期的互联网行为，并提供更一致、更直观的用户体验。
> 
> 牢记用户体验的重要性，我们允许 Google 广告在新窗口中打开，这些位置是预期的浏览行为。此功能由用户的 IP 决定，不是您可以选择 AdSense 帐户的选项。
> 
> 我们还要求您不要修改 AdSense 广告代码或更改点击您网站上的广告的结果，因为此类行为违反了我们的计划政策。

话虽如此，也许可以创建一些解决方法来强制广告在新窗口中打开，但谷歌不会喜欢它，他们最终会发现并“惩罚”你这样做......
他们可以：

*   降低与您的页面相关的质量级别。
*   降低广告的收入（费率）
*   屏蔽您的广告
*   限制、暂停或终止您的帐户。
*   还有许多其他人还没有想到的坏事。

我认为谷歌允许点击广告在新页面（或标签）中打开会很棒，我认为大多数人都会接受它，甚至更喜欢它。他们（Google）甚至可以将其设置为“可选”，在广告内或广告附近显示一个小的向上箭头，用户可以点击该箭头在新窗口中打开广告。

我认为谷歌不会很快做到这一点。他们觉得普通用户期望当他们点击一个广告（或任何链接）时，他们可以通过点击“返回”按钮返回到上一页，而如果广告在新窗口中打开，则返回按钮没有操作，用户会感到困惑，并觉得他们的体验很糟糕。

只要 Google 不希望您这样做，我的建议就是：不要这样做。毕竟，这是他们的广告，他们想要控制广告的展示方式和互动方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T09:21:25.937

根据 Google Adsense 政策，无法在新窗口中执行此操作。但他们从未说过任何关于新标签的事情。新标签没问题。在 Youtube 上，所有 Google Adsense 合作伙伴广告都在新标签中打开。这样 Youtube 访问者在点击广告时不会自动离开 Youtube 网站。如果这是您需要的，这与访问者不会离开您的网站的工作相同。新标签没问题。新窗口号 虽然为你做同样的工作。优酷做到了。

# parsing - Python 2.7：运行外部程序并解析其输出（当 ext 程序运行时）

> ID：15614244
> 
> 赞同：1
> 
> 时间：2013-03-25T11:52:15.677
> 
> 标签：parsing, python-2.7, stream, subprocess

我想编写一个 Python 程序来启动一个外部程序 ET——不是我写的——并使用它的输出来存储执行一些计算。

我知道可以使用模块子进程及其 call() 方法。然而，我的问题是 ET 的输出很大（如果我在 shell 中启动程序并将其输出重定向到一个文件，我会得到一个 25GB 大小的文件。）。

因此，我希望能够在 ET 的输出“生成”时对其执行操作，并避免保存一个巨大的文件。

我怎样才能做到这一点？如果有多种方法，为我选择最佳选择需要考虑哪些问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T01:25:12.987

子流程应该照顾您的需求。 [http://docs.python.org/2/library/subprocess.html#module-subprocess](http://docs.python.org/2/library/subprocess.html#module-subprocess)

```
p = subprocess.Popen("millions.exe", stdout=subprocess.PIPE)
i = 0
for line in p.stdout:
     i+=1 
```

百万是我编写的一个快速测试程序，用于打印从 0 到 9999999 的数字，只需要一段时间并生成大量输出。

另一个需要考虑的选择是使用命令行管道。您可以使用 sys.stdin 以便将程序的输出通过管道传输到您的 python 脚本中。

[如何在 bash 中使 python 脚本“可管道化”？](https://stackoverflow.com/questions/4429966/how-to-make-a-python-script-pipeable-in-bash?lq=1)

是如何使这项工作的一个例子。

# django - 如何指定 FormView 模板中使用的表单变量的名称？（表单的对象上下文名称）

> ID：15614245
> 
> 赞同：9
> 
> 时间：2013-03-25T11:52:18.510
> 
> 标签：django, django-class-based-views

```
from forms import MyContactForm
from django.views.generic.edit import FormView 

class MyFormView(FormView):
    template_name = 'my_forms.html'                                      
    form_class = MyContactForm  
    success_url = '/thanks/' 
```

在我的模板中，表单是这样调用的：

`{{ form }}`

但我怎么能这样称呼它：

`{{ my_contact_form }}`?

这将是等效于`object_context_name`（对于模型）的形式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T12:04:29.117

您可以覆盖`get_context_data`：

```
class MyFormView(FormView):
    template_name = 'my_forms.html'                                      
    form_class = MyContactForm  
    success_url = '/thanks/' 

    # from ContextMixin via FormMixin    
    def get_context_data(self, **kwargs):
        data = super(MyFormView, self).get_context_data(**kwargs)

        data['my_contact_form'] = data.get('form')

        return data 
```

# c# - Json数据列表、数组

> ID：15614247
> 
> 赞同：2
> 
> 时间：2013-03-25T11:52:23.077
> 
> 标签：c#, asp.net-mvc, json

在这里我遇到了问题：

OneCar -> 当我只接受一个论点时，我可以看到价值并且一切正常

但是当我尝试获取 ListCar1 和 ListCar2 中的参数列表时，我只能看到 null

我相信这是一个小错误，但我不知道如何解决它。

```
[HttpPost]
        public JsonResult DodajTematSave(string OneCar, string[] ListCar1, List<string> ListCar2)
        {
        } 
```

这是Json动作

```
<script type="text/javascript">

    function Save() {

        var mycars = new Array()
        $("[name^='CarString']").each(function () {
            mycars.push(this.value);
        });

        $.ajax({
            url: '@Url.Action("DodajTematSave", "StronaGlowna")',
            dataType: "json",
            data: {
                OneCar: mycars[0]
                ListCar1: mycars
                ListCar2: mycars
            },
            type: "POST",
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    alert('success');
                }

            }
        });
    }

</script> 
```

**正确答案：**

```
<script type="text/javascript">

    function Save() {

        var mycars = new Array()
        $("[name^='CarString']").each(function () {
            mycars.push(this.value);
        });

        $.ajax({
            url: '@Url.Action("DodajTematSave", "StronaGlowna")',
            dataType: "json",
            data: {
                OneCar: mycars[0]
                ListCar1: mycars
                ListCar2: mycars
            },
            type: "POST",
            traditional: true,
            async: false,
            error: function () {
            },
            success: function (data) {
                if (data.Success) {
                    alert('success');
                }

            }
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:00:13.427

您需要将`traditional: true`参数添加到`$.ajax`调用中。可以在这个[jQuery 论坛主题](http://forum.jquery.com/topic/nested-param-serialization)或这个[答案](https://stackoverflow.com/a/2527206/728795)中找到详细信息。

# jquery - 我应该如何在 td 元素中存储“额外”信息？

> ID：15614253
> 
> 赞同：2
> 
> 时间：2013-03-25T11:52:38.567
> 
> 标签：jquery, html

我向最终用户显示了以下标记：

```
<td class="event-start"> Mon 25th Feb (2013) @ 01:00pm</td> 
```

我正在开发一个允许用户编辑事件开始时间的功能。

但是，这种时间格式很难使用（在 jQuery 中），因为我已经为最终用户格式化了它，而不是显示为 unix 时间戳。

`<td>`因此，我认为将事件开始的实际值（作为 Unix 时间戳）存储在元素的另一个属性中可能更合适，例如

```
<td class="event-start" actual-start="unix-timestamp"> Mon 25th Feb (2013) @ 01:00pm</td> 
```

我的问题是 - 这个属性的名称应该是什么？是否有我应该为此属性使用的标准名称或我应该遵循的任何约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:55:50.797

您应该研究 HTML5 自定义数据属性。[HTML5 工作草案中](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#custom-data-attribute)的 W3C 文档。

简而言之，将您的属性名称前缀为`data-`. `dataset`这样做可以通过元素上的 JS 属性专门访问您的数据元素。

[这篇文章](http://www.javascriptkit.com/dhtmltutors/customattributes.shtml)有一个很好的解释/例子：

尤其是：

> 自定义属性的吸引力在于它可以让您轻松地将信息花絮与元素相关联，以便稍后使用 JavaScript 进行解析。有两种方法可以使用 JavaScript 检索“数据”属性的值：第一种是通过 JavaScript 的老式 getAttribute() 方法，第二种是通过访问元素的“数据集”属性。

关于兼容性，请参阅[http://caniuse.com/#feat=dataset](http://caniuse.com/#feat=dataset)，它表明*所有*当前的浏览器都具有*部分*支持，而*大多数*当前浏览器都具有完全支持。其中“完全支持”意味着可以通过“数据集”属性访问属性。

但重要的是，

> 所有浏览器都可以使用 data-* 属性并使用 getAttribute 访问它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T11:55:10.913

> 该属性的名称应该是什么？是否有我应该为此属性使用的标准名称或我应该遵循的任何约定？

它应该是[数据](http://ejohn.org/blog/html-5-data-attributes/)属性

```
<td class="event-start" data-actual-start="unix-timestamp"> 
```

所有主流浏览器都支持 data 属性。并且 jquery 有自己的方法来轻松操作数据属性.. [doc here](http://api.jquery.com/data/) ...

# jquery - 全屏翻页布局

> ID：15614255
> 
> 赞同：0
> 
> 时间：2013-03-25T11:52:40.787
> 
> 标签：jquery, css, page-flipping

我是 Tympanus 的 Codrops 教程的追随者。

对于朋友网站 ( [http://www.selinacarlos.ch/wordpress/](http://www.selinacarlos.ch/wordpress/) )，我想实现我在[这里](http://tympanus.net/codrops/2012/12/11/fullscreen-pageflip-layout/)找到的脚本 Fullscreen Pageflip 。

现在我正在尝试使用背景图像使其成为非全屏。它运行良好，但我不希望菜单在左侧可见并且容器滑过右侧。

我试过隐藏溢出，但它会裁剪整个菜单。

如何使用 css 达到预期的效果？我必须向 DOM 添加另一个 div 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:11:18.473

我不确定这是你想要的

```
.js .menu-panel {
    position: absolute;
    left: -240px;
    visibility: hidden;
} 
```

然后在您的 slideRight 类中添加可见性：可见；

# .htaccess - 使用 htaccess 重新格式化 Web URL

> ID：15614259
> 
> 赞同：0
> 
> 时间：2013-03-25T11:52:50.857
> 
> 标签：.htaccess, mod-rewrite

由于缺乏更好的词，我的标题不是最好的，但我会向你描述更多我正在寻找的东西。我刚刚设置了我的网站以去除文件扩展名（website.com/home），现在我对如何在整个网站中合并此过程有几个问题。

**我的主要问题是，当我在我的网站上查看用户个人资料时，而不是通过****website.com/profile?id=1**将其调用到页面，我想知道如何通过键入 website.com/ 来调用它**简介/1** . 如果有人有任何建议，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:00:43.650

你必须使用这样的重写规则：

```
RewriteEngine on
RewriteRule ^profile/([0-9]+)/?$ /profile.php?id=$1 [QSA,L] 
```

一些学习重写的资源：

[http://www.askapache.com/htaccess/mod_rewrite-basic-examples.html](http://www.askapache.com/htaccess/mod_rewrite-basic-examples.html)
[http://www.cheatography.com/davechild/cheat-sheets/mod-rewrite/](http://www.cheatography.com/davechild/cheat-sheets/mod-rewrite/)
[http://www.brand3.com/blogs /htaccess-mod_rewrite-ultimate-guide/](http://www.branded3.com/blogs/htaccess-mod_rewrite-ultimate-guide/)

# sql - 使用 OUTPUT 子句插入不在 INSERTED 中的值

> ID：15614261
> 
> 赞同：8
> 
> 时间：2013-03-25T11:53:01.213
> 
> 标签：sql, sql-server, sql-server-2008

我正在编写一个存储过程来处理属于应用程序的表并将值插入属于同一应用程序的表中（因此我无法修改任何一个表）。

我必须只处理新记录并记住哪些记录已被处理，为此我创建了第三个简单表。

下面是表格，删除了许多列，只留下重要的细节。

**源表**

```
CREATE TABLE [dbo].[DETAIL](
    [DET_NET] [float] NULL,
    [DET_VAT] [float] NULL,
    [DET_VATCODE] [varchar](4) NULL,
    [DET_GROSS] [float] NULL,
    [DET_DATE] [datetime] NULL,
    [DET_PRIMARY] [float] NOT NULL
) 
```

**目标表**

```
CREATE TABLE [dbo].[TRN_TEMP](
    [TRN_TRAN_DATE] [datetime] NULL,
    [TRN_DESCRIPTION] [varchar](20) NULL,
    [TRN_PRIMARY] [int] NULL,
    [TRN_AMT] [float] NULL
) 
```

**跟踪表**

```
CREATE TABLE REGISTER(
    LINE_ID INT IDENTITY(1,1) PRIMARY KEY CLUSTERED NOT NULL,
    DET_PRIMARY_LINK FLOAT NOT NULL,
    INS_DATE DATETIME NOT NULL
) 
```

我正在尝试将源表中的值插入目标表中，但还将源表的主键插入到跟踪表中。

```
INSERT INTO TRN_TEMP (TRN_TRAN_DATE, TRN_DESCRIPTION, TRN_AMT)
OUTPUT D.DET_PRIMARY, GETDATE() INTO REGISTER (DET_PRIMARY_LINK, INS_DATE)
SELECT D.DET_DATE, 'SOMETEXT', SUM(D.DET_NET)
FROM DETAIL D
LEFT JOIN REGISTER R ON D.DET_PRIMARY = R.DET_PRIMARY_LINK
WHERE <MY CONDITIONS> AND R.LINE_ID IS NULL -- TO REMOVE LINES ALREADY PROCESSED
GROUP BY D.DET_DATE 
```

我看不到上面的文字有问题，但我收到一个错误“无法绑定多部分标识符'D.DET_PRIMARY'。”。我都试过了`D.DET_DETAIL`，`DETAIL.DET_DETAIL`错误是一样的。

使用组时是否不能在子句中使用源表中的值，`OUTPUT`或者我的格式是否有错误？如果不可能，是否有另一种方法可以跟踪我处理了哪些行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T11:56:59.127

使用`MERGE`代替`INSERT`：

```
MERGE
INTO    trn_temp d
USING   (
        SELECT  D.DET_DATE, 'SOMETEXT' AS sometext, SUM(D.DET_NET) AS the_sum
        ...
        ) s
ON      (1 = 0)
WHEN NOT MATCHED THEN
INSERT  (TRN_TRAN_DATE, TRN_DESCRIPTION, TRN_AMT)
VALUES  (det_date, sometext, the_sum)
OUTPUT  s.* 
```

**更新：**

要解决此`GROUP BY`问题，请使用以下命令：

```
DECLARE @tmp TABLE
        (
        det_primary INT NOT NULL PRIMARY KEY
        )

MERGE
INTO    register r
USING   detail d
ON      (r.det_primary_link = d.det_primary)
WHEN NOT MATCHED THEN
INSERT  (det_primary_link, ins_date)
VALUES  (det_primary, GETDATE())
OUTPUT  d.det_primary
INTO    @tmp;

INSERT
INTO    trn_temp (trn_tran_date, trn_description, trn_amt)
OUTPUT  INSERTED.*
SELECT  det_date, 'sometext', SUM(det_net)
FROM    @tmp t
JOIN    detail d
ON      d.det_primary = t.det_primary
GROUP BY
        det_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T03:53:18.363

我知道这个问题已经有将近一年的历史了，但是如果您从 OUTPUT 中选择正确的列名，您的插入可以按照您提出的方式工作

输出子句为我们提供了两个可能的虚拟表之一，插入或删除，取决于操作，更新操作提供两者。由于您刚刚插入的 TRN_TEMP 表中没有字段名称 DET_DATE，因此它在输出语句中无效。

```
INSERT INTO TRN_TEMP (TRN_TRAN_DATE, TRN_DESCRIPTION, TRN_AMT)
OUTPUT INSERTED.TRN_TRAN_DATE, GETDATE() 
INTO REGISTER (DET_PRIMARY_LINK, INS_DATE)
SELECT D.DET_DATE, 'SOMETEXT', SUM(D.DET_NET)
FROM DETAIL D
LEFT JOIN REGISTER R ON D.DET_PRIMARY = R.DET_PRIMARY_LINK
WHERE <MY CONDITIONS> AND R.LINE_ID IS NULL -- TO REMOVE LINES ALREADY PROCESSED
GROUP BY D.DET_DATE 
```

# css - Twitter Bootstrap 浮动响应容器

> ID：15614264
> 
> 赞同：1
> 
> 时间：2013-03-25T11:53:13.373
> 
> 标签：css, twitter-bootstrap, css-float

我需要`.container`为平板电脑视图浮动 a，那么如何在我的媒体查询中反转这个明确的浮动黑客？这样`.container`可以浮动

```
.container {
  margin-right: auto;
  margin-left: auto;
  *zoom: 1;
}

.container:before,
.container:after {
  display: table;
  line-height: 0;
  content: "";
}

.container:after {
  clear: both;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T11:59:01.527

我想我理解了这个问题，因此要反转您在媒体查询中所做的更改，请使用下面的 CSS 将其设置回初始值。

```
.container {
  margin-right: initial;
  margin-left: initial;
  *zoom: initial;
}

.container:before,
.container:after {
  display: table;
  line-height: initial;
  content: initial;
}

.container:after {
  clear: initial;
} 
```

# .net - 警告用户安装 .net

> ID：15614266
> 
> 赞同：0
> 
> 时间：2013-03-25T11:53:21.447
> 
> 标签：.net, vb.net

如果我创建一个 .net 应用程序，那么它需要安装在客户端 pc 中的 .net 才能工作。那么有没有什么方法可以让我在没有安装 .net 的 PC 上运行我的应用程序时会给出警告消息“.net 未安装，请安装它”。可以将它包含在我的 .net 应用程序本身中，以便任何尝试在没有 .net 的情况下使用它的人都可以获得有关他必须做什么的消息。

# iphone - 如何从 ios 中的 .pem 文件生成密钥私钥？

> ID：15614267
> 
> 赞同：1
> 
> 时间：2013-03-25T11:53:22.953
> 
> 标签：iphone, objective-c, security, encryption

如何`private key`从iOS 中的`.pem`文件生成/如何在 iOS 中读取`.pem`文件？

# language-agnostic - epub 中的类属性使用

> ID：15614268
> 
> 赞同：0
> 
> 时间：2013-03-25T11:53:27.343
> 
> 标签：language-agnostic

对于通常在浏览器上查看的网站，我们可以使用空格分隔的类列表`class="class1 class2 class3"`。在我对 epub 的测试中，似乎我也可以使用空格分隔的列表。但是，我不确定大多数 epub 读者是否很好地支持它。将这种技术用于 epub 是否安全？有人在一些 epub 阅读器上测试过吗？

请注意：我只在 ADE 上测试过

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T04:42:16.530

我已经在市场上的大多数主要阅读器上进行了测试：nook、nook color、Kobo Arc、Kobo Mini、各种 Android 阅读系统，甚至是我的旧的第一代 Sony Reader，它运行良好。

# javascript - JavaScript 向上舍入到小数点后第二位 0

> ID：15614269
> 
> 赞同：0
> 
> 时间：2013-03-25T11:53:31.403
> 
> 标签：javascript, jquery

我如何获得第二个小数位0？

例如：

```
15.296326 => 15.30
15.245152 => 15.20 
```

我已经尝试过`toFixed()`，`Math.Floor`但无法得到预期的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:57:08.557

```
function roundFloat(n) {
    return (Math.round(n * 10) / 10).toFixed(2);
}

roundFloat(15.296326);  // "15.30"
roundFloat(15.245152);  // "15.20" 
```

# java - 未找到 Jframe 导入

> ID：15614270
> 
> 赞同：0
> 
> 时间：2013-03-25T11:53:33.977
> 
> 标签：java, eclipse, swing

我有一个奇怪的问题。我以前使用过 Jframe，但在我当前的项目中，我制作了一个 GUI，但我的程序没有找到 jFrame。他给出了一个错误

```
import javax.swing.JFrame; 
```

当我使用

```
import javax.swing.*; 
```

他没有给出错误，但他也没有找到 Jframe。这是一段代码：

```
package ServiceProvider;

import java.awt.EventQueue;
import javax.swing.JFrame;

public class SP {

    private JFrame frame;

    /**
     * Launch the application.
     */
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() 
... 
```

我使用的是旧版本的 eclipse(Gallileo)，我在其中安装了 windiwBuilder 和 swing 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:56:18.267

请查看您的 swing 包是否包含 JFrame 类。这可能是您的库损坏的情况..请重新安装它。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T18:03:12.123

在 Eclipse 中，键入 Ctrl-Shift-T（如果您在 Mac 上，则键入 Cmd-Shift-T）。在搜索框中，输入“jframe”。您应该会看到`JFrame`该类出现在列表中，它会在对话框底部告诉您它来自哪个包。如果您在此列表中看到它，那么它一定与您的源代码中的字符有关。

我的猜测是您在 JFrame 导入语句中的某处使用了非 ASCII 字符。尝试打开 Eclipse Preferences，在搜索框中输入 encoding，然后查看您的 Workspace 使用的字符编码。

# ios - 从 .Net 到 iOS 的最佳实践数据传输

> ID：15614273
> 
> 赞同：0
> 
> 时间：2013-03-25T11:53:45.677
> 
> 标签：ios, wcf, http, bytearray

我有一个 WCF Web 服务，一旦调用它就会返回一个 PDF 文档。

我尝试了 3 种传输这些数据的方法，我只想知道什么是我的场景的最佳实践。

方法：

1.  *将数据作为 HTTP 响应正文中的 byte[ ] 传回，封装在 JSON 中。*
2.  *在 HTTP 响应中将数据作为 base64 字符串传回，封装在 JSON 中。*
3.  *将文件保存并加密到公共文件夹，并将文件名发送回应用程序，然后使用 [NSData initWithDataFromURL:.....fileName.pdf] 等获取文件。*

在所有 3 种情况下，当同时下载 5 次以上时，我都会遇到数据损坏。

对于大约**230KB**的文件，方法 1 返回大小接近**850KB**的字节数组。对于同一个文件，方法 2 返回一个大约**300KB**的 base64 字符串。

对于方法 3，我仍在努力加密，但在不加密的情况下，通过线路发送的数据为**230KB**（与实际文件相同）。

**这使得方法 3 似乎是最有效的解决方案**，但我不敢相信没有比使用公用文件夹更清洁的解决方案......

您如何将非文本数据从您的服务传递到您的 iOS 应用程序？

# iphone - 网站上的 Twitter 提要无法在 iPad、iPhone 和类似设备上运行

> ID：15614276
> 
> 赞同：0
> 
> 时间：2013-03-25T11:53:49.173
> 
> 标签：iphone, ios, ipad, twitter, feed

在 iPad、iPhone 和我相信任何 IOS 设备上尝试时，我无法在[此处](http://dev.applications.3d4medical.com/homepage)查看 twitter 提要。

在这篇[显示 Twitter 提要停止工作](https://stackoverflow.com/questions/12845545/displaying-twitter-feed-stopped-working)的帖子中，它说我正在使用的推特提要将于 2013 年 3 月弃用。

问题是，我在桌面浏览器上看到我的推文没有任何问题。他们只在ios中失败。

有什么建议吗？有什么我做错了吗。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:03:29.630

他们使用的 Adob​​e Flash 不受 iPhone、iPad 或 iOs 模拟器的支持。

# android - 水平列表视图添加页脚视图

> ID：15614279
> 
> 赞同：1
> 
> 时间：2013-03-25T11:53:53.640
> 
> 标签：android, android-listview

我在[这里](http://www.dev-smart.com/archives/34)使用这个水平列表视图 ，我需要在列表末尾添加一个布局......它不支持 `addFooter()`所以我被卡住了

我想在最后添加一个“加载更多”按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:53:37.010

一种替代且有点脏的解决方案是将具有特定标志的虚拟项目添加到适配器的支持列表中。在`getView`标志的帮助下检查这个虚拟项目并膨胀页脚视图。

**更新列表时要小心。**您应该删除最后一个虚拟项目并添加附加列表，然后在需要时添加虚拟项目

假设这是您的列表项。

```
class Item {
    String title;
    String imageUrl;
    boolean flagFooter;//this is the flag which will be set when the view is a dummy view
} 
```

getView 方法可能如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    Item i = getItem(position);
    //check whether a view needs to be inflated or not
    if (convertView == null){
        holder = new ViewHolder();
        //check whether the view is the footer view or not
        if(i.flagFooter){
            holder.flagFooter = true;
            convertView = inflater.inflate(R.layout.list_footer, null);
        }else{
            convertView = inflater.inflate(R.layout.list_row, null);
        }
        //assign holder views all findViewById goes here

        convertView.setTag(holder);
    }else{
        holder = (ViewHolder) convertView.getTag();
        //check whether the view is the footer view or not
        if(i.flagFooter){
            holder.flagFooter = true;
            convertView = inflater.inflate(R.layout.list_footer, null);
            convertView.setTag(holder);
        }else{
            //check if the view which is being reused is a footer view 
            //if it is footer view a list row view should be used.
            if(holder.flagFooter){
                holder.flagFooter = false;
                convertView = inflater.inflate(R.layout.list_row, null);
                convertView.setTag(holder);
            }
        }
    }

    //update view here
    return convertView;

} 
```

视图持有者

```
class ViewHolder{
    TextView title;
    ImageView img;
    boolean footer;
} 
```

正如我之前提到的，这是一种肮脏的工作方式，但效果很好，过去曾使用过这种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T11:57:08.677

您必须使用自定义水平列表视图。

# symfony-2.1 - 使用 symfony 2.1 和 Assetic 管理和包含 Handlebars.js 文件

> ID：15614282
> 
> 赞同：6
> 
> 时间：2013-03-25T11:53:57.780
> 
> 标签：symfony-2.1, handlebars.js, assetic

我想从我的树枝文件中排除我的 handlebars.js 模板。

因此，我在放置所有车把模板的`public`文件夹中创建了一个新目录。`hbs`我如何告诉资产渲染这些模板并用脚本标签包装它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T21:46:02.110

您需要 AsseticBundle 2.1.2 或更高版本。除此之外，你还需要做三件事：

1.  安装车把编译器
2.  配置资产过滤器以编译您的车把模板
3.  在您的树枝模板中包含模板。

**安装编译器**

按照[车把网站上的说明进行操作](http://handlebarsjs.com/precompilation.html)。或者，更短：

```
npm install handlebars -g 
```

**配置过滤器**

将此添加到您的配置文件中：

```
assetic:
    filters:
        handlebars:
             apply_to: "\.handlebars$" 
```

这将告诉assetic 将车把过滤器应用于所有以“.handlebars”结尾的文件，从而有效地将它们转换为已编译的车把模板。您可以将设置调整为您喜欢的任何结局。

如果您的车把编译器不在默认位置 (/usr/bin/handlebars)，您可能需要告诉资产。为此，请使用车把过滤器的“bin”设置。例如，如果您已将其安装在项目的子目录中（通过使用不带 -g 选项的 npm），您的配置可能如下所示：

```
assetic:
    filters:
        handlebars:
             apply_to: "\.handlebars$"
             bin: node_modules/handlebars/bin/handlebars 
```

**Twig 模板中的引用**

在你的 twig 模板中添加一个新的引用，类似于你将如何包含 javascript 文件：

```
{% javascripts
    '@MyBundle/Resources/public/hbs/*.handlebars'

        output='assets/my-handlebars-templates.js'
        %}
    <script type="text/javascript" src="{{ asset_url }}"></script>  
{% endjavascripts %} 
```

然后，您可以在项目中使用模板。它们存储在 Handlebars.templates[templatename] 中，其中“template-name”是模板的文件名，不包括“.handlebars”。

希望有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T12:25:48.893

您可以在 bin 中放置正确的车把路径。以下为我工作。

```
assetic:
    filters:
        handlebars:
            apply_to: "\.handlebars"
            bin: /usr/local/bin/handlebars 
```

使用获取车把的正确位置

```
which handlebars 
```

# android - 示例中的错误（AsyncTask）

> ID：15614283
> 
> 赞同：-3
> 
> 时间：2013-03-25T11:54:01.257
> 
> 标签：android

我从[http://appfulcrum.com/2011/09/21/listview-example-5-using-sqlite-database/](http://appfulcrum.com/2011/09/21/listview-example-5-using-sqlite-database/)举了一个例子 ，代码中有一个错误

```
package com.appfulcrum.blog.examples.listviewcustomdb;

import android.app.ListActivity;
import android.database.Cursor;
import android.database.SQLException;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class CustomListViewDB extends ListActivity {

private ListView mainListView = null;
CustomSqlCursorAdapter adapter = null;
private SqlHelper dbHelper = null;
private Cursor currentCursor = null;

private ListView listView = null;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple);

    if (this.dbHelper == null) {
        this.dbHelper = new SqlHelper(this);

    }

    listView = getListView();
    listView.setItemsCanFocus(false);
    listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

    Button btnClear = (Button) findViewById(R.id.btnClear);
    btnClear.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            Toast.makeText(getApplicationContext(),
                    " You clicked Clear button", Toast.LENGTH_SHORT).show();
            ClearDBSelections();

        }
    });

    new SelectDataTask().execute();

    this.mainListView = getListView();

    mainListView.setCacheColorHint(0);

}

@Override
protected void onRestart() {
    super.onRestart();
    new SelectDataTask().execute();
}

@Override
protected void onPause() {

    super.onPause();
    this.dbHelper.close();
}

protected void ClearDBSelections() {

    this.adapter.ClearSelections();

}

private class SelectDataTask extends AsyncTask<string, void,="" string=""> {

    protected void onPreExecute() {
        // this.dialog.setMessage("Getting Names...");
        // this.dialog.show();
    }

    protected String doInBackground(final String... args) {

        try {

            CustomListViewDB.this.dbHelper.createDatabase();
            CustomListViewDB.this.dbHelper.openDataBase();

            CustomListViewDB.this.currentCursor = CustomListViewDB.this.dbHelper
                    .getCursor();

        } catch (SQLException sqle) {

            throw sqle;

        }
        return null;
    }

    // can use UI thread here
    protected void onPostExecute(final String result) {

        startManagingCursor(CustomListViewDB.this.currentCursor);
        int[] listFields = new int[] { R.id.txtTitle };
        String[] dbColumns = new String[] { SqlHelper.COLUMN_TITLE };

        CustomListViewDB.this.adapter = new CustomSqlCursorAdapter(
                CustomListViewDB.this, R.layout.single_item,
                CustomListViewDB.this.currentCursor, dbColumns, listFields,
                CustomListViewDB.this.dbHelper);
        setListAdapter(CustomListViewDB.this.adapter);

    }
}

} 
```

行错误

```
private class SelectDataTask extends AsyncTask<string, void,="" string=""> { 
```

如何写这一行没有错误？并且 Eclipse 仍然对这条线发誓

```
new SelectDataTask().execute(); 
```

写道“CustomListViewDB.SelectDataTask 类型的方法 execute() 未定义”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:58:39.897

在 Java 中，您不能为变量设置默认值，这不是 C#。

应该：

```
private class SelectDataTask extends AsyncTask<String, Void, String> { 
```

`String - string`此外， Java中没有类型的别名。

# asp.net-mvc - 在 MVC 视图中使用 EF 生成的类作为模型有哪些潜在风险？

> ID：15614286
> 
> 赞同：1
> 
> 时间：2013-03-25T11:54:22.603
> 
> 标签：asp.net-mvc, viewmodel, entity-framework-5

我在我的 MVC 应用程序中使用实体框架 5。

我目前正在将我的视图直接与使用 POCO 生成器生成的类型绑定。

这样做有风险吗？这是一个糟糕的设计吗？

或者我应该总是在绑定模型之前将它们转换为视图模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:04:51.540

> 这样做有风险吗？

我不会这么说的。我能看到的唯一风险是您可能会失去很多灵活性，并且演示文稿将由域驱动。对域模型的更改将直接影响演示。

> 这是一个糟糕的设计吗？

是的。

> 或者我应该总是在绑定模型之前将它们转换为视图模型？

是的，您应该定义和使用视图模型。这些类将为您提供对表示层的更多控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:09:55.783

我经常出于懒惰而开始使用 EF 类，想着“这一次会有所不同”。但我不可避免地会摆脱它并转换为使用自定义视图模型类。在视图中你想要的东西太多了，而你不想要在数据库中……虽然转换并不太痛苦，所以我并没有真正后悔。

# android - 在 android 上使用 OpenGL ES 着色器进行缩放和绘制

> ID：15614287
> 
> 赞同：1
> 
> 时间：2013-03-25T11:54:25.887
> 
> 标签：android, opengl-es, shader

我需要在图像上制作类似运动效果的东西。为此，我需要缩放原始图像并将其绘制在未缩放的原始图像上，并具有一定的透明度。

如何在opengl着色器中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:14:05.973

你不需要一个特定的着色器，你可以在第二个被缩放的地方绘制 2 个纹理矩形。为了确保 2 个图像之间的混合使用“glColor4f”或在 2 个绘图调用之间使用类似的东西（在第二个绘图调用设置 color4f(1,1,1,.5f) 之前），但不要忘记将其设置回 ( 1,1,1,1) 抽签后。

如果你真的需要在着色器的一次调用中执行此操作：使用最常见的着色器来绘制纹理形状，添加一些“缩放”参数作为输入。然后

`vec2 scaledCoordinate = vec2((texCoord.x-.5)/scale + .5, (texCoord.y-.5)/scale + .5)`

然后使用这样的东西：

```
gl_FragColor = mix(texture2D(texture, texCoord), texture2D(texture, scaledCoordinate), .5); 
```

# shell - 使用 AT 命令将日期写入 wvdial 以设置 GPS 模块时间

> ID：15614289
> 
> 赞同：1
> 
> 时间：2013-03-25T11:54:27.957
> 
> 标签：shell, date, gps, at-command

我有一个 GPS 模块，在机器关闭时会丢失时间。没有正确的时间，就没有 GPS 定位。

我`wvdial`用来将 Hayes 命令发送到位于 的 GPS 模块`/dev/ttyUSB3`。时间应该在启动时设置，我猜是用一个初始化脚本。我以如下格式获取日期：

```
#!/bin/sh
DATE=`date +%m/%d/%y,%H:%M:%S`
echo $DATE > setGPStime.txt 
```

比 wvdial 必须向 GPS 发送时间

```
AT+CCLK=<time> 
```

如何读取 date 命令的输出来设置时间`wvdial`？我如何在 shell 脚本中执行此操作，或者是否有“更好”的方法？

我对shell脚本不是很熟悉。有没有人有任何好的想法来做这件事或把我送到正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:13:33.840

你可以从一个文件中读入一个像这样的变量：

```
fromFile=$( cat setGPStime.txt ) 
```

但是，如果您从调用`wvdial`的同一脚本调用`date`，则不需要临时文件。只需`$( date %m/%d/%y,%H:%M:%s )`在要使用从文件中读取的值的任何地方使用。可能是这样的（我不熟悉 的用法`wvdial`）？

```
wvdial "AT+CCLK=$( date %m/%d/%y,%H:%M:%s )" 
```

然而，亚历克斯维恩是对的。这可能只是设置模块上的显示时间，而不是实际用于定位的任何内容。GPS 使用具有（大约）纳秒精度的时间信号，这是任何车载硬件都无法实现的。卫星本身保持正确的时间，并在模块接收到的信号上传输必要的值。您的模块只需要对接收到的信号进行数学运算，而不需要维护时钟本身。

# javascript - Javascript - 是否可以缓存元素的内部 html，以便在页面刷新后我可以呈现缓存的元素？

> ID：15614291
> 
> 赞同：1
> 
> 时间：2013-03-25T11:54:34.450
> 
> 标签：javascript, jquery, html

我正在寻找一种缓存（客户端）我页面的一部分的可能性 - 是否可以使用 javascript/jquery 来实现？如果是这样，该缓存是否有任何限制？我的意思是，如果我想缓存大量数据怎么办？页面刷新后如何访问此缓存，以便重新渲染？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:09:18.127

图像和 CSS 将被自动缓存。您不能缓存页面刷新时要使用的特定 DOM 部分。您可以使用本地存储。它将数据存储在键值对中。请通过 Derek 提供的链接查看如何在本地存储中设置数据并在下次加载页面时使用它。

简单的算法可以

```
check if data is there in local storage
yes - use it
no - get from server, save it in local storage and use it. 
```

# jquery - 如何使用 MVC4 处理 Ajax 响应

> ID：15614300
> 
> 赞同：1
> 
> 时间：2013-03-25T11:55:09.047
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我也使用 jquery mobile 来增加乐趣。我想做的只是做一个帖子并保持在同一页面上，但是我被重定向到登录页面，弹出窗口有效，但我最终进入了登录页面。

```
 function UpdateClient(data) {
                var baseUrl = '@Url.Action("MobileAppointmentEdit")';
                $.ajax({
                    url: baseUrl,
                    type: 'POST',
                    data: {Id:'@Model.Id' },
                    success: function(response) {
                       $("#popupSaved").popup();
                        return false;
                    }
                });
            }

[HttpPost]
        public ActionResult MobileAppointmentEdit(MobileAppointment appointment)
        {
            if (appointment !=null)
            {

//Do stuff

            }

            return null;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:17:56.630

就像是

```
function UpdateClient(data) {
                var baseUrl = '@Url.Action("MobileAppointmentEdit")';
                $.ajax({
                    url: baseUrl,
                    type: 'POST',
                    dataType:'json'
                    data: {Id:'@Model.Id' },
                    success: function(response) {
                     if(response.Success)
                     {  
                       $("#popupSaved").popup();
                     }
                   else{
                       $("#popupNotSaved").popup();}

                    }
            });
        } 
```

在服务器端你应该`JsonResult`像

```
[HttpPost]
        public ActionResult MobileAppointmentEdit(MobileAppointment appointment)
        {
            if (appointment !=null)
            {

             //Do stuff     
             return Json(new {Success = true});

            }

            return Json(new{Success = false});
        } 
```

值得注意的是，如果发生故障，您可以在 json 对象中发送其他字段，例如错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:01:03.257

您似乎从成功的 AJAX 回调中返回 false ，但这没有任何意义。看起来您正在`UpdateClient`从某种形式的提交按钮调用此函数。确保从此函数返回 false 以取消默认操作。例如：

```
<input type="submit" value="Save" onclick="return UpdateClient();" /> 
```

然后从函数本身返回 false：

```
function UpdateClient(data) {
    var baseUrl = '@Url.Action("MobileAppointmentEdit")';
    $.ajax({
        url: baseUrl,
        type: 'POST',
        data: { id: '@Model.Id' },
        success: function(response) {
            $("#popupSaved").popup();
        }
    });

    return false; // <!-- here, that's the important bit
} 
```

# javascript - Mac 上的 JavaFx webview HTML5 拖放

> ID：15614305
> 
> 赞同：2
> 
> 时间：2013-03-25T11:55:19.257
> 
> 标签：javascript, javafx

我正在尝试在 webview 浏览器组件中使用 html5 拖放。以下不适用于 Mac，但在 Windows 中运行良好。

```
droptarget.ondrop = function (event) {
  event.preventDefault && event.preventDefault();
  var data = event.dataTransfer.getData('text/plain');
  event.stopPropagation();
  return false;
}; 
```

数据在 MacOS 中未定义。我无法设置传输文本和正确的 mime 类型，因为拖动将从另一个浏览器初始化。

# java - 相同的字符串，不同的哈希码

> ID：15614306
> 
> 赞同：0
> 
> 时间：2013-03-25T11:55:19.717
> 
> 标签：java, scala, hashcode

我正在编写一个简单的查找，但不知何故总是失败。进一步调查，我发现了一些我无法解释的东西：似乎虽然我的字符串是相同的，但它们没有得到相同的哈希码。

```
fr.unice.i3s.modalis.jSeduite.technical.restaurant.CourseFinder Hex: 66722E756E6963652E6933732E6D6F64616C69732E6A536564756974652E746563686E6963616C2E72657374617572616E742E436F7572736546696E646572 Hash code: 1515256474
fr.unice.i3s.modalis.jseduite.technical.restaurant.CourseFinder Hex: 66722E756E6963652E6933732E6D6F64616C69732E6A736564756974652E746563686E6963616C2E72657374617572616E742E436F7572736546696E646572 Hash Code: 2099127532 
```

用 Java 6 重复实验，我遇到了类似的问题。请注意，无论哪种方式，事情都不是一成不变的：

```
fr.unice.i3s.modalis.jSeduite.technical.restaurant.CourseFinder Hex: 66722E756E6963652E6933732E6D6F64616C69732E6A536564756974652E746563686E6963616C2E72657374617572616E742E436F7572736546696E646572 Hash code: 1515256474
fr.unice.i3s.modalis.jseduite.technical.restaurant.CourseFinder Hex: 66722E756E6963652E6933732E6D6F64616C69732E6A736564756974652E746563686E6963616C2E72657374617572616E742E436F7572736546696E646572 Hash Code:  - 1772912571 
```

我的代码依赖于这个匹配，我不想运行 .equals() 因为它可能太慢了。

据我了解，相同字符串的哈希码应该相同。这是JVM中的错误吗？是否涉及一些神奇的 Scala 干扰？

环境：

*   斯卡拉 2.10
*   64 位 Oracle Java 1.7.0_17 和 Oracle Java 1.6.0_43
*   IntelliJ IDEA（最新社区版）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T11:59:05.810

`fr.unice.i3s.modalis.jSeduite.technical.restaurant.CourseFinder`

`!=`

`fr.unice.i3s.modalis.jseduite.technical.restaurant.CourseFinder`

( `jSeduite != jseduite`)

# ios - 如何处理音频项目

> ID：15614307
> 
> 赞同：0
> 
> 时间：2013-03-25T11:55:21.563
> 
> 标签：ios, core-audio, avaudioplayer, openal

我想创建一个 iOS 应用程序来记录或从文件中获取音频，让用户选择应用过滤器并在应用过滤器的情况下播放所述音频。

然而，我完全不确定如何处理这个项目。如何最好地修改音频文件的声音？

我应该使用 Core Audio、OpenAL 还是有其他音频引擎可以让这变得更容易？哪里是开始学习这类东西的好地方？

感谢您给我的任何建议！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:50:40.000

Core Audio 是 Apple 的方式，网上有很多使用它的示例。要应用过滤器，您将使用`AudioUnits`

一个名为[The Amazing Audio Engine](http://theamazingaudioengine.com/)的新音频引擎刚刚发布在 CoreAudio 之上，这可能很有用。

一本好书是 Chris Adamson 的[Learning Core Audio: A Hands-on Guide to Audio Programming for Mac and iOS](http://www.amazon.co.uk/Learning-Core-Audio-Hands-Programming/dp/0321636848)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T10:05:35.787

OpenAL 不是为此目的而设计的。它主要用于播放音频，除了音高转换（这也会导致加速或减速）和其他非常基本的音频操作之外没有任何效果。如果您想应用更强大的音频过滤器和效果，Core Audio 和 Audio Unit 技术是您的最佳选择。[去年发布了一本关于学习 Core Audio](https://rads.stackoverflow.com/amzn/click/com/0321636848)的好书（也是为数不多的书之一），但最近发布的是您的答案中已经提到的音频引擎。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-25T11:59:52.567

好吧，我曾经在 C# 中使用过音频并使用过[Bass 音频库](http://www.un4seen.com/) 如果你在 Visual C++ 中工作，我认为你可以尝试使用 DirectX 中的 DirectSound 库，但它只支持 wav 文件格式（未压缩的音频），所以如果你想播放mp3，您必须“即时”解压缩并将流发送到 directsound 缓冲区。

请提供更多细节。

# java - 字符串索引超出范围：-1

> ID：15614311
> 
> 赞同：0
> 
> 时间：2013-03-25T11:55:31.847
> 
> 标签：java, xml, xml-parsing

```
//filename 1.xml

<category 
hello world
</category>
//when iam trying to parse this file using the following code it throws String index out of range: -1
 output: startPos: -1
         endPosi: -1

 String dataLine = nextLine.trim();
 int startPos = dataLine.indexOf(startToken);
 logger.debug("startPos: " + startPos);
 int endPosi = dataLine.lastIndexOf(endToken);
 logger.debug("endPosi: " + endPosi);

// 2.xml it parses this file which contains the following line

<category hello world </category> 
```

// 这两个文件的唯一区别是第一个文件的内容是三行，第二个文件的内容是单行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:03:41.990

将输入文件更改为：

```
<category>
    hello world
</category> 
```

然后你的开始令牌：

```
String startToken = "<category>"; 
```

您遇到的一个问题`<category`是 XML 无效。这`.trim()`是剥离第一个文件第一行的尾随空格。简短的回答：修复 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:02:12.030

该方法[`trim()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#trim%28%29)删除尾随空格。现在[`indexOf()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)找不到“ `<category`”（带有尾随空格）并返回`-1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:03:02.797

```
int startPos = dataLine.indexOf(startToken); 
```

我认为您的 dataLine 字符串中没有 startToken ，因此它返回 -1；

[字符串#indexOf("str")](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#indexOf%28java.lang.String%29)

> 如果字符串参数作为该对象中的子字符串出现，则返回第一个此类子字符串的第一个字符的索引；如果它不作为子字符串出现，则返回 -1。

# android - 如何设置 Android Autocomplete textviews 下拉列表视图的褪色边缘的颜色？

> ID：15614315
> 
> 赞同：3
> 
> 时间：2013-03-25T11:55:40.357
> 
> 标签：android, android-widget

我尝试通过设置属性 overscrollmode="never" 但它不起作用有没有其他方法可以做到这一点

# c# - 将参数和字符串传递给 Activator.CreateInstance

> ID：15614316
> 
> 赞同：0
> 
> 时间：2013-03-25T11:55:40.403
> 
> 标签：c#

我有一个名为“FileParser”的程序集，其中包含符合“IFile”接口的“FileAutoSys”类。

```
namespace FileParser
{
    class FileAutoSys : IFile
    {
        public FileAutoSys(ref string[] args)
        {
            ...
        }
        public FileAutoSys(){}
        public void SetValues(ref string[] args)
        {
            *[same code as in the non-default constructor]*
        }
} 
```

我正在尝试使用 Activator.CreateInstance 创建 FileAutoSys 的实例，但在将 args 传递到其构造函数时遇到问题。

我可以使用两步过程创建一个实例并设置其状态：

```
IFile file = (IFile)Activator.CreateInstance(Type.GetType("FileParser.File" + args[0]));
file.SetValues(ref args); 
```

其中 args[0] 是字符串“AutoSys”。

但我不知道如何一步完成。我已经用谷歌搜索了，但我找不到任何明确的例子来说明它是如何完成的。MSDN 建议我使用重载：

```
Activator.CreateInstance(Type, Object[]) 
```

但是，无济于事的是，它没有给出任何示例，而且我缺乏 C# 知识使其令人困惑。

我希望有人可以向我解释我应该如何在我的示例中使用上述重载。我不是要求有人为我做这件事，因为我想了解我应该做什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:01:39.283

只需将它们作为第二个参数传入即可。

```
IFile file = (IFile)Activator.CreateInstance(
    Type.GetType("FileParser.File" + args[0]), new object[] { args }); 
```

编辑：将第二个参数包装在一个数组中，因为这是预期的参数类型，以及 on 的参数类型`Activator.CreateInstance`，我认为这就是它令人困惑的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:01:22.887

尝试这个：

```
class CreateMe {
    public CreateMe(ref string[] args) {
    }
}

class Program {
    static void Main(string[] args) {
        var createMe = Activator.CreateInstance(typeof(CreateMe), new object[] { args });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:05:51.543

```
IFile file = (IFile)Activator.CreateInstance(Type.GetType("FileParser.File" + args[0]), new object[]{args}); 
```

# ios - 数据库插入问题

> ID：15614318
> 
> 赞同：0
> 
> 时间：2013-03-25T11:55:48.283
> 
> 标签：ios, sqlite

我在向数据库添加数据时遇到了麻烦，这是一个很奇怪的问题

当我添加只有 2 个参数的数据时，如下所示

```
for(int i=0; i<_birthdateincontects.count; i++){

        sqlite3_stmt *stmt;
        int x;

        char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates) values(?,?);";
        x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

        if (x == SQLITE_OK)
        {

            NSLog(@"%@",[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]]);
            NSLog(@"%@",[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]]);

            sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]] UTF8String],-1, NULL);
            sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]] UTF8String],-1, NULL);

            if (sqlite3_step(stmt) != SQLITE_DONE){}

             sqlite3_finalize(stmt);

    } 
```

然后它完美地工作并且添加循环发生3次并且数据被添加

但是当我尝试像这样添加时

```
for(int i=0; i<_birthdateincontects.count; i++){

        sqlite3_stmt *stmt;
        int x;

        char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates,Profilepic) values(?,?,?);";
        x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

        if (x == SQLITE_OK)
        {

            NSLog(@"%@",[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]]);
            NSLog(@"%@",[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]]);
            NSLog(@"%@",[NSString stringWithFormat:@"%@",@"No Image"]);

            sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]] UTF8String],-1, NULL);
            sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]] UTF8String],-1, NULL);
             sqlite3_bind_text(stmt, 3, [[NSString stringWithFormat:@"%@",@"No Image"] UTF8String],-1, NULL);

            if (sqlite3_step(stmt) != SQLITE_DONE){}

             sqlite3_finalize(stmt);

    } 
```

然后与上面的循环相同，运行 3 次，但在数据库中只添加了第一个原始数据，其他时间循环运行，但没有添加任何内容，为什么会发生这种情况是我的想法。请提出一些建议，让我摆脱这种混乱

注意：nslog 打印值完美

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:02:00.943

通常当 SQL 语句失败时，您可以查看一下`sqlite3_errmsg`，它会告诉您出了什么问题，例如：

```
for(int i=0; i < _birthdateincontects.count; i++){

    sqlite3_stmt *stmt;
    int x;

    char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates,Profilepic) values(?,?,?);";
    x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil);

    if (x == SQLITE_OK)
    {

        NSLog(@"%@",[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]]);
        NSLog(@"%@",[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]]);
        NSLog(@"%@",[NSString stringWithFormat:@"%@",@"No Image"]);

        sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]] UTF8String],-1, NULL);
        sqlite3_bind_text(stmt, 3, [@"No Image" UTF8String],-1, NULL);

        if ((x = sqlite3_step(stmt)) != SQLITE_DONE) {
            NSLog(@"%s: step failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
        }

        sqlite3_finalize(stmt);
    }
    else
    {
        NSLog(@"%s: prepare failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
    }
} 
```

* * *

顺便说一句，您还可以通过不每次都重新准备 SQL 来提高效率，例如：

```
char *update = "insert into PersonNamesAndBirthDates (Names,Birthdates,Profilepic) values(?,?,?);";
sqlite3_stmt *stmt;
int x;

if ((x = sqlite3_prepare_v2(database1, update, -1, &stmt, nil)) != SQLITE_OK)
{
    NSLog(@"%s: prepare failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
    return;
}

for (int i = 0; i < _birthdateincontects.count; i++)
{
    sqlite3_bind_text(stmt, 1, [[NSString stringWithFormat:@"%@",[_namesincontects objectAtIndex:i]] UTF8String],-1, NULL);
    sqlite3_bind_text(stmt, 2, [[NSString stringWithFormat:@"%@",[_birthdateincontects objectAtIndex:i]] UTF8String],-1, NULL);
    sqlite3_bind_text(stmt, 3, "No Image", -1, NULL);

    if ((x = sqlite3_step(stmt)) != SQLITE_DONE) {
        NSLog(@"%s: step failed: %s (%d)", __FUNCTION__, sqlite3_errmsg(database1), x);
    }

    sqlite3_reset(stmt);
}

sqlite3_finalize(stmt); 
```

# linux - Linux中U区等价数据结构是什么？

> ID：15614319
> 
> 赞同：5
> 
> 时间：2013-03-25T11:55:48.660
> 
> 标签：linux, unix

我们在 UNIX 中有 U 区，它保存与进程相关的信息。Linux中类似于U区的数据结构是什么？

另外，是否可以在 UNIX（和 Linux）中查看 U 区保存的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:56:04.610

在 Linux 中，U 区的内容与其余的进程信息一起存储在一个[task_struct中。](http://tldp.org/LDP/tlk/ds/ds.html)

据我所知，它只能通过[proc](http://linux.die.net/man/5/proc)文件系统访问。

# inverse - 获取 NetPBM 负像（数学公式）

> ID：15614321
> 
> 赞同：-2
> 
> 时间：2013-03-25T11:56:05.307
> 
> 标签：inverse

我有一个整数值文件，范围从 0 到 255。零值表示黑色像素，而 255 值表示白色像素。介于两者之间的值是“类似灰色的颜色”。我正在寻找一种方法来反转该文件，以便将 255 转换为 0 并将 0 转换为 255（每个示例），从而使我能够成功获得图像的负片。

有没有办法做到这一点？我确信答案是一个使用模数的简单数学公式，但我无法理解。

更多请参考： [NetPBM](http://en.wikipedia.org/wiki/Netpbm_format)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:40:51.013

如果值的范围是 0 - 255

倒数是 255 - 值

# svg - 如何使 nvd3 在 Internet Explorer 8 中工作？

> ID：15614322
> 
> 赞同：2
> 
> 时间：2013-03-25T11:56:10.323
> 
> 标签：svg, d3.js, nvd3.js

我正在创建一个我正在使用 nvd3 的仪表板项目，但我们知道 svg 在 IE8 中不受支持，因此它不会在 IE8 中呈现图形/图表。请建议我如何使 nvd3 在 IE8 中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T17:55:18.223

我处于同样的情况，我想我可能会放弃 nvd3（除了不支持 ie8，我正在寻找其他错误）。我想知道，有没有人成功地将 r2d3 与 nvd3 一起使用？

我担心的是 r2d3 现在使用 d3v3，而 nvd3 目前不支持（目前 d3v2...d3v3 支持在撰写本文时工作）。

对于 nvd3 的替代方案，我正在考虑： [MorrisJS](http://www.oesmith.co.uk/morris.js/)！- 适用于 ie8（基于 Raphael），但项目较新，图表的灵活性/选项相对较少。

[谷歌图表引擎](https://google-developers.appspot.com/chart/)！- 我认为这可能是要走的路（对于我的项目），我不喜欢它不是开源的，但我已经在广泛使用 Google Maps API，这个解决方案非常稳定且易于使用到目前为止我的经历。在 ie8 的有限测试中，它运行良好。

此外，这是关于此主题的另一个 stackoverflow 问题，[问题]：[nvd3.js rendering solution for Internet Explorer](https://stackoverflow.com/questions/14569763/nvd3-js-rendering-solution-for-internet-explorer) ...似乎 r2d3 是那里公认的答案，但没有人真正验证它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T01:29:12.463

库[r2d3](https://github.com/mhemesath/r2d3/)是“由 RaphaelJS 提供支持的 D3 的定制构建。D3 和 Raphael 的组合使开发人员能够轻松构建适用于 IE7+ 和所有现代浏览器的数据可视化。” - 它有其局限性（有关详细信息，请参阅链接），但这是一个很好的起点

# c++ - 带有模板参数的函数指针歧义

> ID：15614328
> 
> 赞同：1
> 
> 时间：2013-03-25T11:56:23.340
> 
> 标签：c++, templates, function-pointers

我正在尝试将重载函数指针作为参数传递给模板函数。

```
float Function1(float par1)
{
 return 0;  
}

float Function1(float par1, float par2)
{
 return 0;  
}

template<typename R, typename A1>
void Bind(R(*func)(A1))
{
   std::cout << "Correct one called\n";
}

template<typename R, typename A1, typename A2>
void Bind(R(*func)(A1, A2))
{
   std::cout << "False one called\n";
}

int main()
{
 Bind<float, float>(&Function1);
} 
```

即使我用 2 个浮点参数显式调用该函数，编译器似乎也无法解析正确的调用。编译器显示“不明确的函数调用”错误。

我在这里创建了一个小样本：http: [//liveworkspace.org/code/4kVlUY$195](http://liveworkspace.org/code/4kVlUY%24195)

这个错误的原因是什么？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T11:59:50.270

当您尝试获取`Function1`的地址时，就会出现歧义。编译器看到 2 个重载，它不知道您指的是哪一个。您需要明确指出您想要哪一个：

```
Bind(
    static_cast<float(*)(float, float)>(&Function1)
); 
```

您在调用时明确指示模板参数`Bind`，但为时已晚，在此之前就发现了歧义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T11:59:11.063

您需要手动解决歧义，例如使用强制转换表达式。

```
Bind<float, float>( static_cast< float (*)(float par1, float par2)>( &Function1 )); 
```

根据错误消息，这不是`Function1`模棱两可，而是`Bind`.

```
Compilation finished with errors:
source.cpp:31:4: error: call to 'Bind' is ambiguous
Bind<float, float>(&Function1);
^~~~~~~~~~~~~~~~~~

source.cpp:18:6: note: candidate function [with R = float, A1 = float]
void Bind(R(*func)(A1))
^
source.cpp:24:6: note: candidate function [with R = float, A1 = float, A2 = float]
void Bind(R(*func)(A1, A2)) 
```

问题是您指定了两个参数 ，`<float, float>`但这并不排除自动推导出*第三个参数的可能性。*C++ 允许对同一个函数模板调用进行显式和隐式参数！

另一种解决方案是强制它解析模板名称而不考虑隐式参数。这也[有效](http://liveworkspace.org/code/4kVlUY%24210)，但它更hackish：

```
(*&Bind<float, float>)(&Function1); // Taking address first hides arguments from deduction 
```

# php - PHP禁止列表制作

> ID：15614332
> 
> 赞同：-2
> 
> 时间：2013-03-25T11:56:42.200
> 
> 标签：php

我有两个文件：index.php 和 ban.php。

我想禁止任何访问 ban.php 的人使用 index.php。

我不能使用 mysql（加载问题）或让 php 写入`.httaccess`（安全问题）。

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:04:08.507

创建banlist.txt

```
<?
// In ban.php
$fp = fopen('banlist.txt','a+');
fwrite($fp,$USER_IP);
?>

<?
// In index.php
$list = file(banlist.txt);
if(in_array($USER_IP,$list)){
    header('Location:ban.php');
    die();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:07:08.743

首先，您需要将 IP 地址添加到可以从这两个文件访问的文件中，例如：

**禁止.php**

```
<?php
$ipAddress = $_SERVER['REMOTE_ADDR'];   // get the ip
$list  = file_get_contents('ipbans.txt');
$list .= $ipAddress . '\n';  
file_put_contents('ipbans.txt', $list); 
```

**索引.php**

```
<?php
$file = file('ipbans.txt');
foreach ($file as $line)
{
    if ($_SERVER['REMOTE_ADDR'] == $line) {
        die; // or header('Location:') or something...
    }
} 
```

这不会检查重复项，因此任何多次访问的人都会`ban.php`多次添加他们的 IP。检查 (in `ban.php`) 是微不足道的，所以我把它留给你作为练习。

希望这可以帮助

# eclipse - 从 Eclipse 将 Web 应用程序部署到 JBoss，并具有依赖项

> ID：15614333
> 
> 赞同：5
> 
> 时间：2013-03-25T11:56:46.833
> 
> 标签：eclipse, maven, deployment, jboss

我有一个在安装了 JBoss 工具的 Eclipse 下开发的项目。当我将应用程序部署到 Jboss 服务器时，一些通过 Maven 可用于项目的帮助 jar 文件不会复制到 WEB-INF/lib 文件夹中。因此，我在运行时遇到`ClassNotFound`异常。

是否有任何方法可以说服 Eclipse（或 Maven）在部署时将 jar 复制到 lib 文件夹中？

编辑： pom.xml 看起来像：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                                   http://maven.apache.org/maven-v4_0_0.xsd">

<modelVersion>4.0.0</modelVersion>
<groupId>com.whatever.simulators</groupId>
<artifactId>eebuildingsim</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>eebuildingsim Maven Webapp</name>
<url>http://maven.apache.org</url>

<dependencies>

    <!-- begin JBoss -->

    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.3.2.FINAL</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>jaxrs-api</artifactId>
        <version>2.3.0.GA</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>4.1.2</version>
        <scope>provided</scope>
    </dependency>

    <!-- end JBoss -->

    <dependency>
        <groupId>ro.mysite</groupId>
        <artifactId>petrinetexec</artifactId>
        <version>0.1.3.81</version>
    </dependency>

    <dependency>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-resources-plugin</artifactId>
        <version>2.4.3</version>
    </dependency>

    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.6</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.whatever.myAuxiliaryStuff</groupId>
        <artifactId>myAuxiliaryStuff </artifactId>
        <version>0.1.0.1305</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.2.0-m09</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.2.0-m09</version>
    </dependency>
</dependencies>

<build>
    <finalName>eebuildingsim</finalName>
</build> 
```

工件`myAuxiliaryStuff`应该部署在`WEB-INF/lib`jboss 部署服务器下。

使用：

*   Eclipse：Juno 服务版本 1
*   老板：7.1.1。最后
*   m2e 1.3.1.20130219-1424
*   eclipse web工具平台3.4.2.v2013

稍后编辑：jboss 的日志文件中报告的错误如下所示：

```
 12:31:38,507 INFO  [org.jboss.weld.deployer] (MSC service thread 1-5)
 JBAS016002: Processing weld deployment mywar.war 12:31:38,522 ERROR
 [org.jboss.msc.service.fail] (MSC service thread 1-5) MSC00001: Failed
 to start service jboss.deployment.unit."mywar.war".POST_MODULE:
 org.jboss.msc.service.StartException in service
 jboss.deployment.unit."mywar.war".POST_MODULE: Failed to process phase
 POST_MODULE of deployment "mywar.war"  at
 org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119)
 [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]  at
 org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
 [jboss-msc-1.0.2.GA.jar:1.0.2.GA]  at
 org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
 [jboss-msc-1.0.2.GA.jar:1.0.2.GA]  at
 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
 [rt.jar:1.7.0_05]  at
 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
 [rt.jar:1.7.0_05]  at java.lang.Thread.run(Thread.java:722)
 [rt.jar:1.7.0_05] Caused by: java.lang.NoSuchFieldError: FLOW  at
 com.sun.faces.flow.FlowDiscoveryCDIExtension.<clinit>(FlowDiscoveryCDIExtension.java:90)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native
 Method) [rt.jar:1.7.0_05]  at
 sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
 [rt.jar:1.7.0_05]  at
 sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
 [rt.jar:1.7.0_05]  at
 java.lang.reflect.Constructor.newInstance(Constructor.java:525)
 [rt.jar:1.7.0_05]  at
 org.jboss.as.weld.deployment.processors.WeldPortableExtensionProcessor.loadExtension(WeldPortableExtensionProcessor.java:117)
    at
 org.jboss.as.weld.deployment.processors.WeldPortableExtensionProcessor.loadAttachments(WeldPortableExtensionProcessor.java:100)
    at
 org.jboss.as.weld.deployment.processors.WeldPortableExtensionProcessor.deploy(WeldPortableExtensionProcessor.java:86)
    at
 org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:113)
 [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]  ... 5 more

 12:31:38,522 INFO  [org.jboss.as.server] (DeploymentScanner-threads -
 2) JBAS015870: Deploy of deployment "mywar.war" was rolled back with
 failure message {"JBAS014671: Failed services" =>
 {"jboss.deployment.unit.\"mywar.war\".POST_MODULE" =>
 "org.jboss.msc.service.StartException in service
 jboss.deployment.unit.\"mywar.war\".POST_MODULE: Failed to process
 phase POST_MODULE of deployment \"mywar.war\""}} 12:31:38,647 INFO 
 [org.jboss.as.server.deployment] (MSC service thread 1-1) JBAS015877:
 Stopped deployment mywar.war in 115ms 12:31:38,647 INFO 
 [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774:
 Service status report JBAS014775:    New missing/unsatisfied
 dependencies:
       service jboss.naming.context.java.module.mywar.mywar (missing) dependents: [service
 jboss.naming.context.java.module.mywar.mywar.ValidatorFactory, service
 jboss.naming.context.java.module.mywar.mywar.Validator]  JBAS014777:  
 Services which failed to start:      service
 jboss.deployment.unit."mywar.war".POST_MODULE:
 org.jboss.msc.service.StartException in service
 jboss.deployment.unit."mywar.war".POST_MODULE: Failed to process phase
 POST_MODULE of deployment "mywar.war"

 12:31:38,647 ERROR [org.jboss.as.server.deployment.scanner]
 (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation
 failed and was rolled back. Steps that failed:" => {"Operation step-2"
 => {"JBAS014671: Failed services" => {"jboss.deployment.unit.\"mywar.war\".POST_MODULE" =>
 "org.jboss.msc.service.StartException in service
 jboss.deployment.unit.\"mywar.war\".POST_MODULE: Failed to process
 phase POST_MODULE of deployment \"mywar.war\""}}}} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T06:08:17.460

Eclipse 和插件有点挑剔。这就是我为使其正常工作所做的工作。

```
Project -> Properties -> Deployment Assembly
Add...
Java Build Path Entries (Next >)
Maven Dependencies (Finish) 
```

Deploy Properties 面板现在应该包含 Source: Maven Dependecies -> Deploy Path: WEB_INF/lib 的条目

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T11:12:30.040

这很可疑：

```
java.lang.NoSuchFieldError: FLOW 
```

如果我没记错的话，这与 JSF 有关。我有一些建议，但我不是任何方面的专家。

首先尝试像这样添加依赖`provided`范围（因为 JBoss 有它们）：`jsf-api``jsf-impl`

```
<dependency>
    <groupId>com.sun.faces</groupId>
    <artifactId>jsf-api</artifactId>
    <version>2.2.0-m09</version>
    <scope>provided</scope>   // <----- do it for both
</dependency> 
```

AFAIK，JBoss 7.1.1 已经有 JSF 2.1.7。所以，如果你真的需要 JSF 2.2，你应该更新 JBoss 中的 JSF 模块。这里是如何[`Migration to JSF 2.2`](https://community.jboss.org/thread/203257)。

另一种选择是将 JSF 捆绑到您的 WAR 中并通知 JBoss 排除它的*容器版本*（JBoss 附带的版本）：

在*web.xml*中添加：

```
<context-param>
      <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
      <param-value>true</param-value>
</context-param> 
```

并在*jboss-deployment-structure.xml*中排除 JBoss 的实现：

```
<jboss-deployment-structure>
    <deployment>

        <exclusions>
            <module name="javax.faces.api" />
        </exclusions>
             .
             .
             . 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T07:32:58.990

根据您的描述，您只有 Eclipse 和 JBoss 工具在使用中，并且依赖项存储在 Maven pom 文件中。要让 Eclipse 了解这些依赖关系，您需要有 eclipse-maven 集成。M2e是它的常见选择。

所以你需要安装这些：

*   [平方米](http://eclipse.org/m2e/)
*   [m2e-wtp](http://www.eclipse.org/m2e-wtp/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T16:22:47.520

转到 pom.xml 所在的目录并执行以下命令。

```
mvn package 
```

此命令应创建一个 war 文件，供您部署到应用程序服务器。该文件是一个 zip 文件，查看其内容并查看您的 myAuxiliaryStuff.jar 是否在 web-inf/lib 中。如果是，您的问题在于 Eclipse 与 Maven 的集成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-04T03:10:15.183

你似乎已经安装了所有东西。我也有这个问题。只需右键单击项目并选择。

“标记为可部署”

# html - 当 ie 和 chrome 正确查看字体时，firefox 没有查看字体

> ID：15614335
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:56:52.443
> 
> 标签：html, css, fonts

当 ie 和 chrome 正确查看字体时，firefox 没有查看字体

这是CSS代码：

```
.menu_head {
    width: 100%;
    position: relative;
    height: 30px;
    font-family: fs_metal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:06:21.817

您是否使用@font-face 导入字体？因为如果你是 Firefox 有一个非常具体的方式来处理这个。

这是关于 SO 的另一篇文章，详细说明了这一点

[CSS @font-face 不适用于 Firefox，但适用于 Chrome 和 IE](https://stackoverflow.com/questions/2856502/css-font-face-not-working-with-firefox-but-working-with-chrome-and-ie)

[https://stackoverflow.com/a/15218631/2062450](https://stackoverflow.com/a/15218631/2062450)

# android - android ViewPager xml膨胀错误

> ID：15614337
> 
> 赞同：4
> 
> 时间：2013-03-25T11:56:55.537
> 
> 标签：android, android-viewpager

我正在学习如何实现水平滑动，并且在尝试启动具有`ViewPager`布局的应用程序时遇到以下错误。

```
03-25 17:12:13.166: E/AndroidRuntime(19449): FATAL EXCEPTION: main
03-25 17:12:13.166: E/AndroidRuntime(19449): java.lang.RuntimeException: Unable to start activity ComponentInfo{androidapps.viewpagerdemo/androidapps.viewpagerdemo.MainActivity}: android.view.InflateException: Binary XML file line #11: Error inflating class android.support.v4.app.ViewPager
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.os.Looper.loop(Looper.java:137)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.ActivityThread.main(ActivityThread.java:4745)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at java.lang.reflect.Method.invokeNative(Native Method)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at java.lang.reflect.Method.invoke(Method.java:511)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at dalvik.system.NativeStart.main(Native Method)
03-25 17:12:13.166: E/AndroidRuntime(19449): Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class android.support.v4.app.ViewPager
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.Activity.setContentView(Activity.java:1867)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at androidapps.viewpagerdemo.MainActivity.onCreate(MainActivity.java:14)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.Activity.performCreate(Activity.java:5008)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-25 17:12:13.166: E/AndroidRuntime(19449):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-25 17:12:13.166: E/AndroidRuntime(19449):    ... 11 more 
```

我在此链接中尝试了解决方案，但它对我不起作用。 [膨胀类 android.support.v4.view.ViewPager 时出错](https://stackoverflow.com/questions/10780413/error-inflating-class-android-support-v4-view-viewpager)

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".MainActivity" >

<android.support.v4.app.ViewPager 
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    />

</RelativeLayout> 
```

片段的布局文件仅包含一个`TextView`. 片段类如下：

```
public class MyFragment extends Fragment{
int mCurrentPage;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /** Getting the arguments to the Bundle object */
    Bundle data = getArguments();

    /** Getting integer data of the key current_page from the bundle */
    mCurrentPage = data.getInt("current_page", 0);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.frag_layout, container,false);
    TextView tv = (TextView ) v.findViewById(R.id.tv);
    tv.setText("You are viewing the page #" + mCurrentPage + "\n\n" + "Swipe Horizontally left / right");
    return v;
}
} 
```

FragmentPagerAdapter 类：

```
public class MyAdapter extends FragmentPagerAdapter{

final int PAGE_COUNT = 3;
public MyAdapter(FragmentManager fm) {
    super(fm);
    // TODO Auto-generated constructor stub
}

@Override
public Fragment getItem(int arg0) {
    // TODO Auto-generated method stub
    MyFragment myFragment = new MyFragment();
    Bundle data = new Bundle();
    data.putInt("current_page", arg0+1);
    myFragment.setArguments(data);
    return myFragment;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return PAGE_COUNT;
}
} 
```

主要活动：

```
public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ViewPager pager = (ViewPager) findViewById(R.id.pager);

    /** Instantiating FragmentPagerAdapter */
    MyAdapter pagerAdapter = new MyAdapter(getSupportFragmentManager());

    /** Setting the pagerAdapter to the pager object */
    pager.setAdapter(pagerAdapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:22:49.873

嗨，我刚刚对您的布局文件进行了一些更改，现在可以正常工作了..

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dp" >

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

你可以检查这个：

![在此处输入图像描述](../Images/c84cd874889ce20341f68d95e7b1be53.png)

以下代码仅供您参考---->

你的主要活动：

```
package com.example.viewpage;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.view.ViewPager;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ViewPager pager = (ViewPager) findViewById(R.id.pager);

        /** Instantiating FragmentPagerAdapter */
        MyAdapter pagerAdapter = new MyAdapter(getSupportFragmentManager());

        /** Setting the pagerAdapter to the pager object */
        pager.setAdapter(pagerAdapter);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

我的适配器：

```
package com.example.viewpage;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;

public class MyAdapter extends android.support.v4.app.FragmentPagerAdapter {

    final int PAGE_COUNT = 3;

    public MyAdapter(FragmentManager fm) {
        super(fm);
        // TODO Auto-generated constructor stub
    }

    @Override
    public Fragment getItem(int arg0) {
        // TODO Auto-generated method stub
        MyFragment myFragment = new MyFragment();
        Bundle data = new Bundle();
        data.putInt("current_page", arg0 + 1);
        myFragment.setArguments(data);
        return myFragment;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return PAGE_COUNT;
    }

} 
```

我的片段：

```
package com.example.viewpage;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MyFragment extends Fragment {

    private int mCurrentPage;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Getting the arguments to the Bundle object */
        Bundle data = getArguments();

        /** Getting integer data of the key current_page from the bundle */
        mCurrentPage = data.getInt("current_page", 0);

    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.frag_layout, container, false);
        TextView tv = (TextView) v.findViewById(R.id.textView1);
        tv.setText("You are viewing the page #" + mCurrentPage + "\n\n"
                + "Swipe Horizontally left / right");
        return v;
    }
} 
```

frag_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Large Text"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</LinearLayout> 
```

**注意：**`android-support-v4.jar`在 lib 文件夹中添加支持。将此罐子添加到`Build Path`. 现在去`project property-->Build Path--> Order & Export--> select all --> ok`。清洁并运行。

# python-2.7 - 鼻子没有使用 load_tests 发现单元测试

> ID：15614339
> 
> 赞同：1
> 
> 时间：2013-03-25T11:56:58.060
> 
> 标签：python-2.7, nose

Python 2.7.1 鼻子 1.1.2

我已经阅读了相关的问题，但它们没有帮助。我有如下所示的测试用例

例如在`my_tests.py`

```
def load_tests(loader, tests, pattern):
    return unittest.TestSuite(MyTest() for scenario_name in list) 
```

我有几个带有 load_tests 方法的模块，我使用 unittest 运行它们，如下所示

```
test_loader = unittest.defaultTestLoader.discover( '.', my_pattern_var); 
test_runner = unittest.TextTestRunner();
result = test_runner.run(test_loader)
sys.exit(not result.wasSuccessful()) 
```

如果我用等效的鼻子代码替换它，`nose.main()`它会找到 0 个测试。

问题

1.  如何让鼻子发现测试？***实际上并没有***失去使用 python unittest 运行我的测试的能力。我想使用 NOSE 作为 python unittest 的插件来获取三叶草和覆盖率报告
2.  如何让它运行仅匹配特定模式的测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T06:10:25.207

抱歉这么晚才回来。除了我们将所有测试模块命名为 integration_foo.py 之外，我们基本上做了与您在此处尝试为控制台脚本做的相同的事情。无论如何，解决方案很简单，只需以编程方式运行即可。

```
import re
from nose.config import Config

TEST_REGEX = '(?:^|[\\b_\\./-])[Ll]oad'

# Change the test match pattern
nose_config = Config()
nose_config.testMatch = re.compile(TEST_REGEX)

# Specify the use of a Plugin Manager, load plugins
nose_config.plugins = BuiltinPluginManager()
nose_config.plugins.loadPlugins()

run(config=nose_config) 
```

所以这个基本选项将鼻子正在寻找的正则表达式模式从所有标记为测试的方法更改为所有标记为负载的方法。然而，这并不是你完全运行鼻子所需要的，还需要获取某种解析器对象或将一组特定的 argv 传递给鼻子。

如果您想传递一组特定的 argv 以由鼻子解析，只需执行

```
run(config=nose_config, argv=["foo", "bar"]) 
```

否则，您可能可以在命令行中指定鼻子特定的参数，只要您不输入任何时髦的鼻子就不会出错。

[在https://github.com/nose-devs/nose/tree/master/nose](https://github.com/nose-devs/nose/tree/master/nose)查看鼻子源代码，我在其中获得了编写此代码所需的所有信息

# java - 在java swing中运行sql更新查询

> ID：15614347
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:57:22.647
> 
> 标签：java, sql, swing, derby

我有一个连接到 derby DB 的摇摆桌面应用程序。

我使用本机 sql 查询从表中选择所有数据现在我想使用本机 sql 查询更新表中的数据，但首先我必须从摇摆文本字段中检索输入数据。

我可以使用`jtextfielld.gettext()`

检索该数据，但我如何将这些文本字段数据设置为更新查询，因为 sql 查询作为字符串语句执行。

例如 ：

```
String sql = "UPDATE APP.REGISTRY SET LETTER_FROM ='Japan Motors' WHERE id = 7" 
```

那么如何从swing界面执行这个查询。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T11:58:57.683

你看过[PreparedStatements](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)吗？

> 尽管 PreparedStatement 对象可用于不带参数的 SQL 语句，但您可能最常将它们用于带参数的 SQL 语句。使用带参数的 SQL 语句的优点是您可以使用相同的语句并在每次执行时为其提供不同的值。

请参阅链接的文档并特别注意占位符功能（使用？s），它允许您在 SQL 中*安全地*插入参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:08:28.640

看来您是 JDBC 新手，正在寻找一种从 Swing App 执行查询的方法。如果是这种情况，我会建议您查看 JDBC 文档。

本质上，您需要获取对 Connection 对象的引用，然后使用该连接创建 PreparedStatement，然后您可以调用 executeUpdate() 方法，然后调用 commit() 方法。

但是，请理解您在 Swing 应用程序中获得连接的选择非常有限。您将需要查看 DriverManager 的用法，以了解获取数据库连接的方法。

# r - 总结数据框中的独特组合

> ID：15614350
> 
> 赞同：0
> 
> 时间：2013-03-25T11:57:38.043
> 
> 标签：r

在下面的示例数据集中，我需要找到每年汇总的每种产品的唯一客户数量。输出必须是带有标题的 data.frame：**年份 - 产品 - 客户数量**

谢谢你的帮助。

```
year <- c("2009", "2010")
product <- c("a", "b", "c")
df <- data.frame(customer = sample(letters, 50, replace = T),
                 product = sample(product, 50, replace = T),
                 year = sample(year, 50, replace = T)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:40:05.100

使用`aggregate()`（在随附的 R 统计数据包中）：

```
agdf<-aggregate(customer~product+year,df,function(x)length(unique(x)))
agdf
#  product year customer
#1       a 2009        7
#2       b 2009        8
#3       c 2009       10
#4       a 2010        7
#5       b 2010        7
#6       c 2010        6 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:09:57.273

使用`plyr`'s `summarise`：

```
require(plyr)
ddply(df, .(product, year), summarise, customers=length(unique(customer))) 
```

# sql - 数字格式 SQL 的 Oracle 时间戳

> ID：15614355
> 
> 赞同：0
> 
> 时间：2013-03-25T11:57:57.560
> 
> 标签：sql, oracle, datetime

例如，我将表中的 datetime 列定义为 Oracle NUMBER 数据类型，其中包含这种格式的数据 1363709957。

我想在查询中获取这些数字，这样我就可以执行我的插入脚本，该脚本将把当前时间放在那里。什么是 oracle SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:03:23.550

您的时间戳似乎是标准的 Unix 时间戳。您需要使用算术来转换[这里是 OTN 上关于这个的帖子](https://forums.oracle.com/forums/thread.jspa?threadID=2304187)，

[一个用于另一个方向](https://forums.oracle.com/forums/thread.jspa?threadID=338574)。

# c# - 使用 Windows 应用程序在 C# 中启用/禁用 Mdi 父窗体上的子菜单项？

> ID：15614358
> 
> 赞同：0
> 
> 时间：2013-03-25T11:58:16.677
> 
> 标签：c#, winforms, event-handling, toolstripmenu

在 Mdi 父表单上，我使用菜单项调用我的子表单。在子表单上加载我的菜单项应该在子表单关闭时禁用它会再次启用..，我尝试 FormClosing 事件处理程序我得到答案..，

```
 private void btnMn1_Click(object sender, EventArgs e)
    {
        Forms.Cnblfrm cnbfrm = new Cnsmblfrm();
        cnsmbfrm.MdiParent = this;
        cnsmbfrm.Text = btnMn1.Text;
        cnsmbfrm.Show();
        this.btnMn1.Enabled = false;
        cnbfrm.FormClosed += new FormClosedEventHandler(cnsmbfrm_FormClosed);
    }

    void cnbfrm_FormClosed(object sender, FormClosedEventArgs e)
    {
        btnMn1.Enabled = true;
        //throw new NotImplementedException();
    } 
```

通过使用上面的代码，我得到了答案，但我有 20 多个 ChildForms。通过使用这种方法我的编码正在增加......，有什么方法可以代替这个......，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:16:34.107

如果我理解正确：您有 20 个按钮，每个按钮都打开一个特定的表单，对吗？

如果是这样，您可以将每个按钮的标签属性设置为它打开的表单。然后你必须遍历所有按钮并设置点击事件。所有按钮都有相同的点击事件。（我们称之为 btn_click）

btn_click 的代码如下所示：

```
private void btn_click(object sender, EventArgs e)
{
   Button button = sender as Button;
   if(button == null)
      return;
   Form form = button.Tag as Form;
   if(form == null)
      return;
   form.MdiParent = this;
   form.Text = button.Text;
   form.Show();
   button.Enabled = false;
   form.Tag = button;
   form.FormClosed += FormClosed;
}

private void FormClosed(object sender, FormClosedEventArgs e)
{
   Form form = sender as Form;
   if(form == null)
      return;
   Button button = form.Tag as Button;
   if(button == null)
      return;
   button.Enabled = true;
} 
```

# objective-c - 个性化键不起作用 SUP Native iOS

> ID：15614361
> 
> 赞同：0
> 
> 时间：2013-03-25T11:58:30.907
> 
> 标签：objective-c, sup

这是我的代码，我想通过使用日期作为我的个性化键来获取帐户列表。

```
 AC_FLOWPersonalizationParameters *pp=[AC_FLOWAC_FLOWDB getPersonalizationParameters];
    NSDate *date=@"2013-03-09";
    pp.PO_DATE_PK=date;
    [pp save];
    [PO_FLOWPO_FLOWDB synchronize];

     SUPObjectList *obj=[AC_FLOWGetACByDate findAll]; 
```

但我正在获取所有帐户列表，而不是通过个性化关键日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T16:24:05.340

您应该使用同步参数来过滤数据。此同步参数应在 MBO 上定义（此处为 AC_FLOWGetACByDate），并应映射到 SUP SDK 中此 MBO 中的日期属性。

# php - 有没有办法强制 Yii 在每次请求时重新加载模块资源？

> ID：15614364
> 
> 赞同：12
> 
> 时间：2013-03-25T11:58:32.263
> 
> 标签：php, yii, refresh, reload, assets

我的网站分为不同的模块。`/protected/modules/my_module/assets/css`每个模块在 js 文件中或用于 js 文件中都有自己特定的 css 或 js`js`文件。当我第一次使用使用我的资产的页面时，Yiis 资产管理器会创建文件夹。不幸的是，如果我在我的文件中更改某事 - Yii 不会重新加载我的 css 或 js 文件。我必须手动删除`/projects/assets`文件夹。开发应用程序时真的很烦人。

有没有办法强制 Yii 每次请求都重新加载资产？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T15:09:29.413

`components/Controller.php`添加以下内容（或调整现有的）`beforeAction`：

```
protected function beforeAction($action){
    if(defined('YII_DEBUG') && YII_DEBUG){
        Yii::app()->assetManager->forceCopy = true;
    }
    return parent::beforeAction($action);
} 
```

这是做什么的，在开始任何操作之前，应用程序将检查您是否处于调试模式，如果是，则将资产管理器设置为在每次页面加载时强制重新复制所有资产。

见：[http ://www.yiiframework.com/doc/api/1.1/CAssetManager#forceCopy-detail](http://www.yiiframework.com/doc/api/1.1/CAssetManager#forceCopy-detail)

我没有对此进行测试，但根据文档，我相信它应该可以正常工作。

注意：此代码在`beforeAction`其中的放置只是放置位置的一个示例。您只需`forceCopy`在任何调用之前将该属性设置为 true `publish()`，并将其放入`beforeAction`应该可以实现该目标。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-18T10:57:11.360

如果您使用的是 Yii2，则可以通过配置获得更简单的解决方案。

将以下内容添加到您的`'config/web.php'`:

```
if (YII_ENV_DEV) {
    // configuration adjustments for 'dev' environment
    // ...
    $config['components']['assetManager']['forceCopy'] = true;
} 
```

这会强制[AssetManager](http://www.yiiframework.com/doc-2.0/yii-web-assetmanager.html)在每次运行时复制所有文件夹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T15:49:18.987

另一种解决方案是像这样发布您的模块资产：

```
Yii::app()->assetManager->publish($path, false, -1, YII_DEBUG); 
```

第四个参数强制复制您的资产，即使它们已经发布。有关详细信息，请参阅有关[publish()](http://www.yiiframework.com/doc/api/1.1/CAssetManager#publish-detail)的手册。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-13T08:44:31.807

在每个请求上重新发布资产可能会占用大量资源，并且对于开发来说是不必要的。

*   `linkAssets`对于开发来说，使用CClientScript的特性要容易得多。资产作为符号链接目录发布，并且永远不必重新生成。见： [http ://www.yiiframework.com/doc/api/1.1/CAssetManager#linkAssets-detail](http://www.yiiframework.com/doc/api/1.1/CAssetManager#linkAssets-detail)

*   对于暂存/生产，您应该清除更新例程/脚本的 assets/ 文件夹部分。

如果由于某种原因您无法在开发机器上使用符号链接（不太可能），请仅退回到其他解决方案之一。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-04T13:14:45.483

在配置中的 YII 1 中，我们有：

```
'components'=> [
...
 'assetManager' => array(
            'forceCopy' => YII_DEBUG,
...
)
...

] 
```

# wcf - 在 IDispatchMessageInspector 中访问用户名

> ID：15614376
> 
> 赞同：0
> 
> 时间：2013-03-25T11:59:09.807
> 
> 标签：wcf, logging, wif

我已经使用 IDispatchMessageInspector 为 WCF 服务实现了自定义日志记录逻辑。

我通过使用 AfterReceiveRequest 和 BeforeSendReply 在数据库中记录整个 SOAP 请求/响应。

我正在使用基于声明的身份验证，它可以正常工作。

但是，当我尝试访问 Thread.CurrentPrincipal.Identity.Name 或 ClaimsPrincipal.Current.Identity.Name 时，总是得到空字符串（未设置身份，因此名称为空）。

有没有办法从 IDispatchMessageInspector 以任何方式访问身份？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:12:04.150

如果您的基于声明的身份验证有效，您可以将用户添加到您的声明集中。您可以以静态方式访问您的 ClaimSet：

```
ReadOnlyCollection<ClaimSet> claimSets = ServiceSecurityContext.Current.AuthorizationContext;` 
```

另一种可能性是将 a 添加`ServiceAuthorizationManager`到您的服务中，在您的配置中注册它并从此类访问您的 ClaimSet。

希望这可以帮助

# arrays - actionscript 从数组中减去特定项目

> ID：15614378
> 
> 赞同：0
> 
> 时间：2013-03-25T11:59:16.513
> 
> 标签：arrays, actionscript-3, subtraction

如何从包含数百个项目的数组中删除特定项目？

-例如：

```
var myArray:Array = ["dog", "cat", "bear", "duck", "frog", etc..., etc...]; 
```

当我想从这个数组中删除“鸭子”时，我该怎么办？请记住，数组很长，我们不知道“鸭子”在哪里，所以我们不知道它是数组中的索引。我需要以某种方式通过它的名称获取该项目并将其从数组中删除。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:05:23.743

```
myArray.splice(myArray.indexOf("duck"), 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:25:14.337

这是一种直接的方法：

不稳定的版本（复制较少）。

```
for (var i:int, j:int = array.length - 1, temp:Object; i <= j;) {
    temp = array[i];
    if (temp == "duck") {
        array[i] = array[j];
        array[j] = temp;
        j--;
    } else {
        i++;
    }
}
array.length = i; 
```

而稳定版（多复制，但原数组顺序不变）：

```
for (var i:int, j:int, temp:Object; i < array.length; i++) {
    temp = array[i];
    if (temp != "duck") {
        array[j] = temp;
        j++;
    }
}
array.length = j; 
```

但是，如果您可以确保值是唯一的，那么算法会有所不同，因为您不必在找到的项目之后验证项目。

如果对数组进行了排序，则算法将大不相同，因为您可以使用二进制搜索来查找要删除的元素。在一些非常特殊的情况下，例如，如果您有一个有根据的集合（即您的数组），则删除会更加简单，因为您正在搜索的项目的位置可以在恒定时间内确定。后者可以通过使用索引来缓解（简单地说，你可以有一个哈希表，它使用数组的元素作为它的键和它们在数组中的偏移量作为值）。

同样，您需要考虑所有这些情况以及您的程序的实际情况。

正如我上面提到的，如果您使用不同的数据结构，或者如果您在插入时排序，或者如果您在插入时建立索引，则可能会有好处。

最后，生成删除了不需要的项目的副本不同于从同一数组中破坏性地删除项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:30:39.817

如果您的数组很长，那么值得以某种方式对其进行优化。

一些选项：

1）使用字典；字符串可以是键。这具有在添加/删除元素时不重新索引列表的额外好处。

```
//specify weak keys when you create the dictionary
var myDictionary:Dictionary = new Dictionary(true);
//when you want to delete an item:
myDictionary["duck"] = null; 
```

2）对数组进行排序并使用二进制搜索。网上有很多关于二分搜索的信息。[这是关于该主题的一个 SO 问题。](https://stackoverflow.com/questions/249392/binary-search-in-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-26T00:51:05.890

一种方法是将while循环与数组的indexOf方法结合使用：

```
var index:int;
while ((index = myArray.indexOf("duck")) >= 0)
{
    myArray.splice(index,1);
} 
```

您可以将其包装在一个函数中并接受 Array 和 String 参数，然后返回结果数组，如下所示：

```
function removeSearchString(sourceArray:Array, searchString:String):Array
{
     var index:int;
     while ((index = sourceArray.indexOf(search)) >= 0)
     {
          sourceArray.splice(index,1);
     }
     return sourceArray;
} 
```

然后你会使用这样的功能：

```
myArray = removeSearchString(myArray, "duck"); 
```

# haskell - 我怎样才能弄清楚 p0 是什么？

> ID：15614379
> 
> 赞同：4
> 
> 时间：2013-03-25T11:59:17.503
> 
> 标签：haskell

我试图理解引用类型变量的编译器错误消息`p0`。在大多数情况下，错误消息会告诉我编译器正在调用什么`p0`，类似于“p0 是受...约束的刚性类型变量”，但在这种情况下不会。

一般来说，如果编译器错误消息是指它已分配的类型变量（而不是我在类型签名中引用的类型变量），并且它没有告诉我类型变量绑定的位置，我该如何计算它出去？

```
{-# LANGUAGE TypeFamilies, FlexibleContexts, MultiParamTypeClasses #-}
import Data.List (minimumBy)
import Data.Ord (comparing)
import qualified Math.Geometry.Grid as G (Grid(..))
import qualified Math.Geometry.GridMap as GM (GridMap(..))
import Prelude hiding (lookup)

class Pattern p where
  type Metric p
  difference ∷ p → p → Metric p
  makeSimilar ∷ p → Metric p → p → p

data SOM gm k p = SOM
  {
    sGridMap :: gm p,
    sLearningFunction :: Int -> Int -> Metric p,
    sCounter :: Int
  }

foo 
  :: (Pattern p, Ord v, v ~ Metric p, GM.GridMap gm p, GM.GridMap gm v, 
      k ~ G.Index (GM.BaseGrid gm p), k ~ G.Index (GM.BaseGrid gm v)) => 
    SOM gm k p -> p -> [(k, v)]
foo s p = GM.toList . GM.map (p `difference`) . sGridMap $ s

bar :: (Pattern p, Ord v, v ~ Metric p) => [(k, v)] -> k
bar ds = fst . minimumBy (comparing snd) $ ds

wombat
  :: (Pattern p, Ord v, v ~ Metric p, GM.GridMap gm p, GM.GridMap gm v,
      k ~ G.Index (GM.BaseGrid gm p), k ~ G.Index (GM.BaseGrid gm v)) => 
    SOM gm k p -> p -> (k, [(k, v)])
wombat s p = (bar diffs, diffs)
  where diffs = foo s p 
```

这是错误：

```
λ> :l ../amy.hs
[1 of 1] Compiling Main             ( ../amy.hs, interpreted )

../amy.hs:33:19:
    Could not deduce (v ~ Metric p0)
    from the context (Pattern p,
                      Ord v,
                      v ~ Metric p,
                      GM.GridMap gm p,
                      GM.GridMap gm v,
                      k ~ G.Index (GM.BaseGrid gm p),
                      k ~ G.Index (GM.BaseGrid gm v))
      bound by the type signature for
                 wombat :: (Pattern p, Ord v, v ~ Metric p, GM.GridMap gm p,
                            GM.GridMap gm v, k ~ G.Index (GM.BaseGrid gm p),
                            k ~ G.Index (GM.BaseGrid gm v)) =>
                           SOM gm k p -> p -> (k, [(k, v)])
      at ../amy.hs:(30,10)-(32,40)
      `v' is a rigid type variable bound by
          the type signature for
            wombat :: (Pattern p, Ord v, v ~ Metric p, GM.GridMap gm p,
                       GM.GridMap gm v, k ~ G.Index (GM.BaseGrid gm p),
                       k ~ G.Index (GM.BaseGrid gm v)) =>
                      SOM gm k p -> p -> (k, [(k, v)])
          at ../amy.hs:30:10
    In the expression: bar diffs
    In the expression: (bar diffs, diffs)
    In an equation for `wombat':
        wombat s p
          = (bar diffs, diffs)
          where
              diffs = foo s p
Failed, modules loaded: none. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:32:42.563

这有点猜测，但这里有：

`p0`从`p`in`bar`的类型签名重命名。

```
bar :: (Pattern p, Ord v, v ~ Metric p) => [(k, v)] -> k 
```

这里`p`只出现在`=>`. 只有`k`和`v`可以从调用站点中推断出来。可能有许多类型`p`在给定时给出相同的结果`Metric`，并且编译器不能假设`p`in与in`bar`相同，即使在两种情况下都是相同的。`p``wombat``Metric p`

在这种情况下，我会将类型签名更改为

```
bar :: Ord v => [(k, v)] -> k 
```

as`bar`不使用任何其他约束。

如果在您的真实代码`bar` *中确实*使用了其他约束，我会[添加一个代理参数](https://stackoverflow.com/questions/13240621/is-it-impossible-to-compute-the-difference-between-the-maxbound-and-minbound-of/13240651#13240651)`p`（如果我有一个适当类型的值，那么它可能是类型，就像`wombat`这样，or of `a -> p`or`p -> a`等​​）来帮助类型检查器。

# jquery - jquery插件内部工作原理

> ID：15614387
> 
> 赞同：0
> 
> 时间：2013-03-25T11:59:42.537
> 
> 标签：jquery, function, plugins, methods

如果我定义了`jQuery.fn.my_method = function(){...}`，`jQuery.my_method`为什么即使我放在属性下而不是直接`my_method`下，它也不是未定义的？`.fn``jQuery`

我只是好奇。

```
 <script>
     jQuery.fn.my_method = function(){...};
     jQuery.my_method();//valid call even though i put my_method under .fn
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:01:49.910

`jQuery.fn`是 的别名`jQuery.prototype`，就像`$`是 的别名一样`jQuery`。您所描述的是完全正常的，您正在向原型添加一个方法，然后该方法在对象上可用。

我建议阅读[JavaScript 原型](https://stackoverflow.com/q/572897/1156119)。

# jquery - 如何使用 javascript/jquery 将 id 设置为 div 标签

> ID：15614389
> 
> 赞同：-1
> 
> 时间：2013-03-25T11:59:44.543
> 
> 标签：jquery, jsp

我想`div`使用 JavaScript / jQuery 将 ID 设置为标签。

在我的项目中，照片数量在那里。每张照片都有一些文本，这些文本将使用`div`基于 x 和 y 坐标的标签显示在图像上。

这是我的代码。有没有错误？

```
<script >

  var i=0;
  var st1=new Array();
  var st2=new Array();
  var st3=new Array();           
  var i=0;
  $(document).ready(function() {
    $("#dimg1").hover(function() {
      for(var i = 0; i < 3; i++) {

        var X = st1[i];      
        var Y = st2[i];
        var txt = st3[i];
        var test = $("<span class='test'></span>");
        test.html(txt);
        $(this).append(test.offset({left:X,top:Y}));
      }
    }, function() {
      $('.test').remove();
    });
  });
</script>

<br><br><br>
<%

  response.getWriter().write("<div id='dimg1' class='dimg1' position: 'relative'  left:'300px'  top:'50px'  z-index: '10;'>");

%>![out put][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:06:14.733

您可以使用 jQuery 编辑 HTML 元素的 ID，如下所示：

```
$('#id1').attr('id', 'id2'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:04:07.130

我认为您可以使用以下内容

```
document.getElementById('dimg1').setAttribute('x', 'value') 
```

这样你就可以在 div 上设置你想要的任何属性

# selenium - SELENIUM IDE 命令的完整列表

> ID：15614391
> 
> 赞同：3
> 
> 时间：2013-03-25T11:59:49.387
> 
> 标签：selenium, ide

我是 selenium 的新手，在第一阶段我正在努力掌握 IDE 命令，但我面临的主要问题是我无法搜索一个单一的帮助材料，如果有人知道，请清楚地告诉我以下几点，请参考我

1.  完整的命令列表
2.  参考场景的命令（例如当我们使用 asserttext 或验证文本时）
3.  Target 和 value 的值是多少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-29T16:12:53.560

[http://release.seleniumhq.org/selenium-core/1.0.1/reference.html](http://release.seleniumhq.org/selenium-core/1.0.1/reference.html)

这是包含的完整参考

1.  支持所有命令。
2.  对方法的描述，包括对 和 的区别的`assert`解释`verify`。
3.  `target`通常是元素的定位器。通常是方法的`value`参数 - 例如，当您在字段中输入时，`value`将是您要输入的文本。更多在每个命令的参考中 - 并非所有命令都采用目标和值，有些值受到限制等。请参阅您的特定命令以了解它需要哪些参数。

无论如何，对 IDE 最有用的文档仍然[是官方文档](http://docs.seleniumhq.org/docs/02_selenium_ide.jsp)，即使他们并没有真正列出所有命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:28:38.987

1) 如果您将 Selenium ide 用于 firefox，则通过单击命令部分中的向下箭头可以看到完整的命令列表。

[未能在 selenium 文档http://docs.seleniumhq.org/docs/index.jsp](http://docs.seleniumhq.org/docs/index.jsp)中提供大量有用信息

2）这个我帮不上忙，因为我通常在任何地方都使用断言。如果我希望我的脚本在java中不存在文本的特定点失败，我使用类似的东西

```
assertTrue(driver.getPageSource.contains("Text to verify"); 
```

3) Target 是元素，value 是该元素的当前值。示例 - 断言文本存在

```
Command - assertTextPresent
Target  - Blank
Value   - Text to search for 
```

示例 2 - 字段包含某些文本

```
command - assertTextPresent
Target  - id=idOfField  (id, xpath, css, name etc)
Value   - Text to search for 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-20T04:11:34.713

[http://software-testing-tutorials-automation.blogspot.in/search/label/selenium%20ide](http://software-testing-tutorials-automation.blogspot.in/search/label/selenium%20ide)

这个网站有很多 IDE 示例和教程。如果您是初学者，那么我认为这个网站是最好的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-09T09:16:58.427

我认为这是 selenium IDE 命令中最完整、最易读的列表：

> [http://www.frontendtest.org/blog/selenium-ide-commands/](http://www.frontendtest.org/blog/selenium-ide-commands/)

# java - 如何使用 jTDS 为 Sybase JDBC 连接指定字符集？

> ID：15614394
> 
> 赞同：0
> 
> 时间：2013-03-25T11:59:55.317
> 
> 标签：java, jdbc, character-encoding, sybase, jtds

我正在使用 jTDS 连接到 Sybase 数据库，并且非 ASCII 字符数据被破坏。这发生在我自己的应用程序和 SQuirreLSQL 中。

在哪里可以指定用于连接的字符集？我能找出那个字符集应该在数据字典的某个地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:01:35.870

您可以设置字符集属性

> charset（默认 - 安装服务器的字符集）非常重要的设置，确定 CHAR/VARCHAR/TEXT 值的字节值到字符映射。适用于扩展集中的字符（代码 128-255）。对于 NCHAR/NVARCHAR/NTEXT 值没有任何影响，因为它们是使用 Unicode 存储的。

只需附加`;<property>=<value>`到您的 JDBC URL。

查看[常见问题解答](http://jtds.sourceforge.net/faq.html)

# ruby - 检查数组是否在增加

> ID：15614396
> 
> 赞同：5
> 
> 时间：2013-03-25T12:00:02.910
> 
> 标签：ruby

我只是想知道是否有办法检查数组是否在增加？

这是我的解决方案，但我正在寻找更漂亮的方式：

```
n = - 1

@arr.flatten.each { |e| 
    return false if e < n
    n = e
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:13:08.873

您可以执行以下操作：

```
> arr = [1, 4, 5, 6]
> arr.each_cons(2).all? { |a, b| (a <=> b) <= 0 }
 => true 
```

您可以将其添加到 Array 类

```
class Array
  def is_sorted?
    each_cons(2).all? { |a, b| (a <=> b) <= 0 }
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:06:23.337

尝试这个，

```
if @arr.sort.uniq == @arr
  # array is increasing
else 
  # array not increasing
end 
```

这将对数组进行排序并删除重复值，然后将其与原始数组进行比较。

如果您的原始数组总是在增加，它应该匹配已排序、去重的数组。

**编辑：**

虽然此解决方案提供了所需的结果，但这不是最佳解决方案（请参阅下面的评论）。我建议改用 toch 的解决方案。

# php - CodeIgniter 应用程序库与系统库

> ID：15614401
> 
> 赞同：1
> 
> 时间：2013-03-25T12:00:15.970
> 
> 标签：php, mysql, codeigniter-2

我是 CI 新蜜蜂。刚刚浏览了框架并意识到应用程序和系统文件夹都有名为库的文件夹，其中包含一些类。我弄清楚它们的用途是什么，我不明白为什么有两个不同的文件夹，因为它们都是库？

他们有什么我不知道的主要区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:07:18.300

系统文件夹中的库文件夹包含内置库。应用程序文件夹中的库文件夹是您可以放置​​自己的库的地方。控制器默认在系统文件夹的库文件夹中查找库，如果没有找到，控制器将在应用程序文件夹的库文件夹中查找。

[http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# java - 一次在多个模拟器上发送短信

> ID：15614405
> 
> 赞同：0
> 
> 时间：2013-03-25T12:00:40.043
> 
> 标签：java, android

1.  我正在开发一个 Android 应用程序，我需要发送一条消息以一次接收多个模拟器。但问题是只有一个模拟器正在接收消息。这是我的代码。

    公共类 SMS 扩展 Activity {

    ```
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);

        btnSendSMS = (Button) findViewById(R.id.btn_SendSms);

        txtPhoneNo = (EditText) findViewById(R.id.edittext_PhoneNumber);

        txtMessage = (EditText) findViewById(R.id.edittext_MessageBody);

        btnSendSMS.setOnClickListener(new View.OnClickListener() 

        {
            public void onClick(View v) 

            {                
                String message = txtMessage.getText().toString();

                String phoneNo = txtPhoneNo.getText().toString();

                StringTokenizer st=new StringTokenizer(phoneNo,",");

                while (st.hasMoreElements())

                {
                    String tempMobileNumber = (String)st.nextElement();

                    if(tempMobileNumber.length()>0 && message.trim().length()>0)

                    {
                        sendSMS(tempMobileNumber, message);
                    }

                    else 

                    {
                        Toast.makeText(getBaseContext(), 

                                "Please enter both phone number and message.", 

                                Toast.LENGTH_SHORT).show();
                    }
                }

            }
        });  

    }

    private void sendSMS(String phoneNumber, String message)

    {
        String SENT = "SMS_SENT";

        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0, new Intent(DELIVERED), 0);

      //---when the SMS has been sent---
        registerReceiver(new BroadcastReceiver()

        {
            @Override
            public void onReceive(Context arg0, Intent arg1) 

            {
                switch (getResultCode())

                {

                    case Activity.RESULT_OK:

                        Toast.makeText(getBaseContext(), "SMS sent", 

                                Toast.LENGTH_SHORT).show();
                        break;

                    case SmsManager.RESULT_ERROR_GENERIC_FAILURE:

                        Toast.makeText(getBaseContext(), "Generic failure",

                                Toast.LENGTH_SHORT).show();

                        break;

                    case SmsManager.RESULT_ERROR_NO_SERVICE:

                        Toast.makeText(getBaseContext(), "No service", 

                                Toast.LENGTH_SHORT).show();
                        break;

                    case SmsManager.RESULT_ERROR_NULL_PDU:

                        Toast.makeText(getBaseContext(), "Null PDU", 

                                Toast.LENGTH_SHORT).show();
                        break;

                    case SmsManager.RESULT_ERROR_RADIO_OFF:

                        Toast.makeText(getBaseContext(), "Radio off", 

                                Toast.LENGTH_SHORT).show();
                        break;
                }
            }
        } , new IntentFilter(SENT));

        SmsManager sms = SmsManager.getDefault();

        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);       
    }

    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:09:06.853

要将 SMS 消息发送到在同一台机器上运行的另一个模拟器实例，请启动 SMS 应用程序。将目标模拟器实例的控制台端口号（例如：5555）指定为 SMS 地址。

请注意，此答案基于：[Linuxtopia](http://www.linuxtopia.org/online_books/android/devguide/guide/developing/tools/android_emulator_calling.html)指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:34:10.363

您可以创建模拟器 id 或编号的数组，然后将**sendTextMessage**放入执行循环的数组中。或者您可以拥有允许用户将电话号码或模拟器号码插入列表的用户界面，过程与上述相同！！！请注意，**sendTextMessage**的第**一个**参数是您要向其发送短信的**“电话号码”**，只需将其替换为您的要求，每次循环迭代

# intellij-idea - 在 IntelliJ 中运行 Java 8 TestNG 的问题

> ID：15614406
> 
> 赞同：22
> 
> 时间：2013-03-25T12:00:40.027
> 
> 标签：intellij-idea, java-8

我正在使用 OpenJDK 1.8 编写一个 Maven 应用程序并使用 TestNG 运行测试。

当我从命令行运行 Maven 时，一切正常，但是当我尝试在 IntelliJ 中运行测试时，make 过程显示以下错误：

```
java: javacTask: source release 8 requires target release 1.8 
```

我有指向 1.8 JDK 和项目语言级别 8 的项目设置。

在 Maven 中，我有以下块（我猜它还没有被调用，因为它似乎是导致问题的原因）

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.3.2</version>
    <configuration>
      <source>1.8</source>
      <target>1.8</target>
    </configuration>
  </plugin> 
```

我什至将 Maven Runner JRE 配置为指向 1.8 JDK。

我似乎无法让 IntelliJ 12.0.4 正确运行测试

我错过了什么吗？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-25T20:35:28.720

在[CrazyCoder](https://stackoverflow.com/users/104891/crazycoder)的提示之后，事实证明 .idea/compiler.xml 中有以下部分

```
<bytecodeTargetLevel> 
    <module name="game" target="1.7" /> 
</bytecodeTargetLevel> 
```

我将其更改为：

```
<bytecodeTargetLevel> 
    <module name="game" target="1.8" /> 
</bytecodeTargetLevel> 
```

它奏效了

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-10-07T17:02:48.813

还有另一种方法。转到文件-> 其他设置-> 在搜索栏中键入“javac”-> 将 JDK 默认更改为“1.8”或您的目标版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-22T15:27:33.993

Xetius 的回答在 IntelliJ 14.1.2 中对我不起作用

最后我找到了这个部分`.idea/misc.xml`

```
<component name="ProjectRootManager" version="2" languageLevel="JDK_1_6" assert-keyword="true" jdk-15="true" project-jdk-name="1.7" project-jdk-type="JavaSDK">
   <output url="file://$PROJECT_DIR$/out" />
</component> 
```

我最终得到：

```
<component name="ProjectRootManager" version="2" languageLevel="JDK_1_8" default="false" assert-keyword="true" jdk-15="true" project-jdk-name="1.8" project-jdk-type="JavaSDK">
    <output url="file://$PROJECT_DIR$/out" />
</component> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-10T02:41:18.473

对我来说，我需要去文件 > 项目结构 > 模块。我的一半模块将其“模块 SDK”字段设置为错误的内容（而不是应有的 Project Default）。

# svn - 删除版本 X 添加的所有文件

> ID：15614408
> 
> 赞同：1
> 
> 时间：2013-03-25T12:00:44.710
> 
> 标签：svn

假设我们的 SVN 分支中的 Head 版本是 10。
修订版 7 包含 100 个新文件，这些文件被添加到分支的不同位置。
现在我想删除 rev 7 引入的所有文件。
我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:13:37.663

这是一个常见的场景，很常见以至于[在 Subversion 手册中有解释](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)

基本上，您将执行合并，以反转修订版 7 中所做的更改`svn merge -r7:6 <URL>`。. 查看结果，然后提交。

# jquery - JQuery - 否则不运行功能

> ID：15614409
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:00:47.773
> 
> 标签：jquery

如果 IF 语句为假，我正在尝试运行一个函数。

我的代码是...

```
 $('#finartwork').mousedown(function(){
      if (uploadqty = 1) { 
          if ($.trim($('.artwork1').val()).length == 0) {
             alert('Please select your artwork')
          }
      } else { 
          processcartitem(); 
      } 
 });

    function processcartitem() {
         $('#artworkcontainer').slideUp(500,function() {
                $('#addontable').css('background-color','<?php echo $col ?>');
                $('#addontable').css('color','#fff');
                $('#artworktable').css('background-color','#e1e2e4');
                $('#artworktable').css('color','#333');
                $('#addoncontainer').slideDown(500);
        }); 
        $("#productvariation").click();
    } 
```

任何帮助将不胜感激。

非常感谢刘易斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:03:10.663

```
if (uploadqty = 1) 
```

总是评估为真。

如果要检查 'uploadqty' 的值，请使用 == 或 ===

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:05:38.737

我认为问题在于等号应该是==

# javascript - 在 HTML 源代码中查找一个值，并将 var 的值替换为另一个

> ID：15614413
> 
> 赞同：-3
> 
> 时间：2013-03-25T12:01:05.593
> 
> 标签：javascript, jquery

说这是网页上的代码：

```
<script type="text/javascript"><!--
SOMEVAR = "SOMEVAL";
SOMEVAR2 = "SOMEVAL2";
SOMEVAR3 = VAL;
SOMEVAR4 = VAL;
//-->
</script>
<script type="text/javascript"
src="http://somesource.src/">
</script> 
```

JQuery 中有没有办法用我自己指定的值替换 SOMEVAR 的值？

这些变量位于 HTML 的注释部分中，所以我需要知道如何找到 SOMEVAR，然后替换它的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:03:31.737

如果您的示例是您正在努力使用的代码，请执行

```
window.SOMEVAR = 'newValue'; 
```

你不需要 jQuery。

您也可以省略`window`对象名称，但我个人使用它来使事情更清晰。

# java - 如何删除eclipse中的默认checkstyle？

> ID：15614419
> 
> 赞同：5
> 
> 时间：2013-03-25T12:01:18.347
> 
> 标签：java, eclipse, checkstyle

我有一个自定义 checkstyle.xml 导入并设置为默认值。它工作得很好。我刚刚升级到最新版本的 checkstyle，现在我对几乎每一行代码都有警告。看起来警告来自 checkstyle xml 中的两个构建，但它们不可删除！

如何禁用这两个 checkstyle 规则文件，以免它们打扰我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T21:19:46.117

内置配置不可移除，也无法更改或编辑。相反，人们应该创建自己的配置，这正是您所做的。

您可以尝试以下几件事：

*   确保正确执行了 Checkstyle Eclipse 插件的升级。停止 Eclipse。检查名为*edu.umd.cs.findbugs.plugin.eclipse_* version的包含文件夹的*插件*和*功能文件夹。**plugins*中应该只有一个这样的文件夹，features*中*应该只有一个，两者都具有相同的版本号。如果有更多，请删除具有旧版本号的那些。使用选项作为第一个参数重新启动 Eclipse 。***`-clean`***

****   确保您的自定义 Checkstyle 配置在插件升级后仍然是默认配置。

    *   检查工作区中的 Eclipse 项目并确保它们没有针对 Checkstyle 的项目特定设置。右键单击项目，选择属性，然后选择 Checkstyle。确保所选配置正确。

    *   配置名称区分大小写。`.checkstyle`如果有人在位于每个项目的根目录中的文件中出现大小写错误，这可能是一个问题。或者配置名称在导入时输入错误。最后一点应该会导致不同的错误（例如*configuration not found*）。*** 

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:35:44.037

看起来 Checkstyle 锁定在 2 个默认规则集中。我想到了两个选项：1）编辑默认规则以禁用冲突规则（或所有规则）。或者 2）从 plugins/checkstyle 中删除文件系统中的两个 xml 文件（无论实际的目录名称是什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T19:25:45.097

将以下内容放入您希望禁用 check-style 的项目中，编辑您的 pom.xml 将 check-style skip 更改为 true ：

```
<properties>

    <!-- Checkstyle -->

    <checkstyle.skip>true</checkstyle.skip>

</properties> 
```

您还应该像这样配置它：

```
 <plugin>
            <artifactId>maven-checkstyle-plugin</artifactId>
            <version>2.17</version>
            <executions>
                <execution>
                    <id>validate</id>
                    <phase>verify</phase>
                    <goals>
                        <goal>check</goal>
                    </goals>
                    <configuration>
                        <configLocation>checkstyle.xml</configLocation>
                        <encoding>UTF-8</encoding>
                        <consoleOutput>true</consoleOutput>
                        <outputFileFormat>xml</outputFileFormat>
                        <failsOnError>false</failsOnError>
                        <failOnViolation>true</failOnViolation>
                        <skip>true</skip>
                    </configuration>
                </execution>
            </executions>
            <configuration>
                <skip>true</skip>
            </configuration>
        </plugin> 
```

Checkstyle 仍将运行，但将执行无操作...***

# clojure - 从 Clojure 中的向量中查找“中间元素”

> ID：15614420
> 
> 赞同：4
> 
> 时间：2013-03-25T12:01:22.923
> 
> 标签：clojure

Clojure中的简单新手问题......

如果 Clojure 向量中有奇数个元素，如何提取“中间”值？我已经看了一段时间了，不知道该怎么做！

一些例子：

*   `(middle-value [0])`应该返回`[0]`
*   `(middle-value [0 1 2])`应该返回`[1]`
*   `(middle-value [0 1 :abc 3 4])`应该返回`[:abc]`
*   `(middle-value [0 1 2 "test" 4 5 6])`应该返回`["test"]`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:10:39.513

如何计算中间索引并通过它访问？

```
(defn middle-value [vect]
  (when-not (empty? vect)
    (vect (quot (count vect) 2)))) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T14:53:59.640

一个有点低效但有趣的实现（使用序列抽象而不是具体向量）：

```
(defn middle [[fst & rst]]
  (if-not rst fst
    (recur (butlast rst)))) 
```

在元素数量偶数的情况下返回`nil`。

不那么有趣但更高效：

```
(nth v (quot (count v) 2)) 
```

`v`向量在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:09:38.967

获取向量中的项目数，将其减半，将结果取底并获取该索引处的项目。假设一个向量`v`：

```
(get v (floor (/ (count v) 2))) 
```

不幸`floor`的是不在 中`clojure.core`，您需要为此拉入另一个库或直接转到`java.lang.Math.floor`.

当然，这段代码对偶数向量没有任何作用，但我假设你已经可以处理这些了。

# iphone - 如何在ios中连续调用Web服务

> ID：15614422
> 
> 赞同：2
> 
> 时间：2013-03-25T12:01:24.703
> 
> 标签：iphone, ios, web-services

我有一个 ios 应用程序。

在其中我有多个用户帐户。所以多个用户可以登录。

当一个用户看到其他用户个人资料并且该用户也在线时，我想通知他。

我不知道如何实现它。

如果有人检查了他们的个人资料，我必须不断检查服务器上的某些标志值，或者我该如何处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:08:45.483

[远程通知](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html)就是这样做的方法。可以在服务器上处理关于何时以及必须通知谁的逻辑。

您可能已经看到很多应用程序要求获得发送通知的权限。缺点是如果用户拒绝该权限。

[从客户端轮询](https://stackoverflow.com/questions/6300756/long-polling-in-objective-c)也可以是可以使用的方法之一，但需要客户端进行大部分计算。

总而言之，考虑到您正在构建的内容，您必须接听电话。

# asp.net-mvc - 从 mvc3 发送短信时，换行符丢失

> ID：15614438
> 
> 赞同：1
> 
> 时间：2013-03-25T12:01:57.247
> 
> 标签：asp.net-mvc, sms, line-breaks

由于某些原因，从 MVC 发送 SMS 时换行，无法正常工作。

我正在使用类似的代码，

**常量.cs**

```
 public struct SmsBody
    {
     public const string SMSPostResume=
"[ORG_NAME]"+
"[CONTACT_NUMBER]"+
"[ORG_NAME]"+
"[CONTACT_PERSON]"+
"[EMAIL]"+
"[MOBILE_NUMBER]";
  } 
```

然后我在控制器中调用这些变量，例如，

```
SmsHelper.Sendsms(
            Constants.SmsSender.UserId,
            Constants.SmsSender.Password,
            Constants.SmsBody.SMSPostResume
            .Replace("[NAME],",candidate.Name)
            .Replace("[EMAIL],",candidate.Email) etc...... 
```

我的问题是当我收到短信时，这些都是同一行。没有间距。

**我的输出**

Dearxxxxyyy@gmail.com0000000000[QUALIFICATION][FUNCTION][DESIGNATION][PRESENT_SALARY][LOCATION][DOB][TOTAL_EXPERIENCE][GENDER] 这样。

如何在这些之间留出空间？有谁知道帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:11:08.877

```
public const string SMSPostResume=
"[ORG_NAME]"+
"\r[CONTACT_NUMBER]"+
"\r[ORG_NAME]"+
"\r[CONTACT_PERSON]"+
"\r[EMAIL]"+
"\r[MOBILE_NUMBER]"; 
```

此外，在

```
Replace("[NAME],",candidate.Name) 
```

您确定要在 [NAME] 之后使用逗号吗？如果它不在字符串中，请不要尝试替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:07:10.353

将字符串部分放在不同的行上，并将它们连接起来不是换行符......这些部分将一个接一个地结束。您应该尝试`\n`在每个需要换行符的地方放置一个（换行符转义序列）：

```
public const string SMSPostResume=
    "[ORG_NAME]\n"+
    "[CONTACT_NUMBER]\n"+
    "[ORG_NAME]\n"+
    "[CONTACT_PERSON]\n"+
    "[EMAIL]\n"+
    "[MOBILE_NUMBER]\n"; 
```

还有一个基于@ **finman**评论的注释：

> 根据服务，它可能是**\r\n**而不是**\n**

所以你应该在他的 API 文档中查找哪一个可以工作。

还有另一个错误：您尝试将字符串常量与`,`结尾匹配，而原始常量则没有...

```
SmsHelper.Sendsms(
        Constants.SmsSender.UserId,
        Constants.SmsSender.Password,
        Constants.SmsBody.SMSPostResume
        .Replace("[NAME],",candidate.Name) // <- this line!
        .Replace("[EMAIL],",candidate.Email) // <- this line! 
```

您应该重写要包含的格式字符串，或者重写以排除`,`：

```
SmsHelper.Sendsms(
        Constants.SmsSender.UserId,
        Constants.SmsSender.Password,
        Constants.SmsBody.SMSPostResume
        .Replace("[NAME]",candidate.Name) // <- no "," this time
        .Replace("[EMAIL]",candidate.Email) // <- no "," this time
        //...etc 
```

# c#-4.0 - 在 C# 中创建类似应用程序的 pdf 编辑器

> ID：15614439
> 
> 赞同：-4
> 
> 时间：2013-03-25T12:02:00.427
> 
> 标签：c#-4.0, pdf-generation, itextsharp

我想创建一个桌面应用程序，其功能如下： 1\. 用户以 2\. 的形式打开一个 pdf 文件，然后在 UI 上打开它。之后，用户使用鼠标执行某些编辑，例如绘制一个矩形，穿过某个区域（类似于绘画） 3\. 然后，在完成所有编辑后，他将该文件保存到另一个 pdf 中（编辑过的）

我在 C# 中做。你能建议一下，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:05:42.287

这可能会派上用场，

[如何编写 PDF 编辑器？](https://stackoverflow.com/questions/4215844/how-to-write-a-pdf-editor)

iText ® 是一个允许您创建和操作 PDF 文档的库。它使希望通过动态 PDF 文档生成和/或操作来增强 Web 和其他应用程序的开发人员。开发人员可以使用 iText 来：

```
Serve PDF to a browser
Generate dynamic documents from XML files or databases
Use PDF's many interactive features
Add bookmarks, page numbers, watermarks, etc.
Split, concatenate, and manipulate PDF pages
Automate filling out of PDF forms
Add digital signatures to a PDF file 
```

iText 在 Java 和 C# 中都可用。

PDFsharp 是一个开源库，可以轻松地从任何 .NET 语言创建 PDF 文档。相同的绘图例程可用于创建 PDF 文档、在屏幕上绘图或将输出发送到任何打印机。

```
It can use either GDI+ or WPF.
It includes support for Unicode in PDF files. 
```

它还包括 MigraDoc Foundation，它为您带来 PDFsharp 中未包含的所有高级功能。

# android - 是否可以以编程方式关闭android中的浏览器选项卡？

> ID：15614440
> 
> 赞同：3
> 
> 时间：2013-03-25T12:02:01.967
> 
> 标签：android, android-browser

我有一个应用程序可以播放音乐`local server`并在其中打开`music player`，`web browser`但是当用户返回`Home activity`并启动`Another activity`在浏览器上播放视频时，视频会在浏览器的不同选项卡中打开，而音乐选项卡不会关闭。

当另一个标签打开时，我可以关闭已经打开的浏览器标签吗？如果不。请提出一些解决方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:21:58.893

您无法控制另一个应用程序生命周期。因此您无法关闭浏览器中正在运行的选项卡。

另一方面，您可以做的是使用[WebView](http://developer.android.com/reference/android/webkit/WebView.html)打开音频/视频，然后您可以完全控制它（什么和何时）来加载/关闭内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-18T04:52:06.093

经过多次努力，我得出结论，未经应用程序所有者许可，我们无法处理其他应用程序的操作，所以我找到了使用 webview 的替代网络解决方案，现在它可以工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T07:32:32.557

这不是这样做的好方法，如果您对此感兴趣，那么代码将是这样的

```
List<ActivityManager.RunningAppProcessInfo> list = servMng.getRunningAppProcesses();
if(list != null){
 for(int i=0;i<list.size();++i){
  if("com.android.browser".matches(list.get(i).processName)){
   int pid = android.os.Process.getUidForName("com.android.browser");
         android.os.Process.killProcess(pid);
  }
 }
} 
```

# android - Android：根据应用程序的操作（功能）对应用程序进行分组

> ID：15614442
> 
> 赞同：2
> 
> 时间：2013-03-25T12:02:07.867
> 
> 标签：android, android-intent, package-managers

我正在尝试根据其功能对安装在我们的 android 手机中的 Apk 进行分组。EG 对 Internet、chrome、Dolphin Browser 等浏览器应用程序进行分组。具体而言，我需要对电子邮件客户端、浏览器应用程序和消息应用程序进行分组。

我已经进行了研发，发现**pkgManager.queryIntentActivities(intent,pkgManager.GET_RESOLVED_FILTER)，** intent 指向

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("message/rfc822"); 
```

其中列出了电子邮件客户端，但仍未列出所有邮件客户端。我无法在 pkgManager.queryIntentActivities 返回的列表中获取**K9-Mail**和其他一些第三方邮件客户端。

请帮助对电子邮件客户端、浏览器和消息应用程序进行分组

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:16:45.840

没有标准`Intent`结构可以保证唯一标识“电子邮件客户端、浏览器和消息传递应用程序”，即使假设这些术语有一个通用*的人类*定义。您必须使用您选择代表此类应用程序的任何标准手动对预安装的应用程序进行此分组。

# google-app-engine - 在 PyCharm 中指定 dev_appserver.py 参数

> ID：15614444
> 
> 赞同：4
> 
> 时间：2013-03-25T12:02:11.560
> 
> 标签：google-app-engine, command-line-arguments, pycharm

我需要通过运行以下命令来覆盖我的 Google AppEngine 应用的自动 ID 分配策略：

```
dev_appserver.py --auto_id_policy=sequential 
```

如何从 PyCharm IDE 指定 App Engine 参数，或者我应该编辑哪个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:17:09.297

您需要转到运行/调试配置并将您的选项添加到“附加选项”框中。然后在执行 devserver 时将使用这些附加选项。

解决此问题的一种快速方法是单击菜单栏上“运行”按钮旁边的按钮 - 该按钮还应该显示您的应用程序的名称。单击它，然后单击“编辑配置”，您应该会看到下面的屏幕。

![在此处输入图像描述](../Images/a5328c33e4d67bbbf0162aefa0c575d1.png)

这里的 -c 选项 (IIRC) 会在每次运行 devserver 时清除数据存储。

# jquery - 使用父级使用jQuery设置多个下拉列表的值

> ID：15614453
> 
> 赞同：0
> 
> 时间：2013-03-25T12:03:01.393
> 
> 标签：jquery, asp.net-mvc

我在页面上有许多下拉列表（数量取决于数据源），并且希望能够根据父下拉列表设置列表的值。我怀疑有一种方法可以使用 .each jQuery 函数来做到这一点，但我不确定语法。我的每个下拉列表都有一个 list+id 的 id（例如 list6），因此在调用函数时设置值应该不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:12:45.460

如果每个选项都有一个 id，那么您的代码只需设置特定选项的 selected 属性。

```
$("#list6").attr('selected','selected'); 
```

或者您也可以将所需选项的值分配给下拉列表。

```
$("#dropdownlist").val($("#list6").val()); 
```

# java - Spring MVC 3.2 和 HTML5 中的 Web 套接字

> ID：15614456
> 
> 赞同：3
> 
> 时间：2013-03-25T12:03:08.320
> 
> 标签：java, html, spring-mvc, websocket

我想将 Web HTML5 套接字与 Spring MVC 一起使用。几天前我听说 Spring 3.2 版本将提供 Web Sockets 支持以进行实时更新。

[http://blog.springsource.org/2012/05/08/spring-mvc-3-2-preview-techniques-for-real-time-updates/](http://blog.springsource.org/2012/05/08/spring-mvc-3-2-preview-techniques-for-real-time-updates/)

但仍然无法找到任何为我提供实时更新工具的示例代码。我现在为此目的使用 Tomcat，但想转向 Spring。请看看你是否可以帮助我找到一个很好的例子来使用 Spring MVC 的 Web HTML5 套接字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:49:48.403

在博客文章的末尾有这样一段：

> 回到 Spring MVC 3.2，Servlet 3 异步特性可用于长时间运行的请求，也可用于 HTTP 流，Filip Hanik 将技术称为“客户端 AJAX 调用的服务器版本”。至于 WebSockets，Spring 3.2 中还没有支持，但它很可能会包含在 Spring 3.3 中。您可以观看 SPR-9356 以了解进度更新。

所以 Spring MVC 3.2 中不支持 WebSockets。[SPR-9356] 问题表明该功能在 Spring 4.0 backlog 中。[1](https://jira.springsource.org/browse/SPR-9356)

# pyqt4 - 如何清除 QTableView

> ID：15614458
> 
> 赞同：2
> 
> 时间：2013-03-25T12:03:10.693
> 
> 标签：pyqt4, qtableview

我有一个 QTableView。我正在使用`QtSql.QSqlQuery`.

```
SQL = 'SELECT * FROM table1'
Query = QtSql.QSqlQuery(database)
Query.prepare(SQL)
Query.exec_()

model = QtSql.QSqlTableModel()
model.setTable('Table')
model.setQuery(Query)

proxy = QtGui.QSortFilterProxyModel()
proxy.setSourceModel(model)

QTableView.setModel(proxy) 
```

一切正常，查询结果显示在`QTableView`. 我的问题是当我更改`SQL` 导致返回 0 条记录的语句时`Query`，我需要清除数据和单元格中的`QTableView`

我尝试使用`QTableView.clear()`它清除单元格中的数据，留下空行和列。我怎样才能`QTAbleView`彻底清除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:07:35.047

我对清除数据的研究奏效了。

我用了`proxy.deleteLater()`

希望遇到同样情况的人能从中受益

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-24T09:41:44.043

在 C++ 中有一个用于 QAbstractItemView 的重置功能。你可以说

`yourTableView.reset();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-30T21:28:31.277

由于 QTableView 的限制，我更喜欢在这种情况下使用一些解决方法

在我自己的个人程序中，我决定隐藏 QTableView 的行和列，使其看起来好像设置为默认值和空白。这样做的原因是，如果您删除小部件，则需要替换它，这也会重置所有对象的属性。从理论上讲，这可能会迫使您在每次需要将 QTableView 显示为空白或清除时重新分配 QTableView 的所有属性。而不是删除小部件，这个建议的选项可以通过两个简单的循环来完成，当您刷新表格并想要再次显示值时，再次只需两个简单的循环即可完成工作。

有多种方法可以填充 QTableView，但无论您使用哪种方法，您只需要遍历表的行和列。下面是我使用的方法，它基于从 QtCore.QAbstractTableModel 继承的类，因此当我调用`dataFrame`它时，它会返回 QTableView 数据的 pandas 数据框。

如果需要隐藏表格：

```
for _row in range(len(yourQTableView.model().dataFrame.index)):
    yourQTableView.hideRow(_row)

for _col, col_name in enumerate(yourQTableView.model().dataFrame.columns):
    yourQTableView.hideColumn(_col) 
```

如果需要显示表格：

```
for _row in range(len(yourQTableView.model().dataFrame.index)):
    yourQTableView.showRow(_row)

for _col, col_name in enumerate(yourQTableView.model().dataFrame.columns):
    yourQTableView.showColumn(_col) 
```

对我来说，这是最简单的方法，可以得到我想要的结果。我想不出为什么这种方法不会优于完全删除小部件的原因。

# android - 在android中将视图从一个坐标转换到另一个坐标

> ID：15614459
> 
> 赞同：3
> 
> 时间：2013-03-25T12:03:12.977
> 
> 标签：android, android-animation, translate-animation

我正在开发一个应用程序，我需要将视图从一个坐标转换到另一个坐标。x1 = 191, y1 = 300 x2 = 50, y2 = 150

我使用了下面的代码，但它的行为非常奇怪，我的意思是它在这两点之间也没有转换。

代码：

```
 Animation transAnim = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, x,
            Animation.RELATIVE_TO_PARENT, pawnInitLocation[0],
            Animation.RELATIVE_TO_PARENT, y,
            Animation.RELATIVE_TO_PARENT, pawnInitLocation[1]);
        transAnim.setDuration(1000);
        transAnim.setFillEnabled(true);
        transAnim.setFillAfter(true);
        v.startAnimation(transAnim); 
```

我是 android 动画的新手，还没有真正实现过这样的目标。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T01:03:27.873

[`Animation.RELATIVE_TO_PARENT`](http://developer.android.com/reference/android/view/animation/Animation.html#RELATIVE_TO_PARENT)指定您提供的值是要乘以父项的宽度或高度的浮点值。`1.0`对应于`100%`父级的相应维度。

例如，通过指定创建右退出动画或创建左退出动画，使视图完全脱离`1.0`屏幕`100%`的`-1.0`动画`-100%`。

[翻译动画](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html#TranslateAnimation%28int,%20float,%20int,%20float,%20int,%20float,%20int,%20float%29)

# lua - 处理具有可变数量参数的 Lua 函数中的参数

> ID：15614460
> 
> 赞同：1
> 
> 时间：2013-03-25T12:03:13.177
> 
> 标签：lua, lua-table

我试图编写一个具有可变数量参数的函数，该函数对其所有数字条目都做了一些事情。所以我想出了这样的事情：

```
function luaFunc (...)
   for i,v in ipairs{...} do
      if type(v)=='number' then
         --do something
      end
   end
end 
```

但是当我运行它时，它会在第一个非数字参数处停止。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:31:34.170

```
local function luaFunc (...)
   for i = 1, select('#',...) do
      local v = select(i,...)
      if type(v)=='number' then
         --do something
         print(v)
      end
   end
end
luaFunc (1,'a',nil,2)     ]

-- Output
1
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:20:21.733

也试试这个：

```
function luaFunc (...)
   local t=table.pack(...)
   for i=1,t.n do
      local v=t[i]
      if type(v)=='number' then
         print(i,v)
      end
   end
end

luaFunc(10,20,"hello",40,nil,60,print,99) 
```

# jquery - 旋转引号 Jquery

> ID：15614461
> 
> 赞同：2
> 
> 时间：2013-03-25T12:03:16.810
> 
> 标签：jquery, html

我需要一些帮助来实现一个旋转报价 jquery 插件。

这是Jquery代码：

```
(function($) {
    $.fn.quovolver = function(speed, delay) {

        /* Sets default values */
        if (!speed) speed = 500;
        if (!delay) delay = 6000;

        // If "delay" is less than 4 times the "speed", it will break the effect 
        // If that's the case, make "delay" exactly 4 times "speed"
        var quaSpd = (speed*4);
        if (quaSpd > (delay)) delay = quaSpd;

        // Create the variables needed
        var quote = $(this),
            firstQuo = $(this).filter(':first'),
            lastQuo = $(this).filter(':last'),
            wrapElem = '<div id="quote_wrap"></div>';

        // Wrap the quotes
        $(this).wrapAll(wrapElem);

        // Hide all the quotes, then show the first
        $(this).hide();
        $(firstQuo).show();

        // Set the hight of the wrapper
        $(this).parent().css({height: $(firstQuo).height()});       

        // Where the magic happens
        setInterval(function(){

            // Set required hight and element in variables for animation
            if($(lastQuo).is(':visible')) {
                var nextElem = $(firstQuo);
                var wrapHeight = $(nextElem).height();
            } else {
                var nextElem = $(quote).filter(':visible').next();
                var wrapHeight = $(nextElem).height();
            }

            // Fadeout the quote that is currently visible
            $(quote).filter(':visible').fadeOut(speed);

            // Set the wrapper to the hight of the next element, then fade that element in
            setTimeout(function() {
                $(quote).parent().animate({height: wrapHeight}, speed);
            }, speed);

            if($(lastQuo).is(':visible')) {
                setTimeout(function() {
                    $(firstQuo).fadeIn(speed*2);
                }, speed*2);

            } else {
                setTimeout(function() {
                    $(nextElem).fadeIn(speed);
                }, speed*2);
            }

        }, delay);

    };
})(jQuery); 
```

我已将此代码保存为我网站中的 JS 文件

这是我的 HTML：

```
<link rel="stylesheet" media="screen" type="text/css" href="../../style.css" />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="../../js/jquery.quovolver.js"></script>

<body>

         <div>
        I want my rotating quotes HERE

        </div>

</body>
</html> 
```

有人告诉我“使用这行代码调用文档就绪函数中的脚本：`$(’element’).quovolver();`”

我的问题是，我在哪里以及如何存储我的引号，以及如何在我在 html 页面中注明的空间中调用这个 Jquery 插件？

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:04:58.667

这是我在[文档](http://sebnitu.github.com/Quovolver/)中找到的内容：

## Javascript (jQuery)

```
// CASE : in an extern file
// When document is ready...
$(document).ready(function() {
  // Call Quovolver on the '.quotes' object
  $('.quotes').quovolver();
});

// CASE : in HTML's head
<script>
    $(document).ready(function() {
      // Call Quovolver on the '.quotes' object
      $('.quotes').quovolver();
    });
</script> 
```

* * *

## HTML

```
<div class="quotes">
  <blockquote>
    <p>“That which can be asserted without evidence, can be dismissed without evidence.”&lt;/p>
    <p>— Christopher Hitchens (Quote 1)</p>
  </blockquote>

  <blockquote>
    <p>“Owners of dogs will have noticed that, if you provide them with food and water and shelter and affection, they will think you are god. Whereas owners of cats are compelled to realize that, if you provide them with food and water and shelter and affection, they draw the conclusion that they are gods.”&lt;/p>
    <p>— Christopher Hitchens (Quote 2)</p>
  </blockquote>

  <blockquote>
    <p>“Everybody does have a book in them, but in most cases that's where it should stay.”&lt;/p>
    <p>— Christopher Hitchens (Quote 3)</p>
  </blockquote>

  <blockquote>
    <p>“Beware the irrational, however seductive. Shun the 'transcendent' and all who invite you to subordinate or annihilate yourself. Distrust compassion; prefer dignity for yourself and others. Don't be afraid to be thought arrogant or selfish. Picture all experts as if they were mammals. Never be a spectator of unfairness or stupidity. Seek out argument and disputation for their own sake; the grave will supply plenty of time for silence. Suspect your own motives, and all excuses. Do not live for others any more than you would expect others to live for you.”&lt;/p>
    <p>— Christopher Hitchens (Quote 4)</p>
  </blockquote>

  <blockquote>
  <p>“Human decency is not derived from religion. It precedes it.”&lt;/p>
  <p>— Christopher Hitchens (Quote 5)</p>
  </blockquote>

  <blockquote>
    <p>“Many religions now come before us with ingratiating smirks and outspread hands, like an unctuous merchant in a bazaar. They offer consolation and solidarity and uplift, competing as they do in a marketplace. But we have a right to remember how barbarically they behaved when they were strong and were making an offer that people could not refuse.”&lt;/p>
    <p>— Christopher Hitchens (Quote 6)</p>
  </blockquote>
</div><!-- .quotes --> 
```

将`.quotes`类添加到您的`div`中，将其填充为本示例，并在文档加载时调用 jQuery 代码。

# windows - windows下如何在IPython中更改驱动器

> ID：15614465
> 
> 赞同：3
> 
> 时间：2013-03-25T12:03:24.643
> 
> 标签：windows, ipython

如何在 Windows 下的 IPython 中更改驱动器号？例如，!cd W: 不会**使**W: 成为当前路径，**如果**您更改为驱动器 W，它只会更改路径。使用 !cmd 更改为 dos shell 然后更改为 W: 不会对IPython 外壳。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T16:47:14.850

从`cd ?`命令：

> 请注意，!cd 不能用于此目的，因为运行 !command 的 shell 在执行“command”后会立即被丢弃。

因此，只需使用`cd`, 并确保引用路径，以免驱动器号后面的冒号被误解。

```
cd 'W:' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-27T15:42:16.090

我有一台安装了 Anaconda 2020.11 python 的 Win 10 机器，开箱即用没有更新。ipython 7.19.0。我可以 cd 到另一个驱动器号上某处的*唯一方法是*

> 光盘d：/

没有其他排列有效：cd d:、cd d:、cd d:\、cd 'd:'、cd 'd:' 等。

所以有一个答案，但弄清楚是很烦人的。

# scala - 使用 postgresql 时为每个测试设置干净的数据库

> ID：15614467
> 
> 赞同：1
> 
> 时间：2013-03-25T12:03:25.423
> 
> 标签：scala, playframework-2.0

我正在尝试找到一种方法来创建一组测试，这些测试在运行测试用例之前需要拥有一个干净的数据库。

InMemoryDB 似乎不是一个选项，因为我们使用的 DDL 无法在 H2 中执行。

数据库创建是通过进化完成的，所以如果我能够使用进化为每个测试生成干净的数据库，然后在测试运行后删除数据库，那将会很方便。

马尔科

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:25:46.050

作为选项，您可以尝试闪回（或时间点恢复）功能来恢复数据库初始状态或考虑编写不依赖于彼此的测试。

# javascript - 使用 Require.js 和 Backbone 定义全局应用命名空间

> ID：15614471
> 
> 赞同：5
> 
> 时间：2013-03-25T12:03:31.840
> 
> 标签：javascript, backbone.js, requirejs, marionette, amd

我是 Require.js 的新手，我正在尝试做一些我认为很简单但开始变得痛苦的事情。

我正在尝试为我的 Backbone 应用程序定义一个全局命名空间，并将其作为模块加载。这是我的命名空间（main.js）：

```
define(
['jquery',
  'underscore',
  'backbone',
  'GlobalRouter'
],
function($, _, Backbone) {
var App= {
    Models: {},
    Views: {},
    Collections: {},
    Routers: {},
    init: function() {
        new App.Routers.GlobalRouter();
        Backbone.history.start();
    }
}
return App;

}); 
```

这是我的 config.js 文件：

```
require.config({
// your configuration key/values here
baseUrl: "js", // generally the same directory as the script used in a data-main attribute for the top level script
paths: {
    'jquery' : '//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min',
    'underscore': 'vendor/underscore-min',
    'backbone': 'vendor/backbone-min',
    'marionette': 'vendor/backbone.marionette',
    'main' : 'main'
}, // set up custom paths to libraries, or paths to RequireJS plugins
shim: {
    'underscore': {
        exports: '_'
    },

    'backbone': {
        deps: ['underscore', 'jquery'],
        exports: 'Backbone'
    },

    'main' : {
        deps: ['underscore', 'jquery', 'backbone', 'GlobalRouter'],
        exports: 'TEWC'
    }

} // used for setting up all Shims (see below for more detail)
});

define([
'jquery',
   'underscore',
  'backbone',
  'main'
],
function($, _, Backbone, App, GlobalRouter) {
console.log(App)
alert('hit ')
  $(function() {
       App.init();
    });
 } 
```

);

为了更好地衡量，这是我的路由器：

```
define([
'jquery',
'underscore',
'backbone',
'main'
],
function($, _, Backbone, TEWC) {

TEWC.Routers.GlobalRouter = Backbone.Router.extend({
    routes: {
        "" : "index",
        "documents/:id" : "edit",
        "login" : "login"
    },

    edit: function(id) {
        alert('edit')
    },

    index: function() {
        alert('index')
    },

    login: function() {
        alert('login')
    }
});

}); 
```

过去，我收到“应用程序未定义错误”。现在，几分钟后我收到一个加载超时错误，上面写着：

```
Uncaught Error: Load timeout for modules: main 
```

但是，警报没有触发，并且 main.js 似乎没有被加载，但我相信路由器会，并且它并没有吠叫 TEWC 未定义 - 所以它可能正在加载，即使它不在我的网络标签？

这可能是一个菜鸟问题——有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:24:22.110

以下代码没有定义 GlobalRouter 但它被传递给定义回调

```
define([
'jquery',
   'underscore',
  'backbone',
  'main'
],
function($, _, Backbone, App, GlobalRouter) {
console.log(App)
alert('hit ')
  $(function() {
       App.init();
    });
 } 
```

添加`GlobalRouter`到`define`

其次，当它加载失败时`main`..你能从控制台检查它试图访问的 URL 吗？很可能是配置错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T20:22:41.040

如果我没记错的话，你的问题是在`config.js`require.config() 之后，你的 define() 应该是 require() 。

进一步解释。您目前拥有：

```
define([
'jquery',
   'underscore',
  'backbone',
  'main'
... 
```

这`define`应该是 a`require`因为这是您要执行的代码；它不是一个模块定义。

`GlobalRouter`这当然还有前面提到的缺失的依赖关系。

# dart - 使用带有扩展的词法作用域和泛型时单元测试挂起

> ID：15614472
> 
> 赞同：0
> 
> 时间：2013-03-25T12:03:34.440
> 
> 标签：dart

该行为似乎与“扩展”的存在有关，如下面的单元测试所示：

```
typedef dynamic GetFromThing<T extends Thing>(T target);

typedef GetFromThing<T> DefGetFromThing<T extends Thing>(dynamic def);

typedef dynamic GetFromT<T>(T target);

typedef GetFromT<T> DefGetFromT<T>(dynamic def);

class Thing {
  int value;
}

class Test {

  static final GetFromThing<Thing> fromThingSimple = (Thing target) {
    return target.value;
   };

  static final DefGetFromThing<Thing> fromThing = (dynamic def) {
    return (target) => null;
  };

  static final DefGetFromT<int> fromInt = (dynamic def) {
    return (target) => null;
  };

}

main() {
  test('this works', () {
    var temp1 = Test.fromThingSimple(new Thing());
  });

  test('this works too', () {
    var temp = Test.fromInt(10);
  });

  test('should let me call lexically closed functions', () {
    var temp = Test.fromThing(10); // <-- causes test to hang
  });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T17:43:01.590

虚拟机挂起的事实显然是一个错误。该代码是合法的。typedef 描述函数类型并且可以是泛型的，而函数类型本身绝不是泛型这一事实原则上不是问题（尽管它可能是用于实现）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T05:28:04.327

我发现 typedef 中的类型参数在没有某种警告或错误的情况下工作非常有趣，因为 Dart 没有泛型方法。

您很可能在这里遇到了两个错误，第一个是没有错误，第二个是 VM 挂起。

# websocket - vaadin 7 网络套接字

> ID：15614487
> 
> 赞同：3
> 
> 时间：2013-03-25T12:04:33.923
> 
> 标签：websocket, vaadin

我是vaadin的新手。我有几个问题：

1.  Vaadin 7 或更高版本是否支持 websockets？

2.  Vaadin 是否有任何其他功能，例如将数据从服务器推送到客户端（例如 websockets）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:15:34.757

Vaadin 支持[Atmosphere](http://github.com/Atmosphere/atmosphere)，所以 google 来获取启用 websockets 的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-08T05:26:21.480

# 更新 -内置*推送*

[jfarcand](https://stackoverflow.com/users/2044473/jfarcand)（[Atmosphere](https://github.com/Atmosphere)的创建者）和[Ludd](https://stackoverflow.com/users/1864133/ludd)的其他两个答案都是正确的，但现在已经过时了。

Vaadin 7.3.7（截至 2015 年 1 月）现在包含[Atmosphere 库](https://github.com/Atmosphere/atmosphere)。[Atmosphere 提供了对Push](https://en.wikipedia.org/wiki/Push_technology)的内置支持。无需添加任何 jar、库、插件或附加组件。Vaadin Push 首先尝试使用 WebSocket 技术。如果不可用，Vaadin Push 会退回到其他方法。

三个简单的步骤：

1.  将[`@Push`](https://vaadin.com/api/7.4.0/com/vaadin/annotations/Push.html)注释添加到您的 UI 子类
2.  使用 a[`ScheduledExecutorService`](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledExecutorService.html)在后台更新应用程序的数据。最好在[`ServletContextListener`](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html)您的 Vaadin Web 应用程序启动和关闭时启动和停止 executor 服务。
3.  当新数据准备好时，后台线程调用[UI::access](https://vaadin.com/api/com/vaadin/ui/UI.html#access(java.lang.Runnable))方法来安排对 UI 线程（请求处理线程）上的用户界面组件（小部件）的访问和更改。

您可能希望一个用户的主用户界面线程更新另一个用户的显示，而不是第 2 步。基本上相同的想法，并涵盖在 Vaadin 之书中。

# 瓦丁之书

有关服务器推送的更多信息，请参阅[The Book Of Vaadin](https://vaadin.com/book)中的[第 11.16 节。](https://vaadin.com/book/vaadin7/-/page/advanced.push.html)

# 最小的例子

在 2015 年 1 月，我针对 Vaadin 7[中的 Push 的最小示例发布了此答案](https://stackoverflow.com/a/27808461/642706)。您可以复制单个文件的内容，以替换`MyUI`新的默认 Vaadin 项目中的类内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T19:14:45.090

服务器推送是几周后 Vaadin 7.1 的主要功能。查看当前状态的[路线图和相关的](https://vaadin.com/roadmap)[博客文章](https://vaadin.com/blog/-/blogs/roadmap-for-the-next-74-days)。

在 Vaadin 7.1 之前下载最多的服务器推送插件是[ICEPush ，但您也可以在](https://vaadin.com/directory#addon/icepush%3avaadin)[插件目录](https://vaadin.com/directory#browse%3avaadin,search=push)中找到其他替代品。

# java - 使用枚举类填充 JComboBox

> ID：15614489
> 
> 赞同：0
> 
> 时间：2013-03-25T12:04:38.103
> 
> 标签：java, swing, enums, jcombobox, comboboxmodel

我正在尝试使用在 Colour.java 中声明的枚举填充 JComboBox。我可以使用 Colour.values() 访问枚举的描述，但是否可以访问枚举声明本身？我想要用蓝色和红色填充的 JComboBox。我查看了[http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)无济于事。

```
package example;
import javax.swing.*;

public class ColourView extends View {

private JLabel colourLabel;
private JComboBox comboBox;
private DefaultComboBoxModel model;

public ColourView() {
    colourLabel = new JLabel();
    colourLabel.setText("Colours");
    colourLabel.setBounds(20, 30, 70, 20);
    mainContentLayeredPane.add(colourLabel, JLayeredPane.DEFAULT_LAYER);

    comboBox = new JComboBox(Colour.values());     

    comboBox.setSize(100, 20);
    mainContentLayeredPane.add(comboBox, JLayeredPane.DEFAULT_LAYER);
}

public void setComboBox(String[] list) {
    model = new DefaultComboBoxModel(list);
    comboBox.setModel(model);
}
}

package example;

public enum Colour {
BLUE("Blue Paint", 12),
RED("Red Paint", 4);
private String description;
private int value; 

Colour(String description, int value){
    this.description = description; 
    this.value = value; 
}

public String getDescription() {
    return description;
}

public void setDescription(String description) {
    this.description = description;
}

public int getValue() {
    return value;
}

@Override
public String toString() {
    return description;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:30:46.023

如果您希望在颜色名称旁边显示相同颜色的小样本，则需要[自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)。如果您从 a 开始`DefaultListCellRenderer`，您可以添加一个`Icon`用相同颜色绘制的，或者像[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)显示的那样更改背景。

# javascript - 如何在用户关闭浏览器/选项卡之前激活功能？

> ID：15614491
> 
> 赞同：2
> 
> 时间：2013-03-25T12:04:45.970
> 
> 标签：javascript, ajax, jquery

如何在用户关闭浏览器/选项卡之前激活功能？

下面是我的ajax请求

```
<script language="JavaScript" type="text/javascript">
 function srh_ajaxfunction_cny(id)
    {var xmlhttp;
    try{xmlhttp=new XMLHttpRequest();}
    catch (e){try{xmlhttp=new ActiveXObject("msxml2.xmlhttp");}
    catch (e){try{xmlhttp=new ActiveXObject("microsoft.xmlhttp");}
    catch (e){alert("Your browser does not support ajax!");      
    return false;}}}
    xmlhttp.onreadystatechange=function(){
    if(xmlhttp.readyState==4){
        alert('done')
    }}  

        xmlhttp.open("get",url_path,true);
        xmlhttp.send(null); 
    }
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T12:09:02.940

使用`beforeunload`事件。通常，如果该处理程序中有异步操作，浏览器不会等待它们完成并继续页面卸载（有效地在它到达您的服务器之前中断您的 ajax 调用）。

有一些（hackish）技巧可以确保您的 ajax 在浏览器卸载页面之前通过。其中之一（例如用于跟踪您在网页上的行为的服务）正在执行循环，如下所示：

```
window.addEventListener('beforeunload', function() {
    // number of miliseconds to hold before unloading page
    var x = 200;
    var a = (new Date()).getTime() + x;

    // -----------
    // your ajax call goes here
    // -----------

    // browser will hold with unloading your page for X miliseconds, letting
    // your ajax call to finish
    while ((new Date()).getTime() < a) {}
}, false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:07:02.040

使用这个功能：

```
$(window).bind('beforeunload', function() {
    //do your stuffs
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:07:27.340

将其绑定到`onbeforeunload`事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:07:51.937

您可以将函数附加到`window.onbeforeunload`，但 chrome 不允许您执行任何其他代码。您只能返回某个字符串，该字符串将在用户离开之前显示。

# jquery - .change(function() { 更改选择菜单的选项后不提醒选项值

> ID：15614492
> 
> 赞同：1
> 
> 时间：2013-03-25T12:04:47.900
> 
> 标签：jquery, clone, onchange, select-menu

更改选择菜单的选项后，以下调用函数不会提醒选项值：

**不发出警报：**

```
<script type="text/javascript">
jQuery(document).ready(function($){       
    $(".selectmenu").scrollectBox({                           
        preset: 'dropdown',
        numVisibleOptions: 4,
        scrollInterval: 150, 
        scrollOn: 'hover',
        listWidth: 160,
        onSelectEvent: null

}).change(function() {
   var optionvalue = $("select.selectmenu").val(); 
   alert('Selected value ' + optionvalue);     
 });
});

</script> 
```

但以下更改功能独立发出警报

**发出警报：**

```
<script type="text/javascript">
   jQuery(document).ready(function($){    
      $(".selectmenu").change(function() {
       var optionvalue = $("select.selectmenu").val(); 
     alert('Selected value ' + optionvalue);        
     });
    });
</script> 
```

* * *

```
 <select onchange="" name="selectmenu" id="translator" class="selectmenu" >
     <option value="Select Language">Select The Language</option>
     <option value="en|af">Afrikaans</option>
     <option value="en|sq">Albanian</option>
     </select> 
```

如何从第一个代码块中获得警报？请注意，`onSelectEvent:`在第一个代码块中是用于选项更改的自定义触发事件。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:06:40.200

您的第一个代码不会`alert`因为您将`change`事件分配给`document`不下拉。

**编辑：评论回复**

插件有以下两个`option`使用它。

> `onSelectEvent`
> 
> 用于处理选项选择的自定义事件处理程序。该函数可能有两个参数；点击的对象（选项内的链接）和点击事件，例如：`var customSelectHandler = function($obj, event){...};`. 默认值为空。
> 
> `onSelectFunc`
> 
> 将从默认处理程序中调用的函数（在开始时）。该函数可能有两个参数；点击的对象（选项内的链接）和点击事件，例如：`var extraFunc = function($obj, event){...};`. 默认值为空。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:07:15.157

试试这个：

```
jQuery(document).ready(function($){ 
   $(".selectmenu").scrollectBox({                           
      preset: 'dropdown',
      numVisibleOptions: 4,
      scrollInterval: 150, 
      scrollOn: 'hover',
      listWidth: 160,
      onSelectEvent: null
  }).change(function() { //<-------------------------------try it here.
     var optionvalue = $("option:selected", this).val();
     alert('Selected value ' + optionvalue); 
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T12:07:59.027

您想将事件附加到选择框而不是文档。

```
jQuery(document).ready(function($){       
    $(".selectmenu").scrollectBox({                           
        // ...
    }).change(function() {
        var optionvalue = $("select.selectmenu").val(); 
        alert('Selected value ' + optionvalue); 
    });;    
}) 
```

jQuery 的 'fluent' 语法总是返回你正在使用的对象，因此你可以将同一个选择器上的方法链接在一起。

正如 Jai 所建议的，您也没有获得所选选项的值：

```
var optionvalue = $("option:selected", this).val(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-25T12:12:09.823

您的第一个代码应该是这样的：

```
<script type="text/javascript">
    jQuery(document).ready(function($){       
        $(".selectmenu").scrollectBox({                           
            preset: 'dropdown',
            numVisibleOptions: 4,
            scrollInterval: 150, 
            scrollOn: 'hover',
            listWidth: 160,
            onSelectEvent: null
       });    

        $(".selectmenu").change(function() {
           var optionvalue = $("select.selectmenu").val(); 
         alert('Selected value ' + optionvalue);        
         });

     });
    </script> 
```

-------------------------已编辑------------------------ --------

脚本：

```
<script>
    $(document).ready(function () {
           var selectEvent = function($el){
            alert("You chose " + $el.html());
                return false;
            };
         $(".selectmenu").scrollectBox({                           
           preset: 'select',
            numVisibleOptions: 3,
            scrollOn: 'scroll',
            debug: true,
            onSelectEvent: selectEvent

         }); 
    });
</script> 
```

html:

```
 <select name="selectmenu" class="selectmenu" >
        <option>Select The Language</option>
        <option value="en|af">Afrikaans</option>
        <option value="en|sq">Albanian</option>
 </select> 
```

PS：在本地主机上测试:)

它不起作用，因为您有关于文档更改而不是选择菜单更改的警报；）

萨卢多斯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T12:07:52.823

你有一个额外的`})`右括号

```
 $(".selectmenu").scrollectBox({                           
    preset: 'dropdown',
    numVisibleOptions: 4,
    scrollInterval: 150, 
    scrollOn: 'hover',
    listWidth: 160,
    onSelectEvent: null
});   
}).change(function() {
//^here..
   var optionvalue = $("select.selectmenu").val(); 
 alert('Selected value ' + optionvalue); 

 }); 
```

它应该是

```
 $(".selectmenu").scrollectBox({                           
    preset: 'dropdown',
    numVisibleOptions: 4,
    scrollInterval: 150, 
    scrollOn: 'hover',
    listWidth: 160,
    onSelectEvent: null

 }).change(function() {.... 
```

# ruby - 对哈希进行平均

> ID：15614493
> 
> 赞同：2
> 
> 时间：2013-03-25T12:04:47.900
> 
> 标签：ruby

假设我有 3 个哈希：

```
hash1={
a => 1,
b => 2,
c => 4
}

hash2={
b => 1,
c => 3
}

hash3={
a => 2,
b => 1,
c => 3,
d => 4
} 
```

我想根据键将东西平均到一个新的哈希值，所以新的哈希值将是

```
result={a=>1.5,b=>4/3,c=>10/3,d=>4} 
```

意思是如果键不存在于一个哈希中，我们不会将其视为 0。

有没有优雅的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:11:19.750

```
result = {}
[hash1, hash2, hash3].each{|h| h.each{|k, v| (result[k] ||= []).push(v)}}
result.each{|k, v| result[k] = v.inject(:+).to_f/v.length}
result # =>
# {
#   a => 1.5,
#   b => 1.3333333333333333,
#   c => 3.3333333333333335,
#   d => 4.0
# } 
```

# ios - 免费桥接 Monotouch

> ID：15614496
> 
> 赞同：1
> 
> 时间：2013-03-25T12:04:59.277
> 
> 标签：ios, xamarin.ios

我遇到了单点触控的问题。我不确定如何进行免费桥接。

我的代码是

```
 NSInputStream iStream;
    NSOutputStream oStream;

    CFWriteStream cfWrite;
    CFReadStream cfRead;
    CFStream.CreatePairWithSocketToHost(server, port, out cfRead, out cfWrite);
    iStream = (__bridge_transfer NSInputStream)cfRead; 
```

好的，所以 (__bridge) 等不存在，但简单的铸造就像

```
 iStream = (NSInputStream)cfRead; 
```

也不会工作。

哪种方法是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-30T14:40:46.243

**更新**

NSInputStream 构造函数不再可以直接访问。改用这个：

```
using ObjCRuntime;
...
iStream = Runtime.GetNSObject<NSInputStream>(cfRead.Handle); 
```

请参阅此处：[文档](https://docs.microsoft.com/en-us/dotnet/api/corefoundation.cfstream?view=xamarin-ios-sdk-12)

# vba - 从网站/网页下载/保存文件

> ID：15614498
> 
> 赞同：0
> 
> 时间：2013-03-25T12:05:00.853
> 
> 标签：vba, excel

例如，我需要从下面的链接下载第一个/前 5 个日期的 PDF 文件，并将它们保存在桌面上。我不知道如何开始，但也无法在 Google 上找到明确的内容。

你觉得你能帮助我吗？

[http://cetatenie.just.ro/ordine/articol-11/](http://cetatenie.just.ro/ordine/articol-11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T06:04:09.760

我会使用 Internet Explorer，并使用 SHDocVw.InternetExplorer 对象（VBA 参考“Microsoft Internet Controls”，ieframe.dll）将其自动化。

您可以 (a) 创建一个新的 Internet Explorer 窗口，或者 (b) 使用(是一个数组，遍历它直到找到一个 where )`Set x = New SHDocVw.InternetExplorer`获取一个现有的 Internet Explorer 窗口。`Set owins = CreateObject("Shell.Application").Windows``owins``Mid(TypeName(owins(i).Document), 1, 12) = "HTMLDocument"`

拥有 Internet Explorer`ie`后，您可以打电话`ie.Navigate(url)`访问网站。

要在询问之前等待 Internet Explorer 完成导航，您可以运行以下命令：

```
Do While mascot_win.Busy
    Application.Wait DateAdd("s", 1, Now)
    DoEvents
Loop 
```

要获取该页面上前五个 PDF 的 URL，您需要检查页面的 HTML。有两种方法，具体取决于 HTML 的格式。如果 HTML 编写得很好，那么您可以使用`ie.Document.all()`. 但如果 HTML 格式不正确，您可能不得不求助于从`ie.Document.all(0).innerHTML`.

根据您提供的链接的外观，您将寻找以下内容：

```
<li>Data de <strong>22.03.2013</strong>, numarul: <a href="/wp-content/uploads/Ordin-149P-din-22.03.2013.pdf">149P</a></li> 
```

一旦您隔离了每个 PDF URL（使用`<a>`DOM 模型中的标签属性或使用大量`Mid()`对 HTML 的调用），您可以使用以下方法下载它：

```
Private Declare Function URLDownloadToFile _
Lib "urlmon" _
Alias "URLDownloadToFileA" _
( _
    ByVal pCaller As Long, _
    ByVal szURL As String, _
    ByVal szFileName As String, _
    ByVal dwReserved As Long, _
    ByVal lpfnCB As Long _
) As Long

Dim ss As String
Dim ts As String
ss = "http://blah/blah/blah.pdf"
ts = "c:\meh\blah.pdf"
URLDownloadToFile 0, ss, ts, 0, 0 
```

# xml - 使用数据库中的结构构建 xml

> ID：15614506
> 
> 赞同：0
> 
> 时间：2013-03-25T12:05:26.630
> 
> 标签：xml, oracle

标题可能有点误导，所以我会尝试描述这个问题。

我需要使用 SELECT 语句从数据库中选择的数据构建 XML。问题是这应该是相当大的 xml，其结构必须与已存储在另一个表中的 xml 一致。有没有办法做类似的事情：

```
new_xml := some xml already existing in database
modify new_xml with data from SELECT statement 
```

我想避免使用 xmlelement 等构建整个 xml ......我知道我的描述可能有点混乱，所以如果有不清楚的地方，我会尝试回答任何问题。

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:10:30.080

如果每行的结构相同，则可以设置模板。例如：

```
SQL> create table source
  2  (
  3   id number,
  4   cola varchar2(20),
  5   colb number
  6  );

Table created.

SQL>
SQL> insert into source values (1, 'teststr', 23898.234);

1 row created.

SQL> insert into source values (2, '', -9989.00);

1 row created.

SQL> insert into source values (3, 'test again', 0);

1 row created.

SQL> commit;

Commit complete.

SQL>
SQL>
SQL> with xml_template as (select xmltype(
  2  '<root>
  3     <somefield>asdas</somefield>
  4     <somefield2>asdas</somefield2>
  5     <typ>
  6        <col1>.</col1>
  7     </typ>
  8     <col2>.</col2>
  9     <col3>.</col3>
 10  </root>') xml
 11                         from dual)
 12  select updatexml(
 13           xt.xml,
 14           '/root/typ/col1/text()', s.id,
 15           '/root/col2/text()', s.cola,
 16           '/root/col3/text()', s.colb)
 17    from xml_template xt
 18         cross join source s;

UPDATEXML(XT.XML,'/ROOT/TYP/COL1/TEXT()',S.ID,'/ROOT/COL2/TEXT()',S.COLA,'/ROOT/
--------------------------------------------------------------------------------
<root>
  <somefield>asdas</somefield>
  <somefield2>asdas</somefield2>
  <typ>
    <col1>1</col1>
  </typ>
  <col2>teststr</col2>
  <col3>23898.234</col3>
</root>

<root>
  <somefield>asdas</somefield>
  <somefield2>asdas</somefield2>
  <typ>
    <col1>2</col1>
  </typ>
  <col2/>
  <col3>-9989</col3>
</root>

<root>
  <somefield>asdas</somefield>
  <somefield2>asdas</somefield2>
  <typ>
    <col1>3</col1>
  </typ>
  <col2>test again</col2>
  <col3>0</col3>
</root> 
```

因此，`updatexml`只需填写每行不同的字段。

# java - MySQL中的日期问题

> ID：15614527
> 
> 赞同：0
> 
> 时间：2013-03-25T12:06:40.437
> 
> 标签：java, mysql, hibernate

请看下面的编码、映射和 MySQL 现有的一个表列。我只是犯了一个错误

用户Java

```
private Date time = null;

public Date getTime() {
      time = new Date();
    return time;
        } 
```

在休眠映射文件中

```
<property name="time" type="date" column="time"/> 
```

MySQL 表的列

```
 time (DATETIME) 
```

> **错误：**数据截断：日期时间值不正确：“时间”列的“1364212575328”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:13:57.880

您可以使用以下配置：

```
<property name="time" type="java.util.Date">
  <column name="time" sql-type="datetime" />
</property> 
```

这应该可以解决问题。

# bash - ls：如何在每一行显示目录+文件名

> ID：15614529
> 
> 赞同：2
> 
> 时间：2013-03-25T12:06:49.100
> 
> 标签：bash, unix, ls

我有一个包含很多子目录的目录，我想在每一行列出其所有具有特定扩展名的文件，包括它们所在的（子）目录。我现在正在使用：

```
ls /home/directory -R | grep ".ext" > files.txt 
```

这并没有给我我正在寻找的输出......理想情况下，我想要一个看起来像这样的输出：

```
/home/directory/subdirectory1/file1.ext               4.3Mb
/home/directory/subdirectory1/subsubdir1/file2.ext    3.3Mb
/home/directory/subdirectory2/file3.ext               4.6Mb
/home/directory/subdirectory3/file4.ext               5.2Mb
... etc 
```

或者更好的是，将目录和文件名放在单独的列中：

```
/home/directory/subdirectory1/               file1.ext    4.3Mb
/home/directory/subdirectory1/subsubdir1/    file2.ext    3.3Mb
/home/directory/subdirectory2/               file3.ext    4.6Mb
/home/directory/subdirectory3/               file4.ext    5.2Mb
... etc 
```

关于如何做到这一点的任何想法？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:32:05.677

`find putty -type f -name '*.c' -printf "%h\t%f\t%s\n" | column -t`

会产生这样的东西

```
putty          sshzlib.c   38615
putty          notiming.c  584
putty/charset  macenc.c    7129
putty/charset  sbcs.c      1190 
```

如果您想要整个路径，请将您的目录参数显示为从根目录开始的绝对目录路径。

# jasper-reports - Jasper 填表时报错

> ID：15614530
> 
> 赞同：3
> 
> 时间：2013-03-25T12:06:54.117
> 
> 标签：jasper-reports

我对*JR*报告有疑问。当我生成包含表格组件的报告时，我收到错误：

> [没有为命名空间http://jasperreports.sourceforge.net/jasperreports/components](http://jasperreports.sourceforge.net/jasperreports/components)注册组件包

我不知道这是什么意思，因为当我从*iReport*或*ANT*运行报告时，一切正常，我得到了我的 PDF 报告，但是当我从我的网络应用程序运行它时，我得到了这个错误。

任何人都可以帮助我吗？

下面是完整的堆栈跟踪

```
Caused by: net.sf.jasperreports.engine.JRRuntimeException: No components bundle registered for namespace http://jasperreports.sourceforge.net/jasperreports/components
    at net.sf.jasperreports.engine.component.ComponentsEnvironment.getBundle(ComponentsEnvironment.java:150)
    at net.sf.jasperreports.engine.component.ComponentsEnvironment.getManager(ComponentsEnvironment.java:168)
    at net.sf.jasperreports.engine.fill.JRFillComponentElement.(JRFillComponentElement.java:65)
    at net.sf.jasperreports.engine.fill.JRFillObjectFactory.visitComponentElement(JRFillObjectFactory.java:1598)
    at net.sf.jasperreports.engine.base.JRBaseComponentElement.visit(JRBaseComponentElement.java:81)
    at net.sf.jasperreports.engine.JRAbstractObjectFactory.getVisitResult(JRAbstractObjectFactory.java:89)
    at net.sf.jasperreports.engine.fill.JRFillElementGroup.(JRFillElementGroup.java:82)
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.(JRFillElementContainer.java:90)
    at net.sf.jasperreports.engine.fill.JRFillBand.(JRFillBand.java:90)
    at net.sf.jasperreports.engine.fill.JRFillObjectFactory.getBand(JRFillObjectFactory.java:498)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.(JRBaseFiller.java:496)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.(JRVerticalFiller.java:88)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.(JRVerticalFiller.java:103)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.(JRVerticalFiller.java:61)
    at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:153)
    at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:55)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)
    at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745)
    at JavaScriptApp.JavaScriptApp.genPDF_DB(JavaScriptApp.java:116)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    at java.lang.reflect.Method.invoke(Method.java:611)
    at teamworks.connector.JavaReflectionConnector$1.execute(JavaReflectionConnector.java:81)
    at com.lombardisoftware.server.core.ManagedAssetClassLoaderUtil.executeWithManagedAssetClassLoader(ManagedAssetClassLoaderUtil.java:51)
    at teamworks.connector.JavaReflectionConnector.execute(JavaReflectionConnector.java:49)
    at com.lombardisoftware.component.javaconnector.worker.JavaConnectorWorker.invokeJavaMethod(JavaConnectorWorker.java:149)
    at com.lombardisoftware.component.javaconnector.worker.JavaConnectorWorker.doJob(JavaConnectorWorker.java:82)
    at com.lombardisoftware.component.common.workflow.ExecutionJob.doJob(ExecutionJob.java:409)
    at com.lombardisoftware.server.ejb.workflow.EJBWorkflowManagerBean.doResumeWorkflowEngine(EJBWorkflowManagerBean.java:1111)
    at com.lombardisoftware.server.ejb.workflow.EJBWorkflowManagerBean.resumeProcess(EJBWorkflowManagerBean.java:392)
    at com.lombardisoftware.server.ejb.workflow.EJSRemoteStatefulEJBWorkflowManager_82478d70.resumeProcess(Unknown Source)
    at com.lombardisoftware.server.ejb.workflow._EJBWorkflowManagerInterface_Stub.resumeProcess(_EJBWorkflowManagerInterface_Stub.java:518)
    at com.lombardisoftware.component.common.workflow.EJBWorkflowManagerDelegateDefault.resumeProcess(EJBWorkflowManagerDelegateDefault.java:142)
    at com.lombardisoftware.component.common.workflow.EJBWorkflowManagerDelegateWebSphere$6.run(EJBWorkflowManagerDelegateWebSphere.java:84)
    at java.security.AccessController.doPrivileged(AccessController.java:280)
    at com.lombardisoftware.client.delegate.common.WebsphereDelegateHelper.doAsCurrentSubjectContextSensitive(WebsphereDelegateHelper.java:175)
    at com.lombardisoftware.client.delegate.common.WebsphereDelegateHelper.doAsCurrentSubjectContextSensitive(WebsphereDelegateHelper.java:159)
    at com.lombardisoftware.component.common.workflow.EJBWorkflowManagerDelegateWebSphere.resumeProcess(EJBWorkflowManagerDelegateWebSphere.java:82)
    at com.lombardisoftware.component.common.web.WebWorkflowManager.callEJBWorkflowManager(WebWorkflowManager.java:778)
    at com.lombardisoftware.component.common.web.WebWorkflowManager.processRequest(WebWorkflowManager.java:273)
    at com.lombardisoftware.servlet.ControllerServlet.doCommon(ControllerServlet.java:376)
    ... 45 more 
```

# iphone - 带有 tintColor 的 UISegmentedControl 不显示选择？

> ID：15614531
> 
> 赞同：0
> 
> 时间：2013-03-25T12:06:55.883
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uisegmentedcontrol

一旦你设置了`tintColor`一个`UISegmentedControl`当它有一个`segmentedControlStyle`它`UISegmentedControlStyleBar`不再显示你选择哪个按钮。valueChanged 事件仍会触发，但所选按钮中没有任何颜色变化。如果不将控件保留为默认的蓝色样式，是否无法显示选定的按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:11:03.987

如果将深色设置为 TintColor，则不会获得选定的效果，因为使用浅色就像将此代码放在 UISegmentControl 的更改方法中

```
for (int i=0; i<[[sender subviews] count]; i++)
{
    if ([[[sender subviews] objectAtIndex:i]isSelected] )
    {
        UIColor *tintcolor=[UIColor redColor]; //your requiremnent color here
        [[[sender subviews] objectAtIndex:i] setTintColor:tintcolor];
        break;
    }
} 
```

尝试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:15:38.820

为选定段添加颜色`UISegmentcontrol`

**发件人**在这里`UISegmentControl`

```
for (int i=0; i<[sender.subviews count]; i++) 
{
    if ([[sender.subviews objectAtIndex:i]isSelected] ) 
    {               
    UIColor *tintcolor=[UIColor colorWithRed:127.0/255.0 green:161.0/255.0 blue:183.0/255.0 alpha:1.0];
    [[sender.subviews objectAtIndex:i] setTintColor:tintcolor];
    break;
    }
} 
```

# grails - Grails GORM 方法的内存使用情况

> ID：15614532
> 
> 赞同：5
> 
> 时间：2013-03-25T12:06:58.600
> 
> 标签：grails, grails-orm

我想知道 grails 如何通过 GORM 方法处理内存使用和加载（获取）域对象，例如：

```
findAllWhere
findAllBy
list
... 
```

*   它们是否完全加载（分别是它们的代理）到内存中？
*   如果我遍历它们，`each/every/any`它们是否由一个迭代器支持，它们会懒惰地加载它们？
*   我应该更喜欢`createCriteria() {...}.scroll()`更好的内存使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T07:53:39.010

假设我们忽略了 GORM 使用的每种类型的 DB 驱动程序的不同行为，我们可以在代码和文档中找到答案。

动态查找器由包`org.grails.datastore.gorm.GormStaticApi`中的查找器类提供给域类`org.grails.datastore.gorm.finders`。

查看这些类，我们可以看到返回多个结果的查询总是组装为 a`DetachedCriteria`并且**总是调用`criteria.list()`方法**；这意味着**整个结果批次被组装并保存在内存中**。使用 Groovy 的集合方法遍历结果**不会有任何区别**，因为您实际上是在返回的结果列表中调用这些方法。

至于“**加载了多少结果域？** ”这个问题 - 这取决于域的组成，但您可以假设**域的字段已加载**，并且默认情况下任何**关联都是惰性的**。

在需要更好内存使用的场景中，您当然可以结合结果预测和使用自行组合标准`scroll`（请注意，此功能取决于数据库的类型）。

在极端情况下，我什至绕过 GORM 并直接使用 DB 驱动程序。

# regex - 验证不完整的正则表达式

> ID：15614538
> 
> 赞同：1
> 
> 时间：2013-03-25T12:07:10.833
> 
> 标签：regex

假设我们有一个正则表达式，就我而言，它是我发现与英国汽车牌照匹配的一个：

```
^([A-Z]{3}\s?(\d{3}|\d{2}|d{1})\s?[A-Z])|([A-Z]\s?(\d{3}|\d{2}|\d{1})\s?[A-Z]{3})|(([A-HK-PRSVWY][A-HJ-PR-Y])\s?([0][2-9]|[1-9][0-9])\s?[A-HJ-PR-Z]{3}) 
```

典型的英国汽车注册是

```
HG53CAY 
```

这由正则表达式正确匹配，但我想做的是找到一种方法来匹配它的任何前缀子字符串，所以以下内容都是有效的：

```
H, HG, HG5, HG53, HG53C, HG53CA, HG53CAY 
```

有没有建议的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:25:24.470

首先，我将您的正则表达式重写为如下所示：

```
^([A-Z]{3}\s?(\d{1,3})\s?[A-Z])|([A-Z]\s?(\d{1,3})\s?[A-Z]{3})|(([A-HK-PRSVWY][A-HJ-PR-Y])\s?([0][2-9]|[1-9][0-9])\s?[A-HJ-PR-Z]{3}) 
```

因为这些`\d{3}|\d{2}|d{1}`部分没有意义，应该写出来`\d{1,3}`。

重写正则表达式

```
^([A-Z]{0,3}\s?(\d{0,3})\s?[A-Z]?)|([A-Z]\s?(\d{0,3})\s?[A-Z]{0,3})|(([A-HK-PRSVWY][A-HJ-PR-Y]?)\s?([0]?[2-9]?|[1-9]?[0-9]?)\s?[A-HJ-PR-Z]{0,3}) 
```

应该具有只允许匹配注册开头的预期效果，但不幸的是，它不再保证完整注册将是有效的，因为我必须使大多数字符可选。

你可以尝试这样的事情

```
^(([A-Z]{3})|[A-Z]{1,2}$)\s?((\d{1,3})|$))... 
```

使其要求每个部分都是完整的，或者它不完整但后跟“字符串结尾”，由正`$`则表达式中的 表示。

# mono - 为 MIPS 交叉编译 Mono 框架 3.0.6+

> ID：15614541
> 
> 赞同：4
> 
> 时间：2013-03-25T12:07:17.010
> 
> 标签：mono, mips, cross-compiling

我正在尝试为 MIPS 平台交叉编译 Mono 框架（3.0.6）。我发现的问题很少，所以我想问问社区是否已知。

**我的环境**：Linux 3.2.0-39-generic #62-Ubuntu SMP Thu Feb 28 00:28:53 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux

**工具链**：Sourcery G++ Lite 4.3-51

**命令行**：

> ./configure --prefix=/home/dev/mono-3.0.6-mips --host=mips-linux-gnu --enable-minimal=profiler,debug,logging,soft_debug --without-mcs-docs -- target=mips-linux-gnu --with-moonlight=no --with-tls=pthread --with-sigaltstack=no --with-profile4_5=yes CXXFLAGS="-mips32r2 -march=24kf -mtune=24kf -EL " CFLAGS="-mips32r2 -march=24kf -mtune=24kf -EL" && 使

**问题 #1**：当我管理它进行配置时，编译停止并出现以下错误：

> mini-gc.c:2551：错误：重新定义“mini_gc_enable_gc_maps_for_aot”
> 
> mini-gc.c:2518：错误：“mini_gc_enable_gc_maps_for_aot”的先前定义在这里

**问题 #2**：在我注释掉**mini_gc_enable_gc_maps_for_aot**的第二个声明后，它编译但看起来 Sourcery G++ 链接器崩溃了：

> /home/dev/mips-4.3/bin/../lib/gcc/mips-linux-gnu/4.3.2/../../../../mips-linux-gnu/bin/ld： BFD (Sourcery G++ Lite 4.3-51) 2.18.50.20080215 断言失败 /scratch/clm/2008q3-lite/obj/binutils-src-4.3-51-mips-linux-gnu-i686-pc-linux-gnu/bfd/elfxx -mips.c:2651

任何人都可以解决这个问题吗？我找不到任何描述为 MIPS 架构构建 Mono 的文章/信息（至少是一些最近的信息）。根据[此](http://www.infoq.com/news/2012/02/Mono-Android-MIPS)链接，大约一年前添加了对 MIPS 的支持。[Mono 本身应该从3.0.4 版本](http://www.mono-project.com/Release_Notes_Mono_3.0.6#MIPS_port)开始完全支持 MIPS 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:53:58.790

我正在为遇到同样问题的其他人发布此信息（为 MIPS 平台构建 Mono）：

最后，我能够使用以下命令行为 MIPS 平台构建单声道运行时：

> ./configure --prefix=/home/dev/mono-3.0.6-mips --host=mips-linux-gnu --enable-minimal=profiler,debug,logging,soft_debug --without-mcs-docs -- target=mips-linux-gnu --with-moonlight=no --with-tls=pthread --with-sigaltstack=no --with-profile4_5=yes CXXFLAGS="-mips32r2 -EL" CFLAGS="-mips32r2 -EL " LDFLAGS=-EL CPPFLAGS="-mips32r2 -EL" ASFLAGS=-EL CC="mips-linux-gnu-gcc -EL"

为使用 ld 的单声道链接修复问题的所有工具指定 -EL 标志（请参阅我最初帖子中的问题 #2）。

剩下的最后一个问题是让 mono 构建系统构建 mscorlib.dll。在 mcs/class 文件夹中调用不同的**make命令不会做任何事情。**

# vb.net - String.Concat 带有非字符串参数，意外行为

> ID：15614544
> 
> 赞同：1
> 
> 时间：2013-03-25T12:07:31.123
> 
> 标签：vb.net, string, .net-4.0, refactoring, concat

作为总结：我试图让 String.Concat 在将字符串粘在一起时使用引用类型的 ToString 重载。

编辑：添加了这个概述：下面的示例代码是我的真实代码的一个成熟的摘录 - 因此，如果我只有两行代码，在重构时它会立即显而易见。这里（对我而言）的重要问题是我从字符串更改为对象，并且没有来自 String.Concat 的编译错误。同样，它的行为不是我所期望的（使用我的对象的字符串方法，而不是沼泽标准对象名称）。如果我一直使用“&”，就会出现编译错误。我担心 String.Concat 语法糖可能会导致本来可以避免的错误（在这种情况下，在重构时）。我想知道是否有办法改变 String.Concat 的行为，或者我是否应该认为它很危险。

情况：
我有一个处理一大堆数据的解决方案；我使用字符串来包含每条数据的标识符，但刚刚将其换成了一个类（FeatureIdentifier），以使我能够扩展标识符以包括批处理等内容。

我重构了我的代码，以便我使用这个类而不仅仅是字符串。在重构这类事情时（正确或错误），我倾向于将编译错误作为待办事项列表。

现在，我是一名自学成才的程序员，我可能有点习惯于自己的方式（我倾向于根据是否允许我做任何新功能而不是是否允许我做我已经可以做的事情来看待新功能只做更轻松），我刚刚遇到了让我难过的事情。

因此，我将标识符粘贴到类型的下划线上。我的代码看起来像这样：
`Dim x as string = "MyIdentifer"`
`dim myOutputValue as string = String.Concat(x,"_ANCHOR.txt")`
运行这个我得到的 myOutputValue 等于“MyIdentifier_ANCHOR.txt”。重构之后，我的代码看起来像这样：
`Dim x as new FeatureIdentifier("MyIdentifier")`
`dim myOutputValue as string = String.Concat(x,"_ANCHOR.txt")`
运行它，我得到的 myOutputValue 等于“MyNamespace.FeatureIdentifier_ANCHOR.txt”。

踢自己并在我的班级上实现了 ToString 方法后，我再次运行它并获得完全相同的输出（即“MyNamespace.FeatureIdentifier_ANCHOR.txt”）。立即，如果我这样做：?x.ToString，我得到“MyIdentifier”，所以我确定我已经正确实现了 ToString。

所以，这是我的问题。我喜欢 String.Concat 的语法，但我不喜欢它不执行以下操作之一的事实：

b) 如果您传递非基于字符串的参数，则会引发编译错误。老派：x & "_ANCHOR.txt" 给了我一个编译错误（我会在重构时发现）。

这是我尝试过的：
我尝试过使用扩展名（类似这样：）隐藏 String.Concat 函数，
`<System.Runtime.CompilerServices.Extension()> Public Function Concat(...some arguments...) As String`
`Return String.Concat(...some arguments...)`
`End Function`
但遇到了两个问题：
1）尝试将参数的类型缩小到字符串以导致编译错误时，我意识到参数是一个参数数组，因此首先是对象。所以失败了。
2）当我尝试进行多个重载（（s1 as string，s2 as string），（s1 as string，s2 as string，s3 as string）等）时，我觉得有点蹩脚，还发现你可以'

那么，有谁知道让 String.Concat 表现得像老式串联一样的方法，还是我应该避免 String.Concat 支持老式串联？
（我不打算使用 StringBuilder，因为我只连接几个字符串，我不相信这是一个适合的地方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:39:52.360

我不相信有任何方法可以“修复”该`String.Concat`方法以仅允许字符串。将其归结为应尽可能少地创建和使用共享方法的另一个原因。但是，通过运算符重载的奇迹，您可以使您的自定义类像字符串一样工作。要修复该`Concat`方法，您需要重载`CType`运算符。要修复字符串连接运算符 ( `&`)，您需要单独重载该运算符，如下所示：

```
Public Class FeatureIdentifier
    Public Sub New(id As String)
        Me.Id = id
    End Sub

    Public Property Id As String
    Public Property SomethingElse As Integer

    Public Overloads Shared Widening Operator CType(value As FeatureIdentifier) As String
        Return value.Id
    End Operator

    Public Overloads Shared Operator &(value1 As FeatureIdentifier, value2 As String) As String
        Return value1.Id & value2
    End Operator

    Public Overloads Shared Operator &(value1 As String, value2 As FeatureIdentifier) As String
        Return value1 & value2.Id
    End Operator
End Class 
```

现在你可以像这样使用它：

```
Dim x As New FeatureIdentifier("MyIdentifier")
Dim myOutputValue As String = String.Concat(x, "_ANCHOR.TXT") 
```

或者像这样：

```
Dim x As New FeatureIdentifier("MyIdentifier")
Dim myOutputValue As String = x & "_ANCHOR.TXT" 
```

在这种情况下，它就像仍然是一个字符串一样工作。您可能还想重载其他一些运算符，以防万一。例如，`+`运算符在应用于两个字符串时也会连接。但是，我应该提醒您，运算符重载可能会给不熟悉代码的人造成混淆，因为它会意外地工作，因此您应该只在确实有意义的情况下使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:10:48.200

您是否需要覆盖`ToString`甚至确保为此调用它？`FeatureIdentifier`公开named的属性或类似的东西似乎更合适`Identifier`，然后你可以这样做：

```
Dim myOutputValue as string = String.Concat(x.Identifier, "_ANCHOR.txt") 
```

# android - 带有gridview的Android选项卡在开关中滞后

> ID：15614546
> 
> 赞同：0
> 
> 时间：2013-03-25T12:07:35.447
> 
> 标签：gridview ！, android, gridview, imagedownload

我的一个 android guis 中有 3 个选项卡，第二个选项卡包含一个从互联网下载图像的[gridview ！](/questions/tagged/gridview "显示标记为“gridview”的问题")问题是，当我在选项卡之间切换并通过 gridview 时，我看到了非用户友好的延迟。我怎样才能避免这种情况？我想要一个平稳的行为。在每个选项卡切换中暂停下载并在更改后恢复它们是一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T16:33:30.573

你用什么来下载图像并将它们放入 GridView？我已经实现了与您类似的功能（gridView 是其中一个选项卡的大部分）。您应该使用名为[UniversalImageLoader](https://github.com/nostra13/Android-Universal-Image-Loader)的相当有效的工具。如果您正确实现缓存，它将延迟加载 GridView，并且应该消除任何滞后现象。

# object - 使用 Gcc 中的 __inline__ 函数将代码与 C 和 Object 合并

> ID：15614550
> 
> 赞同：0
> 
> 时间：2013-03-25T12:07:55.620
> 
> 标签：object, gcc, inline

当我阅读 gcc 文档时，我认为 inline （或**inline**）关键字会消除函数调用开销。

正如我所说：“ GCC 实现这一点的一种方法是将函数的代码集成到其调用者的代码中。这通过消除函数调用开销来加快执行速度；此外，如果任何实际参数值是常量，它们的已知值可能允许在编译时进行简化，因此不需要包含所有内联函数的代码。” Gcc Manual 6.36

因此，我假设以下 C 代码：

```
__inline__ int sum(int a, int b)
{
    return a+b;
}

int add_one(int a)
{
    return sum(a, 1);
} 
```

将转化为

```
add_one:
    mov eax, [ebp-4]
    add eax, 0x01
    retn 
```

代替：

```
add_one:
    push 0x01
    push [ebp-4]
    call sum
    retn 
```

由于这不起作用，我想问一个问题。我有一个带有函数的目标文件。它导出符号 _my_func。我得到了带有以下代码的C代码：

```
extern __inline__ _my_func

int main(int argc, char **argv)
{    
    _my_func(argv[1]);
    _my_func(argv[2]);
} 
```

如何在我的主函数中合并我的对象代码。例如删除调用和函数开销。

谢谢

斯托拉斯

顺便说一句，即使在这里（[__inline__ 是什么意思？](https://stackoverflow.com/questions/2082551/what-does-inline-mean)）我注意到它*应该*消除函数开销。但是 objdump 另有说明：S

发布更新：

即使使用以下命令：

```
nasm -felf get42.s -o42.o
gcc O3 42.o main.c -o mybin.elf
objdump -d mybin.elf 
```

我注意到一个像这样的小电话：

```
<_get42>:
    xor eax, eax
    mov eax, 0x42
    ret

<main>:
    push ebp
    mov ebp, esp
    add esp, 0xfffffff0
    call _get42
    leave
    ret 
```

顺便说一句，我确实注意到它删除了函数中的（mov ebp、esp 等）开销。但这就是它的全部作用吗？因为我只想用函数中的实际代码删除调用。就像消除调用一样，jmp 或 push，ret。

# javascript - 标记未显示在地图 api V3 中

> ID：15614557
> 
> 赞同：0
> 
> 时间：2013-03-25T12:08:04.190
> 
> 标签：javascript, google-maps, google-maps-markers

为什么我的标记没有出现？
我也尝试不使用“marker.show”行，但标记似乎没有出现。

```
<html><head><meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
<title>Google Maps JavaScript API v3 Example: Custom Control</title>
<script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false">    </script>
<script type="text/javascript" src="ZoomPanControl.js"></script>
<script type="text/javascript">
function initialize() {  
    var myOptions = {  
        zoom: 10,  
        center: new google.maps.LatLng(47.3732589, 8.2382168),  
        mapTypeId: google.maps.MapTypeId.ROADMAP,  
        navigationControl: true }  
    var map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);  
    var marker = new google.maps.Marker({ position: google.maps.LatLng(47.3732589, 8.2382168), title: 'x', map:map});  
    marker.show;  
};
</script></head>  
<body style="margin:0px; padding:0px;" onload="initialize()">  
<div id="map_canvas" style="width:100%; height:100%"></div>  
</body></html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T14:15:41.493

这应该可以解决问题：

```
var marker = new google.maps.Marker();
marker.setPosition(new google.maps.LatLng(47.3732589, 8.2382168));
marker.setMap(map); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T14:14:42.120

您很接近，但`new`在添加`position`. 它应该如下所示：

```
var marker = new google.maps.Marker({ position: new google.maps.LatLng(47.3732589, 8.2382168), title: 'x', map:map}); 
```

# javascript - 将图像链接到网络链接

> ID：15614560
> 
> 赞同：-2
> 
> 时间：2013-03-25T12:08:07.630
> 
> 标签：javascript, image, hyperlink

首先，我不是网页设计师，我对 html、css、javascript 等的了解非常有限。

我正在运行一个脚本，每次刷新页面时都会显示一个随机图像。我想知道，我如何设置一个点击链接，允许用户点击随机图像并进入另一个网页。

我使用的脚本如下。理想情况下，我希望能够单击图像，然后发送到该词的定义。

例如，当显示“expose.png”时，我希望能够单击图像并被带到[http://oxforddictionaries.com/definition/english/expose?q=expose](http://oxforddictionaries.com/definition/english/expose?q=expose)

请帮忙。

```
<a href="javascript:document.location.reload();"
ONMOUSEOVER="window.status='Refresh'; return true">
<img src="Graphic-design-can-[TEST].png" width="auto" height="auto"//>
</a>

</div>

<div id="outcome">

<script language="JavaScript">

function random_imglink(){
var myimages=new Array()

myimages[1]="expose.png"
myimages[2]="inform.png"
myimages[3]="explain.png"
myimages[4]="formulate.png"
myimages[5]="record.png"
myimages[6]="mediate.png"
myimages[7]="design.png"
myimages[8]="persuade.png"
myimages[9]="summarise.png"
myimages[10]="generate.png" 

var ry=Math.floor(Math.random()*myimages.length)
if (ry==0)
ry=1
document.write('<img src="'+myimages[ry]+'" border=0>')
}
random_imglink()

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:14:14.187

你可以这样做...

```
</div>

<div id="outcome">

<script language="JavaScript">

function random_imglink(){
var myimages=new Array() 
```

var mylink=新数组（）

```
myimages[1]="expose.png"
mylink[1]="www.atrein.com"
myimages[2]="inform.png"
mylink[2]="www.atrein.ir"
myimages[3]="explain.png"
mylink[3]="www.apadana-business.com"
myimages[4]="formulate.png"
mylink[5]="www.google.com"

var ry=Math.floor(Math.random()*myimages.length)
if (ry==0)
ry=1
document.write('<a href="'+mylink[ry]+'" ><img src="'+myimages[ry]+'" border=0> </a>')
}
random_imglink()

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:13:38.967

你可以做类似的事情，与图像标签相同的过程，

```
<a href="javascript:document.location.reload();"
ONMOUSEOVER="window.status='Refresh'; return true">
<img src="Graphic-design-can-[TEST].png" width="auto" height="auto"//>
</a>

</div>

<div id="outcome">

<script language="JavaScript">

function random_imglink(){
var myimages=new Array()
var myurls=new Array()

myimages[1]="expose.png"
myimages[2]="inform.png"
myimages[3]="explain.png"
myimages[4]="formulate.png"
myimages[5]="record.png"
myimages[6]="mediate.png"
myimages[7]="design.png"
myimages[8]="persuade.png"
myimages[9]="summarise.png"
myimages[10]="generate.png" 

myurls[1]="http://google.com"
myurls[2]="http://stackoverflow.com"
.....
....

var ry=Math.floor(Math.random()*myimages.length)
if (ry==0)
ry=1
document.write('<a href="'+myurls[ry]+'"><img src="'+myimages[ry]+'" border=0 id="'+myimages[ry]+'" onClick="'+dosomething(myimages[ry])+'") /></a>')
}

random_imglink()

function dosomething(myimage)
{
      switch(myimage)
      {
             case 'expose.png':
                     p = document.createElement("p");

                     img = document.createElement("img");
                     img.id="minutesTens";
                     img.src = "1.gif";
                     p.appendChild(img);
                     break;

             case 'inform.png':
                     p = document.createElement("p");

                     img = document.createElement("img");
                     img.id="minutesTens";
                     img.src = "2.gif";
                     p.appendChild(img);
                     break;
              case.....
              ..........
              ..........

 }

</script> 
```

这段代码的含义：使用 document.write 函数创建的图像将包含 ID 和事件调用“onClick”。将使用参数“ID”调用函数 onClick()。将传递当前图像的 ID 的位置。

dosomething() 函数获取图像的 ID 并根据 switch case 语句设置下一个图像。我希望现在很清楚。希望能帮助到你。

# android - android.content.ActivityNotFoundException：没有找到处理 Intent 闪屏的活动

> ID：15614561
> 
> 赞同：24
> 
> 时间：2013-03-25T12:08:11.943
> 
> 标签：android, android-intent

我在启动画面后加载新意图时遇到问题。我已经查看了与此异常相关的问题，但它们似乎都在处理诸如 google play 或 google maps 未正确引用之类的问题，这对我来说并非如此。

这些是我看过的相关问题

[没有找到处理意图的活动？](https://stackoverflow.com/questions/13276441/not-found-activity-to-handle-intent)

[未找到处理意图的活动](https://stackoverflow.com/questions/4268957/activity-not-found-to-handle-intent)

[没有发现处理意图的活动](https://stackoverflow.com/questions/9357183/no-activity-found-to-handle-intent)

下面是我的清单代码

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.main"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".HomePage"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.HOMEPAGE" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".OrderPlaced"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.ORDERPLACED" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是类启动的代码

```
package com.android.main;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class Splash extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.splash);

        Thread timer = new Thread(){
            public void run(){
                try{
                    sleep(1000);
                }catch(InterruptedException e) {
                    e.printStackTrace();
                }finally{
                    Intent openStartingPoint = new Intent("com.android.main.HOMEPAGE");
                    startActivity(openStartingPoint);
                }
            }
        };
        timer.start();
    }

    @Override
    protected void onPause() {

        super.onPause();
        finish();
    }

} 
```

这是我在启动画面后尝试加载的类 HomePage

```
package com.android.main;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class HomePage extends Activity {
    /** Called when the activity is first created. */

    TextView name;
    EditText editName;
    TextView drinks;
    Spinner drinksSpinner;
    TextView message;
    CheckBox checkbox;
    Button createOrderButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        createOrder();
    }

    public void createOrder(){

        createOrderButton = (Button) findViewById(R.id.bCreateOrder);
        createOrderButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                postInformationtoAPI();

            }

            private void postInformationtoAPI() {

                goToOrderCompleted();
            }

            private void goToOrderCompleted() {
                Intent intent = new Intent(HomePage.this , OrderPlaced.class);
                HomePage.this.startActivity(intent);
                Log.i("onClick", "trying to start new activity to change layout");
            }
        });

    }
} 
```

加载启动画面后应用程序强制退出并给出以下异常

```
03-14 22:32:33.553: E/AndroidRuntime(3166): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.main.HOMEPAGE } 
```

对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T12:12:21.273

你必须区分意图的构造函数，

```
 Intent openStartingPoint = new Intent("com.android.main.HOMEPAGE"); 
```

假设`com.android.main.HOMEPAGE`为**Intent 的动作 Filter**。这在您的应用程序的 android manifest.xml 文件中不可用。你有

`<action android:name="android.intent.action.HOMEPAGE" />`

应该是，

`<action android:name="com.android.main.HOMEPAGE" />`

**或者**只是改变它，

```
Intent openStartingPoint = new Intent(Splash.this, HOMEPAGE.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:11:19.423

```
 <activity
        android:label="@string/app_name"
        android:name=".SplashScreen"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.android.main.HOMEPAGE"
        android:screenOrientation="landscape"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter >
            <action android:name="com.android.main.HOMEPAGE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

另外我会有一个计时器任务来显示启动画面

```
public class SplashScreen extends Activity{

Timer splashTimer;
SplashTimerHandler splashTimerHandler;

private boolean applicationPaused=false;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    setContentView(R.layout.main);

    this.setSplash();

}

private void setSplash() 
{
    this.splashTimerHandler=new SplashTimerHandler();
    this.splashTimer=new Timer();

    this.splashTimer.schedule(this.splashTimerHandler, 0, 1000);

}

@Override
public void onPause()
{
    super.onPause();
    this.applicationPaused=true;
    this.closeSplashTimer();
}

@Override
public void onResume()
{
    super.onResume();

    if(this.applicationPaused)
    {
        this.applicationPaused=false;
        this.closeSplashTimer();
        this.setSplash();
    }
}

public class SplashTimerHandler extends TimerTask{

    int splashTimerCounter=0;
    @Override
    public void run()
    {
        splashTimerCounter++;
        if(splashTimerCounter>2)
        {
            runOnUiThread(splashTimeOver);
        }       
    }

    private Runnable splashTimeOver=new Runnable() {

        @Override
        public void run()
        {
            closeSplashTimer();
            startHomeScreen();
        }
    };      
}

protected void closeSplashTimer() 
{
    if(this.splashTimer!=null)
    {
        this.splashTimer.cancel();
        this.splashTimer=null;
    }

}

private void startHomeScreen() 
{
    this.closeSplashScreen();
    startActivity(new Intent("com.android.main.HOMEPAGE"));

}

private void closeSplashScreen()
{
    this.closeSplashTimer();
    this.finish();

}

@Override
public boolean onKeyDown(int keycode, KeyEvent event)
{
    if(keycode==KeyEvent.KEYCODE_BACK)
    {
        this.closeSplashScreen();
    }
    return true;
}   
} 
```

# javascript - javascript：如何更改并行 div 类的元素 innerHTML

> ID：15614563
> 
> 赞同：0
> 
> 时间：2013-03-25T12:08:19.130
> 
> 标签：javascript, html, getelementbyid

html: `

```
<li><div class="zb_font"><font color="#FF0000"> * </font>first</div></li>
<li><div class="zb_font"><font color="#FF0000"> * </font>second</div></li>
<li><div class="zb_font"><font color="#FF0000"> * </font>third</div></li>
<li><div class="zb_font"><font color="#FF0000"> * </font>last</div></li> 
```

`

javascript: `function myFunc(){ var change = document.getElementsByClassName('zb_font')[3]; change.innerHTML = '4'; }`

我确定该函数已被调用，但我仍然得到“TypeError：change is undefined”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:11:57.363

确保您的 javascript 在 DOM 加载后运行。例如：

```
document.onload = function() {

// your function.
}; 
```

# iphone - 将名称和电子邮件存储在数组列表中时，是否创建具有电子邮件和名称属性的对象播放器？

> ID：15614565
> 
> 赞同：0
> 
> 时间：2013-03-25T12:08:23.533
> 
> 标签：iphone, ios, objective-c, nsarray, nsobject

在我开始之前，我试图找到最干净的解决方案，并且想知道我应该采取哪种方法。另一个可能的解决方案是我将一个包含所有详细信息的数组存储在另一个数组中，例如此时的姓名和电子邮件。

基本上我想要一个具有可扩展性的人名列表和他们相应的电子邮件地址，以便我以后可以增加它。我只是想知道什么是干净的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:18:10.867

遵循正确的 MVC 架构，您应该创建模态类并将数据存储在它们的实例中。

它也是可扩展的，因为稍后您想再添加一个字段，您只需在模态类中再添加一个类成员。

您可以参考此[链接](https://stackoverflow.com/questions/14955684/how-to-take-particular-value-from-array-and-show-in-tableview/14959313#14959313)，其中我指定了如何使用数据模式类存储和检索数据：

# php - PHP 是否以不同方式（内部）处理数字索引数组？

> ID：15614566
> 
> 赞同：6
> 
> 时间：2013-03-25T12:08:25.423
> 
> 标签：php, arrays, performance

...比关联数组？

关联数组会占用更多内存吗？

```
$arr = array(1, 1, 1);
$arr[10] = 1;
$arr[] = 1; // <- index is 11; does the array become associative here? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:13:10.747

简而言之，PHP 没有非关联数组。

@Sectus 就 PHP 数组的底层实现发布了一个很好的答案。了解“幕后”发生的事情通常是有益的。但不管它们的底层实现如何，PHP 数组作为与键关联的值的有序映射（即关联数组）*公开给 PHP 开发人员。*总是。

来自[PHP:Arrays - Manual](http://php.net/manual/en/language.types.array.php)

> PHP 中的数组实际上是一个有序映射。映射是将值与键相关联的类型。

和

> PHP 数组可以同时包含整数和字符串键，因为 PHP 不区分索引数组和关联数组。

和

> 键可以是整数或字符串。

数组是数字索引的误解是由于整数键为方便起见自动递增的特性，在没有明确指定键的情况下。

但请注意，即使所有键都是整数，PHP 中也不能保证某个项目存在于例如 $arr[0] 中，据我所知，这是在任何其他使用索引数组的语言中给出的*（*也就是说，假设索引数组至少包含一个元素，并且是从 0 开始的）。

这不是一个微不足道的区分。恕我直言，依赖 PHP 数组表现得像索引数组*而不考虑潜在后果或理解差异*的*程序员可能会为奇怪/意外的行为设置自己（或未来的维护者）。

*我已经对此进行了限定，因为显然在某些情况下，*明智*地决定利用 PHP 语言围绕数组的类似索引的便利/功能可以带来好处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:14:29.880

PHP 中的数组总是一个哈希表。您可以阅读@NikiC 的[这篇文章](http://nikic.github.com/2012/03/28/Understanding-PHPs-internal-array-implementation.html)。

> 基本上，PHP 中的所有内容都是一个哈希表。哈希表不仅用于 PHP 数组的底层实现，还用于存储对象属性和方法、函数、变量以及几乎所有其他内容。

如果键从 0 开始按顺序排列，它**看起来像**索引数组，但实际上并非如此。

这篇[文章](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)也会很有用。

> PHP数组同时是数组、字典和链表，这肯定需要很多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:13:44.093

所有 PHP 数组都是关联的。PHP 不像其他一些语言那样有“列表”。数字索引数组只是带有数字键的关联数组。数字键有些特殊，在添加项目时可以省略它们，从而导致 PHP 自动索引这些项目。内部~~数字索引可能使用也可能不使用不同的索引类型（不确定，如果需要，请查看源代码），但~~它们使用相同的机制，它们并不代表具有不同性能特征的截然不同的数组类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:26:32.537

在这种情况下，数组变为关联的。所有 PHP 数组都是某种关联数组，并以哈希表的形式实现。

# html - MTurk API 请求中的 xml 错误

> ID：15614567
> 
> 赞同：1
> 
> 时间：2013-03-25T12:08:26.940
> 
> 标签：html, xml, r, mechanicalturk

我正在尝试通过 API 使用 R 创建一个 Mechanical Turk Hit。我想使用底层 html 文件创建 HIT，因此在我的代码中使用 GenerateHTMLQuestion 命令。据我了解（我是初学者），此命令将 html 文件转换为 XML 文件。不幸的是，该命令总是导致以下错误。

错误：1：仅在文档开头允许 XML 声明 2：文档末尾有额外内容

html代码如下：

```
 <h3>Find the Website Address for this Retailer</h3>
    <ul>
        <li>For this retailer below, enter the website address for the official website of the retailer</li>
        <li>Include the full address, e.g. http://www.thecheesecakefactory.com</li>
        <li>Do not include URLs to city guides and listings like Citysearch.</li>
    </ul>
    </div>
    <p>Restaurant Name: <b>Teststrasse</b></p>
    <p>Address: <b>1</b></p>
    <p>Phone Number: <b>651351069</b></p>
    <p>Website Address:</p>
    <p><input type="text" name="Q1Url" id="Q1Url" size="100" /></p>
    <p><style type="text/css">
    <!--
    .highlight-box { border:solid 0px #98BE10; background:#FCF9CE; color:#222222; padding:4px; text-align:left; font-size: smaller;}
    -->

</style></p> 
```

我将非常感谢任何帮助！

亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:03:27.540

我没有直接使用html问题，但看起来你的html代码必须是有效的html5。（更多信息见[mturk 文档](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkAPI/ApiReference_HTMLQuestionArticle.html)。）

从文档中，turk 不会将您的 html 转换为 xml，而是将您的 html 加载到 iframe 中。所以 html 必须是一个完整的、有效的 html 页面。

# c++ - AppendMenu() 字体更改，C++

> ID：15614572
> 
> 赞同：1
> 
> 时间：2013-03-25T12:08:46.040
> 
> 标签：c++, winapi, fonts

我用 MinGW 编译器开发了一个 c++ 应用程序。我更改了 CreateWindow() 函数的默认字体，如下所示：

```
HFONT font;
font = CreateFont(15, 0, 0, 0, FW_NORMAL, FALSE, FALSE, FALSE, DEFAULT_CHARSET, 0, 0, 0, 0, "Tahoma");

HWND btn;
btn = CreateWindowEx(BS_PUSHBUTTON, "BUTTON", "Title",
            WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON,
            0, 0, 0, 0,
            hwnd,
            (HMENU)ID_BUTTON,
            GetModuleHandle(NULL),
            0);
SendMessage(btn, WM_SETFONT, (WPARAM) font, TRUE); 
```

但我创建了菜单：

```
HMENU hMenu, hSubMenu;
hMenu = CreateMenu();
hSubMenu = CreatePopupMenu();
AppendMenuW(hSubMenu, MF_STRING, ID_FILE_OPEN_BTN, "Open" );
AppendMenuW(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu,  "File" ); 
```

但我不知道如何更改 AppendMenuW() 中的字体，有人可以帮我吗？

# python - nodejs 给出错误 Error initializing V8 on cent os

> ID：15614574
> 
> 赞同：0
> 
> 时间：2013-03-25T12:08:52.177
> 
> 标签：python, node.js, openstack, openstack-horizon

我正在尝试在我的系统上运行 openstack Horizo​​n。当我尝试连接到地平线时，它会出错

```
FATAL ERROR: v8::Debug::SetDebugMessageDispatchHandler Error initializing V8 
```

当我签入由于`nodejs`问题而给出的代码时。

我还在网上搜索并找到了一些解决方案，例如内存泄漏或其他解决方案，但这对我不起作用。我给虚拟内存无限的内存。

```
[test@localhost ~]# ulimit -a
core file size          (blocks, -c) 0
data seg size           (kbytes, -d) unlimited
scheduling priority             (-e) 0
file size               (blocks, -f) unlimited
pending signals                 (-i) 62849
max locked memory       (kbytes, -l) 64
max memory size         (kbytes, -m) unlimited
open files                      (-n) 1024
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
real-time priority              (-r) 0
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 1024
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

我检查[了在 Gentoo AMD64 上初始化 V8 的 NodeJS 错误，](https://stackoverflow.com/questions/8655682/nodejs-error-initializing-v8-on-gentoo-amd64)但这也无济于事。:(。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T22:57:02.487

我的猜测是，因为您在 redhat 构建中使用它，所以没有 node.js 包。

我知道有一个计划可以在 redhat 中禁用对 node.js 的需求。

但我不确定这是否实现了。

继续的一个选项是从第三方存储库安装 node.js。或者构建自己的包。

第三方示例：

```
yum localinstall --nogpgcheck http://nodejs.tchol.org/repocfg/fedora/nodejs-stable-release.noarch.rpm
yum -y install nodejs nodejs-compat-symlinks
systemctl restart httpd.service 
```

# intellij-idea - intellij idea logcat 颜色

> ID：15614575
> 
> 赞同：3
> 
> 时间：2013-03-25T12:08:53.767
> 
> 标签：intellij-idea, logcat

Intellij Idea 中是否有针对 logcat 颜色缺失匹配的修复。它应该根据日志级别着色，但它会混合它们。我使用的是 12.0.4 版本。还有截图：[1] [http://imagebin.org/251551](http://imagebin.org/251551) "image"。我正在使用 Ubuntu 12.10 和 Oracle JDK java 版本“1.6.0_35”。

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:56:52.557

我认为`NobodyElse`意味着这条路

```
File > Settings > [IDE Settings] Editor > Color & Fonts > Android logcat 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:17:41.007

下面是解决方法，依次点击：

> 文件 > 设置 > [IDE 设置] 编辑器 > 颜色和字体 > 控制台颜色

您将看到选项，例如

> 控制台标准输出
> 
> 控制台错误输出
> 
> ETC...

然后右键单击下面的图标以自定义您喜欢的颜色:) ![在此处输入图像描述](../Images/67a866de792919130a96eca4245b269e.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T10:15:12.473

找到了答案：[http](http://devnet.jetbrains.com/message/5483068#5483068) ://devnet.jetbrains.com/message/5483068#5483068 这显然是一个错误。我已经举报了。

# windows - 使用 wget 并获得与使用浏览器时不同的结果

> ID：15614576
> 
> 赞同：0
> 
> 时间：2013-03-25T12:08:57.680
> 
> 标签：windows, http, windows-8, httprequest, wget

我在 Windows 8 中使用 wget for windows (gnuwin32 wget-1.11.4-1) 并将其用于名为 kayako 的帮助台工具，告诉它从电子邮件队列中进行轮询。命令行如下所示：

```
wget.exe -O null --timeout 25 http://xxx.kayako.com/cron/index.php?/Parser/ParserMinute/POP3IMAP 
```

我知道在我的特定情况下，当在上面的命令行中使用带有 url 的浏览器时，大约需要 20 秒才能收到来自服务器的响应。但是，当使用该命令时，它几乎立即返回。这是输出的摘录：

> 正在连接到 xxx.kayako.com[xxx.xxx.xxx.xxx]:80... 已连接。HTTP 请求已发送，等待响应... 200 OK 长度：未指定 [text/html]

我想知道这两种情况有什么区别，以及如何让 wget 以与计算机相同的方式运行（我知道不是因为 kayako 没有从电子邮件队列中轮询）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:16:38.937

有许多潜在的变量，但 Web 服务器最常见的区别之一是基于您报告的用户代理字符串。默认情况下，wget 会将自己真实地标识为 wget。如果这是一个问题，您可以使用该`--user-agent=`选项来更改用户代理字符串。

例如，您可以将 64 位 Windows 上的 Firefox 标识为`--user-agent="Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101 Firefox/19.0"`.

# git - git commit -a for git add 的等价物是什么

> ID：15614581
> 
> 赞同：2
> 
> 时间：2013-03-25T12:09:24.150
> 
> 标签：git

`git commit -a`自动暂存所有修改过的文件：

```
-a
--all

     Tell the command to automatically stage files that have been modified
     and deleted, but new files you have not told git about are not affected. 
```

相当于`-a`什么`git add`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:11:19.360

相当于`git add -u`

# php - 使用javascript后，文本框值从页面和打印窗口中消失了吗？

> ID：15614587
> 
> 赞同：0
> 
> 时间：2013-03-25T12:09:56.973
> 
> 标签：php, javascript, html

我有代码在单击按钮打印窗口打开后打印选定的 div 区域但问题是当我在文本框中输入内容然后单击按钮时文本框值从页面中消失并且文本框值也没有出现在打印中窗户？

```
<script>
function printDiv(divName) {
var printContents = document.getElementById(divName).innerHTML;
var originalContents = document.body.innerHTML;
document.body.innerHTML = printContents;
window.print();
document.body.innerHTML = originalContents;
}
</script>

<div id="printableArea">
<input type="text" >
</div>
<input type="button" onclick="printDiv('printableArea')" value="print a div!" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:27:09.587

I have altered your code to retain the textbox value:

```
<html>
<head>
<script>
function printDiv(divName) {
var printContents = document.getElementById(divName).innerHTML;
var originalContents = document.body.innerHTML;
var text=document.getElementById("t1").value;
document.body.innerHTML = printContents;
window.print();
document.body.innerHTML = originalContents;
document.getElementById("t1").value=text;
}
</script>
</head>
<body>
<div id="printableArea">
<input type="text" id="t1">
</div>
<input type="button" onclick="printDiv('printableArea')" value="print a div!" /> 
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:29:04.090

```
function printDiv(divName) {
    var inpText = document.getElementsByTagName("input")[0].value;
    var printContents = document.getElementById(divName).innerHTML;
    var originalContents = document.body.innerHTML;
    document.body.innerHTML = printContents;
    document.getElementsByTagName("input")[0].value = inpText;
    window.print();
    document.body.innerHTML = originalContents;
    document.getElementsByTagName("input")[0].value = inpText;
} 
```

# html - 我想在每个框中显示 16 个框我想显示三个图像

> ID：15614589
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:09:57.940
> 
> 标签：html, css, web-applications

我想在每个框中显示 16 个框，我想显示三个图像。

例如：

```
<tr>
    <td style="width:auto; padding:15px;">
        <img src="/static/images/seo1.jpg" >
    </td>
    <td style="width:300px; padding:15px;">
        <img src="/static/images/seo1.jpg" >
    </td>
    <td style="width:300px; padding:15px;">
        <img src="/static/images/seo1.jpg" >
    </td>
    <td style="width:300px; padding:15px;">
        <img src="/static/images/seo1.jpg" >
    </td>
</tr> 
```

到目前为止，我有一张 4x4 的表格，上面只显示了单行。

现在我将如何进行以实现这一目标.. 将表是此类问题的不错选择....

我想要这个

```
<table cellpadding="0" cellspacing="0" border="0">
    <tr>
       <td style="width:auto;">

            <img src="/static/images/seo1.jpg" height="50" width="50">    
        </td>

        <td style="width:auto;">
            <img src="/static/images/seo1.jpg" height="50" width="50">    
        </td>
    </tr>

    <tr>
        <td colspan="2"  style="width:auto;">

            <img src="/static/images/seo1.jpg" height="50" width="100">
        </td>
    </tr 
```

但是如果我把这张桌子放在主桌子上，它的整个结构就会迷失方向……我想要这种类型的结构放在 16 个单独的盒子里……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:14:06.533

请问您为什么使用表格而不是DIV？但是，只需复制您的 img 代码，这就是您在每个框中显示 3 张图像的方式。

```
<tr>
    <td style="width:auto; padding:15px;">
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
    </td>
    <td style="width:300px; padding:15px;">
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
    </td>
    <td style="width:300px; padding:15px;">
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
    </td>
    <td style="width:300px; padding:15px;">
       <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
        <img src="/static/images/seo1.jpg" >
    </td>
</tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:19:32.653

现在谁来创造**16 个盒子？？**

如果你知道 jQuery，它会更简单。

```
<div id="main"></div> 
```

* * *

```
//As I always avoid using table's
for(var i=0;i<4;i++){
    $('#main').append('<div></div>');
    for(var j=0;j<4;j++){
        $('#main>div').eq(i).append('<div></div>');
    }
} 
```

然后使用CSS：

```
#main>div>div{float:left;/*some width and height values here*/} 
```

**[工作小提琴](http://jsbin.com/ejoxoz/3/edit)**

# javascript - 在多个地方使用 javascript 更改 CSS 元素以获得相同的元素 ID

> ID：15614592
> 
> 赞同：0
> 
> 时间：2013-03-25T12:10:19.390
> 
> 标签：javascript, css, html

好的，通过一些教程和这个网站，我对 html/javascript/css 很陌生。我试图显示一个按钮，当单击该按钮时，我使用 css 覆盖图像我调用 javascript 函数将一些信息发送到我的服务器，并用新按钮和图像覆盖替换单击的按钮。这是负责此的代码片段（我基本上只是来回切换按钮的可见性）：

```
<style type = 'text/css'>
input.btn_follow {
position: absolute;    
right: 2px;
top: 2px;
background-image: url(http://icons.iconarchive.com/icons/icojam/onebit/48/star-100-icon.png); /* 16px x 16px */
 }

input.btn_unfollow {
visibility: hidden;
position: absolute;    
right: 2px;
top: 2px;
background-image: url(http://gologic.com/imagesOld/checkmark%20-%20small.png); 
}

</style>
</head><body>
<script type='text/javascript'>
  function follow(series, status) {

  var xhReq = new XMLHttpRequest();
  var request = "follow.php?series="+series+"&status="+status
  xhReq.open("GET", request, false);
  xhReq.send(null);
  var response = xhReq.responseText;
  var IDyes = "follow_"+series
  var IDno =  "unfollow_"+series
 if (response == 1){

  document.getElementById(IDyes).style.visibility='hidden'
  document.getElementById(IDno).style.visibility='visible'
}
else if (response == 0){
  document.getElementById(IDyes).style.visibility='visible'
  document.getElementById(IDno).style.visibility='hidden'
 }
   else if (response == -1){
    alert("you must first login to use the follow request"); // now following show
 } 
}
</script> 
```

所以所有这些都有效，但是对于某些元素 ID，它们在同一个 html 页面上出现多次。如果是这种情况，则只有元素的第一个实例的可见性会发生变化，其余的则不会。如果他们有相同的 id 为什么会这样？我怎样才能解决这个问题？这是在我的网页上查看此操作的链接，以使这一点更清楚[http://ec2-54-234-192-222.compute-1.amazonaws.com/home.php](http://ec2-54-234-192-222.compute-1.amazonaws.com/home.php)（有问题的按钮是星）任何帮助将不胜感激（如果有一种更清洁的方法来刮除我已经开始像意大利面一样的我愿意接受的东西！）谢谢-brendan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:16:51.557

因此，在上面的评论中，ID 应该每页只出现一次！感谢@Jeff shaver 澄清了这一点，我将此归咎于新手

# java - 序列计数即假设 aabbbaaccd 是字符串输出应该是 a=2,b=3,a=2,c=2,d=1

> ID：15614593
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:10:22.183
> 
> 标签：java, string

正如我所尝试的那样，它给出了 ArrayIndexOutOfBounds Ecxeption 并且不打印最后一个字符请帮助我在我的代码中找到错误。或者是否有任何替代

```
public static void sequenceCount(String s) {
    int counter;
    int i=0;
    char c;
    char[] arr = s.toCharArray();

    while(i<arr.length){
     counter=0;
      c = arr[i];
    while(c==arr[i]){
        counter++;
        i++;
        }
     System.out.println("letter"+" "+c+":"+"number of times"+counter);
    }
   } 
```

由于我是 java 新手，我的代码可能效率低下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:12:04.633

您的内部循环不受数组长度的限制。尝试：

```
while(i < arr.length && c==arr[i]){
    counter++;
    i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:23:13.183

这有效 - 您需要确保您的内部循环不会超出字符串的末尾，并且您还需要始终捕获最后一个字母：

```
public static void sequenceCount(String s) {
    char[] arr = s.toCharArray();
    int i = 0, n = arr.length;

    while (i < n) {
        char c = arr[i];
        int count = 0;
        do {
            ++i; ++count;
        } while (i < n && arr[i] == c);
        System.out.println("letter "+ c +":"+"number of times " + count);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T13:06:39.207

我的方法是使用两个`for`循环。

第一个`for`循环将运行一个循环，其十进制等效于 A 到 Z。

第二个`for`循环将运行一个遍历整个字符数组/字符串的循环（我更喜欢字符串而不是 char 数组）并检查该索引处的给定值是否等于第一个运行的值`for`环形。如果它们相等，则加一计数。打印。

不要忘记在每次运行后重置您的计数器。

可以在这里找到类似的主题：[Counting letters in a string using two for-loops](https://stackoverflow.com/questions/15532866/counting-letters-in-a-string-using-two-for-loops)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-20T16:48:52.963

虽然这里的许多答案都是 O(n^2)，但我尝试使用递归在 O(n) 时间内完成。这是从我已经拥有的现有代码中修改的，所以我知道该方法返回一个 int，但我不使用它（它是从复制的代码中遗留下来的 - 按照你认为合适的方式修复它）

```
public class CountCharSeqRecursive {
    private String test = "AAABBA";  // (3)A(2)B(1)A
    private StringBuilder runningString = new StringBuilder();

    public static void main(String[] args) {
       CountCharSeqRecursive t = new CountCharSeqRecursive();
       System.out.println(t.getEncryptedValue(t.test));
    }

    public String getEncryptedValue(String seq){
        int startIndex=0;
        this.createCounterSeq(seq.charAt(startIndex), seq, startIndex);
        return runningString.toString();
    }

    private int createCounterSeq(char prev, String sequence, int currentIndex){
       return createCounterSeq(prev, sequence, currentIndex, 0);
    }

    private int createCounterSeq(char prev, String sequence, int currentIndex, int count){
        if(currentIndex<sequence.length()){
            char current = sequence.charAt(currentIndex);
          if((prev^current) < 1){
               ++count;
           }else {
                this.addToSequence(count, prev);
                count = 1;
            }
            return count += createCounterSeq(current, sequence, ++currentIndex, count);
        }
        this.addToSequence(count, prev);
        return count;
    }

    private void addToSequence(int count, char ch){
        runningString.append("("+count+")").append(ch);
    }
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-06T21:35:13.940

我使用 HashSet 的解决方案适用于所有非空字符串的情况。

```
public static void main(String[] args) {
    // TODO Auto-generated method stub
    HashSet<Character> set = new HashSet<Character>();
    String input = "aabbcdeaab";
    set.add(input.charAt(0));
    int count = 1;
    StringBuilder output = new StringBuilder("");
    for(int i=1;i<input.length();i++) {
        char next = input.charAt(i);
        if(set.contains(next)) {
            count++;
        }else {
            char prev = input.charAt(i-1);
            output.append(Character.toString(prev) + count );
            set.remove(prev);
            set.add(next);
            count=1;
        }
    }
    output.append(Character.toString(input.charAt(input.length()-1)) + count );
    System.out.println(output.toString());
} 
```

# c# - 组合框 SelectedItem 无法正常工作

> ID：15614596
> 
> 赞同：3
> 
> 时间：2013-03-25T12:10:24.670
> 
> 标签：c#, winforms, combobox

我正在尝试从组合框中检索选定的项目，但我无法让它工作。

```
Form1 form = new Form1();
string cpuCount = form.comboBox1.SelectedItem.ToString(); 
```

现在，这没有返回任何东西。但是，如果我在我的 中插入此代码`InitializeComponent()`，它会选择索引 = 3 的项目，并返回该正确的项目。

```
comboBox1.SelectedIndex = 3; 
```

为什么它会这样？如果我现在选择例如索引 = 5 的项目，它仍然会认为所选项目是索引 = 3 的项目。

---------- 我认为我应该扩展以向您展示我的代码的外观。

Form1 - 将所有项目添加到组合框中。

```
public partial class Form1 : Form
{
    Profile profile = new Profile();
    public Form1()
    {
        InitializeComponent();
        Profile profile = new Profile();
        string[] prof = profile.getProfiles();
        foreach (var item in prof)
        {
            comboBox5.Items.Add(Path.GetFileNameWithoutExtension(item));
        }

        int ram = 1024;
        for (int i = 0; i < 7; i++)
        {
            comboBox4.Items.Add(ram + " GB");
            ram = ram * 2;
        }

        int vram = 512;
        string size;
        for (int i = 0; i < 5; i++)
        {
            if(vram > 1000)
            {
                size = " GB";
            }
            else
            {
                size = " MB";
            }
            comboBox2.Items.Add(vram + size);
            vram = vram * 2;
        }

        for (int i = 1; i < 5; i++)
        {
            comboBox1.Items.Add(i * 2);
        }

        for (int i = 0; i < 5; i++)
        {
            comboBox3.Items.Add(i * 2);
        }

        private void button3_Click(object sender, EventArgs e)
        {
            string current = profile.currentProfile();
            profile.saveProfile(current);
        }

    } 
```

所以，button3 是我的“保存”按钮。这是我的“个人资料”课程

```
class Profile
{
    public string folder { get; set; }
    public Profile()
    {
        this.folder = "Profiles";
        if (!File.Exists(folder))
        {
            Directory.CreateDirectory(folder);
            File.Create(folder + "/default.cfg").Close();
        }
    }

    public string[] getProfiles()
    {
        string[] files = Directory.GetFiles(folder);
        return files;
    }

    public void saveProfile(string filename)
    {
        Form1 form = new Form1();
        string cpuCount = "cpuCount=" + form.comboBox1.SelectedItem;
        string RAM = "maxRAM=" + form.comboBox4.SelectedItem;
        string VRAM = "maxVRAM=" + form.comboBox2.SelectedItem;
        string threads = "cpuThreads=" + form.comboBox3.SelectedItem;
        string path = folder + "/" + filename;
        StreamWriter sw = new StreamWriter(path);
        string[] lines = { cpuCount, RAM, VRAM, threads };

        foreach (var item in lines)
        {
            sw.WriteLine(item);
        }

        sw.Close();

    }

    public string currentProfile()
    {
        Form1 form = new Form1();
        string selected = form.comboBox5.SelectedValue + ".cfg".ToString();
        return selected;
    }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:15:44.787

据我所知，您`form.comboBox1.SelectedItem.ToString()`在创建`Form1`. 这意味着`cpuCount`变量在表单创建后立即初始化，到目前为止，您还没有机会用鼠标更改所选项目。

如果要在更改后检索组合框的值，可以使用[`SelectedIndexChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectedindexchanged.aspx)事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:16:42.517

问题是您的`ComboBox`. 您创建了表单，然后在没有先前的用户交互的情况下，您想要`SelectedItem`在那个时刻获得 null 。

当您创建 ComboBox 控件并用项目填充它时，`SelectedItem`属性将一直存在，`null`直到您以编程方式设置它（通过使用例如`comboBox1.SelectedIndex = 3`）或通过用户与控件的交互。在这种情况下，您没有执行上述任何操作，这就是您收到上述错误的原因。

**编辑**基于编辑的问题像这样更改您的代码：首先更改`saveProfile`方法，以便您可以将写入的四个字符串传递到文本文件中。请注意，您也可以传递表单的引用，但我不建议您这样做。所以改变这样的方法：

```
public void saveProfile(string filename, string cpuCount, string RAM , string VRAM , string threads)
    {
        string path = folder + "/" + filename;
        using(StreamWriter sw = new StreamWriter(path)) 
        {
             sw.WriteLine("cpuCount=" + cpuCount);
             sw.WriteLine("maxRAM=" + RAM );
             sw.WriteLine("maxVRAM=" + VRAM );
             sw.WriteLine("cpuThreads=" + threads);
        }        
    } 
```

然后从 button3 Click 事件处理程序中调用它，如下所示：

```
private void button3_Click(object sender, EventArgs e)
{
            string current = profile.currentProfile();
            string cpuCount = this.comboBox1.SelectedItem.ToString();
            string RAM =  this.comboBox4.SelectedItem.ToString();
            string VRAM = this.comboBox2.SelectedItem.ToString();
            string threads = this.comboBox3.SelectedItem().ToString();
            profile.saveProfile(current, cpuCount, RAM, VRAM, threads);
} 
```

或者，

```
private void button3_Click(object sender, EventArgs e)
{
            string current = profile.currentProfile();
            profile.saveProfile(current, this.comboBox1.SelectedItem.ToString(), this.comboBox4.SelectedItem.ToString(), this.comboBox2.SelectedItem.ToString(), this.comboBox3.SelectedItem().ToString());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T12:35:51.370

首先，添加一个 Form_Load 事件并将您的代码放入处理程序中。（使用构造函数进行属性初始化和其他变量初始化）

```
private void Form1_Load(object sender, EventArgs e)
{
this.comboBox1.SelectedItem= 5; // This will set the combo box to index 5
string cpuCount = this.comboBox1.SelectedText; // This will get the text of the selected item
} 
```

所以你在 `cpuCount`变量中的索引 5 处获得 item 的值。

该`selected`子句在您选择某些内容后为您提供值，默认情况下（当您运行您的应用程序时）comoboBox 中没有选择任何内容，因此，它将值显示为 null，在选择项目后您可以使用组合框的 selectedItem，selectedIndex 、 selectedText 和 selectedValue 属性。

您还可以使用数据绑定在组合框中显示项目，在我看来，这比手动添加项目更好。

数据绑定您可以使用的组合框，

```
// Bind your combobox to a datasource, datasource can be a from a database table, List, Dataset, etc..

 IDictionary<int, string> comboDictionary = new Dictionary<int, string>();
            comboDictionary.Add(1, "first");
            comboDictionary.Add(2, "second");
            comboDictionary.Add(3, "third");
            comboBox1.DataSource = comboDictionary;
            comboBox1.DisplayMember = "Key";
            comboBox1.ValueMember = "Value";

// 
```

现在您可以在这里使用combobox1.SelectedIndex 来浏览数据源中的项目集合:) 当您使用combobox1.SelectedValue 时，它​​会根据您的键为您提供值。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:17:49.407

您的 ComoboBox 中没有项目。所以它不会正确返回。制作表单对象后，您正在访问组合框选定值权限。

如果它 comboBox 有项目，那么什么都没有被选择。默认情况下，在组合框中没有选择任何内容。你需要设置它。用这个。它返回什么？设置 comboBox.SelectedIndex 然后获取 selectedItem。

```
int selectedIndex = form.comboBox1.SelectedIndex; 
```

尝试这个。在 ComboBox 中添加一些项目，然后获取 selectedItem。

```
Form1 form = new Form1();
form.comboBox1.Add("Item 1");
form.comboBox1.Add("Item 2");
form.comboBox1.Add("Item 3");
form.comboBox1.SelectedIndex = 1;
string cpuCount = form.comboBox1.SelectedItem.ToString(); 
```

# php - PHP文件上传 - 没有文件上传错误

> ID：15614598
> 
> 赞同：1
> 
> 时间：2013-03-25T12:10:33.327
> 
> 标签：php, html, forms, twitter-bootstrap

我创建了一个图像上传表单，使用 twitter 引导程序和 jansy 扩展，使用下一个代码部分：

```
 <form action="fileName.php" method="post" enctype="multipart/form-data">
         <div class="fileupload fileupload-new" data-provides="fileupload">
          <div class="fileupload-preview thumbnail" style="width: 200px; height: 150px;"></div>
          <div>
            <span class="btn btn-file"><span class="fileupload-new">Select image</span><span class="fileupload-exists">Change</span><input type="file" name="pic" id="pic"/></span>
            <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
            <button type="submit" class="btn">Upload</button>
          </div>
      </form> 
```

在 fileName.php 上执行以下代码：

```
print_r($_FILES);
if($_FILES["pic"]["error"] > 0){ /*image uploading has failed*/
        echo "Error occured ".$_FILES["pic"]["error"];  
    }
else {
    echo "image was uploaded successfully";
} 
```

并返回下一条消息：

```
Array ( [pic] => Array ( [name] => [type] => [tmp_name] => [error] => 4 [size] => 0 ) ) Error occured 4 
```

文件怎么没有上传？我怎么能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:23:24.977

错误 4 表示`UPLOAD_ERR_NO_FILE`，因此没有发布任何文件。我会说问题出在您的 javascript 代码或您使用的组件中。是否抛出任何 JavaScript 错误？

尝试一个简单的

```
<form action="fileName.php" method="post" enctype="multipart/form-data">
    <input type="file" name="pic"> 
</form> 
```

看看它是否在没有任何 JavaScript 插件的情况下工作。

# compiler-construction - 英特尔至强融核在没有昂贵的英特尔编译器的情况下是否可用？

> ID：15614603
> 
> 赞同：18
> 
> 时间：2013-03-25T12:10:54.313
> 
> 标签：compiler-construction, parallel-processing, hardware, intel, intel-mic

可用作并行平台的[英特尔至强融核协处理器](http://www.intel.com/content/www/us/en/high-performance-computing/high-performance-xeon-phi-coprocessor-brief.html)是否需要[英特尔 Composer XE](http://software.intel.com/en-us/intel-composer-xe-purchase/)编译器的许可，或者是否有替代编译器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T21:16:14.757

看看这个链接，英特尔网站声称很少有编译器可以与它们一起使用，但我仍然无法得到任何工作，这是一个工作过程。祝你好运

[http://software.intel.com/en-us/articles/intel-and-third-party-tools-and-libraries-available-with-support-for-intelr-xeon-phitm](http://software.intel.com/en-us/articles/intel-and-third-party-tools-and-libraries-available-with-support-for-intelr-xeon-phitm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T14:02:22.890

我可以在这里列出几个选项来使用/获取英特尔编译器...如您所知，gcc 不具备为该平台矢量化代码的能力。

1.  英特尔 Linux* 编译器的非商业许可提供与支持英特尔至强融核协处理器的英特尔开发工具相同的商业/评估/学术许可，前提是提出请求的个人满足许可要求。[http://software.intel.com/en-us/non-commercial-software-development](http://software.intel.com/en-us/non-commercial-software-development)。

2.  对于可能需要许可证以支持课程/培训发展的学术机构，可以获得 1 年免费许可证。您可以在[http://software.intel.com/academic](http://software.intel.com/academic) > 软件工具（“请求许可证”按钮）中找到更多信息

3.  可以获得 30 天的 eval 许可证——如果你去英特尔编译器页面，有下载 30 天免费试用版的链接（在右上角）

# iphone - Xcode 4.6 构建设置中的问题

> ID：15614604
> 
> 赞同：1
> 
> 时间：2013-03-25T12:10:54.920
> 
> 标签：iphone, ios, xcode4.6

在我的应用程序中，我更改了配置文件并更改了内部构建设置->任何 SDK 和任何 ios SDK 的代码签名标识。在哪里发布和分发它已更新但在 Debug 和 SDK 中未更新。所以构建总是失败。请帮我。

![下图给出了一些想法](../Images/31f36e37e3577b05962e59261ce4969e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:36:36.247

您不应将分发配置文件用于调试和发布模式。这旨在上传到 App Store。相反，从您获得分发配置文件的同一位置下载开发人员配置文件。使用它们。

# qt - 如何检查 Qt 中的优化级别？

> ID：15614612
> 
> 赞同：3
> 
> 时间：2013-03-25T12:11:11.483
> 
> 标签：qt

我[曾经遇到过](https://stackoverflow.com/questions/6276225/calling-functions-in-qt-from-third-party-dll-works-in-debug-mode-crashes-in-rel)一个旧的遗留 DLL 的问题，它导致发布时崩溃，但在调试中工作。降低优化级别解决了这个问题。如果我没记错的话，我当时使用的是 Qt 4.7。

现在，升级到 Qt 5.0.1 后，同样的崩溃再次发生，但现在在调试和发布中。在新的Qt中找到了设置优化级别的方法，但是好像没有任何效果：

```
QMAKE_CXXFLAGS_RELEASE -= -O
QMAKE_CXXFLAGS_RELEASE -= -O1
QMAKE_CXXFLAGS_RELEASE -= -O2
QMAKE_CXXFLAGS_RELEASE -= -O3

QMAKE_CXXFLAGS_RELEASE += -O 
```

同样对于

```
QMAKE_CXXFLAGS_DEBUG 
```

如何确保这些设置有效？我需要知道问题是否与 Qt 4.7 中的问题相同，或者完全不相关。崩溃恰好发生在从 DLL 调用某个函数时，该函数在经过高度优化的 Qt 4.7 版本中导致该问题。

[我什至不能轻易降级到 Qt 4.7，因为 SDK 不再可供下载，所以我需要一个非常旧且精确的 mingw 版本，我知道微小的版本差异会导致重大问题。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:41:14.393

当您 qmake 应用程序时，您可以清楚地看到应用了哪个优化级别。（在控制台输出日志中）

# vb.net - 从 xsd 生成 vb 类。xmldsig#:SignatureType

> ID：15614613
> 
> 赞同：1
> 
> 时间：2013-03-25T12:11:16.877
> 
> 标签：vb.net, class, xsd

我正在尝试使用 xsd 工具从 xsd 文件生成 vb.net 类，但收到以下消息：

架构验证警告：复杂类型' [http://www.w3.org/2000/09/xmldsig#:SignatureType](http://www.w3.org/2000/09/xmldsig#:SignatureType)

警告：无法生成类，因为没有找到具有复杂类型的顶级元素。

谢谢！戴维斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T17:00:45.060

迟到总比没有好......你必须传递2个参数。您的文件和[http://www.w3.org/TR/xmldsig-core/xmldsig-core-schema.xsd](http://www.w3.org/TR/xmldsig-core/xmldsig-core-schema.xsd)参考。由于 XSD.exe 只接受 1 个输入参数，因此您必须将其传递给 .Xsd 路径。

所以，你必须这样做：

1.  下载 xmldsig-core-schema.xsd 模式。
2.  运行这个：

    "C:\Program Files\Microsoft SDKs\Windows\vXXXX\bin\xsd.exe" [path_your_folder]\your_file.xsd [path_to_your_folder]\xmldsig-core-schema.xsd /c /n:mi_new_class_file_name /l:VB

新文件“mi_new_class_file_name.vb”现在可能位于您的“C:\Program Files\Microsoft SDKs\Windows\vXXXX\bin”文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:54:59.560

我对 XSD.EXE 有类似的问题，它适用于一些简单的 XSD，但任何复杂的东西 - 一堆各种错误，就是这样。更糟糕的是，我对 XSD/WSDL 相当熟悉。根据我的经验，我有几个 WSDL，每个都导入 2 到 5 个外部 XSD。

这是我为从 XSD 获取类所做的工作：

- 下载并安装免费工具[XSD2CODE](http://xsd2code.codeplex.com/)

- 在命令行中运行：

`"<PATH to Xsd2Code executable>\Xsd2Code.exe" YourXSDFile.xsd /l vb`

即使 XSD.EXE 无法为我生成类。祝你好运！

# c - C90 不允许在 printf 中使用 %lf，为什么？

> ID：15614620
> 
> 赞同：12
> 
> 时间：2013-03-25T12:11:25.547
> 
> 标签：c

我是一个初学者编程学生，只是想了解这背后的原因。

当我使用此代码时：

```
#include <stdio.h>
int main()
{
 double pi = 3.1415926535897932;
 printf("%lf",pi);
 return 0;
} 
```

编译器给出这个警告。ISO C90 不支持 '%lf' gnu_printf 格式 [-Wformat]

我在 ubuntu 终端中使用 gcc 编译器 (-o -Wall -ansi -pedantic-errors)

这背后的原因是什么？我搜索了网页，发现在 C99 中允许使用这种用法。为什么 C90 不允许在 printf 中使用 %lf？我可以使用 %.16lf 或 %.16f 并以相同的精度打印，那么在 C90 中导致 %lf 不好的问题是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T12:20:51.377

根据 C90 文档：

> 可选的 l (ell) 指定后面的 d 、 i 、 o 、 u 、 x 或 X 转换说明符适用于 long int 或 unsigned long int 参数；一个可选的 l 指定后面的 n 转换说明符应用于指向 long int 参数的指针；或一个可选的 L 指定后面的 e 、 E 、 f 、 g 或 G 转换说明符适用于**long double**参数。**如果 h 、 l 或 L 与任何其他转换说明符一起出现，则行为未定义。**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T12:23:48.813

C 是一种不断发展的语言。每个新版本的 C 标准都会添加新的特性和行为。

C89 说`l`之前`f`会导致未定义的行为。C90 可能也是这么说的。

另一方面，C99 说`l`之前`f`没有效果。

# mysql - 多个 SELECT 语句在 MySQL 的存储过程中不起作用

> ID：15614621
> 
> 赞同：1
> 
> 时间：2013-03-25T12:11:33.120
> 
> 标签：mysql, sql, stored-procedures

我`stored-procedures`有`SELECT`三个数据库列，但是当我把它作为一个列时， `SELECT`当它作为三个不同的`SELECT`语句工作时它不起作用。

**工作查询**

```
 BEGIN

            SET child = chid; 
            myloop: loop
            IF x = loop_val  THEN
                LEAVE myloop;
            END IF;      

            SELECT IFNULL(parent_pageid,0) into parent FROM page_content pc WHERE pc.pageid = child;
            SELECT sef_url into sef_string FROM page_content pc WHERE pc.pageid = child;         

            SELECT  menu_heading into menu_string FROM page_content pc WHERE pc.pageid = child;

        END 
```

当`SELECT`如下它不工作

```
SELECT IFNULL(parent_pageid,0) into parent, sef_url into sef_string, menu_heading into menu_string FROM page_content pc WHERE pc.pageid = child; 
```

单一的`SELECT`陈述有什么问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:30:04.333

您必须列出所有选定的列，然后列出所有变量，如下所示：

```
SELECT
    IFNULL(parent_pageid,0),
    sef_url,
    menu_heading
INTO
    parent,
    sef_string,
    menu_string 
FROM page_content pc 
WHERE pc.pageid = child; 
```

# css - 主 div 不会结合粘性页脚缩放到内容

> ID：15614627
> 
> 赞同：0
> 
> 时间：2013-03-25T12:11:55.227
> 
> 标签：css, overflow, footer, scaling, sticky

有人可以帮我吗？[在此处查看页面](http://www.pencilpoint.nl/_klanten/bollandhuis/buitenland.htm)

我的#mainvervolg div 出现问题，无法缩放到内容。它有一个最小高度和一个溢出：auto; 因为我使用的粘性页脚。我不知道如何解决非缩放问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:23:28.220

要解决此问题，您必须将 div #contentCONTAINER 移出 div #slidercontainer 并移入 #mainvervolg，并将 #footerwrap div 移入 #mainvervolg。这将允许文档正确流动。然后更改 css 以匹配以下内容：

```
#mainvervolg {
    height: 100%;
    margin-left: auto;
    margin-right: auto;
    overflow: auto;
}
#slidercontainer {
    position: relative;
    width: 1000px;
    height: 275px;
    z-index: 1;
    margin-left: auto;
    margin-right: auto;

}
#contentCONTAINER {
    position: relative;
    width: 1000px;
    overflow: auto;
    z-index: 100;
    top: -50px;
    margin: 0 auto;
} 
```

显着的变化是从主画布上移除宽度、位置、最小高度和填充底部。将 contentCONTAINER 的顶部更改为 -50px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:10:08.883

好的，在这种情况下，我想我明白了：我现在唯一改变的是从 contentCONTAINER 中删除 'overflow:auto'，它现在似乎可以工作了。如我错了请纠正我。

# php - 从php中的输入字段向现有表添加列

> ID：15614630
> 
> 赞同：-3
> 
> 时间：2013-03-25T12:12:02.120
> 
> 标签：php, mysql, pdo

我使用 pdo 和 mysql 并且我已经知道如何将列添加到现有表中，但是当我尝试使用输入字段中的值时，变量 $.... 的名称被添加为列。
我必须将输入字段中的值添加为列的代码如下：

```
public function insertAlterTable($colName)
{
    $this->pdo = $this->connectMySql();
    $query = 'ALTER TABLE nbs_events ADD $colName CHAR(5) NULL DEFAULT "nee"';
    $stmt = $this->pdo->prepare($query);
    if(!$stmt->execute()){
        return false;
    }
    $this->pdo = null;
    return true;
} 
```

此代码包含在 try catch 块中。
也是在一个班级里。
在首页，我使用以下代码：

```
insertAlterTable($_POST['colname']); 
```

如何将输入字段中的值`colname`作为列添加到现有表中。
请帮忙。

**我已按如下方式更新了代码，因此它对我有用：**

```
public function insertAlterTable($colName)
{ 
    $colName = mysql_real_escape_string($colName);
    $this->pdo = $this->connectMySql();
    $query = "ALTER TABLE nbs_events ADD $colName CHAR(5) NULL DEFAULT \"nee\"";
    $stmt = $this->pdo->prepare($query);
    if(!$stmt->execute()){
        return false;
    }
    $this->pdo = null;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:14:06.530

在 PHP 中，当使用单引号时，变量不会被扩展。

```
 $a = "hello";
 $b = "$a dude";               // $b is now "hello dude"
 $c = '$a dude';               // $c is now "$a dude" 
```

使用双引号或字符串连接就可以了：

```
 $query = "ALTER TABLE nbs_events ADD $colName CHAR(5) NULL DEFAULT \"nee\""; 
```

更多精美手册： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

# java - 在 JPA OneToOne 关系中如何仅插入关系的一侧

> ID：15614635
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:12:10.787
> 
> 标签：java, jpa, ejb-3.0

我想在关系的一侧插入数据

这是我的父实体

```
public class Parent implements Serializable{   

@GeneratedValue(strategy=GenerationType.IDENTITY)   

private int id;   

private String pfirstName;   

private String plastName;   

private int parentAge;     

public int getId() {   
return id;   
}   
public void setId(int id) {   
this.id = id;   
}   
public String getPfirstName() {   
return pfirstName;   
}   
public void setPfirstName(String pfirstName) {   
this.pfirstName = pfirstName;   
}   
public String getPlastName() {   
return plastName;   
}   
public void setPlastName(String plastName) {   
this.plastName = plastName;   
}   
public int getParentAge() {   
return parentAge;   
}   
public void setParentAge(int parentAge) {   
this.parentAge= parentAge;   
}   
} 
```

这是我的子实体

查看plaincopy到剪贴板打印？注意：代码块中的文本内容会自动换行

```
public class Child implements Serializable{   
/**  
 *   
 */  
private static final long serialVersionUID = 1L;   
@Id  
@GeneratedValue(strategy=GenerationType.IDENTITY)   
private int id;   

private String cfirstName;   

private String plastName;   

private int childAge;   

@OneToOne(cascade=CascadeType.ALL,   
fetch=FetchType.EAGER)   
@JoinColumn(name="pId")   
private Parent parent;   

public int getId() {   
return id;   
}   
public void setId(int id) {   
this.id = id;   
}   
public String getCfirstName() {   
return cfirstName;   
}   
public void setCfirstName(String cfirstName) {   
this.cfirstName = cfirstName;   
}   
public String getClastName() {   
return clastName;   
}   
public void setClastName(String clastName) {   
this.clastName = clastName;   
}    
public int getChildAge() {   
return childAge;   
}   
public void setChildAge(int childAge) {   
this.childAge = childAge;   
}   
public Parent getParent() {
return parent;
}
 public void setParent(Parent parent) {
this.parent = parent;
}

} 
```

远程接口实现

```
 @`enter code here`Stateless  
 @Remote(InformationRemote.class)   
 public class Information implements InformationRemote {   

/**  
 * Default constructor.   
 */  
public Information() {   
    // TODO Auto-generated constructor s   
}   
@PersistenceContext(unitName="JPADB")   
private EntityManager em;     

public String save(Child child) throws Exception   
{   
    System.out.println("First it si coming");   
    em.persist(child);   
    return("sucess");   
}   
} 
```

这是我的插入类保存方法

```
public void save1()   
{   
Parent p =new Parent();   
Child c=new Child();   
InformationRemote bean=doLookup();   
System.out.println("new method coming");   
p.setParentAge(1);   
p.setPfirstName("GOL");   
p.setPlastName("JON");   
c.setCfirstName("jj");   
c.setClastName("gg");   
c.setChildAge(1);   
c.setParent(p);   
try  
 {   
 String res=bean.save(c);   
 }   
    catch(Exception e)   
    {   
        System.out.println("this is a exception"+e);   
    }   
 } 
```

当我调用 Save matheod

我的数据库显示结果为

此 Id 中的父表是主键

id pfirstName parentAge plastName

1 戈尔 1 乔恩

子表在这个子表ID是主键，pid是外键，指的是父表ID

id cfirstName childtAge clastName pid

1 jj 1 gg 1

现在我只想插入下面​​的子表

id cfirstName childtAge clastName pid

1 jj 1 gg 1

2 克 2 欧 1

怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:28:14.103

如果我理解正确，您想将孩子添加到现有父母中。所以这很简单。由于父级已经存在，您会获得对它的引用，然后将父级分配给新的子级：

```
public void createChild(String firstName, String lastName, int age, int parentId) {
    Parent parent = entityManager.getReference(Parent.class, parentId);
    Child child = new Child();
    child.setFirstName(firstName);
    child.setLastName(lastName);
    child.setAge(age);
    child.setParent(parent);
    entityManager.persist(child);
} 
```

# java - 转义双引号无法正常工作

> ID：15614636
> 
> 赞同：0
> 
> 时间：2013-03-25T12:12:16.273
> 
> 标签：java, unicode, character-encoding, xml-parsing, escaping

我正在用 Java 编写一个解析器，我正在用 XML dom 编写一个字符串。

这是我的代码

```
String val="\""+val+"\"";
String temp=StringEscapeUtils.escapeXml(val);
node.setTextContent(temp); 
```

然后我正在使用 LSSerializer

```
DOMImplementationLS domImplementation = (DOMImplementationLS)doc.getImplementation();
LSSerializer lsSerializer = domImplementation.createLSSerializer();
String tempString=lsSerializer.writeToString(doc); 
```

并保存到文件中。

现在我的问题是字符串“测试”应该是***“测试”。***但它以***“测试”的形式出现***

似乎 & 是单独转义的。谁能告诉我我的代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:14:11.380

你的字符串被转义了两次。

1.  `"test"`-> `&quot;test&quot;`（`"`转义为`&quot;`）
2.  `&quot;test&quot;`-> `&amp;quot;test&amp;quot;`（`&`转义为`&amp;`）

我被骗相信这条线

```
node.setTextContent(temp); 
```

已经进行了转义，但事实并非如此......

[Node.setTextContent(String) API 文档](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html#setTextContent%28java.lang.String%29)：

> ...同样，在设置时，**也不进行解析，输入字符串被视为纯文本内容**。

但是，[LSSerializer](http://download.java.net/jdk8/docs/api/org/w3c/dom/ls/LSSerializer.html)会：

> 在文档的字符数据中（标记之外），任何不能直接表示的字符都将替换为字符引用。'<' 和 '&' 的出现被预定义的实体 < 和 & 替换。可能不会使用其他预定义的实体（>、' 和 "），除非需要（例如，在诸如 ']]>' 的情况下使用 >）。

因此，无论哪种情况，都无需使用 进行两次转义`StringEscapeUtils.escapeXml(val);`，您可以省略该行，从而导致：

```
String val="\""+val+"\"";
node.setTextContent(val); 
```

或者更简单：

```
node.setTextContent("\""+val+"\""); 
```

或者对我来说可能更好一点（我不喜欢连接字符串）：

```
node.setText(String.format("\"%s\"", val)); 
```

**但是，**我不明白您为什么要`"`转义，因为（在文本节点中）不会破坏 XML 格式....

# android - 使用按钮动态添加新行

> ID：15614638
> 
> 赞同：0
> 
> 时间：2013-03-25T12:12:23.680
> 
> 标签：android, list, listview, baseadapter, android-adapter

当单击按钮时，我试图在列表视图中添加行，但我的应用程序每次都崩溃。这是我的代码：

```
public class MTCRichGraphicsActivity extends Activity {
int ELEMENT_COUNT = 3;
int position=0;
Button bAddView;
String[] elements = new String[ELEMENT_COUNT];

int r =0 ;   

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    bAddView = (Button) findViewById(R.id.bNewEvent);
   final ListView list = (ListView) findViewById(R.id.list3d);
    bAddView.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            switch(v.getId())
            {
            case R.id.bNewEvent :
                for (int i = 0; i< ELEMENT_COUNT; i++) {
                    elements[i] = String.valueOf(i);
                }
                final MyAdapter adapter = new MyAdapter(MTCRichGraphicsActivity.this,elements);
                adapter.notifyDataSetChanged();
                //list.setScrollY(currentPosition);
                //list.setTranslationY(currentPosition);
                list.setDivider( null ); 
                list.setAdapter(adapter);

                adapter.notifyDataSetChanged();

                ELEMENT_COUNT = ELEMENT_COUNT + 3;
            }

        }
    });

} 
```

}

在这里，我想在每次单击按钮（即 bNewEvent）时添加 3 行，所以我每次都将 ELEMENT_COUNT 增加 3。第一次运行正常，但是第二次按下按钮时它崩溃了。

这是我的适配器类：

```
public class MyAdapter extends BaseAdapter {

private final LayoutInflater mInflater;
private final String[] mItems;
TextView t;
ViewHolder holder;
public MyAdapter(Activity c,String[] objects) {
    mInflater = c.getLayoutInflater();
    mItems = objects;
}

public int getCount() {
    return mItems.length;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView t;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.listitem2, parent,false);
}
    holder = new ViewHolder();
    holder.t1 = (TextView) convertView.findViewById(R.id.tv1); 
    holder.t2 = (TextView) convertView.findViewById(R.id.tv2);
    holder.t3 = (TextView) convertView.findViewById(R.id.tv3);
    holder.t4 = (TextView) convertView.findViewById(R.id.tv4);
    holder.t1.setText("Title"+position);
    position = position + 3;

    //((ImageView)convertView).setTextAlignment(1);

    return convertView;
}

@Override
public Object getItem(int position) {
    return mItems[position];
}

@Override
public long getItemId(int position) {
    return position;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:29:57.003

你定义

```
int ELEMENT_COUNT = 3;
String[] elements = new String[ELEMENT_COUNT]; 
```

但是你不能调整数组大小

```
 for (int i = 0; i< ELEMENT_COUNT; i++) {
                elements[i] = String.valueOf(i);
            } 
```

这所以你有例外

将数组更改为列表

喜欢

```
List<String> element =new ArrayList<String>();

   for (int i = 0; i< ELEMENT_COUNT; i++) {
                element.add("String.valueOf(i)")
            } 
```

和更换适配器也这样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:24:18.130

你不能使用这样的数组..

```
String[] elements = new String[ELEMENT_COUNT]; 
```

导致数组具有与 ELEMENT_COUNT 的初始值相同数量的元素，然后您不能仅将 ELEMENT_COUNT 增加 3 并尝试

```
 for (int i = 0; i< ELEMENT_COUNT; i++) {
            elements[i] = String.valueOf(i);
        } 
```

因为数组只包含最初定义的元素。您需要将“元素”更改为 ArrayList。

```
ArrayList<string> elements; 
```

# c# - MVC4 / EF / Code First - 在派生类中实例化 ICollections 时出现 InvalidCastException

> ID：15614640
> 
> 赞同：1
> 
> 时间：2013-03-25T12:12:36.603
> 
> 标签：c#, entity-framework, inheritance, asp.net-mvc-4, code-first

我正在我的派生类中尝试`new`ICollections - 这应该在对象构造函数中完成还是/以及当我在我的`Register ActionResult()`?

租户继承自 UserProfile - 简化示例：

```
public class Tenant : UserProfile
{
    public Tenant() 
    {
        this.ReferencePhotos = new List<ReferencePhoto>();
        // ReferencePhoto extends Image
    }

    // A Tenant can have many ReferencePhotos
    [ForeignKey("ImageId")] // Id of parent class
    public virtual ICollection<ReferencePhoto> ReferencePhotos { get; set; }
} 
```

我尝试执行上述操作，但会导致 InvalidCastException：

> 无法将 'System.Collections.Generic.List'1[Namespace.Models.ReferencePhoto]' 类型的对象转换为类型 [Namespace.Models.ReferencePhoto]'。

当它们相同时，为什么要尝试从一个对象投射到另一个对象？

在我的`Register ActionResult()`我也试过这个（在对象构造函数中设置和不设置 ICollections）：

```
public ActionResult Register(RegisterModel model)
{
    using (var db = new LetLordContext())
    {
        var tenant = db.UserProfile.Create<Tenant>();
        tenant.ReferencePhotos = new List<ReferencePhoto>();
        // Do I need to new it here at all/as well?
        db.UserProfile.Add(tenant);     // Exception being thrown here
        db.SaveChanges();

        Roles.AddUserToRole(model.UserName, "Tenant");

        WebSecurity.Login(model.UserName, model.Password);
        return RedirectToAction("Confirm", "Home", tenant);
     } 
} 
```

上面也抛出了前面提到的相同异常。任何人都可以提供任何见解吗？

**编辑：**添加了用户配置文件代码

```
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.None)]
    public int UserId { get; set; }

    [Display(Name = "Username")]
    [Required(ErrorMessage="Username is required.")]
    public string UserName { get; set; }

    [Display(Name = "First name")]
    [Required(ErrorMessage = "First name is required.")]
    public string FirstName { get; set; }

    [Required(ErrorMessage = "Account type is required.")]
    public AccountType AccountType;

    public virtual string AccountTypeString
    {
        get { return AccountType.ToString(); }
        set
        {
            AccountType newValue;
            if (Enum.TryParse(value, out newValue))
            { AccountType = newValue; }
        }
    }
} 
```

**编辑**：添加上下文代码和 ReferencePhoto 代码

```
public class LetLordContext : DbContext
{
    public DbSet<LetLord.Models.UserProfile> UserProfile { get; set; }                  // 1 DbSet for superclass UserProfile
    public DbSet<LetLord.Models.Image> Image { get; set; }                              // 1 DbSet for superclass Image
    public DbSet<LetLord.Models.ResidentialProperty> ResidentialProperty { get; set; }
    public DbSet<LetLord.Models.TenantGroupMember> TenantGroupMember { get; set; }
    public DbSet<LetLord.Models.Viewing> Viewing { get; set; }
    public DbSet<LetLord.Models.TenantPreferences> TenantPreferences { get; set; }
    public DbSet<LetLord.Models.LandlordPreferences> LandlordPreferences { get; set; }
    public DbSet<LetLord.Models.Address> Address { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

我正在使用 table-per-type 继承，因此只`DbSet`实现了基类的 s 。

```
public class ReferencePhoto : Image
{
    // 1:many with Tenant
    public int UserId { get; set; }
    [ForeignKey("UserId")]
    public virtual Tenant Tenant { get; set; }
} 
```

* * *

我可以通过不在对象构造函数中初始化列表或在创建新实体时解决此问题。为了实现这一点，我在 GET 中使用了一个 null 合并运算符，它在部分视图`ActionResult`中返回一个`Tenant`对象。在部分中，我检查是否`Model.ReferencePhotos == null`. 如果是，用户可以上传照片。上传照片后，它被添加到列表中，我可以通过检查数据库来确认这一点。但是，当我再次登录时，`if`前面提到的局部视图中的 抛出以下异常：

> 无法在 System.Data.Entity.DynamicProxies.Tenant_ 类型上设置字段/属性 ReferencePhotos...

有一个内部例外：

> 无法将“System.Data.Entity.DynamicProxies.ReferencePhoto_3DFB9F64061D55E5AF6718A74C97025F77EFB2BB9C2A6E43F5A6AF62A6A73E75”类型的对象转换为“System.Collections.Generic.ICollection`1[LetLord.Models.ReferencePhoto]”类型的对象。”}

这可能会提供更多的洞察力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:28:05.890

尝试删除...

```
[ForeignKey("ImageId")] // Id of parent class 
```

> ForeignKey 应该设置在“一个”端（一对多），从不设置在集合上——它只定义在（ 你已经`ReferencePhoto`通过它归因）。`UserId`

...**这也可能是添加额外的外键**- 并导致该`single instance vs collection`错误。

* * *

有关如何`ForeignKey`定义的更多信息（`ForeignKey vs InverseProperty`等），以及大师的一些好建议:)

[实体框架 4.1 InverseProperty 属性](https://stackoverflow.com/questions/5716528/entity-framework-4-1-inverseproperty-attribute)

[我应该如何在 MVC3 中使用 Code First Entity Framework (4.1) 声明外键关系？](https://stackoverflow.com/questions/5542864/how-should-i-declare-foreign-key-relationships-using-code-first-entity-framework/5543702#5543702)

* * *

对于更复杂的场景（在流畅的代码中使用多对多和手动定义关系 - 我推荐） - 看看我前段时间制作的这些详细示例 - 它具有您可能需要的大部分映射。

[使用codefirst或fluent API与同一实体的多对多（连接表）关系？](https://stackoverflow.com/questions/10041695/many-to-many-join-table-relationship-with-the-same-entity-with-codefirst-or-fl/10048992#10048992)

[联接表中的 Code First Fluent API 和导航属性](https://stackoverflow.com/questions/10154512/code-first-fluent-api-and-navigation-properties-in-a-join-table/10155439#10155439)

[带有附加数据的 EF 代码优先多对多](https://stackoverflow.com/questions/10199158/ef-code-first-many-to-many-with-additional-data/10199455#10199455)

# python - Django 将 ModelForm 显示为 html 表单

> ID：15614643
> 
> 赞同：0
> 
> 时间：2013-03-25T12:12:50.217
> 
> 标签：python, django, django-forms

我正在尝试做一个非常简单的 django 网页，其中用户用两个数字填写表单的 2 个字段，提交它们并在第三个字段中获得结果。我正在使用模型表单。

目前我只对第一部分感兴趣，用户导航到 url 并被提示一个带有空表单的页面。我执行以下操作，但我在浏览器中看到的页面没有表单，只有提交按钮。我不知道是不是因为我尝试嵌入到 html 代码中的 ModelForm 仍然是空的，但是我尝试给它默认值，但它仍然没有工作。任何帮助将不胜感激！:)

网址.py：

```
urlpatterns = patterns('',
    url(r'^calculator/', views.calculate)
) 
```

模型.py：

```
class Calc(models.Model):
    field1 = forms.CharField()
    field2 = forms.CharField()
    field3 = forms.CharField()   

class CalcForm(ModelForm):
    class Meta:
        model = Calc 
```

视图.py：

```
def calculate(request):
    c = CalcForm()
    if request.method == 'POST':
        #do the math
        #return ...
    else:
        return render_to_response('home.html', {'calculator': c}) 
```

主页.html：

```
<form action="/calculator/" method="post"> 
<table>
{{ calculator }}<!--I also tried .as_p, .as_ul...-->
</table>
<input type="submit" value="Submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:20:02.200

您的模型应该使用 models.CharField，而不是 forms.CharField。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:25:02.217

更改以下内容：

```
class Calc(models.Model):
    field1 = forms.CharField()
    field2 = forms.CharField()
    field3 = forms.CharField() 
```

至

```
class Calc(models.Model):
    field1 = models.CharField(max_length=10)
    field2 = models.CharField(max_length=10)
    field3 = models.CharField(max_length=10) 
```

你用过`syncdb`上面的代码吗？因为如果你愿意，它一定会抛出一个错误。这让我想到你的数据库是否有正确的表。确保您`syncdb`在进行上述更改后。

此外，您应该始终检查实例是否存在，这也将帮助您解决对象是否正确传递的问题：

```
{% if calculator %}
    <h3>Calculation Form</h3>
    <form action="/calculator/" method="post"> 
        <table>
            {{ calculator }}
        </table>
        <input type="submit" value="Submit" />
    </form>
{% endif %} 
```

# javascript - Javascript浮点数加法不同的输出

> ID：15614652
> 
> 赞同：0
> 
> 时间：2013-03-25T12:13:22.293
> 
> 标签：javascript

为什么这不会给出预期的结果？

```
console.log(0.2+0.1); // gives 0.30000000000000004 
console.log(0.2+0.3); // gives 0.5
console.log(0.2+0.5); // gives 0.7
console.log(0.2+0.4); // gives 0.6000000000000001 
```

为什么`first`and`last`不会给出预期的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:17:11.720

这是因为`JavaScript`使用了`IEEE Standard`for `Binary Floating-Point Arithmetic`。

一切`floating point math`都是这样，基于`IEEE 754 standard`. JavaScript 使用`64-bit floating point representation`，这与 Java 的`double`.

[浮点数学是否损坏](https://stackoverflow.com/questions/588004/is-javascripts-floating-point-math-broken)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:20:35.280

试试看`.toFixed()`。这个方法格式化一个小数点右边有特定位数的数字。

```
console.log((0.2 + 0.1).toFixed(1)); // gives 0.3
console.log((0.2 + 0.3).toFixed(1)); // gives 0.5
console.log((0.2 + 0.5).toFixed(1)); // gives 0.7
console.log((0.2 + 0.4).toFixed(1)); // gives 0.6 
```

# linux - 删除除最后两个修改最多的所有文件夹的脚本吗？

> ID：15614658
> 
> 赞同：0
> 
> 时间：2013-03-25T12:13:40.323
> 
> 标签：linux, bash

我需要编写一个递归脚本来删除名为“date-2012-01-01_12_30”的子文件夹中的所有文件夹，但保留两个最新的。

/var/www/temp/updates/ 然后按“日期”和“代码”显示数百个文件夹

例如

```
/var/www/temp/updates/2012-01-01/temp1/date-2012-01-_12_30
/var/www/temp/updates/2012-01-01/temp1/date-2012-02-_13_30
/var/www/temp/updates/2012-01-01/temp1/date-2013-11-_12_30
/var/www/temp/updates/2012-01-01/temp2/date-2012-01-_12_30 
```

我正在考虑使用 find 来获取文件夹，但不确定如何知道我可以删除哪些文件夹，因为脚本必须知道日期 - 文件夹在那个子文件夹中，哪些是最新的

嗯，有什么帮助会很好吗？

代码：

```
$PATH=/var/www/temp/updates/*/*
find $PATH -type d -name "date-*" -printf '%T@ %p\n' | sort -n | head -n -2 | cut -f2- | xargs ls -l 
```

该脚本将需要遍历数千个不同的文件夹并保留两个最新的文件夹-这里有人帮助过，但我没有更改它以便搜索数千个文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:52:16.567

你能试试这个脚本吗

```
PATH1=/var/www/temp/updates
find $PATH1 -iname "date-*" -print0 | ls -tr | tail -2 | xargs -I file rm -fr file 
```

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:04:06.543

实际上，我认为脚本会正常工作，因为 find 将遍历 /updates/ 下的所有文件夹

```
$PATH=/var/www/temp/updates/*/*
find $PATH -type d -name "date-*" -printf '%T@ %p\n' | sort -n | xargs rm -rf 
```

# python - OpenERP 获取下一个序列号

> ID：15614676
> 
> 赞同：3
> 
> 时间：2013-03-25T12:14:38.503
> 
> 标签：python, xml, sequence, openerp

当我们保存一条记录时，OpenERP 会给出一个序列号。我已经完成了那个模块。当我创建一个工人然后将员工编号加载为 EMP001，EMP002 时，按照该模块。

我的要求是这样的。当我要创建一个新员工时，需要将下一个序列号显示为只读字段。例如：当我要创建第 9 名员工时，需要在我的 emp no 字段中显示 EMP009。

我当前的代码上传到以下位置 [https://github.com/priyankahdp/openerp/tree/openerp](https://github.com/priyankahdp/openerp/tree/openerp)

现在我在下面添加了它的排序

```
_defaults = {
     'register_no': lambda obj, cr, uid, context: obj.pool.get('ir.sequence').get(cr, uid, 'bpl.worker'),
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:33:50.647

您可以将您的领域设置为`readonly`

```
'register_no': fields.char('Register No', size=32, help='Register No', readonly=True), 
```

并提到`_default`

请检查现有模块，例如`sale.py`他们如何获取下一个销售订单号的默认顺序。

[http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/head:/sale/sale.py](http://bazaar.launchpad.net/~openerp/openobject-addons/trunk/view/head:/sale/sale.py)

# python - 如何在我的机器上安装 numpy/core/numeric.py 文件；我想要isclose()

> ID：15614678
> 
> 赞同：3
> 
> 时间：2013-03-25T12:14:43.360
> 
> 标签：python, ubuntu, python-2.7, numpy

我缺少一些基本的东西。

在 GitHub 上似乎有一些附加功能，特别是 isclose()，**[这](https://github.com/joferkington/numpy/blob/3a85c0a9af64b0296b9a4c97f43f2f209c849077/numpy/core/numeric.py)**在我的安装中是不可用的。

我做了以下事情：

```
$ git clone git://github.com/numpy/numpy.git numpy 
```

但它似乎没有用。

*我还通过Synaptic Package Manager*检查了更新，但这也没有奏效。我错过了什么？如何获得“最新”版本？

我在 Ubuntu 12.10 上运行 python 2.7.3。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:02:23.113

您链接到的代码是 Joe Kington 的 numpy 包的分支。

您发布的`git clone`命令将该分叉的源代码下载到您的本地计算机。然后，您必须先编译 numpy 并安装它，然后才能使用此版本的 numpy。

获取`isclose`函数最简单的方法是简单地将代码复制到文件中并导入：

**utils_num.py**

```
import numpy as np
def isclose(a, b, rtol=1.e-5, atol=1.e-8, equal_nan=False):
    """
    https://github.com/joferkington/numpy/blob/3a85c0a9af64b0296b9a4c97f43f2f209c849077/numpy/core/numeric.py
    Returns a boolean array where two arrays are element-wise equal within a
    tolerance.

    The tolerance values are positive, typically very small numbers.  The
    relative difference (`rtol` * abs(`b`)) and the absolute difference
    `atol` are added together to compare against the absolute difference
    between `a` and `b`.

    Parameters
    ----------
    a, b : array_like
        Input arrays to compare.
    rtol : float
        The relative tolerance parameter (see Notes).
    atol : float
        The absolute tolerance parameter (see Notes).
    equal_nan : bool
        Whether to compare NaN's as equal.  If True, NaN's in `a` will be
        considered equal to NaN's in `b` in the output array.

    Returns
    -------
    y : array_like
        Returns a boolean array of where `a` and `b` are equal within the
        given tolerance. If both `a` and `b` are scalars, returns a single
        boolean value.

    See Also
    --------
    allclose

    Notes
    -----
    For finite values, isclose uses the following equation to test whether
    two floating point values are equivalent.
     absolute(`a` - `b`) <= (`atol` + `rtol` * absolute(`b`))
    The above equation is not symmetric in `a` and `b`, so that
    `isclose(a, b)` might be different from `isclose(b, a)` in
    some rare cases.

    Examples
    --------
    >>> np.isclose([1e10,1e-7], [1.00001e10,1e-8])
    array([True, False])
    >>> np.isclose([1e10,1e-8], [1.00001e10,1e-9])
    array([True, True])
    >>> np.isclose([1e10,1e-8], [1.0001e10,1e-9])
    array([False, True])
    >>> np.isclose([1.0, np.nan], [1.0, np.nan])
    array([True, False])
    >>> np.isclose([1.0, np.nan], [1.0, np.nan], equal_nan=True)
    array([True, True])
    """
    def within_tol(x, y, atol, rtol):
        result = np.less_equal(abs(x - y), atol + rtol * abs(y))
        if np.isscalar(a) and np.isscalar(b):
            result = result[0]
        return result
    x = np.array(a, copy=False, ndmin=1)
    y = np.array(b, copy=False, ndmin=1)
    xfin = np.isfinite(x)
    yfin = np.isfinite(y)
    if np.all(xfin) and np.all(yfin):
        return within_tol(x, y, atol, rtol)
    else:
        # Avoid subtraction with infinite/nan values...
        cond = np.zeros(broadcast(x, y).shape, dtype=bool)
        mask = xfin & yfin
        cond[mask] = within_tol(x[mask], y[mask], atol, rtol)
        # Check for equality of infinite values...
        cond[~mask] = (x[~mask] == y[~mask])
        if equal_nan:
            # Make NaN == NaN
            cond[isnan(x) & isnan(y)] = True
        return cond 
```

**测试.py：**

```
import utils_num as UN
print(UN.isclose([1e10,1e-7], [1.00001e10,1e-8])) 
```

产量

```
array([ True, False], dtype=bool) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T13:37:15.600

要安装该版本的 numpy，您需要`cd`进入`numpy/`刚刚克隆的目录/repo

并运行

```
python setup.py install 
```

这应该够了吧

# java - 如何拥有唯一的学生证

> ID：15614679
> 
> 赞同：0
> 
> 时间：2013-03-25T12:14:48.257
> 
> 标签：java, arrays, methods, random, bluej

问题是我无法创建唯一的学生编号，有时我在存储学生时得到相同的学生 ID，是否有生成唯一的学生 ID 编号，我需要修改存储方法以便创建唯一的

```
public class Collection

{

   private ArrayList<Student> studentList;

    public Collection()
    {
        studentList = new ArrayList<Student>();
    }

    public void storeStudent(Student student)
    {

        student.setId(createId("AB",9));
        studentList.add(student);

    }
     public String createId(String pre, int number)
     {
         Random random = new Random();
          int index = random.nextInt(number);
          return pre + index + " ";
     }
}

public class Student

{
private String studentId;

private String name;

public Student( String name)
{
    studentId = "UnKnow";
    this.name = name;
}
public void setId(String id)
{
    studentId = id;
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:20:20.793

您可以使用 UUID：

```
public String createId() //don't need the arguments any more
{
     UUID uuid = UUID.randomUUID();
     return uuid.toString();
} 
```

极不可能发生冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:16:25.620

将 studentId 变量设为静态并创建静态方法以生成 studentId。

```
private static studentId = 0;
...
public static int generateStudentId()
{
return studentId++;
} 
```

您可能还想将此值存储到 db 或 file 或其他任何东西，以防您停止应用程序并重新启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:20:01.700

```
 private static final AtomicInteger idIncrement = new AtomicInteger();
 public static String createId(String pre /*, int number -- no longer needed*/)
 {
      int index = idIncrement.incrementAndGet();
      return pre + index + " ";
 } 
```

这将为您提供线程安全的唯一有序学生 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:18:46.617

尝试

```
class Collection {
    static long id = System.currentTimeMillis();

    public void storeStudent(Student student) {
        student.setId(++id + "");
        studentList.add(student);
    } 
```

即使在您重新启动应用程序后，它也能保证唯一的 ID。请注意，它不是线程安全的，如果您需要它是线程安全的，请使用 AtomicLong id = new AtomicLong(System.currentTimeMillis)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-25T12:27:38.903

尝试在集合中使用 Set。它不允许重复。您也可以轻松地将 Set 转换为 List，如下所示。

```
List<T> list = new ArrayList<T>(set); 
```

[片场](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)简要教程。

希望这对您有所帮助。

谢谢。

# ios - wifi无线电链接速度ios

> ID：15614681
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:15:01.100
> 
> 标签：ios

我正在处理需要获取 iPhone 的 Wi-Fi 无线电信息的任务，例如 BSSID、SSID 和无线电的链接速度。

是否有任何 API 可用于获取 wi-fi 收音机 iphone 的链接速度？

谢谢， Jkaps

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:21:30.627

Core Telephony 框架对于获取此类信息很有用。

我最近在 github 中发现了一个使用核心 Telephony 的库。

[https://github.com/valexa/VAFieldTest][1]

# ssis - SSIS 在 64 位上运行 64 位运行时

> ID：15614689
> 
> 赞同：6
> 
> 时间：2013-03-25T12:15:20.443
> 
> 标签：ssis

我使用 Microsoft Visual Studio Ultimate 2012 试用版在 32 位机器上开发了一个 SSIS 包，我已将此包部署到 64 位机器上进行处理。我无法将 run64bitruntime 更改为 true，此字段已禁用，我无法将其更改为 true。如何启用此字段，以便能够将其更改为 true。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-26T09:57:37.817

也许有人会发现这很有用...

可以通过以下方式更改`run64bitruntime`执行环境（SQL Server Job）的参数：

`SQL Server Agent->Jobs->Job Step Properties->General->Execution Options`

![在此处输入图像描述](../Images/7743cdb8e932c21b9c876bb98d8e9f65.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-26T09:19:16.797

The SSIS development environment is a 32-bit environment. At design time, you only have access to 32-bit data providers, and as a consequence you can only enlist those 64-bit providers in your SSIS projects that also have a 32-bit version available on the development machine.

The SSIS execution environment, on the other hand, is dictated by the underlying oper-ating system, which means that, regardless of the version of the provider that you used at design time, at run time the correct version will be used. This is true when the package is run by the SSIS service as well as when you run the package yourself from SSDT

So, you can control the version of the providers to be used explicitly, via the Run64BitRuntime project setting **ONLY** at design time.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-04T15:09:29.003

XLSX 文件在我们过去曾出现问题，XLS 不能用于 64 位。因此，所有作业都使用 32 位运行，就像 Andrey Morozov 的回答一样。

我们的工作机器是 32 位的，当我有一个 x64 窗口时，我需要在 32 位中调试所有包。我懒得手动设置所有包的选项，所以我发现它保存在“.user”文件中。

我编写了这个小 C# 脚本来进行更改：

```
foreach (FileInfo myFile in new DirectoryInfo(@"PATH TO OUR SSISPROJECT SHARE")
    .GetFiles("*.dtproj.user", SearchOption.AllDirectories))
{
    TextReader textR = myFile.OpenText();
    String fileContent = textR.ReadToEnd();
    textR.Close();
    if (fileContent.Contains("<Run64BitRuntime>true"))
    {
        fileContent = fileContent.Replace("<Run64BitRuntime>true"
        , "<Run64BitRuntime>false");
    }
    else if (!fileContent.Contains("<Run64BitRuntime>") && fileContent.Contains("<Options>"))
    {
        fileContent = fileContent.Replace("<Options>"
        , "<Options>\r\n        <Run64BitRuntime>false</Run64BitRuntime>");
    }
    else
    {
        continue;
    }
    TextWriter textW = myFile.CreateText();
    textW.Write(fileContent);
    textW.Close();
} 
```

亲切的问候

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-14T09:43:25.090

显式控制 64 位 RUNTIME 环境......

*   项目属性
*   选择配置属性
*   选择调试
*   选择调试选项
*   将 Run64BitRuntime 设置为 TRUE

# svn - 如何在 Debian 上的 Netbeans 中使用 SVN？

> ID：15614691
> 
> 赞同：1
> 
> 时间：2013-03-25T12:15:32.490
> 
> 标签：svn, netbeans, debian, netbeans-7

我将桌面从 Xubuntu 更改为 Debian。我有带有 Xfce 桌面和 NetBeans 7.3 的 Debian Wheezy。（这是一个全新的 Squeeze 安装，但它不支持我的显示器，所以我立即进行了 dist-upgrade。）

我面临的问题是，无论我使用什么设置，NetBeans 中的 Subversion 总是会引发身份验证错误。Eclipse 工作正常。命令行 SVN 工作正常。安装了 SvnKit，安装了 JavaHL。当我使用 Xubuntu 时，我认为它开箱即用。

我认为这个问题可能与 NetBeans 似乎想要使用 gnome-keyring 但我没有安装 Gnome（我更愿意保留它）这一事实有关。

可能是什么问题，我该如何规避它？

**编辑**：我尝试[了此处描述的方式](https://stackoverflow.com/questions/7943034/netbeans-7-x-and-subversion-1-7-1)来破解我的 NetBeans 安装以使用命令行 SVN，但如果以这种方式破解它，则 SSH 隧道需要一个私钥。我必须使用的服务器仅支持用户名/密码身份验证，所以我没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:12:39.370

您是否尝试过安装命令行 svn 可执行文件（我相信它在名为 subversion 的 dep 中）。如果您无法在命令行上结帐，那么您可能*确实*输入了错误的密码；但是，*可能*存在版本兼容性问题。如果是这样，可能会调查安装一个较旧或较新的颠覆以匹配服务器（如果您无法控制您的服务器，这是唯一真正的解决方案）或升级 svn 服务器*的更好的解决方案。*

# asp.net-mvc - Pushsharp 连接失败

> ID：15614694
> 
> 赞同：3
> 
> 时间：2013-03-25T12:15:39.677
> 
> 标签：asp.net-mvc, apple-push-notifications, pushsharp

所以我在我的 ASP.NET mvc 应用程序中使用 push sharp，但我不断收到连接失败错误。我为 push sharp 安装了 NUGET 包，所以我无法访问源代码。我花了一段时间才意识到我收到了这个错误，因为我有一段时间没有在调试中运行。首先是我得到的错误代码。

> PushSharp.Apple.DLL 中发生 PushSharp.Apple.ConnectionFailureException 类型的未处理异常
> 
> 附加信息：已达到连接到 gateway.sandbox.push.apple.com:2195 的最大尝试次数 (3)！

这是我用于推送通知的代码。它很简单。

```
public int samplePush()
    {
        var push = new PushBroker();
        var appleCert = File.ReadAllBytes(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Certificates1.p12"));
        var settings = new ApplePushChannelSettings(false, appleCert, "1111");
        push.RegisterAppleService(settings);
        push.QueueNotification(new AppleNotification()
            .ForDeviceToken("c49e457bc041dead313f43684a42a0acdc8d4393b229db08e2873849a8a2db22")
            .WithAlert("Test push notification")
            .WithSound("default")
            .WithBadge(7));
        push.OnNotificationFailed += push_OnNotificationFailed;
        push.StopAllServices();
        return 200;
    } 
```

我尝试了很多事情，首先我使用了多个证书，包括 pem 文件，但就无效证书而言，它们都没有给我任何错误。

我还手动打开了端口 2195 以允许所有连接，我还尝试了多个连接，其中一个是我的工作连接，过去曾用于推送通知。我不知道可能导致此问题的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T20:21:05.280

最后一部分归结为证书错误。显然去临时副本需要一个新的证书。

# datetime - 我可以按与当前时间相关的日期和时间过滤 Google 表格结果吗？

> ID：15614697
> 
> 赞同：0
> 
> 时间：2013-03-25T12:15:43.150
> 
> 标签：datetime, filter, google-sheets

我有一个电子表格，其中 sheet1 包含 1 个数据文本字段以及分配给数据的日期和时间。在工作表 2 上，我需要一个过滤器来搜索文本中的元素（使用 "=filter(sheet1!A1:A, search("search phrase", sheet1!A1:A))" 过滤该部分）但是只需要显示相关时间在当前日期和时间之前 18 小时到 3 天之间的结果。除了日期和时间之外只有一列数据，日期和时间当前显示为“日期：24.03.2013 11:04”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T23:30:38.533

我设法创建了这些公式

```
=filter(Sheet1!A1:C, Sheet1!C1:C>minus(now(),3), Sheet1!C1:C<minus(now(),"12:00:00"))

=filter(importrange("Key","Sheet1!A1:C"), importrange("Key","Sheet1!C1:C")>minus(now(),3), importrange("Key","Sheet1!C1:C")<minus(now(),"12:00:00")) 
```

# sql-server - 在存储过程中使用提交/回滚事务是好还是坏的方法

> ID：15614698
> 
> 赞同：2
> 
> 时间：2013-03-25T12:15:43.257
> 
> 标签：sql-server, stored-procedures, transactions, commit, rollback

我在谷歌上阅读了很多文章，但没有想到在插入/更新/删除时在存储过程中使用事务。

任何人都可以解释我是好是坏。

它真的会影响存储过程的性能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:29:33.050

> 首先，我在 TableA 中插入记录并获得新的身份，并使用此身份（这是 TableB 中的外键）我在 TableB 中插入记录，从 TableB 中获取身份（这是 TableBC 中的外键）并使用此身份在 TableC 中插入记录。

**唯一**的解决方案是使用事务。如果您在跨多个表的更新中省略事务，则可以**保证**实现不一致的状态。

> 我在SP中使用事务，有时我觉得执行时间太长

正确性不是可选的。如果您遇到阻塞问题，请询问有关如何调查和排除阻塞和性能问题的单独问题。

# java - 不可编辑的 JComboBox 边框

> ID：15614700
> 
> 赞同：3
> 
> 时间：2013-03-25T12:15:47.603
> 
> 标签：java, swing, border, jcombobox

我正在使用金属 L&F。我想制作一个只有 1 个像素边框的**JComboBox 。**这不是问题，只要 cb 是**可编辑**的。这对应于图片中名为“Editable”的第一个 cb。

```
cb.setEditable(true);
((JTextComponent) (cb.getEditor().getEditorComponent())).setBorder(BorderFactory.createMatteBorder(1, 1, 1, 0, COLOR)); 
```

但是当我执行**cb.setEditable(false)**时，框内会出现一个额外的边框（在图片“Dropdown”中更改为红色，您会在名为“Fixed”的图片中看到原始颜色）。虽然我尝试设置边框并且我也尝试使用我自己的 CellRenderer，但边框仍然被绘制。在我看来，不需要的边框不是来自 CellRenderer。当我尝试从 cb 本身操作边框时（参见注释 //），它只会添加/删除额外的外边框。editorComponent 似乎也不对我负责。

```
cb.setRenderer(new CbCellRenderer());
//cb.setBorder(BorderFactory.createMatteBorder(1, 1, 1, 1, COLOR));
//cb.setBorder(BorderFactory.createEmptyBorder());

class CbCellRenderer implements ListCellRenderer {

    protected DefaultListCellRenderer defaultRenderer = new DefaultListCellRenderer();

    @Override
    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
        JLabel renderer = (JLabel) defaultRenderer.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        renderer.setBorder(BorderFactory.createEmptyBorder());
        return renderer;
    }        
} 
```

我还尝试了一些 UI 变量，如下面的变量，而不影响此边框。

```
UIManager.setLookAndFeel("javax.swing.plaf.metal.MetalLookAndFeel");
UIManager.put("ComboBox.selectionForeground", Color.green);
UIManager.put("ComboBox.disabledBackground", Color.green);
... 
```

![](../Images/b430752279ce0b6a1605ebd08d496fc3.png)

图片： http: [//upload.mtmayr.com/dropdown_frame.png](http://upload.mtmayr.com/dropdown_frame.png) ^(（链接断开）)

完整的测试代码：

```
import java.awt.*;
import java.util.Vector;
import javax.swing.*;
import javax.swing.plaf.basic.BasicComboPopup;

public class ComboTest {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox nonEditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;
    public final static Color COLOR_BORDER = new Color(122, 138, 153);

    public ComboTest() {
        listSomeString.add("row 1");
        listSomeString.add("row 2");
        listSomeString.add("row 3");
        listSomeString.add("row 4");

        editableComboBox.setEditable(true);
        editableComboBox.setBackground(Color.white);
        Object child = editableComboBox.getAccessibleContext().getAccessibleChild(0);
        BasicComboPopup popup = (BasicComboPopup) child;
        JList list = popup.getList();
        list.setBackground(Color.white);
        list.setSelectionBackground(Color.red);
        JTextField tf = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        tf.setBorder(BorderFactory.createMatteBorder(1, 1, 1, 0, COLOR_BORDER));

        nonEditableComboBox.setEditable(false);
        nonEditableComboBox.setBorder(BorderFactory.createEmptyBorder());
        nonEditableComboBox.setBackground(Color.white);
        Object childNonEditable = nonEditableComboBox.getAccessibleContext().getAccessibleChild(0);
        BasicComboPopup popupNonEditable = (BasicComboPopup) childNonEditable;
        JList listNonEditable = popupNonEditable.getList();
        listNonEditable.setBackground(Color.white);
        listNonEditable.setSelectionBackground(Color.red);

        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(editableComboBox);
        frame.add(nonEditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                ComboTest ct = new ComboTest();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:46:08.137

*   不能......，每个人都有相同的边界，必须有另一个问题，第一个和第二个。是可编辑的 JComboBoxes

*   为了获得更好的帮助，请尽快发布 SSCCE，简短，可运行，可编译，大约两个 JComboBox，本机操作系统，在 JDK 中编译，在 JRE 中运行

WinXP Java6

![在此处输入图像描述](../Images/0b56ef786a2b663d4552f6cc36a9bfd7.png)

Win7 Java7

![> 将被编辑](../Images/7c45183d3898af1677d8ac21e0a55c44.png)

Win7 Java6

![> 将被编辑](../Images/40cbcfbdb341083cdac924afe1d2ee55.png)

Win8 Java6

![在此处输入图像描述](../Images/54b6e1261bc58d77b7a89219c0625dc3.png)

Win8 Java7

![> 将被编辑](../Images/03cdf561bf1d482b2da36418c6d7d3ec.png)

从代码

```
import java.awt.*;
import java.util.Vector;
import javax.swing.*;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.metal.MetalComboBoxButton;

public class MyComboBox {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox someComboBox = new JComboBox(listSomeString);
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox non_EditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;

    public MyComboBox() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setEditable(true);
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setBackground(Color.YELLOW);
//
        editableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        editableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        editableComboBox.setEditable(true);
        JTextField text = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        text.setBackground(Color.YELLOW);
        JComboBox coloredArrowsCombo = editableComboBox;
        Component[] comp = coloredArrowsCombo.getComponents();
        for (int i = 0; i < comp.length; i++) {
            if (comp[i] instanceof MetalComboBoxButton) {
                MetalComboBoxButton coloredArrowsButton = (MetalComboBoxButton) comp[i];
                coloredArrowsButton.setBackground(null);
                break;
            }
        }
//
        non_EditableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        non_EditableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
//
        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someComboBox);
        frame.add(editableComboBox);
        frame.add(non_EditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
        UIManager.put("JTextField.background", new ColorUIResource(Color.yellow));
        UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
        UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyComboBox aCTF = new MyComboBox();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T09:57:49.567

*   如何覆盖 MetalComboBoxUI#paintCurrentValueBackground(...)
    *   使用 JDK 1.7.0_17，Windows 7

![在此处输入图像描述](../Images/f1afd319c21cfc32bb701b96988bfaa8.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.text.*;
import javax.swing.plaf.*;
import javax.swing.plaf.basic.*;
import javax.swing.plaf.metal.*;

public class ComboBoxUIDemo {
  private static Color BORDER = Color.GRAY;
  public JComponent makeUI() {
    //UIManager.put("ComboBox.foreground", Color.WHITE);
    //UIManager.put("ComboBox.background", Color.BLACK);
    //UIManager.put("ComboBox.selectionForeground", Color.CYAN);
    //UIManager.put("ComboBox.selectionBackground", Color.BLACK);

    //UIManager.put("ComboBox.buttonDarkShadow", Color.WHITE);
    //UIManager.put("ComboBox.buttonBackground", Color.GRAY);
    //UIManager.put("ComboBox.buttonHighlight", Color.WHITE);
    //UIManager.put("ComboBox.buttonShadow", Color.WHITE);
    //UIManager.put("ComboBox.editorBorder", BorderFactory.createLineBorder(Color.RED));

    Box box = Box.createVerticalBox();

    UIManager.put("ComboBox.border", BorderFactory.createEmptyBorder());
    for(int i=0; i<2; i++) { // Defalut
      JComboBox<String> cb = new JComboBox<>(makeModel());
      if(i%2==0) setEditable(cb);
      setPopupBorder(cb);
      box.add(cb);
      box.add(Box.createVerticalStrut(10));
    }

    {
      // Override MetalComboBoxUI#paintCurrentValueBackground(...)
      JComboBox<String> cb = new JComboBox<>(makeModel());
      cb.setUI(new MetalComboBoxUI() {
        @Override public void paintCurrentValueBackground(
        Graphics g, Rectangle bounds, boolean hasFocus) {
          //if (MetalLookAndFeel.usingOcean()) {
          if(MetalLookAndFeel.getCurrentTheme() instanceof OceanTheme) {
            g.setColor(MetalLookAndFeel.getControlDarkShadow());
            g.drawRect(bounds.x, bounds.y, bounds.width, bounds.height - 1);
            //COMMENTOUT>>>
            //g.setColor(MetalLookAndFeel.getControlShadow());
            //g.drawRect(bounds.x + 1, bounds.y + 1, bounds.width - 2,
            //           bounds.height - 3);
            //<<<COMMENTOUT
            if (hasFocus && !isPopupVisible(comboBox) && arrowButton != null) {
              g.setColor(listBox.getSelectionBackground());
              Insets buttonInsets = arrowButton.getInsets();
              if (buttonInsets.top > 2) {
                g.fillRect(bounds.x + 2, bounds.y + 2, bounds.width - 3,
                           buttonInsets.top - 2);
              }
              if (buttonInsets.bottom > 2) {
                g.fillRect(bounds.x + 2, bounds.y + bounds.height -
                           buttonInsets.bottom, bounds.width - 3,
                           buttonInsets.bottom - 2);
              }
            }
          } else if (g == null || bounds == null) {
            throw new NullPointerException(
              "Must supply a non-null Graphics and Rectangle");
          }
        }
      });
      setPopupBorder(cb);

      box.add(cb);
      box.add(Box.createVerticalStrut(10));
    }

    UIManager.put("ComboBox.border", BorderFactory.createLineBorder(BORDER));
    for(int i=0; i<2; i++) { // BasicComboBoxUI
      JComboBox<String> cb = new JComboBox<>(makeModel());
      if(i%2==0) setEditable(cb);
      cb.setUI(new BasicComboBoxUI());
      setPopupBorder(cb);
      box.add(cb);
      box.add(Box.createVerticalStrut(10));
    }

    JPanel p = new JPanel(new BorderLayout());
    p.setBorder(BorderFactory.createEmptyBorder(10,20,10,20));
    p.add(box, BorderLayout.NORTH);
    return p;
  }
  private static void setEditable(JComboBox cb) {
    cb.setEditable(true);
    ComboBoxEditor editor = cb.getEditor();
    Component c = editor.getEditorComponent();
    if(c instanceof JTextField) {
      JTextField tf = (JTextField)c;
      tf.setBorder(BorderFactory.createMatteBorder(1,1,1,0,BORDER));
    }
  }
  private static void setPopupBorder(JComboBox cb) {
    Object o = cb.getAccessibleContext().getAccessibleChild(0);
    JComponent c = (JComponent)o;
    c.setBorder(BorderFactory.createMatteBorder(0,1,1,1,BORDER));
  }
  private static DefaultComboBoxModel<String> makeModel() {
    DefaultComboBoxModel<String> m = new DefaultComboBoxModel<>();
    m.addElement("1234");
    m.addElement("5555555555555555555555");
    m.addElement("6789000000000");
    return m;
  }
  public static void main(String[] args) {
//     OceanTheme theme = new OceanTheme() {
//       @Override protected ColorUIResource getSecondary2() {
//         return new ColorUIResource(Color.RED);
//       }
//     };
//     MetalLookAndFeel.setCurrentTheme(theme);

    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new ComboBoxUIDemo().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
} 
```

# php - 从文本文件读取和执行命令

> ID：15614701
> 
> 赞同：0
> 
> 时间：2013-03-25T12:15:50.210
> 
> 标签：php

我有一个包含所有 sql 命令的 txt 文件。我需要打开文件，读取命令并针对 postgresql 执行。

```
$file = fopen("createme.sql.txt", "r") or exit("Unable to open file!");

while(!feof($file))
  {
  pg_query($conn, fgets($file));
  }
fclose($file); 
```

我希望上面的代码能够工作。但是显示错误：

```
PHP Warning:  pg_query(): Query failed: 
```

如何从文本文件执行命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:24:33.320

`fgets`逐行获取文件内容。

`fread`用于获取文件的所有内容，将第二个参数设置为文件大小。

```
$fileName = "createme.sql.txt";
$file = fopen($fileName, "r") or exit("Unable to open file!");

// checking if opening file is error.
if(!feof($file))
  {
  $str = fread($file, filesize($fileName));
  pg_query($conn, $str);
  }
fclose($file); 
```

感谢@smassey 的另一个技巧

```
$fileName = "createme.sql.txt";
$str = file_get_contents($fileName);
pg_query($conn, $str);
fclose($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:30:05.070

尝试从每行的末尾`trim()`截断`"\r\n"`

```
$file = fopen("createme.sql.txt", "r") or exit("Unable to open file!");

while(!feof($file))
  {
  pg_query($conn, trim(fgets($file)));
  }
fclose($file); 
```

# wpf - 声明式进度条绑定

> ID：15614702
> 
> 赞同：8
> 
> 时间：2013-03-25T12:15:50.907
> 
> 标签：wpf, xaml, f#

在将按钮的命令绑定到操作后，我调用了一个公开进度事件的对象。

```
event System.EventHandler<ProgressChangedEventArgs> ProgressChanged 
```

我想以最好的方式在我的 XAML 中显示它。

* * *

一种方法是在我的 VM 中公开两个可绑定字段

```
member x.Iteration with get()     = _iteration
                   and set(v:int) = _iteration <- v
                                    x.NotifyPropertyChanged <@this.Iteration@>

member x.IterationVisible with get()      = _iterationVisible
                          and set(v:bool) = _iterationVisible <- v
                                            x.NotifyPropertyChanged <@this.IterationVisible@> 
```

然后在我被要求执行操作的地方，我只会更新属性

```
member x.CompleteInference(algorithm:IGeneratedAlgorithm) =
    x.IterationVisible <- true
    algorithm.ProgressChanged.Add(fun args -> x.Iteration <- args.Iteration)
    algorithm.run()
    x.IterationVisible <- false 
```

* * *

这导致了两个问题：

*   **F#**中是否有直接的方法来公开`progressChanged`事件，而不通过这个中间`Iteration`属性，可以由 WPF 处理？它是我们能得到的最具声明性的吗/我们总是必须在某处存储一些状态吗？

*   另外，是否有一种自然的方法可以完全在**XAML**中进行这种“状态机”绑定？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T14:40:52.980

据我所知，没有办法在 xaml 中处理事件，因此通过属性公开事件更改可能是您能做的最好的事情。

要在 xaml 中实现“'状态机'绑定”，您可以将进度公开为大小，然后将进度条的宽度绑定到该属性。有关此示例，请参见[此处。](https://stackoverflow.com/questions/775793/wpf-bind-control-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-14T21:36:02.150

尽管我是 F# 新手，但您看起来这样做是正确的。

Wpf 通常与 MVVM 模式一起使用，因此将按钮连接到命令属性并将进度条连接到 int 属性是正确的。然后你的命令会做一些事情来改变进度值，而绑定会处理剩下的事情。

在 xaml 中处理事件需要隐藏代码，我个人不介意它是否仅用于增强 UI。它当然不应该与其他对象交互。这意味着没有事件处理程序。

这将事件引入命令行为，可用于将控制事件绑定到命令。请参阅[msdn](http://msdn.microsoft.com/en-us/magazine/dn237302.aspx)。

希望这在某种程度上有所帮助。

# ruby-on-rails - create_admin 中止！Gem:Module 的未定义方法“source_index”

> ID：15614704
> 
> 赞同：0
> 
> 时间：2013-03-25T12:15:55.620
> 
> 标签：ruby-on-rails, ruby

试图让gitorious运行..

我`source_index`从 env RAILS_ENV=production ruby​​1.8 script/create_admin 得到了 Gem:Module 的未定义方法

当我运行时：

`env RAILS_ENV=production ruby-1.8.7-p371 script/create_admin`

我有：

```
NOTE: Gem.source_index is deprecated, use Specification.
It will be removed on or after 2011-11-01.
Gem.source_index called from /usr/local/rvm/gems/ruby-1.8.7-p371/gems/rails- 2.3.18/lib/rails/gem_dependency.rb:21. 
```

请参阅此处：[http](http://pastebin.com/raw.php?i=YgV9Sym7) ://pastebin.com/raw.php?i=YgV9Sym7和此处：[http ://pastebin.com/raw.php?i=3LYTygS0](http://pastebin.com/raw.php?i=3LYTygS0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:08:04.443

我的看法是：

ruby 的最新稳定版本是 1.9.3，因为您使用的是旧版本的 ruby​​，所以您必须使用与 1.8.7 版本兼容的 ruby​​ gems...类似于：

```
gem update --system <your desired ruby gem version> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-14T21:28:54.290

我只是运行以下命令，它对我有用

```
rvm install rubygems 1.4.2 --force 
```

# android - android中的语音识别不起作用

> ID：15614706
> 
> 赞同：0
> 
> 时间：2013-03-25T12:16:05.913
> 
> 标签：android, speech-recognition, voice-recognition, speech-to-text

我正在尝试创建一个应用程序，其中当电话打来电话时，呼叫必须根据用户语音命令自动参加或结束。在这里，我给出了我尝试过的内容，我在 startVoiceRecognitionActivity() 方法中遇到错误，例如 Activity not found 异常：没有找到处理意图的活动。

```
 public void startVoiceRecognitionActivity()
{
    Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
    intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
            RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
    intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
    startActivityForResult(intent, REQUEST_CODE);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub

    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)
    {
        String spch = data.getStringExtra(RecognizerIntent.EXTRA_RESULTS);

        if (spch.contains("Yes"))    
         {
            enableSpeakerPhone(this);

            Intent i = new Intent(Intent.ACTION_MEDIA_BUTTON);
            KeyEvent event = new KeyEvent(KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_HEADSETHOOK);
            i.putExtra(Intent.EXTRA_KEY_EVENT, event );
            this.sendOrderedBroadcast(i, null);
         }
         else if(spch.contains("No"))
         {
            Intent buttonUp = new Intent(Intent.ACTION_MEDIA_BUTTON); 
            buttonUp.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_HEADSETHOOK));
            this.sendOrderedBroadcast(buttonUp, "android.permission.CALL_PRIVILEGED");
         }
    }
    super.onActivityResult(requestCode, resultCode, data);
} 
```

谁能帮我找出问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:09:16.013

您是否在清单文件中正确声明了您的活动？

# eclipse - Maven 错误：'dependencies.dependency.version' for ... 必须是有效版本，但

> ID：15614707
> 
> 赞同：1
> 
> 时间：2013-03-25T12:16:06.713
> 
> 标签：eclipse, exception, maven, pom.xml

我使用 eclipse juno 创建了一个 maven 项目并编辑了 pom 文件。当我通过“mvn clean install”使用命令提示符运行 pom 文件时，出现此错误。

```
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]
[ERROR]   The project se.cambio.platform.sdk:sdk-documentation-samples-laki:1      (F:\newWorkspace\sdk-documentation-samples-laki\pom.xml) has 2 errors
[ERROR]     'dependencies.dependency.version' for se.cambio.platform.sdk:sdk-client:jar    must be a valid version but is '${version.sdk.client}'. @ line 38, column 16
[ERROR]     'dependencies.dependency.version' for se.cambio.platform.sdk:sdk-common:jar   must be a valid version but is '${version.sdk.common}'. @ line 44, column 16
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException 
```

我的 pom 文件是，

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-  4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<parent>
<groupId>se.cambio.platform.sdk</groupId>
<artifactId>sdk-documentation-samples</artifactId>
<version>0.8.2</version>
</parent>
<artifactId>sdk-documentation-samples-laki</artifactId>
<version>1</version>
<description>this is a sample project</description>
<build>
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <configuration>
      <archive>
        <manifestEntries>
          <ModuleClass>se.cambio.laki.client.Module</ModuleClass>
          <BuildVersion>${pom.version}</BuildVersion>
        </manifestEntries>
      </archive>
    </configuration>
  </plugin>
 </plugins>
</build>
<dependencies>
<dependency>
  <groupId>${project.groupId}</groupId>
  <artifactId>sdk-client</artifactId>
  <version>${version.sdk.client}</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>${project.groupId}</groupId>
  <artifactId>sdk-common</artifactId>
  <version>${version.sdk.common}</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>se.cambio.legacy</groupId>
  <artifactId>CDK</artifactId>
  <version>${version.cde}</version>
  <classifier>cdk-internal</classifier>
  <scope>runtime</scope>
</dependency>
<dependency>
  <groupId>commons-dbcp</groupId>
  <artifactId>commons-dbcp</artifactId>
  <version>1.4</version>
  <scope>runtime</scope>
</dependency>
        <dependency>
        <groupId>org.testng</groupId>
        <artifactId>testng</artifactId>
        <version>${version.testng}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.8.5</version>
        <scope>test</scope>
    </dependency>
<dependency>
  <groupId>net.sourceforge.jtds</groupId>
  <artifactId>jtds</artifactId>
  <version>1.2.5</version>
  <scope>runtime</scope>
  </dependency>
<dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2</version>
        <scope>test</scope>
    </dependency>
 </dependencies>
  </project> 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:24:38.040

属性`${version.sdk.client}`和`${version.sdk.common}`未在您的项目中定义。

添加类似这样的内容将解决问题。（当然要适应版本；1.0.0.RELEASE 可能不是你需要的。）

```
<properties>
    <version.sdk.client>1.0.0.RELEASE</version.sdk.client>
    <version.sdk.common>1.0.0.RELEASE</version.sdk.common>
</properties> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:26:30.430

添加正确的属性：

```
<properties>
    <version.sdk.client>1.0</version.sdk.client>
    <version.sdk.common>1.0</version.sdk.common>
</properties> 
```

不过，请确保输入正确的版本。

# c# - 来自 C# 的端口转发

> ID：15614709
> 
> 赞同：1
> 
> 时间：2013-03-25T12:16:11.993
> 
> 标签：c#, udp, port, router

我想用 C# 编写一个程序，将特定端口从路由器转发到计算机。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:21:53.383

`UPNP`可以使用 NATUPnP 1.0 类型库 (NATUPNP.DLL) 或第三方库（如 Mono.Nat）转发端口（假设您的设备支持该[技术](https://github.com/mono/Mono.Nat)）。

如果您想在没有 UPNP 的情况下执行此操作，那么这将变得相当困难，因为您需要找到需要发送到设备（路由器）以模拟用户添加端口的消息类型。

您可以在[UPNP 端口转发](http://www.fluxbytes.com/csharp/upnp-port-forwarding-the-easy-way/)`Mono.Nat`中找到一个示例——简单的方法 ，并且在 .NET Framework 中有一个示例[：通过 NAT 路由器通过 UPnP 进行通信（通用即插即用）](http://pietschsoft.com/post/2009/02/05/NET-Framework-Communicate-through-NAT-Router-via-UPnP.aspx)`NATUPnP`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-25T12:18:05.147

**不，这是不可能的**

端口转发是网络设备连接网络中所有其他计算机的任务。一旦数据包离开路由器，它就无法控制它。

此外，除非您从路由器转发端口，否则内部局域网中的计算机无法获取该数据包，并且根本不存在转发问题。

# jquery - 如何通过 jquery 设置 css 以防止某些操作

> ID：15614710
> 
> 赞同：1
> 
> 时间：2013-03-25T12:16:14.090
> 
> 标签：jquery, css

请参考以下链接。

[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting/4358620#4358620)

上面的链接对于在拖动时禁用选择很有用。代码片段。

```
.unselectable {
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
} 
```

但我不想在这里使用 css 概念。我想通过 jquery 为特定元素设置这些属性。我怎样才能做到这一点 ？

谢谢，

湿婆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:23:46.087

你可以像这样使用它

```
("#yourId").css({
           -moz-user-select: none;
           -khtml-user-select: none;
           -webkit-user-select: none;
           user-select: none;
 }); 
```

不过最好使用类

你的CSS类：

```
.unselectable{
       -moz-user-select: none;
       -khtml-user-select: none;
       -webkit-user-select: none;
       user-select: none;
} 
```

你的 Jquery 命令

```
$("#yourElementId").addClass('unselectable') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:17:38.563

使用[.css()](http://api.jquery.com/css/)

> 获取匹配元素集中第一个元素的样式属性值，或为每个匹配元素设置一个或多个 CSS 属性。

```
$('#elementsId').css({
        -moz-user-select: none;
        -khtml-user-select: none;
        -webkit-user-select: none;
        user-select: none;
 }); 
```

或上课并使用[`addClass()`](http://api.jquery.com/addClass/)..cleanest 方式.. :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:20:32.547

尝试`.addClass()`：

```
$(yourelem).addClass('unselectable'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:22:04.413

假设 jQuery 和 jQueryUI 存在，`$("#yourDomElement").disableSelection()`就会这样做

# office365 - sharepoint 在线远程事件接收器不工作

> ID：15614711
> 
> 赞同：0
> 
> 时间：2013-03-25T12:16:15.383
> 
> 标签：office365, sharepoint-2013, event-receiver

您好，我最近开始开发 sharepoint 2013 。我将我的解决方案部署到 office365 在线帐户，并将我的解决方案附加到远程事件接收器。此事件接收器应侦听特定事件（在本例中添加到自定义列表），然后执行操作。问题是从未执行此操作。似乎事件发生时事件接收器不是事件触发。有任何想法吗 ？有人有类似的问题吗？此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:09:26.477

如果您将远程事件接收器添加到与您的应用程序一起部署到“应用程序 Web”中的列表实例（例如），或者它是用于退出“主机 Web”上的列表的事件接收器，则存在明显的区别”。

前一种情况：VS2012 将为您做所有事情，您只需要在创建的事件方法中编写逻辑即可。

后一种情况：有点复杂，您需要在应用程序安装期间编写一些逻辑并注册您的远程事件。一篇很好的文章：http: [//blogs.msdn.com/b/knewton/archive/2012/12/11/defining-content-in-host-web-from-an-app-for-sharepoint.aspx](http://blogs.msdn.com/b/knewton/archive/2012/12/11/defining-content-in-host-web-from-an-app-for-sharepoint.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T14:13:40.847

我想补充一点，您还需要确保您的远程事件侦听器在您的包中。查看您的 sharepoint 项目下的 Package.package 并确保它已添加。如果没有单击编辑并将其添加到包中。我花了很多时间来解决一个类似的问题，结果证明这是我的解决方案！

要注意的另一件事是在为该列表添加列表和事件侦听器时：事件侦听器必须具有与列表相同的类型或指向该特定列表。

# c# - 功能区无效使我的 Outlook 加载项崩溃

> ID：15614712
> 
> 赞同：0
> 
> 时间：2013-03-25T12:16:15.883
> 
> 标签：c#, outlook-addin, ribbon, invalidation

我有一个相当大的前景加载项，其中包含以下内容`ribbon.xml:`

```
<?xml version="1.0" encoding="UTF-8"?>
<customUI xmlns="http://schemas.microsoft.com/office/2009/07/customui" onLoad="Ribbon_Load">
  <ribbon>
    <tabs>
      <tab idMso="TabMail">
    <group id="groupViewHome" label="View tasks">
      <toggleButton id="buttonToggleHistoryHome" getLabel="getLabelToggleHistory" imageMso="ControlToggleButton" onAction="toggleHistory_Click" size="large" getPressed="getEnabledToggleHistory" />
    </group>
      </tab>
      <tab idMso="TabAddIns" label="DCP">
    <group id="groupCreateTask" label="Create a task">
      <button id="buttonNewTask" label="New Task" imageMso="QueryAppend" onAction="buttonNewTask_Click" size="large" getEnabled="getMailSelected" />
    </group>
    <group id="groupEdit" label="Edit a task">
      <button id="buttonAddSelection" label="Copy selection to task" imageMso="QueryUpdate" onAction="selectedText_Click" size="large" getEnabled="getMailAndIDSelected"/>
    </group>
    <group id="groupView" label="View tasks">
      <button id="buttonTaskHistory" imageMso="FileDocumentInspect" onAction="taskInfo_Click" getLabel="getButtonHistoryLabel" />
      <toggleButton id="buttonToggleHistory" getLabel="getLabelToggleHistory" imageMso="ControlToggleButton" onAction="toggleHistory_Click" getPressed="getEnabledToggleHistory" />
      <checkBox id="buttonTriggerMail" label="Toggle auto-history" onAction="Trigger_Click" getPressed="getInitialTriggerState"/>
    </group>
    <group id="groupAttach" label="Attachments">
      <button id="saveMail2" label="Add mail as .msg attachment" imageMso="AttachItem" onAction="saveMail_Click" getEnabled="getMailAndIDSelected"/>
      <button id="selectAttach" label="Select attachments to add" imageMso="AttachMenu" onAction="selectAttach_Click" getEnabled="getMailAndIDSelectedAndAttach"/>
    </group>
    <group id="groupLinks" label="Hyperlinks">
      <button id="addLinkToMail" label="Add task link to mail body" imageMso="HyperlinkInsert" onAction="addLink_Click" size="large" getEnabled="getMailAndIDSelected"/>
    </group>
      </tab>
    </tabs>
  </ribbon>
  <contextMenus>
    <contextMenu idMso="ContextMenuReadOnlyMailText">
      <menu id="dcp" label="DCP">
    <button id="selectedText" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click"/>
    <button id="addTask" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailTable">
      <menu id="dcp3" label="DCP">
    <button id="selectedText2" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click"/>
    <button id="addTask3" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailTableCell">
      <menu id="dcp4" label="DCP">
    <button id="selectedText3" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click"/>
    <button id="addTask4" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailListTable">
      <menu id="dcp5" label="DCP">
    <button id="selectedText4" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click"/>
    <button id="addTask5" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailPictureTable">
      <menu id="dcp6" label="DCP">
    <button id="selectedText5" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click" />
    <button id="addTask6" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailTextTable">
      <menu id="dcp7" label="DCP">
    <button id="selectedText6" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click"/>
    <button id="addTask7" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailTableWhole">
      <menu id="dcp8" label="DCP">
    <button id="selectedText7" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click" />
    <button id="addTask8" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailList">
      <menu id="dcp9" label="DCP">
    <button id="selectedText8" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click" />
    <button id="addTask9" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuReadOnlyMailHyperlink">
      <menu id="dcp10" label="DCP">
    <button id="selectedText9" label="Copy selection to task" imageMso="CitationInsert" onAction="selectedText_Click" />
    <button id="addTask10" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuMailItem">
      <menu id="dcp2" label="DCP">
    <button id="buttonTaskHistoryMail" label="View task history" imageMso="SourceControlShowHistory" onAction="taskInfo_Click" />
    <button id="addTask2" label="New task" imageMso="GoToNewRecord" onAction="buttonNewTask_Click" />
    <button id="saveMail" label="Add mail as .msg attachment" imageMso="AttachItem" onAction="saveMail_Click" />
      </menu>
    </contextMenu>
    <contextMenu idMso="ContextMenuAttachments">
    <button id="buttonAddAttachment" label="Add attachment to task" imageMso="AttachMenu" onAction="addAttachment_Click"/>
    </contextMenu>
  </contextMenus>
</customUI> 
```

如您所见，我有几个需要失效才能启用的操作，切换...我的按钮。我的加载项启动良好，但在某些情况下会崩溃。以下是加载项几乎总是崩溃的一些示例：

*   在新的检查器窗口中打开邮件项目并再次关闭它
*   打开多个窗口，打开带有自定义按钮的上下文菜单

它发生的情况让我非常确定它与创建新上下文菜单或功能区时的自动失效有关，而不是当我自己调用它时。当我删除 getEnabled、getPressed... 属性时，错误不会持续存在。我想不出一种方法来抑制错误而不是崩溃或如何修复它。因此，如果有人可以提供帮助或可以给我更多关于这方面的信息，将不胜感激。如果您需要更多代码（例如 getEnabled、getPressed... 方法），请告诉我。

我的无效方法。请注意，大多数只是返回一个布尔值。这些布尔值作为私有变量保存在ribbon.cs 类中

```
public bool getEnabledToggleHistory(IRibbonControl control)
{
   return toggleHistoryPanelState;
}

public bool getMailSelected(IRibbonControl control)
{
    try
    {
        MailItem mailItem = getMail();
        if (mailItem != null)
        {
            return true;
        }
        else
        {
            return false;
        }
    }
    catch (System.Exception ex)
    {
        return false;
    }
}

public bool getMailAndIDSelected(IRibbonControl control)
{
    return mailAndIDSelected;
}

public bool getMailAndIDSelectedAndAttach(IRibbonControl control)
{
    if (hasAttachments && mailAndIDSelected)
    {
        return true;
    }
    return false;
} 
```

如果我在新的 Visual Studio 实例中调试，我会得到以下信息：

`Unhandled exception at 0x70B5B2A7 (MSO.DLL) in OUTLOOK.EXE: 0xC0000005: Access violation reading location 0x00000000.`

如果我从我的解决方案中调试代码，我永远无法捕捉到错误，也不会说它有未处理的错误。它只是崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T14:46:13.093

（根据我们在评论中的讨论发布某种“答案”）

如果您无法捕获或记录（**不要只是捕获异常，将某些内容放入转储**中 - 您可以转储到临时用户文件夹中）...

我最好的建议`the good old divide and conquer`- 删除所有内容（你已经说过只有“标志”导致它），只需留下一个按钮，里面有一件事 - “返回”所有方法**，直到你得到一个导致所有问题的方法**- 类似的事情。

（用于功能区等的 OL XML 系统非常容易出错 - 因此您需要检查所有内容（一丝不苟） - 并且 OL 错误描述性不是很强，大多数情况下只是崩溃。顺便说一句，如果您删除整个上下文会发生什么-菜单？）

# javascript - 如何使用 JavaScript 禁用/启用 HTML5 视频标签

> ID：15614716
> 
> 赞同：1
> 
> 时间：2013-03-25T12:16:20.797
> 
> 标签：javascript, html, html5-video

下面的代码不起作用，如何禁用 HTML5 视频标签

```
document.getElementById("vidEle").disabled=true; 
```

如果我使用

```
document.getElementById("vidEle").controls=false; 
```

我仍然可以使用右键单击播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T16:41:22.740

如果我们知道您使用的浏览器会很好，但这里有一些解决方法：

您可以使用 css 在其上设置一个与具有半透明背景的视频播放器相同大小的新块元素。

或者您可以将元素的样式设置为不显示：

```
document.getElementById("vidEle").style.display="none"; 
```

最后，您还可以卸载 vidEle 元素的内容。最后一件事，如果您选择使用“display:none”方法，请确保视频没有播放。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:21:41.737

您可以删除视频源，这样视频将无法播放:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-17T21:35:16.027

另一种方法是禁用上下文菜单，如下所示：

```
<video oncontextmenu="return false;" controls>
 <source src="somedir/somevideo.mp4" type="video/mp4"/>
</video> 
```

# java - Android 崩溃报告不会将数据发送到谷歌文档

> ID：15614718
> 
> 赞同：1
> 
> 时间：2013-03-25T12:16:29.233
> 
> 标签：java, android, google-docs, acra

我正在尝试在我的 android 项目中使用[android 崩溃报告。](http://code.google.com/p/acra/wiki/ACRA3HowTo)

我已经添加了 jar，并且在我的 src 目录中有这样的代码。

```
import android.app.Application;
import org.acra.*;
import org.acra.annotation.*;

@ReportsCrashes(formKey = "0xxxxxxxxxxxxxxxxxxxS2JONHc")
public class CrashLog extends Application {

        @Override
        public void onCreate() {
            // The following line triggers the initialization of ACRA
            ACRA.init(this);
            super.onCreate();
        }

    } 
```

我的谷歌电子表格网址如下所示：

[https://docs.google.com/spreadsheet/ccc?key=0xxxxxxxxxxxxxxxxxxxS2JONHc#gid=0](https://docs.google.com/spreadsheet/ccc?key=0xxxxxxxxxxxxxxxxxxxS2JONHc#gid=0)

但是当我运行应用程序时，我的 logcat 中出现以下异常：

```
Looking for error files in /data/data/com.simplepay.hellomobile/files
I/ACRA    (  547): Sending file 1364199528000-approved.stacktrace
D/ACRA    (  547): Sending report 5653c004-9511-4bee-b918-2896a28270b9
D/ACRA    (  547): Connect to https://docs.google.com/spreadsheet/formResponse?formkey=0AkxxxxxxxJS2JONHc&ifq
D/dalvikvm(  547): GC_CONCURRENT freed 1167K, 54% free 3134K/6727K, external 2336K/2711K, paused 5ms+6ms
D/ACRA    (  547): Sending request to https://docs.google.com/spreadsheet/formResponse?formkey=0AkxxxxxxxxxxxNHc&ifq
W/ResponseProcessCookies(  547): Invalid cookie header: "Set-Cookie: NID=67=QXbN91Capc8QPihoEN08wFVyvr8barZQGX6RVH0OUCbZx4Z8LYTeOrQOXIevhcxpA9mlQ41aeF3lgpJxqxpvx91xLVExQlz3VPcNRaGkZXyazBylB855o236ORifVsdm;Domain=.google.com;Path=/;Expires=Tue, 24-Sep-2013 12:08:29 GMT;HttpOnly". Unable to parse expires attribute: Tue
E/ACRA    (  547): Failed to send crash report for 1364199528000-approved.stacktrace
E/ACRA    (  547): org.acra.sender.ReportSenderException: Error while sending report to Google Form.
E/ACRA    (  547):  at org.acra.sender.GoogleFormSender.send(GoogleFormSender.java:88)
E/ACRA    (  547):  at org.acra.SendWorker.sendCrashReport(SendWorker.java:178)
E/ACRA    (  547):  at org.acra.SendWorker.checkAndSendReports(SendWorker.java:141)
E/ACRA    (  547):  at org.acra.SendWorker.run(SendWorker.java:77)
E/ACRA    (  547): Caused by: java.io.IOException: Host returned error code 400
E/ACRA    (  547):  at org.acra.util.HttpRequest.sendPost(HttpRequest.java:148)
E/ACRA    (  547):  at org.acra.sender.GoogleFormSender.send(GoogleFormSender.java:85)
E/ACRA    (  547):  ... 3 more
D/ACRA    (  547): #checkAndSendReports - finish 
```

我在哪里犯错？`key`我从我的网址获得的那个是要被赋予价值的那个吗`formKey`？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:36:25.583

您必须使用添加的表单的表单键，而不是电子表格的表单键。请打开您的电子表格，然后在菜单中打开表格。表格末尾会有一个链接，其中包含密钥。

```
https://docs.google.com/spreadsheet/viewform?formkey=YOUR_FORM_FORMKEY 
```

以下是[基本设置说明。](https://github.com/ACRA/acra/wiki/BasicSetup)

请注意[，由于 Google 最近更新了 Google 表单，因此不推荐使用 Google Docs 作为 ACRA 报告的存储引擎。](https://plus.google.com/118444843928759726538/posts/GTTgsrEQdN6)

# script# - ScriptSharp 0.8 何时会成为正式版本？

> ID：15614725
> 
> 赞同：2
> 
> 时间：2013-03-25T12:16:44.233
> 
> 标签：script#

我们正在考虑在我们的项目中采用 ScriptSharp。如果 0.8 即将成为正式版本，我们不想采用 0.7.5。

您能否就可能的时间表给出一些指示，即几周、几个月或几年？

另外，如果我们采用 0.7.5 会不会有大量的痛苦转移到 0.8？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T08:03:12.617

我认为它指日可待，除非有一些最后一分钟的事情，比如文档。自 11 月以来，我们已经在两个项目的生产中使用它，到目前为止它运行良好！

我建议获取最新的 cc 分支并使用它，它是 0.8。从 7 移动到 8 不会很痛苦，但根据您使用的功能可能会稍微涉及一些问题。最重要的是 .8 中有大量新功能，例如 html5 和 nodejs 等。我已经使用了 .8 必须提供的大部分功能，而且它们非常稳定。一般来说，你不会遇到任何问题。

# jquery - 如何多次限制函数调用

> ID：15614727
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:16:49.217
> 
> 标签：jquery

我正在使用以下代码。

`<a href="javascript:objectView('3','1215')">Raja</a>`

如果我单击链接“Raja”多次`objectview()`调用多次函数。我想限制多个函数调用。

如何限制多个通话。如果你有任何想法与我分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:20:53.783

你可以通过 jquery [one()](http://api.jquery.com/one/)来做到这一点。但是因为你正在调用内联函数（让它尽可能简单）

尝试这个

```
var clicked=false;
function objectView(obj1,obj2){
  if(!clicked){
     //your code
    clicked=true;
 }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:21:20.367

做这个-

```
$('#rajaLink').click(function(){
  objectView('3','1215');
  $('#rajaLink').unbind('click'); // Unbind event
}); 
```

# visual-studio - 添加 Windows 通用控件 6.0 时未注册对象库

> ID：15614730
> 
> 赞同：29
> 
> 时间：2013-03-25T12:17:01.220
> 
> 标签：visual-studio, vb6, registration, ocx

我正在尝试在 Windows 7 32 位机器上安装 Visual Studio 6。

操作系统安装来自裸机。

我按照[此处](http://www.fortypoundhead.com/showcontent.asp?artid=20502)提到的说明进行操作（我以前使用过）

安装很顺利，没有报告任何错误，但是当我尝试将其添加`Microsoft Windows Common Controls 6.0`到工具箱时，我得到“对象库未注册”错误。

我尝试手动卸载并重新安装 OCX 都成功但我仍然有同样的错误。

我尝试安装 SP6 并且安装没有错误（并将 OCX 更新到较新版本），但我仍然遇到同样的问题。

**编辑：**

正如下面进一步调查中提到的，IE10 更新似乎破坏了 MSCOMCTL.ocx。但是我也认为这与订单有关，因为我有另一台运行良好的 IE10 的 Windows 7 机器。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2013-04-23T10:56:25.623

在 32 位机器上：

```
cd C:\Windows\System32
regsvr32 mscomctl.ocx
regtlib msdatsrc.tlb 
```

或在 64 位机器上：

```
cd C:\Windows\SysWOW64
regsvr32 mscomctl.ocx
regtlib msdatsrc.tlb 
```

这些需要以[管理员身份运行](http://stackoverflow.com/a/5413614/3366359)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T22:39:41.120

我可以通过像以前一样取消注册和注册 MSCOMCTRL.OCX 来确认这是无法修复的。我一直在尝试确定哪个更新是问题的根源，看起来它是 IE10 或 IE10 以及导致问题的其他一些更新。如果我能有更多时间在这方面进行投资，我会更新我的帖子，但同时卸载 IE10 可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T10:46:13.283

我一直有同样的问题。VB6 Win7 64 位并且遇到了一个非常简单的解决方案，所以我认为在这里分享它是一个好主意，以防它帮助其他人。

首先，我尝试了以下但没有成功：

*   未注册和重新注册 MSCOMCTL、MSCOMCTL2 和条形码活动 X 控件在我能想到的每个目录中尝试（VB98、系统 32、sysWOW64、项目文件夹。）

*   删除工作文件夹并再次获取所有内容。（通过源安全）

*   从没有问题的机器上复制 OCX 文件并注册这些文件。

*   安装服务包 6

*   安装 MZ 工具 - 值得一试

*   安装项目的可分发版本。

*   手动编辑 vbp 文件（使其可写后）以修改/删除引用并通常摆弄。

*   卸载 VB6 并重新安装（我认为这是最后的手段） 问题出现在一个新项目上，而不仅仅是现有项目。

**以上均无效，但以下有效**

```
Open VB6
New project
>Project
    >Components
        Tick the following:
            Microsoft flexigrid control 6.0 (sp6)
            Microsoft MAPI controls 6.0
            Microsoft Masked Edit Control 6.0 (sp3)
            Microsoft Tabbed Dialog Control 6.0 (sp6)
        >Apply 
```

在此之后，我仍然无法勾选 Barcode Active X 或 windows common contols 6.0 和 windows common controls 2 6.0，但是当我单击应用时，消息从未注册更改为它已经在项目中。

```
>exit the components dialog and then load project. 
```

这次奏效了。再次尝试了组件对话框，现在勾选了缺少的三个。现在一切似乎都很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-09T09:41:10.683

您只需在命令提示符下执行以下命令，

对于 32 位机器，

```
cd C:\Windows\System32
regsvr32 mscomctl.ocx
regtlib msdatsrc.tlb 
```

对于 64 位机器，

```
cd C:\Windows\SysWOW64
regsvr32 mscomctl.ocx
regtlib msdatsrc.tlb 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-19T08:24:01.463

...在我的 64 位 W7 机器上，安装了 VB6 ...在 DOS 中，作为管理员，这可以解决我在使用 VB6 应用程序时遇到的 OCX 问题：

```
cd C:\Windows\SysWOW64
regsvr32 mscomctl.ocx
regtlib msdatsrc.tlb 
```

是的！此解决方案解决了我在 VB6 中使用 MSCAL.OCX（Microsoft 日历控件）时遇到的问题。

感谢你们！:-)

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-01-29T10:08:36.690

您可以在此 KB [http://support.microsoft.com/default.aspx?scid=kb;en-us;Q195353](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q195353)中运行 Microsoft 的工具来修复早期 ActiveX 控件的许可问题。这对我有用。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-05-11T00:59:53.567

要克服 Win7 32bit VB6 的问题，请尝试从 Windows Server 2003 复制`C:\Windows\system32\`文件`mscomctl.ocx`和`mscomcctl.oba`.

# playframework - 玩 1.2.5 和 Jedis

> ID：15614731
> 
> 赞同：0
> 
> 时间：2013-03-25T12:17:01.767
> 
> 标签：playframework, playframework-1.x, jedis

一个简单的问题，但我如何将 Jedis 与 play 框架一起使用？

在我添加的依赖文件中

```
require:
...
- jedis -> jedis 2.1.0 
```

然后我运行`play deps`它不下载依赖项。

我确定这很简单，但是我在这里做错了什么。

使用 Play 框架 1.2.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:25:28.110

抱歉，中央 Maven 存储库路径中的简单错误。

本来应该：

```
- redis.clients -> jedis 2.1.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:08:16.243

我认为**播放部门**不会为您下载模块。您必须改用**play install-module**。

但是我认为目前模块存储库可能存在问题，因此您最好自己[下载](http://www.playframework.com/modules/redis)它。

# c++ - 为什么 std::map 不能使用运算符 []：错误 C2678？

> ID：15614735
> 
> 赞同：1
> 
> 时间：2013-03-25T12:17:14.877
> 
> 标签：c++, stl, std

有：

```
std::map<const int, float> m_areaCost; 
```

我正在尝试编译以下内容：

```
inline float getAreaCost(const int i) const { 
    return m_areaCost[i]; 
} 
```

这导致以下错误：

```
error C2678: binary '[' : no operator found which takes a left-hand operand of type 'const std::map<_Kty,_Ty>' (or there is no acceptable conversion) 
```

我曾经认为当我们调用时`[elementId]`我们获取元素值或默认元素值，所以我想知道这种简单的情况如何导致编译错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:19:27.257

想必`m_areaCost`是对象的成员即`getAreaCost`是成员。但是，`getAreaCost`被标记为`const`成员函数。这意味着它不会对成员造成任何修改。所以`m_areaCost`成员`const`在这个函数中。

你不能调用`operator[]`a `const std::map`，因为它的效果是如果它还不存在，它会插入一个新元素。而是使用[`std::map::at`](http://en.cppreference.com/w/cpp/container/map/at)：

```
return m_areaCost.at(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:19:14.197

因为您声明您的函数是 const，而 [] 不是 const 运算符。正如您自己所说的那样， [] ！创建或返回一个新值..如果它无法创建，那么您不能使用此运算符..我将使用 find() 然后返回 .second 值（如果存在），例如：

```
auto it = m_areaCost.find(i);
if (it != m_areaCost.end()) return (*it).second 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T15:58:48.277

原因是`getAreaCost`被声明为`const`，就像其他人所说的那样，但我想提供更多建议：

一个函数应该总是返回一个有用的值，所以我建议`getAreaCost`是：

```
inline float getAreaCost(int i) const { 
    std::map<const int, float>::const_iterator It = m_areaCost.find(i);

    if (It != m_areaCost.end()) return It->second;

    return 0.0f;
} 
```

几点：
1.输入参数是传值，所以不需要`const int i`，直接用`int i`。
2\. 如果您发现诸如`std::map<const int, float>::const_iterator`冗长之类的内容，请给它一个`typedef`. （如果您不这样做，请随意继续写它，当然：P）
3.`0.0f`只是举例，您可以返回任何适合您情况的默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-25T12:20:12.117

因为您将方法标记为`const`.

当您这样做时`return m_areaCost[i];`，如果键不存在，您实际上可以在映射中创建条目，因此操作不是常量，因此您的常量函数和`operator[]`映射的非常量之间存在不匹配。

如果您希望成员函数成为，`const`那么您必须使用[`find`](http://en.cppreference.com/w/cpp/container/map/find)来查找键的条目。

# php - Stripe API：列出所有费用

> ID：15614736
> 
> 赞同：1
> 
> 时间：2013-03-25T12:17:18.157
> 
> 标签：php, stripe-payments

我正在使用[https://stripe.com/docs/api?lang=php#list_charges](https://stripe.com/docs/api?lang=php#list_charges)来获取**列出所有费用**，但在这里他们指定

> count 可选 — 默认为 10 要返回的对象数量的限制。计数可以在 1 到 100 个项目之间。

我有成千上万的条目，现在我怎么能得到所有。虽然如果我将计数设置为**100**，它会返回**110**条记录。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-29T06:15:30.260

您可以使用该`offset`参数。

获得 100 笔交易后，通过添加`offset=100`URL 进行另一个调用。

这将带来接下来的 100 笔交易，然后 make`offset=200`等等。

**更新：** `offset`部分不推荐使用参数：[API 更改日志 - 2015-09-23](https://stripe.com/docs/upgrades#2015-09-23)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-24T05:57:44.310

```
$charges = \Stripe\Charge::all();
foreach ($charges->autoPagingIterator() as $charge) {
  // Do something with $charge
} 
```

[参考。](https://stripe.com/docs/api?lang=php#pagination)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:18:24.510

是的，我得到了**偏移量**，我们可以获得所有记录。 ![在此处输入图像描述](../Images/d7a09993d7f6e11036f9d2fd7d57336b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-04T08:33:31.860

> 如果不推荐使用偏移量

```
 $result = [];
  $created_at = strtotime($request->end_data);
  //created_at should be today's date epoch. search google for epoch
  $has_more = false;
  $a = 0;
  do{
  print_r($a);
  \Stripe\Stripe::setApiKey(env('STRIPE_SECRET'));
  $temp = \Stripe\BalanceTransaction::all( array(
                'limit'   => 100,
                'created' => array(
                    'lte' => $created_at,
                )
              ));
  $result = array_merge($temp->data,$result);
  $created_at = $temp->data[99]->created_at;
  //api returns a parameter has_more(boolean), which means there is more 
  //data or not so you can also put that in while condition, for ex.
  // $has_more = $temp->has_more;
  $a++;

  }while($a < 5);

  dd($result); 
```

**这对我有用，我**能够一次获得 500 条记录，因为 $a < 5 api 命中 5 次，并且每次创建的参数都是 lte（小于等于）为每个 api 请求更改并返回比当前请求提供的先前记录。我还将每个 api 调用的结果附加到另一个结果数组

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T01:26:14.817

这是一个 PHP 示例： `\Stripe\Charge::all(array("limit" => 3, "offset" => 10));`

一个红宝石示例： `Stripe::Charge.all(limit: 3, offset:3)`

与 Stripe API 文档一样好，它们可以更清楚地说明如何过滤。

来源：[https](https://stripe.com/docs/api/php#list_charges) ://stripe.com/docs/api/php#list_charges，https : [//stripe.com/docs/api/ruby#list_charges](https://stripe.com/docs/api/ruby#list_charges)

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2013-03-25T21:03:14.537

不幸的是你不能。

我可以看到这样的功能在哪里可以用于会计目的或其他用途，但在向用户显示大量数据时实现某种分页通常是一种更好的用户体验。

如果您需要绝对控制一次显示多少条记录，我建议您在 charge.succeeded 事件上设置一个 webhook 并将您的费用存储在本地。

# android - 列表视图中的动画

> ID：15614738
> 
> 赞同：0
> 
> 时间：2013-03-25T12:17:20.890
> 
> 标签：android, android-listview, android-animation

我得到了一个包含图像的列表视图和一些覆盖它们的信息。我想这样做，当我点击一个图像信息时，它会从所有列表视图中淡出。然后我可以滚动图像并点击它们以获取此信息。怎么可能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:17:25.197

尝试`onClickListener`为图像视图实现一个。当您点击图像时，将调用侦听器，您可以更改信息的视图状态。

# android - 带有后台任务的 Android 服务

> ID：15614739
> 
> 赞同：0
> 
> 时间：2013-03-25T12:17:29.890
> 
> 标签：android, service, android-asynctask

我正在尝试创建具有后台任务的服务。线程启动并执行该过程后 24 小时。

我试过这样。但它不起作用。

```
public class MyService extends Service {

int counter = 0;
static final int UPDATE_INTERVAL = 10 * 1000; // / 1000 = 1 second
private Timer timer = new Timer();
Home home;

private boolean isRunning = true;

@Override
public IBinder onBind(Intent intent) {
    // Not implemented...this sample is only for starting and stopping
    // services.
    // Service binding will be covered in another tutorial
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    super.onStartCommand(intent, flags, startId);

    // Announcement about starting
    Toast.makeText(this, "Starting the Demo Service", Toast.LENGTH_SHORT)
            .show();

    // Start a Background thread
    isRunning = true;
    // Thread backgroundThread = new Thread(new BackgroundThread());
    BackgroundThread();

    // We want this service to continue running until it is explicitly
    // stopped, so return sticky.
    return START_STICKY;
}

@Override
public void onDestroy() {
    super.onDestroy();

    // Stop the Background thread
    isRunning = false;

    // Announcement about stopping
    Toast.makeText(this, "Stopping the Demo Service", Toast.LENGTH_SHORT)
            .show();
}

private void BackgroundThread() {

    timer.scheduleAtFixedRate(new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            Calendar c = Calendar.getInstance();
            String month = String.valueOf(c.get(Calendar.MONTH) + 1);
            String year = String.valueOf(c.get(Calendar.YEAR));
            String day = String.valueOf(c.get(Calendar.DAY_OF_MONTH));
            String months = null;
            if (month.startsWith("0") || month.startsWith("1")) {
                months = year + "-" + month + "-" + day;
                home.loadCalender(months);
            } else {
                months = year + "-" + "0" + month + "-" + day;
                home.loadCalender(months);
            }

        }
    }, 0, UPDATE_INTERVAL);
    /*
     * counter = 0; while(isRunning) { System.out.println(""+counter++);
     * //Thread.currentThread().sleep(5000);
     * 
     * }
     */

    System.out.println("Background Thread is finished.........");
} 
```

}

在我的主要活动中，我已经启动了服务......请帮助我完成这项任务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:19:47.087

[用于`AlarmManager`](http://developer.android.com/reference/android/app/AlarmManager.html)安排您的警报每天发生一次，使用`setRepeating()`(或也许`setInexactRepeating()`。请不要浪费用户的 RAM 试图让服务一直在运行，看着时钟滴答作响。

# php - 如何在php中显示表单的完成状态

> ID：15614741
> 
> 赞同：0
> 
> 时间：2013-03-25T12:17:33.343
> 
> 标签：php, ajax

实际上我想在我的网站注册表单中显示**“完成状态”** ..但不知道如何把这个...

我想像这个链接一样添加完成状态......

```
 Visit http://www.magicbricks.com/post-property-for-sale-rent/residential-commercial 
```

在这个链接中......当我们完成表格......完成状态增加......我想做这样......

但我不知道..任何人都可以就此向我提出建议..或提供任何类型示例的链接..

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-28T11:00:08.090

你为什么不试试准备好的脚本。它很容易实现。进度条取决于您的表单字段。

我有两个演示链接试试看。

```
http://www.hongkiat.com/blog/html5-progress-bar/
http://css-tricks.com/display-form/ 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:28:06.943

检查此示例是否对您的要求有用，

[表格完成百分比插件](http://nettuts.s3.amazonaws.com/266_progressSlider/jQuery%20UI/regForm.html)

# php - 如何使用 PHP 从我的计算机连接到远程数据库

> ID：15614744
> 
> 赞同：0
> 
> 时间：2013-03-25T12:17:38.967
> 
> 标签：php, postgresql

我是 PHP 和数据库的新手。我正在尝试从我的计算机连接到远程 Postgres 数据库。过去我通过使用 localhost 和 MySQL 数据库来完成此操作，但这是我第一次尝试连接另一台主机。这是我拥有的 PHP 代码：

```
 <?php
  $conn_string = "host=hostname.com port=xxxx dbname=dbname user=root password=root";

  $dbconn = pg_connect($conn_string);
  ?> 
```

我在互联网上阅读了几篇文章，说将主机名从 localhost 更改为提供的主机名就足够了，但它似乎不起作用。我还停用了我的防火墙，以防通信出现问题但没有成功。

正如我所说，我对此很陌生，过去我只使用过测试服务器（本地主机）。那时我使用的是 Wamp 和 Mamp 之类的软件，我将脚本文件放在 localhost 中。

所以，我的问题是：1）我应该在哪里保存具有上述代码行的 test.php 文件？2）这会解决问题还是我在这里遗漏了一些重要的概念？

我希望我想说的很清楚。如果我必须更具体一些，请告诉我。

谢谢 Dimtiris

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:18:17.600

首先，错误消息真的很有帮助。根据评论，我会说我怀疑您正在连接到正确的服务器。但是，您使用的是“root”用户名？Postgres 上出现这样的用户名是非常不寻常的。

第一个是放置文件的位置。这应该放在您的 Web 服务器的文档根目录或 cgi bin 中，具体取决于您的配置方式（可能是前者）。

对于您的第二个问题，请仔细检查用户名和密码，并确保您可以通过 pgAdmin III 使用这些用户名和密码连接到同一个数据库。如果事情不顺利，确保您拥有正确的凭据将使您的代码更容易排除故障。

# c# - 单页登录

> ID：15614747
> 
> 赞同：1
> 
> 时间：2013-03-25T12:17:44.937
> 
> 标签：c#, login, ssp

我有三个单独的 .aspx 页面来处理、登录、创建用户和重置密码。我想要做的是将它们全部合并到我的 default.aspx 页面中，如果用户未验证，则通过使用面板隐藏主要内容。

所以我的 Page_Load 看起来与此类似：

```
Page_Load 
{
  if (User.IsAutheticated)
  {

     this.pnlLoggedIn.Visible = true;
  }
  else
  {
    this.pnlNotLoggedIn.Visible = true;
  } 
```

我的 WebConfig，目前持有这些值来验证用户：

```
 <location path="CreateUser.aspx">
   <system.web>
     <authorization>
       <allow users="?"/>
     </authorization>
   </system.web>
   </location>
  <location path="RetrievePassword.aspx">
  <system.web>
    <authorization>
     <allow users="?"/>
   </authorization>
  </system.web>
 </location>

<authentication mode="Forms" >
    <forms loginUrl="Login.aspx"
      name=".ASPXFORMSAUTH"  />
  </authentication>

  <authorization>
    <deny users="?" />
  </authorization> 
```

关于如何将这一切都放在一个页面中的任何想法 - Default.aspx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:06:59.533

整理了这个。将 Login.aspx 更改为 Default.aspx - UpdatePanel 存在一些问题，但这是由于更改了解决方案驱动器。

# cocoa - NSMatrix 隐藏在 10.7 Lion 上

> ID：15614748
> 
> 赞同：3
> 
> 时间：2013-03-25T12:17:47.333
> 
> 标签：cocoa, osx-lion, nsmatrix

我在我的应用程序的不同位置有两个`NSMatrix`无线电控件。我正在 10.8 上开发，使用 10.8 SDK 并以 10.7 为目标。这些矩阵在我的开发计算机上完美运行，但是当我在运行 10.7 的 Mac 上进行测试时，两个矩阵都没有出现。我检查了自动布局支柱，我确保它们没有设置为隐藏。他们根本就没有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T10:44:03.667

我遇到了类似的问题，但是在我的 UI 中，来自不同位置的三个 NSMatrix 无线电控件（不同 xib 中的不同视图）的两个在 10.7 上正确显示，一个没有。我尝试了不同的东西，最后我删除了这个 NSMatrix 并重新放置。我在尺寸检查器中取消选中“自动调整单元格大小”和“自动计算单元格大小”。并且非常重要：我检查了整个视图中的所有自动布局约束，并确保所有对象都具有垂直/水平间距（彼此之间）或前导/尾随空间到超级视图约束，顶部对象是超级视图的顶部空间和底部对象底部空间到超级视图约束。瞧，它终于在 10.7 上出现了！

希望您能以类似的方式解决您的问题。看起来 NSMatrix 在带有自动布局的 10.7 上表现得非常像女主角！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:35:46.973

尝试完全禁用自动布局。在相关笔尖的文件检查器中取消选中“使用自动布局”。它对我有用。

# node.js - EventEmitter 创建

> ID：15614749
> 
> 赞同：3
> 
> 时间：2013-03-25T12:17:47.907
> 
> 标签：node.js

以下有什么区别：

```
new require('events').EventEmitter(); 
```

和

```
var events = require('events');
new events.EventEmitter(); 
```

第一个不工作，但第二个 - 工作。

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:32:37.333

注意这些行之间的区别：

`new foo().bar()`

... 和 ...

`new foo.bar()`

在第一种情况下，`new`运算符将更改`foo()`函数的处理方式：它将用作构造函数（`this`指向其原型副本等）

但是在第二种情况下，`new`运算符不能应用于`foo`，因为后者*没有被调用*：而是调用它的`bar`属性。自然，`new`这里的手段`foo.bar`被用作构造函数。

这正是您的示例中发生的情况：第一种情况试图应用于`new`函数`require`调用，而不是`%require_result%.EventEmitter`一个。

# sql - 选择中的 if 语句 (ORACLE)

> ID：15614751
> 
> 赞同：55
> 
> 时间：2013-03-25T12:17:49.547
> 
> 标签：sql, oracle, select, if-statement, oracle10g

嗨，我只是选择并且效果很好：

```
select 'CARAT Issue Open' issue_comment, i.issue_id, i.issue_status, i.issue_title, i.ISSUE_summary ,i.issue_description, i.severity,
gcrs.Area_name, gcrs.sector_name,

substr(gcrs.stream_name,1,case when instr(gcrs.stream_name,' (')=0 then 100 else instr(gcrs.stream_name,' (')-1 end) ISSUE_DIVISION,

case when gcrs.STREAM_NAME like 'NON-GT%' THEN 'NON-GT' ELSE gcrs.STREAM_NAME END as ISSUE_DIVISION_2

from table(f_carat_issues_as_of('31/MAR/2013')) i
inner join v_gcrs_with_stream gcrs on i.segment_id = gcrs.segment_id

where UPPER(ISSUE_STATUS) like '%OPEN%' 
```

现在我想调用两列：ISSUE_DIVISION 和 ISSUE_DIVISION_2

如果它们在新列中相等，则应为值 1 如果不相等则应为 0，

我该怎么做 ？

* * *

我的完整代码：

```
select 'CARAT Issue Open' issue_comment, i.issue_id, i.issue_status, i.issue_title, i.ISSUE_summary ,i.issue_description, i.severity,
gcrs.Area_name, gcrs.sector_name,

substr(gcrs.stream_name,1,case when instr(gcrs.stream_name,' (')=0 then 100 else instr(gcrs.stream_name,' (')-1 end) ISSUE_DIVISION,

case when gcrs.STREAM_NAME like 'NON-GT%' THEN 'NON-GT' ELSE gcrs.STREAM_NAME END as ISSUE_DIVISION_2

from table(f_carat_issues_as_of('31/MAR/2013')) i
inner join v_gcrs_with_stream gcrs on i.segment_id = gcrs.segment_id

where UPPER(ISSUE_STATUS) like '%OPEN%' and 

CASE WHEN ISSUE_DIVISION = ISSUE_DIVISION_2 THEN 
     CASE WHEN  ISSUE_DIVISION is null then "Null Value found"
     Else 1 End
ELSE 0 END As Issue_Division_Result 
```

但我在线收到错误：ELSE 0 END As Issue_Division_Result

ORA-00920: 无效的关系运算符 :(

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-25T14:15:38.610

```
SELECT (CASE WHEN ISSUE_DIVISION = ISSUE_DIVISION_2 THEN 1 ELSE 0 END) AS ISSUES
    --  <add any columns to outer select from inner query> 
  FROM
 (  -- your query here --
   select 'CARAT Issue Open' issue_comment, ...., ..., 
          substr(gcrs.stream_name,1,case when instr(gcrs.stream_name,' (')=0 then 100 else  instr(gcrs.stream_name,' (')-1 end) ISSUE_DIVISION,
          case when gcrs.STREAM_NAME like 'NON-GT%' THEN 'NON-GT' ELSE gcrs.STREAM_NAME END as ISSUE_DIVISION_2
     from ....
    where UPPER(ISSUE_STATUS) like '%OPEN%'
 )
 WHERE... -- optional -- 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-25T12:21:55.660

如此简单，您可以在此处使用**case**语句。

```
CASE WHEN ISSUE_DIVISION = ISSUE_DIVISION_2 THEN 
         CASE WHEN  ISSUE_DIVISION is null then "Null Value found" //give your option
         Else 1 End
ELSE 0 END As Issue_Division_Result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T05:32:06.477

使用该变量，Oracle 在没有 INTO 的情况下不支持 SQL。使用正确命名的变量，您的代码无论如何都会更加清晰。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-29T12:45:19.990

在一行中，答案如下；

[ CASE WHEN COLUMN_NAME = 'VALUE' THEN 'SHOW_THIS' ELSE 'SHOW_OTHER' END as ALIAS ]

# iphone - iOS6 中的旋转中断

> ID：15614752
> 
> 赞同：0
> 
> 时间：2013-03-25T12:17:52.360
> 
> 标签：iphone, ios, objective-c, ios6, orientation

我整个上午都在尝试解决这个问题，但无济于事。这是我的情况：

我的应用程序中有一个跨两个视图的导航控制器。第一个视图不应旋转远离纵向。第二个视图应该在纵向和横向之间旋转。返回第一个视图应将其发送回纵向。

这是我目前拥有的代码（我已经尝试过但没有成功，所以绝不是可靠的）：

应用委托：

```
- (NSUInteger)application:(UIApplication*)application
supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAll;
} 
```

导航控制器：

```
- (BOOL)shouldAutorotate
{
    return self.topViewController.shouldAutorotate;
} 
```

第一个视图控制器：

```
-(BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

第二个视图控制器：

```
-(BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

当前的行为是应用程序将在第一个 VC 上保持纵向，在第二个 VC 上正确旋转，但如果我在横向返回，第一个 VC 处于横向并停留在那里。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T13:25:39.257

我遇到了同样的问题，据我所知，由于自动旋转的工作方式，您无法修复它。但是，我确实想出了一个解决方法——在横向模式下，我隐藏了导航栏，禁用了点击后退按钮的选项。这可能对你有用，也可能对你不起作用，但如果你想出更好的解决方案，我很想听听。

# java - Android 工作 HttpRequest 类

> ID：15614753
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:17:55.283
> 
> 标签：java, android

我正在寻找一个工作`HtttpRequest`类，这样我就可以这样做：

```
String response = Request.get("http://google.com"); 
```

我已经写了一个类，但它不起作用，`Android 3+`但在 2.3 上它可以。

```
public class WebRequest {
public String get(String url){
    HttpClient httpclient = new DefaultHttpClient();
    try {
        HttpGet httpget = new HttpGet(url);

        // Create a response handler
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String responseBody = httpclient.execute(httpget, responseHandler);

        return responseBody;
    } catch (ClientProtocolException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    } finally {
        // When HttpClient instance is no longer needed,
        // shut down the connection manager to ensure
        // immediate deallocation of all system resources
        httpclient.getConnectionManager().shutdown();
    } 
```

}

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:32:38.033

你可以看看这个答案：[如何在 Android 中使用 Simple HTTP 客户端？](https://stackoverflow.com/questions/4457492/simple-http-example-in-android/4457526#4457526).

他们在那里使用这两种方法：

```
public static void connect(String url) 
{

    HttpClient httpclient = new DefaultHttpClient();

    // Prepare a request object
    HttpGet httpget = new HttpGet(url); 

    // Execute the request
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        // Examine the response status
        Log.i("Praeda",response.getStatusLine().toString());

        // Get hold of the response entity
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        // to worry about connection release

        if (entity != null) {

            // A Simple JSON Response Read
            InputStream instream = entity.getContent();
            String result= convertStreamToString(instream);
            // now you have the string representation of the HTML request
            instream.close();
        }

    } catch (Exception e) {}
}

private static String convertStreamToString(InputStream is)
{

    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

***更新***

使用 AsyncTask：[Android HTTP 请求 AsyncTask](https://stackoverflow.com/a/8829321/2140191)

***更新 2 - 简单版***

```
 public class XmlTask extends AsyncTask<String, Void, String>{

    public String doInBackground(String... urls){
        String url = urls[0];

        HttpClient httpclient = new DefaultHttpClient();

        // Prepare a request object
        HttpGet httpget = new HttpGet(url); 

        // Execute the request
        HttpResponse response;
        try {
            response = httpclient.execute(httpget);
            // Examine the response status
            Log.i("Praeda",response.getStatusLine().toString());

            // Get hold of the response entity
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release

            if (entity != null) {

                // A Simple JSON Response Read
                InputStream instream = entity.getContent();
                String result= convertStreamToString(instream);
                // now you have the string representation of the HTML request
                instream.close();
            }

                return xml;
            }
    }

    public void onPostExecute(String xml){
        // Your XML parsing statement here
    }
} 
```

创建此类后（并创建自己的 xml 解析器？！）使用以下内容：

```
String result = new XmlTask().execute("http://google.com"); 
```

# svn - 如何在 SVN 中比较打开的 office .ods 文件

> ID：15614755
> 
> 赞同：1
> 
> 时间：2013-03-25T12:17:57.427
> 
> 标签：svn, openoffice.org, ods

我无法将本地 ods 文件与 SVN 中的远程 ods 文件进行比较。他们有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T13:11:34.013

Subversion 不能本地区分二进制文件。Open Office 具有[比较文档](http://wiki.openoffice.org/wiki/Documentation/OOo3_User_Guides/Calc_Guide/Comparing_documents)功能；如果你可以编写脚本，你可以告诉 Subversion 使用它，因为你的`diff-cmd`TortoiseSVN 附带了一组脚本，可以为 MS Word 和 Open Office 文件执行此操作，所以如果你在 Windows 上，就没有太多事情要做了。

否则，看看[这里](https://stackoverflow.com/questions/6057055/open-office-and-subversion-compatibility)和[这里](http://www.t3node.com/blog/creating-a-diff-of-openoffice-odt-documents-on-the-command-line/)

# svn - svn+ssh、pageant 和 AUC 管理员权限

> ID：15614756
> 
> 赞同：1
> 
> 时间：2013-03-25T12:17:58.690
> 
> 标签：svn, ssh, uac, administrator, pageant

我在使用 svn+ssh 和 pageant 时遇到了一个奇怪的问题。我的系统 (W7 x64) 配置为使用最大 UAC 保护。

案例 1 - 开始选美并添加我的钥匙。- 从命令窗口使用 svn+ssh 访问 svn 档案工作正常。

案例 2 - 以管理员权限开始选美。并添加我的密钥 - 从以管理员权限运行的命令窗口使用 svn+ssh 访问 svn 存档。工作正常。

案例 3 - 开始选美并添加我的密钥 - 从以管理员权限运行的命令窗口使用 svn+ssh 访问 svn 档案失败。- 反过来也失败了。

我的结论是，选美必须以与尝试使用它的客户端相同的管理员权限执行。这给我带来了一些问题，因为我使用的是来自不同管理员的 svn+ssh。特权。

任何关于如何解决这个问题的想法都值得赞赏。

/拉尔斯

# ruby-on-rails - 在系统启动时启动 Rails

> ID：15614762
> 
> 赞同：0
> 
> 时间：2013-03-25T12:18:21.553
> 
> 标签：ruby-on-rails, ruby, ubuntu

我的 Ruby on Rails 安装有问题。我用 RVM 安装了 Ruby，然后用来`gem install rails`安装 Rails。该`rails`命令在终端中工作，但如果我关闭终端并`rails`再次尝试使用它会给我一个错误：

```
grega@spaceship:~$ rails -v
The program 'rails' can be found in the following packages:
 * rails
 * ruby-railties-3.2
Try: sudo apt-get install <selected package> 
```

使用`rvm -v`或`ruby -v`工作。

```
grega@spaceship:~$ rvm -v

rvm 1.18.21 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

grega@spaceship:~$ ruby -v
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

为了让rails再次工作，我必须执行`source .rvm/scripts/rvm`

RVM 被添加到 .bashrc 文件中：`PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting`

我是否忘记了一些东西，这会阻止我在启动时使用 Rails？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:42:40.270

将此添加到您的 bashrc ：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" 
```

# javascript - JQuery DateTimePicker 在 InternetExplorer 中不起作用

> ID：15614763
> 
> 赞同：0
> 
> 时间：2013-03-25T12:18:23.923
> 
> 标签：javascript, jquery, html, datepicker

我有一个在 Firefox 中运行良好但在 Internet Explorer(9) 中运行良好的日期选择器。谁能发现我做错了什么？

```
<head>
      <script type="text/javascript" src='<spring:theme code="jquery.timepicker"/>'</script>
</head>

<script type="text/javascript">
    $(function(){
        $('#globalSearchStartDate').datetimepicker({
            inline: true,
            dateFormat: 'dd-mm-yy'
        });
    });
</script> 
```

这是字段：

```
<td width=220 nowrap="nowrap"> Date From:&nbsp;<form:input path="globalSearchStartDate"/></td> 
```

当页面加载时没有任何作用 - 没有其他函数被调用。如果我在 Firefox 中尝试它可以正常工作，或者如果我将上面的功能注释掉，那么其他一切都可以正常工作。有人可以告诉我这里有什么问题吗？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:46:55.343

嘿`'>'`，您的 head 部分的脚本标记中缺少。除了IE，所有浏览器都是智能的。但是IE一直是让开发者头疼的问题。

# c# - 创建一个 Mailer 和 Mail 类。需要有关处置的建议

> ID：15614764
> 
> 赞同：2
> 
> 时间：2013-03-25T12:18:38.383
> 
> 标签：c#

我需要创建一个 System.Net.Mail 包装器，它可以与 IOC 一起以流畅的方式使用。

这个想法是有两个类，Mailer 和 Mail，使用如下：

```
IMailer mailer = new Mailer();
IMail mail = new Mail()
  .Attach("Photo", fileData, "image/jpg")
  .Body("This is the photo I forgot to send")
  .From("from@xyz.com")
  .Subject("The missing photo")
  .To("to@xyz.com");
mailer.New(mail).Send(); 
```

或者以完全流畅的方式，例如：

```
new Mailer()
  .New()
  .Attach("Photo", fileData, "image/jpg")
  .Body("This is the photo I forgot to send")
  .From("from@xyz.com")
  .Subject("The missing photo")
  .To("to@xyz.com")
  .Done()
  .Send(); 
```

我已经完成了大部分工作，但我在处理时遇到了问题。邮件类：

```
 public interface IMailer : IDisposable {
    IMailer New(IMail mail);
    IMail New();
    void Cancel();
    void Send();
    void SendAsync(SendCompletedEventHandler callback, Object token = null);
  } // IMailer

  public class Mailer : IMailer {
    private SmtpClient _client;
    private IMail _mail;

    public Mailer() {
      _client = new SmtpClient();
    } // Mailer

    public IMailer New(IMail mail) {
      _mail = mail;
      return this;
    } // New

    public IMail New() {
      _mail = new Mail(this);
      return _mail;
    } // New

    public void Cancel() {
      _client.SendAsyncCancel();
    } // Cancel

    public void Send() {
      Send(null, null);
    } // Send

    public void SendAsync(SendCompletedEventHandler callback, Object token = null) {
      Send(callback, token);
    } // SendAsync

    private void Send(SendCompletedEventHandler callback = null, Object token = null) {

      using (MailMessage message = new MailMessage()) {
        message.From = new MailAddress(_mail.Data.From);
        message.Subject = _mail.Data.Subject;
        _mail.Data.To.ForEach(x => message.To.Add(new MailAddress(x)));
        message.Body = _mail.Data.Text;

        _mail.Data.Attachments.ForEach(x => { message.Attachments.Add(new Attachment(new MemoryStream(x.Value.Item2), x.Key, x.Value.Item1)); });

        if (callback == null)
          _client.Send(message);
        else {
          _client.SendCompleted += callback;
          _client.SendAsync(message, token);
        }

      };

    } // Send

    public void Dispose() {
      Dispose(true);
    } // Dispose

    protected virtual void Dispose(Boolean disposing) {
      if (disposing) {
        if (_client != null)
          _client.Dispose();
      }
    } // Dispose

  } // Mailer 
```

包含邮件数据并构建邮件的邮件类如下：

```
 public interface IMail {
    MailData Data { get; }
    IMail Attach(String name, Byte[] file, String mime);
    IMail Body(String text);
    IMail From(String contact);
    IMail Subject(String subject);
    IMail To(String contact);
    IMailer Done();
  } // IMail

  public class Mail : IMail {
    private IMailer _mailer;
    public MailData Data { get; private set; }

    public Mail() {
      Data = new MailData();    
    } // Mail

    public Mail(IMailer mailer) {
      Data = new MailData();
      _mailer = mailer;      
    } // Mail

    public IMail Attach(String name, Byte[] file, String mime) {
      Tuple<String, Byte[]> attachment;
      if (!Data.Attachments.TryGetValue(name, out attachment))
        Data.Attachments.Add(name, new Tuple<String, Byte[]>(mime, file));
      return this;
    } // Attach

    public IMail Body(String text) {
      Data.Text = text;
      return this;
    } // Body

    public IMail From(String contact) {
      Data.From = contact;
      return this;
    } // From

    public IMail Subject(String subject) {
      Data.Subject = subject;
      return this;
    } // Subject

    public IMail To(String contact) {
      Data.To.Add(contact);
      return this;
    } // To

    public IMailer Done() {
      return _mailer;
    } // Done

  } // Mail  

  public class MailData {

    public Dictionary<String, Tuple<String, Byte[]>> Attachments { get; set; }
    public String From { get; set; }
    public String Subject { get; set; }
    public String Text { get; set; }
    public HashSet<String> To { get; set; }

    public MailData() {
      Attachments = new Dictionary<String, Tuple<String, Byte[]>>();
      To = new HashSet<String>();
    } // MailData

  } // MailData 
```

邮件程序使用 MailMessage，它在发送电子邮件后立即处理。

当我处理邮件程序时，SMTP 客户端也被处理...

但是，我不确定如何处理邮件本身。

这对于清除 MailData 字典中的所有附件文件很重要。

我应该能够通过两种方式做到这一点：

```
IMail mail = new Mail()
  .Attach("Photo", fileData, "image/jpg")
  // Define other properties of mail
// Send mail using mailer
mail.Dispose(); // Dispose mail 
```

或者完全流利的时候：

```
mailer
  .New()
  .Attach("Photo", fileData, "image/jpg")
  // Other properties of mail
  .Done()
  .Send()
  .Dispose(); 
```

这将处理邮件及其邮件......或者：

```
mailer
  .New()
  .Attach("Photo", fileData, "image/jpg")
  // Other properties of mail
  .Done()
  .Send()
  .Clear; 
```

这将处理与邮件程序相关联的邮件，而不是邮件程序，因此我可以使用相同的邮件程序发送另一封邮件。

或您可能建议的任何其他配置。

我不确定最好的方法...

欢迎任何建议。

谢谢你，

米格尔

注意：使用 IOC 时，我将在我的服务中注入 IMailer ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:46:42.447

我在您的代码中看到的唯一非托管资源是 SmtpClient。所以只有 IMailer 应该被处理掉。Mail 和 MailData 都是托管的，因此无需处理它们。所以你只需要调用 mailer.Dispose() 就可以了。

（顺便说一句，在 using 块中使用 Mailer 是个好主意。）

编辑：我刚刚注意到您还使用 SendAsnyc 这使得处理有点棘手。异步发送时，您应该在回调中调用 dispose。因此，您的私有 Send 方法似乎也有问题，因为它处理 MailMessage 对象（使用 using 块），但 SendAsync 可能仍需要它。

也可以看看：

*   [在 .NET 4.0 下使用 SmtpClient、SendAsync 和 Dispose 的最佳实践是什么](https://stackoverflow.com/questions/7276375)
*   [如何处理调用了异步方法的对象？](https://stackoverflow.com/questions/974945)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:59:25.540

我会一次性创建课程；也就是说，一个实例可以发送一封电子邮件，然后您将其丢弃。通过这种方式，您可以在调用 Send 时正确处理 IMail 和 IMailer 实现。您可以将您的 IoC 配置为在您请求 IMailer 时始终返回一个新的唯一实例。

这种设计还有一个额外的好处，即使用您的界面的人不会忘记处理它。

或者，您可以坚持使用块模式的标准，尽管在我看来总是很奇怪处理一个容器分发的东西。

# linux - 我需要使用 SED 将字符串替换为 url

> ID：15614765
> 
> 赞同：0
> 
> 时间：2013-03-25T12:18:43.323
> 
> 标签：linux, shell, sed

当我使用正常值时`a=10`

我能够让 sed 查找/替换工作

```
 sed -e "s/xxx/$a/g" a.txt 
```

但是当我尝试使用像这样的变量时`a=http://xyz.com`

`sed -e "s/xxx/$a/g" a.txt`不管用...

我认为它抛出未知选项错误是由于变量上存在转义字符

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T13:53:37.500

使用 awk，您的字符串可以包含任何字符，包括 /、@、换行符等：

```
$ a="http://xyz.com"
$ echo "<xxx>" | awk -v a="$a" '{gsub(/xxx/,a)}1
<http://xyz.com> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:23:46.497

尝试这个：

```
sed -e "s@xxx@$a@g" a.txt 
```

# sql - 从 SQL Server 2008 中的 CLR 程序集（具有加载非托管程序集的 pinvoke 方法）调用函数

> ID：15614767
> 
> 赞同：2
> 
> 时间：2013-03-25T12:18:50.863
> 
> 标签：sql, sql-server-2008-r2, interop, sqlclr, sql-function

我有一个 .Net 程序集（64 位环境），它具有 P/Invoke 方法来加载非托管程序集。我想将 .Net 程序集中可用的方法用于 SQL 存储过程。这样做的目的是记录 SQL 相关的异常和错误。

下面是 .Net 程序集中包含在 SQL 中的方法。**MyLogger.Logger.LogInfo**方法在***MyLogger***程序集中定义，该程序集内部具有 P/Invoke 方法来加载非托管程序集。

```
public class SQLLogger
{
    [Microsoft.SqlServer.Server.SqlFunction()]
    public static void LogInfoMessage(SqlString infoMessage)
    {            
        MyLogger.Logger.LogInfo(infoMessage.ToString());          
    } 
```

我构建了一个 .Net 程序集并在 SQL Server 2008 R2 中运行以下查询。

```
 CREATE assembly SQLLogger from 'C:\tmp\SQLLogger.dll' WITH PERMISSION_SET = SAFE 
```

我也将引用的内容保存`MyLogger.dll`在同一个文件夹中，并且出现以下异常。

> CREATE ASSEMBLY 失败，因为安全程序集“MyLogger”中的类型“MyLogger.Logger”具有 pinvokeimpl 方法。安全程序集中不允许使用 P/Invoke。

我尝试使用***权限集***的***无限制、外部访问***值手动在 sql 中创建程序集，但创建失败。

 ***在External Access Permission Set & Unrestricted Permission Set**的手动操作过程中出现以下错误。

> 为 SqlAssembly 'SQLLogger' 创建失败。(Microsoft.SqlServer.Smo) 附加信息：
> 
> 执行 Transact-SQL 语句或批处理时发生异常。(Microsoft.SqlServer.ConnectionInfo)
> 
> 程序集“mylogger，版本=1.0.0.0，文化=中性，publickeytoken=b8f8bb225641c4a3。” 在 SQL 目录中找不到。（Microsoft SQL Server，错误：6503）

有一些相关的帖子，但我没有得到任何解决方案，

[从 SQL Server 2008 调用非托管 C/C++ DLL 函数](https://stackoverflow.com/questions/8527588/calling-unmanaged-c-c-dll-functions-from-sql-server-2008)

[http://social.msdn.microsoft.com/Forums/en-US/sqlnetfx/thread/4a032c4b-1402-4c53-b34e-8c8bd724f904](http://social.msdn.microsoft.com/Forums/en-US/sqlnetfx/thread/4a032c4b-1402-4c53-b34e-8c8bd724f904)

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T10:59:48.730

所以它抱怨它不能自动加载引用的程序集，如果你也尝试加载另一个程序集会发生什么，如下所示：

```
CREATE ASSEMBLY MyLogger FROM 'C:\tmp\MyLogger.dll' WITH PERMISSION_SET = UNSAFE 
```

然后尝试您的参考程序集：

```
CREATE ASSEMBLY SQLLogger FROM 'C:\tmp\SQLLogger.dll' WITH PERMISSION_SET = UNSAFE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:46:01.807

您是否尝试使用 PERMISSION_SET=UNSAFE？这是必需的，因此程序集可以使用非托管资源。*

# c# - 验证“/”字符时出现正则表达式问题

> ID：15614770
> 
> 赞同：4
> 
> 时间：2013-03-25T12:18:59.973
> 
> 标签：c#, .net, regex

我在使用正则表达式时遇到了一些问题。我想在输入公交车号时验证用户输入。

示例：37、37A、37S、37A/L、16A/250、16A/250K 等

我想出的正则表达式是

```
(^\d{1,3}[A-Z]{0,3})|(^[\d{1,3}[A-Z]{0,3}\/\d{0,3}[A-Z]{0,3}]) 
```

它验证 37、37A、37S，但在验证 37A/L 时失败。有人能告诉我我哪里出了问题吗？

注意：我正在为文本框使用正则表达式验证器。我已将它放在 ValidationExpression 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:21:15.453

您不需要转义`/`字符，请尝试以下操作：

```
(^\d{1,3}[A-Z]{0,3}(?:/\d{0,3}[A-Z]{0,3})?) 
```

您还可以通过指定 EOS 字符来强制整行与正则表达式匹配：

```
(^\d{1,3}[A-Z]{0,3}(?:/\d{0,3}[A-Z]{0,3})?$) 
```

注意@MaxwellTroyMiltonKing 在评论中指出整个正则表达式周围的括号是不必要的：

```
^\d{1,3}[A-Z]{0,3}(?:/\d{0,3}[A-Z]{0,3})?$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:21:46.170

由于未指定字符串结尾，因此出现问题。

换成这个，

```
(^\d{1,3}[A-Z]{0,3}$)|(^\d{1,3}[A-Z]{0,3}\/\d{0,3}[A-Z]{0,3}$) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:24:10.660

尝试这个：

```
^(\d{1,3}[A-Z]{0,3})(\/\d{0,3}[A-Z]{0,3})?$ 
```

# java - 想用等效的 UTF-8 符号替换特殊字符

> ID：15614773
> 
> 赞同：0
> 
> 时间：2013-03-25T12:19:14.100
> 
> 标签：java, xml

作为我的应用程序的一部分，我编写了一个自定义方法来从数据库中提取数据并将其作为字符串返回。我的字符串有特殊字符，如井号，提取时如下所示：

> “MyMobile Blue £54.99 [12 个月期限]”

我想要 £ 替换为实际的英镑符号。下面是我的方法：

```
public String getOfferName(String offerId) {
    log(Level.DEBUG, "Entered getSupOfferName");
    OfferClient client = (OfferClient) ApplicationContext
            .get(OfferClient.class);
    OfferObject offerElement = getOfferElement(client, offerId);
    if (offerElement == null) {
        return "";
    } else {

        return offerElement.getDisplayValue();
    }
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:34:04.463

该文档包含[XML/HTML 实体](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references)。

您可以使用[commons-lang](http://commons.apache.org/proper/commons-lang/)[`StringEscapeUtils.unescapeXml()`](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#unescapeXml%28java.lang.String%29)中的方法将它们解析回它们的 unicode 等价物。

如果这是 HTML 而不是 XML，请使用[其他方法](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/StringEscapeUtils.html#escapeHtml4%28java.lang.String%29)，因为这两组实体存在差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T13:54:38.517

我投票支持 StringEscapeUtils.unescapeXml() 解决方案。无论如何，这是一个自定义解决方案

```
 String s = "MyMobile Blue &#163;54.99 [12 month term]";
    Pattern p = Pattern.compile("&#(\\d+?);");
    Matcher m = p.matcher(s);
    StringBuffer sb = new StringBuffer();
    while(m.find()) {
        int c = Integer.parseInt(m.group(1));
        m.appendReplacement(sb, "" + (char)c);
    }
    m.appendTail(sb);
    System.out.println(sb); 
```

输出

```
MyMobile Blue £54.99 [12 month term] 
```

请注意，它不接受十六进制实体引用

# ios - iPad 上 UIPopoverController 中 UIActionSheet 的自定义背景

> ID：15614777
> 
> 赞同：0
> 
> 时间：2013-03-25T12:19:23.193
> 
> 标签：ios, ipad, uikit, uipopovercontroller, uiactionsheet

我基本上在做的是在 iPad 应用程序中从 a中展示`UIActionSheet`使用 showFromBarButtonItem 。它的作用是存在于 a中，这是我想要的。`UIBarButtonItem``UINavigationBar``UIActionSheet``popover`

我想做的是将所述弹出框的背景颜色从默认的蓝色更改为我自己的。有没有一种简单的应用商店安全的方法来完成这一点，而不是`UIActionSheet`在弹出解决方案中滚动我自己的自定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:08:43.123

不是真的，因为您无法获得对底层 UIPopoverController 或其内容视图控制器的任何部分的官方访问权限，更不用说视图了。另一方面，正如您所暗示的，构建自己的视图控制器和视图非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T23:57:22.590

使用类似于 UIActionSheet 的行为创建自己的视图将非常容易

这是一个例子：http: [//iosdevtricks.blogspot.com/2013/04/ipad-style-action-sheet-for-iphone.html](http://iosdevtricks.blogspot.com/2013/04/ipad-style-action-sheet-for-iphone.html)

# loops - DO 循环排除 Fortran 中的几个值

> ID：15614778
> 
> 赞同：1
> 
> 时间：2013-03-25T12:19:25.243
> 
> 标签：loops, fortran

如何在 Fortran 中实现这一点？

```
 do i = 1, n Except n/2 
```

有没有一种方便的方法而不是在循环中使用'if'？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T14:28:26.333

有很多解决方案。这是一个使用`cycle`. 它仍然`if`在循环中有一条语句，但没有`if ... end if`块。

```
MyLoop: do i=1, N
   if ( i == N/2 ) cycle MyLoop

   !  use the loop....
   write (*, *) i
end do MyLoop 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-25T12:41:59.940

如果您厌恶循环内的条件

```
do i  = 1,(n/2)-1
 ...
end do
do i = (n/2)+1,n
 ...
end do 
```

如果`n`是或可能是奇怪的，您将需要调整循环的停止/开始索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:39:51.097

`if`在循环中放置一个语句

```
do i=1,n
  if (i /= n/2) ...
end do 
```

或`forall`带有掩码的语句或`where`语句可以在某些情况下使用。

# java - JAVA - Tftp 客户端如何设置块大小

> ID：15614781
> 
> 赞同：2
> 
> 时间：2013-03-25T12:19:29.120
> 
> 标签：java, networking, tftp

我正在编写一个 tftp 客户端，只要我使用默认块大小（512），它就可以正常工作。但由于这是一项学校作业，我还需要使用 1430 和 4300 的块大小对其进行测试。

当我第一次与服务器通信时，我使用这种方法：

```
public void setFilename( String s, String mode) {
        byte []a = s.getBytes();
        int i,j,k;
        for ( i=0; i+2<lenght && i<a.length; i++ ) {
            packet[i+2] = a[i];
        }
        packet[i+2] = 0;
        a = mode.getBytes();
        for ( j=0,i++; i<lenght && j<a.length; i++,j++ ) {
            packet[i+2] = a[j];
        }
        packet[i+2] = 0;

    } 
```

它将设置我要读取的文件名。它工作得很好。

但我已经改变了它，所以我可以定义一个块大小：

```
public void setFilename( String s, String mode, String blockSize ) {
        byte []a = s.getBytes();
        int i,j,k;
        for ( i=0; i+2<lenght && i<a.length; i++ ) {
            packet[i+2] = a[i];
        }
        packet[i+2] = 0;
        a = mode.getBytes();
        for ( j=0,i++; i<lenght && j<a.length; i++,j++ ) {
            packet[i+2] = a[j];
        }
        packet[i+2] = 0;

        a = BLOCKSIZE.getBytes();
        for ( k=0,i++; i<lenght && k<a.length; i++,k++ ) {
            packet[i+2] = a[k];
        }
        packet[i+2] = 0;

        a = blockSize.getBytes();
        for ( k=0,i++; i<lenght && k<a.length; i++,k++ ) {
            packet[i+2] = a[k];
        }
        packet[i+2] = 0;

    } 
```

这里 BLOCKSIZE = "blksize" (string) 和 blockSize = 1430 (int); 问题是，它不起作用：-/

有人可以向我解释如何定义块大小吗？

感谢你们 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T09:59:09.837

问题出在阅读部分而不是在这里。如果有人感兴趣，这是构建数据包的完整代码:-)

/** *

```
* TftpPacket - 将字节数组视为 tftp 数据包。
 *
 *根据 TFTP 协议（​​rfc 1350、2347）的消息格式。
 *注意：此实现假定所有使用的 JAva 字符串仅包含
 * ASCII 字符。如果不是这样，lenght() 和 getBytes() 返回不同的值
 * 可能会出现意想不到的问题...

*tftp 请求数据包
 * 2 字节字符串 1 字节字符串 1 字节可选选项（字符串）
 * -----------------------------------------+ - - - + - + - - - + - + ->
 *RRQ/WRQ | 01/02 | 文件名 | 0 | 模式 | 0 | 选择1 | 0 | 值1| 0 | ...
 * -----------------------------------------+ - - - + - + - - - + - + ->
 * 模式（ascii 字符/每个 1 字节）：
 * "netascii", "八位字节",...
 *
 * 2 字节 2 字节 n 字节
 * ---------------------------------
 *数据 | 03 | 块# | 数据 |
 * ---------------------------------
 * 2 字节 2 字节
 * -------------------
 *确认 | 04 | 块# |
 * --------
 * 2 字节 2 字节 字符串 1 字节
 * --------------------------
 *错误 | 05 | 错误代码 | 错误消息 | 0 |
 * --------------------------
 * 错误代码：
 * 0 未定义，请参阅错误消息（如果有）。
 * 1 文件未找到。
 * 2 访问冲突。
 * 3 磁盘已满或超出分配。
 * 4 非法 TFTP 操作。
 * 5 未知的传输 ID。
 * 6 文件已经存在。
 * 7 没有这样的用户。
 *
```

*/

```
public class TftpPacket {

// Opcodes
protected static final short RRQ=1;
protected static final short WRQ=2;
protected static final short DATA=3;
protected static final short ACK=4;
protected static final short ERROR=5;
protected static final String BLOCKSIZE = "blksize";

byte []packet;
int lenght;

/**
 *  Builds a view to a byte array as a tftp packet.
 *  The original byte array is the one manipulated by all methods
 */
public TftpPacket( byte []data, int len ) {
    packet = data;
    lenght = len;
}

/**
 *  Gets number at first two bytes of packet
 */
public int getOpcode() {
    return (packet[0]<<8)|(packet[1]&0xff);  //net byte order = Big-Endian
}

/**
 *  Sets first two bytes of packet
 */
public void setOpcode(int code) {
    packet[0] = (byte) ((code>>8)&0xff);
    packet[1] = (byte) (code&0xff);
}

/**
 *  Gets string starting at byte 2
 */
public String getFileName() {
    int i;
    for ( i=2; i<lenght; i++ )
        if (packet[i]==0) //end of string
            return new String(packet, 2, i-2);
    return null;
}

/**
 *  Sets two strings (NUL terminated) starting at byte 2
 */
public void setFilename( String s, String mode, String blockSize ) {
    byte []a = s.getBytes();
    int i,j,k;
    for ( i=0; i+2<lenght && i<a.length; i++ ) {
        packet[i+2] = a[i];
    }
    packet[i+2] = 0;
    a = mode.getBytes();
    for ( j=0,i++; i<lenght && j<a.length; i++,j++ ) {
        packet[i+2] = a[j];
    }
    packet[i+2] = 0;

    a = BLOCKSIZE.getBytes();
    for ( k=0,i++; i<lenght && k<a.length; i++,k++ ) {
        packet[i+2] = a[k];
    }
    packet[i+2] = 0;

    a = blockSize.getBytes();
    for ( k=0,i++; i<lenght && k<a.length; i++,k++ ) {
        packet[i+2] = a[k];
    }
    packet[i+2] = 0;

}

/**
 *  Gets second string in packet
 */
public String getMode(){
    for ( int i=2; i<lenght; i++ )
        if (packet[i]==0) { //end of 1st string
            for ( int j=i+2; j<lenght; j++ )
                if ( packet[j]==0 ) return new String(packet, i+1, j-i-1);
        }
    return null; 
}

/**
 *  Gets number at bytes 2 and 3 of packet (can be block count or error code)
 */
public int getBlockCount() {
    return (packet[2]<<8)|(packet[3]&0xff);  //net byte order = Big-Endian
}

/**
 *  Sets bytes 2 and 3 of packet (can be block count or error code)
 */
public void setBlockCount(int count) {
    packet[2] = (byte) ((count>>8)&0xff);
    packet[3] = (byte) (count&0xff);
}

/**
 *  Sets string (NUL-terminated) starting at byte 4
 */
public void setErrMsg( String s ) {
    byte []a = s.getBytes();
    int i;
    for ( i=0; i<a.length; i++ ) {
        packet[i+4] = a[i];
    }
    packet[i+4] = 0;
} 
```

}

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-25T14:43:21.610

我建议您使用 Wireshark 并查看数据包如何被整合并发送到网络。这样，在代码中组装 TFTP 协议时，您可以非常快速地发现任何问题。

# spring - 无法自动装配 jaxrs 客户端

> ID：15614786
> 
> 赞同：1
> 
> 时间：2013-03-25T12:19:49.120
> 
> 标签：spring, cxf, jax-rs, autowired

我的 applicationContext.xml 中有这个（我正在使用[http://cxf.apache.org/jaxrs](http://cxf.apache.org/jaxrs)）

```
<context:annotation-config />
<context:component-scan base-package="br.com.test" />

<bean id="jsonProvider" class="com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider" />

<jaxrs:client id="testClient"
  serviceClass="br.com.test.ws.InterfaceServiceTest"
  address="http://localhost:8080/ocs-teste-ws-web/services/myservice">

  <jaxrs:providers>
    <ref bean="jsonProvider" />
  </jaxrs:providers>
</jaxrs:client> 
```

我在这个项目中包含了带有接口的 jar，但我得到了以下异常：

1318 [localhost-startStop-2] 错误 org.springframework.web.context.ContextLoader - 上下文初始化失败 org.springframework.beans.factory.BeanCreationException：创建名为“someBeanImpl”的 bean 时出错：注入自动装配的依赖项失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：无法自动装配字段：br.com.test.ws.InterfaceServiceTest br.com.test.impl.SomeBeanImpl.interfaceServiceTest；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有为依赖项找到类型为 [br.com.test.ws.InterfaceServiceTest] 的匹配 bean：预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者。依赖注解：{@org.springframework.beans.factory.annotation.Autowired(required=true)}

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-20T04:16:27.033

不要在您尝试注入客户端的类中使用@Autowired，而是使用@Resource。因为@Autowired 和@Inject

1) 按类型匹配 2) 按限定符限制 3) 按名称匹配

和@Resource

1) 按名称匹配 2) 按类型匹配 3) 按限定符限制（如果按名称找到匹配则忽略）

在您的情况下，您使用代理，因此类类型不是您想要的。使用@Resource，您可以从按名称查找开始。

# javascript - Javascript/python 设计协助

> ID：15614787
> 
> 赞同：0
> 
> 时间：2013-03-25T12:19:50.733
> 
> 标签：javascript, python

我正在运行一个外部网站，该网站从我们内部公司 Intranet 上的 iframe 中收集数据。这部分是用 Javascript 编写的，并且正在运行。但是，现在我需要访问 js 正在收集的数据，以便在 python 中进一步处理它。它不是用 Javascript 处理的选项，而且这在技术上是不可能的。

我会很感激一些关于从这里去哪里的指示？如何将 javascript 数据放入我的 python 脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T03:37:35.643

您将需要使用 AJAX 调用将 javascript 数据传递到后端的服务器以供 python 处理，最好的方法是将您的数据编码为 JSON 对象并将其传递给 AJAX 调用：

```
json_obj = {your:[data]};
$.ajax{
    url: [url of webservice/action],
    type: "POST",
    data: json_obj,
    dataType: "json",
    success: function(result) {
     //Write your code here
    }
}
//Note that this does run asynchronously, so the code that follows this will not wait for the ajax call to finish 
```

Python 有一个漂亮的模块**json**，您可以使用它来将 JSON 对象解码为 Python 对象，方法是：

```
import json

data_obj = json.loads(json_data_string) 
```

这会将您在 javascript 中组装的 json 字符串然后通过 AJAX 传递给 python 到 Python 结构（字典或列表，取决于您的对象的构建方式）中，以便于 python 处理。

然后，您可以使用 dumps() 函数传回 JSON 字符串：

```
data_str = json.dumps(data_obj) 
```

资料来源：

*   [Python JSON 模块文档](http://docs.python.org/2/library/json.html)
*   [AJAX 示例](http://www.intelligrape.com/blog/2010/06/11/jquery-send-json-object-with-an-ajax-request/)

# ruby-on-rails - 'require': 无法加载此类文件 -- script/../config/boot (LoadError)

> ID：15614788
> 
> 赞同：0
> 
> 时间：2013-03-25T12:19:53.480
> 
> 标签：ruby-on-rails, ruby, gem, cas

尝试使用以下命令运行[ruby​​cas-client中可用的示例](https://github.com/rubycas/rubycas-client)

```
 $ ruby script/server 
```

但得到以下错误。

```
 /home/xxxxx/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in 'require': cannot load such file -- script/../config/boot (LoadError) from /home/xxxxx/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in 'require' from script/server:2:in '<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T15:41:45.743

`rails s`从项目根目录尝试。

您尝试的命令是启动服务器的 Rails 2 方式。虽然 ruby​​cas-client 项目可能有那个命令......

# photoshop - 如何制作大尺寸广告牌？

> ID：15614789
> 
> 赞同：-3
> 
> 时间：2013-03-25T12:19:55.323
> 
> 标签：photoshop, adobe-illustrator

我需要创建一个 7m 宽和 3m 高的广告牌。

我从 Photoshop 开始，在看到干净的文件大约 18gb 后，我说嗯嗯……然后我尝试了 Adob​​e illustrator，但它允许最大文件宽度为 577,95cm，即 5.7m。

如何创建广告牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:32:09.297

这么大的广告牌通常以非常低的分辨率打印。对于这种大小的图像，您可能需要不超过 15-30 DPI，它会大大减少您的文件大小。

# javascript - jQuery.each() 在 Firefox 和 IE 中不起作用？

> ID：15614790
> 
> 赞同：1
> 
> 时间：2013-03-25T12:19:57.947
> 
> 标签：javascript, jquery, internet-explorer, firefox

我在浏览器之间使用 $.each 函数时遇到问题。

我有带有背景图像的列表，如果它们完成加载父 DIV 将淡入。

我不知道我的代码是否正确编写（但控制台中没有 js 错误）。此代码在 google chrome 中运行良好，但在 Firefox 和 IE 中运行良好（尤其是在版本 8 和 .9 中）。

HTML：

```
<ul id="slides">
<li id="slides1"><p><a href="#"><img src="http://placekitten.com/g/200/100" alt=""></a></p></li>
<li id="slides2"><p><a href="#">No.2</a></p></li>
<li id="slides3"><p><a href="#">No.3</a></p></li>
<li id="slides4"><p><a href="#">No.4</a></p></li>
<li id="slides5"><p><a href="#">No.5</a></p></li>
</ul> 
```

对不起'回合凌乱的代码。

JS：

```
var _imgCounter = 0;
var _parent = $('#slides');
var _child = $('#slides li');
var _childL = _child.length;
var _imgURLArr = [];
var _imgURL;
var _dummyImg;

_child.each(function() {
    _imgURL = $(this).css('background-image');
    _imgURL = _imgURL.substring(4, _imgURL.length - 1);//omit 'url()'
    _imgURLArr.push(_imgURL);
    console.log(_imgURL);
});
console.log(_imgURLArr.length);
$.each(_imgURLArr, function(i,val) {
    var _tempImg = $('<img/>').attr('src',val);
    _tempImg.one('load', function() {
        console.log(val + 'is loaded!');
        _imgCounter++;
        console.log('counter is ' + _imgCounter);
        if(_imgCounter == _childL) {
            _parent.fadeIn('fast');
        }
    });
    if(_tempImg.complete) {
        _tempImg.trigger('load');
    }
}); 
```

演示：http: [//jsfiddle.net/nori2tae/g8MHs/](http://jsfiddle.net/nori2tae/g8MHs/)

我在这里提到了加载技术：http: [//goo.gl/971A9](http://goo.gl/971A9)

这似乎不会触发 FF 和 IE 中的 $.each 函数。

需要一些解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-25T12:38:25.280

您的问题不在于`each`函数，而在于 URL 中包含引号的事实。也就是说，字符串的值为

`"http://dummyimage.com/640x400/0f0/fff.png"`,

并且在设置图像 URL 时，Firefox 会对其进行解析，然后将其视为相对 URL 并尝试访问

`http://fiddle.jshell.net/nori2tae/g8MHs/show/%22http://dummyimage.com/640x400/0f0/fff.png%22`

这会导致 404，这意味着永远不会调用负载处理程序。

**修理：**

改变

`_imgURLArr.push(_imgURL);`

至

`_imgURLArr.push(_imgURL.replace(/"+/g,""));`

消除引号。

这是更新的工作[jsFiddle 示例](http://jsfiddle.net/opherv/MWHBe/)

我还建议在图像加载失败时添加一个处理程序，这样可以在尝试调试脚本的实现时为您节省一些头发：)

# php - PHP中的单词边界

> ID：15614794
> 
> 赞同：2
> 
> 时间：2013-03-25T12:20:06.493
> 
> 标签：php, regex, preg-match, word-boundary

在 PHP中，字母前后的变音符号构成单词边界 ( [)](http://en.wikipedia.org/wiki/Arabic_diacritics)`\b`，这不是所需的行为。在其他编程语言中是否正常？（我知道大多数语言都存在`\b`和问题`\w`）我应该如何有效地解决这个问题？

从 Unicode 的角度来看，哪些 Unicode 类别构成了单词边界？

这是一个例子：

```
<?php
 preg_match_all('#\bج\b#u','مَجْل',$t); // the font of this site does not display diacritics
var_dump($t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:24:33.333

在 PCRE 中：

> \d 任何 \p{Nd} 匹配的字符（十进制数字）
> 
> \s 任何 \p{Z} 匹配的字符，加上 HT、LF、FF、CR
> 
> \w 任何 \p{L} 或 \p{N} 匹配的字符，加上下划线

根据定义，您可以在 Unicode 模式下`\w`推断定义。`\b`因此，即使对于 `Åström`逻辑上具有两个单词边界的字符串（分解的字符），也会检测到多个单词边界`*A*̊*stro*̈*m*`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T21:42:37.263

这只是一种解决方法：

```
preg_match_all('#(\p{M}*\p{Arabic}*\p{M}*)*ج(\p{M}*\p{Arabic}*\p{M}*)*#u','مَجْل جميل testجواد',$t); // the font of this site does not display diacritics
print_r(array_filter(array_map('array_filter', $t))); 
```

输出：

```
Array
(
    [0] => Array
        (
            [0] => مَجْل
            [1] => جميل
            [2] => جواد
        )

) 
```

我发现它`\p{M}`会匹配**teshkil**，并且`\p{Arabic}`会匹配一个**阿拉伯字母**。

# sparql - Twinkle Sparql 工具失败

> ID：15614796
> 
> 赞同：0
> 
> 时间：2013-03-25T12:20:09.060
> 
> 标签：sparql

我已经下载了 Twinkle sparql 查询工具，但是在编写我从[此处](http://www.dbis.informatik.uni-goettingen.de/Teaching/SemWeb/semwebBlatt1ML.pdf)的 mondial 手册获得的以下查询时，我收到了一个错误：

```
prefix mon: <http://www.semwebtech.org/mondial/10/meta#>
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
SELECT ?N ?P
FROM <file:mondial.n3>
WHERE {?X rdf:type mon:Country . ?X mon:name ?N . ?X mon:population ?P .
FILTER (?P > 10000000) }
ORDER BY DESC(?P) 
```

查询异常错误：

```
com.hp.hpl.jena.query.QueryException: Unexpected error executing query 
```

该工具出现错误，有关如何解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:57:32.557

尝试从命令行启动 Twinkle。发生错误时，应用程序会将有关错误的更详细信息记录到标准输出中，因此请确保您看到它。

（例如，问题可能很简单，例如 Twinkle 没有找到所引用的文件`file:mondial.n3`——当前工作目录可能不是您所期望的；因此您可能希望提供一个文件：具有绝对路径的 URI 等。 )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:57:22.517

Mondial 数据集有多大？

Twinkle 在后台使用 ARQ 并将数据加载到内存数据集中以进行查询，因此您可能尝试加载太大的数据集并遇到 Twinkle 对您隐藏的 OOM 错误。

您可以尝试在使用标准 JVM 参数启动 Twinkle 时增加 JVM 堆大小，但如果数据集特别大，您将无法在没有大量 RAM 的情况下将其加载到 JVM 中。同样对于大型数据集，内存数据集的查询性能会很糟糕。

# hibernate - 将 Spring、Hibernate 3.6.3-JPA 应用程序迁移到 Hibernate 4

> ID：15614813
> 
> 赞同：0
> 
> 时间：2013-03-25T12:20:54.857
> 
> 标签：hibernate, migration

您好，我正在尝试将 Hibernate 3.6.3 应用程序迁移到 Hibernate 4，但出现以下错误：

```
 Invalid property 'dataSource' of bean class 
 [org.springframework.orm.jpa.LocalEntityManagerFactoryBean]: 
 Bean property 'dataSource' is not writable or has an invalid 
 setter method. Does the parameter type of the setter match the 
 return type of the getter? 
```

我看过这篇文章： [integration JPA and SpringIOc](https://stackoverflow.com/questions/13357533/integrating-jpa-and-springioc)

当我使用 LocalEntityManagerFactoryBean 时，我得到了上面提到的错误，但是当我使用 LocalContainerEntityManagerFactoryBean 时，我在创建我的 DAO bean 时得到了一个错误。

我认为这是 spring.orm 依赖配置的问题，但我不确定，因为我所做的所有依赖更改都不起作用。

我在哪里可以找到 Hibernate 4 迁移指南以适应我的 JPA、Hibernate 3.6.3 和 Spring 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:33:06.570

根据[文档](http://static.springsource.org/spring/docs/3.2.2.RELEASE/javadoc-api/org/springframework/orm/jpa/LocalEntityManagerFactoryBean.html)

> 此 EntityManagerFactory 引导程序适用于仅使用 JPA 进行数据访问的独立应用程序。如果要为外部数据源和/或跨多个资源的全局事务设置持久性提供程序，则需要将其部署到完整的 Java EE 5 应用程序服务器中并通过 JNDI 访问已部署的 EntityManagerFactory，或使用 Spring 的LocalContainerEntityManagerFactoryBean，根据 JPA 的容器合同为本地设置进行适当的配置。

这意味着您可能必须使用`LocalContainerEntityManagerFactoryBean`而不是`LocalEntityManagerFactoryBean`

```
<bean id="entityManager" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    ....
    ....
</bean> 
```

前任：

# java - 画布可以处理双数作为点吗？

> ID：15614817
> 
> 赞同：4
> 
> 时间：2013-03-25T12:21:04.263
> 
> 标签：java, java-canvas

是否`canvas`能够处理`double`诸如此类的数字`0.5, 10.4`？或者这是否会在内部四舍五入为整数（如果是，如何？）。

我问是因为我认为画布上的元素表示为像素。

而且由于像素始终是大小`1x1`（如果我错了，请纠正我），如果我`double`向画布函数而不是提供值，是否有更准确的绘图的优势`integer`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:13:05.620

分数坐标是可能的，因为浏览器可以使用它们在像素级别上插值。对于轮廓，这会产生抗锯齿，而对于内部像素，这种插值可能会使事情变得有点模糊。特别是如果您的对象不是由单个像素形成，而是由相当平滑的东西（例如圆形）形成，那么由于我们感知反像素的方式，在子像素级别渲染可以给用户一个比实际物理可能分辨率更高的印象-别名轮廓。

但是正如[raina77ow](https://stackoverflow.com/users/1229023/raina77ow)[在对您的问题的评论中](https://stackoverflow.com/questions/15614817/can-a-canvas-handle-double-numbers-as-points#comment22146646_15614817)所说的那样，这是以浏览器增加工作为代价的，这会导致性能下降。所以我会使用这些准则来做出决定：

*   如果要绘制的东西是由像素区域组成的，所有的填充都是相同的颜色，并且相邻区域之间的对比度很高，那么我会使用整数坐标，因为双坐标会导致模糊，这可能看起来很糟糕。
*   如果你只画一些东西而不经常，并且需要几何精度，那么使用双坐标。
*   如果您必须担心性能，请使用整数坐标。

由于您的问题也被标记为[java](/questions/tagged/java "显示标记为“java”的问题")：看看[`RenderingHints`](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/RenderingHints.html). 笔画控制设置将控制坐标是否在某些情况下进行四舍五入，而抗锯齿和插值设置将影响小数位置的渲染方式，第一个用于矢量轮廓，第二个用于光栅图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T11:12:53.837

不，我不认为画布可以提供双倍积分。一个解决方法是将双精度转换为 int。这样，该数字被视为一个 int 并且它像往常一样工作。铸造看起来像这样：
`db.drawImage(image, (int) x, (int) y;`
我在我的游戏中使用它并且效果很好。

# php - 改变数组的顺序

> ID：15614818
> 
> 赞同：1
> 
> 时间：2013-03-25T12:21:09.563
> 
> 标签：php, arrays, wordpress

我在 Wordpress 中有一些代码可以获取附加到特定帖子的图像。
它将该帖子的所有信息放入一个数组中，然后使用内置的 Wordpress 函数从中提取图像`wp_get_attachment_image`

然后我使用`foreach`循环在图像滑块中显示图像。我遇到的问题是它把'image1'放在数组的位置1，把'image2'放在数组的位置0。
所以它首先显示图像2。

这是我的代码。

```
 $args = array(
      'post_type' => 'attachment',
      'numberposts' => -1,
      'post_status' => null,
      'post_parent' => $post->ID
     );

    $attachments = get_posts( $args );          
    $images = array($attachments);
    echo '<div id="postSlider"><div class="slides_container">';
    if ( $attachments ) {
        foreach ( $attachments as $attachment ) {
        echo '<div>' . wp_get_attachment_image($attachment->ID, 'large') . '</div>';
        }

        echo '</div>';
        if(sizeof($attachments) > 1) {
            echo '<div class="sliderControls">
            <a href="#" class="sliderBtnPrev">Previous</a>
            <a href="#" class="sliderBtnNext">Next</a>
            <span class="sliderPagination">1 of 3</span>
            </div>';
        }
    }   
    echo '</div>'; 
```

从我读过的内容来看，`foreach`循环将保留数组的顺序。所以，我想我需要更改数组的顺序，以便循环首先看到“image1”（数组位置 [1]）。

我对数组的了解是有限的，所以我不确定如何做到这一点.. 任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:26:13.703

如果您想以编程方式更改顺序，请查看[PHP 中的各种数组排序函数](http://de2.php.net/manual/en/array.sorting.php)，尤其是

*   `uasort()`— 使用用户定义的比较函数对数组进行排序并保持索引关联
*   `uksort()`— 使用用户定义的比较函数按键对数组进行排序
*   `usort()`— 使用用户定义的比较函数按值对数组进行排序

但是对于 wordpress 结帐这个[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:24:31.243

如果您想按排序顺序显示图像，请在`sort`foreach 之前使用

```
 sort($attachments);
    foreach ( $attachments as $attachment ) {
    echo '<div>' . wp_get_attachment_image($attachment->ID, 'large') . '</div>';
    } 
```

参考： http: [//php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

# c - rshd.c 源代码中缺少 pam_appl.h 和 pam_misc.h

> ID：15614823
> 
> 赞同：11
> 
> 时间：2013-03-25T12:21:22.113
> 
> 标签：c, linux, centos, pam, rsh

我正在开发**centOS 5.5 OS**。

它显示 /security/pam_appl.h 和 /security/misc.h 文件丢失的错误。

实际上我的 rshd.c 没有加载 PAM 模块，可能是通过放置这个库，它可以帮助我很好地工作我的 rshd。这就是我发布这个问题的原因。

**错误：-**

```
rshd.c:90:31: error: security/pam_appl.h: No such file or directory
rshd.c:91:31: error: security/pam_misc.h: No such file or directory 
```

我搜索了很多，但没有得到任何提供这些文件的有用 rpm。

一些链接在[这里](http://rpmfind.net/linux/rpm2html/search.php?query=/usr/include/security/pam_appl.h)。但不适合centOS。

帮我。告诉我如何克服这个问题。

**编辑 1**

您的第三个链接似乎很有用。当我尝试安装 pam-devel 时，它显示了一些错误。

当我跑

```
./configure --prefix=/usr \
            --sysconfdir=/etc \
            --docdir=/usr/share/doc/Linux-PAM-1.1.6 \
            --disable-nis &&
make 
```

它检查一些变量，然后生成目标文件，但最后它显示，

```
make[3]: *** [pam_xauth.lo] Error 1
make[3]: Leaving directory `~/Linux-PAM-1.1.6/modules/pam_xauth'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `~/Linux-PAM-1.1.6/modules'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `~/Linux-PAM-1.1.6'
make: *** [all] Error 2 
```

**编辑第 2 号**

当我按照您的命令进行操作时，最后会显示以下错误。

这个错误来了，当我跑 `make && make install`

```
pam_xauth.c:64:27: error: selinux/label.h: No such file or directory
pam_xauth.c: In function âpam_sm_open_sessionâ:
pam_xauth.c:616: error: âSELABEL_CTX_FILEâ undeclared (first use in this function)
pam_xauth.c:616: error: (Each undeclared identifier is reported only once
pam_xauth.c:616: error: for each function it appears in.)
pam_xauth.c:616: warning: initialization makes pointer from integer without a cast
make[3]: *** [pam_xauth.lo] Error 1
make[3]: Leaving directory `/root/Linux-PAM-1.1.6/modules/pam_xauth'
make[2]: *** [all-recursive] Error 1
make[2]: Leaving directory `/root/Linux-PAM-1.1.6/modules'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/root/Linux-PAM-1.1.6'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-09T12:24:00.377

我目前没有 CentOS，但似乎这是一个常见问题。有关信息，请参阅[此处](https://www.centos.org/modules/newbb/viewtopic.php?topic_id=38429)，建议您安装 pam-devel，这样您就不必通过以下方式从源代码构建：

```
yum install pam-devel 
```

似乎每次我找到一个问题与您的[问题](http://mailman2.u.washington.edu/pipermail/imap-uw/2009-December/002615.html)相同的[站点](http://blog.alwayshere.info/2011/11/error-securitypamapplh-no-such-file-or.html)时，解决方法就是安装它。我现在正在下载 CentOS 5.5 来试一试，但您是否只是尝试运行该命令？

如果您确实安装了它并且仍然找不到头文件，我会尝试一下：

```
cd /
sudo find . -name "pam_appl.h"
sudo find . -name "pam_misc.h" 
```

可能它们已安装但没有进入您的标准包含路径，或者没有进入`security/`目录，在这种情况下，您需要移动它们或更改标头包含在代码中的方式。

**请注意**`sudo`您必须输入密码的命令。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-08-15T05:51:00.193

如果有人正在寻找 debian/ubuntu，试试这个`sudo apt-get install libpam0g-dev`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-25T15:08:41.820

您需要[pam-devel的 rpm，可在](http://rpmfind.net/linux/rpm2html/search.php?query=/usr/include/security/pam_appl.h)[此处](http://rpm.pbone.net/index.php3?stat=3&search=pam-devel&srodzaj=3&dist%5B%5D=55)获得 CentOS 。[或者，您可以从此处](http://www.linuxfromscratch.org/blfs/view/svn/postlfs/linux-pam.html)下载 pam并在本地安装。

**编辑：** 要编译它，这在我的系统上运行良好：

```
wget http://linux-pam.org/library/Linux-PAM-1.1.6.tar.bz2
tar xvjf Linux-PAM-1.1.6.tar.bz2
cd Linux-PAM-1.1.6/
./configure --prefix=$HOME/local
make && make install 
```

如果没有，请报告编译器错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-27T21:53:43.880

对于通过搜索引擎找到此内容的人，以下在 CentOS 7 上对我有用：

```
yum install pam-devel 
```

# mongodb - Mongo - 你应该在更多领域做更多的文件吗？

> ID：15614824
> 
> 赞同：0
> 
> 时间：2013-03-25T12:21:22.850
> 
> 标签：mongodb, performance, structure, database

我知道 Mongo 对工作方式更主观（请不要因此而关闭此线程）但是 Mongo 是否有性能或“最佳实用”方式来存储这两种方式：-

选项1 - 一个文档中的所有开关，每个文档都有字段：-

```
{
    "stuffA": 415125,
    "booleanSwitchA": true,
    "booleanSwitchB": false,
    "booleanSwitchC": true,
} 
```

或者

选项2 - 一个字段切换的多个文档 - 在应用程序中整理：-

```
{
    "stuffA": 415125,
    "switch": "a",
}
{
    "stuffA": 415125,
    "switch": "b",
}
{
    "stuffA": 415125,
    "switch": "c",
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T16:57:43.740

我认为该选项取决于您要如何使用它。如果您必须根据 stuffA 查询以在一个查询中加载所有信息，则选项一是最佳选项，但如果您必须单独查询每个开关，则选项二将适用。甚至我认为可能的设计之一也可以是，因为您也可以索引数组元素。

```
{
"stuffA": 415125,
"OnSwitch" : {"A" , "C"},
"OffSwitch" : {"C"}
} 
```

# javascript - 没有调用主干模型中的验证方法？

> ID：15614826
> 
> 赞同：3
> 
> 时间：2013-03-25T12:21:35.737
> 
> 标签：javascript, jquery, backbone.js

开始学习 Backbone，尝试在我的 Person 模型中进行一些简单的验证，但是当我设置一个新的年龄时，验证方法似乎没有运行。谁能解释我在这方面可能出错的地方？在我做对之前不想继续我的学习。

**JS**

```
var Person = Backbone.Model.extend({

    defaults: {
        name: 'John Doe',
        age: 30,
        occupation: 'working'
    },

    validate: function(attrs) {

        console.log(attrs);

        if ( attrs.age < 0 ) {
            return 'Age must be positive, stupid';
        }

        if ( ! attrs.name ) {
            return 'Every person must have a name, you fool.';
        }

    },

    work: function() {
        return this.get('name') + ' is working.';
    }

}); 
```

目前我只是在控制台中获取和设置值，所以：

```
var person = new Person({
    name: 'Lady Madonna',
    age: 23
});

person.on('error', function(model, error){
    console.log(error);
}); 
```

当我将年龄设置为负值时，验证方法不会生效：

```
person.set('age', -55); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-25T12:31:36.990

[Backbone 0.9.10 中更改了](http://backbonejs.org/#changelog)模型验证：

> 模型验证现在仅在 Model#save 中默认强制执行，并且在构造或 Model#set 中不再默认强制执行，除非`{validate:true}`通过了该选项。

并注意

> 模型验证现在会触发*invalid*事件而不是*error*。

所以你的代码应该写成

```
var person = new Person({
    name: 'Lady Madonna',
    age: 23
});

person.on('invalid', function(model, error){
    console.log(error);
});

person.set('age', -55, {validate : true}); 
```

还有一个小提琴[http://jsfiddle.net/nikoshr/aUxdS/](http://jsfiddle.net/nikoshr/aUxdS/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:30:39.350

默认情况下，`validate()`在调用方法之前被调用`save()`。如果您还希望在之前调用它`set()`，则应指定 { validate : true } 选项，例如：

```
person.set({ age : -55 }, { validate : true }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:37:45.893

这是我不久前写的一个例子。希望能帮助到你：

因此，假设您有一个名为 Animal 的模型：

```
var Animal = Backbone.Model.extend({
    defaults:  {
        name: '',
        speech: ''
    },
    validate: function(attribs) {
        if(attribs.name === ''){
            return "Your animal does not have a name.";
        }
    },
    initialize: function() {
        console.log('New Animal creation');
        this.on("change:name", function() {
            console.log("Change captured");
        });
        this.on("error", function(model, error) {
            console.log(error);
        });
    }
}); 
```

因此，当您在 javascript 中的某个地方执行以下操作时：

```
var dog = new Animal();
dog.set('speech', 'kef'); 
```

您将收到以下消息/错误：

```
"Your Animal does not have a name." 
```

现在在创建新对象“dog”时不会调用验证。你真的需要使用 dog.set() 来设置它。

否则不会产生错误。

通过稍后更改该值，它也可能不会给出此错误。（你真的需要使用 set 我猜）。

但是，您始终可以检查模型是否处于 Valid 状态，如下所示：

```
Model.isValid(). 
```

当模型无效时，这将返回 false。所以这：

```
var dog = new Animal();
dog.isValid(); //would return a 'false' 

dog.set({
    'speech': 'kef',
    'name': 'fido'
});
dog.isValid(); //would return a 'true' 
```

希望这可以帮助！

# sybase - 如何在sybase中将日期格式化为mmddyyhrmin

> ID：15614827
> 
> 赞同：2
> 
> 时间：2013-03-25T12:21:37.357
> 
> 标签：sybase

我想要 mmddyyhhmin 中的日期格式。任何人都可以帮助我实现这一目标。例如：对于GETDATE结果应该是“032520130550”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:10:09.647

尝试这个：

```
select str_replace(convert(varchar,getdate(),101),'/',null)+str_replace(convert(char(5),getdate(),108),':',null) 
```

# iphone - 在 iphone 中将图像上传到 twitter

> ID：15614829
> 
> 赞同：0
> 
> 时间：2013-03-25T12:21:42.317
> 
> 标签：iphone, twitter

如何使用此方法将图像上传到 Twitter

```
- (NSString *) _uploadImage:(UIImage *)image requestType:(MGTwitterRequestType)requestType responseType:(MGTwitterResponseType)responseType 
```

我从 stackoverflow.com 得到这个方法，链接在这里，

[Twitter 在 iOS 上的 statuses/update_with_media 返回 500 error](https://stackoverflow.com/questions/7316776/twitters-statuses-update-with-media-on-ios-returns-500-error)。

在上面的链接中，它为伟大的 4 名成员工作，他们是 Ahmed、olivarseF、Gypsa，另一个是 Tk189。

这里的代码如下，

在此处输入代码

```
- (NSString *) _uploadImage:(UIImage *)image requestType:(MGTwitterRequestType)requestType responseType:(MGTwitterResponseType)responseType
{

        NSString *boundary = @"----------------------------991990ee82f7";

        NSURL *finalURL = [NSURL URLWithString:@"http://upload.twitter.com/1/statuses/update_with_media.json"];
        if (!finalURL) 
        {
            return nil;
        }

        NSLog(@"-> Open Connection: %@", finalURL);

        OAMutableURLRequest *theRequest = [[OAMutableURLRequest alloc] initWithURL:finalURL
                                                                          consumer:self.consumer
                                                                             token:_accessToken 
                                                                             realm: nil
                                                                 signatureProvider:nil];

        [theRequest setHTTPMethod:@"POST"];
        [theRequest setHTTPShouldHandleCookies:NO];

        // Set headers for client information, for tracking purposes at Twitter.
        [theRequest setValue:_clientName    forHTTPHeaderField:@"X-Twitter-Client"];
        [theRequest setValue:_clientVersion forHTTPHeaderField:@"X-Twitter-Client-Version"];
        [theRequest setValue:_clientURL     forHTTPHeaderField:@"X-Twitter-Client-URL"];

        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
        [theRequest setValue:contentType forHTTPHeaderField:@"content-type"];

        NSMutableData *body = [NSMutableData dataWithLength:0];
        [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"media_data[]\"; filename=\"1.jpg\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];  
        [body appendData:[[NSString stringWithString:[UIImageJPEGRepresentation(image, 1.0) base64EncodingWithLineLength:0]] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"status\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithString:@"Honeymoon uploads image\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

        // --------------------------------------------------------------------------------
        // modificaiton from the base clase
        // our version "prepares" the oauth url request
        // --------------------------------------------------------------------------------
        [theRequest prepare];

        [theRequest setHTTPBody:body];

        // Create a connection using this request, with the default timeout and caching policy, 
        // and appropriate Twitter request and response types for parsing and error reporting.
        MGTwitterHTTPURLConnection *connection;
        connection = [[MGTwitterHTTPURLConnection alloc] initWithRequest:theRequest 
                                                                delegate:self 
                                                             requestType:requestType 
                                                            responseType:responseType];

        if (!connection) 
        {
            return nil;
        } 
        else 
        {
            [_connections setObject:connection forKey:[connection identifier]];
            //[connection release];
        }

        return [connection identifier];  
    } 
```

在上面的代码中，它被集成在 SA_OAuthtwitterengine 类和这一行中，

```
[body appendData:[[NSString stringWithString:[UIImageJPEGRepresentation(image, 1.0) base64EncodingWithLineLength:0]] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

给了我错误报告，所以我导入 NSData+Base64 文件，错误很明显。

然后我尝试使用这一行发送图像 [_engine sendupdate:@" [http://www.xxxx.com/ccc.jpg](http://www.xxxx.com/ccc.jpg) "];

在这里我想将图像作为 url 发送，但在这里我收到此错误**“错误域 = HTTP 代码 = 401”操作无法完成。（HTTP 错误 401。）”**

为什么？如果你知道这个答案，请如何发送这个，特别是我要求你给先生（ahmed、oliversf、gypsa 和 tk189）请解释你如何在 southtwitter 引擎类中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:33:08.953

你在使用特定的框架吗？如果您的应用程序支持应用程序支持 >= iOS 5，您可以使用已经集成在 iOS SDK 中的社交框架，如下所示：

```
if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
{
    SLComposeViewController *tweetSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
    NSString *title = [self.elementInfo objectForKey:@"title"];
    [tweetSheet setInitialText:@"message you want to display"];
    [self presentViewController:tweetSheet animated:YES completion:nil];
} 
```

# matlab - 用另一个矩阵的元素替换矩阵的某些元素[Matlab / Octave]

> ID：15614830
> 
> 赞同：4
> 
> 时间：2013-03-25T12:21:45.520
> 
> 标签：matlab, matrix, octave

我有两个矩阵：

```
A = [0,1,1;1,0,0;0,0,0]
B = [3,0,0;0,3,3;4,4,4] 
```

我想用矩阵B中相同位置的元素替换矩阵A中的所有0元素。

在上面的示例中，结果矩阵如下所示：

```
result = [3,1,1;1,3,3;4,4,4] 
```

是否有用于此目的的 matlab 函数，还是我必须自己编写一个？

问候

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:25:41.700

这很容易通过索引实现：

```
idx = A == 0;
A(idx) = B(idx); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T12:29:03.140

使用逻辑寻址的 Oneliner 解决方案：

```
A(A == 0) = B(A == 0);

```

# asp.net - asyncFileUpload.UploadedFileError 发生在页面部分回发上

> ID：15614832
> 
> 赞同：1
> 
> 时间：2013-03-25T12:21:47.943
> 
> 标签：asp.net, vb.net, user-controls, ajaxcontroltoolkit

我希望有人会回应。我有一个控件，它有一个更新面板（设置为条件更新），其中有一个 asyncfileupload 控件。控件起初工作正常，但如果我上传文件，然后导致其更新面板更新，则 asyncfileupload.UploadedFileError 将在没有它或 asyncFileUpload.UploadedComplete 被调用的情况下触发。这是我创建控件的方式：

```
Public Class FileUpload
    Inherits ScriptControl
    Implements INamingContainer, IPostBackEventHandler
    Private WithEvents asyncFileUpload As AjaxControlToolkit.AsyncFileUpload
....

 asyncFileUpload = New AjaxControlToolkit.AsyncFileUpload
 With asyncFileUpload
    .ClientIDMode = UI.ClientIDMode.AutoID
    .UploadingBackColor = ColorTranslator.FromHtml(UploadingBackColor)
    .CompleteBackColor = ColorTranslator.FromHtml(CompleteBackColor)
    .UploaderStyle = AjaxControlToolkit.AsyncFileUpload.UploaderStyleEnum.Traditional
    .ThrobberID = img.UniqueID
 End With
'then the control gets added to a Panel.  
'events:
Protected Sub fileUploadFailure(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs) Handles asyncFileUpload.UploadedFileError

'do stuff
end Sub

 Protected Sub SaveUploadedFile(ByVal sender As Object, ByVal e As AjaxControlToolkit.AsyncFileUploadEventArgs) Handles asyncFileUpload.UploadedComplete

'do stuff
End Sub 
```

正如我所提到的，该控件在上传文件时工作正常。但是我在同一个控件中有一个链接按钮，允许用户下载上传的文件（导致控件的更新面板更新）。发生这种情况时，fileUploadFailure 事件会无缘无故地触发（因为没有进行上传）。谁能解释发生了什么以及如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T15:37:36.857

在使用了一段时间后，我意识到如果我用来开始下载的按钮是链接按钮，这似乎是一个问题。如果我将其更改为按钮，那很好。

# c++ - STL 容器中的自定义析构函数

> ID：15614838
> 
> 赞同：2
> 
> 时间：2013-03-25T12:22:06.033
> 
> 标签：c++, stl

假设我有一个 STL 向量，其元素是指向其他类的原始指针。很明显，向量的析构函数不会释放这些指针所拥有的内存。是否可以实现释放此内存的自定义析构函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T12:31:38.793

在现代 C++ 中，使用`vector<unique_ptr<T>>`和所有所有权问题都是为您管理的。

如果 C++11 不可用，您可以使用`shared_ptr`（来自 Boost 或 TR1）而不是`unique_ptr`，或者您可以使用[Boost 的指针容器](http://www.boost.org/doc/libs/release/libs/ptr_container/doc/ptr_container.html)。（不要尝试使用 deprecated `auto_ptr`，因为这很容易从容器中意外删除指针。大概，第一条评论指的是这个，但将它与更安全的 . 混淆了`unique_ptr`。）

如果由于某种原因你不能使用这些，或者如果你真的想自己做这些工作，你需要将向量包装在一个类中：

*   一个析构函数来删除每个存储的指针；
*   复制构造函数和复制赋值操作符，要么被删除，要么执行“深度”复制；否则，存在两个向量认为它们拥有相同对象的危险；
*   访问器以这样一种方式读取和修改元素，即您不能在不删除其对象的情况下覆盖存储的指针。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:24:25.067

不，您应该在销毁矢量之前手动清除元素。就像是

```
std::for_each(v.begin(), v.end(), [](const T* p) { delete p; }); 
```

或者您可以使用类似`boost::ptr_vector`（或一些 smart_pointers）的东西来处理这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:23:18.603

您需要在删除时遍历向量并调用其中每个元素的析构函数

或者我想最好的选择是，而不是保存 A*，而是保存`shared_ptr<A>`，然后当没有人不再指向 A 时，它将被破坏

# boost - 多线程归并排序

> ID：15614840
> 
> 赞同：1
> 
> 时间：2013-03-25T12:22:15.030
> 
> 标签：boost, mergesort

我写了归并排序算法，它工作得很好。然后我评论了函数的递归调用，并尝试使用一些 boost::threads，如下所示：

```
#include <iostream>
#include <vector>
#include <boost/thread.hpp>

void merge_sort(std::vector <int> & tab, size_t beg, size_t end)
{
    if(beg < end)
    {
        size_t pivot = (beg + end) >> 1;

        boost::thread left(merge_sort, tab, beg, pivot);
        //merge_sort(tab, beg, pivot);
        boost::thread right(merge_sort, tab, pivot + 1, end);
        //merge_sort(tab, pivot + 1, end);
        left.join();
        right.join();

        std::vector <int> buf (tab);
        size_t i = beg, j = pivot + 1, q = beg;
        while (i <= pivot && j <= end)
        {
            if (buf[i] < buf[j])
                tab[q++] = buf[i++];
            else
                tab[q++] = buf[j++];
        }
        while (i <= pivot)
            tab[q++] = buf[i++];
    }
}

int main()
{

    const int myints[] = {30,29,28,27,26,25,1,2,3,4,5,6,7,24,23,22,21,20,19,18,8,9,10,11,17,16,15,13,45,12};
    std::vector <int> kontener (myints, myints + sizeof(myints) / sizeof(int) );

    merge_sort(kontener, 0, kontener.size() - 1);

    for(std::vector <int>::iterator it = kontener.begin(); it != kontener.end(); it++)
        std::cout << *it << " ";
    std::cout << std::endl;

    std::cin.sync();
    std::cin.get();
    return(0);
} 
```

但是我对这个线程有错误的输出。:P 因此，如果有人能告诉我这段代码有什么问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T12:37:51.030

您实际上并没有将向量作为参考传递给子线程，即使看起来如此。您需要使用`boost::ref`或`std::ref`。另请注意，缓冲区只需与您当前正在处理的部分一样大，一直复制整个向量是没有意义的：

```
 boost::thread left(merge_sort, boost::ref(tab), beg, pivot);
    boost::thread right(merge_sort, boost::ref(tab), pivot + 1, end);
    left.join();
    right.join();

    std::vector <int> buf (tab.begin()+beg, tab.begin()+end+1);
    size_t i = beg, j = pivot + 1, q = beg;
    while (i <= pivot && j <= end)
    {
        if (buf[i-beg] < buf[j-beg])
            tab[q++] = buf[i++ - beg];
        else
            tab[q++] = buf[j++ - beg];
    }
    while (i <= pivot)
        tab[q++] = buf[i++ - beg]; 
```

（另请注意，如果您使用迭代器和标准算法，这段代码可能会更简洁一些，但为了简单起见，我保留了您的结构。）

# structuremap - 通过命名空间限制注入

> ID：15614843
> 
> 赞同：1
> 
> 时间：2013-03-25T12:22:26.007
> 
> 标签：structuremap

我有以下配置：

```
For<ITranslatorProvider>().Singleton().Use<TranslatorProviderA>(); 
```

我有 3 个翻译提供商：TranslatorProviderA、B 和 C。

每一个都应该在特定的命名空间下使用。

Project.Services > 使用提供者 A

Project.Site > 用户提供者 B

...

我可以根据请求来自哪个命名空间来注入提供者 A、B 或 C 吗？

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T08:47:00.113

您应该能够使用[约定](http://docs.structuremap.net/ScanningAssemblies.htm#section8)来做到这一点。像这样的东西应该可以工作：

```
using System;
using System.Linq;
using StructureMap.Configuration.DSL;
using StructureMap.Graph;
using StructureMap.TypeRules;

class TranslationConvention : IRegistrationConvention
{
    public void Process(Type type, Registry registry)
    {
        if(!type.IsConcrete())
            return;
        var ctor = Constructor.GetGreediestConstructor(type);
        var translatorParameters= ctor.GetParameters()
            .Where(p => typeof(ITranslatorProvider)
            .IsAssignableFrom(p.ParameterType));
        if(!translatorParameters.Any())
            return;
        Type translatorType = GetTranslatorType(type);
        translationParameters.Aggregate(registry.For(type).Use(type), 
            (current, parameter) => 
                current.CtorDependency<ITranslatorProvider>(parameter.Name)
                .IsConcreteType(translatorType));
    }

    Type GetTranslatorType(Type type)
    {
        if(type.Namespace == "Project.Services")
            return typeof(TranslatorProviderA);
        if(type.Namespace == "Project.Site")
            return typeof(TranslatorProviderB);
        return typeof(TranslatorProviderC);

    }
} 
```

上面的约定仅适用于注册具体类型，因此如果您希望约定将类绑定到某个接口，您需要更改这部分：`registry.For(type).Use(type)`变得更合适。查看StructureMap 中的[内置约定以获取一些想法。](https://github.com/structuremap/structuremap/blob/master/src/StructureMap/Graph/DefaultConventionScanner.cs)

您可以在扫描中使用约定：

```
ObjectFactory.Initialize(c => c.Scan(s =>    
    {
        s.TheCallingAssembly();
        s.Convention<TranslationConvention>();
    })
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T23:03:59.217

我不认为你可以基于命名空间注入提供者。但是你可以通过使用命名实例来实现同样的事情（如果我理解你的实现）：

```
For<ITranslatorProvider>().Add<TranslatorProviderA>().Named("NS1");
For<ITranslatorProvider>().Add<TranslatorProviderB>().Named("NS2"); 
```

然后使用：

```
container.GetInstance<ITranslatorProvider>("NS1"); 
```

# playframework - RPC 风格 API、swagger 和 Play 框架 2 (swagger-core)

> ID：15614844
> 
> 赞同：2
> 
> 时间：2013-03-25T12:22:27.690
> 
> 标签：playframework, rpc, playframework-2.1, swagger

我正在实现一个 RPC 类型的 API 应用程序。我在播放框架上使用 Java。我已经使用 swagger 模块为简单的 rest API 生成 swagger 文档，其中每个“URL”映射到我的控制器中的不同静态函数。但是在这里我需要将一个 URL 和一个静态函数映射到 API 文档中的多个操作。

基本结构相当经典

```
abstract class RPCActionRequest implements Serializable{
  public int actionCode; //this might be an enum too
  public RPCActionParam param;
}

interface RPCActionParam implements Serializable{
}

abstract class RPCAction {
  public int actionCode;
  public abstract RPCActionResult execute(RPCActionParam param);
}

interface RPCActionResult implements Serializable{
  public int responseCode; //sUCCESS, ERROR, FAIL, ... whatever errors my system needs to
                           //communicate to the client.
} 
```

每个动作都映射到我的 RPCController 映射器中的相同静态函数，就像在 play 框架的路由文件中一样

/rpc/ 路由.RPCController.rpc()

如何使用 swagger 和 swagger-core 文档生成记录所有操作、参数类和结果类？是否可以仅使用 swagger-play2 模块的 @Api* 注释？

参考：

-Swagger：[https ://developers.helloreverb.com/swagger/](https://developers.helloreverb.com/swagger/)

-Swagger-core：[https ://github.com/wordnik/swagger-core](https://github.com/wordnik/swagger-core)

# html - Windows Phone 7+ 上的全页叠加

> ID：15614845
> 
> 赞同：0
> 
> 时间：2013-03-25T12:22:29.340
> 
> 标签：html, windows-phone-7, css

经过多次搜索，我找不到在最新 Windows Phone 上工作的页面顶部放置叠加层的解决方案。这适用于所有现代浏览器，但不适用于 Windows Phone。

**CSS**

```
html, body
{
    height: 100%;
}
div.overlay
{
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 9999;
    background: gray;
} 
```

**HTML**

```
<html>
    <body>
        <div class="overlay">Centered?</div>
    </body>
</html> 
```

[演示](http://jsfiddle.net/sAF5s/)

# r - data.table 未在 by 语句中处理 integer64

> ID：15614846
> 
> 赞同：10
> 
> 时间：2013-03-25T12:22:29.570
> 
> 标签：r, data.table

正确使用`fread`from data.table 加载`integer64`，但我的印象是`by`语句没有正确处理 int64。我可能在这里做错了什么，这是什么？

```
library(data.table); library(bit64);
test = data.table(x=c(1,2,3),y=c('x','q','q'),ID=as.integer64(c('432706205348805058','432706205348805058','432706205348805059')))

str(test) #the display is wrong (BUT IT IS EXPECTED)
#Classes ‘data.table’ and 'data.frame':  3 obs. of  3 variables:
# $ x : num  1 2 3
# $ y : chr  "x" "q" "q"
# $ ID:Class 'integer64'  num [1:3] 9.52e-280 9.52e-280 9.52e-280
# - attr(*, ".internal.selfref")=<externalptr> 

test # Here it is displayed correctly
#   x y                 ID
#1: 1 x 432706205348805058
#2: 2 q 432706205348805058
#3: 3 q 432706205348805059

txtR) test$ID
integer64
[1] 432706205348805058 432706205348805058 432706205348805059

txtR) test[,list(count=.N),by=ID] #WRRRONG
                   ID count
1: 432706205348805058     3 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-25T23:32:09.537

### 更新：这现在在 v1.9.3 中实现（可从 R-Forge 获得），请参阅[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)：

> o `bit64::integer64`现在可用于分组和连接，#5369。感谢 James Sams 强调 UPC 和 Clayton Stanley。
> 提醒：`fread()`已经能够检测和读取`integer64`一段时间了。

在上面的 OP 示例中：

```
test[, .N, by=ID]
#                    ID N
# 1: 432706205348805058 2
# 2: 432706205348805059 1 
```

* * *

`integer64`还没有为`data.table`诸如`setkey`or之类的操作实现`by`。它只是`fread`作为第一步实施的（2013 年 3 月 6 日首次发布给 CRAN）。例如，它可以用作值列。

通过提交与此相关的错误报告（@Arun 链接到的那个），我可能会混淆问题。严格来说，这不是一个错误，而是一个功能请求。我认为错误列表更像是“在下一个版本之前要解决的重要问题”。

贡献是非常受欢迎的。

# c++ - 类 C++ 子命令的参数解析

> ID：15614848
> 
> 赞同：4
> 
> 时间：2013-03-25T12:22:33.480
> 
> 标签：c++, command-line-arguments

我正在用 C++ 编写一个程序，该程序的行为类似于 SVN、systemctl 或其他一些工具：

```
./a.out SUBCOMMAND [OPTION]... arguments-for-the-subcommand 
```

一个示例如下所示：

```
./a.out remove --recursive directory1 directory2 
```

*--recursive*选项仅对**remove**子命令有效。

我目前正在使用 Boost.ProgramOptions，并且在我的尝试中没有运气（我现在唯一拥有的是一个接受 GNU getopt 方式的参数的程序）。虽然我更喜欢经过广泛测试的东西，但如果它是可移植的并且可以正常工作，那么切换到另一个库是没有问题的。

在此先感谢，如果问题没有得到很好的解释，我们深表歉意。

最好的问候，卡尔里什。

PS：不确定这是否有任何帮助，但我目前使用的是 GCC 4.7.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:33:58.027

Boost 程序选项实际上应该非常简单，因为您可以轻松构建多个选项列表。

您为每个子命令创建一个，然后检查`argv[1]`子命令是什么并使用正确的选项列表。

# java - 在 Scala 中实现内部特征，就像我们在 Java 中使用内部接口一样

> ID：15614849
> 
> 赞同：10
> 
> 时间：2013-03-25T12:22:35.480
> 
> 标签：java, scala, inner-classes

Java中的这段代码编译没有错误：

```
interface T {
    interface Q {
    }
}

class C implements T.Q {
} 
```

而Scala中的这段代码没有：

```
trait T {
    trait Q {
    }
}

class C extends T.Q {
} 
```

Java 代码清单到 Scala 的正确翻译（如果存在）是什么？

欢迎提供有关语言设计的理论解释。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-25T13:52:23.950

内部类型`Q`仅为`T`trait 的特定实例实现而定义。由于 scala 具有*依赖于路径的*类型，因此每个实例`T`都有自己的 subtrait `Q`。

```
scala> trait T {
     |   trait Q
     | }
defined trait T

scala> class C extends T {
     |   def getQ: this.Q = new this.Q {}
     | }
defined class C

scala> val inC = (new C).getQ
inC: C#Q = C$$anon$1@3f53073a

scala> val c = new C
c: C = C@1a7e4ff0

scala> new c.Q {}
res4: c.Q = $anon$1@36bbb2f5 
```

* * *

如果您需要一个接口来实现客户端的通用行为，而不依赖于特定`C`实例，则应在`Object`

```
scala> object T {
     |   trait Q {
     |     def implementMe: Unit
     |   }
     | }
defined module T

scala> val inT = new T.Q {
     |   def implementMe = println("implemented!")
     | }
inT: T.Q = $anon$1@20f2a08b

scala> inT.implementMe
implemented! 
```

* * *

**为什么是路径依赖类型？**

至于设计原因，看[这里](https://stackoverflow.com/questions/5581836/why-does-scala-have-path-dependent-types)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T13:40:10.617

你不能这样做。嵌套类型时，您将创建所谓的*路径依赖类型*，这意味着内部实体的每个实例的类型都与构造它的特定实例相关联。

换句话说，你的接口 Q 没有独立的存在，可以让你在 T 的实例之外引用它。

# css - 根据具有LESS的其他类的元素样式

> ID：15614854
> 
> 赞同：0
> 
> 时间：2013-03-25T12:22:59.117
> 
> 标签：css, class, less

我有这部分 less 和 html 标记：

```
<div class="block">
   <div class="post-image"></div>
   <p></p>
</div> 
```

和

```
 .post-image {
    display: inline-block;
    width: 35%; height: 80px;

    &.photo {
      width: 100%; height: 180px;
    }
  }

  p {
    width: 64%;
    display: inline-block;

    when (isstring .post-image.photo) {
      width: 100%;
  } 
```

我知道这是错误的设置，但我只是想知道，有没有可能`p`通过照片宽度或类别来附加此段落（）样式？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:52:26.080

从技术上讲，这甚至不是 LESS 的事情，而纯粹是针对您的情况的 CSS 构造（当然，LESS 可以帮助您构建）。这是您需要的 LESS 和 HTML 片段的结果 CSS（`.post-image`代码与您已有的一样）：

**较少的**

```
p {
  width: 64%;
  display: inline-block;

  .post-image.photo + & {
    width: 100%;
  }
} 
```

**CSS**

```
p {
  width: 64%;
  display: inline-block;
}
.post-image.photo + p {
  width: 100%;
} 
```

当`.photo`类添加到`.post-image`.

# php - 将 API 错误代码转换为异常

> ID：15614856
> 
> 赞同：4
> 
> 时间：2013-03-25T12:23:02.327
> 
> 标签：php, api, exception

我正在开发一些 API 的 PHP 接口，它可以返回许多（最多一百个）不同的错误代码。当遇到这样的代码时，我的界面应该抛出异常。我的 PHP 有点生疏了，因此我不确定对于当今的 php 程序员来说什么是最合适的选择：

*   每个错误代码都有一个单独的`MyApiThisAndThatError`类？
*   或者有一个通用类`MyApiError`并提供 API 错误代码作为参数？

我也愿意接受其他建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T17:47:30.163

**TLDR：** *使用包含 API 错误代码的通用 MyApiException 类。*

Ralph Schindler 在[http://ralphschindler.com/2010/09/15/exception-best-practices-in-php-5-3上写了一篇关于一般主题的好文章](http://ralphschindler.com/2010/09/15/exception-best-practices-in-php-5-3)

如果您阅读全文，您将看到**库代码中的最佳实践**部分演示（我已针对此上下文修改了他的示例）：

```
// usage of bracket syntax for brevity
namespace MyCompany\Component {

    interface Exception
    {}

    class MyApiException 
        extends \RuntimeException 
        implements Exception
    {}

    class Component
    {
        public static function doSomething()
        {
            $myApiCall->doSomthing();
            if ($myApiCall->hasError) {
                throw new MyApiException($myApiCall->getMessage(), $myApiCall->getErrorCode);
            }
        }
    }
} 
```

假设上面的代码，如果要执行 MyCompany\Component\Component::doSomething()，从 doSomething() 方法发出的异常可以被以下任何类型捕获： PHP 的 Exception、SPL 的 RuntimeException 组件的 MyCompany \Component\MyApiException，或组件的 MyCompany\Component\Exception。这为调用者提供了许多机会来捕获由库中给定组件发出的异常，该异常由返回的 API 错误引发。此外，通过分析构成异常的类型，可以为刚刚发生的异常情况赋予更多的语义意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T14:22:34.407

It depends on few factors. In my opinion these are the reasons for specific exceptions:

1.  You can logically group errors and logically name exceptions.
2.  Errors have additional data that depends on error type (you can store this additional data and users can acces them nicely with set/get).
3.  New error types are added very rarely (but you can always throw some base generic exception for unknown error codes).
4.  Meaning of errors change in time (users of your interface will base on exception type, not underlying error code).
5.  You are ready to properly document your specific exceptions so the users won't have to lookup API documentation based on underlying error code.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-27T13:48:34.053

I had a similar issue. When I did it, I divided up all the errors into families (i.e Query, Model, Controller, Form, etc...), then within each error family, I had defined constants for each error code.

Ideally, I wanted to have a unified exception class, but there where certain points where I would have a set of function calls within a try catch block, and it was better to have them divided up into different families so I could do a catch for each error family, that would the appropriately determine what to do next. Yes, I could have had a unified error catcher and a function to determine the family from the error number, but it seemed so less elegant.

# sql - 在 Sql Server 2008 作为计划任务创建报告表时使用什么

> ID：15614858
> 
> 赞同：1
> 
> 时间：2013-03-25T12:23:07.910
> 
> 标签：sql, sql-server-2008, scheduled-tasks

我想为我的报告目的创建数据库表。因为我将我的报告系统与事务系统分开。

我将创建像

*   .report_company_id_12_unique_views（用例 1）
*   .report_company_id_18_unique_views
*   .report_adserver_id_22_unique_counts（用例 2）
*   .report_adserver_id_44_unique_counts...等等

我们有 50 多个报告用例，大多数表的行数不超过 200 行，我们必须以不同的方式处理每个用例，因为它们都是独一无二的。

但我将有大约 8.000 张桌子用于这些目的。

8.000 个表*听起来不太酷*，但我想使用报告数据库进行**快速访问**。

> > > > 这是 db 专为数据存储而设计....即使表中没有主键....所有目的都是只读访问从**n * 百万行表**中提取的数据。将其视为非规范化版本用于报告的真实数据库。我们创建表，插入数据，下一个计划我们再次删除和插入数据。

我的问题是我应该为这个计划任务使用哪个工具？

*   1.SQL 代理（我必须在其中编写游标来完成所有工作）
*   2.Windows 任务库，我可以在其中调用我的代码并让进程外的类完成这项工作。
*   3.???? （其他选择）

-nosql 解决方案不被接受。:(

**我要满足的要求**

*   1.易于调试（相对）
*   2.易于扩展（相对）
*   3.易于部署（绝对）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:49:35.760

您的问题的简单答案是使用 SQL Server 代理。它与 SQL Server 集成，为您提供完成任务所需的基本功能。没有任何理由（根据您的问题）使用其他软件。

也就是说，有一些缺点，特别是（在我看来）在错误处理和通知方面。

您没有描述创建每个表的过程。如果它像从视图中选择一样简单，那么您可以设置一个报告表并遍历该表以获取最终报告。

与评论一样，我认为 8,000 个表表明数据模型存在问题。您应该能够将类似的报告合并到一个表中（您提到 50 个，这意味着 50 个表）并使用其他机制来分离每个公司/服务器的报告。例如，如果他们直接访问“表”，则使用用户定义的表函数或视图，而不是使用大量表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T06:16:51.080

反科学

> 我同意，对此的第一反应应该是“重构，因此您不使用 8000 个表”。您可以使用主键进行快速的只读访问。不需要这种表膨胀——如果你要做这样的事情，那就是基本的键值存储，看看 NoSQL 替代方案。– 反科学 17 小时前

# list - 使用 AngularJS 进行动态多级重复

> ID：15614871
> 
> 赞同：0
> 
> 时间：2013-03-25T12:24:01.010
> 
> 标签：list, angularjs, repeat

我遇到了一个问题，我在互联网上的任何地方都找不到答案。我正在尝试在 AngularJS 中动态创建一个类别列表，我不知道我需要多少级别。这些值是从具有 parentID 的数据库中获取的，并且每个元素可能有一个或多个子元素。

我之前使用 ng-repeat 创建了两级列表，但我不知道如何添加更多级别而不嵌套正手所需的重复次数。我知道如何在 php 中执行此操作来生成数据，但这不是我希望完成的。

我可能需要使用指令或某种指令，但我需要有人为我指明正确的方向。

这个 plunk 中有一种解决方案：[http](http://plnkr.co/edit/NBDgqKOy2qVMQeykQqTY?p=preview) ://plnkr.co/edit/NBDgqKOy2qVMQeykQqTY?p=preview 但我认为这是一个非常肮脏的修复，我真的在寻找更好的修复。

感谢您提供任何提示或提示。

亲切的问候，Kjetil。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:09:26.553

您可以创建一个指令来决定将有多少级别并`$compile`在链接函数中构建/模板。[有关如何在此处创建指令的](http://docs.angularjs.org/guide/directive)更多信息。

```
app.directive('categoryList', function($compile) {
  return {
    link: function(scope, elm, attr) {
      scope.$watch('somethingThatShowYouShouldRebuild', function() {
        // all the log that figures aout how many levels (a recursive function probably)
        // that will build the HTML template with all nested ng-repeat's
        var template = // ...
        elm.html(template);
        $compile(elm)(scope);
      });
    }
  }
}); 
```

# deployment - 如何使用 GITLAB 部署我的网站

> ID：15614873
> 
> 赞同：9
> 
> 时间：2013-03-25T12:24:03.450
> 
> 标签：deployment, gitlab

我想知道是否有可能在带有 GIT 的产品服务器上部署（网站）？

让我解释：

我有一个在本地工作的团队，它与 GIT 一起工作，我们将在完成开发后部署在服务器 PREPROD 上，然后再部署在 PROD 服务器上？

先感谢您，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-25T12:48:34.380

您需要在 gitlab 中使用**webhook （**[与 GitHub](https://help.github.com/articles/post-receive-hooks)的想法相同），以便从您的产品环境中触发 git pull。

[请参阅“如何使用 post-receive hook 设置 Gitlab？](https://serverfault.com/a/463510/783) ”中的 Gitlab webhook 示例。

注意：webhook 不必在 php 中：您可以在“ [Jenkins Gitlab Hook Plugin](https://github.com/elvanja/jenkins-gitlab-hook-plugin) ”中查看更多详细信息和不同示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-27T13:09:12.427

我对这个问题的[可能重复](https://stackoverflow.com/questions/31471616/how-to-publish-javadocs-in-gitlab/39595887#39595887)的回答：

> 您可能想使用[GitLab Pages](https://docs.gitlab.com/ee/pages/README.html "GitLab 页面")。提供的文档非常详细，遵循它应该没有任何问题。不过，GitLab Pages 是 EE 和 Gitlab.com 独有的功能。如果您使用的是 GitLab CE，则可以使用此社区解决方案：[gitlab-ce-pages](https://github.com/YuMS/gitlab-ce-pages)。
> 
> 我已经在自己的 GitLab 实例中实现了链接项目，并且可以按预期确认工作。只需按照上面链接的 Github 页面上的说明进行操作即可。

# sql - 如何获取具有完整记录集的 ID

> ID：15614877
> 
> 赞同：1
> 
> 时间：2013-03-25T12:24:13.617
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有下表：

```
UserId      UserDb      Systolic    Diastolic   Weight      Height
----------- ----------- ----------- ----------- ----------- -----------
1000022     2           0           0           0           67
1000022     2           23          323         33          0
50508       30          3           3           33          39
51604       0           0           44          44          191
51318       0           0           0           0           0 
```

如何获得具有完整记录集的 UserId？我的意思是数据可以分散在记录之间，例如具有**1000022** id 的用户在一行中有*身高*记录，而在其他行中有*体重*、*收缩压*和*舒张压记录。*

我有带有表变量的解决方案，但它既不高效也不灵活。是否可以进行这样的查询？

我想得到那个ID：

```
UserId
-----------
1000022
50508 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:27:12.610

```
SELECT  userID
FROM    TableName
GROUP   BY UserID
HAVING  MAX(UserDb) <> 0 AND
        MAX(Systolic) <> 0 AND
        MAX(Diastolic) <> 0 AND   
        MAX(Weight) <> 0 AND
        MAX(Height) <> 0 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!3/c1a3d/1)

OUTPUT

```
╔═════════╗
║ USERID  ║
╠═════════╣
║   50508 ║
║ 1000022 ║
╚═════════╝ 
```

# ruby-on-rails - Rails 后台进程

> ID：15614887
> 
> 赞同：2
> 
> 时间：2013-03-25T12:24:27.163
> 
> 标签：ruby-on-rails

我无法找到解决此问题所需的 gem/解决方案。所以基本上当一个请求进来时，我想分叉一个线程（或后台进程）并立即开始运行（没有延迟）。但是，我尝试使用 dalayed_jobs 但它似乎想要一个队列，并且不会立即启动命令。有没有办法在rails中做到这一点？

**更新**

```
#user_controller.rb
def show
  @user = User.find(params[:id])
  @user.update_user  #process to be forked
  render json:@user
end

#user.rb

def update_user
  # code to update user
end
handle_asynchronously :update_user 
```

谢谢，
做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T14:18:16.697

延迟作业在触发后立即运行该进程（根据您的代码），因为您没有指定何时运行它。为了让它工作，你可以运行，`rake jobs:work`但你可能希望进程在后台运行，所以在终端中启动 delay_job 守护进程。

```
script/delayed_job start 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:33:07.993

从 Ruby 1.9 开始，您应该可以通过调用 Process.spawn “您的命令”来做到这一点，例如：

```
pid = Process.spawn("./some_shell_script.sh")
puts "A shell script has just been launched with a Process ID of #{pid}" 
```

此命令应生成一个单独的进程并返回进程 ID。

# css - 将 CSS 定向到 ID 而不是仅使用 ID 有什么好处吗？

> ID：15614890
> 
> 赞同：1
> 
> 时间：2013-03-25T12:24:32.077
> 
> 标签：css, css-selectors

以这个 HTML 标记为例：

```
<div class="myDivider">
    <p>
        <span></span>
    </p>
    <p>
        <span id="mySpan"></span>
    </p>
</div> 
```

我通常只使用 ID 来引用 ID，仅此而已：

```
#mySpan { ... } 
```

除了使代码更容易理解之外，将 CSS 指向元素有什么好处吗？

```
.myDivider p #mySpan { ... } 
```

...或者更具体的方向：

```
div.myDivider > p > span#mySpan { ... } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:30:16.403

快速阅读这篇文章：[http ://csswizardry.com/2011/09/writing-efficient-css-selectors/](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)

/* 忽略这个：

我最好的猜测是，发现 ID 的速度比发现类的速度稍快，与规范相同。让你的 css 清楚地看到在哪里可以让你的加载时间稍微快一点。

*/

在更彻底地阅读之后，我发现我的猜测中有一些错误。浏览器从右到左读取 css。它首先检查 html 中是否存在右手元素，然后向上移动以确保它位于正确的位置。因此，规格大多只是确保您选择正确元素的一种方式。相反，它们不会提高性能。

我建议你阅读这篇文章，它真的很有趣

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:32:59.247

您可以尝试优化效率，但这通常不值得。

> **这一切真的有必要吗？**
> 简短的回答是；可能不是。（[CSS Wizardry，关于 CSS 效率优化](http://csswizardry.com/2011/09/writing-efficient-css-selectors/)）

另一方面，如果您有一些实际示例，其中特定元素每页只能出现一次，但可以出现在文档中的不同位置，您可能希望对其进行不同的样式设置。您可以通过指定比 ID*更具体的规则来实现这一点。*

我想不出我需要这样做的“真正”原因，但这里有一个愚蠢的例子——寻找复活节彩蛋，其中一些鸡蛋图像每页出现一次，并且需要根据特定的父内容进行缩放：

```
header > #egg {
  width: 64px;
  height: 64px;
}

.navigation > #egg {
  width: 32px
  height: 32px;
}

footer > #egg {
  width: 16px;
  height: 16px;
}

#egg .cleverly-hidden {
  width: 16px;
  height: 16px;
  opacity: 0.5;
  filter: alpha(opacity=50);
} 
```

等等

然而，值得注意的是，即使 CSS 优化通常会产生不明显的结果，您仍然应该让事情尽可能简单。为了您自己的理智，以及您的网站达到一定程度的复杂性的边缘机会，其中动态文档上下文中的“无尽”选择器链*确实*变得引人注目。

# android - Android：以编程方式清除浏览器缓存的任何其他方式

> ID：15614893
> 
> 赞同：1
> 
> 时间：2013-03-25T12:24:38.187
> 
> 标签：android, browser

我们可以以编程方式清除浏览器历史记录吗，因为当再次打开它时，前一页已经打开

# php - 逐表导出 PHP/MYSQL 数据库

> ID：15614896
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:25:01.157
> 
> 标签：php, mysql, database, arrays, backup

我正在尝试将一组表保存到单独的文件中。为什么这段代码不起作用？

```
<?php
$query = "SELECT * INTO OUTFILE 'pessoa_Out.txt' FIELDS TERMINATED BY ',' ENCLOSED BY '\"'       LINES TERMINATED BY '#' FROM $tables[$i]";
?> 
```

我已经尝试保存一个表并且我成功了。我也可以列出数组值，所以问题一定出在这一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:34:00.680

如果 sql 处于循环中，那么您每次都在覆盖该文件。也不建议将变量放在字符串中，因为除非您也使用大括号，否则数组不会计算！

```
<?php
for($i=0;$i<sizeof($tables);$i++)
{
    $query = "SELECT * INTO OUTFILE '".$tables[$i]."_Out.txt' FIELDS TERMINATED BY ',' ENCLOSED BY '\"'       LINES TERMINATED BY '#' FROM ".$tables[$i];
    mysqli_query($query);
}
?> 
```

# iphone - 在调用另一个方法时停止 AppDelegate 加载 ViewController

> ID：15614901
> 
> 赞同：0
> 
> 时间：2013-03-25T12:25:15.080
> 
> 标签：iphone, ios, appdelegate

我将我的应用程序的存储方法从简单的文件写入更新到 CoreData。为了保存以前版本的所有数据，我编写了一个应用程序委托调用的迁移方法

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self checkForPreCoreDataFilesAndMigrate];
    //normal launching 
} 
```

该`checkForPreCoreDataFilesAndMigrate`方法从 CoreData 数据库中的先前版本迁移所有文件。

我现在的问题是我想阻止 appdelegate 执行其他操作，例如使用空数据库加载 Main ViewController（这基本上可以工作，但会扰乱迁移过程）。

我怎样才能做到这一点？有没有一种解决方案，我仍然可以显示迁移方法设置的内容`UIAlterView`。`UIProgressView`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:34:51.197

您可以使用以下方法

```
[self performSelector:@selector(checkForPreCoreDataFilesAndMigrate) onThread:[NSThread mainThread] withObject:nil waitUntilDone:YES]; 
```

# ios - 如何处理在 iOS 5 及更低版本上运行的应用程序的 identifierForVender

> ID：15614903
> 
> 赞同：3
> 
> 时间：2013-03-25T12:25:24.703
> 
> 标签：ios, objective-c, ios6, udid

在过去的几天里，我听说 Apple 正在这样做，以便使用它们正在运行的设备的 UDID 标识符的应用程序将被 Apple App Store 拒绝（[这是我读过的地方](http://forums.macrumors.com/showthread.php?t=1560202)）。他们建议开发人员使用`identifierForVender`iOS 6 中引入的。我对这种易于转换没有问题，但是如果我仍然想支持在`iOS`下面运行的设备，我应该使用什么`iOS6`？我是否仍然可以使用 UDID 标识符？我不相信这很清楚。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T13:11:56.643

如果您继续`uniqueIdentifier`独立于 iOS 版本使用，您的应用将被拒绝。我建议改用[OpenUDID](https://github.com/ylechelle/OpenUDID)，它是已弃用的`uniqueIdentifier`.

您可以检查是否`identifierForVendor`可用，或者您可以在所有情况下使用 OpenUDID。

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(identifierForVendor)]) {
    // Use: [[[UIDevice currentDevice] identifierForVendor] UUIDString];
} else {
    // Use: [OpenUDID value];
} 
```

# php - Codeigniter MVC，我应该将我的业务逻辑从模型移动到控制器以使用 ORM 吗？

> ID：15614905
> 
> 赞同：2
> 
> 时间：2013-03-25T12:25:29.957
> 
> 标签：php, codeigniter, design-patterns, orm, workflow

我试图将我当前的项目从使用常规 CI 查询构建器迁移到使用 ORM，因为我的数据库越来越大，而且我有超过 20 个 FK 和表之间的关系。

所以我目前正在为 CI 寻找一个不错的 orm。我找到了 IgniteRecord，但我遇到了一个巨大的问题。

示例模型/users.php：

```
class user extends IgnitedRecord {

public function is_loged(){
return $this->session->userdata('user');
} 
```

问题是它`$this`不再指向 CI，并且它 `Undefined property: user::$session`与任何 CI 类/库返回相同。

**那么有没有办法解决这个问题？**还是我需要`$CI =& get_instance();`在每个 ir 模型中使用？

由于**我的模型包含我的大部分应用程序业务逻辑**`$CI =& get_instance();`，我发现在所有模型中都这样做有点不舒服，

其他解决方案是将所有逻辑移入控制器！或者丢弃这个 orm 并坚持使用本机查询生成器：p。

** 所以下一个问题** 当使用 orm 时（我之前从未使用过），我应该将我的逻辑移动到控制器并只保留 orm 的模型！！！？？

这将破坏我的 DRY 法力，因为很多时候我将属性/方法设置到模型中并从视图/其他控制器访问它们这是一个无法在控制器内部完成的功能，因为我无法从视图/其他控制器中引用控制器属性/方法.

问题示例：

```
class Auth extends CI_Controller{
public $msg='hello world';

function index(){
$this->load->view('login');
}
}

class user extends CI_MODEL{
public $msg='HELLO FROM YOUR MODEL';
}

/*VIEW */
<?
echo $this->user->msg;//WORKS fine.
echo $this->auth->msg;//WILL NOT WORK. will throw an UNIDENTIFIED auth error
?> 
```

另外，我设计流程的方式通常是控制器从加载所有插件（例如：models/plugins/*.php）开始，这些插件设置一些数据属性供主模型使用，在加载所有插件后，控制器加载主模型并执行它逻辑并将结果发送回视图:)。

例子

```
models/plugins/settings.php:
    function config(){
        $this->msg = 'hello';
        $this->user = 'sam';
        return;
    }

models/hello.php
    function replace_sam (){
        $new='NONAME';
        if($this->settings->user=='sam') return $this->settings->msg.' '.$new
        else return $this->settings->msg.' '.$this->settings->user;
    }

controllers/home.php
    function index(){
        $this->load->model('plugins/settings');
        $this->settings->config();

        $this->load->model('hello');   

        echo $this->hello->replace_sam();
        //echo hello NONAME
    } 
```

好吧，我希望你能从这个简单的例子中明白我的意思......所以你认为我应该重写所有东西并将逻辑移到控制器！

我很欣赏你的意见。所以如果你认为是的，我应该为 orm 留下模型，那么请向我解释这不会是一个巨大的浪费！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T19:52:04.657

如果您查看 system/core/model.php，您会发现它是一个非常简单的类。它所做的只是`$CI =& get_instance()`在需要时调用。因此，将相同`__get()`的方法添加到您的类将使它们与内置方法一样好。

# c++ - 在智能指针上调用成员函数指针

> ID：15614907
> 
> 赞同：5
> 
> 时间：2013-03-25T12:25:44.127
> 
> 标签：c++, c++11, operator-overloading, smart-pointers, member-function-pointers

在处理类成员函数指针时，我们可以使用以下语法调用对象实例上的函数：

```
struct X {
    void foo();
};

X x;                // Instance
auto f = &X::foo;   // Member function pointer

(x.*f)();           // Call function f on x 
```

当有一个实例的原始指针时，语法是这样的：

```
X *xptr = new X();

(xptr->*f)(); 
```

这很好地遵循了静态函数调用的类比：

```
x.foo();
x->foo(); 
```

但是，当我有一个类的**智能指针**时，这不起作用：

```
unique_ptr<X> xsptr(new X());

(xsptr->*f)();    // g++: error: no match for 'operator->*' in 'xsptr ->* f' 
```

`.`我通过首先应用取消引用运算符，然后使用以下语法调用来解决此问题：

```
((*xsptr).*f)(); 
```

这有多丑？

编译器是否应该拒绝上面的箭头语法？因为通常（当静态调用函数时），它调用`operator ->`. 也不应该`->*`打电话`operator ->`吗？

编译器错误部分回答了这个问题：错误读取为我们可以重载`operator ->*`以调用取消引用对象上的成员函数指针，但`unique_ptr`事实并非如此。但这引入了更多问题。如果语言需要，为什么智能指针不这样做？它是否打算*不*这样做，因为它引入了其他问题？为什么我们必须编写这个运算符而不是隐式调用返回的对象的成员函数指针`->`？（因为这是写作时的行为`xsptr->foo()`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:39:24.020

> 编译器是否应该拒绝上面的箭头语法？因为通常（当静态调用函数时），它调用操作符->。不应该 ->* 也只是调用运算符 -> 吗？

编译器拒绝语法是正确的。No 不`operator->*`应该调用`operator->`（根据标准）。请注意，虽然语法可能看起来相似，但`->*`is 本身是一个运算符，而不是`->`with some other `*` *thing*的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T04:50:02.197

您可以重载`operator->*`for 智能指针。请参阅Scott Meyers 的[这篇](http://aristeia.com/Papers/DDJ_Oct_1999.pdf)文章。基本思想是返回一个函数对象，该对象将在运算符返回后被调用。

这篇文章有点过时了，您现在可以只使用一个可变参数模板来表示可变函数参数号。

# debugging - 为来自 clang 的优化传递启用调试输出

> ID：15614909
> 
> 赞同：17
> 
> 时间：2013-03-25T12:25:46.983
> 
> 标签：debugging, llvm, clang

我试图了解 LLVM 中的现有传递，因此试图在传递中打印写得很好的调试消息。我这样做是通过使用`clang -debug -some-other-flags`. 但是在编译时它说：

`clang: warning: argument unused during compilation: '-debug'`

如何启用调试输出？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-25T13:47:59.143

Clang 没有“调试”命令行选项；您需要从 clang 构建 IR，然后`opt -debug`单独运行，或者运行`clang -mllvm -debug`.

通常，该`-mllvm`标志会将之后出现的任何内容传递给 LLVM 本身。如果要继续传递多个选项，请使用多个`-mllvm`标志。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-25T12:36:05.240

如果接受的答案对您不起作用：除了添加之外`-mllvm -debug`，您还[需要在启用调试断言的情况下构建的 clang](https://groups.google.com/forum/#!topic/llvm-dev/XbhHxfmNYLY)，这是通过在编译 clang ( [ref](http://llvm.org/docs/GettingStarted.html#getting-started-quickly-a-summary) )`-DLLVM_ENABLE_ASSERTIONS=On`时添加到 cmake 选项来完成的。

# ruby - 使用 Ruby 反射执行条件赋值

> ID：15614910
> 
> 赞同：0
> 
> 时间：2013-03-25T12:25:52.537
> 
> 标签：ruby, reflection

在 Ruby 中，我有一个属性名称列表，如下所示：

```
names = [
  :foo,
  #...
] 
```

我想遍历列表，并使用反射对属性名称执行条件赋值。因此，例如，而不是这个，它不使用反射：

`self.foo ||= 0`

我想要这样的东西：

```
for name in names
   #use local variable "name" to perform assignment using reflection 
end 
```

如何使用 Ruby 反射来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:02:39.693

```
foo.bar ||= baz 
```

大致相当于*_*

```
foo.bar || foo.bar = baz 
```

我认为它并不完全相同，但对于您的目的来说已经足够接近了。所以，

```
names.each do |name| send(name) || send(:"#{name}=", 0) end 
```

应该做你想做的。这当然相当于

```
names.each do |name| send(:"#{name}=", 0) if send(name) end 
```

这可能更容易理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-25T12:35:26.173

```
names.each { |name| self.instance_variable_set("@#{name}", 0) } 
```

可能是您需要做的第一个近似值。

# json - 在 AS3 中测试元素是数字还是对象

> ID：15614912
> 
> 赞同：0
> 
> 时间：2013-03-25T12:26:05.920
> 
> 标签：json, actionscript-3

我正在使用一个程序通过导出的 JSON 文件使用 Box2D 构建游戏关卡，但在 JSON 文件中的某些元素往往具有多种格式时遇到了问题。

例如，一个“body”元素具有`position`由一个`x`和一个`y`值组成的属性：

```
"position" : 
{
     "x" : 0,
     "y" : 0
 }, 
```

然后稍后在文件中另一个元素的`position`属性没有`x`or `y`，只有一个数字值：

```
"position" : 0, 
```

我尝试过类似于`if(element is Number || element is Object)`没有成功的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:56:33.070

您可以测试该`Object.constructor`属性：

```
Object(0).constructor == Number // true
Object(0).constructor != Object // true
{x:0, y:0}.constructor == Object // true
{x:0, y:0}.constructor != Number // true 
```

# websphere - Websphere 消息代理的输入

> ID：15614916
> 
> 赞同：0
> 
> 时间：2013-03-25T12:26:15.680
> 
> 标签：websphere, integration, force.com, messagebroker

我需要将数据从 Oracle DB 发送到 SFDC 帐户。

场景：Oracle DB -> WebSphere Message Broker(MB) -> WebSphere Message queue(MQ) -> DataPower (Service) -> SFDC account

我不确定如何将数据推送到 MB？MB 是否有能力从任何来源提取数据？

如果它不具备这种能力，那么如何将数据从 Oracle DB 移动到 WebSphere Message Broker(MB)？一般使用什么通讯协议？如何将 Oracle DB 集成到 WebSphere Message Broker(MB)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T10:40:41.243

看起来您需要 DataBaseInput 节点。

更多信息在这里：http: [//publib.boulder.ibm.com/infocenter/wmbhelp/v8r0m0/topic/com.ibm.etools.mft.doc/bc34041_.htm](http://publib.boulder.ibm.com/infocenter/wmbhelp/v8r0m0/topic/com.ibm.etools.mft.doc/bc34041_.htm)

示例库中有此节点的示例，您可以使用它来熟悉该节点。

# jquery - 更改背景*而不刷新

> ID：15614920
> 
> 赞同：1
> 
> 时间：2013-03-25T12:26:22.937
> 
> 标签：jquery, css

我有一个带有图像的网站。

在每个图像上，一个鼠标悬停在可见的收藏图标上。

如果用户单击它，它将被添加到他们的收藏夹中：

```
 $.post("favoriet.php", { aid: aid } ); 
```

默认情况下，添加到收藏夹图标具有以下 css

```
.imgContainer div:hover a,
.imgContainer div:focus a 
{
background: url(/media/img/favourit25.PNG);
} 
```

但如果用户点击了收藏，则图像必须更改为 delete.PNG

无需刷新页面。

有什么办法我可以做到这一点？

外观示例：http: [//jsfiddle.net/9auEQ/4/](http://jsfiddle.net/9auEQ/4/)

如果单击，我想更改左上角的图片

如果我使用

```
function toevoegenFavo(aid) 
{       
    alert("the picture is added.");
    $.post("favoriet.php", { aid: aid } );
    $('.imgContainer').toggleClass('fav');
} 
```

toggleClass 有效并且所有图像都发生了变化（而不是我点击的只有 1 个）

```
<script>
$('.imgContainer').click(function () {
$(this).toggleClass('fav');
});
 </script> 
```

不要为我做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:34:45.493

您可以切换您的课程`.imgContainer`，然后添加样式以覆盖“添加到收藏夹”背景。

[jsFiddle](http://jsfiddle.net/AwBF7/1/)

**JS**

```
$('.imgContainer').click(function () {
    $(this).toggleClass('fav');
}); 
```

**CSS**

```
.imgContainer.fav div:hover a,
.imgContainer.fav div:focus a {
    background: url(http://www.letsgomobile.org/images/reviews/0102/samsung-camera-phone-test-pictures.jpg);

} 
```

# objective-c - addSubView 在 UITableView 上无法正常工作

> ID：15614923
> 
> 赞同：1
> 
> 时间：2013-03-25T12:26:30.507
> 
> 标签：objective-c, uitableview

此代码应在单元格上画一条线：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (nil==cell){
        cell = [[UITableViewCell alloc]
                                 initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }

    NSString *currentCourseName=[courseKeys objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:currentCourseName];
    NSLog(currentCourseName);
    CGSize size = [cell.textLabel.text sizeWithFont:cell.textLabel.font];
    CGFloat y = cell.contentView.frame.size.height / 2;

    UIView *line = [[UIView alloc] initWithFrame:CGRectMake(5,y,size.width, 3)];
    line.backgroundColor = [UIColor redColor];
    [cell.textLabel addSubview:line];

    return cell;

} 
```

但似乎我必须滚动几次才能看到红线。 ![在此处输入图像描述](../Images/4c00229d80b99165319e73bdc6b64fa1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T12:38:40.637

我在您的代码中看到两个问题。

**第一的**

`CGFloat y = cell.contentView.frame.size.height / 2`;

创建单元格`frame`的时候是什么？`contentView`如果要将子视图添加到标签，请使用标签的高度。

```
CGSize size = [cell.textLabel.text sizeWithFont:cell.textLabel.font];
UIView *line = [[UIView alloc] initWithFrame:CGRectMake(5, cell.textLabel.bounds.size.height / 2.0f - 1.5f, size.width, 3)];
line.autoresizingMask = (UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin); 
```

**第二**

`[cell.textLabel addSubview:line];`

如果一个单元格被重复使用，那么当已经有一行时，您正在向单元格添加行。首先检查`textLabel`子视图计数。

```
if (cell.textLabel.subviews.count == 0) {
    [cell.textLabel addSubview:line];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:47:13.140

我认为您正在添加的视图，而不是在您的方法中添加该视图，请`(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`尝试使用自定义单元格概念。这解决了我的这个问题`UITableView`。

[以编程方式创建自定义表格视图单元格](http://jainmarket.blogspot.in/2009/05/creating-custom-table-view-cell.html)

[iPad 编程中的自定义表格视图单元格](http://www.edumobile.org/iphone/ipad-development/custom-table-view-cells-in-ipad-programming/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:29:24.373

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (nil==cell){
        cell = [[UITableViewCell alloc]
                                 initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];

     NSString *currentCourseName=[courseKeys objectAtIndex:[indexPath row]];
    [[cell textLabel] setText:currentCourseName];
    NSLog(currentCourseName);
    CGSize size = [cell.textLabel.text sizeWithFont:cell.textLabel.font];
    CGFloat y = cell.contentView.frame.size.height / 2;

    UIView *line = [[UIView alloc] initWithFrame:CGRectMake(5,y,size.width, 3)];
    line.backgroundColor = [UIColor redColor];
    [cell.contentView addSubview:line];

    }

    return cell;

} 
```

# c# - 序列化列表时出错 I have a List which I am trying to serialize using the XmlSerializer and save to the disk but this piece of code generates an error while trying to serialize the file. Acco 问问题 问问题 2013-03-25T12:26:32.047 147 次 This question shows research effort; it is useful and clear -1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a List which I am trying to serialize using the XmlSerializer and save to the disk but this piece of code generates an error while trying to serialize the file. According to the thrown error message I get, I don't see anything wrong here and I think I need an extra pair of eyes on this. Does anyone have a good idea as to why this keeps me awake all night? :/ I know the list contains the element so there is something going wrong with the types perhaps? Tried Type[] but it gives the same problem. public static void createFileXml(String path) { //This creates an error while serializing XmlSerializer xmlser = new XmlSerializer(typeof(List)); TextWriter txtwrt = new StreamWriter(path); try { xmlser.Serialize(txtwrt, lstCopy); } catch { throw; } finally { if (txtwrt != null) { txtwrt.Close(); } } } In this case the array become associative. All PHP arrays are some sort of Associative arrays and are implemented as a hash table. c# 4 1 回答 1 This answer is useful 1 我有一个通用的 serializeobject 方法，这是我不久前写的。也许它也会帮助你。 public static string SerializeObject<t>(T obj) { try { string xmlString = null; using (MemoryStream memoryStream = new MemoryStream()) { XmlSerializerNamespaces ns = new XmlSerializerNamespaces(); ns.Add("", ""); UTF8Encoding enc = new UTF8Encoding(); using (StreamWriter writer = new StreamWriter(memoryStream, enc)) { XmlSerializer xs = new XmlSerializer(typeof(T)); xs.Serialize(writer, obj, ns); } xmlString = enc.GetString(memoryStream.ToArray()); return xmlString; } } catch { return string.Empty; } } 注意：您可能需要根据需要对其进行更改。 于 2013-03-25T12:35:45.317 回答 Related 0 c++ - Valgrind 是否提供选项来通过专门针对 C++ 的函数来捕获对象的访问？如果是这样，可以使用什么选项？ 4 c - 检查字符是否为空格 7 php - 当单词太长时添加空格 1 jruby - jruby 登录到哪里？ 1 c++ - 通过 FlasCC 在 AS3 中使用解压库 1 .net - 具有版本控制的实体：使用 SQL 获取最新版本列表的最佳方式 2 haskell - 严格版 foldl 无限运行 1 python - 使用列表中的值绘制多个函数 1 jquery - 选择选项不适用于 jQuery 1 html - 元素项上的 CSS 样式 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15614924
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：c#

I have a `List<Object>` which I am trying to serialize using the `XmlSerializer` and save to the disk but this piece of code generates an error while trying to serialize the file.

According to the thrown error message I get, I don't see anything wrong here and I think I need an extra pair of eyes on this.

Does anyone have a good idea as to why this keeps me awake all night? :/

I know the list contains the element so there is something going wrong with the types perhaps? Tried `Type[]` but it gives the same problem.

```
public static void createFileXml(String path)
{           
    //This creates an error while serializing
    XmlSerializer xmlser = new XmlSerializer(typeof(List<Object>));
    TextWriter txtwrt = new StreamWriter(path);
    try
    {
        xmlser.Serialize(txtwrt, lstCopy);
    }
    catch
    {
        throw;
    }
    finally
    {
        if (txtwrt != null)
        {
            txtwrt.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:35:45.317

我有一个通用的 serializeobject 方法，这是我不久前写的。也许它也会帮助你。

```
public static string SerializeObject<T>(T obj)
{
    try
    {
        string xmlString = null;
        using (MemoryStream memoryStream = new MemoryStream())
        {
            XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
            ns.Add("", "");
            UTF8Encoding enc = new UTF8Encoding();
            using (StreamWriter writer = new StreamWriter(memoryStream, enc))
            {
                XmlSerializer xs = new XmlSerializer(typeof(T));
                xs.Serialize(writer, obj, ns);
            }
            xmlString = enc.GetString(memoryStream.ToArray());
            return xmlString;
        }
    }
    catch
    {
        return string.Empty;
    }
} 
```

注意：您可能需要根据需要对其进行更改。</t>

# c++ - How do I read from QProcess?

> ID：15614927
> 
> 赞同：4
> 
> 时间：2013-03-25T12:26:42.430
> 
> 标签：c++, qt, qprocess

I have this simple C++ program:

```
int main(int argc, char *argv[])
{

    QCoreApplication a(argc, argv);

    QProcess ps;
    QByteArray ba;

    ps.start("ls J:");
    ba = ps.readAllStandardOutput();
    char *someData = ba.data();

    cout << "Testing QProcess ..." << endl;
    cout << someData << endl;
    cout << "done!" << endl;

    return a.exec();
} 
```

The output is:

```
Testing QProcess ...

done! 
```

If I run "ls J:" from Windows cmd it works. What am I missing?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T12:37:22.603

在循环中使用[QIODevice::waitForReadyRead()](http://qt-project.org/doc/qt-4.8/qiodevice.html#waitForReadyRead)，只有在返回之后，然后调用`readAllStandardOutput()`. 正如文档中所说，[`QProcess::readAllStandardOutput()`](http://qt-project.org/doc/qt-4.8/qprocess.html#readAllStandardOutput)将读取所有*可用*数据，但不会等待。在开始阅读之前，您需要等待该过程以[`QProcess::waitForStarted()`](http://qt-project.org/doc/qt-4.8/qprocess.html#waitForStarted).

快速未经测试的部分代码，将行替换`ba = ps.readAllStandardOutput();`为：

```
if (ps.waitForStarted(-1)) {
    while(ps.waitForReadyRead(-1)) {
        ba += ps.readAllStandardOutput();
    }
}
// else report error or whatever 
```

当出现错误或子进程终止时，它应该退出循环，但继续阅读直到那时，没有超时。

注意：在“常规”Qt 程序中，您将运行事件循环，然后您不会调用`waitForReadyRead()`或其他类似的便利功能。他们会阻止事件循环并停止其他一切。在这样的程序中，您*最好*使用信号和插槽，或者开始使用线程（但这通常不是首选，它只会增加不必要的复杂性）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-25T12:39:49.817

[`QProcess`文档](http://qt-project.org/doc/qt-5.0/qtcore/qprocess.html)说，`QProcess`当有数据可供读取时，该对象会发出信号：`readyRead()`and`readyReadStandardOutput()`和`readyReadStandardError()`.

最简单的方法是将这些信号连接到您的插槽，并使用例如。`readAllStandardOutput()`那里。

当然海德斯循环也可以。

# jquery - nicescroll plugin - unable to copy contents other then in view port on scroll down

> ID：15614928
> 
> 赞同：0
> 
> 时间：2013-03-25T12:26:45.223
> 
> 标签：jquery, jquery-ui, scroll, scrollbar

I am using the jquery scroll plugin : nicescroll - [http://areaaperta.com/nicescroll/demo.html](http://areaaperta.com/nicescroll/demo.html)

I have a div attached with the nicescroll, the contents in the div are large say 100 lines but I am only displaying 10 lines at a time. The scrolling is working perfectly but I am unable to copy the contents more then 10 visible lines as scrollbar doesn't scroll down when my mouse has reached the end of the 10th line. This behaviour of scrolling down when we copy data is normal and standard but unable to perform so using the plugin. I have gone through the complete documentation and was unable to find the solution, so posting here. I have observed the same issue on their site.

Does anyone have any solution to achieve this behaviour?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:24:22.577

在最新版本 v.3.2.0 的插件中已经实现了卷轴上复制内容的要求。添加到插件中的新选项是启用crollonselection。

谢谢犬夜叉。[您可以从https://github.com/inuyaksa/jquery.nicescroll](https://github.com/inuyaksa/jquery.nicescroll)下载最新版本

# symfony - Dynamic service id in an argument in symfony2?

> ID：15614929
> 
> 赞同：9
> 
> 时间：2013-03-25T12:26:45.657
> 
> 标签：symfony, config

Is it possible to set the service id in an argument dynamically (e.g. like a class name which could be set via parameter) in Symfony 2 (xml configs)?

The following does not work

```
<service id="myservice" class="myservice.php">
    <argument type="service" id="%dynamic_service_name%" />
</service>

<service id="service1" class="foobar\service1" />
<service id="service2" class="foobar\service1" /> 
```

the idea is to set the param %dynamic_service_name% dynamically to "service1" or "service2", so the needed instance/object is passed to myservice-class, e.g. in the Extension::load() via $container->setParameter('dynamic_service_name','service1');

Thanks a lot

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-07-26T17:37:57.107

You can use CompilerPass:

```
class DynamicServiceCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $container->getDefinition('myservice')
            ->setArguments(array(new Reference($container->getParameter('dynamic_service_name'))));
    }
} 
```

and add it to your Bundle class:

```
public function build(ContainerBuilder $container)
{
    parent::build($container);

    $container->addCompilerPass(new DynamicServiceCompilerPass());
} 
```

**FOLLOW UP**:

Since Symfony 2.4 you can use [Expression Language](http://symfony.com/doc/current/service_container/expression_language.html) like this:

```
<services>
    <service id="myservice" class="My\Service">
        <argument type="expression">service(container.hasParameter('dynamic_service_name') ? parameter('dynamic_service_name') : 'default_service_name')</argument>
    </service>
</services> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-12T08:55:46.643

您可以使用函数将参数读入服务定义中，并使用该`parameter()`函数创建服务`service()`。所以你可以创建一个动态服务

在你的parameters.yml

```
 parameters:
      dynamic_service_name:  mydynamicservice 
```

在你的 services.yml

```
 myservice:
        class: My\Service
        arguments:['@=service(parameter("dynamic_service_name"))'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T12:29:27.627

直接来自 symfony2 文档 ;)

```
<!-- app/config/config.xml -->
<parameters>
    <parameter key="my_mailer.class">Acme\HelloBundle\Mailer</parameter>
    <parameter key="my_mailer.transport">sendmail</parameter>
</parameters>

<services>
    <service id="my_mailer" class="%my_mailer.class%">
        <argument>%my_mailer.transport%</argument>
    </service>
</services> 
```

这就是你所追求的吗？

[http://symfony.com/doc/current/book/service_container.html#service-parameters](http://symfony.com/doc/current/book/service_container.html#service-parameters)

编辑：

这是我的一项服务，使用参数。但是，它在 YAML 中。这工作得很好。如您所见，它在参数中使用类名和类的命名空间。

```
parameters:
    seer_ukd_wright_gallery.gallery_helper.class: SeerUK\DWright\GalleryBundle\DependencyInjection\GalleryHelper

services:
    seer_ukd_wright_gallery.gallery_helper:
        class: %seer_ukd_wright_gallery.gallery_helper.class%
        arguments:
            em: "@doctrine.orm.entity_manager" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T13:46:02.753

这大致就是使用容器本身作为工厂的方式。然后，您可以将“dynamic_service_name”定义为 service1 或 service2，它将加载到该服务中。（工厂的 XML 在 2.6 中略有不同，但应该仍然可以正常工作）

```
<service id="service1" class="foobar\service1" />
<service id="service2" class="foobar\service1" />

<service id="some.service" class="foobar\service1"
             factory-service="service_container"
             factory-method="get">
        <argument>%dynamic_service_name%</argument>
    </service>

<service id="myservice" class="myservice.php">
    <argument type="service" id="some.service" />
</service> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-14T16:31:57.430

添加到彼得福克斯的答案，这是 YAML 中的等价物：

```
some.service:
    class: Foobar\Service1
    factory_service: service_container
    factory_method: get
    arguments:
        - %dynamic_service_name%
myservice:
    class: MyService
    arguments:
        - @some.service 
```

在如何指定两种服务的类方面存在两个小的差异。我不熟悉将文件名用作类，`foobar\service1`也不符合 PSR，所以我替换了这些。

# c - how to write C code to arrange the input data in matrix form?

> ID：15614930
> 
> 赞同：-4
> 
> 时间：2013-03-25T12:26:57.257
> 
> 标签：c

Ex: input = {0,1,2,3,4,5,6,7,8,9,. . . . . . .(n-2),(n-1),n}

i want out as follows

Where number of columns and row are defined

For this example columns = 6 rows = input/columns;

```
         _                       _
        | 0, 1,  2,   3,   4,   5 |
        | 6, 7,  8,   9,   .    . |
matrix =| .  .   .    .    .    . |
        | .  .   .    .    .    . |
        | .  .   .  (n-2),(n-1),n | 
        |_                       _|

```

Please any body help me..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:51:15.183

我认为没有人可以按原样*回答*这个问题，因为它的定义不明确......但我可能会帮助你指出正确的方向。

矩阵只是一个二维数组，因此请查看如何在 C 中执行此操作，例如：

```
int matrix[2][3]; // a static, uninitialized, 2 by 3 matrix

int fill = 0;
for(int row = 0; row < 2; row++)
    for(int col = 0; col < 3; col++, fill++)
        matrix[row][col] = fill; //will initialize the array to 0, 1, 2,
                                 //                             3, 4, 5 
```

它们要么是静态分配的（如上所述），要么是动态分配的（使用`malloc()`）。如果您要即时提出维度，则需要使用动态分配的矩阵。

我会根据您的评论猜测：`Where number of columns and row are defined...rows = input/columns`这意味着行数基于`input`来自用户（`stdin`）的行数，因此您必须动态执行此操作。

# c# - 如何在iis驻留内部文件夹中映射默认文档

> ID：15614942
> 
> 赞同：0
> 
> 时间：2013-03-25T12:27:28.583
> 
> 标签：c#, asp.net, iis, iis-7

![在此处输入图像描述](../Images/20ad69822c633c9ffecde1de16dd3373.png)

**如何从 Dir2 文件夹映射默认文档文件。我有一个 index.html 文件。虽然我配置为**

![在此处输入图像描述](../Images/d61967bcd793239f04e2c310aecadb45.png)

**js 文件和 css 文件不适用于此 index.html 页面。我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T15:07:16.793

这听起来与 IIS 或默认文档无关，也与您如何在 HTML 页面中包含对样式和脚本文件的引用有关。您需要确保每个页面中的 URL 都是正确的。如果您尝试使用您在 Ap1/index.html 中指定的 URL 浏览到 JS 或 CSS 文件，会发生什么情况？如果您得到 404，那么您的 src 或 href 属性在*该*文件中不正确。

根据您的评论，如果您希望在应用程序的不同级别使用完全相同的页面，则需要将 JavaScript 和 CSS 文件的路径转换为绝对路径。绝对路径以正斜杠“/”开头，从站点层次结构的根开始，直到到达您的文件。例如，如果您的脚本文件位于根级别下方的文件夹中，您将执行以下操作：

```
<script type="text/javascript" src="/scripts/myscript.js"></javascript> 
```

同样，对于根级别以下文件夹中的样式，您将执行以下操作：

```
<link rel="stylesheet" href="/styles/mystyle.css" /> 
```

然后，无论您将 index.html 放在站点层次结构中的哪个位置，客户端浏览器都应该能够找到您的文件。

# ruby-on-rails - Rails 2.2.2 application_helper.rb 方法 - 迁移到 Rails 3

> ID：15614944
> 
> 赞同：0
> 
> 时间：2013-03-25T12:27:32.690
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在将 Rails 2.2.2 应用程序迁移到 Rails 3，显然我必须将位于 application_helper.rb 中的方法移到其他地方。

当我加载使用 Rails 2.2.2 application_helper.rb 中的方法的页面的 Rails 3 版本时，我得到

```
undefined method 'my_method_in_application_helper_rb' 
```

**有人可以解释一下 application_helper.rb 中的方法应该去哪里，以便在 Rails 3 中看到它们吗？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:35:34.083

我使用了一个 Rails 迁移脚本，它将 Rails 2.2.2 application_helper.rb 方法放在一个文件扩展名为 .rails2 的同名文件中。我刚刚将方法从那里复制到 Rails 3 application_helper.rb 文件中 - 现在一切正常

# .net - 从旧参考更改方法

> ID：15614956
> 
> 赞同：1
> 
> 时间：2013-03-25T12:28:03.677
> 
> 标签：.net, http, reference, client

```
public string Post(T obj)
    {
        HttpRequestMessage request = new HttpRequestMessage();
        MediaTypeFormatter[] formatter = new MediaTypeFormatter[] { new JsonMediaTypeFormatter() };
        var content = request.CreateContent<T>(obj, MediaTypeHeaderValue.Parse("application/json"), formatter, new FormatterSelector());
        HttpResponseMessage response = client.PostAsync(this.url, content).Result;
        return response.Content.ToString();
    } 
```

这是我在我的 中使用的 Post 方法`HTTPClient`，但有一个问题 -`CreateContent`并且`FormatterSelector`- 是来自旧引用的类。如何将此代码重写为最新参考：

```
using System.Net.Http;
using System.Net.Http.Formatting;
using System.Net.Http.Headers;
using Newtonsoft.Json; 
```

* * *

我明白在什么问题上。这个方法是扩展方法！所以它们对我来说是不可用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-09T13:30:12.400

你可以试试这段代码：

```
public async Task<string> Post<T>(T obj)
    {
        MediaTypeFormatter jsonFormatter = new JsonMediaTypeFormatter();
        HttpContent content = new ObjectContent<T>(obj, jsonFormatter);

        var response = await client.PostAsync(this.Url, content);
        return response.Content.ToString();
    } 
```

# android - DialogPreference 中的 ExpandableListAdapter

> ID：15614957
> 
> 赞同：0
> 
> 时间：2013-03-25T12:28:05.427
> 
> 标签：android, android-layout, expandablelistview, expandablelistadapter

我试图将 ExpandableListAdapter 添加到 DialogPrefence。

我的布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/channels_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:orientation="horizontal" >
    <LinearLayout
        android:id="@+id/channelsProgress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            android:id="@+id/pbChannelsProgress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:descendantFocusability="beforeDescendants" >
        </ProgressBar>
    </LinearLayout>
    <ExpandableListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
         >
    </ExpandableListView>

</LinearLayout> 
```

这就是我使用 ListView 的方式

```
HiddenChannelsListAdapter adapter = new HiddenChannelsListAdapter(ctx, tree, subscribed_channelsList);
ListView lv = (ListView) vw.findViewById(R.id.list);
lv.setAdapter(adapter); 
```

我必须如何使用 ExpandableListAdapter 来做到这一点？

```
ExampleReallySimpleExpandableListAdapter adapter = new ExampleReallySimpleExpandableListAdapter(ctx, groupData, childData);
AbsListView lv = (AbsListView) vw.findViewById(R.id.list);
lv.setAdapter(adapter); 
```

这导致：

```
03-25 14:24:23.780: E/AndroidRuntime(22187): FATAL EXCEPTION: main
03-25 14:24:23.780: E/AndroidRuntime(22187): java.lang.ClassCastException: com.example.tvrplayer.ExampleReallySimpleExpandableListAdapter cannot be cast to android.widget.ListAdapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:36:41.820

调用`setAdapter(ExpandableListAdapter)`from `ExpandableListView`，而不是通用`setAdapter(ListAdapter)`from `AbsListView`。

也就是改变

```
AbsListView lv = (AbsListView) vw.findViewById(R.id.list); 
```

至

```
ExpandableListView lv = (ExpandableListView) vw.findViewById(R.id.list); 
```

# eclipse - 为什么在将新文件添加到新克隆的存储库后，Egit 不允许我将存储库推送到 github？

> ID：15614958
> 
> 赞同：0
> 
> 时间：2013-03-25T12:28:05.443
> 
> 标签：eclipse, git, github, egit

基本上我在 Windows 上使用 Eclipse 和 Egit。我遇到了文件无法正确推送的问题，所以我刚刚开始了一个新的存储库，因为它是一个小项目。所以我从 github 上删除了存储库，新建了一个，通过 Eclipse 导入了新的，将旧项目中的文件（没有 .git 文件夹）复制到新项目中，提交了更改，并尝试推送。但它只是告诉我一切都是最新的，而无需发送任何文件。没有错误，只是“最新”。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:55:51.010

不需要命令行。您可以在提交对话框中轻松添加新的未跟踪文件。按右侧显示问号的按钮以显示未跟踪的文件。然后像选择更改的文件一样选择它们进行提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T12:53:08.913

事实证明，如果您将文件复制到项目中并尝试提交更改，Egit 插件不会自动为您添加文件。根据 Alex Florescu 的评论，要解决此问题，您需要先通过命令行添加文件，然后才能通过 egit 正确同步。

`git add --all`我通过在我的项目目录中运行来解决这个问题。幸运的是一个简单的解决方案！

# c# - 不正确的 Jquery 文件参考工作 - 如何？

> ID：15614964
> 
> 赞同：-1
> 
> 时间：2013-03-25T12:28:17.020
> 
> 标签：c#, asp.net, jquery-ui

我有一个查询，我使用下面的代码在我的一个 aspx 文件中使用 jquery。

```
<script type="text/javascript" src="<%= ResolveClientUrl
("js/jquery-1.8.1.js")% >"> </script> 
```

但是，在我的 js 文件夹中，我保留了 jquery-1.8.2.min 文件，级联下拉列表的代码仍然有效。

怎么可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:32:30.737

1.  您可能在同一文件夹中也有 8.1
2.  它可能只是被缓存了。一旦您清除缓存内存，它就会消失。使用其他浏览器测试此选项。
3.  您可以使用链接了其他版本的母版页..

# jquery - 未定义 jquery 的值

> ID：15614967
> 
> 赞同：-3
> 
> 时间：2013-03-25T12:28:33.353
> 
> 标签：jquery

这是我的jQuery

```
 var obj=$("#Connect");
  alert($("#Connect").value); 
```

该值似乎未定义，但我在那里有一个 html 标签

```
<input type="button" id="Connect" value="Connect"/> 
```

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-25T12:29:18.827

你在这里混合 jquery 和 javascript...在 jquery 中获取价值的正确方法是`val()`

尝试这个

**jQuery**

```
alert($("#Connect").val()); 
```

**javascript**

```
 alert(document.getElementById("Connect").value); 
```

# jquery - 鼠标进入时动态创建的元素。（意外触发鼠标退出事件）

> ID：15614975
> 
> 赞同：0
> 
> 时间：2013-03-25T12:28:59.713
> 
> 标签：jquery

我想要工具栏，其中从具有 class 的 div 中检测到 mouse-out/in 事件`container`。和事件按预期工作`mouseover`。`mouseout`当鼠标移入和移出元素及其后代时会触发这些事件。但是没想到的事情发生了：新创建的div在鼠标移动到自己的时候就被删除了，删除后又触发了`mouseover`事件，于是又创建了一个新的div，让人眼花缭乱。任何遇到过这种问题的人请帮助我。谢谢。

假设你有这个 HTML：

```
<div id='parent' class="parent container">
    <div id="child1" class="child container">
    </div>
    <div id="child2" class="child container">
    </div>
</div> 
```

而且，这个 JavaScript：

```
$(function() {
    $('div.container').on('mouseover', function(e){
        e.stopPropagation();
        $(this).append("<div class='newdiv'></div>")
        console.log("into " +$(this).attr('id'));
    }).on('mouseout', function(e){
        $(".newdiv",this).remove();
        console.log("out from  " + $(this).attr('id'));
    })
}); 
```

使用 CSS：

```
.parent
{
    border:1px solid black;
    width:100%;
    height:400px;
}

.child
{
    float:left;
    width:40%;
    border:1px solid red;
    margin:1px;
    height:300px;
}

.newdiv{
    border:1px solid blue;
    margin:2px;
    width:100px;
    height:100px;
    position:absolute;
    right:0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:47:39.790

我发现了问题，它在你的 CSS 中。添加相对位置。否则它假定第一个具有相对位置。

```
.child
{
    float:left;
    width:40%;
    border:1px solid red;
    margin:1px;
    height:300px;
    position: relative;
} 
```

看看[http://jsfiddle.net/Jn7e2/](http://jsfiddle.net/Jn7e2/)

哦，您在 append 函数后面没有分号。这将克服任何其他问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T14:18:29.260

也许您需要使用 show() 和 hide() 来聚焦 div，因为从子级传播到父级的事件可能存在问题。那这个呢：

[http://jsfiddle.net/Jn7e2/1/](http://jsfiddle.net/Jn7e2/1/)

```
<div id='parent' class="parent container">
    <div id="child1" class="child container">
        <div class="newdiv" style="display:none">
        </div>
    </div>
    <div id="child2" class="child container">
        <div class="newdiv" style="display:none">
        </div>
    </div>
</div> 
```

*   JS：

```
    $（函数（）{
      $('div.container').on('mouseover', function(e){

      e.stopPropagation();
          $(this).children(".newdiv").show();
          console.log("进入" +$(this).attr('id'));
       }).on('mouseout', function(e){
           e.stopPropagation();
           $(".newdiv",this).hide();
           console.log("out from " + $(this).attr('id'));
       })
     });

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T15:33:08.040

总而言之，我确实找到了一种方法，但它非常冗长而且看起来很紧迫......任何人都可以提供更好的方法来让它更容易和有趣......希望。谢谢。

```
$(function() {
    $('div.container').mouseenter(function(e){
        e.stopPropagation();
        $(this).css("border","2px solid red");
        $(this).append("<div class='newdiv'></div>"); 
        $(this).parents().each(function(){
            if ($(this).children(".newdiv").length>0)
            {
                $(this).children(".newdiv").remove();
                $(this).css("border","1px solid red");
            }
        });
        if ($(".newdiv",this).length==0)
         {
            //alert('ddd');

         }

        console.log("into " +$(this).attr('id'));
    }).mouseleave( function(e){
        $(".newdiv",this).remove();
        if ($(this).parent().hasClass("container") && $(".newdiv",$(this).parent()).length==0)
        {
            $(this).parent().css("border","2px solid red");
            $(this).parent().append("<div class='newdiv'></div>"); 
        }

        $(this).css("border","1px solid red");
        console.log("out from  " + $(this).attr('id'));
    });
}); 
```

# c++ - 创建二叉搜索树的 doubleTree()？

> ID：15614977
> 
> 赞同：0
> 
> 时间：2013-03-25T12:29:03.067
> 
> 标签：c++, data-structures, binary-tree, binary-search-tree

我遇到了一个问题，说明

```
 For each node in a binary search tree, 
 create a new duplicate node, and insert 
 the duplicate as the left child of the original node. 
 The resulting tree should still be a binary search tree. 
```

[http://cslibrary.stanford.edu/110/BinaryTrees.html](http://cslibrary.stanford.edu/110/BinaryTrees.html)

那里有解决方案，但我的解决方案不同。

```
void doubleTree(struct node* node) { 
  struct node* tempNode;

  if (node->left == NULL) 
  {
   node->left = new Node(node->data);   
  }
  else{
   tempNode = new Node(node->data);
tempNode->left = node->left;
node->left = tempNode; 
  }
} 
```

这种方法正确吗？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:57:32.273

该方法是正确的，但是，您`doubleTree()`不关心`each`问题陈述中的单词。它仅将一个节点加倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:57:44.130

不是不正确。您的代码仅将一个节点添加到树中。因此，它不会将树中的节点加倍，除非该树恰好只有一个节点。

顺便说一句，我会先解决打印树的问题，然后再做任何事情。如果无法打印树，如何检查其他问题的解决方案是否正确？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-06T21:06:50.663

```
void createDoubleTree(TreeNode t) {
        if (t == null) {
            return;
        }
        createDoubleTree(t.left);
        TreeNode temp=t.left;
        t.left=new TreeNode(t.k);
        t.left.left=temp;
        createDoubleTree(t.right);
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-19T10:28:28.277

GDB 场景：假设您被一家领先的软件公司聘为软件工程师，并分配了一项任务来根据员工姓名按字母顺序存储员工记录。您的应用程序应允许按名称插入、删除和搜索记录。公司主要关注的是对员工记录进行有效搜索，以检查员工的绩效。为此，二分搜索是一个不错的选择。但是 BST 有一个问题，它不处理重复值，因为它的正式定义说“如果一个元素大于它的根，它会在它的右边；如果它小于它的根，它会在它的左边走”。此定义不处理重复值。但是，在给定的情况下，由于可能有多个员工具有相同的姓名，因此您的 BST 也应该能够处理重复值。现在考虑一下，您有以下选项来更改 BST 定义以适应重复值：如果一个元素大于 root，它将在其右侧，如果它小于 root，它将在其左侧; 否则，它可能在根的右侧或左侧。对每个节点使用一个数组来存储重复的条目。

GDB 问题：您的任务是针对给定场景的时间和内存，分析在 BST 定义中使用上述建议更改的成本和收益。

# android - 所有android全屏的服务器中的照片

> ID：15614979
> 
> 赞同：0
> 
> 时间：2013-03-25T12:29:10.290
> 
> 标签：分辨率, android, screen-resolution, android-image, android-screen-support, imagedownload

我想在我的服务器上上传照片，以便 android 用户可以下载它们并在他的设备中查看它们。问题是我必须以哪种[分辨率](/questions/tagged/resolution "显示标记为“解决方案”的问题")上传它们才能在每个 android 设备屏幕上很好地显示，除了 x-large 屏幕。我不想以不同的分辨率上传它们，因为根据用户的屏幕尺寸向用户收费是不公平的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:33:31.143

如果您在显示时遇到低端设备，只需上传标准尺寸的高分辨率图像并按比例缩小。

例如，您可以上传 3 MP (2048 x 1536) 的图像，这对于大多数设备来说都应该适用。如果设备是低端的，您可以在检查设备分辨率后将其缩小。

在大多数情况下，您无需担心这一点。如果您只是通过意图在默认图库应用程序中打开下载的图像（3 MP），设备的图库应用程序将为您处理此问题。

如果您正在构建自己的显示机制，那么您必须自己处理缩放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T12:41:55.563

加载尺寸更大的图像会降低性能。使用正常尺寸的图像，最大尺寸为 1 mb。

# c# - 只需停止异步方法

> ID：15614991
> 
> 赞同：17
> 
> 时间：2013-03-25T12:29:53.447
> 
> 标签：c#, windows-phone, async-await

我有这种方法可以在用户点击屏幕时播放声音，并且我希望它在用户再次点击屏幕时停止播放。但问题是“DoSomething()”方法不会停止，它会一直运行直到完成。

```
bool keepdoing = true;

private async void ScreenTap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        keepdoing = !keepdoing;
        if (!playing) { DoSomething(); }
    }

private async void DoSomething() 
    {
        playing = true;
        for (int i = 0; keepdoing ; count++)
        {
            await doingsomething(text);
        }
        playing = false;
    } 
```

任何帮助将不胜感激。
谢谢 ：）

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-25T12:50:44.547

这就是 a[`CancellationToken`](https://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken(v=vs.110).aspx)的用途。

```
CancellationTokenSource cts;

private async void ScreenTap(object sender, System.Windows.Input.GestureEventArgs e)
{
  if (cts == null)
  {
    cts = new CancellationTokenSource();
    try
    {
      await DoSomethingAsync(cts.Token);
    }
    catch (OperationCanceledException)
    {
    }
    finally
    {
      cts = null;
    }
  }
  else
  {
    cts.Cancel();
    cts = null;
  }
}

private async Task DoSomethingAsync(CancellationToken token) 
{
  playing = true;
  for (int i = 0; ; count++)
  {
    token.ThrowIfCancellationRequested();
    await doingsomethingAsync(text, token);
  }
  playing = false;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-11-09T02:04:23.227

使用 CancellationToken 而不抛出异常的另一种方法是声明/初始化 CancellationTokenSource cts 并将 cts.Token 传递给 DoSomething，如 Stephen Cleary 上面的回答。

```
private async void DoSomething(CancellationToken token) 
{
    playing = true;
    for (int i = 0; keepdoing ; count++)
    {
        if(token.IsCancellationRequested)
        {
         // Do whatever needs to be done when user cancels or set return value
         return;
        }
        await doingsomething(text);
    }
    playing = false;
} 
```