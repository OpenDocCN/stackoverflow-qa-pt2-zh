# StackOverflow 问答 12780000-12780999

# import - 导入时的 MacOSX python 错误

> ID：12780010
> 
> 赞同：4
> 
> 时间：2012-10-08T10:39:08.603
> 
> 标签：import, pygame, simplecv

[我最近使用页面https://github.com/ingenuitas/simplecv](https://github.com/ingenuitas/simplecv)中的 osX-Lion 设置说明安装了 SimpleCV

然后我在终端中输入 python ，当我尝试以下操作时出现错误。

```
import SimpleCV
Fatal Python error: (pygame parachute) Segmentation Fault
Abort trap: 6 
```

但是，当我尝试自己导入 pygame 时，我没有收到任何错误。有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-21T11:12:03.107

使用并遵循[新](https://github.com/sightmachine/simplecv)存储库的此说明，您正在[使用](https://github.com/ingenuitas/simplecv)的有此警报消息。

> SIMPLECV 回购已移动（截至 2013 年 4 月 17 日）

表示存储库标题。

> 警告：此处的 REPO 仅用于遗留目的

# embedded - 与 AM1808 接口的热敏打印机

> ID：12780012
> 
> 赞同：0
> 
> 时间：2012-10-08T10:39:12.593
> 
> 标签：embedded, arm, embedded-linux

我必须将热敏打印机与基于嵌入式 linux 的 AM1808 连接。

我已经连接了一台只有单向通信的打印机，这意味着我只需要发送数据而无需从打印机接收任何内容进行验证。

我有自己的打印机，需要双向通信，我必须在其中发送数据，并且我需要从打印机接收某些东西以验证它是否已成功打印数据。

是的，我的打印机在打印了大约 4000 字节时会挂起，所以我必须重新初始化它以清空其内置缓冲区。

现在我的问题是一旦我配置了一个 UART 端口。我必须启用或禁用传输或接收吗？意味着它可以在启用传输和接收的情况下工作？我该怎么做，请帮助我。

我是否必须将打印机置于中断状态。？？？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:05:27.053

我曾经使用过的所有 UART 都有独立的 tx 和 rx 硬件。假设没有启用硬件流控制，那么如果你可以 tx OK，你应该可以 rx。

我必须让打印机中断吗？- 好吧，在抢占式多任务处理程序上，通常使用中断驱动程序（或某些变体，例如完成时带有中断的 DMA），是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T23:18:20.257

> 我已经连接了一台只有单向通信的打印机，这意味着我只需要发送数据而无需从打印机接收任何内容进行验证。

*“......不需要收到任何东西......”*可能是一个错误的假设。

你的打印机应该有某种**流量控制**来防止数据溢出。字符显示器和行式打印机接收数据的速度通常比显示或打印数据的速度要快。这些设备使用简单的通信协议，不具备任何重新传输丢失数据的功能。因此，当设备的接收缓冲区已满时，有流控制通知主机（暂时）停止发送数据。

EIA/RS-232 串行接口可以使用硬件（通常使用 CTS 控制线）或软件（嵌入数据，通常使用 XON 和 XOF 字符）进行单端流量控制。一旦配置了串口，Linux 串口驱动程序和线路规则使流控制对应用程序不可见。

> 是的，我的打印机在打印了大约 4000 字节时会挂起，所以我必须重新初始化它以清空其内置缓冲区。

这似乎证明您忽略了打印机提供的任何流量控制，并导致数据溢出。

> 现在我的问题是一旦我配置了一个 UART 端口。我必须启用或禁用传输或接收吗？

这不是突出的问题。您需要确定打印机需要什么样的流量控制，然后实施（即配置）它。

# javascript - CasperJS 动态选择列表

> ID：12780014
> 
> 赞同：4
> 
> 时间：2012-10-08T10:39:15.947
> 
> 标签：javascript, ruby, web-scraping, capybara, casperjs

需要帮忙

我正在从该网站上抓取数据，该表单包含三个相互连接的选择列表，如果选择第一个选择列表中的任何选项，则调用此函数`onchange="Javascript:submitForm2();`并填充第二个选择列表。

随后，如果选择了第二个选择列表中的一个选项，则会调用相同的 js 函数`onchange="Javascript:submitForm2();"`，最后，此表单的两个提交按钮分别调用不同的 js 函数来填充结果。所以我查看了文档，但没有找到任何关于选择列表的信息。

三个相互连接的动态变化的选择列表

`<select name="s1" onChange="Javascript:submitForm2();" style="width: 150px" width="150"> <select name="s2" onChange="Javascript:submitForm2();" style="width: 300px" width="300"> <select name="s3" style="width:300px" width="300">`

表单有两个提交按钮

尝试使用这些代码`this.click('select#s1 option[value="26"]'); this.debugHTML();`

给我这个错误`CasperError: Cannot dispatch click event on nonexistent selector: select#s1 option[value="26"]`

我也试过`document.querySelector('select[name="s1"]').setAttribute('value', "26");` 了`TypeError: 'null' is not an object (evaluating'document.querySelector('select[name="s1"]').setAttribute')`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:08:20.767

共享解决方案脚本。我迭代了选择列表`n*n*n`时间以及日期和两个按钮。

```
 require 'rubygems'
    require 'capybara-webkit'
    require 'capybara/dsl'
    require 'nokogiri'

    include Capybara::DSL
    Capybara.current_driver = :webkit

    visit("http://thewebsite.com")

    op0_xpath = "//*[@name='selectlist0']/option[1]"
    op0 = find(:xpath, op0_xpath).text
    select(op0, :from => 'selectlist0')

    page.evaluate_script("$('body').submitForm2()")
    sleep(2)

    op1_xpath = "//*[@name='selectlist1']/option[1]"
    op1 = find(:xpath, op1_xpath).text
    select(op1, :from => 'selectlist1')

    page.evaluate_script("$('body').submitForm2()")
    sleep(2)

    op2_xpath = "//*[@name='selectlist2']/option[1]"
    op2 = find(:xpath, op2_xpath).text
    select(op2, :from => 'selectlist2')

    sleep(2)

    find(:xpath, "//input[@name='curYear']").set "2012"
    find(:xpath, "//input[@name='curMonth']").set "10"
    find(:xpath, "//input[@name='curDay']").set "09"

    click_button('button1')
    page.evaluate_script("$('body').submitForm()") 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T19:41:30.710

你可以做这样的事情，你有一个包含三个相互关联的选择的表单。

```
var valueFirstSelect  = 125;    
var valueSecondSelect = 6;      
var valueThirdSelect  = 47;     

//create casper object
var casper = require('casper').create({
    loadImages:false,
    verbose: true,
    logLevel: 'debug'
});

//open url
casper.start('http://thewebsite.com');

casper.then(function(){

    //select option on first select
    this.evaluate(function(selectValue){
        document.querySelector('select[name=s1]').value = selectValue; 
        return true;
    },valueFirstSelect);

    //firing onchange event to populate the second select
    this.evaluate(function() {
        var element = document.querySelector('select[name=s1]');
        var evt = document.createEvent('HTMLEvents');
        evt.initEvent('change', false, true);
        element.dispatchEvent(evt);
    });

    //wait until the second select is populated
    this.waitFor(function check() {
        return this.evaluate(function() {
            return document.querySelectorAll('select[name=s2] option').length > 1;
        });
    }, function then() {

            //select option on second select
            this.evaluate(function(selectValue){
                document.querySelector('select[name=s2]').value = selectValue; 
                return true;
            },valueSecondSelect);

            //firing onchange event to populate the third select        
            this.evaluate(function() {
                    var element = document.querySelector('select[name=s2]');
                    var evt = document.createEvent('HTMLEvents');
                    evt.initEvent('change', false, true);
                    element.dispatchEvent(evt);
            });

            //wait until the third select is populated            
            this.waitFor(function check() {
                return this.evaluate(function() {
                    return document.querySelectorAll('select[name=s3] option').length > 1;
                });
            }, function then() {

                    //select option on third select
                    this.evaluate(function(selectValue){
                        document.querySelector('select[name=s3]').value = selectValue; 
                        return true;
                    },valueThirdSelect);

                    //click submit button
                    casper.thenClick('form.items input[type="submit"]', function() {

                        /* Do something after click  */                

                    });
            });         
    }); 
});

casper.run(function() {

    //finish execution script 
    this.exit();
}); 
```

如果您的上下文页面包含 jQuery 库，则此代码可能会有所不同（更小更简洁）。

这里有一个使用 casperjs 和 jQuery 与动态选择列表的示例。

[带有链式选择的 CasperJs 和 Jquery](https://stackoverflow.com/questions/16283908/casperjs-and-jquery-with-chained-selects/16300933#16300933)

# jsp - 使用 tukey URL Rewrite 清理 URL

> ID：12780025
> 
> 赞同：1
> 
> 时间：2012-10-08T10:39:38.957
> 
> 标签：jsp, url, url-rewriting, tuckey-urlrewrite-filter

我有一个 settings.jsp 页面，其中有两个链接帐户和个人资料。settings.jsp?tab=account 将显示帐户设置，settings.jsp?tab=profile 将显示配置文件设置，我想将 settings.jsp?tab=account 的 url 清理到设置/帐户，以下是我写的规则（非工作）。

```
<rule>
    <from>^/settings/account$</from>
    <to>/settings.jsp?tab=account</to>
</rule> 
```

谁能告诉我这里有什么问题？

# c# - 在 jQuery 对话框小部件中插入更新删除

> ID：12780028
> 
> 赞同：0
> 
> 时间：2012-10-08T10:39:41.473
> 
> 标签：c#, jquery, asp.net

我想使用 jQuery Dialog WIDGET 在我的 SQL Server 数据库中插入数据。在 jQuery 小部件中，我有多个字段和一个提交按钮，如果用户按下提交，记录将被输入数据库并自动关闭对话框。[参考链接](http://jqueryui.com/demos/dialog/#modal-form)上的代码很有帮助，但我想将它插入我的数据库。请帮我解决这个问题，我真的坚持了好几天了。我什至没有示例代码可以在这里发布，但我所做的是：

```
function linkbtnTest(abc) {
    $(abc).dialog({

        modal: true,
        buttons: { "OK": function () { $(this).dialog("Close") } },
        open: function (type, data) { $(this).parent().appendTo("form") },

        height: 600,
        width: 800
    });
}

<div id='<%# Eval("LCID") %>' style="display: none;">
                            <table>
                                <tr>
                                    <td>
                                        <asp:Label ID="lblInvoiceNumber" runat="server" Text="Invoice Number">
                                        </asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblInvoiceDate" runat="server" Text="Invoice Date">
                                        </asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblBLNumber" runat="server" Text="B/L Number">
                                        </asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblBLDate" runat="server" Text="B/L Date">
                                        </asp:Label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <asp:TextBox ID="txtInvoiceNumber" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtInvoiceDate" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtBLNumber" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtBLDate" runat="server"></asp:TextBox>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <asp:Label ID="lblVesselName" runat="server" Text="Invoice Number">
                                        </asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblVoyageNumber" runat="server" Text="Invoice Date">
                                        </asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblDueDate" runat="server" Text="B/L Number">
                                        </asp:Label>
                                    </td>
                                    <td>
                                        <asp:Label ID="lblShipmntSchedule" runat="server" Text="B/L Date">
                                        </asp:Label>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <asp:TextBox ID="txtVesselName" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtVoyageNumber" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtDueDate" runat="server"></asp:TextBox>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="txtShipmntSchedule" runat="server"></asp:TextBox>
                                    </td>
                                </tr>
                            </table>
                        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:52:01.090

看看我如何使用 Jquerymodel 弹出窗口插入简单的组名及其父 ID。

```
$("#create-group")
        .button()
        .click(function () {
            $("#dialog-form").dialog("open");
        });

        $("#dialog-form").dialog({
            autoOpen: false,
            height: 150,
            width: 260,
            modal: true,
            buttons: {
                "Add": function () {

                //start validation
                    var bValid = true;
                    allFields.removeClass("ui-state-error");
                   //add all ur validation here                 
                //end validation
                    if (bValid) {

                        //var pid = $('#<%=hfInstrumentid.ClientID %>').val(); // gat the value from asp.net form

                        var grouppname = $("#name").val();//get the value from html form
                        var dlg = $(this);

                        $.ajax({
                            async: false,
                            type: "POST",
                            url: "Config.asmx/AddGroup", //asp.net web method AddGroup(int parentid,string gpname)
                            data: JSON.stringify({ parentid: pid, gpname: grouppname }),
                            contentType: "application/json; charset=utf-8",
                            dataType: "json",
                            success: function (data) {
                                var models = data.d;
                                alert('data inserted...')
                                dlg.dialog("close");
                            },
                            complete: function (data) { },
                            error: function (req, status, error) { alert(error.toString()) }
                        })
                    }
                },
                Cancel: function () {
                    $(this).dialog("close");
                }
            },
            close: function () {
                allFields.val("").removeClass("ui-state-error");
            }
        }); 
```

# java - 将连接池与 JSCH 一起使用

> ID：12780036
> 
> 赞同：9
> 
> 时间：2012-10-08T10:40:00.347
> 
> 标签：java, multithreading, connection-pooling, sftp, jsch

我正在使用 JSCH 进行 sftp 文件上传。在当前状态下，每个线程在需要时打开和关闭连接。

是否可以使用 JSCH 的连接池来避免大量连接打开和关闭造成的开销？

这是从线程内部调用的函数示例

```
 public static void file_upload(String filename) throws IOException {
    JSch jsch = new JSch();
    Session session = null;
    try {
        session = jsch.getSession("user", "server_name", 22);
        session.setConfig("StrictHostKeyChecking", "no");
        session.setPassword("super_secre_password");
        session.connect();

        Channel channel = session.openChannel("sftp");
        channel.connect();
        ChannelSftp sftpChannel = (ChannelSftp) channel;

        FileInputStream inputSrr = new FileInputStream(filename);  
        try {  
            sftpChannel.put(inputSrr, "/var/temp/"+filename);  
        } catch (SftpException e) {  
            e.printStackTrace();  

        } finally {  
            if (inputSrr != null) {  
                inputSrr.close();  
            }  
        }  

        sftpChannel.exit();
        session.disconnect();
    } catch (JSchException e) {
        e.printStackTrace();
    } catch (SftpException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T10:00:54.557

为此，我更喜欢[commons-pool](http://commons.apache.org/pool/examples.html)。;)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-16T17:20:54.543

这是 Ssh 连接池的实现 [http://www.javacodegeeks.com/2013/02/pool-of-ssh-connections-using-apache-keyedobjectpool.html](http://www.javacodegeeks.com/2013/02/pool-of-ssh-connections-using-apache-keyedobjectpool.html)

你可以使用 grep4j 来使用这个池 [https://code.google.com/p/grep4j/source/browse/trunk/src/main/java/org/grep4j/core/command/linux/SessionFactory.java?r= 354](https://code.google.com/p/grep4j/source/browse/trunk/src/main/java/org/grep4j/core/command/linux/SessionFactory.java?r=354)

还要确保您可以从执行机器访问服务器。例如，如果目标服务器不在您的范围内。它会抛出连接超时。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-11-01T12:40:24.647

我想和你分享我们的实现，我们使用了[jsch-extension 库的](https://github.com/lucastheisen/jsch-extension)[Session Manager](https://github.com/lucastheisen/jsch-extension/blob/master/src/main/java/com/pastdev/jsch/SessionManager.java)

首先，您需要实现负责池对象生命周期的池对象工厂：

```
public class ChannelSftpConnectionsFactory extends BasePooledObjectFactory<ChannelSftp> {
    private SessionManager sessionManager;

    public ChannelSftpConnectionsFactory(final SessionManager sessionManager) {
        this.sessionManager = sessionManager;
    }

    //Create and open channel
    @Override
    public ChannelSftp create() throws JSchException {
        ChannelSftp channelSftp = (ChannelSftp) sessionManager.getSession().openChannel("sftp");
        channelSftp.connect();

        return channelSftp;
    }

    //wrapping
    @Override
    public PooledObject<ChannelSftp> wrap(final ChannelSftp channelSftp) {
        return new DefaultPooledObject<>(channelSftp);
    }

    @Override
    //disconnect channel on destroy
    public void destroyObject(final PooledObject<ChannelSftp> pooledObject) {
        ChannelSftp sftp = pooledObject.getObject();
        disconnectChannel(sftp);
    }

    void disconnectChannel(final ChannelSftp sftp) {
        if (sftp.isConnected()) {
            sftp.disconnect();
        }
    }

    @Override
    //reset channel current folder to home if someone was walking on another folders
    public void passivateObject(final PooledObject<ChannelSftp> p) {
        ChannelSftp sftp = p.getObject();
        try {
            sftp.cd(sftp.getHome());
        } catch (SftpException ex) {
            log.error("Could not reset channel to home folder, closing it");
            disconnectChannel(sftp);
        }
    }

    @Override
    //validate object before it is borrowed from pool. If false object will be removed from pool
    public boolean validateObject(final PooledObject<ChannelSftp> p) {
        ChannelSftp sftp = p.getObject();
        return sftp.isConnected() && !sftp.isClosed();
    }
} 
```

现在您可以使用配置的工厂创建池：

```
ObjectPool<ChannelSftp> createPool(final SessionManager sessionManager, final GenericObjectPoolConfig<ChannelSftp> poolConfig) {
    return PoolUtils.synchronizedPool(new GenericObjectPool<>(buildFactory(sessionManager), poolConfig));
}

PooledObjectFactory<ChannelSftp> buildFactory(final SessionManager sessionManager) {
    return PoolUtils.synchronizedPooledFactory(new ChannelSftpConnectionsFactory(sessionManager));
} 
```

此 java 文档将帮助您正确配置池：[https ://commons.apache.org/proper/commons-pool/api-2.6.0/org/apache/commons/pool2/impl/BaseGenericObjectPool.html](https://commons.apache.org/proper/commons-pool/api-2.6.0/org/apache/commons/pool2/impl/BaseGenericObjectPool.html)

不要忘记正确借用和返回对象到池中：[https ://commons.apache.org/proper/commons-pool/api-2.6.0/org/apache/commons/pool2/ObjectPool.html](https://commons.apache.org/proper/commons-pool/api-2.6.0/org/apache/commons/pool2/ObjectPool.html)

```
 Object obj = null;

 try {
     obj = pool.borrowObject();
     try {
         //...use the object...
     } catch(Exception e) {
         // invalidate the object
         pool.invalidateObject(obj);
         // do not return the object to the pool twice
         obj = null;
     } finally {
         // make sure the object is returned to the pool
         if(null != obj) {
             pool.returnObject(obj);
        }
     }
 } catch(Exception e) {
       // failed to borrow an object
 } 
```

# iphone - H.264 与 MPEG-4 文件大小

> ID：12780039
> 
> 赞同：1
> 
> 时间：2012-10-08T10:40:11.370
> 
> 标签：iphone, h.264, mpeg-4

苹果的文档似乎表明这些是不同的，例如

[http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Conceptual/iPhoneOSTechOverview/MediaLayer/MediaLayer.html)

但是哪个会产生更小的文件大小，哪个会为固定的视频大小产生更好的视频质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:31:49.750

一般来说，H.264 会比 MPEG4 更好。这并非在所有情况下都是正确的，并且取决于所使用的工具集，但如果您正在为具有标准编码要求和条件的 iOS 编码，h.264 会好得多。

# entity-framework - 当我使用 TPH 时，所有表都重新创建

> ID：12780045
> 
> 赞同：0
> 
> 时间：2012-10-08T10:40:28.503
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我正在开发一个 EF - MVC 3 应用程序。我使用了**模型优先的方法**，所以我首先创建了模型，EF 从该模型生成了数据库。

我使用了一个名为 Nuget - Entity Generator - Database Designer 的工具来生成数据库。当我第一次设计模型时，我使用了该工具的 Generate Migration T-SQL and Deploy 选项。

数据库生成完美，工作正常......

现在我遇到了一种情况，我必须对模型进行更改，并且我必须使用 T-SQL Via T4 (TPH) 选项来更新数据库。

![在此处输入图像描述](../Images/b6dd4f94ebb01c23068c5c3dfa35c3ee.png) 所以以前我使用不同的过程来更新数据库，现在我正在改变它。

当我使用 T-SQL Via T4 (TPH) 时，所有表都会被删除并创建新表。如何避免这种情况？

我只想更新我进行了更改的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:44:02.353

实体框架 4.3 附带迁移支持。这在 EF 4.1 中不可用。

来自谷歌的一些链接：

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)

[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)

# c# - 通过 C++ 调用 C# 服务

> ID：12780057
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:40:50.860
> 
> 标签：c#, c++, visual-studio-2010, web-services, visual-c++

我想通过 Visual Studio 2010 中的 Visual C++ 或 C++ 调用用 C# 编写的 Web 服务。我在 Web 上搜索但找不到任何点对点文档。如果你能告诉我，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:45:39.317

如果您准备好使用托管 C++，那么您可以使用 WCF。

但是，如果这不是一个选项，那么您最好的选择是使用套接字方法。您将需要一些跨语言的方式来表示您从 C++ 发送到 C# 并再次返回的数据。[Google Protobuf](http://code.google.com/p/protobuf/)将在这里提供帮助，因为除了许多其他语言之外，还有两种语言的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:44:36.823

查看[演练：使用 C++ 访问 XML Web 服务](http://msdn.microsoft.com/en-us/library/2k53kft2%28v=vs.80%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:46:55.190

Web 服务使用 JSON 或 XML 作为接口，并且本质上与语言无关。您将不得不寻找可以创建对 Web 服务的请求的库。例如，如果您在 C# 中的 Web 服务使用 SOAP (XML)，如果您在 Visual Studio 中创建默认 Web 服务，您可以根据 SOAP 的规范在 XML 中创建您自己的请求：

[http://www.w3.org/TR/2000/NOTE-SOAP-20000508/](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/)

或使用此问题中提到的库之一：

[用于 C++ 的通用 WebService (SOAP) 客户端库](https://stackoverflow.com/questions/4285585/generic-webservice-soap-client-library-for-c)

# reporting-services - MS 报告和文本框 LineHeight

> ID：12780058
> 
> 赞同：0
> 
> 时间：2012-10-08T10:40:54.920
> 
> 标签：reporting-services, textbox

我在我的应用程序中使用本地报告 (RDLC)，我似乎无法在文本框中获取所需的行高 - 设置`LineHeight`任何 TextBox 的属性都没有做任何事情。我将它设置为 5pt、10pt、5cm、20cm - 我就是不工作。所以，问题是 - 我做错了什么？这只是报告的另一个*功能*吗？我是否需要围绕它进行某种仪式舞蹈才能使其发挥作用？

# php - Linux 中 PHP 的 Oracle 模块

> ID：12780061
> 
> 赞同：0
> 
> 时间：2012-10-08T10:41:10.953
> 
> 标签：php, oracle, oci8

有什么方法可以直接访问远程托管的 Oracle 数据库，而无需在我的计算机上安装 oracle。

我已经有了远程托管的 Oracle 数据库的主机名、数据库名、用户名和密码。我正在使用 Red Hat Enterprise Linux Server 第 5 版 (Tikanga)，但尚未安装 Oracle。

你的帮助将是宝贵的。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:47:25.563

您只需要安装**oci8** PHP 扩展，请参阅[**此处**](http://xavier.perseguers.ch/tutoriels/typo3/articles/oracle-database/oracle-support-for-php.html#c719)获取教程。

# batch-file - 打开铬便携式.bat文件

> ID：12780062
> 
> 赞同：0
> 
> 时间：2012-10-08T10:41:12.410
> 
> 标签：batch-file, cmd, chromium

我已经编写了一个 .bat 文件，以在我想要的页面上以信息亭模式打开 chromium 便携版，就像一个全屏应用程序一样。这很好用。我的问题是，如果它位于带有空格的文件夹中，则它不起作用。我知道我可能需要以某种方式添加引号，但不确定如何使用该`%cd%`命令来执行此操作，谁能告诉我如何使我的 .bat 文件从任何文件夹？代码如下：

```
@echo off
start %cd%\appdata\chromeportable.exe --kiosk %cd%\appdata\app.html 
```

我该如何编辑它，以便它从标题中带有空格的文件夹中运行！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:34:27.250

我不太明白你的问题，但这里有一些事情可以尝试

要将目录更改为带有空格的路径，请使用

```
cd "C:\folder\folder with spaces" 
```

从包含另一个目录的空格的文件夹启动批处理文件

```
"C:\folder\folder with spaces\openchromium.bat" 
```

如果这不是您想要做的，请改进您的问题。

**更新**

发布您的代码后，我可以看到一个可能的问题。当您使用`start`并引用第一个参数中的路径时，它会将其视为标题，要解决此问题，您可以给它一个像这样的空白标题

```
start "" "%cd%\appdata\chromeportable.exe" "--kiosk %cd%\appdata\app.html" 
```

希望这可以帮助

# java - 油漆应用程序中撤消/重做的命令模式

> ID：12780063
> 
> 赞同：5
> 
> 时间：2012-10-08T10:41:23.487
> 
> 标签：java, oop, undo, undo-redo, command-pattern

我想在一个小型[绘画应用程序](https://stackoverflow.com/a/12683632/418556)中实现撤消/重做。似乎[命令模式](http://en.wikipedia.org/wiki/Command_pattern)非常适合使用，但我不确定如何最好地实现它。

据我了解该模式，有必要在每个命令中包含：

1.  用于重做的绘制操作的详细信息（例如 Line -> start & end points, free form line -> `GeneralPath`）
2.  撤消更改之前组件的状态。在这种情况下，这将是受命令影响的区域的小快照图像。

我基于此的理解是，每个命令都需要是“原子的”或自包含的，以及撤消/重做该操作所需的所有信息。

不幸的是，这需要存储比我最初预期的更多的信息。对于一条线，我们还必须考虑`Color`,`Stroke`和`RenderingHints`最初用来绘制它的东西。这将我的“简单的小命令”变成了……在内存中更庞大的东西，并产生了更多的样板代码（每个都是可序列化的 bean ¹）。

出于节省内存的原因（主要是），我想在命令规范上“作弊”。可能每 100 次更新备份整个绘图区域，否则不存储更改的图像的任何部分，并且只需为每个新的绘制操作重建最后（最多）100 个命令。但是，在绘制每个部分之前确保`Graphics`对象的状态正确似乎是有问题的 - 这部分可能需要一行，但是`RenderingHints`4 个命令前已`Color`更改， 98 个命令前已更改，而`Stroke`最后一个保持不变227 个命令。

就“原子”而言，追求更高效的内存命令似乎会将模式扔出窗外。这反过来又导致难以确定可能影响渲染的最早命令。

我是不是该：

*   寻找新模式？
*   尝试通过调整模式来实现我的特殊需求？
*   将所有这些作为过早的优化扔进垃圾箱，并以最简单（也是最消耗内存）的方式进行编码，并按照定义的命令模式进行编码？

## 更新

1.  *“每个都将是一个可序列化的bean”* 第二个想法，不。我做了圆顶检查，发现 a `Graphics2D`（它巧妙地封装了绘图时使用的许多参数）不可序列化。此外，a`BasicStroke` **是可**序列化的，但笔画的粗细不被存储。我可以创建许多属性的可序列化版本，但它似乎需要更多代码，所以我将放弃该规范。也是。我只会尝试`BufferedImage`在运行时存储对 a 的引用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:52:42.357

我会坚持使用命令模式并首先尝试一个幼稚的解决方案（=最需要内存的）。对于某些图形操作，甚至可能需要在命令对象中保留整个图像的副本（例如，考虑过滤器）。这也是专业图像编辑应用程序中的常见问题，它们通常对记住的最后命令有内存或步数限制。如果内存消耗非常大，您可能会考虑将命令历史记录中最旧的条目交换到文件系统。我认为用户不会介意等待一秒钟，直到更改撤消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:32:37.313

也许，最好不要在命令中存储整个图像的副本，而只存储由命令更改的区域的副本。当然，这不是灵丹妙药

# java - 用于聊天应用程序的 Google App Engine 和 Android 中的 XMPP

> ID：12780069
> 
> 赞同：2
> 
> 时间：2012-10-08T10:41:56.547
> 
> 标签：java, android, google-app-engine, xmpp

我想构建一个简单的聊天应用程序，用户可以在其中互相发送消息。我可以使用 Google App Engine 的 XMPP 服务吗？

在他们的教程和我在网上找到的所有教程中，它是一个机器人服务器的实现。我还找到了类似的教程，但它们是在 python 中的。

是否有一个很好的完整教程可以指导服务器和客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:50:02.467

是的，您可以使用作为第三方库提供的 XMPP/Smack 库。有了这个，您可以创建自己的自定义聊天应用程序，就像市场上可用的一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:48:40.933

如果您想构建自己的聊天应用程序，您可能想使用 Channel API。那是为了向浏览器发送消息。

XMPP API 用于向 XMPP 客户端发送消息。即，如果您想向内置于 gmail、gchat 客户端或 facebook 聊天中的聊天客户端发送消息。

# regex - 有没有一种正则表达式方法来检测一个字符是否可以成为单词的一部分？

> ID：12780071
> 
> 赞同：1
> 
> 时间：2012-10-08T10:42:04.393
> 
> 标签：regex, vb.net

这个问题的“棘手”部分是我所说的字母不仅仅是26个字符。它还应该包括任何字母，包括重音字符和希伯来语的 alibeth 等。

为什么我需要它们？

我想将文本拆分为单词。

像拉丁字母、希伯来的 alibeth、阿拉伯的 abjads 等字母由空格分隔。

汉字是一无所有的。

所以我认为我应该用任何不是字母的东西来分隔文本。

换句话说，a、b、c、d、é 都可以。

駅,南,口,第,自,転,车.,3,5,6 不是，所有这些分隔符都应该是它自己的话。或者类似的东西。

简而言之，我想检测一个字符本身是否是一个**单词**，或者**可以是一个单词的一部分**。

我尝试了什么？

好吧，您可以在这里查看我很久以前提出的问题： [如果某些字符是中文，我们如何将 utf-8 字符分成单词？](https://stackoverflow.com/questions/12412544/how-can-we-separate-utf-8-characters-into-words-if-some-of-the-characters-are-ch/12412586#comment17271993_12412586)

我在那里实现了唯一的答案，但后来我发现汉字没有分开。为什么不根据无分裂？好吧，这意味着字母表也被拆分了。

如果所有这些字母“粘”在一起，我可以根据 UTF 将它们分开，那也很好。

[如果某些字符是中文，我将只使用如何将 utf-8 字符分成单词](https://stackoverflow.com/questions/12412544/how-can-we-separate-utf-8-characters-into-words-if-some-of-the-characters-are-ch/12412586#comment17271993_12412586)的答案？ 并“拉出”所有非字母字符。

不是一个完美的解决方案，但对我来说已经足够了，因为西方字符和中文字符很少出现在同一个文本上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:47:34.550

也许您不应该使用正则表达式来执行此操作，而应使用良好的旧字符串索引扫描。

希伯来文、中文、韩文等字母都在 unicode 代码点的连续范围内。因此，您可以通过读取字符的 unicode 值然后检查它属于哪个 unicode 块来轻松检测字母表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:21:54.503

Jan Goyvaerts（PowerGrep 的名人）曾经向我展示了这个非常有用的语法来做到这一点：

```
(?<![\p{M}\p{L}])word(?![\p{M}\p{L}]) 
```

此表达式使用正则表达式lookbehind 和正则表达式lookahead 来确保单词的边界使得两边都没有字母或变音符号。

为什么这个正则表达式比简单地使用“\b”更好？这个正则表达式的优势在于合并了 \p{M} 以包含变音符号。当使用正常的单词边界标记 (\b) 时，正则表达式引擎会在许多变音符号的位置找到断词，即使变音符号实际上是单词的一部分（例如，希伯来语变音符号就是这种情况。对于举个例子，以希伯来语单词 גְּבוּלוֹת 为例，并在其上运行“\b.”的正则表达式 - 你会看到它实际上是如何在每个变音点将单词分解成单词的不同部分）。上面的正则表达式通过使用 Unicode 字符类来解决这个问题，以确保变音符号始终被视为单词的一部分，并且不会在单词中中断。

# wordpress - 如何自定义 wp_nav_menu

> ID：12780078
> 
> 赞同：0
> 
> 时间：2012-10-08T10:42:28.747
> 
> 标签：wordpress, styles, themes, customization

我正在开发一个 wordpress 主题，我正在尝试在标题下方添加一个顶部菜单。

我正在使用正确显示页面的 wp_nav_menu，但我不知道如何设置它的样式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T15:50:44.590

[选项在 codex 中](http://codex.wordpress.org/Function_Reference/wp_nav_menu)描述。您可以简单地复制/粘贴示例代码并添加您自己的类和 ID，如下所示：

```
<?php $defaults = array( 
 'container_class' => 'my-container-class', 
 'container_id'    => 'my-container-id',
 'menu_class'      => 'my-menu', 
 'menu_id'         => 'my-menu-id',
 'items_wrap'      => '<ul id="%1$s" class="%2$s">%3$s</ul>',
); ?>

<?php wp_nav_menu( $defaults ); ?> 
```

$items_wrap 部分解释了 %1$s 和类似内容。本质上，它们用于选择您希望这些自定义类和 ID 在代码中的位置。一切就绪后，打开你的 style.css 文件并开始有趣的事情。

```
.my-container-class {
 /* set your rules here */
}

#my-container-id {
 /* and so on... */
} 
```

另一个更简单的选项只需要任何[代码检查器](http://getfirebug.com)和一些 css 的基本知识。Wordpress 生成的 ID 和类就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:51:30.363

在这里您可以找到每个单独元素的 css 类，以便您可以在 CSS 文件中设置样式：

[http://codex.wordpress.org/Function_Reference/wp_nav_menu#Menu_Item_CSS_Classes](http://codex.wordpress.org/Function_Reference/wp_nav_menu#Menu_Item_CSS_Classes)

# ibm-jazz - 安装 Rational Team Concert 和 Rational Insight

> ID：12780080
> 
> 赞同：0
> 
> 时间：2012-10-08T10:42:31.783
> 
> 标签：ibm-jazz

我需要在我的本地机器上同时安装 RTC 和 Rational Insight，但我很困惑是否应该先安装数据库。即使我不知道哪个数据库适合 Insight & RTC。

我不知道如何设置Dataware House？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:45:37.823

结合 RTC 和 Insight 时，数据库的选择很重要。对于 RTC 本身，尤其是对于一个小团队，您可以将 Derby（包括在内）用于存储库数据库（基本上是产品的操作数据库）和数据仓库（用于报告的单独数据库）。但是，如果您想使用 Rational Insight 或 RRDI（两者都包括基于 Cognos 的报告），那么您必须在 Derby 以外的数据库上拥有一个数据仓库。通常，Oracle、SQL Server 和 DB2 是您的选择，但请查阅您的 Rational Insight 版本的平台需求列表，以确保您使用的是受支持的配置。

关于设置数据仓库，如果您使用 RTC 和 Insight，通常您会在两个应用程序之间共享一个仓库（即 RTC 可以将仓库用于其内部基于 BIRT 的报告，而 Insight 可以将仓库用于其基于 Cognos 的报告）。在这种情况下，您可以将数据仓库设置为 RTC 设置的一部分（JTS 设置向导配置数据仓库），然后在设置 Insight 时将 Insight 指向该仓库。

我希望这有帮助。

詹姆士

IBM Rational Reporting 技术主管

# ruby-on-rails - 处理文件来自activeadmin 表单中的字段 我在我的一个 activeadmin 表单上有一个这样的选择： f.input :sdfile, :as => :select, :collection => Dir.glob("incoming/*") 用户应该预先将文件上传到“传入”目录。我现在想处理这个文件，将它移动到正确的文件夹，但 CarrierWave 拒绝从路径名“上传”。任何简单的方法来处理文件，将其移动到相应的文件夹？谢谢。在 JUnit 测试用例中，您可以编

> ID：12780081
> 
> 赞同：0
> 
> 时间：2012-10-08T10:42:32.133
> 
> 标签：ruby-on-rails, activeadmin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:24:12.943

试试这样：

```
Image.new :data=>File.new("/path/to/image.jpg","r") 
```

或者

```
Image.new :data=>File.open('/path/to/image.jpg', 'rb') 
```

# c# - 维护响应式 WPF UI

> ID：12780082
> 
> 赞同：3
> 
> 时间：2012-10-08T10:42:35.233
> 
> 标签：c#, wpf, mvvm

几天来，我一直在试图弄清楚如何做到这一点。

这是一个相当普遍的问题，所以我将尽可能笼统地解释这种情况，以便其他人可以从中获得一些用处。

我的 WPF（使用 MVVM）对话框上有一个列表视图，它绑定到一个可观察的项目集合，例如，五个属性显示在单独的列中。

我调用了一个函数，它遍历所有项目并更改它们的一个属性。此功能需要一段时间才能完成所有项目，因此我希望它随时更新每个项目。

有哪些选项可以做到这一点，以使 UI 保持响应，哪个最容易实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:54:11.810

如果您正在使用`C# 4.0`，请使用

```
Task.Factory.StartNew(new Action(() =>
{
    .....
     //CALL YOUR UPDATE METHOD

 })).ContinueWith( { //something to execute after, if need}..) 
```

`ModelView`当从其他线程设置对象时，使用

```
Application.Current.Dispatcher.Invoke(new Action(() =>
{
    //set ModelView object properties here
})); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:49:48.290

我会使用一个 ObservableCollection Extender，它允许您在另一个线程中更新集合。这是我在处理集合时在我的应用程序中使用的：

```
public class ObservableCollectionExtender<T> : ObservableCollection<T>
{
    /// <summary>
    /// Source: New Things I Learned
    /// Title: Have worker thread update ObservableCollection that is bound to a ListCollectionView
    /// http://geekswithblogs.net/NewThingsILearned/archive/2008/01/16/have-worker-thread-update-observablecollection-that-is-bound-to-a.aspx
    /// Note: Improved for clarity and the following of proper coding standards.
    /// </summary>
    /// <param name="e"></param>
    protected override void OnCollectionChanged(NotifyCollectionChangedEventArgs e)
    {
        // Use BlockReentrancy
        using (BlockReentrancy())
        {
            var eventHandler = CollectionChanged;

            // Only proceed if handler exists.
            if (eventHandler != null)
            {
                Delegate[] delegates = eventHandler.GetInvocationList();

                // Walk thru invocation list
                foreach (NotifyCollectionChangedEventHandler handler in delegates)
                {
                    var currentDispatcher = handler.Target as DispatcherObject;

                    // If the subscriber is a DispatcherObject and different thread
                    if ((currentDispatcher != null) &&
                        (currentDispatcher.CheckAccess() == false))
                    {
                        // Invoke handler in the target dispatcher's thread
                        currentDispatcher.Dispatcher.Invoke(
                            DispatcherPriority.DataBind, handler, this, e);
                    }

                    else
                    {
                        handler(this, e);
                    }
                }
            }
        }
    }

    /// <summary>
    /// Overridden NotifyCollectionChangedEventHandler event.
    /// </summary>
    public override event NotifyCollectionChangedEventHandler CollectionChanged;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T15:03:32.803

一种简单的方法，也适用于使用 Netframework 3.5 的人，可以在后台线程上工作并使用同步竞赛进行同步。试试这个：

```
 var sync = SynchronizationContext.Current;
        BackgroundWorker w = new BackgroundWorker();
        w.DoWork+=(_, __)=>
            {                    
                foreach (var item in collection)
                {
                   //calculate other things
                   sync.Post(p => { ...Actualize UI code... }, null);                  
                }
             }, null);
            };
        w.RunWorkerAsync(); 
```

# android - 用于将字符串的值复制到剪贴板的按钮

> ID：12780085
> 
> 赞同：6
> 
> 时间：2012-10-08T10:42:56.837
> 
> 标签：android, string, button, clipboard

我正在修改一个旧的 Android 应用程序。我有一个 GPS lat 和 long 存储在一个字符串值中，并在解析时在不可编辑的文本框中显示给用户。我想添加一个简单地获取字符串值的按钮，并将其复制到剪贴板。

我看过这个： [如何在我的 Android 应用程序中以编程方式复制文本？](https://stackoverflow.com/questions/238284/how-to-copy-text-programatically-in-my-android-app)

但不确定如何实施。任何帮助都会很棒，我最近在这个领域没有太多的发展！

谢谢

编辑：

```
 //Set button (inside oncreate method)
    Button button = (Button)this.findViewById(R.id.buttoncopylocation);
    button.setOnClickListener(this);

//Code added in onClick method
@Override
public void onClick(View arg0) {
    // TODO Auto-generated method stub
    ClipboardManager clipboard = (ClipboardManager)   getSystemService(Context.CLIPBOARD_SERVICE);
    ClipData clip = ClipData.newPlainText("Copied", mycoords);
    clipboard.setPrimaryClip(clip);
} 
```

我收到此错误：http: [//i.imgur.com/sQ4um.jpg](https://i.imgur.com/sQ4um.jpg)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T10:54:09.050

如果只是Text，就很简单了。

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(Context.CLIPBOARD_SERVICE);
ClipData clip = ClipData.newPlainText("label","Your Text");
clipboard.setPrimaryClip(clip); 
```

有关更多信息，请查看[此链接](http://developer.android.com/guide/topics/text/copy-paste.html#Copying)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-12T10:52:52.183

之前提供上下文

```
getSystemService(Context.CLIPBOARD_SERVICE); 
```

像

```
Context context = ...;
ClipboardManager clipboard = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE); 
```

# c# - 如何从 @Html.ActionLink 调用控制器 ActionResult 方法

> ID：12780090
> 
> 赞同：0
> 
> 时间：2012-10-08T10:43:08.553
> 
> 标签：c#, asp.net-mvc-3

我想在不更改 MVC3 razor 引擎中的 url 的情况下从锚标记调用控制器 ActionResult 方法。

我的网址是：“http://localhost:2993/admin/adminindex”，我有一个锚标签“SingOut”，我想删除我的会话。

这是我在查看页面上的语法：

```
<div>@Html.ActionLink("SingOut", "signout", "Admin")</div> 
```

在 Admincontroller 我想调用这个 ActionResult 方法

```
public ActionResult signout()
{
      Session.Abandon();
      return View("~/Views/admin/admin.cshtml");         
} 
```

当我单击注销时，它总是转到 Index ActionResult 方法。是否可以从 javascrit 而不是 jquery 调用 Controller ActionResult 方法？我只想要纯javascript而不是jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:47:40.123

放弃会话很可能会导致重定向到索引页面。您正在查看的页面受到保护（据我所知），因此当您退出时，您不能留在同一页面上。那么，如果系统无论如何都会重定向您（或者更糟糕的是您已注销并显示一个不起作用的页面），那么您为什么要异步进行呢？

# windows - 通过蓝牙窗口控制 powerpoint

> ID：12780092
> 
> 赞同：1
> 
> 时间：2012-10-08T10:43:10.333
> 
> 标签：windows, api, bluetooth, powerpoint

有没有办法控制在基于 Windows 的 PC 上运行的 powerpoint 演示文稿，而无需在 Windows 系统上安装任何类型的服务器应用程序？
基本上，Windows 是否通过蓝牙提供任何 API，程序员可以通过该 API 远程控制系统上运行的 powerpoint 演示文稿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:38:32.763

我使用的所有 Windows 蓝牙堆栈（Microsoft、Widcomm、BlueSoleil）都支持键盘和鼠标使用的 HID 配置文件（人机接口设备）。因此，只需购买蓝牙演示设备，它应该可以工作。它将发送合适的击键来控制 powerpoint。也许像[http://www.amazon.co.uk/Targus-Bluetooth-Presenter-compatible-operating/dp/7266001692/ref=sr_1_1?ie=UTF8&qid=1349865397&sr=8-1](http://www.amazon.co.uk/Targus-Bluetooth-Presenter-compatible-operating/dp/7266001692/ref=sr_1_1?ie=UTF8&qid=1349865397&sr=8-1)

Microsoft 堆栈还支持 AVRCP（AV 远程控制配置文件），并且可能用于控制演示文稿——尽管它的目的当然与音乐等更相关。

# windows - github for windows 一天崩溃好几次

> ID：12780095
> 
> 赞同：4
> 
> 时间：2012-10-08T10:43:24.560
> 
> 标签：windows, github, crash, github-for-windows

我刚开始`Github`通过他们的原生 Windows 应用程序工作，它非常好，但是它经常崩溃，可怕的是我在它崩溃后丢失了所有最近的更改。所有本地文件将回滚到成功提交或同步的最后一个版本。

我在 64 位 Windows 8 机器上。有任何想法吗？

崩溃后的确切错误是`Couldn't find a HEAD in this repository`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T18:18:04.370

我向 GitHub 发送了一封电子邮件以获得 Windows 支持。他们的回答是这样的：

> 嗨大卫，
> 
> 我很抱歉给您带来麻烦。
> 
> 我已经能够重现此问题，并已提交报告供我们的开发人员查看。应用程序崩溃的原因可能是由于本地和远程存储库之间的合并冲突。
> 
> 解决此问题的最简单方法是进入显示“ `failed looking for HEAD`”的存储库，关闭该弹出窗口，然后单击`Tools -> Open a Shell Here`。
> 
> *   在 shell 中，您可以运行 ' `git reset --merge`' 来撤消导致 GitHub for Windows 崩溃的合并。
> *   从那里，运行“ `git checkout master`”以从分离的`HEAD`.
> *   之后，`git pull`在 shell 中运行“”以下拉任何新更改。它会提示您修复任何合并冲突（这是导致应用程序崩溃的原因）。
> 
> 修复文件中的合并冲突后，您应该能够在 GitHub for WIndows 中正确同步。
> 
> 我一直在测试这个问题，在解决了与初始崩溃的冲突后，我不再遇到 GitHub for Windows 的任何问题。它正确地提示我打开外壳并解决合并冲突而不是崩溃。
> 
> 如果您还有其他问题，请告诉我，希望我们能尽快解决此问题。
> 
> 最好的，史蒂夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:45:36.563

这是我从 Github 支持收到的解决方案。我将在此处复制并粘贴确切的文本：

> 解决此问题的最简单方法是进入显示“查找 HEAD 失败”的存储库，关闭该弹出窗口，然后单击工具 -> 在此处打开外壳。在 shell 中，您可以运行“git reset --merge”来撤消导致 GitHub for Windows 崩溃的合并。之后，在 shell 中运行 'git pull' 以下拉任何更改。它将提示您修复任何合并冲突。修复文件中的合并冲突后，您应该能够在 GitHub for WIndows 中正确同步。
> 
> 我一直在测试这个问题，在解决了与初始崩溃的冲突后，我不再遇到 GitHub for Windows 的任何问题。它正确地提示我打开外壳并解决合并冲突而不是崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T01:44:16.407

在对 .gitconfig 用户文件进行不稳定更改后，我遇到了这个问题。

我只是在尝试使用 TortoiseGIT 后才检测到这个问题，它概述了使用意外令牌解析配置文件的错误。

> 所以修复是纠正错误的 .gitconfig 文件。

# magento - Magento：如何将订单状态从任何状态更改为任何状态

> ID：12780099
> 
> 赞同：0
> 
> 时间：2012-10-08T10:43:29.227
> 
> 标签：magento

我希望可以完全免费地向任何州下订单。

*   取消/退款任何订单
*   恢复发货订单
*   恢复已发出的命令

例如。有时我会发货，然后我想恢复此状态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:32:41.367

您可以在 magento System -> Order Status 上将某些状态设置为某些状态。并且您可以将每个状态设置为每个状态。通过代码，您可以执行以下操作：

```
$order->setState();
$order->setStatus(); 
```

但是取消它有点困难。看看那篇文章并说出你的想法。我实现了这段代码并工作，但我正在测试因为这段代码会影响 mutch 的东西，需要大量的测试才能安全地完成。 [http://www.magentocommerce.com/boards/26245/viewthread/223219](http://www.magentocommerce.com/boards/26245/viewthread/223219)

# jquery - rails3 jquery datepicker 不适用于动态添加的表单字段

> ID：12780109
> 
> 赞同：0
> 
> 时间：2012-10-08T10:44:04.473
> 
> 标签：jquery, ruby-on-rails, datepicker

当我们的事件编辑页面加载时，有两个日期字段使用 jquery datepicker，当我单击其中一个字段时，选择器也会出现。

加载文档时初始化 datepicker。

```
$ ->
  $(':input.date').datepicker(dateFormat: 'dd.mm.yy') 
```

并且自动添加了“datepicker”类

```
<input class="span1 date hasDatepicker" id="event_application_opening_at" name="event[application_opening_at]" size="30" type="text"> 
```

因为可以将其他日期添加到事件中，所以当用户单击“添加日期”链接时，我们会创建额外的嵌套日期字段。

尽管“hasDatepicker”类已正确分配给这些字段，但日期选择器不适用于这些新创建的字段。看起来这是因为日期选择器已经初始化了。我尝试应用 destroy() 函数，然后在整个页面内容上重新初始化 datepicker，但这不起作用。

有谁能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:04:52.210

试试这个

```
 $(":input.date").live("click", function(){
        $(this).datepicker({ 
            dateFormat: 'dd.mm.yy' 
        });
    }); 
```

更新：

```
$(":input.date").live("click", function(){
            $(this).datepicker({ 
                dateFormat: 'dd.mm.yy' 
            });
          $(this).datepicker('show');

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:08:13.620

hynxnat 答案的替代方法是绑定到您用于添加字段的任何代码的“after:insert”事件。如果您将 datepicker 代码添加到该事件，它将确保在动态插入字段后绑定到页面上的字段。

这将假设您正在使用 Cocoon gem 之类的东西来添加额外的字段。

# ruby-on-rails - 如何在 Rails 中以块的形式接收文件（避免创建 temfile）？

> ID：12780110
> 
> 赞同：1
> 
> 时间：2012-10-08T10:44:04.117
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, file-upload, chunked

我正在构建一个 Rails 应用程序，用户可以在其中上传非常大的文件。所以我计划将文件作为多个块接收，以便我可以在服务器端组装块。我搜索了 Rails 框架中的流。我可以找到有关下行流（服务器-> 客户端）的更多信息。

[http://weblog.rubyonrails.org/2011/4/18/why-http-streaming/](http://weblog.rubyonrails.org/2011/4/18/why-http-streaming/)

[http://www.intridea.com/blog/2012/5/24/building-streaming-rest-apis-with-ruby](http://www.intridea.com/blog/2012/5/24/building-streaming-rest-apis-with-ruby)

有什么方法可以在 Rails 应用程序中以块的形式接收文件而不创建 temfile？

# networking - 有没有办法检测 Wifi 网络上的活动连接数？

> ID：12780114
> 
> 赞同：2
> 
> 时间：2012-10-08T10:44:24.747
> 
> 标签：networking, network-programming, connection, wifi

如果我想检测家庭 Wifi 网络上的活动连接数，我应该怎么做？这对于构建应用程序很有用，这些应用程序可以监视身份不明/无法识别的人以欺诈方式滥用某人的 Wifi 网络。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:34:30.507

如何知道您的邻居或其他人是否在使用您的无线网络是相当复杂的。

如果您的邻居是经验丰富的 Wi-Fi 黑客，您可能根本无法分辨。

如果他们只是在窃取您的 Internet 连接，您可以从路由器上的日志中看出。

要找出谁在您的无线网络上，您需要首先盘点所有要连接的设备。找出它们的 MAC ID 和 IP 地址（如果它们是静态的）。

要找出 PC 上的 MAC ID/IP 地址，请单击开始菜单并选择运行。键入 cmd 并单击确定。在打开的屏幕中，键入 ipconfig /all 并按 Enter。MAC 地址将显示为物理地址。一旦您知道网络上每台 PC 的 MAC 地址，您就会识别出任何不属于显示当前连接的 MAC 地址的屏幕下方的地址。

检查 IP 地址 同样，您可能能够看到 DHCP 服务器已经发送了多少 IP 地址。如果您检查每台 PC 的 IP 地址，则可以查看是否已提供其他 IP 地址。

要从“开始”菜单中找出您的 IP 地址，请单击“运行”。然后输入cmd并点击OK。在出现的屏幕中，键入 ipconfig，它将显示该计算机的 IP 地址。（但是请记住，如果 PC 设置为自动检测设置，那么 PC 的 IP 地址将在下次重新启动或打开计算机时更改。有时之前提供的号码尚未过期，因此您可能会认为有人未连接时已连接。）

与入侵者打交道 如果您确实发现有人使用您的连接，他们很可能不是恶意甚至是故意这样做的。有时人们无法分辨哪个是他们自己的连接，他们可能真的相信他们使用的是他们的 Wi-Fi 路由器而不是你的。解决这个问题的最好方法是设置您自己的安全性，也许您可​​以帮助他们找到自己的路由器！

最佳解决方案是使用几乎 20 到 30 位数字和数字的 WPA 或 WPA 2 设置强密码。一旦您的网络正常运行，您可以关闭 SSID 广播（这可以防止它宣传您的网络名称），这样就您的邻居而言，它会有效地消失，而当有人抱怨时，您可能会首先听到它他们的网络连接消失了。

您可以查找当前 LAN 客户端、连接或状态日志或连接的 MAC 地址等日志。

要开心 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:47:00.260

您可以访问接入点管理吗？查找 MAC 地址及其过滤。现代 AP 允许您使用硬件按钮过滤设备和/或限制设备可以进行身份​​验证的时间范围。

[此处](http://www.wikihow.com/Secure-Your-Wireless-Home-Network)提供有关如何保护您的 AP 的链接，并且是了解如何玩的良好开端！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:17:59.123

您可以使用此命令...在您的路由器或调制解调器上...某些调制解调器具有用于 Ping 和类似命令的控制台...。

ipconfig -all

# java - IntelliJ IDEA 代码检查配置文件以显示依赖关系和解决错误

> ID：12780122
> 
> 赞同：1
> 
> 时间：2012-10-08T10:44:57.617
> 
> 标签：java, compiler-errors, intellij-idea, inspection

我有一个正在迁移过程中的多模块项目。我无法编译某些依赖模块，因此如果不明确打开编辑器检查的每个文件，就很难跟踪依赖/解决错误。

我创建了代码检查配置文件，它可以向我显示语法错误，但我无法将其配置为显示所有应该带有红色下划线的内容（例如 Eclipse 问题窗口）。

# jquery - jQuery validate - 如何使用两个 XOR 规则验证一个字段

> ID：12780123
> 
> 赞同：3
> 
> 时间：2012-10-08T10:44:58.957
> 
> 标签：jquery, jquery-validate

我有一个可以包含电子邮件或手机的字段（在我的情况下，手机是 8 位数字）。我已经尝试了两种方法（两个示例都不起作用，因为“元素”没有验证方法）：

第一种方法：创建自定义方法并在那里进行验证，但是我必须创建自己的电子邮件和移动验证 - 我找不到如何在新方法中重用 jQuery 验证规则的方法。这就是我想要的：

```
jQuery.validator.addMethod("mobileoremail", function(value, element) {
        return this.optional(element) || 
               element.validate({ rules: { digits: true, rangelength: [8, 8] } }) || 
               element.validate({ rules: { email: true } });
    }, "Invalid mobile or email"); 
```

第二种方法：创建依赖规则。而且在这种情况下，我找不到如何重用 jQuery 验证规则的方法。

```
{ myRules: {
            rules: {
                user: {
                    required: true,
                    email: {
                        depends: function(element) {
                            return !element.validate({ rules: { mobile: true } });
                        }
                    },
                    mobile: {
                        depends: function (element) {
                            return !element.validate({ rules: { email: true } });
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:56:24.637

下面的验证方法怎么样...

```
$.validator.addMethod("xor", function(val, el, param) {
    var valid = false;

    // loop through sets of nested rules
    for(var i = 0; i < param.length; ++i) {
        var setResult = true;

        // loop through nested rules in the set
        for(var x in param[i]) {
            var result = $.validator.methods[x].call(this, val, el, param[i][x]);

            // If the input breaks one rule in a set we stop and move
            // to the next set...
            if(!result) {
                setResult = false;
                break;
            }
        }

        // If the value passes for one set we stop with a true result
        if(setResult == true) {
            valid = true;
            break;
        }
    }

    // Return the validation result
    return this.optional(el) || valid;
}, "The value entered is invalid"); 
```

然后我们可以如下设置表单验证...

```
$("form").validate({
  rules: {
    input: {
      xor: [{
        digits: true,
        rangelength: [8, 8]
      }, {
        email: true
      }]
    }
  },
  messages: {
    input: {
      xor: "Please enter a valid email or phone number"
    }
  }
}); 
```

在此处查看实际操作[http://jsfiddle.net/eJdBa/](http://jsfiddle.net/eJdBa/)

# php - Joomla - 从目录中获取图像

> ID：12780124
> 
> 赞同：1
> 
> 时间：2012-10-08T10:45:04.940
> 
> 标签：php, joomla, content-management-system, joomla2.5

我正在尝试获取目录中所有图像的路径列表。我正在使用 Joomla 2.5，想知道是否有一些不错的 API 调用可以提供帮助。我知道如何用纯 PHP 编写代码，但宁愿使用内置的 Joomla！方法 - 如果它们存在。

我在 joomla 里闲逛了一下！图书馆，但没有遇到太多。我期待在媒体管理器中看到一些方法，但看不到任何方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T11:22:39.067

执行此操作的 Joomla 方法如下：

```
JFolder::files($path, $filter = '.', $recurse, $fullpath , $exclude); 
```

设置`$recurse`为 true 时，也会搜索子文件夹。`$fullpath`设置为 true 返回数组中的完整路径。使用`$exclude`，您可以提供一系列扩展名，而不是包含在搜索文件中。它返回一个包含所有文件名的数组。

# android - 在android中用逗号而不是点作为小数分隔符的软键盘

> ID：12780125
> 
> 赞同：2
> 
> 时间：2012-10-08T10:45:06.097
> 
> 标签：android

我一直在阅读一些关于这个问题的主题，有些没有得到回答，而其他人（从 2011 年开始）解释了这是一个已知的错误。

这已经解决了吗？现在是否可以显示带有文化信息的软键盘？我想显示一个十进制键盘，显示“，”而不是小数分隔符的“点”。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-27T11:54:52.420

您可以使用以下解决方法也将逗号作为有效输入：-

**通过 XML：**

```
<EditText
    android:inputType="number"
    android:digits="0123456789.," /> 
```

**以编程方式：**

```
EditText input = new EditText(THE_CONTEXT);
input.setKeyListener(DigitsKeyListener.getInstance("0123456789.,")); 
```

这样安卓系统就会显示数字键盘并允许输入逗号。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-13T12:15:35.683

不能不显示“。” 在软键盘中，无需创建自己的。我发现的解决方案是：

```
<EditText
    android:inputType="numberDecimal"
    android:digits="0123456789," /> 
```

这样当你按下'。在软键盘中没有任何反应；只允许使用数字和逗号

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T11:45:15.753

我通过扩展`NumberKeyListener`接受'，'和'。'解决了这个问题，并覆盖：

```
@Override
public int getInputType() {
   return InputType.TYPE_CLASS_NUMBER 
          | InputType.TYPE_NUMBER_FLAG_DECIMAL 
          | InputType.TYPE_NUMBER_FLAG_SIGNED;
} 
```

此外，我在 EditText 上设置了一个 TextWatcher，它替换了所有的 '.' 用 ',' 在`afterTextChanged()`.

但我无法在软键盘上显示逗号。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-07-14T09:22:06.250

在 android 命名空间中，您可以使用：

```
android:inputType="numberDecimal" 
```

这使您可以输入“。”

# javascript - 如何使用jquery UI自动完成在延迟后显示建议而不按任何键？

> ID：12780126
> 
> 赞同：2
> 
> 时间：2012-10-08T10:45:07.410
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我有一个输入字段，在输入三个单词时，我正在 ajaxing 一些数据并使用 javascript 创建一个数组。我想让 jQuery UI Autocomplete 与这个数组一起工作，延迟为 700。它正在工作，但为了显示建议，我必须再按一个键。虽然我希望它在不按任何键的情况下工作。我希望它在延迟完成后立即工作。我的代码如下所示：

```
$( "#CAT_Custom_283923" ).autocomplete({
   source: srvcsCitiesSafe, 
   delay: 3000 
}); 
```

[我在这里实现了](http://dbtrialsite.businesscatalyst.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T12:25:08.703

我不确定我是否正确理解了您的问题。延迟选项是击键发生与执行 ajax 搜索之间的延迟。您提供的代码将正确执行此操作。

我不确定您必须再按一个键是什么意思。执行按键后，自动完成将显示匹配的项目列表。您可以将 autoFocus 设置为 true，这将为您选择列表中的第一项。请参见下面的示例。

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Jquery UI Auto complete</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
</head>
<body>
    <div class="ui-widget">
        <label for="tags">
            Tags:
        </label>
        <input id="tags" />
    </div>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
<script type="text/javascript">
    $(function ()
    {
        var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
        ];
        $('#tags').autocomplete({
            source: availableTags,
            delay: 1000,
            autoFocus: true
        });
    });
</script> 
```

# android - Android（AndEngine）：使用粒子进行触摸绘图

> ID：12780128
> 
> 赞同：1
> 
> 时间：2012-10-08T10:45:30.300
> 
> 标签：android, opengl-es, drawing, andengine, particles

在我的应用程序中，我正在实现一个涉及粒子的绘图功能......基本上它需要像 Art of Glow 一样工作（这个应用程序在这里：[http](http://www.youtube.com/watch?v=ZIZpw1VslIk) ://www.youtube.com/watch?v=ZIZpw1VslIk ）。

我要做的是：创建粒子系统和发射器（Point 类型）；在每个触摸事件中，我将发射器移动到按下的位置，这样粒子看起来就像是在跟随手指...

如果我画得很慢，效果很好，但如果我画得更快，比如画一条直线，这条线就会被框住。

然后我尝试做一个 recusive 函数，基本上从前一个点到下一个点将发射器的位置设置在它们之间的中间点，并对从前一个点到中间部分和从中间部分的中间部分执行相同的操作下一部分（我不知道你是否明白我做了什么......不知道如何用英语解释），但这条线仍然会被框架化。

所以我认为应用程序，当你快速移动时，“没有时间”在每个点移动发射器，这就是为什么一条直线会被框架化......所以，你对如何制作它有任何想法吗？和 Art of Glow 一样高效？该应用程序仅丢失很少的输入，我不明白作者是如何做到的...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:40:14.663

当您获得触摸输入时，您是否仅使用当前位置？看起来您尝试制作一个 tweener（用于生成中间帧的东西），但 Android 可以为您提供更多输入以实现快速移动。查看[文档](http://developer.android.com/reference/android/view/MotionEvent.html)，尤其是“批处理”部分。

基本上，您可以使用`geHistoricalX/Y`和`getHistoricalEventTime`来填写您的缺失点。如果这不能让它变得完美，那么结合你当前的方法来做应该让你尽可能接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T12:03:01.920

[https://stackoverflow.com/a/21724810/472336](https://stackoverflow.com/a/21724810/472336)

检查这个......这适用于大多数仍需要改进的场景

# python - 使用虚拟 ListCtrl 在 wxpython 中复制和粘贴行

> ID：12780131
> 
> 赞同：1
> 
> 时间：2012-10-08T10:45:38.373
> 
> 标签：python, events, wxpython, copy-paste, listctrl

我在 wxpython 中使用虚拟 ListCtrl。我正在尝试从列表中选择几行，然后将行值复制/粘贴到文本文件或电子表格中。如何将选定的行复制到剪贴板（使用 CTRL-C）？我应该绑定哪个事件？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:51:36.307

查看列表控件的 wxPython 演示，我认为您必须执行以下操作：

```
index = self.list.GetFirstSelected()
value = "      %s: %s\n" % (self.list.GetItemText(index), self.getColumnText(index, 1))) 
```

如果要使用 CTRL-C，则需要使用 AcceleratorTable，这意味着您将绑定到 EVT_MENU 并将我提到的代码放入该处理程序中。这是关于 wx 中加速器的教程：http: [//www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/](http://www.blog.pythonlibrary.org/2010/12/02/wxpython-keyboard-shortcuts-accelerators/)

另一方面，我几乎总是使用 ObjectListView 而不是 ListCtrl，因为它为我提供了每一行的对象模型，我发现它比使用行和列索引更容易访问。它需要稍微不同的方法和心态，但我认为这是值得的：http: [//www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/](http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-27T17:52:43.363

迈克关于加速器的链接真的很有帮助。与此同时，我使用 pyperclip.copy() 来完成我的复制操作。这样，选定的内容就会被复制到剪贴板；它可以粘贴到任何文件中。

希望它可以帮助某人..

```
import pyperclip 

def onKeyCombo(self, event):

    listSelectedLines =[]
    index = self.list.GetFirstSelected()  

    while index is not -1:
        listSelectedLines.append(self.list.GetItem(index, 1).GetText())
        index = self.list.GetNextSelected(index)             

    pyperclip.copy(''.join(listSelectedLines)) 
```

# javascript - 如何在打印功能中插入已显示的 div

> ID：12780135
> 
> 赞同：0
> 
> 时间：2012-10-08T10:45:56.477
> 
> 标签：javascript, html, printing

如何在打印功能中插入网页上已显示的 div。

这是功能：

```
function printHTML(input){
  var iframe = document.createElement("iframe");
    document.body.appendChild(iframe);

  iframe.contentWindow.document.write(input);
  iframe.contentWindow.print();
  document.body.removeChild(iframe); 
}

printHTML('<h1>Test!</h1>'); 
```

但我需要放入网页上已经显示的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:00:24.510

您可以在 iframe 正文中传递 div 和 appendf 的克隆。修改代码：[jsfiddle](http://jsfiddle.net/CFypf/1/)

```
function printHTML(clonedDive){
  var iframe = document.createElement("iframe");
    document.body.appendChild(iframe);

  iframe.contentWindow.document.body.appendChild(clonedDive);
  iframe.contentWindow.print();

  document.body.removeChild(iframe); 
}

printHTML( document.getElementById("divid").cloneNode(true));​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:53:54.323

你想用它`document.getElementById()`来得到你需要的任何东西。

例如，在您的页面上获取一些 div：

```
var someDiv = document.getElementById("divId");
printHTML(someDiv); 
```

# jquery - 如何在外部 JS 函数中提及 action 方法的路径？

> ID：12780136
> 
> 赞同：2
> 
> 时间：2012-10-08T10:46:00.243
> 
> 标签：jquery, asp.net-mvc-3

我在外部 JS 文件中编写了一个 jquery 函数，并将该文件包含在我需要的地方。

在 jquery 函数中，我从控制器调用了 action 方法。现在我的问题是我无法从外部 JS 中找到该操作方法路径。它正在抛出错误，即找不到这样的方法。

现在**我如何在外部 JS 中编写动作路径名，它可以在任何地方工作。**

我尝试了以下提及/调用操作方法 -

```
1\. url: "/Employee/AutocompleteSuggestions" 

2\. url: "AutocompleteSuggestions"

3\. @Html.Raw(Url.Action("AutocompleteSuggestions", "Employee", new { @term = "Term", @moduleName="ModuleName"})) 
```

由于剃刀语法，3rd 不起作用。

如何解决这个问题？

我使用了如下的 JS -

```
 $.ajax({
                url: "AutocompleteSuggestions",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                type: "POST",
                data:
                    JSON.stringify({
                        term: request.term,
                        moduleName: "Employee"
                    }),
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item.FullName, value: item.Id }
                    }
                    ))
                },
                error: function (xhr, ajaxOptions, thrownError) { alert(thrownError); }
            }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:52:39.153

您可以将操作的路径放在 _Layout.cshtml 中的某个位置，例如像这样的 body 标记

```
<body data-jsactionurl="@Url.Action("Action", "Controller")"> 
```

然后你可以像这样（jQuery）在你的 JS 文件中得到它：

```
var action = $("body").attr('data-jsactionurl'); 
```

甚至像这样：

```
var action = $('body').data('jsactionurl') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:53:13.810

您在这里遇到的一个问题是您*可能*需要使用全局变量；这可能容易受到脚本攻击。有关最幼稚的实现，请参阅我的原始答案。

我认为这可能是相当安全的——但是那里有更好的 Javascript 大师可能有更好的答案。

在您的布局/母版中，您可以只输出这样的脚本块（我使用的是 Razor）：

```
<script>
  function myActionMethods(){
    this.MyActionMethod = function(){
      return '@Url.Action("Action", "Controller")';
    };
  }
</script> 
```

*然后在此之后*包含您的脚本，使用如下内容：

```
var methods = new myActionMethods();
$.get(methods.MyActionMethod()); 
```

当您需要在脚本中使用该 URI 时（仅在此处使用 jQuery Get 进行演示）。

***回应您对@David 的回答的评论***

当然; 您可以使用 Razor 输出 JS：只需编写一个控制器操作，该操作会触发一个返回 javascript 的 Razor 视图（尽管您必须对响应类型进行一些处理）但是如果您这样做，您将丢失所有缓存/压缩对那个脚本有好处，然后你必须把它全部写回去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:19:31.420

嗨，你可以像这样使用它在下面

```
url: "@Url.Content("~/City/State")" 
```

在该网址中，首先是您的控制器名称，其次是您的操作名称

在我的项目中我这样使用

```
$.ajax({
            url: "@Url.Content("~/City/State")",
            dataType: 'json',
            data: { countryId: countryID },
            success: function (data) {
                alert(data);
                $("#stateID").empty();
                $("#stateID").append("<option value='0'>--Select State--</option>");
                $.each(data, function (index, optiondata) {
                    alert(optiondata.StateName);
                    $("#stateID").append("<option value='" + optiondata.ID + "'>" + optiondata.StateName + "</option>");
                });
            },
            error: function () {
                alert('Faild To Retrieve states.');
            }

        }); 
```

我想这会帮助你...

# android - 将 LinearLayout 和“百分比”边距居中

> ID：12780137
> 
> 赞同：6
> 
> 时间：2012-10-08T10:46:03.757
> 
> 标签：android, android-layout, margin, centering, android-percentrelativelayout

编辑：我已经收到了两个关于固定边距的综合答案。虽然我已经决定完全使用固定边距而不是重量边距，但最初的问题仍然悬而未决。

我正在尝试在 Android 中获得以下设计：

![所需布局](../Images/41c633db1a7fd33201f71d2425a37c4a.png)

一个居中的垂直列表（TextViews、EditViews 等），它留下大约 10% 的水平空间作为左/右边距，有背景。

我尝试过但没有工作/部分工作的内容：

*   LinearLayout，垂直，作为顶级布局。如果重力设置为“居中”，则背景限制为布局的大小。另外，如何以这种方式设置百分比边距（宽度）？
*   RelativeLayout 上的 LinearLayout：背景作品、水平居中作品、权重不存在。
*   LinearLayout 上的 LinearLayout：背景工作，权重工作，水平居中将所有可用空间推到右侧。

（在最后两种情况下，我的 Eclipse 还抱怨其中一种布局是多余的。）

我没有发布代码，考虑到这更像是一个与原则相关的问题。完成此任务的（最佳）方法是什么？

谢谢你。

XML对应最后一个测试用例：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:baselineAligned="false"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_weight="1.0"
    android:weightSum="1.0"
    android:background="#013c57" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLayout1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.9"
        android:layout_gravity="center"
        android:orientation="vertical" >

        <!-- Stuff -->
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:52:46.187

这是用于创建此类布局的最简单的 xml 代码检查它

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#000"
    android:gravity="center">

    <EditText android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"/>

    <EditText android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"/>

    <EditText android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"/>

    <EditText android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10dp"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-04T09:47:36.377

您可以使用 `compile 'com.android.support:percent:24.2.1'`

您现在可以使用 PercentFrameLayout 或 PercentRelativeLayout。它们都具有以下属性：

```
layout_widthPercent
layout_heightPercent
layout_marginPercent
layout_marginLeftPercent
layout_marginTopPercent
layout_marginRightPercent
layout_marginBottomPercent
layout_marginStartPercent
layout_marginEndPercent

<?xml version="1.0" encoding="utf-8"?>
<android.support.percent.PercentRelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <TextView
        android:id="@+id/txt1"
        android:background="#ff7acfff"
        android:text="50% - 50% margin 25"
        android:textColor="@android:color/white"
        app:layout_marginTopPercent="10%"
        app:layout_marginLeftPercent="10%"
        app:layout_heightPercent="10%"
        app:layout_widthPercent="80%" />

    <TextView
        android:layout_below="@id/txt1"
        android:id="@+id/txt2"
        android:background="#ff7acfff"
        android:text="50% - 50% margin 25"
        android:textColor="@android:color/white"
        app:layout_marginTopPercent="10%"
        app:layout_marginLeftPercent="10%"
        app:layout_heightPercent="10%"
        app:layout_widthPercent="80%"/>

    <TextView
        android:layout_below="@id/txt2"
        android:id="@+id/txt3"
        android:background="#ff7acfff"
        android:text="50% - 50% margin 25"
        android:textColor="@android:color/white"
        app:layout_marginTopPercent="10%"
        app:layout_marginLeftPercent="10%"
        app:layout_heightPercent="10%"
        app:layout_widthPercent="80%"/>

    <TextView
        android:layout_below="@id/txt3"
        android:id="@+id/txt4"
        android:background="#ff7acfff"
        android:text="50% - 50% margin 25"
        android:textColor="@android:color/white"
        app:layout_marginTopPercent="10%"
        app:layout_marginLeftPercent="10%"
        app:layout_heightPercent="10%"
        app:layout_widthPercent="80%"/>

</android.support.percent.PercentRelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:06:00.087

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="#000"
    android:gravity="center">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:background="#000"
        android:layout_gravity="center"
        android:gravity="center">

        <EditText android:layout_width="fill_parent"
            android:margin_left="10dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <EditText android:layout_width="fill_parent"
            android:margin_left="10dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <EditText android:layout_width="fill_parent"
            android:margin_left="10dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <EditText android:layout_width="fill_parent"
            android:margin_left="10dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

    </LinearLayout>

</LinearLayout> 
```

尝试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:53:59.720

我认为相对布局是更好的选择！

尝试阅读此线程：

[相对布局中的百分比宽度](https://stackoverflow.com/questions/4961355/percentage-width-in-a-relativelayout)

我希望它会帮助你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-16T17:57:31.687

随着 ConstraintLayout 的引入，您可以通过指南约束视图来设置百分比边距。

这是示例：

[![布局编辑器](../Images/faefa00b0903fe44d8777a7be903bd8f.png)](https://i.stack.imgur.com/pZRT3.png)

```
<?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <EditText
        android:id="@+id/editText1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        app:layout_constraintBottom_toTopOf="@+id/editText2"
        app:layout_constraintEnd_toStartOf="@+id/endGuideline"
        app:layout_constraintStart_toStartOf="@+id/startGuideline"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintVertical_chainStyle="packed" />

    <EditText
        android:id="@+id/editText2"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        app:layout_constraintBottom_toTopOf="@+id/editText3"
        app:layout_constraintEnd_toStartOf="@+id/endGuideline"
        app:layout_constraintStart_toStartOf="@+id/startGuideline"
        app:layout_constraintTop_toBottomOf="@+id/editText1" />

    <EditText
        android:id="@+id/editText3"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        app:layout_constraintBottom_toTopOf="@+id/editText4"
        app:layout_constraintEnd_toStartOf="@+id/endGuideline"
        app:layout_constraintStart_toStartOf="@+id/startGuideline"
        app:layout_constraintTop_toBottomOf="@+id/editText2" />

    <EditText
        android:id="@+id/editText4"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toStartOf="@+id/endGuideline"
        app:layout_constraintStart_toStartOf="@+id/startGuideline"
        app:layout_constraintTop_toBottomOf="@+id/editText3" />

    <android.support.constraint.Guideline
        android:id="@+id/startGuideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.1" />

    <android.support.constraint.Guideline
        android:id="@+id/endGuideline"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        app:layout_constraintGuide_percent="0.9" />

</android.support.constraint.ConstraintLayout> 
```

# asp.net - 更改可见性 contentplaceholder asp.net 无法立即工作

> ID：12780138
> 
> 赞同：0
> 
> 时间：2012-10-08T10:46:07.563
> 
> 标签：asp.net, response, visibility, flush, contentplaceholder

我有一个简单的 asp.net 网页，其中包含 2 个`RadioButton`列表。提交表单时，会执行一些更复杂的代码，这需要一些时间（5-10 秒）才能执行。

我想`ContentPlaceHolder`在执行该代码之前简单地更改 2 之间的可见性。切换工作，但仅在执行复杂代码之后。

结果是页面*冻结*并在一段时间后发生变化。

我的aspx代码：

```
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:PlaceHolder ID="requestpage" runat="server" Visible="true">
    <p>
    </p>
    <h1>
        Navigatie update</h1>
    <p>
    </p>
    <div style="text-align: left; width: 300px">
        <p>
            Kies een site</p>
    </div>
    <p>
        <asp:RadioButtonList ID="pubtargetid" runat="server">
        </asp:RadioButtonList>
    </p>
    <br />
    <br />
    <div style="text-align: left; width: 300px">
        <p>
            Kies een taal</p>
    </div>
    <p>
        <asp:RadioButtonList ID="chosenLanguage" runat="server">
        </asp:RadioButtonList>
    </p>
    <p style="color: red">
        <asp:Label ID="errorMessage" runat="server"> </asp:Label></p>
    <p>
        <asp:Button Text="Start update" OnClick="Submit" runat="server" />
    </p>
</asp:PlaceHolder>
<asp:PlaceHolder ID="responsepage" runat="server" Visible="False">
        <p>
        </p>
        <h1>
            Navigatie update</h1>
        <p>
            Navigatie wordt geüpdate</p>
        <p>
</asp:PlaceHolder> 
```

我背后的代码：

```
using System;
using System.Web.UI.WebControls;
using System.Threading;
using Tridion.ContentManager.CommunicationManagement;
using Tridion.ContentManager;

namespace CustomPages
{
    public partial class Navigation : System.Web.UI.Page
    {
        private Session session;
        protected void Page_Load(object sender, EventArgs e)
        {
            session = new Session(Request.ServerVariables["LOGON_USER"]);
            Response.BufferOutput = true;
            Response.Flush();

            if (!Page.IsPostBack)
            {
                var targets = session.SystemManager.GetPublicationTargets();
                pubtargetid.Items.Clear();
                foreach (PublicationTarget t in targets)
                {
                    var radio = new ListItem(t.Title, t.Id);
                    pubtargetid.Items.Add(radio);
                }
                chosenLanguage.Items.Clear();
                var nl = new ListItem("NL", "NL");
                var fr = new ListItem("FR", "FR");
                chosenLanguage.Items.Add(nl);
                chosenLanguage.Items.Add(fr);
            }
        }

        public void Submit(object sender, EventArgs e) // --> when submitting the form
        {
            if (pubtargetid.SelectedIndex != -1 && chosenLanguage.SelectedIndex != -1)
            {
                requestpage.Visible = false;
                responsepage.Visible = true;
                Response.Flush();

                String pageId ="";

                String target = pubtargetid.SelectedItem.Value;
                String lang = chosenLanguage.SelectedItem.Value;

                //some code//

                var nav = new Automations.Navigation(session,page);
                nav.CheckPage(pageId, target);         //  --> complex piece of code
            }
            else
            {
                errorMessage.Text = "";
                if (pubtargetid.SelectedIndex == -1)
                {
                    errorMessage.Text += "Choose a publication target. \n";
                }
                if (chosenLanguage.SelectedIndex == -1)
                {
                    errorMessage.Text += "Choose a language.";
                }
            }
        }
    }
} 
```

**简而言之**：我想让可见性在执行该复杂代码之前发生变化。

我尝试了不同的选择；就像试图刷新响应，但我没有成功，`Response.BufferOutput = false`还有一次`= true`，但仍然没有成功！

对此问题的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:04:46.593

你必须做两件事

将您的替换`PlaceHolder`为`Panel`. （因为`PlaceHolder`不渲染到任何 HTML 标签，它只是按原样渲染它的内容，但我们必须获取一些父标签，以便我们可以隐藏显示客户端，所以使用`Panel`它作为渲染`div`）。

像这样做。

```
<asp:Panel runat="server" ID="Panel1" Style="display: none;">
     Place Holder one
</asp:Panel>
<asp:Panel runat="server" ID="Panel2">
     Place Holder two
</asp:Panel>
<asp:Button runat="server" ID="btn" OnClientClick="hideOne();" 
            OnClick="server_click" />

<script type="text/javascript" language="javascript">
function hideOne() {
    var one = document.getElementById('<%= Panel1.ClientID %>');
    one.style.display = 'block';
    var two = document.getElementById('<%= Panel2.ClientID %>');
    two.style.display = 'none';
}
</script> 
```

* * *

```
protected void server_click(object sender, EventArgs e)
{
   Response.Write("Hid");
} 
```

基本上，您应该在执行冗长的代码之前在客户端执行隐藏功能以获得所需的效果

# java - JSF2 ViewScope/Spring/Hibernate getSessionFactory NULL 错误

> ID：12780152
> 
> 赞同：1
> 
> 时间：2012-10-08T10:47:01.813
> 
> 标签：java, spring, hibernate, jsf-2, atomikos

我们在我们的项目中使用 spring + hibernate + jsf + mysql + atomikos。下面是版本详细信息：

*   弹簧：3.0.5
*   休眠：3.6.0
*   JSF：2.0（我的脸 2.0.12）
*   Mysql：5.1.38（InnoDB表结构）
*   阿托米科斯：3.8.0
*   雄猫：6.0.20

当我使用 JSF2 ViewScope bean 在服务层中使用事务服务时，它对第一个请求工作正常。有问题时回滚，没有问题时将两个实体保存到不同的表中。但是，如果我在同一个视图上执行第二个请求，那么如果我调用`getSessionFactory()`我的 DAO，我会得到空对象。

对此有什么帮助吗？

以下是我的设置等：

```
@ManagedBean
@ViewScoped
public class TestPageBean {
   public String click(){
        testService.saveTest(obj1, obj2);
    } 
}

@Transactional
public class TestService {
    @Transactional(readOnly = false, propagation = Propagation.REQUIRED)
    public void saveTest(Object1 obj1, Object2 obj2) {
        dao1.save(obj1);
        dao2.save(obj2);
    }
} 
```

GenericDao 包含 save 方法：

```
public void save(Entity entity){
    Session session = getSessionFactory().getCurrentSession().save(entity);
} 
```

这是Spring的xml配置：

```
<bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
        <property name="dataSource">
            <ref bean="atomikosDataSourceBean" />
        </property>
        <property name="packagesToScan">
            <list>
                <value>com.company.txtest.entity</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.connection.characterEncoding">utf8</prop>
                <prop key="hibernate.transaction.factory_class">com.atomikos.icatch.jta.hibernate3.AtomikosJTATransactionFactory</prop>
                  <prop key="hibernate.transaction.manager_lookup_class">com.atomikos.icatch.jta.hibernate3.TransactionManagerLookup</prop>
                  <prop key="hibernate.current_session_context_class">jta</prop>
                  <prop key="hibernate.connection.release_mode">auto</prop> 
            </props>
        </property>
    </bean>

  <bean id="atomikosDataSourceBean" class="com.atomikos.jdbc.nonxa.AtomikosNonXADataSourceBean" init-method="init" destroy-method="close">
        <property name="uniqueResourceName"><value>NonXADBMS</value></property>
        <property name="driverClassName"><value>com.mysql.jdbc.Driver</value></property>
        <property name="url"><value>jdbc:mysql://localhost:3306/txtestdb?autoReconnect=true</value></property>
        <property name="user"><value>username</value></property>
        <property name="password"><value>password</value></property>
        <property name="minPoolSize"><value>1</value></property>
    </bean>

    <!-- Construct Atomikos UserTransactionManager, needed to configure Spring -->
    <bean id="atomikosTransactionManager" class="com.atomikos.icatch.jta.UserTransactionManager"  init-method="init" destroy-method="close">
        <!--  when close is called, should we force transactions to terminate or not? -->
        <property name="forceShutdown"><value>true</value></property>
    </bean>

    <!-- Also use Atomikos UserTransactionImp, needed to configure Spring  --> 
    <bean id="atomikosUserTransaction" class="com.atomikos.icatch.jta.UserTransactionImp">
        <property name="transactionTimeout"><value>300</value></property>
    </bean>

    <tx:annotation-driven/>

    <!-- Configure the Spring framework to use JTA transactions from Atomikos -->
    <bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
        <property name="transactionManager"><ref bean="atomikosTransactionManager"  /></property>
        <property name="userTransaction"><ref bean="atomikosUserTransaction"  /></property>
    </bean>

    <bean id="genericDaoHibernate" class="com.company.txtest.dao.hibernate.GenericDaoHibernate">
        <property name="sessionFactory">
            <ref bean="sessionFactory" />
        </property>
    </bean> 
```

# sql - SQL Master Detail 场景中的主键选择

> ID：12780161
> 
> 赞同：3
> 
> 时间：2012-10-08T10:47:30.047
> 
> 标签：sql, database-design, master-detail

在 Sales Order Header/Detail 场景中，details 表应该具有任意主键（身份/guid）还是应该由 SalesOrderHeaderID 和 ProductID 列组成？

这是 Master/Detail 场景的一般问题，可以在包含 2 或 3 行的详细信息表中创建复合唯一键。（在上面的示例中，我们假设订单不能包含重复的产品）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:56:48.330

如果您选择了一个自然复合键，并且您的设计稍后发生更改，以便您的订单详细信息成为另一个表（例如，货件）的主键，那么您必须将该复合键传播到新表。仅出于这个原因，我会选择任意身份作为主键。

此外，这允许您在订单中包含重复产品的未来情况

（这个问题的答案当然是普世问题，没有正确答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:52:53.460

我会选择自然主键而不是身份/ guid 的任意主键。如果您能够使用自然键使条目唯一，那么我会走那条路。

因此，您的基本表结构将与此类似：

```
create table order
(
  order_id int -- PK
  order_date datetime,
  orderedby varchar(50)
);

create table products
(
  productid int, -- PK
  name varchar(50)
;

create table orderdetails
(
  order_id int,  -- PK/FK
  productId int  -- PK/FK
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:53:10.080

我会`identity`在表中有列和复合键。

设计看起来像：

*   SalesOrderDetailId (int, 身份)
*   SalesOrderHeaderID（整数，外键）
*   ProductID（整数，外键）
*   其他必填字段。

两个表中仍然使用组合键，但是我发现组合表在从中选择时具有自己的标识（这对我个人而言使其不那么混乱）是一致且有用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:54:51.353

在上面的场景中，详细信息表应该具有由 SalesOrderHeaderID 和 ProductID 列组成的主键——无论如何，您都需要在详细信息表上存储和索引 SalesOrderHeaderID，那么为什么不将它用作主键的一部分呢？

在实践中，使用 SalesOrderHeaderID 和订单行号的组合作为主键是正常的，因为通常有业务原因希望能够在同一个订单上记录同一产品的多个订单行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T16:32:47.663

> ...应该由 SalesOrderHeaderID 和 ProductID 列组成吗？

如果你给出了问题的*完整*描述，那么是的。

但是，您可能还没有提到[其他标准](https://stackoverflow.com/a/11639189/533120)，这可能会使平衡偏向于额外的“代理”键。

# javascript - Google Wallet Online Commerce 的 403 禁止错误页面

> ID：12780167
> 
> 赞同：0
> 
> 时间：2012-10-08T10:47:39.863
> 
> 标签：javascript, google-api

我调用 google.wallet.online.authorize() 方法来确定用户是否被预授权到 Google Wallet Online Commerce 支付系统。返回null时，页面上显示谷歌钱包购买按钮页面。

单击购买按钮后，弹出窗口打开，如果我使用凭据登录，它会重定向到 403 Forbidden 错误页面。

任何帮助，将不胜感激 ！谢谢， 斯里尼瓦斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T08:50:21.553

我刚发现demo版也有同样的问题

查看演示：[https ://developers.google.com/wallet-online/](https://developers.google.com/wallet-online/)

点击“使用 Google Wallet 购买”按钮后会出现一个弹出窗口，登录后会出现 403 页面。

我认为问题出在谷歌方面。

# java - 如何在 java 中与 Outlook 日历同步？

> ID：12780171
> 
> 赞同：3
> 
> 时间：2012-10-08T10:47:52.257
> 
> 标签：java, jakarta-mail, outlook-2010, exchange-server-2010

我有一个**Exchange 2010**邮件服务器，我在**Outlook 2010**上打开帐户。

我想连接到**日历文件夹**并获取即将到来的**约会/会议**详细信息。

我正在使用`java-mail 1.4.5`，我可以使用`javamail`或有其他免费库可以做到这一点吗？

请告知如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:57:33.930

要利用 Exchange 服务器提供的所有功能，您可以使用 Microsoft 的[EWS（Exchange Web 服务）Java API](http://archive.msdn.microsoft.com/ewsjavaapi)。

# android - www.googleapis.com/androidpublisher/v1/ 上 GET 的 500 内部服务器错误

> ID：12780175
> 
> 赞同：6
> 
> 时间：2012-10-08T10:48:03.420
> 
> 标签：android, api, subscription

最后我可以解决我[最近](https://stackoverflow.com/questions/12605182/checking-google-android-subscriptions-from-server-side)处理访问 google API 的 OAuth2 身份验证的问题。

但是现在我在查询 android 开发人员 API 以检索有关订阅的状态信息时遇到了困难。我正在使用以下 REST API 调用：

[https://www.googleapis.com/androidpublisher/v1/applications/](https://www.googleapis.com/androidpublisher/v1/applications/) **APP_PACKAGE** /subscriptions/ **SUBSCRIPTION_ID** /purchases/ **PURCHASE_TOKEN** ?access_token= **AUTH_TOKEN**

*   **APP_PACKAGE** 我上传到[开发者控制台的应用程序的包名](https://play.google.com/apps/publish/Home)
*   **SUBSCRIPTION_ID**为应用指定的订阅 ID（开发者控制台）
*   **PURCHASE_TOKEN** (Yet dummy) 购买代币
*   **AUTH_TOKEN** 从 OAuth2 检索到的身份验证令牌。

我检索到的此请求的身份验证令牌如下：

```
// Build the HTTP parameter
Map<String,String> params = [:]
params.put("grant_type", "refresh_token")
params.put("refresh_token", googleRefreshToken.encodeAsURL())
params.put("client_id", googleClientId.encodeAsURL())
params.put("client_secret", googleClientSecret.encodeAsURL())

// Send the POST request
// This action might throw an exception in case any parameter were wrong, invalid or not specified.
String result = HttpRequestHandler.sendRequest("https://accounts.google.com/o/oauth2/token", params);
JSONElement jsonResult = JSON.parse(result) 
```

这工作得很好，但上面提到的 REST 调用返回 500 错误 - 没有任何给定的消息。

```
{
  "error": {
    "code": 500,
    "message": null
  }
} 
```

我读到有些人有几乎类似的问题，但只有在联系[取消 API](https://developers.google.com/android-publisher/v1/purchases/cancel)时。

一些信息：

*   属于客户端 ID 的 google-user 也是 android 应用程序的所有者
*   该应用程序尚未发布
*   该应用授予 com.android.vending.BILLING 访问权限
*   我还在应用程序中实现了一个虚拟的 BillingService 和 BillingReceiver

由于我没有检索到任何错误消息，我现在真的不知道如何继续。还有其他人知道这个问题吗？

**编辑 1**

在玩各种测试用例时，我得到了非常奇怪的结果。例如：如果我使用 <= 7 个字符的 PURCHASE_TOKEN，那么我会收到以下响应：

```
{
  "error": {
    "errors": [
     {
      "domain": "global",
      "reason": "notFound",
      "message": "The subscription purchase token was not found.",
      "locationType": "parameter",
      "location": "token"
     }
    ],
   "code": 404,
   "message": "The subscription purchase token was not found."
  }
} 
```

而当我使用 PURCHASE_TOKEN > 7 个字符时，我仍然会收到 500 错误。[就像从这里](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html)复制的示例令牌：rojeslcdyyiapnqcynkjyyjh

**编辑 2**

服务器偶尔会随机响应 503 后端错误。

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "backendError",
    "message": "Backend Error"
   }
  ],
  "code": 503,
  "message": "Backend Error"
 }
} 
```

**编辑 3**

如果我使用 Java API（而不是直接 URL 调用），我会得到同样的错误。

```
// Build token for the response
TokenResponse tokenResponse = new TokenResponse();
tokenResponse.setAccessToken(googleAccessToken);
tokenResponse.setRefreshToken(googleRefreshToken);
tokenResponse.setExpiresInSeconds(3600L);
tokenResponse.setScope(OAuth2Handler.SCOPE_ANDROID_PUBLISHER);
tokenResponse.setTokenType("Bearer");

// Init credential container
HttpRequestInitializer credential =  new GoogleCredential.Builder()
.setTransport(HTTP_TRANSPORT)
.setJsonFactory(JSON_FACTORY)
.setClientSecrets(googleClientId, googleClientSecret)
.build()
.setFromTokenResponse(tokenResponse);

// Connect to the android publisher API
Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
    .setApplicationName("NameOfMyApplicationInGooglePlayStore")
    .build();

// Retrieve subscription purchase information
Androidpublisher.Purchases purchases = publisher.purchases();
Androidpublisher.Purchases.Get get = purchases.get(
    packageName,
    subscriptionId,
    purchaseToken
);

// Analyse result
SubscriptionPurchase subscription = get.execute(); 
```

亲切的问候，克里斯托弗

# java - @RequestMapping 和 @RenderMapping 有什么区别

> ID：12780176
> 
> 赞同：3
> 
> 时间：2012-10-08T10:48:06.107
> 
> 标签：java, spring, spring-mvc

我什么时候应该使用@RequestMapping 而不是@RenderMapping，反之亦然？

例如，以下一种方法使用@RequestMapping 而另一种方法使用@RenderMapping 有什么区别

```
@Controller
@RequestMapping("VIEW")
public click myController {

@RequestMapping("VIEW")
public String showView(final ModelMap argMap, final RenderRequest argRequest) { 
    return "myView"
}

} 
```

和 ：

```
@Controller
@RequestMapping("VIEW")
public click myController {

@RenderMapping("VIEW")
public String showView(final ModelMap argMap, final RenderRequest argRequest) { 
    return "myView"
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:12:39.150

@RenderMapping 是一个方法级别的注释，用于将渲染请求映射到处理程序类的渲染方法。

@RequestMapping 注释将portlet 请求映射到适当的处理程序和处理程序方法。

请检查此以获取更多详细信息

[http://books.dzone.com/articles/spring-30-portlet-mvc-part-2](http://books.dzone.com/articles/spring-30-portlet-mvc-part-2)

# wcf - 修复 WCF 反序列化错误

> ID：12780178
> 
> 赞同：0
> 
> 时间：2012-10-08T10:48:29.507
> 
> 标签：wcf, tcp, app-config

我得到的错误如下：

> 对象图中可以序列化或反序列化的最大项目数为 65536。更改对象图或增加 MaxItemsInObjectGraph 配额。

这是我的 app.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <netTcpBinding>
                <binding name="NetTcpBinding_IClusterControllerService">
                    <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" />
                </binding>
                <binding name="NetTcpBinding_IClusterManagementService">
                    <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" />
                </binding>

            </netTcpBinding>
        </bindings>
        <client>
            <endpoint 
                address="some_address"
                binding="netTcpBinding" 
                bindingConfiguration="NetTcpBinding_IClusterControllerService"
                contract="ClusterControllerService.IClusterControllerService"
                name="NetTcpBinding_IClusterControllerService"
                behaviorConfiguration="BigObjectGraphBehavior">
            </endpoint>
            <endpoint 
                address="some_address"
                binding="netTcpBinding" 
                bindingConfiguration="NetTcpBinding_IClusterManagementService"
                contract="ClusterManagementService.IClusterManagementService"
                name="NetTcpBinding_IClusterManagementService"
                behaviorConfiguration="BigObjectGraphBehavior">
            </endpoint>
        </client>
        <behaviors>
            <endpointBehaviors>
                <behavior name="BigObjectGraphBehavior">
                    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
                </behavior>
            </endpointBehaviors>
        </behaviors>
    </system.serviceModel>
</configuration> 
```

似乎 maxItemsInObjectGraph 设置没有生效。还有其他地方我必须设置此设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:08:47.387

您的配置似乎是正确的。

可以在客户端和服务器端设置此设置。还要检查这个错误的来源（如果服务器上的 IncludeExceptionDetailInFaults 为真，则向客户端返回异常）

这是此行为的示例配置。

```
//server side
<behaviors>
  <serviceBehaviors>
    <behavior name="LargeServiceBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </serviceBehaviors>
</behaviors>

//client side
<behaviors>
  <endpointBehaviors>
    <behavior name="LargeEndpointBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

如果您在我们的客户端上动态启动端点（使用 ChannelFactory），则必须手动设置 MaxItemsInObjectGraph 属性。

```
foreach ( var operation in channelFactory.Endpoint.Contract.Operations )  
{  
    var behavior = operation.Behaviors.Find() as DataContractSerializerOperationBehavior;  
    if ( behavior != null )  
    {  
        behavior.MaxItemsInObjectGraph = 2147483647;      
    }  
} 
```

# architecture - 在 EC2 中构建集群的正确方法

> ID：12780180
> 
> 赞同：1
> 
> 时间：2012-10-08T10:48:47.590
> 
> 标签：architecture, amazon-ec2, cluster-computing, starcluster

我正在开发开源工具，它必须在 EC2 的集群上运行，以“一个主 - 几个从”的方式组织。我需要一些关于如何以最简单但可靠的方式正确组织事物的建议。

我基本上需要的是一个将在主实例（用户手动运行）上运行并执行以下操作的代码：

a) 运行 N 个从属实例（N 个来自用户）

b）在每个实例启动并运行后 - 通过 SSH 连接并启动一些东西。

c) 跟踪从属实例是否处于活动状态（例如通过简单地 ping 它们）

d) 如果从属实例失败 - 确保它已终止，运行另一个实例并重复步骤 b)

e) 通过来自用户的信号 - 关闭从属实例。

所有这些看起来都非常简单明了，但我有一些问题：

1）现成的解决方案。首先我看了一下[Zookeeper](http://zookeeper.apache.org/)，但我被它的复杂性吓到了。对于我需要的这么简单的事情来说，这似乎有点过头了。我发现的另一件事是[StarCluster](http://star.mit.edu/cluster/)，它也在 Python 中，这很好（我的工具也在 Python 中），但我不确定它是否能满足我的需要（跟踪、重新运行实例）。我的问题是：是否有我不知道的简单工具、库、框架？

2）另一种方法是自己实现。这里的问题是：我的问题中是否有我不知道的陷阱？这一切看起来都很简单：对 API 的多次调用加上一些常规 ping，但可能我在这里看不到任何东西，所以使用已经编写的工具真的是正确的吗？

3）如果我自己编码，问题是：是否使用 CloudWatch。它真的对管理内部计算集群有什么不同吗？或者它只是更好地帮助处理高负载站点等？

4) 我的简单架构对主节点故障没有任何保护。用户运行它，然后通过 Web 界面连接到它并运行集群，但如果主节点出现故障 - 一切都会被破坏。从属节点可以检查主节点的存在，并在主节点出现故障时自行终止。这增加了一些防止无头运行的耗钱集群的保护，但这并不能解决优雅重启的问题。如何解决这个问题？

5) 在开始编写这个项目之前，是否还有其他需要了解的内容或需要阅读的重要资料？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:43:41.737

你可能想看看亚马逊的自动缩放。显然，这只处理 EC2 实例，但为您处理启动、停止和监控实例的许多复杂性。

使用 AutoScaling，您可以创建一个或多个组。您告诉亚马逊如何在您的组中创建更多实例（AMI、userData、实例类型等）以及您希望在组中创建多少个实例。亚马逊将根据需要启动尽可能多的实例，并在它们失败时替换它们。

您可以使用 api 更改所需节点的数量（如果您当时不需要任何实例，可以将其设置为 0），或者您可以根据 cloudwatch 指标拥有它。例如，如果您使用 SQS 将作业分发到您的从属服务器，您可以配置自动缩放以在有可用作业时将组大小从 0 增加到所需的数量，并在队列变空时将组大小返回到 0。

您还可以有多个组，例如，您可能有一个与主节点相对应的组，该组始终具有 1 个实例（如果失败，ec2 将替换它）和第二个从属组，当没有实例时将具有 0 个实例待完成的工作和有可用工作时的 N 个实例。

我自己没有使用过 python 的 EC2 api，但我听说 boto 可以很好地为你处理这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:21:05.890

一种可能的方法是使用 PaaS（平台即服务）来处理您需要的大量管道。PaaS 通常至少会处理：

*   供应虚拟机
*   将应用程序代码部署到新 VM
*   监控虚拟机状态并启动新虚拟机以替换故障虚拟机。
*   自动缩放

您需要根据 PaaS 预期的格式定义您的应用程序并提交。其余的应该是自动化的。这里对 PaaS 选项进行了很好的比较：[寻找 PaaS 提供商建议](https://stackoverflow.com/questions/9542784/looking-for-paas-providers-recommendations)

免责声明：我为[GigaSpaces工作，他是](http://www.gigaspaces.com)[Cloudify](http://www.cloudifysource.org)开源 Paas 堆栈的开发人员

# android - 如何自动停止android服务？

> ID：12780181
> 
> 赞同：-4
> 
> 时间：2012-10-08T10:48:54.163
> 
> 标签：android, android-service

我已经从一个活动启动了服务，以及如何在任务完成后自动停止它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:02:39.947

该服务可以`stopSelf()`在完成后调用。如果您使用`IntentService`，这将自动发生。

# asp.net - 为在 ASP.NET Web API 中使用 User.Identity.Name 的方法编写单元测试

> ID：12780185
> 
> 赞同：42
> 
> 时间：2012-10-08T10:49:08.567
> 
> 标签：asp.net, .net, unit-testing, identity

我正在使用 Unit Test for ASP.NET Web API 编写测试用例。

现在我有一个动作，它调用了我在服务层中定义的一些方法，我在其中使用了以下代码行。

```
string username = User.Identity.Name;
// do something with username
// return something 
```

现在如何为此创建单元测试方法，我得到空引用异常。我对编写单元测试和东西有点陌生。

我只想为此使用单元测试。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-08T12:45:37.777

下面的只是这样做的一种方法：

```
public class FooController : ApiController {

    public string Get() {

        return User.Identity.Name;
    }
}

public class FooTest {

    [Fact]
    public void Foo() {

        var identity = new GenericIdentity("tugberk");
        Thread.CurrentPrincipal = new GenericPrincipal(identity, null);
        var controller = new FooController();

        Assert.Equal(controller.Get(), identity.Name);
    }
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-03T18:00:47.960

这是我在`NerdDinner`测试教程中找到的另一种方法。它适用于我的情况：

```
DinnersController CreateDinnersControllerAs(string userName)
{

    var mock = new Mock<ControllerContext>();
    mock.SetupGet(p => p.HttpContext.User.Identity.Name).Returns(userName);
    mock.SetupGet(p => p.HttpContext.Request.IsAuthenticated).Returns(true);

    var controller = CreateDinnersController();
    controller.ControllerContext = mock.Object;

    return controller;
}

[TestMethod]
public void EditAction_Should_Return_EditView_When_ValidOwner()
{

    // Arrange
    var controller = CreateDinnersControllerAs("SomeUser");

    // Act
    var result = controller.Edit(1) as ViewResult;

    // Assert
    Assert.IsInstanceOfType(result.ViewData.Model, typeof(DinnerFormViewModel));
} 
```

请务必阅读完整部分：[模拟 User.Identity.Name 属性](http://nerddinnerbook.s3.amazonaws.com/Part12.htm)

它使用`Moq`您可以在`Test project`使用 NuGet 时安装的模拟框架：http: [//nuget.org/packages/moq](http://nuget.org/packages/moq)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-09-17T18:43:39.767

对于 WebApi 5.0，这略有不同。您现在可以执行以下操作：

```
controller.User = new ClaimsPrincipal(
  new GenericPrincipal(new GenericIdentity("user"), null)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-03T15:39:24.240

这些都对我不起作用，我在另一个问题上使用了解决方案，该问题使用 Moq 在 ControllerContext 中设置用户名：[https ://stackoverflow.com/a/6752924/347455](https://stackoverflow.com/a/6752924/347455)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-08T08:57:26.477

这是我的解决方案。

```
var claims = new List<Claim>
{
    new Claim(ClaimTypes.Name, "Nikita"),
    new Claim(ClaimTypes.NameIdentifier, "1")
};

var identity = new ClaimsIdentity(claims);
IPrincipal user = new ClaimsPrincipal(identity);

controller.User = user; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-01T12:28:58.223

在这里，我找到了另一种方法的解决方案，即如何从测试方法设置控制器级别测试的用户身份名称。

```
public static void SetUserIdentityName(string userId)
        {
            IPrincipal principal = null;
            principal = new GenericPrincipal(new GenericIdentity(userId), 
            new string[0]);
            Thread.CurrentPrincipal = principal;
            if (HttpContext.Current != null)
            {
                HttpContext.Current.User = principal;
            }
        } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-15T03:03:32.710

如果您有很多控制器要测试，那么我建议创建一个基类并在构造函数中创建一个`GenericIdentity`&`GenericPrincipal`并设置`Thread.CurrentPrincipal`

```
GenericPrincipal principal = new GenericPrincipal(new 
    GenericIdentity("UserName"),null); Thread.CurrentPrincipal = principal; 
```

然后继承那个类..这样每个单元测试类都会有原理对象集

```
[TestClass]
public class BaseUnitTest
{
    public BaseUnitTest()
    {
      GenericPrincipal principal = new GenericPrincipal(new GenericIdentity("UserName"),null);   
      Thread.CurrentPrincipal = principal;
    }
}

[TestClass]
public class AdminUnitTest : BaseUnitTest
{
   [TestMethod]
   public void Admin_Application_GetAppliction()
   {
   }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-11T08:45:34.223

当我运行单元测试时 - 在我的情况下，它使用 Windows 身份验证，Identity.Name 是我的域名，我也想为测试更改它。所以我[在 IAuthenticationFilter 中使用这种方法来“破解”我想要的东西](https://stackoverflow.com/a/45629765/208272)

# ffmpeg - libavcodec 将 AVFrames 解码到 FIFO 缓冲区

> ID：12780186
> 
> 赞同：1
> 
> 时间：2012-10-08T10:49:15.247
> 
> 标签：ffmpeg, buffer, avcodec

我的目标是解码视频文件的多个帧，将解码后的帧累积到 FIFO 缓冲区中，然后再读取它们。我将数据包解码为我的 AVFRame mFrame：

avcodec_decode_video2(mCodecContext,mFrame,&frameFinished,&mPacket);

通常我可以将 YUV 帧从 mFrame->data[n][0] 复制到我的 FIFO 缓冲区，但我只是想尽可能地减少 memcpy 。因此，我不想复制 mFrame->data[n][0] 我只想将 mFrame（它比它指向的帧小得多）存储在缓冲区中，并且在读取时我可以获取它并到达数据。

我试图这样做，但没有奏效。AVFrames 是从缓冲区中获取的，但是当您在屏幕上显示它们时，视频就像冻结一样。您可能认为我使用相同的 mFrame 并在每次解码数据包时覆盖它，但我不是。我每次在解码循环中都创建一个新的 AVFrame*。

这个问题与 avcodec 的工作方式有关吗？有任何想法吗？

谢谢迈克

# android - Android：谁能指导我使用 android 应用程序将提示和照片添加到foursquare？

> ID：12780187
> 
> 赞同：2
> 
> 时间：2012-10-08T10:49:15.030
> 
> 标签：android, api, foursquare

我正在我的 android 应用程序中集成foursquare 应用程序。在此我必须使用检查选项添加提示和照片。请任何人在编写代码时给我建议。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:47:03.823

[http://developer.foursquare.com](http://developer.foursquare.com)上提供了有关foursquare API 的文档。在那里，您可以找到有关如何访问提示、照片和签到的文档。

# php - 如何从 CodeIgniter 中的 application/myfolder/ 路径加载视图

> ID：12780189
> 
> 赞同：0
> 
> 时间：2012-10-08T10:49:16.410
> 
> 标签：php, codeigniter, codeigniter-2

我在 CodeIgniter 中加载视图为

```
$this->load->view('../../myfolder/footer'); 
```

它在 Windows 机器上运行良好。我已将应用程序上传到 linux 机器并开始出现错误

```
Unable to load the requested file: ../../myfolder/header.php 
```

myfolder 位于 CI 应用程序文件夹中。

我如何从应用程序/我的文件夹加载视图

请帮助我，并在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:15:11.550

为什么需要在 application/myfolder 中加载视图？Code Igniter 期望视图位于 application/views 或 application/views/myfolder 中。将您的文件放在应用程序/视图中，然后您可以使用以下方法加载它：

```
this->load->view('footer'); 
```

或者

```
this->load->view('myfolder/footer'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:48:32.540

```
$this->load->view(base_url().'myfolder/footer'); 
```

那应该可以，但是我不知道您为什么要尝试在视图文件夹之外开始工作。只需像下面那样构建您的视图文件夹。从模板页面加载页眉、页脚和其他任何静态内容。

查看 --pages --admin --templates --etc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:50:22.687

如果它在 Windows 上工作但在 Unix 上不再工作，可能是因为文件路径在 Unix 中区分大小写。

检查文件结构和文件名以确保它们与 CodeIgniter 请求完全匹配。

例如：

```
$this->load->view('../../myfolder/footer'); 
```

尝试加载将失败：

```
../../MyFolder/footer
../../myfolder/Footer
../../MyFolder/Footer
etc 
```

# android - Facebook恢复已删除的应用程序，在android应用程序中使用相同的身份验证

> ID：12780197
> 
> 赞同：0
> 
> 时间：2012-10-08T10:49:33.340
> 
> 标签：android, ios, facebook

我需要帮助/建议来恢复已删除的 Facebook 应用。请不要将其标记为离题。

我知道我可以在 2-5 分钟内创建新应用程序。并用新的细节替换旧的细节，可以继续。我可以在网站上轻松完成。

但问题是我在我的 IO 和 Android 应用程序中使用相同的 appId 进行 Facebook 身份验证。这些应用程序在 android 上安装了 100,000 - 500,000。应用程序中的某些功能仅在 Facebook 身份验证后才能使用。

我可以创建新应用并使用旧的 appId 和应用密码对其进行更新吗？

我想知道是否有任何建议/想法可以帮助我继续处理这件事。

感谢帮助！VK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:53:55.943

> 我可以创建新应用并使用旧的 appId 和应用密码对其进行更新吗？

不，不幸的是你不能

# winapi - 如何使用 WinAPI 获取 MessageBox 图标

> ID：12780198
> 
> 赞同：3
> 
> 时间：2012-10-08T10:49:36.790
> 
> 标签：winapi, visual-c++, messagebox

我有一个 WH_CALLWNDPROC 挂钩代码，它处理 WM_INITDIALOG 消息以获取有关消息框的信息。我可以获得“消息”、“标题”、“按钮”，但无法获得“图标”信息。我正在尝试使用如下函数：

```
long getIcon(HWND hwnd) { // handle of messagebox dialog
    HWND hlbl = GetDlgItem(hwnd,20);

    wcout << "LABEL HWND: " << hlbl << endl;

    if (hlbl != NULL) { 
         LRESULT r =  SendMessage(hlbl,WM_GETICON,0,0);
         return (long)r; 
    }

    return 0; 
} 
```

函数总是返回 0。我通过 MS Spy++ 进行了检查，发现图标句柄为 0。获取图标的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:24:40.950

消息框对话框上显示的图标是使用带有样式的[`STATIC`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760769.aspx)控件实现的。`SS_ICON`您可以通过发送该控制[`STM_GETICON`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760775.aspx)消息来获取图标句柄。

在您问题的代码中，名为的变量`hlbl`实际上是`STATIC`包含图标的控件的窗口句柄。我会命名它`hIconWnd`。更改名称后，获取图标的代码将如下所示：

```
HICON getIcon(HWND hwnd) { // handle of messagebox dialog
    HWND hIconWnd = GetDlgItem(hwnd, 20);
    if (hIconWnd != NULL) { 
         return (HICON)SendMessage(hIconWnd, STM_GETICON, 0, 0); 
    }
    return NULL; 
} 
```

# .net - .NET CLR 上长时间运行的模拟应用程序

> ID：12780199
> 
> 赞同：2
> 
> 时间：2012-10-08T10:49:42.787
> 
> 标签：.net, memory, clr

我们编写了一个应用程序，它是一个需要 24 小时不间断运行的数字运算模拟。它使用窗口形式的绘画事件来连续呈现主题的视觉表示，另外我们使用几个实时图形和网格来显示项目对象的进度。它是一个 .NET Windows 窗体应用程序。

4 小时后，我们得到 System outOfMemory Exception。

Memory Profiler 告诉我们，如果我们权衡一些实时图和一些其他未处理的对象，我们可以节省“一些”（35%-40%）内存。

我担心的是它仍然不会 24 小时不间断运行。我们已经在安装了 32 位 Win7 的 HP 8440p Elitebook Intel i5 上配备了 4GB RAM。

我们的目标是为我们的模拟应用程序和运行它的 .NET CLR 提供尽可能多的内存。投资更多内存（可能是 8GB）和 64 位操作系统会有帮助吗？除了添加更多硬件之外，我还需要考虑哪些其他可能的 CLR 选项？

**非常感谢。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:39:46.687

应用程序是 64 位的，在 64 位操作系统上运行吗？32 位 CLR 应用程序的上限非常低（远低于 2GB 逻辑限制） - 但 64 位 CLR 应用程序应该能够毫无问题地使用大量内存。当物理内存用完时，64 位应用程序也将分页到磁盘 - 因此整个机器将用完物理内存并在 CLR 收到 OutOfMemory 错误之前很久就开始分页到磁盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T16:58:32.460

@Adam Houldsworth 的建议非常好。您可能会面临内存泄漏（对陈旧对象的引用仍然被保留，正如 Adam 建议的那样，经常通过实时事件订阅，这可以防止它们被垃圾收集）。

@mkimes 的回答也很有价值。事实上，作为 64 位进程运行将允许您的应用程序管理更多内存，但仍然存在一些警告（例如单个对象大小的 2GB 限制）。

如果您直觉地认为应用程序不应该耗尽内存，因为根据您的推理，大多数创建的对象都是短暂的并且应该被释放，那么您可能正面临内存泄漏。但是，如果进程正在构建大量对象，这些对象在进程完成后或在较长的计算阶段期间应该保持活动状态，那么您可能会遇到 32 位内存限制障碍，特别是考虑到在一个完整的垃圾回收周期，应用程序的内存将趋于临时增长接近当前分配大小的两倍，将实际的 32 位内存大小限制保持在 1GB 左右。

有一个[Windows 配置开关](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)，允许将 32 位应用程序可以处理的内存大小增加到 3GB，但是根据我的经验，这会使操作系统不稳定（非常频繁的蓝屏），因此请谨慎探索此选项。

***如果您怀疑内存泄漏：***

本文可能会有所帮助，它向您展示了如何使用[Windgb](http://blogs.msdn.com/b/ricom/archive/2004/12/10/279612.aspx)（一种高级调试器）来跟踪可能使不需要的、过时的引用保持活动状态的对象。

此外（希望不是），您可能会成为一个非常讨厌的问题的受害者，即内存碎片可能是由 CLR 认为的“大对象”的重复、频繁分配引起的，即大小大于 85,000 字节的对象。这是[一篇](http://connect.microsoft.com/VisualStudio/feedback/details/521147/large-object-heap-fragmentation-causes-outofmemoryexception)详细说明问题的文章。基本上，这些对象被分配在不同的堆下，但不幸的是，从未压缩过。这意味着释放的内存块将散布在分配的块中，并且运行时可能在某些时候找不到单个连续的内存块来满足内存请求，从而触发内存不足异常。如果是这种情况，将一个大的、整体的对象分解成更小的对象会有所帮助。

**最后，即使在 64-bits 下**，任何对象的大小都不能大于 2GB ，因此您必须注意您的集合和/或数组未达到此限制。

# c# - C# 提取“200”、“204”HTTP 响应 URL 与 Webbrowser 控件？

> ID：12780208
> 
> 赞同：1
> 
> 时间：2012-10-08T10:50:09.140
> 
> 标签：c#, webbrowser-control

有没有办法通过 webbrowser 控件获取 200、204 HTTP 响应？当我导航到一个网站时，我返回 2 个 url，1 个是“200”，另一个是“204”，但我只能通过 Fiddler 浏览器看到这些 URL，它不会重定向到它们，它会在后台执行，但我需要那些URL 到字符串能够从中提取一些数据 这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:02:02.773

请参考以下页面

[Web 浏览器控件中的 http 状态代码](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/f0558d26-fee9-44e3-9a14-0148e34824a5/)

# php - 如何设置http头缓存？

> ID：12780211
> 
> 赞同：0
> 
> 时间：2012-10-08T10:50:23.200
> 
> 标签：php

我需要使用 http 标头将 javascript 和页面详细信息存储到浏览器缓存中。

谁能帮我得到这个？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:53:50.110

您可以使用 HTML 元：

`<meta http-equiv="Cache-control" content="public">`

**或者**

PHP 标头：

```
header("Cache-Control: public"); // HTTP/1.1
header("Expires: Tue, 08 Oct 2013 00:00:00 GMT"); // Date in the future 
```

*来源：[【PHP 手册】](http://php.net/manual/en/function.header.php)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:15:51.997

我认为您想要缓存的确切内容有些混乱。这里提到了两个项目 -

1.  包含所有 HTML 元素和对外部文件的引用的页面本身。
2.  HTML 文档引用的 JavaScript 文件。

要缓存第一项（页面），使用 PHP 设置标题应该缓存页面的 HTML 内容。

```
header("Cache-Control: public");
header("Expires: Tue, 08 Oct 2013 00:00:00 GMT"); // Date in the future 
```

这将缓存页面的内容，但不一定缓存它引用的文件。例如，如果您的 HTML 文件中有此代码 -

```
<script src="http://domain/some/js/file.js" type="javascript" ></script> 
```

那么该**文本**将被缓存但不是`file.js`。要手动设置这些外部文件的缓存，您需要使用 PHP 为它们提供服务并手动设置标头。你会想做类似的事情 -

```
<script src="another_file.php" type="javascript" ></script> 
```

现在，`another_file.php`您将要加载 JavaScript 文件并使用适当的标头“回显”它 -

```
$file = '/absolute/path/to/your_script.js';
if (file_exists($file)) {
    header('Content-Type: text/javascript');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:53:42.823

简单地在标题中设置过期日期怎么样 -

```
header("Cache-Control: public");
header("Expires: Tue, 08 Oct 2013 00:00:00 GMT"); // Date in the future 
```

应该注意的是，现代浏览器在缓存资源方面做得很好。通常这些方法用于强制重新加载资源；防止浏览器缓存。

# django - 没有帖子信息，而是 404 错误

> ID：12780213
> 
> 赞同：0
> 
> 时间：2012-10-08T10:50:32.810
> 
> 标签：django

如何显示没有帖子而不是404错误的信息？

在 django 中这样的事情多久发生一次？

```
def post_by_category(request, slug):
    category = get_object_or_404(Category, slug=slug)
    categories = category.get_descendants(include_self=True)
    posts = get_list_or_404(Post, category__in=categories)

    return render_to_response("by_category.html",
                              {'posts': posts, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:08:59.127

[`get_object_or_404`](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)只是一个方便快捷方式，其主要目的是提高`Http404`.

因此，如果您*不想提出*404（我认为这是您的问题），那么您根本不应该使用快捷方式，而是自己处理这种情况。

这些方面的东西：

```
def my_view(request):
    try:
        my_object = MyModel.objects.get(pk=1)
    except MyModel.DoesNotExist:
        # render whatever you like 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:10:18.697

通过使用`posts = get_list_or_404(Post, category__in=categories)`，您明确*要求*它在没有帖子的情况下返回 404。

尝试：

```
posts = Post.objects.filter(category__in=categories)
if posts:
    return render_to_response("by_category.html",
                              {'posts': posts}, context_instance=RequestContext(request))
else:
    return render_to_response("by_category.html",
                              {'message': 'No posts found!'}, context_instance=RequestContext(request)) 
```

并确保打印出错误 {{ message }} inside `by_category.html`。

# php - PHP 源文件以 ?> 结尾

> ID：12780215
> 
> 赞同：0
> 
> 时间：2012-10-08T10:50:37.860
> 
> 标签：php

> **可能重复：**
> [PHP 结束标记](https://stackoverflow.com/questions/4410704/php-closing-tag)

为什么`pure php source`建议文件`not`以`?>`?

今天我发现了一个由 引起的问题`?>`，这使代码打印了一个额外的字符（也许`space`，我不确定）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:54:32.617

如果您`?>`在文件末尾包含 ，则之后您可能会意外地使用换行符。许多编辑器会自动在文件末尾添加新行，因此很容易意外发生这种情况。换行符将被发送到客户端，这可能会出现问题。特别是，一旦将内容发送到客户端，就无法修改标头。

# oop - 无法从 HelperAdmin 中的静态数组中获取数据

> ID：12780218
> 
> 赞同：0
> 
> 时间：2012-10-08T10:50:54.967
> 
> 标签：oop, yii, static-methods, web-frameworks, static-variables

我有一个文件/类::方法（HelperAdmin.php/HelperAdmin::menuItem()），它从数据库中提取数据以生成主菜单和子菜单。我必须在生成菜单后获取此数据，但我不想调用此方法两次。所以我在 HelperAdmin 类中创建了一个静态数组。它看起来像这样：

```
class HelperAdmin {
        static $arrMenuItems;
                ...
                public static function menuItem() {
                      ....get $items....
                     self::$arrMenuItems = $items;
                     return $items;
                }
        ....
} 
```

但这里有一个问题。如果我再次调用 METHOD：

```
$items=HelperAdmin::menuItem(); 
```

...我可以获取数据。另一方面，如果我尝试通过静态数组获取数据：

```
$items=HelperAdmin::$arrMenuItems; 
```

...它只是返回空值。

## 我希望看到一些想法。毕竟，如果你认为在这里使用静态变量（从 Yii 架构视图）不是最好的解决方案，我想听听你的建议！

**@bool.dev**：好的，想象以下方案：1.我们有主文件

```
/modules/admin/views/layouts/admin.php 
```

这本质上是我们的后端模板。2.我们这里有助手：

```
/modules/admin/components/HelperAdmin.php 
```

其中包含： * 类 HelperAdmin、* menuItem() 方法和 * 类静态数组 $arrMenuItems。通过调用 HelperAdmin::menuItem() 返回此 ARRAY 的内容。我们希望从 HelperAdmin 类中获取数据两次： 1\. 在**admin.php**中生成菜单时；2\. 作为内容的一部分，我们使用变量**$content**将其放在此文件中。$content 又在另一个文件中生成：

```
/modules/admin/views/generator/index.php 
```

如您所见，我们的页面由模板文件 /modules/admin/views/layouts/admin.php 和从 /modules/admin/views/generator/index.php 获取的数据 ($content) 组合而成。首先我得到菜单的数据：

```
HelperAdmin::menuItem();
$items=HelperAdmin::$arrMenuItems;
$this->widget(....
        'items'=>$items,
        ...),
    )); 
```

没关系。**请注意，在此之后已经在 HelperAdmin 中生成了**一个静态数组 $ arrMenuItems 。接下来，我尝试在文件 /modules/admin/views/generator/index.php 中获取相同的数据（之前生成的 $arrMenuItems），以将其放置为**$content**：

```
$items=HelperAdmin::$arrMenuItems 
```

在这里我无法得到它，如上所述。好吧，我希望它使情况更清楚（？）。

# osgi - OSGi 中的按上下文服务

> ID：12780221
> 
> 赞同：0
> 
> 时间：2012-10-08T10:51:15.783
> 
> 标签：osgi, declarative-services

我正在设计一个应用程序，其功能需要在不同的上下文中相同。让我们参考下图：

```
                     +----+ +----+ +----+
                     |B1 +--->-----+B2 +-->----+B3 |
                     |ctx1| 使用 |ctx1| 使用 |ctx1|
                     +----+服务+----+服务+----+

     +-------+ +----+ +----+ +----+
     |上下文| |B1 +--->-----+B2 +-->----+B3 |
     |经理| |ctx2| 使用 |ctx2| 使用 |ctx2|
     | | +----+服务+----+服务+----+
     | | : : :
     +-------+ : : :

                     +----+ +----+ +----+
                     |B1 +--->-----+B2 +-->----+B3 |
                     |ctxN| 使用 |ctxN| 使用 |ctxN|
                     +----+服务+----+服务+----+

```

有4个捆绑包：

*   **上下文管理器**
*   **B1**
*   **B2**
*   **B3**

**上下文管理器**是负责了解新上下文何时可用并实例化**B1**、**B2**和**B3**的新版本的包。**B2**和**B3**提供的服务在上下文中完全相同，只是我想在服务上添加一个属性以区分它在哪个上下文中运行（例如 ctx1 与 ctxN）。现在这是我想要实现的理论，我认为我可以通过声明式服务轻松实现它，实际上我通过在组件标题中指定 component.factory 属性使**B1** * *B2* * 和**B3**成为*ComponentFactory* ，并且我设置**B1**引用**B2**提供的服务，我也将**B2**设置为引用**B3**提供的服务。这些是我面临的挑战：

*   **上下文管理器**第一次了解到只有**B3提供的***ComponentFactory*服务，只要**B1**和**B2**还不满足，他们就不会在服务注册表中注册*ComponentFactory服务。*只要是这种情况，**B1**和**B2**就不会为第一个上下文实例化。
********   **B1**和**B2**一旦创建，从其他上下文获取任意服务，我正在考虑将 reference.target 参数设置为仅从同一上下文中选择服务，但似乎没有任何方法可以声明性地执行此操作，看起来像从同一上下文中选择服务的唯一方法是设置基数为*0..n*的引用并提供基于当前上下文进行选择的*“绑定”*方法，这意味着每个组件都必须复制相同的选择逻辑相反，我认为可以在调用 newInstance 时由**上下文管理器提供。**实际上如果在调用*ComponentFactory.newtInstance(props);*我可以提供像 .target=(context=mycontext) 这样的属性，然后可以实现，但我不知道组件实际使用的所有引用。*******

 *****在这一点上，我正在考虑实际上避免使用声明式服务并让每个上下文包扩展一个我将提供的基类，它将基本上实现类似于 org.apache.felicy.dependencymanager 的依赖项跟踪，但这样的开发人员每个上下文组件不必担心知道代码位于哪个上下文中。但是我不想恢复到这个解决方案，我觉得我只是在复制 OSGi 规范中可能已经存在的逻辑，所以我的问题是：

*在 OSGi 中创建可以在每个上下文基础上运行的包的最佳方法是什么，这样包可以以声明性方式描述依赖关系，而不必明确提及它们运行的​​上下文？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T03:21:51.020

回答我自己的问题。只要我需要解决方案，在 Apache Felix DependencyManager 的帮助下，我已经替换了声明式服务，并且对于每个上下文，捆绑（下面源代码中的容器）我创建了一个新的依赖管理器实例有助于在每个上下文基础上跟踪服务。

代码参考请看： [OpenDayLight ComponentActivatorAbstractBase](https://github.com/giovannimeo/odl/blob/master/opendaylight/sal/api/src/main/java/org/opendaylight/controller/sal/core/ComponentActivatorAbstractBase.java)

为了管理依赖关系并确保它们在同一个上下文中，创建了一个特殊的 ServiceDependency，以供参考：[OpenDayLight ServiceDependency](https://github.com/giovannimeo/odl/blob/master/opendaylight/sal/api/src/main/java/org/opendaylight/controller/sal/core/ContainerServiceDependency.java)

例如关于激活器的实际使用方式，请参考：[OpenDayLight sample activator](https://github.com/giovannimeo/odl/blob/master/opendaylight/topologymanager/src/main/java/org/opendaylight/controller/topologymanager/internal/Activator.java)

希望这对其他人也有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:39:26.277

这里有一些令人困惑的术语。您谈到捆绑 B1、B2 和 B3。您还谈到了实例化 B1、B2 和 B3 的新版本。您的意思是更新捆绑包 B1、B2 和 B3？或者您的意思是捆绑 B1、B2 和 B3 分别提供服务 S1、S2 和 S3？*****

# sql - Postgresql 排序和限制

> ID：12780222
> 
> 赞同：8
> 
> 时间：2012-10-08T10:51:29.677
> 
> 标签：sql, postgresql

我有一个表 R 想要根据 z 列从中选择 3 个前任或后继者。我在 z 列上有一个 btree 索引。

```
SELECT key, z, x, y FROM R
    WHERE z <= some_value
    ORDER BY z DESC 
    LIMIT 3 
```

立即检索前辈，但

```
SELECT key, z, x, y FROM R
    WHERE z >= some_value
    ORDER BY z ASC
    LIMIT 3 
```

对于检索下一个条目是无用的，因为它开始扫描所有具有 z >= some_value 的行。Explain 给出了如何满足查询的相同解释。为什么会这样，我能做些什么呢？

编辑：实际上有两个索引，一个升序和一个降序。解释上面的两个查询：“限制（成本=0.00..31.91 行=3 宽度=20）”“-> 使用 zreverse 在 r 上向后扫描索引（成本=0.00..17727815.24 行=1666667 宽度=20）”“过滤器：(z >= some_value")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:42:23.623

嗯……

在 WHERE 子句中使用的 some_value 是由一个简单的函数计算的，该函数（错误地）定义为 VOLATILE。将其更改为 STABLE 解决了该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:02:25.663

z 上的索引是“普通”btree 索引，没有指定其他内容吗？或者它是以“降序”顺序创建的，即

```
create index <name> on R(z) desc; 
```

?

很可能将相反的顺序索引添加到您拥有的索引上可能会有所帮助。

# android - 如何使用谷歌云打印机在android中打印文本文件

> ID：12780223
> 
> 赞同：1
> 
> 时间：2012-10-08T10:51:42.117
> 
> 标签：android, android-intent, printing, cloud, google-cloud-messaging

我在我的项目中实现了谷歌云打印，但是当我在谷歌云中附加文本文件时，它显示要打印的 1 页但不显示其内容。

那么当文件附加到谷歌云时如何显示文本文件的内容以及如何从用户手机获取现有的谷歌帐户以及如何设置谷歌浏览器以从我的代码打印，以便用户轻松从我的应用程序打印文档.所以请提供代码或一些好的教程以我的要求方式处理谷歌云。

```
Intent printIntent = new Intent(ExportActivity.this, PrintDialogActivity.class);
printIntent.setDataAndType(Uri.fromFile(file), "text/*");
printIntent.putExtra("title", "Dictionary");

public class PrintDialogActivity extends Activity {
    private static final String PRINT_DIALOG_URL = "https://www.google.com/cloudprint/dialog.html";
    private static final String JS_INTERFACE = "AndroidPrintDialog";
    private static final String CONTENT_TRANSFER_ENCODING = "base64";

    private static final String ZXING_URL = "http://zxing.appspot.com";
    private static final int ZXING_SCAN_REQUEST = 65743;

    /**
     * Post message that is sent by Print Dialog web page when the printing dialog needs to be closed.
     */
    private static final String CLOSE_POST_MESSAGE_NAME = "cp-dialog-on-close";

    /**
     * Web view element to show the printing dialog in.
     */
    private WebView dialogWebView;

    /**
     * Intent that started the action.
     */
    Intent cloudPrintIntent;

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.print_dialog);
        dialogWebView = (WebView) findViewById(R.id.webview);
        cloudPrintIntent = this.getIntent();
        WebSettings settings = dialogWebView.getSettings();
        settings.setJavaScriptEnabled(true);
        dialogWebView.setWebViewClient(new PrintDialogWebClient());
        dialogWebView.addJavascriptInterface(new PrintDialogJavaScriptInterface(), JS_INTERFACE);
        dialogWebView.loadUrl(PRINT_DIALOG_URL);
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == ZXING_SCAN_REQUEST && resultCode == RESULT_OK) {
            dialogWebView.loadUrl(intent.getStringExtra("SCAN_RESULT"));
        }
    }

    final class PrintDialogJavaScriptInterface {
        public String getType() {
            return cloudPrintIntent.getType();
        }

        public String getTitle() {
            return cloudPrintIntent.getExtras().getString("title");
        }

        public String getContent() {
            try {
                ContentResolver contentResolver = getContentResolver();
                InputStream is = contentResolver.openInputStream(cloudPrintIntent.getData());
                ByteArrayOutputStream baos = new ByteArrayOutputStream();

                byte[] buffer = new byte[4096];
                int n = is.read(buffer);
                while (n >= 0) {
                    baos.write(buffer, 0, n);
                    n = is.read(buffer);
                }
                is.close();
                baos.flush();

                return Base64.encodeToString(baos.toByteArray(), Base64.DEFAULT);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            return "";
        }

        public String getEncoding() {
            return CONTENT_TRANSFER_ENCODING;
        }

        public void onPostMessage(String message) {
            if (message.startsWith(CLOSE_POST_MESSAGE_NAME)) {
                finish();
            }
        }
    }

    private final class PrintDialogWebClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if (url.startsWith(ZXING_URL)) {
                Intent intentScan = new Intent("com.google.zxing.client.android.SCAN");
                intentScan.putExtra("SCAN_MODE", "QR_CODE_MODE");
                try {
                    startActivityForResult(intentScan, ZXING_SCAN_REQUEST);
                } catch (ActivityNotFoundException error) {
                    view.loadUrl(url);
                }
            } else {
                view.loadUrl(url);
            }
            return false;
        }

        @Override
        public void onPageFinished(WebView view, String url) {
            if (PRINT_DIALOG_URL.equals(url)) {
                // Submit print document.
                view.loadUrl("javascript:printDialog.setPrintDocument(printDialog.createPrintDocument(" + "window." + JS_INTERFACE + ".getType(),window." + JS_INTERFACE + ".getTitle()," + "window." + JS_INTERFACE + ".getContent(),window." + JS_INTERFACE + ".getEncoding()))");

                // Add post messages listener.
                view.loadUrl("javascript:window.addEventListener('message'," + "function(evt){window." + JS_INTERFACE + ".onPostMessage(evt.data)}, false)");
            }
        }
    }
} 
```

# css - CSS3 Box，如何在具有框属性的 div 内拉伸图像

> ID：12780224
> 
> 赞同：0
> 
> 时间：2012-10-08T10:51:42.773
> 
> 标签：css, html, image, stretching

是的！我确实搜索了相关问题，因为这似乎是一个简单的问题！但是，在其他主题上给出的解决方案并不能解决我的问题！

我正在使用一个充满 div 的区域（CSS3 框）。具有多个 div 的多行
每个 div 都有自己的图片，需要拉伸以适应 div 的宽度和高度！（*无论什么分辨率*）。

目前只有宽度拉伸有效。高度拉伸似乎将其拉伸到所有行。

[小提琴](http://jsfiddle.net/h2Ya8/32/)向你们展示[http://jsfiddle.net/h2Ya8/32/](http://jsfiddle.net/h2Ya8/32/)

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:56:38.907

我不确定它是否是您正在寻找的，但添加

```
.product {
    position:relative; 
```

和

```
.product img{
    width:100%;
    height:100%;
    position:absolute;
    bottom:0; right:0;
} 
```

似乎将图像强制为容器的宽度/高度。

检查[**演示**](http://jsfiddle.net/gionaf/MAHZk/)。

你需要保持这个比例吗？

# caching - Symfony2/Twig 中的缓存标签？

> ID：12780228
> 
> 赞同：3
> 
> 时间：2012-10-08T10:52:03.840
> 
> 标签：caching, symfony, twig, zend-cache

我正在寻找类似于 Symfony2 中 Zend_Cache-Tags 的东西。目的是缓存页面的不同部分并在相关数据发生更改时清理缓存部分。

示例：商店概览可以标记为“article-2”、“article-5”...

如何在 symfony2 中管理它？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:59:28.480

Symfony2 支持 ESI（边缘端包含）缓存。您可以仅标记和缓存零件。也许它就是你的意思。

[Symfony2 ESI 缓存](http://symfony.com/doc/2.0/book/http_cache.html#edge-side-includes)

# c# - 获取资产文件夹并在资产文件夹中创建一个文件夹，并使用 Windows 8 在创建文件夹中创建一个文件

> ID：12780230
> 
> 赞同：0
> 
> 时间：2012-10-08T10:52:28.537
> 
> 标签：c#, microsoft-metro

```
StorageFolder InstallationFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;
StorageFile file = await InstallationFolder.CreateFileAsync("MyDocument.Txt", CreationCollisionOption.ReplaceExisting);
await FileIO.WriteTextAsync(file, "Hello"); 
```

错误是：

mscorlib.dll 中出现“System.UnauthorizedAccessException”类型的异常，但未在用户代码中处理

附加信息：访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

如果有这个异常的处理程序，程序可以安全地继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:43:58.230

您可以在[http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh967755.aspx)上的 MSDN 文档中阅读：

> 应用程序的安装目录是只读位置。

# oracle - 插入前删除现有数据

> ID：12780231
> 
> 赞同：0
> 
> 时间：2012-10-08T10:52:29.573
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我想在基于 id 插入之前删除现有数据。因此，如果传入文件中有 id，则应删除现有 id，然后应输入数据。像这样的东西：

之前的数据库表：

```
--------------------------------
| ID  |  DATA                  |
--------------------------------
| 1   |  This is data for ID 1 |
| 2   |  This is data for ID 2 |
| 3   |  This is data for ID 3 |
-------------------------------- 
```

传入文件：

```
-----------------------------------------
| ID  |  DATA                           |
-----------------------------------------
| 1   |  This is new data for ID 1      |
| 2   |  This is new data for ID 2      |
| 4   |  This is new data for ID 4      |
| 1   |  This is also new data for ID 1 |
----------------------------------------- 
```

之后的数据库表：

```
-----------------------------------------
| ID  |  DATA                           |
-----------------------------------------
| 1   |  This is new data for ID 1      |
| 2   |  This is new data for ID 2      |
| 4   |  This is new data for ID 4      |
| 1   |  This is also new data for ID 1 |
| 3   |  This is data for ID 3          |
----------------------------------------- 
```

这是我的程序。

```
CREATE OR REPLACE PROCEDURE absence_records_in AS
   l_v_file      UTL_FILE.file_type;
   l_filename    VARCHAR2(128);
   l_buffer      VARCHAR2(4096);
   l_start       BINARY_INTEGER := 1;
   l_pos         BINARY_INTEGER;
   TYPE typ_cols IS TABLE OF VARCHAR2(4096) INDEX BY BINARY_INTEGER;
   tbl_cols      typ_cols;
   l_col_no      BINARY_INTEGER;
   l_count       BINARY_INTEGER := 0;
BEGIN
   l_filename := 'records.csv';
   l_v_file := UTL_FILE.fopen('DIR_FENIX_IN', l_filename, 'R');
   UTL_FILE.get_line(l_v_file, l_buffer);
   LOOP
       BEGIN
           UTL_FILE.get_line(l_v_file, l_buffer);
           IF l_buffer IS NULL THEN
               EXIT;
           END IF;
           l_col_no := 1;
           l_start  := 1;
           WHILE INSTR(l_buffer, ';', 1, l_col_no) !=0 
           LOOP
               l_pos := INSTR(l_buffer, ';', 1, l_col_no);
               tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start, l_pos - l_start);
               l_start  := l_pos + 1;
               l_col_no := l_col_no + 1;
           END LOOP;
           l_start := l_pos + 1;
           tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start);

           DELETE FROM absence_records WHERE id = tbl_cols(1)
           LOG ERRORS INTO in_errors('File: '||l_filename||' => delete operation')  REJECT LIMIT UNLIMITED;

           l_count := l_count + 1;
               EXCEPTION WHEN NO_DATA_FOUND THEN
           EXIT;
       END;
       BEGIN
           UTL_FILE.get_line(l_v_file, l_buffer);
           IF l_buffer IS NULL THEN
               EXIT;
           END IF;
           l_col_no := 1;
           l_start  := 1;
           WHILE INSTR(l_buffer, ';', 1, l_col_no) !=0 
           LOOP
               l_pos := INSTR(l_buffer, ';', 1, l_col_no);
               tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start, l_pos - l_start);
               l_start  := l_pos + 1;
               l_col_no := l_col_no + 1;
           END LOOP;
           l_start := l_pos + 1;
           tbl_cols(l_col_no) := SUBSTR( l_buffer, l_start);

           INSERT INTO absence_records (id, data)
           VALUES (tbl_cols(1), tbl_cols(2))
           LOG ERRORS INTO in_errors('File: '||l_filename|| ' => insert operation')  REJECT LIMIT UNLIMITED;

           l_count := l_count + 1;
               EXCEPTION WHEN NO_DATA_FOUND THEN
           EXIT;
       END;
   END LOOP;
   UTL_FILE.fclose(l_v_file);        
END absence_records_in; 
```

所以简而言之，我需要启动一个循环，只删除比较中的数据，然后再启动另一个循环插入数据。有任何想法吗？提前致谢 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:15:48.897

尝试以下操作：

1.  在 END 之后立即关闭具有异常处理程序的第一个 BEGIN 的第一个循环。
2.  关闭文件。
3.  再次打开文件。
4.  在具有异常处理程序的第二个 BEGIN 之前立即开始另一个循环。

请注意，您可以只执行 UTL_FILE.fseek(file, 0) 而不是 (2) 和 (3)。

分享和享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:07:15.210

我会通过以下方式做到这一点：

1.  将文件中的数据读入新表 TEMP
2.  删除 ID 位于 TEMP 中的所有记录，例如 DELETE FROM TABLE WHERE TABLE.ID IN (SELECT ID FROM TEMP)
3.  将 TEMP 中的所有记录添加到 TABLE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:59:24.050

对上述内容略有不同的转折是合并/更新数据。看看如何在 Oracle 中合并数据：[Oracle：如何 UPSERT（更新或插入表？）](https://stackoverflow.com/questions/237327/oracle-how-to-upsert-update-or-insert-into-a-table)

# ruby-on-rails - 在 Facebook 画布中使用 Devise 进行身份验证

> ID：12780234
> 
> 赞同：1
> 
> 时间：2012-10-08T10:52:39.607
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, devise

我正在创建一个 Canvas Facebook 应用程序。在此画布中，我想展示一个使用 rails (v.3.2.8) 构建的应用程序，该应用程序的身份验证部分由 Devise 2.1.2 管理。我遵循了有关服务器端身份验证的 Facebook 文档。

我的画布 url 是一个控制器操作，它执行以下操作： - 获取 facebook signed_request，对其进行解码，重定向到 facebook 授权请求页面 - 一旦用户授权应用程序，并且 facebook 令牌被发送回我的画布 url，我获取用户信息，将它们保存在我的用户模型中并使用设计登录用户。

我的问题是：即使在我登录用户之后，我在画布 chrome 中看到的只是退出页面。即使用户正确保存在数据库中，登录步骤也不起作用，当我检查会话时，它是空的？

有人可以帮我吗？谢谢。这是画布动作的代码：

```
def canvas
    @encoded_sig, @payload = params[:signed_request].split('.')
    @payload += '=' * (4 - @payload.size.modulo(4))
    # Decode the signed_request parameter
    @signature = Base64.decode64(@encoded_sig)
    @datas = JSON.parse(Base64.decode64(@payload))
    # TODO Check Encoding Algorithm
    # TODO Check Signature
    if( !@datas.has_key?("user_id") && !@datas.has_key?("oauth_token") )
      @oauth_url = "https://www.facebook.com/dialog/oauth/?client_id=#{@facebook_config[:app_id]}&redirect_uri=#{@facebook_config[:canvas_page_url]}&scope=email,user_location,user_relationships"
      # render
    else
      user_datas = FbGraph::User.me(@datas["oauth_token"]).fetch
      @user = User.find_by_email(user_datas.email)
      if @user.nil?
        @user = User.new(first_name: user_datas.first_name, last_name: user_datas.last_name, email: user_datas.email , password: SecureRandom.hex(10), terms: true, fb_uid: user_datas.raw_attributes[:id], access_token: @datas["oauth_token"])
        @user.save!
        @user.confirm!
        @user.create_coachee_profile(name: user_datas.name, gender: user_datas.gender, location: '', language: user_datas.locale, relationship_status: user_datas.relationship_status, user_id: @user.id)
        sign_in(:user, @user)
        redirect_to user_coachee_profile_url(current_user.id)
      else
        sign_in(:user, @user)
        redirect_to root_url
      end
    end
  end 
```

# javascript - 智能电视后台应用

> ID：12780239
> 
> 赞同：18
> 
> 时间：2012-10-08T10:52:46.827
> 
> 标签：javascript, samsung-smart-tv

我在三星智能电视上有一个应用程序。我正在从 Web 服务获取数据并在我的应用程序中显示这些数据。

我定期获取数据并相应地更新应用程序。

我想将此操作作为后台进程运行，因此它会下载数据，如果有更新，我会在用户看电视时警告用户。

我想要的另一件事是在电视启动时启动应用程序，这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-17T13:13:53.707

只有 'ticker' 类型的应用程序可以在后台运行。它在欧洲不受支持，并且不会通过三星应用商店的认证。

三星智能电视支持推送通知 ( [samsungdforum.com/Guide/art00080/index.html](http://samsungdforum.com/Guide/art00080/index.html) )。它将允许您在屏幕上显示弹出消息，并能够启动您的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-17T05:41:12.237

You cannot auto-start application on TV launch.

The only way is to use custom firmware like SamyGo (http://www.samygo.tv/)

About the "background process"... as far as we assume that JavaScript's `setTimeout` or `setInterval` can be used to execute application's "internal" background process, there is no problem - Just DO it! :)

But if you were thinking about system's background process - for ex. crontab of device - it's impossible.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-03T10:19:52.210

for your second doubt Auto launch of the application is supported in ticker applications only and there is property in config file of the ticker widget :

```
"<ticker itemtype="boolean">y</ticker>" 
```

if u mark it as y(as above) than you can set up auto launch of the app from ***Menu->smart Hub->Apps settings->auto ticker.*** in 2014 Samsung Smart TV models.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-19T19:43:16.140

由于电视的内存有限，我不推荐使用 setInterval 或 setTimout 等后台进程。您可能有相同的刷新按钮。他们必须有一些 js api 来控制电视应用程序的内部方法（不确定）。无论如何，如果您真的想使用间隔/超时，请不要忘记清除它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-26T08:56:28.023

如此处所示[，](http://html5test.com/compare/browser/samsungsmarttv12.html)三星智能电视支持[WebSocket 。](http://www.websocket.org/)当出现更新时，您的服务器应用程序可以触发 TV 应用程序。对于您的情况，它比使用 ajax 轮询服务器更有效。

（编辑）我写了一个示例应用程序来演示： [https ://github.com/aksakalli/socket.io-hello-world](https://github.com/aksakalli/socket.io-hello-world)

（编辑 2）我看到您的问题与平台限制有关。我的回答只是关于可以应用的方法，然后我在三星智能电视上的经验非常有限。

# ios - 从通讯录中选择电子邮件 - iOS

> ID：12780240
> 
> 赞同：1
> 
> 时间：2012-10-08T10:52:49.893
> 
> 标签：ios, xcode, addressbook, abpeoplepickerview

我正在尝试从通讯簿中选择用户想要的电子邮件 ID。当用户选择工作电子邮件或家庭电子邮件时，应将相应的值添加到变量中。对此有何建议？下面附上我的代码：

```
-(BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person property:(ABPropertyID)property identifier:(ABMultiValueIdentifier)identifier{
if(property == kABPersonEmailProperty){
    CFStringRef value, label;
    ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFIndex count = ABMultiValueGetCount(multi);
    if (count == 1)
    {
        value = ABMultiValueCopyValueAtIndex(multi, 0);
        email = (__bridge NSString*) value;
        NSLog(@"self.emailID   %@",email);
        CFRelease(value);
    }
    else
    {

        for (CFIndex i = 0; i < count; i++)
        {
            label = ABMultiValueCopyLabelAtIndex(multi, i);
            value = ABMultiValueCopyValueAtIndex(multi, i);
                            // check for Work e-mail label
            if (CFStringCompare(label, kABWorkLabel, 0) == 0)
            {
                email = (__bridge NSString*) value;
                NSLog(@"self.emailID   %@",email);
                NSLog(@"%@",(__bridge NSString *)label);

            }

            if(CFStringCompare(label, kABHomeLabel, 0) == 0)
            {
                email = (__bridge NSString*) value;
                NSLog(@"self.emailID   %@",email);
            }

            CFRelease(label);
            CFRelease(value);
        }
    }
    CFRelease(multi);
    [self displayPerson:person];

}else{
    UIAlertView *testAlert = [[UIAlertView alloc] initWithTitle:@"alert" message:@"Please choose a valid email" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Cancel", nil];
    testAlert.tag = 100;
    [testAlert show];
}

  return NO;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T13:53:41.327

```
-(NSArray *)getAllContacts 
```

{ CFErrorRef *error = nil;

```
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, error);

__block BOOL accessGranted = NO;
if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    });
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);

}
else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {

    ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(NULL, error);
    ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByFirstName);
    CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);
    NSMutableArray* items = [NSMutableArray arrayWithCapacity:nPeople];

    for (int i = 0; i < nPeople; i++)
    {

        NSMutableDictionary *dict = [[NSMutableDictionary alloc]init];

        ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);

        //get First Name and Last Name

        NSString *firstNames = (__bridge NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty);
        if (!firstNames)
            firstNames=@"";

        NSString *lastNames =  (__bridge NSString*)ABRecordCopyValue(person, kABPersonLastNameProperty);
        if (!lastNames)
            lastNames=@"";

        // get contacts picture, if pic doesn't exists, show standart one

        NSData  *imgData = (__bridge NSData *)ABPersonCopyImageData(person);
        UIImage *img = [UIImage imageWithData:imgData];
        if (!img) {
            img = [UIImage imageNamed:@"noImage.png"];
        }

        //get Phone Numbers

        NSMutableArray *phoneNumbers = [[NSMutableArray alloc] init];

        ABMultiValueRef multiPhones = ABRecordCopyValue(person, kABPersonPhoneProperty);
        for(CFIndex i=0;i<ABMultiValueGetCount(multiPhones);i++) {

            CFStringRef phoneNumberRef = ABMultiValueCopyValueAtIndex(multiPhones, i);
            NSString *phoneNumber = (__bridge NSString *) phoneNumberRef;
            [phoneNumbers addObject:phoneNumber];

            //NSLog(@"All numbers %@", phoneNumbers);

        }

        //get contact address

        NSMutableArray *contactAddress = [NSMutableArray new];
        ABMultiValueRef address = ABRecordCopyValue(person, kABPersonAddressProperty);
        // Individual Person Address From Contacts

        for (CFIndex j = 0; j < ABMultiValueGetCount(address); j++) {

            CFDictionaryRef addressRef = ABMultiValueCopyValueAtIndex(address, j);

            NSDictionary *addressDict = (__bridge NSDictionary*)addressRef;

            NSString *Street = ([[addressDict objectForKey:@"Street"] length] == 0) ?
            @"" : [addressDict objectForKey:@"Street"];

            NSString *city = ([[addressDict objectForKey:@"City"] length] == 0) ? @"" :
            [addressDict objectForKey:@"City"];

            NSString *State = ([[addressDict objectForKey:@"State"] length] == 0)
            ? @"": [addressDict
                    objectForKey:@"State"];

            NSString *zipCode = ([[addressDict objectForKey:@"ZIP"] length] == 0) ?
            @"" : [addressDict objectForKey:@"ZIP"];

            NSString *country = ([[addressDict objectForKey:@"Country"] length] == 0) ?
            @"" : [addressDict objectForKey:@"Country"];

            NSString *countryCode = ([[addressDict objectForKey:@"CountryCode"] length]
                                     == 0) ? @"" : [addressDict objectForKey:@"CountryCode"];

            NSLog(@"%@ %@ %@ %@ %@ %@", Street, city, State, zipCode, country,
                  countryCode);
            [contactAddress addObject:addressDict];

        }

        //get Contact email

        NSMutableArray *contactEmails = [NSMutableArray new];
        ABMultiValueRef multiEmails = ABRecordCopyValue(person, kABPersonEmailProperty);

        for (CFIndex i=0; i<ABMultiValueGetCount(multiEmails); i++) {
            CFStringRef contactEmailRef = ABMultiValueCopyValueAtIndex(multiEmails, i);
            NSString *contactEmail = (__bridge NSString *)contactEmailRef;

            [contactEmails addObject:contactEmail];
            // NSLog(@"All emails are:%@", contactEmails);

        }
        if ([contactEmails count] != 0) {
            NSData* pictureData = UIImagePNGRepresentation(img);
            [dict setObject:firstNames forKey:@"firstname"];
            [dict setObject:lastNames forKey:@"lastname"];
            [dict setObject:pictureData forKey:@"image"];
            [dict setObject:phoneNumbers forKey:@"number"];
            [dict setObject:contactEmails forKey:@"email"];
            [dict setObject:contactAddress forKey:@"address"];

            [items addObject:dict];
        }
    }
    return items;

} else {

    return NO;
} 
```

}

# php - 将 PHP 插入外部 .js 文件

> ID：12780243
> 
> 赞同：1
> 
> 时间：2012-10-08T10:53:04.107
> 
> 标签：php, javascript, wordpress

我需要能够将一些 PHP 插入到外部 .js 文件中。这可能吗？我已经使用基本滑块创建了一个滑块，并且需要将页面标题作为滑块顶部的标记。

这是 .js 文件当前用于生成标记的代码。

```
var slidenum    = key + 1, 
var marker = $('<li><a href="#">'+ slidenum +'</a></li>'); 
```

我需要用 WordPress 函数“get_title”替换“+ slidenum +”。这个可以用php代替吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:58:08.260

您可以在 php 文件中定义 JS 变量，然后在外部 js 中使用这些变量。

例如，在您的一个 PHP 文件中，您可以添加：

```
<script type="text/javascript">
// variable1 = number
variable1 = <?php echo $var1; ?>;
// variable2 = string
variable2 = "<?php echo $var2; ?>";
</script> 
```

对于你的问题：

```
<script type="text/javascript">
slidenum = "<?php the_title(); ?>";
</script> 
```

the_title() 参考：[http ://codex.wordpress.org/Function_Reference/the_title](http://codex.wordpress.org/Function_Reference/the_title)

**更新 - 循环：**

```
<?php 
$slider_titles = array();
if ( have_posts() ) : while ( have_posts() ) : the_post(); 
  // your codes go here
  $slider_titles[] = get_the_title(); // adds the title to the array  
endwhile; endif;
?>

<script type="text/javascript">
slidenum = <?php echo json_encode($slider_titles); ?>;
</script> 
```

当你的循环结束时，你添加 javascript 部分

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:24:11.060

有些人试图告诉您为此使用 Ajax。在这种情况下，这不是解决方案。该变量在页面加载的生命周期内是静态的，因此需要继续返回服务器以获取该值。

其他人建议将服务器设置为将 JS 文件解析为 PHP，以便您可以将 PHP 代码嵌入其中。这也不是一个好的答案，因为您将失去所有浏览器缓存 JS 文件的能力，这会降低您的网站速度并增加您的带宽成本。

解决方案是简单地在页面标题中添加一个单独的 JS 代码块——即`<script>`在页面模板中添加一个小标签，设置有问题的变量。

然后，该变量将可以在您在页面其他位置运行的任何 JS 代码中作为全局变量访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T10:57:37.983

是的，您可以用 get_title 替换 slidenum。不，您不能使用 javascript 或在运行时执行此操作。为此，您需要使用 AJAX。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:58:37.083

不是直接的。你可以跳过几个圈来完成它。

问题是 .js 根本不会被 PHP 解释。

因此，如果必须，您可以使用 mod_rewrite 等来假装您的 php 脚本实际上是一个 .js。

或者将 js 文件从 PHP 完全写入文件系统。

或者使用 XHR (Ajax) 来获取某个值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:05:25.643

另一个解决方案，不是最好的恕我直言，是告诉 Apache 将 js 文件解析为 php 文件。只需将其放在您的 .htaccess 文件中：

```
AddType application/x-httpd-php .js
AddHandler x-httpd-php5 .js

<FilesMatch "\.(js|php)$">
SetHandler application/x-httpd-php
</FilesMatch> 
```

# android - SQLiteAssetHelper 生成错误

> ID：12780248
> 
> 赞同：1
> 
> 时间：2012-10-08T10:53:21.033
> 
> 标签：android, sqlite, android-sqlite, android-assets

我正在使用 SqliteAssetHelper 从资产文件夹导入数据库并将其复制到标准数据库应用程序文件夹。

虽然它的工作方式非常随机......当我用新的资产文件夹中的 .zip 文件替换我的应用程序并运行应用程序时，我收到了这个错误

```
E/AndroidRuntime(20036): Caused by: com.readystatesoftware.sqliteasset.SQLiteAssetException: Missing databases/adinspect.zip file in assets or target folder not writable 
```

但我确信文件“adinpect.zip”在那里。我刚刚更新了我的数据库架构，重新压缩它并替换了资产文件夹中的文件。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:40:49.017

确保在替换文件后刷新资产文件夹。有时 eclipse 不会注册文件更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T17:08:32.247

我有一个类似的问题，但我也错过了命名资产/数据库目录（我有资产/数据库）。

只是想我会添加这个以防其他人遇到问题。

# android - Android - 如何防止电子邮件应用程序被滥用于垃圾邮件？

> ID：12780249
> 
> 赞同：0
> 
> 时间：2012-10-08T10:53:21.027
> 
> 标签：android, email, spam-prevention

我正在构建一个允许用户发送电子邮件的 Android 应用程序。（通过 PHP 提供）
如何防止应用程序被滥用于垃圾邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:02:50.940

垃圾邮件发送者希望接触到很多人，因此您可以计量发送速率。一条消息中不允许超过 10 个收件人。不允许每 30 秒发送超过一条消息。不支持脚本发送（即不处理广播意图）。如果应用程序尝试通过电子邮件发送联系人中超过 3 个连续条目，则显示警告。如果您真的想一路走下去，请分析电子邮件的内容并将其与已知的垃圾邮件进行比较。

# javascript - 转发到目录名称更改的 html 文件

> ID：12780251
> 
> 赞同：0
> 
> 时间：2012-10-08T10:53:23.823
> 
> 标签：javascript

我的文件夹结构如下

-> 父文件夹
--->*版本*_HTML（文件夹）
-----> index.html（文件）

我想在*版本*_HTML 级别使用带有 javascript 的 HTML 文件，它将在子文件夹中查找文件 index.html 并打开它，因为文件夹名称会不断变化。

HTML 文件将从本地目录运行，不会托管在服务器或 WWW 上。

我也对替代解决方案持开放态度。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:13:02.303

据我了解，您想从网页在服务器上创建一个文件，仅使用 Javascript 是不可能的，而且对于非开发人员而言，这样做的方法并非易事。

父母的名字并不重要，因为你可以问“在我的父文件夹上创建一个文件”，但它必须通过服务器端语言来完成，你可以查看[PHP](http://www.tizag.com/phpT/filecreate.php)、[python](http://www.tutorialspoint.com/python/python_files_io.htm)或[nodejs](https://stackoverflow.com/questions/2496710/nodejs-write-to-file)。

当您希望服务器创建此文件时，您还需要从 Javascript 向服务器发送[AJAX请求。](http://api.jquery.com/jQuery.ajax/)我坚持认为，对于非开发人员来说并不容易。

# vb.net - 使用 vb.net 插入 mongodb

> ID：12780258
> 
> 赞同：0
> 
> 时间：2012-10-08T10:53:47.313
> 
> 标签：vb.net, mongodb

我在使用 vb.net 插入 mongodb 时遇到问题。

```
Public Sub runMongoDBQuery(ByVal nameDatabase As String, ByVal nameCollection As String, ByVal queryBson As BsonDocument, ByVal serverString As String)

        Dim mongo1 As MongoServer = MongoServer.Create("mongodb://localhost/?safe=true") 
        mongo1.Connect()
        Dim db = mongo1.GetDatabase(nameDatabase)
        Dim collection1 = db(nameCollection) 
        collection1.Save(queryBson)// this is hang
        mongo1.Disconnect()

 End Sub 
```

当我使用此功能时，它运行平稳并突然挂起。

它不会抛出异常而是挂起。

问题很少出现。

所做的所有功能都是保存 queryBson

我会：

*   检查queryBson的内容
*   查看mongodb服务器的日志
*   获得更多信息后更新问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:12:52.730

我设法通过重新启动 mongodb 并删除日志来解决这个问题。感谢 Cirrus 的评论。

日志是 3GB，我强烈怀疑它是罪魁祸首。

这么高的日志是没用的，因为文本编辑器反正也打不开。删除日志而不重新启动 mongodb 会导致不再创建日志的副作用。

我很快会问另一个问题如何限制 mongodb 的日志，也许在数据库论坛上。

这个问题有后续： [https ://dba.stackexchange.com/questions/25658/how-to-keep-mongodb-log-small](https://dba.stackexchange.com/questions/25658/how-to-keep-mongodb-log-small)

# c - 从另一个线程重绘opengl

> ID：12780266
> 
> 赞同：0
> 
> 时间：2012-10-08T10:54:02.507
> 
> 标签：c, opengl, gtk, glut

我正在做一个项目，我有一个 opengl 窗口和一个 gtk 窗口，现在我希望能够从 gtk 控制 opengl。

在 Gtk 窗口中，我有一个调用图像生成器的按钮，在此之后我想重绘 opengl 窗口以便我可以看到结果，但是如果我从按钮单击回调调用显示函数，则没有任何反应。到目前为止唯一可行的想法是当我将 glutIdleFunc 设置为我的显示函数时，opengl 窗口会不断重绘，但在我看来，必须有更好的方法。我还尝试了 glutTimerFunc 来检查条件变量，但还有更好的方法。

我的想法是能够直接告诉/信号/调用 opengl 显示函数或强制 glutMainLoop 进行迭代，每当我单击按钮时，但我真的不知道该怎么做。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:40:19.500

> 有任何想法吗？

不要使用 GLUT 或 GLFW 或任何其他 OpenGL 框架。您正在使用 GTK+，所以坚持下去。GTK+ 有一个 OpenGL 小部件。用那个。由于您的 OpenGL 代码与 GTK+ 很好地集成在一起，因此您可以使用 GLib（由 GTK+ 使用）的正常信号事件机制，无需多言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:32:22.400

首先，我真的建议你*停止*使用普通的 GLUT。一旦您的应用程序发展为您描述的那种需求（多窗口、GTK+、...），GLUT 就不够灵活，无法成为可行的解决方案。

看看，例如[GLFW](http://www.glfw.org/)作为一个合适的替代品，它更灵活，实际上足以让实际应用程序使用。

其次，你在标题中提到了线程，但在问题正文中没有提到，所以你是否真的在使用线程有点不清楚。如果是，那么您需要研究线程安全通信。GTK+ 所基于的 glib 库为此提供了一些 API，请查看它们。如果不使用线程，您可能会通过一些直接的函数调用而侥幸逃脱，只是使 OpenGL 状态无效，以便重新绘制。

# mysql - MySQL：这个 Join 查询可以优化吗？

> ID：12780278
> 
> 赞同：0
> 
> 时间：2012-10-08T10:54:51.590
> 
> 标签：mysql, query-optimization

我有两张桌子。这些表的创建命令如下

```
CREATE TABLE `invoice` (
  `Id` bigint(20) NOT NULL,
  `VersionNumber` int(11) NOT NULL,
  `CreationDate` datetime default NULL,
  `ModificationDate` datetime default NULL,
  `CreateBy` bigint(20) default NULL,
  `ModifyBy` bigint(20) default NULL,
  `BusinessId` varchar(255) character set utf8 default NULL,
  `Status` int(11) default NULL,
  `VendorId` bigint(20) default NULL,
  `CustomerId` bigint(20) default NULL,
  `OrderDate` date default NULL,
  `ExpectedDate` date default NULL,
  `DeliveryDate` date default NULL,
  `InvoiceFor` int(11) default NULL,
  `Reference` varchar(255) character set utf8 default NULL,
  `Agent` varchar(255) character set utf8 default NULL,
  `BnAgent` varchar(255) character set utf8 default NULL,
  `Note` varchar(255) character set utf8 default NULL,
  `HasVoucher` char(1) character set utf8 default NULL,
  PRIMARY KEY  (`Id`),
  KEY `CustomerId` (`CustomerId`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `invoiceitem` (
  `Id` bigint(20) NOT NULL,
  `VersionNumber` int(11) NOT NULL,
  `CreationDate` datetime default NULL,
  `ModificationDate` datetime default NULL,
  `CreateBy` bigint(20) default NULL,
  `ModifyBy` bigint(20) default NULL,
  `BusinessId` varchar(255) default NULL,
  `Status` int(11) default NULL,
  `InvoiceId` bigint(20) default NULL,
  `ProductId` bigint(20) default NULL,
  `PackageQty` decimal(19,5) default NULL,
  `PackagePrice` decimal(19,5) default NULL,
  `ItemPerPackage` decimal(19,5) default NULL,
  `ItemQty` decimal(19,5) default NULL,
  `ItemPrice` decimal(19,5) default NULL,
  `StoreQty` decimal(19,5) default NULL,
  `RevenuePercent` decimal(19,5) default NULL,
  `PurchasePrice` decimal(19,5) default NULL,
  `Vat` decimal(19,5) default NULL,
  `TotalAmount` decimal(19,5) default NULL,
  `InvoiceItemFor` int(11) default NULL,
  `LifeTimeUptoDate` datetime default NULL,
  PRIMARY KEY  (`Id`),
  KEY `invoiceid_productid` (`InvoiceId`,`ProductId`),
  KEY `ProductId` (`ProductId`),
  CONSTRAINT `FK_invoiceitem` FOREIGN KEY (`InvoiceId`) REFERENCES `invoice` (`Id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

**此查询的目的是** 向管理员显示发票列表。他需要查看发票日期、发票编号、客户 ID、产品 ID，以及客户是否在之前购买过该产品，然后再查看之前的日期。

**现在查询**

```
SELECT iv.id, iv.CustomerId, ii.ProductId, MAX(iv2.orderdate) AS PriviousDate
FROM invoice AS iv
INNER JOIN invoice AS iv2 
    ON iv.CustomerId=iv2.CustomerId 
    AND iv.OrderDate>iv2.OrderDate
INNER JOIN invoiceItem AS ii 
    ON iv.id=ii.invoiceId 
INNER JOIN invoiceItem AS ii2 
    ON  iv2.id=ii2.invoiceId 
    AND ii.ProductId=ii2.ProductId
WHERE iv.Status=0 
    AND ii.Status=0 
    AND iv2.Status=0 
    AND ii2.Status=0
GROUP BY ii.ProductId, iv.CustomerId 
```

这里 iv.id 和 ii.id 是主键 customerId 和 Productid 字段也是索引和 invoiceId 是foreginkey (iv.id=ii.invoiceId )

我在我的 MySql 服务器（本地）中运行这个查询，但大多数时候我都超时了。如何优化此查询？

该查询的解释如下： ![在此处输入图像描述](../Images/a76c0bf70e894dd58c24ce0df1f6be17.png)

现在我申请

```
create index invoiceid_productid 
  on invoiceItem(invoiceId, productId) 
```

之后解释结果是 ![在此处输入图像描述](../Images/ed2dba9c788d8be538c90557a7771e51.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:11:23.787

这里不多（看看你的索引是什么会很有帮助）但假设发票ID随着发票日期的增加而增加......我怀疑这可能会稍微快一点：

```
SELECT iv.id, iv.CustomerId, ii.ProductId, MAX(iv2.orderdate) AS PriviousDate
FROM invoice AS iv
INNER JOIN invoice AS iv2 
   ON iv.CustomerId=iv2.CustomerId 
   AND iv.id>iv2.id
INNER JOIN invoiceItem AS ii 
   ON iv.id=ii.invoiceId 
INNER JOIN invoiceItem AS ii2 
   ON  iv2.id=ii2.invoiceId 
   AND ii.ProductId=ii2.ProductId
   AND ii.invoiceId>ii2.invoiceId
WHERE iv.Status=0 
   AND ii.Status=0 
   AND iv2.Status=0 
   AND ii2.Status=0
GROUP BY ii.ProductId, iv.CustomerId 
```

但是您确实需要在 invoiceItem 表中的 ProductId、Status 和 InvoiceId 上建立一个索引，然后它才能明显更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:10:12.103

查看您的`EXPLAIN`结果，问题显然出在`invoiceItem`表格上。它有 200,000 行，MySQL 没有使用任何索引来访问它。

因此，您应该考虑创建索引以加快对其的访问速度。

我模拟了你的桌子：

```
create table invoice (
  id int auto_increment not null,
  customerid int not null,
  orderdate timestamp not null,
  status int default 0 not null,
  primary key(id)
);
create table invoiceItem (
  id int auto_increment not null,
  invoiceId int not null,
  productId int not null,
  status int default 0 not null,
  primary key (id)
); 
```

我创建了这些索引：

```
create index invoiceId on invoiceItem(invoiceId);
create index cod on invoice(customerid, orderdate);
create index stat on invoice(status); 
```

我的 EXPLAIN （在空表上）现在所有表都使用 type `ref`。

您还可以查看适用于 MySQL 的本[教程](http://schimpf.es/mysql-explain-tutorial/);-)

# jquery - ajax后图像不会自动加载

> ID：12780281
> 
> 赞同：0
> 
> 时间：2012-10-08T10:54:59.513
> 
> 标签：jquery, ajax, prettyphoto

我有一个关于漂亮照片的问题。所以我在页面上有五个缩略图点击其中一个我的jquery ajax请求启动并且在它完成加载页面上的照片后我希望图像自动打开但它不只是更新我的缩略图而且我必须再次单击缩略图。有人知道我该怎么做吗？她是我的ajax代码

```
function ajaxcall(inf) {
   var url= 'galerie.action';
   var data = {data : inf};
   var div=inf;
     $.get(url,data, function(raspuns){
          $('#galerie'+div).html(raspuns);
     });
 }; 
```

这是缩略图背后的代码：

这是输出代码：

```
<div id="galerie1" class="ngg-gallery-galerie1">
            <div id="ngg-image-01" class="ngg-gallery-thumbnail-box">
                    <div class="ngg-gallery-thumbnail">
                    <a window.onload="getName()" rel="prettyPhoto[set_1]" href="/daitoart/userfiles/images/inside/galerie/1/Jeep Tours-7day1-6-Brasov-Rasnov Fort.jpg" alt=""><br>
                    </a></div></div></div>

                <div id="ngg-image-01" class="ngg-gallery-thumbnail-box">
                <div class="ngg-gallery-thumbnail">
                <a window.onload="getName()" rel="prettyPhoto[set_1]" href="/daitoart/userfiles/images/inside/galerie/1/Jeep Tours-7day1-7-Brasov-center.jpg" alt=""><br>
                </a></div></div> 
```

# jquery - jquery iButton 插件导致元素在 iOS 6 中不可点击

> ID：12780282
> 
> 赞同：3
> 
> 时间：2012-10-08T10:54:59.047
> 
> 标签：jquery, ios, jquery-plugins, checkbox, ios6

在 iOS 5 及以下版本中运行良好，[jQuery iButton 插件](http://www.givainc.com/labs/ibutton_jquery_plugin.htm)在 iOS 6 中仍然有效，但会导致页面上的多个其他元素不再可点击。（发生在 chrome 和 iPad 上的 safari 中）

当触摸这些元素时，它们不会集中注意力，而是它们的父元素。

这似乎与使用的 jQuery 版本无关。

有谁知道可能的解决方法？

或者有人对 iOS 风格的开/关按钮的替代库提出建议。（还应该支持触摸/滑动等）

*由于我们正在开发一些封闭的后端应用程序，因此很遗憾无法发布代码示例。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T11:20:49.853

找到了解决方案。

替换这个：

```
$(document).bind("mouseup.iButton_" + id + " touchend.iButton_" + id, function(e) { 
```

有了这个：

```
$(document).delegate(".ibutton-container","mouseup.iButton_" + id + " touchend.iButton_" + id, function(e) { 
```

在**ibutton**插件中。

（在大于 1.7 的 jquery 版本中，您应该使用`on()`而不是`delegate()`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-19T08:57:57.787

这可以为您节省几秒钟的谷歌搜索时间。我使用 .on 方法为 jQuery 版本 1.8.3 (> 1.7) 实施了上面建议的修复。经测试可在**iOS 6.0.1**上运行：

```
$(document).on("mouseup.iButton_" + id + " touchend.iButton_" + id, ".ibutton-container", function(e) { 
```

# database - 试图从我的报告中的另一个表中获取描述

> ID：12780284
> 
> 赞同：0
> 
> 时间：2012-10-08T10:55:09.410
> 
> 标签：database, vba, ms-access

```
Private Sub Report_Open(Cancel As Integer)

Dim strResultDesc As String

strResultDesc = DLookup("Description", "[products/stock]", "[Product Code] = Me.txtResultPC.Value")

Text20.Value = strResultDesc

End Sub 
```

这是我目前拥有的代码，我收到一条错误消息，指出存在以下问题：

```
[Product Code] = Me.txtResultPC.Value 
```

任何人都可以发现任何东西吗？

更新：

也试过这种方法，

```
Private Sub Report_Open(Cancel As Integer)

Dim strResultDesc As String

strResultDesc = DLookup("Description", "[products/stock]", "[products/stock].[Product Code] = [Result PC]")

Me.Text20.Value = strResultDesc

End Sub 
```

谢谢，

鲍勃·P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:46:00.373

您必须输入符号“&”。请参阅下面的示例。

```
strResultDesc = DLookup("Description", "[products/stock]", "[Product Code] =" & Me.txtResultPC.Value) 
```

# google-chrome - Chrome 打包应用程序上的输入类型颜色

> ID：12780285
> 
> 赞同：1
> 
> 时间：2012-10-08T10:55:11.110
> 
> 标签：google-chrome, html-input

我想知道如何`input[type=color]`在 Chrome Packaged App 上使用。当我在浏览器上打开 HTML 文件时，`input[type=color]`效果很好，它会弹出颜色选择器，但是当我在应用程序上使用它时，它什么也没做。请帮助我如何启用此 HTML5 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-08T17:56:37.353

您是否正在从移动设备查看应用程序？设备的 Web 浏览器可能不支持`input[type=color]`. 看起来iOS目前没有。请参阅[兼容性表](http://caniuse.com/#feat=input-color)。

# wordpress - 在 WordPress 中注册新的帖子类型

> ID：12780286
> 
> 赞同：0
> 
> 时间：2012-10-08T10:55:13.420
> 
> 标签：wordpress, custom-post-type

```
function ms_register_blog_posts_custom_post() {
    $labels = array('name' => 'تدوينات','singular_name' => 'تدوينة','menu_name' => 'تدوينات');
    $args = array( 'public' => true, 'show_ui' => true,'labels' => $labels,  'supports' => array( 'title', 'editor', 'author', 'thumbnail', 'comments' ),'capability_type' => 'post','has_archive' => true, 'query_var' => true,);
    register_post_type( 'blog', $args );
    flush_rewrite_rules();
}
add_action( 'init', 'ms_register_blog_posts_custom_post' ); 
```

我正在使用此功能注册一个新的帖子类型，当我删除`flush_rewrite_rules();`并前往 mysite.com/blog 时，它会给出一个 404 页面，当我保留它时它工作正常。但我知道你不能在你的网站上的每一个页面访问都刷新重写规则。那么我的代码有什么问题？

# html - 图像周围的浮动文本，位于：右下角

> ID：12780292
> 
> 赞同：1
> 
> 时间：2012-10-08T10:55:33.420
> 
> 标签：html, css, css-float

我正在寻找一种方法，在右下角的图像周围浮动文本。

这是我不工作的版本 [http://jsfiddle.net/xaqyb/](http://jsfiddle.net/xaqyb/)

**HTML**

```
<div id="box">
<img width="120" src="http://www.ordnung-statt-chaos.de/wp-content/themes/thesis/rotator/sample-4.jpg" />
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.   
</div> 
```

**CSS**

```
#box { 
    width: 250px; 
    min-height: 150px; 
    position: relative; 
    border: 1px solid #ccc; 
   background: #f7f7f7; 
    padding: 10px; 
}

#box img {
    display: block; 
    float: right; 
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:20:10.440

你可以使用 span 到 p 标签中，然后将 img 放入 span 例如：

```
<div id="wrapper">
<p>
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren,<span>
<img width="100px" src="http://www.ordnung-statt-chaos.de/wp-content/themes/thesis/rotator/sample-4.jpg" />
</span> no sea takimata sanctus est Lorem ipsum dolor sit amet.
</p> 
```

这种CSS风格是

```
#wrapper { width: 250px; min-height: 150px; border: 1px solid #ccc;background:#f7f7f7; padding: 10px }
#wrapper img { display: block}
#wrapper span{display: block;float: right;} 
```

# android - Mono for Android - 获取可执行文件名称

> ID：12780295
> 
> 赞同：0
> 
> 时间：2012-10-08T10:55:42.357
> 
> 标签：android, mono

在 Android 的 Mono 中，我试图提取（在运行时）带有路径的应用程序名称，但我找不到任何工作（有几个小时我在互联网上搜索并尝试，但似乎没有任何工作）。我需要名称来获取 FileVersionInfo.GetVersionInfo(fn);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:07:42.277

如果您想在运行时获取应用版本，可以尝试使用以下代码。

```
var appVersion = PackageManager.GetPackageInfo(PackageName, 0).VersionCode; 
```

这是一些以编程方式获取包名称的代码

```
var actMngr = (ActivityManager)GetSystemService (Context.ActivityService);
var runningPkg = actMngr.GetRunningTasks(1)[0].TopActivity.PackageName;

PackageManager pm = this.PackageManager;
ApplicationInfo ai = pm.GetApplicationInfo(runningPkg, 0); 
```

请记住，它需要在您的清单中设置 GET_TASKS 权限...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T16:14:49.140

试试这个代码：

```
Assembly.GetExecutingAssembly().GetName().Version 
```

# asp.net-mvc-3 - 如何在实体框架中重命名实体

> ID：12780297
> 
> 赞同：1
> 
> 时间：2012-10-08T10:55:54.400
> 
> 标签：asp.net-mvc-3, entity-framework, entity, rename

我很惊讶我还没有找到一种简单的方法来实现这一点。我想重命名一个包含现有数据的表。

例如：

```
class Person : Entity
{
   long PersonId;
   string name;
} 
```

我想将其重命名为：

```
class Client : Entity
{
   long clientId;
   string name;
} 
```

* * *

**我试过的：**

*   只需重命名类并创建迁移。迁移会删除 person 表，并创建一个新的 client 表。
*   首先创建迁移：`RenameTable("Person", "Client");`这给了我：

> 参数@objname 不明确或声明的@objtype (OBJECT) 错误。

# cocoa - 如何递归地使用 CIFilter 的输出作为新的输入？

> ID：12780298
> 
> 赞同：0
> 
> 时间：2012-10-08T10:55:57.877
> 
> 标签：cocoa, core-image, cifilter, ciimage

我编写了一个自己的 CIFilter 内核，它正在对相机信号进行一些图像处理。它需要两个参数：参数一个是“inputImage”（当前相机图像），参数 2 是“backgroundImage”，它正在使用第一个相机图像进行初始化。

过滤器应该递归工作。过滤器的结果应在下一次迭代中用作新的“背景图像”。我正在计算背景图像和一些差异，因此需要上一次渲染的结果。

不幸的是，我不能在下一次迭代中使用 CIFilter 的输出 CIImage，因为内存负载越来越大。经过 10 秒的处理后，最终使用了 1.4GB 的 RAM。以标准方式（无递归）内存管理使用过滤器很好。

如何在下一次迭代中重用过滤器的输出作为输入？我在结果图像上做了一个 NSLog。蚂蚁告诉我

```
background {

CISampler:0x1002e0360 image {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
   FEPromise: 0x1013aa230 extent [0 0 1280 720]; DOD [0 0 1280 720]; filter MyFeatureDetectFilter: 0x101388dd0; kernel coreImageKernel; image {

CISampler:0x10139e200 image {                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                
   FEBufferImage: 0x10139bee0 metadata.colorspace: HDTV; extent: [0 0 1280 720]; format: BGRA_8; uid 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
} 
```

几秒钟后，日志变成了某事。像

```
 }                                                                                                                                                            
                         }                                                                                                                                                     
                       }                                                                                                                                                                                 
                     }                                                                                                                                                    
                   } 
```

这告诉我 CIImages 是所需操作的“始终”原型。并且递归地使用它们将“生成的 CIImage '原型'”作为输入添加到新的“原型”中。随着时间的推移，渲染的“规则”变成了一个巨大的嵌套原型结构。

有什么方法可以强制 CIImages 将内存中的结构变平？如果我可以进行递归处理，我会很高兴，因为这会将 QuartzCore 的功能发挥到极致。

我在 QuartzComposer 中尝试了同样的方法。将输出与输入连接是可行的，但也会占用大量内存。一段时间后它崩溃了。然后我尝试使用 QC 的队列，一切正常。QC 队列的“xcode”等价物是什么？或者是否有任何机制可以重写我的内核以将“结果”保存在内存中以供下一次迭代使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-04T21:28:06.393

您正在寻找的似乎是[CIImageAccumulator 类](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/QuartzCoreFramework/Classes/CIImageAccumulator_Class/Reference/Reference.html)。这允许您在下一次迭代中使用过滤器的输出作为其输入。

**编辑：**

有关如何使用它的示例，您可以查看[此 Apple 示例代码](https://developer.apple.com/library/mac/documentation/graphicsimaging/conceptual/CoreImaging/ci_feedback_based/ci_feedback_based.html)。

# java - JFreeChart 拖动绘图区

> ID：12780299
> 
> 赞同：4
> 
> 时间：2012-10-08T10:56:01.527
> 
> 标签：java, jfreechart

我希望能够拖动绘图区域以便能够移动 x 轴。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:58:27.827

那当然是。查看[这个 Java Web Start](http://www.jroller.com/dgilbert/entry/more_interactive_charts)演示。XYPlot [（](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html)例如）支持该`Pannable`接口。

# ios - CPTBarPlot 中的自定义数据标签位置

> ID：12780300
> 
> 赞同：1
> 
> 时间：2012-10-08T10:56:10.110
> 
> 标签：ios, core-plot

我正在尝试使用 Core Plot 来实现这样的目标：

![在此处输入图像描述](../Images/656a81f1460a2cdf31de06a38fbe1888.png)

我能够绘制水平条和边框，但我不知道如何定位数据标签。我应该使用

```
-(CPTLayer *)dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index 
```

?

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T01:16:37.533

您可以为此使用注释。使用 . 制作每个标签`CPTTextLayer`。设置每个标签锚点和位置，使它们保持在正确的栏旁边。

# scala - 从 specs2 中失败的 Scalacheck 属性中识别完全失败的匹配

> ID：12780301
> 
> 赞同：1
> 
> 时间：2012-10-08T10:56:35.977
> 
> 标签：scala, stack-trace, sbt, specs2, scalacheck

我正在运行一个 specs2 测试套件`sbt`，使用该`test`命令。当 ScalaCheck 属性失败时，我只会在我的代码中看到 specs2 匹配失败的文件名和行号——当它碰巧是一种实用方法时，它不是很有用，它执行我经常做的一种常见类型的检查. 堆栈跟踪会更好。

我已经`last`在 sbt 中尝试过该命令，但这并没有显示我正在寻找的堆栈跟踪。唯一的堆栈跟踪`last`显示是这个通用的：

```
java.lang.RuntimeException: Tests unsuccessful
        at scala.sys.package$.error(package.scala:27)
        at scala.Predef$.error(Predef.scala:66)
        at sbt.Tests$.showResults(Tests.scala:168)
        at sbt.Defaults$$anonfun$testTasks$5.apply(Defaults.scala:279)
        at sbt.Defaults$$anonfun$testTasks$5.apply(Defaults.scala:279)
        at sbt.Scoped$$anonfun$hf2$1.apply(Structure.scala:473)
        at sbt.Scoped$$anonfun$hf2$1.apply(Structure.scala:473)
        at scala.Function1$$anonfun$compose$1.apply(Function1.scala:41)
        at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$11.apply(Structure.scala:295)
        at sbt.Scoped$Reduced$$anonfun$combine$1$$anonfun$apply$11.apply(Structure.scala:295)
        at sbt.$tilde$greater$$anonfun$$u2219$1.apply(TypeFunctions.scala:40)
        at sbt.std.Transform$$anon$5.work(System.scala:67)
        at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:221)
        at sbt.Execute$$anonfun$submit$1$$anonfun$apply$1.apply(Execute.scala:221)
        at sbt.ErrorHandling$.wideConvert(ErrorHandling.scala:18)
        at sbt.Execute.work(Execute.scala:227)
        at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:221)
        at sbt.Execute$$anonfun$submit$1.apply(Execute.scala:221)
        at sbt.CompletionService$$anon$1$$anon$2.call(CompletionService.scala:26)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

我还在 java.util.logging 属性文件中启用了 FINEST 日志记录级别。

现在，我正在使用 Eclipse 调试器解决这个问题，但在某些情况下，它是不必要的重量级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T02:32:37.620

`failtrace`您可以通过在命令行上传递参数来显示堆栈跟踪失败。这记录在用户指南的[参数](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Runners.html#Arguments)部分。

此外，您必须知道此堆栈跟踪已被过滤以避免显示 specs2 自己的堆栈，因此如果您想查看需要添加的所有内容，`fullstacktrace`这是一个不过滤任何内容的[快捷方式。](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Runners.html#Shortcuts)`TraceFilter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:53:27.250

我决定采用不同的方法来识别失败的匹配 - 使用`aka`，如下所示：

```
def occurExactlyOnceInBody = be_===(1) ^^ { (s: String) => body.tails.count(_.startsWith(s)) aka "No. of occurences of " + s + " in body" } 
```

缺点是这确实需要手动应用，但优点是更容易理解故障。

# php - 将PHP中随机生成的随机id转换为mssql中的uniqueidentifier

> ID：12780305
> 
> 赞同：-1
> 
> 时间：2012-10-08T10:56:58.740
> 
> 标签：php, sql-server, database

我必须在 php 中使用 uniqid() 生成自动会话 ID，但我必须将其存储在 MSSQL 数据库中。但我无法将其转换为唯一标识符的类型。

```
<?php

//set the random id length 
$random_id_length = 10; 

//generate a random id encrypt it and store it in $rnd_id 
$rnd_id = crypt(uniqid(rand(),1)); 

//to remove any slashes that might have come 
$rnd_id = strip_tags(stripslashes($rnd_id)); 

//Removing any . or / and reversing the string 
$rnd_id = str_replace(".","",$rnd_id); 
$rnd_id = strrev(str_replace("/","",$rnd_id)); 

//finally I take the first 10 characters from the $rnd_id 
$rnd_id = substr($rnd_id,0,$random_id_length); 

echo "Random Id: $rnd_id" ;
echo "<br>";

?> 
```

这是现在的代码，我希望将此 $rnd_id 转换为 uniqueidentifier 类型并将其存储到 mssql 数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:00:44.463

不要这样做。最好让 MSSQL 分配一个唯一的 id 并在保存表行后获取这个。通过这种方式，您可以确定您的 id 确实是独一无二的（在您的数据库范围内）。

```
$qry = mssql_query("INSERT INTO tbl(...) VALUES(...) SELECT LAST_INSERT_ID=@@IDENTITY");
$res = mssql_fetch_assoc($qry); 
```

`$res['LAST_INSERT_ID']`将保存最后一个插入 ID。

# ruby-on-rails - Rails Activemailer 与 RabbitMQ (ruby on rails)

> ID：12780306
> 
> 赞同：0
> 
> 时间：2012-10-08T10:57:12.990
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rabbitmq

我正在运行一个Ruby on Rails 应用程序，目前使用delayed_job 发送电子邮件。但我想切换到 RabbitMQ 消息队列。我找不到任何有用的资源来开始使用它。我读了很多 RabbitMQ 文档，什么都没有。请让我注意完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:53:48.783

Rails 的 RabbitMQ 集成严重依赖于 eventmachine 和基于回调的代码。这将使您的代码变得非常复杂，并且您需要让所有代码都知道事件循环。

例如，如果您在 Thin（已经有一个正在运行的事件循环）或 unicorn（您必须在其中实例化反应器并管理其生命周期）之后部署，则不能使用相同的代码。

另一方面，您可以将其抽象为一个实际的作业队列（Resque 已经比 DJ 快得多，Sidekiq 脱裤子，而 Beanstalkd/Stalker 是一个非常好的竞争者），这可能`Rails.queue`与导轨 4.

在 Rails 4 中，您还可以选择将所有 ActionMailer 默认配置为异步（从而委托给任何已配置的作业队列）。[http://reefpoints.dockyard.com/ruby/2012/06/26/rails-4-sneak-peek-async-actionmailer.html](http://reefpoints.dockyard.com/ruby/2012/06/26/rails-4-sneak-peek-async-actionmailer.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-07T23:08:21.223

如果您想用一块石头杀死 2 只鸟，并且您发送电子邮件的需求是基于活动记录生命周期事件（它们几乎总是如此），那么您应该查看我的 gem。

[https://github.com/jasonayre/active_pubsub](https://github.com/jasonayre/active_pubsub)

它建立在 bunny gem 之上，工作起来很像活动记录观察者，除了你在一个单独的进程中运行订阅者。（这实际上只是一个附加功能，其主要目的是允许多个 Rails 应用程序订阅彼此的事件）- IE

```
#user model
class User < ::ActiveRecord::Base
  include ::ActivePubsub::Publishable

  publish_as "myapp"
end

#subscriber

class PostSubscriber < ::ActivePubsub::Subscriber
  observes "cms"
  as "aggregator"

  on :created do |user_hash|
    user = User.find(user_hash[:id])
    #or whatever
    WelcomeMailer.deliver(user)
  end
end 
```

== 异步交付 + 让你的控制器更苗条。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:17:44.237

如果你正在寻找一个很棒的 Ruby 后台作业处理库来代替 delay_job，你应该试试[Sidekiq](https://github.com/mperham/sidekiq)。甚至还有最近的 Railscast 在[这里](http://railscasts.com/episodes/366-sidekiq)。

您可以在 Knight.io上获得有关[背景工作宝石的概述（我创建了这个网站）。](http://www.knight.io/categories/background-jobs-ruby)

# html - 如何精确地打破 80 个字符的文本？

> ID：12780308
> 
> 赞同：0
> 
> 时间：2012-10-08T10:57:35.687
> 
> 标签：html, jsf, textarea

在 DB 部分提出这个问题并在这里提出这个问题后，这是我的问题：

我有一个问题，我有一个从数据库中读取的长文本。文本本身只是一个衬里。问题是它需要在 80 个字符处被打破，即使是在一个单词的中间。

如果下一个单词不适合剩余的字符，HTML 或其他语言将换行，这不是我想要的。这些页面是在 jsf 中完成的。

例如：

```
textarea= cols: 8 rows: 3

input= break these texts

normal:

break 
these
texts

what I need:

break th
ese text
s 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:35:51.760

你可以使用下面的函数，只需将字符串（你想在每 80 个字符后刹车）传递给函数

```
function breakText(str)
{
  i=0;
  outputStr="";
  str= str.replace(/(\r\n|\n|\r)/g," ");

 while(i<str.length)
  {
   outputStr += str.substr(i,80) +"<br>"; // replace br with any line break you want
   i=i+80;
  }
  return outputStr
} 
```

**注意：**此函数将替换所有换行符并`<br>`在每 80 个字符后插入一个

**[工作演示](http://jsbin.com/ikivuk/6)**

# javascript - 跨浏览器很棒的盒子阴影效果

> ID：12780313
> 
> 赞同：0
> 
> 时间：2012-10-08T10:57:42.863
> 
> 标签：javascript, css

有谁知道我可以找到一个 Fancy CSS Box Shadow 效果的脚本或地方，如下所示：

[http://www.red-team-design.com/how-to-create-slick-effects-with-css3-box-shadow](http://www.red-team-design.com/how-to-create-slick-effects-with-css3-box-shadow)

但这也适用于 IE7+ 吗？

感谢您的帮助 ：）

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:13:08.840

要为 IE 启用 CSS 3 Box Shadows, Border Radius，您可以使用[CSS 3 Progressive Internet Explorer](http://css3pie.com/)插件。

### 从他们的[网站](http://css3pie.com/)：

> PIE 使 Internet Explorer 6-9 能够呈现几个最有用的 CSS3 装饰功能。

# apache-flex - 无法在 TextInput 中设置前导值

> ID：12780314
> 
> 赞同：0
> 
> 时间：2012-10-08T10:57:45.370
> 
> 标签：apache-flex

我需要在 Photoshop 中设置文本层的前导值。我首先检索选定的文本图层，然后在 TextItem 对象中获取其值。然后我从组合框中获取前导值，并使用以下代码设置前导值。

var activeTextItem:TextItem = curLayer.textItem; activeTextItem.leading = ComboBox.text.toString();

此代码在 Windows 上使用时可以正常工作。但是当我尝试在 Mac 上执行上述代码时，它总是将前导显示为空对象。有人可以指导我为什么我无法在 Mac 中设置领先的价值吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T07:03:16.047

我找到了解决方案。前导有一个名为 Auto 的值，默认情况下它的值为 null。因此，当我使用上面的代码时，我无法将值设置为前导参数为空。

为了克服这个问题，我检查了是否前导为空值，即 Auto，然后将属性 useAutoLeading 设置为 false，一旦设置了值，然后再次将 useAutoLeading 属性设置为 true。

```
if("Auto" == ComboBox.text)
{
activeTextItem.useAutoLeading = false;
activeTextItem.leading = ComboBox.text.valueOf();
activeTextItem.useAutoLeading = true;
} 
```

谢谢。

# c# - 数据表上的多选信息

> ID：12780317
> 
> 赞同：0
> 
> 时间：2012-10-08T10:57:50.667
> 
> 标签：c#, charts

我花了很多时间在互联网上搜索这个查询没有运气..

使用显示带有数据的数据表的 Visual Studio 表单。目前我可以使用 ctrl 按钮在客户端视图上选择多个单元格，但想知道是否可以以任何其他方式允许用户选择多个单元格。

在他们选择了他们想要的数据后，将这些信息放回原处，并根据这些信息创建图表。

使用 c#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:04:53.747

您是否尝试在数据网格中包含一个复选框列？

# c# - 如何暂停和恢复 BackgroundWorker？

> ID：12780329
> 
> 赞同：6
> 
> 时间：2012-10-08T10:58:46.657
> 
> 标签：c#

这就是我在代码中的做法： 在 backgroundWorker DoWork 事件中，我做了：

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
        {
            _busy.WaitOne();
                this.Invoke(new MethodInvoker(delegate { label2.Text = "Website To Crawl: "; }));
                this.Invoke(new MethodInvoker(delegate { label4.Text = mainUrl; }));
                webCrawler(mainUrl, levelsToCrawl, e);

        } 
```

然后在暂停按钮单击事件中我做了：

```
private void button4_Click(object sender, EventArgs e)
        {
            _busy.Reset();
        } 
```

在恢复按钮单击事件中，我做了：

```
private void button5_Click(object sender, EventArgs e)
        {
            _busy.Set();
        } 
```

但是当我单击开始该过程时它不起作用：

```
private void button1_Click(object sender, EventArgs e)
        {
            backgroundWorker1.RunWorkerAsync();
            button1.Enabled = false;
            this.Text = "Processing...";
            label6.Text = "Processing...";
            label6.Visible = true;
            button2.Enabled = false;
            checkBox1.Enabled = false;
            checkBox2.Enabled = false;
            numericUpDown1.Enabled = false;
            button3.Enabled = true;
        } 
```

只有当我单击恢复按钮时才会发生任何事情，然后当我单击暂停按钮时不会发生任何事情。

我希望当我单击启动进程按钮时，它将定期启动 backgroundWorker，然后当单击暂停按钮时，它将暂停，而恢复按钮将恢复。

我做错了什么 ？有人可以修复我的代码吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T11:15:32.473

在您的 BackgroundWorker 线程代码中，您需要找到可以安全“暂停”执行的位置。ManualResetEvent 是正确的编码方式。这篇其他帖子可能会有所帮助： [有没有办法无限期地暂停一个线程？](https://stackoverflow.com/questions/142826/is-there-a-way-to-indefinitely-pause-a-thread)

基本上，在您希望允许它暂停的工作线程代码中的几个选择点中，尝试插入：

```
_busy.WaitOne(Timeout.Infinite); 
```

当你想暂停（从你的主线程）你使用：

```
_busy.Reset(); 
```

并继续：

```
_busy.Set(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:16:26.557

你应该能够使用`ManualResetEvent`这样的...

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) 
{
    _busy.WaitOne();
    test(mainUrl, levelsToCrawl, e); 
} 
```

...然后当你想暂停线程调用`_busy.Reset()`时......以及当你想重新启动它时调用`_busy.Set()`。

此外，您可以放置`_busy.WaitOne();`​​任何您想暂停的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-01T09:05:10.890

我使用一个简单的类，它利用 System.Thread.Monitor 和 lock()...

```
public class ThreadPauseState {
    private object _lock = new object();
    private bool _paused = false;

    public bool Paused {
        get { return _paused; }
        set {
            if(_paused != value) {
                if(value) {
                    Monitor.Enter(_lock);
                    _paused = true;
                } else {
                    _paused = false;
                    Monitor.Exit(_lock);
                }
            }
        }
    }

    public void Wait() {
        lock(_lock) { }
    }
} 
```

使用它非常简单...

```
private ThreadPauseState _state = new ThreadPauseState();

private void btnPause_Click(object sender, EventArgs e) {
    _state.Paused = true;
}

private void btnResume_Click(object sender, EventArgs e) {
    _state.Paused = false;
}

private void btnCancel_Click(object sender, EventArgs e) {
    backgroundWorker1.CancelAsync();
    _state.Paused = false; // needed if you cancel while paused
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) {
    var worker = (BackgroundWorker)sender;
    for(var _ = 0; _ < 100; _++) {
        _state.Wait();
        if(worker.CancellationPending) return;
        Thread.Sleep(100); // or whatever your work is
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-26T03:54:53.627

我一直在寻找这个线程的答案，但我想出了我自己的解决方案，我只想和你分享。希望这有效。

我有一个后台工作人员，当我点击表单的关闭按钮时我想暂停它。询问“您即将取消该过程”，因此它应该暂停该过程。

`bool pauseWorker = false;`在你的班级上声明。

```
private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
{
   while (condition)
   {
      if (pauseWorker == true)
      {
         while (pauseWorker == true)
         {
            if (pauseWorker == false) break;
         }
      }
      else
      {
         //continue process... your code here
      }
   }
}

private void frmCmsnDownload_FormClosing(object sender, FormClosingEventArgs e)
{
   if (bgWorker.IsBusy)
   {
      pauseWorker = true; //this will trigger the dowork event to loop that
                          //checks if pauseWorker is set to false
      DiaglogResult x = MessageBox.Show("You are about cancel the process", "Close", MessageBoxButtons.YesNo);
      if (x == DialogResult.Yes) bgWorker.CancelAsync();
      else 
      { 
         e.Cancel = true; 
         pauseWorker = false; //if the user click no
                              //the do work will continue the process
         return;
      }
   }
} 
```

因此这里的主要解决方案是控制 BGWorker 的 DoWork 事件的布尔声明。希望这个解决方案可以帮助您解决问题。谢谢你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-18T17:06:15.627

这对我有用：

```
bool work = true;
backgroundWorker1.WorkerReportsProgress = true;
backgroundWorker1.DoWork += backgroundWorker1_DoWork;
backgroundWorker1.ProgressChanged += myChangeFunction;
backgroundWorker1.RunWorkerAsync();

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    while (true && work)
    {
        // Your code here

        backgroundWorker1.ReportProgress(0);
        Thread.Sleep(1000);
    }
    e.Cancel = true;
}
private void myChangeFunction(object sender, ProgressChangedEventArgs e)
{
  // Here you can change label.text or whatever thing the interface needs to change.
}
private void Stop()
{
    work = false;
}
private void Start()
{
    work = true;
    backgroundWorker1.RunWorkerAsync();
} 
```

**注意：**如果要更改界面的某些内容，则必须将其放在 myChangeFunction() 中，因为在 DoWork() 函数中将不起作用。希望这可以帮助。

# jquery - 垂直扩展图像菜单

> ID：12780333
> 
> 赞同：0
> 
> 时间：2012-10-08T10:59:01.427
> 
> 标签：jquery, html, css, menu

我想创建这个：[http ://tympanus.net/Tutorials/ExpandingImageMenu/](http://tympanus.net/Tutorials/ExpandingImageMenu/)

这个演示有一个教程，但它只有水平扩展。如何进行垂直扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:11:17.670

### 您在寻找[垂直滑动手风琴](http://tympanus.net/Development/VerticalSlidingAccordion/example1.html)吗？

![垂直滑动手风琴](../Images/4f8c7a46bb621fcdc423caa0030d00a0.png)

### 教程在[这里](http://tympanus.net/codrops/2011/07/22/vertical-sliding-accordion/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:10:06.663

请找到下面的代码，它的工作原理与您提供的参考完全一致。

**请注意：请在此代码的头部包含来自 jquery.com 的 jquery 库 (CDN) 链接，以使其正常工作。**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Horizontal Image Slider</title>

<script type="text/javascript">
    $(document).ready(function(){

        $("ul#hslider li").click(function(){ 

            $(".context").hide("slow");                     //By default all divs are hidden
            $(".curtain").show("slow");                     //Curtains are on

            if($(this).hasClass("active"))
            {   
                $(this).removeClass("active");              //Remove class active       
                $(this).find("span.curtain").show("slow");  //Add Black Curtain
                $(this).find("div.context").hide("slow");   //Hide div content
            }
            else
            {
                $("ul#hslider li").removeClass("active");   //Remove active from all li's
                $(this).addClass("active");                 //Add class active
                $(this).find("span.curtain").hide("slow");  //Remove curtain        
                $(this).find("div.context").show("slow");   //Display div content
            }

            return(false);

        });

    });
</script>   
<style type="text/css">
body                                    { font-family:Arial, Helvetica, sans-serif; font-size:12px; margin:0; padding:0; }
ul#hslider li                           { cursor:pointer; display:inline-block; list-style:none; padding:0; position:relative;vertical-align:top; }
ul#hslider li a img                     { float:left; height:100px; width:100px; }
ul#hslider li span.curtain              {   background:#000; 
                                            display:block; 
                                            height:100px; 
                                            left:0; 
                                            opacity:0.4; 
                                            filter:alpha(opacity=40); /* For IE8 and earlier */ 
                                            top:0; 
                                            position:absolute; 
                                            width:100px;  
                                        }
ul#hslider li .context                  { border:1px dashed #aaa; display:none; float:left; padding:10px; width:260px;  }
ul#hslider li .context p                { background:#eee; padding:5px; text-align:justify; }
</style>

</head>

<body>

<ul id="hslider">

<li>
    <a href="#"><img src="images/mysteryman.jpg" alt="mystery-man" title="MM" /></a>
    <span class="curtain">&nbsp;</span>
    <div class="context">

            <h2>Some Heading - 1</h2>

            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. </p>

            <p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

    </div>
</li>

<li>
    <a href="#"><img src="images/mysteryman.jpg" alt="mystery-man" title="MM" /></a>
    <span class="curtain">&nbsp;</span>
    <div class="context">

            <h2>Some Heading - 2</h2>

            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. </p>

            <p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

    </div>
</li>

<li>
    <a href="#"><img src="images/mysteryman.jpg" alt="mystery-man" title="MM" /></a>
    <span class="curtain">&nbsp;</span>
    <div class="context">

            <h2>Some Heading - 3</h2>

            <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. </p>

            <p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>

    </div>
</li>

</ul>

</body>
</html> 
```

# sql - 为什么会有外键冲突

> ID：12780334
> 
> 赞同：0
> 
> 时间：2012-10-08T10:59:03.363
> 
> 标签：sql, sql-server, sql-server-2008-r2

这是主表：

```
CREATE TABLE [dbo].[Control_cReport](
    [ReportKey] [int] IDENTITY(10000,1) NOT NULL,
    [ReportTechKey] [int] NOT NULL,
    [ProcessKey] [int] NULL,
 CONSTRAINT [PK_Control_cReport] PRIMARY KEY CLUSTERED 
(
    [ReportKey] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Control_cReport]  WITH CHECK ADD CONSTRAINT [FK_Control_cReport_cReportTech] FOREIGN KEY([ReportTechKey])
REFERENCES [dbo].[Control_cReportTech] ([ReportTechKey])
GO

ALTER TABLE [dbo].[Control_cReport] CHECK CONSTRAINT [FK_Control_cReport_cReportTech]
GO

ALTER TABLE [dbo].[Control_cReport] ADD  DEFAULT ((12)) FOR [ProcessKey]
GO 
```

这是辅助表：

```
CREATE TABLE [dbo].[Control_cReportTech](
    [ReportTechKey] [int] NOT NULL,
    [ReportTechDescription] [nvarchar](50) NOT NULL,
 CONSTRAINT [PK__Control_cReportTech] PRIMARY KEY CLUSTERED 
(
    [ReportTechKey] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

GO 
```

然后我添加到辅助表：

```
INSERT INTO [WHAnalysis].[dbo].Control_cReportTech  
VALUES  
    (1,'Excel Macros'),
    (2,'VB Script'),
    (3,'PDF'),
    (4,'Batch') 
```

现在我正在尝试通过以下方式`INSERT`将旧表中的一些数据放入主表中：

```
INSERT INTO [WHAnalysis].[dbo].[Control_cReport]
SELECT
    [ProcessKey] = 12,
    [ReportTechKey] = 1
FROM WHAnalysis.dbo.Controltb_ReportingScheduler_jq 
```

我收到此错误：

> 消息 547，级别 16，状态 0，第 1 行 INSERT 语句与 FOREIGN KEY 约束“FK_Control_cReport_cReportTech”冲突。冲突发生在数据库“WHAnalysis”、表“dbo.Control_cReportTech”、列“ReportTechKey”中。该语句已终止。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:10:32.823

问题是因为您试图在表中不存在`INSERT`该字段中的值。`ProcessKey``Control_cReportTech`

我会更改`INSERT`语句以指定您尝试`INSERT`进入的字段：

```
INSERT INTO [Control_cReport] (ProcessKey, ReportTechKey)
SELECT 12 as ProcessKey, 1 as ReportTechKey;
FROM WHAnalysis.dbo.Controltb_ReportingScheduler_jq; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/eaea1/7)

使用上述查询而不是当前查询，因为当未指定列时，它会尝试按表结构的顺序插入值。所以它试图在违反外键`12`的列中插入一个值。`ReportTechKey`

指定要插入数据的列的顺序总是要好得多。

# authentication - 将旧的 myUser.class.php / sfBasicSecurityUser 迁移到 Symfony2？

> ID：12780337
> 
> 赞同：1
> 
> 时间：2012-10-08T10:59:17.607
> 
> 标签：authentication, symfony

我已经编写了几个 Symfony 1.x 项目，它们使用自定义 app/frontend/myUser.class.php（它扩展了 sfBasicSecurityUser）来验证针对旧用户数据库的登录。

现在我想从 Symfony2 开始，但我不太确定在哪里挂钩我的自定义身份验证。我可能只需要身份验证部分并让 Symfony 进行授权。

某处有一些快速迁移教程吗？还是我必须按照书中的安全章节完全重写它？

谢谢，

-基督教-

# python - 无法使用 mod_wsgi 在 apache2 上设置 web.py

> ID：12780341
> 
> 赞同：0
> 
> 时间：2012-10-08T10:59:33.613
> 
> 标签：python, apache2, mod-wsgi, web.py

这是我的配置文件，/etc/apach2/sites-availabled/currentcost

```
<VirtualHost *:20108>
ServerAdmin webmaster@localhost

DocumentRoot /var/www
WSGIScriptAlias /currentcost /var/www/currentcost/server.py
AddType text/html .py

<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>
<Directory /var/www/>
    Options Indexes FollowSymLinks MultiViews
    AllowOverride None
    Order allow,deny
    allow from all
</Directory>

ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
<Directory "/usr/lib/cgi-bin">
    AllowOverride None
    Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory>

ErrorLog /var/log/apache2/error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog /var/log/apache2/access.log combined

Alias /doc/ "/usr/share/doc/"
<Directory "/usr/share/doc/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride None
    Order deny,allow
    Deny from all
    Allow from 127.0.0.0/255.0.0.0 ::1/128
</Directory> 
```

我重新加载apache并重新启动它。我正在尝试使用 http://{BASE URL}:20108/ 访问它

它不可访问。谁能帮我吗？

我已按照[http://webpy.org/cookbook/mod_wsgi-apache中给出的步骤进行操作](http://webpy.org/cookbook/mod_wsgi-apache)

我的环境：

Apache/2.2.14 (Ubuntu) PHP/5.3.2-1ubuntu4.18 配置了 Suhosin-Patch mod_wsgi/2.8 Python/2.6.5 -- 恢复正常操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:20:27.920

您尚未为 VirtualHost 设置 ServerName。如果您在同一台服务器上有其他虚拟主机，没有它，Apache 将不知道如何路由到该虚拟主机。

另外，您是否为端口 20108 添加了适当的 NameVirtualHost 指令？

# android - 如何将微调器中的选定项目设置为Android中的默认值？

> ID：12780345
> 
> 赞同：0
> 
> 时间：2012-10-08T10:59:42.130
> 
> 标签：android, spinner

这是我的代码。如果我单击“14”，则微调器中的默认值应设置为 14，如果我更改“20”或某些值（如“16”），则应将其设置为微调器中的默认值。

所以选择的值必须显示在 Spinner 中。

```
 Spinner font=new Spinner(con);
 option= new String[] {"Select","14","16","18","20"};
 ArrayAdapter<String> adapter= new ArrayAdapter<String>(con,android.R.layout.simple_spinner_dropdown_item,option);
 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 font.setOnItemSelectedListener(new OnItemSelectedListener() {

 public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long id) {
 if(!(arg0).getSelectedItem().toString().trim().equalsIgnoreCase("Select"))
 size=Float.parseFloat((option[(arg0).getSelectedItemPosition()]).trim());
       }
 public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
 font.setAdapter(adapter);
 int i;
 for( i=0;i<option.length;i++){

 if(option[i].toString().equalsIgnoreCase("14")){
  }
 else  {
 font.setSelection(i);
        }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:39:44.070

当您转到下一个屏幕并返回时，默认情况下它会自动显示最后选择的值（如果您的 for 循环代码在此处不存在）。如果您从微调器屏幕转到上一个屏幕并返回，则将再次创建微调器并再次设置适配器。所以不能设置最后选择的值。如果这仍然是您的要求，则在选择时将值保存到共享首选项。然后在设置适配器后，如果已经存在，您将获得该值。在您的代码中，不是使用“14”检查相等条件，而是使用共享首选项保存值检查它并在 if 循环中调用 setSelection(i)

# entity-framework - 实体框架：仅模式

> ID：12780346
> 
> 赞同：1
> 
> 时间：2012-10-08T10:59:54.737
> 
> 标签：entity-framework

我正在使用 VS2012 和 EF（System.Data.Entity v 4.0.0.0）。我通过设计器创建了一个数据库优先模型。如何创建一个实际上并不进入数据库的实例？是否有一个 swtich 告诉当前上下文不使用连接字符串，而只是在内存中表示图形？

[然后我尝试按照这里](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/488949dc-1c6c-444a-a6cc-d35361203808)的建议为conext创建一个空构造函数：现在我有关键违规行为......

# magento - 在magento中实现colorgid

> ID：12780347
> 
> 赞同：1
> 
> 时间：2012-10-08T10:59:55.807
> 
> 标签：magento

作为项目的一部分，我必须在 magento 中实现一个颜色网格。也就是说，用户必须找到特定颜色的产品。用户将从网格中选择一种颜色，该特定颜色或类似颜色的所有产品将显示为输出。

我通过提取和存储产品的主色并使用算法检索产品来实现它。

但无法为用户选择的颜色检索许多产品。问题是我们只能传递一个颜色代码（例如“#000000”）作为用户选择，但存储在数据库中的颜色可能是所选颜色的任何变体，因此不可能获得许多产品作为结果。

如果有人实现了这样的功能，请向我提供您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T09:14:53.520

如果我正确理解了这个问题，您可以使用 mysql 语法`CONV(hex_val, 16, 10)`将任何十六进制数（例如颜色代码）转换为十进制数，然后使用 between 条件进行选择，例如：

```
SELECT `prod_id` FROM `products` WHERE CONV(`color`, 16, 10) BETWEEN {$color_range_start} AND {$color_range_end} 
```

这是来自记忆和语法需要更正，但你明白了。将产品 ID 放入数组后，您可以使用标准的 Magento 函数来获取基于此的产品集合。

# php - jQuery导致我的php中断

> ID：12780350
> 
> 赞同：0
> 
> 时间：2012-10-08T11:00:11.477
> 
> 标签：php, jquery, variables, post

我正在开发一个在线预订系统，所以我有一个 php 脚本，它接收一个日期并将输出一系列可能的时间段，这些时间段在该日期是免费的。我正在尝试这样做，以便在关闭日期选择器时将变量发送到文件并检索结果。目前提交按钮也指向 php 文件，并在我选择日期时显示可用的插槽。php 部分有效，但是当我向 datepicker 添加事件时，它不会向 php 文件提交任何变量。我认为这也是我添加另一个负载时的原因。（'input_date.php'）; 我得到了由 if(isset... 引起的完整时间段列表...谁能告诉我为什么 jQuery 会破坏我的变量发布？提前谢谢..

```
$(document).ready(function() {
    $("#dates").load('input_date.php');
    $("#datepicker").datepicker({onClose: function() { 
    $.post("input_date.php", $('#datepicker').serialize()); 
    alert(1);

    }});

}); 
```

这是php文件：

```
<?php
include('connection.php');
error_reporting(0);
$treatment = $_POST['treatment'];
$bookdate = $_POST['bookdate'];
if(isset($treatment) && isset($bookdate)){

$exp = explode("-", $bookdate);

//determine what day of the week it is
$timestamp = mktime(0,0,0,$exp[1],$exp[0],$exp[2]);
$dw = date( "w", $timestamp); // sun0,mon1,tue2,wed3,thur4,fri5,sat6
echo $dw."weekday"; //week day 
echo"<br/>";

//find bookings with same date
$q = mysql_query("SELECT BOOK_SLOT_ID FROM BOOKINGS WHERE BOOK_DATE='$bookdate'");
//make array of booking slots
$array1 = array();
while ($s = mysql_fetch_array($q)) {
 $array1[] = $s['BOOK_SLOT_ID'];
}
$q2 = mysql_query("SELECT SL_ID FROM SLOTS");
//make array of all slots
$array2 = array();
while ($s2 = mysql_fetch_array($q2)) {
$array2[] =  $s2['SL_ID'];
}

//remove bookings from all slots
$arr_res = array_diff($array2, $array1);

//make selectable options of results
echo "<SELECT>";
foreach($arr_res as $op){
$r = mysql_query("SELECT SL_TIME FROM SLOTS WHERE SL_ID='$op'");
$q3 = mysql_fetch_array($r);
echo "<OPTION value=".$op.">".$q3['SL_TIME']."</OPTION>";
}
echo "</SELECT>";
}else{
$else = mysql_query("SELECT * FROM SLOTS");
echo "<SELECT>";
while($array_else = mysql_fetch_array($else)){
echo "<OPTION value=".$array_else['SL_ID'].">".$array_else['SL_TIME']."</OPTION>";
}
echo "</SELECT>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:55:18.883

我相信这是因为你有这行代码：

```
$('#datepicker').serialize() 
```

这应该更改为表单的 id 而不是数据选择器。在您的 PHP 中，您试图获得两个单独的值：

```
$treatment = $_POST['treatment'];
$bookdate = $_POST['bookdate']; 
```

现在您只是发送输入字段#datepicker 的值。

# ios - 键盘检测

> ID：12780354
> 
> 赞同：1
> 
> 时间：2012-10-08T11:00:31.007
> 
> 标签：ios, keyboard

当键盘出现时，我想在我的应用程序中运行一个方法。是否有预定义的方法或者我必须创建它？以及如何创建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:03:14.987

您可以在键盘出现时收到通知：

```
UIKeyboardWillShowNotification
UIKeyboardDidShowNotification 
```

您可以像这样注册通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(keyboardWillShow:)
        name:UIKeyboardWillShowNotification object:nil]; 
```

更多[在这里](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)。

# xslt - XSLT 转换传递参数

> ID：12780355
> 
> 赞同：3
> 
> 时间：2012-10-08T11:00:34.493
> 
> 标签：xslt, jaxp

我试图在 XSLT 转换期间传递参数。这是 xsl 样式表。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:param name="param1" select="'defaultval1'" />
 <xsl:param name="param2" select="'defaultval2'" /> 
 <xsl:template match="/">
  <xslttest>
    <tagg param1="{$param1}"><xsl:value-of select="$param2" /></tagg>
  </xslttest>
</xsl:template>
</xsl:stylesheet> 
```

下面是java代码。

```
File xsltFile = new File("template.xsl");
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document stylesheet = builder.parse("template.xsl");
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer xsltTransformer = transformerFactory.newTransformer(new DOMSource(stylesheet));
//Transformer xsltTransformer = transformerFactory.newTransformer(new StreamSource(xsltFile));
xsltTransformer.setParameter("param1", "value1");
xsltTransformer.setParameter("param2", "value2");
StreamResult result = new StreamResult(System.out);
xsltTransformer.transform(new DOMSource(builder.newDocument()), result); 
```

我收到以下错误：-错误：'变量或参数'param1'未定义。' 致命错误：“无法编译样式表”

但是，如果我使用以下行来创建变压器，一切正常。

```
Transformer xsltTransformer = transformerFactory.newTransformer(new StreamSource(xsltFile)); 
```

**Q1。我只是想知道在创建 Transformer 时使用 DOMSource 有什么问题**。

**Q2。这是在 xml 文档中用值替换占位符的理想方法之一吗？如果我的占位符位于源 xml 文档中，是否有任何（直接）方法可以使用样式表（并传递参数）替换它们？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T07:37:12.690

Q1：这是一个命名空间感知问题。您需要让 DocumentBuilderFactory 命名空间知道：

```
factory.setNamespaceAware(true); 
```

Q2：有几种方法可以从外部 xml 文件中获取值。一种方法是使用文档函数和文档中的顶级变量：

```
<!-- Loads a map relative to the template. -->
<xsl:variable name="map" select="document('map.xml')"/> 
```

然后您可以从地图中选择值。例如，如果 map.xml 被定义为：

```
<?xml version="1.0" encoding="UTF-8"?>
<mappings>
  <mapping key="value1">value2</mapping>
</mappings> 
```

您可以从模板中删除第二个参数，然后使用以下行查找值：

```
<tagg param1="{$param1}"><xsl:value-of select="$map/mappings/mapping[@key=$param1]"/></tagg> 
```

请注意，使用相对文档 URI 将要求样式表具有指定的系统 ID，因此您需要更新创建 DOMSource 的方式：

```
DOMSource source = new DOMSource();
source.setNode(stylesheet);
source.setSystemId(xsltFile.toURL().toString()); 
```

一般来说，我建议查看 Java 的 XML API 中可用的所有选项。假设所有可用的功能都为您尝试做的事情设置错误。我还建议阅读[XML Information Set](http://www.w3.org/TR/xml-infoset/)。该规范将为您提供 API 作者正在使用的所有定义。

# jquery - jquery 插件，它在 div 上放置一个透明的覆盖层，中间有一个加载器

> ID：12780356
> 
> 赞同：0
> 
> 时间：2012-10-08T11:00:34.813
> 
> 标签：jquery

我正在寻找标题中描述的 jquery 插件，它必须是跨浏览器兼容的。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:21:48.733

看看 BlockUI

[http://www.malsup.com/jquery/block/](http://www.malsup.com/jquery/block/)

# titanium-mobile - 钛功能性

> ID：12780357
> 
> 赞同：0
> 
> 时间：2012-10-08T11:00:37.783
> 
> 标签：titanium-mobile, google-places-api, appcelerator-mobile

我是新手，`titanium`我正在尝试构建一些基于`wireframes`. 下面是`wireframe`我正在尝试构建的原型。

![](../Images/1da5961878f57b51dfa48bb3e294f183.png)

您看到的是从中获取的餐馆列表`google places api`。这里的主要功能是黑色条带，它将位于固定位置，并保存其下方特定餐厅的评分和评论的详细信息。

因此，如果我滚动浏览餐厅，黑色条应该会获得位于其下方的特定餐厅的评级详细信息。

到目前为止，我能够将来自 google places api 的餐厅数据抓取到表格视图的行中。

我不确定如何调用此功能或如何实现此功能。

各位大佬能给我指路吗……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:16:06.140

@萨拉特，

我假设你想为 iOS 或 Android 应用程序开发这个原型，所以使用 Titanium 我有以下关于设计和功能的建议

**实现设计：** 对于 Android - 使用具有列表视图的相对布局，您可以在顶部以固定位置加载评级/评论图标

对于 iOS/iPhone - 添加父视图，然后添加表视图以加载餐厅并在另一个表视图中添加评级/评论图标，与餐厅列表的顶部位置相同

**实现功能：** 您将获得您正在加载的餐厅列表中的表视图的第一个单元格索引，因此请使用单元格标识符继续检查表的哪个单元格位于表视图的顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T23:55:46.343

将它作为行的一部分包含在内不是更容易吗？否则用户一次只能看到一行信息，我认为这是不好的设计。

更重要的是，除非您在 TableView 的末尾添加大量虚拟表格行，否则这在 iOS 上*不起作用*，因为用户无法将最底部的行滚动到屏幕顶部！

[本教程向您展示如何拥有自定义表格行。](http://cssgallery.info/custom-row-for-tableview-in-appcelerator-titanium/)使用它作为添加您的评论和喜欢按钮图像的起点。我真的没有其他选择，因为您的固定位置方法需要破解 TableView 组件或使用转换将底行移动到顶部。

编辑：

如果您必须这样做，最好的方法是在实际表格行的末尾添加一些空白表格行，以便用户可以一直向下滚动到包含内容的最后一行（这种方式固定位置可以检测到它的上方）。

接下来创建包含三个按钮的视图，确保它在窗口中的绝对位置（因此它保持固定）并且 zIndex 大于 TableView：

```
var likeAndCommentHolderView = Ti.UI.createView({
    top : 45,
    left : 0,
    //.... etc
    zIndex : 101
});
window.add(likeCommentHolderView); 
```

现在你必须弄清楚用户在哪一行结束。这可以使用[`scrollEnd`](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.UI.TableView-event-scrollEnd)TableView 的事件并获取`contentOffset`事件的属性来完成。'scrollEnd' 事件在用户完成滚动 tableView 中的行时触发，它返回一个具有 的事件，这只是衡量您从tableView**顶部**`contentOffset`滚动了多少。使用简单的数学运算，计算偏移量除以 ，即用户正在查看的行索引。**`rowHeight`**

 **```
// Assume table view is at coordinates : top=45, left=0 and you have defined rowHeight
tableView.addEventListener('scrollEnd', function(e) {
    // Use this to determine which row your over
    var contentOffset = e.contentOffset;
    // Figure out the index
    var rowIndex = contentOffset / rowHeight;
    // Get the row, assume first section
    var section = tableView.data[0];
    var rowObject = section.rows[rowIndex];
    // Now update your UI with data from the row
    var name = rowObject.restaurantName;
}); 
```

现在您在表中有实际的行对象，您可以提取

这只是一个大致的轮廓，这并没有考虑到平台之间的一些差异，我把它留给你去弄清楚，但这是一个很好的通用方法。**

# websphere - IBM Websphere - AutoDeployment 的 wsadmin 脚本中的异常

> ID：12780359
> 
> 赞同：0
> 
> 时间：2012-10-08T11:00:43.207
> 
> 标签：websphere, jython, web-deployment, ear, wsadmin

我正在尝试编写一个简单的 Jython 脚本来在 IBM Websphere Application Server 上自动部署 Web 应用程序。但是，我是Python新手，所以我无法理解，为什么我会变成以下错误：

```
WASX7209I: Connected to process "dmgr" on node was7CellManager01 using SOAP connector;  The type of process is: DeploymentManager
WASX7017E: Exception received while running file "deploy_test.py"; exception information: com.ibm.bsf.BSFException: exception from Jython:
Traceback (innermost last):
File "<string>", line 14, in ?
TypeError: sequence subscript must be integer or slice 
```

我的脚本：

```
appname='name'
source='app.ear'
nodeName='was7Node01'
cell='was7Cell01'
server='server1'
contextRoot='/deploymenttest'

    # 1\. node
    # 2\. cell
    # 3\. server
    # 4\. Application Name
    # 5\. ContextRoot
    # 5\. JNDI target name 
attrs = [
         '-node ', nodeName,
         ' -cell ', cell,
         ' -server ', server,
         ' -appname ', appname,
         ' -CtxRootForWebMod ', contextRoot,
         ' -MapResRefToEJB ', [
                               [ 
                                 appname,"",
                                 source+',WEB-INF/web.xml',
                                 'jdbc/appdb','javax.sql.DataSource',
                                 'jbdc/app22','DefaultPrincipalMapping',
                                 'was7CellManager01/db2inst1',""
                               ]
                               [
                                 appname,"",
                                 source+',WEB-INF/web.xml',
                                 'jdbc/app1db','javax.sql.DataSource',
                                 'jbdc/app22','DefaultPrincipalMapping',
                                 'was7CellManager01/db2inst1',""
                               ]
                             ] 
         ]

AdminApp.install(source, attrs) 
```

有任何想法吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:12:58.193

在第 27 行的两个 MapResRefToEJB 值之间缺少逗号。

# sql - Logparser：使用列表值作为文件名循环过滤多个列表并输出到多个文件

> ID：12780363
> 
> 赞同：2
> 
> 时间：2012-10-08T11:00:48.833
> 
> 标签：sql, batch-file, logparser

我陷入了这个 logparser 困境的死胡同。所以除了这里没有其他地方可以去。

# 批处理文件 ( *disktrend.bat* )

```
@echo off    
pushd "Program Files (x86)\Log Parser 2.2\"
for /f "tokens=1,2 delims=," %%A in (d:logs\serverdrives.txt) do @logparser -i:tsv file:D:\logs\disktrend.sql?sd=%%A -o:chart -charttype:line > D:\logs\%%B.gif 
```

# SQL 文件 ( *disktrend.sql* )

```
SELECT date,pfree using to_int(sub(to_real(100),to_real(replace_chr(free,'%','')))) as pfree,replace_chr(strcat(server,drive),':','') AS serverdrive from d:\logs\compiled\*.log where serverdrive =%sd% 
```

# 列表文件 ( *serverdrives.txt* )

```
'SERV06F',SERV06F  
'SERV00F',SERV00F 
```

# 日志文件示例内容 (* *.log* )

```
Date    Server  Drive   Free    Free Space  Total
20120914    SERV06      F:  79.55%  27619.02MB  34719.82MB
20120914    SERV00      F:  99.73%  34630.37MB  34723.81MB 
```

当我运行批处理脚本时，出现以下错误：

# 错误

```
Invalid output filename ""   
Invalid output filename "" 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:34:46.730

吃晚饭的时候，一个答案突然出现在我身上。
我编辑了批处理和 SQL 文件。
见下文。

# 批处理文件 ( *disktrend.bat* )

```
@echo off    
pushd "Program Files (x86)\Log Parser 2.2\"
for /f "tokens=1,2 delims=," %%A in (d:logs\serverdrives.txt) do @logparser -i:tsv file:D:\logs\disktrend.sql?sd=%%A+filen=%%B -o:chart -charttype:smoothline -q:off -stats:off 
```

# SQL 文件 ( *disktrend.sql* )

```
SELECT to_string(date),pfree using to_int(sub(to_real(100),to_real(replace_chr(free,'%','')))) as pfree,replace_chr(strcat(server,drive),':','') AS serverdrive into d:\logs\%filen%.gif from d:\logs\compiled\*.log where serverdrive =%sd% 
```

# asp.net-mvc - 如何在 mvc 中过滤视图 url

> ID：12780365
> 
> 赞同：0
> 
> 时间：2012-10-08T11:00:57.803
> 
> 标签：asp.net-mvc, visual-studio-2010, url, asp.net-mvc-4

我在 mvc 中重写 AuthorizeCore 函数以进行身份​​验证和授权，当我调用视图表单控制器时，这工作正常。但现在我有一个视图，其中包含一些报告链接，我想向具有访问权限的用户显示报告。我可以隐藏报告链接，但无法限制直接 url。

可以使用此 url 请求 [http://MyDomain:1426/Company/Index] 但当 url 为 [http://MyDomain:1426/Reports/GrpView?OfferID=1] 时不使用 authorizecore 方法（因为我没有报告控制器）在 MVC 中有什么方法可以过滤视图 url 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:33:10.423

目前还不清楚`Reports/GrpView`提供报告功能的处理程序是什么。它似乎不是 ASP.NET MVC 控制器操作，因为您会使用`[Authorize]`属性对其进行修饰并指定角色。

如果这是一些遗留的 WebForms 页面或处理程序，您可以使用`<location>`您的部分`web.config`来控制访问：

```
<location path="Reports/GrpView">
    <system.web>
        <authorization>
            <!-- deny access to all users -->
            <deny users="*"/> 

            <!-- allow access to users in the "admins" role -->
            <allow roles="admins"/> 
        </authorization>
    </system.web>
</location> 
```

该`Authorize`属性（以及从它派生的任何自定义属性）旨在仅用于保护对 ASP.NET MVC 控制器操作的访问。如果您没有将 ASP.NET MVC 用于您的报告服务，则不能使用这些机制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T13:05:37.770

我的报告在 .aspx 页面上，我将其放入报告视图文件夹（不好的方法）。正如 darin dimitrov 所说，为什么这个 ASPX 页面在您的 Views 文件夹中？此文件夹中的文件只能通过控制器操作提供。那里不能有经典的 WebForms 页面。因此，您必须有一个名为 ReportsController 的控制器，其中包含一个名为 GrpView 的操作，您可以使用 [Authorize(Roles="admins")] 属性进行装饰。另一方面，如果这是一个经典的 WebForms 页面，您需要将其从 Views 文件夹中移开，然后指定其路径。通过使用这种方法，我无法传递我的调用表单 AuthorizeCore 函数。

/// 我在我的 .aspx 页面上处理角色权限管理。如果有人找到任何其他解决方案，请分享。

# java - 用逗号格式化货币数字

> ID：12780367
> 
> 赞同：1
> 
> 时间：2012-10-08T11:01:05.920
> 
> 标签：java, currency-formatting

我正在使用 java webapp，在 Java 类中我使用远程服务器 API 来获取类似 `48938493843894`. 我将这些值导出到 .XLSX 文件。我想像 `$48,938,493,843,894` 在 java 类中那样格式化这个数字并导出到 .xlsx 文件。

我如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:17:38.887

对于格式化货币，最好使用`NumberFormat.getCurrencyInstance()`（查看[http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#getCurrencyInstance](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#getCurrencyInstance)）并且对于限制小数部分有`NumberFormat.html#setMaximumFractionDigits`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:07:08.183

使用模式`###,###.###`来格式化它。

```
 String str = "48938493843894";
        String pattern="###,###.###";
        DecimalFormat myFormatter = new DecimalFormat(pattern);
        String output = myFormatter.format(Double.parseDouble(str));
        System.out.println(output); 
```

# typo3 - 使用打字稿根据另一个表中的数据从表中获取数据

> ID：12780370
> 
> 赞同：1
> 
> 时间：2012-10-08T11:01:25.853
> 
> 标签：typo3, typoscript

我需要在页面上显示作者详细信息。

这是我获取页面内容的 cruser_id 的打字稿：

```
 20 = CONTENT
    20{
        table = tt_content
        select{
         selectFields = cruser_id
        }
        renderObj = COA
        renderObj{
         10 = TEXT  
         10{
         required=1      
         field=cruser_id
         }
        }
      } 
```

如何获取与 cruser_id 关联的用户名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:34:00.417

由于您没有指定代码的上下文，因此这里有一个示例，它只是扩展了您提供的代码。

```
20 = CONTENT
20 {
  table = tt_content
  select {
    selectFields = cruser_id
  }
  renderObj = RECORDS
  renderObj {
    source.field = cruser_id 
    tables = be_users
    dontCheckPid = 1
    conf.be_users = TEXT
    conf.be_users {
      field = username
      noTrimWrap = || |
    }
  }
} 
```

**解释**：您正在使用`CONTENT`cObject 获取内容并告诉 TYPO3 将其呈现为`RECORDS`cObject。这个对象现在有用户的 UID 可用，`cruser_id`并且可以在其配置中使用它`source.field`。`RECORDS`因此从表中加载记录（UID = cruser_id），`be_users`然后告诉 TYPO3 将其呈现为`TEXT`cObject。因为它可以是任何 cObject（例如 COA），所以输出可以更复杂，包括来自后端用户记录的其他字段。

* * *

**更复杂的例子**

```
20 = CONTENT
20 {
  table = tt_content
  select {
    selectFields = cruser_id, tstamp
  }
  renderObj = COA
  renderObj {
    10 = TEXT
    10 {
      field = tstamp
      date = j/n/Y
      noTrimWrap = |Last modified: ||
    }

    20 = RECORDS
    20 {
      source.field = cruser_id 
      tables = be_users
      dontCheckPid = 1
      conf.be_users = COA
      conf.be_users {
        stdWrap.noTrimWrap = |<br />Author: ||

        10 = TEXT
        10 {
          field = realName
        }

        20 = TEXT
        20 {
          field = username
          noTrimWrap = | (|)|
        }
      }
    }
  }
} 
```

# jquery - 附加锚标记

> ID：12780373
> 
> 赞同：4
> 
> 时间：2012-10-08T11:01:40.630
> 
> 标签：jquery, html

在我的应用程序中，我想让图像成为另一个页面的链接。图像被放置在 html 中，

```
<div class="rightbuttoncontainers_footer">
  <div class="forfooterimg" id="twitterlink_indv">
    <img src="Images/tweatus.png" width="30" height="30" alt="tweat">
  </div>
</div> 
```

我想通过脚本将这些图像作为链接，我尝试了以下

```
var twit_lk='https://twitter.com/';
$('#twitterlink_indv').append('<a href="'+twit_lk+'"/>'); 
```

但是上面代码的输出是这样的，

```
<div class="rightbuttoncontainers_footer">
  <div class="forfooterimg" id="twitterlink_indv">
    <img src="Images/tweatus.png" width="30" height="30" alt="tweat">
    <a href="https://twitter.com/"></a>
  </div>
</div> 
```

但是，我想要如下输出，

```
<div class="rightbuttoncontainers_footer">
  <div class="forfooterimg" id="twitterlink_indv">
    <a href="https://twitter.com/">
      <img src="Images/tweatus.png" width="30" height="30" alt="tweat">
    </a>
  </div>
</div> 
```

我怎样才能让它工作？

请帮忙，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:03:50.413

看看[这里](http://api.jquery.com/wrap/)`.wrap()`记录的方法。

```
$('#twitterlink_indv img').wrap('<a href="' + twit_lk + '" />'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:03:59.543

使用[`wrap`方法](http://api.jquery.com/wrap/)。选择图像元素并将链接包裹在它周围：

```
$('#twitterlink_indv img').wrap('<a href="'+twit_lk+'"></a>'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T11:04:59.480

使用[**.wrap()**](http://api.jquery.com/wrap/)，如下所示：

```
$('#twitterlink_indv img').wrap('<a href="'+twit_lk+'"/>'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T11:06:43.497

尝试：

```
$('#twitterlink_indv img').wrap(
    $("<a/>").attr("href", twit_lk)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T11:04:50.557

我认为您正在寻找的是 jQuery`wrap()`函数。

> 围绕匹配元素集中的每个元素包裹一个 HTML 结构。

```
$('#twitterlink_indv > img').wrap('<a href="' + twit_lk + '" />'); 
```

您的选择器应更改以匹配内部`<img>`标记。然后 wrap 函数将使用锚标记包装匹配的元素。

### [在这里](http://jsfiddle.net/NqNVB/)查看演示。

> 参考 -
> 
> *   [`wrap()`](http://api.jquery.com/wrap/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T11:04:04.680

尝试使用[`wrap`](http://api.jquery.com/wrap/)而不是[`append`](http://api.jquery.com/append/)这样：

```
$('#twitterlink_indv img').wrap('<a href="'+twit_lk+'"/>'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T11:05:13.107

使用jQuery `wrap()`：

```
$('#twitterlink_indv > img').wrap('<a href="'+twit_lk+'"/>'); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T11:36:01.727

只需使用以下`wrapInner()`方法：

```
$('#twitterlink_indv').wrapInner('<a href="'+twit_lk+'"/>'); 
```

# android - 从本机相机捕获图像后但在将其保存到 SD 卡之前调整图像大小

> ID：12780375
> 
> 赞同：1
> 
> 时间：2012-10-08T11:01:43.850
> 
> 标签：android, android-camera, android-image

我在单击按钮时在我的应用程序中打开默认相机。当我单击按钮时，它工作正常。但它捕获默认大小的图像，我想在捕获图像后重新调整图像大小，然后将其保存在 SD 卡中默认相机。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:07:03.660

使用以下代码为相机意图设置适当的宽度和高度。

```
 Intent intent = new Intent( Intent.ACTION_PICK,
            MediaStore.Images.Media.INTERNAL_CONTENT_URI );
    intent.putExtra("outputX",
            width_of_output_image);
    intent.putExtra("outputY",
            height_of_output_image);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);
    intent.putExtra( "scale", true );
            startActivityForResult( intent, 1 ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:06:30.500

我认为这必须对您有所帮助：-

```
Bitmap.createScaledBitmap(Bitmap src, int dstWidth, int dstHeight, boolean filter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-26T04:38:28.600

```
 BitmapFactory.Options optionsSignature = new BitmapFactory.Options();

    final Bitmap bitmapSignature = BitmapFactory.decodeFile(
            fileUriSignature.getPath(), optionsSignature);

    Bitmap resizedSignature = Bitmap.createScaledBitmap(
            bitmapSignature, 256, 128, true);

    signature.setImageBitmap(resizedSignature); 
```

# spring - Spring 和 Hibernate：DAO 模式。如何解决 LazyInitializationException

> ID：12780376
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:00.007
> 
> 标签：spring, hibernate, dao, lazy-initialization

我想知道：`FetchType.LAZY`在一个（多）对多中使用 DAO 模式有什么意义？基本没用？一旦您在 DAO 之外（例如，实际工作是否完成），您就无法获取相关数据，因为您不再处于休眠会话中。

让我们举个例子：

`Student`和`Class`。一个学生上很多课。他现在登录系统并从系统中检索他的学生实体对象。

```
application layer -> Service Layer -> DAO 
```

现在学生想看看他参加了哪些课程，并且`LazyInitializationException`因为我们在 DAO 之外而发生了 oops a。

有哪些方法可以防止这种情况？我喜欢用谷歌搜索时间，但没有找到解决方案，除了在离开 DAO 之前实际获取所有内容，这首先违背了懒惰的目的。（已阅读，`OpenSessionViewFilter`但这应该独立于应用程序层）

你如何以一种好的方式解决这个问题？什么是不受此影响的替代模式？

编辑：

我没有`LazyInitializationException`以下设置：

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "pk.compound", 
        cascade = CascadeType.ALL, orphanRemoval = true)
@Fetch(FetchMode.JOIN) 
```

有趣的是它一定是这样的。

删除`@Fetch`->`LazyInitializationException`

更奇怪的是，如果我删除了`orphanRemoval = true`，那么`LazyInitializationException`也会出现`@Fetch`。所以这两个都是必需的。

也许有人可以启发我为什么会这样。目前，我倾向于完全放弃休眠，就像使用纯 JDBC 一样，我会在几小时前达到预期的行为......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:12:14.417

您始终可以在没有相同会话的情况下获取外键关系数据。由于您的会话不存在于应用程序层之外，您只需在检索数据并设置它的方法中手动获取它。

**应用层：**

```
public List<SchoolClass> getSchoolClassesByStudent(Serializable identifier)
{
    List<SchoolClasses> schoolClasses = // get classes by student using criteria or hql
    return schoolClasses;
} 
```

**客户层：**

```
public void loadSchoolClassesByStudent(Student student)
{
    student.setSchoolClasses(application.getSchoolClassesByStudent(student.getId()));
} 
```

我自己选择不支持我的休眠实体中的任何集合。
我使用我的服务器提供给我的客户端的非常通用的方法获取所有子关系，类似于这个。

**编辑：**或者创建一些逻辑（拦截器？），可以在 DAO 外部检查数据是否在访问之前未初始化，并使用通用方法对其进行初始化。
这也将假设 Hibernate jar 位于客户端级别，这取决于这是否是一个好主意（如果未初始化的数据未设置为 null，则相同）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:12:30.360

解决问题的一种方法是使用`OpenSessionInViewFilter`过滤器。

```
<filter>
    <filter-name>hibernateSessionFilter</filter-name>
    <filter-class>
        org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
    </filter-class>
</filter> 
```

# java - 为什么将字符串转换为双精度可能会丢失精度？

> ID：12780377
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:01.967
> 
> 标签：java, string, double

```
for (int i = 0; i < 18; i++) {
  line = file.readLine();
  String[] word = line.split(";");

  appartment[i] = new Appartment();
  appartment[i].floor= Integer.parseInt(word[0]);
  appartment[i].name = word[1];
  appartment[i].money= Double.parseDouble(word[2]);
  appartment[i].owner= word[3];
} 
```

有人可以告诉我为什么这不起作用吗？我从文件中读取。我正在尝试将钱从字符串转换为双倍，但它说

```
possible loss of precision. 
required: int
found: double 
```

我需要双打，所以业主账户也可以变成负数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:05:11.400

**-**这似乎`appartment`是一个类型的数组`Appartment`，其中 Appartement 的对象字段命名`money`为`int`类型。

**-**但是您将其值作为`double`类型分配，因此您需要从 double 到 int的**显式转换，**

**例如：**

`appartment[i].money= (int) Double.parseDouble(word[2]);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:12:08.550

用这个，

```
 appartment[i].money = Integer.parseInt(word[2]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T11:08:18.410

显然`appartment[i].money= Double.parseDouble(word[2]);`这里是个问题。如果 money 的类型是`int`，您应该将 word[2] 的值转换为`int`like `appartment[i].money = (int(Double.parseDouble(word[2]));` 或者您应该将其解析为整数，例如 `appartment[i].money= Integer.parseInt(word[2]);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:03:52.623

你可能有钱是int的公寓的defenition，试着把它改成双...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:07:06.960

在 Java 中表示货币的最佳实践是使用 BigDecimal。有关详细信息，请参阅：[http ://www.javapractices.com/topic/TopicAction.do?Id=13。](http://www.javapractices.com/topic/TopicAction.do?Id=13)

# linux - Ubuntu Eclipse 图标创建

> ID：12780382
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:06.717
> 
> 标签：linux, eclipse, ubuntu

我想在 ubuntu 上安装 eclipse。我做了什么：我解压缩了 Eclipse 的 tar 存档。我试图从命令行启动 Eclipse - 像这样 - ./eclipse。有用。但后来我尝试使用以下命令创建桌面图标：gnome-desktop-item-edit ~/Desktop --create-new。在一个新图标中，我显示了可以从命令行启动的 eclipse 可执行文件的路径。但随后日食并没有开始说明：

```
A Java Runtime Environment (JRE) or Java Development Kit (JDK)
must be available in order to run Eclipse. No Java virtual machine
was found after searching the following locations:
/home/artem/eclipse/jre/bin/java
java in your current PATH 
```

而且我在终端收到一条消息（在某​​个阶段它出现了）：

```
(gnome-desktop-item-edit:8998): Gtk-WARNING **: Attempting to store changes into `/root/.local/share/recently-used.xbel', but failed: Failed to create file '/root/.local/share/recently-used.xbel.DSV8LW': No such file or directory 
```

我正在使用 Ubuntu 12.04 x32 和 eclipse Juno。

PS。PATH 变量指向 jdk/bin 和 JAVA_HOME - 指向 jdk 文件夹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:05:18.940

您可以使用符号链接启动“图标”：
`ln -s [TARGET DIRECTORY OR FILE] [SHORTCUT]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T13:11:52.717

您只需使用图形界面即可

右键单击日食。选择`"Make link"`。您将在文件夹中获得快捷方式。将快捷方式复制到桌面。完毕 ：）

Ps：顺便说一句，如果您不喜欢快捷方式的默认图标。它们看起来都一样而且丑陋。只需右键单击快捷方式并单击左侧的小图标，然后选择您喜欢的图像图标（例如：Eclipse 图标）。

# android - 即使已弃用，在 Display 上使用 .getWidth 是否安全

> ID：12780384
> 
> 赞同：62
> 
> 时间：2012-10-08T11:02:20.177
> 
> 标签：android, width, deprecated

所以我有一个小问题，我正在编写一个需要将屏幕宽度发送到服务器的函数。我得到了一切工作，我使用：

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth(); 
```

获得宽度。但是 .getWidht() 函数已被弃用，它说你需要使用：

```
Point size = new Point();
display.getSize(size); 
```

但该功能仅适用于 api 级别 13 或更高级别，而我的最低 sdk 为 8。那我该怎么办？如果我留在 getWidth 那里安全吗？为什么要添加新功能而不是使其向后兼容？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-01-28T11:24:51.487

可能这种方法会有所帮助：

```
DisplayMetrics displaymetrics = new DisplayMetrics();
mContext.getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
int screenWidth = displaymetrics.widthPixels;
int screenHeight = displaymetrics.heightPixels; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T11:04:43.863

您可以在运行时检查 API 级别，并选择使用哪个，例如：

```
final int version = android.os.Build.VERSION.SDK_INT;
final int width;
if (version >= 13)
{
    Point size = new Point();
    display.getSize(size);
    width = size.x;
}
else
{
    Display display = getWindowManager().getDefaultDisplay(); 
    width = display.getWidth();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T11:06:49.390

如果您想正确，请使用以下方法：

```
int sdk = android.os.Build.VERSION.SDK_INT;
if (Build.VERSION.SDK_INT < Build.VERSION_CODES.HONEYCOMB_MR2) {
    Display display = getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
} else {
    Point size = new Point();
    display.getSize(size);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-08-24T11:59:51.300

这是没有弃用的最新代码。

**科特林**

```
 val metrics: DisplayMetrics = this.getResources().getDisplayMetrics()
 val width = metrics.widthPixels 
```

**爪哇**

```
 DisplayMetrics metrics = context.getResources().getDisplayMetrics();
  int width = metrics.widthPixels;
  int height = metrics.heightPixels; 
```

# sql - SQL -- 将数据类型数字转换为数字时出错。

> ID：12780387
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:38.287
> 
> 标签：sql

我会很感激这里有第三只眼睛。我有一个要执行的存储过程，但是当我使用以下值执行它时，我收到消息将数据类型 varchar 转换为数字时出错

```
 EXECUTE  packaging 
              @ID out,  -- uniqueidentifier
              @ProductID, --uniqueidentifier
              @PackagingIN,  --numeric(14,0)
              @BarCodeInd, --nchar(1)
              @GrossWeightperPack, --numeric(14,0)
              @UMPID,  --uniqueidentifier
              @Height, --numeric(8,0)
              @UMPID1, --uniqueidentifier
              @Width, --numeric(8,0)
              @UMPID2, -- uniqueidentifier
              @Length, --numeric(8,0)
              @UMPID3, --uniqueidentifier
              1,     --int
               1,  --int
              @statusid,  
              @counter out  --int 
```

执行打包'0904AC11-7B0D-4326-A67B-49639DF6672C', '57925472-5F79-424E-806A-47F8B73DAE02', 57582682639272, '', '', null, '', null, ''null, ''null,' ', 1, 1, 'B5266344-286E-46FE-91D1-35DEEDCD6063', @counter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:09:25.217

您有一些数字参数被传递为空字符串 ''

传递一个数值，就像为 PackagingIN 参数传递的一样，或者传递 null

例子：

```
Execute packaging '0904AC11-7B0D-4326-A67B-49639DF6672C', '57925472-5F79-424E-806A-47F8B73DAE02', 57582682639272, '', null, null, null, null, null,null, null,null,null, 1, 1, 'B5266344-286E-46FE-91D1-35DEEDCD6063', @counter 
```

避免传递空字符串（除非需要），因为它们会沿着线路的某个地方绊倒你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-24T07:24:23.910

您可能正在尝试从定义的模板中插入更大的数字，例如您正在运行

```
declare **@number numeric (9)**
exec get_next_number @number OUTPUT 
```

虽然程序是这样定义的

```
procedure dbo.get_next_number **@number numeric(10)**=null OUTPUT 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-20T14:39:34.097

请注意，对于问题主题：“将数据类型数字转换为数字时出错。” （即使问题主体不同），错误也可能源于使用与 NUMERIC 的[精度](https://docs.microsoft.com/en-us/sql/t-sql/data-types/precision-scale-and-length-transact-sql?view=sql-server-2017)`decimal`不匹配的C# 。

例如，将`decimal`值为 125.346 的参数作为类型所在的参数传递`NUMERIC(5,2)`将失败并显示上述错误消息。

# xml - XSLT 在子模板内复制父元素树

> ID：12780388
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:41.003
> 
> 标签：xml, xslt, xslt-2.0

好吧，例如我有一个 XML：

```
<ProcessPurchaseOrder >
    <PurchaseOrderLine>
        <DocumentReference type="sendersReference2">
            <DocumentID>
                <ID>100</ID>
            </DocumentID>
        </DocumentReference>
        <DocumentReference type="sendersReference3">
            <DocumentID>
                <ID>ru</ID>
            </DocumentID>
        </DocumentReference>
        <Item>
            <CustomerItemID>
                <ID>00126</ID>
            </CustomerItemID>
        </Item>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
        <DocumentReference type="sendersReference2">
            <DocumentID>
                <ID>200</ID>
            </DocumentID>
        </DocumentReference>
        <DocumentReference type="sendersReference3">
            <DocumentID>
                <ID>ru</ID>
            </DocumentID>
        </DocumentReference>
        <Item>
            <CustomerItemID>
                <ID>123122</ID>
            </CustomerItemID>
        </Item>
    </PurchaseOrderLine>
</ProcessPurchaseOrder> 
```

和 XSLT 的一部分：

```
 <xsl:for-each select="*:PurchaseOrderLine">
    <xsl:variable name="ArtNr" select="*:Item/*:CustomerItemID/*:ID"/>
    <xsl:variable name="WepNr" select="/*/DbResponse/ResultSet/Row[Cell[@name='ARTNR']=$ArtNr][Cell[@name='WEANR']=$WeaNr]/Cell[@name='WEPNR']"/>
    <xsl:copy>
        <xsl:if test="$WepNr!=''">
            <xsl:for-each select="$WepNr">
                <LineNumber><xsl:value-of select="$WepNr/current()"/></LineNumber>
            </xsl:for-each>
        </xsl:if>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:for-each> 
```

对于`$WepNr`我想复制整个值`<PurchaseOrderLine>`并插入`<LineNumber>`当前值的每个`WepNr`值。

因此，例如：如果`$WepNr`第一个 PurchaseOrderLine 返回：16；26 结果将是：

```
<ProcessPurchaseOrder >
    <PurchaseOrderLine>
    <!-- wepnr[1] = 16 -->
    <LineNumber>16</LineNumber>
        <DocumentReference type="sendersReference2">
            <DocumentID>
                <ID>100</ID>
            </DocumentID>
        </DocumentReference>
        <DocumentReference type="sendersReference3">
            <DocumentID>
                <ID>ru</ID>
            </DocumentID>
        </DocumentReference>
        <Item>
            <CustomerItemID>
                <ID>00126</ID>
            </CustomerItemID>
        </Item>
    </PurchaseOrderLine>
    <PurchaseOrderLine>
    <!-- copied PurchaseOrderLine with wepnr[2]=26 -->
    <LineNumber>26</LineNumber>
        <DocumentReference type="sendersReference2">
            <DocumentID>
                <ID>100</ID>
            </DocumentID>
        </DocumentReference>
        <DocumentReference type="sendersReference3">
            <DocumentID>
                <ID>ru</ID>
            </DocumentID>
        </DocumentReference>
        <Item>
            <CustomerItemID>
                <ID>00126</ID>
            </CustomerItemID>
        </Item>
    </PurchaseOrderLine>

    <!-- here is 2nd PurchaseOrderLine>
    <!-- ... -->

</ProcessPurchaseOrder> 
```

是否可以？

**UPD**：DBresponse XML 部分

```
<DbResponse>
   <ResultSet>
      <Row>
         <Cell name="WEANR" type="VARCHAR2">1909123</Cell>
         <Cell name="ARTNR" type="VARCHAR2">00126</Cell>
         <Cell name="WEPNR" type="VARCHAR2">1</Cell>
      </Row>
      <Row>
         <Cell name="WEANR" type="VARCHAR2">1909123</Cell>
         <Cell name="ARTNR" type="VARCHAR2">00126</Cell>
         <Cell name="WEPNR" type="VARCHAR2">16</Cell>
      </Row>
   </ResultSet>
</DbResponse> 
```

这只是意味着`WepNr`可以返回多个值：`1 16`在这种情况下，例如“”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:58:20.037

我认为而不是

```
 <xsl:for-each select="*:PurchaseOrderLine">
    <xsl:variable name="ArtNr" select="*:Item/*:CustomerItemID/*:ID"/>
    <xsl:variable name="WepNr" select="/*/DbResponse/ResultSet/Row[Cell[@name='ARTNR']=$ArtNr][Cell[@name='WEANR']=$WeaNr]/Cell[@name='WEPNR']"/>
    <xsl:copy>
        <xsl:if test="$WepNr!=''">
            <xsl:for-each select="$WepNr">
                <LineNumber><xsl:value-of select="$WepNr/current()"/></LineNumber>
            </xsl:for-each>
        </xsl:if>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:for-each> 
```

你宁愿：

```
 <xsl:apply-templates select="*:PurchaseOrderLine"/> 
```

然后在顶层

```
 <xsl:key name="row-by-wepnr" 
   match="DbResponse/ResultSet/Row"
   use="Cell[@name='ARTNR']"/>

 <xsl:template match="*:PurchaseOrderLine">
   <xsl:variable name="this" select="."/>
   <xsl:variable name="wepNrs" select="key('row-by-wepnr', *:Item/*:CustomerItemID/*:ID)[Cell[@name='WEANR']=$WeaNr]/Cell[@name='WEPNR']"/>
   <xsl:for-each select="$wepNrs">
     <xsl:apply-templates select="$this" mode="add-wep">
       <xsl:with-param name="wep" select="current()"/>
     </xsl:apply-templates>
   </xsl:for-each>
 </xsl:template>

 <xsl:template match="*:PurchaseOrderLine" mode="add-wep">
    <xsl:param name="wep"/>
    <xsl:copy>
      <LineNumber><xsl:value-of select="$wep"/></LineNumber>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

假设这`$WearNr`是一个全局参数或变量，否则您需要将该值传递给例如

```
 <xsl:apply-templates select="*:PurchaseOrderLine">
   <xsl:with-param name"WearNr" select="$WearNr"/>
  </xsl:apply-templates> 
```

和

```
 <xsl:template match="*:PurchaseOrderLine">
   <xsl:param name="$WearNr"/>
   <xsl:variable name="this" select="."/>
   <xsl:variable name="wepNrs" select="key('row-by-wepnr', *:Item/*:CustomerItemID/*:ID)[Cell[@name='WEANR']=$WeaNr]/Cell[@name='WEPNR']"/>
   <xsl:for-each select="$wepNrs">
     <xsl:apply-templates select="$this" mode="add-wep">
       <xsl:with-param name="wep" select="current()"/>
     </xsl:apply-templates>
   </xsl:for-each>
 </xsl:template>

 <xsl:template match="*:PurchaseOrderLine" mode="add-wep">
    <xsl:param name="wep"/>
    <xsl:copy>
      <LineNumber><xsl:value-of select="$wep"/></LineNumber>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

当然，所有未经测试的，您最好提供最少但完整的代码示例，以便我们编写可测试的代码。

# c# - 实体框架错误 - 错误 11009：未映射属性“”

> ID：12780389
> 
> 赞同：57
> 
> 时间：2012-10-08T11:02:47.447
> 
> 标签：c#, entity-framework, visual-studio-2008, mapping

为了改进一个较旧的项目，我被迫使用 VS 2008 和 Framework 3.5 - 我遇到了 edmx 显示奇怪行为并且没有根据需要更新实体的问题。

edmx 向我抛出了上述错误，但是当我转到相应的表并右键单击它时 - “从数据库更新模型”没有任何变化，错误仍然存​​在。

如果我通过选择它并按del从图表中删除表，然后在模型浏览器中它从.Database中消失但是当单击“从数据库更新模型”时我在“添加”列表中看不到我，所有我可以做的是“刷新”表，因为我仍然在刷新列表中看到它（这不应该发生，因为我删除了它！）

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-08T21:22:22.980

检查模型的 xml 文件，它可能还在某处。尝试从该 XML 文件中手动删除它，然后再次尝试更新。不过一定要备份。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2013-08-26T20:54:45.820

当我将列名从 更改为 时，我遇到了这个`CampaignKey`问题`CampaignCode`。更改数据库后，我去了`.edmx`设计器，右键单击并选择**Update Model from Database**。然后，当我编译时，我得到了错误：

> 错误 11009：属性`CampaignKey`未映射。

仔细查看设计器中的表格，我发现 Visual Studio 已经`CampaignCode`像在数据库中一样创建了新字段。但它也将旧字段留`CampaignKey`在了那里，导致错误，因为它不再存在于数据库中。

为了解决这个问题，我在设计器的表中右键单击了`CampaignKey`字段并选择了**Delete**。

之后我保存了`.edmx`，编译后错误消失了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-03T22:55:29.963

在表或视图上的列名更改大小写之前，我也遇到过同样的错误。例如，如果视图有一个名为“OrderID”的列，然后将列名更改为“OrderId”，那么它将给出错误“属性“OrderID”未映射”。这可以通过将案例更改回模型中的存在方式来解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-23T09:18:48.607

我在记事本中打开了 edmx 文件并删除了不正确的字段。然后我在设计器中再次更新了模型

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T11:24:48.993

有时，升级项目会引发错误。

只需确保您已备份所有数据，以防万一。

当我们将实体模型添加到我们的项目中时，它会在***web.config*****中添加一个相应的连接字符串**。现在，当您从项目中删除模型时，即使这样，连接字符串仍然存在于 web.config 中。

 *因此，请采取以下步骤：

1.  删除模型
2.  从 web.config 中删除对应的连接字符串
3.  现在，执行从头开始重新添加模型的步骤。

希望它应该工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-31T23:46:11.277

我知道这个问题是关于 VS 2008 和“恢复”模型的，但是对于像我在 VS 2015 中遇到相同的错误 11009 时发现此问题的任何人，我首先尝试“从数据库更新模型”无济于事，然后我最终通过右键单击 .edmx 设计中的模型表并选择表映射来修复它。我不必删除模型。我的模型与一个 db 表相关联。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-08T17:42:17.907

当我更改数据库中的列名并从模型更新数据库时，我遇到了同样的错误。我无法在解决方案的任何地方找到原始名称。我通过简单地解决了它

1.  从模型中删除表（右键单击表，点击删除），
2.  从数据库更新模型（右键单击 edmx 背景，选择“从数据库更新模型”，添加更改的表）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-18T15:34:15.057

我在 Database First 模型上使用 Visual Studio 2017 和 Entity Framework 6 时遇到了同样的问题，在刷新它以获取新列时。

我尝试了上述所有方法，但唯一有效的是删除 EDMX 并生成一个新的。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-01-14T11:56:18.467

我发现处理这个问题的最简单方法是在 edmx.xml 中找到具有未映射属性的模型/表。选择它并删除它。保存您的 edmx，然后再次更新，从数据库中重新添加模型。仅删除未映射的属性对我不起作用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-03-09T16:45:03.437

在将表添加到 .edmx 后，出现此错误（错误 3007：从行开始映射片段时出现问题...）

首先，我删除最后添加的表，然后使用该表重新更新模型，但选中“包含外键复选框：

[![在此处输入图像描述](../Images/3e201664bdb3a621e3614d7a0c9b2337.png)](https://i.stack.imgur.com/Ms4Dj.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-16T16:24:45.297

实体框架错误 -`Error 11009: Property is not mapped`

*此错误的原因是 DB 和.edmx*文件之间没有正确同步。

**解决方案 1**

从*.edmx*文件中删除模型并重新添加。

**解决方案 2**

通过右键单击编辑*.edmx*文件。

在以下两个位置添加更新/新属性；

在下面：

`<EntityType Name="TableName"> <Property Name="SaleFinYear" Type="varchar" MaxLength="50" />`

在`：

`<MappingFragment StoreEntitySet="TableName"> <ScalarProperty Name="SaleFinYear" ColumnName="SaleFinYear" />`

有关屏幕截图的更多详细信息，请查看 -[这里](https://errorfunda.blogspot.com/2020/05/entity-framework-error-error-11009.html)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-03-01T16:28:14.470

尝试将其映射到模型的 xml 文件中：

```
<ScalarProperty Name="CampaignKey" ColumnName="CampaignKey" /> 
```

这个对我有用。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-23T17:01:52.893

在我的例子中，我`sys_user_id`在 Visual Studio 的设计器中添加了一个名为现有表的新标量属性。我没有从数据库中更新模型，因为这会导致设计器出现很多错误。我只想映射添加到数据库端给定表的单个列。

问题是，在这样做之后，我开始收到以下异常：

> *   InnerException {"\r\nModels.ShardData.msl(352,10) : 错误 3004：从第 352 行开始映射片段时出现问题：没有为 Set table_name 中的属性 table_name.sys_user_id 指定映射。\r\n带有键的实体 (PK ) 在以下情况下不会往返：\r\n 实体类型为 [ShardDB.table_name]\r\n"} System.Exception {System.Data.Entity.Core.MappingException}

在 Visual Studio 中，`Error List`窗口中显示的是：`Error 11009: Property ' ' is not mapped`

我为解决此问题所做的工作如下：

1.  `.edmx`在 Visual Studio Code 中打开文件；
2.  搜索违规行为`table_name`；
3.  在适当的地方添加了缺失的映射。

它在 2 个地方缺少映射：

```
<EntityType Name="table_name">
    <Key>
        <PropertyRef Name="user_id" />
    </Key>
    <Property Name="user_id" Type="int" Nullable="false" />
    <Property Name="tenant_id" Type="int" />
    ... ALL OTHER COLUMNS HERE ...
    <Property Name="sys_user_id" Type="int" Nullable="true" /> <= WAS MISSING THIS AND SO I HAD TO ADD IT BY HAND
</EntityType> 
```

和

```
<EntitySetMapping Name="table_name">
  <EntityTypeMapping TypeName="ShardDB.table_name">
    <MappingFragment StoreEntitySet="table_name">
      <ScalarProperty Name="user_id" ColumnName="user_id" />
      <ScalarProperty Name="tenant_id" ColumnName="tenant_id" />
      ... ALL OTHER COLUMNS HERE ...
      <ScalarProperty Name="sys_user_id" ColumnName="sys_user_id" /> <= WAS MISSING THIS AND SO I HAD TO ADD IT BY HAND
    </MappingFragment>
  </EntityTypeMapping>
</EntitySetMapping> 
```

在 Visual Studio Code 中更改它并返回到 Visual Studio 后，它要求我重新加载`.edmx`文件，因为它已被修改。重新加载，然后按 F5 运行代码。它开始按预期工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-10-13T10:45:58.843

当您更改列的名称并尝试更新到数据库时，它会丢失其映射。

解决方案：1-右键单击属性未映射的表。2-选择表映射选项。3-您会发现未映射的属性没有映射。 [![在此处输入图像描述](../Images/dd69513b96789f7141812ce3deb40c91.png)](https://i.stack.imgur.com/eNpvl.png)*

# java - 对 servlet 的请求排序

> ID：12780390
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:47.857
> 
> 标签：java, multithreading

假设我有一个 servlet，它的 on`doPost`方法执行一些操作。此外，我有一些网络服务池`Connections`（让它成为`N`连接），这些网络服务是从每个请求到我的 servlet 的池中获取的（每个请求 1 个连接）。在`doPost`servlet 的方法中，我从池中检索连接，使用它（此操作可能持续太久）并将其放回池中。

假设`N`同时与 servlet`N`建立连接，因此将从池中检索连接。并且在处理请求`N+1`并`N+2`到达请求时，它们将等到释放某些连接（我的池由 支持`BlockingQueue`）。

我想保证该`N+1`请求将比`N+2`请求更早拥有可用连接。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:13:06.880

[`ArrayBlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ArrayBlockingQueue.html)提供构造函数参数来控制队列的*公平性*- 当设置为 时`true`，保证线程将按照它们调用的顺序获取队列中的元素`take()`。

据我了解，使用`ArrayBlockingQueue`with`fair = true`作为池的后备队列应该足以满足您的情况。

# typescript - TypeScript：可以在构造函数中实现接口吗？

> ID：12780391
> 
> 赞同：4
> 
> 时间：2012-10-08T11:02:48.117
> 
> 标签：typescript

我有以下界面：

```
interface SMJSPacket {
  header: {
    tag: string;
    method: string;
    type: string;
  };
  response?: {
    status: string;
    content: string;
  };
  event?: {
    key?: string;
    action?: string;
  };
  request?: {
    run?: string;
  };
} 
```

然后我想将它实现为一个类，并在构造函数中设置属性：

```
 class Request implements SMJSPacket {
    constructor(data: any, method: string) {
      this.header = {
        type: 'request',
        method: method || 'calld',
        tag: Request.getTag()
      }
      this.request = data;
    }
    static getTag(): string {
      return '_' + goog.now() + '_' + utils.getRandomBetween(1, 1000);
    }
  } 
```

但是根据编译器 Request 没有实现接口。我不明白它是如何检查它的，虽然它在构建阶段根据接口填充了所有内容，如果用 JavaScript 编写，这将工作正常，在 Closure 工具中类型检查同样的东西也能完美工作。这个想法是我想将接口实现为一个类，这样我就可以在原型中拥有实用方法，但仍然能够轻松地转换为 JSON 字符串。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T12:48:04.977

语言服务将静态分析您的接口声明，并且因为您已经表示它需要您的`header`成员，这应该构成类声明的一部分：

```
class Request implements SMJSPacket {
    header: { tag: string; method: string; type: string; };

    constructor(data: any, method: string) {
        this.header = {
            type: "request",
            method: (method || "calld"),
            tag: Request.getTag()
        };
    }

    static getTag(): string {
        return "tag stuff";
    }
} 
```

不用担心，输出的 javascript 更精简：

```
var Request = (function () {
    function Request(data, method) {
        this.header = {
            type: "request",
            method: (method || "calld"),
            tag: Request.getTag()
        };
    }
    Request.getTag = function getTag() {
        return "tag stuff";
    }
    return Request;
})(); 
```

# c# - AppFabric 缓存客户端拒绝

> ID：12780394
> 
> 赞同：2
> 
> 时间：2012-10-08T11:02:51.177
> 
> 标签：c#, caching, appfabric, appfabric-cache

我在不同域的网络服务器上设置了 AppFabric CacheServer。

当我尝试访问它时，出现异常：服务器已拒绝客户端凭据。InnerException：登录尝试失败。

我努力了

```
 Grant-CacheAllowedClientAccount Everyone 
```

但是没用，我试过

```
 Grant-CacheAllowedClientAccount MYDOMAIN\MyIISusr 
```

但这只会给我一个错误：Windows 帐户 MYDOMAIN\MyIISusr 无效。可能是因为我们不在同一个域中？

我试图将 apppool 帐户设置为 networkservice 并使用

```
Grant-CacheAllowedClientAccount Networkservice 
```

但这也无济于事。

有什么方法可以跳过授权而不授权用户？一切都在防火墙后面，无法从公共访问，因此此应用程序不需要授权。

或者有人对我的问题有任何解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:24:52.440

您可以通过以下方式连接到 AppFabric 缓存而无需身份验证：

1.  `Set-CacheClusterSecurity -SecurityMode None -ProtectionLevel None`
2.  像这样配置您的客户端：

    ```
    <dataCacheClients>
      <dataCacheClient name="CacheName" maxConnectionsToServer="20">
        <hosts>
          <host name="hostName" cachePort="22233" />
        </hosts>
        <securityProperties mode="None" protectionLevel="None" />
      </dataCacheClient>
    </dataCacheClients> 
    ```

但我不建议这样做。您应该能够从一个域连接到另一个域，但配置这应该是您的管理团队的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T13:31:49.493

我建议您安装 Microsoft AppFabric 1.1 (support.microsoft.com/kb/2716015) 的累积更新包 2。然后在事件查看器 -> 应用程序和服务日志 -> Microsoft -> 应用程序服务器-系统服务-管理员中，您可以找到您遇到问题的用户名。如果用户名是 {Anonymous}，您应该考虑将应用程序池标识更改为 networkservice。

# php - 为字符串中每个单词的出现执行代码

> ID：12780396
> 
> 赞同：0
> 
> 时间：2012-10-08T11:02:57.900
> 
> 标签：php, string, function, foreach, explode

我有以下字符串...

```
HEADER*RECIPIENT MAIN *FOOTER 
```

我想知道如何使用 PHP 循环遍历这个字符串并在每次出现 HEADER*、*FOOTER、MAIN 和 RECIPIENT 时执行一个函数。

在爆炸字符串后，我自己尝试使用基本的 for-each 循环，但我发现它将所有元素组合在一起。

我需要它遵循它们被发现的顺序。我的方法只适用于一页。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:48:24.863

这就是我在多年前开发的一个旧框架中使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)做一个简单的模板解析器的方式。

基本上，您为您的 templateParser 提供源模板，并在回调函数中处理令牌的出现。这是一个骨架，显然您应该对其进行自定义实现，并设计您的正则表达式以匹配 HEADER*、*FOOTER 等标记。

```
<?php
    /**
     *  @param string $tpl
     *    The template source, as a string.
     */
    function templateParser($tpl) {
      $tokenRegex = "/your_token_regex/";
      $tpl = preg_replace_callback($tokenRegex , 'template_callback', $tpl);
      return $tpl;
    }

    function template_callback($matches) {
      $element = $matches[0];
      // Element is the matched token inside your template
      if (function_exists($element)) {
        return $element();
      } else if ($element == 'HEADER*') {
        return your_header_handler();
      } else {
        throw new Exception('Token handler not found.');
      }
    }
    ?> 
```

# jquery - 带有 JQuery 的 Grails 项目，没有插件

> ID：12780399
> 
> 赞同：5
> 
> 时间：2012-10-08T11:03:08.397
> 
> 标签：jquery, grails

我正在尝试设置一个将使用 JQuery 的简单 Grails 2.1.1 应用程序

我有一个名为“TestController”的控制器和一个正确定位的 index.gsp。我手动添加了 JQuery 库，我没有使用 Grails 插件。我将“jquery-ui-1.8.24.custom.min.js”和“jquery-1.8.0.min.js”放在 web-app/js 中（位置正确，因为我可以看到 Jquery 的代码当我在浏览器中浏览我自己的代码并点击参考链接）

我想运行[JQuery 的自动完成示例](http://jqueryui.com/demos/autocomplete/)。代码如下所示：

```
<!DOCTYPE html>
<html>
<head>

<script src="../js/jquery-ui-1.8.24.custom.min.js" type="javascript"/>
<script src="../js/jquery-1.8.0.min.js" type="javascript"/>

<script>
    $(document).ready(function () {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $("#tags").autocomplete({
            source:availableTags
        });
    });
</script>

</head>

<body>

<div class="demo">

<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags">
</div>

</div><!-- End demo --> 
```

到目前为止，自动完成功能不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:21:19.053

why not use references to the resources dir?

```
<script type="text/javascript" src="${resource(dir:'js',file:'jquery-1.8.0.min.js')}"</script>

<script type="text/javascript" src="${resource(dir:'js',file:'jquery-ui-1.8.24.custom.min.js')}"> </script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:50:36.917

解决了。

*   确保没有安装 JQuery 插件
*   以正确顺序引用的 JQuery

    ```
    <script src="../js/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script src="../js/jquery-ui-1.8.24.custom.min.js" type="text/javascript"></script>

    <script>
        $(document).ready(function () {
            var availableTags = [
                "ActionScript",
                "AppleScript",
                "Asp",
                "BASIC",
                "C",
                "C++",
                "Clojure",
                "COBOL",
                "ColdFusion",
                "Erlang",
                "Fortran",
                "Groovy",
                "Haskell",
                "Java",
                "JavaScript",
                "Lisp",
                "Perl",
                "PHP",
                "Python",
                "Ruby",
                "Scala",
                "Scheme"
            ];
            $("#tags").autocomplete({
                source:availableTags
            });
        });
    </script> 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:32:24.687

更改对 jQuery 的引用：

```
<script src="../js/jquery-1.8.0.min.js" type="text/javascript" ></script>
<script src="../js/jquery-ui-1.8.24.custom.min.js" type="text/javascript" ></script> 
```

至少，这在我的电脑上修复了你的例子...... :-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:43:06.933

您遇到了 Grails 的错误，我花了一段时间才发现。由于某种原因，第一个 javascript 条目被忽略以进行处理。要解决您的问题，您需要在资源之前添加一个额外的脚本标签。像这样。

```
<script type="javascript"/></script>
<script src="../js/jquery-ui-1.8.24.custom.min.js" type="javascript"/>
<script src="../js/jquery-1.8.0.min.js" type="javascript"/> 
```

一旦完成重新测试..它应该被修复。

# javascript - 通过 UIButton 点击 上的 java 脚本调用键盘

> ID：12780400
> 
> 赞同：1
> 
> 时间：2012-10-08T11:03:12.500
> 
> 标签：javascript, jquery, objective-c, jquery-ui

我需要在单击按钮时打开键盘，同时显示光标在 UIWebview 上的早期位置。我对java脚本完全陌生。这是我的代码

```
 - (IBAction)keyboardButtonSelected:(id)sender {    
NSString *jScriptString = [NSString stringWithFormat:@"getCurrentCursor"];
[webViewForEditing stringByEvaluatingJavaScriptFromString:jScriptString];

[keyboardButton setSelected:YES];
[keyboardButton setImage:[UIImage imageNamed:@"keyboard-light"] forState:UIControlStateSelected];
[viewForHomeEmoji removeFromSuperview]; 
```

}

我在脚本中写了方法：

```
 function getCurrentCursor
    {
        document.getElementById('content').focus();
    }

    <body>
    <div id="content" contenteditable="true" style="font-family: Helvetica">This is out Rich Text Editing View </div>
</body> 
```

指导我为实现这一目标需要写什么。任何能让我熟悉 java 脚本与 Objective-C 组合的教程。引导我

# objective-c - 在 rootviewcontroller iOS6 上将 MPMoviePlayerController 作为模式关闭

> ID：12780403
> 
> 赞同：2
> 
> 时间：2012-10-08T11:03:22.600
> 
> 标签：objective-c, uiviewcontroller, mpmovieplayercontroller

我目前正在使用 MPMoviePlayerController 并将其视图添加到我正在使用的 UIViewController 中：

```
UIViewController *rootViewController = [[[UIApplication sharedApplication] keyWindow] rootViewController];
[rootViewController presentModalViewController:viewController animated:YES]; 
```

当我使用以下方法关闭 modalviewcontroller 时：

```
UIViewController *rootViewController = [[[UIApplication sharedApplication] keyWindow] rootViewController];
[rootViewController dismissModalViewControllerAnimated:YES]; 
```

一切都保持黑色。

这在 iOS5 上运行良好。另一个不使用电影播放器​​的 modalviewcontroller 在 iOS6 上仍然可以正常工作。

我已经尝试过该`[self.view.window.rootViewController dismissViewControllerAnimated:YES completion:nil];`功能，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T02:46:13.997

我建议使用 presentViewController 而不是 presentModalViewController。这适用于 iOS 5 和 6，而从 iOS 6 开始不推荐使用 presentModalViewController。它可能无法完全解决您的问题，但它是更好的代码实践。

另一件事：与其使用 MPMoviePlayerController 并将其添加到视图控制器进行显示，为什么不使用 MPMoviePlayerViewController 呢？一站式服务。

如果*仍然*无法解决问题，请发布更多数据，您可以更轻松地获得帮助。

# hadoop - 运行 hadoop 作业后生成的空输出文件

> ID：12780407
> 
> 赞同：0
> 
> 时间：2012-10-08T11:03:48.230
> 
> 标签：hadoop, mapreduce

我有一个 MapReduce 程序如下

```
import java.io.IOException;
import java.util.Iterator;
import java.util.StringTokenizer;

import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapred.FileInputFormat;
import org.apache.hadoop.mapred.FileOutputFormat;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.mapred.JobConf;
import org.apache.hadoop.mapred.KeyValueTextInputFormat;
import org.apache.hadoop.mapred.MapReduceBase;
import org.apache.hadoop.mapred.Mapper;
import org.apache.hadoop.mapred.OutputCollector;
import org.apache.hadoop.mapred.Reducer;
import org.apache.hadoop.mapred.Reporter;
import org.apache.hadoop.mapred.TextOutputFormat;

public class Sample {

public static class SampleMapper extends MapReduceBase implements
        Mapper<Text, Text, Text, Text> {

    private Text word = new Text();

    @Override
    public void map(Text key, Text value,
            OutputCollector<Text, Text> output, Reporter reporter)
            throws IOException {
        StringTokenizer itr = new StringTokenizer(value.toString(),",");
        while (itr.hasMoreTokens()) {
            word.set(itr.nextToken());
            output.collect(key, word);
        }
    }
}

public static class SampleReducer extends MapReduceBase implements
        Reducer<Text, Text, Text, Text> {

    private Text result = new Text();

    @Override
    public void reduce(Text key, Iterator<Text> values,
            OutputCollector<Text, Text> output, Reporter reporter)
            throws IOException {

        StringBuffer aggregation = new StringBuffer();
        while (values.hasNext()) {
            aggregation.append("|" + values.next().toString());
        }
        result.set(aggregation.toString());
        output.collect(key, result);
    }

}

public static void main(String args[]) throws IOException {
    JobConf conf = new JobConf(Sample.class);
    conf.setJobName("Sample");

    conf.setMapperClass(SampleMapper.class);
    conf.setReducerClass(SampleReducer.class);
    conf.setOutputKeyClass(Text.class);
    conf.setOutputValueClass(Text.class);
    conf.setInputFormat(KeyValueTextInputFormat.class);
    conf.setOutputFormat(TextOutputFormat.class);
    FileInputFormat.setInputPaths(conf, new Path(args[0]));
    FileOutputFormat.setOutputPath(conf, new Path(args[1]));

    JobClient.runJob(conf);

}
} 
```

我已经制作了罐子，并且一直在尝试获得输出。但是正在创建的输出文件是空的。

我正在使用以下命令来运行作业

```
hadoop jar mapreduce.jar Sample /tmp/input tmp/output 
```

mapreduce.jar 是我打包的jar，我的输入文件就像

```
1 a,b,c
2 e,f
1 x,y,z
2 g 
```

预期产出

```
1 a|b|c|x|y|z
2 e|f|g 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:58:13.787

尝试将配置对象传递给 JobConf ，我猜您的 JobConf 无法获取 Hadoop/hdfs 配置。

```
Configuration configuration=new Configuration();
JobConf jobconf=new JobConf(configuration, exampleClass.class);
conf2.setJarByClass(cls);
....... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:34:23.060

我猜是因为您使用 KeyValueTextInputFormat 作为输入格式，所以它没有找到一个单独的字节，因此使用整个行值作为键（值是“”）。这意味着您在映射器中的迭代不会经过任何循环，也不会写出任何内容。在配置中使用属性名称 mapreduce.input.keyvaluelinerecordreader.key.value.separator 来保存“”作为分隔符字节。

# c# - 使用 ManualResetEvent 对 NAudio 进行单元测试锁定测试

> ID：12780411
> 
> 赞同：1
> 
> 时间：2012-10-08T11:03:52.570
> 
> 标签：c#, .net, unit-testing, naudio

好吧，我正在尝试针对我为录制会话创建的包装器对 NAudio 进行单元测试，这是启动和停止录制会话的代码...

```
public void StartRecording(string claimNo, string ip_no, string ip_name)
{
    if (this.IsRecording)
    {
        return;
    }

    this.Recordings.Add(new RecordingTrack(claimNo, ip_no, ip_name));
    if (this.MicrophoneLevel == default(float))
    {
        this.MicrophoneLevel = .75f;
    }

    _aggregator.Reset();

    _input = new WaveIn();
    _input.WaveFormat = _waveFormat;

    _input.DataAvailable += (s, args) =>
        {
            _writer.Write(args.Buffer, 0, args.BytesRecorded);
            byte[] buffer = args.Buffer;
            for (int index = 0; index < args.BytesRecorded; index += 2)
            {
                short sample = (short)((buffer[index + 1] << 8) | buffer[index + 0]);
                float sample32 = sample / 32768f;
                _aggregator.Add(sample32);
            }

            if (this.DataAvailable != null)
            {
                this.DataAvailable(s, args);
            }

            if (!this.IsRecording)
            {
                _writer.Close();
                _writer.Dispose();
                _writer = null;
            }
        };
    _input.RecordingStopped += (s, args) =>
        {
            _input.Dispose();
            _input = null;

            if (this.RecordingStopped != null)
            {
                this.RecordingStopped(s, args);
            }
        };

    _writer = new WaveFileWriter(this.CurrentRecording.FileName, _input.WaveFormat);

    _input.StartRecording();
    this.IsRecording = true;
}

public void StopRecording()
{
    if (!this.IsRecording)
    {
        return;
    }

    this.CurrentRecording.Stop();

    this.IsRecording = false;
    _input.StopRecording();
} 
```

...下面是我的单元测试。我正在使用 a`ManualResetEvent`来断言被触发的事件是否成功，并且它是这样声明的......

```
private ManualResetEvent _eventRaised = new ManualResetEvent(false); 
```

...但是，问题是下面的测试只是锁定并且永远不会触发事件。**您能否确认问题在于`WaitOne`不允许事件触发，因为它锁定了同一个线程？**

```
bool success = false;
_eventRaised.Reset();

var target = new RecordingSession();
target.StartRecording("1", "01", "Test Name");

target.RecordingStopped += (s, args) =>
    {
        success = (target.CurrentRecording.Duration.TotalSeconds > 4);
        _eventRaised.Set();
    };

Thread.Sleep(4000);
target.StopRecording();

_eventRaised.WaitOne();

Assert.IsTrue(success); 
```

**如果是这样，你能帮我做这个测试吗？**我需要一些启示。

我已经`ManualResetEvent`多次使用它来测试其他类的事件并且它有效，但这里有些不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:21:34.777

`_input`如果成员在其自己的线程中工作，则可能在您连接到它之前触发该事件。因此，手动重置事件永远不会被设置，导致它永远等待/锁定你的单元测试。

因此，也许尝试将您的定义重新排序为：

```
target.RecordingStopped += (s, args) =>     
{         
    success = (target.CurrentRecording.Duration.TotalSeconds > 4);         
    _eventRaised.Set();     
};

target.StartRecording("1", "01", "Test Name"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T21:55:11.783

您永远不会收到事件，因为 WaveIn 的默认构造函数使用窗口回调，并且您没有在 GUI 线程上运行单元测试。您应该改用 WaveInEvent 来处理非 gui 线程。在最新的 NAudio 代码中，应抛出 InvalidOperationException 以防止您犯此错误。

# jquery - .removeClass 开得太快了？

> ID：12780412
> 
> 赞同：1
> 
> 时间：2012-10-08T11:03:55.340
> 
> 标签：jquery, google-chrome, css, webkit, removeclass

我有一个奇怪的问题。它只发生在 Chrome 24 (AFAIK) 上，所以它**可能是**一个 Chrome 错误，但如果不是，我想在未来证明我的脚本。

我有一个[全屏 CSS3 库的库](https://github.com/mrfoto/mrsi-gallery)。现在我的库非常庞大，过于复杂，并且如果这样配置（默认为 jQuery），它具有许多花哨的功能，例如 CSS3 淡出。现在 jQuery 过渡和 CSS3 过渡一样（尴尬地）工作得很好。问题仅在于 CSS3 转换加载的第一个图像。

我花了过去两个小时来隔离问题并找到了它。问题是`.removeClass('fadeout')`开得太早了。我无法完全理解为什么会发生这种情况，但我唯一可能的解释是当画廊触发时 CSS 没有加载`.removeClass('fadeout')`。这似乎完全不真实，因为浏览器首先加载 CSS，然后它开始加载 jQuery，在 jQuery 准备好之后它加载我的画廊库，然后当那个库准备好时，我加载启动画廊并开始加载第一个程序的函数图片。

所以，不要再拖延了，这是导致问题的代码：

```
self.backgroundDiv.css(self.transitionClass).on(self.transitionType, stopRunning).removeClass('fadeout') 
```

解释一下 -`self.backgroundDiv`为包含背景图像的 div 保存 jQuery 容器。`.css(self.transitionClass)`在该 div 上添加转换：

```
{-moz-transition: "1000ms", -o-transition: "1000ms", -webkit-transition: "1000ms", transition: "1000ms"} 
```

`.on(self.transitionType, stopRunning)`绑定特定于浏览器的过渡结束事件以触发一个函数，该函数告诉库第一个图像已加载。

所以现在我已经研究了所有这些，以确定他们是否从事件中删除了浏览器前缀，`webkitTransitionEnd`并逐行逐行添加第一个图像的整个过程，一切正常。所以我剩下的就是这个淡出类，当我尝试它时，我无法相信它就是它。

我怎么知道这是问题所在？因为上面没有工作，但这使它完美地工作：

```
window.aaa = self.backgroundDiv.css(self.transitionClass).on(self.transitionType, stopRunning);
setTimeout("window.aaa.removeClass('fadeout')", 0); 
```

所以我的问题是 - 怎么可能`.removeClass`过早触发以及如何解决这个问题（除了丑陋的 setTimeout）？无论如何我可以检查CSS何时加载？

谢谢！

# python - Python串口状态

> ID：12780420
> 
> 赞同：0
> 
> 时间：2012-10-08T11:04:42.787
> 
> 标签：python, serial-port

在打开串口之前，如何知道 Python 中串口的状态？

我知道我可以使用下面的代码来确定它的状态，但这需要端口已经打开。

```
if self.ser.isOpen(): 
```

我问的原因是，有时当我执行我的代码时，我得到一个串行异常，指出端口已经打开，在这种情况下，我想事先知道并在打开它之前尝试关闭它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-01T05:39:16.860

正如您所提到的，您可以通过使用来了解端口的状态`isOpen()`。这将返回一个布尔值`True`or `False`。

例如，当您最初声明一个串行端口时： `ser.serial('/dev/ttyUSB0')`默认情况下打开该端口。您可以使用关闭串行端口`ser.close()`并使用检查串行端口的状态`ser.isOpen()`。

希望[这](https://pythonhosted.org/pyserial/shortintro.html#testing-ports)对您有更多帮助。

# html - 隐藏/显示 div 时 IE8 和 div 重叠

> ID：12780426
> 
> 赞同：1
> 
> 时间：2012-10-08T11:04:51.470
> 
> 标签：html, internet-explorer-8, overlap, css

我使用一些 DIV 来创建内部包含数据的块。我将它们设置为“inline-block”，因为我希望 div 将他的宽度调整为内容。

IE8 根据我的内容调整他的宽度，但我有一个奇怪的问题。

如果您转到此小提琴： http: [//jsfiddle.net/GvMW8/](http://jsfiddle.net/GvMW8/)并单击第一个或第二个链接，您会看到 div 是重叠的。

如果你去这个小提琴： http: [//jsfiddle.net/hhpRP/1/](http://jsfiddle.net/hhpRP/1/)并做同样的操作，它的工作原理！

这两个小提琴之间的唯一区别是主 div 的 'id' 属性。

我不明白为什么我有这个问题，但你能告诉我如何使它与内联块显示和 div id 一起工作吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:35:57.767

看起来像一个小小的 IE8 错误。

查看[http://jsfiddle.net/willemvb/fjqUc/](http://jsfiddle.net/willemvb/fjqUc/)

我为 bigBlock 周围的 div 添加了一个额外的类并使其显示：inline-block。我还缩短了你的 javascript。

这似乎足以让 IE8 听 :)

# java - 远程akka系统端口冲突

> ID：12780443
> 
> 赞同：0
> 
> 时间：2012-10-08T11:05:53.487
> 
> 标签：java, playframework-2.0, akka, eclipse-juno

我正在使用 java 开发一个 play framework 2 系统。play framework 使用与 play framework 集成的 akka 系统与远程 akka 系统连接。远程 akka 系统由一个主节点和一个工作节点组成。两个系统都在同一台电脑上用eclipse juno IDE我已经配置了两个端口2552为主节点，2553端口为worker节点。play 2框架上的akka​​节点是系统自己选择的。play 框架中的 akka 系统预计将使用 akka 配置通过远程查找将消息传递到远程主节点。主节点实习生还将消息传递给远程工作人员，以便通过远程查找进行处理。主节点和工作节点具有以下格式的 application.conf 文件：

```
src/main/resources/application.conf 
```

但是在启动时，主节点和工作节点都决定使用端口号 2552 进行通信。我在下面展示代码片段：

这是播放框架 application.config 文件的代码。

```
localNode {
    akka {
        actor {
            provider = "akka.remote.RemoteActorRefProvider"
        }
        remote {
            transport = "akka.remote.netty.NettyRemoteTransport"
            netty {
                hostname = "127.0.0.1"
                port = 0
            }
        }
    }
} 
```

这是播放 localNode 的配置

```
package controllers;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Map;

import org.codehaus.jackson.JsonNode;
import org.codehaus.jackson.JsonParseException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;

import play.libs.F.Callback;
import play.mvc.WebSocket;
import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.serialization.Serialization;
import akka.serialization.SerializationExtension;

import com.typesafe.config.ConfigFactory;
import  Com.RubineEngine.GesturePoints.*;

public class LocalNode  {

    ActorSystem csystem;
    ActorRef localActor ;

    public LocalNode() { 

       //We create the actor container and a child upon initialization 
     csystem = ActorSystem.create("LocalNode", ConfigFactory.load().getConfig("localNode"));
     localActor = csystem.actorOf(new Props(LocalActor.class),"localActor");
    }

     public void connectMaster (final String classname)
     {  
         localActor.tell(classname);

     }

     public  void connectMaster ()
     {  

     }

     public void connectMaster (final WebSocket.In<JsonNode> in, final WebSocket.Out<JsonNode> out )
     {        
             in.onMessage(new Callback<JsonNode>() {
             public void invoke(JsonNode event) throws JsonParseException, JsonMappingException, IOException {                 

            ObjectMapper mapper = new ObjectMapper();               

            @SuppressWarnings("unchecked")
            Map<String,ArrayList<Object>> jsonMap = mapper.readValue(event, Map.class); 
            GesturePoints gp = new GesturePoints();

            gp.setPoints(jsonMap);
            localActor.tell(gp);            
             }
          });     } 
} 
```

这是play框架中akka actor的代码

```
package controllers;

import Com.RubineEngine.GesturePoints.*;

import akka.actor.ActorRef;
import akka.actor.UntypedActor;
import akka.event.Logging;
import akka.event.LoggingAdapter;

public class LocalActor extends UntypedActor {

     /**
     * 
     */

    ActorRef masterActor; // = getContext().actorFor("akka://MasterNode@127.0.0.1:2552/user/masterActor");
     LoggingAdapter log = Logging.getLogger(getContext().system(), this);

    @Override
    public void onReceive(Object arg) throws Exception {
        System.out.println(" Local Actor 1");
          if(arg instanceof GesturePoints)
         {  System.out.println(" local Actor 2");
              masterActor.tell(" Welcome home " , getSelf());   
              System.out.println(" Local Actor 3");}    
         else 
         {unhandled(arg);}
    }

    public void preStart()
    {
      masterActor = getContext().actorFor("akka://MasterNode@127.0.0.1:2553/user/masterActor");
    }
} 
```

这是主节点 application.conf 的代码

```
masterNode {

akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      remote.netty.port = 2553
    }
 }
}
} 
```

这是主节点的代码

```
package Rubine_Cluster;

import java.util.Arrays;

import com.typesafe.config.ConfigFactory;

import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.kernel.Bootable;

/**
 * Hello world!
 *
 */
public class MasterNode implements Bootable
{
     final ActorSystem system;
     ActorRef masterActor;

      public MasterNode() {

        //Create a child actor of this actor upon initialization 
        system = ActorSystem.create("MasterNode", ConfigFactory.load()
            .getConfig("masterNode"));
         masterActor = system.actorOf(new Props(MasterActor.class),"masterActor");  

      }

      public void startup() {

      }

          public void shutdown() {
            system.shutdown();
          }
} 
```

这是主 akka 演员的代码

```
package Rubine_Cluster;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Map;

import Com.RubineEngine.GesturePoints.*;
import akka.actor.*;
import akka.serialization.Serialization;
import akka.serialization.SerializationExtension;
import akka.serialization.Serializer;

public class MasterActor extends UntypedActor {

    /**
     * 
     */

    ActorRef worker1;

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.println(" Master Actor 5");
        System.out.println(message);

         if(message instanceof GesturePoints)
         {  //GesturePoints gp = (GesturePoints) message;
              System.out.println(" Master Actor 1");             
         try {      worker1.tell(message, getSelf());

             System.out.println(" Master Actor 2");
                } catch (Exception e) {
                  getSender().tell(new akka.actor.Status.Failure(e), getSelf());
                  throw e;
                }

    }
         else{ unhandled(message);}
  }  

    public void preStart()
    {
      worker1 = getContext().actorFor("akka://WorkerNode@127.0.0.1:2552/user/workerActor");
    }

} 
```

这是工作节点 application.conf 的代码

```
workerNode {

akka {
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      remote.netty.port = 2552
    }
 }
}
} 
```

这是工人 nide 的代码

```
package com.theta.gesture;

import com.typesafe.config.ConfigFactory;
import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.kernel.Bootable;

public class WorkerNode implements Bootable{
   ActorSystem system;
   ActorRef worker;

   WorkerNode(){
       system = ActorSystem.create("WorkerNode", ConfigFactory.load()
                .getConfig("workerNode"));
            ActorRef workerActor = system.actorOf(new Props(WorkerActor.class),"workerActor");              
}

    public void shutdown() {
        system.shutdown();

    }

    public void startup() {
    }       
} 
```

这是工人项目中演员的代码

```
package com.theta.gesture;

import java.util.ArrayList;
import java.util.Map;

import Com.RubineEngine.GesturePoints.GesturePoints;
import akka.actor.*;

public class WorkerActor extends UntypedActor {

     private static double              DIST_SQ_THRESHOLD   = 3 * 3; /* threshold to eliminate mouse jitter */

    @Override
    public void onReceive(Object msg) throws Exception {

         if(msg instanceof GesturePoints) 
         { GesturePoints message = (GesturePoints) msg;
          initial_Theta(message);}  

         else {unhandled(msg);}
    }

    public void initial_Theta(GesturePoints p)
    {       System.out.println(" Worker Actor 1");          
        if(p.getPoints().get("X").size() < 3)  //The number of x coordinates as size
        {   return;}                     

        System.out.println(" Worker Actor 2");
             double magsq,dx,dy, recip;

             dx = (double) ((Integer)p.getPoints().get("x").get(2)  - (Integer)p.getPoints().get("x").get(0)) ;
             dy = ((Double)p.getPoints().get("y").get(2)) - ((Double)p.getPoints().get("y").get(0));

             magsq = dx * dx + dy * dy;  
             if(magsq  > DIST_SQ_THRESHOLD)
             {
                 recip = 1/Math.sqrt(magsq);
                double  initial_cos = dx * recip;

                System.out.println(" Worker Actor 3");
                double  initial_sin = dy * recip;

                 System.out.println("Feature cos  " + initial_cos);
                 System.out.println("Gesture sin  " + initial_sin);
             } 
         }  } 
```

这是工作节点上的控制台信息

```
[INFO] [10/08/2012 12:12:44.486] [main] [ActorSystem(WorkerNode)] REMOTE: 
RemoteServerStarted@akka://WorkerNode@127.0.0.1:2552 
```

这是主节点上的控制台信息

```
[INFO] [10/08/2012 12:13:34.633] [main] [ActorSystem(MasterNode)] REMOTE:  
RemoteServerStarted@akka://MasterNode@127.0.0.1:2552 
```

任何关于这种情况的可能进程的想法和建议的解决方案都非常受欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:50:12.463

嵌套部分内的“remote.netty.port = X”应该是“port = X”

# python - 索引/拆分 ['ABC:2', 'CDE:3']

> ID：12780445
> 
> 赞同：0
> 
> 时间：2012-10-08T11:06:03.740
> 
> 标签：python

我正在尝试拆分一个列表，例如标题：

```
['ABC:2', 'CDE:1'] 
```

最终，我想在`:`执行迭代时将之前和之后的位分配给两个不同的变量。

我正在使用 Python 2.7。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:09:30.260

```
>>> L = ['ABC:2', 'CDE:1']
>>> for i, j in (x.split(":") for x in L):
...     print i, j
... 
ABC 2
CDE 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:25:05.843

使用高阶函数（我觉得更舒服）：

```
>>> xs = ['ABC:2', 'CDE:1']
>>> split_xs = map(lambda s : s.split(":"), xs)
>>> for x, y in split_xs:
...   print(x, y)
... 
ABC 2
CDE 1 
```

# java - 检查路径是否代表文件或文件夹

> ID：12780446
> 
> 赞同：164
> 
> 时间：2012-10-08T11:06:05.570
> 
> 标签：java, android, file, path, directory

我需要一个有效的方法来检查 a 是否`String`代表文件或目录的路径。Android 中的有效目录名称是什么？既然出来了，文件夹名称可以包含`'.'`字符，那么系统如何理解是否有文件或文件夹？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-10-08T11:07:14.527

假设`path`是你的`String`.

```
File file = new File(path);

boolean exists =      file.exists();      // Check if the file exists
boolean isDirectory = file.isDirectory(); // Check if it's a directory
boolean isFile =      file.isFile();      // Check if it's a regular file 
```

请参阅[`File`Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

* * *

或者您可以使用 NIO 类`Files`并检查如下内容：

```
Path file = new File(path).toPath();

boolean exists =      Files.exists(file);        // Check if the file exists
boolean isDirectory = Files.isDirectory(file);   // Check if it's a directory
boolean isFile =      Files.isRegularFile(file); // Check if it's a regular file 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-12-16T12:51:30.343

使用 nio API 的清洁解决方案：

```
Files.isDirectory(path)
Files.isRegularFile(path) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-01-14T21:10:59.910

请坚持使用 nio API 来执行这些检查

```
import java.nio.file.*;

static Boolean isDir(Path path) {
  if (path == null || !Files.exists(path)) return false;
  else return Files.isDirectory(path);
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-25T10:10:12.427

系统无法告诉您 a 是否`String`代表 a`file`或`directory`，如果它在文件系统**中不存在。**例如：

```
Path path = Paths.get("/some/path/to/dir");
System.out.println(Files.isDirectory(path)); // return false
System.out.println(Files.isRegularFile(path)); // return false 
```

对于以下示例：

```
Path path = Paths.get("/some/path/to/dir/file.txt");
System.out.println(Files.isDirectory(path));  //return false
System.out.println(Files.isRegularFile(path));  // return false 
```

所以我们看到在这两种情况下系统都返回 false。这对两者都是正确`java.io.File`的`java.nio.file.Path`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-08T11:11:35.047

```
String path = "Your_Path";
File f = new File(path);

if (f.isDirectory()){

  }else if(f.isFile()){

  } 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-08T11:09:58.387

要以编程方式检查字符串是否表示路径或文件，您应该使用 API 方法，例如`isFile(), isDirectory().`

> 系统如何理解是否有文件或文件夹？

我猜，文件和文件夹条目保存在数据结构中，并由文件系统管理。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-06T14:26:19.983

```
public static boolean isDirectory(String path) {
    return path !=null && new File(path).isDirectory();
} 
```

直接回答问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-17T14:35:46.643

```
 private static boolean isValidFolderPath(String path) {
    File file = new File(path);
    if (!file.exists()) {
      return file.mkdirs();
    }
    return true;
  } 
```

# scala - 将一个元素与列表中的所有元素进行比较

> ID：12780449
> 
> 赞同：0
> 
> 时间：2012-10-08T11:06:15.487
> 
> 标签：scala

我现在正在学习 Scala，我有一个场景，我必须将一个元素（比如`num`）与列表中的所有元素进行比较。

认为，

```
val MyList = List(1, 2, 3, 4) 
```

如果`num`列表中的元素等于任何人，我需要返回`true`. 我知道使用`head`and`tail`函数递归地执行它，但是有没有更简单的方法（我想我可以使用 来执行它`foreach`，但我不确定如何准确地实现它）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T11:15:12.803

有多种可能性：

```
val x = 3
MyList.contains(x)
!MyList.forall(y => y != x) // early exit, basically the same as .contains 
```

如果您打算经常这样做，您可以考虑将列表转换为 Set，因为`.contains`在最坏的情况下，列表上的每次查找都与元素数量成正比，而在 Set 上它实际上是[恒定的](http://www.scala-lang.org/docu/files/collections-api/collections_40.html)

```
val mySet = MyList.toSet
mySet.contains(x) 
```

或者简单地说：

```
mySet(x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:13:26.037

对于`contains`任何语言的列表，方法都是相当标准的。Scala`List`也有：

[http://www.scala-lang.org/api/current/scala/collection/immutable/List.html](http://www.scala-lang.org/api/current/scala/collection/immutable/List.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T11:39:42.820

正如其他人所回答的那样，`contains`列表中的方法正是这样做的，这是最容易理解/最有效的方法。

但是，看看您的结束评论，您*将无法*（以优雅的方式）使用`foreach`，因为它会返回`Unit`。Foreach 为每个元素“做”一些事情，但你没有得到任何结果。它对记录/println 语句很有用，但它不充当转换。

如果要单独对每个元素运行函数，可以使用`map`，它返回应用函数结果的列表。所以假设 num = 3，那么`MyList.map(_ == num)`将返回`List(false, false, true, false)`. 由于您正在寻找单个结果，而不是结果列表，因此这不是您所追求的。

为了将一系列事物折叠成一个结果，您将使用*折叠*数据。折叠涉及一个函数，该函数接受两个参数（目前的结果和列表中的当前事物）并返回新的运行结果。因此，这可以在第一个元素上起作用，您还需要提供初始值以用于正在进行的结果（通常是某种零）。

那么，在您的特定情况下，您`Boolean`最终需要一个答案-“找到的元素等于`num`”。所以运行结果将是“到目前为止我是否看到了一个等于`num`”的元素。这意味着初始值为`false`。`true`如果已经看到一个元素，或者如果当前元素等于 ，则函数本身应该返回`num`。

放在一起，它看起来像这样：

```
MyList.foldLeft(false) { case (runningResult, listElem) =>
   // return true if runningResult is true, or if listElem is the target number
   runningResult || listElem == num
} 
```

这并没有在找到目标值后立即停止的好处——而且它远没有 call 简洁`MyList.contains`。但作为一个指导性示例，您可以通过列表上的原始函数操作自己实现这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T11:13:19.480

`List`有一个方法：

```
val found = MyList.contains(num) 
```

# android - 当从我的网络服务器在我的网络服务器中找到新版本但未安装时，我想更新我的 android 应用程序

> ID：12780452
> 
> 赞同：2
> 
> 时间：2012-10-08T11:06:21.780
> 
> 标签：android, android-intent

在我的 android 应用程序中，我创建了一个服务，它将检查我的 web 服务器，如果发现新版本的应用程序，它将更新我的应用程序。 **但我无法安装或我的安装不成功，直到我卸载了 privious 版本。**

我的新版本安装代码是：

```
Intent promptInstall = new Intent(Intent.ACTION_VIEW);          
promptInstall.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() +"/apks/PHS_TKS_v3.apk")), "application/vnd.android.package-archive");
promptInstall.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
startActivity(promptInstall); 
```

清单中的用户权限是：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_OWNER_DATA" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.INSTALL_PACKAGES"/>
    <uses-permission android:name="android.permission.RESTART_PACKAGES"/> 
```

我正在尝试安装新版本的 apk 不是相同的版本如果我手动安装它不会安装如果安装了旧版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:28:54.157

错误消息“已安装具有冲突签名的同名现有包”表示您已经安装了应用程序，但它是使用不同的签名构建的。如果您在 Eclipse 中构建和调试，那么它会使用调试或测试键将 apk 推送到您的手机。您需要卸载应用程序，然后安装使用自定义密钥库构建的版本

# r - 在 R 中搜索行直到它匹配给定的值然后

> ID：12780453
> 
> 赞同：2
> 
> 时间：2012-10-08T11:06:26.960
> 
> 标签：r

我正在 R 中迈出第一步，也许有人可以帮助我。我有一个包含 n 列和 n 行的表，我想编写一个脚本来搜索每一行的值，如果不匹配该值，则它应该继续到下一行，直到匹配该值。一旦它与该值匹配，它应该返回上一行并将该行与表的第一列连接起来。谁能告诉我如何在 R 上做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:57:28.997

让您`X`在 table中查找 value 的第一次出现`foo`。尝试这个：

```
i = min(which(foo==X, arr.ind=T)[,1])
if (i > 1) unlist(c(foo[i-1,], foo[,1])) 
```

您可以通过`unname()`命令进一步删除结果的名称，或者通过`names()`.

# ruby - 使用 ruby 从字符串中提取城市名称

> ID：12780454
> 
> 赞同：-2
> 
> 时间：2012-10-08T11:06:26.703
> 
> 标签：ruby, ruby-on-rails-3.2

有没有办法从字符串中提取城市名称？例如：

```
"I'm going to New York then to Berlin"
# => ["New York", "Berlin"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:04:17.923

您需要一个城市名称列表，这可能是一个巨大的列表，具有多种拼写变体和许多重复项。

一旦你有了你想要的列表，这将返回一个可用的正则表达式，你可以使用它来扫描字符串，返回列表中的城市：

```
cities = [
  'Albuquerque',
  'Alexandria',
  'Jackson',
  'Ammansland',
  'Darby',
  'Atkins Bank',
  'Kingston',
  'Kinston',
  'Caswell',
  'Kinston',
  'Awiehawken',
  'Weehawken',
  'Bergen',
  'Jersey City',
  'Berlin',
  'Marne',
  'Beverwijck',
  'Albany',
  'Breuckelen',
  'Brooklyn',
  'New York',
  'Campbellton',
  'Cross Creek',
  'Fayetteville',
  'Chamassungh',
  'Finlandia',
  'Marcus Hook',
  'Charleston',
  'St. Charles',
].uniq(&:downcase).sort_by(&:downcase)

regex = /\b#{ Regexp.union(cities) }\b/i 
```

构建的正则表达式如下所示：

```
puts regex.source

# => \b(?-mix:Albany|Albuquerque|Alexandria|Ammansland|Atkins\ Bank|Awiehawken|Bergen|Berlin|Beverwijck|Breuckelen|Brooklyn|Campbellton|Caswell|Chamassungh|Charleston|Cross\ Creek|Darby|Fayetteville|Finlandia|Jackson|Jersey\ City|Kingston|Kinston|Marcus\ Hook|Marne|St\.\ Charles|Weehawken)\b 
```

定义正则表达式后，您可以执行以下操作：

```
"I'm going to New York then to Berlin".scan(regex) 
```

这将返回：

```
# => [
    [0] "New York",
    [1] "Berlin"
] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:03:41.933

你可以这样做：

```
regex = /New York|Berlin|Amsterdam|Tokyo|Paris|London/
"I'm going to New York then to Berlin".scan(regex) #=> ["New York", "Berlin"] 
```

如果这不是您的意思，请改进您的问题。

# android - 我可以在 Android 上使用 Static Maps API V2 并像 JavaScript apiV3 一样使用它吗？

> ID：12780457
> 
> 赞同：0
> 
> 时间：2012-10-08T11:06:31.663
> 
> 标签：android, caching, google-maps-api-3, android-maps, google-static-maps

我正在为 Android 开发 Google Map Api。它的速度很慢，因为这里的网络是 GPRS。我正在尝试探索静态地图 API 的性能（和离线使用）。我无法在互联网上找到静态地图 Api 和 Android 交互的任何示例/示例。谷歌不允许你缓存数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:59:34.510

不，静态地图 api 术语特别阻止您将其用于动态地图。但是，您可以在 WebView 中加载 JavaScript 地图 API。

# python - 在 XML 错误的情况下捕获错误

> ID：12780458
> 
> 赞同：2
> 
> 时间：2012-10-08T11:06:37.700
> 
> 标签：python, xml-parsing, python-3.2

我正在使用`xml.dom.minidom`从字符串中解析一些 XML。当提供的 XML 格式错误时，我需要处理错误情况。我发现了什么错误？

换句话说，`BadXml`下面应该替换什么？

```
try:
    from xml.dom import minidom
    in_xml = minidom.parseString(some_string)
except BadXml:
    handle_bad_xml(some_string) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:13:25.597

我认为这就是你想要的：

```
from xml.parsers.expat import ExpatError

try:
    from xml.dom import minidom
    in_xml = minidom.parseString(some_string)
except ExpatError:
    handle_bad_xml(some_string) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:18:59.680

最终唯一的答案是你必须赶上`Exception`。 `minidom`不实现`DOMException`，虽然它确实使用了一些来自 的一般异常`xml.dom`，但它也自由地使用了`TypeError`其他标准的 Python 异常，其唯一的公共基础就是`Exception`它自己。

# javascript - 如何在 javascript 或 jquery 中获取容器 ID

> ID：12780463
> 
> 赞同：1
> 
> 时间：2012-10-08T11:06:56.350
> 
> 标签：javascript, jquery, html

我有一些 HTML 块看起来像

```
<li id="item261">
    <div class="itemdesc">
      <a class="icon-hide">Hide</a>
    </div>
</li> 
```

我有一个像

```
$(document).ready(function()
{
$('.icon-hide').click(function(){
          var elemId = $(this).parent().attr("id");         
    });
}); 
```

单击“.icon-hide”时，我需要“li”标签的 ID。我怎样才能做到这一点？任何帮助..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T11:08:28.640

我建议：

```
$('.icon-hide').click(function(){
    var elemId = $(this).closest('li').attr('id');
}); 
```

这是因为`parent()`方法名称中隐含着查看选择器返回的元素的*父*`div`元素（父元素是）；而`closest()`继续沿着祖先树匹配传递给方法的第一个选择器。

您可以改为使用，但是and`parents()`之间的重要区别是返回*零或一个*匹配项，而将一直持续到根元素并返回它找到的*每个*匹配项，因此它可以返回*零个、一个或多个*匹配项。`closest()``parents()``closest()`*`parents()`*

 ***另一个区别是`parents()`从当前元素的父元素开始搜索，而`closest()`从当前元素本身开始搜索，因此很容易使用`closest()`for 方法返回当前/`$(this)`元素本身。

参考：

*   [`closest()`](http://api.jquery.com/closest/).
*   [`parent()`](http://api.jquery.com/parent/).
*   [`parents()`](http://api.jquery.com/parents/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:09:04.287

```
$(this).closest('li[id]').attr('id') 
```***

# javascript - 菜鸟：window.onresize 需要

> ID：12780467
> 
> 赞同：1
> 
> 时间：2012-10-08T11:07:04.697
> 
> 标签：javascript, jquery

在编程方面，我是一个菜鸟，所以我真的需要你的帮助。我需要更改一些代码来满足我的需求，但我似乎无法以正确的方式做到这一点。我现在需要的是获取这个脚本并在 $(window).width > 480 时使其工作。此外，每次用户调整窗口大小时，我都需要运行此脚本。

我为我的愚蠢问题道歉，但我刚刚开始学习有关 Javascript 和 Jquery 的基础知识，这次我似乎找不到这个问题的答案。

这是代码

```
 $(window).load(function(){
    (function($) {

      $.fn.eqHeights = function() {

          var el = $(this);
          if (el.length > 0 && !el.data('eqHeights')) {
              $(window).bind('resize.eqHeights', function() {
                  el.eqHeights();
              });
              el.data('eqHeights', true);
          }
          return el.each(function() {
              var curHighest = 0;
              $(this).children().each(function() {
                  var el = $(this),
                      elHeight = el.height('auto').height();
                  if (elHeight > curHighest) {
                      curHighest = elHeight;
                  }
              }).height(curHighest);
          });
      };

      $('.articles_container').eqHeights();

  }(jQuery));
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:11:48.980

要在调整大小的窗口上执行它，请执行以下操作：

```
$(window).resize(function() {
   $('.articles_container').eqHeights();
} 
```

此外，如果您想在媒体查询事件上执行 javascript，请使用 sweet [**enquire.js**](http://wickynilliams.github.com/enquire.js/) javascript 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:28:30.967

该窗口有一个`.innerWidth`我认为仍然可以通过 jQuery 访问的属性。所以你的代码可能是这样的：

```
$(window).resize(function() {
   if($(window).innerWidth < 480) return;
   $('.articles_container').eqHeights();
}) 
```

# php - RESTful webservice with Silex PHP : good choice?

> ID：12780475
> 
> 赞同：7
> 
> 时间：2012-10-08T11:07:16.523
> 
> 标签：php, web-services, rest, architecture, silex

I have to create a REST API for a mobile application and I don't really know how to begin it. I read some articles and tutorial about REST in general, but I didn't find a complexe API example written in PHP.

So after more researches I choose to use a micro-framework (rather than start from scratch). A full framework like Symfony2 or Zend provide some methods that I will not need, and I think they are too big for. Because I already worked with Silex PHP, I choose it.

But one question stay in my mind : **is Silex a good choice to create a (future) big API ?**

The API will evolve and could be more and more complexe (understand more URI will be avalaible in future, because we have goal to migrate from SOAP to REST).

Since Silex PHP uses a single file convention, I'm a little scared to use it (because file will be more and more larger, and I supposed with performances falling). Also I would like to cache on server results (additionally with HTTP caching) when necessary, to reduce queries to database (MySQL).

What do you think and what do you advise ? :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-17T15:39:00.710

Silex is not a bad choice for building out an api service. I would recommend maybe starting with [Silex Kitchen Edition](https://github.com/lyrixx/Silex-Kitchen-Edition) for some decent organization and other useful configs and strip out what you don't need. Also, I would look for existing restful projects written in silex/symfony. As far as scalability you should [read this post](https://igor.io/2012/11/09/scaling-silex.html) from Igor Wiedler one of the creators of silex.

* * *

## 回答 #2

> 赞同：-9
> 
> 时间：2012-10-12T16:29:59.710

Silex is a microframework meant to be used in small projects. It's suitable for small websites with low traffic. It is also a good way to introduce yourself into some concepts like dependency injection, without introducing too many abstraction layers. They've recently introduced the target in their website as "single-file apps", giving you a bit of the target scope for the framework.

I think it should be fairly accepted fact that Silex is not suitable for anything big. Silex will not perform badly if your project works, but it will not be the nicest to work with once you start growing, as it will not help you too much. Symfony uses concepts you'll see in Silex and is a full stack framework you can use for bigger applications with lots of bundles, plugins and a big community there to help you.

Edit:

Note I cannot delete the answer as it has been accepted. I haven't used PHP in years now, since then, Silex has changed their approach from "microframework" to being just a library it seems. Whatever the case, the down-voting I believe must come from people involved with the project, probably upset of having created something which didn't take off as they may have hoped.

Just read the product docs, this was a request for an opinion which was given and accepted. I don't think this question belongs to stackoverflow anyway.

# c++ - 如何线程化作为类方法的可调用函数

> ID：12780477
> 
> 赞同：0
> 
> 时间：2012-10-08T11:07:28.683
> 
> 标签：c++, boost, c++11, visual-studio-2012, boost-thread

使用 MS VC++ 2012 和 Boost 库 1.51.0

这是我的问题的快照：

```
struct B {
    C* cPtr;
}

struct C {
    void callable (int);
}

void function (B* bPtr, int x) {
    // error [1] here
    boost::thread* thrPtr = new boost::thread(bPtr->cPtr->callable, x) 
    // error [2] here
    boost::thread* thrPtr = new boost::thread(&bPtr->cPtr->callable, x) 
} 
```

[1] 错误 C3867: 'C::callable': 函数调用缺少参数列表；使用 '&C::callable' 创建指向成员的指针

[2] error C2276: '&' : 对绑定成员函数表达式的非法操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:20:52.963

你想要`boost::thread* thrPtr = new boost::thread(&C::callable, bPtr->cPtr, x);`。这是一个工作示例：

```
#include <sstream>
#include <boost/thread.hpp>
#include <boost/bind.hpp>

struct C {
    void callable (int j)
    { std::cout << "j = " << j << ", this = " << this << std::endl; }
};

struct B {
    C* cPtr;
};

int main(void)
{
    int x = 42;
    B* bPtr = new B;
    bPtr->cPtr = new C;

    std::cout << "cPtr = " << bPtr->cPtr << std::endl;;

    boost::thread* thrPtr = new boost::thread(&C::callable, bPtr->cPtr, x);
    thrPtr->join();
    delete thrPtr;
} 
```

样本输出：

```
cPtr = 0x1a100f0
j = 42, this = 0x1a100f0 
```

# tfs - TFS2010 如何更新上一个日期的 WorkItem Remaining/Completed Work

> ID：12780487
> 
> 赞同：0
> 
> 时间：2012-10-08T11:08:02.600
> 
> 标签：tfs

在网上搜索了很多之后，我似乎找不到这个选项。

如果我忘记更新我的工作项目剩余/已完成的工作，我该如何修改之前的日期？

通过遗忘；燃尽图看起来不对。虽然我很感激我可以在我忘记的日期之后的某个日期更新值，但这仍然使燃尽图看起来很有趣，也意味着我不能回顾性地记录所做的工作。

TFS 电动工具可能会在这里提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:31:45.597

我不知道有任何 powertool 可以做到这一点，但是过去修订的字段在使用客户端 API 时是只读的，因此不太可能存在工具。

关于您唯一的选择是直接进入数据库，可能是 WorkItemsWere 表，这通常不是一个有趣的体验。

# android - Android - 更改目标SDK版本后不允许跨域请求

> ID：12780495
> 
> 赞同：0
> 
> 时间：2012-10-08T11:08:39.000
> 
> 标签：android, cross-domain

我正在开发一个 Android 应用程序（使用 PhoneGap），最初将 14 版本作为 SDK 目标，但是当我将其更改为 16 时，它不再允许跨域请求，我还需要在清单上进行更改吗??

这是我在 LogCat 中收到的消息：

```
E/Web Console(27364): XMLHttpRequest cannot load http://myserver. Origin null is not allowed by Access-Control-Allow-Origin. at null:1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:20:45.710

我怀疑会有什么可以改变的。
我在迁移到 ICS 时遇到了类似的问题，因为它们更新了浏览器使用的 WebKit 版本，从而改变了它的行为。

# arrays - Haskell 中令人费解的记忆行为

> ID：12780497
> 
> 赞同：9
> 
> 时间：2012-10-08T11:08:45.283
> 
> 标签：arrays, haskell

我正在尝试比较 Haskell 列表和数组的性能并遇到奇怪的行为。我观察到，如果我创建一个数组然后打印它会占用“x”MB 内存，但是如果我使用“elems”函数将数组转换为列表然后打印它占用的内存小于“x”。'elems' 函数不应该从数组中创建一个新列表吗？它不应该比不创建列表的函数占用更多空间吗？我正在使用 -O2 和 -fspec-constr 优化标志。我还使用 -p 标志来分析功能。

这是没有中间列表的代码，

```
fun  n = runST $  do
      final_soln <- newArray_ ((1,1), (n, (10 ^ n))) :: ST s ((STUArray s)  (Int,Int) Int)
      U.unsafeFreeze final_soln

main = do 
    [n] <- getArgs
    {-#  SCC "file-writing" #-} (writeFile "cprod-starray-creation.txt"  $ show $ fun (read n)) 
```

这是带有中间列表的代码，

```
fun :: Int -> UArray (Int,Int) Int
fun  n = runST $  do
      final_soln <- newArray_ ((1,1), (n, (10 ^ n))) :: ST s ((STUArray s)  (Int,Int) Int)
      U.unsafeFreeze final_soln

main = do 
    [n] <- getArgs
    {-#  SCC "file-writing" #-} (writeFile "cprod-starray-creation.txt"  $ show $ elems $ fun (read n)) 
```

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T13:30:03.397

第一个变体缺乏懒惰，这不是你的错。将运行的分析输出 ( `+RTS -hd`) 与参数 6 进行比较给出了第一个提示：

![分析第一个代码](../Images/080dd82459f81af8888c7f8a82188f0c.png)

是第一个代码的分析输出，而

![分析第一个代码](../Images/b036179bcb910b7034068b58dc27d91a.png)

是第二个代码的结果。数组本身 ( `ARR_WORDS`) 在两者中占用相同的空间。您还可以看到，第一个代码生成了一个大的`:`构造函数列表（构造函数可以识别）`Int`（恰好具有 name `Int#`）。

现在这不能是打印的最终字符串，因为那将是`Char`s then （使用构造函数`C#`）。它也不能是数组中的元素列表，因为数组包含零，并且垃圾收集器有一个小`Int`s 的缓存（在 [-16,16] 范围内），它将使用它来代替分配（或实际上代替复制）一个新的构造函数。

另请注意，构造函数大约需要 24MB，`:`构造函数大约需要 16MB `I#`。知道前者需要 3 个词，后者需要 2 个词，而我的机器上的一个词是 8 个字节长，我们发现列表是 100000=10^6 个元素长。所以一个很好的候选是第二个索引参数的范围。

那么这个数组在哪里呢？让我们追踪您的来电`show`：

```
showsIArray :: (IArray a e, Ix i, Show i, Show e) => Int -> a i e -> ShowS
showsIArray p a =
    showParen (p > 9) $
    showString "array " .
    shows (bounds a) .
    showChar ' ' .
    shows (assocs a) 
```

（来自[Data.Array.Base](http://hackage.haskell.org/packages/archive/array/latest/doc/html/src/Data-Array-Base.html)的代码）。显然，罪魁祸首一定是在`assocs`通话中，所以这里是来源：

```
assocs :: (IArray a e, Ix i) => a i e -> [(i, e)]
assocs arr = case bounds arr of
    (l,u) -> [(i, arr ! i) | i <- range (l,u)] 
```

由于我们正在寻找索引列表，因此该`range`调用看起来很可疑。为此，我们必须查看[GHC.Arr](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Arr.html)的来源（不幸的是黑线鳕搞砸了）：

```
instance (Ix a, Ix b) => Ix (a, b) where
    range ((l1,l2),(u1,u2)) = [ (i1,i2) | i1 <- range (l1,u1), i2 <- range (l2,u2) ] 
```

现在我们找到了罪魁祸首：在这里，`range (l2,u2)`将评估列表`[1..1000000]`并为索引的第一个组件中的每一步*共享*。

现在我猜你会好奇地尝试使用第二个代码`assocs`而不是`elems`第二个代码，并期待那里的空间泄漏。但你不会看到它。原因是它`show`不是内联的，而是`assocs`它本身被内联，然后还有一大堆其他功能，包括`range`有效地避免共享。`-ddump-rule-firings`您可以通过传递给 GHC来（在某种程度上）看到这一点：

```
$ ghc --make -O2 -fspec-constr -ddump-rule-firings -fforce-recomp code2.hs -prof -fprof-auto
[1 of 1] Compiling Main             ( code2.hs, code2.o )
Rule fired: SPEC GHC.Arr.$fIx(,)
Rule fired: unpack
Rule fired: Class op fail
Rule fired: unpack
Rule fired: Class op show
Rule fired: Class op newArray_
Rule fired: unsafeFreeze/STUArray
Rule fired: Class op >>=
Rule fired: Class op >>=
Rule fired: Class op showList
Rule fired: Class op rangeSize
Rule fired: Class op rangeSize
Rule fired: Class op bounds
Rule fired: Class op bounds
Rule fired: Class op numElements
Rule fired: Class op index
Rule fired: Class op unsafeAt
Rule fired: Class op range
Rule fired: fold/build
Rule fired: SPEC GHC.Real.^
Rule fired: unpack-list
Rule fired: foldr/app
Rule fired: unpack-append
Rule fired: foldr/app
Rule fired: unpack-append
Rule fired: >#
Rule fired: >#
Rule fired: x# <=# x#
Rule fired: x# -# x#
Rule fired: 0# *# x#
Rule fired: 0# +# x#
Linking code2 ... 
```

# java - 为什么当我向“imdb.com”发出 http 请求时出现 403 错误？

> ID：12780498
> 
> 赞同：1
> 
> 时间：2012-10-08T11:08:43.910
> 
> 标签：java, html, http, request, imdb

我想做一个电影经理。我想只为我的 Java 应用程序提供 imdb 上电影的 url，它会自动获取制片人姓名和其他信息。

它正在与其他站点一起工作，与这个站点一起工作，而不是 HTML，我得到一个 Java 错误，被异常捕获...... 403 错误（禁止）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:13:15.707

> 403错误（禁止）

禁止的意思是“你不能这样做”。我不知道您希望得到什么答案超出“**不要那样**做”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:19:16.900

如果我的预测是正确的，imdb 会检查浏览器信息，只需更改您的用户代理标头，也许还添加一个引用标头，您就可以开始了。

# android - Android 2.3.3 Gingerbread - 找不到位置

> ID：12780501
> 
> 赞同：0
> 
> 时间：2012-10-08T11:08:47.053
> 
> 标签：android, gps, location, android-2.3-gingerbread

我正在使用 getLastKnownLocation 方法来查找用户的位置，但该方法总是给我 null。我一直在测试我在不同系统版本（例如 2.2.1、4.0.4）上使用的方法，一切正常。在 2.3.3 上，我总是得到空值，甚至在我设法获得位置后也没有，而在其他系统版本上，我总是得到位置，空值甚至没有出现一次。这发生在我准备的每个测试条件下，无论是在真实设备上还是在模拟器上。

我知道 getLastKnownLocation 是如何工作的，我正在检查提供程序是否已启用，我正在请求位置更新，并且我正在清单中使用正确的权限。

我认为那个确切的系统版本有问题。有没有人能够证实我对这个话题的看法？在 Android 2.3.3 上获取位置是否存在错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:11:54.100

`getLastKnownLocation``null`如果没有以前的位置可以返回。如果是这种情况，您需要等待`onLocationChanged`您注册的侦听器中的值。

请注意，GPS 不适用于大城市、建筑物内等。此外，某些设备具有额外的位置检索机制，例如 A-GPS。所以我想这也可能是设备特定的问题。

不太可能是 2.3.3 的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:21:49.953

我在开发地图应用程序时遇到了同样的问题。经过长时间的尝试，我找到了解决方案。

```
location = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            locManager.requestLocationUpdates(provider,0, 0, locationListener);
            location = locManager.getLastKnownLocation(provider);
            locManager.requestLocationUpdates(provider,0, 0, locationListener); 
```

调用 getLastKnownLocation 和 requestLocationUpdates 两次，您的 crueent 位置将设置您的最后一个位置。你的问题就会得到解决，

# constraint-programming - MiniZinc、Gecode 去除溶液分离器

> ID：12780502
> 
> 赞同：1
> 
> 时间：2012-10-08T11:08:52.233
> 
> 标签：constraint-programming, minizinc

我有一个 minizinc 模型，我想找到所有解决方案（我使用 gecode）然后打印统计信息，这很容易：

```
mzn-gecode -as foo.mzn 
```

但是这个模型会生成数千个解决方案，并为每个解决方案打印一个分隔符：

```
----------

----------

----------

----------
========== 
```

我需要删除这些分隔符，只打印统计信息。有办法吗？

==更新==

我能够通过更改 Gecode 源来解决这个问题

```
gecode/flatzinc/flatzinc.cpp 
```

我删除的地方

```
out << "----------" << std::endl; 
```

也许有更好的解决方案，但这对我很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:47:48.807

显示这些分隔符是因为您没有任何变量的输出语句。

例如

```
output [
  show(x) ++ "\n" ++ show(y)
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-12T14:08:33.563

```
--soln-sep <s>, --soln-separator <s>, --solution-separator <s>
        Specify the string used to separate solutions.
        The default is to use the FlatZinc solution separator,
        "----------". 
```

添加`--soln-sep <s>`覆盖标准分隔符

# objective-c - CoreData 是否总是尊重 returnObjectsasFaults？

> ID：12780509
> 
> 赞同：4
> 
> 时间：2012-10-08T11:09:13.010
> 
> 标签：objective-c, core-data

在下面的代码中，我明确地将 returnObjectsasFaults 设置为 false。然后在请求之后我检查对象是否有故障。NSAssert 失败。

也许是因为该对象是一个 imageBlob。也许我错过了什么？我只是想确定一下。

这是一个小问题。如果我摆脱 nsassert，那么我的程序无论如何都会运行。还是很烂。

```
+(NSFetchRequest * )fetchRequestInContext:(NSString*) entityName:(NSPredicate *) predicate:(NSString*) sortKey:(BOOL) sortAscending
{
    //NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:entityName inManagedObjectContext:[BGMDCRManagedObjectContextThreadHandler managedObjectContext]];
    [request setEntity:entity];

    if(predicate != nil)
    {
        [request setPredicate:predicate];
    }

    if(sortKey != nil)
    {
        NSMutableArray * sortDescriptorArray =[self getMoreSearchDescriptorsForEntity:entityName];
        [request setSortDescriptors:sortDescriptorArray];
    }

    //request.fetchLimit = 200; //can be overridden somewhere else
    request.returnsObjectsAsFaults = false;
    if (entityName == BusinessString)
    {
        request.relationshipKeyPathsForPrefetching = arrayRelationship;
    }

    //[request setIncludesSubentities:<#(BOOL)#>
    return request;
}

+(NSArray *) searchObjectsInContextEntityName:(NSString*) entityName Predicate:(NSPredicate *) predicate SortKEy:(NSString*) sortKey Booelan:(BOOL) sortAscending 
{
    NSManagedObjectContext * moc =[BGMDCRManagedObjectContextThreadHandler managedObjectContext];
    NSFetchRequest *request = [self fetchRequestInContext:entityName:predicate:sortKey:sortAscending];

    NSError *error;

    if (entityName==BusinessString)
    {
        error=nil; //Some code for breakpoint
    }

    NSArray *fetchedObjects = [moc executeFetchRequest:request error:&error];

    for (NSManagedObject * mo in fetchedObjects) {
        NSAssert(!mo.isFault, @"For some reason mo is fault");
    }

    return fetchedObjects;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T18:58:56.753

我在子 NSManagedObjectContext 上操作时遇到了同样的问题。我创建一个如下

```
NSManagedObjectContext *workerMOC = nil;
workerMOC = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
workerMOC.parentContext = self.moc; // this is my main NSManagedObjectContext 
```

现在，如果我这样做：

```
[workerMOC performBlock:^{
  NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"Company"];
  [fetchRequest setReturnsObjectsAsFaults:NO];
  NSArray *allCompanies = [workerMOC executeFetchRequest:fetchRequest error:nil];
}]; 
```

我在所有公司都有过错。当然，澄清一下，如果我在 self.moc 上执行 fetch 请求，这不会发生。

但是，如果我使用以下方法，我会得到适当的预取结果：

```
[workerMOC performBlock:^{
  NSFetchRequest *fetchRequest = [[[NSFetchRequest alloc] init] autorelease];
  fetchRequest.entity = [NSEntityDescription entityForName:@"Company" inManagedObjectContext:workerMOC];
  [fetchRequest setReturnsObjectsAsFaults:NO];
  NSArray *allCompanies = [workerMOC.persistentStoreCoordinator executeRequest:fetchRequest
                                                                   withContext:workerMOC
                                                                         error:nil];
}]; 
```

所以似乎是这样，在 NSManagedObjectContexts 上获取直接绑定到 NSPersistentStoreCoordinator 工作得很好。但是在子 NSManagedObjectContexts 的情况下，它不直接绑定到存储，而是绑定到父上下文，不会按预期运行。我在 Apple 文档中找不到与此问题相关的任何内容，但我仍然认为这不是错误。

# html - CSS 规则如何覆盖另一个 CSS 规则？

> ID：12780511
> 
> 赞同：11
> 
> 时间：2012-10-08T11:09:28.753
> 
> 标签：html, css, dom

所以，这就是我正在做的事情：

```
#id-form td {
padding: 0 0 10px 0;
}

#particular-td {
border: 1px solid black;
text-align: center;
background-color: #DFDFDF;
height: 30px;
padding: 10px;
} 
```

我有一张桌子`#id-form`，我在上面设置了所有`td`的 s `padding-bottom: 10px`。
但是在一个特殊的场合，我想要一个特定`td`的`padding: 10px`方向，我在`#particular-td`.

显然，我将 CSS 样式按顺序放在一个外部文件中。
但是渲染的 CSS 只有`padding-bottom`, 并且`padding: 10px`似乎被覆盖了！？

*请解释：*
*这是如何发生的以及为什么会发生这种情况？*
*我应该如何安排这些规则来解决我的问题（内联样式除外）？*

`'table'`编辑：我之前`#id-form`在表中删除。我从来没有使用过这个，我只是在这里提到它以便能够更好地解释它。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-08T11:14:20.080

因为[CSS 特殊性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。选择器的权重是根据组成它的组件进行评估的，其中`id`' 的权重为 100，`class`es 的权重为 10，`element`选择器的权重为 1。

所以在你的例子中：

```
table#id-form td 
```

权重为 102（`table#id`是 101 和`td`1），而这个：

```
#particular-td 
```

权重为 100。如果您将第二个更改为：

```
#id-form #particular-td 
```

您将获得 200 的权重，这将覆盖之前的选择器。只有在万不得已的情况下才应该使用`!important`，因为这几乎可以防止您进一步覆盖它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T11:12:40.140

这与特异性有关。`table#id-form td`比 更具体`#particular-td`。具有较高特异性的规则优先于具有较低特异性的规则。

以下是一些资源，可帮助您开始了解其工作原理：

*   [粉碎杂志文章](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)
*   [W3C 特异性规范](http://www.w3.org/TR/css3-selectors/#specificity)
*   [特异性计算器](http://specificity.keegan.st/)

**关于使用 !important，正如其他人所建议的那样：**

人们可能很想使用`!important`关键字来解决这个问题，但这并不是一个好主意：

1.  维护/故障排除变得很痛苦
2.  它打破了 CSS 的正常流程
3.  该规则以后不能被其他规则覆盖

阅读特异性可能需要几分钟，但当你掌握它时，花时间是值得的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T11:13:46.480

您有两种方法，要么在填充特定 td 后添加 !important：

```
padding: 10px !important; 
```

或者，您的选择器更改如下：

```
table#id-form td#particular-td {
border: 1px solid black;
text-align: center;
background-color: #DFDFDF;
height: 30px;
padding: 10px;
} 
```

两者都很好。如果可以避免，我个人不喜欢使用 !important 。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T11:11:22.303

试试这段代码，我已经在你的 CSS 中添加了 !important，在这种模式下可以忽略 table#id-form td 的填充

```
#particular-td {
border: 1px solid black;
text-align: center;
background-color: #DFDFDF;
height: 30px;
padding: 10px !important;
} 
```

# maven - 带有 Tynamo 原型的 TapestryFilter 上的 ClassNotFoundException

> ID：12780515
> 
> 赞同：0
> 
> 时间：2012-10-08T11:09:47.787
> 
> 标签：maven, jetty, tapestry, tynamo

我正在使用基于 tynamo 和 Tapestry 的 tynamo-archetype 建立一个新项目（我们称之为部门），并且在运行 jetty 以对其进行测试时遇到了问题。

`mvn archetype:generate`我在 tynamo 目录上生成了 id 。

## 错误

```
[INFO] ------------------------------------------------------------------------
[INFO] Building division-t5-tynamo - My Tynamo project
[INFO]    task-segment: [jetty:run]
[INFO] ------------------------------------------------------------------------
[INFO] Preparing jetty:run
[INFO] [resources:resources {execution: default-resources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 6 resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources {execution: default-testResources}]
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] Copying 1 resource
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Nothing to compile - all classes are up to date
[INFO] [jetty:run {execution: default-cli}]
[INFO] Configuring Jetty for project: division-t5-tynamo - My Tynamo project
[INFO] webAppSourceDirectory D:\ecommerce\workspaces\division\division-t5-tynamo\src\main\webapp does not exist. Defaulting to D:\ecommerce\workspaces\division\division-t5-
tynamo\src\main\webapp
[INFO] Reload Mechanic: automatic
[INFO] Classes = D:\ecommerce\workspaces\division\division-t5-tynamo\target\classes
[INFO] Context path = /
[INFO] Tmp directory = D:\ecommerce\workspaces\division\division-t5-tynamo\target\tmp
[INFO] Web defaults = org/eclipse/jetty/webapp/webdefault.xml
[INFO] Web overrides =  none
[INFO] web.xml file = file:/D:/ecommerce/workspaces/division/division-t5-tynamo/src/main/webapp/WEB-INF/web.xml
[INFO] Webapp directory = D:\ecommerce\workspaces\division\division-t5-tynamo\src\main\webapp
2012-10-08 12:39:02.681:INFO:oejs.Server:jetty-7.6.0.v20120127
2012-10-08 12:39:02.915:INFO:oejpw.PlusConfiguration:No Transaction manager found - if your webapp requires one, please configure one.
2012-10-08 12:39:03.087:INFO:oejsh.ContextHandler:started o.m.j.p.JettyWebAppContext{/,file:/D:/ecommerce/workspaces/division/division-t5-tynamo/src/main/webapp/},fil
e:/D:/ecommerce/workspaces/division/division-t5-tynamo/src/main/webapp/
2012-10-08 12:39:03.102:WARN:oejs.Holder:
java.lang.ClassNotFoundException: org.apache.tapestry5.TapestryFilter 
```

## pom.xml

我唯一的自定义是删除以下行...

```
<contextPath>/${project.artifactId}</contextPath> 
```

这里是完整的 pom

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>fr.company.division</groupId>
    <artifactId>division-t5-tynamo</artifactId>
    <packaging>war</packaging>
    <version>4.9.0-SNAPSHOT</version>
    <name>division-t5-tynamo - My Tynamo project</name>
    <url>http://tynamo.org/</url>

<!--  -->

    <properties>
        <tynamo-version>0.3.0</tynamo-version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <build>
        <finalName>division-t5-tynamo</finalName>
        <pluginManagement>
            <plugins>
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.3.2</version>
                </plugin>
                <plugin>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <version>2.11</version>
                </plugin>
                <plugin>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.1.1</version>
                </plugin>
            </plugins>
        </pluginManagement>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <optimize>true</optimize>
                </configuration>
            </plugin>

            <!-- Run the application using "mvn jetty:run" -->
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>7.6.0.v20120127</version>
                <configuration>
                    <contextPath>/${project.artifactId}</contextPath>
                    <systemProperties>
                        <systemProperty>
                            <name>tapestry.execution-mode</name>
                            <value>development</value>
                        </systemProperty>
                    </systemProperties>
                </configuration>
            </plugin>

            <!-- This changes the WAR file packaging so that what would normally go into WEB-INF/classes
                 is instead packaged as WEB-INF/lib/division-t5-tynamo.jar. This is necessary for Tapestry
                 to be able to search for page and component classes at startup. Only
                 certain application servers require this configuration, please see the documentation
                 at the Tapestry 5 project page (http://tapestry.apache.org/tapestry5/).
             -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1-beta-1</version>
                <configuration>
                    <archiveClasses>true</archiveClasses>
                </configuration>
            </plugin>

            <!-- This gets the plugin to clean up the cobertura.ser file left
        in the root directory. -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.2</version>
                <executions>
                    <execution>
                        <id>clean</id>
                        <goals>
                            <goal>clean</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <reporting>
        <!-- Adds a report detailing the components, mixins and base classes defined by this module. -->
        <plugins>
            <plugin>
                <groupId>org.apache.tapestry</groupId>
                <artifactId>tapestry-component-report</artifactId>
                <version>5.2.4</version>
                <configuration>
                    <rootPackage>fr.company.division</rootPackage>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-project-info-reports-plugin</artifactId>
                <version>2.1.2</version>
                <configuration>
                    <dependencyDetailsEnabled>false</dependencyDetailsEnabled>
                    <dependencyLocationsEnabled>false</dependencyLocationsEnabled>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.5.1</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-report-plugin</artifactId>
                <version>2.12</version>
            </plugin>
        </plugins>
    </reporting>

    <dependencies>

        <dependency>
            <groupId>org.tynamo</groupId>
            <artifactId>tapestry-model-hibernate</artifactId>
            <version>${tynamo-version}</version>
        </dependency>

        <dependency>
            <groupId>org.tynamo</groupId>
            <artifactId>tapestry-model-test</artifactId>
            <version>${tynamo-version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.tynamo</groupId>
            <artifactId>tapestry-model-web</artifactId>
            <version>${tynamo-version}</version>
        </dependency>

        <dependency>
            <groupId>org.tynamo</groupId>
            <artifactId>tapestry-routing</artifactId>
            <version>0.0.1</version>
        </dependency>

        <dependency>
            <groupId>com.h2database</groupId>
            <artifactId>h2</artifactId>
            <version>1.3.165</version>
        </dependency>

    </dependencies>

    <!--
    IMPORTANT NOTE:

    Configuring repositories is against Maven best practices. If you have
    a repository manager in use, remove this section and configure your
    repository manager to proxy these repositories instead.
    -->
    <repositories>
        <!-- Don't use snapshots unless absolutely necessary -->
        <repository>
            <id>codehaus-nexus-snapshots</id>
            <name>Codehaus Nexus Snapshots</name>
            <url>https://nexus.codehaus.org/content/groups/snapshots-group/</url>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
            <releases>
                <enabled>false</enabled>
            </releases>
        </repository>

        <repository>
            <id>repository.jboss.org</id>
            <url>https://repository.jboss.org/nexus/content/repositories/releases</url>
            <releases>
                <enabled>true</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>

        <!--
            little hack to disable java.net repositories because they are not working
            and they corrupt your local repo.
        -->
        <repository>
            <id>maven-repository.dev.java.net</id>
            <url>https://maven-repository.dev.java.net/nonav/repository</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>
        <repository>
            <id>java.net</id>
            <url>https://maven-repository.dev.java.net/nonav/repository</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>

    </repositories>

</project> 
```

## Web.xml

Tapestry 过滤器在 web.xml 中声明得很好，并且 java 包似乎与属性匹配：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE web-app
            PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
            "http://java.sun.com/dtd/web-app_2_3.dtd">
    <web-app>

        <display-name>division-t5-tynamo</display-name>

        <context-param>
            <!-- The only significant configuration for Tapestry 5, this informs Tapestry
                of where to look for pages, components, mixins and entities. -->
            <param-name>tapestry.app-package</param-name>
            <param-value>fr.company.division</param-value>
        </context-param>
        <!--
            Specify some additional Modules for two different execution
            modes: development and qa.
            Remember that the default execution mode is production
            -->
        <context-param>
            <param-name>tapestry.development-modules</param-name>
            <param-value>
                fr.company.division.services.DevelopmentModule
            </param-value>
        </context-param>
        <context-param>
            <param-name>tapestry.qa-modules</param-name>
            <param-value>
                fr.company.division.services.QaModule
            </param-value>
        </context-param>
        <filter>
            <filter-name>app</filter-name>
            <filter-class>org.apache.tapestry5.TapestryFilter</filter-class>
        </filter>

        <filter-mapping>
            <filter-name>app</filter-name>
            <url-pattern>/*</url-pattern>
        </filter-mapping>

        <welcome-file-list>
            <welcome-file>index</welcome-file>
        </welcome-file-list>

    </web-app> 
```

我不知道有什么问题。这不是我的第一个 Tapestry 项目，但这是我第一次使用 tynamo ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:57:32.717

一切看起来都很好。我已经尝试过与您完全相同的配置（groupId、artifactId 和 package），没有任何问题。唯一的区别是我在 MacOSX 上，看起来你正在使用 MS Windows。/ *contextPath*也不应该是一个问题。您可以尝试使用不同的码头版本吗？也许使用与您已经工作的任何其他 Tapestry 项目相同的版本。您可以尝试使用 Tapestry 在其原型中使用的 6.1.16 版本：[https ://svn.apache.org/repos/asf/tapestry/tapestry5/trunk/quickstart/filtered/archetype-resources/pom.xml](https://svn.apache.org/repos/asf/tapestry/tapestry5/trunk/quickstart/filtered/archetype-resources/pom.xml)

# build - TeamCity 工件；排除单个文件

> ID：12780516
> 
> 赞同：13
> 
> 时间：2012-10-08T11:09:48.500
> 
> 标签：build, continuous-integration, teamcity

我有一个 TeamCity 构建配置，其中包括以下发布工件：

```
Source\Builder\bin\Release\*.dll=>release 
```

这很好用，但是我想排除一个 dll（有很多），并且读过您可以使用 + & - 运算符来执行此操作。类似于以下内容：

```
+: Source\Builder\bin\Release\*.dll=>release
-: Source\Builder\bin\Release\Builder.* 
```

一旦我添加了这些，就不会发布任何工件，并且我在构建日志中收到以下错误（看起来它正在将 + 计为路径的一部分）：

```
[Publishing artifacts] Collecting files to publish [+:Source\Builder\bin\Release\*.dll=>release]
[Publishing artifacts] Artifacts path +:Source/Builder/bin/Release/*.dll not found 
```

我正在使用 7.1.1 版，任何人都有任何想法（我不确定这些运算符是否有效）。我已经看到了一个 MSBuild 的解决方案，但很惊讶这个功能不可用。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T11:18:59.377

我不相信你可以。

但是，如果您在另一个构建配置中使用工件作为工件依赖项，则可以在那里排除特定文件。

设置依赖项时，可以像这样指定负运算符：

```
+:release/**=>Dependencies/SomeProject
-:release/SomeBinary.dll 
```

这是一个可怕的 hack，但是你可以让它工作的一种方法是设置一个新的构建配置，它将依赖项作为一个工件依赖项，不包括一个二进制文件，然后发布它自己的工件。

如，创建一个新的构建配置并发布：

```
Dependencies/SomeProject=>release 
```

然后从这个构建配置中引用工件而不是另一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-10T18:45:15.433

派对有点晚了，但仍然没有修复......

我最终为项目添加了最后一个构建步骤。它是*命令行 > 自定义脚本*。然后，我使用此命令删除了工件中不需要的文件。这将在工件收集之前运行。

```
del /S /Q "src\apps\*.xml" 
del /S /Q "src\apps\*.pdb" 
```

[`del`](http://ss64.com/nt/del.html)命令说明

```
/S  Delete from all Subfolders (DELTREE)
/Q  Quiet mode, do not give a Yes/No Prompt before deleting
 *  Match any characters 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-10T09:22:42.963

我们当前的选项是在 [http://youtrack.jetbrains.com/issue/TW-5244](http://youtrack.jetbrains.com/issue/TW-5244)上投票支持此功能请求，然后返回解决方法。

[TeamCity 工件路径结合文件夹](https://stackoverflow.com/questions/10953063/teamcity-artifact-paths-combine-folders)问题提示，同一目标文件夹可重复用于多个路径模式。

[TeamCity 文档](http://confluence.jetbrains.com/display/TCD7/Configuring+General+Settings#ConfiguringGeneralSettings-artifactPaths)还指出

> TeamCity 将从模式中第一次出现通配符开始创建目录。

因此，在许多情况下，可以将排除问题逆向包含多个包含。

例如，我没有潜伏如何`-:**/.svn`从我的模板中排除，而是能够通过扩展过滤它们：

```
templates/**/*.vm => templates
templates/**/*.xsl => templates 
```

# java - Flex BlazeDS 项目的根 URL 位置

> ID：12780517
> 
> 赞同：0
> 
> 时间：2012-10-08T11:09:50.060
> 
> 标签：java, apache-flex

在我的 Flex/BlazeDS 应用程序中，我试图读取属性文件以加载数据库连接设置。我应该将这个文件（位置）保存在我的项目中的哪里，以便我可以像在客户端服务器架构中一样读取文件。

我试图将一个新文件写入服务器根位置

```
new FileOutputStream("OracleSettings.properties") 
```

但该文件从未创建。我刷新了我的项目，通过 Windows 资源管理器探索并通过搜索引擎搜索，但无法找到 OracleSettings.properties 文件。

如何将此文件包含到项目属性中，以便 Eclipse 也将此文件导出到应用程序的输出文件夹中？？？

我使用带有 FlashBuilder 4.6 插件的 Eclipse 我创建了一个带有服务器类型 Java 的 Flex 项目并加载了 BlazeDS 战争文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:55:27.650

`FlexContext.getServletContext().getRealPath("/")`是您的 Web 应用程序根位置。

# perl - 在 Perl 脚本和 bash 脚本之间共享配置文件的最佳方式是什么？

> ID：12780518
> 
> 赞同：2
> 
> 时间：2012-10-08T11:09:56.287
> 
> 标签：perl, shell, configuration

我有一个由 bash 脚本和 Perl 脚本组成的系统。

是否有一种安全的方法来指定 Perl 脚本和 shell 脚本都使用的配置值？

我们需要两者，因为有一些共同的元素是简单的 MY_VAR=toto 声明以及 Perl 特定的配置值，例如哈希。

顺便说一句，我们的强化 Perl 构建中没有可用的 Env 模块。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:34:09.310

您不必必须[`Env`](https://metacpan.org/module/Env)能够访问环境变量。以下文档摘录`Env`清楚地说明了这一点：

> Perl 在一个名为[`%ENV`](http://perldoc.perl.org/perlvar.html). 因为当这种访问方法不方便时，Perl 模块`Env` 允许将环境变量视为标量或数组变量。

`%ENV`使得在 Perl 中构建“配置”哈希变得非常简单。在下面的例子中，坚持自己可能会更清楚`%ENV`：

```
my %config;
my @env_vars = qw/ foo bar baz quux /;
@config{@env_vars} = @ENV{@env_vars}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:57:34.507

为什么不编写一个读取和写入配置文件的 Perl 脚本。您可以制作此代码，使其同时作为 Perl 模块和命令行脚本运行。然后，您可以在 Perl 脚本和 shell 脚本中调用此代码来获取和设置这些值。

你可以使用 YAML 作为一种格式，CPAN 上有几个模块支持这种格式。但是你可以选择你喜欢的任何东西，因为你有完全的控制权，甚至以后的改变只会影响你的 get&set-script。

# html - 要按 HTML 表单排序的 XML 数据

> ID：12780522
> 
> 赞同：0
> 
> 时间：2012-10-08T11:10:03.400
> 
> 标签：html, xml, forms

我想做一个基本的搜索功能，但我使用的数据是 XML - 我将如何制作一个搜索表单，该表单可以过滤来自 XML 的数据并以 HTML 显示它是否符合 HTML 表单的条件。

我还没有尝试使用 HTML 表单来显示 XML 数据，因为我不知道如何做到这一点，因此我正在寻求可能在网络上其他地方的指导或示例，因为我在这样做时遇到了麻烦。

```
 <UKPRN>10004048</UKPRN>

   <ACCOMURL>http://www.londonmet.ac.uk/accommodation/</ACCOMURL>

   <PRIVATELOWER>5000</PRIVATELOWER>

   <PRIVATEUPPER>8300</PRIVATEUPPER>

   <COUNTRY>XF</COUNTRY>

   <NSP>1</NSP>

   <Q24>51</Q24>

   <Q24POP>2242</Q24POP>

   <KISCOURSE>

      <TITLE>FdSc Crime Scene and Forensic Investigation</TITLE>

      <UCASCOURSEID>F411</UCASCOURSEID>

      <VARFEE>10</VARFEE>

      <FEETBC>1</FEETBC>

      <WAIVER>0</WAIVER>

      <MEANSSUP>0</MEANSSUP>

      <OTHSUP>0</OTHSUP>

      <ENGFEE>5700</ENGFEE>

   </KISCOURSE> 
```

对我的 XML 设置有一个基本的了解 - 感谢您提供任何帮助！

编辑：关于下面提出的问题，XML 数据的结构如上，我希望一些 PHP 或 Html 表单来搜索标题 KISCOURSE 的标题，然后显示相关搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:14:26.817

由于这是一个更大的项目而不是一个简短的问题，我的回答只是旨在为您提供一些关于我将如何处理这个问题的想法。告诉我您是否认为它有帮助，如果您还有其他问题。

假设您将数据保存在一个 XML 文件中，例如`data.xml`，并且您可以访问 PHP 及其[`XSLTProcessor`类](http://de.php.net/manual/en/class.xsltprocessor.php)，我将执行以下操作：

1.  为您要查询的字段创建一个带有输入的 HTML 表单
2.  编写一个[XSL 转换](http://w3schools.com/xsl/default.asp)来过滤`data.xml`想要的参数
3.  编写一个 PHP 脚本，从 HTML 表单中获取参数，将它们应用于转换，执行它并输出结果

如果您发现这种方法适合您，请告诉我，我可以添加更多细节。祝你好运！

# php - PHP数组和数组拆分

> ID：12780524
> 
> 赞同：0
> 
> 时间：2012-10-08T11:10:14.207
> 
> 标签：php, arrays

我有一个包含 40 个元素的数组。我只需要从数组中显示第一组 10 个元素，然后在表中显示一些静态行。显示该静态行后，我只想显示另一组 10 行。同样，我需要展示所有 40 个元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:12:18.753

你可以试试`array_slice` [http://php.net/manual/en/function.array-slice.php](http://php.net/manual/en/function.array-slice.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:12:49.430

你可以试试

```
$array = range(1,40);
foreach (array_chunk($array, 10) as $current)
{
    foreach($current as $data)
    {
        // Display your Information
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:16:42.177

### 利用[`array_slice()`](http://php.net/manual/en/function.array-slice.php)

> 它返回由 offset 和 length 参数指定的数组数组中的元素序列。

### 例子：

```
<?php
    $myArray = array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40);
    print_r(array_slice($myArray, 0, 10));
    print_r(array_slice($myArray, 10, 10));
    print_r(array_slice($myArray, 20, 10));
    print_r(array_slice($myArray, 30, 10));
?> 
```

### 输出：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
    [3] => 4
    [4] => 5
    [5] => 6
    [6] => 7
    [7] => 8
    [8] => 9
    [9] => 10
)
Array
(
    [0] => 11
    [1] => 12
    [2] => 13
    [3] => 14
    [4] => 15
    [5] => 16
    [6] => 17
    [7] => 18
    [8] => 19
    [9] => 20
)
Array
(
    [0] => 21
    [1] => 22
    [2] => 23
    [3] => 24
    [4] => 25
    [5] => 26
    [6] => 27
    [7] => 28
    [8] => 29
    [9] => 30
)
Array
(
    [0] => 31
    [1] => 32
    [2] => 33
    [3] => 34
    [4] => 35
    [5] => 36
    [6] => 37
    [7] => 38
    [8] => 39
    [9] => 40
) 
```

### 小提琴：[http ://codepad.viper-7.com/mfzof6](http://codepad.viper-7.com/mfzof6)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:26:26.670

最有效的方法是使用[**模**](http://php.net/manual/en/language.operators.arithmetic.php)运算符，如下所示：

```
$tot = count($array);
for($i=0;$i<$tot;$i++) {
   echo $array[$i] . '<br>';
   if(($i+1) % 10 == 0) {
      echo '--- TEN GROUP --- <br>';
   }
} 
```

示例输出：

```
text_1
text_2
...
text_9
text_10
--- TEN GROUP --- 
text_11
text_12
...
text_19
text_20
--- TEN GROUP --- 
text_21
text_22
... 
```

# java - 如何在 ProcessBuilder 中将文件的内容作为参数传递

> ID：12780531
> 
> 赞同：1
> 
> 时间：2012-10-08T11:10:46.973
> 
> 标签：java, parameter-passing, processbuilder

我想将 .dat 文件的内容作为[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)中的参数传递。我该怎么做呢？

.dat 文件包含：

```
08/10/12 4546.4 4644.5 6465.4 3 6.546 core dia,WH,C/C,no of steps,SF 0054.0 0005.0 005.00 0006.0 0006.0 066.00 0006.0 0006.0 006.00 leg width,yoke width,1/2 section step thk-Biggest size 
```

我想在以下代码中将文件的内容作为参数传递

```
 ProcessBuilder processBuilder = new ProcessBuilder("E:\\MyFile.exe"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:25:49.493

```
FileReader r = null;
try {
    r = new FileReader(pathToDatFile);
    char[] buf = new char[50000]; // Or whatever is a good max length.
    int len = r.read(buf);
    String content = new String(buf, 0, len);
    String[] params = content.split(" ");
    ArrayList<String> invocation = new ArrayList<String>();
    invocation.add("E:\\MyFile.exe");
    invocation.addAll(Arrays.asList(params));
    ProcessBuilder processBuilder = new ProcessBuilder(invocation);
} catch (Exception e) {
    // handle me!
} finally {
   try { r.close(); } catch (Exception e) { /* handle me! */ }
} 
```

另外：您的 .dat 文件采用什么编码？如果不是 ASCII，则必须通过 FileInputStream -> InputStreamReader 才能在 InputStreamReader 中设置正确的编码。否则，您的代码将使用它所运行的计算机上的任何默认值，而结果却非常不一致！

# php - 如何使用 phpmyadmin 构建数据库图？

> ID：12780532
> 
> 赞同：2
> 
> 时间：2012-10-08T11:10:48.177
> 
> 标签：php

大家好，我有一个问题。phpmyadmin 中有一个数据库，其中包含许多几乎与每个人都连接的表。有什么意思吗，这样我就可以得到所有相互连接的表格的图表

提前谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T11:47:10.393

您不能在 phpmyadmin 中执行此操作...您需要使用一些外部工具。

尝试：

**MySQL 工作台：**
[http ://dev.mysql.com/downloads/workbench/](http://dev.mysql.com/downloads/workbench/)

*   当您选择您的操作系统并下载类型时，mysql 站点将带您进入一个要求您登录/注册的页面，这不是必需的，下面有一个链接，上面写着“»不，谢谢，开始我的下载！”

导出您的数据库（仅导出结构）并使用“逆向工程数据库”模式。

# php - 将UTC转换为不同的时区

> ID：12780537
> 
> 赞同：2
> 
> 时间：2012-10-08T11:11:08.177
> 
> 标签：php, datetime

我有一个 GMT 格式的日期`15/10/2012`，当我运行`strtotime()`它时它返回 false。我试过设置默认时区，它不会改变任何东西，我什至尝试过以下操作。

```
$date = new DateTime($formatted);
$date->setTimezone('Europe/London');
return $date->getTimestamp(); 
```

然而仍然没有结果。

请问有人有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:27:59.587

```
$date = DateTime::createFromFormat('d/m/Y', $formatted);
$date->setTimezone(new DateTimeZone('Europe/London'));
return $date->getTimestamp(); 
```

[http://www.php.net/manual/en/datetime.createfromformat.php](http://www.php.net/manual/en/datetime.createfromformat.php)

编辑：更新时区语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:12:57.893

strtotime 不接受该格式。请参阅[http://www.php.net/manual/en/datetime.formats.date.php中接受的格式](http://www.php.net/manual/en/datetime.formats.date.php)

# cdata - 在 cdata 中包含 xml 中的所有特殊字符

> ID：12780538
> 
> 赞同：1
> 
> 时间：2012-10-08T11:11:15.530
> 
> 标签：cdata

我正在尝试解析 xml 文件，但由于文件包含特殊字符而出现异常。为了使文件能够成功解析，我必须将值包含在其中，因为我的 xml 文件中有许多特殊字符在不同的地方有没有像声明或其他方式这样的方法，以便这些字段将被 CDATA 替换，这将减少手动工作 exerytime ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:17:49.423

好吧，要么你的解析器坏了，要么你的 XML 坏了。

XML 有 5 个预定义的实体，你的解析器应该支持它们，并且无论生成你的 XML 的东西都应该在适当的时候使用它们：

```
&lt;     <
&gt;     >
&amp;    &
&apos;   '
&quot;   " 
```

# java - 从 JSP 到 Servlet 的会话丢失（Cookie 更改）

> ID：12780542
> 
> 赞同：2
> 
> 时间：2012-10-08T11:11:25.253
> 
> 标签：java, jsp, session, servlets, cookies

我带着同样的问题回来了，但这次有更多的记录。我有一个包含许多 servlet 和 JSP 的 Web 应用程序。该应用程序有一个登录选项。在 LogIn servlet 中，我开始一个新会话，在会话中放置一些信息后，我转到一个 JSP。

LogIn.java 相关代码：

```
HttpSession sess = request.getSession(true);
sess.setAttribute("GLN", user);
rd.forward(request, response); 
```

转发后，我得到一个名为 Insert.jsp 的 Jsp 页面，我在其中获取会话属性。

Insert.jsp相关代码：

```
HttpSession sess = request.getSession(false);
if (sess != null){
out.println(sess.getAttribute("GLN"));
} 
```

在此之后，我有一个将我引导到 servlet Adaugare.java 的表单。在这里我做同样的事情：

Adaugare.java 代码：

```
HttpSession sess = request.getSession(false); 
```

问题来了。*稍后编辑：这将返回 null，因为不存在会话。然后我转发到同一个 Insert.jsp 文件，即使我有 HttpSession sess = request.getSession(false);，也会创建一个与第一个不同的具有新会话 ID 的新会话。所以很明显 out.println(sess.getAttribute("GLN")); 返回空值。*

这是一个很长的故事。简短版本：

当我从 servlet 转到 jsp 时，会话正常，当我从 jsp 转到 servlet 时，会话无处可寻。然后当我转发到 JSP 时会创建一个新会话。实际上，它会创建一个新的 cookie。如果我从 JSP 和 serlet 打印 contextPath，它是一样的。

**但这是奇怪的事情。当我使用 mod_jk 在 apache 上运行应用程序时会发生这种情况。当我从 tomcat 运行应用程序时，它工作正常......**

请帮忙，我在这个问题上被困了 2 周。

对丹的回答：（文本需要评论，需要等待 7 小时才能回复我自己的问题）我删除了所有评论的行。希望没关系。我不是负责服务器的人，但有人告诉我这不是多个工人。

```
worker.list=jk-status
worker.jk-status.type=status
worker.jk-status.read_only=true

worker.list=jk-manager
worker.jk-manager.type=status

worker.list=balancer
worker.balancer.type=lb

worker.balancer.error_escalation_time=0

worker.balancer.max_reply_timeouts=10

worker.balancer.balance_workers=node1
worker.node1.reference=worker.template
worker.node1.host=localhost
worker.node1.port=8109

worker.node1.activation=A

worker.balancer.balance_workers=node2
worker.node2.reference=worker.template
worker.node2.host=localhost
worker.node2.port=8209

worker.node2.activation=A

worker.template.type=ajp13

worker.template.socket_connect_timeout=5000

worker.template.socket_keepalive=true

worker.template.ping_mode=A

worker.template.ping_timeout=10000

worker.template.connection_pool_minsize=0

worker.template.connection_pool_timeout=600

worker.template.reply_timeout=300000

worker.template.recovery_options=3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:31:13.133

如果请求在多个工作人员之间平衡，则应将会话粘性标志设置为 true。有关详细信息，请参阅：http: [//tomcat.apache.org/connectors-doc/reference/workers.html 。](http://tomcat.apache.org/connectors-doc/reference/workers.html)你应该试试：

```
worker.balancer.sticky_session=True 
```

# css - 某些 ttf 字体不能与 @font-face 一起使用，而其他 ttf 字体可以正常工作。怎么了？

> ID：12780546
> 
> 赞同：0
> 
> 时间：2012-10-08T11:11:32.513
> 
> 标签：css, font-face, truetype

例如，MachineCTT 不能以这种方式工作

```
@font-face {
    font-family: 'MachineCTT';
    src: url('../fonts/test.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

如果我把另一个字体文件作为 test.ttf，它工作得很好。大佬们，怎么解决？

fontsquirrel.com 还说我的文件已损坏，但它在操作系统中运行良好。

是一种很难重新转换 TTF 或 smth 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:15:38.263

字体，就像任何计算机程序一样，可以被破坏。这通常适用于例如网络上非法分发的商业字体的副本。它也可能是由数据传输错误引起的。因此，必须检查您从何处获得字体并将任何问题报告给字体供应商或作者。

# javascript - javascript如何通过返回方法来简化这段代码来执行？

> ID：12780569
> 
> 赞同：0
> 
> 时间：2012-10-08T11:12:56.203
> 
> 标签：javascript, functional-programming, refactoring

我正在玩 JS 并且有以下代码片段

```
var Dog = function(name) {
    this.name = name
}

Dog.prototype= {
    'bark': function() {
        alert(this.name + ' is barking');
    },
    'run': function() {
        alert(this.name + ' is running');
    }
}

var dogs = [new Dog('first'), new Dog('second'), new Dog('third')];

function invokeOnDog(what) {
    if(what === 'bark') {
        for(var i=0; i<dogs.length; i++) {
            dogs[i].bark();
        }
    }
    if(what === 'run') {
        for(var i=0; i<dogs.length; i++) {
            dogs[i].run();
        }
    }
} 
```

我想做的是简化此`invokeOnDog`功能，因为它重复相同的模板两次。我正在考虑以某种方式返回应该在对象上调用的方法，但不知道该怎么做。

你能帮我解决这个问题吗？

编辑：

感谢您的快速回复。如果“what”与调用的方法同名，它们就可以了。但是如果这两者之间没有匹配呢？

`invokeOnDog('aggresive')`应该调用 bark 方法并且`invokeOnDog('scared')`应该调用 run

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:18:29.117

如果不是

```
object.property 
```

你用

```
object['property'] 
```

如果你在变量中有“属性”，你可以这样做

```
var thing = 'property';
object[thing]; 
```

由于您有一个带有要调用的方法名称的变量，因此可以使用以下方法调用该方法：

```
dogs[i][what](); 
```

所以它会是这样的：

```
function invokeOnDog(what) {
    if (what === 'bark' || what === 'run') {
        for(var i=0; i<dogs.length; i++) {
            dogs[i][what]();
        }
    }
} 
```

更新：

如果变量与您要调用的方法没有关系，您可以使用映射来设置关系：

```
function invokeOnDog(position) {
    var methods = {
        'agressive': 'bark',
        'defensive': 'run'
    };
    var method = methods[position];

    if (method)
        for(var i=0; i<dogs.length; i++) {
            dogs[i][method]();
        }
    }
} 
```

这是最简单的代码，但我建议您检查“位置”值是否是“方法”上的键而不是继承方法：

```
function invokeOnDog(position) {
    var methods = {
        'agressive': 'bark',
        'defensive': 'run'
    };

    if (mehtods.hasOwnProperty(position) {
        var method = methods[position];

        for(var i=0; i<dogs.length; i++) {
            dogs[i][method]();
        }
    }
} 
```

否则 "invokeOnDog('toString')" 将访问作为函数的 "methods['toString']"。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:18:02.020

使用[括号符号](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)来访问包含函数的属性：

```
function invokeOnDog(what) {
    for (var i=0; i<dogs.length; i++)
        dogs[i][what]();
} 
```

也许你想检查狗的方法是否存在，你可以使用`what in dogs[i]`or `typeof dogs[i][what] == "function"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T11:20:02.440

您还应该在调用之前检查该属性是否存在：

```
function invokeOnDog(what) {
  if (Dog.prototype.hasOwnProperty(what)) {
    for (i = 0, len = dogs.length; i < len; i++) {
      dogs[i][what]();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T11:20:28.993

Javascript 数组语法也可用于访问对象的字段。所以`dog.bark()`可以换成`dog["bark"]()`.

```
function invokeOnDog(what) {
    for(var i=0; i<dogs.length; i++) {
         dogs[i][what]();         
    }     
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:16:25.043

```
 function invokeOnDog(what) {
        for(var i=0; i<dogs.length; i++) {
          dogs[i][what]()
        }            
    } 
```

试试这个，我认为它应该工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T11:17:32.217

您可以使用普通属性查找来访问该方法。

```
function invokeOnDog(what) {

    if(what === 'bark' || what === 'run') {
        for(var i=0; i<dogs.length; i++) {
            dogs[i][what]();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-09T00:57:22.723

像这样？

```
function invokeOnDog(a) {
if (a === "bark") for (var b = 0; dogs.length > b; b++) dogs[b].bark();
if (a === "run") for (var b = 0; dogs.length > b; b++) dogs[b].run()
}
var Dog = function (a) {
this.name = a
};
Dog.prototype = {
bark: function () {
    alert(this.name + " is barking")
},
run: function () {
    alert(this.name + " is running")
}
};
var dogs = [new Dog("first"), new Dog("second"), new Dog("third")] 
```

# php - php：我有 5 个数组，我怎样才能将它们合二为一？

> ID：12780573
> 
> 赞同：1
> 
> 时间：2012-10-08T11:12:57.307
> 
> 标签：php, arrays, codeigniter

```
 foreach($archive as $archrow){
        echo $archrow->doc_name;   //document name
        echo $archrow->doc_status; //document status
    }

    foreach($arc as $arcrow){
        echo $arcrow->fullname; //Author
    }

    foreach($pos as $posrow){
        echo $posrow->position_name;  //position

    }

    foreach($loc as $locrow){

        echo $locrow->location;  //Department
    } 
```

我想制作一张桌子并按如下类别排列它们：

```
________________________________________________________________________________ 
```

|文档名称 | 作者 | 职位 | 部门 | 文件状态 |

* * *

| 阿达斯| 约翰 | 经理 | 帐户 | 广告 |

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:21:39.197

我想假设您想同时从每个数组中提取一个元素

你可以试试

```
$mi = new MultipleIterator(MIT_NEED_ANY|MIT_KEYS_NUMERIC);
$mi->attachIterator(new ArrayIterator($archive), 'achive');
$mi->attachIterator(new ArrayIterator($arc), 'arc');
$mi->attachIterator(new ArrayIterator($pos), 'pos');
$mi->attachIterator(new ArrayIterator($loc), 'loc');

echo "<pre>";
foreach ( $mi as $member ) {
    echo $member['achive']->doc_name, "|", $member['achive']->doc_status, "|", $member['arc']->fullname, "|", $member['pos']->position_name, "|", $member['loc']->position_name ,PHP_EOL;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:22:47.533

如果你想合并数组，你可以使用`array_merge`：[http](http://www.php.net/manual/en/function.array-merge.php)
://www.php.net/manual/en/function.array-merge.php 但你的例子不是一个数组......

# jquery - 通过 jquery 在动态代码中添加 optgroup 标签

> ID：12780574
> 
> 赞同：2
> 
> 时间：2012-10-08T11:13:00.523
> 
> 标签：jquery

这是我现在的选择框代码

```
 <select id="header1_cbocity">  
    <option  value="2">Ahmedabad</option>
    <option  value="4">Bangalore</option>
    <option  value="14">Chennai</option>
    <option  value="20">Delhi</option>
    <option  value="33">Gurgaon</option>
    <option  value="167">Switzerland</option>
    <option  value="261">Tanzania</option>
    <option  value="168">Thailand</option>
    <option  value="263">Uganda</option>
    <option  value="169">United Kingdom (U.K)</option>
    <option  value="170">United States (U.S)</option>
    </select> 
```

我只想为国家/地区添加 optgroup 标签，如下所示

```
 <select id="header1_cbocity">  
        <option  value="2">Ahmedabad</option>
        <option  value="4">Bangalore</option>
        <option  value="14">Chennai</option>
        <option  value="20">Delhi</option>
        <option  value="33">Gurgaon</option>
    <optgroup label="Country">
        <option  value="167">Switzerland</option>
        <option  value="261">Tanzania</option>
        <option  value="168">Thailand</option>
        <option  value="263">Uganda</option>
        <option  value="169">United Kingdom (U.K)</option>
        <option  value="170">United States (U.S)</option>
    </optgroup>
    </select> 
```

我正在尝试使用 jquery 代码，但无法为 Country 添加 optgroup 标签，所以我需要帮助

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T11:15:23.030

我建议：

```
$('#header1_cbocity option:gt(4)').wrapAll('<optgroup label="country" />') 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Fcq7m/)。

我*还*建议添加一个明确的方法来识别哪些`option`元素代表一个国家，在下面的演示中我使用了 a `class`，但是`data-*`可以很容易地使用自定义属性。鉴于标记：

```
<select id="header1_cbocity">
    <option value="2">Ahmedabad</option>
    <option value="4">Bangalore</option>
    <option value="0"  class="country">Bahamas</option>
    <option value="14">Chennai</option>
    <option value="20">Delhi</option>
    <option value="33">Gurgaon</option>
    <option value="167" class="country">Switzerland</option>
    <option value="261" class="country">Tanzania</option>
    <option value="168" class="country">Thailand</option>
    <option value="263" class="country">Uganda</option>
    <option value="169" class="country">United Kingdom (U.K)</option>
    <option value="170" class="country">United States (U.S)</option>
</select>​ 
```

（请注意，我已经添加`Bahamas`（为了展示如何处理不连续的州/国家）。

使用以下 jQuery：

```
$('#header1_cbocity option.country')
    .wrapAll('<optgroup label="country" />')
    .closest('optgroup') // because otherwise wrapAll() returns the originally-found option elements
    .appendTo('#header1_cbocity');​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Fcq7m/1/)。

此外，假设您已经放置了某种定义（在下面我使用自定义的, `data-defn`, 属性），您可以创建`optgroup`元素来包含这些：

```
<select id="header1_cbocity">
    <option value="2" data-defn="state">Ahmedabad</option>
    <option value="4" data-defn="state">Bangalore</option>
    <option value="0"  data-defn="country">Bahamas</option>
    <option value="14" data-defn="state">Chennai</option>
    <option value="20" data-defn="state">Delhi</option>
    <option value="33" data-defn="state">Gurgaon</option>
    <option value="167" data-defn="country">Switzerland</option>
    <option value="261" data-defn="country">Tanzania</option>
    <option value="168" data-defn="country">Thailand</option>
    <option value="263" data-defn="country">Uganda</option>
    <option value="169" data-defn="country">United Kingdom (U.K)</option>
    <option value="170" data-defn="country">United States (U.S)</option>
</select>​ 
```

使用 jQuery：

```
$('#header1_cbocity option').each(
    function(){
        var that = $(this),
            defn = that.attr('data-defn'),
            sel = that.closest('select'),
            optgroup = sel.find('optgroup.' + defn);
        if (!optgroup.length) {
            $('<optgroup />', {'class' : defn, 'label' : defn}).appendTo(sel);
        }
        that.appendTo(sel.find('optgroup.' + defn));
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Fcq7m/3/)。

当然，对于只指定那些具有`data-defn`属性的元素的选择器，您不一定需要为*每个* `option`元素提供这样的属性：

```
$('#header1_cbocity option[data-defn]').each(
    function(){
        var that = $(this),
            defn = that.attr('data-defn'),
            sel = that.closest('select'),
            optgroup = sel.find('optgroup.' + defn);
        if (!optgroup.length) {
            $('<optgroup />', {'class' : defn, 'label' : defn}).appendTo(sel);
        }
        that.appendTo(sel.find('optgroup.' + defn));
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/Fcq7m/4/)。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`closest()`](http://api.jquery.com/closest/).
*   [`wrapAll()`](http://api.jquery.com/wrapAll/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T00:34:10.150

在不更改 html 的情况下使用 David Thomas 的答案

```
 $("#header1_cbocity option").each(function () {
        var optName = "Country";
        if ($(this).val() < 99) { return true; }
        var that = $(this);
        var sel = that.closest('select');
        var optgroup = sel.find('optgroup.' + optName);
        if (!optgroup.length) {
            $('<optgroup />', { 'class': optName, 'label': optName }).appendTo(sel);
        }
        that.appendTo(sel.find('optgroup.' + optName));
    }); 
```

我为自己添加了以下条件以创建第二个 optgroup

```
 if ($(this).val() == 20) {
            optName = "mmmmmmmmm";
        } 
```

带有第二个 optgroup 的完整代码

```
 $("#header1_cbocity option").each(function () {
        var optName = "Country";
        if ($(this).val() < 99) { return true; } //you might need to convert to int
        if ($(this).val() == 20) {
           optName = "Dehli";
        }
        var that = $(this);
        var sel = that.closest('select');
        var optgroup = sel.find('optgroup.' + optName);
        if (!optgroup.length) {
            $('<optgroup />', { 'class': optName, 'label': optName }).appendTo(sel);
        }
        that.appendTo(sel.find('optgroup.' + optName));
    }); 
```

# php - php嵌套集，在导航菜单中建立链接

> ID：12780575
> 
> 赞同：0
> 
> 时间：2012-10-08T11:13:01.560
> 
> 标签：php, mysql, codeigniter, navigation, nested-sets

我的数据库中有几个类别，我正在使用类似这样的[嵌套集模型检索它们（括号中的数字代表深度）：](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

新(1)
-常规(2) -
控制台(2)

游戏(1)
-pc(2)
--emulator(3)
-ps3(2)

然后我有一个函数来处理多维数组并生成导航菜单——这个

**模型**
从数据库中返回以下数组

```
Array (
    [0] => Array ( [name] => News [depth] => 1 ) 
    [1] => Array ( [name] => General [depth] => 2 ) 
    [2] => Array ( [name] => Console [depth] => 2 ) 
    [4] => Array ( [name] => Games [depth] => 1 ) 
    [5] => Array ( [name] => PC [depth] => 2 ) 
    [6] => Array ( [name] => emulator [depth] => 3 ) 
    [8] => Array ( [name] => ps3 [depth] => 2 ) 
) 
```

**--控制器**

```
public function index()
{
$navTree = $this->getNavTree(); //gets array from model
$createNavTree = $this->_renderTree($navTree); //pass array to function
$this->load->view('testnavigation.php', $createNavTree);
}

function _renderTree($tree){    
    $current_depth = 0;
    $counter = 0;

    $result = '';

    foreach($tree as $node){
        $node_depth = $node['depth'];
        $node_name = $node['name'];
        $node_id = $node['categoryid'];

        if($node_depth == $current_depth){
            if($counter > 0) $result .= '</li>';            
        }
        elseif($node_depth > $current_depth){

            $result .= $counter == 0 ? '<ul id="nav">' : '<ul>';
            $current_depth = $current_depth + ($node_depth - $current_depth);
        }
        elseif($node_depth < $current_depth){
            $result .= str_repeat('</li></ul>',$current_depth - $node_depth).'</li>';
            $current_depth = $current_depth - ($current_depth - $node_depth);
        }
        $result .= '<li><a href="#">'.$node_name.'</a>';
        ++$counter;
    }
    $result .= str_repeat('</li></ul>',$node_depth).'</li>';
    $result .= '</ul>';     
    return $result;
} 
```

**- 看法**

```
echo $createNavTree; 
```

该列表以正确的缩进顺序创建，但是我遇到的问题是为每个项目生成链接，例如模拟器的链接应该是 mysite.com/games/pc/emulator

我将如何实现这一目标，感谢您的帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:41:58.650

我会采取简单的路线并为每个级别构建一组缓存级别和先前计算的路径。当再次看到的“基础级别”`1`时，清除缓存，这样您就没有任何无效条目：

此示例代码应该适用于您当前拥有的代码（只需将此代码放在您当前的布局渲染代码上方并`$path`用作 URL）：

```
function _renderTree($tree) {
    $depths = array();
    foreach ($tree as $node) {
        // build the current path
        $path = (($node['depth'] > 1) ? $depths[$node['depth'] - 1] : '') . $node['name'];

        // set the current path as the current depth's path (to be used for any deeper-nodes)
        $depths[$node['depth']] = $path . '/';

        ... layout rendering code ...
    }
} 
```

它的作用是，如果当前路径`depth`高于 1（这意味着存在父级深度），它将采用父级的计算路径（应该是父级的*完整*路径，而不仅仅是父级的名称），然后将当前名称添加到其中 - 这将为您提供完整的嵌套路径。然后，它将生成的路径存储到`$depths`数组中（以当前深度为索引）供任何子级使用。

在您的示例中，您指定要为的路径`Emulator`，`mysite.com/games/pc/emulator`强调小写和域名。由于我们`$node['name']`在我们的路径中使用，你会想要使用`strtolower()`：

```
$path = (($node['depth'] > 1) ? $depths[$node['depth'] - 1] : '') . strtolower($node['name']); 
```

`<a></a>`我建议在标签的实际行中添加域名：

```
$result .= '<li><a href="http://mysite.com/' . $path . '">'.$node_name.'</a>'; 
```

# android - 在android中使用氦气和城市空气推送

> ID：12780580
> 
> 赞同：2
> 
> 时间：2012-10-08T11:13:14.603
> 
> 标签：android, push-notification

我正在尝试为 Android 创建一个示例应用程序，该应用程序可以使用城市空气推送具有推送通知功能。Urban airpush 提供 2 个推送通知选项 1\. C2DM 2\. Helium

[https://docs.urbanairship.com/display/DOCS/Android+Getting+Started](https://docs.urbanairship.com/display/DOCS/Android+Getting+Started)

由于谷歌现在不允许 C2DM 帐户，我只剩下氦气选项。

所以我从 UA 提供的氦气推送示例项目开始

[https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+Android%3A+Helium+Push](https://docs.urbanairship.com/display/DOCS/Getting+Started%3A+Android%3A+Helium+Push)

这就是我的 airshipconfig.properties 的样子

```
developmentAppKey = AY1v8U6WQQOJMyNAkv2VDA 
developmentAppSecret = -VwPeOUPTqiX_llY7uvPtg
#productionAppKey = Your Production App Key
#productionAppSecret = Your Production Secret

#transport is "c2dm", "helium" or "hybrid".
#note: the helium and hybrid transports are premium features.
#for complete pricing information, see http://urbanairship.com/pricing/

transport = helium

c2dmSender = myemailid@gmail.com
inProduction = false

iapEnabled = false

# 2 = Log.VERBOSE; 3 = Log.DEBUG; 4 = Log.INFO;
# 5 = Log.WARN; 6 = Log.ERROR; 7 = Log.ASSERT;
developmentLogLevel = 3
productionLogLevel = 6 
```

并在 MainActivity OnCreate 中添加了这两行

```
PushPreferences prefs = PushManager.shared().getPreferences();
Logger.info("My Application onCreate - App ID " + prefs.getPushId()); 
```

但是根据教程似乎没有任何效果

1.  prefs.getPushId() 返回 null，因此我无法测试 APID 特定警报
2.  UA 允许我发送广播警报，但应用程序没有收到它
3.  使用氦气是否需要 GCM 或 C2DM 注册
4.  我可以通过免费帐户使用氦气吗，该网站说前 45 天可以使用专业功能。

看来我在这里遗漏了很多东西，文档也不完整。如果有人在氦气中使用过 UA，请建议如何创建示例应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T11:24:16.560

我错过了一个重要步骤，即我们需要单独注册才能通过免费帐户使用氦气 [https://go.urbanairship.com/apps/free-trial/](https://go.urbanairship.com/apps/free-trial/)

1.  prefs.getPushId() 返回 null，因此我无法测试 APID 特定警报

    A. 注册后就可以正常使用了

2.  UA 允许我发送广播警报，但应用程序没有收到它

    A. 广播仅发送到已注册的设备

3.  使用氦气是否需要 GCM 或 C2DM 注册

    A. 没有

4.  我可以通过免费帐户使用氦气吗，该网站说前 45 天可以使用专业功能。

    A. 是的，需要填写表格 [https://go.urbanairship.com/apps/free-trial/](https://go.urbanairship.com/apps/free-trial/)

# jquery - XMLHttpRequest 无法加载。Access-Control-Allow-Origin 不允许来源

> ID：12780587
> 
> 赞同：1
> 
> 时间：2012-10-08T11:13:29.860
> 
> 标签：jquery, json, xmlhttprequest

我使用此代码调用json文件，我用jslint“结果：有效JSON”检查它，它是正确的，我用了几个月，但今天突然停止工作，控制台显示了这个。

XMLHttpRequest 无法加载[http://www.weburl.com/web/calc/filethree.js](http://www.weburl.com/web/calc/filethree.js)。Access-Control-Allow-Origin 不允许来源[http://www.weburl.com/ 。](http://www.weburl.com/)

```
$.getJSON("http://www.weburl.com/web/calc/filethree.js",function(datathree){
        $.each(datathree, function(i,value){
        // do something
        });
        }
); 
```

我是 jquery 的新手，我搜索了一些信息，尝试了 callback= ，但没有.. :/

使用回调我得到 404 错误

```
http://www.weburl.com/web/calc/filethree.js&callback=jQuery180014668452506884933_1349693824272?_=1349693824434 
```

我不知道发生了什么昨天它工作得很好：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:26:51.247

我更改了 url，现在我现在使用相对 URL，@devnull69 建议很有帮助，现在它可以工作了。解决方案：尝试使用相对 URL web/calc/filethree.js 而不是绝对 URL – by @devnull69

# jquery - Codeigniter Ajax 登录问题

> ID：12780588
> 
> 赞同：0
> 
> 时间：2012-10-08T11:13:30.193
> 
> 标签：jquery, ajax, json, codeigniter

我正在使用 Codeigniter 和 Jquery 构建 Ajax 登录...我有一个小问题，即返回“无效登录”消息及其困扰我。

在登录页面上，我有：

```
$(document).keypress(function (e) {
    if (e.which == 13) {
        var login = $("#login").val();
        var pass = $("#pass").val();

        $('#login-block').removeBlockMessages().blockMessage('Please wait, cheking login...', {
            type: 'loading'
        });
        $.post("<?php echo base_url(); ?>index.php/login/validate_credentials/", {
            username: login,
            password: pass
        }, function (data) {
            if (data.error) {
                $('#login-block').removeBlockMessages().blockMessage(data.message, {
                    type: 'error'
                });
            } else {
                document.location.href = data.redirect;
            }
        }, "json");
    }
}); 
```

该`validate()`函数只是查询数据库以查找用户名和密码匹配，如果 num_rows = 1 则返回用户数据。

尝试登录时，所有这些都可以正常工作，但是当我输入不存在的用户名时，我不会收到“登录错误”错误...

如果我使用真实的用户名和错误的密码，我会收到错误消息。

如果用户名和密码正确，则登录正常。

我只是不明白为什么当用户名不存在时它不会显示和错误？

**编辑**

这是模型中的 Validate() 函数。

```
function validate() {

    // CHECK LOGIN DETAILS
    $this->db-> select('first_name,last_name,usertype,id,products,mac');
    $this->db-> where('username', $this->input->post('username'));
    $this->db-> where('password', md5($this->input->post('password')));
    $query = $this->db->get('membership');

    if ($query->num_rows() > 0) {
        $data = array('usertype' => $row->usertype, 'userid' => $row->id, 'first_name' => $row->first_name, 'last_name' => $row->last_name, 'products' => $row->products, 'mac' = > $row->mac);
        return $data;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:56:38.090

```
if(data.error){
    $('#login-block').html('<p>'+data.message+'</p>);
} else {
    document.location.href = data.redirect;
} 
```

试试看。

```
if($query->num_rows()==1)
{
$data2 = array(
    'error' => false,
    'redirect' => base_url().'index.php/site/home/'
    ); 
```

好的，我明白了，怎么样？顺便说一下，在登录时，您应该始终检查 num_rows = 1，永远不应该超过一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:34:53.673

用

```
$.getJSON('<?php echo base_url(); ?>index.php/login/validate_credentials/',{username: login, password: pass}, function(data) {
if(data.error){
$('#login-block').removeBlockMessages().blockMessage(data.message, {type: 'error'});   
} else {
document.location.href = data.redirect;
}
}); 
```

我需要使用 getJSON 而不是 post。我必须更新模型函数以使用 get 而不是 post 变量。它现在像我希望的那样工作。

# jquery - 从 MVC 中动态填充的 jsTree 获取检查节点

> ID：12780589
> 
> 赞同：1
> 
> 时间：2012-10-08T11:13:37.560
> 
> 标签：jquery, asp.net-mvc, jstree

（**更新：见帖子底部**）我是 jstree（和 JS）的新手，并试图在必须从某个存储库动态加载节点的 MVC4 场景中使用它。我已经设法让它工作，但我在确定用户有效选择了哪些节点时遇到了一些困难，因为这取决于 UI 状态。让我们从返回节点并由 JS 调用的 MVC 控制器的方法开始。它的代码如下所示：

```
 public JsonResult GetTreeNodes(string id)
{
        // selectedIds contains some pre-selected IDs...

    IEnumerable nodes = _repository.GetChildNodes(id);
    return Json(
        (from n in nodes
         select new
                    {
                        id = n.Id,
                        data = n.Value,
                        attr = new
                                   {
                                       id = n.Id,
                                       selected = selectedIds.Any(s => s == n.Id)
                                   },
                        state = "closed"
                    }).ToArray(), JsonRequestBehavior.AllowGet);
} 
```

这工作正常，并以 jstree 期望的形式返回具有指定 ID 的节点的子节点。

我的视图有一个用于树的 div，以及一个用于包含选中节点的隐藏字段。当表单提交时，一个 JS 函数会检索选中的节点并将它们存储到隐藏字段中，以便 MVC 操作可以接收它们。视图是这样的：

```
 ...
<section>
    @using (Html.BeginForm())
    {
        @Html.Hidden("selectedNodes")
        <div id="tree" style="max-width: 70%"></div>
        <input id="submit" type="submit" value="Submit" />
    }
</section>

<script type="text/javascript">
    $(function () {
        fillTree();
        $("form:first").submit(function(e) {
            storeSelected();
        });
    });

    function fillTree() {
        $("#tree").jstree({
            checkbox: {
                real_checkboxes: true,
                checked_parent_open: true
            },
            plugins: ["themes", "json_data", "ui", "checkbox"],
            json_data: {
                "ajax": {
                    "type": 'GET',
                    "url": function(node) {
                        var url;
                        if (node == -1) {
                            url = "@Url.Action("GetTreeNodes", "Home")";
                        } else {
                            var nodeId = node.attr('id');
                            url = "@Url.Action("GetTreeNodes", "Home")" + "?id=" + nodeId;
                        }

                        return url;
                    },
                    "success": function (newData) {
                        return newData;
                    }
                }
            },
            animation: 200
        }).bind("open_node.jstree", function(event, data) {
            $("#tree").jstree("check_node", "li[selected=selected]");
        });
    }

    function storeSelected() {
        var checkedIds = [];
        $("#tree").jstree("get_checked", null, true).each(function() {
            checkedIds.push(this.id);
        });
        $("#selectedNodes").val(checkedIds.join(","));
    }
</script> 
```

如您所见，当用户提交表单时，storeSelected 函数使用 jstree get_checked 函数来检索选中的节点。问题是这里的节点是动态加载的，所以这只适用于当用户提交表单时页面中有效存在的节点。如果我展开一个分支，选中并取消选中一些节点，然后在提交之前收缩同一个分支，我将得到一个空的选中 ID 列表，因为代表树 UI 中节点的列表项元素不存在于页面中。

那么处理这个问题的最佳策略是什么？我正在考虑对选中/未选中事件做出反应，并跟踪用户所做的事情，这样我就可以知道他检查了哪些节点，而不管 UI 状态如何。所以我会像这样添加另一个绑定：

```
bind("check_node.jstree uncheck_node.jstree", function(event, data) {
            var id = data.rslt.obj[0].id;
            addToCheckedOrUnchecked(id, event.type == "check_node"); }); 
```

并实现 addToCheckedOrUnchecked 函数，以便它可以存储用户选中或取消选中的 ID 列表。当然，在将 ID 添加到选中列表时，我必须将其从未选中列表中删除（如果存在），反之亦然。我还必须使用一些持久性机制来在不同的 AJAX 调用之间保留这些列表：我想是会话数据或 cookie，这取决于浏览器的功能。

请注意，在提交之前打开所有分支不是一个选项，因为这意味着逐个分支查询服务器分支，其中一些树很大，而我想保留带宽和响应性。

我的第一个问题涉及检查和取消检查节点事件：它们似乎没有记录（我发现它们在谷歌上搜索），而且似乎并非所有浏览器都正确处理它们。例如，在 IE9 中，该事件似乎根本不会触发，而在 FF 中会触发。无论如何，你能提出更有效的方法来解决这个问题吗？对于一个相对简单的任务来说，这似乎是很多代码，并且由于我将在不同的页面中使用多个树，我可能必须创建一个 HTML 帮助程序以避免在我的 MVC 项目中出现冗余。

## 更新#1

通过反复试验，我进一步增强了 JS 代码，但我仍然面临一些问题。我必须补充一点，我需要将收到的分支与尚未提交的用户编辑同步：如果我打开一个分支，取消选中一个（预选的）项目并检查另一个，然后关闭分支并重新打开它，这不会触发新的 ajax 调用，所以我需要处理 open_node 事件，以便能够在显示节点复选框之前修改它们。无论如何，树似乎忽略了我的同步代码。首先，用于将节点 ID 添加到已选中或未选中的 ID 列表中的函数，保存在会话存储中（或在 cookie 中）：

```
 function addToCheckedOrUnchecked(id, checked) {
    // get arrays of IDs from storage
    var listChecked = getFromStore("checkedNodes");
    if (listChecked === null) {
        listChecked = [];
    }
    var listUnchecked = getFromStore("uncheckedNodes");
    if (listUnchecked === null) {
        listUnchecked = [];
    }

    // if checking, add ID to checked and remove from unchecked if present
    if (checked) {
        if ($.inArray(id, listChecked) == -1) {
            listChecked.push(id);
        }
        var i = $.inArray(id, listUnchecked);
        if (i > -1) {
            listUnchecked.splice(i, 1);
        }
        // else add ID to unchecked and remove from checked if present
    } else {
        if ($.inArray(id, listUnchecked) == -1) {
            listUnchecked.push(id);
        }
        var j = $.inArray(id, listChecked);
        if (j > -1) {
            listChecked.splice(j, 1);
        }
    }

    // update storage
    putInStore("checkedNodes", listChecked);
    putInStore("uncheckedNodes", listUnchecked);
} 
```

这个函数只是从存储中读取列表并根据接收到的 id 以及该 id 是被检查还是未检查来更新它们。

然后我添加了这个功能：

```
 function synchChecks(data) {
    var listChecked = getFromStore("checkedNodes");
    var listUnchecked = getFromStore("uncheckedNodes");

        $(data).each(function () {
            var id = $(this).id;
            if ($.inArray(id, listChecked) > -1) {
                $(this).attr.selected = true;
                console.log("overridden=1: " + id);
            } else if ($.inArray(id, listUnchecked) > -1) {
                $(this).attr.selected = false;
                console.log("overridden=0: " + id);
            }
        });
} 
```

这会从存储中获取列表并覆盖接收到的每个节点的 attr.selected 值（在数据中），以便它与用户编辑同步。最后，我在 jstree 调用中将所有内容粘合在一起：

```
 function fillTree() {
    $("#tree").jstree({
        checkbox: {
            real_checkboxes: true,
            checked_parent_open: true
        },
        plugins: ["themes", "json_data", "ui", "checkbox"],
        json_data: {
            "ajax": {
                "type": 'GET',
                "url": function(node) {
                    var url;
                    if (node == -1) {
                        url = "@Url.Action("GetTreeNodes", "Home")";
                    } else {
                        var nodeId = node.attr('id');
                        url = "@Url.Action("GetTreeNodes", "Home")" + "?id=" + nodeId;
                    }

                    return url;
                },
                "success": function (newData) {
                    synchChecks(newData);
                    return newData;
                }
            }
        },
        animation: 200
    }).bind("open_node.jstree", function (event, data) {
        openingNode = true;

        var tree = $("#tree");
        tree.jstree("check_node", "li[selected=selected]");

        // get and synch children
        var listChecked = getFromStore("checkedNodes");
        var listUnchecked = getFromStore("uncheckedNodes");

        $(data.inst._get_children(data.rslt.obj[0])).each(function () {
            var id = $(this).attr("id");
            if ($.inArray(id, listChecked) > -1) {
                $(this).addClass("jstree-checked");
                $(this).removeClass("jstree-unchecked");
            } else if ($.inArray(id, listUnchecked) > -1) {
                $(this).addClass("jstree-unchecked");
                $(this).removeClass("jstree-checked");
            }
        });

        openingNode = false;
    }).bind("check_node.jstree uncheck_node.jstree", function (event, data) {
        if (!openingNode) {
            var id = data.rslt.obj[0].id;
            addToCheckedOrUnchecked(id, event.type == "check_node");
        }
    });
} 
```

在 ajax 调用成功时，我调用 synchChecks 以将接收到的节点（尚未更新，因为没有任何内容发布到服务器）与用户编辑同步。此外，在 open_node 上，我检索已检查和未检查的 ID 列表，并使用它们来覆盖正在打开的节点的每个子节点的检查状态。最后，当用户选中或取消选中某个节点时，我调用 addToCheckedOrUnchecked 来更新我的 ID 列表。

无论如何，这似乎不起作用。例如，如果我打开一个分支，取消选中一个预选节点，关闭它，然后重新打开它，我可以从调试器中看到列表 ID 符合预期（未选中的列表具有我未选中的节点的 ID），并且从循环中的 li 检索到的 id 没问题，但是我对 li 类的编辑似乎没有效果，并且我看到带有来自服务器的检查的分支。那么，假设没有其他可行的方法，您是否有任何暗示可以让这项工作按预期进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:53:05.127

看来我至少设法让它在 FF 中工作，但我愿意接受建议。我回答自己，因为这可能对其他读者有用，我花了很多时间在谷歌上搜索以发现 jsTree 的所有特性。以下指的是1.0版本和MVC4。

首先，服务器部分：我有一个带有 Tree 操作的控制器，它只返回 View() 及其对应的 post：

```
 [HttpPost]
public ActionResult Tree(string checkedNodes, string uncheckedNodes)
{
    TempData["message"] = String.Format(CultureInfo.InvariantCulture,
                                        "c=[{0}] | u=[{1}]", 
                                        checkedNodes, uncheckedNodes);
    return RedirectToAction("Index");
} 
```

此操作只是在 TempData 中设置一条消息，以在索引页面中显示接收到的节点。请注意，作为动态加载的树，操作接收的不是选定节点 ID 的列表，而是用户操作的列表：需要选择的 ID 列表（checkedNodes）和需要取消选择的 ID 列表（未选中节点）。在服务器端为您的存储库执行这些操作将一次将其同步到用户在 jsTree 中所做的操作。

服务器部分的核心是按需返回节点的操作（由 ajax 调用），使用存储库从某个存储中检索它们：

```
 public JsonResult GetTreeNodes(string id)
{
    // some sample categories to be preselected
    string[] aSampleCategories = new[] {"categories-fun", "languages-ita"};

    IEnumerable nodes = _repository.GetChildNodes(id);
    return Json(
        (from n in nodes
         select new
                    {
                        id = n.Id,
                        data = n.Value,
                        attr = new
                                   {
                                       id = n.Id,
                                       selected = aSampleCategories.Any(s => s == n.Id)
                                   },
                        state = "closed"
                    }).ToArray(), JsonRequestBehavior.AllowGet);
} 
```

现在，到客户端。这是视图的形式：

```
@using (Html.BeginForm())
{
    @Html.Hidden("checkedNodes")
    @Html.Hidden("uncheckedNodes")
    <div id="tree"></div>
    <input id="submit" type="submit" value="Submit" />
} 
```

JS 代码如下（我使用了几个日志调用来检查发生了什么）： storeSelected 通过从临时 JS 存储中检索它们来存储要选择或取消选择的节点的 ID。addToCheckedOrUnchecked 获取一个节点 ID 和一个布尔值（告诉节点是否应该被选中或取消选中）并相应地更新这个存储。

然后，同步函数： synchChecks 在 ajax 调用成功完成时使用，并用用户编辑覆盖从服务器接收到的检查；open_node 处理程序在节点打开时使用，它的子节点需要以类似的方式同步。这是完整的代码，除了一些处理 JS 存储的实用程序函数（使用 sessionStorage 或在不可用时回退到 cookie）。希望这可以帮助某人，如果有人提出更好的方法/实施，我会很高兴知道。谢谢！

```
<script type="text/javascript">
    var openingNode = false;
    function storeSelected() {
        $("#checkedNodes").val(getFromStore("checkedNodes").join(","));
        $("#uncheckedNodes").val(getFromStore("uncheckedNodes").join(","));
    }

    function addToCheckedOrUnchecked(id, checked) {
        console.log("[BEG addToCheckedOrUnchecked]");

        // get arrays of IDs from storage
        var listChecked = getFromStore("checkedNodes");
        if (listChecked === null) {
            listChecked = [];
        }
        var listUnchecked = getFromStore("uncheckedNodes");
        if (listUnchecked === null) {
            listUnchecked = [];
        }

        // if checking, add ID to checked and remove from unchecked if present
        if (checked) {
            if ($.inArray(id, listChecked) === -1) {
                listChecked.push(id);
            }
            var i = $.inArray(id, listUnchecked);
            if (i > -1) {
                listUnchecked.splice(i, 1);
            }
            // else add ID to unchecked and remove from checked if present
        } else {
            if ($.inArray(id, listUnchecked) === -1) {
                listUnchecked.push(id);
            }
            var j = $.inArray(id, listChecked);
            if (j > -1) {
                listChecked.splice(j, 1);
            }
        }
        console.log("checked: " + listChecked + " | unchecked: " + listUnchecked);

        // update storage
        putInStore("checkedNodes", listChecked);
        putInStore("uncheckedNodes", listUnchecked);
        console.log("[END addToCheckedOrUnchecked]");
    }

    function synchChecks(data) {
        console.log("[BEG synchChecks]");

        var listChecked = getFromStore("checkedNodes");
        var listUnchecked = getFromStore("uncheckedNodes");

        $(data).each(function () {
            var id = $(this).id;
            if ($.inArray(id, listChecked) > -1) {
                $(this).attr.selected = true;
                console.log("overridden=1: " + id);
            } else if ($.inArray(id, listUnchecked) > -1) {
                $(this).attr.selected = false;
                console.log("overridden=0: " + id);
            }
        });

        console.log("checked: " + listChecked + " | unchecked: " + listUnchecked);
        console.log("[END synchChecks]");
    }

    function fillTree() {
        $("#tree").jstree({
            checkbox: {
                real_checkboxes: true,
                checked_parent_open: true
            },
            plugins: ["themes", "json_data", "ui", "checkbox"],
            json_data: {
                "ajax": {
                    "type": 'GET',
                    "url": function(node) {
                        var url;
                        if (node == -1) {
                            url = "@Url.Action("GetTreeNodes", "Home")";
                        } else {
                            var nodeId = node.attr('id');
                            url = "@Url.Action("GetTreeNodes", "Home")" + "?id=" + nodeId;
                        }

                        return url;
                    },
                    "success": function (newData) {
                        synchChecks(newData);
                        return newData;
                    }
                }
            },
            animation: 200
        }).bind("open_node.jstree", function (event, data) {
            console.log("[BEG open_node]");
            openingNode = true;

            var tree = $("#tree");
            tree.jstree("check_node", "li[selected=selected]");

            // get and synch children
            var listChecked = getFromStore("checkedNodes");
            var listUnchecked = getFromStore("uncheckedNodes");
            console.log("checked: " + listChecked + " | unchecked: " + listUnchecked);

            $(data.rslt.obj[0]).find("li").each(function () {
                var id = $(this).attr("id");
                if ($.inArray(id, listChecked) > -1) {
                    $(this).addClass("jstree-checked");
                    $(this).removeClass("jstree-unchecked");
                    console.log("overridden=1: " + id);
                } else if ($.inArray(id, listUnchecked) > -1) {
                    $(this).addClass("jstree-unchecked");
                    $(this).removeClass("jstree-checked");
                    console.log("overridden=0: " + id);
                }
            });

            openingNode = false;
            console.log("[END open_node]");
        }).bind("check_node.jstree uncheck_node.jstree", function (event, data) {
            console.log("[BEG " + event.type + "]");
            if (!openingNode) {

                var id = data.rslt.obj[0].id;
                addToCheckedOrUnchecked(id, event.type == "check_node");
            }
            console.log("[END " + event.type + "]");
        });
    }

    $(function () {
        // clear storage used for keeping track of checked nodes
        removeFromStore("checkedNodes");
        removeFromStore("uncheckedNodes");

        // build tree
        fillTree();

        // attach store logic to submit
        $("form:first").submit(function (e) {
            storeSelected();
        });
    });
</script> 
```

# android - ListView 适配器，防止更新

> ID：12780596
> 
> 赞同：0
> 
> 时间：2012-10-08T11:14:12.620
> 
> 标签：android, listview, simpleadapter

我已经扩展了`SimpleAdapter`项目的日期分组，这在创建时可以正常工作。列表项目包含分组视图，如果项目属于当前日期组，我的适配器将隐藏此视图：

```
TextView Title (2012-10-08) - visible
TextView Name  (Foo)        - visible

TextView Title (2012-10-08) - hidden
TextView Name  (Bar)        - visible

TextView Title (2012-10-07) - visible
TextView Name  (Baz)        - visible

TextView Title (2012-10-07) - hidden
TextView Name  (Etc)        - visible 
```

现在，如果我在完全填充的列表上向下滚动到第二个项目下方的位置，隐藏视图将在再次向上滚动时变得可见。为什么会发生这种情况，我该如何预防？

之后我没有更改适配器，`onCreate`因此我不知道为什么我的`ListView`或`Adapter`更改视图状态。

日期适配器：

```
public class DateAdapter extends SimpleAdapter
{
    protected   ArrayList<HashMap<String, String>>  items;
    private     String                  prevDate = "";
    private     SimpleDateFormat            dateFormat = new SimpleDateFormat("EEEE, dd/MM yyyy", Locale.getDefault());

    public DateAdapter (Context context, ArrayList<HashMap<String, String>> items, int resource, String[] from, int[] to)
    {
        super(context, items, resource, from, to);
        this.items = items;
    }

    @Override
    public View getView (int position, View convertView, ViewGroup parent)
    {
        View view = super.getView(position, convertView, parent);

        try
        {
            HashMap<String, String> item = this.items.get(position);
            Long itemTime = Long.parseLong(item.get("timedate")) * 1000;

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(itemTime);
            String dateString = dateFormat.format(calendar.getTime());

            TextView section = (TextView) view.findViewById(R.id.sectionTitle);

            if (!dateString.equals(this.prevDate))
            {
                this.prevDate = dateString;
                section.setText(dateFormat.format(calendar.getTime()));
                section.setVisibility(View.VISIBLE);
            }
        }
        catch (Exception e) { Debug.e(e); }

        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:22:58.353

View view = super.getView(position, convertView, parent);

此行返回新创建的视图，仅当提供的 convertView 为 null 时，如果 convertView 不为 null，将返回相同的视图。因此，当它返回相同的 convertView 实例时，具有可见性 VISIBLE 的视图可能会保持可见。所以，你要做的就是填充这个条件的 else

```
 if (!dateString.equals(this.prevDate)){} 
```

您将在其中将视图可见性设置为 INVISIBLE。告诉我有用吗？

# sql - 如何创建此 sql 语句以在多表端的每条记录中进行搜索？

> ID：12780624
> 
> 赞同：0
> 
> 时间：2012-10-08T11:16:31.273
> 
> 标签：sql, select

现在我必须为搜索页面创建一个查询，该查询取决于具有 30 个表的数据库：

我将用一个例子来描述我的要求：

表 A 和表 B 之间存在关系 -> 一对多关系

如果我们认为表 A 用于学生信息，表 B 用于保存该学生每年的课程。每年只允许选修3门科目，因此结构如下：

**表 A：** *身份证、学生姓名、电话号码、生日......*

**表 B:** : *ID,StudentID,Date,Subject-one,Subject-2,Subject-3*

所以学生每年可以选修任何 3 门科目

有效学生的示例：

```
 StudentID  Sub1  Sub2  Sub3  Year  
  60         Z     (X)    Y      1
  60         L      W     V      2
  60         M      P     Y      3 
```

无效学生的示例：

```
 StudentID  Sub1  Sub2  Sub3  Year  
  10         Z     (X)    O      1
  10         L      W     V      2
  10         O      P    (x)     3 
```

我希望对我的问题足够清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:26:59.443

我同意表 2 中每个主题的一行会更好*（规范化结构实际上总是更好，对 SQL 更友好）的*评论。

也就是说，你*可以*在你的结构中解决它。

```
SELECT
  studentID
FROM
  table2
WHERE
     sub1 = 'x'
  OR sub2 = 'x'
  OR sub3 = 'x'
GROUP BY
  studentID
HAVING
  COUNT(*) = 1 
```

*（这是假设学生不能在同一年两次学习同一科目。）*

某些类型的 SQL 可能允许缩短 WHERE 子句...

```
WHERE
  'x' IN (sub1, sub2, sub3) 
```

然后，您可以通过将其放在子查询中来获取所有学生详细信息...

```
SELECT
  *
FROM
  table1
INNER JOIN
(
  <put the above query here>
)
  AS lookup
    ON lookup.studentID = table1.studentID 
```

**编辑**

我不明白你的评论。但是一个替代的（并且可能更普遍的） HAVING 子句可能是..

```
HAVING
  SUM(CASE WHEN sub1 = 'x' THEN 1 ELSE 0 END +
      CASE WHEN sub2 = 'x' THEN 1 ELSE 0 END +
      CASE WHEN sub3 = 'x' THEN 1 ELSE 0 END)
  = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:56:05.847

这样做的一种方法..
对于给定的主题 X，您可以为每个学生运行一个循环，以检查他是否是该主题的有效学生，就像这样。循环内部：

```
IF(
(SELECT count(1) from TableB where Sub1 = 'X' and StudentID = 60 ) + 
(SELECT count(1) from TableB where Sub2 = 'X' and StudentID = 60 ) + 
(SELECT count(1) from TableB where Sub3 = 'X'and StudentID = 60 ) ) = 1
BEGIN
    INSERT INTO #ValidStudent(...)
END 
```

您必须将 StudentID 变量代替 60 并在最后..

```
SELECT * FROM #ValidStudent 
```

# php - 对php文件中的数组求和

> ID：12780625
> 
> 赞同：0
> 
> 时间：2012-10-08T11:16:35.560
> 
> 标签：php, javascript, arrays, smarty

当有将数组放入 smarty php 的函数时，我想知道对数组求和的正确方法。

PHP：

```
function stats($params)
{.....
    $values = implode(',', array_values($statistics));
    return $values;

} 
```

聪明的PHP：

```
<script type="text/javascript"> 
{stats type='applications' period='days' employer=$GLOBALS.current_user.username} 
</script> 
```

将输出：

```
<script type="text/javascript">0,0,0,6,0,0,0,0,405,47</script> 
```

## 总数为 458。

我尝试了什么：

PHP：

```
$this->register_function('stats', array(&$this, 'stats'));
$this->register_function('sum_stats', array(&$this, 'sum_stats'));
function sum_stats($stats)
{ 
```

我完全复制了 $stats 的代码，如下所示：

```
 $values = array_sum($statistics);
    return $values;     
} 
```

聪明的：

```
{sum_stats type='applications' period='days' employer=$GLOBALS.current_user.username} 
```

这是正确的方法吗？我现在得到了458的总和......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T01:19:57.663

您应该能够将其传递给 array_sum。像这样：

PHP 文件：

`$smarty->assign('sum_this_array', array(0,0,0,6,0,0,0,0,405,47));`

聪明的：

`{$sum_this_array|array_sum}`

# linux - 英特尔 CPU 缓存策略

> ID：12780626
> 
> 赞同：7
> 
> 时间：2012-10-08T11:16:39.673
> 
> 标签：linux, caching, cpu, policy

我有一台配备 Intel(R) Core(TM) i5-2450M CPU @ 2.50GHz 处理器的笔记本电脑。我在 Ubuntu 12.04 (x86_64) 上，正在尝试查找有关我的处理器的一些信息。

我能够找到我正在寻找的大部分信息

```
cat /proc/cpuinfo 
```

和

```
lscpu 
```

我还想知道在每个缓存级别上使用的缓存策略。是回写还是直写？

有什么工具可以用来查找此类信息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T16:32:13.973

这不是你可以从 CPUID 等查询的东西，也不能配置你的 CPU 来做一个或另一个，因此不存在用于查询的工具。您*可以*查询的是缓存关联性、缓存行大小和缓存大小，例如通过`/proc/cpuinfo`.

在过去一到二十年中，所有与 Intel 兼容的 CPU 都对缓存使用了*回写*策略（假定首先获取缓存行以允许部分写入）。当然这是理论，实际情况比这要复杂一些。

几乎所有处理器（包括您的模型）都具有一种或多种形式的写入组合（或自 Merom 以来英特尔称其为填充缓冲区），并且除了最古老的英特尔兼容 CPU 之外，所有处理器都支持来自 SSE 寄存器的非缓存写入（再次使用一种形式的写组合）。当然，还有诸如片上缓存一致性协议和窥探过滤等机制来确保一个处理器的内核之间以及多处理器系统中不同处理器之间的缓存一致性。
尽管如此——一般的缓存策略仍然是回写的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-07T21:30:50.110

David Kanter 非常出色的英特尔 Sandybridge 文章涵盖[了内存子系统和缓存架构](http://www.realworldtech.com/sandy-bridge/7/)：L1D 是英特尔常用的回写方式，而每核 L2 也是回写方式。L3 也是如此（这是一个由芯片上所有内核共享的大型包容性缓存）。

另请参阅[英特尔酷睿 i7 处理器中使用了哪种缓存映射技术？](https://stackoverflow.com/questions/49092541/which-cache-mapping-technique-is-used-in-intel-core-i7-processor)有关各代英特尔 CPU 的更多详细信息。

* * *

AMD 采用了一种非常不同的方法：[他们的 L1 高速缓存是直写式的，但具有很小的 4k 写入组合高速缓存。](http://www.agner.org/optimize/blog/read.php?i=225) 在 AMD 上不断重写大于 4k 的缓冲区将成为（慢）L2 而不是 L1 的瓶颈。

Agner 博客上该线程中的一张海报声称 BD 的 L2 也是直写的，但 Paul Clayton 对此答案的评论不同意。（我倾向于相信保罗。）

[幸运的是， AMD Ryzen](http://www.anandtech.com/show/11170/the-amd-zen-and-ryzen-7-review-a-deep-dive-on-1800x-1700x-and-1700/4)使用了普通的回写 32kiB 8 路 L1D，带有私有回写 512kiB L2。L3 是共享的 8MB 受害者缓存。它是回写的，但受害者缓存意味着数据仅在从 L1/L2 驱逐时才进入它，而不是直接用于加载/预取。4 个核心的每个核心集群（CCX 模块）都有自己的 8MB L3，[不同集群中的核心之间的延迟/带宽很差](https://www.reddit.com/r/Amd/comments/5x7oaq/ryzens_memory_latency_problem_a_discussion_of/)。

**除了 write-back 与 write-through 之外，关于缓存层次结构还有很多要说的**，尽管大多数差异对于单线程程序并不重要。（除非操作系统的进程调度程序在 Ryzen 上的集群之间移动它们，在这种情况下它很糟糕。）

* * *

在我的 SnB 系统上：

```
sudo dmidecode 
```

产生的输出包括：

```
Handle 0x0005, DMI type 7, 19 bytes
Cache Information
        Socket Designation: L1-Cache
        Configuration: Enabled, Not Socketed, Level 1
        Operational Mode: Write Back
        Location: Internal
        Installed Size: 32 kB
        Maximum Size: 32 kB
        Supported SRAM Types:
                Other
        Installed SRAM Type: Other
        Speed: Unknown
        Error Correction Type: None
        System Type: Unified
        Associativity: 8-way Set-associative 
```

因此，如果值得信赖，缓存是回写式的事实至少在 BIOS 中。我很好奇它在 AMD CPU 上显示了什么，或者 BIOS 编写者是否倾向于“编造一些东西”，有时会在那里输入错误的值。

正如[这个问题](https://stackoverflow.com/questions/20330509/different-cpu-cache-size-reported-by-sys-device-and-dmidecode)所指出的，L2 的信息有点虚假：它总计私有 256k-per-core L2：

```
Handle 0x0006, DMI type 7, 19 bytes
Cache Information
        Socket Designation: L2-Cache
        Configuration: Enabled, Not Socketed, Level 2
        Operational Mode: Varies With Memory Address
        Location: Internal
        Installed Size: 1024 kB
        Maximum Size: 1024 kB
        Supported SRAM Types:
                Other
        Installed SRAM Type: Other
        Speed: Unknown
        Error Correction Type: None
        System Type: Unified
        Associativity: 8-way Set-associative

Handle 0x0007, DMI type 7, 19 bytes
Cache Information
        Socket Designation: L3-Cache
        Configuration: Enabled, Not Socketed, Level 3
        Operational Mode: Unknown
        Location: Internal
        Installed Size: 6144 kB
        Maximum Size: 6144 kB
        Supported SRAM Types:
                Other
        Installed SRAM Type: Other
        Speed: Unknown
        Error Correction Type: None
        System Type: Unified
        Associativity: Other 
```

这是在 i5-2500k（四核 SnB 和 6MiB 的 L3）上

# javascript - 在 Titanium 应用程序中使用 SVG

> ID：12780628
> 
> 赞同：1
> 
> 时间：2012-10-08T11:16:42.777
> 
> 标签：javascript, html, svg, titanium

当我用`innerHtml`数据更新我的 SVG 文件时，我遇到了问题，一切都显示得很好，但只在图像标签“xlink:href”属性中。如果我为此使用“href”属性，我的图像不会显示在 SVG 浏览器中。有谁知道为什么会这样？

# c# - 将 TFS 工作项转换为 XML 的示例代码？

> ID：12780632
> 
> 赞同：0
> 
> 时间：2012-10-08T11:16:48.753
> 
> 标签：c#, .net, xml, visual-studio-2010, tfs

我想编写一个简单的程序来查询 TFS 并将所有工作项转换为统一类型的 XML 文件并将它们保存到文件夹中的单独文件中。

我确信这种工作通常已经足够完成，而且非常简单——但我在 Internet 上找不到任何示例，也无法以编程方式连接到 TFS 并仅检索工作项信息。任何人都可以帮助我吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:44:24.640

您应该使用 TFS SDK。

你可以在互联网上找到很多这样的[教程](http://geekswithblogs.net/TarunArora/archive/2011/07/10/tfs-2010-sdk-get-projects-iterations-area-path-queries-and.aspx)。

[MSDN](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.100%29.aspx)也会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:45:36.770

您可以使用[TFS SDK](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.100%29.aspx)处理[工作项](http://msdn.microsoft.com/en-us/library/bb130347%28v=vs.100%29.aspx)。然后你需要做的就是把它转换成你想要的格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T07:04:07.960

```
 private TfsTeamProjectCollection GetTfsTeamProjectCollection()
    {
        TeamProjectPicker workitemPicker = new TeamProjectPicker(TeamProjectPickerMode.SingleProject, false, new UICredentialsProvider());
        workitemPicker.AcceptButtonText = "workitemPicker.AcceptButtonText";
        workitemPicker.Text = "workitemPicker.Text";
        workitemPicker.ShowDialog();
        if (workitemPicker.SelectedProjects != null || workitemPicker.SelectedProjects.Length > 0)
        {
            return workitemPicker.SelectedTeamProjectCollection;
        }
        return null;
    }

    private WorkItemCollection  WorkItemByQuery(TfsTeamProjectCollection projects, string query)  //query is likethis:SELECT [System.ID], [System.Title] FROM WorkItems WHERE [System.Title] CONTAINS 'Lei Yang'
    {
        WorkItemStore wis = new WorkItemStore(projects);
        return wis.Query (query );
    } 
```

**WorkItemCollection 是您想要的。**您可以获得 WorkItems 及其属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-01T18:26:38.700

您可以按照 Lei Yang 的建议获取查询结果。然后开始构建 XML。

```
XmlDocument xmlDoc = new XmlDocument();
//XML declaration
XmlDeclaration xmlDeclaration = xmlDoc.CreateXmlDeclaration("1.0", "utf-8", null);
// Create the root element
XmlElement rootNode = xmlDoc.CreateElement("WorkItemFieldList");
xmlDoc.InsertBefore(xmlDeclaration, xmlDoc.DocumentElement);
xmlDoc.AppendChild(rootNode);
 //Create a new element and add it to the root node
 XmlElement parentnode = xmlDoc.CreateElement("UserInput"); 
```

遍历所有工作项字段值

```
xmlDoc.DocumentElement.PrependChild(parentnode);
//wiTrees of type WorkItemLinkInfo[] is the result of RunLinkQuery
foreach (var item in wiTrees)
{
int fieldcount = workItemStore.GetWorkItem(item.TargetId).Fields.Count;
while (fieldcount > 0)
{
//Create the required nodes
XmlElement mainNode = xmlDoc.CreateElement(workItemStore.GetWorkItem(item.TargetId).Fields[fieldcount -1].Name.ToString().Replace(" ", "-"));
// retrieve the text 
//Use the custom method NullSafeToString to handle null values and convert them to String.Empty 
XmlText categoryText = xmlDoc.CreateTextNode(workItemStore.GetWorkItem(item.TargetId).Fields[fieldcount - 1].Value.NullSafeToString().ToString());
// append the nodes to the parentNode without the value
parentnode.AppendChild(mainNode);
// save the value of the fields into the nodes
mainNode.AppendChild(categoryText);
fieldcount--;
}

}
// Save to the XML file
xmlDoc.Save("widetails.xml"); 
```

# javascript - 同一应用程序中的两个不同的 ng-app 并使用 $router 在两个模块之间进行路由？

> ID：12780633
> 
> 赞同：0
> 
> 时间：2012-10-08T11:16:54.970
> 
> 标签：javascript, html, angularjs

我可以在同一个应用程序中有两个不同的 ng-app 并使用 $router 在两个模块之间进行路由吗？据我所知，不能在同一个应用程序中使用两个 ng-view

高级概念：

加载索引.html {

```
 <ng-view>: Load Login.html Here.
             On Successfull Login, Load Home.html here
                                       {
                                         <ng-view>: Load HomePartials.html & other partials
                                         on redirect go back to ng-view of index.html where Login.html would be loaded
                                          </ng-view>
                                       }
 </ng-view> 
```

}

请分享您对此的看法。提前致谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:07:15.847

每个 html 文档不能有超过 1 个 ng-app 指令：

[http://docs.angularjs.org/api/ng.directive:ngApp](http://docs.angularjs.org/api/ng.directive:ngApp)

您可以手动引导多个角度模块，但您将无法为其中一个以上使用路由，因为它们使用窗口位置

# c# - 单击后按钮上的标签变得模糊，并在 WPF 中重新设置动画

> ID：12780634
> 
> 赞同：4
> 
> 时间：2012-10-08T11:16:56.900
> 
> 标签：c#, wpf, xaml, visual-studio-2012

我在 WPF 中的按钮上的标签有问题。单击按钮后，标签变得模糊并且变得清晰，但它看起来像动画并且持续约 2 秒。

```
<Button Grid.Row="2" Command="{Binding DefaultCommand}">
    <StackPanel Orientation="Horizontal">
        <Image Source="../Images/add_all.png" />
        <TextBlock VerticalAlignment="Center" Margin="2">All</TextBlock>
    </StackPanel>
</Button> 
```

我只为 targettype = button 的宽度、高度和边距设置样式。

`RenderOptions.ClearTypeHint="ClearTypeHint"`没有帮助。

![左 - 单击后直接，右 - 几秒钟后](../Images/a59d7d75959eed8f58fbcbabdbe4ead7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:39:46.263

我认为您所看到的只是 Windows 7 上 WPF 按钮的标准行为，没有应用自定义样式。单击标准按钮时，会启动动画，将按钮背景从灰色变为蓝色，然后再变为灰色，大约需要 2 秒。当您选择另一个控件时，动画将停止。

不知道为什么你会看到模糊的标签文本。

您的 PC 上是否禁用了硬件渲染？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T23:09:35.720

对于它的价值，我注意到在 Windows 8 x64 中运行 Visual Studio 2012 时也存在同样的问题。无法修复，只是使用了解决方法。它发生在故事板动画期间在按钮上运行 RenderTransform 时。

# python - 如何使用 IE 或使用 pywinauto 的其他浏览器显示网页上的元素并与之交互

> ID：12780635
> 
> 赞同：0
> 
> 时间：2012-10-08T11:17:00.287
> 
> 标签：python, webpage, pywinauto

我希望能够使用 python 访问网页的元素。我在 Windows XP 中使用 Python 2.5。目前，我正在使用 pywinauto 尝试控制 IE，但如果需要，我可以切换到不同的浏览器或模块。我需要能够单击页面具有的按钮并在文本框中键入。到目前为止，我得到的最好的结果是我能够将 IE 带到我想要的页面。如果可以不实际单击页面上按钮和文本框的坐标，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:32:43.917

我认为更好地与网络服务器交互是使用 cUrl。所有网络服务器功能都是对 GET 或 POST 请求（或两者）的响应。为了调用它们，只需在调用发送方法之前调用按钮链接到的 url 和/或发送附加该数据的 POST 数据以适当的请求 obj。cUrl 能够在不显示的情况下检索和对网络服务器响应（网站代码）进行一些处理，它提供了有关网站中包含的 url 地址的知识，当单击某些按钮时会调用这些信息。也可以知道携带 POST 数据的 html 字段来获取它们的名称。Python 有 curl 库，我希望它和 PHP curl 一样强大，这是我使用和展示的工具。

希望你现在走在正轨上。

BR马雷克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T09:23:59.423

Tommy，如果您有一个 Web 应用程序并且您能够使用 winspy（用于监视页面中控件的工具）识别该页面中的对象，那么到目前为止我有什么观察者。你可以自动化。否则你不能。

就像使用以下代码

```
app = Application.Application();
app.window_(title_re = 'Internet Explorer. *').OKButton.Click() 
```

# wpf - 如何将 PDF 页面显示为缩略图

> ID：12780637
> 
> 赞同：1
> 
> 时间：2012-10-08T11:17:23.097
> 
> 标签：wpf, pdf

我想将 PDF 文档中的每一页显示为 WPF 列表视图中的缩略图作为图像有
什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:31:31.673

您需要一个可以为您将 PDF 文件呈现为图像的库。如果您负担得起商业图书馆，请查看[Amyuni PDF Creator .Net](http://www.amyuni.com/en/developer/pdfcreator/features)，[IacDocument.ExportToJPeg_Method](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.ExportToJPeg_Method.htm)方法尤其可以满足您的需求（*通常适用免责声明*）。

仅作记录，iTextSharp 和 PDFSharp 将无法帮助您完成此任务，除非您的 PDF 文件仅由光栅图像组成。

# javascript - 根据父标题更改html页面中的div类（位于iframe内）

> ID：12780638
> 
> 赞同：0
> 
> 时间：2012-10-08T11:17:27.633
> 
> 标签：javascript, html

在我的网站中，我在 iframe.each href 中构建了一个文本菜单作为 menu.html，我将其放入单独的 div 中。我希望根据父页面的标题，将更改其中一个 div 的类（例如：如果父标题是“home”，则上述 div 的类更改为“标记”）。我已经尝试了以下脚本，但仍然无法正常工作。怎么了？再次感谢！

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title> </title>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript">
switch (window.parent.document.title) {
case "hoempage":document.getElementById("nada1").className="marked"; break;
case "about": document.getElementById("nada2").className = "marked"; break;
        case "jokes": document.getElementById("nada3").className = "marked"; break;
        case "freewares": document.getElementById("nada4").className = "marked"; break;
        case "links": document.getElementById("nada5").className = "marked"; break;
        default: alert("god damn!"); break;
    }

</script>
</head>
<body dir="rtl">
<ul class="menu1">
<li><a href="Index.html" target="_parent"><div id="nada1">homepage</div></a></li>
<li><a href="About.html" target="_parent"><div id="nada2">about</div></a>  </li>
<li><a href="Jokes.html" target="_parent"><div id="nada3">jokes</div></a></li>
<li><a href="freewares.html" target="_parent"><div id="nada4">freewares</div></a>    </li>
<li> <a href="NetGames.html" target="_parent"><div id="nada5">links</div></a>    </li>
</ul>
<br /><br /><hr />
<div class="write_mail">if you want to rgister to site updates enter name + email:
<form action="sent.php" method="post" >
    <input type="text" name="subscr" /><br />email
    <input type="text" name="perosnal"/><br />name
    <br />
    <input type="submit" name="submit" onclick="alert('good job and thanks!');"/>    </form></div>

</body>
</html> 
```

编辑：我尝试了解决方案，但仍然无法正常工作。这是父代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>homepage</title>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body dir="rtl">
<iframe src="menu.html" class="navibar" height="430px" width="50px" scrolling="no" style="border-style:none"></iframe>
<br />
<p class="About">built by zetta the beginner 2012<br /> 
</p>
</body>
</html> 
```

menu.html 是我在消息开头更新的代码。再次抱歉骚扰:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:21:42.743

您忘记`break;`在每个`case`. 看，只要 a`case`有效，将执行以下命令，直到被 a 停止`break`：

```
switch(value){
   case c0: f0();
   case c1: f1();
   case c2: f2();
   default: f3();
} 
```

现在如果`value`等于`c1`，`f1()`将被执行。下一个标签 ( `case c2`)`f2`被调用，`f2`and也是如此`f3`。您需要停止执行这些案例：

```
switch(value){
   case c0: f0(); break;
   case c1: f1(); break;
   case c2: f2(); break;
   default: f3(); break; // doesn't really need a break since it is the last
} 
```

虽然乍一看这似乎违反直觉，但这是遵循 DRY 概念的唯一方法：

```
switch(myletter){
   case 'A':
   case 'B':
   case 'C': alert("Hey, it's either A,B or C"); break;
   default: alert("Sorry, I don't know this letter yet :/");
} 
```

有关更多信息，请参阅[MDN：switch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:40:35.713

嵌入 iframe 代码的页面如下：

```
 <html>
<head>
<title>main</title>
<style>
.marked{background:yellow}
</style>
</head>
<body>
<div id="class1">dddddddddddddddd</div><div id="class2">dddddddddddddddd</div>
<iframe src="iframe.htm"></iframe>
</body>
</html> 
```

iframe 页面代码：

```
 <html>    
    <head>   
    <title>something</title>
    <script type="text/javascript">       
    switch (window.parent.document.title) {         
        case  "main": window.parent.document.getElementById("class1").className = "marked";break;
        case "About": window.parent.document.getElementById("class2").className = "marked";break;
        case "Interesting facts":             
    document.getElementById("class3").className =  "marked";break;
        default: alert("I failed, sorry! :(");   break; 
     }    
    </script>   
    </head>
    <body></body>  
    </html> 
```

# android - 如何制作像苹果 iOS 标签编辑的 android 视图？

> ID：12780644
> 
> 赞同：1
> 
> 时间：2012-10-08T11:17:45.917
> 
> 标签：android, sdk

我是一名初级安卓程序员，

我有一个项目需要做一个如下所示的 UI，但我不知道要做这件事。

这个视图像iOS Text Field，可以输入一个词然后点击回车可以是列表的一个标签，我尝试了很多方法（比如textView，TextEdit，....），但一直没能做出来。

任何人都可以给我一些提示吗？

[https://dl.dropbox.com/u/4945989/image.png](https://dl.dropbox.com/u/4945989/image.png)

# joomla - 如何在 Joomla 中确定授权

> ID：12780654
> 
> 赞同：0
> 
> 时间：2012-10-08T11:18:49.330
> 
> 标签：joomla, authorization, joomla2.5

登录后我使用需要设置重定向到自定义页面。如何在`onAfterRoute`事件中捕获此授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:30:21.963

你应该走这条路：

```
JOOMLAROOT/components/com_user/controller.php 
```

在函数 register_save() 中，找到以下代码：

```
if ( $useractivation == 1 ) {
            $message  =  JText::_( 'REG_COMPLETE_ACTIVATE' );
        } else {
            $message = JText::_( 'REG_COMPLETE' );
        } 
```

行后放置以下代码：

```
$this->setRedirect('/Your Custom Page Address', $message); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:22:06.733

为什么不在 Joomla 用户登录菜单项或标准 Joomla 登录模块中使用内置重定向。两者都提供了在成功登录后重定向用户的选项。对于模块，您需要创建一个指向自定义页面的菜单项，但这很容易做到。

除了简单的重定向之外，您还需要做些什么吗？如果没有，那么只需按照设计使用系统即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:20:52.730

我会创建一个小插件来处理登录后的重定向。用户登录后，会触发 onUserLogin 事件，您可以在调用事件时简单地进行重定向。

避免任何核心黑客攻击，因为您在更新期间总是会遇到麻烦。

像这样的插件的代码可能如下所示：

```
class plgAuthenticationMyredirect extends JPlugin{

   function  onUserLogin ($user, $options){
      $link = 'index.php?option=.....';
      $msg = 'Message to show after login';
      $app = JFactory::getApplication();
      $app->redirect($link, $msg); 
   }
} 
```

# windows - 相当于“WMIC QFE Get”的 Windows API

> ID：12780659
> 
> 赞同：2
> 
> 时间：2012-10-08T11:19:12.090
> 
> 标签：windows, winapi, visual-c++, wmi-query

我是 C++ 的新手，目前正在努力在 C++ DLL 中获取 Windows 修补程序/补丁信息。

我评估了以下方法：

1.  通过在 C++ 代码中执行一个子进程并运行`wmic qfe get`和读取所有数据。
2.  通过使用 C++ API 初始化 COM，连接到 Wbem 并执行`select * from win32_quickfixengineering`查询。

除了以上两种方法，

是否有任何直接的 Windows API 可以为我完成所有工作并提供当前安装在机器上的 KB 信息列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:28:35.147

您可以使用[`Windows Update Agent API`](http://msdn.microsoft.com/en-us/library/aa387287%28v=VS.85%29.aspx)和[IUpdateSearcher](http://msdn.microsoft.com/en-us/library/aa386515%28v=VS.85%29.aspx)接口。

# magento - 如何通过magento中的管理模块下拉来进行过滤工作？（例如状态---->启用）

> ID：12780661
> 
> 赞同：1
> 
> 时间：2012-10-08T11:19:15.200
> 
> 标签：magento, grid, adminhtml

想要对产品名称进行过滤，如状态已完成。（产品 [Samsung,alien] 这些值是从数据库中随机显示的，我不知道它的代码写在哪里以及它在哪个逻辑上呈现）。请按步骤提供答案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:04:10.277

我收到了解决方案。刚刚用我的数据库字段名称添加了索引数据`(location:/var/www/magento/app/code/local/One/First/Block/Adminhtml/First/Grid.p‌​‌​hp)`
----------->
`$this->addColumn('select_first',array( 'header' => Mage::helper('first')->__('Product Name'), 'width' => '150px', 'index' => 'proid', 'type' => 'options', 'options' => Mage::getSingleton('first/arrayf')->getProArray(), ));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:08:20.073

```
 $collection = Mage::getModel('catalog/product')->getCollection()
        ->addAttributeToSelect('sku')
        ->addAttributeToSelect('name')
        ->addAttributeToSelect('attribute_set_id')
        ->addAttributeToSelect('type_id')
        ->joinField('qty',
            'cataloginventory/stock_item',
            'qty',
            'product_id=entity_id',
            '{{table}}.stock_id=1',
            'left')
        ->joinAttribute('status', 'catalog_product/status',
                        'entity_id', null, 'inner', $store->getId()); 
```

现在您在 $collection 上拥有所有产品和各自的状态，您可以通过以下方式进行过滤：

```
$collection->addAttributeToFilter('status', array(
'like' => array('status'),
)); 
```

# xcode - qlpreviewcontroller 不加载 mysql 查询

> ID：12780662
> 
> 赞同：0
> 
> 时间：2012-10-08T11:19:16.357
> 
> 标签：xcode, qlpreviewcontroller

如果路径是 mysql 查询，为什么 qlpreviewcontroller 不加载我的 pdf 文件。

例如 ：

[http://myweb.com/ios/download.php?upl_P=699](http://myweb.com/ios/download.php?upl_P=699)

该文件显示为已编码。

进阶谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:26:09.643

QLPreviewController 仅适用于文件 URL。您必须先将文件下载到本地文件系统，然后使用以下命令从磁盘加载它：

```
NSURL *fileURL = [NSURL fileURLWithPath:@"/path/to/file/on/disk"]; 
```

# c# - C# TcpClient 丢包

> ID：12780665
> 
> 赞同：1
> 
> 时间：2012-10-08T11:19:22.360
> 
> 标签：c#, asynchronous, tcpclient, beginread

当我真正对我的网络代码进行压力测试时，我遇到了一些问题。基本上，一旦设置了套接字，它就会调用：

```
NetworkStream networkStream = mClient.GetStream();
networkStream.BeginRead(buffer, 0, buffer.Length, ReadCallback, buffer);

private void ReadCallback(IAsyncResult result)
        {
            try
            {
                int read;
                NetworkStream networkStream;
                try
                {
                    networkStream = mClient.GetStream();
                    read = networkStream.EndRead(result);
                }
                catch
                {
                    return;
                }

                if (read == 0)
                {
                    //The connection has been closed.
                    return;
                }

                var readBuffer = (byte[])result.AsyncState;
                var readCount = readBuffer.Length;
                while (readCount < 4)
                {
                    readCount += networkStream.Read(readBuffer, 0, readBuffer.Length - readCount);
                }
                var length = BitConverter.ToInt32(readBuffer, 0);
                var messageBuffer = new byte[length];
                readCount = 0;
                while (readCount < length)
                {
                    readCount += networkStream.Read(messageBuffer, 0, messageBuffer.Length - readCount);
                }
                else
                {
                    RaiseMessageReceived(this, messageBuffer);
                }
                //Then start reading from the network again.
                readBuffer = new byte[4]; //may not need to reset, not sure
                networkStream.BeginRead(readBuffer, 0, readBuffer.Length, ReadCallback, readBuffer);
            }
            catch(Exception)
            {
                //Connection is dead, stop trying to read and wait for a heal to retrigger the read queue
                return;
            }
        } 
```

然后下面是我的发送方法

```
private byte[] GetMessageWithLength(byte[] bytes)
        {
            //Combine the msg length to the msg
            byte[] length = BitConverter.GetBytes(bytes.Length);
            var msg = new byte[length.Length + bytes.Length];
            Buffer.BlockCopy(length, 0, msg, 0, length.Length);
            Buffer.BlockCopy(bytes, 0, msg, length.Length, bytes.Length);
            return msg;
        }

public override bool Send(byte[] bytes)
        {
            lock (sendQueue)
            {
                sendQueue.Enqueue(bytes);
                Interlocked.Increment(ref sendQueueSize);
            }
            if (!mClient.Connected)
            {
                if (Connect())
                {
                    RaiseConnectionChanged(this, true, Localisation.TCPConnectionEstablished);
                }
                else
                {
                    RaiseConnectionChanged(this, false, (bytes.Length > 0 ? Localisation.TCPMessageFailed : Localisation.TCPMessageConnectionLost));
                }
            }

            try
            {
                NetworkStream networkStream = mClient.GetStream();

                lock (sendQueue)
                {
                    if (sendQueue.Count == 0)
                    {
                        return true;
                    }
                    bytes = sendQueue.Dequeue();
                }
                var msg = GetMessageWithLength(bytes);
                //Start async write operation
                networkStream.BeginWrite(msg, 0, msg.Length, WriteCallback, null);
            }
            catch (Exception ex)
            {
                RaiseConnectionChanged(this, false, (bytes.Length > 0 ? Localisation.TCPMessageFailed : Localisation.TCPMessageConnectionLost));
            }
            return true;
        }

        /// <summary>
        /// Callback for Write operation
        /// </summary>
        /// <param name="result">The AsyncResult object</param>
        private void WriteCallback(IAsyncResult result)
        {
            try
            {
                NetworkStream networkStream = mClient.GetStream();
                while (sendQueue.Count > 0)
                {
                    byte[] bytes;
                    lock (sendQueue)
                    {
                        if (sendQueue.Count == 0)
                        {
                            break;
                        }
                        bytes = sendQueue.Dequeue();
                    }
                    var msg = GetMessageWithLength(bytes);
                    networkStream.Write(msg, 0, msg.Length);
                    Interlocked.Decrement(ref sendQueueSize);
                }
                networkStream.EndWrite(result);
                mLastPacketSentAt = Environment.TickCount;
                Interlocked.Decrement(ref sendQueueSize);
            }
            catch (Exception ex)
            {
                RaiseConnectionChanged(this, false, Localisation.TCPMessageConnectionLost);
            }
        } 
```

但是，是的，当我对系统进行压力测试时（比如 500 个左右的客户端同时发送大量消息），我注意到每 400 万个数据包中可能有 1 个数据包没有被接收。我不确定问题在于发送还是接收，这就是我包含这两种方法的原因。但是我会指出，如果我选择从客户端发送另一个数据包，它仍然可以正确发送和接收，所以它不仅仅是排队或其他东西。

谁能看到我缺少的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:29:05.850

两个读取循环（例如`while (readCount < length)`）是错误的。您总是在零偏移处读取。您应该以不断增加的偏移量阅读。

这会导致已经读取的数据被覆盖。

另外，我不确定混合同步和异步读取是否是个好主意。这样你就失去了异步代码的好处，仍然必须处理回调等。我认为你应该决定一种风格并坚持下去。

# number-theory - xy+yz+ xz = N的不同解数

> ID：12780666
> 
> 赞同：2
> 
> 时间：2012-10-08T11:19:26.010
> 
> 标签：number-theory

我一直在尝试解决关于 spoj 的问题。这是问题的链接。

[http://www.spoj.pl/problems/TAP2012B/](http://www.spoj.pl/problems/TAP2012B/)

根据我的解释，我需要找到方程 xy+yz+xz = N 的解数，其中 n 给了我们。x>=y>=z z 可以为零。但是 x 和 y 不能。我尝试通过实现 3 个 for 循环（不好的方法）来解决这个问题。它给出了正确的答案，但它太慢了。此外，其他人几乎很快就解决了它（0.00）所以我相信这个问题有一种非常不同的方法。对于 N = 20，不同解的数量为 5： (6,2,1) (5,4,0) (10,2,0) (4,2,2,) (20,1,0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T11:33:13.240

也许有一些基于数论的绝妙解决方案。但简单地重新考虑任务也可以降低算法的复杂性。

例如，我们不需要第三个循环，因为我们可以计算`z`为`(N - x*y)/(x+y)`. 而且我们不必每次`y`都一直跑到，因为我们知道，这不是负数，因此.`x``z``N >= xy`

```
N = 9747
for x in range(1, N+1):
    max_y = min( N / x, x) 
    for y in range(1, max_y+1):
        if (N - x*y) % (x+y) == 0:
            z = (N - x*y) / (x+y)
            if z <= y:
                print x,y,z 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T11:10:31.087

You are approaching towards the right direction there will be 3 nested loops but try to reduce the no. of times the loop operates.... Follow the question and conditions carefully.....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T12:11:34.000

你显然在学习，所以如果你自己做所有事情会更好，但你现在从 akalenuk 那里得到了一个很好的解决方案，我希望你也能从中学到一些东西。

如果你同时学习 python，我会给你一个与 akalenuk 等效的解决方案，但这次使用列表理解，这是一个非常有用的机制：

```
N = 10000

print [(x, y, z)
       for x in range(1, N+1)
       for y in range(1, min( N/x, x) + 1 )
       for z in [ (N - x*y) / (x+y) ] 
       if (N - x*y) % (x+y) == 0
       if z <= y] 
```

关键在于修剪解决方案空间。上面的代码已经很优化了。您可能会从以下内容开始：

```
N = 10000

print [(x, y, z)
       for x in range(1, N+1)
       for y in range(1, x+1 )
       for z in range(y+1) 
       if N == x*y + y*z + x*z] 
```

这将运行很长时间。因此，优化的第一点可能是在 y 上添加条件：

```
N = 10000

print [(x, y, z)
       for x in range(1, N+1)
       for y in range(1, x+1 )
       if x*y <= N
       for z in range(y+1) 
       if N == x*y + y*z + x*z] 
```

这已经大大减少了时间，因为没有希望`y`-loop`z`根本不运行。然后，您注意到您实际上可以通过显式计算最大 y 来替换该 if 语句，就像 akalenuk 所做的那样：

```
N = 10000

print [(x, y, z)
       for x in range(1, N+1)
       for y in range(1, min(x, N/x) +1)
       for z in range(y+1) 
       if N == x*y + y*z + x*z] 
```

这将再次加快速度。

在您学习的过程中，我建议您尝试所有这些以及您自己的方法，计时并从中学习。我还建议尝试不同的、类似的解决方案

# python - 无法安装 PyPdf 2 模块

> ID：12780668
> 
> 赞同：13
> 
> 时间：2012-10-08T11:19:28.900
> 
> 标签：python, module, importerror, pypdf

尝试安装[PyPdf2](https://github.com/knowah/PyPDF2)模块，我下载了 zip 并解压缩，我执行了`python setup.py build`和`python setup.py install`，但它似乎尚未安装，当我尝试从 python 脚本导入它时，它返回`ImportError`：

```
import pyPdf
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named pyPdf 
```

请提供任何帮助。

我在 windows XP 下使用 python 2.7。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-08T13:40:03.730

[PyPDF2](https://github.com/knowah/PyPDF2)的 README 文件似乎不正确。它表明

```
import pyPdf 
```

应该工作，但它没有。这个新模块被导入为

```
import PyPDF2 
```

（正如github上的文档结构所建议的，并在验证我自己之后）。

为方便起见，例如在使用旧代码时，您当然可以这样做

```
import PyPDF2 as pyPdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T20:33:39.083

Windows 的 PyPDF 安装程序对我来说效果很好。(Win7-64) [http://pybrary.net/pyPdf/](http://pybrary.net/pyPdf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-26T10:43:11.153

到现在才知道是什么问题。需要检查进一步的命令是否`PyPDF2`有效。导入在 python 的基本位置`PyPDF2`查找`PyPDF2`文件夹。就我而言，它是`C:\Python27\site-packages\PyPDF2`。

激活 virtualenv 时， pip install`PyPDF2`不会创建上述文件夹。因此错误。我手动将 PyPDF2 文件夹和`PyPDF2-1.26.0.dist-info`文件夹从我的 virtualenv 环境复制到上面的基本文件夹中，并且错误停止了。以防万一，我创建了新的 virtualenv 环境并安装了 PyPDF2，无论是否激活 virtualenv，错误就消失了。

我的文件夹结构：

*   C:\Python27\site-packages\PyPDF2
*   C:\Python27\site-packages\PyPDF2-1.26.0.dist-info

*   C:\Python27\venv2\Lib\site-packages\PyPDF2

*   C:\Python27\venv2\Lib\site-packages\PyPDF2-1.26.0.dist-info

Python 脚本测试导入非常简单：

```
#import sys
import PyPDF2

#print(sys.path)
print('hello') 
```

我使用stackoverflow响应检查syspath对上述问题进行了故障排除 [如果import语句仅包含文件名，python如何找到模块文件？](https://stackoverflow.com/questions/15252040/how-does-python-find-a-module-file-if-the-import-statement-only-contains-the-fil)

# regex - RegEx 验证密码（1 个小写字母、1 个大写字母、1 个数字、无空格）

> ID：12780670
> 
> 赞同：5
> 
> 时间：2012-10-08T11:19:31.393
> 
> 标签：regex, passwords, character

我正在尝试创建一个 RegExpression 以满足以下条件；

*   至少 1 个小写字母
*   至少 1 个大写字母
*   至少 1 位数
*   没有空间
*   最少 8 个字符
*   没有特殊字符

到目前为止，我得到了这个；

```
^(?=.{8,})(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.\s).*$ 
```

但是我无法让它工作。任何帮助将不胜感激。我从来不擅长拼图:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T11:23:47.537

你快到了；只是`.*`最后忽略了您的“无空格/特殊字符”规则，并且`(?=.\s)`前瞻是错误的（您可能是指`(?!.*\s)`or `(?=\S*$)`）。

但是无论如何您都不需要该前瞻，因为您可以简单地指定允许哪些字符（并在那里强制执行“最少 8 个字符”规则）：

```
^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$ 
```

但是为什么要阻止用户在密码中使用非字母数字字符呢？

# php - 在php中将数组上的指定值从xml转换为csv

> ID：12780671
> 
> 赞同：0
> 
> 时间：2012-10-08T11:19:31.487
> 
> 标签：php, xml, file, csv

我只想将指定值从 xml 文件转换为 csv...

XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<file>
<PRODUCT sku="12345" price="129"/>
<PRODUCT sku="12356" price="150"/>
<PRODUCT sku="12367" price="160"/>
<PRODUCT sku="12389" price="190"/>
</file> 
```

CSV 文件。

```
SKU,价格
12345,129
12356,150
12367,160
12389,190

```

但我只想得到 12345、12367 和 12389 的价格

这是我的开始文件：

```
 <?php
    $filexml = 'file.xml';
        if (file_exists($filexml)){
            $xml = simplexml_load_file($filexml);
            $file = fopen('file.csv', 'w');
            $header = array('sku', 'price');
            fputcsv($file, $header, ',', '"');
            foreach ($xml->PRODUCT as $product){
                $item = array();
                $value1 = $product->attributes()->sku;
                $value2 = $product->attributes()->price;

            $item[] = $value1;
        $item[] = $value2;
                fputcsv($file, $item, ',', '"');    
            }
            fclose($file);
        }

    ?> 
```

一个选项可以是这个，但正在返回我的数组，可能那里有问题。

```
<?php
        $filexml = 'file.xml';
            if (file_exists($filexml)){
                $xml = simplexml_load_file($filexml);
                $file = fopen('file.csv', 'w');
                $header = array('sku', 'price');
                $customvalue = array('12345', '12367', '12389');
                fputcsv($file, $header, ',', '"');
                foreach ($xml->PRODUCT as $product){
                    $item = array();
                    $value1 = $product->attributes()->sku;
                    $value2 = $product->attributes()->price;

                $item[] = $customvalue;
                $item[] = $value2;
                    fputcsv($file, $item, ',', '"');    
                }
                fclose($file);
            }

        ?> 
```

谢谢

瑞安解决方案：

```
<?php
            $filexml = 'file.xml';
                if (file_exists($filexml)){
                $xml = simplexml_load_file($filexml);
                $file = fopen('file.csv', 'w');
                $header = array('sku', 'price');
                    $customvalue = array('12345', '12367', '12389');
                fputcsv($file, $header, ',', '"');
                foreach ($xml->PRODUCT as $product){        
                    if ( in_array($product->attributes()->sku, $customvalue ) ) {
                    $item = array ();
                    $item[] = $product->attributes()->sku;
                    $item[] = $product->attributes()->price;
                    fputcsv($file, $item, ',', '"');    
                    }
                fclose($file);
                }
            ?> 
```

但输出是真实和好的，但我需要删除不必要的代码，因为在大约 7000 个代码的大文件中，这会得到一个 300mb 的 csv 文件。

这是输出。

```
12345,129
12345,129,12356,150
12367,160
12389,190 
```

在大文件中我得到这个：

```
12345,129
12345,129,123456,150,12367,160
12389,190,123456,150,12367,160,12345,129
12399,200
12399,200,12345,129,12389,160,123456,150
12399,200,12345,129,12389,160,123456,150,12399,200,12345,129,12389,160,123456,150 
```

数组中的指定代码首先在右列中，但最后这是创建一个大的 csv 文件。并导致超时或内存不足。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:06:20.127

你在正确的轨道上。添加一个检查以确保您只读取指定的行，并简化您想要的字段的拉出，就像这样（只是`foreach`循环，其余的保持不变：

```
 foreach ($xml->PRODUCT as $product){        
    if ( in_array($product->attributes()->sku, $customvalue ) ) {
          $item = array ();
      $item[] = $product->attributes()->sku;
      $item[] = $product->attributes()->price;
      fputcsv($file, $item, ',', '"');    
    } 
```

# java - JTable 选择和删除

> ID：12780672
> 
> 赞同：1
> 
> 时间：2012-10-08T11:19:34.697
> 
> 标签：java, swing, jtable, tablemodel, listselectionlistener

我有一个 JTable，它显示保存在 ArrayList 集合中的客户对象列表。从这个 JTable 中，我希望能够突出显示特定客户，然后单击“删除客户”按钮，该按钮从选定的表行中提取 ID 列值并使用它通过迭代器搜索 ArrayList，找到匹配客户，并将其从集合中删除。我在挥杆组件和事件监听器方面的专业知识还有很多不足之处，到目前为止，我尝试了大约 5 种不同的组合，但我一无所获。我该怎么做？到目前为止，我的代码的相关部分是：

```
class CustomerFrame extends JFrame{
    public CustomerFrame(travelagent agent){

        CustomerPanel cp = new CustomerPanel(agent, this);
        setSize(800,500);
        setLocationRelativeTo(null);
        setTitle("Actions for customer");

        add(cp);

    }
}

class CustomerPanel extends JPanel implements ActionListener, ListSelectionListener{
    private travelagent agent;
    private JButton addCust;
    private JButton deleteCust;
    private JButton editCust;
    private JButton bookFlight;
    private JButton exit;
    private CustomerFrame frame;
    private Object selectedID;
    private JTable ref;

    public CustomerPanel(travelagent agent, CustomerFrame frame){
        ListCustPanel lp = new ListCustPanel(agent);
        setLayout(new GridLayout(2,1,5,5));

        ref = lp.getTable();
        ListSelectionModel sel = ref.getSelectionModel();
        sel.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        sel.addListSelectionListener(this);

        this.agent = agent;
        this.frame = frame;
        JLabel options = new JLabel("Options:");
        addCust = new JButton("Add customer");
        deleteCust = new JButton("Delete customer");
        editCust = new JButton("Edit Customer");
        bookFlight = new JButton("Book a flight");
        exit = new JButton("Back to main menu");

        options.setHorizontalAlignment(SwingConstants.CENTER);
        JPanel b = new JPanel(new GridLayout(3,2,5,5));

        b.add(options);
        b.add(addCust);
        b.add(deleteCust);
        b.add(editCust);
        b.add(bookFlight);
        b.add(exit);

        add(lp);
        add(b);

        addCust.addActionListener(this);
        deleteCust.addActionListener(this);
        editCust.addActionListener(this);
        bookFlight.addActionListener(this);
        exit.addActionListener(this);
    }

    public void valueChanged(ListSelectionEvent l){
        if(!l.getValueIsAdjusting()){
            int index = ref.getSelectedRow();
            selectedID = ref.getValueAt(index, 0);
        }
    }

    public void actionPerformed(ActionEvent e){
        if(e.getSource() == addCust){
            NewCustFrame cf = new NewCustFrame(agent, frame);
            cf.setVisible(true);
            cf.setDefaultCloseOperation(NewCustFrame.DISPOSE_ON_CLOSE);

        if(e.getSource() == deleteCust){
            DeleteCustFrame df = new DeleteCustFrame(agent, selectedID);
            df.setVisible(true);
            df.setDefaultCloseOperation(DeleteCustFrame.DISPOSE_ON_CLOSE);
        }
        if(e.getSource() == editCust){

        }
        if(e.getSource() == bookFlight){

        }
        if(e.getSource() == exit){
            frame.dispose();
        }

    }
    }

}

/*
 * this displays the list of customers:
 */
class ListCustPanel extends JPanel{

    private static final long serialVersionUID = 1L;
    private JTable table;
    public ListCustPanel(travelagent agent){

        String[] colNames = {"ID", "First Name", "Last Name"};

        int size = agent.getCust().size(); //get the size of the arraylist in order to define an object array to contain information in
        Object[][] data = new Object[size][3]; // create the array

        int i = 0;
        Iterator<customer> iter = agent.getCust().iterator(); //create an iterator to progress thought the arraylist
        while(iter.hasNext()){
            customer temp = iter.next(); //assign the current customer to a variable

            //extract its attributes and feed into object array
            data[i][0] = temp.getID(); 
            data[i][1] = temp.getFname();
            data[i++][2] = temp.getLname();

        }
        setLayout(new GridLayout(1,1,5,5));

        // convert the object array into a JTable
        table = new JTable(data, colNames);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        // create a sorter to sort table rows
        TableRowSorter<TableModel> sorter = new TableRowSorter<TableModel>(table.getModel());
        table.setRowSorter(sorter);
        ArrayList<SortKey> sortKeys = new ArrayList<RowSorter.SortKey>();
        sortKeys.add(new RowSorter.SortKey(2, SortOrder.ASCENDING));
        sorter.setSortKeys(sortKeys);

        JScrollPane scrollPane = new JScrollPane(table);
        table.setFillsViewportHeight(true);
        add(scrollPane);

    }

    public JTable getTable(){
        return table;
    }
}

/*
 * delete the customer using this
 */
class DeleteCustFrame extends JFrame{
    public DeleteCustFrame(travelagent agent, Object ID){
        DeleteCustPanel dcp = new DeleteCustPanel(agent, this, ID);
        add(dcp);

        setSize(300,200);
        setTitle("Delete Customer");
        setLocationRelativeTo(null);

    }

}

class DeleteCustPanel extends JPanel implements ActionListener{
    private travelagent agent;
    private JButton delete;
    private JButton cancel;
    private JTextField id;
    private DeleteCustFrame frame;
    public int ID;

    public DeleteCustPanel(travelagent agent, DeleteCustFrame frame, Object ID){
        this.ID = (int)ID;
        this.agent = agent;
        setLayout(new GridLayout(3,1,5,5));

        String fname = null;
        String lname = null;
        boolean hasFlight = false;
        Iterator<customer> iter = agent.getCust().iterator();
        while(iter.hasNext()){
            customer temp = iter.next();
            if(temp.getID() == this.ID){
                 fname = temp.getFname();
                 lname = temp.getLname();
            }
            if(temp.getNumFlight() > 0){
                hasFlight = true;
            }
        }

        JLabel desc = new JLabel("Customer: " + ID + " " + fname + " " + lname);;
        desc.setHorizontalAlignment(SwingConstants.CENTER);
        JLabel yesFlight;
        if(hasFlight){
             yesFlight = new JLabel("This customer has flights booked!");
        }else{
            yesFlight = new JLabel("No flights are booked for this customer");
        }

        yesFlight.setHorizontalAlignment(SwingConstants.CENTER);

        JPanel buttonPanel = new JPanel();

        buttonPanel.setLayout(new GridLayout(1,2,5,5));
        buttonPanel.add(delete);
        buttonPanel.add(cancel);

        add(desc);
        add(yesFlight);
        add(buttonPanel);

        delete.addActionListener(this);
        cancel.addActionListener(this);

    }

    public void actionPerformed(ActionEvent e) {
        if(e.getSource() == delete){
            Iterator<customer> iter = agent.getCust().iterator();
            while(iter.hasNext()){
                customer temp = iter.next();
                if(temp.getID() == ID){
                    agent.deleteCust(temp);
                }
            }
            JOptionPane.showMessageDialog(null, "Customer deleted!", null, JOptionPane.PLAIN_MESSAGE);
            frame.dispose();
        }
        if(e.getSource() == cancel){
            frame.dispose();
        }

    }
} 
```

到目前为止，当我单击删除客户并突出显示客户时，没有采取任何行动。我知道很长的问题，但如果有帮助，我怀疑我的问题发生在我试图使用 ListSelectionListener 的地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:26:16.163

`JTable`提供了一个[`DefaultTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html)使这变得更简单的。使用它代替`ArrayList`.

这些方法包括（行）来自[`removeRow(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#removeRow%28int%29)哪里。`int`[`JTable.getSelectedRow()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#getSelectedRow%28%29)

# python - Python / 扭曲矩阵和 SOAP 线程

> ID：12780673
> 
> 赞同：0
> 
> 时间：2012-10-08T11:19:36.240
> 
> 标签：python, twisted, twisted.internet

我有一个使用 Python / Twisted Matrix 构建的应用程序，它使用来自 SOAP 客户端的方法来发送一些消息。问题是有时我想发送很多消息，而当这种情况发生时，我想在多个线程中进行。例如，如果我必须发送 100 条消息，我希望将其分成 20 条消息组并创建 5 个线程来并行发送消息。

我应该寻找什么？有任何想法吗 ？我还希望线程能够报告收集到的数据

PS 考虑到与 SOAP 客户端一起工作可能更像是一个等待的问题......你认为线程不是解决这个问题的最佳方法吗？肥皂客户端的回调可以用来创建某种发送者的“池”，并让发送者以某种方式发送新的东西吗？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:56:07.080

最好的方法可能由您访问的 SOAP 服务和方法的分布定义。

我的第一个建议是不要使用操作系统线程，而是使用带有[inlineCallbacks](http://hackedbellini.org/development/writing-asynchronous-python-code-with-twisted-using-inlinecallbacks/)和[deferredSemaphores的](http://snakewrestling.com/using-twisteds-deferred-semaphore/)~~微线程~~生成器协程。

但是您可能想要调整一些东西以重用同一服务器的连接和/或保留服务器 cookie。

# sitecore - 是否有 Sitecore 设置可以/必须在自动生成的密码中包含哪些字符？

> ID：12780674
> 
> 赞同：3
> 
> 时间：2012-10-08T11:19:42.760
> 
> 标签：sitecore, sitecore6

是否有可用于指定在自动生成的密码中使用哪些字符的设置？

我们当前的密码是一些特殊字符的混乱，我们想在未来对它们进行一些整理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:16:04.427

有一个`Sitecore.SecurityModel.Cryptography.PasswordGenerator`类，用于为 Sitecore Packager 安装的安全帐户分配随机密码。它包含一个属性`Exclusions`，它是生成密码时要排除的字符串。

因此，您似乎可以像这样实现您所需要的：

```
var generator = new Sitecore.SecurityModel.Cryptography.PasswordGenerator();
generator.Exclusions = @"%|)(";
generator.Generate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:27:18.770

重置密码时，Sitecore`ResetPassword()`使用`SqlMembershipProvider`. 默认情况下，配置的提供程序是`System.Web.Security.SqlMembershipProvider`.

我追踪了生成密码的代码，它有一个硬编码的标点符号列表，这些标点符号总是随机包含在密码中：

```
private static char[] punctuations = "!@#$%^&*()_-+=[{]};:>|./?".ToCharArray(); 
```

因此，如果不实现自己的 SqlMembershipProvider 就无法更改此行为（至少不能用于重置密码，也许可以对 Yan 回答的打包程序生成的密码进行操作）

# magento-1.7 - 在高级搜索中设置布局 Magento

> ID：12780676
> 
> 赞同：1
> 
> 时间：2012-10-08T11:19:45.617
> 
> 标签：magento-1.7, magento-layout-xml

我有几家布局不同的商店。当我在商店中进行搜索时，结果以默认布局显示。如果我通过 AdvancedController 调用 getStore，结果是正确的，但页面布局不正确。在默认布局中：

```
<catalogsearch_advanced_result translate="label">
    <label>Advanced Search Result</label>
    <reference name="root">
        <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
    </reference>
    <reference name="catalogsearch_advanced_result">
        <action method="setColumnCount"><columns>4</columns></action>
    </reference>
</catalogsearch_advanced_result> 
```

在另一个商店布局中：

```
<catalogsearch_advanced_result translate="label">
    <label>Advanced Search Result</label>
    <!-- Mage_Catalogsearch -->
    <reference name="root">
        <action method="setTemplate"><template>page/3columns.phtml</template></action>
    </reference>
    <reference name="catalogsearch_advanced_result">
        <action method="setColumnCount"><columns>3</columns></action>
    </reference>
</catalogsearch_advanced_result> 
```

每个商店的结果始终以默认布局显示。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T17:50:46.047

高级搜索结果布局通过主题的 catalogsearch.xml 布局文件进行控制。

您可以使用[local.xml 布局文件](http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout)修改或覆盖它，并更改用于高级搜索结果的模板；

```
<?xml version="1.0" encoding="UTF-8"?>
<layout>

    <!-- Advanced search result -->
    <catalogsearch_advanced_result>

       <reference name="root">
           <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>

    </catalogsearch_advanced_result>    

</layout> 
```

如果您正在更改catalogsearch.xml 并且对于为什么您的站点中的布局没有改变而摸不着头脑，那么首先验证主题作者/其他开发人员尚未在local.xml 中覆盖它

# android - Android AudioRecord 和 MediaRecorder

> ID：12780677
> 
> 赞同：6
> 
> 时间：2012-10-08T11:19:46.270
> 
> 标签：android, media-player, mediarecorder, audiorecord, feature-extraction

我正在开发一个音频处理应用程序，我需要在其中录制音频，然后对其进行处理以获得该录音的功能。但是，我希望使用 MediaPlayer 播放可播放格式的音频。

我已经看到要录制音频以进行处理，最好使用 AudioRecord，因为我可以从那里获取原始音频。但是我不能以可播放的格式将数据写入文件（在 android 中是否有任何库可以做到这一点？）。

我使用这种方法记录原始数据，然后将其写入文件： [http](http://andrewbrobinson.com/2011/11/27/capturing-raw-audio-data-in-android/) ://andrewbrobinson.com/2011/11/27/capturing-raw-audio-data-in-android/ 但是当我尝试播放这个文件时在设备上，它无法播放。

然后，如果我使用 MediaRecorder，我不知道如何解码数据以提取特征。我一直在看 MediaExtractor，但它似乎 MediaExtractor 不解码帧。

那么.. 最好的方法是什么？我想这在任何音频处理应用程序中都很常见，但我无法找到管理它的方法。

感谢您的回复。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T13:02:35.420

`AudioRecord`如果您需要进行任何类型的处理，使用是正确的方法。要播放它，您有几个选择。如果您只打算在*您的应用程序*中播放它，您可以使用`AudioTrack`而不是`MediaPlayer`播放原始 PCM 流。

如果您希望它可以与其他应用程序一起玩，您需要先将其转换为其他应用程序。WAV 通常是最简单的，因为您只需要添加[header](https://stackoverflow.com/questions/4777181/creating-a-wav-file-from-raw-pcm-data-using-the-android-sdk)。您还可以找到用于转换为其他格式的库，例如用于 OGG 的 JOrbis 或用于 MP3 的 JLayer 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:29:41.613

为了获得最佳质量结果，您必须使用 AudioRecord 类而不是 MediaRecorder。
请查看以下链接：
[需要一个简单的录音示例](https://stackoverflow.com/questions/6150592/need-a-simple-example-for-audio-recording)

也看看这个链接：http: [//i-liger.com/article/android-wav-audio-recording](http://i-liger.com/article/android-wav-audio-recording)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-06T15:33:46.420

如果使用 AudioRecord 对象获取原始音频信号，下一步将其保存为可播放文件并不难，您只需在捕获的音频数据前添加一个 WAV Head，然后您将获得一个 .WAV 文件您可以在大多数手机上播放它。

.WAV 文件是 RIFF 格式的文件。WAV 文件的 RIFF 标头长 44 字节，包含采样率、采样宽度和通道计数信息。您可以从[这里获取详细信息](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)

我在 Android 手机上做了示例功能，它工作正常。

# android - Android 计算器错误

> ID：12780680
> 
> 赞同：1
> 
> 时间：2012-10-08T11:20:05.903
> 
> 标签：android, calculator

我有两个问题：

1.  如何像普通计算器一样调整表格中的按钮？
2.  每当我单击“相等”按钮时，应用程序正在关闭-强制关闭。

我认为问题来自 int sum=0; 每当我在相同的地方使用它时，它都会出错。

[代码](http://pastebin.com/rarEg0yk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:29:07.367

要调整按钮，请使用`TableLayout`或`RelativeLayout`，您可以在此处相对于其他按钮定位按钮。关于第二个问题，只需改变

```
display.setText(sum); 
```

至

```
display.setText(String.valueOf(sum)); 
```

为了让你的计算器工作至少一点点改变`equal.setOnClickListener`：

```
equal.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                            // TODO Auto-generated method stub

                            display.setText(String.valueOf(counter+sum));
                            counter=0;
                            sum=0;
                    }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:29:45.983

使用此代码可能会有所帮助

```
display.setText(sum+""); 
```

因为您已将 sum 声明为 int 并且 setText 属性接受 CharSequence

# oracle11g - ORA-04030: 尝试分配 2024 字节时进程内存不足 (kxs-heap-c,kghsstk)

> ID：12780684
> 
> 赞同：1
> 
> 时间：2012-10-08T11:20:23.743
> 
> 标签：oracle11g, out-of-memory

我通过此[链接](https://stackoverflow.com/questions/5253851/ora-01795-maximum-number-of-expressions-in-a-list-is-1000/5254474#5254474)从**ORA-01795 错误中**寻求解决方案，答案为。成功形成我在**sql developer**中触发的语句后，我发现这个问题就像 `d-live``sql`

 **```
ORA-04030: out of process memory when trying to allocate 2024 bytes (kxs-heap-c,kghsstk)
04030\. 00000 -  "out of process memory when trying to allocate %s bytes (%s,%s)"  
*Cause:    Operating system process private memory has been exhausted  
*Action: 
```

请帮我解决这个问题，无论如何我都应该处理并执行它。

**注意：**我正在处理的总记录是**5341**，`join statement`而不是`in statement`基于[链接](https://stackoverflow.com/questions/5253851/ora-01795-maximum-number-of-expressions-in-a-list-is-1000/5254474#5254474)解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T08:02:54.033

这个 ORA-04030 可能是由于专用（非共享服务器）环境中的 RAM 不足、PGA 太小以及没有将内核参数设置得足够大以允许足够的 RAM 造成的。ORA-04030 在运行导入时也很常见。**

# html - 黑莓操作系统 7 上的 @fontface

> ID：12780686
> 
> 赞同：0
> 
> 时间：2012-10-08T11:20:26.617
> 
> 标签：html, css, font-face

我正在尝试加载一种在任何地方都可以正常工作但在黑莓 OS 7 上无法正常工作的字体

```
@font-face {font-family: 'CCDoohickeyOpen';src: url('webfonts/244FAC_0_0.eot');
src:     url('webfonts/244FAC_0_0.eot?#iefix') 
format('embedded-opentype'),url('webfonts/244FAC_0_0.woff') f
ormat('woff'),url('webfonts/244FAC_0_0.ttf')
format('truetype'),url('webfonts/244fac_0_0-webfont.svg#CCDoohickeyOpen') 
format('svg');} 
```

该页面位于[http://lisp.li](http://lisp.li)我做错了什么？具有讽刺意味的是，来自其他网站的其他网络字体似乎在 bb 7 上运行良好。提前感谢大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:22:51.660

### BB 仅支持 SVG 文件

BB OS5、6 和 7 上的黑莓浏览器仅支持 SVG 字体文件（您可以使用 fontsquirrel 从其他格式转换）。

```
@font-face {
    font-family: 'CCDoohickeyOpen';
    src: url('webfonts/244fac_0_0-webfont.svg#CCDoohickeyOpen') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# testng - 如何运行与参数化测试一样多次的 TestNG 测试？

> ID：12780690
> 
> 赞同：0
> 
> 时间：2012-10-08T11:20:39.783
> 
> 标签：testng

我有一个带有两种方法的测试类，一种是参数化的，另一种不是。我希望第二个运行与参数化的一样多次。我知道也可以用“@DataProvider”注释第二种方法，但是有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:02:26.523

从参数化方法调用非参数化方法。

# java - 在 Eclipse RCP 中查找当前打开的对话框

> ID：12780691
> 
> 赞同：3
> 
> 时间：2012-10-08T11:20:44.587
> 
> 标签：java, dialog, swt, eclipse-rcp

我的问题是：我想找到当前打开的对话框的名称（显示在所有视图的顶部），最后重新加载它。任何人都可以指导我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:59:17.530

如果对话框有焦点，您可以`Shell`通过以下方式访问它：

```
Shell active = Display.getCurrent().getActiveShell();
String title = active.getText(); 
```

如果您使用的是 Eclipse RCP，则可以使用以下命令执行相同操作：

```
Shell active = PlatformUI.getWorkbench().getDisplay().getActiveShell();
String title = active.getText(); 
```

# java - 在java中使用会话登录模块有困难

> ID：12780695
> 
> 赞同：0
> 
> 时间：2012-10-08T11:21:02.277
> 
> 标签：java, session, jakarta-ee

**嗨.. stackoverflow 团队成员。**

我正在尝试使用 java 中的 HttpSession 来设置一些值，例如 userid，所以我可以使用该变量直到会话保持存在。

我正在使用 spring3.0 进行请求映射。我的登录检查代码如下

```
@RequestMapping(value = "/login/GetLoginCheck.action")
    public @ResponseBody
    Map<String, Object> loginCheck(HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        List<Employee> emplist = null;
        try {

            GlobalController.session = request.getSession();
            if (!GlobalController.session.isNew()) {
                this.setUsername(request.getParameter("username"));
                this.setPassword(request.getParameter("password"));

                emplist = loginservice.getEmployee(this.getUsername(),this.getPassword());

                if(emplist.size()>0)
                {
                    for(Employee employee: emplist)
                    {
                        this.setEmployeeid(employee.getId());

                        synchronized (GlobalController.session) {
                              GlobalController.session.setAttribute("userid", employee.getId());
                            }
                    }

                }else
                {
                    return getModelMapError("The username or password you entered is incorrect.");
                }

            }else{
                System.out.println("already session created");
                System.out.println("SESSION ID ::"+GlobalController.session.getId());
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        logingview = this.loginView(this.getUsername(),this.getPassword());
        return getMapUser(emplist,logingview);
    } 
```

我的 GlobalController 类代码如下

```
public class GlobalController implements HttpSessionListener{

    private static int totalActiveSessions = 0;
    public static HttpSession session = null;

    @Override
    public void sessionCreated(HttpSessionEvent event) {
        // TODO Auto-generated method stub
        synchronized (this) {
            totalActiveSessions++;
        }
        System.out.println("Session Created: " + event.getSession().getId());
        System.out.println("Total Sessions: " + totalActiveSessions);

    }
    @Override
    public void sessionDestroyed(HttpSessionEvent event) {
        // TODO Auto-generated method stub
        synchronized (this) {
            totalActiveSessions--;
        }
        System.out.println("Session Destroyed: " + event.getSession().getId());
        System.out.println("Total Sessions: " + totalActiveSessions);
    }

} 
```

**当用户登录时，我的“/login/GetLoginCheck.action”会执行，并且我将属性 empoyeeId: 2 设置为会话。**

**但是我在局域网中的另一台电脑上打开了相同的 url，并使用另一个名为 empoyeeId: 1 的用户登录。**

我遇到的问题是，当我看到日志或打开具有employeeId:1 的网格面板时，它会向我显示属于employeeId:2 的数据。

**sessionId 也会被新记录的用户会话覆盖。**

请给我一些建议，我可以尝试以适当的方式实施会话，因此我只获得属于预期员工的数据和会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:23:45.953

*   与类相关的静态变量，每个类有一个值，而不是每个实例。这就是为什么你有

> sessionId 也会被新记录的用户会话覆盖。

*   每个 servlet 都是单例的，因此当两个用户同时尝试登录时会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T04:52:52.030

非常感谢您的回复。我能够通过将会话作为类变量来解决我的问题。下面是**我尝试在 loginCheck 方法中使会话在我的应用程序中工作的代码。**

```
HttpSession session;
session = request.getSession();
session.setAttribute("employeeid", this.getEmployeeid()); 
```

**并检索使用以下代码完成的会话属性**

```
session = request.getSession();
System.out.println("EMPLOYEE ID ::"+session.getAttribute("employeeid")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:25:42.020

如果您使用的是spring3.0，为什么不出于同样的目的使用[spring security ？](http://static.springsource.org/spring-security/site/)

此外，如果您发现 spring 安全性太复杂，您可以随时使用[Apache shiro](http://shiro.apache.org/)

# hibernate - HQL 按多对多集合属性排序

> ID：12780701
> 
> 赞同：3
> 
> 时间：2012-10-08T11:21:30.693
> 
> 标签：hibernate, hql

我有一个名为 hibernate 的对象`User`，它与另一个名为`Post`. 这种关系被称为`likedPosts`（从`User`角度来看）。

```
<set name="likedPosts" lazy="true" table="Likes" where="Deleted=0">
        <cache usage="read-write"/>
        <key column="UserID"/>
        <many-to-many column="PostID" class="Post"/>
    </set> 
```

目前我有一个简单的 HQL 查询来返回喜欢的帖子列表，如下所示：

```
"select user.likedPosts from User user where user.id=:uid" 
```

我想要的是让这个列表按`Post`对象中的属性排序（特别是帖子 ID）。我（天真的）尝试这样做是这样的：

```
"select user.likedPosts from User user where user.id=:uid 
        order by user.likedPosts.id desc" 
```

但这不起作用 - 我收到一个异常，告诉我我不允许这样做。我该怎么做呢？谢谢！

错误的堆栈跟踪：

```
org.hibernate.QueryException: illegal attempt to dereference collection [user0_.ID.likedPosts] with element property reference [id] [select user.likedPosts from com.pashash.domain.User user where user.id=:uid order by user.likedPosts.id desc]
    at org.hibernate.hql.ast.tree.DotNode$1.buildIllegalCollectionDereferenceException(DotNode.java:46)
    at org.hibernate.hql.ast.tree.DotNode.checkLhsIsNotCollection(DotNode.java:513)
    at org.hibernate.hql.ast.tree.DotNode.resolve(DotNode.java:221)
    at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:94)
    at org.hibernate.hql.ast.tree.FromReferenceNode.resolve(FromReferenceNode.java:90)
    at org.hibernate.hql.ast.HqlSqlWalker.resolve(HqlSqlWalker.java:728)
    ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T12:22:28.547

你需要一个明确的加入来做到这一点：

```
select post from User user
inner join user.likedPosts post
where user.id = :userId
order by post.id desc 
```

# php - 表单的 PHP 类（显示、验证、处理）

> ID：12780706
> 
> 赞同：2
> 
> 时间：2012-10-08T11:21:41.080
> 
> 标签：php, forms, class

我想创建非常基本和简单的类 FORMs 这里是我的想法的结构

```
class forms {

function __construct() {

}

function displayForm() {       

}

function validateForm() {       

}

function processForm() {      

} 
```

它将只有文本、密码和隐藏字段以及 1 或 2 个按钮。没有复选框、单选框、下拉列表、日期……

需要有关 displayForm 部分的帮助，该部分应首先显示空表单，然后重新显示填充的有效字段和无效的空。

最后，我想使用以下内容创建新表单：

```
fields = array (
fieldname1=>(fielddescription , minsize, maxsize, type , defaultvalue)
fieldname2=>(fielddescription , minsize, maxsize, type , defaultvalue)
) 
```

或者

```
fields = array (
field1 = array (fieldname , fielddescription , minsize, maxsize, type , defaultvalue)
field2 = array (fieldname , fielddescription , minsize, maxsize, type , defaultvalue)
) 
```

或者

```
form1 new form ()
form1->addnewelement()
form1->addnewelement() 
```

或者

```
form4 new form ()
form4->addtextfield 
form4->addpassfield
form4->addhidden
form4->addsubmit 
```

我对您的所有想法持开放态度（特别是更合适的方式）。先感谢您。ps：没有javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:30:10.573

为什么不使用 Zend_Form 特性？您可以在不使用 Zend Framework 本身的情况下使用它。在此处查看更多信息[http://www.leftjoin.net/2011/03/using-zend_form-as-standalone-component/](http://www.leftjoin.net/2011/03/using-zend_form-as-standalone-component/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:26:52.777

如果您使用 POST 传递表单数据，您可以首先验证数据，然后在您创建的字段中显示有效数据。

# jquery - 可调整的 Div 高度和宽度

> ID：12780708
> 
> 赞同：3
> 
> 时间：2012-10-08T11:21:42.993
> 
> 标签：jquery, html, css

我有一个`div`并且我希望它是全屏的，当最小化时我需要滚动以进行`div`自我显示，并且身体概述将始终被隐藏，所以我需要`div`在高屏幕分辨率和低分辨率下制作这个全屏`div`非正文显示的滚动（`overflow-x`和`overflow-y`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:45:42.027

您所谈论的只是响应式网页设计。

![在此处输入图像描述](../Images/3ba00352c3fe7948ea236c8fea527d2e.png)

对于以下 HTML 部门：

```
<div id="container">
<!-- contents goes here -->
</div> 
```

使用媒体查询，您可以轻松做到这一点。首先将以下行添加到您的脑海中：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0"> 
```

对于高分辨率，将以下代码添加到 css：

```
@media screen and (max-width: 1280px) {
    #container {
        width: 1200px;
    }
} 
```

然后对于低分辨率将以下代码添加到 css：

```
@media screen and (max-width: 800px) {
    #container {
        width: 750px;
    }
} 
```

[响应式网页设计指南和教程](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

希望这会帮助你。

干杯！！！

# javascript - 如何拦截和停止雷鸟发送邮件事件？

> ID：12780711
> 
> 赞同：1
> 
> 时间：2012-10-08T11:21:48.927
> 
> 标签：javascript, email, xul, thunderbird, thunderbird-addon

> **可能重复：**
> [停止发送电子邮件](https://stackoverflow.com/questions/12504943/stop-email-from-sending)

我需要拦截 Thunderbird 中的发送电子邮件事件，并在满足某些条件时**阻止发送电子邮件。**我已经设法使用下面的代码拦截了事件，但它总是在处理程序之后发送消息，无论返回值如何，或者是否引发异常。

```
var composerContainer = function () {
  return {
    sendEventHandler : function (event) {
      //.....
      return false;
    }
  }
}();
window.addEventListener( "compose-send-message", composerContainer.sendEventHandler, true ); 
```

我可以访问和修改消息的内容，但我无法停止发送消息。

# jquery - 奇数类不适用于 jquery 加载的表

> ID：12780714
> 
> 赞同：0
> 
> 时间：2012-10-08T11:22:00.190
> 
> 标签：jquery

我正在尝试找到解决方案，但仍然找不到，我不得不问这个问题。`odd`或`even`类不能处理 AJAX 加载的内容

HTML：

```
<table id="products"></table> 
```

查询：

```
$(function () {$("#product-table tr:odd").addClass("odd") }); 
```

如果我手动将行添加到表中，一切正常。但是当我用 jquery 加载行时，`odd`类不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:26:45.647

您的`addClass`函数在现有行上调用。这没有为新添加的行定义规则。

如果您有能力限制这种交替行显示的兼容性，您应该使用 CSS 来执行此操作，因为每次修改文档时都会执行 CSS 规则：

```
#product-table tr:nth-child(odd) {
    // what you would have put in the odd class
} 
```

为了更加兼容，您还可以从您提供给 ajax 加载函数的回调中调用现有代码：

```
$('someSelector').load(someUrl, function(){
   $("#product-table tr:odd").addClass("odd") 
}); 
```

# c# - 如何为 Windows Phone 制作动态 ARC 圆圈？

> ID：12780716
> 
> 赞同：2
> 
> 时间：2012-10-08T11:22:05.740
> 
> 标签：c#, windows-phone-7, xaml, windows-8

我正在尝试为 和 制作/`XAML`易于`C#`定制和动态的 ARC 圆。`Windows Phone 7.5``Windows 8`

让我们想象一下：我基本上需要一个圆圈，然后我需要根据参数剪掉一个部分。所以假设 100% 是全圆，50% 是半圆等等。

我找到了一个[例子](http://demo.tutorialzine.com/2009/12/colorful-clock-jquery-css/demo.html)，我想做的完全一样。

有人可以帮我完成这项任务吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-28T12:17:31.667

尝试使用以下代码

```
<phone:PhoneApplicationPage.Resources>
    <Storyboard x:Name="StoryboardForArcAnimation">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Arc.EndAngle)" Storyboard.TargetName="arcRed" RepeatBehavior="Forever" AutoReverse="False">
            <SplineDoubleKeyFrame KeyTime="0:1:0" Value="360" />
        </DoubleAnimationUsingKeyFrames>

    </Storyboard>
</phone:PhoneApplicationPage.Resources>

 <local:Arc x:Name="arcRed"
                   ArcThickness="60"
                   ArcThicknessUnit="Pixel"
                   Fill="Red"
                   Height="300"
                   Width="300"
                   StartAngle="0"
                   EndAngle="10"
                   /> 
```

在后面的代码中使用 StoryboardForArcAnimation.Begin() 来启动动画。

您必须添加对 Microsoft.Expression.Drawing 的引用并添加命名空间 Microsoft.Expression.Drawing.Shapes（或 Windows Phone 8 的 Microsoft.Expression.Controls）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:04:31.877

这是一个如何绘制它的示例。这是一个圆的 1/4。

```
 <Path Opacity="0" Visibility="Visible" Fill="{StaticResource AwesomenessBrush}" StrokeThickness="0">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure StartPoint="17 20">
                            <ArcSegment Point="20 17" Size="3 3" SweepDirection="Clockwise"/>
                            <LineSegment Point="20 19"/>
                            <ArcSegment Point="19 20" Size="1 1"/>
                            <LineSegment Point="17 20"/>
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
            </Path> 
```

您可以从代码中更改参数。

# msdeploy - 如何使用 msdeploy 将包 (zip) 部署到 IIS 下的特定站点

> ID：12780720
> 
> 赞同：9
> 
> 时间：2012-10-08T11:22:28.657
> 
> 标签：msdeploy

要求：我有 zip 包，我需要将其部署到 IIS 下的特定站点（例如 dev.sitename.org）。

早些时候，我们在默认网站（在 IIS 下）下有站点，我们使用下面的命令来部署它。 `>>msdeploy -verb:sync -source:package="D:\package.zip" -dest:auto`

我为 -dest 尝试了不同的提供程序，但没有任何效果。

有没有人对此有想法。如果有请分享。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T11:47:31.707

尝试设置[`ProviderPath`参数](http://technet.microsoft.com/en-us/library/dd569084%28v=WS.10%29.aspx)：

```
msdeploy -verb:sync -source:package="d:\package.zip" ^
         -dest:auto -setParam:kind=ProviderPath,scope=iisApp,value=dev.sitename.org 
```

您的提供者可能是 a `contentPath`，而不是 a `iisApp`，具体取决于您创建它的方式。打开 zip 根目录中的清单文件以仔细检查。

# unit-testing - 使用 Shims Visual Studio 2012 对数据访问层进行单元测试

> ID：12780725
> 
> 赞同：1
> 
> 时间：2012-10-08T11:22:49.550
> 
> 标签：unit-testing, visual-studio-2012

我有访问数据库的老旧 ASP.Net 代码。有数据访问层形成sql命令并在数据库上执行。

对数据访问层进行单元测试的最佳方法是什么？我们应该真正连接到数据库并执行测试用例还是只使用假货？

使用 shim 是个好主意吗（在下面的帖子中描述）？

[http://msdn.microsoft.com/en-us/library/hh549176.aspx](http://msdn.microsoft.com/en-us/library/hh549176.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T00:12:39.830

假设您的旧 DLL 是托管的，您应该能够在 VS2012 中使用 Fakes 功能。假货真的是为了做到这一点。假货的典型用法如下：

1.  创建一个新的单元测试项目
2.  添加对此旧版 DLL 的引用（例如 Legacy.DLL）。确保在此单元测试项目中引用了所有相关的 DLL。
3.  右键单击解决方案 Reference 文件夹中的 Legacy.DLL，选择“Add Fakes Assembly”。这将为 Legacy.DLL 中定义的类型生成填充程序。
4.  还要添加对您的项目代码的引用（假设您要对您的产品方法进行单元测试）
5.  在 TestMethod1 中，您可以启动 Legacy.DLL 中定义的匀场方法并测试您的产品代码。

您还可以在[http://msdn.microsoft.com/en-us/library/hh708916.aspx上找到有用的信息](http://msdn.microsoft.com/en-us/library/hh708916.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:13:39.497

测试数据访问层的最佳方法是编写实际连接到数据库的集成测试。使用 fakes 不是一个好主意（无论是 Microsoft Fakes 还是任何其他测试隔离框架）。这样做会阻止您验证数据访问层中的查询逻辑，这就是您首先要对其进行测试的原因。

通过通过共享内存协议访问本地 SQL 数据库的精细集成测试，您可以轻松地每分钟执行数百个测试。但是，每个测试都必须负责创建自己的测试环境（即它访问的表中的测试记录）并清理它以允许可靠的测试执行。如果您的数据访问层没有显式管理事务，请首先使用 TransactionScope 在每次测试结束时自动回滚所有更改。这是最简单也是最好的选择，但是如果这不起作用（如果您的遗留代码在内部管理事务），请尝试在每个测试开始时删除先前测试留下的数据。或者，您可以通过始终为每个测试中的所有记录使用新的唯一主键来确保测试不会相互影响。

# intellij-idea - 如何在 Intellij IDEA 中对现有代码中的类成员进行排序？

> ID：12780727
> 
> 赞同：13
> 
> 时间：2012-10-08T11:22:50.503
> 
> 标签：intellij-idea

我以前在 Eclipse 工作过，但 IDEA 对我来说似乎更舒服。

我想按一些热键来订购所有来源成员。

有一个选项：项目设置 - 代码样式 - Java - 代码生成 - 成员顺序。但它不适用于现有代码。

如何按类别（如静态内部类、内部类、静态字段等）和每个类别中的字母顺序对它们进行排序？

有没有可能在 IDEA 中做到这一点？可能是，有一些插件？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T11:42:33.313

在 IDEA 11 中你可以使用[Rearranger](http://plugins.intellij.net/plugin/?id=173)插件，IDEA 12[将支持它开箱即用](http://blogs.jetbrains.com/idea/2012/10/arrange-your-code-automatically-with-intellij-idea-12/)。

# java - 将 XML 加载到 TreeMap

> ID：12780730
> 
> 赞同：1
> 
> 时间：2012-10-08T11:23:03.870
> 
> 标签：java, xml

我有一个只有一个父级和一个子级的 XML 配置文件。这将永远是这样，永远不会改变。它看起来像这样：

```
<parent>
   <child1>test</child1>
   <child2>123</child2>
</parent> 
```

我想使用 java DOM ( `org.w3c.dom.Document`) 将 XML 解析为 TreeMap，以便我可以将属性作为键/值访问。我猜我需要创建一个 for 循环来扫描 XML 并逐行添加键（父）和值（子）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:27:13.393

可以使用 遍历XML文档`JAXP APIs`，不需要提前知道结构或者节点名

```
InputStream is = new ByteArrayInputStream(xml.getBytes("UTF-8"));
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = dbf.newDocumentBuilder();
Document doc = docBuilder.parse(is);
NodeList nodeList = doc.getChildNodes(); 
```

你可以迭代文档并获取节点和属性

```
for (int i = 0; i < nodeList.getLength(); i++) {
            Node node = nodeList.item(i);
            NamedNodeMap attributes = node.getAttributes();

//... 
```

}

# events - 如何知道 VBA 运行时环境是停止还是运行？

> ID：12780736
> 
> 赞同：1
> 
> 时间：2012-10-08T11:23:36.187
> 
> 标签：events, vba, runtime

在我的 VBA 代码中，我得到一个运行时异常（比如除以零），在错误框中按“结束”后，VBA 运行时停止。

在此停止期间，我的全局对象被清除。我希望这些对象保留它们的值。因为，当我重新开始时，由于这些对象是`Nothing`，我遇到了问题。

VBA 中是否有任何事件会在我的运行时停止时触发？或者有什么方法可以知道 VBA 是否仍在运行或停止？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:26:32.267

在 VBA 中，未处理的异常会清除全局变量。因此，将错误处理程序添加到您的 VBA 过程中。

这是立即窗口中的会话记录，使用下面包含的 2 个过程。

```
MyGlobal = "foo"
Call DemoDivideByZero
? Chr(39) & MyGlobal & Chr(39)
''

MyGlobal = "foo"
Call DemoDivideByZero2
Error 11 (Division by zero) in procedure DemoDivideByZero2
? Chr(39) & MyGlobal & Chr(39)
'foo' 
```

没有错误处理程序的过程...

```
Public Sub DemoDivideByZero()
    Debug.Print 2 / 0
End Sub 
```

带有错误处理程序的版本...

```
Public Sub DemoDivideByZero2()

    Dim strMsg As String

On Error GoTo ErrorHandler

    Debug.Print 2 / 0

ExitHere:
    On Error GoTo 0
    Exit Sub

ErrorHandler:
    strMsg = "Error " & Err.Number & " (" & Err.Description _
        & ") in procedure DemoDivideByZero2"
    Debug.Print strMsg
    GoTo ExitHere
End Sub 
```

但是我不确定在您的过程中包含错误处理程序是否足以保留您的全局变量值。我避免使用全局变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:45:52.073

你有哪些全局对象？在启动时，您需要初始化它们。

# node.js - 从 mongodb 数据库中查找数据并将其显示在新的 html 页面中

> ID：12780737
> 
> 赞同：0
> 
> 时间：2012-10-08T11:23:39.227
> 
> 标签：node.js, mongodb

通过ajax请求，我得到了数据表单客户端并通过保存查询将其保存在mongodb数据库（mongoose）中。现在我想知道如何查找数据并显示新页面。

我已经从客户端获取数据并将其保存在数据库中。现在我希望当回调函数调用它从数据库中查找数据并使用 response.redirect 将其显示在新页面中。请指导我。

```
 $("#saveChanges5").live('click',function(){
            var sendingObj = {
                 regOperation:    $("#area_operation").val()
                ,regFieldAct:    $("#field_activity").val()
                ,regOther:       $("#other_details").val()
            };

            $.ajax({
                url:'/WorkDetails'
                ,type:'post'
                ,data: sendingObj
                ,success:function(){
                    alert('Successfully saved')
                },
                error: function(){
                    alert("Saving Failed")
                }
            })

        });

app.post("/WorkDetails",function(req ,res){
console.log(req.body);
saveWorkDetails(req.body.regOperation ,req.body.regFieldAct ,req.body.regOther  ,function(){
   res.send("");//here i want to add new code

}); 
```

});

```
function saveWorkDetails(area_operation ,field_activity ,other_details , callback){
console.log("save CALLED");
var receivedObj = new  WorkDetailInfo({
    area_operation:area_operation ,
    field_activity:field_activity ,
    other_details:other_details
});
console.log(receivedObj);
receivedObj.save(function(err){
    console.log("inside Save ");
    if(err){
        //res.send(err);
        console.log(err);
    }
    else{
        callback();
    }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:30:59.897

您可以使用[narwhal-mongodb](https://github.com/sergi/narwhal-mongodb) API 以下是示例用法：

```
var MongoDB = require("mongodb");
var db = new MongoDB.Mongo().getDB("mydb");

var colls = db.getCollectionNames();
colls.forEach(function(el) { print(el); });

var coll = db.getCollection("testCollection"); 
```

# django - 使用 DEBUG=False 无法访问管理面板中的模型

> ID：12780740
> 
> 赞同：7
> 
> 时间：2012-10-08T11:23:48.270
> 
> 标签：django, django-models, django-admin

我在访问我的 Django 应用程序中定义的模型时遇到了一些问题。当我在settings.py中有：

```
DEBUG = True
TEMPLATE_DEBUG = DEBUG 
```

然后一切正常。如果我设置 DEBUG = False，那么在管理面板中我会看到包含我的应用程序名称和注册模型的部分，但模型的名称不能正常点击（链接）。此外，我没有看到向我注册的模型添加/编辑对象的图标。Auth、Flatpages 等其他标准应用程序看起来还不错。当我设置 DEBUG = True 时，一切正常。有谁知道这个问题的原因是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T12:10:00.180

好的，我找到了问题的原因。这是由于在管理面板中从具有模型定义的文件中注册我的模型引起的。当我将所有注册移至一个外部文件 admin.py 时，一切正常。

# c# - INotifyCollectionChanged 的 NewItems - 不能使用 OfType 获取数据

> ID：12780741
> 
> 赞同：5
> 
> 时间：2012-10-08T11:23:49.093
> 
> 标签：c#, linq, inotifycollectionchanged

我试图从`CollectionChanged`实现的集合事件中获取一些自定义对象`INotifyCollectionChanged`。

```
MyControl_MyCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
  if(e.Action == NotifyCollectionChangedAction.Add)
  {
    lock(e.NewItems.SyncRoot)
    {
      var myItems = e.NewItems.OfType<MyType>();

      if(myItems.Any())
      {
        //do stuff
      }
    }
  }
} 
```

我面临的问题是`myItems`总是说“枚举没有结果”。

展开调试`e.NewItems.SyncRoot`显示以下内容：

```
e.NewItems.SyncRoot | {object[1]}
|-[0] | {System.Linq.Enumerable.WhereSelectListIterator<MyType, IMyInterface>}
| |-base ...
| |-Non-public members
| |-Results View | Expanding the Results View...
|   |-[0] | MyType 
```

很明显，数据在那里。检索此数据的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T11:40:30.917

这看起来像是创建`NotifyCollectionChangedEventArgs`对象的任何错误。

NotifyCollectionChangedEventArgs 有几个构造函数。这里有两个相关的：

*   `NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction, object)`
*   `NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction, IList)`

第一个描述了对单个项目的更改。第二个描述了项目列表的变化。

但是，`NotifyCollectionChangedEventArgs`构造函数已被称为`new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, enumerable)`. `IEnumerable<...>`没有实现`IList`，所以当第二个是应该使用的构造函数时，第一个构造函数被调用。

您是否可以控制引发的代码`NotifyCollectionChanged`？如果是这样，请`new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, enumerable.ToList())`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:33:43.563

> 很明显，数据在那里

很明显，您的已更改集合包含 type 的项目`System.Linq.Enumerable.WhereSelectListIterator<MyType, IMyInterface>`，而不是`MyType`类型。

# ios - UIImagePicker 旋转打破按钮

> ID：12780745
> 
> 赞同：0
> 
> 时间：2012-10-08T11:24:07.737
> 
> 标签：ios, uiimagepickercontroller, screen-rotation

我的应用程序设计为仅在横向工作。当我启动图像选择器（相机）时，如果我旋转设备，我会收到以下错误

2012-10-08 12:22:15.221 dezrez[6510:707] 收到内存警告。

2012-10-08 12:22:18.368 dezrez[6510:707] *** -[UITapGestureRecognizer 保留]：消息发送到已释放实例 0xd64e7c0

按钮（拍照、取消、切换相机）都停止工作，我无法返回我的应用程序。

有任何想法吗？非常感谢所有帮助。

干杯

# excel - 使用 xlswrite 时出错

> ID：12780746
> 
> 赞同：0
> 
> 时间：2012-10-08T11:24:08.563
> 
> 标签：excel, matlab

当我运行以下代码时

```
function feff

filename = 'UHL DEA.xlsx';
FI = xlsread(filename,'AU9:AU179');
FO = xlsread(filename,'AW9:AW179');
FEff = FI./FO;

%Write the efficiency back to the appropriate file in excel

xlswrite(filename,FEff,'BC9:BC179'); 
```

我得到错误

```
 Error using xlswrite (line 220)
 Excel returned: Error: Object returned error code: 0x800A03EC.

 Error in feff (line 15)
 xlswrite(filename,FEff,'BC9:BC179'); 
```

但是如果我按如下方式写入另一个文件，它工作正常

```
function feff

filename = 'UHL DEA.xlsx';
FI = xlsread(filename,'AU9:AU179');
FO = xlsread(filename,'AW9:AW179');
FEff = FI./FO;

%Write the efficiency back to the appropriate file in excel

xlswrite('DEA.xlsx',FEff,'BC9:BC179'); 
```

UHL DEA.xlsx 包含前面列中的其他数据，我需要在同一个文件中再次写入这些数据。指针将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:26:44.330

您是否使用向后兼容的 xls 文件？ [HRESULT：Worksheet.range 上的 0x800A03EC](https://stackoverflow.com/questions/7099770/hresult-0x800a03ec-on-worksheet-range)

检查接受的答案。

编辑：如果不是这样，如果您尝试在不使用 matlab 的情况下编辑整个范围会发生什么？

# powershell - 使用 PowerShell 为 SID 查询 AD

> ID：12780749
> 
> 赞同：1
> 
> 时间：2012-10-08T11:24:19.767
> 
> 标签：powershell, active-directory, guid

我需要编写一个 PowerShell 脚本，在 Active Directory 中查询某些对象的 SID/GUID，并在一个范围内找到最少可用的 SID/GUID。

我想采用一次查询 AD 并使用所有 SID 填充数组然后按升序对该数组进行排序的方法。然后我将用我的 SID 范围的下限初始化一个变量并与数组进行比较。

现在我有两个问题：

1.  如何在 AD 中查询所有对象并从那里填充 SID 数组？

2.  如何比较两个 SID 值（它们的格式非常复杂）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:41:10.060

为 Active Directory使用[Quest 模块](http://www.quest.com/powershell/activeroles-server.aspx)非常简单：

```
$sidarray = get-qaduser |
select samaccountname, sid | 
sort {[Regex]::Replace($_.sid, '\d+$',
{
     $args[0].Value.PadLeft(10, '0')
   })
 } 
```

你可以找到一些这样的匹配：

```
$sidmatching = $sidarray | ? { $_.sid -match '-1234$' } 
```

# delphi - 不兼容的类型 - TArray &字节

> ID：12780751
> 
> 赞同：3
> 
> 时间：2012-10-08T11:24:28.620
> 
> 标签：delphi, delphi-xe

我已声明`outputBuffer`为 a`Byte`并相应地使用它：

> TFile.WriteAllBytes(outputPath, outputBuffer);

当我编译我的程序时，Delphi 输出：

> [DCC 错误] StormLib.pas(56)：E2010 不兼容的类型：'System.TArray[System.Byte] 和 'Byte'

我是否为变量使用了错误/过时的数据类型？我必须做什么才能让我的程序编译？

提前谢谢你！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T11:31:53.243

改为使用[`TBytes`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.SysUtils.TBytes)。该[`WriteAllBytes`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.IOUtils.TFile.WriteAllBytes)方法采用`TBytes`定义为的方法`TArray<Byte>`，因此是一个字节数组，而不仅仅是单个`Byte`.

```
var
  OutputPath: string;
  OutputBuffer: TBytes;
begin
  // use SetLength to set the length of your OutputBuffer
  // byte array, fill it somehow and then call WriteAllBytes
  TFile.WriteAllBytes(OutputPath, OutputBuffer);
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:32:04.203

您的错误消息清楚地表明不兼容的类型不是 Byte 和 Byte，而是 TArray<Byte> 和 Byte。坦率地说 - 这是预期的。字节数组远不止单字节。

制作 TArray<Byte> 类型的变量并使用它来包含值。

# java - 在 android 中的标签小部件和片段上创建未读消息计数

> ID：12780752
> 
> 赞同：1
> 
> 时间：2012-10-08T11:24:28.770
> 
> 标签：java, android, tabs, android-fragments

我有一个应用程序，我在其中创建选项卡，如下所示。

![在此处输入图像描述](../Images/9fa4ccd588aa9330c87ca11340171077.png)

该应用程序是为 2.2 及以上版本创建的。我使用了 android 3.0+ 的片段和 2.x 版本的选项卡小部件。我使用了 android support.v4 jar 文件来实现 3.0 以下版本的兼容性。[在这里](http://developer.android.com/reference/android/support/v4/app/package-summary.html)检查

现在，我想显示未读消息的计数，如下图所示。

![在此处输入图像描述](../Images/e4eb11c20afa00c4fb0890f4a9f6a2f8.png)

我无法在选项卡小部件上创建未读计数。

**问题：** 如何在 2.x 版本的选项卡小部件上创建计数。如何为 3.x 及以上版本创建片段计数。是否可以使用文本视图创建相对布局并将其添加到选项卡小部件？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-10-23T03:55:26.357

你可能想看看这个：

[Android ViewBadger](https://github.com/jgilfelt/android-viewbadger)

# java - 如何在 JAVA mongo db 数组集合中使用 AND & OR 条件

> ID：12780760
> 
> 赞同：0
> 
> 时间：2012-10-08T11:24:54.433
> 
> 标签：java, mongodb, conditional-operator

我有以下格式的 Java Mongo 集合。

```
{
"field1": ["f1","f2"],
"field2": ["g1","g2"],        
    "Ans": a1
} 
{
    "field1": ["f4","f5"],
    "field2": ["g5","g6"],        
        "Ans": a2
} 
{
    "field1": ["f1","f6"],
    "field2": ["g2","g3"],        
        "Ans": a3
} 
```

我需要分别在 field1 和 field2 中执行“OR”条件
从我需要执行的结果和条件中选择行。
例如： f1,f5,g2,g3 是我得到的输入。
我需要使用 f1，f5 在字段 1 中执行或条件，因此我将获得
我需要在字段 2 中使用 g，g3 执行的所有三行或条件，因此我将
在执行时获得第 1 行和第 3 行以及我需要的条件只得到第 1 和第 3 行。
以下是我使用的代码

```
 DBObject query1 = new BasicDBObject("field1","f1");  
        DBObject query2 = new BasicDBObject("field1","f5");  
        BasicDBList condtionalOperator = new BasicDBList();
        condtionalOperator.add(query1);
        condtionalOperator.add(query2);
        DBObject query = new BasicDBObject("$or", condtionalOperator); 
```

字段 2 的类似 OR 查询和查询他们的结果
我知道它很长。有人知道比这更简单的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:09:17.617

（我使用 Mongo shell JavaScript 语法进行响应，因为它比 Java 稍微简洁一些。等效的 Java 应该很容易生成。）

```
db.collection.find({$and:[
    {field1:{$in:["f1","f5"]}},
    {field2:{$in:["g1","g3"]}}
]}); 
```

该`$in`运算符基本上执行 OR 运算，因此 的第一个操作数`$and`本质上等同于`{$or:[{field1:"f1"},{field1:"f5"}]}`.

# node.js - Redis 中的 SQL 或 Oracle 表结构

> ID：12780761
> 
> 赞同：1
> 
> 时间：2012-10-08T11:24:57.770
> 
> 标签：node.js, redis

我正在使用 node 并计划使用 redis 来存储数据 [数据将采用 SQL 或 oracle 表格式，包含许多字段，如 ID、名称、城市、标记等]。发现我们只能用三种数据结构[in list, set or sorted set]在redis中存储key和value。

我是否可以像表名 [Key name] 一样存储：详细信息和值，例如 ID：1，名称：john，国家：俄罗斯，ID：2，名称：玫瑰，国家：美国等。

redis中除了list、set和sorted set还有其他数据结构吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:11:04.193

你也有`Hash`数据结构......

数据库表用于存储实体。实体的松散定义是具有唯一主键的东西。在 Redis 中，实体通常使用 Hash 数据结构存储，其中数据库中的列成为 Hash 中的字段。主键存储在散列的键中。

数据库表还存储非实体，例如实体之间的关系。例如，一对多关系通常使用外键完成。在 Redis 中，可以在 Sets、Lists 或 SortedSets 中对此类关系进行建模。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:36:01.560

是的。请参阅文档。

[http://redis.io/topics/data-types](http://redis.io/topics/data-types)

# java - 如何为使用 java.util.regex 的函数编写 JUnit

> ID：12780762
> 
> 赞同：0
> 
> 时间：2012-10-08T11:24:57.037
> 
> 标签：java, junit

这是我编写的函数：

```
private String getPatternFromLogFile() {
    final File dir = new File(".");
    try {
        String fileContents = readFile(dir.getCanonicalPath()
                + "\\sshxcute.log");
        Pattern patternDefinition = Pattern.compile(
                ".*Start to run command(.*)Connection channel closed",
                Pattern.DOTALL);
        Matcher inputPattern = patternDefinition.matcher(fileContents);
        if (inputPattern.find()) {
            return inputPattern.group(1);
        }
    } catch (IOException e) {
        LOGGER.log(Level.DEBUG, e.getMessage());
    }
    return "";
} 
```

我正在尝试获取文件“sshxcute.log”的内容。 `readFile()`是这个类本身的一个函数。

我想编写一个测试用例，它进入`if`块内并返回我想要的任何内容，以便我可以断言它。

这是正确的方法吗？

有人可以帮我为此编写 JUnit。我是 JUnit 的新手，任何帮助都会很棒。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T11:29:24.230

您的方法正在做几件事，这使得可靠的单元测试变得困难。它正在读取文件，然后应用正则表达式。

我也许会把它分开。创建一个读取文件并创建行数组、流等的类。然后创建一个读取此数组、流等的组件。在该类中执行您的正则表达式工作。

这样，您可以轻松地针对*罐头*数据测试您的正则表达式组件，而不是依赖文件的内容（我注意到您上面的路径是硬编码的 - 这让生活变得更加困难）。因为您已将正则表达式组件与文件读取组件分开，您可以轻松捕获其输出（对于许多不同的场景 - 不仅仅是您的一个示例文件提供的场景）

# php - Doctrine - OneToOne 单向 vs OneToOne 双向

> ID：12780765
> 
> 赞同：20
> 
> 时间：2012-10-08T11:25:06.567
> 
> 标签：php, orm, doctrine, doctrine-orm, relational-database

我刚开始玩 Doctrine ORM 库，并且正在学习表之间的所有关联。

所以我坚持单向和双向关系的差异。

据我了解，单向关系仅在一侧具有主键，而那一侧是拥有侧，对吗？并且双向关系在两个表中都有主键，因此您可以从两侧建立关系，并在两侧设置约束。

现在，我正在阅读有关关系的 Doctrine 文档，并且您有： [单向](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-one-unidirectional)和[双向](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-one-bidirectional)关联。

但是它们生成相同的 SQL，以及具有相同主键和约束的相同表。所以我真的看不出这两者有什么区别。两个例子的一侧都有主键。

据我所知，真正的双向关系应该在两个表中都有指向另一个表的主键，对吗？并且在 Doctrine 文档中给出的示例并非如此。这两个例子给出了相同的结果并且是相同的。

所以我所做的是，假设我有用户和卡实体，并且希望关系是 OneToOne 双向的。

```
 /**
 * @Entity
 * @Table(name="users")
 */

class User
{
    /**
     * @Id
     * @GeneratedValue
     * @Column(type="bigint")
     */
    protected $id;

    /**
     * @OneToOne(targetEntity="Card", mappedBy="User")
     * @JoinColumn(name="card_id", referencedColumnName="id")
     */
    protected $card;

    /**
     * @Column(name="user_name", type="string")
     */
    protected $userName;

    /**
     * @Column(name="user_pass", type="string")
     */
    protected $userPass;
}

    /**
 * @Entity
 * @Table(name="cards")
 */

class Card
{
    /**
     * @Id
     * @GeneratedValue
     * @Column(type="bigint")
     */
    protected $id;

    /**
     * @OneToOne(targetEntity="User", inversedBy="Card")
     * @JoinColumn(name="user_id", referencedColumnName="id")
     */
    protected $user;

    /**
     * @Column(name="post_title", type="string")
     */
    protected $cardType;
} 
```

这里的区别是我在两个对象/实体中都写了@JoinColumn。在教义示例中只有一个。现在我会得到我认为的双向关系。如果我查看 EER 图，我可以看到一条线从用户指向卡，另一条从卡指向用户。

所以基本上我做对了吗？教义文档有错吗？:D 双向 OneToOne 关系如何在 EER 图中显示？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-16T20:05:12.137

唯一的区别在于 PHP 类接口，即是否存在指向所有者的`$customer`属性（例如，在提到的 Doctrine 示例中的属性）。换句话说，Doctrine 只需要知道它应该关注单个属性 ( `$shipping`) 还是两个属性 ( `$cart`and `$customer`)。没有其他区别。因此，SQL 代码是相同的（因为一个外键足以表示任何 1:N 关系）并且在 EER 图中也没有区别（因为在 EER 中您通常不会解决此类与 PHP 相关的实现细节）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-10T13:24:46.440

单向和双向与后台算法如何在数据库层创建这些连接无关。

他们谈论的只是如何使用这些连接。在单向关系中，您只能从一个站点访问目标。双向关系允许从两个（双方）调用连接。

所以在一个unidir。相对。model_a 可以到达 model_b，但 model_b 无法到达 model_a（无需额外工作）。如果您现在使用 bidir。rel 两个模型可以毫无问题地相互访问

在教义术语中，单向关系定义了一个 `$modelA->getModelB()`方法，但不是一个`$modelB->getModelA()`方法，而双向关系定义了两种方法（或访问器，但是你想调用它们）

在 uml 图中，它看起来像这样：

```
unidirectional
modelA --X------> modelB

bidirectional
modelA <--------> modelB 
```

# java - Apache Wicket BackButton 支持浏览器兼容性问题

> ID：12780766
> 
> 赞同：3
> 
> 时间：2012-10-08T11:25:06.310
> 
> 标签：java, browser, wicket

我是一个新手评估 wicket 开发框架，在尝试实现 wicket 的 Browser BackButton 支持功能时遇到了问题。

在阅读了关于同一主题的文档和论坛讨论后，我尝试将我的组件和所有内容放在一个表单中并使用 -

```
 form.setVersioned(true); 
```

用于启用浏览器后退按钮支持。

这适用于 Mozilla Firefox。但是，Chrome 和 Internet Explorer 的后退按钮无法提供相同的功能。这个问题引起了我对检票口进一步探索的关注。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T19:32:40.450

在大多数情况下，默认情况下可能与 serVersioned(true) 无关。最重要的是调用 modelChanging() 和 modelChanged() 方法来通知 Wikcet 有关更改。

见[https://cwiki.apache.org/WICKET/browser-back-forward.html](https://cwiki.apache.org/WICKET/browser-back-forward.html)

# c# - 在随机数组中找到四个元素，其总和等于给定目标

> ID：12780767
> 
> 赞同：-4
> 
> 时间：2012-10-08T11:25:10.530
> 
> 标签：c#, algorithm

说数组是 : `60,45,30,45,45,5,60,45,30,30,45,60,60,45,30,30,60,30,30`。我需要在数组中找到总和等于180的数字，我不需要多种可能性，只有一个正确的选择是好的。如您所见，数据集中的值可能会重复。但是整个操作应该非常有效，因为数据集可能会有所不同（更多样本）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:37:38.853

对数字进行排序。遍历小于总和的值（跳过重复项），依次从总和中减去每个值并递归求解减少的总和，从最后选择的值之后的下一个值开始。（这为您提供了递增顺序的数字。）您可以通过执行二进制搜索而不是线性搜索来加快最后（第四）级别（当您正在寻找精确值时）。

例如，排序后：

```
5,30,30,30,30,30,30,30,45,45,45,45,45,45,45,60,60,60,60,60
    try 5 and solve for 175:
        try 30 and solve for 145:
            try 30 and solve for 115: fail
            try 45 and solve for 100: fail 
            try 60 and solve for 85: fail
        try 45 and solve for 135:
            try 45 and solve for 95: fail
            try 60 and solve for 75: fail
        try 60 and solve for 115:
            try 60 and solve for 55: fail
    try 30 and solve for 150:
        try 30 and solve for 120:
            try 30 and solve for 90: fail
            try 45 and solve for 75: fail
            try 60 and solve for 60: success {30,30,60,60} 
```

（如果你想找到所有的解决方案，那么不要停止成功，你也会很快找到 {30,45,45,60}。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:38:15.910

这是[子集和问题](https://en.wikipedia.org/wiki/Subset_sum_problem)的一个更简单的变体。

事实上，您希望将 4 个元素加在一起，而*不是*任何大小的子集，这显然意味着它可以在多项式时间内完成。

从您的示例中可以*看出*，数组中的所有值都是非负数，这使得使用动态编程或显式分支定界（这可能与 DP 方法或多或少的工作相同）变得相当容易，不一定按照相同的顺序完成）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T11:30:18.337

```
var someEnumerable = new int[] { 60,45,30,45,45,5,60,45,30,30,45,60,60,45,30,30,60,30,30 };
var target = 200;
var solutions = from a1 in someenumerable
                from a2 in someenumerable
                from a3 in someenumerable
                from a4 in someenumerable
                let sum = a1 + a2 + a3 + a4
                where sum == target
                select new { a1, a2, a3, a4 };

var firstSolution = solutions.First();

Console.WriteLine("Possible solution: {0}, {1}, {2}, {3}", firstSolution.a1, firstSolution.a2, firstSolution.a3, firstSolution.a4); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:05:26.923

这可能有效，但解决方案可能包含四个以上的数字：

```
 private void button1_Click(object sender, EventArgs e)
    {
        List<int> indexes = new List<int>();
        Calculate(180, 0, 0, array, indexes);
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < indexes.Count; i++)
        {
            sb.Append(array[indexes[i]].ToString() + " [" + indexes[i].ToString() + "], ");
        }
        MessageBox.Show(sb.ToString());
    }

    bool Calculate(int goal, int sum, int index, int[] arr, List<int> indexes)
    {
        if (index > arr.Length - 1)
            return false;
        sum += arr[index];

        if (sum == goal)
        {
            indexes.Add(index);
            return true;
        }
        else if (sum > goal)
            return false;
        else
        {
            bool result = false;
            int count = 0;
            while (!(result = Calculate(goal, sum, index + ++count, arr, indexes)) && (index + count) < arr.Length) ;
            if (result)
            {
                indexes.Add(index);
                return true;
            }
            else
                return false;
        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:32:33.507

对我来说，它看起来像背包问题，有一个额外的条件（最大重量 ==（而不是 <=）你的幻数）。可以考虑一下。 [http://en.wikipedia.org/wiki/Knapsack_problem](http://en.wikipedia.org/wiki/Knapsack_problem)

# android - 在 Android 上显示嵌套列表

> ID：12780769
> 
> 赞同：0
> 
> 时间：2012-10-08T11:25:17.153
> 
> 标签：android, android-layout, android-listview

我需要显示 A 对象的列表（想想`List<A>`）。A具有以下结构：

```
class A {
    List<B> bList;
    List<C> cList;
} 
```

所有三个列表都可以是任意长度。`bList`并且`cList`应该以它们的整个长度显示在 As 列表的每一行中。每个列表都由 SQLite 游标支持。这是一种日历视图。下图说明了这个想法：

![在此处输入图像描述](../Images/b2b5673bd8c790b9571ae10f5974a58a.png)

现在，我想知道“以 Android 方式”实现这一目标的最佳方式是什么。我尝试了多种方法：

1.  A 的 ListView 和 B 和 C 的嵌套 ListView：不推荐，很难禁用 B 和 C 的滚动行为。
2.  A 的 ListView 与 B 和 C 的 LinearLayout 并以编程方式将子视图添加到适配器中的 LinearLayouts：我必须管理 B 和 C 的光标更新并自己调整行的高度，适配器中有很多视图管理代码不属于。
3.  组合嵌套线性布局的所有内容：与 2 相同的问题，需要处理的游标更多。

也许有一种不同的方式可以让我充分利用现有功能？

我已经看过 StackOverflow 上的类似问题。最重要的两个建议似乎是：

*   在多个活动/片段上传播数据：考虑过，不是一个选项，因为不友好（在这种情况下）。
*   使用ExpandableListView：似乎不适用于数据结构，Bs和Cs的列表应该从一开始就可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:36:30.967

要实现这种类型的视图，您需要实现两件事。

```
ListView listView;
IArrayAdapter iArrayAdapter; 
```

使用 xml 中提供的 id 初始化 listView。

```
Activity.this.runOnUiThread(new Runnable() {
        public void run() {
            iArrayAdapter = new IArrayAdapter(Activity.this,
                    R.layout.list_item, "list of items group it from Bean");
            listView.setAdapter(iArrayAdapter);
            iArrayAdapter.notifyDataSetChanged();
        }
    }); 
```

list_item 是另一种布局，它包含您需要在列表中显示的显示类型。

IArrayAdapter 是扩展 ArrayAdapter 的类

```
public class IArrayAdapter extends ArrayAdapter<IBean> {

private final Activity context;
private final ArrayList<IBean> iBeans;
private int resourceId;

public InboxArrayAdapter(Activity context, int resourceId,
        ArrayList<IBean> iBeans) {
    super(context, resourceId, inboxBeans);
    this.context = context;
    this.iBeans = iBeans;
    this.resourceId = resourceId;
}

/*
 * TO update View
 * 
 * @see android.widget.ArrayAdapter#getView(int, android.view.View,
 * android.view.ViewGroup)
 */
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View rowView = convertView;
    if (rowView == null) {
        LayoutInflater layoutInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        rowView = layoutInflater.inflate(resourceId, null);

    final IBean iBean = iBeans.get(position);
    final ImageView imageView = (ImageView) rowView
            .findViewById(R.id.message);
    final TextView rowTxt = (TextView) rowView
            .findViewById(R.id.senderName);
    final TextView rowTxt1 = (TextView) rowView
            .findViewById(R.id.senderMessage);
    final TextView rowTxt2 = (TextView) rowView
            .findViewById(R.id.senderTime);
    final CheckBox check = (CheckBox) rowView.findViewById(R.id.check);
    .....set text here.....
return rowView;
} 
```

}

imageView、rowtext 等是布局 list_item 的一部分

并且 IBean 是 java bean 类，在列表中包含您的 5 个 iTem。您不想要的任何项目都将其留空。

# paypal - Paypal 订单信息/数据采集

> ID：12780771
> 
> 赞同：0
> 
> 时间：2012-10-08T11:25:22.613
> 
> 标签：paypal

我管理一个慈善机构的网站，他们要求我将一些通过贝宝出售的产品放到一个网页上。

我可以放置一些 Paypal 立即购买按钮，但他们要求我获取客户信息，如姓名和地址，因此我们知道将产品发送到哪里。

我们可以从 Paypal 网站获得这些信息吗？

如果没有，您能否建议一种方法来引入一个简单的表格来捕获这些信息作为订购过程的一部分？

我不是程序员，只是网页设计师。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T07:09:41.527

这些信息也可以在您的贝宝帐户中找到，但每次交易完成时，贝宝都会向您发送电子邮件通知。因此，如果您不想为编程而苦恼，这是一个很好的解决方案。

以下是您应该查看的几个链接（第一个是关于客户体验的，第二个是关于管理交易的）：

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons#id089UG0HI0XW](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons#id089UG0HI0XW)

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons#id089UI0S40TS](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_buynow_buttons#id089UI0S40TS)

# visual-studio-2010 - 无法将 V C++ 应用程序作为服务运行。得到“服务没有及时响应启动或控制请求。”错误

> ID：12780772
> 
> 赞同：1
> 
> 时间：2012-10-08T11:25:22.980
> 
> 标签：visual-studio-2010, visual-c++, windows-services, windows-xp

我正在将 VC++ 应用程序从 VS 2003 迁移到 VS 2010。迁移后，必须通过服务调用的 exe 未运行。它在事件查看器中引发以下错误消息。

等待 MyService 服务连接的超时（30000 毫秒）。

MyService 服务因以下错误启动失败：服务未及时响应启动或控制请求。

我创建了服务以在命令提示符下使用 sc.exe 调用此 exe。服务创建表示成功。但是，当我启动服务时，它会在一两秒内引发上述错误并停止。

有人可以帮我吗？我忽略了什么吗？如果有人可以帮助我解决这个问题，那将有很大帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:09:39.687

您不能只使用“sc.exe”和常规 .exe 文件“创建服务”。服务运行与 Windows 服务管理器对话的特殊代码。

查看[http://msdn.microsoft.com/en-us/library/windows/desktop/ms685969(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685969(v=vs.85).aspx)和[http://www.codeproject.com/Articles/2676/How-to -Create-a-Windows-NT-Windows-2000-Service](http://www.codeproject.com/Articles/2676/How-to-Create-a-Windows-NT-Windows-2000-Service)了解详情。

# python - wxpython用线程关闭应用程序

> ID：12780773
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:25:24.727
> 
> 标签：python, multithreading, wxpython

大家好，我有一个小麻烦。我完成了我的程序，它检查是否存在关于 bitbucket 的新版本。一切都很好，除了当我关闭我的应用程序并且线程仍在运行时，可以在任务管理器中看到该程序。EVT_CLOSE 的代码如下：

```
 def on_close(self, event):
    if self._thread is not None and self._thread.isAlive():
        self._thread.interrupt.set()
    self.Destroy()
    event.Skip() 
```

线程像守护进程一样运行。

怎么了？

编辑：我明白了，我尝试在线程上执行 join() 方法。但我不工作。

```
 def on_close(self, event):
if self._thread is not None and self._thread.isAlive():
    self._thread.join()
    self._thread.interrupt.set()
self.Destroy()
event.Skip() 
```

和：

```
 def on_close(self, event):
if self._thread is not None and self._thread.isAlive():
    self._thread.join(10)
    self._thread.interrupt.set()
self.Destroy()
event.Skip() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:15:44.313

在您关闭事件处理程序时，您需要让它结束线程或等待线程结束。通常你通过使用线程的 join() 方法来做到这一点。如果线程正在打开另一个进程并且该进程需要很长时间，那么您可能需要尝试终止正在运行的进程以便线程可以返回。

# javascript - 如何在苹果中使用phonegap连接php文件？

> ID：12780774
> 
> 赞同：-2
> 
> 时间：2012-10-08T11:25:27.677
> 
> 标签：javascript, php, jquery-mobile, cordova

我想将 phonegap 苹果应用程序与 php 文件连接起来。我已经使用这个 javascript 函数来做到这一点

```
$.post(myphpfileUrl, { login: loginName, password:loginPassword },
           function(data) {
        //  alert(data);        
        }else{
            alert("connexion problems");

        }

           }); 
```

这是我的 phpfile

```
<?php exit("youppieee");?> 
```

但我的 iPhone 没有答案。我只用我的机器人回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:50:18.670

您的 php 代码错误：

```
<?php echo "youppieee";?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T14:01:05.513

Finnaly 我已经解决了我的问题。我被称为我的服务器的 IP 地址（123.45.67.89/myfolder/myphpFile），但问题在我调用服务器 domaineName（例如：mydomaineName/myfolder/myphpFile）的那一刻得到解决

# java - 为什么 Java 允许增加子类中受保护方法的可见性？

> ID：12780779
> 
> 赞同：20
> 
> 时间：2012-10-08T11:25:46.910
> 
> 标签：java, design-patterns

```
abstract class Base{
      protected abstract void a();
}

class Child extends Base{
      @Override
      public void a(){
          //why is this valid
      }
} 
```

为什么我们不能降低能见度，但可以增加它？

我还需要实现**模板模式**，其中可见的公共方法只能是基类。

例子：

```
abstract class Base{
      public void callA(){
      //do some important stuff
      a();
      }

      protected abstract void a();
}

class Child extends Base{
      @Override
      public void a(){
          //why is this valid
      }
} 
```

现在如果 java 允许增加可见性，那么有两种公开可见的方法？

我知道界面是一种解决方案，但还有其他出路吗？？？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-08T11:54:13.593

为什么不允许降低可见性已经在其他回复中解释过（它会破坏父类的合同）。

但是为什么允许增加方法的可见性呢？首先，它不会违反任何合同，因此没有理由不允许它。有时它会很方便，因为在子类中不保护方法是有意义的。

其次，不允许它可能会产生有时无法同时扩展类和实现接口的副作用：

```
interface Interface1 {
   public void method();
}

public class Parent {
   protected abstract void method();
}

public class Child extends Parent implements Interface1 {
   @Override
   public void method() {
   }
   //This would be impossible if the visibility of method() in class Parent could not be increased.
} 
```

关于你的第二个问题，你无能为力。您必须相信实现子类的人不会做任何破坏您的实现的事情。即使java不允许增加可见性，那仍然不能解决你的问题，因为可以创建一个具有不同名称的公共方法来调用抽象方法：

```
class Child extends Base{
      @Override
      protected void a(){

      }

      public void a2() {
           a(); //This would have the same problems that allowing to increase the visibility.
      }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T11:30:25.990

如果基类做出关于可见性的承诺，那么子类就不能违反该承诺并仍然满足 Liskov 替换原则。如果承诺被破坏，则在承诺方法暴露的任何情况下，您都不能使用子类。

子类 IS-A 基类。如果基类公开了一个方法，那么子类也必须公开一个方法。

Java 或 C++ 没有出路。我猜在 C# 中也是如此。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T11:32:21.287

> 为什么我们不能降低能见度，但可以增加它？

假设有可能降低能见度。然后看下面的代码：

```
class Super {
    public void method() {
        // ...
    }
}

class Sub extends Super {
    @Override
    protected void method() {
        // ...
    }
} 
```

假设您在另一个包中有另一个类，您在其中使用这些类：

```
Super a = new Sub();

// Should this be allowed or not?
a.method(); 
```

要检查是否允许方法调用，编译器会查看您调用它的变量的类型。变量的类型`a`是`Super`。但是实际`a`引用的对象是 a `Sub`，而方法是`protected`，所以你会说不应该允许从包外不相关的类调用方法。为了解决这种奇怪的情况，禁止使覆盖的方法不那么明显。

请注意，反过来（使方法更可见）不会导致同样的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T11:33:52.213

由于Java允许超类引用指向子类对象..所以，限制不应该从`compile-time`增加到`runtime`..

让我们通过一个例子来看看： -

```
public class B {
    public void meth() {

    }
}

class A extends B {
    private void meth() {  // Decrease visibility.

    }
} 
```

现在，您创建一个类对象`A`并为其分配类的引用`B`..让我们看看如何：-

```
B obj = new A();  // Perfectly valid.

obj.meth();  // Compiler only checks the reference class..
             // Since meth() method is public in class B, Compiler allows this..
             // But at runtime JVM - Crashes.. 
```

现在，由于`compiler`只检查**引用变量的类型，并检查该类****（B类）**中方法的可见性，而不检查obj引用的是**哪种对象**`reference`。所以，它不担心那..在运行时留给JVM来解决适当的方法..

但是**在运行时**，JVM实际上会尝试**调用`meth`**类的方法，`A`因为对象属于A类。但是，现在会发生什么...... **BooooOOMM ---> JVM崩溃**......因为`meth`方法是私有的`class A`......

这就是为什么不允许降低能见度的原因。

# android - Android：如何为已经存在的二进制（apk）文件添加新代码

> ID：12780783
> 
> 赞同：0
> 
> 时间：2012-10-08T11:26:04.087
> 
> 标签：android

我有一个应用程序二进制 (.apk) 文件，没有它的源代码，我想添加一个新代码，该代码将收集设备信息并使用验证服务器对其进行验证，然后启动主要活动。

如何将新代码添加到现有的二进制文件中。有什么限制？完成这项任务需要哪些不同的东西？

为本地应用程序寻找 Google Play 许可方法。

换句话说，如何为二进制可用但源代码不可用的私有应用程序进行许可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:34:27.597

您很可能需要重写应用程序。即使您能够反编译应用程序、添加更改并重新编译它（有时这是可能的），考虑到您将无法有效地维护应用程序，采用这种方法您确实是个傻瓜。

编辑——从技术上讲，你甚至可以通过这种方法来维护它，但许多事情的可能性比实际情况要大得多。

# java - 使用 aspose 在 XML 中设置数据

> ID：12780784
> 
> 赞同：0
> 
> 时间：2012-10-08T11:26:07.690
> 
> 标签：java, xml, aspose, aspose-cells

我正在尝试使用 aspose 生成 excel 表。我已经生成了 excel 表，我正在尝试向其中添加一些数据。我`Response`在 cell中添加了`A4`。我想添加`Date`at cell`B4` 和`Time`at cell `C4`。我无法添加`B4`和`C4`数据。

```
Worksheet workSheet = workerBook.getWorksheets().get(0);
style.setTextWrapped(true);
workSheetCell = workSheet.getCells().get("A1");
workSheet.getCells().merge(3, 0, headerRows, 1);
workSheet.getCells().merge(3, 1, headerRows, 1);
workSheet.getCells().merge(3, 2, headerRows, 1);
// workSheet.getCells().get("C4").putValue("Time");
workSheet.getCells().get("A4").putValue("Respondent");

workSheet.getCells().get("B4").putValue("Date");

workSheet.getCells().get("C4").putValue("Time"); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:57:06.980

**Cell.putValue()**有许多重载，您可以使用这些重载之一添加时间和日期值。

请尝试以下代码，它应该可以正常工作。它在单元格 B4 中添加日期，在单元格 C4 中添加时间。

我已经用最新版本对其进行了测试：Aspose.Cells for Java v7.3.2

如果您仍有疑问，请在 Aspose.Cells 论坛上发帖。

**爪哇**

```
Workbook workerBook = new Workbook();

Worksheet worksheet = workerBook.getWorksheets().get(0);

Cell cellB4 = worksheet.getCells().get("B4");

//Add date value without time part
Calendar c = Calendar.getInstance();
c.set(Calendar.HOUR, 0);
c.set(Calendar.MINUTE, 0);
c.set(Calendar.SECOND, 0);
c.set(Calendar.MILLISECOND, 0);
cellB4.putValue(c);

Style style = cellB4.getStyle();
style.setCustom("yyyy-mm-dd");
cellB4.setStyle(style);

Cell cellC4 = worksheet.getCells().get("C4");

//Add time value without date part
c = Calendar.getInstance();
c.set(1899, 11, 31);
cellC4.putValue(c);

style = cellC4.getStyle();
style.setCustom("hh:mm:ss");
cellC4.setStyle(style);

workerBook.save("output.xlsx", SaveFormat.XLSX); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:24:06.160

那应该更容易。检查下面的代码。

我现在还展示了一个显示代码输出的屏幕截图。

![输出截图](../Images/ea1517d4fcd8f44506c9d68e87c6488b.png)

如果这不是您想要的，请详细说明。

**爪哇**

```
Workbook workerBook = new Workbook();

Worksheet worksheet = workerBook.getWorksheets().get(0);

//Display word "Date" in cell B4
Cell cellB4 = worksheet.getCells().get("B4");
cellB4.putValue("Date");

//Display word "Time" in cell C4
Cell cellC4 = worksheet.getCells().get("C4");
cellC4.putValue("Time");

//Save the workbook in xlsx format
workerBook.save("output.xlsx", SaveFormat.XLSX); 
```

# mysql - 用所有向下钻取的孩子来计算父母

> ID：12780797
> 
> 赞同：1
> 
> 时间：2012-10-08T11:26:56.363
> 
> 标签：mysql

我有结构表

```
ID  full_name   Recommended_By  Direction
1   Name1            0             None
2   Name2            1             Left
3   Name3            1             Right
4   Name4            2             Left
5   Name5            3             Left
6   Name6            2             Right 
```

我需要知道他所有孩子示例 ID（1）的溺水线的父母人数是 5 3 左和 2 右

# android - 通过android webview自动登录网站的问题

> ID：12780800
> 
> 赞同：2
> 
> 时间：2012-10-08T11:27:03.727
> 
> 标签：android, android-webview

我的银行有一个我想自动登录的移动网站。这是网页[https://ib.absa.co.za/ib/AuthenticateW.do?icmpid=BAC00414](https://ib.absa.co.za/ib/AuthenticateW.do?icmpid=BAC00414)。

到目前为止，这是我的代码。

```
 browser = (WebView)findViewById(R.id.webView1);
    browser.getSettings().setJavaScriptEnabled(true);

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("AccessAccount", "my_account_nr"));
        nameValuePairs.add(new BasicNameValuePair("PIN", "my_pin"));

        try {
            browser.loadData(CustomHttpClient.executeHttpPost(BASE_URL, nameValuePairs), "text/html", "utf-8");
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

BASE_URL 是顶部的链接。我从[http://code.google.com/p/virtualwalks/source/browse/trunk/virtualwalks/project7/Android/CustomHttpClient.java?spec=svn177&r=177获得了 CustomHttpClient](http://code.google.com/p/virtualwalks/source/browse/trunk/virtualwalks/project7/Android/CustomHttpClient.java?spec=svn177&r=177)

以下是网页标题：

> 请求网址：https://ib.absa.co.za/ib/AuthenticateW.do?icmpid=BAC00414
> 
> 请求方法：GET
> 
> 状态码：200 OK
> 
> 请求标头view source
> 
> 接受：text/html,application/xhtml+xml,application/xml;q=0.9, */* ;q=0.8
> 
> 接受字符集：ISO-8859-1,utf-8;q=0.7,*;q=0.3
> 
> 接受编码：gzip、deflate、sdch
> 
> 接受语言：en-US,en;q=0.8,af;q=0.6
> 
> 连接：保持活动
> 
> 主持人：ib.absa.co.za
> 
> 参考：http://www.absa.mobi/
> 
> 用户代理：Mozilla/5.0 (Linux; U; Android 2.3.6; en-us; Nexus S Build/GRK39F) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1
> 
> 查询字符串参数查看 URL 编码
> 
> icmpid:BAC00414
> 
> 响应标头view source
> 
> 缓存控制：无缓存，必须重新验证
> 
> 连接：保活
> 
> 内容编码：gzip
> 
> 内容语言：en-US
> 
> 内容类型：文本/html；字符集=ISO-8859-1
> 
> 日期：格林威治标准时间 2012 年 10 月 10 日星期三 07:57:50
> 
> 过期时间：周日，1970 年 7 月 12 日 2:00:00 GMT
> 
> 保活：超时=10，最大值=20
> 
> 杂注：无缓存
> 
> 设置 Cookie:JSESSIONID=0000CTls0Onsd_DJkBrN0FLy9eq:11l21e8a2; 路径=/ib; 域=absa.co.za;安全
> 
> 传输编码：分块
> 
> 变化：接受编码，用户代理

和html代码：

```
<html> 
```

Absa 手机银行

```
<body text="#000000" bgcolor="#FFFFFF">
    <p align="left" style="text-align:left;" class="pgHeadTop"><img src="/ib/images/wap/menu/absa_98x27.gif" alt="Logo" border="0"> <p align="left" style="text-align:left;" class="pgHeadBottom">Logon </p>

        <form action="https://vs1.absa.co.za/ib/AuthenticateW.do;jsessionid=0000CTls0Onsd_DJkBrN0FLy9eq:11l21e8a2" method="post" autocomplete="OFF"><input type="hidden" name="_channelIdentifier_" value="W">

                <p align="left" style="text-align:left;">
                    <p align="left" style="text-align:left;" class="tooltip">Enter your access account number</p>
                    <input type="text" name="AccessAccount" value="" maxlength="16" size ="16" istyle="4">
                </p>

            <p align="left" style="text-align:left;">
                <p align="left" style="text-align:left;" class="tooltip">Enter your PIN</p>
                <input type="password" name="PIN" value="" maxlength="5" size ="5" istyle="4">
            </p>
            <p align="left" style="text-align:left;">
                <p align="left" style="text-align:left;" class="tooltip">Enter your user number</p>
                <input type="text" name="user" value="1" maxlength="4" size ="5" istyle="4">
            </p>
            <p align="left" style="text-align:left;">
                <p align="left" style="text-align:left;" class="heading">It is your responsibility to ensure the secrecy of your PIN number.</p>
            </p>
            <p align="left" style="text-align:left;">
                <input type="submit" name="button_processPIN" value="Next &gt;" /><input type="hidden" name="processPIN_params" value="controller=com.sirius.apps.ib.view.wap.user.AuthenticateCntrl&amp;state=processPIN"/><input type="hidden" name="processPIN_encoding" value="u"/><input type="hidden" name="cmd" value="button"/>
            </p>
            <input type="hidden" name="AUTH_RND" value="a2f7ea6e">
            <input type="hidden" name="JAVASCRIPT" value="Y">
            <input type="hidden" name="LOGON" value="1">
        </form>
        <p align="left" style="text-align:left;" class="pageFooter"><a href="https://ib.absa.co.za/ib/RegisterW.do;jsessionid=0000CTls0Onsd_DJkBrN0FLy9eq:11l21e8a2?_Uid_=1&amp;_channelIdentifier_=W&amp;_language_=en" style="color:#FFFFFF;">Register</a> | <a href="https://ib.absa.co.za/ib/ContactUsW.do;jsessionid=0000CTls0Onsd_DJkBrN0FLy9eq:11l21e8a2?_Uid_=1&amp;_channelIdentifier_=W&amp;_language_=en" style="color:#FFFFFF;">Contact</a> | </p><p align="right" style="text-align:right;" class="body"><img src="/ib/images/wap/menu/barclays_84x25.gif" alt="Barclays" border="0"></p>

</body> 
```

如果我运行程序，它只会加载登录页面。

只是希望有人能对此有所了解，以及是否可以这样做，或者我的代码是否有错误/缺少/愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:13:33.313

它们可能与用户代理匹配，并且您在使用此自定义 http 客户端时可能没有有效的用户代理。

将用户代理设置为您的 android 浏览器使用的相同，您应该能够加载页面。

一个可能的值是：

```
Mozilla/5.0 (Linux; U; Android 1.1; en-gb; dream) AppleWebKit/525.10+ (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2 – G1 Phone 
```

否则，以编程方式获取它：[Retrieve User-Agent programmatically](https://stackoverflow.com/questions/3626071/retrieve-user-agent-programatically)

# android - 内核配置 - Nexus 平台加入失败

> ID：12780801
> 
> 赞同：2
> 
> 时间：2012-10-08T11:27:09.423
> 
> 标签：android, linux-kernel

我正在为 ICS 做内核配置。我需要启用 Posix 消息队列，因为它在我们的一个应用程序中是必需的。但是启用此选项会导致错误。制作成功。但是无法加载图像。dmesg 是：-

不同意符号 module_layout 的版本。初始化：未跟踪的 pid 2038 已退出。

logcat :- mknod : '/dev/nexus_proxy' 失败 NEXUS_Platform_Join [CONSTRUCTOR] 失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T16:51:57.810

看起来你只重建了内核。
您需要构建任何内核模块（*.ko 文件）并将
它们更新到文件系统上。

这是有关错误的[**详细讨论。**](https://stackoverflow.com/questions/2720177/module-layout-version-incompatibility)**`disagrees about version of symbol`**

# ruby-on-rails - 使用 delay_job gem 执行控制器方法

> ID：12780806
> 
> 赞同：0
> 
> 时间：2012-10-08T11:27:31.997
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

我的控制器中有一个方法，我需要在延迟作业方法中执行：

这是我的`order controller action`：

```
class OrdersController < ApplicationController

 def create
  #code here
  order = Order.first
  Order.delay(queue: "order", priority: 1, run_at: 2.minutes.from_now).expire_order(order)
 end

 def template_expired_order(order)
  #code here
 end

end 
```

这是我的`order model:`

```
class Order
  include Mongoid::Document
  include Mongoid::Timestamps::Created
  .
  .
  .
  #delayed jobs method
  def self.expire_order(order)
   #code here
  end
end 
```

**我想在执行或触发或启动方法`template_expired_order(order)`时执行控制器方法。`self.expire_order(order)`**

我该怎么做？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:30:18.970

您不应该将与模型相关的代码放在控制器中，尤其是如果您想在后台作业中运行它。尚不清楚 template_expired_order 的作用，但我建议将其放在 Order 模型中并直接在传递到 expired_order 的订单上调用它。

```
class Order
  def expire_order(order)
    order.template_expired_order
  end

  def template_expired_order
    # code
  end
end 
```

# c# - 使用存储过程作为函数

> ID：12780808
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:27:33.977
> 
> 标签：c#, sql, stored-procedures

我需要将存储过程结果存储在临时表中。但是存储过程的结果可能是任何表中的任何列排序。

是否有一个通用表（未指定列），我们可以将任何表插入其中？我知道我可以使用函数，但可以使用存储过程吗？

这是代码：

```
begin transaction

create table temp_table as

exec my_store_proc 1,111

select * from temp_table

drop table temp_table

commit transaction 
```

在上面的代码中，`my_store_proc`结果是一个有 6 列的表（例如）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:57:50.417

你可以使用这样的方法。

```
declare @t table(ID int, Name nvarchar(max), AnotherId int)

insert @t
exec theStoredProc

-- then you can utilize the result in a join

select * from SomeTable inner join @t as t on SomeTable.ID =  t.ID.... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:29:26.617

最好只使用 tiwth 功能，因为使用 procecure 是不可能的。创建具有返回类型表的函数并使用它可以正常工作。

你可以这样做，但列顺序不受控制

```
--INSERT...EXECUTE procedure example
 INSERT @temptable EXECUTE proceudrename 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T13:07:10.677

试试这个

开始交易

创建表@tmp（您的字段在 my_store_proc 过程中定义）

插入@tmp exec my_store_proc 1,111

从@tmp 中选择 *

提交事务

# php - 后台进程

> ID：12780811
> 
> 赞同：0
> 
> 时间：2012-10-08T11:27:42.597
> 
> 标签：php, system, exec

我从来没有使用过系统命令，所以我需要一些帮助来运行一个 php 后台进程：

1.  我可以`exec()`在共享服务器环境中运行命令吗？
2.  是否可以不等待它在我运行它的文件中完成？
3.  我可以使用参数传递给这个文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:31:25.367

1.  这取决于服务器配置。
2.  也许如果你使用屏幕。
3.  您可以像从命令行运行命令一样使用参数。
    [http://php.net/manual/en/function.exec.php](http://php.net/manual/en/function.exec.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T11:30:16.753

1 尝试找出

2 使用`/dev/null`

3`exec('php -f '.ROOT_PATH.'/index.php '.$this->['param'].' '.$param.' '.$param.' "'.preg_replace('/"/', '\"', serialize($array))."\" > /dev/null &");`

# java - Hadoop mapreduce 中的奇怪输出

> ID：12780812
> 
> 赞同：2
> 
> 时间：2012-10-08T11:27:43.047
> 
> 标签：java, map, hadoop, reduce, out

这是来自输入文件的示例：

```
1,name1,name2 
2,name3,name4 
3,name5,name6 
```

这是我的地图方法：

```
public void map(LongWritable key, Text value, OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
{
    String line = value.toString();
    StringTokenizer tk = new StringTokenizer( line, ",");       
    String keyValue = tk.nextToken();
    String s1Value = tk.nextToken();
    String s2Value = tk.nextToken();
    String valueString = s1Value+","+s2Value;
    output.collect( new Text(keyValue), new Text(valueString) );
} 
```

这是我的减少功能：

```
public static class Reduce extends MapReduceBase implements Reducer<Text, Text, Text, Text> 
{
    public void reduce(Text key, Iterator<Text> values, 
        OutputCollector<Text, Text> output, Reporter reporter) throws IOException 
    {
        String item="";
        Text tmp= new Text();
        while ( values.hasNext() ) 
        {
            tmp = values.next();
        }
        item = tmp.toString();

        StringTokenizer tk = new StringTokenizer( item, ",");

        String s1="";
        String s2="";
        boolean entered = false;
        try
        {
            while ( tk.hasMoreTokens() && !entered )
            {   
                s1 = tk.nextToken();
                s2 = tk.nextToken();
                entered = true;
            }
        }
        catch (Exception e )
        {
            System.out.println("PROBLEM:"+item);
        }
        double result = compare(s1,s2);
        String result2 = s1+" & "+s2+"="+result;
        output.collect( key, new Text(result2) );
    }
} 
```

所以我希望输出是（例如）：

```
name1 & name2=1.0 
```

但我得到的是：

```
name1 & name2=1.0  &  =0.0 
```

看起来一直有两个空字符串进行比较！为什么总是有空字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:50:09.710

它应该关心“compare(s1,s2)”的代码；请粘贴比较功能的代码。

# android - 为什么 NFC 标签数据写入成功？带有标签丢失异常

> ID：12780813
> 
> 赞同：1
> 
> 时间：2012-10-08T11:27:44.873
> 
> 标签：android, nfc, rfid, iso-15693

下面的代码出现“标签丢失”异常。但是，尽管出现异常，数据仍能成功写入。为什么抛出异常，数据写入成功？

```
 nfc.connect();
   byte[] arrByt = new byte[7];
   arrByt[0] = 0x01; //Command Flag 0x02 works fine
   arrByt[1] = 0x21;
   arrByt[2] = 0x06;
   arrByt[3] = 0x00;
   arrByt[4] = 0x00;
   arrByt[5] = 0x00;
   arrByt[6] = 0x00;           
   byte[] response = nfc.transceive(arrByt); 
```

我的 NFC 芯片

```
Type V (ISO/IEC 15693 / Vicinity), Tag Type SL2 ICS2001 (ICODE SLI), Manufacturer NXP Semiconductors (Germany) 
```

[在这里谈过](https://stackoverflow.com/questions/12688235/android-nfcv-iso-15693-tag/12691852#comment17166584_12691852) 但没有结果:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:38:34.080

当 NfcV 标签返回不成功代码时，android 的 NFC 堆栈假定它是一个异常并抛出“标签丢失”。
为避免此异常，您可以使用命令 0x02，正确的字节数组变为：
arrByte = {0x02, 0x21, 0x06, 0x00, 0x00, 0x00, 0x00}; 其中0x02是标志命令，0x21是写单块命令，0x06是块号，remaing是4字节数据。希望这会有所帮助。

# jsp - 如何使用 JSP 和 servlet 将文件从本地客户端机器上传到 FTP？如何在 html 中提供 FTP 上文件的 url 地址以在浏览器中查看它们？

> ID：12780814
> 
> 赞同：0
> 
> 时间：2012-10-08T11:27:53.407
> 
> 标签：jsp, url, servlets, file-upload, ftp

我想开发一个使用 JSP 和 servlet 的文件上传实用程序。在这种情况下，用户可以上传任何文件，大小从几 MB 到几百 MB 不等。此实用程序包含在 jsp 文件中使用 html 设计的常规表单。当这个表单被提交时，在给定的本地客户端机器路径上的选定文件在被调用的 servlet 的帮助下被上传。

转折就在这里，我想将我的文件直接从客户端本地机器上传到 FTP 服务器。此 FTP 服务器可能位于不同的机器上，也可能位于我的 Web 服务器和数据库服务器所在的同一台机器上。

我在互联网上搜索了指导，但我找到了将文件从本地客户端机器上传到网络服务器的代码。或从网络服务器本地路径到 FTP 服务器。我发现这样的教程可以将文件从本地客户端机器直接上传到 FTP 服务器。我想请教专家是否有任何方法可以实现上述目标，即使用 jsp servlet 直接将文件从客户端机器上传到 FTP 服务器。

我需要一些或完整的参考代码。

我还有一个问题，用户将以超链接形式看到上传的文件名列表。我可以做这部分。当用户点击这些超链接时，他可以在不同的浏览器窗口中看到该文件。但扭曲的是显示的文件将来自上面的 FTP。所以问题是如何在上面的超链接中给出FTP上文件的url。因为要从 FTP 访问文件，我们需要提供其主机地址、用户名、密码和端口号。如何完成这个任务。

请朋友们指导我解决这些问题

感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:35:50.393

典型的浏览器可以进行 FTP 下载，但不能上传。因此，您需要在浏览器中运行代码，如 Java Applet、Flash 组件、Silverlight 控件或其他任何东西。

因此，HTTP 上传有一些优势，请参阅[HTTP 与 FTP 上传](https://stackoverflow.com/questions/1238761)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:39:01.623

你可以在你的服务器代码上做一个适配器。不要将文件保存到目录或数据库，而是将其上传到您的 ftp。这是一个示例：

[上传到 FTP 示例](http://www.hiteshagrawal.com/java/ftp-upload-in-java)

# android - 无法使用选择器让 startActivity() 每个应用只询问一次

> ID：12780820
> 
> 赞同：13
> 
> 时间：2012-10-08T11:28:27.820
> 
> 标签：android, android-intent

当您`startActivity()`使用选择器时，Android 会列出所有有权处理您的应用程序`Intent`以及将此分配设置为永久或一次性的选项（在 ICS`Always`和`Just once`操作按钮上，在 2.x 上是复选框）。但是对于此代码：

```
public class Redirector {
    public static void showActivityWithChooser( Context context, int chooserLabelTitleId, Intent intent ) {
      try {
        context.startActivity( Intent.createChooser( intent, 
                     context.getResources().getString( chooserLabelTitleId )) );
      } catch( Exception e ) {
        e.printStackTrace();
      }
    }

    public static void viewInExternalApplication( Context context, String url ) {
      Intent intent = new Intent(   Intent.ACTION_VIEW );
      intent.setData( Uri.parse( url ) );
      intent.addFlags( Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET );
      showActivityWithChooser( context, R.string.open_chooser_title, intent );
    }
} 
```

我看不到任何`Always | Just once`按钮，也无法使我的选择永久化。我忽略了什么使 Android 无法让用户选择持久化？

看图片：左边的对话框是我想看到的，但右边是我现在得到的（两个对话框中不同数量的应用程序无关）：

![在此处输入图像描述](../Images/5d8a344d915aa29369109d54215a3dc2.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-08T11:52:28.477

作为记录 - 这是（我的）错误的过度解释类型。我使用的选择器正是右侧图像中可以看到的。它一直出现，因为...我一直在调用它。我错误地认为选择器提供了`Always | Just once`功能，并且如果用户点击“始终”则不会显示（如果她/他使用了会显示`Just once`）。但这是错误的。选择器将**始终**显示，因为这是它的作用 - 让用户选择。

功能是不同的`Always | Just once`东西->它是`startActivity()`（`startActivityForResult()`等）的Android框架的一项功能，它会在需要时自动显示（当有多个应用程序，或者确切地说，`intent-filter`应用程序清单中声明的​​多个匹配项时，匹配一定`Intent`）。如果您只有一个（或者如果用户已经选择`Always`），它将不会显示。

因此，作为开发人员的您不需要以任何特殊方式关心或处理此案。为了解决这个问题，我只是将`viewInExternalApplication()`代码更改为调用`startActivity()`：

```
try {
  context.startActivity( intent );
} catch (.... ) 
```

让框架完成其余的工作。

# php - PHP：404 标头在 HTTPS 站点上不起作用 - 返回空白页面而不是默认的未找到页面

> ID：12780822
> 
> 赞同：0
> 
> 时间：2012-10-08T11:28:32.807
> 
> 标签：php, ssl, https, http-status-code-404

我有一个通配符证书，我们称之为 *.example.com，我已经在 Apache 中为 *.example.com 设置了一个虚拟主机（用于 HTTPS 和非 HTTPS 流量）。

一直在搞乱一些 404 响应头，但我似乎有问题，所以我做了一个简单的测试用例：

在 virtaul 主机中，我将所有流量重写为 index.php：

```
RewriteRule .* /index.php [QSA] 
```

在`index.php`我返回一个 404 标头：

```
header($_SERVER["SERVER_PROTOCOL"] . " 404 Not Found");
exit(); 
```

除了那个，我什么都不做，所以没有`ErrorDocument`设置或类似的。

服务器返回的标头转储（用户`file_get_contents("https://test.example.com");`和`print_r($http_response_header);`另一个 PHP 文件：

```
Array
(
    [0] => HTTP/1.0 404 Not Found
    [1] => Date: Mon, 08 Oct 2012 12:41:28 GMT
    [2] => Server: Apache/2.2.16 (Debian)
    [3] => X-Powered-By: PHP/5.3.3-7+squeeze14
    [4] => Vary: Accept-Encoding
    [5] => Content-Length: 57
    [6] => Connection: close
    [7] => Content-Type: text/html
) 
```

如果我随后在任何子域/任何路径上输入 HTTP 站点，浏览器将正确显示默认的未找到页面，但如果我使用 HTTPS，浏览器将改为显示空白页面（IE 除外，它会正确显示（？）找到的页面）。

`header("Status: 404 Not Found");`也不起作用。

这不可能吧？我在这里遗漏了什么——404 标头和通配符证书可能存在某种限制？

**应 Hakre 要求更新**

标头转储自`headers_list()`：

```
Array
(
    [0] => X-Powered-By: PHP/5.3.3-7+squeeze14
) 
```

似乎服务器完全忽略了添加我的 404 标头，无论使用以下任何一种编写标头的方式：

```
header($_SERVER["SERVER_PROTOCOL"] . " 404 Not Found");
header("HTTP/1.0 404 Not Found");
header("HTTP/1.1 404 Not Found"); 
```

其他标题如`header("Expires: Sat, 26 Jul 1997 05:00:00 GMT");`正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:32:17.940

这是错误的：

```
header($_SERVER["SERVER_PROTOCOL"] . " 404 Not Found"); 
```

即使您使用的是 HTTPS，您也应该返回：

```
header("HTTP/1.1 404 Not Found"); 
```

# asp.net - 我需要在 .net 2.0 中使用 AD 获取特定组的所有用户电子邮件

> ID：12780825
> 
> 赞同：1
> 
> 时间：2012-10-08T11:28:44.053
> 
> 标签：asp.net, active-directory

我知道 stackoverflow 中已经给出了很多方法，但就我而言，所有这些方法都需要很长时间。我发布了一个需要更少时间但实施起来仍然太长的方法。请帮助我，以减少执行时间。还要考虑到我使用的是 .net 2.0 框架。

```
 try
        {
            List<string> lstEmails = new List<string>();
            string filter1 = string.Format("(anr={0})", "groupname");
            DirectorySearcher searcher = new DirectorySearcher(entry);
            searcher.Filter = filter1;
            searcher.SearchScope = SearchScope.Subtree;
            searcher.PropertiesToLoad.Add("mail");
            IEnumerable res = (IEnumerable)searcher.FindOne().GetDirectoryEntry().Invoke("members");
            //IEnumerable<string> rest = (IEnumerable<string>)res;

            if (res != null)
            {
                try
                {
                    int index = 0;
                    foreach (IEnumerable resl in res)
                    {
                        DateTime start = DateTime.Now;
                        DirectoryEntry dr = new DirectoryEntry(resl);
                        string strEmail = null;
                        if (dr.Properties["mail"].Value != null)
                        {
                            strEmail = dr.Properties["mail"].Value.ToString();
                            Console.WriteLine(strEmail);
                            DateTime stop = DateTime.Now;
                            Console.WriteLine((stop - start).TotalMinutes.ToString());
                            index++;
                            Console.WriteLine(index.ToString());
                        }
                        if (!string.IsNullOrEmpty(strEmail))
                        {
                            // groupMemebers.Add("sam",strEmail);
                        }
                    }
                }
                catch { }
            }

        }
        catch { } 
```

这是你建议的方法达罗..

```
 DirectoryContext context = new DirectoryContext(DirectoryContextType.Domain, domain, "domainname" + strLDAPUserName, strLDAPPassword);
        DomainController controller = DomainController.FindOne(context);
        DirectoryEntry entry = new DirectoryEntry(string.Format("LDAP://{0}",controller.Domain), strLDAPUserName, strLDAPPassword, AuthenticationTypes.Secure);
List<string> userList = new List<string>();  
        DateTime StartTime = DateTime.Now;   
        using (DirectorySearcher ds = new DirectorySearcher(entry)) 
        {
            ds.PropertiesToLoad.Add("mail");  
            ds.PageSize = 10000;
            string DistingushiedName = "CN=" + groupName + ",OU=Users,dc=CompanyName,dc=com";
            ds.Filter = "(&(objectClass=user)(memberof:1.2.840.113556.1.4.1941:="+DistingushiedName+"))";   
            ds.SearchScope = SearchScope.Subtree; 
            try 
            {
                foreach (SearchResult user in ds.FindAll())   
                {
                    try  
                    {
                        userList.Add(user.Path);//.Properties["mail"][0].ToString()); 
                    }
                    catch (Exception E)    
                    {
                        throw new Exception(E.Message);
                    }
                }
            }
            catch(Exception E)    
            {
                throw new Exception(E.Message); 
            }
            DateTime EndTime = DateTime.Now;
            TimeSpan Dif = EndTime.Subtract(StartTime);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:49:45.697

这是您的解决方案：-

```
string[] email = new string[0];

DirectoryEntry entry = new DirectoryEntry("LDAP://OU=Users,dc=me,dc=com", username, password);
string groupName = "GroupName";//Group NAme

DirectorySearcher groupSearch = new DirectorySearcher(entry);
groupSearch.Filter = "(SAMAccountName=" + groupName + ")";
groupSearch.PropertiesToLoad.Add("member");
SearchResult groupResult = groupSearch.FindOne(); // getting the members who belongs to the concern groupname

if (groupResult != null)
 {
    email = new string[groupResult.Properties["member"].Count];  //creatign an array to store all the email address
    for (int iSearchLoop = 0; iSearchLoop < groupResult.Properties["member"].Count; iSearchLoop++)
      {
         string userName = groupResult.Properties["member"][iSearchLoop].ToString();
         int index = userName.IndexOf(',');
         userName = userName.Substring(0, index).Replace("CN=", "").ToString(); // the name of the user will be fetched.

         DirectorySearcher search = new DirectorySearcher(entry);
         search.Filter = "(name=" + userName + ")";
         search.PropertiesToLoad.Add("mail");
         SearchResult result = search.FindOne(); //finding the mail id
         if (result != null)
          {
            email[iSearchLoop] = result.Properties["mail"][0].ToString(); //assigning the mail id to an array....
          }
      }
} 
```

希望这可以帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T14:42:14.533

嘿，这是正确的方法...

```
 try
        {
            List<string> ReturnArray = new List<string>();
            DirectoryContext context = new DirectoryContext(DirectoryContextType.Domain, domainName, domainName + "\\" + UserName, Password);
            DomainController controller = DomainController.FindOne(context);
            string LDAPAddress = string.Format("LDAP://{0}", controller.Domain);
            DirectoryEntry deDirEntry = new DirectoryEntry(LDAPAddress, UserName, Password);
            deDirEntry.AuthenticationType = AuthenticationTypes.Secure;

            DirectorySearcher mySearcher = new DirectorySearcher(deDirEntry);
            mySearcher.PropertiesToLoad.Add("distinguishedName");
            string sFilter = String.Format("(&(objectcategory=group)(cn=" + GroupName + "))");

            mySearcher.Filter = sFilter;
            mySearcher.Sort.Direction = SortDirection.Ascending;
            mySearcher.Sort.PropertyName = "cn";
            SearchResult result;
            DirectoryEntry ResultEntry;
            result = mySearcher.FindOne();
            ResultEntry = result.GetDirectoryEntry();
            GroupName = ResultEntry.Properties["distinguishedName"].Value.ToString();
            mySearcher = new DirectorySearcher(deDirEntry);
            mySearcher.PropertiesToLoad.Add("cn");
            mySearcher.PropertiesToLoad.Add("mail");
            sFilter = String.Format("(&(objectClass=person)(memberOf={0}))", GroupName);
            mySearcher.Filter = sFilter;
            mySearcher.Sort.Direction = SortDirection.Ascending;
            mySearcher.Sort.PropertyName = "cn";
            SearchResultCollection results;
            results = mySearcher.FindAll();
            foreach (SearchResult resEnt in results)
            {
                ResultPropertyCollection propcoll = resEnt.Properties;
                foreach (string key in propcoll.PropertyNames)
                {
                    if (key == "mail")
                    {
                        foreach (object values in propcoll[key])
                        {
                            if (!String.IsNullOrEmpty(values.ToString()))
                            {
                                ReturnArray.Add(values.ToString());
                                Console.WriteLine(values.ToString());
                            }
                        }
                    }
                }
            }

            return ReturnArray;
        }
        catch
        {
            return null;
        } 
```

谢谢大家的宝贵建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:40:11.680

很简单（如果您的 AD 是 2003 R2 或更高版本）：

```
 List<string> userList = new List<string>();
        DateTime StartTime = DateTime.Now;
        using (DirectorySearcher ds = new DirectorySearcher(new DirectoryEntry ("GC://DC=YourDomain,DC=com")))
        {
            ds.PropertiesToLoad.Add("mail");
            ds.PageSize = 10000;
            ds.Filter = "(&(objectClass=user)(memberof:1.2.840.113556.1.4.1941:=YOUR_GROUP'S DN))";
            ds.SearchScope = SearchScope.Subtree;
            try
            {
                foreach (SearchResult user in ds.FindAll())
                {
                    try
                    {
                        userList.Add(user.Path);//.Properties["mail"][0].ToString());
                    }
                    catch (Exception E)
                    {
                        throw new Exception(E.Message);
                    }
                }
            }
            catch(Exception E) 
            {
                throw new Exception(E.Message);
            }
            DateTime EndTime = DateTime.Now;
            TimeSpan Dif = EndTime.Subtract(StartTime);

        } 
```

将 YOUR_GROUP'S DN 替换为您的组的专有名称...

`memberof:1.2.840.113556.1.4.1941:=`是“新”LDAP_MATCHING_RULE_IN_CHAIN 运算符，并检索所有组成员。[在此处](http://support.microsoft.com/kb/914828/en-us)查看您的 AD 是否已准备好并获取更多信息。

编辑：

我给了你一个答案，但解释可能会有所帮助。

一般来说，您应该避免 ANR 搜索，因为它们会扩展为大型通配符 OR 查询。仅当您不知道哪个属性包含您要搜索的名称时才使用它们。它们比显式 AND 搜索要慢得多**。**

其次，如果您拥有多个域，则应关闭推荐追踪，除非您想搜索所有域直到获得成功。在这种情况下，最好执行 GC:// 而不是 LDAP:// 搜索来查找您要查找的对象，而不是对该对象执行 LDAP 搜索。根据您要查找的内容，GC 查询可能就足够了

编辑2：

修改代码以提供更多错误信息并获取用户路径而不是 E-Mail。

# codeigniter - CodeIgniter SSL

> ID：12780826
> 
> 赞同：2
> 
> 时间：2012-10-08T11:28:49.337
> 
> 标签：codeigniter, ssl

我用 CodeIgniter 开发了一个应用程序，主要用于学习目的。

我目前正在解决我的应用程序中的安全问题，我读到的一件事是使用 SSL。

我试图弄清楚我必须做什么才能在我的应用程序中使用 SSL。由于我的用户数量很少，我考虑在我的所有网站上使用 SSL。

在 CI 中 SSL 的另一个问题中，我发现了这一点：

```
$config['base_url'] = "https://www.yoursite.com/"; 
```

这就是我必须配置才能使用 SSL 的全部内容吗？我必须在某个地方购买证书吗？我的服务器有任何先决条件吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:38:56.707

SSL 与您的服务器有关。不是你的服务器端脚本软件，即 php。

因此，您应该为您的服务器软件寻找 ssl。

现在，您有两个选择：

1.  如果您在本地 Intranet 中运行，则可以使用 xampp 之类的软件，该软件默认通过自签名 ssl 证书为 apache 提供 https 功能。

2.  如果您使用的是托管帐户，您应该获得一个签名的 ssl 证书。

当然，您指定的 codeigniter 中的设置必须设置为实际使用`https`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:33:08.593

是的，您将需要 SSL 证书。大多数当前的服务器都可以很好地处理这些，尽管您的服务器需要一个个人 IP 地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-05T05:33:25.397

从位置 application/config/config.php 打开配置文件并启用或设置挂钩为 true，如下所示：

```
$config['enable_hooks'] = TRUE;
Then create a new file named hooks.php inside the config folder (i.e. application/config/hooks.php) and add the following code in it:

$hook['post_controller_constructor'][] = array(
    'function' => 'redirect_ssl',
    'filename' => 'ssl.php',
    'filepath' => 'hooks'
);

**Now create a new directory named hooks inside the application folder (i.e. application/hooks) and then create a new file named ssl.php inside the hooks folder (i.e. application/hooks/ssl.php).
Add the following code in the ssl.php file:**

function redirect_ssl() {
    $CI =& get_instance();
    $class = $CI->router->fetch_class();
    $exclude =  array('client');  // add more controller name to exclude ssl.
    if(!in_array($class,$exclude)) {
        // redirecting to ssl.
        $CI->config->config['base_url'] = str_replace('http://', 'https://', $CI->config->config['base_url']);
        if ($_SERVER['SERVER_PORT'] != 443) redirect($CI->uri->uri_string());
    } else {
        // redirecting with no ssl.
        $CI->config->config['base_url'] = str_replace('https://', 'http://', $CI->config->config['base_url']);
        if ($_SERVER['SERVER_PORT'] == 443) redirect($CI->uri->uri_string());
    }
} 
```

# mysql - 限制mysql获取数组？

> ID：12780829
> 
> 赞同：0
> 
> 时间：2012-10-08T11:28:52.167
> 
> 标签：mysql

有谁知道我可以如何限制从 MySql 数组中获取的个人资料图片的数量，比如 6 个个人资料图片？

谢谢

代码：

```
 $newest_set = get_newest_profile() ;

    while ($newest = mysql_fetch_array($newest_set )){
        echo" 
        <div class=\"mod_newest_image\">
        <a href=\"profile.php?id={$newest['id']}\"><img width=95px src=\"data/photos/{$newest['id']}/_default.jpg\" /></a>
        <div>
        <strong> {$newest['display_name']}</strong>
        <br />
        </div>
        </div>";

    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:31:32.167

将 LIMIT 子句添加到您的 sql

```
ORDER BY `date_column` DESC LIMIT 6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:32:00.043

您可以对查询使用限制

```
 SELECT * FROM `your_table` LIMIT 0, 6 // takes the rows from the results 0 - 6 
```

或者你可以使用计数器

```
$fetch_counter = 0;
while ($newest = mysql_fetch_array($newest_set ) && $fetch_counter < 6){
        echo" 
        <div class=\"mod_newest_image\">
        <a href=\"profile.php?id={$newest['id']}\"><img width=95px src=\"data/photos/{$newest['id']}/_default.jpg\" /></a>
        <div>
        <strong> {$newest['display_name']}</strong>
        <br />
        </div>
        </div>";
        $fetch_counter++;
    } 
```

注意 fetch_counter 从 0 开始，所以如果它是 6，那么 fetch 已经运行了 7 次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:33:09.077

为您的 sql 查询设置限制。喜欢，

```
$sql=mysql_query("select fields from tablename where conditions limit 0,6"); 
```

# c# - 解密 web.config 中的密码值

> ID：12780838
> 
> 赞同：-2
> 
> 时间：2012-10-08T11:29:34.887
> 
> 标签：c#, asp.net

我在外部配置文件中有一个带有连接字符串的 asp.net 网站，如下所示：

外部文件如下所示：

```
<connectionStrings configProtectionProvider="DataProtectionConfigurationProvider">
  <EncryptedData>
    <CipherData>
      <CipherValue> some long string here</CipherValue>
    </CipherData>
  </EncryptedData>
</connectionStrings> 
```

我想解密它。请建议我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:32:11.207

鉴于您可以访问该文件的来源机器，请查看此[链接](http://msdn.microsoft.com/en-us/library/zhhddkxy%28v=vs.100%29.aspx)

# ios - 为什么有些 iOS 设备发送 OPTIONS 请求时 Origin: null？

> ID：12780839
> 
> 赞同：1
> 
> 时间：2012-10-08T11:29:37.933
> 
> 标签：ios, http, cors, http-options-method

在我正在开发的网站上，我们看到不少`OPTIONS`来自 iOS 设备的请求，这些请求看起来像[CORS preflight checks](https://developer.mozilla.org/en-US/docs/HTTP_access_control#Preflighted_requests)，但具有`Origin: null`. 有谁知道是什么原因导致此类请求被发送`Origin: null`而不是正确的来源？

我见过的表现出这种行为的用户代理是：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B206
Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3
Mozilla/5.0 (iPod; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B206
Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3
Mozilla/5.0 (iPod; CPU iPhone OS 5_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B176 Safari/7534.48.3
Mozilla/5.0 (iPhone; CPU iPhone OS 5_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A405 Safari/7534.48.3
Mozilla/5.0 (iPad; CPU OS 5_0_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9A405 Safari/7534.48.3 
```

在实践中，处理这些请求（只是拒绝它们）不是问题，但我很想知道是否有一些特定的情况导致了这种情况。我见过的唯一一种情况描述了`Origin`可能将标头设置为`null`的情况是来源是`file:///`URL，这似乎不太可能 - 在每种情况下，引荐来源网址看起来都像是网站的正常页面视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:12:56.070

这个[问题](https://stackoverflow.com/questions/9210015/jquery-ajax-stopped-working-with-ios-5-0-1)是相关的，但这篇[博](http://spin.atomicobject.com/2012/01/20/mobile-safari-on-ios-5-1-unexpectedly-making-cross-origin-resource-sharing-requests)文解释了问题和解决方案。

> 如果您在应用程序中看到了这种行为，您应该能够通过使用“Content-Disposition: inline”而不是“Content-Disposition: attachment”来修复它。

# javascript - jQuery getScript – 语法错误

> ID：12780844
> 
> 赞同：1
> 
> 时间：2012-10-08T11:29:55.467
> 
> 标签：javascript, jquery, ajax, jquery-mobile

`$.getScript()`我使用 jQuery 的方法动态加载一个 JavaScript 文件。FireFox 控制台总是告诉我第一行有一个“语法错误”。但是，脚本继续工作得很好。第一行不过是

```
function SomeFunc (param) { 
```

因为这是一堂课的开始。在文件的开头添加一个虚拟类，如下所示：

```
function Dummy () {
    return false;
} 
```

...它显示了第一行 ( `function Dummy () {`) 的语法错误。有谁知道这是什么原因造成的？

提前致谢！

# java - 在 Java 中将字体设置为 .txt 文件

> ID：12780845
> 
> 赞同：0
> 
> 时间：2012-10-08T11:29:56.130
> 
> 标签：java, printing

我在我的代码中创建了一个 .txt 文件。现在我想在编写 .txt 文件时将字体设置为字符串。如何在 .txt 文件中设置字体？当我可以通过 Java 代码打印该 .txt 文件时，它的字体格式不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T11:31:01.613

.txt 文件中没有字体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:31:28.857

文本文件没有“字体”。它们是纯文本。要存储字体，您需要格式化的文档类型，例如 RTF 或 HTML。

> ..当我可以通过java代码打印那个.txt文件时..

设置字体是在打印代码或呈现文本的文本组件中完成的。

# java - 我们如何在 Swing 中实现类似 Excel 的功能？

> ID：12780848
> 
> 赞同：2
> 
> 时间：2012-10-08T11:30:06.127
> 
> 标签：java, swing, graphics

我有这个要求，以便在我的 Swing 项目中提供类似 excel 的功能。为此，我将 JTable 与列标题和行标题一起使用。我也喜欢在面板上重绘特定的行和列。但是在使用特定的单元格自定义重新绘制每个 JTable 单元格行和列时，它包含很多痛苦。只是想知道这种要求。是否有任何其他特定组件可以与摆动集成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:43:27.833

Microsoft Excel 是一个不平凡的应用程序，因此我将专注于该程序的一个方面：它计算正则表达式并将结果显示在一个表格数组中。

假设`JTable`满足您对表格视图的需求，让您的`TableModel`表达式存储为 的实例`String`，并让您的实现`getValueAt()`返回计算表达式的结果。有几个[库](https://stackoverflow.com/q/7258538/230513)，例如[这个](https://stackoverflow.com/a/12304313/230513)库，是可用的。

或者，简单地[`open()`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)使用电子表格，利用用户首选的电子表格应用程序。

据我所知，没有通用库可以在 Java 中模拟 Excel。

# windows-phone-7 - WP7进程间通信

> ID：12780850
> 
> 赞同：1
> 
> 时间：2012-10-08T11:30:12.903
> 
> 标签：windows-phone-7, agent, inter-process-communicat

我正在 WP7 上使用背景音频播放器代理构建音乐播放器。我想启用 UI 部分和代理部分之间的通信。许多[指南](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/10/background-audio-in-windows-phone-7-5-part-2.aspx)建议使用隔离存储，但我认为这不是一个好方法

有什么方法可以在 Windows Phone 7中启用**进程间通信**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T17:49:02.963

在 Windows Phone 8 SDK 中，我们现在可以使用系统范围的 Mutex 对象。

前台应用程序和后台代理似乎在手机上作为单独的*进程运行。*所以即使你实例化同一个类，每个进程都有不同的*实例*。

到目前为止我所知道的最好的解决方案是让每个进程将“共享”数据结构映射到一个独立的存储文件，然后使用系统范围的互斥锁（名为 Mutex）来防止一个进程在另一个进程写入文件时读取文件. 如果一个进程始终是数据结构的编写者会更简单，因此它永远不必担心异步合并另一个进程所做的更改。如果每个进程必须是数据结构某些部分的写入者，通常情况下，请考虑将这些部分分成单独的数据结构和单独的独立存储文件，一个进程读取一个文件并写入另一个文件，另一个进程写入第一个文件并阅读第二个。（互斥体中的所有读取和写入。使用*相同的*两个文件和两个进程的互斥锁以避免死锁。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:31:02.413

试试这个：

phoneApplicationPage.State

# iphone - 如何在动态填充的 tableView 上设置行高？（钛工作室）

> ID：12780857
> 
> 赞同：1
> 
> 时间：2012-10-08T11:30:28.087
> 
> 标签：iphone, titanium

我是钛工作室的新手。需要动态设置行高，但是我无法在每一行中设置动态高度。下面是我的代码：

**textArray 包含 10 个文本段落。每个段落都有不同的高度。**

```
var myTable = Ti.UI.createTableView({height:360, width: 306, top: 58, backgroundColor: '#FFFFFF',borderColor: '#C8C8C8',borderWidth:2, zIndex: -1});
var myArray = [];

for(int i = 0; i < 10; i++)
{

    var row = Ti.UI.createTableViewRow({contentHeight: 'auto', width: 320,top:0});

    var my = Ti.UI.createView({ top:10,width:300,height:'auto' });

    var myText = Ti.UI.createlLabel({text:textArray[i],width:50,height:'auto',left:10,top:5,borderRadius:4});

    my.add(myText);

    row.add(my);
    myArray.push(row);

} 
```

如何动态设置行高。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:27:47.537

根据理解，您需要根据文本显示单元格高度

这里有一些很好的例子

1.  [Stackoverflow 上的类似帖子](https://stackoverflow.com/questions/7128215/ios-dynamic-height-with-a-custom-uitableviewcell)

2.  [一些博客上给出的例子](http://www.raddonline.com/blogs/geek-journal/iphone-sdk-resizing-a-uitableviewcell-to-hold-variable-amounts-of-text/)

希望这能解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T05:41:47.900

我得到了解决方案：

```
specify your table rowHeight as auto.

var myTable = Ti.UI.createTableView({height:400,rowHeight: 'auto', width: 312, top: 10,left:4, backgroundColor: '#FFFFFF',borderColor: '#C8C8C8',borderWidth:2, zIndex: -1});
var myArray=[];   

for(int i = 0; i < 10; i++)
{
    //create row in table.
    var row = Ti.UI.createTableViewRow({height: 'auto', width: 310,top:10, selectionStyle : Titanium.UI.iPhone.TableViewCellSelectionStyle.NONE});

    //textArray contains 10 elements. i am using this in each loop..
    var myText = Ti.UI.createlLabel({text:textArray[i],width:50,height:50,left:10,top:5,borderRadius:4});

    //add like this what ever you want...
    row.add(myText);

    myArray.push(row);

}

//store in table
myTable.data = myArray;

//disply table.
win.add(myTable); 
```

**如果 height:'auto' 属性不起作用，则使用 Ti.UI.SIZE**

我希望..有人会使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T12:29:01.877

将内容高度更改为您想要的表格高度外观

# xcode - Xcode 4.5 命令行工具 - xcode-select 问题

> ID：12780858
> 
> 赞同：17
> 
> 时间：2012-10-08T11:30:30.590
> 
> 标签：xcode, xcodebuild

在 OS X 10.8.2 上安装 Xcode CLT 4.5.1 后，我在安装需要编译的本机 ruby​​ gem 时遇到问题。

输出错误与运行 xcrun -find 相同：

> xcode-select：错误：没有选择 Xcode。使用 xcode-select -switch ，或
> 查看 xcode-select 手册页 (man xcode-select) 了解更多信息。

*xcode-select*应该指向哪个 CLT 位置，因为它不再位于 /Developer？

编辑：我没有安装 Xcode 应用程序，只有 CLT。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T17:53:07.340

新位置似乎是（确保以 root 身份运行）：

```
sudo xcode-select -switch /Library/Developer/ 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T06:12:54.443

由于您的 Xcode 工具安装在 /usr/bin 中，因此您应该

```
sudo xcode-select -switch / 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-12T17:06:02.790

安装了 XCode 4.5 并安装了命令行工具后，我不得不使用它来让 MacPorts 和其他类似的东西（如 Ruby Gems 或 Perl CPAN 模块安装）工作：

```
sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer/ 
```

我发现 /Library/Developer 不起作用。请注意，对我来说，Developer 文件夹不在 /Library 下，它位于 app bundle 文件内容文件夹下。

我不确定为什么会这样，但是搜索这个问题的人可能会来到这里并想知道通常可与 xcode-select 一起使用的其他命令行选项，因此这个答案，即使它不是 100% 适用于原始问题（在没有 XCode 的情况下安装了命令行工具）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T11:55:47.640

你*可能*想要：

```
xcode-select -switch /Applications/Xcode.app 
```

除非您有多个安装。如果您有一个安装（例如从 App Store），那可能就是该位置。如果您有多个安装，您可能知道您想要哪一个。

你也可以尝试从 Xcode 的`Preferences > Locations > Command Line Tools`弹出窗口中更新这个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-06T18:48:58.263

打开 XCode 并转到首选项。

验证“命令行工具”下是否有选项

一旦我指定了我的 Xcode 命令行工具版本，错误就消失了。![在此处输入图像描述](../Images/e19d5566ba8cb54366c7f1e8d4bde4f9.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-05T17:32:14.923

我从@jbowes 的`xcode-select -switch /Library/Developer/`回答中走得更远，但后来我打了这个：

```
xcrun: Error: failed to exec real xcrun. (No such file or directory) 
```

我遇到了这个线程（[OSX 10.8 xcrun (No such file or directory)](https://stackoverflow.com/questions/13041525/osx-10-8-xcrun-no-such-file-or-directory)），它引用了一个解决我的问题的要点：

[https://gist.github.com/thelibrarian/5520597](https://gist.github.com/thelibrarian/5520597)

这很糟糕，但它似乎是仅使用命令行工具（即不是完整的 XCode 安装）解决问题的唯一方法。

# oracle - 在 oracle 中从存储过程分配输出参数

> ID：12780864
> 
> 赞同：3
> 
> 时间：2012-10-08T11:31:15.867
> 
> 标签：oracle, stored-procedures

请帮我解决以下情况

我需要在另一个里面调用一个存储过程。内部 SP 将返回一个数值，我需要将其存储在局部变量中。

粗略的代码

```
AssignSpResult NUMBER; 
```

AssignSpResult = SPtobecalled(Param1,Param2, OutParam);

这个语法很可能是错误的，所以请帮助纠正它

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:19:19.583

这是一个可能的例子：

```
HR\XE> create or replace procedure Proc1(p_out out number)
  2    is
  3    begin
  4      p_out := 123;
  5*   end;
HR\XE> /

Procedure created.

HR\XE> create or replace procedure Proc2
  2    is
  3      l_val number;
  4    begin
  5      Proc1(l_val); 
  6      dbms_output.put_line('Here is a value returned by Proc1: ' || to_char(l_val));
  7    end;
  8  /

Procedure created.

HR\XE> set serveroutput on;
HR\XE> exec Proc2;

Here is a value returned by Proc1: 123                                            

PL/SQL procedure successfully completed 
```

根据您的需要，使用函数返回数据过程处理的结果可能更方便。这是一个例子：

```
HR\XE> create or replace function F1 return number
  2    is
  3      l_ret_value number;
  4    begin
  5      l_ret_value := 123;
  6      return l_ret_value;
  7    end;
HR\XE> /

Function created.

HR\XE> create or replace procedure Proc3
  2    is
  3      l_val number;
  4    begin
  5      l_val := F1;
  6      dbms_output.put_line('Value returned by the F1 function: ' || 
                              To_Char(l_val));
  7    -- Or
  8      dbms_output.put_line('Value returned by the F1 function: ' || To_Char(F1));
  9   end;
HR\XE> /

Procedure created.

HR\XE> set serveroutput on;
HR\XE> exec proc3;

Value returned by the F1 function: 123
Value returned by the F1 function: 123

PL/SQL procedure successfully completed.

HR\XE> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:43:52.773

存储过程不返回带有 IN、OUT 或 IN OUT 参数的值。所以可能你必须打电话：

```
SPtobecalled(Param1,Param2, AssignSpResult ); 
```

# sqlite - 导出 SQLite 表的内容并将其导入 php myAdmin 表中

> ID：12780866
> 
> 赞同：0
> 
> 时间：2012-10-08T11:31:26.673
> 
> 标签：sqlite, import, phpmyadmin, export-to-csv

我在 sqlite 中有一个包含数据的数据库表。现在我尝试导出该表并以`.csv`格式导入 phpmyadmin 数据库。但有一些问题`NOT NULL`。

Sqlite 端创建查询：

```
 CREATE TABLE StateDeathTax_V2 (Sequence Integer DEFAULT TEXT,Question,Alabama,Alaska,Arizona,Arkansas,California,Colorado,Connecticut,Delaware,"District of Columbia" TEXT DEFAULT NULL,Florida,Georgia,Hawaii,Idaho,Illinois,Indiana,Iowa,Kansas,Kentucky,Louisiana,Maine,Maryland,Massachusetts,Michigan,Minnesota,Mississippi,Missouri,Montana,Nebraska,Nevada,"New Hampshire" TEXT DEFAULT NULL,"New Jersey" TEXT DEFAULT NULL,"New Mexico" TEXT,"New York" TEXT DEFAULT NULL,"North Carolina" TEXT DEFAULT NULL,"North Dakota" TEXT DEFAULT NULL,Ohio,Oklahoma,Oregon,Pennsylvania,"Rhode Island" TEXT DEFAULT NULL,"South Carolina" TEXT,"South Dakota" TEXT DEFAULT NULL,Tennessee,Texas,Utah,Vermont,Virginia,Washington,"West Virginia" TEXT DEFAULT NULL,Wisconsin,Wyoming) 
```

错误 ：

```
SQL query:

CREATE TABLE IF NOT EXISTS `roster`.`TABLE 4` (`Sequence` int(1), `Question` varchar(56), `Alabama` varchar(66), `Alaska` varchar(68), `Arizona` varchar(196), `Arkansas` varchar(114), `California` varchar(78), `Colorado` varchar(83), `Connecticut` varchar(463), `Delaware` varchar(295), `District of Columbia` varchar(392), `Florida` varchar(92), `Georgia` varchar(66), `Hawaii` varchar(274), `Idaho` varchar(107), `Illinois` varchar(626), `Indiana` varchar(253), `Iowa` varchar(337), `Kansas` varchar(153), `Kentucky` varchar(216), `Louisiana` varchar(96), `Maine` varchar(1029), `Maryland` varchar(358), `Massachusetts` varchar(867), `Michigan` varchar(76), `Minnesota` varchar(470), `Mississippi` varchar(64), `Missouri` varchar(77), `Montana` varchar(79), `Nebraska` varchar(151), `Nevada` varchar(79), `New Hampshire` varchar(69), `New Jersey` varchar(775), `New Mexico` varchar(17), `New York` varchar(747), `North Carolina` varchar(73), `North Dakota` varchar(1366), `Ohio` varchar(509), `Okla[...]

MySQL said: Documentation
#1060 - Duplicate column name 'NULL' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-12T23:36:56.010

1.  确认您在 sqlite 中创建的表有数据并且看起来不错。
2.  在 sqlite 中，执行以下操作：

    `sqlite> .header on sqlite> .mode csv sqlite> .output data.csv sqlite> select * from StateDeathTax_V2 ; sqlite> .quit`

3.  通过检查文件确认数据已正确导出`data.csv`

4.  导入，见答案：[https ://stackoverflow.com/questions/9734486/importing-a-csv-into-phpmyadmin](https://stackoverflow.com/questions/9734486/importing-a-csv-into-phpmyadmin "导入-a-csv-into-phpmyadmin")

# javascript - 谷歌图表不显示数据

> ID：12780869
> 
> 赞同：2
> 
> 时间：2012-10-08T11:31:29.670
> 
> 标签：javascript, titanium, google-visualization, titanium-mobile

我正在使用 Titanium Studio 制作应用程序，并尝试使用 webView 和 Google Charts 来可视化一些数据。数据位于二维数组中，如下所示：

```
[["Tendency","Number of Answers"],["Item one", 2],["Item two", 5]] 
```

这是我用来传递数据的代码：

```
function Graph(data){
var chart = Ti.UI.createWebView({
    url: "/results.html",
    width: Ti.UI.SIZE,
    height: "auto",
    top: 110
});

for (var i=0, l=data.length; i<l; i++){
    if (data[i] instanceof Array) data[i] = data[i].join(";");
}
var syndata = data.join("@");

chart.addEventListener('beforeload',function(e){
    chart.evalJS("var syndata ='"+syndata+"';");
});

this.chart = chart;

return;
};

module.exports = Graph; 
```

我尝试传递不同类型的数据，发现它只适用于字符串，所以我将数组转换为“Tendecy;Number of answers@Item1;2@....”的字符串，在results.html中，我转换再次将其写入数组，并将其读入图表：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
var dt = syndata.split("@");
for(var i = 0, l = dt.length; i<l; i++) dt[i] = dt[i].split(";");

  google.load("visualization", "1", {packages:["corechart"]});
  function drawChart(d) {

    var data = google.visualization.arrayToDataTable(d);

    var options = {
      title: 'Overview',
      chartArea:{left:5,top:5,width:"100%",height:"100%"}
    };

    var chart = new google.visualization.PieChart(document.getElementById('chart'));
    chart.draw(data, options);
  }

  google.setOnLoadCallback(function(){ drawChart(dt) });
</script> 
```

但是，我只得到一个灰色图表，其中一项显示“其他”。当我将数组直接粘贴到文件中并从中引用时，它工作正常......我尝试直接从 results.html 输出带有 Ti.API.info 的数组以查看是否有错误，但一切似乎都很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:29:43.803

[http://blog.clearlyinnovative.com/post/4044172191/titanium-appcelerator-quickie-google-charts-and](http://blog.clearlyinnovative.com/post/4044172191/titanium-appcelerator-quickie-google-charts-and)

# portlet - ibm portlet 8.0 (JSR 286) 设备检测

> ID：12780874
> 
> 赞同：1
> 
> 时间：2012-10-08T11:31:53.523
> 
> 标签：portlet, jsr286

我一直在研究 IBM 门户 8.0 和 JSR 286。我的要求是检测请求是来自 PC 浏览器、移动设备还是平板电脑。我没有使用 Web 体验工厂。它只是基本的 portlet 项目。

请有人建议是否有任何方法（任何帮助程序类或任何其他机制）用于 IBM Portlet 8（JSR286）中的设备检测。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:49:40.120

您可以在 portlet 的 jsp 中使用 jQuery 来检测[device 的类型](http://www.jquery4u.com/mobile/detect-mobile-devices-jquery/#.UHLJdpjMhMc)。[否则， detectmobilebrowsers.com](http://detectmobilebrowsers.com/)上还有其他可用选项

# wcf - 在两个请求之间存储数据的最佳方式

> ID：12780875
> 
> 赞同：1
> 
> 时间：2012-10-08T11:31:53.680
> 
> 标签：wcf

我需要一点理论建议。这是我的情况：我有一个搜索系统，它返回找到的项目列表。但是用户只能在一个页面上显示特定数量的项目，所以当他的**第一个请求**发送到我的 WCF 服务时，它会获取整个列表，然后测试列表是否长于我的用户的项目数量允许获取，如果列表不再长，则没有问题，我的服务会返回整个列表，但如果是，则有问题。我需要让用户选择他想要显示的页面，所以我让 javascript 知道用户应该选择页面并显示“页码对话框”，然后用户发送**第二个请求**带页码。并基于此请求，Web 服务选择相关项目并将其发送回用户。所以我需要做的是在**第一个**请求和**第二个**请求之间将整个列表存储在服务器上，我将不胜感激任何存储它的方法。我正在考虑会话，但我不知道是否可以仅将超时设置为特定会话（例如`Session["list"]`），因为该列表仅使用一次并且可以包含数千个项目，所以我不想保留它在服务器上要长。

PS。我不能使用标准分页，场景必须与上面描述的完全相同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:35:20.960

这听起来像是 memcached 的经典用例。它是一个基于网络的键值存储，用于存储临时值。与内存状态不同，它可用于在服务器之间共享临时缓存值（假设您有多个节点），并且它是跨请求保存状态的好方法（避免使用 cookie 导致的延迟，这是在每个 http 请求上传输到服务器/从服务器传输）。

基本方法是为每个请求创建一个唯一 ID，并将其与该用户请求的特定（一组）memcached 键相关联。然后，您将此唯一 ID 保存在 cookie（或类似机制）中。

但是，请注意，内存是易失性的，因此随时可能丢失。在实践中，这种情况并不常见，memcached 算法使用的是 LRU 队列。更多详情[http://code.google.com/p/memcached/wiki/NewOverview](http://code.google.com/p/memcached/wiki/NewOverview)

[http://memcached.org/](http://memcached.org/)

> Memcached 是一种内存键值存储，用于存储来自数据库调用、API 调用或页面渲染结果的任意数据（字符串、对象）的小块。

我不是 .net 程序员，但似乎有一些实现：

[http://code.google.com/p/memcached/wiki/Clients](http://code.google.com/p/memcached/wiki/Clients)

> .Net memcached 客户端
> 
> [https://sourceforge.net/projects/memcacheddotnet](https://sourceforge.net/projects/memcacheddotnet) .Net 2.0 memcached 客户端
> 
> [http://www.codeplex.com/EnyimMemcached](http://www.codeplex.com/EnyimMemcached)客户端在 .NET 2.0 中开发，牢记性能和可扩展性。（支持一致性哈希。）[http://www.codeplex.com/memcachedproviders](http://www.codeplex.com/memcachedproviders) BeIT Memcached 客户端（优化的 C# 2.0）
> 
> [http://code.google.com/p/beitmemcached](http://code.google.com/p/beitmemcached) jehiah
> 
> [http://jehiah.cz/projects/memcached-win32](http://jehiah.cz/projects/memcached-win32)

# sharepoint - Sharepoint 2010 中的跨域访问

> ID：12780886
> 
> 赞同：0
> 
> 时间：2012-10-08T11:32:17.703
> 
> 标签：sharepoint, cross-domain

有两个域`A`和`B`（单独的林）。`Sharepoint`站点部署在`A`域中。域中的用户是否可以`B`访问该站点？

据我了解`Sharepoint`是基于`Active Directory`帐户。是否可以在两个域中都有用户，或者是否有其他选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:17:00.303

Johny 的回答中未提及的另一个选项是设置您的 Sharepoint 应用程序以通过 ADFS2 进行身份验证。

此选项易于设置，但同时非常灵活。您告诉您的共享点信任一个特定的 ADFS，然后，您可以将您的 ADFS 与不同域上的其他 ADFS 联合起来，或者破坏现有的联合关系。配置一次后，您不会触摸您的 Sharepoint。

关系图将是：

Sharepoint ->（信任）-> 域 A 上的 ADFS2 ->（可能信任）-> 域 B、C、其他上的 ADFS

从技术上讲，如果 ADFS2 与其他 ADFS 联合，您的用户可以选择使用 A、B 或其他身份提供者登录。默认的 ADFS 页面仅显示身份提供者的组合，但您可以自定义页面并显示任何内容，例如友好图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:06:57.243

是的，您可以创建跨域访问，但它需要对服务器而不是代码进行一些工作。

**1.跨域访问：**
您必须在域之间创建信任。此外，我相信您必须设置 DNS，以便用户（域 B）可以与域 A 中的 DNS 进行“对话”。信任意味着域 B 中的用户可以在域 A 中进行身份验证，并找到共享点站点。还要记住，如果域之间有防火墙，则需要考虑到这一点。在这里您可以阅读有关设置的信息，但我建议您在实施此解决方案之前进行更多研究：[http ://www.quantumofgeek.com/2010/09/configure-sharepoint-to-authenticate-cross-forest-ad-users/](http://www.quantumofgeek.com/2010/09/configure-sharepoint-to-authenticate-cross-forest-ad-users/)

**2.两个域中**
的用户如果您在两个域中都有用户（重复的用户名/密码），由于域名的原因，登录仍然会不同。如果用户更改他们的密码，它将不会反映在其他域中。

# ember.js - Ember.js 混合应用程序 - 可能是嵌入式插座

> ID：12780896
> 
> 赞同：1
> 
> 时间：2012-10-08T11:33:00.060
> 
> 标签：ember.js, outlet

我正在创建一个 Ember.js 应用程序，它基本上有一个非常简单的 UI：页眉、内容、页脚——所有这些都在应用程序层中。

但是，当您第一次看到该站点时，您有一个混合应用程序——谷歌需要访问它的一部分，但登录、注册、仪表板和其他页面应该由 Ember 处理。

而且我可能会遇到一些问题，因为如果我在主页上、在某些网点中呈现一些视图，那么这些网点在登录后会在用户的仪表板上有所不同。

我无法炫耀 UI，但如果需要，我可以尝试提供更多详细信息。

我的问题是如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:07:17.800

我现在使用了一些技巧：就在 Ember 初始化之前，我从 DOM 中删除了在服务器端呈现的内容。这可能很难看，但它有效。这样，机器人可能会到达我希望他们到达的内容，另一方面，用户会看到更好的东西。

# microsoft-metro - Metro 风格应用程序中的自定义魅力

> ID：12780899
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:33:16.503
> 
> 标签：microsoft-metro

如何在 Windows 8 Metro 风格应用程序中实现自定义魅力。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:16:43.570

Charms 由 Windows 定义。因此，应用程序无法添加自定义项。

应用程序应使用其应用栏（顶部或底部）来提供命令。有关更多详细信息，请阅读[应用栏指南和清单](http://msdn.microsoft.com/en-us/library/windows/apps/hh465302.aspx)。

# java - JAXB上下文管理

> ID：12780901
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:33:34.053
> 
> 标签：java, jaxb, java-ee-6

我必须生成很多 xml 片段并将其存储到我的数据库中以供以后（重新）使用。JaxB 工作正常，但我提出了一些问题：

1.  我应该为整个应用程序或每个响应 dto 一个 JAXBContext 吗？我会将上下文保存在每个根 dto 对象的静态变量中。（初始化一次）
2.  有没有办法在 JEE6 中注入编组器？

我想保持样板代码尽可能小。

问候米

PS：XStream 也工作得很好，但我想坚持标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:49:18.403

*   是的，您只需要一个 JAXBContext
*   你总是可以注入编组器。（最好的方法是使用 Spring）

    ```
     <bean id="marshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
         <property name="classesToBeBound">
            <list>
                <value>com.package.YourClass</value>
             </list>
        </property>
    </bean> 
    ```

我不明白你的意思是“坚持标准”，但你可以看看[JIBX](http://jibx.sourceforge.net/)。它通常提供比 JaxB 更好的性能

# php - php中的白页找不到错误

> ID：12780902
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:33:38.703
> 
> 标签：php

嘿，伙计们构建了一个基本的 php 脚本，但是当我运行它时，我有一个白页，找不到错误，其他人可以看到吗？我在 mysql 中收集数据的表具有名称`zurodnung`，我只想读取数据并将它们作为文本输出。

```
<html>
 <head>
  <title>PHP Test</title>
 </head>
 <body>
 <?php
echo(<p>test1</p>);
include ("db_login.php");

    $link = mysql_connect($host, $user, $pass) or die ("Keine Verbindung zu der Datenbank moeglich.");
    mysql_select_db($db, $link);

    $sql = "SELECT ID_Zuordnung, HW_Typ, Hostname_alt, zuordnung.Username, Emailadresse, Datum_Ausgabe, Abteilung 
        FROM zuordnung
        WHERE Status_Tausch = 'OK' AND Status_Altgeraet = 'NOK'
        ORDER BY Hostname_alt;";

    $result = mysql_query($sql);

    if (mysql_num_rows ($result) > 0)  
    {
    $Farbe = "#fffffff";

            echo('<td bgcolor="'.$Farbe.'">'.$resultarray['HW_Typ']."</td>");
            echo('<td bgcolor="'.$Farbe.'">'.$resultarray['Hostname_alt']."</td>");
            echo('<td bgcolor="'.$Farbe.'">'.$resultarray['Username']."</td>");
            echo('<td bgcolor="'.$Farbe.'">'.$resultarray['Emailadresse']."</td>");
            echo('<td bgcolor="'.$Farbe.'">'.$resultarray['Abteilung']."</td>");
            echo('<td bgcolor="'.$Farbe.'">'.$resultarray['Datum_Ausgabe']."</td>");
    }
    else {
    echo(<h1>fail</h1>);
    }
    ?> 
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:35:07.423

你的回声失败了；

`echo(<p>test1</p>);`应该`echo('<p>test1</p>');`

并且`echo(<h1>fail</h1>);`应该是`echo('<h1>fail</h1>');`

仅供参考： echo 不需要括号，您可以这样做`echo '<h1>fail</h1>';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:37:57.407

错误可能在这里：`echo(<h1>fail</h1>);`- 您需要将该文本封装在一个字符串中。

现在 - 在你做任何其他事情之前 - 设置你的开发环境，为你提供你需要的信息：

1.  将 error_reporting 设置为 E_ALL
2.  将 display_errors 设置为 true
3.  找出错误日志的位置（尽管 display_errors 开启意味着浏览器将显示消息，因此您不必在开发环境中监视日志 - 但这对于诊断生产错误很有用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:37:25.390

意大利面条代码。可怕的事情 - 尽量避免它。

您的代码中的错误行是：

```
echo(<p>test1</p>);
echo(<h1>fail</h1>); 
```

应该

```
echo('<p>test1</p>');
echo('<h1>fail</h1>'); 
```

还有这段代码：

```
echo('<td bgcolor="'.$Farbe.'">'.$resultarray['HW_Typ']."</td>"); 
```

可以通过这种方式轻松地使人类更易阅读：

```
printf('<td bgcolor="%s">%s</td>', $Farbe, $resultarray['HW_Typ'] ); 
```

# c# - 如何获取列表中的唯一记录

> ID：12780904
> 
> 赞同：0
> 
> 时间：2012-10-08T11:33:46.613
> 
> 标签：c#, list

我有一个包含货币的字符串列表，例如大小为 1000。我想要列出 1000 条记录中所有唯一货币的字符串。

现在它就像 -

```
INR
USD
JPY
USD
USD
INR 
```

我想要字符串列表 -

```
INR
USD
JPY 
```

唯一的记录

最好不使用 Linq

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:35:30.700

编辑：

我错过了*“最好不使用 LINQ”*的部分，如果您使用的是 .Net framework 2.0 或者您不想使用 LINQ，可以尝试以下操作。

```
List<string> list = new List<string> { "abc", "abc", "ab", "def", "abc", "def" };
list.Sort();
int i = 0;
while (i < list.Count - 1)
{
    if (list[i] == list[i + 1])
        list.RemoveAt(i);
    else
        i++;
} 
```

~~利用`Distinct()`~~

```
List<string> list = new List<string> { "abc", "abc", "ab", "def", "abc","def" };
List<string> uniqueList = list.Distinct().ToList(); 
```

将`uniqueList`包含`3`项目`"abc","ab","def"`

记得包括：`using System.Linq;`在顶部

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:40:18.953

`HashSet<T>`就是你要找的。参考[MSDN](http://msdn.microsoft.com/en-us/library/bb359438.aspx)：

> 该类`HashSet<T>`提供高性能的集合操作。集合是**不包含重复元素**且其元素没有特定顺序的集合。

请注意，如果该项目已添加到集合中，则该[`HashSet<T>.Add(T item)`方法](http://msdn.microsoft.com/en-us/library/bb353005.aspx)返回`bool`-- ；如果该项目已经存在。`true``false`

[如果使用 .NET 3.5 或更高版本， HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)将为您工作，不涉及 Linq。

```
var hash = new HashSet<string>();
var collectionWithDup = new [] {"one","one","two","one","two","zero"}; 

foreach (var str in collectionWithDup)
{
    hash.Add(str);
}

// Here hash (of type HashSet) will be containing the unique list 
```

如果您不使用 .NET 3.5，只需使用以下代码：

```
List<string> newList = new List<string>();

foreach (string s in list)
{
   if (!newList.Contains(s))
      newList.Add(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:50:28.307

您可以创建自己的`Distinct`扩展方法：

```
public static class ExtensionMethods
{
  public static IEnumerable<T> Distinct<T>(this IEnumerable<T> list)
  {
    var distinctList = new List<T>();

    foreach (var item in list)
    {
      if (!distinctList.Contains(item)) distinctList.Add(item);
    }

    return distinctList;
  }
} 
```

现在你可以这样做：

```
static void Main(string[] args)
{
  var list = new List<string>() {"INR", "USD", "JPY", "USD", "USD", "INR"};
  var distinctList = list.Distinct();
  foreach(var item in distinctList) Console.WriteLine(item);
} 
```

这将产生：

```
INR
USD
JPY 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:42:42.293

假设您将这些值存储在数组或 ArrayList 中，有两种方法：

第一种方式

```
var UniqueValues = nonUnique.Distinct().ToArray(); 
```

第二种方式

```
//create a test arraylist of integers
int[] arr = {1, 2, 3, 3, 3, 4, 4, 5, 5, 6, 7, 7, 7, 8, 8, 9, 9};
ArrayList arrList = new ArrayList(arr);
//use a hashtable to create a unique list
Hashtable ht = new Hashtable();
foreach (int item in arrList) {
//set a key in the hashtable for our arraylist value - leaving the hashtable value      empty
    ht.Item[item] = null;
}
//now grab the keys from that hashtable into another arraylist
ArrayList distincArray = new ArrayList(ht.Keys); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:35:56.033

为什么不将这些存储在[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)中，然后从中读出。该集合将仅包含唯一值。

# c# - 2个不同的登录访问不同的主题？

> ID：12780913
> 
> 赞同：0
> 
> 时间：2012-10-08T11:34:33.853
> 
> 标签：c#, asp.net, asp.net-membership, themes

我真的需要一些建议，我有 2 个不同的主题，我想做的是取决于他们用来登录的用户帐户，他们将访问不同的主题。有人告诉我实施会员提供者会帮助我做到这一点？ .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:39:24.863

使用此[链接](http://msdn.microsoft.com/en-us/library/ms366514%28v=vs.100%29.aspx)作为在 ASP.NET 中使用主题的参考。但请注意具有以下代码的部分`public void Page_PreInit()`，这是您动态设置主题所需的脚本。您的代码看起来会大不相同，因为您将利用已登录的用户，但设置它不会改变。

# php - 使用 cURL 功能后，会话将无法工作

> ID：12780915
> 
> 赞同：0
> 
> 时间：2012-10-08T11:34:41.213
> 
> 标签：php

我有这个脚本，它有一个登录用户，所以用户只能使用他的用户名/密码登录！

一切正常，唯一的问题是，在我使用 cURL 功能的页面中，一旦我离开该页面并移动到另一个页面，它将不再识别用户会话。

这是 cURL 文件代码：

```
<?php session_start(); 
require_once('db.php'); 
include('functions.php'); 
checkLogin('1'); 
$query = 'SELECT * FROM users WHERE ID="'.$_SESSION['user_id'].'"';
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    $id_user=$row['user_id'];
    $phone=$row['phone'];
    $name=$row['first_name'];

}

?>

<?php
    if ($points == 250) {
     $b = time (); 
 $date1 =date( "Y-m-d;h:i:s" , mktime(date("h")+6, date("i"), date("s"), date("m") , date("d"), date("Y"))); 
 $str_time = ""; 
 $str_msg = ""; 
 $str_from = ""; 
 $str_zip = ""; 

$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg);
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);
}
else if ($points == 500) {
     $b = time (); 
 $date1 =date( "Y-m-d;h:i:s" , mktime(date("h")+6, date("i"), date("s"), date("m") , date("d"), date("Y"))); 
 $str_time = ""; 
 $str_msg = ""; 
 $str_from = ""; 
 $str_zip = ""; 

$ch = curl_init();

// set URL and other appropriate options
curl_setopt($ch, CURLOPT_URL, "http://testext.i-movo.com/api/receivesms.aspx?".$str_from.$str_zip.$phone.$str_time.$date1.$str_msg);
curl_setopt($ch, CURLOPT_HEADER, 0);

// grab URL and pass it to the browser
curl_exec($ch);

// close cURL resource, and free up system resources
curl_close($ch);
}
else {
    echo "We are sorry, you don't possess enough points in order to take the coupon";

}
echo '</div>';

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:37:29.693

这很有趣......你知道你在调用 curl 之前关闭了 php 吗？

从`?>`中间删除并放在页面末尾

其次，我不建议继续使用`mysql_query`

来自 PHP 文档

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

# linux - 通过命令提示符设置 cronjob

> ID：12780922
> 
> 赞同：0
> 
> 时间：2012-10-08T11:35:36.640
> 
> 标签：linux, cron, command

我已经通过 cpanel 为 linux 服务器设置了 cronjob 并且它工作正常。但是现在我有一个没有 cpanel 的 linux 服务器。所以对于这个cpanel，我必须设置cronjob，但是没有cpanel怎么做，请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:39:15.590

`crontab -e`从命令行将允许您编辑用户的 cron 选项卡。

该文件的语法在文件和在线描述

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:40:04.193

只需将您的 crontab 添加到 /etc/cron.d/ 目录，例如：

将此行文本写入文件（您可以为该文件命名任何您喜欢的名称）并将其保存到`/etc/cron.d/`：

`0 */4 * * * root /path/to/script.sh`

每 4 小时执行一次`script.sh`。`root`

# php - 使用（出）Solr 的分面搜索

> ID：12780924
> 
> 赞同：4
> 
> 时间：2012-10-08T11:35:53.957
> 
> 标签：php, solr, symfony-1.4, shared-hosting, faceted-search

我想对我的项目实施[分面搜索](http://en.wikipedia.org/wiki/Faceted_search)。我正在使用`PHP5`,`Mysql`和`Symfony 1.4`. 显然，社区指向[Apache Solr](http://lucene.apache.org/solr/)，这似乎正是我想要完成的。

问题是该网站将在不允许我设置的托管服务提供商上运行`Solr`（它是一个共享托管环境，既不允许`Tomcat`也不允许`Solr`运行）。

那么，您能否就可能的替代方案给我指导，或者是否有办法`Solr`在这样的环境中进行设置？

**编辑**
我的托管服务提供商既不支持`SOLR`也不支持`opensolr`. 一般来说，我不能使用我的环境连接到同一服务器或远程服务器上的进程。似乎唯一可用的选项是使用[Zend_Search_Lucene](http://framework.zend.com/manual/1.12/en/zend.search.lucene.html)。那么这是否支持分面搜索？或者，如果您有其他选择，请分享！我感觉自己在茫茫人海中！

**编辑 2**
由于这个问题从到目前为止给出的答案中打开了大约一周，我很惊讶（也很失望）PHP 中没有可用的库（*不是*服务）来实现分面搜索。似乎这需要手动实现或使用下面提供的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:33:40.850

更改主机，或在别处托管 Solr 索引 - 例如，快速搜索显示[http://www.opensolr.com/](http://www.opensolr.com/)提供 Solr 托管，毫无疑问还有很多其他的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:49:30.700

性能不会很好并且不讨论扩展，但您始终可以通过 HTTP 创建反向 HTTP 隧道。基本上，不是 Web 服务器打开到 Solr 服务器的出站连接，而是 Solr 服务器连接到 Web 服务器以请求作业并发布作业结果。

你需要做什么：

1.  浏览器发布一个搜索查询，该查询只是在数据库中排队。
2.  反向代理定期连接到 Web 服务器（通过普通的 ol' 端口 80）以从作业队列中获取查询列表，将查询传递给 Solr 服务器，并将结果 POST 回 Web 服务器。
3.  浏览器会定期轮询 Web 服务器以获取完成的搜索结果。

加分项：如果您的服务器允许并发请求处理，请使用[长轮询](https://en.wikipedia.org/wiki/Comet_%28programming%29)来改善延迟。

简而言之，咬紧牙关，搬到一个体面的主人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:31:13.567

尽量避免 Zend_Search_Lucene，它不是很快。（好吧，考虑到它是在 Php 中实现的并且不作为守护进程运行，这非常好）

Paul 建议的托管 Solr 听起来是一个不错的选择 - 如果您不愿意更改主机。

# objective-c - 在 iOS6 中处理旋转

> ID：12780925
> 
> 赞同：3
> 
> 时间：2012-10-08T11:35:55.070
> 
> 标签：objective-c, uiviewcontroller, uinavigationcontroller, orientation, ios6

我只想在我的 UINavigationController 堆栈中的一个视图上支持不同的方向。我怎样才能做到这一点？

它还必须在 iOS5 中工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T11:35:55.070

我在 iOS6 如何处理方向方面遇到了很多麻烦，希望这就是你要找的。

创建一个 UINavigationController 类别并将其命名为“UINavigationController+autoRotate”。

把它放在你的 UINavigationController+autoRotate.h 中：

```
#import <UIKit/UIKit.h>

@interface UINavigationController (autoRotate)

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation;
-(BOOL)shouldAutorotate;
- (NSUInteger)supportedInterfaceOrientations;

@end 
```

把它放在 UINavigationController+autoRotate.m 中：

```
#import "UINavigationController+autoRotate.h"

@implementation UINavigationController (autoRotate)

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return [self.topViewController shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

- (BOOL)shouldAutorotate
{
    return [self.visibleViewController shouldAutorotate];
}

- (NSUInteger)supportedInterfaceOrientations
{
    if (![[self.viewControllers lastObject] isKindOfClass:NSClassFromString(@"ViewController")])
    {
        return UIInterfaceOrientationMaskAllButUpsideDown;
    }
    else
    {
        return [self.topViewController supportedInterfaceOrientations];
    }
}

@end 
```

对于您不想旋转的视图，添加：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotate
{
    return NO;
} 
```

对于您想要旋转的视图：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIDeviceOrientationPortraitUpsideDown);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

- (BOOL)shouldAutorotate
{
    return YES;
} 
```

在您的应用程序的委托中，添加：

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:44:59.927

我建议您不要在 UINavigationController 上创建类别来覆盖这些方法。类别的目的不是为了做到这一点，并且不能保证您的代码将被加载而不是 Apple 的代码（即使确实有效）。我建议你创建一个 UINavigationController 的子类，并覆盖其中的那些方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T15:49:55.777

在以下情况下，该解决方案不适用于 iOS 6（在 iOS 5 上正常）：

*   `vc A`仅支持纵向
*   `vc B`支持所有方向
*   `vc B`我们从推`vc A`，旋转`vc B`（例如横向）并弹回`vc A`。`vc A`方向保持在横向模式...

# windows - ffmpeg 退出状态-1094995529

> ID：12780931
> 
> 赞同：10
> 
> 时间：2012-10-08T11:36:04.800
> 
> 标签：windows, unix, ffmpeg, libav, exitstatus

我正在开发一个应用程序，在 Windows 上[调用该应用程序`ffprobe`返回某些文件的非正统退出状态。`-1094995529`](https://github.com/anacrolix/dms/blob/master/dlna/dms/ffmpeg.go#L23-L26)这个退出状态是一致的，对此有一些小的[讨论](http://google.com/?q=ffmpeg%20%22-1094995529%22)。

为什么给出这个值，它记录在哪里？我可以期望在允许的退出状态受到更多限制的 unix 机器上，此状态会有所不同吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-03-03T14:45:37.440

来自 ffmpeg 的错误代码（来自 avutil 的 error.h）： [http ://ffmpeg.org/doxygen/trunk/error_8h_source.html](http://ffmpeg.org/doxygen/trunk/error_8h_source.html)

原来您指定的值是：

```
#define AVERROR_INVALIDDATA        FFERRTAG( 'I','N','D','A') 
```

-1094995529 变为 -0x41444E49，当您查看这些字母时，在 ACSII 中，0x41 = 'A'、0x44 = 'D'、0x4E = 'N 和 0x49 = 'I'。由于宏/等事情是相反的，所以ADNI变成了INDA，你可以从#define片段中看到，是AVERROR_INVALIDDATA定义的FFERRTAG（'I'，'N'，'D'，'A'）。

其余的错误代码在该文件中，我已将它们粘贴在下面：

```
#define AVERROR_BSF_NOT_FOUND      FFERRTAG(0xF8,'B','S','F') ///< Bitstream filter not found
#define AVERROR_BUG                FFERRTAG( 'B','U','G','!') ///< Internal bug, also see AVERROR_BUG2
#define AVERROR_BUFFER_TOO_SMALL   FFERRTAG( 'B','U','F','S') ///< Buffer too small
#define AVERROR_DECODER_NOT_FOUND  FFERRTAG(0xF8,'D','E','C') ///< Decoder not found
#define AVERROR_DEMUXER_NOT_FOUND  FFERRTAG(0xF8,'D','E','M') ///< Demuxer not found
#define AVERROR_ENCODER_NOT_FOUND  FFERRTAG(0xF8,'E','N','C') ///< Encoder not found
#define AVERROR_EOF                FFERRTAG( 'E','O','F',' ') ///< End of file
#define AVERROR_EXIT               FFERRTAG( 'E','X','I','T') ///< Immediate exit was requested; the called function should not be restarted
#define AVERROR_EXTERNAL           FFERRTAG( 'E','X','T',' ') ///< Generic error in an external library
#define AVERROR_FILTER_NOT_FOUND   FFERRTAG(0xF8,'F','I','L') ///< Filter not found
#define AVERROR_INVALIDDATA        FFERRTAG( 'I','N','D','A') ///< Invalid data found when processing input
#define AVERROR_MUXER_NOT_FOUND    FFERRTAG(0xF8,'M','U','X') ///< Muxer not found
#define AVERROR_OPTION_NOT_FOUND   FFERRTAG(0xF8,'O','P','T') ///< Option not found
#define AVERROR_PATCHWELCOME       FFERRTAG( 'P','A','W','E') ///< Not yet implemented in FFmpeg, patches welcome
#define AVERROR_PROTOCOL_NOT_FOUND FFERRTAG(0xF8,'P','R','O') ///< Protocol not found
#define AVERROR_STREAM_NOT_FOUND   FFERRTAG(0xF8,'S','T','R') ///< Stream not found
#define AVERROR_BUG2               FFERRTAG( 'B','U','G',' ')
#define AVERROR_UNKNOWN            FFERRTAG( 'U','N','K','N') ///< Unknown error, typically from an external library
#define AVERROR_EXPERIMENTAL       (-0x2bb2afa8) ///< Requested feature is flagged experimental. Set strict_std_compliance if you really want to use it.
#define AVERROR_INPUT_CHANGED      (-0x636e6701) ///< Input changed between calls. Reconfiguration is required. (can be OR-ed with AVERROR_OUTPUT_CHANGED)
#define AVERROR_OUTPUT_CHANGED     (-0x636e6702) ///< Output changed between calls. Reconfiguration is required. (can be OR-ed with AVERROR_INPUT_CHANGED)
#define AVERROR_HTTP_BAD_REQUEST   FFERRTAG(0xF8,'4','0','0')
#define AVERROR_HTTP_UNAUTHORIZED  FFERRTAG(0xF8,'4','0','1')
#define AVERROR_HTTP_FORBIDDEN     FFERRTAG(0xF8,'4','0','3')
#define AVERROR_HTTP_NOT_FOUND     FFERRTAG(0xF8,'4','0','4')
#define AVERROR_HTTP_OTHER_4XX     FFERRTAG(0xF8,'4','X','X')
#define AVERROR_HTTP_SERVER_ERROR  FFERRTAG(0xF8,'5','X','X') 
```

# php - Yii PHP：用于读/写数据的动态数据库连接

> ID：12780935
> 
> 赞同：1
> 
> 时间：2012-10-08T11:36:28.603
> 
> 标签：php, yii, multiple-databases

我正在开发一个扫描/抓取/监控某些网站的应用程序

该应用程序可在以下位置免费获得`www.linkbook.co`

现在，我将解释我想要做什么：

我有一个主数据库，用于存储网站、网站上的 url 和每个网站的 url 模式；网站知道他被分配到的Db，url知道网站id；

因为我有 2 GB / DB 限制，所以我需要辅助 DB。

我从[http://www.yiiframework.com/wiki/123/multiple-database-support-in-yii/](http://www.yiiframework.com/wiki/123/multiple-database-support-in-yii/)中阅读了所有内容以及 Google 可以找到的内容，并且没有一个完整的示例使用 dinamicaly 连接；

因此，每次我的应用程序扫描一个网站时，找到的每个 url 都会插入到主数据库中，也会插入到已分配给该 url 所属网站的数据库中。

及时，主数据库中的数据被删除，但在辅助数据库中仍然可用。

因此，只有 HOT 信息存储在主数据库中，但它们仍保存在辅助数据库中

Yii 人给出了这个例子，但我需要一个参数，从 1 到 N，N=1->infinite，以便切换到正确的 DB。

```
class MyActiveRecord extends CActiveRecord {
    ...
    private static $dbadvert = null;

    protected static function getAdvertDbConnection()
    {
        if (self::$dbadvert !== null)
            return self::$dbadvert;
        else
        {
            self::$dbadvert = Yii::app()->dbadvert;
            if (self::$dbadvert instanceof CDbConnection)
            {
                self::$dbadvert->setActive(true);
                return self::$dbadvert;
            }
            else
                throw new CDbException(Yii::t('yii','Active Record requires a "db" CDbConnection application component.'));
        }
    }
    ... 
```

$dbadvert 需要动态，这是我的问题。

此外，辅助数据库中的表并不完全相同，因为我不需要所有表中的所有字段，并且一些表也被删除，所以我需要一个模型；

我能写的模型，不难，我只是删除一些字段；

这就是我现在拥有的，只是插入，在一个特定的数据库中，db1 aka linkbookco1

```
$command = Yii::app()->db1->createCommand("INSERT INTO `url` (
`id` ,
`website_id` ,
`link` ,
`name` ,
`created` ,
`instance_scanner_id` ,
`status`
)
VALUES (
NULL ,  '".($model_url->website_id)."',  '".($model_url->link)."',  '".($model_url->name)."',  '".($model_url->created)."',  '".($model_url->instance_scanner_id)."',  '".($model_url->status)."'
);
");
$command->query(); 
```

db1 and it's params are mentioned in the config file, as the yii developers say;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:33:36.393

from your example I can guess you have a secondary database connection configured in your app like

```
'dbadvert' => array(
    'class' => 'CDbConnection',
    ...
) 
```

the point where you need to get the database connection you have this:

```
self::$dbadvert = Yii::app()->dbadvert; 
```

So, to have multiple database connections you'd need to add them to your database configuration

```
'dbadvert1' => array(
    'class' => 'CDbConnection',
    ...
)
'dbadvert2' => array(
    'class' => 'CDbConnection',
    ...
) 
```

And in your code you can do something like

```
self::$dbadvert = Yii::app()->getComponent("dbadvert".Yii::app()->request->getQuery('dbid', '')); 
```

# java - Flex Java BlazeDS - 数据库数据

> ID：12780937
> 
> 赞同：1
> 
> 时间：2012-10-08T11:36:36.420
> 
> 标签：java, apache-flex

在我的 Flex Java BlazeDS 应用程序中，我通过以下方法从数据库中获取数据。

1.  通过启动对 Java 的 RemoteObject 调用从 Flex 请求数据
2.  在 Java 中执行相应的查询，获取结果集并将结果集作为列表传递回 Flex
3.  在Remote Object的resultHandler中接收数据，将其转换为Array Collection并显示数据。

虽然此过程是 BlazeDS DataSerilization 的教科书方法，但当数据包含数百万条记录时，所花费的时间非常巨大。请在下面找到一些统计数据。

*   从 Flex 调用 Java 所需的时间：5 毫秒
*   建立数据库连接所需时间：3000ms
*   执行查询所需时间：120ms
*   遍历结果集并将数据添加到列表所需的时间：8000 毫秒
*   将数据从 Java 传回 Flex 所需的时间：2000 毫秒
*   将 event.result 转换为数组集合所需的时间：6000 毫秒

所用总时间：19125 毫秒（对于 MySQL 数据库），对于 Oracle 数据库，数据库中有 143,000 条记录需要更多时间。

显然，问题在于将 ResultSet 转换为 Java 中的 List（必须迭代每条记录）以及将 List 转换为 Flex 中的 ArrayCollection。

有什么方法或程序可以加快这个过程。

一种可能的过程可能是在 Java 中避免这些迭代并直接将 ResultSet 传递给 Flex。那可能吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:20:56.290

考虑使用不同的数据库技术，例如后端的 ORM 技术应该更快。我目前正在开发一个应用程序，虽然它不会一次提取大量记录，但有很多用户一次提取记录，与我们使用 JDBC 启动项目时相比，我们选择的 ORM 技术为我们提供了明显更快的响应。

# http - 为每个请求生成单独的获取请求

> ID：12780940
> 
> 赞同：0
> 
> 时间：2012-10-08T11:36:50.233
> 
> 标签：http, nginx, get

我有一个嵌入在 iframe 中的网站。

有时我会看到为每个 get 或 post 生成一个幻像 get 请求。

nginx 日志显示了这种情况，请注意在发布后立即发送了一个 get 请求：

```
XX.XXX.XXX.XX - - [06/Oct/2012:20:55:47 +0000] "POST /website_widget/users HTTP/1.1" 200 1996 "http://subdomain.mysite.com/website_wi
dget/users/sign_up" "Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1"
XX.XXX.XXX.XX - - [06/Oct/2012:20:55:47 +0000] "GET /website_widget/users HTTP/1.1" 404 781 "http://subdomain.mysite.com/website_widg
et/users" "Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1"

XX.XXX.XXX.XX - - [06/Oct/2012:20:55:53 +0000] "POST /website_widget/users HTTP/1.1" 200 1993 "http://subdomain.mysite.com/website_wi
dget/users" "Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1"
XX.XXX.XXX.XX - - [06/Oct/2012:20:55:53 +0000] "GET /website_widget/users HTTP/1.1" 404 781 "http://subdomain.mysite.com/website_widg
et/users" "Mozilla/5.0 (Windows NT 5.1; rv:15.0) Gecko/20100101 Firefox/15.0.1" 
```

这也发生在标准的 get 请求中。从我的 Rails 日志中，我可以看到：

```
Started GET "/website_widget/users/sign_in" for XX.XX.XXX.XX at 2012-10-06 20:45:35 +0000
[b7e895726057452d0af6a2ac5cd1668d] Processing by WebsiteWidget::MyController#new as HTML

Started GET "/website_widget/users/sign_in" for XX.XX.XXX.XX at 2012-10-06 20:45:37 +0000
[b20e57fcc205ee6cf958589ab1660c9f] Processing by WebsiteWidget::MyController#new as */* 
```

请注意`*/*`第二个日志条目，这表明 mime 类型未设置为 html 或根本未设置。

以前有人遇到过这种事情吗？或者知道如何进一步调试它。我证明很难重新创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:30:24.253

所以看起来这是由 Firefox 插件引起的。可能是某种描述的网站排名插件。

# seo - 如何格式化带有分页站点的规范链接

> ID：12780944
> 
> 赞同：1
> 
> 时间：2012-10-08T11:37:06.783
> 
> 标签：seo, search-engine, canonical-link

在搜索引擎风格的网站上格式化规范链接的最佳方法是什么？在这一刻，我们的搜索引擎会获取结果并对其进行分页。我们目前将规范 URL 分页页面设置回第一页，因此：

**例子**

[http://jobportfolio.co.uk/jobs/any/london](http://jobportfolio.co.uk/jobs/any/london) 规范 = [http://www.jobportfolio.co.uk/jobs/any/london](http://www.jobportfolio.co.uk/jobs/any/london)

[http://jobportfolio.co.uk/jobs/any/london/?&page=2](http://jobportfolio.co.uk/jobs/any/london/?&page=2) 规范 = [http://www.jobportfolio.co.uk/jobs/any/london](http://www.jobportfolio.co.uk/jobs/any/london)

这是最好的方法还是我应该将规范 URL 设置为也包含 &page=2？

我注意到，当我提交 XML 站点地图时，只有一小部分页面被编入索引。

谢谢

奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T11:53:37.447

仅`canonical`用于具有（几乎）相同内容的页面/URL。您的分页页面显然有*不同的*内容。

# c# - 谷歌地图 api v3 + Json 不工作 + asp .net mvc3 c#

> ID：12780947
> 
> 赞同：0
> 
> 时间：2012-10-08T11:37:28.243
> 
> 标签：c#, json, asp.net-mvc-3, google-maps-api-3

您好我正在尝试在谷歌地图上填充标记并使用 Json 从数据库中读取纬度和经度。

作为第一步，我要做的就是看看我是否得到任何回应。代码如下：

实体如下：

```
public class Property
{
    public int PropertyId { get; set; }
    ...
    public virtual PropertyAddress PropertyAddress { get; set; }
}

public class PropertyAddress
{
    [Key]
    public int PropertyId { get; set; }
    ...
    public float Latitude { get; set; }
    public float Longitude { get; set; }
} 
```

Json 属性模型：

```
public class JsonProperty
{
    public int PropertyId { get; set; }
    public float Latitude { get; set; }
    public float Longitude { get; set; }
} 
```

控制器：

```
 public ActionResult Map()
    {
        if (Request.IsAjaxRequest())
        {
            var properties = websiteRepository.FindAllProperties();

            var jsonProperties = from property in properties
                                 select new JsonProperty
                                 {
                                     PropertyId = property.PropertyId,
                                     Latitude = property.PropertyAddress.Latitude,
                                     Longitude = property.PropertyAddress.Longitude
                                 };

            return Json(jsonProperties.ToList());
        }
        else 
        {
            return View();
        }
    } 
```

看法：

```
@section Scripts_footer {
    <!-- Google Map Script -->
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            var map = new google.maps.Map(document.getElementById("map"), {
                center: new google.maps.LatLng(19.0759837, 72.8776559),
                zoom: 13,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            $.getJSON("/Search/Map", function (json) {
                alert(json);
            });
        });
    </script>
}

<div id="map" style="width: 500px; height: 300px"></div> 
```

我期待一个带有对象对象对象的警报消息......不太确定为什么没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:10:10.173

将控制器代码中的 return 语句更改为：

```
return Json(jsonProperties.ToList(), JsonRequestBehavior.AllowGet); 
```

出于安全原因，Json 请求被隐式阻止。

# python - __contains__ 语法

> ID：12780949
> 
> 赞同：5
> 
> 时间：2012-10-08T11:37:28.730
> 
> 标签：python

我编写了一个 python 程序，它使用**包含** 语法的多个实例来查看字典和列表。

```
if not test_map[var].__contains__(string): 
```

看来我会更好地使用：

```
if string not in test_map[var]: 
```

有谁知道使用该`__contains__`方法可能发生的问题？

谢谢，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T11:39:43.837

这是非常非常丑陋的。

如果将来更改语义，直接使用实现而不是使用实际预期的顶级语法也会对您造成伤害。另外，它使代码更难理解和解释。

很可能成为一个称职的 Python 程序员，却不知道底层的`in`用途`__contains__()`。我声称的相反是不正确的。

# vba - VBA 什么更优化：过滤隐藏行

> ID：12780951
> 
> 赞同：0
> 
> 时间：2012-10-08T11:37:33.740
> 
> 标签：vba, excel

我需要过滤超过 50000 行的 excel 表 512 次。我目前正在使用以下代码。

```
Do While Not IsEmpty(ActiveCell.value)

        Worksheets("Sheet1").Activate
        filtro = ActiveCell.value

        Sheets("Sheet2").Select
        Range("D1").Select
        Selection.AutoFilter
        ActiveSheet.Range("$A$1:$I$" & lastRow("D")).AutoFilter Field:=4, Criteria1:=filtro

        Range("A1").Select

        Do While Not IsEmpty(ActiveCell.value)

            Do

                ActiveCell.offset(1, 0).Select
                oProgress.Increase 1

            Loop While ActiveCell.EntireRow.Hidden = True

                Call functio ' this function do something with the actual row

        Loop

    Loop 
```

问题是分析 50000 行 X 512 次需要花费大量时间！我在想也许最好先过滤然后将行复制到临时工作表中，然后检查那里的值？

行 Active 由函数 readValues 处理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:19:22.297

像这个问题的其他海报一样，我真的对过滤`512`时间持怀疑态度！但是，既然您说您绝对需要它，请参阅下面的代码。我认为它仍然可以根据您的需要进行清理，但是如果没有看到更大的范围就很难说。但是，它应该将您带到比现在更有效的地方。

我试图评论我的所有假设，但如果您需要更多解释，请联系我们。

```
Sub FilterAll512()

Dim wks1 As Worksheet
Set wks1 = Sheets(1)

Dim rng512 As Range, cel As Range
Set rng512 = wks1.Range("A1:A512") '-> say your filter values are in this range, adjust if needed

Dim wks2 As Worksheet
Set wks2 = Sheets(2)

For Each cel In rng512

    With wks2

        Dim rngFound As Range
        Set rngFound = .Columns(4).Find(cel.Text, LookIn:=xlWhole) ' -> make sure value is there to be filtered on

        If rngFound Then

                .UsedRange.AutoFilter 4, cel.Text '-> assumes upper left most cell is A1

                Dim rngSearch As Range, rngCel As Range
                '-> assumes upper left most cell is A1 and row 1 has headers
                Set rngSearch = Intersect(.UsedRange, .UsedRange.Offset(1), .Columns(4).EntireColumn).SpecialCells(xlCellTypeVisible)

                For Each rngCell In rngSearch

                    oProgress.Increase 1 '-> i don't know what this does, but it doesn't look very efficient, see notes below

                    Call functio

                Next

                '-> perhaps above you are just counting rows?
                    'if so, you can use rngSearch.Rows.Count to get a total count
                    'or you can use rngCell.Row to get the current row

        End If 'iF rngFound Then

    End With ' With wks2

Next 'For Each cel In rng512

Set rngCell = Nothing
Set rngSearch = Nothing
Set rngFound = Nothing
Set cel = Nothing
Set rng512 = Nothing
Set wks2 = Nothing
Set wk1 = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:16:11.247

Excel内置了过滤工具（大多数人会将其描述为excel的一个非常基本的功能）。即使您确实必须遍历 500,000 行，这很可能是您可以做到的最糟糕（最慢）和最奇怪的方法之一：

```
Do                 
    ActiveCell.offset(1, 0).Select 
Loop While ActiveCell.EntireRow.Hidden = True 
```

您可以查看 Range().Sort 和 Range().AutoFilter 这是正确的方法。祝你好运。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T12:06:35.423

您可以做的一个想法是计算所有行号或行号范围，然后应用如下代码：

```
rowNumbers = "1:3,10:10,30:50"
Range(rowNumbers).EntireRow.Hidden = True 
```

# javascript - 将 Unicode 字符动态放置在带有背景图像的 div 中

> ID：12780955
> 
> 赞同：0
> 
> 时间：2012-10-08T11:37:38.860
> 
> 标签：javascript, html, css

我有一个代表举重杆的图像：

![在此处输入图像描述](../Images/31aa195b38f8042029de537553206808.png)

我想在栏的左侧和右侧都 放置[全块 Unicode字符（例如代表车牌）。](http://www.fileformat.info/info/unicode/char/2588/index.htm)

我正在尝试使用 3 个 div 来做到这一点：

1.  **左杠铃：位于杠铃左侧**的板，右对齐
2.  **杠铃中间**：没有空白
3.  **杠铃右**：杠铃右侧的板，左对齐

这是带有盘子的 div 的专业表示： ![在此处输入图像描述](../Images/721ab483936f88841c940a257d9cbd27.png)

我想我可以用浮点数和 div 宽度的百分比来做到这一点，但我没有任何运气。

这是我最近对[​​js fiddle](http://jsfiddle.net/4Bgx7/2655/)的尝试。

* * *

# 更新

我得到了我想要的答案，但根据评论，我发现使用 Canvas 是更好的途径。

我能够使用此 html 获得更好的结果：

```
<div data-role="page" id="p1">
    <div  data-role="header"><h1>Header Page 1</h1></div>

    <div  data-role="content">
        <div class="bar-canvas">
            <canvas id="_barCanvas"></canvas>
        </div>
    </div>
    </div>

    <div  data-role="footer"><h4>Footer</h4></div>
</div> 
```

这个js：

```
var WIDTH_FACTOR    =    .8; //80% of screen size
var HEIGHT_FACTOR    =    .1; //10% of height size
var WEIGHT_SPACER    =     2;
var ctx = $("#_barCanvas")[0].getContext("2d");

ctx.canvas.width  = (window.innerWidth    *    WIDTH_FACTOR);
ctx.canvas.height = (window.innerHeight    *    HEIGHT_FACTOR);

var bar_width    =    ctx.canvas.width * .8;
var bar_height    =    ctx.canvas.height * .1;
var bar_x        =    (ctx.canvas.width - bar_width)
var bar_y        =    (ctx.canvas.height * .5)    

var plate_stop_width    =    bar_width * .01;
var plate_stop_height    =    bar_height * 4;
var plate_stop_y        =    bar_y - ((plate_stop_height - (bar_y / 2)));
var rubber_plate_height    =    bar_height * 8;
var rubber_plate_y        =    (ctx.canvas.height / 2) - (rubber_plate_height/2) + (bar_height/2);
var small_plate_height    =    plate_stop_height;
var small_plate_y        =    plate_stop_y;
var left_plate_stop_x    =    bar_x + (bar_width * .3);
var right_plate_stop_x    =    bar_x + (bar_width * .7);

//Draw Bar
ctx.fillStyle = "black";
ctx.fillRect (bar_x, bar_y, bar_width, bar_height);

//Draw Plate stop left
ctx.fillStyle = "black";
ctx.fillRect (left_plate_stop_x, plate_stop_y, plate_stop_width, plate_stop_height);

//Draw Plate stop right
ctx.fillStyle = "black";
ctx.fillRect (right_plate_stop_x, plate_stop_y, plate_stop_width, plate_stop_height);

//Draw 45 lb Plates
var plate_width      = bar_width * .04;
var current_plate_height     = 0;

ctx.fillStyle    =    'red';
ctx.fillRect(left_plate_stop_x - plate_width, rubber_plate_y, plate_width, rubber_plate_height);

ctx.fillStyle    =    'red';
ctx.fillRect(right_plate_stop_x + plate_stop_width, rubber_plate_y, plate_width, rubber_plate_height); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:39:03.227

我做了它改变了一点你的标记和CSS。

[**演示**](http://jsfiddle.net/gionaf/uLU52/)（仅在 Chrome 22 上测试）

HTML：

```
<div data-role="page" id="p1"> 
    <div  data-role="header"><h1>Header Page 1</h1></div> 

    <div  data-role="content">
    <div class="barbell-background">
        <div class="barbell-left">&#x2588;</div>
        <div class="barbell-right">&#x2588;</div>
    </div>
    </div> 

    <div  data-role="footer"><h4>Footer</h4></div> 
</div> 
```

CSS：

```
.barbell-background
{
    font-size:3em;
    line-height:1.4em;
    height:1.4em;
    position:relative;

    background-image:url('http://i.stack.imgur.com/ZmFY4.png');
    background-repeat:    no-repeat;
    background-position: center;
}
.barbell-left, .barbell-right
{
    position:absolute;
    color:red;
}
.barbell-left
{
    right:50%;
    margin-right:146px;
}
.barbell-right
{
    left:50%;
    margin-left:145px;
}​ 
```

* * *

正如[Joachim Sauer](https://stackoverflow.com/users/40342/joachim-sauer)所说，将 div 用于红色方块可能更容易且更一致......

[**另一个演示**](http://jsfiddle.net/gionaf/6qpEQ/)

HTML：

```
<div data-role="page" id="p1"> 
    <div  data-role="header"><h1>Header Page 1</h1></div> 

    <div  data-role="content">
    <div class="barbell-background">
        <div class="barbell-left"></div>
        <div class="barbell-right"></div>
    </div>
    </div> 

    <div  data-role="footer"><h4>Footer</h4></div> 
</div> 
```

CSS：

```
.barbell-background
{
    font-size:3em;
    line-height:1.3em;
    height:1.3em;
    position:relative;

    background-image:url('http://i.stack.imgur.com/ZmFY4.png');
    background-repeat:    no-repeat;
    background-position: center;
}
.barbell-left, .barbell-right
{
    position:absolute;
    background:red;
    width:0.5em;
    height:100%;
}
.barbell-left
{
    right:50%;
    margin-right:146px;
}
.barbell-right
{
    left:50%;
    margin-left:144px;
}​ 
```

* * *

在这两个演示中，您都会看到一个像素“摆动”。知道红色方块的内容我可以尝试修复它。

# backbone.js - 属于不同集合的模型中的主干js菜单

> ID：12780957
> 
> 赞同：0
> 
> 时间：2012-10-08T11:37:59.577
> 
> 标签：backbone.js, marionette

我正在使用优秀的 Marionette 插件开发一个 Backbonejs 应用程序。我有一个很大的导航视图，其中包含`<a>`引用各种集合的标签。一个例子可以更好地解释这一点：

*   汽车
    *   车A
    *   ...
    *   Z车
*   图书
    *   预约一个
    *   ...
    *   书 Z

每个块都是模型的集合。例如。`CarList`,`BookList`

我如何最好地构建 Menuview 以便在任何集合中的任何模型发生更改时重新呈现菜单视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:35:47.893

也许您可以尝试将 a`Composite View`用于您的菜单视图，并将 a`Collection View`用于菜单的每个子文件夹。复合视图和集合视图的制作方式是，当模型被添加/删除到集合中时，它们会自动添加/删除子元素。

有关更多信息，您可以在此处查看：http: [//lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

# java - 数独类型谜题的笼式约束

> ID：12780958
> 
> 赞同：0
> 
> 时间：2012-10-08T11:38:02.777
> 
> 标签：java, algorithm, puzzle, sudoku

嗨，我正在制作一个[kenken](http://www.kenken.com)求解器，它就像数独一样是一个谜题。我有一个笼子结构，其中有多个单元格用于笼子。每当我尝试为笼子设置值时，我都想应用约束。为此，我每次都将 roe/column/cage 约束称为我的难题。

但是，我对这个问题感到震惊。这是我所有 3 个约束的代码。对于笼子约束，我想查看特定单元格笼子的所有单元格，看看通过的数量是否满足我们的标准。

```
 //Row Constraint Check: Checks if num is an acceptable value for the given Row
public static boolean rowConstraintCheck(int rowIndex, int num){
    for(int columnIndex = 0; columnIndex < puzzleDimension; columnIndex++){
        if(puzzleArray[rowIndex][columnIndex] == num){
            return false;
        }
    }
    return true;
}
//Column Constraint Check: Checks if num is an acceptable value for the given Column    
public static boolean columnConstraintCheck(int columnIndex, int num){
    for(int rowIndex = 0; rowIndex < puzzleDimension; rowIndex++){
        if(puzzleArray[rowIndex][columnIndex] == num){
            return false;
        }
    }
    return true;
}
//Cage constraint Check: Checks if num is an acceptable value for the given Cage
public static boolean cageConstraintCheck(int rowIndex, int columnIndex, int num){
    if(true){
        int cageToCell =  cellToCageMapper[rowIndex][columnIndex];          
        String currentOperator = cages.get(cageToCell).cageOperator;
        int currentTotal = cages.get(cageToCell).cageValue;
        int numberOfCages = cages.get(cageToCell).placeHolders.length;            
        //System.out.println(rowIndex+"."+ columnIndex+"."+ cageToCell +"."+ currentOperator +"."+ currentTotal +"."+ numberOfCages);

         int flagNonZeroCages = 0;
         for(int j=0;j<numberOfCages;j++) {
            int tempIndex = cages.get(cageToCell).placeHolders[j];
            int tempCellRow = (int) (Math.floor(tempIndex/puzzleDimension));
            int tempCellCol = (tempIndex % puzzleDimension);
            if(puzzleArray[tempCellRow][tempCellCol] != 0){
                flagNonZeroCages++;System.out.println("bingo"+j);   
            }
        }
        if(flagNonZeroCages == numberOfCages){
            System.out.println("bingo");            
        }

         System.out.println();
        return true;
    }
    return false;
} 
```

现在我被困在我的方法中......我不知道如何进行笼子约束检查。这是我尝试过的，但不确定我缺少什么以及接下来要做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:58:35.113

```
/**
 * Cage constraint Check: Checks if num is an acceptable value for the
 * given Cage
 *
 * Precondition: Given cell is empty, and has passed rowConstraintCheck() and
 * columnConstraintCheck()
 */
public static boolean cageConstraintCheck(
        int rowIndex, int columnIndex, int num) {

    int cageIndex =  cellToCageMapper[rowIndex][columnIndex];          
    Cage cage = cages.get(cageIndex); // or whatever class-name you are using

    String currentOperator = cage.cageOperator;
    int targetValue = cage.cageValue;

    // Sum and product of all cells in cage, including the new one.
    int sum = num;
    int product = num;

    // Last non-zero value seen in the cage, not counting the new one.
    int last = -1;

    int numberOfEmptyCellsInCage = 0;
    int numberOfCellsInCage = cage.placeHolders.length;            

    if (numberOfCellsInCage == 1)
    {
        // Single-cell cage
        return (targetValue == num);
    }

    for (int j = 0; j < numberOfCellsInCage; j++) {
        int cellIndex = cage.placeHolders[j];
        int cellRow = (cellIndex / puzzleDimension); // Integer division
        int cellCol = (cellIndex % puzzleDimension);
        int cellValue = puzzleArray[cellRow][cellCol];
        if (cellValue == 0) {
            // Empty cell
            numberOfEmptyCellsInCage++;
        }
        else {
            // Update the tracking variables
            sum += cellValue;
            product *= cellValue;
            last = cellValue;
        }
    }

    if (numberOfEmptyCellsInCage == 1 && last != -1) {
        // The new number will be placed in the only empty spot in the cage.

        // For subtraction and division, there will only be two cells. Sort
        // their values onto 'low' and 'high'.
        int low = num < last ? num : last;
        int high = num + last - low;

        switch (currentOperator.charAt(0)) {
            case '+':
                if (targetValue != sum) {
                    // The new value would produce an incorrect sum
                    return false;
                }
                break;
            case '*':
                if (targetValue != product) {
                    // The new value would produce an incorrect product
                    reutrn false;
                }
                break;
            case '-':
                if (targetValue != high - low) {
                    // The new value would produce an incorrect difference
                    return false;
                }
                break;
            case '/':
                if (high % low != 0 || targetValue != high / low) {
                    // The new value would produce an incorrect quotient
                    return false;
                }
                break;
        }
    }

    return true;
} 
```

# android - Android 共享偏好设置

> ID：12780960
> 
> 赞同：2
> 
> 时间：2012-10-08T11:38:06.653
> 
> 标签：android, broadcastreceiver, sharedpreferences

我只想使用我的应用程序的一个活动中的 SharedPreferences 进行存储`String name ="Android"`，而后者我想在同一应用程序的 BroadcastReceiver 类中检索此字符串。

我什么都试过了。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:40:58.070

按照下面的代码。创建一个名为 PreferenceData 的类。在那个类中有两种方法。一个是将字符串存储到共享首选项中，另一个是获取共享首选项的字符串。

```
public class PreferenceData 
{
    static final String PREF_STORE = "store_temp";

    public static SharedPreferences getSharedPreferences(Context ctx) 
    {
        return PreferenceManager.getDefaultSharedPreferences(ctx);
    }

    public static void setTempString(Context ctx, String str) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putString(PREF_STORE, str);
        editor.commit();
    }

    public static String getTempString(Context ctx) 
    {
        return getSharedPreferences(ctx).getString(PREF_STORE, "");
    }
} 
```

**如何访问它？**

```
PreferenceData.getTempString(Pass Context);   // Get Shared Preference String
PreferenceData.setTempString(Pass Context,"Android") // Set String to Shared Preference 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:56:46.950

弄清楚您是否可以发布您厌倦的代码会更容易。

顺便一提，

```
 public abstract void onReceive (Context context, Intent intent) 
```

此方法将为您提供上下文实例。您可以使用它来获取偏好。

```
context.getPreferences(MODE_PRIVATE); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:48:19.897

如果以后不需要在代码中更改字符串，您可以将字符串放入硬编码的“Strigs”静态变量中，然后只读取它。声明和读取字符串会容易得多。如果您需要阅读并更改字符串“Android”，请使用此示例：[http ://saigeethamn.blogspot.ch/2009/10/shared-preferences-android-developer.html](http://saigeethamn.blogspot.ch/2009/10/shared-preferences-android-developer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:54:41.260

在 SharedPreferences 中设置一个值...

```
private final String PREF = "PREF";
private final String PREF_STRING = "PREF_STRING";

final SharedPreferences preferences = activity.getSharedPreferences(PREF, Activity.MODE_PRIVATE);        
preferences.edit().putString(PREF_STRING, "Android").commit(); 
```

用于从 SharedPreferences 中获取值...

```
preferences.getString(PREF_STRING, "Default value"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-08T11:46:06.637

试试这个代码

```
SharedPreferences prefs=PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    SharedPreferences.Editor editor = prefs.edit();
                    editor.putString("android", "your string"); // value to store

                    editor.commit(); 
```

现在在您的 Reciever 类中添加以下内容

```
SharedPreferences  mPrefs = getPreferences(MODE_PRIVATE);
    String android= mPrefs.getString("android", null); 
```

# c# - 在datagridview中禁用复制和粘贴

> ID：12780961
> 
> 赞同：2
> 
> 时间：2012-10-08T11:38:09.570
> 
> 标签：c#, c#-4.0, datagridview, keyboard-shortcuts, keyevent

我是.net 的初学者。这可能是一个愚蠢的问题。我想禁用`ctrl`+`c`和`ctrl`+`v`键盘快捷键。

在问这里之前，我尝试了这些代码[链接](http://msdn.microsoft.com/en-us/library/2dzbc92t.aspx)1和[链接 2](https://stackoverflow.com/q/11755747/1577396)（*不工作*）

```
private void dgvMain_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        this.dgvMain.ClipboardCopyMode = DataGridViewClipboardCopyMode.EnableWithoutHeaderText;
    }

    private void dgvMain_CellBeginEdit(object sender, DataGridViewCellCancelEventArgs e)
    {
        this.dgvMain.ClipboardCopyMode = DataGridViewClipboardCopyMode.Disable;
    } 
```

**并且**

```
this.dgvMain.ClipboardCopyMode = DataGridViewClipboardCopyMode.Disable; 
```

`dgvMain`是 datagridview
我可能在这里遗漏了一些东西。

编辑：
我已更改的 datagridview 的属性是：

```
AllowUserToResizeColumns      -- False
AllowUserToResizeRows         -- False
ClipboardCopyMode             -- disable
ColumnsHeadersHeightSizeMode  -- AutoSize
Dock                          -- Fill
ReadOnly                      -- True   
TabStop                       -- False 
```

请帮助
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:50:00.867

你没有拼出不工作的部分，所以我只能猜测你指的是网格的 TextBox 部分。

应该足够了，`ClipboardCopyMode = Disable`但是如果单元格的 TextBox 处于编辑模式，则该属性将被忽略。您必须自己禁用键和 ContextMenu：

例子：

```
public Form1()
{
  InitializeComponent();
  dgvMain.ClipboardCopyMode = DataGridViewClipboardCopyMode.Disable;
  dgvMain.EditingControlShowing += dgvMain_EditingControlShowing;
}

void dgvMain_EditingControlShowing(object sender,
                                   DataGridViewEditingControlShowingEventArgs e)
{
  TextBox tb = e.Control as TextBox;
  if (tb != null) {
    tb.ContextMenuStrip = new ContextMenuStrip();
    tb.KeyDown -= TextBox_KeyDown;
    tb.KeyDown += TextBox_KeyDown;
  }
}

void TextBox_KeyDown(object sender, KeyEventArgs e)
{
  if (e.Control && (e.KeyCode == Keys.C | e.KeyCode == Keys.V)) {
    e.SuppressKeyPress = true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-16T09:00:10.950

**你可以试试这个。**

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
            TextBox tb = e.Control as TextBox;
            tb.ShortcutsEnabled = false;
        } 
```

# php - POST 使用 cURL 不同的数据类型

> ID：12780962
> 
> 赞同：0
> 
> 时间：2012-10-08T11:38:09.413
> 
> 标签：php, xml, curl, kml

我生成了一些 xml（实际上是 google kml 文件）

```
$kml = array('<?xml version="1.0" encoding="UTF-8"?>');
$kml[] = '<kml xmlns="http://earth.google.com/kml/2.1">';
$kml[] = ' <Document>'; 
```

我把它串起来

```
$kmlOutput = implode("\n", $kml); //Join array elements with a string 
```

然后我做一个数组

```
$data = array('code' => 'somecode', 'xml' => $kmlOutput); 
```

然后我发送我的 cURL 数据

// 设置 cURL

```
$ch = curl_init($URL);
curl_setopt($ch, CURLOPT_POST, true);
//curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
curl_setopt($ch, CURLOPT_POSTFIELDS,$data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 8);
$output = curl_exec($ch);

/**
 * Check for some errors (omitted here)
 */
curl_close($ch); 
```

Upload.php 在另一台服务器上

```
/* MAIN CODE*/
if ( $_SERVER['REQUEST_METHOD'] === 'POST' ){
    print "\n\n";
    echo "DEBUG: Vardump Post"; 
    var_dump($_POST);
    echo "DEBUG:";
    var_dump($_FILES);

    if ($_FILES["file"]["type"] == "text/xml"  && ($_FILES["file"]["size"] < $maxSize) ){
        if ($_FILES["file"]["error"] > 0){
            echo "Error: (Return Code: " . $_FILES["file"]["error"] . ")<br />";
        } else {
            echo "Code: ".$_POST['key']. "<br />";
            echo "Upload: " . $_FILES["file"]["name"] . "<br />";
            echo "Type: " . $_FILES["file"]["type"] . "<br />";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
            echo "Temp Stored in: " . $_FILES["file"]["tmp_name"]. "<br />"; // temporary copied files disappears when the script ends

            move_uploaded_file($_FILES["file"]["tmp_name"],$dir . $_FILES["file"]["name"]);
            echo "Stored in: " . $dir . $_FILES["file"]["name"]; 
```

但是 var_dump($_FILES); 甚至 var_dump($_FILES["code"]); 返回空？

-我在这里错过了什么吗？- 我可以发送两种类型的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:43:53.127

你无法通过它，`$_FILES`因为你没有上传任何文件

要上传文件，您需要使用`@`符号后跟文件的位置

```
 $data = array('code' => 'somecode', 'xml' => "@". $PATH_TO_XML_FILE); 
```

也可以这样直接上传

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $kmlOutput);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/xml")); 
```

例子

```
$xml =   __DIR__ ."/Pages.xml"; //full part to XML
$data = array('code' => 'somecode', 'xml' => "@$xml");
$ch = curl_init($URL);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 8);
$output = curl_exec($ch);
echo $output ; 
```

在远程页面上

```
 var_dump($_POST,$_FILES); 
```

# android - 如何在 PdfViewerActivity 中查看本地 Pdf？

> ID：12780963
> 
> 赞同：2
> 
> 时间：2012-10-08T11:38:14.310
> 
> 标签：android, pdf

我正在使用这个[https://github.com/jblough/Android-Pdf-Viewer-Library](https://github.com/jblough/Android-Pdf-Viewer-Library) 我已经在我的资产文件夹中放置了 6 个 pdf，并尝试从我的 tabactivity 中加载它们，但是它在我'我确定pdf文件不是那么大：P

这是我正在使用的代码：

```
public class MainActivity extends TabActivity {

@Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    tabHost = getTabHost();

setupTabHost();

}
private void setupTabHost() {
addTab("page1", R.drawable.thumbnail1, PdfActivity.class, 1);
addTab("page2", R.drawable.thumbnail2, PdfActivity.class, 2);
addTab("page3", R.drawable.thumbnail3, PdfActivity.class, 3);
addTab("page4", R.drawable.thumbnail4, PdfActivity.class, 4);
addTab("page5", R.drawable.thumbnail5, PdfActivity.class, 5);
addTab("page6", R.drawable.thumbnail6, PdfActivity.class, 6);
    }

private void addTab(String tag, int drawableId, Class<?> c, int pagenumber) {
//create tab
TabHost.TabSpec spec = tabHost.newTabSpec(tag);

    //set layout
View thumbnail = LayoutInflater.from(this).inflate(R.layout.thumbnail, getTabWidget(), false);
ImageView icon = (ImageView) thumbnail.findViewById(R.id.thumbnail_icon);
icon.setImageResource(drawableId);
    spec.setIndicator(thumbnail);

//add intent
Intent intent = new Intent(this, c);
                       intent.putExtra(net.sf.andpdf.pdfviewer.PdfViewerActivity.EXTRA_PDFFILENAME, "file:///android_asset/page"+pagenumber+".pdf");
spec.setContent(intent);

//add tab
    tabHost.addTab(spec);
     }
}

public class PdfActivity extends PdfViewerActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
}

public int getPreviousPageImageResource() { return R.drawable.left_arrow; }
public int getNextPageImageResource() { return R.drawable.right_arrow; }
public int getZoomInImageResource() { return R.drawable.zoom_in; }
public int getZoomOutImageResource() { return R.drawable.zoom_out; }
public int getPdfPasswordLayoutResource() { return R.layout.pdf_file_password; }
public int getPdfPageNumberResource() { return R.layout.dialog_pagenumber; }
public int getPdfPasswordEditField() { return R.id.etPassword; }
public int getPdfPasswordOkButton() { return R.id.btOK; }
public int getPdfPasswordExitButton() { return R.id.btExit; }
public int getPdfPageNumberEditField() { return R.id.pagenum_edit; } 
```

}

我的日志中有这个，但我的资产文件夹中肯定有 page1.pdf！

```
10-09 16:55:00.223: I/PDFVIEWER(3650): onCreate
10-09 16:55:00.223: E/PDFVIEWER(3650): restoreInstance
10-09 16:55:00.308: D/dalvikvm(3650): GC_CONCURRENT freed 168K, 4% free 12979K/13383K, paused 10ms+2ms
10-09 16:55:00.373: I/PDFVIEWER(3650): Intent { cmp=xxxx (has extras) }
10-09 16:55:00.378: I/PDFVIEWER(3650): ST='file 'file:///android_asset/page1.pdf' not found'
10-09 16:55:00.383: I/PDFVIEWER(3650): ST='reading page 1, zoom:1.0'
10-09 16:55:00.403: D/dalvikvm(3650): GC_CONCURRENT freed 107K, 3% free 13358K/13703K, paused 2ms+14ms
10-09 16:55:00.438: D/dalvikvm(3650): GC_FOR_ALLOC freed 127K, 3% free 13626K/14023K, paused 13ms
10-09 16:55:00.573: D/dalvikvm(3650): GC_CONCURRENT freed 155K, 4% free 13963K/14407K, paused 2ms+24ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-23T12:40:47.040

你的文件路径有问题。`file://`从您的路径中删除，如下所示：

```
File pdfFile = new File(Environment.getExternalStorageDirectory(),"bell.pdf");
String path = pdfFile.getAbsolutePath();
                openPdfIntent(path);

    protected void openPdfIntent(String path) {
    // TODO Auto-generated method stub
     try {
            final Intent intent = new Intent(MainActivity.this, Second.class);
            intent.putExtra(PdfViewerActivity.EXTRA_PDFFILENAME,path);
            startActivity(intent);
        } catch (Exception e) {
            e.printStackTrace();
        }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-09-11T22:28:17.233

在我遇到类似问题时查看了源代码并亲自使用它之后，我能够通过在调用活动时使用 VIEW 意图来使其工作。此外，我必须为文件使用特定路径，我只能从`res\raw`文件夹中提取它。您也可以调整它以从`asset`文件夹中拉出，但我从来没有走那么远。

```
// This is wherever you are launching the activity from another activity
Intent pdfIntent = new Intent(this, PdfActivity.class);
pdfIntent.setAction(Intent.ACTION_VIEW);
pdfIntent.setDataAndType(Uri.parse("android.resource://com.your.package/raw/filename"), "application/pdf");

startActivity(pdfIntent); 
```

当您使用 VIEW 操作时，该类实际上会拉出文件并将其存储到临时目录中，以便它可以正确查看它。

# asp.net - 为什么将表单身份验证超时设置为长于会话超时？

> ID：12780965
> 
> 赞同：6
> 
> 时间：2012-10-08T11:38:23.547
> 
> 标签：asp.net, session, forms-authentication

我想我了解 ASP.NET 的“会话”和“表单身份验证”之间的区别。会话基本上用于存储特定于该用户会话的信息（可能是搜索过滤器的状态），表单身份验证用于记住他们应该有权访问某些内容。

我的问题是，为什么希望表单身份验证超时时间长于会话超时时间？事实上，默认情况下，web.config 将表单身份验证的超时设置为**更长**。

这是我看到的两种情况：

1.  会话在表单身份验证之前超时。用户丢失了搜索过滤器之类的东西，尽管他们仍然可以看到安全页面，但情况可能看起来有所不同，并且各种情况可能会重置。`null`此外，开发人员每次使用时都必须担心 Session 会变成它。
2.  表单身份验证在会话之前超时。用户必须重新输入用户名和密码，但他们会返回到他们所在的页面并且会话信息完好无损（除非这也已超时）。开发人员只需要担心 Session`null`在一个地方 - 在登录时 - 并且可以在必要时在那里初始化它。

为什么情景 1) 会更受欢迎？我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T13:47:31.013

问题是会话超时是一个比另一个更关键的设置。将身份验证超时设置为很长的时间不会影响 Web 应用程序在服务器资源方面的使用。但是，如果您将会话超时设置为较长时间，这可能会导致高风险下的内存问题。

你的说法是对的。作为开发人员，我更喜欢 2 而不是 1。但是有一种简单的方法可以处理会话到期。看看这个[SO question](https://stackoverflow.com/questions/859309/session-end-in-asp-net-mvc)。其中一个答案对会话过期有很好的解决方案。

```
protected void Session_Start(Object sender, EventArgs e)
{
    if (User.Identity.IsAuthenticated)
    {
        FormsAuthentication.SignOut();                         
        Response.Redirect("~/SessionEnd.aspx");
    }
} 
```

这样您就可以在一个地方处理过期的会话。

# php - 自定义会话处理程序不起作用

> ID：12780970
> 
> 赞同：0
> 
> 时间：2012-10-08T11:38:41.693
> 
> 标签：php, session

有人可以帮我让自定义会话处理程序工作吗？

这似乎成功了一半，在某些页面上它将会话写入数据库，但在其他页面上写入没有数据的会话。此外 print_r($_SESSION) 不再显示任何会话变量。

数据库表：

```
id - varchar(32 - NULL No - Default None - Primary Key
access - int(10) - unsigned - NULL Yes - Default NULL
data - text - NULL Yes - Default NULL 
```

前端控制器（定制框架）

```
require_once('../application/models/sessionfn.php');

session_set_save_handler('_open','_close','_read','_write','_destroy','_clean');
session_start(); 
```

在 sessionfn.php

```
function _open()
{
    $config = Configuration::getInstance();
    $host=$config->get("dbhost");
    $dbname=$config->get("db");

    $user=$config->get("dbuser");
    $pass=$config->get("dbpass");

    $dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass); 
}   

function _close()
{
    $dbh = null;
}

function _read($id)
{
    $config = Configuration::getInstance();
    $host=$config->get("dbhost");
    $dbname=$config->get("db");
    $user=$config->get("dbuser");
    $pass=$config->get("dbpass");

    $dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);
    $sth = $dbh->prepare("SELECT data FROM sessions WHERE id = '$id'");
    $sth->execute();
}

function _write($id, $data)
{
    $config = Configuration::getInstance();
    $host=$config->get("dbhost");
    $dbname=$config->get("db");
    $user=$config->get("dbuser");
    $pass=$config->get("dbpass");

    $dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);
    $access = time();
    $sth = $dbh->prepare("REPLACE INTO sessions VALUES ('$id', '$access', '$data')");
    $sth->execute();
}

function _destroy($id)
{   
    $config = Configuration::getInstance();
    $host=$config->get("dbhost");
    $dbname=$config->get("db");
    $user=$config->get("dbuser");
    $pass=$config->get("dbpass");

    $dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);
    $sth = $dbh->prepare("DELETE FROM sessions WHERE id = '$id'");
    $sth->execute();
}

function _clean($max)
{
$config = Configuration::getInstance();
$host=$config->get("dbhost");
    $dbname=$config->get("db");
    $user=$config->get("dbuser");
    $pass=$config->get("dbpass");

    $dbh = new PDO("mysql:host=$host;dbname=$dbname",$user,$pass);
    $old = time() - $max;
    $sth = $dbh->prepare("DELETE FROM sessions WHERE  access < '$old'");
    $sth->execute();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:49:33.803

当我不亲自动手时，很难调试您的代码。:-)

但这可能会有所帮助：如何调试您自己的会话处理程序？

设置一个可以将您的输出写入*文件*的系统。**使用您自己的会话处理程序时，不会显示任何错误。**

因此，向 sessionfn.php 添加一个名为：writeToLog($someStr) 的函数，该函数写入您自己的一些自定义日志文件。为其添加时间戳。追加到现有文件。

现在您可以检查函数调用的所有返回值。

只需清空您的日志文件，然后开始您的测试。在每一步检查日志文件。

设置起来工作量不大，你可以看到你所有的问题。

# ios - 如何一个接一个地运行 NSURLConnection 的次数

> ID：12780971
> 
> 赞同：0
> 
> 时间：2012-10-08T11:38:44.000
> 
> 标签：ios, xcode, nsurlconnection

我正在使用`NSURLConnection`连接请求从服务器获取 json 文件并将数据放入 dB。但是现在我必须在数组中发出多个请求，即一对一地向服务器发出请求，每次在完成解析并写入 dB 后请求。我完全困惑如何做到这一点。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:48:18.947

这很简单，将所有 NSURLRequests 放入一个队列（可以是一个简单的数组）。然后运行第一个请求（objectAtIndex:0，因为我们正在使用队列进行操作）。并在连接中完成方法执行以下操作：

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection;
{
    //Handle your db save
    //...
    //get next object
    if([self.queue count] > 0) {
        NSURLReuest *nextRequest = [self.queue objectAtIndex:0];
        [self.queue removeObjectAtIndex:0];
        NSURLConnection *con = [connectionWithRequest:nextRequest delegate:self];
        [con start];
    } else {...}
} 
```

请注意，上面的代码没有经过检查，只是写在我的脑海中......所以它可能包含一些语法错误......我想告诉你的是如何解决这个问题的原理

# java - JD-Eclipse 无法在我的 Eclipse 3.7 上安装

> ID：12780975
> 
> 赞同：13
> 
> 时间：2012-10-08T11:39:02.593
> 
> 标签：java, decompiler

我尝试安装 JD-Eclipse，我喜欢 JD 独立工具，但我需要在 Eclipse 上调试一些东西，我希望这能帮助我反编译一些我没有源代码的类。
p2 安装失败，出现以下错误：

> 收集要安装的项目时发生错误会话上下文是：（profile=e24e8d3741426860a79f62d4553b8181，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。找不到工件：osgi.bundle,jd.ide.eclipse,0.1.3。 [http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse_0.1.3.jar](http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse_0.1.3.jar) 找不到工件：osgi.bundle,jd.ide.eclipse.macosx.x86_64,0.1.3 . [http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse.macosx.x86_64_0.1.3.jar](http://java.decompiler.free.fr/jd-eclipse/update/plugins/jd.ide.eclipse.macosx.x86_64_0.1.3.jar)

您可以使用此 yoxos 配置文件安装与我完全相同的 eclipse：[https ://yoxos.eclipsesource.com/userdata/profile/e24e8d3741426860a79f62d4553b8181](https://yoxos.eclipsesource.com/userdata/profile/e24e8d3741426860a79f62d4553b8181)

知道我的问题是什么原因吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T07:46:07.790

也许这个更新站点现在不可用。您可以从镜像站点下载。 [http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip](http://jd.benow.ca/jd-eclipse/downloads/jdeclipse_update_site.zip)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T15:10:31.803

万一对某人有用-我在Win XP上遇到了这个问题-尝试了更新站点，然后从下载的存档中安装-两种情况下都存在原始海报的问题。分解 zip 然后使用“本地”选项指向分解后的存档目录允许插件成功安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:43:02.410

这两个答案都对我不起作用。我的解决方案是解压缩上一个答案中给出的文件，修改 site.xml 文件以指向我解压缩它的目录。

对于我的本地人来说，它如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
<site>
   <description url="C:\Users\username\Downloads\jdeclipse_update_site">
      Eclipse Update Site for Java Decompiler Plug-in
   </description>
   <feature url="features/jd.edi.eclipse.feature_0.1.3.jar" id="jd.edi.eclipse.feature" version="0.1.3">
      <category name="JD-Eclipse"/>
   </feature>
   <category-def name="JD-Eclipse" label="Java Decompiler Eclipse Plug-in"/>
</site> 
```

最后，转到您的 Eclipse，**帮助 -> 添加新软件**，将您的本地链接 (C:\Users\username\Downloads\jdeclipse_update_site) 粘贴到**Work with** input text，按**Enter**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T20:07:39.053

谢谢你的工作！只需澄清一点，确保帮助 -> 添加新软件 -> 添加 -> 本地，以选择 C ​​盘上的文件夹，否则您将收到错误“不支持架构”。

# iphone - iCloud 和原生 iPhone 应用同步教程

> ID：12780979
> 
> 赞同：1
> 
> 时间：2012-10-08T11:39:24.610
> 
> 标签：iphone, icloud

任何人都有一些关于 iCloud 和原生 iPhone 应用同步的好教程。请为我提供 iCloud 的链接或示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:58:25.637

从以下 url 下载示例代码：

[http://www.touch-code-magazine.com/add-an-icloud-photo-gallery-to-your-app-with-mticloudphotogallery-library/?utm_source=rss&utm_medium=rss&utm_campaign=add-an-icloud-photo -图库到您的应用程序与 mticloudphotogallery-library](http://www.touch-code-magazine.com/add-an-icloud-photo-gallery-to-your-app-with-mticloudphotogallery-library/?utm_source=rss&utm_medium=rss&utm_campaign=add-an-icloud-photo-gallery-to-your-app-with-mticloudphotogallery-library)

干杯:)

# xpages - XPages 寻呼机控件作为自定义控件

> ID：12780983
> 
> 赞同：0
> 
> 时间：2012-10-08T11:39:34.320
> 
> 标签：xpages

我的寻呼机控件变得复杂，下拉显示页码。等和其他自定义功能。我想将其转换为自定义控件，但发现将寻呼机放在打开部分刷新的自定义控件上会破坏寻呼机。有没有人注意到这个问题？任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:55:43.273

我在 Collaboration Today 项目中使用了 Pager 自定义控件。奇迹般有效。重要的是 for 属性，应该刷新的 componentID。我通过自定义属性将此 componentID 传递给我的自定义控件。它甚至可以替代视图的标准寻呼机。

# java - 比较器和 BST

> ID：12780989
> 
> 赞同：1
> 
> 时间：2012-10-08T11:39:48.890
> 
> 标签：java, binary-search-tree

我正在尝试创建一种方法，该方法允许我检查 BST 是否包含项目。这是我到目前为止所拥有的：

```
public boolean contains(Object item) {
    // YOUR CODE HERE

    //changes item to E so it can be used in the comparator
    E value1 = (E) item;

    if (root.value.equals(item)){
        return true;
    }

    comp.compare(value1,root.value);
    if(value1<root.value){
        if (left == null)
            return null;
        else
            return left.contains(item);
    }

    else if(item >= value){
        if (right == null)
            return null;
        else
            return right.contains(item);
    }
} 
```

这些是我的领域：

```
// Data fields
private BSTNode root;
private int count = 0;
private Comparator<E> comp;   // default comparator

/** Private class for the nodes.
 *  Has public fields so methods in BSTSet can access fields directly. 
 */
private class BSTNode {

    // Data fields

    public E value;
    public BSTNode left = null;
    public BSTNode right = null;

    // Constructor

    public BSTNode(E v) {
        value = v;
    }

}

public BSTSet() {
    comp = new ComparableComparator();      // Declared below
}

public BSTSet(Comparator <E> c) {
    comp = c;
} 
```

我的问题是如何修复我的 contains 方法以使其正常工作。到目前为止，它到达了 comp.compare(value1.root.value)) 下的行，并说 '<' 不能用于 E 类型的两个元素。我该如何解决这个问题，以便我可以继续运行比较器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:44:01.433

您的比较器返回一个 int。

如果这个int为0，那么两个对象的值是一样的，如果小于0，就等价于你的<，如果大于0，就等价于你的>。

您需要使用比较器调用的结果来检查是否应该遍历右子树或左子树。

另外，如果左/右分支为null，请**不要**返回null，返回false。这是算法的正确语义，如果没有左分支并且值小于当前根，则该项目不在树中，因此为假。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-20T11:21:36.647

你可以有如下的东西：

```
public boolean containsItem(int i) {
    Node<Integer> t = new Node<Integer>(i);
    Node<Integer> r = (Node<Integer>) root;
    while(r != null){
        int cmp = t.compareTo((Node<Integer>) r);
        if(cmp == 0)
            return true;
        if(cmp >0 ) r = r.getRight();
        else r = r.getLeft();
    }
    return false;
} 
```

您可以查看我的博客，了解如何为[BST](http://geekrai.blogspot.in/2014/04/binary-search-tree-implementation-in.html)实现 compareTo 方法。

# rest - 获取具有端口号的 url 的 https 连接

> ID：12780990
> 
> 赞同：1
> 
> 时间：2012-10-08T11:39:52.713
> 
> 标签：rest

我正在编写一个代码，用于从包含 80 以外的端口号的 url 获取信息。这是我的代码，我收到一个错误 HTTPS hostname wrong: should be at openconnection。我能得到解决方案吗？谢谢你。

```
HttpsURLConnection connection_ = null;  

    URL url = new URL("https://localhost:9080/xyz");

    connection_ = (HttpsURLConnection) url.openConnection();
    if (connection_ != null) {
        connection_.disconnect();
    }

 if (connection_.getResponseCode() != 200) {
    throw new IOException(connection_.getResponseMessage());
  }
  // Buffer the result into a string
  BufferedReader rd = new BufferedReader(
      new InputStreamReader(connection_.getInputStream()));
  StringBuilder sb = new StringBuilder();
  String line;
  while ((line = rd.readLine()) != null) {
    sb.append(line);
  }
  System.out.println(sb.toString());
  rd.close();

  connection_.disconnect();

} 
```

# windows-phone-7 - 我怎样才能找到页面恢复？

> ID：12780992
> 
> 赞同：0
> 
> 时间：2012-10-08T11:40:11.183
> 
> 标签：windows-phone-7, lifecycle

我在我的应用程序中使用页面，让我简单解释一下以供您理解。

我有页面`A,B`和`C`. 从 page `A -> page B`， page`A -> page C`是可能的。

只有当页面 A 从页面 B 而不是从页面 C 恢复时，我才需要执行操作。

我怎样才能使它成为可能，我能否将一些标志数据从页面 B 发送回页面`OnBackPressed`A。如果是这样，我在哪里可以听以获取页面 A 中的标志数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:35:06.733

在你的`App.xaml.cs`创造`public static PhoneApplicationPage PrevAppPage;`

在事件中初始化它`Page b`并在`Page C`构造函数和页面 A 上`onNavigatedTo`检查其值。并做好各自的工作。

或者您可以`enums`在页面构造函数中创建和初始化它们并检查`page A's onNavigatedTo`事件中的值。

任何一种方法都应该有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:52:33.693

您可以使用[QueryString](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationcontext.querystring%28v=vs.95%29.aspx)。从`B`到导航时`A`，将 QueryString 添加到 URL：

```
NavigationService.Navigate(new Uri("/PageA.xaml?PreviousPage=b", UriKind.Relative)); 
```

然后，在`A's` `OnNavigatedTo`方法中，您可以检查`PreviousPage`QueryString 的值，并在其值为 时做出相应的反应`b`。

```
protected override void OnNavigatedTo(NavigationEventArgs e)  
{
     base.OnNavigatedTo(e);

     string prevPage="";

     NavigationContext.QueryString.TryGetValue("PreviousPage", out prevPage);

     if(prevPage == "b")
     {
         //code to call if A is resuming from B
     }    
} 
```

**根据评论更新（将上面的代码留给其他人）**

关于`BackKey`. 首先，您可以使用上面的代码，然后从历史记录中删除该特定页面。您可以通过在上面的代码中使用[RemoveBackEntry](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigationservice.removebackentry%28v=vs.92%29.aspx)方法来做到这一点：

```
if(NavigationService.CanGoBack)
   NavigationService.RemoveBackEntry(); 
```

您可以在此处查看有关[Back Stack](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394012%28v=vs.92%29.aspx)的更多信息。

或者，您可以跟踪全局变量，`App.xaml.cs`例如，每当用户离开页面时更新该变量。然后，在 中`A`，您可以检查该变量并查看前一页是什么（并在需要时重置变量，以免意外再次读取它）。

# mysql - 如何更改已经创建的mysql中的事件

> ID：12780997
> 
> 赞同：4
> 
> 时间：2012-10-08T11:40:22.523
> 
> 标签：mysql, events

谁能给我语法来更改已经创建的事件

在这里，我使用以下语法创建了一个事件

```
create event _insert on schedule at '2012-10-08 17:09' + interval 10 second do insert into event_test values(now()); 
```

现在我想将间隔时间从 10 秒更改为 1 分钟

这是 event_test 表的表创建语法

```
DROP TABLE IF EXISTS `testing`.`event_test`;CREATE TABLE  `testing`.`event_test` (`current_date_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`current_date_time`)) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T11:43:18.663

只是一个简单的改变命令？

```
ALTER event _insert 
   ON SCHEDULE AT '2012-10-08 17:09' + INTERVAL 1 MINUTE -- or new date 
   DO INSERT INTO event_test VALUES(now()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T15:38:07.917

你可以使用这个：

```
'      ALTER EVENT event _insert
       ON SCHEDULE schedule 
       DO
       INSERT INTO event_test VALUES(now()); 
```