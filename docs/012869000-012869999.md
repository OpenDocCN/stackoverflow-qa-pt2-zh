# StackOverflow 问答 12869000-12869999

# android - ViewFlipper：移除除最后一个之外的所有子项时的伪影

> ID：12869002
> 
> 赞同：0
> 
> 时间：2012-10-13T01:00:40.420
> 
> 标签：android, animation, android-animation

尝试在`ViewFlipper`. 我想**按需**添加和删除视图，所以我必须调用而不是使用 XML `ViewGroup.addView()`。在某些时候，我想通过移除除最后一个之外的所有孩子来清理容器。这是一个演示：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        LinearLayout root = new LinearLayout(this);
        root.setOrientation(LinearLayout.VERTICAL);

        final ViewFlipper flipper = new ViewFlipper(this);

        Animation in = new TranslateAnimation(-200, 0, 0, 0);
        in.setDuration(300);
        Animation out = new TranslateAnimation(0, 200, 0, 0);
        out.setDuration(300);
        flipper.setInAnimation(in);
        flipper.setOutAnimation(out);

        // clean it up
        out.setAnimationListener(new AnimationListener(){

            @Override
            public void onAnimationEnd(Animation animation) {
                flipper.post(new Runnable(){
                    public void run() {
                        flipper.removeViews(0, flipper.getChildCount() - 1);
                    }
                });
            }

            @Override
            public void onAnimationRepeat(Animation animation) {}

            @Override
            public void onAnimationStart(Animation animation) {}
        });

        Button button = new Button(this);
        button.setText("Click me");
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                View a = makeView();
                flipper.addView(a);
                flipper.showNext();
            }
        });

        root.addView(button);
        root.addView(flipper);
        setContentView(root);
    }

    int i = 0;

    public View makeView() {
        TextView tv = new TextView(MainActivity.this);
        tv.setText("TextView#" + i++);
        tv.setTextSize(30);
        return tv;
    }
} 
```

有时我想删除除了最后一个添加的所有孩子，以节省内存，因为这些孩子将永远不会再被使用（也许我可以回收它们，但那是另一回事了）。我在动画侦听器中使用了一个简单的可运行计划`View.post()`，并且每 3 次就有一次工件。

Using`View.post(Runnable)`是**必需**的，因为如果您直接在动画侦听器中删除子项，`NullPointerException`则会被抛出，因为（至少在 Honeycomb+ 上，它使用显示列表来绘制层次结构）。

**注意**：我正在为 2.1+ 开发，所以 Honeycomb 动画包不适合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T09:04:03.960

出现这些“工件”是因为在您的情况下，您尝试删除除顶部视图之外的所有视图，从而使当前显示的子项的索引无序。`ViewFlipper`意志试图弥补这一点，但从表面上看并没有成功。但是你仍然可以做你想做的事，而不会出现这样的视觉问题：

```
flipper.post(new Runnable() {
    public void run() {

        if (flipper.getChildCount() < 4) // simulate a condition
            return;

        flipper.setInAnimation(null);
        flipper.setOutAnimation(null);

        while (flipper.getChildCount() > 1)
            flipper.removeViewAt(0);

        flipper.setInAnimation(in);
        flipper.setOutAnimation(out);

        assert  flipper.getChildCount() == 1;
    }
}); 
```

这应该只在`ViewFlipper`. 看看代码是否解决了问题。

# c - C 字节 - 去掉多余的零（让它变成一个字符？）

> ID：12869003
> 
> 赞同：0
> 
> 时间：2012-10-13T01:01:07.447
> 
> 标签：c, int, byte

嗨，我是处理字节和低级编程的新手。目前，我有一个 int（32 位）......所以它看起来像这样：

```
 0000000 10011011 00000000 00000000 
```

我试图只输出第三组 0 和 1（从右边数）。所以我会输出一个字符值（？）我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:03:12.820

您可以将这些位右移 16 位，然后使用 0x000000FF 清除除所需位之外的所有位。

```
int i =  0b0000000100110110000000000000000;
char c = (i >> 16) & 0xFF;
printf("%c\n", c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:20:37.580

```
int a = 1083899904;
    a = a >> 16;
    a = a % 256; 
```

a 现在包含 char 值。你只需要从这里投射它。

我正要发布这个，但你更快。

# c - 发生溢出，但 errno 不是 ERANGE。这是怎么发生的？

> ID：12869006
> 
> 赞同：5
> 
> 时间：2012-10-13T01:01:37.813
> 
> 标签：c, overflow, errno

我正在尝试使用`errno`来检测我是否执行了导致溢出的操作。然而，虽然我写了一个故意溢出的函数，但它`errno == ERANGE`是错误的。这里发生了什么？

这是代码：

```
#include <stdio.h>
#include <errno.h>

int main(int argc, char* argv[]) {
    unsigned char c = 0;
    int i;

    for (i = 0; i< 300; i++) {
        errno = 0;
        c = c + 1;
        if (errno == ERANGE) {// we have a range error
            printf("Overflow. c = %u\n", c);
        } else {
            printf("No error. c = %u\n", c);
        }
    }
    return 0;
} 
```

我希望这会在我们将 1 添加到 255 时出现溢出错误，但没有错误。这是（截断的）输出：

```
No error. c = 245
No error. c = 246
No error. c = 247
No error. c = 248
No error. c = 249
No error. c = 250
No error. c = 251
No error. c = 252
No error. c = 253
No error. c = 254
No error. c = 255
No error. c = 0
No error. c = 1
No error. c = 2
No error. c = 3
No error. c = 4
No error. c = 5
No error. c = 6
No error. c = 7
No error. c = 8
No error. c = 9 
```

有人可以解释为什么它没有检测到错误，以及我如何更改它或以其他方式制作一个可以检测我的值是否溢出的函数？注意：最终我想用`long int`s 来做这个，所以不可能简单地将它转换为更大的数据类型。

**编辑：**

从那以后，我发现了一些简单的函数来分别检测整数数据类型的加法和乘法溢出。它并不涵盖所有情况，但涵盖了很多情况。

乘法：

```
int multOK(long x, long y)
/* Returns 1 if x and y can multiply without overflow, 0 otherwise */
{
    long p = x*y;

    return !x || p/x == y;
} 
```

签名补充：

```
int addOK(long x, long y)
/* Returns 1 if x and y can add without overflow, 0 otherwise */
{
    long sum = x+y;
    int neg_over = (x < 0) && (y < 0) && (sum >= 0);
    int pos_over = (x >= 0) && (y >= 0) && (sum < 0);
    return !neg_over && !pos_over;
} 
```

无符号加法：

```
int unsignedAddOK(unsigned long x, unsigned long y)
/* Returns 1 if x and y can add without overflow, 0 otherwise */
{
    unsigned long sum = x+y;

    return sum > x && sum > y;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:17:53.470

除了其他人提出的观点之外`errno`，您正在使用`unsigned char`计数器。无符号类型被明确定义为环绕。换句话说，计算`c=255; c=c+1;`when`c`是 8-bit不是错误`unsigned char`：结果总是`0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T01:15:13.687

[Errno](http://linux.die.net/man/3/errno)不是处理器设置的变量，它仅用于系统调用和一些标准函数来报告错误。

`c < c + 1`除了在每次循环迭代中验证 if 之外，我不知道任何检测您所问内容的技术。

编辑：经过一番研究，我发现[了这个](http://en.wikipedia.org/wiki/Status_register)关于状态寄存器的维基百科，它是指示此类错误的 CPU 标志。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T01:22:47.437

据我了解，`errno`是由功能设置的。除非您创建自己的函数，否则它不会检测到附加溢出错误。您可以测试以查看结果是否小于您的操作数之一。

```
#include <stdio.h>
#include <errno.h>

int main(int argc, char* argv[]) {
    unsigned char c = 0, result = 0;
    int i;

    for (i = 0; i< 300; i++) {
        result = c + 1;
        if (result < c) {// we have a range error
            printf("Overflow. c = %u\n", result);
        } else {
            c = result;
            printf("No error. c = %u\n", c);
        }
    }
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T01:59:26.593

整数溢出是未定义的行为。未定义的行为不是可检测的条件。是终局。一旦你调用了未定义的行为，你就不能得出关于程序状态的任何结论。

除此之外，`errno`与算术表达式无关。它用于报告库函数的错误。

# linux - linux 命令删除一列，添加 id 列并添加另一个额外列 unix/linux awk

> ID：12869010
> 
> 赞同：1
> 
> 时间：2012-10-13T01:02:06.667
> 
> 标签：linux, awk

我有一个制表符分隔的文件，我想重新格式化它并删除原始文件，全部放在一行中。

这是一个制表符分隔的文件，我想例如：

删除给定的列（即第 3 列），在中间添加另一个 id 列（即，btw 列 1 和 2），其中每行是一个 id（例如 row1 是 id1，row2 是 id2 等），并且然后在末尾添加另一列文本（即，每一行都是 hello 的文本）。

全部修改一行，最后删除原文件，新文件与原文件相同。

例子：

**fnamein.txt**

```
rogelio\tdelgado\t3453434\tlas encinas\n
mario\tmoreno\t4563432\tcasinos\n
etc... 
```

**fname.out**

```
rogelio\tid1\tdelgado\t3453434\tlas encinas\taddress\n
mario\tid2\tmoreno\t4563432\tcasinos\taddress\n
etc... 
```

（如您所见，我在最后添加了 id 列 btw col 1 和 2，以及地址列（总是相同的单词））。

只是想知道在 linux 中是否有一种简单的方法可以做到这一点，我对 linux 命令的强大功能很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:38:42.580

另一种方法是使用 awk

```
awk -F'\t'  '{print $1, $2, $3}'   filename 
```

其中 -F 是字段分隔符。awk 会将文件分成各个字段，您需要做的就是打印这些字段。$1 是第一个字段等。要跳过一个字段，请忽略它。

```
awk '{print $1, $3}'  filename 
```

只会打印第一个和第三个字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:37:41.897

单程：

```
perl -i -pwe 's/^([^\t*])\t([^\t*])\t[^\t*]\t(.*)/$1\tid$.\t$2\t$3\taddress/;' FILENAME 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T02:52:58.530

好吧，unixrules 回答帮助我回答了整个问题：

awk -F'\t' 'BEGIN {OFS = FS} {id++}{print $1,"id"id,$2,$3,$4,"address"}' filein.txt > test.tmp && mv test.tmp filein 。文本文件。

这些答案正是我最初打算做的。

感谢你的帮助。

# spring - 通过扩展 SpringBeanAutowiringSupport 暴露的 Web 服务无法注入 @Autowired 依赖项

> ID：12869014
> 
> 赞同：4
> 
> 时间：2012-10-13T01:02:55.557
> 
> 标签：spring

通过扩展 SpringBeanAutowiringSupport 暴露的我的 Web 服务无法注入 @Autowired 依赖项。

Web 服务部署良好，我可以调用 @WebMethod，但由于注入失败，我得到了 NullPointerException。

我放入`System.out.println("Consructing XmlContactMapper...");`了 XmlContactMapper 的构造函数（我与 @Autowired 的依赖项之一）。当我部署 Web 服务时，我看到了调试行，因此我知道正在调用构造函数。但是由于某种原因，XmlContactMapper 的实例没有被注入到我的 ContactServiceImpl xmlMapper 属性中。

关于我做错了什么的任何想法？

使用...

*   Spring 3.0.5.RELEASE
*   玻璃鱼 3.1
*   jaxws-rt 2.1.4

## web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
         id="WebApp_ID" version="3.0" metadata-complete="true">

    <display-name>contact-sib</display-name>

    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>           
            classpath:/config/bean-config.xml
        </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>JaxWsEndpoint</servlet-name>
        <servlet-class>com.sun.xml.ws.transport.http.servlet.WSServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>JaxWsEndpoint</servlet-name>
        <url-pattern>/services/contact</url-pattern>
    </servlet-mapping>

</web-app> 
```

## 太阳jaxws.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime"
           version="2.0">

  <endpoint name="ContactService" 
            implementation="com.bb.sc.sib.contact.ContactServiceImpl" 
            url-pattern="/services/contact"/>

</endpoints> 
```

## bean-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context ="http://www.springframework.org/schema/context"
       xmlns:tx = "http://www.springframework.org/schema/tx"
       xmlns:p = "http://www.springframework.org/schema/p"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd
                           http://www.springframework.org/schema/tx
                           http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

    <context:component-scan base-package="com.bb.sc.sib.contact"/>
    <context:annotation-config/>

    <bean id="xmlMapper" class="com.bb.sc.sib.contact.XmlContactMapper"/>

</beans> 
```

## 网络服务

```
@WebService (endpointInterface="com.bb.sc.sei.contact.ContactService", serviceName="JaxWsContactService")
public class ContactServiceImpl extends SpringBeanAutowiringSupport implements ContactService {
    @Autowired
    private ContactComponent contactComponent;
    @Autowired
    private MapperFacade xmlMapper; 
```

## 日志记录

```
INFO: 10:56:40.073 [admin-thread-pool-4848(419)] DEBUG o.s.w.c.s.SpringBeanAutowiringSupport - Current WebApplicationContext is not available for processing of ContactServiceImpl: Make sure this class gets constructed in a Spring web application. Proceeding without injection. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T23:11:34.830

就像@Biji 建议的那样，我认为这可能是您的 ContactServiceImpl 与 ContactComponent 之间的加载顺序问题

通常，您需要扩展 SpringBeanAutowiringSupport 的原因是您有一些在 Spring 容器之外实例化的 bean，但您希望它通过 Spring 解决它的依赖关系。

由于您使用的是 Glassfish + Metro，您可以查看 Metro Spring 集成支持：http: [//jax-ws-commons.java.net/spring/](http://jax-ws-commons.java.net/spring/)

使用此路由，**com.sun.xml.ws.transport.http.servlet.WSSpringServlet**应该根据您的 Spring 上下文处理正确的加载顺序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T13:16:50.160

听众的顺序很重要。`ContextLoaderListener`必须在 之前定义`WSServletContextListener`。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:wsContext.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>com.sun.xml.ws.transport.http.servlet.WSServletContextListener</listener-class>
</listener> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-28T08:53:55.187

正如 Zeemee 已经说过的，监听器定义的顺序是至关重要的。另外我必须添加`<absolute-ordering/>`in `web.xml`，因为 Tomcat 8.0.26 本身不尊重订单。

# asp.net-mvc-4 - 从 ASP.Net MVC 4 Web 应用程序使用 ASP.Net Web API

> ID：12869024
> 
> 赞同：3
> 
> 时间：2012-10-13T01:04:16.233
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我理解并欣赏 ASP.Net MVC 4 Web API 为 Web 客户端带来的价值（与 Knockout、jQuery 结合使用时）。但是，我不确定这对于服务器端的内部 Web 服务是如何工作的。远离 Web API 不是一种选择。

我的要求是我从 jQuery 调用相同的服务，并且还调用我在 ASP.Net MVC 控制器（在 UI 上）中需要的一些调用，这些调用不应该被 JavaScript 客户端访问。

我偶然发现了 Dave 的这篇文章：[http](http://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/) ://encosia.com/rest-vs-rpc-in-asp-net-web-api-who-cares-it-does-both/ 。我知道我需要的是 RPC 样式（我习惯于 WCF）并且 Web API 支持它。

这是一个 Azure 应用程序，因此我可以在[本文](https://azure.microsoft.com/en-us/documentation/articles/active-directory-dotnet-how-to-use-access-control/)中使用 ACS 对其进行保护。

我可以通过限制对我的服务器 (URL) 的调用来保护我需要的调用（可能是一个单独的 API 控制器）。

1.  我假设我需要在前端控制器上使用 HttpClient 来使用信息。
2.  我能否将我的结果序列化回前端控制器上的实体？
3.  这种方法还有其他选择吗？
4.  最重要的是，这是一种可行的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T12:48:11.320

在您的情况下，我可以看到 ASP.NET Web API 位于表示层。由于 ASP.NET MVC 也在表示层，因此 MVC 调用 Web API 可能没有意义。

一个简单的方法（我一直提倡 KISS）是拥有一个可从 MVC 和 Web API 同等访问的业务层。所以不是 MVC 去 Web API 然后去 BL，它直接去。

但是，如果您正在设计一个封装上下文边界并且可以由客户端和 MVC 平等使用的 SOA Web API 外观，我建议您使用授权来控制谁可以访问什么。这可以是 OAuth 或任何其他方案。

# ruby - 反对在 RSpec 测试中使用 before、let 和 subject 的论点是什么？

> ID：12869026
> 
> 赞同：30
> 
> 时间：2012-10-13T01:05:16.120
> 
> 标签：ruby, testing, rspec

我刚开始编写 RSpec 测试，遇到了[thinkbot 的 Style Guide](https://github.com/thoughtbot/guides/tree/master/style)，它建议反对`let`、`let!`和（`before`以及`subject`其他）。

我还在其他一些地方阅读过类似的建议（包括关于 的旧[RSpec 文档](http://old.rspec.info/documentation/)警告`before(:all)`），但我似乎找不到反对它们的实际论点。

所以问题是：

*为什么我不应该在我的测试中使用这些方法？更好的方法是什么？*

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-13T03:54:06.763

有趣的问题；我也想了解更多的东西......所以挖了一下，这就是我发现的：

## 关于Thoughtbot风格指南的格言`let`等。

1.  在[早期版本的风格指南](https://github.com/thoughtbot/guides/blob/40090e22f298c380a51b958cb9d6454e1cd4f700/README.md)中，该声明还有更多内容：

    *避免使用它的、让、让！、指定、主题和其他 DSL。更喜欢明确性和一致性。*

2.  ThoughtBot 的人在 let name [let's not](http://robots.thoughtbot.com/lets-not)上发表了一篇文章。另请参阅[Github 提交评论对话的链接](https://github.com/thoughtbot/guides/commit/04b6e2ea8597ae46b24247b96da9b04645478fa0#commitcomment-1906596)

3.  在他们最近的一个播客中，ThoughtBot 的首席技术官[Joe Ferris](https://github.com/jferris)`let`解释了为什么使用and不是一个好主意`subject`。在接下来的 5 分钟内，从 27 分 37 秒开始收听名为“[其他东西很臭](http://robots.thoughtbot.com/post/29134076552/something-else-was-smellier)”的播客。

4.  [在较早的 ThoughtBot 博客文章](http://robots.thoughtbot.com/post/159805321/mystery-guest)中详细讨论了测试反模式“神秘客人”是为什么不使用`let`及其表亲的主要原因。

非常简洁地总结我对以上所有内容的理解：

> 使用`let`et al 很难一目了然地理解测试中发生的事情，并且需要人们花一些时间来建立联系。
> 
> 编写测试，使其易于理解，无需太多努力。
> 
> 此外，`let`在测试中自由使用会导致测试之间过度共享，并且会导致隐含性`common fixtures`——即，即使在不适用的情况下，也可以为每个正在编写的测试使用一个通用的固定装置。

## 之前（：全部）

反对使用的论点`before(:all)`是直截了当的。如[旧 rspec 文档](http://old.rspec.info/documentation/)中所述：

> 警告：通常不鼓励使用 before(:all) 和 after(:all)，因为它引入了示例之间的依赖关系。尽管如此，如果您知道自己在做什么，它可能对非常昂贵的操作很有用。

before(:all) 仅在 ExampleGroup 开始时执行一次。因此，可能会无意中在示例之间引入依赖关系。Thoughtbot 关于测试不容易理解的断言也适用于此。

总之，编写更好规范的建议似乎是：

1.  编写测试，使它们一目了然就容易理解。
2.  知道你在做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-16T16:12:07.677

我的想法...

1.  通过使用上下文，之前，让，让！测试服表现更好（跑得更快）
2.  通过使用这种结构，可以使用相同的继承思想创建共享上下文，因此可以覆盖特定情况下需要的内容
3.  强大的shouda matchers依赖于主题才能工作
4.  rails 特定类型的规范（控制器、模型）依赖于幕后的 let、before 和 context
5.  Let 是延迟加载，如果在特定测试中从未引用过它并不表示过度共享，这意味着即使它可以访问 100 个 let，但它只使用 1，其他 99 个根本不会被计算
6.  不仅是开发人员必须阅读的测试代码来理解测试套件，也是测试套件在运行时的输出，它对正在测试的内容提供了很多意义
7.  我同意 before(:all) 混淆了很多依赖项，但出于性能原因，我会在需要时使用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T05:10:38.753

*避免它的，让，让！，指定，之前和主题。*

真的吗？这从 RSpec DSL 下切掉了腿。还不如回到使用测试/单元。

至于他们为什么要避免`let`，Thoughtbot 说：“我们很快就会发布一篇博文，希望能解释一下。” 我会饶有兴趣地等待那些智慧的珍珠——但与此同时，对风格指南持保留态度。

*编辑*

前面提到的[博客文章](http://robots.thoughtbot.com/post/34709581001/lets-not)会引起一些有趣的阅读。

# jquery - 用于在文档加载后添加的 html 上创建事件处理程序的语法

> ID：12869032
> 
> 赞同：1
> 
> 时间：2012-10-13T01:06:07.647
> 
> 标签：jquery

在通过 jQuery 加载文档后，我将一些 html 添加到 DOM（以及对此的后续，但[与此示例中如何访问外部选择器](https://stackoverflow.com/questions/12868876/how-to-access-outside-selector-in-this-example)无关）。我想将“keyup”绑定到包装在“.item-vals”类中的输入元素。我的理解是，第一种语法应该将 jQuery 对该事件的测试限制为仅存在于类“.item-vals”中的元素。由于 '.item-vals' 会更具体，我认为它会比使用文档表现更好。有没有办法使第二种语法起作用？

```
// doesn't work
$('.item-vals').on('keyup','input',function(){

// does work
$(document).on('keyup','.item-vals input',function(){ 
```

thx 提前（对所有 jQuery 问题表示抱歉）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:14:26.940

`.live` is deprecated. Don't use it.

Instead of `document` use a container div so that the event doesn`t have to bubble to the top.

```
$('#MyContainerThatExistsOnPageLoad').on('keyup','.item-vals input',function(){ 
```

# java - 当我期待英文字符串时得到一个奇怪的输出

> ID：12869033
> 
> 赞同：0
> 
> 时间：2012-10-13T01:06:17.707
> 
> 标签：java, string, encoding, utf-8

下面的程序从一个名为的文件中读取文本，`tes.txt`并将纯英语字符串与整个文件中相同的乌尔都语字符串分开。它作为每个英语单词之后的印记。该文件*如下所示：（乌尔都语字符串跟随英文字符串）*

```
سٹیمپ ختم ہو جاتی ہے

suhail

سٹیمپ ختم ہو جاتی ہے  

gupta

سٹیمپ ختم ہو جاتی ہے

ghazal
سٹیمپ ختم ہو جاتی ہے 
```

* * *

在使用 windows 时，我编译了以下程序：

```
import java.io.*;

class checker {
public static void main(String args[]) {
try {
     File f = new File("C:/Users/user/Desktop/tes.txt");
     FileReader reader = new FileReader(f);
     char buffer[] = new char[1024];
     String text = "";
     while( reader.read(buffer) > 0 ) {
        text += buffer.toString();
     }

     String splits[] = text.split("سٹیمپ ختم ہو جاتی ہے");

     for(int i=0;i<splits.length;i++) {
        System.out.println(splits[i]);
     }  
} catch(Exception exc) {
   exc.printStackTrace();
  }
}
} 
```

* * *

作为`javac -encoding UTF-8 checker.java`。但是当我运行这个程序时，我得到的输出是`[C@19b49e6`。为什么是这样 ？它也只打印数组中的一个字符串。我还检查了缓冲区数组的长度，结果是一个。为什么是一个（文件中有多个字符串在将其与正则表达式分离后会进入缓冲区）？我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:25:01.453

您没有正确读取文件内容，这是读取内容的更好方法：

```
 String text = "";
 int readcount=0;
 while((readcount =  reader.read(buffer)) != -1 ) {
    text += new String(buffer, 0, readcount);
 }

 String[] splits = text.split("سٹیمپ ختم ہو جاتی ہے"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:29:17.953

您的错误是假设数组的 toString 为您提供了其元素的文本表示。它不是。你想要 java.util.Arrays.toString(array) 。

另外，假设文件中有 5 个字符；您将 5 个字符读入 1024 个字符的缓冲区，并将所有 1024 添加到您的字符串中。那是 1019 个空字符。我建议使用 BufferedReader.readLine() 代替将文件读入字符串甚至 Guava 的 Files.toString(File file, String charset) - [http://docs.guava-libraries.googlecode.com/git/javadoc/com /google/common/io/Files.html#toString(java.io.File,%20java.nio.charset.Charset](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html#toString(java.io.File,%20java.nio.charset.Charset) )

然而，为了解释如何修复你所拥有的，你只需要存储读取的字符数，并且只使用数组中的那么多字符。如果这还不够清楚，请告诉我，我会写一个代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:25:09.967

char buffer[] 未正确添加到字符串中，请更改此行。

```
 text += new String(buffer); 
```

*对不起我之前的回答我有点困了。

# javascript - 从扩展中读取 moz-icon 内容

> ID：12869037
> 
> 赞同：2
> 
> 时间：2012-10-13T01:08:10.497
> 
> 标签：javascript, firefox-addon

我正在编写一个 Firefox 扩展，并且需要阅读“moz-icon”（例如`moz-icon://.img?size=16`）URI 的内容。

我有以下代码：

```
const Cc = Components.classes; 
const Ci = Components.interfaces; 

var iOService = Cc["@mozilla.org/network/io-service;1"].getService(Ci.nsIIOService); 

var mozUri = iOService.newURI('moz-icon://.img?size=16', null, null); 
var channel = iOService.newChannelFromURI(mozUri); 
var inputStream = channel.open(), 
binaryInputStream =
    Cc["@mozilla.org/binaryinputstream;1"].createInstance(Ci["nsIBinaryInputStream"]); 

binaryInputStream.setInputStream(inputStream); 

var data = []; 
try { 
    while ((avail = binaryInputStream.available()) > 0) 
        data = data.concat(binaryInputStream.readByteArray(avail)); 
    binaryInputStream.close(); inputStream.close(); 
} catch(e) { 
} 
```

它适用于 Windows 和 Mac，但不适用于 Linux（Ubuntu 12.0 32 位）。尝试创建 newChannelFromURI 时失败（说它没有实现）。

除了从中创建一个频道之外，还有其他方法可以读取 moz-icon URI 的内容吗？

（我在 Mozillazine 上发布了同样的问题，如果我在那里得到答案，我会更新这个帖子，反之亦然）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:48:15.180

我很确定`newChannelFromURI()`不能抛出`NS_ERROR_NOT_IMPLEMENTED`- 当你尝试调用时很可能会抛出这个错误`channel.open()`。原因是并非所有通道都支持同步读取，同步读取也普遍不鼓励。此外，使用以下方法更容易[获取二进制数据`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data)：

```
var request = Cc["@mozilla.org/xmlextras/xmlhttprequest;1"]
                .createInstance(Ci.nsIXMLHttpRequest);
request.open("GET", "moz-icon://.img?size=16", true);
request.responseType = "arraybuffer";

request.addEventListener("load", function(event)
{
  var arrayBuffer = request.response;
  if (arrayBuffer) {
    var data = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));
    // Do something with the data here
  }
}, false);

request.send(null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-02T03:17:21.187

只是猜测相关性，但是当我在对象是鼠标事件的情况下执行“for prop in object”时，会为我提出 NS_ERROR_NOT_IMPLEMENTED 。由“for/in”生成的不存在的属性“end”和“windowHref”在“object[prop]”表达式中引发错误。

# php - 在邮件中发送上传文件的下载链接

> ID：12869040
> 
> 赞同：0
> 
> 时间：2012-10-13T01:08:52.930
> 
> 标签：php, javascript, jquery, ajax

我在我的网站中使用“ [jquery 文件上传插件](https://github.com/blueimp/jQuery-File-Upload)”。该插件为我提供了上传文件后下载文件的功能，这是代码

```
<td class="download">
                <a href="{%=file.url%}" class="btn modal-download" title="{%=file.name%}" rel="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">
                <i class="icon-download"></i>
                Download</a>
            </td> 
```

现在，我需要让用户可以使用下载的上传文件的 url 发送电子邮件，所以我使用了一个[花哨的联系表格](http://demo.tutorialzine.com/2009/09/fancy-contact-form/demo.php)来发送每个上传文件的电子邮件，这里是代码

```
<td class="mail">
                <div id="form-container">
    <h1>Fancy Contact Form</h1>
    <h2>Drop us a line and we will get back to you</h2>

    <form id="contact-form" name="contact-form" method="post" action="fancymail/submit.php">
      <table width="100%" border="0" cellspacing="0" cellpadding="5">
        <tr>
          <td width="15%"><label for="name">Name</label></td>
          <td width="70%"><input type="text" class="validate[required,custom[onlyLetter]]" name="name" id="name" value="<?=$_SESSION['post']['name']?>" /></td>
          <td width="15%" id="errOffset">&nbsp;</td>
        </tr>
        <tr>
          <td><label for="email">Email</label></td>
          <td><input type="text" class="validate[required,custom[email]]" name="email" id="email" value="<?=$_SESSION['post']['email']?>" /></td>
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td><label for="subject">Subject</label></td>
          <td width="70%"><input type="text" class="validate[required,custom[onlyLetter]]" name="subject" id="subject" value="<?=$_SESSION['post']['subject']?>" /></td>
          <!--<td><select name="subject" id="subject">
            <option value="" selected="selected"> - Choose -</option>
            <option value="Question">Question</option>
            <option value="Business proposal">Business proposal</option>
            <option value="Advertisement">Advertising</option>
            <option value="Complaint">Complaint</option>
          </select>          </td>-->
          <td>&nbsp;</td>
        </tr>
        <tr>
          <td valign="top"><label for="message">Message</label></td>
          <td><textarea name="message" id="message" class="validate[required]" cols="35" rows="5"><?=$_SESSION['post']['message'] ?></textarea></td>
          <!--efoula-->

          <!--efoula-->
          <td valign="top">&nbsp;</td>
        </tr>
        <tr>
          <td><label for="captcha"><?=$_SESSION['n1']?> + <?=$_SESSION['n2']?> =</label></td>
          <td><input type="text" class="validate[required,custom[onlyNumber]]" name="captcha" id="captcha" /></td>
          <td valign="top">&nbsp;</td>
        </tr>
        <tr>
          <td valign="top">&nbsp;</td>
          <td colspan="2"><input type="submit" name="button" id="button" value="Submit" />
          <input type="reset" name="button2" id="button2" value="Reset" />

          <?=$str?>          <img id="loading" src="img/ajax-load.gif" width="16" height="16" alt="loading" /></td>
        </tr>
      </table>
      </form>
      <?=$success?>
    </div>
            </td> 
```

还有使用 submit.php 文件发送邮件的精美联系表格，这里是代码

```
<?php

/* config start */

$emailAddress = 'email@example.com';

/* config end */
$url = "http://domain.com/files=" .$file_name ;

require "phpmailer/class.phpmailer.php";
require "../server/php/upload.class.php";

session_name("fancyform");
session_start();

foreach($_POST as $k=>$v)
{
    if(ini_get('magic_quotes_gpc'))
    $_POST[$k]=stripslashes($_POST[$k]);

    $_POST[$k]=htmlspecialchars(strip_tags($_POST[$k]));
}

$err = array();

if(!checkLen('name'))
    $err[]='The name field is too short or empty!';

if(!checkLen('email'))
    $err[]='The email field is too short or empty!';
else if(!checkEmail($_POST['email']))
    $err[]='Your email is not valid!';

if(!checkLen('subject'))
    $err[]='You have not selected a subject!';

if(!checkLen('message'))
    $err[]='The message field is too short or empty!';

if((int)$_POST['captcha'] != $_SESSION['expect'])
    $err[]='The captcha code is wrong!';

if(count($err))
{
    if($_POST['ajax'])
    {
        echo '-1';
    }

    else if($_SERVER['HTTP_REFERER'])
    {
        $_SESSION['errStr'] = implode('<br />',$err);
        $_SESSION['post']=$_POST;

        header('Location: '.$_SERVER['HTTP_REFERER']);
    }

    exit;
}

$msg=
'Name:  '.$_POST['name'].'<br />
Email:  '.$_POST['email'].'<br />
Download: '.$url.'<br />

Message:<br /><br />

'.nl2br($_POST['message']).'

';

$mail = new PHPMailer();
$mail->IsMail();

$mail->AddReplyTo($_POST['email'], $_POST['name']);
$mail->AddAddress($emailAddress);
$mail->SetFrom($_POST['email'], $_POST['name']);
$mail->Subject = "A new ".mb_strtolower($_POST['subject'])." from ".$_POST['name']." | contact form feedback";

$mail->MsgHTML($msg);

$mail->Send();

unset($_SESSION['post']);

if($_POST['ajax'])
{
    echo '1';
}
else
{
    $_SESSION['sent']=1;

    if($_SERVER['HTTP_REFERER'])
        header('Location: '.$_SERVER['HTTP_REFERER']);

    exit;
}

function checkLen($str,$len=2)
{
    return isset($_POST[$str]) && mb_strlen(strip_tags($_POST[$str]),"utf-8") > $len;
}

function checkEmail($str)
{
    return preg_match("/^[\.A-z0-9_\-\+]+[@][A-z0-9_\-]+([.][A-z0-9_\-]+)+[A-z]{1,4}$/", $str);
}

?> 
```

我现在尝试在邮件消息中发布上传文件的下载 url，我尝试将其添加到 ($msg= Download: '.$url.') 中，并设置 ($url = "http: //domain.com/files=" .$file_name ; )，但是当我收到我刚刚收到的邮件时（下载：/file="没有文件名"）。

**我需要在邮件中发布上传文件的完整 url。任何帮助？？？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:38:24.220

在提交.php`$url = "http://exemple.com/files=" .$file_name ;`

`$file_name`**未定义**；_ 您还需要从表单中发布此数据。

## 答案第 1 部分：File.URL 未传递，或显示给用户

假设它`<td class="download">`在您表单的同一页面中`<td class="mail">`

使用隐藏输入添加要在表单中使用的值

```
 <input type="hidden" name="url" value="{%=file.url%}" /> 
```

在 submit.php 更改

`Download: '.$url.'<br />`

为了

`Download: '.$_POST['url'].'<br />`

您的问题是在您的表单中您没有发布相关`{%=file.url%}`数据。

## 回答第 2 部分：$emailAddress = 'email@example.com';

$emailAddress 被分配了字符串'email@example.com' 用$_POST['email'] 覆盖$emailAddress 的值。（在此示例中，我覆盖了 $url 的值并创建了一个变量 $usrname 并为它们分配了 $_POST 等效项）

代替

```
$msg=
'Name:  '.$_POST['name'].'<br />
Email:  '.$_POST['email'].'<br />
Download: '.$url.'<br />

Message:<br /><br />

'.nl2br($_POST['message']).'

'; 
```

有了这个

```
$usrname = $_POST['name'];
$emailAddress = $_POST['email'];
$url = $_POST['url'];

$msg=
'Name:  '.$usrname.'<br />
Email:  '.$emailAddress.'<br />
Download: '.$url.'<br />

Message:<br /><br />

'.nl2br($_POST['message']).'

'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T08:28:55.973

最好检查您使用的变量是否存在，例如：

```
$url = isset($file_name) ? 'http://domain.com/files=' .$file_name : 'http://domain.com/files=no_img'; 
```

如果您在 URL 中获得“no_img”，则该变量`$file_name`不存在。也许它是在另一个 php 文件中定义的，您应该将它包含在该脚本中。

# javascript - d3.js force-collapsible with labels

> ID：12869041
> 
> 赞同：8
> 
> 时间：2012-10-13T01:09:07.703
> 
> 标签：javascript, svg, d3.js, force-layout

I am having some trouble trying to re-create

I've attempted to add the features of [http://bl.ocks.org/950642](http://bl.ocks.org/950642) to [http://mbostock.github.com/d3/talk/20111116/force-collapsible.html](http://mbostock.github.com/d3/talk/20111116/force-collapsible.html)

and tried to do:

```
node.enter().append("text")
      .attr("dx", 12)
      .attr("dy", ".35em")
      .text(function(d) { return d.name }); 
```

However that results in the circles disappearing and all the text is clumped in the top left corner.

Any ideas what I might be doing wrong? Here is my JS:

here is a jsfiddle: for some reason it isn't working though here because of the .json file I think...

[http://jsfiddle.net/vMw2N/5/](http://jsfiddle.net/vMw2N/5/)

```
var width = 960,
    height = 500,
    node,
    link,
    root;

var force = d3.layout.force()
    .on("tick", tick)
    .charge(function(d) { return d._children ? -d.size / 100 : -30; })
    .linkDistance(function(d) { return d.target._children ? 80 : 30; })
    .size([width, height]);

var vis = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height);

d3.json("../data/flare.json", function(json) {
  root = json;
  root.fixed = true;
  root.x = width / 2;
  root.y = height / 2;
  update();
});

function update() {
  var nodes = flatten(root),
      links = d3.layout.tree().links(nodes);

  // Restart the force layout.
  force
      .nodes(nodes)
      .links(links)
      .start();

  // Update the links…
  link = vis.selectAll("line.link")
      .data(links, function(d) { return d.target.id; });

  // Enter any new links.
  link.enter().insert("line", ".node")
      .attr("class", "link")
      .attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  // Exit any old links.
  link.exit().remove();

  // Update the nodes…
  node = vis.selectAll("circle.node")
      .data(nodes, function(d) { return d.id; })
      .style("fill", color);

  node.transition()
      .attr("r", function(d) { return d.children ? 4.5 : Math.sqrt(d.size) / 10; });

  // Enter any new nodes.
  node.enter().append("circle")
      .attr("class", "node")
      .attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; })
      .attr("r", function(d) { return d.children ? 4.5 : Math.sqrt(d.size) / 10; })
      .style("fill", color)
      .on("click", click)
      .call(force.drag);

    node.enter().append("text")
            .attr("class","node")
            .attr("cx", function(d) { return d.x; })
            .attr("cy", function(d) { return d.y; })
            .on("click",click)
            .text(function(d){return d.name})
            .call(force.drag);

  // Exit any old nodes.
  node.exit().remove();
}

function tick() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
}

// Color leaf nodes orange, and packages white or blue.
function color(d) {
  return d._children ? "#3182bd" : d.children ? "#c6dbef" : "#fd8d3c";
}

// Toggle children on click.
function click(d) {
  if (d.children) {
    d._children = d.children;
    d.children = null;
  } else {
    d.children = d._children;
    d._children = null;
  }
  update();
}

// Returns a list of all nodes under the root.
function flatten(root) {
  var nodes = [], i = 0;

  function recurse(node) {
    if (node.children) node.size = node.children.reduce(function(p, v) { return p + recurse(v); }, 0);
    if (!node.id) node.id = ++i;
    nodes.push(node);
    return node.size;
  }

  root.size = recurse(root);
  return nodes;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-22T05:33:20.313

[这](http://www.webashlar.com/Demos/D3/index.html)是两个图表的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:49:25.767

我似乎已经能够通过在`tick()`函数中添加转换调用来解决问题

```
node.attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

//node.attr("cx", function(d) { return d.x; });
//    .attr("cy", function(d) { return d.y; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:58:14.427

不是因为你打了2次电话`node.enter()`吗？在添加圆圈之前调用一次，在添加文本之前调用一次。

尝试通过以下方式替换该行`node.enter().append("text")`：

```
node.append("text") 
```

# php - How to make events permanent in fullcalendar

> ID：12869044
> 
> 赞同：1
> 
> 时间：2012-10-13T01:09:16.923
> 
> 标签：php, javascript, json, calendar, fullcalendar

How can I make the event changes in [FULLCALENDAR](http://arshaw.com/fullcalendar/) permanent?

I can only change the events when editing the code, but if i edit it on my browser like this example here [SELECTABLE](http://arshaw.com/js/fullcalendar-1.5.4/demos/selectable.html) then refresh all the edits I've made disappears, how can I make this changes permanent ? what methods can be done so that the changes I make are permanent, when i edit it from my website?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:34:18.087

When you (re)render the event you should set the option stick to true. [http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/](http://arshaw.com/fullcalendar/docs/event_rendering/renderEvent/) That will persist the event client side. If you want the events laters you should save them to db.

# sql-server-2008 - 层次查询sql server 2008

> ID：12869048
> 
> 赞同：1
> 
> 时间：2012-10-13T01:09:47.103
> 
> 标签：sql-server-2008

```
EmployeeId, Name, ManagerId
1,Mac Manager, null
2,Sue Supervisor, 1
3,Earl Employee, 2
4,Sam Supervisor, 1
5,Ella Employee, 4

Given: Employee Id = 3 
```

你能帮我用 sql 让员工和经理上链吗？

在这个例子中，结果将是

```
Earl
Sue
Mac 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T08:37:13.290

查看[使用公用表表达式的递归查询](http://msdn.microsoft.com/en-us/library/ms186243(v=sql.105).aspx?ppud=4)

```
declare @EmpID int = 3;

with C as
(
  select E.EmployeeId,
         E.Name,
         E.ManagerId
  from YourTable as E
  where E.EmployeeId = @EmpID
  union all
  select E.EmployeeId,
         E.Name,
         E.ManagerId
  from YourTable as E
    inner join C  
      on E.EmployeeId = C.ManagerId
)
select C.Name
from C 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/82395)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:21:49.950

```
declare @current int 
set @current = @empid
while @current is not null begin

   -- do something with it
   print @current

   set @current = (select ManagerId from table where EmployeeId = @current)
end 
```

# java - Updating JList forces a window focus

> ID：12869050
> 
> 赞同：0
> 
> 时间：2012-10-13T01:10:29.483
> 
> 标签：java, swing, focus, jlist, autofocus

I have a Java Swing app that I'm writing, that connects to my minecraft server and acts as administrative aid. It has a JList object in one of its panes that keeps track of which players are online. This is how I update the list:

```
public static void updatePlayerList(HashMap<String,String> players){
    playerListModel.clear(); //this is a DefaultListModel
    playerListModel.setSize(players.size());
    Object[] playerArray = players.keySet().toArray();
    for(int i = 0; i<players.size(); i++){
        playerListModel.set(i, playerArray[i]);
    } 
```

This works fine and dandy and I personally have zero issue with it on my PC. However, two of my moderators are having issues with it forcing focus, even away from other applications.

I'd prefer that it didnt force focus from other applications, Is there any way to prevent this JList from doing that?

# python - Place Python Output in HTML Widget

> ID：12869051
> 
> 赞同：0
> 
> 时间：2012-10-13T01:10:44.647
> 
> 标签：python, html, rss, widget, feedparser

This seems like a very simple question, so I will remove if it's a repeat. I just can't seem to find the answer.

I'm using the `feedparser` module to parse an RSS feed. I want to post the output to a widget on a site. I don't want the python script to write the whole page. I just want to be able to get the output to the web page. Can anyone just point me in the right direction?

Details:

I have a blog that is run separately from the page that I would like to post the RSS Feed on. I have the script to parse the blog and generate the info I want. I want to get the generated output into an `iframe` or `table` or the like on a static HTML page. The static page is entirely separate from the blog.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:25:54.577

我也会将我的评论粘贴到这里的答案中。

有很多方法可以解决，但我将首先关注设计决策问题。

为简单起见，创建两个页面。显示生成信息的第一页，没有生成的信息，只是样式和所有其他锦上添花。包括指向第二页的which，也就是生成的内容。

约翰的回答有一个很好的方法来解决手动运行脚本的问题：使用 cron。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:01:39.293

几个选项之一：我认为这可能是最快/最简单的......

将 python 脚本上传到服务器。让它在 webroot 下创建/更新一个公开可读的文件。编写一些 javascript 以将该页面加载到您的 html 页面中。

如果您想通过 cron 定期运行脚本来获得花哨的计划。

# c - #define issue if its called from within a if() block

> ID：12869052
> 
> 赞同：5
> 
> 时间：2012-10-13T01:11:07.187
> 
> 标签：c, c-preprocessor

I have function: `foo()`

I want to write a `#define` to put 'infront' of `foo()` (a shim I guess) to add debug to the front of `foo()`. So the `#define` should look this this:

```
 #define foo(dev) {                         \
      printk("%s: get %lx\n", (dev)->name);   \
      foo_orig(dev);                          \
   } 
```

And then I rename `foo()` to `foo_orig()`.

This works OK if `foo()` function is called in 'isolation' like this:

```
 foo(dev); 
```

BUT, if its called within an `if()` then it is a compile problem...

```
 if (something() && foo(dev)) {
     .. 
```

Have I explained the issue? and Is there a solution for this?

The problem is that I really need the shim as define because I need the code to live in the calling function rather than `foo()`. [The reason for this is because I need to dump out the EIP the the calling function for debug reasons (i.e. I need to know who is calling `foo()`].

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:17:50.687

AFAIK 逗号运算符应该可以工作：

```
#define foo(dev) (printk("%s: get %lx\n", (dev)->name), foo_orig(dev)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:18:37.000

我假设您使用的是 GCC，那么这应该会有所帮助：

```
#define foo(dev) ({                           \
      printk("%s: get %lx\n", (dev)->name);   \
      foo_orig(dev);                          \
   }) 
```

关键点是花括号周围的括号。

[GCC：表达式中的语句和声明](http://gcc.gnu.org/onlinedocs/gcc/Statement-Exprs.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T01:21:42.327

问题是如何`#define`工作。

在预处理阶段，编译器将用`foo`定义的文本替换任何出现的 。因此，您的代码将如下所示：

```
 // call to foo() -> valid
  printk("%s: get %lx\n", (dev)->name);
  foo_orig(dev);    

  // within a parenthesis - invalid 
  if (something() && printk("%s: get %lx\n", (dev)->name);
          foo_orig(dev);) { 
```

一种解决方案是使用真正的函数进行调试，像这样

```
foo_dbg(type *dev) {
   printk("%s: get %lx\n", (dev)->name);
   return foo_orig(dev);
}
#ifdef DEBUG
   #define foo(dev) foo_dbg(dev)
#else
   #define foo(dev) foo_orig(dev)
#endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T01:18:27.753

#define 就像进行搜索和替换。因此，您的“if”语句在编译时变为以下内容：

```
if (something() && { print(....); foo_orig(dev);}) {
} 
```

那应该解释编译器错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T01:18:37.720

使用逗号运算符：

```
#define foo(dev) (printk(blah, blah), foo_orig(dev)) 
```

使用 C99，您可以使用内联函数

```
static inline rtype foo (type *dev) { printk(blah, blah); return foo_orig(dev); } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T01:21:24.740

也许用逗号替换`;`你的分号，并删除大括号/方括号。`#define``,``{}`

或者，在您的`if`声明中，替换`foo(dev)`为`(foo)(dev)`.

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-13T01:18:25.133

> 原因是 b/ci 出于调试原因需要转储 EIP 调用函数（即我需要知道谁在调用 foo()

好吧，您可以编写一些程序集来查找堆栈上的返回地址；但实际上，大多数编译器已经有一个内置函数来解决这个需求；看到[这里](http://gcc.gnu.org/onlinedocs/gcc/Return-Address.html)的 GCC（对于 Clang 是一样的），[这里](http://msdn.microsoft.com/en-us/library/64ez38eh%28v=vs.80%29.aspx)是 VC++（在英特尔编译器上是一样的）。

只需将您的 shim 写入 real`foo`并使用`_ReturnAddress()`/`__builtin_return_address(0)`来获取函数的返回地址（即在`call`启动函数的指令之后的一条指令）。

# matlab - How to initiate IF statement if variable is only contained in matrix (matlab)

> ID：12869054
> 
> 赞同：0
> 
> 时间：2012-10-13T01:11:37.310
> 
> 标签：matlab, if-statement, matrix

I am looking to achieve something that seems fairly simple, just not sure how to implement ORs in an IF statement:

```
A = [4 6 7; 3 4 7; 8 7 1]
C = 6
if C is in first row of A 
(i.e. if row 1 contains 6, basically -- IF C = 4 or C=6 or C=7)    
    (then do this)
end 
```

Any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:21:21.547

所以

```
A(1,:) == C 
```

是一个开始。在您的情况下，它将返回一个 3 元素布尔数组，其中

```
ans(1) = 1 if A(1,1) == C, 0 otherwise
ans(2) = 1 if A(1,2) == C, 0 otherwise
ans(3) = 1 if A(1,3) == C, 0 otherwise 
```

从那里，你可以做类似的事情

```
if( sum(A(1,:) == C) )
# or
if( length(find(A(1,:) == C)) ) 
```

会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:23:04.913

```
 A = [4 6 7; 3 4 7; 8 7 1];
   C = 6;

   rowNum = 1;

   if (sum(A(rowNum,:) == C) ~= 0)
      do something
   end 
```

# typescript - Does TypeScript support TouchEvent?

> ID：12869055
> 
> 赞同：18
> 
> 时间：2012-10-13T01:11:43.513
> 
> 标签：typescript

**UPDATE**

> [TypeScript 1.5.3 added declarations for HTML Touch events to lib.d.ts](https://github.com/Microsoft/TypeScript/issues/1302)

I can see that it supports UIEvent, but it does not seem to have interfaces for touch events.

This code indicates that "TouchEvent does not exist in the current scope."

```
class Touchy {
    private _element:Element;

    constructor(theElement:Element) {
        this._element = theElement;

        theElement.addEventListener("touchstart", (theTouchEvent:TouchEvent) => alert("touchy"));
    }
} 
```

I can use UIEvent, but not TouchEvent. How would I handle TouchEvent's with TypeScript? Thanks.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T05:12:28.110

从 TypeScript 3.7.7 开始，在 lib.dom.d 中支持 TouchEvent，请参阅[TouchEvent](https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_dom_d_.touchevent.html) 仍然值得阅读 Touch Events W3C 规范以更全面地了解 TypeScript 声明。

原答案：谢谢你的建议。我查看了 2011 年 5 月 5 日的触控事件规范 W3C 工作草案，并从中创建了一组环境声明。有一个更新的候选推荐，但我认为这是在大多数浏览器中实际实现的。这似乎运作良好。

PS：底部的声明 var TouchEvent 不是 w3c 草案的一部分。它是对 UIEvent 的相同代码的改编，它是 TypeScript 附带的标准接口的一部分。

```
interface Touch {
    identifier:number;
    target:EventTarget;
    screenX:number;
    screenY:number;
    clientX:number;
    clientY:number;
    pageX:number;
    pageY:number;
};

interface TouchList {
    length:number;
    item (index:number):Touch;
    identifiedTouch(identifier:number):Touch;
};

interface TouchEvent extends UIEvent {
    touches:TouchList;
    targetTouches:TouchList;
    changedTouches:TouchList;
    altKey:bool;
    metaKey:bool;
    ctrlKey:bool;
    shiftKey:bool;
    initTouchEvent (type:string, canBubble:bool, cancelable:bool, view:AbstractView, detail:number, ctrlKey:bool, altKey:bool, shiftKey:bool, metaKey:bool, touches:TouchList, targetTouches:TouchList, changedTouches:TouchList);
};

declare var TouchEvent: {
    prototype: TouchEvent;
    new(): TouchEvent;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T03:48:11.847

您在这里有几个选择：

第一个选项：扩展 UIEvent 以在 TouchEvent 上拥有您期望的成员（并且仅在触摸事件侦听器中使用它们）：

```
interface UIEvent {
    targetTouches: { pageX: number; pageY: number; }[];
    // etc...
} 
```

方案二：定义自己的TouchEvent接口，绑定事件时添加类型断言

```
interface TouchEvent {
    (event: TouchEventArgs): void;
}

interface TouchEventArgs {
    targetTouches: { pageX: number; pageY: number; }[];
    // etc
}

 theElement.addEventListener("touchstart", <UIEvent>((theTouchEvent:TouchEvent) => alert("touchy"))); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-15T23:29:58.950

这是一个附录。此代码将类型事件处理程序添加到 HTMLElement。您可以在定义 TouchEvent 接口的代码之后添加它；

```
//
// add touch events to HTMLElement
//
interface HTMLElement extends Element, MSHTMLElementRangeExtensions, ElementCSSInlineStyle, MSEventAttachmentTarget, MSHTMLElementExtensions, MSNodeExtensions {
    ontouchstart: (ev: TouchEvent) => any;
    ontouchmove: (ev: TouchEvent) => any;
    ontouchend: (ev: TouchEvent) => any;
    ontouchcancel: (ev: TouchEvent) => any;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-26T16:19:17.540

**更新**

从 3.7.7 开始，Typescript 全面支持 TouchEvent 接口。

见[TouchEvent 接口](https://microsoft.github.io/PowerBI-JavaScript/interfaces/_node_modules_typedoc_node_modules_typescript_lib_lib_dom_d_.touchevent.html)

# performance - SQL Server 2008 x64 Express Batch Insert Throughput Performance to CLR 'Instead Of Insert' Trigger

> ID：12869062
> 
> 赞同：0
> 
> 时间：2012-10-13T01:12:54.117
> 
> 标签：performance, sql-server-2008, stored-procedures, jdbc, clr

I have a simple NO-OP CLR Trigger being fired on a six field table with schema:

```
 datetime (PK)
 char (PK)
 int (PK, FK)
 varchar(1)
 tinyint
 real 
```

which should be a total of 19 bytes / row inserted.

The FK in the above points to a table with schema:

```
 int (PK)
 nchar(10)
 ncahr(10)
 nchar(10)
 nchar(10) 
```

I am performing batch inserts using a prepared statement every 1000 rows. I am getting for 150K rows inserted an execution time of about 11s. This corresponds to a throughput of ~.24MB/s (150,000*19B / 11s). Why so slow? I am not even talking to the disk?

I know that my client side code doing the sending is much faster. If I comment out the:

```
 executeBatch() 
```

method in the client I get upwards of 5MB/s. What else is going on with the JDBC/ODBC connection and processing in SQL Server to make things so slow?

Is this really the throughput one can expect from SQL Server and an JDBC/ODBC connection in this case?

---EDIT---

The actual CLR code is very simple, literally an empty method:

```
 public class Triggers
 {
     [SqlTrigger(Name = "InsertHook", Target = ConfigConstants.TABLE_NAME, Event =   "INSTEAD OF INSERT")]
     public static void InsertHook()
     {
       //empty
     }
 } 
```

> No-op in T-SQL Stored Procedure Total Measured Time was:3475297036ns or 3.475297036sec INSERT COUNT:150000 0.783276657MB/s 43165.47 Rows/s
> 
> INSERTING NORMAL into SQL Server Total Measured Time was:4884190118ns or 4.884190118sec INSERT COUNT:150000 MB Sent:2.7179718017578125 0.556MB/s 30712.53 Rows/s

Sadly, I do not have control over the schemas I am working with here. I guess I am still shocked that even with one FK constraint that this is the best SQL Server can do?

In summary, if I had to rank the performance. It would be:

> 1) T-SQL NO-OP Instead of Trigger (Fastest) - 0.78MB/s
> 
> 2) Inserting Normal - 0.56MB/s
> 
> 3) CLR NO-OP Stored Procedure Instead of Trigger - .24MB/s

# c++ - 未解析的外部符号

> ID：12869064
> 
> 赞同：3
> 
> 时间：2012-10-13T01:13:23.493
> 
> 标签：c++

我正在开发一个需要鼠标输入（位置和左键单击）的小游戏。我有一个控制 GameScreen 的 GameManager 类，其中包括`d3d9.h d3dx9.h`和`dinput.h`. 在添加鼠标输入代码和`#include <dinput.h>`. 但是现在，我无法构建并面临

```
1>GameScreen.obj : error LNK2001: unresolved external symbol _GUID_SysMouse
1>GameScreen.obj : error LNK2001: unresolved external symbol _IID_IDirectInput8A
1>dinput8.lib(dilib1.obj) : error LNK2001: unresolved external symbol _GUID_ZAxis
1>dinput8.lib(dilib1.obj) : error LNK2001: unresolved external symbol _GUID_YAxis
1>dinput8.lib(dilib1.obj) : error LNK2001: unresolved external symbol _GUID_XAxis 
```

并且不确定是什么原因造成的。在我的链接器中，我有`d3d9.lib;d3dx9.lib;dinput8.lib;%(AdditionalDependencies)`附加依赖项，并且我确保所有这些文件都存在于 x86 DirectX 目录中。如果需要，我可以提供其他信息，我是 C++ 新手，所以我不确定共享相关信息的典型协议是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T01:18:05.050

尝试将库 dxguid.lib（可能还有 dinput8.lib）添加到链接器标志中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-13T03:26:11.620

转到项目-> 属性-> 链接器-> 输入-> 附加依赖项并添加“dxguid.lib”-> 应用。它对我有用。

# c# - Using normalized vectors to store heading

> ID：12869066
> 
> 赞同：1
> 
> 时间：2012-10-13T01:13:55.037
> 
> 标签：c#, vector, xna, game-physics

I'm making a simple game in C#/XNA. My actors store the direction in which they intend to go as a `Vector2`. At each update cycle, I normalize the heading (because of the way it's set can lead to different lengths) and add `heading*Speed` to position to move the actor.

This seems inelegant. Logically, a direction has no length, it is of unit length by definition. Practically, the constant normalization has trivial extraneous computational cost.

1.  Is there a `NormalizedVector2` in XNA?
2.  How do I go about creating one which is compatible with XNA's `Vector2` (ie can be added to it and so on)? Extend `Vector2` and override the `Length` property?
3.  Are there larger conceptual problems with how I am trying to accomplish what I am trying to accomplish?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:26:51.403

1.  不，唯一的二维向量`Vector2`在 XNA 中。
2.  你不能。由于`Vector2`是 a `struct`，因此您不能对其进行分类。但是，您可以创建自己的类型并提供将其*转换*`Vector2`为 a 的方法（通过创建一个新的`Vector2`）。

实际上，我怀疑您当前的方法（使用`Vector2`并仅调用[Normalize](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.normalize.aspx)可能是最好的方法。如果您真的担心很多调用，请使用使用[and作为参数](http://msdn.microsoft.com/en-us/library/bb198257.aspx)[的重载`ref``out`](http://msdn.microsoft.com/en-us/library/bb198257.aspx)，因为它的效率略高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:47:15.020

1.  不是我知道的
2.  如前所述，Vector 不能被子类化，但您可以创建一个 Direction 类来处理计算并且可以解析为 Vector2 或仅具有 Vector 属性。
3.  我只会使用一个单一的向量并使用一个矩阵来旋转它。在性能方面，它避免了通常是缓慢操作的除法。即使在逻辑方面，更常见的是将方向表示为向左 30°，而不是 x + y。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-13T12:14:19.723

我错过了什么吗？归一化向量只是 x + y 总和为 1 并指向一个方向的向量。它没有长度，就像任何向量一样。

您可以将归一化向量存储在相同类型的向量中。当然，当你需要改变某事的方向时，你需要更新它。

它在这里描述的一个相当简单的概念：http: [//msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.normalize.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.vector2.normalize.aspx)

# php - Using a PHP class which doesn't always exist

> ID：12869067
> 
> 赞同：0
> 
> 时间：2012-10-13T01:13:57.727
> 
> 标签：php, class

I'm fairly new to object orientated programming, so bear with me if I've missed something simple, or done something wrong.

I have a set up where the domains class can contain details on a domain name (such as name, expiry, creation date etc.), but can also have a $hosting variable which relates to the hosting account that the domain is tied with. However, not all domains are hosted and are just there waiting to be used, so the hosting object doesn't always exist.

In both domains and hosting I have functions to return the relevant details, so for example:

```
private $accountId;
private $name;
private $created;

public function getAccountId() {    return $this->accountId;        }
public function getName() {     return $this->name;     }
public function getCreated() {  return $this->created;  } 
```

So, if I wanted the hosting accounts id from within the domain object (called $domain) I could do:

```
$domain->getHosting()->getId(); 
```

Hopfully that makes sense!

If there is a hosting account, the ID is returned: `PHP Fatal error: Call to a member function getAccountId() on a non-object in /home/sites/.../file.php on line x`

Is there a way of checking if `$domain->getHosting()` exists to prevent this error?

Many Thanks in advance, and sorry if this is a simple error!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:21:40.403

实际上，您没有一种类型，而是两种：

```
class Domain {
   ....
}

class HostedDomain extends Domain {
   ...
} 
```

相应地编写您的代码。`HostedDomain`比 更具体一点`Domain`。它可以在任何`Domain`适合的地方以及一些额外的特殊地方使用。

然后，您可以检查每个域是否托管；

```
if ($domain instanceof HostedDomain) {
    ...
} 
```

请参阅[*对象继承*](http://php.net/manual/language.oop5.inheritance.php)和[*类型运算符*](http://php.net/manual/language.operators.type.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:16:00.020

您可以使用 PHP [method_exists](http://php.net/manual/en/function.method-exists.php)

```
 if(method_exists($domain,'getHosting')){ ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T01:19:59.020

或者，如果您真的想检查该类是否存在：

```
if (class_exists('Domain')) { ... } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T01:22:39.920

我的 PHP 有点生疏，但我相信`isset($hosting)`在域对象中会有所帮助，或者作为域类中的方法（例如 hasHost）来检查主机是否存在，或者只是`isset($domain->getHosting())`. 假设您在没有主机的情况下从未设置 $hosting，那么 isset 应该做您想做的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T01:17:19.457

只需在使用前检查 getHosting 是否存在

```
if (! $domain->getHosting()) {
   $value = $domain->getHosting()->getId();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T01:20:37.170

由于您的方法`getHosting()`返回一个对象，您应该将值存储到一个临时变量中，检查该变量是否为空，如果它不为空，您可以使用它：

```
$hosting = $domain->getHosting();
if (!empty($hosting)) {
    $id = $hosting->getId();
} 
```

您有几个选择，除了[`empty()`](http://php.net/empty). 您还可以使用[`isset()`](http://php.net/isset),[`is_object()`](http://php.net/is_object)或检查 if `$hosting != null`- all 应该为您提供在这种情况下所需的相同逻辑。

当然，这一切都假设该`getHosting()`方法存在于`Domain`类中（其他一些答案所解决的问题）。

# wordpress - custom search for holiday rental wordpress

> ID：12869070
> 
> 赞同：1
> 
> 时间：2012-10-13T01:14:25.410
> 
> 标签：wordpress, search, plugins

I'm new to WP. I have decided to start holiday rental website and the theme I purchased is not a real estate theme and therefore has only the basis wp search.

I was hoping some one can help me to add this feature to my site. the fields I'm looking for are:

check in date - via calendar check out date - via calendar no of people

I have not found a plugin either.

Thanks in advance

# web-applications - 在本地 weblogic 上部署 web 应用程序

> ID：12869073
> 
> 赞同：0
> 
> 时间：2012-10-13T01:14:58.013
> 
> 标签：web-applications, weblogic

我们的项目目前使用远程 weblogic 来部署我们的代码。我想在我的本地 weblogic 中做同样的事情。我该怎么做。我看过文章展示了 weblogic 创建，但没有看到如何推送 web 应用程序。我需要更改我的代码，重新启动本地服务器并查看我的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:31:15.413

您使用哪种 IDE？如果有的话？大多数 IDE 都能够将 Weblogic 作为服务器进行测试和部署。如果您不使用任何 IDE，我建议您使用免费的 Eclipse 或 Netbeans。

如果您不使用 IDE 并从命令行编译，请确保您部署的 .war 在 Weblogic 中全部展平，只需编译和替换 /WEB-INF 目录中相关位置的 .class 文件即可。

# php - PHP表单动作指导url

> ID：12869080
> 
> 赞同：0
> 
> 时间：2012-10-13T01:16:51.160
> 
> 标签：php, forms, redirect

我在一个文件“signin.php”中有一个表单，然后我所有的后端都在“php/signin_back.php”中

如果我有表格

```
<form action="php/signin_back.php" method="post">

<input type="text"/>
<!-- more stuff !-->

</form> 
```

当我登录时，表单会指向 php/signin_back.php 以处理所有好东西，但它有点滞后，所以它会在 1 秒内进入该页面，这意味着我能够读取 url 站点。有什么更好的方法可以让登录的用户看不到任何 URL 后端信息...如果我将所有后端 mysql 数据库内容与表单放在同一个文件中会更好吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:24:10.873

```
<?php

if(isset($_POST) && !empty($_POST))
{
    /* process stuff here */
}

?>

<!--
    old page here
--> 
```

这样的事情怎么样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:37:44.583

发布到同一页面，但如果帖子存在，则使用包含的控制器来处理 $_POST

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:19:19.687

你可以把它放在同一个文件中，或者放在你的目标文件中。

或使用 jquery 并使用 ajax 发布信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T02:05:39.890

如果我理解正确，您担心由于安全相关原因用户能够看到处理登录的页面的 url。这是错误的做法。

将用户传递到一个页面，然后立即重定向到另一个页面，希望所有这一切都发生得如此之快，以至于用户无法读取 url，这不是一种安全措施。

简而言之，您的工作是以某种方式保护您的脚本，无论用户是否能够看到 url 都无关紧要。如果他们愿意挖掘您的来源，他们无论如何都能看到它。

# c - 为什么比较空函数指针会导致“二进制操作数无效==”

> ID：12869081
> 
> 赞同：0
> 
> 时间：2012-10-13T01:17:08.023
> 
> 标签：c

有人可以向我解释为什么下面的代码会出现“二进制操作数无效==”错误吗？

```
typedef int (*func_t)(int);
#define NO_FUNC ((func_t) 0)
struct {
    const char *name;
    func_t func;
} table[] = { {"func1", NO_FUNC} };

if (table[0] == NO_FUNC) { // invalid operands to binary ==

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:18:47.507

你应该在结构中引用正确的成员：

```
if (table[0].func == NO_FUNC) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T01:22:20.483

`table[0]`是一个未命名的`struct`类型，并且`NO_FUNC`类型为`int (*)(int)`. 这两种类型不能相提并论。

相反，您可以使用：

```
if (table[0].func == NO_FUNC) 
```

# javascript - 将 iframe 移动到弹出窗口的前面

> ID：12869082
> 
> 赞同：0
> 
> 时间：2012-10-13T01:17:10.410
> 
> 标签：javascript, jquery, css

请查看 ww.gcprive.com/happenings

我正在尝试移动在您单击“注册”按钮时加载的 iframe，使其出现在弹出窗口的前面。

有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:43:36.117

我认为css是最简单的方法。

```
popup#first{
z-index:900;
}
popup#onerfirst{
z-index:901;
} 
```

否则，您实际上可以在注册点击时删除旧的弹出窗口。

```
$('#first').remove(); 
```

或者你可以使用`.fadeOut()`；而不是`.remove();`如果用户不创建帐户/登录，您需要再次显示弹出窗口

# java - 如何修复“在后台 /home/steven/.java/.userPrefs/prefs.xml 中删除的首选项文件”错误？

> ID：12869089
> 
> 赞同：11
> 
> 时间：2012-10-13T01:17:56.953
> 
> 标签：java, eclipse, ubuntu, preferences

对于我的大部分程序，我一直在 Windows 上进行编程，而且偏好没有问题。我刚刚启动了 Ubuntu 12.04 并将我的类加载到 Eclipse 中。在运行时，我在控制台中收到：

```
Oct 12, 2012 8:14:38 PM java.util.prefs.FileSystemPreferences$6 run
WARNING: Prefs file removed in background /home/steven/.java/.userPrefs/prefs.xml 
```

我知道这与`preferences`Ubuntu 上的系统有关，但几次`Google`搜索都没有找到解决方案。谁能帮我解决这样的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-17T08:51:39.213

可能您受到此错误的影响： [https ://bugs.openjdk.java.net/browse/JDK-8068373](https://bugs.openjdk.java.net/browse/JDK-8068373)

> (prefs) FileSystemPreferences 将 \0 写入 XML 存储，导致所有首选项丢失
> 
> 如果你打电话`prefs.put(key, "some string with \0 in it")`...
> 
> XML 编写器愉快地将 写入`\0`文件。我认为它逃脱了它，但正如已经提到的，这是没有意义的。稍后，当您尝试将其读回时，XML 文件无效。您会在日志中收到有关首选项文件无效的警告，并且您的所有首选项都会被清除。
> 
> 其他操作系统版本信息：
> 
> 发生在我们测试过的所有版本的 Linux 上。如果您故意使用此 PreferencesFactory，问题也可以在任何平台上重现。
> 
> 您还可以在 stderr 上获得以下输出：

> ```
> Dec 29, 2014 9:19:19 AM java.util.prefs.FileSystemPreferences$6 run 
> WARNING: Invalid preferences format in /Users/daniel/.java/.userPrefs/com/acme/testing/prefs.xml 
> Dec 29, 2014 9:19:19 AM java.util.prefs.FileSystemPreferences$6 run 
> WARNING: Prefs file removed in background /Users/daniel/.java/.userPrefs/com/acme/testing/prefs.xml 
> ```

**解决方案：**更新到 Java 9+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-06T13:54:56.850

正如[user11153](https://stackoverflow.com/users/1795426/user11153)最初写的那样，这似乎与空字符有关`\0`（或我最近做的一些其他 unicode 实验......）。这发生在我使用由 IntelliJ IDEA 构建和部署的 jdk 安装的 JShell 17.0.1 中。

我对保存在您的主目录中的文件进行了一些试验（对我来说`.java/.userPrefs/tool/JShell/IncorrectFormatPrefs.xml`，但在您的情况下应该是相似的），直到我发现有问题的行

```
<entry key="HISTORY_LINE_161" value="&quot;<ffff>&quot;.length()"/> 
```

在我删除此行并将文件重命名为`IncorrectFormatPrefs.xml`警告`prefs.xml`消失后。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-03-15T11:15:41.440

在 ubuntu 20.04 中运行 intellij idea 时我遇到了同样的问题。

首先，我在 /opt 目录中有 inttelij，然后在尝试启动时发生错误。“已删除首选文件...”

将 inttelij 放在主目录中，问题就解决了。

# haskell - 将列表拆分为可能的元组列表

> ID：12869097
> 
> 赞同：24
> 
> 时间：2012-10-13T01:18:39.753
> 
> 标签：haskell, tuples, list-comprehension

我需要将一个列表拆分为所有可能的元组的列表，但我不确定该怎么做。

例如：

```
pairs ["cat","dog","mouse"] 
```

应该导致：

`[("cat","dog"), ("cat","mouse"), ("dog","cat"), ("dog","mouse"), ("mouse","cat"), ("mouse","dog")]`

我能够形成前两个，但不确定如何获得其余的。

这是我到目前为止所拥有的：

```
pairs :: [a] -> [(a,a)]
pairs (x:xs) = [(m,n) | m <- [x], n <- xs] 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-10-13T10:14:50.593

*这个答案分为两部分。第一部分直接解决了这个问题。第二部分切线（字面意思）为了挖掘第一部分背后的数学：因此它可能被证明是有限兴趣的困难材料，但我认为一些极端主义者可能会喜欢它。*

到目前为止，我看到的答案巧妙地使用了列表推导或它们的一元等效项，但它们使用*相等*来排除重复项，因此需要额外的`Eq`约束。这是一个使所有元素对位于两个不同*位置*的解决方案。

首先，我编写了一个方便的函数，它用其他位置的元素列表装饰列表的每个元素：“选择一个并留下其他”的所有方法。每当使用列表来收集东西以进行选择而不替换时，它都非常有用，而且我发现我经常使用它。

```
picks :: [x] -> [(x, [x])]
picks [] = []
picks (x : xs) = (x, xs) : [(y, x : ys) | (y, ys) <- picks xs] 
```

请注意，`map fst . picks = id`结果的每个位置中的选定元素都是原始列表中该位置的元素：这就是我所说的“装饰”。

现在很容易选择两个，使用与其他答案相同的列表理解方法。但是，我们可以从它的 中选择，而不是从列表本身中选择第一个组件，`picks`同时获取第二个组件的候选列表。

```
allPairs :: [x] -> [(x, x)]
allPairs xs = [(y, z) | (y, ys) <- picks xs, z <- ys] 
```

拿下三倍同样容易，拿`picks`两次。

```
allTriples :: [x] -> [(x, x, x)]
allTriples ws = [(x, y, z) | (x, xs) <- picks ws, (y, ys) <- picks xs, z <- ys] 
```

为了统一起见，几乎很想使代码效率稍低一些，编写`(z, _) <- picks ys`而不是`z <- ys`两者兼而有之。

如果输入列表没有重复项，您将不会在输出中得到任何重复的元组，因为元组从不同位置获取它们的元素。然而，你会得到

```
Picks> allPairs ["cat", "cat"]
[("cat","cat"),("cat","cat")] 
```

为避免这种情况，请随意使用`allPairs . nub`，它会在选择之前删除重复项，并再次要求`Eq`元素类型的实例。

* * *

***仅适用于极端分子：容器、微积分、comonads 和combinatorics ahoy！***

`picks`是由微积分产生的更一般构造的一个实例。这是一个有趣的事实，对于任何给定的容器类型的函子`f`，它的数学导数 ∂f 表示 -`f`结构，其中一个元素被删除。例如，

```
newtype Trio x = Trio (x, x, x)   -- x^3 
```

有导数

```
data DTrio x = Left3 ((), x, x) | Mid3 (x, (), x) | Right3 (x, x, ())  -- 3*x^2 
```

许多操作可以与这种构造相关联。想象一下我们真的可以使用∂（我们可以使用类型族对其进行编码）。那么我们可以说

```
data InContext f x = (:-) {selected :: x, context :: ∂f x} 
```

给出一种由上下文装饰的选定元素。我们当然应该期望有手术

```
plug :: InContext f x -> f x   -- putting the element back in its place 
```

如果我们在其节点被视为子树容器的树中快速移动，则此`plug`操作会将我们移向根。

我们也应该期望`InContext f`成为一个comonad，与

```
counit :: InContext f x -> x
counit = selected 
```

突出选定的元素和

```
cojoin :: InContext f x -> InContext f (InContext f x) 
```

*用它的上下文装饰每个元素，展示你可以重新聚焦*的所有可能方式，选择不同的元素。

不可估量的彼得汉考克曾经向我建议，我们也应该期望能够“向下”移动（意思是“远离根”），收集所有可能的方法来从整个结构中选择上下文中的元素。

```
picks :: f x -> f (InContext f x) 
```

应该用它的上下文装饰`x`输入结构中的每个元素。`f`我们应该期待

```
fmap selected . picks = id 
```

这是我们之前的法律，但也

```
fmap plug (picks fx) = fmap (const fx) fx 
```

告诉我们每个装饰元素都是原始数据的分解。我们上面没有那条法律。我们有

```
picks :: [x] -> [(x, [x])] 
```

用一些不太像它的上下文的东西来装饰每个元素：仅仅从其他元素的列表中，你看不到“洞”在哪里。事实上，

```
∂[] x = ([x], [x]) 
```

将孔之前的元素列表与孔之后的元素分开。可以说，我应该写

```
picks :: [x] -> [(x, ([x], [x]))]
picks [] = []
picks (x : xs) = (x, ([], xs)) : [(y, (x : ys, ys')) | (y, (ys, ys')) <- picks xs] 
```

这当然也是一个非常有用的操作。

但真正发生的事情是相当明智的，只是轻微的滥用。在我最初编写的代码中，我在本地`[]`表示*有限包*或*无序列表*。包是没有特定位置概念的列表，因此如果您选择一个元素，它的上下文就是其余元素的包。确实

```
∂Bag = Bag   -- really? why? 
```

所以正确的概念`picks`确实是

```
picks :: Bag x -> Bag (x, Bag x) 
```

代表`Bag`，`[]`这就是我们所拥有的。此外，对于袋子来说，`plug`是公正的`(:)`，并且直到袋子相等（即排列），第二个定律`picks` *确实*成立。

另一种看待包包的方式是作为幂级数。袋子是任何大小的元组的选择，所有可能的排列（*n!*用于大小*n*）被识别。所以我们可以把它写成一个乘以阶乘的幂的大总和，因为你必须除以 x^n 除以 n！说明每个 n! 您可以选择 x 的订单会为您提供相同的包。

```
 Bag x = 1 + x + x^2/2! + x^3/3! + ... 
```

所以

```
∂Bag x = 0 + 1 + x      + x^2/2! + ... 
```

横向移动系列。事实上，你很可能已经认识到 for 的幂级数`Bag`是 for `exp`(或*e* ^x) 的幂级数，它以其自身的导数而闻名。

所以，呸！你去吧。由指数函数的数据类型解释自然产生的操作，作为它自己的导数，是用于解决基于无替换选择的问题的便捷工具包。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-13T01:27:08.210

您可以使用列表推导：

```
allpairs :: Eq a => [a] -> [(a,a)]
allpairs xs = [ (x1,x2) | x1 <- xs, x2 <- xs, x1 /= x2 ] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T01:20:37.397

我的方法，这与其他人的方法有些相似。它不需要`Eq`.

```
allpairs :: [t] -> [(t,t)]
allpairs [] = []
allpairs [_] = []
allpairs (x:xs) = concatMap (\y -> [(x,y),(y,x)]) xs ++ allpairs xs 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T07:30:55.147

另一种可能性是使用一元符号：

```
pairs :: (Eq a) => [a] -> [(a,a)]
pairs l = do
    x <- l
    y <- l
    guard (x /= y)
    return (x, y) 
```

（这个定义最一般的类型`pairs`是，`(MonadPlus m, Eq a) => m a -> m (a,a)`但我相信没有`MonadPlus`其他`[]`的实例是有意义的。）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-13T17:26:34.000

```
import Control.Applicative

pairs xs = filter (uncurry (/=)) $ (,) <$> xs <*> xs 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-14T15:52:50.320

```
pairs = (filter.uncurry) (/=) . (join.liftA2) (,) 
```

# php - Ajax 到同一页面发送空值

> ID：12869101
> 
> 赞同：1
> 
> 时间：2012-10-13T01:19:44.883
> 
> 标签：php, jquery, html, ajax

我的页面上有一个表格：

```
<form id="extended-search" >
<div class="input-container">
<select class="select" name="sex" id="sex">
<option value="0">All</option>
<option value="1">M</option>
<option value="2">F</option>
</select>
</div>
<input type = "button" class="searchButton" value = "Show" onClick="submitSearch();">
<img id="loading" src="img/ajax-loader.gif" alt="working.." />
</form> 
```

和同一页面上的 jQuery 代码：

```
function submitSearch() {
        var submitSearchData = jQuery('#extended-search').serialize();
        var selectedValue='<?php echo $_POST['sex'];?>' ;
        jQuery.ajax({
            type: "POST",
            data: submitSearchData,
            url: "feed.php",
            success: function () {
            alert(submitSearchData);
            alert(selectedValue);
            }
        });
    } 
```

一切正常（第一个警报返回，例如，sex=1，但第二个是空的）很好，但是`$_POST['sex']`是空的。我一直在尝试：

要使用：

```
jQuery(document).ready(function(){

    jQuery('.searchButton').click(function(){            
        submitSearch();
    });
}); 
```

要删除：`url: "feed.php",`从 AJAX。

制作：`data: {sex: submitSearchData},`

`dataType`在 AJAX 中添加和更改。

但一切还是一样。`$_POST['sex']`仍然是空的。如何`$_POST var($_POST['sex'])`在同一页面上通过 AJAX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:26:33.227

使用此代码获取所选选项

```
var selectedValue=$('#sex').val(); 
```

因为您没有提交表单，因此您没有获得`$_POST['sex']`价值。您必须使用`jquery`or`jaavscript`来获取当前选择的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:32:27.533

这一行：

```
var selectedValue='<?php echo $_POST['sex'];?>'; 
```

没有做你似乎期望它做的事情。该`submitSearch()`函数仅在单击按钮时被调用（两次，但稍后会更多）。当您`POST`使用 PHP 时，JavaScript 不会被执行（因为没有点击事件）并且当您的 JavaScript 被调用时，`$_POST['sex']`没有设置任何内容。

您可以像这样在 JavaScript 中获取 PHP 返回的内容：

```
jQuery.ajax({
    type: "POST",
    data: submitSearchData,
    url: "feed.php",
    success: function(data) {
        alert("response from PHP: " + data);
    }
}); 
```

因此，如果您的 feed.php 看起来像这样：

```
<?php 
if(isset($_POST['sex'])):
    switch ($_POST['sex']) {
        case 0:
            echo "You didn't select anything";
            break;
        case 1:
            echo "You selected male";
            break;
        case 2:
            echo "You selected female";
            break;
    }
else:
?>
// all your HTML
<?php endif; ?> 
```

然后`alert`将返回`response from PHP: You selected male`（或`You didn't select anything`或`You selected female`），具体取决于选择的内容。

由于您已经在`<head>`HTML 中使用 jQuery 将 click 绑定到您的按钮，因此应该只有：

```
<input type = "button" class="searchButton" value = "Show" /> 
```

否则它会调用`submitSearch()`两次。

# lua - Lua获取数字类型

> ID：12869107
> 
> 赞同：0
> 
> 时间：2012-10-13T01:20:47.877
> 
> 标签：lua

在 Lua 中，对任何数字使用 type 函数总是返回“数字”。是否有一个函数可以告诉您 Lua 解释器是否使用 32 位浮点数、64 位双精度数、整数或其他数字类型？

我试着写一个这样的函数：

```
function numbertype()
  local rational = 5 / 2

  if rational == 2 then
    -- equals 2
    return 'int'
  else
    -- about 2.5
    return 'double' -- but could it be a 32 bit float or something else?
  end
end

print(numbertype()) 
```

它还不能检测浮点数、双精度数和未知类型之间的区别。在 Lua 的解释器中，如何查询 Lua 的数字类型是否等同于 int、float 或 double？我希望它在纯 Lua 中工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T01:55:33.200

Pure Lua 无法从解释器那里询问这些事情。由于解释器使用不同类型的能力是非常自由的（你可以选择任何浮点或整数类型），将其暴露给 Lua 的唯一方法是让解释器编码以预测每种可能的数字类型它可以编译。

一般来说，你不应该费心去关心。使用双精度以外的应用程序充其量是很少见的。即使是不得不处理 ARM 及其糟糕的浮点数学的 LuaJIT，仍然隐藏其有效使用整数数学作为优化的能力；Lua 代码无法区分。

这是应该的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:33:58.293

根据[Lua 5.1 Reference Manual](http://www.lua.org/manual/5.1/manual.html#2.2)，数字只是双精度浮点数。要使用另一种类型，Lua 必须使用修改后的`luaconf.h`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T08:42:38.887

也许您可以使用以下解决方法。计算数字%1。如果余数为 0，则它很可能是整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T00:06:17.020

从 catwell 评论中的有用资源中，我编写了一个函数，该函数可以根据字节码标头返回数字类型。该函数很有用，但**绝不应该使用**它，因为它只适用于特定的解释器。它需要为 lua 5.2 或 luajit**完全重写**，这给代码重用带来了不必要的负担。

相反，lua 脚本应该独立于所使用的解释器或数字类型来编写。

为了完整起见，这里是函数：

```
-- only work in Lua 5.1
function numbertype()
  local headertypes = {
    ['\4\1'] = 'int32',
    ['\8\1'] = 'int64',
    ['\4\0'] = 'float32',
    ['\8\0'] = 'float64'}

  -- returns nil if the type is something else
  return headertypes[string.dump(function () end):sub(11,12)]
end 
```

# php - “裁剪”图像以适应容器尽可能接近所需大小而不会丢失比例

> ID：12869109
> 
> 赞同：0
> 
> 时间：2012-10-13T01:21:08.093
> 
> 标签：php, css, image, resize

这是我的困境。我有一个 315x210 像素的盒子，以及一堆各种随机尺寸的图像，一些具有疯狂的宽度/高度比，例如 210:1，而另一些则具有诸如 2:3 之类的比例。

我正在尝试将这些图像嵌入到盒子中，并**让它们尽可能接近 315x210 像素，而不会弄乱纵横比。**

我也不想使用缩略图，所以我嵌入了原始图像，并使用 php 计算宽度/高度并使用 css 隐藏溢出。

我的问题是我碰壁了，想不出更有效的方法来做到这一点。我目前的方法一开始并不完全有效，因此感谢您提供任何帮助。

第一个 if/while 在一定程度上可以正常工作，但是当我做第二个 if/while 时我意识到我正在做的事情将导致服务器崩溃的死循环。因此，第二个 if 从未真正完成，所以我不希望它起作用。它只是在那里展示我的概念。

我对全新的想法持开放态度，但我所要求的只是无论它是什么都不涉及创建和缩略图。我希望原始图像是嵌入的图像。

```
 if($width_orig <= 315 && $height_orig <= 210){
        while($newWidth <= 315 || $newHeight <= 210){
            $newWidth = round($newWidth*1.2);
            $newHeight = round($newHeight*1.2);
        }
    }
    //This one was never intended to work. It's just for example.
    else if($width_orig >= 315 && $height_orig >= 210){
        while($newWidth >= 315 || $newHeight >= 210){
            $newWidth = round($newWidth*1.2);
            $newHeight = round($newHeight*1.2);
        }
    }
    else
    {
        $newWidth = 315;
        $newHeight = 210;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:38:28.697

你可以试试

```
$imageHeight = 500;
$imageWidth = 600;

$maxHeight = 315;
$maxWidth = 210;

$max = ($maxWidth > $maxHeight) ? $maxWidth : $maxHeight;
$ratio = max($imageWidth, $imageHeight) / $max;

$ratio = max($ratio, 1.0);

$newHeight = ceil($maxHeight / $ratio);
$newWidth = ceil($imageWidth / $ratio);

var_dump("Height From: $imageHeight -> $newHeight", "Width From : $imageWidth  -> $newWidth " ); 
```

输出

```
string 'Height From: 500 -> 166' (length=18)
string 'Width  From: 600 -> 315' (length=20) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:33:30.650

好吧，您可以使用除法，而不是迭代使其在小图像上变大，例如

```
if($width_orig <= 315 && $height_orig <= 210){
    $ratio = $width_orig/$height_orig;
    if($ratio > 1.5){ //wider than the desired ratio
        $multby = 315 / $width_orig;
    } else {
        $multby = 315 / $height_orig;
    }
     $newWidth = round($newWidth*$multby)
     $newHeight = round($newHeight*$multby)
} 
```

为了变得更小，即在一维或两个维度上比盒子大的图像，我想你会把它居中，但它可能在很多时候看起来都不对。您可以使用与上面相同的代码，只需删除外部 if 语句，因为您打算隐藏溢出。你总是想填满盒子吗？如果是这样，为什么不像这样删除它？

```
$ratio = $width_orig/$height_orig;
if($ratio > 1.5){ //wider than the desired ratio
    $multby = 315 / $width_orig;//won't always be greater than 1 without the outside loop
} else {
    $multby = 315 / $height_orig;
}
 $newWidth = round($newWidth*$multby)
 $newHeight = round($newHeight*$multby) 
```

# java - Eclipse 无法识别我的源代码中的循环

> ID：12869111
> 
> 赞同：1
> 
> 时间：2012-10-13T01:21:21.143
> 
> 标签：java, eclipse

我正在学习计算机科学课程，并且在 Eclipse 中开发程序时遇到了循环问题。我花了很尴尬的几个小时才走到这一步。

这个家庭作业要求我的前三间房子的程序中的动画汽车从前三间房子的右侧行驶到左侧，经过房子的前面。下两间房子一定有汽车从左到右行驶，从房子后面经过。

当我按原样运行程序时，汽车最初并没有按应有的方式出现，当它们出现时，它们会在整个屏幕上移动。这些汽车都在向适当的方向移动，但最初并没有在应该出现的时候出现，也没有在应该出现的地方停下来。

我意识到程序没有识别我的汽车动画循环。我不明白为什么会这样——更不用说如何解决问题了。

这是我从 Eclipse 复制的代码：

```
import java.awt.*;

import graphics.*;

import javax.swing.*;

public class NeighborhoodDrives {

    public static void main(String[] args) {

         // The GraphicsWindow object
          GraphicsWindow win = new GraphicsWindow("Window",1400,800);   
          // The Graphics object
          Graphics page = win.getGraphics();
          // The car facing right
          Image carRight = new ImageIcon("carright.gif").getImage();
          // The car facing left
          Image carLeft = new ImageIcon("carleft.gif").getImage();

          // The five cars' initial placements
          int x1 = 0, x2 = 450, x3 = 900, x4 = 550, x5 = 990;
          int y1 = 338, y2 = 338, y3 = 338, y4 = 625, y5 = 625;
          Color houseColor = Color.magenta;
          boolean gameOver = false;
          boolean rightDirection = true;

          while (!gameOver)   // Creates a loop
          {
              win.clear();     // Clears the window

              int mid = 300;
              int top = 50;

              if (!rightDirection)    // Creates the loop to make the car drive in back of the house from the left to the right sides of the  2 lower houses
                    page.drawImage(carRight,  x4, y4, null);       

                if (!rightDirection) 
                      page.drawImage(carRight,  x5, y5, null);

                // Creates 5 different colored houses in 5 different places 
                int count = 0;
                while (count < 5) {
                    switch (count) {

                    case 0:
                        mid = 250;
                        top = 50;
                        // Makes a magenta house
                        houseColor = Color.magenta;
                        break;

                    case 1:
                        mid = 700;
                        top = 50;
                        // Makes a yellow house
                        houseColor = Color.yellow;
                        break;

                    case 2:
                        mid = 1150;
                        top = 50;
                        // Makes a green house
                        houseColor = Color.green;
                        break;

                    case 3:
                        mid = 450;
                        top = 350;
                        // Makes a light blue, cyan, house
                        houseColor = Color.cyan;
                        break;

                    case 4:
                        mid = 900;
                        top = 350;
                        // Makes a red house
                        houseColor = Color.red;
                        break;

                    }

                page.setColor(houseColor);

                page.fillRect(mid - 125, top + 130, 200, 200); // fronts of houses

                // Sets color of the roofs
                page.setColor(Color.darkGray);
                page.fillRect(mid - 150, top + 125, 250, 35); // roofs of houses
                page.fillRect(mid - 100, top + 100, 150, 40);
                page.fillRect(mid - 75, top + 85, 100, 20);
                page.fillRect(mid - 45, top + 65, 50, 20);
                page.fillRect(mid - 33, top + 55, 25, 20);

                // Sets color of the doors
                page.setColor(Color.blue);
                page.fillRect(mid - 50, top + 245, 50, 85); // doors of houses

                // Sets color of the door knobs
                page.setColor(Color.black);
                page.fillOval(mid - 15, top + 285, 10, 10); // door knobs

                // Sets color of windows on the houses
                page.setColor(Color.white);
                page.fillRect(mid - 100, top + 185, 45, 45); // second story windows on
                                                                // left of houses

                // Sets color of windows on the houses
                page.setColor(Color.white);
                page.fillRect(mid + 10, top + 185, 45, 45); // second story windows on
                                                            // right of houses

                // Sets color of window panes on the houses
                page.setColor(Color.red);
                page.drawLine(150, 258, 195, 258); // panes of window on left of magenta house
                page.drawLine(172, 236, 172, 281);
                page.drawLine(263, 258, 303, 258); // panes of window on right of magenta house
                page.drawLine(282, 236, 282, 281);
                page.drawLine(600, 258, 645, 258); // panes of window on left on yellow house
                page.drawLine(622, 236, 622, 281);
                page.drawLine(710, 258, 755, 258); // panes of window on right on yellow house
                page.drawLine(732, 236, 732, 281); 
                page.drawLine(1050, 258, 1095, 258); // panes of window on left on green house
                page.drawLine(1072, 236, 1072, 281);
                page.drawLine(1160, 258, 1205, 258); // panes of window on right on green house
                page.drawLine(1182, 236, 1182, 281);
                page.drawLine(350, 558, 395, 558); // panes of window on left on cyan house
                page.drawLine(372, 536, 372, 581);
                page.drawLine(460, 558, 503, 558); // panes of window on right on cyan house
                page.drawLine(482, 536, 482, 581);
                page.drawLine(800, 558, 845, 558); // panes of window on left on red house
                page.drawLine(822, 536, 822, 581);
                page.drawLine(910, 558, 955, 558); // panes of window on right on red house
                page.drawLine(932, 536, 932, 581);
                count++;

                }   

                  if (rightDirection)
                  x1 += 10;
                  else 
                      x1 -= 10;

                  if (rightDirection)
                  x2 += 10;
                  else \
                      x2 -= 10; 

                  if (rightDirection)
                  x3 += 10;
                  else 
                      x3 -= 10; 

                    if (!rightDirection)
                          page.drawImage(carLeft,  x1, y1, null);    

                        if (!rightDirection)
                              page.drawImage(carLeft,  x2, y2, null);

                        if (!rightDirection)
                             page.drawImage(carLeft,  x3, y3, null);

                  if (rightDirection)
                  x4 -= 10;  
                  else
                      x4 += 10;

                  if (rightDirection)
                      x5 -= 10;
                  else
                          x5 += 10;

                     if (x1 > 450 && x2 > 900 && x3 > 1300 && x4 < 150 && x5 < 550)    // Signifies when the car has completely driven across the front of the house
                          rightDirection = false;

                  win.repaint();   // Redraw the screen
                  win.pause(40);

                     if (x1 > 450 && x2 > 900 && x3 > 1300 && x4 < 150 && x5 < 550)    // Signifies when the car has completely driven across the front of the house
                          rightDirection = false;

          }

            }

    } 
```

PS我不是计算机科学专业的，事实上我是一个尼安德特人。请理解我的局限性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:28:04.313

如果戴夫牛顿回答了这个问题，我肯定会支持这个答案。我要补充一点，你想设置条件，什么时候`gameover`应该设置为真，就像你做的那样`rightDirection`（当然，那是假的）。

我会在你的循环结束时添加：

```
 if(!rightDirection && x1 <= 450 && x2 <= 900 && x3 <= 1300 && x4 >= 150 && x5 >=550){
              gameover = true; 
    } 
```

我假设您希望汽车停在与开始位置相反的房屋后端。希望有帮助！

# ruby-on-rails-3 - 为什么数据库的user_id列没有被填满？

> ID：12869117
> 
> 赞同：0
> 
> 时间：2012-10-13T01:21:43.513
> 
> 标签：ruby-on-rails-3, rails-migrations

我在数据库中有一个名为 pcomment 的表。每个 pcomment 都属于一个购买。一次购买 has_many pcomments。另外，每个用户有_many pcomments 和每个pcomment 属于_to 用户。在数据库中，pcomments 表有 id/user_id/purchase_id/body/created_at/updated_at

一切都被正确填写，除了 user_id 仍然是空白的。我希望用当前登录用户的 user_id 填充它（即创建 pcomment 的用户）。 user_id 和 pcomment_id 都在带有 add_index 的表中建立索引（在迁移期间）

这是pcomment的表格

```
 <%= form_for([purchase, purchase.pcomments.build]) do |f| %>

    <div class="field">
      <h4>What deal are you offering?</h4>
      <%= f.text_field :body %>

    </div>

  <% end %> 
```

这是 pcomments_controller.rb

```
class PcommentsController < ApplicationController
  before_filter :signed_in_user
  def create
    @purchase = Purchase.find(params[:purchase_id])
    @pcomment = @purchase.pcomments.build(params[:pcomment])

    @pcomment.purchase = @purchase

    if @pcomment.save
       flash[:success] = "Offer submited!"
       redirect_to :back
    else
      render 'shared/_pcomment_form'
    end
  end

  def new
@pcomment=purchase.pcomments.new

  end

end 
```

如果您需要更多我的代码，请访问[https://github.com/tradespring1/tradespring/](https://github.com/tradespring1/tradespring/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:03:48.683

这可能不是最好的方法，但是如果您定义了“current_user”方法，或者正在使用设计，您可以简单地将@pcomment.user_id = current_user.id 放在@pcomment.save 之前

# linux - 如何使用 grep 计算给定字符串至少出现一次的文件数？

> ID：12869121
> 
> 赞同：0
> 
> 时间：2012-10-13T01:22:27.347
> 
> 标签：linux, unix, grep

使用下面的命令，我可以在当前目录中找到给定字符串的总出现次数。

```
cat * | grep -c 'nike' 
```

同样，如何获取给定关键字至少出现一次的文件总数？

谢谢一堆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:25:34.133

grep -l 耐克 * | wc -l

不要用猫。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:25:54.627

grep -l 只打印文件名

```
grep -l 'nike' * | wc -l 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T15:20:08.327

将 grep 与 wc 一起使用，-l 选项用于行。

grep -R "模式" .|wc -l

# c++ - 在 cpp LinkedList 程序中将两个多项式相乘

> ID：12869125
> 
> 赞同：1
> 
> 时间：2012-10-13T01:22:54.383
> 
> 标签：c++, linked-list, polynomial-math, singly-linked-list

我正在用 C++ 做一个多项式程序，我们应该用一个单链表来实现它。是的，这是一个家庭作业。我已经完成了大部分程序，但我只是坚持我的乘法运算符重载。这是我的 operator* 函数：

```
LinkedList operator*(const LinkedList& a, const LinkedList& b)
{
    LinkedList product;
    Node* nodeA = a.head;
    Node* nodeB = b.head;
    int coeff, powr;

    if (nodeA == NULL && nodeB == NULL)
        return product;
    else if (nodeA == NULL && nodeB != NULL)
        return b;
    else if (nodeA != NULL && nodeB == NULL)
        return a;
    else {
        while (nodeA != NULL) {
            while (nodeB != NULL) {
                coeff = nodeA->getCoeff() * nodeB->getCoeff();
                powr = nodeA->getPow() + nodeB->getPow();
                product.addElement(coeff, powr);
                nodeB = nodeB->getNext();
            }
            nodeB = b.head;
            nodeA = nodeA->getNext();
        }
    }
    return product;
} 
```

作为参考，我现在只是在链接列表的末尾添加一个新元素。

这是我的 AddElement 函数：

```
void LinkedList::addElement(int coeff, int powr)
{
    Node *newNode = new Node();

    // Set the Node's data
    newNode->setPowAndCoefficient(coeff, powr);
    newNode->setNextNode(NULL);
    Node *temp = head;

    if (temp != NULL) {
        // Go to the last element of the list
        while (temp->getNext() != NULL) {
            temp = temp->getNext();
        }
        // temp is now the last element and its next element is null
        // Set temp's next node to be the newNode
        temp->setNextNode(newNode);
    }
    else
        head = newNode;
} 
```

节点只是我的类，具有私有数据成员系数、功率和指向下一个节点的指针。LinkedList 是我的主类，它包括一个私有 Node* 头成员和公共运算符重载函数和几个构造函数。这里使用的构造函数是默认构造函数，我只是将 head 设置为 NULL。

我在第二个 while 循环之后放置了一些 cout 语句，并乘以两个多项式来测试我的乘法函数。

所以在这种情况下，我的 main.cpp 文件中有这段代码：

```
LinkedList poly1, poly2, result;
    // The first polynomial: 3x^3 + 7x^2 - 7
    poly1.addElement(3, 3);
    poly1.addElement(7, 2);
    poly1.addElement(-7, 0);
    cout << "Polynomial A: " << poly1 << endl;

    // The second polynomial: -5x^5 - 14x^3 + 7x^2 + 14
    poly2.addElement(-5, 14);
    poly2.addElement(-14, 3);
    poly2.addElement(7, 2);
    poly2.addElement(14, 0);
    cout << "Polynomial B: " << poly2 << endl; 
```

此外， << 重载运算符可以正常工作并正常显示链接列表。问题是当我尝试这样做时：

```
result = poly1 * poly2; 
```

我得到一个分段错误。我不知道为什么。正如我所说，我将 cout 语句放在第一个 while 循环中，这就是我在执行 poly1 * poly2 时得到的：

```
 -15x^17 - 42x^6 + 21x^5 + 42x^3 - 35x^16 - 98x^5 + 49x^4 + 98x^2 + 35x^14 + 98x^3 - 49x^2 - 98
[1]    39009 segmentation fault  ~/Desktop/run 
```

是的，它很丑陋，但这是在我将所有这些东西加在一起之前。但无论如何，它基本上是正确的。在评估最后一个常数后，我只是得到一个分段错误。

我不知道它为什么这样做，它只对乘法运算符这样做。其他东西虽然很好。我可能在某个地方有一个错误，过去几个小时我一直在寻找它，但我不知道我做错了什么。有人可以帮忙吗？

谢谢。

我的节点类：

```
class Node {
private:
    int power;
    int coefficient;
    Node *next;
public:
    Node(); // in implementation: coeff = 0, power = 0, next = NULL;
    Node(const int coeff, const int powr = 1);
    void setPowAndCoefficient(const int coeff, const int powr);
    inline int getPow() const { return power; };

    inline int getCoeff() const { return coefficient; };

    inline void setNextNode(Node *aNode) { next = aNode; };

    inline Node *getNext() const { return next; };
};

Node::Node()
{
    coefficient = 0;
    power = 1;
    next = NULL;
}

Node::Node(const int coeff, const int powr)
{
    coefficient = coeff;
    power = powr;
    next = NULL;
}

void Node::setPowAndCoefficient(const int coeff, const int powr)
{
    coefficient = coeff;
    power = powr;
    next = NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T17:13:25.347

伙计，我有点懒得通读整篇文章..但这就是我如何将两个多项式相乘..

```
 LinkedList operator*(const LinkedList& a, const LinkedList& b){
int coef,pow;
LinkedList temp = new LinkedList();
    for(node * a1 = a->head;a1!=NULL;a1=a1->next)
    for(node * b1 = b->head;b1!=NULL;b1=b1->next){
     coef = a1->getCoeff() * b1-> getCoeff();
     pow = a1->getPow()+b1->getPow();
node ab  = new node(coef,pow);//Writting it java style, cant remember if this is how u       //declare objects in c++ :(
temp.addNode(ab);
}
return temp;
} 
```

如果对您没有帮助，我很抱歉.. 但我只是想向您介绍一个想法。

# java - 如何对 Chef 数据包中的“源”进行一些身份验证？

> ID：12869126
> 
> 赞同：1
> 
> 时间：2012-10-13T01:22:54.707
> 
> 标签：java, deployment, amazon-web-services, chef-infra

链接在这里：

[https://github.com/opscode/java-quick-start/blob/master/data_bags/apps/dbapp.json#L17](https://github.com/opscode/java-quick-start/blob/master/data_bags/apps/dbapp.json#L17)

在 Java WAR 部署的 Chef 数据包中，我们提供了源 URL，它可能在 S3 上等。我们还有哪些其他来源？我们可以在这里进行任何身份验证吗？否则，将我的 WAR 上传到 S3，公开可用（是的，你应该有直接链接但仍然！）并使用它似乎不是一个非常棒的主意。如果我在 S3 上设置一些存储桶策略，我想不出顺便说一句，我如何在这个 S3 存储桶策略上设置一个规则，以允许访问来自特定 EC2 安全组的所有服务器。我根本不相信有这样的选择。

任何想法如何解决它？有没有其他方法可以使用密钥或其他方法来下载“源 WAR”，例如 SCP 或类似的东西？如果没有别的可能？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:08:52.397

> 任何想法如何解决它？

[在“application::java_webapp”配方](https://github.com/opscode/java-quick-start/blob/master/cookbooks/application/recipes/java_webapp.rb)的末尾，从存储我们的任何地方获取 WAR 文件的代码。

```
remote_file app['id'] do
  path "#{app['deploy_to']}/releases/#{app['war'][node.chef_environment]['checksum']}.war"
  source app['war'][node.chef_environment]['source']
  mode "0644"
  checksum app['war'][node.chef_environment]['checksum']
end 
```

您可以将其替换为提供凭据的东西。

* * *

我找不到一个简洁的解决方案（例如 SCP 的“提供者”），但使用“执行”资源而不是“remote_file”应该可以完成这项工作。当然，您仍然有安排运行配方的厨师客户端实例具有正确的 SSH 密钥或用户名/密码的问题。

# javascript - jquery ajax返回值和完成函数

> ID：12869127
> 
> 赞同：2
> 
> 时间：2012-10-13T01:23:16.410
> 
> 标签：javascript, jquery

我在 jquery 文档页面上找到了这个小例子。我总是尝试从 ajax 函数返回值，并且总是被告知存在一些同步和异步问题，如果不使其异步，我无法从 $.ajax 函数返回值。

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() { 
  $(this).addClass("done");
}); 
```

在上面的示例中，应用了这个 done 函数（示例中用作 $(this) 的内容）。

还有一件事，由于 ajax 函数不能设置全局变量，不能在这个中设置吗？我也不能从完成的函数中返回值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:30:41.070

> 应用了这个 done 函数

`$.ajax`返回一个[jqXHR 对象](http://api.jquery.com/jQuery.ajax/)（参见配置参数描述后的第一部分），它实现了 Promise[接口](http://api.jquery.com/category/deferred-object/)并允许您添加回调并获得 Ajax 调用更改的通知。

> 示例中用作 $(this) 的内容

在回调内部，如果未设置`$.ajax`，则指配置中`this`引用的对象`context`或 jqXHR 实例。`context`在这种情况下，它指的是`document.body`：

> **context：**这个对象将成为所有 Ajax 相关回调的上下文。默认情况下，上下文是一个对象，表示调用中使用的 ajax 设置（`$.ajaxSettings`与传递给的设置合并`$.ajax`）。

文档中解释了这一点以及更多内容：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

* * *

> 因为ajax函数不能设置全局变量

那是不正确的，任何函数都可以设置全局变量。异步函数的问题是您很可能在设置变量*之前就对其进行了**访问*。

 *> 也不能在此设置

往上看

> 我也不能从完成的函数中返回值

您可以返回一个值（如在`return`回调中放置一条语句），但您不能将其返回到*您的代码中，因为 jQuery 在**内部*调用回调并忽略返回值。*

# iphone - 具有自定义应用行为的自定义 URL 方案

> ID：12869128
> 
> 赞同：0
> 
> 时间：2012-10-13T01:24:01.553
> 
> 标签：iphone, ios5, url-scheme, deep-linking, appdelegate

我正在制作一个有多个用例的应用程序。它具有主要功能（通过按下应用程序图标激活），然后是由自定义 URL 方案激活的主要功能的其他子集。

为了解释我的问题，我应该解释一下我目前如何告诉我的应用程序表现不同。

我一直在使用：-（BOOL）应用程序：didFinishLaunchingWithOptions：

从选项中获取 url：[launchOptions objectForKey:[keyArray objectAtIndex:0]]

现在我解析那个 urlString 并获取我所有的 launchType 参数，将它们放在 NSUserDefaults 中。然后我等待启动屏幕出现，然后它会告诉我的应用程序如何表现。

起初这似乎没问题，但后来我意识到：如果我深度链接到应用程序，并呈现功能 B，然后应用程序进入后台，下次应用程序进入前台（无论哪种方式） ，它将显示功能 B。

我想知道是否有人对标准做法有想法，人们通常使用什么方法？

仅供参考，我将尝试通过告诉我的导航控制器来解决这个问题.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:01:56.473

在我看来，对于这种方法，您需要考虑几件事。

首先看一下 UIApplicationDelegate 文档。`-application:willFinishLaunchingWithOptions:`警告：

> 如果您的应用程序是为了打开 URL 而启动的，您应该检查 UIApplicationLaunchOptionsURLKey 键的值并返回一个布尔值，指示您的应用程序是否可以实际打开 URL。您不应尝试使用此方法打开 URL。相反，在您的应用程序委托中实现 application:openURL:sourceApplication:annotation: 方法并使用该方法打开 URL。

看着`-application:openURL:sourceApplication:annotation:`我们看到：

> 如果您的应用必须启动才能打开 URL，则应用首先调用 application:willFinishLaunchingWithOptions: 和 application:didFinishLaunchingWithOptions: 方法，然后是此方法。这些方法的返回值可用于防止调用此方法。（**如果应用程序已经在运行，则只调用此方法。**）

其次，听起来您正在使用`NSUserDefaults`持久存储应该是临时状态的内容（如果应用程序是通过 url 启动的）。您是否曾经重置过您在此处设置的值，或者是否通过 url 启动应用程序，一旦让它始终沿着该路径卡住。

最后，用户有一个合理的期望，即应用程序会从中断的地方继续。用户将离开您的应用程序以响应电话、短信、通知、外部干扰、对其他应用程序的需求以及许多其他原因。当他们恢复/重新启动应用程序（而不是通过 url）时，拒绝让他们返回到他们离开的地方可能会产生糟糕的用户体验。

# windows-8 - Windows RT / Windows Store App 对 App.config 的回答是什么？

> ID：12869139
> 
> 赞同：22
> 
> 时间：2012-10-13T01:25:50.243
> 
> 标签：windows-8, windows-runtime, windows-store-apps

`<appsettings />`像我们以前使用App.config 和 Web.config`ConfigurationManager`一样，在 Windows 8 / Windows RT / Windows Store / Windows Modern UI App 中使用简单配置数据的最佳方式是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-13T05:18:32.637

**本地设置**

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localsettings)

或者

**漫游设置**

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx)

主要区别在于 RoamingSettings 将保存到云中，因此可以跨不同设备传输相同的用户配置文件。LocalSettings 是特定于设备的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-13T05:28:34.477

Metro 应用程序没有完全等效的 app.config/web.config。

相反，您应该使用[package.appxmanifest](http://msdn.microsoft.com/en-us/library/windows/apps/hh464929.aspx#package_manifest)来配置 Windows 存储特定值。

对于本地设置，您应该使用[ApplicationData](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361.aspx) api。

如果您想在部署应用程序后对其进行配置，您只需在应用程序启动时加载远程 xml 或 json 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T09:47:38.423

除了上面的技术答案之外，了解为什么这些应用程序没有配置文件很重要。

WinRT/Windows 商店应用程序是客户端应用程序，因此与在服务器上运行并需要更改管理员配置的 ASP.NET 应用程序不同，最终用户不需要修补这些更改（SQL 连接、超时、您命名的 appSettings），因此有这些应用程序不需要这样的配置文件，

希望有意义

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T10:31:34.880

[您可以在此处](http://code.msdn.microsoft.com/windowsapps/Mimic-appconfig-in-Windows-dffb8160)找到基于 XML 文件在 Windows 应用商店应用程序中模仿 app.config 的示例

Hth

斯特凡

# compression - 是否可以使用自然语言处理压缩文本？

> ID：12869143
> 
> 赞同：1
> 
> 时间：2012-10-13T01:26:12.320
> 
> 标签：compression, nlp

我正在考虑使用最常用的英语单词压缩大块文本，但现在我怀疑它是否有效，因为 lzw 似乎以更好的方式实现了这一点。

尽管如此，我还是无法摆脱逐个压缩字符有点“野蛮”的感觉，因为可以通过分析句子的结构来更好地将其组织成更小的数据块，而解压后的结构并不完全相同，它可以使用经典的压缩方法。

“基本” NLP 是否允许这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:21:00.650

自然语言处理？

标准压缩技术可以应用于单词而不是字符。这些技术将根据前面的单词为下一个单词分配概率。但我在实践中没有看到这一点，因为单词比字符多得多，导致即使是低阶模型也使用过多的内存和过多的执行时间。

# cordova - 将 PhoneGap 与游戏中心集成

> ID：12869156
> 
> 赞同：4
> 
> 时间：2012-10-13T01:29:20.143
> 
> 标签：cordova, game-center

有没有办法用 HTML、CSS 和 JavaScript(+ jQuery) 制作游戏并使用 PhoneGap 使其成为原生 iOS 应用程序，然后将其与 Game Center 集成？

我的想法是制作一个类似于[travian](http://www.travian.com/)的游戏。我的意思是一种你只玩文字和数字，不涉及动画的游戏。我知道如果我使用 Unity 或 Game Maker，那么我可以将 Game Center 添加到我的游戏中，但是我想要制作的游戏类型对于那些游戏引擎来说并不容易。

我需要 Game Center 的大量用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-24T16:43:02.980

或者有这个与phonegap 3.x兼容的新插件： [https ://github.com/leecrossley/cordova-plugin-game-center](https://github.com/leecrossley/cordova-plugin-game-center)

并且有一个非常好的文档：

[http://ilee.co.uk/using-game-center-with-phonegap/](http://ilee.co.uk/using-game-center-with-phonegap/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:51:29.360

Github 上有一个插件，可以访问 PhoneGap 的游戏中心。

[https://github.com/phyx3r/Game-Center-Phonegap-Plugin](https://github.com/phyx3r/Game-Center-Phonegap-Plugin)

# qtp - 为什么需要告诉 QTP 两次停止？

> ID：12869157
> 
> 赞同：1
> 
> 时间：2012-10-13T01:29:24.667
> 
> 标签：qtp

在 QuickTest Pro 10 中，我注意到每当我在函数中有停止命令时，QTP 都会忽略它。但是，如果我在第一个命令之后有第二个停止，QTP 将在第二个命令上停止。为什么是这样？

例如，假设我在一个函数中有这个：

```
If True Then
    Stop
End If 
```

...**不会**停止。然而...

```
If True Then
    Stop
    Stop
End If 
```

……**会**停下来。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T11:48:01.347

难道是[http://support.microsoft.com/kb/252895/en-us](http://support.microsoft.com/kb/252895/en-us)中描述的事实对症状负责？

然而，我不认为`Stop`在 QTP 脚本中使用是一个好主意，因为 QTP 是少数使用 VBScript 引擎来实现自己的 IDE 的公司之一，并且在调试器和引擎之间存在各种集成问题。

所以我不希望`Stop`QTP 支持所有 VBS IDE 功能（并且是其中之一）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:25:35.830

我不熟悉`Stop`用于停止测试，您是否在寻找用于`ExitTest`停止 QTP 测试运行的功能？

# cocoa - 在雪豹上，为什么是-[ 调用 [ABPerson beginLoadingImageDataForClient:] 后未调用 consumeImageData:forTag:]？

> ID：12869160
> 
> 赞同：1
> 
> 时间：2012-10-13T01:29:51.277
> 
> 标签：cocoa, osx-snow-leopard, abaddressbook, abperson

我正在尝试为 shared 中的人员条目加载图像日期`ABAddressBook`。特别是，我打电话给

```
-[ABPerson beginLoadingImageDataForClient:] 
```

并将采用`ABImageClient`和实现的对象作为参数传递

```
-[<ABPersonClient> consumeImageData:forTag:] 
```

我使用的方法在 Mountain Lion 上运行良好，但在 Snow Leopard 上失败。特别是，`-consumeImageData:forTag:`永远不会被调用。

以下示例命令行程序演示了我的方法：

```
#import <Foundation/Foundation.h>
#import <AddressBook/AddressBook.h>

@interface ImageConsumer : NSObject <ABImageClient>
@property (nonatomic, strong) NSMutableDictionary *imagesForNumbers;
@end

@implementation ImageConsumer

- (id)init
{
    self = [super init];
    if (self) {
        self.imagesForNumbers = [NSMutableDictionary dictionary];
    }
    return self;
}

- (void)consumeImageData:(NSData *)data forTag:(NSInteger)tag
{
    [self.imagesForNumbers setObject:data forKey:[NSNumber numberWithInteger:tag]];
    NSLog(@"%s: loaded data of length %zu for tag %zd", __PRETTY_FUNCTION__, data.length, tag);
}

@end

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSArray *persons = [[ABAddressBook sharedAddressBook] people];
        ImageConsumer *imageConsumer = [[ImageConsumer alloc] init];
        for (ABPerson *person in persons) {
            NSInteger loadingKey = [person beginLoadingImageDataForClient:imageConsumer];
            NSLog(@"requested data person named %@ %@ and received tag %zd", [person valueForProperty:kABFirstNameProperty], [person valueForProperty:kABLastNameProperty], loadingKey);
        }
        [[NSRunLoop mainRunLoop] run];
    }
    return 0;
} 
```

我是否滥用 ABAddressBook 调用来加载实例的图像数据`ABPerson`？这是`ABAddressBook`雪豹上的错误吗？如果是这样，是否有解决方法？

# mysql - 如何提高此查询的性能？

> ID：12869164
> 
> 赞同：0
> 
> 时间：2012-10-13T01:30:12.417
> 
> 标签：mysql, sql

假设您有一个名为“user”的 MySQL 表，其中有数百万行具有以下结构，并且没有任何索引。

```
TABLE:  user_id (PK) email name signup_date 
```

我们要执行以下查询：

```
SELECT user_id
FROM user
WHERE email=’email@bolidea.com’ AND name=’Olivier Cabanes’ 
```

1.  MySQL 如何在速度方面处理该查询？
2.  如何提高该查询的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:34:02.167

你需要一个关于电子邮件和姓名的索引，否则它需要遍历表格的每一行并且会非常慢......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:29:47.407

在电子邮件或姓名*上*放置索引。两者都不需要索引，因为它们本身基本上都是唯一的

# git - 从本地和远程的几次提交中删除一个文件

> ID：12869168
> 
> 赞同：0
> 
> 时间：2012-10-13T01:30:46.053
> 
> 标签：git

> **可能重复：**
> [从 Git 历史记录中删除敏感文件及其提交](https://stackoverflow.com/questions/872565/remove-sensitive-files-and-their-commits-from-git-history)

我注意到由于服务器移动，无论出于何种原因......我不小心提交了一个被 git 忽略了几个月的文件。不用说我不希望它成为回购的一部分。

不幸的是，我在三个不同的提交中将此文件推送到了我的远程仓库。

从三个本地和远程提交中删除该文件而不会造成最大附带损害的最简单方法是什么？

谢谢你的帮助。我的理论是取消该提交，并可能对其进行修改并强制将其推回。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T01:32:52.977

Github 有一个很好的解决此类问题的指南：[删除敏感数据](https://help.github.com/articles/remove-sensitive-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:22:29.830

采用

```
git filter-branch 
```

通过索引过滤器删除它（文档有这样的例子）。之后，只需强制推送所有受影响的公共分支。您将看到远程跟踪分支复制了所有提交。强制推动将解决这个问题。然后向与您一起工作的任何人发送有关您所做的事情的消息。他们将能够毫无问题地获取和重新定位他们的工作，因为您没有更改他们应该引用的任何内容。

# java - 从 Java 程序中运行另一个 Java 程序并获取输出/发送输入

> ID：12869175
> 
> 赞同：0
> 
> 时间：2012-10-13T01:32:44.270
> 
> 标签：java, swing, ui-automation

我需要一种从我的应用程序中运行另一个 java 应用程序的方法。我想将其输出接收到 JTextArea 并通过 JTextBox 发送输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:45:41.467

要看。

您可以使用自定义`URLClassLoader`加载第二个应用程序 jar 并直接调用主类`main`方法。显然，问题在于从程序中获取输出；）

另一种解决方案是使用 a`ProcessBuilder`启动 java 进程并通过`InputStream`

这里的问题是试图找到 java 可执行文件。一般来说，如果它在路径中，你应该没问题。

您可以将其[视为](http://singztechmusings.wordpress.com/2011/06/21/getting-started-with-javas-processbuilder-a-sample-utility-class-to-interact-with-linux-from-java-program/)如何读取输入流的基线示例

**更新示例**

这是我的“输出”程序，它产生输出......

```
public class Output {
    public static void main(String[] args) {
        System.out.println("This is a simple test");
        System.out.println("If you can read this");
        System.out.println("Then you are to close");
    }
} 
```

这是我的“阅读器”程序，它读取输入......

```
public class Input {

    public static void main(String[] args) {

        // SPECIAL NOTE
        // The last parameter is the Java program you want to execute
        // Because my program is wrapped up in a jar, I'm executing the Jar
        // the command line is different for executing plain class files
        ProcessBuilder pb = new ProcessBuilder("java", "-jar", "../Output/dist/Output.jar");
        pb.redirectErrorStream();

        InputStream is = null;
        try {

            Process process = pb.start();
            is = process.getInputStream();

            int value;
            while ((value = is.read()) != -1) {

                char inChar = (char)value;
                System.out.print(inChar);

            }

        } catch (IOException ex) {
            ex.printStackTrace();
        }        
    }
} 
```

您还可以查看[基本 I/O](http://docs.oracle.com/javase/tutorial/essential/io/)以获取更多信息

# listview - 单击时将 ListView 项目移交给下一个活动 - 最佳实践

> ID：12869177
> 
> 赞同：1
> 
> 时间：2012-10-13T01:32:53.893
> 
> 标签：listview

我是一个初学者，想要一些相当简单的东西：我在 ListView 中有 Debt 对象，从 SQLite 数据库调用，并且只是想在单击时显示有关 Debt 对象的更多详细信息。非常简单，但我在这里搜索并找到了复杂的解决方案，例如将 debtID 放入 Extra 并在下一个活动中使用 ID 查询数据库以获取所有详细信息（其字段）。或使用可序列化。我试过了，都有效。但请告诉我：为什么不简单地这样做：

```
public class MainActivity extends ListActivity {
    public static Debt selectedDebt = null;
    ...
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        selectedDebt = (Debt) getListView().getItemAtPosition(position);
        Intent intent = new Intent(v.getContext(), ShowDebtActivity.class);
        startActivity(intent);
    }
    ...
} 
```

和

```
public class ShowDebtActivity extends Activity {
    ...
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_show_debt);

        TextView amountTextView = (TextView) findViewById(R.id.amount);
        amountTextView.setText("Amount: " + MainActivity.selectedDebt.getAmount());
        //... for all details like amount, date, place, ...
    }
    ...
} 
```

与我在这里找到的解决方案相比，它工作得很好并且超级容易，但是出于某种原因，这是不好的做法吗？我很确定，这是不好的做法 :) 请告诉我出于我的目的的最佳做法。

# java - 如何使用 Java JSmooth 在可执行文件中包含图像？

> ID：12869178
> 
> 赞同：0
> 
> 时间：2012-10-13T01:33:04.773
> 
> 标签：java, image, jar, exe, jsmooth

我从 Eclipse 为 Java 文件创建了一个可运行的 Jar 文件。Java 文件有一个组合框，可以根据选择更改图像。

我使用 jSmooth 为 Windows 创建一个 .exe 文件。

当图像与 .exe 文件位于同一文件中时，.exe 运行良好，并且图像按预期更改。

如何在 .exe 文件中“包含”图像，这样我就可以将 .exe 文件发送给某人，而无需向他们发送一堆图像（使用 jSmooth）。

我没有看到在 JSmooth 中执行此操作的明确方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:47:54.863

我发现了什么。使用 netbeans，您可以创建一个标签并在属性部分中选择一个图标，这会将您的图像包含在 jar 文件中。

# php - 在页面加载时提交数据表搜索表单

> ID：12869179
> 
> 赞同：0
> 
> 时间：2012-10-13T01:33:18.490
> 
> 标签：php, javascript, datatables

我正在使用[http://datatables.net/ref上的数据表脚本](http://datatables.net/ref)

到目前为止，这是我用来将值添加到搜索字段的代码。但是，除非用户在搜索框中按回车键或添加/删除字符，否则它实际上不会搜索数据表。请参阅链接以了解它的确切功能，只需在他们的搜索框中输入一些内容即可。

```
<script type="text/javascript">
       window.onload = (function() {
           document.getElementById('search').value = " <?php echo $st;?>";
</script> 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:09:59.033

据我了解你的问题。您希望当用户输入任何字符或单词时，它应该以表格格式显示所有匹配结果。

因此，为此您必须使用`onkeyup`此搜索框的事件并调用`ajax`函数来发送输入并显示结果。

希望它能澄清你的疑问。如果有任何问题来评论它。

# iphone - 当硬件音量开关关闭时，任何方式都可以检测关闭状态并播放音频，无论是否关闭。

> ID：12869185
> 
> 赞同：2
> 
> 时间：2012-10-13T01:34:27.563
> 
> 标签：iphone, ios

我看到在音量关闭状态下发出声音的唯一方法是 AudioServicesPlayAlertSound。音量关闭是指通过横向按钮（硬件按钮）关闭，而不是设置中的铃声开关。似乎我们无法使用 AudioServicesPlayAlertSound 以编程方式控制音量增大、减小和持续时间。即使系统音量处于静音状态，我也想以编程方式发出重复警报。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:53:47.023

不确定你能做到这一点，我认为你“合法”不能。此链接可能会帮助您解决它： [play-sound-on-iphone-even-in-silent-mode](https://stackoverflow.com/questions/3740528/play-sound-on-iphone-even-in-silent-mode)

这是一个检查静音按钮状态和振动的方法： [how-to-play-sound-file](https://stackoverflow.com/questions/4322351/how-to-play-sound-file-in-silent-mode-iphone-sdk)

希望有帮助。

# asp.net-mvc - TwitterService.getAccessToken 错误

> ID：12869188
> 
> 赞同：1
> 
> 时间：2012-10-13T01:35:30.590
> 
> 标签：asp.net-mvc, tweetsharp

我正在尝试在 ASP MVC 3 应用程序中使用 tweetSharp。我正在使用来自[https://github.com/danielcrenna/tweetsharp](https://github.com/danielcrenna/tweetsharp)的示例中的代码。我已经能够使用 ac# WPF 应用程序成功使用桌面示例，所以我认为这不是我正在使用的键。当它在 authorizeCallback 控制器方法中转到我的这行代码时，它会返回 500 错误：

`OAuthAccessToken accessToken = service.GetAccessToken(requestToken, oauth_verifier);`

有谁知道可能导致此问题的原因以及如何解决？

# linux - Linux 中的 Netbeans 和 Xdebug

> ID：12869189
> 
> 赞同：14
> 
> 时间：2012-10-13T01:35:49.603
> 
> 标签：linux, netbeans, xdebug

我已经安装了 Xdebug，我可以确认`phpinfo()`它已正确安装。我已经采取了`google`“netbeans xdebug install, etc”提供的所有站点中给出的所有步骤。

它仍然无法在 Netbeans 中使用。有人可以提供任何建议吗？

这是我的 php.ini 调试部分...

```
[xdebug]
zend_extension = /usr/lib/php5/20090626/xdebug.so
xdebug.remote_enable = 1
xdebug.remote_mode = "req"
xdebug.remote_handler = dbgp
xdebug.remote_host = 127.0.0.1
xdebug.remote_port = 9000
xdebug.idekey = "netbeans-xdebug" 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-23T00:12:48.693

由于我可用的信息非常稀少，因此我必须更详细地描述设置。

**Netbeans 和 xdebug 设置。**

> Ubuntu 12.04 LTS 精确穿山甲

应该安装什么。

![在此处输入图像描述](../Images/5c0c34a799dd41bad278a84dfcb414f1.png)

![在此处输入图像描述](../Images/09adb64574a733302851c1b5acfeb298.png)

**全局设置：**

> 工具 -- 选项

![在此处输入图像描述](../Images/25d641ec0cb05f4939bfc62f2fc45bd0.png)

![在此处输入图像描述](../Images/4f696bba7f09520a6fe486fe4226c220.png)

**PHP 设置：**

使用**phpinfo()**你得到.. 见下图。

![在此处输入图像描述](../Images/e2cd6c98042f5c2267101256ddadd7f5.png)

只有**一个**php.ini 很重要！查看**加载的配置文件** 如果您将 xdebug 条目写入另一个“php.ini”文件，请务必再次**清除所有这些条目**。（ xdebug 仅在一个 php.ini 中）。还请查看**已解析的附加 .ini 文件**。我们稍后再谈。

```
zend_extension="/usr/lib/php5/20090626+lfs/xdebug.so"
xdebug.remote_enable=1
xdebug.remote_handler=dbgp
xdebug.remote_mode=req
xdebug.remote_host=localhost
xdebug.remote_port=9000 
```

![在此处输入图像描述](../Images/cabb946c605c0579ae5398a68549fee5.png)

**其他 .ini 文件已解析**。
添加或控制，只有第一行必须与“php.ini”中的相同。（不带“”）

![在此处输入图像描述](../Images/c05abff83a92f48ac90f67583c8c382b.png)

确保文件确实存在！

![在此处输入图像描述](../Images/a73c16a932af123012855374384932d7.png)

确保**session.save_path**确实存在！

![在此处输入图像描述](../Images/5efe8fd536c973049440c1d42f55bb5a.png)

控制**xdebug**版本应该等于或更高。（匹配 PHP Version-5.3.10-1 ）。如果一切都按照这个答案中的描述完成，但它不起作用，那么很有可能是“xdebug.so”**不正确或有缺陷。**

![在此处输入图像描述](../Images/e26cb0888e0ae5776f91ca1e101764b0.png)

**创建一个新的 PHP 项目：**

![在此处输入图像描述](../Images/b798f4e9d042ca1c87fccf31bb508581.png)

**项目属性：**
源
在我们的测试程序中，项目文件夹和源文件夹**完全相同****非常重要**！

 **![在此处输入图像描述](../Images/8b1e23ff52056757aa8345a4b06247fa.png)

运行配置

![在此处输入图像描述](../Images/d317729dddae874c4084ee56c7dabb7e.png)

![在此处输入图像描述](../Images/50555c382f8857495bbe036a81c7a254.png)

**开始调试：** -- 按调试按钮

![在此处输入图像描述](../Images/1ef2859bd41d88fe7dfb73cf41e273eb.png)

默认浏览器打开并保持在**Connecting ..**状态，而 Netbeans 处于调试模式。
（如果 Netbeans 未打开浏览器或无法连接，请返回**Advanced Web Configuration**并选择**Do Not Open Web Browser**。关闭并重新打开浏览器并键入 URL，如下所示）

![在此处输入图像描述](../Images/2148ec0174947d49ed60d8ace602dc71.png)

浏览你的代码。完成调试后，您只会在浏览器中看到一些内容。不要忘记按下**停止按钮** ![在此处输入图像描述](../Images/b7c96058f30b10d1c1f6b662e553a0e2.png)。如果你忘记了这个 xdebug 正在运行。

**完毕：**

![在此处输入图像描述](../Images/580bd38f028f2c9a286a2b0bfb34dedf.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T14:56:06.313

尝试使用`xdebug.remote_connect_back=1`而不是`xdebug.remote_host`避免安全问题

实际上，

```
zend_extension=path/to/xdebug.so
xdebug.remote_enable=1
xdebug.remote_connect_back=1 
```

应该够了。

确保**未选择**`project properties->run configuration->advanced->do not open web browser`该选项（在 netbeans 项目配置中）。

 **另外，检查**运行配置中的****项目 url**值

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T19:34:58.443

问题不在于 xdebug 本身的配置，而在于我如何配置 NetBeans。这是一个简单的错误...基本上我让 NetBeans 导航到我的 /var/www/Application 目录，而我实际上还没有设置。

感谢大家的帮助。我学到了很多关于 xdebug 如何工作的知识！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T01:45:22.913

确保在 xdebug.ini 文件中将远程端口设置为 9000，我的设置为 8000，一旦我更改它，xdebug 立即工作。******

# c++ - 调用函数从类返回私有变量不起作用

> ID：12869191
> 
> 赞同：4
> 
> 时间：2012-10-13T01:36:11.427
> 
> 标签：c++

所以我正在用 C++ 制作一个小游戏，但我遇到了一个问题。我的 player.h 文件中有一个名为 player 的类，在这个类中我有一个名为`getPotion()`. 我还有一个名为`potion`. 对于玩家的健康，我有完全相同的东西，并且该函数完美地`getHealth()`返回了私有静态 int 。`playerHealth`但显然没有理由，该`getPotion`函数不会返回药水。我得到一个错误。我还在所有其他文件中包含了头文件。

这是代码：

（不好意思，不知道怎么插入代码，只好写出来了）

**player.h**（我遇到问题的代码）：

```
class Player{
private:
    static int potions;

public:
    int getPotions();
} 
```

**player.cpp**（同样是我遇到问题的代码）：

```
int Player::potions;

int Player::getPotions(){
    Player player;
    return player.potions;
} 
```

我可能遗漏了一些代码，例如 return 等，但那是因为我有很少的时间来问这个问题，所以我把与我的问题相关的部分放在了上面。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T01:42:18.320

首先，您试图返回一个`static`类的成员，就好像它是对象的实例化成员一样。静态成员由 引用`Class::member`，而不是`object.member`。

其次，我不认为你想`potions`保持静止。静态成员在类的所有对象之间共享。因此，如果玩家 A 有 100 个生命药水，那么玩家 B 将拥有相同的 100 个生命药水。

第三，您在文件`Player::potions`顶部声明`.cpp`。我不认为那是你想要的。该`potions`成员已在您的`.h`文件中声明。

播放器.h：

```
class Player
{
    private:
        int potions;

    public:
        int getPotions();
}; 
```

播放器.cpp：

```
int Player::getPotions()
{
    return potions;
} 
```

如果您确实想`potions`保持静态，请将其更改为：

```
return Player::potions; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:39:12.200

尝试改变

```
Player player;
return player.potions; 
```

简单地

```
return potions; 
```

您正在创建一个新玩家并返回*该*对象的药水，而不是“this”对象的药水。

# ios - 为 iOS 编译 MobileVLC

> ID：12869192
> 
> 赞同：1
> 
> 时间：2012-10-13T01:36:15.797
> 
> 标签：ios

我正在编译

**

**ld：未找到 -lMobileVLCKit 的库 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）**

**

我无法编译 MoblieVLCKit.a ，如何解决这个问题？

# javascript - 如果用户选择特定值，则在 Jquery Chosen 插件中删除选择

> ID：12869194
> 
> 赞同：0
> 
> 时间：2012-10-13T01:36:46.107
> 
> 标签：javascript, jquery, jquery-chosen

我有以下多选，我正在使用[Jquery Chosen](http://harvesthq.github.com/chosen/)插件

```
 <select multiple="multiple" class="chzn-select span3" name="requestCategory"   id="requestCategory">
        <option selected="selected" value="">All</option>
        <option value="2">Electrical</option>
       <option value="4">Emails</option>
       <option value="3">Filming Permits</option>
       <option value="10">test1</option>
    </select> 
```

客户希望确保如果选择了任何其他值或者如果用户选择了任何其他值然后自动取消选择/删除所有，我不允许用户选择全部；因为 ALL = 所有类别，所以单独选择没有意义。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:55:58.447

检查是否选择了多个项目，或者如果只选择了一个项目而不是第一个项目 - 在这些情况下禁用全部。

```
$('.chzn-select').on('change', function() {
    var selectedOpts = $('option:selected', this);

    if(selectedOpts.length > 1 || selectedOpts.first().index() !== 0) {
        $('option', this).first().attr('disabled', 'disabled');
    }
});​ 
```

[http://jsfiddle.net/zCk2z/5/](http://jsfiddle.net/zCk2z/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:00:21.667

在第一次更改选项 [simple] 时会删除 All 类别。但我建议禁用该项目，它看起来更好地使用`.attr('disabled', 'disabled')`而不是 `.remove();`

```
$('#requestCategory').change(
function(){
$(this).find('option:contains("All")').remove()
}) 
```

# wordpress - Wordpress-W3 Total Cache 缩小问题>:(

> ID：12869198
> 
> 赞同：0
> 
> 时间：2012-10-13T01:37:17.440
> 
> 标签：wordpress, caching, minify

出于某种原因，尽管我做了任何事情，但我无法为我的一生工作……我要疯了……有人有什么建议吗？我也尝试了 WP Minify，但没有运气......也许我的服务器有问题？

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:58:01.343

FWIW，W3TC 不再被真正支持；它已经一年多没有更新了。

尝试使用 WPSCMin 缩小插件的 WP Super Cache。无论如何，它更受欢迎。见[http://wordpress.org/extend/plugins/wp-super-cache/](http://wordpress.org/extend/plugins/wp-super-cache/)

无论如何，您可能会看到使用“缩小”的轻微性能提升。更重要的是减少主题中的插件、脚本和样式表。

# ruby-on-rails - Rails 根 url 返回空白页

> ID：12869207
> 
> 赞同：0
> 
> 时间：2012-10-13T01:39:03.393
> 
> 标签：ruby-on-rails, ruby

当我试图*`mydomain.com`*让它返回没有错误的空白页时。

我有正确的根目录`routes.rb`，当我试图获取必须是根目录的页面时，*`mydomain.com/root_page`*它工作正常。

我网站上正常工作的任何页面 *`public/index.html`*都会被删除。

这种方法有什么问题？

谢谢。

这是我的 routes.rb 文件

```
 mydomain.com::Application.routes.draw do

  get "admin/index"
  match "admin" => "admin#index"

  match "materialy" => "materials#indexall"
  match "materialy/:id" => "materials#showall"
  match "m/:id" => "materials#light"

  match "nashi-raboti" => "ourworks#indexall"
  match "nashi-raboti/:alias" => "wphotos#indexall"

  match "galereja" => "gphotos#indexall"

  scope "/admin" do
    resources :gphotos, :materials, :posts, :mphotos, :titles
    resources :ourworks do 
      resources :wphotos
    end
  end

  match ":alias" => "posts#showall"

  root :to => "posts#showall", :alias => "main"

end 
```

因此，当我尝试获取 mydomain.com/main 时，一切正常。

当我想获取 mydomain.com 时，没有任何内容写入 development.log，但是当我试图获取 mydomain.com/main 或任何其他页面时，一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:18:16.863

“mydomain.com”是您的应用程序名称吗？我认为问题是由于这个。尝试创建名称中没有点的应用程序。

# javascript - 如何让 jQuery Mobile 网站上的完整网站按钮正常工作？

> ID：12869210
> 
> 赞同：1
> 
> 时间：2012-10-13T01:40:24.360
> 
> 标签：javascript, jquery, mobile, jquery-mobile

我设计了一个网页和同一页面的移动版本（使用 jQuery Mobile）。

我有 javascript 代码可以检测用户是否使用移动设备，然后重定向到移动网站 (mobile.html)。

但是，当用户尝试从移动站点转到桌面或完整站点时，它会调出页面，但看起来不正确……当在移动设备上查看时，它有点放大和移位。

```
************The Javascript to detect mobile device************

var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));  
 if (mobile) { 
    document.location = "http://www.somedomain.com/mobile.html";  }
 }  

************jQuery Mobile button for Full Site ***************

<ul data-role="listview" data-inset="true">
        <li>
            <a href="http://www.somdomain.com/?view=full">Full Site</a>
        </li>
</ul> 
```

如何将重定向到完整网站，使其看起来像在移动设备上一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T20:06:27.810

显然，您将返回移动网站，因为它将运行您的检测脚本并直接将您重定向回来。您需要使用技术来避免这种情况。

您需要告诉您刚刚来自移动网站的完整网站，并且不想返回。

完整网站上的一些示例：

*   检查**视图**是否设置为“**完整**”。如果为*true*，请设置 cookie 或 php 会话以避免运行检测脚本。
*   检查**推荐人**是否是移动网站。如果为*true*，则不要运行检测脚本。

希望这能让你上路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T00:09:13.900

感谢 Gillian Lo-Wong，我能够获得以下代码为我工作......

主页.html

```
function urlParam(name){
            var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
            if(results)
                return results[1] || 0;
            else
                return '';
        }

        if(urlParam('view') == 'full'){ 
        }
        if(urlParam('view') == ''){
            // <![CDATA[
            var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase()));  
            if (mobile) { 
                    document.location = "http://www.mysite.com/mobile.html";  
            }  
            // ]]>
        } 
```

和 mobile.html 代码

```
<a href="http://www.mysite.com?view=full" data-ajax="false">Full Site</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T03:24:40.467

您可以尝试添加`rel="external"`到`<a>`指向您的桌面页面的链接：

```
<ul data-role="listview" data-inset="true">
    <li>
        <a href="http://www.somdomain.com/?view=full" rel="external">Full Site</a>
    </li>
</ul> 
```

这将禁用 Ajax 导航并确保刷新页面，擦除将桌面页面转换为移动页面的数据。

让我知道这是否适合您。

# zend-framework2 - Zend Framework 2：尝试向表单添加选择框不会呈现值

> ID：12869211
> 
> 赞同：5
> 
> 时间：2012-10-13T01:40:45.790
> 
> 标签：zend-framework2, html-select

我正在尝试将一个选择框添加到我的一个表单中（仅使用 input type="text" 元素就可以很好地工作），但我得到的只是一个没有标签的空选择框。所以这是我使用的代码：

Bla.php :: Bla->getInputFilter()

```
$inputFilter->add($factory->createInput(array(
   'type' => 'Zend\InputFilter\Select',
   'name' => 'payment_type',
   'required' => true,
   'filters'  => array(
       array('name' => 'Int'),
   ),
))); 
```

BlaForm.php :: BlaForm->__construct():

```
$this->add(array(
    'type' => 'Zend\Form\Element\Select',
    'name' => 'payment_type',
    'options' => array(
        'label' => 'Payment',
        'value_options' => array(
            0 => 'Nur Überweisung',
            1 => 'Nur Paypal',
            2 => 'Nur Barzahlung im Voraus',
        ),
    ),
    'attributes' => array(
        'value' => 0 //set selected to "Nur Überweisung"
    )
)); 
```

bla.php (查看)

```
<div class="control-group">
    <?php
        echo $this->formLabel($form->get('payment_type')->setLabelAttributes(array(
                 'class' => 'control-label'     
             )));
    ?>
    <div class="controls">
        <?=$this->formElement($form->get('payment_type'));?>
        <span class="help-inline"><?=$this->formElementErrors($form->get('payment_type'));?></span>
    </div>
</div> 
```

我已经尝试使用“options”而不是“value_options”，昨天我了解到它只是“value_options”的别名。在我看来，我也尝试了 formSelect() 而不是 formElement() ，但这也没有改变任何东西。我什至从字符串中删除了变音符号以进行测试......

有没有人遇到过同样的问题或有任何想法，我目前做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T14:03:01.013

我刚刚在本地针对当前的 master （rev 9747bd01d）尝试了您的示例，并且它们可以正常工作-在表单上使用 formCollection() ，或者在单个元素上使用 formElement() 或 formSelect() 。在每种情况下，我都会得到以下标记：

```
<select name="payment_type"><option value="0" selected="selected">Nur Überweisung</option>
<option value="1">Nur Paypal</option>
<option value="2">Nur Barzahlung im Voraus</option></select> 
```

你用的是什么版本的ZF2？请问您可以针对 2.0.2 或当前的 master 进行测试吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:02:50.147

我自己找到了解决方案。在 BlaForm.php 中，选择框元素的格式必须如下：

```
$this->add(array(
    'type' => 'Zend\Form\Element\Select',
    'name' => 'payment_type',
    'options' => array(
        'label' => 'Bezahlung',
    ),
    'attributes' => array(
        'options' => array(
            0 => 'Nurerweisung',
            1 => 'NurPaypal',
            2 => 'NurBarzahlung im Voraus',
            3 => 'NurBarzahlung am Bus',
        ),
        'value' => 2 //set selected to "public"
    )
)); 
```

“选项”和“值”需要嵌套在“属性”下......好吧，为什么不呢？我通过更深入地查看 Zend\Form\Element\Select 发现存在方法“getOptionAttributeValues()”的位置，这给了我提示。

# flash - 关于现有 fla 中字体的消息

> ID：12869212
> 
> 赞同：1
> 
> 时间：2012-10-13T01:41:20.350
> 
> 标签：flash, fonts

我收到一个 FLA，当我尝试在 Flash CS6 中运行时，我可以看到以下消息：

> 字体应该嵌入任何可以在运行时编辑的文本，而不是具有“使用设备字体”设置的文本。使用文本 > 字体嵌入命令嵌入字体。

这个 FLA 使用了我的 macbook 中没有的 2 种字体，但我相信 flash 会尝试映射到我系统中存在的一些字体（至少，当我打开 FLA 时，flash 会显示一个带有此选项的弹出窗口） .

我的问题是……这是怎么回事？我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:47:20.330

> **这是怎么回事？**

创建 fla 时，字体存在于系统中。现在，flash 发现缺少字体，因此在开始时会向您显示替代字体。

选择替代方案后，生成的 swf 也依赖于运行它的系统来安装字体。

> **我该如何解决？**

要修复第一个错误（选择替代方案），您必须安装字体。尝试用谷歌搜索字体名称。如果它是商业字体，您可能必须购买它。

现在，如果您需要确保在编译期间选择的字体在用户系统中可用，则必须嵌入该字体。

为此，请访问： `Text -> Fonts Embedding -> Select the font and add required symbols`

唯一的缺点是它增加了 swf 大小。

如果它是一种非常常见的字体（如 Arial），您可能只需将所有动态文本框设置为*“使用设备字体”*，这将完全消除字体错误。目前来说，您可能已经为 fla 中的动态文本框选择*了“动画抗锯齿”*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T17:58:05.523

另一种解决方案（@loxxy 答案的补充）

当 flash 显示字体丢失窗口时，记下丢失的字体：

转到：文本->字体嵌入->选择字体并删除之前记下的字体。

还可以根据需要添加备用字体。

现在flash不会再提示你了。

# windows - 如何仅从结果列表中获取第一个结果并设置为 var？

> ID：12869213
> 
> 赞同：0
> 
> 时间：2012-10-13T01:41:29.820
> 
> 标签：windows, batch-file

编写批处理脚本来查找正确的文件。

```
dir /o:-d /a:-d F:\ | findstr /i ".target." 
```

有上面的脚本，我的目标是只有第一个文件，并想存储文件名以供以后脚本使用。

有谁知道如何获取第一个文件并设置为 var？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:51:50.970

Here's one example for retrieving the first line of your slightly modified command line, and save the line into a variable `line1`. The `/b` parameter is added onto `dir` command, since we only want the file name. The `|` character in the command line also needs to be escaped by a `^` character.

```
@echo off
setlocal
set line1=
for /f "tokens=* delims=" %%A in ('dir /o:-d /a:-d /b F:\ ^| findstr /i ".target."') do (
  set line1=%%A
  rem exit loop immediately once we got the line
  goto next
)
:next
if "%line1%" != "" (
  echo First Line:
  echo %line1%
) else (
  echo No file is found
) 
```

# css - css防止图像形式扩大身体高度

> ID：12869214
> 
> 赞同：0
> 
> 时间：2012-10-13T01:41:34.423
> 
> 标签：css, parent, expand

我一直试图阻止我的背景图像扩大我的身体高度，但没有成功。我希望仅在内容增加时才扩展正文，而不是我的背景图像。

这是一个代码片段：

```
body
{
    background-color: #000000;
    color: #FFFFFF;
    font-family: Georgia, Verdana, Geneva, sans-serif;
    overflow-x: hidden;
}

#background_container img
{
    position: absolute;
    top: 0;
    left: 50%;
    margin: 0 0 0 -1250px;
    z-index: -10;
}

<body>

                <div id="background_container">

                    <img src="_images/main_background.jpg" width="2500" height="2003">

                </div>

                <div> 

            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 
            CONTENT GOES HERE 

            </div>

</body> 
```

它应该可以工作，因此只有在我有更多内容时才会扩展正文的高度，并且在这种情况发生之前不会有滚动条。

我根本不想使用任何 javascript。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:46:26.420

试试这个CSS：

```
body
{
    background-color: #000000;
    color: #FFFFFF;
    font-family: Georgia, Verdana, Geneva, sans-serif;
    overflow-x: hidden;
}
body > div
{
    background-image: url(_images/main_background.jpg);
    background-position: top center;
} 
```

用这个 html 代替

```
<body>
        <div> 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        CONTENT GOES HERE 
        </div>
</body> 
```

[演示](http://jsfiddle.net/dwMgw/2/) - 我在演示中使用了一些外部图像，因为我无法猜到您使用什么作为背景。我将 contenteditable 添加到 div 并使用 javascript 将其聚焦，这样您就可以开始输入并查看背景如何随着 div 的大小增长而随着 div 扩展。

# c# - 用于分隔函数中的参数的正则表达式

> ID：12869216
> 
> 赞同：2
> 
> 时间：2012-10-13T01:41:58.663
> 
> 标签：c#, regex, excel, arguments

我无法处理正则表达式来将参数与函数分开。该函数以下列方式接受参数：

```
FunctionName(arg1;arg2;...;argn) 
```

现在要使我的其余代码工作，我需要执行以下操作 - 将每个参数放在 () 中：

```
FunctionName((arg1);(arg2);(arg3)) 
```

问题是 arg 可以是任何东西——数字、运算符、其他函数

该解决方案的测试代码为：

正则表达式之前的函数：

```
Function1((a1^5-4)/2;1/sin(a2);a3;a4)+Function2(a1;a2;1/a3) 
```

在我需要得到这样的东西之后：

```
Function1(((a1^5-4)/2);(1/sin(a2));(a3);(a4))+Function2((a1);(a2);(1/a3)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:49:08.953

除非我遗漏了一些东西，否则它不是像替换和包围整个东西一样`;`简单`);(`吗`(` `)`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T06:15:36.507

这与嵌套函数的潜力相去甚远，`Regex`再加上这是一种正在修改的结构化语言，因此词法分析器/解析器方案更合适。

这是处理这种性质的事物的系统示例

首先，我们定义一些可以位于输入中的东西（要修改的表达式）

```
public interface ISourcePart
{
    /// <summary>
    /// Gets the string representation of the kind of thing we're working with
    /// </summary>
    string Kind { get; }

    /// <summary>
    /// Gets the position this information is found at in the original source
    /// </summary>
    int Position { get; }

    /// <summary>
    /// Gets a representation of this data as Token objects
    /// </summary>
    /// <returns>An array of Token objects representing the data</returns>
    Token[] AsTokens();
} 
```

接下来，我们将为房屋标记（源文本的可识别部分）定义一个构造

```
public class Token : ISourcePart
{
    public int Position { get; set; }

    public Token[] AsTokens()
    {
        return new[] {this};
    }

    public string Kind { get; set; }

    /// <summary>
    /// Gets or sets the value of the token
    /// </summary>
    public string Value { get; set; }

    /// <summary>
    /// Creates a new Token
    /// </summary>
    /// <param name="kind">The kind (name) of the token</param>
    /// <param name="match">The Match the token is to be generated from</param>
    /// <param name="index">The offset from the beginning of the file the index of the match is relative to</param>
    /// <returns>The newly created token</returns>
    public static Token Create(string kind, Match match, int index)
    {
        return new Token
        {
            Position = match.Index + index,
            Kind = kind,
            Value = match.Value
        };
    }

    /// <summary>
    /// Creates a new Token
    /// </summary>
    /// <param name="kind">The kind (name) of the token</param>
    /// <param name="value">The value to assign to the token</param>
    /// <param name="position">The absolute position in the source file the value is located at</param>
    /// <returns>The newly created token</returns>
    public static Token Create(string kind, string value, int position)
    {
        return new Token
        {
            Kind = kind,
            Value = value,
            Position = position
        };
    }
} 
```

在此示例中，我们将使用`Regex`es 来查找我们的令牌（以下 - 摘自我的演示项目中的 Program.cs）。

```
/// <summary>
/// Breaks an input string into recognizable tokens
/// </summary>
/// <param name="source">The input string to break up</param>
/// <returns>The set of tokens located within the string</returns>
static IEnumerable<Token> Tokenize(string source)
{
    var tokens = new List<Token>();
    var sourceParts = new[] { new KeyValuePair<string, int>(source, 0) };

    tokens.AddRange(Tokenize(OpenParen, "\\(", ref sourceParts));
    tokens.AddRange(Tokenize(CloseParen, "\\)", ref sourceParts));
    tokens.AddRange(Tokenize(Semi, ";", ref sourceParts));
    tokens.AddRange(Tokenize(Operator, "[\\^\\\\*\\+\\-/]", ref sourceParts));
    tokens.AddRange(Tokenize(Literal, "\\w+", ref sourceParts));

    return tokens.OrderBy(x => x.Position);
} 
```

如您所见，我已经为左括号和右括号、分号、基本数学运算符以及字母和数字定义了模式。

该`Tokenize`方法定义如下（再次来自我的演示项目中的 Program.cs）

```
/// <summary>
/// Performs tokenization of a collection of non-tokenized data parts with a specific pattern
/// </summary>
/// <param name="tokenKind">The name to give the located tokens</param>
/// <param name="pattern">The pattern to use to match the tokens</param>
/// <param name="untokenizedParts">The portions of the input that have yet to be tokenized (organized as text vs. position in source)</param>
/// <returns>The set of tokens matching the given pattern located in the untokenized portions of the input, <paramref name="untokenizedParts"/> is updated as a result of this call</returns>
static IEnumerable<Token> Tokenize(string tokenKind, string pattern, ref KeyValuePair<string, int>[] untokenizedParts)
{
    //Do a bit of setup
    var resultParts = new List<KeyValuePair<string, int>>();
    var resultTokens = new List<Token>();
    var regex = new Regex(pattern);

    //Look through all of our currently untokenized data
    foreach (var part in untokenizedParts)
    {
        //Find all of our available matches
        var matches = regex.Matches(part.Key).OfType<Match>().ToList();

        //If we don't have any, keep the data as untokenized and move to the next chunk
        if (matches.Count == 0)
        {
            resultParts.Add(part);
            continue;
        }

        //Store the untokenized data in a working copy and save the absolute index it reported itself at in the source file
        var workingPart = part.Key;
        var index = part.Value;

        //Look through each of the matches that were found within this untokenized segment
        foreach (var match in matches)
        {
            //Calculate the effective start of the match within the working copy of the data
            var effectiveStart = match.Index - (part.Key.Length - workingPart.Length);
            resultTokens.Add(Token.Create(tokenKind, match, part.Value));

            //If we didn't match at the beginning, save off the first portion to the set of untokenized data we'll give back
            if (effectiveStart > 0)
            {
                var value = workingPart.Substring(0, effectiveStart);
                resultParts.Add(new KeyValuePair<string, int>(value, index));
            }

            //Get rid of the portion of the working copy we've already used
            if (match.Index + match.Length < part.Key.Length)
            {
                workingPart = workingPart.Substring(effectiveStart + match.Length);
            }
            else
            {
                workingPart = string.Empty;
            }

            //Update the current absolute index in the source file we're reporting to be at
            index += effectiveStart + match.Length;
        }

        //If we've got remaining data in the working copy, add it back to the untokenized data
        if (!string.IsNullOrEmpty(workingPart))
        {
            resultParts.Add(new KeyValuePair<string, int>(workingPart, index));
        }
    }

    //Update the untokenized data to contain what we couldn't process with this pattern
    untokenizedParts = resultParts.ToArray();
    //Return the tokens we were able to extract
    return resultTokens;
} 
```

现在我们已经有了处理标记化数据的方法和类型，我们需要能够识别更大含义的片段，比如对简单函数（如`sin(x)`）、复杂函数（如`Function1(a1;a2;a3)`）、基本数学运算（如`+`, `-`, `*`, 等）等等。我们将制作一个简单的解析器来处理它；首先，我们将为解析节点定义匹配条件。

```
public class ParseNodeDefinition
{
    /// <summary>
    /// The set of parse node definitions that could be transitioned to from this one
    /// </summary>
    private readonly IList<ParseNodeDefinition> _nextNodeOptions;

    /// <summary>
    /// Creates a new ParseNodeDefinition
    /// </summary>
    private ParseNodeDefinition()
    {
        _nextNodeOptions = new List<ParseNodeDefinition>();
    }

    /// <summary>
    /// Gets whether or not this definition is an acceptable ending point for the parse tree
    /// </summary>
    public bool IsValidEnd { get; private set; }

    /// <summary>
    /// Gets the name an item must have for it to be matched by this definition
    /// </summary>
    public string MatchItemsNamed { get; private set; }

    /// <summary>
    /// Gets the set of parse node definitions that could be transitioned to from this one
    /// </summary>
    public IEnumerable<ParseNodeDefinition> NextNodeOptions
    {
        get { return _nextNodeOptions; }
    }

    /// <summary>
    /// Gets or sets the tag that will be associated with the data if matched
    /// </summary>
    public string Tag { get; set; }

    /// <summary>
    /// Creates a new ParseNodeDefinition matching items with the specified name/kind.
    /// </summary>
    /// <param name="matchItemsNamed">The name of the item to be matched</param>
    /// <param name="tag">The tag to associate with matched items</param>
    /// <param name="isValidEnd">Whether or not the element is a valid end to the parse tree</param>
    /// <returns>A ParseNodeDefinition capable of matching items of the given name</returns>
    public static ParseNodeDefinition Create(string matchItemsNamed, string tag, bool isValidEnd)
    {
        return new ParseNodeDefinition { MatchItemsNamed = matchItemsNamed, Tag = tag, IsValidEnd = isValidEnd };
    }

    public ParseNodeDefinition AddOption(string matchItemsNamed)
    {
        return AddOption(matchItemsNamed, string.Empty, false);
    }

    public ParseNodeDefinition AddOption(string matchItemsNamed, string tag)
    {
        return AddOption(matchItemsNamed, tag, false);
    }

    /// <summary>
    /// Adds an option for a named node to follow this one in the parse tree the node is a part of
    /// </summary>
    /// <param name="matchItemsNamed">The name of the item to be matched</param>
    /// <param name="tag">The tag to associate with matched items</param>
    /// <param name="isValidEnd">Whether or not the element is a valid end to the parse tree</param>
    /// <returns>The ParseNodeDefinition that has been added</returns>
    public ParseNodeDefinition AddOption(string matchItemsNamed, string tag, bool isValidEnd)
    {
        var node = Create(matchItemsNamed, tag, isValidEnd);
        _nextNodeOptions.Add(node);
        return node;
    }

    public ParseNodeDefinition AddOption(string matchItemsNamed, bool isValidEnd)
    {
        return AddOption(matchItemsNamed, string.Empty, isValidEnd);
    }

    /// <summary>
    /// Links the given node as an option for a state to follow this one in the parse tree this node is a part of
    /// </summary>
    /// <param name="next">The node to add as an option</param>
    public void LinkTo(ParseNodeDefinition next)
    {
        _nextNodeOptions.Add(next);
    }
} 
```

这将让我们按名称匹配单个元素（无论是`ParseTree`稍后定义的）还是 a`Token`因为它们都实现了`ISourcePart`接口。接下来我们将创建一个`ParseTreeDefinition`允许我们指定`ParseNodeDefinitions`匹配序列的。

```
public class ParseTreeDefinition
{
    /// <summary>
    /// The set of parse node definitions that constitute an initial match to the parse tree
    /// </summary>
    private readonly IList<ParseNodeDefinition> _initialNodeOptions;

    /// <summary>
    /// Creates a new ParseTreeDefinition
    /// </summary>
    /// <param name="name">The name to give to parse trees generated from full matches</param>
    public ParseTreeDefinition(string name)
    {
        _initialNodeOptions = new List<ParseNodeDefinition>();
        Name = name;
    }

    /// <summary>
    /// Gets the set of parse node definitions that constitute an initial match to the parse tree
    /// </summary>
    public IEnumerable<ParseNodeDefinition> InitialNodeOptions { get { return _initialNodeOptions; } }

    /// <summary>
    /// Gets the name of the ParseTreeDefinition
    /// </summary>
    public string Name { get; private set; }

    /// <summary>
    /// Adds an option for a named node to follow this one in the parse tree the node is a part of
    /// </summary>
    /// <param name="matchItemsNamed">The name of the item to be matched</param>
    /// <returns>The ParseNodeDefinition that has been added</returns>
    public ParseNodeDefinition AddOption(string matchItemsNamed)
    {
        return AddOption(matchItemsNamed, string.Empty, false);
    }

    /// <summary>
    /// Adds an option for a named node to follow this one in the parse tree the node is a part of
    /// </summary>
    /// <param name="matchItemsNamed">The name of the item to be matched</param>
    /// <param name="tag">The tag to associate with matched items</param>
    /// <returns>The ParseNodeDefinition that has been added</returns>
    public ParseNodeDefinition AddOption(string matchItemsNamed, string tag)
    {
        return AddOption(matchItemsNamed, tag, false);
    }

    /// <summary>
    /// Adds an option for a named node to follow this one in the parse tree the node is a part of
    /// </summary>
    /// <param name="matchItemsNamed">The name of the item to be matched</param>
    /// <param name="tag">The tag to associate with matched items</param>
    /// <param name="isValidEnd">Whether or not the element is a valid end to the parse tree</param>
    /// <returns>The ParseNodeDefinition that has been added</returns>
    public ParseNodeDefinition AddOption(string matchItemsNamed, string tag, bool isValidEnd)
    {
        var node = ParseNodeDefinition.Create(matchItemsNamed, tag, isValidEnd);
        _initialNodeOptions.Add(node);
        return node;
    }

    /// <summary>
    /// Adds an option for a named node to follow this one in the parse tree the node is a part of
    /// </summary>
    /// <param name="matchItemsNamed">The name of the item to be matched</param>
    /// <param name="isValidEnd">Whether or not the element is a valid end to the parse tree</param>
    /// <returns>The ParseNodeDefinition that has been added</returns>
    public ParseNodeDefinition AddOption(string matchItemsNamed, bool isValidEnd)
    {
        return AddOption(matchItemsNamed, string.Empty, isValidEnd);
    }

    /// <summary>
    /// Attempts to follow a particular branch in the parse tree from a given starting point in a set of source parts
    /// </summary>
    /// <param name="parts">The set of source parts to attempt to match in</param>
    /// <param name="startIndex">The position to start the matching attempt at</param>
    /// <param name="required">The definition that must be matched for the branch to be followed</param>
    /// <param name="nodes">The set of nodes that have been matched so far</param>
    /// <returns>true if the branch was followed to completion, false otherwise</returns>
    private static bool FollowBranch(IList<ISourcePart> parts, int startIndex, ParseNodeDefinition required, ICollection<ParseNode> nodes)
    {
        if (parts[startIndex].Kind != required.MatchItemsNamed)
        {
            return false;
        }

        nodes.Add(new ParseNode(parts[startIndex], required.Tag));

        return parts.Count > (startIndex + 1) && required.NextNodeOptions.Any(x => FollowBranch(parts, startIndex + 1, x, nodes)) || required.IsValidEnd;
    }

    /// <summary>
    /// Attempt to match the parse tree definition against a set of source parts
    /// </summary>
    /// <param name="parts">The source parts to match against</param>
    /// <returns>true if the parse tree was matched, false otherwise. parts is updated by this method to consolidate matched nodes into a ParseTree</returns>
    public bool Parse(ref IList<ISourcePart> parts)
    {
        var partsCopy = parts.ToList();

        for (var i = 0; i < parts.Count; ++i)
        {
            var tree = new List<ParseNode>();

            if (InitialNodeOptions.Any(x => FollowBranch(partsCopy, i, x, tree)))
            {
                partsCopy.RemoveRange(i, tree.Count);
                partsCopy.Insert(i, new ParseTree(Name, tree.ToArray(), tree[0].Position));
                parts = partsCopy;
                return true;
            }
        }

        return false;
    }
} 
```

当然，如果没有一些地方来存储我们迄今为止定义的匹配器的结果，这些对我们没有多大好处，所以让我们定义`ParseTree`a`ParseNode`是一个`ParseTree`简单的`ParseNode`对象集合，它`ParseNode`是围绕 a`ParseTree`或`Token`（或更多）的包装器一般任何`ISourcePart`）。

```
public class ParseTree : ISourcePart
{
    /// <summary>
    /// Creates a new ParseTree
    /// </summary>
    /// <param name="kind">The kind (name) of tree this is</param>
    /// <param name="nodes">The nodes the tree matches</param>
    /// <param name="position">The position in the source file this tree is located at</param>
    public ParseTree(string kind, IEnumerable<ISourcePart> nodes, int position)
    {
        Kind = kind;
        ParseNodes = nodes.ToList();
        Position = position;
    }

    public string Kind { get; private set; }

    public int Position { get; private set; }

    /// <summary>
    /// Gets the nodes that make up this parse tree
    /// </summary>
    public IList<ISourcePart> ParseNodes { get; internal set; }

    public Token[] AsTokens()
    {
        return ParseNodes.SelectMany(x => x.AsTokens()).ToArray();
    }
}

public class ParseNode : ISourcePart
{
    /// <summary>
    /// Creates a new ParseNode
    /// </summary>
    /// <param name="sourcePart">The data that was matched to create this node</param>
    /// <param name="tag">The tag data (if any) associated with the node</param>
    public ParseNode(ISourcePart sourcePart, string tag)
    {
        SourcePart = sourcePart;
        Tag = tag;
    }

    public string Kind { get { return SourcePart.Kind; } }

    /// <summary>
    /// Gets the tag associated with the matched data
    /// </summary>
    public string Tag { get; private set; }

    /// <summary>
    /// Gets the data that was matched to create this node
    /// </summary>
    public ISourcePart SourcePart { get; private set; }

    public int Position { get { return SourcePart.Position; } }

    public Token[] AsTokens()
    {
        return SourcePart.AsTokens();
    }
} 
```

这就是我们需要的构造，所以我们将开始配置我们的解析树定义。从这里开始的代码来自我演示中的 Program.cs。

正如您可能已经注意到，在上面关于为每个标记声明模式的块中，有一些值被引用但未定义，在这里它们是。

```
private const string CloseParen = "CloseParen";
private const string ComplexFunctionCall = "ComplexFunctionCall";
private const string FunctionCallStart = "FunctionCallStart";
private const string Literal = "Literal";
private const string OpenParen = "OpenParen";
private const string Operator = "Operator";
private const string ParenthesisRequiredElement = "ParenthesisRequiredElement";
private const string ParenthesizedItem = "ParenthesizedItem";
private const string Semi = "Semi";
private const string SimpleFunctionCall = "SimpleFunctionCall"; 
```

让我们首先定义一个匹配字面量 ( `\w+`pattern) 的模式，后跟开括号；我们将使用它来匹配诸如`sin(`or之类的东西`Function1(`。

```
static ParseTreeDefinition CreateFunctionCallStartTree()
{
    var tree = new ParseTreeDefinition(FunctionCallStart);
    var name = tree.AddOption(Literal);
    name.AddOption(OpenParen, true);
    return tree;
} 
```

真的不是很多，设置一棵树，为第一个匹配的内容添加一个选项作为文字，添加一个作为左括号匹配的下一个选项，并说它可以结束解析树。现在对于一个稍微复杂一点的二元数学运算（想不出任何需要包含的一元运算）

```
static ParseTreeDefinition CreateBinaryOperationResultTree()
{
    var tree = new ParseTreeDefinition(Literal);
    var parenthesizedItem = tree.AddOption(ParenthesizedItem);
    var literal = tree.AddOption(Literal);
    var simpleCall = tree.AddOption(SimpleFunctionCall);
    var complexCall = tree.AddOption(ComplexFunctionCall);

    var @operator = parenthesizedItem.AddOption(Operator);
    literal.LinkTo(@operator);
    simpleCall.LinkTo(@operator);
    complexCall.LinkTo(@operator);

    @operator.AddOption(ParenthesizedItem, true);
    @operator.AddOption(Literal, true);
    @operator.AddOption(SimpleFunctionCall, true);
    @operator.AddOption(ComplexFunctionCall, true);
    return tree;
} 
```

这里我们说解析树可以以带括号的项目（like `(1/2)`）、文字（like `a5`or `3`）、简单的调用（like `sin(4)`）或复杂的调用（like`Function1(a1;a2;a3)`）。本质上，我们刚刚定义了左侧操作数的选项。接下来，我们说带括号的项目后面必须跟一个运算符（从开头声明的模式中的数学运算符之一），为了方便起见，我们将说左侧操作数的所有其他选项可以进展到相同的状态（有操作员）。接下来，操作员也必须有右手边，所以我们给它一组重复的选项以继续前进。请注意，它们与左侧操作数的定义不同，它们设置了能够终止解析树的标志。请注意，解析树被命名为 Literal 以避免必须指定另一种元素来匹配所有地方。接下来，带括号的项目：

```
static ParseTreeDefinition CreateParenthesizedItemTree()
{
    var tree = new ParseTreeDefinition(ParenthesizedItem);
    var openParen = tree.AddOption(OpenParen);

    var nestedSimpleCall = openParen.AddOption(SimpleFunctionCall);
    var nestedComplexCall = openParen.AddOption(ComplexFunctionCall);
    var arg = openParen.AddOption(Literal);
    var parenthesizedItem = openParen.AddOption(ParenthesizedItem);

    var closeParen = nestedSimpleCall.AddOption(CloseParen, true);
    arg.LinkTo(closeParen);
    parenthesizedItem.LinkTo(closeParen);
    nestedComplexCall.LinkTo(closeParen);
    return tree;
} 
```

这个很好，很容易，从一个括号开始，几乎任何东西都跟着它，然后用另一个括号来结束它。简单的调用（如`sin(x)`）

```
static ParseTreeDefinition CreateSimpleFunctionCallTree()
{
    var tree = new ParseTreeDefinition(SimpleFunctionCall);
    var openParen = tree.AddOption(FunctionCallStart);

    var nestedItem = openParen.AddOption(ParenthesizedItem);
    var nestedSimpleCall = openParen.AddOption(SimpleFunctionCall);
    var nestedComplexCall = openParen.AddOption(ComplexFunctionCall);
    var arg = openParen.AddOption(Literal);
    var parenthesizedItem = openParen.AddOption(ParenthesizedItem);

    var closeParen = nestedSimpleCall.AddOption(CloseParen, true);
    arg.LinkTo(closeParen);
    nestedItem.LinkTo(closeParen);
    parenthesizedItem.LinkTo(closeParen);
    nestedComplexCall.LinkTo(closeParen);

    return tree;
} 
```

复杂的调用（如`Function1(a1;a2;a3)`）

```
static ParseTreeDefinition CreateComplexFunctionCallTree()
{
    var tree = new ParseTreeDefinition(ComplexFunctionCall);
    var openParen = tree.AddOption(FunctionCallStart);

    var arg = openParen.AddOption(Literal, ParenthesisRequiredElement);
    var simpleCall = openParen.AddOption(SimpleFunctionCall, ParenthesisRequiredElement);
    var complexCall = openParen.AddOption(ComplexFunctionCall, ParenthesisRequiredElement);
    var nested = openParen.AddOption(ParenthesizedItem);

    var semi = arg.AddOption(Semi);
    simpleCall.LinkTo(semi);
    complexCall.LinkTo(semi);
    nested.LinkTo(semi);

    var arg2 = semi.AddOption(Literal, ParenthesisRequiredElement);
    var simpleCall2 = semi.AddOption(SimpleFunctionCall, ParenthesisRequiredElement);
    var complexCall2 = semi.AddOption(ComplexFunctionCall, ParenthesisRequiredElement);
    var nested2 = semi.AddOption(ParenthesizedItem);
    arg2.LinkTo(semi);
    simpleCall2.LinkTo(semi);
    complexCall2.LinkTo(semi);
    nested2.LinkTo(semi);

    var closeParen = arg2.AddOption(CloseParen, true);
    arg2.LinkTo(closeParen);
    simpleCall2.LinkTo(closeParen);
    complexCall2.LinkTo(closeParen);
    return tree;
} 
```

这就是我们需要的所有树，所以让我们看看运行这一切的代码

```
static void Main()
{
    //The input string
    const string input = @"Function1((a1^5-4)/2;1/sin(a2);a3;a4)+Function2(a1;a2;1/a3)";
    //Locate the recognizable tokens within the source
    IList<ISourcePart> tokens = Tokenize(input).Cast<ISourcePart>().ToList();
    //Create the parse trees we'll need to be able to recognize the different parts of the input
    var functionCallStartTree = CreateFunctionCallStartTree();
    var parenthethesizedItemTree = CreateParenthesizedItemTree();
    var simpleFunctionCallTree = CreateSimpleFunctionCallTree();
    var complexFunctionCallTree = CreateComplexFunctionCallTree();
    var binaryOpTree = CreateBinaryOperationResultTree();

    //Parse until we can't parse anymore
    while (functionCallStartTree.Parse(ref tokens) || binaryOpTree.Parse(ref tokens) || parenthethesizedItemTree.Parse(ref tokens) || simpleFunctionCallTree.Parse(ref tokens) || complexFunctionCallTree.Parse(ref tokens))
    { }

    //Run our post processing to fix the parenthesis in the input
    FixParenthesis(ref tokens);

    //Collapse our parse tree(s) back to a string
    var values = tokens.OrderBy(x => x.Position).SelectMany(x => x.AsTokens()).Select(x => x.Value);

    //Print out our results and wait
    Console.WriteLine(string.Join(string.Empty, values));
    Console.ReadLine();
} 
```

我们唯一需要定义的是如何实际包装“复杂”调用的参数列表中的元素。这是由`FixParenthesis`方法处理的。

```
private static void FixParenthesis(ref IList<ISourcePart> items)
{
    //Iterate through the set we're examining
    for (var i = 0; i < items.Count; ++i)
    {
        var parseNode = items[i] as ParseNode;

        //If we've got a parse node...
        if (parseNode != null)
        {
            var nodeTree = parseNode.SourcePart as ParseTree;
            //If the parse node represents a parse tree...
            if (nodeTree != null)
            {
                //Fix parenthesis within the tree
                var nodes = nodeTree.ParseNodes;
                FixParenthesis(ref nodes);
                nodeTree.ParseNodes = nodes;
            }

            //If this parse node required parenthesis, replace the subtree and add them
            if (parseNode.Tag == ParenthesisRequiredElement)
            {
                var nodeContents = parseNode.AsTokens();
                var combined = string.Join(string.Empty, nodeContents.OrderBy(x => x.Position).Select(x => x.Value));
                items[i] = Token.Create(parseNode.Kind, string.Format("({0})", combined), parseNode.Position);
            }

            continue;
        }

        var parseTree = items[i] as ParseTree;

        //If we've got a parse tree...
        if (parseTree != null)
        {
            //Fix parenthesis within the tree
            var nodes = parseTree.ParseNodes;
            FixParenthesis(ref nodes);
            parseTree.ParseNodes = nodes;
        }
    }
} 
```

无论如何，我希望这有助于或至少提供了一个有趣的消遣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:55:45.780

使用`Regex`：

```
(?:([^;()]+);?)+ 
```

和`LINQ`：

```
string result = "FunctionName(" +
                String.Join(";",
                            from Capture capture in
                                Regex.Matches(inputString, @"FunctionName\((?:([^;()]+);?)+\)")[0].Groups[1].
                                Captures
                            select "(" + capture.Value + ")") + ")"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T09:40:54.940

我可能设法处理它（现在正在测试）。原来是5阶段操作。假设 '{' 和 ';' 不能发生在我这样做的功能中：

```
 sBuffer = Regex.Replace(sBuffer, @"(?<sep>[;])", "};{");
        sBuffer = Regex.Replace(sBuffer, @"([(])(?<arg>.+?)[}]", "({${arg}}");
        sBuffer = Regex.Replace(sBuffer, @"([;])(?<arg>.+?)([)]){1}", ";${arg}})");
        sBuffer = Regex.Replace(sBuffer, @"{", "(");
        sBuffer = Regex.Replace(sBuffer, @"}", ")"); 
```

0。 `function1((a1^5-4)/2;1/sin(a2);a3;a4)+function2(a1;a2;1/a3)'`

1.第一行替换；和 };{

```
function1((a1^5-4)/2};{1/sin(a2)};{a3};{a4)+function2(a1};{a2};{1/a3) 
```

2.对于第一个参数 - 在包含“）”的（或（非预期）参数之后）替换（arg};with（{arg}：

```
function1({(a1^5-4)/2};{1/sin({a2)};{a3};{a4)+function2({a1};{a2};{1/a3) 
```

3\. 函数的 and 相同：{arg) 和 {arg}：

```
function1({(a1^5-4)/2};{1/sin({a2})};{a3};{a4})+function2({a1};{a2};{1/a3}) 
```

4.5\. 将 '{' 和 '}' 替换为 '(' ')'：

```
function1(((a1^5-4)/2);(1/sin((a2)));(a3);(a4))+function2((a1);(a2);(1/a3)) 
```

我们有一些额外的 () 特别是当参数本身被 '(' ')' （嵌套函数）包围时，但它并没有改变，因为代码随后通过反向波兰表示法进行

这是我的第一个 regexp 代码（几天前我发现了 rgexp - 我是初学者）。我希望它满足所有情况（至少那些可能出现在 excel 公式中的情况）

# while-loop - 为什么java程序跳过我的内循环？

> ID：12869220
> 
> 赞同：1
> 
> 时间：2012-10-13T01:42:53.917
> 
> 标签：while-loop, nested-loops, do-while

您好，我是一个开始编程的学生，我正在练习使用循环来验证输入。不幸的是，循环工作但完全跳过了内部循环......我现在收到错误消息或提示......

这是我的代码：[我从本网站上关于验证输入的答案中借用了它，因此我可以对其进行测试。]

```
import java.util.Scanner;

public class ValidationTest
{
public static void main(String[] args)
{
    Scanner sc = new Scanner(System.in);
    int number;
    do {
        System.out.println("Please enter a positive number!");
        while (!sc.hasNextInt()) 
        {
            System.out.println("That's not a number!");
            sc.next(); // this is important!
        }  
        number = sc.nextInt();
       } while (number <= 0);
    System.out.println("Thank you! Got " + number);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T01:45:35.570

如果第一次执行循环时`while`条件（在括号后`while`）为假，则循环将被跳过`while`。

您可以使用调试器单步执行代码以查看发生了什么。

如果您不知道如何使用调试器，请停止您正在做的所有事情并进行一些 Google 搜索或任何您需要做的事情来了解如何使用调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T01:47:58.357

您的 int 编号是 NaN （不是数字）。尝试将其设置为-1，这样您就可以进入第一个循环。在第二个循环中， sc 从未扫描输入，它只是被初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T01:56:07.970

内循环：

```
 while (!sc.hasNextInt()) 
    {
        System.out.println("That's not a number!");
        sc.next(); // this is important!
    }  
    number = sc.nextInt(); 
```

只检查你输入的不是数字，如果你输入-123，这个函数`!sc.hasNextInt()`是假的，所以它会跳过循环，如果你想检查数字是否为负，在分配数字值之后添加这个检查：

```
 if(number <= 0 ){
     System.out.println("The number is negative!");
 } 
```

您不必再创建一个循环来检查数字是否为负，因为第一个循环有它，并且`do...while`循环将确保您必须至少运行一次循环

# jquery - jQuery自动完成类，如何获取id

> ID：12869221
> 
> 赞同：8
> 
> 时间：2012-10-13T01:43:07.687
> 
> 标签：jquery, jquery-ui, jquery-autocomplete, jquery-ui-autocomplete

我已经为此工作了一段时间，似乎无处可去。基本上，我按类对一堆输入进行了自动完成，但我需要获取特定的输入 id 来构建对象以发布 ajax（我必须对这个项目使用 POST 而不是 GET）。

```
$(".input_autocomplete").autocomplete({
  source: function( request, response ) {
  // here is where I get the hash from local storage,
  // reference the id and build the object
  // tried this.id, $(this).prop('id'), no luck
  $.ajax({
    url: '/somepath/filename.htm',
    contentType: 'application/json',
    dataType: 'json',
    type: 'POST',
    data: JSON.stringify(obj),
    success: function(json) {
      return {
        label: item.label,
        value: item.label
      }
    },
    error: function() {
      // error handling
    }
   }); // ajax
 } // source
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T01:47:47.680

尝试：

```
$(this.element).prop("id"); 
```

或者：

```
this.element[0].id; 
```

在`source`回调内部，`this`指的是小部件实例。为了获取小部件附加到的元素，您应该使用`this.element`jQuery 对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T02:15:00.683

我在我的一个项目中尝试过。这对我有用：

```
$(this.element.get(0)).attr('id'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-08T20:20:30.230

我的情况与您相似，`user1572796`这对我有用：

```
$(this).prop("id"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-15T20:20:05.523

我只是花了一段时间自己拼凑一个解决方案。如果有帮助，这对我有用：

在你的类存在后调用它（对于大多数情况，这是在文档准备好的，对于我自己来说，我必须在数据表初始化 MyClassName 之后调用这个函数）

```
 $('.MyClassName').each(function(index) {

  MyID = $(this).attr("id")

  $('#'+MyID).autocomplete({

  source: function(request, response) {

        var elementID = this.element[0].id     //!!! This is what did the trick ***

            $.ajax({
                url: "/MyController/MyFunction",
                dataType: "json",
                data: {

                    MySearchTerm: $('#'+elementID).val()
                },
                success: function(data) {
                ... 
```

# php - 处理 CURL 调用 XML 的结果

> ID：12869223
> 
> 赞同：1
> 
> 时间：2012-10-13T01:43:19.493
> 
> 标签：php, xml, api, parsing

今天我一直在处理一些代码，想知道是否有人可以为我指出比现在更好的方向。

我有 PHP 代码通过 send_request_via_curl($host,$path,$content) 发送 XML 来获取数据数组。

我的功能：

```
function send_request_via_curl($host,$path,$content)
{
$posturl = "https://" . $host . $path;
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $posturl);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: application/x-www-form-urlencoded"));
    curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml;charset=utf-8"));
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
//  curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    $response = curl_exec($ch);
    return $response;
}

$headers = array(
    "Content-type: text/xml;charset=utf-8",
    "Accept: application/xml",
    "Cache-Control: no-cache",
    "Pragma: no-cache",
    "Content-length: " . strlen($content),
    );

$content = '<?xml version="1.0" encoding="utf-8"?>
                <soap:Envelope    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
                <soap:Body>
                <GetLocations xmlns="http://tempuri.org/">
                    <AuthLogin>ClientName</AuthLogin>
                    <UserName>MyUser</UserName>
                    <Password>SomePassword</Password>
                </GetLocations>
            </soap:Body>
            </soap:Envelope>';

$response = send_request_via_curl($host,$path,$content); 
```

* * *

编辑：

我越来越近了，我实现了 Baba 的代码，现在得到了一个不同的错误：

警告：未知：节点不再存在于......

我有上面相同的代码，现在处理响应：

```
if ($response)
{

$xml = new SimpleXMLElement($response);
$xml->registerXPathNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/");
$path = $xml->xpath("//soap:Body");
$path = $path[0] ;
foreach($path->GetLocationsResponse->GetLocationsResult->SearchLocations->children() as $table)
{
echo $table->Table->LocationName . "<br>";
} 
```

这是返回的真正 XML - 我注意到 Firebug 将所有 XML 都设为小写，而源代码混合了我认为可能很重要的大写字母。

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<GetLocationsResponse xmlns="http://tempuri.org/">
<GetLocationsResult>
<SearchLocations>
<Table>
<LocationName>
</Table>
<Table>
<LocationId>103501</LocationId>
<LocationName>Albuquerque, New Mexico, USA</LocationName>
</Table>
<Table>
<LocationId>101600</LocationId>
<LocationName>Atlanta, Georgia, USA</LocationName>
</Table>
</SearchLocations>
</GetLocationsResponse>
</GetLocationsResult>
</soap:Body>
</soap:Envelope> 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T01:52:22.300

您得到的响应不是`HTML`，但`XML`看起来您的 XML 错误，标签无效，或者您一定犯了错误……请参阅

```
 <LocationName>Hawaii</Location>
                             ^--- it should be LocationName 
```

应该是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
        <getlocationsresponse xmlns="http://tempuri.org">
            <getlocationsresult>
                <SearchLocations>
                    <Table>
                        <LocationID>10322</LocationID>
                        <LocationName>Hawaii</LocationName>
                    </Table>
                </SearchLocations>
            </getlocationsresult>
        </getlocationsresponse>
    </soap:Body>
</soap:Envelope> 
```

阅读此 XML

```
$xml = new SimpleXMLElement($data);
$xml->registerXPathNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/");
$path = $xml->xpath("//soap:Body");
$path = $path[0] ;
foreach($path->getlocationsresponse->getlocationsresult->SearchLocations->children() as $table)
{
     echo $table->LocationName . "<br>";
} 
```

输出

```
 Hawaii 
```

**- - - 编辑 - - - -**

你的新 XML 又错了.. 这应该是它的样子[http://codepad.org/JgJfqnrA](http://codepad.org/JgJfqnrA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:43:59.730

Baba 是正确的，用于解析 XML 的内置函数是执行此操作的最佳方法，但如果 XML 确实带有不匹配的标签，您也可以使用正则表达式。

```
function regex_all( $capture, $haystack, $return=1 ) {
  preg_match_all( "#$capture#", $haystack, $match );
  return $match[ $return ];
}

foreach( regex_all('<LocationName>(.*?)<\/', $data) as $locationName ) {
  echo "$locationName<br>";
} 
```

这不是首选方法，因为正则表达式不那么可靠。

# ruby-on-rails - Rails / ActionMailer 替代 SMTP

> ID：12869230
> 
> 赞同：1
> 
> 时间：2012-10-13T01:45:12.633
> 
> 标签：ruby-on-rails, email, smtp, actionmailer

一个客户的 IT 部门告诉我，SMTP 不够安全，无法从我构建的 Rails 应用程序（托管在 Heroku 上）通过他们的 Exchange 服务器发送邮件。这对我来说似乎很疯狂，但我仍然需要找到替代方案。是否有任何其他协议可以与 Rails 和 ActionMailer 一起使用，我应该调查发送邮件？谢谢！

# java - 如何在 Java 中过滤单词？

> ID：12869231
> 
> 赞同：2
> 
> 时间：2012-10-13T01:45:33.013
> 
> 标签：java

我想检查在某些情况下是否有“坏”字，例如检查注册表单中的 ID。但我不知道如何检查它.. 底部代码是我得到的。

```
String words = "admin,administrator,babo,sir,melon";

public boolean checkWord(String input) {
   if(something here that i need to find??) return false;
   else return true;
} 
```

单词的模式以逗号分隔，我真的需要帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T01:51:18.073

最简单的事情是在排序数组中搜索一个单词，如下所示：

```
private static String[] WORDS = new String[] {
    "admin", "administrator", "babo", "melon", "sir"
};

public boolean checkWord(String input) {
    return Arrays.binarySearch(WORDS, input) < 0; // Not found
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T01:53:21.263

另一个示例，如果您想在输入中查找一组单词

```
public class TestCheckWord {
    static String words = "admin,administrator,babo,sir,melon";
    public static void main (String args[]){        
        System.out.println(checkWord("Hello melon"));
        System.out.println(checkWord("Hello sir"));
        System.out.println(checkWord("Hello you"));
    }
    public static boolean checkWord(String input) {
        String wordArray[] = words.split(",");
        for(int i=0; i<wordArray.length; i++){
            if(input.indexOf(wordArray[i])>-1)
                return true;            
        }
        return false;
    }
} 
```

甚至另一种仅在您的输入仅包含一个单词时才查找单词的方法。（在这种情况下，数组中的顺序无关紧要。

```
import java.util.Arrays;
import java.util.HashSet;
import java.util.Set;
public class TestCheckWord2 {
    public static void main (String args[]){        
        System.out.println(checkWord("babo"));
        System.out.println(checkWord("bobo"));      
    }
    private static String[] WORDS =  {"admin", "babo", "melon", "sir", "administrator"};
    private static Set<String> mySet = new HashSet<String>(Arrays.asList(WORDS));
    public static boolean checkWord(String input) { 
        return mySet.contains(input);
    }   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-14T13:03:21.293

```
public class steve {

    static boolean checkWord(String input, String words) {
        if(words.contains(input)) {
            return true;
        }
        else {
            return false;
        }

    }

    public static void main(String[] args) {

        String words = "admin,administrator,babo,sir,melon";

        System.out.print(steve.checkWord("babo",words));

    }

} 
```

# threadpool - 为什么我们需要在 .Net 中设置 Max 和 Min 线程？

> ID：12869234
> 
> 赞同：0
> 
> 时间：2012-10-13T01:45:43.527
> 
> 标签：threadpool

我在一个线程项目中苦苦挣扎。我遇到了 setMaxThread、SetMinThread、GetMaxThread 和 GetAvailableThread。我没有找到任何充分的理由在线程池中使用这些方法。

在这里帮助我，我们为什么需要它以及何时使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T08:37:46.050

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

> **每个进程**有一个线程池。从 .NET Framework 4 开始，进程的线程池的默认大小取决于几个因素，例如虚拟地址空间的大小。进程可以调用 GetMaxThreads 方法来确定线程数。可以使用 SetMaxThreads 方法更改线程池中的线程数。

如果您不想使用默认值，请使用 setter 方法更改进程的线程池。

# asp.net - asp.net UpdatePanel 无法正常工作

> ID：12869235
> 
> 赞同：2
> 
> 时间：2012-10-13T01:45:53.597
> 
> 标签：asp.net, ajax.net

我使用 UpdatePanel 用一些搜索结果刷新数据网格，但不工作，整个页面进入回发状态。我希望有人可以帮助我，不能让它正常工作。. 谢谢。这是我的代码：

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>

            <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr>
                    <td align="left" class="pageTitle" valign="top">
                        <twc:LocalizedLiteral Text="CRMcontxt6" runat="server" />
                    </td>
                </tr>

                    <tr align="left" style="background-color: #9bbbe3">
                        <td align="left" colspan="3">
                            <asp:Label ID="lblSearch" Height="15" runat="server" Font-Bold="true" Font-Size="11"></asp:Label>
                            <asp:TextBox Width="500px" ID="Search" autoclick="BtnSearch" runat="server" CssClass="boxDesign" />
                            <asp:LinkButton  ID="BtnSearch" runat="server" CssClass="save" />
                         </td>
                    </tr>
                </table>

                   <asp:datagrid id="searchresults" runat="server">
           </ContentTemplate>

             <Triggers>
                <asp:AsyncPostBackTrigger ControlID="BtnSearch" />
            </Triggers>
            </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T19:13:26.470

这看起来像一个熟悉的 .NET 错误。在 LinkBut​​ton 上设置 ClientIDMode="AutoID" 应该可以解决它（顺便说一下，您可以删除触发器。不需要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T02:13:51.087

一些解决方案：

一个。尝试`UpdateMode = Conditional`在 UpdatePanel 中给予并尝试（当你给予触发器时，你必须定义它）

湾。尝试删除`<table>`，并将其替换为`<div>`，有时更新面板对 table 标记不友好。

C。如果上述方法不起作用，请先尝试删除触发器和更新模式条件，看看是否有效。因为如果这不起作用，则意味着更新面板内的内容有问题。您可能希望从一些控件开始深入了解您的问题。

d。我看到用户控件被调用 - 检查您是否在这些用户控件中正确放置了更新面板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T10:41:48.647

在更新面板中使用它：

```
UpdateMode="Conditional" ChildrenAsTriggers="true" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-02T09:30:05.043

检查您的 HTML 源代码是否没有 2 个或更多`<form>`标签。一个asp.net 页面通常应该只有一个`<form>`标签。

虽然到目前为止这个问题一直被问到没有答案，但我遇到了类似的问题，但发现了更新面板不起作用的原因：

当您`<form>`在某段 HTML 中有一个标记，然后将该 HTML 片段插入到`<form>`母版页的现有标记中时，您就会遇到问题。每次运行母版页的子页面并单击提交按钮时，按钮应该运行的代码都不会执行。相反，尽管有更新面板，但整个页面都会刷新，并且它还可能在页面的 URL 中添加一个查询字符串。

母版页的嵌套`<form>`标记是造成这种情况的原因。删除额外`<form>`标签后，一切都应该正常工作。

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T01:57:46.333

您错过了触发事件。您的触发器应如下所示

```
<Triggers>
            <asp:AsyncPostBackTrigger ControlID="BtnSearch" EventName="Click" />
</Triggers> 
```

不要忘记将`UpdateMode`更新面板的属性设置为`Conditional`

这是一个参考::[在 ASP.NET 4.0 C# 的 UpdatePanel 中使用触发器](http://v4.programminghelp.com/controls/using-triggers-in-an-updatepanel-in-asp-net-4-0-c/)

# asp.net-mvc - asp.net mvc 显示图像而不使用数据库

> ID：12869240
> 
> 赞同：1
> 
> 时间：2012-10-13T01:46:57.573
> 
> 标签：asp.net-mvc

我想在下一页显示我上传到服务器的图像和节点。

这是我的代码：'

```
public ActionResult Review(HttpPostedFileBase uploadfile)
        {

            string note = Request.Form["note"];
            string deliverytime = Request.Form["time"];
            HttpPostedFileBase imagetest = Request.Files["uploadfile"];
            System.Drawing.Bitmap bmpPostedImage = new System.Drawing.Bitmap(imagetest.InputStream);
            string imagestring = imagetest.ContentType.ToString();
            ViewBag.Mime = "image/jpeg";
Stream stream = uploadfile.InputStream;
                byte[] image = new byte[uploadfile.ContentLength];
                stream.Read(image, 0, uploadfile.ContentLength);
 ViewBag.Message = Convert.ToBase64String(image, Base64FormattingOptions.InsertLineBreaks);
                 ViewData["note"] = "user note:"+note;
               return PartialView();
} 
```

' 和 cshtml

```
@Html.Encode(ViewData["note"])<br />
<img src="data:@ViewBag.Mime;base64,@ViewBag.Message" /> 
```

图像无法在下一页显示。非常感谢你的帮助！

# sql-server - SQL Server 2012 Web Management Studio - 所有选项都在哪里？

> ID：12869241
> 
> 赞同：7
> 
> 时间：2012-10-13T01:46:59.170
> 
> 标签：sql-server, sql-server-2012

我刚刚安装了 SQL Server 2012 Web 版本，我注意到以前版本的 SQL Server Management Studio 中的许多选项在此版本中不可用。

简单的事情，例如右键单击表格并选择“设计”，或“编辑前 200 行”和“选择前 1000 行”。

我需要安装其他东西吗？其他地方有这些选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T00:52:58.533

您要连接到 SQL Azure 数据库吗？因为这些选项尚不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T08:47:58.957

您列出的内容可能属于“SQL 查询编辑和设计”，根据MSDN 的[此](http://msdn.microsoft.com/en-us/library/cc645993.aspx#Mgmt_tools)功能列表，该功能列表在 Web 版中不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:06:28.660

[试试这个：从http://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)下载并安装 Management Studio Express 包 (ENU\x64\SQLManagementStudio_x64_ENU.exe) 。

# scala - 匿名函数的参数类型必须是完全已知的。(SLS 8.5)

> ID：12869251
> 
> 赞同：44
> 
> 时间：2012-10-13T01:48:52.270
> 
> 标签：scala, lambda, pattern-matching, function-literal

我有一个函数文字

```
{case QualifiedType(preds, ty) =>
               t.ty = ty ;
               Some((emptyEqualityConstraintSet,preds)) } 
```

这会导致错误消息

```
missing parameter type for expanded function The argument types of an anonymous function
must be fully known. (SLS 8.5) Expected type was:
? => Option[(Typer.this.EqualityConstraintSet, Typer.this.TypeRelationSet)] 
```

我查看了[SLS 8.5](https://www.scala-lang.org/files/archive/spec/2.11/08-pattern-matching.html#pattern-matching-anonymous-functions)，但没有找到解释。

如果我自己将功能扩展为

```
{(qt : QualifiedType) =>
  qt match {case QualifiedType(preds, ty) =>
               t.ty = ty ;
               Some((emptyEqualityConstraintSet,preds)) }} 
```

错误消失了。

(a) 为什么这是一个错误？

(b) 我能做些什么来解决它？

我尝试了明显的修复，即`: QualifiedType`在模式和 => 之间添加，但这是一个语法错误。

* * *

我注意到的一件事是上下文有所不同。如果我使用函数文字作为声明为期望 a 的函数的参数`QualifiedType => B`，则没有错误。但是，如果我将它用作期望 a 的函数的参数`A => B`，则会出现错误。我希望这里发生的事情是，由于可以想象该模式可以应用于类型是 QualifiedType 的超类型的对象，编译器不愿意在不保证函数不会应用于的情况下分配明显的类型任何不是 QualifiedType 的东西。我真正想要的是能够编写`{QualifiedType( preds, ty) => ...}` 并使其与 Haskell 具有相同的含义`\QualifiedType(preds,ty) -> ...`。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-13T03:06:26.293

`{ case X(x) => ... }`是一个偏函数，但编译器仍然不知道你的输入类型是什么，除了它是`X`. 通常这不是问题，因为如果您正在编写匿名函数，则类型是从上下文中知道的。但您可以通过以下方式提供类型：

```
case class Foo(x: Int)

// via annotation
val f: Foo => Int = { case Foo(x) => x }

// use pattern matching
val f = (_: Foo) match { case Foo(x) => x }

// or more normally, write as a method
def f(a: Foo) = a match { case Foo(x) => x }
def f(a: Foo) = a.x 
```

您可能已经注意到，在这里使用函数文字/模式匹配是毫无意义的。在您的情况下，您似乎只需要一个常规方法：

```
def whatever(qt: QualifiedType) = {
  t.ty = qt.ty
  Some((emptyEqualityConstraintSet, qt.preds)) 
} 
```

尽管您应该重构以删除该可变状态。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T02:32:33.593

这是我们其他人的[SLS 报价](https://www.scala-lang.org/files/archive/spec/2.11/08-pattern-matching.html#pattern-matching-anonymous-functions)：

> 必须部分定义此类表达式的预期类型。它必须是`scala.Functionk[S1, . . . , Sk, R]`对于某些 k > 0 或 `scala.PartialFunction[S1, R]`，其中参数类型 S1， 。. . , Sk 必须是完全确定的，但结果类型 R 可能是不确定的。

否则，你回答了你的问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T19:52:05.670

这就是为什么我想使用函数文字并且不喜欢重复两次的原因。我试图构建自己的控件构造来分解所有选项匹配代码。如果开销太大，那么控制构造就没有任何帮助。这是我想做的

```
//This is the control construct definition
def switch[A,B]( x : Option[A], noneFun : =>B, someFun : A=>B) = x match {
    case None => noneFun 
    case Some(y) => someFun(y) }

//And this is an example of using it.
def foobar( qt : Option[QualifiedType]  ) = 
    switch( qt, {reportError("SNAFU");None},
            {case QualifiedType(preds, ty) =>
               Some((emptyEqualityConstraintSet,preds)) } ) 
```

开关控制结构编译得很好，但使用导致错误，因为 SLS 说我有一个 A，我应该有一个“确定的类型”。这是因为这种函数字面量（带有“case”的那种）适用于参数可以合法地是任何东西的部分函数。我可以用 int 来争论我的函数字面量，这不会是类型错误，而仅仅是所有模式都失败的问题。所以编译器需要一些“自上而下”的信息来知道我打算为“扩展函数文字”的参数使用什么类型，即在下面为 X 放置什么

```
{(x : X) => x match {case Some(QualifiedType(preds, ty)) =>
               Some((emptyEqualityConstraintSet,preds)) } } 
```

我想知道为什么编译器不能使用 switch 的类型来查看我不打算使用部分函数，​​然后将 A 与 QualifiedType 统一起来。但事实并非如此。

无论如何它不会编译。但是用 Any 替换 A 可以消除错误。以下代码实际编译。我失去的是一些类型检查。

```
//This is the control construct definition
def switch[A,B]( x : Option[A], noneFun : =>B, someFun : A=>B) = x match {
    case None => noneFun 
    case Some(y) => someFun(y) }

//And this is an example of using it.
def foobar( qt : Option[QualifiedType]  ) = 
    switch( qt, {reportError("SNAFU");None},
            {case QualifiedType(preds, ty) =>
               Some((emptyEqualityConstraintSet,preds)) } ) 
```

我很想知道（a）是否可以改进上述 switch 的定义，以及（b）是否已经有一个库函数可以满足我的需求。

* * *

## 在路易吉的评论之后添加

这是最终的代码。是的，我认为这是一个折叠（catamorphism）。

```
def switch[A,B]( x : Option[A])(noneFun : =>B, someFun : A=>B) = x match {
    case None => noneFun 
    case Some(y) => someFun(y) }

def foobar( qt : Option[QualifiedType]  ) : Option[(EqualityConstraintSet, TypeRelationSet)] =
    switch( qt )({reportError("SNAFU");None},
            {case QualifiedType(preds, ty) =>
               Some((emptyEqualityConstraintSet,preds)) } ) 
```

感谢路易吉。

# ios - 在 iOS 中如何知道相机拍到了清晰的图像？

> ID：12869255
> 
> 赞同：1
> 
> 时间：2012-10-13T01:51:44.900
> 
> 标签：ios, camera, focus, computer-vision

我正在做实时图像分析，这是由 iOS（ipad 或 iphone）中的相机捕获的。其实我只是想分析清晰成像的图像，如果图像不清晰，我想丢弃它。众所周知，当相机未对焦时，图像不清晰。

现在我的问题是：

1.  iOS是否可以给出一些相机已经完成对焦的指示？
2.  如果我移动 iPad 相机瞄准某个物体，我如何才能获得物体图像清晰的指示器？

在我的项目中，我使用 AVCaptureDevice 来自动对焦对象。它提供接口“isAdjustingFocus”来指示相机正在对焦。但仅仅确定图像是否清晰是不够的。我发现当我移动相机然后停止时，iOS 开始对焦有一些延迟。所以当我移动ipad时，图像模糊，但指示灯仍然指示它没有对焦。所以我无法知道图像清晰的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:21:30.497

您可以使用点扩散函数来估计图像的模糊，并通过扩展焦点。

# jquery - 在对页面进行 ajax 更新后，单击新链接然后返回按钮会在 Chrome 中显示过时的内容

> ID：12869258
> 
> 赞同：1
> 
> 时间：2012-10-13T01:52:10.837
> 
> 标签：jquery, ajax, google-chrome, browser-cache, back-button

我在 SO 上看到了很多关于此的问题，但没有一个解决了我的问题（不确定是略有不同的问题还是相同的问题，但这些修复由于某种原因不起作用）。

这是场景：

*   用户在表单中输入一些内容（比如数字 1），页面上的 div 会在其旁边更新一些内容（这是通过 jquery ajax 完成的）
*   用户单击指向新页面的链接，然后单击返回按钮
*   现在页面在 Firefox 中正确显示，但在 Chrome 中不正确（尚未测试其他页面）

在 Chrome 中，1 仍然出现在表单中，但页面上的 div 不再存在（就像页面刚刚加载一样）。

在 Firefox 中，它正确显示 div 和 1。

我尝试在 ajax 请求完成时更改 url 哈希以及其他一些使缓存无效的事情。但是 Chrome 仍然没有显示页面的正确版本。

如果它向服务器发出请求以完全重新加载页面，我也可以，但我也没有让它这样做。

有任何想法吗？谢谢！

# c - 如何将 hbrBackground 设置为我选择的纯色？

> ID：12869266
> 
> 赞同：1
> 
> 时间：2012-10-13T01:54:32.423
> 
> 标签：c, winapi

> **可能重复：**
> [c ++ win32：如何设置窗口的颜色？](https://stackoverflow.com/questions/3301053/c-win32-how-to-set-back-color-of-a-window)

我不想使用 WNDCLASS 中的 HBRUSH 库存

这是我的 WNDCLASS：

```
 WNDCLASS     wndclass ;

 wndclass.style         = CS_HREDRAW | CS_VREDRAW ;
 wndclass.lpfnWndProc   = WndProc ;
 wndclass.cbClsExtra    = 0 ;
 wndclass.cbWndExtra    = 0 ;
 wndclass.hInstance     = hInstance ;
 wndclass.hIcon         = LoadIcon (NULL, IDI_APPLICATION) ;
 wndclass.hCursor       = LoadCursor (NULL, IDC_ARROW) ;
 wndclass.hbrBackground = (HBRUSH) GetStockObject (BLACK_BRUSH) ;
 wndclass.lpszMenuName  = NULL ;
 wndclass.lpszClassName = szAppName ; 
```

我希望 hbrBackground 成员是十六进制值 #cfdf9b

```
wndclass.hbrBackground = (HBRUSH) GetStockObject (#cfdf9b); 
```

随之而来的错误

**错误 C2014：预处理器命令必须作为第一个非空白警告 C4047：“函数”：“int”与“LPCSTR”的间接级别不同 helloworldwinapi.c(21)：警告 C4024：“GetStockObject”：正式和实际的不同类型参数 1 错误 C2143：语法错误：在 ';' 之前缺少 ')'**

# c++ - 这个 Arduino 代码有什么作用？

> ID：12869267
> 
> 赞同：2
> 
> 时间：2012-10-13T01:54:39.520
> 
> 标签：c++, arduino, microcontroller

我了解其中大部分内容在做什么，但是，

```
 if (digitalRead(miso)) {      d |= 1;    } 
```

是我不明白的一条线。此代码来自用于 Arduino 板的 Adafruit MAX31855 库。我正在尝试将代码移植到 c 中的 C8051F020 MCU。该代码从热电偶读取，MAX31855 是 MCU 的数字接口。这是此文件的完整代码。我不熟悉`digitalRead()`。上面发布的 if 语句是我无法解释的地方。这个 if 语句在`uint32_t Adafruit_MAX31855::spiread32(void)`函数中。

```
 /*************************************************** 
  This is a library for the Adafruit Thermocouple Sensor w/MAX31855K

  Designed specifically to work with the Adafruit Thermocouple Sensor
  ----> https://www.adafruit.com/products/269

  These displays use SPI to communicate, 3 pins are required to  
  interface
  Adafruit invests time and resources providing this open source code, 
  please support Adafruit and open-source hardware by purchasing 
  products from Adafruit!

  Written by Limor Fried/Ladyada for Adafruit Industries.  
  BSD license, all text above must be included in any redistribution
 ****************************************************/

#include "Adafruit_MAX31855.h"
#include <avr/pgmspace.h>
#include <util/delay.h>
#include <stdlib.h>

Adafruit_MAX31855::Adafruit_MAX31855(int8_t SCLK, int8_t CS, int8_t MISO) {
  sclk = SCLK;
  cs = CS;
  miso = MISO;

  //define pin modes
  pinMode(cs, OUTPUT);
  pinMode(sclk, OUTPUT); 
  pinMode(miso, INPUT);

  digitalWrite(cs, HIGH);
}

double Adafruit_MAX31855::readInternal(void) {
  uint32_t v;

  v = spiread32();

  // ignore bottom 4 bits - they're just thermocouple data
  v >>= 4;

  // pull the bottom 11 bits off
  float internal = v & 0x7FF;
  internal *= 0.0625; // LSB = 0.0625 degrees
  // check sign bit!
  if (v & 0x800) 
    internal *= -1;
  //Serial.print("\tInternal Temp: "); Serial.println(internal);
  return internal;
}

double Adafruit_MAX31855::readCelsius(void) {

  int32_t v;

  v = spiread32();

  //Serial.print("0x"); Serial.println(v, HEX);

  /*
  float internal = (v >> 4) & 0x7FF;
  internal *= 0.0625;
  if ((v >> 4) & 0x800) 
    internal *= -1;
  Serial.print("\tInternal Temp: "); Serial.println(internal);
  */

  if (v & 0x7) {
    // uh oh, a serious problem!
    return NAN; 
  }

  // get rid of internal temp data, and any fault bits
  v >>= 18;
  //Serial.println(v, HEX);

  // pull the bottom 13 bits off
  int16_t temp = v & 0x3FFF;

  // check sign bit
  if (v & 0x2000) 
    temp |= 0xC000;
  //Serial.println(temp);

  double centigrade = v;

  // LSB = 0.25 degrees C
  centigrade *= 0.25;
  return centigrade;
}

uint8_t Adafruit_MAX31855::readError() {
  return spiread32() & 0x7;
}

double Adafruit_MAX31855::readFarenheit(void) {
  float f = readCelsius();
  f *= 9.0;
  f /= 5.0;
  f += 32;
  return f;
}

uint32_t Adafruit_MAX31855::spiread32(void) { 
  int i;
  uint32_t d = 0;

  digitalWrite(sclk, LOW);
  _delay_ms(1);
  digitalWrite(cs, LOW);
  _delay_ms(1);

  for (i=31; i>=0; i--)
  {
    digitalWrite(sclk, LOW);
    _delay_ms(1);
    d <<= 1;
    if (digitalRead(miso)) {
      d |= 1;
    }

    digitalWrite(sclk, HIGH);
    _delay_ms(1);
  }

  digitalWrite(cs, HIGH);
  //Serial.println(d, HEX);
  return d;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T02:02:40.883

> [数字阅读](http://www.arduino.cc/en/Reference/DigitalRead)
> 
> 从指定的数字引脚读取值，HIGH 或 LOW。

* * *

> MISO（Master In Slave Out）：Master的移位寄存器的输入，Slave的移位寄存器的输出。
> 
> [SPI 概述](http://avrbeginners.net/architecture/spi/spi.html)

* * *

`|`是按位或运算符。

`d |= 1`是的简写符号

```
d = d | 1 
```

`d`如果条件为真，此代码将 的最后一位设置为 1。

* * *

所以你正在做的是读取从寄存器的输出，如果它是 1，它会将最后一位设置`d`为 1。就在该行之前，它`d`用 . 左移一位`d <<= 1;`。它在一个循环中执行此操作：

*   左移`d`1 位
*   读取味噌，如果是`1`，请将最低有效位设置`d`为`1`。
*   重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T02:01:14.703

MISO 是 SPI 总线上的主输入/从输出引脚。在这段代码中，你扮演的是主人的角色，所以这是你从奴隶读取输入的引脚。d |= 1 只是将 d 中的最后一位设置为 1，如果它从从机读取 1（并且所有其他位将不受影响）。每次迭代，如果它读取到 1，它将 d 的最后一个 (LSB) 位设置为 1，然后在下一次迭代开始时将 d 向左移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:02:17.437

我对这个 API 一点经验都没有，但是......

如果您查看[digitalRead() 文档](http://www.arduino.cc/en/Reference/DigitalRead)，该函数所做的只是读取您作为参数提供的引脚上的位。它返回`HIGH`或`LOW`。

所以基本上，我所看到的：如果`miso`位打开，则将第一个位`d`打开。

# ios4 - malloc:mmap(size=XX) 失败（错误代码=12）

> ID：12869268
> 
> 赞同：0
> 
> 时间：2012-10-13T01:55:03.350
> 
> 标签：ios4, memory-leaks, nsbundle

我在 iPhone 应用程序中遇到了内存问题，这让我很难受。这是我收到的错误消息：

> malloc: *** mmap(size=9281536) failed (error code=12) *** error: can't allocate region

我正在为这个应用程序使用 ARC，以防这可能是有用的信息。代码（如下）只是使用 Bundle 中的文件来加载核心数据实体。

奇怪的是，崩溃只发生在 90 多个循环之后；虽然看起来，由于“内容”的大小越来越小，内存请求也应该越来越小。

这是代码，如果有人可以看到缺陷，请告诉我。

```
NSString *path,*contents,*lineBuffer;
path=[[NSBundle mainBundle] pathForResource:@"myFileName" ofType:@"txt"];
contents=[NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];

int counter=0;

while (counter<10000) {
    lineBuffer=[contents substringToIndex:[contents rangeOfCharacterFromSet:[NSCharacterSet newlineCharacterSet]].location];
    contents=[contents substringFromIndex:[lineBuffer length]+1];
    newItem=[NSEntityDescription insertNewObjectForEntityForName:@"myEntityName"
                                                      inManagedObjectContext:context];
    [newItem setValue:lineBuffer forKey:@"name"];

    request=[[NSFetchRequest alloc] init];
    [request setEntity: [NSEntityDescription entityForName:@"myEntityName"
                         inManagedObjectContext:context]];
    error=nil;
    [context save:&error];

    counter++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T04:59:14.793

我终于解决了使用 NSMutableString 而不是 NSString 作为内容的问题。然后使用：[contents deleteCharactersInRange:range]; 当然，保持足够的范围。循环内。

# ruby-on-rails - form_for 中的标签

> ID：12869270
> 
> 赞同：1
> 
> 时间：2012-10-13T01:55:34.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, form-for

`new.html.erb`在我的 Rails 3.2 项目中，我有一个表单可以在其中创建一个新帖子`app/views/posts/`

```
<%= form_for(@post) do |post_form| %>
  ...
  <div class="field">
    <%= post_form.label :title %><br />
    <%= post_form.text_field :title %>
  </div>
 ...
  <div class="actions">
    <%= post_form.submit %>
  </div>
<% end %> 
```

我想将`title`标签显示为`TITLE`，所以我将代码更改为`post_form.label :TITLE %>`，但它仍然显示`Title`。我怎样才能将其显示为`TITLE`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T01:58:38.673

由于这是在屏幕上呈现而不是内容的问题，而不是在 eruby 代码中进行转换，这确实应该在 CSS 中完成：

```
.field label {
  text-transform: uppercase;
} 
```

如果您只想修改`:title`输入的标签而不是所有具有相同类的标签，请添加不同的类或在 CSS 规则中使用输入的 id。

如果您坚持在 Rails 中对其进行大写，请使用第二个参数`.label`：

```
<%= post_form.label :title, :title.to_s.upcase %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-07T01:08:32.503

您可以按如下方式修改表单标签：

`<%= post_form.label(:title, "TITLE") %>`

来源： http: [//guides.rubyonrails.org/form_helpers.html](http://guides.rubyonrails.org/form_helpers.html)

# dwolla - Dwolla 平衡错误 307

> ID：12869272
> 
> 赞同：3
> 
> 时间：2012-10-13T01:55:48.470
> 
> 标签：dwolla

我正在使用官方的 Dwolla PHP 库并尝试：

```
$balance = $Dwolla->balance();
if(!$balance) { echo "Error: {$Dwolla->getError()} \n"; } else {
echo "Balance: $balance";} 
```

如 Dwolla Developer Documentation 中所引用，并获得：

```
"Request Failed. Server responded with: 307" 
```

我知道我有适当的 Oauth 权限，如果这是一个 HTTP 响应，那么我相信这是一个临时重定向。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T19:41:04.267

这已在 PHP 库中修复...

# mime-types - MimeTypes 是小写/不区分大小写的吗？

> ID：12869278
> 
> 赞同：22
> 
> 时间：2012-10-13T01:56:55.690
> 
> 标签：mime-types, rfc

我们有一些基于 mimetypes 处理消息的代码，这需要匹配它们。粗略一瞥表明都是小写字母，这让人怀疑：

*   按照惯例，他们是这样的，或者
*   那是规范的一部分吗？（在 RFC 2045/2046 中搜索大写/小写等未返回任何命中）

*那么，对于微小*的性能提升，是否可以省略不区分大小写的比较？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-13T01:58:06.583

MIME 类型不区分大小写。按照惯例，它们只是小写。

[RFC 2045](https://www.rfc-editor.org/rfc/rfc2045)说：“类型、子类型和参数名称不区分大小写。” 如果你有一个 MIME 类型，`text/plain`那就是 . 的类型`text`和子类型`plain`。因此，根据规范，这些不区分大小写。

正如[Cromax](https://stackoverflow.com/users/2024692/cromax)在评论中指出的那样，MIME 类型**参数值**可能区分大小写。有关详细信息，请参阅评论或规范。但是，如果您只匹配 mime 类型、子类型或参数**名称**，则它们不区分大小写。有趣的是，大多数人使用 mime 类型和可能的子类型，并且这些是不区分大小写的。

# iphone - UIView 粘在 UIScrollView 的底部

> ID：12869280
> 
> 赞同：2
> 
> 时间：2012-10-13T01:57:21.833
> 
> 标签：iphone, objective-c, ios, ipad

所以我在 UIViewController 的 UIView 中有一个 UIScrollView ，我在其中添加了一个 UIView ，并且我希望它始终保持在底部，无论方向如何变化。所以我有以下内容：

![在此处输入图像描述](../Images/2124aedb54a1b34d19ddda845cdc4912.png)

问题是当我旋转到横向时，滚动视图内容大小高度肯定会大于框架高度，因此它会向下滚动。但是，我想贴在底部的这个 UIView 并没有粘住。无论方向如何变化，我如何使它始终粘在底部。

当我禁用 UIScrollView 自动调整子视图时，此 UIView 粘在底部，但旋转时宽度不会调整

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T12:05:48.230

您应该尝试以下列方式使用自动调整大小的蒙版

```
yourview.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

使用编码或在 IB 中添加上、左、下和右边距的灵活性。

或者根据您的要求在 willRotateToInterfaceOrientation 方法中放置视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:23:05.613

您必须根据`orientations`以下示例调整框架 -

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
{
    if(toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        //set your portrait frame here and also the content size of scrollView
    }
    else
    {
        //set your Landscape frame here and also the content size of scrollView
    } 
} 
```

# c - C 字节 - 不能输出字符（只有 8 位）

> ID：12869282
> 
> 赞同：0
> 
> 时间：2012-10-13T01:57:40.937
> 
> 标签：c, int, byte, bit

请看一下我的功能：

```
int getByte(int x, int n) {
   int oneOnes = 255 << ( n << 3);
   int compute = oneOnes & x;
   //FIND A WAY TO RETURN CHAR (NOT INT)
   char result = (compute >> (n << 3));
   return result;
} 
```

在评论之前，一切都很好。也就是说，我从一个整数开始`x`，我只想取某个小节（由 指定`n`）。所以我所做的就是把除了我想保持为零的 8 位之外的所有东西都做完。例如，如果输入是：

```
 1001011 10011011 00101011 01001011 
```

我只想保留第三组位（从右数），那么结果将是：

```
 00000000 10011011 00000000 00000000 
```

所以我成功地做到了这一点。*问题是，我只*需要返回我想要的位（将零裁剪为 a `char`）。尽管创建`char result`并返回它，但返回的仍然是 32 位值。

有什么帮助吗？谢谢！

明确一点：对于`00000000 10011011 00000000 00000000`，我只想*被* `10011011`退回。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:02:56.077

是的，它不是一个 8 位值，因为您的函数被声明为返回`int`，而不是 a`char`并且您返回的不是结果而是计算。此外，如果您不希望它在某处进行符号传播，请使用 unsigned char 作为结果类型：

```
unsigned char getByte(int x, int n) {
  int oneOnes = 255 << ( n << 3);
  int compute = oneOnes & x;
  //FIND A WAY TO RETURN CHAR (NOT INT)
  unsigned char result = (compute >> (n << 3));
  return result;
} 
```

但更有效的实现是这个：

```
unsigned getByte(int x, int n) {
   return (x >> (n << 3)) & 0xFF;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:13:21.570

基本问题是您正在尝试使用有符号整数来执行此操作，但是没有明确定义有符号整数的移位——只要位模式恰好是负值，就会发生不好的事情。

相反，在进行位操作时通常会出现这种情况，您希望使用无符号整数：

```
unsigned int getByte(unsigned int x, unsigned int n) {
  unsigned int oneOnes = 255U << ( n << 3);
  unsigned int compute = oneOnes & x;
  return (compute >> (n << 3));
} 
```

如果您在移动后进行遮罩，则更容易，因为您不需要移动遮罩：

```
unsigned int getByte(unsigned int x, unsigned int n) {
  return (x >> (n << 3)) & 255U;
} 
```

# javascript - 为什么这不添加到数组中

> ID：12869286
> 
> 赞同：0
> 
> 时间：2012-10-13T01:57:58.577
> 
> 标签：javascript, jquery

我正在尝试创建一个像这样的多维数组

```
var myArray = new Array();
          var test = new Array(1, 100,200,2);
        $.each(test, function(index, val) {

            myArray['value'].push(val);
            myArray['index'].push(index);
        }); 
```

但是 console.log(myArray) 没有显示任何值；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T01:59:32.197

使用对象文字而不是数组：

```
var myHash= {
    value: [],
    index: []
},
test = [1, 100,200,2];

$.each(test, function(index, val) {
    myHash['value'].push(val);
    myHash['index'].push(index);
}); 
```

[您不应该将数组用作关联数组](http://andrewdupont.net/2006/05/18/javascript-associative-arrays-considered-harmful/)。数组是通过从 0 开始的索引来访问的，您不应该为数组分配任意属性。

**示例：http:** [//jsfiddle.net/andrewwhitaker/F7Zx5/](http://jsfiddle.net/andrewwhitaker/F7Zx5/)

# facebook - 边框内的 Facebook 页面选项卡

> ID：12869290
> 
> 赞同：0
> 
> 时间：2012-10-13T01:58:44.257
> 
> 标签：facebook, facebook-graph-api, iframe, tabs

我正在构建一个 Facebook 页面选项卡。它链接到作为 iFrame 加载到 Facebook 的网站，严格遵循开发 Facebook 页面选项卡的路线。

不过我注意到，在 Facebook 故事（*Facebook 粉丝页面的一个标签*）上，它们在加载的 iframe 周围有一个边框。

但是，它不会出现在 iframe 的原始来源中。而且我在 Facebook 页面选项卡设置中看不到它的选项 - 它似乎也与*`style/css`*facebook iframe 相匹配。

**我的问题是：**如何在另一个页面（此实例，Facebook 页面选项卡）中加载的 iframe 周围没有出现在网页原始源中的边框？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:14:02.510

您引用的 Facebook 故事选项卡在 iframe 上没有边框。边框用css设置在body上。如果您检查选项卡的来源：[https](https://www.facebookstories.com/tab/) ://www.facebookstories.com/tab/ 您将看到滚动条旁边的边框。

我希望这能回答你的问题:)

# iphone - UIWebView 仅在 iOS 4.3 上自动调整大小问题

> ID：12869291
> 
> 赞同：2
> 
> 时间：2012-10-13T01:58:46.730
> 
> 标签：iphone, objective-c, ios, uiview, uiwebview

我试图弄清楚如何修复这个仅在 iOS 4.3 上出现的错误。当应用程序启动时，它会显示一个 PDF，该 PDF 已缩放以适合 UIWebView。它表现完美，直到您捏合以放大文档，然后旋转它，留下黑色区域。如果你不捏缩放，它不会离开黑色区域。我不明白为什么这是一个 iOS 4.3 唯一的问题。问题截图：我一直在尝试解决这个问题，非常感谢您的帮助。谢谢你。

![在此处输入图像描述](../Images/d583c2cfa357e20cbf911ce50c4d8b45.png)

.xib 设置的屏幕截图：

![在此处输入图像描述](../Images/037c608e704a843e1fa2102670df448a.png) ![在此处输入图像描述](../Images/03b2e6a4bad352519334a67e9b99c903.png) ![在此处输入图像描述](../Images/93f604284e245ed535fcc929a133fb0c.png)

我正在使用的代码是：

。H：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
   UIWebView *webView;
}

@property (nonatomic) IBOutlet UIWebView *webView;

@end 
```

米：

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize webView;

- (BOOL)shouldAutorotateToInterfaceOrientation:
(UIInterfaceOrientation)interfaceOrientation
{
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    return YES;
    } else {
    return (interfaceOrientation !=
            UIInterfaceOrientationPortraitUpsideDown);
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *urlAddress = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"pdf"];

    NSURL *url = [NSURL fileURLWithPath:urlAddress]; NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [webView loadRequest:requestObj];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T16:20:16.153

我记得过去 UIWebView 和旋转存在一些错误。我特别记得有一些渲染和调整大小的问题。老实说，如果它从 iOS 4.3 开始就有效，那么我认为你甚至不应该费心去解决这个问题——你想出的解决方案很可能在这一点上会很老套而且无关紧要。

话虽如此，[这个线程](https://stackoverflow.com/questions/2890673/iphone-uiwebview-width-does-not-fit-after-zooming-operation-uiinterfaceorienta)可能会帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:49:13.817

如果它在 iOS6 中工作，可能是因为 shouldAutorotateToInterfaceOrientation 永远不会在其中被调用。iOS6 改变了处理旋转的方式。它碰巧在您的代码中起作用。

另一种可能的解决方案是使用 webview 的委托等到它被加载然后将其添加到视图中。

# c++ - C++ 类类型数组

> ID：12869295
> 
> 赞同：0
> 
> 时间：2012-10-13T01:59:36.050
> 
> 标签：c++, inheritance

我正在从文件中加载不同类型的派生类，其形式为：

*   4 字节类 ID 标头
*   n字节序列化数据

每个类都继承自同一个基类，但我在优雅地创建它们时遇到了一些麻烦。这是我当前的代码（这里 Foo 和 Bar 继承自同一类型）：

```
// read class ID
uint32_t id = ReadHeader(myFile);

// create correct class
switch (id)
{
    case ID_CLASS_FOO: myClass = new Foo(myFile); break;
    case ID_CLASS_BAR: myClass = new Bar(myFile); break;
    /* ... */
} 
```

但我发现这相当丑陋、乏味且容易出错，因为对于我添加的每一个额外的类，我都需要一个额外的定义/枚举成员，并在 switch 中增加一行。

我正在寻找的是我会声明一个编译时“类型数组”的东西，如下所示：

```
ClassTypes = {Foo, Bar, ...}; 
```

然后，在读取文件时，只需执行以下操作：

```
myClass = new ClassTypes[id](myFile); 
```

有没有办法在 C++ 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:28:31.523

您可以创建一个工厂类。

工厂定义：

```
typedef ClassType* (*ClassCreation(void))

class ClassFactory
{
    private:
        map<ClassId, ClassCreation> creators;

    public:
        ClassFactory()
        {
            creators[ID_CLASS_FOO] = &Foo::create;
            creators[ID_CLASS_BAR] = &Bar::create;
        }

        ClassType* getClassType(ClassId id)
        {
            return (creators[id])()
        }
};

class ClassType
{
    //etc
};

class Foo : public ClassType
{
    public:
        static ClassType* create()
        {
            return new Foo;
        }
};

class Bar : public ClassType
{
    public:
        static ClassType* create()
        {
            return new Bar;
        }
}; 
```

工厂用途：

```
ClassFactory factory;

uint32_t id = ReadHeader(myFile);

ClassType* myClass = factory.getClassType(id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:13:09.697

假设您的 ID 为 0、1、2、3，...，您可以做的是创建一个`std::map`将每个消息 ID 映射到一个函数指针，该函数指针指向为该 ID 创建正确类型的对象的命名构造函数。

```
class BaseClass {
   private:
   typedef (BaseClass*) (*NamedConstructor) (SomeType &);

   // The map.
   static std::map<int, NamedConstructor> id_to_constructor;

   public:

   // All the possible message types.
   enum MessageType {
      FooMsg = some_value,
      BarMsg = some_other_value,
      ... // potentially a whole lot more
   };

   // Add a named constructor to the map.
   static void add_handler (MessageType id, NamedConstructor cotr) {
      // Error handling such as duplicates left as an exercise to the user.
      id_to_constructor[id] = cotr;
   }

   // Function that applies the map.
   static void handle_message (int id, SomeType & my_file) {
      // Error handling such as a missing entry left as an exercise to the user.
      NamedConstructor cotr = id_to_constructor[id];
      cotr (my_file);
   }
   ...
};

class Foo : public BaseClass {
   public:
   static BaseClass* create_foo (SomeType & my_file) {
      return new Foo (my_file); // Or use a smart pointer.
   }

   // Member data and member functions elided.
   ...
};

class Bar : public BaseClass {
   public:
   static BaseClass* create_bar (SomeType & my_file) {
      return new Bar (my_file); // Or use a smart pointer.
   }

   // Member data and member functions elided.
    ...
}; 
```

您将需要一些机制来使用该方法 注册命名构造函数`Foo::create_foo()`等。如果您有 500 种消息类型，那就是 500 行代码，但它将是直线（没有 if，没有 switch）代码。`Bar::create_bar()``BaseClass``add_handler`

另一种方法是带有 500 个案例的 switch 语句。叶赫。

那么为什么是地图而不是矢量呢？如果您知道 ID 将变为 0、1、2、...，那么向量就可以了。如果你有差距怎么办？如果设计上有很大的差距怎么办？例如，可以对消息 ID 进行汉明编码，以减少错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:17:51.073

基类中的静态函数看起来像：

```
ClassTypes create(FileType myFile)
{
    // read class ID
    uint32_t id = ReadHeader(myFile);

    // create correct class
    switch (id)
    {
        case ID_CLASS_FOO: myClass = new Foo(myFile); break;
        case ID_CLASS_BAR: myClass = new Bar(myFile); break;
        /* ... */
    }

    return myClass;
} 
```

至少这样，而不是

```
myClass = new ClassTypes[id](myFile); 
```

你可以做

```
myClass = ClassTypes::create(myFile); 
```

# python - 使用python从应用程序中提取数据

> ID：12869296
> 
> 赞同：1
> 
> 时间：2012-10-13T01:59:35.180
> 
> 标签：python, windows

我想知道是否可以从任何 Windows 应用程序中提取数据。我面临的问题是，我希望能够监视在桌面上运行的窗口应用程序的某个标签字段上生成的文本。

我想知道是否有 python 库或读取应用程序生成的值的方法。

为了清楚起见，一个例子是：

如果我在 Windows 上使用默认的 calc.exe，并且我想运行一个脚本来让我得到显示在 calc 应用程序上的答案。

# android - Html5 移动应用程序与电子邮件和短信

> ID：12869297
> 
> 赞同：3
> 
> 时间：2012-10-13T01:59:51.193
> 
> 标签：android, ios, html, email, sms

有没有办法从 html5 网页显示本机电子邮件/短信发送界面？或者我应该创建我的本机适配器并在每次需要发送内容时调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:14:07.337

我不确定这是否是您要问的全部，但如果您只想显示这些的本机接口，这应该可以解决问题。

对于电子邮件，只需使用以下内容：

```
<a href="mailto:user@example.com">E-mail user@example.com</a> 
```

至于电话号码：

```
<a href="tel:1234567890">Call 1234567890</a> 
```

对于短信：

```
<a href="sms:1234567890">Send a message to 1234567890</a> 
```

如果您愿意，您还可以为电子邮件添加主题和/或正文，如下所示：

```
<a href="mailto:user@example.com?subject=Story&body=Once upon a time...">user@example.com</a> 
```

在短信中包含一个身体：

```
<a href="sms:1234567890?body=Hello">Send Hello via SMS to 1234567890</a> 
```

# javascript - 将搜索结果加载到与其他 div 切换的 div

> ID：12869298
> 
> 赞同：1
> 
> 时间：2012-10-13T02:00:09.433
> 
> 标签：javascript, search, toggle

我正在使用具有多个可切换的 div 的页面。此功能有效。添加了搜索功能，这也有效。

当前存在的页面问题：搜索栏放置在“默认” div 上，结果加载到栏下方的另一个 div 中，该 div 为空时不可见。结果 div 位于第一个默认 div 中。如果切换到另一个 div，则会丢失默认 div 并且无法恢复。

出于这个原因，我将搜索栏移到了其他切换链接所在的左侧导航。我还将搜索结果 div 从默认 div 中移出以“独立存在”。

我正在尝试做的事情：使搜索按钮显示带有结果的 div 并找到结果。基本上，将搜索功能集成到数组/切换功能中。搜索功能位于一个 .js 文件中，而切换功能位于另一个 .js 文件中。

我一直认为必须有一种方法可以让“onclick”从两个 .js 文件中调用，这样我就不必做一堆额外的工作来结合已经存在并单独工作的两个函数。我是一个通过示例学习的 Javascript 新手，但无法弄清楚这一点。我从未见过这样的工作示例，我的搜索也没有产生一个。

如果有任何帮助，我将不胜感激。希望我充分解释了这个问题。

编辑：这是我已经拥有的切换功能的代码。

```
var ids=new Array('a','b','c',[and so on--search results not added here yet]);

function switchid(id_array){
    hideallids();
    for( var i=0, limit=id_array.length; i < limit; ++i)
        showdiv(id_array[i]);
}

function hideallids(){
    for (var i=0;i<ids.length;i++){
        hidediv(ids[i]);
    }
}

function hidediv(id) {
    //safe function to hide an element with a specified id
    if (document.getElementById) { // DOM3 = IE5, NS6
        document.getElementById(id).style.display = 'none';
    }
    else {
        if (document.layers) { // Netscape 4
            document.id.display = 'none';
        }
        else { // IE 4
            document.all.id.style.display = 'none';
        }
    }
}

function showdiv(id) {//safe function to show an element with a specified id
    if (document.getElementById) { // DOM3 = IE5, NS6
        document.getElementById(id).style.display = 'block';
    }
    else {
        if (document.layers) { // Netscape 4
            document.id.display = 'block';
        }
        else { // IE 4
            document.all.id.style.display = 'block';
        }
    }
}

function initialize(){
    var t = gup("target");
    if( t )
    {
        switchid([t]);
    }
}

function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null ){
      return "";
  } else {
      return results[1];
  }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:34:37.153

当您的切换功能代码被加载时，这些功能将在全局范围内声明。当您加载搜索函数时，它们也在全局范围内。由于它们在同一范围内，即使它是不同的文件，如果您在具有切换功能的文件之后包含具有搜索功能的文件，则切换功能可以由您的搜索功能使用。

TL;博士

```
function search(...) {
    // do your search stuff
    // when you get a result ID, toggle it from here
    hideallids();
    showdiv(id);
} 
```

我强烈建议您使用有意义的名称、对象作为命名空间来组织您的代码，并使用 CamelCase 或下划线来标​​记标识符中的单词边界。例如：

```
window.ZESearch = {
    'initialize' : function() { ... },
    'search': function() {
        // Find the node with the desired result
        ZESearch.showResult(id);
    },
    'hideAllResults': function() { ... },
    'hideResult' : function(id) { ... },
    'showResult' : function(id) { ... },
    ...
};
ZESearch.initialize(); 
```

由于您刚刚学习，因此我避免了`this`关键字的复杂性，提供了一种创建对象以保持代码井井有条的简单方法，但将对象添加到`window`其中以便您可以从代码中的任何位置获取它。

# javascript - 需要 JavaScript 计算器帮助

> ID：12869302
> 
> 赞同：-1
> 
> 时间：2012-10-13T02:00:47.730
> 
> 标签：javascript, jquery, oop, events

我目前正在编写一个计算器，它分为两个部分。第一部分是一个文本框，它接受一个字符串（用户输入的一个活动）。第二部分由 4 个文本框组成。每个文本框都需要一个数字作为输入。在计算器的第二部分，计算器文本框标记为天、小时、分钟和秒。计算器的目的是确定活动完成后的金额。活动和代码的公式如下所示。

```
MoneyMadeDuringActivity = (NumOfDays * days) + (NumOfHours * hours) + (NumOfMinutes * minutes) + (NumOfSeconds * seconds)

    $(document).ready(function () {

  /**
   * VARIABLES
  ***/
  var activity = $('#txtActivity').text();
  var c = new Calculator();

  var days = $('#txtDays').text();
  var hours = $('#txtHours').text();
  var minutes = $('#txtMinutes').text();
  var seconds = $('#txtSeconds').text();

  var MoneyMadeDuringActivity = (days * c.per_day) + (hours + c.per_hour) + (minutes * c.per_minute) + (seconds * c.per_second);

  function listen(event, elem, func) {
    if (elem.addEventListener) {
      elem.addEventListener(event, func, false);
    } else if (elem.attachEvent) {
      var r = elem.attachEvent("on"+event, func);
      return r;
    }
  }

  listen("click", $("#btnCalculate"), (function() {
    $("#CalcOutput").text(
      "In the time it takes me to " + activity + ",<br />" + "Barack Obama makes " + "$" + MoneyMadeDuringActivity
    );
  });

}); 
```

我的问题是让输出工作。我无法显示任何东西。我有一个 id="CalcOutput" 的 div 标签，所以我不知道为什么它不能正确显示。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:09:48.527

我看到您正在尝试使用 text 方法插入 html，这是错误的，您可以使用 html 方法。

```
$("#CalcOutput").html(
      "In the time it takes me to " + activity + ",<br />Barack Obama makes $" + MoneyMadeDuringActivity
    ); 
```

* * *

**编辑**

这种方式对我有用。

```
<html>
  <head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <script>
      //mocking up your Calculator class
      function Calculator(){
        this.per_day = 345665;
        this.per_hour = 67845;
        this.per_minute = 1234;
        this.per_second = 789;
      }

      $(document).ready(function () {

        function calculate(){
          var activity = $('#txtActivity').val();
          var c = new Calculator();

          var days = +$('#txtDays').val();
          var hours = +$('#txtHours').val();
          var minutes = +$('#txtMinutes').val();
          var seconds = +$('#txtSeconds').val();

          var MoneyMadeDuringActivity = (days * c.per_day) + (hours + c.per_hour) + (minutes * c.per_minute) + (seconds * c.per_second);

          $("#CalcOutput").html(
            "In the time it takes me to " + activity + ",<br />Barack Obama makes $" + MoneyMadeDuringActivity
          );
        }

        $("#btnCalculate").click(function() {
          calculate();
        });

      });

    </script>
  </head>
  <body>
    activity:
    <input type='text' id='txtActivity' value='foobar' /><br/>
    days:
    <input type='text' id='txtDays' value='3'/><br/>
    hours:
    <input type='text' id='txtHours' value='12'/><br/>
    minutes:
    <input type='text' id='txtMinutes' value='34'/><br/>
    seconds:
    <input type='text' id='txtSeconds' value='37' /><br/>
    <button id='btnCalculate'>Calculate</button><br>
    <div id="CalcOutput"></div>
  </body>
 </html> 
```

# javascript - 简单的 JQuery 示例因未知原因给我带来了麻烦

> ID：12869303
> 
> 赞同：0
> 
> 时间：2012-10-13T02:00:53.477
> 
> 标签：javascript, jquery, html

我对 JQuery 比较陌生，想尝试一下。我只是按照一个简单的教程开始[http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery) 所以我在以下位置指定了我的脚本：

```
<script type="text/javascript">  
    $(document).ready(function() {
        $("a").click(function() {
            alert("Hello world!");
        });
    });                                   
</script> 
```

并在以下内容中包含一个测试链接：

```
<a href="">Link</a> 
```

但是，当我刷新文档时，我的浏览器一直在说

```
TypeError: Property '$' of object [object Window] is not a function 
```

我可以理解“普通”JavaScript，但我相信这种功能在 JQuery 中是新的。有人可以在这里帮助我吗？

链接：http://wittmerperformance.com/site/

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T02:03:16.943

您是否嵌入了 jquery 库？

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

此外，我认为目前“开启”是最先进的，如：

```
$(document).ready(function() {
    $("a").on('click', function() {
        alert("Hello world!");
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:21:08.570

尝试这个：

```
jQuery(document).ready(function($) {
    $("a").click(function() {
    alert("Hello world!");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T03:35:47.237

您遇到问题的原因可能是您没有包含 JQuery 库或者可能是由于冲突，请尝试使用

```
 jQuery(document).ready(function ($) {
    $("a").on('click', function() {
      alert("Hello world!");
    });
  }); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-13T02:04:05.500

```
 <script type="text/javascript">  
    $(document).ready(
    function() {

    $("a").click(
function(){
    alert("Hello world!");
    });

    });                                                                
    </script> 
```

这是一个工作示例。更简单。在您的示例中，您必须关闭您启动的功能。数数 （ { } ） ; 你最后缺少 })。它也可以正常工作。

下面的完整工作示例：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">  
    $(document).ready(
    function() {

    $("a").click(
function(abc){
    alert("Hello world!");
    abc.preventDefault();
    return false;
    });

    });                                                                
</script>
</head>
<body>
<a>some link</a>
</body>
</html> 
```

# android - Android JNI可以作弊封装吗？

> ID：12869305
> 
> 赞同：0
> 
> 时间：2012-10-13T02:01:13.020
> 
> 标签：android, oop, android-ndk, java-native-interface, encapsulation

当天的惊人发现：根据 Java 规则， Android 上的 JNI允许[您访问](https://stackoverflow.com/questions/12864778/shared-memory-region-in-ndk)[不应该访问的对象字段。](https://stackoverflow.com/questions/12861814/accessing-package-private-fields-in-java/12861928#12861928)

这种绕过访问限制的能力是否记录在任何地方？这是官方的 JNI 行为还是特定于 Android 风格的 JNI？这是未定义的行为吗？OOP 警察现在会来找我吗？

我了解依赖未发布的对象字段本质上是危险的，并且可能随时中断；这不是这里的问题。

更新：看起来以 API28 为目标的应用程序不再具有此功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:53:41.407

这个问题已经在一篇文章中进行了描述甚至解决，或者更确切地说是 2006 年发布的[提案。](http://www.cs.princeton.edu/~appel/papers/safejni.pdf)

请注意，Javs 定义了[SecurityManager](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/SecurityManager.html)类，但它将所有 JNI 调用都视为[安全漏洞](http://www.ebsolute.com/ebsolute/technologies/whitepapers/app2jni/issues.html)，因此从他们的角度来看，您的问题不是问题，例如问[“为什么我只安装一些驱动程序/服务时可以获得管理员权限？”](http://blogs.msdn.com/b/oldnewthing/archive/2007/09/20/5002739.aspx) .

但在 Android 上，事情就更加明确了。官方文档用以下前言[描述了这个类：](http://developer.android.com/reference/java/lang/SecurityManager.html)

> 旧版安全码；不使用。
> 
> 安全管理器**不**提供执行不受信任代码的安全环境。在 Dalvik VM 中无法安全地隔离不受信任的代码。

（*重点是他们的*）

如果您正在寻找更强有力的词来保证从 JNI 访问本机字段和方法不会在下一版本的 Android 中消失，那么祝您好运。

另一方面，某些未来版本的 Android 更改某些私有字段和方法的名称或签名的可能性更高。此外，他们可以更改实现以保留该字段，但必须以不同的方式使用。

最后请注意，所有这些注意事项不仅适用于私有或*包私有*方法，还适用于未包含在官方文档中的**公共**方法和字段！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:27:57.243

> 当天的惊人发现：Android 上的 JNI 允许您根据 Java 规则访问不应该访问的对象字段。

缩写 JNI 不会出现在[您链接到的问题和答案中的](https://stackoverflow.com/questions/12861814/accessing-package-private-fields-in-java/12861928#12861928)任何地方，除了作为该问题的动态生成链接。

> 这在任何地方都有记录吗？

任何关于 Java 开发的好书都应该涵盖`public`,`private`等。

> 这是官方的 JNI 行为还是特定于 Android 的？

两者都不。

*Android 特有的是*编译时步骤，使您难以在某些`android`、`java`和`javax`包中添加代码。

> 这是未定义的行为吗？

这取决于您与代词“this”绑定的潜在名词或概念。

如果“this”是“访问私有等内容”，则该行为不是未定义的。

如果“this”是“在 Android 框架中访问特定的私有内容等”，那*是*未定义的。周围有很多很多版本的Android，也有很多很多版本的框架类。它们的内部实现并不相同。任何未通过 Android SDK 公开的内容都可以由 Google、设备制造商、ROM 模组维护者等进行更改。

# nlp - 情感分析 - wordNet , sentiWordNet lexicon

> ID：12869310
> 
> 赞同：7
> 
> 时间：2012-10-13T02:02:13.147
> 
> 标签：nlp, text-mining, wordnet, sentiment-analysis

我需要一个积极和消极的单词列表，并根据它们的强度和周数分配给单词的**权重。**我有 ：

1.) WordNet - 它为每个单词提供 + 或 - 分数。

2.) SentiWordNet - 在 [0,1] 范围内给出正值和负值。

我用几句话检查了这些，

爱 - wordNet 对名词和动词都给出 0.0，我不知道为什么我认为它至少在某些因素上应该是积极的。

repress - wordNet 给出 -9.93
- SentiWordNet 给出 - pos 和 neg 的 0.0。（应该是负数）

休息 - wordNet - 2.488
- SentiWordNet - { pos - 0.125, neg - 0.5 } （应该是积极的）

我需要一些帮助来决定使用哪一个。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T10:05:03.567

通常程度和/或极性可能取决于领域和/或上下文，因此仅凭这个词并不足以做出决定。

如果您有一些带注释的数据，我建议使用这两种资源提供的分数作为特征来训练分类器。如果您不这样做，一种选择是使用与相关域匹配的可用情感注释语料库之一。在没有任何数据的情况下，整个任务变得有些棘手，尽管有大量关于情绪分类的无监督方法的工作，我相信，请参阅，例如[无监督情绪分析](https://stackoverflow.com/questions/3920759/unsupervised-sentiment-analysis)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-06T03:37:07.110

SentiWordNet有一个界面可以给出不同的意见，如果你认为他们是错误的： [http ://sentiwordnet.isti.cnr.it/search.php?q=repose](http://sentiwordnet.isti.cnr.it/search.php?q=repose)

我下载了最新的 Wordnet 3.1，并检查了[文件格式文档](http://wordnet.princeton.edu/wordnet/man/wndb.5WN.html)，并没有看到您提到的情绪数字的任何提及。它也没有显示在[在线搜索](http://wordnetweb.princeton.edu/perl/webwn?s=repose&sub=Search%20WordNet&o2=&o0=1&o8=1&o1=1&o7=&o5=&o9=&o6=&o3=&o4=&h=)中。

因此，出于这两个原因，我建议使用 SentiWordNet！

（我看到你的问题已经有一年了，所以也许你可以告诉我们你做了什么，为什么？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-30T23:55:36.180

极性的程度不仅取决于单词本身，还取决于句子或短语的上下文。所以，如果对同一个词有不同的结果，那是因为上下文的不同。

# java - 序列化和反序列化不实现 java.io.Serializable 的对象

> ID：12869313
> 
> 赞同：2
> 
> 时间：2012-10-13T02:02:27.417
> 
> 标签：java, web-services, serialization, soap, deserialization

我想将 SOAPMessage 转换为字节数组，这样我就可以对其进行加密，然后在代理服务器中对其进行解密，该代理服务器将代表我调用 Web 服务。问题是 SOAPMessage 没有实现`java.io.Serializable`，因此我无法继续对其进行加密。

我用它来序列化

```
public static byte[] serializeSoapMessage (SOAPMessage sm){
    try {

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        sm.writeTo(baos);
       byte[] bytes= baos.toByteArray();
       return bytes;
    } catch (SOAPException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;
} 
```

但是反序列化是一个问题，因为`ObjectInputStream`需要实现`java.io.Serializable`

谢谢你的问候:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:41:14.823

我认为您不太了解`SOAPMessage.writeTo`正在做什么（或对象流如何工作）。据我所知，`writeTo`将为它创建 XML`SOAPMessage`并将其作为字节写入给定的流中。要阅读它，请使用 a`MessageFactory`及其`createMessage`方法。写入流的信息不是对象（这是`ObjectInputStream`预期的），而是数据。

要执行您想要的操作，请将您的包装`ByteArrayOutputStream`在 a 中`CipherOutputStream`（请参阅[此问题](https://stackoverflow.com/questions/6608529/how-to-use-cipheroutputstream-correctly-to-encrypt-and-decrypt-log-created-with)以了解如何用密码流包装流）并`sm.writeTo(cipherOutputStream)`改为调用。这将加密流上的字节，然后您可以将字节发送到您的 Web 服务。

让 Web 服务通过将接收到的字节包装在 a 中`ByteArrayInputStream`然后将*其*包装在 a中来运行解密`CipherInputStream`。将结果`CipherInputStream`提供给`MessageFactory`，它将重建原始 SOAPMessage。

诚然，我不是 Web 服务方面的专家，因此我无法为您提供特定解决方案的工作代码，但这种方法肯定会为您提供加密`byte[]`发送，其中包含已加密的`SOAPMessage`.

请注意，对象流无论如何都不会加密任何东西。您可能会这样认为，因为它的输出或多或少不可读，但它绝不是加密的。获得加密的唯一方法是使用加密。

给你一些参考：

*   [用密码流包装流](https://stackoverflow.com/questions/6608529/how-to-use-cipheroutputstream-correctly-to-encrypt-and-decrypt-log-created-with)
*   [`MessageFactory`](http://glassfish.java.net/nonav/javaee5/api/javax/xml/soap/MessageFactory.html)
*   [`SOAPMessage.writeTo`](http://glassfish.java.net/nonav/javaee5/api/javax/xml/soap/SOAPMessage.html#writeTo%28java.io.OutputStream%29)
*   [`CipherInputStream`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/CipherInputStream.html)和[`CipherOutputStream`](http://docs.oracle.com/javase/6/docs/api/javax/crypto/CipherOutputStream.html)
*   [密码流课程](http://docstore.mik.ua/orelly/java-ent/security/ch13_06.htm)
*   [`Cipher`密码流需要的课程](http://docstore.mik.ua/orelly/java-ent/security/ch13_05.htm)

希望这足以让你开始。

# iphone - SKStoreProductViewController 和 GKHostedAuthenticateViewController 没有 iPhone 横向模式

> ID：12869323
> 
> 赞同：10
> 
> 时间：2012-10-13T02:03:48.807
> 
> 标签：iphone, ios6, landscape, gamekit, storekit

我正在实现 StoreKit 应用内应用购买界面，虽然它似乎是`SKStoreProductViewController`iPad 上的手柄景观，但对于我在 iPhone 上的应用似乎并没有这样做（它是通用的）。

界面`SKStoreProductViewController`非常有限，我似乎无法以`VC`任何方式操作。 **有没有其他人遇到过这个？任何变通办法？**

当我运行在 iPad 上运行的代码时，`SKStoreProductViewController`它从左侧进来，大约一英寸，然后一直挂在那里直到被解散。它看起来很实用，但它弄乱了在解雇时弹出它的 VC。

这是代码：

```
// Set up the store vc (creating it if not already done)
if (self.storeVC == nil) self.storeVC = [[SKStoreProductViewController alloc] init];
self.storeVC.delegate = self;
NSDictionary *params = [NSDictionary dictionaryWithObject:appID forKey:SKStoreProductParameterITunesItemIdentifier]; 

// Set up a HUD in case connecting to the store takes a while
[MBProgressHUD showHUDAddedTo:self.view animated:YES]; 

[self.storeVC loadProductWithParameters:params
                        completionBlock:^(BOOL result, NSError *error) {
       [MBProgressHUD hideHUDForView:self.view animated:YES];
       if (result) {
           [self presentViewController:self.storeVC animated:NO completion:^{
           }];
       }
  }]; 
```

更好的是，我们在`GKHostedAuthenticateViewController`哪个是从方法返回的视图控制器上遇到了同样的问题：

```
GKLocalPlayer.authenticateHandler = ^(UIViewController *loginVC, NSError *error) {}; 
```

重申一下：这两个都在 iPhone（但不是 iPad）上处于纵向模式，并且它们强制 UI 进入纵向模式。返回后，您的应用程序的用户界面就混乱了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-30T18:52:43.123

我遇到了类似的问题。我的通用应用程序是横向的，但是虽然 SKStoreProductViewController 在 iPad 上的横向工作得相当好，但它在 iPhone 上会出现视觉故障。

我的解决方案是强制 iPhone 以纵向显示 SKStoreProductViewController。有点遗憾，它与应用程序的其余部分没有相同的方向，但总比截掉一半屏幕要好。

我通过使用下面的自定义子类实现了这一点：

```
@interface SKPortraitStoreProductViewController : SKStoreProductViewController
@end

@implementation SKPortraitStoreProductViewController
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        return UIInterfaceOrientationPortrait;
    else
        return [super preferredInterfaceOrientationForPresentation];
}
@end
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T02:02:29.643

在展示之前尝试更改`modalPresentationStyle`您的属性。`SKStoreProductViewController`

`UIModalPresentationPageSheet`通过将其设置为似乎可以很好地覆盖横向 iPad 外壳，我已经很幸运了。

# google-sites - 无法创建公告页面

> ID：12869331
> 
> 赞同：0
> 
> 时间：2012-10-13T02:07:39.043
> 
> 标签：google-sites

创建公告页面的常规程序不起作用。我去创建页面，然后得到通常的页面，要求我输入页面名称并选择模板。问题是选择页面模板的下拉框不包括“公告页面”。

这是怎么回事？这是使用示例网站模板的结果吗？如果此特定站点模板有问题，是否有解决方法？

该选项出现在我的其他网站上。

# php - 没有空格或特殊字符的正则表达式

> ID：12869333
> 
> 赞同：-8
> 
> 时间：2012-10-13T02:07:41.983
> 
> 标签：php, regex, passwords, expression

我是正则表达式的新手，我需要一个匹配的 php 用户名的正则表达式

```
no spaces 
```

* * *

```
no special characters 
```

* * *

长度 8，最大 32

以及匹配的密码的正则表达式

* * *

```
alphanumeric have at least one digit and one character 
```

* * *

```
no spaces 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T02:13:50.417

尝试以下正则[**表达式**](http://en.wikipedia.org/wiki/Regular_expression)：

```
^\S+\w{8,32}\S{1,} 
```

*   `^`表示*行首*
*   `\S`表示所有字符，但不是空格或制表符
*   `+`表示至少一个字符
*   `\w` 表示一个字母数字字符，包括`_`
*   `{8,32}`表示至少 8 个字符，最多 32 个字符
*   `\S`仍然表示所有字符，但不是空格或制表符
*   `{1,}`表示至少 1 项

# javascript - 如何使用 Javascript 捕捉 youtube 视频播放器的播放/暂停事件？

> ID：12869334
> 
> 赞同：3
> 
> 时间：2012-10-13T02:08:11.220
> 
> 标签：javascript, jquery, events, youtube

> **可能重复：**
> [按下播放按钮后进行回调 - Youtube 嵌入视频](https://stackoverflow.com/questions/8152814/make-callback-after-play-button-is-pushed-youtube-embed-video)

我的网站上嵌入了一个 Youtube 视频。代码如下

```
<iframe width="280" height="180" frameborder="0" src="http://www.youtube.com/embed/U5BVeZybEV4" title="YouTube video player"  allowfullscreen></iframe> 
```

我想要做的是，当我点击视频的**播放**按钮时，它应该执行一个 javascript 警报功能

```
alert("Clicked Play"); 
```

同样，如果我点击暂停按钮，它应该执行一个 javascript 警报功能

```
alert("Clicked Pause"); 
```

有什么建议我怎样才能捕捉到这些事件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:56:44.343

检查下面的这个例子，我们可以使用 Youtube Player API

[http://jsfiddle.net/masiha/4mEDR/](http://jsfiddle.net/masiha/4mEDR/)

# firefox - SVG 线性渐变大小在 Firefox 中没有改变

> ID：12869344
> 
> 赞同：0
> 
> 时间：2012-10-13T02:10:52.463
> 
> 标签：firefox, svg, gradient, linear-gradients

我用 SVG 创建的线性渐变有问题。在 Firefox 中，我无法将其扩展到 250 像素左右。这是我到目前为止所得到的。

```
 <svg>
       <defs>
          <linearGradient id="grad1" x1="0%" y1="0%" x2="0%" y2="100%">
             <stop offset="0%" style="stop-color:rgb(0, 124, 57);stop-opacity:1" />
         <stop offset="100%" style="stop-color:rgb(0, 100, 47);stop-opacity:1" />
          </linearGradient>
   </defs>
   <rect width="" height="34" fill="url(#grad1)" />
</svg> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:05:06.690

`<svg>`将元素更改为`<svg height="100%" width="100%">`

# javascript - 如何使用 Kinetic AbsolutePosition 属性

> ID：12869345
> 
> 赞同：2
> 
> 时间：2012-10-13T02:11:11.537
> 
> 标签：javascript, html5-canvas, kineticjs

我想了解如何在嵌套在其他组/图层中的两个形状之间画一条线。这是一个[jsfiddle 示例](http://jsfiddle.net/pukster/6UhNp/)，它说明了我的意思。如您所知，当使用的坐标在同一层时，画线是微不足道的。当坐标嵌套在其他组/层中时，结果与预期不同。尝试移动右框以查看不太理想的结果。

有人可以告诉我如何将坐标从一层转换为另一层。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:33:20.617

你有一些 Xs 应该是 Ys，这是一个固定的小提琴：http: [//jsfiddle.net/6UhNp/8/](http://jsfiddle.net/6UhNp/8/)。

这在您指定的范围内有效，因此您正确使用它，但是在放大和缩小时它不起作用。

我最近看到您使用的缩放功能浮动，我觉得这不是一个正确的解决方案。不过，我还没有坐下来解决它。

# android - 如何使用自定义 GeoPointer 获取纬度和经度

> ID：12869346
> 
> 赞同：1
> 
> 时间：2012-10-13T02:11:29.400
> 
> 标签：android, android-mapview, android-maps, geopoints

我有一个 GPS 地图，想使用一个自定义地理点（使用我的 PNG），当我点击地图中的一个地方时，它会返回纬度和经度。

搜索我找到了这段代码

```
public void recieveLongClick(MotionEvent ev)

    {
        Projection p = mapView.getProjection();
        GeoPoint geoPoint = p.fromPixels((int) ev.getX(), (int) ev.getY());
        // You can now pull lat/lng from geoPoint
    } 
```

但是我不知道如何使用它以及如何使用自定义图像定义 GeoPointer，当有人单击地图中的某个位置时会显示该图像。

# c# - 对 lambda 表达式和委托感到困惑？

> ID：12869347
> 
> 赞同：3
> 
> 时间：2012-10-13T02:11:45.703
> 
> 标签：c#, .net, c#-4.0

代表清楚明白

```
delegate int del(int i); 
```

但是为什么我们可以使用

```
del myDelegate = x => x * x; 
```

这里的问题：

1.  如何确保 x 是 lambda 表达式中的 int 类型？
2.  我怎么知道 lambda 表达式返回一个 int？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T02:14:40.230

C# 编译器足够聪明，可以隐式地从上下文中找出`x`左侧的类型。`=>`由于它知道您将 lambda 分配给类型为 的变量`del`，因此编译器知道这`x`是一个`int`.

就返回类型而言，编译器知道它`x`是 an `int`，因此`x * x`表达式的类型也必须是`int`。这就是编译器知道 lambda 的返回类型的方式。

请注意，如果没有指定的确切类型，则不会编译相同的代码`myDelegate`：

```
// This does not compile!
var myDelegate = x => x*x; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:13:44.187

因为你要拥有 x，你必须给它一个类型。它会检测这种类型，而不是让你一遍又一遍地告诉它它是什么类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:15:48.560

现在，您让编译器确定 lamdba 表达式在做什么。您可以使用[Action](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)和[Func进行子类化](http://msdn.microsoft.com/en-us/library/bb549151.aspx)

Actions 的返回类型是 void，而 Func 的返回类型是您指定为最后一个类型参数的任何类型。您可以在两者中指定额外的输入

```
Func<in, in2, in3, output> 
```

用于返回一个 int

```
var f = new Func<int, int>(x => x*x); 
```

# android - Android列表式短信mysql查询

> ID：12869350
> 
> 赞同：0
> 
> 时间：2012-10-13T02:12:44.897
> 
> 标签：android, mysql

我无法解决 mysql 查询以将用户置于首位。它通过尝试以不同方式分配查询而失败。问题是我们不知道发送者是否发送了最新的消息或接收者。我们有包含发送者和接收者 ID 的转换表。现在我们必须显示那些自己发送了最新消息的人或我们的发件人 xyz 发送了最新消息的人。我们不能按发件人或收件人分组，因为如果这样做，我们可能会丢失发件人向其发送消息的那些记录。如果你能帮我解决这个问题，请显示那些自己发送最新消息或我们的发件人 xyz 发送最新消息的人的列表，就像我们在 Android SMS 应用程序列表中看到的一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T06:45:28.240

尝试，

```
SELECT  a.*
FROM    conversation a
        INNER JOIN
        (
            SELECT  senderid, receiverid, MAX(sentDate) maxDate
            FROM    conversation
            GROUP BY senderid, receiverid
        ) b ON  a.senderid = b.senderid AND
                a.receiverid = b.receiverid AND
                a.sentDate  = b.maxDate 
```

# linux - 如何使用 BASH 比较两个文本文件以获得相同的确切文本？

> ID：12869354
> 
> 赞同：6
> 
> 时间：2012-10-13T02:13:37.280
> 
> 标签：linux, bash, text, grep, compare

假设我有两个文本文件需要从中提取数据。两个文件的文本如下：

**文件 1：**

```
1name - randomemail@email.com
2Name - superrandomemail@email.com
3Name - 123random@email.com
4Name - random123@email.com 
```

**文件 2：**

```
email.com
email.com
email.com
anotherwebsite.com 
```

文件 2 是文件 1 的域名列表，从电子邮件地址中提取。无论如何，这些都不是同一个域名，而且是非常随机的。

如何从文件 1 中获取与文件 2 匹配的域名结果？

先感谢您！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T02:23:54.663

假设顺序无关紧要，

```
grep -F -f FILE2 FILE1 
```

应该做的伎俩。（这是因为一个鲜为人知的事实：该`-F`选项`grep`不仅意味着“匹配此固定字符串”，还意味着“匹配任何这些换行符分隔的固定字符串。”）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T02:27:38.180

食谱：

```
join <(sed 's/^.*@//' file1|sort -u) <(sort -u file2) 
```

它将输出file1和file2中所有域名的交集

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T08:56:21.083

请参阅[BashFAQ/036](http://mywiki.wooledge.org/BashFAQ/036)以获取此类问题的常用解决方案列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T20:19:14.280

使用 VimDIFF 命令，这可以很好地展示差异

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T02:24:56.143

如果我没听错，您想过滤文件 2 中提到的主机的所有地址。

然后，您可以循环`File 2`并 grep for `@<line>`，将结果累积到新文件或类似文件中。

例子：

```
cat file2 | sort -u | while read host; do grep "@$host" file1; done > filtered 
```

# javascript - 正则表达式在 javascript 中以 # 开头

> ID：12869360
> 
> 赞同：2
> 
> 时间：2012-10-13T02:14:01.743
> 
> 标签：javascript, regex, replace, eval

替换某些以 . 开头的单词时遇到问题`#`。我有以下代码

```
var x="#google",
eval("var pattern = /" + '\\b' + x + '\\b');
txt.replace(pattern,"MyNewWord"); 
```

当我使用以下代码时，它工作正常

```
var x="google",
eval("var pattern = /" + '\\b' + x + '\\b');
txt.replace(pattern,"MyNewWord"); 
```

它工作正常

任何建议如何使代码的第一部分工作

附言。我使用`eval`因为`x`将是用户输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:18:27.570

让你拍出这样的东西：

```
/(#)?\w*/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:20:42.750

如果你想创建一个正则表达式，试试这个而不是 eval：

```
var pattern = new RegExp(x); 
```

顺便说一句：

```
eval("var pattern = /" + '\\b' + x + '\\b'); 
```

由于没有封闭模式会出错，应该是：

```
eval("var pattern = /" + '\\b' + x + '\\b/'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T02:21:54.727

问题在于它`\b`表示“单词”字符（字母、数字或下划线）和“非单词”字符（其他任何字符）之间的边界。`#`是一个非单词字符，所以`\b#`意思是“`#`前面*有*一个单词字符”——这根本不是你想要的。如果有的话，你想要更像`\B#`; `\B`是*无*边界的，因此`\B#`表示“`#`前面*没有*单词字符的a”。

我猜你希望你的单词用空格分隔，而不是通过编程语言概念来区分什么是“单词”字符或“非单词”字符；为此，您可以编写：

```
var x = '#google';    // or 'google'
var pattern = new RegExp('(^|\\s)' + x);
var result = txt.replace(pattern, '$1' + 'MyNewWord'); 
```

* * *

**编辑添加：**如果`x`真的应该是一个文字字符串，而不是一个正则表达式，那么你应该用反斜杠“引用”其中的所有特殊字符。你可以这样写：

```
var x = '#google';  // or 'google' or '$google' or whatever
var quotedX = x.replace(/[^\w\s]/g, '\\$&');
var pattern = new RegExp('(^|\\s)' + quotedX);
var result = txt.replace(pattern, '$1' + 'MyNewWord'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T02:18:54.207

怎么样

`var x = "#google";`

`x.match(/^\#/);`

# c# - 将double分成数组

> ID：12869367
> 
> 赞同：-1
> 
> 时间：2012-10-13T02:15:16.480
> 
> 标签：c#

我有一个维度为 n 的整数数组，现在说 n = 9。

我想将它初始化为

```
[0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.11,0.12] 
```

其中每个条目是 1/n，最多取两位小数，最后一个条目是从 1 开始的剩余数字。

我应该如何轻松做到这一点？这就是我现在所做的

```
double sumOfn=0;
  for (int i = 0; i < array.Length;i++ )
               {
                   double n;

                   if (i < array.Length-1)
                   {
                       array[i] = Math.Floor((1/(double)  array.Length)*100/100);
                       sumOfn += n;

                   }else
                   {
                       array[i] = 1 - sumOfn;
                   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:24:32.527

计算值时，不能将双精度数限制为特定精度。

我建议对每 n 进行 100 的整数除法，然后将该值除以 100。

最后一个值可以很容易地通过将除法的其余部分添加到最后一个元素，然后再除以 100 来计算。

这基本上是我们在学校第一次学习浮点时所做的欧几里得除法:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:20:48.410

不确定这是否算作创意.. :)

```
 double[] array = new double[9];
        if (array.Length < 1 || array.Length > 100) throw new InvalidTimeZoneException("lol");
        array = Enumerable.Concat(
            Enumerable.Repeat(100 / array.Length, array.Length - 1),
            new[] { 100 - ((array.Length - 1) * (100 / array.Length)) }
            ).Select(i => i / 100.0).ToArray(); 
```

# javascript - 如何使用时间日期条件向 Wordpress 的正文元素添加类？

> ID：12869369
> 
> 赞同：0
> 
> 时间：2012-10-13T02:15:36.760
> 
> 标签：javascript, jquery, wordpress

我正在弄清楚如何使用时间日期条件将类添加到 wordpress 正文元素，有一个示例：

```
jQuery(document).ready(function() {

function applyclass()
{
var d = new Date();
var n = d.getHours();

if (n > 20 && n < 06)
jQuery('body').addClass('night');

else if (n > 16 && n < 19)
jQuery('body').addClass('sunset');

else
jQuery('body').addClass('day');
}
window.onload = applyclass;

}); 
```

我检查了所有内容，包括文件夹位置，没有控制台错误，但问题是这个脚本没有执行。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:51:41.383

你最好在 body 函数中添加一个类

`<body <?php body_class($class); ?>>`

而不是用 jQuery 重写它。看

[http://codex.wordpress.org/Function_Reference/body_class#Add_Classes_By_Filters](http://codex.wordpress.org/Function_Reference/body_class#Add_Classes_By_Filters)

关于如何在你的主题的functions.php文件中挂钩到body类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:21:15.337

您的 if 语句正在测试错误的条件。

```
if (n > 20 && n < 06)
    jQuery('body').addClass('night'); 
```

`n`不能大于 20 且小于 6。（您也不需要数字前面的零；我认为这没有*错*，但没有必要）

您也不需要该`window.onload`部分，因为整个代码块只会在文档加载后执行。相反，您可以只调用`applyclass()`document.ready 并将函数移出块。

但除此之外，代码没有错，逻辑错了。弄清楚你想要它做什么并改变 if 语句的条件，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T04:12:04.647

我找到了一个解决方案，我删除了 jQuery(document).ready(function () {} 并修改了一些语句，它现在可以工作了。这是我的片段解决了我的问题，请随时优化这个片段。感谢您回答我的问题！

```
 function applyclass()
{
var d = new Date();
var n = d.getHours();

if (n == 5)
jQuery('body').addClass('night');
if (n == 4)
jQuery('body').addClass('night');
if (n == 3)
jQuery('body').addClass('night');
if (n == 2)
jQuery('body').addClass('night');
if (n == 1)
jQuery('body').addClass('night');
if (n == 0)
jQuery('body').addClass('night');
if (n == 23)
jQuery('body').addClass('night');
if (n == 22)
jQuery('body').addClass('night');
if (n == 21)
jQuery('body').addClass('night');
if (n == 20)
jQuery('body').addClass('night');

else if (n == 6)
jQuery('body').addClass('sunset');
else if (n == 7)
jQuery('body').addClass('sunset');
else if (n == 8)
jQuery('body').addClass('sunset');
else if (n == 18)
jQuery('body').addClass('sunset');
else if (n == 19)
jQuery('body').addClass('sunset');

else if (n == 9)
jQuery('body').addClass('day');
else if (n == 10)
jQuery('body').addClass('day');
else if (n == 11)
jQuery('body').addClass('day');
else if (n == 12)
jQuery('body').addClass('day');
else if (n == 13)
jQuery('body').addClass('day');
else if (n == 14)
jQuery('body').addClass('day');
else if (n == 15)
jQuery('body').addClass('day');
else if (n == 16)
jQuery('body').addClass('day');
else if (n == 17)
jQuery('body').addClass('day');

}
window.onload = applyclass; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T02:21:38.007

尝试删除 window.onload 语句。这是多余的。将其替换为对您的函数的调用：

```
applyclass(); 
```

第一行：

```
jQuery(document).ready(function() { 
```

已经确保在加载 DOM 之前它不会运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-26T16:20:41.587

我知道您可能不是在寻找 PHP 函数，但这是我所做的。这可以添加到functions.php [https://gist.github.com/Garconis/11e7e4c316b4f5c4e5dfcbe7d916f5c3](https://gist.github.com/Garconis/11e7e4c316b4f5c4e5dfcbe7d916f5c3)

```
<?php
// Add the times and days to the body classes
// e.g., date-day-wednesday date-ymd-20170614 date-month-june time-military-1317 time-pm time-early-afternoon
add_filter( 'body_class', 'add_date_info_to_class_names' );
function add_date_info_to_class_names( $classes ) {
    // current day of week name
    $classes[] = 'date-day-' . strtolower(date_i18n('l'));
    // current full date YYYYMMDD
    $classes[] = 'date-ymd-' . strtolower(date_i18n('Ymd'));
    // current month name
    $classes[] = 'date-month-' . strtolower(date_i18n('F'));
    // current military time HHMM
    $classes[] = 'time-military-' . strtolower(date_i18n('Hi'));
    // check hour and add am or pm class
    if ( date_i18n('H') >= 12 ){
        $classes[] = 'time-pm';
    } else {
        $classes[] = 'time-am';
    }
    // check hour and add time of day descriptor
    if (preg_match("/(00|01|02)/i", date_i18n('H'))){
      $classes[] = 'time-early-night';
    }
    elseif (preg_match("/(03|04|05)/i", date_i18n('H'))){
      $classes[] = 'time-late-night';
    }
    elseif (preg_match("/(06|07|08)/i", date_i18n('H'))){
      $classes[] = 'time-early-morning';
    }
    elseif (preg_match("/(09|10|11)/i", date_i18n('H'))){
      $classes[] = 'time-late-morning';
    }
    elseif (preg_match("/(12|13|14)/i", date_i18n('H'))){
      $classes[] = 'time-early-afternoon';
    }
    elseif (preg_match("/(15|16|17)/i", date_i18n('H'))){
      $classes[] = 'time-late-afternoon';
    }
    elseif (preg_match("/(18|19|20)/i", date_i18n('H'))){
      $classes[] = 'time-early-evening';
    }
    elseif (preg_match("/(21|22|23)/i", date_i18n('H'))){
      $classes[] = 'time-late-evening';
    }
    return $classes;
} 
```

# linux - Linux 中 .bin 文件的标头内容

> ID：12869370
> 
> 赞同：0
> 
> 时间：2012-10-13T02:15:44.923
> 
> 标签：linux, header, binary

Linux 中哪些内容具有可执行 .bin 文件的标头？

我在 Windows 中找到了 .exe 文件的信息，但找不到 .bin 文件的任何信息。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:24:28.457

为了清楚起见，在 Linux 中，可执行文件可能被称为“二进制”，但没有显式的“.bin”

Linux 通常使用 ELF 格式。第一个字节是 0x7F，后跟用于 E、L、F 的 ascii - 如果您可以将二进制文件加载到文本编辑器中或使用“cat”或“less”在命令行中打印，这很容易看到。在那之后......好吧，我生疏了，但细节很容易在网上找到。

尝试[http://www.thegeekstuff.com/2012/07/elf-object-file-format/](http://www.thegeekstuff.com/2012/07/elf-object-file-format/) 和[http://www.acsu.buffalo.edu/~charngda/e​​lf.html](http://www.acsu.buffalo.edu/~charngda/elf.html)作为初学者。（我通过肤浅的快速搜索找到了这些，并没有声称这些是最好的。狩猎快乐！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:18:43.080

我不是 100% 确定你在问什么。但大多数 Linux 可执行文件使用**ELF**格式。

readelf[实用程序](http://linux.die.net/man/1/readelf)可以从 ELF 可执行文件中读取元数据。

[维基百科上的 ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)

# android - android - 没有 Content Provider 的 CursorLoader 和 SQLite

> ID：12869373
> 
> 赞同：54
> 
> 时间：2012-10-13T02:16:45.117
> 
> 标签：android, sqlite, android-contentprovider, android-loadermanager

我知道这已经讨论过了，但我想问一下目前的情况。我是否必须创建一个 ContentProvider 才能将 CursorLoader 与 sqlite 数据库结合使用？

我发现

[没有 ContentProvider 的 CursorLoader 使用](https://stackoverflow.com/questions/7182485/usage-cursorloader-without-contentprovider/7422343#7422343)

正如 Emmby 评论的那样，看起来正是我所希望的

*   用户应该知道一个限制，那就是它没有刷新数据更改的机制（就像加载器应该做的那样）

所以提到了另一种解决方案

[https://github.com/commonsguy/cwac-loaderex](https://github.com/commonsguy/cwac-loaderex)

再次指出了一些缺点

*   但是，要使用自动重新查询，您需要为 UI 和更新使用相同的加载程序，从而限制了其对后台服务的可用性。

当然，在使用 LoaderManager 时，我们希望获得引入它的所有好处。所以我的问题是，是否有一种方法可以将 LoaderManager 与 sqlite 数据库结合使用，而无需实现内容提供程序，但仍能获得它的所有好处。

谢谢

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-10-13T02:58:57.323

您在帖子中提到的两种实现都提供了所有的好处，`CursorLoader` **除了**当底层内容发生变化时接收通知的能力。

我最近一直在研究这个问题，我可以自信地告诉你，Android API 目前不提供仅使用 raw 执行此操作`SQLiteDatabase`的方法（它仅提供`ContentResolver#notifyChange()`and`Cursor#setNotificationUri()`方法，用于通知`Cursor`在下注册的所有 s某个通知`Uri`）。

也就是说，您现在的选择是：

1.  自己实现一个观察者，它能够`SQLiteDatabase`在内容更改时接收通知，并且能够以某种方式将这些通知中继到`Loader`应用程序中的所有现有 s。我写了一篇关于如何实现s的相当广泛的[**博客文章**](http://www.androiddesignpatterns.com/2012/08/implementing-loaders.html)`Loader`，如果你想接受这个挑战，它可能会派上用场。或者...

2.  使用 Mark Murphy 的库，并且只使用他的库提供`LoaderEx`的操作来修改数据库。`AsyncTask`请注意，他的任务刷新的原因`Loader`是因为它们在执行插入/更新/删除后立即调用`onContentChanged`，`Loader`有效地告诉`Loader`内容已更改并且它应该刷新其数据。

3.  只需将 a`ContentProvider`与 a 一起使用`CursorLoader`，您就可以使用该`ContentResolver#notifyChange()`方法通知`CursorLoader`已发生内容更改。

我正在尝试找出一个更好的解决方案，如果我找到/实施一个，我会在未来报告，但现在这些必须要做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-09T17:25:16.227

这是我的解决方案，在我的 onCreateLoader

```
{
Uri u = Uri.parse("content://what_string_you_want");
return new CursorLoader(this, yourURI, projection, null, null, null) {
    private final ForceLoadContentObserver mObserver = new ForceLoadContentObserver();

    @Override
    public Cursor loadInBackground() {
        Cursor c = YOUR_DATABASE.doYourQuery(...);
        if (c != null) {
          // Ensure the cursor window is filled
           c.getCount();
           c.registerContentObserver(mObserver);
        }

        c.setNotificationUri(getContext().getContentResolver(), getUri());
        return c;
    }
};
} 
```

在将更改数据库的代码之后，添加

```
 getContentResolver().notifyChange(
            Uri.parse("content://same_with_first_string"), null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-25T15:59:14.987

将共享首选项中的布尔值设置为假怎么样..当该布尔值为真时更新内容..以及当任何更改底层数据库的操作时..该布尔值将设置为真并作为共享首选项您changelistener 您可以在调用相关方法后直接接收更改

# c# - 如何以 XAML 形式获取以编程方式添加的内容？

> ID：12869374
> 
> 赞同：0
> 
> 时间：2012-10-13T02:17:06.213
> 
> 标签：c#, wpf

假设我们有 WPF 元素，在代码中我们向它添加内容/控件。我们如何将生成的内容作为 XAML 获取？

例如在 XAML 中，我们有：

在后面的代码中：

```
 pLines.Points.Add(new Point(10, 140));
        pLines.Points.Add(new Point(270, 140));
        pLines.Points.Add(new Point(270, 220));
        pLines.Points.Add(new Point(255, 220));
        pLines.Points.Add(new Point(230, 175));
        pLines.Points.Add(new Point(205, 220)); 
```

现在如何在后面的代码执行后获取生成的 XAML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:26:23.253

你可以使用[`XamlWriter`](http://msdn.microsoft.com/en-us/library/ms613434.aspx)类。

```
var pLines = new Polyline();
pLines.Points.Add(new Point(10, 140));
pLines.Points.Add(new Point(270, 140));
pLines.Points.Add(new Point(270, 220));
pLines.Points.Add(new Point(255, 220));
pLines.Points.Add(new Point(230, 175));
pLines.Points.Add(new Point(205, 220));
string asXaml = XamlWriter.Save(pLines);
//<Polyline Points="10,140 270,140 270,220 255,220 230,175 205,220" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" /> 
```

# java - java.io.tmp有什么意义

> ID：12869375
> 
> 赞同：0
> 
> 时间：2012-10-13T02:17:16.037
> 
> 标签：java, tomcat

你能告诉“java.io.tmp”目录的意义吗？

我注意到这个目录是在我的 tomcat 的 webapps 文件夹下创建的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:21:44.090

它不是目录，它是属性指向要用作临时文件夹的目录（目录恰好与属性同名是tomcat决定）。当您要创建临时文件时，此属性用作文件的位置。一些[例子](http://www.exampledepot.com/egs/java.io/CreateTempFile.html)

```
 File tempFile = File.createTempFile("pattern", ".suffix");
 tempFile.deleteOnExit(); 
```

默认情况下，JVM 会从 TMP/TEMP 环境变量中复制值。该值可以在 JVM 启动时设置。Tomcat 将此设置为应用程序的其余部分使用。

相关：[控制java.io.tmpdir的环境变量？](https://stackoverflow.com/questions/1924136/environment-variable-to-control-java-io-tmpdir)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:43:43.143

这个名字本身就是一个很好的线索。它的 java.IO.TMP，常识会告诉我们是关于临时 ios。由于 java.io 包是关于文件的，所以它可能加起来这是一个存储临时文件的路径。

# .net - WCF 异步客户端调用 WCF 异步服务

> ID：12869381
> 
> 赞同：2
> 
> 时间：2012-10-13T02:18:39.303
> 
> 标签：.net, wcf, asynchronous

我有一个轻型客户端应用程序，它使异步 WCF 调用 IIS 主机 WCF 服务。然后托管服务充当客户端，对另一个外部服务进行 SOAP 调用，做一些工作然后将结果返回给客户端。

**客户端 >> WCF IIS 服务 >> SOAP 服务**

我花了很多时间，确保**Client > WCF IIS Service是多线程和异步的，却发现它从****WCF IIS Service >> SOAP Service**成为 Syncronously 的瓶颈。

有没有办法对 WCF IIS 服务进行客户端异步调用，这反过来又将异步全部发送到 SOAP 服务，然后将结果返回给客户端？

我现在有点难以置信，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:29:27.450

是的，如果我理解正确，您可能只需要在 WCF 服务器 OperationContract 中设置 AsyncPattern = true，然后使用 BeginXXX 和 EndXXX 方法实现每个 WCF 服务器调用。

如果您当前有同步实现的 WCF 服务器调用，则首先应该能够在同步方法上使用 BeginInvoke，尽管显然最好使它们完全异步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:38:18.553

我无法控制 SOAP Java 服务，我可以在服务引用上设置配置以异步运行。如果我要使用 BeginXXX 和 EndXXX 方法，我将如何在 WCF 方法调用中运行结果？

```
public class AddService : IAddService
{
    // SOAP Java service reference
    ResultServiceClient proxy = new ResultServiceClient();

    public int AddNumbers(int x, int y)
    {

        proxy.BeginGetResult(x, y, new AsyncCallback(OnEndAdd), null);

        /// how to return a result here.??????
        return result;
    }

    void OnEndAdd(IAsyncResult result)
    {
        int result = proxy.EndGetResult(result);
    }
} 
```

# java - java中的黑杰克纸牌游戏有问题

> ID：12869383
> 
> 赞同：-2
> 
> 时间：2012-10-13T02:18:43.953
> 
> 标签：java

我早些时候发布了这个，我的大部分问题都得到了回答，但我的代码中只有最后一个错误。

所以基本上我正在用java制作一个黑杰克游戏。我有一个卡片类、一个套牌类和我的主类。我遇到的问题是我的主要问题。在我的套牌类中，我在 arraylist 中创建了 52 张卡片的套牌。然后我有一个方法 deal ，它将获取顶牌并将其添加到手牌数组列表中，这是用户手中的牌。一旦用户不想再继续，牌就会停止发牌。我的 main 的最后一部分获取手数组列表中的值并将它们相加并将它们与 21 进行比较，以查看用户是否超过了。我意识到我正在尝试在 int 总数中保存一个 Card 值，但是我将使用什么来保存 arraylist 中的值以便我可以比较它们？任何帮助/建议或意见表示赞赏

我在此代码上遇到的错误是：

```
 1 error found:
File: E:\Documents\Java Files\Assignment 3\CardGameTester.java  [line: 33]
Error: Type mismatch: cannot convert from Card to int 
```

我有问题的主要部分是：

```
int total;

for(int index = 0; index <= hand.size(); index++)
{
  total = hand.get(index);
}

System.out.println("Your total value for you cards are: " + total);

if(total == 21){
  System.out.println("Congrats, you have won for not going over 21");
}
else
  {
    System.out.println("Sorry, you lose for going over 21");
} 
```

对于任何对此感兴趣的人来说，我的卡片和甲板课程：

```
public class Card
{
  private int rankValue, suitValue;
  private String ranks[] = {"Hearts", "Clubs", "Spades", "Diamonds"};
  private String suits[] = {"Ace", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "Jack", "Queen", "King"};

  public Card(int rank, int suit)
  {
    rankValue = rank;
    suitValue = suit;
  }

  public String convertToString(int rank){
    return ranks[rank];
  }

  public void setRank(int rank){
    rankValue = rank;
  }

  public void setSuit(int suit){
    suitValue = suit;
  }

  public int getRank(){
    return rankValue;
  }

  public int getSuit(){
    return suitValue;
  }

  public String toString(){
    String name = ranks[rankValue] + " of " + suits[suitValue];
    return name;
  }
} 
```

甲板等级：

```
import java.util.ArrayList;
import java.util.Collections;

public class Deck
{
  private ArrayList<Card> cards = new ArrayList<Card>();

  public Deck()
  {
    for(int a = 1; a <= 4; a++)
    {
      for(int b = 1; b <= 13; b++)
      {
        Card c = new Card(a,b);
        cards.add(c);
      }
    }
    shuffle();
  }

  public void shuffle(){
    Collections.shuffle(cards);
  }

  public Card deal(){
    int index = 0;
    Card c = cards.remove(index);
    index++;
    return c;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:21:18.913

```
cannot convert from Card to int 
```

卡片类可能有一个`int value`由 访问的字段`getValue()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:22:24.337

你的`Card`类应该有一个方法叫做`intValue`or`getValue`来获取卡片的整数值。然后在每张卡上调用它并将返回的数字相加。不过，处理软 A 会有点棘手。

此外，使用 foreach，而不是手动索引。

```
int total;
for(Card card: hand)
{
   total += card.value();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:38:14.530

该消息告诉您 Card 不是“int”，这当然是完全正确的。我建议您阅读有关面向对象编程的内容。基本思想是类包含属性，这些属性可能是简单类型，如 int 或其他类的其他实例。不同的类有不同的操作和属性集。编译器知道卡片具有某些操作，并且对于该引用仅允许卡片或看起来像卡片的东西。我不想详细介绍，因为互联网上有很多很棒的讨论和教程，很容易找到。

# dynamic - 使用字符串中的参数列表调用 Lua 函数

> ID：12869387
> 
> 赞同：3
> 
> 时间：2012-10-13T02:20:39.923
> 
> 标签：dynamic, lua, coronasdk

是否可以在 LUA 中执行类似 foo("param1, param2, param3, param4") 的函数，并将其检测为 foo(param2, param2, param3, param4)

为什么？我有一个场景，一个函数可以接收任意数量的参数，但它们不能作为列表发送（它在 CoronaSDK 中，所以我不能真正修改源，必须适应它）。所以，有时我必须发送 3 个参数，而有时我会发送 100 个。有这样做的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:02:55.037

> 它们不能作为列表发送（它在 CoronaSDK 中，所以我不能真正修改源，必须适应它）

当然可以。手表：

```
function CallWithParametersInAList(FunctionToCall, paramsInList)
  return FunctionToCall(unpack(paramsInList))
end 
```

看？中的每个数组元素都`paramsInList`将被解压缩为`FunctionToCall`. 此外，`FunctionToCall`将返回来自的每个返回值。

**看**

```
function test(a)
    print("this is lua test function."..a);
end

CallWithParametersInAList(test,{33333}); 
```

**输出**

```
this is lua test function.33333 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T02:35:43.617

您可以根据需要调用具有任意多个参数的 lua 函数。如果函数需要更多参数，它们将被设置为 nil。如果函数需要的参数太少，发送的额外参数将被忽略。

例如：

```
function f(a, b, c)
  print(a, b, c)
end

f(1, 2) -- prints: 1 2 nil

f(1, 2, 3) -- prints: 1 2 3

f(1, 2, 3, 4, 5) -- prints: 1 2 3 
```

编辑：

如果您必须从字符串中获取参数并且这些参数包括表和函数之类的内容，那么您别无选择，只能获取由 loadstring 函数解析的字符串：

```
-- s contains the parameters
s = '1,2,{1,2,3}'

-- f is the function you want to call
loadstring('f(' .. s .. ')')()  -- prints: 1  2  table: 0061D2E8 
```

我不确定 CoronaSDK，但 loadstring 函数往往有点慢。如果可能，尽量避免它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T05:52:17.723

我想告诉 Nicol Bolas，您可能正在尝试解决错误的问题，但是如果您仍想解析字符串并将其转换为参数列表，这是一种方法（`loadstring`在 Corona 环境中不可用；显然这不处理任何类型的分层数据）：

```
function str2list(s)
  local parms = {}
  for p in s:gmatch("([^,]+),?") do table.insert(parms, p) end
  return unpack(parms)
end
print(str2list("param1, param2, param3, param4")) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T04:20:01.413

在我看来（也是我使用的）最好的方法之一是这样的：

```
function Call( ... )
    -- All passed arguments are stored in a default table named arg
    table.foreach( arg, print )
end 
```

[而且，这是一个关于键盘](http://codepad.org/oDmVZ209)的工作示例- [oDmVZ209](http://codepad.org/oDmVZ209)。

# cmd - 在 Windows 7 cmd 中打开文件

> ID：12869397
> 
> 赞同：0
> 
> 时间：2012-10-13T02:21:49.423
> 
> 标签：cmd

我想在 Windows 7 cmd 行中打开一个文件：

C:\Users\jose\2 Ano\DAA>"开始算法"

但是正如您所看到的，该文件有一个空格并且它不会打开错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:26:58.330

尝试`type "file name"`并确保您的文件名与扩展名正确

# php - 如何在对象/数组上循环 foreach

> ID：12869403
> 
> 赞同：1
> 
> 时间：2012-10-13T02:23:09.300
> 
> 标签：php, for-loop, foreach

My`DB`返回一个对象数组，其中包含数组。

# var_dump

```
array (size=2)
  0 => 
    object(stdClass)[22]
      public 'customer_id' => string '10' (length=2)
      public 'cart' => string 'a:1:{s:32:"f9bb1d342b1c2a0bfe982ef405369ec0";a:9:{s:5:"rowid";s:32:"f9bb1d342b1c2a0bfe982ef405369ec0";s:2:"id";s:9:"101_30524";s:3:"qty";s:1:"1";s:5:"price";s:5:"104.5";s:4:"name";s:13:"Business Card";s:5:"image";s:18:"business-cards.gif";s:4:"ship";a:3:{s:6:"Ground";d:9.730000000000000426325641456060111522674560546875;s:11:"2nd Day Air";d:18.53999999999999914734871708787977695465087890625;s:9:"Overnight";d:26.269999999999999573674358543939888477325439453125;}s:7:"options";a:2:{s:17:"Print Description";s:16'... (length=761)
      public 'shipping_type' => string 'Ground' (length=6)
      public 'shipping_cost' => string '9.73' (length=4)
      public 'order_sub_total' => string '104.50' (length=6)
      public 'order_total' => string '114.23' (length=6)
      public 'id' => string '28' (length=2)
      public 'timestamp' => string '2012-10-12 20:10:30' (length=19)
  1 => 
    object(stdClass)[23]
      public 'customer_id' => string '10' (length=2)
      public 'cart' => string 'a:2:{s:32:"22d2d3d8584f6e0819c4e46af4d2fda2";a:9:{s:5:"rowid";s:32:"22d2d3d8584f6e0819c4e46af4d2fda2";s:2:"id";s:9:"101_94980";s:3:"qty";s:1:"1";s:5:"price";s:2:"64";s:4:"name";s:13:"Business Card";s:5:"image";s:18:"business-cards.gif";s:4:"ship";a:3:{s:6:"Ground";d:9.730000000000000426325641456060111522674560546875;s:11:"2nd Day Air";d:18.53999999999999914734871708787977695465087890625;s:9:"Overnight";d:26.269999999999999573674358543939888477325439453125;}s:7:"options";a:2:{s:17:"Print Description";s:164:"'... (length=1506)
      public 'shipping_type' => string 'Ground' (length=6)
      public 'shipping_cost' => string '19.46' (length=5)
      public 'order_sub_total' => string '148.25' (length=6)
      public 'order_total' => string '167.71' (length=6)
      public 'id' => string '29' (length=2)
      public 'timestamp' => string '2012-10-12 20:29:10' (length=19) 
```

注意`cart`是一个多维数组。如何循环遍历这些对象和数组并创建一个表？

```
<?php foreach($all_orders as $key => $val) : ?>

    <?php echo $key; ?>  <?php echo $val; ?>

<?php endforeach; ?> 
```

这会导致以下错误：*遇到 PHP 错误严重性：4096 消息：stdClass 类的对象无法转换为字符串*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:25:05.363

你可以试试

```
echo "<pre>";
foreach ( $cart as  $all_orders ) {
    foreach ( $all_orders as $key => $value ) {
        echo $key, " = ", $value, PHP_EOL;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T02:28:02.587

`stdClass`使用操作符访问对象的属性`->`：

```
<?php foreach($all_orders as $key => $val) : ?>
Customer ID <?php echo $val->customer_id ?> has a total of <?php echo $val->order_total ?><br />
<?php endforeach ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:26:45.443

PHP 5 允许使用循环遍历对象的*公共*属性`foreach`。

更多信息（和代码示例）： http: [//php.net/manual/en/language.oop5.iterations.php](http://php.net/manual/en/language.oop5.iterations.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T03:16:04.430

我在我的 MVC 中使用 PHP 的 ArrayObject：
us3.php.net/manual/en/class.arrayobject.php

```
 $arrayobject = new ArrayObject($dataRows);
        for ($iterator = $arrayobject->getIterator(); $iterator->valid(); $iterator->next()) {

        } 
```

# asp.net - asp.net+私信系统通知

> ID：12869408
> 
> 赞同：2
> 
> 时间：2012-10-13T02:24:07.237
> 
> 标签：asp.net

我正在尝试在我的 asp.net 应用程序中构建一个私人消息收件箱系统，使用 SQL Server 来存储用户之间的消息，但我不知道如何实现这一点，例如，当他/她时，facebook 会立即通知用户通过另一个用户的操作在其顶部导航栏上以红色图标形式接收新消息或通知。我已经阅读了一些教程和指南，其中大多数都需要每隔几秒钟对数据库进行一次轮询。任何人都可以阐明什么是解决此问题的好方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:31:34.623

我过去曾使用 SignalR 做类似的事情。它可以通过 NuGet 通过 Install-Package SignalR 安装

Scott Hanselman 有一篇很棒的文章：[http ://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

此外，[jabbr.net](http://jabbr.net/)是一个功能齐全的示例，我认为它非常接近您想要做的事情。

# javascript - 保护全局 Javascript“API”对象

> ID：12869409
> 
> 赞同：5
> 
> 时间：2012-10-13T02:24:22.927
> 
> 标签：javascript, html, object

我目前有一个运行全局基于 Javascript 的 API 的 Web 应用程序，它的初始化如下：

```
var Api = {
    someVar: "test",
    someFunction: function() {
        return "foo";
    }
} 
```

这个 API 在 Web 应用程序中的许多“小部件”之间共享，它们都应该在这个单一`Api`实例上运行，以便它们可以相互传递数据。

AJAX 当前用于加载这些小部件，例如在 widgets/mywidget.html 中，它被放置在，比如说，`<div id='widget_<random number>'>...</div>`

代码的某些其他部分可能会选择向 中添加更多功能`Api`，目前是这样完成的：

```
Api.myExtension = {
    myNewFunction: function() {
        return "bar";
    }
} 
```

但是，这种用法会产生一些问题：

**问题一：**如果一个 Widget（这些可能由第三方提供）决定在其中隐藏一些代码，并执行类似的操作`Api = {}`，破坏所有存在的全局`Api`变量，并破坏整个应用程序怎么办？是否可以保护此`Api`变量不被外部覆盖？只允许“扩展”（添加新事物），但不允许“删除/更改”。IE：

```
Api.foo = { test: "bar" } // allowed
Api.someVar = "changing the existing someVar"; // not allowed 
```

以下代码位于“内部” `Api`，例如：

```
var Api = {
    Debug: {
        Messages = new Array,
        Write: function() {
            Api.Debug.Messages.push("test"); // allowed
        }
    }
}

Api.Debug.Messages.push("test 2"); // not allowed 
```

**我想到的可能的解决方案：**

1.  假设我们只是使用框架来解决这个问题。提供的`Api`s 现在彼此分开。但是，`Api`如果我有很多 s 正在运行，那么在一次又一次加载时会有额外的开销`Widget`，并且它们无法再与小部件的“主机”（框架所在的页面）通信，例如，我可能想告诉主机显示通知：`Api.Notify.Show("Test")`，但它不能这样做，因为这`Api`完全独立于其他实例，并且它无法与“主机”通信

2.  使用诸如“getter”和“setter”之类的函数来读取和写入 Api。我不确定如何实现这一点，因此欢迎就如何实现这一点提供任何帮助！

3.  1/2的混合物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:14:16.740

没有好的方法可以防止“第三方”小部件覆盖全局变量。通常，组装最终应用程序的人有责任确保他们使用的任何 JavaScript 都不会乱扔全局命名空间并发生冲突。在这个方向上你能做的最好的事情就是给你的“Api”一个好听的、独特的名字。

我认为可以帮助您很多的是“揭示模式”之类的东西，这将是一种执行您提到的“getter and setter”的方式，如果您需要它，还可以添加更多。

一个简单、无用的示例如下所示：

```
var Api = (function () {
    // private variable
    var myArray = [];

    return {
        addItem: function (newItem) {
            myArray.push(newItem);
        },
        printItems: function () {
            console.log("lots if items");
        }
    };
})();

Api.addItem("Hello, world");
Api.extensionValue = 5; 
```

我认为您应该清楚地描述共享的数据或“单例”数据，并将这些项目保密，就像我的示例中的 myArray 一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T03:20:35.013

看一眼

```
Object.freeze 
```

更多信息[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/freeze)

这是来自 Mozilla 页面的代码示例：

```
var obj = {
  prop: function (){},
  foo: "bar"
};

// New properties may be added, existing properties may be changed or removed
obj.foo = "baz";
obj.lumpy = "woof";
delete obj.prop;

var o = Object.freeze(obj);

assert(Object.isFrozen(obj) === true);

// Now any changes will fail
obj.foo = "quux"; // silently does nothing
obj.quaxxor = "the friendly duck"; // silently doesn't add the property

// ...and in strict mode such attempts will throw TypeErrors
function fail(){
  "use strict";
  obj.foo = "sparky"; // throws a TypeError
  delete obj.quaxxor; // throws a TypeError
  obj.sparky = "arf"; // throws a TypeError
}

fail();

// Attempted changes through Object.defineProperty will also throw
Object.defineProperty(obj, "ohai", { value: 17 }); // throws a TypeError
Object.defineProperty(obj, "foo", { value: "eit" }); // throws a TypeError 
```

但是浏览器支持仍然是部分的

**编辑**：请参阅内核詹姆斯的回答，它与您的问题更相关（冻结将保护对象，但不保护重新分配它。但是 const 会）同样的问题，但浏览器支持有限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T04:02:22.987

使它成为`constant`：

```
const Api = "hi";

Api = 0;

alert(Api); //"hi" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T02:43:52.987

保护全局变量的唯一方法（至少我能想到的）是防止小部件直接访问它。正如您所建议的，这可以通过使用框架函数来实现。您应该创建一个对象，其中包含 Widget 应该能够使用的所有功能，并将其传递给每个 Widget。例如：

```
var Api = {
   widgetApi = {
      someFunction: function(){
          // ...
      }
   },
   addWidget:function(){
      var temp = this.widgetApi.constructor(); 

      for(var key in this.widgetApi)
         temp[key] = clone(this.widgetApi[key]);
      return temp;
   }
   // Include other variables that Widgets can't use
} 
```

这样，小部件可以执行功能并与*主机*或全局变量进行通信`Api`。要设置变量，小部件将编辑其私有对象，而不是全局对象。对于每一帧（代表一个 Widget），您必须*初始化*或创建对象的副本`widgetApi`，并且可能将其存储在一个数组中，这样一个 Widget 的*实例*就存储在主`Api`对象中。

例如，给定`<iframe id="widget"></iframe>`

您将执行以下操作：

```
var widget = document.getElementById("widget");
widget.contentWindow.Api = Api.addWidget();
widget.contentWindow.parent = null;
widget.contentWindow.top = null; 
```

此外，在每一帧中，您都需要将`parent`and`top`变量设置为 null，这样 Widget 就无法访问主帧的数据。我有一段时间没有测试过这个方法，所以可能有办法绕过将这些变量设置为空。

# c# - 如何从 XAML 代码更改 ItemsPanelTemplate WrapGrid？

> ID：12869410
> 
> 赞同：6
> 
> 时间：2012-10-13T02:24:24.483
> 
> 标签：c#, xaml, windows-8

我正在尝试像这样修改 WrapGrid 的 MaximumRowsOrColumns 属性：

```
<GridView.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapGrid x:Name="wrapGridItems" Orientation="Vertical" MaximumRowsOrColumns="1" />
    </ItemsPanelTemplate>
</GridView.ItemsPanel> 
```

然后我使用这段代码来改变 WrapGrid：

```
<VisualState x:Name="Snapped">
    <Storyboard>
        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="wrapGridItems" Storyboard.TargetProperty="MaximumRowsOrColumns">
            <DiscreteObjectKeyFrame KeyTime="0" Value="-1"/>
        </ObjectAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetName="headerText" Storyboard.TargetProperty="Text">
            <DiscreteObjectKeyFrame KeyTime="0" Value="Pins"/>
        </ObjectAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

但我得到了错误

> WinRT 信息：无法解析 TargetName wrapGridItems。

我应该如何引用 ObjectAnimationUsingKeyFrames Storyboard.TargetName 属性中的 WrapGrid？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:51:58.600

您不能使用 x:Name 访问模板内的元素。由于模板可以被多次实例化，动画将无法判断它应该操作哪个元素。

如果您需要更改模板内元素的属性，您应该使用绑定：

```
<GridView.ItemsPanel>
    <ItemsPanelTemplate>
        <WrapGrid Orientation="Vertical" MaximumRowsOrColumns="{Binding MyMaxRowsOrCollumns}" />
    </ItemsPanelTemplate>
</GridView.ItemsPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-16T06:53:01.320

设计规范：

```
<GridView >

<GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapGrid x:Name="wrapGrid" Orientation="Vertical"   MaximumRowsOrColumns="{Binding MyMaxRowsOrCollumns}"></WrapGrid>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>
</GridView > 
```

* * *

C#代码：

创建依赖属性

```
public int MyMaxRowsOrCollumns
    {
        get { return (int)GetValue(MyMaxRowsOrCollumnsProperty); }
        set { SetValue(MyMaxRowsOrCollumnsProperty, value); }
    }

    // Using a DependencyProperty as the backing store for MyMaxRowsOrCollumns.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty MyMaxRowsOrCollumnsProperty =
        DependencyProperty.Register("MyMaxRowsOrCollumns", typeof(int), typeof(DashBord), new PropertyMetadata(2)); 
```

# html - Ebay html 特殊标签不起作用？

> ID：12869416
> 
> 赞同：3
> 
> 时间：2012-10-13T02:25:18.147
> 
> 标签：html

`{ eBayStoresItemList DISPLAY="1" }`此标签将在网格视图中显示我商店的所有商品，但在我的商店中使用时它不起作用。不会显示错误。

我错过了什么吗？请建议如何在 ebay 中自定义商店页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T20:43:31.653

在任何 html 编辑器中，当您尝试复制代码并直接将其粘贴到设计视图中时，编辑器会更改源代码并转换一些特殊字符。

例如，

```
{eBayStoresItemList DISPLAY="1" SIZE="15"} will be changed to {eBayStoresItemList DISPLAY=&quot;1&quot; SIZE=&quot;15&quot;} 
```

或者

```
 eBayStoresItemList DISPLAY="1" } to {eBayStoresItemList DISPLAY=&quot;1&quot; } 
```

这是因为编辑器会自动转换双引号并为其插入 html 代码。

**解决方案：**

转到您的 html 的代码视图，或尝试使用记事本打开它，然后按原样复制/粘贴原始代码。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T14:22:38.250

这可能是因为你在那里有空格：

```
{ eBayStoresItemList DISPLAY="1" } 
```

尝试这个：

```
{eBayStoresItemList DISPLAY="1"} 
```

[http://pages.ebay.co.uk/help/specialtysites/stores-specific-tags.html](http://pages.ebay.co.uk/help/specialtysites/stores-specific-tags.html)

*   0 - 列表视图
*   1 - 画廊视图

那样有用吗..？

# c# - C# 银行示例 - 客户类 - 取款、存款等内容

> ID：12869423
> 
> 赞同：6
> 
> 时间：2012-10-13T02:26:52.083
> 
> 标签：c#, oop, class, c#-4.0

我正在学习 C#，并试图弄清楚什么时候使用类，什么时候不使用。

如果我正在为银行编写应用程序，我知道我会为客户使用类，其中包括他们的姓名、帐号、余额等。我会为将存款存入他们的账户、取款、更改的方法使用静态类吗？他们的地址等，因为我只需要写一次？

另外，我将使用什么来跟踪每个客户对象？拥有 2,000 名客户：

```
exampleName = new Customer(); 
```

在我的代码中似乎不正确。我还没到学习数据库的地步，只是在学习课程。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T02:38:24.440

拥有一个数据库将是理想的，但同时您可以使用 IEnumerable 来保存您的 Customer 对象，如下所示：

```
List<Customer> myCustomers = new List<Customer>();
myCustomers.Add(new Customer {Name = "Bob", Address = "123 Anywhere St." }); 
```

然后你可以在需要的地方传递列表。

通常，您将在`Customer`拥有帐户的类上拥有一个属性：

```
public class Customer
{
    public Customer()
    {
        _accounts = new List<Account>();
    }

    public List<Account> Accounts 
    {
        get { return _accounts; }
        set { _accounts = value; }
    }

    private List<Account> _accounts;
} 
```

等等。请注意，当您是初学者时，我会保持这种简单性并以更冗长和描述性的方式来做事。

以这种方式使用项目列表是一个很好的开始方式，因为当您开始使用数据库时，您会自然而然地使用它们；您将从数据库中检索结果集，然后将这些结果集转换为业务对象列表。

至于使用静态方法做业务逻辑，比如调整余额、更改地址等，对于现阶段的你来说无所谓。如果您使用的是 Resharper 之类的工具，它会用类似的建议来唠叨您，但在您的情况下，您可以放心地忽略那个特定的工具。您应该寻找的是尽可能保持一切自包含，避免数据泄漏和对象之间的责任泄漏 - 这只是良好的编码规则，也是防止由松散编码引起的错误的好方法。

一旦你确定了你的功能并开始工作，你可能希望将一些功能移动到静态的“帮助”样式类中。这绝对没问题，但要小心 - 辅助类很棒，如果你不遵守编码规则，一切都会很快变成反模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T02:42:08.697

您无需使用静态类或静态方法，只需编写一次方法。这样做可能有意义，也可能没有意义，但这是编写方法[而无需重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的一种完全有效的方式：

```
public class Customer
{
    //properties, constructors, etc.

    public virtual void Deposit(decimal amount) { }
    public virtual void Withdraw(decimal amount) { }
    //etc
} 
```

这也允许您利用[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，例如

```
public class BusinessCustomer : Customer
{
    public override void Deposit(decimal amount) { //some other implementation }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T02:46:08.900

当您不打算实例化对象时使用静态类。你得到了那个类的一个“实例”——你不能做这样的事情：

```
MyStaticClass m = new MyStaticClass();
m.SomeFunc(); 
```

当你有一个静态类时。相反，您可以通过使用类名本身来使用它。就像是：

```
MyStaticClass.SomeFunc(); 
```

至于您将使用什么来跟踪每个 Customer 对象？您可以使用某种集合来保存这些。诚然，在一个真实的系统中，会有某种持久性部件，可能是一个数据库，来保存数据。但是你可以做一些类似的东西：

```
IEnumerable<Customer> Customers = new List<Customer>(); 
```

然后将您的客户添加到该列表中

```
Customers.Add(new Customer() { ... }); 
```

回到关于静态方法的问题......

因此，这里的交易是您不会在静态方法中引用实例成员，因此您不会使用静态方法来更新特定客户的地址。假设您的 Customer 类看起来像：

```
public class Customer
{
   public string Address { get; set; }
} 
```

你不能使用像这样的静态方法

```
public static void SetAddress() 
```

因为每个客户（大概）都有不同的地址。您无法访问那里的客户地址，因为它不是静态的。懂吗？相反，如果您想做一些不需要处理实例数据的事情，您将使用静态方法。我将静态方法用于实用程序功能之类的东西。

```
public static double ComputeSomething(double someVal) { ... } 
```

在这里，任何人都可以调用 ComputeSomething 函数，例如：

```
var result = MyStaticClass.ComputeSomething(3.15); 
```

这里的要点是静态**类**不用于实例化对象，而是将它们真正用作保存函数的方便容器。静态**函数**是*可以*在非静态类上但不能访问任何实例数据的函数。

使用静态函数的一个地方是单例模式。您将构造函数设置为非公开的，因此人们无法调用它，而是在类上提供一个静态方法来返回该类的唯一实例。就像是：

```
public class MySingleton
{
   private static MySingleton instance;

   private MySingleton() {}

   public static MySingleton Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new MySingleton();
         }
         return instance;
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T02:44:05.823

> 取款，存款等

那些将被称为**Transactions**。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T02:52:10.860

这是对其他答案的补充。这是具有接口的多态性的示例。

```
public interface IDeposit {
    void Deposit(decimal amount);
}

public interface IWithdraw {
    void Withdraw(decimal amount);
}

public class Customer : IDeposit, IWithdraw {
    public void Deposit(decimal amount) { throw new NotImplementedException(); }
    public void Withdraw(decimal amount) { throw new NotImplementedException(); }
}

public class DepositOnlyATM : IDeposit {
    public void Deposit(decimal amount) { throw new NotImplementedException(); }
} 
```

保持概念分离，并允许实现多个接口，或者只实现一个。使用类继承方法，您只会得到一种，而您会得到全部。根据我的经验，你不可避免地会以意大利面结束，因为子类想要一些行为，但不是全部。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-13T10:27:42.413

我建议您首先为您的银行示例写一些简单的用户故事，而不是立即进入实施细节。例如

1.  作为客户，我想开一个新账户，以便进行存款和取款

正是在这个要求中，我们可以设想几个类（客户和帐户）。从那里只是在功能上分解客户应该做什么以及帐户应该做什么。

我发现“面向对象的思维过程”这本书是一本很好的读物，将有助于回答一些关于“我什么时候做这个和那个”的问题。

祝好运并玩得开心点！

# c# - 为什么 lambdas 可以将函数调用转换为 Actions？

> ID：12869426
> 
> 赞同：13
> 
> 时间：2012-10-13T02:26:58.900
> 
> 标签：c#, .net, c#-4.0

在此代码片段中：

```
List<String> names = new List<String>();
names.Add("Bruce");
names.Add("Tom");
names.Add("Tim");
names.Add("Richard");

names.ForEach(x => Print(x));

private static string Print(string s)
{
    Console.WriteLine(s);
    return s;
} 
```

`Print`不是`Action`肯定的，因为它正在返回`string`；然而`x=> Print(x)`是，为什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T02:32:32.750

lambda 表达式的类型`x => Print(x)`是根据其上下文确定的。由于编译器知道将 lambda 赋值给`Action<string>`，因此编译器会忽略`Print(s)`方法的返回类型，就好像它是*语句表达式*一样。

这是一个有效的转换：

```
Action<string> myAction = y => Print(y); 
```

换句话说，两者

```
Print("something"); 
```

和

```
int x = Print("something"); 
```

是该`Print`方法的正确用法；它们可以以相同的方式在 lambdas 中使用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-13T02:32:40.913

`x => Print(x)`是一个 lambda，它在这里变成了一个方法，相当于：

```
void MyPrintLambda(string x) { Print(x); } 
```

如果上下文要求 a `Func<string, string>`，它会是这样的：

```
string MyPrintLambda(string x) { return Print(x); } 
```

或者，如果它是`Func<string, object>`，它会是这样的：

```
object MyPrintLambda(string x) { return Print(x); } 
```

因为编译器可以通过简单地忽略返回类型（即第一个例子）`x => Print(x)`变成一个，它可以编译。`Action<string>`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-13T03:07:16.840

出于同样的原因，这将是有效的：

```
foreach (string name in names)
{
    Print(name);
} 
```

Print() 方法也会在该代码中返回一个值，但没有人会认为这是一个错误。只允许丢弃返回值。

# php - Mysql加入两个ID到达那里用户名

> ID：12869428
> 
> 赞同：2
> 
> 时间：2012-10-13T02:27:47.137
> 
> 标签：php, mysql, pdo

我试图进入包含 MYSQL 查询结果的数组。我有 2 个 id 存储在表 hitlist user_id 和 mark_id 中，他们需要加入表 users 以检索与 id 匹配的用户名以及将来的其他变量。

我有这个以一种奇怪的方式工作，并希望让它以一种更有效的简单方式工作，类似于这个

```
$Hitlists = $db->query("SELECT * FROM hitlist JOIN users ON hitlist.user_id = users.id AND hitlist.mark_id = users.id")->fetchAll(); 
```

这是我正在工作的代码......现在看起来它可能会在以后给我带来问题。

```
<?php
$index = 0;
$Hitlists = array();
$st = $db->query("SELECT * FROM hitlist JOIN users ON hitlist.user_id = users.id")->fetchAll();
$sth = $db->query("SELECT * FROM hitlist JOIN users ON hitlist.mark_id = users.id")->fetchAll();

foreach($st as $id) 
{
    $Hitlists[] = $id;
}

foreach($sth as $id) 
{
        $Hitlists[$index]['markedby'] = $id['username'];
        $Hitlists[$index]['mark_id'] = $id['mark_id'];
        $index++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T02:31:25.043

您加入表格的方式是错误的。你可以得到你想要的确切记录，你需要加入`users`表两次才能得到每个人的用户名`ID`

```
SELECT  a.*, 
        b.username User_name,
        c.username mark_name      
FROM    hitlist a
        INNER JOIN users b
            ON  a.user_id = b.id 
        INNER JOIN users c
            ON  a.mark_id = c.id 
```

你可以访问

```
$result['User_name'] 
$result['mark_name'] 
```

# sqlite - SQLError #3115 参数计数不匹配

> ID：12869431
> 
> 赞同：-2
> 
> 时间：2012-10-13T02:28:18.543
> 
> 标签：sqlite, parameters

当我尝试将 SQL UPDATE 与我在 Flex builder 中制作的移动应用程序一起使用时，出现此错误。我试图搜索它并删除参数，但即使这样我也得到了相同的代码。任何帮助将非常感激

```
SQLError: 'Error #3115: SQL Error.', details:'Mismatch in parameter count. Found 6 in SQL specified and 5 value(s) set in parameters property.
', operation:'execute', detailID:'1004'
    at flash.data::SQLStatement/internalExecute()
    at flash.data::SQLStatement/execute()
    at model::SQLiteDatabase$/updateMember()[/Users/stokhofdavey/Documents/Adobe Flash Builder 4.6/MenuPlannerApplication/src/model/SQLiteDatabase.as:175]
    at views::MemberDetailsView/onSaveButtonClicked()[/Users/stokhofdavey/Documents/Adobe Flash Builder 4.6/MenuPlannerApplication/src/views/MemberDetailsView.mxml:25]
    at views::MemberDetailsView/___MemberDetailsView_Button3_click()[/Users/stokhofdavey/Documents/Adobe Flash Builder 4.6/MenuPlannerApplication/src/views/MemberDetailsView.mxml:45] 
```

这是 MXML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        xmlns:ns1="*"
        title="Member Details">
    <fx:Script>
        <![CDATA[
            import model.Dish;
            import model.Member;
            import model.SQLiteDatabase;

            protected function onHomeButtonClicked(event:MouseEvent):void {
                navigator.popView();
            }

            protected function onSaveButtonClicked():void {
                var editNote:Member = new Member();
                editNote.FirstName = efirstname.text;
                editNote.FamilyName = efamilyname.text;
                editNote.Sex = esex.text;
                editNote.Age = eage.text;
                editNote.Notes = enotes.text;
                SQLiteDatabase.updateMember(editNote);

                currentState = "Info";
            }

        ]]>
    </fx:Script>

    <s:states>
        <s:State name="Info"/>
        <s:State name="Favorites"/>
        <s:State name="EInfo"/>
        <s:State name="EFavorites"/>
    </s:states>
    <s:navigationContent>
        <s:Button label="Back" click="navigator.popView();"/>
    </s:navigationContent>
    <s:actionContent>
        <s:Button includeIn="Info" label="Edit" click.Info="this.currentState=&quot;EInfo&quot;"/>
        <s:Button includeIn="EInfo" label="Save" click="onSaveButtonClicked()"/>

    </s:actionContent>
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <s:VGroup x="245" y="10" width="100%" height="354" gap="0"  >
        <ns1:TabMemInfoS includeIn="Favorites" width="60" height="40"/>
        <ns1:TabMebInfoL includeIn="Info" width="70" height="40"/>
        <ns1:TabMemFavoritesS includeIn="Info" width="60" height="40"/>
        <ns1:TabMebInfoL includeIn="EInfo" width="70" height="40"/>
        <ns1:TabMemFavoritesS includeIn="EInfo" width="60" height="40"/>
        <ns1:TabMemInfoS includeIn="EFavorites"/>
        <ns1:TabMemFavoritesL includeIn="EFavorites"/>
        <ns1:TabMemFavoritesL includeIn="Favorites" width="70" height="40"/>
    </s:VGroup>
    <s:Label id="FirstName" includeIn="Info" x="87" y="15" width="148" height="29" text="{data.FirstName}" textAlign="center"
             verticalAlign="middle"/>
    <s:Label id="FamilyName" includeIn="Info" x="87" y="46" width="148" height="29" text="{data.FamilyName}" textAlign="center"
             verticalAlign="middle"/>
    <s:Label id="Age" includeIn="Info" x="9" y="97" width="70" height="31" text="{data.Age}" textAlign="center"
             verticalAlign="middle"/>
    <s:Label id="Sex" includeIn="Info" x="87" y="97" width="70" height="31" text="{data.Sex}" textAlign="center"
             verticalAlign="middle"/>
    <s:Label id="notes" includeIn="Info" x="10" y="150" width="225" height="204" text="{data.Notes}"/>

    <s:Group includeIn="EInfo" width="246" height="364">
        <s:TextInput id="efirstname" x="83" y="10" width="150" text="{data.FirstName}" />
        <s:TextInput id="efamilyname" x="83" y="47" width="150" text="{data.FamilyName}"  />
        <s:TextInput id="eage" x="108" y="88" width="90" text="{data.Age}" />
        <s:TextInput id="esex" x="10" y="88" width="90" text="{data.Sex}" />
        <s:TextArea id="enotes" x="9" y="162" width="227" height="192" text="{data.Notes}" />
    </s:Group>

</s:View> 
```

和 2 个 .as 文件：SQLiteDatabase

```
 package model
{
    import flash.data.SQLConnection;
    import flash.data.SQLResult;
    import flash.data.SQLStatement;
    import flash.events.SQLEvent;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;
    import model.Dish;
    import model.Member;

    import mx.collections.ArrayCollection;

    public class SQLiteDatabase
    {
        private static var _sqlConnection:SQLConnection;

        public static function get sqlConnection():SQLConnection
        {
            if (_sqlConnection)
                return _sqlConnection;
            openDatabase(File.desktopDirectory.resolvePath("test.db"));
            return _sqlConnection;
        }

        public static function getNote(id:int):Dish
        {
            var sql:String = "SELECT id, title, time, message FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = id;
            stmt.execute();
            var result:Array = stmt.getResult().data;
            if (result && result.length == 1)
                return processRow(result[0]);
            else
                return null;
        }

        public static function getMYBlist(id:int):Dish
        {
            var sql:String = "SELECT id, title, time, message FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = id;
            stmt.execute();
            var result:Array = stmt.getResult().data;
            if (result && result.length == 1)
                return processRow(result[0]);
            else
                return null;
        }

        public static function notes():ArrayCollection
        {
            var noteList:ArrayCollection = new ArrayCollection();

            var sql:String = "SELECT id, title, time, message FROM notes";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();
            var sqlResult:SQLResult = stmt.getResult();
            if (sqlResult) {
                var result:Array = sqlResult.data;
                if (result) {
                    for (var index:Number = 0; index < result.length; index++) {
                        noteList.addItem(processRow(result[index]));
                    }
                }
            }
            return noteList;
        }

        public static function members():ArrayCollection
        {
            var noteList:ArrayCollection = new ArrayCollection();

            var sql:String = "SELECT FirstName, FamilyName, Sex, Age, Notes FROM Members";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();
            var sqlResult:SQLResult = stmt.getResult();
            if (sqlResult) {
                var result:Array = sqlResult.data;
                if (result) {
                    for (var index:Number = 0; index < result.length; index++) {
                        noteList.addItem(processRow2(result[index]));
                    }
                }
            }
            return noteList;
        }

        public static function addNote(note:Dish):void
        {
            var sql:String = 
                "INSERT INTO notes (title, time, message) " +
                "VALUES (?,?,?)";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.title;
            stmt.parameters[1] = note.time;
            stmt.parameters[2] = note.message;
            stmt.execute();
        }

        public static function addMember(note:Member):void
        {
            var sql:String = 
                "INSERT INTO notes (FirstName, FamilyName, Age, Sex, Notes) " +
                "VALUES (?,?,?,?,?)";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.FirstName;
            stmt.parameters[1] = note.FamilyName;
            stmt.parameters[2] = note.Age;
            stmt.parameters[3] = note.Sex;
            stmt.parameters[4] = note.Notes;
            stmt.execute();
        }

        public static function deleteNote(note:Dish):void
        {
            var sql:String = "DELETE FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.id;
            stmt.execute();
        }

        public static function deleteMember(note:Dish):void
        {
            var sql:String = "DELETE FROM notes WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.id;
            stmt.execute();
        }

        public static function updateNote(note:Dish):void
        {
            var sql:String = "UPDATE notes SET title=?, time=?, message=? WHERE id=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.title;
            stmt.parameters[1] = note.time;
            stmt.parameters[2] = note.message;
            stmt.parameters[3] = note.id;
            stmt.execute();
        }

        public static function updateMember(note:Member):void
        {
            var sql:String = "UPDATE Members SET FirstName=?, FamilyName=?, Sex=?, Age=?, Notes=? WHERE ID=?";
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.parameters[0] = note.FirstName;
            stmt.parameters[1] = note.FamilyName;
            stmt.parameters[2] = note.Sex;
            stmt.parameters[3] = note.Age;
            stmt.parameters[4] = note.Notes;            
            stmt.execute();
        }

        protected static function processRow(o:Object):Dish
        {
            var note:Dish = new Dish();
            note.id = o.id;
            note.title = o.title == null ? "" : o.title;
            note.time = o.time == null ? "" :o.time;
            note.message = o.message == null ? "" : o.message;
            return note;
        }

        protected static function processRow2(o:Object):Member
        {
            var info:Member = new Member();
            info.ID = o.ID;
            info.FirstName = o.FirstName == null ? "" : o.FirstName;
            info.FamilyName = o.FamilyName == null ? "" : o.FamilyName;
            info.Sex = o.Sex == null ? "" : o.Sex;
            info.Age = o.Age == null ? "" : o.Age;
            info.Notes = o.Notes == null ? "" : o.Notes;

            return info;
        }

        public static function openDatabase(file:File):void
        {
            var newDB:Boolean = true;
            if (file.exists)
                newDB = false;
            _sqlConnection = new SQLConnection();
            _sqlConnection.open(file);
            if (newDB)
            {
                createDatabase();
                populateDatabase();
            }
        }

        protected static function createDatabase():void
        {
            var sql:String = 
                "CREATE TABLE IF NOT EXISTS notes ( "+
                "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "title VARCHAR(50), " +
                "time VARCHAR(50), " +
                "message VARCHAR(200))"
                "CREATE TABLE IF NOT EXISTS members ( "+
                "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "title VARCHAR(50), " +
                "time VARCHAR(50), " +
                "message VARCHAR(200))"
                ;
            var stmt:SQLStatement = new SQLStatement();
            stmt.sqlConnection = sqlConnection;
            stmt.text = sql;
            stmt.execute();         
        }

        protected static function populateDatabase():void
        {
            var file:File = File.applicationDirectory.resolvePath("assets/notes.xml");
            if (!file.exists) return;
            var stream:FileStream = new FileStream();
            stream.open(file, FileMode.READ);
            var xml:XML = XML(stream.readUTFBytes(stream.bytesAvailable));
            stream.close();
            for each (var n:XML in xml.note)
            {
                var note:Dish = new Dish();
                note.id = n.id;
                note.title = n.title;
                note.time = n.time;
                note.message = n.message;
                addNote(note);
            }
        }

    }
} 
```

和 member.as

```
 package model
{
    import mx.collections.ArrayCollection;
    import mx.core.IUID;

    [Bindable]
    public class Member implements IUID
    {
        public var ID:int;
        public var FirstName:String;
        public var FamilyName:String;
        public var Sex:String;
        public var AgeID:int;
        public var Notes:String;
        public var Fname:String;
        public var Famname:String;
        public var Age:String;

        public function get uid(): String {
            return ID.toString();
        }

        public function set uid(value: String): void {
            ID = parseInt(value);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T10:32:04.023

您的 SQL 命令是：

```
UPDATE Members SET FirstName=?, FamilyName=?, Sex=?, Age=?, Notes=? WHERE ID=? 
```

但是您只设置要更新的五个字段的参数：

```
stmt.parameters[0] = note.FirstName;
stmt.parameters[1] = note.FamilyName;
stmt.parameters[2] = note.Sex;
stmt.parameters[3] = note.Age;
stmt.parameters[4] = note.Notes; 
```

您还必须设置`ID`值。

# jenkins - 你如何在 Jenkins 中将两个不同的构建管道联系在一起？

> ID：12869433
> 
> 赞同：4
> 
> 时间：2012-10-13T02:29:41.100
> 
> 标签：jenkins

我在 jenkins 中有一个构建管道，用于构建和部署公开 REST API 的后端组件。我有另一个构建管道，用于构建和部署调用后端组件的前端组件。后端和前端组件位于单独的 Git 存储库中。

当每个相应的 Git 存储库中发生提交时，就会启动每个管道的构建作业。

我想在每个构建管道的构建管道结束时运行自动化功能测试。但是我怎么知道两个管道都已完成并且应该运行功能测试？它可以将两条管道连接在一起吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:49:28.867

一种方法是使用[Locks and Latches](https://wiki.jenkins-ci.org/display/JENKINS/Locks+and+Latches+plugin)插件并为每个管道上的每个作业提供自己的锁，例如 Pipeline-A 和 Pipeline-B，然后将运行测试的作业配置为获取 Pipeline-A 和 Pipeline-A 上的锁管道-B。如果任一管道的任何部分正在运行，这既可以防止测试作业运行，也可以在测试运行时阻止管道上的任何更改。

如果您只想锁定部署作业，您可以使用相同的方法，但只需使用锁定配置部署作业；这将允许正常构建正常运行，但在测试运行时部署作业排队。

假设；

*   任何 Deploy 作业都在触发测试执行

第二种方法是设置作业管道，以便在执行部署之前触发以下布局中的单个作业；

```
EndOfPipelineA -> SystemDeploymentController
EndOfPipelineB -> SystemDeploymentController
SystemDeploymentController -> DeployAppOne
SystemDeploymentController -> DeployAppTwo
DeployAppTwo -> TestExecution
DeployAppOne -> TestExecution 
```

然后，您使用[Join](https://wiki.jenkins-ci.org/display/JENKINS/Join+Plugin "加入")插件仅在两个部署都完成且成功时运行 TestExecution 作业。

第二种方法允许您：

1.  根据部署的成功有条件地控制测试执行的执行，
2.  如果您对其运行的系统进行任何更改，则只需一项工作即可重新部署整个系统，然后自动运行测试。
3.  可能会使用促销插件来突出显示两个应用程序可以很好地协同工作的“良好配置”

但是管理起来有点棘手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T22:14:36.493

虽然这是一个老问题，但您可以考虑使用 Build Flow Plugin 重构您的构建管道

[https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Build+Flow+Plugin)

它将具有将管道逻辑保存在一个位置的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T08:40:23.447

您可以为此使用[构建步骤](https://www.jenkins.io/doc/pipeline/steps/pipeline-build-step/)。假设您有一个名为`parent`and的管道`child`。在`parent`管道中，您可以定义：

```
pipeline {
    agent any
    stages {
        stage ('call-child-pipeline') {
            steps {
                build job: 'child'
            }
        }
    }
} 
```

您还可以将一些参数传递给`child`管道：

```
stage ('call-child-pipeline') {
    steps {
        build job: 'child', parameters: [string(name: 'my_param', value: "my_value")]
    }
} 
```

如果您不想等到子管道完成，请添加`wait: false`，例如

```
build job: 'child', wait: false 
```

# c - recvfrom 未在原始套接字上返回正确的数据包

> ID：12869440
> 
> 赞同：1
> 
> 时间：2012-10-13T02:31:45.100
> 
> 标签：c, sockets, raw-sockets

我必须构建一个端口扫描器实用程序。我正在使用原始套接字发送一个 SYN 数据包并检测目的地是否给出任何响应。

这个[原始套接字指南](http://www.binarytides.com/raw-sockets-c-code-on-linux/)非常有助于了解如何设置发送具有特定位的数据包；但是，我无法使用 recvfrom 接收数据包响应。

我的观察是，我收到了所有其他数据包，除了我正在寻找的数据包。

例如，tcp dump for 1 run 显示

```
22:26:52.962557 IP localhost.3000 > localhost.32000: Flags [S], seq 0:1, win 5840, length 1
22:26:52.962571 IP localhost.32000 > localhost.3000: Flags [S.], seq 262551688, ack 1, win 32792, options [mss 16396], length 0
22:26:52.962576 IP localhost.3000 > localhost.32000: Flags [R], seq 1, win 0, length 0 
```

但是，在我的应用程序中，我看不到任何具有 32000 端口的数据包。

我的接收逻辑如下（我已经修改了快速测试的代码，基本代码与上面的链接相同）。

```
//Send the packet SYN Packet
    if (sendto (s, datagram, iph->tot_len , 0, (struct sockaddr *) &sin, sizeof (sin)) < 0)
    {
      perror("sendto failed");
    }
    //Data send successfully
    else
    {
      int count = 10;
      while(count--)
      {
        char readbuff[1540] = {0};
        struct sockaddr_in receiver = sin;
        socklen_t len = sizeof(receiver);
        int bread = recvfrom(s, readbuff, sizeof(readbuff), 0, (struct sockaddr*) &receiver, &len);
        int port = ntohs(receiver.sin_port);
        printf("New Packet( Source: %s, Port: %d)\n", inet_ntoa((struct in_addr)receiver.sin_addr), port);
        if(receiver.sin_addr.s_addr == sin.sin_addr.s_addr)
        {
          if(bread < 0)
          {
            perror("bread is less than zero");
            exit(0);
          }
          else if(bread == 0 || bread < 40)
          {
            //again we expect atleast 40 bytes from another party.
            //TODO: try again if bread > 0 but < 40\. if readbuff[bread] != EOF
            //mostly malicious code or trying to get into our head
            perror("bread is zero");
            exit(0);
          }
          else
          {
            //we have a valid data.
            //TODO: Do not trust the data coming, and try to validate it.
            struct ip *iph2 = (struct ip*) readbuff;
            int size = iph2->ip_hl;

            //we only want to inspect if source ip of packet matches with original packet dest.
            if(iph2->ip_src.s_addr == sin.sin_addr.s_addr)
            {
              if(iph2->ip_p == IPPROTO_TCP)
              {
                struct tcphdr *tcph2 = (struct tcphdr *) (readbuff + size);
                 printf("TCP:source%s,port=%d,dest=%s,port=%d", inet_ntoa(iph2->ip_src), ntohs(tcph2->source), inet_ntoa(iph2->ip_dst),  ntohs(tcph2->dest));
                if(tcph2->source == sin.sin_port)
                {

                  if(tcph2->syn == 1 && tcph2->ack == 1)
                  {
                    //We got a good response. Host will send RST if port is not
                    //behind firewall. This means port is unfiltered.
                    printf("Result UNFILTERED\n");
                  }
                  else
                  {
                    printf("Result FILTERED\n");
                  }
                }
                else
                {
                  printf("\nWrong port\n");
                }
              }
              else if(iph2->ip_p == IPPROTO_ICMP)
              {
                //TODO: write logic to detect that error code is (type 3, code 1, 2, 3, 9, 10 or 13
                printf("Result FILTERED\n");
              }
            }
            else
            {
              printf("\nWrong IP\n");
            }
          }
        }
      }
    } 
```

我的应用程序输出如下

```
 New Packet( Source: 127.0.0.1, Port: 0)
TCP:source127.0.0.1,port=23552,dest=127.0.0.1,port=255
Wrong port
New Packet( Source: 127.0.0.1, Port: 0)
TCP:source127.0.0.1,port=64,dest=127.0.0.1,port=64
Wrong port
New Packet( Source: 127.0.0.1, Port: 0)
TCP:source127.0.0.1,port=64,dest=127.0.0.1,port=64
Wrong port
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.225.33, Port: 0)
New Packet( Source: 74.125.225.33, Port: 0)
New Packet( Source: 74.125.225.47, Port: 0)
New Packet( Source: 74.125.225.47, Port: 0)
New Packet( Source: 74.125.225.47, Port: 0)
New Packet( Source: 74.125.225.47, Port: 0)
New Packet( Source: 74.125.225.43, Port: 0)
New Packet( Source: 74.125.225.43, Port: 0)
New Packet( Source: 74.125.225.43, Port: 0)
New Packet( Source: 74.125.225.43, Port: 0)
New Packet( Source: 74.125.225.180, Port: 0)
New Packet( Source: 74.125.225.180, Port: 0)
New Packet( Source: 74.125.225.180, Port: 0)
New Packet( Source: 74.125.225.180, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.225.67, Port: 0)
New Packet( Source: 74.125.225.67, Port: 0)
New Packet( Source: 74.125.225.67, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 74.125.225.67, Port: 0)
New Packet( Source: 64.34.119.101, Port: 0)
New Packet( Source: 69.171.241.10, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.133.16, Port: 0)
New Packet( Source: 74.125.142.125, Port: 0)
New Packet( Source: 69.171.241.10, Port: 0) 
```

注意：如果您要测试代码，则需要添加以下包含。 `#include <arpa/inet.h>`

任何指针，关于我做错了什么？

**更新：** 我在代码中发现了错误。读取 tcp 标头时，长度计算不正确。正确计算如下。

```
struct tcphdr *tcph2 = (struct tcphdr *) (readbuff + size*4); 
```

不过，我也可以看到从 recvfrom 调用中读取的所有其他数据包。任何想法，关于如何读取具有源 ip=原始目标 ip 和源端口=原始目标端口的特定数据包。？

# c# - 正则表达式帮助需要

> ID：12869450
> 
> 赞同：1
> 
> 时间：2012-10-13T02:33:09.947
> 
> 标签：c#, .net, regex

我正在尝试`model => model.Password` 替换`@Html.DisplayNameFor(model => model.Password)`.

任何线索我用过哪个正则表达式模板？

我试过`\\(.+?\\)` 这是正确的吗？

谢谢！

```
var match = Regex.Match(view, @"@Html.DisplayNameFor(\\(.+?\\))", RegexOptions.IgnoreCase);
if (match.Success)
{

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:36:41.723

模式应该更像：

```
@"@Html\.DisplayNameFor\((.+?)\)" 
```

由于您已经在使用逐字字符串 ( `@""`)，因此您不应该包含双反斜杠。此外，`.`应该已经转义了，我调整了分组括号以匹配`model => model.Password`而不是`(model => model.Password)`.

如果您尝试替换，您可能只想[`Regex.Replace`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)直接使用而不是先使用`Match`它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:03:17.817

问题出在这句话中：

```
var match = Regex.Match(view, @"@Html.DisplayNameFor(\\(.+?\\))", 
RegexOptions.IgnoreCase); 
```

您`@`在正则表达式模式之前使用了转义所有字符。在这种情况下，不必再使用一个`"\"`. 所以，这段代码应该更像：

```
var match = Regex.Match(view, @"@Html.DisplayNameFor(\(.+?\))",
RegexOptions.IgnoreCase); 
```

或者您可以删除`@`以继续使用双斜杠：

```
var match = Regex.Match(view, "@Html.DisplayNameFor(\\(.+?\\))",
RegexOptions.IgnoreCase); 
```

# browser - 第三方插件阻止网站内容 - 如何防止？

> ID：12869453
> 
> 赞同：1
> 
> 时间：2012-10-13T02:33:58.007
> 
> 标签：browser, add-on, browser-addons

最近我有一个朋友告诉我，我网站上的导航不起作用。在他的电脑上查看问题后，我意识到是雅虎工具栏（第 3 方 Firefox 插件）以某种方式阻止了菜单。我可以看到菜单，但无法访问导航菜单上的任何内容。一旦禁用，问题就消失了。

**我的问题：**

是否有可以添加到我的网站的方法或代码来防止（尽可能）这种冲突，因为我显然无法控制第 3 方附加组件？

基本上有没有任何主动的方法来防止*任何*第三方插件与我的网站交互？（任何浏览器，不仅仅是 Firefox）

**笔记：**

菜单是标准的`<ul> <li>`CSS 样式菜单。没有 JS 或任何花哨的东西。

我使用托管 CMS，*无法*使用服务器端代码。我正在寻找仅涉及客户端代码的解决方案。但是，如果它有助于防止遇到此问题的其他人出现此问题，您可以发布使用服务器端的代码。

# mysql - Node.js 访问 WampServer MySQL 数据库

> ID：12869454
> 
> 赞同：3
> 
> 时间：2012-10-13T02:34:10.947
> 
> 标签：mysql, node.js, port, wampserver

我对 node.js 和 MySQL 真的很陌生，当我尝试同时学习这两者时......让我们说我需要一些帮助。;)

我想使用[node-mysql](https://github.com/felixge/node-mysql)模块通过 node.js 动态编辑数据库。所有基本代码都已到位。

```
var http = require('http'),
   mysql = require("mysql");

var connection = mysql.createConnection({
   user: "root",
   password: "",
  database: "ballot"
});

http.createServer(function (request, response) {

  request.on('end', function () {

      connection.query('SELECT * FROM data;', function (error, rows, fields) {

        response.writeHead(200, {
            "Content-Type": "text/plain",
            'Access-Control-Allow-Origin' : '*'
        });
        response.write(JSON.stringify(rows));
        response.end();

      });
   });

}).listen(8080); 
```

问题是，我正在监听 8080 端口，而 localhost 当然是 80 端口。我应该监听 80 端口吗？如果是这样，我该怎么做而不弄乱Wamp？以及如何访问我使用 PHPmyAdmin 创建的数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T11:57:50.853

WAMP 为您提供了许多东西，包括 MySQL 和预先配置了 phpMyAdmin 的 apache Web 服务器。

默认情况下，Apache Web 服务器侦听端口 80，MySQL 服务器侦听端口 3306。当 WAMP 运行时，这些端口将被占用。只要您没有其他进程在端口 8080 上侦听，您的节点进程将能够创建一个在端口 8080 上侦听的服务器。默认情况下，这应该没问题，您将能够通过以下方式访问节点 http 服务器`http://localhost:8080`

在端口 3306 上建立了与 MySQL 数据库的连接。您只需像往常一样通过 phpMyAdmin 设置数据库。默认情况下，这将在`http://localhost/phpMyAdmin`apache 服务器上的 80 端口上运行。

只是为了澄清，因为您的术语似乎有些混乱。主机名中的 localhost。这是您希望与之交谈的机器的位置。端口号是完全独立的，“本地主机当然是端口 80”没有任何意义。您可以为 localhost 指定任何有效的端口号。正如我已经提到的，侦听端口 8080 意味着您可以通过以下方式访问节点服务器`http://localhost:8080`

# python - 从 B 中删除 A 中的元素

> ID：12869459
> 
> 赞同：0
> 
> 时间：2012-10-13T02:34:57.947
> 
> 标签：python, python-2.7

我有两个列表，比方说：

```
a = [1,2,3]
b = [1,2,3,1,2,3] 
```

我想从列表 b 中删除 1、2 和 3，但不是所有出现的情况。结果列表应具有：

```
b = [1,2,3] 
```

我目前有：

```
for element in a:
    try:
        b.remove(element)
    except ValueError:
        pass 
```

但是，当 a 和 b 变得非常大时，它的性能很差。有没有更有效的方法来获得相同的结果？

**编辑**

为了澄清“并非所有事件”，我的意思是我不希望从 b 中删除两个“1”，因为 a 中只有一个“1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:54:11.803

我会这样做：

```
set_a = set(a)
new_b = []
for x in b:
  if x in set_a:
    set_a.remove(x)
  else:
    new_b.append(x) 
```

与其他设置解决方案不同，这可以保持顺序`b`（如果您关心的话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T02:45:07.413

我会做这样的事情：

```
from collections import defaultdict

a = [1, 2, 3]
b = [1, 2, 3, 1, 2, 3]

# Build up the count of occurrences in b
d = defaultdict(int)
for bb in b:
    d[bb] += 1

# Remove one for each occurrence in a
for aa in a:
    d[aa] -= 1

# Create a list for all elements that still have a count of one or more
result = []
for k, v in d.iteritems():
    if v > 0:
        result += [k] * v 
```

或者，如果您愿意稍微模糊一点：

```
from operator import iadd

result = reduce(iadd, [[k] * v for k, v in d.iteritems() if v > 0], []) 
```

defaultdict 生成每个键的出现次数。一旦它从 建立起来`b`，它会随着每次出现的键而递减`a`。然后我们打印出仍然剩余的元素，允许它们多次出现。

defaultdict 适用于 python 2.6 及更高版本。如果您使用的是更高版本的 python（我相信 2.7 及更高版本），您可以查看[`collections.Counter`](http://docs.python.org/library/collections.html#collections.Counter).

* * *

稍后：您还可以对此进行概括并创建反式默认字典的减法：

```
from collections import defaultdict
from operator import iadd

a = [1, 2, 3, 4, 5, 6]
b = [1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]

def build_dd(lst):
    d = defaultdict(int)
    for item in lst:
        d[item] += 1
    return d

def subtract_dd(left, right):
    return {k: left[k] - v for k, v in right.iteritems()}

db = build_dd(b)
da = build_dd(a)
result = reduce(iadd,
                [[k] * v for k, v in subtract_dd(db, da).iteritems() if v > 0],
                [])

print result 
```

但是`reduce`现在的表达方式很模糊。

* * *

稍后：在 python 2.7 及更高版本中，使用`collections.Counter`，它看起来像这样：

```
from collections import Counter

base = [1, 2, 3]
missing = [4, 5, 6]
extra = [7, 8, 9]
a = base + missing
b = base * 4 + extra

result = Counter(b) - Counter(a)
print result
assert result == dict([(k, 3) for k in base] + [(k, 1) for k in extra]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T02:51:02.973

通常，您希望始终避免使用 list.remove() （您是对的，这会严重损害性能）。此外，在字典或集合中查找元素比在列表中查找元素要快得多（O(1)）；所以从你的list1中创建一个集合（如果顺序无关紧要，从你的list2中）。

像这样的东西：

```
sa = set(a)
new_b = [x for x in b if not x in sa]
# here you created a 3d list but I bet it's OK. 
```

但是，我不知道您选择要删除的元素的实际算法是什么。请详细说明“但不是所有情况”。

# jenkins - 在 Jenkins 中声明一个特定的失败测试

> ID：12869460
> 
> 赞同：3
> 
> 时间：2012-10-13T02:35:12.160
> 
> 标签：jenkins, phpunit, jenkins-plugins

我正在工作的一个团队将 Jenkins + PHPUnit 用于 CI。我正在寻找一种很好的方法来表明某个特定的人正在处理可能会导致构建失败的特定测试。[Claim 插件](https://wiki.jenkins-ci.org/display/JENKINS/Claim+plugin)似乎非常适合声明整个失败的构建，但我正在寻找某种方法来使其更细化。为每个测试声明一个“粘性”特别有用，因此如果下一次构建相同的测试失败，则保留声明者。索赔可以做到这一点（我认为可以，但如果是这样，我一定会遗漏一些东西）？别的东西可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:51:22.363

如 MrsTang 所示，这是由 Claim 插件提供的。但是，您需要为每个作业激活此功能。

在 Job 配置中，在 Post-Build Action 下，`Publish Test Results`您会找到一个复选框`Allow claiming of failed tests`。这将允许您声明失败的测试。我们发现该功能运行良好。

# php - bit.ly 动态链接 php

> ID：12869468
> 
> 赞同：0
> 
> 时间：2012-10-13T02:36:48.867
> 
> 标签：php, variables, dynamic, hyperlink, bit.ly

我正在尝试在我的网站中使用 bit.ly。当我这样做时：

```
$short_url = json_decode(file_get_contents("http://api.bit.ly/v3/shorten?login=myLogin&apiKey=myApiKey&longUrl=".urlencode("http://example.com")."&format=json"))->data->url; 
```

它工作正常。

但是，当我尝试将链接放在变量中时。

```
$link = 'http://example.com';
$short_url = json_decode(file_get_contents("http://api.bit.ly/v3/shorten?login=myLogin&apiKey=myApiKey&longUrl=".urlencode(**$link**)."&format=json"))->data->url; 
```

这没用。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:48:17.680

### 检查输出是什么`file_get_contents()`。你可以这样做：

```
var_dump(file_get_contents("http://api.bit.ly/v3/shorten?login=myLogin&apiKey=myApiKey&longUrl=".urlencode($link)."&format=json")); 
```

如果那里有良好的输出，请检查然后将其传递给`json_encode()`.

# android - Android - 定制的新来电屏幕

> ID：12869471
> 
> 赞同：7
> 
> 时间：2012-10-13T02:37:27.647
> 
> 标签：android

我正在尝试在android中制作一个新的来电屏幕，

当我接到来电时，我的应用程序启动 - 但立即崩溃，并且默认来电屏幕即将出现。

我究竟做错了什么？

我的代码：

**AndroidManifest.xml：**

```
<?xml version="1.0" encoding="utf-8" ?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.example.myfirstapp"
      android:versionCode="7"
      android:versionName="7">
    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="10"></uses-sdk>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-permission android:name="android.permission.MODIFY_PHONE_STATE"/>
    <uses-permission android:name="android.permission.CALL_PHONE" />

    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <receiver android:name=".MyPhoneBroadcastReceiver" android:enabled="true">
            <intent-filter android:priority="99999">
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver>
        <activity
            android:name=".Call" >
        </activity>
    </application>
</manifest> 
```

**MyPhoneBroadcastReceiver.java：**

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;

public class MyPhoneBroadcastReceiver extends Activity{

    public void onReceive(final Context context, Intent intent) {
            Intent main_intent = new Intent(this, Call.class);
            context.startActivity(main_intent);
    }

} 
```

**调用.java：**

```
package com.example.myfirstapp;

import android.app.Activity;
import android.os.Bundle;

public class Call extends Activity{

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    }

} 
```

日志是：

```
 10-14 20:59:51.056: E/AndroidRuntime(1826): FATAL EXCEPTION: main
 10-14 20:59:51.056: E/AndroidRuntime(1826):
 java.lang.RuntimeException: Unable to instantiate receiver
 com.example.myfirstapp.MyPhoneBroadcastReceiver:
 java.lang.ClassCastException:
 com.example.myfirstapp.MyPhoneBroadcastReceiver cannot be cast to
 android.content.BroadcastReceiver 10-14 20:59:51.056:
 E/AndroidRuntime(1826): at
 android.app.ActivityThread.handleReceiver(ActivityThread.java:2210)
 10-14 20:59:51.056: E/AndroidRuntime(1826): at
 android.app.ActivityThread.access$1500(ActivityThread.java:130) 10-14
 20:59:51.056: E/AndroidRuntime(1826): at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1271)
 10-14 20:59:51.056: E/AndroidRuntime(1826): at
 android.os.Handler.dispatchMessage(Handler.java:99) 10-14
 20:59:51.056: E/AndroidRuntime(1826): at
 android.os.Looper.loop(Looper.java:137) 10-14 20:59:51.056:
 E/AndroidRuntime(1826): at
 android.app.ActivityThread.main(ActivityThread.java:4745) 10-14
 20:59:51.056: E/AndroidRuntime(1826): at
 java.lang.reflect.Method.invokeNative(Native Method) 10-14
 20:59:51.056: E/AndroidRuntime(1826): at
 java.lang.reflect.Method.invoke(Method.java:511) 10-14 20:59:51.056:
 E/AndroidRuntime(1826): at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
 10-14 20:59:51.056: E/AndroidRuntime(1826): at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 10-14
 20:59:51.056: E/AndroidRuntime(1826): at
 dalvik.system.NativeStart.main(Native Method) 10-14 20:59:51.056:
 E/AndroidRuntime(1826): Caused by: java.lang.ClassCastException:
 com.example.myfirstapp.MyPhoneBroadcastReceiver cannot be cast to
 android.content.BroadcastReceiver 10-14 20:59:51.056:
 E/AndroidRuntime(1826): at
 android.app.ActivityThread.handleReceiver(ActivityThread.java:2205)
 10-14 20:59:51.056: E/AndroidRuntime(1826): ... 10 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T21:31:42.317

您得到 a 是`ClassCastException`因为您的清单定义`MyPhoneBroadcastReceiver`为接收者，而不是活动。您不需要一个活动来创建意图，因为它需要一个`Context`，并且一个提供了`onReceive()`。让它`BroadcastReceiver`像这样扩展和改变意图：

```
public class MyPhoneBroadcastReceiver extends BroadcastReceiver{

    public void onReceive(final Context context, Intent intent) {
            Intent main_intent = new Intent(context, CallActivity.class);
            context.startActivity(main_intent);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T12:55:14.833

好的，为了让我的新页面在前面，我需要让它休眠一段时间......所以新代码将是：

```
public class MyPhoneBroadcastReceiver extends BroadcastReceiver{

    public void onReceive(final Context context, Intent intent) {

        Thread pageTimer = new Thread(){
            public void run(){
                try{
                    sleep(1000);
                } catch (InterruptedException e){
                    e.printStackTrace();
                } finally {
                    Intent i = new Intent();
                    i.setClass(context, Call.class);
                    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    context.startActivity(i);
                }
            }
        };
        pageTimer.start();
    }
} 
```

**但是**——原来的来电程序还在后台运行……

有什么办法可以替换它而不是在它上面打开新的应用程序？

谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T11:43:18.307

将此添加到您的清单中：

```
<activity> 
    <intent-filter>
        <action android:name="android.intent.action.ANSWER" />
        <action android:name="android.intent.action.PHONE_STATE" />
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>  
</activity> 
```

# magento - 架构丰富的片段也应该用于产品列表吗？

> ID：12869478
> 
> 赞同：12
> 
> 时间：2012-10-13T02:38:44.797
> 
> 标签：magento, seo, schema.org, rich-snippets

我正在为产品页面的 Magento 商店实现架构丰富的片段，并且想知道为产品列表页面也这样做是否是个好主意。

是否进行了搜索，大多数问题/文章都只关注产品页面，所以我想知道它是否可能对 SEO 产生反作用。

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T07:32:14.570

就 Google 而言，产品列表中不支持产品丰富网页摘要：

> 对特定产品使用标记，而不是产品类别或产品列表。

查看[Google 丰富网页摘要 - 产品](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=146750#usage)

搜索引擎期刊提供了一些很好的建议，可以更具体地回答您的问题：

> 根据网站的设置方式，您可以选择标记类别页面。如果您在类别页面上列出产品信息，您将需要省略任何微数据标记，因为它可能会导致与产品页面发生冲突。毕竟，转换的目标通常是从产品页面开始的，因此您希望产品页面成为登录页面而不是类别页面。对于列出类别名称的简单类别页面，请将每个类别名称放在 h1 标记中并添加以下微数据标记。

请参阅类别页面标记标题下的[电子商务微数据最佳实践。](http://www.searchenginejournal.com/e-commerce-microdata-best-practices/35228/)

他们的建议，看起来不错，是在您的产品列表模板中添加标记，有点像这样：

```
<ul id="category_list">
    <li itemscope itemtype="http://schema.org/Enumeration">
        <img src="http://url.to.image" itemprop="image" />
        <h1 itemprop="name">Category Name</h1>
    </li>
</ul> 
```

# java - 与 IDE 自动编译和运行相比，为什么在手动编译和运行代码时会得到不同的输出

> ID：12869479
> 
> 赞同：1
> 
> 时间：2012-10-13T02:39:10.350
> 
> 标签：java, encoding, utf-8, notepad++

以下程序将乌尔都语字符串与常规英语字符串分开。我写了这个程序

```
 try {
     File f = new File("C:/Users/user/Desktop/tes.txt");
     FileReader reader = new FileReader(f);
     BufferedReader br = new BufferedReader(reader);
     String text = "";
     String s;
     while( ( s = br.readLine() ) != null) {
       text += s;
     }

     String splits[] = text.split("سٹیمپ ختم ہو جاتی ہے");

     for(int i=0;i<splits.length;i++) {
        System.out.println(splits[i]);
     }  
} catch(Exception exc) {
   exc.printStackTrace();
  } 
```

在*记事本++*中编译它，并运行它来得到这个输出：

```
∩╗┐╪│┘╣█î┘à┘╛ ╪«╪¬┘à █?┘ê ╪¼╪º╪¬█î █?█Æ

suhail

╪│┘╣█î┘à┘╛ ╪«╪¬┘à █?┘ê ╪¼╪º╪¬█î █?█Æ

gupta

╪│┘╣█î┘à┘╛ ╪«╪¬┘à █?┘ê ╪¼╪º╪¬█î █?█Æ

cse

╪│┘╣█î┘à┘╛ ╪«╪¬┘à █?┘ê ╪¼╪º╪¬█î █?█Æ

ghazal

╪│┘╣█î┘à┘╛ ╪«╪¬┘à █?┘ê ╪¼╪º╪¬█î █?█Æ 
```

当文件`tes.txt`看起来像这样时：

![在此处输入图像描述](../Images/72ee59356c7b3f0b484900716cb4a279.png)

但是当我从 netbeans IDE 运行相同的程序时，我得到了预期的输出：

```
suhail
gupta
cse
ghazal 
```

当我在notepad ++中编写后运行相同的程序然后使用命令编译它有什么区别：

```
javac -encoding UTF-8 checker.java
java checker 
```

并在netbeans IDE中复制相同的程序并按下运行按钮？在第一种情况下，字符串不会从 regex 中拆分出来`urdu string`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:25:00.353

和`FileReader`类`FileWriter`隐式使用系统的默认字符编码。

尝试阅读`InputStreamReader`

```
InputStreamReader in = new InputStreamReader(new FileInputStream(f), "UTF-8");
BufferedReader br = new BufferedReader(in);
    while(br.ready())
    {
        text = text+br.readLine();
    } 
```

**编辑：**

1）更改提示的编码：`chcp 65001`

2) 在构造函数中指定 Charset`InputStreamReader`

```
 import java.io.*;

public class UnicodeTestFile{

public static void main(String args[]) throws Exception{

try {
     File f = new File("C:/Users/user/Desktop/tes.txt");
     InputStreamReader ir = new InputStreamReader(new FileInputStream(f),"UTF-8");
     BufferedReader br = new BufferedReader(ir);
     String text = "";
     String s;
     while( ( s = br.readLine() ) != null) {
       text += s;
     }

     String splits[] = text.split("سٹیمپ ختم ہو جاتی ہے");

     for(int i=0;i<splits.length;i++) {
        System.out.println(splits[i]);
     }  
} catch(Exception exc) {
   exc.printStackTrace();
  }}
} 
```

3）通过指定编码编译它

```
javac -encoding UTF-8 Checker.java 
```

# matlab - Matlab - 根据条件选择特定行

> ID：12869480
> 
> 赞同：5
> 
> 时间：2012-10-13T02:39:22.023
> 
> 标签：matlab, matrix, indexing

```
points = [  
    -9.9043877608991468201413092380493, 426.34796945271797204125533010993, Maximum  
    -2.9714737944057521874892206269196, 422.13223302035451265143272598599, Minimum
    9.3758615553048990076305298649689, 441.87005169359418197397861057075, Maximum
] 
```

我想循环并创建一个新矩阵，其中只有第三列与“最大值”匹配的值。

尝试时：

```
idx = ( points(:,3)=='Maximum' ) 
```

我得到：

```
Maximum == Maximum
Minimum == Maximum
Maximum == Maximum 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T03:17:41.183

除非最大值是数字，否则所呈现的矩阵点不是有效的 matlab 矩阵。如果是这样的话：

```
 idx=find( points(:,3)== Maximum  ) 
```

会给你正确的索引。

**编辑**

获得一个具有“最大值”值的新矩阵

```
 new_matrix=points(idx,1:end-1) 
```

# android - 如何停止媒体播放器

> ID：12869483
> 
> 赞同：0
> 
> 时间：2012-10-13T02:41:03.800
> 
> 标签：android

我有个问题。即使活动停止，我的媒体播放器也不会停止。所以我很困惑为什么媒体播放器不会停止。媒体播放器立即播放，直到 mp3 播放完毕。这是我的代码

```
public class Isi_TakbiratulIhram extends Activity{
MediaPlayer mp;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.isitakbiratulihram);

    ImageButton iftitah1=(ImageButton) findViewById (R.id.takbiratulihram1);
    iftitah1.setOnClickListener(new OnClickListener(){
         @Override
        public void onClick(View v){
            go();
         }
        public void go(){

            if(mp != null ){
                mp.stop();
                try {
                    mp.prepare();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                mp.seekTo(0);

                mp = null;

            }
            else {
                mp=MediaPlayer.create(Isi_TakbiratulIhram.this, R.raw.iftitah1);

            mp.start();

            }

 }}); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:49:12.757

您可以覆盖`onPause()`或`onStop()`停止它：

```
@Override protected void onPause()
{
    if(mp != null ){
        mp.stop();
        // mp.release(); ??
    }
    super.onPause();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T02:51:13.037

用于停止媒体播放器的覆盖 Activity`onPause()`方法：

```
@Override
public void onPause(){
    super.onPause();
    if (mp != null) {
        mp.stop();
        mp.release();
        mp = null;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:51:59.933

当用户停止 Activity 时，Activity 的状态可以进入 onStop() 状态，因此需要停止任何正在进行的任务，例如在这里播放的音乐。所以在 android 编程中，需要处理所有状态，例如 onRestart()、onResume()、 onStop()、onPause()、onDestroy() 以确保程序正常运行。

要处理活动的停止和重新启动，请访问：http: [//developer.android.com/training/basics/activity-lifecycle/stopping.html](http://developer.android.com/training/basics/activity-lifecycle/stopping.html)

# php - 如何使用为自身指定命名空间的节点生成 xml？

> ID：12869487
> 
> 赞同：0
> 
> 时间：2012-10-13T02:41:32.040
> 
> 标签：php, xml, dom, domdocument

这是我想要的结果：

```
<?xml version="1.0" encoding="utf-8"?>
<types>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
</types> 
```

但使用简单的解决方案：

```
$document = new DOMDocument('1.0', 'utf-8');

$schema = $document->createElementNS('http://www.w3.org/2001/XMLSchema', 'xs:schema');

$types = $document->createElement('types');
$types->appendChild($schema);

$document->appendChild($types);

echo $document->saveXML(); 
```

我只得到这个：

```
<?xml version="1.0" encoding="utf-8"?>
<types xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"/>
</types> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T03:04:27.943

问题在于添加孩子的顺序。尝试这个：

```
$document = new DOMDocument('1.0', 'utf-8');

$types = $document->createElement('types');
$schema = $document->createElementNS('http://www.w3.org/2001/XMLSchema', 'xs:schema');

$document->appendChild($types);
$types->appendChild($schema);

echo $document->saveXML(); 
```

# javascript - Javascript：如何暂停/停止当前播放的音频？

> ID：12869488
> 
> 赞同：1
> 
> 时间：2012-10-13T02:41:44.953
> 
> 标签：javascript, jquery, audio, mp3, html5-audio

我有以下代码可以在我的网站上播放音频。问题是播放音频不会停止或暂停播放新的。所有文件都像疯了一样一起播放。

```
$().ready(function () {
    PlayMp3('sounds/file1.mp3');
    PlayMp3('sounds/file2.mp3');
    PlayMp3('sounds/file3.mp3');
    PlayMp3('sounds/file4.mp3');
});
    function PlayMp3(file) {
            var isiPad = navigator.userAgent.match(/iPad/i) != null;
            var isiPhone = navigator.userAgent.match(/iPhone/i) != null;
            var isiPod = navigator.userAgent.match(/iPod/i) != null;
            pauseAllAudio();

            if (navigator.userAgent.indexOf("Firefox") != -1) {
                file = file.replace("mp3", "ogg");            
                $('#content').append('<audio src="' + file + '" controls preload="auto" autobuffer autoplay="autoplay" style="display:none"></audio>');
            }
            else if (isiPad || isiPhone || isiPod) {           
                var snd = new Audio(file);
                snd.load();
                snd.play();            
            }
            else {
                $('#content').append('<embed height="0" width="0" src="' + file + '">');
            }

        }

        function pauseAllAudio() {
            $('video, audio').each(function () {
                $(this)[0].pause();
            });
            var allAudioEls = $('audio');
            allAudioEls.each(function () {
                var a = $(this).get(0);
                a.pause();
            });

            $('audio').remove();
            if (snd != undefined) {
                snd.pause();
            }
        } 
```

这不是一个重复的问题。我在这里尝试了类似问题的所有解决方案，但没有一个解决方案适合我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:46:19.553

小变化。

```
$('video, audio').each(function () {
    $(this).get(0).stop();
}); 
```

说它是否有效。

### 更新#1

检查以下是否有效：

1.  `$(this)[0].pause();`
2.  `$(this).get(0).pause();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T10:55:58.550

感谢普拉文库马尔。没有他，我不可能找到删除“嵌入”的问题。添加`$('embed').remove();`到`function pauseAllAudio()`. 它适用于除 Firefox 之外的所有浏览器。那个 Firefox 不喜欢 mp3 或`<embed>`标签。我必须做更多的研究才能使其仅适用于该浏览器。

jPlayer 看起来很棒，它解决了我的问题。解决方法如下。

```
 function PlayMp3(file) {
    $('embed').remove();
    if (navigator.userAgent.indexOf("Firefox") != -1) {
            file = file.replace("mp3", "ogg");
            $('#jquery_jplayer').jPlayer("pauseOthers");
            $('#jquery_jplayer').jPlayer("setMedia", { oga: file });
            $('#jquery_jplayer').jPlayer("play");
    }
    else {
        $('#content').append('<embed height="0" width="0" src="' + file + '">');
} 
```

我不得不放弃 HTML 5`<audio>`标签。:(

# windows-8 - 新的 windows 8 / windows phone 8 api 中是否有任何方法可以动态调整磁贴的大小？

> ID：12869489
> 
> 赞同：0
> 
> 时间：2012-10-13T02:41:53.410
> 
> 标签：windows-8, windows-phone-8

新的 windows 8 / windows phone 8 api 中是否有任何方法可以动态调整磁贴的大小？

假设我们有一个应用程序在它的磁贴上显示消息，当我们没有重要消息时，我们的磁贴可以很小，就像一个图标

假设我们有一个应用程序在其磁贴上显示消息，当我们有一些重要消息时，调整磁贴大小以适应该重要消息。

你有想法，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T02:45:36.843

在 Windows 8 中，开发人员无法控制磁贴的大小。这完全取决于用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T11:25:37.497

Windows Phone 8 的情况相同，似乎没有任何方法可以以编程方式更改磁贴的大小。在这种情况下，我建议将特殊警报图标或徽章显示为平铺图像的一部分。您还可以显示 toast 消息以通知用户。

# algorithm - 枚举一种语言的所有单词

> ID：12869491
> 
> 赞同：3
> 
> 时间：2012-10-13T02:42:44.410
> 
> 标签：algorithm

我有一种语言，由两个“1”和三个“0”组成的单词组成。如何有效地枚举该语言所有单词的有限集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:48:06.413

简单，写数字11100，计算这个值的排列次数=n！= 5!，除以 3 个 1 的排列数 = 3! 和 0 的排列数 = 2！=> 5！/ (2! * 3!) = 120 / (6 * 2) = 10

```
11100
11010
11001
10110
10101
10011
01110
01101
01011
00111 
```

现在，如果您需要实际值，对于任意语言，您别无选择，只能使用回溯算法。

对于这种特殊情况，您可以轻松构建一个生成这种语言的简单算法：这是一个使用 python 的示例

```
def GenerateLanguage(nZeros, nOnes):
    if nZeros + nOnes == 0:
         return ['']
    res = [] # Resulting list, initialize with 1 empty string
    if nOnes > 0: # If we have 1's left, build all the strings that starts with a 1
         for l in GenerateLanguage(nZeros, nOnes - 1):
              res.append('1' + l)
    if nZeros > 0: # If we have 0's left, build all the strings that starts with a 0
         for l in GenerateLanguage(nZeros - 1, nOnes):
              res.append('0' + l)
    return res 
```

# c - 正确播种 rand_r(int *val) 方法

> ID：12869496
> 
> 赞同：6
> 
> 时间：2012-10-13T02:44:08.653
> 
> 标签：c, pointers

所以我有多个线程将使用 rand_r 函数。这个函数的签名是：

```
int rand_r(int *val); 
```

我试图利用时间来播种这个功能，但我遇到了各种各样的麻烦。谁能向我解释我将如何使用时间调用 rand_r 或其他一些动态播种 rand_r 的简单方法。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-13T02:53:09.277

对于可重入版本`rand_r`，种子只是状态的初始值。每个线程需要一个种子。要么创建种子数组，要么将种子变量设为线程本地：

```
_Thread_local unsigned int seed = time(NULL);

int do_stuff()
{
    for ( ; ; )
    {
        int n = rand_r(&seed);
        // use n
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:18:07.630

在 UNIX/POSIX 系统上，您可以打开`/dev/urandom`初始随机数，读取足够的字节以获取每个线程的种子。Microsoft Windows 有更复杂的方法来获取这些数字。查阅**CryptGenRandom**了解详情。由于这些是基于系统熵的，它们不适用于大量随机数。

# c# - VisualStudio 项目中的 obj/debug 是临时位置吗？

> ID：12869497
> 
> 赞同：2
> 
> 时间：2012-10-13T02:44:22.130
> 
> 标签：c#, windows, visual-studio

简而言之，我有一个单独的 WCF VisualStudio 项目，用于编译 CLient 和 Contract dll。一旦我使用 MS-BUILD（命令行）构建项目，我就有一个构建后的 nant 任务将客户端和合同 dll 复制到另一个位置。

现在我可以更轻松地从 obj/Debug 文件夹中选择这些 dll（因为它们只有 CLient 和 Contract dll 而没有它们的依赖项）。

但是我听说 obj/Debug 文件夹是临时的.. 我们需要依赖 bin/Debug 来获取 dll。

是否有必要从 bin/debug 而不是 obj/Debug 中获取它，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T13:15:14.240

obj\Debug 的角色是 MSBuild 的未记录实现细节。它的存在是因为 MSBuild 喜欢根据项目设置有条件地复制文件。确切的规则很复杂，说得委婉些，你只能通过研究框架目录中的 .targets 文件来获得洞察力。它们本身高度依赖于您所针对的 .NET 版本。

如果你真的想知道是什么让它滴答作响，那么*从*obj\Debug 复制文件，看看是什么击中了粉丝。请注意，这可能会在您创建项目很久之后发生，因此当构建失败或生成错误文件时，将永远存在 FUD。如果这听起来不是很有成效，那就不是，那么请避免破坏保修并从项目的输出目录中复制。默认情况下，bin\Debug 和 bin\Release。如果*这*产生了问题，那么至少你可以在 SO 上问一个关于它的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T05:41:05.797

是的。您应该从 中获取二进制文件，或者更具体地说，是从 MSBuild 上下文中`bin/Debug`获取变量，`OutputPath`

[http://msdn.microsoft.com/en-us/library/bb629394.aspx](http://msdn.microsoft.com/en-us/library/bb629394.aspx)

# tomcat - tomcat 中的 localhost.log 和 catalina.log 有什么区别？

> ID：12869498
> 
> 赞同：22
> 
> 时间：2012-10-13T02:44:55.910
> 
> 标签：tomcat

你能告诉我为什么在tomcat服务器上创建了两个日志文件吗？

这两个日志文件是 localhost.log 和 catalina.log。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T02:47:15.927

`catalina.log`是 Tomcat 引擎写入与 Tomcat 本身有关的日志消息的地方。

每个虚拟主机都有一个日志。您只配置了一个，称为`localhost`该主机的日志条目。

# jquery - 在 Jquery .html 替换新 div 上的整个 div 选择器后不起作用

> ID：12869500
> 
> 赞同：2
> 
> 时间：2012-10-13T02:45:14.920
> 
> 标签：jquery, jquery-selectors

搜索和搜索..找不到参考..但这一定很明显。

2 选择列表

如果结果如果第一个是澳大利亚，则保留第二个列表

如果不是澳大利亚，则用输入框替换第二个列表。

如果您选择澳大利亚以外的地方，效果很好。但是，如果您再次选择澳大利亚，则不会发生任何事情。

一些调试警报以查看是否正常工作，并且在最后警报中显示我正在寻找或替换的 div 的值。

一些帮助将不胜感激。

提前致谢

PS 对格式感到抱歉 - 将 html 代码放入帖子中很费时间

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html xmlns="http://www.w3.org/1999/xhtml">
            <head>
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Untitled Document</title>
            </head>

            <body>

            <h4>Shipping:</h4>
            <form id="_shipping" class = "shipping-form" method="post" action="payments">

             <Select name ='country' id='country'> 
             <option value='Australia'>Australia </option>
             <option value='USA'>USA </option>
             <option value='Canada'>Canada </option>
             </Select>
             <div id='states' class='states'>
             <select name='state' id='state' class = 'state'>
             <option value='NSW'>NSW </option>
             <option value='ACT'>ACT </option>
             <option value='WA'>WA </option>
             </select>
             </div>

             <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.min.js'> </script>
             <script type="text/javascript">
             $(document).ready(function() {
                 var bob = $('div#states').html();
                 $('#country').change(function() {
                     var brm = $('#country').val();

                     alert(bob);
                     if(brm === "Australia") {
                         alert('if '+brm);
                         alert('wtf: \r\n' +$('#states').html);

                        $('div#states').empty().html(bob);      //html(bob);

                     } else
                     alert('else '+brm);

                        $('div#states').html("Enter State: <input name = 'state' id = 'state'>");

                 });

                 });

              </script>

            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:54:23.770

您的问题是，一旦将 html 设置为文本输入，您从一开始就有的选择列表就消失了。您可以将其保存以备后用，从 Javascript 创建选择，或者从不实际删除它。

这是一个“通过 Javascript 创建”的解决方案：

```
$("#country").change(function() {
    var brm = $(this).val();
    var output = ''; 
    if(brm === "Australia") {
        // Create "states" array
        var states = ["NSW", "ACT", "WA"];
        // Start select tag
        output = '<select name="state" id="state">';
        // Loop through all states and add the options
        for (var i = 0 ; i < states.length ; i++)
            output += '<option value="' + states[i] + '">' + states[i] + '</option>';
        // Close select tag
        output += '</select>';
    } else {
        // Create text input
        output = 'Enter State: <input name="state" id="state">';
    }
    // Set the output
    $('div#states').html(output);
}).trigger("change"); // Trigger the event, so that it runs on page load​​​ 
```

JsFiddle：http: [//jsfiddle.net/aebWm/](http://jsfiddle.net/aebWm/)

或者，如果您想保存选择然后重置它：

```
var originalStates =  $('div#states').html();

$("#country").change(function() {
    if($(this).val() === "Australia") {
        $('div#states').html(originalStates)
    } else {
        $('div#states').html('Enter State: <input name="state" id="state">');
    }
});​ 
```

# jquery - JQUERY - MouseEnter/焦点/悬停/模糊

> ID：12869504
> 
> 赞同：1
> 
> 时间：2012-10-13T02:46:20.673
> 
> 标签：jquery, html, css

下面是用于显示和隐藏页脚横幅的代码。除了鼠标悬停外，一切正常。

MouseOver 确实可以工作（并且当触发它时，它会向该区域显示一个突出显示）但是用户在该区域中单击，突出显示会消失，但是当用户退出该区域时，突出显示会闪烁，因为它在单击退出后再次触发。

因此，在同一区域单击后，mouseenter/mouseleave 代码似乎被重置。

即使在单击之后，如何防止再次触发此事件？谢谢你。

```
// Hide the Footer
$(document).on('click','div#fixedPageFooterShown', function() {hideFooterBanner();});

// Highlight Footer MouseOver
$(document).on('mouseenter','div.fixedPageFooterDisplay', function() {
        $('img.bannerBottomMouseOver').show();
    }).on('mouseleave','div.fixedPageFooterDisplay', function () {
        $('img.bannerBottomMouseOver').hide();
});

// Hide Footer Banner Function
function hideFooterBanner() {
    $('div#fixedPageFooter').fadeOut('fast', function () {
        $('div#fixedPageFooterClosed').fadeIn('fast');
        $('img.bannerBottomMouseOver').fadeOut('fast');
        $('img#footerArrowMin').hide();
        $('img#footerArrowMax').show();
    });
}

// Show Footer Banner Function
$(document).on('click','div#fixedPageFooterClosed', function() {
    $(this).fadeOut('fast', function () {
        $('div#fixedPageFooter').fadeIn('fast');
        $('img.bannerBottomMouseOver').fadeOut('fast');
        $('img#footerArrowMax').hide();
        $('img#footerArrowMin').show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T02:51:57.140

我不确定什么不适用，如果您显示 html 布局可以提供更多帮助

我认为您可以使用它 `event.preventdefault()`来防止默认事件：

```
// Hide the Footer

// Highlight Footer MouseOver
//i'll change here to be more jquery'ish - not need on() i think as it replacemement for live()

$('div.fixedPageFooterDisplay').bind('mouseenter', function() {
    $('img.bannerBottomMouseOver').show();
}).bind('mouseleave', function() {
    $('img.bannerBottomMouseOver').hide();
});

// Hide Footer Banner Function
var hideFooterBanner = function(event) {
    //prevent default event handler
    if (event !== undefined) {
        event.preventdefault();
    }

    $('div#fixedPageFooter').fadeOut('fast', function() {
        $('div#fixedPageFooterClosed').fadeIn('fast');
        $('img.bannerBottomMouseOver').fadeOut('fast');
        $('img#footerArrowMin').hide();
        $('img#footerArrowMax').show();
    });
};

//i'll change here to be more jquery'ish
$('div#fixedPageFooterShown').click(hideFooterBanner);

// Show Footer Banner Function
//i'll change here to be more jquery'ish
$('div#fixedPageFooterClosed').click(function(event) {

    //prevent default event handler     
    event.preventdefault();

    $(this).fadeOut('fast', function() {
        $('div#fixedPageFooter').fadeIn('fast');
        $('img.bannerBottomMouseOver').fadeOut('fast');
        $('img#footerArrowMax').hide();
        $('img#footerArrowMin').show();
    });
});​ 
```

# javascript - 如何为 Passport 策略 callbackURL 设置当前主机？

> ID：12869514
> 
> 赞同：5
> 
> 时间：2012-10-13T02:49:56.410
> 
> 标签：javascript, node.js, express, passport.js

我正在为 Passport with Express 使用 Passport-Linkedin 策略，以允许用户使用他们的 LinkedIn 个人资料登录。

我有以下代码：

```
passport.use(new LinkedInStrategy({
    consumerKey: config.linkedin.LINKEDIN_API_KEY,
    consumerSecret: config.linkedin.LINKEDIN_SECRET_KEY,
    callbackURL: "http://localhost:3000/auth/linkedin/callback"
  },
  function(token, tokenSecret, profile, done) {
    // asynchronous verification, for effect...
    process.nextTick(function () {

      // To keep the example simple, the user's LinkedIn profile is returned to
      // represent the logged-in user.  In a typical application, you would want
      // to associate the LinkedIn account with a user record in your database,
      // and return that user instead.
      return done(null, profile);
    });
  }
)); 
```

在第 4 行，我必须手动设置完整的回调 URL。我有一个用于生产的字符串和一个用于开发的字符串，但是我的 URL 不断变化，端口也是如此（我使用 2 台机器进行开发）。

如何`http://localhost:3000`自动设置 URL ( ) 的第一部分？是否有`express`或`app`允许我这样做的属性？我需要求助于一个`app.use(function(req, res){});`吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-04-14T10:19:44.753

老问题，可能只对较新版本有效。但是，如果有人像我一样遇到这种情况，解决方案就是不在以下文件中指定主机名`callbackURL`：

```
passport.use(new LinkedInStrategy({
    consumerKey: config.linkedin.LINKEDIN_API_KEY,
    consumerSecret: config.linkedin.LINKEDIN_SECRET_KEY,
    callbackURL: "/auth/linkedin/callback"
  }, 
```

为了让它适用于 heroku https 重定向，我们必须`x-forwarded-protocol`通过信任代理来告诉系统信任标头：

```
passport.use(new LinkedInStrategy({
    consumerKey: config.linkedin.LINKEDIN_API_KEY,
    consumerSecret: config.linkedin.LINKEDIN_SECRET_KEY,
    callbackURL: "/auth/linkedin/callback",
    proxy: true
  }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:04:35.687

在我的 config.js 中，我有一个 cfg.site_url，这是一种方式，或者您可以查看 req.host

[http://expressjs.com/api.html#req.host](http://expressjs.com/api.html#req.host)

```
// Host: "example.com:3000"
req.hostname
// => "example.com" 
```

不确定您的上下文中是否有 req 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T18:11:59.017

最终通过从 URL 和实际端口动态构建回调 URL 解决了这个问题。对此解决方案不满意，因为它看起来不优雅，但是如果不添加中间件使用调用（我确信这比简单的字符串连接更能影响性能），就无法找到获取实际 URL 的方法。

# android - JSF 中的 HTTP 请求

> ID：12869522
> 
> 赞同：2
> 
> 时间：2012-10-13T02:51:41.727
> 
> 标签：android, jsf, send, http-request

我有一个 JSF Web 应用程序，需要从本机 android 应用程序获取一些信息。

我读过关于在 android 中创建 HTTP 请求的内容，我想我可以弄清楚，但我不知道在 JSF 方面该做什么。我要创建一个新页面、bean 还是什么？http请求甚至是正确的方法吗？

我只是想将一个字符串从 Android 应用程序发送到 JSF Web 应用程序并将其存储在某个 bean 中。任何帮助将不胜感激谢谢！

附加信息 使用 Android API 16 JBoss Server 7.1 Eclipse JSF

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:22:51.417

JSF 是一个基于组件的 MVC 框架，用于基于 HTML 表单的应用程序。您具体要求的更多是 Web 服务的工作，而不是 HTML 表单控制器。JSF 不是一个 Web 服务框架，因此不适合这项工作。你最好使用[JAX-WS](http://metro.java.net/) (SOAP) 或[JAX-RS](http://jersey.java.net/) (RESTful) 或者甚至是“plain vanilla” [servlet](https://stackoverflow.com/tags/servlets/info)。

然后，要让您的 JSF Web 应用程序共享相同的数据，只需使用相同的数据存储 (DB)。

# java - 在 2D Array Java 中查找按钮的索引？

> ID：12869523
> 
> 赞同：1
> 
> 时间：2012-10-13T02:51:47.057
> 
> 标签：java, arrays, swing, jbutton, actionlistener

我只是对以下问题有疑问。我有一个二维按钮数组，当我单击它们时需要运行另一种方法。我当前的方法依赖于以下输入，一个字符串（我可以很容易地从用户那里得到）和两个整数值。这些由数组中的按钮位置决定。

我有一个按钮监听器连接到这些按钮，但我不太确定如何计算出按钮的实际位置。我已经制作了自己的按钮类（因为我想要一些特定的设置，我认为它会更容易）并且在制作它时我实现了一个名为 getXPos 和 getYPos 的方法，它基本上保存了数组中实际按钮的值创建的。问题是我现在不知道如何检索这些值，因为侦听器实际上并不知道正在按下哪个按钮是吗？

我可以使用 getSource() 方法，但我不知道如何调用该源的方法。例如，我尝试执行以下操作。

int x = event.getSource().getXPos(); 但我无法做到这一点。有什么方法可以告诉我按下了哪个按钮，以便我可以访问它的内部方法或类似的东西？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T02:59:07.957

要在源上调用方法，您必须先转换它。如果您从不将您添加`ActionListener`到任何东西，但您的特殊实例`MyButton`及其 x 和 y 变量，您可以这样做：

```
MyButton button = (MyButton) event.getSource();
int x = button.getXPos();
int y = button.getYPos(); 
```

然后`MyButton`包含 x 和 y：

```
public class MyButton extends JButton {

    private int xPos;
    private int yPos;

    // ...

    public int getXPos() {
        return xPos;
    }

    public int getYPos() {
        return yPos;
    }
} 
```

并确保您始终将侦听器添加到以下实例`MyButton`：

```
MyButton myButton = new MyButton();
// ...
myButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        MyButton button = (MyButton) e.getSource();
        int xPos = button.getXPos();
        int yPos = button.getYPos();
        // Do something with x and y
    }
}); 
```

# android - RemoteControlClient 图像亮度？

> ID：12869534
> 
> 赞同：1
> 
> 时间：2012-10-13T02:53:43.670
> 
> 标签：android

我的目的是允许用户在锁定屏幕上显示图片。我能轻松找到的唯一方法是通过`RemoteControlClient`. 我的问题是锁定屏幕上的图像相当暗，我想知道是否有设置使它更亮。我设置它的代码如下：

```
 private void setUpRemoteController() {
    AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.requestAudioFocus(new AudioFocusListener(), AudioManager.STREAM_MUSIC,
        AudioManager.AUDIOFOCUS_GAIN);
    ComponentName pareceiver = new ComponentName(this, PAReceiver.class.getName());
    audioManager.registerMediaButtonEventReceiver(pareceiver);
    Intent mediaButtonIntent = new Intent(android.content.Intent.ACTION_MEDIA_BUTTON);
    mediaButtonIntent.setComponent(pareceiver);
    PendingIntent mediaPendingIntent = PendingIntent.getBroadcast(this,
            0,mediaButtonIntent,0);
    remoteControlClient = new RemoteControlClient(mediaPendingIntent);
    remoteControlClient.setPlaybackState(
            RemoteControlClient.PLAYSTATE_PLAYING);
    remoteControlClient.setTransportControlFlags(
           RemoteControlClient.FLAG_KEY_MEDIA_NEXT |
            RemoteControlClient.FLAG_KEY_MEDIA_PREVIOUS);
    audioManager.registerRemoteControlClient(remoteControlClient);
    Log.d("", "Started and set up controller and receiver");
} 
```

`RemoteControlClient`在相关说明中：当我实际上不需要它时，是否有任何方法可以在不劫持音频焦点的情况下进行显示？

# ios - 核心数据提供错误

> ID：12869536
> 
> 赞同：5
> 
> 时间：2012-10-13T02:53:53.720
> 
> 标签：ios, xcode, core-data

我正在使用 Core Data 并试图让它用一个简单的数据模型显示数据。该应用程序崩溃并给我这个错误消息

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+entityForName：nil 不是搜索实体名称“提醒”的合法 NSManagedObjectContext 参数

我不完全确定，但我如何理解它是说它找不到我的名为 Remind 的实体？但是，我确实有一个名为 Remind 的实体。

我还设置了断点，它就停在这里：![在此处输入图像描述](../Images/ed274501baa3aa6b74cbf44ab8ff7d52.png)

任何帮助将不胜感激。完全处于死胡同。

App Delegate .m 中的托管上下文代码

![在此处输入图像描述](../Images/560dc6c9678011d45b821a3ee74bc393.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:57:38.323

这里的问题是您的访问器和您的 ivar 具有相同的名称。这就是下划线 ivar 约定的来源。在这里，您没有使用访问器来访问您的属性，而是直接使用支持变量，因此它永远不会被初始化。相反，请确保您始终通过您的访问器方法，并且您不会遇到问题。因此，重写有问题的方法（以及任何其他使用该`managedContextObject`属性的方法，如下所示：

```
- (void)viewWillAppear:(BOOL)animated
{
  [super viewWillAppear:animated]; // it's good practice to call the super methods, even if you're fairly certain they do nothing

  // Get a reference to the managed object context *through* the accessor
  NSManagedObjectContext* context = [self managedObjectContext];

  // From now on, we only use this reference in this method
  NSFetchRequest = [[NSFetchRequest alloc] init];
  NSEntityDescription* entity = [NSEntityDescription entityForName:@"Remind" inManagedObjectContext:context]; // <- use the local reference we got through the accessor
  [request setEntity:entity];
  NSError* error = nil;
  NSArray* array = [context executeFetchRequest:request error:&error];
  if( !array ) {
    // Do something with the error
    NSLog(@"Error Fetching: %@", error);
  }
  [self setDesitnationsArray:[array mutableCopy]];
  [destinationsTableView reloadData];
} 
```

您可能希望将您的 ivars 更改为您不会想要使用的东西，或者您会立即发现您没有通过访问器，例如`_managedObjectContext`或什`_privateContext`至或任何会突出您的东西，直到您习惯访问属性通过访问器。如果你不喜欢使用 Objective-C 语法来访问属性，你可以使用点语法，但你必须始终记住要通过`self`.，例如`self.managedObjectContext`. 我不喜欢这种方法，因为人们忘记了它不是直接的属性访问并且它正在使用访问器，所以他们认为可以将点语法交换为直接访问，而不是（就像你的情况一样）。

# sql - 在 sql oracle 中转置组/子组

> ID：12869537
> 
> 赞同：0
> 
> 时间：2012-10-13T02:54:06.310
> 
> 标签：sql

我有日期列，我必须将其分成 6 个季度并按州计算计数、比率 - A/Count、Avg(colC)。日期列我已转换为 YYYY Q 格式。我想知道我是否可以获得如下所示的结果。我正在使用 oracle 11g。我只是想写一个可以给我上述格式的结果的sql。我可以按季度对结果进行分组，但无法进一步对其进行分组以显示每个季度下的计数、比率和平均值。——</p>

我有 2 个表需要用来获取下面的数据。

```
Table 1                                     Table 2

Customer_id    St_Nme      St_Cd           Customer_id  No_of_sales  Time_spent  Date
    1          Alabama     AL                  1           4           4.5       01122012
    2          California  CA                  2           7.5         9.33      03062012 
```

期望的输出计数 - 销售计数比率 - Time_spent/销售计数 Avg - 平均花费的时间

```
 Q42012         Q32012          Q22012             Q12012    Q42011   Q32012  
         count Ratio Avg  count Ratio Avg   count Ratio Avg
State       
Alabama    3    4.5  1.2    8  7.4    3.2    65   21.1  34.4
A..        4    7.5  3.2    5  9.4    5.2    61   25.1  39.4
A..        9    6.5  5.2    4  3.4    3.7    54   41.1  44.4
Boston
Cali..
Den.. 
```

# regex - 如何使用 regexp-me 库？

> ID：12869538
> 
> 赞同：5
> 
> 时间：2012-10-13T02:54:06.757
> 
> 标签：regex, blackberry, java-me

当我遇到 J2ME 没有我在 J2SE 中使用的正常正则表达式时，我感到非常惊讶。

我发现了这个 J2ME 支持的正则表达式库：[regexp-me](http://regexp-me.googlecode.com/svn/trunk/regexp-me/doc/index.html)

任何人都可以告诉我如何从这个库中获取开始/结束位置或 matcher.group()（在 J2SE 中）之类的东西。我可以看到它有一个布尔返回函数“匹配”，但这不是我想要的。

此外，他们使用带有 getParenStart(0) 的大括号来检索匹配的正则表达式，但我以前从未在 J2SE 中使用过这样的东西，无法真正理解它在做什么。

例如：

```
regex = a.+b 
```

我要搜索的字符串：

```
kkkkacccb789 
```

我想知道 `acccb`或最好从字符串中获取整个匹配字符串 的位置`acccb`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:51:40.357

看来你已经想通了。此代码段将执行您想要的匹配，并将字符串的匹配部分放在局部变量中`matchedSubstring`

```
RE regex = new RE("a.+b");
r.match("kkkkacccb789");
String matchedSubstring = r.getParen(0); 
```

# iphone - 手势识别器：应该接收触摸：没有被调用

> ID：12869541
> 
> 赞同：10
> 
> 时间：2012-10-13T02:54:26.513
> 
> 标签：iphone, objective-c, xcode

手势识别器：应该接收触摸：方法没有被调用。我是否设置不当？

```
-(id) init 
{
UILongPressGestureRecognizer *touchHold = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleTouchHold:)];
touchHold.minimumPressDuration = 1.0f;
touchHold.numberOfTouchesRequired = 1;
[[CCDirector sharedDirector].openGLView addGestureRecognizer:touchHold];
}

-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
{
     return NO;
} 
```

即使我将 bool 设置为 no，仍然会调用按住方法。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-13T03:59:34.187

好像你还没有设置委托？

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch 
```

是 UIGestureRecognizerDelegate 的一部分。所以你也应该设置委托。

```
touchHold.delegate = self; 
```

编辑：您应该告诉您的视图控制器实现 UIGestureRecognizerDelegate。就像是

```
@interface YourViewController <UIGestureRecognizerDelegate> 
```

# css - li:hover display:block ul 这是 li 的孩子。如何进行过渡？

> ID：12869542
> 
> 赞同：3
> 
> 时间：2012-10-13T02:54:31.407
> 
> 标签：css, css-transitions

li:hover display:block ul 这是 li 的孩子。如何进行过渡？

代码：

```
<li class="level0 nav-2 level-top parent">
    <a href="#" class="level-top"><span>Womens</span></a>
    <ul class="level0"><li class="level1 nav-2-1 first">
        <a href="#"><span>Running</span></a></li>
        <li class="level1 nav-2-2"><a href="#"><span>Skateboarding</span></a></li>
        <li class="level1 nav-2-3 last"><a href="#"><span>Casual</span></a></li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:01:24.930

### CSS 过渡

```
li ul {
    opacity: 0;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
}

li:hover ul {
    opacity: 1;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    transition: all 1s ease-in-out;
}​ 
```

### 小提琴：http: [//jsfiddle.net/gezmy/](http://jsfiddle.net/gezmy/)

# ruby - Tiny_tds：连接：在配置文件中找不到服务器名称

> ID：12869544
> 
> 赞同：3
> 
> 时间：2012-10-13T02:56:47.983
> 
> 标签：ruby, tiny-tds

```
require "rubygems"
require "tiny_tds"

client = TinyTds::Client.new(:username => 'sa', :password => '', :host => 'RICHARD_PC\SQLEXPRESS')
result = client.execute("SELECT * FROM [Contacts]")

result.each do |row|
   //Do something
 end 
```

我不断收到相同的错误：“**连接：在配置文件中找不到服务器名称**”。我需要做的就是至少能够与 Sql Server 连接。那么如果主机不是我机器上安装的**sqlexpress实例**，那又是什么呢？在**Github**网站上它说这个**主机 => 'mydb.host.net'** (:host - 如果 :dataserver 为空则使用。可以是主机名或 IP。)

感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T06:42:58.140

要么使用 :dataserver => 'RICHARD_PC\SQLEXPRESS' 要么使用 :host => 'RICHARD_PC', :port => 1433

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-23T16:05:18.477

对于那些在 vagrant 上运行 rails 的人，当我的 vagrant 网络连接停止工作（主要是 DNS）时，我收到了这个错误，因此重新启动解决了这个问题。

# opencv - 动态阈值

> ID：12869545
> 
> 赞同：0
> 
> 时间：2012-10-13T02:56:56.933
> 
> 标签：opencv

在我的应用程序中，我遇到了一个问题，不知道如何在 opencv 中实现我的想法。可以请Anone指导我如何解决这个问题。我想要一个基于色调饱和度的动态阈值，以便我可以识别图像中的特定位置。以下是适用于不同图像的阈值

```
cvInRangeS(imgHSV, cvScalar(5, 70, 179), cvScalar(54, 255, 255), imgThreshed); // work fine for img1, img2 and img3 but not for img4, img5, img6.

cvInRangeS(imgHSV, cvScalar(5, 100, 100), cvScalar(54, 255, 255), imgThreshed); //work fine for img4, img5 but nor for img1,2,3 and 6

cvInRangeS(imgHSV, cvScalar(5, 96, 140), cvScalar(100, 255, 255), imgThreshed);// work fine img7 but not for img 1,2,3,4,5,6.

cvInRangeS(imgHSV, cvScalar(5, 100, 100), cvScalar(35, 255, 255), imgThreshed);

cvInRangeS(imgHSV, cvScalar(12, 63 , 128), cvScalar(18, 200, 255), imgThreshed);

cvInRangeS(imgHSV, cvScalar(5, 70, 160), cvScalar(100, 255, 255), imgThreshed); 
```

我需要一种通用方法，以便可以在运行时提取最大和最小色调饱和值并将其放入 cvInranges() 中。到目前为止，我研究发现有一个直方图可用于确定图像的色调饱和度。您能否指导我或参考我如何在运行时获取特定区域的色调饱和最大值和最小值，以便我可以在 opencv 中推广我的应用程序。如果有人有任何其他想法，我将非常感谢您。我被困在这一点上。

# c++ - 常数时间改变C++中数组的前k个元素？

> ID：12869547
> 
> 赞同：3
> 
> 时间：2012-10-13T02:57:58.573
> 
> 标签：c++, arrays

假设我有一个数组：

`bool eleme[1000000] = {false};`

在我的代码中的某个时刻，我`n`将此数组的一些第一个元素更改为`true`. 之后我想确保数组的所有元素都是`false`. 所以我这样做：

```
for (int i =0; i < n; ++i)     
       eleme[i] = false; 
```

哪个费用`Θ(n)`。

有没有办法在恒定时间内做到这一点？例如像 `make_false(eleme, n);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:30:30.667

**一般答案**
如果你想修改内存中的 N 个元素，那最终将是一个 O(N) 操作，不管你是否可以用一个命令来表达它，比如`memset`or `std::fill`。

如果您设计算法以使尽可能多的数组位于缓存中，则操作将大大加快。使用优化的内置命令`memset`也有助于加快速度。

* * *

**建议 1**
但是，常量时间数组初始化有一个**旧的算法技巧**，它也适用于您的情况（常量时间数组重置）——但代价是大量额外的内存使用。

它如下所示：除了主数组之外`A1`，您还分配了第二个`A2`相同长度的数组和一个`S`大小为 N 的堆栈。这些结构都不需要初始化（并且仅分配它们可以说是 O(1 ） 手术）。您还需要一个堆栈指针`SP`。

最初堆栈指针为 0（指向堆栈底部）。

每当你进入`A1`，比如说`A1[i]=j`，你设置`A2[i]=SP`，`S[SP]=i`并增加`SP`。

如果要检查是否`A1[i]`已设置某个条目，请查找`A2[i]`。如果`A2[i]<SP`，即小于堆栈指针的当前值，您就知道相应的堆栈条目`SP[A2[i]]`一定是您之前设置过的。如果该堆栈条目的值为`i`，`A1[i]`则为有效条目。否则它永远不会被初始化。

现在，为了重置 的所有条目`A1`，您只需将堆栈指针设置回 0。这是一个恒定时间操作。

我必须承认我从来没有遇到过我发现这个技巧真正有用的情况。通常`memset`，虽然不是恒定时间，但足够快。

Gonzalo Navarro 最近发表了一篇[笔记](http://www.dcc.uchile.cl/~gnavarro/ps/sccc12.pdf)，他在其中描述了一组进一步压缩额外数组的技巧，以便它们使用更少的空间，同时保持 O(1) 时间限制。

* * *

**建议 2**
另一种可能性是仅在必要时**以惰性方式重置值。**正如您所描述的，这利用了这样一个事实，即在重置时，实际上只会*使用前几个元素中的一些元素。*

这涉及在变量中维护尚未初始化（或在最近重置期间重置）的最左侧元素的索引，以及当`A[i]`要设置元素时，初始化（或重置）左侧之间的所有元素- 最未初始化的一个 和`i`。

要访问 index 处的元素`i`，请检查是否`i`小于最左侧未初始化的元素，在这种情况下返回`A[i]`; 否则它没有被初始化（或重置），所以你将初始化值（可能为 0）作为文字返回。

要重置数组，只需将最左侧未初始化元素的索引设置回 0，这是一个恒定时间操作。

当然，这意味着更改条目现在是 O(N) 操作，但如果您通常只设置数组的*前几个*元素，它永远不会变得非常昂贵。另请注意，两次重置之间所有操作的总成本仍然是 O(N)，因为每个元素将被重置不超过一次。

另一个重要的优点是缓存友好性：每次设置元素时，需要初始化的元素范围可能很小，并且比一次重置所有元素时更有可能完全在缓存中。

在 C++ 中，它可能看起来像这样：

```
template <typename T, std::size_t N, T init_val>
class FastResetArray
{
  std::array<T,N> _data;                // the array
  unsigned        _min_uninitialised;   // the left-most non-initialised element
public:
  FastResetArray()
    :_data(),_min_uninitialised(0)
  {}

  T at(const unsigned index) {
    return (index < _min_uninitialised ? _data[index] : init_val);
  }

  void set(const unsigned index, const T val) {
    if (index > _min_uninitialised)
      std::fill_n(begin(_data) + _min_uninitialised,
          index - _min_uninitialised,
          init_val);
    _data[index] = val;
    _min_uninitialised = index + 1;
  }

  void reset() {
    _min_uninitialised = 0;
  }
}; 
```

（请注意，在构造函数中，我将`_min_uninitialised`（最左侧未初始化元素的索引）设置为 0。由于默认构造`std::array`函数将整个数组初始化为零，我也可以设置为`N`if`init_val`为零。所以上面的实现无助于避免最初的 O(N) 初始化——我们只避免 O(N) in `reset()`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:16:10.057

> 有没有办法在恒定时间内做到这一点[并且不访问超过`n`元素]？

不，你必须设置`n`元素，这将采取`n`步骤，因此 O(n)。

您可以通过不手动编写循环来使其运行得更快。我想你会发现：

```
std::fill(eleme, eleme+n, false); 
```

比

```
for (int i =0; i < n; ++i)     
   eleme[i] = false; 
```

即使它们具有相同的大 O 复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T03:30:49.573

根据

[http://en.wikipedia.org/wiki/Time_complexity#Constant_time](http://en.wikipedia.org/wiki/Time_complexity#Constant_time)

您的代码已经是常数时间

如果元素的数量是预先知道的并且不改变

从声明来看这似乎是真的

布尔元素[1000000] = {假};

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T07:03:32.840

如果数组中的元素数为 n（不是常数），则将该数组中的所有值初始化为 false 将始终处于线性时间。但是，如果您考虑一下，如果这个数组是某个更大算法的一部分，您通常可以找到一种不同的方法在恒定时间内解决您的问题（我做出这个假设是因为如果您正在初始化所有元素数组为“假”，那么您不必关心当前存储在那里的数据，那么为什么此时要对它做任何事情呢？）。

# jsf - 丰富：pickList 和 selectManyListbox - JSF 转换器验证错误：值无效

> ID：12869549
> 
> 赞同：1
> 
> 时间：2012-10-13T02:58:25.590
> 
> 标签：jsf, richfaces

我将 rich:pickList 替换为 selectManyListbox 进行测试，将值提交到服务器时仍然显示错误：“验证错误：值无效”。我还设置了断点来调试 StaffConverter (getAsobject)，但系统从不调用它。请让我知道为什么我的转换器从未调用过的一些原因，并建议我如何解决这个问题。谢谢

xhtml 文件：

```
<h:selectManyListbox value="#{reportController.selectedStaffList}" converter="staffConverter">
   <f:selectItems value="#{reportController.staffList}" 
                  var="item" itemValue="#{item}" itemLabel="#{item.name}" />
</h:selectManyListbox>

<rich:pickList value="#{reportController.selectedStaffList}" converter="staffConverter" sourceCaption="Available flight" targetCaption="Selected flight" listWidth="195px" listHeight="100px" orderable="true">
   <f:selectItems value="#{reportController.staffList}" var="item" itemValue="#{item}" itemLabel="#{item.name}" />
</rich:pickList> 
```

我的转换器：

```
@FacesConverter(forClass = Staff.class)
public static class StaffConverter implements Converter {

    public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
        if (value == null || value.length() == 0) {
            return null;
        }
        StaffController controller = StaffController.getInstance();
        return controller.facade.find(Staff.class, getKey(value));
    }

    java.lang.Integer getKey(String value) {
        java.lang.Integer key;
        key = Integer.valueOf(value);
        return key;
    }

    String getStringKey(java.lang.Integer value) {
        StringBuffer sb = new StringBuffer();
        sb.append(value);
        return sb.toString();
    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
        if (object == null) {
            return null;
        }
        if (object instanceof Staff) {
            Staff o = (Staff) object;
            return getStringKey(o.getStaffCode());
        } else {
            throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName()
                    + "; expected type: " + StaffController.class.getName());
        }
    }
} 
```

我在 Staff 中实现了 equals 方法：

```
@Override
public boolean equals(Object object) {
    if (!(object instanceof Staff)) {
        return false;
    }
    Staff other = (Staff) object;
    return (this.staffCode == other.staffCode);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-13T11:03:27.700

只是为了将它发布给像我这样喜欢在 google 或 stackoverflow 上搜索开发问题解决方案的人...

我多次遇到这个问题，具体取决于我在转换器中使用的 pojos 类型......最后我想我找到了一个优雅的解决方案。在我的例子中，我直接使用 JPA 实体类，因为我想保存 DTO 层。好吧，对于一些实体，rich:pickList 可以工作，而其他实体则不能......我也将其追踪到 equals 方法。例如，在下面的示例中，它不适用于 userGroupConverter bean。

我的解决方案是简单地内联覆盖equals方法，因此来自实体（我经常使用lombok）的那个是不变的，根本不需要更改！所以在我下面的转换器中，我只比较等号中的名称字段：

xhtml:

```
 <rich:pickList id="pickListUserGroupSelection"
        value="#{usersBean.selectedUserGroups}" switchByDblClick="true"
        sourceCaption="Available user groups" targetCaption="Groups assigned to user"
        listWidth="365px" listHeight="100px" orderable="false"
        converter="#{userGroupConverter}"
        disabled="#{!rich:isUserInRole('USERS_MAINTAIN')}">

        <f:validateRequired disabled="true" />
        <rich:validator disabled="true" />

        <f:selectItems value="#{usersBean.userGroups}" var="userGroup"
            itemValue="#{userGroup}"
            itemLabel="#{userGroup.name}" />

        <f:selectItems value="#{usersBean.selectedUserGroups}" var="userGroup"
            itemValue="#{userGroup}"
            itemLabel="#{userGroup.name}" />

    </rich:pickList>
    <rich:message for="pickListUserGroupSelection" /> 
```

转换器：

```
package ...;

import ...

/**
 * JSF UserGroup converter.<br>
 * Description:<br>
 * JSF UserGroup converter for rich:pickList elements.<br>
 * <br>
 * Copyright: Copyright (c) 2014<br>
 */
@Named
@Slf4j
@RequestScoped // must be request scoped, as it can change every time!
public class UserGroupConverter implements Converter, Serializable {

    /**
     *
     */
    private static final long serialVersionUID = 9057357226886146751L;

    @Getter
    Map<String, UserGroup> groupMap;

    @Inject
    MessageUtil messageUtil;

    @Inject
    UserGroupDao userGroupDao;

    @PostConstruct
    public void postConstruct() {

        groupMap = new HashMap<>();

        List<UserGroup> userGroups;
        try {
            userGroups = userGroupDao.findAll(new String[] {UserGroup.FIELD_USER_ROLE_NAMES});

            if(userGroups != null) {

                for (UserGroup userGroup : userGroups) {

                    // 20150713: for some reason the UserGroup entity's equals method is not sufficient here and causes a JSF validation error
                    // "Validation Error: Value is not valid". I tried this overridden equals method and now it works fine :-)
                    @SuppressWarnings("serial")
                    UserGroup newGroup = new UserGroup() {

                        @Override
                        public boolean equals(Object obj){
                            if (!(obj instanceof UserGroup)){
                                return false;
                            }

                            return (getName() != null)
                                 ? getName().equals(((UserGroup) obj).getName())
                                 : (obj == this);
                        }
                    };
                    newGroup.setName(userGroup.getName());

                    groupMap.put(newGroup.getName(), newGroup);
                }
            }

        } catch (DaoException e) {

            log.error(e.getMessage(), e);

            FacesContext fc = FacesContext.getCurrentInstance();
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Error initializing user group converter!", null);
            fc.addMessage(null, message);
        }
    }

    /*
     * (non-Javadoc)
     * @see javax.faces.convert.Converter#getAsObject(javax.faces.context.FacesContext, javax.faces.component.UIComponent, java.lang.String)
     */
    @Override
    public UserGroup getAsObject(FacesContext context, UIComponent component,
            String value) {

        UserGroup ug = null;

        try {

            ug = getGroupMap().get(value);
        } catch (Exception e) {

            log.error(e.getMessage(), e);

            FacesContext fc = FacesContext.getCurrentInstance();
            FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO, "Error converting user group!", null);
            fc.addMessage(null, message);
        }

        return ug;
    }

    /*
     * (non-Javadoc)
     * @see javax.faces.convert.Converter#getAsString(javax.faces.context.FacesContext, javax.faces.component.UIComponent, java.lang.Object)
     */
    @Override
    public String getAsString(FacesContext context, UIComponent component,
            Object value) {

        String name = ((UserGroup) value).getName();

        return name;
    }

} 
```

Brgds，玩得开心！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T02:53:58.173

感谢 Brian 和 BalusC 的帮助。我通过在 selectManyListbox & rich:picklist 中添加命名转换器来解决我的问题，以便它们运行良好。但通常，我只使用@FacesConverter(forClass = Staff.class)，并且不需要在 jsf 中添加命名转换器，因此它们仍然运行良好，除了 selectManyListbox & rich:picklist

# android - 在选项卡中使用列表视图时出现 NullPointerException

> ID：12869550
> 
> 赞同：0
> 
> 时间：2012-10-13T02:58:27.507
> 
> 标签：android, android-listview, android-tabactivity, android-context

我正在尝试在选项卡中实现列表视图。我正在使用自定义 arrayadapter 创建自定义列表视图。代码如下。

创建选项卡活动：

```
TabHost th = getTabHost();
TabSpec specGroups = th.newTabSpec("Groups");
    specGroups.setIndicator("Groups");
    Intent intentGroups = new Intent(this, GroupsList.class);
    specGroups.setContent(intentGroups); 
```

群列表活动：

```
public class GroupsList extends Activity {

public String[] ROSTER_LIST = {"Sam", "Bob", "Tabg", "Toushi", "john"};
private ListView ROSTER_LISTVIEW;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.groups_list);

    Log.d("STARTED", "0");

    ROSTER_LISTVIEW = (ListView) findViewById(R.id.listViewFriends);
    Log.d("STARTED", "1");

    ArrayAdapter<String> adapter = new MyAdapter(this,
            android.R.layout.simple_list_item_1, R.id.textViewRosterRow,
            ROSTER_LIST);
    Log.d("STARTED", "2");

    ROSTER_LISTVIEW.setAdapter(adapter);
    Log.d("STARTED", "3");

} 
```

自定义适配器类（内部类）：

```
private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId,
            String[] ROSTER_LIST) {
        super(context, resource, textViewResourceId, ROSTER_LIST);
        // TODO Auto-generated constructor stub
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        Log.d("ADAPTER", "0");
        View row = inflater
                .inflate(R.layout.friends_list_row, parent, false);
        Log.d("ADAPTER", "1");

        TextView text = (TextView) row.findViewById(R.id.textViewRosterRow);
        Log.d("ADAPTER", "2");
        text.setText(ROSTER_LIST[position]);

        Log.d("ADAPTER", "OK");
        return row;
    }

} 
```

在 oncreate 方法`Log.d("STARTED", "2");`行中登录 logcat，然后弹出 nullpointerexception。内部类`Log`内部的 logcat 中没有日志。`MyAdapter`

> 此代码在没有选项卡的情况下可以正常执行。

我在这里犯了什么错误？我该如何解决这个问题？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:05:11.960

将适配器 getView 更改为：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;

        if(row==null){
          LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          Log.d("ADAPTER", "0");
          row = inflater
                .inflate(R.layout.friends_list_row, parent, false);
          Log.d("ADAPTER", "1");
      }
        TextView text = (TextView) row.findViewById(R.id.textViewRosterRow);
        Log.d("ADAPTER", "2");
        text.setText(ROSTER_LIST[position]);

        Log.d("ADAPTER", "OK");
        return row;
    } 
```

# c++ - 未初始化的局部变量

> ID：12869554
> 
> 赞同：1
> 
> 时间：2012-10-13T02:59:57.307
> 
> 标签：c++, variables, pointers, local, initialization

此代码编译并运行，但给出了我无法修复的 Microsoft 编译器错误

警告 C4700：使用了未初始化的局部变量 ''。

这是在代码的最后一行，我想

```
#include <iostream>
using namespace std;

const int DIM0 = 2, DIM1 = 3, DIM2 = 4, DIM3 = 5;

void TestDeclar();

int main(){
    TestDeclar();
    cout << "Done!\n";
    return 0;
}

void TestDeclar(){        
    //24 - array of 5 floats
    float xa[DIM3], xb[DIM3], xc[DIM3], xd[DIM3], xe[DIM3], xf[DIM3];
    float xg[DIM3], xh[DIM3], xi[DIM3], xj[DIM3], xk[DIM3], xl[DIM3];   
    float xm[DIM3], xn[DIM3], xo[DIM3], xp[DIM3], xq[DIM3], xr[DIM3];
    float xs[DIM3], xt[DIM3], xu[DIM3], xv[DIM3], xw[DIM3], xx[DIM3];

    //6  - array of 4 pointers to floats
    float *ya[DIM2] = {xa, xb, xc, xd}, *yb[DIM2] = {xe, xf, xg, xh};   
    float *yc[DIM2] = {xi, xj, xk, xl}, *yd[DIM2] = {xm, xn, xo, xp};
    float *ye[DIM2] = {xq, xr, xs, xt}, *yf[DIM2] = {xu, xv, xw, xx};

    //2 - array of 3 pointers to pointers of floats
    float **za[DIM1] = {ya, yb, yc};    
    float **zb[DIM1] = {yd, ye, yf};

    //array of 2 pointers to pointers to pointers of floats
    float ***ptr[DIM0] = {za, zb};   
    cout << &***ptr[DIM0] << '\n';  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:33:05.913

您正在访问超过`ptr4D`. `DIM0`是 2，比最后一个索引 1 大一个！

将最后几行更改为：

```
//array of 2 pointers to pointers to pointers of floats
float ***ptr4D[DIM0] = {za, zb};   
cout << &***ptr4D[0] << '\n'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:36:35.410

不确定我是否可以帮助你，但我试图找出在我的 linux 机器上运行它的问题。我已经在 ubuntu 机器上对其进行了编译以进行比较，结果一切正常，甚至告诉编译器打开所有选项警告（通过 -Wall 选项）。运行时，我得到了这个：

```
# Compiled it with -Wall to enable all warning flags and -g3 to produce extra debug information
~$ g++ -Wall stackoverflow.cpp -g3
./a.out 
Segmentation fault (core dumped) 
```

然后我尝试用 GDB（GNU 调试器）调试它并得到了这个：

```
(gdb) r
Starting program: /home/ubuntu/a.out 

Program received signal SIGSEGV, Segmentation fault.
0x0000000000400986 in TestDeclar () at stackoverflow.cpp:34
34          cout << &***ptr4D[DIM0] << '\n';  
(gdb) s 
```

所以看来问题出在 cout 线上。再次检查您的代码，*DIM0*的值为*2*，因此您正在尝试访问 ptr4D 之外的内存地址。正如[user1721424](https://stackoverflow.com/users/1721424/user1721424)提到的，只需将*DIM0*替换为*0*即可！

```
#After fixing it:
~$ ./a.out 
0x7fff74cd3830
Done! 
```

希望能帮助到你！

# c# - 目标航向的转向

> ID：12869557
> 
> 赞同：1
> 
> 时间：2012-10-13T03:01:10.977
> 
> 标签：c#, compass-geolocation, heading, bearing

我正在使用一个程序，在该程序中我在 2D 地图上模拟飞机。我很难找到转向以击中目标方位的方向。

```
 double maxHeadingChange = 10; //Maximum heading change per 100 ms
  double targetHeading = 0;
  double differenceHeading = Math.Abs(targetHeading - heading);
  //if we need to turn clockwise

  if (targetHeading > 340 || targetHeading < 30)
  {
      if (heading < 180)
      {
          if (differenceHeading > maxHeadingChange)
              heading -= maxHeadingChange;
          else
              heading -= differenceHeading;
      }
      else
      {
          if (differenceHeading > maxHeadingChange)
              heading -= maxHeadingChange;
          else
              heading -= differenceHeading;
      }
  }
  else if (targetHeading > heading)
  {
      if (targetHeading - heading < maxHeadingChange)
          heading = targetHeading;
      else
          heading += maxHeadingChange;
  }
  else
  {
      if (heading - targetHeading < maxHeadingChange)
          heading = targetHeading;
      else
          heading -= maxHeadingChange;
  }

  //MessageBox.Show(headingDifference + "");
  //just for now
  //heading = targetHeading;

  if(heading > 359)
      heading = 0;
  if(heading < 0)
      heading += 360; 
```

您可以看到我正在尝试做的是获得转弯的方向，然后如果转弯量大于最大转弯量，则按最大转弯量转弯。

问题是，当对象处于约 10 度的航向并且目标为 354 度时，它认为它应该顺时针转动以击中该目标，因为这将减去航向以击中较小的目标航向. 问题是，一旦目标航向超过 0 并进入更高的航向范围，它就会将转向顺时针方向反转。这导致对象转向其航向（逆时针旋转，或减少度数），并在它通过 0 时突然反转转向方向。

我需要找到一种更有效的方法来获得以度为单位的转弯量（我不能简单地设置`heading`为`targetHeading`，因为在最大转弯量中有一些模拟），以便它检测到从当前航向击中 350* 航向10*，继续减去航向。

抱歉，解释太长了。

*[编辑]：*潜在的解决方案 1

```
 double maxHeadingChange = 10; //Maximum heading change per 100 ms
  double targetHeading = 0;
  double differenceHeading = Math.Abs(targetHeading - heading);
  //if we need to turn clockwise
  if(getTurnDir(heading, targetHeading))
  {
      //Turn right
      if(differenceHeading > maxHeadingChange)
          heading -= maxHeadingChange;
      else
          heading -= differenceHeading;
  }
  else
  {
      if (differenceHeading > maxHeadingChange)
          heading += maxHeadingChange;
      else
          heading += differenceHeading;
  }

  //MessageBox.Show(headingDifference + "");
  //just for now
  //heading = targetHeading;

  if(heading > 359)
      heading = 0;
  if(heading < 0)
      heading += 360;

double hdgDiff(double h1, double h2)
{ // angle between two headings
   double diff = h1 - h2 + 3600 % 360;
   return diff <= 180 ? diff : 360 - diff;
}
bool getTurnDir(double hdg, double newHdg)
{ // should a new heading turn left or right?
    if (newHdg > hdg)
        return newHdg - hdg > 180;
    return hdg - newHdg > 180;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T03:15:48.607

```
double hdgDiff (double h1, double h2) { // angle between two headings
   const double diff = fmod(h1 - h2 + 3600, 360);
   return diff <= 180 ? diff : 360 - diff;
}

bool isTurnCCW(double hdg, double newHdg) { // should a new heading turn left ie. CCW?
   const double diff = newHdg - hdg;        // CCW = counter-clockwise ie. left
   return diff > 0 ? diff > 180 : diff >= -180;
} 
```

# javascript - 下拉菜单不断上下

> ID：12869561
> 
> 赞同：0
> 
> 时间：2012-10-13T03:01:56.723
> 
> 标签：javascript, jquery

这是我的功能：

```
function dropmenu() {
    $(".dropdownitem").show('slow');
}
function hidemenu() {
    $(".dropdownitem").hide('slow');
} 
```

这是我的下拉菜单：

```
<div id="dropdown" class="ns" onmouseover="dropmenu()" onmouseout="hidemenu()">
    <p id="dropper">Shortcut Menu</p>
    <p class="dropdownitem">Shortcut menu item</p>
    <p class="dropdownitem">Something</p>
    <p class="dropdownitem">Seomthing else</p>
    <p class="dropdownitem">Test menu item</p>
    <p class="dropdownitem">More testing</p>
    <p class="dropdownitem">Stuff</p>
    <p class="dropdownitem">More stuff</p>
</div> 
```

问题是，当我将鼠标悬停在快捷菜单上并移出快捷菜单时，它会一直上下移动，上下移动......

问题是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:06:45.220

elclanrs 的回答将修复弹跳，另一种解决方案是将所有内容放在应该下拉的 div 中

```
<div id="dropdown" class="ns" onmouseover="dropmenu()" onmouseout="hidemenu()">
<div class="dropdownshow">
  <p id="dropper">Shortcut Menu</p>
  <p class="dropdownitem">Shortcut menu item</p>
  <p class="dropdownitem">Something</p>
  <p class="dropdownitem">Seomthing else</p>
  <p class="dropdownitem">Test menu item</p>
  <p class="dropdownitem">More testing</p>
  <p class="dropdownitem">Stuff</p>
  <p class="dropdownitem">More stuff</p>
</div>
</div> 
```

然后显示整个下拉 div

```
function dropmenu() {
$(".dropdownshow").show('slow');
 } 
```

或者

```
 $(document).on("mouseover", "div.overout" , function() {
   $(".dropdownshow").show('slow');    
     }).mouseout(function(){
        $(".dropdownshow").hide('slow');
     }); 
```

在将动画同时应用于 7 个单独的元素导致弹跳之前，这只适用于 1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:03:56.407

[停止](http://api.jquery.com/stop/)

```
function dropmenu() {
    $(".dropdownitem").stop.(1,1).show('slow');
}
function hidemenu() {
    $(".dropdownitem").stop(1,1).hide('slow');
} 
```

# wordpress - 将类别添加到自定义帖子类型

> ID：12869566
> 
> 赞同：0
> 
> 时间：2012-10-13T03:02:46.577
> 
> 标签：wordpress, wordpress-theming

所以我正在使用自定义主题，并想为我们的文章创建一个自定义 url 结构。基本上我现在拥有的是 -> site.com/article/article-slug 我需要一个永久链接，比如这个site.com/category-slug/article/article-slug

我正在使用的代码是：

```
register_taxonomy( 'article', 'article_type', array(    
'labels' => array(
    'name' => 'Article Categories' ,
    'singular_name' => _x( 'Article Category', 'taxonomy singular name' ),
    'search_items' =>  __( 'Search Article Categorys' ),
    'popular_items' => __( 'Popular Article Categorys' ),
    'all_items' => __( 'All Article Categorys' ),
    'parent_item' => null,
    'parent_item_colon' => null,
    'edit_item' => __( 'Edit Article Category' ), 
    'update_item' => __( 'Update Article Category' ),
    'add_new_item' => __( 'Add Article Category' ),
    'new_item_name' => __( 'New Article Category Name' ),
    'separate_items_with_commas' => __( 'Separate Article Categorys with commas' ),
    'add_or_remove_items' => __( 'Add or remove Article Categorys' ),
    'choose_from_most_used' => __( 'Choose from the most used Article Categorys' )
    ) , 
'hierarchical' => true, 
'query_var' => true,
'show_ui' => true,
'rewrite' => array('slug' => 'article-category') ) );
register_post_type( 'article_type',
    array(
      'labels' => array('name' => 'Article Manager', 'singular_name' => 'Articles' ),
  'query_var' => true,
'show_ui' => true,
   'public' => true,
  'hierarchical' => true, 
  'rewrite' =>  array('slug' => 'article','with_front' => TRUE),            
  'supports' => array ( 'title', 'editor','author', 'custom-fields', 'revisions', 'post-formats', 'trackbacks', 'comments','excerpt' ),
      'menu_icon' => get_template_directory_uri()."/PPT/img/admin/article.png", 

    )
  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T06:09:02.420

设置>永久链接和`/%category%/%taxonomy%/postname%/`？

# xml - FireFox 没有正确显示我的 XML

> ID：12869568
> 
> 赞同：2
> 
> 时间：2012-10-13T03:03:23.887
> 
> 标签：xml, firefox

我正在使用一些`XML`处理方法，但遇到了一个奇怪的问题，即`XML`当我使用浏览器查看`XML`文件和使用. 当我在 中打开文件时，我看到：`IE``FireFox``IE`

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    version="1.0">
    <xsl:template match="root">
        <xsl:apply-templates select="property" />
    </xsl:template>
    <xsl:template match="property">
        <xsl:number />
        <xsl:apply-templates select="node()" />
    </xsl:template>
    <xsl:template match="node()">
        <xsl:if test="normalize-space(.)">
            <xsl:value-of select="normalize-space(.)" />
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

但是，在 中`FireFox`，我看到以下内容：

```
<xsl:stylesheet version="1.0">
    <xsl:template match="root">
        <xsl:apply-templates select="property" />
    </xsl:template>
    <xsl:template match="property">
        <xsl:number />
        <xsl:apply-templates select="node()" />
    </xsl:template>
    <xsl:template match="node()">
        <xsl:if test="normalize-space(.)">
            <xsl:value-of select="normalize-space(.)" />
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

基本上，我知道问题是`FireFox`没有显示`xmlns`属性。我试图找到解决它的方法；但没有运气。任何人以前遇到过这个问题并且知道如何解决它？谢谢。

PS：我使用的是 IE 9.0.8112.16421 和 Firefox 15.0.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:16:00.530

见[https://bugzilla.mozilla.org/show_bug.cgi?id=175946](https://bugzilla.mozilla.org/show_bug.cgi?id=175946)

基本上，Firefox 实际上使用 XSLT 来实现 XML prettyprinter，而 XSLT 不能使用 xmlns 属性......

# c++ - 从 C/C++ 播放声音的最简单方法

> ID：12869569
> 
> 赞同：1
> 
> 时间：2012-10-13T03:03:36.023
> 
> 标签：c++, c, macos, audio

我有一个生成`int`样本的函数（说它只是一个随机函数）。

我可以将这些整数路由到我的 Mac 上的扬声器的最简单方法是什么？

请注意，重要的是我能够无限期地发送整数并且它会播放它；我不是在寻找一种将其写入 WAV 文件并稍后播放的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:05:47.343

我想最简单的方法是通过[SDL](http://www.libsdl.org/intro.en/usingsound.html)，如果你想要更多跨平台和更少特定于 OSX 的东西。我个人用它来播放原始样本，它就像一个魅力。

# jquery - 新创建元素的事件

> ID：12869577
> 
> 赞同：0
> 
> 时间：2012-10-13T03:04:48.283
> 
> 标签：jquery, dom

我目前有这个javascript：

```
$(document).on('click', '.add_option', function(e){
    e.preventDefault();
    $.get("/options/render_option", function(data){
        $('.add_option_control_group').before(data.option)
        $('#pollview').append(data.view)
        $(document).on('keyup', '.options', function(){
            that = $(this);
            index = $('.options').index(this);
            $('label.pollviewoptions:eq(' + index + ')').find('span').text(that.val());
        });
    }); 
}); 
```

HTML：

```
 <div class="span3">
        <label class="control-label" for="inputPhoto">Option</label>
        <div class="controls">
            <input class="span3 options" name="option[]" type="text" placeholder="Text">
            <br />
        </div>
    </div>
    <div class="span2">
        <label class="control-label" for="inputPhoto">Image</label>
        <div class="controls">
            <input class="span2" name="userfile[]" type="file" id="inputFile" placeholder="File">
            <br />
            <?php echo isset($file_errors['userfile']) ? "<span class='label label-important'>{$file_errors['userfile']}</span>" : '';?>
        </div>
    </div>
    <div class="clearfix">&nbsp;</div>
    <div class="span3">
        <label class="control-label" for="inputPhoto">Option</label>
        <div class="controls">
            <input class="span3 options" name="option[]" type="text" placeholder="Text">
            <br />
        </div>
    </div>
    <div class="span2">
        <label class="control-label" for="inputPhoto">Image</label>
        <div class="controls">
            <input class="span2" name="userfile[]" type="file" id="inputFile" placeholder="File">
            <br />
        </div>
    </div>
    <div class="clearfix">&nbsp;</div>        
<div class="add_option_control_group control-group">
    <label class="control-label" for="inputDescription">&nbsp;</label>
    <div class="controls">
        <a href="javascript:void(0)" class="btn btn-primary add_option">Add Option</a>
        <br />
    </div>
</div>

<div class="span4">
    <div class="well" id="pollview">
        <legend>Legend</legend>
        <label class="checkbox pollviewoptions">
            <input type="checkbox"><span>Check me out</span>
        </label>
        <label class="checkbox pollviewoptions">
            <input type="checkbox"><span>Check me out</span>
        </label>
    </div>
</div> 
```

它目前不起作用。ajax 请求从响应中检索 html 并将元素插入页面的 2 个区域。

数据选项：

```
<div class="span3">
    <label class="control-label" for="inputPhoto">Option</label>
    <div class="controls">
        <input class="span3" name="option[]" type="text" placeholder="Text">
        <br />
    </div>
</div>
<div class="span2">
    <label class="control-label" for="inputPhoto">Image</label>
    <div class="controls">
        <input class="span2" name="userfile[]" type="file" id="inputFile" placeholder="File">
        <br />
        <?php echo isset($file_errors['userfile']) ? "<span class='label label-important'>{$file_errors['userfile']}</span>" : '';?></span>
    </div>
</div>
<div class="clearfix">&nbsp;</div> 
```

数据视图

```
<label class="checkbox pollviewoptions">
    <input type="checkbox"> Check me out
</label> 
```

创建的所有元素都不响应 keyup 事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:11:51.030

没有 class `.options`in 的文本输入元素`data.option`，只有`.span3`.

# sql - 条件存在时从另一个表更新一个表中的多行

> ID：12869584
> 
> 赞同：15
> 
> 时间：2012-10-13T03:06:43.397
> 
> 标签：sql, postgresql, sql-update, postgis

我有两张桌子。

**表**1 包含的公司的位置在名为`the_geom`

**Table2**还包含来自**Table1**的相同公司，未进行地理参考，以及其他数百家地址已进行地理参考的公司。

我需要做的就是将来自**Table1**`the_geom`公司的lat/lng 值插入到它们在**表 2**中的相应条目中。这些插入可以基于的共同点是列。****`address`****

 ****很简单的问题，我敢肯定，但我很少使用 SQL。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-13T03:09:47.383

假设由

> 插入“the_geom”纬度/经度值

你实际上是指**`UPDATE`**现有的行`table2`：

```
UPDATE table2 t2
SET    the_geom = t1.the_geom
FROM   table1 t1
WHERE  t2.address = t1.address
AND    t2.the_geom IS DISTINCT FROM t1.the_geom;  -- avoid empty updates 
```

相关答案：

*   [我如何（或我可以）在多列上选择 DISTINCT？](https://stackoverflow.com/questions/54418/how-do-i-or-can-i-select-distinct-on-multiple-columns/12632129#12632129)

还假设该`address`列具有`UNIQUE`值。[手册中的](https://www.postgresql.org/docs/current/sql-update.html)
[详细信息`UPDATE`](https://www.postgresql.org/docs/current/sql-update.html)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-05-17T13:29:18.213

我有一个类似的问题，但是当我尝试上面提到的解决方案时，我得到了一个错误，比如

*'t2' 附近的语法不正确*

对我有用的代码是：

```
UPDATE table2
SET the_geom = t1.the_geom
FROM table1 as t1
WHERE table2.address = t1.address AND table2.the_geom <> t1.the_geom 
```

我知道我的答案晚了 5 年，但我希望这能帮助像我这样找不到这个解决方案的人。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-10T09:18:50.940

如果你是 mysql 用户（像我一样）并且上面的脚本不起作用，这里是 mysql 等价物。

```
UPDATE table2 t2, table1 t1
SET    the_geom = t1.the_geom
WHERE  t2.address = t1.address
AND    t2.the_geom <> t1.the_geom; -- avoid empty updates 
```

OP的所有学分。****

# android - 为什么同一张USIM卡有两个IMSI？

> ID：12869587
> 
> 赞同：0
> 
> 时间：2012-10-13T03:08:23.693
> 
> 标签：android

我想得到IMSI调用TelephonyManager.getSubscriberId()，但有时得到334050xxxxxx，有时得到222013xxxxxx，为什么？我使用某张USIM卡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T09:55:17.860

您的卡很可能有双 IMSI 应用程序（或多 IMSI 应用程序）。一个 IMSI 用于家庭和合作伙伴网络，另一个用于国际使用（漫游）。

我建议使用ICCID进行识别，因为每张卡都是唯一的。您可以使用[Telephony#getSimSerialNumber()](http://developer.android.com/reference/android/telephony/TelephonyManager.html)。

# asp.net-mvc-3 - MVC 将 ModelState 键匹配到 ViewModel 集合

> ID：12869588
> 
> 赞同：1
> 
> 时间：2012-10-13T03:09:36.710
> 
> 标签：asp.net-mvc-3, validation, collections, modelstate

当 ViewModel 是（具有）集合时，是否可以将 ViewModel 属性与匹配的 ModelState.Key 值匹配？

示例：要编辑视图模型项的集合，我使用的是[在此处找到的扩展](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)。

这会将 GUID 添加到页面上字段的 id 中。

例子：

```
class Pets
{
    string animal;
    string name;
} 
```

对于 Pets 列表，生成的 html 源代码如下：

```
<input name="Pets.index" autocomplete="off" value="3905b306-a9..." type="hidden">
<input value="CAT" id="Pets_3905b306-a9...__animal" name="Pets[3905b306-a9...].animal" type="hidden">
<input value="MR. PEPPERS" id="Pets_3905b306-a9...__name" name="Pets[3905b306-a9...].name" type="hidden">

<input name="Pets.index" autocomplete="off" value="23342306-b4..." type="hidden">
<input value="DOG" id="Pets_23342306-b4...__animal" name="Pets[23342306-b4...].animal" type="hidden">
<input value="BRUTICUS" id="Pets_23342306-b4...__name" name="Pets[23342306-b4...].name" type="hidden"> 
```

因此，当它在 post 上绑定时，ModelState 会加载所有表单字段。在 ModelSTate.Keys 中，有：

```
Pets[23342306-b4...].name
Pets[23342306-b4...].animal
Pets[3905b306-a9...].name
Pets[3905b306-a9...].animal 
```

到目前为止一切都很好，但是我正在做一些业务逻辑验证，例如，如果存在同名的动物，则无法添加新动物。在这种情况下，我希望能够突出显示错误的输入字段。

因此，如果我的 create 函数失败，它将返回一个错误/键值对，如下所示：

```
{ error = "Duplicate Name", key="name" } 
```

所以我至少现在会是什么属性导致了这个问题。

但是由于我的存储库函数不知道视图字段 id，我如何将键“名称”与适当的 ModelState 键匹配（在这种情况下，Pets[23342306-b4...].name 或 Pets[3905b306 -a9...].name)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:21:17.903

如果您像我一样使用 Html.BeginCollectionItem 扩展方法，我可以通过不使用 GUID 来解决这个问题。我需要动态添加和删除，但我一直在查找已知项目，即具有 ID 的人，我在编辑器中拥有这些 ID。因此，我没有使用 GUID，而是在下面的代码中分配了 ID (uniqueId)。然后我可以找到密钥，因为我知道它是 Person[234232]。当然，如果您要添加新项目而不显示所选项目，它可能不适合您。

```
 public static IDisposable BeginCollectionItem(this HtmlHelper html, string collectionName, string uniqueId)
    {
        var idsToReuse = GetIdsToReuse(html.ViewContext.HttpContext, collectionName);
        string itemIndex = idsToReuse.Count > 0 ? idsToReuse.Dequeue() : uniqueId;

        // autocomplete="off" is needed to work around a very annoying Chrome behaviour whereby it reuses old values after the user clicks "Back", which causes the xyz.index and xyz[...] values to get out of sync.
        html.ViewContext.Writer.WriteLine(string.Format("<input type=\"hidden\" name=\"{0}.index\" autocomplete=\"off\" value=\"{1}\" />", collectionName, html.Encode(itemIndex)));

        return BeginHtmlFieldPrefixScope(html, string.Format("{0}[{1}]", collectionName, itemIndex));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T09:31:07.397

如果您使用 MVC 的内置功能通过适当的显示/编辑器模板显示集合（`Html.DisplayFor(m => m.Pets)`或`Html.EditorFor(m => m.Pets)`），MVC 将呈现如下内容：

```
Pets[0].name
Pets[0].animal
Pets[1].name
Pets[1].animal 
```

这映射到`IEnumerable<Pets>`并且您知道第一项的索引为 0，第二项的索引为 1，依此类推。

因此，如果第二项有错误，您可以为`ModelState`键设置错误`"Pets[1].name"`，例如。

# ada - 如何从抽象标记记录中设置和派生类型？

> ID：12869590
> 
> 赞同：2
> 
> 时间：2012-10-13T03:10:22.140
> 
> 标签：ada

我在理解 Ada 中的继承以及一些语法方面遇到了一些困难。

我的目标是从带有记录的抽象类型派生，并在记录字段中使用不同的数据类型。这是我能够编译的：

```
type Base is abstract new Parent.ParentType with record
    X:Access_Type;
end record

type Child is new Base with record
    n:Integer;
end record; 
```

但我不想有这个额外的 n 字段，我想让 X 成为子类型中的整数。我无法让编译器对此感到满意。我想要的是以下内容：

```
type Base is abstract new Parent.ParentType with tagged record
    X:Access_Type;
end record;

type Child is new Base with record
    X:Integer;
end record; 
```

不幸的是，我不知道如何标记我认为允许我重新分配 X 字段的基本类型。（如果没有标记，编译器会抱怨声明冲突。）

有人可以对此有所了解吗？一般来说，我对 OO 编程很陌生，我发现 Ada 的类型方法比通常的类方法更令人困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T08:58:02.570

我不确定您要通过更改`X`派生类型中的类型来解决什么问题。正如[*Ada 95 Rationale: II.1 Programming by Extension*](http://www.adaic.org/resources/add_content/standards/95rat/rat95html/rat95-p1-2.html#1)中所建议的那样，标记类型的扩展*将*组件添加到从基类型继承的组件中。您可能正在寻找一种使用[*判别*](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-7.html)式为派生类型指定*参数*的方法。[](http://www.adaic.org/resources/add_content/standards/05rm/html/RM-3-7.html)

 *附录：这可能有助于理解 Ada 对常见[的面向对象编程](http://en.wikipedia.org/wiki/Object-oriented_programming)原则的支持不仅限于标记类型。

*   [*Ada 编程语言：面向对象编程 (OOP)*](http://www.adacore.com/adaanswers/about/ada)概述了历史观点。在标记类型出现之前，Ada 被认为是*基于对象的*，对数据抽象、封装、消息传递、模块化和继承具有强大的支持；标记类型扩展了对多态性的支持，[后来的添加](http://www.adaic.org/resources/add_content/standards/05rat/html/Rat-2.html)改进了该功能。

*   [*Ada 95 和 Java 的面向对象特性的*](http://www.adacore.com/knowledge/technical-papers/a-comparison-of-the-object-oriented-features-of-ada-95-and-java/)比较提供了与（可能）更熟悉的语言的详细比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T11:28:43.647

你确定你不只是想嵌套一些记录吗？

```
 type Base is abstract new Parent.Parent_Type with record
      X : Float;
   end record; 
```

...

```
type child_rec is 
  X : integer;
end record; 
```

...

```
 type Child is new Bases.Base with record
      C : Child_Rec;
   end record; 
```

这将允许您参考

```
My_Base.X; 
```

和

```
My_Base.C.X; 
```

当然，这也可以在没有任何 OO 特性的情况下完成......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T08:56:27.323

`Base`必须被标记，因为你不能说`is abstract new Parent.Parent_Type`除非`Parent.Parent_Type`被标记，这意味着任何派生类型，例如`Base`必须也是。

问题是，正如您所拥有的，任何可以看到的代码都`Child`可以看到两个`X`s；一进`Base`一进`Child`。编译器不会让你模棱两可；当其他人阅读您的代码并看到`My_Child.X`时，他们怎么会知道`X`您的意思？

解决此问题的一种方法是完整声明`Base`私有，因此只有一种可见的可能性`My_Child.X`：

```
package Bases is
   type Base is abstract new Parent.Parent_Type with private;
private
   type Base is abstract new Parent.Parent_Type with record
      X : Float;
   end record;
end Bases;

with Bases;
package Children is
   type Child is new Bases.Base with record
      X : Integer;
   end record;
end Children; 
```*

# jquery - jQuery timepicker 插件来限制 end_time 字段

> ID：12869592
> 
> 赞同：2
> 
> 时间：2012-10-13T03:10:36.447
> 
> 标签：jquery, jquery-ui, datetimepicker, timepicker

我在 2 个具有 #start_time 和 #end_time id 的文件上使用 jQuery timepicker 插件（ [https://github.com/trentrichardson/jQuery-Timepicker-Addon ）。](https://github.com/trentrichardson/jQuery-Timepicker-Addon)我希望#end_time 必须更大或从#start_time 的时间开始。我尝试了下面的代码，但我不擅长 jQuery。

```
$(function() {
$('#start_time').timepicker({ 
    onClose: function(timeText, inst) {
        if ($('#end_time').val() != '') {
            var testStartTime = $('#start_time').timepicker('getTime');
            var testEndTime = $('#end_time').timepicker('getTime');
            if (testStartTime > testEndTime)
                $('#end_time').timepicker('setTime', testStartTime);
        }
        else {
            $('#end_time').val(timeText);
        }
    },
    onSelect: function (selectedTime){
        $('#end_time').timepicker('option', 'minTime', $('#start_time').timepicker('getTime') );
    }
});
$('#end_time').timepicker({ 
    onClose: function(timeText, inst) {
        if ($('#start_time').val() != '') {
            var testStartTime = $('#start_time').timepicker('getTime');
            var testEndTime = $('#end_time').timepicker('getTime');
            if (testStartTime > testEndTime)
                $('#start_time').timepicker('setTime', testEndTime);
        }
        else {
            $('#start_time').val(timeText);
        }
    },
    onSelect: function (selectedTime){
        $('#start_time').timepicker('option', 'maxTime', $('#end_time').timepicker('getTime') );
    }
});
}); 
```

我有两个时间输入 start_time 和 end_time。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:31:35.427

```
 var startDateTextBox = $('#dialog_missionAdd input[name=scheduleStarttime]');
        var endDateTextBox = $('#dialog_missionAdd input[name=scheduleEndtime]');

        startDateTextBox.timepicker({ 
            defaultValue: "00:00",
            timeFormat: "HH:mm",
            onClose: function(dateText, inst) {
                if (endDateTextBox.val() != '') {
                    var testStartTime = startDateTextBox.datetimepicker('getDate');
                    var testEndTime = endDateTextBox.datetimepicker('getDate');
                    if (testStartTime > testEndTime) {
                        endDateTextBox.timepicker('setDate', testStartTime); }
                }
                else {
                    endDateTextBox.val(dateText);
                }
            },
            onSelect: function (selectedDateTime) {
                endDateTextBox.datetimepicker('option', 'minDate', startDateTextBox.datetimepicker('getDate') );
            }
        });

        endDateTextBox.timepicker({ 
            defaultValue: "00:00",
            timeFormat: "HH:mm", 
            onClose: function(dateText, inst) {
                if (startDateTextBox.val() != '') {
                    var testStartTime = startDateTextBox.datetimepicker('getDate');
                    var testEndTime = endDateTextBox.datetimepicker('getDate');
                    if (testStartTime > testEndTime) {
                        startDateTextBox.timepicker('setDate', testEndTime); }
                }
                else {
                    startDateTextBox.val(dateText);
                }
            },
            onSelect: function (selectedDateTime) {
                startDateTextBox.datetimepicker('option', 'maxDate', endDateTextBox.datetimepicker('getDate') );
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T04:42:00.210

I have modified few thing and its working now. Here is the code

```
<script>
$(document).ready(function () {

$('#start_time').timepicker({ 
    timeFormat: "hh:mm TT",
    ampm: true,
    hourMin: 8,
    hourMax: 18,
    onClose: function(dateText, inst) {
        if ($('#end_time').val() != '') {
            var testStartTime = $('#start_time').datetimepicker('getDate');
            var testEndTime = $('#end_time').datetimepicker('getDate');
            if (testStartTime > testEndTime) {
                $('#end_time').timepicker('setDate', testStartTime); }
        }
        else {
            $('#end_time').val(dateText);
        }
    },
    onSelect: function (selectedDateTime){
        if (testStartTime > testEndTime) {
        $('#end_time').datetimepicker('option', 'minDate', $('#start_time').datetimepicker('getDate') );
        }
    }
});

$('#end_time').timepicker({ 
    timeFormat: "hh:mm TT",
    ampm: true,
    hourMin: 8,
    hourMax: 18,    
    onClose: function(dateText, inst) {
        if ($('#start_time').val() != '') {
            var testStartTime = $('#start_time').datetimepicker('getDate');
            var testEndTime = $('#end_time').datetimepicker('getDate');
            if (testStartTime > testEndTime) {
                $('#start_time').timepicker('setDate', testEndTime); }
        }
        else {
            $('#start_time').val(dateText);
        }
    },
    onSelect: function (selectedDateTime){
        if (testStartTime > testEndTime) {
        $('#start_time').datetimepicker('option', 'maxDate', $('#end_time').datetimepicker('getDate') );
        }
    }
});

});
</script> 
```

Thanks for help.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T04:17:31.847

请尝试这个**工作演示**：http : [//jsfiddle.net/fMnw8/](http://jsfiddle.net/fMnw8/)

这个怎么运作：

*   `end_time`在您选择之前，它不允许用户选择`start_time`
*   然后，它检查了`AM`&`PM`匹配和进一步的条件。

这会给你足够的提示来玩。

希望它适合你的事业`:)`

**代码**

```
$(function() {
    $('#start_time').timepicker({
        timeFormat: 'hh:mm TT',
        ampm: true,
        hour: 10,
        onSelect: function(selectedTime) {
            sHours = parseInt(selectedTime.substring(0, 2));
            sMins = parseInt(selectedTime.substring(3, 6));
            sAmpm = selectedTime.substring(6, 8);

            if (sAmpm == 'PM') {
                sHours = sHours + 12;
            }

            $('#end_time').remove();
            start_val = $('#start_time').val();
            $('<input id="end_time" value="' + start_val + '"/>').timepicker({
                timeFormat: "hh:mm TT",
                hourMin: sHours,
                sMinutes: sMins,
                ampm: true,
                hour: 10,
                onSelect: function(selectedTime) {
                    eHours = parseInt(selectedTime.substring(0, 2));
                    eMins = parseInt(selectedTime.substring(3, 6));
                    eAmpm = selectedTime.substring(6, 8);

                    if (eAmpm == sAmpm) {
                        if (sHours > eHours || sMins > eMins) {
                            alert('Sorry -Time is greater then start time');
                            $('#end_time').val("");
                            return false;
                        }
                    }
                }
            }).insertAfter('#start_time');
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T03:56:02.663

浏览[https://stackoverflow.com/a/2694937/243639](https://stackoverflow.com/a/2694937/243639)即可开始使用。特别感兴趣的是包含`$('#endDate').datepicker("option", 'minDate', new Date(dateText));`. 您可以在 onSelect 函数中为一个时间选择器使用新日期来设置另一个的 minDate（或 maxDate）。

timepicker 是另一个 SO 帖子中提到的 jQuery datepicker 的扩展，因此该解决方案也应该适用于 timepicker。

# javascript - 从多个文本字段填充锚链接

> ID：12869594
> 
> 赞同：-1
> 
> 时间：2012-10-13T03:11:25.377
> 
> 标签：javascript, string, dom-events

我尝试填充几个文本字段以成为这样的东西`<a href="check.php?name=john doe&group=metallica">Check</a>`

下面是我从[这里](https://stackoverflow.com/questions/4089472/populating-a-textarea-from-several-textfields)修改的脚本，但这个脚本只显示在 textarea 内，以及如何在锚链接内显示并生成类似`<a href="check.php?name=john doe&group=metallica">Check</a>`.

```
<div id="textBoxContainer">
    <input type="text" id="name" onkeyup="UpdateTextArea();" name="name" />  
    <input type="text" id="group"  onkeyup="UpdateTextArea();" name="group" />  
</div>  
<textarea id="textAreaResult"></textarea>

<a href="check.php?" id="link_check">Check</a>

<script type="text/javascript">
    function UpdateTextArea() {
        var textBoxContainerDiv = document.getElementById("textBoxContainer");
        var textboxes = textBoxContainerDiv.getElementsByTagName("input");
        var finalResult = "";
        var textAreaFinalResult = document.getElementById("textAreaResult");

        for (var i = 0; i < textboxes.length; i++) {
            finalResult = finalResult + textboxes[i].id + "=" + textboxes[i].value + "&";
        }

        textAreaFinalResult.value = finalResult;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:42:46.550

如果你想定位一个锚标签而不是文本区域，那么显然你需要相应地改变它：

```
<a id="hrefResult" href="check.php">link</a> 
```

然后在您的`updateTextArea`函数中，您需要定位锚点`href`而不是文本区域的`value`. 还有一些其他的优化可以在那里进行，例如制作一个名称/值对的数组，然后`join`对它们进行 a ，这样你就不会得到尾随`&`等。

```
function UpdateTextArea() {
    var textBoxContainerDiv = document.getElementById("textBoxContainer");
    var textboxes = textBoxContainerDiv.getElementsByTagName("input");
    var length = textboxes.length;
    var target = document.getElementById("hrefResult");
    var params = [];
    var baseref = 'check.php';

    for (var i = 0; i < length; i++) {
        params.push(textboxes[i].id + "=" + textboxes[i].value);
    }
    target.href = baseref + '?' + params.join('&');
} 
```

什么鬼，这是整个事情的一个[小提琴。](http://jsfiddle.net/ultranaut/unMsn/)

由于不再涉及 textarea ，因此更改函数本身的名称可能是有意义的，但我把它留给你做。

# php - 如何使用 PHP 从目录中删除所有 .txt 文件

> ID：12869601
> 
> 赞同：8
> 
> 时间：2012-10-13T03:13:24.687
> 
> 标签：php, unlink

我正在尝试使用 php 脚本从目录中删除所有文本文件。

这是我尝试过的......

```
<?php array_map('unlink', glob("/paste/*.txt")); ?> 
```

当我运行它时，我没有收到错误，但它没有完成这项工作。

有这个片段吗？我不知道还能尝试什么。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-13T03:15:35.067

您的实施工作您需要做的就是使用`Use full PATH`

例子

```
$fullPath = __DIR__ . "/test/" ;
array_map('unlink', glob( "$fullPath*.log")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T09:35:40.863

我稍微扩展了提交的答案，以便您可以灵活地递归地取消链接位于下方的文本文件，因为这通常是这种情况。

```
// @param  string  Target directory
// @param  string  Target file extension
// @return boolean True on success, False on failure

function unlink_recursive($dir_name, $ext) {

    // Exit if there's no such directory
    if (!file_exists($dir_name)) {
        return false;
    }

    // Open the target directory
    $dir_handle = dir($dir_name);

    // Take entries in the directory one at a time
    while (false !== ($entry = $dir_handle->read())) {

        if ($entry == '.' || $entry == '..') {
            continue;
        }

        $abs_name = "$dir_name/$entry";

        if (is_file($abs_name) && preg_match("/^.+\.$ext$/", $entry)) {
            if (unlink($abs_name)) {
                continue;
            }
            return false;
        }

        // Recurse on the children if the current entry happens to be a "directory"
        if (is_dir($abs_name) || is_link($abs_name)) {
            unlink_recursive($abs_name, $ext);
        }

    }

    $dir_handle->close();
    return true;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T03:23:12.370

您可以修改下面的方法，但要小心。确保您有权删除文件。如果一切都失败了，发送一个 exec 命令并让 linux 去做

```
static function getFiles($directory) {
    $looper = new RecursiveDirectoryIterator($directory);
    foreach (new RecursiveIteratorIterator($looper) as $filename => $cur) {
        $ext = trim($cur->getExtension());
        if($ext=="txt"){
           // remove file: 
        }
    }
    return $out;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-15T13:28:02.947

我修改了提交的答案并制作了自己的版本，

我在其中创建了将在当前目录及其所有子级目录中递归迭代的函数，

并且它将取消所有带有扩展名的文件`.txt`或`.[extension]`您想要从**所有目录、子目录及其所有子级目录**中删除的任何文件的链接。

我用过： [`glob()`](https://www.php.net/manual/en/function.glob.php)来自 php 文档：

> glob() 函数根据 libc glob() 函数使用的规则搜索所有匹配模式的路径名，这类似于普通 shell 使用的规则。

我使用**`GLOB_ONLYDIR`了标志，因为它只会遍历目录**，因此只获取目录并从该目录取消链接所需的文件会更容易。

```
<?php

//extension of files you want to remove.
$remove_ext = 'txt';
//remove desired extension files in current directory
array_map('unlink', glob("./*.$remove_ext"));

// below function will remove desired extensions files from all the directories recursively.
function removeRecursive($directory, $ext) {

    array_map('unlink', glob("$directory/*.$ext"));

    foreach (glob("$directory/*",GLOB_ONLYDIR) as $dir) {
            removeRecursive($dir, $ext);
    }
    return true;
}

//traverse through all the directories in current directory 
foreach (glob('./*',GLOB_ONLYDIR) as $dir) {
    removeRecursive($dir, $remove_ext);
}

?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-29T10:26:18.893

对于任何想知道如何删除的人（例如：公共目录下的所有 PDF 文件），您可以这样做：

```
array_map('unlink', glob( public_path('*.pdf'))); 
```

# java - 从 FileReader 中找出文件名

> ID：12869604
> 
> 赞同：1
> 
> 时间：2012-10-13T03:14:09.717
> 
> 标签：java, filenames, filereader

对于我正在编写的作业，我们必须包含打印语句，告诉我们正在处理哪个文件。但是，在与文件相关的方法中传递的所有内容都是 FileReader。

文件名取自 main 方法中的字符串 args，然后此方法创建文件阅读器并将其传递给方法。分配规则意味着我们**无法编辑主要方法或方法标题。**

所以我的问题是有没有办法通过文件阅读器回溯以获取字符串名称？

**编辑**：与讲师交谈，他说；'使用字符串参数'，那些只传递给读者和作者的。

**EDIT2**：讲师搞砸了，最终允许我们编辑主要方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:17:06.450

我会用它自己的静态 void main(String[]) 编写另一个类。该方法将捕获并打印参数，然后调用原始的 main() 方法。从技术上讲，这并不违反规则。

# jquery-validate - jQuery 验证插件：在每个必需的输入框上使用不同的多语言错误消息

> ID：12869613
> 
> 赞同：0
> 
> 时间：2012-10-13T03:16:25.757
> 
> 标签：jquery-validate

我正在使用[**jQuery 验证插件**](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)，假设我有 3 个输入框，它们是必填字段。

```
<input type="text" name="firstname" class="required" />
<input type="text" name="lastname" class="required" />
<input type="text" name="email" class="required" /> 
```

我想有不同的错误信息，所以我配置如下：

```
$("#myForm").validate({
    messages: {
        firstname: {
            required: 'Please enter firs tname'
        },
        lastname: {
            required: 'Please enter last name'
        },
        email: {
            required: 'Please enter email'
        }
    },
    submitHandler: function(form) {
        form.submit();
    }
}); 
```

但是，现在我想在每个需要的输入框上都有不同的多语言错误消息，所以我尝试如下配置，结果不起作用。

```
$("#myForm").validate({
    messages: {
        firstname: {
            required: window.lang.currentLang == 'en' ? 'Please enter email' : '請輸入電子郵件地址'
        }
    },
    submitHandler: function(form) {
        form.submit();
    }
}); 
```

有人可以建议将插件配置为具有不同的多语言错误消息的方式。

谢谢

# ruby - 迭代一个数组，一次 n 项

> ID：12869614
> 
> 赞同：50
> 
> 时间：2012-10-13T03:16:28.760
> 
> 标签：ruby

我有一个数组：

```
[1,2,3,4,5,6,7,8,9,0] 
```

我想一次迭代 3 个，这会产生

```
1,2,3  and  4,5,6  and  7,8,9   and   0 
```

在 Ruby 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-10-13T03:20:42.207

您正在寻找[#each_slice](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)。

```
data.each_slice(3) {|slice| ... } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-13T03:21:58.833

使用[.each_slice](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice)

```
[1,2,3,4,5,6,7,8,9,0].each_slice(3) {|a| p a} 
```

# ruby-on-rails - Ruby on Rails：处理属于不同模型的表单

> ID：12869615
> 
> 赞同：0
> 
> 时间：2012-10-13T03:16:50.883
> 
> 标签：ruby-on-rails

我有两个模型：`user`和`profil`e，我想使用相同的表格向它们输入数据。

我在`user`视图和控制器中工作。我有一个列的工作表`user`。但是，当涉及到配置文件模型时，如何从用户视图访问它？

用户.rb：

```
class User < ActiveRecord::Base
    has_one :profile                
#....#
end 
```

配置文件.rb：

```
class Profile < ActiveRecord::Base
  # attr_accessible :title, :body
    belongs_to :user
end 
```

用户/new.html.erb：

```
<%= form_for @profile do |f| %>
    <% if @profile.errors.any? %>
    <div class="error_messages">
      <h2>Form is invalid</h2>
      <ul>
        <% for message in @profile.errors.full_messages %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
        <%= f.label :height, "My height is: (cm)" %><%= f.select :height, options_for_select(140..220) %><br>
        <%= f.submit "Next" %>
<% end %> 
```

当我这样做时，我收到以下错误消息：

```
undefined method `model_name' for NilClass:Class 
```

编辑：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

private

def current_user
  @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user
end 
```

跟踪 nil:NilClass 的未定义方法“配置文件”

```
app/controllers/users_controller.rb:27:in `new'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.8) lib/active_support/callbacks.rb:414:in `_run__4507413321759690622__process_action__4445552126419236557__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__4338139503461093137__call__2795110861990608974__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/home/tim/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/home/tim/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/home/tim/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:28:05.673

你需要做这样的事情，

```
<% form_for [current_user, @profile] |f| do %>
  #define the fields here
<% end %> 
```

但是在 users_controller - new action 中，你需要做这样的事情

```
def new
  @profile = current_user.profile.new
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:22:37.417

在呈现该视图的控制器中，您需要传入配置文件对象以供视图使用。这可能就像放入控制器 `@profile = @user.profile`的方法一样简单。`new`

# php - 更新记录时发生codeigniter数据库错误

> ID：12869616
> 
> 赞同：0
> 
> 时间：2012-10-13T03:17:09.203
> 
> 标签：php, database, codeigniter, record

我有一个错误

```
Error Number: 1054

Unknown column 'Nama_Material_Jasa' in 'field list'

UPDATE `ms_material_jasa` SET `Kode_Kategori_Material_Jasa` = 'KKMJ004', `Nama_Material_Jasa` = 'batuasdf' WHERE `Kode_Kategori_Material_Jasa` = 'KKMJ004'

Filename: C:\wamp\www\QBA\system\database\DB_driver.php

Line Number: 330 
```

这是我的更新模型

```
function update($getid,$getnama)
{
    $data = array('Kode_Kategori_Material_Jasa' => $getid,'Nama_Material_Jasa' => $getnama);
    $this->db->where('Kode_Kategori_Material_Jasa', $getid);
    $this->db->update('ms_material_jasa', $data); 
} 
```

这是我的控制器

```
 function ubah()
{
    $getid = $this->input->post('kkmj');
    $getnama = $this->input->post('nmj');
    $data['pesan'] = $getid.' berhasil diubah ! ';
    $data['title'] = 'QB Ubah Kategori Material';

    $this->m_kategorimaterial->update($getid,$getnama);
    //echo $getid.$getnama; //it returns KKMJ005newVal , like i want

    $this->load->view('head',$data);
    $this->load->view('v/vkategorimaterial',$data);

} 
```

当我回显`$getid`和`$getnama`变量时，它`KKMJ005Newval`在控制器上返回所以没有问题，我相信它与模型有关，

我该如何解决这个问题？

表名是`ms_kategori_material`，它有 2 个字段，`Kode_Kategori_Material_Jasa`并且`Nama_Material_Jasa`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:28:32.923

你说你的表名是`ms_kategori_material`，但你的代码是

```
$this->db->update('ms_material_jasa', $data); 
```

所以尝试将其更改为：

```
$this->db->update('ms_kategori_material', $data); 
```

# javascript - 计数字符/单词的功能不起作用

> ID：12869617
> 
> 赞同：0
> 
> 时间：2012-10-13T03:17:20.937
> 
> 标签：javascript, html

```
<!DOCTYPE HTML>

<html>
<head>
    <title> Javascript - stuff </title>
    <script type="text/javascript">
    <!--
    function GetCountsAll( Wordcount, Sentancecount, Clausecount, Charactercount )
    {
        var TextString = document.getElementById("Text").innerHTML;
        var Wordcount = 0;
        var Sentancecount = 0;
        var Clausecount = 0;
        var Charactercount = 0;

        // For loop that runs through all characters incrementing the variable(s) value each iteration
        for (i=0; i < TextString.length; i++);
        if (TextString.charAt(i) == " " = true)
            Wordcount++;
        return Wordcount;

        if (TextString.charAt(i) = "." = true)
            Sentancecount++;                    
        Clausecount++;
        return Sentancecount;

        if (TextString.charAt(i) = ";" = true)
        Clausecount++;  
        return Clausecount;
    }

    -->
    </script>
</head>

<body>

    <div id="Text">
        It is important to remember that XHTML is a markup language; it is not a programming language. The language only describes the placement and visual appearance of elements arranged on a page; it does not permit users to manipulate these elements to change their placement or appearance, or to perform any "processing" on the text or graphics to change their content in response to user needs. For many Web pages this lack of processing capability is not a great drawback; the pages are simply displays of static, unchanging, information for which no manipulation by the user is required. Still, there are cases where the ability to respond to user actions and the availability of processing methods can be a great asset. This is where JavaScript enters the picture.
    </div>
    <input type = "button" value = "Get Counts" class = "btnstyle" onclick = "GetCountsAll()"/>
    <br/>       
    <span id= "Charactercount"> </span> Characters <br/>
    <span id= "Wordcount"> </span> Words <br/>
    <span id= "Sentancecount"> </span> Sentences <br/>
    <span id= "ClauseCount"> </span> Clauses <br/>

</body>
</html> 
```

我是一名学生，还在学习 JavaScript，所以请原谅任何可怕的错误。该脚本旨在计算文章中的字符、单词、句子和从句的数量。简单地说，它只是不起作用。我已经尝试了很多方法来让它为我工作，并且得到了大量不同的错误，但无论如何我都无法让它工作。请帮忙！（顺便说一句，我知道我拼错了句子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:30:59.990

从 中删除分号`for (i=0; i < TextString.length; i++);`。这打破了循环。

将括号放在`{}`周围，以便每次看到句号时它们都会增加。目前每次只增加句子。条款在文本末尾增加。
`Sentancecount++;
Clausecount++;`

我通常也会在`if`s 之后使用括号。它提高了可读性，如果您可以轻松阅读，您可以看到代码在做什么。

接下来，您只能希望从该方法返回一个。如果有意义的话，让第一个方法调用第二个方法。设置它，以便您获得一些变量，然后将它们打印出来。

hth

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:32:07.293

您可以使用`split`字符串的方法。像这样：

```
WordCount = TextString.split(' ').length;
Sentancecount = TextString.split('.').length;
Clausecount = TextString.split(';').length;
Charactercount = TextString.length; 
```

这样，您就不再需要`for`循环了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T03:56:01.353

好吧，你有几个问题。

首先，您希望您的 for 循环在每次迭代中要执行的代码周围都有大括号。

```
for (i=0; i < TextString.length; i++) {
    if (TextString.charAt(i) == " " = true)
        Wordcount++;
} 
```

（我假设 WordCount 应该在循环之外（但无论哪种方式都不正确））

接下来，您不处理这些返回值。

可行的方法`return`是您可以将变量设置为函数的结果。

例如：函数 x() { return 2; }

```
var i = 1;
var q = i + x(); // Add the result of the function to i
alert(q); // This will display 3 
```

因此，通过调用 return，您将该值发送回调用函数的位置，但您从未使用它。

此外，调用`return`会立即退出函数。如果您想继续处理，您不希望这样做。我建议您为这三个值中的每一个创建变量并将结果存储到其中。然后在脚本中处理之后，您可以将一个 div 的 innerHTML 传递给它们。

这是一个可以帮助您的示例：

```
<html>
<head>
    <title>Example Javascript</title>
    <script type="text/javascript">

    function myFunction()
    {
        var text = Array(8).join(parseInt('')) + ' Batman!';
        var element = document.getElementById("result");

        element.innerHTML = text;
    }

    </script>
</head>
<body>
The output from our function is: <div id="result"> </div>
<br />
<button type="button" onclick="myFunction()">Run</button>
</body>
</html> 
```

我想指出，有一些非常简单的方法可以解决这个问题，但这似乎是家庭作业，或者至少是一种学习经验，这就是为什么我要让你走上正确的道路，而不仅仅是给你一个直接的答案。你很近！我的建议是坚持下去！

# backbone.js - Backbone.js 模型和视图的“类图”之类的东西？

> ID：12869618
> 
> 赞同：0
> 
> 时间：2012-10-13T03:17:27.137
> 
> 标签：backbone.js, uml, diagram, rubymine

我希望能够看到像 RubyMine 的模型图这样的东西，但对于我项目的 Backbone.js 部分。任何人都知道做类似事情的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:49:56.710

Eclipse 有一个名为[jsuml](http://jsuml.gaertner-network.de/)的 UML 插件。我自己没有这方面的经验，通过查看其网页上的描述，您的代码似乎应该以某种方式进行注释。（例如 JSDoc）

# ios6 - ios6上用户数据的钥匙串

> ID：12869623
> 
> 赞同：0
> 
> 时间：2012-10-13T03:17:53.207
> 
> 标签：ios6

我有以下代码用于在钥匙串中存储数据：

```
KeychainItemWrapper *keychainItem = [[KeychainItemWrapper alloc] initWithIdentifier:MounzaKeyName accessGroup:nil];

[keychainItem setObject:txtPassword.text forKey:kSecValueRef];
[keychainItem setObject:txtLogin.text forKey:kSecValueData]; 
```

但是，每当我运行它时，我都会得到以下信息：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Couldn't update the Keychain Item.' 
```

有什么我想念的吗？我试图调查这个......它在用户登录后立即发生。我试图将用户名和密码存储在代码中......

网上有人说我应该使用标准密钥，我是：

[使用 KeyChainItemWrapper 在 KeyChain 中存储密钥](https://stackoverflow.com/questions/7117885/storing-keys-in-keychain-with-keychainitemwrapper)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:24:36.993

您需要为每个值使用一个钥匙串包装器。您试图将两个值放入一个包装器中。创建两个具有两个不同标识符的包装器。在这两种情况下，您都为 kSecValueData 键设置了一个值。

# c++ - 如何使用 C++ 上的引用删除对象

> ID：12869631
> 
> 赞同：0
> 
> 时间：2012-10-13T03:20:01.317
> 
> 标签：c++, oop, object, reference

我有一个项目规范（所以我不能改变它），我在其中创建了一个函数

```
const mat4& GetView() const; 
```

mat4 对象是在这个函数上创建的：

```
mat4* a = new mat4();
mat4 &ret = *a;
return ret; 
```

稍后我会想删除它。但是，一旦我离开了 GetView 方法，我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T03:23:00.033

取地址：

```
const mat4 & x = GetView();
delete &x; 
```

（我假设它`operator&`没有超载。如果是，你需要做一些更复杂的事情。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:47:14.653

我强烈怀疑这里只有三个合理的选择：

*   您误读了规范，`GetView`不应该返回`const mat4&`
*   您误读了规范，并且`GetView`应该返回对现有对象的引用而不是新创建的对象
*   项目规范存在严重缺陷，确实值得推动此事。

当然，在最后一点上，你真的应该在开始推动之前尽可能多地收集理由。

# ruby-on-rails - Omniauth Cucumber 测试 - 路由错误

> ID：12869633
> 
> 赞同：3
> 
> 时间：2012-10-13T03:20:15.383
> 
> 标签：ruby-on-rails, cucumber, omniauth

我正在尝试在 Cucumber 中测试我的 Facebook 登录按钮。我正在使用 Omniauth。

这是我所拥有的`/features/support/env.rb`

```
Before do
  OmniAuth.config.test_mode = true
  OmniAuth.config.add_mock(:facebook, {
    provider: 'facebook',
    uid: '1259910065',
    info: {
      name: 'Test Name',
      email: 'test@example.com'
    }
  })
end

After do
  OmniAuth.config.test_mode = false
end 
```

但是，当我尝试`/auth/facebook`在测试中访问时，我得到：

```
No route matches [GET] "/auth/facebook" (ActionController::RoutingError) 
```

更新：

我也尝试`require 'omniauth'`在 env.rb 文件中，但我不确定这是必要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T17:51:38.350

我遇到了这个问题，我解决了在我的 routes.rb 中更改一些行

```
match 'auth/:provider/callback', to: 'sessions#create', via: [:get, :post] 
```

如果您[在此处](https://github.com/intridea/omniauth#integrating-omniauth-into-your-application)阅读omniauth 说要在routes.rb 中添加这一行`get '/auth/:provider/callback', to: 'sessions#create'`，但回调将请求方法设置为使用名为_method 的变量进行发布。

我希望这有帮助

# assembly - 无法理解汇编命令“加载有效地址”

> ID：12869637
> 
> 赞同：13
> 
> 时间：2012-10-13T03:20:40.857
> 
> 标签：assembly, x86

> **可能重复：**
> [LEA 指令的目的是什么？](https://stackoverflow.com/questions/1658294/whats-the-purpose-of-the-lea-instruction)
> [LEA 指令？](https://stackoverflow.com/questions/4534617/lea-instruction)

所以我正在研究类的二进制炸弹分配（它有很多阶段，你必须逐步完成程序的汇编代码并找到一个密码来解码“炸弹”）。

我无法完成当前阶段，因为我不懂 lea 命令。我读过它通常用于算术，但我只是不明白它是如何做到的。

我特别看的命令是

```
lea -0x18(%ebp), %ebx
lea -0x8(%ebp), %esi 
```

其次是

```
mov -0x4 (%ebx), %eax
add -0x8(%ebx), %eax 
```

在下一行中，比较 eax 和 ebx，如果它们相等，则程序继续，否则炸弹爆炸。

我已经对这个阶段有了足够的了解，知道它需要 6 个数字，前两个是 0 和 1。之后它会进行一些操作以确定序列的其余部分是否正确（我假设 lea 命令是什么我需要解码才能找到下一个数字）。

现在我找不到的是 -0x18 特别指的是什么。负号是做什么的？它表示减法吗？它在 ebp 之前看起来是 18 个字节吗？

感谢您在这里的任何帮助。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-13T04:01:11.983

LEA 指令使用与 MOV 指令相同的算法计算内存地址。但与 MOV 指令不同的是，LEA 指令只是将计算出的地址存储在其目标寄存器中，而不是加载该地址的内容并存储它。

考虑您的第一个 LEA 指令：

```
lea -0x18(%ebp), %ebx 
```

该指令计算 -0x18 和 EBP 寄存器中的值之和。它得到一些结果 S。它将 S 存储在 EBX 寄存器中。

在加数-0x18 中，“-”为负号，“0x”表示为十六进制常数。所以加数是负数 18 [16]，即 -24 [10]。所以这条 LEA 指令只是简单地从 EBP 中的值减去 24 并将结果存储在 EBX 中。

将此与您的 MOV 指令进行对比：

```
mov -0x4(%ebx), %eax 
```

该指令计算 -0x4 和 EBX 寄存器中的值之和。它得到一些结果 S。然后它在内存中的地址 S 处获取字的值，得到一些值 M。它将 M 存储在 EAX 寄存器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:00:23.443

该`LEA`指令将使用特定寻址模式评估的地址加载到目标寄存器中。考虑以下两种情况：

```
lea -0x18(%ebp), %ebx
mov -0x18(%ebp), %ebx 
```

第一条指令将计算为相对于 ebp 当前值的偏移量 -0x18 的地址加载到 ebx 中。第二条指令将这个地址的内存内容加载到 ebx 中。

负偏移意味着位置低于寄存器中的地址，正偏移意味着位置高于寄存器中的地址。通常用底部的零地址来表示内存，并且在图中地址向顶部增长：

```
0xFFFFFFFC   !_______!
    ....
+0x4(ebp) -> !_______! 
(ebp) ->     !_______! 
-0x4(ebp) -> !_______! 
    ....
0x00000000   !_______! 
```

# android - 套接字可以在模拟器上工作，但不能在 Android 设备上工作

> ID：12869640
> 
> 赞同：2
> 
> 时间：2012-10-13T03:20:47.883
> 
> 标签：android, emulation

我有一个奇怪的问题，几天来我认为我的问题是我的代码，但是我变得懒惰并且没有将我的手机连接到计算机上进行测试，这意味着它使用模拟器进行测试和 HOLY CRAP在模拟器上连接的套接字没有问题，但在设备上总是出现套接字超时。我在清单中设置了互联网权限，并且能够从我的手机 ping 我想用终端模拟器连接到的服务器......有什么想法吗？

# ruby - 如何在恢复模式下运行 ruby SAX 解析器？

> ID：12869649
> 
> 赞同：3
> 
> 时间：2012-10-13T03:22:41.160
> 
> 标签：ruby, xml, nokogiri, sax, libxml2

我有一个相当大的 XML 文档，我想从中提取一些信息。它太大而无法保存在内存中，所以我认为 SAX 解析器是合适的。

不幸的是，生成 XML 文档的人没有仔细阅读规范，因此它包含一些非法的 XML 实体（如`&#8;`）。不过，除此之外，据我所知，这很好。

对于任何依赖于 libxml 的库，[此类错误将禁用未来的 SAX 处理，除非它们在恢复模式下运行](http://www.opensource.apple.com/source/libxml2/libxml2-3/libxml2/parser.c)

```
/*
 * [ WFC: Legal Character ]
 * Characters referred to using character references must match the
 * production for Char. 
 */
if (IS_CHAR(val)) {
    return(val);
} else {
    ctxt->errNo = XML_ERR_INVALID_CHAR;
    if ((ctxt->sax != NULL) && (ctxt->sax->error != NULL))
        ctxt->sax->error(ctxt->userData,
                         "xmlParseCharRef: invalid xmlChar value %d\n",
                         val);
    ctxt->wellFormed = 0;
    if (ctxt->recovery == 0) ctxt->disableSAX = 1;
}
return(0); 
```

然而，两者`LibXML::XML::SaxParser`似乎都被`Nokogiri::XML::SAX`硬编码为*不能*在恢复模式下运行，所以一旦我遇到一个非法实体，解析就会停止（前者抛出错误，而后者只是停止显示元素开始/结束）。

有没有办法可以在恢复模式下运行其中一个（或另一个 SAX 解析器）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T12:01:09.183

好吧，我找到了一个我不喜欢的解决方案。使用，我可以在运行时为被包装的值`Inline::C`创建一个访问器。`recovery``xmlParserCtxt``Nokogiri::XML::SAX::ParserContext`

```
unless LIBXML2_HEADERS and File.directory? LIBXML2_HEADERS
  STDERR.puts "Unable to locate libxml2 headers, try setting them manually using the LIBXML2_HEADERS environment variable."
  exit -1
end
class Nokogiri::XML::SAX::ParserContext
  inline do |builder|
    builder.add_compile_flags("-I" + LIBXML2_HEADERS)
    builder.include "<libxml/parser.h>"
    builder.struct_name = 'xmlParserCtxt'
    builder.accessor :recovery, 'int'
  end
end

# ...

Nokogiri::XML::SAX::Parser.new(NXSDoc.new).parse( File.open("content.rdf.u8", "r:UTF-8") ) do |ctxt|
  ctxt.recovery = 1 # turn recovery mode on
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T01:24:43.987

[Ox](http://ohler.com/ox/)是另一个 ruby​​ XML 解析器，但它不用`libxml2`作后端。 [它与 Nokogiri speedwise 相比相当不错](http://www.reddit.com/r/ruby/comments/12b25u/benchmark_ox_vs_nokogiri_and_sax_vs_dom_parsing/)。

而且它对合法的 XML 实体毫不关心，因此在恢复模式下运行不是问题。

修改 SAX 示例：

```
require 'stringio'
require 'ox'

class Sample < ::Ox::Sax
  def start_element(name); puts "start: #{name}";        end
  def end_element(name);   puts "end: #{name}";          end
  def attr(name, value);   puts "  #{name} => #{value}"; end
  def text(value);         puts "text #{value}";         end
end

io = StringIO.new(%{
<top name="sample">
  <middle name="second">
    <bottom name="third">&#8;</bottom>
  </middle>
</top>
})

handler = Sample.new()
Ox.sax_parse(handler, io)
# outputs
# start: top
#   name => sample
# start: middle
#   name => second
# start: bottom
#   name => third
# text &#8;
# end: bottom
# end: middle
# end: top 
```

# java - 使用生成器或类似的 Java 模板类？

> ID：12869652
> 
> 赞同：3
> 
> 时间：2012-10-13T03:23:17.263
> 
> 标签：java, templates, generics, code-generation

是否有一些库或生成器可用于从单个模板生成多个模板化 java 类？

显然，Java 本身确实有一个泛型实现，但是由于它使用类型擦除，所以在很多情况下它还不够。

例如，如果我想制作一个像这样的自增长数组：

```
 class EasyArray {
      T[] backingarray;
 } 
```

（其中 T 是原始类型），那么这是不可能的。

对于任何需要数组的东西都是如此，例如高性能模板化矩阵和向量类。

应该可以编写一个代码生成器，它接受一个模板类并为不同的类型生成多个实例，例如“double”和“float”以及“int”和“String”。有没有已经存在的东西可以做到这一点？

编辑：请注意，使用 Object 数组不是我想要的，因为它不再是原语数组。基元数组非常快，并且只使用 sizeof(primitive) * length-of-array 的空间。对象数组是指向 Double 对象或类似对象的指针/引用数组，它们可能分散在内存中的各处，需要垃圾收集、分配，并暗示访问的双重间接。

编辑3：

下面是显示原始数组和盒装数组之间性能差异的代码：

```
int N = 10*1000*1000;
double[]primArray = new double[N];
for( int i = 0; i < N; i++ ) {
    primArray[i] = 123.0;
}
Object[] objArray = new Double[N];
for( int i = 0; i < N; i++ ) {
    objArray[i] = 123.0;
}
tic();
primArray = new double[N];
for( int i = 0; i < N; i++ ) {
    primArray[i] = 123.0;
}
toc();
tic();
objArray = new Double[N];
for( int i = 0; i < N; i++ ) {
    objArray[i] = 123.0;
}
toc(); 
```

结果：

```
double[] array: 148 ms
Double[] array: 4614 ms 
```

差远了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T09:31:49.870

提出了以下草案方式：

我们创建一个类，使用占位符 type `TemplateArgOne`，并添加一个用于促进解析的注解：

```
@GenerateFrom(EndlessArray.class)
public class EndlessArray {
    TemplateArgOne[] values;
    int size = 0;
    int capacity;
    public EndlessArray() {
        capacity = 10;
        values = new TemplateArgOne[capacity];
    }
    public void reserve(int newcapacity ) {
        if( newcapacity > capacity ) {
            TemplateArgOne[] newvalues = new TemplateArgOne[newcapacity];
            for( int i = 0; i < size; i++ ) {
                newvalues[i] = values[i];
            }
            values = newvalues;
            capacity = newcapacity;
        }
    }
    public void add( TemplateArgOne value ) {
        if( size >= capacity - 1 ) {
            reserve( capacity * 2);
        }
        values[size] = value;
    }
    public void set( int i, TemplateArgOne value ) {
        values[i] = value;
    }
    public TemplateArgOne get( int i ) {
        return values[i];
    }
} 
```

我们将 TemplateArgOne 定义为一个空类，所以上面的代码编译得很好，可以在 Eclipse 中毫无问题地编辑它：

```
public class TemplateArgOne {
} 
```

现在，我们创建一个新类来实例化模板类，并添加几个注释来告诉生成器我们要实例化哪个类，以及我们想要什么类型`TemplateArgOne`：

```
@GenerateFrom(root.javalanguage.realtemplates.EndlessArray.class)
@GenerateArg(from=TemplateArgOne.class,to=double.class)
public class EndlessArrayDouble {

} 
```

然后我们运行生成器，传入我们的源代码目录，以及实例化类的名称，即`EndlessArrayDouble`：

```
public static void main(String[] args ) throws Exception {
    new RealTemplateGenerator().go("/data/dev/machinelearning/MlPrototyping", EndlessArrayDouble.class);
} 
```

快！当我们转到 EndlessArrayDouble 类时，它已经被我们的代码填充了！：

```
package root.javalanguage.realtemplates;

import root.javalanguage.realtemplates.RealTemplateGenerator.*;

@GenerateArg(from=TemplateArgOne.class,to=double.class)
@GenerateFrom(root.javalanguage.realtemplates.EndlessArray.class)
public class EndlessArrayDouble {
    double[] values;
    int size = 0;
    int capacity;
    public EndlessArrayDouble() {
        capacity = 10;
        values = new double[capacity];
    }
    public void reserve(int newcapacity ) {
        if( newcapacity > capacity ) {
            double[] newvalues = new double[newcapacity];
            for( int i = 0; i < size; i++ ) {
                newvalues[i] = values[i];
            }
            values = newvalues;
            capacity = newcapacity;
        }
    }
    public void add( double value ) {
        if( size >= capacity - 1 ) {
            reserve( capacity * 2);
        }
        values[size] = value;
    }
    public void set( int i, double value ) {
        values[i] = value;
    }
    public double get( int i ) {
        return values[i];
    }
} 
```

注意，如果多次运行，不修改模板类，那么实例化类java文件不会被修改，即不会触发Eclipse中的冗余文件重载。

生成器代码：

```
//Copyright Hugh Perkins 2012, hughperkins -at- gmail
//
//This Source Code Form is subject to the terms of the Mozilla Public License, 
//v. 2.0\. If a copy of the MPL was not distributed with this file, You can 
//obtain one at http://mozilla.org/MPL/2.0/.

package root.javalanguage.realtemplates;

import java.lang.annotation.*;
import java.util.*;

public class RealTemplateGenerator {
    @Target(ElementType.TYPE)
    @Retention(RetentionPolicy.SOURCE)
    public @interface GenerateFrom {
        Class<?> value();
    }
    @Target(ElementType.TYPE)
    @Retention(RetentionPolicy.SOURCE)
    public @interface GenerateArg {
        Class<?> from();
        Class<?> to();
    }
public final static BufferedReader newBufferedReader(String filepath ) throws Exception {
    FileInputStream fileInputStream = new FileInputStream( filepath );
    InputStreamReader inputStreamReader = new InputStreamReader(fileInputStream);
    BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
    return bufferedReader;
}

public final static BufferedWriter newBufferedWriter( String filepath ) throws Exception {
    FileOutputStream fileOutputStream = new FileOutputStream(filepath);
    OutputStreamWriter outputStreamWriter = new OutputStreamWriter(fileOutputStream);
    BufferedWriter bufferedWriter = new BufferedWriter(outputStreamWriter);
    return bufferedWriter;
}

public final static ArrayList<String> readFileAsLines(String filepath ) throws Exception {
    ArrayList<String> lines = new ArrayList<String>(40000);

    BufferedReader bufferedReader = newBufferedReader(filepath);

    String line = bufferedReader.readLine();
    int numlines = 0;
    while( line != null ) {
        lines.add(line.substring(0, line.length() ));
        line = bufferedReader.readLine();
        numlines++;
    }
    bufferedReader.close();
    return lines;
}

public final static void writeFileFromLines( String filepath, ArrayList<String> lines ) throws Exception {
    BufferedWriter bufferedWriter = newBufferedWriter(filepath);
    for( String line : lines ) {
        bufferedWriter.write(line + "\n");
    }
    bufferedWriter.close();
}

    void go( String sourcedirectory, Class<?> targetclass ) throws Exception {
        String targetclassfilepath = sourcedirectory + "/" + targetclass.getCanonicalName().replace(".","/") + ".java";
        ArrayList<String> initialLines = FileHelper.readFileAsLines(targetclassfilepath);
        String fromclassname = "";
        HashMap<String,String> argOldToNew = new HashMap<String, String>();
        ArrayList<String> generatelines = new ArrayList<String>();
        for( String line : initialLines ) {
            if( line.startsWith("@GenerateFrom")){
                fromclassname = line.split("\\(")[1].split("\\.class")[0];
            }
            if( line.startsWith("@GenerateArg")) {
                String fromclass= line.split("from=")[1].split("\\.")[0];
                String toclass = line.split("to=")[1].split("\\.")[0];
                argOldToNew.put(fromclass,toclass);
                generatelines.add(line);
            }   
        }
        Class<?> targettype = this.getClass().forName(fromclassname); 
        String fromclassfilepath = sourcedirectory + "/" + targettype.getCanonicalName().replace(".","/") + ".java";
        ArrayList<String> templateLines = FileHelper.readFileAsLines(fromclassfilepath );
        ArrayList<String> generatedLines = new ArrayList<String>();
        for( int i = 0; i < templateLines.size(); i++ ){
            String line = templateLines.get(i);
            if( !line.startsWith("@GenerateFrom") && !line.startsWith("@GenerateArg")) {
                for( String oldarg : argOldToNew.keySet() ) {
                    line = line.replace(oldarg, argOldToNew.get(oldarg));
                }
                line = line.replace(targettype.getSimpleName(), targetclass.getSimpleName());
            } else if( line.startsWith("@GenerateFrom") ) {
                for( String generateline : generatelines ) {
                    generatedLines.add(generateline);
                }
            }
            generatedLines.add(line);
        }
        boolean isModified = false;
        if( initialLines.size() != generatedLines.size() ) {
            isModified = true;
        } else {
            for(int i = 0; i < initialLines.size(); i++ ) {
                if( !initialLines.get(i).equals(generatedLines.get(i))) {
                    isModified = true;
                    break;
                }
            }
        }
        if( isModified ) {
            FileHelper.writeFileFromLines(targetclassfilepath, generatedLines);
            System.out.println("Generated " + targetclassfilepath );
        } else {
            System.out.println("No change to " + targetclassfilepath );         
        }
    }
    public static void main(String[] args ) throws Exception {
        new RealTemplateGenerator().go("/data/dev/machinelearning/MlPrototyping", EndlessArrayDouble.class);
    }
} 
```

# java - 将 Owl 类转换为 java 类或 xml

> ID：12869654
> 
> 赞同：1
> 
> 时间：2012-10-13T03:23:59.693
> 
> 标签：java, xml, xsd, ontology, owl

我想知道是否有任何工具可以转换 owl 本体 xml 模式或 xml 文档。或者有什么方法可以为给定的 owl 类生成一个 java 类。

假设我有 owl 类文档，具有两个数据类型属性 hasAuthor 和 hasName。我可以为这个 owl 类创建 java 类吗？?

java类应该是这样的

```
public class document {

    string hasAuthor;
    string hasName;

} 
```

有没有支持这种转换的api。

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:30:27.387

您可以使用 JAXB 实现此行为。这是 JAXB API 的主要文章：

*   [XML 绑定的 Java 体系结构 (JAXB)](http://www.oracle.com/technetwork/articles/javase/index-140168.html)

从 XML 文件创建实例对象的过程称为 Unmarshalling。这是关于这个问题的另一个很好的教程：

*   [JAXB 教程](http://www.vogella.com/articles/JAXB/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-22T20:58:29.673

我偶然发现了[http://wiki.yoshtec.com/jaob](http://wiki.yoshtec.com/jaob)，这似乎是将 OWL 定义映射到 java 类的项目。

# php - JSON在PHP中返回空值

> ID：12869660
> 
> 赞同：0
> 
> 时间：2012-10-13T03:24:40.487
> 
> 标签：php, json

这是我有的两个脚本

脚本 1：

```
 <?

include('config.php');
$json = $_POST['payload'];
$fine = var_dump($json);
$secret = "78f12668216b562a79d46b170dc59f695070e532";
$obj = json_decode($json, true);
$fp = fopen('data.txt', 'w');
fwrite($fp, $json);
fwrite($fp, $fine);
fclose($fp);

if(sha1($json . $secret) == $_POST['signature']) {
    $conversion_id = md5(($obj['amount']));
    echo "OK";
    echo $conversion_id;
    mysql_query("INSERT INTO completed (`id`,`uid`,`completedid`) VALUES ('','".$obj['uid']."','".$conversion_id."')");
} else {

}
?> 
```

脚本 2：

```
<?
$json = $_POST['payload'];
$secret = "78f12668216b562a79d46b170dc59f695070e532";
$obj = json_decode($json);

if(sha1($json+$secret) == $_POST['signature']) {
    print "OK";
} else {

}
?> 
```

这里的问题是它返回所有 NULL 值。我不是 JSON 专家，所以我不知道这里发生了什么。我真的无法测试它，因为信息来自外部网站，发送如下信息：

```
{
  payload: {
    uid: "900af657a65e",
    amount: 50,
    adjusted_amount: 25
  },
  signature: "4dd0f5da77ecaf88628967bbd91d9506"
} 
```

该站点允许我测试脚本，但由于 json_decode 提供 NULL 值，它不会通过签名块。

根据谷歌浏览器的开发工具，当我尝试从他们的服务器测试脚本时它发送的响应是`{"error":"The start uri returned a non-200 response."}`它给我的所有信息，它没有说明正在发送的内容，只是收到

有什么方法可以让我自己测试吗？或者这个脚本中是否有我刚刚查看过的简单错误？

编辑

我设置了一个文件来写入正在传递的信息，这就是他们的服务器发送的信息

```
{"job_id":1337,"job_title":"CrowdFlower test job","amount":30,"uid":"inspire","adjusted_amount":50} 
```

起初有斜线，所以我添加`stripslashes()`到`$json`变量中，显然摆脱了斜线，但是一旦它击中`json_decode()`它就不会拉信息传递的信息有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:28:56.663

当我尝试[验证](http://jsonlint.com/)您的 JSON 时，我收到以下错误：

```
Parse error on line 1:
{    payload: {        u
-----^
Expecting 'STRING', '}' 
```

您是要连接还是添加？

```
if(sha1($json+$secret) == $_POST['signature']) 
```

如果是连接，将替换为`+`as`.`是`.`PHP 中的连接运算符。

```
if(sha1($json . $secret) == $_POST['signature']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:39:23.517

**已对此答案进行了完整编辑**

您需要做的是获取通过 POST 请求发送给您的 JSON 数据，并使用有效负载和密钥验证签名。JSON 是作为原始 HTTP POST 数据提供给您的（*我不确定这是否是正确的术语*），因此无法通过 PHP 的`$_POST`全局访问。所以这里是解决方案：

```
$myJSON = file_get_contents('php://input');

$decodedJSON = json_decode($myJSON);

if (sha1($decodedJSON['payload'] . $secret) == $decodedJSON['signature']) {
  /* 
     If you need to do some database actions or such prior to sending the 
     response 200, you can do it here. Just don't output anything to the 
     screen before.
  */
  header("HTTP/1.1 200 OK");
}
else {
  // sha1 test failed, do something else here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T03:30:17.347

看起来 ($json+$secret) 正在弄乱您的数据结构。尝试 $json['secret'] = NUM​​BER 或 $json->secret = NUM​​BER

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T03:31:38.963

取决于外部站点如何发送数据，但我的猜测是

`$_POST['payload']` **已经是一个数组**，你不需要解码它。只是`var_dump($_POST)`用来检查它。

例如，数据是由外部站点使用 javascript 发送的，如下所示：

```
var data = {
  payload: {
    uid: "900af657a65e",
    amount: 50,
    adjusted_amount: 25
  },
  signature: "4dd0f5da77ecaf88628967bbd91d9506"
};

$.ajax({
  url: ....,
  data: data,
  //....

}); 
```

# mysql - 复杂的MYSQL选择

> ID：12869662
> 
> 赞同：1
> 
> 时间：2012-10-13T03:25:18.257
> 
> 标签：mysql, sql, select

我的 MYSQL 数据库中有不同的表，我需要创建一个 SELECT 查询，该查询将在选择一行之前检查某些值。

它基本上是 3 个表（新闻、标签和 news_tags）。

1.  news 包含有关新闻的信息。
2.  标签 关于标签的信息。
3.  news_tags 存储新闻使用哪个标签。

这是我的 3 个不同的表（当然是简化的）

为了显示：

**消息：**

```
id | status
1  | 1
2  | 1
3  | 0 
```

**标签：**

```
tag_id | tag_name
1      | name 1 
2      | name 2 
```

**新闻标签：**

```
id | news_id | tag_id
1  | 1       | 1
2  | 1       | 2
3  | 2       | 1
4  | 3       | 1
5  | 3       | 2 
```

现在，起初我想知道每个标签被使用了多少次。所以我想出了这个查询

```
SELECT tags.tag_name, news_tags.tag_id, COUNT(*) as count 
FROM news_tags 
LEFT JOIN tags 
ON tags.tag_id = news_tags.tag_id 
GROUP BY news_tags.tag_id 
ORDER BY count DESC 
```

这给了我以下输出

```
tag_name | count
name 1   | 3 
name 2   | 2 
```

现在我的问题是我不想计算那些`news.status = 0`; 因此，如果我们看一下我的示例，在`news`表格中，带有 的行`id = 3`具有`status = 0`. `count`不应该在`news_id = 3`表中的位置生效`news_tags`。

基本上所需的输出应该是

```
tag_name | count
name 1   | 2 
name 2   | 1 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:28:53.883

您需要将其与`news`表连接起来，以便查询`status`

```
SELECT tags.tag_name, news_tags.tag_id, COUNT(*) as count 
FROM    news_tags 
        LEFT JOIN tags 
            ON tags.tag_id = news_tags.tag_id 
        LEFT JOIN news
            ON news.id = news_tags.news_id
WHERE   news.status = 1
GROUP BY news_tags.tag_id 
ORDER BY count DESC 
```

# javascript - javascript不断循环

> ID：12869663
> 
> 赞同：0
> 
> 时间：2012-10-13T03:25:33.073
> 
> 标签：javascript, cordova, for-loop, scope

从[这里](https://stackoverflow.com/questions/12850823/turn-a-div-into-a-button-dynamically)继续......因为问题已经显着改变（在我看来）

这是我的代码

```
 for (var i = 0; i < len; i++) {
            (function () {
                var queryid = results.rows.item(i).id; //sql primary key
                var divid = "#" + queryid; //assigned id to divs
                var pressTimer;
                $(divid).mouseup(function(){ //func to handle tap + hold
                clearTimeout(pressTimer)
                // Clear timeout
                return false;
                }).mousedown(function(){
                // Set timeout
                pressTimer = window.setTimeout(function() {
                alert(divid);
                $(".somediv").show();
                $("#anotherdiv").hide();
                $("#button").on("click", function(){
                    var db = window.openDatabase("mydb", "1.0", "mydb", 200000);
                    db.transaction(editrow);    
                    function editrow(tx){
                        var value1 = $("#inputbox1").val();
                        var value2 = $("#inputbox2").val();
                        tx.executeSql("UPDATE mydb SET column1 = " + value1 + ", column2 = " + value2 + " WHERE id = " + queryid);
                        alert(divid); ********
                        successCB();} //query function
                })
                },1000)
                return false; 
                });
                })();
            } 
```

如果我单击 div 并编辑值，则它们已成功提交...但是，如果之后我选择另一个 div 来更新其字段，则新值将同时更新为所选 div 以及前一个选定的分区..

例如我选择 div1 并更新值一切正常

如果之后我选择 div2，那么 div1 和 div2 的值都会更新为 div2 的最新值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:48:04.097

您不止一次绑定事件。在 div 上的每次 mousedown 中，您都将单击事件绑定到按钮。当您在 jquery 中调用“on”或“click”时，您没有**分配事件处理程序，而是****添加**了一个处理程序。

我不明白您是否需要调用 setTimeout。

试试这个方法：

```
var lastClickedId = null;
function editrow(tx) {
    var value1 = $("#inputbox1").val();
    var value2 = $("#inputbox2").val();
    var queryid = lastClickedId;
    tx.executeSql("UPDATE mydb SET column1 = " + value1 + ", column2 = " + value2 + " WHERE id = " + queryid);
    alert(queryid);
    lastClickedId = null;

    successCB();
} //query function

$("#button").on("click", function(){

    if(lastClickedId != null)
    {
        var db = window.openDatabase("mydb", "1.0", "mydb", 200000);
        db.transaction(editrow);
    }
});

for (var i = 0; i < len; i++) {

    (function () {
        var queryid = results.rows.item(i).id; //sql primary key
        var divid = "#" + queryid; //assigned id to divs

        $(divid).click(function(){
            lastClickedId = queryid;
        });
    })();
} 
```

**更新：**

当您使用*bind(func)*、*on(func)*、*click(func)*等在 jquery 中绑定元素时，您正在注册函数*func*以在事件发生时调用。您可以注册任意数量的功能。因此，例如，如果您这样做：

```
$("#div1").on("click", function() { alert("hello"); });
$("#div1").on("click", function() { alert("world"); }); 
```

单击时它将显示两个警报。这是因为 jquery 管理事件的方式。它调用您在事件中传递的每个函数。

*要使用on*分离您附加到该元素（或元素）的所有点击事件，只需执行以下操作：

```
$("#div1").off("click"); 
```

在“纯”javascript中，您可以这样做：

```
var div1 = document.getElementById("div1");

div1.onclick = function() { alert("hello"); };
div1.onclick = function() { alert("world"); }; 
```

在第二个示例中，只会调用一个警报，因为您直接为函数 onclick 分配了一个值。并删除事件：

```
div1.onclick = null; 
```

# mysql - MySQL 5.6.6-m9 32 位无法在 64 位 Linux 上编译

> ID：12869665
> 
> 赞同：2
> 
> 时间：2012-10-13T03:26:21.880
> 
> 标签：mysql, linux, makefile, cmake

我正在我的 multilib CLFS 机器上使用 CMake 编译 32 位 MySQL 5.6.6-m9。64 位编译没有问题，但 32 位失败：

```
/sources/mysql-5.6.6-m9/mysys/lf_alloc-pin.c: In function 'lf_pinbox_init':
/sources/mysql-5.6.6-m9/mysys/lf_alloc-pin.c:118:3: error: size of array 'compile_time_assert' is negative 
```

lf_alloc-pin.c 的第 118 行是：

```
compile_time_assert(sizeof(LF_PINS) == 64); 
```

导致此失败的原因是将 -m32 添加到 CXX 和 CPP 标志。如果我删除 -m32，它编译得很好，但会编译 64 位库。我需要 32 位库。

有没有什么办法解决这一问题？从 C 文件中删除 compile_time_assert 行会很糟糕吗？

# javascript - jQuery Ajax 加载不工作

> ID：12869668
> 
> 赞同：2
> 
> 时间：2012-10-13T03:27:07.087
> 
> 标签：javascript, jquery, ajax

这是我的代码：

### `test.html`

```
<html>
  <head>
    <title>test</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js">
    </script>
    <script>
      $(document).ready(function(){
        $(window).bind('hashchange', function(){
          $('#result').load('test2.html', function(){
            alert('Load was performed.');
          });
        });
      });
    </script>
  </head>
<body>
  <a href="#Test1">Test 1</a>
  <a href="#Test2">Test 2</a>
  <div id="result"></div>
</body>
</html> 
```

### `test2.html`

```
<h3>This is content from test2.html</h3> 
```

我想使用 window.hash 来检测要加载的特定页面。例如，如果用户去`http://localhost/test.html#test2`.

页面中的主容器（结果）将对 test2.html 执行 Ajax 加载调用以获取内容。我无法让这个简单的代码工作。如果有人能引导我朝着正确的方向前进，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:38:01.747

试试下面的：

```
window.onhashchange = function () {
    $('#result').load('test2.html', function(){
        alert('Load was performed.');
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:41:39.077

### 两件事情：

1.  首先看看是否`$(window).bind('hashchange', function(){})`正常工作。尝试给出一些虚拟代码，如下所示：

    ```
    $(window).bind('hashchange', function(){
        alert("Hash changed!");
    }); 
    ```

2.  其次，正如[xdazz](https://stackoverflow.com/users/762073/xdazz)所说，尝试结合使用 JavaScript 和 jQuery 代码：

    ```
    window.onhashchange = function () {
        $('#result').load('test2.html', function(){
            alert('Load was performed.');
        });
    }; 
    ```

3.  我能够得到更新以及得到改变。让我确认几件事。

    1.  您正在加载 jQuery 库吗？
    2.  你是在服务器上运行它还是只是通过`file:///`协议调用？有时后者不起作用。
    3.  我在我的本地服务器中使用了这个代码，与你拥有的东西相同。这个对我有用！

        ```
        $(document).ready(function(){
          $(window).bind('hashchange', function(){
            $('#result').load('test2.html', function(){
              alert('Load was performed.');
            });
          });
        });​ 
        ```

    ### 小提琴：http: [//jsfiddle.net/2BrUG/](http://jsfiddle.net/2BrUG/)

# java - 开源许可证，哪一个？

> ID：12869670
> 
> 赞同：2
> 
> 时间：2012-10-13T03:27:28.997
> 
> 标签：java, open-source, licensing

最近我创建了一个 java 类“自定义布局管理器”，我想让它开源并分发它。所以它不是真正的“产品”，也不是“完整的程序”。

以下是权限和规范列表：

*   您可以自由使用和修改，但有一些限制（包和类名称应保持不变，如果您想要另一个名称，请扩展该类。- .jar 文件，项目名称可以更改）。
*   您无需分享您的修改。
*   你不能修改然后卖给别人。
*   您可以将它用作您的商业软件的一部分
    （例如：
    **如果**您创建了一个使用我的“布局”的即时消息传递程序，因为您的“核心业务”不是“布局”，而是 msg 程序，这没关系.
    **如果**：您通过扩展它创建了另一个“布局”，添加了一些功能并出售它，那就不行了。）
*   您不能删除作者的姓名或作者的网站地址。
*   您可以自由捐款。:D

基本上，它是免费的，没关系，因为你给我学分而不用它赚钱。
我想它可能有点复杂，因为您“商业”使用它，但不能单独出售。

几乎所有的license我都找过了，最接近的是MIT license，但是上面说可以卖，所以我不太想用这个。

有没有符合我所说的所有这些权限的许可证？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T03:31:10.820

有几个可能适合您的需求，但请回想一下标准的“我不是律师”免责声明。

似乎最有可能满足您的目标的两个是 BSD 或 MIT。请记住，您始终保留代码的版权。这些许可证使某人可以自由地将您的作品与信用结合起来，但您不会失去您的权利。与我合作过的大多数公司都可以使用此类许可证，但出于知识产权问题将远离 GPL。

那里有很多...我通常更喜欢使用更常见的，因为它们通常可以满足我的需求。这是一个很好的资源，可以阅读一些具体的差异： http: [//opensource.org/licenses/alphabetical](http://opensource.org/licenses/alphabetical)（它可能会有点枯燥）。

区分“自由”软件和“开源”软件也很重要。其语义引起宗教斗争。这里有一篇关于区别的好文章：[http ://www.gnu.org/philosophy/free-software-for-freedom.html](http://www.gnu.org/philosophy/free-software-for-freedom.html)

# ruby-on-rails - 使用设计：无时间限制可确认？

> ID：12869673
> 
> 赞同：1
> 
> 时间：2012-10-13T03:28:13.737
> 
> 标签：ruby-on-rails, devise, devise-confirmable

我在我的应用程序中使用 Devise 进行身份验证。我不想在用户注册时要求电子邮件确认，但如果用户希望应用程序向他们发送电子邮件更新，我确实需要它。这可以通过设计的内置 :confirmable 功能实现吗？我找到了设置用户无需确认即可登录多长时间的设置，但我基本上想将其设置为“永远”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:36:55.817

查看[https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb)。您可能可以`confirmation_period_valid?`通过返回 always来覆盖`true`。

或者，也许您可​​以将您的设置更改为类似`10000.years.from_now`，这对于“永远”来说可能是一个足够好的估计，也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-15T18:46:27.130

寻找`config/initializers/devise.rb`_

```
 # ==> Configuration for :confirmable
  # A period that the user is allowed to access the website even without
  # confirming their account. For instance, if set to 2.days, the user will be
  # able to access the website for two days without confirming their account,
  # access will be blocked just in the third day. Default is 0.days, meaning
  # the user cannot access the website without confirming their account.
  # config.allow_unconfirmed_access_for = 2.days 
```

将其设置为 1000.years。然后在您的`email_updates`方法中，调用[`#confirmed?`](http://www.rubydoc.info/github/plataformatec/devise/master/Devise/Models/Confirmable)以测试用户是否已确认其帐户。如果没有，请将它们发送到页面以重新发送确认链接，因为它现在可能已经过期。

# c++ - C ++中的减法双倍

> ID：12869679
> 
> 赞同：0
> 
> 时间：2012-10-13T03:29:00.123
> 
> 标签：c++, floating-point, subtraction

我正在做一个家庭作业，我需要使用 McLaurin 系列来评估 cosh(x) 和 sin(x)。每次程序运行时，用户输入一个从 0 到 10 的数字来指定要评估系列的术语数。然后，用户输入 x 的值以进行评估。一旦用户点击输入，将计算并打印出该系列的 10 个增量。此外，我还必须找到确切的错误。为此，我为 sinh 和 cosh 创建了几个不同的函数，用于执行特定项的计算。例如：下面的代码将术语评估为 10!。

```
void cosFunction10(double power, double value)
{
     double cosh_x = 0;
     double math_cosh = 0;
     double exact_error;
     double x;

     if (value < 0)
         x = -0.1*0;

     for (int i = 0; i < 11; ++i)
     {
         cosh_x = (1.0 + ((x*x)/(2.0*1.0)) + ((x*x*x*x)/(4.0*3.0*2.0*1.0)) + ((x*x*x*x*x*x)/(6.0*5.0*4.0*3.0*2.0*1.0)) + ((x*x*x*x*x*x*x*x)/(8.0*7.0*6.0*5.0*4.0*3.0*2.0*1.0)) + ((x*x*x*x*x*x*x*x*x*x)/(10.0*9.0*8.0*7.0*6.0*5.0*4.0*3.0*2.0*1.0)));
         math_cosh = cosh(x);
         exact_error = (math_cosh - cosh_x);

         cout << setiosflags(ios::scientific) << setprecision(3) << x << "\t";
         cout << setiosflags(ios::scientific) << setprecision(5) << cosh_x << "\t";
         cout << math_cosh << "\t";
         cout << exact_error << endl;
         x = x + (0.1*value);
     }
 } 
```

如果我运行程序并输入以下值：10（第 n 项）和 -6（x 的值）。

这就是我应该得到的：（第二个增量）

```
 x                Series            Exact (using the cmath functions)    Exact % Error
 -6.000e-001      1.18547e+000      1.18547e+000                        0.00000e+000 
```

对于确切的错误，接下来的 2 个输出将是相同的，直到我达到第 4 个增量

```
 x                Series            Exact (using the cmath functions)    Exact % Error
 -1.800e+100      3.10747e+000      3.10747e+000                        -7.67243e-005 
```

当我运行我的代码时，我没有得到上述结果：（第二次增量）

```
 x                Series            Exact (using the cmath functions)    Exact % Error
-6.000e-001      1.18547e+000      1.18547e+000                         4.55325e-012 
```

所以似乎出了点问题，因为我的确切错误与我得到的错误甚至不一样。我知道可能会有稍微不同的值，这是预期的，但不会达到这个程度。

我们欢迎所有的建议，

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T03:50:02.350

必须有这样的差异，因为`cosh(x)`根据下面给出的公式以不同的方式定义：

![在此处输入图像描述](../Images/57df24223979cfa38818232372fb9252.png)

请参阅[此处](http://www.codecogs.com/reference/computing/c/math.h/cosh.php)了解更多详情。

但是，如果您基于 MacLaurin 级数的计算来计算数量，问题是您没有以正确的方式累积值。以下实现可能是您真正需要的：

```
void cosFunction(double x)
{
    double cosh_x = 1;
    double math_cosh;
    double exact_error;
    double factorial = 1;
    double x_pow = 1;

    for (int i = 0; i < 11; ++i) {
            cosh_x = x_pow/factorial;
            x_pow = x*x*x_pow; 
            factorial = factorial* (2 * i + 1) * (2 * i + 2);
    }

    math_cosh = cosh(x);
    exact_error = (math_cosh - cosh_x);
    cout << setiosflags(ios::scientific) << setprecision(5) << exact_error << endl;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:26:19.033

在数学意义上，正确答案可能是零。但在实际计算意义上，它不会为零：

想象一下，如果您正在以固定的十进制精度进行算术运算，例如 8 位数字。您将表示`1.0/3.0`为`.33333333`。但那会`3.0 * (1.0/3.0)`变成`3.0 * .33333333`哪个会是`.999999999`。因此，虽然在数学意义上，`1.0 - (3.0 * (1.0 / 3.0))`应该为零，具有固定的小数精度，但您很可能会得到类似`.00000001`.

相同的规则适用于固定二进制精度，这是您使用`double`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:13:19.647

正如评论中所揭示的，您得到的错误实际上非常小，小于 10 ^(-11)。此外，您必须考虑到您计算 cosh 的方式和内置函数完成的方式并不完全相同。这两种方法最终都是近似值，但它们的工作方式不同，因此它们产生的舍入误差和近似误差会略有不同。

您不能期望错误为“flat 0”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T06:12:19.350

```
//Part of the problem is that in the line after the 'for' nothing changes (typo?.) The
//following works for x = 0.5`
//Note that the loop works properly for all terms including the first which is 1.0

#include <iostream>
#include <math.h>

using namespace std;

int factorial(int n)
{
    return (n == 1 || n == 0) ? 1 : factorial(n - 1) * n;
}

int main()
{
    // use taylor series to approximate cosh(x) - use 7 terms
    double x = 0.5;
    double top, bot;
    double s = 0.0;

    for (int i = 0; i < 7; i++)
    {
        top = pow(x,double(i)*2.0);
        bot = double(factorial(i*2));
        s  += (top / bot);
    }
    cout << "myCosh     " << s << endl;
    cout << "cosh       " << cosh(x)<< endl;
    cout << "difference " << fabs(s - cosh(x)) << endl;
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T04:36:01.840

我运行您的函数，`cout`操作修改如下：

```
cout << setiosflags(ios::fixed) << setprecision(12);
cout << "for x="<<x<<": "<<math_cosh<<" - "<<cosh_x<<" = "<<exact_error<<"\n"; 
```

我为 选择了我自己的值`value`，因为您没有说明您使用的是什么。

我得到以下结果，这证明了这一点`math_cosh`并且`cosh_x`不*一样*。您的问题似乎是您没有看到足够的数字来注意到它们是不同的。

```
for x=0.003233200000: 1.000005226796 - 1.000005226791 = 0.000000000005
for x=0.006466400000: 1.000020907237 - 1.000020907164 = 0.000000000073
for x=0.009699600000: 1.000047041489 - 1.000047041120 = 0.000000000369
for x=0.012932800000: 1.000083629824 - 1.000083628658 = 0.000000001166
for x=0.016166000000: 1.000130672624 - 1.000130669778 = 0.000000002846
for x=0.019399200000: 1.000188170381 - 1.000188164480 = 0.000000005901
for x=0.022632400000: 1.000256123697 - 1.000256112765 = 0.000000010932
for x=0.025865600000: 1.000334533282 - 1.000334514632 = 0.000000018650
for x=0.029098800000: 1.000423399955 - 1.000423370081 = 0.000000029875
for x=0.032332000000: 1.000522724646 - 1.000522679112 = 0.000000045534
for x=0.035565200000: 1.000632508392 - 1.000632441726 = 0.000000066667 
```

关于家庭作业，使用 Maclaurin 级数计算 cosh(x)： 你的函数，如所写，不是很精确，因为它只计算级数的前三个项`1 + 0 + x*x/2`。您不是在计算 x^n 或 n！超过 n=2。为了产生更精确的结果，您需要积累更多的系列术语 - 如下所示......

```
int NUMBER_OF_TERMS=10; // the number of terms to compute (including zero terms)
for ( int i=0; i<NUMBER_OF_TERMS; i++ )
   {
   cosh_x += (i%2==0?1:0)*term; // even derivatives are 1, odd derivatives are 0
   term *= x/(i+1); // apply incremental power and factorial
   } 
```

这仍然不能保证准确性。由于舍入误差，您无法确保完全匹配内置函数 cosh(x) ，除非您完全复制其算法。这两个函数都只会产生一个近似值，因为对于大多数输入值，纯数学输出将是一个超越数——而这样的数字不能在 a 中精确表示`double`。

您还应该记住，Maclaurin 级数是基于多项式的近似，在 附近最准确`x=0`。正如多项式的本质一样，不完整的求和最终可能（随着 x 远离 0）与正确答案非常迅速地偏离。这就是为什么在上面的示例输出中，对于较小的值，误差值较小`x`。

* * *

关于科学记数法与定点精度：

科学记数法向您显示数字的最重要的非零数字 - 即使这些数字从小数点右侧的 12 位开始。阅读科学记数法时，重要的是要注意后面的信息，`e`因为它描述了数字的真实大小。 `double`-precision 值可以存储大约 20 位十进制数字的真实信息。这对于进行许多重复计算很有用，但在比较两个数字是否相等时通常不是很有意义。

尽管这可能不在您的任务范围内，但您可以做的是限制差异的定点精度。以下是您可以如何执行此操作的示例：

```
const double PRECISION=1e-4; // indicates the number of fractional digits to keep
exact_error = round(exact_error/PRECISION)*PRECISION; // limit precision 
```

...或者只检查接近零的情况可能更简单...

```
if ( fabs(exact_error)<PRECISION/2 ) exact_error = 0; // close enough to zero 
```

# android - 如何更改 viewpagerindicator 选项卡上的选项卡背景？

> ID：12869689
> 
> 赞同：8
> 
> 时间：2012-10-13T03:31:25.883
> 
> 标签：android, colors, background, tabs, viewpagerindicator

我正在使用 Jake Wharton 的 ViewpagerIndicator 库。我将选项卡代码与 ActionBarSherlock 库结合使用。一切正常，但我正在尝试设置标签背景的样式，但不知道如何。**我想要一个带有深色标签和浅色片段（标签内容）的深色操作栏**。

我使用的基本主题是 Theme.Sherlock.Light.DarkActionBar。我通过使其成为设置选项卡属性（如文本颜色、指示器颜色等）的样式的父级来扩展此样式。这会导致深色操作栏、浅色选项卡和浅色片段。

我找不到任何会改变标签本身背景的东西。我可以更改它的唯一方法是将整个应用程序更改为黑暗（使用 Theme.Sherlock）。到目前为止，这是我的代码：

```
<style name="vpiTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="vpiTabPageIndicatorStyle">@style/CustomTabPageIndicator</item>
</style>

<style name="CustomTabPageIndicator" parent="Widget.TabPageIndicator">
    <item name="android:textColor">#FF000000</item>
    <item name="android:paddingTop">6dp</item>
    <item name="android:paddingBottom">6dp</item>
    <item name="android:paddingLeft">16dip</item>
    <item name="android:paddingRight">16dip</item>
    <item name="android:maxLines">2</item>
</style> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-08T13:28:07.510

由于 9-patch 可绘制对象大多是透明的，因此只需向整个 ViewPagerIndicator 添加背景颜色即可更改选项卡的颜色，如下所示：

```
<com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:background="#333333" /> 
```

这样您就可以继续使用基于 的主题`Theme.Sherlock.Light.DarkActionBar`，而无需创建新的可绘制对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T22:13:29.257

首先在你的项目中添加一个drawable，下面的那个叫做tab_indicator.xml：

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@android:color/black" />
<item android:state_focused="false" android:state_selected="true"  android:state_pressed="false" android:drawable="@android:color/white" />
<item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@android:color/black" />
<item android:state_focused="true" android:state_selected="true"  android:state_pressed="false" android:drawable="@android:color/white" />
</selector> 
```

然后以您的风格引用您的drawable：

```
<item name="android:background">@drawable/tab_indicator</item> 
```

这将使活动选项卡具有白色背景，而其他选项卡则为黑色。

# c++ - 在 C 程序中存储“二进制”数据类型

> ID：12869692
> 
> 赞同：3
> 
> 时间：2012-10-13T03:31:53.393
> 
> 标签：c++

我需要创建一个程序，将一个数字系统转换为其他数字系统。我在 Windows（Dev C++）中使用了 itoa，我唯一的问题是我不知道如何将二进制数转换为其他数字系统。所有其他数字系统转换相应地工作。这是否涉及使用 % 存储要转换的输入之类的东西？

这是我的工作片段：

```
case 2:
        {
            printf("\nEnter a binary number: ");
            scanf("%d", &num);
            itoa(num,buffer,8);
            printf("\nOctal        %s",buffer);
            itoa(num,buffer,10);
            printf("\nDecimal      %s",buffer);
            itoa(num,buffer,16);
            printf("\nHexadecimal  %s \n",buffer);
            break;
        } 
```

对于十进制我使用 %d，对于八进制我使用 %o，对于十六进制我使用 %x。什么是正确的二进制？感谢您未来的答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T23:42:04.217

您已经在内存中拥有二进制形式的数字。那些 %d、%o 和 %x 只是类似 printf 的函数的提示，它们知道如何解释参数并在十进制/八进制/十六进制表示之间转换它。printf 没有二进制格式。相反，您可以遍历所有单独的位，如下所示：

```
for(int i = 0; i < sizeof(num)*8; i++)
{
    printf("%u", !!(byte & (1 << i)));
}
printf("\n"); 
```

这将打印一个字节的所有位，从左边开始。

# php - 一个表的链式选择

> ID：12869696
> 
> 赞同：1
> 
> 时间：2012-10-13T03:32:30.630
> 
> 标签：php, mysql

我知道我正在以一种不寻常的方式处理这个问题，我见过的每个 tut 都使用多个表，但是由于我网站其他部分的工作方式，我想创建一个使用单个表操作的链式选择。

我的表结构是：

```
----------------------
|Catagory|SubCategory|
|01|cat1 |subcat1    |
|02|cat1 |subcat2    |
|03|cat2 |subcat1    |
|04|cat2 |subcat2    |
---------------------- 
```

我到目前为止的代码如下所示：

```
<tr>
    <td class="shadow"><strong>Category:</strong>   </td>
    <td class="shadow">
    <select id="category" name="category" style="width:150px">
        <option selected="selected" value="<?php echo $category ?>"><?php echo $category?></option>
        <?php
        include('connect.php');
        $result1 = mysql_query("SELECT DISTINCT category FROM categories")  
            or die(mysql_error());  

            while($row = mysql_fetch_array( $result1 )) {
            $category = $row['category'];
            echo "<option value='". $row['category'] ."'>". $row['category'] ."</option>";
            }
        ?>        
    </select>
   </td>
</tr>
<tr>
    <td class="shadow"><strong>Sub Category:</strong>   </td>
    <td class="shadow">
    <select id="sub_catgory" name="sub_category" style="width:150px;">
        <option selected="selected" value="<?php echo $sub_category ?>"><?php echo $sub_category ?></option>
        <?php
            include('connect.php');
            $result2 = mysql_query("SELECT sub_category FROM categories WHERE ")
                or die(mysql_error());

                while($row = mysql_fetch_array ($result2 )){
                echo "<option value='" . $row['sub_category'] . "'>". $row['sub_category']. "</option>";
        }

        ?>    
    </select>
    </td>           
</tr> 
```

在第二个选择中，我不确定如何陈述 WHERE 子句。我需要它来显示与第一次选择中选择的类别相同的子类别。

第 2 部分我将如何在其中包含 AJAX 以预加载数据，因此我不需要刷新页面。

有人可以帮我完成我在这里开始的工作，还是给我一个好的教程。

谢谢

# c - 搜索字符串 C

> ID：12869699
> 
> 赞同：1
> 
> 时间：2012-10-13T03:34:23.500
> 
> 标签：c, string, search, highlight

第一次在这里发帖，如果我搞砸了，我很抱歉。我需要搜索一个字符串并返回包含搜索数据的任何字符串，并突出显示搜索数据。

示例：如果我的初始字符串是：`Hi my name is`，我的搜索词是：`name`，那么输出应该是：`Hi my NAME is`

这是我编写的一个快速代码，它可以工作，但它只能工作一次。如果我尝试再次搜索它会出现故障。

我希望有人能提示我一个更好的方法来写这个，因为这段代码很恶心！

```
void search(char * srcStr, int n){
    int cnt = 0, pnt,i = 0; 
    char tmpText[500];
    char tmpName[500];
    char *ptr, *ptr2, *ptrLast;
    int num;

    while(*(node->text+cnt) != '\0'){ //finds length of string
        cnt++;
    }
    for(pnt = 0; pnt < cnt; pnt++){ //copies node->text into a tmp string
        tmpText[pnt] = *(node->text+pnt);
    }
    tmpText[pnt+1] = '\0';

        //prints up to first occurrence of srcStr
      ptr = strcasestr(tmpText, srcStr); 
        for(num = 0; num < ptr-tmpText; num++){
            printf("%c",tmpText[num]);
        }

      //prints first occurrence of srcStr in capitals
        for(num = 0; num < n; num++){
            printf("%c",toupper(tmpText[ptr-tmpText+num]));
      }

      ptr2 = strcasestr((ptr+n),srcStr);
        for(num = (ptr-tmpText+n); num < (ptr2-tmpText); num++){
            printf("%c",tmpText[num]);
        } 

        while((ptr = strcasestr((ptr+n), srcStr)) != NULL){
            ptr2 = strcasestr((ptr+n),srcStr);
        for(num = (ptr-tmpText+n); num < (ptr2-tmpText); num++){
            printf("%c",tmpText[num]);
        } 
        for(num = 0; num < n; num++){
                printf("%c",toupper(tmpText[ptr-tmpText+num]));
          }
          ptrLast = ptr;
      }
      //prints remaining string after last occurrence
        for(num = (ptrLast-tmpText+n); num < cnt; num++){ 
            printf("%c",tmpText[num]);
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:12:03.993

只是因为我很懒惰，而且没有符合多字节字符的先决条件（这使得这*变得*更加困难）。有更有效的方法，但除非有一个平台，`strupr()`否则`strlwr()`很难变得更简单。

注意：这考虑到搜索 txt 以混合大小写而不是严格的小写形式出现在源中的可能性。如果问题域被限制为仅替换精确的小写匹配，则也可以删除源副本，从而减少大约六行。

```
// search for lower case
void substlwr(char* text, const char* str)
{
    // dup strings for lower case  text and search content, 
    //  and upper case replacement text.
    size_t slen = strlen(str);
    char *lbase = strdup(text);
    char *lstr = strdup(str);
    char *ustr = strdup(str);
    char *found = lbase;
    char *p = NULL;

    // convert lowers and uppers
    for (p=lbase; p && *p; *p++ = tolower(*p));
    for (p=lstr; p && *p; *p++ = tolower(*p));
    for (p=ustr; p && *p; *p++ = toupper(*p));

    // replace all lowers with uppers
    while ((found = strstr(found, lstr)))
    {
        memcpy(text + (found-lbase), ustr, slen);
        found += slen;
    };

    free(lbase);
    free(lstr);
    free(ustr);
} 
```

示例调用如下所示：

```
int main(int argc, char *argv[])
{
    char text[] = "Hi! My Name is George.";
    substlwr(text, "name");
    printf("%s\n", text);
    return EXIT_SUCCESS;
} 
```

输出如下所示：

```
Hi! My NAME is George. 
```

# ruby-on-rails - 视图状态中的模型定义

> ID：12869702
> 
> 赞同：-1
> 
> 时间：2012-10-13T03:35:13.833
> 
> 标签：ruby-on-rails, ruby

在我的模型中的 ruby​​ on rails 项目中，我有一些定义。

```
class PlaySport < ActiveRecord::Base
  belongs_to :user
  belongs_to :sport

  def self.getLevel
  end  

  def self.check_play_sport(cuser_id,sport_id)
  end  

  def current_playing_sports
  end

  def all_played_sports
  end

end 
```

我抓住这样的关系

```
current_user.play_sports.current_playing_sports 
```

但我得到未定义的方法错误“current_playing_sports”

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:45:40.413

`#current_playing_sport`是 PlaySport 模型实例上的方法。`current_user.play_sports`将（根据命名判断）返回一组 PlaySport 实例。因此，您需要遍历它们并调用`#current_playing_sport`它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T03:48:57.360

play_sports 是一个关联，因此您不能调用 PlaySport 模型中定义的实例方法。

play_sports 将返回集合，因此您可以使用 map 或类似的方法调用该方法

```
current_user.play_sports.map &:current_playing_sports 
```

还要记住这将再次返回数组，该数组将具有每个 PlaySport 模型的 current_playing_sports 方法的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T04:12:59.963

首先，您尝试在 play_sport 对象数组上调用 current_playing_sports 方法。

您需要在每个 play_sport 对象上调用该方法，

就像是，

current_user.play_sports.collect(&:current_playing_sports)

我的疑问，

您已经定义了一个名为“current_playing_sport”的方法，并且您正在尝试访问“current_playing_sports”。我想你需要修正错字

您需要定义一个 has_many 关系。

在你的模型中，添加这个。

```
has_many :current_playing_sports 
```

这应该可以解决您的所有问题。

# objective-c - 新的对象字面量是否向后兼容 iOS 5？

> ID：12869703
> 
> 赞同：9
> 
> 时间：2012-10-13T03:35:41.307
> 
> 标签：objective-c, ios, ios5

我试图弄清楚是否应该开始使用最近添加的对象文字来下标字典、数组等。[以下帖子](https://stackoverflow.com/questions/11658669/how-to-enable-the-new-objective-c-object-literals-on-ios)似乎表明iOS5不支持它们，我读到该功能是在iOS6中添加的。

是这样吗？有人成功使用 iOS5 中的新文字吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T04:06:00.340

[您可以在 Apple 的Objective-C 功能可用性索引](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/ObjCAvailabilityIndex/index.html)中找到有关哪些 iOS（和 OS X）版本支持哪些现代 Objective-C 功能的详细信息。

NSNumber、NSDictionary 和 NSArray 字面量（例如`@{ @"key": @"value" }`）可以部署到*每个*iOS 版本，包括 iOS 5。

NSDictionary 和 NSArray 下标运算符（例如`myArray[7]`或`myDictionary[@"hello"]`）可以部署到 iOS 5.0 和更高版本。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-13T03:38:36.330

如果您使用 Xcode 4.5 构建源代码，那么是的，只要您使用最新的 LLVM 编译器并针对 iOS SDK 6.0 构建源代码，它们就与 iOS 5 兼容。

# ios - 修改后的 EXIF 数据无法正确保存

> ID：12869706
> 
> 赞同：9
> 
> 时间：2012-10-13T03:36:29.160
> 
> 标签：ios, camera, photo, exif

在无数次尝试和筛选每个 SO 答案 + google 结果之后，我感到困惑的是，在 iOS 上使用 EXIF 是如此令人沮丧。

下面是工作代码及其结果。

```
[[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:videoConnection
    completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error)
    {
        NSData *imageNSData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];

        CGImageSourceRef imgSource = CGImageSourceCreateWithData((__bridge_retained CFDataRef)imageNSData, NULL);

        //get all the metadata in the image
        NSDictionary *metadata = (__bridge NSDictionary *)CGImageSourceCopyPropertiesAtIndex(imgSource, 0, NULL);

        NSLog(@"original metadata Info: %@",metadata);

        //make the metadata dictionary mutable so we can add properties to it
        NSMutableDictionary *metadataAsMutable = [metadata mutableCopy];

        NSMutableDictionary *EXIFDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyExifDictionary]mutableCopy];
        NSMutableDictionary *GPSDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyGPSDictionary]mutableCopy];
        NSMutableDictionary *RAWDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyRawDictionary]mutableCopy];

        if(!EXIFDictionary)
            EXIFDictionary = [[NSMutableDictionary dictionary] init];

        if(!GPSDictionary)
            GPSDictionary = [[NSMutableDictionary dictionary] init];

        if(!RAWDictionary)
            RAWDictionary = [[NSMutableDictionary dictionary] init];

        [GPSDictionary setObject:@"camera coord Latitude"
                         forKey:(NSString*)kCGImagePropertyGPSLatitude];
        [GPSDictionary setObject:@"camera coord Longitude"
                         forKey:(NSString*)kCGImagePropertyGPSLongitude];
        [GPSDictionary setObject:@"camera GPS Date Stamp"
                         forKey:(NSString*)kCGImagePropertyGPSDateStamp];
        [GPSDictionary setObject:@"camera direction (heading) in degrees"
                         forKey:(NSString*)kCGImagePropertyGPSImgDirection];

        [GPSDictionary setObject:@"subject coord Latitude"
                         forKey:(NSString*)kCGImagePropertyGPSDestLatitude];
        [GPSDictionary setObject:@"subject coord Longitude"
                         forKey:(NSString*)kCGImagePropertyGPSDestLongitude];

        [EXIFDictionary setObject:@"[S.D.] kCGImagePropertyExifUserComment"
                           forKey:(NSString *)kCGImagePropertyExifUserComment];

        [EXIFDictionary setValue:@"69 m" forKey:(NSString *)kCGImagePropertyExifSubjectDistance];

        //Add the modified Data back into the image’s metadata
        [metadataAsMutable setObject:EXIFDictionary forKey:(NSString *)kCGImagePropertyExifDictionary];
        [metadataAsMutable setObject:GPSDictionary forKey:(NSString *)kCGImagePropertyGPSDictionary];
        [metadataAsMutable setObject:RAWDictionary forKey:(NSString *)kCGImagePropertyRawDictionary];

        NSLog(@"metadataAsMutable Info: %@",metadataAsMutable);

        CFStringRef UTI = CGImageSourceGetType(imgSource); //this is the type of image (e.g., public.jpeg)

        //this will be the data CGImageDestinationRef will write into
        NSMutableData *newImageData = [NSMutableData data];

        CGImageDestinationRef destination = CGImageDestinationCreateWithData((__bridge CFMutableDataRef)newImageData, UTI, 1, NULL);

        if(!destination)
            NSLog(@"***Could not create image destination ***");

        //add the image contained in the image source to the destination, overidding the old metadata with our modified metadata
        CGImageDestinationAddImageFromSource(destination, imgSource, 0, (__bridge CFDictionaryRef) metadataAsMutable);

        //tell the destination to write the image data and metadata into our data object.
        //It will return false if something goes wrong
        BOOL success = NO;
        success = CGImageDestinationFinalize(destination);

        if(!success)
            NSLog(@"***Could not create data from image destination ***");

        CIImage *testImage = [CIImage imageWithData:newImageData];
        NSDictionary *propDict = [testImage properties];
        NSLog(@"Properties %@", propDict);

    }]; 
```

哪个输出：

```
2012-10-12 23:17:45.415 Waypointer[3120:907] original metadata Info: {
ColorModel = RGB;
DPIHeight = 72;
DPIWidth = 72;
Depth = 8;
Orientation = 1;
PixelHeight = 2448;
PixelWidth = 3264;
"{Exif}" =     {
    ApertureValue = "2.526069";
    BrightnessValue = "-4.410617";
    ColorSpace = 1;
    ComponentsConfiguration =         (
        1,
        2,
        3,
        0
    );
    ExifVersion =         (
        2,
        2,
        1
    );
    ExposureMode = 0;
    ExposureProgram = 2;
    ExposureTime = "0.06666667";
    FNumber = "2.4";
    Flash = 16;
    FlashPixVersion =         (
        1,
        0
    );
    FocalLenIn35mmFilm = 35;
    FocalLength = "4.28";
    ISOSpeedRatings =         (
        800
    );
    MeteringMode = 5;
    PixelXDimension = 3264;
    PixelYDimension = 2448;
    SceneCaptureType = 0;
    SensingMethod = 2;
    ShutterSpeedValue = "3.906905";
    SubjectArea =         (
        1631,
        1223,
        881,
        881
    );
    WhiteBalance = 0;
};
"{TIFF}" =     {
    Orientation = 1;
    ResolutionUnit = 2;
    XResolution = 72;
    YResolution = 72;
    "_YCbCrPositioning" = 1;
};
} 
```

还有这个：

```
2012-10-12 23:17:45.421 Waypointer[3120:907] metadataAsMutable Info: {
ColorModel = RGB;
DPIHeight = 72;
DPIWidth = 72;
Depth = 8;
Orientation = 1;
PixelHeight = 2448;
PixelWidth = 3264;
"{Exif}" =     {
    ApertureValue = "2.526069";
    BrightnessValue = "-4.410617";
    ColorSpace = 1;
    ComponentsConfiguration =         (
        1,
        2,
        3,
        0
    );
    ExifVersion =         (
        2,
        2,
        1
    );
    ExposureMode = 0;
    ExposureProgram = 2;
    ExposureTime = "0.06666667";
    FNumber = "2.4";
    Flash = 16;
    FlashPixVersion =         (
        1,
        0
    );
    FocalLenIn35mmFilm = 35;
    FocalLength = "4.28";
    ISOSpeedRatings =         (
        800
    );
    MeteringMode = 5;
    PixelXDimension = 3264;
    PixelYDimension = 2448;
    SceneCaptureType = 0;
    SensingMethod = 2;
    ShutterSpeedValue = "3.906905";
    SubjectArea =         (
        1631,
        1223,
        881,
        881
    );
    SubjectDistance = "69 m";
    UserComment = "[S.D.] kCGImagePropertyExifUserComment";
    WhiteBalance = 0;
};
"{GPS}" =     {
    DateStamp = "camera GPS Date Stamp";
    DestLatitude = "subject coord Latitude";
    DestLongitude = "subject coord Longitude";
    ImgDirection = "camera direction (heading) in degrees";
    Latitude = "camera coord Latitude";
    Longitude = "camera coord Longitude";
};
"{Raw}" =     {
};
"{TIFF}" =     {
    Orientation = 1;
    ResolutionUnit = 2;
    XResolution = 72;
    YResolution = 72;
    "_YCbCrPositioning" = 1;
};
} 
```

并且，在这一切完成之后，这是：

```
2012-10-12 23:17:47.131 Waypointer[3120:907] Properties {
ColorModel = RGB;
DPIHeight = 72;
DPIWidth = 72;
Depth = 8;
Orientation = 1;
PixelHeight = 2448;
PixelWidth = 3264;
"{Exif}" =     {
    ApertureValue = "2.526069";
    BrightnessValue = "-4.410617";
    ColorSpace = 1;
    ComponentsConfiguration =         (
        0,
        0,
        0,
        1
    );
    ExifVersion =         (
        2,
        2,
        1
    );
    ExposureMode = 0;
    ExposureProgram = 2;
    ExposureTime = "0.06666667";
    FNumber = "2.4";
    Flash = 16;
    FlashPixVersion =         (
        1,
        0
    );
    FocalLenIn35mmFilm = 35;
    FocalLength = "4.28";
    ISOSpeedRatings =         (
        800
    );
    MeteringMode = 5;
    PixelXDimension = 3264;
    PixelYDimension = 2448;
    SceneCaptureType = 0;
    SensingMethod = 2;
    ShutterSpeedValue = "3.906905";
    SubjectArea =         (
        1631,
        1223,
        881,
        881
    );
    UserComment = "[S.D.] kCGImagePropertyExifUserComment";
    WhiteBalance = 0;
};
"{JFIF}" =     {
    DensityUnit = 1;
    JFIFVersion =         (
        1,
        1
    );
    XDensity = 72;
    YDensity = 72;
};
"{TIFF}" =     {
    Orientation = 1;
    ResolutionUnit = 2;
    XResolution = 72;
    YResolution = 72;
    "_YCbCrPositioning" = 1;
};
} 
```

如示例所示，您可以看到图像的原始元数据、其修改以及最终输出。

最终的输出让我感到困扰，因为无论我做什么，我都无法坚持修改后的值！

我缺少一些非常具体的格式吗？为什么 iOS 会删除我的修改？我需要做什么来添加这些额外的值？它们列在 .header 中，并认为它应该很容易被接受。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T23:27:14.683

Apple 的开发人员 Scott 带着我的事件报告返回并解决了这个问题：

> 上面的代码是为 GPS 值写入**字符串值-***这不起作用*，它们**必须是 NS/CFNumbers**（我们为 EXIF 提取一个浮点值）。

我将针对他们的文档向 Apple 提交错误报告。

虽然花了一周时间才收到回复，但我真的很感谢 Apple 为其开发人员提供的支持。（感谢斯科特！） **;-)**

以下是改进后的代码及其正确输出：

```
[[self stillImageOutput] captureStillImageAsynchronouslyFromConnection:videoConnection
    completionHandler:^(CMSampleBufferRef imageSampleBuffer, NSError *error)
    {
        NSData *imageNSData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];

        CGImageSourceRef imgSource = CGImageSourceCreateWithData((__bridge_retained CFDataRef)imageNSData, NULL);

        //get all the metadata in the image
        NSDictionary *metadata = (__bridge NSDictionary *)CGImageSourceCopyPropertiesAtIndex(imgSource, 0, NULL);

        //make the metadata dictionary mutable so we can add properties to it
        NSMutableDictionary *metadataAsMutable = [metadata mutableCopy];

        NSMutableDictionary *EXIFDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyExifDictionary]mutableCopy];
        NSMutableDictionary *GPSDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyGPSDictionary]mutableCopy];
        NSMutableDictionary *RAWDictionary = [[metadataAsMutable objectForKey:(NSString *)kCGImagePropertyRawDictionary]mutableCopy];

        if(!EXIFDictionary)
            EXIFDictionary = [[NSMutableDictionary dictionary] init];

        if(!GPSDictionary)
            GPSDictionary = [[NSMutableDictionary dictionary] init];

        if(!RAWDictionary)
            RAWDictionary = [[NSMutableDictionary dictionary] init];

        [GPSDictionary setObject:[NSNumber numberWithFloat:37.795]
                          forKey:(NSString*)kCGImagePropertyGPSLatitude];

        [GPSDictionary setObject:@"N" forKey:(NSString*)kCGImagePropertyGPSLatitudeRef];

        [GPSDictionary setObject:[NSNumber numberWithFloat:122.410]
                          forKey:(NSString*)kCGImagePropertyGPSLongitude];

        [GPSDictionary setObject:@"W" forKey:(NSString*)kCGImagePropertyGPSLongitudeRef];

        [GPSDictionary setObject:@"2012:10:18"
                          forKey:(NSString*)kCGImagePropertyGPSDateStamp];

        [GPSDictionary setObject:[NSNumber numberWithFloat:300]
                          forKey:(NSString*)kCGImagePropertyGPSImgDirection];

        [GPSDictionary setObject:[NSNumber numberWithFloat:37.795]
                          forKey:(NSString*)kCGImagePropertyGPSDestLatitude];

        [GPSDictionary setObject:@"N" forKey:(NSString*)kCGImagePropertyGPSDestLatitudeRef];

        [GPSDictionary setObject:[NSNumber numberWithFloat:122.410]
                          forKey:(NSString*)kCGImagePropertyGPSDestLongitude];

        [GPSDictionary setObject:@"W" forKey:(NSString*)kCGImagePropertyGPSDestLongitudeRef];

        [EXIFDictionary setObject:@"[S.D.] kCGImagePropertyExifUserComment"
                           forKey:(NSString *)kCGImagePropertyExifUserComment];

        [EXIFDictionary setObject:[NSNumber numberWithFloat:69.999]
                           forKey:(NSString*)kCGImagePropertyExifSubjectDistance];

        //Add the modified Data back into the image’s metadata
        [metadataAsMutable setObject:EXIFDictionary forKey:(NSString *)kCGImagePropertyExifDictionary];
        [metadataAsMutable setObject:GPSDictionary forKey:(NSString *)kCGImagePropertyGPSDictionary];
        [metadataAsMutable setObject:RAWDictionary forKey:(NSString *)kCGImagePropertyRawDictionary];

        CFStringRef UTI = CGImageSourceGetType(imgSource); //this is the type of image (e.g., public.jpeg)

        //this will be the data CGImageDestinationRef will write into
        NSMutableData *newImageData = [NSMutableData data];

        CGImageDestinationRef destination = CGImageDestinationCreateWithData((__bridge CFMutableDataRef)newImageData, UTI, 1, NULL);

        if(!destination)
            NSLog(@"***Could not create image destination ***");

        //add the image contained in the image source to the destination, overidding the old metadata with our modified metadata
        CGImageDestinationAddImageFromSource(destination, imgSource, 0, (__bridge CFDictionaryRef) metadataAsMutable);

        //tell the destination to write the image data and metadata into our data object.
        //It will return false if something goes wrong
        BOOL success = NO;
        success = CGImageDestinationFinalize(destination);

        if(!success)
            NSLog(@"***Could not create data from image destination ***");

        CIImage *testImage = [CIImage imageWithData:newImageData];
        NSDictionary *propDict = [testImage properties];
        NSLog(@"Final properties %@", propDict);

    }]; 
```

哪个输出：

```
Final properties info {
    ColorModel = RGB;
    DPIHeight = 72;
    DPIWidth = 72;
    Depth = 8;
    Orientation = 6;
    PixelHeight = 2448;
    PixelWidth = 3264;
    "{Exif}" =     {
        ApertureValue = "2.526069";
        BrightnessValue = "0.547474";
        ColorSpace = 1;
        ComponentsConfiguration =         (
            0,
            0,
            0,
            1
        );
        ExifVersion =         (
            2,
            2,
            1
        );
        ExposureMode = 0;
        ExposureProgram = 2;
        ExposureTime = "0.05";
        FNumber = "2.4";
        Flash = 16;
        FlashPixVersion =         (
            1,
            0
        );
        FocalLenIn35mmFilm = 35;
        FocalLength = "4.28";
        ISOSpeedRatings =         (
            320
        );
        MeteringMode = 5;
        PixelXDimension = 3264;
        PixelYDimension = 2448;
        SceneCaptureType = 0;
        SensingMethod = 2;
        ShutterSpeedValue = "4.321929";
        SubjectArea =         (
            1631,
            1223,
            881,
            881
        );
        SubjectDistance = "69.999";
        UserComment = "[S.D.] kCGImagePropertyExifUserComment";
        WhiteBalance = 0;
    };
    "{GPS}" =     {
        DateStamp = "2012:10:18";
        DestLatitude = "37.795";
        DestLatitudeRef = N;
        DestLongitude = "122.41";
        DestLongitudeRef = W;
        ImgDirection = 300;
        Latitude = "37.795";
        LatitudeRef = N;
        Longitude = "122.41";
        LongitudeRef = W;
    };
    "{JFIF}" =     {
        DensityUnit = 1;
        JFIFVersion =         (
            1,
            1
        );
        XDensity = 72;
        YDensity = 72;
    };
    "{TIFF}" =     {
        Orientation = 6;
        ResolutionUnit = 2;
        XResolution = 72;
        YResolution = 72;
        "_YCbCrPositioning" = 1;
    };
} 
```

正如您所看到的，所有值现在都正确嵌入到 EXIF 标头中，并且我已经测试过这是否正确地使用 JPG 写入相机胶卷。

享受！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-08T15:37:10.453

在 Swift 3 中，我无法`CGImageDestinationAddImageFromSource`使用元数据字典。这是一个较低级别的 Swift 版本，似乎效果很好：[https ://gist.github.com/lacyrhoades/09d8a367125b6225df5038aec68ed9e7](https://gist.github.com/lacyrhoades/09d8a367125b6225df5038aec68ed9e7)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-29T21:43:38.603

我也有写入 exif 数据的问题，我的问题是写入 kCGImagePropertyExifDateTimeOriginal。它需要采用特定的格式。

```
 dfExif.dateFormat = "yyyy:MM:dd HH:mm:ss" 
```

# sql - SQL Server：执行 nvarchar SQL 语句并在没有 OUTPUT 参数的情况下对结果进行参数化

> ID：12869707
> 
> 赞同：3
> 
> 时间：2012-10-13T03:36:30.883
> 
> 标签：sql, sql-server, tsql, stored-procedures

有没有办法在不使用 sp_executesql 的情况下执行存储在 nvarchar 或 ntext 中的 SQL 语句并将执行的 SQL 语句的结果参数化？例如

```
@SQL = 'SELECT name FROM db.dbo.employees WHERE income > 50000' 
```

在这种情况下，在存储过程中，我是否可以在无需修改查询的情况下提取名称，以便可以使用 sp_executesql 和为名称定义的 OUTPUT 参数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T05:23:26.357

到底是什么阻止了您使用 SP_EXECUTESQL？这是 Dilbert 的片段吗？

无论如何，如果您在该特定查询中使用输出参数，它很可能会从收入超过 50,000 的所有员工中返回一个（随机）值。下面是一个示例，展示了如何将整个结果返回给动态 SQL 语句的调用者。

这里的关键是**INSERT.. EXEC**

```
create table dbo.employees (
  name varchar(10),
  income int);
insert employees values
 ('john', 10000),
 ('joe' , 20000),
 ('joey', 40000),
 ('bob' , 70000),
 ('tim' , 100000);

declare @SQL nvarchar(max) =
    'SELECT name FROM dbo.employees WHERE income > 50000';

declare @names table (name varchar(20));
insert @names
EXEC (@SQL);
select * from @names; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-29T12:39:11.667

这是如何在 SQL Server 中通过参数化 SQL Query 使用完全动态 SQL 的示例。

```
SET @Sql = N'UPDATE ' + @tablen + ' SET LOSS_SCORE=0.00, EARNED_SCORE=0.00  WHERE SECTIONSUBTYPE_CODE!=''NW'' AND 
BATCH_IDENTITY ='''+@BATCH_IDENTIFIER+''' AND PACK_NO IN (SELECT PACK_NO FROM ' + @tablen + ' WHERE 
BATCH_IDENTITY =''' +@BATCH_IDENTIFIER+''' AND ECTIONSUBTYPE_CODE=''NW'' AND LOSS_SCORE=100.00)'
EXECUTE sp_executesql @Sql 
```

我在我的项目中使用过，它工作正常。希望它也能帮助你。

# c# - 调试时可以查看 ObjectStateManager 中的内容吗？

> ID：12869711
> 
> 赞同：5
> 
> 时间：2012-10-13T03:37:05.770
> 
> 标签：c#, entity-framework

**背景**

我在更新 EF 中的实体时遇到了一些麻烦。我不断收到此错误：

**“ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象”**

我完全清楚在某处显然存在另一个实体。但是，我目前无法追踪它。有很多代码，我已经花了很多时间。据我所知，我`AsNoTracking()`在所有查询中都使用了扩展方法。

**我需要的**

我的问题是：有什么方法可以在任何给定时间查看**ObjectStateManager中的实际内容吗？**如果我可以在调试期间看到其中的项目，我可以更快地追踪到这些项目的来源。

如果上述情况不可行，我将不胜感激有关如何最好地解决此问题的任何建议。现在就像大海捞针一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T22:12:25.917

> 有什么方法可以在任何给定时间查看 ObjectStateManager 中的实际内容吗？如果我可以在调试期间看到其中的项目，我可以更快地追踪到这些项目的来源。

您还可以使用 Visual Studio 调试器的快速监视功能查看 ObjectStateManager 中的内容。路径是：

> 上下文 -> ObjectContext -> ObjectStateManager -> 非公共成员

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:41:05.270

这个问题有帮助：

[找出实体是否附加到 dbContext 的最合理方法是什么？](https://stackoverflow.com/questions/6033390/what-is-the-most-reasonable-way-to-find-out-if-entity-is-attached-to-dbcontext-o)

我以这种方式实现了它：

```
var attachedEntity = context.ChangeTracker.Entries<T>().FirstOrDefault(x => x.Entity.Id == entity.Id);

                // If the entity is already attached. 
                if (attachedEntity != null)
                {
                    // Set new values
                    attachedEntity.CurrentValues.SetValues(entity);
                }
                else
                {
                    // Else attach the entity (if needed)
                    if (context.Entry(entity).State == EntityState.Detached)
                    {
                        Entities.Attach(entity);
                    }
                    // Set the entity's state to modified
                    context.Entry(entity).State = EntityState.Modified;
                }
                context.SaveChanges(); 
```

注意：`Entities`只是`IDbSet<T>`来自`context.Set<T>()`，上面的代码来自我的通用存储库中的 Update() 方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T00:38:30.813

经常被忽视：`Context.Set<T>.Local()` 它只为相关类型提供附加实体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T04:19:40.570

这篇文章： http: [//mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2007/08/27/9656.aspx](http://mtaulty.com/CommunityServer/blogs/mike_taultys_blog/archive/2007/08/27/9656.aspx)包含一些用于转储`ObjectStateManager`.

从[这里](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/ff45b489-1650-4952-98d0-3f4805d20daf/)：

> 几乎可以肯定这里发生的情况是您尝试删除的对象未附加，但加载在分离实例上的相关实体或集合已附加到 ObjectContext。因此，当您尝试附加要删除的实体时，我们会尝试附加整个图表，其中包括已附加的实体。

这种问题有点痛苦，所以就我而言，我尝试在一个`using(Context context = new MyEntities())`街区内尽可能多地进行活动。

另一条建议是在添加对象之前检查对象是否不存在。有点明显，我知道，但过去我被那个绊倒了几次。

# c - C 中的冲突类型

> ID：12869720
> 
> 赞同：5
> 
> 时间：2012-10-13T03:39:13.363
> 
> 标签：c

我试图用 C 语言构建一个非常简单的程序，它从函数返回一个浮点值，但由于某种原因，我得到了一个错误。

```
#include<stdio.h>
int main(){
    double returning;
    returning = regre();
    printf("%f", returning);
    return 0;
}
double regre(){
    double re = 14.35;
    return re;
} 
```

得到的错误说：

> 'regre' 的冲突类型
> 
> 以前隐含的 regre 声明在这里

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T03:41:57.280

该错误消息准确地告诉您发生了什么 - 有一个隐式声明，`regre`因为您直到 after 才定义它`main()`。只需添加一个前向声明：

```
double regre(); 
```

之前`main()`，或者只是将整个功能移到那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T06:08:08.353

```
previous implicit declaration of `regre` was here 
```

如果一个函数是未知的，那么编译器将其视为`int functionname()`默认值。在您的情况下`int regre()`将在此处声明。

```
conflicting types for 'regre' 
```

当注意到您的实际功能`double regre()`时，会发生此冲突错误。为了解决这个问题，应该在实际使用之前声明双 regre() 函数。

```
#include<stdio.h>
double regre(); //Forward Declaration
int main(){
    double returning;
    returning = regre();
    printf("%f", returning);
    return 0;
}
double regre(){
    double re = 14.35;
    return re;
} 
```

有关前向声明的更多信息，请参阅以下链接。

[http://en.wikipedia.org/wiki/Forward_declaration](http://en.wikipedia.org/wiki/Forward_declaration)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T21:18:46.730

在 C 中，每当您通过按值调用或按引用调用来使用函数时，这些函数默认为 int 类型。当您使用任何类型的函数时，您需要在调用该函数之前在程序中定义函数原型。最好的方法是在 main it self 之前定义所有函数原型，这是编程的好方法。进入您的程序只需将原型定义为 double regre(); 主要之前

```
double regre();
    main()
      { 
```

# c++ - 调整推力应用程序的性能

> ID：12869725
> 
> 赞同：2
> 
> 时间：2012-10-13T03:40:13.367
> 
> 标签：c++, performance, thrust, benchmarking

我在我的带有 9600M GT gpu 的 macbook pro 上运行一个小型 C++/thrust 程序（如下），并且有兴趣了解函数 h 花费的时间，因为目标是尽可能快地运行此代码以获得更大的NEPS 值。

为此，我在函数中添加了 clock() 调用。

打印的时间表明几乎所有时间都花在了thrust::reduce 上。事实上，thrust::reduce 报告的时间是thrust::transform 的数百倍，它调用三个对每个元素的余弦调用。为什么？

当然，我对测量的时间持怀疑态度。我插入了第二次调用thrust::reduce 只是为了看看报告的时间是否相似：它不是。第二次调用报告的时间具有更高的差异并且更小。更多困惑：为什么？

我还尝试使用thrust::transform_reduce（已注释掉）来代替期望运行得更快的两个内核调用——相反，它慢了4%。为什么？

建议赞赏！

```
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>
#include <thrust/sequence.h>
#include <iostream>

#include <stdio.h>
#include <stdint.h>

 float NEPS = 6.0;
 __device__ float EPS;
 __device__ float SQEPS;

 __device__ float CNV_win;
 __device__ float CNV_dt;
 int CNV_n;
 float EU_dt;

__host__ __device__ float f(float x,float t){
    return x*cos(t)+x*cos(t/SQEPS)+cos(t/EPS);
}

struct h_functor
{
  const float x, t;
  h_functor(float _x, float _t) : x(_x),t(_t) {}
  __host__ __device__
  float operator()(const float & t_f) const {
    return f(x,   t-CNV_win+CNV_dt*(t_f+1)   )*CNV_dt;
  } 
};

clock_t my_clock() __attribute__ ((noinline));
clock_t my_clock() {
  return clock();
}
float h(float x,float t){
    float sum;

    sum = CNV_dt*(f(x,t-CNV_win/2)+f(x,t+CNV_win/2))/2;
    clock_t start = my_clock(), diff1, diff2, diff3, diff4, diff5;
    thrust::device_vector<float> t_f(CNV_n-2);
    diff1 = my_clock() - start;
    /* initialize t_f to 0.. CNV_n-3 */
    start = my_clock();
    thrust::sequence(t_f.begin(), t_f.end());
    diff2 = my_clock() - start;

    start = my_clock();
    thrust::transform(t_f.begin(), t_f.end(), t_f.begin(), h_functor(x,t));
    diff3 = my_clock() - start;
    start = my_clock();
    sum += thrust::reduce(t_f.begin(), t_f.end());
    diff4 = my_clock() - start;
    start = my_clock();
    sum += thrust::reduce(t_f.begin(), t_f.end());
    diff5 = my_clock() - start;
#define usec(d) (d)
    fprintf(stderr, "Time taken %ld %ld %ld %ld %ld usecs\n", usec(diff1), usec(diff2), usec(diff3), usec(diff4), usec(diff5));
        /* a bit slower, surprisingly:
       sum += thrust::transform_reduce(t_f.begin(), t_f.end(), h_functor(x,t), 0, thrust::plus<float>());
       */

    return sum;
}
main(int argc, char ** argv) {
  if (argc >= 1) NEPS = strtod(argv[1], 0);
  fprintf(stderr, "NEPS = %g\n", NEPS);

  EPS= powf(10.0,-NEPS);
  SQEPS= powf(10.0,-NEPS/2.0);
  CNV_win= powf(EPS,1.0/4.0);
  CNV_dt = EPS;
  CNV_n = powf(EPS,-3.0/4.0);
  EU_dt = powf(EPS,3.0/4.0);

  cudaMemcpyToSymbol(CNV_win, &CNV_win, sizeof(float));
  cudaMemcpyToSymbol(CNV_dt, &CNV_dt, sizeof(float));
  cudaMemcpyToSymbol(SQEPS, &SQEPS, sizeof(float));
  cudaMemcpyToSymbol(EPS, &EPS, sizeof(float));

  float x=1.0;
  float t = 0.0;
  int n = floor(1.0/EU_dt);
  fprintf(stderr, "CNV_n = %d\n", CNV_n);
  while (n--) {
    float sum = h(x,t);
    x=x+EU_dt*sum;
    t=t+EU_dt;
  }
  printf("%f\n",x);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:59:30.563

如果您想优化算法以提高性能，它可能是使用 arrayfire 的一个选项。我冒昧地为 arrayfire 重写了您的代码，您可以将其与推力版本进行比较并选择运行速度更快的版本：

```
float h(float x,float t){

 float sum = CNV_dt * (f(x, t - CNV_win/2) + f(x, t + CNV_win/2)) / 2;
 // initialize t_f with a sequence 0..CNV_n-3
 af::array t_f(af::seq(0, CNV_n-3));

 // transform vector on the GPU
 t_f =  t - CNV_win + CNV_dt*(t_f+1); 
 t_f = (x*cos(t_f) + x*cos(t_f/SQEPS) + cos(t_f/EPS)) * CNV_dt;

 sum += af::sum<float>(t_f); // sum up all elements of the vector
 return sum;
} 
```

另外，请注意不需要将变量显式复制到 GPU（即不需要 cudaMemcpyToSymbol 调用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T08:13:03.873

多核环境下最好不要使用clock()函数。给出错误的答案是明智的。

最好使用挂钟时间[clock_gettime](https://stackoverflow.com/questions/7506952/understanding-the-different-clocks-of-clock-gettime/7506987#7506987 "时钟获取时间")。同样在 Windows 中，我们有一些高分辨率的计时器。

*   [Linux中的高分辨率计时器](https://stackoverflow.com/questions/6749621/high-resolution-timer-in-linux "Linux 中的高分辨率计时器")
*   [Windows 上的高分辨率计时器](https://stackoverflow.com/questions/1825720/c-high-precision-time-measurement-in-windows "Windows 上的高分辨率计时器")
    *   [“示例代码”](http://cplus.about.com/od/howtodothingsi2/a/timing.htm "示例代码")

在使用 CUDA 时，最好使用 CUDA 本身提供的计时器。cutil_timer

*   [CUDA 设备的初始化成本](https://stackoverflow.com/questions/11704681/cuda-cutil-timer-confusion-on-elapsed-time "Cutil 经过时间，初始化成本")
*   [CUDA 5.0 中的 CUDA 计时器](http://www0.cs.ucl.ac.uk/staff/ucacbbl/cuda5/ "CUDA 5.0 的 Cuda 计时器")

# r - if else 语句变坏了

> ID：12869730
> 
> 赞同：0
> 
> 时间：2012-10-13T03:41:23.580
> 
> 标签：r

运行时我收到一条错误消息，有什么对任何人来说都是显而易见的吗？

```
 yo <-  function(x) {

      filt <- ddply(x, .(primer,day), summarise, count=sum(timepoints==0)) # this will tell you all primers that have a 0 hr time point by giveing a 1 in the count column

 if (any(filt$count) == 0)     { # this was the case once so I implemented this if else part

      filt <- filt[filt$count == 0,]
      include <-!(x$primer%in%filt$primer)&(x$day%in%filt$day) # all primers that have 0 hrs
      x <- x[include,] 
     ### for any given replicate, divide each timepoint by its zero hour 
     x <- ddply(x, .(primer),transform, foldInduction=realConc/realConc[timepoints==0])

}

  else {
x <- ddply(x, .(primer), transform, foldInduction=realConc/realConc[timepoints==0])
   }
  x[,-9]

  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:44:11.863

是的，花括号的位置。

鼓励你写

```
 if (cond) {
     code
 } else {
     more_code
 } 
```

随着解析器逐行进行 - 除非您使用类似的东西`source()`，或者像在构建包并且文件被“整体”而不是逐行使用时那样进行解析。

但作为一般规则：不要使用原始问题显示的样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T12:04:24.370

好的，将我的评论推广到答案。

`any(filt$count) == 0`没有什么意义。为什么？像 R 中的所有逻辑强制一样，`any`将采用`filt$count`表示的数字，如果为零则返回 true，如果非零则返回 1。

```
> any(5)
[1] TRUE
Warning message:
In any(5) : coercing argument of type 'double' to logical 
```

但是，一旦它是合乎逻辑的，您就可以通过将其与数字进行比较来将其强制回数字。所以你的语句真正做的是看看是否有任何一个`filt$count`为零（在这种情况下它返回`TRUE`），然后否定它。

```
> any( c(5,6,7) )==0
[1] FALSE
Warning message:
In any(c(5, 6, 7)) : coercing argument of type 'double' to logical
> any( c(5,6,0) )==0
[1] FALSE
Warning message:
In any(c(5, 6, 0)) : coercing argument of type 'double' to logical
> any( c(0) )==0
[1] TRUE
Warning message:
In any(c(0)) : coercing argument of type 'double' to logical 
```

解决方案：不要那样做。

# arrays - 使用 IF 语句在数组中查找字符串长度以进行对齐 (Visual Basic)

> ID：12869732
> 
> 赞同：0
> 
> 时间：2012-10-13T03:41:55.577
> 
> 标签：arrays, vb.net, if-statement, alignment, string-length

我的问题就像标题中所说的那样。如何使用 IF 语句在数组中查找内容的字符串长度，然后使其显示在富文本框中，左侧对齐？

请注意，我的数组中的一个值是十进制。

```
Imports System.IO
Imports System.Convert

Public Class frmAll
    'Declare Streamreader
    Private objReader As StreamReader

    'Declare arrays to hold the information
    Private strNumber(24) As String
    Private strName(24) As String
    Private strSize(24) As String
    Private decCost(24) As Integer

    Private Sub frmAll_Load(ByVal sender As System.Object,
                            ByVal e As System.EventArgs) Handles MyBase.Load
        'Set objReader
        objReader = New StreamReader("products.csv")
        'Call the FillArray sub to fill the array
        Call FillArray()
    End Sub

    Private Sub FillArray()
        'Declare variables and arrays
        Dim decCost(24, 1) As Decimal
        Dim strFields() As String
        Dim strRec As String
        Dim intCount As Integer = 0
        Dim chrdelim As Char = ToChar(",")
        'Set strRec to read the lines
        strRec = objReader.ReadLine

        'Do while loop to fill array.
        Do While strRec <> Nothing
            strFields = strRec.Split(chrdelim)
            strNumber(intCount) = strFields(0)
            strName(intCount) = strFields(1)
            strSize(intCount) = strFields(2)
            decCost(intCount, 0) = ToDecimal(strFields(3))
            decCost(intCount, 1) = ToDecimal(strFields(4))
            'Set strRec to read the lines again
            strRec = objReader.ReadLine
            'increment the index
            intCount += 1
        Loop
        'Call the Calculate sub for calculation
        Call Calculate(decCost)
    End Sub

    Private Sub Calculate(ByVal numIn(,) As Decimal)
        'Define arrays to hold total cost
        Dim decRowTotal(24) As Decimal

        'Define variables to hold the counters for rows and columns
        Dim intR As Integer
        Dim intC As Integer

        'Calcualte total cost
        For intC = 0 To 1
            For intR = 0 To 24
                decRowTotal(intR) += numIn(intR, intC) * 1
            Next
        Next
        'Call the Output sub to configure the output.
        Call Output(numIn, decRowTotal)

    End Sub

    Private Sub Output(ByVal NumIn(,) As Decimal, _
                       ByVal RowTotalIn() As Decimal)
        'Variables
        Dim strOut As String

        Dim intR As Integer = 0
        Dim intC As Integer = 0
        'Set header for output.
        strOut = "ID" & vbTab & "Item" & vbTab & vbTab & vbTab & "Size" & _
            vbTab & vbTab & vbTab & vbTab & "Total Price" & _
            vbCrLf & "---------- ... -------------------------" & vbCrLf

        'For loop to add each line to strOut, setting
        'the RowTotalIn to currency.
        For intC = 0 To 24
            strOut &= strNumber(intC) & vbTab
            strOut &= strName(intC) & vbTab
            strOut &= strSize(intC) & vbTab
            strOut &= RowTotalIn(intC).ToString("c") & vbCrLf
        Next
        'Add strOut to rbtAll
        rtbAll.Text = strOut
    End Sub
End Class 
```

输出：

> P0001 咖啡 - 哥伦比亚 Supreme 24/箱：预磨粉 1.75 盎司袋装 16.50 美元
> 
> P0002 咖啡 - 榛子 24/箱：预磨粉 1.75 盎司袋装 $24.00
> 
> P0003 咖啡 - 温和混合 24/箱：预磨粉 1.75 盎司袋装 20.50 美元
> 
> P0004 咖啡 - 什锦口味 18/箱。Pre-Ground 1.75 盎司袋装 $23.50
> 
> P0005 咖啡 - 无咖啡因咖啡 24/箱：预磨粉 1.75 盎司袋装 $20.50

它在我的输出中显示为 vbTabs，但看起来仍然相似，因为它们没有对齐。前两个有，但之后没有，我完全迷路了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:45:56.383

为了以像素为单位测量文本的长度，您可以编写

```
pixels = System.Windows.Forms.TextRenderer.MeasureText(text, font) 
```

该`MeasureText`方法有许多带有影响测量的参数的重载。问题是，您无法真正了解`RichTextBox`渲染和计算文本长度的方式。但是，与使用比例字体时仅计算文本中的字符数相比，此方法将产生更精确的结果。看这个例子，两行都是十个字符长：

> iiiiiiiii
> 嗯嗯嗯嗯嗯嗯

* * *

**更新**

关于使用制表符格式化文本的说明。具有两列的示例，其中第二列从第 5 个制表符位置开始。

```
Column #1                               Column #2

------>|------>|------>|------>|------>|Some text
Short->|------>|------>|------>|------>|Some more text
A bit longer-->|------>|------>|------>|Even more text
An even longer text--->|------>|------>|The last one 
```

如您所见，根据第一列中文本的长度，您必须在第二列之前添加不同数量的制表符。在第一行，第一列是空的，在第二行有一个比标签宽度短的文本。在这两种情况下，您都需要插入 5 个选项卡。第 3 行和第 4 行的文本较长，您只需分别插入 4 个和 3 个制表符。

这让您了解如何计算正确的选项卡数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:53:08.637

好吧，除非您使用固定宽度的字体，否则字符串长度并不相关。如果你是，你想做的是使用 String.PadLeft，而不是字符串的长度。

# python - python阶乘系列匹配范围内的第一对

> ID：12869735
> 
> 赞同：1
> 
> 时间：2012-10-13T03:42:15.730
> 
> 标签：python

我是一个新手，我正在尝试在 python 中编写以下阶乘序列，以计算有限范围内的序列中的第一个匹配数。kd×d×(d−1)×⋯×(d−k+1)d×d×⋯d=k(d−1)!dk(d−k)！所以匹配所需数字的期望值为 ∑k=1d(k+1)k(d−1)!dk(d−k)!。

由于数字的大小，它会出错：OverflowError: long int too large to convert to float 所以我正在使用日志，但仍然出现错误。想知道是否有人对此有好主意。

```
 m = 365
  q = 1
  a=[]
  for x in range(q,m):
    #y = y + x*(1/365)
    #####y = y + (factorial(x)/(factorial(m-x)*(exponent(m,x))))
    a.append((log((factorial(m))/exponent(m,x)))*log((q+x)/m))
    #y = [(m-x)*factorial(m-x)/m]
    #print ("x: ",x,"   y: ",y)
  #return "a:",a,"  product-sum:",[a*a for a in a]
  return sum(a) 
```

对不起，我看到上面的等式不清楚。这是我想要了解的内容： [http ://en.wikipedia.org/wiki/Birthday_problem#Average_number_of_people](http://en.wikipedia.org/wiki/Birthday_problem#Average_number_of_people)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:57:05.460

编辑：刚刚意识到 - 我认为日志首先不会对您有太大帮助：您正在尝试计算总和，而日志对总和不是很友好（它们对产品有好处）。

您提供的链接建议了另一种方法（公式紧跟在您引用的那个之后），如果您以正确的顺序计算，应该避免大量数字。但舍入误差的累积可能会影响结果。在代码中

```
m = 365 
ans = 0
for x in range(0,m-1):
  tmp = 1
  for y in range(0,x):
    tmp *= (M-y)/M
  ans += tmp
return ans 
```

也就是说，使用给定的渐近公式可能是一种更好的计算方法。

# objective-c - 我无法解决我的项目中出现的这个断言错误

> ID：12869737
> 
> 赞同：0
> 
> 时间：2012-10-13T03:42:45.690
> 
> 标签：objective-c, xcode, cocos2d-iphone

我制作了这个 cocos2d 游戏，在我开发它的过程中，这个断言错误在游戏中随机出现。我花了几个星期试图解决这个问题，但我还没有成功。错误是

```
Assertion failure in -[HelloWorldLayer addChild:z:tag:],  *** Terminating app due to uncaught exception of class 'nil' 
```

因为我有几个 addChild，我找不到它是哪一个，更糟糕的是，这个断言错误在不同时间的运行过程中非常随机地发生。此外，在 xcode 中，当断言错误发生时，它会显示一些二进制文件，所以我不知道这个错误在我的实际代码中发生在哪里。我也尝试过使用 NSZombies，但由于某种原因它不起作用，并且它给了我一个 NSZombie 异常。我很乐意将我的项目提供给任何希望帮助我解决这个问题的人，因为仅我在这里描述它很难理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T07:05:57.393

每当您在 Xcode 中运行应用程序时看到错误消息“由于未捕获的异常而终止应用程序”，您应该在所有异常上设置断点，以便找出引发该异常的行，如下所示：

![在此处输入图像描述](../Images/7a49a9b1a48ff016b2258b477c85bc60.png)

资料来源： http: [//www.learningipadprogramming.com/2011/12/10/breakpoint-on-all-exceptions/](http://www.learningipadprogramming.com/2011/12/10/breakpoint-on-all-exceptions/)

# extjs - ExtJs：如何以百分比设置宽度？

> ID：12869738
> 
> 赞同：3
> 
> 时间：2012-10-13T03:42:50.150
> 
> 标签：extjs, width, percentage

我的测试代码如下所示：

```
<script type="text/javascript">
    Ext.onReady(function() {
        Ext.create('Ext.button.Button', {
            id: "Button",
            renderTo: Layer
        });
    });

    function SetPixelWidth() {
        var button = Ext.getCmp("Button");
        button.setWidth(200);
    }

    function SetPercentageWidth() {
        var button = Ext.getCmp("Button");
        button.setWidth("50%");
    }
</script>

<button onclick="SetPixelWidth()">Set Width(Pixel)</button>
<button onclick="SetPercentageWidth()">Set Width(Percentage)</button>
<div id="Layer" style="width:100%;background:black"></div> 
```

> `setWidth(200)`工作正常，但 "setWidth("50%")" 不生效。

如何设置宽度`percentage`或其他单位`pixel`？

感谢您提前提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-20T15:44:50.127

[在 Sencha 论坛上查看此帖子](http://www.sencha.com/forum/showthread.php?293473-setWidth-to-percentage)

在这种情况下，您能做的最好的事情就是抓住包含对象的宽度。所以像

```
function SetPercentageWidth()
{
    var button = Ext.getCmp("Button");
    button.setWidth(button.ownerCt.getWidth() * .5);
} 
```

# javascript - Javascript 使用 dom 向表中添加数据

> ID：12869739
> 
> 赞同：0
> 
> 时间：2012-10-13T03:43:17.387
> 
> 标签：javascript, dom, row, add

我有两张表，一张有添加按钮，一张没有添加按钮。如何使用添加按钮将我输入的数据放入行中并让它出现在另一个表中？例如，如果我填写 1、2、3 等并单击添加，表格将更新为具有 5、4、6 的第 1 行。第 2 行有 1,2,3。然后如果我添加第三行，它将位于第 2 行下方。

这是我到目前为止的一个例子：

[http://jsfiddle.net/r8yXp/4/](http://jsfiddle.net/r8yXp/4/)

当单击添加按钮时，我只是不确定如何将输入字段中的数据获取到上表中。

 `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T03:57:25.140

一个稍微简化的答案，但您可以将此作为您尝试做的事情的基础：

```
Name:​&lt;input type="text" id="name">
<input type="button" id="add" value="add"/>
<br/>
<table border="1">
    <tr>
    </th>Name</th>
    </tr>
    <tbody id="root"></tbody>
</table>
<script>
    $('#add').click(function(){
    var name = $('#name').val(); //get value from text field
    var root = $('#root'); //this is where you will attached the new row
    var tr = $("<tr>"); //the new row
    var td = $("<td>").text(name); //use text from textfield as the text for the new table row
    td.appendTo(tr);
    tr.appendTo(root);
    });
</script>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是小提琴的链接：http: [//jsfiddle.net/jrPxr/](http://jsfiddle.net/jrPxr/)

要生成输入：

```
var input = $("<input>").attr({"type" : "text", "id" : "someID"}).val(name); 
```

然后只需将其附加到其直接父级。在这种情况下，表定义：

```
input.appendTo(td); 
```

您可以将类型更改为您想要的任何输入（收音机、复选框等）`

# java - 在 Java 中返回数组

> ID：12869741
> 
> 赞同：33
> 
> 时间：2012-10-13T03:43:28.460
> 
> 标签：java

我完全不知道为什么这段代码不会返回一个数组......我觉得我的编译器有问题：

```
public class trial1{

    public static void main(String[] args){
        numbers();
    }

    public static int[] numbers(){
        int[] A = {1,2,3};
        return A;
    }
} 
```

该代码根本不返回任何内容。这让我疯狂！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-13T03:50:03.863

它正在返回数组，但所有返回的东西（包括数组）所做的就是它听起来的样子：返回值。在你的情况下，你得到的值`numbers()`恰好是一个数组（它可以是任何东西，你仍然会遇到这个问题），然后让它坐在那里。

当一个函数返回任何东西时，它本质上是用返回值替换调用它的行（在你的情况下`numbers();`：）。因此，您的`main`方法真正执行的内容基本上如下：

```
public static void main(String[] args) {
    {1,2,3};
} 
```

当然，这似乎无济于事。如果你想对返回值做一些事情，你可以这样做：

```
public static void main(String[] args){
    int[] result = numbers();
    for (int i=0; i<result.length; i++) {
        System.out.print(result[i]+" ");
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-13T03:44:56.533

当然，该方法`numbers()`返回一个数组，只是你什么都不做。试试这个`main()`：

```
int[] array = numbers();                    // obtain the array
System.out.println(Arrays.toString(array)); // now print it 
```

这将在控制台中显示数组。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-13T03:55:41.533

你对 Java 有几个基本的误解：

> 我希望它返回数组而不必明确告诉控制台打印。

1) Java 不能那样工作。没有任何东西被隐式打印出来。（Java 不支持带有“repl”循环的交互式解释器……比如 Python、Ruby 等）

2）“主要”不会“返回”任何东西。方法签名是：

```
 public static void main(String[] args) 
```

并且`void`意味着“不返回任何值”。（而且，对不起，不，你不能`void`用其他东西替换。如果你这样做，那么`java`命令将无法识别“main”方法。）

3）如果（假设地）你确实希望你的“main”方法返回一些东西，并且你改变了声明以允许它，那么你*仍然*需要使用一个`return`语句来告诉它返回什么值。与某些语言不同，Java 不会将方法的最后一条语句的值视为该方法的返回值。您*必须*使用`return`声明...

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-13T03:46:43.627

正如 Luiggi 提到的，您需要将 main 更改为：

```
import java.util.Arrays;

public class trial1{

    public static void main(String[] args){
        int[] A = numbers();
        System.out.println(Arrays.toString(A)); //Might require import of util.Arrays
    }

    public static int[] numbers(){
        int[] A = {1,2,3};
        return A;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T03:46:34.590

如果要使用该`numbers`方法，则需要一个 int 数组来存储返回值。

```
public static void main(String[] args){
    int[] someNumbers = numbers();
    //do whatever you want with them...
    System.out.println(Arrays.toString(someNumbers));
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-13T03:47:37.023

你需要对返回值做一些事情......

```
import java.util.Arrays;

public class trial1{

    public static void main(String[] args){
        int[] B = numbers();
        System.out.println(Arrays.toString(B));
    }

    public static int[] numbers(){
        int[] A = {1,2,3};
        return A;
    }
} 
```

# image - 带有灰度 BMP 的 BufferedImage.getRGB

> ID：12869742
> 
> 赞同：2
> 
> 时间：2012-10-13T03:43:33.193
> 
> 标签：image, bufferedimage, bmp

上面的图像对应于相同的黑白线性渐变，中间的像素具有 50% 的灰度值（~127）。

编码

```
 BufferedImage im = ImageIO.read(filename);
 int p = im.getRGB(im.getWidth()/2, im.getHeight()/2);
 System.out.printf("%x\n",p); 
```

输出 BMP-rgb 和 GIF 的期望值 ( `ff7f7f7f`)，但对于第一个 (BMP 灰度) 我得到`ffbbbbbb`. 似乎只在这种情况下应用了（强）伽马校正。为什么？

![bmp 8 位](../Images/7e146841056687840639116bbb85c051.png)BMP 灰度 (8 bpp)[原始](http://hjg.com.ar/varios/2012/gray.bmp)

![bmp 24 防弹少年团](../Images/e72373bee59c214e9dd2044cdf6ae496.png)BMP rgb (24 bpp)[原始](http://hjg.com.ar/varios/2012/grayrgb.bmp)

![gif](../Images/42b6b1f485a8f7127c17abb07f9b4c1a.png)GIF (8 bpp)[原始](http://hjg.com.ar/varios/2012/gray.gif)

# extjs - 使用组合框绑定 json 数组

> ID：12869744
> 
> 赞同：2
> 
> 时间：2012-10-13T03:43:51.583
> 
> 标签：extjs, extjs4, extjs4.1

我得到一个 json 数组字符串作为来自页面的响应。我想用组合框绑定它。

这是给我json数组字符串的成功块：

json 数组字符串如下所示：

![显示 json 数组字符串的消息框](../Images/d80c21b1f453b77bec3c565eba5f9c37.png)

请让我知道将它与组合框下拉绑定。

问候，

**编辑：**

这是我尝试的最新代码：

```
Ext.define('Country',{
extend: 'Ext.data.Model',
fields: [
    { name: 'id', type: 'string' },
    { name: 'name', type: 'string' }
]
});

Ext.define('CountryCombo', {
extend: 'Ext.form.field.ComboBox',
alias: 'widget.countrycombo',
allowBlank: false,
queryMode: 'local',
valueField: 'id',
displayField: 'name',
store: {
    model: 'Country',
    data: [
        { id: 'China', name: 'China'},
        { id: 'Japan', name: 'Japan'},
        { id: 'Malaysia', name: 'Malaysia'}
    ]
},
listeners: {
    "select": function(obj){  
        Ext.Ajax.request({
            url: '/CellEditing/FormServlet',
            method: 'POST',
            params: {
                data: obj.getValue()
            },
            success: function(obj){
                alert('success');
                alert(obj.responseText);
                console.log(StateCombo.storeStates); //This is undefined hence getting error
                StateCombo.storeStates.loadData(obj.responseText);
            },
            failure: function(obj){
                alert('failure');
            }
        });                 
    }
}
});

var storeStates = Ext.create('Ext.data.Store', {
autoLoad: false,
fields: ['State']
});

Ext.define('State',{
extend: 'Ext.data.Model',
fields: [
    { name: 'id', type: 'int' },
    { name: 'name', type: 'string' }
]
});

Ext.define('StateCombo', {
extend: 'Ext.form.field.ComboBox',
alias: 'widget.statecombo',
queryMode: 'local',
valueField: 'State',
displayField: 'State',
store: storeStates
}); 
```

这是我尝试过的最新版本，但是当我从第一个组合框中选择某些内容时，第二个组合框没有被填充。请对此有任何帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T22:28:52.820

从技术上讲，此代码将起作用：

[http://jsfiddle.net/sdt6585/wPzPD/29/](http://jsfiddle.net/sdt6585/wPzPD/29/)

```
Ext.define('Country',{
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'string' },
        { name: 'name', type: 'string' }
    ]
});

Ext.define('CountryCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.countrycombo',
    allowBlank: false,
    queryMode: 'local',
    valueField: 'id',
    displayField: 'name',
    store: {
        model: 'Country',
        data: [
            { id: 'China', name: 'China'},
            { id: 'Japan', name: 'Japan'},
            { id: 'Malaysia', name: 'Malaysia'}
        ]
    },
    listeners: {
        "select": function(obj){
            Ext.Ajax.request({
                url: '/CellEditing/FormServlet',
                method: 'POST',
                params: {
                    data: obj.getValue()
                },
                callback: function (response, operation) {
                    //This should be the text string in reponseText, just putting it there since I don't have it
                    response.responseText = '{data: [{state: "State One"}, {state: "State Two"}, {state: "State Three"}]}'
                    //Put this in your success function
                    var data = Ext.JSON.decode(response.responseText).data;
                    storeStates.loadData(data);
                }
            });
        }
    }
});

var storeStates = Ext.create('Ext.data.Store', {
    autoLoad: false,
    fields: ['state']
});

Ext.define('State',{
    extend: 'Ext.data.Model',
    fields: [
        { name: 'id', type: 'int' },
        { name: 'name', type: 'string' }
    ]
});

Ext.define('StateCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.statecombo',
    queryMode: 'local',
    valueField: 'state',
    displayField: 'state',
    store: storeStates
});

Ext.form.Panel.create({
    title: 'Tester',
    renderTo: Ext.getBody(),
    items: [
        CountryCombo.create(),
        StateCombo.create()
    ]
});​ 
```

主要变化如下：

*   您需要在 ajax 调用的成功函数中解码使用 Ext.JSON.decode(response.responseText)) 返回的 json 字符串
*   您定义了一个状态模型，但状态存储没有使用它。它可以被移除。
*   除了在您的 json 字符串中，您在任何地方都将状态变量大写。将其更正为小写。
*   您对状态组合的引用仅针对该视图的模板类，而不是它的实例。另外，如果它是一个初始化的类，它的 store 属性就是这样定义的，与你的变量名无关。您可以存储对创建的组合框的引用并将其称为存储属性 loadData 函数，或者像我一样，只需使用 storeStates 对存储的引用来加载数据。

虽然这在技术上可行，但它并不是最优雅的解决方案。您将使用更多可维护的代码来遵循此过程。

1.  为国家和州定义模型（最好不在全局命名空间中！！）并为状态存储提供代理以自动解码 json 响应。
2.  定义使用模型作为基础的商店
3.  为您的组合框定义视图（仅当它们将在其他地方重用时）
4.  将组合框的实例放在某种容器中（使用 Ext.create() 或视图类的 create() 函数。
5.  将侦听器附加到您创建的国家组合实例，并让它调用 stateCombo 商店的加载函数。

* * *

```
Ext.define('MyApp.models.Country',{
    extend: 'Ext.data.Model',
    requires: ['Ext.data.SequentialIdGenerator'],
    idgen: 'sequential',
    fields: [
        { name: 'name', type: 'string' }
    ]
});

Ext.define('MyApp.stores.Country', {
    model: 'MyApp.models.Country',
    data: [
        { name: 'China'},
        { name: 'Japan'},
        { name: 'Malaysia'}
    ]
});

Ext.define('MyApp.models.State',{
    extend: 'Ext.data.Model',
    requires: ['Ext.data.SequentialIdGenerator'],
    idgen: 'sequential',
    fields: [
        { name: 'state', type: 'string' }
    ],
    proxy: {
        type: 'ajax',
        method: 'post',
        url: '/CellEditing/FormServlet',
        reader: {
            type: 'json',
            root: 'data',
            successProperty: false
        }
    }
});

Ext.define('MyApp.stores.State', {
    model: MyApp.models.State
});

Ext.define('MyApp.views.CountryCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.countrycombo',
    allowBlank: false,
    queryMode: 'local',
    valueField: 'name',
    displayField: 'name',
    store: MyApp.stores.Country.create()
});

Ext.define('MyApp.views.StateCombo', {
    extend: 'Ext.form.field.ComboBox',
    alias: 'widget.statecombo',
    queryMode: 'local',
    valueField: 'state',
    displayField: 'state',
    store: MyApp.stores.State.create()
});

Ext.form.Panel.create({
    title: 'Tester',
    renderTo: Ext.getBody(),
    items: [
        countryCombo = MyApp.views.CountryCombo.create(),
        stateCombo = MyApp.views.StateCombo.create()
    ]
});

countryCombo.on('beforeselect', function (combo, record, index, eOpts) {
    stateCombo.store.load({
        params: {data: record.get('name')}
    });
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T05:31:49.917

使用 loadData 方法将数据加载到您的组合框。

```
yourCombo.store.loadData(obj.responsetext); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T14:14:23.330

您不能使用 StateCombo，因为它是类的名称，而不是对象实例本身。因此无法通过代码访问商店`StateCombo.storeStates.`

实际上，如果你想访问 store 来加载数据，你可以通过两种方式来实现。首先，因为在创建存储对象时将其保存在 storeStates 变量中，所以您可以访问和使用它。storeStates 要么是全局变量，要么是通过闭包知道的。因此，通过编写以下子句，您可以执行所需的操作：

```
storeStates.loadData(); 
```

另一种方法是访问组合框控件，然后获取其绑定存储。通过访问控件意味着不使用类名，而是使用实例。为了访问组合框控件，您首先必须修改组合框的声明并通过设置 itemId 定义实例名称：

```
Ext.define('StateCombo', {

itemId: 'stateCombo',
extend: 'Ext.form.field.ComboBox',
alias: 'widget.statecombo',
queryMode: 'local',
valueField: 'State',
displayField: 'State',
store: storeStates
}); 
```

一旦知道小部件，就可以通过以下方式找到它：

```
var arr = Ext.ComponentQuery.query('stateCombo'); 
```

现在，我们可以加载数据：

```
if (arr.length>0)
   arr[0].loadData(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T12:18:27.950

只是从编辑的帖子中快速思考，回复包含

`{"data":[{"state":"sanghai"},{"state":"state2"}]}`在存储时以小写形式表示它被定义为`fields: ['State']`

ajax响应的另一件事是json字符串，所以在调用`loadData`store方法之前应该对其进行解码。

喜欢`var response = Ext.decode(obj.responseText);`

然后调用 loadData 作为`StateCombo.storeStates.loadData(response.data);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T21:44:42.280

让我们看下面的示例，该示例使用绑定到两个不同商店的两个组合框控件。更改第一个组合框会引发事件，该事件会根据所选值重新加载（在我的示例中它会过滤）数据。然后重新加载第二个组合框的存储并重新填充控件。

这个例子展示了模型、存储和视图是如何协作和一起使用的。通常它使用本地数据收集，但您可以轻松配置存储和代理，以便从服务器端获取数据：

```
 // Set up a model to use in our Store
 Ext.define('Countries', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'abbr', type: 'string'},
         {name: 'name',  type: 'string'}
     ]
 });

// The data store containing the list of states
var countries = Ext.create('Ext.data.Store', {
    fields: ['abbr', 'name'],
    model: 'Countries', 
    data : [
        {"abbr":"US", "name":"United States"},
        {"abbr":"FR", "name":"France"}
        //...
    ]
});

 // Set up a model to use in our Store
 Ext.define('States', {
     extend: 'Ext.data.Model',
     fields: [
         {name: 'cntry', type: 'string'},
         {name: 'abbr', type: 'string'},
         {name: 'name',  type: 'string'}
     ]
 });

// The data store containing the list of states
var states = Ext.create('Ext.data.Store', {
    autoLoad: false,
    fields: ['abbr', 'name'],
    model: 'States', 
    data : [
        {"cntry": "US", "abbr":"AL", "name":"Alabama"},
        {"cntry": "US", "abbr":"AK", "name":"Alaska"},
        {"cntry": "US", "abbr":"AZ", "name":"Arizona"},
        {"cntry": "FR", "abbr":"PR", "name":"Paris"}
        //...
    ],
    listeners: {
        beforeload: function () {

        }
    }

});

// Create the combo box, attached to the states data store
var a = Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose Country',
    store: countries ,
    queryMode: 'local',
    displayField: 'name',
    valueField: 'abbr',
    // Basically this code was tested on Simple Online ExtJS Code Editor
    // http://ext4all.com/post/simple-online-extjs-code-editor
    // so it was bounded to the codeoutput control 
    renderTo: 'codeoutput', 
    listeners: {
        // when we change the value of Countries combobox, this event is raised
        change: function(obj, newVal, oldVal, eOpts) {
            // we can also use states.filter() function in the same way
            states.filterBy ( function(record, id) {
            // newVal variable is available due to closure, so we can compare the row with the selected country and result appropriate notification
            if (record.get("cntry")==newVal) return true;
          });
        }
    }
});

// Create the combo box, attached to the states data store
var a = Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: states,
    queryMode: 'local',
    displayField: 'name',
    valueField: 'abbr',
    renderTo: 'codeoutput'
}); 
```

# regex - 提取一行中4位数字的子字符串

> ID：12869746
> 
> 赞同：2
> 
> 时间：2012-10-13T03:44:02.360
> 
> 标签：regex, boost-regex

试图弄清楚如何使用正则表达式提取 4 位组

我现在使用的正则表达式：

```
regex_time : "(([01][0-9]|2[0-3])[0-5][0-9])"; 
```

代码示例：

```
regex expressionFormat(REGEX_TIME);
boost::match_results<std::string::const_iterator> what;

if (boost::regex_search(input,what,expressionFormat)) 
```

我的输入通常是

`"0000 1800 2359"`

我想把它们推到一个向量中做一些比较。

它用于从一行中以字符串格式解析时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T03:56:34.423

您需要使用`while`循环而不是`if`for `regex_search`：

```
string input;
boost::regex regex("(([01][0-9]|2[0-3])[0-5][0-9])");
boost smatch;

while (boost::regex_search(input.start(), input.end(), what, regex)) {
    // what[0] contains current full match
    // what[2] contains the hours
} 
```

请注意，每个循环都会移动`what`到下一个值。请参阅 boost doc 页面上的示例：http: [//www.boost.org/doc/libs/1_42_0/libs/regex/doc/html/boost_regex/ref/regex_search.html](http://www.boost.org/doc/libs/1_42_0/libs/regex/doc/html/boost_regex/ref/regex_search.html)

中的索引值`what`由表达式中的捕获组确定。如果您想创建另一个组来匹配分钟，只需创建一个新组：

```
"(([01][0-9]|2[0-3])([0-5][0-9]))" 
```

要确定 中的组索引`what`，请向前计算开括号的数量。

# php - 从 MySQL 显示日期或月份

> ID：12869749
> 
> 赞同：0
> 
> 时间：2012-10-13T03:44:51.760
> 
> 标签：php, mysql, date

我无法在 mysql 中仅显示来自 dob 的日期或月份。我做了这些步骤，

首先在数据库中添加一个表：

```
ALTER TABLE `dle_users` ADD `dob` DATE NOT NULL; 
```

第二个在 php 文件中添加了这段代码：

```
$dob = $db->super_query( "SELECT dob FROM dle_users");
$tpl->set("{dob}", $dob); 
```

在个人资料页面中，我得到了这样的正确结果：1372-07-08 *（它的波斯日期）*

问题是，我只需要显示日期或月份，而不是完整日期

我试过这种方式：

```
$dob = date("m", $row['dob']);    
$tpl->set("{dob}", $dob); 
```

但它不起作用！我该如何解决这个问题？

感谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:55:48.307

我不知道您使用的是哪个框架或 cms，但您在核心 php 中应该像这样尝试

```
$dob = date("m", strtotime($row['dob']));    
$tpl->set("{dob}", $dob); 
```

对于daycounting，您应该查看此[链接](https://stackoverflow.com/questions/676824/how-to-calculate-the-difference-between-two-dates-using-php)

```
$date1 = "2007-03-24";
$date2 = "2009-06-26";

$diff = abs(strtotime($date2) - strtotime($date1));

$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24));

printf("%d days\n", $days); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:56:56.607

如果您想从数据库中获取月份，则使用 Month 函数获取月份。同样用于获取直到另一个日期的天数。

DB在简单计算上和前端一样有能力，大部分时间没有理由不在DB端做。

# node.js - NodeJS从缓冲区创建流

> ID：12869752
> 
> 赞同：9
> 
> 时间：2012-10-13T03:45:11.510
> 
> 标签：node.js

我将文件保存到缓冲区并缓存缓冲区以供将来使用。现在我想使用缓冲区创建一个流，以便我可以再次将其通过管道传递给响应。这可能吗？如果是，那么如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T11:20:12.710

我发现这是最有希望的，这要归功于 felixge（节点提交者，esp 流模块） [https://github.com/felixge/node-combined-stream](https://github.com/felixge/node-combined-stream)

首先将文件管道传输到缓冲区然后构造流和管道以处理标准输出的示例，修改自[文章](http://technosophos.com/content/using-string-stream-reader-nodejs)

（您可以直接从文件系统流中进行管道传输，这里是为了说明）

### 从文件异步加载缓冲区

```
var fs = require("fs");
var fileName = "image.jpg";

var CombinedStream = require('combined-stream');

var combinedStream = CombinedStream.create();

fs.exists(fileName, function(exists) {
  if (exists) {
    fs.stat(fileName, function(error, stats) {
      fs.open(fileName, "r", function(error, fd) {
        var buffer = new Buffer(stats.size);
        fs.read(fd, buffer, 0, buffer.length, null, function(error, bytesRead, buffer) {
             fs.close(fd);

           //even the file stream closed
           combinedStream.append(buffer);
           combinedStream.pipe(process.stdout);

        });
      });
    });
  }
}); 
```

### 从文件同步加载缓冲区：

```
//get buffer
var buffer = readFileSync(fileName);
//or do it yourself
var stats = fs.statSync(fileName);
var buffer = new Buffer(stats.size);
var fd = fs.openSync(fileName,"r");
fs.readSync(fd,buffer,0,buffer.length,null);
fs.close(fd);

combinedStream.append(buffer);
combinedStream.pipe(process.stdout); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T06:42:35.073

节点中没有用于执行此操作的本机功能。您可能会搜索一下，看看是否有第三方库。如果没有，有可能，如果有点乏味，编写自己的模块来完成它，因为任何实现文档中列出的所有方法和属性的类，`Stream`并发出和响应列出的所有事件根据定义，documentation*是*`Stream`a并且可以在 node 的内置`Stream`s 可以使用的任何地方使用。

# ios6 - accountsWithAccountType 返回空数组

> ID：12869755
> 
> 赞同：1
> 
> 时间：2012-10-13T03:46:11.167
> 
> 标签：ios6, acaccount

iOS6。我在“设置”应用中登录了 Twitter。

我关闭了我的应用程序，然后重新运行了设置应用程序。

```
ACAccountStore *store = [[ACAccountStore alloc] init];
ACAccountType *accountType = [store  accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
[self createAccountPickerForAccountType:accountType withStore:store]; 
```

...

```
- (void)createAccountPickerForAccountType:(ACAccountType *)accountType withStore:
self.accounts = [store accountsWithAccountType:accountType];
[self displayAccountPicker]; 
```

返回的数组是一个空数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T22:49:42.757

我在手机上也看到了这个，但它在模拟器中有效。

我正在做：

```
ACAccountStore *store = [[ACAccountStore alloc] init];
ACAccountType *twitterAccountType =
[store accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

[store requestAccessToAccountsWithType:twitterAccountType options:nil^(BOOL granted, NSError *error) {

    NSArray *twitterAccounts =  [store accountsWithAccountType:twitterAccountType];
    int count = [twitterAccounts count];
}]; 
```

来自[https://dev.twitter.com/docs/ios-frequently-asked-questions](https://dev.twitter.com/docs/ios-frequently-asked-questions)

“为什么我的应用程序在 twitter.com 上被归为“来自 iOS”而不是“来自”？

如果您的应用程序尚未在 App Store 中发布：

发出请求的应用程序必须在 Apple 的 App Store 中启动，才能在 twitter.com 上显示属性。请注意，应用程序的 iOS5 版本必须是实时的，而不仅仅是以前的版本。”

我想知道它是否可以，因为我的应用程序还没有在应用程序商店中？

# javascript - 调用 jQuery 使用类名

> ID：12869758
> 
> 赞同：0
> 
> 时间：2012-10-13T03:46:52.070
> 
> 标签：javascript, jquery, html, html-lists

我正在尝试在此元素上调用 jQuery：

```
<li class="expanded nolink">
  <span>SERVICES</span>
  <ul class="menu">
    <li class="first leaf">
      <a href="/site/personal_training">PERSONAL TRAINING</a>
    </li>
  </ul>
</li> 
```

当悬停在服务上时，我希望 ul 类“菜单”出现，当我离开时`<li>`，它应该再次消失。我一直在尝试，我开始变得绝望……网址是：[http ://wittmerperformance.com/site/](http://wittmerperformance.com/site/)

到目前为止，我的脚本看起来像这样：

```
$(function() {
  var fade = $('.menu');
  $('.expanded nolink').hover(function(){
  alert("hello world!");
fade.fadeIn();
  }, function() {
fade.fadeOut();
  });
}); 
```

感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:50:59.290

### 您的 jQuery 代码中有错误，选择器错误：

更改`$('.expanded nolink')`为`$('.expanded.nolink')`，因为选择器没有选择任何内容，您的代码可能无法正常工作！

你有这个代码：

```
<ul>
    <li class="expanded nolink">
        <span>SERVICES</span>
        <ul class="menu">
            <li class="first leaf">
                <a href="/site/personal_training">PERSONAL TRAINING</a>
            </li>
            <li class="leaf">
                <a href="/site/personal_training">PERSONAL TRAINING</a>
            </li>
            <li class="leaf">
                <a href="/site/personal_training">PERSONAL TRAINING</a>
            </li>
        </ul>
    </li>
</ul> 
```

### 纯 CSS 解决方案

```
​ul li.expanded ul {display: none;}
ul li.expanded:hover ul {display: block;}​ 
```

### 小提琴：http: [//jsfiddle.net/nhhQz/](http://jsfiddle.net/nhhQz/)

### jQuery 解决方案

```
$(document)​.ready(function(){
    $("ul li.expanded ul").hide();
    $("ul li.expanded").hover(function(){
        $(this).children("ul").stop().fadeIn(400);
    }, function(){
        $(this).children("ul").stop().fadeOut(400);
    });
});​ 
```

### 小提琴：http: [//jsfiddle.net/nhhQz/1/](http://jsfiddle.net/nhhQz/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:55:01.603

您基本上可以使用`hover`：

```
$(document).ready(function(){
    $("ul li.expanded").hover(function(){
        $(this).children("ul").show();
    }, function(){
        $(this).children("ul").hide();
    });
});​ 
```

演示： http: [//jsfiddle.net/CU83B/](http://jsfiddle.net/CU83B/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:01:11.587

```
<li class="expanded nolink">
  <span >SERVICES</span>
  <ul class="menu">
    <li class="first leaf">
      <a href="/site/personal_training">PERSONAL TRAINING</a>
    </li>
  </ul>
</li>

$(function() {
  var fade = $('.menu');
  $('.expanded').hover(function(){
  fade.fadeIn();
  }, function() {
fade.fadeOut();
  });
}); 
```

[工作演示](http://jsfiddle.net/wAch8/1/)

**[演示 2](http://jsfiddle.net/wAch8/2/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T03:50:02.087

您的选择器错误，您应该更改：

```
$('.expanded nolink') 
```

至：

```
$('.expanded.nolink') 
```

您还可以使用`fadeToggle`方法：

```
$(function(){
   $('.menu').hide();
   $('li.expanded').hover(function(){
      $('.menu', this).fadeToggle()
   })
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T03:53:17.840

我建议首先为该 LI 提供一个 ID，与类调用有点松散耦合

```
<li id="my-id" class="expanded nolink"><span>SERVICES</span><ul class="menu"><li class="first leaf"><a href="/site/personal_training">PERSONAL TRAINING</a></li>

    $("#my-id").hover(
    function(){
      //Show the span
    },

    function(){
    //Hide the span
    }
    ); 
```

# java - 如何将搜索栏添加到适用于 Android 的 Flash Builder 移动应用程序？

> ID：12869761
> 
> 赞同：0
> 
> 时间：2012-10-13T03:47:20.430
> 
> 标签：java, apache-flex, android-listview, flash-builder, searchbar

我正在尝试向我的 android 应用程序添加搜索/过滤功能。我将提供屏幕截图和编码副本，以便您可以准确地看到我在这里想要得到的内容。我不确定解决此问题的最佳方法是什么。

```
`<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="iCalculate">

<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>

<s:layout>  
    <s:VerticalLayout paddingTop="10"/>
</s:layout>
<fx:Script>
    <![CDATA[
        import spark.components.Image;
        import spark.components.ViewMenu;
        import spark.events.IndexChangeEvent;

        protected function calcList_changeHandler(event:IndexChangeEvent):void
        {
            // This method contains the selection assignments for the Calculator Views

            if(calcList.selectedIndex == 0)//A1c Calculator
            {
                navigator.pushView(views.A1CCalculator);
            }
            else if (calcList.selectedIndex ==1)//BMI Calculator
            {
                navigator.pushView(views.BMI_Calculator);
            }
            else if (calcList.selectedIndex ==2)//GPA Calculator
            {
                navigator.pushView(views.GPA_Calculator);
            }
            else if (calcList.selectedIndex ==3)//TIP Calculator
            {
                navigator.pushView(views.TipCalculator);
            }
        }

    ]]>
</fx:Script>

<s:Label color="#1021C7" text="Welcome to iCalculate (4)" textAlign="center"
         verticalAlign="middle" click="navigator.pushView(views.CompanyDetail)"/>
<s:List id="calcList" alternatingItemColors="[#e5e4e4,#ffffff]"
        width="100%"
        height="90%"
        labelField="name"
        change="calcList_changeHandler(event)">
    <s:ArrayCollection> 
        <fx:Object name="A1c Calculator" />
        <fx:Object name="BMI Calculator" />
        <fx:Object name="GPA Calculator" />
        <fx:Object name="Tip Calculator" />

    </s:ArrayCollection>
</s:List>
<s:Label color="#1021C7" fontFamily="_typewriter" fontSize="10"
         text="Powered by WATTS Professionals"/>
</s:View> 
```

在此先感谢您的帮助。

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:24:58.167

根据您在图像中显示的内容，我不知道为什么您不能在当前布局中添加另一个“行”。概念上是这样的：

```
<s:Label color="#1021C7" text="Welcome to iCalculate (4)" textAlign="center"
         verticalAlign="middle" click="navigator.pushView(views.CompanyDetail)"/>
    <s:HGroup>
     <s:TextInput id="searchInput"/> 
     <s:Button label="Search"/>
    </s:HGroup>
<s:List id="calcList" alternatingItemColors="[#e5e4e4,#ffffff]"
        width="100%"
        height="90%"
        labelField="name"
        change="calcList_changeHandler(event)">
.... 
```

# html - 确保您的网站在移动浏览器上看起来正确的提示？

> ID：12869770
> 
> 赞同：0
> 
> 时间：2012-10-13T03:49:43.597
> 
> 标签：html, css, mobile

我在这一天制作了几个网站，但是自从使用移动浏览器以来，我一直无法让我的网站在移动 safari 等浏览器中正常显示，我没有改变我的编程习惯以适应，我不确定改变什么来修复我得到的错误。例如：

[http://generationsbeyond.com/immersa/](http://generationsbeyond.com/immersa/)

在桌面浏览器中查看时，这是一个华丽的微型网站，但在移动浏览器中查看时，某些元素，特别是 100% 宽度的元素，会出现偏差。

例子：

[http://imgur.com/WsrhM,1e1tH#0](http://imgur.com/WsrhM,1e1tH#0)

似乎一切都错了，我知道我的 css 习惯可能会在将来阻止这种情况。

有小费吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T04:03:00.100

是的，使用两个样式表。在您的 HTML 中链接到它们时，使用链接标签中的 media="..." 属性来指定每个设备的用途。所以一个会有 media="handheld" 而另一个会有 media="screen"。调整手持设备的 CSS 文件，直到看起来不错。

因此，当 PC 用户访问您的网站时，将加载与 media="screen" 相关的 CSS 文件，但如果手持用户进入，则会使用另一个。请注意，某些手持设备上的 Safari 浏览器会将自己标识为普通浏览器，而不是手持设备。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:58:49.427

使用一些带有网格系统的 CSS 表格可能会有所帮助。可悲的是，我认为如果不几乎完全重写您的应用程序：/。

无论如何，一些建议：
- [http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)响应式 css 可以正是你所需要的
- [http://cssgrid.net/](http://cssgrid.net/)也许实现这将不那么激进

# android - 自定义 android 样式不允许整数？

> ID：12869771
> 
> 赞同：2
> 
> 时间：2012-10-13T03:49:54.023
> 
> 标签：android, android-alertdialog, android-styles

我正在尝试创建一个自定义的 android“样式”xml。虽然我看到的其他所有人似乎都在使用整数，但它甚至无法编译：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style  name="DialogStyle"
            parent="android:style/Theme.Dialog"
            >
        <item name="android:background">@color/ReliantCyan</item>
        <item name="android:radius">6</item>
        <item name="android:textColor">@color/White</item>
    </style>
</resources> 
```

得到我：

```
 .../dialogStyle.xml:7: error: Error: Integer types not allowed (at 'android:radius' with value '6'). 
```

我也尝试过`6pd`，`6px`但它说不允许使用任何字符串。我在这里做错了什么？

（任何接受的答案都必须与 android 2.2 兼容。）

* * *

我现在也尝试过：

```
<dimen name="dRadius">10pd</dimen> 
```

进而

```
<item name="android:radius">@dimen/dRadius</item> 
```

但我得到一个非常相似的错误：

```
 ... error: Error: String types not allowed (at 'dRadius' with value '10pd'). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:23:27.483

我无法准确解释这种行为。指定`<item name="android:radius">6dp</item>`应该足够了。

然而，为了解决这个问题，我们可以添加一个维度资源（在同一个文件中，甚至，只要它在`style`标签之外），然后通过`@dimen`.

像这样的东西：

```
<resources>
    <dimen name="testradius">6dp</dimen>
    <style ...>
        ...
        <item name="android:radius">@dimen/testradius</item>
        ...
    </style>
</resources> 
```

确保将其指定为`6dp`(`6px`也应该工作)，而不是`6`或其`6pd`任何变体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:34:22.887

我可能错了，但我认为你的声明应该是

机器人：半径=“6dp”

# python - Python：我想制作一个连续命名文件的截图脚本

> ID：12869775
> 
> 赞同：2
> 
> 时间：2012-10-13T03:50:28.263
> 
> 标签：python, file, jpeg

到目前为止，我已经编写了一个脚本来截取屏幕截图并保存它们。但我希望将文件命名为“snap”，后跟一个数字（例如 snap1.jpg、snap2.jpg、snap3.jpg）。计划是在每次脚本执行时制作一张新图片。这是当前脚本：

```
import ImageGrab
img = ImageGrab.grab()
img.save('snap1.jpg','JPEG') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:21:23.767

```
import os
import sys

basename = sys.argv[1]

# for each file in the current directory, check if its name starts with basename
# if it does, split on basename this will yield ['', N] where N is the number in the filename
# call int on the number since it is currently a string
numbers = [int(f.split(basename)[1]) for f in os.listdir('.') if f.startswith(basename)]
last_number = max(numbers) # I broke this up so it was easier to see
new_name = "%s%03d.jpg" % (basename, last_number + 1)
print new_name 
```

笔记。

*   使用“。” 又名当前目录作为位置，根据需要更新。
*   new_name 的写法类似于 snap003.jpg。再次，根据需要进行调整。零有助于文件列表排列

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T03:56:57.667

只需将其放入循环中，每次截取屏幕截图时都会增加一个计数器。

```
i = 1
while (condition):
    ImageGrab.grab()
    img.save('snap'+str(i)+'.jpg','JPEG') 
```

但是，由于您只想简单地运行应用程序并让它知道如何命名，您总是可以创建另一个文件来保存您所在的号码。假设您调用它`screen.txt`并在此文件中只放一个零。现在将您的代码修改为：

```
f = open('screen.txt')
i = int(f.read())
f.close()
print ('snap'+str(i)+'.jpg')
f = open('screen.txt', 'w')
i+=1
f.write(str(i)) 
```

您需要用您的声明替换该打印`img.save`声明。这应该有效，并且非常容易理解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:25:08.900

文件名的生成可能很简单

```
i = 1 # somewhere above the grabbing

filename = 'snap%i.jpg' % i
i += 1
img.save(filename, 'JPEG') 
```

`itertools`提供了一个不错的计数器生成器，所以你可以这样做

```
import itertools
filecounter = itertools.count(1)

filename = 'snap%i.jpg' % filecounter.next() 
```

拥有计数器的好处是您可以将其发送到其他函数，而无需费心将状态传回。您可能还想构造一个函数来根据已经存在的文件找出下一个文件名，但这有点复杂。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T04:30:32.383

如果您每次运行脚本时都保存到同一个目录，那么您可以检查目录中是否有名为 /snap[0-9]+.jpeg/ 的文件（即名为 snap 的文件，后跟一个数字，然后通过“.jpg”）并将新文件命名为下一个可用文件名。所以这样的事情应该有效：

```
import os
import ImageGrab
import re

snapPattern = re.compile('snap([0-9]+)\.jpeg')

usedNumbers = []
fileList = os.listdir('.')
for filename in fileList:
    m = snapPattern.match(filename)
    if( m ):
        usedNumbers.append( m.group(1) )
usedNumbers.sort()
i = 0
while usedNumbers.count( str(i) ):
    i++
img = ImageGrab.grab()
img.save('snap'+str(i)+'.jpg','JPEG') 
```

如果我搞砸了，我提前道歉，我对 Python 不是很精通。

# mysql - 在 R 中从 MySQL 获取 UTF-8 文本返回“????”

> ID：12869778
> 
> 赞同：29
> 
> 时间：2012-10-13T03:51:03.023
> 
> 标签：mysql, r, utf-8, character-encoding, odbc

我一直试图从 R 获取 MySQL 数据库中的 UTF-8 文本。我在 OS X 上运行 R（通过 GUI 和命令行尝试），其中默认语言环境是 en_US.UTF-8，没有无论我尝试什么，查询结果都显示“？” 对于所有非 ASCII 字符。

我试过设置`options(encoding='UTF-8')`，`DBMSencoding='UTF-8'`当通过 ODBC 连接时，`Encoding(res$str) <- 'UTF-8'`在获取结果后设置，以及每一个的 'utf8' 变体，都无济于事。从命令行 mysql 客户端运行查询可以正确显示结果。

我完全被难住了。有什么想法为什么它不起作用，或者我应该尝试其他事情吗？

这是一个相当小的测试用例：

```
$ mysql -u root
mysql> CREATE DATABASE test;
mysql> USE test;
mysql> CREATE TABLE test (str VARCHAR(10)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
Query OK, 0 rows affected (0.02 sec)

mysql> INSERT INTO test (str) VALUES ('こんにちは');
Query OK, 1 row affected (0.00 sec)

mysql> select * from test;
+-----------------+
| str             |
+-----------------+
| こんにちは      |
+-----------------+
1 row in set (0.00 sec) 
```

使用 RODBC 和 RMySQL 查询 R 中的表显示“?????” 对于 str 列：

```
> con <- odbcDriverConnect('DRIVER=mysql;user=root', DBMSencoding='UTF-8')
> sqlQuery(con, 'SELECT * FROM rtest.test')
    str
1 ?????
> library(RMySQL)
Loading required package: DBI
> con <- dbConnect(MySQL(), user='root')
> dbGetQuery(con, 'SELECT * FROM rtest.test')
    str
1 ????? 
```

为了完整起见，这是我的 sessionInfo：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] RMySQL_0.9-3 DBI_0.2-5    RODBC_1.3-6 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-13T13:56:04.663

感谢@chooban，我发现连接会话使用的是 latin1 而不是 utf8。这是我找到的两个解决方案：

*   对于 RMySQL，连接后运行查询`SET NAMES utf8`以更改连接字符集。
*   对于 RODBC，使用`CharSet=utf8`DSN 字符串进行连接。我无法`SET NAMES`通过 ODBC 运行。

[这个问题](https://stackoverflow.com/questions/1000636/mysql-odbc-3-51-driver-utf-8-encoding?rq=1)为我指明了正确的方向。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-09-19T19:46:16.377

这对我有用。这是一个完整的例子：

```
con = dbConnect(drv = MySQL(), user = user, password = password,
                dbname = dbname, host=host)

dbSendQuery(con, "SET NAMES utf8mb4;")
dbSendQuery(con, "SET CHARACTER SET utf8mb4;")
dbSendQuery(con, "SET character_set_connection=utf8mb4;")

dbGetQuery(con, "SELECT * FROM WHATEVER") 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-13T10:15:42.057

至少可以尝试一下。连接后，运行“SHOW VARIABLES LIKE 'character_set_%'”并打印出结果。如果没有别的，检查您指定的字符集选项是否已采用很有用。

# android - 在具有自定义视图的 ListFragment 上使用 setListShown 时出错

> ID：12869779
> 
> 赞同：1
> 
> 时间：2012-10-13T03:51:13.770
> 
> 标签：android, android-fragments, android-listfragment

> **可能重复：**
> [列表片段不接受我的布局](https://stackoverflow.com/questions/10608624/list-fragment-does-not-accept-my-layout)

我正在尝试在 ListFragment 上使用自定义视图，但是当我尝试使用`setListShown`或`setListShownNoAnimation`出现异常时！

我正在使用`android-support-v4`.

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-13T03:58:13.000

创建布局文件**list_content.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <LinearLayout android:id="@+id/progressContainer"
            android:orientation="vertical"
            android:layout_width="match_parent" 
            android:layout_height="match_parent"
            android:visibility="gone"
            android:gravity="center">

        <ProgressBar style="?android:attr/progressBarStyleLarge"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" />
        <TextView android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:text=""
                android:paddingTop="4dip"
                android:singleLine="true" />

    </LinearLayout>

    <FrameLayout android:id="@+id/listContainer"
            android:layout_width="match_parent" 
            android:layout_height="match_parent">

        <ListView android:id="@android:id/list"
                android:layout_width="match_parent" 
                android:layout_height="match_parent"
                android:drawSelectorOnTop="false" />
        <TextView android:id="@+id/internalEmpty"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:gravity="center"
                android:textAppearance="?android:attr/textAppearanceLarge" />
    </FrameLayout>

</FrameLayout> 
```

把它放在你的**ListFragment**类中：

```
public ListView mList;
boolean mListShown;
View mProgressContainer;
View mListContainer;

public void setListShown(boolean shown, boolean animate){
    if (mListShown == shown) {
        return;
    }
    mListShown = shown;
    if (shown) {
        if (animate) {
            mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_out));
            mListContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_in));
        }
        mProgressContainer.setVisibility(View.GONE);
        mListContainer.setVisibility(View.VISIBLE);
    } else {
        if (animate) {
            mProgressContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_in));
            mListContainer.startAnimation(AnimationUtils.loadAnimation(
                    getActivity(), android.R.anim.fade_out));
        }
        mProgressContainer.setVisibility(View.VISIBLE);
        mListContainer.setVisibility(View.INVISIBLE);
    }
}
public void setListShown(boolean shown){
    setListShown(shown, true);
}
public void setListShownNoAnimation(boolean shown) {
    setListShown(shown, false);
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    int INTERNAL_EMPTY_ID = 0x00ff0001;
    View root = inflater.inflate(R.layout.list_content, container, false);
    (root.findViewById(R.id.internalEmpty)).setId(INTERNAL_EMPTY_ID);
    mList = (ListView) root.findViewById(android.R.id.list);
    mListContainer =  root.findViewById(R.id.listContainer);
    mProgressContainer = root.findViewById(R.id.progressContainer);
    mListShown = true;
    return root;
} 
```

现在可以正常使用了：

```
setListShown(boolean shown);
setListShown(boolean shown, boolean animate);
setListShownNoAnimation(boolean shown); 
```

# assembly - 在 MASM 中将一系列十进制数字转换为十六进制大数

> ID：12869784
> 
> 赞同：0
> 
> 时间：2012-10-13T03:53:29.887
> 
> 标签：assembly, x86, masm, bignum

我正在编写一堆宏来处理 MASM 中的大数字，我发现自己需要将一系列数字转换为数字。基本上，为了绕过 MASM 大小限制，我一直将 bignums 作为字符串传递。所以，一个 bignum 调用看起来像：

```
MOV_BIG_NUM [eax], <1234567891011121314151617181920212223> 
```

我有一个实现，可以处理（据我所知）以 2 的幂的基数传递的字符串。也就是说，调用如下：

```
MOV_BIG_NUM [eax], <1001101111010101101011110101000011101b> ;Base 2
MOV_BIG_NUM [eax], <0123456710121314151617202122232425262o> ;Base 8
MOV_BIG_NUM [eax], <123456789ABCDEF101112131415161718191Ah> ;Base 16 
```

会处理好的。但是，我使用的方法不能很好地（或根本不能）转换为不是 2 的幂的基数。当然，其中最重要的是十进制，但我很想得到一个具有任意基数的方法。我一直在使用 2 的幂的方法是按顺序访问字节，必要时移动数字，`or`然后用现有数字按位。所以我的十六进制数字方法看起来像这样（这是一个高度简化的版本）：

```
;foreach digit in list of digits
  ;eax contains the start of memory for the bignum
  IF bit_offset EQ 0 ;Only move a new value in when the offset has just changed
    mov ebx, dword ptr [eax + byte_offset] ;Get the current value at the dword's offset
  ENDIF

  digit = digit SHL bit_offset ;Shift the digit by a certain offset, so that we can store multiple digits in one byte

  or ebx, digit

  bit_offset = bit_offset + 4

  IF bit_offset EQ ( 32 ) ;Number of bits in a dword
    mov dword ptr [eax + byte_offset], ebx ;Move the dword back
    byte_offset = byte_offset + 4 ;Number of bytes in a dword
    bit_offset = 0;
  ENDIF
;end foreach 
```

但是，这种方法显然不适用于任意基础。我将如何将十进制数字的顺序列表转换为十六进制数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:55:37.170

您可以执行 10 的算术乘法和十六进制字符串的数字相加。从那里你可以组成十进制到十六进制的字符串转换。

C 中的插图：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef unsigned uint;

int chhex2val(char ch)
{
  if (ch >= '0' && ch <= '9')
    return ch - '0';
  if (ch >= 'A' && ch <= 'F')
    return ch - 'A' + 10;
  if (ch >= 'a' && ch <= 'f')
    return ch - 'a' + 10;
  abort();
  return 0;
}

char val2chhex(int v)
{
  if (v >= 0 && v < 16)
    return "0123456789ABCDEF"[v];
  abort();
  return '0';
}

// Multiplies a hex string like "17F" by 10 and
// returns a string with the product (e.g. "0EF6").
// The original string isn't modified.
char* mulh10(char* h)
{
  size_t l = strlen(h);
  char* p = malloc(l + 1 + 1);
  size_t i;
  uint c = 0;

  if (p == NULL)
    abort();

  p[l + 1] = '\0';
  for (i = 0; i < l; i++)
  {
    c += chhex2val(h[l - 1 - i]) * 10;
    p[l - i] = val2chhex(c % 16);
    c /= 16;
  }
  p[0] = val2chhex(c);

  return p;
}

// Adds (arithmetically) to a hex string like "17F" a hex/dec digit, e.g. '9'.
// Returns the modified original string (e.g. "188").
char* addhd(char* h, char d)
{
  size_t l = strlen(h);
  size_t i;
  uint c = chhex2val(d);

  for (i = 0; c && i < l; i++)
  {
    c += chhex2val(h[l - 1 - i]);
    h[l - 1 - i] = val2chhex(c % 16);
    c /= 16;
  }

  return h;
}

int main(void)
{
  char num[] = "17F";
  printf("\"17F\" (hex) * 10 = \"%s\" (hex)\n", mulh10(num));
  printf("\"17F\" (hex) + '9' = \"%s\" (hex)\n", addhd(num, '9'));
  printf("\"65535\" (dec) = \"%s\" (hex)\n",
         addhd(mulh10(addhd(mulh10(addhd(mulh10(addhd(mulh10(addhd(mulh10(
         "0"), '6')), '5')), '5')), '3')), '5'));
  return 0;
} 
```

输出（[ideone](http://ideone.com/aZZFw)）：

```
"17F" (hex) * 10 = "0EF6" (hex)
"17F" (hex) + '9' = "188" (hex)
"65535" (dec) = "00FFFF" (hex) 
```

# c++ - 在函数 C++ 中访问全局变量

> ID：12869792
> 
> 赞同：0
> 
> 时间：2012-10-13T03:55:24.080
> 
> 标签：c++, arrays, function, multidimensional-array

我有一个非常基本的疑问。从下面的代码中，我将 Board[ ][ ] 声明为全局 char 数组。我想在一个名为`init_board()`. 但是编译器返回

`In function void init_board():`
`expected primary-expression before '{' token`
`expected ;' before '{' token`

代码：

```
#include <iostream>
#include <conio.h>

using namespace std;

//global variables---------------
char Board[2][2];

//function declarations----------
void init_board();

int main(void)
{
init_board();

 for(int i=0;i<2;i++)
 { 
 for(int j=0;j<2;j++)
 {
  cout<<Board[i][j]<<" ";
 }
  cout<<"\n";
 }

getch();
}

void init_board()
{
Board[2][2] = {{'a','b'},{'c','d'}}; 
} 
```

我犯的基本错误是什么......请指出！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T03:57:51.847

初始化语法只能在声明数组时使用，即

```
char board[2][2] = {{'a', 'b'}, {'c', 'd'}}; 
```

在所有其他情况下，您需要浏览数组元素并设置它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:26:40.640

您正在 init_board() 中索引 Board[2][2] 您正在索引超出指定数组大小的范围，即您已指定数组为 2 行和 2 列，但您正在索引元素 3（在 C/C++ 和其他一些语言中，索引从 0 开始）。您可以在编译时在声明它的文件顶部初始化数组：

```
char Board[2][2] = {{'a','b'},{'c','d'}}; 
```

或者您可以按照其他人的建议单独初始化每个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T07:05:22.410

```
void init_board()
{
Board = {{'a','b'},{'c','d'}};
} 
```

那可以解决它...当您使用 Board[2][2] 时，您只会引用位置 [2][2] 中的一个字符。所以这意味着您将只在董事会的一口中添加 a、b、c 和 d

# android - 为什么 onPostExecute 在 AsyncTask 中的 doInBackground 完成之前执行

> ID：12869795
> 
> 赞同：6
> 
> 时间：2012-10-13T03:55:42.113
> 
> 标签：android, android-asynctask

我试图创建一个 AsyncTask 来从服务器端获取一些数据。但它在“IOUtils.copy((response_.getEntity().getContent()), writer);”行的 onPostExecute() 中报告了 Null 指针异常。我使用一些日志来查看发生了什么，发现日志 1 和 3 已打印但日志 2 没有。为什么 onPostExecute 在 client.executed() 完成之前执行？任何人都可以提供一些建议吗？

```
private class GetForm extends AsyncTask<String, Integer, Object> {
    private HttpResponse response_;
    private Exception exception_;
    private String url_;

    public GetForm(String url) {
        super();
        url_ = url;
    }
    protected Object doInBackground(String... params) {
        try {
            Log.i("mylog","inside doInbackground 1.");
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet(url_);
            response_ = client.execute(request);
                            Log.i("mylog","inside doInbackground 2.");

        } catch (Exception e) {
            exception_ = e;
        }
        return response_;
    }
    @Override
    protected void onPostExecute(Object o) {
        // Your current UI stuff here.
        Log.i("mylog","inside onPostExecute 3.");
        StringWriter writer = new StringWriter();
        try{
            IOUtils.copy((response_.getEntity().getContent()), writer);
        ......

        }catch(IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T04:02:17.630

不太可能首先调用 onPostExecute() ，更有可能是在您的 doInBackground() 中引发了异常......以及未打印 Log 2 的原因。检查 LogCat 中的警告或调试页面。此外，您应该分别打印这两个异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:14:28.413

`onPostExecute()`以前永远无法执行`doInBackground()`。

您必须知道，`doInBackground()`无论您调用什么，它都只会在异步线程/任务中执行。和`onPostExecute()`在主 UI 线程本身中执行。

显示您是如何在代码中调用此任务的。

您必须检查的主要事项是您不得使用从`AsyncTask`Main中获取的任何数据`UIThread`除非您确定`Asynctask`已完成

因为它有可能在`AsyncTask`完成之前执行，并且您肯定会遇到`NULLException`这种情况。

# jsf-2 - 找不到具有标识符问题的组件

> ID：12869798
> 
> 赞同：0
> 
> 时间：2012-10-13T03:55:55.683
> 
> 标签：jsf-2, primefaces

我一个人无法处理这件事。这是一件事：我的wep应用程序上有以下页面：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
            xmlns:f="http://java.sun.com/jsf/core"
            xmlns:h="http://java.sun.com/jsf/html"
            xmlns:p="http://primefaces.org/ui"
            template="./../../resources/templates/baseTemplate.xhtml">
<ui:define name="header">
    <!-- Configuração do idioma de exibição do scheduler -->
    <h:outputScript library="scripts" name="primefaces-locale.js"/>
</ui:define>
<ui:define name="content">
    <p:fieldset legend="Relatórios">
        <h:form id="frmRelatorios">

            <!-- Diálogo de status -->
            <p:ajaxStatus onstart="dlgStatus.show();" onsuccess="dlgStatus.hide();"/>
            <p:dialog modal="true" 
                      widgetVar="dlgStatus" 
                      header="Status" 
                      draggable="false" 
                      closable="false">
                <p:graphicImage value="#{resource['images/ajax-loader.gif']}" />
            </p:dialog>
            <p:messages id="mMessages" 
                        redisplay="false" />

            <p:panelGrid columns="2" 
                         styleClass="gridNoLine">
                <h:outputLabel value="Relatório: "/>
                <p:selectOneMenu id="somTiposRelatorios" 
                                 value="#{relatoriosBean.tipoRelatorioSelecionado}"
                                 required="true"
                                 requiredMessage="Selecione o tipo de relatório."
                                 effect="fade"
                                 widgetVar="somEventos"
                                 label="Tipo de relatório:">
                    <p:ajax listener="#{relatoriosBean.onSelectMenuChanged}"
                            update="opTipoPesquisa"/>
                    <f:selectItem itemLabel="Selecione um item..." itemValue=""/>
                    <f:selectItems value="#{relatoriosBean.tiposRelatorios}">
                    </f:selectItems>
                </p:selectOneMenu>
            </p:panelGrid>
            <p:outputPanel id="opTipoPesquisa">
                <p:panelGrid columns="2"
                             rendered="#{relatoriosBean.exibirPainelTipoPesquisa}"
                             styleClass="gridNoLine">
                    <h:outputLabel value="Pesquisar por:"/>
                    <p:selectOneRadio id="sorTipoPesquisa" 
                                      value="#{relatoriosBean.tipoPesquisa}">
                        <p:ajax update=":frmRelatorios:olTipoRelatorio"
                                listener="#{relatoriosBean.tipoPesquisaAlterado}"/>
                        <f:selectItem itemLabel="Nome" itemValue="1" />
                        <f:selectItem itemLabel="Data" itemValue="2" />
                    </p:selectOneRadio>
                    <h:outputLabel id="olTipoRelatorio" 
                                   value="#{relatoriosBean.tipoPesquisa}"/>
                </p:panelGrid>
            </p:outputPanel>
            <p:outputPanel id="opPainelPesquisaNome">
                <p:panelGrid columns="3"
                             styleClass="gridNoLine"
                             rendered="#{relatoriosBean.exibirPainelPesquisaNome}">
                    <h:outputLabel value="Pesquisar:" 
                                   for="itPesquisaEvento" />
                    <p:inputText id="itPesquisaEvento" 
                                 value="#{relatoriosBean.nomeEvento}"
                                 label="Nome do evento:"
                                 required="true"
                                 requiredMessage="Digite o nome do evento a ser pesquisado."/>

                </p:panelGrid>
            </p:outputPanel>
            <p:outputPanel id="opPainelPesquisaData" >
                <p:panelGrid columns="2" 
                             styleClass="gridNoLine"
                             rendered="#{relatoriosBean.exibirPainelPesquisaData}">
                    <h:outputLabel value="De:" for="cDataInicioPesquisa"/>
                    <p:calendar id="cDataInicioPesquisa"
                                value="#{relatoriosBean.dataInicioPesquisa}"
                                locale="pt" 
                                required="true"
                                requiredMessage="Selecione a data de início da pesquisa."
                                pattern="dd/MM/yyyy HH:mm"
                                stepMinute="10"
                                label="Data de início:">

                    </p:calendar>
                    <h:outputLabel value="Até:" for="cDataTerminoPesquisa"/>
                    <p:calendar id="cDataTerminoPesquisa"
                                value="#{relatoriosBean.dataTerminoPesquisa}"
                                locale="pt" 
                                required="true"
                                requiredMessage="Selecione a data de término da pesquisa."
                                pattern="dd/MM/yyyy HH:mm"
                                stepMinute="10"
                                label="Data de término">

                    </p:calendar>
                    <p:column rowspan="2" colspan="2">

                    </p:column>
                </p:panelGrid>
            </p:outputPanel>
        </h:form>
    </p:fieldset>
</ui:define> 
```

下面是模板页面的代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:p="http://primefaces.org/ui"
  xmlns:f="http://java.sun.com/jsf/core">
<f:view id="vRoot">
    <h:head>
        <!-- Incluir Scripts e Folhas de Estilo comuns a todas as páginas do sistema -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />        
        <h:outputStylesheet library="css" name="default.css"/>
        <h:outputStylesheet library="css" name="cssLayout.css"/>
        <h:outputStylesheet library="css" name="rodape.css"/>
        <ui:insert name="header">
        </ui:insert>

        <title>SisEventos - Sistema de Gerenciamento de Eventos</title>
    </h:head>
    <h:body>

        <div class="estrutura">
            <!-- Topo -->
            <div class="top">  
            </div>
            <!-- Menu -->
            <div class="menu">
                <h:form id="frmMenu">
                    <p:menubar autoDisplay="true" >
                        <p:menuitem value="Home" icon="ui-icon-home" url="/paginas/home.xhtml" />
                        <p:submenu label="Manutenção" icon="ui-icon-person">    
                            <p:submenu label="Evento" >
                                <p:menuitem value="Gerenciar Evento" url="/paginas/administrativo/gerenciarEvento.xhtml" /> 
                                <p:menuitem value="Ger. Tipo de Evento" url="/paginas/administrativo/gerenciarTipoEvento.xhtml" /> 
                            </p:submenu>
                            <p:submenu label="Local" >
                                <p:menuitem value="Gerenciar Local" url="/paginas/administrativo/gerenciarLocal.xhtml" /> 
                                <p:menuitem value="Ger. Tipo de Local" url="/paginas/administrativo/gerenciarTipoLocal.xhtml" /> 
                            </p:submenu>
                            <p:menuitem value="Papel" url="/paginas/administrativo/gerenciarPapel.xhtml" />
                            <p:submenu label="Público" >
                                <p:menuitem value="Gerenciar Público" url="/paginas/administrativo/gerenciarPublico.xhtml" /> 
                                <p:menuitem value="Ger. Tipo de Público" url="/paginas/administrativo/gerenciarTipoPublico.xhtml" /> 
                            </p:submenu>
                            <p:submenu label="Serviço" >
                                <p:menuitem value="Gerenciar Serviço" url="/paginas/administrativo/gerenciarServico.xhtml" /> 
                                <p:menuitem value="Ger. Prestador de Serviço" url="/paginas/administrativo/gerenciarPrestadorServico.xhtml" /> 
                            </p:submenu>                      
                        </p:submenu> 

                        <p:submenu label="Atividades" > 
                            <p:menuitem value="Reservar Recursos" url="#" />
                            <p:menuitem value="Avaliar Solicitação de Recursos" url="#" /> 
                            <p:menuitem value="Alocar Recurso" url="#" /> 
                            <p:menuitem value="Cancelar Atividades" url="#" /> 
                        </p:submenu> 

                        <p:menuitem value="Relatórios" url="/paginas/administrativo/gerarRelatorios.xhtml" /> 

                        <p:submenu label="Evento" > 
                            <p:menuitem value="Notícias" url="#" /> 
                            <p:submenu label="Palestrantes" >
                                <p:menuitem value="Convidados" url="#" /> 
                                <p:menuitem value="Professores" url="#" /> 
                                <p:menuitem value="Alunos" url="#" />                    
                            </p:submenu>
                            <p:menuitem value="Serviços" url="#" />
                            <p:menuitem value="Imagens" url="#" />
                            <p:menuitem value="Localização" url="#" />
                        </p:submenu> 

                        <p:menuitem value="Contato" /> 
                    </p:menubar>
                </h:form>
            </div>
            <!-- Conteúdo -->
            <div class="left_content">
                <ui:insert name="content">
                </ui:insert>
            </div>
            <!-- Rodapé -->
            <div class="bottom">
                <div id="rodape"><br/>
                    CAMPUS - SEPN 707/907 Campus do CEUB - Asa Norte - Brasília - DF - CEP 70790-075 - 
                    Informações: +55 (61)3966-1200<br/>Copyright © 2012 UniCEUB. Todos os direitos reservados |
                    <a href="#">Condições de Uso</a> | <a href="#">Política de Privacidade</a>
                </div>
            </div>
        </div> 
    </h:body>
</f:view> 
```

当我执行应用程序时，我在日志中收到以下错误：

```
GRAVE: Servlet.service() for servlet [FacesServlet] in context with path [/SisEventosv2] threw exception [Cannot find component with identifier "frmRelatorios:opPainelPesquisa" referenced from "frmRelatorios:somTiposRelatorios".] with root cause
javax.faces.FacesException: Cannot find component with identifier "frmRelatorios:opPainelPesquisa" referenced from "frmRelatorios:somTiposRelatorios". 
```

但如您所见，我没有引用 somTiposRelatorios 中的组件 opPainelPesquisa。由于此错误，页面无法正确更新。可能会发生什么？

# php - 如何将 Drupal 6 用户数据转换为 WordPress 3？

> ID：12869805
> 
> 赞同：-1
> 
> 时间：2012-10-13T03:57:19.037
> 
> 标签：php, mysql, wordpress, drupal

我已经使用了一些教程将`Drupal 6`网站转换为`WordPress`. 我的问题是我没有找到任何教程，其中包含可用于`MySQL`将 users 表转换`Drupal 6`为. 正如我所说...其他一切都已完美转换，但这是唯一剩下的。`wp_users``WordPress 3+`

对此有何见解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:19:23.750

我已经阅读了几个教程，并且 room34 网站提供了帮助。但是，一旦整个站点被转换，自定义永久链接就不会被使用，并且必须使用使用 slug 的帖子名。我已经编写了教程和过程，其中我将 Drupal 完全转换为有效的 WordPress。[如何将 Drupal 转换为 WordPress](http://blondish.net/how-to-convert-drupal-to-wordpress/)。我感谢帮助解决我的问题的博客所有者、我在整个转换过程中的发现，当然还有代码。我感谢所有回答的人，但没有任何帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:34:07.260

不确定是否有帮助。

```
// Query from Drupal DB all users
SELECT uid, name, pass, mail, created
FROM users
WHERE uid > 0

// Cycle throught all users and insert each one of them into Wordpress DB
foreach ($users as $user)
  "INSERT INTO wp_users SET
  ID = $user->uid,
  user_login = $user->name,
  user_pass = $user->pass,
  user_nicename = $user->name,
  user_email = $user->mail,
  user_url = '',
  user_registered = date('Y-m-d H:i:s', $user->created),
  user_activation_key = '',
  user_status = 0, // not sure about that
  display_name = $user->name"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T11:26:12.077

我最近写了一篇博客文章，记录了我的 Drupal 到 WordPress 的转换过程：[Drupal 到 WordPress 迁移说明](http://anothercoffee.net/drupal-to-wordpress-migration-explained/)。

它涵盖了如何迁移帖子作者和评论作者。我的查询类似于 Nile Flores 的查询，因为我们使用了相同的来源，即 Scott Anderson 的博客文章。但是，随着时间的推移，我还添加了一些有助于我自己的站点迁移的修改。由于我讨论了一个具体示例，因此解释有点冗长，因此仅在此处粘贴 SQL 可能对您不起作用。

我已经把它放在[GitHub 上](https://github.com/anothercoffee/drupal-to-wordpress)，以防有人想轻松克隆所有内容或提交改进。

# php - 我如何使用相同的 SELECT 表单

> ID：12869807
> 
> 赞同：0
> 
> 时间：2012-10-13T03:57:24.130
> 
> 标签：php, javascript, html, mysql, html-select

我有一个包含 6 列和大约 70 行的表格的 HTML 页面。在 column3 中，我在所有 70 行中都有一个 SELECT 下拉列表，该列表具有相同的列表。我已经习惯了 C# 和 java，我可以在其中创建一个类，然后一遍又一遍地引用该类，但我对 HTML 非常陌生。

我对此的选择有些开放，因为它最终将托管在我工作时的 apache 服务器上，我的团队将使用此表单而不是我很久以前制作的 excel 表。基本上我想使用 mysql 而不是 excel 表，因为我可以运行查询等等。我已经在所说的 apache 服务器上安装了 mantisbt。我提到这一点是因为螳螂是用 PHP 制作的。我读过几次，PHP 可能是一个比严格使用 HTML 更好的答案。因为我必须与 mysql 通信，所以无论如何我都应该走这条路。我看到的几个 php 页面（从查看 mantis 文件）有许多与 HTML 相似的标签，所以我想我可以模拟一个 HTML 页面，然后将其复制并粘贴到我的 php 页面中，并使少数几个小更改以使其工作。我对此很愚蠢吗？我'

最后我的问题是......在我的所有 70 行中获得相同组合框的最佳方法是什么，当我进行切换时，这将很容易过渡到 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:16:21.083

您说您有一个包含 70 行和 6 列的表您说在第三列中您有一个选项下拉列表首先使用这些选项创建一个数组（比如说 $optary）稍后您可以构建您的表，如下所示

```
<table>
<th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th>
<td>data 1</td>
<td>data 2</td>
<td><select name='optionval'><?php foreach($optary as $val){?>
<option value='<?php echo $val?>'><?php echo $val;?></option>
<?php }?></select></td>
<td>data 4</td>
<td>data 5</td>
<td>data 6</td>
</table> 
```

如果您在块上方循环 70 次，则可以在另一个数组或任何地方使用它，相同的下拉列表将出现在所有行中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:22:16.920

好的，这里的交易。首先，您不会用 HTML 完成任何事情。它只是标记，它不做任何事情。如果您想从远程服务器提取数据，您需要对 Jquery 感兴趣。您的重点应该放在一个称为 Ajax 的过程中。

接下来，您将需要中间人 php 使用真正的 SQL 查询从服务器检索内容，然后将其返回给 Jquery 以操作 DOM（页面）。你能自己做吗？当然。我会推荐它吗？绝对不。在这里查看这个[插件](http://datatables.net/)，它可以处理动态表的所有前端和后端需求。

# ios - iOS - 按下时 TableCell UILabel 颜色

> ID：12869813
> 
> 赞同：0
> 
> 时间：2012-10-13T03:58:37.797
> 
> 标签：ios, uitableview

选择单元格后，我可以这样做来更改颜色：

```
cell.myLabel.highlightedTextColor = [UIColor redColor]; 
```

但是如何在按下单元格时将其更改为该颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:34:49.360

无法按下单元格。为了获得相同的功能，只需在您的自定义单元格中添加一个*按钮*（将其保持在*隐藏状态*）。然后简单地初始化并建立连接。然后

```
if(cell.myButton isSelected YES)
{
     //write code to get details about that particular cell whic is selectd!!
     cell.myLabel.highlightedTextColor = [UIColor redColor];
} 
```

# javascript - 如何使用 javascript 而不是 jQuery 使 div 居中？（固定 div、渐变边框、动态大小、自动居中）

> ID：12869815
> 
> 赞同：1
> 
> 时间：2012-10-13T03:58:54.920
> 
> 标签：javascript, html, dynamic, centering, css-position

我目前正在为 MediaWiki 网站编写代码。我无权访问和修改 LocalSettings.php（一个难以联系的工程师），我通常会在其中键入几行以启用对 MediaWiki 友好的 Javascript 版本。

我已经用 jQuery 编写了代码以按照我想要的方式工作，但我需要用 Javascript 重写它。

让内部 div 尊重动态大小的外部 div 的边界有点像噩梦，因为百分比*不是*用边距和填充计算的，但我想通了。

无论如何，请检查这个[jfiddle](http://jsfiddle.net/qSGCy/2/)并帮助我了解如何为 javascript 编写代码。

对于那些对 jfiddle 不感兴趣的人，我在这里提供了 jQuery 代码：

```
// This centers the div when the page first loads
$('.popup-border').css('margin-left', '-' + ($('.popup-border').outerWidth() / 2) + 'px');
$('.popup-border').css('margin-top', '-' + ($('.popup-border').outerHeight() / 2) + 'px');

// This centers the div each time the page is resized
$(window).resize(function() {
    $('.popup-border').css('margin-left', '-' + ($('.popup-border').outerWidth() / 2) + 'px');
    $('.popup-border').css('margin-top', '-' + ($('.popup-border').outerHeight() / 2) + 'px');
}); 
```

**如何用 javascript 而不是 jQuery 重写它？**

# java - 示例 HtmlUnit 测试失败

> ID：12869817
> 
> 赞同：1
> 
> 时间：2012-10-13T03:59:37.280
> 
> 标签：java, maven, junit, htmlunit

我正在尝试通过 Junit 运行示例 HtmlUnit 测试用例。

我的项目是基于 Maven 的。我是否需要将编译和测试下的所有依赖项添加到我的 POM 中？[http://htmlunit.sourceforge.net/dependencies.html](http://htmlunit.sourceforge.net/dependencies.html) 现在我已经添加了 htmlunit 依赖项、httpconnections 和 nekohtml。

样品测试：

```
@Test
public void homePage() throws Exception {
    WebClient webClient = new WebClient(BrowserVersion.CHROME_16);
    final HtmlPage page = webClient.getPage("http://htmlunit.sourceforge.net");

    assertEquals("HtmlUnit - Welcome to HtmlUnit", page.getTitleText());

    final String pageAsXml = page.asXml();
    assertTrue(pageAsXml.contains("<body class=\"composite\">"));

    final String pageAsText = page.asText();
    assertTrue(pageAsText.contains("Support for the HTTP and HTTPS protocols"));

    webClient.closeAllWindows();
} 
```

测试失败并出现以下错误：

```
homePage(ActiveComponentTest)  Time elapsed: 2.06 sec  <<< ERROR!
com.gargoylesoftware.htmlunit.ObjectInstantiationException: unable to create HTML parser
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.<init>(HTMLParser.java:427)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.<init>(HTMLParser.java:351)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parse(HTMLParser.java:205)
    at com.gargoylesoftware.htmlunit.html.HTMLParser.parseHtml(HTMLParser.java:180)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createHtmlPage(DefaultPageCreator.java:267)
    at com.gargoylesoftware.htmlunit.DefaultPageCreator.createPage(DefaultPageCreator.java:155)
    at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseInto(WebClient.java:440)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:315)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:380)
    at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:365)
    at ActiveComponentTest.homePage(ActiveComponentTest.java:54)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)
Caused by: org.xml.sax.SAXNotRecognizedException: Feature 'http://cyberneko.org/html/features/scanner/allow-selfclosing-iframe' is not recognized.
    at org.apache.xerces.parsers.AbstractSAXParser.setFeature(Unknown Source)
    at com.gargoylesoftware.htmlunit.html.HTMLParser$HtmlUnitDOMBuilder.<init>(HTMLParser.java:420)
    ... 43 more
homePage(ActiveComponentTest)  Time elapsed: 2.064 sec  <<< ERROR!
java.lang.NullPointerException: No document element (http://htmlunit.sourceforge.net/)

    at com.gargoylesoftware.htmlunit.html.HtmlPage.executeEventHandlersIfNeeded(HtmlPage.java:1190)
    at com.gargoylesoftware.htmlunit.html.HtmlPage.isOnbeforeunloadAccepted(HtmlPage.java:2123)
    at com.gargoylesoftware.htmlunit.TopLevelWindow.close(TopLevelWindow.java:112)
    at com.gargoylesoftware.htmlunit.WebClient.closeAllWindows(WebClient.java:1916)
    at ActiveComponentTest.tearDown(ActiveComponentTest.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:36)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)
    at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)
    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:42:36.987

我发现我的 POM 中的一个项目依赖项是一个不同的、不兼容的 nekoHTML 版本。

一旦我删除了有问题的依赖项（这是我正在测试的项目的保留，而不是我用来测试另一个项目的这个项目——长篇大论），一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T12:22:09.647

@jlars62，你的 pom 中可能有这样的东西：

```
 <dependency>
        <groupId>net.sourceforge.htmlunit</groupId>
        <artifactId>htmlunit</artifactId>
        <version>2.14</version>
    </dependency> 
```

添加排除如下：

```
 <dependency>
        <groupId>net.sourceforge.htmlunit</groupId>
        <artifactId>htmlunit</artifactId>
        <version>2.14</version>
        **<exclusions>
            <exclusion>
                <groupId>net.sourceforge.nekohtml</groupId>
                <artifactId>nekohtml</artifactId>
            </exclusion>
        </exclusions>**
    </dependency> 
```

# jquery - Excel 喜欢在 jqgrid 中进行过滤

> ID：12869819
> 
> 赞同：5
> 
> 时间：2012-10-13T03:59:47.730
> 
> 标签：jquery, jqgrid

我是 jquery 和 jqGrid 的新手。我正在为此苦苦挣扎。我需要有人在 JqGrid 中帮助我，我需要在 jqGrid 中过滤标题。当我找到Oleg 完成的[演示时，我会寻找它。](http://www.ok-soft-gmbh.com/jqGrid/ButtonsInTheColumnHeaders.htm)但是当我选择复选框时，我需要复选框，搜索值必须像 Excel 过滤一样进行过滤。请帮帮我。

即使我找到了[实现](https://stackoverflow.com/questions/7016109/jqgrid-any-easy-way-to-implement-undo-on-excel-like-jqgrid-implementation)，但这对我不起作用。请帮助我，因为我非常需要它。

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T18:22:49.067

我不喜欢“Excel 喜欢过滤”这样的词，因为每个人都以不同的方式解释它。所以我必须以我如何解释它的方式来回答。

我认为您应该使用[Eric Hynds](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)编写的jQuery UI [MultiSelect Widget](https://github.com/ehynds/jquery-ui-multiselect-widget)。我之前写了一些答案和演示，展示了如何使用它。

[该演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithSearchingToolbarMultilpe.htm)展示了如何使用 jQuery UI MultiSelect Widget 和[工具栏搜索](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching#calling_convention)来实现“类似 Excel 的过滤”。

![在此处输入图像描述](../Images/bf89f1e7ccffc033cbd871e4117bf885.png)

顺便说一句，您可以动态构建多选小部件显示的值列表，就像[答案](https://stackoverflow.com/a/5329014/315935)中 jQuery UI Autocomplete 的值一样。

带有相应演示（[this](http://www.ok-soft-gmbh.com/jqGrid/MultipleCheckboxEdit.htm)和[this](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithMultselect.htm) ）的另一个答案（[this](https://stackoverflow.com/a/10851429/315935)和[this](https://stackoverflow.com/a/9999761/315935)）显示了如何使用小部件进行编辑。

**更新**：[更新的演示使用 jqGrid 4.4.1、jQuery UI 1.8.24 和 jQuery 1.8.2 以及从](http://www.ok-soft-gmbh.com/jqGrid/simplelocalgridwithsearchingtoolbarmultilpe1.htm)[github](https://github.com/ehynds/jquery-ui-multiselect-widget/)下载的 jQuery UI Multiselect 的当前版本（29.09.2012 的 1.13.6 版本）。

**更新2**：[答案](https://stackoverflow.com/a/26949859/315935)包含在使用“刷新”按钮的情况下需要`beforeClear`回调。`filterToolbar`答案包含使用 jqGrid 4.6.0 的更新演示。

# c# - 如何更改表单的内容

> ID：12869820
> 
> 赞同：0
> 
> 时间：2012-10-13T03:59:50.037
> 
> 标签：c#, windows, winforms

我有一个用 C# 制作的表单，它有两个文本框和一个按钮。我想知道点击按钮时有没有办法。将原始表单的布局更改为只有一个文本框和一个按钮。它们与原始文本框和按钮完全不同，只是为了让您知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T05:14:15.083

您可以轻松删除原始控件，然后添加新控件。

我相信以下内容应该可以回答您的问题，而没有所有负面的诽谤。

```
 private void btnThatGetsClicked_Click(object sender, EventArgs e)
    {
        //Remove the existing controls.
        this.Controls.Remove(this.textBox1);
        this.Controls.Remove(this.textBox2);
        this.Controls.Remove(this.btnThatGetsClicked);

        //Create the new controls.
        TextBox TextBox_New = new TextBox();
        Button Button_New = new Button();

        //Add the new controls to this form.
        this.Controls.Add(TextBox_New);
        this.Controls.Add(Button_New);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:15:49.573

像下面的代码你可以改变表单内容的布局

```
private void button1_Click(object sender, EventArgs e)
{
    textBox1.Visible = false; // to hide textbox
    button1.Size = new Size(60, 20);// for changing button layouts
} 
```

# sql - DVD 租赁公司的 SQL Server 查询

> ID：12869826
> 
> 赞同：0
> 
> 时间：2012-10-13T04:00:56.093
> 
> 标签：sql

我有一个用于电影租赁业务的示例数据库。我正在尝试编写一个查询来查找当前已售罄的所有电影标题。

*   该电影的所有 DVD 目前都已出租。或者...
*   那部电影没有 DVD

请记住，我想确保此查询不会捕获库存中但从未出现在租借表中的 DVD。

编辑：这是我到目前为止所拥有的，但我无法解释上面一行中的场景^。

```
SELECT Count(DvdID) AS Inventory, Movie.Title
FROM Dvd
JOIN Movie on Dvd.MovieID = Movie.MovieID
WHERE Dvd.DvdID IN
    (SELECT RentalID
    FROM Rental
    WHERE Rental.ReturnDate IS NULL)
OR Dvd.DvdID NOT IN
    (SELECT Dvd.DvdID
    FROM Dvd
    WHERE DvdID NOT IN
    (SELECT Rental.DvdID FROM RENTAL)
    )

GROUP BY Movie.Title 
```

表格：

## 电影

-电影ID

-电影标题

## DVD

-DVDID

-电影ID

## 出租

-RentalID

-DVDID

-帐户ID

-出租日期

-归期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:42:17.797

您只需要更正第一个子查询中的错误 - 不`DvdID`应该`RentalID`。这个查询对我有用，对你有用吗？

询问：

```
SELECT Count(DvdID) AS Inventory, MovieTitle
FROM Dvd
JOIN Movie on Dvd.MovieID = Movie.MovieID
WHERE Dvd.DvdID IN
    (SELECT DvdID
    FROM Rental
    WHERE Rental.ReturnDate IS NULL)
OR Dvd.DvdID NOT IN
    (SELECT Dvd.DvdID
    FROM Dvd
    WHERE DvdID NOT IN
    (SELECT Rental.DvdID FROM RENTAL)
    )
GROUP BY MovieTitle 
```

# scala - 如何优雅地将 Option[List] 连接到 List？

> ID：12869832
> 
> 赞同：6
> 
> 时间：2012-10-13T04:01:59.407
> 
> 标签：scala

我试图编写这 3 个代码但没有成功：

```
aList.foldLeft(List()){(accu, element) => map.get(elment):::accu}
aList.foldLeft(List()){(accu, element) => if (!map.get(element).isEmpty) map.get(element):::accu}
aList.foldLeft(List()){(accu, element) => map.get(elment).exists(_:::accu)} 
```

有谁知道如何将选项连接到列表？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-13T04:12:56.207

要将选项与列表连接起来，您可以这样做`option.toList ++ list`

将 a`Option[List[A]]`与 a连接`List[A]` `optionOfList.toList.flatten ++ list`

基本思想是您始终可以将选项转换为 0 或一个元素的列表，这使得以不同方式将它们与列表组合起来很容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T11:18:00.020

撒一些**scalaz**：

```
import scalaz._; import Scalaz._ 
```

并设置：

```
scala> val optList = some(List(1, 2, 3, 4)
optList: Option[List[Int]] = Some(List(1, 2, 3, 4))

scala> val list = List(5, 6, 7)
list: List[Int] = List(5, 6, 7) 
```

然后我可以这样做：

```
scala> ~optList ::: list
res0: List[Int] = List(1, 2, 3, 4, 5, 6, 7) 
```

基本上`~`是附加到*类型为零*`Option[A]`的一元方法。列表的*零*当然是，*`A`*`Nil`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-04T09:33:32.500

如果您想在列表末尾添加一个选项，那么只需使用`List.++`

```
val ss = Seq(1,2)   // ss: Seq[Int] = List(1, 2)
ss ++ Option(3)     // res0: Seq[Int] = List(1, 2, 3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T11:31:53.800

@oxbow_lakes 和 @rjsvaljean 的答案非常好，但他们仍然错过了一个可以通过非常惯用的 Scala 解决的可能情况：

```
scala> List(1,2,3)
res6: List[Int] = List(1, 2, 3)

scala> Option(List(5,6,7))
res7: Option[List[Int]] = Some(List(5, 6, 7))

scala> for (l<-res7) yield l ++ res6
res8: Option[List[Int]] = Some(List(5, 6, 7, 1, 2, 3))

scala> for(l<-(None:Option[List[Int]])) yield l ++ res6
res9: Option[List[Int]] = None 
```

上面代码所示的缺失案例应该是`None`yield`None`而不是`Nil`?**

# sql - 将两个外键的级联删除到单个主键

> ID：12869834
> 
> 赞同：0
> 
> 时间：2012-10-13T04:02:05.857
> 
> 标签：sql, sql-server, foreign-keys, primary-key

在我当前的项目中，我正在创建一个非常简单的一对一消息服务。我有两张桌子，`users`和`messages`。表的当前结构`messages`是这样的：

```
id  | from | to    | message    | sent     | received
int | int  | int   | string     | datetime | datetime 
```

`from`和`to`字段都是`users`主键（id）的外键。这似乎工作正常，但我不能让他们都使用级联删除。我收到此错误：

```
Introducing FOREIGN KEY constraint 'FK_messages_users_to' on table
'messages' may cause cycles or multiple cascade paths. Specify ON 
DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints.
Could not create constraint. See previous errors. 
```

这可以做到吗？我不明白为什么它不起作用。如果删除了用户，我想删除整个对话，以便在`from`或`to`字段中具有用户 ID 的任何行。

# iphone - 在全局变量 Objective-C Iphone 中丢失数据

> ID：12869840
> 
> 赞同：-1
> 
> 时间：2012-10-13T04:02:58.977
> 
> 标签：iphone, objective-c, global-variables, appdelegate

我想在我的代码中使用全局变量。我有一些 ViewController 使用一些实例，所以使用全局会更容易然后在控制器之间传递实例。

因此，我在 AppDelegate 中创建了全局：

AppDelegate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    //Global Variables
    NSInteger userID;
    NSMutableArray *friends;
}
@property (assign, nonatomic) NSInteger userID;
@property (strong, nonatomic) NSMutableArray *friends; 
```

AppDelegate.m

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    ...
    self.friends = [[NSMutableArray alloc] init];
    return YES; 
```

}

我在任何控制器中访问全局，在 ViewControllerN.h 中添加此代码：

```
#import "AppDelegate.h"
#define global \ ((AppDelegate *)[UIApplication sharedApplication].delegate) 
```

所以在 ViewControllerN.m 我可以访问全局，例如：

```
[global.friends addObject:@"Henry"]; 
```

它完美地工作。但是在某个地方，我正在丢失来自全球的数据。

我在 PageControllerA (ControllerA) 中启动我的应用程序

*   控制器 A 有一个带有控制器 B、C 和 D 的滚动视图。
*   我在 ControllerA viewdidLoad 中将数据添加到 global.friend
*   控制器 B、C、D 可以在 viewDidLoad 中正确访问全局，但是当我从任何这个控制器调用方法时，global.friend 是空的。
*   控制器 B 调用控制器 E，但控制器 E 的 global.friend 也是空的。

我只在 global.friend 中的白色数据，从不删除任何对象。

为什么我会丢失数据？（global.friend 为空）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:43:23.633

As suggested by Josiah in one of the answers here there are better ways to do this. However, I like using Global Variables as well some times and I usually create an NSObject class and declare the global variables there.

To do so you need to create a new NSObject file. in the *.h file, above the interface you should declare your variable **using** 'extern'

```
extern NSMutableDictionary *SavedUsersDictionary; 
```

in the *.m file you should your variable above the interface **without** the 'extern'

```
NSMutableDictionary *SavedUsersDictionary; 
```

Then import the class wherever you need to use the variable. You can also set the variable as a class property and synthesize it.

Hope that helps.

# javascript - 当我使用 $ 时，正则表达式不起作用

> ID：12869844
> 
> 赞同：1
> 
> 时间：2012-10-13T04:04:48.610
> 
> 标签：javascript, regex, replace, special-characters

```
var x = '#google';    // or '@google' or '%google'
var pattern = new RegExp('(^|\\s)' + x);
var result = txt.replace(pattern, '$1' + 'MyNewWord'); 
```

此代码可以很好地替换#google

如果我使用 & 或 @ 而不是 # 它工作正常

只有当我使用 $ 而不是 # 时它不起作用所以下面的代码不能正常工作

```
var x = '$google';   
var pattern = new RegExp('(^|\\s)' + x);
var result = txt.replace(pattern, '$1' + 'MyNewWord'); 
```

ps 我使用了新的 RegEXP，因为 x 将是用户输入。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T04:07:13.223

`$`是 RegExp 中的特殊字符，因此您需要对其进行转义：

```
var x = '\\$google';
var pattern = new RegExp('(^|\\s)' + x); 
```

# php - 如何根据类别获取产品

> ID：12869846
> 
> 赞同：0
> 
> 时间：2012-10-13T04:05:06.837
> 
> 标签：php, mysql, categories, product

我最近制作了一个目录，其中包含 2 个类别（诺基亚，三星）现在我希望当用户点击诺基亚时，诺基亚产品应该出现，当用户点击三星时，三星产品应该是 apeear 请帮助我提供详细代码。谢谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:38:54.367

这些都是假设，因为您没有发布所需的全部详细信息，例如模式、示例记录和期望的结果。

您需要的是`WHERE`查询中的条件。什么`Where`是过滤表上的记录。前任，

```
SELECT *                       // -- * means all columns
FROM  catalog
WHERE category = 'Nokia' 
```

当您执行上面的 sql 查询时，它将列出您的表中的所有记录，其类别为`Nokia`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T06:18:21.273

我不确定你的表结构

但是对于查询优化，您应该使用类别与产品的一对多关系

你可以使用左连接来获取数据

SELECT categories.name, products.name FROM categories LEFT JOIN products ON categories.id=products.cat_id where categories.name = "Nokia"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T06:45:43.923

您可以使用以下 sql 查询按类别获取产品....

```
SELECT c.name, p.name FROM categories as c LEFT JOIN products as p ON c.id=products.cat_id where c.name like "Nokia"; 
```

# javascript - 使用模块模式在 YUI3 中创建自定义模块

> ID：12869850
> 
> 赞同：1
> 
> 时间：2012-10-13T04:06:50.310
> 
> 标签：javascript, module, namespaces, yui, yui3

在我的模块中，我想让一些变量和函数向公众公开，但我不确定应该以哪种方式编写。

```
<script type="text/javascript">
    YUI.add('my-module1', function (Y) {

              Y.namespace("MyModule1");

              var privateVar='some data';
              var privateFunc=function(){...};

              /*should I do it like this?*/
              Y.MyModule1.publicVar='some data';
              Y.MyModule1.publicFunc=function(){...};

              /*or is this correct if I do it like this?*/
              var publicVar='some data';
              var publicFunc=function(){...};

              return{
                  publicVar: publicVar,
                  publicFunc: publicFunc
              };

    }, '0.0.1', {
              requires: []
    });

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T11:50:27.420

第一种方法是通过将公共成员附加到 Y，而不是返回对象。

有关示例，请参见[http://yuilibrary.com/yui/docs/yui/#yuiadd](http://yuilibrary.com/yui/docs/yui/#yuiadd)和[https://github.com/yahoo/yui3-cookbook/blob/master/examples/loading/add_basic.html](https://github.com/yahoo/yui3-cookbook/blob/master/examples/loading/add_basic.html)。

# java - Java - 从文本文件加载二叉树

> ID：12869852
> 
> 赞同：3
> 
> 时间：2012-10-13T04:08:09.280
> 
> 标签：java, tree, stack

我正在尝试从相应的字符串文件中加载二叉树。我很早就在代码中收到了 NoSuchElementException 错误（确切的行已注释），我不确定该算法是否可以开始工作。文本文件的顺序如下：

```
hello 0 0
my 0 0
name 1 1 
```

其中第一个数字表示节点是否有左孩子，第二个数字表示节点是否有右孩子。

我的 BinaryTree 类有两个子类 ConsTree 和 EmptyTree，每棵树都有自己的左右子树。

这是该方法的代码：

```
BinaryTree<String> loadFile(String filename)
{
        File file = new File(filename);
        Scanner scanny = new Scanner(file);

        Stack<BinaryTree<String>> stack = new Stack<BinaryTree<String>>();

        while(scanny.hasNextLine())
        {
            String data = scanny.next();
            int leftChild = scanny.nextInt();
            int rightChild = scanny.nextInt();
            ConsTree<String> tree = new ConsTree<String>(data, null, null);

            if(rightChild == 1) //this line throws a NoSuchElementException
            {
                tree.right = stack.pop();
            }

            if(leftChild == 1)
            {
                tree.left = stack.pop();
            }

            stack.push(tree);
        }

        return stack.pop();
} 
```

这是我的 ConsTree 类的构造函数。这是我创建该方法时唯一的其他代码。

```
public ConsTree(T data, BinaryTree<T> left, BinaryTree<T> right)
{
    this.data = data;
    this.left = left;
    this.right = right;
}

public ConsTree(T data)
{
    this.left = new EmptyTree();
    this.right = new EmptyTree();
    this.data = data;
} 
```

EmptyTree 类的构造函数是完全空白的。

这是我用来测试该方法的内容：

```
 public static void main(String[] args) 
 {
      Loader l = new Loader(); //the class with the load method in it
      BinaryTree<String> t = l.loadFile(args[0]);
      System.out.println(t);
 } 
```

args[0] 包含文本文件的名称，该文件的内容列在问题的开头。

如果有人能把我引向正确的方向，那将很有帮助。

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:57:04.637

您在读取数据元素和`if`条件方面的代码似乎很好。**这条线没有出现错误** `if(rightChild == 1)`。请仔细看，它必须来自该行`tree.right = stack.pop();`或包含您的堆栈操作的其他行。

我怀疑它的来源`tree.right`，因为没有这样的元素。如果您可以共享其余代码，这将有助于找到确切的问题。

# eclipse-rcp - 如何重新启动 e4 RCP 应用程序

> ID：12869859
> 
> 赞同：3
> 
> 时间：2012-10-13T04:10:00.867
> 
> 标签：eclipse-rcp, e4

如果 IApplication.start 返回 IApplication.EXIT_RESTART，则将重新启动基于 3.* 的 RCP 应用程序。E4Application 类似乎总是返回 EXIT_OK。

org.eclipse.ui.IWorkbench 也有重启方法，org.eclipse.e4.ui.workbench.IWorkbench 没有。

那么如何重新启动 e4 RCP 应用程序呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-21T20:43:45.147

`org.eclipse.e4.ui.workbench.IWorkbench`现在`restart`在 Eclipse Kepler (4.3) 中有一个方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T09:34:58.580

在将此功能引入 e4 之前，我的解决方法是这样的：我使用 IApplication 实现作为 E4Application 的包装器。这样，我可以从 start 方法返回 IApplication.EXIT_RESTART 并且 Equuniox 将重新启动。

但请注意，此解决方法使用内部 API，将来可能会更改！

```
package de.emsw.gosa.e4.application;

import org.eclipse.e4.ui.internal.workbench.swt.E4Application;
import org.eclipse.equinox.app.IApplication;
import org.eclipse.equinox.app.IApplicationContext;

public class MyE4Application implements IApplication {

    private static MyE4Application instance;

    public static MyE4Application getInstance() {
        return instance;
    }

    private Integer exitRet = IApplication.EXIT_OK;
    private E4Application e4app;

    public void setRestart() {
        exitRet = IApplication.EXIT_RESTART;
    }

    @Override
    public Object start(IApplicationContext context) throws Exception {
        instance = this;
        e4app = new E4Application();
        e4app.start(context);
        return exitRet;
    }

    @Override
    public void stop() {
        e4app.stop();
    }
} 
```

当你想重启时，你现在可以使用 Singleton 来设置返回值：

```
@Execute
public void execute(IWorkbench workbench) {
    MyE4Application.getInstance().setRestart();
    workbench.close();
} 
```

我在这里使用了 Singleton，因为这样更容易解释。更好的解决方案是将您的 IApplication 注册为 OSGi 服务并让 DI 将其注入您的处理程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:40:10.663

Eclipse 4.2 中的当前实现导致了一个 ID 为 org.eclipse.ui.file.restartWorkbench 的命令，该命令最终导致了处理程序类 RestartWorkbenchHandler。该类实现如下

```
public Object execute(ExecutionEvent event){

    PlatformUI.getWorkbench().restart();
    return null;
} 
```

这意味着，它依赖于 Eclipse 3.x，因为 PlatformUI 类在纯基于 Eclipse 4 的应用程序中不再可用。所以如果你想在你的 e4 应用程序中解决这个任务，创建一个命令，实现处理程序，目前你将有一些 E3 代码依赖！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-17T08:14:15.470

你可以试试这个

```
 public void restart() {Display.getDefault().asyncExec(new Runnable(){
         @Override
          public void run() {
          PlatformUI.getWorkbench().restart();
        }
    }); 
```

# android - 无法向sqlite数据库android添加新记录

> ID：12869860
> 
> 赞同：2
> 
> 时间：2012-10-13T04:10:21.743
> 
> 标签：android, sqlite, android-sqlite

我正在尝试在我的 sqlite 数据库中添加新记录。当我使用 sqlite manager 看到数据库时，我没有收到任何错误，但也没有在数据库中看到任何类型的记录，下面是我编写的代码。请帮助我摆脱这个问题。

以下是我的数据库处理程序代码..

```
enter code here
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
import android.widget.Toast;

public class DatabaseHandler extends SQLiteOpenHelper
{

private static final int DATABASE_VERSON=1;
private static final String DATABASE_NAME="Info_manager";
private static final String TABLE_DETAILS = "info_detail";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_FNAME = "f_name";
private static final String KEY_LNAME = "l_name";
private static final String KEY_PH_NO = "c_num";
private static final String KEY_EMAIL = "e_mail";

public DatabaseHandler(Context context) 
{
    super(context,null , null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) 
{
    //db = this.getWritableDatabase();
    ///System.out.println("----333------");
    String CREATE_DETAILS_TABLE = "CREATE TABLE " + TABLE_DETAILS 
    + "("
    + KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT," + KEY_FNAME + " TEXT," + KEY_LNAME + " TEXT," + KEY_PH_NO + " TEXT," + KEY_EMAIL + " TEXT " + ")";

    db.execSQL(CREATE_DETAILS_TABLE);
    ///System.out.println("----444------");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
{
    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_DETAILS);
    // Create tables again
    onCreate(db);

}

 // Adding new contact
void addContact(Contact contact) 
{
    SQLiteDatabase db = this.getWritableDatabase();
   // ContentValues values = new ContentValues();

    String sql;
    sql = "INSERT INTO info_detail (f_name, l_name, c_num, e_mail) " + 
    "VALUES ('" + contact.getfName().toString() + "', '" + contact.getlName().toString() + "', '" + contact.getContactNumber().toString()+ "', '" + contact.getEmailAddress().toString() +"' )";

    db.execSQL(sql);

    /*values.put(KEY_FNAME, contact.getfName());
    values.put(KEY_LNAME, contact.getlName());
    values.put(KEY_PH_NO, contact.getContactNumber());
    values.put(KEY_EMAIL, contact.getEmailAddress());*/
    // Inserting Row
    System.out.print("----inserting----");
    //db.insert(TABLE_DETAILS, null, values);

    System.out.print("----inserted----");
    db.close(); 
} 
```

}

以下是我调用处理程序的活动

```
public class SQLitelActivity extends Activity implements OnClickListener 
{

EditText fname,lname,con_num,email_adr;
Button savebtn,viewbtn;
DatabaseHandler db;
//SQLiteDatabase db;
@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_sqlitel);

    fname=(EditText)findViewById(R.id.fname);
    lname=(EditText)findViewById(R.id.lname);
    con_num=(EditText)findViewById(R.id.cnumber);
    email_adr=(EditText)findViewById(R.id.email);

    savebtn=(Button)findViewById(R.id.save);
    viewbtn=(Button)findViewById(R.id.view);

    db=new DatabaseHandler(this);

    savebtn.setOnClickListener(new OnClickListener() 
    {
        @Override
        public void onClick(View v) 
        {
            //System.out.println("----111------");
            db.addContact(new Contact(fname.getText().toString()
                    , lname.getText().toString(),con_num.getText().toString(),email_adr.getText().toString()));
        //  System.out.println("----222------");
        }
    }
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T04:34:57.893

这是经过修改的代码，

```
public DatabaseHandler(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    } 
```

**您在超级构造函数**中错过了数据库名称。

我正在使用以下方法将联系人添加到数据库，

```
 // Adding new contact
    void addContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_FNAME, contact.getfName().toString()); // Contact First Name
        values.put(KEY_LNAME, contact.getlName().toString()); // Contact Last Name
        values.put(KEY_PH_NO, contact.getContactNumber().toString()); // Contact Number
        values.put(KEY_EMAIL, contact.getEmailAddress().toString() ); // Contact Email

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        db.close(); // Closing database connection
    } 
```

我希望这能帮到您。谢谢。

# php - 如何在 PHP 中访问二维数组中的数据

> ID：12869862
> 
> 赞同：1
> 
> 时间：2012-10-13T04:10:41.350
> 
> 标签：php, arrays

我需要帮助来访问所有字段中的数据，原始数据从 json 对象提供并且已经在数组 $from 中解码

这是一个 print_r($from) 结果：

```
Array ( [0] => Array ([numberOfResult] => 1 [idUsager] => 1 [idUnique] => 1880e784 [codeLanguage] => fr [language] => Français [idCountry] => 66 [country] => Québec - Montréal [photo] => /usagers/1/1880e784/1880e784.png [pseudo] => PLATiNUM2727 [firstName] => Bedard [lastName] => Gabriel [ddn] => 1994-08-19 [mindText] => new status [compteVerifie] => 2012-01-03 [online] => 10 [onlineDescription] => En ligne [iSearch] => 3 [iSearchDescription] => Amis [level] => 5000 [levelDescription] => Administrateur [lookingFor] => partys & événements, Sexe, Autre..., [myInterest] => nature [myFavoriteBooks] => Dan Brown [myFavoriteMovies] => action [myFavoriteMusic] => Trance4Ever [myFavoriteTvShows] => CSI Miami [description] => description [dateDescrWaitingApproval] => 2012-07-17 17:38:23 [dateDescrApprouved] => 0000-00-00 00:00:00 [descriptionWaiting] => test [lastModification] => 2012-10-06 20:51:59 [bodyType] => Costaud [carOwner] => Non [homeOwner] => Non [smoking] => Non [drinking] => Socialement [drug] => Rarement [eyeColor] => Brun pâle [hairColor] => Bruns pâles [education] => BACC Universitaire gradué [height] => 5'7" (170 cm) [weight] => 196 lbs (89 kg) [relationshipStatus] => Célibataire [sexualOrientation] => Préfère ne pas dire [zodiac] => Capricorne [job] => Informatique ) )` 
```

例如，我如何访问 [numberOfResult] 或 [firstName] ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:14:04.020

```
$from[0]['numberOfResult'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:20:22.110

这是二维数组的示例表，

![在此处输入图像描述](../Images/275f465a12075908c054eb6be0249457.png)

在 PHP 到 HTML 中访问和显示上表的代码。

```
<?php
echo "<h1>Manual access to each element</h1>";

echo $shop[0][0]." costs ".$shop[0][2]." and you get ".$shop[0][2]."<br />";
echo $shop[1][0]." costs ".$shop[1][3]." and you get ".$shop[1][2]."<br />";
echo $shop[2][0]." costs ".$shop[2][4]." and you get ".$shop[2][2]."<br />";

echo "<h1>Using loops to display array elements</h1>";

echo "<ol>";
for ($row = 0; $row < 3; $row++)
{
    echo "<li><b>The row number $row</b>";
    echo "<ul>";

    for ($col = 0; $col < 3; $col++)
    {
        echo "<li>".$shop[$row][$col]."</li>";
    }

    echo "</ul>";
    echo "</li>";
}
echo "</ol>";
?> 
```

参考[链接](http://webcheatsheet.com/PHP/multidimensional_arrays.php#twodim)

我希望这能帮到您。谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T04:14:58.213

用`[numberOfResult]`这个

```
echo $from[0]['numberOfResult']; 
```

并`[firstName]`使用它

```
echo $from[0]['firstName']; 
```

# php - 的奇怪行为 试图在我的网页上打印这个： master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP) or die("socket_create() failed"); 只获得： master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP) or die("socket_create() failed"); ！！ 同时，我可以在 Chrome Inspector Network 选项卡中看到它已正确传送到浏览器。 当我检查 PRE 元素时，我看到了这个：

```
master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP) or die("socket_create() failed"); 
```

谁注释掉了代码，为什么，主要问题是如何阻止它！？ 替换为$this->，您将获得预期的结果。 小提琴 通常，HTML 中的文字尖括号和 & 符号应替换为实体以避免误解。在这种情况下，Chrome 假定接收文字 PHP 代码是一个错误，而不是故意的，并将其转换为注释。我找不到任何说明它这样做的文档，但很明显发生了什么。 phphtmlpre 4 1 回答 1 This answer is useful 2 替换为$this->，您将获得预期的结果。 小提琴 通常，HTML 中的文字尖括号和 & 符号应替换为实体以避免误解。在这种情况下，Chrome 假定接收文字 PHP 代码是一个错误，而不是故意的，并将其转换为注释。我找不到任何说明它这样做的文档，但很明显发生了什么。 于 2012-10-16T00:07:52.720 回答 Related 2 json - 如何在结构中定义多个名称标签 4 javascript - 在javascript正则表达式中使用$符号？ 2 matlab - 调整图像大小并保留纵横比 1 facebook - Facebook Page Tab App - 访问应用前的类似页面 0 android - 如何在 Android 中管理背景动画？ 1 gis - topoJSON 可以创建复合属性吗？ 1 php - 从数据库中获取跨越多天的事件 1 coldfusion - Mailchimp API listsubscribe() 没有将订阅者添加到我的列表中 1 sql - sql server 2012中的回车 1 mysql - mysql查询相关表的条件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12869865
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, html, pre

试图在我的网页上打印这个：

```
<?php  

// Usage: $master=new WebSocket("localhost",12345);

class WebSocket{
  var $master;
  var $sockets = array();
  var $users   = array();
  var $debug   = false;

  function __construct($address,$port){
    error_reporting(E_ALL);
    set_time_limit(0);
    ob_implicit_flush();

    $this->master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP)     or die("socket_create() failed"); 
```

只获得：

```
master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP)     or die("socket_create() failed"); 
```

！！

同时，我可以在 Chrome Inspector Network 选项卡中看到它已正确传送到浏览器。

当我检查 PRE 元素时，我看到了这个：

```
<pre><!--?php  

// Usage: $master=new WebSocket("localhost",12345);

class WebSocket{
  var $master;
  var $sockets = array();
  var $users   = array();
  var $debug   = false;

  function __construct($address,$port){
    error_reporting(E_ALL);
    set_time_limit(0);
    ob_implicit_flush();

    $this--->master=socket_create(AF_INET, SOCK_STREAM, SOL_TCP)     or die("socket_create() failed");

</pre> 
```

谁注释掉了代码，为什么，主要问题是如何阻止它！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:07:52.720

替换`<?php`为`&lt;?php`和替换`$this->`为`$this-&gt;`，您将获得预期的结果。 [小提琴](http://jsfiddle.net/barmar/yVJDb/)

通常，HTML 中的文字尖括号和 & 符号应替换为实体以避免误解。在这种情况下，Chrome 假定接收文字 PHP 代码是一个错误，而不是故意的，并将其转换为注释。我找不到任何说明它这样做的文档，但很明显发生了什么。

# sql - 如何更新多行？

> ID：12869874
> 
> 赞同：0
> 
> 时间：2012-10-13T04:13:33.443
> 
> 标签：sql, sqlite

该表如下所示：

```
status1   status2   status3   element
  0         1         2       music1
 ... 
```

我的脚本像这样提取数十万行，对它们进行一些处理，然后写回新状态。问题是，如果我像这样一一更新这些行：

```
UPDATE music_table
  SET status1 = '10',
      status2 = '20,
      status3 = 30
WHERE element = 'music1'; 
```

完成所有工作将花费大量时间。（超过 1.5 小时！！）

所以问题是，我如何同时更新多行，甚至有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:47:46.937

`element`如果一次更新一行，则在列上建立索引可以更快地找到行。

但是，如果您可以在 SQL 表达式中计算新状态，也可以一次更新多行：

```
UPDATE music_table SET status1 = status1 + 1 
```

（这会更改所有行的状态；您仍然可以使用`WHERE`将更新限制为某些行。）

如果计算更复杂，您可以注册一个*用户定义的函数*：

```
from pysqlite2 import dbapi2 as sqlite3

def compute_status1(a, b, c):
    return a + b + len(c)

db = sqlite3.connect(...)
db.create_function("compute_status1", 3, compute_status1)
cur = db.cursor()
cur.execute('UPDATE music_table SET status1 = compute_status1(status2, status3, element)')
cur.close() 
```

# sql - SQL WHERE 和 AND 子句

> ID：12869877
> 
> 赞同：-1
> 
> 时间：2012-10-13T04:14:28.607
> 
> 标签：sql

当我们进行这样的查询时

```
SELECT COUNT(*)
FROM A, B, C
WHERE A.type = B.type
AND B.cost = C.cost 
```

我们可以对结果表说些什么？结果表的大小是多少？如果A有5行，B有8行，C有7行

编辑：我可以得到一些回应而不是降价吗？我对 SQL 完全陌生，需要帮助。

EDIT2：**我想要做什么 -**了解 WHERE 和 AND 子句的工作原理以及为什么结果表有 8 行

**你是如何提出这个特定问题的——** 我正在阅读我的教科书并做其中的问题

**我试图解决的问题 -**我尝试了谷歌并阅读了各种帖子，但其中大多数只是展示了如何做到这一点，而不是解释实际发生了什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T04:25:49.560

计数将是公共值的数量。例如考虑这个小例子

```
DECLARE @A Table(Val1 Int)
Insert Into @A Values(1),(2),(3),(4),(5)

DECLARE @B Table(Val2 Int)
Insert Into @B Values(1),(2),(3),(4),(5),(6)

DECLARE @C Table(Val3 Int)
Insert Into @C Values(1),(2),(3),(4),(5),(6),(7)

SELECT COUNT(*)
FROM @A a, @B b, @C c
WHERE a.Val1 = b.Val2
AND b.Val2 = c.Val3 
```

结果是**5**。因为`a.Val1 = b.Val2`有 5 个共同元素，即 1,2 3,4,5。现在`b.Val2 = c.Val3`有 6 个共同元素，即 1,2,3,4,5,6。

然后这两个结果集将相互影响，并尝试获得相交的值，即公共值，同样是 1、2、3、4、5。因此计数为 5

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:31:25.183

不出所料，结果集的大小取决于与`WHERE`条件匹配的 A、B 和 C 实体的 3 元组的数量。

现在，这完全取决于数据。您可能有一组数据，其中 A.type 为 all `Apples`， B.type 为 all `Oranges`，并且您的条件永远不会满足，因此您的结果集为空。

在另一个极端，所有行的类型都匹配，因此您最终得到每个可能的组合，或 5*8*7 结果行。

# java - 如何在java中对二维数组的列求和

> ID：12869878
> 
> 赞同：0
> 
> 时间：2012-10-13T04:14:39.293
> 
> 标签：java, multidimensional-array, sum

好的，我正在尝试添加二维数组的列的总和，但到目前为止，我能够添加行的总和，但不能添加其他 3 列。有人可以告诉我我做错了什么吗？

![这是我的输出图片](../Images/d9601fcc4fdff582915bd0d085a63b14.png)

```
 public static void main(String[] args) throws IOException
{
    // TODO code application logic here
    File election = new File("voting_2008.txt");
    Scanner sc = new Scanner(election);

    String[] states = new String[51];
    int[][]votes = new int[51][3];

    for (int s=0; s < 51; s++)
    {
        states[s] = sc.nextLine();
    }

    for(int c=0; c < 3; c++)
    {
        for(int s=0; s < 51; s++)
        {
            votes[s][c] = sc.nextInt();

        }

    }
    Formatter fmt = new Formatter();
    fmt.format("%20s%12s%12s%12s%21s", "State", "Obama", "McCain", "Other", "Total by state");
    System.out.println(fmt);
    int TotalSum; 
    TotalSum = 0;
    for (int s=0; s < 51; s++)
    {
       fmt = new Formatter();
       fmt.format("%20s", states[s]);
       System.out.print(fmt);
       for(int c=0; c < 3; c++)
       {
           fmt = new Formatter();
           fmt.format("%12d", votes[s][c]);
           System.out.print(fmt);

       }

           int sum =0;
           for (int col=0; col < votes[s].length; col++)
           {
              sum = sum + votes[s][col];

           }

           TotalSum += sum;
           fmt = new Formatter();
            fmt.format("%21d", sum);
            System.out.print(fmt); 

       System.out.println();

    }
    Formatter fmt2 = new Formatter();
    fmt2.format("%20s%12s%12s%12s%21s", "Total", "", "", "", TotalSum);
    System.out.print( fmt2 );
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:32:59.503

几个简单的更改来解决您的问题：

1> 将前两个 for 循环合并为：

```
 for (int s=0; s < 2; s++){
        states[s] = sc.next();
        for(int c=0; c < 3; c++) {
            votes[s][c] = sc.nextInt();
        }
    } 
```

1.  在 TotalSum 旁边定义一个新的 colSum[]，如下所示：

    ```
    int TotalSum = 0;
    int colSum[] = new int[]{0,0,0}; 
    ```

2.  更新循环的投票打印以执行列总和：

    ```
     for(int c=0; c < 3; c++) {
           colSum[c]+=votes[s][c]; // <-- new line to do the column sum
           fmt = new Formatter();
           fmt.format("%12d", votes[s][c]);
           System.out.print(fmt);
       } 
    ```

3.  将最后一行中的列总和打印为：

    ```
     fmt2.format("%20s%12s%12s%12s%21s", "Total", colSum[0], colSum[1], colSum[2], TotalSum);
        System.out.print( fmt2 ); 
    ```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:50:58.327

你的逻辑有点不对劲。

在你的第一个 for 循环之后：

```
for (int s=0; s < 51; s++)
{
    states[s] = sc.nextLine();
} 
```

您已经使用了文件中的前 50 行，并且“states”数组中的每个元素都包含每一行的文本。下次您尝试从扫描仪读取时，您位于第 51 行，因此您只会读取文件底部的总计，正如您最初所说的那样。

我认为您想要做的是对每个状态（文件中的每一行）将数字列 1、2 和 3 相加？

这是一些应该有帮助的示例代码：

```
File election = new File("voting_2008.txt");

Scanner scanner = new Scanner(election);

String[] states = new String[50]; // 50 united states
int[] votes = new int[50];

// only grab the first 50 lines, each line a different state
// assuming file layout is: stateName,count1,count2,count3
for ( int i = 0; i < 51; i++ ) {

    states[i] = scanner.next();

    // grab the next 3 numbers
    int voteTotal = 0;
    for ( int j = 0; j < 3; j++ ) {
        voteTotal += scanner.nextInt(); 
    }
    votes[i] = voteTotal; // total votes for this state

}

// ... display results .. 
```

# javascript - php cookie 设置隐藏和显示 div 一旦我点击隐藏和显示按钮

> ID：12869880
> 
> 赞同：0
> 
> 时间：2012-10-13T04:14:55.280
> 
> 标签：javascript, show-hide, setcookie

我制作了一个按钮`<onclick="define_v();">`来隐藏和显示 div。

现在我想设置cookies来设置最后一个动作。

这是我写的JS。

```
<script>
var y=1;
function define_v(){
if(y == 1){
comeout();
y = 0;
} else if(y == 0){
  comein();
  y = 1;
  }
}

function comeout(){
t6 = new Tween(document.getElementById('sideslide').style,'right',Tween.
regularEaseOut,-300,0,.5,'px');
t6.start();
}

function comein(){
t5 = new Tween(document.getElementById('sideslide').style,'right',Tween.
regularEaseOut,0,-300,.5,'px');
t5.start();
}
</script> 
```

# c++ - 野牛的错误：在非结构或联合的情况下请求成员“charTokens”

> ID：12869885
> 
> 赞同：0
> 
> 时间：2012-10-13T04:15:53.693
> 
> 标签：c++, bison, flex-lexer

我对 bison/flex 有这个问题（我看过其他帖子，但我没有在任何地方定义 YYSTYPE，所以这不是这里的问题）。我想使用 %union 将变量从词法分析器传递给 .y。这就是我所拥有的

```
%{
#include "simple-expr.tab.h"
#include <math.h>
extern double vbltable[26];
extern int yyval;
%}

%%
([0-9]+|([0-9]*\.[0-9]+)([eE][-+]?[0-9]+)?) { yyval.integerID = atoi(yytext); return ID; }
\* { yyval.charTokens = yytext; return TIMES; }
\+ { yyval.charTokens = yytext; return PLUS; }
\( { yyval.charTokens = yytext; return LPAREN; }
\) { yyval.charTokens = yytext; return RPAREN; }
[ \t\n] ;
%% 
```

和 yacc：

```
%{
%}

%union {
      int integerID;
      char* charTokens;
}

%token <charTokens> PLUS TIMES LPAREN RPAREN 
%token <integerID> ID

%%
e :  e PLUS t { printf("FROM THE yypars.y %c", PLUS); }
    | t
      ;
t : t TIMES f
    | f
      ;
f : LPAREN e RPAREN
    | ID
    ;

%% 
```

这些是我得到的错误：

simple-expr.lex:9:8: 错误：在不是结构或联合的东西中请求成员'integerID' simple-expr.lex:10:8: 错误：在不是结构或联合的东西中请求成员'charTokens' simple-expr.lex:11:8: 错误：在不是结构或联合的东西中请求成员 'charTokens' simple-expr.lex:12:8: 错误：在不是结构或联合的东西中请求成员'charTokens' simple-expr.lex:13:8: 错误: 请求成员 'charTokens' 不是结构或联合 make: *** [simple-expr] 错误 1

正如我之前所说 - 我没有在任何地方定义 YYSTYPE，所以这应该不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T06:27:29.563

将信息从词法分析器传递到解析器的变量的名称`yylval`不是`yyval`. 它使用正确的类型自动声明在`*.tab.h`. 所以这应该有效

```
%{
#include "simple-expr.tab.h"
#include <math.h>
extern double vbltable[26];
%}

%%
([0-9]+|([0-9]*\.[0-9]+)([eE][-+]?[0-9]+)?) { yylval.integerID = atoi(yytext); return ID; }
\* { yylval.charTokens = yytext; return TIMES; }
\+ { yylval.charTokens = yytext; return PLUS; }
\( { yylval.charTokens = yytext; return LPAREN; }
\) { yylval.charTokens = yytext; return RPAREN; }
[ \t\n] ;
%% 
```

# iphone - 如何从 sqlite 数据库中读取声音文件

> ID：12869893
> 
> 赞同：0
> 
> 时间：2012-10-13T04:18:25.533
> 
> 标签：iphone, ios, sqlite, avfoundation

在我的应用程序中，我想使用 sqlite 数据库使用这么多声音文件。我用谷歌搜索了很多。所有人都说使用 blob。任何人都可以帮助我编写从 sqlite 数据库读取音频文件的代码吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:36:09.723

您可以将音频文件下载为 NSData，然后将其加载到 AVAudioPlayer

```
-(id)initWithData:(NSData *)data error:(NSError **)outError 
```

[答案取自这里](https://stackoverflow.com/questions/9157916/converting-nsdata-back-to-audio-file)

# ruby-on-rails - render里面的两个方法

> ID：12869895
> 
> 赞同：0
> 
> 时间：2012-10-13T04:19:15.657
> 
> 标签：ruby-on-rails

我是一名 Rails 初学者，我正在尝试在我的节目（如电视节目）页面上呈现

“@sources 的@reviews”

而且我不确定如何在我的视图显示中的渲染中添加第二种方法

控制器：

```
 def show
   @show = Show.find(params[:id])
   @reviews = @show.reviews.paginate(page: params[:page])
   @sources = @show.reviews.source

  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @show }

  end
end 
```

显示视图 show.html.erb

```
 <div class="span8">
   <% if @show.reviews.any? %>
   <h3>Reviews (<%= @show.reviews.count %>)</h3>
   <ol class="reviews">
   <%= render @reviews %>
   </ol>
   <%= will_paginate @reviews %>
   <% end %>
   </div>
   </div> 
```

有什么帮助吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:41:55.087

您有一个名为@reviews 的将分页数组。这个数组有评论对象。现在要显示这个数组的内容，您需要做的是，在 show.htm.erb 中。

```
<% @reviews.each do |review| %>
  <%= review.column_name %>
<% end %> 
```

您使用的 render 方法是来自 ActionController 的方法，您不能在视图中使用它。

# macos - 如何找到任何系统调用的参数列表？

> ID：12869896
> 
> 赞同：0
> 
> 时间：2012-10-13T04:19:15.407
> 
> 标签：macos, system-calls

我在 /usr/include/sys/syscall.h 中找到了 Mac OS X 中的系统调用列表。但是，我找不到关于哪些函数期望哪些参数的任何描述。有人可以指点我正确的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:06:59.947

带有参数的 OSX 系统调用的参考在这里：[http ://www.opensource.apple.com/source/xnu/xnu-1504.3.12/bsd/kern/syscalls.master](http://www.opensource.apple.com/source/xnu/xnu-1504.3.12/bsd/kern/syscalls.master)

# java - 使用 Java 检测串行 COM 端口

> ID：12869898
> 
> 赞同：5
> 
> 时间：2012-10-13T04:19:32.580
> 
> 标签：java, serial-port

我的 Java 程序无法检测到连接到计算机的串行端口设备。

我使用的是 Windows 7（64 位）计算机（）。

串行端口设备是一个 GPS 模块，它以 37860 波特输出文本 GPS 字符串，连接到插入笔记本电脑 USB 端口的串行 USB 转换器。

Windows 控制面板/设备管理器将此设备显示为 COM7。

在计算机上运行的 GPS 应用程序“MiniGPS”能够与作为 COM7 的 GPS 芯片进行双向通信。

Processing中的一个应用程序能够检测到计算机有2个串口（com3和com7，com3是鼠标）。

我想用 Java（或 C++）编写一个应用程序来从 GPS 的串行端口收集数据。

我从某处复制了以下代码（如下），不确定现在在哪里，相同或相似的代码已经出现在一堆其他问题中。

当我运行它时，*portList*枚举返回为空，它根本找不到任何串行端口。

我知道一次只有一个程序可以看到串口，我在尝试之前关闭了设备管理器应用程序、GPS 应用程序和处理应用程序，但*CommPortIdentifier*对象仍然没有识别出串口。

有什么建议么 ？

```
public class SimpleRead implements Runnable, SerialPortEventListener {
static CommPortIdentifier portId;
static Enumeration portList;

InputStream inputStream;
SerialPort serialPort;
Thread readThread;

public static void main(String[] args) 
{
    System.out.println("Hello World");
    portList = CommPortIdentifier.getPortIdentifiers();

    JOptionPane.showMessageDialog(null,"portlist :"+portList.hasMoreElements());
    int numelt=0 ;
    while (portList.hasMoreElements()) 
    {
        numelt++;
        portId = (CommPortIdentifier) portList.nextElement(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T10:50:51.480

我建议你使用[JSSC](http://code.google.com/p/java-simple-serial-connector/downloads/list)库。

根据经验，它很有效，您的代码会更简洁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T04:39:21.377

很难确定，但您的问题听起来像以下之一：

*   程序初始化后，您已插入设备。

    > 根据我的经验，程序初始化时会识别 COM 端口。我的公司已经工作了几个月，试图找到一种方法来监听正在插入的设备，但是纯 Java 看起来不可能（这让我感到困惑）。尝试将其插入，*然后*启动程序。

*   您缺少驱动程序文件。

    > 您正在使用 javax.comm，它需要文件 javax.comm.properties 和 win32comm.dll（您可能必须在 64 位系统上找到不同的驱动程序）。属性文件应该放在%JAVA_HOME%\lib\ 目录下，dll 放在%JAVA_HOME%\bin 下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T06:06:02.943

在 windows 7 中使用 javax.comm 存在兼容性问题，请尝试使用支持 windows 7 的 RxTx API。

# c - 简单：“+”运算符在做什么（C 位）？

> ID：12869900
> 
> 赞同：2
> 
> 时间：2012-10-13T04:20:00.503
> 
> 标签：c, bits

我环顾四周，似乎找不到这个看似简单的问题的答案：C（位）中的“+”或“-”到底是什么？

比如11111111 11111111 11111111 11111111加1代表什么？

我问这个是因为我正在阅读一些代码，但我不知道是什么

```
 ~0 + 1 
```

是在做。我的意思是，我们不能将 1 添加到 4294967295 对吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:41:31.607

答案将取决于您的计算机对有符号数字使用的表示形式。

*   在“Two's Complement”格式中，`~0 == -1`，所以`~0 + 1 == 0`。

*   在“一个人的补码”格式中，`~0 == -0`，所以`~0 + 1 == 1`。

*   在“符号幅度”格式中，`~0 == INT_MIN`，所以`~0 + 1 == INT_MIN + 1`。

保证在所有系统上定义结果。

**另一方面，**如果您使用无符号数，您将始终得到相同的结果。

*   `~n`被定义为 's 类型的最大值`n`，减号`n`。`~0u`也是如此`UINT_MAX`。

*   `x + y`保证环绕，因此标准保证`UINT_MAX + 1 == 0`在所有系统上。

*   因此，`~0u + 1 == 0u`在所有系统上，都有保证。

如您所见，这与二进制补码的行为相同，这解释了二进制补码的流行。如今，不使用二进制补码的系统很少见，不包括 bigint 库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T04:28:00.757

当然，我们可以。由于您没有指定任何文字的类型，因此假定为“int”。`~0`是`-1`，正如您所指出的，并且`-1 + 1`为零。

另一方面，如果这些是无符号数字，那么您就会出现整数溢出。PC 深处的实际添加指令仍然返回零，它只是设置了一个“进位”标志，让 C 知道发生了一些奇怪的事情。在 C 规范中，整数溢出的结果是未定义的，因此您/可能/得到零，但您不能依赖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:28:14.367

让我们坚持使用较小的数字，以便更容易看到正在发生的事情。

一个 4 位数字将是`0000`. 现在开始`1111`添加一个。现在的值是`1 0000`您将看到的`0000`。

就像正常的以十为基础的加法一样。`9`然后我们在`0`个位和`1`十位都有。如果我们的数字大于我们的位数，则计数器将滚动到 0 并重新开始。

现在，这被简化为谈论正数。如果 int 是有符号的，则从最大正数到最大负数并循环回到最大正数，最终以负数和正数以二进制形式存储的方式进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T04:26:33.363

```
2^32=4294967296 
```

因此，`2^32-1`是 32 位无符号整数（32 个二进制数字）的最大值。2^32 是可能值的数量。
4294967295是因为整数从0开始，但是我们的计数从1开始。
这是一个整数范围，当你给这个数字加1时，它就超出了整数范围，这就是为什么我们不能给4294967295加1的原因。

`+`是加法算术运算符 &`-`是减法算术运算符

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T04:27:06.983

从技术上讲，C 不添加或提取。编译器将其翻译成汇编代码，然后再翻译成机器代码。架构应该有一个`ADD`指令。

我相信使用基本逻辑门可以通过多种方式完成操作。

无论如何，这[本书](http://www.scribd.com/doc/53115839/MicroProcessor-Design#page=53)有一些信息。

您可能还感兴趣的是负数如何以二进制表示，以及它如何适合算术运算。

使用的常用格式称为**二进制补码**。[您可以在此处](http://www.cs.cornell.edu/~tomf/notes/cps104/twoscomp.html)阅读有关其工作原理的更多信息。

# ruby - 为什么我的 Time 对象在 Ruby 中永远不会被评估为相等？

> ID：12869903
> 
> 赞同：1
> 
> 时间：2012-10-13T04:20:28.933
> 
> 标签：ruby, datetime, equality

```
@dfa = Time.new
@type_me = gets
@i = 0
def type
  pause_duration = 2
  start_time = Time.new
  until Time.new == start_time + pause_duration
  puts "#{start_time + pause_duration} || #{Time.new}"
  end
  print @type_me[@i]
  @i += 1
  type
end

type 
```

为什么 Time.new 不等于 start_time + pause_duration？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:44:31.183

您只是不太可能在循环中以相同的微秒精度获得它们。使用 >= 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T05:45:54.803

并不是说他们永远不平等。他们变得平等是非常罕见的。循环每次迭代都需要时间。您只是将时间与该增量进行比较，这在任何时候都不一定恰好等于 2.0 秒。

# objective-c - 在两个不同的线程中运行两个 NSStream

> ID：12869904
> 
> 赞同：3
> 
> 时间：2012-10-13T04:20:47.200
> 
> 标签：objective-c, ios, nsthread, nsstream, cfstream

我的应用程序在一个单独的线程中运行一个网络任务——它从我的服务器获取数据，对其进行处理并持续显示结果。当我在一个线程中只有一个这样的网络连接时，这很好用。但是，如果我用类似的网络任务运行第二个线程，第二个工作正常，但第一个停止响应。我的班级安排网络进程的代码如下。关于这里可能出了什么问题的任何想法？

```
NSThread * nThread;

- (NSThread *)networkThread {
    nThread = nil;

        nThread =
        [[NSThread alloc] initWithTarget:self
                                selector:@selector(networkThreadMain:)
                                  object:nil];
        [nThread start];

    DLog(@"thread: %@, debug description: %@", nThread, nThread.debugDescription);
    return nThread;
}

- (void)networkThreadMain:(id)unused {
    do {
            [[NSRunLoop currentRunLoop] run];
    } while (YES);
}

- (void)scheduleInCurrentThread:(id)unused
{
    [inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                           forMode:NSRunLoopCommonModes];
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop]
                           forMode:NSRunLoopCommonModes];
}

-(BOOL) connectWithError:(NSString **) e
{
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"127.0.0.1", [server port], &readStream, &writeStream);
    inputStream = (__bridge NSInputStream *) readStream;
    outputStream = (__bridge NSOutputStream *) writeStream;

    [inputStream setDelegate:self];
    [outputStream setDelegate:self];

    [self performSelector:@selector(scheduleInCurrentThread:)
                 onThread:[self networkThread]
               withObject:nil
            waitUntilDone:YES];

    [inputStream open];
    [outputStream open];
} 
```

# c# - 将值四舍五入为 .0 或 .5 的数学函数

> ID：12869905
> 
> 赞同：8
> 
> 时间：2012-10-13T04:21:00.773
> 
> 标签：c#, asp.net

如何将数字四舍五入到最接近的整数*或*最接近的一半？

例如：

```
> 23.15 --> 23.5
> 23.56 --> 24.0 
```

我知道的舍入函数是`floor`and `ceil`，但那些只舍入到最接近的整数。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T04:25:55.083

你想四舍五入到 0.5 的倍数？我理解正确吗？

```
double RoundUpToPointFive(double d)
{
    return Math.Ceiling(d * 2) / 2;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T04:39:42.043

为什么不试试这个，在精度上有任何意义：

```
public double Ceiling(double value, double significance)
{
    if ((value % significance) != 0)
    {
        return ((int)(value / significance) * significance) + significance;
    }

    return Convert.ToDouble(value);
} 
```

用法：

```
var d1 = Ceiling(23.15, 0.5); // 23.5
var d2 = Ceiling(23.56, 0.5); // 24.0 
```

天花板的这个功能被 Microsoft Excel 使用，为了匹配这个计算，我设计了这个算法。

参考：[天花板和地板功能，如 .NET 中的 Microsoft Excel](http://furqan-safdar.blogspot.com/2012/05/ceiling-and-floor-functions-like.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T04:26:39.850

快速而肮脏的方式：

乘以 2，上限，然后除以 2。快速且易于理解，但由于数字溢出，这将在边缘情况下失败。

一种更稳健的方法是在使用上述方法评估轮次之前，将小数点前的所有内容剪掉，并将结果添加到您剪掉的整数上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T04:37:18.187

大卫的方法几乎可以密封它，但这是另一种更长的方法。

```
double dbNum = 3.44;
double dbNumModified = 3.44 + 0.5;
dbNumModified = Math.Floor(dbNum);
if(dbNumModified < dbNum)
{
   dbNumModified += 0.5;
}
return dbNumModified; 
```

# java - Libgdx SpriteBatch 是否绘制到 StencilBuffer？

> ID：12869908
> 
> 赞同：6
> 
> 时间：2012-10-13T04:21:44.453
> 
> 标签：java, opengl-es, libgdx, stencil-buffer

我正在使用带有 OpenGL ES 1.0 的 libgdx，我想知道 SpriteBatch 是否可以写入/绘制到模板缓冲区。我一直在尝试写入它，但我根本没有得到任何结果，我没有使用模板缓冲区的经验，但我已经阅读了很多，所以如果我在接下来的任何事情中错了，请纠正我。基本上我想要做的是将带有 SpriteBatch 的纹理绘制到模板缓冲区，所以当我绘制其他东西时（禁用模板缓冲区）它只会在模板缓冲区等于 1 的区域上绘制。

这是我想要的结果：如果我在模板缓冲区中绘制一个星形纹理，然后在颜色缓冲区中绘制一个红色纹理，我希望红色纹理忽略模板缓冲区中星形所在的像素。

到目前为止，这是我的代码：

```
 batch.begin();
   Gdx.gl10.glEnable(GL10.GL_STENCIL_TEST);
   Gdx.gl10.glEnable(GL10.GL_ALPHA_TEST);
   Gdx.gl10.glStencilFunc(GL10.GL_ALWAYS, 0x1, 0xffffffff);
   Gdx.gl10.glStencilOp(GL10.GL_REPLACE, GL10.GL_REPLACE, GL10.GL_REPLACE);
   Gdx.gl10.glColorMask(false, false, false, false);

   batch.draw(myShape, 100, 100); //draw to the stencil buffer a shape (texture region)

   batch.end();
   batch.begin();

   Gdx.gl10.glColorMask(true, true, true, true);
   Gdx.gl10.glStencilOp(GL10.GL_KEEP, GL10.GL_KEEP, GL10.GL_KEEP);

   // draw where the shape has NOT been drawn
   Gdx.gl10.glStencilFunc(GL10.GL_NOTEQUAL, 0x1, 0xff);

   batch.draw(BackGroundLayer, 0, 0);// draw background

   Gdx.gl10.glDisable(GL10.GL_STENCIL_TEST); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T05:55:07.670

是的 spriteBatch 确实写入模板缓冲区问题是我必须配置模板缓冲区。它的完成方式是创建一个应用程序配置对象，并在初始化应用程序时将其作为参数传递，如下所示：

对于 android 启动器，您需要这样做：

```
AndroidApplicationConfiguration Configuration = new  AndroidApplicationConfiguration();
Configuration.stencil = 8;  //stencil buffer size
initialize(new Game(), Configuration);   //pass it as parameter 
```

对于桌面是这样的

```
LwjglApplicationConfiguration Configuration = new  LwjglApplicationConfiguration();
Configuration.stencil = 8;
new LwjglApplication(new Game(), Configuration); 
```

# .net - 如何开始使用动态模型类并用数据填充它

> ID：12869910
> 
> 赞同：0
> 
> 时间：2012-10-13T04:22:26.980
> 
> 标签：.net, dynamic, reflection

我有一个小型路由引擎。它匹配模式并填充路由参数字典。所以`/blog/{action}/{id}`将匹配`/blog/view/123`并`123`作为值放入`id`字典中的键等等。

有趣的部分来了。我想改变这个系统来代替使用模型类型的架构，所以我可以有类似的东西

```
class BlogRoute
{
    [RouteParam("action")]
    public string Action{get;set;}
    [RouteParam("id")]
    public string ID{get;set;}
} 
```

当然，还有其他路线“模型”`/comments/{action}/{entryid}/{id}`等等，所以我需要这样做我相信通过反思

我的最终目标基本上是拥有类似`AddRoute("pattern", new BlogRoute())`或类似的东西，并且我的路由器将数据动态填充到 BlogRoute 实例中

我将如何开始这样做？我几乎没有使用反射（虽然奇怪地非常熟悉 IL），而且它看起来有点令人生畏，我害怕以次优的方式来做它，因为这对性能有点关键。这也在多个其他库中完成。基本上每个 ORM 都会做类似的事情。是否有任何教程或类似的东西可以开始这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T03:42:03.777

只需浏览具有 RouteParam 属性的属性。如果获取传递给属性的构造函数的值和传递给AddRoute的某个路由信息对象上的属性本身的值，就可以获得所有的路由信息​​。

我不确定反射是否明显缓慢，但在性能关键的情况下我会远离它。您可以将这种使用反射的方法替换为您有一个 RouteData 类的方法，其中只需包含一个字典。但是你失去了美丽的声明性做事方式。你选。

```
/// <summary>
/// This is your custom attribute type that you will use to annotate properties as route information.
/// </summary>
class RouteParamAttribute : Attribute
{
    public string RouteKey;
    public RouteParamAttribute(string routeKey)
    {
        RouteKey = routeKey;
    }
}

/// <summary>
/// From which all other routes inherit. This is optional and is used to avoid passing any kind of object to AddRoute.
/// </summary>
class Route
{

}

/// <summary>
/// This is an actual route class with properties annotated with RouteParam because they are route information pieces.
/// </summary>
class BlogRoute : Route
{
    [RouteParam("action")]
    public string Action { get; set; }
    [RouteParam("id")]
    public string ID { get; set; }
}

/// <summary>
/// This is all the reflection happen to add routes to your route system.
/// </summary>
/// <param name="routeInformation"></param>
void AddRoute(Route routeInformation)
{
    //Get the type of the routeInformation object that is passed. This will be used 
    //to get the route properties and then the attributes with which they are annotated.
    Type specificRouteType = routeInformation.GetType(); //not necessarily Route, could be BlogRoute.

    //The kind of attribute that a route property should have.
    Type attribType = typeof(RouteParamAttribute);

    //get the list of props marked with RouteParam (using attribType).
    var routeProperties = specificRouteType.GetProperties().Where(x => x.GetCustomAttributes(attribType, false).Count() >= 1);

    //this where we'll store the route data.
    Dictionary<string, string> routeData = new Dictionary<string, string>();

    //Add the data in each route property found to the dictionary
    foreach (PropertyInfo routeProperty in routeProperties)
    {
        //Get the attribute as an object (because in it we have the "action" or "id" or etc route key).
        var rpa = routeProperty.GetCustomAttributes(attribType, false).First() as RouteParamAttribute;

        //The value of the property, this is the value for the route key. For example if a property
        //has an attribute RouteParam("action") we would expect the value to be "blog" or "comments"
        var value = routeProperty.GetValue(routeInformation, null);

        //convert the value to string (or object depending on your needs, be careful 
        //that it must match the dictionary though)
        string stringValue = "";
        if (value != null)
            stringValue = value.ToString();
        else ; //throw an exception?

        routeData.Add(rpa.RouteKey, stringValue);
    }

    //now you have a dictionary of route keys (action, id, etc) and their values
    //manipulate and add them to the route system
} 
```

# mysql - MySQL 多连接和删除重复项

> ID：12869923
> 
> 赞同：4
> 
> 时间：2012-10-13T04:25:58.117
> 
> 标签：mysql, select, join

快速更新——SQLFiddle 链接：[http ://sqlfiddle.com/#!2/d038f/2](http://sqlfiddle.com/#!2/d038f/2)

我认为这是一个相对直接的...

我总共有 7 个表，3 个“主”表，另外 3 个管理“多对多”关系，另一个是主表，更准确地说：

```
mysql> show tables;
+--------------------+
| Tables_in_test     |
+--------------------+
| Equipment          |
| Room               |
| Trainer            |
| Training           |
| training_equipment |
| training_room      |
| training_trainer   |
+--------------------+
7 rows in set (0.00 sec) 
```

现在，模式和内容：

```
 mysql> SELECT * FROM Equipment; 
           SELECT * FROM Room; 
           SELECT * FROM Trainer; 
           SELECT * FROM training_equipment; 
           SELECT * FROM training_room; 
           SELECT * FROM training_trainer; 
           SELECT * FROM Training;   

+----+-------------+
| id | equipment   |
+----+-------------+
|  1 | Equipment_1 |
|  2 | Equipment_2 |
|  3 | Equipment_3 |
|  4 | Equipment_4 |
+----+-------------+
4 rows in set (0.00 sec)

+----+--------+
| id | room   |
+----+--------+
|  1 | Room_1 |
|  2 | Room_2 |
+----+--------+
2 rows in set (0.00 sec)

+----+-------+
| id | name  |
+----+-------+
|  1 | John  |
|  2 | Joe   |
|  3 | Jason |
+----+-------+
3 rows in set (0.00 sec)

+-------------+--------------+
| training_id | equipment_id |
+-------------+--------------+
|           1 |            3 |
|           1 |            4 |
|           2 |            1 |
+-------------+--------------+
3 rows in set (0.00 sec)

+-------------+---------+
| training_id | room_id |
+-------------+---------+
|           1 |       1 |
+-------------+---------+
1 row in set (0.01 sec)

+-------------+------------+
| training_id | trainer_id |
+-------------+------------+
|           1 |          2 |
|           1 |          3 |
+-------------+------------+
2 rows in set (0.00 sec)

+----+------------+------------+---------+------+-----------+---+
| id | from       | to         | trainer | room | equipment | a |
+----+------------+------------+---------+------+-----------+---+
|  1 | 1349578297 | 1350096689 |       1 |    1 |         1 | 0 |
+----+------------+------------+---------+------+-----------+---+
1 row in set (0.02 sec) 
```

我提出了以下查询，您可以看到结果不正确：

```
mysql> SELECT t.from, r.room, tra.name, e.equipment
    -> FROM Training t
    -> LEFT JOIN training_room tr ON ( t.room = tr.training_id )
    -> LEFT JOIN Room r ON ( tr.room_id = r.id )
    -> LEFT JOIN training_trainer tt ON ( t.trainer = tt.training_id )
    -> LEFT JOIN Trainer tra ON ( tt.trainer_id = tra.id )
    -> LEFT JOIN training_equipment te ON ( t.equipment = te.training_id)
    -> LEFT JOIN Equipment e ON ( te.equipment_id = e.id )
    -> WHERE t.id =1;
+------------+--------+------+-------------+
| from       | room   | name | equipment   |
+------------+--------+------+-------------+
| 1349578297 | Room_1 | Joe  | Equipment_3 |
| 1349578297 | Room_1 | Joe  | Equipment_4 |
| 1349578297 | Room_1 | Jason| Equipment_3 |
| 1349578297 | Room_1 | Jason| Equipment_4 |
+------------+--------+------+-------------+
4 rows in set (0.02 sec) 
```

我不想看到重复的结果，我只想看到：

```
+------------+--------+------+-------------+
| from       | room   | name | equipment   |
+------------+--------+------+-------------+
| 1349578297 | Room_1 | Joe  | Equipment_3 |
| 1349578297 | Room_1 | Jason| Equipment_4 |
+------------+--------+------+-------------+ 
```

`DISTINCT`不能解决问题`GROUP BY tra.name, e.equipment`

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T06:11:35.917

抱歉，但是对于您当前的数据库结构，我认为没有符合您要求的查询。但是你可以查看 group_concat() 函数，它可以将设备和教练名称组合成一个字符串。然后你可以通过使用像php这样的服务器代码来提取值。

```
 SELECT t.from, r.room, group_concat(distinct tra.name), group_concat( distinct e.equipment)
 FROM Training t
 LEFT JOIN training_room tr ON ( t.room = tr.training_id )
 LEFT JOIN Room r ON ( tr.room_id = r.id )
 LEFT JOIN training_trainer tt ON ( t.trainer = tt.training_id )
 LEFT JOIN Trainer tra ON ( tt.trainer_id = tra.id )
 LEFT JOIN training_equipment te ON ( t.equipment = te.training_id)
 LEFT JOIN Equipment e ON ( te.equipment_id = e.id )
 WHERE t.id =1 
```

如果您可以更改表“training_equipment”的结构，添加另一列“trainer_id”，则可以使用以下查询：

```
SELECT t.from, r.room, tra.name, e.equipment
FROM Training t
LEFT JOIN training_room tr ON ( t.room = tr.training_id )
LEFT JOIN Room r ON ( tr.room_id = r.id )     
LEFT JOIN training_equipment te ON ( t.equipment = te.training_id)
LEFT JOIN Equipment e ON ( te.equipment_id = e.id )
LEFT JOIN Trainer tra ON ( te.trainer_id = tra.id )
WHERE t.id =1 
```

# android - 如何使整行列表视图可点击？

> ID：12869926
> 
> 赞同：11
> 
> 时间：2012-10-13T04:26:05.380
> 
> 标签：android, listview, checkbox, row, contactscontract

我正在尝试为我的应用程序制作多个联系人选择器。我正在使用带有复选框的自定义布局来选择多个联系人。我面临的问题是，为了选择任何特定的联系人，我需要准确地点击复选框，如果我点击行的其他部分，复选框不会被勾选。我如何确保用户在整行中单击的任何位置都选中了复选框。

**activity_contacts_picker.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/btnShow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Show Selected" />

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/btnShow" >
</ListView>

</RelativeLayout> 
```

**custcontactview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/linearLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingBottom="5.0px"
android:paddingLeft="5.0px"
android:paddingTop="5.0px" >

<TextView
    android:id="@+id/txtContactName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="15.0dip"
    android:layout_toLeftOf="@+id/checkBox1"
    android:layout_alignParentLeft="true"
    android:text="Medium Text"
    android:textAppearance="?android:textAppearanceMedium" />

<TextView
    android:id="@+id/txtContactNumber"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/txtContactName"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="15.0dip"
    android:layout_toLeftOf="@+id/checkBox1"
    android:text="Small Text"
    android:textAppearance="?android:textAppearanceSmall" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginRight="10dp"
    android:clickable="true"
    android:focusable="true"
    android:focusableInTouchMode="false" />

</RelativeLayout> 
```

**ContactsPicker.java**

```
public class ContactsPicker extends ListActivity {

protected Object mActionMode;
public int selectedItem = -1;
private Button btnShowContacts;
private ListView myListView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_contacts_picker);
    myListView = getListView();
    btnShowContacts = (Button) findViewById(R.id.btnShow);
    btnShowContacts.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(getApplicationContext(), "Button Clicked",
                    Toast.LENGTH_SHORT).show();
            String name = null;
            String number = null;
            long[] ids = myListView.getCheckedItemIds();
            for (long id : ids) {
                Cursor contact = getContentResolver().query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id + "" }, null);
                while (contact.moveToNext()) {
                    name = contact.getString(contact
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    number = contact.getString(contact
                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                }
                Toast.makeText(getApplicationContext(),
                        "Name: " + name + "\n" + "Number: " + number,
                        Toast.LENGTH_LONG).show();
            }
        }
    });
    ArrayList<Map<String, String>> list = buildData();
    String[] from = { "Name", "Phone" };
    int[] to = { R.id.txtContactName, R.id.txtContactNumber };
    SimpleAdapter adapter = new SimpleAdapter(this, list,
            R.layout.custcontactview, from, to);
    setListAdapter(adapter);
}

private ArrayList<Map<String, String>> buildData() {
    ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();
    list.clear();
    Cursor people = getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null,
            "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME + ") ASC");
    while (people.moveToNext()) {
        String contactName = people.getString(people
                .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        String contactId = people.getString(people
                .getColumnIndex(ContactsContract.Contacts._ID));
        String hasPhone = people
                .getString(people
                        .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER));
        if ((Integer.parseInt(hasPhone) > 0)) {
            Cursor phones = getContentResolver().query(
                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                    null,
                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                            + " = " + contactId,
                    null,
                    "UPPER(" + ContactsContract.Contacts.DISPLAY_NAME
                            + ") ASC");
            while (phones.moveToNext()) {
                String phoneNumber = phones
                        .getString(phones
                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                Map<String, String> NamePhoneType = new HashMap<String, String>();
                NamePhoneType.put("Name", contactName);
                NamePhoneType.put("Phone", phoneNumber);
                list.add(NamePhoneType);
            }
            phones.close();
        }
    }
    people.close();
    //startManagingCursor(people);
    return list;
}
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T04:38:56.443

尝试将此属性添加到您的 ListView

安卓：可点击=“真”

另外，我看不到您将触摸/单击侦听器设置到 myListView 的位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T06:29:02.577

尝试更改复选框布局宽度以填充父级，如下所示，

```
 android:layout_width="fill_parent" 
```

猜猜它会为你工作:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:42:58.810

我会在文本字段中添加一个单击侦听器，如果单击，则将复选框的状态更改为相反的状态（单击 <-> 未单击）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T05:03:20.020

首先，您可以使用 CheckedTextView 代替 CheckBox。也许只有这个工作。

或者

尝试设置 CheckBox focusable="false"，如果不起作用，则可以在 XML 布局的所有视图中聚焦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T06:31:30.650

如果您在列表项上使用按钮/复选框/单选按钮，则列表项不可点击

[您可以点击这里](http://android.cyrilmottier.com/?p=525)解决您的问题

# android - 使用画布在捕获的图像上绘制并保存到 sdcard - 显示损坏 - android

> ID：12869932
> 
> 赞同：3
> 
> 时间：2012-10-13T04:26:45.707
> 
> 标签：android, bitmap, save, android-canvas, sd-card

我拍了一张照片，想通过用手指手势放置矩形来在上面画一个矩形。

在与屏幕交互时，一切正常并且显示正确。但是当我想用 sdcard 上的矩形保存图像时，我得到的图像具有正确的图像背景，但矩形有点破损。它们看起来像是有人剪掉了它们的某些部分。你可以感觉到它们曾经是矩形，但看起来像垃圾。

我的问题是为什么？

由于我的线程，我无法将所有内容保存在一个画布上并将其保存到 sdcard 中，我无法为画布设置位图。使用两个画布后，它就像我说的那样工作，但是矩形被破坏了。当我在画布上绘制没有底层图像位图的矩形时，矩形被正确保存。我真的不明白。我尝试了我能想象的一切，但没有得到错误。

我尝试发布我的整个代码的简短示例：

```
public class Mark extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mark);

        p = new Panel(this);
        frLayout = (FrameLayout)findViewById(R.id.preview);
        frLayout.addView(p);

        bitmap = BitmapFactory.decodeFile(image_path + "/img.jpg", options);
        img = (ImageView) findViewById(R.id.img_capturedImage);

        bitmapAll = Bitmap.createBitmap(bitmap.getWidth(),bitmap.getHeight(),Bitmap.Config.ARGB_8888);

        save.setOnClickListener(new View.OnClickListener() {

                try {
                    out = new FileOutputStream(file);
                    bitmapAll.compress(Bitmap.CompressFormat.JPEG, 100, out);
                    out.flush();
                    out.close();

                    MediaStore.Images.Media.insertImage(getContentResolver(),
                            file.getAbsolutePath(), file.getName(),
                            file.getName());
                } catch (Exception e) {
                       e.printStackTrace();
                }
            }
        });
    }

    class Panel extends SurfaceView implements SurfaceHolder.Callback {
        private TutorialThread _thread;
        Canvas myCanvas;

        public Panel(Context context) {
            super(context);
            getHolder().addCallback(this);
            _thread = new TutorialThread(getHolder(), this);
            setFocusable(true);
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            synchronized (_thread.getSurfaceHolder()) {

                switch(event.getAction() & MotionEvent.ACTION_MASK){
                    ... save the coordinates for the rectangle ...
                }

                return true;
        }

        @Override
        public void onDraw(Canvas canvas) {

            myCanvas = new Canvas(bitmapAll);

            Paint paint = new Paint();

            myCanvas.drawBitmap(bitmap, 0, 0, paint);
            canvas.drawBitmap(bitmap, 0, 0, paint);

            paint.setXfermode(new PorterDuffXfermode(Mode.SRC_OVER));

            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(3);

            Rect rect;

            for (...go over every saved rectangle ...) {
                rect.set(...coordinates...);
                canvas.drawRect(rect, paint);
                myCanvas.drawRect(rect, paint);
            }
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
            // TODO Auto-generated method stub
        }

        public void surfaceCreated(SurfaceHolder holder) {
            _thread.setRunning(true);
            _thread.start();
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            boolean retry = true;
            _thread.setRunning(false);
            while (retry) {
                try {
                    _thread.join();
                    retry = false;
                } catch (InterruptedException e) {
                }
            }
        }
    }

    class TutorialThread extends Thread {
        private SurfaceHolder _surfaceHolder;
        private Panel _panel;
        private boolean _run = false;

        public TutorialThread(SurfaceHolder surfaceHolder, Panel panel) {
            _surfaceHolder = surfaceHolder;
            _panel = panel;
        }

        public void setRunning(boolean run) {
            _run = run;
        }

        public SurfaceHolder getSurfaceHolder() {
            return _surfaceHolder;
        }

        @Override
        public void run() {
            Canvas c;
            while (_run) {
                c = null;
                try {
                    c = _surfaceHolder.lockCanvas(null);
                    synchronized (_surfaceHolder) {
                        _panel.onDraw(c);
                    } 
                } catch (Exception e) {
                    Log.e("Error", Log.getStackTraceString(e));
                } finally {
                    if (c != null) {
                        _surfaceHolder.unlockCanvasAndPost(c);
                    }
                }
            }
        }
    }
} 
```

# jquery - 如何在 jQuery Mobile 中直接访问带有 div id 的链接？

> ID：12869937
> 
> 赞同：2
> 
> 时间：2012-10-13T04:27:25.080
> 
> 标签：jquery, jquery-mobile, pageload

假设我有一个链接，比如说，`http://www.example.com/index.html#xyz`. 当我在浏览器中打开它时它工作正常，但是当我在同一页面上`www.example.com/index.html`有一个链接定位时，它会通过 ajax 加载一个新页面。`#xyz``data-role=content`

现在我的查询是，如果我直接访问与 相同的 URL `http://www.example.com/index.html#xyz`，它会加载`www.example.com/index.html`而不是特定`#xyz`页面。

有什么办法可以使这项工作？

注意：`#xyz`页面内容是动态加载的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:15:58.223

您可以尝试添加`rel="external"`到您的链接，然后就可以了。

**例子：**

假设您有 2 个 HTML 文件：`index.html`和`page.html`，并且`page.html`包含 2 个 jQuery Mobile 页面：`#p1`和`#p2`.

现在，假设您想`#p2`通过`index.html`单击链接来访问`<a>`。

您需要`rel="external"`按如下方式添加到您的链接：

```
<a href="page.html#p2" rel="external">GO TO PAGE 2 !</a> 
```

* * *

# 完整示例：

`index.html`：

```
<!DOCTYPE html>
<html>
<head>    
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>

</script>
</head>    

<body>

<div data-role="page">      
  <div data-role="content">      
    <h1>INDEX.HTML</h1>

    <!-- YOUR LINK TO ACCESS #P2 IN PAGE.HTML -->
    <a href="page.html#p2" rel="external">GO TO PAGE 2 "#P2" !</a>    
  </div>    
</div>

</body>
</html> 
```

`page.html`：

```
<!DOCTYPE html>
<html>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>    

<body>

    <!-- PAGE 1 #P1 -->
    <div data-role="page" id="p1">    
        <div data-role="content">
    <h1>PAGE 1</h1>
        </div>
    </div>

    <!-- PAGE 2 #P2 -->
    <div data-role="page" id="p2">
        <div data-role="content">
        <h1>PAGE 2</h1>
        </div>
    </div>
</body>

</html> 
```

# mysql - 如何在 MySQL 中使用关键字 IN OR 内部连接 3 个表？

> ID：12869942
> 
> 赞同：1
> 
> 时间：2012-10-13T04:28:56.883
> 
> 标签：mysql, sql, database

我将如何`IN` `OR`正确使用此 select 语句？（一切实际上都有效，除了`where bdt.active='yes'`）

```
SELECT bdt.*, specials.*, stars.* 
FROM bdt INNER JOIN specials ON  bdt.id = specials.id 
         INNER JOIN stars ON specials.id=stars.id 
   WHERE bdt.active='yes' 
   AND  bdt.business_type IN ('entertainment') 
    OR  bdt.business_subtype IN  ('entertainment')  
    OR  bdt.subtype2 IN ('entertainment') 
    OR  specials.type IN ('entertainment') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:32:47.250

您只需要`()`在第二个`AND`条件中使用括号，如下所示：

```
SELECT bdt.*, specials.*, stars.* 
FROM bdt INNER JOIN specials ON  bdt.id = specials.id 
         INNER JOIN stars ON specials.id=stars.id 
   WHERE bdt.active='yes' 
   AND (bdt.business_type IN ('entertainment') 
    OR  bdt.business_subtype IN  ('entertainment')  
    OR  bdt.subtype2 IN ('entertainment') 
    OR  specials.type IN ('entertainment')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T05:37:56.377

2 关于风格的注意事项。

1.  `IN`当您有多个选择时使用，`=`用于单个直接匹配。
2.  `SELECT bdt.*, specials.*, stars.*`真是糟糕的形式。从您的联接中，很明显每个表都有一个`id`字段。您将只想列出您需要的列，并以不同的方式对同名列进行别名。

我还将在下面展示如何正确地`OR`使用 , 重写子句。`IN`

```
SELECT bdt.*, specials.*, stars.* 
FROM bdt INNER JOIN specials ON  bdt.id = specials.id 
         INNER JOIN stars ON specials.id=stars.id 
   WHERE bdt.active='yes' 
   AND  'entertainment' IN (bdt.business_type, bdt.business_subtype,
                            bdt.subtype2, specials.type) 
```

# hibernate-search - Hibernate 实体没有被索引

> ID：12869944
> 
> 赞同：1
> 
> 时间：2012-10-13T04:29:09.740
> 
> 标签：hibernate-search

我正在索引活动和元实体：

活动包含以下字段：

```
 @Table(name = "activity")
            @Indexed
            public class Activity implements java.io.Serializable {

            private Long id;
            private Date timeStamp;
            private User user;

         /*index metaentity inside activity.*/
            @IndexedEmbedded
            private Metaentity metaentityByEntity;
        } 
```

元实体表包含以下字段：

```
 public class Metaentity implements java.io.Serializable {

            private Long id;
            @IndexedEmbedded
            private User userByOwner;
//when metaentity changes update activity entity inside the index
            @ContainedIn
            private Set<Activity> activitiesForProject = new HashSet<Activity>(0);

        } 
```

在活动中，我想索引**metaentityByEntity**但是当我为 metaentity 创建索引时，活动索引为空。我不知道为什么会出现这个问题。

是因为在 Metaentity 类中我为**Set of activitiesForProject**指定了 @ContainedIn吗？

# javascript - 使用此 javascript 在屏幕中心打开新窗口？

> ID：12869946
> 
> 赞同：4
> 
> 时间：2012-10-13T04:30:42.890
> 
> 标签：javascript, html, popup, popupwindow

我对 javascript 的经验非常有限。我想在屏幕中央打开新窗口。

```
<script type="text/javascript">
function fbs_click() {
var twtTitle = document.title;
var twtUrl = location.href;
var maxLength = 140 - (twtUrl.length + 1);
if (twtTitle.length > maxLength) {
    twtTitle = twtTitle.substr(0, (maxLength - 3)) + '...';
}
var twtLink = 'http://twitter.com/home?status=' + encodeURIComponent(twtTitle + ' ' + twtUrl);
window.open(twtLink,'','width=300,height=300'); } </script> 
```

如果有人可以请更新我的代码以完成一个居中的弹出窗口，这将是惊人的！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-13T04:40:41.327

这是怎么回事（改编自[这里](http://www.tek-tips.com/faqs.cfm?fid=2296)）：

```
function MyPopUpWin(url, width, height) {
    var leftPosition, topPosition;
    //Allow for borders.
    leftPosition = (window.screen.width / 2) - ((width / 2) + 10);
    //Allow for title and status bars.
    topPosition = (window.screen.height / 2) - ((height / 2) + 50);
    //Open the window.
    window.open(url, "Window2",
    "status=no,height=" + height + ",width=" + width + ",resizable=yes,left="
    + leftPosition + ",top=" + topPosition + ",screenX=" + leftPosition + ",screenY="
    + topPosition + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");
} 
```

`window.open(twtLink,'','width=300,height=300');`通过在您的代码中替换来调用它`MyPopUpWin(twtLink, 300, 300);`

# android - 在 Android 上构建 libloc_api

> ID：12869952
> 
> 赞同：1
> 
> 时间：2012-10-13T04:32:17.477
> 
> 标签：android, android-ndk

我想`libloc_api.so`从 Android 源代码构建，以便我可以使用本机 gps 功能。

源代码在`hardware/qcom/gps/loc_api/libloc_api`文件夹中，但我不熟悉如何在不构建整个源代码树的情况下构建这些模块之一。

有谁知道我将如何构建`libloc_api`模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:54:18.360

您无需构建**.so**文件即可对其进行链接。从设备获取库很好，例如

```
adb pull /system/lib/libloc_api.so devicelib/libloc_api.so 
```

现在您的**Android.mk**应该将**-Ldevicelib -lloc-api**添加到 LOCAL_LDLIBS。

请注意，此库是特定于设备的，如果您尝试在不基于 Quallcom Snapdragon SoC 的设备上加载它，您的应用程序将会失败。

但更重要的是，除非您在有根设备上工作，否则此库毫无用处，因为生产手机只允许访问 GPS 硬件以访问系统服务。所有应用程序都通过此服务使用 GPS（和其他硬件，如相机、视频编解码器），使用 NDK*原生*并不能避免限制。

# ruby-on-rails - 验证失败时 ActiveAdmin 丢失图像

> ID：12869953
> 
> 赞同：1
> 
> 时间：2012-10-13T04:32:18.523
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activeadmin, carrierwave, image-uploading

我刚刚安装了 ActiveAdmin 并创建了一个类似的表单：

```
form do |f|
  f.inputs "Details" do
    f.input :title
    f.input :published_on, as: :datepicker
  end
  f.has_many :images do |images_f|
    images_f.input :image, as: :file, hint: images_f.template.image_tag(images_f.object.image.url)
    images_f.input :description, as: :text, input_html: { rows: 3 }
  end
  f.has_many :topics do |t_f|
    t_f.input :maker
    t_f.input :title
    t_f.input :text
    t_f.input :image, as: :file, hint: t_f.template.image_tag(t_f.object.image.url)
    t_f.input :sort_order
  end
  f.buttons
end 
```

我有很多强制性的感觉，所以当我在 has_many :images 中选择图像并单击保存（知道它将无法验证）时，它会显示我在提示中选择的图像，这很好。但是，图像输入仍然显示，如果我不填写任何表格并再次单击提交，它将再次无法验证，但这次图像消失了。

有谁知道如何防止这种情况？这有点烦人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:22:42.003

没有标准的方法可以做到这一点，在 Rails 和其他框架中，HTML 文件选择控件最初总是空白的，这也是大多数浏览器强制执行的。所以我认为这不是 activeadmin 的问题。这是因为网页可以让您通过隐藏用户的选择来上传任意文件。
自定义选项之一是使用上传文件的隐藏字段并在验证失败时添加它们。因此，在验证开始之前，您必须将文件保存在任何地方（tmp 目录或某个目录）并将指向它们的链接存储在模型的虚拟属性中。之后，您必须在表单中呈现隐藏字段，其中包含指向服务器上已上传文件的链接。相反，如果文件输入，您还可以显示指向它们的链接，并有可能删除它们。

另一种选择是当您已经将模型存储在数据库中时，使用其他形式的 ajax 上传文件。

如果您希望文件对您的模型是强制性的，您可以将您的模型标记为禁用或使用某种临时模型，这是您当前模型的副本。文件上传且模型生效后，您可以将其状态更改为启用或将临时实例复制到另一个数据库表，具体取决于您的选择。

# android - 调试当前指令指针，尝试添加三个文本视图的值

> ID：12869954
> 
> 赞同：1
> 
> 时间：2012-10-13T04:32:34.260
> 
> 标签：android, android-emulator, android-widget

在这里，我尝试添加 3 个文本视图的值，然后使用按钮 onClickListener() 在另一个文本视图中显示，但是每当我单击按钮时，每次获取，不幸的是，应用程序已停止并出现以下 Logcat 请问题并提供一些解决方案，Logcat 报告

```
10-13 17:48:40.440: E/Trace(703): error opening trace file: 
No such file or directory (2)
10-13 17:48:41.080: D/dalvikvm(703): 
GC_CONCURRENT freed 65K, 2% free 8362K/8519K,  paused 35ms+30ms, total 214ms
10-13 17:48:41.080: D/gralloc_goldfish(703): Emulator without GPU emulation detected.
10-13 17:49:01.316: I/Choreographer(703): Skipped 31 frames!  
The application may be doing too much work on its main thread.
10-13 17:50:16.511: I/Choreographer(703): Skipped 31 frames!  
The application may be doing too much work on its main thread.
10-13 17:50:35.430: D/AndroidRuntime(703): Shutting down VM
10-13 17:50:35.430: W/dalvikvm(703): threadid=1: 
thread exiting with uncaught exception (group=0x40a13300)
10-13 17:50:35.450: E/AndroidRuntime(703): FATAL EXCEPTION: main
10-13 17:50:35.450: E/AndroidRuntime(703): java.lang.NullPointerException
10-13 17:50:35.450: E/AndroidRuntime(703): 
at com.suvendu.tutorial.cb.CheckBoxTutorialActivity$1.onClick
(CheckBoxTutorialActivity.java:88)
10-13 17:50:35.450: E/AndroidRuntime(703):  
at android.view.View.performClick(View.java:4084)
10-13 17:50:35.450: E/AndroidRuntime(703): 
at android.view.View$PerformClick.run(View.java:16966)
10-13 17:50:35.450: E/AndroidRuntime(703): 
at android.os.Handler.handleCallback(Handler.java:615)
10-13 17:50:35.450: E/AndroidRuntime(703):  
at android.os.Handler.dispatchMessage(Handler.java:92)
10-13 17:50:35.450: E/AndroidRuntime(703):  
at android.os.Looper.loop(Looper.java:137)
10-13 17:50:35.450: E/AndroidRuntime(703):
at android.app.ActivityThread.main(ActivityThread.java:4745)
10-13 17:50:35.450: E/AndroidRuntime(703):
at java.lang.reflect.Method.invokeNative(Native Method)
10-13 17:50:35.450: E/AndroidRuntime(703):   
at java.lang.reflect.Method.invoke(Method.java:511)
10-13 17:50:35.450: E/AndroidRuntime(703):  
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-13 17:50:35.450: E/AndroidRuntime(703):  
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-13 17:50:35.450: E/AndroidRuntime(703):
at dalvik.system.NativeStart.main(Native Method) 
```

活动代码：-

```
 Integer c;
Integer y;
Integer z;
Integer a;

    btn_total_code=(Button)findViewById(R.id.btn_total);
    btn_total_code.setOnClickListener(new Button.OnClickListener()
   {
   public void onClick (View  v) { 
    c=Integer.parseInt(text_price_regular_code.getText().toString());
    y=Integer.parseInt(text_price_regular_code.getText().toString()); 
    z=Integer.parseInt(text_price_regular_code.getText().toString());   
    a=c+y+z;
    text_total_code.setText(Integer.toString(a)); 
    }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:53:26.003

由于我们无法使用聊天功能，我不知道如何帮助您。对不起。您发布的代码工作正常，我刚刚创建了一个项目。你问的问题不是错误。您只是在 Eclipse 中打了一个断点（我假设您使用的是 Eclipse）。我最好的建议是学习如何使用 Eclispe，尤其是如何调试以及如何控制断点。如果不知道如何执行此操作，您将无法成功创建应用程序。

忽略这个：

```
The application may be doing too much work on its main thread. 
```

这仅仅是因为您在断点处暂停了。这不相关。现在，使用“运行”而不是“调试”来运行您的应用程序，或者删除断点。

[编辑]

山姆。你需要学习如何捕鱼，而不是要求我每小时给你一条鱼。

学习阅读堆栈跟踪。这很简单

```
10-13 17:50:35.450: E/AndroidRuntime(703): java.lang.NullPointerException
10-13 17:50:35.450: E/AndroidRuntime(703): 
at com.suvendu.tutorial.cb.CheckBoxTutorialActivity$1.onClick
(CheckBoxTutorialActivity.java:88) 
```

您在第 88 行的 CheckBoxTutorialActivity 中有一个空指针异常。在该行放置一个断点，运行您的应用程序并查看什么是空的以及为什么。如果您无法弄清楚，请开始一个新问题并为该问题使用准确的标题。

# iphone - 更快的替代 AVAudioPlayer？

> ID：12869960
> 
> 赞同：0
> 
> 时间：2012-10-13T04:33:42.530
> 
> 标签：iphone, objective-c, ios, performance, audio

我有一个应用程序，其中播放声音时帧速率会急剧下降。我`AVAudioPlayer`用来播放这些声音，并且在很短的时间内播放了许多声音。这些声音只是千字节的问题。有没有其他方法可以以更低的性能成本播放这些声音？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:07:46.347

是的。在应用程序启动期间将音频文件异步读取到原始 PCM 数组中。然后使用音频单元 API，直接或通过音频混合器将样本复制到 RemoteIO 音频单元缓冲区回调。预混合和/或非重叠音频的性能开销极低。少量音频混合的开销会增加一点点。

# php - Htaccess 301 重定向错误

> ID：12869961
> 
> 赞同：0
> 
> 时间：2012-10-13T04:33:46.880
> 
> 标签：php, .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /webfolder/index.php/$1 [L] 
```

我怎样才能重定向我的网址，即

> www.example.com/webfolder

至

> example.com/webfolder/keyword

没有搞砸上面的重写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:48:48.407

根据[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)它应该是这样的：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} www.example.com
RewriteRule ^webfolder/(.*) http://example.com/webfolder/$1 [L,R=301]
RewriteRule ^webfolder$ http://example.com/webfolder/ [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /webfolder/index.php/$1 [L] 
```

index.php 应该在，`/webfolder/`否则你会得到错误 500

# android - 第二天成功登录并从android应用程序发布到facebook后，我收到错误

> ID：12869966
> 
> 赞同：1
> 
> 时间：2012-10-13T04:34:13.883
> 
> 标签：android

我创建了一个登录 Facebook 的小型应用程序，然后我可以将文本发布到墙上。起初它运作良好。但第二天，应用程序收到 Facebook 错误。

```
public class fblogin extends Activity implements OnClickListener {

    String API_ID;
    Facebook fb;
    TextView fronttext;
    ImageView pic;
    Button postbutton,loginfb; 
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.loginscreen);

        API_ID = getString(R.string.API_ID);
        fb= new Facebook(API_ID);
        pic=(ImageView) findViewById(R.id.picture_pic);
        fronttext=(TextView)findViewById(R.id.fronttext);
        postbutton= (Button)findViewById(R.id.post);
        loginfb=(Button)findViewById(R.id.login);

        loginfb.setOnClickListener(this);
        updateButtonImage();
    }

    public void updateButtonImage()
    {
        if(fb.isSessionValid())
        {   
            postbutton.setVisibility(Button.VISIBLE);
            loginfb.setText("Logout");
            fronttext.setText("WelCome ");
            pic.setVisibility(ImageView.VISIBLE);
            Toast.makeText(getApplicationContext(), "You are log In ",Toast.LENGTH_LONG);

            JSONObject obj=null;
            URL img_url=null;

            try {
                String jsonUser = fb.request("me");
                obj=Util.parseJson(jsonUser);
                String id = obj.optString("id");
                String name=obj.optString("name");
                fronttext.setText("WelCome "+ name);
                img_url =new URL("http://graph.facebook.com/"+id+"/picture?type=small");
                Bitmap bmp=BitmapFactory.decodeStream(img_url.openConnection().getInputStream()); 
                pic.setImageBitmap(bmp);

            } catch (FacebookError e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
        else
        {
            postbutton.setVisibility(Button.INVISIBLE);
            loginfb.setText("Login");
            fronttext.setText("To get Started , Login Using Facebook");
            pic.setVisibility(ImageView.INVISIBLE);
            Toast.makeText(getApplicationContext(), "You are log Out ",Toast.LENGTH_LONG);
        }

    }

    public void postbuttonClicks(View v)
    {
        switch(v.getId()){
        case R.id.post:
            //post
            fb.dialog(fblogin.this,"feed",new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(fblogin.this, "facebook Error....", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(fblogin.this, "Error On Page.....", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onComplete(Bundle values) {
                    Toast.makeText(fblogin.this, "Sucessfully Post on wall...", Toast.LENGTH_LONG).show();

                }

                @Override
                public void onCancel() {
                    Toast.makeText(fblogin.this, "Cancel The Activity....", Toast.LENGTH_LONG).show();

                }
            });

            break;

        }

    }
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        if(fb.isSessionValid()){
            //log out

        try {
            fb.logout(getApplicationContext());
            updateButtonImage();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }

        else{
            //login
               fb.authorize(fblogin.this,new DialogListener() {

                   @Override
                    public void onComplete(Bundle values) {

                        updateButtonImage();
                    }
                   @Override
                public void onFacebookError(FacebookError e) {
                       updateButtonImage();
                    Toast.makeText(fblogin.this, "facebookError", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onError(DialogError e) {

                    Toast.makeText(fblogin.this, "facebookon...Error", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(fblogin.this, "facebookCancel", Toast.LENGTH_LONG).show();
                }
            });

        }
    }  
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);
         fb.authorizeCallback(requestCode, resultCode, data);

    }
} 
```

然后我创建了`onActivityResult`方法，错误得到解决，我可以登录了。但是今天我又遇到了这个错误。我该怎么做才能解决它？我的程序有问题吗？还是会话问题？

# ruby - Ruby：带有-pe的简单命令行不起作用

> ID：12869968
> 
> 赞同：5
> 
> 时间：2012-10-13T04:34:51.407
> 
> 标签：ruby

文件：测试

```
test 
```

命令行输入：

```
ruby -pe 'gsub(/t([a-z])s/){"d"+$1.capitalize}' test 
```

我期望输出为`dEt`，但实际输出为：

```
#<Enumerator:0x00000001c78520> 
```

我不知道会发生什么。当我这样做时，它在 irb 中工作：

```
"test".gsub(/t([a-z])s/){"d"+$1.capitalize} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:39:05.997

事实证明这是一个 Ruby 错误。

我在 2 天前提交了一个 bug 票，他们已经解决了。

这是错误票的链接（它现在是一个反向端口）：

[反向端口 #7157](http://bugs.ruby-lang.org/issues/7157)

这是主干的新更改日志：

[更改日志：见 10 月 14 日](http://svn.ruby-lang.org/cgi-bin/viewvc.cgi/trunk/ChangeLog?view=markup&pathrev=37177)

# php - 是否可以在 Expression Engine 2.x 中创建自定义 CodeIgniter 应用程序

> ID：12869970
> 
> 赞同：0
> 
> 时间：2012-10-13T04:35:09.157
> 
> 标签：php, codeigniter-2, expressionengine

我有一个快速的问题。但在我问之前，我将简要介绍一下我们目前的情况。

现在我们有一个运行 EE 1.7.0 的站点，它管理我们所有的前端营销页面、成员、论坛等（基本的 CMS 内容）。一旦会员登录，他们就会被定向到我们运行 CodeInigter 1.7.2 的主应用程序。我们创建了自定义 EE 扩展和数据库表，因此两个系统可以共享会话（从 EE 到 CI，反之亦然，无需每次都重新登录）。我们的主要应用程序非常广泛，并且正在运行 CI 的模块化扩展 ( [WIKI](https://bitbucket.org/wiredesignz/codeigniter-modular-extensions-hmvc/wiki/Home) )。

我的问题是这个。我们正在寻求升级到 EE 2.x。如果我们这样做，是否可以为两者使用相同的 CI 实例？我们可以将 HMVC 安装到 EE 使用的 CI 中吗？还是我们必须做我们现在正在做的事情，但在这种情况下有两个独立的 CI 实例？

我发现了一个潜在的[“黑客”](http://paramore.is/think/entry/harnessing-the-power-of-codeigniter-in-expressionengine-2.0/)可能会有所帮助，但我不想浪费我的时间，如果它甚至不可能，或者会比它的价值更令人头疼。

如果可能的话，我很想使用相同的实例。我认为我们的应用程序是在 EE 2.x 中构建模块的复杂方式。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:38:53.153

使用单独的 CI 实例可能会更好。与 EE 捆绑在一起的 CI 版本已经过时，您很可能会遇到无法通过升级到最新 CI 版本来解决的问题。

我会将您的应用程序分开，并简单地编写您自己的代码以在您的应用程序中使用 EE 会话（使用 EE 来处理您的登录/注册页面）。无论如何，EE 2.x 完全覆盖了 CI 会话类，因此您可能仍需要为此自定义代码。

保持应用程序解耦意味着出错的事情要少得多，我希望你会减少麻烦。

# javascript - 将值设置为隐藏输入

> ID：12869971
> 
> 赞同：0
> 
> 时间：2012-10-13T04:35:34.853
> 
> 标签：javascript, jquery, form-submit, hidden-field

我知道这个问题被问了很多。我到处搜索。我正在尝试设置隐藏输入的值，以便我可以提交它。我的 jquery 已链接。

这是我的表格：

```
<form id="selectedMovie" action="index.php" method="get">
    <fieldset>
        <input type="text" id="tester" name="tester" value="fifty" style="display:none;"/>
    </fieldset>
</form> 
```

和我的 javascript：

```
function selectVideo( title ){
    alert("" + 21);//works fine
    alert( $('input[name=tester]').val() );//tried
    alert( $('input#tester' ).val() );//tried
    //and a few other things.
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:47:11.423

您的代码无需任何更改即可工作

[http://jsfiddle.net/zWn9h/](http://jsfiddle.net/zWn9h/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:48:31.977

最好的方法是使用隐藏的输入元素而不是不显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T07:32:28.537

要将值设置为 jQuery 中的输入框，您必须使用：

```
$('#tester').val('your_value'); 
```

# java-me - jar文件直接打开不安装手机

> ID：12869974
> 
> 赞同：3
> 
> 时间：2012-10-13T04:36:08.673
> 
> 标签：java-me, emulation, series-40

我正在尝试创建一个 java me 应用程序。代码是hello xxxx，很简单。

但**问题是，当我将它移植到诺基亚 40 系列手机或模拟器时，.jad 或 .jar 文件会直接打开**，但在其他 60 系列手机（如 e72 或 e63）中会安装它。

```
public class Hellostackoverflow extends MIDlet{
  private Form form;
  private Display display;

  public Hellostackoverflow(){
  super();
  }

  public void startApp(){
  form = new Form("Hello stackoverflow");
  String msg = "I love stackoverflow";
  form.append(msg);
  display = Display.getDisplay(this);
  display.setCurrent(form);
  }

  public void pauseApp(){}

  public void destroyApp(boolean unconditional){
  notifyDestroyed();
  }
} 
```

**但我想将它安装在手机（和模拟器）中。我该如何安装它？** PS：我认为问题出在代码中。通常所有应用程序都安装在模拟器或手机中。这不是电话问题，但我的 java 文件中有一些错误..我想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:52:45.667

是直接运行Java ME应用程序还是安装后运行它取决于手机的环境（操作系统）。

S40系列没有塞班操作系统，所以他们直接打开.JAR文件，即使你可以在S40系列手机中查看.JAD文件。

另一方面，在 S60 系列手机中，它们具有 Symbian 操作系统，并且仅在安装后才允许执行 Java ME 应用程序。

# php - 从 sql 数据库设置会话 id 变量；这安全吗？

> ID：12869978
> 
> 赞同：4
> 
> 时间：2012-10-13T04:36:57.457
> 
> 标签：php, sql, session, session-variables

使用我的 sql 表中的 user_id 作为会话 id 是否不安全？这通常是 php 开发人员所做的吗？

[![](../Images/fcce6b011533134581109fa42ef5c6b3.png)](https://i.stack.imgur.com/MGfbY.png)
[（来源：[sockface.com](http://sockface.com/hellooooo.png)）]

我也尝试过无数次将会话 ID 存储为用户 ID

```
include('profile/core/init_inc.php');    
$_SESSION['uid'] = $user_id;
header("Location: profile/edit_profile.php"); 
```

在我的 init_inc

```
function fetch_user_info($uid){
$uid = (int)$uid;

$sql = "SELECT
            `user_id` AS `id`,
            `username`,
            `user_firstname` AS `firstname`,
            `user_lastname` AS `lastname`,
            `user_about` AS `about`,
            `user_email` AS `email`
        FROM `users`
        WHERE `user_id` = {$uid}";

$result = mysql_query($sql);        
return mysql_fetch_assoc($result); 
```

如果我有 $_SESSION['uid'] = 90; 登录后它将[在此处显示 test@test.ca 信息](http://goawaymom.com/login/logon.php)

所以我的问题是，将会话 ID 存储为 user_id 是否安全，当我尝试这样做时，为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T04:41:36.530

A couple things:

1.) A session ID should not be a constant value for a particular user. That is a security violation. The session ID should change every once in a while. Ideally, it should be a random value.

2.) It doesn't look like you are setting the session ID. You are setting the session variable called "uid".

3.) Did you ever call `session_start()`?

* * *

Despite the fact that I really would not recommend setting a session ID to a constant value, you can set the ID for a session using the [session_id() function](http://www.php.net/manual/en/function.session-id.php):

```
$session_id = "some_random_value";
session_id($session_id); 
```

But like I said, this should not be the user's ID. You can store the user's ID as session information, and check that when the user loads a page to see if they are logged in.

```
if (isset($_SESSION["user_id"]))
{
    //user is logged in
    $user_id = $_SESSION["user_id"];
}
else
{
    //make user log in
    $user_id = result_of_login();
    $_SESSION["user_id"] = $user_id;
} 
```

More information on PHP sessions in the [session documentation](http://www.php.net/manual/en/book.session.php).

# java - 如何在 Eclipse 中使用像 Marshaller 这样的外部东西？

> ID：12869979
> 
> 赞同：0
> 
> 时间：2012-10-13T04:37:01.170
> 
> 标签：java, eclipse, import, external

如果我想在 Eclipse 中使用[http://www.castor.org/javadoc/org/exolab/castor/xml/Marshaller.html](http://www.castor.org/javadoc/org/exolab/castor/xml/Marshaller.html)之类的东西，我该怎么做？有

```
import org.exolab.castor.xml.Marshaller; 
```

似乎不起作用，我不确定要搜索什么以找出要使用的内容。Marshaller 是外部库、包、类路径还是插件？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:55:49.203

您需要识别该类所属的库（使用[JarFinder](http://www.jarfinder.com)），下载 jar 并将其添加到项目的构建路径中，使用

> 项目 -> 属性 -> Java 构建路径 -> 库 -> 添加外部 JAR -> <从下载 jar 的位置选择>

您在问题中提到的类似乎来自[Castor Java XML Binding](http://www.castor.org/download.html)库，因此请从他们的网站下载 jar 并按照上述步骤操作。然后 import 语句将正常工作而不会引发任何错误。

# android - 用两个分隔符“|”分割乐趣 不管用

> ID：12869981
> 
> 赞同：2
> 
> 时间：2012-10-13T04:37:20.813
> 
> 标签：android, split, tokenize

在我的 doInBackground(String... arg0) 方法中，我得到一个包含以下内容的结果变量：

```
4|Litter Bin,-37.8141472000103,144.963691391683,17.354417684886|Litter Bin,-37.8141472763581,144.963685395193,17.179052776008|Litter Bin,-37.8139653160326,144.963765797949,13.429259628312|Litter Bin,-37.8139469233985,144.963755935562,13.402390334431 
```

我正在尝试使用拆分来匹配这种形式：N|category,latitude,longitude,distance|category,latitude,longitude,distance...

当我使用“|” 它不会分裂任何东西。

这是我的代码：

```
@Override
protected Integer doInBackground(String... arg0) {

    String result = "";
    int responseCode = 0;

    int executeCount = 0;
    HttpResponse response;

    StringBuilder sb = new StringBuilder();
    String line;
    try 
    {
        HttpClient client = new DefaultHttpClient();
        HttpGet httppost = new HttpGet("http://XXX/ccvo/mel-asset-data/query.php?lon="+ arg0[0].toString() + "&lat="+ arg0[1].toString() +"&within=" + arg0[2].toString()  + "&keyword="+ arg0[3].toString().replace(" ", "%20"));

        Log.v("Results", "from web: " + arg0[0]);
        Log.v("Results", "from web: " + arg0[1]);
        Log.v("Results", "from web: " + arg0[2]);
        Log.v("Results", "from web: " + arg0[3]);

            do
            {
                progressDialog.setMessage("Passing paratmeters.. ("+(executeCount+1)+"/5)");
                // Execute HTTP Post Request
                executeCount++;
                response = client.execute(httppost);
                responseCode = response.getStatusLine().getStatusCode();                        

            } while (executeCount < 5 && responseCode == 408);

            BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            while ((line = rd.readLine()) != null)
            {
                result = line.trim();
                sb.append(line);

            }
    }catch (Exception e2) {
        responseCode = 408;
        e2.printStackTrace();
        }
    rst = result.toString();
    if(rst != null && rst.length() > 0)
    {
      strArr = rst.split(",");
      for(int i=0;i<strArr.length;i++)
      {
        Log.d("Results", "Array split 1: " + strArr[i]);
      }
    }

    return responseCode;
} 
```

输出：

```
10-13 16:26:30.292: D/Results(10500): Array split 1: -37.8141472000103
10-13 16:26:30.292: D/Results(10500): Array split 1: 144.963691391683
10-13 16:26:30.312: D/Results(10500): Array split 1: 17.354417684886|Litter Bin
10-13 16:26:30.312: D/Results(10500): Array split 1: -37.8141472763581
10-13 16:26:30.322: D/Results(10500): Array split 1: 144.963685395193
10-13 16:26:30.322: D/Results(10500): Array split 1: 17.179052776008|Litter Bin
10-13 16:26:30.322: D/Results(10500): Array split 1: -37.8139653160326
10-13 16:26:30.362: D/Results(10500): Array split 1: 144.963765797949
10-13 16:26:30.362: D/Results(10500): Array split 1: 13.429259628312|Litter Bin
10-13 16:26:30.362: D/Results(10500): Array split 1: -37.8139469233985
10-13 16:26:30.362: D/Results(10500): Array split 1: 144.963755935562
10-13 16:26:30.362: D/Results(10500): Array split 1: 13.402390334431 
```

任何想法请如何使用“，”和“|”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T05:08:57.970

您在获取字符串时编写了错误的逻辑。只是放在`rst = result.toString()`外面一会儿。

```
BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
while ((line = rd.readLine()) != null)
{
  result = line.trim();
  sb.append(line);                   
}
rst = result.toString(); 
```

然后检查字符串是否不为空

```
if(rst != null && rst.length > 0)
{
  strArr = rst.split(",");
  for(int i=0;i<strArr.length;i++)
  {
    Log.d("Results", "Array split 1: " + strArr[i]);
  }
} 
```

拆分为“|”

```
if(rst != null && rst.length > 0)
{
  strArr1 = rst.split("|");
  for(int i=0;i<strArr1.length;i++)
  {
    if(strArr1[i] != null && strArr1[i].length >0 && strArr1[i].contains(","))
    {
      String strArr2 = strArr1[i].split(",");
      for(int j=0; j<strArr2.length ;j++)
      {
        Log.d("Results", "Array split "+i+": " + strArr2[j]);
      }
    }
  }
} 
```

# jquery - jscrollpane 容器就像一个 iframe 窗口？

> ID：12869982
> 
> 赞同：1
> 
> 时间：2012-10-13T04:37:22.323
> 
> 标签：jquery, plugins, jscrollpane, jquery-jscrollpane

如果有人使用过用于 jquery 的 jScrollpane 插件，那么他们就会知道它创建了一个容器`jspContainer`或其他东西......但是，我在显示某些项目时遇到了问题，因为这个容器就像一个 iframe（或者我认为这就是它的名字） ...基本上，如果我有一个方形 div，并且我已将其设置为绝对位置，并将其偏移到`left:-40px;`容器的位置，那么方形 div 的一部分就会消失。

它的行为就好像这个 jspContainer 是一个窗口，并且任何显示在这个容器之外的内容，它都会被隐藏......我已经尝试过 z-index:99999999999......但它仍然不起作用。

我希望我解释清楚？其他人有这种情况发生在他们身上吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T04:43:56.127

This is because the container div is set to overflow hidden by default. This can be overridden by using something like:

```
 #myJspContainer{
      overflow:visible !important;

 } 
```

# facebook - 除了 Heroku，还有其他免费的服务可以用于 FB App 开发吗？

> ID：12869983
> 
> 赞同：-1
> 
> 时间：2012-10-13T04:37:39.380
> 
> 标签：facebook, facebook-graph-api

我真的不确定我是否应该在 Heroku 上部署它，因为它将涉及学习使用 git 命令来处理远程服务器，因此我正在寻找替代方案。最好是我可以使用 FTP 拉/推文件的地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T06:57:00.090

托管平台不需要任何神奇的东西就可以部署服务器端 Facebook 应用程序。Heroku 很棒而且很简单，但是任何运行 PHP 的平台（例如）都是可行的。

但不要忘记，您也可以使用客户端 HTML5 和 JavaScript 创建 Facebook 应用程序。在这种情况下，（在极端情况下）您的主机只需要提供静态文件。

最后，您可以在本地开发人员机器上获得很长的路要走。主要挑战是 Open Graph 对象（必须对外界可见），但在其他方面非常可行

# c# - 如何使用 C# 从 WebForm 中禁用的文本框中获取值

> ID：12869986
> 
> 赞同：0
> 
> 时间：2012-10-13T04:38:17.097
> 
> 标签：c#, webforms

我正在创建一个 WebForm，其中提供了启用和禁用文本框的功能。但是，当我在 TextBox 中输入值然后禁用它时。我无法将 TextBox 值保存在数据库中。每当代码尝试保存该值时，都会在其中获取一个空值，因此它存储一个空值。当我不禁用文本框时，该值会成功存储在表中。下面是一些与之相关的代码......

```
protected void btnCreateSubAcct_Click(object sender, EventArgs e)
    {
        int subAccountID = 0;
        try
        {                
                if (Page.IsValid)
                {
                    subAccountID = SaveUpdateSubAccount();

                    if (string.IsNullOrEmpty(HiddenFieldSubAccntID.Value))
                    {
                        SessionHandler.Set(SessionHandler.SubAccountIDKey, subAccountID);
                        Response.Redirect("~/newaccountwelcome");
                    }
                    else
                    {
                        lblDialogMessage.Text = "Subaccount updated successfully!";
                        modalPage.Visible = true;
                        SetFocus(btnOK.ClientID);
                    }
                }

        }
        catch (ThreadAbortException)
        {

        }
        catch (Exception ex)
        {
            _log.Error("Error Occured While Creation of SubAccount.", ex);
            throw;
        }
    }

private int SaveUpdateSubAccount()
{
SubAccount objSubAccount = null;

        if (!string.IsNullOrEmpty(HiddenFieldSubAccntID.Value) &&         !HiddenFieldSubAccntID.Value.Equals("0"))
        {
            objSubAccount = SubAccount.GetSubAccount(Convert.ToInt32(HiddenFieldSubAccntID.Value));
        }

        if (objSubAccount == null)
        {
            objSubAccount = new SubAccount();
            objSubAccount.CreatedByUser = SessionHandler.CurrentUser.UserID;
        }
        objSubAccount.FBO1FirstName = txtFBO1FirstName.Text.Trim();
        objSubAccount.FBO1MiddleInitial = txtFBO1MiddleName.Text.Trim();
        objSubAccount.FBO1LastName = txtFBO1LastName.Text.Trim();
        objSubAccount.FBO1AccountTitling = txtFbo1AccountTitling.Text.Trim();
        objSubAccount.FBO1TaxIDType = fbo1RadioButtonList.SelectedItem.Value;
        objSubAccount.FBO1TaxID = Helpers.GetUnFormattedTIN(txtFbo1TaxId.Text.Trim());
}

//under the class SubAccount, the information is getting stored in the database 
```

每当我尝试保存文本 FBO1TaxID 的值时，当它处于禁用模式时，此 TextBox 下的值是空的。

如何将禁用模式下的文本框的值保存在数据库表下？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:46:51.730

您可以做的是：添加一个隐藏字段，当禁用文本框时，将其值设置为隐藏字段。然后当您需要文本框值时，首先检查它是否为 NullOrEmpty。如果否，是文本框的值。否则，使用隐藏字段的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T04:47:10.210

问题是，ASP 不会在视图状态中存储禁用元素的值。您应该有更好的机会将文本框设置为只读。

# silverlight-5.0 - 如何在银光下根据文本框中的条件启用或禁用复选框？

> ID：12869987
> 
> 赞同：0
> 
> 时间：2012-10-13T04:38:18.817
> 
> 标签：silverlight-5.0

我有一个文本框，旁边有一个复选框。如果用户输入值 $240，则不选中复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:42:07.820

那么它可以很容易地实现。只需在构造函数中注册 TextBox 的 GotFocus 事件，因为`txtbox.LostFocus += new RoutedEventHandler(txtbox_LostFocus);` 现在在您的处理程序中编写以下代码，您就可以开始了

```
void txtbox_LostFocus(object sender, RoutedEventArgs e)
    {
        if(Convert.ToInt32(txtbox.Text) == 240)
        {
             checkbox.IsChecked = false;
        }
    } 
```

# javascript - 如何在我网站的某个位置打开某个网站（例如 stackoverflow）？

> ID：12869988
> 
> 赞同：1
> 
> 时间：2012-10-13T04:38:23.027
> 
> 标签：javascript, asp.net, html, web

我看到一些在线匿名者做到了，所以我什至可以直接从他们的页面浏览网页。

我想在某些网站中打开一些网站`<div`，或者`<asp`在我的网站中打开面板

我怎样才能做到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T04:40:25.927

Perhaps you want an [iframe](http://www.w3schools.com/html/html_iframe.asp)? It stands for inline frame, and is the HTML5 and beyond replacement for regular frames.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T07:11:35.680

嗨，你可以用 iframe 做到这一点。

下面是一个例子。

```
<iframe src="URL" width="200" height="200"></iframe> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T04:49:22.803

您可以使用浏览器控件检查 ASP.NET。

[从CodeProject](http://www.codeproject.com/Articles/50544/Using-the-WebBrowser-Control-in-ASP-NET)中点击此链接以查看浏览器控件的自定义包装器。

或者您可以创建尝试使用 HttpWebRequest 加载远程站点，然后将其显示在您的站点上。

您可以查看本[教程](http://www.mikesdotnetting.com/Article/49/How-to-read-a-remote-web-page-with-ASP.NET-2.0)。

# python - 如何从字典字符串中恢复 python dateutil.rrule 对象？

> ID：12869990
> 
> 赞同：4
> 
> 时间：2012-10-13T04:38:30.020
> 
> 标签：python, python-dateutil, rfc2445, rfc5545, rrule

我想将 dateutil.rrule 对象存储到数据库中，并在从数据库中读取后重新创建它们。

鉴于以下问题，我认为我需要使用一种解决方法。 [Python dateutils 根据 iCalendar 格式打印重复规则（参见 RFC 5545）](https://stackoverflow.com/questions/12331652/python-dateutils-print-recurrence-rule-according-to-icalendar-format-see-rfc-55)

我正在考虑存储 myrrule 的输出。**dict**到数据库作为字符串，然后在需要时重新创建 rrule 对象。

这是字典的样子：

```
{'_cache_complete': False, '_byhour': (0,), '_wkst': 0,
'_timeset': (datetime.time(0, 10),), '_bysecond': (0,),
'_bymonthday': (), '_byweekno': None, '_bysetpos': None,
'_cache': None, '_bymonth': None, '_bynweekday': ((4, 3),),
'_tzinfo': None, '_byyearday': None, '_byweekday': None,
'_byminute': (10,), '_len': 10, '_until': None,
'_bynmonthday': (), '_dtstart': datetime.datetime(2012, 10, 13, 0, 10),
'_count': 10, '_freq': 1, '_interval': 1, '_byeaster': None} 
```

这是个好主意吗？还有其他建议吗？

如何从字典中恢复 python 对象？python setattr() 是我最好的选择还是有更简单的方法？

我应该考虑改用这样的东西吗？ [https://stackoverflow.com/a/1305663/161628](https://stackoverflow.com/a/1305663/161628)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T08:21:49.157

你需要的是python的`pickle`模块。该`pickle`模块是一个简单的序列化模块，可以将任何 python 对象转换为字符串。稍后可以将字符串反序列化回原始对象。

```
import pickle
serial_str = pickle.dumps(your_rrule_object)
db.store(serial_str)
...
serial_str = db.retrieve()
new_rrule_object = pickle.loads(serial_str) 
```

有关更多详细信息，请查看 pickle 模块的文档。

# xcode4 - How do I link a third party dylib in a Mac OS X app using XCode 4.5? "Undefined symbols" error

> ID：12869997
> 
> 赞同：2
> 
> 时间：2012-10-13T04:39:46.230
> 
> 标签：xcode4, libmysql

I'm trying to use functions defined in a third-party dynamic library (libmysql) in a desktop app for Mac OS X. I'm using XCode 4.5.1 on Mac OS X v. 10.8.2.

Here's what I've done so far:

1) I downloaded the Mac OS X 10.5 x86 64-bit C connector files from [http://dev.mysql.com/downloads/connector/c/](http://dev.mysql.com/downloads/connector/c/) (this is the most recent version available).

2) I copied the files from the disk image to a local directory.

3) I added the path to that local directory to my project's Build Settings->Search Paths->User Header Search Paths and set "Always Search User Paths" to "Yes"

4) I added libmysql.client to Build Phases->Copy Files

5) I added libmysql.client to Copy Bundle Resources

6) I wrote a test function in my code:

```
#import "mysql.h"
-(NSNumber*)testFunction {

mysql_library_init(0, NULL, NULL);
mysql_library_end();

return [NSNumber numberWithInt:8];
} 
```

The project compiles (target:My Mac 64-bit), but I get "Undefined symbols for architecture x86_64" errors for the two mysql functions from the linker. Here is the full error message:

> Ld "/Users/chapka/Library/Developer/Xcode/DerivedData/The_Single_Table_Admin_Tools-ctdgurwiktybjqcnlfuufetgimfy/Build/Products/Debug/The Single Table Admin Tools.app/Contents/MacOS/The Single Table Admin Tools" normal x86_64 cd "/Users/chapka/Documents/Developer/The Single Table/The Single Table Admin Tools" setenv MACOSX_DEPLOYMENT_TARGET 10.8 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk -L/Users/chapka/Library/Developer/Xcode/DerivedData/The_Single_Table_Admin_Tools-ctdgurwiktybjqcnlfuufetgimfy/Build/Products/Debug "-L/Users/chapka/Documents/Developer/The Single Table/The Single Table Admin Tools" "-L/Users/chapka/Documents/Developer/The Single Table/The Single Table Admin Tools/The Single Table Admin Tools" "-L/Users/chapka/Documents/Developer/The Single Table/The Single Table Admin Tools/../../Libraries/mysql" -F/Users/chapka/Library/Developer/Xcode/DerivedData/The_Single_Table_Admin_Tools-ctdgurwiktybjqcnlfuufetgimfy/Build/Products/Debug -filelist "/Users/chapka/Library/Developer/Xcode/DerivedData/The_Single_Table_Admin_Tools-ctdgurwiktybjqcnlfuufetgimfy/Build/Intermediates/The Single Table Admin Tools.build/Debug/The Single Table Admin Tools.build/Objects-normal/x86_64/The Single Table Admin Tools.LinkFileList" -mmacosx-version-min=10.8 -fobjc-arc -fobjc-link-runtime -framework Cocoa -o "/Users/chapka/Library/Developer/Xcode/DerivedData/The_Single_Table_Admin_Tools-ctdgurwiktybjqcnlfuufetgimfy/Build/Products/Debug/The Single Table Admin Tools.app/Contents/MacOS/The Single Table Admin Tools"
> 
> Undefined symbols for architecture x86_64: "_mysql_server_end", referenced from: -[TSTDataSource gameCount] in TSTDataSource.o "_mysql_server_init", referenced from: -[TSTDataSource gameCount] in TSTDataSource.o ld: symbol(s) not found for architecture x86_64 clang: error: linker command failed with exit code 1 (use -v to see invocation)

I've looked around for other questions like this, but they all seem to be solved by steps 4 and/or 5 above. The only other suggestion I found was to use install_name_tool, but I'm not sure what exactly I would need to change or what I would need to change it to. If this is the likely issue, any hints would be more than welcome.