# StackOverflow 问答 15671000-15671999

# firebase - Firebase REST API：如何在 JS 中按 startAt/endAt 等优先级获取数据？

> ID：15671000
> 
> 赞同：7
> 
> 时间：2013-03-27T22:46:45.160
> 
> 标签：firebase

我需要按优先级范围获取我的数据，就像你可以在 JS 中使用 startAt/endAt 一样，但在 REST 中。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-31T19:49:28.157

我相信现在可以通过 beta Queries API 实现这一点。

根据[https://www.firebase.com/docs/beta/queries/rest.html](https://www.firebase.com/docs/beta/queries/rest.html)：

> startAt 参数接受您在 orderBy 中指定的任何类型。此查询查找所有至少 3 米高的恐龙。
> 
> ```
> curl 'https://dinosaur-facts.firebaseio.com/.json?orderBy="height"&startAt=3' 
> ```
> 
> 此查询查找所有以剑龙开头的恐龙。
> 
> ```
> curl 'https://dinosaur-facts.firebaseio.com/.json?orderBy="$key"&startAt="stegosaurus"' 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T00:28:40.500

REST API 尚无法做到这一点。

但是，您可以在自己的服务器上的 Node.js 客户端上运行，并以这种方式查询您的数据： [https ://www.firebase.com/docs/nodejs-quickstart.html](https://www.firebase.com/docs/nodejs-quickstart.html)

# javascript - Facebook 提要错误

> ID：15671002
> 
> 赞同：0
> 
> 时间：2013-03-27T22:46:46.750
> 
> 标签：javascript, facebook

我收到广告提要错误，发生错误。请稍后再试。对于下面的代码。

```
 <a target="_blank" href="https://www.facebook.com/dialog/feed?app_id=107100136150735&link=http://www.facethered.com&picture=&name=Experience the terror of The Red in Tampa.&caption=http://www.facethered.com&description=See the trailer and get free tickets to an exclusive premiere near you.&redirect_uri=http://www.facethered.com"><img src="images/new_send.png"></a> 
```

感谢所有的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:57:46.820

您的链接似乎无处可去。您可能需要仔细检查链接是否正确。

你想把这个链接放到哪里？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:52:29.940

你的链接是错误的。你想去特定的地方吗？跟我们多说些。

这是你想要的吗？

```
 <iframe src="http://www.facebook.com/plugins/like.php?href=YOUR_URL"
    scrolling="no" frameborder="0"
    style="border:none; width:450px; height:80px"></iframe> 
```

您是否尝试从您的网站链接到您的 Facebook 页面？

# algorithm - 根据 GPS 位置确定用户所在的路径

> ID：15671005
> 
> 赞同：1
> 
> 时间：2013-03-27T22:46:55.343
> 
> 标签：algorithm, gps, openstreetmap

我正在编写一个应用程序，它利用 GPS 信息来确定用户所在的道路/小径（或 OpenStreetMaps 术语中的“方式”）。OSM 中的方式不包括宽度信息，只是一系列连接在一起的点，因此无需确定 GPS 坐标在哪个多边形框中。

我拥有的信息是定义路径弯曲时的点列表（如果它只是一条直线路径，则可能相距 2 个点 1/2 英里）。这些小径通常由树线隔开（例如相距 50-300 米），公园内可能有很多这样的小径，因此在边缘情况下没有宽度信息的准确性可能会很棘手。通常定义沿着路径的中心运行的方式。

似乎我需要计算轨迹上的所有单个向量，然后找到最近的向量。我担心这对于每次新的 GPS 更新（每 1-4 秒？）都相当密集。我至少可以尝试提前填写每条路径上的点（每 x 米强制一个点），然后在 GPS 更新时获取最近的点。

是否有任何结构可以预先调整点数据以帮助计算？解决此问题的任何其他已知算法对移动约束友好吗？似乎这应该是一个已经解决的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:26:52.470

这个解决了，叫做Map Matching。
我为收费目的编写了这样一个系统。有一些与实时匹配相关的变体，比如在导航系统中，或者像我的用于后处理 GPS 数据的非实时。
但在每种情况下，至少需要几个月的开发努力。

如果您有一条分叉两条路径的小路，事情就会开始变得困难。
如果在这种情况下匹配错误的路径没有问题，您可以简单地搜索最近的路径。

为了避免过多的 CPU 功率，请使用地理空间索引，如四叉树或 kd 树。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:46:51.217

大概您正在使用从某种数据格式绘制地图的地图渲染 API。这本质上是一个特殊用途的数据库，称为空间数据库。在理想的世界中，它应该具有查找一定距离内的所有道路和路径的有效功能，例如 50 米。

一旦你有附近道路和路径的列表，即使在一个密集的区域，就在一个路口旁边，也不会超过低位的十个，你可以一个一个地遍历它们并找到最近的一个您的 GPS 定位。有一些标准方法可以找到离线最近的点；这里有一个讨论：[得到最接近线的点](https://stackoverflow.com/questions/3120357/get-closest-point-to-a-line)。

这个系统（根据我的经验）应该足够快，足以每秒更新 GPS。

如果您遵循预定路线，它会更快，因为您只需要检查路线的路段 - 当然，如果他或她离路线太远而无法被视为在路线上，请通知用户，然后创建一条新路线。这就是卫星导航系统所做的。

# ruby - 在 Sinatra 中过滤所有 POST 请求？

> ID：15671006
> 
> 赞同：15
> 
> 时间：2013-03-27T22:46:58.410
> 
> 标签：ruby, filter, sinatra

有没有办法创建一个“之前”过滤器来捕获和预处理 Sinatra 中的所有 POST 请求？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-12T18:42:42.260

一种方法是创建一个自定义[条件](http://www.sinatrarb.com/intro.html#Conditions)以在过滤器中使用：

```
set(:method) do |method|
  method = method.to_s.upcase
  condition { request.request_method == method }
end

before :method => :post do
  puts "pre-process POST"
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-12T18:11:51.223

您的解决方案是完全有效的。

我会这样做：

```
before do
  next unless request.post?
  puts "post it is!"
end 
```

或者，您也可以使用包罗万象的发布路线，然后提交请求（需要成为第一个发布路线）：

```
post '*' do
  puts "post it is!"
  pass
end 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-11-10T20:33:22.593

+1以上[matt](https://stackoverflow.com/users/214790/matt)的回答...我最终将其扩展为包括对一种或多种方法的支持，如下所示：

```
set :method do |*methods|
    methods = methods.map { |m| m.to_s.upcase }
    condition { methods.include?(request.request_method) }
end

before method: [:post, :patch] do
    # something
end 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-27T22:51:06.493

我想出了这个：

```
before do
    if request.request_method == "POST"
        puts "pre-process POST"
    end
end 
```

...但如果有人知道更好的方法，请分享。

# c# - 泛型的泛型

> ID：15671007
> 
> 赞同：1
> 
> 时间：2013-03-27T22:47:04.397
> 
> 标签：c#, generics

我有一个泛型基类，其中泛型类型是类和其他相关的继承类：

```
public class BaseClass<T> where T : class 
{
   virtual void DoWork(){..}
   virtual void DoAnotherWork(){..}
}

public class SomeInherit<Person> : BaseClass<Person>
{
   //...
}

public class OtherInherit<Car> : BaseClass<Car>
{
   // override something..
} 
```

然后，我有一个 BaseClassManager，它应该能够加载一些同事通过反射继承的 BaseClass：

```
public class BaseClassManager
{
   public BaseClass<TItem> LoadBaseClass<T>() where T : BaseClass<???>
   {
      //  how can create an instance of T?
      //  TItem : class
      //  T : BaseClass
      //  -------------> in reality, it should be: T<TItem> (just as BaseClass<Person>)
   }
} 
```

有没有办法做到这一点..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T22:50:56.350

您需要为`where T : BaseClass<???>`.
您可以使用[约束`new()`来](http://msdn.microsoft.com/en-us/library/d5x73970%28v=vs.110%29.aspx)允许该方法创建泛型类型的实例。

```
public TBaseClass LoadBaseClass<TBaseClass, TItem>()
    where TBaseClass : BaseClass<TItem>, new()
    where TItem : class
{
    return new TBaseClass();
} 
```

*用法：*

```
SomeInherit<Foo> result = LoadBaseClass<SomeInherit<Foo>, Foo>(); 
```

# php - 使用 PHP 从 twitter 页面抓取图片 url

> ID：15671015
> 
> 赞同：1
> 
> 时间：2013-03-27T22:47:39.690
> 
> 标签：php, regex, twitter, file-get-contents, scrape

我正在尝试使用 php从 twitter 上抓取图像网址，例如“ [https://pbs.twimg.com/media/BGZHCHwCEAACJ19.jpg:large ”。](https://pbs.twimg.com/media/BGZHCHwCEAACJ19.jpg:large)我发现以下 php 代码和 file_get_contents 正在工作，但我认为正则表达式与 url 不匹配。你能帮助调试这段代码吗？提前致谢。

这是来自 twitter 的片段，其中包含图像：

```
<div class="media-gallery-image-wrapper">
     <img class="large media-slideshow-image" alt="" src="https://pbs.twimg.com/media/BGZHCHwCEAACJ19.jpg:large" height="480" width="358">
 </div> 
```

这是php代码：

```
<?php
    $url = 'http://t.co/s54fJgrzrG';
    $twitter_page = file_get_contents($url);
    preg_match('/(http:\/\/p.twimg.com\/[^:]+):/i', $twitter_page, $matches);
    $imgURL = array_pop($matches); 
    echo $imgURL;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:49:59.727

您的正则表达式似乎缺少 URI 开头的部分。它缺少“pbs”部分，无法确定是 http 还是 https。

```
preg_match('/((http|https):\/\/pbs.twimg.com\/[^:]+):/i', $twitter_page, $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:02:23.880

像这样的东西应该提供一个 URL。

```
<?php
    $url = 'http://t.co/s54fJgrzrG';
    $twitter_page = file_get_contents($url);
    preg_match_all('!http[s]?:\/\/pbs\.twimg\.com\/[^:]+\.(jpg|png|gif)!i', $twitter_page,$matches);
    echo $img_url=$matches[0][0];
?> 
```

回应是

```
https://pbs.twimg.com/media/BGZHCHwCEAACJ19.jpg 
```

# mysql - 最后一个活动列表 - VB.NET

> ID：15671019
> 
> 赞同：0
> 
> 时间：2013-03-27T22:48:03.340
> 
> 标签：mysql, database, vb.net, time

我有一个客户端应用程序，它将每五分钟更新一次数据库的当前时间，然后我想将此时间输出为单独的 VB 应用程序中的最后一个活动表。

我知道 mysql 时间，但我不太明白如何使用它来显示客户端上次活动的时间。

我环顾四周，发现了一些关于 mysql 时代的东西，但我并不完全理解。

任何帮助都会很棒，如果有帮助，我会将结果放在带有“客户端名称”和“上次活动”的 ListView 中，并且我已经知道如何连接到我的数据库并检索信息。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:16:42.457

我建议使用`DATETIME`存储。`TIME`数据类型仅限于单个“一天中的时间”或时间跨度。诚然，您正在寻找一天中的时间，但要计算“上次活动”时间，您需要附加日期。考虑这些“上次活动”值（使用 24 小时制）：

*   `3/26/2013 at 17:00:00`<--*这是最长的时间（下午 5 点），但是...*
*   `3/27/2013 at 08:15:00`<-- *...这是最近的时间，因为它发生在第二天*

换句话说，您需要日期以便对时间进行排序。

MySQL`DATETIME`数据类型应该是VB.NET支持的，但是我从来没有同时使用过这两个，所以不能保证。要仅查询和报告日期的时间部分，您有很多选择。这里有两个：

1.  从 MySQL 查询整个日期/时间并将其作为`System.DateTime`值返回给 VB.NET。在 VB.NET 中，您可以将其格式化`DateTime.ToString`为仅显示时间组件。MySQL 查询会是这样的：

    ```
    SELECT ClientName, MAX(LastActive) AS LastActiveDateTime
    FROM your_table
    GROUP BY ClientName 
    ```

2.  在 MySQL 中格式化时间并将其作为 a 返回`String`到 VB.NET。在 VB.NET 中，您只需要按原样显示字符串。MySQL 查询会是这样的：

    ```
    SELECT ClientName, DATE_FORMAT(MAX(LastActive), '%r') AS LastActiveTime
    FROM your_table
    GROUP BY ClientName 
    ```

上述查询中的格式代码`%r`将以 12 小时格式返回时间，包括 AM/PM，例如`07:55:29 PM`. 要返回 24 小时格式 ( `19:55:29`)，请`%T`改用。

# c# - Entity Framework 和 MVC 在业务层或数据访问层创建 DbContext

> ID：15671024
> 
> 赞同：3
> 
> 时间：2013-03-27T22:48:26.327
> 
> 标签：c#, asp.net-mvc, entity-framework

我是 Entity Framework 和 .NET 的新手，正在构建 MVC 4 应用程序。我想我对应该在哪里创建数据库上下文实例有点困惑。在我的应用程序中，我有几个层次：Web、业务、数据访问、数据库（这些都是单独的项目）。在数据访问层，每个表都有一个类。我看到的一个示例显示了在数据访问层内的每个方法中创建上下文（我可能误解了它）。当更新多个表作为业务逻辑的一部分时，这似乎不太实用。在每个数据访问层方法中创建新上下文的结果似乎是这个错误：`An entity object cannot be referenced by multiple instances of IEntityChangeTracker`更新多个表时。

那么在业务层方法中创建上下文然后将其传递给数据访问层方法是否可以接受？或者有更好的方法吗？

上下文来自业务层的情况如下：

```
public User RetrieveUserById(int id, MyDbContext ctx)
    {            
        User findUser = ctx.Users.Find(id);
        return findUser;
    } 
```

而不是在数据访问层方法中创建上下文：

```
public User RetrieveUserById(int id)
    {
        var ctx = new MyDbContext();
        User findUser = ctx.Users.Find(id);
        return findUser;
    } 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:04:57.333

数据访问层。创建一个与 DbContext 一起存在于数据层中的“工作单元”类。尝试搜索“Asp.net 工作单元模式”。

[http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net- mvc-应用程序1](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

基本上，它是汇集多个存储库/表的中心位置，因此您可以在不处理上下文的情况下对多个存储库进行操作。您不必完全按照所示使用它。您可以对其进行修改以满足您的需要。

# ruby-on-rails - RoR：从数据库中检索值并显示在视图中

> ID：15671026
> 
> 赞同：0
> 
> 时间：2013-03-27T22:48:45.683
> 
> 标签：ruby-on-rails

我试图通过执行以下操作来计算我的对象并显示视图中的数字：

显示.html.erb：

```
 <%Files.where(defined:"yes").count do |number|%>
    <%= number %>
    <% end %> 
```

但它什么也没显示。哪里有问题？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T22:51:13.880

`.count`返回一个整数值，而不是一个数组，所以你不能迭代它。只需这样做：

```
<%= Files.where(defined: "yes").count %> 
```

# highcharts - 以编程方式更改 highstock 或 highchart 中的图例

> ID：15671029
> 
> 赞同：0
> 
> 时间：2013-03-27T22:48:53.887
> 
> 标签：highcharts, highstock

要在创建 highstock 图表之前设置图例的可见性，我可以这样做：

```
new Highcharts.StockChart({
   legend: {
      enabled: true,
      align: 'left'
   }
}); 
```

创建图表后，我希望允许用户隐藏图例或将图例移动到不同的位置。我需要类似于 chart.setTitle 但用于图例的东西。

请注意，我阅读[了这篇文章](https://stackoverflow.com/questions/13621370/programmatically-display-highstocks-legend)，但不太了解其中的建议。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T16:43:37.590

现在这样的东西不是 Highcharts 的一部分，但它是计划插件，检查这个：[http ://highcharts.uservoice.com/forums/55896-general/suggestions/912335-draggable-legend-box](http://highcharts.uservoice.com/forums/55896-general/suggestions/912335-draggable-legend-box)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T17:08:49.007

您链接到的帖子是正确的，但并不像您希望的那样完整。无法设置选项来打开和关闭图例并让图表调整边距以适应图例的存在。但是，通过以您链接到的示例中显示的方式删除所有数据系列，图表就会消失。然后，如果您提前知道图例的位置以及已给出多少边距，则可以手动调整边距。

例如，如果“chart”是您的 highcharts 对象的名称：

```
for (var a=0; a<window[id].Chart_dataseries.length; a++)
{
    chart.series[a].options.showInLegend = false;
    chart.series[a].legendItem = null;
    chart.legend.destroyItem(chart.series[a]);
    chart.legend.render();
} 
```

然后，您可以通过重新渲染项目使图表“重新出现”。

```
for (var a=0; a<window[id].Chart_dataseries.length; a++)
{
    chart.series[a].options.showInLegend = true;
    chart.series[a].legend.renderItem(chart.series[a]);
    chart.legend.render();
} 
```

我通过将操作链接到一个复选框来实现这一点，当它被选中时，图表“重新出现”，而当它被取消选中时，图表“消失”。我尝试使用以下附加命令执行此操作：

```
chart.options.legend.enabled=false; (or true)
chart.render(); 
```

这确实调整了图表以填充删除图例时图例占用的空间。但是，它也留下了图例周围的框。我还允许我的用户手动调整边距，所以对我来说，一个有效的选项是让用户“关闭”图例，然后手动调整边距。

# java - 如何创建具有变量名称的类的新（对象？）？

> ID：15671044
> 
> 赞同：0
> 
> 时间：2013-03-27T22:49:28.413
> 
> 标签：java, class

假设我有一个班级`myClass`和一个`String myString`. 我该怎么做：

```
myClass [value of myString] = new myClass; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:52:13.610

Java 中不能有动态变量。不过，您可以使用 a`Map<String, Object>`作为`String myString`键并将新值设置为类的新实例：

```
Map<String, Object> map = new HashMap<String, Object>();
map.put(myString, new MyClass()); 
```

如果您确定您的地图将只包含`MyClass`实例，那么您可以使用`Map<String, MyClass>`.

```
Map<String, MyClass> map = new HashMap<String, MyClass>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:52:15.420

您不能将字符串变量的值用作变量名。Java 不允许这样做。

但是，使用 a `Map`，您可以将字符串（作为键）关联到值：

```
Map<String, MyClass> map = new HashMap<String, MyClass>();
map.put(myString, new MyClass()); 
```

这并不完全是您正在寻找的东西，但在 Java 中，这与您将获得的一样接近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:52:47.057

使用地图存储您`Object`的 s 索引`String`

```
public static void main(String[] args) {
    final String myString = "something";
    final Map<String, Object> map = new HashMap<String, Object>();
    map.put(myString, new Object());
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:00:28.323

如何使用泛型并创建带有类型参数的基类

```
public MyGenClass<K,V>{
 private Map<K,V> map = new HashMap<K,v>();

 public Map<K,V> getMap(){
  return map;
 }

 public void setMap(Map<K,V> iMap){
   map=iMap;
 }

} 
```

使用这个类，你可以很容易地获得不同类型的地图，同时拥有相似的方法。

请享用 ：）

# php - 如何确定通过 PHP 按下的提交按钮

> ID：15671045
> 
> 赞同：1
> 
> 时间：2013-03-27T22:49:33.610
> 
> 标签：php, html, forms

我的表单中有两个提交按钮。一键立即发布文章，一键将文章保存为草稿。如何通过 PHP 而不是 JavaScript 进行管理，以检测用户在提交表单时按下了哪一个？欣赏任何想法。

```
<button type='submit' name='publish' class='btn btn-success'>Publiser</button>
<button type='submit' name='draft' class='btn btn-success'>Lage som kladd</button> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-27T22:51:09.540

检查两个名称中的哪一个是里面的现有键`$_POST`：

```
if(isset($_POST['publish'])) { ... }
else if(isset($_POST['draft'])) { ... } 
```

# ios - Xcode App 无法在 iPhone 5 上运行

> ID：15671047
> 
> 赞同：0
> 
> 时间：2013-03-27T22:49:39.310
> 
> 标签：ios, xcode

我去运行我的应用程序并收到此错误
![在此处输入图像描述](../Images/3a6c43a583a4152858be5c9824385d87.png)

但它在模拟器中运行良好我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:52:08.577

重新启动 iPhone 5，从已安装的 iPhone 5 中删除相同的应用程序。

退出 Xcode，打开 Xcode，构建 -> 清理目标，在 iPhone 5 上运行。

# objective-c - 在 Objective-C 中查找 NxN 网格中所有路径的算法

> ID：15671048
> 
> 赞同：1
> 
> 时间：2013-03-27T22:49:50.657
> 
> 标签：objective-c, algorithm

我有一个网格 NxN ：

```
2  1  
4  8 
```

我想在这个网格中找到所有路径：

```
{2,1}  
{2,1,8}  
{2,1,8,4}  
{1,8,4}
{1,8}
{8,4}
... 
```

我的网格是这样定义的：

```
gridArray = [NSArray arrayWithObjects:
[NSArray arrayWithObjects:@"2", @"1", nil],  
[NSArray arrayWithObjects:@"4", @"8", nil],nil]; 
```

我有一个对象块（一个数字）：

```
@interface Piece : NSObject {
int numCol;
int numRow;
NSNumber * value;

int nbNeighborsPieces;      

NSMutableArray *neighborsArray; 
} 
```

我能够计算出所有邻居的一块。

但是现在，我想计算给定一块的所有路径。然后每件。使用对象路径：

```
@interface Path : NSObject {

NSMutableArray * arrayOfPiece;
int sum;
} 
```

有点儿 ：

```
for(Piece * pieces in pieceArray) {
[self path:piece];
} 
```

我想我必须使用递归方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:27:23.257

解决这个问题的算法会很慢；我会认为一些在 O(n^n) 的范围内。

您可以使用类似于[Depth First Search](http://en.wikipedia.org/wiki/Depth-first_search "深度优先搜索")的方法找到所有路径。

首先，我认为你应该改变你的存储方式。不是将项目存储在数组的数组中，而是基于[Vertex](http://en.wikipedia.org/wiki/Node_%28graph_theory%29 "顶点")的概念创建一个节点类。该节点类将代表最深数组中的元素之一。每个节点都应该有一个数组，该数组将包含其他节点，这些节点是该节点的邻居。它还应该具有`id`您要存储的对象的类型。这将允许您创建有向[图](http://en.wikipedia.org/wiki/Directed_graph "有向图")。它还将允许您更轻松地实现递归。

```
@interface Node : NSObject
{
    id object;
    NSMutableArray * neighbours;
} 
```

就算法而言，这是我要开始的，我相信有一些修改可以使它更快。

首先创建一个数组来保存路径和一个数组来表示路径。

```
NSMutableArray *paths;
NSMutableArray *currentPath; 
```

在 Node 类中添加将执行递归的方法

```
- (void)findAllPathsExtending:(NSMutableArray *)path filling:(NSMutableArray *)paths 
{
    if ( [path containsObject:self] )
    {
        return;
    }

    [path addObject:self];
    [paths addObject:[path copy]];

    for (Node *aNode in neighbours)
    {
        [aNode findAllPathsExtending:path filling:paths];
    }

    [path removeObject:self];

    return; 
} 
```

但仅此一项并不能为您提供所有路径。您仍然需要为图中的每个节点执行此算法。正如我之前提到的，当你增加数组的大小时，这个任务会很快变得非常昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:27:42.900

我在考虑 Dijkstra 算法[http://en.wikipedia.org/wiki/Dijkstra](http://en.wikipedia.org/wiki/Dijkstra)的 s_algorithm，或[A* 搜索算法 http://en.wikipedia.org/wiki/A*_search_algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm)。他们都是探路者。Generaly Dijkstra 稍微慢一些（计算量更大）但更容易实现。Dijkstra 是递归的，不确定 A* 搜索，因为我从未实现过。如果您有小网格，Dijkstra 将真正满足您的需求。并且不仅会计算您的路径，还会计算所有其他路径。我很喜欢。

# excel - 单元格引用在 Excel VBA 2010 函数中不起作用

> ID：15671053
> 
> 赞同：1
> 
> 时间：2013-03-27T22:50:26.817
> 
> 标签：excel, excel-2010, vba

我正在尝试编写一个函数，该函数采用一系列数据并从用户提供的列中计算两个数字的比率。我想在行尾打印这个比率，但由于某种原因，我无法使用单元格函数引用行中的最后一个单元格。相反，Cells 函数只是不断地向我提供该单元格的值，而不是单元格地址。我认为细胞功能也提供了地址。有人可以告诉我这是错误的还是我的代码错误？

这是代码

```
Function calculateRatio(table As Range, numerator As Integer, denominator As Integer,       Optional nameOfRatio As String)
On Error GoTo ExpectedError
    Dim num As Double
    Dim denom As Double
    Dim ratio As Double

    If table.Columns.Count < 2 Then
        MsgBox ("Not enough data. Requires at least two or more rows.")
        Exit Function
    End If
    If numerator < 1 Or numerator > table.Columns.Count Then
        MsgBox ("Not an acceptable Numerator. Must be greater than zero and less than " & table.Columns.Count)
        Exit Function
    End If
    If denominator < 1 Or denominator > table.Columns.Count Then
        MsgBox ("Not an acceptable Denominator. Must be greater than zero and less than " & table.Columns.Count)
     Exit Function
     End If
    For Counter = 1 To table.Rows.Count
        num = table.cells(Counter, numerator)
        denom = table.cells(Counter, denominator)
        ratio = num / denom
        temp = table.cells(counter, table.columns.count)
        temp.Offset(0, 1).Value = ratio
     Next Counter

 Exit Function
ExpectedError:
    Call MsgBox("Something went wrong. Make sure you are referencing columns with numbers and not text." & Err.Number & " : " & Err.Description)
End
End Function 
```

**更新**

这是更新的代码：

```
Function calculateRatio(table As Range, numerator As Integer, denominator As Integer, Optional nameOfRatio As String)
    Dim num As Double
   Dim denom As Double
   Dim ratio As Double
   Dim temp As Range
   Dim counter As Integer

    If table.Columns.Count < 2 Then
        MsgBox ("Not enough data. Requires at least two or more rows.")
        Exit Function
    End If
    If numerator < 1 Or numerator > table.Columns.Count Then
        MsgBox ("Not an acceptable Numerator. Must be greater than zero and less than " & table.Columns.Count)
        Exit Function
    End If
    If denominator < 1 Or denominator > table.Columns.Count Then
         MsgBox ("Not an acceptable Denominator. Must be greater than zero and less than " & table.Columns.Count)
        Exit Function
    End If
    For counter = 1 To table.Rows.Count
        num = table.cells(counter, numerator)
        denom = table.cells(counter, denominator)
        ratio = num / denom
        Set temp = table.cells(counter, table.Columns.Count)
        temp.Offset(0, 1).Value = ratio
    Next counter
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T22:54:47.067

尝试添加`Dim temp as Range`并更改`temp = table.cells(counter, table.columns.count)`为`set temp = table.cells(counter, table.columns.count)`

实际上，您需要做的就是添加`set`，没有它`Variant`temp 将成为 a `long`，有了它 the`Variant`将成为一个`Range`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:47:28.547

无法从从工作表调用的 UDF 中操作工作表单元格。

更多信息在这里：

[https://stackoverflow.com/a/15647054/1467082](https://stackoverflow.com/a/15647054/1467082)

和这里：

[http://www.excel-it.com/UDF.htm](http://www.excel-it.com/UDF.htm)

通常，子程序可以操作工作表，而函数不能。

例外是从子例程中调用的函数可以，但是将函数用于除向子例程返回值之外的任何事情可能是一个坏习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T22:55:26.540

我假设您没有`Option Explicit`在代码中使用。

您需要将“temp”声明为一个范围。

```
Dim temp As Range ' somewhere at the top of your function

For Counter = 1 To table.Rows.Count
......
Set temp = table.cells(Counter, table.columns.count)
...
Next 
```

如果你有单元坐标，为什么不手动偏移它呢？

 ~~~~```
table.cells(counter, table.Columns.Count+1).Value = ratio 
```~~  ~~试试这个：

```
Function calculateRatio(table As Range, numerator As Integer, denominator As Integer, Optional nameOfRatio As String)
    Dim num As Double
   Dim denom As Double
   Dim ratio As Double
   Dim temp As Range
   Dim counter As Integer

    If table.Columns.Count < 2 Then
        MsgBox ("Not enough data. Requires at least two or more rows.")
        Exit Function
    End If
    If numerator < 1 Or numerator > table.Columns.Count Then
        MsgBox ("Not an acceptable Numerator. Must be greater than zero and less than " & table.Columns.Count)
        Exit Function
    End If
    If denominator < 1 Or denominator > table.Columns.Count Then
         MsgBox ("Not an acceptable Denominator. Must be greater than zero and less than " & table.Columns.Count)
        Exit Function
    End If
    For counter = 1 To table.Rows.Count
        num = table.cells(counter, numerator)
        denom = table.cells(counter, denominator)
        ratio = num / denom
        table.cells(counter, table.Columns(table.Columns.Count).Column + 1).Value = ratio
        'Set temp = table.cells(counter, table.Columns.Count)
        'temp.Offset(0, 1).Value = ratio
    Next counter
End Function 
```

使用 `table.columns(table.columns.count).column 将确保您引用正确的列，暂时想不出一个会导致问题但最好是安全的示例。~~~~

# python - 如何更改 doxygen 中的命名空间分隔符？

> ID：15671054
> 
> 赞同：2
> 
> 时间：2013-03-27T22:50:37.537
> 
> 标签：python, doxygen

我正在使用 doxygen 来解析 python 代码并生成文档。`::`但是，命名空间在 C++ 约定中是用 分隔的。

如何将其更改`.`为 python 约定中的内容？

# search - 如何搜索核心数据子对象

> ID：15671055
> 
> 赞同：1
> 
> 时间：2013-03-27T22:50:38.587
> 
> 标签：search, core-data, hierarchy, predicate

我很难弄清楚是否以及如何使用 NSPredicate（或其他方法）搜索子对象及其父对象。例如，我有一个 Wine 对象，它具有名称、葡萄园、地区和年份等属性。然后我有一个像“Event”这样的子对象，它具有 WhoSharedWith、FoodAteWith、EventDate 等属性。我可以找出 Wine 对象的谓词，但是如果这个人输入“Steak”怎么办？我想在葡萄酒对象下搜索“事件”对象，看看哪些葡萄酒适合牛排。有人可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T19:55:49.663

在核心数据术语中，您有多个通过关系连接的实体（事件、葡萄酒）。没有父实体和子实体的概念（除非您正在创建子实体，类似于子类化，但您似乎没有这样做）。

所有实体都是对等的。您可以从对象图中的任何位置开始，并遵循关系以获取任何相关对象。您可以在谓词中使用关系的键路径。请参阅[谓词编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html)。

# asp.net - 如何在 asp.net webforms 捆绑中将 CDN 添加到 bundle.config

> ID：15671060
> 
> 赞同：5
> 
> 时间：2013-03-27T22:50:56.757
> 
> 标签：asp.net, bundling-and-minification, asp.net-optimization

我正在使用 asp.net 捆绑/缩小并将所有内容放在 bundle.config 中，如下所示：

```
<styleBundle path="~/css/css">
  <include path="~/css/bootstrap.css" />
  <include path="~/css/flexslider.css" />
  <include path="~/css/font-awesome.css" />
  <include path="~/css/Site.css" />
  <include path="~/css/orange.css" />
</styleBundle> 
```

但我想使用 CDN 中的 bootstrap.css：

```
//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css 
```

那么我们如何在 bundle.config 中做到这一点呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:42:07.393

目前，您无法混合和匹配以及从外部源（如 cdn）中提取捆绑包中的某些文件。您可以将整个包上传到 CDN 并配置帮助程序以在 CDN 中呈现对包的引用，但您不能包含来自外部源的文件，这些文件必须位于您的应用程序可以找到的位置。

您可以通过实现一个能够在运行时从您的 CDN 获取文件的 VirtualPathProvider 来解决此问题，但您必须自己构建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:07:20.750

ASP.NET 文档可能会帮助您 - [http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)，有一个部分称为**使用 CDN**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T14:54:37.440

您不能混合捆绑包，但可以在 boundle 配置中包含外部源。

[这是从这里](http://www.asp.net/mvc/overview/performance/bundling-and-minification)挑选的一个例子，正如randomidea指出的那样。

```
public static void RegisterBundles(BundleCollection bundles)
{
    //bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
    //            "~/Scripts/jquery-{version}.js"));

    bundles.UseCdn = true;   //enable CDN support

    //add link to jquery on the CDN
    var jqueryCdnPath = "http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js";

    bundles.Add(new ScriptBundle("~/bundles/jquery",
            jqueryCdnPath).Include(
            "~/Scripts/jquery-{version}.js"));

// Code removed for clarity.
} 
```

我们需要启用 CDN，为此我们将 UseCdn 设置为 true，并在 ScriptBundle 构造函数中添加 url。包含文件将在调试模式下使用。

正如文章所建议的，我们需要有一个回退机制以防我们的 CDN 失败：

```
 @Scripts.Render("~/bundles/jquery")

    <script type="text/javascript">
        if (typeof jQuery == 'undefined') {
            var e = document.createElement('script');
            e.src = '@Url.Content("~/Scripts/jquery-1.7.1.js")';
            e.type = 'text/javascript';
            document.getElementsByTagName("head")[0].appendChild(e);

        }
    </script> 
```

希望这可以帮助。

# c# - 这是防止数据库提交失败的最佳方法吗？

> ID：15671061
> 
> 赞同：1
> 
> 时间：2013-03-27T22:50:57.553
> 
> 标签：c#, transactions, compact-framework, sql-server-ce, windows-ce

我有一个遗留方法不断抛出异常。它有一个嵌套的 try|catch。这是编写此类代码的最佳方法吗：

```
public void DBCommand(string dynSQL, bool Silent)
{
    checkConnection(); //Despite the name, this "returns" void, not bool
    SqlCeCommand cmd = objCon.CreateCommand();
    SqlCeTransaction trans = GetConnection().BeginTransaction();
    cmd.Transaction = trans;

    try
    {
        cmd.CommandText = dynSQL;
        cmd.ExecuteNonQuery();
        trans.Commit();
    }
    catch (Exception ex)
    {
        try 
        {
            trans.Rollback();
        }
        catch (SqlCeException sqlceex) 
        {
            MessageBox.Show(string.Format("SqlCeException ({0})", sqlceex.Message));
            CCR.LogMsgs.Append(string.Format("SqlCeException exception: {0}\r\n", sqlceex.Message));
            // Handle possible Rollback exception here
        }
        MessageBox.Show(string.Format("DBCommand Except ({0})", ex.Message));
        CCR.LogMsgs.Append(string.Format("DBCommand exception: {0}\r\n", ex.Message));
    }
} 
```

?

我想重构它以至少对 SqlCeCommand 使用 using 语句，但现在上面是“原样”代码。我看到的是一般异常消息（“DBCommand 除外”），而不是“SqlCeException”

## 更新

通过添加一些 MessageBox.Show() 回调（由于某种原因不再编写调试日志文件），我发现这是引发异常的 DDL：

```
ALTER TABLE CCR032713190114 ADD salvationId nvarchar(19), salvation float 
```

注意：“CCR032713190114”在代码中已被证明是一个有效的表名（它存在）。

这个 DDL 有什么问题会导致问题吗？

## 更新 2

我从这里更改了代码：

```
ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) ", tablename);
dbconn.DBCommand(ddl,false);
ddl = string.Format("UPDATE {0} SET salvationID = {1}", tablename, string.Empty); 
```

...对此：

```
ddl = string.Format("ALTER TABLE {0} ADD salvationID nvarchar(19) NOT NULL WITH DEFAULT", tablename);
dbconn.DBCommand(ddl,false); 
```

...但是现在，就在“ *ALTER TABLE BLA ADD save float NOT NULL WITH DEFAULT* ”之后，我看到了这个错误消息，“ *DBCommand 除外（解析查询时出错。[令牌行号，令牌行偏移量，，令牌错误,,])* "

Azure braziers 里发生了什么？

我是否需要在“WITH DEFAULT”之后指定默认值（'' 或 string.empty 不会自动成为 nvarchar 列的默认值，浮点数为 0.0 等）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T09:04:46.153

您不能在同一个 ALTER TABLE 语句中添加两列，必须一次添加一列，指定 NULL 或 NOT NULL 也是一个好主意（如果 NOT NULL，可能需要 DEFAULT）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:00:36.470

如果您从未见过，`SqlCeException`那将是真正的例外。为了让它“不碍事”，我会做以下事情：

```
public void DBCommand(string dynSQL, bool Silent) {
    checkConnection(); //Despite the name, this "returns" void, not bool
    SqlCeCommand cmd = objCon.CreateCommand();
    SqlCeTransaction trans = GetConnection().BeginTransaction();
    cmd.Transaction = trans;

    var doRollback = false;
    try {
        cmd.CommandText = dynSQL;
        cmd.ExecuteNonQuery();
        trans.Commit();
    }
    catch (Exception ex) {
        doRollback = true
        MessageBox.Show(string.Format("DBCommand Except ({0})", ex.Message));
        CCR.LogMsgs.Append(string.Format("DBCommand exception: {0}\r\n", ex.Message));
    }
    finally {
        if(doRollback) }
            DoRollback();
        }
    }
}

void DoRollback(){
    try {
        trans.Rollback();
    }
    catch (SqlCeException sqlceex)  {
        MessageBox.Show(string.Format("SqlCeException ({0})", sqlceex.Message));
        CCR.LogMsgs.Append(string.Format("SqlCeException exception: {0}\r\n", sqlceex.Message));
        // Handle possible Rollback exception here
    }
} 
```

}

# python - MS SQL通过windows命令从python恢复数据库

> ID：15671066
> 
> 赞同：2
> 
> 时间：2013-03-27T22:51:14.147
> 
> 标签：python, sql-server, database

我想使用 python3.2/tkinter 在 MS SQL Server 2008 上恢复数据库。我是否有任何命令可以重命名（如果它已经存在）数据库然后恢复它。我怎样才能只从python做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:28:26.337

您可以简单地使用`_mssql`from `pymssql`。

```
import _mssql

conn = _mssql.connect(server='', user='', password='', database='')
conn.execute_non_query("IF EXISTS (SELECT 0 FROM sys.databases WHERE name = 'mydb') BEGIN ALTER DATABASE mydb MODIFY NAME = mydb_old END")
conn.execute_non_query("RESTORE DATABASE mydb FROM DISK='C:\mydb.bak'") 
```

快速、MSSQL-y 和简单。

# jquery - 将选择器连接到变量

> ID：15671071
> 
> 赞同：0
> 
> 时间：2013-03-27T22:52:02.970
> 
> 标签：jquery, variables, selector

尝试将变量连接到选择器：

```
<a href="#" class="hover" data-name="dressitup">

     var changer =  $(this).attr("data-name");

         $('a.'+changer).addClass("active"); 
```

这不起作用。我显然希望结果是

```
$(a.dressitup).addClass("active"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T23:03:41.720

假设`$(this)`是你的`a`元素：这是你需要的吗？

**jQuery** :

```
var changer =  $(".hover").data("name");
$('a.' + changer).addClass("active"); 
```

**标记：**

```
<a href="#" class="hover" data-name="dressitup">Hello World</a>
<br/>
<a href="#" class="dressitup">Hello World 2!</a> 
```

**JSFiddle**：http: [//jsfiddle.net/sWZzD/](http://jsfiddle.net/sWZzD/)

# android - 文档中根元素之后的标记必须格式正确

> ID：15671080
> 
> 赞同：-1
> 
> 时间：2013-03-27T22:52:15.793
> 
> 标签：android

我是 android 开发的新手，我正在尝试按照本书中的说明进行操作。[http://amzn.to/4nck80](http://amzn.to/4nck80)我就是无法让它工作！

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="fill_parent"

    android:layout_height="fill_parent"

    android:orientation="vertical" ></LinearLayout>

    <TextView

        android:layout_width="fill_parent"

        android:layout_height="wrap_content"

        android:text="@string/hello" />

    <TextView

         android:layout_width="fill_parent"

         android:layout_height="wrap_content"

         android:text="This is my first android application!" />

    <Button

         android:layout_width="fill_parent"

         android:layout_height="wrap_content"

         android:text="And this is a clickable button!" />

</Button>LinearLayout> 
```

我收到错误

> 文档中根元素之后的标记必须格式正确。

通过第一个 Textview 和警告

> 在布局文件中发现意外的文本：“LinearLayout>”

经过`</Button>LinearLayout>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:54:06.177

此 XML 文件有几个错误。

首先，您有一个无效的 XML 标记。

改变：

```
</Button>LinearLayout> 
```

至：

```
</Button></LinearLayout> 
```

您还需要`</LinearLayout>`从上面删除关闭，因为您可能并不是要在此处结束根元素。

最后，删除：

```
</Button> 
```

由于按钮元素以结束`/>`并因此已经关闭。

**最终工作版本**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <TextView
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="This is my first android application!" />

    <Button
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:text="And this is a clickable button!" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:37:14.360

中间的linearlayout标签是不必要的。您应该为您创建的每个视图元素创建一个 id。id 允许您调用 mainactivity java 类中的元素。下面是如何制作ID：

```
<Button
android:id = "@+id/button1"
android:layout_width="wrap_content"
Etc.........
/>

<TextView
android:id = "@+id/mytextview"
Etc......
/> 
```

按照上面的建议修复最后一行的 LinearLayout 标签。

周一Yolo现金赃物

# templates - Joomla 模板，针对网站的不同部分具有不同的布局

> ID：15671084
> 
> 赞同：0
> 
> 时间：2013-03-27T22:52:41.563
> 
> 标签：templates, joomla

我对 Joomla 很陌生，我必须根据给定的设计为 joomla 3.0 创建一个模板。

我已经阅读了很多关于“简单 joomla”模板的手册和教程，这些模板解释了如何组织目录结构、xml 文件、index.php 等。

但我看不出我们可以在哪里为网站的不同部分定义不同的布局，例如：

1.  主页的布局
2.  文章列表的布局（例如搜索）
3.  文章本身的布局。

我确信关于这一点必须有成千上万的教程，但我根本找不到它。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:24:35.770

如果您查看 Isis，您会看到一个使用条件更改布局的示例，这就是控制面板与其他管理员的不同之处。您可以在一个文件中完成所有操作，也可以拥有单独的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:32:54.007

我认为您可能缺少的概念之一是“模板和布局覆盖”。

组件（创建任何给定页面的主要部分的 Joomla! 元素）控制其任何视图的布局。要更改这些，模板需要为特定视图创建匹配的覆盖。

类似的过程用于“模块”网页的较小元素（例如侧边栏广告或小部件）。

阅读这些文章：

*   [如何覆盖 Joomla 的输出！核](http://docs.joomla.org/How_to_override_the_output_from_the_Joomla!_core)
*   [了解输出覆盖](http://docs.joomla.org/Understanding_Output_Overrides)
*   [为 Joomla! 转换模板！3](http://docs.joomla.org/Converting_a_template_for_Joomla_3)

您可能还想查看You!Joomla 不久前创建的“ [Joomla 3.x 模板覆盖示例”。](http://www.youjoomla.com/joomla-tutorials/joomla-3-template-overrides-example.html)

最后给了Joomla！3.0 是一个短期支持版本（3.1 将在任何一天到期，等等）您可能会被建议使用“ [Joomla! 3.0 中的模板覆盖](http://forum.joomla.org/viewforum.php?f=718)”论坛了解详情。

# java - 为 Hadoop 设置我的 JAVA_HOME 变量

> ID：15671085
> 
> 赞同：0
> 
> 时间：2013-03-27T22:52:44.930
> 
> 标签：java, hadoop

我尝试`JAVA_HOME`为 Hadoop 设置我的变量无济于事。

我的 Java 运行时在 中`/usr/bin/java`，但 Hadoop 一直在尝试访问它`/usr/bin/java/bin/java`。

我已经`JAVA_HOME`在 my`.bash_profile`和 in 中设置了`bin/hadoop`，但都不起作用。我猜想其他一些路径设置器正在覆盖它。这是一个已知问题吗？可以采取什么措施？

我尝试过的其他几件事：

```
echo $JAVA_HOME from the hadoop script
add $JAVA_HOME to the conf/hadoop-env.sh 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:57:40.047

在您的情况下： JAVA_HOME = /usr

该代码假定可执行文件位于：$JAVA_HOME/bin/java

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:20:35.763

您的 Java*安装*不太可能在`/usr/bin/java`.

*可执行文件*可能在那里，或者可能只是指向您安装中的可执行文件的链接。

IMO 使用您的实际 Java JDK/JRE 目录并使用它会更干净：这`JAVA_HOME`就是应该的。

* * *

*使用*Hadoop比正确设置环境变量要复杂得多*；*你可能会走上一条崎岖的道路。考虑[使用 Kiji 的便当盒之](http://www.kiji.org/getstarted/)类的东西来简化初始设置。

# cocos2d-x - 许多分辨率的 CCLabelBMFont 资源在哪里保存

> ID：15671088
> 
> 赞同：1
> 
> 时间：2013-03-27T22:52:49.257
> 
> 标签：cocos2d-x, cocosbuilder

我正在使用 cocos2d-x 和 cocosbuilder 3.0 alpha2。在 cocosbuilder 中使用自动缩放精灵非常方便。您可以在 resources-auto 目录下添加 png 文件，发布时会自动调用内容。您不必以编程方式缩放图像。

我想为新旧 iPhone 使用 CCLabelBMFont。我试图对 fnt 文件使用相同的方法。我将 fnt 文件保存在 resources-auto 目录下。然后我用 cocosbuilder 打开了这些资源，结果崩溃了；/

我应该在哪里保存这些 fnt 文件？我应该创建两个版本的 fnt 文件（常规和视网膜）吗？如何将 CCLabelBMFonts 用于多种显示分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:29:02.083

首先，我强烈建议更新到最新版本的 CocosBuilder，因为它修复了资产自动调整大小的一些问题。

CocosBuilder 只能自动调整图片资源的大小。要添加对不同大小字体的支持，您需要将它们（从您的字体创建工具保存不同的大小）放在名为 resources-iphone、resources-iphonehd、resources-ipad 或 resources-ipadhd 的文件夹中。

# html - 怪癖模式和 DOCTYPE 兼容性

> ID：15671089
> 
> 赞同：0
> 
> 时间：2013-03-27T22:52:50.030
> 
> 标签：html, css, doctype

我编写了一个小工具，它可以生成 HTML/CSS 代码以放置在文档中。

我的问题是，将放置代码片段的一些网站使用 DOCTYPE，其他网站以 quirks 模式编写（没错，整个网站都处于 quirks 模式），其他网站使用不同的 DOCTYPE...

是否有可能以某种方式强制代码片段——并且只有代码片段——使用它自己的标准？我希望它看起来总是一样的，例如在以怪癖模式编写的整个网站上，我不能只将 DOCTYPE 添加到顶部，因为它会“破坏”页面。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:54:26.043

不，因为浏览器模式是根据每个文档决定的。

您应该设计代码片段，使其在两种模式下都能工作。要获得这方面的帮助，您需要指定要生成的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T23:39:17.100

一种解决方案是使用javascript检查document.doctype，然后根据它加载不同的样式。

# html - 剔除中的复选框和输入字段相关性

> ID：15671092
> 
> 赞同：0
> 
> 时间：2013-03-27T22:53:18.257
> 
> 标签：html, knockout.js

**描述：**

我有两件事，一个复选框和输入字段。这就是我想要的。在我的视图模型中，我有两个可观察对象，一个保存复选框选中/取消选中（真或假），另一个保存输入字段值。这两个值都来自数据库，但我在这里将它们设为静态以简化操作。因此，当页面加载时，如果复选框值为 true，则应启用输入字段并显示该值。复选框也应显示为选中状态。如果复选框未选中，则输入字段值应为零，并且应禁用输入字段。如果取消选中后选中复选框，则输入字段值仍应为零。

**小提琴：**

```
 data-bind="checked: boxChecked" type="checkbox" ></input>
     <br/>
  Result:
  <input data-bind="enable: boxChecked() == true,
                         value: boxCheked() = true ? result : result = 0" type="text"></input> 
```

[http://jsfiddle.net/KGSUD/1/](http://jsfiddle.net/KGSUD/1/)

我一直在玩小提琴很长一段时间，但无法弄清楚。

我会感谢你们的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:00:08.197

我会从视图 (HTML) 中取出逻辑并将其放入 ViewModel。

html:

```
<input data-bind="checked: boxChecked" type="checkbox" ></input>
<br/>
Result:
<input data-bind="enable: boxChecked, value: result" type="text"></input> 
```

JS：

```
var ViewModel = function() {
    var self = this;
    self.boxChecked = ko.observable(true);
    self.result = ko.observable('10');

    self.boxChecked.subscribe(function(newValue) {
        if (!newValue)
            self.result("0");
    });
}; 
```

订阅将采取设置`result`，html绑定变得更简单。这是[小提琴](http://jsfiddle.net/tyrsius/yyhGa/)

# c# - 使用 DownloadStringAsync 下载 HTML 源代码不会在 WP8 上下载整个源代码

> ID：15671093
> 
> 赞同：2
> 
> 时间：2013-03-27T22:53:20.610
> 
> 标签：c#, .net, windows, windows-phone-8

我正在尝试使用 DownloadStringAsync 下载一些 HTML 源代码。我的代码如下所示：

```
 WebClient client = new WebClient();

    client.DownloadStringCompleted += 
    new DownloadStringCompletedEventHandler(DownloadStringCallback2);
    client.DownloadStringAsync(new Uri(url));

private void DownloadStringCallback2(Object sender, DownloadStringCompletedEventArgs e)
{
    source = (string)e.Result;
    if (!source.Contains("<!-- Inline markers start rendering here. -->"))
        MessageBox.Show("Nope");
    else
        MessageBox.Show("Worked");
} 
```

如果我查看变量“源”，我可以看到一些源是存在的，但不是全部。但是，如果我做这样的事情，它会起作用：

```
while (true)
        {
            source = wb.DownloadString(url);
            if (source.Contains("<!-- Inline markers start rendering here. -->"))
                break;
        } 
```

不幸的是，我不能使用这种方法，因为 WP8 没有 DownloadString。

有谁知道如何解决这个问题或者是否有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T02:52:07.580

这个功能应该可以帮助你

```
 public static Task<string> DownloadString(Uri url)
    {
        var tcs = new TaskCompletionSource<string>();
        var wc = new WebClient();
        wc.DownloadStringCompleted += (s, e) =>
        {
            if (e.Error != null) tcs.TrySetException(e.Error);
            else if (e.Cancelled) tcs.TrySetCanceled();
            else tcs.TrySetResult(e.Result);
        };
        wc.DownloadStringAsync(url);
        return tcs.Task;
    } 
```

# ruby-on-rails - 通过生成器将新的迁移从 Rails 引擎 gem 添加到应用程序

> ID：15671099
> 
> 赞同：14
> 
> 时间：2013-03-27T22:53:53.003
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, gem, rails-engines

我正在用 ruby​​ gem 构建 Rails 引擎。它现在包括一些在您运行时调用的迁移：

```
rails g myengine:install 
```

生成器中的代码如下：

```
module MyEngine
  module Generators
    class InstallGenerator < ::Rails::Generators::Base
      include Rails::Generators::Migration

      source_root File.expand_path('../templates', __FILE__)

      # ...

      def copy_migrations
        migration_template "migrations/migration1.rb", "db/migrate/migration1.rb"
        migration_template "migrations/migration2.rb", "db/migrate/migration2.rb"
      end

      # ...
    end
  end
end 
```

但是，如果我`rails g myengine:install`再次运行，它会失败并出现以下错误：

```
Another migration is already named migration1: /Users/jh/Code/Web/demoapp/db/migrate/20130327222221_migration1.rb 
```

我希望它只是默默地忽略已经存在迁移并继续进行下一次迁移的事实。**最好的方法是什么？**

**编辑：**

根据 Dmitry 的回答，这是我的解决方案：

```
 def copy_migrations
    copy_migration "migration1"
    copy_migration "migration2"
  end

protected

  def copy_migration(filename)
    if self.class.migration_exists?("db/migrate", "#{filename}")
      say_status("skipped", "Migration #{filename}.rb already exists")
    else
      migration_template "migrations/#{filename}.rb", "db/migrate/#{filename}.rb"
    end
  end 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-31T08:12:13.977

以Rails 中的[migration_template](https://github.com/rails/rails/blob/master/railties/lib/rails/generators/migration.rb)为例，您也许可以检查`destination = self.class.migration_exists?(migration_dir, @migration_file_name)`是否存在迁移，如果迁移已经存在，则跳过`migration_template`调用。

# google-analytics - Google Analytics：无 URL 参数的跨域跟踪

> ID：15671100
> 
> 赞同：3
> 
> 时间：2013-03-27T22:54:00.420
> 
> 标签：google-analytics

刚问了一个简单的问题：现在，当您使用 Analytics 进行跨域跟踪时，URL 中添加了参数来跟踪它。我只是想知道，有没有一种方法可以使用 POST 之类的方法或任何其他方法将 cookie 信息从一个域传递到下一个域，这样在添加所有 URL 参数时 URL 似乎不会那么混乱。

例如，从 google.com 转到 yahoo.com/lots_of_paramters，我们可以只转到 yahoo.com/gclid=123

干杯，尤里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:09:38.047

在另一个域上读取参数以重新创建相同的 Google Analytics cookie。

在 POST 上发送的数据仅在后端通过 Javascript 无法在发布的页面上使用。因此，您需要后端实际存储这些数据并将其发送回接口，可能通过 AJAX 在那里重新创建 cookie。

另一个想法可能是尝试解析 cookie 服务器端并将它们作为新的 cookie 发送，因此目标域上的 Javascript 代码不需要重新创建 cookie，它们将是普通的 HTTP Header 设置的 cookie。

只是传递cookies仍然需要大量的工作和模糊。网址很丑陋，但仍然是处理问题的最简单和便携的方法。

# asp.net-mvc-3 - 控制器动作被重复调用

> ID：15671102
> 
> 赞同：1
> 
> 时间：2013-03-27T22:54:06.420
> 
> 标签：asp.net-mvc-3, jquery-ui

我正在使用 Razor WebGrid，当单击按标题排序或单击页面链接时，我的控制器操作被重复调用。第一次它只被调用一次，但下一次它被重复调用。请任何人都可以帮忙。

```
 [HttpGet]
        public ActionResult Index(int page = 1, string sort = "GridName", string sortDir = "ASC")
        {

            const int pageSize    = 5;
            string successMessage = string.Empty;
            var message           = string.Empty;
            int pageIndex1        = page - 1;

            if (RenderFirstTime == 1) 
            {
                GridCRUDCollection.UpdateGridModelCollection(null, pageSize, pageIndex1, sort, sortDir);
                RenderFirstTime = 0;
                return View(GridCRUDCollection);
            }
            else
            {
                GridCRUDCollection.UpdateGridModelCollection(null, pageSize, pageIndex1, sort, sortDir);
                return PartialView("GridDetailsView", GridCRUDCollection);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T20:55:41.410

带有 an 的代码`<img src="#" ... >`对我来说是什么。一旦我删除了#，控制器就被调用了一次。网格可能会生成这些并稍后通过 Javascript 填充它们。诊断它的一种方法是使用 LabJS 来防止立即执行。

# windows-services - Facebook C# sdk 发布照片时出现随机异常

> ID：15671105
> 
> 赞同：0
> 
> 时间：2013-03-27T22:54:11.593
> 
> 标签：windows-services, facebook-c#-sdk, unhandled-exception

我正在使用 Facebook C#sdk 将照片上传到使用 Windows 服务作为后台作业的用户配置文件。而且我几乎在我能想到的每个地方都记录了异常，并且在大多数情况下它工作正常。但偶尔，有时非常频繁，我得到以下异常，它没有被我的处理程序捕获，并被 Windows 事件记录器记录，并终止我的服务：

```
Application: PhotoService.exe    
Framework Version: v4.0.30319    
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Exception    
Stack:
at System.Net.Security._SslStream.WriteCallback(System.IAsyncResult)
at System.Net.LazyAsyncResult.Complete(IntPtr)
at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
at System.Net.ContextAwareResult.Complete(IntPtr)
at System.Net.Sockets.BaseOverlappedAsyncResult.CompletionPortCallback(UInt32, UInt32, System.Threading.NativeOverlapped*)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32, UInt32, System.Threading.NativeOverlapped*) 
```

从外观上看，这发生在 FacebookClient.PostTaskAsync() 方法调用中，但我不知道如何使用有限的堆栈跟踪信息进行故障排除。以下是我的照片发布方法块：

```
public void PostPhotoToTimeline(string filename, byte[] photo, EventHandler<FacebookApiEventArgs> callbackCompleted)
{
    var _filename = filename;
    var mediaObject = new FacebookMediaObject
    {
        ContentType = "image/jpeg",
        FileName = _filename
    }.SetValue(photo);

    _fb.PostCompleted += callbackCompleted;
    var parameters = new Dictionary<string, object>();
    parameters["file"] = mediaObject;

    _fb.PostTaskAsync("/me/photos", parameters);
} 
```

我目前最大的问题是，当这个异常发生时，它会终止服务，我还没有设置服务监控，所以我无法发现服务已经停止。如果我理解正确，这个异常发生在一个单独的线程中并且没有被处理，因此它会降低整个服务。它是否正确？知道为什么会发生这种情况，在哪里，或者之前有人遇到过这个异常吗？我已经阅读了有关 'legacyUnhandledExceptionPolicy' 来捕捉这些意外异常的信息。这会阻止我的服务终止吗？使用它是个好主意吗？抱歉，如果我一口气问了太多问题，但这些都是相关的，到目前为止，谷歌还不是我的朋友。感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T04:21:13.757

2 个月过去了，没有一个答案，所以我将发布我为防止这个问题所做的事情，这可能对其他人有用。仍然不知道崩溃的主要原因，但它是偶然的，所以使用标志“legacyUnhandledExceptionPolicy”到目前为止已经奏效，没有意外终止。需要在配置文件中启用该标志：

```
<runtime>
<legacyUnhandledExceptionPolicy enabled="1"/>
</runtime> 
```

这里有更好的解释：[MSDN 参考](http://msdn.microsoft.com/en-us/library/ms228965.aspx)

# durandal - 跟踪 durandal.js 中的优化器问题

> ID：15671109
> 
> 赞同：1
> 
> 时间：2013-03-27T22:54:52.460
> 
> 标签：durandal

我有一个包含数百个视图模型的大型应用程序，但是当我运行优化器时，它不会将它们组合到 main-built.js 中，它只是清除文件。

有什么方法可以让优化器为您提供更多关于哪里出错的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:38:45.560

这是所有可用的选项

1.  **--mode**指示优化器是否应该只“生成”r.js 配置或实际“构建”优化的 JS 应用程序。默认值构建
2.  **--source**包含应用程序源的文件夹的路径。
3.  **--config**自定义 r.js 配置文件的路径，用作生成配置的基础。
4.  **--verbose**表示应该使用详细的控制台日志记录。默认值假
5.  **--loader**指示为“almond”或“require”优化哪个脚本加载器。默认值杏仁
6.  **--plugin**用于将视图优化到最终构建文件中的视图插件。默认值文本
7.  **--pluginExtension**查看文件扩展名。默认值 .html

使用优化器是这样的：

```
optimizer.exe --source c:\project1\app\ --mode generate 
```

所以，也许你应该试试这个：

```
optimizer.exe --verbose true 
```

如果这不起作用..那么你总是可以拉下源代码并尝试在本地调试它。

# ruby-on-rails-3 - POST/PUT 不适用于 Rails 表单中的部分

> ID：15671111
> 
> 赞同：1
> 
> 时间：2013-03-27T22:55:01.427
> 
> 标签：ruby-on-rails-3, forms, partial-views

﻿我在控制器中使用单个表单来执行新操作和编辑操作。

* * *

编辑.html.erb

```
<%= form_for @user, :url => edit_users_path(@user) do |f| %>
   <%= render :partial => 'form', :object => f %>
   <%= f.submit "Update" %>
<% end %> 
```

* * *

新的.html.erb

```
<%= form_for @user, :url => users_path do |f| %>
   <%= render :partial => 'form', :object => f %>
   <%= f.submit "Submit" %>
<% end %> 
```

* * *

_form.html.erb

```
<%= form.text_field :firstname %>
<%= form.text_field :lastname %>
<%= form.email_field :email %> 
```

对于这两个动作，`submit`都不起作用。表格渲染得很好。我添加了数据`rails console`以检查编辑。它也不起作用。

如果我为每个`new`&创建 2 个单独的表单`edit`，它工作正常。所以我假设我的控制器代码很好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:16:20.430

渲染部分：

```
<%= render :partial => 'form', :form => f %> 
```

反而。如果它不起作用，请检查生成的 HTML 中的输入名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-09T15:39:49.203

我在您的编辑中看到，新文件正在使用 |f| 表单构建器的变量，但在表单部分中，您使用表单作为变量。尝试将部分中的字段更改为“f.text_field”

# c# - 在远程服务器上启动 GUI 应用程序

> ID：15671115
> 
> 赞同：3
> 
> 时间：2013-03-27T22:55:29.493
> 
> 标签：c#, powershell, client-server, psexec

我浏览了论坛并没有找到任何可以帮助我完成我想做的事情的东西。我正在寻找的是一种为远程服务器上的应用程序启动 GUI 的方法。我已经看到，只要我知道我的特定远程会话的会话 ID 是什么，我就可以使用 PsExec 执行此操作。但是，随着会话 ID 的变化，这不是我可以可靠使用的东西。有没有办法做到以下几点：

*   拥有特定用户的永久会话 ID
*   查找特定用户的会话 ID
*   在服务器上的会话中启动 GUI 的其他方法

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T14:45:57.927

当需要在远程机器上启动 gui 测试时，我曾经实现过类似的东西。

您可以使用 psexec 的 -i 参数，它会在指定的会话中“交互地”运行命令，对于特定用户，它看起来像这样：

```
psexec.exe \\<MachineName> -u <Username> -p <Password> -i <SessionNumber> 
```

要获取 sessionNumber，您还可以使用相同的 psexec 实用程序，您可以在远程计算机上为指定用户执行“查询会话”。

您可以创建 .bat 文件，该文件将使用以下代码返回会话编号：

```
@echo off
setlocal enabledelayedexpansion

set username=%2
set password=%3
set machine=%1

psexec.exe \\%machine% -u %username% -p %password% query session %username%>sessid.txt

set /a counter=0
for /F "tokens=* skip=1" %%a in (sessid.txt) do (
for %%b in (%%a) do (
set /a counter+=1
if !counter! == 3 (
    echo !counter!:%%b
    exit %%b
)
)
) 
```

这个批处理文件对我很有效，你可以像这样使用它

```
getSessionNumber.bat <ServerName> <User> <Password> 
```

# c++ - 类中的类 - 不允许不完整的类型

> ID：15671116
> 
> 赞同：0
> 
> 时间：2013-03-27T22:55:41.147
> 
> 标签：c++, oop

```
class Publicatie{
public:
    class Carte : public Publicatie{
    private:
        char* autor;
    };
    class Revista : public Publicatie{
    private:
        char* frecventa_aparitie;
        int numar;
    };
private:
    int cota;
    char* titlu;
    char* editura;
    int anul_aparitiei;
    int tiraj;
    Carte* c;
    Revista* r;
        public:
           //some methods...
} 
```

这是代码，我在 Publicatie 类中声明 Carte 和 Revista 类，我需要拥有私有成员 Carte 和 Publicatie。我真的不知道如何用这些类进行继承设计。我在继承的标题中收到错误：public Publicatie，我认为它会起作用，因为已经创建了类（即使它的私有成员尚未创建）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:08:56.900

你的设计是错误的。您正在尝试定义一个类，并且在它的定义中您试图从其自身使用；这是一个逻辑悖论。
根据我从您的代码中可以理解的内容，您正在尝试创建一个名为的类，该类`Publicatie`代表一个出版物（或一篇文章），并且它还有另外两个变体，分别命名为`Carte`和`Revista`. 如果是这种情况，为什么`Publicatie`需要有两个私有成员类型`Carte`和`Revista`？也许您可以从中删除这两个成员。
或者，也许您可​​以将它们的一些共享成员（例如`titlu`，`tiraj`和...）移动到另一个抽象类，然后定义`Publicatie`，`Carte`这样`Revista`它们都继承自同一个父类。
希望这些工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T22:58:40.973

您只能从完整类型的类继承。但是，您不需要在环境类定义中包含嵌套类定义。相反，您可以这样做：

```
struct Foo
{
    struct Bar;

    Bar * p;

    int get();
};

struct Foo::Bar : Foo
{
    int zip() { return 4; }
};

int Foo::get() { return p->zip(); } 
```

# php - 带有recaptcha的联系表格产生500错误

> ID：15671117
> 
> 赞同：1
> 
> 时间：2013-03-27T22:55:43.383
> 
> 标签：php, html, recaptcha, contact-form

我有一个带有 recaptcha 的联系表，我正在尝试设置它，但在输入信息并单击提交按钮时会产生 500 错误。我敢打赌我做了一些愚蠢的事情，因为我不是 PHP 方面的佼佼者，所以如果我在这里发布我的代码，任何人都能够发现任何错误吗？

这是联系表本身。

```
<form class="email" action="mailer.php" method="post">
    <p>Name:</p>
    <input type="text" name="name" />
    <p>E-mail:</p>
    <input type="text" name="email" />
    <p>Subject:</p>
    <input type="text" name="subject" />
    <p>Message:</p>
    <textarea name="message"></textarea></p>
    <script type="text/javascript" src="http://api.recaptcha.net/challenge?k=6Le8_t4SAAAAACIxacT6Xn8NVvDa93loylG-L6mk"></script>
    <noscript>
        <iframe src="http://api.recaptcha.net/noscript?k=PUBLICKEYGOESHERE" height="300" width="500" frameborder="0"></iframe>
        <textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
        <input type="hidden" name="recaptcha_response_field" value="manual_challenge">
    </noscript>
    <input class="send" type="submit" value="Send">
</form> 
```

这是mailer.php

```
<?php
require_once('recaptchalib.php');
if ($_POST['email'] != '')
{
    $privatekey = "6Le8_t4SAAAAAME8kuqO1bvzcSWmGytwISUYLo3w";
    $resp       = recaptcha_check_answer($privatekey, $_SERVER["REMOTE_ADDR"], $_POST["recaptcha_challenge_field"], $_POST["recaptcha_response_field"]);
    if (!$resp->is_valid)
    {
        die("The reCAPTCHA wasn't entered correctly.
Go back and try it again." . "(reCAPTCHA said: " . $resp->error . ")");
    }
    else
    {
        /* Set e-mail recipient */
        $myemail = "mandy@smarterbookkeeping.com.au";

        /* Check all form inputs using check_input function */
        $name    = check_input($_POST['name'], "Enter your name");
        $subject = check_input($_POST['subject'], "Enter a subject");
        $email   = check_input($_POST['email']);
        $message = check_input($_POST['message'], "Write your message");
        $captcha = check_input($_POST['captcha']);

        /* If e-mail is not valid show error message */
        if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
        {
            show_error("E-mail address not valid");
        }

        /* Let's prepare the message for the e-mail */
        $message = "

Name: $name
E-mail: $email
Subject: $subject

Message:
$message

";
        /* Send the message using mail() function */
        mail($myemail, $subject, $message);

        /* Redirect visitor to the thank you page */
        header('Location: thanks.php');
        exit();

        /* Functions we used */
        function check_input($data, $problem = '')
        {
            $data = trim($data);
            $data = stripslashes($data);
            $data = htmlspecialchars($data);
            if ($problem && strlen($data) == 0)
            {
                show_error($problem);
            }
            return $data;
        }
        function show_error($myError)
        {
?>
<html>
<body>

<p>Please correct the following error:</p>
<strong><?php
            echo $myError;
?></strong>
<p>Hit the back button and try again</p>

</body>
</html>
<?php
            exit();
        }
    }
}
?> 
```

我将recaptchalib 放在正确的位置，thanks.php 也是如此。我不是很擅长 PHP，但是这个让我很难过。

# facebook - 如何更新facebook打开图形图像

> ID：15671118
> 
> 赞同：35
> 
> 时间：2013-03-27T22:55:44.287
> 
> 标签：facebook, facebook-opengraph

假设您通过开放图形协议的元标记为您的网页设置了 Facebook 图像，如下所示： `<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>`

如果您想用另一个同名图像替换/更新图像，`rock.jpg`当您共享页面时，如何让 facebook 用新图像相应地更新您的图像？[强制 facebook 使用此链接http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)获取您的页面数据不会更新图像。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2014-02-25T02:04:39.537

这是我对这个问题找到的最一致的答案：[https ://stackoverflow.com/a/21468084/339698](https://stackoverflow.com/a/21468084/339698)

如果你懒得去那个链接，你可以`POST`用你想要清除的 url 发送一个 ajax 请求：

```
$.post(
    'https://graph.facebook.com',
    {
        id: 'http://www.site.com/my/share/url/',
        scrape: true
    },
    function(response){
        console.log(response);
    }
); 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-03-28T13:00:51.447

Facebook 将您的图像存储到他们自己的服务器上的图像中，然后将其缓存 24 小时。缓存延迟将来可能会发生变化，因此要检查它，只需打开 facebook 从您的图像创建的图像并检查它在 http 标头中的“max-age”值。因此，如果您更改图像，即使您使用此链接[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)强制获取数据，facebook 也不会在 24 小时之前更新其版本。

为了解决这个问题，如果您需要立即查看更改的效果，您应该重命名您的图像。因此，如果旧版本被`rock.jpg`命名，`rock2.jpg`则使用此链接[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)让 facebook 从您更新的图像创建新图像。这将立即更新您网页在 facebook 分享中的 facebook 图片。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-06T19:42:19.427

发表这篇文章多年后，这仍然是一个问题，但它不是 facebook 的缓存：这通常是人为错误（请允许我详细说明）

**OG:TYPE 影响您的图像抓取：**

1.  [https://ogp.me/#type_article 与 https://ogp.me/#type_website](https://ogp.me/#type_article) [不](https://ogp.me/#type_website)*一样*

请注意， og:type=website 将导致该网址的任何 /sub-pages/ 变为“规范”。这意味着无论您做什么，都无法使用刮板更新图像。

**考虑一下这个“假设和常见错误”**

- `<meta property="og:type" content="website" />`=> [https://www.example.org](https://www.example.org) （父）
- `<meta property="og:type" content="website" />`=> [https://www.example.org/sub-page/](https://www.example.org/sub-page/)
- `<meta property="og:type" content="website" />`=> [https://www.example.org/sub-page/child -2/](https://www.example.org/sub-page/child-2/)
- Ergo：将继承父级`/sub-page/`的`/child-2/``og:image`

那些不是“所有网站”，1是网站，其他是文章。

如果你这样做，Facebook 会认为所有这些都是规范的，它会将 FIRST og:image 放入所有这些中。（试试看，你会看到） - 如果你将 og:url 设置为你的根域或父域，你告诉 facebook 它们都是规范的。（这是有充分理由的，但它离题了）

**考虑这个解决方案**（这是大多数人“真正想要的”）

- `<meta property="og:type" content="article" />`=> [https://www.example.org/sub-page/](https://www.example.org/sub-page/)
- `<meta property="og:type" content="article" />`=> [https://www.example.org/sub-page/child-2/](https://www.example.org/sub-page/child-2/)

如果你现在这样做，Facebook 会给你带来更少的抓取新图像的问题。

最后，是的，这里的缓存破坏者、随机变量、更改 url 和建议可以工作，但如果没有正确指定，它们看起来像**“间歇性巫毒” 。**`og:type`

*PS：请记住，即使您“认为”可以看到最新版本，CDN 或服务器端缓存也会服务于 Facebook 的抓取工具。（除了指出如果不仔细检查它会浪费你大量的时间，我不会花任何时间在这上面。）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-01T08:46:04.230

如果您使用任何缓存插件，请确保清除所有缓存。还要确保您使用的图像具有推荐的 facebook 尺寸：1200(w) x 630(h) 或 600 x 315。

# sql - 关于 SQL 查询形成的查询

> ID：15671124
> 
> 赞同：0
> 
> 时间：2013-03-27T22:56:20.553
> 
> 标签：sql, postgresql

我有一个巨大的表格，其中包含以下形式的数据：

```
Id Col1  Col2      Col3
------------------------
a Fruit1 vitaminA vitaminB 
b a      price       "30" 
```

现在我想在 SQL 中检索价格低于 30 的所有含有维生素 A 和维生素 B 的水果。这里的“a”是分配给 Fruit1 的 id。Fruit1含有维生素A和维生素B。现在，下一行表示 id 'a' 的价格为 30。

我的意图是检索所有含有维生素A 和维生素B 且价格低于30 的水果。SQL 中有没有一种方法可以回答这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:05:07.193

您需要为此加入：

```
select t.col1
from t join
     t tprice
     on t.id = tprice.col1 and
        tprice.col2 = 'price'
where ((t.col2 = 'VitaminA' and t.col3 = 'VitaminB') or
       (t.col2 = 'VitaminB' and t.col3 = 'VitaminA')
      ) and
      (cast(tprice.col3 as int) <= 30) 
```

这是一个非常神秘的数据结构。你能解释一下它的来源吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:12:58.870

您必须在表上使用自联接才能获得结果。

```
select t1.id
from yourtable t1
inner join yourtable t2
  on t1.id = t2.col1
where 
(
  t1.col2 = 'vitaminA' and t1.col3 = 'vitaminB'
  or t1.col2 = 'vitaminB' and t1.col3 = 'vitaminA'
)
  and t2.col2 = 'price'
  and cast(t2.col3 as int) < '30'; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/3f4c8/30)

或者您可以使用一个`WHERE`子句`EXISTS`：

```
select t1.id
from yourtable t1
where 
(
  t1.col2 = 'vitaminA' and t1.col3 = 'vitaminB'
  or t1.col2 = 'vitaminB' and t1.col3 = 'vitaminA'
)
  and exists (select t2.col1
              from yourtable t2
              where t2.col2 = 'price'
                and cast(t2.col3 as int) < 30
                and t1.id = t2.col1) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!1/3f4c8/31)

附带说明一下，您当前的数据结构很难使用。如果可能，您可能需要考虑重组您的表格。

# laravel - 新安装时的 laravel-3 核心异常

> ID：15671125
> 
> 赞同：0
> 
> 时间：2013-03-27T22:56:21.667
> 
> 标签：laravel, laravel-3

我在运行 ubuntu 12.04 LTS、Nginx、php-cgi 和 Laravel v3.2.14 的机器上新安装了 Laravel

我收到以下错误。

**未处理的异常**

**消息：** 未定义的索引：argv

**位置：** DOCUMNET ROOT/laravel/core.php 第 218 行

编辑：

通过注释掉 laravel //Error::shutdown(); 中的错误处理函数，我设法得到了一个更具描述性的错误。在 DOCUMENT ROOT/laravel/laravel.php 第 50 行

请注意，此行不会导致错误，它似乎只是为发生错误的代码注册了一个处理程序。

这是错误：

**未处理的异常**

**消息：** 必须在使用会话之前设置驱动程序。

**位置：** 第 109 行的 DOCUMENT ROOT/laravel/session.php

**堆栈跟踪：**

1.  文档根目录/laravel/session.php(150): Laravel\Session::instance()
2.  文档根目录/laravel/laravel.php(195): Laravel\Session::__callStatic('save', Array)
3.  文档根目录/laravel/laravel.php(195): Laravel\Session::save()
4.  DOCUMENT ROOT/public/index.php(34): require('/mona/developme...')
5.  {主要的}

这些是导致错误的代码块：

```
if (Config::get('session.driver') !== '')
{
    Session::save();
} 
```

在 DOCUMENT ROOT/laravel/session.php 中调用此函数

```
public static function __callStatic($method, $parameters)
{
    return call_user_func_array(array(static::instance(), $method), $parameters);
} 
```

$method 包含字符串'save'，$parameters 是一个空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:29:24.653

如果你使用的是 php-cgi，Laravel 认为它正在被 cli 访问。

解决方案是像这样修改 DOCUMENT ROOT/laravel/request.php：

```
public static function cli()
{
    // This is a hack to make laravel work with fast-cgi
    // Added by David - 03/27/13
    if(!array_key_exists('argv', $_SERVER)) return false;

    return defined('STDIN') || (substr(PHP_SAPI, 0, 3) == 'cgi' && getenv('TERM'));

} 
```

在返回 false 之前检查 $_SERVER 超级全局是否具有 'argv' 键允许 cli 在使用 php-cgi 时继续运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T20:47:30.540

受您的回答启发，这对我有用：

```
public static function cli()
{
    if(array_key_exists('HTTP_HOST', $_SERVER)) return false;

    return defined('STDIN') || (substr(PHP_SAPI, 0, 3) == 'cgi' && getenv('TERM'));
} 
```

# cuda - JCuda 固定内存示例

> ID：15671126
> 
> 赞同：1
> 
> 时间：2013-03-27T22:56:22.760
> 
> 标签：cuda, jcuda

JCuda + GEForce Gt640 问题：

在 GPU 计算出结果后，我试图减少与将内存从设备复制到主机相关的延迟。执行简单的 Vector Add 程序，我发现大部分延迟确实是将结果缓冲区复制回主机端。源缓冲区到设备端的传输延迟可以忽略不计 ~.30 毫秒，而将结果复制回大约 20 毫秒。

我进行了研究，发现复制结果的更好替代方法是使用固定内存。据我所知，这个内存是在主机端分配的，但内核可以通过 pci-e 直接访问它，从而产生比在批量计算后复制结果更高的速度。我正在使用以下示例，但结果并未达到我的预期。

内核：{用于说明要点的简单示例，仅启动 1 个块 1 个线程}

```
extern "C"
__global__ void add(int* test)
{
    test[0]=1; test[1]=2; test[2]=3; test[3]=4; test[4]=5;
} 
```

爪哇：

```
import java.io.*;
import jcuda.*;
import jcuda.runtime.*;
import jcuda.driver.*;

import static jcuda.runtime.cudaMemcpyKind.*;
import static jcuda.driver.JCudaDriver.*;

public class JCudaTest
{
    public static void main(String args[])
    {
        // Initialize the driver and create a context for the first device.
        cuInit(0);
        CUdevice device = new CUdevice();
        cuDeviceGet(device, 0);
        CUcontext context = new CUcontext();
        cuCtxCreate(context, 0, device);

        // Load the ptx file.
        CUmodule module = new CUmodule();
        JCudaDriver.cuModuleLoad(module, "JCudaKernel.ptx");

        // Obtain a function pointer to the kernel function.
        CUfunction function = new CUfunction();
        JCudaDriver.cuModuleGetFunction(function, module, "add");

        Pointer P = new Pointer();
        JCudaDriver.cuMemAllocHost(P, 5*Sizeof.INT);

        Pointer kernelParameters = Pointer.to(P);
        // Call the kernel function with 1 block, 1 thread:
        JCudaDriver.cuLaunchKernel(function, 1, 1, 1, 1, 1, 1, 0, null, kernelParameters, null);
        int [] T = new int[5];
        JCuda.cudaMemcpy(Pointer.to(T), P, 5*Sizeof.INT, cudaMemcpyHostToHost);

         // Print the results:
         for(int i=0; i<5; i++)
                System.out.println(T[i]);
    }
} 
```

1.) 构建内核：root@NVS295-CUDA:~/JCUDA/MySamples# nvcc -ptx JCudaKernel.cu root@NVS295-CUDA:~/JCUDA/MySamples# ls -lrt | grep ptx -rw-r--r-- 1 根根 3295 Mar 27 17:46 JCudaKernel.ptx

2.）构建Java：root@NVS295-CUDA:~/JCUDA/MySamples# javac -cp "../JCuda-All-0.5.0-bin-linux-x86/*:." JCudaTest.java

3.) 运行代码：root@NVS295-CUDA:~/JCUDA/MySamples# java -cp "../JCuda-All-0.5.0-bin-linux-x86/*:." JCudaTest 0 0 0 0 0

期待：1 2 3 4 5

注意：如果这很重要，我正在为 x86 使用 JCuda0.5.0。

请让我知道我做错了什么，并提前感谢：Ilir

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-23T21:05:42.813

这里的问题是设备可能**无法**直接访问主机内存。

诚然，这里的[文档](http://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__MEM.html)听起来很误导：

> **cuMemAllocHost**
> 
> 分配字节大小的主机内存字节，这些字节是页面锁定的并且可供设备访问...

这听起来像是一个明确的声明。但是，这里的“可访问”并不**意味着**在所有情况下都可以直接将内存用作内核参数。这仅适用于支持[统一寻址](http://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__UNIFIED.html)的设备。对于所有其他设备，需要使用[cuMemHostGetDevicePointer](http://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__MEM.html)获取与分配的主机指针相对应的设备指针。

页面锁定主机内存的关键在于主机和设备之间的数据传输速度更快。在 JCudaBandwidthTest 示例中可以看到如何在 JCuda 中使用此内存的[示例](http://jcuda.org/samples/JCudaBandwidthTest.java)（这是针对运行时 API，但对于驱动程序 API，它的工作方式类似）。

编辑：

请注意，CUDA 6 的新[统一内存](https://devblogs.nvidia.com/parallelforall/unified-memory-in-cuda-6/)功能实际上支持您最初打算做的事情：您可以分配主机*和*`cudaMallocManaged`设备可直接访问的内存（例如，它可以传递给内核，由设备写入，然后由主机读取，无需额外的努力）。不幸的是，这个概念并不能很好地映射到 Java，因为内存仍然由 CUDA 管理 - 并且该内存不能替代例如 Java VM 用于数组左右的内存。但至少应该可以从分配的内存中创建一个，以便您可以访问该内存，例如，作为一个.*`float[]``ByteBuffer``cudaMallocManaged``FloatBuffer`*

# java - java - 在方法的括号内使用“this”

> ID：15671132
> 
> 赞同：-1
> 
> 时间：2013-03-27T22:56:51.607
> 
> 标签：java, this

```
System.out.println(this); 
```

为什么要在括号中使用“this”？是为了打印参考资料吗？或者在下面的代码中比较对象是否指向相同的引用？

```
public void compareDrzewo(Drzewo tree) 
{ if (tree == this) 
{ System.out.println("true"); } 
else { System.out.println("false"); } 
```

主要方法代码

```
Drzewo name1 = name2;
name1.compareDrzewo(name2); 
```

使用“this”的其他示例。非常直接（内部类等）请仅对此或类似用途发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T22:58:41.957

该实例有一个`toString()`与之关联的方法，这意味着它将调用它来打印出有意义的信息，或者它使用`Object`'s `toString()`（意味着它将打印出一个内存位置，这不太有用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T22:59:59.800

`System.out.println(this)`

是相同的

`System.out.println(this.toString())`;

因此，如果`this`作为实例的类覆盖了该`toString`方法，那么该行代码将是有意义的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:02:48.780

你`this`用来引用当前对象。

一个例子是当你想要引用你的类的当前实例时，所以如果你需要用你的类调用一个方法，例如`something.equals(this)`or `something == this`。

另一个示例是显式指定变量的类实例而不是本地实例，例如 setter：

```
public void setMyVar(String myVar) {
    this.myVar = myVar;
} 
```

`myVar`方法中声明的变量也是如此`this.myVar`，类中声明的变量也是如此。

# android - 安卓无声推送

> ID：15671140
> 
> 赞同：21
> 
> 时间：2013-03-27T22:57:20.490
> 
> 标签：android, service, push-notification, google-cloud-messaging, background-service

我是 android 新手，我正在到处尝试一些功能。我想知道使用静默推送的方式是什么——这意味着在设备上获得推送通知，而没有任何警报、通知或振动——即用户不知道它。如果有人有教程，他可以将我推荐给我，我将不胜感激。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-27T23:02:18.643

Android 中的默认推送（Android 版 Google Cloud Messaging）是静默推送。实际上，您必须编写代码才能让推送通知生成通知、声音或任何其他用户可察觉的效果。

阅读[GCM 指南](http://developer.android.com/google/gcm/index.html)。

# android - 滚动列表时 ListView 中的复选框混合在一起

> ID：15671142
> 
> 赞同：0
> 
> 时间：2013-03-27T22:57:22.030
> 
> 标签：android, checkbox, android-listview

我正在尝试设置每行包含 CheckBox、TextView 和 ImageView 的 ListView。我在实现中使用自己的适配器，但是当我向下滚动时，无缘无故地检查了一些复选框：例如，我检查了第一行中的复选框（在 0 位置），向下滚动并突然出现第 17 行中的元素也被选中，有时如果我回到第一个复选框，则不会选中。

我使用了以下代码：

```
private class ViewHolder{
        ImageView image;
        TextView name;
        CheckBox selected;
    }

private class BrowserAdapter extends ArrayAdapter<String> {

    public BrowserAdapter(Context context, int resource, int textViewResourceId, List<String> objects) {
        super(context, resource, textViewResourceId, objects);

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {     
        ViewHolder holder;

        if (convertView==null){
            LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.browser_list_row, parent, false);

            holder = new ViewHolder();

            holder.image = (ImageView) convertView.findViewById(R.id.browser_image);

            holder.name = (TextView) convertView.findViewById(R.id.browser_file_name);
            holder.name.setOnClickListener(ActionBar.this);

            holder.selected = (CheckBox) convertView.findViewById(R.id.browser_selected);
            holder.selected.setOnCheckedChangeListener(ActionBar.this);

            convertView.setTag(holder);
        }else{
            holder = (ViewHolder) convertView.getTag();             

        }

        setViewInfo(holder.image, holder.name, holder.selected, position);

        return convertView;
    }

    private void setViewInfo(ImageView image, TextView name, CheckBox selected , int position) {

        name.setTag(position);

        selected.setTag(position);
        selected.setChecked(checkedItems[position]);

        name.setText(myList.get(position));
        File temp_file = new File( file, myList.get( position ) );

        if (temp_file.isFile())
            image.setImageResource(R.drawable.mp3file);
        else
            image.setImageResource(R.drawable.folder);
    }

}//class BroswerAdapter 
```

参数checkedItems 是一个布尔数组，用于保存列表中复选框的状态，如下面的代码所示：

```
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    checkedItems[(Integer)buttonView.getTag()] = isChecked;

} 
```

你能帮我弄清楚我做错了什么吗？

编辑：当我每次调用getView函数（不使用convertView）时，我都使用一种简单的方式来膨胀视图，一切都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:54:53.483

将以下行移到 if 语句之外

```
 holder.name.setOnClickListener(ActionBar.this);
 holder.selected = (CheckBox) convertView.findViewById(R.id.browser_selected);
 holder.selected.setOnCheckedChangeListener(ActionBar.this); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T23:01:05.840

**错误的：**

> 您正在使用`setSelected`，而您应该像这样 在视图上使用[setChecked ：](http://developer.android.com/reference/android/widget/CompoundButton.html#setChecked%28boolean%29)`CheckBox`
> 
> ```
> selected.setChecked (checkedItems[position]); 
> ```
> 
> setSelected 方法设置a （或 another ）*中行的选择状态。*`ListView``AdapterView`

**编辑：**

您将 设置`setOnCheckedChangeListener`为`CheckBox`视图。然后，您尝试读取`setOnCheckedChangeListener`设置为的视图的标签——这是`CheckBox`. `CheckBox`但是，您永远不会设置!的标签。所以，你读到的标签`setOnCheckedChangeListener`是错误的。

你必须这样设置：

```
holder.selected.setTag ("" + position); 
```

...然后，在 中`setOnCheckedChangeListener`，像这样阅读：

```
checkedItems[Integer.parseInt (buttonView.getTag())] = isChecked; 
```

# ruby-on-rails - 如果模型可以同时是多个子类，STI 是否合适？

> ID：15671148
> 
> 赞同：2
> 
> 时间：2013-03-27T22:57:39.827
> 
> 标签：ruby-on-rails

在 Rails 应用程序中使用 STI 的正确时间是什么时候？经过大量阅读（包括[这篇优秀的 Railscast](http://railscasts.com/episodes/394-sti-and-polymorphic-associations)），我仍然不确定什么是满足我需求的最佳方法。

这个（人为的）例子说明了我的困境。

假设一个用户类可以分为几个子类，包括医生和病人。这些不仅仅是简单的角色，具有关键数据和逻辑差异。

医生具有某些数据库字段（例如，资格、专业）、某些视图逻辑（例如，`if User.doctor? then`显示患者列表）以及某些逻辑和角色（例如，可以管理患者记录）。

患者具有不同的数据库字段（例如血型）、视图逻辑（例如`if User.patient? then`显示治疗列表）和逻辑（例如可以编辑预约）。

Doctors 和 Patients 都有`:username, :email, :password`共同的领域，以及在应用程序的其余部分（例如，`User has_many :comments, :messages, etc`）中的大量逻辑。

根据我的阅读，患者和医生有不同的逻辑要求这一事实表明 STI 可能是合适的。但是对于不同的数据库字段，多态可能是更好的方法。

但....

用户可以同时是医生和患者。

有没有解决这个问题的“最佳方法”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:19:06.617

STI 使用单个列来确定对象的类型。

乍一看，这表明您需要有 User、Doctor、Patient 和 DoctorPatient 类，对我来说，这似乎有点绕圈子。如果添加其他类型，它可能会变得更加循环。

将 Doctor、Patient 等功能移到另一个类（和表）中似乎更有意义，无需了解更多信息，但其他人可能有更有用的输入。

# android - 服务器没有收到来自客户端（android）的消息

> ID：15671152
> 
> 赞同：0
> 
> 时间：2013-03-27T22:57:46.517
> 
> 标签：android, client

我在 netbeans 中尝试了我的客户端（客户端和服务器）代码，一切正常。然后我在eclipse sdk中写了它，我试图在模拟器中运行它，服务器没有收到消息了......

客户：

```
package com.aaa.udep;

import com.aaa.udep.Client;
import com.aaa.udep.R;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
    Button button;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button=(Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Thread thread=new Thread (new Client());
                thread.start();
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

}

package com.aaa.udep;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.net.SocketTimeoutException;
import java.net.UnknownHostException;

import android.util.Log;

public class Client implements Runnable {

Client()
{
    run();
}
    @Override

    public void run() {
        // TODO Auto-generated method stub

            try {
                Log.i("MyApp", "starting");
              String messageStr = "Hello Android dolwno rabotatj, nado testirovatj na teelefone!";
              String serverHostname = new String ("127.0.0.1");  
              DatagramSocket clientSocket = new DatagramSocket(); 
              InetAddress IPAddress = InetAddress.getByName(serverHostname); 
              Log.i("MyApp", "Atempting to connect");

              byte[] sendData = new byte[1024]; 
              byte[] receiveData = new byte[1024];           
             sendData = messageStr.getBytes();

             Log.d ("MyAPp","Sending data to server");
              DatagramPacket sendPacket = 
                 new DatagramPacket(sendData, sendData.length, IPAddress, 9879); 

              clientSocket.send(sendPacket);
              Log.d ("MyAPp","Sent");

              DatagramPacket receivePacket = 
                 new DatagramPacket(receiveData, receiveData.length); 

              Log.d ("MyApp","Waiting for return packet");
              clientSocket.setSoTimeout(10000);

              try {
                   clientSocket.receive(receivePacket); 
                   String modifiedSentence = 
                       new String(receivePacket.getData()); 

                   InetAddress returnIPAddress = receivePacket.getAddress();

                   int port = receivePacket.getPort();
                   Log.d ("From server at get reply: ", serverHostname);
                   Log.d("Message: ", modifiedSentence ); 

                  }
              catch (SocketTimeoutException ste)
                  {

            ste.printStackTrace();
            Log.e("Timeout Occurred: Packet assumed lost", ste+"");
              }

              clientSocket.close(); 
             }
           catch (UnknownHostException ex) { 
             ex.printStackTrace();
             Log.e("UnknownHostException", ex+"");
            }
           catch (IOException ex) {
             ex.printStackTrace();
             Log.e("IO Expeption", ex+"");

            }
        }
    }
manifest:
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" /> 
```

日志：

```
03-28 00:53:37.159: I/MyApp(337): starting
03-28 00:53:37.159: I/MyApp(337): Atempting to connect
03-28 00:53:37.220: D/MyAPp(337): Sending data to server
03-28 00:53:37.220: D/MyAPp(337): Sent
03-28 00:53:37.220: D/MyApp(337): Waiting for return packet
03-28 00:53:47.254: W/System.err(337): java.net.SocketTimeoutException: Connection timed out
03-28 00:53:47.860: W/System.err(337):  at org.apache.harmony.luni.net.PlainDatagramSocketImpl.receive(PlainDatagramSocketImpl.java:263)
03-28 00:53:47.860: W/System.err(337):  at java.net.DatagramSocket.receive(DatagramSocket.java:414)
03-28 00:53:47.870: W/System.err(337):  at com.aaa.udep.Client.run(Client.java:51)
03-28 00:53:47.870: W/System.err(337):  at java.lang.Thread.run(Thread.java:1096)
03-28 00:53:47.870: E/Timeout Occurred: Packet assumed lost(337): java.net.SocketTimeoutException: Connection timed out 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:05:16.653

Android 模拟器与您的 PC 不共享相同的 IP 地址，这意味着您不能使用环回 ip *127.0.0.1*并期望它连接到您的 PC。Android 模拟器实例在具有自己的防火墙和子网的虚拟 LAN 上运行，它可以通过该子网上的 IP 与您的 PC 通信。

这是：`10.0.2.2`

有关模拟器网络的更多信息，请访问[此页面](http://developer.android.com/tools/devices/emulator.html#emulatornetworking)。

希望有帮助

# jquery - jquery一键二用功能

> ID：15671157
> 
> 赞同：1
> 
> 时间：2013-03-27T22:58:19.010
> 
> 标签：jquery, function, this

我想在点击时执行 2 个功能。分开来说，两者都很好用。但是，当我执行函数 A 和函数 B 之后，我遇到了问题。

问题来自函数B。我认为这是因为 $(this). 由于在 functionA 上执行的所有先例 var，它没有得到正确的 id。$(this) 调用的 id 必须是 #prev-ajax,#next-ajax 。

这里的代码：

```
function A(){
    var link = $(this); 
    ajaxify(link.attr('href'));
    window.location.hash = link.attr("href");
    $('.link').removeClass('current');
}
function B(){
    e.preventDefault();
    var href = $(this).attr('href');
    var link = $(".link[href*= '" + href + "']:not(#prev-ajax, #next-ajax)");
    var $parent = link.parents('.element');
    var prev = $parent.prev().find('.link').attr('href');
    var next = $parent.next().find('.link').attr('href');
    $("#prev-ajax").attr( 'href', prev );
    $("#next-ajax").attr( 'href', next ); 
}
$("#prev-ajax,#next-ajax").click(A).click(B); 
```

对不起英语，我是法国人

洛伊克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:23:13.993

试试这个，看看你是否仍然有同时使用这两个功能的问题：

```
$("#prev-ajax,#next-ajax").click(function (e) {
    e.preventDefault();
    var functionAlink = $(this);
    var functionBlink = $(this);

    // Function A code
    ajaxify(functionAlink.attr('href'));
    window.location.hash = functionAlink.attr("href");
    $('.link').removeClass('current');

    // Function B code
    var href = functionBlink.attr('href');
    var link = $(".link[href*= '" + href + "']:not(#prev-ajax, #next-ajax)");
    var $parent = link.parents('.element');
    var prev = $parent.prev().find('.link').attr('href');
    var next = $parent.next().find('.link').attr('href');
    $("#prev-ajax").attr('href', prev);
    $("#next-ajax").attr('href', next);
}); 
```

# ios - 在 iPhone 上实现 UIPopoverView 的最佳方法？

> ID：15671161
> 
> 赞同：0
> 
> 时间：2013-03-27T22:58:31.753
> 
> 标签：ios, objective-c, ios5, ios6, uipopovercontroller

它在 iPad 上可用，但不幸的是在 iPhone 上不可用。我想使用这样的服务来向用户显示一些选项而不召唤新的视图控制器，我很好奇最好的库/方法是什么。

我找到了这个：[https ://github.com/runway20/PopoverView](https://github.com/runway20/PopoverView)

这看起来很棒，但它有点过时了，并且还没有针对 iOS 6 进行更新（针对正在使用的已弃用方法给出了很多警告）。

# php - 允许一个 ip 通过基本身份验证访问

> ID：15671162
> 
> 赞同：0
> 
> 时间：2013-03-27T22:58:38.317
> 
> 标签：php, apache, .htaccess, basic-authentication

我为普通用户设置了基本的用户名和密码验证

我只想要一个用户名和密码的 IP 访问权限

例如，用户 1 连接，`test`如果`test` 用户 1 仍然通过基本身份验证连接到服务器，并且用户 2 请求使用相同的用户名和密码访问服务器，则用户 2 无法访问服务器，直到用户 1 与服务器断开连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:07:39.263

这对于 HTTP 基本身份验证是不可能的，因为 HTTP 没有持续时间长于单个页面或图像的所有数据传输时间的活动连接。如果传输了所有数据，则终止连接。这应该是让第二个用户进入的正确时间吗？如果是这样，限制你的 apache 一次只接受一个连接（即只允许一个子进程），你就完成了。

如果你想要这个更像我认为你想要的那样，你必须在你的应用程序中通过会话自己实现它，并且必须处理这样一个事实，即用户通常不会将自己从应用程序中注销，而只是关闭浏览器。因此，经过一定时间后，必须将第一个用户视为非活动用户并终止其会话以让第二个用户进入。

顺便说一句：请记住，HTTP 基本身份验证无法实现“注销”！所有模拟这种情况的解决方案实际上只会向浏览器发送另一个身份验证挑战，这使得它忘记了登录并再次要求用户提供凭据。这不能用 .htaccess 来实现。

# iphone - 分层谷歌地图ios api和游戏/图形框架？

> ID：15671166
> 
> 赞同：1
> 
> 时间：2013-03-27T22:58:42.203
> 
> 标签：iphone, ios, objective-c, google-maps, cocos2d-iphone

我正在开发一个 iOS 应用程序，其中包括一个 google maps api 地图视图和一个包含用于操作地图的控件的图层。到目前为止，我一直尝试使用 Cocos-2d，但是在 cocos2d 和谷歌地图之间共享视图似乎存在冲突（可能是因为 OpenGL 问题）。有没有办法同时共享 cocos2d 视图和谷歌地图视图？否则我还有什么其他选择？提前致谢！

# cordova - 如何使用 phonegap for android 设置推送通知

> ID：15671169
> 
> 赞同：1
> 
> 时间：2013-03-27T22:58:52.740
> 
> 标签：cordova, push-notification

我正在开发一个应用程序（现在只是 android），我正在尝试添加推送通知。我查看了几个论坛，试图调试我的代码以检索我的设备 ID，以便我可以开始发送推送通知。我在下面粘贴我的代码。

先感谢您！

index.html 的负责人

```
 <script>
    var pushNotification;

pushNotification = window.plugins.pushNotification;

// iOS
function onNotificationAPN(event) {
    if (event.alert) {
        navigator.notification.alert(event.alert);
    }

    if (event.sound) {
        var snd = new Media(event.sound);
        snd.play();
    }

    if (event.badge) {
        pushNotification.setApplicationIconBadgeNumber(successHandler, event.badge);
    }
}

// Android
function onNotificationGCM(e) {
    switch( e.event )
    {
        case 'registered':
            if ( e.regid.length > 0 )
            {
                // Your GCM push server needs to know the regID before it can push to this device
                // here is where you might want to send it the regID for later use.
                alert('registration id = e.regid');
            }
        break;

        case 'message':
            // if this flag is set, this notification happened while we were in the foreground.
            // you might want to play a sound to get the user's attention, throw up a dialog, etc.
            if (e.foreground)
            {
                $("#app-status-ul").append('<li>--INLINE NOTIFICATION--' + '</li>');

                // if the notification contains a soundname, play it.
                var my_media = new Media("/android_asset/www/"+e.soundname);
                my_media.play();
            }
            else    // otherwise we were launched because the user touched a notification in the notification tray.
                $("#app-status-ul").append('<li>--BACKGROUND NOTIFICATION--' + '</li>');

            $("#app-status-ul").append('<li>MESSAGE -> MSG: ' + e.payload.message + '</li>');
            $("#app-status-ul").append('<li>MESSAGE -> MSGCNT: ' + e.payload.msgcnt + '</li>');
        break;

        case 'error':
            alert('GCM error = e.msg');
        break;

        default:
            alert('An unknown GCM event has occurred');
        break;
    }
}

// result contains any message sent from the plugin call
function successHandler (result) {
    alert('result = '+result)
}

// result contains any error description text returned from the plugin call
function errorHandler (error) {
    alert('error = '+error)
}

 function onLoad() {
        document.addEventListener("deviceready", onDeviceReady, false);
            alert('device loaded')

    }

    // Cordova is loaded and it is now safe to make calls Cordova methods
    //

$(document).ready(function() {

    alert('device ready jquery')
        // Now safe to use the Cordova API
 pushNotification.register(successHandler, errorHandler,{"senderID":"uvumobile2012","ecb":"onNotificationGCM"});
})

</script> 
```

配置文件

```
<feature name="http://api.phonegap.com/1.0/device" />

<preference name="phonegap-version" value="2.3.0" />
<preference name="orientation"      value="portrait" />
<preference name="target-device"    value="universal" />
<preference name="fullscreen"       value="false" />
<preference name="android-minSdkVersion" value="4" />
<preference name="splash-screen-duration" value="5000" />
<feature name="http://api.phonegap.com/1.0/file"/>
<feature name="http://api.phonegap.com/1.0/geolocation"/>
<feature name="http://api.phonegap.com/1.0/network"/>
<feature name="http://api.phonegap.com/1.0/notification"/>

<gap:plugin name="BarcodeScanner" /> <!-- latest release -->
<gap:plugin name="GAPlugin" /> <!-- latest release -->
<gap:plugin name="PushPlugin" value="com.plugin.GCM.PushPlugin" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T07:06:18.487

您可以从以下 url 下载示例应用程序以发送推送通知

[https://github.com/hollyschinsky/PushNotificationSample30/](https://github.com/hollyschinsky/PushNotificationSample30/)

您还将从以下网址获得教程

[http://devgirl.org/2013/07/17/tutorial-implement-push-notifications-in-your-phonegap-application/](http://devgirl.org/2013/07/17/tutorial-implement-push-notifications-in-your-phonegap-application/)

# java - 从方法返回后如何停止递归

> ID：15671174
> 
> 赞同：1
> 
> 时间：2013-03-27T22:59:15.383
> 
> 标签：java, recursion

我有一个调用递归函数的程序。

```
int dd=dis(root,2,0); 
```

功能码

```
 public int dis(Node n,int g,int count)
   {
    if(g==n.data)
    {
        System.out.println("equal count"+count);
        return count;
    }

    else if(g>n.data)
    {
        count=count+1;
        dis(n.right,g,count);
    }

    else if(g<n.data)
    {   
        count=count+1;
        dis(n.left,g,count);
    }
    System.out.println("function"+count);
    return count;
} 
```

当数据等于节点值时，函数返回计数，即我需要的确切值。但是在count返回后继续递归，在函数结束时返回异常的count值。

在从 == 案例返回 count 后，我​​想完全退出函数，我不希望在返回第一个 count 后递归修改调用函数中的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T23:02:58.120

改变这个：

```
 dis(n.right,g,count); 
```

对此：

```
 return dis(n.right,g,count); 
```

还有这个：

```
 dis(n.left,g,count); 
```

对此：

```
 return dis(n.left,g,count); 
```

* * *

**编辑添加：**编写此函数的更简单方法可能是：

```
public int dis(final Node n, final int g)
{
    if(g == n.data)
        return 0;
    else
        return 1 + dis(g < n.data ? n.left : n.right, g);
} 
```

请注意，在这种方法中，`count`变量完全消失了：从命令/过程的角度来看，您可能会说，这种方法不是在您下降到树中时计算节点，而是在返回时计算它们。（但最好从函数/递归的角度来看它，并说如果`g`适当的子树中`n`的深度是 ，那么它在父树中的深度更大。）

最简单的命令式版本可能是：

```
public int dis(final Node root, final int g)
{
    int depth = 0;
    for(Node n = root; g != n.data; n = (g < n.data ? n.left : n.right))
        ++depth;
    return depth;
} 
```

# php - 多输入插入

> ID：15671176
> 
> 赞同：0
> 
> 时间：2013-03-27T22:59:21.413
> 
> 标签：php, html, mysql, forms

我有一个看起来像这样的应用程序：

![在此处输入图像描述](../Images/46b72050a3d17fbddc12a9184a02b223.png)

如您所见，每一行包含一个组标题（只有一个输入的行）或一个成分表单（有一个小输入，然后是一个选择，然后是另一个更大的输入）。

我使用 Javascript 添加新的跨度。我使用以下 PHP 将每个成分跨度分组到一个数组中，确定顺序（因为每个跨度可以移动到不同的顺序），然​​后插入到我的数据库中。

```
foreach($_POST as $key => $value) {
        $value = $this->input->post($key);
        $ingredientQTY = $this->input->post('ingredientQTY');
        $measurements = $this->input->post('measurements');
        $ingredientNAME = $this->input->post('ingredientNAME');
        $ingredientsROW[] = array($ingredientQTY, $measurements, $ingredientNAME);

        for ($i = 0, $count = count($ingredientQTY); $i < $count; $i++) {
            $rows[] = array(
                'ingredientamount'      => $ingredientQTY[$i],
                'ingredientType'        =>  $measurements[$i],
                'ingredientname'        => $ingredientNAME[$i],
                'recipe_id'             => $recipe_id,
                'order'                 => $i + 1,
                'user_id'               => $user_id
            );
            $sql = "INSERT `ingredients` (`ingredientamount`,`ingredientType`,`ingredientname`, `recipe_id`, `order`, `user_id`) VALUES ";
            $coma = '';
            foreach ($rows as $oneRow) {
                $sql .= $coma."('".implode("','",$oneRow)."')";
                $coma = ', ';
            }

        }
        $this->db->query($sql);
        break;
} 
```

这为插入成分行创造了奇迹。但我不确定如何插入组标题（必须将其放在 for 循环中以保持顺序，$i + 1，继续）。

我想我已经找到了两种解决方案（尽管可能还有其他解决方案，这些甚至可能不起作用）：

1.  组标题输入字段是否与成分文本字段之一具有相同的名称值，并随其发送隐藏值，称其为组标题？

2.  将其作为具有不同名称值的不同输入字段发送？

我的问题是：我怎样才能用我当前的代码做到这一点，这些是有效的解决方案，还是有更好的解决方案？

感谢大家的帮助！如果您需要更多详细信息，请询问！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:47:41.517

您可以使用空标题`<input type="hidden" name="groupheading[]" value="product" />`，如`<input type="text" name="groupheading[]" value="" />`. 第一个应该在产品范围内。

这样，您可以按照现在的方式继续循环。$_POST['groupheading'][$key] 要么返回组标题，要么返回短语“产品”。因此，在您的脚本中，它将是：

```
if($_POST['groupheading'][$key] == "product") {
  // insert product
} else {
  // insert group heading
} 
```

我想我今天早上或昨天为您提供了答案。您用来获得所需效果的方式仍然有点奇怪。它可以更容易地实现。

# api - 如何根据 MusicBrainz ID 计算歌曲流行度？

> ID：15671177
> 
> 赞同：3
> 
> 时间：2013-03-27T22:59:23.627
> 
> 标签：api, sorting, musicbrainz

所以我对每首歌有 3 件事：

```
Name

Artist

MusicBrainz ID 
```

如何按受欢迎程度对它们进行排序？
我可以使用什么服务来匹配一首歌的“统计数据”？

我正在考虑使用 YouTube，但我担心我会得到不相关的结果，例如模仿或歌词视频等。

是否有任何流行的服务（带有 active `API/Java library`）我可以用来获取歌曲的重要统计数据（`plays, hits, votes, likes, shares`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T14:53:03.367

所以我所做的是使用返回 XML 响应并使用 JDOM 解析响应的[Last.fm Web API 。](http://www.last.fm/api)问题是，这需要很多时间。

我首先使用`Tag.getTopTracks()`获取 4 个标签的热门曲目，然后使用`Track.getInfo()`并下载统计信息查看每个曲目。我需要大约 14 秒来处理 4 个标签，每个标签有 5 个结果。

我稍后会尝试解决这个问题，但这个问题现在已经解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T18:13:00.993

[声音云 API](https://developers.soundcloud.com/docs/api/reference)

Soundcloud.com 非常受欢迎，其 API 易于使用。它提供 XML 和 JSON 格式的响应。据我所知，它的 API 速率限制相当高。

以下是您可以获得的统计信息列表示例：

> “playback_count”：105068，
> “download_count”：6694，
> “favoritings_count”：739，
> “comment_count”：153，

# design-patterns - Spring-WS SOAP 服务设计 - 一对多操作

> ID：15671178
> 
> 赞同：0
> 
> 时间：2013-03-27T22:59:28.070
> 
> 标签：design-patterns, soap, wsdl, spring-ws

我正在使用 Spring-WS 发布一个 SOAP Web 服务，并且想知道设计 WSDL 的方法。

如果我的服务必须考虑四个操作（例如启动、更新、暂停和重新启动服务），我应该拥有一个带有一个操作的 WSDL（例如 EntertainmentService）并将这些操作作为请求属性还是应该定义一个 WSDL与多个操作。

```
 <request>
     <type><!-- start | update | suspend | restart --></type>
     <name></name>
     <address></address>
     <services>
         <tv></tv>
         <internet></internet>
         <phone></phone>
     </services> 
```

如果建议使用一个具有多个操作的 WSDL，我如何指定 Spring-WS 中的操作列表。目前，我的 spring servlet 上下文有一个 DefaultWsdl11Definition 并且 WSDL 在运行时生成。

```
<bean id="EntertainmentService" class="org.springframework.ws.wsdl.wsdl11.DefaultWsdl11Definition" lazy-init="true">
    <property name="schema">
        <bean class="org.springframework.xml.xsd.SimpleXsdSchema">
            <property name="xsd" value="/WEB-INF/schemas/entertainmentService.xsd"/>    
        </bean>
    </property>
    <property name="portTypeName" value="EntertainmentService"/>
    <property name="locationUri" value="/endpoints"/>
</bean> 
```

如果所有四个操作都使用相同的 WSDL，那么客户端（使用 Web 服务）进行一项操作（使用不同的 ）是否比调用多个操作更容易。第二种方法有什么优势（每种请求类型都有不同的操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:04:50.430

您的问题更多是概念设计而不是网络服务。一般来说，我会说最好让每个操作保持原子性。在您的情况下，这意味着您将拥有与要执行的操作一样多的操作。

从长远来看，假设您想通过添加天数来修改“暂停”操作（暂停 xx 天或暂停 xx 天）

1.  您只需修改与操作挂起相关的部分
2.  您只需要测试挂起操作

我在使用 spring web-service 时使用了静态 wsdl。如果你改变你的 xsd，spring 会知道有几个动作/操作。

# javascript - 将 attr 应用于第一级

> ID：15671182
> 
> 赞同：1
> 
> 时间：2013-03-27T22:59:51.027
> 
> 标签：javascript, jquery

```
<li class="page_item"><a href="javascript:">A</a>
<ul class="children">
    <li class="page_item"><a href="">1</a></li>
    <li class="page_item"><a href="">2</a></li>
</ul>
</li>
<li class="page_item "><a href="">B</a>
<ul class="children">
    <li class="page_item"><a href="">1</a></li>
    <li class="page_item"><a href="">2</a></li>
    <li class="page_item"><a href="">3</a></li>
    <li class="page_item"><a href="">4</a></li>
</ul>
</li>

<li class="page_item "><a href="">C</a>
<ul class="children">
    <li class="page_item"><a href="">1</a></li>
    <li class="page_item"><a href="">2</a></li>
    <li class="page_item"><a href="">3</a></li>
    <li class="page_item"><a href="">4</a></li>
</ul> 
```

我该如何更改所有`<li class="page_item"><a href="javascript:"></a>`但没有 ul.children 的 attr。

```
$('li.page_item a').not("ul.children").attr("href", "http://google.com"); 
```

不工作。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:03:09.603

设置顶级`ul`类`parent`，然后：

```
$('ul.parent > li.page_item > a').attr("href", "http://google.com"); 
```

[在这里演示](http://jsfiddle.net/mtAjm/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T23:04:04.520

简而言之：`$("ul:not(.children) > li.page_item > a").attr("href","blah");`。jQuery 伪选择器`:not`允许您从集合 (ul) 中过滤掉不需要的东西 (ul.children)。从那里，直子li，直子a。

希望这有帮助。如果仍然不清楚，请随时发表评论，我会进一步详细说明。

PS：小提琴 - [http://jsfiddle.net/VsL5t/](http://jsfiddle.net/VsL5t/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T23:07:10.627

```
$('li.page_item a').not('.children a').attr("href", "http://google.com"); 
```

编辑 - 或更具体的过滤（尽管上面满足了答案的要求）：

```
$('li.page_item a').not('ul.children li.page_item a').attr("href", "http://google.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T23:03:15.723

遍历元素并跳过没有`.children`.

**[jsFiddle 演示](http://jsfiddle.net/fwM59/1/)**

```
$('li.page_item a').each(function(){
 if( $('.children',this.parentNode).length == 0 ) return true;
 $(this).attr("href","http://www.google.com");
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-27T23:04:46.527

一种选择是使用`has`方法。

```
$('li.page_item')
         .has("ul.children")
         .children('a')
         .prop("href", "http://google.com"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-27T23:05:48.157

你的尝试很接近。调用中的选择器`not`将不匹配任何内容，因为集合包含`a`元素，并且选择器匹配`ul`元素。添加`a`到选择器：

```
$('li.page_item a').not("ul.children a").attr("href", "http://google.com"); 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-03-27T23:02:05.743

使用直接后代选择器：

```
$('li.page_item > a').attr("href", "http://google.com"); 
```

# asp.net - 从 ASP.NET 中的 404 页面重定向到另一个页面

> ID：15671184
> 
> 赞同：0
> 
> 时间：2013-03-27T22:59:55.250
> 
> 标签：asp.net, redirect

我有配置的自定义 404 页面 `responseMode="ExecuteURL"` 我还有一个母版页，其中有一个搜索框。提交搜索框时，页面被重定向到`/Search.aspx?q=` 但是，如果我在自定义 404 页面上，则重定向不起作用。我在网址中得到类似的东西

`http://localhost:49321/nothere?error=404&404%3bhttp%3a%2f%2flocalhost%3a49321%2fnothere`

`http://localhost:49321/nothere`是我测试自定义 404 页面的 url

如果响应模式设置为 ，它会正常工作`Redirect`，但我不希望那样。

无论如何要解决这个问题？

这是为搜索框呈现的 html

```
<div id="searchPanel" onkeypress="javascript:return WebForm_FireDefaultButton(event, &#39;searchButton&#39;)">

                    <input name="ctl00$searchBox" type="text" id="searchBox" placeholder="     Search..." />
                    <input type="submit" name="ctl00$searchButton" value="" id="searchButton" style="display: none" />

</div> 
```

# ruby-on-rails - 如何配置 Guard 以跳过 Pry 提示并只运行更改后的测试？

> ID：15671191
> 
> 赞同：2
> 
> 时间：2013-03-27T23:00:17.637
> 
> 标签：ruby-on-rails, ruby, tdd, guard, pry

我正在开发一个在 Ruby (1.8.7) 上运行 Rails (2.3.18) 的内部 Rails 应用程序，测试用 Test::Unit (2.5.4) 和 Shoulda (2.10.2) 编写

Guard (1.6.2) 在启动时通过 guard-test (0.7.0) 运行所有测试，但随后它会进入 Pry (0.9.10) 提示符，而不是监听文件更改。我的 Gemfile 中没有 Pry，但它出现在 Guard 下的 Gemfile.lock 中，

我使用 Guard 的唯一原因是在文件更改时重新运行测试，这适用于我的 gem 和其他项目......如果我点击 [enter]，所有测试都将运行，但这需要的时间比一个要长得多我希望它运行的文件。

警卫秀：

```
 all_after_pass : true

  all_on_start   : true

  keep_failed    : true

  test_paths     : ["test"] 
```

保护文件：

```
guard :test do

  watch(%r{^test/.+_test\.rb$})

  watch('test/test_helper.rb')  { "test" }

end 
```

如何配置 Guard 以跳过 Pry 提示并只运行更改后的测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:58:32.767

取自[Guard Wiki](https://github.com/guard/guard/wiki/Add-proper-Readline-support-to-Ruby-on-Mac-OS-X)：

`If you are on Mac OS X and have problems with either Guard not reacting to file changes or Pry behaving strangely, then you probably suffer under a Ruby build that uses `libedit` instead of `readline`.`

所以我强烈建议遵循 Guard wiki 中的说明，并使用适当的 Readline 支持重新编译您的 Ruby 版本。

作为替代方案，您也可以使用`gets`基于简单交互器的旧 Guard 版本 1.4.0，请参阅旧[README](https://github.com/guard/guard/tree/v1.4.0)以了解该版本支持的功能。要获得简单的交互器，请添加

`interactor :simple`

到你的`Gemfile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-23T00:20:09.040

我使用 no_interations 选项执行此操作，以编程方式启动警卫

```
Guard.start :no_interations => true` 
```

# php - 如何将变量值发送到 POST 表单

> ID：15671193
> 
> 赞同：0
> 
> 时间：2013-03-27T23:00:20.087
> 
> 标签：php, forms, variables, post

在 php 中：

```
$nom_du_formulaire = basename ($_SERVER['REQUEST_URI']); 
```

在 pgp 文件中提交 FORM 和许多箍后，我需要发送它的原始文件的名称......所以我在处理 $_POST 值时尝试获取 $nom_du_formulaire......

我试试这个...不工作

```
<input type="hidden" name="nom_du_formulaire" value="$nom_du_formulaire"> 
```

我尝试使用 php 全局变量...也不行！

所以问题是，如何将我的 $nom_du_formulaire 发送到一个遥远的 php 文件

文件：在 form.php 中：post = make_email.php。在 make_email.php 中有 send_email.php，我需要在 send_email.php 中使用 $nom_du_formulaire。但如果我问 $_SERVER['REQUEST_URI'] 我会得到：make_email.php。不是我需要的 form.php 名​​称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:02:44.440

你是如何输出隐藏标签的？这是基本的 - 如果 PHP 代码块中还没有 PHP 变量，您必须在 PHP 代码中指定它。

```
<input type="hidden" name="nom_du_formulaire" value="<?php echo $nom_du_formulaire' ?>"> 
```

或者，如果是，您可以通过 print 或 echo 输出：

```
 echo '<input type="hidden" name="nom_du_formulaire" value="'.$nom_du_formulaire.'">'; 
```

如果可能，尽量避免使用全局变量。

# asp.net - Gridview 使用 AutoGenerateSelectButton="false" 生成 Select 列

> ID：15671203
> 
> 赞同：0
> 
> 时间：2013-03-27T23:01:21.817
> 
> 标签：asp.net, gridview

我有一个 ASP:Gridview 生成选择列，即使 AutoGenerateSelectButton =“false”。这是声明：

```
 <asp:GridView ID="grdAssessments" runat="server" 
    AutoGenerateColumns="False"
    CssClass="gridview" 
    AlternatingRowStyle-CssClass="even" 
    AutoGenerateSelectButton="false"
    DataKeyNames="ReportId" 
    AllowSorting="True" Width="1000px"
    OnSelectedIndexChanging="grdAssessments_SelectedIndexChanging"
    OnSorting="grdAssessments_Sorting"
    OnRowCommand="grdAssessments_RowCommand"
    OnRowDataBound="grdAssessments_RowDataBound">
    <AlternatingRowStyle CssClass="even" />
    <Columns>
         <asp:TemplateField HeaderText="Edit">
             <ItemTemplate>
                  <a href="javascript:void(0);" 
onclick="showEmployeeEdit('<%# Eval("EmployeeNumber") %>')" title="Edit">Edit</a>
             </ItemTemplate>
         </asp:TemplateField>
         <asp:TemplateField HeaderText="DateCreated" SortExpression="DateCreated">
               <ItemTemplate>
                    <asp:Label ID="lblDateCreated" runat="server" />
               </ItemTemplate>
         </asp:TemplateField>
...
   </Columns>
</asp:GridView> 
```

这是生成的gridview ...与我想摆脱的Select列。

![在此处输入图像描述](../Images/b0f2e17470b123dec11a02f843697145.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T17:12:07.343

在黑暗中射击：不要连接`OnSelectedIndexChanging`事件。为什么你想要没有`Select Button`某种类型的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T20:32:35.087

解决方案是： grdAssessments.AutoGenerateSelectButton = false;

我不知道为什么这可以解决问题，但确实可以。

# android - TCP 套接字连接作为服务

> ID：15671207
> 
> 赞同：4
> 
> 时间：2013-03-27T23:01:35.943
> 
> 标签：android, tcp

我尝试了很多搜索并放弃了。我有一个基本上连接到服务器的 TCP 客户端类。我从我的主要活动中调用这个 tcp 客户端类并使用主要活动中的异步线程我在 tcp 客户端类中运行一个方法，一切顺利。我有另一个活动需要通过调用此 tcp 客户端类中的方法来发送消息，但我无法做到。请帮忙。

我想将我的 tcp 客户端类转换为服务，但在这种情况下，我不确定如何让监听传入消息的方法保持运行。请帮忙。

我使用了这个 TCP 客户端类和相同的主要活动 [http://myandroidsolutions.blogspot.pt/2012/07/android-tcp-connection-tutorial.html](http://myandroidsolutions.blogspot.pt/2012/07/android-tcp-connection-tutorial.html)

我还必须包括通过这个 TCP 发送图像的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:12:12.473

将您的 TCP 连接代码放入服务中，然后根据需要从 Activity 连接。例如看看[这个](http://developer.android.com/guide/components/bound-services.html#Binder)

因此，将会发生的情况是，当需要时，您的主要活动将连接到该服务，并在进入 onPause 状态时断开连接，而前台的另一个活动将接管寻找服务绑定本身并执行您要执行的操作。

# asp.net - 在没有 Application_Start 的情况下，请求在此上下文中不可用

> ID：15671209
> 
> 赞同：1
> 
> 时间：2013-03-27T23:01:57.633
> 
> 标签：asp.net, iis-7

我对使用 Framework 2.0 创建的旧 ASP.NET 应用程序进行了更改。Global.asax 没有 Application_Start 但是当我在 IIS7 上调试时出现错误

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Web.HttpException：请求在此上下文中不可用

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[HttpException (0x80004005): Request is not available in this context]
System.Web.HttpContext.get_Request() +11207688
Microsoft.Practices.CompositeWeb.Services.WebConfigModuleInfoStore.GetConfiguration(String 
configFilePath) +130
Microsoft.Practices.CompositeWeb.Services.WebConfigModuleInfoStore.PopulateSection  
(ModulesConfigurationSection section, String rootDirectory) +274
Microsoft.Practices.CompositeWeb.Services.WebConfigModuleInfoStore.GetModuleConfigurationSection
() +103
Microsoft.Practices.CompositeWeb.Services.WebModuleEnumerator.EnumerateModules() +216
Microsoft.Practices.CompositeWeb.WebClientApplication.LoadModules() +443
Microsoft.Practices.CompositeWeb.WebClientApplication.Application_Start(Object sender,   
EventArgs e) +262

[HttpException (0x80004005): Request is not available in this context]
System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext  
context, HttpApplication app) +4185553
System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, 
HttpContext context, MethodInfo[] handlers) +205
System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr 
appContext, HttpContext context) +336
System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext,
HttpContext context) +350
System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +382

[HttpException (0x80004005): Request is not available in this context]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11335894
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +88
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr,
HttpContext context) +4355316 
```

当我切换到 VS 的网络服务器部分进行开发时，我没有收到任何错误，并且一切正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T14:39:32.057

似乎 PnP 家伙在他们的设计中忽略了这一点：[http](http://webclientguidance.codeplex.com/workitem/15451) ://webclientguidance.codeplex.com/workitem/15451 。

此处提供了一种可能的解决方法：http: [//msmvps.com/blogs/paulomorgado/archive/2008/03/11/wcsf-2-0-and-iis7-integrated-pipeline-mode.aspx](http://msmvps.com/blogs/paulomorgado/archive/2008/03/11/wcsf-2-0-and-iis7-integrated-pipeline-mode.aspx)

# scala - 在 Play! 中将 Seq[(String,String)] 转换为查询参数字符串！2.0？

> ID：15671212
> 
> 赞同：1
> 
> 时间：2013-03-27T23:02:09.747
> 
> 标签：scala, playframework-2.0

需要对我的查询参数进行 MD5 哈希处理！2.0 网络服务请求。这是我用来处理散列的骨架方法：

```
 def API_SIG(params: Seq[(String,String)]) = {
    val hashParams = params.sortBy(_._1) :+ ("api_secret",API_SECRET)
    getMD5Hash(hashParams.toStringWhateverNativeMethod)
  } 
```

这`Seq[(String,String)]`是将一系列查询参数传递给 Play 的正确类型！网络服务。对于上下文：

```
 val requestParams = Seq() // nothing here, yet
  val finalParams = Seq(("api_key",API_KEY)) ++ requestParams
  val sigParams = requestParams :+ ("api_secret",API_SECRET)
  val signature = ("sig" -> API_SIG(params))
  val finalQueries = Seq(sigParam) ++ finalParams

  val request = 
    WS
    .url(requestUri)
    .withQueryString(finalQueries:_*) 
```

回顾一下：我基本上需要将 转换`Seq[(String,String)]`为查询参数字符串，例如`param=value&more=better&etc=keepsgoing`. 不确定是否播放！有一个本机方法，或者如果有人知道这样做的简单方法。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:28:44.100

在 Play 2.0 中没有方便的方法。但是，这是他们在自己的源代码中执行此操作的方式：

```
params.map(pair => pair._1 + "=" + URLEncoder.encode(pair._2, "UTF-8")).mkString("&") 
```

（更改了变量名称并删除了不必要的部分）。

对于更高级的选项，您还可以在 Apache HttpClient 中使用[URLEncodedUtils 。](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html)

# c++ - 什么时候使用虚函数而不是覆盖在 C++ 中最有利，反之亦然

> ID：15671217
> 
> 赞同：-4
> 
> 时间：2013-03-27T23:02:31.840
> 
> 标签：c++, overriding

我对 C++ 相当陌生，我很好奇什么时候是最有利的时间使用虚函数而不是仅仅使用覆盖，反之亦然？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:11:02.003

当您在基类中将函数定义为虚函数时，您向编译器指示您希望派生类中的函数运行，即使您使用的是对基类的引用。这会导致运行时决策。

如果基类函数不是虚拟的，那么运行哪个函数取决于引用。这是一个编译时决定。

虚函数用于在面向对象的设计中实现多态性。通常，当派生类中有同名函数时，未能将基类中的函数标记为虚拟函数是一个错误。这就是为什么大多数编译器会将其标记为警告的原因。

# php - mysqli连接php媒体寺

> ID：15671220
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:02:46.840
> 
> 标签：php, mysqli, mediatemple

我来自 mysql_select_db 背景，需要使用 mysqli。

我在将 mysqli 连接到我在 Media Temple 的数据库时遇到问题。**我已通过 MT 服务器上的 php myAdmin 连接确认连接信息正确。**（下面用 000000 代替）。

我的代码：

```
$mysqli = new mysqli("internal-db.000000.gridserver.com", "db000000", "password", "db000000_dbName");
$result = $mysqli->query("select * from 'users'"); 
$row = $result->fetch_assoc();
echo htmlentities($row['fieldName']); 
```

我收到以下错误：

```
Warning: mysqli::mysqli() [mysqli.mysqli]: (HY000/2003): Can't connect to MySQL server on 'internal-db.000000.gridserver.com' (61) 

Warning: mysqli::query() [mysqli.query]: Couldn't fetch mysqli //this is because of the bad connection

Fatal error: Call to a member function fetch_assoc() on a non-object //this is because of the bad connection 
```

这是 MT 网站上的链接：http: [//kb.mediatemple.net/questions/4/Why+can%27t+I+connect+to+my+MySQL+database+from+PHP%3F#gs](http://kb.mediatemple.net/questions/4/Why+can%27t+I+connect+to+my+MySQL+database+from+PHP%3F#gs)

我在这里想念什么？谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:06:27.927

服务器地址有这种格式吗？

`internal-db.000000.gridserver.com`?

如果您执行 ping`internal-db.000000.gridserver.com`操作，您会获得 IP 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:23:20.640

没有为主机建立连接。如果此脚本与数据库在同一主机上运行，​​则只需使用*localhost*而不是完全限定的主机名。对于用户名或远程访问权限问题，错误消息会有所不同。这看起来更像是网络（防火墙）类型的问题。

# ruby-on-rails - 铁轨跑步者不运行

> ID：15671229
> 
> 赞同：0
> 
> 时间：2013-03-27T23:03:14.177
> 
> 标签：ruby-on-rails

我在跑：`script/runner -e production MyModel.delay.capture_authorizations`

但是，我不认为它正在运行。我的模型函数已`capture_authorizations`定义：

```
def capture_authorizations
  puts 'whatever'
  File.open('/root/lograils', 'a') {|f| f.write("STUFF") }
end 
```

然而，这似乎没有做任何事情。当我运行该命令时，它什么也不显示，也没有写入该文件。

另外，我已经`chmod 777`从文件中删除了废话`/root/lograils`，所以它绝对是可写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T15:04:05.790

[吉姆·斯图尔特](https://stackoverflow.com/users/719547/jim-stewart)帮助他发表评论。我拿出了`.delay`，一切顺利。谢谢！

# c# - WPF 数据绑定组合框 <-> 应用程序设置

> ID：15671233
> 
> 赞同：0
> 
> 时间：2013-03-27T23:03:28.687
> 
> 标签：c#, data-binding, combobox, settings, application-settings

对于我的 wpfapplication，我添加了一个设置文件，其中包含一个颜色作为设置：

我的设置.settings

```
Name      Type                         Value
myColor   System.Windows.Media.Color   #FFFFFF 
```

所以我的自动生成的代码看起来像：

MySettings.Desinger.cs

```
 [global::System.Configuration.UserScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Configuration.DefaultSettingValueAttribute("#FFFFFFFF")]
    public global::System.Windows.Media.Color myColor {
        get {
            return ((global::System.Windows.Media.Color)(this["myColor"]));
        }
        set {
            this["myColor"] = value;
        }
    } 
```

我想在配置窗口上设置这个值。这是我的 xaml 代码：

配置窗口.xaml

```
<Window x:Class="myApp.configWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:properties="clr-namespace:myApp.Properties"
    xmlns:converter="clr-namespace:myApp.Converter"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"      
    Title="myApp" Height="557" Width="626">
<Window.Resources>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    <converter:myColorConverter x:Key="ColorConverter"/>
    <properties:MySettings x:Key="config"/>
    <ObjectDataProvider ObjectInstance="{x:Type Colors}" MethodName="GetProperties" x:Key="colorPropertiesOdp" />
</Window.Resources>
<Grid Height="524" Width="615" DataContext="{StaticResource config}">
    <TabControl Height="508" HorizontalAlignment="Left" Name="tabControl1" VerticalAlignment="Top" Width="616" BorderThickness="0" Margin="1,11,0,0">
        <TabItem Header="options" Name="tabItemOptions">
            <Grid Height="484">
                <GroupBoxHeight="330" Margin="6,149,15,0" Name="groupBox2" >
                    <Grid Height="313">
                        <ComboBox x:Name="comboBoxMyColor" Height="23" HorizontalAlignment="Left" Margin="302,34,0,0" VerticalAlignment="Top" Width="120" ItemsSource="{Binding Source={StaticResource colorPropertiesOdp}}" SelectedItem="{Binding Path=Default.myColor, Converter={StaticResource ColorConverter}, Mode=TwoWay}">
                            <ComboBox.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <Label Background="{Binding Path=Name}" Content="{Binding Path=Name}" Height="{Binding ActualHeight, ElementName=comboBoxNotificationColor}" Width="{Binding ActualWidth, ElementName=comboBoxNotificationColor}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ComboBox.ItemTemplate>
                        </ComboBox>
                    </Grid>
                </GroupBox>
            </Grid>
        </TabItem>
    </TabControl>
</Grid> 
```

但是如果我尝试改变颜色，我可以在组合框上选择一个值（例如“白色”），但配置永远不会改变。当我在 上设置断点时`MySettings.Desinger.cs -> myCOlor -> set { ... }`，它永远不会到达。我的错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:55:23.627

在我看来，您缺少 INotifyPropertyChanged 。

没有它，当您从 ui 更改某些内容时，您的模型或视图模型无法通知。

此处的相关信息：[WPF-INotifyPropertyChanged](http://www.codeproject.com/Articles/41817/Implementing-INotifyPropertyChanged)

# javascript - 尝试获取标签名称但不工作

> ID：15671235
> 
> 赞同：-2
> 
> 时间：2013-03-27T23:03:33.310
> 
> 标签：javascript, ajax, jquery

我有两个不同的页面，mouth.html 和nose.html。我想从mouth.html 中得到一个名字。所以当用户访问nose.html时，它会在nose.html中打印出来自mouth.html的地名。我怎样才能在 Javascript 中做到这一点？

这是mouth.html 中的代码

```
 <h1 class="man" style="clear:both;">{{ moot.name }}</h1> 
```

在nose.html中，我试过了，但它不起作用

```
<script language="javascript">
   $("h1.man").load("mouth.html",function(data){
       var value=$(data).find("h1.man").attr("man")
   });

</script> 
```

nose.html 中的完整代码

```
 <head> 
   <script language="javascript">
       $.get( 'mouth.html', function( data ) {
        var mootName = $(data).text();
      // Do something with mootName here
      alert(mootName);
   });
    </script>
  </head>
  <body>
  <form action="." method="POST">
{% csrf_token %}

    <div class="post-fed">
<p><label for="id_event_date">Event date:</label><input type="text" name="event_date" id="id_event_date" /><span class="helptext">E.g 2012-01-00.YYYY/MM/DD</span></p>
<p><label for="id_end_date">End date:</label><input type="text" name="end_date" id="id_end_date" /><span class="helptext">E.g. 2012-01-00.YYYY/MM/DD</span></p>
<p><label for="id_event_information">Event information:</label><textarea id="id_event_information" rows="10" cols="40" name="event_information"></textarea><span class="helptext"> E.g. eating etc</span></p>
<p><label for="id_full_name">Full name:</label><input id="id_full_name" type="text" name="full_name" maxlength="100" /></p>
<p><label for="id_e_mail">Email:</label></th><td><input id="id_e_mail" type="text" name="e_mail" maxlength="100" /></p>
<p><label for="id_phone_no">Phone no:</label></th><td><input id="id_phone_no" type="text" name="phone_no" maxlength="100" /></p>
<input type="submit"  class="put" value="Send"/> 

</form>  
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:06:11.203

您可以像这样直接加载元素：

```
$('h1.man').load('mouth.html h1.man'); 
```

见[http://api.jquery.com/load/](http://api.jquery.com/load/)

**编辑：**

正如 MichaelGeary 指出的那样，这也会复制元素，这是不可取的 ( `<h1><h1></h1></h1>`)。这会更好：

```
$.get('mouth.html', function(data) {
    var newText = $(data).find('h1.man').text();
    $('h1').text(newText);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:06:57.893

`.find`只会匹配*后代*节点，您`h1`位于树的顶部。您可以使用`.filter('h1.man')`来获取匹配的顶级节点。

但是，请注意，对于刚刚插入的每个顶级元素（传入该节点`this`），回调将被调用一次，因此如果`<h1>`确实是您的顶级节点，您可以使用：

```
var value = $(this).attr(...); 
```

这比`$(data)`使用 HTML 字符串调用更有效，因为这`$(data)`只会创建下载内容的*另一个*内存副本。

如果我正确理解文档，您还需要调用现有元素`.load()`的*父*`h1.man`元素，因为`.load()`会将加载的 HTML*插入*指定元素（替换现有内容）而不是替换最初指定的元素。

这也意味着这个父元素必须*只*包含`h1.man`元素，这表明您需要的是 HTML，因此：

```
<div id="h1_man_cont"><h1 class="man"> ... </h1></div> 
```

和JS：

```
$('#h1_cont_man').load('mouth.html', function(data) {
    var value = $(this).attr(...);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:26:42.270

正如您从这里的各种答案和评论中看到的那样，我们都对您正在尝试做的事情感到有些困惑。所以让我把它分成两个独立的问题，我们可以分别看每个问题。

第一个问题更清楚一点。您想获取其中的内容`mouth.html`并从中获取一些数据。`mouth.html`是从此 Django 模板生成的文件：

```
<h1 class="man" style="clear:both;">{{ moot.name }}</h1> 
```

这就是整个模板；没有`<html>`或`<body>`没有其他任何东西。

因此，例如，如果您的 Python 变量`moot.name`是“Mike”，那么 的全部内容`mouth.html`将是：

```
<h1 class="man" style="clear:both;">Mike</h1> 
```

现在我们要加载这个文件并从中获取“Mike”（或其他）。我们可以这样做：

```
$.get( 'mouth.html', function( data ) {
    var mootName = $(data).text();
    // Do something with mootName here
}); 
```

这是如何工作的：`$(data)`将整个`<h1>`标签作为 jQuery 对象提供给您，然后`.text()`从中获取内部文本内容。

现在对于下一部分，如何处理该名称？您必须弄清楚这一点，或者更详细地描述您想要做什么，因为那部分还不清楚。

# asp.net-mvc - 编辑模式下的 MVC 日期格式问题

> ID：15671244
> 
> 赞同：0
> 
> 时间：2013-03-27T23:04:07.937
> 
> 标签：asp.net-mvc

我目前正在尝试在我的 ASP.NET MVC 应用程序中设置日期格式。

我正在使用以下代码来完成此操作

**模型：**

```
[DataType(DataType.Date), DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode=true)]
public Nullable<System.DateTime> Date_Of_Birth { get; set; } 
```

**看法：**

```
<div class="editor-field">
            @Html.EditorFor(model => model.Date_Of_Birth)
            @Html.ValidationMessageFor(model => model.Date_Of_Birth)
        </div> 
```

这在“详细信息”模式下按预期工作。但是，当我进入“编辑”模式时，该字段显示如下

![在此处输入图像描述](../Images/8f95dff9ae640215a502718d0dd07069.png)

所需的日期格式以及看起来像默认日期选择器的内容出现在文本框中。这显然不是我想要的。我只是希望日期的格式正确。我还计划使用 jQuery 日期选择器，所以我也不想使用默认日期选择器。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:11:01.613

最直接的解决方案（假设您想让日期的所有编辑字段看起来都一样）是替换`Html.EditorFor()`类型对象的模板`DateTime`。这样您就可以在模板本身中构建您想要的任何行为，从而也将视图逻辑保留在视图层中。

做到这一点的基本方法是创建一个名为`DateTime.cshtml`（我认为 - 这是`DateTime.ascx`在使用 WebForms 视图引擎时，但您正在使用 Razor...）并将其放在`~/Views/Shared/EditTemplates`.

布拉德威尔逊[在他的博客上有一个很好的指南](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)，我强烈建议你去看看。

# doctrine-orm - Doctrine 2 - 如何从主树类型实体设计具有子树类型属性的实体

> ID：15671251
> 
> 赞同：2
> 
> 时间：2013-03-27T23:04:48.113
> 
> 标签：doctrine-orm, tree-structure

我有一个具有一对多类别的主要实体段，并且类别具有一对多项目，所以 3 级树结构

```
class Segment
{

    /**
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\OneToMany(targetEntity="Category", mappedBy="segment")
     * @ORM\JoinColumn(name="segment_id", referencedColumnName="id")
     */
    protected $categories;
}  

class Category
{

    /**
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Segment")
     * @ORM\JoinColumn(name="segment_id", referencedColumnName="id")
     */
    protected $segment;

    /**
     * @ORM\OneToMany(targetEntity="Item", mappedBy="category")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $items;
}

class Item
{

    /**
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Category")
     * @ORM\JoinColumn(name="category_id", referencedColumnName="id")
     */
    protected $category;
} 
```

SQL 表

```
CREATE TABLE segment (
    id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    name VARCHAR(100) NOT NULL,
)

CREATE TABLE segment_category 
(
    id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    segment_id INT NOT NULL,
    name VARCHAR(100) NOT NULL,
    FOREIGN KEY(segment_id) REFERENCES segment(id)
)
CREATE TABLE segment_item 
(
    id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    category_id INT NOT NULL,
    name VARCHAR(100) NOT NULL,
    FOREIGN KEY(category_id) REFERENCES segment_category(id)
) 
```

这是我的实体公司，它有来自细分市场的细分市场

```
class Company
{
    /**
     * @ORM\Id
     */
    protected $id;

    /**
     * @ORM\ManyToMany(targetEntity="Segment")
     * -- What here to add? Is this correct ?--
     * @ORM\JoinTable(name="company_segment_linker",
     *      joinColumns={@ORM\JoinColumn(name="company_id", referencedColumnName="id")},
     *      inverseJoinColumns={@ORM\JoinColumn(name="item_id", referencedColumnName="id")}
     * )
     */
    protected $segments;
} 
```

确定哪个段（也包括类别和项目）属于公司的公司 SQL 表。

```
CREATE TABLE company_segment_linker 
(
    company_id INT NOT NULL,
    item_id INT NOT NULL,
    FOREIGN KEY(company_id) REFERENCES company(id),
    FOREIGN KEY(item_id) REFERENCES segment_item(id)
) 
```

Segment数据结构示例（数字代表ID）：

1.  段1
    1.  猫1
        1.  项目1
        2.  项目2
        3.  第 3 项
    2.  猫2
        1.  第 4 项
        2.  项目5
2.  段2
    1.  三类
        1.  第 6 项
    2.  第四类
        1.  第 7 项
        2.  第8项

公司 com1 的子部门如下：

1.  段1
    1.  猫1
        1.  项目2
        2.  第 3 项
    2.  猫2
        1.  项目5
2.  段2
    1.  第四类
        1.  第8项

所以我只会在 company_segment_linker 表
company_id |中存储公司 fk_id 和项目 fk_ids item_id
1 | 2
1 | 3
1 | 5
1 | 8
因为从项目表我可以参考类别和从类别表到段。

我的问题是，这在 Doctrine2 中是否有可能仅从项目外键创建子段，如果是，如何编写注释？还是我必须使用另一种方法来实现这一目标？谢谢你的帮助。PS：对不起我的英语：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T15:42:50.367

对于您的 Category 类，您可以使用 OneToMony 自引用关联，如下所示：

```
/**
 * Category
 *
 * @ORM\Table(name="category")
 * @ORM\Entity(repositoryClass="Category\Entity\Repository\CategoryRepository")
 */

class Category 

{
/**
* @var Integer
* @ORM\Column(name="id", type="integer")
* @ORM\Id
* @ORM\GeneratedValue(strategy="IDENTITY")
*/
private $id;

/**
 *@var String
 *@ORM\Column(name="cat_name", type="string", length=60, nullable=false)
 * 
 */
private $name;

/**
 * @ORM\OneToMany(targetEntity="Category\Entity\Category", mappedBy="parent")
 **/

private $children;

/**
 *  @ORM\ManyToOne(targetEntity="Category\Entity\Category", inversedBy="children")
 *  @ORM\JoinColumn(name="parent_id", referencedColumnName="id", unique=false, nullable=true)
 **/
private $parent;

public function __construct() {

    $this->children = new \Doctrine\Common\Collections\ArrayCollection();

} 
```

这会为您创建一个表，然后您通过此 DQL 获取您的树：

```
 $ql="SELECT  ca.name, c.name AS child_name FROM Category\Entity\Category ca LEFT JOIN ca.children c WHERE ca.parent IS NULL";
    $query = $em->createQuery($ql);
  $categories = $query->getResult(); 
```

# c# - 在文本框中添加控件？

> ID：15671253
> 
> 赞同：1
> 
> 时间：2013-03-27T23:05:02.930
> 
> 标签：c#, wpf, xaml, textbox

我正在尝试制作一个模拟常规文本框但有标签的用户控件。类似这样的东西：

![在此处输入图像描述](../Images/5def9ba9eca9b20482af3191cc31575b.png)

但我遇到了麻烦......我试图这样做：

```
<TextBox> 
    <Border/>
</TextBox> 
```

但这行不通。如果不使用richTextBox，我将如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:35:16.783

TextBox 不是容器，因此没有子级。也许尝试将 TextBox 包装在容器对象中？

一些示例代码可以帮助您入门：

```
 <Border Grid.Row="0" BorderBrush="#FF808080" Background="#FFFFFFFF" >
        <DockPanel>
            <ItemsControl DockPanel.Dock="Left" ItemsSource="{Binding Tags}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#FF000000" BorderThickness="1" Margin="3">
                            <DockPanel>
                                <Button DockPanel.Dock="Right" Content="X" />
                                <TextBlock Text="{Binding}" Margin="3" />
                            </DockPanel>
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <TextBox BorderThickness="0" Text="{Binding Text}" VerticalContentAlignment="Center" />
        </DockPanel>
    </Border> 
```

重新设计和重新绑定最适合您的解决方案。

# c++ - C++：在抛出 'std::bad_alloc' 的实例后调用终止

> ID：15671255
> 
> 赞同：9
> 
> 时间：2013-03-27T23:05:12.373
> 
> 标签：c++, runtime-error

我正在实现一个双向链表类，它存储“桶”（节点），每个都包含预定义数量的字符。每个bucket存储一个指向下一个和前一个bucket的指针，list类（BucketString）存储一个指向head Bucket的指针。我正在使用抛出错误的 g++ 进行编译

```
terminate called after throwing an instance of 'std::bad_alloc'
  what(): std::bad_alloc
make: *** [run] Aborted (core dumped) 
```

每当我运行代码并将字符串添加到列表中时，使用以下添加方法，该方法包含在我的存储桶类中，并在需要时从列表类自己的方法中调用。

代码：

```
std::size_t bucketSizeB;
int filled;
char* str;
Bucket* next;
Bucket* prev;

Bucket::Bucket() : bucketSizeB(7), str(new char[7]), next(NULL), prev(NULL), filled(0)
{}

Bucket::Bucket(std::size_t bucketSizeB_) : bucketSizeB(bucketSizeB_), str(new char[bucketSizeB]), next(NULL), prev (NULL), filled(0)
{}

Bucket::Bucket(const Bucket& rhs) : bucketSizeB(rhs.bucketSizeB), next(rhs.next), prev(rhs.prev), filled(rhs.filled)
{
    for (int i = 0 ; i < (int) bucketSizeB ; i++)
    {
        str[i] = rhs.str[i];
    }
}

void Bucket::add(std::string line)
{

    int diff = bucketSizeB - filled;    //if the bucket is already partially filled

    std::string tmp = line.substr(0, diff);

    for (std::size_t i = 0 ; i < tmp.length() ; i++)
    {

        str[filled] = line[i];
        ++filled;
    }

    if (line.length() > bucketSizeB)
    {

        next = new Bucket(bucketSizeB);

        next->prev = this;
        next->add(line.substr(diff, line.length()-diff));
    }
}
Bucket::~Bucket()
{
    if (prev)
    {
        if (next)
        {
            prev->next = next;
        }
        else
        {
            prev->next = NULL;
        }
    }
    if (next)
    {
        if (prev)
        {
            next->prev = prev;
        }
        else
        {
            next->prev = NULL;
        }
    }
    delete [] Bucket::str;
} 
```

抛出错误时，正在从“list”类成员方法 append 调用 add 方法，其工作原理如下：

```
void BucketString::append (std::string& line)
{
    length += line.length();    //Just a way to store the length of the string stored in this BucketString object

    if (!head)   //If the head node pointer is currently null, create a new head pointer
    {

        head = new Bucket(bucketSize);
    }

    Bucket* tmp = head;

    while (tmp->next)   //Finds the tail node
    {
        tmp = tmp->next;
    }
    tmp->add(line);   //Calls the Bucket add function on the tail node
} 
```

桶类的头文件是：

```
#include <cstddef>
#include <string>
#include <iostream>

#ifndef BUCKET_H_
#define BUCKET_H_

namespace RBNWES001
{
class Bucket
{

    public:
        //Special members and overloaded constructor
        Bucket(void);
        Bucket(std::size_t);
        Bucket(const Bucket&);
        ~Bucket();
        //Copy Assignment not included because it's not needed, I'm the only one who is gonna use this code! :)

        //Add method
        void add(std::string);

        int filled;
        char* str;
        Bucket* next;
        Bucket* prev;
        std::size_t bucketSizeB;
};
}

#endif 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:10:32.853

1）您可以使用 try/catch 块来防止终止。

2）听起来好像是在您执行程序时发生的。听起来“make”也会自动执行程序。正确的？

3）如果是这样，您想查看调试器并确定它崩溃的确切行。

4) 我怀疑如果您跟踪代码，您会发现“diff”、“bucketSizeB”和/或“已填充”中的一个或多个变得非常大（或负数）。这将是一个错误:) 您可以轻松修复它 - 一旦您找到它。

5）如果这对您来说是一个方便的调试器，这里有一些很好的 GDB 教程：

[http://dirac.org/linux/gdb/](http://dirac.org/linux/gdb/)

[http://www.cs.cmu.edu/~gilpin/tutorial/](http://www.cs.cmu.edu/~gilpin/tutorial/)

[http://www.cprogramming.com/gdbtutorial.html](http://www.cprogramming.com/gdbtutorial.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-28T01:44:06.287

这有效：在我的`Bucket(std::size_t bucketSizeB)`构造函数中，初始化程序`str`应该从更改`str(new char[bucketSizeB]`为`str(new char[bucketSizeB_])`（即使用传递给 cosntructor 的参数而不是使用 bucketSizeB 变量）。

# ios - 在这样的 UILabel 中获得一个正常的 unicode 向下箭头⬇

> ID：15671256
> 
> 赞同：8
> 
> 时间：2013-03-27T23:05:13.130
> 
> 标签：ios, objective-c, unicode, ios6, uilabel

我想在 UILabel 中显示一个向下箭头。特别是 ⬇ Unicode：U+2B07。这是在列标题上显示排序顺序。

我已经看到了让 unicode 字符显示的代码，当我将它用于上面的符号时，它没有按预期显示，而是出现了一个带有光泽的蓝色向下箭头。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-28T01:34:58.553

将某些字符显示为“表情符号”是一个功能，例如（有争议的）在此处讨论：[https](https://devforums.apple.com/message/487463#487463) ://devforums.apple.com/message/487463#487463 （需要 Apple 开发人员登录）。此功能是在 iOS 6 中引入的。

一种解决方案（来自[https://stackoverflow.com/a/13836045/1187415](https://stackoverflow.com/a/13836045/1187415)）是附加 Unicode“变体选择器”U+FE0E，例如

```
self.myLabel.text = @"\u2B07\uFE0E";
// or:
self.myLabel.text = @"⬇\uFE0E"; 
```

请注意，在 iOS <= 5.x 上，Variation 选择器不是必需的，也*不能使用*，因为 iOS 5 会将其显示为一个框。

在*Swift*中它会是

```
myLabel.text = "⬇\u{FE0E}" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-27T23:11:27.563

如果您看到带有光泽的蓝色箭头，则说明您的角色是正确的，但它显示的是表情符号风格的角色之一。尝试将您的字体更改为`UILabel`Arial Unicode MS 之类的字体。

**编辑**经过一些测试，看起来更改字体实际上不起作用。它一直显示光泽箭头。最好采用其他答案的建议并使用不同的字形，例如[`\u2193`](http://www.fileformat.info/info/unicode/char/2193/index.htm)，这确实有效：

```
[nameLabel setText:@"\u2193"]; 
```

![在此处输入图像描述](../Images/45f6ba9b9d3c1aac438d0aa19a58db32.png)

# twitter-bootstrap - 简单的 twitter bootstrap 流体布局 span5 != span5

> ID：15671269
> 
> 赞同：0
> 
> 时间：2013-03-27T23:06:32.957
> 
> 标签：twitter-bootstrap

我有以下示例，其中底部的最后两段是 span5，但不匹配它们上方的 span 10，也不匹配 span10 以上的 span5。

[http://jsfiddle.net/MgcDU/2959/](http://jsfiddle.net/MgcDU/2959/)

添加代码片段，以便stackoverflow让我发布（多么愚蠢）....stackoverflow实际上错误说必须在此处粘贴jsfiddle代码，这对我来说似乎很愚蠢，因为它里面有很多文本。

```
<div class="row-fluid"> 
```

知道如何解决这个问题吗？

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:12:09.790

使用 row-fluid 时，内容必须加起来为 12。

[http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)

```
<div class="row-fluid">
  <div class="span12">
    Fluid 12
    <div class="row-fluid">
      <div class="span6">
        Fluid 6
        <div class="row-fluid">
          <div class="span6">Fluid 6</div>
          <div class="span6">Fluid 6</div>
        </div>
      </div>
      <div class="span6">Fluid 6</div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:16:34.283

来自[twitter 引导文档](http://twitter.github.com/bootstrap/scaffolding.html#fluidGridSystem)：

流体网格以不同的方式使用嵌套：每个嵌套级别的列**最多应添加 12 列**。这是因为流体网格使用百分比而不是像素来设置宽度。

# ruby-on-rails - 验证失败时 ActiveRecord 是否允许强制保存？

> ID：15671270
> 
> 赞同：1
> 
> 时间：2013-03-27T23:06:42.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

即使验证失败，是否仍然强制 AR 保存模型更改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T23:08:31.617

是的，对于带有以下功能的 Rails 3+：

```
.save(:validate => false) 
```

对于 Rails 2.3

```
.save(false) 
```

# matlab - 返回值列表中的某些元素未定义

> ID：15671275
> 
> 赞同：0
> 
> 时间：2013-03-27T23:06:59.950
> 
> 标签：matlab, octave

我正在使用矩阵，我正在尝试根据其他矩阵中的值获取文件和列

值矩阵是：

```
matriz = [ 
        '1' '2' '3'; 
        '4' '5' '6'; 
        '7' '8' '9'; 
        '10' '11' '12' 
]; 
```

我创建了一个方法，它应该返回文件和列。

```
function  coordenada=getCoordenadas( casilla  )
contador =0;

for fila=1:4
     for columna=1:3
        contador = contador +1;
        if ( contador == casilla )
             x=fila;
             y=columna;
             cordenada = struct( 'x',fila,'y',columna );
             return 
        end %end if
     end    %end for columna
end%end for fila    
cordenada = struct( 'x',-1,'y',-1);

end 
```

如果我要使用函数 getCoordenadas( 1 ); 但我错了

***“警告：getCoordenadas：返回值列表中的某些元素未定义 d”***

是什么问题，怎么解决？

咳咳！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:11:40.123

您的函数返回一个名为`coordenada`（两个“o”）的变量，但您将返回值分配给另一个名为`cordenada`（一个“o”）的变量。

使这两个变量具有相同的名称以更正错误。

# .htaccess - htaccess 和带有“-”的名称

> ID：15671276
> 
> 赞同：1
> 
> 时间：2013-03-27T23:07:00.630
> 
> 标签：.htaccess, mod-rewrite

我想在 htaccess 中重定向到 MYSITE/ 之后的所有内容，例如：

MYSITE/web-developer/ -> MYSITE/c.php?n=web-developer

我测试了这个：

```
RewriteRule ^(.*)/$ http://MYSITE/c.php?n=$1 [L] 
```

它适用于没有 - （或符号）的名称，例如：开发人员，但不适用于包含 - 的名称，它会将我重定向到 web-developer/index.php

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:42:31.583

这与名称无关`-`。你的规则完美无缺。

但是您可能在`web-developer`目录中有一个 .htaccess，它有自己的重写规则，这会阻止`RewriteRule`触发。

# visual-c++ - 链接：致命错误 LNK1104：无法打开文件 'd3dxof.lib dxguid.lib d3d9.lib、d3dx9.lib、winmm.lib'

> ID：15671283
> 
> 赞同：0
> 
> 时间：2013-03-27T23:07:50.203
> 
> 标签：visual-c++

lib `dxguid.lib` `d3d9.lib`, `d3dx9.lib`,`winmm.lib`在链接器中并添加了 DirectX Sdk 目录，所以这应该可以工作，但不能:(

我不断收到此错误：

```
LINK : fatal error LNK1104: cannot open file 'd3dxof.lib dxguid.lib d3d9.lib, d3dx9.lib, winmm.lib' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T07:33:53.593

这有点晚了，但也许它可以帮助某人。转到您的项目属性并在“链接器”选项卡中添加“其他库目录”中的 Lib 文件夹，该文件夹位于您的 SDK 内

# javascript - 使用箭头键在 4x4 网格中导航？

> ID：15671287
> 
> 赞同：0
> 
> 时间：2013-03-27T23:08:02.030
> 
> 标签：javascript, navigation

我已在此处阅读此答案[Guide for writing arrowkey navigation on focusable elements？](https://stackoverflow.com/questions/15461520/guide-for-writing-arrowkey-navigation-on-focusable-elements?answertab=votes#tab-top)但对于像我这样的新手来说，它还不够详细。

我需要这样的东西，我的 DOM 中有一个带有 div 的 4x4 网格。我希望能够在选择器周围移动，然后能够通过 enter 选择焦点 div。

编辑：粘贴一些代码，

当我意识到自己完全走错了路时，这就是我正在尝试的：

```
function arrowKeys(input){
    var keyCode = input.keyCode;
    var border = document.getElementById(keyid);
    var removeBorder = border.removeAttribute("style");

    if(keyCode == 38 || keyCode == 39 || keyCode == 40 || keyCode == 37){
        var addborder = border.setAttribute("style", "border:2px solid red");
        border.addborder;
        if(keyCode == 38){
            removeBorder;
            keyid = keyid - 4;
            border.addborder;
            console.log(keyid + " upp");
        }
        if (keyCode == 39){
            removeBorder;
            keyid++;
            border.addborder;
            console.log(keyid + " right");
        }
        if(keyCode == 40){      // right arrowkey
            removeBorder;   
            keyid = keyid + 4;
            border.addborder;
            console.log(keyid + " down");
        }
        if (keyCode == 37){     // left arrowkey
            removeBorder;
            keyid--;
            border.addborder;
            console.log(keyid + " left");
        }
    }
} 
```

我想你需要在这样的行上使用一个数组，

```
var navigationMap = [[1,2,3,4][5,6,7,8][9,10,11,12][13,14,15,16]]; 
```

但是我一直卡在那里..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:12:46.120

Here's a way to do this using plain javascript. The first part of the code is some cross browser functions to add event handlers and add/remove classes. You'll notice that I add/remove a class to show the active item rather than directly adding/removing a style. This puts the style in the CSS rather than in the javascript which is generally a good idea.

Working demo: [http://jsfiddle.net/jfriend00/yMMxX/](http://jsfiddle.net/jfriend00/yMMxX/)

```
(function() {
    // refined add event cross browser
    function addEvent(elem, event, fn) {
        if (typeof elem === "string") {
            elem = document.getElementById(elem);
        }

        // avoid memory overhead of new anonymous functions for every event handler that's installed
        // by using local functions
        function listenHandler(e) {
            var ret = fn.apply(this, arguments);
            if (ret === false) {
                e.stopPropagation();
                e.preventDefault();
            }
            return(ret);
        }

        function attachHandler() {
            // set the this pointer same as addEventListener when fn is called
            // and make sure the event is passed to the fn also so that works the same too
            var ret = fn.call(elem, window.event);   
            if (ret === false) {
                window.event.returnValue = false;
                window.event.cancelBubble = true;
            }
            return(ret);
        }

        if (elem.addEventListener) {
            elem.addEventListener(event, listenHandler, false);
        } else {
            elem.attachEvent("on" + event, attachHandler);
        }
    }

    function addClass(elem, cls) {
        var oldCls = elem.className;
        if (oldCls) {
            oldCls += " ";
        }
        elem.className = oldCls + cls;
    }

    function removeClass(elem, cls) {
        var str = " " + elem.className + " ";
        elem.className = str.replace(" " + cls + " ", " ").replace(/^\s+|\s+$/g, "");
    }

    function findItem(items, target) {
        for (var i = 0; i < items.length; i++) {
            if (items[i] === target) {
                return(i);
            }
        }
        return(-1);
    }

    var keys = {up: 38, down: 40, left: 37, right: 39};
    var cards = document.getElementById("game-board").getElementsByClassName("card");
    addEvent(document, "keydown", function(e) { 
        // get key press in cross browser way
        var code = e.which || e.keyCode;
        // number of items across
        var width = 4;
        var increment, index, newIndex, active;

        switch(code) {
            case keys.up:
                increment = -width;
                break;
            case keys.down:
                increment = width;
                break;
            case keys.left:
                increment = -1;
                break;
            case keys.right:
                increment = 1;
                break;
            default:
                increment = 0;
                break;
        }
        if (increment !== 0) {
            active = document.getElementById("game-board").getElementsByClassName("active")[0];
            index = findItem(cards, active);
            newIndex = index + increment;
            if (newIndex >= 0 && newIndex < cards.length) {
                removeClass(active, "active");
                addClass(cards[newIndex], "active");
            }
            // prevent default handling of up, down, left, right keys
            return false;
        }
    });
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:18:52.737

我已经用 jQuery 做到了这一点。您可以使用以下方式连接到事件：

```
 $(".some-css-class-on-your-divs").keydown(function (e)
  {
    HandleKeyDown(e, $(this));
  }) 
```

然后用另一个 javascript 方法处理事件

```
function HandleKeyDown(event, jqNode)
{
  event = event || window.event;
  var charCode = event.charCode || event.keyCode;

  if (charCode == 40)
  { // down arrow key
      ///  do your thing here
  }
   // charcode 38 is up, and so on
} 
```

# javascript - angular-ui select2 标记 - 预选标签 id/文本

> ID：15671288
> 
> 赞同：0
> 
> 时间：2013-03-27T23:08:07.437
> 
> 标签：javascript, angularjs, angular-ui, jquery-select2

这是我的标签输入

```
<input type="hidden" ng-model="tags" class="input-large" ui-select2="{ tags: [{ id:5, text: 'tag1' }, { id: 8, text: 'tag2' }] }" /> 
```

现在我该如何制作，比如说带有 id 5 的标签，在加载时预先选择？

如果我这样做 $scope.tags = [5]; 甚至 $scope.tags = 5 它会创建一个 ID 为 5 和文本为 5 的新标签（尽管它已从选项中删除）。我显然希望它说“tag1”，而不是 5，但仍保留模型中的 ID。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:28:52.030

你展示了什么：

**HTML**

```
<p>
  <input type="text" ng-model="tags" 
         ui-select2="{tags: [{id:4, text:'red'},{id:2, text:'blue'},{id:8, text:'white'},{id:41, text:'green'},{id:13, text:'yellow'}]}" />
</p> 
```

**Angular-UI**

```
angular.module('app').controller('MainCtrl', function($scope) {
  $scope.message = "Will load shortly...";

  $scope.tags = [8, 2];

  $scope.message = 'Loaded';
}); 
```

[http://plnkr.co/edit/wUQq8P?p=preview](http://plnkr.co/edit/wUQq8P?p=preview)

为什么它当时起作用了？我不知道。也许有一个类型或某些东西没有正确加载。我从来没有使用过 Angular 或 Select2，所以我试了几次才让它工作。

唔。好吧，将您的代码按原样复制到 plunk 中，没有其他更改，我得到：

[http://embed.plnkr.co/wUQq8P](http://embed.plnkr.co/wUQq8P)

所以我猜这个问题我要么不理解，要么在你的代码中的其他地方。

这是最初的工作示例，使用一种可以轻松与 AJAX 配对的方法：

**HTML**

```
<body ng-controller="MainCtrl">
  <h4>{{message}}</h4>
  <p>
    <input type="text" ui-select2="options" ng-model="tags" />
  </p>
</body> 
```

**Angular-UI**

```
angular.module('app').controller('MainCtrl', function($scope) {
  $scope.message = "Will load shortly...";

  $scope.options = {
    tags: [
      {id:4, text:'red'},
      {id:2, text:'blue'},
      {id:8, text:'white'},
      {id:41, text:'green'},
      {id:13, text:'yellow'}
    ]
  };

  $scope.tags = [8, 2];

  $scope.message = 'Loaded';
}); 
```

[http://plnkr.co/edit/wUQq8P?p=preview](http://plnkr.co/edit/wUQq8P?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T07:56:48.803

所以问题实际上出在使用的 select2 版本上。我使用的是 3.3.1，它不起作用，请参阅[http://plnkr.co/edit/Z53wvGKT1if1iZAVIerY?p=preview](http://plnkr.co/edit/Z53wvGKT1if1iZAVierY?p=preview)

当我使用 3.3.2 时，它按预期工作。

# iphone - 更改状态栏 Winterboard

> ID：15671293
> 
> 赞同：0
> 
> 时间：2013-03-27T23:08:34.690
> 
> 标签：iphone, ios, themes, jailbreak, statusbar

我正在创建一个新的 Winterboard 主题，并且我想更改 iPhone 上的状态栏……这可以使用 Winterboard 吗？如何？

感谢 Evert de Spiegeleer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T04:16:24.903

Actually, you can, but it's a hack (and apple def. has another, better way of doing it that we don't have access to): Set the status bar to black translucent and have a (sub)view with your wanted color as backgroundcolor directly behind it. That way you can get the effect of a different color, even with a gradient. the frame for that would be `CGRectMake(0,0,320,20)`

# php - PHP SphinxClient 无法获得长时间执行查询结果

> ID：15671295
> 
> 赞同：1
> 
> 时间：2013-03-27T23:08:43.617
> 
> 标签：php, sphinx

我正在尝试获取一些长时间执行的查询的结果。每个查询具有相同的结构：

```
 @CODE (ZZZZZZ|YYYYY...) @FIELD2 YES 
```

每个查询在 70-100 秒内成功完成（我`searchd --console`用来检查它）。但是 PHP 代码停止等待第 60 秒的响应并丢弃一个错误

```
 received zero-sized searchd response 
```

看起来连接断开了？我正在使用常规的 SphinxClient。调用 sphinx 搜索的 PHP 代码如下所示：

```
$this->client->SetServer($this->host, $this->port);
$this->client->SetArrayResult(true);
$this->client->SetWeights(array(100, 1));
$this->client->SetMatchMode($this->mode);
$this->client->SetMaxQueryTime(5000000);
$this->client->SetLimits($this->offset, $this->limit, ($this->limit > 1000) ? $this->limit : 1000);
$this->result = $this->client->Query($this->query, $this->index); 
```

PHP 配置为

```
max_execution_time = 120
max_input_time = 120 
```

这是否可以设置一些系统设置 - 所以脚本将能够等待更长时间的响应？我正在使用 Debian GNU/Linux 5.0.3 Lenny

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T13:07:31.110

您是否尝试过设置 setConnectionTimeout？

[http://sphinxsearch.com/docs/current.html#api-func-setconnecttimeout](http://sphinxsearch.com/docs/current.html#api-func-setconnecttimeout)

* * *

虽然设置 stream_set_timeout 可能会更好 [http://www.php.net/manual/en/function.stream-set-timeout.php](http://www.php.net/manual/en/function.stream-set-timeout.php) 必须热连 sphinxapi.php 才能添加对它的调用。

# java - 如何计算我的链表中有多少个不同的节点？

> ID：15671296
> 
> 赞同：0
> 
> 时间：2013-03-27T23:08:49.550
> 
> 标签：java, collections, linked-list, nodes

我创建了自己的 Node 类和自己的 LinkedList 类，我想构建一个函数来计算 LinkedList 中有多少不同的 Node。

我已尝试使用此代码，但它不起作用：

```
for (int i = 0; i < quantityOfNode(); i++) {
    boolean isDistinct = true;

    for (int j = 0; j < i; j++) {
        if (node.getInfo().equals(node.getNext().getInfo())) {
            isDistinct = false;
        }
    }
    if (isDistinct) {
        nbDistinct++;
    }
    if (node.getNext().getNext() != null) {
        node= node.getNext();
    }
} 
```

例子：

```
 list.add(3);
    list.add(2);
    list.add(5);
    list.add(3);
    list.add(3);
    list.add(8); 
```

这应该给我 4 个不同的节点，但我得到 5 个，因为节点 3 被计算了 2 次

现在我尝试在我的 j 循环中使用第二个节点旅行，对于相同的输入，它现在给我 2 而不是 4

这是我尝试过但仍然无法正常工作的新代码：

```
 for (int i = 0; i < quantityOfNode(); i++) {
            boolean isDistinct = true;
            for (int j = 0; j < i; j++) {
                if (node.getInfo().equals(node2.getInfo())) {
                    isDistinct = false;

                }

                if (node2.getNext() != null) {
                    node2 = node2.getNext();
                }

            }
            if (isDistinct) {
                nbDistinct++;
            }
            if (node.getNext() != null) {
                node= node.getNext();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:15:17.337

你可以使用一个集合。

```
Set set = new HashSet();
Node cur = list.head;
while(cur != null) {
    set.add(cur.getInfo());
    cur = cur.getNext();
}
return set.size(); 
```

这不使用泛型，因为我不知道你有什么类型的 getInfo。

或者，如果您不能使用集合，您应该尝试摆脱您的“索引”变量（i 和 j）。您确实希望将应用程序逻辑集中在您实际拥有的东西上，而不是隐式计算的值。您希望在当前节点变为空时停止，而不是在您前进一定次数时停止。如果这不合逻辑，请告诉我。

对于每个节点，检查它之前的节点以查看该节点是否存在。我每次都从头开始，因为我不知道你是否有双链接。无论哪种方式，它的复杂性都是相同的，但在排序列表上，这不是最优的。

```
Node cur = list.head; // for each node
int nbDistinct = 0;
while(cur != null) { // go until we're out of nodes
    Node check = list.head; // check the first node
    boolean isDistinct = true; // assume distinct
    while(check != cur && isDistinct) { // stop if we found a match OR if our checker caught up to our current node
        isDistinct |= !check.getInfo().equals(cur.getInfo()); // essentially "if(check.getInfo().equals(cur.getInfo()) isDistinct = true;"
        check = check.getNext(); // advance the checker
    }
    if(isDistinct) nbDistinct++;
    cur = cur.getNext(); // advance the current node
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T23:15:31.240

第一个问题：

如果你的 for 循环被写成它不会超过链表的长度：

`for (int i = 0; i < length(); i++) {`

那你为什么需要这个？

```
 if (node.getNext().getNext() != null) {
                node= node.getNext();
            } 
```

特别是，这段代码可能意味着在结束之前的节点被评估两次，因为超出它的节点是`null`. 这不一定会让你的算法出错，但它闻起来很糟糕，我不喜欢它。

第二个问题：

```
 for (int j = 0; j < i; j++) {
                if (node.getInfo().equals(node.getNext().getInfo())) {
                    isDistinct = false;
                }
            } 
```

这是计算重复项的错误方法，因为您没有存储和推进要比较的第二个节点的位置。尝试类似的东西

```
 Node node2 = firstNode(); //idk what method gets the first node :)
            for (int j = 0; j < i; j++) {
                if (node.getInfo().equals(node2.getInfo())) {
                    isDistinct = false;
                    break; //optimization, stop as soon as we find a duplicate
                }
                node2 = node2.GetNext();
            } 
```

最后，**每当遇到无法运行的代码时，请附加一个调试器，单步执行它并注意代码何时没有按照您的预期执行。**这将通过少量观察快速解决所有逻辑错误。即使您无法访问调试器，您也可以使用`print`语句来打印各种变量的值以及某些代码分支何时执行并与您预期的情况进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T23:35:20.923

您的`j`循环没有`node`向前迈进——它总是在比较同一对节点，因此没有任何功能。

你需要类似的东西：

```
...
Node earlierNode = rootNode;
for (int j = 0; j < i; j++) {
    if (earlierNode.getInfo().equals(node.getInfo())) {
        isDistinct = false;
    }
    earlierNode = earlierNode.getNext();
}
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:14:32.040

使用一套

```
Set<Node> mySet = new HashSet<Node>(list);
answer = mySet.size(); 
```

这取决于您在节点类中实现 hashCode 和 equals，或者您可以使用 TreeSet 和 Comparator。

```
Comparator<Node> myComparator = new MyCustomComparator();// you have to define your comparator.
Set<Node> mySet = new TreeSet<Node>(myComparator);
mySet.addAll(list);
answer = mySet.size(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T23:20:39.247

你第一次在`i`循环中你的`j`循环什么都不做（因为它从 0 开始并在`j < i`它不是的时候继续）所以你保持`distinct`设置为真而不将任何东西与任何东西进行比较。

尝试从`i`1 开始。

# visual-studio-2012 - 在文件夹中构建所有解决方案

> ID：15671297
> 
> 赞同：1
> 
> 时间：2013-03-27T23:08:50.673
> 
> 标签：visual-studio-2012, batch-file

我正在尝试创建一个批处理脚本，该脚本将使用 Visual Studio 2012 的 devenv.exe 在文件夹中构建所有 *.sln 文件，但我遇到了一些麻烦。使用以下代码，我得到““forfiles”不被识别为内部或外部命令......”

我正在从运行 Windows 7 Enterprise N 64 位的计算机上执行此操作。

```
@echo off

SET executablePath = "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe"
SET buildConfig = "Release"

cls

forfiles /m *.sln /c "cmd %executablePath% @file /build %buildConfig%" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:47:14.413

试试这个（批处理脚本）：

```
@echo off

SET "executablePath=C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe"
SET "buildConfig=Release"

cls

for %%i in (*.sln) do cmd /c "%executablePath%" "%%~i" /build %buildConfig% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:15:11.630

我的批次有点差，但如果你在 PC 上安装了 Powershell，你可以使用这样的东西：

```
$SLNDirectory = "<Path_to_SLN_Files>"
$executablePath = "C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\devenv.exe"
$buildConfig = "Release"
Clear
$Files = Get-ChildItem $SLNDirectory
Foreach($File in $Files){
$Extension = [System.IO.Path]::GetExtension($File).ToString()
    If ($Extension -eq ".sln"){
        $theFile = $File.Name
        [Array]$SLNFiles +=$theFile 
    }
}

Foreach($SLNFile in $SLNFiles){
    & "$executablePath $SLNFile /build $buildConfig"
} 
```

# php - simplexml 和 xpath - 回显节点？

> ID：15671303
> 
> 赞同：0
> 
> 时间：2013-03-27T23:09:30.213
> 
> 标签：php, simplexml

我通过以下方式从 simplexml-Object 中选择一个节点`xpath`：

```
$x="<root>
    <person>
    <name>Julie</name>
    <age>37</age>   
    <rating>5</rating>
    </person>
    <person>
    <name>Greta</name>
    <age>56</age>
    <rating>7</rating>
    </person>
    <person>
    <name>Kerstin</name>
    <age>38</age>
    <rating>10</rating>
    </person>   
</root>";

$xml = simplexml_load_string($x);

$person = $xml->xpath("//person[name='Greta']");

foreach ($person[0] as $k => $v) 
    echo "$k => $v<br />"; 
```

这是按预期输出...

```
name => Greta<br />age => 56<br />rating => 7<br /> 
```

那我就...

```
echo $person[0]['age']; 
```

输出：

对，没什么！为什么？

现场体验@http: [//3v4l.org/Voalu](http://3v4l.org/Voalu)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:11:06.437

[SimpleXML](http://php.net/SimpleXML)对子节点使用对象属性，而不是数组成员（数组成员用于访问节点属性）。以下表达式将为您提供年龄：

```
echo $person[0]->age; 
```

如果 XML 如下所示，那么您的代码就可以工作：

```
<root>
    <person age="37">
       <name>Julie</name>
       <rating>5</rating>
    </person>
    ... 
```

# c# - 数据绑定到单例源仅适用于 Windows Phone 模拟器，但不适用于设备

> ID：15671305
> 
> 赞同：0
> 
> 时间：2013-03-27T23:09:40.540
> 
> 标签：c#, silverlight, windows-phone-7, data-binding, silverlight-toolkit

我创建了一个单例类来存储我想要在我正在开发的 Windows Phone 7 应用程序中的控件之间全局共享的信息。

具体来说，我使用数据绑定来同步`IsExpanded`各种 Silverlight Toolkit ExpanderViews 之间的属性。我遇到的问题是该值似乎没有传播，但仅在*物理*Windows Phone 设备上......该应用程序在模拟器上运行良好。

由于该项目中除单例类之外的所有其他源绑定都工作正常，我假设我错误地实现了绑定和/或单例，或者遗漏了一些明显的东西......但是这个论坛上的每个线程和其他我'已经检查并没有帮助我解决这个问题。

单例类如下：

```
class ControlStateContainer : INotifyPropertyChanged
{
    private static readonly ControlStateContainer _instance = new ControlStateContainer();
    private bool _optionsExpanded = false;

    private ControlStateContainer()
    { }

    public static ControlStateContainer Instance
    {
        get { return _instance; }
    }

    public bool OptionsExpanded
    {
        get { return _optionsExpanded; }
        set
        {
            _optionsExpanded = value;
            this.NotifyPropertyChanged("OptionsExpanded");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void NotifyPropertyChanged(string name)
    {
        var handler = PropertyChanged;

        if (handler != null)
            PropertyChanged(this, new PropertyChangedEventArgs(name));
    }
} 
```

我正在`IsExpanded`使用以下代码绑定 ExpanderViews 的属性：

```
Binding _isExpandedBinding = new Binding
{
    Source = ControlStateContainer.Instance,
    Path = new PropertyPath("OptionsExpanded"),
    Mode = BindingMode.TwoWay
};

expander.SetBinding(ExpanderView.IsExpandedProperty, _isExpandedBinding); 
```

ExpanderViews 在模拟器上的行为与预期一样，但是当我将应用程序部署到设备时，绑定似乎不再起作用。

总的来说，我对 C# 和 Windows Phone 开发仍然很陌生，并且完全希望这是我错过的一个令人毛骨悚然的简单细节......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:42:08.980

显然必须明确声明单例类`public`......现在它可以在模拟器和设备上运行。

# git - 我认为“git cherry-pick”刚刚破坏了一些东西

> ID：15671306
> 
> 赞同：1
> 
> 时间：2013-03-27T23:09:41.450
> 
> 标签：git

我们的仓库曾经看起来像这样：

```
* xxxxxxx (master, tag: v2.0.6c) Release v2.0.6c
|\
| * xxxxxxx (develop) Fixes and stuff
| * xxxxxxx Comment here
* | mmmmmmm (tag: v2.0.6b) Release v2.0.6b
|\|
| * xxxxxxx development branches!
. . 
```

但现在我们的 repo 看起来像这样：

```
* f8cb1b7 (origin/master, master) Do something on develop
*   86848aa Merge branch 'master' of ssh://...
|\  
| *   f6f8733 (HEAD, tag: v2.0.6c) Release v2.0.6c
| |\  
| * \   30bd2f2 (tag: v2.0.6b) Release v2.0.6b
| |\ \  
| * \ \   68bbe5b (tag: v2.0.6a) Release v2.0.6a
| |\ \ \  
| * \ \ \   35ceefe (tag: v2.0.6) Release v2.0.6
| |\ \ \ \  
* | \ \ \ \   15decce Merge branch 'develop' of ssh://...
|\ \ \ \ \ \  
| |/ / / / /  
|/| | | | |   
* | | | | |   806eebe (tag: v2.0.5a) Release v2.0.5a
|\ \ \ \ \ \  
.... etc. Branches keep expanding outwards for each tag/commit 
```

我所知道的是，有人试图从 development 中挑选出一个特定的提交到 master 上，提交它，然后推送它。尝试`git reset --hard HEAD^`似乎没有做任何事情，我不知道如何解决它。

# iphone - UINavigationBar 自定义后退按钮与形状

> ID：15671307
> 
> 赞同：1
> 
> 时间：2013-03-27T23:09:42.060
> 
> 标签：iphone, ios, objective-c, xcode, uinavigationcontroller

我试图为我的应用导航栏设置一个自定义后退按钮。现在我正在使用这段代码来做到这一点：

```
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:[UIImage imageNamed:@"backbutton.png"] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

这最终会扭曲我的图像并使其拉伸。它还会在其上添加文本。我将如何使它仅显示此图像？

这是图片：[http ://thai-flashcards.info/images/arrow-blue-rounded-left.jpg?1303347394](http://thai-flashcards.info/images/arrow-blue-rounded-left.jpg?1303347394)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:21:19.840

您正在寻找的是可拉伸的图像。

这应该让你整理出来：

[http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/](http://idevrecipes.com/2010/12/08/stretchable-images-and-buttons/)

**编辑：看着你的形象，我认为这行不通。**

您将不得不制作一个自定义 UIButton 并将您的后退按钮设置为该自定义按钮并自己处理 ViewController 弹出。

你会像这样制作/设置按钮。

```
UIImage *buttonImage = [UIImage imageNamed:@"mybuttonimage.png"];
UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
[doneButton addTarget:self action:@selector(goBack)forControlEvents:UIControlEventTouchUpInside];

[doneButton setImage:buttonImage forState:UIControlStateNormal];

UIBarButtonItem *backButton = [[UIBarButtonItem alloc]initWithCustomView:doneButton];

    self.navigationItem.leftBarButtonItem = backButton; 
```

你需要将你的方法添加到 goBack

```
-(void)goBack { // Go Back

    [self.navigationController popToViewController:
    [self.navigationController.viewControllers objectAtIndex:3] animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T09:33:37.047

在**didFinishLaunchingWithOptions下添加AppDelegate**

```
UIImage *backBtnIcon = [UIImage imageNamed:@"back.png"];
UIImage *backButtonImage = [backBtnIcon resizableImageWithCapInsets:UIEdgeInsetsMake(0, backBtnIcon.size.width - 1, 0, 0)];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:backButtonImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault ];
[[UIBarButtonItem appearance] setBackButtonTitlePositionAdjustment:UIOffsetMake(0, -30) forBarMetrics:UIBarMetricsDefault]; 
```

# django - django 表单，将模型表单中的标签替换为实例，ManyToMany 字段

> ID：15671309
> 
> 赞同：0
> 
> 时间：2013-03-27T23:09:48.873
> 
> 标签：django, django-models, django-forms

模型.py

```
class Category(models.Model):
    ...

class Article(models.Model):
    category = models.ManyToManyField(Category, related_name='articles')
    ...

class Photography(models.Model):
    article = models.ForeignKey(Article, related_name='photos')
    image = models.ImageField(upload_to = 'photos') 
```

表格.py

```
from foo.models import Category, Article, Photography
from django import forms

class EditArticleForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(EditArticleForm, self).__init__(*args,**kwargs)

    class Meta:
        model = Article
        fields = ['category', 'second_field', 'another_one']
        widgets = {'category' : forms.ModelMultipleChoiceField(label=''),} 
```

我需要的是用属于编辑表单中文章的第一张照片替换类别标签。当我删除`widgets`行时，表单按预期工作，但我一直试图先获取空标签，但出现此错误`__init__() takes at least 2 arguments (2 given)`谢谢。

# c# - 你怎么知道你得到了一个真实的街道地址？

> ID：15671321
> 
> 赞同：4
> 
> 时间：2013-03-27T23:11:10.670
> 
> 标签：c#, asp.net, entity-framework

使用 C# asp.net 4.0+ 验证某人给您的地址是否可行的最佳方法是什么。我想我说的是我不想在我的地址字段下看到“你不想知道吗？”。我希望地址字段的门牌号街道可能以混合顺序排列。

第1623章

或者

2 卡姆登街

或者

3 马尔伯里 rd apt 2b

是否值得在课堂环境/求职面试环境中实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T00:48:21.903

只是一个想法，但我会说不，这不值得。如果我遇到一个验证街道地址的网站并且我不想给出地址，我会给出一个不同的地址（公司自己的，或者来自谷歌的随机地址。）所以无论你可以*验证*街道地址是无关紧要的，因为您无法*验证*街道地址是否属于输入它的人（没有邮寄代码并要求他们在网站上输入它。）

# colors - XNA 以编程方式更改背景颜色

> ID：15671322
> 
> 赞同：0
> 
> 时间：2013-03-27T23:11:14.707
> 
> 标签：colors, xna, sprite

有没有办法以编程方式不断地改变背景的颜色/颜色，例如，我希望开始的颜色是完美的蓝色（例如），然后每次`Update()`调用我都希望背景慢慢变成绿色，然后是黄色，然后是蓝色等......我希望颜色淡入下一个颜色，而不是突然切换。

有什么想法可以实现这一目标吗？我知道有，`GraphicsDevice.Clear(Color.CornflowerBlue);`但这显然不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:25:21.643

@BrianRasmussen 是完全正确的。您可以改变每一帧的清晰颜色。使用`Color`采用数字值而不是颜色枚举值的构造函数之一。

[这个，](http://msdn.microsoft.com/en-us/library/bb195889%28v=xnagamestudio.31%29.aspx)

```
GraphicsDevice.Clear(new Color(byte r, byte g, byte b)); 
```

[或者这个](http://msdn.microsoft.com/en-us/library/dd231957%28v=xnagamestudio.31%29.aspx)

```
GraphicsDevice.Clear(new Color(float r, float g, float b, float a)); 
```

并且每一帧，更新您的`r`、`g`和的值`b`。简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:26:58.680

`GraphicsDevice.Clear`正是你想要的。

您仍然需要一种[在颜色之间进行插值](http://msdn.microsoft.com/de-at/library/microsoft.xna.framework.graphics.color.lerp%28v=xnagamestudio.31%29.aspx)的方法：

```
var red = Color.Red;
var green = Color.Green;

// Gives you a color at half the distance between red and green
var color = Color.Lerp(red, green, 0.5f); 
```

如果您想浏览整个调色板，您可以将颜色转换为[HSL 或 HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)并对色调进行动画处理。

# visual-studio-2012 - 如何更改 Visual Studio 2012 中代码覆盖率分析器使用的颜色？

> ID：15671324
> 
> 赞同：9
> 
> 时间：2013-03-27T23:11:26.610
> 
> 标签：visual-studio-2012, code-coverage

我经常使用带有代码着色的 Visual Studio 2012 代码覆盖率分析器。这在使用浅色主题时效果很好。但是当我使用深色主题时，很难区分颜色。我找不到允许我更改代码覆盖率颜色的设置。

我可以改变颜色吗？如果有设置，它在哪里？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-29T11:55:45.893

在主菜单中，转到工具 | 选项。然后从树形视图中，选择环境 -> 字体和颜色。并在“显示项目”中选择“覆盖未触摸区域”、“覆盖部分触摸区域”和“覆盖触摸区域”。在那里您可以更改默认项目背景。

在德语版本中，您必须像在“Von Codeabdeckung...”中一样查看“V”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T13:03:32.950

此外，如果您使用 JetBrains dotcover，他们在 jetbrains 的选项中创建了自己的设置

Resharper>选项>DotCover>突出显示。

他们的价值观很好。

# java - JFrame Swing如何将弹出窗口中的框架更改为看起来像Windows主题

> ID：15671326
> 
> 赞同：1
> 
> 时间：2013-03-27T23:11:32.960
> 
> 标签：java, swing, jframe, look-and-feel

大家好，我可以为从单独的类调用的弹出窗口设置默认框架。正如您可能会说的那样，我对 java 来说是一个极端的菜鸟。任何帮助，将不胜感激。

这是调用第二个类运行的代码。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.text.NumberFormat;

class Login extends JFrame implements ActionListener
{
 JButton SUBMIT;
 JPanel panel;
 JLabel label1,label2;
 final JTextField  text1,text2;
  Login()
  {
  label1 = new JLabel();
  label1.setText("               Enter Username:");
  label1.setForeground(Color.green);

  text1 = new JTextField(10);

  label2 = new JLabel();
  label2.setText("               Enter Password:");
  label2.setForeground(Color.green);
  text2 = new JPasswordField(10);

  SUBMIT=new JButton("SUBMIT");
  SUBMIT.setOpaque(true);
  SUBMIT.setBackground(Color.BLACK);
  SUBMIT.setForeground(Color.green);

  panel=new JPanel(new GridLayout(4,1));
  panel.add(label1);
  panel.add(text1);
  panel.add(label2);
  panel.add(text2);
  panel.add(SUBMIT);
  add(panel,BorderLayout.CENTER);
  SUBMIT.addActionListener(this);
  setTitle("LOGIN or DIE!!!!!");
  panel.setBackground(Color.black);
  setDefaultLookAndFeelDecorated(true);
  setLocationRelativeTo(null);
  }
 public void actionPerformed(ActionEvent ae)
  {
  String value1=text1.getText();
  String value2=text2.getText();
  if (value1.equals("McDinger") && value2.equals("welcome1")) {
  ExerciseSevenPt2 page=new ExerciseSevenPt2();
  page.setVisible(true);
  JLabel label = new JLabel(" Welcome to The Java Cave, "+value1 + ". " + "Are you Worthy of the Cave?");
  label.setOpaque(true);
  label.setForeground(Color.green);
  label.setBackground(Color.black);
  page.getContentPane().add(label);
  }
  else{
  System.out.println("enter the valid username and password OR ELSE!!!!!");

  UIManager UI=new UIManager();
  UI.put("OptionPane.messageForeground", Color.red);
  UI.put("OptionPane.background", Color.black);
  UI.put("Panel.background", Color.black);

  JOptionPane.showMessageDialog(this,"Incorrect login or password Genius", "Error",JOptionPane.ERROR_MESSAGE);
  setDefaultLookAndFeelDecorated(true);

  }
}
}
 class ExerciseSeven
{
  public static void main(String arg[])
  {
  try
  {
  Login frame=new Login();
  frame.setSize(300,100);
  frame.setVisible(true);
  }
  catch(Exception e)
  {JOptionPane.showMessageDialog(null, e.getMessage());}
  }
} 
```

这是第二课

```
import javax.swing.*;
import java.awt.*;

class ExerciseSevenPt2 extends JFrame
{   
    ExerciseSevenPt2()
 {      
 setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
 setTitle("The Java Cave ");
 setSize(400,70);
 setLocationRelativeTo(null);
 }
} 
```

这是我在执行代码后视觉上的问题。底部窗口是我希望顶部窗口的样子。

![在此处输入图像描述](../Images/c51f635b55c780b7d77f6f42f7091f3f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T23:19:54.320

您必须使用[UIManager 来“设置](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)窗口的外观和感觉”：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T23:40:02.403

正如evuez 已经说过的（+1），您只需要安装系统外观。

查看[如何设置外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)以了解更多详细信息。

以下示例基本上是在执行其他任何操作之前安装系统外观。这非常重要，否则您最终可能会得到非常讨厌的绘制效果和不匹配的渲染更新。

![在此处输入图像描述](../Images/6e3d061923c11cda712ac1ed2037d696.png)

显然，我使用的是 Mac OS 的外观和感觉，但它将使用系统外观和感觉，用于您运行它的任何平台。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class Test02 {

    public static void main(String[] args) {
        new Test02();
    }

    public Test02() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }
                JFrame frame = new JFrame("The Java Cave ");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setBackground(Color.BLACK);
            JLabel label = new JLabel("Welcome to the Jave Cave, be afraid, be very afraid");
            label.setForeground(Color.GREEN);
            add(label);
        }

    }

} 
```

# haskell - 在 Haskell 中安排超时

> ID：15671328
> 
> 赞同：16
> 
> 时间：2013-03-27T23:11:41.777
> 
> 标签：haskell, callback, timeout

我是 Haskell 的新手，我正试图弄清楚如何安排从现在开始 X 秒（并且不会更早）触发回调。

在搜索 Hoogle 和 Google 时，我发现：

[http://www.haskell.org/ghc/docs/latest/html/libraries/base/GHC-Event.html](http://www.haskell.org/ghc/docs/latest/html/libraries/base/GHC-Event.html)

也：

[http://hackage.haskell.org/packages/archive/base/4.3.1.0/doc/html/System-Event.html](http://hackage.haskell.org/packages/archive/base/4.3.1.0/doc/html/System-Event.html)

这两个都具有“registerTimeout”功能，似乎可以满足我的要求。但是，System.Event 似乎不再在 Haskell 的最新版本中，并且 GHC.Event 被标记为内部。

我可以使用一些用户空间替代品吗？我不希望使用用于 GLUT 的计时功能（除非这是实现我目标的规定方式），而且 System.Timeout 似乎不是我想要的；它旨在将某件事可能花费的时间设置为最大值，而不是最小值。

谢谢您的意见！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-27T23:29:29.340

我会在延迟后简单地在自己的线程上执行回调。这是一种 GHC 主义。

```
import Control.Concurrent (forkIO, threadDelay)

-- | Run the callback after the given number of milliseconds.
runAfterDelay :: Int -> IO () -> IO ()
runAfterDelay t f = forkIO (threadDelay t >> f) 
```

GHC 中的线程非常轻量级，因此不会占用系统资源。

# c# - MySQL/C# 存储过程不返回值

> ID：15671329
> 
> 赞同：0
> 
> 时间：2013-03-27T23:11:47.693
> 
> 标签：c#, mysql, stored-procedures

我一直难以将值从存储过程返回到 C# 应用程序。该过程在 MySql 工作台中返回一个值，但不是 C#。在 C# 输出中没有显示任何值。我调用的以下程序和方法包括如下：

```
 /*
            CREATE PROCEDURE `proc_FindChildID` (OUT CID VARCHAR(6))  
            BEGIN  

                SELECT MAX(ChildID) INTO @CID FROM Child;
                SET @CID = SUBSTRING(@CID FROM 1); 
                SELECT @CID;
            END //
            */

            public bool callProcedure()
            {
                if (this.OpenConnection() == true)
                {
                    MySqlCommand command = connection.CreateCommand();
                        command.CommandType = CommandType.StoredProcedure;
                        command.CommandText = "proc_FindChildID";

                        command.Parameters.Add(new MySqlParameter("@CID", MySqlDbType.VarChar, 6));
                        command.Parameters["@CID"].Direction = ParameterDirection.Output;
                        command.ExecuteNonQuery();

                        string t_return = command.Parameters["@CID"].Value.ToString();
                        Console.WriteLine("ID:" + t_return);

                    this.CloseConnection();
                    return true;
                }
                else
                {
                    return false;
                }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:15:48.203

我不知道 MySqlCommand 但通常如果它是 MSSQL 我会调用`object o = command.ExecuteScalar();`而不是`command.ExecuteNonQuery();`获取值。

# google-maps - 限制谷歌自动完成查询？

> ID：15671331
> 
> 赞同：6
> 
> 时间：2013-03-27T23:11:54.117
> 
> 标签：google-maps, google-maps-api-3

我计划在我的网站上使用 Google 自动完成功能。我可以进行的查询数量是否有限制？

我正在使用此问题中列出的确切代码： [How to limit google autocomplete results to City and Country only](https://stackoverflow.com/questions/8282026/how-to-limit-google-autocomplete-results-to-city-and-country-only/10170421#10170421)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-20T02:20:01.717

对于 Google 地方信息 API：

> 使用 API 密钥提交请求的应用程序每 24 小时允许 1000 个请求。您可以通过 Google Developers Console 验证您的身份，将上述限制增加到每 24 小时 150 000 个请求。通过在控制台中启用计费，需要信用卡进行验证。

对于 Google Places JavaScript 库：

> 这些限制不适用于 Places JavaScript 库，它不需要 API 密钥，并且受 Google Maps JavaScript API 限制的约束。

来源：[https ://developers.google.com/places/webservice/usage](https://developers.google.com/places/webservice/usage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-15T19:09:40.027

您可以毫不犹豫地使用 Google Maps Javascript API Places 库。其他答案中提到的限制适用于 Places API，而不是 Maps API 的 Places 库。来自[https://developers.google.com/places/uplift](https://developers.google.com/places/uplift)

**为您的应用选择合适的服务**

如果您正在开发一个只需要搜索地点而不提交新地点或 Place Bumps 的基于 Web 的应用程序，那么您应该使用 Maps API 的 Places 库，而不是使用 Places API Web 服务。Places 库将配额分配给每个最终用户，而不是每个键。这意味着您的可用配额会随着您的用户群而增加，而不是被限制在一个固定的数量上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T07:45:23.713

## 使用限制

### Google Places API 具有以下查询限制：

拥有**API 密钥的用户****每 24 小时**允许1 000 个请求。

**通过 API 控制台验证**身份的用户**每 24 小时允许 100 000 个请求**。

通过在控制台中启用计费，需要信用卡进行验证。我们要求您提供信用卡纯粹是为了验证您的身份。使用 Places API 不会从您的卡中收取费用。
虽然下限足以用于开发和测试，但我们建议在启动应用程序之前启用上限。**可以申请额外配额**。

请注意，某些服务可能有乘数。例如，文本**搜索受 10 倍乘数的约束**，导致每个文本搜索请求计为 10 个请求，超出您的配额。

* * *

## 更新：

我相信使用 Google Maps JavaScript API v3 您会受到[此政策](https://developers.google.com/maps/documentation/javascript/usage)的限制，而使用 Google Places API 您会受到[这些限制](https://developers.google.com/maps/documentation/places/#Limits)。
我认为您应该通过验证，以便将限制从 1000 提高到 100000

# python - 防止在 Django 中提交多个表单

> ID：15671335
> 
> 赞同：10
> 
> 时间：2013-03-27T23:12:19.613
> 
> 标签：python, django, forms, hash

我正在寻找一种通用的方法来防止多次提交表单。我发现这种[方法](https://gist.github.com/saketkc/1439694)看起来很有希望。而我不想在我的所有视图中包含这个片段。使用请求处理器或中间件可能更容易做到这一点。

有什么最佳实践建议吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-27T23:23:01.083

客户端，从 JavaScript 开始。你永远不能相信客户，但它是一个开始。

IE

```
onclick="this.disabled=true,this.form.submit(); 
```

服务器端您“可以”将某些内容插入数据库，即校验和。如果它是您插入数据库的记录，`model.objects.get_or_create()`用于强制数据库级别的唯一性，您应该使用 unique_together。

**最后**：HTTPRedirect 是最好的，我在用户处理付款时使用的方法是向感谢/确认页面发出 HTTPRedirect()。这种方式刷新表单不会重新提交，如果他们返回并尝试再次提交表单（不刷新表单），Django Cross Site Request Forgery (CSRF) 将失败，完美！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-07T11:06:30.157

我还尝试找到一种好方法来防止在用户 dbl-click 提交按钮时生成双重记录。 **这与通过重定向很容易解决的 PRG 问题无关。**

因此，关于这个基本问题，在服务器端使用 HTTPRedirect 的解决方案没有帮助。

在客户端，我在提交前禁用按钮时发现了两个问题：

1.  使用 HTML5 验证，`form.submit()`如果表单无效 => 提交按钮仍然是 ，浏览器将中断`disabled=true`。
2.  当用户提交表单并返回浏览器历史记录时，DOM 将从浏览器的缓存中加载 => 提交按钮仍然是`disabled=true`.

所以这是我针对第一个客户端问题（HTML5 验证）的解决方法：

```
isFormHtml5Valid(form) {
  for(var el of form.querySelectorAll('input,textarea,select')){
    if(!el.checkValidity())
      return false;
  }
  return true;
}

mySubmitButton.onclick = function() {
  if(this.form && isFormHtml5Valid(this.form))
    this.disabled=true;
  this.form.submit();
} 
```

我尝试为第二个客户端问题（浏览器缓存 DOM）找到客户端解决方法，但没有任何效果（onbeforeunload，...）。所以我目前用于“浏览器缓存”问题的解决方法是在相关视图的顶部添加一个@never_cache 装饰（从服务器端，指示客户端不缓存）。如果您有更好的解决方法，请告诉我。

最后但并非最不重要的一点是，**我非常感谢在服务器端解决此问题**。CSRF 解决方案似乎不适合，因为[CSRF 令牌是由会话生成的](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet#Synchronizer_.28CSRF.29_Tokens)（不是针对每个表单）。所以这是我的工作状态和我的问题：

*   在客户端解决此问题是可以的，但对我来说似乎不是一个好的解决方案。我们如何避免在服务器端验证这种多表单提交？

让我知道你是否有一个好的解决方案。

* * *

**编辑1：** 可能是答案的一小部分：[Synchronizer (or Déjà vu) Token](http://www.corej2eepatterns.com/Design/PresoDesign.htm)

但我没有在 Django 中找到任何实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-15T06:56:18.460

使用**HttpResponseRedirect**

创建一个新视图（让我们说`thank_you`）以在表单提交后显示成功消息并返回模板。

成功提交表单后，**将 HttpResponseRedirect("/thank-you/")**返回到新的感谢视图

```
from django.http import HttpResponseRedirect

def thank_you(request, template_name='thank-you.html'):
    return render_to_response(template_name,locals(),context_instance=RequestContext(request)) 
```

并在 urls.py

```
url(r'^thank-you/$','thank_you', name="thank_you") 
```

发生多个表单提交是因为当页面刷新相同的 url 命中时，它会一次又一次地调用相同的视图，因此在数据库中保存了多个条目。为了防止这种情况，我们需要将响应重定向到新的 url/view，以便下次页面刷新时它会点击新的 url/view。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-12T15:03:42.187

1.  成功提交后以重定向响应，因此重新加载不会导致再次提交
2.  禁用表单提交时的提交按钮

至于＃2，最好在`onsubmit`处理程序中执行此操作，而不是`onclick`提交按钮。这将处理多个提交按钮或任何 HTML5 客户端表单验证等情况。在 jQuery 中，它看起来像：

```
$('#edit_form').submit( function(event) {
    // disable to avoid double submission
    $('#submit_button').attr('disabled', true);
}); 
```

但是，这没有考虑的一个问题是用户是否中途取消了提交。例如，如果您单击“提交”，然后立即按“Esc”，浏览器将停止提交，但“提交”按钮已被禁用。

此外，可以通过点击“输入”来提交表单，并且此解决方案不会阻止该表单提交两次。

# mysql - 什么表结构会给出更快的 sql 查询结果

> ID：15671336
> 
> 赞同：0
> 
> 时间：2013-03-27T23:12:35.917
> 
> 标签：mysql, sql, database, performance, optimization

我想制作一个表格，将用户的操作反映给我的应用程序中的另一个用户。

我有两个解决方案，我想知道什么会更快？

1)

```
ID | source_user_id | target_user_id | action_type 
```

在此选项中，我将为每个操作创建一行

2)

```
Id | source_user_id | target_user_id | action_x | action_y | action_z 
```

在此选项中，我将为其他用户可用的所有操作创建一行，当未执行操作时，该字段将设置为 NULL 值，仅当至少执行一个操作时才会创建此行

你能帮我理解为什么最好的选择是

原谅我的英语不好。
谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:15:59.470

绝对不是第二名。我会选择修改后的第一名：

```
ID | source_user_id | target_user_id | **action_id** 
```

然后做一个表`actions`

```
ID | action_type | action_info | etc 
```

这将允许您进行多种不同的操作，并且更加灵活。您说，“我将为其他用户可用的所有操作创建一行”......但是，根据您的布局，您真正的意思是您将为用户之间可用的每个操作创建另一*列*。这是一种非常糟糕的处理方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:33:48.557

为什么会更快？

为了获得特定用户的所有操作，第二个解决方案应该更快，尽管这可能只是一小部分。

对于添加新动作，第一个解决方案要快得多、快得多。第二种解决方案需要重新组织表格。

接下来，您不会说出您在第二种情况下放入列中的内容。如果您要输入 2,000 个字符长的字符串，那么第一种情况可能会快得多，尤其是 hellohellosharp 建议使用 ids 而不是值。较短的记录和减少的 I/O 应该可以弥补必须将大表连接到小参考表的情况。

因为您没有提供足够的信息来实际回答有关性能的问题，所以最好的答案是专注于数据库设计。为此，一个动作表可能应该有一个自动递增的 id、两个用户 id、一个动作 id 和一个日期/时间字段，说明它发生的时间。使用适当的索引，获取有关特定用户或用户/操作的信息应该对您的应用程序具有足够好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:33:08.170

在定义表结构之前，您首先必须确定**哪些预期查询对性能至关重要？**是否为*and**获取所有可用`action`的 s`source``target user`*？或者它是否*获得了`action_type`您系统中当前可用的数量*？表的构建方式可能会因此发生巨大变化。

在确定好之后，您可以使用许多技术来构建针对您的需求进行了优化的表，例如：

1.  将通常一起检索的数据单元嵌入到同一个表中；
2.  索引列；
3.  还有很多，其中前两个是最基本的。

# database - 免费的关系数据库以 JSON 格式输出查询

> ID：15671338
> 
> 赞同：0
> 
> 时间：2013-03-27T23:12:43.713
> 
> 标签：database, json, relational

我意识到存储在数据库中的一些数据，由我开发的站点访问，如果将它们转换为 Json 文件会更有效 - 避免访问数据库本身（我按 API 调用付费！）。数据结构绝对允许这样做（它们是非常静态的，可以立即下载多个表）。

但是，一些表数据与其他表的数据相关，我需要一种保持数据一致性的方法，JSON 本身（本质上是文本管理）确实允许我这样做（编写外部键时总是存在人为错误！）。

因此，我需要一个（可能）免费、简单、开源的数据库来管理它们之间有某种关系的几个表（操作系统是一个普通的关系数据库），用于 Json 格式的一些查询。

有人知道这样的解决方案吗？

很高兴拥有：无需安装数据库管理器 + 用于探索数据的 GUI。

谢谢！

PSplease让我知道我不应该不够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:17:15.777

下载 firefox 插件 SQLite Manager。

你都准备好了

# javascript - d3.js - 树布局 - 我如何翻转它？

> ID：15671339
> 
> 赞同：2
> 
> 时间：2013-03-27T23:12:52.747
> 
> 标签：javascript, json, svg, d3.js

我将此示例用于 D3.js 树布局。

[http://mbostock.github.com/d3/talk/20111018/tree.html](http://mbostock.github.com/d3/talk/20111018/tree.html)

我需要翻转它，所以根节点在右侧，链接......等等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-28T01:24:15.207

*   将每个节点的偏移量更改为从右侧而不是从左侧偏移：

    ```
    // Normalize for fixed-depth.
    nodes.forEach(function(d) { d.y = d.depth * 180; }); 
    ```

变成：

```
 // Normalize for fixed-depth from right.
    nodes.forEach(function(d) { d.y = w - (d.depth * 180); }); 
```

*   将标签更改为在对面

    ```
    nodeEnter.append("svg:text")
      .attr("x", function(d) { return d.children || d._children ? -10 : 10; })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })    
      .text(function(d) { return d.name; })
      .style("fill-opacity", 1e-6); 
    ```

变成：

```
 nodeEnter.append("svg:text")
      .attr("x", function(d) { return d.children || d._children ? 10 : -10; })
      .attr("dy", ".35em")
      .attr("text-anchor", function(d) { return d.children || d._children ? "start" : "end"; })    
      .text(function(d) { return d.name; })
      .style("fill-opacity", 1e-6); 
```

*   将根节点的原始位置放在右侧，而不是左侧，所以第一次转换并不奇怪：

    ```
    root = json;
    root.x0 = h / 2;
    root.y0 = 0; 
    ```

变成：

```
 root = json;
    root.x0 = h / 2;
    root.y0 = w; 
```

小提琴：http: [//jsfiddle.net/Ak5tP/1/embedded/result/](http://jsfiddle.net/Ak5tP/1/embedded/result/)

# ant - app-deployer 和 adapter-deployer ANT 任务的用户/密码？

> ID：15671340
> 
> 赞同：0
> 
> 时间：2013-03-27T23:12:56.873
> 
> 标签：ant, ibm-mobilefirst

使用 com.ibm.appcenter.ant.UploadApps 部署到应用程序中心需要用户/密码；但是我看不到 app-deployer 和 adapter-deployer 任务的此类参数。这是故意的吗？

我已经在开发中成功使用了 app-deployer 和 adapter-deployer，但我也从未锁定我的 WL 控制台……当我去那里时，我会自动以“访客”身份登录。如果/当我保护 WL 控制台并强制管理员登录时，app-deployer 和 adapter-deployer 会开始失败还是以某种方式绕过该安全性？

**2013 年 4 月 24 日更新：**

我尝试部署到安全服务器并收到以下错误，即使我尝试在 URL 上传递用户密码：

> 错误消息：[app-deployer] 2013 年 4 月 24 日下午 2:06:08 com.worklight.ant.deployers.AbstractDeployerTask logDeployResponse [app-deployer] 严重：无法访问 Worklight Server。如果您保护了 Worklight Console，请先移除保护。

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:14:45.443

我相信，只要我们不是在谈论 HTTPS，它就应该是`http://username:password@serverAddress:port/contextRoot`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T14:58:20.857

在 WL 6.1.0.2 上，您现在可以执行此操作并为应用程序和适配器部署传递工作灯控制台的用户名密码。

```
<app-deployer deployable="${basedir}/bin/${app.name}-all.wlapp"
worklightServerHost="${resolved.worklight.server.url}" 
userName="${worklight.server.user}"     
password="${worklight.server.password}" />

<adapter-deployer deployable="${basedir}/bin/OSLCGenericAdapter.adapter"
worklightserverhost="${resolved.worklight.server.url}" 
userName="${worklight.server.user}"     
password="${worklight.server.password}"/> 
```

# delphi - 如何定义子孙类中参数不同的虚函数？

> ID：15671343
> 
> 赞同：4
> 
> 时间：2013-03-27T23:13:02.273
> 
> 标签：delphi, polymorphism

我想有一个复制例程，它在基类中定义为虚拟，稍后在派生类中实现。问题是由于参数不同，不允许覆盖该过程。Delphi的类模型有什么解决方案还是我的方法完全错误？

```
type
  TCar = class
    procedure CopyFrom(c: TCar); virtual;
  end;

  TChrysler = class(TCar)
    FColor: Integer;
    procedure CopyFrom(c: TChrysler); override;
  end;

procedure TCar.CopyFrom(c: TCar);
begin
  //virtual
end;

procedure TChrysler.CopyFrom(c: TCrysler);
begin
  FColor := c.FColor;
end;

var
  Car1, Car2: TCar;
begin
  Car1 := TChrysler.Create;
  Car2 := TChrysler.Create;

  Car2.CopyFrom(Car1); //TChrysler.CopyFrom should be called.
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:37:29.623

您需要保持参数列表相同，只需在实现内部进行类型检查：

```
type
  TCar = class
    procedure CopyFrom(c: TCar); virtual;
  end;

  TChrysler = class(TCar)
    FColor: Integer;
    procedure CopyFrom(c: TCar); override;
  end;

procedure TCar.CopyFrom(c: TCar);
begin
  //virtual
end;

procedure TChrysler.CopyFrom(c: TCar);
begin
  if c is TCrysler then
    FColor := TCrysler(c).FColor;
  inherited;
end; 
```

# css - 横幅 不会在 IE9 中显示，但在 Chrome 中会显示

> ID：15671347
> 
> 赞同：0
> 
> 时间：2013-03-27T23:13:49.950
> 
> 标签：css, html, internet-explorer-9

所以我的导航下有一个横幅 div，但是横幅似乎出现在 Google Chrome 中，但没有出现在 IE9 中。HTML和CSS如下。

HTML：

```
<div class="content">       
    <div class="slide-banner"></div>
</div> 
```

CSS：

```
.slide-banner {
    margin: 0 auto;
    padding: 0px;
    width: 650px;
    height: 200px;
    background: #ff0000;
} 
```

编辑：

在尝试了大家提出的所有建议后，我认为这不是我的实际代码，这可能是我的浏览器本身的问题。所以我用 IE9 在另外两台电脑上运行了代码，它似乎工作正常。感谢大家的帮助，不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:50:08.803

在这些情况下，我知道事情应该可以正常工作但事实并非如此，我做的第一件事就是验证。很多时候，我错过了某个地方的标签，并且某些东西没有像应有的那样关闭。

除此之外，尝试将 display:block 添加到 .slide-banner 类。如果这不起作用...在其中输入一些文字或添加图像。[http://placehold.it/650x200](http://placehold.it/650x200)

# bash - 如何从文件bash unix中剪切几行

> ID：15671348
> 
> 赞同：2
> 
> 时间：2013-03-27T23:13:54.493
> 
> 标签：bash, sed, awk, cut

我有一个文本文件：

```
Hello
1
2
3
(unknown number of lines)
Hello
(unknown number of lines)
Hello
(unknow number of lines)
Hello 
```

如何在两个第一个“hello”之间剪切线并将其保存到文件中？
所以输出将是

```
1
2
3
(unknown number of lines) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:17:39.807

使用 awk ：

```
awk '$1=="Hello"{c++;next} c==1' oldfile | tee newfile 
```

要第 N 次出现，请更改计数变量：

```
awk -v count=1 '$1=="Hello"{c++;next} c==count' oldfile | tee newfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:41:04.580

这是一个对我有用的简单 bash 脚本：

```
#!/bin/bash
WORD="$1" # Word we look for, in this case 'Hello'
COUNT=0 # Internal counter for words
let MAXCOUNT="$2" # How many words to encounter before we stop
OUTPUT="$3" # Output filename
FILENAME="$4" # The file to read from
while read -r; do # read the file line by line
    [ "$MAXCOUNT" -le "$COUNT" ] && break; # if we reached the max number of occurances, stop
    if [[ "$WORD" = "$REPLY" ]]; then # current line holds our word
        let COUNT=$COUNT+1; # increment counter
        continue; # continue reading
    else # if current line is not holding our word
        echo "$REPLY" >> "$OUTPUT"; # print to output file
    fi
done <"$FILENAME" # this feeds the while with our file's contents 
```

像这样工作：

```
$./test.sh "Hello" 2 output.txt test.txt # Read test.txt, look for "Hello" and print all lines between the first two occurances into output.txt 
```

这就是我所拥有的：

```
$cat output.txt 
1
2
3
(unknown number of lines) 
```

并且 test.txt 包含：

```
Hello
1
2
3
(unknown number of lines)
Hello
(unknown number of lines)
Hello
(unknow number of lines)
Hello 
```

# php - 访问一组其他对象和数组中的数组

> ID：15671358
> 
> 赞同：1
> 
> 时间：2013-03-27T23:15:01.470
> 
> 标签：php, arrays, json

我正在使用免费基础 API。当我从 curl 操作中获得结果时，我将 json 解码为 PHP。现在我正在尝试访问属性文本。它深深地埋在这组对象和数组中。

`stdClass Object ( [id] => /m/09c7w0 [property] => stdClass Object ( [/common/topic/description] => stdClass Object ( [valuetype] => string [values] => Array ( [0] => stdClass Object ( [text] => The United States of America, commonly called the United States and colloquially referred to as... [lang] => en [creator] => /user/wikirecon_bot [project] => wikirecon [dataset] => /m/0kj4zz_ [citation] => stdClass Object`

这是我迄今为止尝试过的，但我遇到了一些错误。$stuff =$data->property->/common/topic/description->text;

我知道错误可能是“/common/topic/description”的结果。我应该将 json 转换为响应 php 对象，还是应该先尝试在 json 中找到我的值？有没有办法可以访问该属性“文本”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:23:08.240

仅用于`json_decode($jsonstring, true)`获取带有文本和数字键的数组，而没有对象。

这样就更容易访问所有内容。您甚至对如何命名键的限制更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:20:16.857

有点难以阅读您的类和数组的混合，但试试这个：

`$data->property->{'/common/topic/description'}->values[0]->text`

# ios - iOS有开启功能吗？

> ID：15671359
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:15:03.583
> 
> 标签：ios, objective-c

我正在寻找iOS的开放功能，在程序开始运行之前启动的一部分代码。如果它有帮助，我会尝试在程序开始运行之前在屏幕上随机放置一个块，因为一旦程序启动，该块将被随机放置在某个地方而不是它的原点。已经为那一小部分输入了代码，但我找不到openingfnc。

对于那些了解 MatLab 的人来说，有一个 openingfnc 已经构建了它。抱歉，如果我使用了错误的术语。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T23:16:28.927

在视图实际呈现在屏幕上之前，会调用视图。

```
 -(void)viewWillAppear:(BOOL)animated {

    } 
```

# java - 使用 Eclipse Java 项目形成 SOAP 请求

> ID：15671370
> 
> 赞同：2
> 
> 时间：2013-03-27T23:16:07.840
> 
> 标签：java, eclipse, soap, web, client

我需要编写一个 Java 客户端来调用 Web 服务中的 SOAP 调用。我有一个定义请求的 xml 文件。我有一个 .svc 文件。我的 wsdl URI 是这样的：wsdlLocation="http://xx.com/E/wcf/test.svc"

我已经启动了一个新的 Eclipse WTP WEB 服务客户端，并且 在服务定义文件中指定[http://xx.com/E/wcf/test.svc?wsdl时出现错误。](http://xx.com/E/wcf/test.svc?wsdl)我收到此错误：WAB0399E 从 WSDL 生成 Java 时出错：javax.wsdl.WSDLException: WSDLException (at /wsdl:definitions/wsdl:import): faultCode=OTHER_ERROR: Unable to resolve import document at 'http:// ...等等

目前我想忽略它:) 因为我不确定我是否完全理解这一切。

如果成功，是否有什么东西可以让我指向 xml 文件并生成 SOAP 调用，以创建请求并检查或响应。写xml元素等的东西？在这个阶段，我看了很多教程，还有很多问题和答案，以至于我迷路了。

似乎有很多方法可以使用 eclipse 插件做事，最终让我感到困惑。我有 Eclipse Juno 和 m2eclipse WTP 插件。

谁能指出我可以使用此 wsdl 创建服务实例、形成 SOAP 请求并检查响应的确定示例？我有一个需要发送的 html 页面，并且需要在肥皂请求中将其编码为字符串。

谢谢你。

# c# - 从另一个表中选择一个布尔列

> ID：15671371
> 
> 赞同：1
> 
> 时间：2013-03-27T23:16:18.003
> 
> 标签：c#, entity-framework, linq-to-entities, entity-framework-5

我有一个成功的查询，它从连接表中返回多条记录，并生成一个 bool Selected 值（如果另一个表中的当前用户存在一条记录）。

```
public IEnumerable<BrowseVendorModel> SearchVendors(CustomSearchModel criteria)
{
    var query = _db.VendorProfiles
                   .Include("VendorCategories")
                   .Include("VendorsSelected")
                   .Select(s => new BrowseVendorModel
                       {
                           ProfileID = s.ProfileID,
                           Name = s.Name,
                           CompanyName = s.CompanyName,
                           City = s.City,
                           State = s.State,
                           DateCreated = s.DateCreated,
                           // gets bool for selected vendors for current user
                           Selected = s.VendorsSelected.Select(vs => vs.UserName).Contains(HttpContext.Current.User.Identity.Name),
                           VendorsSelected = s.VendorsSelected,
                           VendorCategories = s.VendorCategories
                       })
                   .OrderBy(x => x.DateCreated);
    return query;
} 
```

我正在尝试编写另一个查询来检索一行，但还需要获取该 bool Selected 值而不将结果投影到上面的类中。这是我接近失败的尝试。

```
public VendorProfile GetVendor(String id)
{
    Guid pid = Guid.Parse(id);
    var viewModel = _db.VendorProfiles
        .Include("VendorCategories.ProductServiceCategory")
        .Include("VendorsSelected")
        .Select(s => new {
            VendorProfiles = s,
            Selected = s.VendorsSelected.Select(vs => vs.UserName).Contains(HttpContext.Current.User.Identity.Name)
        })
        .Where(s => s.VendorProfiles.ProfileID == pid);
    return viewModel;
} 
```

如果为 null（没有记录匹配），我尝试生成的这个 bool 列将是 false，如果找到记录，则为 true。如果您需要模型的视觉效果，请参阅此[链接](https://stackoverflow.com/questions/15536154/entity-framework-linq-return-column-based-on-record-in-fk-table/15558397#15558397)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:26:16.617

在这种情况下，因为我只希望在页面上显示一个额外的 bool 值，并且这是一个编辑页面，其中视图模型必须映射回域模型......对于单个 bool 来说似乎工作太多列，所以我使用了一个单独的查询来填充 ViewBag :)

# font-face - 更改 CSS 的字体

> ID：15671374
> 
> 赞同：1
> 
> 时间：2013-03-27T23:16:24.013
> 
> 标签：font-face

我从 fontsquirrel.com 下载了一个 .woff 字体。在他们与 .woff 文件一起提供的 CSS 中，有两行重要的

```
font-family: 'walkway_boldregular';
src: url('walkway_bold-webfont.woff')

I'm trying to change a font of another CSS and it shows that

font-family: 'Raleway';
src: local('Raleway Thin'), 
local('Raleway-Thin'), 
url('raleway100.woff') format('woff'); 
```

我的问题是，如果我将 Walkway 字体限制为 Raleway 的格式，那么线条会是什么样子？

# android - 动态设置 GridLayout 背景颜色 Android

> ID：15671377
> 
> 赞同：0
> 
> 时间：2013-03-27T23:16:36.220
> 
> 标签：android, dynamic, grid-layout

我有一个 8x8 单元格的 GridLayout，我想动态控制每个单元格的背景颜色。我已经编写了大部分 java 代码，并且我相信我可以得到它来给我一个包含 64 种颜色的数组，以便从中获取背景。如何获取这些值并在代码末尾更改 GridLayout 单元格的背景颜色？

澄清一下，这是针对 14 或更高的 API，我专门为我的 Galaxy S2 编写它，尽管它应该适用于任何具有 14+ API 的 Android 手机。

我很高兴发布任何可能有帮助的代码，但我认为这个问题就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:19:39.633

`GridLayout`不会帮助你。

你要做的是确保`View`s 都填满它们的单元格。然后你可以调用`setBackgroundColor()`那些`View`s。

# css - 我如何得到我的 拉伸到屏幕的整个宽度？我试过宽度 100%

> ID：15671378
> 
> 赞同：0
> 
> 时间：2013-03-27T23:16:40.463
> 
> 标签：css, html, width, fullscreen

我想做一个`<div>`它的宽度将延伸到整个屏幕。现在我在 CSS 中有这个：

```
#spacer3 {

width:100%;
height:300px;

} 
```

所以我相信它是有效的。但是在我的网站上，div 并没有完全伸展，每边大约有 5px 的距离。有什么帮助吗？

[这是该站点的链接，例如](http://utulu.net) ，我遇到问题的 div 具有黑色（ish）背景，并且其中包含图像。

提前感谢所有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:17:24.643

您应该删除`body`' 的边距（或任何其他正在推动内容的元素），如下所示：

```
body {
    margin: 0;
} 
```

# ibm-mobilefirst - IBM Worklight invokeCastIron 无法连接到 Cast Iron Live 实例

> ID：15671387
> 
> 赞同：1
> 
> 时间：2013-03-27T23:18:01.523
> 
> 标签：ibm-mobilefirst

我有一个使用对 Salesforce.com 的简单查询的 Cast Iron Live 实例。当我在浏览器中或通过 curl 输入 URL 时，我会得到预期的响应。

当我尝试在 IBM Worklight 适配器中调用相同 URL 的等效项时，服务器不断返回 401 Unauthorized HTML 响应。

我已经查找了 Worklight 发送的实际请求的更详细日志，但没有成功。我还安装了 Wireshark 并嗅探我的连接，希望我能看到 URL 或标头，但它们与有效负载一起被加密。我还查看了 Worklight Server JavaScript 源代码以获取线索，但大部分实际工作都是在 Java 类文件中完成的。

这是我的工作 Cast Iron URL（具体匿名，全部在一行上）： [https://eval-provide.castiron.com/envq/Development/getProducer](https://eval-provide.castiron.com/envq/Development/getProducer)？ciUser=admin@mydomain.com&ciPassword=My@ss4d！

这是我的适配器代码（再次匿名）： function getProducers() {

```
var input = {
        method  : 'get',
        appName : 'producers'
        requestType: 'https',
        path: '/envq/Development/getProducer',
        parameters: {
            ciUser:     'admin@mydomain.com',
            ciPassword: 'My@ss4d!'
        },
        returnedContentType : 'xml'     
};
return WL.Server.invokeCastIron(input);
} 
```

appName 和 requestType 似乎被忽略了。我和他们一起尝试过，没有他们。

我也尝试过不使用参数并将路径硬编码到我在 URL 中使用的完整字符串的路径，即（当然都在一行上）：

```
path : '/envq/Development/getProducer? 
        ciUser=admin@mydomain.com&ciPassword=My@ss4d!', 
```

我需要做什么才能让 Cast Iron Live 和 Worklight 进行身份验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:12:39.190

如果您的 Cast Iron 实例受基本身份验证保护，您需要以 bas64 格式传递用户名和密码，如下所示：

```
 var input = {
            method  : 'get',
            appName : 'myApp',
            headers: {Authorization: "Basic YWRtaW5Ad29ya2xpZ2h0LmlibTpjaGFuZ2VJdCE="},
            path : '/env/Development/'+orchestrationName,           
            returnedContentType : 'json'

    };
    return WL.Server.invokeCastIron(input); 
```

# installation - 如何控制 cmake 的安装路径部分

> ID：15671389
> 
> 赞同：1
> 
> 时间：2013-03-27T23:18:11.113
> 
> 标签：installation, cmake, cross-compiling

我正在使用 cmake 在 x86_64 RHEL5 Linux 机器上生成 Makefile。cmake 生成的“安装”目标安装到部分可控（使用 DESTDIR 和 CMAKE_INSTALL_PREFIX）且部分固定的路径。我对固定部分有什么样的控制，例如：

```
myproject-1.2.0/rhel_5/gcc-4.3.3/i386/release/lib/libmyproject.so.1.2.0
                ^^^^^^           ^^^^ 
```

我问是因为我实际上是使用 gnu 4.3.3 编译器交叉编译到 arm 平台，所以那部分是正确的。但工具链文件似乎不包含影响“rhel_5”和“i386”部分的变量。

当我转储其规格时，我的 arm 交叉编译器列出了 march=armv4t。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:52:28.763

您应该完全控制固定部分。从[文档中`install`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3ainstall "安装命令的 CMake v2.8.10 文档")：

> `DESTINATION`参数指定将安装文件的磁盘目录。如果给出完整路径（带有前导斜杠或驱动器号），则直接使用它。如果给出了相对路径，则相对于 的值进行解释`CMAKE_INSTALL_PREFIX`。前缀可以在安装时使用变量文档`DESTDIR`中解释的机制重新定位。`CMAKE_INSTALL_PREFIX`

因此，“固定”部分是`install`命令中指定的路径，作为`DESTINATION`CMakeLists.txt 文件中的参数。

# c# - 无法从特定路径运行 WCF 默认类库项目

> ID：15671393
> 
> 赞同：0
> 
> 时间：2013-03-27T23:18:37.610
> 
> 标签：c#, wcf

创建 WCF 类库项目时，如果我从桌面运行该项目，它运行良好，但如果我从不同的路径运行它，它就不会运行！！！

我创建了 30 秒的视频来演示这一点：

## [http://youtu.be/5dLRQhlhe9A](http://youtu.be/5dLRQhlhe9A)

在视频中，我基本上创建了一个项目，运行它，然后展示我是如何出错的。我关闭了 Visual Studio，然后将该项目移动到不同的路径运行它并且它可以工作，因为它在不同的路径上。

这是我得到的错误：

> 错误：无法从 http:// ***** *** :8732/Design_Time_Addresses/AccService/Service1/mex 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定位置启用元数据发布地址。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: http:// ***** *** :8732/Design_Time_Addresses/AccService/的 MSDN 文档Service1/mex
> 元数据包含无法解析的引用：'http:// ***** *** :8732/Design_Time_Addresses/AccService/Service1/mex'。 `Receivera:InternalServiceFault`由于内部错误，服务器无法处理请求。有关错误的详细信息，请在服务器上打开 IncludeExceptionDetailInFaults（来自 ServiceBehaviorAttribute 或来自 <serviceDebug> 配置行为）以便将异常信息发送回客户端，或者根据 Microsoft .NET Framework 打开跟踪SDK 文档并检查服务器跟踪日志。HTTP GET 错误 URI：http:// ***** *** :8732/Design_Time_Addresses/AccService/Service1/mex
> 下载时出错 'http:// ***** *** :8732/Design_Time_Addresses/AccService/Service1 /墨西哥'。请求失败，HTTP 状态为 400：错误请求。

注意：我将***** ***替换为 localhost，出于安全原因，StackOverflow 不允许我放置带有 127.0.0.1 的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T13:42:38.930

我会尝试：

1.  通过浏览器中的 url 访问错误的元数据

我的意思是，尝试在浏览器中打开 url 'http://**:8732/Design_Time_Addresses/AccService/Service1/mex'

并确保您可以看到 wsdl。

如果没有 - 这将为您指明进行额外测试的方式。

1.  更改行为以在特定位置公开元数据，您可以毫无问题地访问。

类似于`<serviceMetadata . . . httpGetUrl=`“**您已验证的元数据网址**”。. .
（另见[这篇](http://msdn.microsoft.com/en-us/library/ms731317.aspx)文章）：

```
<serviceMetadata 
    externalMetadataLocation="String"
    httpGetBinding=”String”    httpGetBindingConfiguration=”String”
    httpGetEnabled="Boolean" 
    httpGetUrl="String"
    httpsGetBinding=”String”    httpsGetBindingConfiguration=”String”
    httpsGetEnabled="Boolean" 
    httpsGetUrl="String"
    policyVersion="Policy12/Policy15"/> 
```

# c# - 如何用这种方法计算几本书的接近度？

> ID：15671394
> 
> 赞同：3
> 
> 时间：2013-03-27T23:18:39.147
> 
> 标签：c#, algorithm, linear-algebra

您是否见过 Netflix 如何根据您之前看过并喜欢观看的电影向您推荐某些电影？我正在尝试做同样的事情，但只是为了一套书。

我有 53 本书和 32 个用户。32 位用户对每本书的评分从 5 到 -5，其中 5 分是我喜欢的。用于计算两本书之间“相似”程度的公式如下：

![相似函数](../Images/918bd18f27994bdbef4b571543da01e2.png)

`x1*y1`表示用户一个对书 x 和书 y 的评分，`x2*y2`表示第二个用户对同一 2 本书的评分，对所有用户都继续。

传递给此方法的数组是主数组。主数组的每一个元素对应一个用户，用户数组的每一个元素对应一本书。（32 个用户数组，每个数组本身就是一个 53 元素的数组）

保存每个用户评分的数组是按顺序排列的，`compValuehold[0][0]`代表第一个用户对第一本书的评分，`compValuehold[0][2]`代表第一个用户对第二本书的评分，等等。

```
 public static void DisplayRatings(double[][] compValuehold)
        {

            double eachUserProduct = 0;
            double denominatorXSum = 0;
            double denominatorYSum = 0;
            double Score = 0;
            int counterForScore = 0;
            double[] calculatedValues = new double[52];

            //this for loop should calculate each book's ratings and store it
            //in an array
            for (int i = 0; i < 52; i++)
            {

                for (int j = 0; j < 32; j++)
                {
                    eachUserProduct += compValuehold[j][i] * compValuehold[j][i + 1];
                    denominatorXSum += compValuehold[j][i] * compValuehold[j][i];
                    denominatorYSum += compValuehold[j][i + 1] * compValuehold[j][i + 1];

                }

                denominatorXSum = Math.Sqrt(denominatorXSum);
                denominatorYSum = Math.Sqrt(denominatorYSum);
                Score = eachUserProduct / (denominatorXSum * denominatorYSum);
                calculatedValues[counterForScore] = Score;
                counterForScore += 1;
                denominatorXSum = 0;
                denominatorYSum = 0;
                eachUserProduct = 0;

            }

        } 
```

我能够编写代码来比较第一本书和其他书。**我的问题是我需要找出每本书最相似的书。这意味着要多次计算该公式。**我不知道如何为所有的书做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:36:01.760

似乎您正在做的是确定“书籍向量”的[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)，其中每个向量由每个用户对特定书籍的评分组成。

试图在一个函数中完成这一切可能会让您在调试时头疼；我建议将您的问题分解为更易于管理的部分：

*   编写一个函数，为特定书籍创建书籍向量。
    *   在您的情况下，这将从您的`compValuehold`矩阵中提取给定的列
*   编写一个计算两本书向量之间相似度的函数。
*   循环遍历所有书籍对，计算每对书籍的相似度。
    *   （请注意`similarity(a, b) == similarity(b, a)`）

如果您想出更好的比较书籍的方法，这种方法还可以更轻松地更改相似度函数。

这是前两个子问题的示例实现（请记住，它们并不是特别有效）：

```
static int[] GetBookVector(int[][] ratingMatrix, int bookIndex)
{
    int[] book = new int[ratingMatrix.Length];
    for (int i = 0; i < ratingMatrix.Length; i++)
    {
        book[i] = ratingMatrix[i][bookIndex];
    }

    return book;
}

static double Similarity(int[] v1, int[] v2)
{
    if (v1.Length != v2.Length)
    {
        throw new ArgumentException("Vectors must be of the same length.");
    }

    int numerator = 0;
    double v1Norm = 0;
    double v2Norm = 0;
    for (int i = 0; i < v1.Length; i++)
    {
        numerator += v1[i] * v2[i];
        v1Norm += v1[i] * v1[i];
        v2Norm += v2[i] * v2[i]; 
    }

    v1Norm = Math.Sqrt(v1Norm);
    v2Norm = Math.Sqrt(v2Norm);

    return (numerator / (v1Norm * v2Norm));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T02:21:44.303

正如@dckrooney 指出的那样，您正在计算两个向量之间的余弦相似度，每个向量代表所有用户的“评级概况”。从头开始编写该函数很好，但您可以考虑为此使用线性代数库，这将简化您的工作。例如，使用 Math.NET 之类的库，您可以将数组表示为矩阵，例如 Ratings，然后您可以提取列并以更直接的方式执行计算，如下所示：

```
public double Similarity(DenseMatrix matrix, int col1, int col2)
{
    var column1 = matrix.Column(col1);
    var column2 = matrix.Column(col2);
    var similarity = column1.DotProduct(column2) / (column1.Norm(2)+column2.Norm(2));
    return similarity;
} 
```

您可能会从处理原始数组中获得一些轻微的性能优势，但可以说，代码更具可读性并且易于维护。此外，Math.NET 允许您使用[本地提供程序](http://christoph.ruegg.name/blog/2013/2/3/mathnet-numerics-with-native-linear-algebra.html)并直接在 CPU 上使用线性代数运行计算，这可以为您带来不错的性能提升。

除此之外，是的，您必须对每一列重复该计算，这可能会变得非常昂贵，特别是如果您有一个大矩阵。解决此问题的一种方法是使用奇异值分解，它可以帮助您减小数据集的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:38:18.873

这是一个错误吗？

```
 denominatorYSum += compValuehold[j][i + 1] * compValuehold[j][i + 1];
..
...
..
denominatorYSum = Math.Sqrt(denominatorYSum); 
```

如果不是，只需将代码更改为

```
denominatorYSum += compValuehold[j][i + 1]; 
```

Sqrt 非常昂贵，它本质上是一个循环。

假设以上是一个错误，我会完全摆脱两个 Sqrt 计算。或者把它移到这一行，

```
Score = eachUserProduct / Math.Sqrt(denominatorXSum * denominatorYSum); 
```

Math.Sqrt(25) * Math.Sqrt(25) 是 25。Math.Sqrt(25*25) 是 25。此外，更高的值具有更高的平方根。因此，您可以完全摆脱 Math.Sqrt() 调用，并且就距离排序（相似性）而言，计算仍然相同。

这更像是一道数学题而不是编程题。. . 我希望我没有做你的功课。

# java - 如何动态地将单选按钮添加到活动？

> ID：15671402
> 
> 赞同：1
> 
> 时间：2013-03-27T23:19:08.303
> 
> 标签：java, android

我有一个活动，用户可以使用单选按钮更改设置。可能有 2 到 7 个选项，所以我想在我的 onCreate() 中动态添加单选按钮。通过一些研究，我想出了如何做到这一点，并为我自己和你的利益记录了结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:19:08.303

首先，包括无线电组小部件并声明一个。您还需要 LayoutParams 和 RadioButton，因此也包括这些。

```
 //SomeAndroidActivity
    import android.widget.RadioGroup;
    import android.view.ViewGroup.LayoutParams;
    import android.widget.RadioButton;

    public class SomeAndroidActivity extends Activity () {
        //declare a radio group
        RadioGroup radioGroup;
    } 
```

在您的 onCreate 方法中，初始化无线电组。

```
 //SomeAndroidActivity

    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_some_android);
      radioGroup = (RadioGroup) findViewById(R.id.radio_selection_group);
    } 
```

R.id.radio_selection_group 指的是在您的 XML 文件中声明的无线电组，因此请确保您也拥有它。

```
 <!-- activity_some_android.xml -->
    <RelativeLayout xmlns:android=
        "http://schemas.android.com/apk/res/android"
      xmlns:tools="http://schemas.android.com/tools"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      tools:context=".SomeAndroidActivity" >

      <RadioGroup
        android:id="@+id/radio_selection_group"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="76dp"
        android:layout_marginTop="135dp" >

      </RadioGroup>
    </RelativeLayout> 
```

回到 SomeAndroidActivity，创建一个动态添加按钮到单选组的方法。

```
 //SomeAndroidActivity
    private void addRadioButtons(int numButtons) {
      for(int i = 0; i < numButtons; i++)
        //instantiate...
        RadioButton radioButton = new RadioButton(this);

        //set the values that you would otherwise hardcode in the xml...
        radioButton.setLayoutParams 
          (new LayoutParams 
          (LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

        //label the button...
        radioButton.setText("Radio Button #" + i);
        radioButton.setId(i);

        //add it to the group.
        radioGroup.addView(radioButton, i);
      }
    } 
```

然后在 onCreate 中调用该方法。

```
 //SomeAndroidActivity
    @Override
    protected void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_some_android);
      radioGroup = (RadioGroup) findViewById(R.id.radio_selection_group);

      int numberOfRadioButtons = 7;
      addRadioButtons(numberOfRadioButtons);
    } 
```

容易的馅饼。

这是我关于它的博客文章。 [http://rocketships.ca/blog/how-to-dynamically-add-radio-buttons/](http://rocketships.ca/blog/how-to-dynamically-add-radio-buttons/)

# python - Python while/try/if 循环

> ID：15671405
> 
> 赞同：0
> 
> 时间：2013-03-27T23:19:18.493
> 
> 标签：python

我只是在学习 python，想知道是否有更好的方法来编写这个代码，而不是使用嵌入在 while 循环中的 try/except 和 if/else。这是从学习编码困难的方式开始，我试图给用户 3 次输入数字的机会，而在第 3 次机会中，它使用 dead 函数退出。（评论是为了我自己）

```
def gold_room():
    print "this room is full of gold. How much do you take?"
    chance = 0 #how many chances they have to type a number
    while True: #keep running
        next = raw_input("> ")
        try:
            how_much = int(next) #try to convert input to number
            break #if works break out of loop and skip to **
        except: #if doesn't work then
            if chance < 2: #if first, or second time let them try again
                chance += 1
                print "Better type a number..."
            else: #otherwise quit
                dead("Man, learn to type a number.")    
    if how_much < 50: #**
        print "Nice, you're not greedy, you win!"
        exit(0)
    else:
        dead("You greedy bastard!")

def dead(why):
    print why, "Good bye!"
    exit(0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:32:16.837

这是使用递归的另一种方法：

```
def dead(why):
    print why, "Good bye!"
    exit(0)

def typenumber(attempts):
    if attempts:
        answer = raw_input('> ')
        try:
            int(answer)
        except ValueError:
            print "Better type a number..."
            return typenumber(attempts -1)
        else:
            return True

if typenumber(3):
    print 'you got it right'
else:
    dead("Man, learn to type a number.")

> a
Better type a number...
> b
Better type a number...
> 3
you got it right 
```

它是您提供的内容的精简版本，缺少大部分风味文本，但希望它可以为您提供更多关于封装而不是硬编码您的值的方法的见解。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-27T23:38:34.363

在 Python 的前提下，我可能会将 while 循环移入其中，以使您的代码更有条理且更易于阅读，而不是将您的代码封装`try`在一个循环中。这是一个可以复制和运行的工作示例：`while``except`

```
def gold_room():
    print "this room is full of gold. How much do you take?"
    while True: #keep running
        next = raw_input("> ")
        try:
            how_much = int(next) #try to convert input to number
            break #if works break out of loop and skip to **
        except: #if doesn't work then
            while True:
                chance = 0 #how many chances they have to type a number
                if chance < 2: #if first, or second time let them try again
                    chance += 1
                    print "Better type a number..."
                else: #otherwise quit
                    dead("Man, learn to type a number.")    
    if how_much < 50: #**
        print "Nice, you're not greedy, you win!"
        exit(0)
    else:
        dead("You greedy bastard!")

def dead(why):
    print why, "Good bye!"
    exit(0)

gold_room() 
```

# regex - SED - 替换字符串中间第一次出现的数字

> ID：15671406
> 
> 赞同：2
> 
> 时间：2013-03-27T23:19:27.660
> 
> 标签：regex, sed

我刚开始使用正则表达式和 sed，但遇到以下问题：

```
echo "abc2def3ghi" | sed 's/^\(.*\)[0-9]\(.*\)$/"&" \1\2/i' 
```

我希望删除第一个数字（在这种情况下为 2，但可以删除任何单个数字），但结果如下：

```
"abc2def3ghi" abc2defghi 
```

我将如何实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:22:14.717

试试这个 ：

```
sed 's/[0-9]//1' file.txt 
```

`1`中的数字`s///1`代表第 N次出现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:23:16.873

`sed`没有不情愿/非贪婪的量词，因此您必须专门匹配零个或多个非数字：

```
^\([^0-9]*\)[0-9]\(.*\)$ 
```

# excel - 在 Excel 2010 中计算百分位数

> ID：15671408
> 
> 赞同：3
> 
> 时间：2013-03-27T23:19:29.430
> 
> 标签：excel, excel-2010

这是我的以下列表。我正在尝试计算 95% 的呼叫在多少毫秒内返回。

```
Milliseconds   Number of Calls
    45         14
    46         33
    47         40
    48         41
    49         83
    50         114
    51         124
    52         82
    53         89
    54         99
    55         82
    56         72
    57         80
    58         101
    59         73
    60         74
    61         81
    62         64
    63         70
    64         61 
```

以上数据是什么意思——

```
14 calls came back in 45 milliseconds
33 calls came back in 46 milliseconds
40 calls came back in 47 milliseconds
etc etc 
```

现在我应该`95% percentile`从上面的数据中找出答案。这意味着 95% 的时间，呼叫在此毫秒内返回。

谁能告诉我如何在 Excel 表中执行此操作？谢谢您的帮助

我正在使用 Excel 2010。我已经复制了我的 Excel 工作表中的两列，因为它是为了计算百分比。

**更新：-**

通过下面的列表，我得到的`95 percentil`e 为 66。所以这意味着 95% 的时间，电话回来了`66 milliseconds`，我猜这是不对的。在我看来，95% 的时间，电话在大约 4 毫秒内回复。

```
Milliseconds    Number of calls
    0           11
    1           259
    2           504
    3           293
    4           38
    5           15
    6           1
    7           4
    8           1
    9           1
    10          1
    11          2
    23          1
    30          1
    39          1
    147         1 
```

我正在使用这个公式-

```
=PERCENTILE(IF(TRANSPOSE(ROW(INDIRECT("1:"&MAX(B$2:B$21))))<=B$2:B$21,A$2:A$21),0.95) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:52:57.897

一个额外的列将简化计算，但如果你愿意，你可以不计算......

假设 A2:A21 中的毫秒数和 B2:B21 中的调用次数，您可以使用此数组公式

`=PERCENTILE(IF(TRANSPOSE(ROW(INDIRECT("1:"&MAX(B$2:B$21))))<=B$2:B$21,A$2:A$21),0.95)`

用`CTRL`+ `SHIFT`+确认`ENTER`

或者这个非数组版本

`=LOOKUP(SUM(B$2:B$21)*0.95,SUBTOTAL(9,OFFSET(B$1,0,0,ROW(B$2:B$21)-ROW(B$2)+1)),A$2:A$21)`

我得到 63 的结果 - 更改为 0.75（第 75 个百分位），你得到 59

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:54:21.737

设置一个新列“在或低于时间的呼叫次数”，并让它计算当前行呼叫次数的总和，加上较高行（较低时间）中的所有呼叫次数。然后，在名为“百分比”的列旁边设置一列，并通过将“在或低于时间的呼叫数”除以收到的呼叫总数来计算。显示高于 95% 的百分位数的第一行是包含第 95 个百分位数的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:26:04.187

获取以毫秒为单位的时间标准偏差字段，并使用它来（95％~2 x std）计算低于~2标准偏差的调用次数？

# wordpress - 使用 WPML 和 Simplepress

> ID：15671411
> 
> 赞同：1
> 
> 时间：2013-03-27T23:19:42.693
> 
> 标签：wordpress, multilingual, forum

我有一个带有 WPML 和 Simplepress 的丹麦语/英语 WordPress 3.5.1 站点。

我的问题是 Simplepress 只会在使用名称/Slug/页面 ID 定义的单个 Wordpress 站点上显示其论坛。当我将论坛页面从丹麦语翻译成英语时，它将获得一个新的页面 ID。

无论如何我可以让 WordPress 只显示丹麦页面内容（如 iframe）？

我试过这段代码

```
<?php
$my_id = 294;
$post_id_294 = get_post($my_id);
$content = $post_id_294->post_content;
$content = apply_filters('the_content', $content);
$content = str_replace(']]>', ']]>', $content);
echo $content;
?> 
```

这将显示页面上插入的任何文本，但不显示论坛本身。

是否有可用于根据 ID 显示完整页面的 WP 命令，例如：`get_page()`？

# c# - 如何使用多种通用匹配方法获取 MethodInfo

> ID：15671421
> 
> 赞同：1
> 
> 时间：2013-03-27T23:21:06.140
> 
> 标签：c#, .net, reflection

我整天都在阅读有关这方面的帖子，但似乎没有一个与我所掌握的情况相匹配。我有一个具有以下方法的类：

```
IQueryable<TBusinessContract> Query<TBusinessContract>(
    Expression<Func<TBusinessContract, bool>> condition, params string[] children )
    where TBusinessContract : BusinessContract;

IQueryable<TSubType> Query<TSuperType, TSubType>(
    Expression<Func<TSubType, bool>> condition, params string[] children )
    where TSuperType : BusinessContract
    where TSubType : BusinessContract; 
```

我想为第一个获取 MethodInfo。我尝试了许多不同的组合和排列，我得到 null 或模棱两可的匹配异常。我想出了以下可行的方法，但感觉有点笨拙。

```
MethodInfo queryMethod = Dal.GetType()
    .GetMethods( BindingFlags.Public | BindingFlags.Instance )
    .Where( mi => mi.Name == "Query" )
    .Where( mi => mi.IsGenericMethod )
    .Where( mi => mi.GetGenericArguments().Length == 1 )
    .SingleOrDefault(); 
```

这是我能做的最好的还是我错过了什么？我正在使用.NET 4.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T02:12:46.637

对于这些情况，似乎没有真正好的反射方法。我觉得你做的很好。写得更紧凑一点：

```
MethodInfo queryMethod = Dal.GetType().GetMethods()
    .SingleOrDefault(mi => mi.Name == "Query" &&
    mi.GetGenericArguments().Length == 1); 
```

即使您的类型包含也命名的非泛型方法`Query`，它看起来`GetGenericArguments`也会表现良好并返回一个空（零长度）数组。

# iphone - 详细视图不响应 MasterViewController

> ID：15671424
> 
> 赞同：0
> 
> 时间：2013-03-27T23:21:22.543
> 
> 标签：iphone, ios

我有一个 UISplitViewController，它也是 UIWindow 的根视图。我将两个 UINavigationController 分别设置为主视图控制器和详细视图控制器。UITableViewController 是主视图控制器内部的 UINavigationController 的根视图。当我从 UITableViewController 中选择一个项目时，详细视图控制器会正确响应。但是，当我从 MasterViewController 的 UINavigationController 推送另一个 UITableViewController 时，详细视图控制器停止响应。

我使用 [[splitviewcontroller.viewcontrollers lastObject] topViewController] 来获取它的详细视图控制器。它适用于 UINavigation 控制器内的第一个视图控制器，但是在我使用 self.navigationcontroler pushViewController 推送一个新的视图控制器之后，并在这个新的视图控制器上使用 [[splitviewcontroller.viewcontrollers lastObject] topViewController]。不知何故，我无法获得这个 splitviewcontroller 的详细视图控制器。

有没有专家可以帮我解决。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:34:47.173

看起来你有一个非常复杂的层次结构。我的建议是绘制 UI 结构并参考 Storyboard 以获得帮助。您可以使用 View Controller 的 parentViewController 属性来获取对所需视图控制器的引用。此外， viewControllers 属性将返回由接收者管理的视图控制器数组，以便您查看层次结构的样子。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:25:36.933

而不是`[[splitviewcontroller.viewcontrollers lastObject] topViewController]`尝试使用`[[splitviewcontroller.viewcontrollers lastObject] visibleViewController]`. 希望这可以帮助！

# playback - iOS MPMoviePlayer（应用激活后恢复播放）

> ID：15671425
> 
> 赞同：0
> 
> 时间：2013-03-27T23:21:28.613
> 
> 标签：playback, mpmovieplayer, resume

我有应用程序，正在播放来自网络的视频

一切正常

但是当用户离开应用程序阅读电子邮件或任何东西时

回来的球员走了！大问题

所以，我希望用户在回到应用程序后继续观看

到目前为止，这是我的代码

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didEnterBackground) name:UIApplicationDidEnterBackgroundNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didEnterforground) name:UIApplicationWillEnterForegroundNotification object:nil]; 
```

方法

```
- (void) didEnterBackground
{
[theMovie.moviePlayer pause];
NSLog(@"Playing pause");
}

- (void) didEnterforground
{
[theMovie.moviePlayer play];
NSLog(@"Playing resume");
} 
```

知道我使用 [self presentMoviePlayerViewControllerAnimated:theMovie]; 不在视野范围内播放

如果那是代码有效，但是没有任何效果

请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:44:24.033

答案很简单，编辑info.plist。
添加后台权限，需要的后台模式，设置类别App播放音频

试试看！

# sql - GROUP BY 数字，聚合为日期

> ID：15671429
> 
> 赞同：0
> 
> 时间：2013-03-27T23:21:40.313
> 
> 标签：sql, group-by, distinct

在表格中，我有一个帐号和相应的日期。从查询中，我只想获得不同的帐号和相应的日期。我可以在 1 个查询中执行此操作还是需要多个查询？如果我使用：SELECT DISTINCT 帐户，日期；然后仍然会获得重复的帐户，因为它会查找帐户和日期的唯一组合。如果我使用 GROUP BY，那么如果 1 个帐户有多个日期，我如何只选择 1 个日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:25:30.807

你有账号和日期吗？如果有多个日期，帐号可以是多余的？那么你遇到一个逻辑问题，因为 sql 应该选择哪个日期？

```
account number | date
---------------------------------------
1002 | 2013-01-01
1003 | 2013-03-12
1003 | 2013-03-13
1003 | 2013-03-16
1004 | 2013-06-11 
```

您可以使用“max”或“min”等函数。如果您需要更复杂的逻辑，请告诉我们：

```
Select account, max(date) FROM tablename GROUP BY account 
```

因此，您将获得最新日期的唯一帐号。

# java - Java 标识符不工作

> ID：15671431
> 
> 赞同：0
> 
> 时间：2013-03-27T23:21:42.677
> 
> 标签：java

所以我有一个汽车班和一个汽车测试员班。这是汽车类：

```
package main;

public class Car {

    private long distance;
    private double newDistance;
    private double gasAmount;
    private double newGasAmount;

    // Contrsuctor 
    Car(){
        distance = 0;
    }

    Car(long newDistance){
        distance = newDistance;
    }
    //Accessor
    public long getDistance(){
        return distance;
    }

    public double getGasInTank(){
        return gasAmount;
    }

    //Mutator
    public void drive(double distance){
        newDistance = distance;
    }    
    public void addGas(double gasAmount){
        newGasAmount = gasAmount;
    }
} 
```

这就是问题所在。在我的 carTester 课程中，为什么`myVehicle.drive();`不起作用？它用红色（netBeans）强调它并说“包myVehicle不存在”

```
package main;

public class CarTester {

    Car myVehicle = new Car();
    myVehicle.drive();
    double gasLeft = myVehicle.getGasInTank();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:23:49.073

当您尝试对`Object`类块中的 an 调用操作时，编译器将发出此消息。

您需要`main`使用`CarTester`. 您还需要`double` `distance`根据您的方法提供一个值`drive`。

```
public class CarTester {
  public final static void main(String[] args) {
    Car myVehicle = new Car();
    myVehicle.drive(33.2);
    ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:25:40.340

在方法内部的 CarTester 类中运行您的代码。例如 public final static void main(String[] args) {...}...

例如

```
package main;

public class CarTester {
  public final static void main(String[] args) {
    Car myVehicle = new Car();
    myVehicle.drive();
    double gasLeft = myVehicle.getGasInTank();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:26:15.603

我认为问题在于您在 class 中**没有方法**`CarTester`。编译器抱怨它找不到名称为 的包`myVehicle`，因为它试图将该行解释`myVehicle.drive();`为**类型**。您需要将类更改为`CarTester`：

```
public class CarTester
{
    public static void main(string[] args)
    {
        Car car = new Car();
        car.drive(10.0);
        double gasLeft = car.getGasInTank();
    }
} 
```

# java - 从控制台写入文本文件，文件数据未保存

> ID：15671433
> 
> 赞同：0
> 
> 时间：2013-03-27T23:21:57.243
> 
> 标签：java, file, fwrite

我正在尝试将 java 控制台的内容保存到一个文本文件中，但是每次我关闭程序时，文本文件都会变为空白并重写它。即如果我今天写一个文件，关闭程序，明天再回来运行它，它已经记住了写入它的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:35:08.937

您要打开[*附加*](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29)模式`OutputStream`。演示代码：[](http://docs.oracle.com/javase/6/docs/api/java/io/FileOutputStream.html#FileOutputStream%28java.lang.String,%20boolean%29)

 *```
PrintWriter out = new PrintWriter(
                     new FileOutputStream(new File(filename), true)); 
```

当您将流写入文件时，您所经历的是正常行为，这并不特定于 Java API。*

# php - 谷歌浏览器控制台中的网站优化和随机 javascript 错误

> ID：15671434
> 
> 赞同：0
> 
> 时间：2013-03-27T23:22:00.060
> 
> 标签：php, performance, zend-framework, caching, optimization

我的网站确实存在很大问题：http: [//ap.v11.pl/sklep/](http://ap.v11.pl/sklep/) 它加载速度很慢，我不知道如何解决。

我从 Chrome 控制台收到了一些奇怪的错误：[http](http://scr.hu/0an/xq5bz) ://scr.hu/0an/xq5bz 错误是随机的，例如我收到的错误是无法找到但该资源存在并且路径很好。

我的 htaccess： http: [//pastebin.com/ewZZBLFg](http://pastebin.com/ewZZBLFg)

页面正在使用 ZendFramework 2

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:21:34.137

我的假设是：

1.  您正在将 Ghostery 作为 Chrome 插件或类似插件运行，例如，您的浏览器会阻止您的一些脚本，例如 adstat 和 google analyticis
2.  您的网络服务器在为 javascript 内容发送正确的 mime 类型时出现问题。查看有关“资源解释为...”错误消息的此[帖子](https://stackoverflow.com/questions/3467404/chrome-says-resource-interpreted-as-script-but-transferred-with-mime-type-text)

可能只有一个前端无法正常工作。这可以解释为什么您并非总是收到错误。

通常，您的网站充满了脚本和图像。第一页有 > 250 个请求和近 4 Mb。这是非常多的，这需要时间。亚马逊的 Frontpage 有一半的请求数量，大约 300kb。

您应该检查是否可以减少请求数量 - yslow 插件可能会在这里给您一些很好的建议。你能减少图像大小和图像数量吗？（CSS精灵？）

您还应该检查是否必须通过常规网络浏览器提供所有图像，或者是否可以使用轻量级替代方案。你在使用 NGINX 吗？AFAIK 它有很好的性能调整选项。

编辑：作为起点： http: [//gtmetrix.com/reports/www.ap.v11.pl/fBGKScZ6](http://gtmetrix.com/reports/www.ap.v11.pl/fBGKScZ6)

# php - Javascript foreach

> ID：15671435
> 
> 赞同：0
> 
> 时间：2013-03-27T23:22:05.530
> 
> 标签：php, javascript, foreach

我有一个用于使用图的 javascript，javascript 中图表的数据定义如下：

```
data: [1,2,3,4,5,6], 
```

我在 javascript 之前有一个 foreach 和一个我试图在这个数据字段中使用的值，如下所示：

数据： []，

现在，如果我只是 echo "$test"; 在页面上的 javascript 之外，我得到以下输出 1、2、3、4、5、6，这是正确的，如果我复制此输出并直接在数据字段中使用它，但当我尝试调用 $test 值时它可以工作在数据字段中它不起作用。所以简而言之

```
data: [1,2,3,4,5,6], (WORKS)
data: [<?php echo "$test"; ?>], (does not work even though when doing normal echo outside java it does print 1,2,3,4,5,6 
```

任何帮助，将不胜感激

```
foreach ($chart->usage->days->day as $day): 
$totals = $day->total;
$datau = Round(("$totals") / (1024 * 1024 * 1024), 2);
$test = "$datau, "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:24:24.763

尝试做

```
$test="1,2,3,4,5,6"; //Make sure to remove a trailing comma.
data: [<?php echo $test; ?>] 
```

我认为不需要“$test”。

旁注：您也可以取出回声。另外，既然`data`是一个数组，我也会存储`$test`为一个数组。

```
$test=array(1,2,3,4,5,6);
data: [<?= implode(",", $test) ?>] 
```

在我看来，这看起来更干净。

编辑：根据您的 foreach，请尝试：

```
$test=array();
foreach ($chart->usage->days->day as $day){
$totals = $day->total;
$test[] = round(($totals) / (1024 * 1024 * 1024), 2);
}

data: [<?= implode(",", $test) ?>], 
```

# c# - 我的公式不起作用.... asp.net mvc 4 razor 语法

> ID：15671438
> 
> 赞同：0
> 
> 时间：2013-03-27T23:22:21.593
> 
> 标签：c#, asp.net-mvc, razor

我已经尝试了很多更改，但没有任何效果......我遇到编译器错误......
公式的目的是用户将使用单选按钮给该地方评分，并在 TextArea 内写一个文本评论...... ..

```
@using (Html.BeginForm()) {

Rating:
for(int i=1;i<6;i++){
<text>@i</text>
Html.RadioButton("Rating",i)
}

<h2>Write a Review for @Model.Name</h2>
Html.TextArea("Review")

<input type="submit" value="Send Review" />
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:24:56.423

该问题与您如何尝试在`@using`块内打印 html 有关。试试这个：

```
@using (Html.BeginForm()) {
  @:Rating:
  for(int i=1;i<6;i++) {
    <text>@i</text>
    @Html.RadioButton("Rating",i)
  }

  <h2>Write a Review for @Model.Name</h2>
  @Html.TextArea("Review")

  <input type="submit" value="Send Review" />
} 
```

或者更好的是，替换`@:Rating:`为

```
@Html.Label("Rating", "Rating:") 
```

# java - 用Java中的方法返回一个数组

> ID：15671444
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:23:01.347
> 
> 标签：java, arrays, methods

我有个疑问。我正在开发以下代码，它将成为您手动引入的数字的乘法表。我无法得到的是打印表格。我不知道发生了什么，因为据我所知，所有代码都是正确编写的。

```
public class Tabla 
{

public static void main (String[] args) 
{        
    int n=4;       

    Tabla table = new Tabla ();
    int dato [];
    dato=table.producto(n);        

    for (int j=1;j<=10;j++)
    {System.out.println(dato[j]);}

}

public int [] producto(int num) 
{ 
    int a[]={'0'};

    for (int i=1;i<=10;i++)
    {a[i]=num*i;}

    return a;

}    

} 
```

有任何想法吗？？

提前致谢！

**我将代码更改为：

```
public class Tabla 
{

    public static void main (String[] args) 
    {        
        int n=4;       
        int j;

        Tabla table = new Tabla ();
        int dato[]=new int [10];
        dato=table.producto(n);        

        for (j=0;j<10;j++)
        {System.out.println(dato[j]);
        }

    }

    public int [] producto(int num) 
    { 
        // make a 10-element array
        int a[] = new int[10];

       // fill up the array with products
        for (int i = 0; i < 10; i++)
        {a[i] = num * (i+1); }

        return a;            

    }       
} 
```

奇迹般有效！现在我想知道为什么当我有 for 循环时编译器会抛出“ArrayIndexOutOfBoundsException” `for (int i = 1; i <=10; i++)`

谢谢您的帮助！:D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:35:24.410

根据 Wasserman 的回答，您应该写的内容如下：

```
public int[] producto(int num) 
{
    // make a 10-element array
    int a[] = new int[10];

    // fill up the array with products
    for (int i = 0; i < 10; i++)
        a[i] = num * (i + 1);

    return a;
} 
```

您创建了一个单元素数组，而您希望填充一个 10 元素数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T23:25:24.443

两个问题：

```
int a[]={'0'}; 
```

这一行创建了一个`a`只有一个元素的数组——不是你要填充的 11——而且，那个元素是 character 的 ASCII 码`0`，这几乎肯定不是你想要的。

# php - 简单的双三次图像插值算法？

> ID：15671445
> 
> 赞同：2
> 
> 时间：2013-03-27T23:23:07.767
> 
> 标签：php, algorithm, delphi, interpolation

大多数插值算法（Lanczos、Hermite、Bicubic）使用非常简单的函数来计算一些值。但是这些值随后会通过一些非常复杂的函数发送，这些函数会做一些魔术，并且会调整图像的大小。我想了解这个神奇的函数（窗口函数？），但我在 Delphi、Pascal、PHP 或简单的 C++ 中找到的大多数代码已经过优化，或者是一些大型库的一部分，并且使用了大量的子函数、类和其他东西。我只是想了解基础知识。

例如，Delphi 中“最近邻”的函数是：

```
function BoxFilter(Value: Single): Single;
begin
  if (Value > -0.5) and (Value <= 0.5) then
    Result := 1.0
  else
    Result := 0.0;
end; 
```

如何将这样的函数应用于我的二维像素数组（又名图像）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T05:50:11.883

您首先需要实现调整大小功能。基本上，调整图像大小是重复对图像进行采样，以获取与新图像像素相对应的数据。假设您将 101x101 的图像调整为 160*67。然后，目标图像（0,0）处的像素对应于从源（0.0,0.0）处采样，这等于（0,0）处的像素。但是，说 (34,12) 处的像素对应于`(34*100/159,12*100/66)`==`(21.38,18.18)`源中的位置，您必须对其进行采样。您所说的函数在结果中返回选定像素值的一部分，提供的值等于采样要求的值减去该像素的相应坐标。比如说，(4,3) 处的像素将有一个 0 部分，因为该函数以乘法的方式应用于具有值 (21.38-4) 和 (18.18-3) 的该像素，两次都返回 0。 (21 处的像素,18) 将占 1 部分（其值的 100% 将添加到结果中），因为两次调用都将使用`-0.5 - 0.5`间隔内的值进行。

为了在不均匀的坐标上正确地从图像中采样颜色，您需要对这些颜色进行函数处理，然后对采样值进行四舍五入以检测中心像素，然后将该函数应用于它和 8 个周围像素，获得 9 个参与值。然后，您将参与的像素颜色作为权重相加，将它们组合成一个像素值并将其作为采样结果返回。

希望这可以帮助。

# arduino - 将 Arduino Wi-Fi shield 设置为静态 IP 地址

> ID：15671451
> 
> 赞同：2
> 
> 时间：2013-03-27T23:23:19.740
> 
> 标签：arduino

如何将 Arduino 设置为具有静态 IP 地址的示例是什么？

我正在从以太网库中寻找类似于以下语句的功能。

```
Ethernet.begin(MACadr, IPaddr); 
```

我使用 Wi-Fi[屏蔽](http://www.arduino.cc/en/Main/ArduinoShields)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T00:46:56.200

抱歉，这是不可能的。此声明的参考资料在[此处](http://arduino.cc/forum/index.php?topic=122478.0)。

基本上，所有的 DHCP 东西（分配动态 IP 地址的代码）都被嵌入到 WiFi shield 的固件中，而且这个代码是不开放的，所以你不能更新它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T01:22:32.330

“WiFi.config() 允许您配置静态 IP 地址以及更改 WiFi shield 上的 DNS、网关和子网地址。”

您可以在此处阅读有关此内容的更多信息：http: [//arduino.cc/en/Reference/WiFiConfig](http://arduino.cc/en/Reference/WiFiConfig)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T02:17:43.853

我在我的情况下所做的是在我的路由器上为这个 MAC 地址设置一个保留。这使代码变得简单。出于某种原因，我的 WiFi shield 应该使用的 MAC 地址并不是它实际使用的。我能够查看路由器上的 DHCP 表并找到它正在使用的 MAC 地址并创建一个预留，我们很高兴......

# hibernate - 无法将对象附加到 Hibernate 会话

> ID：15671456
> 
> 赞同：3
> 
> 时间：2013-03-27T23:23:46.900
> 
> 标签：hibernate, grails, grails-orm

我有 3 个具有这些关系的域：

A hasMany [bs: B] B 属于 [c: C] C

在 webflow 中，我这样做（简化版）：

```
flow.a = new A(stuff:stuff)
flow.a.addToBs(new B(c:C.get(1)))
flow.a.addToBs(new B(c:C.get(2)))
flow.a.addToBs(new B(c:C.get(3))) 
```

然后我尝试在 gsp 页面上显示所有这些信息：

```
<g:each in="${a.bs}" var="b">
    ${b.c.someProperty}
</g:each> 
```

这就是我得到的地方`LazyInitializationException`。我想我理解为什么（webflow 序列化`flow`范围）但是当我尝试它们的`attach()`所有实例`C`都没有附加时：

```
flow.a.bs.each {
    it.c.isAttached() // returns false
    it.c.attach()
    it.c.isAttached() // returns false
} 
```

为什么是这样？我看不到任何错误消息......有没有更好的方法来做到这一点（我正在考虑`lazy:false`为这些关系设置）？

# javascript - 在同一页面上添加 2 个赞按钮

> ID：15671458
> 
> 赞同：0
> 
> 时间：2013-03-27T23:23:50.257
> 
> 标签：javascript, facebook

我需要在同一页面上添加 2 个类似按钮，我从 facebook 网站获得了 javascript 代码和一个 div，因为我需要添加其中 2 个它们应该有 2 个不同的 id，但是在 javascript 部分我看不到 fb- root，所以我不知道是否可以修改以及如何修改

这是 id 为**fb-root的 div**

```
<div id="fb-root"></div> 
```

我也尝试尝试两次添加相同的标签，但它不起作用

我尝试在互联网上搜索，但找不到任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:55:13.110

如“您的喜欢按钮插件代码：”中所述

> 在您的页面上包含一次 JavaScript SDK

您只需包含一次 Javascript SDK。由于您需要添加两个[类似的按钮](http://developers.facebook.com/docs/reference/plugins/like/)，您可以添加

```
<div class="fb-like" data-href="<URL>" data-send="true"
 data-width="450" data-show-faces="true"></div> 
```

并将 URL 更改为您喜欢的 URL。

# xml - 去除电子邮件地址后缀

> ID：15671459
> 
> 赞同：1
> 
> 时间：2013-03-27T23:23:52.493
> 
> 标签：xml, email, xslt

我有一个xml如下：

```
<bug>
    <reporter name="Jane Doe">jane.doe@example.com</reporter>
    <assigned_to name="John Doe">john.doe@example.com</assigned_to>
    <who name="john Doe">john.doe@example.com</who>
</bug> 
```

我想通过从字符串中删除 '@example.com' 来输出 jane.doe、john.doe。我是 xsl 新手，仅限于 xsl 1.0。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:37:32.567

您可以使用 xpath 函数**[substring-before](http://www.w3.org/TR/xpath/#function-substring-before)**：

```
<xsl:value-of select="substring-before('jane-doe@example.com', '@')"/> 
```

[工作示例](http://xsltransform.net/948Fn57)

# bash - 如何正确重定向 ls -d */ 的输出？

> ID：15671463
> 
> 赞同：1
> 
> 时间：2013-03-27T23:24:12.350
> 
> 标签：bash

对命令行相当陌生，所以请耐心等待。

我应该在`/usr/local`最后找到带有数字的目录。我设法仅列出以下目录：

```
ls -d */ 
```

但是当我尝试通过管道使用任何东西时：

```
find -name
grep
look 
```

没有显示输出。我什至尝试使用“*”通配符进行搜索，但没有显示任何内容。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:07:02.263

```
find /usr/local -type d -name '*[0-9]' 
```

这一切合二为一；查找`/usr/local/`名称以数字结尾的目录（并隐式打印结果）。

您使用的代码`ls`可能需要如下所示：

```
cd /usr/local || exit 1
ls -d */ | grep '[0-9]/$' 
```

这将列出名称末尾带有斜杠的目录，因此您需要搜索有一个数字后跟斜杠和名称末尾的名称。`find`此命令与命令之间的一个区别是`ls`仅列出立即在其中的目录，`/usr/local`而`find`将搜索目录层次结构。如果您不想`find`向下搜索层次结构，请这样说：

```
find /usr/local -maxdepth 1 -type d -name '*[0-9]' 
```

（如果你放在`-maxdepth 1`最后，有些版本的人`find`会对此嗤之以鼻并抱怨。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:28:02.143

find 命令应该能够做你想做的事，而且从它的外观上看，你得到了它几乎是正确的：

```
find / -type d -name <directory_name> 
```

这将在根目录中查找具有您指定名称的任何目录。如果您像上面显示的那样运行命令，我认为缺陷是您没有指定目录来开始搜索。如果您需要任何其他参数来指定，也可以使用手册页：

[http://unixhelp.ed.ac.uk/CGI/man-cgi?find](http://unixhelp.ed.ac.uk/CGI/man-cgi?find)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:57:38.607

```
find "/path/to/some/dir/*[0-9]" -type d -maxdepth 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:58:51.860

```
ls -l /path/to/some/dir | grep "^d" | awk '{print $9}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T00:00:18.460

```
for file in /path/to/some/dir/*; do \
    if [[ -d $file ]]; then \
        echo $file; \
    fi \
done 
```

# keyevent - 如何使用箭头键移动 GridWorld 中的 Bug

> ID：15671466
> 
> 赞同：2
> 
> 时间：2013-03-27T23:24:30.740
> 
> 标签：keyevent, arrow-keys, gridworld

我正在为我的计算机科学课制作一个游戏，我正在尝试使用箭头键移动一个扩展 Bug 的角色对象。我应该把代码用箭头键移动到 Character 类还是 World 类中？代码应该是什么样的？现在我已经在 Character 类中得到了这段代码，它符合要求，但是当我尝试在网格中运行它时，当我按下箭头键时没有任何反应。

```
 public class Character extends Bug
{
Random pokemon;
public Character()
{

}

public void act(KeyEvent e)
{
        move(e);
        pokemon = new Random();
        if(pokemon.nextInt(10) == 5)
            System.out.println("It works!!");
}

public void move(KeyEvent e)
{
    Grid<Actor> gr = getGrid();
    Location loc = getLocation();
    if(gr == null)
        return;
    if( e.getKeyCode() == KeyEvent.VK_RIGHT)
    {
        if(!(getDirection() == 90))
            setDirection(90);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }
    else if( e.getKeyCode() == KeyEvent.VK_LEFT)
    {
        if(!(getDirection() == 270))
            setDirection(270);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }
    else if( e.getKeyCode() == KeyEvent.VK_UP)
    {
        if(!(getDirection() == 0))
            setDirection(0);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }
    else if( e.getKeyCode() == KeyEvent.VK_DOWN)
    {
        if(!(getDirection() == 180))
            setDirection(180);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }

public class Character extends Bug
{
Random pokemon;
public Character()
{

}

public void act(KeyEvent e)
{
        move(e);
        pokemon = new Random();
        if(pokemon.nextInt(10) == 5)
            System.out.println("It works!!");
}

public void move(KeyEvent e)
{
    Grid<Actor> gr = getGrid();
    Location loc = getLocation();
    if(gr == null)
        return;
    if( e.getKeyCode() == KeyEvent.VK_RIGHT)
    {
        if(!(getDirection() == 90))
            setDirection(90);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }
    else if( e.getKeyCode() == KeyEvent.VK_LEFT)
    {
        if(!(getDirection() == 270))
            setDirection(270);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }
    else if( e.getKeyCode() == KeyEvent.VK_UP)
    {
        if(!(getDirection() == 0))
            setDirection(0);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    }
    else if( e.getKeyCode() == KeyEvent.VK_DOWN)
    {
        if(!(getDirection() == 180))
            setDirection(180);
        else
        {

            Location next = loc.getAdjacentLocation(getDirection());
            if (gr.isValid(next))
                moveTo(next);
            else
                removeSelfFromGrid();
        }
    } 
```

此代码对于 KeyEvent 是否正确，我如何从 World 类调用此代码？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:22:38.383

在`ActorWorld`类中有一个方法`boolean keyPressed(String description, Location loc)`，该方法的唯一目的是在子类中被覆盖。`description`是在[此处](http://docs.oracle.com/javase/6/docs/api/javax/swing/KeyStroke.html#getKeyStroke%28java.lang.String%29)`KeyStroke`找到的格式，而 loc 是按下键时光标所在的位置。（虽然在你的情况下没关系）`Location`

所以简而言之，您应该`KeyPressed`在自定义`CharacterWorld extends ActorWorld`类中进行扩展。

# sql - 查找处理多个作业/订单的总时间，每个工人和作业/订单的重叠/重叠时间

> ID：15671467
> 
> 赞同：0
> 
> 时间：2013-03-27T23:24:32.687
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

当我第一次开始在 sql 世界中寻找这个问题的答案时，我夜以继日地搜索。找不到与我的需求类似的任何东西，所以我决定提出并回答我自己的问题，以防其他人像我一样需要帮助。

这是我拥有的数据的示例。为简单起见，这一切都来自 Job 表。每个 JobID 都有自己的开始和结束时间，它们基本上是随机的，可以重叠、有间隙、与其他作业同时开始和结束等。

```
--Available--
JobID  WorkerID  JobStart             JobEnd
1      25        '2012-11-17 16:00'  '2012-11-17 17:00'
2      25        '2012-11-18 16:00'  '2012-11-18 16:50'
3      25        '2012-11-19 18:00'  '2012-11-19 18:30'
4      25        '2012-11-19 17:30'  '2012-11-19 18:10'
5      26        '2012-11-18 16:00'  '2012-11-18 17:10'
6      26        '2012-11-19 16:00'  '2012-11-19 16:50' 
```

我希望查询结果显示的是：

```
WorkerID  TotalTime(in Mins)
25        170
26        120 
```

编辑：忘了提到重叠需要被忽略。基本上，这应该像对待小时工而不是承包商一样对待这些工人及其工作。就像我工作了两个 jobID 并从下午 12:00 到 12:30 开始和完成它们一样，作为员工，我只能获得 30 分钟的报酬，而承包商可能会获得 60 分钟的报酬，因为他们的工作是单独对待的，而且每份工作获得报酬。此查询的目的是分析数据库中与工人相关的工作，并且需要找出该工人是否被视为雇员，他在给定时间内的总工作时间是多少。

EDIT2： 7 小时内不让我回答我自己的问题，稍后将其移到那里。

好的，现在回答问题。基本上，我使用临时表在我正在查找的作业的最小和最大日期时间之间构建每一分钟。

```
IF OBJECT_ID('tempdb..#time') IS NOT NULL
BEGIN
drop table #time
END
DECLARE @FromDate AS DATETIME,
     @ToDate AS DATETIME,
     @Current AS DATETIME
SET @FromDate = '2012-11-17 16:00'
SET @ToDate = '2012-11-19 18:30'

create table #time  (cte_start_date datetime)
set @current = @FromDate
while (@current < @ToDate)
begin

insert into #time (cte_start_date)
values (@current)

set @current = DATEADD(n, 1, @current)

end 
```

现在我有一个临时表中的所有分钟。现在我需要将所有作业表信息加入其中，并一次性选择我需要的内容。

```
SELECT J.WorkerID
,COUNT(DISTINCT t.cte_start_date) AS TotalTime
FROM #time AS t
INNER JOIN Job AS J ON t.cte_start_date >= J.JobStart AND t.cte_start_date < J.JobEnd --Thanks ErikE
GROUP BY J.WorkerID --Thanks Martin Parkin

drop table #time 
```

这是一个非常简单的答案，很适合让某人开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:29:18.540

如下查询应提供您正在寻找的答案：

```
SELECT  WorkerID,
    SUM(DATEDIFF(minute, JobStart, JobEnd)) AS TotalTime
  FROM  Job
  GROUP BY WorkerID 
```

抱歉，它未经测试（我没有 SQL Server 在这里测试它），但它应该可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T01:45:38.463

此查询也可以完成这项工作。它的性能非常好（虽然执行计划看起来不太好，但实际的 CPU 和 IO 击败了许多其他查询）。

[看到它在 Sql Fiddle 中工作](http://sqlfiddle.com/#!3/60e99/1)。

```
WITH Times AS (
   SELECT DISTINCT
      H.WorkerID,
      T.Boundary
   FROM
      dbo.JobHistory H
      CROSS APPLY (VALUES (H.JobStart), (H.JobEnd)) T (Boundary)
), Groups AS (
   SELECT
      WorkerID,
      T.Boundary,
      Grp = Row_Number() OVER (PARTITION BY T.WorkerID ORDER BY T.Boundary) / 2
   FROM
      Times T
      CROSS JOIN (VALUES (1), (1)) X (Dup)
), Boundaries AS (
   SELECT
      G.WorkerID,
      TimeStart = Min(Boundary),
      TimeEnd = Max(Boundary)
   FROM
      Groups G
   GROUP BY
      G.WorkerID,
      G.Grp
   HAVING
      Count(*) = 2
)
SELECT
   B.WorkerID,
   WorkedMinutes = Sum(DateDiff(minute, 0, B.TimeEnd - B.TimeStart))
FROM
   Boundaries B
WHERE
   EXISTS (
      SELECT *
      FROM dbo.JobHistory H
      WHERE
         B.WorkerID = H.WorkerID
         AND B.TimeStart < H.JobEnd
         AND B.TimeEnd > H.JobStart
   )
GROUP BY
   WorkerID
; 
```

使用聚集索引`WorkerID, JobStart, JobEnd, JobID`，上面的 7 行示例为新的工作人员/作业数据重复了足够多的时间以生成包含 14,336 行的表，这是性能结果。我已经在页面上包含了其他有效/正确的答案（到目前为止）：

```
Author  CPU  Elapsed  Reads   Scans
------  ---  -------  ------  -----
  Erik  157    166      122       2
Gordon  375    378    106964  53251 
```

我在不同的（较慢的）服务器上进行了更详尽的测试（每个查询运行 25 次，每个指标的最佳和最差值被丢弃，其余 23 个值被平均）并得到以下结果：

```
Query     CPU   Duration  Reads   Notes
--------  ----  --------  ------  ----------------------------------
Erik 1    215   231       122     query as above
Erik 2    326   379       116     alternate technique with no EXISTS
Gordon 1  578   682       106847  from j
Gordon 2  584   673       106847  from dbo.JobHistory 
```

我认为可以确保改进的替代技术。好吧，它节省了 6 次读取，但消耗了更多的 CPU（这是有道理的）。与其将每个时间片的开始/结束统计信息进行到底，不如只重新计算哪些片与`EXISTS`原始数据保持一致。可能是少数工作人员的不同配置文件可能会更改不同查询的性能统计信息。

如果有人想尝试它，请使用我的小提琴中的`CREATE TABLE`and`INSERT`语句，然后运行 ​​11 次：

```
INSERT dbo.JobHistory
SELECT
   H.JobID + A.MaxJobID,
   H.WorkerID + A.WorkerCount,
   DateAdd(minute, Elapsed + 45, JobStart),
   DateAdd(minute, Elapsed + 45, JobEnd)
FROM
   dbo.JobHistory H
   CROSS JOIN (
      SELECT
         MaxJobID = Max(JobID),
         WorkerCount = Max(WorkerID) - Min(WorkerID) + 1,
         Elapsed = DateDiff(minute, Min(JobStart), Min(JobEnd))
      FROM dbo.JobHistory
   ) A
; 
```

我为此查询构建了另外两个解决方案，但性能大约翻倍的最佳解决方案有一个致命缺陷（无法正确处理完全封闭的时间范围）。另一个有非常高/差的统计数据（我知道但必须尝试）。

**解释**

使用每行中的所有端点时间，通过复制每个端点时间，然后以每次与下一个可能时间配对的方式进行分组，构建所有可能感兴趣的时间范围的不同列表。将这些范围的经过分钟数与任何实际工人的工作时间重合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:49:06.367

这是一个复杂的查询。解释如下。

```
with j as (
     select j.*,
            (select 1
             from jobs j2
             where j2.workerid = j.workerid and
                   j2.starttime < j.endtime and
                   j2.starttime > j.starttime
            ) as HasOverlap
     from jobs j
    )
select workerId,
       sum(datediff(minute, periodStart, PeriodEnd)) as NumMinutes
from (select workerId, min(startTime) as periodStart, max(endTime) as PeriodEnd
      from (select j.*,
                   (select min(starttime)
                    from j j2
                    where j2.workerid = j.workerid and
                          j2.starttime >= j.starttime and
                          j2.HasOverlap is null
                   ) as thegroup
            from j
           ) j
      group by workerId, thegroup
     ) j
group by workerId; 
```

理解这种方法的关键是理解“重叠”逻辑。当下一个开始时间在前一个结束时间之前时，一个时间段与下一个时间段重叠。通过为每条记录分配一个重叠标志，我们知道它是否与“下一个”记录重叠。上述逻辑为此使用了开始时间。使用 JobId 可能会更好，特别是如果同一工人的两个作业可以同时开始。

重叠标志的计算使用相关子查询（`j`在`with`子句中）。

然后，对于每条记录，我们返回并找到第一个`overlap`值为 NULL 的记录。这为给定重叠集中的所有记录提供了分组键。

然后，剩下的只是聚合结果，首先在`workerId`/group 级别，然后在`workerId`级别以获得最终结果。

我没有运行这个 SQL，所以它可能有语法错误。

# php - 尝试在 php 类中为常量分配值会导致意外的 T_variable

> ID：15671469
> 
> 赞同：0
> 
> 时间：2013-03-27T23:24:47.043
> 
> 标签：php, syntax-error, constants

我的代码有什么问题？

```
<?php
class someClass
{ 

  const HOSTNAME = $_SERVER["SERVER_NAME"]; // p.s: this is line # 5 
```

基本上当这个类的一个对象被实例化时，我得到这个： **syntax error, unexpected T_VARIABLE in /var/www/html/..../someClass.php on line 5**

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:26:32.207

来自[手册](http://www.php.net/manual/en/language.oop5.constants.php)：（强调我的）

> 该值必须是常量表达式，而不是（例如）**变量**、属性、数学运算的结果或函数调用。

# angularjs - Angular.js：$eval 是如何工作的，为什么它与 vanilla eval 不同？

> ID：15671471
> 
> 赞同：153
> 
> 时间：2013-03-27T23:24:51.600
> 
> 标签：angularjs

我对你经常在指令中看到的内容很好奇`$scope.$eval`，所以我查看了源代码并在以下位置找到了以下内容`rootScope.js`：

```
 $eval: function(expr, locals) {
    return $parse(expr)(this, locals);
  }, 
```

`$parse`似乎由`ParseProvider`in定义`parse.js`，它似乎定义了自己的某种迷你语法（文件长 900 行）。

我的问题是：

1.  究竟在`$eval`做什么？为什么它需要自己的迷你解析语言？

2.  为什么不`eval`使用普通的旧 JavaScript？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-03-27T23:36:09.777

`$eval`并且`$parse`不要评估 JavaScript；他们评估 AngularJS[表达式](http://docs.angularjs.org/guide/expression)。链接的文档解释了表达式和 JavaScript 之间的区别。

**问：$eval 到底在做什么？为什么它需要自己的迷你解析语言？**

从文档：

> 表达式是类似 JavaScript 的代码片段，通常放置在 {{ expression }} 等绑定中。表达式由 $parse 服务处理。

它是一种类似 JavaScript 的迷你语言，它限制了您可以运行的内容（例如，没有控制流语句，除了三元运算符）以及添加了一些 AngularJS 的优点（例如过滤器）。

**问：为什么不使用普通的旧javascript“eval”？**

因为它实际上并没有评估 JavaScript。正如文档所说：

> 如果...您确实想运行任意 JavaScript 代码，则应将其设为控制器方法并调用该方法。如果要从 JavaScript eval() 角度表达式，请使用 $eval() 方法。

上面链接的文档有更多信息。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-12-16T15:45:02.257

从测试来看，

```
it('should allow passing locals to the expression', inject(function($rootScope) {
  expect($rootScope.$eval('a+1', {a: 2})).toBe(3);

  $rootScope.$eval(function(scope, locals) {
    scope.c = locals.b + 4;
  }, {b: 3});
  expect($rootScope.c).toBe(7);
})); 
```

我们也可以传递局部变量来进行求值表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-26T22:53:01.423

我认为这里的原始问题之一没有得到回答。我相信不使用普通的 eval() 是因为 Angular 应用程序不能像 Chrome 应用程序一样工作，这会出于安全原因明确阻止使用 eval() 。

# javascript - jQuery删除类中的最后两个字符

> ID：15671472
> 
> 赞同：7
> 
> 时间：2013-03-27T23:24:53.393
> 
> 标签：javascript, jquery

这应该很简单。我正在尝试使用 slice 方法删除购物车中动态创建的字符串中的最后两个字符。

因此，我希望产品显示为 28 美元，而不是将产品显示为 28.00 美元。由于这些值来自数据库，我不能像在很多教程中看到的那样简单地在变量中定义字符串。

我在这里创建了一个 JSFiddle：http: [//jsfiddle.net/EbckS/](http://jsfiddle.net/EbckS/)

不工作的 jQuery 如下：

```
 $(".myclass").slice(0,-2); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-27T23:27:11.170

你应该使用`text`.

```
$(".slice").text(function(i, text) {
    return text.slice(0, -2);
}); 
```

*   `i`引用集合中元素的索引位置
*   `text`引用旧文本值

[参考](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-03T11:13:07.383

非常简单。我用它来从字符串中获取数字，你也可以使用它。

```
var height= "800px";

var newheight = height.substring(0,height.length-2); //string 800
newheight= parseFloat(newheight) || 0; //number 800 
```

# delphi - Delphi 中 {.$DEFINE VAR} 而不是 {$DEFINE VAR} 的目的是什么

> ID：15671475
> 
> 赞同：4
> 
> 时间：2013-03-27T23:24:58.580
> 
> 标签：delphi, compiler-construction, compiler-directives

Delphi 中使用 {.$DEFINE VAR} 和 {$DEFINE VAR} 编译器指令有什么区别？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T23:33:18.730

代码中原本有一个`{$DEFINE VAR}`语句，然后加了一个句点将语句变成一个普通的普通注释而不删除该语句，大概是为了以后可以恢复它。

`{$...}`是一个预编译器指令。

`{...}`不是`{$`以评论开头的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-27T23:28:43.150

将第一个视为第二个的注释版本（编译器将忽略的版本）。

# windows - 如何将 OpenSSL 密钥文件导入 Windows 证书存储

> ID：15671476
> 
> 赞同：12
> 
> 时间：2013-03-27T23:25:10.373
> 
> 标签：windows, openssl, x509, schannel

我有一个 PEM 格式的 OpenSSL 生成的 X.509 证书及其关联的密钥文件。连接到原型服务器时需要此证书进行身份验证。这在 Linux 上运行良好。我一直在使用 Microsoft SChannel API 在 Windows 平台上驱动 SSL/TLS 连接，但我想使用相同的测试证书。我可以右键单击证书文件并将其导入到我的证书存储中，但我相信私钥不会随它一起导入（即使我已将它们连接到同一个文件中）。

当我运行 SChannel 代码时，我在初始化安全上下文（通过 InitializeSecurityContext）时收到“SEC_E_NO_CREDENTIALS”错误。我怀疑这意味着私钥丢失。

有谁知道如何测试位于个人（或“我的”）证书存储中的证书中是否存在私钥，通过“certmgr.msc”访问？是否可以为商店中的证书导入新的密钥文件？

任何见解或建议将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-28T03:51:16.727

要测试是否为证书安装了私钥，请双击 certmgr.msc 中的证书图标。如果它有私钥，它会在属性页显示你有私钥的消息，否则它不会给任何参考私钥。

![带有私钥的证书](../Images/5866190de845664c44b6c25ef1294144.png)

* * *

要使用其私钥导入证书，您可以执行以下操作：

1.  使用 openssl pkcs12 将证书及其私钥打包到 PKCS #12 文件或 PFX 文件中。这是一个[例子](https://stackoverflow.com/questions/808669/convert-a-cert-pem-certificate-to-a-pfx-certificate)。
2.  将此 PKCS #12 或 PFX 文件导入证书存储区。

请注意，您在导入 pfx 文件时可能会看到错误，例如“此文件无法用作以下用途：个人信息交换”。此错误是由于证书缺少适当的 X.509 v3 扩展（例如使用字段（数字签名等））引起的

# jpa-2.0 - 我应该如何最好地锁定和刷新 JPA 实体？

> ID：15671478
> 
> 赞同：2
> 
> 时间：2013-03-27T23:25:29.857
> 
> 标签：jpa-2.0, java-ee-6

我对 JPA 比较陌生，并且对如何最好地乐观地锁定和刷新实体感到非常困惑。我想要一套通用的方法来在我的项目中始终如一地处理这个问题。

我可能从一个不知道实体状态的方法中调用锁定/刷新方法，它可能已经传递了一个分离的或新的/未保存的实体对象以及一个先前从数据库中读取的实体对象。为简单起见，我希望我的实用程序方法能够处理所有可能发生的情况。从语义上讲，我尝试实现的方法是：

MyEntity refreshAndLock(MyEntity e)
从数据库中重新读取实体并乐观地锁定它，或者对尚未保存到数据库的实体不做任何事情。分离的实体也将被重新读取和锁定，并返回一个托管版本。

MyEntity refresh(MyEntity e)
只需重新读取实体，或对尚未保存到数据库的实体执行任何操作。分离的实体也将被重新读取。

MyEntity lockAndNotRefresh(MyEntity e)
锁定内存中实体的版本（可能已经过期）

任何提示或链接都非常感激地接受。我还没有找到明确的指导，这让我很惊讶，因为这似乎是一个常见的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:06:32.733

第一，我的主要建议是：不要尝试实现自己的通用数据访问层。你可以`EntityManager`为你做所有的事情。保持你的代码简单，不要过度设计。使用通用层很可能会引入新问题并降低可维护性。

第二，您必须问自己，您的应用程序的典型用例是什么才能决定锁定。加锁总是带来瓶颈问题和可能的死锁问题。因此，如果您的应用程序读取的内容远多于写入的内容，或者可能不会一次访问同一个实体，那么您最好使用乐观锁定，然后处理异常。JPA 为您提供版本控制，因此您始终知道是否有其他线程更改了您的对象。如果您真的需要悲观锁定，请继续为这些情况设置它。

# google-maps - 未捕获的 RangeError：当我尝试设置边界时，最大调用堆栈大小超出了 Google 地图

> ID：15671480
> 
> 赞同：72
> 
> 时间：2013-03-27T23:25:33.467
> 
> 标签：google-maps

我创建了一个有效的谷歌地图，我现在正在尝试自动缩小，以便所有点都适合。

当我添加：

```
var bounds = new google.maps.LatLngBounds(); 
```

和

```
bounds.extend(point);
map.fitBounds(bounds); 
```

然后我得到这个错误：

```
Uncaught RangeError: Maximum call stack size exceeded
J.get
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf
J.set
(anonymous function)
Ey.(anonymous function).zoomRange_changed
Zf 
```

我创建地图的所有代码都是：

```
function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
        center: new google.maps.LatLng(47.6145, -122.3418),
        zoom: 13,
        mapTypeId: 'roadmap'
      });
      var infoWindow = new google.maps.InfoWindow;

      // Change this depending on the name of your PHP file
      downloadUrl("getMapMarkers.php", function(data) {
        var bounds = new google.maps.LatLngBounds();
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
          var name = markers[i].getAttribute("name");

          var type = markers[i].getAttribute("type");
          var point = new google.maps.LatLng(
              parseFloat(markers[i].getAttribute("lat")),
              parseFloat(markers[i].getAttribute("lng")));
          var html = "<b>" + name + "</b> <br/>" ;
          var icon = customIcons[type] || {};
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            icon: icon.icon,
            shadow: icon.shadow
          });
          bindInfoWindow(marker, map, infoWindow, html);
          bounds.extend(point);
          map.fitBounds(bounds);
        }
      });

    } 
```

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2013-06-21T09:23:21.753

我刚刚遇到了同样的异常，结果是传递给“new google.maps.LatLng”的经度是未定义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-19T09:46:18.270

## 可能的情况

*   要么`map.fitBounds(bounds);`没有收到纬度/经度，要么两者都没有。
*   接收到的纬度/经度值格式不正确（NaN）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-10T13:33:27.110

我使用了谷歌地图插件：[http](http://code.google.com/p/jquery-ui-map/) ://code.google.com/p/jquery-ui-map/ 我发现自己遇到了同样的问题，正如 Ollie 所说，我的 json 格式错误。这是我的 json

```
mapObj= 
[
      {
         "latitude": 57.797333,
         "longitude": 12.050211,
         "title": "Angered",
         "content": "Representing :)"
      },
      {
         "latitude": 57.696995,
         "longitude": "11.9865",
         "title": "Gothenburg",
         "content": "Swedens second largest city"
      }
 ] 
```

由于写成字符串的经度，我得到了那个错误。

**已解决：**将所有坐标作为数字。！

添加地图（假设本地json，如果没有参考参考链接）：

```
 $('#map_canvas').gmap().bind('init', function() { 
    $.each( mapObj, function(i, marker) {
        $('#map_canvas').gmap('addMarker', { 
            'position': new google.maps.LatLng(marker.latitude, marker.longitude), 
            'bounds': true 
        }).click(function() {
            $('#map_canvas').gmap('openInfoWindow', { 'content': marker.content }, this);
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-02T17:37:31.943

将地图中心设置为不支持的纬度/经度也会产生此错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-10T19:01:21.410

`NaN`当您设置为 的值时，似乎也会引发此错误`zoom`。

```
map.setZoom(null)      // => nothing happens
map.setZoom(undefined) // => nothing happens 
map.setZoom(NaN)       // => error! 
```

# c# - 在 asp.net IIS 应用程序重新启动时运行 dispose 方法

> ID：15671485
> 
> 赞同：2
> 
> 时间：2013-03-27T23:25:48.780
> 
> 标签：c#, asp.net, iis

我有一些代码，我想在我的 IIS 应用程序重新加载、停止或任何其他会重置业务类中某些静态属性状态的事件时强制运行。

我已经让这个类实现了 IDisposable 并且我尝试添加一个类析构函数，但是当我将一个新的 dll 上传到服务器时都没有运行。我怎样才能从这个类中注册一个在卸载应用程序之前运行的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:32:11.770

我会查看 Global.asax 中的事件。这通常是您处理应用程序级事件的地方。以下是一些帮助您入门的链接：

*   [http://msdn.microsoft.com/en-us/library/a0xez8f2(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/a0xez8f2(v=vs.71).aspx)
*   [http://www.techrepublic.com/article/working-with-the-aspnet-globalasax-file/5771721](http://www.techrepublic.com/article/working-with-the-aspnet-globalasax-file/5771721)

Application_Init 或 Application_Start 可能适合您的目的？

# mysql - zend_rest + mysql + 主干

> ID：15671486
> 
> 赞同：2
> 
> 时间：2013-03-27T23:25:49.460
> 
> 标签：mysql, zend-framework, backbone.js, crud, zend-rest

我使用**Zend_Rest实现了一个***RESTful*应用程序，它将信息保存在**mysql**数据库中。 我将使用**Backbone.js**处理视图。

 ******我正在寻找一个简单的*CRUD*示例。怎么做？

我没有找到 Zend_Rest+Backbone 的任何示例，我的想法是在这里一起创建它。

# 更新 0.1

**如何*发送*（从主干）和*读取*（在 get/put/delete 控制器中）参数？**

控制器（模块>api>控制器>BackboneController.php）

```
class Api_BackboneController extends Zend_Rest_Controller
{
    public function init(){
        $this->_helper->layout->disableLayout();
        $this->_helper->viewRenderer->setNoRender(true);
    }
    public function headAction(){
        $this->getResponse()->setBody(null);
    }
    public function optionsAction(){
        $this->getResponse()->setBody(null);
        $this->getResponse()->setHeader('Allow', 'OPTIONS, HEAD, INDEX, GET, POST, PUT, DELETE');
    }   

    // called from backbone with "read"
    public function indexAction(){
        // get the params
        $resp = json_decode(file_get_contents('php://input'));
        // send the same response
        $this->getResponse()->appendBody(json_encode($resp));
    }

    // I can't reach this one from backbone, WHY?
    public function getAction(){}
    // called from backbone with "update"
        public function putAction(){}   
    // called from backbone with "delete"
        public function deleteAction(){}
} 
```

查看（模块>默认>视图>脚本>index.phtml）

```
var MyModel = Backbone.Model.extend({   
    defaults: {   
        text: "default text"   
    },
    url: "/base/api/backbone",
    options: {
        success: function(data){
            console.log(data);
        },
        error: function(x, t, e){
            console.log("error: " + t + ", " + e);
        }
    }
});

var myModel = new MyModel();  
Backbone.sync("read", myModel, myModel.options);

})(jQuery); 
```******

# powershell - start-job 并行运行命令并在结果到达时输出

> ID：15671487
> 
> 赞同：3
> 
> 时间：2013-03-27T23:25:57.247
> 
> 标签：powershell, parallel-processing, start-job

我试图在服务器列表上获取特定的 KBXXXXXX 存在，但是一旦我的脚本在一台服务器上，它需要时间并返回结果并返回然后移动到下一个。这个脚本对我来说非常好。我希望我的脚本作为作业和其他进程启动并获取修补程序，只是为了收集结果并显示它们。

```
$servers = gc .\list.txt 
foreach ($server in $servers) 
{ 
    $isPatched = (Get-HotFix -ComputerName $server | where HotFixID -eq 'KBxxxxxxx') -ne $null 
    If ($isPatched) 
    { 
    write-host $server + "Exist">> .\patchlist.txt} 
    Else  
    { 
    Write-host $server +"Missing"
$server  >> C:\output.txt
    } 

} 
```

它的目标是使列表执行得更快而不是串行运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T01:21:58.850

使用 Powershell V2，您可以使用 @Andy 回答中的作业，也可以在此链接中更详细地使用[Can Powershell Run Commands in Parallel?](https://stackoverflow.com/questions/4016451/can-powershell-run-commands-in-parallel)

使用 PowerShell V2，您可能还想使用运行空间查看此脚本[http://gallery.technet.microsoft.com/scriptcenter/Foreach-Parallel-Parallel-a8f3d22b](http://gallery.technet.microsoft.com/scriptcenter/Foreach-Parallel-Parallel-a8f3d22b)

使用 PowerShell V3，您可以`foreach -parallel`选择。

例如（NB`Measure-Command`只是为了计时，所以你可以进行比较）

```
Workflow Test-My-WF {  
  param([string[]]$servers)

  foreach -parallel ($server in $servers) {

    $isPatched = (Get-HotFix -ComputerName $server | where {$_.HotFixID -eq 'KB9s82018'}) -ne $null     
    If ($isPatched) 
    { 
        $server | Out-File -FilePath "c:\temp\_patchlist.txt" -Append
    } 
    Else  
    { 
        $server | Out-File -FilePath "c:\temp\_output.txt" -Append 
    } 
  }
}

Measure-Command -Expression { Test-My-WF   $servers } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:33:23.470

与其使用作业，不如使用 cmdlet 中内置的查询多台计算机的功能。Microsoft 的许多 cmdlet，尤其是那些用于系统管理的 cmdlet，都将字符串数组作为`-Computername`参数的输入。传入您的服务器列表，cmdlet 将查询所有服务器。大多数具有此功能的 cmdlet 将串联查询服务器，但`Invoke-Command`将并行执行。

我没有对此进行测试，因为我目前没有启动 Windows，但这应该让你开始（按顺序）。

```
$servers = gc .\list.txt 
$patchedServers = Get-HotFix -ComputerName $servers | where HotFixID -eq 'KBxxxxxxx'|select machinename

$unpatchedServers = compare-object -referenceobject $patchedServers -differenceobject $servers -PassThru

$unpatchedServers |out-file c:\missing.txt;
$patchedServers|out-file c:\patched.txt; 
```

在平行下：

```
$servers = gc .\list.txt 
$patchedServers = invoke-command -computername $servers -scriptblock {Get-HotFix | where HotFixID -eq 'KBxxxxxxx'}|select -expandproperty pscomputername |sort -unique 
```

和以前一样，我目前没有合适的 Windows 版本来测试上述内容并检查输出，但这是一个起点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:40:21.977

为此，请使用 PowerShell 作业。

小命令：

*   找工作
*   接收工作
*   删除作业
*   开始工作
*   停工
*   等待工作

这是一个未经测试的示例：

```
$check_hotfix = {
    param ($server)
    $is_patched = (Get-HotFix -ID 'KBxxxxxxx' -ComputerName $server) -ne $null 
    if ($is_patched) { 
        Write-Output ($server + " Exist") 
    } else { 
        Write-Output ($server + " Missing")
    }
}

foreach ($server in $servers) {
    Start-Job -ScriptBlock $check_hotfix -ArgumentList $server | Out-Null
}

Get-Job | Wait-Job | Receive-Job | Set-Content patchlist.txt 
```

# java - 我希望在 java 中设置一个数组，同时在数组中设置一个子方法

> ID：15671495
> 
> 赞同：0
> 
> 时间：2013-03-27T23:26:46.277
> 
> 标签：java, arrays

我见过其他数组代码，但这是我得到的。我正在尝试在数组中的 CollegeCollege 课程中设置 courseID。我需要在 student.java 中设置数组

```
public class CollegeCourse {

private static String courseID;
private static int creditHours;
private static char grade;

public static void setCourseID(String course){
    courseID = course;
}
public static String getCourseID(){
    return courseID;
}
public static void setCreditHours(int CH){
    creditHours = CH;
}
public static int getCreditHours(){
    return creditHours;
}
public static void setGrade(char g){
    grade = g;
}
public static char getGrade(){
    return grade;
}

public class Student {

private static int IDnumber;
private static CollegeCourse[] course = new CollegeCourse[5];

public static void setIDnumber(int x){
    IDnumber = x;
}
public static int getIDnumber(){
    return IDnumber;
}
public static String getCourse(int x){
    return course[x].getCourseID();
}
public static void setCourse(CollegeCourse newCourse, int ID){
    CollegeCourse.setCourseID = newCourse[ID];
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:42:34.810

看起来您正在尝试编写学生使用 id 5 进行课程的代码。也许您的课程应该有构造函数根据课程的 ID 来接受参数。

而且我不知道您需要将字段设为静态的原因，如果出于某种原因需要，请随意将它们设为静态。

```
public class CollegeCourse {

private String courseID;
private int creditHours;
private char grade;

public CollegeCourse(String courseID) {
    this.courseID = courseID;
}

...

public class Student {

...
private static CollegeCourse[] course = new CollegeCourse("5");

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:59:16.740

我认为更好的设计是这样的：

```
public class CollegeCourse {

    private final String courseId;

    private final int creditHours;

    public CollegeCourse(final String courseId, int creditHours) {
        this.courseId = courseId;
        this.creditHours = creditHours;
    }

    public String getCourseId() {
        return courseId;
    }

    public int getCreditHours() {
        return creditHours;
    }

    @Override
    public boolean equals(Object o) {
        if (o == this) { return true; }
        if (!(o instanceof CollegeCourse)) { return false; }
        CollegeCourse cc = (CollegeCourse)o;
        return courseId.equals(cc.courseId) 
            && creditHours == cc.creditHours;                   
    }

    @Override
    public int hashCode() {
       int result = 17;
       result = 31 * result + courseId.hashCode();
       result = 31 * result + creditHours;
       return result;
    }
};

public enum Grade { A, B, C, D, E };

public class Student {

    private final String id;

    private final Map<CollegeCourse, Grade> course2GradeMap = new HashMap<>();

    public Student(final String id) {
        this.id = id;       
    }

    public Grade getGrade(final CollegeCourse course) {
        return couse2GradeMap.get(course);
    }

    public void addCollegeCourse(final CollegeCourse course, Grade grade) { 
        course2GradeMap.put(course, grade);
    }

    public Collection<CollegeCourse> getCollegeCourses() {
        return Collections.unmodifiableCollection(course2GradeMap.values());
    }
}; 
```

以这种方式使用它：

```
Student student = new Student("001");
student.addCollegeCourse(new CollegeCourse('alg', 100), Grade.A);
student.addCollegeCourse(new CollegeCourse('stat', 100), Grade.C); 
```

# c# - 将字符串转换为 TitleCase、SentenceCase、UpperCase 和 LowerCase，但如果单词在“引号”内，则忽略大小写

> ID：15671510
> 
> 赞同：2
> 
> 时间：2013-03-27T23:29:25.620
> 
> 标签：c#, asp.net, .net, vb.net

我正在使用 Visual Studio 11.0 和 .Net Web 编程我想通过从 RadioButtonList1 中选择将从 TextBox1 输入的字符串转换为 TitleCase、sentenceCase、UpperCase 和小写，并在 Label1.Text 中显示结果。但我不想要我的话在要转换的引号内。示例“ASP.NET”、“Ph.D”和“xyz”。我已经完成了标题大小写、大写和小写的编码，但我希望无论何时出现“相当”，都可以忽略/跳过或过滤此代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Globalization;

 public partial class _Default : System.Web.UI.Page
{
 protected void Page_Load(object sender, EventArgs e)
 {

  }
  private string ConvertToTitleCase(string val)
  {
  string returnString = string.Empty;

System.Globalization.CultureInfo info = System.Threading.Thread.CurrentThread.CurrentCulture;

TextInfo textInfo = info.TextInfo;

returnString = textInfo.ToTitleCase(val);

return returnString;
}
protected void Button1_Click(object sender, EventArgs e)
{
if (RadioButtonList1.SelectedValue == "a")
    {
Label1.Text = System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(TextBox1.Text);
Label1.Text = ConvertToTitleCase(TextBox1.Text);

TextBox1.Text.Equals(TextBox1.Text, StringComparison.CurrentCultureIgnoreCase);
    }
else if (RadioButtonList1.SelectedValue == "b")
    {
Label1.Text = "you have selected b";
    }
else if (RadioButtonList1.SelectedValue == "c")
    {
Label1.Text = TextBox1.Text.ToUpper();
    }
else
Label1.Text = TextBox1.Text.ToLower();

} 
```

我需要一个提示或代码，它会忽略 TitleCase、SentenceCase、UpperCase 和 LowerCase If.. 我的字符串在“引号”内。

例子：

String TextBox1 = hello 这是“asp.net”。你在“B.Tech”，欢迎来到“HCT”。

输出：

标题案例：您好，这是“asp.net”。您在“B.Tech”，欢迎来到“HCT”。

SentenceCase：您好，这是“asp.net”。您在“B.Tech”，欢迎来到“HCT”。

大写：你好，这是“asp.net”。您在“B.Tech”，欢迎来到“HCT”。

小写：你好，这是“asp.net”。您在“B.Tech”，欢迎来到“HCT”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:14:00.750

我会考虑使用一个字符串包含方法，它返回一个布尔值。您可以检查字符串是否包含引号，然后您可以拆分引号上的字符串并转换您想要的位并保持其余部分不变。如果不是我道歉，我希望我理解正确。

字符串包含的文档。 [http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx) 用于字符串拆分的文档。 [http://msdn.microsoft.com/en-us/library/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

希望这可以帮助。

只是在玩你发布的那个课程之前没有使用过那个课程。

```
using System;
using System.Globalization;
using System.Threading;

  public class FilterString{
    public static void Main(string[] args)
    {
      CultureInfo cultureInfo = Thread.CurrentThread.CurrentCulture;
      TextInfo textInfo = cultureInfo.TextInfo;

      string textBoxText = "tEsting To upPerCasE 'STAYCAPS'";
      string filterdTextForLabel = textInfo.ToTitleCase(textBoxText) ;
      Console.WriteLine(filterdTextForLabel);

   }
} 
```

这使用单引号似乎会返回您想要的结果。

输出：测试大写“STAYCAPS”

但是我在想的是，您可以在进行转换之前进行一些过滤，然后为文本输入分配一个变量，然后拆分引号上的字符串，中间部分的任何内容都保持不变，其余部分可以标题大小写。让我知道如果你不能让它工作，我会做出更深入的回应。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T09:58:01.747

```
private delegate string ConvertFunc(string input);

private string ModifyString(string input, ConvertFunc conversion)
{
    MatchCollection matches = Regex.Matches(input, "\".*?\"");
    int lastPos = 0;
    StringBuilder stringBuilder = new StringBuilder(input.Length);
    foreach (Match match in matches)
    {
        int currentPos = match.Index;
        string toConvert = input.Substring(lastPos, currentPos - lastPos);
        string converted = conversion(toConvert);
        stringBuilder.Append(converted);
        stringBuilder.Append(match.Value);
        lastPos = currentPos + match.Length;
    }

    if (lastPos < input.Length)
    {
        stringBuilder.Append(conversion(input.Substring(lastPos)));
    }

    return stringBuilder.ToString();
}

private string ToUpper(string toConvert)
{
    return toConvert.ToLower();
} 
```

然后从您的代码中调用 ModifyString 方法：

```
string modifiedString = ModifyString("This can be converted \"This cannot be converted\"", ToUpper); 
```

# c# - 导出嵌套列表项

> ID：15671516
> 
> 赞同：0
> 
> 时间：2013-03-27T23:30:06.870
> 
> 标签：c#, winforms, visual-studio-2010, export-to-excel

我有一个程序可以自动生成 2D 按钮网格并将网格存储在嵌套列表中，我正在尝试将此列表导出到 MS Excel。但是我正在尝试的代码会引发许多错误。我可以在不使用列表的情况下完成这项工作，但我需要使用嵌套列表来清除列表，并在网格大小增加或减小时再次填充它。我使用的逻辑是否可行

如下：

```
 //This is not the complete code
        List<List<Button>> buttonss = new List<List<Button>>();
        List<Button> rowList = new List<Button>();

        //Some method that creates a grid of buttons 
        buttons = new Button[row][];
        for (int r = 0; r < row; r++)
        { 
            buttons[r] = new Button[col];
            buttonss.Add(rowList);    
            for (int c = 0; c < col; c++)
            {
                buttons[r][c] = new Button();
                rowList.Add(buttons[r][c]);
            }
        } 
```

我想做的下一件事是不将此列表导出到 excel 中。

网格： ![在此处输入图像描述](../Images/d151c789c599c995ac8df4191332dbe3.png)

按钮：

```
//Export to MS Excel button
private void btnExport_Click(object sender, EventArgs e)
{
    ep.Do("sheet.xsl", rowList);//(ERROR 0)
} 
```

班级：

```
//Export class
public void Do(string excelName, System.Collections.Generic.List<Button[][]> Grid)
{
    for (int i = 0; i <= Grid.Count(); i++)
    {
        for (int j = 0; j <= Grid[i].Count(); j++)
        {

            AddData(i, j, Grid[i][j]);//(ERROR HERE [1])

        }
    }
    //app.SaveWorkspace(excelName);
}

public void AddData(int row, int col, System.Collections.Generic.List<Button[][]> button)
{
    if (button == null) return;
    row++;
    col++;

    Range range = worksheet.Cells[row + 2, col + 2];
    if (!defaultBackgroundIsWhite)
    {
        range.Interior.Color = button.BackColor.ToArgb();//(ERROR HERE[2])
    }
    else
        range.Interior.Color = button.BackColor.Name != "Control" ? button.BackColor.ToArgb() : System.Drawing.Color.White.ToArgb();//(ERROR HERE)
    // range.NumberFormat = "";
    worksheet.Cells[row + 2, col + 2] = button.Text;//(ERROR HERE[3])
    row--;
    col--;
} 
```

错误：0：参数 2：无法从 'System.Collections.Generic.List' 转换为 'System.Collections.Generic.List' C:..

1: 'SmartRota.ExportHeadWaiter.AddData(int, int, System.Collections.Generic.List)' 的最佳重载方法匹配有一些无效参数 C:..

2：错误 3“System.Collections.Generic.List”不包含“BackColor”的定义，并且找不到接受“System.Collections.Generic.List”类型的第一个参数的扩展方法“BackColor”（你是缺少 using 指令或程序集引用？） C:..

3：同上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:52:06.290

好吧，您的代码存在很多问题，主要是`Type`您的函数接收的参数。

例如： 1 。`rowList`是 a`List<Button>`并且你正在将它传递给函数`Do()`，函数 Do 需要 a`List<Button[][]>`

2\. 更糟糕的是，`AddData`期望收到一个按钮数组，但里面的整个代码`AddData`认为你*只有一个按钮*而*不是*数组。

3\. 将 return 作为 int调用`ToArgb()`，但您正试图将其放入`Color`

在没有试图真正理解*你*想要做什么的情况下，我猜这就是你想要声明你的函数的方式：

```
public void Do(string excelName, System.Collections.Generic.List<Button[]> Grid) 
```

和：

```
public void AddData(int row, int col, Button button) 
```

# jquery - 使用带有 id+numbers 的 html 标签在 jQuery 中找到它们

> ID：15671517
> 
> 赞同：0
> 
> 时间：2013-03-27T23:30:33.890
> 
> 标签：jquery, loops

有这样的html代码：

```
<table>
    <tr>
        <td bgcolor=yellow>LED #1</td>
        <td id=led0 bgcolor=red>ON</td>
    </tr>
    <tr>
        <td bgcolor=yellow>LED #2</td>
        <td id=led1 bgcolor=red>ON</td>
    </tr>
    <tr>
        <td bgcolor=yellow>LED #3</td>
        <td id=led2 bgcolor=red>ON</td>
    </tr>
    <tr>
        <td bgcolor=yellow>LED #4</td>
        <td id=led3 bgcolor=red>ON</td>
    </tr>
    <tr>
        <td>
            <button>number 1</button>
        </td>
    </tr>
    <tr>
        <td>
            <button>number 2</button>
        </td>
    </tr>
    <tr>
        <td>
            <button>number 3</button>
        </td>
    </tr>
</table> 
```

我想实现这样的目标：

```
$('button').click(function() {
  var index = $("button").index(this);   
 // alert(index);
  $("#led[index]").html('<div style="background:#cccccc" >OFF</div>');

}); 
```

用文字来说：我想检测按下的按钮（它已经在工作），然后使用变量修改 td 元素的 html 代码，`id="led[index]"`并使用变量`"index"`来找到正确的 LED 编号。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:33:18.717

连接方式如下：

```
$("#led" + index); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:00:34.897

我更进一步并做到了，以便您可以切换`ON`或`OFF`。您的主要问题是您没有连接`index`，应该这样做`+ index +`。我使用了以下 jQuery 代码：

```
$('button').click(function() {
var index = $("button").index(this);   
// alert(index);
  // You must concatenate index with "+"
  if ($("#led"+index+":contains('ON')").length > 0)
    $("#led"+index).html("OFF").css("background-color", "red");
  else if ($("#led"+index+":contains('OFF')").length > 0)
    $("#led"+index).html("ON").css("background-color", "green");
}); 
```

我还制作了一个有效的[JSFiddle](http://jsfiddle.net/Hy3Fa/)，以便您可以看到它的工作原理。

您可以将所需的任何 HTML 放在更改`ON`or的位置。`OFF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:32:12.517

您会想要使用`$(this).attr("id");`然后将索引连接到`#led`id

```
 $('button').click(function() {
          var index = $(this).attr("id");
          $("#led" + index).html('<div id="led'+index+'" style="background:red" >ON</div>');

        // code
    }); 
```

HTML：

```
<button id="someID"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:35:07.860

您需要对代码进行两次编辑：

首先，您需要使用`attr('id')`方法来获取索引。

其次，您需要将索引连接到您的 jQuery 选择器上。

```
$('button').click(function() {
    var index = $(this).attr('id');   
    $("#led"+index).html('<div id="led'+index+'" style="background:red" >ON</div>');
}); 
```

# sql - 更改 SQL Server Compact 4.0 的排序规则

> ID：15671518
> 
> 赞同：0
> 
> 时间：2013-03-27T23:30:46.173
> 
> 标签：sql, visual-studio-2012, sql-server-ce, ssms, collation

是否可以更改 .sdf 文件的排序规则？我已经尝试过 Management Studio 2008，但它只支持 3.5 版，就我所见，Management Studio 2012 根本不支持 SQL Server Compact，Visual Studio 的 SQL Server Compact 工具箱似乎不提供这种可能性，ALTER DATABASE 也似乎不见了 - 有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T07:15:43.620

是的，有一个解决方案，SqlCeEngine Compact 方法允许您从代码中执行此操作（它有效地重新创建数据库文件），或者您可以通过我的 sqlcecmd 命令行实用程序来执行此操作。

```
sqlcecmd -d "Data Source=C:\data\mydb.sdf" -z "Data Source=;LCID=1044" 
```

从[http://sqlcecmd.codeplex.com下载](http://sqlcecmd.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:39:56.437

我认为为了更改 .sdf 文件的排序规则，您需要在 SQL Server 中将其重新创建为数据库：

```
USE master
GO
CREATE DATABASE "file.sdf" DATABASEPASSWORD '<Pwd>' COLLATE <the_Collation>
GO 
```

如果您已经将它建立为数据库，那么您只需要更改数据库：

```
USE master
GO
ALTER DATABASE <the_Database>
COLLATE <new_Collation>
GO 
```

然后您可以重新压缩数据库，它将具有您需要的排序规则。

# iphone - 分段错误，仅发布配置

> ID：15671519
> 
> 赞同：0
> 
> 时间：2013-03-27T23:30:55.520
> 
> 标签：iphone, objective-c, segmentation-fault

在发布配置中构建时出现分段错误，但在调试配置中没有。

此代码是在运行时加载的包。崩溃本身发生在执行任何我之前（暗示编译器正在生成格式错误的二进制文件，几乎可以肯定是因为我的代码中存在问题）。崩溃发生在这个函数中：paranoid_check_one_class

下面的代码没有问题，但是如果我取消注释被注释掉的两行，那么我就会崩溃。（我可以注释掉`firstName`，`lastName`或者`company`让它工作，它只是不喜欢这三个）

```
-(NSArray *)specifiersForContacts {
    NSMutableArray *contactSpecs = [NSMutableArray array];
    ABAddressBookRef book = ABAddressBookCreateWithOptions(NULL, NULL);
    for (NSNumber *contactID in [self contacts]) {
        ABRecordRef contact = ABAddressBookGetPersonWithRecordID(book,[contactID intValue]);
        NSString *firstName = (NSString *)ABRecordCopyValue(contact, kABPersonFirstNameProperty);
        NSString *lastName = (NSString *)ABRecordCopyValue(contact, kABPersonLastNameProperty);
      //NSString *company = (NSString *)ABRecordCopyValue(contact, kABPersonOrganizationProperty);
        NSString *fullName = [NSString stringWithFormat:@"%@ %@", firstName ?: @"", company ?: @""];
        PSSpecifier *contactSpec = [PSSpecifier preferenceSpecifierNamed:fullName
                                                              target:self
                                                                 set:NULL
                                                                 get:NULL
                                                              detail:Nil
                                                                cell:13
                                                                edit:Nil];
        [contactSpec setValues:@[contactID]];
        [contactSpec setProperty:[NSNumber numberWithInt:1] forKey:@"alignment"];
        [firstName release];
        [lastName release];
      //[company release];
        [contactSpecs addObject:contactSpec];
    }
    return [[contactSpecs copy] autorelease];
} 
```

# .htaccess - 阻止所有人，除了来自特定推荐人的访客

> ID：15671521
> 
> 赞同：1
> 
> 时间：2013-03-27T23:31:19.980
> 
> 标签：.htaccess

在 htaccess 中，我如何阻止每个访问者，包括机器人，除了来自特定域或具有特定用户代理的访问者？

我必须保护每个页面不被访问，除了几个允许的页面。

每个被阻止的人都应该收到自定义通知。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-27T23:58:38.000

首先允许包含禁止消息的公共页面。然后允许具有特定引用者的请求和具有适当[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)s 的用户代理，并将状态发送`403`给其他所有内容

```
RewriteEngine on

# allow public pages
RewriteRule ^forbidden.html$ - [L]
RewriteRule ^public1.html$ - [L]
RewriteRule ^public2.html$ - [L]

# serve everyone from specific-domain or specific-user-agent
RewriteCond %{HTTP_REFERER} ^https?://www.specific-domain.com [OR]
RewriteCond %{HTTP_USER_AGENT} ^specific-user-agent$
RewriteRule ^ - [L]

# everybody else receives a forbidden
RewriteRule ^ - [F]

ErrorDocument 403 /forbidden.html 
```

# python - NetworkX：边和节点属性的子图同构

> ID：15671522
> 
> 赞同：7
> 
> 时间：2013-03-27T23:31:22.257
> 
> 标签：python, networkx, subgraph, isomorphism

假设我有 2 个图 A 和 B，我想知道 A 是否是 B 的子图。节点包含属性，比如“大小”和“材料”。

当我运行时：

```
GM = networkx.algorithms.isomorphism.GraphMatcher(B,A)
print networkx.algorithms.isomorphism.subgraph_is_isomorphic() 
```

这仅按边匹配图，而不是按边和属性匹配。

关于如何检查属性的任何线索？

此外，假设 B 包含 A 的 2 个连通图。

当我运行时：

```
GM.mapping 
```

这将只输出 A 的一个子图。关于如何输出每个子图的任何想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-28T00:04:13.733

我已经通过使用解决了这个问题：

```
print GM = iso.GraphMatcher(B,A,node_match=iso.categorical_node_match(['material', 'size'],['metal',1])) 
```

我以前不知道的是，这`['metal',1]`只是一个默认值，而不是硬匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-08T14:18:23.380

您可以通过以下方式遍历所有可能的子图

```
GM = networkx.algorithms.isomorphism.GraphMatcher(B,A)
for subgraph in GM.subgraph_isomorphisms_iter():
    print subgraph 
```

这个例子中的 subgraph 是一个字典，它将 B 的节点映射到 A 的节点。

对于属性匹配的问题，drum 的建议对我有用。附加属性匹配实际上可以显着加快大型图的速度。

# list - 事实列表中所有实例的 Prolog 总和

> ID：15671523
> 
> 赞同：0
> 
> 时间：2013-03-27T23:31:23.487
> 
> 标签：list, prolog, sum, tail-recursion

我有一份事实清单。每个事实都定义了两个主题之间的关系以及他们完成的项目数量。它们的定义如下：

```
label(allGroups,[group(a,b,10),group(b,c,3),group(c,d,12)]). 
```

我正在尝试编写一个函数来列出个人完成的所有项目。例如，“b”共完成了 13 个项目，而 c 共完成了 15 个项目。

这是我现在要做的功能。

```
individualSum([],_,0).
individualSum([group(Name,_,Projects)|Tail],Name,Sum) :-
    individualSum(Tail,Name,Tailsum),
    Sum is Projects + Tailsum.
individualSum([group(_,Name,Projects)|Tail],Name,Sum) :-
    individualSum(Tail,Name,Tailsum),
    Sum is Projects + Tailsum. 
```

我一直在弄错，无法弄清楚这是由于递归的基本情况不完整还是完全是其他原因。这是我正在运行的内容：

```
?- [groupSum].
?- label(allGroups,L),Groups=L). 
```

（吐出所有组，然后：）

```
?- individualSum($Groups,b,Total).
false. 
```

知道我哪里出错了吗？我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T04:02:21.007

您需要在此处添加另一个子句以跳过组，这两个主题都不是您要查找的主题：

```
individualSum([group(Name1,Name2,Projects)|Tail],Name,Sum):-
  Name \= Name1,
  Name \= Name2,
  individualSum(Tail,Name,Sum). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T08:52:59.677

Gusbro 已经发现了问题（+1）。由于您使用的是 SWI-Prolog，因此您可以使用内置[聚合](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.1%27,swi%28%27/doc/Manual/aggregate.html%27%29%29)。

```
individualSum(L,Name,Sum) :-
    aggregate_all(sum(Projects),
       ( member(group(A,B,Projects), L), ( A = Name ; B = Name )), Sum). 
```

# javascript - Firefox 19 不支持 websocket 吗？

> ID：15671528
> 
> 赞同：2
> 
> 时间：2013-03-27T23:31:45.803
> 
> 标签：javascript, firefox, websocket

我正在尝试编写一个 websocket 页面，它可以在我的 Ubuntu 机器上的 Chrome 和其他一些浏览器中运行。但是，firefox 不会运行 websocket 部分，并且 window[WebSocket] 和 window[MozWebSocket] 都返回“未定义”。Firefox 不支持 websockets 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:33:42.463

使用（来自[MDN 文档](https://developer.mozilla.org/en-US/docs/WebSockets/WebSockets_reference/WebSocket)）：

```
var mySocket = new WebSocket("ws://www.example.com/socketserver", "protocol"); 
```

Firefox 6.0 支持它（在 Fx 11 之前称为`MozWebSocket`- 请参阅 @Dracs 的评论）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T18:42:24.480

TorButton 之类的扩展可以设置`network.websocket.enabled`为`false`in `about:config`。确保它是`true`.

# javascript - 如何定位所有输入文本和密码值？

> ID：15671533
> 
> 赞同：1
> 
> 时间：2013-03-27T23:32:18.243
> 
> 标签：javascript, jquery, input

我试图弄清楚如何定位页面文档上所有表单上的每个输入（文本和密码）字段，以在使用此单个脚本聚焦时删除默认值：

```
$(document).ready(function()
{
    Input = $('input');
    default_value = Input.val();

    $('input').focus(function() 
    {
        if($(this).val() == default_value)
        {
            $(this).val("");
        }
    }).blur(function()
    {
        if($(this).val().length == 0)
        {
            $(this).val(default_value);
        }
    });
}); 
```

它仅适用于我页面上第一个表单中的第一个输入文本元素，但其余部分无效。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:35:57.820

获取所有输入类型的文本值：

```
$("input:text").each(function() {
  alert($(this).val());
}); 
```

获取所有输入类型密码值：

```
$("input:password").each(function() {
  alert($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:34:28.843

那是因为`val`只返回第一个选定元素的值，而不是存储值，您可以使用对象`defaultValue`的属性[`HTMLInputElement`](https://developer.mozilla.org/en-US/docs/DOM/HTMLInputElement)。

```
$('input[type=text], input[type=password]').focus(function() {
   if (this.value === this.defaultValue) $(this).val("");
}).blur(function(){
   if (this.value.length === 0) this.value = this.defaultValue;
}); 
```

[http://jsfiddle.net/MscgZ/](http://jsfiddle.net/MscgZ/)

# c++ - 为什么这个 C++11 std::regex 示例会引发 regex_error 异常？

> ID：15671536
> 
> 赞同：8
> 
> 时间：2013-03-27T23:32:53.400
> 
> 标签：c++, regex, c++11, g++

尝试学习如何在 C++11 中使用新的 std::regex。但是我尝试的示例是抛出一个我不明白的 regex_error 异常。这是我的示例代码：

```
#include <iostream>
#include <regex>

int main()
{
    std::string str = "xyzabc1xyzabc2xyzabc3abc4xyz";
    std::regex re( "(abc[1234])" ); // <-- this line throws a C++ exception

    // also tried to do this:
    // std::regex re( "(abc[1234])", std::regex::optimize | std::regex::extended );

    while ( true )
    {
        std::cout << "searching in " << str << std::endl;
        std::smatch match;
        std::regex_search( str, match, re );
        if ( match.empty() )
        {
            std::cout << "...no more matches" << std::endl;
            break;
        }
        for ( auto x : match )
        {
            std::cout << "found: " << x << std::endl;
        }
        str = match.suffix().str();
    }
    return 0;
} 
```

我像这样编译和运行：

```
g++ -g -std=c++11 test.cpp
./a.out
terminate called after throwing an instance of 'std::regex_error'
  what():  regex_error 
```

查看 gdb 中的回溯，我看到抛出的异常是`regex_constants::error_brack`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:16:58.380

感谢您的提示。不知道 g++ 中的正则表达式代码不完整。

同时，猜测我们将不得不参考这个旧的 StackOverflow 问题：

[C++：我应该使用什么正则表达式库？](https://stackoverflow.com/questions/181624/c-what-regex-library-should-i-use)

# html - 幻灯片内容的 SEO 开发

> ID：15671542
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:33:20.343
> 
> 标签：html, seo

我有一个关于幻灯片的 seo 问题的想法。

对于幻灯片尚未显示的内容，我将它们视为隐藏的div。如果内容出于 SEO 原因隐藏/显示内容，它们将被编入索引，但可能会被搜索引擎（当然是谷歌...）所反对。

此外，有些人说实际上谷歌看到的应该是用户点击链接时看到的。

但是，如果关键字位于此时未显示的部分，这些关键字或描述会被搜索引擎检测到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:36:34.977

搜索引擎会看到您在 HTML 中放入的任何内容。即使内容被 CSS 隐藏，它也会被它们抓取和索引。

# dispose - Streamreader 使用什么进程？

> ID：15671546
> 
> 赞同：0
> 
> 时间：2013-03-27T23:33:39.823
> 
> 标签：dispose, streamreader

我做了一个简单的程序

```
StreamReader sr = new StreamReader(File.OpenRead(dlg.FileName));                
txtBox1.Text = sr.ReadToEnd(); 
```

忘了放

```
sr.Dispose(); 
```

现在，当我尝试运行程序并打开一个文件时，我收到 IOException is unhandled 错误消息，上面写着“该进程无法访问该文件，因为它正被另一个进程使用。” 所以我的问题是，有人知道它使用的是什么过程吗？我希望能够在任务管理器中找到它并结束它，而不是编写一堆异常处理代码，因为这只是我用来练习的程序。

我试图打开的文件是 MyDocuments 中的一个 txt 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T02:56:50.253

使用该文件的进程是打开它的进程，如果您从 Visual Studio 运行它，则很可能是 .vshost.exe。

为了避免“忘记”将来使用`using`语句处理对象来实现任何实现`IDisposable`（`StreamReader`确实如此）。你的代码看起来像

```
using(StreamReader sr = new StreamReader(File.OpenRead(dlg.FileName)))
{
    txtBox1.Text = sr.ReadToEnd();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T19:48:29.443

当我使用流读取器查找文件中文本的结尾时，我遇到了同样的错误，因此我可以使用 writeline 方法在文件中的文本之后添加新文本。无论如何，我的文档在开发方面存在可访问性问题。尝试将 .txt 放入其他位置，可能是 /temp 文件夹？

# ruby - 密码的源字符串的最小长度

> ID：15671549
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:34:13.463
> 
> 标签：ruby, encryption

密码的源字符串是否有最小长度？我正在尝试创建唯一的会话 ID，并且正在执行以下操作：

```
cipherer = OpenSSL::Cipher::Cipher.new("aes-256-cbc").encrypt

cipherer.update(Time.now.to_f.*(1000).to_i.to_s(36)) 
```

但它返回一个空字符串。我将乘法因子更改`1000`为更大的，例如`100000000000000`，然后它有时返回一个空字符串，有时返回一个长字符串。我想这是因为短于某个长度的字符串被密码映射到空字符串。这种理解正确吗？如果是这样，最小长度是多少，我怎样才能使它永远不会返回空字符串？我不需要破译它，所以不用担心舍入错误或硬件依赖性是否会导致无法破译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:31:30.607

AES 块大小为 128 位 = 16 字节，即 16 个字符。这意味着 16 个字节输入和 16 个字节输出。

您正在通过调用来使用流模式`OpenSSL::Cipher#update`。这意味着该`update`方法的输入将附加到密码的输入，直到达到至少 16 个字节。只有这样，才能执行加密，然后该方法才会返回实际值。

这意味着，`update`如果您使用 8 Bytes 值提供调用，则只会每秒钟产生一次输出，这就是您所做的：

```
cipherer = OpenSSL::Cipher::Cipher.new("aes-256-cbc").encrypt
#=> #<OpenSSL::Cipher::Cipher:0x007fb67426e558>
cipherer.update('X'*8)
#=> ""
cipherer.update('X'*8)
#=> "\xA0+\xD8Y\xA5\xBC68\x972\x86!\xC7\xE5\xA2\xDE"
cipherer.update('X'*8)
#=> ""
cipherer.update('X'*8)
#=> "\xFB\xB1I\xE2\x01\xB8Z\x10\xDC\x96m?\xC3\x00\x19+" 
```

另一方面，如果您提供一个 32 字节的值，两个块将同时被加密，例如

```
cipherer = OpenSSL::Cipher::Cipher.new("aes-256-cbc").encrypt
=> #<OpenSSL::Cipher::Cipher:0x007fb6741579f8>
cipherer.update('X'*32)
#=> "\xA0+\xD8Y\xA5\xBC68\x972\x86!\xC7\xE5\xA2\xDE\xFB\xB1I\xE2\x01\xB8Z\x10\xDC\x96m?\xC3\x00\x19+"
cipherer.update('X'*32)
#=> "\xB2!\xBA>M\x13t\xEBv^\xCE\xAE\x18\x9A\xE3S\xD96\x95\x89\xC1\xB4\xAA\xDD\xD3\xDCp\e<\x90\xA79"
cipherer.update('X'*32)
#=> "\x95\xA3-\xB9\x93D\x1D\xC0\xB3mh\xE3\xB5N\x9C\x8C\xEA\xF3\x80\xD3\xBDU\xCB'\xC0E\xDA\x02\xA8L\a\xB3" 
```

解决问题的直接方法是使用保证为 16 字节长的字符串作为输入。

不过，我强烈建议您使用 ruby​​ 附带的 UUID 实现。在实施加密货币时有很多事情要考虑。你总是最好坚持标准并使用众所周知的、广泛使用的和经过实战考验的实现。也就是说，这是获取 UUID 的方法：

```
require 'securerandom'

SecureRandom.uuid
#=> "c5059a24-25fc-4617-aaf7-280df52cd8d3" 
```

就那么简单。

# java - 我应该选择哪个依赖注入框架

> ID：15671555
> 
> 赞同：1
> 
> 时间：2013-03-27T23:34:50.890
> 
> 标签：java, dependency-injection

我正在使用速度模板和 servlet 开发一个 Web 项目。代码有点旧，我们正在尝试在添加新功能之前对其进行重构。我正在考虑引入依赖注入框架。在网上搜索，我发现 spring DI、pico、guice 作为一些选项。但是，不确定哪个是正确的选择。理想情况下，我正在寻找易于上手且轻量级的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:13:13.353

考虑到它是“使用速度模板和 servlet 的 Web 项目”，我建议[使用 springframework](http://www.springsource.org/spring-framework)。它有[据可查](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/)，广泛使用/测试，活跃的社区，并且将帮助更多的 DI。

# jquery - jQuery 万维网错误

> ID：15671556
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:34:54.953
> 
> 标签：jquery, forms, no-www

我正在开发一个网站，表单依赖于 jQuery $.ajax，它将发布数据然后发回结果。

但我有一个问题。

如果我通过“ [http://site.com/](http://site.com/) ”访问该站点并单击表单上的提交按钮，则它没有问题。

[但是，如果我通过“ http://www.site.com/](http://www.site.com/) ”访问该站点并单击表单上的提交按钮，则会向我抛出错误。

有人知道为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:37:33.753

这称为跨域限制。AJAX 只会让您进入与您用来加载页面的域相同的域，只有极少数例外。可以使用 JSONP 进行隧道传输。

这是一种安全措施。想象一下，如果远程攻击者能够 AJAX 输出您的信息 - AJAX 调用非常容易输入！浏览器制造商将其添加为防止信息泄露的安全措施（这已经太常见了——XSS、CSRF 等）。

如果它们必须在本地调用，请考虑不要在脚本中对 URL 进行硬编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T23:37:44.060

您很有可能无法以任何方式访问该站点，`www`因为站点所有者尚未设置 DNS 以使用`www`前缀。

# vba - Excel VBA 函数给出“参数不是可选的”

> ID：15671567
> 
> 赞同：3
> 
> 时间：2013-03-27T23:35:52.610
> 
> 标签：vba, excel

我正在尝试编写一个 VBA 函数，用于将赤纬和赤经转换为其十进制值。

我对 RA 有一个完美的工作功能，但不断得到一个

> 参数不是可选的

错误。

目前的功能是：

```
Public Function dec2decimal(Deg As Integer, Min2 As Integer, Sec2 As Integer) As Double

    Dim Dec As Double
    Dec = 0
    If Deg >= 0 Then
        Dec = (Deg + Min2 / 60 + Sec2 / 3600)
    Else
        Dec = (Deg - Min2 / 60 - Sec2 / 3600)
    End If

    ra2decimal = Dec
End Function 
```

当我运行它时，我显然提供了三个参数，但它仍然不开心。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:44:04.503

这对我来说非常好。

注意修订，更改`ra2decimal`为`dec2decimal`.

```
Option Explicit
Sub testDec2Decimal()

MsgBox dec2decimal(1, 1, 1)

End Sub

Public Function dec2decimal(Deg As Integer, Min2 As Integer, Sec2 As Integer) As Double

    Dim Dec As Double
    Dec = 0
    If Deg >= 0 Then
        Dec = (Deg + Min2 / 60 + Sec2 / 3600)
    Else
        Dec = (Deg - Min2 / 60 - Sec2 / 3600)
    End If

    dec2decimal = Dec
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:01:10.403

检查以下内容：

*   你确定，你正在执行你描述的函数，是否有可能执行另一个命名空间或类中的另一个函数？

*   你确定你正确地传递了参数，它们的类型是正确的，它们的数量是正确的，并且它们是用逗号分隔的吗？

*   你确定你没有打错字或通过委托调用函数（这不是问题，但我们应该知道能够帮助你）。

# r - 从邻接矩阵、r、igraph中获取传染链

> ID：15671568
> 
> 赞同：3
> 
> 时间：2013-03-27T23:35:56.543
> 
> 标签：r, matrix, igraph, adjacency-list

问我有一个 erdos.reyni 图。我感染了一个顶点，想看看疾病会遵循什么顶点序列？igraph 具有 get.adjacency()、neighbors() 等有用的功能。

细节。这是具有顶点名称而不是 0,1 标志的邻接矩阵，我正试图从中消除传染链。如果某个顶点被感染，就像通过图表的流行病的流/序列一样。我们不用担心这里的感染概率（假设所有命中的顶点都以概率 1 感染）。

所以假设我点击了顶点 1（这里是第 1 行）。我们看到它具有到顶点 4、5、18、22、23、24、25 的传出链接。那么接下来的顶点将是那些连接到 4、5、18...25 的顶点，即 row4、row5、row18、...row25 中的那些值。然后，根据模型，疾病将通过这些等等传播。

我知道我可以传递一个字符串来对矩阵行进行排序。我的问题是，我无法弄清楚如何生成该序列。

矩阵看起来像这样。

```
 > channel
      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
 [1,]    4    5   18   22   23   24   25   NA
 [2,]    6   10   11   18   25   NA   NA   NA
 [3,]    7   11   18   20   NA   NA   NA   NA
 [4,]   24   NA   NA   NA   NA   NA   NA   NA
 [5,]    1    3    9   13   14   NA   NA   NA
 [6,]    3    8    9   14   19   23   NA   NA
 [7,]    3    4    8   15   20   22   NA   NA
 [8,]    2    3   25   NA   NA   NA   NA   NA
 [9,]    3    4   11   13   20   NA   NA   NA
[10,]    4    5    8   15   19   20   21   22
[11,]    3   13   15   18   19   23   NA   NA
[12,]   11   13   16   NA   NA   NA   NA   NA
[13,]    4    6   14   15   16   17   19   21
[14,]    2    6   13   NA   NA   NA   NA   NA
[15,]    3   17   20   NA   NA   NA   NA   NA
[16,]    6   15   18   23   NA   NA   NA   NA
[17,]    2   25   NA   NA   NA   NA   NA   NA
[18,]    2    5   NA   NA   NA   NA   NA   NA
[19,]    3   11   NA   NA   NA   NA   NA   NA
[20,]    1    4    7   10   12   21   22   25
[21,]    2    4    6   13   14   16   18   NA
[22,]    1    3    4   15   23   NA   NA   NA
[23,]    1   16   24   NA   NA   NA   NA   NA
[24,]    7    8   19   20   22   NA   NA   NA
[25,]    7   12   13   17   NA   NA   NA   NA 
```

我想根据选择标准重新排序这个矩阵，如下所示：

R 将是最有帮助的（但我对算法感兴趣，所以任何 python、ruby 等都会很棒）。结果向量的长度为 115（8x25=200 - 85 NAs=115）。看起来像这样。如果顶点 1 被感染，这基本上就是疾病的传播方式。

```
4,5,18,22,23,24,25,24,1,3,9,13,14,2,5,1,3,4,15,23,1,16,24,7,8,19,20,22,7,12,13,17,7,8,19,20,22, 4,5,18,22,23,24,25,7,11,18,20... 
```

到目前为止我所知道的：1\. R 有一个包`**igraph**`可以让我计算邻居`(graph, vertex, "out")` 2\. 相同的包也可以生成`get.adjlist(graph...), get.adjacency`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:58:00.973

找到这样的“传染链”相当于通过图进行广度优先搜索，例如：

```
library(igraph)
set.seed(50)
g = erdos.renyi.game(20, 0.1)
plot(g)
order = graph.bfs(g, root=14, order=TRUE, unreachable=FALSE)$order 
```

输出：

```
> order
 [1]  14   1   2  11  16  18   4  19  12  17  20   7   8  15   5  13   9 NaN NaN NaN 
```

![在此处输入图像描述](../Images/b77b43e9ad13a56a1c575b2aec62acfa.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T22:57:46.420

目前尚不清楚您如何定义行的顺序，所以......只是一些提示：

您可以通过传递索引向量来选择行的排列/组合：

```
> (m <- matrix(data=1:9, nrow=3))
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
> m[c(2,3,1),]
     [,1] [,2] [,3]
[1,]    2    5    8
[2,]    3    6    9
[3,]    1    4    7 
```

该函数`t()`转置矩阵。

矩阵以列优先（或[列](http://en.wikipedia.org/wiki/Column-major_order#Column-major_order)优先）顺序存储：

```
> as.vector(m)
[1] 1 2 3 4 5 6 7 8 9 
```

`NA`可以通过子集删除值：

```
> qq <- c(1,2,NA,5,7,NA,3,NA,NA)
> qq[!is.na(qq)]
[1] 1 2 5 7 3 
```

此外，图形算法由 Bioconductor 的[graph](http://www.bioconductor.org/packages/2.11/bioc/html/graph.html)或 CRAN 的[igraph](http://cran.r-project.org/web/packages/igraph/index.html)包提供。

# asp.net - 使用 easyXdm 的跨域 AJAX 发布

> ID：15671574
> 
> 赞同：3
> 
> 时间：2013-03-27T23:36:11.680
> 
> 标签：asp.net, ajax, cross-domain, cross-domain-policy, easyxdm

我正在尝试使用 easyXdm 库让跨域 AJAX 帖子工作。

在我的本地开发环境中，我有两个站点：

```
1\. http://localhost/MySite/ws/easyXDM/cors/index.html（EasyXdm 文件）
2\. http://localhost/MyClientSite/TestPage.html（来自这里的 AJAX 帖子）

```

**TestPage.html（AJAX 帖子）**

```
var rpc = new easyXDM.Rpc({
        remote: "http://localhost/MySite/ws/easyXDM/cors/index.html"
    },
    {
        remote: {
            request: {}
        }
    });

rpc.request({
        url: "http://localhost/MySite/ws/MyService.asmx/DoSomething",
        method: "POST",
        data: jsonData
    }, function(response) {
        console.log(JSON.parse(response.data));

        $('#thanksDiv').fadeIn(2000, function () {
            $('#thanksDiv').fadeOut(4000);
        });
    }); 
```

当我发布 AJAX 帖子时，我在浏览器的控制台中得到以下信息：

```
easyXDM present on 'http://localhost/MySite/ws/easyXDM/cors/index.html?xdm_e=http%3A%2F%2Flocalhost%2FMyClientSite%2FTestPage.html&xdm_c=default884&xdm_p=4 
native JSON found 
easyXDM.Rpc: constructor 
{Private}: preparing transport stack 
{Private}: using parameters from query 
easyXDM.stack.SameOriginTransport: constructor 
easyXDM.stack.QueueBehavior: constructor 
easyXDM.stack.RpcBehavior: init 
{Private}: firing dom_onReady 
... deferred messages ... 
easyXDM.Rpc: constructor 
{Private}: preparing transport stack 
{Private}: using parameters from query 
easyXDM.stack.SameOriginTransport: constructor 
easyXDM.stack.QueueBehavior: constructor 
easyXDM.stack.RpcBehavior: init 
... end of deferred messages ... 
easyXDM.stack.SameOriginTransport: init 
easyXDM.stack.RpcBehavior: received request to execute method request using callback id 1 
easyXDM.stack.RpcBehavior: requested to execute procedure request 
easyXDM.stack.QueueBehavior: removing myself from the stack 
```

**问题：** Web 服务从未真正接收到数据。这很明显，因为我的 AJAX 发布成功函数应该显示一个`thanksDiv`并且应该在 *database 中创建一个记录。

**注意：**我正在替换我现有的 AJAX 邮政编码，因为我需要使用 easyXdm 来解决客户端站点上 Internet Explorer 6 和 7 的问题。

**附加信息：** 我的 easyXdm 文件所在的文件结构如下：

```
/ws/easyXDM/easyXDM.debug.js
/ws/easyXDM/easyXdm.swf
/ws/easyXDM/json2.js 
/ws/easyXDM/name.html
/ws/easyXDM/cors/index.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:38:58.323

我的 Web 服务抛出 HTTP 500 服务器错误，因为 jsonData 没有通过 easyXdm 正确发送。

json数据在发布之前是这样的：

> { "param1": "value1", "param2": "value2"...... }

但是，Web 服务每行接收一个字符的数据，例如

```
{
"
p
a
r
a
m
"
.... 
```

在我的帖子之前，我没有序列化 json 数据。因此，基于我在原始问题中发布的原始代码：

为了让它工作，我改变了这条线

```
data: jsonData 
```

到

```
data: JSON.parse(jsonData) 
```

# c - 使用一个变量作为另一个变量的部分值？

> ID：15671575
> 
> 赞同：2
> 
> 时间：2013-03-27T23:36:27.427
> 
> 标签：c

有没有一种简单的方法可以将变量的值设置为其他混合类型变量的连接值？

例如，完成与此相同的事情的事情......

```
int card=10;
char card_suit='c';
char card_picture[255];
FILE *x

x=fopen("streamy.txt", "w");
fprintf(x, "%d%c.bmp\n", card, card_suit);
fclose(x);

x=fopen("streamy.txt", "rt");
fscanf(x, "%s", &card_picture);
fclose(x); 
```

但不傻。

我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-27T23:38:42.123

我相信您正在寻找[`snprintf()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/snprintf.html)及其亲属：

```
char card_picture[255];

snprintf(card_picture, sizeof(card_picture), "%d%c.bmp", card, card_suit); 
```

# mdx - 计算 MDX 中各个类别的百分比

> ID：15671577
> 
> 赞同：0
> 
> 时间：2013-03-27T23:36:53.497
> 
> 标签：mdx, ssas-2008

![在此处输入图像描述](../Images/991991bb1b8b33476091016b1bac516a.png)我想计算各个类别的百分比，这是我的 mdx 代码。

```
WITH
MEMBER [Measures].[Individual_Total] AS ([DIM RATING STRINGS].[LABEL]*[Measures].AGG_RATING Count])

 SELECT
  NONEMPTY { 
   [Measures].[AGG_RATING Count],[Measures].[Individual_Total]
      } ONColumns,

  ([DIM STRUCTURE].[PARENT CODE].&[M01]&[M]:[DIM STRUCTURE].[PARENT CODE].&[M11]&[M],
  [DIM TAILORING].[TAILORING_LABEL].[TAILORING_LABEL],
  {[DIM RATING STRINGS].[LABEL].[LABEL],[DIM RATING STRINGS].[LABEL]}

  ) onrows

 FROM [Cube] 
```

这是输出

在此输出中，我们有 4 个类别，例如“外部驱动因素”、“战略”、“业务运营和治理”。

我需要计算同一类别中不同颜色的百分比。例如，如果我们采用“外部驱动程序”，那么计算应该像
amber = 15/28 * 100、green = 5/28/*100 等，因为 28 是外部驱动程序的总和。请告诉我如何在 mdx 中执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T22:08:57.853

在这里你可以与我的解决方案进行比较，它会给你父母的百分比。

```
with 
member [Measures].[Percent of parent] as
([Measures].[Order Quantity]) /
([Product].[Product Categories].currentmember.parent,
[Measures].[Order Quantity])
,format_string = "percent"

SELECT
{([Measures].[Order Quantity]),
([Measures].[Percent of parent])} ON COLUMNS,
{[Product].[Product Categories].[Category].&[3]} *
{[Product].[Subcategory].[Subcategory].Members} *
{[Product].[Style].[Style].Members} *
{[Product].[Product].members}
ON ROWS
FROM [Cube] 
```

![结果](../Images/6e0a919775640f007b53c5dd7e46a8bc.png)

我不知道我是否正确阅读了您的尺寸，但也许您的成员应该看起来像：

```
with member [Measures].[Percent] as
 [Measures].[AGG_RATING Count] /
 ([DIM RATING STRINGS].[LABEL].CURRENTMEMBER.PARENT,
  [Measures].[AGG_RATING Count])
 , format_string = "percent" 
```

# nginx - Nginx 试图登录到 /var/logs 而不是 /var/log？

> ID：15671578
> 
> 赞同：5
> 
> 时间：2013-03-27T23:36:53.713
> 
> 标签：nginx

我注意到当我使用 测试我的 nginx 配置时`nginx -t`，它给了我一个警告：

`nginx: [alert] could not open error log file: open() "/var/logs/nginx/error.log" failed (2: No such file or directory`)

这是有道理的，因为 nginx 的日志路径实际上设置为`/var/log/nginx/`not `/var/logs/nginx`。

我扫描了整个 nginx 配置目录，没有任何引用 /var/logs 的内容。我不知道这个日志位置可以写在哪里？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-28T01:38:33.240

在终端中运行此命令（注意：大写 V）：

```
nginx -V 
```

你在那里找到 /var/logs 吗？您的 nginx 可能会使用该默认文件位置进行编译。

[**编辑**]

我猜您的某些服务器块没有“error_log”指令。所以 nginx 会为他们尝试默认的。请注意，默认情况下，error_log 始终处于打开状态。

**要解决此问题，您可以在主**块（顶级）上添加此行，以便所有子块都可以继承该设置：

```
error_log /var/log/nginx/error.log; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-05-29T06:15:48.113

您可以创建这些丢失的文件：

```
cd /var/log/nginx/
sudo touch error.log
sudo touch access.log
sudo chmod 750 *.log 
```

然后触发`nginx`服务：

```
sudo systemctl daemon-relod
sudo service nginx restart 
```

[**注意**]：

您还可以禁用`nginx`日志记录：

*   [禁用 nginx 日志记录 (1)](https://serverfault.com/questions/318574/how-to-disable-nginx-logging?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)
*   [禁用 nginx 日志记录 (2)](https://linuxconfig.org/how-to-disable-nginx-logging-on-linux-system)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T07:42:03.550

你有一个错误的编译默认值。加载配置之前 nginx 注意到的任何内容都会转到编译时定义的错误日志的路径。如果不能，使用健全的路径或符号链接日志重新编译 nginx 到日志。

# range - 埃拉托色尼筛（降低空间复杂度）

> ID：15671579
> 
> 赞同：1
> 
> 时间：2013-03-27T23:36:56.323
> 
> 标签：range, primes, sieve-of-eratosthenes, space-complexity, number-theory

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:15:50.237

您需要存储小于等于 b 平方根的所有素数，然后对于 a 和 b 之间的每个数字，检查它们是否可以被这些数字中的任何一个整除并且它们不等于这些数字。所以在我们的例子中，幻数是 sqrt(b)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-23T01:06:57.077

您可以使用 Eratosthenes 的分段筛。基本思想非常简单。

在一个典型的筛子中，我们从一大堆布尔值开始，全部设置为相同的值。这些代表奇数，从 3 开始。我们看第一个，发现它是真的，所以我们将它添加到素数列表中。然后我们将该数字的每个倍数标记为非质数。

现在，问题在于它对缓存不是很友好。当我们标记每个数字的倍数时，我们遍历整个数组。然后当我们到达终点时，我们从头开始（不再在缓存中）并再次遍历整个数组。每次通过数组，我们都会再次从主存中读取整个数组。

对于分段筛，我们做的事情有点不同。我们首先只找到直到我们关心的极限平方根的素数。然后我们用它们来标记主数组中的素数。这里的区别是我们标记素数的*顺序*。不是标记*所有*3 的倍数，然后标记所有 5 的倍数，等等，我们首先标记出适合缓存的数据的 3 的倍数。然后，我们不再继续处理数组中的更多数据，而是返回并标记出适合缓存中数据的 5 的倍数。然后是 7 的倍数，以此类推。

然后，当我们标记出该缓存大小的数据块中的所有倍数时，我们将继续处理下一个缓存大小的数据块。我们从标记这个块中的 3 的倍数开始，然后标记 5 的倍数，依此类推，直到我们标记掉了这个块中的所有倍数。我们继续这种模式，直到我们标记出所有块中的所有非质数，我们就完成了。

因此，给定 N 个低于我们关心的极限平方根的素数，一个朴素的筛子将读取整个布尔数组 N 次。相比之下，分段筛只会读取每个数据块一次。一旦从主内存中读取了一块数据，在从主内存中读取更多数据之前，对该块的所有处理都已完成。

这给出的确切加速将取决于高速缓存速度与主内存速度的比率、您使用的阵列的大小与高速缓存的大小等等。尽管如此，它通常是相当可观的——例如，在我的特定机器上，寻找高达 1 亿的素数时，分段筛的速度优势约为 10:1。

如果您使用的是 C++，您必须记住一件事。一个众所周知的问题`std::vector<bool>`是在 C++98/03 下，`vector<bool>`需要将每个布尔值存储为一个位，并使用一些代理技巧来获得类似布尔的行为。此后该要求已被取消，但许多图书馆仍然包含它。

使用非分段筛，这通常是一个有用的权衡。虽然计算掩码需要一点额外的 CPU 时间，例如一次只修改一个位，但它为主内存节省了足够的带宽来弥补。

使用分段筛，到主内存的带宽几乎没有那么大的因素，因此使用 a`vector<char>`通常似乎可以提供更好的结果（至少对于我手边的编译器和处理器而言）。

从分段筛获得最佳性能确实需要了解处理器缓存的大小，但精确正确通常并不重要 - 如果您假设大小小于实际大小，您不一定会获得最佳使用你的缓存，但你通常也不会丢失很多。

# java - smack 中 XMPPConnection 的登录方法发生异常

> ID：15671582
> 
> 赞同：1
> 
> 时间：2013-03-27T23:36:58.230
> 
> 标签：java, smack, google-talk, chatbot

我写了以下代码：

```
ConnectionConfiguration connConfig = new ConnectionConfiguration("talk.google.com", 5222, "gmail.com");
XMPPConnection connection = new XMPPConnection(connConfig);
connection.connect();
System.in.read();
connection.login("xxx@gmail.com", "***"); //Exception occurs here! 
```

例外是

```
java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:185) 
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:282)
at sun.nio.cs.StreamDecoder.implRead (StreamDecoder.java:324)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:176)
at java.io.InputStreamReader.read(InputStreamReader.java:184)
at java.io.BufferedReader.fill(BufferedReader.java:153)
at java.io.BufferedReader.read1(BufferedReader.java:204)
at java.io.BufferedReader.read(BufferedReader.java:278)
at org.xmlpull.mxp1.MXParser.fillBuf(MXParser.java:2992)
at org.xmlpull.mxp1.MXParser.more(MXParser.java:3046)
at org.xmlpull.mxp1.MXParser.nextImpl(MXParser.java:1144)
at org.xmlpull.mxp1.MXParser.next(MXParser.java:1093)
at org.jivesoftware.smack.PacketReader.parsePackets(PacketReader.java:325)
at org.jivesoftware.smack.PacketReader.access$000(PacketReader.java:43)
at org.jivesoftware.smack.PacketReader$1.run(PacketReader.java:70)Exception in thread "main" No response from the server.:
at org.jivesoftware.smack.NonSASLAuthentication.authenticate(NonSASLAuthentication.java:73)
at org.jivesoftware.smack.XMPPConnection.login(XMPPConnection.java:212)
at org.jivesoftware.smack.Connection.login(Connection.java:348) 
```

有时我也会遇到这个异常：

```
Exception in thread "main" Connection failed. No response from server.:at org.jivesoftware.smack.PacketReader.startup(PacketReader.java:119)
at org.jivesoftware.smack.XMPPConnection.initConnection(XMPPConnection.java:568)
at org.jivesoftware.smack.XMPPConnection.connectUsingConfiguration(XMPPConnection.java:527)
at org.jivesoftware.smack.XMPPConnection.connect(XMPPConnection.java:953) 
```

有谁能够帮我？我用谷歌搜索了它，有人说如果你`Thread.sleep(10000);`在连接和登录之间使用一些延迟就可以了。但它不起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T02:46:25.740

你有代理或防火墙吗？检查您与 smack 端口的连接。

在这个博客中有一个 gtalk 连接的例子，它使用 SASLAuthentication 类来进行 TSL 身份验证。 [http://ashwinrayaprolu.wordpress.com/2011/05/03/smack-xmpp-and-gtalk/](http://ashwinrayaprolu.wordpress.com/2011/05/03/smack-xmpp-and-gtalk/)

SASLAuthentication：[http ://www.igniterealtime.org/builds/smack/docs/3.2.2/javadoc/org/jivesoftware/smack/SASLAuthentication.html](http://www.igniterealtime.org/builds/smack/docs/3.2.2/javadoc/org/jivesoftware/smack/SASLAuthentication.html)

祝你好运。

# android - 从一个活动创建多个指向不同活动的意图会产生空指针异常

> ID：15671583
> 
> 赞同：-2
> 
> 时间：2013-03-27T23:36:59.103
> 
> 标签：android

我可以那样做吗？

```
public void onClick(View v) {
        switch (v.getId()){
        case R.id.btn:
             edit11=edit1.getText().toString();
             edit22=edit2.getText().toString();
             Intent i=new Intent(this,selection.class);
             i.putExtra("code_value",edit11);
             Intent k=new Intent(this,myservice.class);
             k.putExtra("time_value",edit22);
                     this.startService(k);
             Intent l=new Intent(this,MainActivity.class);

             startActivity(l);  
             break;

     }
     } 
```

从上面的活动中，它有 2 个编辑文本字段和一个按钮，当按下按钮时我想要将“code_value”传递给选择活动，将 time_value 传递给 myservice 活动并启动主要活动。

这样做会在选择活动 oncreate 中给我一个空指针异常。我必须提到，如果我只使用 Intent i 并在其中传递 2 个值然后 startactivity(i)，它工作正常。

- - - - - - - - - - -更新 - - - - - - - - - - - - - - --------------

选拔类：

```
public class selection extends FragmentActivity implements OnMyLocationChangeListener{

    GoogleMap googleMap;
    double latitude=0.0;  
    double longitude=0.0;
    String code_value="";

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.selection);

        code_value=getIntent().getExtras().getString("code_value");
         ...//code for google map
      ...
      public void onCheckedChanged(RadioGroup group, int checkedId) {
                if(checkedId == R.id.rb_normal){
                    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
         ....
          else if(checkedId == R.id.save_location){

                 new Thread(new Runnable() {
                     public void run() {

                           postData(Double.toString(latitude),Double.toString(longitude),code_value);
                     }

                 }).start();
        .....
         public void postData(String lat, String lo ,String code) {
        // Create a new HttpClient and Post Header
        HttpClient httpclient = new DefaultHttpClient();
                HttpGet  htget = new HttpGet("www.test.com"+lat+"/"+lo+"/"+code);

    try {
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(htget);
        String resp = response.getStatusLine().toString();
        Toast.makeText(this, resp, 5000).show();

    } catch (ClientProtocolException e) {
        Toast.makeText(this, "Error", 5000).show();
    } catch (IOException e) {
        Toast.makeText(this, "Error", 5000).show();
    } 
```

日志猫：

```
W/dalvikvm(2459): threadid=1: thread exiting with uncaught exception (group=0x2aacc560)
03-28 10:34:35.478: E/AndroidRuntime(2459): Uncaught handler: thread main exiting due to uncaught exception
03-28 10:34:35.498: W/System.err(2459): java.io.IOException: Permission denied
03-28 10:34:35.508: E/AndroidRuntime(2459): FATAL EXCEPTION: main
03-28 10:34:35.508: E/AndroidRuntime(2459): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.datagps/com.example.datagps.selection}: java.lang.NullPointerException
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.os.Looper.loop(Looper.java:130)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.ActivityThread.main(ActivityThread.java:3683)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at java.lang.reflect.Method.invokeNative(Native Method)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at java.lang.reflect.Method.invoke(Method.java:507)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:895)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:653)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at dalvik.system.NativeStart.main(Native Method)
03-28 10:34:35.508: E/AndroidRuntime(2459): Caused by: java.lang.NullPointerException
03-28 10:34:35.508: E/AndroidRuntime(2459):     at com.example.datagps.selection.<init>(selection.java:87)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at java.lang.Class.newInstanceImpl(Native Method)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at java.lang.Class.newInstance(Class.java:1409)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
03-28 10:34:35.508: E/AndroidRuntime(2459):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561) 
```

**我忘了在清单中显示“”。之后，当我启动我的应用程序时，它会崩溃并给出“IntentService 中的空指针异常”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:14:47.360

您无法`HttpClient`在主 UI 线程中启动。您必须创建另一个 Thread/Runnable 来运行您的`httpClient`. 除了您的`NullPointerException`（一旦您解决了该问题），您还将收到一个`android.os.NetworkOnMainThreadException`.

将`httpClient`移入 a`Runnable`以解决部分问题。

为了修复`NullPointerException`，我们需要查看 LogCat 显示它出现的文件和行号。您必须在该行号发布代码行，因为我们看不到问题中的行号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:41:16.703

好的，问题是我在 oncreate 之前有 code_value 字符串。现在移动它和它的 ojk。

# vb.net - 如何使用 Razor 视图中的 Profile 对象？

> ID：15671584
> 
> 赞同：1
> 
> 时间：2013-03-27T23:37:10.640
> 
> 标签：vb.net, asp.net-mvc-4, user-profile, razor-2

我有一个 MVC4 应用程序，并且一直在关注 Pluralsight 视频教程。

我的 UserProfile 表添加了一个属性，它运行良好：

```
<Table("UserProfile")>
Public Class UserProfile
    <Key>
    <DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)>
    Public Property UserId As Integer
    Public Property UserName As String
    Public Property FullName As String
End Class 
```

`UserId`并且`UserName`是默认的，但我已经添加`FullName`并让它工作了。当我创建新用户时，他们的全名被放入`FullName`数据库的字段中。

**如何`FullName`从 Razor 视图中访问？**

我不想使用会话、ViewData 或模型。事实上，我希望它显示在每个页面上，因此不能通过控制器执行此操作。

我希望通过`@Profile.Item("FullName")`or访问它，`@Profile.PropertyValues("FullName")`但 Profile 对象为空。我该如何设置？

![配置文件对象为空.png](../Images/6b460ea887a0ddf91f7a7b158dbd02e4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:52:13.617

查看Phil Haack 的[这篇文章](http://haacked.com/archive/2011/02/21/changing-base-type-of-a-razor-view.aspx)。或者[这个](http://develoq.net/2011/how-to-change-base-type-of-razor-view-engine-pages/)在 develoq

您可以为您的视图创建一个新的基本页面，该页面将您的 Profile 对象作为属性。

```
public abstract class ProfileWebViewPage<T> : System.Web.Mvc.WebViewPage
{
  public UserProfile Profile { get; set; }

  public override void InitHelpers()
  {
    base.InitHelpers();
    //Set your Profile here. 
  }
} 
```

然后将其设置为 webconfig 中的基本类型（在视图文件夹中）：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="MyProject.ProfileWebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

然后您可以通过以下方式简单地访问它：

```
@Profile.FullName 
```

**编辑**

好的，抱歉，我以为你有这些信息，只是在寻找一种在你的页面上访问它的方法。

您不能（AFAIK）使用 SimpleMembershipProvider 访问自定义配置文件信息。我认为您需要查看自定义 ProfileProvider ( [http://dotnetnsqlcorner.blogspot.co.nz/2012/05/implementing-custom-profile-in-aspnet.html](http://dotnetnsqlcorner.blogspot.co.nz/2012/05/implementing-custom-profile-in-aspnet.html) ) 或使用 SqlProfileProvider ([实施 Profile Provider in ASP.NET MVC](https://stackoverflow.com/questions/79129/implementing-profile-provider-in-asp-net-mvc) )

或者：

您可以只使用 EF 进行数据访问以直接进入配置文件（使用数据库上下文 UserProfile 所在的任何内容：

```
Profile = (new UsersContext()).UserProfiles.SingleOrDefault(u => u.UserName = User.Identity.Name) 
```

# python - 用于配置 Google 应用的数据存储与电子表格

> ID：15671591
> 
> 赞同：0
> 
> 时间：2013-03-27T23:37:57.297
> 
> 标签：python, google-app-engine, google-sheets, google-cloud-datastore

在我的公司，我们想在 Google 应用引擎中构建一个应用程序，该应用程序将管理用户对 Google 应用程序的配置。但是我们真的不知道使用什么数据源？

我们提出了两个主张：

1.  包含用户数据的电子表格，我们将使用电子表格 API 获取此数据并将其用于用户配置
2.  数据存储也将包含用户的数据，这次我们将使用数据存储 API。

请注意，我公司有 3493 个用户，我们不知道每种解决方案有太多优点和缺点。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:55:44.970

如果您使用 Datastore API，您还需要构建一种方法来管理系统中的用户数据。

如果您使用电子表格，这将作为您管理用户数据的方式，因此您可以通过这种方式管理数据。

如果您希望将用户数据管理无缝集成到您的应用程序中，则使用 Datastore API 的好处是。电子表格集成将与您的主应用程序保持分离。

# vb.net - Visual Basic - 循环数组 100 次不起作用？

> ID：15671593
> 
> 赞同：2
> 
> 时间：2013-03-27T23:38:02.763
> 
> 标签：vb.net

我试图循环这个数组 100 次（得到一个 0-99,999 的数字）。我已经尝试了几种不同的方法，但没有运气。我已经设置好了，所以你点击一个按钮，它就会生成数组。然后，用户将输入一个数字并点击另一个按钮以检查该数字在 100 个数字的组中出现了多少次。任何想法如何解决它？我被困住了。

```
 Dim i As Integer
    Dim rnd As New Random()
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEnter.Click

            Dim num As Integer
            If Int32.TryParse(txtEnter.Text, num) AndAlso num >= 0 AndAlso num < 10 Then
            lblNumber.Text = i.ToString()
            Dim counts = From c In i.ToString()
                         Group By c Into Group
                         Select DigitGroup = New With {.Count = Group.Count(), .Digit = c, .Group = Group}
                         Order By DigitGroup.Count Descending, DigitGroup.Digit
                Dim numCount = counts.FirstOrDefault(Function(grp) grp.Digit.ToString() = num.ToString())
                If numCount IsNot Nothing Then
                    Dim numMessage = String.Format("There are {0} number {1}'s found.", numCount.Count, num)
                    MessageBox.Show(numMessage)
                Else
                    MessageBox.Show("Your number does not contain a " & num)
                End If
            Else
                MessageBox.Show("Please enter a number between 0 and 9.")
            End If

    End Sub

    Private Sub btnGetNumber_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnGetNumber.Click
        btnEnter.Enabled = True

        i = 0
        Do Until i > 100
            Dim randomInt = rnd.Next(0, 100000)
            i = i + 1
            i = rnd.Next(0, 100000)
        Loop
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:52:21.820

移出`New Random()`该循环。使其成为全局并只创建一次实例。

（随机生成器开始使用从当前时间获得的种子。在循环中声明随机变量会导致一次又一次使用相同的种子。这会返回相同的数字，从而破坏函数的随机性）就像：[http： //xkcd.com/221/](http://xkcd.com/221/)

[在此处](https://stackoverflow.com/questions/3053807/random-number-in-a-loop)查看另一种解释

当然，如果你不增加`i`用于控制循环的变量，你将永远循环

```
Dim i As Integer
Dim rnd As New Random()

.....

i = 0
Do Until i > 100
    Dim randomInt = rnd.Next(0, 100000)
    i = i + 1
Loop 
```

这么说，现在我无法理解你在这里想要做什么。没有要检查的数组，并且您不使用从 Random 生成器获得的值，简单地说，您的`i`变量以值 101 退出。
现在我只是在猜测您的意图是什么，但也许您只想要这个？

```
i = rnd.Next(0, 100000) 
```

这将为变量`i`提供一个随机数，您的后续代码将检查所需数字中有多少存在于`i`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T23:56:14.503

首先，当您知道循环数时，通常使用 For 循环。

其次，您忘记在 until 循环中增加 i

最后，您不需要在每个循环中重新声明 rnd。这样的事情对我来说听起来更好：

```
Dim rnd As New Random()

For i = 1 To 100
    Dim randomInt = rnd.Next( 0 , 100000 )
Next 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T23:52:30.243

我看到你没有添加变量“i”来增加：

```
i = 1
Do Until i > 100
        Dim rnd As New Random()
        Dim randomInt = rnd.Next(0, 100000)
        i+=1 'Increment value of i by 1, same as i = i + 1 
Loop 
```

如果不递增，“i”的变量将始终为 1。检查一下，让我知道这是否能解决问题！

# internet-explorer-8 - IE8 中的 YouTube Iframe API 错误

> ID：15671599
> 
> 赞同：1
> 
> 时间：2013-03-27T23:38:25.173
> 
> 标签：internet-explorer-8, youtube-api, youtube-javascript-api

我在一个有 YouTube 用户上传列表的网站上工作，并且在 IE8 中遇到一些我似乎无法调试的错误。网站在 FF 和 Chrome 中运行良好。由于某种原因，我也无法使用 firebug lite，因此调试非常困难。

在 IE8 中，我得到：'正则表达式中的预期'）'和'对象不支持此属性或方法'

当使用 YouTube API 文档中的示例与我的其余代码结合使用时，我已经搜索了高和低，但仍然出现此错误。但我无法缩小问题所在。

这是开发 URL：[http ://dev.thenicestplaceontheinter.net/](http://dev.thenicestplaceontheinter.net/)

# c# - 在 C# 中向 SQLite 数据库添加大量数据

> ID：15671600
> 
> 赞同：1
> 
> 时间：2013-03-27T23:38:30.533
> 
> 标签：c#, database, sqlite, windows-store-apps

我目前正在尝试使用 C# 和 System.Data.SQLite 在我的 Windows 8 应用程序中向 SQLite 数据库添加大量数据。我有一个列表中的所有对象（MediaItem），我正在使用 foreach 循环将每个对象添加到数据库中。不幸的是，这很慢，所以我想知道是否有办法加快速度。例如，我可以将完整列表交给数据库吗？到目前为止，这是我的代码：

```
List<MediaItem> items;

// adding lots of onbjects to the list...

using (var db = new SQLiteConnection(dbPath))
{
     foreach (var item in items)
     {
         db.Insert(item);
     }
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T23:56:43.523

根据我的经验，将尽可能多的数据库调用包装到事务中会大大加快速度：

```
using (var db = new SQLiteConnection(dbPath))
{
    db.RunInTransaction(() =>
    {
        foreach (var item in items)
        {
            db.Insert(item);
        }
    });
} 
```

# c# - 如何使用 String.Format (c#) 去掉小数部分

> ID：15671609
> 
> 赞同：2
> 
> 时间：2013-03-27T23:39:25.337
> 
> 标签：c#, string.format

在 C# 中格式化十进制类型时如何去掉小数部分？

```
 decimal a = 1.00m;

        String.Format("{0}", a); // result is 1.00 Should be 1, HOW? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T23:49:15.517

您可以使用：

```
String.Format("{0:N0}", a); // "1" 
```

或者，显示 1 个小数点：

```
String.Format("{0:N1}", a); // "1.0" 
```

[有关标准数字格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T23:41:08.920

您可以随时将其[放置](http://msdn.microsoft.com/en-us/library/k7ycc7xh.aspx)：

```
String.Format("{0}", Math.Floor(a)); 
```

或者，由于这一行没有其他内容`Format`，就这样走吧：

```
Math.Floor(a).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:52:28.930

试试这个：

```
String.Format("{0:0}", a); 
```

在这里阅读更多：http: [//msdn.microsoft.com/en-us/library/0c899ak8.aspx](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)

# mongodb - 刚果“在”查询

> ID：15671612
> 
> 赞同：0
> 
> 时间：2013-03-27T23:39:37.627
> 
> 标签：mongodb, clojure, congomongo

如何在刚果蒙戈查询中使用 MongoDB[`$in`查询运算符](http://docs.mongodb.org/manual/reference/operator/in/#op._S_in)？这是我不成功的猜测——我在任何地方都找不到关于查询语法的文档。

```
(fetch :solutions
       :where {:user {:in [1 2 3]}}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:41:07.083

Kongmongo 查询中的运算符需要`$`前缀：

```
(fetch :solutions
       :where {:user {:$in [1 2 3]}}) 
```

这也适用于[其他运算符](http://docs.mongodb.org/manual/reference/operators/)，如`$gt`,`$ne`等。

# java - 泛型谜题

> ID：15671619
> 
> 赞同：8
> 
> 时间：2013-03-27T23:40:37.390
> 
> 标签：java, generics, nested-generics

我试图弄清楚如何让泛型跳过箍。

我有：

```
interface Root { }
interface Middle extends Root { }
class Type implements Root { } 
```

还有许多“子类型”类：

```
class Subtype1 extends Type implements Middle { }
class Subtype2 extends Type implements Middle { }
... 
```

我想要的是声明一个具有两个类型参数`T`and的类`S`，其中`T`由`Type`and绑定和`S`绑定。`T``Middle`

我看不到使用泛型来确保`S`extends `T`AND implements的方法`Middle`。我想要的是这样的：

```
class Handler<T extends Root, S extends T, S extends Middle>; 
```

或者

```
class Handler<T extends Root, S extends <T extends Middle>>; 
```

但当然，两者都不合法。也许我缺少一些魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:47:45.943

`SubType`尝试引入一个扩展和实现的抽象类`Middle`，这样它的类型就可以在`Handler`.

```
abstract class MiddleSubtype extends Subtype implements Middle { } 
```

然后，

```
class Handler<T extends Root, S extends MiddleSubtype> {  //... 
```

**编辑：**在更新问题之后，同样的想法看起来像：

```
abstract class MiddleType extends Type implements Middle { }

class Subtype1 extends MiddleType { }
class Subtype2 extends MiddleType { }
...

class Handler<T extends Root, S extends MiddleType> {  //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T12:45:20.877

或者您可以使 S 本身成为泛型：

```
interface SInt<A,B> {}
class Handler<T extends Root, S extends SInt<T, Middle>>{} 
```

# java - 小直 - 方法

> ID：15671620
> 
> 赞同：1
> 
> 时间：2013-03-27T23:40:53.203
> 
> 标签：java

我已经坚持了几天了。此方法检查是否掷出 5 个骰子 == 小顺子。它适用于某些数字。如果我滚动一个

> 1、2、4、3、6

它会起作用的。但是，如果我滚动

> 1、2、4、3、3

不起作用。我认为这是因为那里有重复的 3。我需要以某种方式将它移到最后。

小顺子是指有四个连续的骰子面值，例如 1、2、3、4 或 3、4、5、6。它可以是任意顺序，例如 2、3、1、4

```
 int counter = 0;
      int score = 0;
      boolean found = false;
      Arrays.sort(die);

      for (int i = 0; i < die.length - 1; i++)
      {
          if (counter == 3)
              found = true;

          if (die[i + 1] == die[i] + 1)
          {
              counter++;
          }
          else if (die[i + 1] == die[i])
          {
              continue;
          }
          else
          {
              counter = 0;
          }
      }

      if (found)
      {
         score = 30; 
      }
      else
      {
          score = 0;
      }
      return score;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:51:40.943

重复的 3 不是抛弃算法的原因。问题是您在迭代过程中检查直线发生后。因此，如果最后一个骰子是顺子的一部分，它将不会被识别。

要解决此问题，请移动

```
if (counter == 3) found = true; 
```

到循环的结尾。应该管用。

编辑：所以它看起来像这样。

```
for (/*...*/) {
  /* Everything else */

  if (counter == 3) {
      found = true;
      break;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:51:29.530

编辑：首先，如果一个小顺子是连续三个，那么你想看看计数器是否达到 2，而不是 3。3 将要求连续四个。

编辑 for 循环的开头，如下所示：

```
 for (int i = 0; i < die.length ; i++)
  {
      if (counter == 2)
          found = true;
      if (i == die.length - 1) break;
      //method continues here 
```

推理：我想当你开始编写这个方法时，`IndexOutOfBoundsException`当它到达数组中的最后一个骰子时，它正在抛出 s，试图将它与不存在的第六个骰子进行比较并死亡。因此，您使循环停止了一小段时间。但是，如果它在最后一个骰子上停了一小段，并且小顺子在最后一个骰子上完成，那么你就再也不会进入循环来确认计数器是 3 并且已经发生了小顺子。通过以这种方式编辑循环的开头，它一直到最后一个元素，检查然后中断。

或者，在循环结束后进行最后一次检查：

```
 for (int i = 0; i < die.length - 1; i++)
  {
      if (counter == 2)
          found = true;
      if (die[i + 1] == die[i] + 1)
      {
          counter++;
      }
      else if (die[i + 1] == die[i])
      {
          continue;
      }
      else
      {
          counter = 0;
      }
  }

  found = (counter == 2); // or counter >= 2 if you want larger straights to be found too

  //continue method here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:10:55.407

这应该计算最长的序列：

```
int longestSequence(int[] a) {
  Arrays.sort(a);
  int longest = 0;
  int sequence = 0;
  for (int i = 1; i < a.length; i++) {
    int d = a[i] - a[i - 1];
    switch (d) {
      case 0:
           // Ignore duplicates.
           break;
      case 1:
           sequence += 1;
           break;
      default:
           if (sequence > longest) {
             longest = sequence;
           }
           break;
    }
  }
  return Math.max(longest, sequence);
} 
```

# javascript - 内联 Ckeditor：所有按钮都被禁用

> ID：15671621
> 
> 赞同：5
> 
> 时间：2013-03-27T23:40:53.413
> 
> 标签：javascript, ckeditor

我目前正在尝试向某些文本添加内联 ckeditor。

没有 javascript 错误发生，但不幸的是所有工具都被禁用，我无法编辑文本。

[http://fiddle.jshell.net/5LuyD/](http://fiddle.jshell.net/5LuyD/)

任何人都知道我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-28T09:24:04.497

您缺少的是`contenteditable="true"`元素的属性。如果您想自定义编辑器（即通过 运行`CKEDITOR.inline( element, cfg )`），`CKEDITOR.disableAutoInline = true;`请先设置。

使用`CKEDITOR.disableAutoInline = true;`，`contenteditable="true"`必须手动初始化所​​有元素才能成为编辑器实例。请参阅内联实例的[官方指南](http://docs.ckeditor.com/#!/guide/dev_inline)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:35:21.260

您错过了可编辑标签的 contenteditable="true" 属性！

这是小提琴。[http://fiddle.jshell.net/5LuyD/1/](http://fiddle.jshell.net/5LuyD/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-18T19:36:45.847

对于尽管设置了这个问题的任何人，`contenteditable="true"`Chrome 存在一个问题，如果元素（或父元素）不可见，则 contenteditable 设置为 false。

请参阅：[http ://ckeditor.com/forums/CKEditor/Solved-Chrome-Toolbar-buttons-grayed-out-for-INLINE-editor](http://ckeditor.com/forums/CKEditor/Solved-Chrome-Toolbar-buttons-grayed-out-for-INLINE-editor)

解决方案是 a) 在调用之前确保元素可见`CKEDITOR.inline()`或 b) 使用 textarea 而不是 contenteditable 元素（在这种情况下，CKE 在 textarea 之后添加了一个 contenteditable div）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-30T20:31:14.067

我刚刚遇到了同样的问题，我发现了一个不同的解决方法。如果父元素（或元素本身）最初设置为 display:none，则 contenteditable 将 = false（在 chrome 上）。

这个修复对我有用：

```
var ck = CKEDITOR.inline(element);
ck.on('instanceReady', function(event) {
     var editor = event.editor;
     editor.setReadOnly(false);
}); 
```

参考：[https ://dev.ckeditor.com/ticket/9814](https://dev.ckeditor.com/ticket/9814)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-11T00:37:08.027

我遇到了同样的问题，其他建议的解决方案都没有奏效。

问题是 div 的 id 属性以数字字符开头（它是一个 GUID）。将 id 更改为以字母字符开头有效：所有编辑器按钮均已启用。

出于某种原因，ckEditor 不喜欢以数字字符开头的 id。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-15T11:48:29.507

```
$(document).ready(function(){
    for(var i in CKEDITOR.instances) {
                var ck=CKEDITOR.instances[i]; 
                ck.on( 'instanceReady', function( ev ) {
                 var editor = ev.editor;
             editor.setReadOnly( false );
    });
}}); 
```

# html - 需要帮助修复链接的可点击区域

> ID：15671622
> 
> 赞同：0
> 
> 时间：2013-03-27T23:40:57.253
> 
> 标签：html, css, hyperlink

只是用一个小无用的网站自娱自乐，练习这个那个。我遇到了一个问题，链接只能在左侧点击，不能在右侧点击。

它的外观：div，里面有一个标题（2），里面有一个链接

```
 <div class="button one"><h2><a href="#">example</a></h2></div> 
```

它有一个右边框、一个悬停功能和相当宽的宽度。它是绝对定位的。一直在尝试，想出了以下代码（有点乱，抱歉）

```
.button{
position:absolute;
padding:0px;
margin:0px;
width:300px;
height:70px;
background-color:#999999;
border-left:solid 7px #FF6600;
border-bottom:solid 1px #FF6600;
border-top:solid 1px #FF6600;

}

.button h2{
padding:0px;
margin:0px;
text-transform:uppercase;
color:#FFFFFF;
font-size:1,5em;
}
a{
margin:0px;
display:block;
text-decoration:none;
color:#FFFFFF;
padding:20px;

}
a:hover{
background-color:#FF6600;
} 
```

问题：链接只是宽度约为 1/2 的链接。它们悬停的背景颜色会更改整个区域，但仅当鼠标位于该链接区域时才有效。不知道我错过了什么。感谢所有帮助！

对于那些想自己查看 css 和 html 文件的人，我将它们放在 test.rar 文件中： [http ://www.sendspace.com/file/pe42e0](http://www.sendspace.com/file/pe42e0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:24:55.417

这是因为图像**#content_image_1**位于您的按钮上方。如果您`z-index: 1;`从该图像中删除 ，您的按钮将按预期工作。尽管按钮后面有您的图像。

# javascript - 将 javascript 变量解析为 iframe src

> ID：15671629
> 
> 赞同：0
> 
> 时间：2013-03-27T23:41:12.250
> 
> 标签：javascript, variables, iframe, click

我被要求在网站订单收据页面上部署价值点击跟踪像素。数据必须动态放置到 iframe 的 src 中。

我已将正确的数据声明为变量，如下所示：

```
<script type="text/javascript">
//makes a copy of the total order revenue
var totalPrice = jQuery('.veryImportant.ordertotal div').html();
jQuery('#buttons').append('<p id="totalPrice">'+totalPrice+'</p>');
//removes the £ pound symbol from the duplicated string
var val = jQuery('#totalPrice').html();
jQuery('#totalPrice').html(val.substring(1, val.length));
//required variables
var orderid = jQuery('.ordernumber strong').text(); //order ID number
var revenue = jQuery('#totalPrice').text(); // total order revenue
var quantity = jQuery('#totalQuantity').text(); //quantity per table row/product name
//testing the variables print the correct values
alert(orderid + " " + revenue + " " + sku + " " + quantity);
</script> 
```

（对于任何想知道页面中已经存在的“sku”的人，所以我很幸运）

我需要变量在这个 iframe 中动态打印它们的值，我将把它放在上面的 jQuery 下：

```
<iframe src="https://secure.img-cdn.mediaplex.com/0/24663/universal.html?page_name=sale&Sale=1&Amount={' + revenue + '}&Quantity={' + quantity + '}&mpuid={' + sku + ',' + orderid + '}" HEIGHT=1 WIDTH=1 FRAMEBORDER=0></iframe> 
```

上面我尝试添加变量名，但用空格和 + 符号括起来，但这不起作用。它只是在浏览器中准确显示上述内容。

任何想法，人们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T16:28:41.163

好的，所以我设法解决了这个问题。该方法相当冗长，但是我不得不解决一些障碍（因此我必须复制和移动一些数据）

```
<!-- order confirmation page VALUE CLICK -->
<venda_block mode=value,<venda_tpxt mode=get,name=track>=orderreceipt><!-- applies this     code block to the order receipt page only -->
<!-- HTML -->
<p id="valueClickSrc"></p><!-- acts as a store for the js to construct and deploy the dynamic src -->
<iframe id="iframe1" src="#" HEIGHT=1 WIDTH=1 FRAMEBORDER=0></iframe> <!-- the actual      tracking iframe which will be populated by js -->
<p id="totalQuantity" style="position:relative; z-index:9999; background:#066; font-size:14px; color:#FFF;"><venda_shopcart mode=getqty></venda></p><!-- serves to 'wrap' the quantity so that it can be selected by id -->
<!-- witch craft -->
<script type="text/javascript">
var totalPrice = jQuery('.veryImportant.ordertotal div').html(); //grabs the order total     price from the receipt and stores it in a variable
jQuery('#buttons').append('<p id="totalPrice" style="display:none;">'+totalPrice+'</p>'); //prints the total price inside a p tag so that it can be selected
var val = jQuery('#totalPrice').html(); //grabs the order total price from the newly printed p tag above
jQuery('#totalPrice').html(val.substring(1, val.length)); //removes the first character from the #totalPrice string (in this case, the unwanted £ GBP pound symbol)
var orderid = jQuery('.ordernumber strong').text(); //order ID number
var revenue = jQuery('#totalPrice').text(); // total order revenue
var quantity = jQuery('#totalQuantity').text(); //quantity per table row/product name
// sku is a variable that appears to already be in side the default checkout page js. I got lucky with that one.
alert(orderid + " " + revenue + " " + sku + " " + quantity); //tests that all variables are printing as they should
jQuery('#valueClickSrc').html('https://secure.img-cdn.mediaplex.com/0/24663/universal.html?page_name=sale&Sale=1&Amount=%7b'+revenue+'%7d&Quantity=%7b'+quantity+'%7d&mpuid='+sku+'id'+ orderid); //writes the dynamic url with a combination of text and variables. This is placed inside the <p> above called #valueClickSrc
var valueClickSrc = jQuery('#valueClickSrc').html(); //stores the content of the <p> above into a variable
jQuery('#iframe1').attr('src', valueClickSrc); //applies the content from #valueClickSrc into the src attribute of the iframe
</script>
</venda_block>
<!-- End Value Click tag --> 
```

对于在 Venda 平台上工作的任何人，他们可能会发现这很有用。

如果有人有建议，我很乐意听到。

# javascript - jquery中的.bind方法不起作用

> ID：15671635
> 
> 赞同：0
> 
> 时间：2013-03-27T23:41:36.727
> 
> 标签：javascript, jquery, html, onclick

我正在尝试将单击事件绑定到包含输入按钮的 div。我想要的是当单击按钮时我想调用另一个函数。

HTML div 类如下所示。

```
var searchAttachPoint= document.querySelector('.header1'); 
```

在我的 javascript 中，我有这些行。

```
var searchAttachPoint= document.querySelector('.header1');
$(#header1).bind("click",searchPrompt("Key the text and press Ok", false)); 
```

我在点击事件所在的行中收到一条错误消息“Unexpected token ILLEGAL”。有人可以帮我吗。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:44:23.187

`$(#header1)`应该`$('#header1')`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:45:01.427

我很肯定你想做：

```
$("#header1").bind('click', function () {
    searchPrompt("Key the text and press Ok", false);
}); 
```

如果可用，您还应该使用`.on`over 。`.bind`

您也没有使用`searchAttachPoint`您的示例中的。请注意`.header1`和`#header`是不同的，所以也许您甚至打算做，但这在何时起作用`$(searchAttachPoint).bind`时不是必需的。`$(".header1")`

# sql - 测试使用和返回 refcursor 的 PostgreSQL 函数

> ID：15671636
> 
> 赞同：7
> 
> 时间：2013-03-27T23:41:41.970
> 
> 标签：sql, postgresql, plpgsql, database-cursor

我想测试 Postgres 函数的结果（不可能更改函数）。

该函数接收 REFCURSOR 和其他一些东西作为参数，并返回相同的 RECURSOR。

```
get_function_that_returns_cursor(ret, 4100, 'SOMETHING', 123465) 
```

现在我想在 Postgres 中创建一个小测试来获得这个 FUNCTION 的结果。类似于下面的代码（这是我的方法，但它不起作用）：

```
DO $$ DECLARE
 ret REFCURSOR; 
 row_to_read table_it_will_return%ROWTYPE ;
BEGIN
 PERFORM get_function_that_returns_cursor(ret, 4100, 'SOMETHING', 123465);
-- OR SELECT get_function_that_returns_cursor(ret, 4100, 'SOMETHING', 123465) INTO ret
 FOR row_to_read IN SELECT * FROM ret LOOP
   -- (...)
   RAISE NOTICE 'Row read...';
 END LOOP;
 CLOSE ret;
END $$; 
```

关于如何让它工作的任何建议？可用于测试此类函数的通用解决方案（获取游标并返回游标？

如果我们不知道返回的行类型，我们怎么能做到呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T05:45:52.577

### 第一季度

您的“小测试”可以是纯 SQL：

```
BEGIN;
SELECT get_function_that_returns_cursor('ret', 4100, 'foo', 123); -- note: 'ret'
FETCH ALL IN ret; -- works for any rowtype

COMMIT;  -- or ROLLBACK; 
```

检查结果*后*执行`COMMIT`/ 。大多数客户端只显示 lat 命令的结果。`ROLLBACK`

 *更多内容在手册的[**返回光标**](http://www.postgresql.org/docs/current/interactive/plpgsql-cursors.html#AEN57066)一章中。

### 第二季度

> 如果我们不知道返回的行类型，我们怎么能做到呢？

由于您只想检查结果，因此可以**将整个记录转换为`text`**. 这样，您就可以完全避免函数的动态返回类型问题。

考虑这个演示：

```
CREATE TABLE a (a_id int PRIMARY KEY, a text);
INSERT INTO a VALUES (1, 'foo'), (2, 'bar');

CREATE OR REPLACE FUNCTION reffunc(INOUT ret refcursor) AS  -- INOUT param :)
$func$
BEGIN
    OPEN ret FOR SELECT * FROM a;
END
$func$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION ctest()
  RETURNS SETOF text AS
$func$
DECLARE
    curs1 refcursor;
    rec   record;
BEGIN
  curs1 := reffunc('ret');   -- simple assignment

  LOOP
    FETCH curs1 INTO rec;
    EXIT WHEN NOT FOUND;     -- note the placement!
    RETURN NEXT rec::text;
  END LOOP;
END
$func$ LANGUAGE plpgsql; 
```

[**-> SQL小提琴**](http://www.sqlfiddle.com/#!12/396ec/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T01:30:32.950

这对我想要的有用：

```
DO $$ DECLARE
 mycursor REFCURSOR;
 rec RECORD;
BEGIN
 SELECT 'ret' INTO mycursor FROM get_function_that_returns_cursor('ret'::REFCURSOR, 4100, 'SOMETHING', 123465);
 WHILE (FOUND) LOOP
   FETCH mycursor INTO rec;
   RAISE NOTICE 'Row read. Data: % ', rec.collumn_name;
 END LOOP;
END $$ 
```*

# zend-framework - Zend_Form 提交 > 资源 'controller::action' 未找到

> ID：15671640
> 
> 赞同：2
> 
> 时间：2013-03-27T23:41:50.533
> 
> 标签：zend-framework, zend-form

我正在接管一个经过多个开发人员的网站。根据 ，该站点使用 Zend 1.12.0 版`Zend_Version::VERSION`，这对我来说是一个新框架。在网站上，有一个名为 的表单类`App_Form_Customers_Edit`，它扩展了`Zend_Form`. 表单的action是/customers/edit，提交时`CustomersController`执行editAction的方法。

因此，为了创建一个新表单，我`App_Form_Customers_EditAddress`在与 相​​同的目录中创建了一个新类`App_Form_Customers_Edit`，并将其操作设置为`/customers/editaddress`，创建了一个`editaddressAction`在`CustomersController`类中调用的函数并测试了表单。但我收到一条错误消息，提示“找不到资源'customers::editaddress'”

表单本身显示正确，据我所知，我使用的模式与其他有效的表单完全相同，除了不使用 zf 命令外，Zend 文档中规定的方法相同：[http： //framework.zend.com/manual/1.12/en/learning.quickstart.create-form.html](http://framework.zend.com/manual/1.12/en/learning.quickstart.create-form.html)

我需要做什么才能让我的新表格正常工作？我需要更新`.zfproject.xml`吗？我在那里看不到任何与工作表格有关的东西。

这是代码`App_Form_Customers_Edit`：

```
class App_Form_Customers_Edit extends Zend_Form
{
  public function init ()
  {
    $this->addPrefixPath('App_Form', 'App/Form/');
    $this->setMethod('post');
    // ... The rest is just calls to $this->addElement
  }
} 
```

对于`EditAddress`：

```
class App_Form_Customers_EditAddress extends Zend_Form
{
  public function init ()
  {
    $this->addPrefixPath('App_Form', 'App/Form/')
         ->setMethod('post')
         ->setAction('/customers/editaddress');

    $this->addElement('submit', 'active', ['value' => 'Activate']);
    $this->addElement('submit', 'remove', ['value' => 'Remove']);
    $this->addElement('hidden', 'id');
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:32:08.310

检查 acl 声明。如果您正在使用 acl 并且尚未声明该操作的规则，则可能会收到此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T10:08:12.573

**最佳的揣测：**

您的前开发人员在某处实现了自定义路由。可能在*application.ini*或*boostrap.php*中。此自定义路由正在寻找特定的 url 并`/customers/edit`符合有效路由但`/customers/editaddress`不符合。

我认为这很可能是因为您的错误是缺少资源，而不是“找不到页面”或缺少控制器或缺少操作消息。因此，路由器似乎试图将无效资源与有效路由匹配。

祝你好运

# python - 仅检索 HTTP 响应而不是调试信息

> ID：15671641
> 
> 赞同：0
> 
> 时间：2013-03-27T23:41:52.773
> 
> 标签：python, http, https, header, urllib2

我有下面的请求，它工作正常，但它返回发送的请求和服务器的完整响应。我怎样才能得到响应体？

```
req = urllib2.Request('some url here', data = '')
opener = urllib2.build_opener(urllib2.HTTPSHandler(debuglevel = 1))
req = opener.open(req)
reply = req.read()
req.close()
print reply 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:46:01.447

使用 . 明确请求该额外信息`debuglevel=1`。您可以简单地删除它，甚至整个开瓶器定义，如下所示：

```
import urllib2
print (urllib2.urlopen('https://phihag.de/').read()) 
```

# java - 尝试使用 jtable 更新 mysql 表中的数据

> ID：15671644
> 
> 赞同：1
> 
> 时间：2013-03-27T23:42:13.147
> 
> 标签：java, mysql, database, swing, jtable

嗨，如上所述，我正在尝试更改已经检索到的数据，但不知道如何去做，基本上我想更改一段数据，例如使用 jtable 从 Toyota 到 Supra 的零件名称

这是我到目前为止从 mysql 数据库中检索数据的方法

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         

    DefaultTableModel model=(DefaultTableModel)p1.getModel();
    try{
            Class.forName("java.sql.Driver");
            Connection conn=(Connection)DriverManager.getConnection("jdbc:mysql://localhost:3306/in1010gp33?user=abnd165&password=110016441");
            Statement st=conn.createStatement();
            String query="Select * from parts;";
            ResultSet rs=st.executeQuery(query);
    while(rs.next()){
            String d1=rs.getString("PartName");
            String d2=rs.getString("Manufacturer");
            String d3=rs.getString("VehicleType");
            String d4=rs.getString("Years");
            String d6=rs.getString("Price");

            model.addRow(new Object[]{d1,d2,d3,d4,d6});
                    }
    rs.close();
    st.close();
    conn.close();
        }
    catch(Exception e){
            JOptionPane.showMessageDialog(this,e.getMessage());
                      }       

    // TODO add your handling code here:
}                                        

private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:30:45.020

使用[TableModel](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html)到您的`JTable`. 您在表中所做的任何数据更改都会在表模型上进行。所以最后将表模型中的数据保存到数据库中。

可以使用[setValueAt](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html#setValueAt%28java.lang.Object,%20int,%20int%29)方法更新表。开始查看[如何使用表格。](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# c++ - 在 C++ 中建模变量成员类型

> ID：15671645
> 
> 赞同：1
> 
> 时间：2013-03-27T23:42:21.400
> 
> 标签：c++, oop

我目前有一个正在运行的代码，用于通过给定的 API (libpq) 连接到数据库。

我基本上有两个类：主应用程序类CMain，和数据库相关类（负责连接数据库、发出查询和存储结果）称为CDbConnectorPq。

在我的 CMain 构造函数中，我目前实例化了一个 CDbConnectorPq 类型的类成员，然后我使用该对象直接从我的 CMain 对象触发连接和查询：

```
main->dbConnectorPq->connect(); 
```

问题是除了 libpq 之外，我现在还需要实现另一个 API 来连接到数据库 (ODBC)。我试图弄清楚什么可能是一个体面的建模，以将 libpq 代码与 odbc 代码分开，但仍然使用与我的主要对象完全相同的接口。

我考虑过继承，但最终我得到了 2 个类，CDbConnectorPq 和 CDbConnectorODBC，然后我现在主要有两个成员：一个用于 libpqxx，一个用于 odbc，并且被迫：

```
if ( gl_use_config_odbc )
  dbConnectorOdbc = new CDbConnectorODBC();
else if ( gl_use_config_libpq )
  dbConnectorPq = new CDbConnectorPq(); 
```

进而 ：

```
if ( gl_use_config_odbc ) {
  dbConnectorOdbc->connect();
  dbConnectorOdbc->query();
}
else if ( gl_use_config_pq ) {
  dbConnectorPq->connect();
  dbConnectorPq->query();
} 
```

不知道如何在这里利用继承来掩盖我的主要对象中的 API 特定逻辑。

理想情况下，界面应该是（我认为）：

(如果 gl_use_config = PQ) dbConnector->setType(gl_use_config); dbConnector->connect(....); dbConnector>connect(...);

或 ( 如果 gl_use_config = ODBC ) dbConnector->setType(gl_use_config); dbConnector->connect(param1,param2); dbConnector>连接（查询1，查询2）；

因为是的，参数编号在 PQ 和 ODBC 之间的数量和类型可能不同......

那么，对于这种情况，什么是智能建模？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:11:41.573

这不会是您典型的 SO 答案，但这就是我对此的感受。在过去的 15 年里，我为不同的公司使用 OCI、OCCI、OTL、RogueWave、libpq 和 libpqxx 编写了多个数据库层，我的建议是：不要这样做。严重地。

要么只使用 ODBC，甚至连接到 PostgreSQL（我个人不喜欢），要么你应该开发两个完全分离的数据库访问层。如果你试图统一接口和使用，你会面临很多问题，需要多年的经验。即便如此，对于每个新项目，您都会发现另一个问题，并且界面的更改频率会超出您的预期。

如果您想开发单独的层，您可以做一些事情来简化将应用程序从一个层移植到另一个层：

*   使它们尽可能*相似*，但不要强求！
*   如果两个层具有相同的功能*和相同的语义*，则使用相同的名称。
*   如果两个层具有*不同语义*的相同功能，请使用不同的名称。
*   在使用数据库层的应用程序中，使用*一个*包含数据库标头并通过`typedef`s 使用它们的标头，或者更好的是，使用命名空间别名。

有了这个，移植变得更容易。当您将应用程序从一层移植到另一层时，更改`typedef`标头中的 s 或命名空间别名，让编译器帮助您找到需要手动调整的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:51:02.407

我认为这样做的方法是让您的 CMain 类拥有一个抽象基类的指针，两个子类都派生自该抽象基类。例如

```
class IDatabase
{
public:
   virtual void connect() = 0;

   [...]
}; 
```

那么您需要做的唯一地方是 if/then 逻辑是当您创建适当类的对象时：

```
if ( gl_use_config_odbc ) {
    dbConnector = new CDbConnectorODBC();
} else {
    dbConnector = new CDbConnectorPq();
} 
```

之后的一切都和之前一样：

```
dbConnector->connect(); 
```

...并且 C++ 虚拟方法查找机制将根据 (dbConnector) 指向的对象类型自动调用适当的方法。

至于不同的参数编号，尽量将实现细节的代码保留在两个子类中，这样主代码就不必担心它们。CMain 看到的 IDatabase 接口应该是实现中立的。

# c++ - OpenCV从一组点绘制一条线

> ID：15671646
> 
> 赞同：2
> 
> 时间：2013-03-27T23:42:21.457
> 
> 标签：c++, opencv

我正在尝试绘制一条连接边界框中心点的线，当中心从一帧到另一帧移动时，这些点存储在一个向量中。

现在我正在尝试使用 CvLine 将这些点与一条线连接在一起。我正在关注[这个 Opencv 文档](http://opencv.willowgarage.com/documentation/python/drawing_functions.html#line)。但是 CvLine 函数对我给它的参数很满意。

这是代码：

```
vector<Point> Rightarm(20);

vector<Point> Leftarm(20);

    vector<Point>::const_iterator RightIter;
    vector<Point>::const_iterator LeftIter;

   Point center = Point(oko[0].x + (oko[0].width/2), oko[0].y + (oko[0].height/2));
    cout<<"Center Point of Box: 0 is: " <<center<<endl;

    double area = (oko[0].width * oko[0].height);
    cout<<"The Area of Box: 0 is: " <<area<<endl;

    Point center1 = Point(oko[1].x + (oko[1].width/2), oko[1].y + (oko[1].height/2));
    cout<<"Center Point of Box: 1 is: " <<center1<<endl;

    double area1 = (oko[1].width * oko[1].height);
    cout<<"The Area of Box: 1 is: " <<area1<<endl;

Rightarm.push_back(center);
    Leftarm.push_back(center1); 

    if(oko[0].x > oko[1].x)
    {

    }
        else
        {

        }

    for(RightIter = Rightarm.begin(); RightIter != Rightarm.end(); ++RightIter)
    {
        circle(drawing, *RightIter, 3, Scalar(0,0,255), CV_FILLED); 
    }

    if(Rightarm.size() == 20)
        {
            Rightarm.clear();

        }

    for(LeftIter = Leftarm.begin(); LeftIter != Leftarm.end(); ++LeftIter)
    {
        circle(drawing, *LeftIter, 3, Scalar(0,255,0), CV_FILLED);
    }

        if(Rightarm.size() == 20)
        {
            Leftarm.clear();

        }

    cvLine(drawing, center.x, center.y, Scalar(255,255,255),1 ,8 ,CV_AA);

    imshow(window_Input, frame);
    imshow(window_Output, drawing); 
```

谁能看到我在哪里出错了......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:38:32.960

也许是这样的：

```
struct centerpoint {
  int x;
  int y;
} center1,center2;

(...) //Define values for centers.

cvLine( drawing, 
        cvPoint(center1.x, center1.y),
        cvPoint(center2.x, center2.y),
        Scalar(255,255,255), 1, 8 , CV_AA); 
```

不要忘记给你喜欢的所有答案投票并接受一个有效的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:24:28.830

您给线函数提供了错误的参数和一个额外的参数。您指向的文档是针对 Python 接口的，它也是使用`cv`. 假设您拥有最新版本的 OpenCV，最好使用新的 C++ 接口或`cv2`Python 接口。

你必须使用线功能，如

```
cvLine(
img,       // image to draw on
center,    // starting end point of line segment of type cv::Point
center1,   // other end of line segment
Scalar(0, 255, 0), //green colour
1         // thickness of line
CV_AA     // anti aliased line type
); 
```

文档在[这里](http://docs.opencv.org/modules/core/doc/drawing_functions.html#line)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T06:05:46.863

cvLine 在两点之间画线，你应该给它两个 cv::Point 但不是 center.x nad center.y

# javascript - 如何在点击时无缝定位隐藏的 youtube 视频

> ID：15671650
> 
> 赞同：0
> 
> 时间：2013-03-27T23:42:39.740
> 
> 标签：javascript, jquery, css, video, youtube

**两个例子：**

*   [https://chill.com/arithegreat/passive-aggressive](https://chill.com/arithegreat/passive-aggressive)
*   [https://www.simple.com](https://www.simple.com)

* * *

**它类似于模态对话框/灯箱现象。**在那里面...

*   背景变暗或模糊（但比典型的灯箱更本地化）
*   通过单击链接触发视频/模态的打开
*   您可以关闭视频，a) 停止播放，b) 隐藏视频，c) 恢复视频替换的内容

**但是，它提供了更无缝的体验。**在那里面...

*   视频定位在页面上的特定元素中（而不是与某些页面包装器或视口相关）
*   视频经常替换/隐藏内容，而不仅仅是坐在上面

不过，这里有一个问题……这两个例子都使用了专有的视频播放器。在这种情况下，这是一个交易破坏者。**我需要它来使用 youtube 的 iframe 嵌入代码**（他们的新东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:42:39.740

这是一个非常强大的解决方案。但我对 JS 很烂，所以这完全是个黑客工作。随意迭代或发散。

**它做得体面：**

*   按下链接时“就地”显示/隐藏 youtube 视频
*   一些有趣的背景模糊等作为概念证明
*   流体宽度帧，由于适合 vids，包含流体宽度视频

**它做的不好：**

*   自动调整到视频的`.videoWrapper`高度（由于适合视频），这并不理想，因为能够放大/缩小容器以适应它之前/之后的内容（而不是必须坚持视频的最大高度）
*   视频隐藏时不会停止播放
*   你注意到的任何其他东西。

**工作示例：** [http ://codepen.io/jonamar/pen/JAfqc](http://codepen.io/jonamar/pen/JAfqc)

**需要**jQuery 和[http://fitvidsjs.com](http://fitvidsjs.com)

**HTML**

```
<section class="videoWrapper">
<!-- the <h1> and <a> get replaced -->
<h1>Watch the best video ever</h1>
<a class="control play" href="#">Play</a>
<a class="control hide" href="#">Hide</a>
<iframe width="560" height="315" src="http://www.youtube.com/embed/5SjtrUYRYx4?rel=0" frameborder="0" allowfullscreen=""></iframe>
</section> 
```

**CSS**

```
* {-webkit-transition-duration: 1s;}

.videoWrapper {
  margin: 0 auto; 
  width: 40%;
  padding: 20px; 
  background: #eee;
  }

iframe, .hide {display: none;}

.showVideo {background: #444;}

.showVideo h1{
  color: transparent;
  text-shadow: 0 0 6px rgba(0,0,0,0.60);
  }

.showVideo a {color: white;} 
```

**JS**

```
$(document).ready(function () {

$('.control').click(function () {

  $('.videoWrapper iframe').toggle();
  $('.videoWrapper .play').toggle();
  $('.videoWrapper .hide').toggle();

  var showVideo = $('.videoWrapper').hasClass('showVideo');

  if (showVideo === true) {
    $('.videoWrapper').removeClass('showVideo');
  } else {
    $('.videoWrapper').addClass('showVideo');
  }

});

$(".videoWrapper").fitVids();

}); 
```

# c# - 帖子中的MVC3下拉列表为空

> ID：15671654
> 
> 赞同：0
> 
> 时间：2013-03-27T23:42:48.430
> 
> 标签：c#, asp.net-mvc-3, razor, foreign-keys, html-select

我已经为此工作了几天，但一无所获。我的电影模型在我的帖子中一直失败，这是因为我的下拉列表值对于 parentGenre 为空。我检查了萤火虫并发布了正确的值。这是我到目前为止所拥有的：

电影型号：

```
 public class Movies
{
    public Movies()
    {
        this.inventory = new HashSet<Inventory>();
        this.transactions = new HashSet<Transactions>();
    }

    [Key]
    public int movieID { get; set; }

    [Required(ErrorMessage = "Title is required")]
    [StringLength(50)]
    public String Title { get; set; }

    [Required(ErrorMessage = "Director is required")]
    [StringLength(30)]
    public String Director { get; set; }

    [Required(ErrorMessage = "An actor is required")]
    [StringLength(30)]
    public String Stars { get; set; }

    [Required(ErrorMessage = "Description is required")]
    [AllowHtml]
    [Column(TypeName = "nvarchar(MAX)")]
    public String Description { get; set; }

    [Required(ErrorMessage = "Genre is required")]
    public virtual Genres parentGenre { get; set; }

    [Required(ErrorMessage = "Duration is required")]
    public int Duration { get; set; }

    [Required(ErrorMessage = "Rating is required")]
    public String Rating { get; set; }

    [Required(ErrorMessage="Release date is required")]
    public DateTime releaseDate { get; set; }

    public ICollection<Inventory> inventory { get; set; }

    public ICollection<Transactions> transactions { get; set; }
} 
```

流派型号：

```
public class Genres
{
    public Genres()
    {
        this.movies = new HashSet<Movies>();
    }

    [Key]
    public int genreId { get; set; }

    [Required(ErrorMessage = "A genre name is required")]
    [StringLength(25)]
    public String genreName { get; set; }

    public ICollection<Movies> movies { get; set; }
} 
```

电影控制器：

```
public ActionResult addMovie(int? page)
    {

        ViewBag.Ratings = new SelectList(new[] { "G", "PG", "PG-13", "R", "NR" });

        ViewBag.parentGenre = new SelectList(movieRepository.Genres, "genreId", "genreName");
        return View();

    }

    #region "POST"
    [HttpPost]
    public ActionResult addMovie(Movies model)
    {
        if (ModelState.IsValid)
        {
            movieRepository.AddMovie(model);
            movieRepository.save(model);
            return RedirectToAction("index");
        }

        ViewBag.parentGenre = new SelectList(movieRepository.Genres, "genreId", "genreName");
        ViewBag.Ratings = new SelectList(new[] { "G", "PG", "PG-13", "R", "NR" });

        return View(model); 
```

看法：

```
@Html.DropDownList("parentGenre", String.Empty) 
```

总结一下，它会点击 if 语句来检查模型是否有效，并且由于“parentGenres”为空而失败，即使该值已发布在 firebug 中。

编辑：整个视图：@model MovieRental.Models.Movies

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true, "Movie was not entered in system. Please correct the errors and try again.")
    <div>
        <div class="input-prepend">
            <span class="add-on"><i class="icon-film"></i></span>
            @Html.TextBoxFor(m => m.Title, new { placeholder = "Title" })
            @Html.ValidationMessageFor(m => m.Title)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-facetime-video"></i></span>
            @Html.TextBoxFor(m => m.Director, new { placeholder = "Director" })
            @Html.ValidationMessageFor(m => m.Director)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-tags"></i></span>
            @Html.DropDownList("parentGenre", String.Empty)
            @Html.ValidationMessageFor(m => m.parentGenre)
        </div>  

        <div class="input-prepend">
            <span class="add-on"><i class="icon-star-empty"></i></span>
            @Html.TextBoxFor(m => m.Stars, new { placeholder = "Actor" })
            @Html.ValidationMessageFor(m => m.Stars)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-time"></i></span>
            @Html.TextBoxFor(m => m.Duration, new { @class="maskedDuration", placeholder = "Duration (mins)" })
            @Html.ValidationMessageFor(m => m.Duration)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-warning-sign"></i></span>
            @Html.DropDownListFor(m => m.Rating, (SelectList)ViewBag.Ratings)
            @Html.ValidationMessageFor(m => m.Rating)
        </div>

        <div class="input-prepend">
            <span class="add-on"><i class="icon-calendar"></i></span>
            @Html.TextBoxFor(m => m.releaseDate, new { @class="maskedDate", placeholder = "Release Date (mm/dd/yyyy)" })
            @Html.ValidationMessageFor(m => m.releaseDate)
        </div>

        <div class="control-group">
            <div class="input-prepend">
                <span class="add-on"><i class="icon-comment"></i></span>
                @Html.TextAreaFor(m => m.Description, new { placeholder = "Description", @class="input-xxlarge" })
                @Html.ValidationMessageFor(m => m.Description)
            </div>
        </div>

        <p><button class="btn btn-primary" type="submit" value="Submit">Submit</button></p>
        @Html.ValidationSummary()
    </div>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:01:20.013

尝试将其更改为下拉列表

```
@Html.DropDownListFor(m => m.parentGenre, 
                     (SelectList) ViewBag.parentGenre, String.Empty) 
```

除了，我强烈建议您也将选择列表的名称更改为 parentGenreList

```
 ViewBag.parentGenreList = new SelectList(movieRepository.Genres, 
                               "genreId", "genreName"); 
```

所以你得到的帮助电话将是

```
@Html.DropDownListFor(m => m.parentGenre, 
                     (SelectList) ViewBag.parentGenreList , String.Empty) 
```

这样做的原因是，如果 Select List 和 bound 属性共享一个在视图呈现时经常与入站绑定冲突的名称。

# shell - Makefile 将循环变量替换为函数

> ID：15671656
> 
> 赞同：0
> 
> 时间：2013-03-27T23:43:00.853
> 
> 标签：shell, makefile, gnu-make

我不确定最好的方法是什么，这方面的一些指示会有所帮助

## 代码：

```
#Else where in different file and included in this makefile i have
LIBRARY_LIST    := CONFIG_MTS_PTHREADS
CONFIG_MTS_PTHREADS :=  y

    collect-compilation:
        if  [   $(strip $(CONFIG_MTS_PTHREADS)) ==  y   ]; then \
            echo "ok";  \
        fi;
        for compile in $(LIBRARY_LIST)  ;   do  \
            if  [   $(strip $$compile)  ==  y   ]; then \
                echo "ok";  \
            fi; \
        done 
```

所以从上面的代码片段中，'IF'循环的顶部按预期工作，我看到'OK'。显示。

现在对于第二个 for 循环，我在将 $$compile 替换为“IF”时遇到了一些问题。最终我希望 $$compile 被 CONFIG_MTS_PTHREADS 取代，表达式应该评估为 y == y 并显示“OK”，但对我来说。，

## 输出：

```
make -C ./Dev2.0.1/OSX
if  [   y   ==  y   ]; then \
        echo "ok";  \
    fi;
ok    <----- fine and expected
for compile in CONFIG_MTS_PTHREADS  ;   do  \
        if  [   $compile    ==  y   ]; then \
            echo "ok";  \
        fi; \
    done      <------ Here it skips the then part and proceeds further, i expect 'OK' after this though. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:40:06.733

问题是你混合了 Make-expansion 和 shell-expansion。

我们从这个命令开始：

```
 for compile in $(LIBRARY_LIST)  ;   do  \
        if  [   $(strip $$compile)  ==  y   ]; then \
            echo "ok";  \
        fi; \
    done 
```

Make 扩展变量：

```
 for compile in CONFIG_MTS_PTHREADS  ;   do  \
        if  [   $compile  ==  y   ]; then \
            echo "ok";  \
        fi; \
    done 
```

（注意`compile`还没有值）并将命令传递给 shell，shell 扩展变量，运行`for`循环并结束测试：

```
 if  [   CONFIG_MTS_PTHREADS  ==  y   ]; then 
```

这显然必须失败。扩张为时已晚`CONFIG_MTS_PTHREADS`；shell 不知道它是一个有值的变量。Make知道，但是Make已经将命令交给了shell。

一种解决方案是使用该`value`函数，以便 Make 在将变量传递给 shell 之前对其进行扩展：

```
 for compile in $(value $(LIBRARY_LIST))  ;   do  \
        if  [   $(strip $$compile)  ==  y   ]; then \
            echo "ok";  \
        fi; \
    done 
```

# matlab - 八度到 Matlab，使用 ==> vertcat 时出错，CAT 参数尺寸不一致

> ID：15671659
> 
> 赞同：1
> 
> 时间：2013-03-27T23:43:40.250
> 
> 标签：matlab, octave

我很少遇到麻烦，因为我在工作 whit octave 它的工作原理，但是当我尝试在 Matlab 中运行时，我得到了错误：

```
The expression on this line will generate an error when executed.  The error will be:     Error    using ==> vertcat
CAT arguments dimensions are not consistent.

??? Error using ==> encuentraPares at 15
Error using ==> vertcat
CAT arguments dimensions are not
consistent. 
```

得到问题的代码是：

```
 matrizJugadas = [ 
        '1'   '2'   '3' ; 
        '4'   '5'   '6' ; 
        '7'   '8'   '9' ;
        '10'  '11'  '12'
   ]; 
```

有什么问题吗？

谢谢！！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:53:55.610

这是 6 个元素宽：

```
[ '10'  '11'  '12' ] 
```

相当于

```
'101112' 
```

并且

```
[ '1' '0' '1' '1' '1' '2' ] 
```

但这只有 3 个元素宽：

```
[  '1'   '2'   '3' ] 
```

# python - 从 Python 将数据插入 MySQL 数据库

> ID：15671660
> 
> 赞同：0
> 
> 时间：2013-03-27T23:43:48.157
> 
> 标签：python, mysql, sql

我有 2 张表 TBL1 和 TBL2。TBL1 有 3 列日期、id、nSql。TBL2 有 3 列日期、custId、userId。我在 TBL1 中有 17 行，id 为 1 到 17（稍后会增长）。每个 nSql 中都有一个 SQL 查询。例如 id=1 的 nSql 是：“select date, pId as custId, tId as userId from TBL3” 例如 nSql for id=2 是：“select date, qId as custId, rId as userId from TBL4” ... nSql结果总是相同的 3 列。

下面的查询只为 id =1 运行 nSql。因此，在 TBL2 中，我只有 nSql =1 的输出。我想要所有 nSql 的结果。我希望我的查询对所有 nSql 运行，而不仅仅是 id = 1。

```
import MySQLdb

# Open database connection

con=MySQLdb.Connection(host="localhost", user="root", passwd="root", db="test")

# create a cursor object using cursor() method

cur=con.cursor()

selectStatement=("select nSql from TBL1") # I do not want to limit the number of id to select. For example, I do not want: select nSql from TBL1 where id in (1, 2, ..17)
cur.execute(selectStatement)
res=cur.fetchone()
nSql=res[0]
cur.execute(nSql)
reslt=cur.fetchall()
for row in reslt:
    date= row[0]
    custId= row[1]
    userId=row[2]
    insertStatement=("insert into TBL2( date, custId, userId) values ('%s', %d, %d)" % (date, custId, userId))
    cur.execute(insertStatement)
    con.commit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:24:44.897

您已经获取`nSql`结果并对其进行循环。您需要遍历两者：

```
cur.execute(selectStatement)
res = cur.fetchall()
for outerrow in res:
    nSql = outerrow[0]
    cur.execute(nSql)
    # rest of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T05:56:38.403

在这里你正在做：

```
res=cur.fetchone()
nSql=res[0]
cur.execute(nSql) 
```

这意味着您只使用第一个 ID（因为您写了`fetchone()`）。在这种情况下，ID 等于 1。您可以继续调用`fetchall()`，并且通过使用循环，您可以访问所有 ID。

# sql - 合并多个主键后删除重复记录

> ID：15671661
> 
> 赞同：0
> 
> 时间：2013-03-27T23:43:49.047
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2, sql-server-2012

我有一个场景，其中可以有多个类型（type1：xxxxxx，yyyyyy 和 type 2：aaaaa，bbbbb）关联相同的 num（提供条件相同的用户名

我的意思是相同的用户名可以有多种类型，具有相同的 num 和 p_id 现在我必须为 pk 1 和 pk 2（图 1）组合值 1、2、3、4、5，因为它们具有相似的类型（类型 1 xxxxx并为两个主键键入 2：aaaa)

这些值必须与 max(pk) 相结合，即 pk =2，如图 1 所示

然后结果集应该如图 2 所示。组合值后，我必须从表名中删除 pk 1：值，应该只有 max(pk)（即 pk =2），因为我正在组合值.

有人可以帮我解决这个问题。我将衷心感谢您的帮助

```
Pk  num    P_id   year   Value value value  value value  type    type    username
                          1      2     3     4     5     1        2

1  123456  4567   2012    $2     $5     0     0 0    xxxxx   aaaaa     mr.nice
2  123456  4567   2012    $1     $5     $2    0  0    xxxxx   aaaaa     mr.nice
3  123456  4567   2012     0     $2     0     0   0    yyyyy    bbbbb     mr.nice
Fig 1: Table name: values

Pk  num    P_id   year  Value value value  value   value  type   type    username
                          1      2     3     4       5     1      2

2  123456  4567   2012    $3   $10     $2    0   0       xxxxx   aaaaa    mr.nice
3  123456  4567   2012    $0     2      0    0     0       yyyyy   bbbbb    mr.nice 
```

图 2：表名：值结果集 - 组合值后

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:48:40.127

您使用 GROUP BY 子句组合值。使用该子句时需要使用聚合函数（如 MAX、SUM 等）。这是您将用于解决问题的示例：

```
SELECT MAX(Pk),
    num,
    P_id,
    year,
    SUM(Value1),
    SUM(value2),
    SUM(value3),
    SUM(value4),
    SUM(value5),
    type1,
    type2,
    username
FROM YourTable
GROUP BY 
    num,
    P_id,
    year,
    type1,
    type2,
    username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:54:29.110

我没有使用你所有的字段，但你通过这个例子明白了这一点：

@Fig1 是一个与您想要做的大致相似的临时表，我们将在其中插入重要的值。

```
declare @fig1 table  ( PK int, val1 money, val2 money, vtype varchar(5), vtype2 varchar(5)  )
declare @uPK table ( PK int)

insert into @fig1 values
(1, 2, 5, 'xxxxx', 'aaaaa'),
(2, 1, 5, 'xxxxx', 'aaaaa'),
(3, 0, 2, 'yyyyy', 'bbbbb'); 
```

这是魔术开始的地方，我们使用一个公共表表达式来计算字段的新值应该是什么，并在动态表中命名新的值：更新

```
WITH Updates 
AS (
select 
    max(PK) as PK,
    sum(val1) as Val1,
    sum(val2) as Val2
from @fig1
group by vtype, vtype2) 
```

接下来，我们根据这个新的聚合表更新值，并使用我们的 OUTPUT 关键字告诉我们更新了哪些值，将这些值推送到临时变量 @uPK。

```
Update f
    set val1=U.Val1, val2=U.val2
OUTPUT INSERTED.PK into @uPK
from Updates U 
inner join @fig1 f on U.pk=f.pk; 
```

一旦我们知道哪些应该保留，我们只需删除那些不应该存在的。此外，通过此删除，您可能只想删除与已更新类型匹配的那些，但基本的 T-SQL 将使您走上这条路。

```
delete f
from @fig1 f
left outer join @uPK p on f.PK=p.PK
where p.PK is null

select * from @fig1 
```

# iphone - 发生崩溃时无法上传TestFlight TFLog

> ID：15671664
> 
> 赞同：1
> 
> 时间：2013-03-27T23:44:05.670
> 
> 标签：iphone, ios, crash, testflight

当 TestFlight 崩溃时，我有一个日志，我希望上传它的崩溃报告。

按照他们网站上的说明，我想出了这个解决方案，但它似乎没有将我传递给 TFLog 的日志发送。但是它报告崩溃就好了。

```
-(void)applicationDidFinishLaunching:(UIApplication *)application {

    /*Setup crash handlers for TestFlight so we can send logs. */
    NSSetUncaughtExceptionHandler(&testFlightHandleExceptions);
    // create the signal action structure
    struct sigaction newSignalAction;
    // initialize the signal action structure
    memset(&newSignalAction, 0, sizeof(newSignalAction));
    // set SignalHandler as the handler in the signal action structure
    newSignalAction.sa_handler = &testFlightSignalHandler;
    // set SignalHandler as the handlers for SIGABRT, SIGILL and SIGBUS
    sigaction(SIGABRT, &newSignalAction, NULL);
    sigaction(SIGILL, &newSignalAction, NULL);
    sigaction(SIGBUS, &newSignalAction, NULL);
    [TestFlight takeOff:TESTFLIGHT_API_KEY];
}

void testFlightHandleExceptions(NSException *exception) {
    [LogManager e: @"Sending crash to TestFlight" Tag:@"AppDelegate"];
    TFLog(@"%@",[LogManager getLog]);
} 
```

我哪里出错了？或者有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:20:02.173

我可以看到两个问题：

1.  `testFlightHandleExceptions`将在崩溃**后被**调用并记录它的日志。相反，每次记录某些内容时（在崩溃之前），您都需要在`TFLog`内部调用。`LogManager`这就是它的用途。

2.  **不能**在`objc`信号处理程序内部使用。就此而言，大多数`c`甚至是不允许的。

希望有帮助:)

杰森

# ios - MPMoviePlayerViewController 不会播放电影，立即启动和关闭

> ID：15671666
> 
> 赞同：1
> 
> 时间：2013-03-27T23:44:07.560
> 
> 标签：ios, objective-c, mpmovieplayercontroller, mpmovieplayer, mpmoviewcontroller

我正在尝试使用 MPMoviePlayerViewController 播放视频，我展示了 MPMoviePlayerViewController，但 1 秒后他自己解散了。

这是我的代码：

。H：

```
#import <MediaPlayer/MediaPlayer.h>

@property (strong, nonatomic) MPMoviePlayerViewController *moviePlayerViewController; 
```

米：

```
- (void)playmovie
{
    NSString *databaseName = @"NO.mp4";
    NSArray *documentPaths =
    NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentDir stringByAppendingPathComponent:databaseName];

    NSURL *movieURL = [NSURL fileURLWithPath:databasePath];

    UIGraphicsBeginImageContext(CGSizeMake(1,1));
    self.moviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
    [self presentMoviePlayerViewControllerAnimated:self.moviePlayerViewController];
    UIGraphicsEndImageContext();

    [self.moviePlayerViewController.moviePlayer prepareToPlay];
    [self.moviePlayerViewController.moviePlayer play];
} 
```

请告诉我我做错了什么。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:02:21.517

检查下面的答案

[https://stackoverflow.com/a/15586468/1713478](https://stackoverflow.com/a/15586468/1713478)

将网址更改为以下代码

```
NSString *path =[[NSBundle mainBundle] pathForResource:@"NO" ofType:@"mp4"]; 
NSURL *url = [NSURL fileURLWithPath:path]; 
```

试试这个你会成功的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:48:45.363

试试这个..

```
NSString *databaseName = @"NO.mp4";
    NSArray *documentPaths =
    NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentDir = [documentPaths objectAtIndex:0];
    NSString *databasePath = [documentDir stringByAppendingPathComponent:databaseName];
    NSURL *url = [NSURL fileURLWithPath:databasePath];
    MPMoviePlayerViewController *moviePlayer = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
    moviePlayer.view.frame = CGRectMake(0, 0, 500, 500);
    moviePlayer.moviePlayer.shouldAutoplay=YES;
    moviePlayer.moviePlayer.controlStyle = MPMediaTypeMusicVideo;
    [moviePlayer.moviePlayer setFullscreen:YES animated:YES];
    [self.view addSubview:moviePlayer.view];
    [moviePlayer.moviePlayer play]; 
```

# delphi - Delphi - 使用表单在应用程序内安装、启动、停止服务

> ID：15671667
> 
> 赞同：2
> 
> 时间：2013-03-27T23:44:13.780
> 
> 标签：delphi

我有 Delphi 应用程序，我向它添加了**服务**，我如何通过**主窗体**按钮安装和启动和停止它？

我可以在单独的项目服务中做到这一点，但我的目标是为服务制作接口来控制它。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-28T00:35:22.620

您必须使用 Win32 API 服务控制函数 - `CreateService()`、`OpenService()`、 `StartService()`、`ControlService()`等。服务在运行时无法显示自己的 UI，UI 需要作为单独的进程运行。但是，如果您愿意，可以将服务代码和 UI 代码托管在同一个可执行文件中，使用命令行参数来了解何时作为服务运行以及何时作为 UI 运行。但这更多是代码管理问题。您可以轻松地将两个代码库托管在单独的可执行文件中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T00:12:57.077

您不能再在同一个应用程序中为您的服务提供可视化界面。

从 Windows Vista 及更高版本开始，服务在与用户不同的桌面上运行，并且无法与用户进行视觉交互。您需要编写一个单独的应用程序，该应用程序通过命名管道、邮槽或某种其他形式的进程间通信或通过[`service control functions`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685942%28v=vs.85%29.aspx)Windows API 可用的一种方式与您的服务进行通信。

# c++ - 在函数中使用继承的类？

> ID：15671669
> 
> 赞同：0
> 
> 时间：2013-03-27T23:44:25.033
> 
> 标签：c++, function, inheritance, polymorphism

**回答：**感谢@AndyProwl 向我指出了一些问题，我发现问题出在我的 ScreenImage.Update() 函数中。我在为该函数编写实现时来回失败（因为 ScreenImage 不需要更新，它只需要绘制）并且当我删除实现时不知何故不小心将更新函数留在了我的界面上......

让这成为对您的孩子的警告。~你知道的越多~

**原始问题：**

我正在制作一个游戏，并且我有一个`Screen`对象可以跟踪给定屏幕上的项目（即图像、文本、菜单选项等）。`Screen`我的目标是以抽象对象的形式传递这些项目，而抽象`ScreenElements`对象又可以定义为更具体的对象，例如 a`ScreenImage`或`ScreenText`等。

我试图让向量（基本上将其视为 ScreenElements 的堆栈）通过使其成为指向基对象的指针向量来与不同的继承类一起玩得很好，但这意味着我必须声明继承的对象来自`ScreenElements`函数外部，因此当声明超出范围时指针不会变为无效。所以我在我的 Screen 对象中创建了一个函数，允许我“AddElement”，我认为相同的指针方法可以工作......它显然没有。

这是我的源代码，只是为了澄清问题。这是 Screen.h。

```
#ifndef SCREEN_H
#define SCREEN_H

#include <vector>

#include "ScreenElement.h"

class Screen
{
protected:
    bool enabled;

    std::vector<ScreenElement*> screen_elements;
public:
    //Gameloop Functions
    void Init();
    void Update(int ticks); //Enabled will likely determine if this is called
    void Draw(); //And this perhaps on a visible bool
    void Destroy();

    //Concept functions
    //void TransitionIn(data);
    //void TransitionOut(data);

    void AddElement(ScreenElement *Element); //function in question

    //Allow external use of enabled feature
    void ToggleEnable(bool Enabled) { enabled = Enabled; }
    bool IsEnabled() { return enabled; }
};

#endif // SCREEN_H 
```

还有我的 Screen.cpp 文件

```
#include "Screen.h"

void Screen::Init()
{
    enabled = true;
}

void Screen::Update(int ticks)
{
    for(int i = 0; i < screen_elements.size(); i++)
        screen_elements[i]->Update(ticks);
}

void Screen::Draw()
{
    for(int i = 0; i < screen_elements.size(); i++)
        screen_elements[i]->Draw();
}

void Screen::Destroy()
{
    screen_elements.clear();
}

void Screen::AddElement(ScreenElement *Element)
{
    screen_elements.push_back(Element);
} 
```

我需要我的 AddElement 来处理任何继承形式的 ScreenElement，例如 ScreenImage，并将其存储到向量中。

**编辑：**我想我也应该从我的 ScreenElement 类中提供一些源代码。当我尝试添加一个虚拟析构函数时，除了第一个似乎与继承类的构造函数有关的错误（在函数 ScreenImage::ScreenImage() 中未定义对'vtable for ScreenImage'的引用）之外，它只会导致另一个错误。所以这是我的 ScreenElement.h

```
#ifndef SCREENELEMENT_H
#define SCREENELEMENT_H

#include "Globals.h"

class ScreenElement
{
protected:
    s_Position screen_position;

    bool enabled;
public:
    virtual void Update(int ticks) {}
    virtual void Draw() {}
    virtual void Destroy() {}

    void ToggleEnable(bool Enabled) { enabled = Enabled; }
    bool IsEnabled() { return enabled; }
};

#endif // SCREENELEMENT_H 
```

这又被用来创建 ScreenImage.h

```
#ifndef SCREENIMAGE_H
#define SCREENIMAGE_H

#include "Globals.h"
#include "ScreenElement.h"
#include "SpriteSheet.h"

class ScreenImage: public ScreenElement
{
private:
    SpriteSheet *sprite_sheet;

    int sprite_sheet_frame;
public:
    void Init(SpriteSheet *Sprite_Sheet, float X, float Y, int SpriteSheetFrame = 0);
    void Update(int ticks);
    void Draw();
    void Destroy();
};

#endif // SCREENIMAGE_H 
```

并且在 ScreenImage.cpp 中有自己的基本功能实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:09:11.350

> 在初始化一个名为 SplashScreen 的 Screen 实例和一个名为 SplashScreen_Image 的 ScreenImage 之后，我使用“SplashScreen.AddElement(&ScreenImage);” 然后它向我抛出一个关于“未定义引用“用于 ScreenImage 的 vtable”的错误

从您报告的错误来看，问题似乎是您为类的某些虚函数提供了声明，而不是*定义。*

例如，尝试编译以下代码将产生非常相似的错误：

```
struct X
{
    virtual void foo() { }
};

struct Y : X
{
    virtual void foo(); // Missing definition...
};

int main()
{
    Y y;
    y.foo(); // The compiler will complain about undefined reference
             // to vtable for Y...
} 
```

这是相应的[现场示例](http://liveworkspace.org/code/3ji7qM%2423)。

# bash - shell脚本中的竖线？

> ID：15671670
> 
> 赞同：4
> 
> 时间：2013-03-27T23:44:27.940
> 
> 标签：bash, shell, telnet

我正在处理继承的 shell 脚本，并且遇到了我以前从未见过的语法。

```
host = 192.[mask]
port = 2[mask]

( echo open ${host} ${port}
    ...about six other commands
  echo exit ) | telnet 
```

现在，这对竖线来说是有意义的。只是在服务器上打开和运行命令的命令。

但是这个`telnet`电话实际上在做什么？这个语法（parens 和 bar）是什么意思？我对此的最佳猜测意味着它会打开 telnet，然后从 telnet 中运行以下命令，但我想确定一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T23:47:17.450

括号用于将其中的所有命令的输出分组到一个 Unix[管道](http://en.wikipedia.org/wiki/Pipeline_%28Unix%29) `|`中，该管道进入命令的输入`telnet`。

但是括号创建了一个子shell，你不需要任何子shell，所以你可以这样做：

```
{
    telnet_input_line_1
    telnet_input_line_2
    telnet_input_line_3
    (...)
} | telnet 
```

您甚至可以替换`telnet`为`netcat`; 它更适合用于脚本目的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-27T23:47:34.573

这`|`是一个“管道”，它有效地将“open ...”文本输入到`telnet`. where`telnet`通常会从键盘读取输入，而不是从前面的命令中读取。

括号将命令组合在一起，以便它们的所有输出都转到`telnet`.

# c# - 在 EF 中为数据库优先设计设置连接字符串

> ID：15671671
> 
> 赞同：2
> 
> 时间：2013-03-27T23:44:29.720
> 
> 标签：c#, entity-framework

我有一个从现有数据库生成的 EF 模型。

使用 EF 模型的 BL 是从没有配置文件的遗留应用程序调用的，我无法添加 EF 实体连接字符串。

试图找出一种添加连接字符串的方法。我将以下代码添加到 Entity 类的构造函数中。运行此实现时，我收到此错误：

**Message = "不支持关键字：'元数据'。"**

如果我从连接字符串中删除元数据，那么我会收到此错误：

**如果在 Code First 模式下使用，使用用于 Database First 和 Model First 开发的 T4 模板生成的代码可能无法正常工作。要继续使用 Database First 或 Model First，请确保在执行应用程序的配置文件中指定了实体框架连接字符串。要使用从 Database First 或 Model First 生成的这些类，使用 Code First 添加使用属性或 DbModelBuilder API 的任何其他配置，然后删除引发此异常的代码。**

代码：

```
 public partial class TestQEntities : DbContext
        {

        public TestQEntities(string nameOrConnectionString)
            {
                this.Database.Connection.ConnectionString = nameOrConnectionString;
            }

    }

       _context = new TestQEntities(GetConnectionString());

      private static string GetConnectionString()
            {
                var scsb = new SqlConnectionStringBuilder
                    {
                        DataSource = "(local)",
                        InitialCatalog = "DB",
                        IntegratedSecurity = true
                    };

                var builder = new EntityConnectionStringBuilder
                    {
                        Metadata = `enter code here`"res://*/ROModel.csdl|res://*/ROModel.ssdl|res://*/ROModel.msl",
                        Provider = "System.Data.SqlClient",
                        ProviderConnectionString = scsb.ConnectionString
                    };
                     return builder.ToString() + ";App=EntityFramework";
            } 
```

# iphone - 创建我的第一个 iPhone 应用程序.. 重新定位块

> ID：15671673
> 
> 赞同：2
> 
> 时间：2013-03-27T23:44:38.750
> 
> 标签：iphone, ios, objective-c

所以我有一个在 iPhone 内置加速度计的帮助下移动的块，另一个随机出现在屏幕上的块。我正在尝试使用 if 语句来确定移动块是否轻敲或触摸不动的目标块，如果这样做，它将随机重新定位到屏幕上的另一个位置。除了确定两个坐标在任何给定点是否相等之外，一切正常。到此为止。。

**编辑：** **所以我删除了 xx & yy 变量并用 self.xVar 和 self.yVar 替换它们，这似乎有点工作，但非常粗略并停止了*

**编辑2：** **所以删除 xx 和 yy 确实有帮助，但它只适用于 2-3 次点击，然后停止。

**edit3** **意识到拥有相同的 x OR y 变量不是解决此问题的正确方法..

```
-(void) accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
...

    //Make the new point
    CGPoint buttonNewCenter = CGPointMake(newX,newY);
    Button.center = buttonNewCenter;

    int xx = self.xVar;
    int yy = self.yVar;

    if (newX == xx || newY == yy) {
        int randX = arc4random() % 320;
        int randY = arc4random() % 548;

        CGPoint randNewPlace = CGPointMake(randX, randY);
        Rand.center = randNewPlace;
    }

} 
```

……

```
- (void)viewDidAppear:(BOOL)animated
{
    [self awakeaccelerometer];

    int randX = arc4random() % 320;
    int randY = arc4random() % 548;

    CGPoint randNewPlace = CGPointMake(randX, randY);
    Rand.center = randNewPlace;

    self.xVar = (randX+15);
    self.yVar = (randY+15);

} 
```

因此开放函数随机确定目标块的位置，而另一个块根据加速度计在屏幕上自由移动。我试图`if self.xVar || self.yVar == newX || newY`在任何给定时间确定。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:48:50.197

我不确定您为什么要尝试查看两个点是否在同一个位置，而不是查看两个矩形是否相交。点非常小。如果您要做的是查看一个点是否在矩形内，您可以使用`CGRectContainsPoint`. [（请参阅此处](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html "这里")苹果网站上的讨论。）如果您想查看两个矩形是否相交（我认为这是您想要做的），请使用`CGRectIntersectsRect`. （您可能需要先调用 CGRectMake。）

如果你真的想做数学，那么检查一下`(self.x+self.width<new.x or new.x+new.width<self.x or self.y+self.height<new.y or new.y+new.height<self.y)`

# sql-server - 在 n 层应用程序中在哪里设置 UTC 日期时间值：表示层、域或数据库？

> ID：15671675
> 
> 赞同：3
> 
> 时间：2013-03-27T23:44:55.283
> 
> 标签：sql-server, datetime, wcf-data-services, n-tier-architecture, datetimeoffset

这似乎应该是一个显而易见的问题，但我在找到一个好的答案时遇到了一些问题。我正在构建一个需要对 UTC 时间敏感的 n 层应用程序。可以更新值并记录时间戳。这包括数据库中的事务，其中更新或插入将影响日期时间列。

为了给出一些上下文，我对我的大多数日期时间列使用带有 DATETIMEOFFSET(2) 的 SQL 2008 R2 +。我正在考虑将时间戳的更新放入存储过程中，这样它们就不需要通过网络传递。随着系统的增长，这将节省带宽，这是一件好事......并且可用于验证共享数据上的数据是否更改（首先获胜）。不利的一面是，如果他们在应用程序实例上遇到较慢的响应时间，则第一个提交事务的人可能不是获胜者。

在这种情况下处理 UTC 时间数据的理想或推荐方法是什么？

1.  使用 SYSUTCDATETIME() 或 ... 在 SPROC 中设置它
2.  使用 DateTimeOffset.Now 或 DateTime.UtcNow 在应用程序中设置它

如果以上两个，是否建议在表示层触发它并将其通过服务传递到域层，或者只是在它到达服务后端的域时设置它？

正如你所看到的，这里有很多选择，我倾向于数据库......但在我继续构建这个东西之前，我会很感激任何建议或警告的话。

旁注：我也在跟踪地理空间信息……但这不是一个硬实时系统。用户实时是绰绰有余的。

更新：我将在应用程序中使用 DateTimeOffset。我的研究使我发现，您“可以通过首先在每个日期上调用 ToUniversalTime 来可靠地比较任何两个 DateTime。当（且仅当）其中一个具有“未指定”的 DatTimeKind 时，此策略失败。他失败的可能性是另一个青睐 DateTimeOffset 的原因” - C# 4.0 简而言之，O'Riely 书籍。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:53:51.027

我投票赞成在过程中设置它（或列的默认值，用于插入）。没有理由通过所有层传递所有这些信息，除非您需要微秒级的精度来区分，例如用户单击按钮的时间与事务在数据库中提交的时间。如果您有一个分布式应用程序，则尤其如此——您是否想依赖所有的 Web/应用程序服务器来同步，而不介意客户端/服务器应用程序的最终用户工作站？您可能在不同的数据中心拥有服务器，它们都具有不同的时区，有些遵守 DST，有些则没有，等等。`DateTime.UtcNow`应该消除大部分差异，但我仍然会无缘无故地返回传递所有这些数据。数据库知道现在是什么时间；让它为您存储值，并将所有逻辑排除在应用程序之外。

（此外，如果您要存储 UTC 时间，您真的需要`DATETIMEOFFSET`吗？如果是这样，那么您仍然需要一些方法让该过程知道该信息来自哪个时区。如果没有，那么您可能应该`SMALLDATETIME/DATETIME/DATETIME2`根据所需的准确性使用。 )

# html - 使用图像作为带有悬停图像的链接

> ID：15671677
> 
> 赞同：1
> 
> 时间：2013-03-27T23:45:06.567
> 
> 标签：html, css

我正在使用两个图像，因此当您将鼠标悬停在图像上时，它会从带有黑色文本的图像变为带有红色文本的图像，这部分工作正常，但我有两个图像实例而不是只有一个 - 两者都从黑色到红色，但这应该只在页面上显示一次。谁能建议如何解决这个问题？

```
<a href="mailto:admin@email.co.uk?Subject=contact" class="email" title="email    me">

.email {
margin-bottom: 10px;
width: 730px;
height:60px;
display:block;
background: transparent url('images/email.png');
background-position: center;
background-repeat: no-repeat;
}
.email:hover {
background-image: url('images/email_hover.png');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:47:35.293

我想您是在问如何仅使用一张图像来实现这一点。所以这是解决方案。

**这是用作背景的图像。**

![在此处输入图像描述](../Images/d3dfeb33587f751b857f33862fd0aeb2.png)

**这是html页面。**

```
<html>
<head>
<style type="text/css">
.email {    
    width: 280px;
    height:30px;
    display:block;
    background:url('bg.png') no-repeat;
    /*extra styles */
    padding:10px;
    font-size:25px;
    text-decoration:none;
    color:#fff;
    text-align:center;
}
.email:hover {
    background-position:0px -50px;
}
}
</style>
</head>
<body>
  <a href="mailto:admin@mail.co.uk?Subject=contact" class="email" title="email me">Email Me</a>
</body>
</html> 
```

# jquery - jQuery AJAX 响应类型

> ID：15671679
> 
> 赞同：7
> 
> 时间：2013-03-27T23:45:13.363
> 
> 标签：jquery, ajax

我正在尝试制作一个 jQuery 1.9.1 AJAX + icanhaz/mustache 的工作示例。这是我的模板：

```
<script id="user" type="text/html">
    {{#users}}<li>Username: {{ username }}, fullname: {{ fullname }}</li>{{/users}}
</script> 
```

这是我的 JavaScript：

```
$(document).ready( function() {
    $("#user-btn").click(function() {
        $.ajax({
            type: "GET",
            url: "../php/client/json.php",
            data: {
                type: "users"
            }
        }).done(function( response ) {
            var element = $('#dialog-message');
            element.html("<ul>");
            element.append(ich.user(response));
            element.append("</ul>");
        });
}); 
```

来自该地址的 AJAX 响应类似于：

```
{"users":[{"username":"jd","fullname":"John Doe"},{"username":"jl","fullname":"John Lennon"}]}; 
```

使用以下代码，icanhaz 无法为我呈现任何内容。我花了一些时间在 javascript 控制台上，发现它`typeof response`是`string`我所期望的`object`。Icanhaz 也期望对象 - 这就是它没有设法呈现正确响应的原因。

我做错了什么还是我只是一个不知道 jquery.ajax 总是返回字符串响应的可怜的新手？如果是这样，我应该如何处理它们？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-27T23:49:37.137

如果您从 AJAX 调用中获得`string`返回，则需要添加`dataType: "json"`. 如果可能，这将使 jQuery 将响应解析为 JSON。

```
$(document).ready( function() {
    $("#user-btn").click(function() {
        $.ajax({
            type: "GET",
            url: "../php/client/json.php",
            data: {
                type: "users"
            },
            dataType: "json"
        }).done(function( response ) {
            ...
        });
}); 
```

您确定您的`ich.user`方法需要一组用户，而不仅仅是一个用户对象吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T23:48:37.157

尝试. `dataType: "json"`_`$.ajax`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-27T23:53:15.893

修改点击功能：

```
$("#user-btn").click(function () {
    $.ajax({
        type: "GET",
        url: "../php/client/json.php",
        data: {
            type: "users"
        },
        dataType: 'json',
        success: function (data) {
            // Your code...
        },
        error: function (xhr, textStatus, errorThrown) {
            alert(textStatus);
        }
    });
}); 
```

# matlab - 在 Matlab 中创建带有坐标标记的网格图

> ID：15671682
> 
> 赞同：1
> 
> 时间：2013-03-27T23:45:25.830
> 
> 标签：matlab, grid, plot, matlab-figure

如何在 Matlab 中编写函数来生成`nxn`网格？我正在处理一个数值问题，我已经厌倦了手工绘制非常大的网格——非常乏味和不切实际，但如果没有这个，我将很难解决这个问题。本质上，我需要它来帮助我完成我的代码并帮助调试。

1.  图形需要显示一个`nxn`网格（就像方格纸一样）
2.  标记为 的点/坐标`(x,y)`，从`(1,1)`底部让角和`(n+1,n+1)`右上角开始，即`n`“框”的数量

**更新：** 3\. 如果可能，能够突出显示/着色网格的某些部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:54:14.667

我不确定我是否明白这个问题。你的意思是像下图这样吗？用于生成它的代码是

```
n = 50;
plot(0,0)
xlim([1,n+1])
ylim([1,n+1])
set(gca,'xtick',1:n+1)
set(gca,'ytick',1:n+1)
grid
axis square 
```

![在此处输入图像描述](../Images/a78be8148b181cfcc62d48bfcb786454.png)

# php - Outlook 中 PHP 生成的 vCard 的字符编码问题

> ID：15671684
> 
> 赞同：5
> 
> 时间：2013-03-27T23:45:39.520
> 
> 标签：php, character-encoding, vcf-vcard

我们在尝试在 PHP 中创建电子名片时遇到了字符编码问题。

在 Outlook 中，使用特殊字符的名称会失真，例如“é”变成“Ã©”。

我们更新了 Windows 字符编码的标题以及 FN 和 N 部分，但问题仍然存在。

感谢任何建议。

电子名片摘录：

```
BEGIN:VCARD
VERSION:3.0
REV:2013-03-27 19:37:46
FN;CHARSET=Windows-1252:Namé S. Nameé
N;CHARSET=Windows-1252:Namé;Namé;;;
TITLE:Associate
ORG:Company
EMAIL;TYPE=internet,pref:name@abc.com
TZ:-0400
END:VCARD 
```

Vcard的PHP头文件：

```
 header("Content-type: text/x-vcard; charset=windows-1252;");
    header("Content-Length: ".strlen($vc->card));
    header("Content-Disposition: attachment; filename=".$vcard_name.".vcf");
    header("Pragma: public"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-02T22:17:28.843

你的解决方案对我不起作用，我在 Windows 上仍然有有趣的字符。

对我有用的是使用 ISO-8859-1。[您可以使用utf8-decode()](http://se2.php.net/utf8_decode)在 PHP 中将 UTF8 转换为 ISO-8859-1 ，并通过`ENCODING=iso-8859-1`在 Vcard 中使用相关字段使其适用于我测试过的大多数基于 UTF-8 的客户端。

标题：

```
Content-Type: text/x-vcard; charset=iso-8859-1 
```

电子名片示例：

```
N;CHARSET=iso-8859-1:Göteborg 
```

在 Windows、OS X、IOS 和 Android 上测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T05:40:18.700

有一些类似的问题，但似乎没有明确的答案。通过在 vcard 字段中指定字符集，看起来我已经完成了一半。

我终于通过将以下内容更改为“utf-8;”来实现它：

```
 header("Content-type: text/x-vcard; charset=CHARSET=utf-8;"); 
```

vcard 本身的名称字段也是如此。指定 utf-8 似乎解决了特殊字符的显示问题：

```
$this->card .= "FN;CHARSET=utf-8:".$new_display_name.$this->data['short_mode'];
    $this->card .= "N;CHARSET=utf-8:" 
```

在 Outlook 2007 中打开，所有重音字符都按预期显示。

# c++ - 从 MSDN 实现 __cpuid 示例给出了非常大的数字

> ID：15671685
> 
> 赞同：3
> 
> 时间：2013-03-27T23:45:52.413
> 
> 标签：c++, breakpoints, msdn, cpuid

我正在快速将此代码[http://msdn.microsoft.com/en-us/library/hskdteyh(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/hskdteyh(v=vs.80).aspx)实施到我的程序中，因为我需要获取一些 CPU 信息，但是当我得到到这部分代码：

```
__cpuid(CPUInfo, 0x80000000);
    nExIds = CPUInfo[0]; 
```

下一个 for 循环开始永远滚动，所以我放置了一个断点并且命中计数不断增加，结果*nExIDs*设置为*2147483656*，这将使其余代码的执行时间即使不是几周（所以很明显一个错误）。它并没有说该功能已被弃用或其他任何东西，所以它不应该给我带来麻烦，对吧？如果它与 *__cpuid* 功能相关，我在**Windows 7 Home Premium 64上运行它-** **VAIO 笔记本**电脑上的**位**。我正在查询的 CPU 是**Intel(R) Core(TM) i5 CPU M 460 @ 2.53GHz**，有**2 个**内核（**4 个逻辑**）。也许我需要传递一个不同于*0x80000000的值*？但我如何确定多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:43:14.910

好的，我想通了，*MSDN*中的示例有一个错误 - 如果不支持该功能，则将其设置为负值，但*nExIds*是**unsigned int**，因此当您将其设置为负无效值时，它会自动设置到*2147483656*。所以我必须使用**int**而不是**unsigned int**。

# asp.net-mvc-3 - MVC 3 DropDownList重定向到Diff Action OnChange？

> ID：15671688
> 
> 赞同：2
> 
> 时间：2013-03-27T23:46:13.633
> 
> 标签：asp.net-mvc-3

我试图弄清楚如何让 @Html.DropDownList 指向它创建的选择的 onChange() 事件上的另一个操作，操作名称存储在选择列表的选项值中。到目前为止，我得到的壁橱是这样的：

看法：

```
@using (Html.BeginForm("Index", "Home", FormMethod.Get))
{
<h5>Select service to test:</h5>
@Html.DropDownList("ddl", new SelectList(Model.Services, "MvcActionName", "ServiceName"), 
new {
    onchange = @"
    var form = document.forms[0];
    var action = $('#ddl').val();                                 
    form.action=action;
    form.submit();"
}) 
```

}

它发出的是这样的：

```
<form action="/" method="get">    <h5>Select service to test:</h5>
    <select id="ddl" name="ddl" onchange="
            var form = document.forms[0];
            var action = $("#ddl").val();                                 
            form.action=action;
            form.submit();"><option value="">Ping Service</option>
    <option value="Data">Data Service</option>
    </select>
</form> 
```

但这所做的只是尝试调用“localhost/Data”并失败，因为它应该调用“localhost/Home/Data”。我正在使用标准的 MVC3 路由设置，但到目前为止，我还无法在那里进行更改，从而导致 BeginForm 助手发出更好的表单块。

再说一次，我不确定路由是否是问题所在，或者我是否走错了路才能到达我想去的地方。任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:14:28.760

**2013 年 3 月 28 日更新：**我已经用 .prop() 更新了 .attr() 这个答案中的 jquery 用法，因为我发现 .attr() 在 Chrome 中没有按预期工作。显然这是 jquery 的一个变化，并且是从这一点开始的方式。有关更多信息，请参阅此讨论：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

**更新答案：**

再次感谢 Griegs 提供的链接，这就是我最终得到的结果，以防其他人节省一些时间：

额外信息 - 我希望“动作选择”下拉菜单出现在它自己列表中的任何页面上，所以我把它放在布局中。唯一的问题是我必须在每个页面加载时在 js 中设置正确的“选定”选项，但这没什么大不了的。

这是布局视图：

```
<body>
    <h4>Action Selector:</h4>
    <select id="ServiceDropDown" name="ServiceDropDown">
        <option value="Index">Ping Service</option> 
        <option value="Data">Data Service</option>
    </select>
    <br />

    @RenderBody()
</body>
</html> 
```

索引视图：

```
<h2>Index</h2>

<script type="text/javascript">
    $(document).ready(function () {
        SetupServicesDropDown('Index');
    });
</script> 
```

我的概念证明中的另一个视图（实际上与 Index 相同，我只是想强调参数与函数调用的区别）：

```
<h2>Data</h2>

<script type="text/javascript">
    $(document).ready(function () {
        SetupServicesDropDown('Data');
    });
</script> 
```

我将使它全部工作的函数放入一个单独的文件中：

```
function SetupServicesDropDown(optionValue) {
    // Set correct option in ServiceDropDown
    $('#ServiceDropDown > option[value = ' + optionValue + ']').prop("selected", "selected");

    // Event handler for ServiceDropDown.onChange()
    // Redirects to new Action in same Controller, with Action name of the selected option value
    $('#ServiceDropDown').change(function () {
        var target = "/Home/" + $("#ServiceDropDown option:selected").prop('value');
        window.location = target;
    });
} 
```

只要您不介意必须在每个页面上调用 setup 函数，它就可以发挥作用。再次感谢。

# vb.net - vb.net 向任何活动应用程序发送密钥

> ID：15671697
> 
> 赞同：2
> 
> 时间：2013-03-27T23:48:18.113
> 
> 标签：vb.net, sendkeys

我试图制作一个 vb.net 应用程序，它可以向我激活的任何应用程序发送密钥，但对于像我这样的初学者，我开始在文本框上使用它。但我的问题是在我单击开始按钮启动发送密钥后，我的应用程序挂起。所以这是我的代码。

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If Button1.Text = "Start" Then
            Button1.Text = "Stop"
            TextBox1.Focus()
            Do While Button1.Text <> "Start"
                SendKeys.Send("{a}")
                Thread.Sleep(1000)
            Loop
        Else
            Button1.Text = "Start"
        End If
    End Sub 
```

所以这个想法是，如果我按下按钮 1，文本将变为“停止”，然后它将专注于 textbox1，然后它将循环和发送键，直到我按下停止。但我没有运气。希望有人可以帮助我并添加一些代码，即使我更改活动窗口并继续发送键或击键也能正常工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:56:49.483

它挂起的原因是因为您在一个线程中执行所有这些操作。发生点击，上面的代码在单个线程中被触发。当进入`While`循环时，它发送密钥，然后让整个线程休眠一秒钟，然后再次循环，因为循环条件仍然为真。

我建议你做的是设置一个计时器，每 1000 毫秒运行一次，然后在该计时器函数中，输入如下代码：

```
If Button1.Text <> "Start" Then
    SendKeys.Send("{a}")
End If 
```

然后将您的按钮单击代码更改为更简单：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        If Button1.Text = "Start" Then
            Button1.Text = "Stop"
            TextBox1.Focus()
        Else
            Button1.Text = "Start"
        End If
End Sub 
```

这将更改为使用两种不同的事件处理程序，一种用于按钮单击，另一种用于每次触发计时器，当适当的事情发生时，每个都会被调用。其余时间，您的程序什么都不做，这是一件好事，因为它不会浪费资源。

那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:56:53.970

这个[问题](https://stackoverflow.com/questions/9789733/simple-application-for-sending-keystroke-in-vb-net)的答案带有指向 MSDN 文章的链接以及一些示例代码。它应该做你想做的（长期）。在短期内回答你的“为什么它挂起的问题”，你正在“挂起”，因为你在一个循环中检查文本字段的值。

# sql-server - 使用 LINQ 声明 SQL Server varbinary 字段的正确方法

> ID：15671699
> 
> 赞同：2
> 
> 时间：2013-03-27T23:48:21.803
> 
> 标签：sql-server, linq, varbinary

在这里使用 LINQ 学习绳索，在经典 SQL 和 ADO 方面经验丰富。

在我继续我的项目并使任何类型更改过于昂贵之前，请让我知道使用 varbinary 列的正确方法是什么。应该如何用 LINQ 声明它们？为了不引起任何痛苦，它应该映射到什么类型。

现在我已经测试了到 byte[] 数组的映射，并且在一些初始测试中效果很好。我打算存储从流中收集的数据，并且由于可以通过`ToArray()`方法以字节数组格式获取流的内容，因此这种方法似乎是可行的。

```
private byte[] _testVarbinary;
[Column(Storage="_testVarbinary")]
public byte[] testVarbinary
{
    get
    {
        return this._testVarbinary;
    }
    set
    {
        this._testVarbinary = value;
    }
}

...

// Reading
Console.WriteLine("Field size: {0}", f.testVarbinary.Length);

// Updating
f.testVarbinary = new byte[]{128, 129, 130, 131};
db.SubmitChanges(); 
```

那么，我应该映射到其他一些更类似于 LINQ 的类型吗？或者坚持基本`byte[]`就好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:53:29.367

`byte[]`应该可以正常工作，但是[`Linq.Binary`](http://msdn.microsoft.com/en-us/library/system.data.linq.binary.aspx)如果您愿意，也可以使用该类。它代表一个不可变的字节块（`byte[]`是可变的）。

使用`f.testVarbinary[0] = 123;`不能修改记录的值，因为实体只跟踪属性，`testVarbinary`而不是数组的每个元素。您可能只需调用属性设置器即可将属性标记为已修改，如下所示：

```
f.testVarbinary = f.testVarbinary; 
```

但是，这样做的标准方法是：

```
DbEntityEntry<MyEntity> entry = context.Entry(f);
entry.Property(e => e.testVarbinary).IsModified = true; 
```

或者要将整个实体标记为已修改，请使用：

```
entry.State = EntityState.Modified; 
```

# php - 插入不插入

> ID：15671701
> 
> 赞同：0
> 
> 时间：2013-03-27T23:48:44.847
> 
> 标签：php, mysql, mysqli

下面的代码运行没有错误，尽管它没有向我的数据库中插入任何内容：

```
<?php
$con=mysqli_connect("localhost","root","","teachme");
//check connection
if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

//add details in database
if (isset($_POST['user']) and isset($_POST['pass']) and isset($_POST['division'])) {
    $user = mysql_real_escape_string($_POST['user']);
    $pass = mysql_real_escape_string($_POST['pass']);
    $division = mysql_real_escape_string($_POST['division']);
    mysqli_query($con,"INSERT INTO users (username, password, division, id)
VALUES ($user, $pass, $division)");
    echo 'Succesfully added entries onto the database.. ';
    echo $user;
    echo $pass;
    echo $division;
    echo '<a href="../">Return to homepage</a>';
}
else {
    echo "An error occured, try again!";
}
?> 
```

所有变量都正确传输，这就是我使用上面的 echo 语句的原因。我是新手，我知道这一定是一个非常愚蠢的问题。 ![数据库](../Images/0d8c10533c24243dea60ffd7adeb1d74.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T23:52:08.183

```
 mysqli_query($con,"INSERT INTO users (username, password, division, id)
VALUES ($user, $pass, $division)"); 
```

由于您当前的查询试图插入一列，您已经引用了 4 个列名，但包含了 3 个变量引用。

如果你有你的数据库

ID 的 Auto_increment，您的查询可以是：

```
 mysqli_query($con,"INSERT INTO users (username, password, division)
VALUES ($user, $pass, $division)"); 
```

如果不。您将需要创建一个每行更新的变量以填充`id`列引用。

```
mysqli_query($con,"INSERT INTO users (username, password, division, id)
VALUES ($user, $pass, $division, $ID_Placeholder)"); // This will not work without a reference. Take this as an example only 
```

* * *

只是为了测试这是问题所在，通过运行以下命令执行插入：

```
$ID_Placeholder = 4; // just a dummy test variable, to check the insert but also show you where you have went wrong. 
mysqli_query($con,"INSERT INTO users (username, password, division, id)
VALUES ($user, $pass, $division, $ID_Placeholder)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:53:00.840

```
mysqli_query($con,"INSERT INTO users (username, password, division, id)
VALUES ($user, $pass, $division)"); 
```

您的列数不匹配。您正在尝试用 3 个值填充 5 列。只需在 value 子句中设置“null”或删除不必要的“destination”列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:01:27.507

除了`INSERT`语句中的字段数与如上所述提供的值数不匹配之外，我相信您也需要引用这些值，如下所示：

```
mysqli_query($con,"INSERT INTO users (username, password, division)
VALUES ('$user', '$pass', '$division')"); 
```

`mysql_real_escape_string`将处理变量本身中单引号的转义，但不会为您引用它们。

此外，请检查以下内容：

1.  `mysqli_query`将根据 INSERT 是否成功返回 TRUE 或 FALSE；如果它返回 FALSE，请致电`mysqli_error`以了解发生了什么。
2.  考虑用准备好的语句替换此代码；有关信息和示例，请参见[此处](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T00:24:28.750

1.  [mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php#refsect1-function.mysql-real-escape-string-notes) - 不要使用它。

    > 如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。如果没有找到这样的链接，它将尝试创建一个，就好像 mysql_connect() 没有参数被调用一样。根本不要使用 mysql_*。

2.  不要使用转义。使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

3.  检查使用函数的文档（[mysqli_query](http://www.php.net/manual/en/mysqli.query.php#refsect1-mysqli.query-returnvalues)）。

4.  Mysql 错误不是 PHP 错误。如果您想查看 MySQL 错误，请使用[mysqli_error](http://www.php.net/manual/en/mysqli.error.php)。

# java - android保存重复的铃声保存

> ID：15671704
> 
> 赞同：1
> 
> 时间：2013-03-27T23:48:56.277
> 
> 标签：java, android

旨在尝试将铃声从我的应用程序传输到用户 sdcard 一切正常

但是当我尝试保存另一个铃声时，该功能将旧铃声和新铃声保存为同一个 mp3 文件

就像我第一次保存 lol.mp3 它的工作，当我保存另一个像 hora.mp3

将 mora.mp3 和 lol.mp3 保存为 hora.mp3 的同一文件如何解决此问题！

```
public boolean saveas(int ressound , String ringname , Boolean isringtone , Boolean isnotificatoion  ){

        byte[] buffer=null;
        InputStream fIn = getBaseContext().getResources().openRawResource(ressound);
        int size=0;

        try {
        size = fIn.available();
        buffer = new byte[size];
        fIn.read(buffer);
        fIn.close();
        } catch (IOException e) {
        // TODO Auto-generated catch block
        return false;
        }

        String path="/sdcard/Islamyat/";
        String filename="mysound"+".mp3";

        boolean exists = (new File(path)).exists();
        if (!exists){new File(path).mkdirs();}

        FileOutputStream save;
        try {
        save = new FileOutputStream(path+filename);
        save.write(buffer);
        save.flush();
        save.close();
        } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        return false;
        } catch (IOException e) {
        // TODO Auto-generated catch block
        return false;
        }

        sendBroadcast(new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE, Uri.parse("file://"+path+filename)));

        File k = new File(path, filename);

        ContentValues values = new ContentValues();
        values.put(MediaStore.MediaColumns.DATA, k.getAbsolutePath());
        values.put(MediaStore.MediaColumns.TITLE, ringname);
        values.put(MediaStore.MediaColumns.MIME_TYPE, "audio/mp3");
        values.put(MediaStore.Audio.Media.ARTIST, "yappname");
        values.put(MediaStore.Audio.Media.IS_RINGTONE, isringtone);
        values.put(MediaStore.Audio.Media.IS_NOTIFICATION, isnotificatoion);
        values.put(MediaStore.Audio.Media.IS_ALARM, false);
        values.put(MediaStore.Audio.Media.IS_MUSIC, false);

        //Insert it into the database
        Uri newUri= this.getContentResolver().insert(MediaStore.Audio.Media.getContentUriForPath(k.getAbsolutePath()), values);

        RingtoneManager.setActualDefaultRingtoneUri(
        this,
        RingtoneManager.TYPE_RINGTONE,
        newUri
        );
        return true;
        } 
```

# ajax - MVC 4 Ajax ActionLink 覆盖目标 div

> ID：15671705
> 
> 赞同：2
> 
> 时间：2013-03-27T23:48:57.627
> 
> 标签：ajax, asp.net-mvc, target

我在我的 MVC 视图中创建了一个 ajax.ActionLink，它用响应覆盖目标 div，而不是用响应填充它，这是没有意义的。这篇文章说它不应该覆盖父级，只有子级，[http://aspnet.codeplex.com/workitem/8767](http://aspnet.codeplex.com/workitem/8767)

链接在这里：

```
@Ajax.ActionLink(domain.Domain, "Edit_Partial", "DomainNames", new { id = domain.DomainNameId }, new AjaxOptions { HttpMethod = "get", OnSuccess = "doAsyncCallBack()", UpdateTargetId = "editDomainTarget" }) 
```

这是加载前的div：

```
<div class="modal-body" id="editDomainModalBody">
<div id="editDomainTarget">Load body…&lt;/div>
</div> 
```

这是加载后的 Div：

```
<div class="modal-body" id="editDomainModalBody">
<p>New Content</p>
</div> 
```

这在设计上很糟糕。如果我更新目标然后想再次这样做，则目标不再在 DOM 中。jQuery ajax 不能这样工作。有没有人可以解决这个问题？谢谢！

**剧情变厚了！**

我决定，因为 ajax 是在目标 div 之上加载的，所以我只需将相同的 div 包装在我的控制器返回的内容周围——因此它将在往返过程中返回到 DOM。看看会发生什么：

```
<div class="modal-body" id="editDomainModalBody">
    <div id="editDomainTarget">
        <div id="editDomainTarget">Load body…&lt;/div>
    </div>
</div> 
```

很好！有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T09:08:15.377

我解决了这个问题，但并不真正了解原因。如果您没有注意到（或者我没有正确解释），数据正在加载到一个 div 中，同时该 div 正在由 twitter 引导代码处理并显示在模式窗口中。我正在使用 twitter data- (data dash) 属性来处理这个问题。似乎在 jquery ajax 和 twitter 引导代码之间发生了奇怪的竞争条件，或者与数据 - 属性发生了一些冲突。

修复方法是将 ajax 数据加载到同一个 div 中，但从提供的 onComplete 或 onSuccess 回调启动模式窗口。

幸运的是 twitter bootstrap 提供了一个简单的 javascript 调用来启动你的模态窗口。

$('#yourModal').modal('show');

# opengl - 使用 VBO 的简单平面上的光度不正确

> ID：15671708
> 
> 赞同：1
> 
> 时间：2013-03-27T23:49:13.943
> 
> 标签：opengl, sdl, vbo

我使用 VBO 编写了一个小型 OpengL 测试程序。我在 (0.0, 5.0, 0.0) 中有一个点，相机也在 (0.0, 5.0, 0.0) 中，它看着点 (0.0, 0.0, 0.0)。我的飞机位于 (0.0, 0.0, 0.0) 位置的中心。因此，通常情况下，平面上的所有像素都应该具有相同的值。但事实并非如此。我尝试了几种代码组合，结果相同。

这是现场的图片：

![在此处输入图像描述](../Images/d53f00104abe7aad2dcd879c0a61ed4c.png)

如您所见，该点似乎位于左侧，但应将其定位为相机。这不合逻辑。

这是我的代码：

```
#include <iostream>
#include <SDL/SDL.h>
#include <gl/glew.h>

#define OFFSET_BUFFER(offset)   ((char*)NULL + (offset))

static GLfloat position[4] = {0.0f, 5.0f, 0.0f, 1.0f};
static GLfloat diffuse[3] = {0.40f, 0.40f, 0.40f};
static GLfloat specular[3] = {0.80f, 0.80f, 0.80f};
static GLfloat emissive[3] = {0.00f, 0.00f, 0.20f};

const static int WIDTH = 640;
const static int HEIGHT = 480;

struct Vertex
{
    float x, y, z;
    float nx, ny, nz;
};

static Vertex   vertex[24] =
{
    -1.000000f, 0.000000f, 1.000000f,   //V1
    1.000000f, 0.000000f, 1.000000f,    //N1
    1.000000f, 0.000000f, 1.000000f,    //V2
    1.000000f, 0.000000f, 1.000000f,    //N2
    1.000000f, 0.000000f, -1.000000f,   //V3
    1.000000f, 0.000000f, 1.000000f,    //N3
    -1.000000f, 0.000000f, -1.000000f,  //V4
    1.000000f, 0.000000f, 1.000000f     //N4
};

static void     eventListener(SDL_Event *pEvent, bool *pContinue)
{
    while (SDL_PollEvent(pEvent))
    {
        switch(pEvent->type)
        {
        case SDL_QUIT:
            *pContinue = false;
            break;
        case SDL_KEYDOWN:
            switch (pEvent->key.keysym.sym)
            {
            case SDLK_ESCAPE:
                *pContinue = false;
                break;
            }
        }
    }
}

int             main(int ac, char **av)
{
    bool        continuer = true;
    SDL_Event   event;
    GLuint      vboID = 0;

    SDL_Init(SDL_INIT_VIDEO);
    SDL_WM_SetCaption("VBO tests",NULL);
    SDL_SetVideoMode(WIDTH, HEIGHT, 32, SDL_OPENGL);

    //Initialize projection

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glViewport(0, 0, WIDTH, HEIGHT);
    gluPerspective(60.0, (float)(WIDTH/HEIGHT), 1.0f, 1000.0f);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();

    //Initialize light settings

    glEnable(GL_LIGHTING);
    glEnable(GL_LIGHT0);
    glEnable(GL_DEPTH_TEST);

    glLightfv(GL_LIGHT0, GL_POSITION, position);
    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, diffuse);
    glMaterialfv(GL_FRONT_AND_BACK, GL_SPECULAR, specular);
    glMaterialfv(GL_FRONT_AND_BACK, GL_EMISSION, emissive);
    glMateriali(GL_FRONT_AND_BACK, GL_SHININESS, 100);

    //Initialize VBO settings

    glewInit();

    int vertexSize = 4 * sizeof(Vertex);

    if (glIsBuffer(vboID) == GL_TRUE)
        glDeleteBuffers(1, &vboID);
    glGenBuffers(1, &vboID);
    glBindBuffer(GL_ARRAY_BUFFER, vboID);
    glBufferData(GL_ARRAY_BUFFER, vertexSize, vertex, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);

    //Loop

    while (continuer)
    {
        eventListener(&event, &continuer);

        glClearDepth(1.0f);
        glClearColor(0.13f, 0.12f, 0.13f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glLoadIdentity();    
        gluLookAt(0.0f, 5.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f, 0.0f);

        //Lock buffer
        glBindBuffer(GL_ARRAY_BUFFER, vboID);

        glEnableClientState(GL_VERTEX_ARRAY);
        glVertexPointer(3, GL_FLOAT, sizeof(Vertex), OFFSET_BUFFER(0));

        glEnableClientState(GL_NORMAL_ARRAY);
        glNormalPointer(GL_FLOAT, sizeof(Vertex), OFFSET_BUFFER(3 * sizeof(GLfloat)));

        glDrawArrays(GL_QUADS, 0, 24);

        glDisableClientState(GL_NORMAL_ARRAY);
        glDisableClientState(GL_VERTEX_ARRAY);

        //Unlock buffer
        glBindBuffer(GL_ARRAY_BUFFER, 0);

        glFlush();
        SDL_GL_SwapBuffers();
    }

    SDL_Quit();
    return (0);
} 
```

亮度似乎有效，但渲染不正确。Vertex 结构中的值来自一个从 Blender 导出的简单平面网格文件，所以我认为数据是正确的。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T18:50:16.443

我注意到提供的源代码存在两个问题：

*   法线未标准化。
*   法线指向一个奇怪的位置（1、0、1），它们不应该指向（0、1、0）吗？

法线用于计算与光方向的点积（以及光方程中的其他内容）。如果您的灯光位于 (0, 5, 0) 并且您的法线指向 (1, 0, 1) 这将生成阴影颜色，因为它们使这些顶点像面对位置 (sqrt(2), 0, sqrt(2 ))，但您的四边形面向 (0, 1, 0)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T18:08:16.940

检查你的几何和法线向量。你的法线向量在哪里看？你有一个非常奇怪的几何和视图设置，而且最好不要使用旧的固定功能管道。

# jquery - 使用 .on 和 .validate 的 jQuery 必须提交两次表单才能验证

> ID：15671712
> 
> 赞同：1
> 
> 时间：2013-03-27T23:49:43.480
> 
> 标签：jquery, jquery-validate, livequery

我正在通过 ajax 加载表单并使用新的 .on() 来加载 jQuery 验证插件在我第二次按下提交之前没有加载。我明白我为什么这么想。当我按下提交时，on() 函数会在表单上加载验证。有没有什么办法解决这一问题？在我使用 livequery 之前，但它不适用于 jQuery 1.9.1，或者至少不推荐。这是我的代码：

```
 $(document)
.on("submit",function(event){
$("#myform").validate();
    event.preventDefault();
  }) 
```

这段代码以前在 jQuery 1.4.2 中工作过

```
 $("#myform")
.livequery(function(){
$(this).validate():
  }) 
```

所以现在发生的事情是表单未提交，但错误仅在我第二次按提交时显示。

**更新：** 感谢 Sparky 的新见解！我习惯于在早期的 jQuery 版本中进行实时查询。但我知道 livequery 一直在监听元素并将 CPU 负载放在客户端上。您在 jsfiddle 上的代码正是我想要的！

所以我不应该在生成的表单上使用 .on() 吗？而是在回调中的表单上运行 validate()。此代码有效（当然在 document.ready 内部）：

```
$("#ask").click(function(){
     //send postdata from inputs, returns form with filled fields (defined with jQuery selectors)
    $.post("include_form.lasso",{zip:zip,custno:custno},function(data){
    // div"skjema" is filled with form with ID  
$("#skjema").html(data);
})
    .done(function() { $("#myform").validate();});
}) 
```

我在 validate() 中有很多额外的东西，这里没有显示。我没有对此进行测试，但我想它会起作用。在这里使用 .ajax() 而不是我的 .post() 代码更好吗？我所做的是 - 单击链接时，将两个字段 zip 和 custno 发送到“include_form.lasso” - 将结果填充到“skjema” DIV 中。这是一个表单 - 将 validate() 函数附加到生成的表单 - 我不需要在表单上使用 stopPropogation() 来防止默认提交？它应该首先验证吗？

**更新：** 在 Sparky 的大力帮助下，这里是可行的：只是想分享我的代码。我的动态表单需要 2 个函数，validate() 和 autocomplete()。所以我把 validate() 代码和自动完成放在 2 个函数中：

```
function pumpemod(){ 
$("#pumpemod").autocomplete({
source: "code/sql2.php?mod=1",
minLength: 3,
delay: 400}); }

function send_validate() { $("#my_dropdown").validate()...} 
```

所以在 .on() 代码中我调用了函数。当我单击一个单选按钮时，它会获取一个表单。它看起来像这样：

```
$(document)
    .on('click','input.montRadio',function(event){
    var pnr = $("#postnr").val();
    var knr = $(this).attr("rel");
   $.post("code/vis_skjema.lasso",{postnr:pnr,kundenr:knr},function(data){
        $("#skjema").html("/images/loading.gif");
        $("#skjema").html(data);
        pumpemod();
        send_validate();
    });

    }); 
```

希望这可以帮助别人。至少我现在对 on() 有了很好的理解。我想从 livequery 转到 on()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T03:18:10.740

> `on()`当我按下提交时，该函数会在表单上加载验证。...所以现在发生的是表单未提交，但错误仅在我第二次按提交时显示。

你是对的。`submit`在您第一次单击之前，该插件不会在您的表单上初始化。这是因为，使用`on()`，您只是将插件的初始化函数附加到`submit`事件。无论您如何执行此操作，, `delegate`,`bind`等，您的问题都是一样的……在第一次单击之前，您永远不会正确初始化插件。

> 所以现在发生的是表单没有提交

您`preventDefault()`正在阻止正常提交。您需要摆脱所有这些，只需`.validate()`在构建表单的 HTML 后立即调用。

> 有没有什么办法解决这一问题？

您必须在加载表单后立即初始化插件（一次）`ajax`。执行此操作的代码在哪里？尝试将您的`.validate()`函数放在加载表单的`complete`回调函数中。`ajax`这将`.validate()`在完成后运行一次`ajax`。

或者如果你使用[jQuery`.load()`](http://api.jquery.com/load/) ...

```
$('#content').load('form_loader', function() {
    ('#myform').validate(); // initialize plugin after form is loaded
}); 
```

在没有看到您的`ajax`代码的情况下，快速构建了下面的粗略演示以仅模拟此概念。单击“测试”按钮以加载带有 的表单`ajax`，然后`.validate()`在完成时进行初始化。

**[http://jsfiddle.net/dUmfK/](http://jsfiddle.net/dUmfK/)**

您可以看到表单已加载到 a`div`并准备好在第一次单击之前进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:53:44.767

我觉得你写错了。。

工作示例：http: [//jsfiddle.net/mFeww/4/](http://jsfiddle.net/mFeww/4/)

```
 $(document).ready(function(){
        $("#formID").on("submit",function(event){
            $("#myform").validate();
            event.preventDefault();
      })
}); 
```

HTML：

```
<form id="formID">

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T23:55:03.957

您需要在调用中添加一个选择器`on`来制作委托而不是常规绑定：

```
$(document).on("submit", "#myform" function(event){
  $(this).validate();
  event.preventDefault();
}); 
```

如果可能，将委托绑定到比整个文档更接近表单的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-27T23:56:05.197

根据我的评论

```
 $(document).ready(function(){
  $("#myform").on("submit",function(){
   $(this).validate();
  return false;
 });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-28T18:10:17.457

我有类似的东西。这是我解决它的方法。

我有同样的问题：我的目标：验证具有相同类的许多表单：

我的PHP：

```
form class="js-validate-itemForm" method="post" action="">
...
form class="js-validate-itemForm" method="post" action=""> 
```

我的js：

```
$('.js-validate-itemForm').each(function () {
       $(this).validate({
           submitHandler: function (form, event) { 
               doActionOnItemform(form, event);
               return false;
           }
        });
    }); 
```

# java - org.opendatafoundation.data.spss.SPSSFileException：读取数据时出错：字符串变量的意外压缩代码

> ID：15671713
> 
> 赞同：2
> 
> 时间：2013-03-27T23:49:45.917
> 
> 标签：java, servlets

我有一个读取和写入数据的 servlet。这是我的代码片段

```
 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    SPSSFile file = null;
    try {
        File f = new File(getServerDiretory() + "dabadeba_2011.01.03.sav");

        if (!f.exists()) {
            System.out.println("not found");
            return;
        }
        file = new SPSSFile(f);

        file.loadMetadata();
        file.loadData();

        if (file == null) {
            System.err.println("vai");
            return;
        }

        Document doc = file.getDDI2();

        //set up a transformer
        TransformerFactory transfac = TransformerFactory.newInstance();
        Transformer trans = transfac.newTransformer();
        trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");
        trans.setOutputProperty(OutputKeys.INDENT, "yes");
        trans.setOutputProperty(OutputKeys.CDATA_SECTION_ELEMENTS, "yes");

        StringWriter sw = new StringWriter();
        StreamResult result = new StreamResult(sw);
        DOMSource source = new DOMSource(doc);
        trans.transform(source, result);
        String xmlString = sw.toString();

        writeToFile(xmlString);

        out.println(xmlString);

    } catch (TransformerException ex) {
        Logger.getLogger(SPSSReaderServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (FileNotFoundException ex) {
        Logger.getLogger(SPSSReaderServlet.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SPSSFileException ex) {
        Logger.getLogger(SPSSReaderServlet.class.getName()).log(Level.SEVERE, null, ex);
    } finally {
        out.close();
        if (file != null) {
            file.close();
            System.out.println("done, file closed");
        }
    }
} 
```

一切似乎都在工作，直到我刷新 JSP 并再次调用这个 servlet。这是刷新页面后出现的错误：

```
SEVERE: org.opendatafoundation.data.spss.SPSSFileException: Error reading data: unexpected compression code for string variable
    at org.opendatafoundation.data.spss.SPSSDataRecord.read(SPSSDataRecord.java:161)
    at org.opendatafoundation.data.spss.SPSSDataRecord.read(SPSSDataRecord.java:54)
    at org.opendatafoundation.data.spss.SPSSFile.loadData(SPSSFile.java:1277)
    at ge.geostat.metadata.web.servlet.SPSSReaderServlet.processRequest(SPSSReaderServl‌​et.java:63)
    at ge.geostat.metadata.web.servlet.SPSSReaderServlet.doGet(SPSSReaderServlet.java:1‌​40) 
```

当我重新部署应用程序并运行它时，它工作正常。我想这是一个内存问题，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:29:25.763

因为刷新页面时会出现异常，是因为忘记关闭文件而发生的。我确信问题是这样的。因为第一次构建项目时它可以工作，之后它就不起作用了。您应该在块中调用`close`文件的方法。`finally`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:30:22.393

谢谢你们的帮助。我已经解决了问题，它可能对使用 org.opendatafoundation SPSS 阅读器类的人有所帮助

所以，问题在于方法 loadData()，它使用静态变量，必须在第二次调用时重置：SPSSDataRecord.clusterIndex = 8;

```
 /**
 * Load the data section of the file into the variables in memory. This may be expensive on memory, use with care on large datasets
 *
 * @throws SPSSFileException
 * @throws IOException
 */
public void loadData() throws IOException, SPSSFileException {
    if (dataStartPosition < 1) {
        // this has not been initialized, we don't actually know where the data starts
        throw new SPSSFileException("Error: data location pointer not initialized.");

    }
    SPSSDataRecord data = new SPSSDataRecord();

    SPSSDataRecord.clusterIndex = 8; //---This is the fix!!!
    seek(dataStartPosition);
    for (int i = 0; i < infoRecord.numberOfCases; i++) {
        // log("\nRECORD "+(i+1)+" offset "+this.getFilePointer());
        data.read(this);
    }
    isDataLoaded = true;
} 
```

# assembly - 装配中的搬迁

> ID：15671717
> 
> 赞同：6
> 
> 时间：2013-03-27T23:50:16.383
> 
> 标签：assembly, arm, bare-metal

我有一个用汇编语言编写的裸机 ARM 的启动代码，我试图了解它是如何工作的。该二进制文件被写入一些外部闪存中，并在启动时将其自身的一部分复制到 RAM 中。在这种情况下，我仍然没有完全理解重定位的概念，即使我阅读了这个[wikipedia entry](http://en.wikipedia.org/wiki/Relocation_%28computing%29)。RAM 映射到低地址窗口，闪存映射到高地址窗口。有人可以向我解释为什么我们在这里测试链接寄存器的值吗？

```
/* Test if we are running from an address, we are not linked at */
       bl check_position
 check_position:
        mov     r0, lr                  
        ldr     r1, =check_position
        cmp     r0, r1                  /* ; don't relocate during debug */
        beq     relocated_entry 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:03:00.110

我的猜测是应用程序从 ram 运行，并且在调试应用程序时，作者可能正在使用某种引导加载程序或 jtag 将测试应用程序直接加载到 ram 中，因此没有理由复制和运行（这可能导致崩溃）。

你会这样做的另一个原因是避免无限循环。例如，如果您想从闪存启动（通常必须）但从 ram 执行，那么最简单的方法是将整个闪存或整个闪存块复制到 ram，然后分支到 ram 的开头。当你这样做时，意味着你再次点击“将应用程序复制到 ram 和分支”循环，以避免第二次（这可能会让你崩溃），你有某种我是从 flash 运行这个循环还是不测试。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T00:20:41.300

> 谁能向我解释为什么我们在这里测试链接寄存器的值？

将把的`bl check_position`值`PC+4`放在链接寄存器中，并将控制权转移给`check_position`PC 相关人员。^([bl at ARM](http://infocenter.arm.com/help/topic/com.arm.doc.dui0204j/Cihfddaf.html)) 到目前为止，一切都是`PC`相对的。

从**文字池中**`ldr r1,=check_position`获取一个值。^(Ref1) 实际代码看起来像，

 **```
 ldr r1,[pc, #offset]
...
  offset:
    .long check_position   # absolute address from assemble/link. 
```

因此`R0`包含 PC 相对版本和`R1`包含绝对组装版本。在这里，它们进行了比较。您还可以使用算术计算差异，然后如果非零则*分支到它；*或者可能将代码复制到它的绝对目的地。^(Ref2) 如果代码在*链接*地址*运行*，则和是相同的。这是一些针对.*`R0``R1``pseudo code``bl`*

 *```
 mov lr,pc               ; pc is actually two instruction ahead.
 add pc,pc,#branch_offset-8 
```

关键是一切都`BL`基于. 除了提前 8 个字节之外，我们可以使用，而不是使用这个*技巧。*另一种选择是使用，这将使汇编程序为我们完成所有地址数学运算。`PC``lr`*`mov R0,PC``PC``adr R0,check_position`*

 *```
 /* Test if we are running from an address, we are not linked at */
 check_position:
    adr    r0, check_position
    ldr    r1, =check_position
    cmp    r0, r1                  /* ; don't relocate during debug */
    beq    relocated_entry 
```

ARMv6 版本可能如下所示，

```
 /* Test if we are running from an address, we are not linked at */
 check_position:
    adr    r0, check_position
    movw   r1, #:lower16:check_position
    movt   r1, #:upper16:check_position
    cmp    r0, r1                  /* ; don't relocate during debug */
    beq    relocated_entry 
```

在这两种情况下，代码都更直接，缩小了一个字并且不会覆盖`lr`寄存器，因此它可以用于其他目的。

**Ref1：**参见gnu-assembler 手册中的[Arm op-codes](http://sourceware.org/binutils/docs/as/ARM-Opcodes.html)和[.ltorg](http://sourceware.org/binutils/docs/as/ARM-Directives.htm)
**Ref2：**这正是 Linux`head.S`为 ARM 所做的。

**编辑：**我检查了 ARM ARM 并且 PC 显然是当前指令`+8`，这说明了为什么代码是这样的。我认为该`adr`版本更直接和可读，但`adr`伪操作不经常使用，因此人们可能不熟悉它。****

# ios - uitableview 中的滚动中断

> ID：15671725
> 
> 赞同：2
> 
> 时间：2013-03-27T23:50:38.680
> 
> 标签：ios, xcode, uitableview

当我从服务器获取单元格的数据时，我在查看我的 tableview 时遇到问题。如果我不使用照片，则滚动不会中断，但我也想使用图像。谁能知道我该如何解决这个问题？我正在从服务器中的 plist 中获取数据。

这是使滚动中断的图像代码（我正在使用自定义样式单元格）

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    }

    NSURL *URL = [[NSURL alloc] initWithString:[[self.content objectAtIndex:indexPath.row] valueForKey:@"imageName"]];

    NSData *URLData = [[NSData alloc] initWithContentsOfURL:URL];

    UIImage *img = [[UIImage alloc] initWithData:URLData];

    UIImageView *imgView = (UIImageView *)[cell viewWithTag:100];

    imgView.image = img;

.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:02:19.193

如果您的意思是滚动停止和开始，这可能是因为如果从服务器加载图像（这可能需要相当长的时间），在主线程上执行会导致冻结。

如果是这种情况，解决方法是在另一个线程中获取图像。幸运的是，iOS 有一个相当容易使用的多线程系统，称为 Grand Central Dispatch。

这是一些示例代码：

```
 dispatch_queue_t q = dispatch_queue_create("FetchImage", NULL);
    dispatch_async(q, ^{
        /* Fetch the image from the server... */
        dispatch_async(dispatch_get_main_queue(), ^{
            /* This is the main thread again, where we set the tableView's image to
               be what we just fetched. */
        });
    }); 
```

# objective-c - 尝试在 Objective-C 中将 Multipart/Form 数据发送到 µTorrent 的 Web API

> ID：15671727
> 
> 赞同：1
> 
> 时间：2013-03-27T23:50:46.730
> 
> 标签：objective-c, post, utorrent

我一直试图让这段代码能够将种子数据发送到 µTorrent Web API，不幸的是，据我所知，以前没有人尝试过在 Objective-C 中为 µTorrent 制作 .torrent 文件处理程序，这这并不奇怪。

我现在有这段代码，但我总是收到错误消息：“错误：表单参数中未提供 torrent 文件内容”。

```
NSMutableURLRequest * request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?token=%@&action=add-file", [self getBaseURL], token]]];
NSString * boundary = @"!@!@!@!@!@!@!@!@!";
NSMutableData * body = [NSMutableData alloc];
NSData * torrentFileContents = [[NSFileManager defaultManager] contentsAtPath:fileName];

[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"enctype"];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: %@\r\n\r\n", @"application/x-bittorrent"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"torrent_file\"; filename=\"%@\"\r\n", fileName] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Length: %ld\r\n", [torrentFileContents length]] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:torrentFileContents]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T03:14:03.007

为什么将内容类型和长度放在请求正文中？您是否尝试使用 setValue 添加必要的 HTTP 标头，例如 Content-Type？

例如：

```
[request addValue:@"text/xml;charset=utf-8" forHTTPHeaderField:@"Content-Type"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T08:32:00.450

我找到了一个我想做的例子，用 JS 编写，我可以通过调整代码让它看起来像这样。

```
NSMutableURLRequest * request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@?token=%@&action=add-file", [self getBaseURL], token]]];
NSString * boundary = [NSString stringWithFormat:@"AJAX-----------------------%f", [[[NSDate alloc] init] timeIntervalSince1970]];
NSMutableData * body = [NSMutableData alloc];
NSData * torrentFileContents = [[NSFileManager defaultManager] contentsAtPath:fileName];

[request setHTTPMethod:@"POST"];
[request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"torrent_file\"; filename=\"%@\"\r\n", fileName] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Type: %@\r\n\r\n", @"application/x-bittorrent"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:torrentFileContents]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body];

return request; 
```

# android - 编辑图片按钮图片

> ID：15671728
> 
> 赞同：1
> 
> 时间：2013-03-27T23:50:55.607
> 
> 标签：android, imagebutton

我制作了一个应用程序，一旦我在 Eclipse 中`AlertDialog`单击，就会显示一个。`ImageButton`

但是当我试图在 中输入图片时，我只能通过右键单击然后单击“编辑 src”，在 eclipse`ImageButton`的图形布局中找到一种方法。有没有办法从文字本身放入图片？`XML``Button``XML`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:00:43.797

是的。您可以将图片放入Android布局文件的书面xml中。

在 Eclipse 中打开 xml 文件后，布局底部有两个选项卡：

*   图形布局
*   .xml

按“.xml”选项卡，您可以编辑原始 xml。

为了将图像添加到您的`ImageButton`，请执行以下操作：

```
android:background="@drawable/your_image" 
```

还有其他标签也可以使用，例如`android:src`，这里描述[了不同之处：ImageView 的 src 和背景有什么区别](https://stackoverflow.com/questions/5454491/what-is-the-difference-between-src-and-background-of-imageview)。

还有一些方法可以在 .java 文件中以编程方式添加图像或更改图像。这仅在您想动态更改图像时才有用（尽管，请参阅下面的*状态*更改）

* * *

而且，这只是您可以做的事情的开始...

如果您不希望按钮周围有默认框架，则可以使用其他项目，例如 an`ImageView`来制作您的按钮。

如果要根据“按下”、“选定”等状态显示各种图形图像，则可以指定“选择器”文件而不是“your_image”。在这个站点上有很多关于如何制作“选择器”文件以及如何对您的按钮进行其他升级的示例。

玩得开心！

# c++ - 居中 Sprite 还是移动相机？C++/Opengl

> ID：15671729
> 
> 赞同：3
> 
> 时间：2013-03-27T23:51:00.017
> 
> 标签：c++, opengl, camera, tile

我正在自学 C++ 并玩 2D 瓦片映射。

**[我一直在这里](http://www.gamedev.net/page/reference/index.html/_/technical/game-programming/simple-tilemap-scrolling-r2424)**阅读这篇`scrolling`文章，它基于这个**[平铺教程](http://www.gamedev.net/page/resources/_/technical/opengl/tiling-in-opengl-r1256)**。

使用上面的教程和`Pearson, Computer Graphics with OpenGL`书中的一些帮助，我编写了一个小程序，它绘制了一个`40x40`平铺的世界和一个`Sprite`（也是一个平铺）。

就绘制/渲染顺序而言，地图（或世界）本身是后面的层，而 Sprite 是最前面（或顶部）的层。我假设这是一个很好的方法，因为 2 个图块比一个图块和一个自定义精灵或矩形更容易交互。那是对的吗？

我已经实现了一个`Keyhandling()`功能，可以让`map`你`viewport`使用`keyboards arrow keys`. 我有一个变量`offsetx, offsety`，当按下一个键时，它会增加或减少。根据我是否将变量分配给`map`or `sprite`，我可以在屏幕上的任何方向上多一个或另一个。

两者似乎都不能很好地工作，所以我将变量分配给（地图和精灵），但精灵的值为正，地图的值为负。因此，在按键时，这允许我的 Sprite 向一个方向移动，而地图向相反方向移动。

我的问题是，精灵很快移动到足以离开窗口并且不足以将更多地图带入场景。（该窗口`1/8th`在任何时候只显示大约的瓷砖）。

我整天都在想，我认为解决这个问题的一种有效/有效的方法是将 固定`sprite`到屏幕的中心，当按下一个键时`map`移动......我不确定如何实现这虽然。

这会是一个好方法吗？还是预计也会移动视口或相机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:58:43.013

当你的角色移动时，你不想移动相对于 Sprite 的所有东西。考虑一个更复杂的世界，您在地图上还有其他东西，例如其他精灵。最简单的方法是保持地图固定，并相对于地图移动每个精灵（如果它是可移动的精灵）。每当您的角色在世界上移动时，移动世界上的所有东西都没有多大意义。

如果您想以始终以角色为中心来渲染您的世界，那很好。最好的办法是移动相机。这还允许您放大/缩小相机、旋转相机等，轻松跟踪世界上的所有物体。

小心使用“视口”这个词。这在 OpenGL 中意味着非常具体的事情。（即看函数`glViewport`）。如果您的书以不同的方式使用它，那很好。我只是指出这一点，因为我不是 100% 清楚你的意思。

# c# - 窗口服务问题

> ID：15671734
> 
> 赞同：1
> 
> 时间：2013-03-27T23:51:21.513
> 
> 标签：c#, windows-services

我目前正致力于在窗口服务中托管 wcf 服务。wcf 服务提供客户端使用实体框架访问数据库。我让他们都工作了。我一直在尝试两种条件，这给了我不同的结果。

1）当我在Windows服务的Service类中以编程方式硬编码数据库路径以在app.config文件中的连接字符串内动态更改数据源时。执行以下代码后，我可以使用Web通过服务获取查询数据返回 XML 文档的浏览器。但是，2）由于某种原因不起作用。请参阅以下代码以动态保存 app.config 的数据源更改：

```
 Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

            EntityConnectionStringBuilder efb =
                new EntityConnectionStringBuilder(
                    config.ConnectionStrings.ConnectionStrings["iPhysioAndroidDBEntities1"]
                        .ConnectionString);

            SqlConnectionStringBuilder sqb =
                new SqlConnectionStringBuilder(efb.ProviderConnectionString);

              **// hard-coded the db path
            sqb.DataSource = "C:\\Users\\Siu W\\Desktop\\data\\iPhysioAndroidDB";**

            efb.ProviderConnectionString = sqb.ConnectionString;
            Console.WriteLine(sqb.ConnectionString);
            config.ConnectionStrings.ConnectionStrings["iPhysioAndroidDBEntities1"]
                .ConnectionString = efb.ConnectionString;

            config.Save(ConfigurationSaveMode.Modified, true);
            ConfigurationManager.RefreshSection("connectionStrings"); 
```

2）当我尝试使用 System.environment.Username 从机器获取当前用户名时，在上面相同的代码中使用完整的 db 文件路径，当我在调试模式下放一个断点时，它确实返回了机器的用户名。但是，我无法使用 Web 浏览器通过服务获取查询结果。出现“请求错误”。

```
 **// dynamically get the user name for the db path
            sqb.DataSource = "C:\\Users\\" + System.Environment.UserName + "\\Desktop\\data\\iPhysioAndroidDB";** 
```

问题真的很奇怪。我检查了两种方式都返回相同的数据库路径，但只有硬编码的一种有效。有谁知道这是什么原因以及如何解决这个问题？

# java - 我需要更改 JButton 显示的图像

> ID：15671746
> 
> 赞同：1
> 
> 时间：2013-03-27T23:52:19.450
> 
> 标签：java, image, swing, jbutton

我有一个扩展 JButton 的类，我想更改从该类的新实例创建的按钮将显示的背景图像。我不能说我对编程有很多了解，因为我是自学成才的，而且我已经工作太久了，所以我只知道基础知识。我相信我必须创建图像的图标然后应用它或从文件创建一个 buffredImage 并应用它，尽管我不太确定如何这样做。我查看了其他各种类似的问题，但我看到许多我不熟悉的类和方法，当我尝试实现它们时，我的 IDE 找不到它们（很可能是因为我不确定要导入哪些文件才能将它们放入我的程序中）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:00:20.900

如果您需要显示图像，请使用`ImageIcon`插入到`JLabel`.

您还需要以某种方式从磁盘读取图像。让您`JButton`对 JLabel 采取行动。

这个问题将帮助您实际检索图像：[如何更改 JLabel 的图标？](https://stackoverflow.com/questions/1567445/how-to-change-icon-of-a-jlabel). 但是，它基本上类似于

```
java.net.URL imgURL = getClass().getResource("/path/to/icon");
ImageIcon icon;
if (imgURL != null) {
    icon = new ImageIcon(imgURL, description);
} else {
    System.err.println("Couldn't find icon path");
} 
```

看看：[如何使用图标（Java 教程）](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html#getresource)

然后可以通过以下任一方式将其放入您的 JLabel 中：

```
JLabel label = new JLabel(icon) 
```

或（当它已经初始化时）

```
label.setImageIcon(icon); 
```

## 调整 ImageIcon 的大小

```
ImageIcon icon = new ImageIcon(new ImageIcon(imgURL).getImage().getScaledInstance(width, height, Image.SCALE_SMOOTH)) 
```

# c# - C# 代码的 MonoDevelop 输出（在 Mac 上）

> ID：15671752
> 
> 赞同：1
> 
> 时间：2013-03-27T23:52:51.760
> 
> 标签：c#, macos, monodevelop

我在 Mac 上使用 MonoDevelop。我写了一个程序，我确保它是正确的 MonoDevelop 具有从它构建一个 exe 文件所必需的一切。MonoDevelop 说“构建成功”。但是，没有输出出现。当我选择“运行”时，我被告知：

```
Cannot open assembly '/Users/.../Projects/.../.../bin/Debug/XY.exe': No such file or directory.
The application was terminated by a signal: SIGINT 
```

而且，确实，没有创建任何 exe 文件。你知道如何创建exe文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T20:31:45.557

如果没有 Xamarin，似乎很多事情都行不通。这是其中之一。安装 Xamarin 解决了这个问题。

# c# - .net 4.0 的“Windows 8、WPF、Silverlight 的现代 UI（Metro）图表”

> ID：15671754
> 
> 赞同：5
> 
> 时间：2013-03-27T23:52:59.413
> 
> 标签：c#, .net, wpf, xaml, charts

我正在寻找一个好的图表控件，发现“ [Modern UI (Metro) Charts for Windows 8, WPF, Silverlight](http://modernuicharts.codeplex.com/) ” 这个控件看起来非常好，但我需要它用于 Visual Studio 2010 和 4.0。原始源代码是用 Visual Studio 2012 和 4.5 编写的，所以我尝试使用类文件创建一个新项目。一切正常。我可以编译类并通过调试。但结果是一个空窗口。我不知道错误在哪里。文件没有改变，这就是我发布一些图片的原因：

*工作样本* ![工作样本](../Images/e996ce9ca843592474596dc68bc4dc69.png)

*复制 4.0 示例* ![复制 4.0 示例](../Images/a65315fc3aa6d2815bd933970773d770.png)

*工作样本 Snoop* ![工作样本 Snoop](../Images/0d211c25711f8af7933b149e4fd6a3a0.png)

*复制 4.0 示例 Snoop* ![复制 4.0 示例 Snoop](../Images/f1eb7d3085e26a957cd5284a383e1c9f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T19:32:57.927

新的地铁图表真的很棒！正如您所提到的，它们的目标是 Windows 8 和 .net 4.5，但您也可以让它们在 VS 2010 中使用 .net 4.0 的 Windows 7 上运行。如果您需要有关如何开始的快速教程，请查看[http://thusithamabotuwana.wordpress.com/2014/02/02/charting-with-wpf/ 。](http://thusithamabotuwana.wordpress.com/2014/02/02/charting-with-wpf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T15:52:19.357

I had to do two things to get it to work with VS2010\. The first was that the databinding wasn't being brought along when setting the DataContext for ChartBase. That resulted in no data to plot. To fix that I changed ChartBase.OnSeriesSourceChanged to use LoadDataTemplate that loads the content then loops through and sets all the databindings:

```
private void OnSeriesSourceChanged(IEnumerable oldValue, IEnumerable newValue)
{
    this.Series.Clear();
    if (newValue != null)
    {
        foreach (object item in newValue)
        {
            if (SeriesTemplate != null)
            {
                ChartSeries series = LoadDataTemplate<ChartSeries>(SeriesTemplate, item);
                if (series != null)
                {
                    // set data context
                    series.DataContext = item;
                    this.Series.Add(series);
                }
            }
        }
    }
    UpdateGroupedSeries();
}

private static T LoadDataTemplate<T>(DataTemplate template, object dataContext)
    where T : FrameworkElement
{
    DependencyObject element = template.LoadContent();
    T view = element as T;
    view.DataContext = dataContext;

    var enumerator = element.GetLocalValueEnumerator();
    while (enumerator.MoveNext())
    {
        var bind = enumerator.Current;

        if (bind.Value is BindingExpression)
        {
            view.SetBinding(bind.Property, ((BindingExpression)bind.Value).ParentBinding);
        }
    }

    return view;
} 
```

Second I had to change the project to including the correct Generic.xaml file. Be sure to use the one under De.TorstenMandelkow.MetroChart.WPF/Themes. It needs to include the BaseChartStyle.

HTH

# php - 无法在 Drupal 7 模块中显示嵌套菜单项

> ID：15671760
> 
> 赞同：3
> 
> 时间：2013-03-27T23:53:25.570
> 
> 标签：php, drupal, drupal-7, drupal-modules

我有一个附加到节点的选项卡；它工作得很好。

我有一个子选项卡，我想将其放在该选项卡下方。它没有出现。

这是我与问题相关的菜单定义：

```
// Parent tab, attached to nodes.
$items['node/%node/layout'] = array(
'title' => 'Parent tab',
'description' => 'tab that is attached to the node, same level as edit tab',
'page callback' => 'my_callback',
'page arguments' => array(1),
'access callback' => true, // To test.
'type' => MENU_LOCAL_TASK,
'weight' => 200,
'file' => 'mymodule.admin.inc',
);
// Child tab, beneath parent tab.
$items['node/%node/layout/fields'] = array(
'parent' => 'node/%/layout',
'title' => 'child tab',
'description' => 'child tab, underneath parent tab',
'page callback' => 'my_child_callback',
'page arguments' => array(1),
'access callback' => true, // To test.
'type' => MENU_LOCAL_TASK,
'file' => 'mymodule.admin.inc',
); 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:20:38.007

正如@Clive 在对我的问题的评论中指出的那样： MENU_LOCAL_TASK 至少需要两个项目。

# java - Java - 重置列表中元素的值

> ID：15671762
> 
> 赞同：0
> 
> 时间：2013-03-27T23:53:39.800
> 
> 标签：java

所以我在 JList 中排序了这个电影列表。这些元素的创建方式在另一个类中排序。这是列表的代码。电影列表 = 新电影列表（）；

```
 //Pre loaded film data
    filmlist.addFilm("The Matrix", "A", "18", "2", 100);
    filmlist.addFilm("Wreck It Ralph", "B", "U", "5", 150);
    filmlist.addFilm("Sin City", "C", "18", "3", 100);
    filmlist.addFilm("Starwars", "D", "PG", "3", 150);
    filmlist.addFilm("Back to the Future", "E", "PG", "2", 80);
    filmlist.addFilm("Willy Wonka & the Chocolate Factory", "F", "U", "1", 75);
    filmlist.addFilm("Avatar", "G", "PG", "2", 80);
    filmlist.addFilm("Disturba", "H", "PG", "1", 80);
    filmlist.addFilm("Monsters Inc", "I", "U", "1", 100);
    filmlist.addFilm("The Godfather", "J", "18", "1", 100 );

    theFilmList.setModel(filmlist); 
```

我有一种方法可以模拟购买其中一部电影的票。Atm 它基本上打印出值。

```
 public void buyTicket() {
    String newFilmName = filmNameTF.getText();
    String newLecture = lectureTF.getText();
    String newAge = ageTF.getText();
    String newPrice = priceTF.getText();
    int newSeats = Integer.parseInt(seatsTF.getText()); // convert the int to a String
    int newSeatsNo; // the new number of seats for the film

    newSeatsNo = newSeats - 1;

    if (JOptionPane.showConfirmDialog(this, "Are you sure you want to buy a ticket for " + newFilmName + " at the cost of £" + newPrice,
            "Purchase Ticket", JOptionPane.YES_NO_OPTION) 
            == JOptionPane.YES_OPTION) {// Are you sure dialog      

        if (newFilmName.equals("") || newLecture.equals("") || 
                newAge.equals("") || newPrice.equals("")) {
            JOptionPane.showMessageDialog(this, "Please select a film from the list");
        } else {
            System.out.println("- Receipt -");
            System.out.println("Film: " + newFilmName);
            System.out.println("Lecture Hall: " + newLecture);
            System.out.println("Age Rating: " + newAge);
            System.out.println("Price of Ticket: " + "£" + newPrice);

        } 
```

我想做的是更改列表中最后一个元素的值，即座位数。我可以通过“newSeatsNo = newSeats - 1;”来做方程式。如何在 JList 中替换该等式的值？

我希望你明白我的意思，只要说你是否需要任何类的更多代码。

```
public class FilmList extends DefaultListModel {
public FilmList(){
    super();
}

public void addFilm(String film, String  lecture, String age, String price, int seats){
    super.addElement(new FilmSystem(film, lecture, age, price, seats));
}

} 
```

电影清单类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:05:23.690

你为什么不使用 set 这是 DefaultListModel 下的方法之一

```
int lastElem = filmlist.getSize();

filmlist.set( lastElem, new FilmList().addFilm("The Godfather", "J", "18", "1", <new value here>); 
```

我还没有尝试过这段代码，因为我无法访问编译器。但是你可以在这里找到 DefaultListModel 的可用方法：[DefaultListModel](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/DefaultListModel.html)

# android - Phonegap-Manifest 中的错误

> ID：15671765
> 
> 赞同：1
> 
> 时间：2013-03-27T23:53:52.113
> 
> 标签：android, eclipse, cordova

我使用Phonegap，因为我不太了解JAVA。但是现在我有一个问题：

当我使用 Phonegap ( `Myfolder/Phonegap/lib/android/bin/create ~/Apps/Example com.example.android test`) 创建一个新的 Android 项目并尝试在 Eclipse 中启动该默认项目时，Exlipse 在 AndroidManifest.xml 中给了我四个错误这是创建的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
       Licensed to the Apache Software Foundation (ASF) under one
       or more contributor license agreements.  See the NOTICE file
       distributed with this work for additional information
       regarding copyright ownership.  The ASF licenses this file
       to you under the Apache License, Version 2.0 (the
       "License"); you may not use this file except in compliance
       with the License.  You may obtain a copy of the License at

         http://www.apache.org/licenses/LICENSE-2.0

       Unless required by applicable law or agreed to in writing,
       software distributed under the License is distributed on an
       "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
       KIND, either express or implied.  See the License for the
       specific language governing permissions and limitations
       under the License.
-->
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
      package="com.example.android" android:versionName="1.0" android:versionCode="1" android:hardwareAccelerated="true">
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
        />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application android:icon="@drawable/icon" android:label="@string/app_name"
        android:hardwareAccelerated="true"
        android:debuggable="true">
        <activity android:name="test" android:label="@string/app_name"
                android:theme="@android:style/Theme.Black.NoTitleBar"
                android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="17"/>
</manifest> 
```

这些是错误：

```
error: No resource identifier found for attribute 'hardwareAccelerated' in package 'android'

error: No resource identifier found for attribute 'xlargeScreens' in package 'android'

error: No resource identifier found for attribute 'hardwareAccelerated' in package 'android'

error: Error: String types not allowed (at 'configChanges' with value 'orientation|keyboardHidden|keyboard|screenSize|locale'). 
```

我需要安装任何扩展吗？

感谢您的每一个答案！

# php - 当 php/mysql if 语句为真时播放声音剪辑？

> ID：15671767
> 
> 赞同：5
> 
> 时间：2013-03-27T23:54:04.303
> 
> 标签：php, mysql

嗨，我有一个消息警报框，当用户收到新消息时会出现，我想要做的是在它弹出时向这个框添加声音，我正在使用 php if 语句来检查用户何时收到新消息和我已经尝试通过执行以下操作来添加声音，但它不起作用请有人告诉我如何做到这一点。谢谢。

```
<?php
$check_new_chats = check_new_chats();
while ($chat = mysql_fetch_array($check_new_chats)) 
if (isset($_SESSION['user_id'])) { 
        if ($chat['to_user_id'] == $_SESSION['user_id']){ 
        echo( "<embed name='sound_file' src='/assets/music/sound_file.mp3' loop='true' hidden='true' autostart='true'/>"); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T23:59:11.587

```
<?php
$check_new_chats = check_new_chats();
while ($chat = mysql_fetch_array($check_new_chats)) 
if (isset($_SESSION['user_id'])) { 
    if($chat['to_user_id'] == $_SESSION['user_id']){ 
        echo '<script type="text/javascript">play_sound();</script>';
    }
}
?> 
```

这是Javascript函数：

```
<script type="text/javascript">
    function play_sound() {
        var audioElement = document.createElement('audio');
        audioElement.setAttribute('src', '/assets/music/sound_file.mp3');
        audioElement.setAttribute('autoplay', 'autoplay');
        audioElement.load();
        audioElement.play();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:06:58.067

根据问题：

> 嗨，**我有**一个消息警报框，当用户收到新消息时会出现，我想要做的是在它弹出时向这个框添加声音

您已经拥有某种 javascript 函数，可在需要时显示警告框。使用[此答案](https://stackoverflow.com/questions/2769077/cross-platform-cross-browser-way-to-play-sound-using-jquery-1-4/2779515#2779515)中的信息来播放声音。

```
<audio id="soundHandle" style="display: none;"></audio>
<script>
  soundHandle = document.getElementById('soundHandle');
  soundHandle.src = '/assets/music/sound_file.mp3';
</script>

//With your message alert function....
alert("Message box");
soundHandle.play(); 
```

# android - 模拟多点触控事件（单指线性滑动）

> ID：15671768
> 
> 赞同：2
> 
> 时间：2013-03-27T23:54:09.637
> 
> 标签：android, c, linux-kernel, linux-device-driver

我正在编辑使用[Multi-Touch 协议](http://www.mjmwired.net/kernel/Documentation/input/multi-touch-protocol.txt)的驱动程序文件。我的目标是将滑动手势从 (x1,y1) 绑定到 (x2,y2) 沿着一条线。

为此，我在键压检测功能中执行此功能：

```
static void do_swipe(struct kp *kp, long xstart, long ystart, long xend, long yend,
        int id) {
    printk("SWIPE! X1 %d Y1 %d X2 %d Y2 %d ID %d \n",xstart,ystart,xend,yend,id);
    int sx, sy;
    int dx = abs(xend - xstart);
    int dy = abs(yend - ystart);
    if (xstart < xend)
        sx = 1;
    else
        sx = -1;
    if (ystart < yend)
        sy = 1;
    else
        sy = -1;
    int err = dx - dy;
    long tempx = xstart;
    long tempy = ystart;
    while (1) {
        key_report(kp, tempx, tempy, id);
        //Touch is now detected with input_sync
        input_sync(kp->input);
        if(tempx == xend && tempy == yend) break;
        int e2 = 2 * err;
        if (e2 > (-1)*dy) {
            err = err - dy;
            tempx = tempx + sx;
        } else if (e2 < dx) {
            err = err + dx;
            tempy = tempy + sy;
        }
    }
    printk("END! X %d Y %d \n",tempx, tempy);

} 
```

这个函数是一个编辑过的 Bresenham 的线算法，而不是画一条线，而是调用 key_report 来模拟给定坐标处的触摸。

```
static void key_report(struct kp *kp, long x, long y, int id) {
    if (x == 0 && y == 0) {
        //printk("---------- zero point --------------\n");
        ;
    } else {
        input_report_key(kp->input, BTN_TOUCH, 1);
        input_report_abs(kp->input, ABS_MT_TRACKING_ID, id);
        input_report_abs(kp->input, ABS_MT_TOUCH_MAJOR, 20);
        input_report_abs(kp->input, ABS_MT_WIDTH_MAJOR, 20);
        input_report_abs(kp->input, ABS_MT_POSITION_X, x);
        input_report_abs(kp->input, ABS_MT_POSITION_Y, y);
        input_mt_sync(kp->input);
    }
    release = 1;
} 
```

其中 kp-> input 是这样定义的

```
struct input_dev *input; 
```

**编辑：**我更新了代码，并且还附上了按键压力的通用代码，因为我希望驱动程序对每个按键压力只执行一次滑动，以避免滑动循环。

```
static void kp_work(struct kp *kp) {
int i, code, value;
kp_search_key(kp);
if (key_param[0] == 3) {
    if (kp->key_valid[4] == 1) {
        value = kp->key_value[4];
        kp->flagchan4 = 0;
        if (value >= 0 && value <= (9 + 40)) {
            if (key_param[99] == 1 ) {
                do_swipe(kp, key_param[25], key_param[26], key_param[97],
                        key_param[98], 12);
            } else
                key_report(kp, key_param[25], key_param[26], 12);
        } else if (value >= 392 - 40 && value <= (392 + 40)) {
            if (key_param[102] == 1) {
                do_swipe(kp, key_param[23], key_param[24], key_param[100],
                        key_param[101], 12);
            } else
                key_report(kp, key_param[23], key_param[24], 12);
        } 
        kp->flagchan4 = 0;
    } else {
        kp->flagchan4 = 1;
    }
}
input_sync(kp->input);
} 
```

也许我可以对 kp->flagchan4 进行检查... **编辑：**对 flagchan4 进行检查就可以了。

# javascript - ReferenceError：未定义注入

> ID：15671770
> 
> 赞同：22
> 
> 时间：2013-03-27T23:54:19.637
> 
> 标签：javascript, angularjs, mocking, jasmine

当我运行 SpecRunner HTML 文件时，我得到了这个错误。

环顾四周，这是由于`angular-mocks.js`没有被引用。就我而言，它正在被引用。

SpecRunner.html：

```
 <link rel="stylesheet" type="text/css" href="lib/jasmine-1.3.1/jasmine.css">
  <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine.js"></script>
  <script type="text/javascript" src="lib/jasmine-1.3.1/jasmine-html.js"></script>
  <script type="text/javascript" src="lib/angular-mocks.js"></script>

  <!-- include source files here... -->
  <script type="text/javascript" src="../main/static/js/controllers/norm-definitions-controller.js"></script> 
```

运行测试时，我收到此异常：`ReferenceError: inject is not defined`

我可以看到它`angular-mocks.js`被引用并且它不是缓存问题，因为我可以使用 Firebug 看到它。

看着`angular-mocks.js`我可以看到完整的参考`angular.mock.inject = function() { ... }`，我也试过这个作为参考，并得到异常`ReferenceError: angular is not defined`。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-28T00:20:11.133

你仍然需要`angular.js`lib。我没有在你的脚本中看到它。应该是之前`angular-mock.js`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-15T11:56:17.243

对于添加 karma 和 jasmine 来测试您的项目时出现的错误，请确保

*   你的 angular.js 和 angular-mocks js 文件都有相同的版本。
*   jasmine 版本兼容 angularjs 版本，参考 jasmine 官网确保没有语法错误。
*   请参阅 Angular js 官方网站上的测试形式以遵循单元测试方法。

上述步骤有助于避免大多数常见错误。

# ruby-on-rails - 为什么我不能保存具有序列化属性的对象？

> ID：15671773
> 
> 赞同：1
> 
> 时间：2013-03-27T23:54:29.397
> 
> 标签：ruby-on-rails, serialization, pg-search

我有...

**/app/models/search.rb**：

```
serialize :result  
def multisearch
  self.result = PgSearch.multisearch(self.term)
  self.status = "closed"
  self.save
  return result
end 
```

**/db/schema.rb**：

```
create_table "searches", :force => true do |t|
  t.string   "term"
  t.string   "status"
  t.text     "result"
end 
```

当我尝试 `self.save?

```
ArgumentError: wrong number of arguments (2 for 1)
from /Users/steven/.rvm/gems/ruby-1.9.2-p320/gems/arel-3.0.2/lib/arel/expressions.rb:3:in `count' 
```

我在测试时遇到类似的错误`result.serialize`：

```
ArgumentError: wrong number of arguments (0 for 1)
from /Users/steven/.rvm/gems/ruby-1.9.2-p320/gems/activerecord-3.2.11/lib/active_record/attribute_methods/serialization.rb:49:in `serialize' 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:42:37.047

答案是在序列化之前转换为数组：`self.result = PgSearch.multisearch(self.term).to_a`

# jquery - 在 LI 元素上使用 jQuery .on()

> ID：15671774
> 
> 赞同：2
> 
> 时间：2013-03-27T23:54:29.600
> 
> 标签：jquery, html

我在让 jQuery .on() 工作时遇到了一些困难。目前它似乎对 h1 元素很好，就像在第一个 '.on()' 中一样，但是当我使用 li 元素时它不想工作，当我将它作为类、id 甚至简单元素包含时。对于我想要做的事情，使用 ID 是不可能的，因为我有几百个元素，我希望将其绑定到每个具有不同数字 ID 的元素。

```
$(document).ready(function(){
    //a h1 element
    $('#title').on('click',function(){ //works
        console.log("clicked");
    });

    //li elements, don't work
    $('#56813XXXX').on('click',function(){ //doesn't work
        console.log("clicked");
    });
    $('li').on('click',function(){ //doesn't work
        console.log("clicked");
    });
    $('.listItem').on('click',function(){ // doesn't work
        console.log("clicked");
    });
}) 
```

HTML如下：

```
<ul id="friendsList">
    <li id="56813XXXX" class="listItem">Text</li>
    <li id="56095XXXX" class="listItem">Text</li>
    <--several hundred more elements-->
</ul> 
```

那么知道如何让它为 li 元素工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:05:13.510

你试过这个吗？它将对父级的调用限定范围`<ul>`并将点击事件绑定到`<li>`动态添加的任何元素。

```
$('#friendsList').on('click', 'li', function() { 
     console.log("clicked");
}); 
```

# java - Spring Beans 中的 EJB 3 会话上下文

> ID：15671779
> 
> 赞同：1
> 
> 时间：2013-03-27T23:54:50.047
> 
> 标签：java, spring, jakarta-ee, ejb-3.0

背景：

我正在使用使用 java 安全性的编程身份验证（基本身份验证）。我有一个无状态会话 bean（EJB 3）。我可以注入 Sessioncontext 以获取安全主体，以获取用户名。在同一个项目中，我将 spring bean 用于 JDBC 和 Aspect。我想在其中一个方面（审计）中获取用户名，这也是一个 spring bean。

问题：

是否可以在 Spring bean 中访问 ejb sesssioncontext。如果是这样怎么做？如果没有，如何从 Spring bean 访问用户名，这也是一个方面。

谢谢，阿米特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:42:05.780

这可以通过将 EJB 注入到 spring bean 中来完成。您可以通过手动 JNDI 查找来完成（就像在任何其他 EJB 客户端中一样）或使用 Spring 的 JndiObjectFactoryBean。使用 Spring 的 JndiObjectFactoryBean：

1.  注入`SessionContext`EJB

    ```
    @Resource
    private SessionContext ctxt;
    //getter and setter 
    ```

2.  在 bean 配置文件中配置工厂 bean。`postageService`成为我们感兴趣的 EJBRef（从*Apress Spring Recipes*挖来的配置）

    ```
     <bean id="postageService class="org.springframework.jndi.JndiObjectFactoryBean">
             <property name="jndiEnvironment">
                <props>
                   <prop key="java.naming.factory.initial">
                        org.apache.openejb.client.RemoteInitialContextFactory
                    </prop>
                   <prop key="java.naming.provider.url">
                         ejbd://localhost:4201
                   </prop>
               </props>
             </property>
            <property name="jndiName" value="PostageServiceBeanRemote"/>
      </bean> 
    ```

3.  将 ejb 引用连接到你的 spring bean

    ```
     public class PostalServiceClient{

           //wired EJB
           private PostageService service;
           //getter and setter

           private SessionContext retrieveSessionContext(){
               service.getCtxt(); //get the SessionContext from the EJB injection
           }

          } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T17:53:01.610

kolossus，感谢您的回复。我可以找到另一种方法。以下是上一篇文章的[链接](https://stackoverflow.com/questions/12963405/injecting-ejb-3-into-spring-bean)。所以基本上我做了完全相同的事情：1）将以下行添加到spring-context xml

```
<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
    <property name="alwaysUseJndiLookup" value="true" />
</bean> 
```

2) 在 my spring bean 中添加以下行以访问 EJB 的会话上下文

```
@Resource(mappedName = "java:global/TopoServices/MessageRestService!com.myrest.MessageRestService")
    private MessageRestService myBean; 
```

**重要的是 Jboss 7.1 不再支持自定义 jndi，这与 Jboss 5 不同，所以我使用了默认的 jndi。**

我认为这是满足我要求的更清洁的方法。

# javascript - JavaScript - 单击图像

> ID：15671790
> 
> 赞同：2
> 
> 时间：2013-03-27T23:55:27.103
> 
> 标签：javascript, image, object, click

我正在用 JavaScript 编写浏览器游戏，需要创建一个卡片类。这个类有（和其他变量）一个图像，当我创建一个对象时应该显示它。单击图像时如何显示对象的图像并调用函数？

使用此代码，我可以在任何我想要的位置显示图像，但是当我打开 .htm 文件而不是单击图像时，会立即调用 OnClick 函数。

```
<html>
<head> </head>
<body>
<script type="text/javascript">      
  function Card(photo){ // this is my object
      this.randomVariable=42;
      this.pic = new Image(); // creating an Image object inside my Card class.
        this.pic.src=photo;
        this.pic.height = 300;
        this.pic.width = 200;
        this.pic.style.position="absolute";  // this 3 lines should set the image's position, and it does.
        this.pic.style.top = 50 + "px"; 
        this.pic.style.left = 50 + "px";
        this.OnClick = document.write("lala");
  }

  var myObject = new Card("cardback.jpg");
  myObject = document.body.appendChild(coso1.pic); // is this how I should create the image? It appears where I want, but it doesn't seem a "clean" programming.
  myObject.OnClick = document.write("lala" + coso1.pic.offsetLeft + coso1.pic.offsetTop); // this is casted when I open the file, and not when I click on the image. *sadface*

</script>
</body>
</html> 
```

请帮助检测我何时单击图像并以不那么脏的方式显示图像（如果可能的话）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:16:29.310

对您的代码进行了一些更改。希望能帮助到你！

```
<html>
<head> </head>
<body>
<script type="text/javascript">    
  function Card(photo){
     var cardInstance = new Image();
     cardInstance.src = photo;
     cardInstance.addEventListener('click', function (e) {
          alert(1);
      });
     return cardInstance;
  }  

  var myObject = new Card("cardback.jpg");
  document.body.appendChild(myObject);

</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:05:08.010

[http://jsfiddle.net/CTWWk/1/](http://jsfiddle.net/CTWWk/1/)

```
var image = new Image();
image.src = 'https://www.google.co.il/images/srpr/logo4w.png';

image.onclick = function(){
      alert('I Clicked an image now !');  
};

var divy = document.getElementById('divy');
divy.appendChild(image); 
```

# paypal - 贝宝沙盒返回网站链接丢失

> ID：15671791
> 
> 赞同：1
> 
> 时间：2013-03-27T23:55:34.483
> 
> 标签：paypal, sandbox

我想我快疯了……我已经在 Paypal 沙盒中测试了几个月了。截至上周（从 2013 年 3 月 23 日左右开始），沙盒中已经发生（或未发生）非常奇怪和不同的事情。1) 得到 mysql_select_db(): 27 is not a valid MySQL-Link resource in (website location) 之前在 ipn.php 中从未发生过（代码未更改），这是 IPN 验证 php 页面。

2) 现在缺少返回网站的链接。付款验证后，曾经在沙盒的最后一页。现在，它只在最后一页显示 txn_id 并留在那里！

到底发生了什么？？？

# java - Spring RedirectAttributes 导致“提交响应后无法创建会话”错误

> ID：15671793
> 
> 赞同：0
> 
> 时间：2013-03-27T23:55:46.093
> 
> 标签：java, spring, spring-mvc

将重定向属性添加到闪存映射会导致以下异常

```
java.lang.IllegalStateException: Cannot create a session after the response has been committed
    at org.apache.catalina.connector.Request.doGetSession(Request.java:2377)
    at org.apache.catalina.connector.Request.getSession(Request.java:2097)
    at org.apache.catalina.connector.RequestFacade.getSession(RequestFacade.java:833)
    at org.springframework.web.servlet.support.DefaultFlashMapManager.retrieveFlashMaps(DefaultFlashMapManager.java:149)
    at org.springframework.web.servlet.support.DefaultFlashMapManager.requestCompleted(DefaultFlashMapManager.java:202)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:830)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882) 
```

这就是我的请求处理程序的样子

```
@RequestMapping(value = "/foo", method = RequestMethod.POST)
public String getFoo(RedirectAttributes attr) {
  attr.addFlashAttribute("twiddle", "doodle");
  return "redirect:/cow";
} 
```

有谁知道是什么原因导致这个/如何调试问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:55:46.093

经过一番调查，结果发现为发布到 /foo 的表单提供服务的 JSP 视图具有`session=false`如下页面指令属性：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"  session="false" %> 
```

Spring 重定向属性利用 HttpSession 对象，并且该属性导致 HttpSession 生成被跳过。删除该属性/将其设置为 true 后，重定向工作正常

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T04:46:39.207

为了更好地理解问题，请参阅此链接 [http://nirlevy.blogspot.com/2007/09/requestdispatcherforward-and-filters.html](http://nirlevy.blogspot.com/2007/09/requestdispatcherforward-and-filters.html) 添加更多

```
<dispatcher>REQUEST</dispatcher>
<dispatcher>FORWARD</dispatcher> 
```

在 web.xml 中。它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-21T06:53:47.517

确保在您的配置文件中，url 以正斜杠开头，即“/”，例如“/index.jsp”。

# c - C中联合背后的意义是什么？

> ID：15671796
> 
> 赞同：7
> 
> 时间：2013-03-27T23:55:59.977
> 
> 标签：c, unions

我正在阅读 O'Reilly 的《实用 C 编程》一书，并阅读了有关 C 编程语言的 K&R 书籍，但我真的很难理解联合背后的概念。

它们占用了构成它们的最大数据类型的大小......并且最近分配的一个覆盖了其余的......但是为什么不根据需要使用/释放内存呢？

书中提到它用于通信，您需要设置相同大小的标志；在一个谷歌网站上，它可以消除奇数大小的内存块......但它在现代的非嵌入式内存空间中有什么用处？

你可以用它和 CPU 寄存器做一些狡猾的事情吗？它只是早期编程时代的延续吗？还是像臭名昭著的 goto 一样，仍然有一些强大的用途（可能在狭窄的内存空间中）值得保留？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T00:01:34.913

好吧，你几乎回答了你的问题：记忆。过去内存相当低，甚至节省几 KB 也很有用。

但即使在今天，也有工会有用的场景。例如，如果您想实现某种`variant`数据类型。最好的方法是使用联合。

这听起来并不多，但让我们假设您想使用一个变量来存储一个 4 字符串（如 ID）或 4 字节数字（可能是一些散列或实际上只是一个数字）。

如果您使用 classic `struct`，这将是 8 个字节长（至少，如果您不走运，也会有填充字节）。使用`union`它只有 4 个字节。所以你节省了 50% 的内存，这对于一个实例来说并不是很多，但想象一下拥有一百万个这样的内存。

虽然您可以通过强制转换或子类化联合来实现类似的事情，但仍然是最简单的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T23:57:53.933

联合的一种用途是让两个变量占用相同的空间，结构中的第二个变量决定您要将其读取为什么数据类型。

例如，您可以有一个布尔值“isDouble”和一个联合体“doubleOrLong”，它同时具有双精度和长精度。如果 isDouble == true 将联合解释为双精度，否则将其解释为长整数。

联合的另一个用途是访问不同表示形式的数据类型。例如，如果您知道双精度在内存中的布局方式，您可以将双精度放在联合中，将其作为不同的数据类型（如 long）访问，直接访问其位、尾数、符号、指数等，并对其进行一些直接操作。

现在你真的不需要这个了，因为内存很便宜，但是在嵌入式系统中它有它的用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:02:39.000

Windows API 大量使用联合。[LARGE_INTEGER](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383713%28v=vs.85%29.aspx)就是这种用法的一个示例。基本上，如果编译器支持 64 位整数，则使用`QuadPart`成员；否则，手动设置低 DWORD 和高 DWORD。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T00:03:40.613

这并不是真正的拖延，因为 C 语言是在 1972 年创建的，当时内存是一个真正的问题。

您可以提出这样的论点，即在现代非嵌入式空间中，您可能不想一开始就使用 C 作为编程语言。如果您选择 C ​​作为实现语言的选择，那么您正在寻求利用 C 的优势：它高效、接近金属，从而产生紧凑、快速的二进制文件。

As such, when choosing to use C, you'd still want to take advantage of it's benefits, which includes memory-space efficiency. 对此，联盟运作良好；允许您具有一定程度的类型安全性，同时强制使用最小的内存占用空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T01:26:52.603

我见过它使用的一个地方是 Doom 3/idTech 4 [Fast Inverse Square Root](http://en.wikipedia.org/wiki/Fast_inverse_square_root)实现。

对于不熟悉该算法的人来说，它本质上需要将浮点数视为整数。旧的 Quake（和更早）版本的代码通过以下方式执行此操作：

```
float y = 2.0f;

// treat the bits of y as an integer
long i  = * ( long * ) &y;

// do some stuff with i

// treat the bits of i as a float
y = * ( float * ) &i; 
```

[[GitHub上的原始资源](https://github.com/id-Software/Quake-III-Arena/blob/master/code/game/q_math.c#L552)]

此代码获取浮点数的地址`y`，将其转换为指向 long 的指针（即，在 Quake 日中为 32 位整数），并将其取消引用为`i`. 然后它做了一些令人难以置信的奇怪的小玩意儿，反之亦然。

这样做有两个缺点。一个是复杂的地址，强制转换，取消引用过程强制`y`从内存中读取值，而不是从寄存器¹中读取，并且在返回的路上也是如此。然而，在 Quake 时代的计算机上，浮点寄存器和整数寄存器是完全分开的，因此您几乎必须将内存推送到内存并返回以处理此限制。

第二个是，至少在 C++ 中，进行这种强制转换是非常不受欢迎的，即使在执行诸如此函数之类的相当于巫术的事情时也是如此。我确信有更多令人信服的论点，但我不确定它们是什么:)

因此，在 Doom 3 中，id 在他们的新实现中包含了以下位（它使用了一组不同的位旋转，但类似的想法）：

```
union _flint {
        dword                   i;
        float                   f;
};

...
union _flint seed;
seed.i = /* look up some tables to get this */;
double r = seed.f; // <- access the bits of seed.i as a floating point number 
```

[[GitHub上的原始资源](https://github.com/TTimo/doom3.gpl/blob/master/neo/idlib/math/Math.h#L268)]

*理论上*，在 SSE2 机器上，这可以通过单个寄存器访问；我不确定在实践中是否有任何编译器会这样做。在我看来，它仍然比早期 Quake 版本中的铸造游戏更干净一些。

* * *

¹ - 忽略“足够高级的编译器”参数

# javascript - 如何允许用户编辑 HTML 标签内的格式化文本？

> ID：15671798
> 
> 赞同：1
> 
> 时间：2013-03-27T23:56:10.997
> 
> 标签：javascript, html

我正在构建一个应用程序，我希望用户能够查看`<p></p>`元素中的现有字符串，`mouseover`在文本上对其进行编辑，并在`mouseout`.

现在我正在用 Javascript`<p>`替换`<textarea>`. `<textarea>`我通过将其设置`innerHTML`为`<p>`元素来填充。除了文本显示为 HTML 而不是格式化文本之外，这很好用。

因此，例如，用户可能输入了以下内容：

```
"An old silent pond...
A frog jumps into the pond,
splash! Silence again." 
```

然后到了编辑文本的时候，它会显示为：

```
"An old silent pond...<br>A frog jumps into the pond,<br>splash! Silence again." 
```

有没有办法确保显示的编辑内容是解释的 HTML / 格式化文本而不是原始 HTML？我确实需要解释格式 - 我不想只是去掉 HTML 标签。

PS：我认为这`textarea`是创建一个窗口来编辑一些文本的正确方法，但我不喜欢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:12:25.317

听起来您希望能够在查看和保留格式的同时编辑文本？这不是可以简单地完成的事情`<textarea>`——你可能想看看所见即所得的编辑器，比如[TinyMCE](http://www.tinymce.com)或[CKEditor](http://ckeditor.com)

另一种可能性是 HTML5 [contenteditable](http://html5demos.com/contenteditable)属性，以及支持 HTML5 之前的浏览器的 javascript polyfill。

* * *

有关[保存](http://html5doctor.com/the-contenteditable-attribute/#storing-changes)部分中所做更改的基本建议，请参阅存储更改`contenteditable`，或在网络上搜索`save contenteditable changes`有关该主题的许多文章。

* * *

此外，[使用 HTML5 属性“contenteditable”创建 WYSIWYG 将逐步](http://marakana.com/s/post/1096/using_the_html5_attribute_contenteditable_to_create_a_wysiwyg)构建一个简单的编辑器（现在使用普通丑陋的按钮！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:01:32.520

如果可用，设置`textContent`而不是`innerHTML`.

```
textarea.textContent = p.innerHTML; 
```

如果您需要支持 IE8，请使用`innerText`if `textContent`is not there。

[http://jsfiddle.net/yUMtj/](http://jsfiddle.net/yUMtj/)

编辑：正如@RobG 所指出的，使用`.value`代替以`.textContent`获得更好的兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:15:08.677

[textarea 元素](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-textarea-element)的内容不会被解析为 HTML。有许多基于 HTML 的编辑器可用，Google 是您的朋友。

textarea 元素的内容就是它的值。HTML 规范没有为 textarea 元素定义 innerHTML、textContent 或 innerText 属性，因此您应该使用 value 属性来访问该值。

# java - Java“implibs”又名没有实际代码的罐子，只包含空体的方法定义？

> ID：15671801
> 
> 赞同：0
> 
> 时间：2013-03-27T23:56:37.743
> 
> 标签：java, jar, bytecode-manipulation

Windows 有“导入库”又名“imlibs”的概念 - 当您想将代码与动态库链接时，您不会将其链接到 .dll 本身，而是与包含调用 .dll 的 thunk 的特殊静态库链接. 好吧，这绝对是 Windows 的特质，但有时，这个想法并没有那么糟糕。

例如，假设您有一个由 100 个动态库组成的复杂系统，每个动态库平均为 2MB，然后是该系统的 10 个版本。因此，您为在所有版本中提供对此类系统的完整支持而发布的 SDK 将只有 2GB 的库来链接。使用仅包含符号和小的 thunk 的 implib，它会少得多。

implibs 的概念可以很容易地应用于普通的 Unixish 共享库 - 您只需转储符号，在 C 中从它们中创建简单的 thunk，编译，瞧，您可以链接到该库而不是原始库。

现在，我想将同样的想法扩展到 Java。所以，理想情况下，我会寻找一个可以接受 jar 的工具，然后在其中重写字节码类以删除方法体，只留下空（尽可能）体的方法定义。如果不存在这样的工具，我会寻找指向 Java 字节码转换框架的指针，这将使编写这样的工具变得容易。如果做不到这一点，我至少会寻找一种可以从 jar 中转储所有方法签名的工具，以遵循与本机共享库类似的方法（当然，这会更复杂，因为我不能只添加空 Java正文，而是需要返回有效类型的值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T21:36:55.783

根据你想要做什么，你可以很容易地破解[Krakatau](https://github.com/Storyyeller/Krakatau)来做到这一点。只需将第 93 行更改`method.py`为 set`self.code = None`而不是调用`self._loadCode()`. 然后拆卸并重新组装罐子。Krakatau 目前不支持 jar 输出，因此您必须将生成的类压缩回 jar 中，但这很容易。

这将导致类在没有任何`Code`属性的情况下被重新组装，也没有任何仅由字节码使用的常量池条目，但保留所有其他内容以进行重新排序。这将留下诸如字段和可选属性之类的东西，但如果您的目标是拥有可以编译的存根类，您可能需要这些东西。

请注意，如果编译器尝试实际加载您正在编译的类，这可能不起作用。由于它们缺少`Code`属性，因此这些类实际上是无效的（假设它们首先包含任何带有字节码的方法），因此 JVM 将拒绝加载它们。

披露：我是 Krakatau 的作者。

# jquery - 在 wordpress 中制作 jQuery 插件 - “缩略图网格扩展预览”

> ID：15671806
> 
> 赞同：0
> 
> 时间：2013-03-27T23:57:02.053
> 
> 标签：jquery, wordpress

我在[这里](http://tympanus.net/codrops/2013/03/19/thumbnail-grid-with-expanding-preview/)找到了一个很棒的 jquery 教程。但现在我正试图让它在 wordpress 中运行，但我似乎无法让 jquery 工作！

我在我的functions.php中将这样的脚本排入队列：

```
wp_register_script( 'grid-js', 
   get_stylesheet_directory_uri() . '/library/js/grid.js', 
   array( 'jquery' ), '', true );
   wp_enqueue_script( 'grid-js' ); 
```

我已经把整个 grid.js 放在这段代码中，所以我没有任何 $ 冲突：

```
(function($) { ...code here... })(jQuery); 
```

在本教程中，index.html 页面底部有一个标签，用于启动 jquery 文件。我把它放在我的索引页面的底部，如下所示：

```
 <script>
    (function($) {
    Grid.init();
    })(jQuery); </script> 
```

但我得到的只是这个错误信息。

> 未捕获的 ReferenceError：未定义网格

希望从长远来看，我将通过 ajax 调用加载扩展网格，但现在我只关注让 Jquery 在 wordpress 中工作。

如果有人有任何关于如何让 jquery 插件在 wordpress 中工作的指示或教程，那将会很棒，我相信其他人会很感激。我花了很多时间在这里和谷歌上搜索，但到目前为止，我还没有想出任何好的东西，大多数教程都是关于入队的。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:55:56.240

嗨，我已经设法实现了这一点。

我所做的是把：

```
(function($) {

$(function() {
    grids.init();
    });

})(jQuery); 
```

在它自己的 js 文件上调用它 loadgrid.js 并注册脚本以加载到我的 functions.php

```
wp_register_script( 'loadgrid', get_stylesheet_directory_uri() . '/library/js/loadgrid.js', array( 'grid-js' ), false , true ); 
```

出于某种原因，我无法将它内联，但是这样做是因为它加载在注册页面的底部。

希望这可以帮助

# java - 为什么这个客户端/服务器程序不停止？

> ID：15671808
> 
> 赞同：0
> 
> 时间：2013-03-27T23:57:13.167
> 
> 标签：java, swing, sockets

在学习 Java 套接字时，我在两个框架中进行了功能但非常简单的聊天：一个客户端和一个服务器。该应用程序仅在本地运行且有效。但是当我关闭窗口时它并没有停止（尽管我在两个框架类中都添加了 WindowListener）：怎么了？

不要忘记先运行服务器，然后运行客户端：只有在客户端连接后，这两个框架才会可见。

这是 SimpleSocketFrame.java（两个框架的基类）：

```
package com.loloof64.java_se.simple_socket;

import java.awt.GridLayout;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public abstract class SimpleSocketFrame extends JFrame {

    public SimpleSocketFrame() {
        setTitle(getFrameTitle());
        setLayout(new GridLayout(0, 1));

         messageToAddField = new JTextField(30);
     messageToAddField.addKeyListener(new KeyAdapter() {

            @Override
            public void keyReleased(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_ENTER){
                    if ( ! messageToAddField.getText().isEmpty()) {
                        addMessage(messageToAddField.getText());
                        messageToAddField.setText("");
                    }
                }
            }

    });

        printedMessagesArea = new JTextArea(10,30);
        printedMessagesArea.setEditable(false);

        add(messageToAddField);
        add(printedMessagesArea);

    pack();
}

protected abstract void addMessage(String s);
protected abstract String getFrameTitle();

private static final long serialVersionUID = -5861605385948623162L;
protected JTextArea printedMessagesArea;
private JTextField messageToAddField;

} 
```

这是服务器应用程序类：SimpleSocketServer.java

```
package com.loloof64.java_se.simple_socket;

import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.ServerSocket;
import java.net.Socket;

import javax.swing.JOptionPane;

public class SimpleSocketServer extends SimpleSocketFrame {

    public SimpleSocketServer(){
        super();
        setTitle("Simple Server");
        try {
            serverSocket = new ServerSocket(12345);
            relatedSocket = serverSocket.accept();

            outStream = new PrintStream(relatedSocket.getOutputStream());
            isr = new InputStreamReader(relatedSocket.getInputStream());
            inStream = new BufferedReader(isr);

            final InStreamRunnable inStreamRunnable = new InStreamRunnable();
            Thread inStreamReaderThread = new Thread(inStreamRunnable);

            addWindowListener(new WindowAdapter() {

                @Override
                public void windowClosing(WindowEvent evt) {
                    try {
                        inStream.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    try {
                    isr.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                    outStream.close();
                try {
                    relatedSocket.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                try {
                    serverSocket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                    inStreamRunnable.stop();
                    System.exit(0);
                }

            });

            inStreamReaderThread.start();
        } catch (IOException e) {
            JOptionPane.showMessageDialog(this, "Could not create the server !!!",
                    "Fatal error", JOptionPane.ERROR_MESSAGE);
            System.exit(1);
            e.printStackTrace();
        }
    }

    private class InStreamRunnable implements Runnable {

        @Override
        public void run() {
            while (weMustGoOn){
                String line;
                try {
                    line = inStream.readLine();
                                   printedMessagesArea.setText(printedMessagesArea.getText()+line+"\n");
                } catch (IOException e) {

                }
            }
    }

        public void stop(){
            weMustGoOn = false;
        }

        private boolean weMustGoOn = true;

    }

    @Override
    protected void addMessage(String s) {
        s = "Serveur> "+s;
        outStream.println(s);
        printedMessagesArea.setText(printedMessagesArea.getText()+"Client> "+s+"\n");
    }

    @Override
    protected String getFrameTitle() {
        return "Simple Server";
    }

    public static void main(String[] args) {
        new SimpleSocketServer().setVisible(true);
    }

    private static final long serialVersionUID = 4288994465786972478L;
    private Socket relatedSocket;
    private ServerSocket serverSocket;
    private PrintStream outStream;
    private InputStreamReader isr;
    private BufferedReader inStream;
 } 
```

这是客户端类：SimpleSocketClient.java

```
package com.loloof64.java_se.simple_socket;

import java.awt.event.WindowAdapter; 
import java.awt.event.WindowEvent;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintStream;
import java.net.InetAddress;
import java.net.Socket;

import javax.swing.JOptionPane;

public class SimpleSocketClient extends SimpleSocketFrame {

    public SimpleSocketClient(){
        try {
            socket = new Socket(InetAddress.getLocalHost(), 12345);
            outStream = new PrintStream(socket.getOutputStream());

        isr = new InputStreamReader(socket.getInputStream());
            inStream = new BufferedReader(isr); 

            final InStreamRunnable inStreamRunnable = new InStreamRunnable();
        Thread inStreamReaderThread = new Thread(inStreamRunnable);

            addWindowListener(new WindowAdapter() {

                @Override
                public void windowClosing(WindowEvent evt) {
                try {
                        inStream.close();
                } catch (IOException e2) {
                    e2.printStackTrace();
                }
                try {
                    isr.close();
                } catch (IOException e1) {
                        e1.printStackTrace();
                    }
                outStream.close();
                try {
                    socket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                inStreamRunnable.stop();
                System.exit(0);
            }

        });
            inStreamReaderThread.start();
    } catch (IOException e) {
            JOptionPane.showMessageDialog(this, "Could not create the client !!!",
                    "Fatal error", JOptionPane.ERROR_MESSAGE);
            System.exit(1);
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        new SimpleSocketClient().setVisible(true);
    }

private class InStreamRunnable implements Runnable {

    @Override
    public void run() {
            while (weMustGoOn){
            String line;
            try {
                line = inStream.readLine();
                      printedMessagesArea.setText(printedMessagesArea.getText()+line+"\n");
                } catch (IOException e) {

                }
            }
        }

    public void stop(){
        weMustGoOn = false;
    }

    private boolean weMustGoOn = true;

    } 

@Override
protected void addMessage(String s) {
    s = "Client> "+s;
    outStream.println(s);
    printedMessagesArea.setText(printedMessagesArea.getText()+s+"\n");
}

@Override
    protected String getFrameTitle() {
    return "Simple Client";
}

    private static final long serialVersionUID = 5468568598525947366L;
    private Socket socket;
    private PrintStream outStream;
    private InputStreamReader isr;
    private BufferedReader inStream;

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:04:58.780

您应该在关闭套接字之后添加`finally`块，`try`然后您可以通过系统退出方法关闭程序。`catch`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T00:17:25.240

`Readers`当您在关闭 a 时尝试关闭网络输入时，该程序不会停止`JFrame`，这会无限期地阻塞。`BufferedReader`并且`InputStreamReader`对象无法关闭，因为客户端线程在此`readLine`调用中被阻塞，该调用正在等待来自服务器的响应

```
line = inStream.readLine(); 
```

注释掉或删除：

```
inStream.close(); 
```

和

```
isr.close(); 
```

只需关闭`Socket`流就足够了。

*另外：*当与多线程网络应用程序的 Swing 组件交互时，始终使用[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)。`SwingWorkers`旨在与 Swing 组件正确交互。

# javascript - jQuery 如何在 TD 类中定位字符串

> ID：15671809
> 
> 赞同：-1
> 
> 时间：2013-03-27T23:57:34.120
> 
> 标签：javascript, jquery

我正在尝试从正在从放置到购物车**表 td**的数据库中动态生成的字符串中减去两个字符。因此，我希望产品显示为 28 美元，而不是将产品显示为 28.00 美元。由于这些值来自数据库，我不能像在很多教程中看到的那样简单地在变量中定义字符串。

这是我的 JS Fiddle [http://jsfiddle.net/EbckS/6/](http://jsfiddle.net/EbckS/6/)

这是我的错误代码

```
 $(document).ready(function(){

       $("table td.SCNProductPrice").text(function(i, text) {
       return text.slice(0, -2);
       });

    }); 
```

这是我在此处发布的另一个问题的后续行动： [jQuery Removing last two characters in a class](https://stackoverflow.com/questions/15671472/jquery-removing-last-two-characters-in-a-class)

我把它放到一个不同的问题中，因为我没有意识到在表 td 中定位一个类需要不同的语法。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:04:14.833

假设您的 html 是有效的，即它有表格并且 td 您的切片有错误的索引。如果出现，第一个将处理任意数量的小数点。

尝试

```
$("table td.SCNProductPrice").text(function(i, text) {
    return '$' + parseInt(text.replace('$',''));
}); 
```

或者

```
 $("table td.SCNProductPrice").text(function(i, text) {
       return text.slice(0, -3);
       }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:01:52.153

您应该在 a 内添加`td`which`tr`在 a 内`table`。

```
<table>
    <tr>
        <td class="SCNProductPrice" valign="top">$28.00</td>
    </tr>
</table> 
```

[**演示**](http://jsfiddle.net/EbckS/12/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:06:27.080

标记：

```
<table>
    <tr>
        <td class="SCNProductPrice" valign="top">$28.00</td>
    </tr>
</table> 
```

JS：

```
$(document).ready(function(){
    $("td.SCNProductPrice").text(function(i,text) {
         return text.split('.')[0];
    });
}); 
```

不要忘记，您需要在小提琴期间使用有效的标记。最后，我不确定你为什么要“28 美元”。不应该只是“$ 28”吗？上面的 JS 是后者。

# c++ - C ++中的遍历队列

> ID：15671814
> 
> 赞同：2
> 
> 时间：2013-03-27T23:58:02.543
> 
> 标签：c++, queue, traversal

我有一个需要打印的 C++ 队列。打印第一个节点然后删除它很容易，然后再次打印第一个节点，这将是第二个节点。但这会删除整个列表只是为了打印一次......作为一种解决方法，我创建了一个临时队列对象，我将它传递给我的打印方法并做与第一个对象相同的事情，这会很棒，除非它正在使用使队列动态的指针，因此从从第一个复制的任何对象中删除它们仍然是删除相同的数据。我还不擅长指针，但我确信必须有一种简单的方法来做到这一点，有什么建议吗？

这是代码：

```
queue2 = queue1; // Temporary queue is assigned values of main queue
queue2.printQueue(); // Temporary queue is passed to print method 
```

这是我的打印方法：

```
int numberPrinted = 0;
while (!isEmptyQueue())
{
 cout << numberPrinted + 1 << ": " << front() << "\n";
 deleteQueue();    
 numberPrinted++;
 } 
```

队列类文件：

```
#ifndef H_linkedQueue
#define H_linkedQueue

#include <iostream>
#include <cassert>
#include "queueADT.h"

using namespace std;

//Definition of the node
template <class Type>
struct nodeType
{
    Type info;
    nodeType<Type> *link;
};

template <class Type>
class linkedQueueType: public queueADT<Type>
{
public:
    bool operator==
                    (const linkedQueueType<Type>& otherQueue); 

    bool isEmptyQueue() const;
      //Function to determine whether the queue is empty. 
      //Postcondition: Returns true if the queue is empty,
      //               otherwise returns false.

    bool isFullQueue() const;
      //Function to determine whether the queue is full. 
      //Postcondition: Returns true if the queue is full,
      //               otherwise returns false.

    void initializeQueue();
      //Function to initialize the queue to an empty state.
      //Postcondition: queueFront = NULL; queueRear = NULL

    Type front() const;
      //Function to return the first element of the queue.
      //Precondition: The queue exists and is not empty.
      //Postcondition: If the queue is empty, the program 
      //               terminates; otherwise, the first 
      //               element of the queue is returned. 

    Type back() const;
      //Function to return the last element of the queue.
      //Precondition: The queue exists and is not empty.
      //Postcondition: If the queue is empty, the program 
      //               terminates; otherwise, the last 
      //               element of the queue is returned.

    void addQueue(const Type& queueElement);
      //Function to add queueElement to the queue.
      //Precondition: The queue exists and is not full.
      //Postcondition: The queue is changed and queueElement
      //               is added to the queue.

    void deleteQueue();
      //Function  to remove the first element of the queue.
      //Precondition: The queue exists and is not empty.
      //Postcondition: The queue is changed and the first 
      //               element is removed from the queue.
    int numberOfNodes();
    // Return number of nodes in the queue.
    void printQueue();
    //Print the queue.

    linkedQueueType(); 
      //Default constructor

    linkedQueueType(const linkedQueueType<Type>& otherQueue); 
      //Copy constructor

    ~linkedQueueType(); 
      //Destructor

private:
    nodeType<Type> *queueFront; //pointer to the front of 
                                //the queue
    nodeType<Type> *queueRear;  //pointer to the rear of 
                                //the queue
    int count;
};

    //Default constructor
template<class Type>
linkedQueueType<Type>::linkedQueueType() 
{
    queueFront = NULL; //set front to null
    queueRear = NULL;  //set rear to null
} //end default constructor

template<class Type>
bool linkedQueueType<Type>::isEmptyQueue() const
{
    return(queueFront == NULL);
} //end 

template<class Type>
bool linkedQueueType<Type>::isFullQueue() const
{
    return false;
} //end isFullQueue

template <class Type>
void linkedQueueType<Type>::initializeQueue()
{
    nodeType<Type> *temp;

    while (queueFront!= NULL)  //while there are elements left
                               //in the queue
    {
        temp = queueFront;  //set temp to point to the 
                            //current node
        queueFront = queueFront->link;  //advance first to  
                                        //the next node
        delete temp;    //deallocate memory occupied by temp
    }

    queueRear = NULL;  //set rear to NULL
} //end initializeQueue

template <class Type>
void linkedQueueType<Type>::addQueue(const Type& newElement)
{
    nodeType<Type> *newNode;

    newNode = new nodeType<Type>;   //create the node

    newNode->info = newElement; //store the info
    newNode->link = NULL;  //initialize the link field to NULL

    if (queueFront == NULL) //if initially the queue is empty
    {
        queueFront = newNode;
        queueRear = newNode;
    }
    else        //add newNode at the end
    {
        queueRear->link = newNode;
        queueRear = queueRear->link;
    }
    count++;
}//end addQueue

template <class Type>
Type linkedQueueType<Type>::front() const
{
    assert(queueFront != NULL);
    return queueFront->info; 
} //end front

template <class Type>
Type linkedQueueType<Type>::back() const
{
    assert(queueRear!= NULL);
    return queueRear->info;
} //end back

template <class Type>
void linkedQueueType<Type>::deleteQueue()
{
    nodeType<Type> *temp;

    if (!isEmptyQueue())
    {
        temp = queueFront;  //make temp point to the 
                            //first node
        queueFront = queueFront->link; //advance queueFront 

        delete temp;    //delete the first node

        if (queueFront == NULL) //if after deletion the 
                                //queue is empty
            queueRear = NULL;   //set queueRear to NULL
        count--;
    }
    else
        cout << "Cannot remove from an empty queue" << endl;
}//end deleteQueue

    //Destructor
template <class Type>
linkedQueueType<Type>::~linkedQueueType() 
{
    //Write the definition of the destructor
} //end destructor

template <class Type> 
bool linkedQueueType<Type>::operator==
                    (const linkedQueueType<Type>& otherQueue)
{
    bool same = false;

    if (count == otherQueue.count)
        same = true;

    return same;

} //end assignment operator

    //copy constructor
template <class Type>
linkedQueueType<Type>::linkedQueueType
                 (const linkedQueueType<Type>& otherQueue) 
{
    //Write the definition of the copy constructor
}//end copy constructor
template <class Type> 
int linkedQueueType<Type>::numberOfNodes()
{
    return count;

} 

template <class Type> 
void linkedQueueType<Type>::printQueue()
{
    int numberPrinted = 0;
while (!isEmptyQueue())
{
 cout << numberPrinted + 1 << ": " << front() << "\n";
 deleteQueue();    
 numberPrinted++;
 }
}
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:06:18.550

您的队列`printQueue`方法已经可以访问队列的私有内部。而不是使用公共接口来打印队列，只需使用内部`queueFront`指针并遍历列表，打印每个元素。

类似的东西（自本作业以来的伪代码）：

```
for(node* n = queueFront; n; n = n->next)
{
    // Print data from node n.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T00:01:40.977

如果您使用自己编写的队列类，请向其添加迭代器。如果您正在使用已经有迭代器的队列类，请遍历它以打印它。如果您使用的队列类没有迭代器，请切换到另一个有迭代器的队列类。

如果您正在使用`std::queue`，请切换到`std::list`或`std::deque`。

有[一个例子](http://www.cplusplus.com/reference/deque/deque/begin/)展示`cplusplus.com`了如何遍历一个双端队列：

```
#include <iostream>
#include <deque>

int main ()
{
  std::deque<int> mydeque;

  for (int i=1; i<=5; i++) mydeque.push_back(i);

  std::cout << "mydeque contains:";

  std::deque<int>::iterator it = mydeque.begin();

  while (it != mydeque.end())
    std::cout << ' ' << *it++;

  std::cout << '\n';
  return 0;
} 
```

或者：

```
for (std::deque<int>::iterator it = mydeque.begin(); it != mydeque.end(); ++it)
  // print *it here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T00:04:24.367

如果队列是您自己的代码，并且假设您可以在内部迭代其元素，则可以给它 a`friend ostream& operator<<(ostream&, const your_queue_type&)`并将元素写入输出流。

```
class Queue
{
 public:
  // methods
 friend ostream& operator<<(ostream& o, const Queue& q)
 {
   // iterate over nodes and stream them to o: o << some_node and so on
 }
}; 
```

然后

```
Queue q = ....;
std::cout << q << std::endl; // calls your ostream& operator<< 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-28T00:26:25.887

我不知道这有多大用处，但是由于您将每个节点附加到下一个使用，`nodeType<Type>.link`那么您可能想要执行以下操作：

```
int numberPrinted = 1;
nodeType<Type> *temp;
if (queueFront != NULL) 
{
    temp = queueFront;
    do
    {
        cout << numberPrinted << ": " << temp->info << "\n";
        numberPrinted++;
    }while(temp->link!=NULL);
} 
```

这样你就可以在不改变队列的情况下跟随指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-02T19:04:20.973

这是一个简单的方法，只需一个指针和一个while循环

`while(pointer != NULL) pointer.info pointer = pointer.next`

# python - 如何循环遍历图像中的单个像素并输出每行的最高 RGB 值像素？

> ID：15671815
> 
> 赞同：0
> 
> 时间：2013-03-27T23:58:05.083
> 
> 标签：python, image, image-processing, rgb

我正在尝试导入一个图像文件，例如 file.bmp，读取图像中每个像素的 RGB 值，然后将*每行*的最高 RGB 值像素（最亮的像素）输出到屏幕。关于如何使用 Python 执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:59:29.660

好吧，您可以使用`scipy.misc.imread`它来读取图像并像这样操作它：

```
import scipy.misc
file_array = scipy.misc.imread("file.bmp")

def get_brightness(pixel_tuple):
   return sum([component*component for component in pixel_tuple])**.5 # distance from (0, 0, 0)

row_maxima = {}
height, width = len(file_array), len(file_array[0])
for y in range(height):
  for x in range(width):
    pixel = tuple(file_array[y][x]) # casting it to a tuple so it can be stored in the dict
    if y in row_maxima and get_brightness(pixel) > row_maxima[y]:
      row_maxima[y] = pixel
    if y not in row_maxima:
      row_maxima[y] = pixel
print row_maxima 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T02:02:59.633

您可以在这里充分利用 numpy 的强大功能。请注意，下面的代码在 [0, 255] 范围内输出“亮度”。

```
#!/bin/env python

import numpy as np
from scipy.misc import imread

#Read in the image
img = imread('/users/solbrig/smooth_test5.png')

#Sum the colors to get brightness
brightness = img.sum(axis=2) / img.shape[2]

#Find the maximum brightness in each row
row_max = np.amax(brightness, axis=1)
print row_max 
```

如果你认为你的图像可能有一个 alpha 层，你可以这样做：

```
#!/bin/env python

import numpy as np
from scipy.misc import imread

#Read in the image
img = imread('/users/solbrig/smooth_test5.png')

#Pull off alpha layer
if img.shape[2] == 4:
    alph = img[:,:,3]/255.0
    img = img[:,:,0:3]
else:
    alph = np.ones(img.shape[0:1])

#Sum the colors to get brightness
brightness = img.sum(axis=2) / img.shape[2]
brightness *= alph

#Find the maximum brightness in each row
row_max = np.amax(brightness, axis=1)
print row_max 
```

# qt - Qt 5 中的 OpenGL 与 QOpenGL/QtOpenGL：差异和限制？

> ID：15671816
> 
> 赞同：16
> 
> 时间：2013-03-27T23:58:24.043
> 
> 标签：qt, opengl, qt5

由于有两种方法可以将 OpenGL 与[Qt 5](http://qt-project.org/downloads)一起使用（[QOpenGL](http://qt-project.org/doc/qt-5.0/qtgui/qopenglshaderprogram.html) / [QtOpenGL](http://qt-project.org/doc/qt-4.8/qglshaderprogram.html)包装器和常规[OpenGL](http://www.opengl.org/documentation/) API），我想知道每种方法的局限性是什么。有人可以告诉我应该注意 QOpenGL 包装器是否存在限制？

我问这个的原因是因为我不想开始使用 QOpenGL 包装器并发现我不能使用 OpenGL API 的全部功能。有没有人在这两个方面都有经验并且可以在功能、性能和易用性方面提供一些提示？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-28T03:56:43.583

> 我不想开始使用 QOpenGL 包装器并发现我无法使用 OpenGL API 的全部功能

好吧，Qt 5.0 的 OpenGL 包装器建立在 OpenGL ES（嵌入式系统）2.0 规范之上，该规范本质上是桌面 OpenGL 3.0 规范的淡化版本。Qt 选择此规范是为了促进可移植性，因为它得到了移动平台的广泛支持，此外几乎所有现代 PC 都支持它。如果您选择使用 Qt 包装器，则必须解决 OpenGL ES 2.0 规范的缺点，该规范在很大程度上分为以下几类：

1.  没有固定功能的管道功能。（没有转换堆栈，，，，`glBegin`等`glEnd`。`glLightf`）
2.  不支持高级 OpenGL 3+ 功能或仅支持扩展。（纹理缓冲对象、计算着色器、原子加载存储纹理、镶嵌着色器、统一缓冲对象等。）
3.  缺少某些纹理格式（整数纹理、图像纹理等）
4.  GLSL 语法和语义的细微差别。（缺少布局限定符、通过`highp`、`lowp`声明等的数据精度要求。）
5.  缺少一些方便的方法。( `glBlitFramebuffer`, `glMultiDrawArrays`, `glDrawRangeElements`, 等等..)

有关 OpenGL ES 2.0 规范的完整描述，请查看[此处](http://www.khronos.org/registry/gles/specs/1.1/es_cm_spec_1.1.12.pdf)。

但是，这种功能的缺乏并不意味着 Qt 包装器无法完成您所需要的。尽管 OpenGL ES 2.0 缺少很多有用的功能，但您仍然可以完成完整桌面 OpenGL 规范所允许的 99%。如果您决定通过自定义包装器使用桌面 OpenGL 规范，Qt 仍然可以通过使用`QGLFormat`该类来管理桌面 OpenGL 上下文的创建和窗口化。

请记住，如果您决定使用桌面 OpenGL 包装器，并在 Qt 应用程序中使用它们，Qt 提供的某些类可能会干扰您自定义包装器的操作。例如，QGLWidget 上的 QPainter 操作可能会利用 OpenGL ES 规范的功能，并且可能会干扰包装对象的操作。

就个人而言，我更喜欢使用自定义 OpenGL 包装器，因为我更喜欢桌面 OpenGL 规范，因为功能集定义得更好，并且它们提供了更多选项来解决问题。另一方面，Qt 5 提供了一些非常棒的架构，用于使用 OpenGL ES 制作快速、强大的动态用户界面。（通过 QtQuick 2 和 QML）

哪种 API 最适合您的需求基本上取决于您是针对嵌入式平台还是移动平台（在这种情况下您被迫使用 OpenGL ES），以及您是否愿意牺牲额外的开发时间来编写和维护自定义 OpenGL 3+ 包装器.

# ios - 关于缺少某些文件的 UrbanAirpush 编译错误

> ID：15671817
> 
> 赞同：0
> 
> 时间：2013-03-27T23:58:31.640
> 
> 标签：ios, objective-c, ios5, urbanairship.com

编译代码时出现此错误：

```
Ld /Users/owner12/Library/Developer/Xcode/DerivedData/BusinessIdea-degqppvjmvixescuvttxsvcksqtf/Build/Products/Debug-iphonesimulator/BusinessIdea.app/BusinessIdea normal i386
    cd /Users/owner12/Desktop/BusinessIdea
    setenv IPHONEOS_DEPLOYMENT_TARGET 6.0
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.1.sdk -L/Users/owner12/Library/Developer/Xcode/DerivedData/BusinessIdea-degqppvjmvixescuvttxsvcksqtf/Build/Products/Debug-iphonesimulator -L/Users/owner12/Desktop/BusinessIdea/BusinessIdea/Airship -F/Users/owner12/Library/Developer/Xcode/DerivedData/BusinessIdea-degqppvjmvixescuvttxsvcksqtf/Build/Products/Debug-iphonesimulator -filelist /Users/owner12/Library/Developer/Xcode/DerivedData/BusinessIdea-degqppvjmvixescuvttxsvcksqtf/Build/Intermediates/BusinessIdea.build/Debug-iphonesimulator/BusinessIdea.build/Objects-normal/i386/BusinessIdea.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework Foundation -framework CoreGraphics -lUAirship-1.4.0 -lUAirshipFull-1.4.0 -o /Users/owner12/Library/Developer/Xcode/DerivedData/BusinessIdea-degqppvjmvixescuvttxsvcksqtf/Build/Products/Debug-iphonesimulator/BusinessIdea.app/BusinessIdea

Undefined symbols for architecture i386:
  "_AudioServicesCreateSystemSoundID", referenced from:
      -[UAPushNotificationHandler playNotificationSound:] in UAPushNotificationHandler.o
      -[UAPushSettingsSoundsViewController tableView:didSelectRowAtIndexPath:] in UAPushSettingsSoundsViewController.o
  "_AudioServicesPlayAlertSound", referenced from:
      -[UAPushNotificationHandler playNotificationSound:] in UAPushNotificationHandler.o
      -[UAPushSettingsSoundsViewController tableView:didSelectRowAtIndexPath:] in UAPushSettingsSoundsViewController.o
  "_AudioServicesPlaySystemSound", referenced from:
      -[UAPushNotificationHandler playNotificationSound:] in UAPushNotificationHandler.o
  "_CFHTTPAuthenticationCopyMethod", referenced from:
      -[UA_ASIHTTPRequest attemptToApplyProxyCredentialsAndResume] in libUAirship-1.4.0.a(UA_ASIHTTPRequest.o)
      -[UA_ASIHTTPRequest attemptToApplyCredentialsAndResume] in libUAirship-1.4.0.a(UA_ASIHTTPRequest.o)
  "_CFHTTPAuthenticationCopyRealm", referenced from:
      -[UA_ASIHTTPRequest attemptToApplyProxyCredentialsAndResume] in libUAirship-1.4.0.a(UA_ASIHTTPRequest.o)
      -[UA_ASIHTTPRequest attemptToApplyCredentialsAndResume] in libUAirship-1.4.0.a(UA_ASIHTTPRequest.o)
  "_CFHTTPAuthenticationCreateFromResponse", referenced from:
      -[UA_ASIHTTPRequest attemptToApplyProxyCredentialsAndResume] in libUAirship-1.4.0.a(UA_ASIHTTPRequest.o)
      -[UA_ASIHTTPRequest attemptToApplyCredentialsAndResume] in libUAirship-1.4.0.a(UA_ASIHTTPRequest.o) 
```

它们非常神秘，谷歌搜索整个错误并没有带来太多。有谁知道为什么会发生这种情况以及如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:00:53.957

您必须将以下框架添加到您的项目中。AudioServices、CFNetwork、SystemConfiguration、MobileCoreServices、zlib 和 libxml2。对于 libxml2 和 zlib，您必须`Header Search Paths`在构建设置中添加 2 个条目。`/usr/include/`和`/usr/include/libxml2/`。

要添加它们（它们已经包含在 Xcode 中），请执行此操作 ![在此处输入图像描述](../Images/18123ceae51ffd5d034382d0b5350b01.png)

单击加号按钮，然后添加我上面列出的所有框架。（Cocoa.framework 不是必需的，这只是来自我的项目）。如果您向下滚动，它位于您的项目摘要中。

# google-app-engine - spring-data-neo4j 2.2.0 在 Google App Engine 中有 java.security.AccessControlException

> ID：15671818
> 
> 赞同：0
> 
> 时间：2013-03-27T23:58:37.733
> 
> 标签：google-app-engine, spring-data-neo4j

GAE 使用 spring-data-neo4j 2.2.0 引发以下错误。有没有办法在 spring-data-neo4j 中禁用线程？

```
Caused by: java.security.AccessControlException: access denied (java.lang.RuntimePermission modifyThreadGroup) 
```

（spring-data-neo4j 2.1.0 显然没有使用线程并且在 GAE 中工作。）

# ruby-on-rails - 无法使用 pg_search gem 从 Postgres 中检索摘录

> ID：15671821
> 
> 赞同：1
> 
> 时间：2013-03-27T23:58:43.680
> 
> 标签：ruby-on-rails, rails-postgresql, pg-search

**更新**

首先，没有方法“上下文”。那是我的大脑在某个时候编造出来的一个词，并坚持了下来。显然我应该一直在运行 .excerpt()。其次，我是针对返回的数组运行命令，而不是针对 PG_Search::Document 的单个实例

双重错误，但是代码确实有效。

**结束更新**

首先是一些系统信息：

*   红宝石 1.9.3p194
*   导轨 3.2.13
*   pg_search 0.5.7
*   Postgres 9.2.3（启用非重音）

我正在尝试跟踪此线程中取得的进展：（[如何显示 pg-search 多搜索结果的摘录](https://stackoverflow.com/questions/11140339/how-to-show-excerpts-from-pg-search-multisearch-results)）

好的，假设使用从该帖子中抄录的以下查询：

```
@query = params[:query]
PgSearch.multisearch(@query).select("ts_headline(pg_search_documents.content, plainto_tsquery('english', ''' ' || unaccent('#{@query}') || ' ''' || ':*')) AS excerpt") 
```

返回：

```
=> [#<PgSearch::Document id: 7, content: "1 <p>You think water moves fast? You should see ice...", searchable_id: 2, searchable_type: "Release", created_at: "2013-03-27 18:58:52", updated_at: "2013-03-27 18:58:52">] 
```

它成功返回了一些搜索结果，但它们根本没有该`context`方法。就好像我只是在`multisearch`没有`select`方法的情况下调用了。

我是 SQL 和 Postgres 的新手，所以我不确定从哪里开始调试该代码段。我希望得到一些帮助调试或解释正在发生的事情。

另外，我认为很重要的一点是，我要感谢从事 pg_search 工作或回答此类问题的任何人。你让世界变得更美好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-19T22:13:27.407

您还必须选择所需的其他列。

例如

```
sanitized = ActionController::Base.helpers.sanitize(params[:q])
@results = PgSearch.multisearch(params[:q])
                  .select(:id, :content, :searchable_id, :searchable_type)
                  .select(["ts_headline(pg_search_documents.content, plainto_tsquery('english', ''' ' || '#{sanitized}' || ' ''' || ':*')) AS excerpt"]) 
```

将返回 id, content, searchable_id, searchable_type, excerpt

还要注意消毒。不想遭受 sql 注入攻击。:]

# clojure - Clojure core.logic 的意外结果（使用 CLP/FD）

> ID：15671823
> 
> 赞同：3
> 
> 时间：2013-03-27T23:58:52.857
> 
> 标签：clojure, clojure-core.logic

我试图理解为什么以下`product-pluso`函数会返回意外结果。我发现了一个错误还是我误解了它是如何工作的？我正在将 core.logic 与 CLP/FD 一起使用。我还在学习，所以我可能做错了。该函数应采用两个因素，一个数字和一个总和。总和应该是因子加数字的乘积。效果很好，除非这两个因素都是新鲜的。然后我得到奇怪的结果。这发生在 core.logic v0.8.2 中。

```
(ns strang-result
  (:refer-clojure :exclude [==])
  (:use
    clojure.test
    [clojure.core.logic :exclude [is]])
  (:require
    [clojure.core.logic.fd :as fd]))

(defn product-pluso [factor1 factor2 number sum]
  (fd/eq (= sum (+ number (* factor1 factor2)))))

(run* [x y]
  (fd/in x y (fd/interval 1 38))
  (product-pluso x y 2 40))

;=> ([1 38] [2 19] [3 13] [4 10] [5 8] [6 7] [7 6] [8 5] [9 5] [10 4] [11 4] 
;    [12 4] [13 3] [14 3] [15 3] [16 3] [17 3] [18 3] [19 2] [38 1]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T17:09:06.933

这似乎只是一个错误。`fd/+`未检查的约束发生了一些奇怪的事情。我是主要开发人员之一，我为此提交了一张票：

[http://dev.clojure.org/jira/browse/LOGIC-126](http://dev.clojure.org/jira/browse/LOGIC-126)

更新：请尝试 0.8.3，问题已解决，您应该只看到 4 个结果。感谢您的报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T05:25:35.030

您可以使用 解决问题`project`，而`project`不是似乎以某种方式对约束进行 ORing 而不是对它们进行 ANDing。

```
(defn product-pluso [factor1 factor2 number sum]
  (fresh [product]
         (fd/+ product number sum)
         (project [product]
                  (fd/* factor1 factor2 product)))) 
```

# hibernate - 查询缓存休眠加载实体

> ID：15671825
> 
> 赞同：4
> 
> 时间：2013-03-27T23:59:01.227
> 
> 标签：hibernate, entity, second-level-cache, infinispan, query-cache

谁能帮我解决这个问题。我使用 Infinispan 作为二级缓存，使用 Hibernate 作为 ORM。我已经打开了 enityt 和查询缓存。

我有两个查询，例如 Q1 是“从 BokkEntity b 中选择 b，其中 b.id < 5”，另一个像 Q2 是“从 BokkEntity b 中选择 b，其中 b.id < 7”
我第一次运行 Q1 它加载 5对象从持久存储到缓存中。第一次运行第二个查询会在缓存中加载 7 个对象。虽然前五个对象在两个查询中都很常见。根据我的理解，查询缓存总是只存储 id，然后如果实体缓存在查询缓存中，则在缓存中为对象（由 ids 引用）完成搜索。

> 所以我的问题是为什么在我第一次运行 Q2（在运行 q1 之后）时，两个 Q2 都再次加载所有对象并在实体缓存中覆盖这些对象。

我已经检查了查询缓存对于任何后续请求是否正常工作。即，如果我重新运行 Q1 或 Q2，则从缓存中访问数据。

这很紧急，我会感谢你的努力。

谢谢

米娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T04:43:46.943

Hibernate 无法告诉它已经有哪些查询结果，除非它之前运行过完全相同的查询。因此，这是预期的行为。

根据休眠[文档](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch06.html)：

> 如果您有使用相同参数反复运行的查询，则查询缓存可以提高性能。

注意这句话：*具有相同的参数*。

如果您要求 hibernate 通过 id 检索实体，它可以轻松搜索其缓存。但是对于之前没有运行过的查询，自上次运行以来可能已经插入了任意数量的东西（它只会在服务器之间失效，它不会添加或更新远程服务器缓存）。

此外，对于查询，hibernate 过于渴望（一件好事）使其查询缓存无效（任何时候发生数据库更新，您都可能会丢失所有缓存的查询结果）。

他们必须实现以确保您的 2 个查询可以合并和拆分的那种逻辑将非常复杂，并且如果不深入了解您的数据库结构和程序逻辑，则可能无法实现。

# php - PHP fwrite写入空文件

> ID：15671829
> 
> 赞同：0
> 
> 时间：2013-03-27T23:59:12.617
> 
> 标签：php, file-io, fwrite

我试图让它保存一个文件并创建文件，但它总是空的。这是它的代码：

```
<?php

$code = htmlentities($_POST['code']);

$i = 0;
$path = 'files/';
$file_name = '';

while(true) {
    if (file_exists($path . strval($i) . '.txt')) {
        $i++;
    } else {
        $name = strval($i);
        $file_name = $path . $name . '.txt';
        break;
    }
}

fopen($file_name, 'w');
fwrite($file_name, $code);
fclose($file_name);

header("location: index.php?file=$i");

?> 
```

我回显了 $code 以确保它不是空的，但它不是。我也尝试更换

```
fwrite($file_name, $code); 
```

有了这个：

```
fwrite($file_name, 'Test'); 
```

它仍然是空的。我以前用 PHP 写过几次文件，但我对 PHP 还是很陌生，我不知道出了什么问题。有人可以告诉我我做错了什么或如何解决这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:05:51.147

看看php.net上的[示例](http://php.net/manual/en/function.fwrite.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:11:50.120

读取/写入文件或流需要资源句柄：

```
$resource = fopen($file_name, 'w');
fwrite($resource, $code);
fclose($resource); 
```

资源句柄`$resource`本质上是一个指向打开的文件/流资源的指针。您与创建的资源句柄进行交互，而不是文件名的字符串表示。

这个概念也存在于[cURL](http://www.php.net/manual/en/function.curl-init.php)中。这是 PHP 中的一种常见做法，尤其是当这些方法出现时 PHP 不支持 OOP。

# r - 在r中循环具有不同列数的数据帧

> ID：15671830
> 
> 赞同：0
> 
> 时间：2013-03-27T23:59:13.520
> 
> 标签：r

也许是微不足道的，但我正在尝试解决这个问题：

我必须数据框，一个有 25 列，另一个有 9 列。现在，我需要做的是拟合多项式方程，其中我的因变量在 25 列的数据框中，而我的自变量在 9 列的数据框中。目前，我将这些列组合在一起并创建了一个名为“my.data”的数据框，因此我当时使用一个自变量遍历因变量。但是，我想自动执行循环中的函数 25 * 9 次。有没有办法做到这一点？

```
setwd("C:\\......")

 my.data <- read.table("MyData.txt", header = TRUE, sep = "\t")

for(i in seq_along(my.data))
 {

    fit1b <- lm(my.data[ ,i] ~ my.data$V1)
    fit2b <- lm(my.data[ ,i] ~ poly(my.data$V1, 2, raw=TRUE))
    fit3b <- lm(my.data[ ,i] ~ poly(my.data$V1, 3, raw=TRUE))
    poly1 <-capture.output(summary(fit1b))
    poly2 <-capture.output(summary(fit2b))
    poly3 <-capture.output(summary(fit3b))

con = file(description = "MyResults.txt", open="a")
write.table(poly1, file= con, append = TRUE, quote=F, col.names=FALSE, row.names= F)
write.table(poly2, file= con, append = TRUE, quote=F, col.names=FALSE, row.names= F)
write.table(poly3, file= con, append = TRUE, quote=F, col.names=FALSE, row.names= F)
close(con)
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:23:16.213

`mapply`这是一个使用和使用的绝佳机会`expand.grid`

例如。

```
# some dummy data
xx <- data.frame(replicate(5, runif(50)))
yy <- setNames(data.frame(replicate(3, runif(50))), paste0('Y',1:3))
# all combinations
cs <- expand.grid(list(pred = names(xx), resp = names(yy)), stringsAsFactors= FALSE)

# a function to do the fitting
fitting <- function(pred, resp, dd){
  # fit linear model
  ff <- reformulate(pred, resp)
  lmf <- lm(ff, data =dd)
  # create a formula for poly(,2)
  ff.poly2 <- update(ff, .~poly(.,2, raw=TRUE))
  # and poly(,3)
  ff.poly3 <- update(ff, .~poly(.,3, raw=TRUE))
  # fit these models
  lmp2 <- lm(ff.poly2, data = dd)
  lmp3 <- lm(ff.poly3, data = dd)
  # return a list with these three models
  list(linear = lmf, poly2 = lmp2, poly3 = lmp3)
}

biglist <- mapply('fitting', pred = as.list(cs[['pred']]), 
        resp = as.list(cs[['resp']]),
       MoreArgs = list(dd = cbind(xx,yy)), SIMPLIFY = FALSE)

# give this list meaningful names

names(biglist) <- do.call(paste, c(cs, sep = ':')) 
```

`lapply` 然后，您可以使用一些嵌套语句提取事物/总结事物

例如所有线性模型的总结

```
lapply(lapply(biglist, `[[`,'linear'), summary) 
```

二次模型的

```
lapply(lapply(biglist, `[[`,'poly2'), summary) 
```

如果要从`print(summary(lm))`单个文件中提取信息，例如

```
capture.output(lapply(biglist, function(x) lapply(x, summary)), file = 'results.txt') 
```

将创建一个名为的文件`results.txt`，其中打印所有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:42:12.430

# javascript - 单击标记时显示/隐藏 div

> ID：15671833
> 
> 赞同：0
> 
> 时间：2013-03-27T23:59:21.150
> 
> 标签：javascript, google-maps-api-3

我是 javascript 新手，不知道从哪里开始挖掘信息如何实现我的想法。我想在单击标记时打开一个 div，就像地图上的弹出窗口一样。我有大约 15 个标记，每个标记都有不同的内容和图像。弹出式布局将保持不变。我相信制作 div 比制作信息框更容易，对吗？

这是我的 Photoshop 素描： [素描](http://cl.ly/image/0s3u2A1g2H2r)

这就是我到目前为止所拥有的： [Demo](http://shonderdos.nl/demo/)

我应该尝试、阅读和调查什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:07:12.067

您可以使用谷歌地图的信息窗口查看[https://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow) 并自定义其内容。就像这个问题一样：[Google Maps API v3: Custom styles for infowindow](https://stackoverflow.com/questions/7616666/google-maps-api-v3-custom-styles-for-infowindow)

# ms-access-2007 - 访问数据库关系

> ID：15671834
> 
> 赞同：0
> 
> 时间：2013-03-27T23:59:30.503
> 
> 标签：ms-access-2007, relationships

我正在使用 access 2007。我创建了一个名为 holiday 的数据库，其中包含 3 个表，即：

```
client - this has all the client information
flight - this stores flight information
cruise - this stores cruiser information 
```

我正在考虑做的是在这三个表之间建立关系。我只是认为自己来自谷歌的“关系”，据我所知，我应该使用一对多的关系。

我这样做了，每个表都有一个名为 customerID 的列，其中客户端表将其作为主键，其他表作为外键。我想知道的是如何链接表格，以便当我在客户表格上输入信息时，航班和巡航都应该作为子选择打开，因为目前只有一个正在打开而我不知道如何输入另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T05:33:01.013

有两种方法可以在表之间创建关系。

一种是永久使用关系窗口（在 Access 2010 中的数据库工具下）。从一个表中的字段拖动到另一个表中的字段。然后双击线（连接）以编辑连接类型。

另一种是在 A Query Builder 窗口中临时执行此操作。然后以与上述相同的方式创建连接。此连接仅在此查询中设置，或基于此查询的任何其他内容。

好的，既然你加入了，你的计划是什么。一种方法是创建一个用于编辑客户信息的表单，以及两个用于编辑航班和邮轮信息的子表单。

祝你好运

# apache-flex - 调整 Flex DataGrid 的大小以适合数据，然后滚动

> ID：15671845
> 
> 赞同：0
> 
> 时间：2013-03-28T00:01:10.377
> 
> 标签：apache-flex, datagrid, scroll

我有一个作为主/详细 UI 设计模式的 UI。有一个 DataGrid，它在 VDividedBox 的顶部部分保存 1-n 条记录，然后在底部有一个详细信息窗格，显示在 DataGrid 中选择的记录的详细信息，以响应选择。

DataGrid 通常只包含少量项目，因此在大多数情况下，我希望 DataGrid 调整为行数，并且详细信息窗格显示在表格下方，没有空白空间或空行。通过设置 rowCount="{tableData.length}"，我可以正常工作，其中 tableData 是数据提供者。到目前为止，一切都很好。

但是，有时表格包含大量项目，在这些情况下，我希望表格增长以填充可用空间，然后在有太多要显示的项目时滚动，而不会滚动关闭详细信息窗格。也就是说，表现得好像 rowCount 没有设置为 dataprovider 长度，而高度设置为 100%。

我的问题是，确定何时进行此切换。将行为从基于 rowCount 的高度切换到基于百分比的高度的最佳方法是什么？还是我错过了一些技巧，当基于 rowCount 的高度表空间不足时会滚动？

谢谢，

稻田

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:35:54.610

如果您通过以下方式设置 rowCount 怎么办：

```
rowCount="{tableData.length > 30 ? 30 : tableData.length }" 
```

您要缩放到的最大高度在哪里 30？

这样，如果行数超过 30（或一些 #），它将滚动。

# php - 仅使用 Wordpress 中的库在 PHP 中读取 JSON

> ID：15671847
> 
> 赞同：2
> 
> 时间：2013-03-28T00:01:19.850
> 
> 标签：php, json, wordpress

我想读取进入安装了足够 PHP 以运行 WordPress 的服务器的 JSON 数据。我可以创建新的 .php 文件，但我没有管理员权限来添加任何尚不存在的库。

在这种情况下，从 http 请求中获取和解析 JSON 数据的最简单方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T16:18:38.577

谢谢大家的指点，但我正在寻找的答案要简单得多。必要的两行代码原来是：

```
$json_data = file_get_contents("php://input");
$json_data = json_decode($json_data, true); 
```

第一行：获取命中页面的 json 数据。第二行：将其解析为适当的哈希。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-28T01:28:11.307

如果您在 WordPress 的上下文中执行此操作，则应使用内置的 HTTP 辅助函数 ( [http://codex.wordpress.org/HTTP_API](http://codex.wordpress.org/HTTP_API) )。它们比 curl 更简单。例子：

```
$response = wp_remote_get( $url );
if( is_wp_error( $response ) ) {
   $error_message = $response->get_error_message();
   echo "Something went wrong: $error_message";
} else {
   echo 'Response:<pre>';
   print_r( $response );
   echo '</pre>';
} 
```

以上将返回如下内容：

```
Array
(
    [headers] => Array
        (
            [date] => Thu, 30 Sep 2010 15:16:36 GMT
            [server] => Apache
            [x-powered-by] => PHP/5.3.3
            [x-server] => 10.90.6.243
            [expires] => Thu, 30 Sep 2010 03:16:36 GMT
            [cache-control] => Array
                (
                    [0] => no-store, no-cache, must-revalidate
                    [1] => post-check=0, pre-check=0
                )

            [vary] => Accept-Encoding
            [content-length] => 1641
            [connection] => close
            [content-type] => application/php
        )
    [body] => {"a":1,"b":2,"c":3,"d":4,"e":5}
    [response] => Array
        (
            [code] => 200
            [message] => OK
        )

    [cookies] => Array
        (
        )

) 
```

然后可以使用 json_decode() 将 json 改成数组：[http ://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T00:03:27.027

使用 cURL 和 json_decode，您可以这样做。如果您正在运行 Wordpress，那么这些都是可用的。

```
$session = curl_init('http://domain.com/'); // HTTP URL to the json resource you're requesting
curl_setopt($session, CURLOPT_FOLLOWLOCATION, TRUE);
curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
$json = json_decode(curl_exec($session));
curl_close($session);
echo $json; 
```

# ruby-on-rails - 在启动开发服务器时启动 resque worker

> ID：15671854
> 
> 赞同：2
> 
> 时间：2013-03-28T00:01:50.097
> 
> 标签：ruby-on-rails, redis, resque

我想在启动开发服务器时启动我的工作人员以测试我在 resque 调度程序中的新 cron 作业，因此我在启动开发服务器时运行此命令-

```
QUEUE=* rake environment resque:work rails s 
```

它以前对我有用，如果我[正确阅读他们的文档](https://github.com/resque/resque/wiki/FAQ#how-do-i-ensure-my-rails-classesenvironment-is-loaded)应该仍然有效。

但是我在挂断后中断它后出现以下错误-

```
^Crake aborted!
Don't know how to build task 'rails' 
```

这是我在键盘中断并运行它后得到的`--trace`

```
** Invoke environment (first_time)
** Execute environment
** Invoke resque:work (first_time)
** Invoke resque:preload (first_time)
** Invoke resque:setup (first_time)
** Invoke environment
** Execute resque:setup
** Execute resque:preload
** Invoke resque:setup
** Execute resque:work
^Crake aborted!
Don't know how to build task 'rails' 
```

我不明白为什么我会收到错误，以及为什么它以前加载和工作但现在没有了。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T13:30:21.900

你确定你设法在某个时候成功地运行这个命令吗

`QUEUE=* rake environment resque:work rails s`

因为我知道的方式`rails s`是 rails 命令列表而不是 rake 任务

您可以运行连续的 rake 分隔空间，例如

`QUEUE=* rake environment rake1 rake2 rake3`

但是你**不能**像上面提到的那样运行 rake 和 rails 命令

我从您上面的跟踪中看到 rake( **resque rake** ) 现在正在运行，而不是传递第二个 rake 您指定了一个**rails 命令**来启动服务器 rake 正在考虑将其视为 rake 任务（这是不正确的）

我相信你正在寻找这个

`QUEUE=* rake environment resque:work && rails s`

但我不相信你提到的东西会起作用，如果这里有冲突，请告诉我

希望有意义

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-11T13:32:36.103

这个更好：

```
BACKGROUND=yes QUEUE=* PIDFILE=./tmp/resque.pid bundle exec rake environment resque:work 
```

然后：

```
rails s 
```

如果您需要停止 resque 工作人员：

```
kill -QUIT $(cat ./tmp/resque.pid) 
```

# mysql - Django 相当于 SqlAlchemy 的 literal_column

> ID：15671855
> 
> 赞同：0
> 
> 时间：2013-03-28T00:01:51.507
> 
> 标签：mysql, django, django-models, sqlalchemy

尝试将一些 SqlAlchemy 移植到 Django，但我遇到了这个棘手的问题：

```
version = Column(
     BIGINT,
     default=literal_column(
         'UNIX_TIMESTAMP() * 1000000 + MICROSECOND(CURRENT_TIMESTAMP)'
     ),
     nullable=False) 
```

`literal_column`将位移植到 Django的最佳选择是什么？到目前为止，我最好的想法是一个函数设置为执行相同原始 sql 的默认值，但我不确定是否有更简单的方法？我的 google-foo 在那里让我失望了。

编辑：我们需要使用 mysql 创建的时间戳的原因是我们正在测量某些东西的过时程度（所以我们需要实际知道*时间*）并且为了正确性，我们希望只有一个时间戳权限（所以我们不会使用查看系统时间的 python 函数引入错误，这可能因服务器而异）。

目前我有：

```
def get_current_timestamp(self):
    cursor = connection.cursor()
    cursor.execute("SELECT UNIX_TIMESTAMP() * 1000000 + MICROSECOND(CURRENT_TIMESTAMP)")
    row = cursor.fetchone()
    return row

version = models.BigIntegerField(default=get_current_timestamp) 
```

在这一点上，这听起来像是我最好/唯一的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:29:32.817

如果您不关心拥有中央时间权限：

```
import time

version = models.BigIntegerField(
    default = lambda: int(time.time()*1000000) ) 
```

根据您的意愿弯曲数据库：

```
from django.db.models.expressions import ExpressionNode

class NowInt(ExpressionNode):
    """ Pass this in the same manner you would pass Count or F objects """

    def __init__(self):
        super(Now, self).__init__(None, None, False)

    def evaluate(self, evaluator, qn, connection):
        return '(UNIX_TIMESTAMP() * 1000000 + MICROSECOND(CURRENT_TIMESTAMP))', []

### Model

version = models.BigIntegerField(default=NowInt()) 
```

因为表达式节点不是可调用的，所以表达式将在数据库端进行评估。

# jsp - JSP 文本文件 I/O

> ID：15671857
> 
> 赞同：0
> 
> 时间：2013-03-28T00:01:56.713
> 
> 标签：jsp

我正在尝试编写一个jsp函数，它将文本文件的路径作为输入，然后将文本文件的行打印到网页上。

抛出以下错误：“无法解决”

```
<%! public void displayData(String file){ 
     BufferedReader reader = new BufferedReader(new FileReader(file)); 
     String line; 
     while ((line = reader.readLine()) != null) { 
         out.print(line); 
     } 
     reader.close();        
 }%>

 <% displayData(application.getRealPath("/") + "../../test.txt"); %> 
```

我究竟做错了什么？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:09:47.050

该`out`变量未在类范围内声明。它在 JSP 文件的服务方法的方法本地范围内声明。

要实现具体的功能需求，请将文件移动到公共 Web 内容并使用[JSTL](https://stackoverflow.com/tags/jstl/info) [`<c:import>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/import.html)。

```
<c:import url="test.txt" /> 
```

# javascript - 如何防止基于网络的游戏被黑客入侵？

> ID：15671859
> 
> 赞同：-1
> 
> 时间：2013-03-28T00:02:17.457
> 
> 标签：javascript, asp.net, web-applications, security

我需要构建一个基于网络（html/js）的游戏，用户可以在其中获得/得分。在游戏结束时，用户在表单上输入他们的详细信息，然后将其连同他们的分数一起提交到服务器（通过 ajax post）以存储在数据库中。

有一个基于积分排名的排行榜和奖品元素。

我的问题是，我怎样才能防止用户破解这个游戏？我认为有人可以使用浏览器的开发工具或像提琴手这样的网络代理轻松更改发布到服务器的分数/分数值。奖品相当不错，因此值得有人花时间尝试破解它。

我正在寻找一个可靠的解决方案，而不仅仅是一些“让它更难破解”的答案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:24:00.043

您需要编写一个函数，在整个游戏过程中将玩家动作发送到服务器。然后在服务器上，您需要检查移动是否可行。

您还需要在整个游戏过程中跟踪游戏得分，并在游戏结束时确保提交的值不会比您记录的值高很多。你应该允许一些宽容。

实际代码是非常特定于游戏的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T00:21:21.327

我不知道它是什么类型的游戏，但你可以添加一些东西，所以如果你在短时间内获得一定数量（除非黑客入侵，否则这是不可能的）你无法进入高分。并使其成为服务器端。要进行分数限制，您可能会在每一步中创建一个函数，如果分数超过了 1 步中能够获得的最大值，那么它不允许您使用高分。

# csv - 如何将 d3.csv.parse 的结果保存到全局变量中？

> ID：15671865
> 
> 赞同：3
> 
> 时间：2013-03-28T00:02:36.630
> 
> 标签：csv, d3.js

我有这个

```
var result;
d3.csv("xxx.csv",function(data){
        csvResultParser(data);
});

function csvResultParser(data){
  //parse the data then assign it to result  
} 
```

但我仍然有“未定义”的结果，有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T21:33:48.050

该`d3.csv()`函数是异步的。`result`因此，在读取变量之前，您必须等待接收到数据。这就是为什么在处理异步数据时，最好在`d3.csv()`函数内部完成所有操作，而不是使用全局变量。

# audio - mediaelement.js - 音频流的 RTMP 支持？

> ID：15671868
> 
> 赞同：2
> 
> 时间：2013-03-28T00:02:48.200
> 
> 标签：audio, mediaelement.js, rtmp

目前是否支持通过 RTMP 使用原生 HTML5 或带有 MediaElement 的 Flash 后备流式传输音频？我看到使用视频标签“data-mejsoptions”属性中的 flashStreamer 选项支持视频。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-23T04:51:50.897

我知道你的问题已经有一年了，但我会尝试回答它，希望我可以为某人节省时间和解决问题的麻烦。

据我所知，任何原生 HTML5 音频/视频元素都不支持 RTMP。

幸运的是 mediaelement.js 似乎在这里支持这个协议 Flash 版本

似乎此协议更常用于视频。这就是为什么您必须提供一些额外的参数才能使 RTMP 流工作。

以下是我如何使用 mediaelement.js 获得 RTMP 音频流：

JavaScript：

```
$('video,audio').mediaelementplayer({
    audioWidth: 500,
    features: ['playpause','current', 'progress', 'volume'],
    pluginVars: 'isvideo=true',
    //Example rtmp://my-streaming-service.com/specific-stream
    flashStreamer: "rtmp://<base-url+path>",
    mode:'shim'
}); 
```

HTML：

```
<audio preload="none" controls="controls">
    <!-- Example rtmp://my-streaming-service.com/specific-stream/64.stream -->
    <source src="rtmp://<base-url+path>/<filename>" type="video/mp4"> 
</audio> 
```

# javascript - IE9中的Javascript setAttribute

> ID：15671874
> 
> 赞同：1
> 
> 时间：2013-03-28T00:03:41.800
> 
> 标签：javascript, internet-explorer-9, setattribute

所以我试图在网页打开时隐藏一个表格，但是当点击 a 时它应该显示，但我遇到了 IE9 问题。我读到 IE8 及以下不支持 setAttribute 并且我的网页似乎可以在 Firefox 上正常工作。这是代码，只是想知道是否有人可以帮助我：

```
<h1 onclick="myFunction()">Show Sitemap</h1>

<table id="myInput" style="visibility:hidden;" width="100%" height="50%">
<tr><td><p>Test</p></td></tr>
</table>

<script>
function myFunction()
{
document.getElementById("myInput").setAttribute("style","visibility:visible;"); 
};
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:09:02.507

尝试使用

```
function myFunction()
{
    document.getElementById("myInput").style.visibility = "visible"; 
}; 
```

相反，因为 IE 与此更兼容。
小提琴：http: [//jsfiddle.net/E396D/](http://jsfiddle.net/E396D/)

我在打开兼容模式的 IE10 中尝试了这个，它可以工作（原来没有）。

# bash - 变量替换删除引号

> ID：15671875
> 
> 赞同：1
> 
> 时间：2013-03-28T00:03:46.067
> 
> 标签：bash, loops, variable-substitution

我似乎很难得到我想要的工作。基本上，我有一系列变量，这些变量分配有一些引号和 \ 字符的字符串。我想删除引号以将它们嵌入到 json 文档中，因为 json 讨厌使用 python 转储方法的引号。

我想这会很容易。只需确定如何轻松删除字符，然后为变量替换编写一个简单的 for 循环，它并没有那样工作。

这就是我想要做的。

有一个名为“MESSAGE23”的变量，它包含以下“com.centrify.tokend.cac”，我想去掉引号，这对我来说很容易，一个简单的`echo $opt | sed "s/\"//g"`. 当我从命令行执行此操作时：

```
$> MESSAGE23="com."apple".cacng.tokend is present"
$> MESSAGE23=`echo $MESSAGE23 | sed "s/\"//g"`
$> com.apple.cacng.tokend is present 
```

这行得通。我得到格式正确的字符串。

然后当我试图把它扔进一个循环时，所有的地狱都松了。

```
for i to {1..25}; do
   MESSAGE$i=`echo $MESSAGE$i | sed "s/\"//g"`
done 
```

这不起作用（要么抛出一堆索引，要么什么都没有），而且我很确定我对`arg`or`eval`或其他 bash 替换变量了解不够。

但基本上我想对另一组具有相同问题的变量执行此操作，其中我去掉了引号，顺便也去掉了“\”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:19:04.597

你不能那样做。您可以使用 使其工作`eval`，但这会引入您必须担心的另一个级别的引用。有什么原因你不能使用数组吗？

```
MESSAGE=("this is MESSAGE[0]" "this is MESSAGE[1]")
MESSAGE[2]="I can add more, too!"
for (( i=0; i<${#MESSAGE[@]}; ++i )); do
   echo "${MESSAGE[i]}"
done 
```

否则你需要这样的东西：

```
 eval 'echo "$MESSAGE'"$i"'"' 
```

从那里开始变得更糟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:48:43.783

首先，有几个初步问题：`MESSAGE23="com."apple".cacng.tokend is present"` 不会在变量值中嵌入双引号，使用`MESSAGE23="com.\"apple\".cacng.tokend is present"`or`MESSAGE23='com."apple".cacng.tokend is present'`代替。其次，您几乎应该总是在变量扩展（例如 ）周围加上双引号，`echo "$MESSAGE23"`以防止解析异常。

现在，真正的问题是：shell 不允许在赋值左侧进行变量替换（即`MESSAGE$i=something`不起作用）。幸运的是，它确实允许在`declare`语句中使用它，因此您可以使用它。此外，当看到`$MESSAGE$i`它时，它将替换它的值，`$MESSAGE`然后是 ; 的值`$i`。为此，您需要使用间接扩展（`${!metavariable}'）。

```
for i in {1..25}; do
    varname="MESSAGE$i"
    declare $varname="$(echo "${!varname}" | tr -d '"')"
done 
```

（请注意，我也使用`tr`了代替`sed`，但这只是我个人的偏好。）

（另外，请注意@Mark Reed 对数组的建议确实是做这种事情的更好方法。）

# python - django-admin.py：找不到命令（bluehost 服务器）

> ID：15671877
> 
> 赞同：2
> 
> 时间：2013-03-28T00:04:11.060
> 
> 标签：python, django, python-2.7, django-admin, bluehost

挣扎了6个多小时后，我决定寻求帮助。

使命：借助 Django
工具创建项目：Windows Vista、Putty SSH
位置：Bluehost (www.bluehost.com) 服务器

**我已经阅读了有关同一问题的这些主题：**

1.  [-bash：django-admin.py：找不到命令（Django 安装）](https://stackoverflow.com/questions/10059644/bash-django-admin-py-command-not-found-django-installation)

2.  [无法使用 django-admin.py](https://stackoverflow.com/questions/11112772/unable-to-use-django-admin-py)

3.  [Django：新建项目时，弹出“django-admin.py: command not found”错误](https://stackoverflow.com/questions/6590521/django-when-creating-a-new-project-django-admin-py-command-not-found-error)

4.  [django-admin.py：找不到命令](https://stackoverflow.com/questions/11791368/django-admin-py-command-not-found)

5.  [找不到命令：django-admin.py](https://stackoverflow.com/questions/8250086/command-not-found-django-admin-py)

6.  [Django-admin.py 不工作（-bash:django-admin.py：找不到命令）](https://stackoverflow.com/questions/2687704/django-admin-py-not-working-bashdjango-admin-py-command-not-found)

我已经按照此处的说明安装了 Python（Bluehost 帮助页面）：
[https ://my.bluehost.com/cgi/help/python-install](https://my.bluehost.com/cgi/help/python-install)

# 安装并检查了 Python 2.7.2，它看起来像：

```
username@domain.com [~/python]# ls
./  ../  Python-2.7.2/  Python-2.7.2.tgz  bin/  include/  lib/  share/ 
```

目录**~/python/Python-2.7.2/**如下所示：

```
username@domain.com [~/python/Python-2.7.2]# ls
./                LICENSE          Objects/  build/          pyconfig.h.in
../               Lib/             PC/       config.log      python*
.hg_archival.txt  Mac/             PCbuild/  config.status*  python-gdb.py
.hgtags           Makefile         Parser/   configure*      setup.py
Demo/             Makefile.pre     Python/   configure.in
Doc/              Makefile.pre.in  README    install-sh*
Grammar/          Misc/            RISCOS/   libpython2.7.a
Include/          Modules/         Tools/    pyconfig.h 
```

和**~/python/bin/**看起来像这样：

```
username@domain.com [~/python/bin]# ls
./   2to3*             idle*   python*         python2.7*         smtpd.py*
../  django-admin.py*  pydoc*  python-config@  python2.7-config* 
```

# 安装并检查了 Django 1.5，它看起来像：

```
username@domain.com [~/Django-1.5]# ls
./   AUTHORS  LICENSE      PKG-INFO    build/   docs/    scripts/   setup.py
../  INSTALL  MANIFEST.in  README.rst  django/  extras/  setup.cfg  tests/ 
```

和**~/Django-1.5/bin/**看起来像这样：

```
username@domain.com [~/Django-1.5/django/bin]# ls
./   __init__.py        django-2to3.py*   profiling/
../  daily_cleanup.py*  django-admin.py*  unique-messages.py* 
```

**问题：当我尝试创建我的项目时，我看到了这个错误：**

```
username@domain.com [~/www/domain/]# django-admin.py startproject mysite
-bash: django-admin.py: command not found 
```

然后我在没有 .py 的情况下再次尝试，我看到了这个错误：

```
username@domain.com [~/www/domain/]# django-admin.py startproject mysite
-bash: django-admin.py: command not found 
```

# ~/.bashrc 看起来像这样：

```
# .bashrc
export PATH=$HOME/.local/bin:$HOME/.local/usr/bin:$PATH

 #User specific aliases and functions

alias mv='mv -i'
alias rm='rm -i'
alias cp='cp -i'

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi
~
~ 
```

# ~/bin/ 看起来像这样：

```
username@domain.com [~/bin]# ls
./  ../ 
```

**所以我读了很多关于*PATH*的内容，但我无法让它工作。我应该放弃吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:10:01.577

将您的 PATH 条目修改`.bashrc`为如下所示：

```
export PATH=$HOME/Django-1.5/bin/:$HOME/.local/bin:$HOME/.local/usr/bin:$PATH 
```

并通过执行以下操作重新加载您`.bashrc`的：

```
# . ~/.bashrc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:10:20.093

将 django 路径添加到您的`$PATH`.

把你`~/.bashrc`改成

```
# .bashrc
export PATH=$HOME/.local/bin:$HOME/.local/usr/bin:$HOME/Django-1.5/bin/:$PATH

 #User specific aliases and functions

alias mv='mv -i'
alias rm='rm -i'
alias cp='cp -i'

# Source global definitions
if [ -f /etc/bashrc ]; then
        . /etc/bashrc
fi
~
~ 
```

# ruby-on-rails - 如何通过 Rails 控制台中的脚本测试我的 SQLite 数据库？

> ID：15671886
> 
> 赞同：1
> 
> 时间：2013-03-28T00:05:06.807
> 
> 标签：ruby-on-rails, ruby, sqlite, scripting

在 Rails 控制台上，我的 Class User 如下所示：

```
irb(main):005:0> User
=> User(id: integer, name: string, created_at: datetime, updated_at: datetime) 
```

我可以使用生成用户实例

```
irb(main):006:0> User.create(:name => "user0") 
```

我想要做的是通过创建若干 X 用户实例来测试我的数据库。我想过编写一个 Ruby 脚本，在其中循环循环 - 类似于（不是真正的 Ruby 代码！）

```
for i in 1..X do
  User.create(:name => "name"+i)
end 
```

但我不知道如何在 Ruby 中访问我的类以及如何“告诉”控制台生成实际对象。

感谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:12:32.230

您在这里有几个选择。最好的选择是学习如何编写单元测试，使用 Rails 的默认[Test::Unit](http://guides.rubyonrails.org/testing.html)或[RSpec](http://rspec.info/)或其他替代方法。这是正确的方法，事实上，Rails 默认情况下都与测试相关联。你有一个`test`目录`rake test`和其他测试任务。如果您使用 Rails 生成器 ( `rails g model Foo`)，它甚至会为您创建测试文件。你只需要填写它们。

如果您还没有准备好学习测试框架，那么您可以将上面的代码放入一个文件中（我们称之为`test_user.rb`）并通过`rails runner`. 这将在执行代码之前引导 Rails 环境，您将可以访问模型：

```
rails runner test_user.rb 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:33:32.130

您似乎正在尝试为您的数据库创建一些种子数据。为什么不直接在 Rails 控制台中运行您的代码？或者您可以创建一个 Rake 任务，然后从那里运行播种。

我还建议使用[Faker](http://faker.rubyforge.org/)，这将为您提供一些真实的数据：

```
require 'faker'

for i in 1..X do
    u = User.new
    u.first_name = Faker::Name.first_name
    u.last_name = Faker::Name.last_name
    u.email = Faker::Internet.email
    u.notes = Faker::Lorem.paragraph
    u.cell_phone = Faker::PhoneNumber.cell_phone
    u.home_phone = Faker::PhoneNumber.phone_number
    u.save
end 
```

# jquery - 用 jQuery 替换字符串

> ID：15671901
> 
> 赞同：1
> 
> 时间：2013-03-28T00:06:31.173
> 
> 标签：jquery, string, replace

使用这个 html：

```
<blockquote class="stat">
  There are &rsquo;paper cups&lsquo; in there.
</blockquote> 
```

我正在使用这个 jQuery：

```
function replaceEntity(element, entity, replacement) {
  $(element).each(function() {
    $(this).html(function(i, html) {
      return html.replace('‘', '<span class="rsquo">&rsquo;</span>').replace('’', '<span class="lsquo">&lsquo;</span>');
    });
  });
} 
```

产生这个：

```
<blockquote class="stat">
  There are <span class="rsquo"><span class="lsquo">‘&lt;/span></span>paper cups<span class="lsquo"><span class="rsquo">’&lt;/span></span> in there.
</blockquote> 
```

但我想要这个：

```
<blockquote class="stat">
  There are <span class="rsquo">&rsquo;</span>paper cups<span class="lsquo">&lsquo;</span> in there.
</blockquote> 
```

我怎样才能

1.  在没有嵌套的情况下获取搜索以扫描两个实体？
2.  停止 jQuery 用 UTF-8 等价物替换 html 实体？

* * *

**编辑**

嵌套错误链接到另一个开发文档中的另一个片段。我最终会删除这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:24:39.373

你可以用这个

```
$('.stat').text('There are <span class="rsquo">&rsquo;</span>paper cups<span class="lsquo">&lsquo;</span> in there.').html(); 
```

但它不会被解释为 Html 元素

# javascript - window.print() 的输出到底是什么？

> ID：15671903
> 
> 赞同：1
> 
> 时间：2013-03-28T00:06:36.547
> 
> 标签：javascript, printing, dom-events

（显然，如果我手边有一台打印机，我会测试一下并找出答案！）

我想知道 Javascript 函数 window.print() 在使用自首次在浏览器窗口中呈现后内容已被编辑的页面上时究竟会打印什么。

我的意思是，例如，如果生成了一个 HTML 列表，然后用户通过单击执行 Javascript 以通过`fadeOut()`或删除元素的按钮“删除”某些项目，则`remove()`打印页面会生成当前状态的副本或原始静态版本？

对不起，如果这措辞不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:09:23.230

`window.print()`将打印当前显示的页面，仅通过应用任何`@media print`规则进行修改，可以在打印预览中看到。实际上，写完之后，只需选择 File => Print Preview，如果您有打印机，您应该会看到将打印的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:09:08.133

这可能取决于浏览器，但我只是在控制台中对其进行了测试，它实际上会按原样打印页面的内容（即它不会重新加载页面来进行打印）。因此，如果您在页面上进行一些 DOM 操作并使用`window.print()`，并且很可能是普通文件 > 打印，则删除的项目将不会显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:10:05.590

它将打开当时页面上当前显示内容的打印预览。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T17:45:05.123

这个问题已经很老了，我可以理解当时工具的可用性......现在，我们可以安装像'foxit'这样的pdf打印机并输出pdf来看看我们得到了什么。

# ruby-on-rails - Capistrano 将已删除的 git 文件发布

> ID：15671906
> 
> 赞同：1
> 
> 时间：2013-03-28T00:06:58.167
> 
> 标签：ruby-on-rails, git, capistrano

我正在使用 Capistrano 进行部署，并使用 git 作为我的版本控制。

当我执行 cap deploy:update 时，它​​会将不再位于 master 中的已删除文件带到 /release/bla 文件夹中。

我不希望删除这些文件，因为我将来可能需要检查它们，而且我不希望 Capistrano 在我的版本中使用它们。

我有哪些选择？

- 根据@LeeHambley 在下面的回复，我对如何`git commit -a`工作存在误解。git commit -a 从当前 master 中删除文件，但不删除它们的历史记录。您可以在下面以@LeeHambley 的详细信息获取他们的历史记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T09:46:08.763

听起来应该将它们添加到您的[`.gitignore`](https://www.kernel.org/pub/software/scm/git/docs/gitignore.html)文件中，以便 Git 不会触及它们，然后您可以轻松地手动上传它们一次，或者在每次部署时对它们进行符号链接。

通常，这可以通过将它们上传到共享中来完成：

```
shared $ tree
.
└── config
   └── database.yml
   └── system
      └── uploads 
```

然后人们编写任务以将它们符号链接到版本中：

```
after 'deploy:symlink' do
  %w{database system}.each do |path|
    run "ln -s #{shared_path + path} #{latest_release + path}"
  end
end 
```

这样，您还可以在 gitignore 中添加以下几行：

```
/config/database.yml
/system/uploads 
```

这意味着它们将不再由 Git 管理，您团队中的每个开发人员都将拥有自己的这些文件的副本，并且必须在服务器上手动创建一次，然后 Git 或 Capistrano 将不会不要再惹他们了。

关于“我将来可能需要检查它们” - 我建议您可以提交`thefile.yaml.example`到存储库，并记录新安装的过程，以使您的开发人员的生活更轻松。

当您将文件添加到 时`.gitignore`，它们也需要从存储库中删除，这不会删除文件的历史记录，但会从当前头中删除。如果它很重要，您总是可以通过`git log ./path/to/any/file/even/if/it/does/not/exist.anymore`. 更明智的做法可能是`git mv`将文件从其现有位置移动到`{oldname}.sample`，因此历史记录将转移到 .sample 文件中。

# php - HTML 表单不发布

> ID：15671908
> 
> 赞同：2
> 
> 时间：2013-03-28T00:07:11.877
> 
> 标签：php, html

我试图发布数据并将其放入 msql 数据库，但是当我放入时 print_r($_POST); 它显示数组为空。我知道它正确地获得了价值，但它没有发布

```
 <!DOCTYPE html>

<html>

<head> <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
       <script src="Scripts/menu.js"></script>
       <script src="Scripts/signup.js"></script>

<link rel='stylesheet' href='CSS/index.css'> 

</head>

<body>

<img src="wc.png" id="wc">

<img src='restaurant.jpg' id="restaurant">
<img src='map.jpg' id="map">
<img src='mail.jpg' id="mail">
<img src='people.jpg' id="people">

<div id="window"> <div id="membersWindow"> <input type="text" id="signupUsername" value="name" placeholder="Username">

<form action="/signup.php" method="post">
<input type="password" id="signupPassword" placeholder="Password">

<input type="text" id="signupEmail" placeholder="Email"> 

<input type="text" id="signupphoneNumber" placeholder="Phone Number">

<iframe src="useragreement.html" id="userAgreement"> </iframe>

<input type="submit"  id="signupSubmit">
</div> 

</form>

<div id="restaurantWindow"> Restaurant Window </div>

<!--- <div id="mapWindow"> <iframe src="https://maps.google.com/?ie=UTF8&amp;ll=29.817178,-95.401291&amp;spn=0.689868,1.256561&amp;t=h&amp;z=10&amp;output=embed"></iframe>
 </div> --->

<div id="mailWindow"> Mail Window </div>

</div>

<div id="banner"> <h1> Wolfeboro Connection </h1> </div>

</body>

</html> 
```

下面是获取帖子的 php 页面，但它显示 array() 为空白。也没有任何错误报告。

```
<?php
error_log(E_ALL);

if( isset($_POST) ) echo "NO POST<BR>";
print_r($_POST);

include("connection.php");

$stmt = $db->stmt_init();

if($stmt->prepare("INSERT INTO users (BusinessName, Password, Phone, Email ) VALUES (?, ?, ?, ?)")) {

$stmt->execute();
$stmt->close();

}

?> 

$(function()
{ 
alert($("#signupUsername").val());

$("#signupSubmit").click(function() {
alert("posting "+$("#signupUsername").val());

$.post( "../signup.php",
  { username: $("#signupUsername").val(),
    password: $("#signupPassword").val(),
    phonenumber: $("#signupphoneNumber").val(),    
    email: $("#signupEmail").val() 
  })
  .done( function(r)
  {
    alert("done");
  })
  .fail( funciton()
  {
    alert("fail");
  });
 });
alert("loaded");

}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T00:08:52.213

您的`<input>`标签需要`name`属性。它将被用作您的索引`$_POST`，因此，此输入：

```
<input name="some" type="text"/> 
```

将产生：

```
$_POST['some'] 
```

[http://www.w3schools.com/php/php_post.asp](http://www.w3schools.com/php/php_post.asp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T00:09:03.210

您必须提供所有`input`sa`name`属性，这会将值添加到数组中：

```
<form action="/signup.php" method="post">
    <input type="password" id="signupPassword" placeholder="Password">

    <input type="text" name="signupEmail" placeholder="Email"> 

    <input type="text" name="signupphoneNumber" placeholder="Phone Number">

    <input type="submit" name="signupSubmit">
</form> 
```

# node.js - 如果 crypto.randomBytes 在密码学上很强大，那么用作 RNG 是否安全（以及如何使用？）

> ID：15671910
> 
> 赞同：0
> 
> 时间：2013-03-28T00:07:19.020
> 
> 标签：node.js, random

因此，在文档中，crypto.randomBytes 被描述为“生成 [ing] 加密强伪随机数据”。我假设它通过 openssl 读取 dev/random。

现在，这是否意味着将随机字节范围缩放到整数范围是安全的，如：[将随机字节缩放到选定的整数范围](https://stackoverflow.com/questions/13699427/scaling-random-bytes-to-selected-integer-range)中所述？

我的理解是，不知何故，只有类似于在三个不同位置读取大气噪声的设备才会真正具有低温强度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:10:37.913

对于实际的随机数，您需要一些硬件设备。

然而，加密的强伪随机数（这个 API 说它保证）应该足以满足大多数目的。特别是，它们无法被预测（这就是密码学强的意思）或与真正随机样本区分开来的样本。

# c# - 如何在sharepoint的子文件夹中获取文件夹名称

> ID：15671914
> 
> 赞同：0
> 
> 时间：2013-03-28T00:08:01.417
> 
> 标签：c#, sharepoint-2010

list.RootFolder.SubFolders[i] 给出文件夹/子文件夹名称任何人都可以帮助我了解如何在 sharepoint 的子文件夹中获取文件夹名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:04:18.043

您有任何示例代码，或者您可以向我们展示迄今为止尝试过的代码示例吗？

如果您可以提供更多信息或告诉我们更多关于您尝试过的内容，甚至发布您遇到特定问题的尝试过的代码，这将有助于回答您的问题。

* * *

但是，根据我认为您的想法，我会尝试提供回应....

需要注意的一件事是它`list.RootFolder.SubFolder[i]`实际上返回了另一个[`SPFolder`](http://msdn.microsoft.com/en-us/library/ms415075.aspx)对象。因此，您可以再次访问该`SubFolders` [属性](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfolder.subfolders%28v=office.14%29.aspx)以获取该子文件夹中的子文件夹。

这将是一个幼稚的例子，但类似于：

```
SPFolder subFolder = list.RootFolder.SubFolder[i];
SPFolderCollection subFoldersOfSubFolder = subFolder.SubFolders;

if (subFoldersOfSubFolder.Count > 0)
{
    for (int j = 0; j < subFoldersOfSubFolder.Count; j++)
    {
        SPFolder specificSubFolder = subFoldersOfSubFolder[j];
        /*
            At this point you could use properties like Name, 
            ServerRelativeUrl or UniqueId of the SubFolder class to get 
            the information you need.
        */
    }
}
else
{
    //If you get to here, it means that the sub-folder had no sub-folders
} 
```

# ios - 尝试在 iOS 上的 Objective C 中 strlen 一个 C 字符串时出现错误的访问异常

> ID：15671918
> 
> 赞同：0
> 
> 时间：2013-03-28T00:08:39.167
> 
> 标签：ios, objective-c, ios6

第二行引发 EXC_BAD_ACCESS 异常。我对 Objective C 或 C 不太熟悉，但我使用的 SDK 需要 C 参数。我在这里做错了什么？

```
unsigned char *header = (unsigned char*)[
    [ticket_design objectForKey:@"header"]
    cStringUsingEncoding:NSStringEncodingConversionAllowLossy
];
int header_length = strlen((const char*)header); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:17:25.350

如果可能的话，我会走标准路线，然后做`header`一个：`NSString`

```
int len = [myString length]; 
```

我认为这可以防止丑陋的崩溃......但它似乎`header`是空的*或不是空终止的。*

# c++ - 我如何正确地利用 pipe、fork 和 execv 来启动辅助程序并与之交互？

> ID：15671919
> 
> 赞同：2
> 
> 时间：2013-03-28T00:08:41.170
> 
> 标签：c++, pipe, fork, exec

编程语言：C和C++混合代码

上下文：有程序“A”从 STDIN 获取用户输入并向 STDOUT 输出响应。'A' 的输入和输出不适合我的预期用户。不幸的是，直接编辑或增加“A”不是一种选择。

方法：我创建了程序'B'，它派生一个子进程来启动'A'并使用管道来拦截和翻译输入/输出（即在通过管道发送到A的STDIN之前获取用户输入并进行调整，并反过来接收'的STDOUT A' 通过管道并为用户调整。）

问题：当尝试接收“A”的输出时，程序似乎在通信中“挂起”。我的研究使我相信这个问题可能是 3 个问题中的 1 个：*为清楚起见，让管道 1 是从父（B）发送到“A”的 STDIN 的数据，管道 2 用于从“的 STDOUT 发送数据” A'给父母。

1.  与管道 2 关联的流末尾没有 EOF。这方面的一个指示性症状是管道 1 按预期运行，并且不受类似问题的影响，可能是因为程序“A”用于`cin`处理输入并查找“\ n'不是EOF。我尝试调整我的程序以逐行读取，但是在执行“A”的第一行之后（除了子进程打印的自我声明行）它停止接收数据。
2.  当子级在尝试读取管道的同时，子级正在写入管道时，存在某种争用。
3.  `fgetc()`可能不会“消耗”管道 2 流缓冲区中的数据，因此子进程会阻塞，直到“接收到”该数据。这可能是问题所在，因为外壳/操作系统（STDIN）完美地接收了“A”（管道 1 数据）的输入，并且在那里缓冲处理得更好/不同，而 STDOUT 接收“A”的输出和将其传递给管道 2，因此所有缓冲责任都落在管道机制上。

下面是程序 B（“test.cpp”）的代码和我用于测试而不是 A（“test2.cpp”）的虚拟模拟程序。

测试.cpp

```
#include <cstdlib>
#include <cstdio>
#include <iostream>
#include <string>
#include <cstring>
#include <sys/types.h>
#include <sys/wait.h>
#include <unistd.h>

using namespace std;

int main()
{
pid_t pid;
int wpipe[2];//write to child pipe
int rpipe[2];//read from child pipe

//initiate pipes here
if(pipe(wpipe))
{
    cout << "write pipe creation failed"<<endl;
    return 1;
}
if(pipe(rpipe))
{
    cout << "read pipe creation failed"<<endl;
    return 1;
}

//fork child here
pid_t procID = vfork();//does not copy address space. better than fork? 

if(procID==0)
{//child
    //close unused pipe ends
    close(wpipe[1]);//read from wpipe
    close(rpipe[0]);//write to rpipe
    //handle stdin & stdout pipes
    dup2(wpipe[0],STDIN_FILENO);//reroute stdin to wpipe[0]
    dup2(rpipe[1],STDOUT_FILENO);//reroute stdout to rpipe[1]
    //close pipes since they are copied??
    close(wpipe[0]);
    close(rpipe[1]);
    //prepare array for execv
    char** args;
    args = new char*[2];
    args[0] = new char[8];
    strcpy(args[0],"test2");
    args[1] = (char*)0;

    cout << "I'm child. Relinquishing procID & memory image to test 2."<<endl;

    int test = execv(args[0],args); 
    if(test==-1)
        cout << "Error: execv failed."<<endl;
    delete[] args[0];
    delete[] args;
    exit(0);
}else if(procID>0)
{//parent
    int state,c;

    //close unused pipe ends
    close(wpipe[0]);//write to wpipe
    close(rpipe[1]);//read from rpipe

    //communicate with child
    FILE *wstream;
    wstream = fdopen(wpipe[1],"w");
    FILE *rstream;
    rstream = fdopen(rpipe[0],"r");

    //read from child
    c = fgetc(rstream);
    while(c!=EOF)
    {
        putchar(c);
        c = fgetc(rstream);
    }

    fprintf(wstream,"test1\n");

            c = fgetc(rstream);
    while(c!=EOF)
    {
        putchar(c);
        c = fgetc(rstream);
    }

    fprintf(wstream,"test2\n");

            c = fgetc(rstream);
    while(c!=EOF)
    {
        putchar(c);
        c = fgetc(rstream);
    }

    fclose(wstream);
    fclose(rstream);

    waitpid(procID,&state,0);
    cout << "I'm parent."<<endl;
}
else
{//failure to fork
    cout << "Fork failed" << endl;
    return 1;
}

return 0;
} 
```

测试2.cpp

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
    string tmp = "";
    cout << "started" << endl;
    while(tmp=="")
        cin >> tmp;
    cout << tmp << endl;
    tmp="";
    while(tmp=="")
        cin >> tmp;
    cin >> tmp;
    cout << tmp << endl;

    cout << "exiting" << endl;

return 0;   
} 
```

对于冗长的问题和单一的代码，我提前道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T03:52:36.557

您似乎正在使用三种不同类型的 io。

dup2 是 2 级 io，对原始的低级文件描述符进行操作；fgetc 是对缓冲的 c 文件进行操作的 3 级 io；iostream 是高于 FILE 的 C++ 东西。

我会建议：

*   坚持一种范式，坦率地说，使用“c”可能是最简单的，因为有[很多](http://www.tldp.org/LDP/lpg/node11.html)可用的[例子](https://stackoverflow.com/questions/4812891/fork-and-pipes-in-c)，
*   使用像 Perl 或 Python 这样的脚本语言：他们非常擅长这种事情。

或者您可以看到[其他提出相同问题的人](https://stackoverflow.com/questions/7935177/c-dup2-pipe-and-fork-not-working-as-expected)的一些答案。

# php - 使用 PHP 存储和显示来自 MySQL 的图像

> ID：15671920
> 
> 赞同：3
> 
> 时间：2013-03-28T00:08:43.937
> 
> 标签：php, html, mysql

如何通过从 HTML 表单发送图像来使用 PHP 将图像文件存储在 MySQL 中？我只知道其中的 MySQL 和 HTML 部分。

这是 HTML 表单：

```
<form method="post" enctype="multipart/form-data" action="insert_image.php">
    <input type="file" name="image" />
    <input type="submit" />
</form> 
```

我知道如何连接到数据库并存储正常信息，但是如何正确解析数据以将图像文件存储到 MySQL BLOB 字段？还有我如何从 MySQL 中显示它？

ps：我使用 PDO 进行数据库连接。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-28T00:34:57.370

```
<?php

# getting the uploaded image and storing it
if ( isset($_FILES['image']['tmp_name']) ) {
    // open mysqli db connection
    $mysqli = new mysqli($mysqliHost,$mysqliUsername,$mysqliPassword,$mysqliDatabase);

    // get image data
    $binary = file_get_contents($_FILES['image']['tmp_name']);

    // get mime type
    $finfo = new finfo(FILEINFO_MIME);
    $type = $finfo->file($_FILES['image']['tmp_name']);
    $mime = substr($type, 0, strpos($type, ';'));

    $query = "INSERT INTO `images` 
                    (`data`,`mime`,`name`) 
    VALUES('".$mysqli->real_escape_string($binary)."',
            '".$mysqli->real_escape_string($mime)."',
            '".$mysqli->real_escape_string($_FILES['image']['name'])."')";
    $mysqli->query($query);
}

# viewing the uploaded image
if ( isset($_GET['imageName']) ) {
    // open mysqli db connection
    $mysqli = new mysqli($mysqliHost,$mysqliUsername,$mysqliPassword,$mysqliDatabase);

    // query for the image in the db
    $query = "SELECT `data`,`mime` FROM `images` WHERE `name`='".$mysqli->real_escape_string($_GET['imageName'])."'";
    $result = $mysql->query($query);

    if ( $result->num_rows ) {
        // grab the query result from the db select
        $assoc = $result->fetch_assoc();

        // let the client browser know what type of data you're sending
        header('Content-type: '.$assoc['mime']);

        // dump the binary data to the browser
        echo $assoc['data'];
        exit;
    } else {
        header('HTTP/1.1 404 Not Found');
        exit;
    }
}

?> 
```

我的脚本不考虑具有相同名称的图像，您可以将 $_FILES['image']['name'] 的部分换成另一个具有/创建唯一名称的变量，或使用插入的ID（PRIMARY AUTO_INCREMENT MySQL 键）。

这是一个示例表架构：

```
CREATE TABLE `images` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `data` longblob NOT NULL,
  `mime` varchar(50) NOT NULL,
  `name` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T00:10:21.440

对于您存储在数据库中的任何内容，它都是相同的：获取您想要存储的字节并在将它们添加到查询字符串时对其进行转义。

这就像：

```
$image = file_get_contents($image_file_name);
$query = "INSERT INTO img SET image = \"".mysqli_real_escape_string($image)."\""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-28T00:12:34.930

实际上，最佳实践表明您需要将图像存储在某个文件夹中并将路径或名称保存在数据库中。

这可以帮助你： [http ://www.htmlgoodies.com/beyond/php/article.php/3877766/Web-Developer-How-To-Upload-Images-Using-PHP.htm](http://www.htmlgoodies.com/beyond/php/article.php/3877766/Web-Developer-How-To-Upload-Images-Using-PHP.htm)

[从 PHP URL 保存图像](https://stackoverflow.com/questions/724391/saving-image-from-php-url-using-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T00:12:19.287

您实际上可以使用 获取上传图像文件的原始内容，对其进行`file_get_contents`转义，然后将其作为 blob 存储在数据库中。要显示它，您实际上可以在设置适当的内容类型后回显 blob。

但是，我不会那样做。相反，我会将图像存储在磁盘上并将图像文件的位置存储在 MySQL 中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-28T00:18:49.473

就我个人而言，当我创建一个需要这样的站点（[这个站点](http://www.playerrank.co.uk)）时，我将文件存储在文件系统中并将目录添加到数据库中，确保每个 jpg 都有一个唯一的文件名。

# batch-file - 随机选项批处理文件

> ID：15671927
> 
> 赞同：0
> 
> 时间：2013-03-28T00:09:10.657
> 
> 标签：batch-file

是否有可能使用此代码[http://pastebin.com/wN6y63PH](http://pastebin.com/wN6y63PH)选择 3 个部分的随机选项 ？：：responce1：responce2：responce3

更多信息：

我希望程序随机选择其中一个选项，以便每次都不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:46:39.773

```
set /a "rnd=%RANDOM% * 3 / 32768 + 1"
goto responce%rnd% 
```

这是有关在 Windows 批处理中[生成随机数](https://stackoverflow.com/a/5777608/1683264)的更多信息。

# javascript - Lightbox / Jquery Moleskine Notebook，javascript相互干扰

> ID：15671930
> 
> 赞同：0
> 
> 时间：2013-03-28T00:09:20.167
> 
> 标签：javascript, jquery, lightbox

我想知道是否有人有任何想法或可以帮助我解决一个小问题。（头部代码如下）

我正在使用 Moleskine Notebook Jquery（网站笔记本），我正在为一家日本公司制作漫画类型的漫画。他们希望页面是图像（这没关系），但他们希望单击具有灯箱样式（弹出式画廊类型样式）的图像部分。

当我合并这两个代码时，javascript必须相互干扰，它不起作用。也许是因为图像在moleskine笔记本的div中？当我单击链接到灯箱 div 的图像时，它不会打开灯箱，它只是在新页面中打开图像。

我还尝试在头代码中以不同的方式放置代码。底部的灯箱和顶部的脚本。这么多不同的方式，总是互相干扰。

有人对如何使这项工作有任何想法吗？

干杯杰斯

```
 <script>
    jQuery.noConflict();
        $(document).ready(function(){
            $(".group1").colorbox({rel:'group1'});
            $(".group2").colorbox({rel:'group2', transition:"fade"});
            $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});
            $(".group4").colorbox({rel:'group4', slideshow:true});
            $(".ajax").colorbox();
            $(".youtube").colorbox({iframe:true, innerWidth:425, innerHeight:344});
            $(".vimeo").colorbox({iframe:true, innerWidth:500, innerHeight:409});
            $(".iframe").colorbox({iframe:true, width:"80%", height:"80%"});
            $(".inline").colorbox({inline:true, width:"50%"});
            $(".callbacks").colorbox({
                onOpen:function(){ alert('onOpen: colorbox is about to open'); },
                onLoad:function(){ alert('onLoad: colorbox has started to load the targeted content'); },
                onComplete:function(){ alert('onComplete: colorbox has displayed the loaded content'); },
                onCleanup:function(){ alert('onCleanup: colorbox has begun the close process'); },
                onClosed:function(){ alert('onClosed: colorbox has completely closed'); }
            });

            $('.non-retina').colorbox({rel:'group5', transition:'none'})
            $('.retina').colorbox({rel:'group5', transition:'none', retinaImage:true, retinaUrl:true});

            //Example of preserving a JavaScript event for inline calls.
            $("#click").click(function(){ 
                $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                return false;
            });
        });
    </script>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.4.4.min.js"></script>
    <script src="booklet/jquery.easing.1.3.js" type="text/javascript"></script>
    <script src="booklet/jquery.booklet.1.1.0.min.js" type="text/javascript"></script>

    <link href="booklet/jquery.booklet.1.1.0.css" type="text/css" rel="stylesheet" media="screen" />
    <link rel="stylesheet" href="css/style.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="colorbox.css" />

    <script src="cufon/cufon-yui.js" type="text/javascript"></script>
    <script src="cufon/ChunkFive_400.font.js" type="text/javascript"></script>
    <script src="cufon/Note_this_400.font.js" type="text/javascript"></script>
    <script type="text/javascript">
        Cufon.replace('h1,p,.b-counter');
        Cufon.replace('.book_wrapper a', {hover:true});
        Cufon.replace('.title', {textShadow: '1px 1px #C59471', fontFamily:'ChunkFive'});
        Cufon.replace('.reference a', {textShadow: '1px 1px #C59471', fontFamily:'ChunkFive'});
        Cufon.replace('.loading', {textShadow: '1px 1px #000', fontFamily:'ChunkFive'});
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T06:08:48.480

在加载 jQuery 之前，您还没有在页面和调用颜色框中包含 colorbox.js 文件。它不适用于仅使用颜色框 css。另外，为什么会有这么旧的 jQuery 版本？当前版本是 1.9.10

# octave - 从八度加载包含矩阵的文件

> ID：15671932
> 
> 赞同：1
> 
> 时间：2013-03-28T00:09:22.100
> 
> 标签：octave

我有一个执行迭代改进过程的 C++ 程序。我记录了每一步的错误，我想将该数据导入八度音阶进行绘图。我的程序将结果作为矩阵写入名为“err.m”的文件中：

```
B = [
0 0.0566002;
1 0.0510102;
2 0.0510102;
3 0.0454972;
4 0.0418604;
5 0.0415802;
6 0.036775;
7 0.0298324;
8 0.0298324;
9 0.0298324;
] 
```

（实际文件当然要大得多。）只要我启动八度并输入

```
load 'err.m' 
```

我得到错误

```
error: load: err.m: inconsistent number of columns near line 2
error: load: unable to extract matrix size from file `err.m' 
```

但是，当我将文件的内容直接粘贴到八度时，一切正常（除非矩阵有很多行）。我用谷歌搜索了这个错误，但我没有找到解决我的问题的方法，尽管这个问题似乎很常见。

有谁知道我如何加载文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:30:37.193

错误。

```
0 0.0566002
1 0.0510102
2 0.0510102
3 0.0454972
4 0.0418604
5 0.0415802
6 0.036775
7 0.0298324
8 0.0298324
9 0.0298324 
```

错误1.m：

```
B = [
0 0.0566002;
1 0.0510102;
2 0.0510102;
3 0.0454972;
4 0.0418604;
5 0.0415802;
6 0.036775;
7 0.0298324;
8 0.0298324;
9 0.0298324;
]; 
```

在八度：

```
octave:1> load 'err.m'
octave:2> err
err =

   0.00000   0.05660
   1.00000   0.05101
   2.00000   0.05101
   3.00000   0.04550
   4.00000   0.04186
   5.00000   0.04158
   6.00000   0.03678
   7.00000   0.02983
   8.00000   0.02983
   9.00000   0.02983

octave:3> err1
B =

   0.00000   0.05660
   1.00000   0.05101
   2.00000   0.05101
   3.00000   0.04550
   4.00000   0.04186
   5.00000   0.04158
   6.00000   0.03678
   7.00000   0.02983
   8.00000   0.02983
   9.00000   0.02983

octave:4> run 'err1.m'
B =

   0.00000   0.05660
   1.00000   0.05101
   2.00000   0.05101
   3.00000   0.04550
   4.00000   0.04186
   5.00000   0.04158
   6.00000   0.03678
   7.00000   0.02983
   8.00000   0.02983
   9.00000   0.02983

octave:5> B=load('err.m')
B =

   0.00000   0.05660
   1.00000   0.05101
   2.00000   0.05101
   3.00000   0.04550
   4.00000   0.04186
   5.00000   0.04158
   6.00000   0.03678
   7.00000   0.02983
   8.00000   0.02983
   9.00000   0.02983 
```

# google-maps - 谷歌地图信息窗口移动整个地图位置

> ID：15671935
> 
> 赞同：1
> 
> 时间：2013-03-28T00:09:39.233
> 
> 标签：google-maps, google-maps-api-3, infowindow

我在使用谷歌地图 API 的页面上对这个问题感到愤怒。当您单击标记（带有图标的白色）时，信息窗口将正确显示。但是，当您单击蓝色集群时，信息窗口将显示，但它会将地图位置移动到非洲附近的某处海洋。看看这个网站： http: [//pec.solarismedia.net/map.html](http://pec.solarismedia.net/map.html)

有没有人可以解释为什么会发生这种情况以及如何避免它？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:54:33.037

当您创建 时`InfoBox`，您并没有给它一个`position`应该包含`LatLng`. 我在您的代码中看到两个地方，您在其中设置了一个`infoboxOptions`传递给的对象`new InfoBox()`，但都没有`position`属性。

因为缺少这个，所以`InfoBox`默认为 (0,0) 的 LatLng。请参阅以下代码`gmap.infobox.js`：

this.position_ = opt_opts.position || 新的 google.maps.LatLng(0, 0);

所以你需要在`position`你的`infoboxOptions`. 对于第一个，碰巧有一个`myLatLng`变量在该代码上方初始化并用于标记。如果您想使用相同的 LatLng，则可以添加以下内容：

```
var infoboxOptions = {
    position: myLatLng,
    // and your other properties here
}; 
```

对于第二个（集群），看起来你有一个`cluster`对象的引用，所以你可以调用`cluster.getCenter()`来获取它的 LatLng：

```
var infoboxOptions = {
    position: cluster.getCenter(),
    // and your other properties here
}; 
```

# java - 暴露同一模型的不同“视图”

> ID：15671937
> 
> 赞同：0
> 
> 时间：2013-03-28T00:10:01.017
> 
> 标签：java, jakarta-ee

您经常创建 Web 服务并使用许多不同的技术。例如， som 可能会使用来自其他框架（如 Jackson）的一些注释来注释 pojo。但是，我想要模型的不同视图/版本。我并不总是想公开所有内容，或者其他时候我需要在同一字段上进行其他注释。我知道杰克逊有意见，但杰克逊只是一个例子。

是否有任何模式。或者，当我创建一个“真实”模型的 Car 类，然后创建 CarExport、IndexedCar 等使用某些汽车模型数据但具有不同注释并且可能还有其他属性时，我是否在做正确的事情？

有时模型需要另一种结构/组织来表达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:12:26.130

听起来您需要查看[构建器](http://en.wikipedia.org/wiki/Builder_pattern)或[复合模式](http://en.wikipedia.org/wiki/Composite_pattern)：

> 目的是抽象对象构造的步骤，以便这些步骤的不同实现可以构造对象的不同表示。通常，构建器模式用于根据复合模式构建产品。

# c++ - 使用 typedef 错误解析函数名称的全局命名空间说明符？

> ID：15671945
> 
> 赞同：2
> 
> 时间：2013-03-28T00:10:29.967
> 
> 标签：c++, clang, language-lawyer

我遇到了一个奇怪的问题，可能是也可能不是错误。

以下代码段无法在 clang 4.2 上编译，但在 gcc 上编译，因为它将“baz::test”解析为返回类型。

```
typedef int baz;

namespace foo { class bar; }
baz test(foo::bar &);

namespace foo {
    class bar {
    private:
       int f;
       friend baz ::test(bar &);
    };
} 
```

`friend int ::test(bar &)`编译，就像`friend baz (::test)(bar &)`.

我已经浏览了一些标准，以尝试查看 clang 的行为是否正确，但没有获得太多洞察力。这是clang中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:17:46.463

标准确实这么说

```
friend baz ::test(bar &); 
```

和

```
friend baz::test(bar &); 
```

是等价的。

但是，我认为它们很可能都应该编译。

# javascript - 为什么调用传单的 setZoom 两次导致第二次被忽略？

> ID：15671949
> 
> 赞同：6
> 
> 时间：2013-03-28T00:10:39.927
> 
> 标签：javascript, leaflet

要重现此问题，您可以访问[http://leafletjs.com/](http://leafletjs.com/)并在 javascript 控制台中编写以下内容：

```
> map.getZoom()
15
> map.setZoom(10);map.setZoom(1);
Object
> map.getZoom()
10 
```

我期待最终的 getZoom 返回`1`。为什么会这样？该问题可能与缩放动画有关。如果在动画结束之前调用了 setZoom，它将被忽略。

我正在将传单与 emberjs 集成，并希望允许通过外部更改进行缩放更改。如果用户快速更改缩放，则效果不理想。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-28T14:42:58.713

[`L.Map.setZoom`](https://github.com/Leaflet/Leaflet/blob/master/src/map/Map.js#L52)叫[`L.Map.setView`](https://github.com/Leaflet/Leaflet/blob/master/src/map/anim/Map.PanAnimation.js#L23)那个叫[`L.Map._animateZoomIfClose`](https://github.com/Leaflet/Leaflet/blob/master/src/map/anim/Map.ZoomAnimation.js#L29)。如果`map._animatingZoom`为真，则任何缩放都将停止。`map._animatingZoom`像寻找缩放动画一样工作：

1.  检查[`L.Map._animateZoomIfClose`](https://github.com/Leaflet/Leaflet/blob/master/src/map/anim/Map.ZoomAnimation.js#L29)是否`true`停止缩放，否则调用[`L.Map._animateZoom`](https://github.com/Leaflet/Leaflet/blob/master/src/map/anim/Map.ZoomAnimation.js#L50)。
2.  设置为`true`at[`L.Map._animateZoom`](https://github.com/Leaflet/Leaflet/blob/master/src/map/anim/Map.ZoomAnimation.js#L50)并开始 css 转换。
3.  在 css 过渡结束时设置为`false`at 。[`L.Map._onZoomTransitionEnd`](https://github.com/Leaflet/Leaflet/blob/master/src/map/anim/Map.ZoomAnimation.js#L74)

为什么是原样？我认为因为很难打破 css 过渡工作。

因此，如果您将禁用任何 css 转换和转换，您的代码必须正常工作。您还可以添加自己的扩展：如果`map._animatingZoom === true`然后将您的操作放入数组，则在`map._catchTransitionEnd`调用时处理此并将您的操作从数组和处理中转移：

```
if (L.DomUtil.TRANSITION) {
    L.Map.addInitHook(function () {
        L.DomEvent.on(this._mapPane, L.DomUtil.TRANSITION_END, function () {
            var zoom = this._zoomActions.shift();
            if (zoom !== undefined) {
                this.setZoom(zoom);
            }
        }, this);
    });
}

L.Map.include(!L.DomUtil.TRANSITION ? {} : {
    _zoomActions: [],
    queueZoom: function (zoom) {
        if (map._animatingZoom) {
            this._zoomActions.push(zoom);
        } else {
            this.setZoom(zoom);
        }
    }
}); 
```

# string - 矩阵中的字符串操作：一个维度问题

> ID：15671950
> 
> 赞同：0
> 
> 时间：2013-03-28T00:10:41.147
> 
> 标签：string, r, matrix, multidimensional-array, exponentiation

我正在尝试在 R 中定义一个操作字符串矩阵的函数。

**{+,*} 矩阵乘法**

两个n 维方阵**A**和**B的 {+,*}-乘积是由以下元素定义的矩阵****C**： **C** [i,j] = Sum [k=1,...,n] **A** [i,k] * **B** [k, Ĵ]。

例如，考虑矩阵 `M <- matrix(c(a,b,0,0,c,d,0,0,e),3,3)`。那么 M 乘以 M 就是 `M <- matrix(c(a^2,a*b+b*c,b*d,0,c^2,c*d+d*e,0,0,e^2),3,3)`。

**{c(,),paste0(,)} 矩阵乘法**

我想实现的这个操作的规则与前面所说的乘法相同，其中的基本突变是总和应该是一个连接，而乘积应该是一个粘贴。换句话说，我们在前面的公式中找到`a+b`，现在输出应该是“c(a,b)”，当我们找到 时`a*b`，现在我们应该将其读为`paste0(a,b)`。

一些通常的属性必须得到尊重，即分配属性和零元素属性。因此，如果`a <- c("q",0,"w")`和`b <- c("e")`然后`a*b <- c("qe",0,"we")`（我们应该随意忘记 0 元素，将其删除，因为它不会影响计算。

此外，我们正在乘以等维矩阵，因此每个元素 **C** [i,j] = Sum [k=1,...,n] **A** [i,k] * **B** [k,j]现在被读作 `c("A[i,1]B[1,j]",...,"A[i,n]B[n,j]")`。

为了简单起见，让我们认为**B**始终是一个*简单*的矩阵，这意味着它的每个元素都是原子字符串，而不是字符串的串联（泛化是后续步骤）。

让我们举个例子。让 `A <- matrix(c("a","b",0,0,"c","d",0,0,"e"),3,3)`，然后`mult(A,A) = matrix(c("aa",c("ab","bc"),"bd",0,"cc",c("cd","de"),0,0,"ee"),3,3)` 和`mult(mult(A,A),A) = matrix(c("aaa",c("aab","abc","bcc"),c("abd","bcd","bde"),0,"ccc",c("ccd","cde","dee"),0,0,"eee"),3,3)`。

**部分（不工作）实施**

考虑作为输入一对 nxn 矩阵**M** , **N**，无论是 0 还是字符串数组 c( *s* [1] , *s* [2] ,...) 作为**i,j**个元素。作为输出，我想要一个矩阵**MN = M x N**，其中乘法的定义与符号乘法类似：

****如果M** [i,则]**MN** [i,j] = 0 。或**N** [.,j]为 0 **MN** [i,j] = paste( **M** [i,.] , **N** [.,j] ) 否则（使用 的*分配*性质） **[**[**[**[**[*`paste()`*]**]**]**]**]****

 *******我给出了基本*行/列粘贴*函数的（错误，未正确检查零）定义为

```
MijPaste <- function(Row,Col){
  if(Col[1]=="0"){
    Mij <- 0
  } else if(Row[1]=="0"){
      Mij <- 0
    } else
      Mij <- paste(Row,Col,sep="")
  return(Mij)
} 
```

我无法从这一步转到乘法函数的正确定义，因为我想在矩阵中插入的元素 Mij 的维度不正确。因此我得到一个`number of items to replace is not a multiple of replacement length`错误。我目前的实现是：

```
# define the dimension of the matrix, here for example 3
dim <- 3
# define the Multiplication function as an iteration of the MijPaste function
Mult <- function(M1,M2){
    #allocate a matrix of dimension nxn
    M <-  matrix(0,dim,dim)
    #for each element i,j define it as the MijPaste of row i column j
      for(i in 1:dim){
      for(j in 1:dim){
        stringi <- M1[i,]
        stringj <- M2[,j]
        M[i,j] <- MijPaste(stringi,stringj)
      }
    }
  return(M)
} 
```

代码不起作用。我可能可以将矩阵更改为多维数组，但我希望输出可用作进一步乘法的矩阵（例如定义（MxN）xC）。

我能怎么做？

谢谢！

PS您可以使用一个简单的示例矩阵来测试代码

```
Matr <- matrix(c("11","12","13","21","22","23","31","32","33"),dim,dim) 
```

并运行

```
Mult(Matr,Matr) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:30:01.123

```
pmat <- function(m1, m2) matrix(
          ifelse(m1=="0"|m2=="0", "0", paste0(m1,m2) ) ,
                            dim(m1)[1], dim(m1)[2] )

> pmat(Matr, Matr)
     [,1]   [,2]   [,3]  
[1,] "1111" "2121" "3131"
[2,] "1212" "2222" "3232"
[3,] "1313" "2323" "3333" 
```

我不知道你是否准备好进行维度乘法。如果您希望每个索引有 N 个元素，那么您需要该`kronecker`函数，这将需要一个稍微不同的函数：

# 插入：

也许您应该发布一个更好的测试用例？那么你可以更明确地说明你想要什么。这显示了`kronecker`-applied`pmat`重新排列为数组如何将 MN[1,1] 作为第一个矩阵的第一列：

```
 M <- matrix(c("a1","b1","c1","0"),2,2)
 N <- matrix(c("c2","d2","e2","f2"),2,2)
 MN <- array( kmat,c( 2,2,4))
 MN[ , 1,1]
#[1] "a1c2" "a1d2" 
```

* * *

```
> pmat <- function(m1, m2) matrix( ifelse(m1=="0"|m2=="0", "0", paste0(m1,m2) )  )
> kronecker(Matr, Matr, pmat)
      [,1]   [,2]   [,3]   [,4]   [,5]   [,6]   [,7]   [,8]   [,9]  
 [1,] "1111" "1121" "1131" "2111" "2121" "2131" "3111" "3121" "3131"
 [2,] "1112" "1122" "1132" "2112" "2122" "2132" "3112" "3122" "3132"
 [3,] "1113" "1123" "1133" "2113" "2123" "2133" "3113" "3123" "3133"
 [4,] "1211" "1221" "1231" "2211" "2221" "2231" "3211" "3221" "3231"
 [5,] "1212" "1222" "1232" "2212" "2222" "2232" "3212" "3222" "3232"
 [6,] "1213" "1223" "1233" "2213" "2223" "2233" "3213" "3223" "3233"
 [7,] "1311" "1321" "1331" "2311" "2321" "2331" "3311" "3321" "3331"
 [8,] "1312" "1322" "1332" "2312" "2322" "2332" "3312" "3322" "3332"
 [9,] "1313" "1323" "1333" "2313" "2323" "2333" "3313" "3323" "3333" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:38:25.887

如果您手动设置尺寸，您可以`paste`直接使用矩阵：

```
MN <- matrix(paste(M, N, sep=""), nrow=nrow(M), ncol=ncol(M)) 
```

现在过滤零并替换：

```
MN[(M==0) | (N==0)] <- 0 
```

编辑：上面显示的逐点乘积不是 OP 想要的。

正如我在评论中所说，您可以修复您的功能添加`collapse=""`到您的第一个功能。我得到以下结果：

```
> M <- matrix(LETTERS[1:9],3,3)
> N <- matrix(LETTERS[10:18],3,3)

> M
     [,1] [,2] [,3]
[1,] "A"  "D"  "G" 
[2,] "B"  "E"  "H" 
[3,] "C"  "F"  "I" 
> N
     [,1] [,2] [,3]
[1,] "J"  "M"  "P" 
[2,] "K"  "N"  "Q" 
[3,] "L"  "O"  "R" 

> Mult(M,N)
     [,1]     [,2]     [,3]    
[1,] "AJDKGL" "AMDNGO" "APDQGR"
[2,] "BJEKHL" "BMENHO" "BPEQHR"
[3,] "CJFKIL" "CMFNIO" "CPFQIR" 
```

如您所见，您的函数在粘贴*之前*`M`匹配矩阵中的元素。`N`

 *如果要将每个矩阵的元素保持在一起，可以使用以下两行：

```
> coll <- function(x)paste(x,collapse="")
> outer(apply(M,1,coll),apply(N,2,coll),paste0)
     [,1]     [,2]     [,3]    
[1,] "ADGJKL" "ADGMNO" "ADGPQR"
[2,] "BEHJKL" "BEHMNO" "BEHPQR"
[3,] "CFIJKL" "CFIMNO" "CFIPQR" 
```

当然，您必须在此之后手动插入零。********

# java - 在java中使用滚动条改变颜色

> ID：15671952
> 
> 赞同：1
> 
> 时间：2013-03-28T00:10:49.430
> 
> 标签：java, scrollbar, adjustment

我想根据 3 滚动条中选择的值更改框架的背景颜色？但它没有发生在这里是我的代码。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class changeColor extends JFrame implements AdjustmentListener
{
    JScrollBar red;
    JScrollBar green;
    JScrollBar blue;

    changeColor()
    {
        super("SCROLLBAR DEMO");
        setLayout(new FlowLayout());
        setVisible(true);
        setSize(300,300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        red=new JScrollBar(JScrollBar.HORIZONTAL);
        green=new JScrollBar(JScrollBar.HORIZONTAL);
        blue=new JScrollBar(JScrollBar.HORIZONTAL);
        add(red);
        add(green);
        add(blue);
        red.addAdjustmentListener(this);
        green.addAdjustmentListener(this);
        blue.addAdjustmentListener(this);   
    }

    public void adjustmentValueChanged(AdjustmentEvent ae)
    {
        int cr=0;
        int cg=0;
        int cb=0;
        if(ae.getSource()==red)
            cr=ae.getValue();
        else if(ae.getSource()==green)
            cg=ae.getValue();
        else if(ae.getSource()==blue)
            cb=ae.getValue();

        setBackground(new Color(cr,cg,cb)); 
    }

    public static void main(String args[])
    {
        changeColor obj=new changeColor();  
    }
} 
```

问题是背景颜色没有改变。我想知道是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-03T17:56:29.923

这是一个很好的解决方案。首先，您**`JFrame`**使用它的常规方法进行创建，例如`setDefaultCloseOperation()`, `setBounds()`, `getContentPane()`。然后从您的类中创建一个对象，然后使用它在整个程序中调用所有其他方法，在这种情况下，我创建了名为`app`. 您必须记住的一件事是不要忘记使用`AdjustmentEvent e`而不是`ActionListener e`:)。

此外，所有颜色的更改都必须与 this `panel.setBackground(new Color(sbar1.getValue(),sbar2.getValue(), sbar3.getValue()`in一起进行`AdjustmentEvent`，因为一旦`Scrollbar`更改，它的值就会通过`getValue()`方法获取并添加到`new Color()`方法中的`setBackground()`方法中。

```
 import javax.swing.*;  
    import java.awt.event.*;
    import java.awt.*;

    public class Main implements AdjustmentListener {

        private static void createAndShowGUI() {
            // make frame..
          JFrame frame = new JFrame("JScrollBar");
          frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
          frame.setBounds(20,30,200,250);
          frame.getContentPane().setLayout(null);
          Main app = new Main();
          app.sbar1 = new JScrollBar(java.awt.Adjustable.VERTICAL, 127, 1,0,255);
          app.sbar1.setBounds(10,20, 10, 200);
          app.sbar1.setBackground(Color.red);
          app.sbar1.addAdjustmentListener(app);
          frame.getContentPane().add(app.sbar1);
          app.sbar2 = new JScrollBar(java.awt.Adjustable.VERTICAL, 127, 1,0,255);
          app.sbar2.setBounds(30,20, 10, 200);
          app.sbar2.setBackground(Color.green);
          app.sbar2.addAdjustmentListener(app);
          frame.getContentPane().add(app.sbar2);
          app.sbar3 = new JScrollBar(java.awt.Adjustable.VERTICAL, 127, 1,0,255);
          app.sbar3.setBounds(50,20, 10, 200);
          app.sbar3.setBackground(Color.blue);
          app.sbar3.addAdjustmentListener(app);
          frame.getContentPane().add(app.sbar3);

          app.panel = new JPanel();
          app.panel.setBounds(80,20,50,200);
          app.panel.setBackground(new Color(0,0,0));
          frame.getContentPane().add(app.panel);

          frame.setVisible(true); 
      }

      public void adjustmentValueChanged(AdjustmentEvent e)
      {
          panel.setBackground(new Color(sbar1.getValue(),sbar2.getValue(), sbar3.getValue()));
      }

      public static void main(String[] args) {
        // start off..
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
      }

      // application object fields    
      JScrollBar sbar1;
      JScrollBar sbar2;
      JScrollBar sbar3;
      JPanel panel;
} 
```

我希望这对你有很大帮助。！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:38:48.327

我在您发布代码时运行了您的代码，它有点工作，背景颜色确实发生了变化。

问题 1：cr、cg 和 cb 需要是类变量。这样，您选择的颜色将混合在一起。它的书写方式，一次只会改变一种颜色。

问题 2：要获得完整的颜色范围，您需要更改选择，使范围从 0 到 255。使用 JScrollBar 方法，我只能看到 0 到 90 之间的值。这可以很容易地用移动到 JSlider

问题 3：您必须在 JFrame 的内容窗格上设置颜色。（见评论）

注释：Java 约定是用大写字母命名类，仅供参考。

这是可能会产生您正在寻找的结果的更改：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

class changeColor extends JFrame implements AdjustmentListener
{
    JScrollBar red;
    JScrollBar green;
    JScrollBar blue;
    int cr=0;
    int cg=0;
    int cb=0;

    changeColor()
    {
        super("SCROLLBAR DEMO");
        setLayout(new FlowLayout());
        setVisible(true);
        setSize(300,300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        red=new JScrollBar(JScrollBar.HORIZONTAL);
        green=new JScrollBar(JScrollBar.HORIZONTAL);
        blue=new JScrollBar(JScrollBar.HORIZONTAL);
        add(red);
        add(green);
        add(blue);
        red.addAdjustmentListener(this);
        green.addAdjustmentListener(this);
        blue.addAdjustmentListener(this);   
    }

    public void adjustmentValueChanged(AdjustmentEvent ae)
    {

        if(ae.getSource()==red)
            cr=ae.getValue();
        else if(ae.getSource()==green)
            cg=ae.getValue();
        else if(ae.getSource()==blue)
            cb=ae.getValue();
        System.out.println(cr + ":" + cg + ":" + cb);

        // add color to content pane
        this.getContentPane().setBackground(new Color(cr,cg,cb)); 
    }

    public static void main(String args[])
    {
        changeColor obj=new changeColor();  
    }
} 
```

# c++ - 了解使用 boost::asio 和 boost::thread 时的内存泄漏

> ID：15671954
> 
> 赞同：4
> 
> 时间：2013-03-28T00:10:54.283
> 
> 标签：c++, multithreading, boost, memory-leaks, boost-asio

我正在研究一组使用 boost::asio 来执行后台任务的类。在实践中，程序会连续运行，但我在测试期间添加了信号处理程序进行清理。

但是，当在收到 SIGINT 后监视代码中的函数调用时，我发现我的对象的私有实现没有按预期被破坏 - 内存泄漏。它由 boost::shared_ptr 管理。私有实现类如下所示。

```
class TestImpl: public boost::enable_shared_from_this<TestImpl>, boost::noncopyable {
    TestImpl(): update_timer(io_svc), signals(io_svc, SIGINT, SIGTERM) {
        signals.async_wait(boost::bind(&boost::asio::io_service::stop, &io_svc)); 
    };

public:
    virtual ~TestImpl() { 
        std::cout << "Destroyed." << std::endl;
    };

    static boost::shared_ptr<TestImpl> create() {
        boost::shared_ptr<TestImpl> ptr(new TestImpl);
        ptr->start();
        return ptr;
    }

    void start() {
        update_timer.expires_from_now(boost::posix_time::seconds(1));
        update_timer.async_wait(boost::bind(&TestImpl::update, shared_from_this()));    

        run_thread = boost::thread(boost::bind(&TestImpl::run, shared_from_this()));
    };

    void cleanup() {
        run_thread.join();
    };

private:
    void run() {
        io_svc.run();
    };

    void update() {
        std::cout << "Updating." << std::endl;
        update_timer.expires_from_now(boost::posix_time::seconds(1));
        update_timer.async_wait(boost::bind(&TestImpl::update, shared_from_this()));    
    };

    boost::asio::io_service io_svc;
    boost::asio::deadline_timer update_timer;
    boost::thread run_thread;
    boost::asio::signal_set signals;
}; 
```

这是使用私有实现的代码。

```
class Test {
public:
    Test(): impl(TestImpl::create()) { };
    virtual ~Test() { std::cout << "Destroyed." << std::endl; };
    int run() {
        boost::asio::signal_set signals(io_svc, SIGINT, SIGTERM);
        signals.async_wait(boost::bind(&boost::asio::io_service::stop, &io_svc));

        io_svc.run();

        impl->cleanup();

        return 0;
    };
private:
    boost::asio::io_service io_svc;
    boost::shared_ptr<TestImpl> impl;
};

int main() {
    Test test;
    test.run();
} 
```

我无法理解为什么 TestImpl 类被泄露。通过调试，我可以验证两个 io_service 实例都在 SIGINT 时停止并且线程已加入，这使我相信它不会在销毁时分离。似乎某处必须有一个循环引用导致 TestImpl 实例持续存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-28T03:41:20.187

循环引用在`TestImpl`和之间`TestImpl::io_svc`：

*   `TestImpl::io_svc`的生命周期取决于`TestImpl`它是一个成员变量。
*   `TestImpl`的生命周期间接取决于`TestIMpl::io_svc`由于`shared_from_this()`被绑定为在`io_service`.

一个关键细节是[`io_service::stop()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/stop.html)只影响事件处理循环；它不会影响处理程序的生命周期或绑定到处理程序的参数。从 中删除处理程序的唯一方法`io_service`是通过`io_service`的[析构函数](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/io_service/_io_service.html)。以下是文档的相关摘录：

> `io_service`计划在或任何关联链上延迟调用的未调用处理程序对象将被销毁。
> 
> [...]
> 
> 要关闭整个程序，调用该`io_service`函数以尽快`stop()`终止任何调用。`run()`上面定义的`io_service`析构函数会销毁所有处理程序，导致`shared_ptr`对所有连接对象的所有引用都被销毁。

要解决此问题，请考虑将 Boost.Asio I/O 对象的生命周期与`TestImpl`. 我个人会选择使用[`boost::optional`](http://www.boost.org/doc/libs/1_53_0/libs/optional/doc/html/index.html)over[`boost::shared_ptr`](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)来最小化内存分配量。

```
TestImpl()
  : io_svc(boost::in_place()),
    update_timer(boost::in_place(boost::ref(io_svc.get()))),
    signals(boost::in_place(boost::ref(io_svc.get()), SIGINT, SIGTERM))
{
  signals->async_wait(boost::bind(&boost::asio::io_service::stop,
                                  boost::ref(io_svc))); 
};

...

void cleanup() {
  run_thread.join();
  signals      = boost::none;
  update_timer = boost::none;
  io_svc       = boost::none;
};

...

boost::optional<boost::asio::io_service> io_svc;
boost::optional<boost::asio::deadline_timer> update_timer;
boost::optional<boost::asio::signal_set> signals;
boost::thread run_thread; 
```

# php - 修改密码功能

> ID：15671957
> 
> 赞同：1
> 
> 时间：2013-03-28T00:11:14.393
> 
> 标签：php, passwords

我已经整理了以下代码。但由于某种原因，它拒绝更新数据库，并且无论输入什么，它都会不断回显 $error“您当前的密码不正确”。

下面是主要的changepassword.php

```
 <?php 
include 'core/init.php';  //connection to database and checks user sessions
protect_page(); //useres not loged in cannot access this page

if (empty($_POST) === false) {
    $required_fields = array('current_password', 'password', 'password_again');
    foreach($_POST as $key=>$value) {
        if (empty($value) && in_array($key, $required_fields) === true) {
            $errors[] = 'All fields marked with an * are required.'; //check that all fields are completed
            break 1;
        }
    }

    if (md5($_POST['current_password']) === $user_data['password']) { //if equal to current password
        if (trim($_POST['password']) !== trim($_POST['password_again'])) {
            $errors[] = 'Your new passwords do not match';
        } else if (strlen($_POST['password']) < 6) {
            $errors[] = 'Your password must be at least 6 characters';
        }
    } else {
        $errors[] = 'Your current password is incorrect';   //else append error
    }
}

include 'includes/overall/header.php'; 
?>

<h1>Change Password</h1>
<p>Change your account password here.</p>

<?php
if (isset($_GET['success']) && empty($_GET['success'])) {
    echo 'Your password has been changed';
} else {

    if (empty($_POST) === false && empty($errors) === true) {
        change_password($session_user_id, $_POST['password']);
        header('Location: changepassword.php?success');
    } else if (empty($errors) === false) {
        echo output_errors($errors);
    }
    ?>

    <form action="" method="post">

        <ul>
        <li>
            Current Password*:<br>
            <input type="password" name"current_password">
        </li>
        <li>
            New Password*:<br>
            <input type="password" name"password">

        </li>
        <li>
            New Password Again*:<br>
            <input type="password" name"password_again">
        </li>
        <li>
            <input type="submit" name="Change Password" />
        </li>
        </ul>

    </form>

<?php 
}
include 'includes/overall/footer.php'; ?> 
```

这是更改密码功能

```
//change password function
function change_password($membersID, $password) {
    $membersID = (int)$membersID;
    $password = md5($password);
    //update password in database
    mysql_query("UPDATE`members` SET`password` = '$password' WHERE`membersID` = $membersID");   
} 
```

user_data 在此处声明

```
//user data variable to pass in sessionID and thus pass in their other details
if (logged_in() === true) {
    $session_user_id = $_SESSION['membersID']; //picking up the particular user
    $user_data = user_data($session_user_id, 'membersID', 'username','password', 'forename', 'surename', 'email', 'age'); //picks up the fields declared here - MAKE SURE TO PASS ALL paramameters you need to output.
    if (user_active($user_data['username']) === false) {
        session_destroy();
        header('Location: index.php');
        exit();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T07:54:08.853

抱歉，我的第一个答案不正确，但关于 MD5 的警告仍然有效：

请记住，您的密码架构非常不安全，您应该改进一些重要的点。

*   散列函数 MD5 不适合散列密码，因为它太快了，而是使用像 BCrypt 这样的慢速密钥派生函数。我会邀请您在我的有关安全密码存储的[教程](http://www.martinstoeckli.ch/hash/en/index.php)中阅读有关此主题的更多信息 。
*   只有在不使用盐的情况下，才能像您一样直接比较密码哈希。未加盐的 MD5 哈希并不比存储密码明文更安全。使用少于 7 个字符的密码破解整个数据库只需几秒钟。
*   mysql* 函数已弃用，建议使用`PDO`or`mysqli`代替。请记住，通常您必须在 SQL 语句（准备好的语句或`mysqli_real_escape_string()`）中转义字符串值。不过，您的示例将是安全的，因为 MD5 的输出始终是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:58:52.843

查询缺少引号。

```
function change_password($membersID, $password) {
    $membersID = (int)$membersID;
    $password = mysql_real_escape_string(md5($password));
    //update password in database
    mysql_query("UPDATE members SET password = '$password' WHERE membersID = '$membersID';");   
    if (mysql_affected_rows > 0) {
        return true;
    } else {
        return false;
    }
}

if (empty($_POST) === false && empty($errors) === true) {
    if(change_password($session_user_id, $_POST['password'])) {
        // Redirect if change_password returns true
        header('Location: changepassword.php?success');
    } else {
        // Give some error message
    }
} else if (empty($errors) === false) {
    echo output_errors($errors);
} 
```

尝试这些更改，如果 change_password 函数返回 false，我不知道您要如何处理错误。

# c++ - 将本地 UDP 服务器信息获取到 C++ 中

> ID：15671961
> 
> 赞同：1
> 
> 时间：2013-03-28T00:12:08.867
> 
> 标签：c++, udp, routes, multicast

所以，我让这个程序在我的 mac ipMidi 上运行，它允许我通过我的以太网连接发送 midi 事件。它在 UDP 协议下工作，并从我的 Ableton Live daw 发送 midi。我试图在运行 ipMidi 的同一台机器上将 ipMidi 中的包读取到我的 C++ 程序中，但我不知道该怎么做。我已经做了一段时间的研究知道，我只是不知道如何让 ipMidi 将包发送到我的本地主机或嗅探通过我的以太网的包。我发现的工具之一是路由，但我无法复制 ip 表条目以将包发送到我的侦听 UDP 程序。我发现这样做的其他方法是让我的程序在目标 ip 中的内核上加入一个多播组，并从我用wireshark从 ipMidi 嗅探的目标包中的端口，但这不可能，因为绑定告诉我地址正在被使用。所以我真的可以在这方面使用一些帮助。

我知道，没有代码，但更像是一个理论问题，而不是实现问题。

希望我清楚地解释自己，我的英语不是最好的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T00:22:50.453

您似乎对不同的技术持开放态度。我不是网络专家，也不是 iptables 专家，但我会尝试寻找 iptable 的“tee”等价物。我发现这个链接可能对你有用。

[https://unix.stackexchange.com/questions/15870/iptables-port-mirroring](https://unix.stackexchange.com/questions/15870/iptables-port-mirroring)

编辑：另一个可能有用的 [http://www.bjou.de/blog/2008/05/howto-copyteeclone-network-traffic-using-iptables/](http://www.bjou.de/blog/2008/05/howto-copyteeclone-network-traffic-using-iptables/)

我想到的另一个技巧是，如果您可以控制 ipMidi 发送数据包的位置，您可以将它们发送到某个端口上的 localhost，`netcat`打开以侦听该端口，然后使用`tee`重定向文件上的输出并使用您的 C++ 程序读取该文件。will to的输出`tee`再次`netcat`可以将数据发送到您喜欢的地方（另一个主机）。

就像：

```
ipMidi -> localhost -> nc listening -> tee -> nc sending -> destination
                                           -> file -> your program. 
```

但这只是一个尝试，如果没有人提供更好的解决方案（不太可能）。

# excel - Excel 创建一个将值放入特定单元格的按钮

> ID：15671962
> 
> 赞同：-1
> 
> 时间：2013-03-28T00:12:18.487
> 
> 标签：excel, button, vba

我正在尝试创建一个 excel 电子表格，每当我按下一个按钮时，它都会从一张纸上读取信息，并（根据该信息）在另一张纸上填充一个具有特定值的单元格。

例如：

学生输入他们的测试答案。excel 文档对照数据库检查所有答案并计算分数并将它们与某些目标相关联（我已经处理好了）。

然后，学生按下“更新”按钮。该程序将读取学生的姓名（提供行号）和他们参加的测试（提供列-我仍然不确定如何提出带有字母的特定列，所以这也会有帮助）它会用学生的分数更新那个单元格。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T01:23:48.173

好的，就像你说的那种代码，我以前做过。这个我可以为你解答。但是因为我根本看不到你的努力。所以我只是给你我的代码并解释它，然后你需要把它改成你的问题代码。好？

```
 c = TB1.Value >> (My textbox for user to fill in their name that same with the sheet row value)

    Cells.Find(What:=c, After:=ActiveCell, LookIn:=xlFormulas, LookAt:= _
            xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False _
            , SearchFormat:=False).Activate
        myRow = ActiveCell.Row
        rtb = myRow >> My Row XX Value just like you said want to know at what row hold that value.

    e = coltb.Text >> (My textbox for user to fill in their date value that will be find in column)
    Cells.Find(What:=e, After:=ActiveCell, LookIn:=xlFormulas, _
        LookAt:=xlPart, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
        MatchCase:=True, SearchFormat:=True).Activate
        myColumn = ActiveCell.Column
        ctb = myColumn >>> (My Column XX value just like for know what is the column that hold the value)

Worksheets("Sheet1").Cells(rtb, ctb) = Val(Score) > Your RTB(Row value) + CTB(Column Value) then the score of your test. 
```

可能是这样，不是你想要的吗？此代码用于 VBA，导致您的标签使用 VBA

希望会有所帮助

# ios - FPPopover 不会在按钮按下时弹出，只是 NSLogs "FPPopoverController dealloc"

> ID：15671963
> 
> 赞同：0
> 
> 时间：2013-03-28T00:12:18.640
> 
> 标签：ios, objective-c, uipopovercontroller, fppopover

我有以下代码：

```
- (IBAction)textOptionsTapped:(UIBarButtonItem *)sender {
    UIView *buttonView = [sender valueForKey:@"view"];

    FPPopoverController *popover = [[FPPopoverController alloc] init];
    popover.arrowDirection = FPPopoverArrowDirectionDown;
    [popover presentPopoverFromView:buttonView];
} 
```

每次按下按钮时，究竟是什么导致我的应用程序 NSLog “FPPopoverController dealloc”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T17:24:57.920

这是我在生产中工作的实现。试试这个。可能只是您没有正确设置所有属性。

// 实例化弹出框

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
LoginViewController *viewController = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];

if (self.popover) {
    [self.popover dismissPopoverAnimated:NO];
    self.popover = nil;
}

self.popover = [[FPPopoverController alloc] initWithViewController:viewController];
self.popover.contentSize = viewController.size;
self.popover.border = NO;
self.popover.arrowDirection = FPPopoverNoArrow;
self.popover.tint = FPPopoverRedTint;

[self.popover presentPopoverFromView:self.loginButton]; 
```

让我知道这是否有帮助

# c# - 有没有办法用另一个库解压缩 DynaZip Max 文件？FE DotNetZip

> ID：15671968
> 
> 赞同：6
> 
> 时间：2013-03-28T00:12:31.323
> 
> 标签：c#, zip, gzip, zlib, dotnetzip

我有一个数据库，我们使用以下代码存储使用 DynaZip Max Secure 压缩的 pdf 文件：

```
MemoryStream msIN = new System.IO.MemoryStream();   //Input MemoryStream
MemoryStream msZip = new System.IO.MemoryStream();  //Compressed MemoryStream
BinaryReader objBinaryReader;
BinaryWriter objBinaryWriter;

public MemoryStream CompressStream(byte[] vbuf)
{
    System.IO.BinaryWriter bw = new System.IO.BinaryWriter(msIN);
    bw.Write(vbuf);
    CDZipSNET dz1 = new CDZipSNET();
    dz1.ZipMemToMemCallback += new CDZipSNET.OnZipMemToMemCallback(this.ZipMemToMemCallback_event);
    dz1.ActionDZ = CDZipSNET.DZACTION.ZIP_MEMTOMEM;
    return msZip;
} 
```

这是 ZipMemToMemCallback_event 代码：

```
public void ZipMemToMemCallback_event(CDZipSNET.MEMTOMEMACTION lAction,ref byte[] lpMemBuf,ref uint pdwSize,uint dwTotalReadL,uint dwTotalReadH,uint dwTotalWrittenL,uint dwTotalWrittenH,ref CDZipSNET.MEMTOMEMRESPONSE plRet)
{
    int bytesToRead;

    switch(lAction)
    {
        case CDZipSNET.MEMTOMEMACTION.MEM_READ_DATA:
            if((dwTotalReadL == 0) && (dwTotalReadH == 0))
            {
                msIN.Seek(0, System.IO.SeekOrigin.Begin);
                objBinaryReader = new System.IO.BinaryReader(msIN);
            }
            try
            {
                bytesToRead = (int)(objBinaryReader.BaseStream.Length - dwTotalReadL);
                if(bytesToRead > pdwSize)
                {
                    bytesToRead = (int)pdwSize;
                    plRet = CDZipSNET.MEMTOMEMRESPONSE.MEM_CONTINUE;
                }
                else
                { 
                    plRet = CDZipSNET.MEMTOMEMRESPONSE.MEM_DONE; 
                }
                pdwSize = (uint)bytesToRead;
                if(bytesToRead > 0)
                { 
                    objBinaryReader.Read(lpMemBuf, 0, bytesToRead); 
                }
            }
            catch 
            { 
                plRet = CDZipSNET.MEMTOMEMRESPONSE.MEM_ERROR; 
            }
            break;

        case CDZipSNET.MEMTOMEMACTION.MEM_WRITE_DATA:
            if((dwTotalWrittenL == 0) && (dwTotalWrittenH == 0))
            { 
                objBinaryWriter = new System.IO.BinaryWriter(msZip); 
            }
            try
            {
                objBinaryWriter.Write(lpMemBuf, 0, (int)pdwSize);
                plRet = CDZipSNET.MEMTOMEMRESPONSE.MEM_CONTINUE;
            }
            catch (System.Exception)
            { 
                plRet = CDZipSNET.MEMTOMEMRESPONSE.MEM_ERROR; 
            }
            break;

        default: plRet = CDZipSNET.MEMTOMEMRESPONSE.MEM_ERROR;
            break;
    }
} 
```

我将提供任何其他必要的东西来解答这个谜语，我尝试了常规的 Zip 解压缩、Zlib、Gzip 无济于事。我将不胜感激。谢谢你。

**编辑：**问题是 DinaZip 是一个专有的、已停产的库，发布它的公司没有任何帮助或故障排除，我被委托解压缩以前使用该库压缩的一堆文件（使用代码 avobe）和我不再有可用于解压缩的库，我想知道是否有人知道任何方法来解压这些文件，可能使用其他库或方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-10T22:31:55.417

此代码来自[https://zlibnet.codeplex.com](https://zlibnet.codeplex.com)，它可以解压缩未加密的 DynaZip 流：

```
public static class DynazipCompressor
{
    const int DZ_DEFLATE_POS = 46;

    public static bool IsDynazip(byte[] source)
    {
        return source.Length >= 4 && BitConverter.ToInt32(source, 0) == 0x02014b50;
    }

    public static byte[] DeCompress(byte[] source)
    {
        if (!IsDynazip(source))
            throw new InvalidDataException("not dynazip header");
        using (MemoryStream srcStream = new MemoryStream(source, DZ_DEFLATE_POS, source.Length - DZ_DEFLATE_POS))
        using (MemoryStream dstStream = DeCompress(srcStream))
            return dstStream.ToArray();
    }

    private static MemoryStream DeCompress(Stream source)
    {
        MemoryStream dest = new MemoryStream();
        DeCompress(source, dest);
        dest.Position = 0;
        return dest;
    }

    private static void DeCompress(Stream source, Stream dest)
    {
        using (DeflateStream zsSource = new DeflateStream(source, CompressionMode.Decompress, true))
        {
            zsSource.CopyTo(dest);
        }
    }
} 
```

DynaZip 流只是带有 PKZIP 标头的 DeflateStream，因此此代码只是跳过标头。

# c# - 为 BULK INSERT 定义参数时出现语法错误

> ID：15671971
> 
> 赞同：0
> 
> 时间：2013-03-28T00:12:41.800
> 
> 标签：c#, sql, sql-server-2008, sql-server-2008-r2, sql-server-2012

在以下 C# 代码中：

```
string filePath = @"C:\Users\Me\Documents\note.txt"
var SqlSaveCommand = new SqlCommand(@"BULK INSERT table FROM @filepath", con);
SqlSaveCommand.Parameters.Add(new SqlParameter("@filepath", filePath)); 
```

`@filepath`执行 sql 命令时出现语法错误。

但是，以下确实按预期工作：

```
BULK INSERT proxylist FROM 'C:\Users\Me\Documents\note.txt' 
```

我在指定`@filepath`参数时做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:19:50.790

您不能参数化`BULK INSERT`. 如果您说，您将在 Management Studio 中看到相同的错误：

```
BULK INSERT dbo.tablename FROM @wherever... 
```

通常你也需要一些`WITH`选项，例如指定`ROWTERMINATOR, FIELDTERMINATOR`等。

为什么不在程序中构建整个命令？

```
string filePath = @"C:\Users\Me\Documents\note.txt"
string cmd = @"BULK INSERT proxylist FROM '" + @filepath + "';";
var SqlSaveCommand = new SqlCommand(cmd, con); 
```

# eclipse - 在 scala 中导入对象时出错

> ID：15671972
> 
> 赞同：0
> 
> 时间：2013-03-28T00:12:46.020
> 
> 标签：eclipse, scala

我正在学习用 Scala 编程。我有两个名为`chapter3`和的包`chapter4`。下面是代码：

`FileOperation.scala`包中文件的代码`chapter3`：

```
package chapter3

import scala.io.Source

object FileOperation {

  /**
   * This function determines the length of line length.
   */
  def findLineLengthWidth(line : String) : Int = {
    val len = line.length.toString.length()
    return len;
  }

  def readFile(filename : String) {
    val lines = Source.fromFile(filename).getLines().toList
    val longestLine = lines.reduceLeft((a, b) => if(a.length > b.length) a else b)
    val maxlength = findLineLengthWidth(longestLine)

    for (line <- lines) {
      val len = findLineLengthWidth(line)
      val spacecount = (maxlength - len)
      val padding = " " * spacecount
      println(padding + line.length +"|"+ line)
    }
  }
} 
```

第 4 章包中的文件代码：Summer.scala

```
package chapter4

import chapter3.FileOperation._

object Summer {

  def main(args: Array[String]): Unit = {
    {
      //val file = new FileOperation
      readFile("abc.txt")
    } 
  }
} 
```

当我在 Eclipse 中运行此代码时，它工作正常。但是，当我尝试在终端中编译它时，出现以下错误：

```
$ scalac *.scala
Summer.scala:3: error: not found: object chapter3
import chapter3.FileOperation._
       ^
Summer.scala:11: error: not found: value readFile
      readFile("abc.txt")
      ^
two errors found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T01:22:06.210

确保您的目录结构是：

```
chapter3/FileOperation.scala
chapter4/Summer.scala 
```

然后，从父目录运行：

```
scalac chapter3/FileOperation.scala chapter4/Summer.scala 
```

这编译得很好。如果要单独编译它们，请确保`FileOperation`首先，因为`Summer`取决于它。

编译完成后，您可以使用以下命令运行它：

```
scala -cp .:chapter3:chapter4 chapter4.Summer 
```

# java - 如何在 Struts 2 上应用 Spring Security

> ID：15671973
> 
> 赞同：4
> 
> 时间：2013-03-28T00:12:55.897
> 
> 标签：java, spring, spring-security, struts2

我已经阅读了各种教程和论坛，但没有找到结合 Spring 安全性和 struts2 来研究编码的工作示例。当前的大多数示例都使用 XML 文件中预定义的用户名和密码，但未连接到数据库。

例子：

*   [样品 1](https://stackoverflow.com/questions/12607719/how-use-spring-security-3-on-struts-2)
*   [样品 2](http://www.coderanch.com/t/528561/Spring/Spring-Spring-Security-Struts-Hibernate)
*   [样品 3](http://jtechspace.blogspot.com.au/2012/07/integrating-struts2-with-spring.html)

如果您知道任何示例或教程，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T11:38:01.603

您可能应该从这些教程开始：

*   [Spring Security 第 1 部分 - 带有数据库的简单登录应用程序](http://www.javacodegeeks.com/2012/07/spring-security-part-1-simple-login.html)

*   [Spring Security Part 2 - 密码加密，自定义 404 和 403 错误页面](http://www.javacodegeeks.com/2012/07/spring-security-part-2-password.html)

# asp.net-mvc - KineticJS - asp.net MVC - Json 将画布数据保存为可下载的 PNG 文件

> ID：15671980
> 
> 赞同：1
> 
> 时间：2013-03-28T00:13:26.937
> 
> 标签：asp.net-mvc, json, kineticjs, filecontentresult

我的项目是 asp.net MVC 3，我使用以下脚本导出画布数据：

```
 $("#savePNG").click(function () {
                stage.toDataURL({
                    callback: function (dataUrl) {
                        dataUrl = dataUrl.replace('data:image/png;base64,', '');
                        $.ajax({
                        type: 'POST',
                        url: "../../Home/UploadImage",
                        data: '{ "imageData" : "' + dataUrl + '" }',
                        contentType: 'application/json; charset=utf-8',
                        dataType: 'json',
                        success: function(msg) {
                            alert('Image saved successfully !');
                        }
                    });
                }
                });
            }); 
```

控制器脚本：

```
 public FileContentResult UploadImage(string imageData){
            byte[] data = Convert.FromBase64String(imageData);
                   return File(data, "image/png", "test.png");
        } 
```

它不起作用，任何建议，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T05:08:49.103

这是我的解决方案，以防有人试图做同样的事情

在控制器中：

```
 public JsonResult UploadImage(string imageData)
        {
            byte[] data = Convert.FromBase64String(imageData);
            MySession.Current._pngtoPrint = data;

            return Json(new { success = true }, JsonRequestBehavior.AllowGet);
        }

        public FileContentResult ExportPng()
        {
            byte[] contents =  MySession.Current._pngtoPrint;
            return File(contents, "image/png", "test" + ".png");
        } 
```

在视图中：

```
 stage1.toDataURL({
                    callback: function(dataUrl) {
                        dataUrl = dataUrl.replace('data:image/png;base64,', '');
                        $.ajax({
                            type: 'POST',
                            url: "../../Home/UploadImage",
                            data: '{ "imageData" : "' + dataUrl + '" }',
                            contentType: 'application/json; charset=utf-8',
                            dataType: 'json',
                            success: function(data) {
                               // alert('Image saved successfully !');
                                window.location("Home/ExportPng");
                            }
                        });
                    }
                }); 
```

# javascript - jQuery：隐藏元素

> ID：15671981
> 
> 赞同：0
> 
> 时间：2013-03-28T00:13:33.083
> 
> 标签：javascript, jquery, html

我有一个“反馈小部件”，我想为低分辨率屏幕隐藏它。我的问题是它在之后立即注入以下代码`<body>`，无论我尝试什么，我都无法隐藏`reformal_tab`元素

```
<a id="reformal_tab" href="http://domain.com" onclick="Reformal.widgetOpen();return false;" onmouseover="Reformal.widgetPreload();" onmouseout="Reformal.widgetAbortPreload();"><img alt="" src="domain.com/tab.png"></a> 
```

我试过的

```
<script>
        $('reformal_tab').hide();
        $('#reformal_tab').hide();
</script> 
```

这是实际的小部件，如果可以帮助[http://reformal.ru/](http://reformal.ru/)

编码：

```
<script type="text/javascript">
$(function() {
    $('#reformal_tab').hide();
});

    var reformalOptions = {
        project_id: 93459,
        project_host: "domain.com",
        tab_orientation: "left",
        tab_indent: "50%",
        tab_bg_color: "#F05A00",
        tab_border_color: "#FFFFFF",
        tab_border_width: 2
    };

    (function() {
        var script = document.createElement('script');
        script.type = 'text/javascript'; script.async = true;
        script.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'media.reformal.ru/widgets/v3/reformal.js';
        document.getElementsByTagName('head')[0].appendChild(script);
    })();
</script> 
```

你可以在这里看到它 [http://jsfiddle.net/PQsQq/2/](http://jsfiddle.net/PQsQq/2/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-28T00:14:57.450

第二个调用是有效的。通过**id**`#`引用元素。

 **```
$('#reformal_tab').hide(); 
```

您还需要在文档准备好时调用它。

```
$(function() {
    $('#reformal_tab').hide();
}); 
```

为什么不在注入时将其隐藏，然后可以将其显示为更高分辨率的屏幕？

```
<a id="reformal_tab" style="display:none;" href="http://domain.com" ... 
```

然后在你的脚本中的某个地方..

```
if(highResolution) {
  $("#reformal_tab").show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T00:15:20.617

为什么不直接删除它？

```
$('#reformal_tab').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:25:42.290

如果元素是用 javascript 注入的，它可能是在 DOM 准备好后动态插入的。解决方案相当简单，在您的 CSS 中执行以下操作：

```
#reformal_tab {display: none;} 
```**

# paypal - 当我从 PayPal 收到订单时，无法再发送自动回复

> ID：15671983
> 
> 赞同：0
> 
> 时间：2013-03-28T00:13:54.263
> 
> 标签：paypal, cart, shopping

我正在使用 PayPal 购物车，当我收到来自 eBay 或我的网站的订单时，我会发送一条自动回复消息，感谢客户的订单等。这很好，因为我将它设置在我的电子邮件程序 (Windows Live Mail) 在主题行中包含某些字词时发送回复（例如“收到付款”、“收到付款通知”等）。它就像一个魅力，因为发件人是实际客户的电子邮件地址，即使它来自 PayPal。

然而，现在发件人是“member@paypal.com”，所以我的所有通知都未送达就退回给我。

是否有一种解决方法可以让我将这些自动回复消息发送给我的客户？

感谢您提出的任何想法。

杰克逊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:34:09.307

您可以设置一个 IPN 脚本来向您的客户发送电子邮件。IPN POST 将包含买家的电子邮件地址。即时付款通知 (IPN) 是一种消息服务，可通知您与 PayPal 交易相关的事件。您可以使用它来自动化后台和管理功能，例如履行订单、跟踪客户以及提供与交易相关的状态和其他信息。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/ipn/integration-guide/IPNIntro)找到有关 IPN的更多信息。页面左侧还有一些与 IPN 相关的附加链接，您还可以[在此处](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)找到 IPN 的一些示例代码，这些代码可以帮助您入门。

```
<?php
// Revision Notes
// 11/04/11 - changed post back url from https://www.paypal.com/cgi-bin/webscr to https://ipnpb.paypal.com/cgi-bin/webscr
// For more info see below:
// https://www.x.com/content/bulletin-ip-address-expansion-paypal-services
// "ACTION REQUIRED: if you are using IPN (Instant Payment Notification) for Order Management and your IPN listener script is behind a firewall that uses ACL (Access Control List) rules which restrict outbound traffic to a limited number of IP addresses, then you may need to do one of the following: 
// To continue posting back to https://www.paypal.com  to perform IPN validation you will need to update your firewall ACL to allow outbound access to *any* IP address for the servers that host your IPN script
// OR Alternatively, you will need to modify  your IPN script to post back IPNs to the newly created URL https://ipnpb.paypal.com using HTTPS (port 443) and update firewall ACL rules to allow outbound access to the ipnpb.paypal.com IP ranges (see end of message)."

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';

foreach ($_POST as $key => $value) {
$value = urlencode(stripslashes($value));
$req .= "&$key=$value";
}

// post back to PayPal system to validate

$header = "POST /cgi-bin/webscr HTTP/1.1\r\n";

    // If testing on Sandbox use: 
    // $header .= "Host: www.sandbox.paypal.com:443\r\n";
$header .= "Host: ipnpb.paypal.com:443\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";

    // If testing on Sandbox use:
    //$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);
$fp = fsockopen ('ssl://ipnpb.paypal.com', 443, $errno, $errstr, 30);

// assign posted variables to local variables
$item_name = $_POST['item_name'];
$item_number = $_POST['item_number'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$payment_currency = $_POST['mc_currency'];
$txn_id = $_POST['txn_id'];
$receiver_email = $_POST['receiver_email'];
$payer_email = $_POST['payer_email'];

//set email variables
$From_email = "From: from@mysite.com";
$Subject_line = "Payment Confirmation";

$email_msg = "Thanks for purchasing my item. Your order will be delivered in 3-4 days. We appreciate your business.";
$email_msg .= "\n\nThe details of your order are as follows:";
$email_msg .= "\n\n" . "Transaction ID: " .  $txn_id ;
$email_msg .= "\n" . "Payment Date: " . $payment_date;

if (!$fp) {
// HTTP ERROR
} else {
fputs ($fp, $header . $req);
while (!feof($fp)) {
$res = fgets ($fp, 1024);
if (strcmp ($res, "VERIFIED") == 0) {
// check the payment_status is Completed
// check that txn_id has not been previously processed
// check that receiver_email is your Primary PayPal email
// check that payment_amount/payment_currency are correct
// process payment

$mail_From = $From_email;
$mail_To = $payer_email;
$mail_Subject = $Subject_line;
$mail_Body = $email_msg;

mail($mail_To, $mail_Subject, $mail_Body, $mail_From);

}
else if (strcmp ($res, "INVALID") == 0) {
// log for manual investigation

$mail_From = $From_email;
$mail_To = $receiver_email;
$mail_Subject = "INVALID IPN POST";
$mail_Body = "INVALID IPN POST. The raw POST string is below.\n\n" . $req;

mail($mail_To, $mail_Subject, $mail_Body, $mail_From);

}
}
fclose ($fp);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T15:54:46.753

自从 PayPal 在 3 月份改变通知方式后，我就一直在与 PayPal 就这个问题“联系”。他们的最后一封信读到：

> 感谢您就您的通知与我们联系。
> 
> 我想首先对这种情况持续了这么长时间表示抱歉。我知道自从我最初将您的问题上报以来已经有一段时间了，看到它仍在进行中，我感到很难过。
> 
> 我再次上​​报了这个问题，并附上一张纸条，要求对以前的上报进行调查。我已要求我的一位主管与您联系以解决您的投诉并为您提供所需的完整解释。这将在 72 小时内完成。
> 
> 感谢您的时间。
> 
> 此致 Gemma UK 顶级客户部 PayPal

不用说，四个星期后，我不得不一次又一次地与他们联系，并一次又一次地收到了类似的道歉。

在某个地方，一位 PayPal 操作员将更改的原因解释为：

> 这种情况发生变化的原因是卖家直接回应买家，而不是在我们的系统内对应，这主要与争议和索赔有关。但是，如果您通过 PayPal 系统做出响应，则会被记录下来。

我无休止地要求他们解释这一点，但无济于事。我将继续用不满的抱怨轰炸他们！

然而，他们知道，不只是我心怀不满，而且作为一个单人乐队，他们担心会占用我的电脑时间。

我的抱怨是：

欧洲服务@paypal.com

# java - Java，如何正确启动作为 JFrame 的应用程序并在其中使用可启动和可暂停的线程？

> ID：15671992
> 
> 赞同：1
> 
> 时间：2013-03-28T00:14:41.150
> 
> 标签：java, multithreading, swing, jframe

我决定启动我的 java 应用程序的第 3 版，并想知道我是否以正确的方式启动应用程序。我之前问过很多不同的答案。

我刚刚启动了一个 netbeans Java 应用程序，并在 JFrame 中绘制了我的所有组件。在我的第 2 版中，我是这样启动程序的

代码：（这也是目前的版本 3）

```
public class theApp {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) 
{
    final CLSuiteMain theMainFrame = new CLSuiteMain();

    EventQueue.invokeLater
    (
        new Runnable() 
        {
                @Override
            public void run() 
            {
                try {
                        try 
                        {
                            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                        } catch (UnsupportedLookAndFeelException ex) 
                        {
                            Logger.getLogger(theApp.class.getName()).log(Level.SEVERE, null, ex);
                        }
                    } 
                catch (ClassNotFoundException | InstantiationException | IllegalAccessException ex) {}  

                theMainFrame.setVisible(true);
            }

        }
    );
}
} 
```

我将其创建为一个 Windows 应用程序，我希望能够在其中（安全地）启动一个线程，该线程通过 Robot 类模拟用户操作。我希望能够允许用户按下 CLSuiteMain 对象上的切换按钮并启动和暂停该线程。当主 JFrame 退出时，也安全退出线程。

所以首先，我是否安全地启动了这个线程来做我想做的事情？我怎样才能正确和安全地在应用程序中实现另一个可以按描述执行的线程？

*   即我想启动应用程序，单击切换按钮，线程开始循环并继续执行相同的步骤，直到用户再次点击切换，此时它停止执行循环并继续执行另一个单击切换按钮。（奖励，我如何将线程执行重置为其循环的开头？）

我不是在寻找完整的代码或其他东西，如果可能的话，也许是伪代码中的一个简单示例，如果没有任何其他帮助，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T13:34:54.577

> 即我想启动应用程序，单击切换按钮，线程开始循环并继续执行相同的步骤，直到用户再次点击切换，此时它停止执行循环并继续执行另一个单击切换按钮。（奖励，我如何将线程执行重置为其循环的开头？）

行。

创建所有的 GUI 组件。您的 JFrame 必须设置这些方法。

```
 frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
    frame.addWindowListener(new WindowAdapter() {
        @Override
        public void windowClosing(WindowEvent event) {
            exitProcedure();
        }
    }); 
```

退出过程方法如下所示。

```
public void exitProcedure() {
    thread.stopProcessing();
    frame.dispose();
    System.exit(0);
} 
```

您可以在持有切换按钮的 JPanel 中的任何位置创建新线程。线程实例应该是 GUI 数据模型的一部分。您可以将 GUI 数据模型的实例传递给您的所有视图组件。

您将在切换按钮的动作侦听器中启动您的线程，并在那里暂停您的线程。

对于您的奖励问题，您将必须有另一个常规 JButton 来重新启动您的线程，并将您的切换按钮设置为其动作侦听器中的线程运行状态。

您的线程类必须进行编码，以便可以重新启动、暂停和停止。

# django - 在 url 参数中接受和 char

> ID：15671993
> 
> 赞同：0
> 
> 时间：2013-03-28T00:14:43.103
> 
> 标签：django

如何接受 url 参数中的任何字符？

```
(?P<slug>[-\w]+) 
```

以上仅接受破折号和字母字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T00:16:16.080

点匹配任何字符：

```
(?P<slug>.+) 
```

# jquery - JSON经度纬度最近位置

> ID：15671999
> 
> 赞同：1
> 
> 时间：2013-03-28T00:15:05.940
> 
> 标签：jquery, json

我正在制作一个脚本，我的 json 文件中有大约 2000 个城市地址，包括经度和纬度。

该脚本必须使用经度和纬度计算从提供的纬度/经度到每个条目的距离和

按最近的顺序排列它们。

我需要大约 10 个“最近”的结果。

我可以计算距离，但我不能按最近的位置排序。

**[http://jsfiddle.net/Wf6qy/](http://jsfiddle.net/Wf6qy/)**

JSON文件：

```
{
    "City A": {
        "Position": {
            "Longitude": 9.96233,
            "Latitude": 49.80404
        }
    },
    "City B": {
        "Position": {
            "Longitude": 6.11499,
            "Latitude": 50.76891
        }
    },
    "City C": {
        "Position": {
            "Longitude": 6.80592,
            "Latitude": 51.53548
        }
    },
    "City D": {
        "Position": {
            "Longitude": 9.50523,
            "Latitude": 51.31991
        }
    },
    "City E": {
        "Position": {
            "Longitude": 9.66089,
            "Latitude": 48.70158
        }
    },
    "City F": {
        "Position": {
            "Longitude": 9.93368,
            "Latitude": 53.55608
        }
    },
    "City G": {
        "Position": {
            "Longitude": 11.56122,
            "Latitude": 48.14496
        }
    },
    "City H": {
        "Position": {
            "Longitude": 13.34253,
            "Latitude": 52.5319
        }
    },
    "City I": {
        "Position": {
            "Longitude": 6.11327,
            "Latitude": 50.77715
        }
    },
    "City J": {
        "Position": {
            "Longitude": 13.36671,
            "Latitude": 52.54344
        }
    }
} 
```

jQuery :

```
var jsonString =
    '{"City A":{"Position":{"Longitude":9.96233,"Latitude":49.80404}},"City B":{"Position":{"Longitude":6.11499,"Latitude":50.76891}},"City C":{"Position":{"Longitude":6.80592,"Latitude":51.53548}},"City D":{"Position":{"Longitude":9.50523,"Latitude":51.31991}},"City E":{"Position":{"Longitude":9.66089,"Latitude":48.70158}},"City F":{"Position":{"Longitude":9.93368,"Latitude":53.55608}},"City G":{"Position":{"Longitude":11.56122,"Latitude":48.14496}},"City H":{"Position":{"Longitude":13.34253,"Latitude":52.5319}},"City I":{"Position":{"Longitude":6.11327,"Latitude":50.77715}},"City J":{"Position":{"Longitude":13.36671,"Latitude":52.54344}}}';

var myData = JSON.parse(jsonString);

$(document).ready(function () {

    $.each(myData, function (a, b) {

        //$("#groups").append("<li>"+b.Position.Longitude+"</li>");

        $("#groups").append('<li><h2>' + a + '</h2><p>' + hesapla(9.9608999, 49.7222842, b.Position.Longitude, b.Position.Latitude) + '</p></a></li>');

    });

    function hesapla(meineLongitude, meineLatitude, long1, lat1) {
        erdRadius = 6371;

        meineLongitude = meineLongitude * (Math.PI / 180);
        meineLatitude = meineLatitude * (Math.PI / 180);
        long1 = long1 * (Math.PI / 180);
        lat1 = lat1 * (Math.PI / 180);

        x0 = meineLongitude * erdRadius * Math.cos(meineLatitude);
        y0 = meineLatitude * erdRadius;

        x1 = long1 * erdRadius * Math.cos(lat1);
        y1 = lat1 * erdRadius;

        dx = x0 - x1;
        dy = y0 - y1;

        d = Math.sqrt((dx * dx) + (dy * dy));

        if (d < 1) {
            return Math.round(d * 1000) +" m"
            ;
        } else {
            return Math.round(d * 10) / 10 +" km"
            ;
        }
    };

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T01:12:42.593

我的解决方案只是根据位置和距离创建一组对象，对它们进行排序，然后将它们吐出。我将所有内容都保留为米而不是公里，但它很容易调整。享受！

循环时：

```
distanceObj[i] = {
    distance: hesapla(9.9608999, 49.7222842, b.Position.Longitude, b.Position.Latitude),
    location: a
};
++i; 
```

然后排序：

```
distanceObj.sort(function(a,b) {
    return parseInt(a.distance) - parseInt(b.distance)
}); 
```

这将更好地解释：http: [//jsfiddle.net/mitchmalone/Wf6qy/1/](http://jsfiddle.net/mitchmalone/Wf6qy/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T01:03:12.987

考虑到您提供的计算两个坐标之间距离的函数是正确的，您可以使用以下例程根据城市到给定位置的距离对城市进行排序：

```
// user supplied lat/long
var origin = JSON.parse('{"Longitude":9.96233,"Latitude":49.80404}');

// cities to sort
var cities = JSON.parse('{"City A":{"Position":{"Longitude":9.96233,"Latitude":49.80404}},"City B":{"Position":{"Longitude":6.11499,"Latitude":50.76891}},"City C":{"Position":{"Longitude":6.80592,"Latitude":51.53548}},"City D":{"Position":{"Longitude":9.50523,"Latitude":51.31991}},"City E":{"Position":{"Longitude":9.66089,"Latitude":48.70158}},"City F":{"Position":{"Longitude":9.93368,"Latitude":53.55608}},"City G":{"Position":{"Longitude":11.56122,"Latitude":48.14496}},"City H":{"Position":{"Longitude":13.34253,"Latitude":52.5319}},"City I":{"Position":{"Longitude":6.11327,"Latitude":50.77715}},"City J":{"Position":{"Longitude":13.36671,"Latitude":52.54344}}}');

// loop through each city and calculate its distance
var array = [];
for (var name in cities) {
    var city = cities[name];
    array.push({
        cityName: name,
        distance: calculateDistance(origin, city.Position)
    });
}

// this is the function you provided (slightly modified)
function calculateDistance(p1, p2) {
    var erdRadius = 6371;

    p1.Longitude = p1.Longitude * (Math.PI / 180);
    p1.Latitude = p1.Latitude * (Math.PI / 180);
    p2.Longitude = p2.Longitude * (Math.PI / 180);
    p2.Latitude = p2.Latitude * (Math.PI / 180);

    var x0 = p1.Longitude * erdRadius * Math.cos(p1.Latitude);
    var y0 = p1.Latitude * erdRadius;

    var x1 = p2.Longitude * erdRadius * Math.cos(p2.Latitude);
    var y1 = p2.Latitude * erdRadius;

    var dx = x0 - x1;
    var dy = y0 - y1;

    return Math.sqrt((dx * dx) + (dy * dy));
}

// finaly, sort the cities according to their distance
array.sort(function (a, b) {
    return a.distance - b.distance;
}); 
```

[这](http://jsfiddle.net/MLETD/)是一个工作小提琴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T00:58:34.207

我会建议一个更像这样的 JSON 结构：

```
[
  {
    "City": "City A",
    "Position": {
        "Longitude": 9.96233,
        "Latitude": 49.80404
    }
  },
  {
    "City": "City B",
    "Position": {
        "Longitude": 6.11499,
        "Latitude": 50.76891
      }
   }
] 
```

每个城市都是一个对象，都保存在一个数组中。这将使其更易于访问和使用。

然后用`$.each()`以下内容替换您的循环：

```
$.each(myData, function (a, b)
{
    b.Distance = hesapla(9.9608999, 49.7222842, b.Position.Longitude, b.Position.Latitude);
});

myData.sort(function(a, b)
{
    var distanceA = parseFloat(a.Distance);
    var distanceB = parseFloat(b.Distance);

    if(distanceA > distanceB)
    {
        return 1;
    }
    else if(distanceA < distanceB)
    {
        return -1;
    }
    return 0;
});

for(var i = 0, iMax = 10; i < iMax; i++)
{
    $("#groups").append('<li><h2>' + myData[i].City + '</h2><p>' + myData[i].Distance + '</p></a></li>');
} 
```

这将计算每个的距离并将其存储在城市的对象中，按距离排序，然后输出前 10 个条目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T01:41:00.940

您的对象应该是一个列表。您可以即时转换它，而不是更改您的输入。

将距离计算保持为实数而不是将其转换为字符串也很重要。

```
function schoneStrecke(d){
    if (d < 1) {
        return Math.round(d * 1000) +" m";
    } else {
        return Math.round(d * 10) / 10 +" km";
    }
}; 
```

然后仅在创建输出时调用它：

```
$("#groups").append('<li><h2>' + myList[i].name + '</h2><p>' + schoneStrecke(myList[i].distance) + '</p></a></li>'); 
```

这是我的小提琴：http: [//jsfiddle.net/krets/7f8pY/2/](http://jsfiddle.net/krets/7f8pY/2/)