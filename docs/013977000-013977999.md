# StackOverflow 问答 13977000-13977999

# mysql - 使用 case 语句插入列

> ID：13977000
> 
> 赞同：1
> 
> 时间：2012-12-20T16:59:21.700
> 
> 标签：mysql, sql, insert, case

我有一个问题，我想在单个列中查找语句，每次找到它们时都会在组合中插入一个新列。我正在使用 mysql 数据库。

例如说我有这样的数据

```
 Class     Sub
  -----------------
    1       math       
    1       tech 
    2       math
    2       english
    3       math 
```

我希望数据像这样输出：

```
Class    math  tech english
---------------------------
    1      Y     Y     N
    2      Y     N     Y
    3      Y     N     N 
```

我正在尝试使用`CASE`语句来查找列中的值，但问题是它只会在列中为它找到的值返回一个结果，并且我最终得到相同的类，每列都有一个 case 语句. 组合案例语句将不起作用，因为它仍然给我一个单列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:01:44.610

您需要将`CASE`表达式包装在一个聚合中并添加一个 `GROUP BY`. 在这种情况下`MAX`，将按字母顺序工作`Y``N`

[（SQL 小提琴演示）](http://www.sqlfiddle.com/#!3/186ec/13)

```
SELECT class,
       MAX(CASE
             WHEN ( community_id = 'Math' ) THEN 'Y'
             ELSE 'N'
           END)  AS Math,
       MAX (CASE
              WHEN ( community_id = 'tech' ) THEN 'Y'
              ELSE 'N'
            END) AS tech,
       MAX (CASE
              WHEN ( community_id = 'english' ) THEN 'Y'
              ELSE 'N'
            END) AS english
FROM   x_class_community
GROUP  BY class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:02:53.210

您需要使用`PIVOT`功能。你还没有指定你的 DBMS，但是这里有一个 SQL Server 的链接：[Using PIVOT and UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:27:50.360

如果您使用的是 SQL Server，那么您可以使用以下`PIVOT`功能：

```
select class,
  isnull(math, 'N') math, 
  isnull(tech, 'N') tech, 
  isnull(english, 'N') english
from
(
  SELECT class, community_id, 'Y' as flag
  FROM   x_class_community
) src
pivot
(
  max(flag)
  for community_id in (math, tech, english)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/186ec/6)

结果是：

```
| CLASS | MATH | TECH | ENGLISH |
---------------------------------
|     1 |    Y |    Y |       N |
|     2 |    Y |    N |       Y |
|     3 |    Y |    N |       N | 
```

# c# - 混合旋转和列值时，不能在列标题上使用 id

> ID：13977002
> 
> 赞同：1
> 
> 时间：2012-12-20T16:59:32.717
> 
> 标签：c#, .net, mysql, sql, sql-server

在此查询中：

```
select *
from
(
  select distinct a.id as 'Id Documento', 
    b.valor, 'index'+cast(row_number() over(partition by a.id order by b.idIndice) as varchar(10)) rn
  from tgpwebged.dbo.sistema_Documentos as a
  join tgpwebged.dbo.sistema_Indexacao as b on a.id = b.idDocumento
  join tgpwebged.dbo.sistema_DocType as c on a.idDocType = c.id
  join tgpwebged.dbo.sistema_DocType_Index as d on c.id = d.docTypeId
  where d.docTypeId = 40 
  and  (b.idIndice = 11 AND b.valor = '11111111' OR b.idIndice = 12 AND b.valor = '11111')
) src
pivot
(
  max(valor)
  for rn in (Index1, Index2)
) piv 
```

*   如何在 2 个旋转列中添加 b.idIndice 的值？

我有这个：

```
 id Documento  Index1 Index2 
```

我需要

```
 id Documento 11 12 
```

第二。我正进入（状态

```
Id Documento    Index1     Index2
13          11111111   11111111
14          11111111   11111111
16          11111      11111 
```

它混合了这些值......值'11111111'应该在Index1列上，'11111'应该在Index2列上。

我能做些什么？

# php - 将数据加载到从基类 php 派生的对象中

> ID：13977008
> 
> 赞同：0
> 
> 时间：2012-12-20T16:59:54.980
> 
> 标签：php, interface, abstract-class

我已经开始在 PHP 中编写一个电子商务类库作为抽象类，目的是强制具体类的实现使用将数据加载到对象中的 load() 方法：

```
abstract Cart {
    abstract function load();
    // other stuff ...
}

class MyCart extends Cart {
    public function load()
    {
        // pull in data from anywhere ...
    }
} 
```

我想知道这是否是这样做的正确方法......

我想要：

*   保持核心库不受影响。
*   保持非常简单，我们打算重复使用此代码，其他人将实现它。

我听说过适配器和东西，虽然我还没有研究过这些（还）..有人能指出我正确的方向吗？

干杯，约翰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:17:47.453

我建议不要使用抽象类，而是为此目的使用接口：

```
interface Cart {
  public function load();
  // other stuff ...
}

class MyCart implements Cart {
  public function load()
  {
    // pull in data from anywhere ...
  }
} 
```

接口用于描述派生类的结构，如果您想添加提供相同方法的不同类，这是最好的方法。另一个优点是一个类只能扩展一个父类（即您的 Cart 类），但可以实现多个接口。[在 PHP.net 上](http://de3.php.net/manual/en/language.oop5.interfaces.php)阅读有关接口的更多信息，这里有一段摘录强调了为什么我认为这种模式符合您的要求：

> 对象接口允许您创建指定类必须实现哪些方法的代码，而无需定义如何处理这些方法。

# php - PHP Array 效率 vs mySQL 查询

> ID：13977010
> 
> 赞同：0
> 
> 时间：2012-12-20T16:59:55.407
> 
> 标签：php, javascript, mysql

我有一个大约 9.5K 行的 MySQL 表，这些不会有太大变化，但我可能会慢慢添加。

我有一个过程，如果有人扫描条形码，我必须检查该条形码是否与此表中的值匹配。实现这一目标的最快方法是什么？我必须提到这些价值观没有模式

这里有一些想法

1.  Ajax 调用 PHP 文件来查询 MySQL 表（我的想法会是最慢的）
2.  登录时将此 MySQL 表加载到数组中。然后在扫描 Ajax 调用 PHP 文件时检查数组
3.  登录时将此表加载到数组中。查看扫描页面时，以某种方式将该数组加载到 JavaScript 数组中并使用 JavaScript 检查。（在我看来这似乎是最快的，因为它消除了 Ajax 调用和 MySQL 查询。拆分成更小的数组是否有效，这样我就不会落后于服务器和浏览器？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:13:24.543

老实说，我永远不会为任何东西加载整个表。我要做的就是向 PHP 网关发出 AJAX 请求，然后查询数据库并返回结果（或不返回任何内容）。它可以非常快（因为它仅取决于延迟）并且您可以大量缓存该结果（通过[**memcached**](http://memcached.org/)或类似的东西）。

真的没有理由为“验证”加载整个数组......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:01:48.627

**使用索引良好**的 MySQL 表要快得多，然后通过数组查找某些东西。

但最终，这一切都取决于您*真正*想要对数据做什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T17:05:09.863

正如您提到的，您的表包含大约 9.5K 的数据。在登录或扫描页面上加载数据没有逻辑。

最好为您的表编制索引并在需要时进行 ajax 调用。

祝你好运！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T17:23:43.220

虽然 9.5 K 行并不多，但相关的数据量需要一些时间来传输。

因此——一般来说——我建议**在服务器端运行值验证**。AJAX 是很容易做到这一点的正确技术。

加载所有 9.5 K 行只是为了找到一个特定的行，这绝对是一种资源浪费。对单个值运行**SELECT 查询**。

**在客户端/AJAX 公开 PHP 功能**

看看[xajax 项目](http://www.xajax-project.org)，它允许在客户端将整个 PHP 类或单个方法公开为 AJAX 方法。此外，xajax 有助于客户端和服务器之间的参数交换。

**索引要搜索的属性**

请确保**保存条形码值的列已[编入索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)**。如果验证过程趋于缓慢，请注意[MySQL 表扫描](http://dev.mysql.com/doc/refman/5.0/en/how-to-avoid-table-scan.html)。

**避免表扫描**

To avoid table scans and keep your queries run fast, do use **fixed sized fields**. E.g. VARCHAR() besides other types makes queries slower, since rows no longer have a fixed size. No fixed-sized tables effectively prevent the database to easily predict the location of the next row of the result set. **Therefore, you e.g. CHAR(20) instead of VARCHAR().**

**Finally: Security!**

Don't forget, that any data transferred to the client side may expose sensitive data. While your 9.5 K rows may not get rendered by client's browser, the rows do exist in the generated HTML-page. Using *Show source* any user would be able to **figure out all valid numbers**.

Exposing valid barcode values may or may not be a security problem in your project context.

*PS: While not related to your question, I'd propose to use [PHPexcel](https://github.com/PHPOffice/PHPExcel) for reading or writing spreadsheet data. Beside other solutions, e.g. a PEAR-based framework, PHPExcel depends on nothing.*

# image - 如何在 Flash 中制作一种刮板？

> ID：13977013
> 
> 赞同：0
> 
> 时间：2012-12-20T17:00:07.293
> 
> 标签：image, flash, actionscript

我想知道是否有人可以教我如何在 Flash 中制作一个场景，其中你有一个图像在另一个之上，你可以刮掉最上面的一个来显示下面的内容。

有点像那些奖品卡，您必须在其中刮擦银器以查看下面是否有奖品。

任何人都知道这是否可能在闪存中实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:11:08.640

是的，这是可能的，[这](http://www.ilike2flash.com/2009/07/create-scratch-card-in-actionscript-3.html)是一个例子。我确定还有其他人。

这个概念是您使用蒙版来隐藏图像。然后，当用户将鼠标悬停在对象上时，使用鼠标移动事件侦听器在蒙版上绘制。蒙版上带有某些东西的部分（即：您在鼠标移动侦听器中绘制的东西）将显示被蒙版的底层对象。

# intuit-partner-platform - 在 java 中创建 X.509 密钥

> ID：13977019
> 
> 赞同：0
> 
> 时间：2012-12-20T17:00:25.603
> 
> 标签：intuit-partner-platform

我已按照[创建 x509 证书](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_&_Categorization_Apps/0010_GettingStarted/0015_Create_an_Agg_&_Cat_integration/0010_Creating_X.509_Public_Certificates#Java)的说明进行操作，但是，在上传证书后，我得到了

> 您的 x.509 证书无效。请上传新证书

有人看到一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:20:58.403

您能否提供有关您的证书的更多详细信息：

1) 它是一个有效的 X.509 证书，base64 编码 (PEM) 格式，密钥大小为 1024 字节吗？

此外，您发布的链接对于文档也不正确。是这里 ：

[创建 X509 证书](https://ipp.developer.intuit.com/index.php?title=0010_Intuit_Partner_Platform/0020_Aggregation_&_Categorization_Apps/0010_GettingStarted/0015_Create_an_Agg_&_Cat_integration/0010_Creating_X.509_Public_Certificates)

2) 错误是在上传 CERT 时还是在注册时（点击提交按钮）发生的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T23:59:24.483

您始终可以仅从 PEM 导出公钥并上传。您需要提交支持票，以便我们调查您的证书，因为我们需要查看它。

我已按照 .Net 自签名说明进行操作，没有任何问题。然而，其他人对 PEM 有疑问。按照他们的信，或者像我说的那样将 pub cert 导出为文本。那应该工作。

问候，
杰瑞德

# java - 无法弄清楚这个 Obj 文件解析器有什么问题

> ID：13977021
> 
> 赞同：1
> 
> 时间：2012-12-20T17:00:36.717
> 
> 标签：java, android, opengl-es, wavefront

我很难弄清楚我的 obj 文件解析器有什么问题，它只是绘制了一些倾斜的三角形而不是立方体形状。解析器的代码

```
public ObjLoader(Context context){
        loaderContext = context;
        am = context.getAssets();
        InputStream file = getFile("3dsmax.obj");
        BufferedReader br = new BufferedReader(new InputStreamReader(file));

        String str;

        ArrayList<Float> tempModelVertices = new ArrayList<Float>();
        ArrayList<Float> tempTextureVertices = new ArrayList<Float>();
        ArrayList<Float> tempNormalVertices = new ArrayList<Float>();
        ArrayList<Integer> facesM = new ArrayList<Integer>();
        ArrayList<Integer> facesT = new ArrayList<Integer>();
        ArrayList<Integer> facesN = new ArrayList<Integer>();

        try {
            while((str = br.readLine())!=null){
                if(str.startsWith("f")){
                    String[] strAr = str.replaceAll("f", "").trim().split(" ");
                    for(String s : strAr){
                        String[] cornerAr = s.split("/");
                        facesM.add(Integer.parseInt(cornerAr[0].trim())-1);
                        facesT.add(Integer.parseInt(cornerAr[1].trim())-1);
                        facesN.add(Integer.parseInt(cornerAr[2].trim())-1);
                    }
                }
                else if(str.startsWith("vt")){
                    String[] strAr = str.replaceAll("vt", "").trim().split(" ");
                    tempTextureVertices.add(Float.valueOf(strAr[0].trim()));
                    tempTextureVertices.add(-1*Float.valueOf(strAr[1].trim()));
                }
                else if(str.startsWith("vn")){
                    String[] strAr = str.replaceAll("vn", "").trim().split(" ");
                    tempNormalVertices.add(Float.valueOf(strAr[0].trim()));
                    tempNormalVertices.add(Float.valueOf(strAr[1].trim()));
                    tempNormalVertices.add(Float.valueOf(strAr[2].trim()));
                }
                else if(str.startsWith("v")){               
                    String[] strAr = str.replaceAll("v", "").trim().split(" ");
                    tempModelVertices.add(Float.valueOf(strAr[0].trim()));
                    tempModelVertices.add(Float.valueOf(strAr[1].trim()));
                    tempModelVertices.add(Float.valueOf(strAr[2].trim()));      
                }
            }
            //Log.v(LOG_TAG, "v :"+ String.valueOf(v) + "vt :"+ String.valueOf(vt) + "vn :"+ String.valueOf(vn) + "f :"+ String.valueOf(f));
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Log.v(LOG_TAG, "error");
        }
        Log.v(LOG_TAG, "vt " + String.valueOf(tempTextureVertices.size()) + " vn " + String.valueOf(tempNormalVertices.size()) + " v " + String.valueOf(tempModelVertices.size()));

        modelVertices = new float[facesM.size()];
        textureVertices = new float[facesT.size()];
        normalVertices = new float[facesN.size()];

        for(int i=0; i<facesM.size(); i++){
            modelVertices[i] = tempModelVertices.get(facesM.get(i));
        }
        for(int i=0; i<facesT.size(); i++){
            textureVertices[i] = tempTextureVertices.get(facesT.get(i));
        }
        for(int i=0; i<facesN.size(); i++){
            normalVertices[i] = tempNormalVertices.get(facesN.get(i));
        }
        for(float f: modelVertices){

        } 
```

使用opengl初始化绘制它的代码

```
ObjLoader obj = new ObjLoader(mActivityContext);
        totalEle = obj.modelVertices.length;
        // Initialize the buffers.
        mSquareCoords = ByteBuffer.allocateDirect(obj.modelVertices.length * mBytesPerFloat)
                .order(ByteOrder.nativeOrder()).asFloatBuffer();    
        mSquareCoords.put(obj.modelVertices).position(0);

        mSqaureTextureCoords = ByteBuffer.allocateDirect(obj.textureVertices.length * mBytesPerFloat)
                .order(ByteOrder.nativeOrder()).asFloatBuffer();    
        mSqaureTextureCoords.put(obj.textureVertices).position(0);

        mSquareNormalCoords = ByteBuffer.allocateDirect(obj.normalVertices.length * mBytesPerFloat)
                .order(ByteOrder.nativeOrder()).asFloatBuffer();    
        mSquareNormalCoords.put(obj.normalVertices).position(0); 
```

和drawOnFrame

```
mMVPMatrixHandle = GLES20.glGetUniformLocation(mProgramHandle, "u_MVPMatrix");
        mMVMatrixHandle = GLES20.glGetUniformLocation(mProgramHandle, "u_MVMatrix");
        mTextureUniformHandle = GLES20.glGetUniformLocation(mProgramHandle, "u_Texture");
        mPositionHandle = GLES20.glGetAttribLocation(mProgramHandle, "a_Position");
        mTextureCoordinateHandle = GLES20.glGetAttribLocation(mProgramHandle, "a_TexCoordinate");
        mNormalHandle = GLES20.glGetAttribLocation(mProgramHandle, "a_Normal");

        if(updateTexture)
        {
            if(mTextureDataHandle != null){
                GLES20.glDeleteTextures(1, mTextureDataHandle, 0);
            }
            mTextureDataHandle = TextureHelper.loadTexture(texture);
            //mTextureDataHandle = TextureHelper.loadTexture(getFile("coinAnimation/1230025.png"));
            //mTextureDataHandle = TextureHelper.loadTexture(mActivityContext, textureId);
            textureWidth = mTextureDataHandle[1];
            textureHeight = mTextureDataHandle[2];

            updateTexture = false;
        }
        //GLES20.glBlendFunc(GLES20.GL_SRC_COLOR, GLES20.GL_DST_ALPHA);

        // Set the active texture unit to texture unit 0.
        GLES20.glActiveTexture(GLES20.GL_TEXTURE0);

        // Bind the texture to this unit.
        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle[0]);

        // Tell the texture uniform sampler to use this texture in the shader by binding to texture unit 0.
        GLES20.glUniform1i(mTextureUniformHandle, 0);

        long time = SystemClock.uptimeMillis() % 10000L;
        float angleInDegrees = (360.0f / 10000.0f) * ((int) time);

        //Identity matrix of the object
        Matrix.setIdentityM(mModelMatrix, 0);
        //Matrix.scaleM(mModelMatrix, 0, 0.2f, 0.2f, 1.0f);
        Matrix.rotateM(mModelMatrix, 0, angleInDegrees, 0.0f, 0.0f, 1.0f);
        //Scaling
        //Matrix.scaleM(mModelMatrix, 0, 1.0f, 1.0f, 0.0f);
        //Moving
        Matrix.translateM(mModelMatrix, 0, 0.0f, 0.0f, -7.0f);
        //Rotating

        // Pass in the position information
        mSquareCoords.position(0);  
        GLES20.glVertexAttribPointer(mPositionHandle, mCoordsSize, GLES20.GL_FLOAT, false,
                0, mSquareCoords);

        GLES20.glEnableVertexAttribArray(mPositionHandle);

        // Pass in the normal information
        mSquareNormalCoords.position(0);
        GLES20.glVertexAttribPointer(mNormalHandle, mNormalDataSize, GLES20.GL_FLOAT, false,
                        0, mSquareNormalCoords);

        GLES20.glEnableVertexAttribArray(mNormalHandle);

        mSqaureTextureCoords.position(0);
        GLES20.glVertexAttribPointer(mTextureCoordinateHandle, mTextureCoordinateDataSize, GLES20.GL_FLOAT, false,
                0, mSqaureTextureCoords);

        GLES20.glEnableVertexAttribArray(mTextureCoordinateHandle);

        // This multiplies the view matrix by the model matrix, and stores the result in the MVP matrix
        // (which currently contains model * view).
        Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mModelMatrix, 0);

        // Pass in the modelview matrix.
        GLES20.glUniformMatrix4fv(mMVMatrixHandle, 1, false, mMVPMatrix, 0);

        // This multiplies the modelview matrix by the projection matrix, and stores the result in the MVP matrix
        // (which now contains model * view * projection).
        Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);

        // Pass in the combined matrix.
        GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);

        // Draw the cube.
        GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, totalEle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:02:31.033

无需编写其他人已经完成的代码。检查[这个](https://github.com/TraxNet/ShadingZen/blob/master/library/src/main/java/org/traxnet/shadingzen/core/shapes/OBJMesh.java)

mCoordsSize、mNormalDataSize、mTextureCoordinateDataSize 的尺寸是多少？

同时移动 GLES20.glEnableVertexAttribArray(mPositionHandle); 在传递指针之前：

```
GLES20.glEnableVertexAttribArray(mPositionHandle);
GLES20.glVertexAttribPointer(mPositionHandle, mCoordsSize, GLES20.GL_FLOAT, false,
            0, mSquareCoords); 
```

尝试隔离问题是在您的 obj 解析代码中还是在您的绘图代码中。例如自己生成顶点数据。

# php - csv 的文件下载在本地主机中有效，但在实时时无效

> ID：13977022
> 
> 赞同：1
> 
> 时间：2012-12-20T17:00:42.703
> 
> 标签：php, csv, http-headers, download

我正在从嵌套数组创建一个 csv 文件，它可以与本地主机中的 csv 文件的下载链接一起正常工作，但在实时主机上它不会下载。这是我的 php 文件中的内容：

标头声明：

```
/**
* Declare headers for CSV
 */
header("Content-type: text/csv");
header("Content-Disposition: attachment; filename=registration.csv");
header("Pragma: no-cache");
header("Expires: 0"); 
```

输出 csv 文件的函数：

```
/**
* Function will output the scsv file
* @param the csv $data in nested array form array(array("","",""),array("",""...)...)
*/
function outputCSV($data) {
$outstream = fopen("php://output", "w");
function __outputCSV(&$vals, $key, $filehandler) {
    fputcsv($filehandler, $vals); // add parameters if you want
}
array_walk($data, "__outputCSV", $outstream);
fclose($outstream);
} 
```

我在本地使用的链接：

```
<a href=".../csv/csv.php">Download CSV</a> 
```

不适用于 Live 网站。无需下载它，只需将我带到 csv.php 页面并以这样的字符串输出数组。

...ID，“一号教练”，“二号教练”，工作，手机，电子邮件，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:20:50.093

尝试将 csv 硬编码到代码中。将这些行替换为您必须查看传递的数据是否包含错误字符的行。也许指定字符集会有所帮助。

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv');
$output = fopen('php://output', 'w');
fputcsv($output, array('Column 1', 'Column 2', 'Column 3')); 
```

如此处所述：

[http://code.stephenmorley.org/php/creating-downloadable-csv-files/](http://code.stephenmorley.org/php/creating-downloadable-csv-files/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:20:59.430

我没有准备好真正调试您的代码。如果你愿意，你可以试试这个。我知道它有效。

```
$out = fopen("php://temp", 'r+');
while (($row = $res->fetch(Zend_Db::FETCH_NUM)) != false) {
    fputcsv($out, $row, ',', '"');
}                       
rewind($out);
$csv  = stream_get_contents($out);
header("Content-Type: application/csv;");
header("Content-Disposition: attachment; filename=\"foo.csv\"");        
header("Pragma: no-cache");
header("Expires: 0");        
echo $csv;
exit(0); 
```

根据需要调整循环以迭代您的结果。

# regex - 正则表达式匹配数字和逗号，但不匹配以 0 开头的数字，除非它是 0，

> ID：13977036
> 
> 赞同：0
> 
> 时间：2012-12-20T17:01:28.060
> 
> 标签：regex

好吧，我试图在标题中总结它。

我需要一个正则表达式来匹配数字和逗号，但不是以 0 开头的数字，除非它是 0,number

我的用户在字段中输入小时数，因此他们必须能够输入 0,3 小时，但不允许输入 002 或 09。

我有这个注册前

```
^[0-9]*\,?[0-9]+$ 
```

如何将其扩展为不允许以 0 开头，除非 0 后跟逗号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:07:56.390

这应该适合您的需求：

```
^0,\d*[1-9]|[1-9]\d*$ 
```

*   任`0,\d*[1-9]`一：0，后跟逗号，后跟 0 或多个数字，后跟 1 到 9 之间的一位数字
*   or `[1-9]\d*`: 1 到 9 之间的数字，后跟零个或多个数字

火柴：

*   0,3
*   0,03
*   3
*   30

不匹配：

*   0
*   0,0
*   0,30
*   03

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:14:21.570

另一个 ：）

```
^(0|[1-9]\d*(|,\d+)|0,\d+)$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T20:55:04.130

您无需将所有内容强制转换为单个正则表达式即可执行此操作。

如果您使用多个正则表达式会更清楚，每个正则表达式都进行特定检查。

```
if ( /^[0-9]+,[0-9]+$/ || /^[1-9][0-9]*$/ ) 
```

在这里，我们进行了两种不同的检查。“要么这个匹配，要么另一个匹配”，然后你不必将两个条件都塞进一个正则表达式中。

使用宿主语言的表达形式，而不是试图将逻辑塞进正则表达式。

# entity-framework - 实体框架，更新 UPDATE 语句与 FOREIGN KEY 约束“FK

> ID：13977038
> 
> 赞同：3
> 
> 时间：2012-12-20T17:01:39.090
> 
> 标签：entity-framework, wcf-ria-services, silverlight-5.0

我编写了一个 Silverlight MVVM（SimpleMVVM 工具包）Ria 服务应用程序，其中包含从现有数据库生成的 EntityFramework 模型。首先是显示列表父实体的页面的 ViewModel 我加载了父母，选择一个后，我可以进一步转到编辑页面，在那里我对子实体进行管理。在此之前，我通过 pageDataHelper - 它所拥有的键值对字典将父实体传递给 Edition Page 的 ViewModel，并从数据库中刷新它。接下来，我可以通过实体主键加载，它是 ListBox 的子项。通过这个，我可以对孩子做 CRUD。幸运的是，当我想更新其中一个时，我得到了：

> UPDATE 语句与 FOREIGN KEY 约束“FK_Pozycje_Kosztorysy”冲突 冲突发生在数据库“D:...\APP_DATA\EMS.MDF”、表“dbo.Kosztorysy”、列“KosID”中。

应用程序在数据库中进行更新，但实体框架总是抛出异常，我处理...数据库中的两个表都设置了更新/删除级联。实体看起来：

```
internal sealed class KosztorysMetadata
    {
   public int KosID { get; set; }//Primary Key
   public EntityCollection<Pozycja> Pozycje { get; set; } //Childs           
    }
}
  internal sealed class PozycjaMetadata
    {
  public int KosID { get; set; }// Foreign Key
  public int PozID { get; set; }//Primary Key
   }
} 
```

在 App.Web 中，获取实体的函数：

```
 public IQueryable<Kosztorys> GetKosztorysByID(int id)
   {
    var query = from k in this.ObjectContext.Kosztorysy
                    where k.KosID==id
                    select k;
    return query;
}
  public IQueryable<Pozycja> GetPozycjeGlowne(Int32 id)
    {
        var query = from k in this.ObjectContext.Pozycje
                    where k.KosID == id && (k.NadPozID == null || k.TypRMS == 0 || k.TypRMS == TypRMSBVals.Dzial)
                    select k;
        return query;
    } 
```

在视图模型中；

```
class KosztorysViewModel{
   public Kosztorys WybranyKosztorys
        {
            get { return wybranyKosztorys; }
            set{  WybranyKosztorys = value;}} 
        private ObservableCollection<Kosztorys> kosztorysy;
        public ObservableCollection<Kosztorys> Kosztorysy{}}

  public void OdsiwezKosztorys()//Refresh parent
        {  this.serviceAgent.PobKosztorys(WybranyKosztorys.KosID, (encje, ex) => { kosztorysOdswiezony(encje, blad); });
                         }
 void kosztorysOdswiezony(List<Kosztorys> encje, Exception exc) //Refreshed Parent
        { Kosztorysy = new ObservableCollection<Kosztorys>(encje);
                            WybranyKosztorys = Kosztorysy[0];}

      public void PobDzialy()
            {
                if (WybranyKosztorys != null)
                {
                    this.serviceAgent.PobGlownePozycje(WybranyKosztorys.KosID, (encje, ex) => dzialyPobrane(encje, ex));
                               }
            }
     void dzialyPobrane(List<Pozycja> encje, Exception exc) //callback
            {          
                                    Dzialy.Clear();
                                    Dzialy = new ObservableCollection<Pozycja>(encje);
                }} 
```

怎么了？我使用 ;EF4.3、Silverlight 5、MS SQL Server 2008R

# android - 如何在 Android 中正确使用预加载的数据库

> ID：13977040
> 
> 赞同：4
> 
> 时间：2012-12-20T17:01:44.557
> 
> 标签：android, android-sqlite

我想使用预加载的数据库。数据库必须附加到应用程序中，然后才能更新。我对如何连接它以避免问题有很多疑问。我问那些处理这个问题的专业人士。谢谢你。

1.  如果我的 base 大于 1 MB，就会弹出错误 D / assets (909): Data超过 UNCOMPRESS_DATA_MAX。可以分解成小于 1 兆字节的片段，并且可以更改为增加（“.jpg”、“.jpeg”、“.png”、“.gif”、“.wav”、“.mp2”、“. mp3”、“.ogg”、“.aac”、“.mpg”、“.mpeg”、“.mid”、“.midi”、“.smf”、“.jet”、“.rtttl”、“. imy”、“.xmf”、“.mp4”、“.m4a”、“.m4v”、“.3 gp”、“.3 gpp”、“.3 g2”、“.3 gpp2”、“.amr "、".awb"、".wma"、".wmv")。哪个选项更好（更容易 - 更改扩展名）。

2.  可能会失败“没有这样的表 android_metadata”，但我手动添加到数据库 en_US，但如果应用程序多语言怎么办？

3.  在读取数据库时，我使用了方法mDb = getReadableDatabase();，但是我在仔细阅读的最后——mDb.close(); 正如他们在互联网上所说的，可能不在乎任何错误无法打开数据库文件。这尤其适用于 HTC 设备。

以下报价代码

```
public class QuestionsDbAdapter extends SQLiteOpenHelper {

private String DATABASE_PATH = "/data/data/YOUR_PACKAGE/";
public static final String DATABASE_NAME = "mantestQuestions";

public static final String TABLE_QUESTIONS = "Questions";
public static final String QUESTIONS_COLUMN_ID = "_id";
public static final String QUESTIONS_COLUMN_QUESTION ="Question";

public static final String TABLE_ANSWERS = "Answers";
public static final String ANSWERS_COLUMN_ID = "_id";
public static final String ANSWERS_COLUMN_QUESTION_ID = "QuestionId";
public static final String ANSWERS_COLUMN_ANSWER = "Answer";
public static final String ANSWERS_COLUMN_POINT = "Point";

private SQLiteDatabase mDb;

private final Context mContext;

private boolean mCreateDatabase = false;
private boolean mUpgradeDatabase = false;

/**
 * Constructor
 * Takes and keeps a reference of the passed context in order to access
 * the application's assets and resources
 * @param context
 */
public QuestionsDbAdapter(Context context) {
    super(context, DATABASE_NAME, null, context.getResources().getInteger(R.integer.questionDbVersion));

    mContext = context;
}

public void initializeDatabase(String path) {
    DATABASE_PATH = path;
    getWritableDatabase();

    if(mUpgradeDatabase) {
        mContext.deleteDatabase(DATABASE_NAME);
    }

    if(mCreateDatabase || mUpgradeDatabase) {
        try {
            copyDatabase();
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

private void copyDatabase() throws IOException {
    close();

    InputStream input = mContext.getAssets().open(DATABASE_NAME);

    String outFileName = DATABASE_PATH + DATABASE_NAME;

    OutputStream output = new FileOutputStream(outFileName);

    // Transfer bytes from the input file to the output file
    byte[] buffer = new byte[1024];
    int length;
    while ((length = input.read(buffer)) > 0) {
        output.write(buffer, 0, length);
    }

    output.flush();
    output.close();
    input.close();

    getWritableDatabase().close();
}

public QuestionsDbAdapter open() throws SQLException {
    mDb = getReadableDatabase();
    return this;
}

public void CleanUp() {
    mDb.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
    mCreateDatabase = true;
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    mUpgradeDatabase = true;
}

/**
 * Public helper methods
 */

public Cursor getQuestionById(long rowId) throws SQLException {
    Cursor cursor = mDb.query(true, TABLE_QUESTIONS,
            new String[] { QUESTIONS_COLUMN_ID, QUESTIONS_COLUMN_QUESTION }, QUESTIONS_COLUMN_ID + "=" + rowId,
            null, null, null, null, null);

    return cursor;
}

public Cursor getAnswerById(long rowId) throws SQLException {
    Cursor cursor = mDb.query(true, TABLE_ANSWERS,
            new String[] { ANSWERS_COLUMN_ID, ANSWERS_COLUMN_QUESTION_ID, ANSWERS_COLUMN_ANSWER, ANSWERS_COLUMN_POINT },
            ANSWERS_COLUMN_ID + "=" + rowId,
            null, null, null, null, null);

    return cursor;
}

public Cursor getAnswersByQuestionId(long questionId) throws SQLException {
    Cursor cursor = mDb.query(true, TABLE_ANSWERS, new String[] {ANSWERS_COLUMN_ANSWER, ANSWERS_COLUMN_POINT},
            ANSWERS_COLUMN_QUESTION_ID + "=" + questionId, null, null, null, null, null);

    return cursor;
}

public long getCount() {
    String sql = "SELECT COUNT(*) FROM " + TABLE_QUESTIONS;
    SQLiteStatement statement = mDb.compileStatement(sql);
    long count = statement.simpleQueryForLong();
    return count;
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T17:16:32.643

不需要这个凌乱的代码，这对你来说是一个很好的解决方案[Android SQLiteAssetHelper](https://github.com/jgilfelt/android-sqlite-asset-helper)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T08:31:15.920

我认为问题在于您只需要将图像存储在移动应用程序中，但如果它的大小非常大，请从服务器中检索它，感谢@confucius 对本文的帮助，它确实有帮助，这是另一个分步教程，它解释了[如何使用sqlite浏览器在android中制作一个预加载的数据库](http://androidgifts.com/import-sqlite-database-into-android-using-sqlite-browser/)

# shell - 从 shell 脚本中的变量中删除非 ascii 字符

> ID：13977043
> 
> 赞同：3
> 
> 时间：2012-12-20T17:01:56.573
> 
> 标签：shell, non-ascii-characters

我正在使用 shell 脚本中的命令输出并将结果存储在变量中。

由于 grep 使用的解析逻辑，有一个非常极端的情况，该变量可能包含非 ascii 字符。

问题：如何在 shell 脚本中从这个变量中删除这些非 ascii 字符，以便在后续命令中使用该变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T18:24:49.963

如果您使用的是 bash，并且您的变量被调用`var`，那么

```
"${var//[^[:ascii:]]/}" 
```

将扩展为`var`删除所有非 ASCII 字符。所以：

```
var_non_ascii=${var//[^[:ascii:]]/} 
```

应该做。（这绝对是最好的方法：没有子外壳，也没有外部进程的分支来 bash）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T17:10:51.603

假设你的变量是 var，试试这个：

```
var=$(echo $var | sed 's/[^\x00-\x7F]//g') 
```

这应该删除非ASCII字符

# javascript - 在 javascript for 循环中使用匿名函数

> ID：13977046
> 
> 赞同：19
> 
> 时间：2012-12-20T17:02:16.097
> 
> 标签：javascript, for-loop, closures

我已经在 for 循环中看到匿名函数在一两个地方诱导网络上的新范围，并且想知道它是否有意义。

例如：

```
var attr, colors = ['green','blue','red'];

for ( attr = 0; attr < colors.length; attr++) {
    (function() {
        var colorAttr = colors[attr];

        // do something with colorAttr
    })();
} 
```

我知道这与保持 for 循环内的范围清洁有关，但在什么情况下这是必要的？在需要在 for 循环中声明新 var 的任何地方都这样做是一种好习惯吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-20T17:08:53.973

# 2021 更新

`var`曾经是声明变量的唯一方法。但是我们现在拥有`const`并`let`以更好的方式解决了这个问题。这些变量声明确实将循环视为要绑定的范围，这意味着以下代码段可以正常工作，并且不需要匿名函数来捕获这些值。

```
const colors = ['green', 'blue', 'red'];

for (let i = 0; i < colors.length; i++) {
    const color = colors[i];
    setTimeout(function() {
        alert(color);
    }, i * 1000);
} 
```

以下是我在 2012 年对这个问题的原始回答。

* * *

当您有没有立即执行的内部函数时，作为循环的一部分。

```
var i, colors = ['green', 'blue', 'red'];

for (i = 0; i < colors.length; i++) {
    var color = colors[i];
    setTimeout(function() {
        alert(color);
    }, i * 1000);
}

// red
// red
// red 
```

即使`var color`在循环内部，循环也没有范围。实际上，每个循环迭代都使用一个变量。因此，当超时触发时，它们都使用相同的值，即循环设置的最后一个值。

```
var i, colors = ['green', 'blue', 'red'];

for (i = 0; i < colors.length; i++) {
    (function(color) {
        setTimeout(function() {
            alert(color);
        }, i * 1000);
    })(colors[i]);
}

// green
// blue
// red 
```

这个将每次迭代的值捕获到函数的参数中，这确实创建了一个范围。现在每个函数都有自己的变量版本，该`color`变量在以后执行该循环中创建的函数时不会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:07:11.820

您快到了。如果您将值作为参数*传递给您的**自调用函数*，那么它仅在您的代码段中才有意义。这样，它可以将该变量存储在它自己的*范围对象中*`attr`

 **```
(function( attr ) {
    var colorAttr = colors[attr];

    // do something with colorAttr
})( attr ); 
```

现在，*激活对象*分别是*词法环境记录*（它们是 ES3 和 ES5 范围对象）将有一个条目，用于表示后面的任何值`attr`，因此，它的*closed*。**

# ios - 无法通过 IOS 套接字发送消息

> ID：13977048
> 
> 赞同：1
> 
> 时间：2012-12-20T17:02:21.017
> 
> 标签：ios, objective-c

我正在使用 CFStream 构建一个 IOS 套接字客户端。我已经设法连接到我的测试服务器并从中接收消息。问题是如果客户端发送消息服务器无法接收它，然后客户端没有收到来自服务器的任何消息。我的代码如下。有什么问题？

```
- (void)initCommunicationWithAddress:(NSString*) address withPort:(int) port
{
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;
    CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)address, port, &readStream, &writeStream);

    self.inputStream = (__bridge_transfer NSInputStream *)readStream;
    self.outputStream = (__bridge_transfer NSOutputStream *)writeStream;

    [self.inputStream setDelegate:self];
    [self.outputStream setDelegate:self];
    [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [self.inputStream open];
    [self.outputStream open];
    NSLog(@"Socket Init: %@", @"");
}

- (void)sendMessage:(NSString*)msg
{
    msg =  @"hello";
    NSLog(@"SendMessage: %@", msg);
    NSData *data = [[NSData alloc] initWithData:[msg dataUsingEncoding:NSASCIIStringEncoding]];
    [self.outputStream write:[data bytes] maxLength:[data length]];
}

- (void)stream:(NSStream *)theStream handleEvent:(NSStreamEvent)streamEvent {

    switch (streamEvent) {

        case NSStreamEventOpenCompleted:
            [self streamOpened];
            break;

        case NSStreamEventHasBytesAvailable:
            NSLog(@"Stream Bytes Available:%@", @"");
            if (theStream == self.inputStream) {

                NSMutableData* data = [NSMutableData data];
                uint8_t buffer[1024];
                int len;
                int bytesRead = 0;

                while ([self.inputStream hasBytesAvailable])
                {
                    len = [self.inputStream read:buffer maxLength:sizeof(buffer)];
                    if (len > 0) {

                        [data appendBytes:(const void *)buffer length:len];
                        bytesRead = bytesRead + len;
                    }
                }

                NSString* output = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

                if (nil != output) {
                    [self HandleServerMessage: output];

                }
            }
            break;

        case NSStreamEventErrorOccurred:
             NSLog(@"Stream Error:%@", @"");
            [self streamError];
            break;

        case NSStreamEventEndEncountered:
            NSLog(@"Stream Event End:%@", @"");
            [theStream close];
            [theStream removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [self streamEnd];
            break;

        default:
            NSLog(@"Unknown event");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T15:46:11.050

我发现了我的错误。在向服务器发送任何消息之前，我应该等待 NSStreamEventHasSpaceAvailable 事件或检查空间是否可用。

# validation - 避免在 JPA 中验证 @Size 注释

> ID：13977049
> 
> 赞同：3
> 
> 时间：2012-12-20T17:02:22.747
> 
> 标签：validation, jsf, jpa

我有一个具有以下属性的 JPA 实体：

```
public class Person implements Serializabe {
...
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 45)
@Column(name = "name", nullable = false, length = 45)
private String name;
... 
```

它的观点：

```
<h:outputLabel value="Name: "/>           
<h:inputText id="name"
             value="#{personBean.person.name}"
             validator="#{personValidator.validate}"/>
<rich:message for="name"/> 
```

检查 0 < name.length `personValidator`< 45 是否已存在于数据库中；它工作正常。当我尝试添加一个空名称或大于 45 个字符时，我得到了正确的验证器消息，但在 Glassfish 输出中显示：

```
INFO: WARNING: FacesMessage(s) have been enqueued, but may not have been displayed.
sourceId=contentForm:name[severity=(ERROR 2), summary=(size must be between 1 and 45), detail=(size must be between 1 and 45)] 
```

我尝试添加`<validation-mode>NONE</validation-mode>`到我的 persistence.xml 但没有效果。如何避免此`@Size`注释验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T20:39:52.633

您看到的消息是因为一个 faces 消息（可能来自验证器）已发出，但可能尚未显示。

在这种情况下，`@Size`注释来自 Bean Validation，并由 JPA 和 JSF 处理。

除非您从您的支持 bean 手动生成消息（例如通过在您的业务逻辑周围放置一个 try/catch），否则这个消息实际上来自 JSF，并且禁用 JPA 中的任何内容`persistence.xml`都不会产生影响。

`f:validateBean`您可以通过在输入组件中嵌套标签并将`disabled`属性设置为 true来禁用 JSF 验证。请参阅[使用 JSF 暂时抑制 beanvalidation](https://stackoverflow.com/questions/2332713/temoporarily-suppress-beanvalidation-with-jsf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T20:35:45.410

`validateBean`您可以通过添加标签来禁用特定输入的验证：

```
<h:outputLabel value="Name: "/>           
<h:inputText id="name"
             value="#{personBean.person.name}"
             validator="#{personValidator.validate}">
    <f:validateBean disabled="true"/>
</h:inputText>
<rich:message for="name"/> 
```

# php - ajax 和 php 时事通讯注册表单

> ID：13977052
> 
> 赞同：-4
> 
> 时间：2012-12-20T17:02:27.787
> 
> 标签：php, jquery

我正在构建一个使用 ajax 和 php 来验证用户提交的电子邮件地址的表单。我在 php 方面处于中级水平，但使用 ajax 恐怕我是新手。

我已经完成了所有的 php 并且知道它会正常工作，问题是如何让 ajax 处理 php 脚本，目前我在 ajax 中创建了一个名为 completeSignup(); 的函数；它看起来像：

```
function completeSignup() {
    setTimeout(function() {
        $("#completeform").fadeOut(400, function(){
            $(this).before('<span class="done">All done! We will be in     touch.</span>');
        });
    }, 1100);
} 
```

如何在函数中包含 php 脚本并将其全部保存在同一页面上？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:08:37.570

您没有在任何地方执行 ajax 请求。使用 jquery 时，您可以使用`post()`或之类的方法进行 ajax 查询`ajax()`。如果你看一下 jquery 的文档，你会发现很多关于如何在有/没有将数据发送到 php 文件的情况下进行 ajax 查询的示例。

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

检查示例..

这里只是一个基本的例子..

```
$.ajax({
type: "POST",
url: "some.php",
data: { name: "John", location: "Boston" }
}).done(function( msg ) {
alert( "Data Saved: " + msg );
}); 
```

some.php 文件将包含您的 php 逻辑。仅出于测试目的，`echo`该文件中的某些内容和`die`. 你会以更好的方式理解整个事情。

# iphone - 在monotouch中通过CGBitmapContext组合两个图像时如何避免质量损失

> ID：13977054
> 
> 赞同：0
> 
> 时间：2012-12-20T17:02:43.567
> 
> 标签：iphone, ios, xamarin.ios, core-graphics

我有两张图片。第一个 ( `avatar`) 是 640x640，第二个 ( `like`) 是 21x20。当我试图先画第二个时，我明白了，但质量非常低。这是代码：

```
var bounds = targeImageView.Bounds;
CGImageAlphaInfo alphaInfo = CGImageAlphaInfo.PremultipliedLast;
CGColorSpace colorSpaceInfo = CGColorSpace.CreateDeviceRGB ();
CGBitmapContext resultBitmap = new CGBitmapContext (IntPtr.Zero, (int)bounds.Width, (int)bounds.Height, 8, 4 * (int)bounds.Width, colorSpaceInfo, alphaInfo);
resultBitmap.DrawImage (bounds, avatar.CGImage);
var likeY = 0;
var likeX = 0;
var likeHeight = (float)Math.Floor (bounds.Height / 2);
var likeWidth = likeHeight;
resultBitmap.DrawImage (new RectangleF (likeX, likeY, likeWidth, likeHeight), like.CGImage);
targetImageView.Image = UIImage.FromImage (resultBitmap.ToImage ()); 
```

这是`avatar`同一图像视图上的图片，但没有上面的代码，只是`imageView.Image = avatar;`

![头像](../Images/3cef8866efdf8997d660f0675c6bf671.png)

这是相同的，但在绘制之后。

![在此处输入图像描述](../Images/262498bb54014e001961164177815f81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:58:37.043

你的视力比我好——至少在那么小的尺寸上。如果这是视网膜问题（我认为是这样），那么下面的代码应该可以帮助您，因为它创建了一个可以调整自身以适应视网膜（或不）显示的上下文。

```
UIImage avatar = ...;
UIImage like = ...;
UIGraphics.BeginImageContextWithOptions (avatar.Size, false, 0);
using (CGContext ctx = UIGraphics.GetCurrentContext ()) {
    var rect = new RectangleF (Point.Empty, avatar.Size);
    avatar.Draw (rect);
    // coordinates are likely reversed (UIKit wrt CoreGraphics) you might have to fix them (untried)
    rect = new RectangleF (0, avatar.Height / 2, avatar.Width / 2, avatar.Height / 2);
    like.Draw (rect);

    targetImageView.Image = UIGraphics.GetImageFromCurrentImageContext ();
    UIGraphics.EndImageContext ();
    // dispose of avatar and like UIImage if not used anymore
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T02:40:13.923

1.  使用 PNG，它们是无损的，并且质量比 JPG 或位图更好。

    > NSData *imageData = UIImagePNGRepresentation(image);
    > 
    > UIImage *image=[UIImage imageWithData:data];

2.  使用 CGRectMake() 分配带有框架的 UIImageView 用于放置。您将能够将图像浮动到任何您想要的位置。

3.  使用 [ImageView setImage:...] 设置 ImageView 的图像

4.  图像将呈现得更清晰，您将完全控制质量和位置。

我使用了一个 256 图像压缩到 15px x 15px 并且它仍然保持非常好的形状。相比之下，我也以相反的方式拉伸图像。

# php - 删除 unicode 项目符号字符

> ID：13977057
> 
> 赞同：1
> 
> 时间：2012-12-20T17:03:04.830
> 
> 标签：php, mysql, regex, unicode

我有一个我认为与 unicode 文本有关的问题。当用户输入具有 unicode 项目符号字符的字符串时，mysql 无法保存该字段（尽管更新查询的其余部分有效）。这就是我一直在尝试处理它的方式。

`$str = "· Close up the server";`

```
$str = preg_replace("\u2022", "&bull;", $str); 
```

...但是这仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:11:43.617

这里很多事情都可能出错，因为数据库、表单提交和源代码字符串文字都涉及到。我假设您想使用 UTF-8，因为对于任何其他典型编码（CP1252、Latin1），当您想要使用`json_`或接受超过 200 个不同的字符时，您将被搞砸。

首先要做的是*删除*任何类型的转换等代码，这些代码是为了尝试修复编码问题而编写的。比如`utf8_encode`, `htmlentitites`, `*_replace`.. 随便什么。

* * *

源编码。

```
$str = "· Close up the server"; 
```

在编写上述内容时，PHP 源文件需要以 UTF-8 进行物理编码。如果您在 Windows 上，则必须明确执行或配置此操作。UTF-8 在 Windows 上不会神奇地发生。

* * *

表单提交

当用户提交表单时，有效负载将采用您声明页面的任何编码。您可以像这样声明它：

```
header("Content-Type: text/html; charset=utf-8"); 
```

但实际上任何人都可以向您的服务器提交任意字节，因此您应该在继续之前验证输入是否为 UTF-8。`mb_check_encoding`很好。

* * *

数据库

由于此时您的数据以 UTF-8 格式输入，因此您的输入字符串采用 UTF-8 格式。您必须在连接到数据库后通过指定连接编码来指定它。

```
mysql_set_charset("utf8"); //After making the connection, and before any queries
//or $mysqli->set_charset( "utf8"); 
```

这使得数据库以 UTF-8 读取您的输入，并以 UTF-8 对其输出进行编码。您还希望将列/表/数据库也设置为 UTF-8。

* * *

PHP 不支持Unicode转义序列`\uxxxx`or 。`\uhhhh\ullll``\Uxxxxxxxx`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:32:49.240

`\u2022`是`UTF-16`“子弹”的十六进制编码。不是`UTF-8`。

您可能还想`SET NAMES 'UTF-8';`在打开数据库之前更改字符集。

# java - 如何使用 JBoss AS7 JNDI 数据源，来自在服务器外部运行的 Spring hibernate 项目（Web 应用程序）？

> ID：13977059
> 
> 赞同：0
> 
> 时间：2012-12-20T17:03:08.247
> 
> 标签：java, spring, hibernate, jboss, jndi

> **可能重复：**
> [如何迁移 Java、Spring 项目以使用 JNDI 数据源](https://stackoverflow.com/questions/13977554/how-do-migrate-java-spring-project-to-use-jndi-datasources)

如何从运行在服务器外部的 Spring hibernate 项目中使用 JBoss AS7 JNDI 数据源？

我正在尝试找到一种在 Web 应用程序之外访问我的 JBoss AS7 JNDI 数据源的方法。有人可以告诉我这是否可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:29:22.950

[http://www.engfers.com/2008/08/07/exposing_accessing-jboss-jndi-objects_datasources-from-an-external-jvm/](http://www.engfers.com/2008/08/07/exposing_accessing-jboss-jndi-objects_datasources-from-an-external-jvm/)

看起来像你所追求的。

# ios - 如何在ios的缓存文件路径中保存多个xml文件？

> ID：13977064
> 
> 赞同：0
> 
> 时间：2012-12-20T17:03:22.287
> 
> 标签：ios, xml, download

我将 xml 文件保存在缓存文件路径中，如下所示：

```
// Determile cache file path
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 filePathl = [NSString stringWithFormat:@"%@/%@", [paths objectAtIndex:0],@"list.xml"];   

// Download and write to file
 NSURL *url = [NSURL URLWithString:detail_product_listing_rss];
 NSData *urlData = [NSData dataWithContentsOfURL:url];
 [urlData writeToFile:filePathl atomically:YES]; 
```

但是使用此代码我可以检索最近使用的 xml 文件的数据。有人可以告诉我如何保存多个 xml 文件以供离线使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:13:53.163

您需要使用不同的名称保存 xml。否则它将覆盖旧的 xml。

为此保留一个整数值，如果您希望在应用重新启动后将其保留在[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)中。

```
 int posValue = [[[NSUserDefaults standardUserDefaults] objectForKey:@"lastXml"] intValue];

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
 filePathl = [NSString stringWithFormat:@"%@/list_%d.xml", [paths objectAtIndex:0],posValue];   

 NSURL *url = [NSURL URLWithString:detail_product_listing_rss];
 NSData *urlData = [NSData dataWithContentsOfURL:url];
 [urlData writeToFile:filePathl atomically:YES];

 [[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithInt:posValue+1] forKey:@"lastXml"]; 
```

# iphone - 为什么我可以使用 locationInView 但我不能使用 translationInVew

> ID：13977067
> 
> 赞同：2
> 
> 时间：2012-12-20T17:03:29.080
> 
> 标签：iphone, objective-c, ios, ipad, uigesturerecognizer

我有一个`UIPanGestureRecognizer`，我可以使用该`locationInView`方法，但是当我输入 时`traslationInView`，我无法使用它并且系统说： `No visible @interface for UIGestureRecognizer declares the selector 'translationInView'`。

所有格式都应该没问题。那个怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:10:48.067

这是因为您的参考是 type`UIGestureRecognizer`而不是`UIPanGestureRecognizer`.

当您使用超类引用时，派生类成员的子类也是不可见`UIPanGestureRecognizer`的`UIGestureRecognizer`

无论是类型`UIGestureRecognizer`转换引用`UIPanGestureRecognizer`

或者在您的方法中简单地`UIGestureRecognizer`替换为`UIPanGestureRecognizer`

```
- (void)yourMethod:(UIGestureRecognizer *)recognizer 
{
} 
```

# ios - 在 UICollectionView 中终止异步 CGImageRef 加载

> ID：13977073
> 
> 赞同：2
> 
> 时间：2012-12-20T17:04:03.120
> 
> 标签：ios, asynchronous, grand-central-dispatch, uicollectionview

我有一个模拟封面流的集合视图。它像这样从 ALAssetLibrary 异步加载图像。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    myCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"CELL_ID" forIndexPath:indexPath];

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
                       ^{
                           ALAsset *asset = [assets objectAtIndex:indexPath.row];
                           CGImageRef thumbnailImageRef = [[asset defaultRepresentation]fullScreenImage];
                           UIImage *thumbnail = [UIImage imageWithCGImage:thumbnailImageRef];
                           dispatch_async(dispatch_get_main_queue(), ^{
                               cell.myImageView.image = thumbnail;
                           });
                       });

    return cell;
} 
```

如果用户快速滚动，则加载图像需要更长的时间。我在想，如果用户快速滚动到图像 20，他们必须等待图像 1-19 加载，即使它们不再在屏幕上。所以，我的问题是，如果单元格在加载过程完成之前移出屏幕，有没有办法停止图像加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:01:45.973

一旦调度块排队，就不可能取消它们。我已经使用`NSOperationQueue`. 将您的调度调用替换`NSOperation`为具有标识它们属于哪个索引路径的属性的子类，并将它们放入操作队列中。然后，在滚动委托回调期间，遍历队列，取消距离太远的操作。

# java - 最后一条语句是否应该是非 void 返回类型方法中的“return”？

> ID：13977074
> 
> 赞同：3
> 
> 时间：2012-12-20T17:04:13.007
> 
> 标签：java, return

最后一条语句应该`return`在非 void 返回类型方法中吗？但这仍然有效。

```
public String test()
{
    try
    {
        // Do my work
        return "myValue";
    }
    finally
    {
        System.out.println("I'm in Finally");
    }
} 
```

我有点缺乏了解这是如何工作的知识。谁能给我解释一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:05:55.333

这段代码没有问题，因为通过它的每一条可能的路径都不可避免地导致`return`声明^*。它不必是文本上的最后一个语句，只要它是逻辑上的最后一个语句（Java 编译器足够聪明，可以判断它是否是这样，如果代码中的路径不返回值或抛出异常）。`return`在点击（即你的块）之后会有代码执行的事实`finally`并没有改变任何东西：就编译器而言，你的函数在退出函数之前提供了一个返回值。

^*事实上，你的函数代码只有一条路径，它在`return`语句处终止。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:08:55.200

在 Java 中，确保所有可能的代码路径要么返回值要么抛出异常就足够了。例如，以下代码是有效的：

```
public boolean test() {
    if (3 < 5) {
        return true;
    } else {
        throw new RuntimeException("Holy crap!");
    }
} 
```

在您的示例中，您的`try`块以返回结束，因此涵盖了快乐的路径，并且不需要超出`finally`;的代码。此外，任何抛出的异常都`try`将传播到方法之外并且没有机会到达方法的末尾，因此所有可能的路径都不会到达`finally`块下的部分，并且不需要返回语句。（事实上​​，如果你`return`在底部添加了一条语句，编译器可能会给你一个关于无法访问代码的警告或错误！）

添加`catch`子句时情况会发生变化，因为现在代码有可能超出`try`//块`catch`：`finally`

```
public String test(){
    try{

        // Do my work

        return "myValue";

    }
    catch (Exception ex) {
        System.out.println("O noes something went wrong");
        // swallow exception
    }
    finally {
        System.out.println("I'm in Finally");
    }

    // Oh no! If an exception was caught, code can actually flow through here.
    // Compiler will complain about a missing return statement until you add one.
    // return "someOtherValue";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T17:09:06.760

在这种情况下`try`并`finally`始终执行。所以，在哪里并不重要`return`。

```
public String myfun(){
    return "here";
}

or 

public String myfun(){
    try{
         return "here";
    }finally{
         //will execute always
    }
} 
```

几乎一样。什么时候，你会看到程序的流程。但是，如果有任何条件，比如

```
 public String myfun(){
      if(x==1){
           return "here";
      }
      else{
           // something here 
      }
 } 
```

在这种情况下，它会**引发 error**。因为，任何一个块都不会同时执行。如同

```
public String fun(){
     try{
          return "here";
     }
     catch(Exception e){
          //catch implementation without return
     }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T17:22:51.850

JLS 的关键概念是[Normal 和 Abrupt Completion of Statements](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.1)，以及[try-finally](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20.2)的行为。

由于“myValue”的返回，try 块突然完成。finally 块正常完成，因此整个 try 语句由于与 try 块相同的原因而突然完成，返回“myValue”。

实际上，方法中的最后一个语句 try 语句是返回字符串的语句。

# asp.net-mvc - VB.net 函数可在任何 .vbhtml 文件 (MVC4) 中访问

> ID：13977077
> 
> 赞同：-3
> 
> 时间：2012-12-20T17:04:16.443
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-4

我已经在 .vb 文件中为我的 asp 表单应用程序编写了一些函数，但是我将它移植到 MVC4 并且我需要能够访问视图（.vbhtml 文件）中的一些函数。

我可以在某处全局声明这些吗？

我已经尝试包含 .vb 文件，希望能够访问视图中的功能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:13:47.620

我建议您将它们编写为[扩展](http://msdn.microsoft.com/en-us/library/bb384936.aspx)方法`System.Web.Mvc.ViewPage`

# jquery - 如果 nth-child(variable) 有 class active，则将 class active 添加到另一个 Element 的 nth-child

> ID：13977080
> 
> 赞同：0
> 
> 时间：2012-12-20T17:04:32.993
> 
> 标签：jquery, twitter-bootstrap

我想将 .active 类添加到我的自定义引导分页中。

目前，当我通过单击分页进行导航时效果很好，但如果我使用箭头，我的分页中的下一个项目不会激活。

所以，基本上我想看看 .carousel 元素的哪个子元素是活动的，并将活动类添加到我的分页中的相同（例如第二个）子元素。

```
$('.sb-links a').click(function(q){
  q.preventDefault();
  targetSlide = $(this).attr('data-to')-1;
  $('#myCarousel').carousel(targetSlide);
  $('a').removeClass('active');
  $(this).addClass('active').siblings().removeClass('active');
}); 
```

代码看起来像这样，但如果我手动键入子元素，它甚至不起作用。

```
if ( $('.carousel-inner div:nth-child(1)').hasClass('active') ) {
  $('.sb-links a:nth-child(1)').addClass('active');
}; 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:18:59.163

尝试：

```
// calculate the index you want
var index = 1; 
// get the div at the calculated index
var nthDiv = $('.carousel-inner div').eq(index);

// check if div has class
if (nthDiv.hasClass('active')) {
    // add class to the hyperlink at the same index
    $('.sb-links a').eq(index).addClass('active');
} 
```

这是一个更完整的解决方案：

```
// attach an event which is triggered when transition is complete
$('#myCarousel').on('slid', function (e) {
    // get the index of the current frame
    var index = $('.carousel-inner div').index('.active');
    // get all the slider buttons
    var buttons = $('.sb-links a');
    // remove the 'active' class on all slider buttons
    buttons.removeClass('active');
    // add the 'active' class on the button corresponding to the current frame
    buttons.eq(index).addClass('active');
}) 
```

# silverlight - Sonar 的 SL4 插件的代码在哪里？

> ID：13977083
> 
> 赞同：0
> 
> 时间：2012-12-20T17:04:44.567
> 
> 标签：silverlight, sonarqube

我刚刚发现，Sonar 不支持 Silverlight 5，但它确实支持 Silverlight 4。我想，如果我可以看看 Sl4 插件代码，我也许可以添加 Silverlight 5 支持。我正在浏览[插件库](http://docs.codehaus.org/display/SONAR/Plugin+Library)，但找不到 SL4 插件代码在哪里。有人可以指出它在哪里托管以及添加对 SL5 的支持的任何方向。如果工作已经在进行中，我该如何为这个项目寻求帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:32:58.100

[Silverlight 的支持在.Net & C# Plugins Ecosystem](http://docs.codehaus.org/display/SONAR/C%23+Plugins+Ecosystem)的 .Net Core Plugin 中实现。

添加对 SL5 的支持应该很容易，并且应该只位于[DotNetConstants 类](https://github.com/SonarCommunity/sonar-dotnet/blob/master/sonar/dotnet/sonar-dotnet-plugin/src/main/java/org/sonar/plugins/dotnet/api/DotNetConstants.java)中。

如果您设法做您想做的事，请随时在项目上打开拉取请求！:-)

# jquery - jQuery - 插件不适用于自定义滚动条

> ID：13977088
> 
> 赞同：-1
> 
> 时间：2012-12-20T17:05:06.720
> 
> 标签：jquery

[http://grabbers.maddoggmedia.com/](http://grabbers.maddoggmedia.com/)

使用 malihu-custom-scrollbar-plugin 作为#chat-box-chats id，但似乎不起作用。它在这里完美运行....

[http://grabbers.maddoggmedia.com/chat.html](http://grabbers.maddoggmedia.com/chat.html)

当您单击它打开的文本输入时，需要自定义滚动条插件才能工作，但似乎无法弄清楚。我确信它很简单，因为它在其他页面上运行良好。

```
<script type="text/javascript">(function($){
    $(window).load(function(){
        $("#chat-box-chats,chat-box-message").mCustomScrollbar();
    });
})(jQuery);</script> 
```

将不胜感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:24:42.817

我认为您在`'.'`这里缺少类符号：

```
$("#chat-box-chats,.chat-box-message").mCustomScrollbar();
//-----------------^--------------------------------------here this missing '.' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:59:31.287

您可以尝试在单击事件上调用所需元素上的滚动条 .. 即当用户单击聊天窗口时.. 并且在显示聊天框 div 之后.. 因为大多数这些滚动插件不适用于隐藏元素..

# iphone - 停用 UIButton

> ID：13977092
> 
> 赞同：1
> 
> 时间：2012-12-20T17:05:19.303
> 
> 标签：iphone, xcode

当我单击一个按钮超过半秒时，该按钮变为蓝色（被激活）。然后，如果我将触摸拖出按钮，它仍然处于激活状态，如果我松开触摸，它就会激活我的动作。

向外拖动时如何停用 UIButton？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:08:18.580

您连接到 UIButton 的事件应该是“touchUpInside”

这将具有您想要的行为。

# spring - 如何使用 jpa:repositories 和 proxy-target-class="true"

> ID：13977093
> 
> 赞同：1
> 
> 时间：2012-12-20T17:05:19.387
> 
> 标签：spring, spring-aop, spring-data

我用

```
<tx:annotation-driven transaction-manager="transactionManager" />
<jpa:repositories base-package="com.xxwell.amkey.domain"
    transaction-manager-ref="transactionManager" /> 
```

它就像一个魅力。但是，要向项目添加方面，我需要 CGLIB。将上述行更改为

```
<tx:annotation-driven transaction-manager="transactionManager"
    proxy-target-class="true" />
<jpa:repositories base-package="com.xxwell.amkey.domain"
    transaction-manager-ref="transactionManager" /> 
```

导致启动上下文失败：`Cannot subclass final class class $Proxy45`对于我定义的每个存储库。是不能一起用，还是可以做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:53:43.077

如果您需要 cglib 样式代理，则必须从存储库接口中删除 @Transactional 注释，并将其移动到调用它的服务/s 类/es。

CGLIB 样式扩充直接作用于它扩充的类。接口无所谓。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:56:48.303

不能建议最终方法，因为它们不能被覆盖。也许您的父类之一具有最终方法，或者您的类是最终的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T07:58:44.713

其他选择是摆脱

```
proxy-target-class="true" 
```

通过在所有 AOP 位置引入适当的接口（假设在服务层）

# sql - 重新格式化 (PL/)SQL 代码的语义等价

> ID：13977104
> 
> 赞同：4
> 
> 时间：2012-12-20T17:05:55.817
> 
> 标签：sql, plsql, code-formatting, verification

# 背景

系统中的数百个数据库对象（视图、包、存储过程等）没有格式，也没有源代码注释。我们想：

1.  自动重新格式化代码（使用[通用 SQL 解析器](http://www.dpriver.com/blog/category/general-sql-parser/)）。
2.  自动将标准注释标题复制到每个对象的源文件中。

# 问题

我们不能在未经测试的情况下将如此彻底的变化推向生产。

# 问题

您将如何验证重新格式化的源代码在功能上与未格式化的代码相同？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T09:15:37.233

简单的：

1.  针对全新的数据库运行未格式化的代码
2.  针对全新的数据库运行格式化代码
3.  对两者进行完全导出并比较这两个文件

它们应该是相同的。

它们应该相同的原因是 postgres 将 SQL 解析为其标准的规范形式，因此即使添加不必要的括号也会导致代码的内部版本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:55:20.783

我假设只有那些需要修改的对象才需要格式，如果是这样，我建议只格式化您正在处理的对象，最后结果应该投入生产。我使用 Oracle SQL Developer，我可以安全地处理程序单元并进行格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T09:07:22.483

对于您的问题：要将格式化的源代码与未格式化的源代码进行比较，您必须对它们中的每一个进行标记并比较结果。这实际上破坏了您最初的目标。;-)

# asp.net-mvc - Ninject 返回对象的特定实例

> ID：13977105
> 
> 赞同：3
> 
> 时间：2012-12-20T17:06:13.673
> 
> 标签：asp.net-mvc, ninject

我一直在使用 Ninject：

```
ninjectKernel.<IBlogRepository>().To<BlogRepository>(); 
```

我想返回一个特定的对象。我怎样才能得到这样的东西

```
ninjectKernel.<IInvestorRepository>().  // returns this : new BlogRepository(new (new BlogContext(Settings.Default.BlogConnection))) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:19:40.273

尝试

```
var singleInstanceOfRepository = new BlogRepository();

ninjectKernel.Bind<IBlogRepository>().ToMethod(context => singleInstanceOfRepository); 
```

所有对内核的调用都将解析`IBlogRepository`为`singleInstanceOfRepository`

# wolfram-mathematica - 不能从 {2,3,4,5,6,7,8} 获得的最小整数（Mathematica）

> ID：13977107
> 
> 赞同：7
> 
> 时间：2012-12-20T17:06:26.957
> 
> 标签：wolfram-mathematica

我正在尝试使用 Mathematica 解决以下问题：

`{2,3,4,5,6,7,8}`通过算术运算`{+,-,*,/}`、取幂和括号无法从集合中获得的最小正整数是多少。集合中的每个数字必须只使用一次。不允许一元运算（例如，如果不使用 0，则 1 不能转换为 -1）。

例如，该号码`1073741824000000000000000`可通过 获得`(((3+2)*(5+4))/6)^(8+7)`。

我是 Mathematica 的初学者。我编写的代码我认为可以解决 set 的问题`{2,3,4,5,6,7}`（我的答案是 2249），但是我的代码效率不足以使用 set `{2,3,4,5,6,7,8}`。（我的代码已经在片场运行了 71 秒`{2,3,4,5,6,7}`）

我非常感谢使用 Mathematica 解决这个更难的问题的任何技巧或解决方案，或者关于如何加快现有代码的一般见解。

我现有的代码使用暴力递归方法：

（* 这将一组 1 个数字的组合定义为该 1 个数字的集合 *）

```
combinations[list_ /; Length[list] == 1] := list 
```

（*这测试是否可以对两个数字求幂，包括（有点）任意限制以防止溢出*）

```
oktoexponent[number1_, number2_] :=

 If[number1 == 0, number2 >= 0,
  If[number1 < 0,
   (-number1)^number2 < 10000 \[And] IntegerQ[number2],
   number1^number2 < 10000 \[And] IntegerQ[number2]]] 
```

(* 这需要一个列表并删除分母大于 100000 的分数 *)

```
cleanup[list_] := Select[list, Denominator[#] < 100000 &] 
```

（* 这定义了一组 2 个数字的组合 - 并返回一组通过 + - * / 由 oktoexponent 和清理规则过滤的应用获得的所有可能数字 *）

```
combinations[list_ /; Length[list] == 2 && Depth[list] == 2] :=
  cleanup[DeleteCases[#, Null] &@DeleteDuplicates@
    {list[[1]] + list[[2]],
     list[[1]] - list[[2]],
     list[[2]] - list[[1]],
     list[[1]]*list[[2]],
     If[oktoexponent[list[[1]], list[[2]]], list[[1]]^list[[2]],],
     If[oktoexponent[list[[2]], list[[1]]], list[[2]]^list[[1]],],
     If[list[[2]] != 0, list[[1]]/list[[2]],],
     If[list[[1]] != 0, list[[2]]/list[[1]],]}] 
```

（* 这扩展了组合以使用集合集 *）

```
combinations[
  list_ /; Length[list] == 2 && Depth[list] == 3] := 
 Module[{m, n, list1, list2},
  list1 = list[[1]];
  list2 = list[[2]];
  m = Length[list1]; n = Length[list2];
  cleanup[
   DeleteDuplicates@
    Flatten@Table[
      combinations[{list1[[i]], list2[[j]]}], {i, m}, {j, n}]]] 
```

(* 对于给定的集合，partition 将所有分区的集合返回到两个非空子集 *)

```
partition[list_] := Module[{subsets},
  subsets = Select[Subsets[list], # != {} && # != list &]; 
  DeleteDuplicates@
   Table[Sort@{subsets[[i]], Complement[list, subsets[[i]]]}, {i, 
     Length[subsets]}]] 
```

（* 这最终扩展了组合以使用任何大小的集合 *）

```
combinations[list_ /; Length[list] > 2] := 
 Module[{partitions, k},
  partitions = partition[list];
  k = Length[partitions]; 
  cleanup[Sort@
    DeleteDuplicates@
     Flatten@(combinations /@ 
        Table[{combinations[partitions[[i]][[1]]], 
          combinations[partitions[[i]][[2]]]}, {i, k}])]]

Timing[desiredset = combinations[{2, 3, 4, 5, 6, 7}];]

{71.5454, Null}

Complement[
   Range[1, 3000], #] &@(Cases[#, x_Integer /; x > 0 && x <= 3000] &@
   desiredset)

{2249, 2258, 2327, 2509, 2517, 2654, 2789, 2817, 2841, 2857, 2990, 2998} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T05:39:44.537

这无济于事，但我今天无用的喋喋不休超出了我的配额：

```
(* it turns out the symbolizing + * is not that useful after all *) 
f[x_,y_] = x+y 
fm[x_,y_] = x-y 
g[x_,y_] = x*y 
gd[x_,y_] = x/y 

(* power properties *) 
h[h[a_,b_],c_] = h[a,b*c] 
h[a_/b_,n_] = h[a,n]/h[b,n] 
h[1,n_] = 1 

(* expand simple powers only! *) 
(* does this make things worse? *) 
h[a_,2] = a*a 
h[a_,3] = a*a*a 

(* all symbols for two numbers *) 
allsyms[x_,y_] := allsyms[x,y] =  
 DeleteDuplicates[Flatten[{f[x,y], fm[x,y], fm[y,x],  
 g[x,y], gd[x,y], gd[y,x], h[x,y], h[y,x]}]] 

allsymops[s_,t_] := allsymops[s,t] =  
 DeleteDuplicates[Flatten[Outer[allsyms[#1,#2]&,s,t]]] 

Clear[reach]; 
reach[{}] = {} 
reach[{n_}] := reach[n] = {n} 
reach[s_] := reach[s] = DeleteDuplicates[Flatten[ 
 Table[allsymops[reach[i],reach[Complement[s,i]]],  
  {i,Complement[Subsets[s],{ {},s}]}]]] 
```

这里的总体思路是避免计算幂（代价高昂且不可交换），同时使用加法/乘法的交换性/结合性来降低reach[] 的基数。

上面的代码也可以在：

[https://github.com/barrycarter/bcapps/blob/master/playground.m#L20](https://github.com/barrycarter/bcapps/blob/master/playground.m#L20)

以及数千兆字节的其他无用代码、数据和幽默。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-17T12:37:45.767

我认为您的问题的答案在于命令[`Groupings`](http://reference.wolfram.com/language/ref/Groupings.html)。这允许您创建列表的二叉树。二叉树非常有用，因为您允许的每个操作都`Plus, Subtract, Times, Divide, Power`需要两个参数。例如。

```
In>  Groupings[3,2]
Out> {List[List[1,2],3],List[1,List[2,3]]} 
```

因此，我们需要做的就是用`List`允许的操作的任何组合替换。

但是，`Groupings`它似乎是全能的，因为它可以选择这样做。想象一下，你有两个函数`foo`并且`bar`都接受`2`参数，那么你可以将所有组合设为：

```
In>  Groupings[3,{foo->2,bar->2}]
Out> {foo[foo[1,2],3],foo[1,foo[2,3]],foo[bar[1,2],3],foo[1,bar[2,3]],
      bar[foo[1,2],3],bar[1,foo[2,3]],bar[bar[1,2],3],bar[1,bar[2,3]]} 
```

现在可以计算我们拥有的组合数量：

```
In>  Groupings[Permutations[#],
               {Plus->2,Subtract->2,Times->2,Divide->2,Power->2}
              ] &@ {a,b,c,d,e};
In>  Length@%
In>  DeleteDuplicates@%%
In>  Length@%
Out> 1050000
Out>  219352 
```

这意味着对于 5 个不同的数字，我们有 219352 个唯一的组合。

遗憾的是，由于上溢、被零除或下溢，许多这些组合无法评估。但是，尚不清楚要删除哪些。价值`a^(b^(c^(d^e)))`可能很大，也可能很小。分数幂可以产生完美的根，大数的除法可以变得完美。

```
In>  Groupings[Permutations[#],
               {Plus->2,Subtract->2,Times->2,Divide->2,Power->2}
              ] &@ {2, 3, 4};
In>  Union[Cases[%, _?(IntegerQ[#] && # >= 0 &)]];
In>  Split[%, #2 - #1 <= 1 &][[1]]
Out> {1, 2, 3, 4, 5, 6} 
```

# css - 在我的导航中创建指示槽时遇到 css 问题

> ID：13977109
> 
> 赞同：0
> 
> 时间：2012-12-20T17:06:43.373
> 
> 标签：css, nav

当我遇到一个小问题时，我一直在建立一个站点并构建基本布局。我想创建一个“缺口”导航，但我不知道这样做的第一件事。

我试图创建一个定位在我的下方（我的想法是我可以[使用 CSS 或使用图像] 创建一个白色三角形），它可以与我创建“缺口”效果的底部对齐。我还没有成功，希望有 css // html 向导状态技能的人能提供帮助。

附言。如果您需要更多信息，请告诉我 - 我对 stackoverflow 有点陌生

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:13:48.053

让您的 NAV LI 标签和其中的 A 标签一直延伸到内容块的顶部。

如果 LI 是“当前”标签，则在其中放置一个三角形图形作为 A 标签的背景。

```
li.current a {
    background:url(triangle.png) no-repeat center bottom;
} 
```

您可能希望三角形为蓝色，与内容块顶部的蓝色条相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:19:31.020

Cappuccino 使用以下 css 来标记链接标签。

```
<style>
        #navmarker {
        width: 1px;
        height: 0;
        position: relative;
        margin-top: -0.7em;
        margin-left: auto;
        margin-right: auto;
        border-bottom: #FFD48E solid 0.8em;
        border-top: none;
        border-left: transparent solid 0.8em;
        border-right: transparent solid 0.8em;
        }

        div {
            display: block;
        }
    </style> 
```

尝试创建一个 div 并使用上面对我有用的 css。

```
 <div id="navmarker"></div> 
```

# android - Admob 与 AdSense

> ID：13977110
> 
> 赞同：17
> 
> 时间：2012-12-20T17:06:50.277
> 
> 标签：android, admob, adsense

我正在寻找通过我的免费 android 应用程序获利的方法。我看到了两个选择 Ad mob 和 AdSense。看起来 Admob 即将关闭并被 Adsense 取代？我后来读了谷歌关闭了adsense

[http://www.seroundtable.com/google-adsense-for-domains-shutting-down-14761.html](http://www.seroundtable.com/google-adsense-for-domains-shutting-down-14761.html)

那么现在如何在手机上投放广告呢？对不起，我的理解有限。欢迎任何指点。

一个普遍的问题——人们真的点击广告吗？你能在安卓应用中赚到可观的钱吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-20T17:10:10.237

AdMob 用于原生应用程序，因此在这种情况下您应该使用 AdMob。AdSense 用于移动网络应用程序。

基于广告的模型中的收入金额实际上取决于用户和广告请求的数量。广告可能是一个很好的收入来源，但你确实需要用户群才能让它起飞。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T17:45:42.180

根据您的最后一个问题：用户在移动应用中点击广告的次数比在网站上多得多，而且在移动平台上赚钱要容易得多。这比 1-2 年前要困难得多，但你仍然可以通过。如果您想在应用程序上赚钱，Android 是一个很好的选择，但如果您想出售您的应用程序，请选择 iPhone。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-08T08:39:52.003

简单的回答：

**Adsense**：用于网站。如果您登录 adsense 网站，您会看到“在您自己的网站上展示广告”。

**Admob**：适用于原生或混合应用程序（“mob”来自移动端）。这将是你的情况。如果您登录 Admob 的网站，您会看到“以智能方式从您的应用中赚取更多收益”。
如果您使用 Cordova/Phonegap（混合），则应使用此插件： [https](https://github.com/floatinghotpot/cordova-admob-pro)
://github.com/floatinghotpot/cordova-admob-pro 对于本机应用程序，请查看： [https ://firebase.google.com/docs /admob/android/横幅](https://firebase.google.com/docs/admob/android/banner)

在这两种情况下，您都应该在您的 admob 帐户和银行帐户中添加一个应用程序以开始单调化（您需要为首次付款赚取至少 70 欧元）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-22T15:11:22.510

Admob 不会关闭，而是显示在 Adsense 仪表板中。您可以简单地使用 Admob 通过您的应用获利。

对于你的第二个问题，我想说的是让一切保持自然。使用 AdSense 或 Admob，您将在每次真正的点击中获得可观的收益。

您的 CPC（每次点击费用）取决于您的内容质量和访问者的位置。所以保持休息。一切顺利。

# c++ - 读取linux inode位图

> ID：13977115
> 
> 赞同：0
> 
> 时间：2012-12-20T17:07:04.503
> 
> 标签：c++, c, linux, inode, superblock

我将使用 c++ 获取 linux inode 位图。我首先使用此代码获取超级块：

```
 #include <cstdlib>
    #include <linux/ext2_fs.h>
    #include <linux/fs.h>
    #include <iostream>
    #include <stdio.h>
    #include <fstream>
    #include <fcntl.h>
    #include <linux/fs.h>

    using namespace std;

    /*
     * 
     */

    int main() {
        int fd;
        char boot[1024];
        struct ext2_super_block super_block;

        fd = open("/dev/sda1", O_RDONLY);
    /* Reads the boot section and the superblock */
    read(fd, boot, 1024);
    read(fd, &super_block, sizeof (struct ext2_super_block));

    /* Prints the Magic Number */
    printf("%x\n", super_block.s_magic);

    close(fd);

    return 0;
} 
```

但每次我运行它时，我都会收到一个错误：

```
In file included from main.cpp:2:0:
/usr/include/linux/ext2_fs.h:181:18: error: ‘S_ISDIR’ was not declared in this scope
/usr/include/linux/ext2_fs.h:183:23: error: ‘S_ISREG’ was not declared in this scope 
```

我找不到任何好的示例或教程。有人可以帮助我吗？

编辑：
我已经包括`<linux/stat.h>`但仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:10:37.623

```
#grep -rw S_ISREG /usr/src/linux/include
/usr/src/linux/include/linux/fs.h:  if (S_ISREG(inode->i_mode) || S_ISDIR(inode->i_mode) ||
/usr/src/linux/include/linux/fs.h.~1~:  if (S_ISREG(inode->i_mode) || S_ISDIR(inode->i_mode) ||
/usr/src/linux/include/linux/stat.h:#define S_ISREG(m)  (((m) & S_IFMT) == S_IFREG) 
```

所以你应该在你的内核源代码树中找到 stat.h 并包含它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:19:57.223

Linux 源代码“stat.h”与 C 库附带的文件不同。他们只是碰巧有相同的名字。您需要设置包含路径以找到正确的 stat.h（您可能需要 BOTH，具体取决于您要执行的操作）。

# android - ListView中的自定义RelativeLayout类

> ID：13977126
> 
> 赞同：0
> 
> 时间：2012-12-20T17:07:48.280
> 
> 标签：android, android-listview, android-relativelayout, android-custom-view, android-cursoradapter

我在 newView 方法中的自定义 CursorAdapter 中关注这篇博文[InfamousViewHolder Pattern](http://sriramramani.wordpress.com/2012/07/25/infamous-viewholder-pattern/)我创建了一个自定义 RelativeLayout 类，并在 bindView 中填充数据。

问题在于这些方法从未被调用过。我正确设置了 setListAdapter，因为如果我实现 ViewHolder 模式，列表将正确填充。

执行。这里的代码：

```
public class SearchUserListViewRow extends RelativeLayout{
    public ImageView avatar = null;
    public TextView name = null;
    public ToggleButton inviteButton = null;
    public ToggleButton followButton = null;
    public FoundUser user;

    public SearchUserListViewRow(Context context) {
        super(context);
        LayoutInflater.from(context).inflate(R.layout.search_friend_row, this);
        avatar = (ImageView) findViewById(R.id.avatar);
        name = (TextView) findViewById(R.id.user_name);
        inviteButton = (ToggleButton) findViewById(R.id.invite_button);
        followButton = (ToggleButton) findViewById(R.id.follow_button);
    }

    public void init(Cursor cursor) {
        user = UsersProcessor.toFoundUser(cursor);

        name.setText(user.alias);
        inviteButton.setChecked(user.invited);
        inviteButton.setVisibility(Section.TO_INVITE.equals(user.section) ? 
                View.VISIBLE : View.GONE);
        inviteButton.setTag(user);

        followButton.setEnabled(!user.invited);
        followButton.setChecked(user.isGuru);
        followButton.setVisibility(Section.TO_FOLLOW.equals(user.section) ? 
                View.VISIBLE : View.GONE);
        followButton.setTag(user);
    }
} 
```

和适配器：

```
public class UserCursorAdapter extends CursorAdapter {

    public UserCursorAdapter(Context context, Cursor c, int flags) {
        super(context, c, flags);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {

        View v = new SearchUserListViewRow(context);       
        return v;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        SearchUserListViewRow row = (SearchUserListViewRow)v;
        //ViewHolder like stuff
        row.text = "foo";
    }
} 
```

和 serarch_friend_row.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/txt_box"
    android:orientation="horizontal"
    android:layout_marginTop="-3px"
    android:padding="@dimen/padding_row" >

    <ImageView
        android:id="@+id/avatar"
        android:layout_width="@dimen/image_user_avatar"
        android:layout_height="@dimen/image_user_avatar"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true" />

    <FrameLayout
        android:id="@+id/button_container"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true">

        <ToggleButton
            android:id="@+id/follow_button"
            android:visibility="gone" />

        <ToggleButton
            android:id="@+id/invite_button"0000000000000000000
            android:visibility="gone" />

    </FrameLayout>

    <TextView
        android:id="@+id/user_name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentEnd="true"
        android:layout_centerVertical="true"
        android:layout_marginLeft="@dimen/content_padding_normal"
        android:layout_toLeftOf="@id/button_container"
        android:layout_toRightOf="@id/avatar"
        android:ellipsize="marquee"
        android:singleLine="true"
        android:textSize="@dimen/text_size_medium"
        android:textStyle="bold" />

</RelativeLayout> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:04:36.387

`newView`并且`bindView`在底层游标为空的情况下可能不会被调用。首先检查这个。

第二点，您的代码不代表 ViewHolder 模式，因为它的主要思想是将对项目视图的引用存储在视图标记中。您应该创建/膨胀新项目，并在调用后将`findViewById()`返回值放入持有者实例。然后将持有者实例保存到标签中。

最后，当您要将光标的值绑定到视图中时，从标签获取持有者并填充例如`setText()`，`setImage()`等等。

# java - 如何在java中计算相同（PALINDROME）的单词数

> ID：13977129
> 
> 赞同：0
> 
> 时间：2012-12-20T17:08:07.640
> 
> 标签：java, palindrome

我是一名新手 Java 开发人员。我想编写代码来使用 Java 计算段落中回文词的数量。
假设是：用户可以输入包含尽可能多的句子的段落。每个单词用空格隔开，每个句子用句点隔开，单词前后的标点将被忽略，而单词内部的标点将被计算在内。
样本输入：`Otto goes to school. Otto sees a lot of animals at the pets store.`
样本输出：`Otto = 2 a = 1 Sees = 1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:12:39.610

将文件读入您​​的程序，在每个空格处拆分条目并将它们输入到数组列表中。之后，将回文算法应用于数组列表中的每个值，并跟踪作为回文的单词及其出现（例如，二维数组，或包含两个值的对象的数组列表）。

完成这些步骤后，您应该就差不多了。一旦您展示了自己的尝试，可能会提供更具体的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:39:41.507

公共类回文{

```
int count = 0;

public static void main(String[] args) {
    String a = "malayalammadyoydaraarasdasdkfjasdsjhtj";
    Palindrome palindrome = new Palindrome();
    palindrome.countPalin(a);
}

private int countPalin(String str) {
    for (int i = 0; i < str.length() - 1; i++) {
        char start = str.charAt(i);
        String st = "";
        st += start;
        for (int j = i + 1; j < str.length(); j++) {

            st += str.charAt(j);

            StringBuffer rev = new StringBuffer(st).reverse();
            if (st.equals(rev.toString()) && st.length() > 1) {
                System.out.println(st.toString());
                count++;
            }
        }

        st = "";
    }

    System.out.println("Total Count : " + count);

    return count;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:29:12.453

在 Java 中使用 Collections 将减少编程工作量

算法 ：

1.  将段落读入字符串变量

2.  使用标记作为''（空格）拆分字符串`StringTokenizer`并将每个单词添加到ArrayList（设置不允许重复）

3.  编写一个根据给定字符串是否为回文返回布尔值（TRUE/FALSE）的方法。

4.  定义一个 Map 来保存回文字符串的值和重复的次数。

5.  如果是，则将字符串添加到 Map，键为回文字符串，值作为次数，否则不要将字符串添加到 Map

6.  重复相同的逻辑，直到所有单词都说完

示例代码：

` 公共类 StringPalindromeCalculator {

```
 private Map<String, int> wordsMap = new HashMap<>();
   private List<String> wordsList = new ArrayLiat<>();

   private boolean isPalindrome(String inputString) {
      // write String palindrome logic here
   }

   public Map<String, int> findPalindromeWords(String completeString) {
       StringTokenizer wordTokenizer = new StringTokenizer(completeString, ' ');
       while(wordTokenizer.hasMoreTokens()) {
            wordsList.add(wordTokenizer.nextToken());
       }
       for(String word : wordsList) {
            if(isPalindrome(word)) {
                 if(wordsMap.containsKey(word)) {
                      // increment the value of word
                 }
            } else {
                    // put the word into Map and return the map value 
            }

       }
       return wordsMap;
   } 
```

}`

希望这可以帮助 ：）

# c - 使用相同的代码为 2 种语言生成文档

> ID：13977141
> 
> 赞同：5
> 
> 时间：2012-12-20T17:08:44.783
> 
> 标签：c, vb6, swig, doxygen, python-sphinx

我可以以某种方式使用相同的代码为 2 种不同的语言生成文档吗？问题是我有一个 C API，它也通过类似于 VB 的专有语言公开。

所以 C 中的暴露函数类似于：

```
int Function (*PointerToObject) 
```

在 VB 中，它会是这样的：

```
int Function (ByVal long PointerToObject) 
```

我之前已经针对同样的问题打开[了另一个线程](https://stackoverflow.com/questions/11438542/doxygen-for-a-multi-language-api)，但到那时我对 Doxygen 一无所知。最近几天我一直在阅读文档，显然它可以为 VB 创建文档，但我必须有实际的 VB 代码才能工作，而我没有。我唯一拥有的是原始的 C 和 C 中的 swig 输出。

我想到的是一些工具（doxygen，sphinx，...），它可以让我从单一来源创建某种多语言文档（不是有效的 doxygen，但解释了这个想法）：

```
/*! \fn int Function(*PointerToObject) 
 *  \brief A simple function.
 *  \Cparam[in] PointerToObject A pointer to the object being used.
 *  \VBparam[in]    ByVal long PointerToObject      A pointer to the object being used.
 *  \return An integer.
 */ 
```

如果我能以某种方式将它集成到 swig 中会很棒，因为它是识别正确 VB 类型的 swig，但我想我可能要求太多了。

这有点复杂，如果我不够清楚，请发表评论，我将尝试进一步解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T07:11:37.707

我不确定这会有多大用处，因为我没有准确地完成您正在寻找的事情（而且这有点混乱），但在类似的情况下，我得出的结论是，我们最好的选择是生成仅用于 doxygen 记录的绒毛对象。

在我们的例子中，我们有一个 LDMud，它有几百个驱动程序发布的外部函数，这些函数在 LPC 语言中不存在，其余的 MUD 都是用它编写的。我们**可以**在其本机 C 代码中将其解析为单独的文档运行和[包括](http://www.doxygen.nl/manual/external.html)带有我们主要文档的文档。在我们的例子中，我们有相当详尽的纯文本文档，包括我们应该考虑的这些函数的定义，所以我们使用这个文档来生成一个具有虚拟函数定义的对象，并将纯文本文档解析为 doxygen 中的函数头注释风格。这显然没有为我们提供在文档中包含代码或代码内注释的优势，但它确实允许我们以多种形式生成文档，在指南中推送它，从其他文档中引用这些函数等.

我不直接熟悉 C，所以我不确定是否有任何内省支持来执行您需要的函数的编程清单并从该信息生成虚拟声明。如果您没有并且只有少量函数，我怀疑您的时间最好的投资是简单地手动编写虚拟声明。如果您有大量这些函数，那么您可能值得花时间使用 doxygen 将原始代码解析为 XML 文档，并从 XML 生成虚拟对象。Doxygen 的 XML 处理起来可能很麻烦，但如果您真正需要的只是声明和参数，那么它（相对）简单。

As a final aside, if your documentation can really be thought of as internal and external, you might also want to use two or more configuration files to generate different sets of documentation saved to different locations and publish them separately to your internal/external audiences. It will make the task of providing the right amount of detail to each less frustrating. Along those lines you may also find the [`INTERNAL_DOCS`](http://www.doxygen.nl/manual/config.html#cfg_internal_docs) option and the [`@internal`](http://www.doxygen.nl/manual/commands.html#cmdinternal) / [`@endinternal`](http://www.doxygen.nl/manual/commands.html#cmdendinternal) commands useful.

# ravendb - 通过 HTTPS 的 RavenDB 连接

> ID：13977145
> 
> 赞同：2
> 
> 时间：2012-12-20T17:09:06.167
> 
> 标签：ravendb

我们正在以服务器模式运行的 RavenDB 实例之间设置复制。这些实例位于不同的可用区，因此我们需要服务器之间的安全连接。根据this [post](https://groups.google.com/forum/?fromgroups=#!topic/ravendb/T4EVvoWpuKk) SSL is not supported in server mode但是

> 应该很容易添加

API 中是否有可以插入 SSL 支持的扩展点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:37:04.423

API 目前没有任何地方可以做这个，但我相信如果你愿意写这个并提交一个拉取请求，这将是一个受欢迎的贡献。底层服务器只是一个`System.Net.HttpListener`，可以连接到 ssl。

您的入口点将位于[Raven.Database.Server.HttpServer.StartListening()](https://github.com/ayende/ravendb/blob/master/Raven.Database/Server/HttpServer.cs#L318)

您希望 SSL 证书与主机名或端口一样易于配置。证书本身可能应该从 Windows 证书存储中提取。

# javascript - d3 选择器：在代码中工作，但不在控制台中。为什么？

> ID：13977147
> 
> 赞同：0
> 
> 时间：2012-12-20T17:09:06.497
> 
> 标签：javascript, firebug, d3.js

使用 d3，我可以：

```
var labels = d3.select("div#labels").insert("svg:svg")
  //.... 
```

然后，我可以在下面的代码中执行以下操作：

```
labels.selectAll("text")
  //... act upon the selection... 
```

但是在萤火虫控制台中：

```
>>> labels.selectAll("text")
  // produces: TypeError: labels.select is not a function 
```

和：

```
>>> d3.labels.selectAll("text")
  //produces: TypeError: d3.labels is undefined 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:24:52.283

我猜你有两个不同的`labels`变量。一个本地的和一个全球的。

在您声明 local 的地方`var labels`，也将其存储在全局范围内以进行调试（例如， via `window.locallabels = labels`）。然后在控制台测试您的不同标签是否相同。我猜他们不是。

```
var labels = { text: "bla" }     // create a new object

function fn(){
    var labels = { text: "bla" } // create another object
    window.locallabels = labels  // save it in global scope for debugging
}

fn();

console.log(labels, locallabels, labels == locallabels) //try this in console
//console: Object { text="bla"} Object { text="bla"} false 
```

# mono - 如何在 Android 的单声道中定位？

> ID：13977149
> 
> 赞同：0
> 
> 时间：2012-12-20T17:09:13.437
> 
> 标签：mono, xamarin.android, monodevelop

您好，我是 Mono for android 的新手。我正在尝试在普通的 Windows 窗体应用程序中制作一个计算器。我可以将按钮或文本框拖动到我想要的任何位置，但它在 Mono for android 中是如何工作的，我希望这些按钮不仅向下并排。如果我将按钮放在超出框架的按钮下方，我也不想要那个..

我不是英国人，希望你能理解。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:27:52.910

Android“支持”，但已[弃用](http://developer.android.com/reference/android/widget/AbsoluteLayout.html)且不认可像素完美的布局。不幸的是，在特定像素位置将控件拖放到设计图面上的 Windows 窗体样式需要像素完美布局，因此您可以在此处看到不匹配。

对于计算器，您可能想要使用[Table Layout](http://docs.xamarin.com/android/Guides/User_Interface/table_layout)或其他一些“可调整大小”的容器，以便您的 Activity 可以支持 Android 涵盖的各种设备尺寸。

# android - 使用 javax.usb 的 Android 开放附件协议

> ID：13977151
> 
> 赞同：1
> 
> 时间：2012-12-20T17:09:41.017
> 
> 标签：android, usb

我正在努力让任何现有设备与 Android 设备进行通信。该设备使用[javax.usb](http://javax-usb.sourceforge.net/jdoc/)（构建在 libusb 之上）进行 USB 通信，我正在尝试使用它来实现[Android 开放附件协议](http://source.android.com/tech/accessories/aoap/aoa.html)。该设备当前识别 android 设备并将 android 设备注册到我的应用程序。但是，当我尝试：

> 尝试以附件模式启动 - 发送 51 控制请求（“获取协议”）以确定设备是否支持 Android 附件协议。

我得到一个 UsbStallException 并且我的应用程序死了。从我一直在阅读的内容来看，我对 USB 知之甚少，这应该可以工作。

以下是相关代码：

```
byte req = (byte) (0x80 | 0x40);
UsbControlIrp irp = usbDev.createUsbControlIrp(req, (byte)51, (short)0, (short)0);
usbDev.syncSubmit(irp); 
```

任何关于我做错了什么的见解将不胜感激。

PS：我正在运行它的设备使用 1.4 JVM，因此任何解决方案都将受此限制

# sqlalchemy - 如何仅保留 SQLAlchemy 上映射列的子集？

> ID：13977154
> 
> 赞同：1
> 
> 时间：2012-12-20T17:09:53.543
> 
> 标签：sqlalchemy

在问如何之前，我可能会先问是否可能。

那么，是否可以在 SQLAlchemy 上实际映射的表的所有列中仅保留表的某些列？

事实上，在我的表中，我有一列是由数据库计算的，它不应该被数据库用户修改。我实际上撤销了这样做的特权。

我的问题是 SQLAlchemy 试图在每一列上插入值：

INSERT INTO mytable (data_1, data_2, ..., data_n, computed_data) VALUES ...

相反，我希望它这样做：

INSERT INTO mytable (data_1, data_2, ..., data_n) VALUES ...

有谁知道这是否可能？如果是，如何配置此行为？

谢谢

**2012-12-21：编辑**

这是我的配置：

```
_mytable = Table('mytable', Base.metadata,
    Column('id', Integer, primary_key=True),
    Column('somedata', String),
    Column('protecteddata', String),
)

class MyObject(Base):
    __table__ = _mytable
    _id = _mytable.c.id

    def __init__(self, somedata):
        self.somedata = somedata 
```

我说的是使用 ORM 的 INSERT。当我没有为“protecteddata”提供任何值时，SQLAlchemy 似乎在我提交时为我的“protecteddata”提供了 None。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T05:30:47.370

这里缺少细节，包括表元数据和/或声明性配置，以及我们是在谈论直接使用的核心 insert() 构造还是我们正在使用 ORM。简短的回答是 SQLAlchemy 仅在 INSERT 语句中为您提供值的那些列提供值，或者在传递的参数中，或者在 Column 对象上配置为 Python 或 SQL 端的默认值。

如果您不提供任何值，并且 Column 未配置为具有 SQLAlchemy 触发的默认值，则该列将不在 INSERT 语句的 VALUES 子句中。这个一般思想适用于核心 insert() 构造。

ORM 本身使用 insert() 构造来发出 INSERT，它确实倾向于为尚未分配的 Column 提供一个值，假设它已被映射。FetchedValue 构造用于向 ORM 指示应获取特定列以获取其值：[http ://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#triggered-columns](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html#triggered-columns)

# linux - 使用帧缓冲的两个应用程序

> ID：13977157
> 
> 赞同：1
> 
> 时间：2012-12-20T17:10:14.840
> 
> 标签：linux, framebuffer

我正在为嵌入式硬件编写一组 Linux 帧缓冲应用程序。主应用程序在 /etc/inittab 的 tty1 上运行（现在它只是一个触摸屏测试）并且应该永久运行。第二个应用程序在按下电源按钮时从 acpid 执行，它应该询问用户是否真的要关闭设备，并从触摸屏读取用户答案。我想要的是第二个应用程序在运行时会接管帧缓冲区，然后释放它并恢复屏幕状态，这样主应用程序就可以继续运行而无需重新启动。

这种情况是否可能与 2 个不同的应用程序一起使用，它们应该如何交互？现在第二个应用程序在主应用程序运行时无法绘制任何东西。

我知道我可以杀死并重新启动主应用程序，或者将断电通知移动到主应用程序并让 acpid 向它发送信号，但这些解决方案似乎并不是最佳的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:14:06.573

一种解决方案当然是拥有三个应用程序，一个执行实际的帧缓冲区交互，另外两个只是发送消息（以某种形式，例如通过管道、套接字或类似的形式）。这就是“窗口管理器”和类似的通常工作方式（但当然要复杂得多）

# c# - 查询中带有 URL 的 WCF 数据服务

> ID：13977159
> 
> 赞同：4
> 
> 时间：2012-12-20T17:10:27.563
> 
> 标签：c#, wcf-data-services, url-encoding

我正在通过 WCF 数据服务设置 OAuth。我在尝试查询提供者用户密钥的数据源时遇到问题，因为在某些情况下，密钥是 URL。例如，对于谷歌`https://www.google.com/accounts/o8/id?id=AItOawnDT8v-6rdRI221piLFbOBT1m3EYTizmDQ`

我有以下功能：

```
public override int GetUserIdFromOAuth(string provider, string providerUserId)
{
    var encodedUserId = Uri.EscapeDataString(providerUserId);
    var user = service.OAuthMemberships
                      .Where(o => o.Provider == provider &&
                                  o.ProviderUserId == encodedUserId)
                      .SingleOrDefault();
    if (user == null)
        return -1;

    return user.UserId;
} 
```

它对 twitter 非常有用，因为`ProviderUseId`它只是一个数字，但对于 google 和 yahoo 来说，它`UserId`是一个 URL，我无法让它匹配 - 即使我知道 URL 相同，它总是会得到 0 个结果。我正在转义 URL（否则查询会失败），但我怎样才能让它找到应该的匹配项？

=====编辑

我知道我可以通过首先查询提供者来使其工作 - 执行 ToList() 然后查询 ProviderUserId - 然后它不必编码，因为它不会通过 DataServices 发送。但我不喜欢将所有记录拉回单个提供商的网络中作为解决方法的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:37:33.650

为了推动这一点，我建立了一个服务运营来处理这个问题，但我仍然很好奇这个问题是否有一个“真正的”答案。

```
[WebGet]
public IEnumerable<OAuthMembership> GetOAuthUser(string provider, 
                                                 string providerUserId)
{
    providerUserId = Uri.UnescapeDataString(providerUserId);
    using (var db = new WebsiteMembershipEntities())
    {
        return db.OAuthMemberships.Where(o=>o.Provider == provider && 
                                            o.ProviderUserId == providerUserId)
                 .ToList();
    }
} 
```

# git - 链接到 GitHub 问题编号不起作用？

> ID：13977161
> 
> 赞同：0
> 
> 时间：2012-12-20T17:10:31.267
> 
> 标签：git, github

我经常使用关闭 #xxx 来引用 github 问题。几天以来，这似乎不再起作用了。从提交到问题的链接仍然有效，但我不再在问题中看到提交。他们不再关闭。

有人知道他们是否改变了什么吗？我非常喜欢这个功能，所以如果我能再次使用它会很好。

感谢任何建议

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:17:19.310

对于任何对此感兴趣的人，

我询问了 Github 支持，他们确实对此进行了一些更改。这是来自支持的答案：

> 现在，仅当提交到存储库的默认分支（通常是“主”）时，引用问题才会关闭问题。如果您将提交提交到不同的分支，则当您将该提交合并到默认分支时，该问题将被关闭。

# ruby-on-rails - Rails 3.2.8，heroku：未初始化的常量 Less::Engine

> ID：13977162
> 
> 赞同：4
> 
> 时间：2012-12-20T17:10:33.957
> 
> 标签：ruby-on-rails, ruby, heroku

我在 heroku 上的延迟工作中看到了这个错误，这对我来说毫无意义：

```
{uninitialized constant Less::Engine
  (in /app/app/assets/stylesheets/share_and_earn_recommendation_email.css.less)
/app/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/css.rb:60:in `prepare'
... 
```

为什么没有意义？因为`css.rb`看起来像这样：

```
def prepare
  if ::Less.const_defined? :Engine
    @engine = ::Less::Engine.new(data) # line 60
  else
  ... 
```

`Less::Engine`这意味着如果未定义，则不可能到达第 60 行。我错过了什么？

**编辑**

来自 heroku 控制台的更好的演示：

```
irb(main):008:0> ::Less.const_defined? :Engine 
=> true
irb(main):009:0> ::Less::Engine
NameError: uninitialized constant Less::Engine 
```

**编辑 2**

它变得更有趣：

```
irb(main):011:0> ::Less.const_defined? :Engine, false 
=> false 
```

不同的是后者不搜索祖先。但是没有祖先，所以它不应该有所作为：

```
irb(main):012:0> ::Less.ancestors
=> [Less] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:01:16.833

如果您最近在 3.2.x 堆栈中升级了您的 rails 版本，您会发现在 3.2.2 等早期版本中“存在”较少，而在 3.2.9 等更高版本中则不存在。

我还没有完全调查这个问题，但我注意到当我从 3.2.2 升级到 3.2.9 时，我遇到了一些“更少”的问题。

干杯

# mysql - 我的 mySQL 调用只返回一个值来平均应该返回所有值

> ID：13977169
> 
> 赞同：0
> 
> 时间：2012-12-20T17:10:53.043
> 
> 标签：mysql, math, median, cumulative-sum

这是我的 mySQL 语句：

```
 SELECT DATE(x.created_at), AVG(TIMEDIFF(y.created_at, x.created_at)/60/60)
    FROM 
        (SELECT *
            FROM events a 
            WHERE a.created_at > '12-10-10 12:12:12'
                AND a.type = 'Started') x INNER JOIN

        (SELECT *
            FROM events a 
            WHERE a.created_at > '12-10-10 12:12:12'
                AND a.type = 'Complete') y ON x.target_id = y.target_id
    GROUP BY DATE(x.created_at)
    ORDER BY DATE(x.created_at) 
```

理想情况下，我试图获得每个日期的运行*中位数*。因此，对于每个日期，选择`created_at`列之间的时间差，并找到该日期所有值之间的中值 TIMEDIFF。依此类推，以此类推到每个日期，只要它们有对应的`complete`.

作为一个较短的目标，我上面的代码块只是“平均”（因为我无法计算出中位数），每个日期的最后一个返回值，而不是*所有*落在该日期的值。

任何提示，提示，答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:24:07.187

给定适合测试的数据，我们的查询似乎有效。Se 这个更正的 SQL Fiddle：[http ://sqlfiddle.com/#!2/8458d/3/0](http://sqlfiddle.com/#!2/8458d/3/0)

但是，查询可以简化为

```
SELECT DATE(a.created_at),
       AVG(TIMEDIFF(b.created_at, a.created_at)/60/60)
FROM events a
INNER JOIN events b
ON a.target_id = b.target_id
WHERE a.created_at > '2012-10-10 12:12:12'
AND a.type = 'Started'
AND b.created_at > '2012-10-10 12:12:12' -- not needed?
AND b.type = 'Completed'
GROUP BY DATE(a.created_at)
ORDER BY DATE(a.created_at) 
```

# arrays - 淘汰赛 2：如何对可观察数组中的每个项目进行计算值。

> ID：13977174
> 
> 赞同：0
> 
> 时间：2012-12-20T17:11:13.730
> 
> 标签：arrays, observablecollection, knockout-2.0, computed-observable

嗨，我有一个可观察的数组

```
this.item = ko.observableArray({
     tax: ko.observable(8.0);
     price: ko.observable(100.00);
     eachTotal:  ko.computed(function() {
           this.tax() * this.price();
     });
}); 
```

我收到错误消息说对象 [Window] 没有税收方法。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:10:58.997

那么我必须做的是这个。

```
ko.utils.arrayForEach(myModel.item(), function(it) {
     it.eachTotal = ko.computed(function() {
        return it.tax() * it.price();
     });
}); 
```

我想知道这是否是最有效的方法？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:07:59.237

*这*可能不像您在 javascript 中所期望的那样。它是调用者的上下文。
作为一种补救措施，通常在构造函数的开头设置一个*self*或 _ *self*。[在淘汰赛](http://knockoutjs.com)
中再次查看示例并注意*self*。

 *或者如果*arrayForEach*像[下划线](http://underscorejs.org)一样工作，那么还有第三个参数是“this context”。*

# c# - 访问串行端口时信号量超时？

> ID：13977175
> 
> 赞同：2
> 
> 时间：2012-12-20T17:11:17.330
> 
> 标签：c#, timeout, serial-port, semaphore

我在 C# 中打开串行端口时遇到了这个问题（这应该很简单；或者我想）。

当我尝试打开串口时，出现以下异常：

> 信号量超时期限已过。

这是执行此操作的方法。

```
public static void Open_TheActivePortWeWillUse(String Drone_StringNameFromUser)
{
    var TempSerialPort = new SerialPort (
        Drone_StringNameFromUser, 
        (int) SerialPortParameter.TheSerialPortSpeed);

    // Now we have a name that anybody can see and use
    OurSpecificPorts.TheActivePortWeAreUsing = TempSerialPort;      
    // We'll do 8-N-1 since almost the whole planet does that
    OurSpecificPorts.TheActivePortWeAreUsing.DataBits = 8;  
    // We'll do 8-N-1
    OurSpecificPorts.TheActivePortWeAreUsing.Parity = Parity.None;    
    // We'll do 8-N-1
    OurSpecificPorts.TheActivePortWeAreUsing.StopBits = StopBits.One;    

    OurSpecificPorts.TheActivePortWeAreUsing.DataReceived +=    
        OurBackGroundSerialPortReceiver;
    // We can now open our active port, which is what this line does
    OurSpecificPorts.TheActivePortWeAreUsing.Open();      
} 
```

对我来说最奇怪的是我得到这个错误不一致。*一半时间它可以正常工作*，而另一半时间则*不行*。

有人看到我的代码有什么明显错误吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T20:53:03.303

在方法内声明您的 SerialPort 对象将不允许在方法关闭后访问它。这是一种打开端口的方法：

```
 private void OpenSerialPort(String portName)
    {
        try
        {
            serialPort1.Close();
            serialPort1.PortName = portName;
            serialPort1.BaudRate = 115200;
            serialPort1.DataBits = 8;
            serialPort1.Handshake = Handshake.None;
            serialPort1.Parity = Parity.None;
            serialPort1.RtsEnable = false;
            serialPort1.StopBits = StopBits.One;

            serialPort1.Open();

        }
        catch (Exception ex)
        {
            MessageBox.Show("Could not open serial port " + portName, "Error");
        }
    } 
```

SerialPort 对象在类中声明：

```
namespace Arcadia
{
    public partial class Form1 : Form
    {
        private SerialPort serialPort1; 
```

并且在构造函数中添加了回调：

```
 public Form1()
    {
        InitializeComponent();

        serialPort1.DataReceived += new SerialDataReceivedEventHandler(this.SerialPortReadCallback); 
```

发送数据以不同的方法处理：

```
 private void SerialPortWrite(String writeString)
    {
        if (serialPort1.IsOpen)
        {
            serialPort1.WriteLine(writeString);
        }
    } 
```

这是接收到的数据回调：

```
 private void SerialPortReadCallback(object sender, SerialDataReceivedEventArgs args)
    {
        try
        {

            while (serialPort1.BytesToRead > 0)
            {
                // Do something with the data

            }
        }
        catch (Exception ex)
        {
        }
    } 
```

# git - 上传时出现 git push 错误

> ID：13977180
> 
> 赞同：0
> 
> 时间：2012-12-20T17:12:06.110
> 
> 标签：git, github, gerrit, repository

有没有人在执行 git push 之前看到过这个错误？任何调试或克服错误的提示？

```
mkdir opensource && cd opensource
git clone git://git.qinc.com/platform/vendor/q-opensource/wcn/prime.git
cd prime
git checkout -b jb_2.5 origin/jb_2.5
git cherry-pick -x ..7174961054435d3ae9d233c81227b0715cfc1715
git push ssh://review-android.qinc.com:29418/platform/vendor/q-opensource/wcn/prime.git jb_2.5:refs/for/jb_2.5

test@wcn-linux5:/local/mnt2/workspace2/test/LA_builds/opensource_JB2.5/prime$ git push ssh://review-android.qinc.com:29418/platform/vendor/q-opensource/wlan/prime.git jb_2.5:refs/for/jb_2.5
Enter passphrase for key '/usr2/test/.ssh/id_rsa':
Counting objects: 662, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (100/100), done.
Writing objects: 100% (148/148), 534.35 KiB, done.
Total 148 (delta 88), reused 97 (delta 47)
remote: Resolving deltas: 100% (88/88)
remote: Processing changes: refs: 1, done   
remote: (W) be1d372: no files changed, was rebased
To ssh://review-android.qinc.com:29418/platform/vendor/q-opensource/wlan/prime.git
! [remote rejected] jb_2.5 -> refs/for/jb_2.5 (no changes made)
error: failed to push some refs to 'ssh://review-android.qinc.com:29418/platform/vendor/q-opensource/wlan/prime.git' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:23:38.867

看起来有人承诺，推动，重新定位，承诺，然后进行强制推动以改写历史。

Brian Campbell 回答的一个症状：[Git non-fast-forward denied](https://stackoverflow.com/questions/5667476/git-non-fast-forward-rejected)

我相信您遇到的是有人在回购中改写了历史。不是一个很好的情况。你拉了吗？您可能需要克隆 repo 的新副本，因为您的历史记录不再符合服务器的历史记录并再次进行更改。

# regex - 我的正则表达式太贪心了吗？

> ID：13977186
> 
> 赞同：2
> 
> 时间：2012-12-20T17:12:33.770
> 
> 标签：regex, bash

**背景**：我们在这里使用磁带库和备份软件 NetWorker 来备份数据。安装的客户端是相当基本的，当我们需要恢复多个目标目录时，我们创建一个脚本，通过带有以下 X 行的脚本在后台简单地调用 X 个客户端实例：

```
recover -c client-srv -t "Mon Dec 10 08:00:00" -s barckup-srv -d /dest/dir/ -f -a /src/dir & 
```

问题是同时从同一台机器备份的不同分区/目录可能分布在几个不同的磁带上，并且其中一些磁带可能已在备份和恢复之间从库中删除。

直到最近，这里的人们一直在找出需要哪些磁带的唯一方法是等待库抱怨它没有特定的磁带，或者在蹩脚的旧桌面 GUI 中设置虚假恢复客户端并点击特定的菜单选项。当磁带在异地并且需要一天时间才能取回时，第一种选择非常糟糕，而第二种选择既乏味又耗时。

**实际问题**：我编写了一个“元”脚本，它读取我们已经使用上述命令创建的脚本，将其输入交互式 CLI 客户端，并让它吐出所需的磁带，以及它们是否'实际上在图书馆。为此，脚本使用以下正则表达式提取必要的信息：

```
# pull out a list of the -a targets
restore_targets="`sed 's/^.* -a \([^ ]*\) .*$/\1/' $rec_script`"

# pull out a list of -c clients
restore_clients="`sed 's/^.* -c \([^ ]*\) .*$/\1/' $rec_script`"
numclients=`echo $restore_clients | uniq | wc -l`

# pull out a list of -t dates
restore_dates="`sed 's/^.* -t \"\([^\"]*\)\" .*$/\1/' $rec_script`"
numdates=`echo $restore_dates | uniq | wc -l` 
```

我不太熟悉使用正`s/\(x\)/\1/`则表达式的类型，以至于我不记得名字了，但这是完成我正在做的事情的最佳方式吗？这些命令*有效*，但我想知道我是否在`.*`不必要地使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:22:28.837

`\1`指第一个捕获组。如果您替换`foo(.*?)`为`\1`并输入`foobar`，则生成的文本变为`bar`，`\1`指向第一个捕获组捕获的文本。

至于您的问题，使用 Python（或其他高级脚本语言）解析参数可能更安全、更容易：

```
>>> import shlex
>>> shlex.split('recover -c client-srv -t "Mon Dec 10 08:00:00" -s barckup-srv -d /dest/dir/ -f -a /src/dir &')
['recover', '-c', 'client-srv', '-t', 'Mon Dec 10 08:00:00', '-s', 'barckup-srv', '-d', '/dest/dir/', '-f', '-a', '/src/dir', '&'] 
```

现在，这更容易使用。引号消失了，命令的所有组件都很好地分成了一个列表。

如果您希望这完全是万无一失的，您可以`argparse`很容易地为此命令行使用和实现自己的解析器。这将使您能够轻松获取信息，但对于您的情况而言，这可能有点过头了。

至于您的*实际*问题，您可以剖析正则表达式：

```
^.* -t "([^\"]*)" .*$ 
```

此正则表达式捕获`-t "foo \" bar"`，而非贪婪版本将停止在`-t "foo \"`.

# jquery - 如何通过字段名称而不是 id 获取文件上传的值？

> ID：13977191
> 
> 赞同：0
> 
> 时间：2012-12-20T17:12:39.267
> 
> 标签：jquery, wordpress

我正在使用带有 Wordpress 的插件用于联系表格，并上传文件。我无法为该字段分配“ID”或类，它只有一个名称。如何选择此字段以获取值并将其显示在文本字段中？我正在使用这段代码，当上传字段有一个 ID 时它工作得很好。所以我需要弄清楚如何修改它以只使用一个字段名称。名称是“CustomFormsFileUpload_945”

```
$(function() {
    $("#ufo-field-id-945").change(function() {
        $("#ufo-field-id-948").val($(this).val())

        var string = $("#ufo-field-id-948").val();
        var new_string = string.replace('C:\\fakepath\\', '');
        $("#ufo-field-id-948").val(new_string);

    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:14:42.040

您可以使用属性选择器：

```
$('[name="CustomFormsFileUpload_945"]') 
```

（如果你实际上并没有两者`945`，`948`你应该把它保存在一个变量中。）

# c# - 清单中的 Windows 8 应用商店应用程序（C#）requireAdministrator 不起作用

> ID：13977192
> 
> 赞同：0
> 
> 时间：2012-12-20T17:12:41.580
> 
> 标签：c#, windows-8, windows-store-apps

我正在尝试运行这行代码来禁用 Windows 8 Store App (C#) 中的设备（在设备管理器中找到）：

`bool result = Native.SetupDiCallClassInstaller(Native.DIF_PROPERTYCHANGE, hDevInfo, ptrToDevInfoData);`

结果返回“false”，表示它无法禁用设备。我知道这行代码可能需要管理员权限才能运行，所以我用这行创建了一个清单文件：

`<requestedExecutionLevel level="requireAdministrator" uiAccess="false" />`

我添加了这个构建后事件命令行：

`"C:\Program Files (x86)\Windows Kits\8.0\bin\x64\mt.exe" -manifest "$(ProjectDir)$(TargetName).exe.manifest" -updateresource:"$(TargetDir)$(TargetName).exe;#1"`

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:08:01.467

你最好的选择（如果你不介意它进入商店）是创建一个可以做你想做的普通 Windows 服务，然后让你的 Metro 应用程序与之交谈（通常禁用循环返回，但因为它不是进入商店这将不是问题）。

# grails - Grails g：带有查询字符串的javascript标记生成错误

> ID：13977193
> 
> 赞同：1
> 
> 时间：2012-12-20T17:12:44.737
> 
> 标签：grails, gsp, grails-2.0

当我创建标签时，`<g:javascript src="highcharts/highcharts.js?v=255" />`我收到错误：

```
I can't work out the type of /tools/js/highcharts/highcharts.js?v=205 with type [text/javascript]. Please check the URL, resource definition or specify [type] attribute 
```

文档说 g:javascript 没有 type 属性，在查看 grails 源代码后，我发现它使用 FileNameUtils.getExtension() 来确定资源的类型。由于这只是执行 lastIndexOf('.') 并返回右侧，因此显然不会找到它。在这种情况下，我们真的不需要添加 v=255，所以我现在可以删除它，但是我仍然希望将来能够这样做。我在这里有什么选择？

Grails 版本是 2.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T20:42:07.930

如果您只想处理 javascript 包含的版本控制，那么您可以将缓存设置为高并根据需要更改数量，您应该查看[grails 缓存资源插件](http://grails.org/plugin/cached-resources)。

就个人而言，我认为您希望将 highcharts.js 作为资源插件模块的一部分来为您处理。它会在你允许的时候处理版本控制和缩小等。[快速入门](http://grails-plugins.github.com/grails-resources/)应该足以让您继续前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:39:15.730

使用 HTML 标签怎么样？

```
<script src="highcharts/highcharts.js?v=255 type="text/javascript"/> 
```

# c# - 使数组 const 产生“在此上下文中使用 null 无效”错误

> ID：13977194
> 
> 赞同：4
> 
> 时间：2012-12-20T17:12:45.637
> 
> 标签：c#, compiler-errors

我有一个像这样的课程：

```
class SomeTests {
  private Guid[] someGuids = new Guid[] { ... }

  public void ThoseGuidsShouldAlwaysBeThere() {
    foreach (Guid g in someGuids) { // error appears here
        // ...
    }
  }
} 
```

从语义上讲，我想`someGuids`成为`const`，因为它们不应该被更新，除非在重新编译代码之前。但是添加`const`关键字会产生[错误 CS0168](http://msdn.microsoft.com/en-us/library/19w6t732%28v=vs.71%29.aspx)：`null is not valid in this context.`

阅读该错误的 MSDN 页面，在我看来编译器认为我正在这样做：

`foreach (Guid g in null) {`

我不明白在这里添加是如何`const`导致这个问题的，以及如何解决我的语义问题（列表是只读的，不可写）——将其保留为数组而不是列表“几乎”足够好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:04:17.510

此用法中的`readonly`关键字有点误导。将其视为防止集合被重新实例化而不是修改。

例子：

```
 private readonly Guid[] someGuids = new Guid[] { Guid.NewGuid() };

 //This will not compile because it is read-only.
 someGuids = new Guid[] { Guid.NewGuid() };

 //This still compiles, and the first member will be changed
 someGuids[0] = Guid.NewGuid(); 
```

我建议您考虑与关键字`System.Collections.ObjectModel.ReadOnlyCollection<T>`结合使用。`readonly`

例子：

```
 public readonly ReadOnlyCollection<Guid> someGuids = new
       ReadOnlyCollection<Guid>(new Guid[] { Guid.NewGuid(), Guid.NewGuid() }); 
```

该集合将不再能够被重新实例化，其成员也不能被修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T17:22:53.003

尝试创建`Guid[]`一个常量应该会给您一个错误“除字符串之外的引用类型的常量字段只能用 null 初始化。”

`readonly`改为：

```
private readonly Guid[] someGuids = new Guid[] { Guid.NewGuid() }; 
```

当它是`readonly`你也可以在构造函数中分配值：

```
public SomeTests()
{
    someGuids = new[] { Guid.NewGuid(), Guid.NewGuid() };
} 
```

正如 Jeffery 在评论中提到的，此解决方案可防止`someGuids`重新分配，但仍可以修改项目。杰弗里在他的回答中解决了这个问题。

# java - 记录所有 tcp 连接

> ID：13977195
> 
> 赞同：-2
> 
> 时间：2012-12-20T17:12:47.800
> 
> 标签：java, logging, tcp, connection

如何在java中记录tcp连接？我有一些使用 tcp（http 或二进制）调用各种服务的代码，我想在调用某些东西（连接开始）时在控制台上看到。添加此类事件的日志记录的最佳方法是什么？

我正在考虑在 urlconnection、socket 等上添加方面，但也许有更简单的方法？是否有一些用于每个连接的单个 Java 类不是太低级别并且可能以某种方式被“拦截”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:50:32.543

您无法提前知道性能不佳的根源在*哪里*，那么您到底要在哪些方面添加方面？

考虑到您提到的要求，您最好的选择是使用分析器。JProfiler 将是一个很好的起点。

# flash - ERROR #1063 错误不匹配错误是

> ID：13977197
> 
> 赞同：2
> 
> 时间：2012-12-20T17:12:57.890
> 
> 标签：flash, flash-cs5

我为战士和子弹使用数组

```
package {
    import flash.display.MovieClip;
    import flash.events.Event;

public class level extends MovieClip {

    var fighters:Array;
    var bullets:Array;

    public function level() {
        trace("level");
        addEventListener(Event.ENTER_FRAME, loop);
        bullets=new Array();
        fighters=new Array();
    }

    function loop(e:Event) {
        if(numChildren<3) {
            var f=new fighter();
            addChild(f);
            // fighter spaWNS RANDOMLY
            f.x=Math.random()*stage.stageWidth;
            f.y=Math.random()*stage.stageHeight;
            f.rotation=Math.random()*360;
            fighters.push(f);
        }

        for(var bcount=bullets.length-1; bcount>=0; bcount--) {
            bullets[bcount].update();
            if(bullets[bcount].parent==null) {
                bullets.splice(bcount,1);
                bcount--;
            }
        }

        for(var count=fighters.length-1; count>=0; count--) {

//**** error is here
//**** there is a mismatch in the arguments with the fighter

            fighters[count].update();

            for(bcount=bullets.length-1; bcount>=0; bcount--) {
                if(fighters[count].hitTestObject(bullets[bcount])) {
                    fighters[count].health--;
                    removeChild(bullets[bcount]);
                    bullets.splice(bcount,1);
                }
            }

          if(fighters[count].health<=0) {
              removeChild(fighters[count]);
              fighters.splice(count,1);
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:27:00.850

错误 #1063 表示您没有传递所需的参数或传递的参数超出预期。可能有关于您未发布的错误的其他信息可能会有所帮助，并且很可能看起来像：

ArgumentError: 错误 #1063: •class 和 function• 上的参数计数不匹配。预期 1，得到 0

检查 fighter() 对象的 update() 函数，看看它是否需要一个参数。

# java - Java、Windows/Linux 中通过 Runtime.getRunTime.exec() 的路径名、文件名

> ID：13977199
> 
> 赞同：2
> 
> 时间：2012-12-20T17:13:11.187
> 
> 标签：java, linux, path

我正在用 Java 编写一个 Java Swing 应用程序，用作 ffmpeg 命令的前端。它从用户那里输入文件夹和文件名，并添加更多在 JTextField 中不断显示的参数。用户可以在将要调用的文本字段中编辑最终命令。

这适用于 Windows 和 Linux：

```
Process ffmpeg = Runtime.getRuntime().exec(command, null, new File(current_working_folder)); 
```

命令是一个字符串。它的格式取决于操作系统，因此路径始终是完整的（绝对路径），并且斜杠适用于给定的操作系统。

在 Windows 和 Linux 中，可以通过将文件夹和文件名包含在“....”中来执行 ffmpeg 命令。在 Windows 中，这种格式最终通过 Runtime.getRunTime.exec() 起作用。

但是，在 Linux 中，这不适用于 Runtime.getRunTime.exec()。引号可能被误解为“....”。

对此有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:34:41.297

尝试使用以下方法将命令作为数组而不是字符串传递：[Runtime.exec(String[] cmdarray, String[] envp, File dir)](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec%28java.lang.String%5b%5d,%20java.lang.String%5b%5d,%20java.io.File%29)。

例如，而不是：

```
Runtime.getRuntime().exec("ffmpeg -i video_origine.avi video_finale.mpg", null, new File(current_working_folder)); 
```

利用：

```
Runtime.getRuntime().exec(new String[]{"ffmpeg", "-i", "video_origine.avi", "video_finale.mpg"}, null, new File(current_working_folder)); 
```

# sql-server-2008 - 无法绑定多部分标识符“abc@abc.com”。在 MS SQL 2008 中

> ID：13977205
> 
> 赞同：0
> 
> 时间：2012-12-20T17:13:37.260
> 
> 标签：sql-server-2008

我有一个接收一个参数@Value VARCHAR(8000) 的存储过程。当我尝试使用 email_id 值执行此存储时，我收到上述错误。代码是这样的：

```
PROCEDURE [dbo].[check] @Value VARCHAR(8000)
AS
BEGIN
...
END 
```

执行命令是：

```
EXEC [dbo].[check] @Value = 'abc@abc.com'; 
```

问题很明显，MS SQL 将值中的点作为多部分读取，尽管该值被单引号包围。我当然可以用另外两组单引号（例如'''abc@abc.com'''）包围该值并删除存储过程中的额外引号，但是有没有更好的方法来实现相同的效果？

# ruby-on-rails - rails 服务器不会以 em-websocket 启动

> ID：13977208
> 
> 赞同：0
> 
> 时间：2012-12-20T17:13:46.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, em-websocket

我正在尝试使用 em-websocket 构建一个 rails websocket 应用程序。我已将以下代码放在文件 config/initializers/websocket.rb 中，但是当我运行“rails server”时，应用程序无法启动。如果我删除代码它开始正常。同样的事情发生在我的本地机器和服务器上。

```
require 'eventmachine'
require 'em-websocket'

EventMachine.run {

    EventMachine::WebSocket.start(:host => "0.0.0.0", :port => 8080) do |ws|
        ws.onopen {
          puts "WebSocket connection open"
          ws.send "Hello Client"
        }

        ws.onclose { puts "Connection closed" }
        ws.onmessage { |msg|
          puts "Recieved message: #{msg}"
          ws.send "Pong: #{msg}"
        }
    end

    puts "Websocket started"
} 
```

我得到这个控制台打印出来

```
=> Booting WEBrick
=> Rails 3.2.1 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Websocket started 
```

如果我删除上面的代码，它开始正常，我得到：

```
=> Booting WEBrick
=> Rails 3.2.1 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2012-12-21 04:19:52] INFO  WEBrick 1.3.1
[2012-12-21 04:19:52] INFO  ruby 1.9.3 (2012-04-20) [i386-mingw32]
[2012-12-21 04:19:52] INFO  WEBrick::HTTPServer#start: pid=1484 port=3000 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:18:12.507

我以前没有使用过这个 gem，但看起来你正在初始化程序中启动一个服务器。

然后在主线程上暂停执行，直到您的 Websockets 服务器将控制权返回给它（这可能是您的 websockets 服务器关闭时）。

您可能希望服务器作为一个单独的应用程序，因此您有一个响应 HTTP 的服务器（您的 Rails 服务器）和一个响应套接字的服务器（您的初始化程序文件的开头）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T00:08:30.763

**第一个解决方案：**

*   将 websocket.rb 移动到*/config*（不在初始化程序中）
*   运行“rails server”后，打开另一个控制台。
*   转到*your_project_path/config/*并运行“ruby websocket.rb”

**第二种解决方案：**

将您的代码放入 Thread 中以避免主线程阻塞。

```
require 'eventmachine'
require 'em-websocket'

Thread.new { 

# Your websocket code

} 
```

# prolog - 如何在 Prolog 中实现列表连接？

> ID：13977220
> 
> 赞同：1
> 
> 时间：2012-12-20T17:14:13.660
> 
> 标签：prolog, declarative

我有以下紧凑示例，它采用 3 个参数 L1、L2、L3 并在 L3 中附加 L1 和 L2（验证 L3 是 L1 和 L2 的串联）

我有这段代码（效果很好）：

```
myappend([], L, L).
myappend([X|L1], L2, [X|L]) :- myappend(L1,L2,L). 
```

事实是基本情况，**当第一个列表是一个空列表时，第一个列表与第二个列表的连接就是第二个列表**。

好的，这很清楚......规则对我来说很清楚（但一点也不）我可以认为这条规则是测试第一个，第二个和第三个参数是否具有第一个和第二个连接关系的谓词争论

好的，我正在尝试以扩展形式表达前面的代码，其中我有这个规则的主体，它表示之前必须满足的所有谓词（必须为 TRUE），以便规则的头部本身得到满足.

我在 SWI Prolog 中实现此代码时遇到一些问题，这是我的代码：

```
concatena([],L,L).

/* REGOLA */

concatena(L1,L2,L3) :- L1 = [_|T],          /* Always true: anonymous variable: "_" unifies everything */
               concatena(T,L2,L3).     /* Recursively call on the tail of L1 */
           [X|L1],
           [X|L3]. 
```

事实是基本情况（如前面的工作示例）

在我的实验中，规则是不同的。

为了验证规则的头部，它的主体中的所有谓词都必须为真......

我认为在达到基本情况之前我的想法是好的，实际上是在做：

```
L1 = [_|T],         /* It is always true */
concatena(T,L2,L3)  /* Call recursively on a subproblem of the original problem, this problem have one less element 
```

好的，这样就达到了基本情况，因此 L3 与 L2 正确统一

事实上，在我的跟踪中：

```
[trace] 3 ?- concatena([a,b],[c,d],L3).
   Call: (6) concatena([a, b], [c, d], _G1514) ? creep
   Call: (7) [a, b]=[_G1592|_G1593] ? creep
   Exit: (7) [a, b]=[a, b] ? creep
   Call: (7) concatena([b], [c, d], _G1514) ? creep
   Call: (8) [b]=[_G1595|_G1596] ? creep
   Exit: (8) [b]=[b] ? creep
   Call: (8) concatena([], [c, d], _G1514) ? creep
   Exit: (8) concatena([], [c, d], [c, d]) ? 
```

（这与我查看原始工作示例的痕迹时发生的事情相同......所以直到这里应该更正）

问题是当程序做回溯时，不工作！！！

实际上，在跟踪中我有这个（这是结束先前不完整跟踪的方式）：

```
Exit: (7) concatena([b], [c, d], [c, d]) ? creep
   Exit: (6) concatena([a, b], [c, d], [c, d]) ? creep
L3 = [c, d] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:31:58.180

我不完全清楚您在这里要做什么：重写 myappend 规则的第二部分，以便所有参数都是简单的变量项？在这种情况下，您可以使用 = 运算符重写原始 myappend 的参数：

```
concatena(L1,L2,L3) :- L1=[X|T], L3=[X|L4], concatena(T,L2,L4). 
```

你的规则的第二部分，正如你在这里写的，

```
[X|L1],
[X|L3]. 
```

不被算作规则的一部分，因为它遵循 .，因此没有回溯，并且在递归展开时没有任何事情发生。

# html - 页面对齐到中心 IE9

> ID：13977221
> 
> 赞同：-1
> 
> 时间：2012-12-20T17:14:16.040
> 
> 标签：html, css, internet-explorer

在这个网站上，我要为我的姐夫提供这个圣诞节，我的页面结构是这样的：

```
<body>
    <div id="container">
        <div id="menu">[...]</div>
        <div id="wrapper">
            <div id="section1">[...]</div>
            <div id="section2">[...]</div>
            etc etc etc
        </div>
    </div>
</body> 
```

在 Firefox 上一切看起来都很完美……但在我的 IE9 上，页面没有对齐，@font-face 也没有加载……

CSS是这样的（在我看来这里没有问题）

```
#container{width:960px;margin:0 auto;position:relative}
#wrapper{width:780px;float:right;margin-bottom:30px}
#menu{width:180px;float:left;background:url(../img/site/menu_bg.jpg) repeat-y right;height:100%;position:fixed;padding-top:55px} 
```

已经尝试了不同的设置，根本没有任何变化......我开始在这里扯掉我的头发......有什么建议吗？

提前致谢。

PS：如果有帮助...有问题的页面是：www.sweetdreams.pt/escondido.php

**编辑：**根据要求...这是页面中代码的开头：

```
<?php if(!ob_start("ob_gzhandler")) ob_start(); ?>
<!DOCTYPE html>
<html lang="pt-PT"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:17:49.047

您是否有机会在兼容模式下运行 IE？（通过按 F12 并在浏览器窗口中查看下面的开发人员工具来检查这一点。

编辑：

在 IE 中，有一个 DOCTYPE 声明是值得的，否则它只会进入 Quirks 模式。

请务必发布完整的 HTML 源代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T18:22:11.257

文档类型声明必须位于文件的第一行，否则将被忽略。它前面也不能有任何字符，即不能有空行、空格、制表符，什么都没有，只有`<!DOCTYPE html>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T17:16:58.977

而不是 { 边距：0 自动；} 尝试...

```
#container {
    position: absolute;
    left: 50%;
    width: 960px;
    margin-left: -480px; /* half of width */
} 
```

# ios - 有没有办法在您自己的应用程序中显示来自另一个应用程序的屏幕？

> ID：13977222
> 
> 赞同：0
> 
> 时间：2012-12-20T17:14:16.217
> 
> 标签：ios, ios6

我最近研究了访问短信，发现不越狱就无法获取短信。

[背景资料](https://stackoverflow.com/questions/8501941/accessing-the-iphone-sms-file)

一种可能的解决方法是访问短信应用程序，并在我自己的应用程序中显示其中的一部分。这样的方法可行吗？如果是这样，我将如何去做？

# entity-framework - 如何使实体框架类型提供程序使用运行时配置文件？

> ID：13977225
> 
> 赞同：8
> 
> 时间：2012-12-20T17:14:21.283
> 
> 标签：entity-framework, f#, type-providers

我有一个从 C# Web 项目中使用的 F# 库项目。我想在我的 F# 项目中使用实体框架类型提供程序，并让它从`Web.config`- 但我无法让它工作。

```
type internal FooDb = 
    SqlEntityConnection<ConnectionStringName="FooDb", Pluralize=true> 
```

在设计时，我需要`App.config`在 F# 库项目中有一个文件，其连接字符串具有匹配的名称。

在运行时，当从 C# Web 项目调用我的 F# 代码时，我收到一个错误，它无法找到“App.config”文件。这让我感到惊讶，因为我期望在运行时它只会用于`ConfigurationManager.ConnectionStrings`从当前活动的配置文件（在 Web 应用程序的情况下`Web.config`）加载连接字符串。然而，情况似乎并非如此。

我尝试添加`ConfigFile`参数：

```
type internal FooDb = 
    SqlEntityConnection<ConnectionStringName="FooDb", ConfigFile="Web.config", Pluralize=true> 
```

但这只是让它在设计时抱怨它找不到`Web.config`。

然后我`App.config`将 F# 库项目中的文件重命名为`Web.config`，这似乎让事情变得正常了。但是，我对这个解决方案感到不安。这真的是它的预期工作方式吗？我的库项目中必须有一个 web.config 文件吗？如果我想从命令行可执行文件中使用相同的库，并且在该环境中调用配置文件，我会怎么做`AssemblyName.exe.config`？

强迫我硬编码在不同上下文中可以有不同名称的配置文件的名称似乎很脆弱，而且设计很糟糕。请告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T22:29:27.837

你遇到的这个问题，看起来确实很不幸，不知道你是不是漏掉了什么。但是，[SqlEntityConnection 文档](http://msdn.microsoft.com/en-us/library/hh362322%28v=vs.110%29.aspx)说`FooDb`应该有一个`GetDataContext`重载，其中“在运行时确定连接字符串时可以使用连接字符串参数”。也许这会给你一个足够体面的工作（即从`ConfigurationManager.ConnectionStrings`你自己传递连接字符串）。

# iphone - 自定义代理未接听电话

> ID：13977227
> 
> 赞同：2
> 
> 时间：2012-12-20T17:14:37.027
> 
> 标签：iphone, objective-c, ios, delegates

我的自定义委托没有接到电话。这是我的设置。`ViewController`有一个`SliderView`对象，它是 的子类`UIScrollView`：

幻灯片视图.h

```
#import <UIKit/UIKit.h>

@protocol SlideViewDelegate <NSObject
@required
-(void) didTapImageData:(NSMutableArray*)imageData atIndex:(int)index;
@end

@interface SliderView : UIScrollView<UIGestureRecognizerDelegate> {
   __weak id<SlideViewDelegate> slideViewDelegate;
}

@property (nonatomic, weak) id<SlideViewDelegate> slideViewDelegate;

@end 
```

幻灯片视图.m

```
#import "SliderView.h"
@implementation SliderView
@synthesize slideViewDelegate;

- (void) handleTap:(UITapGestureRecognizer *)recognizer{
    NSLog(@"tapped");
   [[self slideViewDelegate] didTapImageData: imageData atIndex:0 ];
} 
```

视图控制器.h

```
@interface ViewController : UIViewController <
                                        UIScrollViewDelegate,
                                        SlideViewDelegate>{
   SliderView *thumbGalleryView;//delegate and reference are set in XCode
} 
```

视图控制器.m

```
#import "ViewController.h"
@implementation ViewController

-(void)didTapImageData:(NSMutableArray*) imageData atIndex:(int)index{
    NSLog(@"NOT WORKING HERE");
} 
```

所以`ViewController`永远不会收到上述方法的电话。`thumbGalleryView`链接到并且`ViewController`委托也设置为`ViewController`。`SlideView`的`handleTap`打印消息很好，但`[[self slideViewDelegate] didTapImageData: imageData atIndex:0 ];`被忽略了。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:21:12.143

仔细检查您设置委托的位置 - 如果您的委托`nil`当时`-handleTap:`调用您的`-didTapImageData:atIndex:`方法，则不会发生任何事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:42:00.877

您已设置`delegate`哪个是`ivar`滚动视图。

您必须`slideViewDelegate`将`ViewController`

* * *

**已编辑**

添加`IBOutlet`

```
IBOutlet __weak id<SlideViewDelegate> slideViewDelegate; 
```

然后从您的xib连接`slideViewDelegate`到`ViewController`
还记得将滚动视图的类更改为`SliderView`
添加图像以清楚起见 ![在此处输入图像描述](../Images/c3f6ffd682eeadc7f8897cc79586877b.png)

# php - ZendFramework - 只有 indexcontroller indexAction 正在工作

> ID：13977229
> 
> 赞同：1
> 
> 时间：2012-12-20T17:14:47.590
> 
> 标签：php, zend-framework, redirect

我已经在共享主机上上传了 ZF，但它只是`indexcontroller`并且`indexAction`正在休息，它显示“404 Page not Found”。

站点在本地服务器上运行良好。

可能是什么问题？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:23:54.647

未应用 mod_rewrite 规则。最可能的原因是您的 Web 服务器未设置为读取 .htaccess 文件（这是默认情况下指定 ZF 重写规则的地方）。`AllowOverride`比较两个环境之间的 Apache 变量设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T03:12:13.507

我的猜测是 .htaccess 丢失，或者它的权限等导致路由问题。检查“不漂亮”的网址来查看，但我猜你会毫无问题地到达这些页面。

# iphone - iOS Safari页面上方奇怪的灰色空间

> ID：13977231
> 
> 赞同：0
> 
> 时间：2012-12-20T17:14:54.700
> 
> 标签：iphone, ios, ipad, safari, ios6

如果您在 iOS 设备（运行 6+）的 Safari 浏览器上访问 www.projectjuice.com，您会看到在任何页面加载时顶部都有灰色空间。

页面完全加载后，它会再次向上移动。

任何想法为什么如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:24:24.453

是的，这是一个苹果智能横幅。之后查看元标记`<meta name="apple-itunes-app" content="app-id=myAppStoreID>`并将其删除或添加正确的 appStoreId。

# ruby-on-rails - Rails 3 多部分搜索

> ID：13977233
> 
> 赞同：0
> 
> 时间：2012-12-20T17:15:08.540
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search

我已经花了几天的时间来解决这个问题，只是无法弄清楚如何将范围或其他方法应用于此。我也尝试了一些搜索宝石，但因为我处于如此基本的水平，所以想让事情尽可能简单。下面的工作大致基于 rails casts #37 “simple search” 教程。它是唯一一个略微成功的。

我的问题; 我想对年份、品牌、型号、发动机（如果有）进行搜索，深入到所需的车辆。为了方便我，我每页进行一次搜索。目前我无法将以前的搜索参数带到当前搜索中。我确信有比下面的方法更好的方法，我愿意接受建议。我只是无法成功地改编我在网上找到的例子。

数据库：我有一个名为“carinfo”的 postgres 数据库表，该表包含“id、caryear、carmake、carmodel、carengine、submodel、website1、website2、website3”列。我已经用十几辆左右的车辆填充了一些测试数据。

控制器/listing_controller.rb

为了简化事情，我还没有使用模型，所以它全部在控制器中：

```
class ListingController < ApplicationController 
  include ListingHelper 

  def year 
    @searchyr = Carinfo.find(:all)
  end

  def make
    @searchmk = Carinfo.find(:all, :conditions => ['caryear LIKE ?', "%#{params[:year]}%"])
  end

  def model
    @searchmdl = Carinfo.find(:all, :conditions => ['caryear LIKE ? AND carmake LIKE ?', "%#{params[:year]}%", "%#{params[:make]}%"] )
      # '%2009%' static values work ok
  end

  def engine
    @searcheng = Carinfo.find(:all, :conditions => ['caryear LIKE ? AND carmake LIKE ? AND carmodel LIKE ?', "%#{params[:year]}%", "%#{params[:make]}%", "%#{params[:model]}%"])
  end

  def selectedcar
    @searchres = Carinfo.find(:all, :conditions => ['caryear LIKE ? AND carmake LIKE ? AND carmodel LIKE ? AND carengine LIKE ?', "%#{params[:year]}%", "%#{params[:make]}%", "%#{params[:model]}%","%#{params[:engine]}%"])
  end

end 
```

意见/清单/year.html.erb

```
<% provide(:title, "Year") %> 
<h1>Year Search - Under: Listing</h1>

<%= form_tag(make_path, :method => "get") do %>
    <%= select_tag :year, options_for_select(@searchyr.collect{|y| [y.caryear, y.caryear]}.uniq), {:onchange => 'this.form.submit()'} %>
<% end %>

<!-- this can be deleted once everything is working  it just helps see what's filtered -->
<ul>
    <% for search in @searchyr %>
    <li>
        <%= search.caryear %>
        <%= search.carmake %>
        <%= search.carmodel %>
    </li>
    <% end %>
</ul>

<center><%= button_to "Reset Search", year_path, class: "btn btn-large btn-primary" %></center> 
```

意见/清单/make.html.erb

```
<% provide(:title, "Make Search") %> 
<h1>Make Search - Under: Listing</h1>

<%= form_tag(model_path, :method => "get") do %>
    <%= select_tag :make, options_for_select(@searchmk.collect{|y| [y.carmake, y.carmake]}.uniq), {:onchange => 'this.form.submit()'} %>
<% end %>

<center><%= button_to "Reset Search", year_path, class: "btn btn-large btn-primary" %></center> 
```

意见/清单/model.html.erb

```
<% provide(:title, "Model Search") %> 
<h1>Model Search - Under: Listing</h1>

<%= form_tag(engine_path, :method => "get") do %>
    <%= select_tag :model, options_for_select(@searchmdl.collect{|y| [y.carmodel, y.carmodel]}.uniq), {:onchange => 'this.form.submit()'} %>
<% end %>

<center><%= button_to "Reset Search", year_path, class: "btn btn-large btn-primary" %></center> 
```

意见/清单/model.html.erb

```
<% provide(:title, "Engine Search") %> 
<h1>Engine Search - Under: Listing</h1>

<%= form_tag(selectedcar_path, :method => "get") do %>
    <%= select_tag :engine, options_for_select(@searcheng.collect{|y| [y.carengine, y.carengine]}.uniq), {:onchange => 'this.form.submit()'} %>
<% end %>

<center><%= button_to "Reset Search", year_path, class: "btn btn-large btn-primary" %></center> 
```

意见/清单/selectedcar.html.erb

```
<% provide(:title, "Selected Car") %> 
<h1>Selected Car - Under: Listing</h1>

<center><%= button_to "Reset Search", year_path, class: "btn btn-large btn-primary" %></center>

<ul>
    <% for search in @searchres %>
    <li>
        <%= search.caryear %>
        <%= search.carmake %>
        <%= link_to search.carmodel, search_path(search) %>
    </li>
    <% end %>
</ul> 
```

config/routes.rb 只是处理这个问题的部分：

```
 match '/year',          to: 'listing#year'
  match '/make',          to: 'listing#make'
  match '/model',          to: 'listing#model'
  match '/engine',          to: 'listing#engine'
  match '/selectedcar',          to: 'listing#selectedcar' 
```

一如既往，非常感谢您的帮助。谢谢迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:26:19.123

首先，您的控制器不需要所有这些方法，请执行以下操作：

```
class ListingController < ApplicationController 
  include ListingHelper 

  def search
    @search = Carinfo.where('caryear LIKE ?', params[:year]) unless params[:year].blank?
    @search = @search.where('carmake LIKE ?', params[:make]) unless params[:make].blank?
    etc etc...
  end

end 
```

然后只需要一个包含您想要搜索的所有输入的表单

# java - Java中的元组（不可修改的异构元素的有序列表）支持

> ID：13977236
> 
> 赞同：15
> 
> 时间：2012-12-20T17:15:26.297
> 
> 标签：java, tuples

我想知道为什么 Java 在其标准库中没有元组数据结构实现。例如，C++对这种固定大小的异构值集合[有很好的实现](http://en.cppreference.com/w/cpp/utility/tuple)。在[Haskell](https://hackage.haskell.org/package/base-4.8.1.0/docs/Data-Tuple.html)中也是如此。在 Java 中，我只知道[javatuples](http://www.javatuples.org/)和通过( ) 类型对[功能 Java](https://github.com/functionaljava/functionaljava)库的一些支持。我想知道为什么或至少不在标准库中？甚至 Android SDK 开发人员也添加了他们[自己](https://developer.android.com/reference/android/util/Pair.html)的 2 元组（对）实现。`Product``P1 - P8``tuple``pair`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T17:56:21.347

“Java 方式”是定义特定于使用的类，而不是这些轻量级的半类类型。如果你仔细想想，元组实际上只是一个简化的结构；Java 人员希望您继续创建结构。

这种观点正在发生一些变化，尤其是在带有 lambda 的 Java 8 中（这对 JDK 施加了压力，要求它提供泛型`Function`类型的接口，而不是像`FooCallback`. 但对于许多 Java 开发人员来说，这仍然是一种相当强烈的心态，并且有一定的意义。Java 是一种非常静态类型的语言；元组介于静态类型和动态类型之间，因为类型系统中没有任何内容可以阻止您`(int, String)`认为代表客户 ID 和名称实际上是`(int, String)`代表订单 ID 及其描述的内容。

例如，参见[这个关于 Guava 项目中问题的讨论](https://web.archive.org/web/20121223214101/http://code.google.com/p/guava-libraries/wiki/IdeaGraveyard)（“Tuples for n >= 2”）。当然，这不是官方的。但它很好地代表了 Java 的思维方式。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-08T10:49:39.643

有一个不错的库叫做`javatuples`. `Unit`它定义了从 1( ) 到 10( )的元组的通用元组类型`Decade`以及所有基本方法，例如,`equals`和even 。`hashCode``toString``compareTo`

官网：[http](http://www.javatuples.org/)
://www.javatuples.org/ Maven依赖：

```
<dependency>
    <groupId>org.javatuples</groupId>
    <artifactId>javatuples</artifactId>
    <version>[version]</version>
    <scope>compile</scope>
</dependency> 
```

（目前最新版本是`1.2`）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T17:18:07.150

它有：

```
Collections.unmodifiableList(yourList) 
```

会成功的。

我认为 JCF 的多功能性使得显式元组数据结构的存在变得不必要。

[我假设*元组*是指元素的有序不可变列表（根据[维基百科定义](http://en.wikipedia.org/wiki/Tuple)）。]

至于第 3 方图书馆，我在 google 上的强力搜索得到了[这个](http://www.javatuples.org/)，[这个](http://code.google.com/p/fasttuple/)，当然还有[这个](http://code.google.com/p/google-collections/source/browse/trunk/src/com/google/common/collect/ImmutableList.java?r=80)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-11T18:52:55.843

Java 运行时中有一种类型，称为Entry。这是 Map 内部的一个接口，在 AbstractMap 内部有它的简单实现。

[http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html)

[http://docs.oracle.com/javase/7/docs/api/java/util/AbstractMap.SimpleEntry.html](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractMap.SimpleEntry.html)

您可以将它用作两个成员的元组，甚至可以应用泛型。如果我需要两个以上的元素，我会认真思考我做错了什么。那时可能值得拥有自己的课程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T17:33:58.470

几周前，我和一位同事正在讨论这个问题。我能想出的唯一解决方案是将值内部存储在 a 中`Map<Class, Object>`并具有一些访问器方法`getValue(Class)`。否则，您如何访问元组中的值？您不能拥有一个`Tuple`为每个成员（例如`getInteger`,`getString`等）提供方法的泛型类，因为这些方法要到运行时才能知道，当您创建元组时。这也意味着您永远不可能有两个具有相同类型的成员——您如何编写这样一个类，以便在运行时知道要检索哪个对象？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T17:38:55.417

FunctionalJava 提供了一组`P`我相信符合这个想法的（产品）类。它提供`P1`-`P8`最多允许 8 个元素元组。我同意番石榴对他们为什么气馁的解释，但你去吧。

[函数式Java-P](http://functionaljava.googlecode.com/svn/artifacts/3.0/javadoc/fj/P.html)

# sitecore - Sitecore 内容树架构

> ID：13977237
> 
> 赞同：6
> 
> 时间：2012-12-20T17:15:30.297
> 
> 标签：sitecore, hierarchy, sitecore6

假设在一个项目中存在一个呈现无序列表的展示组件（可能称为 ListRenderer）。我们有几个选项可以向页面上的任何给定 ListRenderer 提供数据：

1.  在内容项上有一个 TreeList（或 TreeListEx）字段，并让 ListRenderer 从中读取。
2.  通过演示详细信息向 ListRenderer 提供数据源（或其他参数）。

我通常在我的项目中避免使用 #1，因为它将子布局绑定到模板，这会变得非常混乱。如果您沿着这条路走下去，最终您将拥有支持项目中每个潜在子布局的字段。

所以我的解决方案倾向于选项#2，它可以解决这个问题。但是，它确实有自己的问题。我应该将这些不同的“列表”放在哪里供给定的 ListRenderer 使用？为了最大限度地重用和共享，我通常在站点根目录附近创建一个包含所有这些类型的东西的组件目录，如果我预测列表将被共享。对于内容作者来说，这似乎不太容易找到并且更难使用，他们突然不知道他们的 ListRenderer 的来源在哪里，除非他们知道如何打开演示详细信息（这对我的普通用户来说有点先进）。

如果我觉得列表不会被共享，并且非常特定于页面，我会将它们直接放在相关项目的下方。但是，这会混淆内容树，并且任何动态生成的导航子布局都必须在生成指向它的链接之前检查项目是否是实际页面。我在 Sitecore 工作的越多，我使用这种方法的次数就越少，但对内容作者来说似乎更容易。当您使用这种方法时，更容易访问信息。

是否有任何行业接受的方法来解决这个问题？它一直发生在项目中，在我的脑海中，我很难在这种情况下平衡技术和内容作者问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T20:53:08.373

好问题。我已经使用了您提到的所有技术，具体取决于项目的受众和具体情况。问题在于，与 Sitecore 的所有事物一样，它们都是实现相同目标的有效方法，您将很难找到适用于各种情况的答案。

我也几乎总是使用 #2，但可能需要对内容作者进行再培训，并确保对内容作者能够选择的目标添加限制。我（在同一个项目中）在根附近（在共享内容文件夹中）和有问题的项目下构建了项目，这取决于我认为会提供最佳上下文的内容。

此外，如果其他子页面将存在于该项目以及列表项下方，那么我会将列表项放在一个单独的文件夹中（带有一个常见的“列表项”图标“）并将其重新排序为第一个项目为了分离和清晰。

如果您想使用任何类型的个性化和 DMS，那么您将需要能够切换数据源，因此您不应该对位置进行硬编码。

您可能还（如果您还没有）想考虑使用：

[使用 Sitecore ASP.NET CMS 将数据源路径转换为 ​​ID](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/05/Convert-Data-Source-Paths-to-IDs-Using-the-Sitecore-ASPNET-CMS.aspx)
- 如果您需要在以后重新构建内容，这很有用

[可查询的数据源位置](http://www.cognifide.com/blogs/sitecore/reduce-multisite-chaos-with-sitecore-queries/)
- 当您需要进行克隆时适用于多站点情况，或者当列表直接位于项目下方时设置为标准值中的默认数据源值，但让您可以灵活地更改它。

我个人更喜欢使用可查询数据源，我发现 xpath 语法更合乎逻辑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T20:46:39.807

正如 Mark 所说，没有真正的行业标准。

我觉得这是需要改进的地方。尤其是当您使用 DataSource 选项时，对于编辑者来说，事情变得不那么透明，并且随着网站规模的增长，复杂性也随之增加。

我只能告诉你我会怎么做，这很可能很像你的做法。

1) 对于新闻、事件和常见问题项等概览页面，我会将项目放在概览项下方，并使用 NewsMover 共享源模块自动创建层次结构。

2) 我将创建一个全球站点，其中包含跨站点或页面共享的项目。组件的 DataSource 项将放在此处。

3）对于标准值上存在的组件，我将在模板中添加一个列表字段（例如，当您在内容页面上显示相关项目时）

大多数情况下，这是一个合乎逻辑的选择，有时只是品味问题。

我想补充一点，我写了[一篇](http://www.partechit.nl/nl/blog/2012/oktober/solving-some-common-sitecore-component-problems)关于如何为设置为标准值的组件自动创建数据源项的博客文章。如果您正在使用它们，那可能会对您有所帮助。

**编辑：** “我通常在我的项目中避免 #1，因为它将子布局绑定到模板，这会变得非常混乱。如果你沿着这条路走，最终你将拥有支持项目中每个潜在子布局的字段。”

今天，我在[博客](http://www.partechit.nl/nl/blog/2012/december/dynamic-content-editor-templates-using-rendering-dependencies-)中介绍了一种在内容编辑器中隐藏字段和部分的方法，如果在需要这些字段的项目上没有设置子布局，这有助于防止在您的项目上有大量未使用的字段而造成混乱。

# sql - SQL Pivot 日期列？

> ID：13977241
> 
> 赞同：7
> 
> 时间：2012-12-20T17:16:06.360
> 
> 标签：sql, date, boolean, pivot

我对 SQL 相当陌生，但相信我在发布此内容之前已经寻求帮助。

我有一个查询，它返回分配给工作的人员列表，这些工作也有不同的长度，分配给这些工作的人工作的长度也不同。

我想要做的是转换什么是类似记录的列表，唯一的变量变化是日期，以及如何旋转这些数据，以便日期成为列标题，行表示 BOOL 是/否。

这是我目前正在取回的数据。JSON编码

`{"results":[{"role":"Vision Supervisor","familyname":"Unsworth","givenname":"Simon","skill":"10","level":"Telegenic Staff","id":"664","date":"2013-03-27"},{"role":"Vision Supervisor","familyname":"Unsworth","givenname":"Simon","skill":"10","level":"Telegenic Staff","id":"664","date":"2013-03-26"},{"role":"Vision Supervisor","familyname":"Unsworth","givenname":"Simon","skill":"10","level":"Telegenic Staff","id":"664","date":"2013-03-25"},{"role":"Vision Supervisor","familyname":"Unsworth","givenname":"Simon","skill":"10","level":"Telegenic Staff","id":"664","date":"2013-03-24"}]}`

我想回来的是：

`{"results":[{"role":"Vision Supervisor","familyname":"Unsworth","givenname":"Simon","skill":"10","level":"Telegenic Staff","id":"664","2013-03-27":"YES","2013-03-26":"YES","2013-03-25":"YES","2013-03-24":"YES"}]}`

我确定这是某种 PIVOT 查询，但我无法让它工作。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T17:45:13.190

如果要在 SQL Server 中运行此查询，则可以使用以下`PIVOT`函数：

```
select *
from
(
  select role, familyname, givenname, skill,
    level, id, date, 'Y' flag
  from yourtable
) src
pivot
(
  max(flag)
  for date in ([2013-03-27], [2013-03-26],
               [2013-03-25], [2013-03-24])
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/da5c4/2)

或者您可以使用聚合函数和`CASE`语句：

```
select role, familyname, givenname, skill,
  level, id,
  max(case when date = '2013-03-27' then flag end) '2013-03-27',
  max(case when date = '2013-03-26' then flag end) '2013-03-26',
  max(case when date = '2013-03-25' then flag end) '2013-03-25',
  max(case when date = '2013-03-24' then flag end) '2013-03-24'
from
(
  select role, familyname, givenname, skill,
    level, id, date, 'Y' flag
  from yourtable
) src
group by role, familyname, givenname, skill,
  level, id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/da5c4/3)

两者都给出结果：

```
|              ROLE | FAMILYNAME | GIVENNAME | SKILL |           LEVEL |  ID | 2013-03-27 | 2013-03-26 | 2013-03-25 | 2013-03-24 |
----------------------------------------------------------------------------------------------------------------------------------
| Vision Supervisor |   Unsworth |     Simon |    10 | Telegenic Staff | 664 |          Y |          Y |          Y |          Y | 
```

如果您知道要转置的值，则上述方法非常有用，但如果您不知道，则可以使用类似于以下的动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(convert(char(10), date, 120)) 
                    from yourtable
                    group by date
                    order by date desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT role, familyname, givenname, skill,
                    level, id,' + @cols + ' from 
             (
                select role, familyname, givenname, skill,
                    level, id, date, ''Y'' flag
                from yourtable
            ) x
            pivot 
            (
                max(flag)
                for date in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/da5c4/6)

# spring - 将参数从 JSP 传递到控制器 - Spring MVC

> ID：13977242
> 
> 赞同：0
> 
> 时间：2012-12-20T17:16:08.650
> 
> 标签：spring, model-view-controller, jsp, parameters, controller

当我想将参数传递给我的控制器时，我遇到了一个小问题。我在控制器中有一种方法：

`@RequestMapping("/redirect")`

 ````
public String print(String type, HttpServletRequest servletRequest)
{
    String path = "redirect:" + servletRequest.getParameter("type");
    return path;
} 
````  `我的 jsp 文件中有一些按钮：

```
<form method="post" action="/WWP/redirect">
<button onclick=" <input type="text" name="type" value="/developer"/>">Developer</button>

<button onclick=<input type="text" name="type" value="/graphic"/>>Graphic</button>

<button onclick=" <input type="text" name="type" value="/cleaner"/>">Cleaner</button>
</form> 
```

通过这种方式，我有 3 个按钮，例如，当我按下开发人员按钮变量“类型”为“/developer”时，我将其发送到控制器。但现在我的按钮看起来像这样：http: [//imageshack.us/photo/my-images/854/buttonspx.png/](http://imageshack.us/photo/my-images/854/buttonspx.png/)

它工作正常，但我无法摆脱这个 HTML 标签，而且真的很紧张。这该怎么做？或者如何以不同的方式向控制器发送值。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:39:05.903

您可以使用提交按钮并在控制器中处理它们，而不是普通按钮，如下所示

```
 <input type="submit" value="Developer" name="developer"></input>       
 <input type="submit" value="Graphic" name="graphic"></input>
 <input type="submit" value="Cleaner" name="cleaner"></input> 
```

`params`您可以在控制器类中为使用这样的属性单击的每个按钮设置不同的方法

```
@RequestMapping(value = "/redirect", method = {RequestMethod.POST}, params = "developer")
public ModelAndView developerMethod(){
}

 @RequestMapping(value = "/redirect", method = {RequestMethod.POST}, params = "graphic")
public ModelAndView graphicMethod(){
}

 @RequestMapping(value = "/redirect", method = {RequestMethod.POST}, params = "cleaner")
public ModelAndView cleanerMethod(){
} 
````

# c# - 我如何解析 InnerText 用 HtmlAgilityPack 标记？

> ID：13977243
> 
> 赞同：3
> 
> 时间：2012-12-20T17:16:08.913
> 
> 标签：c#, html-agility-pack

**语境：**

我正在尝试从这里的[页面](http://www.telelistas.net/)解析“城市” 。我已经设法模拟了对这个组合框的数据请求，这是一个 Ajax 调用。

提琴手请求：

```
POST http://www.telelistas.net/AjaxHandler.ashx HTTP/1.1
Host: www.telelistas.net
Connection: keep-alive
Content-Length: 106
Origin: http://www.telelistas.net
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko)      Chrome/23.0.1271.97 Safari/537.11
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Accept: */*
Referer: http://www.telelistas.net/
Accept-Encoding: gzip,deflate,sdch
Accept-Language: pt-BR,pt;q=0.8,en-US;q=0.6,en;q=0.4
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: cert_Origin=directo; email=bdc.testes@gmail.com; auto=automatico=0; searchparameters=bottom=0&btnsite=0&email=&uf=rj&origem=0&nome=&pagina=1&codlogradouro=&predio=213&tiquete=0&localidadeendmap=&codbairro=0&pcount=25&estacionamento=0&letra=&top=&entrega=0&pchave=&info=&logradouro=rua+da+lapa&codtitulo=-1&chave=&zoom=&comercial=0&ddd=0&comib=0&btnemail=0&pgresultado=&localidade=&telefone=&manobrista=0&codlocalidade=21000&site=&cartoes=0&atividade=&bairro=&reserva=0&residencial=0; perfil=logged=1&iduser=2563063&email=bdc.testes@gmail.com&usertype=2&specialsearch=3&siteusernome=BigDataCorp&siteuserdatanasc=15/01/1988&siteusersexo=M&siteuserlocalidade=21000&siteuseruf=RJ&siteuserddd=21&siteusertelefone=94118439&siteuserprofissao=4&siteuserrenda=5000&siteuserformacao=4&siteusernovidades=0&siteusernovidadesrevista=&siteusernovidadesparceiros=0&siteusercpf=10541308769&siteuseracesso=brasil&siteusercep=22631000&siteuseridade=24&siteuserparceiro=telelistas&siteuserconhecimento=2&siteuseroperadora=oi&siteuserurlorigem=http://www.telelistas.net/&siteuserdatacadastro=13/12/2012 11:45:00; __utma=70879631.392027796.1355939587.1356014801.1356021821.5; __utmb=70879631.1.10.1356021821; __utmc=70879631; __utmz=70879631.1355939587.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)

PostData : state=rj&style=busca_interna&selectedCity=21000&clientId=pch_localidade_select&method=GetSearchCitiesNamed 
```

**问题：**

这是此请求返回的字符串片段：

```
<select name='pch_localidade_select' class='busca_interna' id='pch_localidade_select' tabindex="4"><option value="">Selecione</option><option selected value="21000">Rio de Janeiro</option><option value="21380">Abraão</option><option value="21001">Afonso Arinos</option><option value="21002">Agência Luterback</option><option value="21847">Agriões de Dentro</option> 
```

我想要做的是到达`InnerText`选项标签（“里约热内卢”，“Abraao”......），但由于某些奇怪的原因，`InnerText`对于找到的每个选项节点，总是为空。

有一些代码片段失败：

```
 // Iterating over nodes to build the dictionary
        foreach (HtmlNode city in citiesNodes)
        {
            string key   = city.InnerText;
            string value = city.Attributes["value"].Value;

            citiesHash.AddCity (key,value);
        } 
```

**技术到位：**

我正在使用[HtmlAgilityPack](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fhtmlagilitypack.codeplex.com%2F&ei=cEfTUNTlMu6x0QHWtICoBA&usg=AFQjCNG2MH29eft1y8OrwFMjVzPNbVc0-w&bvm=bv.1355534169,d.dmQ)，它支持用于节点选择的[XPath](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http%3A%2F%2Fwww.w3schools.com%2Fxpath%2Fxpath_syntax.asp&ei=rEfTUKK-H4Pq0gHrrYGoBg&usg=AFQjCNH9Kx-zvpPSNk_PZUYsxk9ZsupJEg&bvm=bv.1355534169,d.dmQ)语法、C# 代码和用于[WebDebugging](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http%3A%2F%2Fwww.fiddler2.com%2F&ei=k0fTUN6mAuXD0QGQkYCICg&usg=AFQjCNGyVxcKeoiBFf3LsfsM8apoKVxKLQ&bvm=bv.1355534169,d.dmQ)的 Fiddler2。

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T17:22:59.187

只需`HtmlAgilityPack.HtmlNode.ElementsFlags.Remove("option");`在加载 html 之前使用

```
HtmlAgilityPack.HtmlNode.ElementsFlags.Remove("option");

HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

var options = doc.DocumentNode.Descendants("option").Skip(1)
                .Select(n => new
                {
                    Value = n.Attributes["value"].Value,
                    Text = n.InnerText
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:20:43.207

由于一些奇怪的原因，HtmlAgilityPack 没有正确处理这些标签，所以这设法解决了我的问题。

```
 // Iterating over nodes to build the dictionary
        foreach (HtmlNode city in citiesNodes)
        {
            if (city.NextSibling != null)
            {
                string key   = city.NextSibling.InnerText;
                string value = city.Attributes["value"].Value;

                citiesHash.AddCity (key,value);
            }
        } 
```

我没有直接到达节点，而是通过使用`NextSimbling`前一个 simbling 中的引用来获取每个节点的值。

# android - Android从按钮打开相机

> ID：13977245
> 
> 赞同：36
> 
> 时间：2012-12-20T17:16:15.447
> 
> 标签：android, android-camera

我希望这不是一个重复的问题，但我正在制作一个应用程序，我想要一个按钮来打开相机应用程序（单独的默认 android 相机）。我该怎么做呢？我知道有一个功能：

```
intent.setAction(MediaStore.ACTION_IMAGE_CAPTURE) 
```

我需要使用它吗？以及如何从 xml 文件中调用按钮？

我还需要担心存储该图片或视频，还是默认的相机应用程序会处理这个问题？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-20T17:40:48.397

要调用相机，您可以使用：

```
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
startActivity(intent); 
```

图像将自动保存在默认目录中。

您需要在 AndroidManifest.xml 中设置相机的权限：

```
<uses-permission android:name="android.permission.CAMERA"> </uses-permission> 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-12-29T07:31:55.110

```
 Button b = (Button)findViewById(R.id.Button01);

    b.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
             Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
             startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_PIC_REQUEST) {
          Bitmap image = (Bitmap) data.getExtras().get("data");
          ImageView imageview = (ImageView) findViewById(R.id.ImageView01); //sets imageview as the bitmap
          imageview.setImageBitmap(image);
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-20T17:33:52.813

您可以创建一个相机意图并将其称为 startActivityForResult(intent)。

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

   // start the image capture Intent
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-11T12:58:57.393

我知道回复有点晚了，但是您可以使用以下语法，因为它对我很有效

```
Camera=(Button)findViewById(R.id.CameraID);
Camera.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent Intent3=new   Intent(MediaStore.INTENT_ACTION_STILL_IMAGE_CAMERA);
            startActivity(Intent3); 
        }
    }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-18T13:47:01.027

下面的代码正是你想要的

//在点击事件上使用这个意图

`Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); startActivityForResult(cameraIntent,CAMERA_REQUEST);`

// 以上代码用于'on activity Result'

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    callbackManager.onActivityResult(requestCode, resultCode, data);

    if (requestCode == CAMERA_REQUEST) {
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        image.setImageBitmap(photo);
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-13T11:38:46.837

对我来说，这工作得很好。

```
 Intent intent=new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
 startActivity(intent); 
```

并将此权限添加到 mainfest 文件：

```
<uses-permission android:name="android.permission.CAMERA"> 
```

它打开相机，在捕获图像后将图像保存到带有新图像集的画廊。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T17:30:46.967

您对 Intent 中使用的操作是正确的，但这不是您唯一需要做的事情。您还必须添加

```
startActivityForResult(intent, YOUR_REQUEST_CODE); 
```

要完成这一切并检索实际图片，您可以查看以下线程。

[Android - 拍摄照片](https://stackoverflow.com/questions/3491961/android-capture-photo)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-14T10:51:04.093

我创建了一个库，用于从相机或厨房中挑选图像并进行裁剪

试试这个，

ImagePro.Java

```
public class ImagePro
{
    public static String TAG = "ImagePro";
    Activity activity;
    Uri mImageCaptureUri;
    public static int CAMERA_CODE = 64;
    public static int GALLERY_CODE = 74;
    public static int CROPPING_CODE = 84;
    private final static int REQUEST_PERMISSION_REQ_CODE = 704;

    public ImagePro(Activity activity) {

        this.activity = activity;
        this.outPutFile = new File(android.os.Environment.getExternalStorageDirectory(), "temp.jpg");

        if (ContextCompat.checkSelfPermission(activity, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {

            ActivityCompat.requestPermissions(activity, new String[]{Manifest.permission.WRITE_EXTERNAL_STORAGE}, REQUEST_PERMISSION_REQ_CODE);
        }
    }

    private void LogToast(String message) {

        try {
            Toast.makeText(activity, message, Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            e.printStackTrace();
        }

        Log.d(TAG, message);
    }

    private void Toast(String message) {

        try {
            Toast.makeText(activity, message, Toast.LENGTH_SHORT).show();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void Log(String message) {

        Log.d(TAG, message);
    }

    /**
     * This function return captured image path
     *
     * @param requestCode on activity result requestCode
     * @param resultCode on activity result resultCode
     * @param intent on activity result intent
     * @return ImageDetails values
     */
    public ImageDetails getImagePath(int requestCode, int resultCode, Intent intent) {

        ImageDetails imageDetails = new ImageDetails();

        if(resultCode == Activity.RESULT_OK) {

            if(requestCode == CAMERA_CODE) {
                imageDetails.setUri(mImageCaptureUri);
                imageDetails.setPath(mImageCaptureUri.getPath());
                Bitmap bitmap = null;

                try {
                    bitmap = MediaStore.Images.Media.getBitmap(activity.getContentResolver(), mImageCaptureUri);
                } catch (IOException e) {
                    LogToast(e.getMessage());
                    e.printStackTrace();
                }
                imageDetails.setBitmap(bitmap);
                imageDetails.setFile(new File(mImageCaptureUri.getPath()));

            } else if(requestCode == GALLERY_CODE) {

                Uri uri = intent.getData();

                imageDetails.setUri(uri);
                Bitmap bitmap = null;

                try {
                    bitmap = MediaStore.Images.Media.getBitmap(activity.getContentResolver(), uri);
                } catch (IOException e) {
                    LogToast(e.getMessage());
                    e.printStackTrace();
                }

                imageDetails.setBitmap(bitmap);
                imageDetails.setFile(new File(uri.getPath()));
                imageDetails.setPath(uri.getPath());

            } else if(requestCode == CROPPING_CODE) {
                try {
                    if(outPutFile.exists()){

                        imageDetails.setUri(Uri.fromFile(outPutFile));
                        imageDetails.setFile(outPutFile);
                        imageDetails.setPath(outPutFile.getPath());
                        Bitmap photo = decodeFile(outPutFile);
                        imageDetails.setBitmap(photo);
                    }
                    else {
                        LogToast("Error while save image");
                    }
                } catch (Exception e) {

                    e.printStackTrace();
                    LogToast(e.getMessage());
                }
            }

        } else {
            LogToast("user cancelled.");
        }

        return imageDetails;
    }

    /**
     * Open image pick dialog.<br/>
     * CAMERA_CODE</br>
     * GALLERY_CODE
     */
    public void openImagePickOption() {

        final CharSequence[] items = { "Capture Photo", "Choose from Gallery", "Cancel" };

        AlertDialog.Builder builder = new AlertDialog.Builder(activity);
        builder.setTitle("Add Photo!");
        builder.setItems(items, new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int item) {

                if (items[item].equals("Capture Photo")) {

                    captureImage();

                } else if (items[item].equals("Choose from Gallery")) {

                    pickImage();

                } else if (items[item].equals("Cancel")) {
                    dialog.dismiss();
                }
            }
        });
        builder.show();
    }

    /**
     * decode from file to bitmap
     * @param f file
     * @return Bitmap data
     */
    private Bitmap decodeFile(File f) {
        try {
            // decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE = 512;
            int width_tmp = o.outWidth, height_tmp = o.outHeight;
            int scale = 1;
            while (true) {
                if (width_tmp / 2 < REQUIRED_SIZE || height_tmp / 2 < REQUIRED_SIZE)
                    break;
                width_tmp /= 2;
                height_tmp /= 2;
                scale *= 2;
            }

            // decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {

            Log(e.getMessage());
        }
        return null;
    }

    /**
     * Capture image using camera <br/>
     * REQUEST_CODE = ImagePro.CAMERA_CODE
     */
    public void captureImage() {

        if(activity != null) {

            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            File f = new File(android.os.Environment.getExternalStorageDirectory(), "temp1.jpg");
            mImageCaptureUri = Uri.fromFile(f);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, mImageCaptureUri);
            activity.startActivityForResult(intent, CAMERA_CODE);

        } else {

            LogToast("Activity not assigned");
        }
    }

    /**
     * pick image from gallery
     */
    public void pickImage() {

        Intent i = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        activity.startActivityForResult(i, GALLERY_CODE);
    }

    /**
     * cropping the uri image
     * @param uri - open cropping dialog using the uri data
     */
    public void croppingImage(Uri uri) {

        CroppingIMG(uri);
    }

    int CROP_IMG_X=512;
    int CROP_IMG_Y=512;

    public void croppingImage(Uri uri, int cropX, int cropY) {

        CROP_IMG_X = cropX;
        CROP_IMG_Y = cropY;

        CroppingIMG(uri);
    }

    File outPutFile=null;

    private void CroppingIMG(Uri uri) {

        final ArrayList<CroppingOption> cropOptions = new ArrayList<>();

        Intent intent = new Intent("com.android.camera.action.CROP");
        intent.setType("image/*");

        List<ResolveInfo> list = activity.getPackageManager().queryIntentActivities( intent, 0 );
        int size = list.size();
        if (size == 0) {
            LogToast("Can't find image croping app");
        } else {
            intent.setData(uri);
            intent.putExtra("outputX", CROP_IMG_X);
            intent.putExtra("outputY", CROP_IMG_Y);
            intent.putExtra("aspectX", 1);
            intent.putExtra("aspectY", 1);
            intent.putExtra("scale", true);

            //Create output file here
            intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(outPutFile));

            if (size == 1) {
                Intent i   = new Intent(intent);
                ResolveInfo res = list.get(0);

                i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));

                activity.startActivityForResult(i, CROPPING_CODE);
            } else {
                for (ResolveInfo res : list) {
                    final CroppingOption co = new CroppingOption();

                    co.title = activity.getPackageManager().getApplicationLabel(res.activityInfo.applicationInfo);
                    co.icon = activity.getPackageManager().getApplicationIcon(res.activityInfo.applicationInfo);
                    co.appIntent = new Intent(intent);
                    co.appIntent.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
                    cropOptions.add(co);
                }

                CropingOptionAdapter adapter = new CropingOptionAdapter(activity.getApplicationContext(), cropOptions);

                AlertDialog.Builder builder = new AlertDialog.Builder(activity);
                builder.setTitle("Choose Cropping App");
                builder.setCancelable(false);
                builder.setAdapter( adapter, new DialogInterface.OnClickListener() {
                    public void onClick( DialogInterface dialog, int item ) {
                        activity.startActivityForResult( cropOptions.get(item).appIntent, CROPPING_CODE);
                    }
                });

                builder.setOnCancelListener( new DialogInterface.OnCancelListener() {
                    @Override
                    public void onCancel( DialogInterface dialog ) {

                        if (mImageCaptureUri != null ) {
                            activity.getContentResolver().delete(mImageCaptureUri, null, null );
                            mImageCaptureUri = null;
                        }
                    }
                } );

                AlertDialog alert = builder.create();
                alert.show();
            }
        }
    }

    /**
     * Capture image using camera<br/>
     * REQUEST_CODE = User defined code<br/>
     * <br/>
     * @param iRequestCode User defined code
     */
    public void captureImage(int iRequestCode) {

        CAMERA_CODE = iRequestCode;
        captureImage();
    }

    /**
     * get path, bitmap, file and uri from image details object
     */
    public class ImageDetails {

        String path="";
        Bitmap bitmap=null;
        File file=null;
        Uri uri=null;

        public Uri getUri() {
            return uri;
        }

        public void setUri(Uri uri) {
            this.uri = uri;
        }

        public String getPath() {
            return path;
        }

        public void setPath(String path) {
            this.path = path;
        }

        public Bitmap getBitmap() {
            return bitmap;
        }

        public void setBitmap(Bitmap bitmap) {
            this.bitmap = bitmap;
        }

        public File getFile() {
            return file;
        }

        public void setFile(File file) {
            this.file = file;
        }
    }

    /**
     * Created by DP on 7/12/2016.
     */
    public class CroppingOption {
        public CharSequence title;
        public Drawable icon;
        public Intent appIntent;
    }

    public class CropingOptionAdapter extends ArrayAdapter {
        private ArrayList<CroppingOption> mOptions;
        private LayoutInflater mInflater;

        public CropingOptionAdapter(Context context, ArrayList<CroppingOption> options) {

            super(context, R.layout.croping_selector, options);
            mOptions  = options;
            mInflater = LayoutInflater.from(context);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup group) {
            if (convertView == null)
                convertView = mInflater.inflate(R.layout.croping_selector, null);

            CroppingOption item = mOptions.get(position);

            if (item != null) {
                ((ImageView) convertView.findViewById(R.id.img_icon)).setImageDrawable(item.icon);
                ((TextView) convertView.findViewById(R.id.txt_name)).setText(item.title);

                return convertView;
            }

            return null;
        }
    }
} 
```

MainActivity.java

```
ImagePro imagePro;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imagePro = new ImagePro(this);
    }

    public void onClickUploadImageButton(View view) {

        imagePro.openImagePickOption();
    } 
```

onActivityResult

```
if(requestCode == CAMERA_CODE && resultCode == RESULT_OK) {

            imageDetails = imagePro.getImagePath(CAMERA_CODE, RESULT_OK, data);
            ivCrop.setImageBitmap(imageDetails.getBitmap());
//imageDetails.getPath(), imageDetails.getBitmap(), imageDetails.getUri(), imageDetails.getFile
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-19T12:36:33.460

您可以使用以下代码

```
 Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                pic = new File(Environment.getExternalStorageDirectory(),
                        mApp.getPreference().getString(Common.u_id, "") + ".jpg");

                picUri = Uri.fromFile(pic);

                cameraIntent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, picUri);

                cameraIntent.putExtra("return-data", true);
                startActivityForResult(cameraIntent, PHOTO); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-10-06T16:04:05.237

```
public class camera_act extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_camera_act);
         ImageView imageView = findViewById(R.id.image);
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        startActivityForResult(intent,90);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
        super.onActivityResult(requestCode,resultCode,data);
       Bitmap bitmap = data.getExtras.get("imageKey");
       imageView.setBitmapImage(bitmap);

        }
    }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-12-14T06:41:40.143

您可以创建一个相机意图并将其称为 startActivityForResult(intent)。

```
Intent intent = new 
Intent(MediaStore.ACTION_IMAGE_CAPTURE);
// start the image capture Intent 
startActivityForResult(intent, 
CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

# iis-7 - URL 重写规则将旧 url .aspx 替换为新的 mvc 路由

> ID：13977252
> 
> 赞同：2
> 
> 时间：2012-12-20T17:16:44.083
> 
> 标签：iis-7, url-rewriting, iis-7.5, rewrite, url-rewrite-module

我有一个要翻译成 MVC 的 webforms 网站，但我希望某些 url 已被编入索引以在 mvc 站点中找到他们的新 url，我正在努力解决以下问题：

```
http://www.domain.com/content/reviews/I_once_answered_a_question_in_SO_page512.aspx 
```

我想把它翻译成这样的格式：

```
http://www.domain.com/view/512/I_once_answered_a_question_in_SO 
```

到目前为止我拥有的最好的：

```
<rule name="content pages" stopProcessing="true">
     <match url="^.*(?:content/(.*)_page([0-9]+)\.aspx)$" />
     <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
         <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
     </conditions>
     <action type="Redirect" url="/view/{R:2}/{R:1}"/>
</rule> 
```

我认为它非常接近，但我不明白为什么它不匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:17:22.273

这很简单，你很接近，确实需要在内容文件夹和文档页面之间添加一个额外的条件：

```
 <rule name="content pages" stopProcessing="true">
      <match url="^.*(?:content/(.*)/(.*)_page([0-9]+)\.aspx)$" />
      <conditions logicalGrouping="MatchAll" trackAllCaptures="true">
        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
      </conditions>
      <action type="Redirect" url="/view/{R:3}/{R:1}/{R:2}"/>
    </rule> 
```

# javascript - 在 touchmove 上将行从表格底部移动到顶部

> ID：13977257
> 
> 赞同：0
> 
> 时间：2012-12-20T17:16:59.753
> 
> 标签：javascript, jquery

我正在使用触摸事件来处理滑动包含大约 350 行的表格。行数是可变的，因为它们是从 Google 电子表格中提取的。表格连续自动滚动，这意味着当一行在顶部或底部滚动时，我必须视情况再次附加或预先添加它。

用户可以通过触摸屏幕来向上或向下滑动表格（注意我这里说的不是移动设备，而是触摸屏显示器）。*我已经为向下滑动时的touchmove*事件提供了一个实现，尽管向上滑动是类似的：

```
function handleMove(event) {
    var touch, newY, delta,
        $firstItem = $(".item:first"),
        $lastItem = $(".item:last");

    if (!isDown) {
        return;
    }

    if (event.originalEvent.targetTouches.length == 1) {
        touch = event.originalEvent.targetTouches[0];
        newY = touch.clientY;
    }

    delta = lastY - newY;

    if (delta < 0) {    //Swiping down  
        //Move last row from the end of the table to the beginning if first row is fully visible.
        if (($firstItem.position().top + $firstItem.outerHeight(true)) >= $page.position().top) {
            $page.css("margin-top", parseInt($page.css("margin-top")) - $lastItem.outerHeight(true) + "px").prepend($lastItem);
        }

        $page.css("margin-top", parseInt($page.css("margin-top")) - delta + "px");
    }

    lastY = newY;
} 
```

问题是表格中的行越多，将行从底部移动到顶部并调整边距的代码变得越迟缓，从而导致抖动的滑动。

我猜这是一项昂贵的操作。我阅读了浏览器重排，但没有看到可以对我的代码进行的许多优化。甚至尝试引入*DocumentFragment*无济于事。

关于我可以尝试的事情有什么想法吗？或者我将不得不忍受这个？

谢谢。

# java - Java - UDP 和多播检测

> ID：13977258
> 
> 赞同：0
> 
> 时间：2012-12-20T17:17:04.427
> 
> 标签：java, tcp, udp, multicast

在单个端口上，我想监听多播、UDP 和 TCP 流量。（在我的局域网上）如果检测到某些东西，我也想通过 UDP 响应。

代码在下面工作，但仅用于多播检测。while(true) 循环肯定是从 main() 开始的。

但是我在添加另一种协议检测方法时遇到了麻烦。单个应用程序可以在多个协议中打开多个套接字吗？我确定这是我对线程的有限了解，但也许有人可以在下面看到我的小问题。

```
public class LANPortSniffer  {

  private static void autoSendResponse() throws IOException {

     String sentenceToSend = "I've detected your traffic";
     int PortNum = 1234;

     DatagramSocket clientSocket = new DatagramSocket();
     InetAddress IPAddress = InetAddress.getByName("192.168.1.121");
     byte[] sendData = new byte[1024];

     sendData = sentenceToSend.getBytes();
     DatagramPacket sendPacket = 
       new DatagramPacket(sendData, sendData.length, IPAddress, PortNum);
     clientSocket.send(sendPacket);
     clientSocket.close();

  }//eof autoSendResponse

  private static void MulticastListener() throws UnknownHostException {

     final InetAddress group = InetAddress.getByName("224.0.0.0");
     final int port = 1234;

     try {

       System.out.println("multi-cast listener is started......"); 
       MulticastSocket socket = new MulticastSocket(port);
       socket.setInterface(InetAddress.getLocalHost());
       socket.joinGroup(group);

       byte[] buffer = new byte[10*1024];

       DatagramPacket data = new DatagramPacket(buffer, buffer.length);

       while (true) {
          socket.receive(data);

           // auto-send response
           autoSendResponse();

       }

      } catch (IOException e) {
         System.out.println(e.toString());
      }

  }//eof MulticastListener

// this method is not even getting launched
private static void UDPListener() throws Exception {

    DatagramSocket serverSocket = new DatagramSocket(1234);
    byte[] receiveData = new byte[1024];

    System.out.println("UDP listener is started......"); 
    while(true)
       {
          DatagramPacket receivePacket = 
                new DatagramPacket(receiveData, receiveData.length);
          serverSocket.receive(receivePacket);
          String sentence = new String( receivePacket.getData());
          System.out.println("UDP RECEIVED: " + sentence);

       }    

}

    public static void main(String[] args) throws Exception {
            //Schedule a job for the event-dispatching thread:
            //creating and showing this application's GUI.
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    createAndShowGUI(); 
                }
             });

            try {
            MulticastListener();

        } catch (UnknownHostException e) {

            e.printStackTrace();
        }

           // this does not appear to be detected:
            try {
            UDPListener();

        } catch (Exception e) {

            e.printStackTrace();
        }

    }
}//eof LANPortSniffer 
```

在 main() 中，我尝试为简单的 UDPListener() 方法添加第二个 try/catch。
但是当我在 Eclipse 中运行应用程序时，它似乎被忽略了。

main() 方法是否只允许一次尝试/捕获？

简而言之，我想在一个端口上同时监听多播、UDP 和 TCP 数据包。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:24:38.150

你在这里遇到了一个线程问题。我认为你需要复习对 Java 的理解。当您调用`MulticastListener()`它时，它永远不会离开该块，直到您的连接失败。它有一个连续的while循环。您需要为这些活动中的每一个创建一个新线程。

```
Thread t = new Thread(new Runnable() { 
   public void run() {
         MulticastListener();
   }
}
t.start(); 
```

但是，我建议您在开始尝试实现线程程序之前阅读您对程序流程的理解并使用更面向对象的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-30T00:33:20.620

1) 您将需要原始套接字访问权限，而 MulticastListener 无法获得这些访问权限。2) Java 中的查找混杂模式和原始套接字。3) 线程问题无关紧要——它们只会给你更好的反应性能——建议你在改进代码之前让它与一个线程一起工作。

# javascript - 如何隐藏和显示选择选项

> ID：13977261
> 
> 赞同：3
> 
> 时间：2012-12-20T17:17:08.910
> 
> 标签：javascript, jquery, html

我对 jQuery 非常陌生。在我问之前，我用谷歌搜索了很多，虽然它看起来很傻，但对我来说它很复杂。

我有一个简单的`<select>`列表，其中包含大约 4 个值，如下图所示。

![在此处输入图像描述](../Images/5169965b3ef21330c68d4e852b148b7a.png)

现在在运行时，我想隐藏选项并根据 jQuery 中的索引或值名称显示。我怎样才能做到这一点？

我的下拉框有一个`div`区域和`select`带有一组值的简单选项。请给我一个简单的例子。

示例代码

```
<Div ID = "abcd">
<select>
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select>
</div> 
```

在此如何在运行时隐藏沃尔沃/欧宝？...就像我想动态显示和隐藏这些选项一样。

例如：按下按钮时，我想隐藏沃尔沃。同样，如果按下另一个按钮，我想显示沃尔沃回来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:29:42.097

如果您想隐藏整个选择，您应该为您的选择或包含您选择的 div 提供一个 id，然后您可以这样做：

```
<div id="mySelect" >your select tag here </div>

$('mySelect').show(); // or $('mySelect').hide(); 
```

[http://api.jquery.com/hide/](http://api.jquery.com/hide/)

[http://api.jquery.com/show/](http://api.jquery.com/show/)

如果您想隐藏该选项，您可以执行以下操作：

```
$("#edit-field-service-sub-cat-value option[value=" + title + "]").hide(); 
```

要更具体到您的代码：

```
<div id="abcd">
<select id="mySelect">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select>
</div>

title = 'volvo';
$("#mySelect option[value=" + title + "]").hide(); 
```

就像在这篇文章中一样： [使用 jQuery 在选择列表中隐藏选项](https://stackoverflow.com/questions/1271503/hide-options-in-a-select-list-using-jquery)

或删除它：

[JQuery：根据选项值隐藏选择的选项](https://stackoverflow.com/questions/3164690/jquery-hide-options-of-select-according-to-option-value)

# php - 当一个数组比第二个大两倍时，foreach 两个数组

> ID：13977265
> 
> 赞同：0
> 
> 时间：2012-12-20T17:17:26.133
> 
> 标签：php, arrays, foreach

好的，所以我有两个数组，第二个总是比第一个大两倍：

```
$items1 = array('1', '2', '3');
$items2 = array('a', 'b', 'c', 'd', 'e', 'f'); 
```

我知道我可以 foreach 两个具有相同项目计数的数组，如下所示：

```
foreach ($items1 as $key => $item1)
{
echo $item1 . $items2[$key] . ', ';
} 
```

这将给出这样的结果：1a、2b、3c .... 但是如何遍历这两个数组以获得这样的结果：1ab、2cd、3ef？也就是回显 $items1 数组中的第一项，然后是 $items2 中的两项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:20:43.873

```
foreach (array_combine($items1, array_chunk($items2, 2)) as $key => $value) {
  echo $key.implode($value)."\n";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:20:22.657

你可以写：

```
foreach ($items1 as $i => $item1)
{
    echo $item1 . $items2[$i * 2] . $items2[$i * 2 + 1] . ', ';
} 
```

# java - 在 POST 期间突然出现 405 Method Not Allowed 在 box-api 中创建文件夹

> ID：13977266
> 
> 赞同：2
> 
> 时间：2012-12-20T17:17:29.140
> 
> 标签：java, post, curl, oauth-2.0, box-api

我突然发现大约一周前使用 Box API 工作的代码 (java) 存在问题。我在执行 POST 以创建文件夹时收到 405 Method Not Allowed。我试图解决这个问题，假设它可能与最近的 v2 api 上线有关。但是，回到尝试文档中的示例时，我也看到了问题。例如，文档给出了以下示例...

```
curl https://api.box.com/2.0/folders -H "Authorization: Bearer MY_V1_AUTH_TOKEN_HERE" -d '{"name":"API Test Create", "parent": {"id": "ID_OF_PARENT_FOLDER_HERE"}}' -X POST 
```

当我测试它时，它什么也没做。没有新文件夹，也没有输出。我尝试过使用不同的文件夹 ID（包括零），并且我尝试过生成新的 V1 身份验证令牌。依然没有。

据我了解，V1 身份验证令牌应该会继续工作更长时间。这不正确吗？还有其他人看到这个问题吗？

这是现有的 java 代码，现在突然开始给出 405。它使用 apache fluent lib ...

```
String response = Request.Post(new 
StringBuilder(API_BASE_URL).append("/folders/").append(parent_folder_id).toString())
.addHeader("Authorization", API_REQUEST_HEADER)
.bodyString(new StringBuilder("{\"name\":\"")
.append(name).append("\"}").toString(), ContentType.DEFAULT_TEXT)
.execute()
.handleResponse(myResponseHandler); 
```

其中 API_BASE_URL="https://www.box.com/api/2.0" 和 API_REQUEST_HEADER="BoxAuth api_key=MY_APP_API_KEY&auth_token=MY_V1_AUTH_TOKEN"

如果有一个快速，甚至是临时的解决方案来解决这个问题，那就太好了。任何线索表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:23:16.647

Bearer 标头即

```
Authorization: Bearer {a bearer token acquired through oauth2} 
```

仅适用于通过[OAuth 2 进程](http://developers.box.com/oauth)检索的不记名令牌。此标头**不适**用于通过 V1 身份验证过程检索的身份验证令牌。您需要使用带有 V1 身份验证令牌的旧标题样式，即

```
Authorization: BoxAuth api_key={your api key}&auth_token={your v1 auth token} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:24:27.413

方法改变了`Create a New Folder`一点；这在您包含的 cURL 示例中有所说明。现在，您不能在请求 URL 的末尾包含父文件夹 ID，并且您必须在请求正文中包含父文件夹 ID：

```
String response = Request.Post(newStringBuilder(API_BASE_URL)
.append("/folders").toString()
.addHeader("Authorization", API_REQUEST_HEADER)
.bodyString(new StringBuilder("{\"name\":\"").append(name)
.append("\", \"parent\": {\"id\": \"").append(parent_folder_id).append("\"}}")
.toString(), ContentType.DEFAULT_TEXT)
.execute().handleResponse(myResponseHandler); 
```

**编辑：**虽然我认为方法签名更改将解决您当前的问题，但 seanrose 指出您需要过渡到 OAuth2 以获得长期稳定性。

# html - 可以向跨浏览器的 html 选项添加填充吗？

> ID：13977267
> 
> 赞同：1
> 
> 时间：2012-12-20T17:17:36.410
> 
> 标签：html, css, cross-browser

我想在 html 选择（下拉列表和选择框）中的选项周围添加填充。我可以在 Firefox 中使用 CSS 填充来做到这一点，但它似乎是唯一适用的浏览器。代码：

```
option
{
 padding:5px;   
}​

<select>
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>
<br/>
Some other stuff:<br/>
<select multiple="multiple">
    <option>Test1</option>
    <option>Test2</option>
</select> 
```

小提琴：​</p>

[http://jsfiddle.net/4u9LV/](http://jsfiddle.net/4u9LV/)

我发现[了这个问题](https://stackoverflow.com/questions/1083652/how-can-i-add-padding-to-html-dropdownlist)，它谈到了使用添加左右填充，`&nbsp;`但我想要所有填充。有没有一种好方法可以在所有浏览器中实现我在 Firefox 中获得的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:20:01.133

AFAIk 只有 Firefox 真正支持此样式。

没有跨浏览器的纯 CSS 方法可以在 SELECT 元素或其 OPTIONS 上实现填充/边距等。

我想这样做的唯一方法是作弊并使用 DIVS 或 UL 代替，并使用 JS 使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:27:39.207

传统浏览器中的输入元素是“黑盒子”——严格来说，它们的部分不是 DOM 元素。然而，输入元素的行为及其样式在 W3C 规范中的任何地方都没有指定。

故意未指定输入样式。所以浏览器可以自由地为所欲为。因此忽略您定义的任何样式。

所以更好的选择是通过带有 div 或 list 的 JavaScript

# python - 自动实例 Python

> ID：13977271
> 
> 赞同：1
> 
> 时间：2012-12-20T17:17:52.180
> 
> 标签：python, import, automation, package

假设您的 src 文件夹中有以下结构：

```
conf.py
./drivers
    mod1.py --> contains mod1Class
    mod2.py --> contains mod2Class 
```

我想要的是 conf.py 中的一段代码来自动实例化 mod*.py 中的类，这样如果有一天我会添加 mod3.py --> mod3Class 这将在 conf 中自动实例化。 py 不添加任何代码。

我试过了，没有成功：

```
from drivers import * 
```

但我无法导入，我收到 NameError。所以我被困在第一步。还假设我能够成功执行导入，我该怎么做：

```
mod1Class_instance = mod1.mod1Class() (in a cycle, one instance for every file in drivers) 
```

以自动方式？我不能使用字符串来创建类的实例，因此我无法获取驱动程序中文件的名称并使用字符串。执行此操作的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:25:49.210

也许，这就是你需要的：

```
from types import ModuleType

import drivers

for driver_module in dir(drivers):
    if not isinstance(driver_module, ModuleType):
        continue # not real module driver
    for cls in dir(driver_module):
        if not isinstance(cls, SomeBaseClass):
             continue # not real mod class
        # create new variable with name as lower class name
        locals()[cls.__name__.lower()] = cls() 
```

而且，您还应该`__init__.py`在`drivers`文件夹中创建文件。这意味着您的文件夹是一个 python 模块。

另一方面，我建议手动描述所有导入。这种简单的方法使您的代码更加清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:56:42.217

这会在一个目录中加载模块中的类`drivers`，该目录与当前模块在同一目录中，并且不需要制作`drivers`包：

```
from collections import defaultdict
import os
import pkgutil

def getclasses(module):
    """Get classes from a driver module."""
    # I'd recommend another way to find classes; for example, in defuz's 
    # answer, classes in driver modules would have one base class.
    try:
        yield getattr(module, module.__name__ + "Class")
    except AttributeError:
        pass

instances = defaultdict(list)
drivers_dir = os.path.join(os.path.dirname(__file__), 'drivers')
for module_loader, name, ispkg in pkgutil.iter_modules([drivers_dir]):
    module = module_loader.find_module(name).load_module(name)
    for cls in getclasses(module):
        # You might want to use the name of the module as a key instead of the  
        # module object, or, perhaps, to append all instances to a same list.
        instances[module].append(cls())

# I'd recommend not putting instances in the module namespace, 
# and just leaving them in that dictionary.
for mod_instances in instances.values():
    for instance in mod_instances:
        locals()[type(instance).__name__ + "_instance"] = instance 
```

# c# - SSIS 脚本任务将数据从 AD 提取到数据库中

> ID：13977273
> 
> 赞同：2
> 
> 时间：2012-12-20T17:18:07.893
> 
> 标签：c#, ssis, active-directory

需求：将大量数据（一个OU内的所有用户）从活动目录拉到数据库表中。

方法：我的任务是使用 SSIS 来执行此操作，因为作为标准 ETL 任务的同一通宵任务的一部分，还有其他项目要完成，所以这只是流程中的另一个步骤。

代码：

```
/*
Microsoft SQL Server Integration Services Script Task
Write scripts using Microsoft Visual C# 2008.
The ScriptMain is the entry point class of the script.
*/

using System;
using System.Data;
using System.Data.SqlClient;
using System.DirectoryServices;
using Microsoft.SqlServer.Dts.Runtime;
using System.Windows.Forms;

namespace ST_dc256a9b209442c7bc089d333507abeb.csproj
{
    [System.AddIn.AddIn("ScriptMain", Version = "1.0", Publisher = "", Description = "")]
    public partial class ScriptMain : Microsoft.SqlServer.Dts.Tasks.ScriptTask.VSTARTScriptObjectModelBase
    {

        #region VSTA generated code
        enum ScriptResults
        {
            Success = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Success,
            Failure = Microsoft.SqlServer.Dts.Runtime.DTSExecResult.Failure
        };
        #endregion

        /*
        The execution engine calls this method when the task executes.
        To access the object model, use the Dts property. Connections, variables, events,
        and logging features are available as members of the Dts property as shown in the following examples.

        To reference a variable, call Dts.Variables["MyCaseSensitiveVariableName"].Value;
        To post a log entry, call Dts.Log("This is my log text", 999, null);
        To fire an event, call Dts.Events.FireInformation(99, "test", "hit the help message", "", 0, true);

        To use the connections collection use something like the following:
        ConnectionManager cm = Dts.Connections.Add("OLEDB");
        cm.ConnectionString = "Data Source=localhost;Initial Catalog=AdventureWorks;Provider=SQLNCLI10;Integrated Security=SSPI;Auto Translate=False;";

        Before returning from this method, set the value of Dts.TaskResult to indicate success or failure.

        To open Help, press F1.
    */

        public void Main()
        {
        //Set up the AD connection;
        using (DirectorySearcher ds = new DirectorySearcher())
            {
            //Edit the filter for your purposes;
            ds.Filter = "(&(objectClass=user)(|(sAMAccountName=A*)(sAMAccountName=D0*)))";
            ds.SearchScope = SearchScope.Subtree;
            ds.PageSize = 1000;
            //This will page through the records 1000 at a time;

            //Set up SQL Connection
            string sSqlConn = Dts.Variables["SqlConn"].Value.ToString();
            SqlConnection sqlConnection1 = new SqlConnection(sSqlConn);
            SqlCommand cmd = new SqlCommand();
            SqlDataReader reader;
            cmd.CommandType = CommandType.Text;
            cmd.Connection = sqlConnection1;

            //Read all records in AD that meet the search criteria into a Collection
            using (SearchResultCollection src = ds.FindAll())
                {
                //For each record object in the Collection, insert a record into the SQL table
                foreach (SearchResult results in src)
                    {
                    string sAMAccountName = results.Properties["sAMAccountName"][0].ToString();
                    //string objectCategory = results.Properties["objectCategory"][0].ToString();
                    string objectSid = results.Properties["objectSid"][0].ToString();
                    string givenName = results.Properties["givenName"][0].ToString();
                    string lastName = results.Properties["sn"][0].ToString();
                    string employeeID = results.Properties["employeeID"][0].ToString();
                    string email = results.Properties["mail"][0].ToString();

                    //Replace any single quotes in the string with two single quotes for sql INSERT statement
                    objectSid = objectSid.Replace("'", "''");
                    givenName = givenName.Replace("'", "''");
                    lastName = lastName.Replace("'", "''");
                    employeeID = employeeID.Replace("'", "''");
                    email = email.Replace("'", "''");

                    sqlConnection1.Open();
                    cmd.CommandText = "INSERT INTO ADImport (userName, objectSid, firstName, lastName, employeeNo, email) VALUES ('" + sAMAccountName + "','" + objectSid + "','" + givenName + "','" + lastName + "','" + employeeID + "','" + email + "')";
                    reader = cmd.ExecuteReader();

                    string propertyName = "Description"; //or whichever multi-value field you are importing
                    ResultPropertyValueCollection valueCollection = results.Properties[propertyName];

                    //Iterate thru the collection for the user and insert each value from the multi-value field into a table
                    foreach (String sMultiValueField in valueCollection)
                        {
                        string sValue = sMultiValueField.Replace("'","''"); //Replace any single quotes with double quotes
                        //sqlConnection1.Open();
                        cmd.CommandText = "INSERT INTO ADImport_Description (userName, objectSid, objectDescription) VALUES ('" + sAMAccountName + "','" + objectSid + "','" + sValue + "')";
                        reader = cmd.ExecuteReader();
                        //sqlConnection1.Close();
                        }
                    sqlConnection1.Close();
                    } 
                } 
            } 
            Dts.TaskResult = (int)ScriptResults.Success;
        }
    }
} 
```

我希望你们中的很多人会认识到这与来自数据女王的这篇文章中的代码基本相同：http: [//dataqueen.unlimitedviz.com/2012/09/get-around-active-directory-paging-on- ssis-import/](http://dataqueen.unlimitedviz.com/2012/09/get-around-active-directory-paging-on-ssis-import/)我已经针对我的目的进行了调整，因为我自己编写的代码遇到了很多问题。

目前，这一切都在一个脚本任务中。是的，我已经添加了相关参考资料，所以它们就在那里。

问题：当我在 SSIS 中运行脚本任务时（单独运行以避免包的其他部分干扰），我得到：

```
Error: System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentOutOfRangeException: Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
at System.Collections.ArrayList.get_Item(Int32 index)
at System.DirectoryServices.ResultPropertyValueCollection.get_Item(Int32 index)
at ST_dc256a9b209442c7bc089d333507abeb.csproj.ScriptMain.Main() 
```

拜托，任何人，任何想法？？？？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:32:11.150

所有功劳归功于@billinkc（billinkc - 如果您添加答案，我会接受它而不是这个答案，但我不喜欢留下未回答的问题，所以现在添加您的答案，因为您在上周没有添加答案）

> “我的猜测是失败的行是 string employeeID = results.Properties["employeeID"][0].ToString(); 因为您可能会得到诸如服务帐户之类的东西，它没有定义employeeID。将您的代码复制到正确的 .NET 项目（我喜欢控制台）并使用调试器逐步查找行号。- billinkc"

# javascript - codemirror-textarea 可像标准 textarea 一样调整大小

> ID：13977276
> 
> 赞同：31
> 
> 时间：2012-12-20T17:18:19.467
> 
> 标签：javascript, codemirror

有人知道如何使 codemirror textarea 像 text-area 一样可调整大小吗？

这样codemirror textarea 可以通过拖动其底部的抓取角来调整大小。

我知道 html div 是可能的（请参阅[div resizable like text-area](https://stackoverflow.com/questions/11163981/div-resizable-like-text-area)），但我没有设法在代码镜像上实现相同的目标。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2018-03-22T16:45:25.343

**没有 JQUERY**，只有 CSS

```
.CodeMirror {
      resize: vertical;
      overflow: auto !important;
    } 
```

经过一番努力，这个简单的代码实际上对我有用。我垂直获得了一个可调整大小的 Codemirror 实例，并且滚动正常。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-20T20:00:44.347

一些谷歌搜索表明它[在 CodeMirror 中不受支持，](https://github.com/marijnh/CodeMirror/issues/850)但您可以使用[jQuery UI](http://jqueryui.com/resizable/)[实现它](http://nathansuniversity.com/vanilla/discussion/comment/1296#Comment_1296)：

```
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
  lineNumbers: true,
});
$('.CodeMirror').resizable({
  resize: function() {
    editor.setSize($(this).width(), $(this).height());
  }
}); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-04-12T07:06:55.583

我做了[这个小例子](https://anon.to/KoLZZ2)。

请注意，这仅垂直调整大小，这可能是您真正想要的？普通 textarea 的水平调整大小能力往往会破坏布局 - 通常更容易提出一个布局，其中编辑器具有固定宽度，如果调整大小，则其下方的内容会被下推。

我还没有看到你打算让它适合的设计，所以我猜。

如果这是您想要的，那么修改它并获得一个可以双向工作的调整大小小部件应该不会太难。

或者，考虑使用源自此示例的 @Sphinxxx尝试[此插件。](https://github.com/Sphinxxxx/cm-resize)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-13T03:28:36.437

如果 jQuery 不是一个选项，并且您无需在 IE 中调整大小（和 Edge，直到它赶上 CSS `resize:`...）就可以生活，这里有一个*概念验证* ***示例***，它是一种不需要的简单且轻巧的技术由@mindplay.dk 开创的拖放黑客。

相反，这里：

1.  使用*容器 DIV*，与
2.  一个*普通的 CSS 调整大小句柄*，和
3.  调整*大小事件*`ResizeObserver`通过/代理到 CM `MutationObserver`（因为`onResize`只为 触发`window`，只是为了让 Web 编程更加悲惨；））。

要解决的一个问题（在 CM 中？在 WebKit 中？或者作为一种解决方法，我没有耐心 + 时间来提炼......）是为*“WebKit 上的 CM”*场景添加了额外的底部填充，其中 CSS 调整大小把手会被CM自己的锅碗瓢盆重叠。OTOH，Firefox 将它绘制在所有其他之上，因此尽管 CM 不知道句柄并在那里绘制了各种（几个！）矩形，Firefox 仍然设法赢得了拯救它，并且调整大小会起作用，尽管句柄会被粘贴过去滚动条箭头。*（玩弄`z-index`CM 的废话或为其设计造型对我没有帮助。）*

**顺便说一句，注意：**这意味着`overflow: hidden; resize: both;`直接应用在主`.CodeMirror`DIV上的纯 CSS*几乎*可以在 Firefox 中运行，没有任何魔法（没有额外的框架，没有几何调整等）。`cm.setSize(cm_div.clientWidth, cm_div.clientHeight)`但是，仍然需要为 a 挂钩调整大小事件（与上面提到的相同） 。

但是检测 Firefox 和 Chrome 以对其进行优化可能会使代码复杂*得多*，而不仅仅是让两者保持相同......

```
document.addEventListener("DOMContentLoaded", function(event) {

  fr = document.querySelector("#cm-resize-frame")

  // This 5-6 lines below is only for the WRAP/NOWRAP demo switch:
  cm = null
  reset = document.getElementById("wrap").onclick = function() {
    cm && cm.toTextArea() // clean up previous CM instance
    cm = CodeMirror.fromTextArea(document.getElementById("cm"),
        {lineWrapping: document.getElementById("wrap").checked,
         lineNumbers: true } // just to see if CM is actually alive & resizing
    )

    function cm_resize() {
        cm.setSize(fr.clientWidth + 2,   // chrome needs +2, others don't mind...
                   fr.clientHeight - 10) // and CM needs room for the resize handle :-/
    }

    // Needed (on FF, Edge & IE11, but not Chrome) for the scrollbars to properly initialize:
    cm_resize()

    // This is the actual "business logic" of the whole thing! ;)
    if (window.ResizeObserver) // Chrome 64+
        new ResizeObserver(cm_resize).observe(fr)
    else if (window.MutationObserver) // others
        new MutationObserver(cm_resize).observe(fr, {attributes: true})
  }
  reset()
})
```

```
#cm-resize-frame {
  overflow: hidden; /* CM will manage its own scrollbars. */
  resize: both;

  height: 10em; /* A fixed initial height is required in Chrome both for the resize handle to appear and to not fall into a shrinking loop due to the neg. offset in cm_resize()! */

  /* Optional... */
  border: 1px solid lightgrey;
  width: 20em;
}
```

```
<link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.29.0/codemirror.min.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.29.0/codemirror.min.js"></script>

<div id="cm-resize-frame">
<textarea id="cm">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
Nunc rhoncus ornare diam eget consequat. Suspendisse potenti.
Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. 

Sed scelerisque, ex nec pharetra ultrices, ipsum mi aliquam arcu, sit amet pulvinar erat mauris sit amet mi.
Fusce pulvinar vel ex semper imperdiet. Quisque dapibus purus eu commodo volutpat.

Suspendisse potenti. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. 

Sed scelerisque, ex nec pharetra ultrices, ipsum mi aliquam arcu, sit amet pulvinar erat mauris sit amet mi.
Fusce pulvinar vel ex semper imperdiet. Quisque dapibus purus eu commodo volutpat.</textarea>
</div>

WRAP: <input id="wrap" type="checkbox" checked>
```

* * *

*（再次重申：这只是一个示例，证明了该技术是有效的。JS 片段旨在被视为伪代码。；）如果保留了该方法的简单性，一个真实的、经过优化的实现是非常受欢迎的！ )*

*（另见[CodePen](https://codepen.io/sakifargo/pen/KodNyR) ...）*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-18T11:56:38.533

```
.CodeMirror__wrapper {
    resize: both;
    overflow: auto !important;
} 
```

尝试添加`resize`，`.CodeMirror`但没有奏效。不过，将调整大小添加到包装器对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-10T12:58:43.973

```
let CodeMirrorCustomResize = (params) => {
    var start_x, start_y, start_h,
        minHeight = params && params.minHeight ? params.minHeight : 150,
        resizableObj = params && params.resizableObj ? params.resizableObj : '.handle'

    let onDrag = (e) => {
        sqlEditor.setSize(null, `${Math.max(minHeight, (start_h + e.pageY - start_y))}px`);
    }

    let onRelease = (e) => {
        $('body').off("mousemove", onDrag);
        $(window).off("mouseup", onRelease);
    }

    $('body').on("mousedown", resizableObj, (e) => {
        start_x = e.pageX;
        start_y = e.pageY;
        start_h = $('.CodeMirror').height();

        $('body').on("mousemove", onDrag);
        $(window).on("mouseup", onRelease);
    });
} 
```

如果有人对@mindplay.dk 答案的更短和更多的jQuery 版本感兴趣（顺便说一句。谢谢你）。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-12-20T19:27:11.003

你试过什么？

[我刚刚从http://codemirror.net/](http://codemirror.net/)下载了 CodeMirror 的开发快照

从演示目录运行 complete.html 有一个很好的可调整大小的文本区域（在我的 Chrome 浏览器中）。事实上，至少其他一些演示也有可调整大小的文本区域。

如果这不能回答您的问题，请使用有关您尝试过的方法和无效的方法的更具体信息进行更新。

# java - 验证不适用于 Play Framework 2 中的嵌套对象

> ID：13977281
> 
> 赞同：6
> 
> 时间：2012-12-20T17:18:34.363
> 
> 标签：java, validation, playframework, annotations, playframework-2.0

我正在使用约束注释在 Play 中验证我的对象！框架 2\. 它适用于顶级对象，但不适用于嵌套对象。如何让我的嵌套对象验证注释工作？

事件：我正在保存的顶级对象。

```
@Entity
public class Event {

    @Required
    public String name;

    @OneToMany(cascade = CascadeType.ALL)
    public List<Option> options;

    ...
} 
```

选项：嵌套对象。它没有验证名称属性。

```
@Entity
public class Option {

    @Required
    public String name;

    ...
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-22T21:32:22.233

不熟悉 Play，但它看起来非常接近 javax.validation，您需要在其中输入`@Valid`字段`options`来告诉验证器进入该关系。Play 有自己的[@Valid](http://www.playframework.org/documentation/api/1.2/play/data/validation/Valid.html)，所以我会试一试。

**更新：**正如 OP 所指出的，上面是 Play 1.0。相反，根据[Play 2.0 文档](http://www.playframework.org/documentation/2.0/JavaForms)，它在底层使用 Spring 数据绑定和 JSR-303，那么如何使用[javax.validation @Valid](http://docs.oracle.com/javaee/6/api/javax/validation/Valid.html)注释呢？也许 Play 1.0 有一个自制的验证框架，他们决定在 2.0 中迁移到 javax.validation？这可以解释为什么几个验证注释似乎在 2.0 API 中消失了。

# python - 将类对象附加到列表

> ID：13977282
> 
> 赞同：1
> 
> 时间：2012-12-20T17:18:39.180
> 
> 标签：python, oop

我有一些代码可以对类进行一些操作。细节不是很重要。headerDict 是一个字典，其中包含来自 NodeCluster 类的对象列表。Node1 和 Node2 是 NodeCluster 类中的对象。.header 是 NodeCluster 类的一个属性。我想要做的是遍历 headerDict 的 node2 条目中的类对象，更改它们的标题属性，并且 - 这是问题部分 - 将每个类对象附加到 node1 的 headerDict 中的列表中。这是一个代码片段：

```
if len(headerDict[node1.header]) >= len(headerDict[node2.header]):
        for node in headerDict[node2.header]:
            node.k = node.k - 1
            node.header = node1.header
            headerDict[node1].append(node) 
```

但是，当我尝试执行附加操作时，出现此错误：

```
KeyError: <__main__.NodeCluster instance at 0x10047b050> 
```

是什么赋予了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:21:44.220

我怀疑以下将解决它：

```
 headerDict[node1.header].append(node)
                        ^^^^^^^ 
```

因为你在其他任何地方都`.header`用来索引`headerDict`.

# regex - 如何在 jmeter 中编写正则表达式以从 url 中提取字符串值

> ID：13977284
> 
> 赞同：1
> 
> 时间：2012-12-20T17:18:43.490
> 
> 标签：regex, jmeter

我正在使用 Jmeter。
我必须解析 URL 并从 URL 中提取以下粗体文本。
谁能帮我写下面的正则表达式？
最后，我想提取下面的粗体文本，并希望在下一个请求中使用该文本。

`https://c.na14.content.force.com/secur/contentDoor?startURL=%2Fhome%2Fhome.jsp&sid=**00Dd0000000eKuN%21AREAQGZHTwz3BeGCrY4kx8o1uD26J9APW91RbyzaKd2LX5j42g_r59LEFp1RptxRzmRTAA1RDCvK.mqefotkhxU6T9n53sIQ**&skipRedirect=1&lm=.hmCC3PYB2DNtzRUeuP4dA%3D%3D`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-27T14:28:53.887

您可以使用以下正则表达式来提取您的 sid 值示例正则表达式：`sid=(.+)&skipRedirect`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:29:09.957

下面的正则表达式应该提取您正在寻找的部分：

```
\?.*sid=([^&]*) 
```

除非有一些我没有想到的边缘场景。

# css - 如何在信息窗口内将 Google StreetView 显示与文本垂直对齐？

> ID：13977286
> 
> 赞同：1
> 
> 时间：2012-12-20T17:18:52.690
> 
> 标签：css, google-maps-api-3, vertical-alignment, google-street-view

由于 CSS 的`vertical-align: middle`怪异，这是不必要的困难。我了解（尽管违反直觉）如果您想在图像旁边垂直居中文本，则必须对图像而***不是***文本执行此操作...

似乎这种方法仅在文本位于`span`容器中时才有效，图像由`img`标签定义，它们都在`div`容器中。

话虽如此，我在 Google 地图中有一个信息窗口，其中包含位于 Google StreetView 显示（*图像？* ）左侧的地址（文本）。但是，`img`街景对象不是标签，而是在`span`容器中。

以下是相关代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>address and street-view inside an infowindow</title>

        <style type = "text/css">
            *
            {
                margin: 0px;
                padding: 0px;
            }
            html, body
            {
                height: 100%;
            }

            #map_canvas
            {
                min-height: 100%;
            }

            /* inside infowindow */
            #userAddress
            {
                float: left;
            }
            #street_canvas
            {
                float: right;

                width: 100px;
                height: 100px;

                vertical-align: middle;
            }
        </style>
    </head>
    <body>

        <!-- map here -->
        <div id = "map_canvas"></div>

        <!-- Google Maps API -->
        <script type = "text/javascript" src = "http://maps.googleapis.com/maps/api/js?&amp;sensor=true&amp;v=3.9"></script>

        <script type = "text/javascript">

            var map;
            initialize();

            function initialize()
            {
                var mapOptions =
                {
                    center: new google.maps.LatLng(37.09024, -95.712891), // coordinates for center of the United States
                    zoom: 4, // smaller number --> zoom out
                    mapTypeId: google.maps.MapTypeId.TERRAIN // ROADMAP, SATELLITE, TERRAIN, or HYBRID
                };

                map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

            } // end of initialize

            var coordinates = new google.maps.LatLng(37.414341, -122.07692159999999);
            var address = "1401 North Shoreline Boulevard Mountain View, CA 94043";
            setMarker(coordinates, address);

            function setMarker(userCoordinates, userAddress)
            {
                var panorama = null;

                // user address map marker created here
                var marker = new google.maps.Marker(
                {
                    map: map, // from the global variable
                    position: userCoordinates
                });

                // infowindow created here
                var windowInfo = "<div>" + 
                                    "<span id = 'userAddress'>" + userAddress + "</span>" +
                                        "<span id = 'street_canvas'></span>" +
                                "</div>";

                var infoWindow = new google.maps.InfoWindow(
                {
                    content: windowInfo
                });

                    function setStreetView(infoWindow, userCoordinates)
                    {
                        google.maps.event.addListener(infoWindow, "domready", function()
                        {
                            if(panorama !== null)
                            {
                                panorama.unbind("position");
                                panorama.setVisible(false);
                            }

                            // options for streetview inside map marker
                            var panoramaOptions =
                            {
                                position: userCoordinates,
                                pov:
                                {
                                    heading: 45, // northwest in degrees
                                    zoom: 1,
                                    pitch: 1 // 0 degrees is level
                                },

                                // removing all map controls
                                addressControl: false,
                                clickToGo: false,
                                enableCloseButton: false,
                                imageDateControl: false,
                                linksControl: false,
                                panControl: false,
                                scrollwheel: false,
                                zoomControl: false,

                                disableDoubleClickZoom: true
                            };

                            // initializing streetview and settings to global variable
                            panorama = new google.maps.StreetViewPanorama(document.getElementById("street_canvas"), panoramaOptions);
                            panorama.bindTo("position", marker);
                            panorama.setVisible(true);

                        });
                    } // end of setStreetView

                setStreetView(infoWindow, userCoordinates);

                // event listener for infowindow of map marker, onclick
                google.maps.event.addListener(marker, "click", function()
                {
                    infoWindow.open(map, this);
                    map.panTo(this.position);
                });

                // event listener for closing infowindow of map marker
                google.maps.event.addListener(infoWindow, "closeclick", function()
                {
                    // disable streetview, with the global variable
                    panorama.unbind("position");
                    panorama.setVisible(false);
                    panorama = null;
                });
            } // end of setMarker
        </script>
    </body>
</html> 
```

*有关在 infowindow 中放置街景显示的参考，请参阅[此](http://blog.mridey.com/2010/11/how-to-embed-streetview-in-infowindow.html)*内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T19:46:05.167

所以，这比我想象的要容易得多——`line-height`必须在 CSS 中为文本设置一个属性，等于 streetview div 指定的高度。就是这样，文本然后“垂直居中”：

```
/* inside the infowindow */
#userAddress
{
    float: left;

    line-height: 100px;
}
#street_canvas
{
    float: right;

    width: 100px;
    height: 100px;
} 
```

`vertical-align: middle`在这种情况下 没有必要。

# parsing - 在一个程序中以不同方式翻译一个术语

> ID：13977290
> 
> 赞同：2
> 
> 时间：2012-12-20T17:19:07.170
> 
> 标签：parsing, ocaml, frontend, lexer

我尝试为一种程序制作前端......有两个特点：

1）当我们遇到以 开头的字符串时`=`，我想将字符串的其余部分读取为 a`formula`而不是字符串值。例如，`"123"`, `"TRUE"`,`"TRUE+123"`被认为具有`string`作为类型，而`"=123"`, `"=TRUE"`,`"=TRUE+123"`被认为具有`Syntax.formula`作为类型。顺便一提，

```
(* in syntax.ml *)
and expression =
  | E_formula of formula
  | E_string of string
  ...

and formula =
  | F_int of int  
  | F_bool of bool
  | F_Plus of formula * formula
  | F_RC of rc

and rc =
  | RC of int * int 
```

2）在公式内部，某些字符串的解释与外部不同。例如，在一个实际上是一个变量的命令`R4C5 := 4`中`R4C5`，被认为是一个`identifier`，而在`"=123+R4C5"`其中试图被翻译成一个公式时，`R4C5`被翻译为`RC (4,5): rc`。

所以我不知道如何用 1 或 2 个词法分析器和 1 或 2 个解析器来实现这一点。

目前，我尝试在 1 个词法分析器和 1 个解析器中实现所有功能。这是代码的一部分，它不起作用，它仍然认为`R4C5`是`identifier`，而不是`rc`：

```
(* in lexer.mll *)
let begin_formula =  double_quote "=" 
let end_formula = double_quote
let STRING = double_quote ([^ "=" ])* double_quote

rule token = parse
  ...
  | begin_formula { BEGIN_FORMULA }
  | 'R'      { R }
  | 'C'      { C }
  | end_formula { END_FORMULA }
  | lex_identifier as li
      { try Hashtbl.find keyword_table (lowercase li)  
        with Not_found -> IDENTIFIER li }
  | STRING as s { STRING s }
  ...

(* in parser.mly *)
expression:
| BEGIN_FORMULA f = formula END_FORMULA { E_formula f }
| s = STRING { E_string s }
...

formula:
| i = INTEGER { F_int i }
| b = BOOL { F_bool b }
| f0 = formula PLUS f1 = formula { F_Plus (f0, f1) }  
| rc { F_RC $1 }

rc:
| R i0 = INTEGER C i1 = INTEGER { RC (i0, i1) } 
```

有人可以帮忙吗？

**新想法：**我正在考虑坚持使用 1 个词法分析器 + 1 个解析器，并在词法分析器中为公式创建一个*入口*点，就像我们通常所做的那样`comment`......这里有一些更新`lexer.mll`和`parser.mly`：

```
(* in lexer.mll *)
rule token = parse
...
| begin_formula { formula lexbuf }
...
| INTEGER as i { INTEGER (int_of_string i)  }
| '+'      { PLUS }
...

and formula = parse
| end_formula { token lexbuf }
| INTEGER as i { INTEGER_F (int_of_string i)  }
| 'R'      { R }
| 'C'      { C }
| '+'      { PLUS_F }
| _        { raise (Lexing_error ("unknown in formula")) }

(* in parser.mly *)
expression:
| formula { E_formula f }
...

formula:
| i = INTEGER_F { F_int i }
| f0 = formula PLUS_F f1 = formula { F_Plus (f0, f1) }  
... 
```

我做了一些测试，例如解析`"=R4"`，问题是它可以很好地解析`R`，但它认为`4`而`INTEGER`不是`INTEGER_F`，似乎`formula lexbuf`需要在入口点的主体中不时添加`formula`（虽然我不明白为什么在`token`入口点的正文中进行解析而不总是提及`token lexbuf`）。我尝试了几种可能性：`| 'R' { R; formula lexbuf }`, `| 'R' { formula lexbuf; R }`等，但它没有用...... 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:40:43.287

我认为最简单的选择是拥有两个不同的词法分析器和两个不同的解析器；从全局解析器内部调用 lexer&parser 来获取公式。事后您可以看到两种语法之间共享了多少，并在可能的情况下分解事物。

# c# - 如何从纯文本解析 C# 中的存储过程签名

> ID：13977293
> 
> 赞同：6
> 
> 时间：2012-12-20T17:19:11.683
> 
> 标签：c#, sql, regex, parsing, stored-procedures

我有一个`.sql`包含存储过程定义的文件。

我需要用 C# 编写一个小程序来读取文件并获取包含存储过程签名的列表。

例如，此列表应如下所示：

```
[dbo].[procedureOne] ( int, int, varchar(250) out, nvarchar) 
[dbo].[procedureTwo] ( int, varchar(255) )
[dbo].[procedureThree] (  ) 
[dbo].[amazingSP] ( datetime, datetime ) 
```

有没有办法使用正则表达式来做到这一点？

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:31:57.540

也许你可以用正则表达式来做，但我认为在这种情况下编写解析器实际上会更容易。

如果你愿意，你可以试试[Irony](http://irony.codeplex.com/)，它使用起来非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:44:54.690

最后，我用 C# 手工实现了一个签名解析器。我花了几天的时间来完善它，因为总是有一些情况会破坏解析器导致意想不到的结果。无论如何，编码它很有趣。如果有人需要，我会在完成后上传代码。

# c# - 无法将 DateTime 系列与 Dundas 图绑定

> ID：13977294
> 
> 赞同：0
> 
> 时间：2012-12-20T17:19:18.730
> 
> 标签：c#, charts, dundas

我很难在 Dundas 图表上绘制系列数据。它似乎无法正确绑定这些`DateTime`值。

这是最小图表生成代码：

```
public static void GenerateMultiSeriesChartImage<T,U>(List<ChartData<T,U>> chartData, string chartTitle,
    string xAxisTitle, string yAxisTitle, string xAxisValue, string yAxisValue, string chartFileName)
{
    Dundas.Charting.WebControl.Chart chart = new Dundas.Charting.WebControl.Chart();
    // Setting some chart properties

    Dundas.Charting.WebControl.Legend legend = new Dundas.Charting.WebControl.Legend();

    // I'm setting the legend properties            
    chart.Legends.Add(legend);

    // Setting the border skin
    Dundas.Charting.WebControl.Title title = new Dundas.Charting.WebControl.Title();
    title.Font = new System.Drawing.Font("Microsoft Sans Serif", 9.75F, System.Drawing.FontStyle.Bold);

    // Set custom chart title
    title.Text = chartTitle;
    chart.Titles.Add(title);

    int cnt = 1;
    foreach (ChartData<T,U> dataRecord in chartData)
    {
        Dundas.Charting.WebControl.Series series = new Dundas.Charting.WebControl.Series();

        series.Name = dataRecord.SeriesName;
        series.BorderColor = System.Drawing.ColorTranslator.FromHtml("#646464");
        series.BorderWidth = 2;
        series.Type = Dundas.Charting.WebControl.SeriesChartType.Line;
        series.MarkerBorderColor = System.Drawing.ColorTranslator.FromHtml("#646464");
        series.ShadowOffset = 1;

        // Set X & Y axis ValueMembers
        series.ValueMembersY = yAxisValue;
        series.ValueMemberX = xAxisValue;

        series.XValueType = dataRecord.XValueType;
        series.YValueType = dataRecord.YValueType;

        series.Points.DataBindXY(dataRecord.XAxisValues, xAxisTitle, dataRecord.YAxisValues, yAxisTitle);
        chart.Series.Add(series);
        cnt++;
    }

    Dundas.Charting.WebControl.ChartArea chartArea = new Dundas.Charting.WebControl.ChartArea();
    chartArea.BackColor = System.Drawing.Color.Lavender;
    chartArea.Name = "Default";
    chartArea.ShadowOffset = 2;
    chartArea.AxisY.Title = yAxisTitle;
    chartArea.AxisY.MajorGrid.LineColor = System.Drawing.Color.LightSteelBlue;
    chartArea.AxisY.MajorGrid.LineStyle = Dundas.Charting.WebControl.ChartDashStyle.Dash;
    chartArea.AxisX.Title = xAxisTitle;
    chartArea.AxisX.MajorGrid.LineColor = System.Drawing.Color.LightSteelBlue;
    chartArea.AxisX.MajorGrid.LineStyle = Dundas.Charting.WebControl.ChartDashStyle.Dash;
    chartArea.Area3DStyle.WallWidth = 0;
    chart.ChartAreas.Add(chartArea);

    chart.Save("C:/charts/" + chartFileName, Dundas.Charting.WebControl.ChartImageFormat.Png);
} 
```

ChartData 类只是包含我的系列和一些关于它们的元数据的帮助器：

```
public class ChartData<X,Y>
{
    public List<X> XAxisValues { get; private set; }
    public List<Y> YAxisValues { get; private set; }
    public ChartValueTypes XValueType { get; private set; }
    public ChartValueTypes YValueType { get; private set; }
    public string SeriesName { get; private set; }

    public ChartData(string seriesName, ChartValueTypes xValueType, ChartValueTypes yValueType)
    {
        XAxisValues = new List<X>();
        YAxisValues = new List<Y>();
        SeriesName = seriesName;
        XValueType = xValueType;
        YValueType = yValueType;
    }

    public ChartData(string seriesName, X[] xAxisValues, Y[] yAxisValues, ChartValueTypes xValueType, ChartValueTypes yValueType)
    {
        XAxisValues = new List<X>(xAxisValues);
        YAxisValues = new List<Y>(yAxisValues);
        SeriesName = seriesName;

        XValueType = xValueType;
        YValueType = yValueType;
    }
} 
```

您可以在此处查看 XValues 和 YValues 集合的内容：[https ://docs.google.com/spreadsheet/pub?key=0AtV11BVzMrGYdDdrdjY1WC1wc09aV0E3cmo3VkpJSEE&output=html](https://docs.google.com/spreadsheet/pub?key=0AtV11BVzMrGYdDdrdjY1WC1wc09aV0E3cmo3VkpJSEE&output=html)

我得到以下图表（**注意日期完全错误**）：

![10行](../Images/0e045f1a095eedb53f99e159a62909dc.png)

`XValueType`是`DateTime`和`YValueType`是`Int`：_

```
series.XValueType = dataRecord.XValueType; // DateTime
series.YValueType = dataRecord.YValueType; // Int 
```

当我尝试绘制 60 个值时，情况变得更糟：

![在此处输入图像描述](../Images/af235a265b59be0f6ba2c23cd0185174.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:29:42.033

刚刚发现问题所在：`xAxisValue`应该是“日期”，而我把它作为“日”。

# php - PHP 和 CSV 文件 - 如何检测行尾？

> ID：13977298
> 
> 赞同：6
> 
> 时间：2012-12-20T17:19:30.650
> 
> 标签：php, file, csv, newline

> **可能重复：**
> [如何从 php 中的 csv 文件中提取数据](https://stackoverflow.com/questions/2805427/how-to-extract-data-from-csv-file-in-php)

我在 XLS 中有一些数据，我将它们保存为 CSV，分隔符是 **逗号*。然后我试图从这个 CSV 文件加载数据：

```
$input = explode("\r\n", fread($file, filesize("my_data.csv")));
print_r($input); 
```

输出：

```
Array ( [0] => data from the CSV file) 
```

这就是问题所在 - 数组中始终只有一项，其中打印出 CSV 文件中的所有数据。这怎么可能？为什么数组中的项目不如 CSV 文件中的行多？

另外，我尝试更改`"\r\n"`“\n”，但它是一样的。

我正在尝试做的 - 从 CSV 文件中加载每一行，然后每一行进行处理。

**文件示例：**

```
a,b,c,d
e,f,g,h 
```

**输出：**

`a,b,c,d e,f,g,h`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:21:42.427

我建议使用 php 内置的 csv 文件读取功能`fgetcsv()`，而不是自己创建：http: [//php.net/manual/en/function.fgetcsv.php](http://php.net/manual/en/function.fgetcsv.php)

```
 if (($handle = fopen($file, "r")) !== FALSE) {
     while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $row = implode (",",$data); //puts back together the row from the csv
        echo $row. "\n"; //assuming you want a visual linebreak on console, add the \n
     }
    fclose($handle);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:59:53.790

我是如何解决这个问题的：

在 XLS 文件中，在将文件导出为 CSV 之前，我在工作表的末尾添加了一个带有 char 的列`'`。

# git - 将提交移动到另一个分支，并快速转发原始分支

> ID：13977302
> 
> 赞同：1
> 
> 时间：2012-12-20T17:19:44.223
> 
> 标签：git, version-control, branch

我所拥有的（假设左边是master，右边是一个特性分支）：

```
 | * part of feature 2 (HEAD)
   | |
 B * |
   | * bug fix (unrelated to feature)
   | |
   | * part of feature 1
   |/
 A *
   | 
```

所以这里明显的问题是，一个错误修复（与功能无关）被提交到一个功能分支中。假设这个 bug 修复很关键，需要在特性分支重新合并之前应用到 master，但特性分支也应该从中受益。

所以我相信我想从功能分支中挑选提交，将其应用到 master（在正确的位置），然后将功能分支的起点更改为该提交之后。

我*想*我想要的，在 git 拓扑中：

```
 | * part of feature 2 (HEAD)
        B * |
          | * part of feature 1
          |/
 bug fix  *
          |
        A *
          | 
```

我如何在命令行上使用 git 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:24:56.997

我会 ：

*   主分支中的樱桃挑选错误修复
*   在主分支中执行 rebase -i 以将错误修复提交放置在您想要的位置（在 A 和 B 之间）
*   将功能分支重新定位到错误修复提交（“onto”很重要，并且必须在参数中，因为您只希望 A 的提交基于错误修复）

每个命令都是标准的 git，所以稍微研究一下你应该会很好

# r - 组合和操作两次嵌套在列表中的矩阵

> ID：13977303
> 
> 赞同：4
> 
> 时间：2012-12-20T17:19:50.273
> 
> 标签：r, data-structures, nested-lists

if`xmpl`是一个列表，其中每个元素都有一个整数`age`和一个列表`data`，其中`data`包含三个大小相等的矩阵`a`，`c`

最好的方法是什么

```
cor( xmpl[[:]]$data[[:]][c('a','b','c')],  xmpl[[:]]$age) 
```

其中结果将是`3 x length(a)`数组或列表，反映 `age`与`a`(row 1)、`b`(row 2) 和`c`(row 3) 的每个元素的每个实例相关`xmpl`。

* * *

我正在阅读代表不同管道输出的矩阵。每个主题有 3 个这样的主题和很多主题。目前，我已经建立了一个主题列表，其中包含一个管道矩阵列表。

结构如下：

```
 str(exmpl)
 $ :List of 4
  ..$ id       : int 5
  ..$ age      : num 10
  ..$ data     :List of 3
  .. ..$ a: num [1:10, 1:10] 0.782 1.113 3.988 0.253 4.118 ...
  .. ..$ b: num [1:10, 1:10] 5.25 5.31 5.28 5.43 5.13 ...
  .. ..$ c: num [1:10, 1:10] 1.19e-05 5.64e-03 7.65e-01 1.65e-03 4.50e-01 ...
  ..$ otherdata: chr "ignorefornow"
  #[...] 
```

我想将`a`所有科目的每个元素与科目的年龄相关联。然后对 and 执行相同的操作`b`，`c`并将结果放入列表中。

我认为我正在以一种对 R 来说很尴尬的方式来处理这个问题。我对存储和检索这些数据的“R 方式”很感兴趣。

[数据结构和所需的输出 http://dl.dropbox.com/u/56019781/linked/struct-2012-12-19.svg](http://dl.dropbox.com/u/56019781/linked/struct-2012-12-19.svg)

```
library(plyr)

## example structure
xmpl.mat  <- function(){ matrix(runif(100),nrow=10) }
xmpl.list <- function(x){ list(  id=x, age=2*x, data=list(  a=x*xmpl.mat(), b=x+xmpl.mat(), c=xmpl.mat()^x   ), otherdata='ignorefornow' ) }
xmpl      <- lapply( 1:5, xmpl.list )

## extract
ages <- laply(xmpl,'[[','age')
data <- llply(xmpl,'[[','data')

# to get the cor for one set of matrices is easy enough
# though it would be nice to do: a <- xmpl[[:]]$data$a
x.a      <- sapply(data,'[[','a')
x.a.corr <- apply(x.a,1,cor,ages)

# ...

#xmpl.corr   <- list(x.a.corr,x.b.corr,x.c.corr)

# and by loop, not R like?
xmpl.corr<-list()
for (i in 1:length(names(data[[1]])) ){
  x <- sapply(data,'[[',i)
  xmpl.corr[[i]] <- apply(x,1,cor,ages)
}
names(xmpl.corr) <- names(data[[1]]) 
```

最终输出：

```
str(xmpl.corr)
List of 3
 $ a: num [1:100] 0.712 -0.296 0.739 0.8 0.77 ...
 $ b: num [1:100] 0.98 0.997 0.974 0.983 0.992 ...
 $ c: num [1:100] -0.914 -0.399 -0.844 -0.339 -0.571 .. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T20:09:21.770

这是一个解决方案。它应该足够短。

```
ages <- sapply(xmpl, "[[", "age")                      # extract ages
data <- sapply(xmpl, function(x) unlist(x[["data"]]))  # combine all matrices
corr <- apply(data, 1, cor, ages)                      # calculate correlations
xmpl.corr <- split(corr, substr(names(corr), 1, 1))    # split the vector 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T20:33:25.863

您可能希望将所有这些都放在一个列表中，而不是 xa、xb、xc。

```
# First, get a list of the items in data
      abc  <- names(xmpl[[1]]$data)    # incase variables change in future
names(abc) <- abc   # these are the same names that will be used for the final list. You can use whichever names make sense

## use lapply to keep as list, use sapply to "simplify" the list
x.data.list <- lapply(abc, function(z)
                  sapply(xmpl, function(xm) c(xm$data[[z]])) )

ages <- sapply(xmpl, `[[`, "age")

# Then compute the correlations.  Note that on each element of x.data.list we are apply'ing per row
correlations <- lapply(x.data.list, apply, 1, cor, ages) 
```

# cordova - PhoneGap 和 jQueryMobile：HTML 和代码重用？

> ID：13977309
> 
> 赞同：1
> 
> 时间：2012-12-20T17:20:17.403
> 
> 标签：cordova, jquery-mobile

假设我有一个有 20 个或更多视图的移动应用程序（登录、地图、客户索引、客户编辑等）。

我想知道（如果我）如何重用（例如）页眉的 html 代码（所有视图都相同）？

我害怕带有大量冗余代码的巨大工作表文件..

我正在考虑诸如 php 文件之类的东西，或者 MVC 框架的视图元素。

当然，我可以考虑为特定的逻辑相关视图组创建一些文件夹，但仍然会有很多冗余代码（页眉、页脚等）。

我在 PhoneGap 应用程序中使用 jQueryMobile，所以，也许我可以插入一些 java 代码以获取一些 html 元素文件？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:32:39.960

如果你想使用 Phonegap，你不能使用任何类型的服务器端脚本语言。

您基本上可以使用 HTML、CSS 和 Javascript。

当然，您可以做某事，例如。创建一个 XML 文件并在其中保存所需的标题。使用 Javascript 获取数据。对我来说，这似乎有点奇怪，但它是一种可能的方式。

您甚至可以更花哨，对服务器进行 AJAX 调用以获取 HTML，但这在我看来更奇怪。

## 爪哇：

是的，您可以重新编写一些 Phonegap 核心。但是你不能例如实现 PHP。此外，当您使用 Phonegap 编译您的应用程序时，您需要有一个“index.html”文件。就是这样:)

尽管这些都是替代品。

希望我能有所帮助。

# php - 基于字段值的“有条件”加入？

> ID：13977315
> 
> 赞同：2
> 
> 时间：2012-12-20T17:20:42.597
> 
> 标签：php, mysql, sql, database-design, relational-database

我正在处理的网站有 3 种不同类型的用户：管理员、申请人、审阅者。这些组中的每一个都将具有一些需要存储的基本信息（姓名、ID、电子邮件等）以及每个组独有的一些数据。我已经`users`为每个特定组创建了一个表以及一个表来存储它们的唯一数据。

*   用户：id、f_name、l_name、email、user_type
*   users_admin: id, user_id, office, emp_id
*   users_applicant: id, user_id, dob, 地址
*   users_reviewer：id、user_id、active_status、地址、电话

如果用户`user_type`为“1”（申请人）登录，我将需要到`JOIN`表`users_applicants`中检索他们的完整记录。我尝试使用 a`UNION`但我的表有很大不同的列。

有没有办法根据用户的类型编写一个条件查询`JOIN`来访问正确的表？我会以完全错误的方式解决这个问题吗？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:45:26.537

好吧，最后你的桌子已经有缺陷了。为什么每种类型都有一张桌子？为什么不将所有这些字段放入`users`表中，或者可能是一个`user_details`表（如果您真的想要一个用于非通用数据字段的额外表）？目前，您实际上是从关系的角度创建 4 个独立的用户表。

那么为什么类型表有代理键呢？为什么已经不是`user_id`（唯一的）主键？

如果你改变了它，你只需要用户 id 来检索你想要的数据，而且你已经得到了（或者你甚至无法检索用户类型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:37:39.470

您可以以编程方式执行此操作，也可以使用一系列`CASE`s 和`LEFT JOIN`s 执行此操作。

为简单起见，让我们使用一个表来执行此操作`users`，您可以在其中拥有类型 1（普通用户）、2（高级用户）或 3（管理员）的用户。普通用户有一个电子邮件但没有电话，高级用户有一个地址和一个称为“超级大国”的字段，管理员只有一个电话号码，没有别的。

由于您想`SELECT`对所有人都使用相同的内容，因此您当然需要将所有这些放在您的`SELECT`:

```
SELECT user.id, user.type, email, address, superpower, telephone 
```

然后你需要`LEFT JOIN`恢复这些

```
FROM user
LEFT JOIN users_data ON (user.id = users_data.user_id)
LEFT JOIN power_data ON (user.id = power_data.user_id)
LEFT JOIN admin_info ON (user.id = admin_info.user_id) 
```

现在“未使用”字段将为`NULL`，但您可以提供默认值：

```
SELECT
    CASE WHEN user.type = 0 THEN email ELSE 'nobody@nowhere.com' END AS email,
    CASE WHEN user.type = 1 OR user.type = 2 THEN ... ELSE ... END as whatever,
    ... 
```

您可以自行设置特定`WHERE`条件`JOIN`，例如，如果您只想要 J 部门的管理员，您可以使用

```
LEFT JOIN admin_info ON (user.id = admin_info.user_id AND admin_info.sector = 'J') 
```

总查询时间应该不会太长，因为大多数`JOIN`s 将返回很少（并且，如果您指定用户 ID，它们实际上不会很快返回*任何内容）。*

你也可以使用 a 来做同样的事情`UNION`，这会更快：

```
SELECT user.id, 'default' AS email, 'othermissingfield' AS missingfieldinthistable,
  ... FROM user JOIN user_data ON (user.id = user_data.user_id)
  WHERE ...
UNION
SELECT user.id, email, 'othermissingfield' AS missingfieldinthistable,
  ... FROM user JOIN power_data ON (user.id = power_data.user_id)
  WHERE ...
UNION
  ... 
```

现在，如果您指定用户 ID，除一个之外的所有查询都将很快失败。每个查询都具有相同的`WHERE`重复条件以及任何特定于表的条件。该`UNION`版本的可维护性较差（除非您以编程方式生成它），但应该稍微快一些。

在所有情况下，建议您在适当的字段上保持更新的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T17:42:34.540

相反，我会建议你像这样重建你的表结构。

创建表

```
users_types : 
id 
type 
```

然后用外键创建另一个表 users

```
users :     
id 
f_name 
l_name 
email 
office 
emp_id 
dob 
address 
active_status 
phone 
users_types_id 
```

现在，当您需要在特定用户不需要的字段中插入数据时，请插入 null。您可以简单地根据 id 获取记录。也使用左连接会给你用户类型的名称。

# javascript - 小型研究后 Mac 和 Win 中奇怪的 jQuery 行为

> ID：13977326
> 
> 赞同：-2
> 
> 时间：2012-12-20T17:21:07.560
> 
> 标签：javascript, jquery

在[这篇文章](https://stackoverflow.com/questions/13972046/strange-jquery-behavior-in-mac-and-win)之后，我在 jQuery 或 Firefox 中发现了一个奇怪的错误。你能解释一下哪个是对的。

```
jQuery(document).ready(function(){

    //Works on Windows in: Firefox(17.0.1), IE
    //Doesn't work on OS X 10.8 in: Firefox(17.0.1), Safari
    //And also doesn't work on Windows in Chrome
    jQuery('input').focus(function(){
        jQuery(this).val('');
    });

    //Same on events: change, click, select, on
    jQuery('.checkbox').click(function(){ 
        alert(jQuery(this).val());
    });
});​ 
```

这是示例[http://jsfiddle.net/nonamez/Gq8VK/](http://jsfiddle.net/nonamez/Gq8VK/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:41:09.937

那么Firefox正在做它应该做的事情，在焦点上它将值设置为空白运行点击回调，提醒您刚刚设置的银行价值。在基于 Webkit 的浏览器中，您可以在元素上包含“tabindex”属性并使用它来检查焦点。当您使用鼠标触发焦点事件时，Webkit 不起作用，它似乎适用于输入和文本区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:19:39.147

当涉及到表单元素时，并非所有浏览器都有相同的行为。您所看到的是 webkit 浏览器不会因为单击事件而导致复选框被聚焦。这是否是一个错误将由 w3 规范决定。

我在 w3.org 上找不到关于这个主题的明确答案。我发现的大部分内容似乎表明这是由用户代理决定的。

但是，您可以通过将其包含在脚本中来使所有浏览器的行为相同：http: [//jsfiddle.net/Gq8VK/5/](http://jsfiddle.net/Gq8VK/5/)

```
// Any input that does not receive focus from a mouseclick 
// will now do so, in all browsers. This shouldn't affect browsers that
// focus input elements on click. 
$(document).on('mouseup', 'input', function(){
    if (!$(this).is(":focus")) $(this).focus();
}); 
```

该脚本使用事件委托，因此它将适用于所有输入，包括附加事件时 DOM 中不存在的输入。

# java - java：同时需要身份和平等

> ID：13977330
> 
> 赞同：-1
> 
> 时间：2012-12-20T17:21:21.240
> 
> 标签：java, design-patterns

我有一个 java 项目，我需要身份比较（两个引用是否相同）和相等比较（两个对象是否包含相同的数据）。
我的解决方案是不覆盖 equals/hashcode，并向我的对象添加 isEqual 方法。
有没有更好的模式来处理这种情况？

编辑：
这是有关此特殊需求的更多信息。

默认情况下，我们有：

*   `equals`执行身份检查 (==)
*   `contains`是根据 来实现的`equals`，因此使用 ==

但对于我的用法，我想要：

*   `equals`执行相等检查（对象包含相同的数据）
*   `contains`继续执行 ==

我不能同时拥有两者，因此一种解决方案是实施我自己的平等检查并拥有：

*   `contains`保持不变，使用 ==
*   实施`isEqual`和使用它而不是`equals`

另一个解决方案是实现我自己的使用 == 的包含：

*   实现`customContains`使用 == 并使用它而不是`contains`
*   覆盖`equals`以检查对象是否包含相同的数据

哪个最好？还有另一种更好的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T17:22:44.237

重写该`equals()`方法以确定对象是否包含相同的数据。

用于`==`确定它们是否是相同的对象，即相同的引用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:23:01.677

执行此操作的最佳模式是遵循语言规范。覆盖 equals 和 hashcode，不要滚动你自己的相等，**除非**这是一个很大的问题，除非你之外的任何人都不会使用这个代码**并且**它永远不会改变。

如果您想将它们包装在一个名为 的函数中`isEqual`，即 hashcode 和 equals 方法，这是另一种方法，但这仍然意味着您正在覆盖 equals 和 hashcode，您声称您不想这样做。

`isEqual`本质上，您正在做的是创建一个非常僵化和/或损坏的 API，因为您的函数可能是非常不确定的，因此很难使用它，因此不会有太多用途。

# asp.net - OLAP Cube 性能不佳

> ID：13977339
> 
> 赞同：2
> 
> 时间：2012-12-20T17:21:49.383
> 
> 标签：asp.net, olap, cube

我有asp.net 网站。在这个站点中有一些 mdx 查询（使用 Adomd 库）。在本地机器性能良好的 localhost 中发布站点后，对立方体的最长查询需要 170 毫秒。但是当我将此站点发布到不同机器上的另一个虚拟目录时（相同的 IIS 配置，站点使用相同的连接字符串，只有一个区别 - 它是 MS SQL Server 的一个版本。在我的本地计算机上，它是开发人员版并且在不同的机器上它是标准版）性能很差，对立方体的最短查询大约需要一秒钟。我可以提高第二台机器的性能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T22:03:42.230

2 台不同机器的 OLAP 多维数据集的性能取决于各种因素，例如网络速度、连接字符串、主机服务器中的 OLAP 配置、分区位置等。您需要检查这些以了解瓶颈在哪里。

# java - EasyMock 捕获：在 IAnswer 之外使用 getValue()

> ID：13977343
> 
> 赞同：1
> 
> 时间：2012-12-20T17:22:10.320
> 
> 标签：java, unit-testing, mocking, capture, easymock

假设我想`Foo.doSomething(String arg):String`使用**EasyMock**测试一个方法。我知道我可以使用*EasyMock Capture*来捕获参数内部设置的值，然后再获取它。在编写测试时，我的目标是在模拟 Foo 的方法时捕获值，然后在我的模拟方法之外获取捕获的值。我正在尝试这样的事情：

```
Capture<String> stringCapture = new Capture<String>();
EasyMock.expect(foo.doSomething(EasyMock.capture(stringCapture)).andAnswer(new IAnswer<String> {
    @Override
    public String answer() throws Throwable {
        ...
});
String retrievedValue = stringCapture.getValue(); 
```

但是，当我尝试使用时出现运行时错误`getValue()`：

```
java.lang.AssertionError: Nothing captured yet
    at org.easymock.Capture.getValue(Capture.java:80)
    at com.example.Test.myTest(...)
    .... 
```

我希望我可以`String`在我的测试方法中但在`IAsnwer`闭包之外有一个变量，并在我的方法中设置该变量的值`IAnswer.answer()`。问题是`String`变量必须标记为`final`才能被闭包访问，这使得它无法修改，因此无用。另外，我不希望使用全局来解决这个问题。

我想到的唯一解决方法是使用我自己的具有 String 字段的类，将其声明为`final`外部的变量`IAnswer`，在期间设置捕获的值`answer()`，最后将此值设置为我的测试方法中的字段。也许有更好的方法来做到这一点，因为使用另一个类来提取捕获的值，甚至是全局变量，对我来说似乎很难看。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-25T16:06:24.917

getValue 仅在实际（重放）调用 foo 之后才起作用。在此之前，什么都不是捕获。

为了在 answer() 中设置一个变量，因为 Java 要求内部类中使用的变量是 final 的，所以我通常使用 AtomicReference。这是一个很好的占位符。AtomicReference 是最终的，但它的内容不是。

# php - Paypal ExpressCheckout - 如何显示一些通知商家此销售来自哪个站点的注释？

> ID：13977345
> 
> 赞同：0
> 
> 时间：2012-12-20T17:22:16.543
> 
> 标签：php, paypal

商家/卖家贝宝有很多交易进来，我想在交易中放置一个注释/消息或一些代码，告诉卖家这个销售来自哪个网站。

这可能吗？

请指教，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:28:38.913

可以传递一个名为的字段，该字段`custom`可以包含您希望的任何信息：

[http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html](http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html)

搜索`CUSTOM`

我会想象您传递给贝宝的输入看起来像：

```
<input type="hidden" name="CUSTOM" value="<?php echo $_SERVER['SERVER_NAME']?>"> 
```

# security - 对安全 EJB3 方法的 RMI 调用失败

> ID：13977353
> 
> 赞同：1
> 
> 时间：2012-12-20T17:22:44.467
> 
> 标签：security, ejb-3.0

我的 ejb-jar.xml 中有以下配置；

```
 <assembly-descriptor>
    <security-role>
        <role-name>userRole</role-name>
    </security-role>

    <method-permission>
        <role-name>userRole</role-name>
        <method>
            <ejb-name>MyBean</ejb-name>
            <method-name>*</method-name>
        </method>
    </method-permission>
</assembly-descriptor> 
```

我已经在我的 jboss.xml 中将以下配置为安全域（我添加了以下附加用户的默认域；

```
....
<security-domain>java:/jaas/JBossWS</security-domain>
...

User Properties Files Have Following;
SSOUSER=123456

User Roles Files have Following;
SSOUSER=userRole 
```

我在客户端中编写了以下代码以连接到 JNP；

```
Hashtable environment = new Hashtable();
    environment.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
    environment.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
    environment.put(Context.PROVIDER_URL, "jnp://127.0.0.1:1099"); // remote machine IP
    environment.put(Context.SECURITY_PRINCIPAL, "SSOUSER"); // User Context
    environment.put(Context.SECURITY_CREDENTIALS, "123456"); 
```

并在尝试访问 bean 方法时在 jBoss 控制台上出现以下错误（查找工作正常，只要我尝试调用方法，我就会得到以下信息）；

```
16:43:42,987 ERROR [RoleBasedAuthorizationInterceptor] Insufficient permissions, principal=null, requiredRoles=[userRole], principalRoles=[] 
```

我的配置中是否缺少任何内容？

谢谢

--

斯茹内霍

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T13:05:18.770

搜索了很长时间后，我发现以下有帮助；

[https://community.jboss.org/message/251308](https://community.jboss.org/message/251308)

我所做的更改如下；

```
Hashtable environment = new Hashtable();
environment.put(Context.INITIAL_CONTEXT_FACTORY, "org.jboss.security.jndi.JndiLoginInitialContextFactory");
environment.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
environment.put(Context.PROVIDER_URL, "jnp://127.0.0.1:1099"); // remote machine IP
environment.put(Context.SECURITY_PRINCIPAL, "SSOUSER"); // User Context
environment.put(Context.SECURITY_CREDENTIALS, "123456"); 
```

一切都保持不变，我使用了不正确的 INTIAL_CONTEXT_FACTORY 即“org.jnp.interfaces.NamingContextFactory”，当我切换到“ **org.jboss.security.jndi.JndiLoginInitialContextFactory** ”时，我从 SessionContext 获得了 EJB 中的 PRINCIPAL

# c++ - 用 C 或 C++ 在 3D 空间实现中从 3 点构建圆

> ID：13977354
> 
> 赞同：6
> 
> 时间：2012-12-20T17:22:45.687
> 
> 标签：c++, geometry

我们有 3（三个）xyz 点在 3D 空间中定义了一个圆，这个圆需要转换为折线（用于进一步渲染）。我正在寻找可以完成这项工作的现成 C 或 C++ 函数或免费库。

不明白为什么[关闭](https://stackoverflow.com/questions/13915738/conversion-of-a-3-point-3d-ircle-into-a-polyline-implementation-in-c-or-c)。我什至不能在那里回答我自己的问题。为你们感到羞耻。但你不会阻止知识的传播！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T15:27:03.990

有一个更简单的解决方案可以在真实 3D 中找到圆参数，只需查看[http://en.wikipedia.org/wiki/Circumscribed_circle](http://en.wikipedia.org/wiki/Circumscribed_circle)中的“重心坐标”部分。您可以从中提取以下优化代码：

```
// triangle "edges"
const Vector3d t = p2-p1;
const Vector3d u = p3-p1;
const Vector3d v = p3-p2;

// triangle normal
const Vector3d w = t.crossProduct(u);
const double wsl = w.getSqrLength();
if (wsl<10e-14) return false; // area of the triangle is too small (you may additionally check the points for colinearity if you are paranoid)

// helpers
const double iwsl2 = 1.0 / (2.0*wsl);
const double tt = t*t;
const double uu = u*u;

// result circle
Vector3d circCenter = p1 + (u*tt*(u*v) - t*uu*(t*v)) * iwsl2;
double   circRadius = sqrt(tt * uu * (v*v) * iwsl2*0.5);
Vector3d circAxis   = w / sqrt(wsl); 
```

然后，您也可以在真实 3D 中计算圆上的点，例如使用 OpenGL 中的 GL_LINE_STRIP 绘制它们。这应该比使用 2D sin/cos 方法快得多。

```
// find orthogonal vector to the circle axis
const Vector3d an = circAxis.getNormalized();
const Vector3d ao = Vector3d(4.0+an[0], 4.0+an[0]+an[1], 4.0+an[0]+an[1]+an[2]).crossProduct(an).getNormalized();

// 4x4 rotation matrix around the circle axis
const int steps = 360; // maybe adjust according to circle size on screen
Matrix4d R = makeRotMatrix4d(circCenter, circAxis, 2.0*M_PI/double(steps));

// one point on the circle
Vector3d cp = circCenter + ao*circRadius;

// rotate point on the circle
for (int i=0; i<steps; ++i)
{
   circlePoints.push_back(cp);
   cp = transformPoint(cp, R); // apply the matrix
} 
```

对于变换矩阵的创建（即 makeRotMatrix4d()），请参见[http://paulbourke.net/geometry/rotate/](http://paulbourke.net/geometry/rotate/)例如。

请注意，我没有测试上面的代码是否真的编译，但它应该给你足够的提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:22:45.687

有一篇不错的文章和代码示例，介绍了如何在 2D、XY 平面中通过 3 个点构建一个圆。

[http://paulbourke.net/geometry/circlesphere/](http://paulbourke.net/geometry/circlesphere/)

[http://paulbourke.net/geometry/circlesphere/Circle.cpp](http://paulbourke.net/geometry/circlesphere/Circle.cpp)

要构建一个 3D 圆，我们必须：

*   将我们的 3 个点旋转到 XY 平面
*   计算圆心
*   使用文章中的代码在 XY 平面上构建一个圆
*   将其旋转回原来的平面

对于旋转，最好使用四元数。

为了找到正确的四元数，我查看了 Ogre3d 源代码： [void Quaternion::FromAngleAxis (const Radian& rfAngle, const Vector3& rkAxis)](https://bitbucket.org/sinbad/ogre/src/3cbd67467fab3fef44d1b32bc42ccf4fb1ccfdd0/OgreMain/src/OgreQuaternion.cpp?at=default#cl-116)

还有一个更有用的函数： [Quaternion getRotationTo(const Vector3& dest, const Vector3& fallbackAxis = Vector3::ZERO) const](https://bitbucket.org/sinbad/ogre/src/9db75e3ba05c/OgreMain/include/OgreVector3.h#cl-651) 但我没有使用它。

对于四元数和向量，我使用了我们自己的类。这是完成这项工作的函数的完整源代码：

```
bool IsPerpendicular(Point3d *pt1, Point3d *pt2, Point3d *pt3);
double CalcCircleCenter(Point3d *pt1, Point3d *pt2, Point3d *pt3, Point3d *center);

void FindCircleCenter(const Point3d *V1, const Point3d *V2, const Point3d *V3, Point3d *center)
{
    Point3d *pt1=new Point3d(*V1);
    Point3d *pt2=new Point3d(*V2);
    Point3d *pt3=new Point3d(*V3);

    if (!IsPerpendicular(pt1, pt2, pt3) )       CalcCircleCenter(pt1, pt2, pt3, center);
    else if (!IsPerpendicular(pt1, pt3, pt2) )  CalcCircleCenter(pt1, pt3, pt2, center);
    else if (!IsPerpendicular(pt2, pt1, pt3) )  CalcCircleCenter(pt2, pt1, pt3, center);
    else if (!IsPerpendicular(pt2, pt3, pt1) )  CalcCircleCenter(pt2, pt3, pt1, center);
    else if (!IsPerpendicular(pt3, pt2, pt1) )  CalcCircleCenter(pt3, pt2, pt1, center);
    else if (!IsPerpendicular(pt3, pt1, pt2) )  CalcCircleCenter(pt3, pt1, pt2, center);
    else {
        delete pt1;
        delete pt2;
        delete pt3;
        return;
    }
    delete pt1;
    delete pt2;
    delete pt3;

}

bool IsPerpendicular(Point3d *pt1, Point3d *pt2, Point3d *pt3)
// Check the given point are perpendicular to x or y axis
{
    double yDelta_a= pt2->y - pt1->y;
    double xDelta_a= pt2->x - pt1->x;
    double yDelta_b= pt3->y - pt2->y;
    double xDelta_b= pt3->x - pt2->x;

    // checking whether the line of the two pts are vertical
    if (fabs(xDelta_a) <= 0.000000001 && fabs(yDelta_b) <= 0.000000001){
        return false;
    }

    if (fabs(yDelta_a) <= 0.0000001){
        return true;
    }
    else if (fabs(yDelta_b) <= 0.0000001){
        return true;
    }
    else if (fabs(xDelta_a)<= 0.000000001){
        return true;
    }
    else if (fabs(xDelta_b)<= 0.000000001){
        return true;
    }
    else
        return false ;
}

double CalcCircleCenter(Point3d *pt1, Point3d *pt2, Point3d *pt3, Point3d *center)
{
    double yDelta_a = pt2->y - pt1->y;
    double xDelta_a = pt2->x - pt1->x;
    double yDelta_b = pt3->y - pt2->y;
    double xDelta_b = pt3->x - pt2->x;

    if (fabs(xDelta_a) <= 0.000000001 && fabs(yDelta_b) <= 0.000000001){
        center->x= 0.5*(pt2->x + pt3->x);
        center->y= 0.5*(pt1->y + pt2->y);
        center->z= pt1->z;

        return 1;
    }

    // IsPerpendicular() assure that xDelta(s) are not zero
    double aSlope=yDelta_a/xDelta_a; //
    double bSlope=yDelta_b/xDelta_b;
    if (fabs(aSlope-bSlope) <= 0.000000001){    // checking whether the given points are colinear.
        return -1;
    }

    // calc center
    center->x= (aSlope*bSlope*(pt1->y - pt3->y) + bSlope*(pt1->x + pt2 ->x)
                         - aSlope*(pt2->x+pt3->x) )/(2* (bSlope-aSlope) );
    center->y = -1*(center->x - (pt1->x+pt2->x)/2)/aSlope +  (pt1->y+pt2->y)/2;

    return 1;
}

//! Builds a circle in 3D space by 3 points on it and an optional center
void buildCircleBy3Pt(const float *pt1,
                      const float *pt2,
                      const float *pt3,
                      const float *c,       // center, can be NULL
                      std::vector<float> *circle)
{
    /*  Get the normal vector to the triangle formed by 3 points
        Calc a rotation quaternion from that normal to the 0,0,1 axis
        Rotate 3 points using quaternion. Points will be in XY plane 
        Build a circle by 3 points on XY plane 
        Rotate a circle back into original plane using quaternion
     */
    Point3d p1(pt1[0], pt1[1], pt1[2]);
    Point3d p2(pt2[0], pt2[1], pt2[2]);
    Point3d p3(pt3[0], pt3[1], pt3[2]);
    Point3d center;
    if (c)
    {
        center.set(c[0], c[1], c[2]);
    }

    const Vector3d p2top1 = p1 - p2;
    const Vector3d p2top3 = p3 - p2;

    const Vector3d circle_normal = p2top1.crossProduct(p2top3).normalize();
    const Vector3d xy_normal(0, 0, 1);

    Quaternion rot_quat;
    // building rotation quaternion
    {
        // Rotation axis around which we will rotate our circle into XY plane
        Vector3d rot_axis = xy_normal.crossProduct(circle_normal).normalize();
        const double rot_angle = xy_normal.angleTo(circle_normal); // radians

        const double w = cos(rot_angle * 0.5);
        rot_axis *= sin(rot_angle * 0.5);

        rot_quat.set(w, rot_axis.x, rot_axis.y, rot_axis.z);
    }

    Quaternion rot_back_quat;
    // building backward rotation quaternion, same as prev. but -angle
    {
        const double rot_angle = -(xy_normal.angleTo(circle_normal)); // radians
        const double w_back = cos(rot_angle * 0.5);
        Vector3d rot_back_axis = xy_normal.crossProduct(circle_normal).normalize();
        rot_back_axis *= sin(rot_angle * 0.5);
        rot_back_quat.set(w_back, rot_back_axis.x, rot_back_axis.y, rot_back_axis.z);
    }

    rot_quat.rotate(p1);
    rot_quat.rotate(p2);
    rot_quat.rotate(p3);
    rot_quat.rotate(center);

    if (!c)
    {
        // calculate 2D center
        FindCircleCenter(&p1, &p2, &p3, &center);
    }

    // calc radius
    const double radius = center.distanceTo(p1);

    const float DEG2RAD = 3.14159f / 180.0f;
    // build circle
    for (int i = 0; i < 360; ++i)
    {
        float degInRad = i * DEG2RAD;
        Point3d pt(cos(degInRad) * radius + center.x, sin(degInRad) * radius + center.y, 0);

        // rotate the point back into original plane 
        rot_back_quat.rotate(pt);

        circle->push_back(pt.x);
        circle->push_back(pt.y);
        circle->push_back(pt.z);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-23T16:53:05.033

以下是[Mark](https://stackoverflow.com/users/1921898/mark)的[答案](https://stackoverflow.com/a/13992781/387023)的 C#/Unity 端口。它使用[Unity 脚本 API 中的](https://github.com/Unity-Technologies/UnityCsReference)类型和实用功能。

```
// triangle "edges"
var t = p2 - p1;
var u = p3 - p1;
var v = p3 - p2;

// triangle normal
var w = Vector3.Cross(t, u);
var wsl = Vector3.Dot(w, w);
// TODO: if (wsl<10e-14) return false; // area of the triangle is too small (you may additionally check the points for colinearity if you are paranoid)

// helpers
var iwsl2 = 1f / (2f * wsl);
var tt = Vector3.Dot(t, t);
var uu = Vector3.Dot(u, u);

// result circle
Vector3 circCenter = p1 + (u * tt * (Vector3.Dot(u, v)) - t * uu * (Vector3.Dot(t, v))) * iwsl2;
var     circRadius = Mathf.Sqrt(tt * uu * (Vector3.Dot(v, v)) * iwsl2 * 0.5f);
Vector3 circAxis   = w / Mathf.Sqrt(wsl); 
```

使用[Unity 的 Gizmos](https://docs.unity3d.com/ScriptReference/Gizmos.html)，可以如下绘制圆（在这种情况下使用 30 条线段来近似它）：

```
// Draw the circle:
Gizmos.color = Color.white;
for (int i = 0; i < 30; ++i) 
{
    Gizmos.DrawLine(
        circCenter + Quaternion.AngleAxis(360f / 30f *  i     , circAxis) * (p1 - circCenter),
        circCenter + Quaternion.AngleAxis(360f / 30f * (i + 1), circAxis) * (p1 - circCenter)
    );
} 
```

顶点位置的结果如下所示`var p1 = new Vector3(0f, 1.44f, 0f); var p2 = new Vector3(0f, 0.73f, 0.65f); var p3 = new Vector3(0f, -1.04f, 0f);`：

[![通过三个点循环](../Images/8142979cd82fd1d0ec17678656fa87ff.png)](https://i.stack.imgur.com/gyw3Y.png)

# r - `cex.lab` 轴标签超出绘图区域

> ID：13977363
> 
> 赞同：0
> 
> 时间：2012-12-20T17:23:01.620
> 
> 标签：r, graph

我想创建一个带有放大轴标签的图，`cex.lab=2`但标签超出了绘图区域。关于如何解决这个问题的任何想法？

这是该问题的一个示例：

```
plot(1:10,1:10,ylab=~gamma,cex.lab=2) 
```

这会产生一个带有斩首 $\gamma$ 的图形

![在此处输入图像描述](../Images/fb32467b5042ee7d9b976d7507c4c25d.png)

在谷歌和本网站提出问题之前，我已经进行了一些搜索，但这次我的谷歌 foo 出卖了我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:25:55.247

您必须设置更大的绘图窗口边距。这可以通过 function`par()`和 argument来实现`mar=`。数字对应于从底部开始的边距，然后是左边距，上边距和右边距。

```
par(mar=c(5,5,1,1))
plot(1:10,1:10,ylab=~gamma,cex.lab=2) 
```

# android - Android：“重复属性”XML 错误

> ID：13977365
> 
> 赞同：14
> 
> 时间：2012-12-20T17:23:12.393
> 
> 标签：android, xml

我有一个布局，左侧有一组小部件，右侧有其他小部件。

现在我想在中间放一个按钮，在两个文本视图下方（一个在左边，另一个在右边）。

我收到以下代码的错误（“重复属性”）：

```
android:layout_centerInParent="true"
android:layout_below="@id/text_left"
android:layout_below="@id/text_right" 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2018-04-15T00:08:24.107

如果您在不同的布局中具有相同的 xmlns 属性，也会出现此错误消息。

在这种情况下，xmlns:tools 在 layout 和 ConstraintLayout 中重复。从其中一种布局中删除它应该可以解决问题。

```
 <layout xmlns:tools="http://schemas.android.com/tools"
        xmlns:android="http://schemas.android.com/apk/res/android"> 

        <data>
            <variable
                name="item"
                type="com.myapp.SearchSettings" />
        </data>

        <android.support.constraint.ConstraintLayout

            xmlns:app="http://schemas.android.com/apk/res-auto"
            xmlns:tools="http://schemas.android.com/tools" <-- remove this line

(it is already in layout tag) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2019-12-11T11:23:15.227

对于那些，接受的答案不起作用，并且通过任何更改您正在使用 android **Data Binding那么如果某些属性在 parent tag 和 child** **tag**中出现两次，则可能会出现这种错误。在下面的示例中，在**parent**和**child**`android:layout_width="match_parent"` `android:layout_height="wrap_content"`中使用**了两次**。

 ****```
<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <data>

        <variable
            name="pdpDescriptionViewModel"
            type="com.tottus.ui.productdescription.model.PdpDescriptionViewModel" />
    </data>

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    </LinearLayout>

</layout> 
```

要解决此问题***，请从父级或子级中删除重复属性***，它应该可以工作。

```
<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android">

    <data>

        <variable
            name="pdpDescriptionViewModel"
            type="com.tottus.ui.productdescription.model.PdpDescriptionViewModel" />
    </data>

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

    </LinearLayout>

</layout> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-20T17:25:58.540

您正在设置`layout_below`两次。

如果您希望相关布局低于这两者，请尝试将`text_left`和组合`text_right`成一个布局，然后使用`layout_below`您为包含 和 组合的布局分配的`text_left`名称`text_right`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T17:24:07.653

你设置`layout_below`了两次。

```
android:layout_below="@id/text_left"
android:layout_below="@id/text_right" 
```

您只能为每个小部件设置一次，在这种情况下是您的`Button`. 您实际上是在尝试通过多次调用来告诉`Button`将自己置于两个*不同的项目之下。*`android:layout_below`

如果最终结果不是您所期望的，只使用其中一个，`TextViews`您可能必须将您的参考点调整为跨越整个宽度的东西，或者可能将您包裹`TextViews`在 a 中`LinearLayout`并将其用作您的参考点。在根级别切换布局类型可能更容易，移动到 a`LinearLayout`并根据需要嵌套它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T17:24:50.803

您需要选择一个您的`android:layout_below`. 你不能两者兼得。****

# svg - SVG：重用现有的渐变定义，但旋转/翻转它

> ID：13977368
> 
> 赞同：5
> 
> 时间：2012-12-20T17:23:30.840
> 
> 标签：svg, gradient

我已经搜索过，但找不到这个问题的答案。假设我在 SVG 中定义了一个渐变，例如：

```
<linearGradient id="myCustomGradient" x1="0%" y1="0%" x2="0%" y2="100%">
    <stop offset="80%" style="stop-color: #4D4D94;" />
    <stop offset="100%" style="stop-color: #FFFFFF;" />
</linearGradient> 
```

我可以通过执行以下操作来使用它：

```
<rect x="0" y="0" width="100" height="50" style="fill: url(#myCustomGradient)" /> 
```

...这将创建一个从顶部的蓝色到底部的白色渐变的矩形。

现在，假设我想制作一个具有相同渐变*但方向相反*的形状（即从*底部*的蓝色变为顶部的白色）。**是否可以重用现有的梯度定义但以某种方式转换（即翻转）它？**

我知道该`gradientTransform`属性，但这似乎仅在定义新渐变时适用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T18:49:06.113

当然，您创建另一个渐变并将其和 xlink:href 提供给您的第一个渐变。例如

```
<linearGradient id="myCustomRotatedGradient" xlink:href="#myCustomGradient" gradientTransform="rotate(180, 150, 25)"/> 
```

您未设置的任何属性都使用引用渐变中的属性。如果您没有设置任何停靠点，那么也会使用引用的渐变停靠点。

如果你想翻转它， scale(-1) 的 gradientTransform 可能会更好。

# asp.net - 从数据库图像制作缩略图，同时保持纵横比

> ID：13977369
> 
> 赞同：0
> 
> 时间：2012-12-20T17:23:34.157
> 
> 标签：asp.net, sql-server, image

我已经将我的图像存储在 SQL 服务器中，并且 imageContent 是一个字节数组（其中包含存储在 DB 中的图像数据）。我使用以下代码从我的主图像创建缩略图，目前我为我的缩略图（40x40）设置了明确的宽度和高度，但它会损坏我的图像纵横比，我怎样才能找到原始图像的纵横比并缩小它所以我原来的纵横比没有改变？

```
 Stream str = new MemoryStream((Byte[])imageContent);
        Bitmap loBMP = new Bitmap(str);
        Bitmap bmpOut = new Bitmap(40, 40);
        Graphics g = Graphics.FromImage(bmpOut);
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        g.FillRectangle(Brushes.White, 0, 0, 40, 40);
        g.DrawImage(loBMP, 0, 0, 40, 40);
        MemoryStream ms = new MemoryStream();
        bmpOut.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        byte[] bmpBytes = ms.GetBuffer();
        bmpOut.Dispose();
        //end new

        Response.ContentType = img_type;
        Response.BinaryWrite(bmpBytes);//imageContent,bmpBytes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:48:05.943

可能这可以帮助你：

```
public static Bitmap CreateThumbnail(Bitmap source, int thumbWidth, int thumbHeight, bool maintainAspect)
{
        if (source.Width < thumbWidth && source.Height < thumbHeight) return source;

        Bitmap image = null;
        try
        {
            int width = thumbWidth;
            int height = thumbHeight;

            if (maintainAspect)
            {
                if (source.Width > source.Height)
                {
                    width = thumbWidth;
                    height = (int)(source.Height * ((decimal)thumbWidth / source.Width));
                }
                else
                {
                    height = thumbHeight;
                    width = (int)(source.Width * ((decimal)thumbHeight / source.Height));
                }
            }

            image = new Bitmap(width, height);
            using (Graphics g = Graphics.FromImage(image))
            {
                g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
                g.FillRectangle(Brushes.White, 0, 0, width, height);
                g.DrawImage(source, 0, 0, width, height);
            }

            return image;
        }
        catch
        {
            image = null;
        }
        finally
        {
            if (image != null)
            {
                image.Dispose();
            }
        }

        return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:26:43.847

看看 ImageResizer 项目：http: [//imageresizing.net/](http://imageresizing.net/)

它允许您做您正在做的事情并自动为您处理纵横比。

# javascript - 检查日期是否在 11 月 1 日和 3 月 1 日之间，如果是，则执行某些操作

> ID：13977376
> 
> 赞同：0
> 
> 时间：2012-12-20T17:23:56.220
> 
> 标签：javascript, validation, date

我想在 javascript 中检查当前日期是否在 11 月 1 日和 3 月之间，如果是则执行某些操作。

这是我当前的代码：

```
var today = new Date();
if (today.getMonth() >= 10 && today.getMonth() < 2) {
    $(document).ready( function(){ 
        $.fn.test(); 
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:29:57.273

你可以这样做：

```
var today = new Date();
if (today.getMonth() >= 10 || today.getMonth() < 2) {
    // ... do stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:27:41.380

```
var d = new Date();
var MARCH_ZERO_INDEXED = 2, NOVEMBER_ZERO_INDEXED = 10;
if (MARCH_ZERO_INDEXED <= d.getMonth() && d.getMonth() < NOVEMBER_ZERO_INDEXED) {
  alert(d + " is between 1 Mar and 1 Nov");
} else {
  alert(d + " is between 1 Nov and 1 Mar of the next year");
} 
```

或者

```
var d = new Date();
var year = d.getFullYear();

var nov1 = new Date(year, 10 /* zero-indexed */, 1 /* one-indexed */);
var mar1 = new Date(year,  2, 1);

if (mar1 <= d && d < nov1) {
  alert(d + " is between 1 Mar and 1 Nov");
} else {
  alert(d + " is between 1 Nov and 1 Mar of the next year");
} 
```

两者都假设您想使用 JS 解释器的时区进行测试。

# java - 将 Arraylist 转换为二维数组？

> ID：13977378
> 
> 赞同：-3
> 
> 时间：2012-12-20T17:24:00.990
> 
> 标签：java, arrays, arraylist, multidimensional-array

我基本上想接受一个输入并将其存储到一个名为 mat 的 2D 数组中，大小为 3x3

所以我尝试获取一个输入字符串，将它们转换为 char，然后将它们放在一个数组列表中，这就是我到目前为止所写的。

```
System.out.println("Enter Message");
Scanner Scanner1 = new Scanner(System.in);
String plaintext = Scanner1.next();
int counter = 0;
// will get chars till the end of input length
while(plaintext.length() > 0){
    char text = plaintext.charAt(counter);
    counter++;
    ArrayList mylist = new ArrayList();
    mylist.add(text);
    System.out.println(mylist);          // chars of string
} 
```

如何将其转换`List`为 A 2D

我尝试了其他东西我也尝试过像这样使用拆分

```
System.out.println("Enter Message");
Scanner Scanner1 = new Scanner(System.in);
String plaintext = Scanner1.next();

String[] parts = plaintext.split("");

for (int i=1; i<=3; i++){
     System.out.println(parts[i]);
} 
```

这给了我 H e l

排序为 1 行 3 列 Arraylist 的输出是这样的

```
[H]
[e]
[l]
[l]
[o] 
```

我想要一个像这样的二维数组：

```
[H][e][l];
[l][o][w];
[x][y][z]; 
```

或者

```
H e l;
l o w;
x y z; 
```

我只需要将我的输入字符串转换为二维形式的数组，我已经尝试了很多，但我无法做到正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:28:19.993

考虑：

```
 String[][] parts = new String[3][3];

 // then do this in your loop instead of adding to the list
 parts[count/3][count%3] = text; 
```

但是，您还有其他问题。在您的第一个循环中，长度将始终 > 0，并且您将不断获得字符，直到您获得 IndexOutOfBoundsException。考虑改为使用 for 循环。

# pdf - 如何使用 iTextSharp 测试 PDF 文档是否符合 PDF/A？

> ID：13977379
> 
> 赞同：1
> 
> 时间：2012-12-20T17:24:00.650
> 
> 标签：pdf, itext, pdfa

我有一个现有的 PDF 文件，我想使用 iTextSharp 测试它是否符合 PDF/A。

我不想转换或创建文件，只需阅读并检查它是否为 PDF/A。

我没有尝试任何东西，因为我没有找到 iTextSharp 的 PdfReader 类的任何方法或属性，说 PDF 是 PDF/A。现在只要知道如何验证文档声称与 PDF/A 兼容就足够了

谢谢安东尼奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T13:11:41.217

经过长时间的搜索，我尝试了这种方式并且似乎有效：

```
 Dim reader As iTextSharp.text.pdf.PdfReader = New iTextSharp.text.pdf.PdfReader(sFilePdf)
    Dim yMetadata As Byte() = reader.Metadata()
    Dim bPDFA As Boolean = False

    If Not yMetadata Is Nothing Then
        Dim sXmlMetadata = System.Text.ASCIIEncoding.Default.GetString(yMetadata)

        Dim xmlDoc As Xml.XmlDocument = New Xml.XmlDocument()
        xmlDoc.LoadXml(sXmlMetadata)
        Dim nodes As Xml.XmlNodeList = xmlDoc.GetElementsByTagName("pdfaid:conformance")
        If nodes.Item(0).FirstChild.Value.ToUpper = "A" Then
            bPDFA = True
        End If
    End If

    Return bPDFA 
```

我还发现了一些对 XmpReader 类的引用，但不足以做我想做的事

# asp.net - 对 Ajax 调用的响应与对完整回发的响应不同吗

> ID：13977385
> 
> 赞同：0
> 
> 时间：2012-12-20T17:24:17.750
> 
> 标签：asp.net, ajax, response

当我尝试使用回发以下代码时，文件下载正常进行：

```
FileInfo file = new FileInfo("C:\\a.txt");
Response.ClearContent();
Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);
Response.AddHeader("Content-Length", file.Length.ToString());
Response.ContentType = "text/plain";
Response.TransmitFile(file.FullName);
Response.End(); 
```

但是，如果我将上述代码放在公共静态 Web 方法中并使用 AJAX 调用它，我会收到错误消息，例如“进程被中止”。（当然要获得当前响应，我会写 HttpContext.Current.Response）这让我想到这两种反应的性质是不同的。我的问题是，如果它们不同，那么到底有什么不同？有没有办法用 AJAX 实现同样的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:28:08.323

浏览器不会通过 XHR (Ajax) 调用接收文件。您需要返回文件位置，然后通过`window.location`或将浏览器发送到该文件`window.open`。

**编辑**：这是一个 Web 表单示例。自从我现在使用 MVC 以来，我的 Web Forms 技能有点生疏了；语法不在我的脑海中，因此您可能需要对其进行一些修复。

**ASPX 页面**

```
<div id="whateverIsContainingYourDialog">
    <form id="mikeJMIsAwesome" runat="server">
        <asp:TextBox id="firstName" runat="server" />
        <asp:TextBox id="lastName" runat="server" />

        <asp:Button id="submit" runat="server" />
    </form>
</div> 
```

**服务器端代码**

```
protected void submit_OnClick(object sender, EventArgs e) {
    //Your logic for creating the file and the code you originally posted for serving the file.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:50:53.580

Ek0nomik 说，文件下载由浏览器处理，无法通过 Javascript 处理。响应都是相同的，它们都只是 http 响应 - 您可以使用 fiddler 或其他工具（[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)）来验证这一点。

本质上，您的 ajax 方法将无法处理接收文件，并且肯定无权组装它并将其存储在您的硬盘上。

您可以使用一些 Javascript 来“伪造”点击链接的用户。

请检查这个类似的问题以获得答案。我已将答案粘贴在下面。

[使用 JavaScript 开始文件下载](https://stackoverflow.com/questions/365777/starting-file-download-with-javascript)

我们这样做：首先添加这个脚本。

```
<script type="text/javascript">
function populateIframe(id,path) 
{
    var ifrm = document.getElementById(id);
    ifrm.src = "download.php?path="+path;
}
</script> 
```

把它放在你想要下载按钮的地方（这里我们只使用一个链接）：

```
<iframe id="frame1" style="display:none"></iframe>
<a href="javascript:populateIframe('frame1','<?php echo $path; ?>')">download</a>
The file 'download.php' (needs to be put on your server) simply contains:

<?php 
   header("Content-Type: application/octet-stream");
   header("Content-Disposition: attachment; filename=".$_GET['path']);
   readfile($_GET['path']);
?> 
```

因此，当您单击链接时，隐藏的 iframe 会获取/打开源文件“download.php”。使用路径作为获取参数。我们认为这是最好的解决方案！

# c++ - 错误：无法在赋值中将 'const wchar_t [13]' 转换为 'LPCSTR {aka const char*}'

> ID：13977388
> 
> 赞同：19
> 
> 时间：2012-12-20T17:24:36.183
> 
> 标签：c++, winapi, compiler-errors

```
// include the basic windows header file
#include <windows.h>
#include <windowsx.h>

// the WindowProc function prototype LRESULT CALLBACK WindowProc(HWND hWnd,
                         UINT message,
                         WPARAM wParam,
                         LPARAM lParam);

// the entry point for any Windows program int WINAPI WinMain(HINSTANCE hInstance,
                   HINSTANCE hPrevInstance,
                   LPSTR lpCmdLine,
                   int nCmdShow) {
    // the handle for the window, filled by a function
    HWND hWnd;
    // this struct holds information for the window class
    WNDCLASSEX wc;

    // clear out the window class for use
    ZeroMemory(&wc, sizeof(WNDCLASSEX));

    // fill in the struct with the needed information
    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WindowProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = L"WindowClass1";

    // register the window class
    RegisterClassEx(&wc);

    // create the window and use the result as the handle
    hWnd = CreateWindowEx(NULL,
                          L"WindowClass1",    // name of the window class
                          L"Our First Windowed Program",   // title of the window
                          WS_OVERLAPPEDWINDOW,    // window style
                          300,    // x-position of the window
                          300,    // y-position of the window
                          500,    // width of the window
                          400,    // height of the window
                          NULL,    // we have no parent window, NULL
                          NULL,    // we aren't using menus, NULL
                          hInstance,    // application handle
                          NULL);    // used with multiple windows, NULL

    // display the window on the screen
    ShowWindow(hWnd, nCmdShow);

    // enter the main loop:

    // this struct holds Windows event messages
    MSG msg;

    // wait for the next message in the queue, store the result in 'msg'
    while(GetMessage(&msg, NULL, 0, 0))
    {
        // translate keystroke messages into the right format
        TranslateMessage(&msg);

        // send the message to the WindowProc function
        DispatchMessage(&msg);
    }

    // return this part of the WM_QUIT message to Windows
    return msg.wParam; }

// this is the main message handler for the program LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    // sort through and find what code to run for the message given
    switch(message)
    {
        // this message is read when the window is closed
        case WM_DESTROY:
            {
                // close the application entirely
                PostQuitMessage(0);
                return 0;
            } break;
    }

    // Handle any messages the switch statement didn't
    return DefWindowProc (hWnd, message, wParam, lParam); } 
```

=============== 我使用 CodeBlock，这段代码来自 Direct X 教程。

我收到以下错误：

```
||In function 'int WinMain(HINSTANCE, HINSTANCE, LPSTR, int)':|
error: cannot convert 'const wchar_t [13]' to 'LPCSTR {aka const char*}' in assignment|
|49|warning: converting to non-pointer type 'DWORD {aka long unsigned int}' from NULL [-Wconversion-null]|
|49|error: cannot convert 'const wchar_t*' to 'LPCSTR {aka const char*}' for argument '2' to 'HWND__* CreateWindowExA(DWORD, LPCSTR, LPCSTR, DWORD, int, int, int, int, HWND, HMENU, HINSTANCE, LPVOID)'|
||=== Build finished: 2 errors, 1 warnings ===| 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-20T17:30:26.837

您的项目没有`UNICODE`定义预处理器符号，因此采用指向字符串的指针的 Windows API 函数 expect`char *`和 not `wchar_t *`。改变

```
L"WindowClass1" 
```

至

```
"WindowClass1" 
```

对剩余的字符串文字执行相同的操作。或者，将它们更改为`_T("WindowClass1")`，这将根据`UNICODE`定义的符号扩展为正确类型的字符串文字。

* * *

我的建议是转到您的项目属性并将`Character Set`设置更改为`Unicode`，然后明确使用所有 Windows API 函数的宽字符版本。例如，代替`CreateWindow`，调用`CreateWindowW`。

**编辑：**
我建议的项目设置仅适用于 Visual Studio，不确定如何在 Code::Blocks 中执行此操作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-20T17:31:35.250

1）如果你想用 UNICODE 编译，那么改变选项。如果您从 IDE 编译，请设置以下属性配置属性 -> 常规 -> 项目默认值 -> 字符集 -> 使用 Unicode 字符集。

如果从命令行编译使用选项 /DUNICODE /D_UNICODE

如果您不想使用 UNICODE 进行编译，只需按照下面的步骤 2 和 3 进行操作。在字符集中，不要选择 UNICODE。

2) 之前

```
#include <windows.h> 
```

添加

```
#include <tchar.h> 
```

3) 改变

```
wc.lpszClassName = L"WindowClass1"; 
```

至

```
wc.lpszClassName = _T("WindowClass1"); 
```

如果你想用 UNICODE 编译，你可以只做#1，但最好做所有 3。

如果您想在没有 UNICODE 的情况下进行编译，请执行 #2 和 #3 - 不要执行 #1。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-12-31T04:30:25.200

我在我的单个源代码文件上使用它，因为我不想更改我当前的项目配置

```
#ifndef UNICODE
#define UNICODE
#define UNICODE_WAS_UNDEFINED
#endif

#include <Windows.h>

#ifdef UNICODE_WAS_UNDEFINED
#undef UNICODE
#endif 
```

# sql-server - 将 SQL 查询从 DB2 迁移到 SQL Server

> ID：13977396
> 
> 赞同：0
> 
> 时间：2012-12-20T17:25:08.463
> 
> 标签：sql-server

我正在将 SQL 代码从 DB2 迁移到 SQL Server 2012，我是 SQL Server 的新手，并且坚持使用这个 DB2 查询：

```
select * from schema.tablename1 t1
 where (t1.column1,t1.column2)
 in
(select t2.column1,t2.column2 from
 schema.tablename2 t2) 
```

我们如何在 SQL Server 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:29:06.277

您可以使用重写此半联接`EXISTS`

```
SELECT *
FROM   schema.tablename1 t1
WHERE  EXISTS (SELECT *
               FROM   schema.tablename2 t2
               WHERE  t1.column1 = t2.column1
                      AND t1.column2 = t2.column2) 
```

# regex - 字母和一些字符的正则表达式

> ID：13977398
> 
> 赞同：1
> 
> 时间：2012-12-20T17:25:14.190
> 
> 标签：regex

嗨，我有一个正则表达式，它只允许字母和一些字符 (.-) 和空格。问题是即使文本字段为空，我也希望它通过。\s 需要一个空格，这很好，但我也希望它在没有任何键盘输入的情况下通过。这里是：

```
^[\sA-Za-z.-]+$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:26:53.833

`+`将量词更改为`*`，您就完成了：-

```
^[\sA-Za-z.-]*$ 
```

它将匹配`0 or more`事件。并且`0`出现将意味着空字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:27:04.797

我认为应该是 *（0 或更多）而不是 +（1 或更多）

```
^[\sA-Za-z.-]*$ 
```

# apache - 一台 Apache 服务器上的多个域 (WAMP)

> ID：13977399
> 
> 赞同：0
> 
> 时间：2012-12-20T17:25:14.460
> 
> 标签：apache, wamp, virtualhost, vhosts

我的 sv 上有一个 IP 地址，我想在一个 Apache 服务器上设置两个域和另一个 DocumentRoot。这是我在 httpd-vhosts.conf 中得到的

```
<VirtualHost *:80>
    DocumentRoot "C:\wamp\www\mail"
    ServerName mail.A.pl
</VirtualHost>

<VirtualHost *:80>
    ServerName B.eu
    DocumentRoot "c:\wamp\www\B"
</VirtualHost>

<VirtualHost *:80>
    ServerName A.pl
    DocumentRoot "c:\wamp\www"
</VirtualHost> 
```

即使我尝试加载 page: `http://www.A.pl`or `www.B.eu`or `B.eu`or`A.pl`它也会加载`mail.A.pl`. 我究竟做错了什么？

**已编辑**

这是新的 httpd-vhost，现在它加载了正确的页面，但是 A.pl 的 fe 不显示任何图像，并且在 mail.A.pl 上不想发送 POST 数据：

```
NameVirtualHost *:80
<VirtualHost *:80>
DocumentRoot "C:\wamp\www\mail"
ServerAlias mail.A.pl
    ServerName mail.A.pl
</VirtualHost>
NameVirtualHost *:80
<VirtualHost *:80>
    ServerName B.eu
    ServerAlias *.B.eu
    DocumentRoot "c:\wamp\www\B"
</VirtualHost>
NameVirtualHost *:80
<VirtualHost *:80>
    ServerName A.pl
    ServerAlias A.pl
    DocumentRoot "c:\wamp\www"
</VirtualHost> 
```

**EDIT2** 谢谢你们的帮助。

我刚刚用最后一个切换了第一个 VirtualHost，它开始工作了：O

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:28:10.110

我认为你需要一些东西。

1) 取消注释 Apache 配置文件中的 Virtual hosts 行，使其包含`httpd-vhosts.conf`. 在 OSX 上是：

```
# Virtual hosts
Include /Applications/MAMP/conf/apache/extra/httpd-vhosts.conf 
```

2）将必要的行放入您的主机文件（[http://en.wikipedia.org/wiki/Hosts_(file](http://en.wikipedia.org/wiki/Hosts_(file) ) ）：

```
127.0.0.1 mail.A.pl
127.0.0.1 A.pl
127.0.0.1 B.pl
127.0.0.1 every.A.pl
127.0.0.1 subdomain.A.pl
127.0.0.1 needs-a-line.A.pl 
```

`ServerAlias`实际上，您不需要子域，只需要类似的“主”域。

你的`httpd-vhosts.conf`文件没问题。

为什么图像和帖子不起作用我不知道。这与这个主机文件没有任何关系。也许与另一个`.htaccess`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:29:26.400

您需要映射`NameVirtualHost`到 IP 地址 127.0.0.1 以映射多个虚拟主机。

例如：

```
NameVirtualHost 127.0.0.1
<VirtualHost 127.0.0.1>
    ServerName localhost
    DocumentRoot 'C:\wamp\www'
</VirtualHost>
<VirtualHost 127.0.0.1>
    ServerName myclient.local
    DocumentRoot 'C:\wamp\www\ClientsMyClient'
</VirtualHost> 
```

看看这个[教程](http://viralpatel.net/blogs/how-to-setup-multiple-virtual-hosts-in-wamp/)。

# excel - 为什么这个excel公式给我一个#name错误？

> ID：13977405
> 
> 赞同：0
> 
> 时间：2012-12-20T17:25:46.823
> 
> 标签：excel, excel-formula

这是我的excel公式：

```
=IF(ISNA,"0",(VLOOKUP(A2,Account_TS!A1:D312,4,FALSE))) 
```

注意：我查看了这个问题，它表明我的关键字错误，但我看不出那可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:27:06.527

`ISNA`实际上是一个函数，因此您需要向它传递一个值才能使其工作。

```
=IF(ISNA(A1), "Error", "No Error") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:30:45.417

我的猜测是您试图说以下内容：

```
=IF(ISNA(VLOOKUP(A2,Account_TS!A1:D312,4,FALSE)),"0",(VLOOKUP(A2,Account_TS!A1:D312,4,FALSE))) 
```

而且，如果您使用的是 Excel 2007 及更高版本，则可以按如下方式编写它：

```
=IFERROR(VLOOKUP(A2,Account_TS!A1:D312,4,FALSE),"0") 
```

希望这可以帮助

# java - 使用 Stripes，Show/Update/etc Action Beans 的最佳模式是什么？

> ID：13977413
> 
> 赞同：0
> 
> 时间：2012-12-20T17:26:02.237
> 
> 标签：java, stripes

我一直在努力解决这个问题。我想`ActionBean`对`show`和`update`动作使用相同的条纹。但是，我无法弄清楚如何以一种干净的方式来执行此操作，以允许当前用户对对象所有权进行可靠的绑定、验证和验证。

例如，假设我们的动作 bean 需要一个`postingId`. 该帖子属于已登录的用户。我们可能有这样的事情：

```
@UrlBinding("/posting/{postingId}")
@RolesAllowed({ "USER" })
public class PostingActionBean extends BaseActionBean 
```

现在，对于`show`动作，我们可以定义：

```
 private int postingId; // assume the parameter in @UrlBinding above was renamed
    private Posting posting; 
```

现在用于`@After(stages = LifecycleStage.BindingAndValidation)`获取`Posting`. 我们的`@After`函数可以验证当前登录的用户是否拥有该帖子。我们必须使用`@After`, not `@Before`，因为`postingId`不会事先绑定到参数。

但是，对于`update`函数，您希望使用, not将`Posting`对象绑定到 Posting 变量，以便将返回的表单条目应用到现有 Posting 对象之上，而不是应用到空存根上。`@Before``@After`

自定义`TypeConverter<T>`在这里可以很好地工作，但是由于无法从`TypeConverter`界面获得会话，因此很难在绑定期间验证对象的所有权。

我能看到的唯一解决方案是使用两个单独的操作 bean，一个用于显示，一个用于更新。但是，如果您这样做，则`<stripes:form>`标记及其下游标记将无法正确填充表单的值，因为`beanclass`or`action`标记必须映射回相同的`ActionBean`.

据我所知，Stripes 模型仅在操作简单（无 POJO）参数时才能保持在一起。在任何其他情况下，您似乎遇到了从数据存储中绑定对象并用客户端发送的更新覆盖它的问题 22。

我一定是错过了什么。经验丰富的 Stripes 用户的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:15:43.807

在我看来，授权与物体水合是正交的。我的意思是，您应该将对象水合（在这种情况下，使用 a`postingId`并将其转换为 a `Posting`）与确定用户是否有权对该对象执行操作（如显示、更新、删除等）分开.,)。

对于对象水合，我使用 a `TypeConverter<T>`，并且我在不考虑会话用户的情况下对对象进行水合。然后在我的内部，我`ActionBean`在二传手周围有一个警卫，因此...

```
public void setPosting(Posting posting) {
    if (accessible(posting)) this.posting = posting;
} 
```

哪里`accessible(posting)`看起来像这样......

```
private boolean accessible(Posting posting) {
    return authorisationChecker.isAuthorised(whoAmI(), posting);
} 
```

然后你的`show()`事件方法看起来像这样......

```
public Resolution show() {
    if (posting == null) return NOT_FOUND; 
    return new ForwardResolution("/WEB-INF/jsp/posting.jsp");
} 
```

另外，当我使用 Stripes 时，我经常在同一个 Stripes 中有多个事件（如“显示”或“更新”）`ActionBean`。对我来说，围绕相关名词对操作（动词）进行分组是有意义的。

使用干净的 URL，您的`ActionBean`注释将如下所示...

```
@UrlBinding("/posting/{$event}/{posting}")
@RolesAllowed({ "USER" })
public class PostingActionBean extends BaseActionBean 
```

...`{$event}`您的事件方法的名称在哪里（即“显示”或“更新”）。请注意，我使用的是`{posting}`，而不是`{postingId}`。

为了完整起见，您的`update()`事件方法可能如下所示......

```
public Resolution update() {
    if (posting == null) throw new UnauthorisedAccessException();
    postingService.saveOrUpdate(posting);
    message("posting.save.confirmation");
    return new RedirectResolution(PostingsAction.class);
} 
```

# windows-services - 什么时候适合将服务标记为不可停止？

> ID：13977417
> 
> 赞同：1
> 
> 时间：2012-12-20T17:26:10.663
> 
> 标签：windows-services

服务可以标记为“不可停止”：

*   [在 C/C++ 中，通过在调用SetServiceStatus](http://msdn.microsoft.com/en-us/library/ms686241%28VS.85%29.aspx)时指定`SERVICE_ACCEPT_STOP`标志（有关详细信息，请参阅[SERVICE_STATUS](http://msdn.microsoft.com/en-us/library/ms685996%28VS.85%29.aspx)）。

*   如果是 .NET，则将[ServiceBase.CanStop](http://msdn.microsoft.com/en-us/library/system.serviceprocess.servicebase.canstop.aspx)设置为`false`.

然而，这是一种好的做法吗？这意味着即使具有管理员权限的用户也无法以干净的方式停止此类服务。（仍然可以杀死它，但这会妨碍正确的清理。如果在同一进程中运行其他服务，它们也会被杀死。）

在我的具体情况下，我有一项控制科学仪器的服务。建议在从仪器获取数据时使服务不可停止，以防止丢失正在获取的数据。我应该补充一点：

*   我们授予非管理员用户启动/停止服务的权利
*   我们有提供 UI 来启动/停止此服务的程序。如果用户在获取过程中尝试停止服务，此程序将发出警告。但是，当然也可以使用`SC.EXE`“服务”管理单元停止。在这种情况下，没有警告。

Microsoft（或其他任何人）是否提供指导？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:26:10.663

到目前为止，我自己的立场是，将服务标记为不可停止是一种严厉的措施，应该谨慎使用。可接受的用途是：

*   在短时间内，保护不应中断的关键操作
*   对于对操作系统的操作或安全至关重要的服务

我的例子不属于这些标准，所以应该是可以停止的

# mysql - 在 phpmyadmin 存储过程脚本中出现错误

> ID：13977421
> 
> 赞同：0
> 
> 时间：2012-12-20T17:26:22.723
> 
> 标签：mysql, phpmyadmin

我在 phpmyadmin 中创建了一个存储过程，它获取事件类别列表。我正在使用的条件，我发送一个参数“e_range”，我根据我在这个参数 3、4 等上设置的范围来获取列表，但是在执行这个脚本时我得到一个错误： **#1064 - 你有SQL 语法错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'e_range; 附近使用的正确语法；else select category_id, category_name, category_thumb from category' 在第 4 行**

```
CREATE PROCEDURE `sp_category_list`(IN e_range int)
BEGIN
if(e_range != 0 or null) then
    select category_id, category_name, category_thumb from category_list order by category_name limit e_range;
else
    select category_id, category_name, category_thumb from category_list order by category_name;
END if;
END$$ 
```

**现在的问题是，这个脚本在我的 localhost 电脑上运行良好。但我在我的网络服务器 CPANEL 的 phpmyadmin 上遇到这些错误。** MySQL 关键字 'LIMIT' 没有通过参数获取值。或者可能不认识它。但是当我从选择命令中删除此参数并在此设置静态数字时，它将起作用：

```
select category_id, category_name, category_thumb from category_list order by category_name limit 5; 
```

现在程序是什么，所以我将通过给定的参数获取列表。

谢谢 ：）

# mysql - 搜索加密数据库

> ID：13977427
> 
> 赞同：0
> 
> 时间：2012-12-20T17:26:37.790
> 
> 标签：mysql, database, encryption

我有一个 MySQL 数据库表，其中包含大量需要可搜索的加密数据（使用不同密钥加密的不同子集）。如果用户经过身份验证并且有权访问某个子集（因此拥有加密数据的密钥），他们如何搜索表的子集？即不仅 WHERE `EncryptedKey =`，而且还有`EncryptedData LIKE`其他条件？

数据以以下格式存储：

```
+--------+----------+--------------+---------------+---------------+
| DataID | SubsetID | EncryptedKey | EncryptedData | EncryptedAttr |
+--------+----------+--------------+---------------+---------------+
| 1      | 1        | xxxxxxxxxxxx | xxxxxxxxxxxxx | xxxxxxxxxxxxx |
+--------+----------+--------------+---------------+---------------+
| 2      | 1        | xxxxxxxxxxxx | xxxxxxxxxxxxx | xxxxxxxxxxxxx |
+--------+----------+--------------+---------------+---------------+
| 3      | 1        | xxxxxxxxxxxx | xxxxxxxxxxxxx | xxxxxxxxxxxxx |
+--------+----------+--------------+---------------+---------------+
| 4      | 2        | xxxxxxxxxxxx | xxxxxxxxxxxxx | xxxxxxxxxxxxx |
+--------+----------+--------------+---------------+---------------+ 
```

我还没有决定加密套件，我正在考虑数据库服务器的本机套件。

# c++ - 数组索引时的枚举类性能

> ID：13977431
> 
> 赞同：3
> 
> 时间：2012-12-20T17:26:49.773
> 
> 标签：c++, performance, c++11, enums

我能期待看到这个 . .

```
enum class myEnum {A,B,C};
myArray[(int)myEnum::A] = 123; 
```

和这个比？

```
enum myEnum {A,B,C};
myArray[A] = 123; 
```

为了类型安全，我倾向于使用新样式的枚举类，但不想以牺牲性能为代价。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:32:53.200

这取决于用作索引的枚举值是在编译时已知还是在变量中传递。

这`myArray[(int)myEnum::A]`不会产生任何惩罚，但`myArray[(int)e]`可能会产生，具体取决于物理表示`e`（即，可能有必要“扩展”它）。

另一方面，一个简单的扩展是一个微不足道的操作，不太可能显示为性能问题：分支预测（在条件中）和缓存等事情在大多数应用程序（对于低级）中更为重要，并且在更高级别的算法很重要。

*注意：为了避免运行时场景中的扩展问题，您可以将基本类型定义`myEnum`为编译器算术预期的自然类型，我相信 a`ptrdiff_t`在这里最合适。虽然它是一个大整数。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:32:15.917

当然这最终取决于编译器，但是很难理解为什么任何合理的编译器会在这两种情况下生成不同的代码。

我已经在 Intel 上使用 g++ 4.7.2 对此进行了测试，它们编译为相同的汇编代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T17:30:48.943

不，选角不太可能对性能产生任何影响。这一切都在编译时解决。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T17:31:38.323

我不希望，但这取决于编译器的实现。你为什么不尝试这两种方法，并计时呢？也尝试一些不同的编译器优化设置，这样您就知道在生产代码编译时它不会有所不同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-20T17:32:00.063

我怀疑强制转换是否会有任何汇编指令，因为`(int)myEnum::A`可以在编译时评估整个表达式。

但是，如果您真的想知道，请制作一对示例程序，并通过倾倒反汇编和/或测量性能进行分析。

# ruby-on-rails-3 - Rails 3 Partial 不会通过 js.erb 渲染

> ID：13977435
> 
> 赞同：1
> 
> 时间：2012-12-20T17:26:57.760
> 
> 标签：ruby-on-rails-3, jquery

我在从控制器获取一些数据后尝试通过 js.erb 渲染部分内容时遇到问题。我已经尝试了很多不同的东西，我就是无法渲染部分。日志文件显示带有 200 OK 消息的部分呈现，但页面上没有任何反应。这篇文章与我遇到的问题类似：

[Rails 3 - 渲染部分 js.erb](https://stackoverflow.com/questions/5325382/rails-3-render-partial-js-erb)

我试图按照这篇文章的指导进行操作，但我仍然遇到问题。

这是我的部分表格 _ **_left_date_filter.html.erb** =>

```
 <%= form_tag({:controller => 'events', :action => 'dateFilter'}, :class => 'date_form', :remote => true) do %>
    <%= datepicker_input "event", :start_date, :class => 'dateFilter', :dateFormat => 'mm/dd/y' %>
    <%= datepicker_input "event", :end_date, :class => 'dateFilter', :dateFormat => 'mm/dd/y' %>
    <%= submit_tag "Submit" %>
    <% end %> 
```

这是生成的**HTML** =>

```
 <form accept-charset="UTF-8" action="/events/dateFilter" class="date_form" data-remote="true" method="post">
    <div style="margin:0;padding:0;display:inline">
    <input name="utf8" type="hidden" value="&#x2713;" />
    <input name="authenticity_token" type="hidden" value="x4cbSoYnUu2+W6qvtPnKXvXR8Tp3Yh7BP9W0RMyR02g=" /></div>
    <input class="dateFilter" id="event_start_date" name="event[start_date]" size="30" type="text" /><script type="text/javascript">

    //<![CDATA[
    jQuery(document).ready(function(){jQuery('#event_start_date').datepicker({"dateFormat":"mm/dd/y"})});
    //]]>
    </script>
   <input class="dateFilter" id="event_end_date" name="event[end_date]" size="30" type="text" /><script type="text/javascript">
   //<![CDATA[
   jQuery(document).ready(function(){jQuery('#event_end_date').datepicker({"dateFormat":"mm/dd/y"})});
   //]]>
</script>
    <input name="commit" type="submit" value="Submit" /> 
```

这是**dateFilter.js.erb** =>

```
$('#content').html("<%= escape_javascript(render(:partial => 'dateFilter')) %>"); 
```

这是**events_controller** =>

```
 def dateFilter

   eventIn = params[:event]
   start_date = Date.parse(eventIn[:start_date])
   end_date = Date.parse(eventIn[:end_date])
   sql = *redacted*

   @events = Event.find_by_sql(sql)

   respond_to do |format|
      format.html
      format.json
      format.js
  end
end 
```

这是**application.js** =>

```
$(document).ready(function() {

  $('#date_form').submit(function (){  

    $.ajax({
     type: 'POST',
     url: "/events/dateFilter", 
     beforeSend: function (xhr) {xhr.setRequestHeader("Accept", "text/javascript");},
     data: { 'start_date' : $("input[name='event[start_date]']").datepicker(), 'end_date' : $("input[name='event[end_date]']").datepicker()}
     success: function(data) { $('#content').html(response); }
    });

 }); 
```

这是来自服务器的**日志数据**=>

```
 Started POST "/events/dateFilter" for 127.0.0.1 at 2012-12-20 12:18:57 -0500
    Processing by EventsController#dateFilter as JS
    Parameters: {"utf8"=>"✓", "authenticity_token"=>"x4cbSoYnUu2+W6qvtPnKXvXR8Tp3Yh7BP9W0RMyR02g=", "event"=>{"start_date"=>"07/01/12", "end_date"=>"07/02/12"}, "commit"=>"Submit"}

     **shows SQL Statement getting all records**

    Rendered events/_dateFilter.html.erb (89.1ms)
    Rendered events/dateFilter.js.erb (90.7ms)
    Completed 200 OK in 212ms (Views: 80.5ms | ActiveRecord: 128.2ms) 
```

最后，我希望呈现的页面 _dateFilter.html.erb =>

```
<div class="content">
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th><%= sortable  "event_id" %></th>
      <th><%= link_to "Time Created", :sort => "event_date_time_local" %></th>
      <th><%= link_to model_class.human_attribute_name(:event_type_id), :sort => "event_type" %></th>
      <th><%= link_to model_class.human_attribute_name(:severity_id), :sort => "severity_name" %></th>
      <th><%= link_to "Examined", :sort => "event_examined" %></th>
      <th><%= link_to model_class.human_attribute_name(:action_required), :sort => "action_required" %></th>
      <%#<th><%= model_class.human_attribute_name(:comments) </th>%>
      <th><%= link_to model_class.human_attribute_name(:initials), :sort => "initials" %></th>
      <th><%= link_to "Ticket ID", :sort => "taskid" %></th>
    </tr>
  </thead>
</div> 
```

我只是不确定为什么它告诉我它正确呈现了部分，但是我的页面上没有任何反应。我对 JQuery 不是很熟悉，所以我的 application.js 或 datefilter.js.erb 文件中可能有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:38:05.080

一些东西：

*   如果`ajax`您`:remote => true`在`form_tag`. JQuery 将自动处理对 Rails 的调用。您应该能够注释掉`application.js`.
*   确保您`id="content"`的 HTML 中已经有一个 div。
*   目前尚不清楚您在`_dateFilter.html.erb`. 你可以从一个简单的部分开始，看看它是否有效，然后你可以开始`@events`从控制器传递的变量中添加细节：

.

```
<div class="content">
 <table>
    <thead>
       <tr>
          <th>Test</th>
       </tr>
    </thead>
 </table>
</div> 
```

# php - PHP不搜索包含路径

> ID：13977436
> 
> 赞同：0
> 
> 时间：2012-12-20T17:26:58.197
> 
> 标签：php

我觉得自己像个白痴，但我不知道出了什么问题，而且我尝试过的每个解决方案（如下所列）都失败了。

问题：

这不起作用：

```
$settings = file_get_contents('settings'); \\ should search current directory 
```

该文件位于何处？

```
/apps/foxyman/model/settings 
```

我试过的：

1.  将 include_path 指令更改`php.ini`为：

    *.:/apps/foxyman*

    然后**重新启动 Apache**。是的，我确实运行`phpinfo();`并验证它是否已设置。

2.  将 doc_root 指令更改为相同的内容`php.ini`并**重新启动 Apache。**

3.  将右侧 httpd.conf 文件中的文档根设置更改为：`DocumentRoot "/apps/foxyman"`

4.  `$settings = file_get_contents('model/settings'); // should search include_path`

而这些都不起作用。

是的，我知道可能有其他解决方案涉及我在每个文件中设置包含路径，但我不想这样做 - 我想解决一次，不再考虑它。

对我来说，也许我只是个白痴（你应该随时告诉我在评论中自杀，让我知道），但 php 在当前目录中找不到文件似乎很荒谬AND 似乎没有搜索我设置的包含路径。在你问之前，是的，该文件确实存在。

还有一件事，这是以下方法的输出：

```
echo getcwd();
echo get_include_path();
echo $_SERVER['DOCUMENT_ROOT'];

/apps/foxyman/model
.:/apps/foxyman
/apps/foxyman 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:31:38.223

默认情况下[file_get_contents()](http://br2.php.net/file_get_contents)不**使用**包含路径！如果您希望它`true`在第二个参数中使用包含路径传递。

```
$settings = file_get_contents('settings', true); 
```

# javascript - 当只存在一个对象时，jquery 返回两个对象

> ID：13977445
> 
> 赞同：0
> 
> 时间：2012-12-20T17:27:31.503
> 
> 标签：javascript, jquery

给定这个 HTML，

```
<div id="dd_container" class="dd dd_container">
 <ul class="dd_deploy">
   <li class="dd_deploy">
     more options
   </li>
  </ul>
 <ul class="dd">
   <li class="dd">
     el1
   </li>
   <li class="dd">
     el2
   </li>
   <li class="dd">
     el3
   </li>   
 </ul>
</div>​ 
```

为什么这个 jquery 函数会打印到控制台两次？

```
$(document).on('click','.dd_deploy', function(){
    console.log($(this).parents('.dd_container').children('ul.dd'));
});​ 
```

[http://jsfiddle.net/mBPfG/](http://jsfiddle.net/mBPfG/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T17:29:05.667

因为您有 2 个`.dd_deploy`元素，一个嵌套在另一个元素中，所以事件正在冒泡。

```
<ul class="dd_deploy">
    <li class="dd_deploy">
        more options
    </li>
</ul> 
```

如果要使用此 HTML 结构，您可以使用它`event.stopPropagation`来防止事件冒泡，如下所示：

```
$(document).on('click','.dd_deploy', function(e){
    e.stopPropagation();
    console.log($(this).parents('.dd_container').children('ul.dd'));
});​ 
```

另请注意，`$(document)`作为委托事件处理程序的主要选择器并不是性能的理想选择。而不是`document`使用未动态附加到 DOM 的最近元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:28:35.247

因为事件正在冒泡`<li>`到`<ul>`.

看我的[修改](http://jsfiddle.net/mBPfG/)：

```
$(document).on('click','.dd_deploy', function(event){
    console.log(event.target)
});​ 
```

它将打印`<li>`元素，然后是`<ul>`元素。

为了防止这种情况，您需要您的事件处理程序`return false`或者调用`event.stopPropagation()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:28:53.263

```
$(document).on('click','.dd_deploy', function(e){
    e.stopPropagation(); //stops the bubbling
    console.log($(this).parents('.dd_container').children('ul.dd'));
});​ 
```

# android - 唤醒 Android 手机/平板电脑？

> ID：13977448
> 
> 赞同：5
> 
> 时间：2012-12-20T17:27:39.583
> 
> 标签：android, push-notification, push, wakelock, wakeup

我有一个推送通知应用程序，有什么方法可以在我收到推送通知时唤醒屏幕（让它亮起来）？

如果您想要一些代码，请告诉我！并感谢您的回答！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-20T17:44:05.640

您可以使用`WakeLock`以下方式执行此操作：

当您设置通知时：

```
WakeLock screenOn = ((PowerManager)getSystemService(POWER_SERVICE)).newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "example");
screenOn.acquire(); 
```

而且，*重要*的是，当您不再需要它时释放唤醒锁：

```
screenOn.release(); 
```

# jsf-2 - JSF2 @ViewScoped bean 永远不会被破坏

> ID：13977450
> 
> 赞同：1
> 
> 时间：2012-12-20T17:27:41.300
> 
> 标签：jsf-2, memory-leaks, mojarra

我已经花了 3 天时间寻找可能的解决方法，所以我的 ViewScoped bean 不会导致 OutOfMemoryException，但没有任何运气。

首先是我的环境：JBoss AS 7.1.1.final 和 Mojarra 2.1.7

我认为，ViewScoped bean 会在会话到期时被销毁，但它们不会被销毁（通过堆转储检查）。我为 Mojarra 2.1.16 找到了以下新功能，它解决了这个问题，但遗憾的是，目前不能选择升级到这个版本：http: [//java.net/jira/browse/JAVASERVERFACES-2561](http://java.net/jira/browse/JAVASERVERFACES-2561)

此问题还与以下线程有关： [Destroying view-scoped beans when session ends](https://stackoverflow.com/questions/13082379/destroying-view-scoped-beans-when-session-ends)

当会话结束（注销或会话过期）时，我能做些什么来删除所有创建的 ViewScoped bean？将 viewMap 保存在 SessionScoped bean 中并调用 clear() 也不会破坏这些 bean。

提前致谢，

丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:49:41.137

为了确定这个错误，我将我的代码剥离到以下部分：

一个非常简单的 JSF2 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <f:facet name="first">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
            <title>Simple OOM Check</title>
        </f:facet>
    </h:head>
    <h:body>
        <h:outputText value="#{oomCheckBean.testString}"/>
    </h:body>
</html> 
```

以及使用的@ViewScoped bean oomCheckBean：

```
@ViewScoped
@ManagedBean(name = "oomCheckBean")
public class OomCheckBean implements Serializable {
    private static final long serialVersionUID = 6325712415478215045L;

    private String testString;

    @PostConstruct
    public void init() {
        testString = "Hello World";
        System.out.println("I will survive ....");
    }

    @PreDestroy
    public void destroy() {
        System.out.println("... klaaatsch!");
    }

    /**
     * @return the testString
     */
    public String getTestString() {
        return testString;
    }

    /**
     * @param testString the testString to set
     */
    public void setTestString(String testString) {
        this.testString = testString;
    }
} 
```

在此之后，我将我的 JMeter 测试用例更改为登录，调用此 oomCheck.xhtml 页面并注销。不久之后，我停止了测试执行，并使用 JMX 首先手动调用垃圾收集器（*java.lang.Memory --> Operations --> gc()*）。在此之后，我调用方法来创建堆转储（*com.sun.management.HotSpotDiagnostic --> Operations --> dumpHeap()*）。

结果就像我在问题中提到的那样，内存中有很多 OomCheckBean 对象。所有者对象是`org/jboss/as/web/deployment/ConcurrentReferenceHashMap$HashEntry`。任何解决此问题的帮助表示赞赏。就像我上面提到的，如果 JSF 版本升级到 2.1.16，这些 @ViewScoped bean 将被销毁，留下其他“错误”，如缺少 doctype 和 AJAX 问题。因此，如果有人知道如何在会话无效时销毁 @ViewScoped bean，我会很高兴。

# android - Galaxy Nexus 上的 AdMob - Android 应用自行关闭

> ID：13977452
> 
> 赞同：1
> 
> 时间：2012-12-20T17:27:45.790
> 
> 标签：android, admob, galaxy, forceclose

我编写了一个简单的应用程序来测试一些东西。一件事是 AdMob。

在大多数 Android 手机上它都可以工作，但在 Galaxy S3 或 Galaxy Nexus 上，或者在平板电脑上不行。也许更高的分辨率有问题？问题是应用程序在启动时立即关闭。我尝试将 AdMob 集成到 XML 上，但这确实不适用于新版本。

这是我的 AdMob 代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    AdRequest adRequest = new AdRequest();
    adRequest.addTestDevice(AdRequest.TEST_EMULATOR);
    AdView adView = new AdView(this, AdSize.BANNER, "replaced id with this");
    //adView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
    LinearLayout layout = (LinearLayout)findViewById(R.id.LayoutMain);
    layout.addView(adView,0);   
    adView.loadAd(adRequest); 
```

这是 LogCat

```
12-20 18:39:18.056: I/dalvikvm(541):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-20 18:39:18.066: I/dalvikvm(541):   at dalvik.system.NativeStart.main(Native Method)
12-20 18:39:18.086: D/AndroidRuntime(541): Shutting down VM
12-20 18:39:18.096: W/dalvikvm(541): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-20 18:39:18.206: E/AndroidRuntime(541): FATAL EXCEPTION: main
12-20 18:39:18.206: E/AndroidRuntime(541): java.lang.RuntimeException: Unable to start activity ComponentInfo{at.android.dertestloerk/at.android.dertestloerk.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.os.Looper.loop(Looper.java:137)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.ActivityThread.main(ActivityThread.java:4340)
12-20 18:39:18.206: E/AndroidRuntime(541):  at java.lang.reflect.Method.invokeNative(Native Method)
12-20 18:39:18.206: E/AndroidRuntime(541):  at java.lang.reflect.Method.invoke(Method.java:511)
12-20 18:39:18.206: E/AndroidRuntime(541):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-20 18:39:18.206: E/AndroidRuntime(541):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-20 18:39:18.206: E/AndroidRuntime(541):  at dalvik.system.NativeStart.main(Native Method)
12-20 18:39:18.206: E/AndroidRuntime(541): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class android.widget.RelativeLayout
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
12-20 18:39:18.206: E/AndroidRuntime(541):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-20 18:39:18.206: E/AndroidRuntime(541):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.Activity.setContentView(Activity.java:1835)
12-20 18:39:18.206: E/AndroidRuntime(541):  at at.android.dertestloerk.MainActivity.onCreate(MainActivity.java:27)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.Activity.performCreate(Activity.java:4465)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
12-20 18:39:18.206: E/AndroidRuntime(541):  ... 11 more
12-20 18:39:18.206: E/AndroidRuntime(541): Caused by: java.lang.reflect.InvocationTargetException
12-20 18:39:18.206: E/AndroidRuntime(541):  at java.lang.reflect.Constructor.constructNative(Native Method)
12-20 18:39:18.206: E/AndroidRuntime(541):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
12-20 18:39:18.206: E/AndroidRuntime(541):  ... 23 more
12-20 18:39:18.206: E/AndroidRuntime(541): Caused by: java.lang.OutOfMemoryError
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.Bitmap.nativeCreate(Native Method)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.content.res.Resources.loadDrawable(Resources.java:1937)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.View.<init>(View.java:2780)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.View.<init>(View.java:2717)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.view.ViewGroup.<init>(ViewGroup.java:379)
12-20 18:39:18.206: E/AndroidRuntime(541):  at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
12-20 18:39:18.206: E/AndroidRuntime(541):  ... 26 more
12-20 18:39:23.096: I/Process(541): Sending signal. PID: 541 SIG: 9 
```

这是我的 XML 布局

```
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LayoutMain"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/hintergrund"
android:orientation="vertical"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageViewLoerg"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitCenter"
    android:src="@drawable/animatedloerg"
    tools:ignore="ContentDescription" /> </LinearLayout> 
```

希望你能帮忙.-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:14:28.300

这与 Admob 无关。错误在：

18:39:18.206：E/AndroidRuntime(541)：原因：android.view.InflateException：二进制 XML 文件第 1 行：错误膨胀类 android.widget.RelativeLayout 12-20 18:39:18.206：E/AndroidRuntime( 541): 在

即，在您以编程方式在 Admob AdView 中投放广告之前很久，尝试加载 XML 布局就会崩溃。

看看你的布局，那里有问题。

# linq-to-excel - LinqToExcel 外部表不是预期的格式

> ID：13977453
> 
> 赞同：3
> 
> 时间：2012-12-20T17:27:47.103
> 
> 标签：linq-to-excel

我一直在使用 LinqToExcel 来解析一个 exel 文档，但突然它停止工作了。

我收到以下错误：

> 外部表不是预期的格式。

任何想法为什么会发生这种情况？或者如何修复？

```
 if (File.Exists(filenameFull))
            {
                var excel = new ExcelQueryFactory(filenameFull);

                IList<Row> scanningRangesRows = 
                        excel.Worksheet("B - Scanning Ranges").ToList(); 
```

我使用的是 LinqToExcel 1.6.3 版本，当问题开始发生时，我更新到最新版本的 LinqToExcel 1.6.6 无济于事。

我刚刚注意到我正在下载的文件比以前的版本要小得多。我在记事本中打开它，我可以在二进制数据中看到**[Content_Types].xml 。**因此，数据源现在似乎被保存为具有相同扩展名的 xls 文件的 xml 表示形式。当我在 Excel 中手动打开同一个文件时，它会弹出

> 您尝试打开的文件 '' 的格式与文件扩展名指定的格式不同。在打开文件之前验证文件是否来自受信任的来源。您现在要打开文件吗？

单击“是”后，文件仍会打开并且看起来与以前的版本相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T19:54:02.390

这可能与文件有关。

也许它被保存为 .xlsx 类型的文件。您可以尝试将文件扩展名重命名为 .xlsx 并查看是否有效。

# php - 使用 Symfony 扩展的动态包

> ID：13977455
> 
> 赞同：0
> 
> 时间：2012-12-20T17:27:52.813
> 
> 标签：php, class, symfony, bundle, extend

我需要使用 Synfony 创建一个网站，该网站具有核心功能和针对特定客户的多项附加功能。从这里开始，没有什么太复杂的了：每个客户端都有自己的 Bundle 来扩展核心包。

问题是：我想处理多个版本的 Core Bundle（即当前版本、下一个稳定版本和 beta 版本），并且我希望客户能够选择他只使用*cookie*使用的核心版本（两个人来自同一个客户端可以使用两个不同的核心包版本）。

我的问题是：是否可以使用 Symfony 动态扩展类和捆绑（这里，取决于 cookie）？更一般地说：我可以使用哪种方法来实现我所描述的？

我想使用 APC（所以没有`eval`或类似的东西）

谢谢

# java - 如果有两个 catch 语句，一个有异常，另一个有算术异常，这将因算术异常而撤销

> ID：13977459
> 
> 赞同：-5
> 
> 时间：2012-12-20T17:28:01.157
> 
> 标签：java

如果有两个“catch 语句”，即一个具有一般异常，另一个具有算术异常，将在 try 块中为算术异常调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:33:11.457

这很容易验证：

```
try {
    int x = 0;
    x = 1 / x;
} catch (ArithmeticException e) {
    System.err.println("ArithmeticException");
} catch (Exception ee) {
    System.err.println("Another kind of Exception");   
} 
```

以上[印刷品](http://ideone.com/mWMMW6) `ArithmeticException`

这正是预期会发生的事情：Java 将在继续继承链之前尝试捕获更具体的异常。

# excel - 比较三列并输出重复实例

> ID：13977464
> 
> 赞同：1
> 
> 时间：2012-12-20T17:28:13.737
> 
> 标签：excel

我有三列，每列包含一个电子邮件地址列表，这些地址在连续三个电子邮件发送中未打开。

我想要第四列输出出现在三列中的任何电子邮件地址。在 Excel(2007) 中实现这一目标的最简单方法是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:04:28.573

我认为可能有更好的方法，但是您可以尝试的（非常）简单/快速的事情是首先找到哪一列最长（唯一值最长 - 所以如果有重复，您需要考虑这一点）。然后，在第四列（称它为`D`，其他为`A:C`），您可以执行以下操作：

```
=IF(SUM(IF(COUNTIF(B:B,A1)>0,1,0), IF(COUNTIF(C:C,A1)>0,1,0))=2,A1,"") 
```

这将显示所有三个列表中出现的所有电子邮件（请注意，这将包括空格，因此您必须过滤结果）。这样做的逻辑是，最长的唯一电子邮件列表包含整个可能的样本空间；从那里，您知道如果其中一个值出现在其他两个列表中，则它在所有三个列表中都表示。

![在此处输入图像描述](../Images/e92c1a142ef75e421073f355cd6bc1e0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:03:06.017

如果您想检查一封电子邮件是否出现在该行中的多列中，您可以使用：

```
=IF(A1 = B1, A1, IF(B1 = C1, B1, IF(A1 = C1, A1, ""))) 
```

如果要测试电子邮件是否出现在所有三列中，请使用：

```
=IF(AND(A1=B1, A1=C1),A1,"") 
```

# vba - 根据填充颜色索引删除行

> ID：13977465
> 
> 赞同：2
> 
> 时间：2012-12-20T17:28:15.713
> 
> 标签：vba, excel

我正在尝试删除`A7:AI300`包含黄色填充单元格的所有行（颜色索引 6）我有一些代码将删除所有包含颜色的行但我遇到的问题是它正在尝试运行整个工作表的代码，并将冻结我的工作簿。我正在尝试插入一个范围以加快计算速度。谁能告诉我如何插入范围以使其工作

```
Sub deleterow()
   Dim cell As Range
   For Each cell In Selection
       If cell.Interior.ColorIndex = 6 Then
           cell.EntireRow.Delete
       End If
   Next cell
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:33:22.683

这是你正在尝试的吗？请注意，我们并没有删除循环内的每一行，而是创建了最终的“删除范围”，这将确保您的代码运行得更快。

**编辑**：如果您正在查看范围，请`"A7:A300"`使用此代码

```
Sub deleterow()
   Dim cell As Range, DelRange As Range

   For Each cell In ThisWorkbook.Sheets("Sheet1").Range("A7:A300")
       If cell.Interior.ColorIndex = 6 Then
           If DelRange Is Nothing Then
               Set DelRange = cell
           Else
               Set DelRange = Union(DelRange, cell)
           End If
       End If
   Next cell

   If Not DelRange Is Nothing Then DelRange.EntireRow.Delete
End Sub 
```

如果您正在查看范围，`"A7:AI300"`那么我想这就是您想要的。

```
Sub deleterow()
   Dim cell As Range, DelRange As Range

   For Each cell In ThisWorkbook.Sheets("Sheet1").Range("A7:AI300")
       If cell.Interior.ColorIndex = 6 Then
           If DelRange Is Nothing Then
               Set DelRange = cell
           Else
               Set DelRange = Union(DelRange, cell)
           End If
       End If
   Next cell

   If Not DelRange Is Nothing Then DelRange.Delete
End Sub 
```

**更多跟进**

我想我可能终于明白了你想要达到的目标......

```
Sub deleterow()
    Dim i As Long, j As Long
    Dim delRange As Range

    With ThisWorkbook.Sheets("Sheet1")
        For i = 7 To 300 '<~~ Row 7 to 300
            For j = 1 To 35 <~~ Col A to AI
                If .Cells(i, j).Interior.ColorIndex = 6 Then
                    If delRange Is Nothing Then
                        Set delRange = .Cells(i, j)
                    Else
                        Set delRange = Union(delRange, .Cells(i, j))
                    End If
                    Exit For
                End If
            Next j
        Next i
    End With

    If Not delRange Is Nothing Then delRange.EntireRow.Delete
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:33:55.917

这是你可以做的。将计算置于手动模式。设置您需要删除的范围，而不是`selecting`...

```
Sub deleterow()
     Dim myRange as Range
     Dim cell As Range

     Application.Calculation = xlCalculationManual
     Set myRange = Worksheets(1).Range("A1:A300") '-- just column A would do

     For Each cell In myRange
        If cell.Interior.ColorIndex = 6 Then
          cell.EntireRow.Delete
        End If
     Next cell

     Application.Calculation = xlCalculationAutomatic
 End Sub 
```

# php - 删除记录和所有关联记录，即使没有关联记录

> ID：13977469
> 
> 赞同：1
> 
> 时间：2012-12-20T17:28:23.703
> 
> 标签：php, mysql

所以我有这个应用程序，用户可以在其中创建费用报告。每个报告都有很多收据，我需要能够让用户删除他们的报告以及相关的收据。我现在有一个 sql 语句可以做到这一点，但它只有在报告有收据时才有效，所以如果它没有收据，则报告不会被删除：

```
 mysql_query("DELETE expense_general, expense_receipts FROM expense_general JOIN expense_receipts ON expense_general.id = expense_receipts.expense_general_id WHERE expense_general.id = {$expenseID}"); 
```

$expenseID 是报告记录 ID 号。所以我是否得到声明以删除没有收据的报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:33:48.103

使用`LEFT JOIN`查询，即

```
DELETE expense_general, expense_receipts 
FROM expense_general 
LEFT JOIN expense_receipts ON expense_general.id = expense_receipts.expense_general_id 
WHERE expense_general.id = {$expenseID} 
```

这将在`expense_general`表上匹配，无论表中是否有任何链接`expense_receipts`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:33:48.333

您需要在表之间定义“外键关系”。明细表`expense_receipts`将与 有外键关系`expense_general`，当您从中删除行时`expense_general`，相应的明细行也会被删除。

谷歌搜索“mysql外键”应该会给你很多教程可供选择。

# ruby-on-rails - NOT IN 组合的表示

> ID：13977476
> 
> 赞同：0
> 
> 时间：2012-12-20T17:28:41.517
> 
> 标签：ruby-on-rails, ruby, arel, squeel

我想使用 squeel 来构建查询，例如：

```
SELECT * from `table`
WHERE (`field1`, `field2`)
NOT IN (
  (1,"value_a"),
  (2,"value_b"),
  (3,"value_a"),
  ...
) 
```

`IN`我想知道是否有任何方法可以通过or`NOT IN`语句将多个字段与数组进行比较。

这样的事情（我知道这个例子不起作用）将是表达我的意思的好方法：

```
array = [[1,"value_a"], [2,"value_b"], [3, "value_a"]]
Table.where{ (field1 & filed2).not_in array } 
```

这样的事情可能吗？

## 更新

我知道如何使用 multiple 获得相同的最终结果`... & (a != b) & (c != d) & ...`，但这不是我所要求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:21:01.167

也许这样？

```
Product.where{
  (title != 'foo') & (description != 'bar') |
  (title != 'baz') & (description != 'xyz')
} 
```

## 更新

如果您已经有一个包含要排除的值的数组，则可以创建这样的范围：

```
scope :without_title_and_description, lambda{|array| 
  where{array.map{|c1,c2| (title != c1) & (description != c2)}.inject(:|)} 
} 
```

并使用它：

```
array = [[1,"value_a"], [2,"value_b"], [3, "value_a"]]
Product.without_title_and_description(array) 
```

产生：

```
 Product Load (1.0ms)  SELECT "products".* FROM "products" WHERE (((("products"
."title" != 1 AND "products"."description" != 'value_a') OR ("products"."title"
!= 2 AND "products"."description" != 'value_b')) OR ("products"."title" != 3 AND
 "products"."description" != 'value_a'))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:33:18.720

主要问题是，虽然 Arel（以及 Squeel）支持一些相当复杂的查询，但没有涵盖这种级别的查询复杂性。考虑到这一点，除了使用此功能扩展 Arel 本身之外，恢复到 SQL 并手动构建所需的查询是唯一的解决方案。

```
existing_compound_ids = [[1,"value_a"],[2,"value_b"],[3, "value_a"]]

compound_collection = existing_compound_ids.inject([]) do |aftermath, member|
  aftermath << "('#{ member[0] }','#{ member[1] }')"
end.join(",")

Table.where("(`tables`.`field1`, `tables`.field2) NOT IN (#{compound_collection})") 
```

将构造以下 SQL：

```
SELECT `tables`.* from `tables` WHERE ((field1, field2)
NOT IN (('1','value_a'),('2','value_b'),('3','value_a'))) 
```

我很想看到更好或更优雅的解决方案，但我还没有找到一个。

# mvvm - 如何在 ViewModel (MVVM) 中获取控件的句柄

> ID：13977481
> 
> 赞同：0
> 
> 时间：2012-12-20T17:29:01.643
> 
> 标签：mvvm

我是 MVVM 的新手，在以下情况下需要帮助。

我在视图上添加了一个堆栈面板，现在我必须通过 viewmodel 向这个堆栈面板动态添加一些控件。为此，我需要在我的视图模型中处理堆栈面板。谁能指导我如何在我的视图模型中访问堆栈面板。

我在其他博客中读到它可以通过使用 Dependency 属性来完成。但我仍然无法找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T21:23:06.430

首先要注意几点。MVVM 模式中 ViewModel 的目的是提供与 View 的分离。因此，您的 ViewModel 应该不了解 View 本身，也不了解 View 中包含的控件。其次，您应该尝试做的是让您的 View 绑定到您的 ViewModel 的一个属性（理解您的 ViewModel 充当您的 View 的 DataContext）。通常，您会将控件的 ItemsSource 属性绑定到 ViewModel 中的某个集合。但是，您会注意到 StackPanel 没有实现 ItemsSource 依赖项属性。相反，使用 ItemsControl 代替 StackPanel。我建议对 MVVM 模式和绑定机制进行一些额外的阅读，以进一步澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T08:30:59.817

完全同意 Backlash，看来你的 ViewModel 和你的 View 耦合太多了；网上有很多资源，但这里有一些我比较喜欢：

*   [Jason Dolinger 在 MVVM 上的演示视频](http://www.lab49.com/wp-content/uploads/2011/12/Jason_Dolinger_MVVM.wmv)
*   [John Smith 介绍 MVVM 的文章](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T21:07:29.743

谢谢大家的帮助，我解决了这个问题

在视图模型中，我创建了 FrameWorkElement 类型的 ObservableCollection，它可以包含将在运行时决定的任何其他控件。控件可以是文本框或按钮。

```
 Public  ObservableCollection < FrameWorkElement > Test
 {
        get{....} set{...}
 } 
```

现在我可以添加/设置任何其他控件来测试

```
 Tets.Add(new TextBox()); Or Button , this will be decided at runtime. 
```

现在将此“测试”绑定到 ItemsControl。

```
 <ItemsControl x:Name="itemsControl" ItemsSource={Biding Test}>
 </ItemsControl> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T16:38:09.140

我以前用用户控件做过这个。我有一组对象，我需要动态地控制 StackPanel 中的控件。您也可以使用任何控件来执行此操作...在此示例中我将使用 TextBlock。

使用要包装在堆栈面板中的控件创建数据模板：（MyText 是集合对象中的一个属性...见下文）

```
<DataTemplate x:Key="MyTemplate">
   <Grid Margin="0">
       <StackPanel>     
         <TextBlock Text="{Binding Path=MyText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"> 
        </TextBlock>
      </StackPanel>
   </Grid>
</DataTemplate> 
```

然后关键是使用 ItemsControl 绑定到对象集合：（集合在您的 viewModel 上）

```
<ItemsControl   
 ItemsSource="{Binding ACollection, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}"
 ItemTemplate=" {StaticResource MyTemplate}" Background="Transparent">
</ItemsControl> 
```

因此，例如，如果“ACollection”中有 3 个项目，则将有 3 个 TextBlocks 堆叠在一起，如果集合中有 5 个，则将有 5 个 TextBlocks 等。

# php - 确定当前域字符长度

> ID：13977482
> 
> 赞同：0
> 
> 时间：2012-12-20T17:29:02.437
> 
> 标签：php, strlen, parse-url

我正在解析域并遇到处理子域的问题。如果域是[http://www.google.co.uk](http://www.google.co.uk)，我想获取它的长度`google`是 6。

在这种情况下，我正在使用`parse_url()`返回主机 www.google.co.uk 像这样。

```
$url    = 'http://www.google.co.uk';    
$info   = parse_url($url);    
// remove www. and return google.co.uk
$new    = str_replace('www.','',$info['host']); 
$pieces = explode(".", $new); 
$len    = strlen($pieces[0]); // returns character length of google = 6
echo $len; 
```

[如果域包含像http://test.google.co.uk](http://test.google.co.uk)这样的子域，我的代码将不起作用：它返回的长度为 4；我希望它返回 6 的长度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:58:07.397

除了收集和硬编码所有已知的公共二级区域（如`co.u`k、`com.ua`等`co.tw`）并在您的代码中过滤它们之外，别无他法。请注意将两者都检测`test.example.ua`为有效域（这不是区域的情况）。`test``example.com.ua``example.ua``uk`

您的代码可能如下所示：

```
function mainDomainLength($fullDomain) {
    //$fullDomain = 'DOMAIN.co.uk';
    $zones = array('uk' => array('co'), 'ua' => array('com', 'org'), ...);
    $domainArray = explode('.', $fullDomain);
    if (count($domain) > 2 && isset($zones[$domain[count($domain)-1]])) {
        if (isset($zones[$domain[count($domain)-1]][$domain[count($domain)-2]])) {
            return strlen($domain[count($domain)-3]);
        }
    } else if (count($domain) > 1) {
        return strlen($domain[1]);
    } else {
        return strlen($domain[0]);
    }
} 
```

**编辑：**顺便说一句！查看[Get the second level domain of an URL (java)](https://stackoverflow.com/questions/1923815/get-the-second-level-domain-of-an-url-java)。据我所知，有您需要的答案（以及Mozilla 收集的[特殊域集合的 url）。](http://mxr.mozilla.org/mozilla-central/source/netwerk/dns/effective_tld_names.dat?raw=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:55:45.847

输出正确。当输入`http://test.google.co.uk`值为`parse_url('http://test.google.co.uk')['host']`时`http://test.google.co.uk`。当您将在数组的第一个点上展开此字符串时`test`，其长度为 4。

要`google`代替您，`test`您需要像在第一个示例中所做的那样将子域替换为任何内容，或者使用分解字符串中的第二个元素。例如：

```
$url    = 'http://test.google.co.uk';    
$info   = parse_url($url);    
$pieces = explode(".", $info['host']); 
$len    = strlen($pieces[1]); // returns character length of google = 6
echo $len; 
```

# c++ - GNU pth 与 pthread

> ID：13977488
> 
> 赞同：3
> 
> 时间：2012-12-20T17:29:30.877
> 
> 标签：c++, multithreading

我想用 C++ 构建一个可移植且高效的服务器；它将有很多客户端尝试同时连接，因此它必须能够并行处理每个请求。

我一直在尝试为多线程查找文档、指南……等。我发现了很多关于 POSIX Pthread 的信息，但对于 GNU Pth 几乎一无所获（除了 gnu.org 中的官方手册）。

那么，谁能解释一下 POSIX Pthread 和 GNU Pth 之间的区别？拜托，我希望回复不是维基百科内容的副本（请记住，我是多线程的绝对新手）。我希望我的服务器在所有基于 *nix 的系统之间具有可移植性和高效性，避免使用繁重的 fork()。

谢谢你的帮助。

PS：我认为最好在这里问这个：Windows 呢？那里有 Pthreads 或 Pth 的选项吗？如果不是，该操作系统的 API 是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:40:05.947

使用 Pthreads，它使用**得更**广泛，因此有更多可用的信息和支持。我从未见过真正使用 GNU Pth 的人。或者更好的是，如果您使用的是 C++11，则使用`std::thread`，如果没有，则使用`boost::thread`.

> 那么，谁能解释一下 POSIX Pthread 和 GNU Pth 之间的区别？

Pthreads 是抢占式多线程的跨平台标准，这意味着（通常）操作系统内核管理线程，操作系统调度程序决定每个线程何时运行（如果您有一个内核，一次只能运行一个线程，如果您有多个内核，则可以一次运行多个线程）。操作系统调度程序可以在（几乎）任何时候暂停任何线程并让另一个线程运行，因此每个线程都获得有限的“时间片”，然后其他线程开始运行。

GNU Pth 是一个*不可抢占*的用户空间线程库，这意味着线程以及哪些线程在何时运行由用户空间而不是内核决定。有人说使用非抢占式线程库的程序更容易理解，因为您的线程不会在任意时间暂停以让另一个线程运行。

> 我希望我的服务器在所有基于 *nix 的系统之间具有可移植性和高效性，避免使用繁重的 fork()。

`fork`在 UNIX 上并不重。

> W*ndows 呢？那里有 Pthreads 或 Pth 的选项吗？如果不是，该操作系统的 API 是什么？

有适用于 Windows 的 pthreads API，但它们不是 Windows 操作系统的原生 API。我不知道 GNU Pth 是否可以在 Windows 上运行——我对此表示怀疑，除非你使用 Cygwin。Windows 有自己的 Win32 线程模型。

使用`std::thread`or`boost::thread`可移植到 POSIX 平台和 Windows，并使 API 的某些部分更易于使用（特别是，锁定和解锁互斥锁可以以异常安全的方式轻松完成，并且条件变量更易于使用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:44:30.217

Gnu PTH 适用于非常有限的用例：您想使用多线程实现范例，但又*不想*使用多个 CPU 或内核，也不想依赖任何操作系统或内核级别的支持。由于现在几乎所有通用 CPU 都有多个内核，因此这个用例越来越无关紧要。

Windows 有一个与 POSIX 不同的线程模型；如果您希望您的应用程序是跨平台的，最好使用跨平台线程库，例如 boost::thread。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-22T19:02:07.013

我认为 GNUs PTH 首先是用于 C 的。你也可以在 C++ 上使用它，但 C++ 有它自己的。

有相当多的应用程序使用 pth，例如低级刻录工具（因此 K3B 和 Brasero 等 GUI-Tools 依赖于 pth），GnuPG 也使用 PTH，Archlinux 的包管理和一些多媒体的东西。

在 Windows 上它总是有点复杂。微软从未克服 C 是来自/用于 UNIX 系统的编程语言这一事实​​，因此正遭受 NIH 症状（此处未发明）

所以他们做了很多没有任何优势的事情，只是为了与众不同。

如果您使用应该在任何地方运行且不是低级的应用程序，请使用 Qt 及其 QThreads 和 QThreadPool

1.  它在所有操作系统上 100% 相同
2.  你需要更少的代码

如果您编写“低级”应用程序，我建议您将应用程序拆分为后端和前端，并为每个操作系统编写自己的后端，并使用问题最少的库。

# html - 如果浏览器的元素检查器说元素的宽度是 300 像素，我可以确定它在所有浏览器中都是相同的吗？

> ID：13977498
> 
> 赞同：2
> 
> 时间：2012-12-20T17:30:16.967
> 
> 标签：html, css, browser

![截屏](../Images/93910b54e3b5ef212081be109993b151.png)

* * *

在上面的屏幕截图中，Google Chrome 的（元素/网络）检查器工具显示菜单项的尺寸为 547 x 308 像素。

现在，我可以确定所有现代浏览器（IE9 及更高版本、Chrome、Opera、Firefox）也可以通过相同的尺寸识别菜单项吗？如果不是，它是如何变化的？（例如字体渲染？）

**编辑：**我是否使用 CSS 重置样式表。更具体地说，我使用了[Normalize.css](http://necolas.github.com/normalize.css/)，它非常流行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:37:14.670

你不能确定。原因是浏览器有所谓的*用户代理样式表*。这些是浏览器可以设置为任何他们想要的默认样式。例如，Chrome 的用户代理样式表定义了`p`标签的顶部和底部边距。

为了确保您显示的内容相同，您需要覆盖用户代理样式表。最好的方法是使用所谓的 CSS 重置样式表，它会尝试删除浏览器定义的任何属性。

[您可以在此处](http://meiert.com/en/blog/20070922/user-agent-style-sheets/)阅读有关用户代理样式表的所有信息。这里[有一些 CSS 重置样式表](http://www.cssreset.com/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:43:15.137

除非你指定`width: 547px; height: 308px`然后没有。如果您允许元素根据后代元素的大小缩小和增长（并且后代的尺寸不受固定宽度或高度的限制），那么它会有所不同。

您永远无法确定用户如何根据字体大小配置他们的浏览器（有些用户喜欢更大的字体大小，这样更容易阅读）。您甚至无法确定用户是否指定了 font-family，并且他们的默认 font-face 可能具有比您预期的更宽或更窄的字形。

# visual-studio-2012 - Wix Toolset 复制文件问题

> ID：13977499
> 
> 赞同：0
> 
> 时间：2012-12-20T17:30:17.217
> 
> 标签：visual-studio-2012, wix, wix3.6

我是 wix 的新手，并且在使用 wix 中的 copyfile 组件时遇到了一些问题。请您查看下面的代码并提供建议。非常感谢。

我有 3 个功能、3 个组件组和 3 个组件，如下所述，以及相应的 directoryRef

```
<Feature Id = "F1" Title "T1" Level ="1">
  <ComponetGroupRef Id="CG1" />
  <Condition Level="1">
    <![CDATA[ComputerName="S1"]
  </Condition>
</Feature>

<Feature Id = "F1" Title "T1" Level ="1">
  <ComponetGroupRef Id="CG2" />
  <Condition Level="1">
    <![CDATA[ComputerName="S2"]
  </Condition>
</Feature>

<Feature Id = "F1" Title "T1" Level ="1">
  <ComponetGroupRef Id="CG3" />
  <Condition Level="1">
    <![CDATA[ComputerName="S3"]
  </Condition>
</Feature>

<ComponentGroup id="CG1">
  <ComponentRef id="c1" />
</ComponentGroup>

<ComponentGroup id="CG2">
  <ComponentRef id="c2" />
</ComponentGroup>

<ComponentGroup id="CG3">
  <ComponentRef id="c1" />
  <ComponentRef id="c2" />
</ComponentGroup>

<DirectoryRef Id"ApplicationDirectory">
  <Component Id="C1" Guid="xyz">
    <File Id="F1"KeyPath="yes" Source="Some Source Location">
      <CopyFile Id="CF1" DestinationDirectory="Dest1" />
    </File>
  </Component>
  <Component Id="C2" Guid="abc">
    <File Id="F2"KeyPath="yes" Source="Some Source Location">
      <CopyFile Id="CF2" DestinationDirectory="Dest2" />
    </File>
  </Component>
</DirectoryRef> 
```

所以基本上，如果我在服务器 S1 上运行 wix msi，则仅应复制文件 F1，当我在服务器 S2 上运行时，仅应复制文件 F2，而当我在服务器 S3 上运行时，应复制文件 F1 和 F2。

我遇到的问题是所有文件都被复制而不受限制或服务器名称匹配。

如果我是愚蠢的，你能告诉我。

谢谢，贾纳克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T09:28:46.673

Wix is not for copy. I defined a different wix template project for the work I wanted to do. So instead of copy from destination to another location. I changed the project implementation so that it copies from source to a different destination.

# c# - 如何在 C# 中使用 C++ dll 导出的类

> ID：13977500
> 
> 赞同：1
> 
> 时间：2012-12-20T17:30:18.397
> 
> 标签：c#, c++, dll, export

> **可能重复：**
> [可能从 C# 调用 C++ 代码？](https://stackoverflow.com/questions/935664/possible-to-call-c-code-from-c)

我有 C++ 类，它有一些静态方法。它在 dll 中，即导出类。我需要使用 C# 项目中的静态方法。我可以在没有 COM 的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:47:39.420

COM 将是一个很好的方法（除了 COM 不支持静态方法的事实......）

另一种方法是将类转换为 C++/CLI 托管类，如下所示：

```
public ref class MyClass
{
public:
    static void StaticMethod()
    {
        ...
    }
}; 
```

DLL 中的 C++/CLI 托管类对 C# 可见，就像它是 C# 类一样。

如果您不想将 C++ 项目变成 C++/CLI 项目，则可以创建一个包含托管类的 C++/CLI 项目，该托管类只是将非托管类包装在非托管 C++ 项目中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:45:04.627

你有两种方法：

[使用C++\CLI](http://www.codeproject.com/Articles/19354/Quick-C-CLI-Learn-C-CLI-in-less-than-10-minutes)或使用[PInvoke](http://msdn.microsoft.com/en-us/library/aa288468.aspx)包装本机 C++ dll

# android - 从活动中保留 ASyncTask，而不是片段

> ID：13977509
> 
> 赞同：0
> 
> 时间：2012-12-20T17:31:19.853
> 
> 标签：android, android-asynctask

所以..

我所拥有的如下，一个复杂的基于片段的查看器，它在我的活动中使用 tabhosts 等。这是基本设置。

创建完成后，我使用 AsyncTask 从我的数据库中获取一些数据。当 ASyncTask 完成时，我使用片段管理器找到 viewpager 的各个片段，并在每个片段中调用函数来设置数据。例如，在片段 A 中，数据被设置为列表适配器中的列表，而在片段 B 中，数据被绘制在地图上。

我已经这样设置了，因为所有片段都使用相同的数据，我只想调用一个 ASyncTask。它完美地工作。

我的问题是当用户在加载时旋转屏幕。因此，从片段中调用 ASyncTask 可以使用 setRetainInstance，之前在活动中可以使用 onRetainNoneConfigurationInstance.. 但现在已弃用。

我花了很长时间搜索，似乎没有人对这种特定情况有答案。

任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:46:05.080

您可以使用隐形`Fragment`来保留您的状态。它本质上与`onRetainNoneConfigurationInstance`但不被弃用相同。

见[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#config-changes](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#config-changes)

示例中有一个错误，您必须将 RetainFragment 添加到，`FragmentManager`否则将无法恢复。

```
public static RetainFragment findOrCreateRetainFragment(FragmentManager fm) {
    RetainFragment fragment = (RetainFragment) fm.findFragmentByTag(TAG);
    if (fragment == null) {
        fragment = new RetainFragment();
        fm.beginTransaction().add(fragment, TAG).commit(); // add this
    }
    return fragment;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:53:35.497

使用 IntentService 从数据库中获取数据，您不必担心配置更改。发送 Intent 以获取数据，使用 LocalBroadcastManager 将广播 Intent 发送回您要通知的任何其他组件。

# ios - NIToolbarPhotoViewController 与应用程序包中的照片

> ID：13977510
> 
> 赞同：1
> 
> 时间：2012-12-20T17:31:20.487
> 
> 标签：ios, nimbus-ios, photoviewer

最初发布于[https://groups.google.com/forum/#!msg/nimbusios/nGePpdl12N4/Etnyp1cUOhMJ](https://groups.google.com/forum/#!msg/nimbusios/nGePpdl12N4/Etnyp1cUOhMJ)

是否有任何可`NIToolbarPhotoViewController` 用于非网络图像的示例？我的应用程序包中有我想通过本课程展示的图像。`NIToolbarPhotoViewController`我已经用我自己的子类（直接子类化，而不是 子类化）尝试了 NetworkPhotoAlbum 示例的一些调整`NetworkPhotoAlbumViewController`。但是，即使我在子类中硬编码以下两种方法以使用 + imageNamed 返回图像，我也会得到空白屏幕。

```
- (UIImage *)photoAlbumScrollView: (NIPhotoAlbumScrollView *)photoAlbumScrollView 
                     photoAtIndex: (NSInteger)photoIndex 
                        photoSize: (NIPhotoScrollViewPhotoSize *)photoSize 
                        isLoading: (BOOL *)isLoading 
          originalPhotoDimensions: (CGSize *)originalPhotoDimensions 

- (UIImage *)photoScrubberView: (NIPhotoScrubberView *)photoScrubberView 
              thumbnailAtIndex: (NSInteger)thumbnailIndex 
```

根据我目前的理解，似乎任何类都应该能够子类化`NIToolbarPhotoViewController`并实现以下这两种方法，作为一个非常基本的开始。但是，即使如图所示实现了这两个数据源方法，我也会收到一个空白屏幕。虽然，我仍然得到显示正确照片计数的视图（例如 10 张中的 4 张），并且可以使用前进/后退箭头单击，但最终没有显示实际图像。我期待 default.png 出现 10 次。

```
- (NSInteger)numberOfPhotosInPhotoScrollView:(NIPhotoAlbumScrollView *)photoScrollView { 
  return 10; 
} 

- (UIImage *)photoAlbumScrollView: (NIPhotoAlbumScrollView *)photoAlbumScrollView 
                     photoAtIndex: (NSInteger)photoIndex 
                        photoSize: (NIPhotoScrollViewPhotoSize *)photoSize 
                        isLoading: (BOOL *)isLoading 
          originalPhotoDimensions: (CGSize *)originalPhotoDimensions { 

  return [UIImage imageWithContentsOfFile: 
     NIPathForBundleResource(nil, @"NimbusPhotos.bundle/gfx/default.png")]; 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T17:09:26.513

我遇到了同样的问题。您需要为 photoSize 分配一个值（还应该设置 originalPhotoDimensions，但这不是必需的）。我原以为默认行为是直接从图像中读取属性，但默认值为 (0,0)。

```
- (UIImage *)photoAlbumScrollView: (NIPhotoAlbumScrollView *)photoAlbumScrollView 
                 photoAtIndex: (NSInteger)photoIndex 
                    photoSize: (NIPhotoScrollViewPhotoSize *)photoSize 
                    isLoading: (BOOL *)isLoading 
      originalPhotoDimensions: (CGSize *)originalPhotoDimensions { 

 UIImage *image = [UIImage imageWithContentsOfFile: 
 NIPathForBundleResource(nil, @"NimbusPhotos.bundle/gfx/default.png")];

 *originalPhotoDimensions = [image size];
 *photoSize = NIPhotoScrollViewPhotoSizeOriginal;
 return image;} 
```

这对我有用，对其他人也应该如此。

# python - PyQt - PySide 自定义小部件不会显示

> ID：13977511
> 
> 赞同：2
> 
> 时间：2012-12-20T17:31:21.413
> 
> 标签：python, qt, pyqt, pyside

我正在尝试使用代码创建一个带有按钮和标签的自定义小部件：

```
from PySide.QtGui import *
from PySide.QtCore import *

class MyWidget(QWidget):
    def __init__(self):
        super(MyWidget, self).__init__()
        self.initUI()
    def initUI(self):
        self.btn = QPushButton('dia', self)
        self.btn.move(20, 20)
        self.le = QLineEdit(self)
        self.le.move(100, 20) 
```

在此之后，我为我的主框架创建了一个类，并尝试使用代码显示这个小部件：

```
class Example(QWidget):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        self.mw = MyWidget()
        self.mw.move(20, 20)

        self.resize(250, 300)
        self.center()
        self.setWindowTitle('Custom Widget Example')
        self.show() 
```

当我从终端运行此脚本时，它显示但它是空白的。我在任何地方都看不到我的小部件。

我需要做什么才能显示此小部件？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:01:54.290

为什么要使用坐标？使用布局：

```
class MyWidget(QWidget):
    def __init__(self, parent=None):
        super(MyWidget, self).__init__(parent)   #always provide parent!
        self.initUI()
    def initUI(self):
        self.btn = QPushButton('dia', self)
        self.le = QLineEdit(self)
        layout = QHBoxLayout()  #whatever layout you want
        layout.addWidget(self.btn)
        layout.addWidget(self.le)
        self.setLayout(layout)

class Example(QWidget):
    def __init__(self, parent=None):
        super(Example, self).__init__(parent)
        self.initUI()

    def initUI(self):
        self.mw = MyWidget(self)   # remember the parent!
        layout = QHBoxLayout()
        layout.addWidget(self.mw)
        self.setLayout(layout)

        self.resize(250, 300)
        self.center()
        self.setWindowTitle('Custom Widget Example')
        self.show() 
```

如果您想更好地控制元素的布置，请使用网格布局。

如果你真的想使用“绝对坐标”，那么你必须始终记住传递父小部件，否则子小部件将没有地方绘制自己。

# iphone - Objective-C：类别头文件中的新随机错误

> ID：13977519
> 
> 赞同：4
> 
> 时间：2012-12-20T17:32:10.880
> 
> 标签：iphone, objective-c

我遇到了一个问题，我现在在昨天还可以正常工作的文件中出现错误。我没有对文件进行任何更改，但我有这些新错误。我的代码如下，每行都注释了错误：

```
#import <Foundation/Foundation.h>

@interface NSString (stringByStrippingHTML) // Error 1: Missing "@end" Error 2: Expected a type Error 3: Method type specifier must start with '-' or '+'

- (NSString *) stripHTML; // Expected selector for Objective-C method

@end 
```

为什么突然出现这些错误，我该怎么做才能修复它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-23T09:24:33.420

我遇到了完全相同的问题，结果发现错误是因为我在出现问题的文件正上方的文件中输入了减号“-”（错误地）。

这是文件的开头，就在给出错误的文件上方：

```
-//
//  AsyncUIImageView.m
//  TableView
//
//  Created by www.thecodecrate.com on 23/01/15.
//  Copyright (c) 2015 www.TheCodeCrate.com. All rights reserved.
//
//================================================================================
#import "AsyncUIImageView.h"
... 
```

看到顶部的“-”了吗？一旦删除，该死的问题就消失了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T10:29:52.807

事情不会随机发生。你认为你没有做任何改变，但你做了一些改变。将您当前的文件与以前的工作版本进行比较。你有以前的工作版本，在某个地方，对吧？如果没有，这里有一个宝贵的教训：确保您使用的源代码控制系统可以让您访问以前版本的代码。而且您有一个工具可以将您当前的版本与以前的版本进行比较，对吗？如果没有，请尽快获得一份。

该错误很可能是您在此之前包含的头文件中缺少@end。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T20:05:51.733

我用完全相同的代码创建了一个文件，它编译得很好。当我删除该`@end`行时，我收到了与您列出的相同的错误消息。

1.  您绝对确定您的文件包含您问题中的代码吗？尝试从您的问题中复制代码并将其粘贴到您的文件中。

2.  `Error 1: Missing "@end"`可能表明您的文件中有乱码。如果您有 BBEdit，请尝试“Zap Gremlins”。如果没有，您可以下载试用版。

# node.js - 在套接字事件期间无法使用 express (3.x) 渲染视图

> ID：13977521
> 
> 赞同：0
> 
> 时间：2012-12-20T17:32:23.453
> 
> 标签：node.js, express, socket.io, render, ejs

我想在不启动新套接字实例的情况下显示一个新页面。这就是我正在做的事情。

```
app.configure(function(){ 
    app.set('port', 8080);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use(express.static(path.join(__dirname, 'public')));

});

io.sockets.on('connection', function(socket){
    app.render('board' , { option : 'somestuff'} , // line with type error
       function(err, html) {
            console.log(html); // outputs html with option values inserted 
       }
); 
```

我无法让页面呈现，控制台给了我这个错误

```
[ERROR] TypeError
TypeError: undefined is not a function 
```

但是，这似乎不正确，因为[文档](http://expressjs.com/api.html#app.render)告诉我这是正确的语法，当我将其附加到`app.get('/', function(req, res) { /*same code but res.render instead */ });`它时，它就可以正常工作。此外，当我将 html 记录到控制台时，我会得到正确的页面，其中包含放置在模板中的选项。

我究竟做错了什么？

# php - 如何在 json 数据中添加 javascript？

> ID：13977525
> 
> 赞同：2
> 
> 时间：2012-12-20T17:32:41.857
> 
> 标签：php, jquery, json

我想使用 json 和 jquery 显示图像预览和标题。我的 PHP 脚本对 json 数据进行编码并发送到 jquery 进行预览。数据包含html和javascript。在预览中，我看到了 HTML，但省略了 javascript 标记。我相信 json 解析器会删除这个标签。这是我的代码

**PHP 代码**

```
$code = '
<div class="mosaic-block bar">
     <div class="mosaic-overlay">
         <div class="details">
              <h4>Sloppy Art - A Mess of Inspiration</h4>
              <p>via the Nonsense Society</p>
         </div>
     </div>
     <div class="mosaic-backdrop"><img src="http://buildinternet.s3.amazonaws.com/projects/mosaic/florian.jpg"/></div>
</div>
<script type="text/javascript">jQuery(function($){$(".bar").mosaic();});</script>';

$json_msg = array('success'=>true, 'msg'=> $code);
echo encode_json($json_msg);
exit;

function encode_json ($mixed_data) {
    if(is_array($mixed_data) && isset($mixed_data['msg'])) {
        $mixed_data['msg'] = utf8_encode($mixed_data['msg']);
    }
    return json_encode($mixed_data, JSON_HEX_TAG|JSON_HEX_AMP|JSON_HEX_QUOT);
} 
```

**Javascript**

```
var form_options = {
    success:        ShowPreview,
    url:            url,
    type:           'post',
    dataType:       'json',
    clearForm:      false,
    resetForm:      false,
    cache:          false,
    timeout:        200000,
};
$('.preview-form').ajaxSubmit(form_options);

function ShowPreview(data) {
    if(data.success){
        $.fn.colorbox({html:data.msg});
    }
} 
```

上面的代码在颜色框中显示一切正常，除了这部分丢失了`<script type="text/javascript">jQuery(function($){$(".bar").mosaic();});</script>`如何逃避这个被 json 解析器解析的 javascript？

## 编辑

我可以确认问题出在 json 解析器上。我在表单提交选项中将数据类型从 json 更改为 HTML，然后我发现以下编码字符串响应 E\u003Cscript type=\u0022text/javascript\u0022\u003EjQuery(function($){$(\u0022.bar\u0022).mosaic ();});\u003C/脚本\u003E

我使用以下代码将数据恢复为 json var data = jQuery.parseJSON(msg);

脚本标签已从数据中删除。仍在试图弄清楚为什么解析器会删除 javascript 标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:43:52.247

`jQuery(function($){...});`是一个捷径`$(document).ready(function(){...});`

这意味着`jQuery(function($){$(".bar").mosaic();});`将仅在`ready()`事件时执行。由于您正在将代码加载到颜色框中，因此该`ready()`事件已被触发，并且此代码段将永远不会被触发。

最好的办法是单独托管您的 javascript 并`$.getScript()`在`success()`回调中调用 a

如果脚本部分本身缺失，那么您可以通过这种方式创建 JSON 对象，

```
{
    html: "some html",
    js: "some js"
} 
```

然后`eval()`是javascript代码。（是的，它的安全性很差）

你也必须摆脱`jQuery(function($){})`一部分

# java - 尝试开发 android 应用程序时获取 java.lang.ClassCastException

> ID：13977526
> 
> 赞同：0
> 
> 时间：2012-12-20T17:32:43.830
> 
> 标签：java, android

我有这个异常“java.lang.ClassCastException：android.app.Application 无法转换为 com.utility.TablePlussAndroid”我不明白为什么......非常感谢您的帮助

```
package com.tableplustablet;
private com.utility.TablePlusAndroid session;

public class LoginActivity extends Activity {

    // ...

    // get session from Application                        
    session =  (TablePlusAndroid) this.getApplication(); // <--EXCEPTION
    session.setUserKey(userKey);
} 

// -------------------------------------------------------------

package com.utility;
import android.app.Application;

 //Save User Data in  application's context
 public class TablePlusAndroid extends Application{
private Long userKey;
private String userName;
private Long currentTableKey;  

    public Long getCurrentTableKey() {
        return currentTableKey;
}

    public void setCurrentTableKey(Long currentTableKey) {
        this.currentTableKey = currentTableKey;
    }
    public Long getUserKey(){ return userKey;}
    public void setUserKey(Long key){ userKey=key;}
    public String getUserName() { return userName; }
    public void setUserName(String userName) { this.userName = userName; }  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:34:44.070

您需要在 AndroidManifest.xml 文件中使用您的应用程序类。

它应该如下所示：

```
<application android:name="application.package.and.class">
    <activity .... />
</application> 
```

# ruby-on-rails-3 - 无法在 Amazon EC2 中安装 libv8

> ID：13977527
> 
> 赞同：1
> 
> 时间：2012-12-20T17:32:48.933
> 
> 标签：ruby-on-rails-3, amazon-ec2

每次我尝试安装 libv8：

```
sudo gem install libv8 
```

它只是永远挂起。有什么帮助吗？

```
Invalid gemspec in [/var/lib/gems/1.8/specifications/css_parser-1.2.6.gemspec]: invalid date format in specification: "2011-09-08 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/sass-rails-3.2.5.gemspec]: invalid date format in specification: "2012-03-19 00:00:00.000000000Z"
Invalid gemspec in [/var/lib/gems/1.8/specifications/carrierwave-0.6.2.gemspec]: Illformed requirement ["#<YAML::Syck::DefaultKey:0x7f47f2645870> 1.1.4"]
Building native extensions.  This could take a while... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:44:19.470

您确定它只是“永远挂起”吗？你让它运行多久了？编译 libv8 可能需要很长时间。在 EBS 商店中包含您的源代码的 AWS 实例上，如果需要一个多小时，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T15:02:31.513

我安装了以前版本的 libv8。最后一个由于某种原因没有工作。

# rest - 使用 Linkedin 的 REST api 自动进行身份验证

> ID：13977537
> 
> 赞同：0
> 
> 时间：2012-12-20T17:33:22.467
> 
> 标签：rest, windows-8, microsoft-metro, linkedin

我正在尝试构建一个 win8 javascript 应用程序并自动验证自己以在应用程序中显示我的链接信息。

但是，我只能找到有关如何手动验证用户的信息（输入密码/用户）。我想发出一个自动请求，因为“用户”将永远是我，并发送一个包含我的登录令牌/信息的请求。

这可能吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:54:57.650

对的，这是可能的。假设您有一个`LinkdInAuth`将用户名和密码作为参数的方法。您所要做的就是在您的默认 js 上：

```
ready: function (element, options) {
LinkdInAuth("yourUser","yourPass");
}; 
```

如果您没有该方法，则可以根据您在网络上找到的示例轻松调整它。

# c# - 交替使用 BinaryFormatter 和 XmlSerializer

> ID：13977538
> 
> 赞同：2
> 
> 时间：2012-12-20T17:33:42.393
> 
> 标签：c#, xml-serialization, binaryformatter

我继承了大量使用 BinaryFormatter 进行序列化的代码，现在我需要对其进行调试。目前所有的序列化代码都需要一个 IFormatter。

我有一个想法用 XmlSerializer 替换 BinaryFormatter，以便更轻松地检查序列化输出，但它们不兼容（没有通用基础或接口）。

是否有标准方法，例如使参数成为我的代码可以使用的某种通用序列化程序？理想情况下，我想在顶层创建我想要的任何具体序列化程序，然后将其传递下来，而较低级别不需要知道具体类型。

我目前拥有的示例：

```
BinaryFormatter bformatter = new BinaryFormatter();     //create a binary formatter
PutPw(bformatter, stream, panel.DevicePassword);    //encode and stream the password

public static void PutPw(IFormatter bf, Stream stream, string pw)
{
    ...
    bf.Serialize(stream, pw);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:15:58.443

正如已经指出的，并非所有可二进制序列化的对象也是 XML 可序列化的（例如，任何具有 TimeSpan 的对象）。

但如果你能处理这个相当严重的缺陷，那么我可能会采取的方法是创建自己的界面。然后我将有 2 个实现它的类，一个包装二进制格式化程序，一个包装 XML 序列化程序。为了让生活更轻松，在您的应用程序使用的方法名称和参数方面，界面与二进制格式化程序非常相似，这样您就可以相对轻松地替换具体二进制格式化程序的出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:36:22.873

你检查过`SoapFormatter`吗？不像 XmlSerializer 那样可读，但仍然是 XML，并且您可以理解大多数值。它继承自 IFormatter，就像 BinaryFormatter 一样。因此，您无需修改​​代码即可更改为。
此外，XmlSerializer 只能处理具有无参数构造函数的对象的公共属性，而 IFormatter 使用反射并可以处理具有参数化构造函数的私有字段和对象。此外，该属性`Serializable`只能与格式化程序一起使用，而不能与 XmlSerializer 一起使用。它根本不同，您可能需要更改很多代码。

# iphone - 如何在 TableViewCell 中显示图像（从 JSON 服务动态检索）

> ID：13977541
> 
> 赞同：2
> 
> 时间：2012-12-20T17:33:48.653
> 
> 标签：iphone, objective-c, xcode, image, tableviewcell

我从 JSON 服务获取 url 图像。我知道如何使用`UIImageView`对象在屏幕上显示它，但我不知道如何做到这一点，`UITableViewCell`因为我无法将对象拖放`UIImageView`到原型单元格上。我检查了一些资源，但它们都非常混乱，在屏幕上显示图像和在屏幕上显示图像之间的区别`UITableViewCell`并不清楚。我相信这篇文章的回复将有助于解决很多像我这样的开发人员的困惑！

`UITableViewCell`我的问题是，在屏幕上显示图像和在代码级别显示图像有什么区别？（我们是否也使用`UIImageView`对象`UITableViewCell`？我们是否拖放任何东西？我们需要`contentView`还是`subview`？等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:39:15.353

看看这个非常好的教程。它不应该让您的任何问题悬而未决。

[http://www.markj.net/iphone-asynchronous-table-image/](http://www.markj.net/iphone-asynchronous-table-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:53:57.820

我不建议采用这种方法。表格视图有很多行，所以图像会太小。只有当图像像横幅时才这样做。

**解决方案**

如果您仍想将每个图像上传到不同的行中（因此在单元格中），您可以返回一个包含 UIImageWiew 的单元格：

```
- (UITableViewCell*) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString* path; 
    ...   // assign the path according to the index path, so that it loads
    ...   // a different image for every row and section
    UIImage* image=[[UIImage alloc]initWithContentsOfFile: path];
    UITableViewCell* cell=[UITableViewCell new];
    [cell.imageView setImage: image];
    return cell;
} 
```

**替代解决方案**

相反，如果您想要显示大图像，只需监视行选择，将大图像放在表格视图下方，并在行选择更改时更改图像井内容。

# android - 使用 datepicker 时难以从 android 中的 sqlite 获取数据

> ID：13977545
> 
> 赞同：0
> 
> 时间：2012-12-20T17:34:02.360
> 
> 标签：android, database, sqlite, android-sqlite

```
private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() 
        {

// when dialog box is closed, below method will be called.
public void onDateSet(DatePicker view, int selectedYear,int selectedMonth, int selectedDay) {
    year = selectedYear;
    month = selectedMonth;
    day = selectedDay;              
    try
     {
db=openOrCreateDatabase("Lecturer",SQLiteDatabase.CREATE_IF_NECESSARY,null);
db.execSQL("Create Table If Not Exists temp (Month INTEGER,Date INTEGER,Year INTEGER,Event TEXT)");
db.execSQL("INSERT INTO temp(Month, Date, Year, Event) VALUES (11,17,2012,'first')");
db.execSQL("INSERT INTO temp(Month, Date, Year, Event) VALUES (10,9,2012,'second')");
Cursor c=db.rawQuery("SELECT * FROM temp",null);
c.moveToFirst();
while(c.isAfterLast() == false)
    {
     t2=c.getString(0);
    // Log.e("",""+t2);
     int n = Integer.parseInt(t2);
     t3=c.getString(1);
     int n1 = Integer.parseInt(t3);
     t4=c.getString(2);
     int n2 = Integer.parseInt(t4);
     t5=c.getString(3);
     EditText t=(EditText)findViewById(R.id.editText1);
     Log.e("",""+day);
     if(day==n&& month==n1&&year==n2)
        {
            Log.e("",""+t5);
            t.setText(t5);
        }
    else
        {
            t.setText("No Event");
        }       
            c.moveToNext();
        }
            c.close();

                }
                catch(SQLException e)
                {

                }
                // set selected date into textview
                tvDisplayDate.setText(new StringBuilder().append(month + 1)
                        .append("-").append(day).append("-").append(year)
                        .append(" "));

                // set selected date into datepicker also
                dpResult.init(year, month, day, null);

            }
        };

} 
```

在 DB 中存储和获取事件时，我遇到了一些问题并强制关闭。请帮助我提出任何有用的建议……这里我试图将 datepicker 选择的日期与数据库存储的日期进行比较，并显示当天的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:38:13.153

从 ICS 开始，如果您在主线程上执行任何数据库操作，您将崩溃。当您只是尝试在 DB 中写入一个值时，您可以这样做：

```
new Thread(new Runnable() {
    public void run() {
        do_the_db_operations
    }
 }.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:51:32.570

DB 访问可以在 UI 线程上运行。Activity 可以对自己调用 finish()。但是任何看到你这样做的 Android 工程师都会难过地摇头。

换句话说，在后台进行数据库访问。

整个讨论中缺少的是用于强制关闭的 logCat。怎么了？我们这里只是推测，没有 logCat，推测纯粹是 while (true) { int i = 0; }

# ant - 蚂蚁属性内的问号

> ID：13977552
> 
> 赞同：0
> 
> 时间：2012-12-20T17:34:44.497
> 
> 标签：ant

我想在 ant 属性中放置一个问号字符（通过属性文件），但我不断收到`Dangling meta character '?'`错误消息。我到底怎么在蚂蚁属性里面放一个问号？

* * *

我在 ant 属性文件中有以下内容：

```
 installerTemplate=E:/projectX/branch/?/path/to/installer.exe
 installerBranch=foobar 
```

蚂蚁文件：

```
<project .... >
    <taskdef resource="net/sf/antcontrib/antcontrib.properties"/>
    <property file="project.properties" />

    <target name="fixPath">
        <propertyregex property="installerFileLocation" input="${installerTemplate}"
            regexp="?" replace="${installerVersion}" global="true" />
        <propertyregex property="installerFileLocation.win" input="${installerFileLocation}"
            regexp="/" replace="\\\\"/>
        <echo>${installerFileLocation.win}</echo>
    </target>
</project> 
```

但是每当我运行 ant 时，我都会得到这个：

```
BUILD FAILED
E:\p4-abird\depot_cfg\ssb\tools\ssb_dev_env_automation\create_ssb_vm.xml:37: java.util.regex.PatternSyntaxException: Dangling meta character '?' near index 0
?
^
    at java.util.regex.Pattern.error(Pattern.java:1713)
    at java.util.regex.Pattern.sequence(Pattern.java:1878)
    at java.util.regex.Pattern.expr(Pattern.java:1752)
    at java.util.regex.Pattern.compile(Pattern.java:1460)
    at java.util.regex.Pattern.<init>(Pattern.java:1133)
    at java.util.regex.Pattern.compile(Pattern.java:847)
    at org.apache.tools.ant.util.regexp.Jdk14RegexpMatcher.getCompiledPattern(Jdk14RegexpMatcher.java:67)
    at org.apache.tools.ant.util.regexp.Jdk14RegexpMatcher.matches(Jdk14RegexpMatcher.java:94)
    at net.sf.antcontrib.property.RegexTask.doReplace(RegexTask.java:135)
    at net.sf.antcontrib.property.RegexTask.execute(RegexTask.java:192)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:392)
    at org.apache.tools.ant.Target.performTasks(Target.java:413)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.apache.tools.ant.Main.runBuild(Main.java:811)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 0 seconds 
```

我到底怎么在蚂蚁属性里面放一个问号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:10:53.527

问题似乎出在：

```
regexp="?" 
```

“？” 是一个正则表达式元字符，在正则表达式模式中具有特殊含义。如果你想匹配文字'？char，你需要逃避它。

# java - 如何迁移 Java、Spring 项目以使用 JNDI 数据源

> ID：13977554
> 
> 赞同：0
> 
> 时间：2012-12-20T17:34:45.653
> 
> 标签：java, spring, jdbc, jboss, jndi

我有一个从命令行运行的 Java 项目。它正在使用弹簧。目前我的项目是mySQL。使用可以从下面的config.xml中看到

```
<bean id="mysqldataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="mysqldataSource.url" />
    <property name="username" value="mysqldataSource.username" />
    <property name="password" value="mysqldataSource.password" />
</bean> 
```

我的公司要求我将项目从使用 MySQL 更改为使用 JNDI 数据源。

下面是我的 java 代码，你可以看到正在使用 jdbcTemplate：

```
public class DisasterReliefMySQLImpl extends JdbcTemplate implements
        DisasterReliefMySQL {

    private static Log log = LogFactory.getLog(DisasterReliefMySQLImpl.class
            .getName());

    String querySQL;
    int counter = 0;

    public int getCounter() {
        return counter;
    }

    private String getQuerySQL() {
        return querySQL;
    }

    private void setQuerySQL(String querySQL) {
        this.querySQL = querySQL;
    }

    DisasterReliefMySQLImpl(DataSource ds) {
        super(ds);
    }

    DisasterReliefMySQLImpl(DataSource ds, String querySQL) {
        super(ds);
        setQuerySQL(querySQL);
    }

    public int updateDonation(String id) {
        Long eTime = System.currentTimeMillis() / 1000;

        String updateSQL = "update uft_donation set sent_to_mbs="
                + eTime.toString() + " where  donation_id =" + id;

        return (int) this.update(updateSQL);
    }

    public List<Donation> returnResults() {
        log.debug("Starting returnResults...");

        List<Donation> Donations = new ArrayList<Donation>();

        List<Map<String, Object>> rows = this.queryForList(getQuerySQL());

        counter = 0;

        for (Map row : rows) {
            Donation d = new Donation();

            d.setDonationID((Long) row.get("donation_id"));
            d.setCCTransactionNumber((String) row.get("txn_id"));
            d.setProgramCode((String) row.get("gl_code"));
            d.setLastName((String) row.get("billing_last_name"));
            d.setFirstName((String) row.get("billing_first_name"));
            d.setAmount((String) row.get("mc_gross"));
            d.setAddressLine1((String) row.get("billing_street1"));
            d.setAddressLine2((String) row.get("billing_street2"));
            d.setCity((String) row.get("billing_city"));
            d.setState((String) row.get("zone_code"));
            d.setZipCode((String) row.get("billing_postal_code"));
            d.setCountry((String) row.get("country_name"));

            Donations.add(d);
            counter++;
        }

        log.debug(counter + " Donation(s) loaded");
        return Donations;
    }

} 
```

有人可以告诉我如何更改它以使用 JNDI 数据源。我还需要在某处为数据库池提供 JNDI 服务吗？我们有带有数据源的 JBoss AS7 我可以从 JBoss 外部使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:26:18.090

发现这个在网上搜索“jboss external jndi”

[http://www.engfers.com/2008/08/07/exposing_accessing-jboss-jndi-objects_datasources-from-an-external-jvm/](http://www.engfers.com/2008/08/07/exposing_accessing-jboss-jndi-objects_datasources-from-an-external-jvm/)

看起来像你所追求的。使用您最喜欢的搜索引擎可以找到的内容真是太棒了；）

# unix - awk：从另一个变量中的文件读取后，一行中的环境变量替换

> ID：13977557
> 
> 赞同：2
> 
> 时间：2012-12-20T17:35:04.167
> 
> 标签：unix, awk

在 Unix 中，我有一个文件，其内容如下

```
cat abc
;file1_$HOME;file2_$HOME 
```

我的 shell 脚本是 TRY.ksh，内容如下：

```
#$HOME is exported and has a value here
echo $HOME 
while read line
do
echo $line
done < abc 
```

在这里`echo $line prints- ;file1_$HOME;file2_$HOME` 但不能替代价值`$HOME` 如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:14:11.603

您可以使用 Perl 查找变量名并从环境中替换它们的值：

```
perl -pe 's/\$([[:alpha:]_]\w+)/$ENV{$1}/ge' file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:50:09.963

您需要使用`eval`来扩展文件中的变量。

尝试这个：

```
while read line
do
  echo "$line"
done < <(eval echo "\"$(<abc)\"") 
```

# python - 在主列表中对类似项目进行分组，并根据分组项目创建新列表

> ID：13977558
> 
> 赞同：4
> 
> 时间：2012-12-20T17:35:15.973
> 
> 标签：python, list

我正在尝试从一个主列表创建几个新列表，其中新列表包含主列表中的类似项目。具体来说，我有一个巴士路线列表。这是一个示例数据集：

```
[u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line', u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line'] 
```

大多数公交路线都有一个入站（IB）和一个出站（OB）项目，（有些有多个IB和OB，有些只有一条路线，b / c它们是循环路线）。最终，我想在映射软件中合并 IB 和 OB 路由（我已经知道该怎么做）......

我最初创建了文件名，以便前 5 个字符代表公交路线，无论是 IB 还是 OB。因此，我可以根据前 5 个字符对类似项目进行分组。例如，当我写：

```
for route in routes:
    print route[0:5] 
```

我得到：

```
>>> 
Bus04
Bus04
Bus15
Bus15 
```

如何将与`Bus04`and`Bus04`和`Bus15`and相关的文件“分组”`Bus15`到新列表中，以便我得到：

`[u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line']`并`[u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line']`作为单独的列表？

我正在考虑循环遍历每个项目，查看每个项目的前五个字符，然后使用出现的每个新的五个字符项目创建一个新列表（并将该项目添加到新列表中）或检查是否一个列表已经存在并将类似的项目附加到它。

我很难用代码写出来，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:37:58.603

我会用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)这个：

```
import collections

L = [u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line', u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line']
d = collections.defaultdict(list)
for elem in L:
    d[elem.split('_')[0]].append(elem)
print(dict(d)) 
```

这会产生：

```
{u'Bus04': [u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line'],
 u'Bus15': [u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line']} 
```

与迄今为止提出的一些其他解决方案不同，这与条目在输入列表中出现的顺序无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T17:37:43.980

您可以使用[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)自定义键功能，例如`lambda x: x[0:5]`.

这是一个为您提供静态列表的演示（即不仅仅是生成器）：

```
>>> import itertools
>>> lst = [u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line', u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line']
>>> [(key, list(val)) for key, val in itertools.groupby(lst, lambda x: x[0:5])]
Out[9]:
[(u'Bus04', [u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line']),
 (u'Bus15', [u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line'])] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T17:37:50.720

```
import collections

lists = collections.defaultdict(list)
for item in masterlist:
    lists[item[:5]].append(item) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T17:38:49.620

为此，您可以将 groupby 与 lambda 键函数一起使用。

```
from itertools import groupby
results = groupby(data, key=lambda x: x[0:5])

>>> for item, values in results:
>>>     print item, list(values)
Bus04 [u'Bus04_00_00_IB_pts_Line', u'Bus04_00_00_OB_pts_Line']
Bus15 [u'Bus15_00_00_IB_pts_Line', u'Bus15_00_00_OB_pts_Line'] 
```

正如 NPE 在他的解决方案中提到的，原始列表必须是排序列表。

但是，如果您一次只需要处理一个条目，则此解决方案非常节省内存，因为生成器只产生一个值，然后等待下一个值准备好使用。

# python - 在 Windows 操作系统中获得写入文件的权限

> ID：13977559
> 
> 赞同：-2
> 
> 时间：2012-12-20T17:35:45.467
> 
> 标签：python, windows, file

我正在尝试在我的计算机（Windows 7）的给定路径上创建一个文件，但该文件没有在给定路径上创建。在执行代码之前，它实际上是在编译器中创建的，但它不是在 OS 上创建的。

```
x = str(input("Please enter the file name: "))
x = 'C:\Users\Aakash\Documents\Aakash\Aakash College\Practical\MIT Paython\\'+x
f = open('x','w')
print 'Please choose your option:'
print '1.Write'
print '2.Read'
choice = int(input('Enter the number: '))
while choice==1:
        text = input('Please enter the string: ')
        f.write(text)
        f.write('\n')
        print 'Please choose your option:'
        print '1.Write'
        print '2.Read'
        choice = int(input('Enter the number: '))
        if choice==2:
                f.close()
                print
                f = open('x','r')
                text = f.readline()
                print text
                while text!='':
                        text = f.readline()
                        print text
                f.close() 
```

我认为 Windows 没有授予创建文件的权限。那么如何获得该权限以便在给定位置创建一个真实文件呢？

它在我尝试使用 IDLE 的同一段代码时有效，但是当我在新文件中尝试它时（通过创建模块）它不起作用！（即模块正常运行，没有任何错误，但不创建真实文件）

注意：该文件是从管理员用户帐户运行的。他有权访问所有目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:36:49.253

**运行**代码的用户必须对手头的目录具有写访问权。

# windows - Windows的Strace等效？

> ID：13977560
> 
> 赞同：2
> 
> 时间：2012-12-20T17:35:46.707
> 
> 标签：windows, strace

我正在寻找类似 Windows 的 strace 实用程序。Windows上有任何（最好是免费的）替代品吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:37:34.743

查看 SysInternals 的进程监视器。

# r - 更改箱线图的布局并为其添加标签

> ID：13977561
> 
> 赞同：8
> 
> 时间：2012-12-20T17:35:58.750
> 
> 标签：r, plot, ggplot2, lattice, boxplot

我想（得到建议）创建具有不同外观的箱线图并为其添加标签。预期（不完整）输出将如下所示（每个框都有四分位数标签）和样本大小。

![在此处输入图像描述](../Images/cb8f829068fa3d728d16e52daaebb87b.png)

```
 boxplot(len~supp*dose, data=ToothGrowth, notch=TRUE,
  col=(c("gold","darkgreen")),
   main="Tooth Growth", xlab="Suppliment and Dose", names = supp )

  # some  unsuccessful trials 
 # to add names 
 boxplot(len~supp*dose, data=ToothGrowth, notch=TRUE,
  col=(c("gold","darkgreen")),
   main="Tooth Growth", xlab="Suppliment and Dose", names = supp*dose)
 # to remove the plot outline 
 boxplot(len~supp*dose, data=ToothGrowth, notch=TRUE,
  col=(c("gold","darkgreen")),
   main="Tooth Growth", xlab="Suppliment and Dose", bty="n") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T18:23:33.813

这应该让你开始。关键是要知道，如果在设置时将 的结果保存`boxplot`到对象中`plot = FALSE`，您将获得每个对象去向的所有信息。然后，您可以使用此信息通过添加文本`text`。

```
d <- boxplot(len~supp*dose, data=ToothGrowth,plot = FALSE)

 boxplot(len~supp*dose, data=ToothGrowth, notch=TRUE,
  col=(c("gold","darkgreen")),
   main="Tooth Growth", xlab="Suppliment and Dose",axes = FALSE )

for (i in 1:ncol(d$stats)){
    text(i,d$stats[,i],labels = d$stats[,i],cex = 0.75,adj = c(0.5,0))
    text(i,d$stats[5,i]+1,labels = paste0("n=",d$n[i]),cex = 0.75)
    text(i-0.25,d$stats[3,i],labels = d$names[i],adj = 1,cex = 0.75)
} 
```

但是，我要指出，无论谁建议您：

*   删除轴
*   用分位数值和样本大小注释每个箱线图

不应该向任何人提供有关制作图表的建议。曾经。他们成功地使您的箱线图变得更糟。

![在此处输入图像描述](../Images/4d3bdfca68e1622e44b55e5940d58798.png)

# matlab - 容器的Matlab栏功能.Map

> ID：13977565
> 
> 赞同：2
> 
> 时间：2012-12-20T17:36:29.423
> 
> 标签：matlab

我想用字符串中字符条目的频率构建直方图。
Matlab 版本 7.14.0.739
这是我的代码

```
string = 'sadfjwopqiejroweifoxncvpowoirjqwerr';
map = containers.Map();
for i = 1:length(string) - 1
    if (isKey(map, string(i) ))
        map(string(i)) =  map(string(i)) + 1;
    else
        map(string(i)) =  1; 
    end
end

bar(cell2mat(keys(map)), cell2mat(values(map)) ); 
```

我收到一个错误：
使用 bar 时出错（第 51 行）必须提供 Y 数据或 X 和 Y 数据作为第一个参数。

lab4 错误（第 11 行） bar(cell2mat(keys(map)), cell2mat(values(map)) );

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:33:19.543

问题是 的第一个参数`bar`必须提供条形图的 x 值。当你这样做时，`cell2mat(keys(map))`你只需创建一个长字符串，它是所有键的连接，这是`bar`.

尝试做这样的事情：

```
bar(cell2mat(values(map)));
k = keys(map);
set(gca, 'XTick', 1:length(k));
set(gca, 'XTickLabel', k); 
```

# jquery - 带有来自文本文件的数据的动态悬停详细信息

> ID：13977566
> 
> 赞同：1
> 
> 时间：2012-12-20T17:36:28.883
> 
> 标签：jquery, ajax

当用户将鼠标悬停在特定的文本字符串上时，我正在使用 jquery hovercard 插件从使用 ajax 的文本文件中提取文本 - 这一切都很好。

我已经添加了在页面加载时搜索内容并将`label`类添加到任何匹配名称的功能 - 这在定义名称时非常有用。

在我[上一个问题](https://stackoverflow.com/questions/13972038/load-text-from-specific-div-in-text-file-using-ajax)的帮助下；（非常感谢@Alex Klock），我已经得到它，因此只有一个 div 的 text/html 从悬停时的文本文件中拉入 - 在定义名称时效果很好。

我现在需要做的就是将它们拉到一起并使其动态化，以便在页面加载时将所有名称从文本文件中提取出来，将正确的`label`类添加到相关名称中，然后添加正确/对应的文本/html 在悬停时显示。

任何帮助将不胜感激:)

*//HTML代码*

```
<div id="content">
<p>jQuery by John Resig is a cross-browser JS library designed to simplify the client-side scripting of HTML. It was released in January of 2006 at BarCamp NYC. Used by over 46% of the 10,000 most visited websites, it's the most popular JavaScript library in use today Tim Berners-Lee.</p>                                  
<p>jQuery is free, Tim Berners-Lee open source software, dual-licensed under the MIT License and GNU General Public License, Tim Berners-Lee Version 2.[4] jQuery's syntax is designed to make it easier to navigate a document, select DOM elements, create animations, handle events, and John Resig develop Ajax applications.</p>
</div> 
```

*//jquery代码*

```
//based on Highlight words in text with jQuery by (http://www.gotoquiz.com/web-coding/programming/javascript/highlight-words-in-text-with-jquery/)
jQuery.fn.addhover = function (str, className) {
    var regex = new RegExp(str, "gi");
    return this.each(function () {
        $(this).contents().filter(function() {
            return this.nodeType == 3 && regex.test(this.nodeValue);
        }).replaceWith(function() {
            return (this.nodeValue || "").replace(regex, function(match) {
                return "<label class=\"" + className + "\" style=\"color:#932121;\">" + match + "</label>";
            });
        });
    });
};

$(document).ready(function () {                         

var HTML_FILE_URL = 'helloworld.txt';

$.get(HTML_FILE_URL, function(data) {
    var fileDom = $(data);
    fileDom.filter('.contact').each(function() {
        var savename = $(this).closest(".contact").attr("id");
    });
});

$("#content *").addhover("John Resig", "demo-ajax");

var hoverHTMLDemoAjax = '<div class="demo-cb-tweets"></div>';
$(".demo-ajax").hovercard({
    detailsHTML: hoverHTMLDemoAjax,
    width: 350,
    delay: 500,
    cardImgSrc: 'http://ejohn.org/files/short.sm.jpg',
    onHoverIn: function () {
        $.ajax({
            url : "helloworld.txt",
            type: 'GET',
            dataType: "text",
            beforeSend: function () {
                $(".demo-cb-tweets").prepend('<p class="loading-text">Loading latest tweets...</p>');
            },
            success: function (data) {
                var people = $(data),
                john = people.filter('#John_Resig');                        
                $(".demo-cb-tweets").empty().append(john);
            },
            complete: function () {
                $('.loading-text').remove();
            }
        });
    }
}); 
}); 
```

*//Helloworld.txt文件内容*

```
<div class="contact" id="John_Resig">
<p><strong>John_Resig Testing testing testing!</strong></p>
<p>And on another line of text : )</p>
</div>
<div class="contact" id="Tim_Berners_Lee">
<p><strong>Tim_Berners_Lee Testing testing testing!</strong></p>
<p>And on another line of text : )</p>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T17:46:50.157

这是我的解决方案：

对于您的 JavaScript 代码：

```
jQuery.fn.addhover = function (str, className) {
    var regex = new RegExp(str, "gi");
    return this.each(function () {
        $(this).contents().filter(function() {
            return this.nodeType == 3 && regex.test(this.nodeValue);
        }).replaceWith(function() {
            return (this.nodeValue || "").replace(regex, function(match) {
                return "<label class=\"" + className + "\" style=\"color:#932121;\">" + match + "</label>";
            });
        });
    });
};

$(function() {
    var HTML_FILE_URL = 'helloworld.txt';

    $.get(HTML_FILE_URL, function(data) {
        var fileDom = $(data);
        fileDom.filter('.contact').each(function() {
            var savename = $(this).closest(".contact").attr("id");
            var hovername = savename.replace(/_/g, ' ');

            $("#content *").addhover(hovername, "demo-ajax");
            var hoverHTMLDemoAjax = '<div class="demo-cb-tweets"></div>';

            $(".demo-ajax").hovercard({
                detailsHTML: hoverHTMLDemoAjax,
                width: 350,
                delay: 500,
                cardImgSrc: 'http://ejohn.org/files/short.sm.jpg',
                onHoverIn: function () {
                    $.ajax({
                        url : HTML_FILE_URL,
                        type: 'GET',
                        dataType: "text",
                        beforeSend: function () {
                            $(".demo-cb-tweets").prepend('<p class="loading-text">Loading latest tweets...</p>');
                        },
                        success: function (data) {
                            var people = $(data),
                            name = people.filter('#' + savename);
                            $(".demo-cb-tweets").empty().append(name);
                        },
                        complete: function () {
                            $('.loading-text').remove();
                        }
                    });
                }
            });

        });
    });

}); 
```

在您的文本文件中，我将 Tim_Berners_Lee 更改为 Tim_Berners-Lee。这是为了简化 ID 的解析，以便轻松地将其转换为相应的名称：

```
<div class="contact" id="John_Resig">
<p><strong>John_Resig Testing testing testing!</strong></p>
<p>And on another line of text : )</p>
</div>
<div class="contact" id="Tim_Berners-Lee">
<p><strong>Tim_Berners_Lee Testing testing testing!</strong></p>
<p>And on another line of text : )</p>
</div> 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T19:25:24.370

我设法获得了一个至少只发出 ajax 请求的[工作模型。](http://jsfiddle.net/Khez/Va5EL/)感觉还是很脏。如果您愿意，我也许可以对其进行更多调整。

```
//based on Highlight words in text with jQuery by (http://www.gotoquiz.com/web-coding/programming/javascript/highlight-words-in-text-with-jquery/)
jQuery.fn.addhover = function (str, className) {
    var regex = new RegExp(str, "gi");
    return this.each(function () {
        $(this).contents().filter(function() {
            return this.nodeType == 3 && regex.test(this.nodeValue);
        }).replaceWith(function() {
            return (this.nodeValue || "").replace(regex, function(match) {
                return "<label class=\"" + className + "\" style=\"color:#932121;\" data=\"" + match.replace(' ','_') + "\">" + match + "</label>";
            });
        });
    });
};

$(document).ready(function () {
    var HTML_FILE_URL = 'helloworld.txt';
    var cards={};
    var hoverHTMLDemoAjax = '<div class="demo-cb-tweets"></div>';

    $.get(HTML_FILE_URL, function (data) {
        cards=$(data);
        cards.each(function() {
            if(!this.id)return;
            $("#content *").addhover(this.id.replace('_',' '), 'demo-ajax');
        });
        $(".demo-ajax").hovercard({
            detailsHTML: hoverHTMLDemoAjax,
            width: 350,
            delay: 500,
            cardImgSrc: 'http://ejohn.org/files/short.sm.jpg',
            onHoverIn: function () {
                $(".demo-cb-tweets").empty().append(cards.filter('#'+$(this).children().eq(0).attr('data')));
            }
        });
    }); 
}); 
```

您需要第一个 ajax 请求，以使其根据文件中实际找到的 id 动态工作。

在同一个文件上执行后续的 ajax 请求以获取实际数据，感觉就像一个糟糕的设计。

我建议您制作两个服务器端文件（或一个处理两个请求的文件）：

1.  **getTypes** => 返回将在后续 ajax 请求中使用的 ids 以获取实际数据（如果尚未加载）
2.  **getData/for/*** => 其中 * 是数据的实际标识符（例如：Tim_Berners_Lee）。一旦完成了这样的请求，它就可以被缓存和重用。

上面设计的方法类似于[Web 服务](http://en.wikipedia.org/wiki/Web_service)之一，特别是[RPC](http://en.wikipedia.org/wiki/Remote_procedure_call)样式的 Web 服务。

请注意，根据您要实现的目标，可能存在其他更优化的解决方案。正如我在评论中提到的，如果您使用这种技术来填充最新的推文。无需从您的服务器退回该请求。[您可以直接从 twitter api 中提取它](https://github.com/kerberoS/jQuery-Tweets)！

# database - 可以在 ID 中添加字母，但仍会自动编号

> ID：13977567
> 
> 赞同：0
> 
> 时间：2012-12-20T17:36:31.013
> 
> 标签：database, auto-increment

我有称为书籍的数据库。

我希望将书籍数据库中的 ID 设为 B1、B2 等，然后自动增加数字。

这是由系统自动完成的，还是在将任何内容插入数据库时​​我必须自己制作 ID？

注意我使用的是 php。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:37:52.937

唯一可以自动递增的 ID 类型是基于数字的 ID。

您必须手动输入的任何其他内容（或**不**推荐在数据库中随意输入）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:41:26.957

我认为您应该将 ID 保留为整数，如果您想将其显示为 B1、B2 等，只需这样做并在需要进行数据库调用时删除“B”。

# qt - 在 QTableWidget 中禁用键盘搜索

> ID：13977572
> 
> 赞同：2
> 
> 时间：2012-12-20T17:36:52.633
> 
> 标签：qt, qtablewidget

我正在使用一个`QTableWidget`我用纯文本项目填充它。如果我选择一个单元格并按下一个键，则选择更改为一个以按下的键作为其起始字母的单元格。如何禁用此行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T02:51:42.233

您需要定义自己的 TableWidget 类继承 QTableWidget 类并使用空实现覆盖虚拟键盘搜索（）函数。这将禁用键盘搜索功能。

```
class MyTableWidget : public QTableWidget
{
...
public:
  virtual void keyboardSearch(const QString& search) {};
...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-27T11:13:32.613

公认的解决方案存在问题，即 QAbstractItemView 派生类型（QTableWidget）仍然会接受并因此窃取各种关键事件。例如，如果您想在`q`按下键时关闭父窗口小部件，则不会获得`q`按键事件。

查看源代码`QAbstractItemView::keyPressEvent`，键盘搜索仅在事件文本非空时触发。所以，我发现它是一个更好的解决方案来覆盖`keyPressEvent`，在事件中清除此文本，然后调用基类实现：

```
class MyTable :
    public QTableView
{
public:
    void
    keyPressEvent( QKeyEvent* event ) override
    {
        /* Clear text in order to avoid keyboardSearch being triggered */
        QKeyEvent textClearedEvent( event->type(),
                                    event->key(),
                                    event->modifiers(),
                                    event->nativeScanCode(),
                                    event->nativeVirtualKey(),
                                    event->nativeModifiers(),
                                    QString(),
                                    event->isAutoRepeat(),
                                    event->count() );

        QTableView::keyPressEvent( &textClearedEvent );

        event->setAccepted( textClearedEvent.isAccepted() );
    } 
```

通过安装类似的事件过滤器，这甚至可以在不继承的情况下工作。

# coldfusion - 主题行中的 ColdFusion 文本符号

> ID：13977573
> 
> 赞同：1
> 
> 时间：2012-12-20T17:36:52.623
> 
> 标签：coldfusion, coldfusion-9, cfmail

嗨，我想将[http://fsymbols.com/all/](http://fsymbols.com/all/)网站中的一个文本符号放入我的coldfusion cfmail 主题行，我该怎么做？我按照这篇文章[ColdFusion cfmail special characters in subject line](https://stackoverflow.com/questions/9374948/coldfusion-cfmail-special-characters-in-subject-line)的说明进行操作，我猜这些符号不起作用？我正在使用剪刀✂符号，当我收到电子邮件时它会转换为 âœ

请建议或帮助。

```
 <cfset strSubject="✂#qrynotify.EmailSubject#">
    <cfset strSubject=ToBase64(strSubject, "utf-8")>         

    <cfmail from="test@tesy.com" to="#qrynotify.Email#" 
            subject="=?utf-8?B?#strSubject#?=" 
            server="localhost" type="html" charset="utf-8">#qrynotify.EmailContent#</cfmail> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:19:25.987

感谢大家的努力，我能够解决这个问题。

```
 <cfprocessingdirective pageEncoding="utf-8"> 
    <cfmail from="test@tesy.com" to="#qrynotify.Email#" 
                subject="✂#qrynotify.EmailSubject#" 
                server="localhost" type="html" charset="utf-8">#qrynotify.EmailContent#</cfmail> 
```

我将剪刀符号直接放入主题属性中，而不是将其设置在变量中并让 ColdFusion 进行评估。我还添加了 Peter 建议的 cfprocessingdirective。

谢谢

# wordpress - 更改为从右到左 wordpress 主题 css

> ID：13977576
> 
> 赞同：1
> 
> 时间：2012-12-20T17:37:05.023
> 
> 标签：wordpress, wordpress-theming, right-to-left

我有一个包含 style.css 和 rtl.css 的 wordpress 主题，在其他主题文件旁边。我想将主题更改为从右到左的阿拉伯语。我该怎么办？在 style.css 中使用 @import？或者替换 style.css 中的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T19:29:44.117

Wordpress 支持有关于如何制作 wordpress 主题 RTL 的分步说明：

[RTL 语言支持](http://codex.wordpress.org/Right-to-Left_Language_Support)

还有一个插件可以显示主题在 RTL 中的外观：

[http://wordpress.org/extend/plugins/rtl-tester/](http://wordpress.org/extend/plugins/rtl-tester/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:41:23.547

在您的`header.php`文件中，您将有一行类似于：

```
<link href="<?php bloginfo('stylesheet_url'); ?>" rel="stylesheet" type="text/css" /> 
```

将其替换为：

```
<link href="<?php bloginfo('template_url'); ?>/rtl.css" rel="stylesheet" type="text/css" /> 
```

您正在用从右到左的样式表替换默认样式表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T06:28:21.277

要在 wordpress 中激活从右到左 (RTL)，您应该首先通过编辑 wp-config.php 中的行将语言定义为阿拉伯语，只需在“”之间添加 ar 为“ar”

```
define( 'WPLANG', 'ar' ); 
```

然后，转到[http://ar.wordpress.org](http://ar.wordpress.org)并下载包，解压缩/解压缩并将文件夹 /wp-content/languages 上传到您的 wordpress /wp-content 刷新您的博客，它应该会自动更改为阿拉伯语

> PS：更改 WPLANG 将影响管理菜单，模板中的所有内容都将更改为匹配**ar.po**的语言（如果由主题或插件翻译，则在 /languages 文件夹中。

请注意，语言文件必须与 WPLANG 名称匹配，在这种情况下 WPLANG 设置为 ar，因此 .po 文件必须是 ar.po。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T14:27:54.400

导航到 WordPress 仪表板中的设置 => 常规，然后选择首选的“站点语言”——不要忘记点击“保存更改”按钮。WordPress 会检测您选择的语言是否是 RTL 语言，当您的 WordPress 主题支持 RTL 时，会自动加载 rtl.css 样式表，并且您的网站将以 RTL 显示。就是这样。

有关更多信息，请访问此页面：[如何为您的 WordPress 网站启用 RTL？](https://www.mhthemes.com/support/enable-rtl-language-support-wordpress/)

# c++ - 从 void 指针转换（创建通用存储）有什么问题吗？

> ID：13977579
> 
> 赞同：0
> 
> 时间：2012-12-20T17:37:23.527
> 
> 标签：c++, string, casting, void-pointers

我正在尝试在 C++ 中创建一个通用存储类。如果您查看下面的代码，我想存储`string`/的地图`AnyType`并访问它们。

```
 class StoresTestC
  {
  public:
    template < class SettingsType >
    std::map< std::string, SettingsType >* getStore(std::string const&);
  private:
    std::map< std::string, void* > stores_;
  };

  template < class SettingsType >
  std::map< std::string, SettingsType >* StoresTestC::getStore(std::string const& name)
  {
    if (stores_.count(name) > 0)
    {
      void* temp = this->stores_[name];
      return (std::map< std::string, SettingsType >*)(temp);
    }
    else
    {
      std::map< std::string, SettingsType > * result = new std::map< std::string, SettingsType > ();
      this->stores_[name] = result;
      return result;
    }
  } 
```

我看到这样做有两个明显的危险：

1.  如果我用错误的方式调用它`SettingsType`/`name`我将调用错误的演员阵容，据我所知（我可能是错的）将导致未定义的行为。

2.  它会造成内存泄漏，但我有一个解决方案（这里也有两个很长的内容）。

还有什么其他可能出错的地方吗？你能预见到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:47:16.987

首先退后一步，确保你*真的*想要这样做。然后再看一次你的设计。

好的，你还需要这个能力吗？

`std::map<std::string, boost::any>`在`boost::any`始终是`map`类型的地方使用。然后，当您使用`any_cast`或任何机制将项目取回时，您可以保证它是正确的类型或者它会抛出，因此您永远不会冒未定义行为的风险。此外，由于`any`按值计算，您也不会出现内存泄漏。

我还应该注意，在您的原始解决方案中，如果您使用 a`shared_ptr<void*>`它会记住如何删除存储在其中的原始类型，`shared_ptr`从而消除您提到的内存泄漏。

编辑：我看不到任何其他明显的技术问题。但是请注意，拥有这样的地图可能/可能会给未来的维护者带来*认知*（“grokking”）问题，并且确实会增加代码的复杂性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:56:48.207

是的，您对第 1 点的怀疑是正确的（正如您提到的，第 2 点应该是可以解决的，但请考虑应该正确调用包含的地图的析构函数）。

`SettingsType`如果不提供客户端跟上的简单机制和`std::string`同步的“类型名”表示，我不会放过这样的接口。一个简单的错字可能会搞砸整个事情。我认为`boost::any`只要您尝试将值转换为所需/预期的结果类型，这只会表达这一点。

为什么你需要`std::string`在这里代表？例如，如果您使用 RTTI，您可以隐藏用于`stores_`使用的密钥`typeid()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:55:22.827

既然您必须将类型作为模板参数传递来获取地图，那么每种类型只有一个地图是否可行？

```
namespace StoresTest {
  template<typename T>
  struct MapStruct {
    static std::map<std::string, T> the_map;
  };

  template<typename T> std::map<std::string, T> MapStruct<T>::the_map;

  template<typename T>
  inline std::map<std::string, T>& getStore()
  { return MapStruct<T>::the_map; }
} 
```

然后例如，您可以`Foo`通过执行获取具有值类型的地图

```
std::map<std::string, Foo>& foo_map = StoresTest::getStore<Foo>(); 
```

您不再需要为`string`类型命名，但如果您有其他原因需要它，可以添加它。

# c++ - 如何在 Windows 应用中启用常用控件

> ID：13977583
> 
> 赞同：8
> 
> 时间：2012-12-20T17:37:33.850
> 
> 标签：c++, winapi

我正在尝试在应用程序中启用常用控件。我遵循了[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx)中给出的步骤，特别是[在仅使用标准扩展的应用程序中使用 ComCtl32.dll 版本 6 部分](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773175%28v=vs.85%29.aspx#no_extensions)。但我无法让它工作。

与文章唯一不同的是，我在**Project Property Pages |中添加了清单信息。配置属性 | 链接器 | 清单文件 | 附加清单依赖项**。这是我在文本框中输入的内容：

*"type='Win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*' xmlns=' [http://schemas.microsoft。 com/developer/msbuild/2003](http://schemas.microsoft.com/developer/msbuild/2003) '";%(AdditionalManifestDependencies)*

当我检查生成的清单（MyApp.exe.intermediate.manifest）时，它看起来是正确的。

我还在**项目属性 |中添加了对 ComCtl32.lib 的链接依赖项。配置属性 | 链接器 | 输入 | 附加依赖项**。我还在启动时调用 InitCommonControlsEx，初始化的 INITCOMMONCONTROLSEX 结构如下：

```
INITCOMMONCONTROLSEX icex;
icex.dwSize = sizeof(INITCOMMONCONTROLSEX);
icex.dwICC = ICC_STANDARD_CLASSES; 
```

但是对 InitCommonControlsEx 的调用总是返回 FALSE（这意味着它失败了）。经过一番调查，我发现从 GetLastError 返回的错误代码是 ERROR_FILE_NOT_FOUND。可能是什么问题呢？

**更新：**我注意到一些可能与“找不到文件错误”有关的东西。当我从调试器运行应用程序时，输出窗口中的一行是：

> “MyApp.exe”：已加载“C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.6002.18305_none_88f3a38569c2c436\comctl32.dll”，找不到或打开 PDB 文件

但是，对于一些更标准的库，如 kernel32.lib、user32.lib 等，有很多类似的行：

> “MyApp.exe”：已加载“C:\Windows\System32\ntdll.dll”，无法找到或打开 PDB 文件
> 
> “MyApp.exe”：已加载“C:\Windows\System32\kernel32.dll”，找不到或打开 PDB 文件
> 
> “MyApp.exe”：已加载“C:\Windows\System32\msvcrt.dll”，无法找到或打开 PDB 文件
> 
> “MyApp.exe”：已加载“C:\Windows\System32\user32.dll”，无法找到或打开 PDB 文件

这些行总是出现在任何应用程序中，并且不会导致任何问题。ComCtl32.dll 会有所不同吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T19:46:06.733

好的。我对此做了一些功课，并自己发现了一些新东西。我最终如何让这个工作*几乎*是你想要做的：

1.  转到**项目/属性/链接器/清单文件/附加清单依赖项**
2.  **逐字**输入以下文本（表示所有单引号和双引号，如下所示）。顺便说一句，这一切都在一条线上。

    `"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'"`

3.  保存您的设置并重新构建完整的项目（如果不是解决方案）以强制清单和 PCH 重新生成。

在执行此操作之前，我的加载列表中有以下内容：

> 加载 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_5.82.7601.17514 **_none_ec83dffa859149af** \comctl32.dll'

在手动强制通用控件的清单版本之后，加载列表现在包括这个（并且正确地回答 TRUE `InitCommonControlsEx()`，这首先是所有这些的重点）：

> 加载 'C:\Windows\winsxs\x86_microsoft.windows.common-controls_6595b64144ccf1df_ **6.0.7601.17514** _none_41e6975e2bd6f2b2\comctl32.dll'

注意：您也可以使用源内#pragma 执行此操作，最好是在您的 stdafx.h 标头中，但我更喜欢这种方式。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-20T19:43:10.783

不，有关 PDB 文件的警告只是告诉您没有 Windows 系统 DLL 的调试信息。从 InitializeCommonControlsEx() 获得 FALSE 返回当然是关键问题。

您使用的 Additional Manifest Dependencies 字符串有问题。我修补了一段时间，但找不到漏洞。在源代码中指定链接器选项通常更容易。我使用时一切正常：

```
#include <CommCtrl.h>
#pragma comment(lib,"comctl32.lib")
#pragma comment(linker,"/manifestdependency:\"type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' processorArchitecture='*' publicKeyToken='6595b64144ccf1df' language='*'\"") 
```

只需将上面的代码片段复制并粘贴到您的源文件之一中即可。

# jsf - 从服务器端 Java 设置的 A4J AJAX 处理程序参数

> ID：13977591
> 
> 赞同：1
> 
> 时间：2012-12-20T17:38:01.727
> 
> 标签：jsf, richfaces, jsf-1.2, ajax4jsf

如何添加服务器端在所有 ajax 响应中发送的内容，以便我可以添加自己的参数？

我已经扩展了 Richfaces JavaScript`A4J.AJAX.finishRequest`来触发自定义事件，我想从服务器向它传递参数：

```
var originalFinishRequest = A4J.AJAX.finishRequest;

A4J.AJAX.finishRequest = function(request) {
    var parameters = request.options.parameters;
    if (!request._oncomplete_aborted) {

       jQuery(document).trigger('onAutofocus',parameters);
    }
    originalFinishRequest(request);
}; 
```

另一种看待它的方式是，什么响应服务器端对 A4J.AJAX.Submit 的调用以及如何围绕它包装自己的代码？

* * *

**我的解决方案**

根据 BalusC 的回答，这就是我最终放入主模板的内容：

```
<a4j:outputPanel ajaxRendered="true">
  <c:if test="#{not empty flowScope.autofocusSelectors}">
    <script>
      document.autofocusSelectors = #{flowScope.autofocusSelectors};
      console.log("BASE TEMPLATE: autofocus: (#{flowScope.autofocusSelectors})");
    </script>
  </c:if>
  <script>
    console.log("BASE TEMPLATE AJAX RENDER")
    //NB: autofocusSelectors not always set, and not only reason to autofocus
    jQuery(document).trigger('onAutofocus');
  </script>
</a4j:outputPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:11:00.573

虽然这在标准化[one](http://docs.oracle.com/javaee/6/api/javax/faces/context/PartialViewContext.html)和[other](http://docs.oracle.com/javaee/6/api/javax/faces/context/PartialResponseWriter.html)的 JSF2 中很容易，但在 RichFaces 3.x Ajax4jsf 中这并不是微不足道的。Ajax 响应由`org.ajax4jsf.Filter`它处理，而这些响应又从其他中扩展[`BaseXmlFilter`](http://grepcode.com/file/repository.jboss.org/maven2/org.richfaces.framework/richfaces-impl/3.3.2.GA/org/ajax4jsf/webapp/BaseXMLFilter.java/)。所有的 ajax 响应编写代码都在那里。它没有以允许轻松添加自定义标签/脚本的方式进行抽象。你基本上需要复制'n'粘贴'n'修改它。只是不值得努力。

一种更简单的方法是自动 ajax 渲染一些`<script>`包含 JS 风格的所需变量的片段，以便可以将 bean 属性分配为全局 JS 变量。

```
<a4j:outputPanel ajaxRendered="true">
    <script type="text/javascript">
        var parameters = <h:outputText value="#{bean.paramsAsJson}" />;
    </script>
</a4j:outputPanel> 
```

*（`ajaxRendered="true"`确保这是在每个 ajax 请求上自动重新呈现，因此您无需将其 ID 显式添加到`reRender`某些 A4J 组件的属性中）*

where`getParamsAsJson()`只返回一个有效 JSON 格式的 Java 字符串，例如 as `{ foo: "foo", bar: "bar" }`。这样你就可以使用

```
A4J.AJAX.finishRequest = function(request) {
    if (!request._oncomplete_aborted) {
       jQuery(document).trigger('onAutofocus', parameters);
    }
    originalFinishRequest(request);
}; 
```

*（请注意，`request.options.parameters`基本上包含客户端在触发 ajax 请求时发送的请求参数，而不是服务器端在返回 ajax 响应时设置的变量，因此首先查看它已经错了）*

此外，我不完全确定您为什么要`A4J.AJAX.finishRequest`像这样覆盖而不是 using `<a4j:status onstop="...">`，但假设您只是不知道它，以下是您可以使用它的方法：

```
<a4j:status onstop="jQuery(document).trigger('onAutofocus', parameters)" /> 
```

# algorithm - 图形填充算法 - 获取边框

> ID：13977593
> 
> 赞同：2
> 
> 时间：2012-12-20T17:38:20.507
> 
> 标签：algorithm, graphics

任何人都可以建议我一个算法，而不是填充一个区域，而是返回一个点列表，这些点是这个区域的“边界”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T19:11:45.590

你想要的是找到一个点集的[凸包](http://en.wikipedia.org/wiki/Convex_hull)，然后找到凸包的支撑点。

您实际上可以为此目的重用 C++ [CGAL 库（这是该领域的 IMO 最先进的技术）。](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Convex_hull_2/Chapter_main.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T19:17:12.073

[Flood fill](http://en.wikipedia.org/wiki/Flood_fill)，或者您可以处理图像并遍历边缘。取决于你的输入。

# arduino - Arduino串行通信

> ID：13977594
> 
> 赞同：0
> 
> 时间：2012-12-20T17:38:27.917
> 
> 标签：arduino

因为每当电机倒车时我都更换了电机控制器，所以它不会在应该刹车的时候刹车......

继续前进，很好，只要我按住控制台应用程序上的按钮，它就会运行。左转/右转，正在反转的电机将不停地运转。向后移动，两者都会不停地奔跑。

```
 // Firmware for the Android Shield Board for tank robots
// Pan/tilt servos now work: 0 pin off, 255 pin on, 1~254 8 bit granularity servo movement (5 microseconds).
#define PwmPinMotorA 11
#define PwmPinMotorB 6
#define DirectionPinMotorA 3
#define DirectionPinMotorB 5
#define ServoPin1 0
#define ServoPin2 0
#define ServoFlip1 false
#define ServoFlip2 false

#define mySerialSpeed 9600 // arduino 2009: 4800 or lower!
#define debugSerialSpeed 9600 // arduino 2009: 4800 or lower!
#define BufferLength 16
#define LineEnd1 13
#define LineEnd2 10
#define ServoTimingStep 5
#define ServoCenter 1500
#define ServoTimingFloor ServoCenter-(127*ServoTimingStep)

//#define serialout
#define debugout

#include <SoftwareSerial.h>

SoftwareSerial mySerial(12, 255); // rx only

char charin = 80;
char inputBuffer[BufferLength];
int value = 128;
int speed = 128;
int timer = 15;
int timermax = 15;
int inputLength = 0;
int servoval1 = 127;
int servoval2 = 127;
int tempval1, tempval2;

void setup()
{
  // motor pins must be outputs
  pinMode(PwmPinMotorA, OUTPUT);
  pinMode(PwmPinMotorB, OUTPUT);
  pinMode(DirectionPinMotorA, OUTPUT);
  pinMode(DirectionPinMotorB, OUTPUT);
  mySerial.begin(mySerialSpeed); 
#ifdef debugout
  Serial.begin(debugSerialSpeed);
#endif
}

// process a command string
void HandleCommand(char* input, int length)
{
#ifdef debugout
  Serial.print(">");
  Serial.print(input);
  Serial.print("<");
  Serial.print(length);
  Serial.println("|");
#endif
  if (length < 1) { // not a valid command
    return;
  }
  // calculate number following command (d10~d255)
  if (length > 1) {
    value = atoi(&input[1]);
    if (value > 255)
      value = 255;
    if (value < 0)
      value = 0;
    switch(input[0])
    {
    case 'd':
    case 'D':
      if (value > 127)
        value = 127;
      speed = value*2; 
      break;
    case '/':
      timermax = value; 
      break;
    case 'c':
    case 'C':
      #ifdef ServoFlip1
      servoval1 = 256 - value; 
      #else
      servoval1 = value; 
      #endif
      break;
    case 'v':
    case 'V':
      #ifdef ServoFlip2
      servoval2 = 256 - value; 
      #else
      servoval2 = value; 
      #endif
      break;
    default:
      break;
    }
  }

  timer = timermax;

  int* command = (int*)input;
  // check commands
  // note that the two bytes are swapped, ie 'RA' means command AR

  switch(*command) {

  case '2':
  case '2j':
  case '2J':
    analogWrite(PwmPinMotorB, speed);
    digitalWrite(DirectionPinMotorB, LOW);
    analogWrite(PwmPinMotorA, speed);
    digitalWrite(DirectionPinMotorA, HIGH);
    break;

  case '8':
  case '8j':
  case '8J':
    analogWrite(PwmPinMotorB, speed);
    digitalWrite(DirectionPinMotorB, HIGH);
    analogWrite(PwmPinMotorA, speed);
    digitalWrite(DirectionPinMotorA, LOW);
    break;

  case '6':
  case '6j':
  case '6J':
    analogWrite(PwmPinMotorB, speed);
    digitalWrite(DirectionPinMotorB, HIGH);
    analogWrite(PwmPinMotorA, speed);
    digitalWrite(DirectionPinMotorA, HIGH);
    break;

  case '4':
  case '4j':
  case '4J':
    analogWrite(PwmPinMotorB, speed);
    digitalWrite(DirectionPinMotorB, LOW);
    analogWrite(PwmPinMotorA, speed);
    digitalWrite(DirectionPinMotorA, LOW);
    break;

  case '9':
  case '9j':
  case '9J':
    analogWrite(PwmPinMotorB, speed);
    digitalWrite(DirectionPinMotorB, HIGH);
    break;

  case '1':
  case '1j':
  case '1J':
    analogWrite(PwmPinMotorB, speed);
    digitalWrite(DirectionPinMotorB, LOW);
    break;

  case '3':
  case '3j':
  case '3J':
    analogWrite(PwmPinMotorA, speed);
    digitalWrite(DirectionPinMotorA, HIGH);
    break;

  case '7':
  case '7j':
  case '7J':
    analogWrite(PwmPinMotorA, speed);
    digitalWrite(DirectionPinMotorA, LOW);
    break;

  default: // stop, just to be safe
    analogWrite(PwmPinMotorA, 0);
    digitalWrite(DirectionPinMotorA, LOW);
    analogWrite(PwmPinMotorB, 0);
    digitalWrite(DirectionPinMotorB, LOW);
    break;

  }  
} 

void loop()
{ 
  // get a command string form the mySerial port
  inputLength = 0;
  do {
    while (!mySerial.available()){
      // note: arduino cannot handle fullduplex on myserial so no output here!

      // do servos here
      tempval1 = (servoval1*ServoTimingStep) + ServoTimingFloor;
      tempval2 = (servoval2*ServoTimingStep) + ServoTimingFloor;
      if (servoval1 > 0)
        digitalWrite(ServoPin1,HIGH);
      delayMicroseconds(tempval1);
      if (servoval1 < 255)
        digitalWrite(ServoPin1,LOW);
      if (servoval2 > 0)
        digitalWrite(ServoPin2,HIGH);
      delayMicroseconds(tempval2);
      if (servoval2 < 255)
        digitalWrite(ServoPin2,LOW);
      delayMicroseconds(5000 - tempval1 - tempval2);
      delay(15); // reduce/remove if we're doing more things here

      // decrease the timer
      if (--timer < 0)
      { 
        timer=0;
        analogWrite(PwmPinMotorA, 0);
        analogWrite(PwmPinMotorB, 0);
      }
    }; 

    // wait for input 
    {
      charin = mySerial.read(); // read it in
#ifdef debugout
        Serial.print(charin);
        tempval1 = charin;
        Serial.println(tempval1);
#endif

      if ((charin > 46 && charin < 58) || (charin=='d') || (charin=='j') || (charin=='c') || (charin=='v'))
      {
        inputBuffer[inputLength]=charin;
        inputLength++;

#ifdef serialout
        mySerial.print("$PD,11,");
        mySerial.print(timer);
        mySerial.print(",");
        mySerial.print(value);
        mySerial.println("*");
#endif
      }

    }
  } 
  while (charin>46 && charin<119 && charin != LineEnd1 && charin != LineEnd2 && inputLength < BufferLength);
  inputBuffer[inputLength] = 0; //  add null terminator
  HandleCommand(inputBuffer, inputLength);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:06:26.453

我在 Arduino 1.0 中编译了您的代码，并在我的 Pro Mini 16MHz 328 上运行它，并进行了以下修改：

```
//#define debugout

HardwareSerial mySerial = Serial; 
```

并通过以下修改在我的 Mega 16MHz 2560 上运行它：

```
#define PwmPinMotorA 7

//#define debugout

HardwareSerial mySerial = Serial; 
```

它似乎工作正常（从我的示波器上的代码和结果来看）。

我一直在使用 SoftwareSerial 与我的 GPS 通信，我注意到如果我以 9600 波特率运行它，它会出现奇怪的错误。我必须跑到 4800 才能获得无缝通信。

显然，这并不能解释为什么您的 --timer<0 会被忽略。我建议重写它，以便始终按如下方式处理计时器功能：

```
unsigned long timeout   = 2000;  // 2 seconds
unsigned long clrtime   = 0;
boolean       timecheck = false;

// ... upon command set the event
clrtime = millis() + timeout;
timecheck = true;

// ... every loop check for event
if (timecheck && millis() > clrtime) 
{
  timecheck = false;
  analogWrite(PwmPinMotorA, 0);
  analogWrite(PwmPinMotorB, 0);
} 
```

这是处理定时事件的一种更安全的方法。注意不要覆盖 Arduino 用于 delay()、delayMicroseconds()、micros() 和 millis() 的 Timer0。我还建议交换引脚 3 和 6 以保持 Timer2 作为两者的源。这是我测试的最终代码：

```
// Firmware for the Android Shield Board for tank robots
// Pan/tilt servos now work: 0 pin off, 255 pin on, 1~254 8 bit granularity 
// servo movement (5 microseconds).

// Required Libraries //////////////////////////////////////////////////////////

// Pin Mapping /////////////////////////////////////////////////////////////////

// Arduino 3  [PD3](INT1/OC2B) OC2B (Timer/Counter2 Output Compare Match B Output)
// Arduino 4  [PD4](XCK/T0)    T0 (Timer/Counter 0 External Counter Input)
// Arduino 5  [PD5](T1/OC0B)   T1 (Timer/Counter 1 External Counter Input)
//                             OC0B (Timer/Counter0 Output Compare Match B Output)
// Arduino 6  [PD6](AIN0/OC0A) OC0A (Timer/Counter0 Output Compare Match A Output)
// Arduino 8  [PB0](ICP/CLKO)  ICP1 (Timer/Counter1 Input Capture Input)
// Arduino 9  [PB1](OC1A)      OC1A (Timer/Counter1 Output Compare Match A Output)
// Arduino 10 [PB2](SS/OC1B)   OC1B (Timer/Counter1 Output Compare Match B Output)
// Arduino 11 [PB3](MOSI/OC2)  OC2A (Timer/Counter2 Output Compare Match A Output)
  #define PwmPinMotorA 11
  #define PwmPinMotorB 3        // SWAPPED!
  #define DirectionPinMotorA 6  // SWAPPED!
  #define DirectionPinMotorB 5
  #define ServoPin1 0
  #define ServoPin2 0
  #define ServoFlip1 false
  #define ServoFlip2 false

// Global Macros ///////////////////////////////////////////////////////////////

  #define mySerialSpeed 9600 // arduino 2009: 4800 or lower!
  #define debugSerialSpeed 9600 // arduino 2009: 4800 or lower!
  #define BufferLength 16
  #define LineEnd1 13
  #define LineEnd2 10
  #define ServoTimingStep 5
  #define ServoCenter 1500
  #define ServoTimingFloor ServoCenter-(127*ServoTimingStep)

// Global Variables ////////////////////////////////////////////////////////////

  HardwareSerial mySerial = Serial;

  char charin = 80;
  char inputBuffer[BufferLength];
  int value = 128;
  int speed = 128;
  int inputLength = 0;
  int servoval1 = 127;
  int servoval2 = 127;
  int tempval1, tempval2;
  unsigned long timeout   = 2000;  // 2 seconds
  unsigned long clrtime   = 0;
  boolean       timecheck = false;

// Hardware Setup //////////////////////////////////////////////////////////////

  void setup()
  {
    // motor pins must be outputs
    pinMode(PwmPinMotorA, OUTPUT);
    pinMode(PwmPinMotorB, OUTPUT);
    pinMode(DirectionPinMotorA, OUTPUT);
    pinMode(DirectionPinMotorB, OUTPUT);
    mySerial.begin(mySerialSpeed); 
  }
  // setup()

// Main Code ///////////////////////////////////////////////////////////////////

  void loop()
  { 
    // get a command string form the mySerial port
    inputLength = 0;
    do {
      while (!mySerial.available()){
        // note: arduino cannot handle fullduplex on myserial so no output here!

        // do servos here
        tempval1 = (servoval1*ServoTimingStep) + ServoTimingFloor;
        tempval2 = (servoval2*ServoTimingStep) + ServoTimingFloor;
        if (servoval1 > 0)
          digitalWrite(ServoPin1,HIGH);
        delayMicroseconds(tempval1);
        if (servoval1 < 255)
          digitalWrite(ServoPin1,LOW);
        if (servoval2 > 0)
          digitalWrite(ServoPin2,HIGH);
        delayMicroseconds(tempval2);
        if (servoval2 < 255)
          digitalWrite(ServoPin2,LOW);
        delayMicroseconds(5000 - tempval1 - tempval2);
        delay(15); // reduce/remove if we're doing more things here

        // handle the timeout
        if (timecheck && millis() > clrtime) 
        {
          timecheck = false;
          analogWrite(PwmPinMotorA, 0);
          analogWrite(PwmPinMotorB, 0);
        }
      }; 

      // wait for input 
      {
        charin = mySerial.read(); // read it in

        if ((charin > 46 && charin < 58) || (charin=='d') || 
            (charin=='j') || (charin=='c') || (charin=='v'))
        {
          inputBuffer[inputLength]=charin;
          inputLength++;
        }

      }
    } 
    while (charin>46 && charin<119 && charin != LineEnd1 && 
           charin != LineEnd2 && inputLength < BufferLength);
    inputBuffer[inputLength] = 0; //  add null terminator
    HandleCommand(inputBuffer, inputLength);
  }
  // loop()

// Local Methods ///////////////////////////////////////////////////////////////

  // process a command string
  void HandleCommand(char* input, int length)
  {
    if (length < 1) { // not a valid command
      return;
    }
    // calculate number following command (d10~d255)
    if (length > 1) {
      value = atoi(&input[1]);
      if (value > 255)
        value = 255;
      if (value < 0)
        value = 0;
      switch(input[0])
      {
      case 'd':
      case 'D':
        if (value > 127)
          value = 127;
        speed = value*2; 
        break;
      case '/':
        timeout = 100 * value; 
        break;
      case 'c':
      case 'C':
        #ifdef ServoFlip1
        servoval1 = 256 - value; 
        #else
        servoval1 = value; 
        #endif
        break;
      case 'v':
      case 'V':
        #ifdef ServoFlip2
        servoval2 = 256 - value; 
        #else
        servoval2 = value; 
        #endif
        break;
      default:
        break;
      }
    }

    clrtime = millis() + timeout;
    timecheck = true;

    int* command = (int*)input;
    // check commands
    // note that the two bytes are swapped, ie 'RA' means command AR

    switch(*command) {

      case '2':
      case '2j':
      case '2J':
        analogWrite(PwmPinMotorB, speed);
        digitalWrite(DirectionPinMotorB, LOW);
        analogWrite(PwmPinMotorA, speed);
        digitalWrite(DirectionPinMotorA, HIGH);
        break;

      case '8':
      case '8j':
      case '8J':
        analogWrite(PwmPinMotorB, speed);
        digitalWrite(DirectionPinMotorB, HIGH);
        analogWrite(PwmPinMotorA, speed);
        digitalWrite(DirectionPinMotorA, LOW);
        break;

      case '6':
      case '6j':
      case '6J':
        analogWrite(PwmPinMotorB, speed);
        digitalWrite(DirectionPinMotorB, HIGH);
        analogWrite(PwmPinMotorA, speed);
        digitalWrite(DirectionPinMotorA, HIGH);
        break;

      case '4':
      case '4j':
      case '4J':
        analogWrite(PwmPinMotorB, speed);
        digitalWrite(DirectionPinMotorB, LOW);
        analogWrite(PwmPinMotorA, speed);
        digitalWrite(DirectionPinMotorA, LOW);
        break;

      case '9':
      case '9j':
      case '9J':
        analogWrite(PwmPinMotorB, speed);
        digitalWrite(DirectionPinMotorB, HIGH);
        break;

      case '1':
      case '1j':
      case '1J':
        analogWrite(PwmPinMotorB, speed);
        digitalWrite(DirectionPinMotorB, LOW);
        break;

      case '3':
      case '3j':
      case '3J':
        analogWrite(PwmPinMotorA, speed);
        digitalWrite(DirectionPinMotorA, HIGH);
        break;

      case '7':
      case '7j':
      case '7J':
        analogWrite(PwmPinMotorA, speed);
        digitalWrite(DirectionPinMotorA, LOW);
        break;

      default: // stop, just to be safe
        analogWrite(PwmPinMotorA, 0);
        digitalWrite(DirectionPinMotorA, LOW);
        analogWrite(PwmPinMotorB, 0);
        digitalWrite(DirectionPinMotorB, LOW);
        break;

    }  
  } 
```

因为我不能导致您遇到相同的错误，所以我无法判断这是否解决了问题。祝你好运。

# javascript - 在 JS 中添加幻灯片动画

> ID：13977605
> 
> 赞同：-1
> 
> 时间：2012-12-20T17:39:27.493
> 
> 标签：javascript, jquery, validation

如何通过验证向我的联系表单添加淡入淡出动画？我不想使用 CSS 过渡。我只是不确定在下面的代码中将 fadeIn 放在哪里：

```
$('#message').focusout(function() {
    if (!$(this).val())
        $(this).addClass('error').parent().find('mark').removeClass('valid').addClass('error');
    else
        $(this).removeClass('error').parent().find('mark').removeClass('error').addClass('valid');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:58:54.550

假设您要实现淡入动画，用于验证输入字段，并且您还需要验证用户何时离开焦点。

你的方法是正确的

您可以按照此 SO 发布在此处[淡入淡出添加或删除类](https://stackoverflow.com/questions/8875542/add-fade-in-or-fade-out-on-the-addclass-removeclass-event)

我测试了你在评论中发布的 Jsfiddle，focusout 在这种情况下不起作用，你必须使用 onblur

而且你不能在这里使用 jquery addclsss 你必须使用[JqueryUI](http://jqueryui.com/) [addClass](http://jqueryui.com/addClass/)和[removeClass](http://jqueryui.com/removeClass/) API 来实现类更改期间的动画

当然，有一些 hacks 使用，您可以在没有 Jquery UI 的情况下实现这一目标，但这仍然是经过测试的方法并且很容易实现。

# windows-8 - 使用 ID2D1RenderTarget::DrawText 时如何获取文本范围

> ID：13977611
> 
> 赞同：4
> 
> 时间：2012-12-20T17:39:58.220
> 
> 标签：windows-8, directx, direct2d, directwrite

使用 Direct2D，我可以使用 ID2D1RenderTarget::DrawText 来绘制文本，但是如何在绘制之前获取文本范围？请注意，我希望在 Windows 8 RT 下执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T05:35:57.897

感谢您的反馈。我找到了解决方案。我需要为文本块创建一个 IDWriteTextLayout，然后调用它的 GetMetrics 方法，该方法将返回文本的范围。

再次感谢您的帮助。

# sql - 从连接到 WP8 数据库的可观察集合中删除项目

> ID：13977613
> 
> 赞同：0
> 
> 时间：2012-12-20T17:40:22.033
> 
> 标签：sql, windows-phone-8, observablecollection

我的 WP8 应用程序中有一个数据库，我想在按下按钮时从数据库中删除一个项目。数据库中的所有行都保存在一个名为“person”的可观察集合中。如何选择我想要的特定行，然后将其从可观察集合中删除？

这就是我可能认为的样子

```
 public void DeletePerson(int personID)
    {
       IQueryable<PersonData> test = from PersonData personToDelete in personDB.PersonDataTable
                                     where personToDelete.personID == personID
                                        select personToDelete;

        person.Remove(test);
        personDB.PersonDataTable.DeleteOnSubmit(personToDelete);

        personDB.SubmitChanges();
    } 
```

然而，`person.Remove()`唯一需要一个`PersonData`项目（这是有问题的表格）而不是`IQueryable`. 那么如何获得`PersonData`我想要的物品呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:37:46.407

答案是放

```
test.First() 
```

作为之前两个函数调用中的参数

```
personDB.SubmitChanges(); 
```

正如 nkchandra 所发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:39:20.677

你需要这样改变

```
person.Remove(test.First()); 
```

# ruby-on-rails - 模板中 %h2 的 = 和 % 部分是什么意思？

> ID：13977616
> 
> 赞同：-2
> 
> 时间：2012-12-20T17:40:36.287
> 
> 标签：ruby-on-rails, haml

在 RoR 中，%h2 的 % 部分是什么意思？它在[html.haml 文件](https://github.com/RKushnir/mailboxer-app/blob/master/app/views/conversations/index.html.haml)中。[另一个文件](https://github.com/RKushnir/mailboxer-app/blob/master/app/views/conversations/_form.html.haml)在所有内容前面都有 = 符号——这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:42:28.163

那是一个 html.haml 文件。HAML 是一种 ERB 替代方案。这`%`意味着它是一个 HTML 标记（`<h2>`在这种情况下），`=`意味着 Ruby 代码。

这是ERB翻译：

```
<h1>Conversations</h1>
<h2>Inbox</h2>
  <ul><%= render mailbox.inbox %></ul>
<h2>Sentbox</h2>
  <ul><%= render mailbox.sentbox %></ul>
<h2>Trash</h2>
  <ul><%= render mailbox.trash %></ul>

<%= link_to 'Start Conversation', :new_conversation %> 
```

# c# - 保存游戏文件的困难

> ID：13977622
> 
> 赞同：0
> 
> 时间：2012-12-20T17:41:08.190
> 
> 标签：c#, xna

我正在尝试本教程，因为我想将一些数据保存在 XML 文件中：http: [//msdn.microsoft.com/en-us/library/bb203924.aspx](http://msdn.microsoft.com/en-us/library/bb203924.aspx)

但我在课堂上收到此错误消息`SaveGameData`：

```
IAsyncResult result = device.BeginOpenContainer("StorageDemo", null, null); 
```

命名空间不能直接包含字段或方法等成员

```
XmlSerializer serializer = new XmlSerializer(typeof(SaveGameData)); 
```

预期的类、委托、枚举、接口或结构

怎么了？

另外，我不知道如何在文件中写入一些东西。例如，如果玩家按下 Escape，我想将分数保存到保存游戏文件中。我怎样才能做到这一点？

```
public struct SaveGameData
    {
        public string PlayerName;
        public Vector2 AvatarPosition;
        public int Level;
        public int Score;
    }
    // Open a storage container.
IAsyncResult result = device.BeginOpenContainer("StorageDemo", null, null);

// Wait for the WaitHandle to become signaled.
result.AsyncWaitHandle.WaitOne();

StorageContainer container = device.EndOpenContainer(result);

// Close the wait handle.
result.AsyncWaitHandle.Close();

string filename = "savegame.sav";

// Check to see whether the save exists.
if (container.FileExists(filename))
   // Delete it so that we can create one fresh.
   container.DeleteFile(filename);

// Create the file.
Stream stream = container.CreateFile(filename);

// Convert the object to XML data and put it in the stream.
XmlSerializer serializer = new XmlSerializer(typeof(SaveGameData));
  serializer.Serialize(stream, data);

// Close the file.
stream.Close();

// Dispose the container, to commit changes.
container.Dispose();

// Open a storage container.
IAsyncResult result =
    device.BeginOpenContainer("StorageDemo", null, null);

// Wait for the WaitHandle to become signaled.
result.AsyncWaitHandle.WaitOne();

StorageContainer container = device.EndOpenContainer(result);

// Close the wait handle.
result.AsyncWaitHandle.Close();

string filename = "savegame.sav";

// Check to see whether the save exists.
if (!container.FileExists(filename))
{
   // If not, dispose of the container and return.
   container.Dispose();
   return;
}

// Open the file.
Stream stream = container.OpenFile(filename, FileMode.Open);

XmlSerializer serializer = new XmlSerializer(typeof(SaveGameData));

SaveGameData data = (SaveGameData)serializer.Deserialize(stream);

// Close the file.
stream.Close();

// Dispose the container.
container.Dispose(); 
```

# python - django 视图中的 args 和 kwargs

> ID：13977624
> 
> 赞同：13
> 
> 时间：2012-12-20T17:41:12.127
> 
> 标签：python, django, django-views, args, keyword-argument

好的，我已经尝试搜索这个很长一段时间了。我不能将 args 和 kwargs 传递给 django 应用程序中的视图吗？我是否必须独立定义每个关键字参数？

例如，

```
#views.py
def someview(request, *args, **kwargs):
... 
```

在调用视图时，

```
response = someview(request,locals()) 
```

我似乎无法做到这一点。相反，我必须这样做：

```
#views.py
def someview(request, somekey = None):
... 
```

有什么理由吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-20T17:57:23.907

如果您想将关键字参数传递到您的视图中，则正确的语法是：

```
def view(request, *args, **kwargs):
    pass

my_kwargs = dict(
    hello='world',
    star='wars'
)

response = view(request, **my_kwargs) 
```

因此，如果`locals()`是关键字参数，则传入`**locals()`. 我个人不会使用隐含的东西，比如`locals()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T17:59:41.750

问题是`locals()`返回一个字典。如果你想使用`**kwargs`，你需要解压`locals`：

```
response = someview(request,**locals()) 
```

当您像使用它一样使用它时`response = someview(request,locals())`，实际上是在将字典作为参数传递：

```
response = someview(request, {'a': 1, 'b': 2, ..}) 
```

但是当您使用时，`**locals()`您会像这样使用它：

```
response = someview(request, a=1, b=2, ..}) 
```

您可能想看看[Unpacking Argument Lists](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-19T10:59:35.840

*args 和 **kwargs 用于将可变数量的参数传递给函数。单星号用于非关键字参数，双星号用于关键字参数。

例如：

```
 def any_funtion(*args, **kwargs):
         //some code

    any_function(1,arg1="hey",arg2="bro") 
```

其中，第一个是简单（非关键字）参数，另外两个是关键字参数；

# c# - 收到错误，对 PInvoke 函数的调用使堆栈不平衡

> ID：13977633
> 
> 赞同：0
> 
> 时间：2012-12-20T17:42:15.640
> 
> 标签：c#, visual-studio-2010, visual-c++, dll, dllimport

我编写了以下 `C++`代码来创建`win 32 Dynamic link library`：

```
#include <windows.h>
#include <some.h>

unsigned char  m_KSN[10];
unsigned char m_inintial_key[16];
unsigned char initial_key[16];

extern "C" __declspec(dllexport) unsigned char* OnDecryption(LPCTSTR stringKSN, 
    LPCTSTR BDK){
        for( i=0;i<10;i++){
            m_KSN[i]=asctohex(stringKSN[2*i],stringKSN[2*i+1]); } 
        for( i=0;i<16;i++){
    m_inintial_key[i]=asctohex(BDK[2*i],BDK[2*i+1]);}
       GetInitalKey(m_KSN, m_inintial_key, initial_key);
       // GetInitialKey function written in `.lib` file. Data type of (Byte*a Byte*    b Byte* c) 
   return initial_key;
  } 
```

`C#`我的代码在哪里：

```
static class DecryptionDll
{
  public String BDK = "0111111119ABCDEFFEDCBA9877777777";
  public String KSN = "62994900380000C00329";

  internal static class UnsafeNativeMethods
    {   
        const string _dllLocation = "finalTest.dll";
        [DllImport(_dllLocation)]
        public static extern byte OnDecryption(string ksn, String bdk);
     }
} 
```

我将`dll`文件放在当前目录中，我通过以下命令得到：

```
String path = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.
GetExecutingAssembly().Location); 
```

它向我显示`my debug`文件夹是当前路径。所以我把它`dll`放在那里。我也收到了很多帖子，但无法理解`PInvoke`情况。请帮我..

请告诉我我应该做些什么更改`c++`或`c#`代码来调用编写的方法`dll`。

我对这么多的编辑感到非常抱歉。这是因为我的连接速度慢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:52:16.993

您的 C++ 函数被声明为返回指向 unsigned char 数据的指针，但从不返回任何内容。令人惊讶的是它可以编译；鉴于该声明以及没有“return”语句的事实，您似乎应该从 C++ 编译器中得到一个错误。

我猜你的意思是返回 m_KSN 的地址，但是那个变量是在哪里声明的呢？从命名上看，它看起来像一个成员变量，但该函数似乎不是一个成员函数。

**编辑后**，事情仍然没有排成一行。名称中有很多带有 m_ 的变量，表示它们是成员变量。但是没有类存在，我们也看不到这些变量的声明。

在 C# 中，你声明你的函数返回一个字节。您正在从 C++ 返回指向一个字节的指针，这通常意味着您想要返回整个字节数组。你的 C# 声明应该更像这样吗？

```
public static extern byte [] OnDecryption(string ksn, String bdk); 
```

您的 C++ 代码假定传递的字符串的长度并且从不测试它们。您可能会遇到一个空字符串，或者比您想象的更短（或更长）的字符串。或者一个没有有效十六进制字符的字符串。

您能否与我们分享为什么您特别相信您的“功能不平衡堆栈”？你的意思是你的功能是什么？

我看到**您进行了一些进一步的编辑**，这解决了您之前使用的数组背后的谜团`m_`——尽管您对同一个`m_initial_key`变量有两个声明。是`m_ninitial_key`故意不同`m_inintial_key`还是错字？

但其他担忧和问题仍然存在。我想还有一个问题是关于`GetInitialKey()`函数的。它不是一个众所周知的 Windows 函数，所以如果没有它的源代码，我们无法猜测它的作用；也许它期望的参数与您传递的参数不同，这实际上是导致问题的原因。

**因为你想返回一个指向 unsigned char array 的指针**，你可以使用 IntPtr 来完成。在 C# 中重新获取 IntPtr 后，使用该`Marshal.Copy`函数将数据从中复制到`byte []`数组中。这一切看起来像这样：

```
 internal static class UnsafeNativeMethods
    {
        const string _dllLocation = "..\\..\\..\\FinalTest\\debug\\finalTest.dll";
        [DllImport(_dllLocation, CallingConvention = CallingConvention.Cdecl, CharSet = CharSet.Unicode)]
        public static extern IntPtr OnDecryption(string ksn, String bdk );

        static public byte[] OnDecryptionWrapper(string ksn, string bdk)
        {
            byte[] data = new byte[10];
            IntPtr ptr = OnDecryption(ksn, bdk);

            Marshal.Copy(ptr, data, 0, 10);
            return data;
        }
    } 
```

# android - TextSwitcher 的 ActionBarSherlock SherlockFragment 问题

> ID：13977642
> 
> 赞同：0
> 
> 时间：2012-12-20T17:42:52.873
> 
> 标签：android, actionbarsherlock, fragment

事情很简单，我希望我的应用程序有新闻提要，我试图通过 textswitcher 做到这一点，但它的应用程序崩溃了

```
public class HomeFragment extends SherlockFragment implements ViewFactory{  
    List<String> newsList = new ArrayList<String>();
    TextSwitcher tw;
    int position = 0;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
       View v = inflater.inflate(R.layout.home_fragment, null, false);

       //TextView news = (TextView)v.findViewById(R.id.app_bottom_news);
       //news.setSelected(true);
       newsList.add("String 1 String 1 String 1 String 1 String 1");
       newsList.add("String 2 String 2 String 2 String 2 String 2");
       newsList.add("String 3 String 3 String 3 String 3 String 3");
       newsList.add("String 4 String 4 String 4 String 4 String 4");
       newsList.add("String 5 String 5 String 5 String 5 String 5");
       newsList.add("String 6 String 6 String 6 String 6 String 6");

       tw = (TextSwitcher)v.findViewById(R.id.app_bottom_news);

       Animation in = AnimationUtils.makeInAnimation(getActivity(), true);
       Animation out = AnimationUtils.makeOutAnimation(getActivity(), true);
       tw.setFactory(this);
       tw.setInAnimation(in);
       tw.setOutAnimation(out);
       tw.setText(String.valueOf(newsList.get(position)));
       TimerTask tm = new TimerTask(){

        @Override
        public void run() {
            // TODO Auto-generated method stub
            if(position < newsList.size()){
                position++;
                tw.setText(String.valueOf(newsList.get(position)));
            }else{
                position = 0;
            }
        }

       };
       Timer t = new Timer();
       t.schedule(tm, 2000);
      }
        @Override
    public View makeView() {
        // TODO Auto-generated method stub
        TextView txtView = new TextView(getActivity());
        txtView.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
        txtView.setTextSize(20);
        return txtView;
    }    

} 
```

Log Cat 输出为

```
 12-20 16:44:16.882: W/dalvikvm(1838): threadid=11: thread exiting with uncaught exception (group=0x40a13300)
12-20 16:44:16.937: E/AndroidRuntime(1838): FATAL EXCEPTION: Timer-1
12-20 16:44:16.937: E/AndroidRuntime(1838): android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.ViewRootImpl.checkThread(ViewRootImpl.java:4609)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.ViewRootImpl.requestLayout(ViewRootImpl.java:835)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:292)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.view.View.requestLayout(View.java:15129)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.widget.TextView.checkForRelayout(TextView.java:6309)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.widget.TextView.setText(TextView.java:3547)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.widget.TextView.setText(TextView.java:3405)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.widget.TextView.setText(TextView.java:3380)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at android.widget.TextSwitcher.setText(TextSwitcher.java:80)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at net.evolution.betting.application.HomeFragment$1.run(HomeFragment.java:59)
12-20 16:44:16.937: E/AndroidRuntime(1838):     at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:50:53.993

每个视图都有一个现有的处理程序，您不需要在新线程上使用 TimerTask。试试这个：

```
pageTurner = new Runnable() {
    @Override
    public void run() {
        if(position < newsList.size()){
            position++;
            tw.setText(String.valueOf(newsList.get(position)));
        }else{
            position = 0;
        }

        // This line will run the timer again if you want
        //tw.postDelayed(this, 2000);
    }
};
tw.postDelayed(pageTurner, 2000); 
```

您应该取消任何待处理的 Runnables `onPause()`：

```
tw.removeCallback(pageTurner); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:45:32.913

`setText`将调用包装在 a 中`runOnUiThread`，但您需要获取活动：

```
Activity a = getActivity();
if (a != null) {
  a.runOnUiThread(new Runnable() { ... } );
} 
```

# android - 是 javasetAlpha()方法说它是 API 级别 11。但它的 XML 方面没有说明任何内容，当我使用它时，由于我指定了 min SDK 8，因此在 Lint 中没有将它作为警告拾取。 如果我使用 android:alpha="" 会在 2.2 上崩溃吗？

> ID：13977644
> 
> 赞同：0
> 
> 时间：2012-12-20T17:43:03.327
> 
> 标签：android

java`setAlpha()`方法说它是 API 级别 11。但它的 XML 方面没有说明任何内容，当我使用它时，由于我指定了 min SDK 8，因此在 Lint 中没有将它作为警告拾取。

如果我使用 android:alpha="" 会在 2.2 上崩溃吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:01:32.630

如果您打算使用颜色作为背景，您可以在背景属性中提供 alpha 值。

```
 android:background="88000000" 
```

将使其部分透明。如果您为颜色提供 8 个字符，则前 2 个值将被视为 alpha 值。

# sql-server - 多个 Invoke-SqlCmd 和 Sql Server 事务

> ID：13977650
> 
> 赞同：13
> 
> 时间：2012-12-20T17:43:44.887
> 
> 标签：sql-server, powershell

如何确保以下语句在一个事务中运行？

```
try
{
  Invoke-SqlCmd -Query 'begin tran; ...sql script...'
  # Other Powershell script
  Invoke-SqlCmd -Query '...sql script...; if @@transcation > 0 commit tran' 
}
catch 
{
   Invoke-SqlCmd -Query 'if @@transaction > 0 rollback tran;'
} 
```

在事务中运行 Powershell 脚本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-01-13T06:53:42.813

不幸的是，`SqlProvider`在 Powershell 中没有`Registry`提供者那样的事务能力。因此`Start-transaction`不会在这里工作。

您可以原生并利用[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope%28v=vs.110%29.aspx)类。

```
Try{
   $scope = New-Object -TypeName System.Transactions.TransactionScope

   Invoke-Sqlcmd -server Darknite -Database AdventureWorks2008 -Query $Query1 -ea stop
   Invoke-Sqlcmd -server Darknite -Database AdventureWorks2008 -Query $Query2 -ea stop

   $scope.Complete() 
}
catch{
    $_.exception.message
}
finally{
    $scope.Dispose() 
} 
```

所有位于 $scope 赋值 和 之间的 Invoke-sqlcmd 都`$scope.complete()`将被视为一个事务。如果其中任何一个出错，所有内容都将回滚。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-28T04:10:01.810

Nitesh举了一个很好的例子，帮助了我，谢谢！要添加的一件事是 Scope.Complete() 不会将事务提交发送到数据库。如果您在循环中使用此代码，这将是显而易见的。

提交**最终使用**您的范围执行，因此确保提交的工作示例将在完成后添加显式处置，如下所示：

```
$scope.Complete();
$scope.Dispose(); 
```

查看详情 [TransactionScope Complete() 在退出 USING 语句之前不提交事务](https://stackoverflow.com/questions/16214102/transactionscope-complete-doesnt-commit-the-transaction-before-exiting-the-us)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T19:17:07.690

Invoke-sqlcmd 不支持 ADO.NET 事务。您有两种解决方法，或者将等效的 Powershell 代码写入此 MSDN 文档中针对 ADO.NET 事务显示的 C# 代码：http: [//msdn.microsoft.com/en-us/library/2k2hy99x(v=vs.110) .aspx](http://msdn.microsoft.com/en-us/library/2k2hy99x%28v=vs.110%29.aspx)

或者使用 T-SQL 事务。在不向每个脚本添加 T-SQL Try/Catch 的情况下执行此操作的一种快速方法是将 XACAT_ABORT 设置为 ON；然后将脚本包装在开始并提交事务。请记住，这可能无法捕获终止错误：

[http://msdn.microsoft.com/en-us/library/ms188792.aspx](http://msdn.microsoft.com/en-us/library/ms188792.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-10T21:13:32.683

我最近发布了一个新模块，用于与支持事务的数据库进行交互：

```
Install-Module -Name InvokeQuery 
```

如果发生错误，您不需要显式回滚。创建的环境事务`Start-Transaction`将为您处理。

```
try {
    $db = "test"
    Start-Transaction

    $sql = "insert into table1 values (NEWID(), 8765, 'transactions!', GETDATE())"
    $rowcount = $sql | Invoke-SqlServerQuery -Database $db -UseTransaction -CUD -Verbose
    Write-Host "Inserted $rowcount rows!"

    $sql = "insert into table1 values (NEWID(), 5555, 'transaction too!', GETDATE())"
    $rowcount = $sql | Invoke-SqlServerQuery -Database $db -UseTransaction -CUD -Verbose
    Write-Host "Inserted $rowcount rows!"

    Complete-Transaction
}
catch {
    ##Transaction will automatically be rolled back....
    Write-Error $_
} 
```

如果要在事务中显式回滚，则抛出错误：

```
throw 'rollback because of reason X!' 
```

更多示例： [https ://github.com/ctigeek/InvokeQueryPowershellModule/blob/master/README.md#transactions](https://github.com/ctigeek/InvokeQueryPowershellModule/blob/master/README.md#transactions)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-01T16:37:05.673

我建议检查[Invoke-SqlCmd2](https://github.com/sqlcollaborative/Invoke-SqlCmd2)，它采用现有 SqlConnection 的参数。

安装：

```
Install-Module Invoke-SqlCmd2 -Scope CurrentUser 
```

将其与事务一起使用将如下所示：

```
$Connection = [System.Data.SqlClient.SqlConnection]::new($ConnectionString)
$Connection.Open()
$Transaction = $Connection.BeginTransaction()

try {
   Invoke-SqlCmd2 -SqlConnection $Connection -Query "..." -ErrorAction Stop
   Invoke-SqlCmd2 -SqlConnection $Connection -Query "..." -ErrorAction Stop
   $Transaction.Commit()
}
catch {
   $Transaction.Rollback()
}
finally {
   $Connection.Close()
} 
```

# media-queries - 媒体查询 - 强制 Xbox 使用横向视图

> ID：13977651
> 
> 赞同：1
> 
> 时间：2012-12-20T17:43:44.613
> 
> 标签：media-queries, user-agent

我正在开发一个网站，当您在 Xbox 上查看它时，它使用的是 ipad 网站。这很好。但是它使用的是纵向模式，导致侧面空间的巨大浪费。我希望它改用横向模式。

有没有办法做到这一点？我的猜测是媒体查询，但我找不到任何东西。

现在这就是我所拥有的：

```
if (preg_match('/(XBox|MSIE.* Touch|WiiU|MZ617|GT-N)/i', $_SERVER['HTTP_USER_AGENT'])) {
   ...          
} 
```

# android - Mapview osmdroid 在片段中不可见

> ID：13977654
> 
> 赞同：0
> 
> 时间：2012-12-20T17:43:56.023
> 
> 标签：android, fragment, osmdroid

我试图在 Fragment 的 onActivityCreated 的 relativeLayout 中添加 MapView (org.osmdroid.views.MapView)。但它不起作用。此 Fragment 由 ShrlockFragmentActivity 启动。我怎样才能让它工作？

```
public class CommuneFragment extends SherlockFragment {

Context mContext = getActivity();

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
}

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    super.onCreateView(inflater, container, savedInstanceState) ;
    return inflater.inflate(R.layout.commune_map_fragment, container, false);
}

@Override
public void onActivityCreated(final Bundle savedState) {
    super.onActivityCreated(savedState);
    mContext=getActivity();

    View mView = getView();

    //Create the OSM view
    MapView mapView = new MapView(mContext, null);
    //enable zoom in and out on the OSM
    mapView.setClickable(true);
    mapView.setBuiltInZoomControls(true);

    RelativeLayout RL= (RelativeLayout) getActivity().findViewById(R.id.rl);
    RL.addView(mapView);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T11:45:27.057

那是因为在添加相对布局之前，您没有为地图视图提供宽度和高度：

```
RelativeLayout RL= (RelativeLayout) getActivity().findViewById(R.id.rl);
    RL.addView(mapView); 
```

您所需要的只是为地图视图提供宽度和高度：

```
this.mMapView.setLayoutParams(new LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT)); 
```

解决了我的类似问题。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:04:39.547

我在这个问题中找到了答案： [OSMDroid simple example required](https://stackoverflow.com/questions/5327399/osmdroid-simple-example-required)

但我不知道它不适用于 addView

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T10:52:08.427

您可以在 onCreateView 方法中简单地返回地图视图。

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {
super.onCreateView(inflater, container, savedInstanceState);
//init mapView...
return mapView;
} 
```

然后，在您进行片段事务的片段活动中，将此视图放在内容框架布局上。

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
            ft.replace(R.id.container, new CommuneFragment());
            ft.commit(); 
```

对不起我的英语，我希望它有所帮助。

# objective-c - 无法在 MapView 中显示地图注释

> ID：13977655
> 
> 赞同：3
> 
> 时间：2012-12-20T17:44:00.547
> 
> 标签：objective-c, annotations, mapkit

我有一个从 Flicker 下载图像的应用程序（Xcode 4.5）。我有一个地图视图，它为每张照片的位置放置一个图钉。单击图钉会显示一个注释，其中显示照片的名称及其图像的缩略图。我一开始就使应用程序通用，iPad 版本按预期工作。但是，当我尝试调整 iPhone 版本的代码时（使用与 iPad 相同的类），引脚不会出现在 iphone 的地图视图中。我无法弄清楚我错过了什么，我希望有人能提供帮助。这就是我所做的。

1) 我在 iPhone 故事板中创建了一个新的视图控制器，并将其连接到适用于 iPad 的地图视图控制器类。我添加了一个 mapView 插座并相应地调整了代码。2）在tableView控制器（与mapView控制器相接）中，我添加了一个prepare for segue方法，该方法应该使用注释信息更新地图视图控制器中的地图视图。

这是代码：

```
// in the tableView controller

- (NSArray *)mapAnnotations
{
   NSMutableArray *annotations = [NSMutableArray arrayWithCapacity:[self.photos count]];
   for (NSDictionary *photo in self.photos) {
       [annotations addObject:[FlickrPhotoAnnotation annotationForPhoto:photo]];
   }
   return annotations;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"iPhoneMap"]) {
           id destinationViewController = segue.destinationViewController;
                if ([destinationViewController isKindOfClass:[MapViewController class]])    
                {
                MapViewController *mapVCIphone = 
                               (MapViewController *)destinationViewController;
                    mapVCIphone.delegate = self;
                    mapVCIphone.annotations = [self mapAnnotations];
                }
    } 
```

}

```
//in the mapView controller:

@property (weak, nonatomic) IBOutlet MKMapView *mapViewIphone;
@synthesize mapViewIphone = _mapViewIphone;

- (void)updateMapView
{
//if there are any current annotatons, remove them 
   //if there exists a new array of annotations, then add those to the map

if (self.splitViewController) {
    if (self.mapView.annotations) [self.mapView   
                           removeAnnotations:self.mapView.annotations];
    if (self.annotations) [self.mapView addAnnotations:self.annotations];
}   else {
        if (self.annotations) [self.mapViewIphone addAnnotations:self.annotations];
        if (self.mapViewIphone.annotations) [self.mapViewIphone 
                          removeAnnotations:self.mapViewIphone.annotations];
    }
}

- (void)setAnnotations:(NSArray *)annotations
{
   _annotations = annotations;
   [self updateMapView];
}

- (void)setMapView:(MKMapView *)mapView //iPad mapView
{
   _mapView = mapView;
   [self updateMapView];
}

- (void)setMapViewIphone:(MKMapView *)mapViewIphone
{
   _mapViewIphone = mapViewIphone;
   [self updateMapView];
} 
```

这段代码中还有 MKMapViewDelegate 协议的实现，这里我没有包括在内，因为我不需要为 iPhone 更改它们。谁能告诉我我可能错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:08:51.753

这里：

```
if (self.splitViewController) {
    if (self.mapView.annotations) [self.mapView   
                           removeAnnotations:self.mapView.annotations];
    if (self.annotations) [self.mapView addAnnotations:self.annotations];
}   else {
        if (self.annotations) [self.mapViewIphone addAnnotations:self.annotations];
        if (self.mapViewIphone.annotations) [self.mapViewIphone 
                          removeAnnotations:self.mapViewIphone.annotations];
    }
} 
```

在 iPad 版本中，您
- 删除现有注释然后
- 添加新注释

在 iPhone 版本中，您是
- 然后添加新注释
- 在下一行中删除那些相同的注释（现在现有的注释）。

# php - PHP SQL注入和保护？

> ID：13977657
> 
> 赞同：1
> 
> 时间：2012-12-20T17:44:12.673
> 
> 标签：php, sql, mysqli

> **可能重复：**
> [如何防止 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

这是我清理我将要放入数据库的内容的尝试

```
$pictureID = $_REQUEST['pictureID'];
$userID = $_REQUEST['userID'];
$username = $_REQUEST['username'];

//Sanatize //Protext against injection

$username = filter_var($username, FILTER_SANITIZE_EMAIL);
$userID = filter_var($userID, FILTER_SANITIZE_STRING);
$pictureID = filter_var($pictureID, FILTER_SANITIZE_STRING);

$username = stripslashes($username);
$username = mysql_real_escape_string($username);

$userID = stripslashes($userID);
$userID = mysql_real_escape_string($userID);

$pictureID = stripslashes($pictureID);
$pictureID = mysql_real_escape_string($pictureID); 
```

我有两个问题，以上就够了吗？

另外，如果我什么都不做`echo $pictureID`，但是，如果我删除`$pictureID = mysql_real_escape_string($pictureID);`then`echo $pictureID`作品。

这是正确的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:47:10.480

哇...

你真的**不需要**那么多。

尝试将 PDO 或 mysqli 与准备好的查询一起使用，那么就不需要所有这些废话了。

* * *

请参阅此罐头评论以获取建议：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:58:05.473

为了**防止 SQL 注入**，唯一需要的调用是：

```
 $pictureID = mysql_real_escape_string( $pictureID ); 
```

此方法调用**有效地转义了所有特殊字符**，这可能会更改查询的预期操作。

正如@NullPointer 指出的那样，使用[PHP 的 PDO](http://php.net/manual/en/book.pdo.php)将是一个**不错的选择**，因为 mysql_* 自 PHP 5.5+ 起已弃用。尽管如此，我认为它不会很快从 PHP 中完全删除。

# python - 谷歌python类string1练习

> ID：13977659
> 
> 赞同：0
> 
> 时间：2012-12-20T17:44:16.020
> 
> 标签：python

我正在研究作为 Google Python 类的一部分的 string1 练习。我遇到的问题是C：

```
C. fix_start
Given a string s, return a string
where all occurences of its first char have
been changed to '*', except do not change
the first char itself.
e.g. 'babble' yields 'ba**le'
Assume that the string is length 1 or more.
Hint: s.replace(stra, strb) returns a version of string s
where all instances of stra have been replaced by strb. 
```

我正在考虑使用循环将每个字母与第一个字母进行比较，并用“*”替换任何匹配的字母。我认为必须有一个更简单的方法。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T03:10:01.280

这是我得到的，不需要循环。

```
def fix_start(s):

  return s[0]+s[1:].replace(s[0], '*') 
```

考虑到他们告诉我们我们应该假设字符串不是''，这才有效。在这种情况下，应该将返回行移到 if 中，然后首先检查 len。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:46:02.367

是的，有一种更简单的方法，问题已经给了你一个提示：

> `s.replace(stra, strb)`返回一个字符串版本，其中的所有实例`stra`都已替换为`strb`.

想想你会如何使用这个功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-23T12:20:53.823

这是我更长的解决方案。我将 s 分成两部分，并在字符串的第二部分替换单词的“其余部分”。它更长，但包含在此处以显示解决难题的思维过程。

```
def fix_start(s):
  star = s[0]
  rest = s[1:]
  rest = rest.replace(star,'*')

  return star+rest 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T17:53:11.113

已经提供了一个提示，它不涉及使用循环！

它建议使用`s.replace(stra, strb)`并描述会产生什么影响，因此鉴于问题陈述，让我们看看什么`s`、、`stra`和`strb`应该是什么。

*   我们只想替换第一个字符*之后*的出现，所以`s`in`s.replace(stra, strb)`应该是从第二个字符开始的所有内容。我们可以使用切片来获取它`s[1:]`（这里`s`是传递给函数的参数）。
*   由于我们要替换所有出现的第一个字符，`stra`应该是那个第一个字符，或者`s[0]`（又`s`是参数）。
*   `strb`很简单，它说我们正在用 替换匹配项`*`，所以`strb`是`'*'`

所以在你的函数中的某个地方，你会想要`s[1:].replace(s[0], '*')`，这会让你大部分时间到达那里。

# php - PHP输入/文件没有选择要上传的文件

> ID：13977662
> 
> 赞同：1
> 
> 时间：2012-12-20T17:44:18.813
> 
> 标签：php, elgg

我对[Elgg](http://elgg.org/)很陌生，我正在尝试允许用户上传视频。但是，我的问题也可能与 php 相关。

所以我用以下代码设置了我的表单：

```
echo elgg_view("input/file", array('name' => 'video', 'accept' => 'video/*')); 
```

它设置了一个控件以允许用户上传文件。我的动作文件充满了大量的防御性编程，以确保文件存在。当我尝试上传视频时，我收到以下错误，指向这段代码：

```
// must not be empty if a file is present in the upload
    if( empty($_FILES['video']['name']) ) {
        $error = elgg_echo('No file to upload!');
        register_error( $error );
        forward( REFERER );
    } 
```

我完全迷失了问题所在，我已经尝试实现这一目标大约 2 天了。我一直在提到其他一些在 Elgg 中使用文件上传的插件，例如文件插件和 TidyPics 插件。

提前感谢所有帮助和提示。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:24:30.923

根据[http://docs.elgg.org/wiki/Forms](http://docs.elgg.org/wiki/Forms)

> Enctype 表单属性（默认为空白）。如果您希望表单进行文件上传，则需要传递“multipart/form-data”的值。

尝试-

```
echo elgg_view('input/form', array('enctype' => 'multipart/form-data', ...)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:24:15.947

尝试在 if 语句之前执行 print_r($_FILES)，然后执行 exit() 以查看是否会为您提供一些线索。我会将此作为评论发布，但我还没有足够的代表点，因为我是堆栈溢出的新手。

# vb.net - 如何取出字节并从字节数组中获取数字

> ID：13977667
> 
> 赞同：0
> 
> 时间：2012-12-20T17:44:47.010
> 
> 标签：vb.net

我读了一个 900 字节的二进制文件，里面有很多信息。
像这样：

```
 Dim myFile As String = txt_mydir.Text + "\MY_FILE.BIN"
     If IO.File.Exists(myFile) Then
        Dim fInfo As New FileInfo(myFile)
        Dim numBytes As Long = fInfo.Length
        Dim fStream As New FileStream(myFile, FileMode.Open, FileAccess.Read)
        Dim br As New BinaryReader(fStream)
        Dim data As Byte() = br.ReadBytes(CInt(numBytes)) 
```

所有字节都在 bytearray 'data' 中完成。

现在我必须将用 VB6 结构写入的数字读入该文件。结构是我的，我知道什么是什么，什么是什么。例如，我需要一个位于字节 81 和 82 处的 VB.NET 'short' 数字。其中，我还有所有其他基本数字类型要退出。

如何从特定位置的“数据”中取出所需数量的字节，长度准确，并从中获取适当的数字（短、整数、双精度......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:55:56.130

使用 的方法`BinaryReader`获取原始结构的字段

```
Dim i As Integer = br.ReadInt32()
Dim d As Double = br.ReadDouble()
Dim s As String = br.ReadString() 
```

等等。您必须以与写入文件完全相同的顺序读取字段。

将其嵌入到这样的循环中

```
While br.BaseStream.Position() <> inFile.BaseStream.Length()
    ...
End While 
```

# jquery - Yii：使用 Ajax 和 Jquery 将文本字段过滤器添加到 CListview

> ID：13977676
> 
> 赞同：0
> 
> 时间：2012-12-20T17:45:28.997
> 
> 标签：jquery, yii, yii-components

我是一名 Yii 初学者，我目前正在向 CListView 添加一个 Ajax 过滤器，我按照本[教程中显示的步骤进行操作](http://www.yiiframework.com/wiki/185/clistview-ajax-filtering/)

基本上，当我在更改的 IssueController/Index 操作中初始化 $issue_nr 时，过滤器工作得很好，但由于某种原因，$_Get 变量没有通过提交按钮传递！

我一直在寻找一段时间，这一直让我发疯，因为我觉得我错过了一个非常简单的步骤！

任何帮助或任何形式的建议都非常感谢！

我的索引操作在哪里：

```
public function actionIndex($issue_nr=NULL)
    {     
    $criteria = new CDbCriteria();
    if (strlen($issue_nr) > 0)
        $criteria->addSearchCondition('issue_nr_fk', $issue_nr, true);
    $dataProvider = new CActiveDataProvider('Issue', array('criteria' => $criteria,));
    $this->render('index', array('dataProvider' => $dataProvider));
    } 
```

在视图/问题/索引中

```
 <div class="row">

<?php

  echo CHtml::beginForm(CHtml::normalizeUrl(array('Issue/index')), 'get', array('id'=>'filter-form'))
  . CHtml::textField('string', (isset($_GET['string'])) ? $_GET['string'] : '', array('id'=>'issue_nr'))
  . CHtml::submitButton('Search', array('submit' => array('Issue/index', 'id'=>$_GET['string'])))
  . CHtml::endForm();

 //JQUERY FUNCTION TO REDUCE DBQUERIES
 Yii::app()->clientScript->registerScript('search',
      "var ajaxUpdateTimeout;
       var ajaxRequest;
       $('input#issue_nr_fk').keyup(function(){
       ajaxRequest = $(this).serialize();
       clearTimeout(ajaxUpdateTimeout);
       ajaxUpdateTimeout = setTimeout(function () {
       $.fn.yiiListView.update(

    // this is the id of the CListView
       'ajaxListView',
       {data: ajaxRequest}
       )
      },
    // this is the delay
         300);
        });"
       );
     ?>
 </div>

 <?php
    $this->widget('zii.widgets.CListView', array(
    'dataProvider' => $dataProvider,
    'itemView' => '_view',
    'sortableAttributes'=>array('issue_nr_fk',
    'c_date'),
    'id'=>'ajaxListView',
     ));
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:08:44.120

如果我理解正确，您将表单操作设置为“CHtml::normalizeUrl(array('Issue/index')”而没有任何“get”参数，这就是为什么您没有在控制器中收到它们。使用空字符串行动 - 表单将提交到当前页面 url，所有参数都存在。

# c# - ASP.NET MVC4 和 Kendo UI“过滤器”：从 Object 类型返回 JSON

> ID：13977679
> 
> 赞同：0
> 
> 时间：2012-12-20T17:45:33.333
> 
> 标签：c#, json, asp.net-mvc-4, kendo-ui

我正在使用 MVC4 控制器在服务器上读取一个 .json 文件，该文件包含（除其他外）要在 Kendo UI 数据源上使用的过滤条件声明。

我想将它加载到一个对象中，并通过 JsonResult 将它发送给客户端。

这是我想发送的 json 部分：

```
{
    activate: {
        logic: "or",
        filters: [
            { field: "fieldA", operator: "eq", value: 100 },
            {
                logic: "and",
                filters: [
                    { field: "fieldA", operator: "lt", value: 100 },
                    { field: "fieldB", operator: "eq", value: true }
                ]
            }
        ]
    }
} 
```

我定义了一个类来映射我的 json 数据：

```
public class ItemModel
{
    public Object activate { get; set; }
} 
```

作为我使用 Object 的类型，因为其中包含的值可能会有所不同，它不是递归结构或包含保留字作为“运算符”。

然后我通过以下方式阅读了json：

```
JsonSerializer serializer = new JsonSerializer();
ItemModel i = serializer.Deserialize<ItemModel>(new JsonTextReader(reader)); 
```

此时，由于我将“Object”定义为“activate”json 对象的类型，我在变量中发现了一个对象，该对象作为其基础引用“Newtonsoft.Json.Linq.JContainer”，其中，传递给“Json(i)”，在客户端上的结果类似于“[[[]]、[[[[[]]、[[]]、[[]]]、[[[]]”。

是否可以将真实的 json 数据返回给客户端，而不是“对象”对象的序列化（或 Json() 解析器遇到问题的等效对象）？如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:30:25.597

到目前为止，我发现的最好方法是在返回的对象上使用“JsonConvert.SerializeObject”：

```
JsonSerializer serializer = new JsonSerializer();
ItemModel i = serializer.Deserialize<ItemModel>(new JsonTextReader(reader));
JsonConvert.SerializeObject(i, new JsonSerializerSettings { NullValueHandling = NullValueHandling.Ignore }); 
```

# iphone - Facebook登录后如何返回应用程序？

> ID：13977686
> 
> 赞同：0
> 
> 时间：2012-12-20T17:46:06.390
> 
> 标签：iphone, ios, facebook, facebook-login

在我的应用程序中，我必须提供选项`login`，`facebook`一旦`login`完成`facebook`，用户应该`Navigate`回到应用程序。怎么可能.. 我已经在我的代码中安装`Facebook SDK`并使用了 Facebook 登录示例（ ）来登录`SessionLoginSampl`脸书..它工作正常..

现在我想当我从 FB 成功登录时它应该返回到应用程序？？

怎么可能..如果我改变..

```
If(appDelegate.session.isOpen)
//navigate here for tab bar...but does not work 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:58:07.850

在您的 .plist 文件中，您需要添加一个名为“URL 类型”的行，它应该看起来像这样。这将允许 Facebook 应用程序或 Mobile safari 在登录过程完成后知道将您带到哪里![在此处输入图像描述](../Images/1cf864610b322fa2113be2d0518677a1.png)

同样在您的 AppDelegate 中，您需要添加这些方法

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return [FBSession.activeSession handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [FBSession.activeSession handleOpenURL:url];
} 
```

# c# - 我可以使用 .Net 语言进行 iPhone 应用程序开发吗？

> ID：13977688
> 
> 赞同：6
> 
> 时间：2012-12-20T17:46:17.893
> 
> 标签：c#, iphone, .net

我对 iPhone 应用程序开发很感兴趣。是否有任何产品或平台允许使用 .NET 语言（例如 C#）开发 iPhone 应用程序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-20T17:58:37.117

[Xamarin](http://xamarin.com/)团队以前是 Novell 从事[Mono](http://www.mono-project.com)项目的员工，他们为[iOS](http://xamarin.com/monotouch)和[Android](http://xamarin.com/monoforandroid)开发了跨平台编译器和运行时。

虽然它还没有创建移动应用程序开发的“一次编写，随处运行”的乌托邦，但它绝对是朝着正确方向迈出的一步，并且可能比 HTML5 解决方案更好。

我发现最好编写在 .NET 和 Mono 下编译的核心库（只是应用程序逻辑，没有 UI 代码）。然后，编写特定于您要支持的每个平台的 UI 层。使用 MVC 模式，您可以以使代码非常可重用的方式抽象事物。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T17:51:57.020

有两个称为**MonoTouch**和**Mono**的平台，您可以通过它们使用 C# 和 .NET 开发 iOS 应用程序。

1.  **[单核细胞增多症](http://www.mono-project.com/Main_Page)**
2.  **[单触](http://xamarin.com/monotouch)**

我会推荐这[本书](http://shop.oreilly.com/product/0636920024002.do)供你学习 C# 中的移动开发。

* * *

如果您对**HTML**和**javascript**感兴趣，以下 sdk 将对您有所帮助。

1.  [电话差距](http://phonegap.com/)
2.  [加速器钛](http://www.appcelerator.com/)
3.  [煎茶](http://www.sencha.com/)

# internet-explorer-10 - 使用 java-script 在 IE10 中解析 HTML 会改变 HTML 结构

> ID：13977689
> 
> 赞同：0
> 
> 时间：2012-12-20T17:46:30.417
> 
> 标签：internet-explorer-10

似乎 IE10 破坏/更改了 HTML 层次结构。这可以通过以下示例更好地解释

```
<html>
<head>
<title>IE10 example</title>
</head>
<body>
<script language="javascript">
     function submitForm() {
         var temp;
         temp = document.getElementById("myTable");
         alert(temp.innerHTML);
     }
   </script> 
<table id="myTable">
<thead>
  <tr>
    <td>First Name</td><td>Last Name</td>
  </tr>
</thead>
<tbody >
  <form action="/users" method="post" name="userform">
    <input type="hidden" name="userName">
    <tr>
      <td>admin</td>
    </tr>
    <tr>
      <td>SA</td>
    </tr>
  </form>
</tbody>
</table>
<script language="javascript">
      submitForm()
</script> 
</body>
</html> 
```

如果将上述 HTML 页面加载到 IE10 中，表单节点会在输入节点之前关闭。因此，对任何输入节点的任何访问都会失败，并出现 NULL/未定义错误。此 HTML 在 Mozilla、Chrome、IE9、IE10 可比性模式下按预期加载。

这种行为是预期的吗？感谢您的时间和帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:13:14.310

这不是 IE10 独有的。DOM 在 IE10、Chrome、Opera 和 Firefox 中的结果相同。通过复制上面显示的标记，在我所做的测试中输入之前全部关闭表单：

[https://dl.dropbox.com/u/444684/stackoverflow/test.html](https://dl.dropbox.com/u/444684/stackoverflow/test.html)

第一个问题是您缺少文档类型。这将使浏览器进入 quirksmode，这意味着它不会按照标准呈现，并且规则更加灰色。为了更好的跨浏览器一致性，您应该在文档顶部添加一个 HTML5 文档类型：

下一个问题是不允许表单成为 tbody 元素的直接子元素。由于它是无效的，它遵循 HTML5 解析算法并关闭表单。为避免这种移动表单，例如使其成为表的父级。

[https://dl.dropbox.com/u/444684/stackoverflow/test2.html](https://dl.dropbox.com/u/444684/stackoverflow/test2.html)

如果您查看浏览器调试器，例如 IE 中的 F12，您会看到输入现在位于表单内。您也不再需要警报，因为 DOM 检查器是一种更容易调试的方法。

# objective-c - 应用程序不呈现模态视图控制器

> ID：13977690
> 
> 赞同：4
> 
> 时间：2012-12-20T17:46:31.980
> 
> 标签：objective-c, cocoa-touch, ios5

我有一个视图控制器，我想在加载视图时从我的根视图控制器呈现。

我已将呈现视图控制器设置为呈现视图的委托。

我有一个`UIBarbutton`当我点击时，使用与 执行完全相同的方法的方法呈现视图没有问题`viewDidLoad`，在`viewDidLoad`我尝试呈现视图的方法中：

```
modalViewController.delegate = self;
modalViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl;
[self presentModalViewController:modalViewController animated:YES]; 
```

它不工作。

尝试在`viewDidLoad`方法中呈现视图是否有问题？

整个 viewDidLoad 方法：

```
- (void)viewDidLoad {
[super viewDidLoad];

UINavigationBar *navigationBar = [[UINavigationBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
navigationBar.tintColor = [UIColor blackColor];
UIBarButtonItem *leftBarButton = [[UIBarButtonItem alloc] initWithTitle:@"              "
                                                                  style:UIBarButtonItemStyleDone
                                                                 target:self
                                                                 action:@selector(changePlayersNames)];//Check how to highlight the button
//Label for UIBarButton text
UILabel *barButtonLabel = [[UILabel alloc] initWithFrame:CGRectMake(3, 5, 70, 30)];
barButtonLabel.text = @"Players";
[barButtonLabel setFont:[UIFont fontWithName:@"ChalkboardSE-Bold" size:15.0]];
barButtonLabel.textAlignment = UITextAlignmentCenter;
barButtonLabel.backgroundColor = [UIColor clearColor];
barButtonLabel.textColor = [UIColor whiteColor];

//Set UINavigation item
UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@""];
item.leftBarButtonItem = leftBarButton;
item.hidesBackButton = YES;
[navigationBar pushNavigationItem:item animated:YES];

//Label for the navigation title
UILabel *barTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 160, 30)];
barTitleLabel.center = navigationBar.center;
barTitleLabel.text = @"Tic-Tac-Toe";
[barTitleLabel setFont:[UIFont fontWithName:@"ChalkboardSE-Bold" size:20.0]];
barTitleLabel.textAlignment = UITextAlignmentCenter;
barTitleLabel.backgroundColor = [UIColor clearColor];
barTitleLabel.textColor = [UIColor whiteColor];
[self.view setBackgroundColor:[UIColor whiteColor]];

[self.view addSubview:navigationBar];
[self.view addSubview:barTitleLabel];
[self.view addSubview:barButtonLabel];

self.player1 = [[ORDPlayer alloc] init];
self.player2 = [[ORDPlayer alloc] init];

[self setNamesLabels:@"Player 1" :@"Player 2"];

//TapRecognizer
UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc]
                                     initWithTarget:self action:@selector(tapRecognized:)];
singleTap.numberOfTapsRequired = 1;
singleTap.numberOfTouchesRequired = 1;
singleTap.delegate = self;
[self.view addGestureRecognizer:singleTap];

//Present modal view
self.playerChangeController = [[ORDPlayerChangeController alloc]
                               initWithNibName:@"ORDPlayerChangeController" bundle:nil];
playerChangeController.delegate = self;
playerChangeController.modalTransitionStyle = UIModalTransitionStylePartialCurl;
[self presentModalViewController:playerChangeController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:17:32.573

你不能展示你的视图控制器`viewDidLoad`，尤其是不能`animated`。那时您可能仍在创建子视图，因此视图甚至还没有渲染。

相反，您应该尝试在`viewDidAppear`.

# php - 字符串和变量的 var_dump() 未显示所需结果

> ID：13977692
> 
> 赞同：3
> 
> 时间：2012-12-20T17:46:35.847
> 
> 标签：php, arrays, string, var-dump

我正在编写一个卷曲另一个站点然后解析结果的脚本。我似乎遇到了一些奇怪的问题，我不明白它们是从哪里来的；我已经包含了我的代码有问题的部分以及从下面返回的输出：

```
<?php
    //my code to do some logic and build the curl

    $BookingConfirmation = curl_exec($ch);

    $testString = 'a test';
    var_dump($testString);
    echo '<br />';
    echo $BookingConfirmation;
    echo '<br />';
    var_dump($BookingConfirmation);
    echo '<br />';

    $bookingResults = explode('|', $BookingConfirmation);

    var_dump($bookingResults);
    die();
?> 
```

然后当我加载页面时，我得到这个输出：

```
string(6) "a test"
booking|1||4000015|23628
string(2386) " booking|1||4000015|23628 "
array(6) { 
    [0]=> string(766) " string(1526) "108^1"> booking" 
    [2]=> string(1) "1" 
    [3]=>     string(0) "" 
    [4]=> string(7) "4000015" 
    [5]=> string(81) "23628 " 
} 
```

因此，根据 $BookingConfirmation 向我展示的内容，我不希望数组在其中的任何位置包含“108^1”。另外，为什么 $BookingConfirmation 的 var_dump 会显示它是 2386 个字符串？它远没有那么长。另一个问题是，应该在数组中的第二个元素发生了什么？($bookingResults[1]) 该数组的最终转储显示有 6 个元素，但跳过 #1 后仅显示 5 个。

请注意，这些变量名都没有在代码的其他任何地方使用，这也可能很有用。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:54:02.683

要么使用查看源、文本/纯内容类型，要么通过命令行运行它。

```
<?php
    header("Content-Type: text/plain; charset=utf-8");
    //my code to do some logic and build the curl

    $BookingConfirmation = curl_exec($ch);

    $testString = 'a test';
    var_dump($testString);
    echo '<br />';
    echo $BookingConfirmation;
    echo '<br />';
    var_dump($BookingConfirmation);
    echo '<br />';

    $bookingResults = explode('|', $BookingConfirmation);

    var_dump($bookingResults);
    die();
?> 
```

我怀疑输入 contains `<`，它被呈现为一些隐藏的 html 标记。我的意思是，`string(2386) " booking|1||4000015|23628 "`, 表示字符串有`2386`字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:07:50.157

`var_dump()`要从字面上查看函数的结果，请使用[HTML 的 pre 元素](http://www.w3schools.com/tags/tag_pre.asp)：

```
 echo '<pre>';
  var_dump( $bookingResults );  
  echo '</pre>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-05T10:21:05.710

与 pre 标签一起使用`print_r()`，而不是`var_dump()`

```
echo '<pre>';
  print_r( $bookingResults );  
echo '</pre>'; 
```

希望能帮助到你

# mysql - 使用 RawSql 通过 ebean 执行 MySQL 查询时出错

> ID：13977693
> 
> 赞同：1
> 
> 时间：2012-12-20T17:46:41.853
> 
> 标签：mysql, playframework, playframework-2.0, ebean, rawsql

在剧中！2.x 应用程序，我正在尝试使用 ebean 向 MySQL 服务器发送一个简单的查询。

我的完整课程如下所示：

```
public static List<Venue> search(String query) {
    List<Venue> matches = new ArrayList<Venue>();
    try {
        String q = query.replace(" ", "");

        String sql =    "SELECT  v.id, c.company, c.postcode \n" +
                        "FROM    venue v \n" +
                        "JOIN    contact c ON (c.id = v.id) \n" +
                        "WHERE   REPLACE(c.postcode, ' ', '') LIKE '%" + q + "%' \n" +
                        "    OR  c.company LIKE '%" + q + "%'";

        RawSql rawSql = RawSqlBuilder.unparsed(sql)
            .columnMapping("v.id", "id")
            .columnMapping("c.company", "contact.company")
            .columnMapping("c.postcode", "contact.postcode")
            .create();

        Query<Venue> eQ = Ebean.find(Venue.class);

        eQ.setRawSql(rawSql);

        matches = eQ.findList();
    }
    catch (Exception e) {
        Utils.eHandler("Venue.search(" + query + ")", e);
    }
    finally {
        return matches;
    }
} 
```

但是，执行该行...

```
matches = eQ.findList(); 
```

..导致以下错误，这似乎是 MySQL 错误（？）：

```
Query threw SQLException:Column Index out of range, 0 < 1.
Bind values:[]
Query was:
SELECT  v.id, c.company, c.postcode
FROM    venue v
JOIN    contact c ON (c.id = v.id)
WHERE   REPLACE(c.postcode, ' ', '') LIKE '%sw3%'
        OR  c.company LIKE '%sw3%' 
```

查询本身很好，例如我可以从错误消息中复制版本，将其粘贴到 MySQL Workbench 中，它执行没有问题。

请注意，我使用的是 RawSql，因为我需要有超过 2 个“OR”子句，据我所知，这是唯一的方法。

任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T14:10:47.333

找到问题（或至少是解决方案）。由于“Contact”是“Venue”的子对象，如果不指定 Contact 标识符，您将无法映射到 Contact 字段（例如“contact.company”）。因此，以下代码（为 contact.id 添加了适当的元素）可以正常工作：

```
String sql =    "SELECT  v.id, c.id, c.company, c.postcode " +
                "FROM    venue v " +
                "JOIN    contact c ON (c.id = v.id) " +
                "WHERE   REPLACE(c.postcode, ' ', '') LIKE '%" + q + "%' " +
                "    OR  c.company LIKE '%" + q + "%'";

RawSql rawSql = RawSqlBuilder.unparsed(sql)
    .columnMapping("v.id", "id")
    .columnMapping("c.id", "contact.id")
    .columnMapping("c.company", "contact.company")
    .columnMapping("c.postcode", "contact.postcode")
    .create(); 
```

甚至比这更好，因为例程只是返回在查询中匹配的“地点”对象列表，甚至不需要包含其他字段，所以我真正需要的是以下内容（这也有效）：

```
String sql =    "SELECT  v.id " +
                "FROM    venue v " +
                "JOIN    contact c ON (c.id = v.id) " +
                "WHERE   REPLACE(c.postcode, ' ', '') LIKE '%" + q + "%' " +
                "    OR  c.company LIKE '%" + q + "%'";

RawSql rawSql = RawSqlBuilder.unparsed(sql)
    .columnMapping("v.id", "id")
    .create(); 
```

# javascript - 我怎样才能清理这个 javascript jquery

> ID：13977697
> 
> 赞同：0
> 
> 时间：2012-12-20T17:47:01.400
> 
> 标签：javascript, jquery

我有这两个功能。

第一个写得很好，因为知道如何编写 js 的人做到了。

我做的第二个。

```
var GetURLParameter = function($param){
    var sPageURL = window.location.search.substring(1);
    var sURLVariables = sPageURL.split('&');
    for(var i = 0; i < sURLVariables.length; i++) {
        var sParameterName = sURLVariables[i].split('=');
        if (sParameterName[0] == $param) {
            return sParameterName[1];
        }
    }
}

if(GetURLParameter('filter')!= "undefined"){
     $('#'+GetURLParameter('filter')).parent().parent().children('li.active').removeClass('active')
     $('#'+GetURLParameter('filter')).parent().addClass('active');
} 
```

我想在重复该行时简化呼叫，`GetURLParameter('filter')`但我不知道如何使它像关键字一样工作`this`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:50:09.360

只需将中间值存储在变量中：

```
var $filter = GetURLParameter('filter');

if($filter != "undefined") { 
    var $parent = $('#' + GetURLParameter('filter')).parent();

    $parent.parent().children('li.active').removeClass('active');
    // better alternative (thanks wirey)
    // $parent.siblings('li.active').removeClass('active')

    $parent.addClass('active');
} 
```

当然，这样做的好处是可读性更高，而且效率更高，因为它不会重新运行相同的函数或多次查询 DOM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:50:44.500

// 假设你有`ul`，你也可以替换为`ol`

```
if(GetURLParameter('filter')!= "undefined"){    
    var $mydiv = $('#'+GetURLParameter('filter'));
    $mydiv.closest('ul').children('li.active').removeClass('active');
    $mydiv.parent().addClass('active');    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:53:27.783

```
$( function () {
   if( GetURLParameter( 'filter' ) != 'undefined' ) {
      var filter = $( '#' + GetURLParameter( 'filter' ) ).parent();
      filter.parent().children( 'li.active' ).removeClass( 'active' );
      filter.addClass( 'active' );
   }
} ); 
```

虽然我会说还有更多方法可以让这段代码变得更好。

# playframework-2.0 - 为什么 Anorm 的 executeInsert 抱怨从 BigDecimal 转换？

> ID：13977703
> 
> 赞同：1
> 
> 时间：2012-12-20T17:47:40.400
> 
> 标签：playframework-2.0, derby, anorm

我在 Play 2.0.2 中使用带有 Anorm 的 Derby 数据库。即使没有列有`BigDecimal`字段，插入表时也会出现以下错误。

> 执行异常 [[RuntimeException: TypeDoesNotMatch(Cannot convert 1:class java.math.BigDecimal to Long for column .1)]]

如果我查看表格，我可以看到我的数据*已输入*，因此我推断问题与返回新密钥有关。但我清楚地宣布关键是`bigint`——为什么要投诉`BigDecimal`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T17:47:40.400

事实证明，Derby[总是将键返回为`BigDecimal`](http://code.google.com/p/orbroker/wiki/Gotchas)-- 即使它们的键以其他方式定义。解决方案是使用自定义`ResultSetParser`来处理`BigDecimal`. 返回的 id 列名为“1”。

```
 def idResultSetParser(implicit extractor: anorm.Column[java.math.BigDecimal]) =
    ResultSetParser.singleOpt[java.math.BigDecimal](
      anorm.SqlParser.get[java.math.BigDecimal]("1")) 
```

或者，把它们放在一起。

```
 import java.math.BigDecimal
  s.executeInsert[Option[BigDecimal]](
      ResultSetParser.singleOpt[BigDecimal](
          anorm.SqlParser.get[BigDecimal]("1"))) 
```

然后，您可以将其映射到`Long`with `map (_.longValue)`。

# web-services - SOA 平台中服务的客户端缓存

> ID：13977705
> 
> 赞同：2
> 
> 时间：2012-12-20T17:47:50.073
> 
> 标签：web-services, caching, client, soa

我们有一个基于 SOA 的平台，其中包含许多服务和使用这些服务的应用程序集。每个服务都通过客户端公开其功能，该客户端成为主机应用程序的一部分并调用服务。

为了减少网络调用的数量，我创建了一个客户端缓存框架，其中对象缓存在客户端层中。客户端定期轮询服务以检查哪些对象已更改并相应地使缓存无效。因此，在大多数情况下，传入的请求都是从客户端缓存提供的，只有在客户端缓存不包含请求的项目时才会进行服务调用。

我的问题是，如果我有 10 个不同的应用程序依赖于特定的服务/客户端，那么相同的缓存将在所有应用程序中复制，这似乎太多冗余并且每个应用程序都会占用更大的内存。

我在这里有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:42:09.973

您可以为将与应用程序驻留在同一台机器上的服务设置“前端”或代理。它可以公开远程服务的相同 API 并利用其中的缓存。如果您使用 OSGI 之类的东西，您仍然可以将其部署为独立组件

# r - 将 Z 值矩阵转换为 R 中的颜色

> ID：13977706
> 
> 赞同：2
> 
> 时间：2012-12-20T17:48:01.807
> 
> 标签：r

我正在使用 persp3d，我需要根据我的 z 值确定要用于绘图的颜色。我有一个 z 值矩阵（90 x 201）矩阵，z 值范围从 3E-39 到 1.3。

如何找出用作 persp3d 的颜色参数的颜色列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:06:14.037

你可以尝试这样的事情：

```
 rainbow(length(z))[rank(z)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:48:08.283

（我假设您指`persp3D`的是**GA**包。如果是这样，这就是我的建议。）

* * *

1.  看看，的参数`jet.colors`的默认值：`persp3D``color.palette=`

    ```
    library(GA)
    jet.colors
    # function (n) 
    # {
    #     palette <- colorRampPalette(c("#00007F", "blue", "#007FFF", 
    #         "cyan", "#7FFF7F", "yellow", "#FF7F00", "red", "#7F0000"))
    #     palette(n)
    # } 
    ```

2.  将其用作您自己的功能的模型。（请参阅有关`?colorRampPalette`其工作原理的一些见解）：

    ```
    USA.colors <- function(n) {
        palette <- colorRampPalette(c("red", "white", "blue"))
        palette(n)
    } 
    ```

3.  试试看：

    ```
    ## Adapted from example in ?persp3D
    y <- x <- seq(-10, 10, length=60)
    f <- function(x,y) { r <- sqrt(x^2+y^2); 10 * sin(r)/r }
    z <- outer(x, y, f)
    persp3D(x, y, z, theta = 30, phi = 30, expand = 0.5,
            color.palette = USA.colors) 
    ```

![在此处输入图像描述](../Images/89f4e5a5802820717e5b53196ea8e981.png)

# windows-8 - 在 Windows 8 上使用 SQL Server CE 3.5 的操作系统错误（桌面不是 Metro）

> ID：13977708
> 
> 赞同：0
> 
> 时间：2012-12-20T17:48:18.060
> 
> 标签：windows-8, sql-server-ce

尝试连接到 SQL Server CE 数据库时出现异常。

`OS Error: The OS storage system (RAM, CF, SD, or IPSM) is not responding.`

该数据库似乎是有效的，我可以打开它并在 Visual Studio 中浏览它。

Windows 8 是否支持 SQL Server CE 3.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T21:31:37.873

当连接字符串指向计算机上不存在的驱动器上的数据库文件时，这不是您得到的错误。

连接字符串指向 D: 而不是 C:

# grails - 无论如何要更改默认的 Grails 服务命名约定？

> ID：13977710
> 
> 赞同：1
> 
> 时间：2012-12-20T17:48:38.780
> 
> 标签：grails

我想在不使用 *Service 后缀约定的类名称的情况下创建 Grails 服务（例如，将我的类命名为 Scheduler 而不是 ScheduleService）。无论如何，是否有覆盖 Grails 的默认行为并将`grails-app/service`目录中的任何对象视为 Grails 服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:08:08.600

我不这么认为，但如果原因是你想为 bean 使用不同的名称，你可以尝试为 scheduleService 注册一个别名。根据[此页面上](http://burtbeckwith.com/blog/?p=85)的评论，您应该能够将其添加到 resources.groovy：

```
springConfig.addAlias('scheduler','scheduleService') 
```

不过，我自己没有尝试过，也没有在文档中找到任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-24T14:22:56.563

当然可以，只需在 resources.groovy 中进行

```
scheduler(YourCustomSchedulerClassname){ b->
    // config
} 
```

然后你可以在其他任何地方做

```
class MyService {
    def scheduler
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T05:55:17.690

Grails 服务注册为带有插件的 bean，信不信由你，因此您应该能够通过创建自己的插件来完成此操作。

查看[grails-plugin-services 源代码](https://github.com/grails/grails-core/blob/master/grails-plugin-services/src/main/groovy/org/codehaus/groovy/grails/plugins/services/ServicesGrailsPlugin.groovy)。您可以看到监视的服务与此行硬连线：

```
def watchedResources = ["file:./grails-app/services/**/*Service.groovy",
                        "file:./plugins/*/grails-app/services/**/*Service.groovy"] 
```

现在，尽管这是可能的，但它可能需要一些工作，而且这可能是个坏主意。我真的不知道。我不知道如果你从本质上复制服务插件、更改`watchedResources`并将其包装在你自己的插件中，Grails 是否会发疯。

我只是浏览了 grails 文档，关于[Artefacts](http://grails.org/doc/latest/guide/plugins.html#artefactApi)的部分也应该很有用。

如果您只是在寻找一种更简单的方法来引用您的服务，请执行以下操作：

```
def painfullyLongNameService
def getNoPain() {return painfullyLongNameService}

noPain.yourServiceFunction() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T18:18:25.850

不要认为这是可能的。因为它是 grails 框架中隐含的“约定”的一部分。

# c++ - 链接库时出错：libboost_system

> ID：13977712
> 
> 赞同：0
> 
> 时间：2012-12-20T17:48:41.133
> 
> 标签：c++, boost, g++, mingw, boost-asio

我正在尝试从 Boost:Asio 教程中运行一些基本的服务器/客户端软件。该应用程序在 linux 机器上运行良好，但是当我尝试在我的 windows 机器（mingw）上编译代码时，我无法链接 boost_system 库。

g++ -IC:\boost_1_52_0\include\boost server.cpp -o server.exe -lpthread -lboost_system

如何在我的 Windows 框中链接 boost_system？

错误：

```
c:\Users\me\Documents\cpp\asioTest>g++ -I C:\boost_1_52_0\include\boost-1_52\ asioServer.cpp -lboost_system

In file included from C:\boost_1_52_0\include\boost-1_52/boost/asio/basic_datagram_socket.hpp:18:0,
             from C:\boost_1_52_0\include\boost-1_52/boost/asio.hpp:20,
             from asioServer.cpp:15:
C:\boost_1_52_0\include\boost-1_52/boost/asio/detail/config.hpp:205:5: warning:
#warning Please define _WIN32_WINNT or _WIN32_WINDOWS appropriately. [-Wcpp]
C:\boost_1_52_0\include\boost-1_52/boost/asio/detail/config.hpp:206:5: warning:
#warning For example, add -D_WIN32_WINNT=0x0501 to the compiler command line. [-Wcpp]
C:\boost_1_52_0\include\boost-1_52/boost/asio/detail/config.hpp:207:5: warning:
#warning Assuming _WIN32_WINNT=0x0501 (i.e. Windows XP target). [-Wcpp]
c:/mingw/bin/../lib/gcc/mingw32/4.7.2/../../../../mingw32/bin/ld.exe: cannot find -lboost_system
collect2.exe: error: ld returned 1 exit status 
```

# javascript - Carret 位置始终返回 0

> ID：13977713
> 
> 赞同：2
> 
> 时间：2012-12-20T17:48:48.327
> 
> 标签：javascript, google-chrome-extension

我正在尝试在`<body>`具有`contentEditable = true`. 我正在从 chrome 插件运行内容脚本并像这样绑定操作：

```
getCaretPosition = function(element) {
    var range = parent.$("iframe.html").getCursorPosition();
    alert(range);
    return caretOffset;
} 
```

`getCursorPosition`我在类似的堆栈溢出答案中找到了以下代码：

```
(function ($, undefined) {
$.fn.getCursorPosition = function() {
    var el = $(this).get(0);
    var pos = 0;
    if('selectionStart' in el) {
        pos = el.selectionStart;
    } else if('selection' in document) {
        el.focus();
        var Sel = document.selection.createRange();
        var SelLength = document.selection.createRange().text.length;
        Sel.moveStart('character', -el.value.length);
        pos = Sel.text.length - SelLength;
    }
    return pos;
}
})(jQuery); 
```

但它总是返回 0 的位置。

# javascript - 使用后退按钮将 div 向后滑动

> ID：13977714
> 
> 赞同：2
> 
> 时间：2012-12-20T17:48:51.840
> 
> 标签：javascript, jquery

我正在使用带有此代码的滑动 div：

html:

```
 <div id="container">

<div id="box1" class="box">Div #1</div>
<div id="box2" class="box">Div #2</div>
<div id="box3" class="box">Div #3</div>
<div id="box4" class="box">Div #4</div>

    </div> 
```

CSS：

```
 body {
      padding: 0px;    
    }

    #container {
     position: absolute;
     margin: 0px;
     padding: 0px;
     width: 100%;
     height: 100%;
     overflow: hidden;  
    }

  .box {
    position: absolute;
    width: 50%;
    height: 300px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    left: 150%;
    top: 100px;
    margin-left: -25%;
  }

  #box1 {
   left: 50%; 
```

js：

```
 $('.box').click(function() {

$(this).animate({
    left: '-50%'
}, 500, function() {
    $(this).css('left', '150%');
    $(this).appendTo('#container');
});

$(this).next().animate({
    left: '50%'
}, 500);
});​ 
```

这里有jsfiddle：http: [//jsfiddle.net/jtbowden/ykbgT/2/](http://jsfiddle.net/jtbowden/ykbgT/2/)

我希望能够使用浏览器的上一个按钮返回上一个 div。

有没有办法做到这一点？

编辑：

我尝试只添加锚点，但它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:55:16.743

我会使用类似这个 hashchange 插件[http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

有一个在 hashchange 上执行的函数，可以将适当的框滑入视图

当您使用浏览器的后退和前进按钮时，它会更改哈希并且您的代码将运行。

```
$(window).hashchange(function() {
    var hash = location.hash;
    slideBox(hash.substr(1));
}); 
```

# php - PHP，JQuery 表单提交重定向到另一个页面

> ID：13977718
> 
> 赞同：2
> 
> 时间：2012-12-20T17:49:23.853
> 
> 标签：php, jquery, ajax, codeigniter, post

我在一个页面中有两个表单，注册和登录。如果用户尝试在“register_username”字段中输入用户名，则在模糊、ajax 上检查该用户名是否已被使用。一切正常。但我发现如果这个 ajax-call 已经发出，然后你在**登录**表单上单击提交，它会重定向到 php-ajax 页面而不是 form-proccess php 页面。

我使用 Code-Ignitier 作为 PHP 框架，使用 JQuery 作为 javascript 库，仅此而已。如果我要求，我会尝试提供任何其他信息。非常感谢您。

**编辑：** //Javascript代码：

```
$('#register_username').live('blur',function() {
 $.post('ajax/username_taken', {'register_username':$(this).val() },
 function(result) {
  if(result) {
   $('#register_username').addClass('error');
  }
  else {
   $('#register_username').removeClass('error');
  }
 });
} 
```

//php代码

```
echo form_open('form/login',$form_attr);
echo ....
echo form_submit($submit_attr);
echo form_close();
echo form_open('form/register',$form_attr);
echo ....
echo form_submit($submit_attr);
echo form_close(); 
```

*注意：* 这都是简化的，表单实际上是在不同的视图上，只有寄存器有一个控制器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:41:55.483

我只是盲目猜测，因为您没有提供太多信息。似乎您的 javascript 覆盖了您的提交按钮的单击事件，因此请尝试将其添加到您的中`function(result)`，看看是否有任何变化：

```
$('submit_button_selector').unbind(); 
```

当然，用您的按钮选择器更改 $('XXX') 部分，通常应该像`$('#my_form).find(':submit')`

它真的是一个盲点，更多信息会有很大帮助。

# pandas - pandas：read_csv 将日期时间列组合为数据帧的索引

> ID：13977719
> 
> 赞同：2
> 
> 时间：2012-12-20T17:49:41.200
> 
> 标签：pandas, data-analysis

我有一个 csv 文件，其中包含日期和时间戳作为两列。我正在使用熊猫`read_csv`将内容读入数据框。我的最终目标是从数据中绘制时间序列图。

```
!head vmstat.csv
wait_proc,sleep_proc,swapped_memory,free_memory,buffered_memory,cached_memory,swapped_in,swapped_out,received_block,sent_block,interrups,context_switches,user_time,sys_time,idle_time,wait_io_time,stolen_time,date,time
0,0,10896,3776872,380028,10284052,0,0,6,16,7716,4755,3,1,96,0,0,2012-11-01,08:59:27
0,0,10896,3776500,380028,10284208,0,0,0,40,7471,4620,0,0,99,0,0,2012-11-01,08:59:32
0,0,10896,3749840,380028,10286864,0,0,339,19,7479,4704,20,2,77,1,0,2012-11-01,08:59:37
0,0,10896,3747536,380028,10286964,0,0,17,118,7488,4638,0,0,99,0,0,2012-11-01,08:59:42
0,0,10896,3747452,380028,10287148,0,0,0,24,7489,4676,0,0,99,0,0,2012-11-01,08:59:47

df = read_csv("vmstat.csv", parse_dates=[['date','time']])
f = DataFrame(df, columns=[ 'date_time',  'user_time', 'sys_time', 'wait_io_time'])

In [3]: f
Out[3]:
date_time               user_time  sys_time     wait_io_time
0  2012-11-01 08:59:27          3         1             0
1  2012-11-01 08:59:32          0         0             0
2  2012-11-01 08:59:37         20         2             1
3  2012-11-01 08:59:42          0         0             0
4  2012-11-01 08:59:47          0         0             0 
```

至此，我们可以正确读取数据并`date_time`合并到DataFrame中。如果我尝试使用`date_time`from`df`作为索引，则会出现问题。指定`index = df.date_time`给出所有`NaN`值：

```
dindex = f['date_time']
print dindex
g = DataFrame(f, columns=[ 'user_time', 'sys_time', 'wait_io_time'], index=dindex)

In [7]: g
Out[7]:
0    2012-11-01 08:59:27
1    2012-11-01 08:59:32
2    2012-11-01 08:59:37
3    2012-11-01 08:59:42
4    2012-11-01 08:59:47
Name: date_time  <---- dindex
g:
                 user_time  sys_time  wait_io_time
date_time                                             
2012-11-01 08:59:27        NaN       NaN           NaN
2012-11-01 08:59:32        NaN       NaN           NaN
2012-11-01 08:59:37        NaN       NaN           NaN
2012-11-01 08:59:42        NaN       NaN           NaN
2012-11-01 08:59:47        NaN       NaN           NaN 
```

如您所见，列值显示为所有`NaN`s。如何在中间`f`帧中获得正确的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:28:52.350

你想使用[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)：

```
df1 = df.set_index('date_time') 
```

它选择该列`'date_time'`作为新 DataFrame 的索引。

.

*注意：您在 DataFrame 构造函数中遇到的行为如下所示：*

```
df = pd.DataFrame([[1,2],[3,4]])
df1 = pd.DataFrame(df, index=[1,2])

In [3]: df1
Out[3]: 
    0   1
1   3   4
2 NaN NaN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:58:48.110

我可以通过以下代码获得解决方法：

```
 up = f.pivot_table('user_time', rows='date_time')
    sp = f.pivot_table('sys_time', rows='date_time')
    wp = f.pivot_table('wait_io_time', rows='date_time')
    u=pandas.DataFrame(up)
    u['sys_time']=sp
    u['wait_io_time']=wp
    my_colors = ["#FF6666", "#00CC33", "#44EEEE"] 
    print u 
```

出去：

```
 user_time    sys_time  wait_io_time
    date_time                                          
    2012-11-01 08:59:27          3         1          0
    2012-11-01 08:59:32          0         0          0
    2012-11-01 08:59:37         20         2          1
    2012-11-01 08:59:42          0         0          0
    2012-11-01 08:59:47          0         0          0 
```

应该有更直接的方法来实现这一点，但我是熊猫的新手。

此外，u.plot() 函数无法绘制时间序列图。“AttributeError: 'numpy.int64' object has no attribute 'ordinal'” 所以等待其他人的意见以获得更好的解决方案。

# javascript - 根据屏幕大小用 jQuery 替换样式表

> ID：13977721
> 
> 赞同：5
> 
> 时间：2012-12-20T17:49:49.433
> 
> 标签：javascript, jquery, screen-size

嗨，我想知道是否有人可以提供帮助，我正在尝试使用 jQuery 创建一个响应式站点（必须这样做，因为目标受众在 IE7/8 上，并且 css3-mediaqueries.js 似乎干扰了我的 jQuery UI m 也使用）。我正在使用以下脚本来检测宽度和高度并相应地应用样式，它适用于宽度但不适用于高度，它加载**SMstyle.css**然后用**style.css**覆盖。我正在尝试学习 JavaScript，但目前还不是很强大，我知道有更简单的方法！任何帮助，将不胜感激...

```
function adjustStyle(width) {
        width = parseInt(width);
        if ((width >= 701) && (width < 1200
        )) {
            $("#size-stylesheet").attr("href", "css/SMstyle.css");
        } else {
            $("#size-stylesheet").attr("href", "css/style.css");
        }
    }

    $(function() {
        adjustStyle($(this).width());
        $(window).resize(function() {
            adjustStyle($(this).width());
        });
    });

    function adjustStyle(height) {
        height = parseInt(height);
        if (height < 800
        ) {
            $("#size-stylesheet").attr("href", "css/SMstyle.css");
        } else {
            $("#size-stylesheet").attr("href", "css/style.css");
        }
    }

    $(function() {
        adjustStyle($(this).height());
        $(window).resize(function() {
            adjustStyle($(this).height());
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T17:59:01.807

重构（未经测试）

```
function adjustStyle(width, height) {
    width = parseInt(width);
    height = parseInt(height);
        if (((width >= 701) && (width < 1200)) || (height < 800))
            $("#size-stylesheet").attr("href", "css/SMstyle.css");
        else
            $("#size-stylesheet").attr("href", "css/style.css");
}

$(function() {
    adjustStyle($(this).width(), $(this).height());
    $(window).resize(function() {
        adjustStyle($(this).width(), $(this).height());
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:08:36.647

在处理响应式布局时，您并不真正关心高度。整个概念是，如果内容不能适应宽度，它就会崩溃（从而增加高度）。

**编辑：**

我相信您需要使用 $(document) 而不是 $(this)，因为当您手动触发 $(this) 和由 resize 事件触发它时，它的范围会有所不同。

```
function adjustStyle() {
    var width = $(document).width();
    var height = $(document).height();
    if (((width >= 701) && (width < 1200)) || (height < 800)) {
        $("#size-stylesheet").attr("href", "css/SMstyle.css");
    } else {
        $("#size-stylesheet").attr("href", "css/style.css");
    }
}

adjustStyle();
$(window).resize(function() {
    adjustStyle();
}); 
```

要查看不同的范围，请尝试以下操作：

```
$(function() {
    console.log('Scope', $(this)); // Scope is DOM-element
    $(window).resize(function() {
        console.log('Scope', $(this)); // Scope is Window object.
    });
}); 
```

# javascript - jquery计算具有相同类的不同元素中的不同值

> ID：13977722
> 
> 赞同：1
> 
> 时间：2012-12-20T17:49:49.437
> 
> 标签：javascript, jquery, html

我有这个代码：

```
<script type="text/javascript">
    $("#run").click(function(){
        var prc = $('.hprc').html();
        var mval = '0.1';
        $('.vprc').html('$'+(prc * mval));
    });
</script>
<table id="form1" cellpadding="0" cellspacing="0" border="1">
        <tr>
            <td>
                <div class="col_label">Col1</div>
            </td>
            <td>
                <div class="col_label">col2</div>
            </td>
        <tr>
            <td>
                <input class='pos1' lid1='243' lid2='0' type='checkbox' /><label class='main_cb'>Name1</label>
            </td>
            <td>
                <div class='prc'><div class='hprc'>15.00</div>
                <div class='vprc'>$0</div></div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table width='100%' class='block1' cellpadding='0' cellspacing='0' border='1'>
                    <tr>
                        <td>
                            <input class='pos2' lid1='1' lid2='0' pval='1.00' type='checkbox' /><label class='sec_cb'>Name2</label>
                        </td>
                        <td>
                            <div class='prc'><div class='hprc'>1.00</div><div class='vprc'>$0</div></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input class='pos3' lid1='0' lid2='2401' pval='22.00' type='checkbox' /><label class='sec_cb'>Name3</label>
                        </td>
                        <td>
                            <div class='prc'><div class='hprc'>22.00</div><div class='vprc'>$0</div></div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <input class='pos4' lid1='243' lid2='0' type='checkbox' /><label class='main_cb'>Name4</label>
            </td>
            <td>
                <div class='prc'><div class='hprc'>7.00</div><div class='vprc'>$0</div></div>
            </td>
        </tr>
        <tr>
            <td colspan="2">
                <table width='100%' class='block2' cellpadding='0' cellspacing='0' border='1'>
                    <tr>
                        <td>
                            <input class='pos5' lid1='193' lid2='0' pval='9.00' type='checkbox' /><label class='sec_cb'>Name5</label>
                        </td>
                        <td>
                            <div class='prc'><div class='hprc'>9.00</div><div class='vprc'>$0</div></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input class='pos6' lid2='1737' lid1='0' pval='19.00' type='checkbox' /><label class='sec_cb'>Name6</label>
                        </td>
                        <td>
                            <div class='prc'><div class='hprc'>19.00</div><div class='vprc'>$0</div></div>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
    <input type='button' value='calc' id='run'/> 
```

该表是通过 php 生成的，其 cont 的计数可能会有所不同。

我正在尝试使用 jquery 在每一行上计算类 'hprc' * '0.1' 的值。

它只计算第一行，然后将第一个结果复制到其余部分。

修改表的结构或以不同的方式命名类不是一种选择。

如何为每一行应用公式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T17:55:25.257

您可以使用

```
// for each item with class prc (the containers)
$('.prc').each(function(){
   var self = $(this),
       mval = 0.1,
       hprc = parseFloat(self.find('.hprc').text()), // get the value of the .hprc element and convert to float number
       vprc = self.find('.vprc');
   vprc.text('$' + (hprc*mval)); // store the result 
}); 
```

由于您正在处理价格，您还可以`.toFixed(2)`在计算后添加到四舍五入到 2 个小数位。

```
vprc.text('$' + (hprc*mval).toFixed(2)); 
```

**演示在** [http://jsfiddle.net/gaby/uFjQc/](http://jsfiddle.net/gaby/uFjQc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T17:54:41.293

使用 jQuery`.each()`函数，如：

```
var prc = null;

$('.hprc').each(function(){
   prc = $(this).html();
   .....
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T17:59:38.500

你可以这样做

```
$("#run").click(function() {
    $('.vprc').html(function() {
        return '$' + ($(this).prev('.hprc').text() * 0.1).toFixed(2);
    });
});​ 
```

[http://jsfiddle.net/7GSxS/](http://jsfiddle.net/7GSxS/)

# android - Android应用许可新旧 - 疑问

> ID：13977724
> 
> 赞同：19
> 
> 时间：2012-12-20T17:49:52.133
> 
> 标签：android, public-key-encryption, android-lvl

就在几周前，谷歌更改了 Android LVL API（许可证验证库）。

在旧的 LVL 中，许可证检查是基于使用基于每个帐户生成的公钥/私钥进行的许可证验证。新的假设是每个应用程序库使用公钥/私钥。

我有使用旧 LVL 的应用程序，看起来它可以工作（看起来像，但实际上我不知道）。应用程序嵌入基于每个帐户生成的公钥。

现在，当我决定升级我的应用程序时，我应该怎么做？嵌入应用程序的公钥还是仍然使用帐户的公钥？

我没有设法在谷歌的 Android 开发者网站上找到任何线索......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T19:42:20.730

将旧的许可证密钥系统视为已弃用会有所帮助 - 它仍然适用于旧应用程序，并且可能继续适用于更新。与不推荐使用的任何内容一样，将来可以随时禁用或删除，恕不另行通知，您可能不想等待太久才能使用新系统 - 但您的旧密钥现在应该可以使用。因此，如果您必须推出更新，您可能可以使用旧系统/密钥。

正如 BadCash 所建议的那样，新的许可证密钥生成似乎还不是一个即时过程。一旦生成，它可能需要几分钟到几个小时才能在其许可系统中传播，因此可以被识别为有效的许可签名。

请注意，谷歌似乎正在完全脱离这个系统，但是，根据他们的网站：[Google Play Licensing Service](http://support.google.com/googleplay/android-developer/answer/186113?hl=en)

所以我建议用新系统辞职以避免将来的烦恼——如果不是太麻烦，取决于你的应用程序数量——并且知道将来你根本不必再做一次。

# javascript - HandlebarsJS“with”块的AngularJS等价物是什么？

> ID：13977729
> 
> 赞同：1
> 
> 时间：2012-12-20T17:50:11.387
> 
> 标签：javascript, scope, angularjs, handlebars.js

在[HandlebarsJS中，您可以使用](http://handlebarsjs.com/)[“with”块](http://handlebarsjs.com/#with)将范围更改为当前范围的子属性。我怎样才能在[AngularJS](http://angularjs.org/)中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:05:08.600

```
{
  title: "My first post!",
  author: {
    firstName: "Charles",
    lastName: "Jolley"
  }
} 
```

做就是了

```
<span>{{author.firstname}}

{{author.lastName}}</span> 
```

AngularJS 不在乎你的数据嵌套了多少。

# servlets - Apache CXF 和 servlet 映射

> ID：13977730
> 
> 赞同：2
> 
> 时间：2012-12-20T17:50:28.160
> 
> 标签：servlets, cxf

我正在尝试学习 Apache CXF 的一些基础知识，以及一般关于 servlet-mappings 的知识。我在这里修改了代码：

[https://subversion.assembla.com/svn/pablo-examples/spring-cxf-example](https://subversion.assembla.com/svn/pablo-examples/spring-cxf-example)

我在 web.xml 中配置了 CXFServlet 映射如下

```
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping> 
```

在 spring xml(webservice-definition-beans.xml) 中，我生成了如下服务

```
<jaxws:endpoint id="helloWorld" implementor="#helloWorldService" address="/services/HelloWorld" /> 
```

我期待通过这个 url 访问服务 wsdl

```
http://localhost:8080/services/HelloWorld?wsdl 
```

但它是

```
http://localhost:8080/services/services/HelloWorld?wsdl 
```

我知道这里有什么问题吗？

servlet-mapping 不只显示哪个 url 模式映射到要处理的 servlet 吗？

在这里它似乎也改变了上下文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-23T14:30:31.867

JAX-WS 路径是相对于 servlet 映射的。如果你想

```
http://localhost:8080/services/HelloWorld?wsdl 
```

使用任何一个

```
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<jaxws:endpoint id="helloWorld" implementor="#helloWorldService" address="/services/HelloWorld" /> 
```

或者

```
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/services/*</url-pattern>
</servlet-mapping>

<jaxws:endpoint id="helloWorld" implementor="#helloWorldService" address="/HelloWorld" /> 
```

# android - 禁用耳机麦克风并启用设备麦克风。

> ID：13977734
> 
> 赞同：4
> 
> 时间：2012-12-20T17:50:52.587
> 
> 标签：android, microphone, headset

我们可以区分耳机和 Android 设备的麦克风吗？

我正在尝试从设备的麦克风录制音频，但它将音频从耳机的麦克风路由到 android 设备。我们是否可以选择从设备的麦克风或耳机的麦克风收听？

请帮我。我会很感激的。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:40:25.953

并不真地。如果您插入有线耳机，默认情况下，其麦克风将用作语音通话和录音的输入。

您可以为您的 MediaRecorder 指定[AudioSource.CAMCORDER](http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html)，它*应该*为您提供一个内部麦克风而不是耳机麦克风。问题是您可能会在设备背面安装麦克风（如果设备在那里有麦克风），这可能不是您想要的。

`AudioSource.VOICE_RECOGNITION`可能会映射到某些设备上的主要内部麦克风，但不能保证这样做。也不能保证它是否会针对近场或远场记录进行调整。

# c++ - 在 C++ 中返回多维数组的函数

> ID：13977737
> 
> 赞同：5
> 
> 时间：2012-12-20T17:50:59.270
> 
> 标签：c++, arrays, function, multidimensional-array

作为一名 Java 程序员，我很难获得一个返回多维数组的函数。我将如何用 C++ 编写代码？：

```
int[][] theFunction(){
  int[][] var = new int[3][3];
  // code
  return var;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:52:27.630

在 C++ 中，最简单的方法是这样的：

```
std::vector<std::vector<int> > theFunction() {
    std::vector<std::vector<int> > var(3, std::vector<int>(3));
    // code
    return var;
} 
```

您需要包含`<vector>`才能编译。与 Java 通用容器不同，C++ 模板容器不会产生将原语包装到对象中的成本，因此它们可以在性能和内存消耗方面保持极高的效率，同时提供大量额外的灵活性。

通常，您应该更喜欢 C++ 风格的容器（`std::vector`, `std::set`, `std::map`, 和 C++11 中的 ,`std::array`​​ ）而不是从 C“继承”的不太灵活的内置替代品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T18:00:59.393

简而言之，在 C 中（比方说，你在 C++ 中使用的方言 [C++ 是 C 的超集，有一些修改]）你不能从函数返回向量或矩阵。但是，您可以返回一个指针（这可能对您没有太大帮助）。

在 C 和 C++ 中，向量的名称（让我们简化一下）是指向第一个位置的指针，因此：

```
int v[] = { 1, 2, 3 };
int * ptr = v; 
```

指针是一个内存地址，您可以使用它来遍历所有元素（尽管它可能很危险）：

```
for( ; ptr < ( v + 3 ); ++ptr) {
     std::cout << *ptr << stD::endl;
} 
```

并且可以返回该指针：

```
int * vectorCreator(int max)
{
    int * v = new int[max];
    return v;
} 
```

请注意，在这种情况下，调用者负责在完成后释放向量。这是一个您可以解决的问题`auto_ptr`（新标准已过时，您应该`unique_ptr`在编译器允许后使用它）。

```
auto_ptr<int> vectorCreator(int max)
{
    int * v = new int[max];
    return auto_ptr<int>( v );
} 
```

在这个方向上，C++ 标准库的一部分工作，您可以在其中使用`vector<>`模板，这更安全，也更舒适。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T17:56:29.487

正如其他人所说，您可以返回一个`std::vector<std::vector<int> >`. 值得指出的是，在这种情况下，C++ 的[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization "返回值优化")可能非常重要——特别是，仅查看这段代码，您可能会认为函数返回时必须复制整个向量的向量（因为 C++函数的返回值是按值返回的）。但是这种优化是 C++ 明确允许的，并且几乎可以由任何编译器实现，它允许函数将向量分配到它将返回到的任何结构中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T17:53:28.120

```
std::vector<std::vector<int> > theFunction() {
    std::vector<std::vector<int> > var;
    // code
    return var;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T17:53:29.070

你不会在 C++ 中使用 C 数组（在符号上看起来像 Java 数组），你会使用`vector`：

```
typedef std::vector<std::vector<int> > VecType;

VecType theFunction()
{
  VecType var(3, std::vector<int>(3));
  // code
  return var;
} 
```

# c# - 哪种是文本提取策略的正确方法？

> ID：13977738
> 
> 赞同：0
> 
> 时间：2012-12-20T17:50:59.237
> 
> 标签：c#, pdf, itextsharp

在我的 c# 代码中，我从 pdf 中提取文本，我有两种方法可以做到这一点。但是，一种方法适用于一种类型的 pdf 文档，另一种方法适用于另一种类型的 pdf 文档。

当方法 1 失败时，我得到文本但没有任何空格，当方法 2 失败时，我只得到 \r\n。

方法 1（来自[http://www.codeproject.com/Articles/14170/Extract-Text-from-PDF-in-C-100-NET](http://www.codeproject.com/Articles/14170/Extract-Text-from-PDF-in-C-100-NET)的类）

```
PDFParser pdf_parser = new PDFParser();
currentText = pdf_parser.ExtractTextFromPDFBytes(pdfReader.GetPageContent(page)) + " "; 
```

方法二

```
StringWriter output = new StringWriter();
for (int i = 1; i <= reader.NumberOfPages; i++)
    output.WriteLine(PdfTextExtractor.GetTextFromPage(reader, i, new SimpleTextExtractionStrategy()));
currentText = output.ToString(); 
```

有没有办法结合这两个功能，所以它总是有效的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T00:17:17.110

关于**方法 1**：该 codeproject 文章中的 PdfParser 仅适用于特殊情况。

它假定所有文本内容都包含在直接页面内容流中。实际上，这些流可能包括对本身包含文本的资源的引用。对于 n-up 文档尤其如此，但它可能发生在任何文档中。

此外，它假定一些类似 Latin1 的字符编码。这通常是欧洲语言文本的情况（只是经常！）但在许多亚洲语言的情况下，这几乎不会产生合理的结果。

此外，它将所有字距调整间隙解释为空格字符。

关于**方法 2**：如对您之前的问题的评论中所述[如何从 PDF 中提取文本并解码字符？](https://stackoverflow.com/questions/13976233/how-to-extract-text-from-a-pdf-and-decode-characters)你可能想看看这个类似问题的[答案。](https://stackoverflow.com/questions/13644419/itext-java-pdf-to-text-creation/13645183#13645183)

本质上，这种缺少空格字符的原因是您在呈现的 PDF 中看到的空格不一定对应于 PDF 页面内容描述中的空格字符。相反，您经常会在 PDF 中发现一个操作，它在渲染一个单词后将当前位置稍微向右移动，然后再渲染下一个单词。

不幸的是，同样的机制也被用来增强相邻字形的外观：在某些字母组合中，为了获得良好的外观和阅读体验，字形应该打印得比默认情况下更接近或更远。这是使用与上述相同的操作在 PDF 中完成的。

因此，在这种情况下，PDF 解析器必须使用启发式方法来确定这种转变是否意味着暗示一个空格字符，或者它是否仅仅意味着使字母组看起来更好。启发式可能会失败。

引用的答案表明如何调整这些启发式方法，并且该问题的原始发布者相应地找到了成功解析他的 PDF 的良好解决方案。

如果您想要**最终解决**您的问题，您最好提供您观察到该问题的示例 PDF。

# java - 标识符名称中的数字没有问题吗？

> ID：13977739
> 
> 赞同：-1
> 
> 时间：2012-12-20T17:51:08.993
> 
> 标签：java, c++, c, syntax, defensive-programming

由于在**C\C++\Java** -

`int 2a ; //invalid suffix "a" on integer constant`

尽管它是有效的语法，但变体名称的其余部分中的数字没有问题吗？

像 -

```
int num1 ;
int num_1st ;
int num_2nd ; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T17:55:42.257

我从未听说过任何人（例如，任何编码标准/指南）对标识符中的数字有问题。尽管如此，它们中的太多*可能*表明一个向量或数组可能更可取——即使只有两个，你的`num_1st`和`num_2nd`可能会更好`numbers[2]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T17:54:06.443

*标识符*不能以数字开头。它必须以字母或下划线开头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T19:04:42.890

变量标识符必须以字母或下划线开头，但其余字符可以是字母、下划线或数字。

你甚至可以标记一个变量： int _ = 0;

或者如果您熟悉正则表达式，可以将其模式化为：“[a-zA-Z_]\w*?\b”

\w*? 部分不是必须的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T17:57:22.353

答案是，不，标识符名称的其余部分中的数字没有任何问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T18:23:22.670

只要变量名有意义，使用数字作为名称的一部分绝对不是坏事。当然，有大量类似命名的变量，最后只有一个数字来区分它们，这可能是糟糕设计的标志。

我很确定，也不允许标识符以数字开头的原因是它使编写解析器变得更加容易：

```
c = getchar(); 
ungetc(c);
if (isdigit(c)) 
   token = number(); 
else 
   token = identifier(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T14:40:04.773

这是标识符的规则，它必须以字母或下划线开头，之后只允许数字。

# java - 从对话框中获取价值而不关闭它？

> ID：13977740
> 
> 赞同：0
> 
> 时间：2012-12-20T17:51:09.933
> 
> 标签：java, swing, jdialog

我有一个应用程序，它使用 JDialog 从用户那里获取输入，然后搜索文件，而不是浏览对话框，而是使用元数据的更专业的对话框。

这一切都很好。唯一的问题是我希望能够让用户输入搜索值，按确定，并接收这些值来执行搜索和一些其他操作（来自打开对话框的调用类）而不关闭对话框？

有必要从调用类执行这些操作，因为这是编辑器中插件的一部分。

基本上，简而言之，它有点像查找对话框在任何编辑器中的工作方式 - 当您从一个找到的项目跳到下一个项目时，查找对话框保持打开状态......

好像我错过了一些简单的东西，但我看不到如何做到这一点。

编辑：

根据 Nick Rippe 建议的教程，我在一个简单的测试应用程序中尝试了这个，但我认为我以某种方式误解了它，因为我无法让它工作。我添加了一个带有 getter 和 setter 的字段，然后尝试获取它：

主类：

```
public class TestJFrames {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        TestForm frame = new TestForm();
        frame.setDefaultCloseOperation(frame.DO_NOTHING_ON_CLOSE);
        frame.addPropertyChangeListener("fileSelected", new FileSelectedListener());
        frame.setVisible(true);
    }
}

class FileSelectedListener implements PropertyChangeListener {

    @Override
    public void propertyChange(PropertyChangeEvent evt) {
        System.out.println("TEST");
    }
} 
```

从表单类：

```
 private String fileSelected;
    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
        this.setFileSelected("Test");
    }

    public String getFileSelected() {
        return fileSelected;
    }

    public void setFileSelected(String fileSelected) {
        this.fileSelected = fileSelected;
    } 
```

我最终找到了不同的解决方案。如果它可以帮助遇到类似困难的其他人，请在此处发布：

我突然想到，我可以通过将调用类注册为对话框类的侦听器来侦听按钮事件。我几乎遵循了这个例子：[Create a custom event in Java](https://stackoverflow.com/questions/6270132/create-a-custom-event-in-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:58:26.163

Java 教程有一个[专门讨论这个的部分](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#stayup)。我建议检查一下。

将它与[获取用户输入](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html#input)部分结合起来，您就得到了您想要的。

**编辑**

这是一个稍微弄乱教程的例子：

```
import java.awt.event.*;
import javax.swing.*;

public class Temp extends Box{
    JFrame frame;
    JTextArea text;

    public Temp(JFrame frame){
        super(BoxLayout.Y_AXIS);
        this.frame = frame;
        text = new JTextArea("Clickity Clack, down't the track.\nspam");
        add(text);
        JButton button = new JButton("Click Me");
        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                launchDialog();
            }
        });
        add(button);
    }

    public void launchDialog(){
        //What you want the find button to do
        JButton findButton = new JButton("Find");
        findButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int start = text.getText().indexOf("spam");
                int end = start + "spam".length();
                if(start != -1){
                    text.requestFocus();
                    text.select(start, end);
                }
            }
        });

        //Cancel button hides the dialog
        JButton cancelButton = new JButton("Cancel");       

        // Create the options displayed in the dialog
        final JOptionPane optionPane = new JOptionPane(
                "Find \"spam\"?\n"
                + "Do you understand?",
                JOptionPane.QUESTION_MESSAGE,
                JOptionPane.YES_NO_OPTION, null, new Object[]{findButton, cancelButton});

        // Build the dialog window
        final JDialog dialog = new JDialog(frame, 
                                     "Click a button",
                                     false);

        //Add action to close button
        cancelButton.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                dialog.setVisible(false);
            }
        });

        //Finish up and make it visible
        dialog.setContentPane(optionPane);
        dialog.setDefaultCloseOperation(JDialog.DO_NOTHING_ON_CLOSE);
        dialog.setLocation(100, 100);
        dialog.pack();
        dialog.setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable(){

            @Override
            public void run() {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setContentPane(new Temp(frame));
                frame.pack();
                frame.setVisible(true);
            }});
    }

} 
```

# java - hibernate 不进行急切获取（使用 fetch="join" 和lazy="false"）

> ID：13977741
> 
> 赞同：1
> 
> 时间：2012-12-20T17:51:14.203
> 
> 标签：java, mysql, performance, hibernate, fetch

我想在我的网络应用程序中进行急切的获取。我的映射文件中有以下内容

```
<many-to-one name="user" class="com.xyz.beans.User" lazy="false" fetch="join">
    <column name="startedBy" />
</many-to-one>
<many-to-one name="participantByParticipant1" class="com.xyz.beans.Participant" lazy="false" fetch="join" cascade="all" >
    <column name="participant1" />
</many-to-one>
<many-to-one name="participantByParticipant2" class="com.xyz.beans.Participant" lazy="false" fetch="join" cascade="all">
    <column name="participant2" />
</many-to-one> 
```

我有一个查询如下

```
Query query = session.createQuery("from Post as p order by challenge.createdOn desc");
query.setFirstResult(0);
query.setMaxResults(10); 
```

参与者表有一些到其他表的映射。它们的获取策略是相同的这需要大约 2 秒以上的时间来执行上面的查询，我可以看到 hibernate 1 选择查询生成的以下查询来获取参与者表的 10 个后 20 选择查询（如每个帖子有2名参与者）

1) 为什么会这样？为什么它不接受单个连接？
2）我该如何优化呢？它花费了太多时间。该表现在只有 10 条记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-07T10:37:49.400

`lazy="false" fetch="join"`仅当您直接获取实体时，映射中的设置才会生效：

```
session.get(Post.class, postId); 
```

当您进行查询时，您需要明确声明您的获取策略。否则它仍然是懒惰的：

```
from Post as p left join fetch p.user 
```

像往常一样，这条规则有很多变化和例外。您可以在 Hibernate docs, [16.3 中找到更多信息。协会和加入](https://docs.jboss.org/hibernate/orm/5.0/manual/en-US/html/ch16.html#queryhql-joins "16.3\.  关联和连接")。

# xml - 带有属性的 XSLT foreach

> ID：13977742
> 
> 赞同：1
> 
> 时间：2012-12-20T17:51:24.633
> 
> 标签：xml, xslt

*我想做的是从 XML 到 XML 的转换并保持`<variant_effect>`其当前状态。我永远不会知道给定的“效果”有多少`<feature>`，所以每个孩子都会有 0...n 个效果属性。我不确定这样做的最佳/最简单的方法。*

给定一个在每个文档中具有多个特征的 XML 布局。

```
<feature>
  <seqid>12</seqid>
  <source>HGMD</source>
  <type>substitution</type>
  <start>9232268</start>
  <end>9232268</end>
  <score>.</score>
  <strand>+</strand>
  <id>HGMD_SNV_000001</id>
  <alias>HGVS:NM_000014.4:c.2998G-A,HGVS:NP_000005.2:p.V1000I</alias>
  <variant_seq>A</variant_seq>
  <reference_seq>T</reference_seq>
  <variant_effect>
    <feature_id effect="1">A2M</feature_id>
    <index effect="1">0</index>
    <sequence_variant effect="1">gene_variant</sequence_variant>
    <feature_type effect="1">gene</feature_type>
    <feature_id effect="2">CM980001</feature_id>
    <index effect="2">0</index>
    <sequence_variant effect="2">transcript_variant</sequence_variant>
    <feature_type effect="2">transcript</feature_type>
    <feature_id effect="3">CM980001</feature_id>
    <index effect="3">0</index>
    <sequence_variant effect="3">coding_sequence_variant</sequence_variant>
    <feature_type effect="3">mRNA</feature_type>
  </variant_effect>
  <sequence_context>CTAAATGAAACACAGCAGCTTACTCCAGAG,TCAAGTCCAAGGCCATTGGCTATCTCAACA</sequence_context>
</feature> 
```

使用 XSLT 将所有标记移至新的 XML 文档很简单，除了`<variant_effect>`. 当我以不同方式使用 `<xsl:for-each>`表达式时，我要么只得到一个部分：

```
<feature>
  <!-other values -->
  <variant_effect>
    <feature_id>A2M</feature_id>
    <index effect>0</index>
    <sequence_variant>gene_variant</sequence_variant>
    <feature_type>gene</feature_type>
  </variant_effect>
</feature> 
```

或者整个文件中的所有变体效果都作为每个`<feature>`部分中的一个长转储。我尝试的一种方法示例：

```
<xsl:template match="/">
    <xsl:for-each select="GVFClin/feature">

        <!- dealing with each sections first -->

        <variant_effect>  
            <xsl:for-each select="/GVFClin/feature/variant_effect/sequence_variant">
                <xsl:value-of select="/GVFClin/feature/variant_effect/sequence_variant"/>
            </xsl:for-each>
        </variant_effect>

    </xsl:for-each>
</xsl:template> 
```

*猜猜我不确定如何跟踪每个元素并`<variant_effect>`仅打印给定节点的所有“效果”。*

*任何已经回答的类似问题的帮助或参考都会很棒，谢谢！*

# python - python列出值

> ID：13977743
> 
> 赞同：-1
> 
> 时间：2012-12-20T17:51:26.307
> 
> 标签：python

我想创建一个列表或字典，不确定到目前为止哪个 niether 工作我需要将文本（用户输入）转换为数值并将它们加在一起有 4 个可能的答案这就是我希望它如何工作

每个盒子都包含水果并以不同的价格出售

```
apple=25,oranges=35,pears=10,bananas=50,pineapple=40
totalprice=0
count=5
list = [box1,box2,box3,box4,box5,]
while count >0:
fruit=raw_input("what fruit is in ")(0)
count -=1
if fruit ==apples:
return "price 25"
totalprice=+25 
```

我希望它运行五次，收集沿途的总价格

有没有一种方法，他们放入相应价值的任何水果都将添加到总价中。抱歉，如果没有很好地解释编程新手

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T17:56:06.247

```
fruits = {"apple":25,"oranges":35,"pears":10,"bananas":50,"pineapple":40}
total_price = 0

for _ in range(0,5):
    fruit = raw_input("Fruit: ")
    if fruit in fruits:
        totalprice += fruits[fruit]

print total_price 
```

这是你想要的吗？要一个水果问5次，然后打印所有水果的价格总和？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T18:03:15.563

`dict`首先，使用 a来存储水果名称 - > 价格是有意义的。

```
fruits = {
    'apples': 25,
    'oranges': 35,
    'pears': 10,
    'bananas': 50,
    'pineapples': 40
} 
```

然后我们创建一个空列表，并循环从 1 到 5 的数字（注意 6 不包括在范围内）...

```
inputs = []
for i in range(1, 6):
    inputs.append(raw_input('Enter fruit for box {}: '.format(i))) 
```

然后我们使用它来获取输入，并尝试在...`sum`中查找值`fruits`

```
print sum(fruits[name] for name in inputs) 
```

样品运行：

```
Enter fruit for box 1: bananas
Enter fruit for box 2: bananas
Enter fruit for box 3: bananas
Enter fruit for box 4: pears
Enter fruit for box 5: apples
185 
```

您可以做的其他事情是在将水果附加到之前验证它是否存在`inputs`- 但这应该足以让您暂时使用。

# sql - 创建“安全”的 MySQL 字符串（转义双引号）

> ID：13977744
> 
> 赞同：2
> 
> 时间：2012-12-20T17:51:50.907
> 
> 标签：sql, escaping, double-quotes

我需要通过 C# 将文本插入到 MySQL 表中。`dbConnect`是我自己创建的适配器，`ProcessNonQuery`只需要一个字符串。

*我无法插入包含字符`"`和`'`.*

这是我的尝试：

```
public void InsertArticle(string name, string title, string keywords, string desc, string content, int idCategory,bool featured)// int level, int typeArt
{                        
    this.dbConnect.ProcessNonQuery(" set global sql_mode=\"NO_BACKSLASH_ESCAPES,STRICT_TRANS_TABLES,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\"");
    string strFeatured;

    if (featured)
        strFeatured = "1";
    else
        strFeatured = "0";
    content = content.Replace("'", "\'");
    StringBuilder sbInsertArticle = new StringBuilder("INSERT INTO Article(NameArt, TitleArt, keywordsArt, DescArt, ContentArt, idCategory, idLevel, idTypeArt, Featured) VALUES('");
    sbInsertArticle.Append(name); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(title); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(keywords); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(desc); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(content); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(idCategory.ToString()); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(1); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(1); sbInsertArticle.Append("', '");
    sbInsertArticle.Append(strFeatured); sbInsertArticle.Append("')");

    string strInsertArticle = sbInsertArticle.ToString();
    this.dbConnect.ProcessNonQuery(strInsertArticle);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:52:31.943

连接器可能没有问题。已发布代码的输出不会正确转义内容。

如果内容 =`it's don"t working`那么输出类似于：

```
INSERT INTO Article(NameArt, TitleArt, keywordsArt,
  DescArt, ContentArt, idCategory, idLevel, idTypeArt, Featured)
  VALUES('foo', 'bar', 'mysql escaping', 'hmph',
    'it's don"t working', '12', '1', '1', '1'); 
```

这在任何连接器中都应该失败。

```
content = content.Replace("'", "\\'"); 
```

`mysql_real_escape_string()`将是一个开始，但您可能至少 应该使用类似的东西。

编辑：进一步解释

在测试程序中运行以下行：

```
Console.WriteLine("'");
Console.WriteLine("\'");
Console.WriteLine("\\'"); 
```

前两个将输出`'`。最后一个会输出`\'`。

最后，由于您选择提供给调用者的接口，这个问题无法在 MySQL 中解决，也无法在您的连接器中解决。 `void ProcessNonQuery(string strParam)`太简单了，无法允许将“转义”工作推入 API 所必需的参数化查询。

因此，您使用此“连接器”获得的任何解决方案都将特定于您从 (C#) 调用它的语言，因为在进入 DB 或 API 层之前必须解决转义问题。许多人认为这种方法很糟糕，这就是为什么他们推动您直接使用任何标准 MySQL 连接器，而不是尝试将其中一个包装在您自己的 API 中。

# r - R中用于model.matrix的data.table的行名

> ID：13977745
> 
> 赞同：4
> 
> 时间：2012-12-20T17:51:51.473
> 
> 标签：r, data.table, model.matrix

我有一个`data.table` `DT`，我想在`model.matrix`上面运行。每行都有一个字符串 ID，存储在 的`ID`列中`DT`。当我运行`model.matrix`时`DT`，我的公式不包括该`ID`列。问题是，`model.matrix`由于 NA 删除了一些行。如果我在调用之前将行名设置`DT`为列，那么最终的模型矩阵具有行名，我就准备好了。否则，我无法弄清楚我最终得到了哪些行。我正在使用. 但是，当我尝试向 中添加新列时，我收到了关于`ID``model.matrix``rownames(DT) = DT$ID``DT`

> “检测到无效的 .internal.selfref ......在早些时候，这个 data.table 已被 R 复制。”

所以我想知道

1.  有没有更好的方法来设置行名`data.table`
2.  有没有更好的方法来解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T22:20:07.903

这里有几个问题。

首先，a 的一个特性是`data.table`它们没有 a `rownames`，而是具有`key`更强大的 s。看到[这个伟大的小插曲](http://datatable.r-forge.r-project.org/datatable-intro.pdf)。

但是，这不是世界末日。`model.matrix`传递时返回合理的行名`data.table`

例如

```
A <- data.table(ID = 1:5, x = c(NA, 1:4), y = c(4:2,NA,3))

mm <- model.matrix( ~ x + y, A)

rownames(mm)

## [1] "2" "3" "5" 
```

所以第 2,3 和 5 行是包含在 model.matrix 中的那些。

现在，您可以将此序列作为列添加到`A`. 如果您随后将密钥设置为其他内容（从而丢失原始顺序），这将很有用

```
A[, rowid := seq_len(nrow(A)] 
```

您可能会考虑将其设为字符（如 ) 的行名`mm`），但这并不重要（因为您可以 `rownames(mm)`在需要引用时轻松转换为数字。

至于给出的警告`data.table`，如果您阅读下一句

> 避免 key<-、names<- 和 attr<- 目前在 R 中（奇怪的是）可能会复制整个 data.table。使用 set* 语法来避免复制：setkey()、setnames() 和 setattr()

`rownames`是一个属性`rownames<-`（在内部某个时候使用等价于`attr<-`）将以相同的方式（可能复制）。

从线``row.names<-.data.frame``是

```
attr(x, "row.names") <- value 
```

话虽`data.tables`如此，没有行名，所以设置它们没有意义。

# c - 无法在 Eclipse Juno 中编译 C

> ID：13977747
> 
> 赞同：5
> 
> 时间：2012-12-20T17:52:02.860
> 
> 标签：c, gcc, mingw, eclipse-juno

迄今为止，我只能使用 gcc -o 扩展名通过命令行编译 C 代码。

理想情况下，我想要某种 IDE 来帮助调试和提高生产力，但我还没有运气。

特别是关于 Eclipse Juno，我根本无法让它编译或调试任何 C 代码。

为了确保我已经完成了必要的先决条件，我下载了 mingw-get-inst-20120426.exe ，但它的报告日志声称已经安装了 mingw 的所有元素。

在首选项的新 CDT 项目向导小节中的 Makefile 项目设置中，我尝试使用 Cygwin PE Parser 和 PE Windows Parser（单独和一起）。

![Eclipse Juno C 编译](../Images/5837dad9a889570585bdeed69ecb2b2b.png)

尝试作为本地 C 应用程序运行时没有区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:11:25.693

您的 MinGw 未正确设置。在 PC 中编辑路径变量以

C:\MinGW\bin;

C:\MinGW\msys\1.0\bin

并尝试编译。

你安装了MinGW吗？它为 C 和 CPP 创建运行时环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-02T14:30:14.587

以下是为 fedora 17 配置 Eclipse CDT 并运行一个简单的 helloworld 程序的步骤。正确的配置应该可以消除大多数问题。

在 Fedora 17 中安装 Eclipse Juno

使用命令行执行以下命令

```
su
yum -y install eclipse
yum -y install eclipse-cdt eclipse-cdt-sdk
eclipse 
```

以上命令将安装带有 C/C++ 开发工具 (CDT) 的 Eclipse 和带有 SDK 的 C/C++

**确认已安装 Eclipse C/C++ 开发工具**

帮助 > 安装新软件 > 使用（输入框）输入以下内容

```
http://download.eclipse.org/tools/cdt/releases/juno 
```

有关更多信息，请参阅[设置 Eclipse](http://max.berger.name/howto/cdt/ar01s04.jsp#installingcdt)

使用[Eclipse Juno C/C++ Development Getting Started](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Fconcepts%2Fcdt_o_home.htm)测试环境。

**使用 eclipse 从头开始​​创建项目**

```
File > New > Project > c++ Project > Next
Enter Project Name > Select Empty Project > Tool chain Linux GCC > Next 
Select Debug and Release > Finish 
```

**如果需要添加 C/C++ 文件并编辑**

```
New > Source File > Source file Name: main.cpp
Enter or copy/paste code
Save All
Project > Build All
Run > Run
Review Console for output 
```

希望这是足够的信息让程序遵守

参考

*   [如何在 Fedora 16 上安装 Eclipse IDE ....](http://www.itzgeek.com/how-tos/linux/centos-how-tos/how-to-install-eclipse-ide-on-fedora-16-verne.html#axzz36Jsl3Df1)
*   [在 Linux/Unix 上设置 Eclipse CDT](http://max.berger.name/howto/cdt/cdt.jsp)
*   [Eclipse C/C++ 开发用户指南](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.cdt.doc.user%2Fconcepts%2Fcdt_o_home.htm)

# c# - DevExpress.XtraEditors.DateEdit 设置日期时间值

> ID：13977749
> 
> 赞同：0
> 
> 时间：2012-12-20T17:52:22.383
> 
> 标签：c#, datetime, devexpress

我需要将 DateTime 值分配给 DevExpress.XtraEditors.DateEdit。有没有什么想法可以写出这样的日期时间值：天、年、月、小时等？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T06:49:02.800

我相信您在谈论显示格式和掩码“天，年，月，小时......”
如果是这样，您可以使用以下代码：

```
// 31, 2012, December, 23:59:59
dateEdit1.EditValue = new System.DateTime(2012, 12, 31, 23, 59, 59);
dateEdit1.Properties.Mask.EditMask = "dd, yyyy, MMMM, HH:mm:ss";
dateEdit1.Properties.Mask.UseMaskAsDisplayFormat = true; 
```

相关帮助文章：[掩码类型：日期时间](http://documentation.devexpress.com/#WindowsForms/CustomDocument1497)

# xcode - iPad应用程序：添加一个按钮，其他按钮的文本停止显示

> ID：13977750
> 
> 赞同：1
> 
> 时间：2012-12-20T17:52:24.287
> 
> 标签：xcode, ipad, button

我正在为 iPad 开发一个应用程序。该应用程序实现了一组独立的功能。当我添加一个函数时，我还在应用程序的唯一 ViewController 视图中添加了一个带有简单文本标题的按钮来调用该函数。这些按钮是应用程序视图中唯一的 GUI 元素。我已经这样做了几个星期没有问题。我正在使用层板。

当我添加第 19 个按钮时，它在楼层板上看起来不错，但是当我在 iPad 上运行应用程序时，其中四个按钮没有文字或细线黑点。我可以移动按钮并调整它们的大小，有时会显示更多内容和/或其他按钮的文本将停止正确显示。

每个按钮都包含一个简单的文本标题，例如“复制”“打开”“读取”“写入”等。唯一稍微不寻常的标题是“Pwrite-1”“Pwrite-2”和“mkdir/stat”。我添加的第 19 个按钮的标题为“Chdir”。

楼层板上的按钮总是很好看，所以在我看来这是一个构建问题。

有人见过这样的事情并知道解决方法吗？

# jquery - 我如何在另一个选择的下拉列表中更新一个 Jquery Chosen Dropdown 选择更改

> ID：13977752
> 
> 赞同：2
> 
> 时间：2012-12-20T17:52:33.080
> 
> 标签：jquery, jquery-chosen

我的场景是这样的

我需要创建一个出勤列表，所以我为此使用了两个 jQuery 选择框（多选下拉菜单）。

一个用于出席的人，另一个用于缺席的人。我想要的是当我从参加人员选择框中选择特定人员时，他们不能在缺席人员选择框中可用。有人可以帮帮我吗？

这是我的编码段

```
<section>
<label for="text_field">Attended People</label>
                <div>
                    <select data-placeholder="Select Employees" class="chzn-select" id="employees" multiple="true" style="width:350px;" tabindex="4" name="employees[]">

                        <?php
                        $query2 = "SELECT * FROM `employee` WHERE `company_id`= $compnay_id";
                        $sql_result2 = mysql_query($query2);
                        while ($row2 = mysql_fetch_assoc($sql_result2)) {
                            ?>
                            <option value="<?php echo $row2['id']; ?>"><?php echo $row2['name']; ?></option>
                        <?php } ?>

                    </select>

                </div>

            </section> 
            <section><label for="text_field">Absented People</label>
                <div>
                    <select data-placeholder="Select Employees" class="chzn-select" id="employees2" multiple="true" style="width:350px;" tabindex="4" name="employees2[]">

                        <?php
                        $query2 = "SELECT * FROM `employee` WHERE `company_id`= $compnay_id";
                        $sql_result2 = mysql_query($query2);
                        while ($row2 = mysql_fetch_assoc($sql_result2)) {
                            ?>
                            <option value="<?php echo $row2['id']; ?>"><?php echo $row2['name']; ?></option>
                        <?php } ?>

                    </select>
                    <script type="text/javascript">
                        $(".chzn-select").chosen();
                        $(".chzn-select-deselect").chosen({allow_single_deselect: true});
                        $("")
                    </script>
                </div>

            </section> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-14T02:13:48.833

我现在有一个类似的问题。如果我对您的理解正确，您希望一个框中的选择（有参与）来更新另一个框（缺席）中的可用选择。

它比我的情况更复杂，因为您可能会使用多项选择，但总而言之，您需要使用来自 Chosen 的 Change / Update 事件。它在[文档](http://harvesthq.github.io/chosen/)中，但为了完整性：

更改/更新事件

表单字段更改

使用表单域时，您通常希望在选择或取消选择某个值后执行一些行为。每当用户在 Chosen 中选择一个字段时，它都会在原始表单字段上触发一个“更改”事件*。那让你做这样的事情：

```
$("#form_field").chosen().change( … ); 
```

动态更新选择

如果您需要更新您的选择字段中的选项并希望 Chosen 获取更改，您需要在该字段上触发“liszt:updated”事件。选择将根据更新的内容重新构建自己。

```
$("#form_field").trigger("liszt:updated"); 
```

# c# - 警告：类型没有参数类型为表单问题的构造函数

> ID：13977755
> 
> 赞同：1
> 
> 时间：2012-12-20T17:52:46.250
> 
> 标签：c#, .net, winforms

我有`A`继承自的类`UserControl`：

```
public class A : UserControl
{
  private Form1 _form; // class Form1 : Form { //... }

  private A() 
  {
      InitializeComponent();
  }

  public A(Form1 form) : this() 
  {
     _form = form;
  }
} 
```

视觉代码设计器创建代码：

```
private void InitializeComponent()
{
   this.a = new A((Form1)this); // here I myself added foo object in ctor
   //...
}

private A a; 
```

我有一个错误：

```
Warning 1 Type 'A' does not have a constructor with parameters of types Form. 0 0 
```

我做错了什么？以及如何避免这种情况？

**编辑**

问题是我需要知道 ctor 中对父级（在我的情况下`Form1`）的引用，我不能使用`.Parent`属性，因为`.Parent`直到 ctor 完成后才设置属性，这就是为什么我选择这种复杂的方式来传递父级在 ctor。

问题还没有解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:33:39.797

你几乎已经回答了你自己的问题。

> 问题是我需要知道 ctor 中对父级（在我的情况下为 Form1）的引用，我不能使用 .Parent 属性，因为 .Parent 属性直到 ctor 完成后才设置，这就是我选择这个令人费解的原因在ctor中传递父级的方法。

InitializeComponent 方法是从 Form1 的构造函数中调用的，在 InitializeComponent 中，您试图获取对“this”的引用。我认为问题是“这个”还没有被创建（因为你还在它的构造函数中）。

正如有人已经提到的，处理它的一种方法是使用接口。

```
public class A : UserControl
{
  private MyInterface _myInterface; 

  private A() 
  {
      InitializeComponent();
  }

  public A(MyInterface myInterface) : this() 
  {
     _myInterface = myInterface;
  }
} 
```

然后让你的表单实现接口。

# pdf - 如何提高使用 Google Docs Viewer 查看 PDF 的质量？

> ID：13977757
> 
> 赞同：0
> 
> 时间：2012-12-20T17:53:00.160
> 
> 标签：pdf, google-docs, viewer

我有一个 PDF，其中包含我想用 Google Docs Viewer 显示的高质量图像，不幸的是，图像的质量不太好。除此之外，这个工具很棒。有什么办法可以改善吗？

这是它的链接：[链接已删除]

我最终使用[它](http://malsup.com/jquery/media/)获得了更好的结果。

# c# - 几分钟不活动后，使用 SSL 时出现错误 413 Request Entity Too Large

> ID：13977759
> 
> 赞同：6
> 
> 时间：2012-12-20T17:53:10.467
> 
> 标签：c#, asp.net, webforms, iis-7, http-status-code-413

上周一，我们向我们的生产服务器推出了一个新的 ASP.NET 网站，供公众使用。该站点的一个部分提供了一个向导类型的界面，每个步骤都要求用户提供相当少量的输入。向导的每一步都是它自己的用户控制。当用户在这些步骤中移动时，他们的输入被保存到视图状态，当前控件被隐藏，下一个控件可见。如果需要，他们当然可以回去。

总体而言，考虑到我们看到的使用量，一切运行顺利，但我们有两个用户打电话说，当他们试图从一个步骤移动到下一步时，他们收到了“请求实体太大”的消息. 我收集了他们所有的意见，并通过自己尝试重现问题。

在这两种情况下，我都经历了几次，一切都没有问题。在另一次试运行中，我接到了一个电话，并且被转移了大约 5 分钟。当我去接我离开的地方时，我得到了同样的错误。然后我又试了一次，故意在这个过程的一个步骤中等待几分钟，然后又得到了错误。这与我上次暂停的步骤不同。

我想知道不活动是否真的会导致问题，如果增加 IIS 中的“uploadReadAheadSize”值是正确的解决方案，或者我们是否可以以某种方式纠正应用程序本身的问题。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T18:03:12.780

我们最近遇到了类似的问题，我们做了以下更改：

1.  增加了 uploadReadAheadSize （正如你提到的）
2.  更新了 IIS7 SSL 设置以忽略客户端证书。

# jquery - 从视图控件启用文件下载控件和附件链接的拖放

> ID：13977761
> 
> 赞同：1
> 
> 时间：2012-12-20T17:53:18.410
> 
> 标签：jquery, dojo, xpages

我有以下要求：

允许用户将附件从文件下载控件和附件链接从视图控件拖放到在其 Notes 客户端中打开的备忘录文档中，而无需在本地保存附件然后手动上传。

我需要为此启用：

1.  包含文档详细信息和文件下载控件的 XPage
2.  具有计算列的视图控件，其中包含带有指向每个附加文档的链接的重复控件
3.  拥有 IE8 的用户（目前为企业标准）

我找到了这个链接：[OpenNTF XSnippets](http://openntf.org/XSnippets.nsf/snippet.xsp?id=drag-and-drop-attachment-links-from-file-download-control-to-operating-system-to-download)但只能在 Chrome 中使用，并且只允许拖放到文件系统。

我对任何其他解决方案持开放态度，但我无法在用户机器上安装任何东西。

问候，

巴勃罗·索拉诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T04:24:06.000

巴勃罗。拖放是一种浏览器功能。它与后端无关。如果 O'er 不支持它... ...您处于丑陋的黑客领域。我知道 3 种可能的方法： - ActiveX 控件 - Flash 小程序 - 部署 Chrome 框架 最后一个最好，用户仍然可以启动/查看 IE8，但您可以使用所有 HTML5。不幸的是，这也是 IT 最反对的选择

# c++ - swprintf 语言环境

> ID：13977765
> 
> 赞同：1
> 
> 时间：2012-12-20T17:53:39.323
> 
> 标签：c++, string, locale

在 Windows 上使用 c++，

试图设置 swprintf 函数使用的语言环境。

我需要在打印出来的数字中包含千位分隔符。

我尝试了几种选择...

```
_wsetlocale(LC_NUMERIC, L""); //default locale 
```

还..

```
_wsetlocale(LC_NUMERIC, L"english"); 
```

而且当然..

```
swprintf(buf, L"%d", 3546); 
```

我还尝试按如下方式显示数字

```
auto locale = _get_current_locale();
_swprintf_l(buf, L"%d", locale, 3546); 
```

我需要得到千位分隔符，即 3,456

我还放置了一个断点来查看`locale`变量的值，它包含`lconv`千位分隔符正确设置为的结构`,`......但是，swprintf 忽略了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:03:19.070

**在 Linux 上测试**

试试看：

```
setlocale(LC_NUMERIC, "en_US.ISO8859-1"); 
```

例子 ：

```
#include <stdio.h>
#include <time.h>
#include <locale.h>

int main(void)
{
        setlocale(LC_NUMERIC, "en_US.iso88591");
        printf("%'d (%s)\n", 12345, setlocale(LC_NUMERIC, NULL));
        return 0;
} 
```

你错过了`'`使用`%'d`而不是`%d`

仍在使用 wchar

```
#include <stdio.h>
#include <time.h>
#include <locale.h>
#include <wchar.h>

int main(void)
{
        setlocale(LC_NUMERIC, "en_US.iso88591");
        wprintf(L"%'d\n", 12345);
        return 0;
} 
```

另一个例子 ：

```
#include <stdio.h>
#include <time.h>
#include <locale.h>
#include <wchar.h>

int main(void)
{
        wchar_t buf[32];
        setlocale(LC_NUMERIC, "en_US.iso88591");
        swprintf(buf, 32, L"%'d", 12345);
        wprintf(L"%ls\n", buf);
        return 0;
} 
```

**视窗**

那么今天我在 Windows 上进行了测试（使用 mingw），但没有实现......请阅读这个链接，它提供了一个解决方案[http://c-faq.com/stdio/commaprint.html](http://c-faq.com/stdio/commaprint.html)

# php - yii如何使用CListView

> ID：13977767
> 
> 赞同：1
> 
> 时间：2012-12-20T17:53:45.563
> 
> 标签：php, yii

我有以下代码，它可以工作，但我想将其转换为列表视图。我怎样才能做到这一点。

```
foreach ($jobs as $job){
     $this->widget('zii.widgets.CDetailView', array(
        'data'=>$job,
        'attributes'=>array(
            'JOBNO',
            'PROJID',
            'NAME',
            'SEQ',
            'DATEIN',
            'DATEDONE',
            'STATUS',
            'PCENTDONE',
            'EARNED',
            'VALUE',
            'COMMENTS',
            'SENTBACK',
            'DATEDUE',
            'ORIGTAPES',
            'Timestamp',
        ),
    ));

    echo "<hr />";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T15:44:32.067

访问此网址：

[Yii 官方参考类](http://www.yiiframework.com/doc/api/)

现在，输入：`clistview`

等等……现在选择第一个结果；

它会带你到这里：

[列表视图参考](http://www.yiiframework.com/doc/api/1.1/CListView)

在该页面上，您将看到：

```
$dataProvider=new CActiveDataProvider('Post');

$this->widget('zii.widgets.CListView', array(
    'dataProvider'=>$dataProvider,
    'itemView'=>'_post',   // refers to the partial view named '_post'
    'sortableAttributes'=>array(
        'title',
        'create_time'=>'Post Time',
    ),
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T18:32:56.327

您需要使用您的模型创建数据提供者：

```
//in your controller
$criteria = new CDbCriteria();
//your criterias to get your data

$dataProvider = new CActiveDataProvider('MODELNAME',
                array(
                        'criteria'  => $criteria,
                )
            );

//in your view
$this->widget('zii.widgets.CListView', array(
        'dataProvider'=>$dataProvider,
            'itemView'=>'_view',
)); 
```

# javascript - javascript中的计时与实时

> ID：13977771
> 
> 赞同：1
> 
> 时间：2012-12-20T17:53:59.953
> 
> 标签：javascript

我有一个问题：当我在 JavaScript 中进行倒计时时，我有以下形式的函数：

```
 <script>
var interval;
var minutes = 1;
var seconds = 5;
window.onload = function() {
    countdown('countdown');
}

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element);
        if(seconds == 0) {
            if(minutes == 0) {
                el.innerHTML = "countdown's over!";                    
                clearInterval(interval);
                return;
            } else {
                minutes--;
                seconds = 60;
            }
        }
        if(minutes > 0) {
            var minute_text = minutes + (minutes > 1 ? ' minutes' : ' minute');
        } else {
            var minute_text = '';
        }
        var second_text = seconds > 1 ? 'seconds' : 'second';
        el.innerHTML = minute_text + ' ' + seconds + ' ' + second_text + ' remaining';
        seconds--;
    }, 1000);
}
</script> 
```

每次执行功能之间的时间恰好是 1 秒。还是由于执行功能体而导致时间延迟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:02:25.237

不，`setTimeout()`并且`setInterval()`具有不可预测的准确性，正如在[另一个问题](https://stackoverflow.com/a/196138/804976)中所说，您可以通过设置一次超时来获得更好的精度，而不是使用`(new Date()).milliseconds`与时间相关的操作而不是使用`setTimeout()`每件事

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:01:05.000

有一些函数`setTimeout(fnc, delay)`据说**至少在**ms之后`setTimeout(fnc, delay)`调用。有关详细信息，请参阅[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout#Notes)。`fnc` **`delay`**

# youtube-api - YouTube Analytics API 不返回人口统计查询的行 - 但确实返回视图

> ID：13977776
> 
> 赞同：1
> 
> 时间：2012-12-20T17:54:08.927
> 
> 标签：youtube-api, analytics

当查询 YouTube Analytics API 以获取 1 天范围内频道的人口统计数据时（metric:viewerPercentage、dimensions:ageGroup、gender），在某些情况下不会返回任何行。然而，api 正在返回当天的视图。

想到这两个原因： 1\. 数据尚不可用，因为它仍在处理中。2\. 没有已知的人口统计数据（即不知道用户的性别和年龄）？

我可以安全地假设在这种情况下它不是（1），因为对视图的查询确实返回了结果？如果我不能假设，那么“未处理”和“已处理但所有用户的人口统计数据都未知”之间的响应/结果是否真的没有区别？

换句话说，如果在 (2) 的情况下，API 将为每个人口统计返回一个全为零的 0 行，这将使我们能够正确解释事物（但我很确定这不是 API 查询维度的方式工作）。

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T16:10:51.900

我无法提供有关 YouTube 分析数据处理管道的任何硬性指导，即人口统计数据是否*始终*与报告中提供的观看次数数据完全相同。

要获得有关此类特定问题的更权威的答案，我建议您访问 YouTube 分析网络界面 (http://youtube.com/analytics) 并尝试从那里运行相同的报告。如果您请求的报告依赖于尚不可用的数据，Web 界面通常会给您一些警告。

# objective-c - 实现自定义视图的最佳方式

> ID：13977777
> 
> 赞同：1
> 
> 时间：2012-12-20T17:54:18.323
> 
> 标签：objective-c, macos, cocoa, interface-builder

![查看待办事项](../Images/e14c9847ca380f53548c5c101d1175ed.png)

我正在寻找实现上图所示视图的最佳和最快方法，我需要建议。我应该从头开始手动构建视图、子视图、单元格和菜单，还是使用 NSTableView 并以某种方式修改？也许是第三种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:14:52.520

这些观点似乎很简单。只需使用标准视图和子视图、图像视图等来构建它们。对于行功能的重新排序，您希望使用表格视图（带有您的自定义单元格）。

在我看来，这似乎是原型、测试和部署的最快方式。

# javascript - 如何使用 JavaScript 或 jQuery 更改另一个页面上元素的样式？

> ID：13977779
> 
> 赞同：1
> 
> 时间：2012-12-20T17:54:29.380
> 
> 标签：javascript, jquery, css, styles

好的，这是我的问题...我有两页。在第一页上，我有一个标题 ( `h2`) 元素，我想在该元素上应用边框样式。第二页只有一个链接。当点击第二页的链接时，要导航到第一页，它应该在第一页上围绕`h2`标签创建一个边框。

关于如何做到这一点的任何想法？是否可以使用常规的 JavaScript 或 jQuery 来实现？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:15:15.653

这将是一种非常愚蠢的方法，但*可以*在客户端进行。我会认真建议在服务器端进行。

在第 2 页上，使用哈希链接回第 1 页：

```
<a href="/page1#border">Go back to page one and add a border</a> 
```

在第 1 页上，检查是否有哈希：

```
if (window.location.hash === '#border') {
    $('h2').addClass('withBorder');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:19:08.670

我认为，如果您正在寻找这种情况，您可以通过将一些哈希传递给 url 来实现它：

我`passed a hash named 'second'`在`second page url`并将这个脚本放在第二页

```
$(function(){
    var url=window.location;
    var hash = url.hash.substr(1);
    if(hash == "second"){
       $('h2').css('border','solid 1px red');
    }
}); 
```

如果有帮助，请查看此内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T17:57:07.880

**不**，JavaScript 是客户端的，为此您需要服务器记住是否单击了链接，可能通过将其记录在数据库或会话变量中。

当然，如果您使用的是网站的传统模型，而不是加载已经使用纯 JS 的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T18:00:21.807

好吧，有一种方法可以用 JavaScript 做到这一点，尽管它很棘手，而且服务器端要容易得多。您需要使用一些 JavaScript 来加载不同的页面，而无需刷新整个 DOM。我用一个叫做[pjax](http://pjax.heroku.com/)的东西来做这个。它的工作方式是让每个页面都充当一个容器，通过 ajax 加载所有后续页面。如果不重新加载整个页面，您在一个页面上所做的任何样式更改都会转移到其他页面（这不会在实际的浏览器刷新后继续存在）。

# assembly - 汇编程序找出两个数字中的最小值

> ID：13977784
> 
> 赞同：-2
> 
> 时间：2012-12-20T17:54:45.173
> 
> 标签：assembly, 8085

我如何汇编程序以找到两个数字中的最小值。

假设第一个数字位于内存地址：0x2001 第二个数字位于内存地址：0x2002

将较小的数字存储在累加器中

这是我尝试的：

```
LDA 0x2001
MOV B, A
LDA 0x2002
CMP B
JNC smaller
exit
smaller :
MOV A, B
exit : HLT 
```

我的解决方案正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:19:19.347

```
XRA             ; clear the accumulator
MVI B, 30H      ; load a number to B Register
MVI C, 40H      ; load a number to C Register
MOV A, B        ; Move the content of B to A
CMP C           ; Compare value of C against A
JNC SMALL       ; Jump if smaller
**JMP END**         ; Halt program if not small
SMALL: MOV A, C ; save smaller num in accumulator
**END: HLT** 
```

# android - 删除特定 RawContact 内容目录条目

> ID：13977785
> 
> 赞同：1
> 
> 时间：2012-12-20T17:54:51.217
> 
> 标签：android, android-contacts, rawcontacts

我是android dev的新手，所以我可能会完全错误地理解整个概念。我想从 RawContact 目录条目中删除特定条目。这是我拥有的代码：

```
Uri rawContactUri = ContentUris.withAppendedId(RawContacts.CONTENT_URI, rawContactId);
         Uri entityUri = Uri.withAppendedPath(rawContactUri, Entity.CONTENT_DIRECTORY);
         Cursor c = getContentResolver().query(entityUri,
                  new String[]{RawContacts._ID, Entity.DATA_ID, Entity.MIMETYPE,CommonDataKinds.GroupMembership.GROUP_SOURCE_ID},
                  null, null, null); 
```

使用游标 c 我得到适当的 Entity.DATA_ID。之后我尝试删除一个条目：

```
 getContentResolver().delete(entityUri,Entity.DATA_ID+"=?",
                  new String[]{id}); 
```

并得到一个错误：

> java.lang.UnsupportedOperationException: URI: content://com.android.contacts/raw_contacts/2709/entity

我究竟做错了什么？

**UPD 1** 我正在尝试删除组成员身份条目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:44:41.097

请对您要执行的操作进行更完整的解释。您说要“从 RawContact 目录条目中删除特定条目。”，这是令人困惑的吗？你想要_____吗

a) 删除原始联系人？b) 删除一组原始联系人？c) 删除单个原始联系人的所有数据行？d) 删除一组原始联系人的所有数据行？

或者你想对组成员做些什么？

无论如何，我认为您已经反向构建了 URI。尝试在 rawContactId 之前附加 Entity.CONTENT_DIRECTORY。我知道文档没有这么说，但是文档写得不好。

更好的选择是使用 ContactsContract.RawContactEntity 表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T11:22:47.073

看起来我使用了错误的 URI。我也切换到修改表的“新”方式：

```
 ArrayList<ContentProviderOperation> ops =
                      new ArrayList<ContentProviderOperation>();

             ops.add(ContentProviderOperation.newDelete(Data.CONTENT_URI)
                      .withSelection(Data._ID + "=?", new String[]{i})
                      .build());
             getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops); 
```

# ios - 从 chcsv 解析器获取每个字段

> ID：13977787
> 
> 赞同：0
> 
> 时间：2012-12-20T17:55:11.973
> 
> 标签：ios, csv, ios6

当我使用 CHCSV 解析器时：来自[https://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)的这段代码：

```
NSArray *a = [[NSArray alloc] initWithContentsOfCSVString:lunchFile
                                                         encoding:NSUTF8StringEncoding
                                                            error:&err]; 
```

我得到下面的数组

```
(
        (
        Date,
        Item,
        Desc
        "price#",
        "add#",
        rate,
        "",
        ""
    ),
        (
        "12/10/12",
        abc,
        "abc equipment",
        abc678,
        "Y.7.A",
        "555,007.21",
        "",
        ""
    ), 
```

如何从每个字段中获取值？。第一行是列名，它需要填充 sqlite db。我是这个如何从每个字段中获取值的菜鸟。我正在使用 fmdb 输出 sqlite.db 中的字段。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:19:23.600

找到了 ：

```
NSArray *s1 =  [a objectAtIndex:4];

 NSLog(@"  element :  %@", [s1 componentsJoinedByString:@","]);    

    for (NSUInteger i = 0; i < s1.count; i++) {
        NSString* string = [s1 objectAtIndex:i];
         NSLog(@" This is : %d  %@",i , string);

    } 
```

# soap - 重新部署 Tomcat 6 时的 SOAP Web 服务 NPE

> ID：13977800
> 
> 赞同：1
> 
> 时间：2012-12-20T17:55:58.083
> 
> 标签：soap, nullpointerexception, cxf, tomcat6

我正在使用 Tomcat 6，并且我有一个使用 SOAP Web 服务的 Web 应用程序。我在 maven 中使用 cxf-codegen-plugin 生成了要使用的客户端类，我的依赖项是：

```
<dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-api</artifactId>
        <version>2.6.1</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cxf</groupId>
        <artifactId>cxf-rt-transports-http</artifactId>
        <version>2.6.1</version>
    </dependency> 
```

一切正常，直到我在 tomcat 上重新部署我的战争（或者甚至对其进行简单的接触：根本没有代码修改）。使用相同的 url 访问进行 SOAP 服务调用的页面我有这个奇怪的 NPE：

```
java.lang.NullPointerException
at com.ctc.wstx.util.SymbolTable.findSymbol(SymbolTable.java:385)
at com.ctc.wstx.sr.StreamScanner.parseLocalName(StreamScanner.java:1831)
at com.ctc.wstx.sr.BasicStreamReader.handleNsAttrs(BasicStreamReader.java:2997)
at com.ctc.wstx.sr.BasicStreamReader.handleStartElem(BasicStreamReader.java:2941)
at com.ctc.wstx.sr.BasicStreamReader.handleRootElem(BasicStreamReader.java:2078)
at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2058)
at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1117)
at com.sun.xml.internal.ws.util.xml.XMLStreamReaderFilter.next(XMLStreamReaderFilter.java:81)
at com.sun.xml.internal.ws.streaming.XMLStreamReaderUtil.next(XMLStreamReaderUtil.java:78)
at com.sun.xml.internal.ws.streaming.XMLStreamReaderUtil.nextContent(XMLStreamReaderUtil.java:99)
at com.sun.xml.internal.ws.streaming.XMLStreamReaderUtil.nextElementContent(XMLStreamReaderUtil.java:89)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.hasWSDLDefinitions(RuntimeWSDLParser.java:209)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:119)
at com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:254)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:217)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:165)
at com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:93)
at javax.xml.ws.Service.<init>(Service.java:56)
at some.package.flightinfo.model.flightstatsv2.soap.AirportsV1SoapService.<init>(AirportsV1SoapService.java:48)
at some.package.flightinfo.adapter.FlightStatsV2ContentAdapter.getAirportsByGPSCoordinate(FlightStatsV2ContentAdapter.java:107) 
```

我可以让我的 Web 应用程序再次运行的唯一方法是重新启动 tomcat，这根本不是选项。

我完全不知道发生了什么，以前有人遇到过这个问题吗？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:21:48.610

好吧，您缺少 cxf-rt-frontend-jaxws 依赖项。因此，您最终将使用 JDK 中内置的 JAX-WS 参考 impl，而不是 CXF。如果添加 CXF 依赖项，是否可以解决问题？可能是 RI 中的错误之类的。

# php - PHP文件在不应该重定向用户时重定向用户

> ID：13977803
> 
> 赞同：0
> 
> 时间：2012-12-20T17:56:12.433
> 
> 标签：php

我正在为服务器 CP 制作登录脚本，虽然它似乎无法按预期工作，但我可以登录，但如果我转到索引页面，它不会将我重定向到管理页面，代码如下：

所有代码： http: [//pastebin.com/DC8fVtD5](http://pastebin.com/DC8fVtD5)

任何人都可以为我解释一下吗？:) 问题出在 cookie 或会话上，但我不知道如何解决。该脚本需要根据 mysql 数据库检查用户输入，并查看他们是否有该网站的帐户，如果有，请登录。虽然 admin.php 似乎正在将我重定向到 index.php，但它似乎正在登录我。 $logged != 0。我无法找到修复它的方法，这让我发疯了。丁：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:03:41.163

别忘了，变量

```
 $logged 
```

如果**在下一个脚本执行中不再设置一个脚本中的设置**：如果您使用重定向`header( 'Location: somewhere' );`，则当前脚本终止，并且新脚本由 Location-header 强制执行**的新 HTTP 请求启动。**

请使用[PHP 的 session-feature](http://php.net/manual/en/book.session.php)通过**多个 requests/script-executions 保持状态**。

# objective-c - AVPlayer 跳过视频的开头

> ID：13977805
> 
> 赞同：2
> 
> 时间：2012-12-20T17:56:25.117
> 
> 标签：objective-c, ios, avfoundation, avplayer

当我尝试在预滚动后立即播放视频时，我遇到了 AVPlayer 跳过我正在播放的视频的前 0.5 秒的问题。

首先，我创建播放器：

```
self.videoPlayer = [[AVPlayer alloc] init]; 
```

然后，我将播放器项目添加到播放器并添加一个观察者来检查项目何时准备好：

```
[self.videoPlayer addObserver:self forKeyPath:@"currentItem" options:0 context:kBLCurrentPlayerItemStatusContext];
[self.videoPlayer replaceCurrentItemWithPlayerItem:self.currentVideoPlayerItem]; 
```

当观察到播放器项目时，我会检查播放器是否准备好播放。如果它还没有准备好播放，我将添加一个观察者以确保它可以播放：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
...
} else if (context == kBLCurrentPlayerItemStatusContext) {
       [self.videoPlayer removeObserver:self forKeyPath:@"currentItem" context:&kBLCurrentPlayerItemStatusContext];
       if ([self.videoPlayer status]==AVPlayerStatusReadyToPlay) {
             [self prerollVideoPlayer];
       } else {
             [self.videoPlayer addObserver:self forKeyPath:@"status" options:0 context:&kBLVideoPlayerStatusContext];
       }
}
... 
```

当观察到播放器状态准备好播放时，我会预卷播放器：

```
-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context{
...
  if (context == kBLVideoPlayerStatusContext) {
      if ([self.videoPlayer status] == AVPlayerStatusReadyToPlay) {
            [self.videoPlayer removeObserver:self forKeyPath:@"status" context:&kBLVideoPlayerStatusContext];
            [self prerollVideoPlayer];
      }
}
... 
```

前卷完成后，我播放播放器：

```
-(void)prerollVideoPlayer{
    [self.videoPlayer prerollAtRate:1.0 completionHandler:^(BOOL finished){
        if (finished) {
                [self.videoPlayer play];
        }
    }];
} 
```

当播放器以这种方式播放时，它会跳过视频的前约 0.5 秒。如果我没有让玩家在完成预滚动后立即播放，我稍后调用 play 方法，它可以正常播放。我已经检查以确保正确观察到所有观察者，并且它们按照我上面提到的顺序发生。是否需要添加另一个观察者或我应该检查的通知以避免这种跳过行为？

# streaming - 猪船tar文件

> ID：13977807
> 
> 赞同：1
> 
> 时间：2012-12-20T17:56:29.983
> 
> 标签：streaming, tar, apache-pig

我读了很多关于 pig 可以发送一个 tar 文件并在执行前解压缩它的内容。但是，我找不到任何示例。有人可以提供一个例子吗？

我想做的是为我的流传输一个 python 模块，例如 nltk。

谢谢。担

# mysql - MySQL：为不存在的列创建键

> ID：13977810
> 
> 赞同：2
> 
> 时间：2012-12-20T17:56:49.360
> 
> 标签：mysql, indexing

我有下表，其中包含 1,000,000 多条记录：

```
CREATE TABLE `products` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `description` text,
  PRIMARY KEY (`id`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

我想做的是能够快速获取具有空描述的产品 - 忘记空字符串。

如果我通过描述添加一个键，整个描述都会被索引，我不想要这么大的索引。我确实可以这样做：

```
ALTER TABLE products ADD KEY has_description (description(1)); 
```

这将创建一个只有第一个字符的索引。这比拥有“完整”索引要好得多，但我想知道是否有办法创建适当的索引 - 例如布尔索引，真/假取决于产品是否分别具有描述。

附加要求不是添加具有此值的新列 - 这是微不足道的，但它是我不想在表中包含的重复信息。

已经尝试过类似的东西

```
ALTER TABLE products ADD KEY has_description (description IS NULL); 
```

......但没有工作。

这完全可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:28:09.740

您只能在现有字段上拥有索引。

答案是：没办法

但是您可以添加另一个包含描述状态（是否为空）的字段（和索引）。使用插入和更新触发器使该字段始终与描述数据同步。

# ruby-on-rails - Heroku 不会重置我的数据库

> ID：13977812
> 
> 赞同：4
> 
> 时间：2012-12-20T17:56:57.290
> 
> 标签：ruby-on-rails, ruby, database, heroku

我一直在尝试从命令行运行**$ heroku pg:reset**但我相信我没有正确放入数据库。我尝试了许多变体。

我跑了**$ heroku config | grep POSTGRESQL**获取打印为的数据库名称

```
HEROKU_POSTGRESQL_PINK_URL: postgres://naknaswvxfvuup:QK2dHYNMZ_va10lDgMDo4S0BIM@ec2-23-21-161-255.compute-1.amazonaws.com:5432/db7eute4gu4mcb 
```

我试过从

**#1**

```
$ heroku pg:reset HEROKU_POSTGRESQL_PINK_URL: postgres://naknaswvxfvuup:QK2dHYNMZ_va10lDgMDo4S0BIM@ec2-23-21-161-255.compute-1.amazonaws.com:5432/db7eute4gu4mcb 
```

**#2**

```
$ heroku pg reset postgres://naknaswvxfvuup:QK2dHYNMZ_va10lDgMDo4S0BIM@ec2-23-21-161-255.compute-1.amazonaws.com:5432/db7eute4gu4mcb 
```

**#3**

```
$ heroku pg:reset db7eute4gu4mcb 
```

和其他变体。请让我知道如何正确注意这一点，因为我不断从命令行收到错误或此文本“`! Unknown database: db7eute4gu4mcb. Valid options are: DATABASE_URL, HEROKU_POSTGRESQL_PINK_URL"`

我目前在 Ruby on Rails 教程上的 10.4。谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T18:44:37.113

您应该在运行时指定一个 DATABASE `heroku pg:reset`。这是语法：

```
heroku pg:reset <DATABASE> 
```

要知道 的值，您可以运行：

```
heroku pg:info 
```

它将返回 DATABASE_URL，类似于：**HEROKU_POSTGRESQL_GRAY_URL**
然后您可以重置数据库：

```
heroku pg:reset HEROKU_POSTGRESQL_GRAY_URL 
```

在您的情况下，要重置数据库运行：

```
heroku pg:reset HEROKU_POSTGRESQL_PINK_URL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-19T21:39:46.727

这就是它对我的工作方式（用你的应用程序名称替换 app-staging，不要替换 DATABASE_URL，这就是 heroku 现在找到应用程序数据库的方式）

```
heroku pg:reset DATABASE_URL --confirm app-staging 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T18:00:41.203

假设您已将身份验证信息导出到 shell 环境，您只需传递数据库的名称就可以了。例如：

```
PGPASSWORD='foobarbaz'
export PGPASSWORD
heroku pg:reset pink 
```

当然还有其他方法可以使用重置命令，但恕我直言，这是最简单的。

# git - 如何调试 git 错误：“您对以下文件的本地更改将被结帐覆盖”当没有什么可以存储时？

> ID：13977814
> 
> 赞同：11
> 
> 时间：2012-12-20T17:57:03.510
> 
> 标签：git, git-svn

我正在使用 git-svn，我正在尝试运行`git svn rebase`.

我得到错误：

```
Your local changes to the following files would be overwritten by checkout:
<filename>
Please, commit your changes or stash them before you can switch branches. 
```

我以前运行过`git update-index --assume-unchanged <filename>`，并对文件进行了更改，但现在我已经运行`git update-index --no-assume-unchanged <filename>`以摆脱它。

`git status`没有报告任何变化，并`git stash`说没有什么可藏匿的。

我已检查该文件不在`.gitignore`或`.git/info/exclude`

如何进一步调试此问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-07-10T13:55:44.903

我遇到了这个问题，蒂姆的回答帮助我找到了解决方案。

过去我跑过：

```
git update-index --assume-unchanged index.php 
```

# 问题

在远程对另一个分支进行大量更改后，我在尝试本地切换时收到了覆盖警告。

```
git checkout other-branch

error: Your local changes to the following files would be overwritten by checkout:
index.php
Please, commit your changes or stash them before you can switch branches.
Aborting 
```

隐藏不起作用。

```
git stash save --keep-index
No local changes to save 
```

# 解决方案

```
git update-index --no-assume-unchanged index.php
git add index.php
git commit 
```

之后。

```
git checkout other-branch 
```

成功！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T17:57:03.510

事实证明我已经`skip-worktree`设置了位，所以我需要运行

```
git update-index --no-skip-worktree <filename> 
```

我通过运行发现了这一点

```
git ls-files -v | grep "^[^H]" 
```

（或`git ls-files -v | where { $_ -match "^[^H]"}`使用 Windows Powershell）

打字`git help ls-files`解释了输出的含义。

# html - 引用 CSS 中的多名称（例如 'name.secondname'）

> ID：13977819
> 
> 赞同：4
> 
> 时间：2012-12-20T17:57:13.073
> 
> 标签：html, css

> **可能重复：**
> [ID 中带有句点的 CSS 选择器](https://stackoverflow.com/questions/12310090/css-selector-with-period-in-id)

HTML：

```
<input id="name.secondname" ... > 
```

我应该如何为 'name.secondname' 定义 CSS 样式？

```
#name.secondname {
  ...
} 
```

不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T17:58:48.013

转义点`\`

例如：

```
#name\.secondname {

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T17:58:57.427

你必须像这样逃避它：

```
#name\.secondname 
```

我应该注意到这似乎已经被问过：[CSS selector with period in ID](https://stackoverflow.com/questions/12310090/css-selector-with-period-in-id)

# magento - 自定义等级价格在结帐页面 magento 中不起作用

> ID：13977822
> 
> 赞同：0
> 
> 时间：2012-12-20T17:57:17.647
> 
> 标签：magento

我使用 Alan Storms 教程开发了一个自定义模块来满足我的项目要求，用于在 magento 中创建模块。

我需要根据实时源在前端动态更改价格属性。Feed 每秒都会更新一次，因此每次页面刷新时，都必须为网站上的每种产品显示一个新价格。

为此，我已经覆盖了产品模块和价格模块。问题在于分级定价。当分级定价到位时，我需要根据实时价格计算分级价格。

为此，我也设法使用 price_type 类覆盖进行了更改。

现在，每当将一个项目添加到购物车时，层级定价都不起作用，我写了 event_trigger 即一个观察者，它更新事件“checkout_cart_save_before”的层级定价，这是我的代码

```
class My_Custom_Model_Observer extends Varien_Event_Observer
{
   public function __construct()
   {
   }
   public function updateCartBasedOnLiveFeed($observer)
   {

          foreach ($observer->getCart()->getQuote()->getAllVisibleItems() as $item /* @var $item Mage_Sales_Model_Quote_Item */) 
          {
                        $tierPrices =   array();
                        $tierPrices =   $item->getProduct()->getTierPrice();
                        $itemPrice  =   $item->getProduct()->getPrice();
                        $i=0;
                        foreach($tierPrices as $key => $tierPrice)
                        {

                            if(!is_numeric($key))
                            {

                                    $updatedTierPrice                   =   $itemPrice - ($itemPrice * ($tierPrice['price']/100));
                                    $tierPrices[$key]['price']          =   $updatedTierPrice;
                                    $tierPrices[$key]['website_price']  =   $updatedTierPrice;  
                            }   
                            else 
                            {
                                if($tierPrice['price'] > 0)
                                {
                                    $updatedTierPrice                   =   $itemPrice - ($itemPrice * ($tierPrice['price']/100));
                                    $tierPrice['price']                 =   $updatedTierPrice;
                                    $tierPrice['website_price']         =   $updatedTierPrice;
                                    $tierPrices[$i]                     =   $tierPrice;
                                    $i++;   
                                }

                            }

                        }

                        $item->getProduct()->setData('tier_price',$tierPrices);

          }

   }
} 
```

上面的代码在购物车页面中效果很好。但是当谈到结帐页面时。它适用于单个项目，当分级定价发挥作用时，它会应用购物车价格。

请帮我解决一下这个。

我还尝试使用其他事件以及上述事件。

事件：sales_quote_save_before

```
public function updateQuoteLive($observer)
   {
        $tierPrices =   array();

        $quote_item = $observer->getEvent()->getQuote;

    $itemPrice  =   $quote_item->getProduct()->getPrice();
        $tierPrices =   $quote_item->getProduct()->getTierPrice();

        $tierPricesSize =   sizeof($tierPrices);
        for($i=0;$i<$tierPricesSize;$i++)
        {
            $updatedTierPrice                   =   $itemPrice - ($itemPrice * ($tierPrices[$i]['price']/100));
            $tierPrices[$i]['price']            =   $updatedTierPrice;
            $tierPrices[$i]['website_price']    =   $updatedTierPrice;
        }

        $quote_item->getProduct()->setData('tier_price',$tierPrices);

   } 
```

当我尝试打印 Quote.php 中可用的 getQuote() 函数时，我发现那里的层价格不是我使用第一个事件更新的价格。所以我想我需要在保存报价之前更新价格。请任何人帮助我并显示正确的方向。

请帮我解决这个问题，我错过了一些重要的步骤。任何帮助是极大的赞赏。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:51:24.533

我实现了像你这样的项目。我没有 sales_quote_save_before Observer。我只使用 checkout_cart_save_before。将根据会话设置价格。

我是这样意识到的：

```
public function updatePrice( $observer )
{   
try {
       $cart = $observer->getCart();
       $items = $cart->getItems();
       foreach($items as $item)
       {
       $item->setCustomPrice($price);
       $item->setOriginalCustomPrice($price);
       }
     } catch ( Exception $e )
     {
       Mage::log( "checkout_cart_save_before: " . $e->getMessage() );
     }
} 
```

我使用这个 Observer 即时计算层级价格。所有价格都将在 qoute 中正确设置。

也许你应该尝试这种方式。

问候博蒂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T06:38:48.807

终于弄清楚了问题并得到了解决方案。

问题是在购物车页面或结帐页面`getTierPrice() function`中调用 ，它存在于`/app/code/core/Mage/Catalog/Product.php`. 它采用一个名为 $qty 的参数，默认为空。该函数依次调用文件中的`function getTierPrice`which`/app/code/core/Mage/Type/Price.php`有两个参数`$qty and $productObject.`。默认情况下，$qty 为 null，当它为 null 时，该函数返回一个 tier_prices 数组。但是，当传递 $qty 值时，该函数会返回该特定数量的单个值。

所以，我编写了自己的自定义函数，它根据我的要求计算等级价格，例如

按照 Alan Storm 的教程，我用我的自定义模块覆盖了这两个核心文件。

我用 My_CustomModule_Model_Product 类扩展了 Mage_Catalog_Model_Product 和

然后

Mage_Catalog_Model_Product_Type_Price 和 My_CustomModule_Model_Price

然后在 /app/code/local/My/Custommodule/Model/Product.php

我添加了我的自定义代码，例如

```
public function getTierPrice($qty=null)
    {
        if($qty)
        {
            return  $this->getPriceModel()->getCustomTierPrice($qty, $this); 
        }
        return $this->getPriceModel()->getTierPrice($qty, $this);
    } 
```

然后在 /app/code/local/My/Custommodule/Model/Price.php

```
<?php 

public function getCustomTierPrice($qty = null, $product)
    {
        $allGroups = Mage_Customer_Model_Group::CUST_GROUP_ALL;
        $prices = $product->getData('tier_price');

        if (is_null($prices)) {
            $attribute = $product->getResource()->getAttribute('tier_price');
            if ($attribute) {
                $attribute->getBackend()->afterLoad($product);
                $prices = $product->getData('tier_price');
            }
        }

 foreach($prices as $key => $customPrices)
        {
            if($prices[$key]['price'] < 1)
            {
                    $prices[$key]['price']          =   abs($product->getPrice() - ($productPrice * ($customPrices['price']/100)));
                    $prices[$key]['website_price']  =   $prices[$key]['price'];
            }

        }
}

which retured a customized value when $qty is passed and voila it worked.

I just posed this answer so that any one else who has similar requirement may get benefited with this.

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:14:01.980

更新时将新价格“保存”到数据库中可能会更好。

尝试以下方式：

```
$product = $observer->getProduct();
$procuct->setPrice($updatedPrice); 
```

这样，在结帐时，它将从数据库中提取正确的价格（并避免在“飞行中”更正它的头痛

# c# - 无法解析类型。请验证拼写是否正确

> ID：13977829
> 
> 赞同：0
> 
> 时间：2012-12-20T17:57:45.480
> 
> 标签：c#, asp.net, tfsbuild

在 TFS 构建机器上，对于我的一个单元测试，我收到此错误消息。

**System.ArgumentException：无法解析类型“Microsoft.Practices.EnterpriseLibrary.Security.Cache.CachingStore.CachingStoreProvider，Microsoft.Practices.EnterpriseLibrary.Security.Cache.CachingStore，Version=5.0.505.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35” . 请验证拼写是否正确或提供了完整的类型名称。**

我已确保此测试在我的开发机器上本地通过。在 TFS 上，放置文件夹，我确保 DLL 在那里。我查看了部署到构建文件夹的配置，它们看起来正确并且具有缓存存储条目。我反思了部署的 dll，它看起来还不错。该项目在我的机器和构建机器上成功构建。我不知道如何解决为什么它在我的开发机器上工作但在构建机器上不起作用。

似乎该项目在部署以构建机器时，正在失去对 CachingStore dll 的引用。但是为什么或如何在构建机器上失去参考？我还反映了已部署的项目 dll，它看起来还可以吗？

请帮忙！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:09:35.937

您需要在需要 dll 的测试中使用另一个属性，例如

```
[TestMethod()]
[DeploymentItem("SomeAssembly.dll")]
public void MyTestForSomething()
{
...
} 
```

# php - Zend Framework 2 - 注释表单和字段集

> ID：13977830
> 
> 赞同：2
> 
> 时间：2012-12-20T17:57:46.260
> 
> 标签：php, zend-form, zend-framework2, fieldset

我遇到了以下问题：我阅读[了](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.quick-start.html#using-annotations)有关`AnnotationForms`. 到目前为止效果很好。问题是我现在需要添加 a`CSRF-Token`和 a `Submit-Button`。

医生说我应该使用`FieldSet`. 但是在[FieldSets 的文档中，](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.form.collections.html#creating-fieldsets)他们只描述了如何将它包含在一个 regualr`Zend\Form`中。但是我所有的表单定义都在 Entity.php 中……因为它是一个 AnnotationForm。

谁能告诉我如何将这个令牌和我的按钮放入我的 AnnotationForm 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:35:05.257

好吧，首先你通过创建表单`AnnotationBuilder`，然后手动添加你的东西。

```
$form = $builder->createForm('User');
$form->add(new \Zend\Form\Element\Csrf('security')); 
```

等等... ;）

或者，由于您需要一些订单，您将构建一个表单，添加`csrf`和`submit`以及`fieldset`. 然后将注释表单添加到字段集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T10:03:22.833

虽然是一个相对较旧的问题，但我仍然发现很难找到一种“正确”的方式来使用 AnnotationBuilder 添加字段集。

[请参阅我以前的堆栈答案](https://stackoverflow.com/a/18427685/533585)，了解如何将实体添加为 Zend\Form\Fieldset 的实例而不是 Zend\Form 的实例

# coldfusion - 如何确定计划任务是自动运行还是在浏览器中运行？

> ID：13977831
> 
> 赞同：1
> 
> 时间：2012-12-20T17:57:48.907
> 
> 标签：coldfusion, scheduled-tasks, coldfusion-9, cfadmin

我正在运行一些代码作为计划任务，在 CF 管理员中设置。

有没有办法在代码中告诉代码是作为计划任务运行的，是通过单击 CF Administrator 计划任务区域中的运行图标运行的，还是直接在浏览器中调用的？

添加其他变量不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T18:48:22.663

# 来自 CF admin 中的测试链接

如果您询问是否可以通过单击 Coldfusion 管理员中的测试链接手动运行计划任务或按计划运行来识别计划任务之间的区别，您可以启用计划任务的日志记录。每当用户运行任务时，日志条目都会显示`[name of job] Executing because of user request at {timestamp}`。如果它自然运行，日志条目会说`[name of job] Executing at {timestamp}`

我一直在寻找一种通过代码来判断的方法，但我找不到任何东西。这将取决于调度程序的准确性，但您可以查看 now() 是否等于调度的时间。类似的东西（伪代码）：

```
<!--- disclaimer: I've heard stories that cfschedule sometimes runs a little late --->
<cfset scheduleTime = "2:00 am">
<cfif cgi.HTTP_USER_AGENT eq "CFSCHEDULE" and timeFormat(now(), "h:mm tt") eq scheduleTime>
   <!--- ran naturally --->
<cfelse>
   <!--- ran by force --->
</cfif> 
```

# 从浏览器

如果您想知道您的计划任务是否按计划运行，或者文件是否被浏览器命中，您可以查看`cgi.HTTP_USER_AGENT`. 如果它由调度程序运行，它将等于`CFSCHEDULE`，否则它将等于客户端设置发送的任何内容。

也许，`Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.97 Safari/537.11`

或者如果你有幸被机器人击中，比如：`Mozilla/5.0 (compatible; MJ12bot/v1.4.3; http://www.majestic12.co.uk/bot.php?+)`

可以欺骗客户*端*或服务器请求以使用户用户代理说 CFSCHEDULE，但这不太可能。

## 在旁注...

如果您感兴趣，cfhttp 的默认用户代理是“COLDFUSION”。

# c - C中的“反射”和不兼容的指针类型

> ID：13977833
> 
> 赞同：0
> 
> 时间：2012-12-20T17:57:56.917
> 
> 标签：c

我正在遵循 CompSci 论文中的伪代码片段并尝试在 C 中实现它。在这篇论文中，我有两个`structs`，比如说`A`和`B`。其中一个是这样的：

```
struct A {
  B* next;
  int data;
} 
```

虽然`B`看起来像

```
struct B {
  A* next;
} 
```

现在，对于 的和的给定实例化`a`，在某些时候算法告诉我做两件事：`A``b``B`

*   如果`a`不是`B`，那么*做一些事情*，
*   a = b

现在，我不能在 C 中进行反射，而且对于第二个要求，我显然会得到不兼容的指针类型。我考虑过`union`在`A`结构中加入 a ，也许这会有所帮助，但我想问你们是否有我遗漏的好设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:15:02.600

您正在冒险进入这里的危险领域。看来您正在尝试用一种没有内置支持的语言来实现多态性。

您可以使用几种方案，它们允许您`struct A*`实际指向包含`struct B`. 工会可能是最不危险的。但正如你所指出的，没有反思。任何指针都只知道它指向一个内存块，并且如果它被取消引用，则有一种解释该块的方法。 `void`指针甚至不知道最后一部分。进行类型识别的唯一方法是在结构中的某处插入一个识别类型的值。

像这样的东西：

```
struct generic {
   enum {ATYPE,BTYPE} type;
   union {
      struct A a;
      struct B b;
    };
};

function process(struct generic* a, struct generic* b)
{
   if (a.type != BTYPE)
   { //do stuff 
   }
   else 
   { 
      *a = *b;
   }
} 
```

-edit-
另一方面，如果结构的内容像您描述的那样简单，您可以简单地添加一个`isB`成员到`struct a`，并且只使用一种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:12:56.777

我不知道这应该做什么，但这是编译它的方法：

```
struct a a;
struct b b;

typedef struct a
{
  struct b* next;
  int data;
} A;

typedef struct b
{
  A* next;
} B;

int main()
{
  A a;
  B b;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T18:13:54.377

现在，如果您的结构以正确的方式定义，那么您的算法应该这样描述：

*   if (a != b->next) 然后做事
*   a=b->下一个；

但是在这种情况下，a=b->next 的赋值只有在 a!=b->next 时才有意义，所以它应该被移到“do stuff”中

为了使其可编译，您只需在 A 定义前向 B 添加一个 forward-decl ：

```
struct B;
struct A {
  B* next;
  int data;
};
struct B {
  A* next;
};
int main () {
  A *a=...;
  B *b=...;
  if (a!=b->next) {
    //do stuff
  }
  a = b->next;
} 
```

# c# - 如何在不更改原始列表的情况下更改我的新列表？

> ID：13977841
> 
> 赞同：14
> 
> 时间：2012-12-20T17:58:19.440
> 
> 标签：c#

我有一个列表，其中填充了操作中的一些数据，并将其存储在内存缓存中。现在我想要另一个列表，其中包含基于某些条件的列表中的一些子数据。

从下面的代码中可以看出，我正在对目标列表进行一些操作。问题是我对目标列表所做的任何更改也正在对 mainList 进行。我认为它是因为参考是相同的或什么。

我只需要对目标列表的操作不会影响主列表中的数据。

```
List<Item> target = mainList;
SomeOperationFunction(target);

 void List<Item> SomeOperationFunction(List<Item> target)
{
  target.removeat(3);
  return target;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-20T18:02:14.537

您需要在您的方法中克隆您的列表，因为`List<T>`它是一个类，所以它是引用类型并通过引用传递。

例如：

```
List<Item> SomeOperationFunction(List<Item> target)
{
  List<Item> tmp = target.ToList();
  tmp.RemoveAt(3);
  return tmp;
} 
```

或者

```
List<Item> SomeOperationFunction(List<Item> target)
{
  List<Item> tmp = new List<Item>(target);
  tmp.RemoveAt(3);
  return tmp;
} 
```

或者

```
List<Item> SomeOperationFunction(List<Item> target)
{
  List<Item> tmp = new List<Item>();
  tmp.AddRange(target);
  tmp.RemoveAt(3);
  return tmp;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-20T18:02:36.150

您需要制作列表的副本，以便对副本的更改不会影响原始列表。最简单的方法是`ToList`使用`System.Linq`.

```
var newList = SomeOperationFunction(target.ToList()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-20T18:02:18.980

首先构建一个新列表并对其进行操作，因为 List 是一种引用类型，即当您在函数中传递它时，您不仅传递了值，还传递了实际的对象本身。

如果只是赋值`target`给`mainList`，两个变量都指向同一个对象，所以需要新建一个List：

```
List<Item> target = new List<Item>(mainList); 
```

`void List<Item> SomeOperationFunction()`没有意义，因为要么你什么都不返回 ( `void`) 要么你返回 a `List<T>`。所以要么从你的方法中删除 return 语句，要么返回一个新的`List<Item>`. 在后一种情况下，我会将其重写为：

```
List<Item> target = SomeOperationFunction(mainList);

List<Item> SomeOperationFunction(List<Item> target)
{
    var newList = new List<Item>(target);
    newList.RemoveAt(3);
    return newList;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-29T02:44:54.837

我尝试了上面的许多答案。在我测试的所有列表中，对新列表的更新都会修改原始列表。这对我有用。

```
var newList = JsonConvert.DeserializeObject<List<object>>(JsonConvert.SerializeObject(originalList));
return newlist.RemoveAt(3); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-20T18:55:37.043

即使您创建了一个新列表，对新列表中项目的引用仍将指向旧列表中的项目，所以如果我需要一个带有新引用的新列表，我喜欢使用这种扩展方法......

```
public static IEnumerable<T> Clone<T>(this IEnumerable<T> target) where T : ICloneable
{
    If (target.IsNull())
        throw new ArgumentException();

    List<T> retVal = new List<T>();

    foreach (T currentItem in target)
        retVal.Add((T)(currentItem.Clone()));

    return retVal.AsEnumerable();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-20T18:03:35.610

由于 a`List`是引用类型，因此传递给函数的是对原始列表的引用。

有关如何在 C# 中传递参数的详细信息，请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/0f66670z%28v=vs.110%29.aspx)。

为了实现您想要的，您应该在其中创建列表的副本`SomeOperationFunction`并将其返回。一个简单的例子：

```
void List<Item> SomeOperationFunction(List<Item> target)
{
  var newList = new List<Item>(target);
  newList.RemoveAt(3);
  return newList; // return copy of list
} 
```

正如 Olivier Jacot-Descombes 在对另一个答案的评论中指出的那样，重要的是要记住

> [...] 如果项目属于引用类型，则列表仍然包含对相同项目的引用。因此，对项目本身的更改仍会影响两个列表中的项目。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-20T18:01:14.230

您的目标变量是引用类型。这意味着您对它所做的任何事情都将反映在您传递给它的列表中。

为了不这样做，您需要在方法中创建一个新列表，将`target`内容复制到其中，然后对新列表执行 remove at 操作。

[关于引用和值类型](http://cplus.about.com/od/learnc/ss/value.htm)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-20T18:10:00.190

只需确保使用通过复制源列表的元素创建的列表来初始化新列表。

`List<Item> target = mainList;`应该`List<item> target = new List<Item>(mainList);`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-20T18:13:22.767

您需要制作列表的副本，因为在您的原始代码中，您所做的只是传递，正如您正确怀疑的那样，引用（有人会称之为指针）。

您可以调用新列表上的构造函数，将原始列表作为参数传递：

```
List<Item> SomeOperationFunction(List<Item> target)
{
    List<Item> result = new List<Item>(target);
    result.removeat(3);
    return result;
} 
```

或者创建一个[MemberWiseClone](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)：

```
List<Item> SomeOperationFunction(List<Item> target)
{
    List<Item> result = target.MemberWiseClone();
    result.removeat(3);
    return result;
} 
```

此外，您没有存储`SomeOperationFunction`任何地方的返回值，因此您可能还想修改该部分（您将方法声明为`void`，它不应该返回任何内容，但在其中您正在返回一个对象）。您应该以这种方式调用该方法：

```
List<Item> target = SomeOperationFunction(mainList); 
```

**注意：**列表的元素不会被复制（仅复制它们的引用*）*，因此修改元素的内部状态会影响两个列表。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-20T18:03:31.857

您看到原始列表被修改，因为默认情况下，任何非原始对象都是通过引用传递的（它实际上是按值传递，值是引用，但这是另一回事）。

您需要做的是克隆对象。这个问题将帮助您使用一些代码来克隆 C# 中的列表：[如何在 C# 中克隆通用列表？](https://stackoverflow.com/q/222598/346561)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-20T18:04:13.377

我不会将 mainList 分配给目标，而是： `target.AddRange(mainList);`

然后，您将获得项目的副本，而不是对列表的引用。

# java - 试图从条形码设备获取数据

> ID：13977844
> 
> 赞同：1
> 
> 时间：2012-12-20T17:58:34.013
> 
> 标签：java, android, barcode, barcode-scanner

我有一个条码设备，可以通过 USB 端口连接到电脑或安卓设备。它扫描条形码并在找到光标的任何地方显示结果，它可以是编辑框、记事本、浏览器或其他任何东西。我想要做的是在它扫描条形码而不在edittext上显示它时立即获取变量中的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:26:29.297

您的扫描仪在功能上等同于键盘，因此您无法将数据直接扫描到变量中。

但是，作为@MH。建议，您可以观看文本输入字段并在输入数据后获取数据。当用户单击按钮时，您可能能够以编程方式将焦点设置在隐藏字段上。如果这不起作用，您可能可以设置输入样式，以便用户看不到扫描的数据（例如，使文本颜色与背景颜色相同）

# silverlight - 从 XAML 引用一个类

> ID：13977846
> 
> 赞同：0
> 
> 时间：2012-12-20T17:58:40.303
> 
> 标签：silverlight, xaml

在 Silverlight5 中如何从 XAML 引用事物类：

```
xmlns:UserControls="clr-namespace:xyz.ClientApp.UserControls" 
```

```
 public class Thing : ContextMenu, IDisposable
    {
        public void Dispose()
        {
            MethodInfo infos = typeof(ContextMenu).GetMethods(BindingFlags.NonPublic | BindingFlags.Instance).Where(a => a.Name.Equals("HandleRootVisualMouseMove")).FirstOrDefault();

            Delegate handler = Delegate.CreateDelegate(typeof(MouseEventHandler), this, infos);

            EventInfo info = System.Windows.Application.Current.RootVisual.GetType().GetEvent("MouseMove");
            info.RemoveEventHandler(System.Windows.Application.Current.RootVisual, handler);
        }
    } 
```

![在此处输入图像描述](../Images/42e27dbfd35b3985b0fc9460752e5054.png)

[我正在尝试在此处](http://silverlight.codeplex.com/workitem/6206)修复 ContextMenuService 中的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:26:10.177

我认为您混淆了附加属性和对象实例化语法。ContextMenu 是 ContextMunueService 的附加属性，无法通过您的 Thing 类访问。

我还没有测试过，但是下面的代码应该可以工作：

```
<controlsInputToolkit:ContextMenuService.ContextMenu>
  <UserControls:Thing>
    <!-- menu items here -->
  </UserControls:Thing>
</controlsInputToolkit:ContextMenuService.ContextMenu> 
```

# android - Go SMS Pro 等弹出窗口收到消息

> ID：13977847
> 
> 赞同：1
> 
> 时间：2012-12-20T17:58:40.303
> 
> 标签：android, popup

我想创建一个弹出窗口，例如在 Go SMS Pro 中收到的 SMS 通知（在所有活动之上，也可点击）。我一直在尝试使用 Popup Windows，但似乎没有任何效果。不知何故，我无法控制单击该“弹出窗口”的时间。

先感谢您。

```
WindowManager.LayoutParams params = new WindowManager.LayoutParams(
                800, 800,
                WindowManager.LayoutParams.TYPE_SYSTEM_ALERT,
                WindowManager.LayoutParams.FLAG_ALT_FOCUSABLE_IM,
                PixelFormat.TRANSLUCENT);
WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);

LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
View myView = inflater.inflate(R.layout.custom_toast, null);
myView.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View my, MotionEvent event) {
        testeDisplay();
        return false;
    }
});
wm.addView(myView, params); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:04:51.613

为什么不将活动用作对话框...将对话框主题应用于您的活动。

```
<style name="Theme.CustomDialog" parent="android:style/Theme.Dialog">
    <item name="android:windowBackground">@drawable/filled_box</item>
</style>

 <activity android:name=".app.CustomDialogActivity"
            android:label="@string/activity_custom_dialog"
            android:theme="@style/Theme.CustomDialog">
    </activity> 
```

# ruby-on-rails-3 - rails angularjs html5mode webrick 或 nginx 重写规则如何配置？

> ID：13977849
> 
> 赞同：1
> 
> 时间：2012-12-20T17:58:41.643
> 
> 标签：ruby-on-rails-3, html, url-rewriting, angularjs, webrick

我有启用 html5mode 的 angularjs 应用程序。

我曾尝试在 IE8 中运行应用程序，但似乎 URL 的前缀是 #! 是不是应该是-后退按钮起作用等等..hashbang模式

我试图在现代浏览器中运行应用程序，似乎历史 api 也可以工作。一切都好。

但是，如果我`http://localhost:3000/notes`直接在两个浏览器的地址栏中点击，我会从 webrick/rails 应用程序中收到路由错误。我认为 Angular 会接管这个请求并处理它。

**正如角度指南所说，我没有在服务器端设置任何东西：**

> 使用这种模式需要在服务器端重写 URL，基本上你必须重写所有指向应用程序入口点的链接（例如 index.html）

这就是我从 webrick 收到路由错误的原因吗？如果我能够设置重写规则它是如何工作的？我想如果我重写类似`http://localhost:3000/notes -> http://localhost:3000`（如果你愿意，可以索引）“/notes”之类的东西 - 我想跳进去的地方已经消失了，角度应用程序永远不会知道路由..

如果没有办法告诉 webrick 什么以及如何重写。您在开发环境中的表现如何？

十分感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:09:02.373

您需要将服务器配置为返回与路由相同的`/notes`数据`/`。不是重定向（因为这将删除`notes`）。基本上你需要一个包罗万象的路线，如果它不匹配其他任何东西，它就会返回。或者枚举已知的路由（即 、`/`、`/notes`等`/other`），并让所有这些路由返回相同的文档。那时，角度将检测路径并采取相应措施。

# apache - htaccess 重定向到 https://www

> ID：13977851
> 
> 赞同：324
> 
> 时间：2012-12-20T17:58:52.163
> 
> 标签：apache, .htaccess, mod-rewrite, redirect, https

我有以下 htaccess 代码：

```
<IfModule mod_rewrite.c>

RewriteEngine On
RewriteCond !{HTTPS} off
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

</IfModule> 
```

我希望`https://www.`使用 HTTPS 将我的网站重定向到并强制执行`www.`子域，但是当我访问`http://www.`（不使用 HTTPS）时，它不会`https://www`使用 HTTPS 将我重定向到。

* * *

## 回答 #1

> 赞同：658
> 
> 时间：2012-12-21T21:34:26.717

要首先强制 HTTPS，您必须检查正确的环境变量`%{HTTPS} off`，但是您上面的规则会在前面加上`www.`由于您有第二条规则要强制执行`www.`，因此不要在第一条规则中使用它。

```
RewriteEngine On
RewriteCond %{HTTPS} off
# First rewrite to HTTPS:
# Don't put www. here. If it is already there it will be included, if not
# the subsequent rule will catch it.
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
# Now, rewrite any request to the wrong domain to use www.
# [NC] is a case-insensitive match
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule .* https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

### 关于代理

在某些形式的代理之后，即客户端通过 HTTPS 连接到代理、负载平衡器、乘客应用程序等时，该`%{HTTPS}`变量可能永远不会出现`on`并导致重写循环。这是因为即使客户端和代理/负载均衡器使用的是 HTTPS，您的应用程序实际上也正在接收纯 HTTP 流量。在这些情况下，请检查`X-Forwarded-Proto`标题而不是`%{HTTPS}`变量。[这个答案显示了适当的过程](https://stackoverflow.com/questions/26620670/apache-httpx-forwarded-proto-in-htaccess-is-causing-redirect-loop-in-dev-envir)

* * *

## 回答 #2

> 赞同：155
> 
> 时间：2013-10-22T05:48:52.543

Michals 的回答对我有用，尽管做了一点小小的修改：

**问题：**

当您拥有***单一站点安全证书***时，浏览器会尝试在没有 https://www 的情况下访问您的页面。（或您的证书涵盖的任何域）将在接收重定向到安全且正确的 https 页面*之前显示一个难看的红色警告屏幕。*

**解决方案**

首先使用重定向到 www（或您的证书涵盖的任何域），然后才进行 https 重定向。这将确保您的用户不会遇到任何错误，因为您的浏览器会看到不涵盖当前 url 的证书。

```
#First rewrite any request to the wrong domain to use the correct one (here www.)
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

#Now, rewrite to HTTPS:
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #3

> 赞同：101
> 
> 时间：2014-11-13T23:30:44.643

如果您使用 CloudFlare 或类似的 CDN，您将收到此处提供的 %{HTTPS} 解决方案的无限循环错误。如果你是 CloudFlare 用户，你需要使用这个：

```
RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} =http
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #4

> 赞同：63
> 
> 时间：2017-03-27T17:22:53.813

# 糟糕的解决方案，为什么！

永远不要使用下面的解决方案，因为当您使用他们的代码时，类似于：

```
RewriteCond %{HTTPS} off
RewriteRule .* https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule .* https://www.example.com%{REQUEST_URI} [L,R=301] 
```

浏览器转到：

```
http://example.com 
```

然后重定向到：

```
https://example.com 
```

然后重定向到：

```
https://www.example.com 
```

这对服务器的**请求**太多了。

大多数甚至被接受的答案都有这个问题。

* * *

# 最佳解决方案和答案

此代码具有`[OR]`防止 url 发生双重更改的条件！

```
RewriteEngine on
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule (.*) https://www.example.com%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #5

> 赞同：39
> 
> 时间：2016-09-09T16:09:30.157

这是我为代理而不是代理用户找到的最佳方式

```
RewriteEngine On

### START WWW & HTTPS

# ensure www.
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^ https://www.%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# ensure https
RewriteCond %{HTTP:X-Forwarded-Proto} !https
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

### END WWW & HTTPS 
```

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2014-05-23T07:47:33.943

有很多解决方案。这是直接处理此问题的 apache wiki 的链接。

[http://wiki.apache.org/httpd/RewriteHTTPToHTTPS](http://wiki.apache.org/httpd/RewriteHTTPToHTTPS)

```
RewriteEngine On
# This will enable the Rewrite capabilities

RewriteCond %{HTTPS} !=on
# This checks to make sure the connection is not already HTTPS

RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]
# This rule will redirect users from their original location, to the same location but using HTTPS.
# i.e.  http://www.example.com/foo/ to https://www.example.com/foo/
# The leading slash is made optional so that this will work either in httpd.conf
# or .htaccess context 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2016-04-27T03:40:16.220

**要将http://**或**https://**重定向到**[https://www](https://www)**您可以在所有版本的 apache 上使用以下规则：

```
RewriteEngine on

RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^ https://www.example.com%{REQUEST_URI} [NE,L,R] 
```

**阿帕奇 2.4**

```
RewriteEngine on

RewriteCond %{REQUEST_SCHEME} http [OR]
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^ https://www.example.com%{REQUEST_URI} [NE,L,R] 
```

请注意， %{REQUEST_SCHEME} 变量自 apache **2.4**起即可使用。

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2016-07-10T04:52:41.607

如果您在 CloudFlare 上，请确保使用类似这样的东西。

```
# BEGIN SSL Redirect
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP:X-Forwarded-Proto} =http
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>
# END SSL Redirect 
```

这将使您免于重定向循环，并将您的站点安全地重定向到 SSL。

PS 如果检查 mod_rewrite.c 是个好主意！

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-12-14T14:05:38.513

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R] 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-09-07T21:41:13.750

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L] 
```

注意：确保您已完成以下步骤

> 1.  sudo a2enmod 重写
> 2.  sudo 服务 apache2 重启
> 3.  在您的 vhost 文件中添加以下内容，位于 /etc/apache2/sites-available/000-default.conf

```
<Directory /var/www/html>
  Options Indexes FollowSymLinks MultiViews
  AllowOverride All
  Order allow,deny
  allow from all
  Require all granted
</Directory> 
```

**现在您的 .htaccess 将工作，您的网站将重定向到 http:// 到[https://www](https://www)**

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-09-27T08:22:25.853

类似于 Amir Forsati 的解决方案[htaccess 重定向到 https://www](https://stackoverflow.com/questions/13977851/htaccess-redirect-to-https-www/43052755#43052755)但对于可变域名，我建议：

```
RewriteEngine on
RewriteCond %{HTTPS} off [OR]
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?(.+)$ [NC]
RewriteRule ^ https://www.%2%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-25T14:17:22.500

在您的 .htaccess 文件中设置

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-19T13:14:02.077

我使用了本网站的以下代码，效果很好[https://www.freecodecamp.org/news/how-to-redirect-http-to-https-using-htaccess/](https://www.freecodecamp.org/news/how-to-redirect-http-to-https-using-htaccess/)

```
RewriteEngine On
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://www.yourdomain.com/$1 [R,L]
```

希望能帮助到你

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-08-30T14:45:25.407

我尝试第一个答案，但它不起作用......这项工作：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /

RewriteCond %{ENV:HTTPS} !=on
RewriteRule ^.*$ https://%{SERVER_NAME}%{REQUEST_URI} [R,L]

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

# c++ - 2 个线程 - 一个带有 opengl 窗口，第二个带有 wxwidgets 一个

> ID：13977855
> 
> 赞同：0
> 
> 时间：2012-12-20T17:59:02.260
> 
> 标签：c++, multithreading, user-interface, opengl, wxwidgets

我正在编写一个编辑器，但我遇到了一个问题，这意味着从我的 opengl 应用程序调用本机文件保存/打开对话框。编辑器是用我在游戏中的 opengl gui 编写的。所以我想出了一个想法，当用户按下“加载”或“保存”时，我将创建一个线程，该线程将创建所需的（不可见的）wx 窗口，它将调用 wxFileDialog 并在工作完成后删除该线程. 从opengl应用程序以跨平台方式访问文件打开/保存对话框是否有可能或者有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T18:26:50.040

wxWidget 有一个 OpenGL 小部件。将您的 OpenGL 内容放入其中，将小部件接收到的事件转发到您的 GUI 系统，然后您就不必为事件循环而战了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:48:00.623

如果您使用的是 GLUT 或等效的，那么您没有跨平台框架。如果您想要一个跨平台的应用程序，那么您将不得不选择一个框架（例如 wxWidgets 或 Qt 或其他）并从那里开始。否则，如果您在 Windows 上，则可以使用对 Windows API 的本机调用，在其他平台上也可以使用等效方法。

GLUT 只给你一个控制台风格的应用程序。如果你想要一个 GUI，那么你必须选择一个 GUI 框架，即使你不想要跨平台。有很多选择，选择主要取决于你最熟悉的。然后，您从您的 GUI 应用程序中添加对 OpenGL 库的调用，无论是如何构建的。这样，您就不必处理多个线程。

您可能对 GLUT 应用程序进行了大量投资，并且不想仅仅为了获得一些 GUI 功能而放弃它。在这种情况下，我建议构建一个新的 GUI 应用程序，与您的 GLUT 应用程序分开，它使用套接字（或其他进程间通信系统）与您现有的应用程序通信，但在单独的进程中运行。这样您就不会遇到由多线程应用程序创建的所有可怕的、难以修复的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:17:19.333

正如其他人已经说过的，最简单的解决方案是将 wxWidgets 用于主循环，[将 wxGLCanvas](http://docs.wxwidgets.org/trunk/classwx_g_l_canvas.html)用于 OpenGL 的东西。

但如果这是不可能的，出于某种原因，您确实应该能够从另一个线程使用 wxWidgets。请记住，wxWidgets GUI 功能只能在*单个*线程中使用，因此您也需要从该线程中初始化它。而且，当然，您需要自己处理线程同步，因为 wxWidgets 对您程序的其余部分一无所知。

# java - 在 Java 中增加分辨率并减小图像的大小

> ID：13977858
> 
> 赞同：2
> 
> 时间：2012-12-20T17:59:07.367
> 
> 标签：java, graphics, resolution

当我第一次问这个问题时，我尽可能多地提供了信息，因为我不知道如果他们能给出解决方案会对某人有什么帮助，但从答案来看，我似乎并没有明确表达我的观点。

我将原始文本留在底部并缩短它。我希望这能说清楚。

我正在处理从另一个程序返回给我的图像。例如，我可以在 72 DPI 下获得 8x10 的图像，或者在 16x20 下获得相同的图像，也可以在 72DPI 下获得。

我在 Java 中工作。我想做的是拍摄 16x20 图像并调整其大小。如果可能的话，我只想更改文件，而不是 72DPI 的 16x20，而是 144DPI 的 8x10。

我知道它仍然是相同数量的像素，但是观众会说图像有多大以及 DPI 是多少，并且有些人会打开图像到其全尺寸，所以我宁愿他们将 16x20 视为较小的图像更高的分辨率。

我可以在 Java 中做到这一点吗？我会丢失任何数据吗？我该怎么做 - 我可以只更改 png 或 jpg 文件中的元数据吗？

-----（下面的原始问题）-----

我已经看到了一些接近这个的问题，但这有点不同。

我知道您可以使用 Java 中的图像[降低图像分辨率](https://stackoverflow.com/questions/6390964/decrease-image-resolution-in-java)（[也在此处](https://stackoverflow.com/questions/1324106/jai-change-jpeg-resolution)）。我所做的任何搜索都与降低图像分辨率有关。

我有相反的问题。我正在处理以 72DPI 恢复的图像。优点是我可以增加图片的大小，所以我可以将大小设置为 100%、200%、400% 等等。所有图像都是 72DPI，所以如果我使用 200% 进行缩放，然后在查看器中打开图像并使其大小与 100% 图像相同，我会看到更好的分辨率。

为清楚起见 - 我从其他人那里获取图像，它可能是从 PDF 或图片生成的，但我从另一个程序中**获得了图像。**无论我做什么，这张图片都是 72DPI。我无法改变这一点，但我可以将尺寸指定为 200%，它仍然会返回 72DPI，只是两倍大且具有更多细节。

我不是图形专家，这是我第一次使用图形进行任何编程。输出可以是 jpg 或 png，所以格式并不那么重要。（如果需要，我可能还可以使用其他格式。）

假设原始图像是一张照片 - 8" x 10"，72 DPI。如果我要求 200% 缩放，我会得到 72DPI 的 16" x 20" 图像。

我可以在 Java 中将较大的 16" x 20" 72DPI 图像更改为 8" x 10" 的 144DPI 图像而不会丢失数据吗？换句话说，将 DPI 翻倍，但将尺寸减半？

而且，最重要的是，我能做到这一点而不会失去决心吗？（我认为这是可以做到的。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:04:45.327

不，如果您拍摄 8x10 72dpi 的图像并要求 200% 缩放，您将获得 36 dpi 的 16x20。你不能神奇地提高图像分辨率。

重要的是图像中的像素总数。规定的 DPI 就是特定大小的 DPI。以 72dpi 拍摄 8x10 图像。它有 576x720 像素。如果您放大到 200%，您仍然拥有相同数量的像素，但现在它们将分布在两倍的线性尺寸上，这意味着单个像素会更大。一些软件会尝试通过插入像素来提高分辨率，即通过平均最近的邻居来创建新像素。这可以给人以更高分辨率的印象，但图像不包含更多数据。它始终具有柔化图像的效果，尤其是任何锐利的边缘或线条。

如果在不重新采样的情况下*减小*图像的大小，则确实会增加打印或显示的分辨率，但图像会变小。对于相同的图像，将 DPI 增加到 144 会将图像尺寸减小到 4x5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T07:11:33.437

这很棘手，因为就像在 Java 中一样，您不能只以简单的方式访问某些内容。Java 不跟踪 DPI，但它确实使用每毫米点数。此外，令人困惑的另一部分是您无法更改图像或 BufferedImage 中的此类信息。只有在通过 ImageWriter 写入 BufferedImage 时才能更改此信息。

我能够做到这一点。正如我所说，我可以指定返回给我的图像的缩放比例。无论缩放级别如何，输出都是 72 DPI。我的目标是 300DPI。我指定了 400% 的缩放级别。因此，在 72 DPI 的 8 英寸宽图像上，返回给我的是 72 DPI 的 32 英寸图像。我所要做的就是指定一个 288 (72 x 4) 的 DPI 来覆盖我正在处理的默认 72 DPI，然后当它被写出时，图像具有相同数量的像素，但被认为是在288 DPI 而不是 72 DPI。

这是一个代码片段：

//假设已经有一个ImageWriter iw

```
ImageWriteParam writeParam = writer.getDefaultWriteParam();
ImageTypeSpecifier typeSpecifier =
       ImageTypeSpecifier.createFromBufferedImageType(BufferedImage.TYPE_INT_RGB);
IIOMetadata metadata = writer.getDefaultImageMetadata(typeSpecifier, writeParam);
if (metadata.isReadOnly() || !metadata.isStandardMetadataFormatSupported()) {
    continue;
} 
```

// 设置参数和信息

```
int DPI = 72 * scaling/100;
double dotsPerMilli = 1.0 * DPI / 10 / 2.54;
double checkDots = 1.0 * 144 / 10 / 2.54;
System.out.println("Dots per inch: " + DPI + ", DotsPerMilli: " + dotsPerMilli + ",
    CheckDots = " + checkDots);
IIOMetadataNode root = new IIOMetadataNode("javax_imageio_1.0");
IIOMetadataNode horiz = new IIOMetadataNode("HorizontalPixelSize");
horiz.setAttribute("value", Double.toString(dotsPerMilli));
IIOMetadataNode vert = new IIOMetadataNode("VerticalPixelSize");
vert.setAttribute("value", Double.toString(dotsPerMilli));
IIOMetadataNode dim = new IIOMetadataNode("Dimension");
dim.appendChild(horiz);
dim.appendChild(vert);
root.appendChild(dim);
metadata.mergeTree("javax_imageio_1.0", root); 
```

// 从这里，只需使用 ImageOutputStream 写出文件

```
final ImageOutputStream stream = ImageIO.createImageOutputStream(outFile);
System.out.println("Output file: " + outFile);
try {
    writer.setOutput(ImageIO.createImageOutputStream(outFile));
    writer.write(metadata, new IIOImage(image_to_save, null, metadata),
    writeParam);
} catch (Exception e) {
    System.out.println("Caught exception " + e + " when trying to write out
        file.");
    System.exit(0);
} finally {
    stream.close();
} 
```

# matlab - Matlab中imagesc（）的非均匀轴

> ID：13977859
> 
> 赞同：5
> 
> 时间：2012-12-20T17:59:14.970
> 
> 标签：matlab, image-processing, time-series

**问题：**是否可以在非均匀轴上说明图像？

**细节：**

我需要将多维时间序列说明为图像。但是这个时间序列的时间网格非常不均匀。这是一个例子：

```
m = 10;
n = 3;
t = sort(rand(m, 1));  % non-uniform time
values = randn(m, n);  % some random values 
```

处理得`figure, plot(t, values);`很好。

但根据文档`imagesc()`转换为统一`t`时间：`t(1)``t(end)`

> imagesc(x,y,C) 将 C 显示为图像，并使用向量 x 和 y 指定 x 轴和 y 轴的边界。

因此，命令：

```
figure, imagesc(t, 1 : n, values'); colorbar; 
```

说明了统一时间网格上的图像。

![在此处输入图像描述](../Images/31a4bac9c8851995ad34ad25440f79ab.png) ![在此处输入图像描述](../Images/b85001eefa97441a01804e83d3e17073.png)

**编辑：**可以以更高的统一分辨率重新采样时间序列。但是我的时间序列已经很大了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-11T13:10:58.527

MATLAB中有**pcolor**函数。此功能完全符合您的要求。

```
m = 10;
n = 3;
t = sort(rand(m, 1));  % non-uniform time
values = randn(m, n);  % some random values
figure
plot(t, values);
figure
pcolor(t, 1 : n, values'); 
colorbar; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T02:40:26.547

从文件交换中尝试[uimagesc 。](http://www.mathworks.com/matlabcentral/fileexchange/11368-uimage-uimagesc)

![在此处输入图像描述](../Images/b5a6ade0327d0f0335169ba4b1af054f.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T23:46:17.707

**解决方案**

尝试使用`surface`非均匀间距。

首先，创建一个与输入数据大小相同的 3D xyz 表面：

```
m = 10;
n = 3;
t = sort(rand(m, 1));  % non-uniform time
values = randn(m, n);  % some random values
x = repmat(t,1,n);
y = repmat(1:n,m,1);
z = zeros(size(y)); 
```

然后，对您的值进行颜色映射。有一个不错的工具发布到 mathworks 文件交换[real2rgb](http://www.mathworks.com/matlabcentral/fileexchange/23342-real2rgb-colormaps)，它可以为您执行此操作：

```
cdata = real2rgb(values);  % Where size(cdata) = [m n 3] 
```

最后，绘制曲面。您甚至可以花哨并设置透明度。

```
surface(x,y,z,cdata,'EdgeColor','none','FaceColor','texturemap',...
  'CDataMapping','direct');
alpha(0.3) 
```

![在此处输入图像描述](../Images/eeb7bc69a7f9ebf196e30ef094bafb7c.png)

# java - LogManager 和垃圾收集器

> ID：13977860
> 
> 赞同：7
> 
> 时间：2012-12-20T17:59:18.600
> 
> 标签：java, garbage-collection

在LogManager的getLogger()方法的描述中是这样写的：

"(...)如果没有对 Logger 的强引用，与 String 名称关联的 Logger 可能随时被垃圾收集。此方法的调用者必须检查返回值是否为 null，以便正确处理记录器已被垃圾收集。”

GC 怎么可能擦除 Logger，因为 LogManager 必须保留对所有 Logger 的所有引用才能解析 Logger 的名称？

这不是有点奇怪吗，Java API 允许在我的应用程序开始时创建和设置我的 Loggers 但忘记保留引用，然后如果我使用 Logger.getLogger('someName') 我会获取我设置的新的、默认的一个记录器？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T18:01:47.183

> GC 怎么可能擦除 Logger，因为 LogManager 必须保留对所有 Logger 的所有引用才能解析 Logger 的名称？

如果`LogManager`保持对记录器的[弱引用](http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html)是可能的（我相信它确实如此）。

> 这不是有点奇怪吗，Java API 允许在我的应用程序开始时创建和设置我的 Loggers 但忘记保留引用，然后如果我使用 Logger.getLogger('someName') 我会获取我设置的新的、默认的一个记录器？

有人可能会争辩说，如果你关心你的记录器，你应该保留对它的引用。[文档](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html#addLogger%28java.util.logging.Logger%29)对此非常清楚：

> 应用程序应该保留自己对 Logger 对象的引用，以避免它被垃圾收集。LogManager 可能只保留一个弱引用。

# email - MAGENTO 在哪里可以找到 magento 中的所有发票和订单模板？

> ID：13977861
> 
> 赞同：2
> 
> 时间：2012-12-20T17:59:21.177
> 
> 标签：email, templates, magento, invoice

我需要编辑在 magento 后端生成的发票。它们看起来与交易后发送的完全不同。我需要知道在哪里可以找到后端电子邮件的模板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:57:07.423

从后端发送的电子邮件是根据您转到*System* => *Transaction Emails*时找到的电子邮件模板生成的。根据您的安装，您可能会在那里找到很多模板。使用哪个模板在*System* => *Configuration* => *Sales Emails (in the SALES section) 中*配置。

如果您深入研究电子邮件模板，您会发现对设计模板的引用。*发票电子邮件模板*包含以下行，例如：

```
 {{layout area="frontend" handle="sales_email_order_invoice_items" invoice=$invoice order=$order}} 
```

这引用了可以在 /app/design/frontend/base/default/template/email/order/invoice/items.php 中找到的模板

请注意，如果您安装了覆盖此模板的设计主题，则上述路径的 /base/default/ 部分可能会有所不同。

因此，根据您要更改的内容，您必须使用代码编辑器更改电子邮件模板（使用后端）或引用的模板。

# knockout.js - 将特定上下文传递给孩子的自定义绑定？

> ID：13977871
> 
> 赞同：0
> 
> 时间：2012-12-20T17:59:43.733
> 
> 标签：knockout.js

我在 Knockout 中创建了一个自定义绑定，用于生成一个窗口并设置默认值。

窗口进行 ajax 调用以检索将用作其内容的模板。

**有没有办法确保这些内容被绑定？**

即一旦将模板加载到页面中，我希望模板中的任何敲除绑定都可以呈现/处理。

**除此之外，有没有一种方法可以设置内容绑定的上下文是什么？**

即，从我的自定义绑定中，我想说我的“value.contentOptions”对象是加载到窗口中的内容的起始级别。

我觉得它是**ko.applyBindingsToDescendants**、**bindingContext.createChildContext**、**ko.applyBindingsToNode**和**controlsDescendantBindings**的某种组合，但恐怕我似乎无法弄清楚

我会发布代码，但此时它只是纯粹的猜测 D： - 如果您想查看我的一些绑定代码，请告诉我。

我看到我正在尝试做的一些警告：

直到很可能在绑定完成后才加载内容，因为它的异步并且可能必须转到服务器。

我的自定义绑定是 Kendo Window 的包装器，我正在尝试使用其内置的“内容”功能<-我不必使用此功能，但如果可以的话，我想保留该窗口.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:17:34.477

调用 applyBindings 时可以使用第二个参数。第一个参数是必需的，是视图模型。第二个参数是可选的，是应该应用绑定的 DOM 元素（默认是整个页面）。

这是一个例子：

```
<div id="templateGoesHere"></div>
<div id="otherPart">
    <div data-bind="text: otherStuff"></div>
</div>​ 
```

以及相应的javascript：

```
var vm = {
    messages : {
        myMessage : ko.observable("Hello World!")
    },
    otherStuff : ko.observable("Nothing to see here")
};

// Apply bindings to the part of the page that doesn't
// include where the template will go
ko.applyBindings(vm, $('#otherPart')[0]);

// Get template from elsewhere
var template = "<span data-bind='text: myMessage'></span>";
// Add template to page
$('#templateGoesHere').html(template);
// Bind data to template
ko.applyBindings(vm.messages, $('#templateGoesHere')[0]);
​ 
```

您有一个插入模板的 div (templateGoesHere)，在将模板添加到页面后，您调用 applyBindings，告诉敲除将绑定仅应用于您的模板。

此外，当您应用绑定时，您可以指定您只希望部分视图模型 (vm.messages) 用于绑定，而不是整个视图模型。

[http://jsfiddle.net/6Hvxn/](http://jsfiddle.net/6Hvxn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T10:10:11.157

这正是我所做的，为什么我的组合框绑定（它是一个未捕获的组合框，用于淘汰赛）

我使用自定义模板源（而不是使用脚本标签的内置模板），然后将 ko.renderTemplate 与控制血统一起使用，请在此处查看我的答案

[将剔除数据驱动表添加到剔除数据驱动手风琴窗格](https://stackoverflow.com/questions/13972436/add-knockout-data-driven-table-to-knockout-data-driven-accordion-pane/13973473#13973473)

编辑：关于加载异步 ajax 模板，在初始化时您可以绑定到一个空的虚拟模板，然后在加载实际模板时绑定到该模板，只需确保将模板名称绑定到可观察对象

# url - sed 反斜杠

> ID：13977872
> 
> 赞同：1
> 
> 时间：2012-12-20T17:59:45.237
> 
> 标签：url, sed

我有以下。我正在用克拉分隔的文本文件中的值替换 html 中的一些字段。

```
while  IFS=^ read col1 col2 col3 col4 col5 col6
do
    echo $col1
      echo "HtmlFor$col1" >> "SiteHtml.txt"
      cat $FILENAME1 | sed  "s/var1/$col1/" | sed  "s/var2/$col2/"| sed  "s/var3/$col3/" | sed  "s/var4/$col4/" | sed  "s/var5/$col5/" >> "SiteHtml.txt"
      # | sed  "s/var3/$col3/" | sed  "s/var4/$col4/" | sed  "s/var5/$col5/" | sed  "s/var6/$col6/"
done 
```

如果列中有反斜杠，我会收到错误消息。如果我尝试用“/”转义它们，我仍然会收到错误消息。只有当我删除它们时它才有效，我不能这样做。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:31:18.103

您需要使用 3 个反斜杠来替换“sed”中的单个反斜杠。

例子：

```
echo "\\" | sed "s/\\\/replace/" 
```

原因是：第一个 \ 在作为参数传递时转义第二个 \，并且一旦在二进制参数内部传递，将类似于“s/\/replace”，现在当程序解析字符串时，第二个 \ 转义第三个 \ 最终得到要替换为 '\' 的字符串。

可能会出现很多问题，因为 \ 可以逃脱。其中一件事情可能会困扰你。

1.  当我们在字符串中使用它时，您的 '\' 位于**c、n**或任何其他有意义的特殊字符旁边
2.  你 '\' 是字符串**$col1**变量的最后一个字符，当 sed 解析字符串时，它的含义被忽略了。

如果没有看到正在解析的 HTML，我不能说太多。

**注意：**这些不是唯一可能给您带来错误的事情，但您大致了解反斜杠如何影响 sed 中的字符串解析，并希望您能找到解决方案。

**PS：**希望您也知道，在双引号之间传递的任何内容在将其作为参数传递之前都会被 shell 的值替换，而在单引号之间传递的任何内容都不会被其值替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:48:43.323

这是另一个版本：

```
echo "\\" | sed "s [\] replace " 
```

# wpf - 将用户控件加载到 TabItem 时，主窗口显示“发生未处理的异常”

> ID：13977877
> 
> 赞同：0
> 
> 时间：2012-12-20T18:00:02.283
> 
> 标签：wpf, binding, user-controls, wcf-binding, tabitem

在我的 WPF 应用程序中，每个应用程序都`TabItem`加载不同`UserControl`的 .In MainWindow 的设计视图，同时将 a 加载`UserControl`到 a`TabItem`中，`An unhandeled exception has occured`如下图所示。 ![在此处输入图像描述](../Images/f24aded6f62e1fd191ef335a044ef9ae.png) XAML：

```
<TabItem Header="Catalog" Name="catalog" MinWidth="150" Width="auto" >
   <my:CatelogControl x:Name="catelogControl" Margin="1,0" Width="800"/>
</TabItem> 
```

当我调试项目时，它显示`NullReferecneException was unhandeled`如下图所示。 ![在此处输入图像描述](../Images/1c03285a49f2227658af5d5012014ada.png) 分类用户控件：

```
<UserControl x:Class="LibraryAutomation.UserControls.CatalogControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:app="clr-namespace:LibraryAutomation"
         Name="catalogControl"
         mc:Ignorable="d" Loaded="catalogControl_Loaded"
         d:DesignHeight="480" d:DesignWidth="846">
<UserControl.Resources>
    <app:CopyLeftConverter x:Key="copyLeftConverter" />
    <DataTemplate x:Key="CourseTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=CourseID}"/>
            <TextBlock Text=" : "/>
            <TextBlock Text="{Binding Path=CourseName}"/>
        </StackPanel>
    </DataTemplate>
</UserControl.Resources>
<Grid x:Name="LayoutRoot" Height="481">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="0.4*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition MinHeight="400" Height="476"></RowDefinition>
        <RowDefinition Height="4*" />
    </Grid.RowDefinitions>
    <StackPanel Height="460" Margin="0,0,241,0" Grid.ColumnSpan="2">
        <ComboBox Name="courseList" VerticalAlignment="Top" SelectionChanged="courseList_SelectionChanged" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" ItemTemplate="{StaticResource CourseTemplate}"/>
        <ListView MinHeight="400" Height="400" Name="bookList" IsSynchronizedWithCurrentItem="True" ItemsSource="{Binding}" KeyDown="bookList_KeyDown" KeyUp="bookList_KeyDown" MouseEnter="bookList_MouseEnter" MouseDoubleClick="bookList_MouseDoubleClick" MouseDown="bookList_MouseDoubleClick" MouseUp="bookList_MouseDoubleClick">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Width="auto" Header="Book ID" DisplayMemberBinding="{Binding Path=BookID}"/>
                        <GridViewColumn Width="auto" Header="Book Name" DisplayMemberBinding="{Binding Path=BookName}"/>
                        <GridViewColumn Width="auto" Header="Author" DisplayMemberBinding="{Binding Path=Author}"/>
                        <GridViewColumn Width="auto" Header="Publisher" DisplayMemberBinding="{Binding Path=Publisher}"/>
                        <GridViewColumn Width="auto" Header="Remaining Qunatity" DisplayMemberBinding="{Binding Path=QuantityLeft, Converter={StaticResource copyLeftConverter}}"/>
                        <GridViewColumn Width="auto" Header="Total Quantity" DisplayMemberBinding="{Binding Path=TotalQuantity, Converter={StaticResource copyLeftConverter}}"/>
                        </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView>
        <DockPanel>
            <Button Width="150" Height="30" Margin="5" Content="New Book" Name="newBook" Click="newBook_Click" HorizontalAlignment="Center"/>
            <Button Width="150" Height="30" Margin="5" Content="Save Changes" Name="saveChanges" Click="saveChanges_Click" IsEnabled="False" HorizontalAlignment="Right"/>
        </DockPanel>
    </StackPanel>
    <StackPanel Grid.Column="1" Grid.Row="0" HorizontalAlignment="Left">
        <Image Height="150" Width="120" Source="/LibraryAutomation;component/Images/Books.jpg"/>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">ID:</Label>
            <TextBlock Width="123" Padding="10,5" Name="previewBookId"/>
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">Title :</Label>
            <TextBlock Padding="10,5" Name="previewBookName" HorizontalAlignment="Left" Width="103" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
             <Label Height="26" Width="auto" HorizontalAlignment="Left">Author :</Label>
             <TextBlock Padding="10,5" Name="previewAuthor" HorizontalAlignment="Left" Width="100" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">Publisher :</Label>
            <TextBlock Padding="10,5" Name="previewPublisher" HorizontalAlignment="Left" Width="88" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">ISBN :</Label>
            <TextBlock Padding="10,5" Name="previewIsbn" HorizontalAlignment="Left" Width="107" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">Quantity :</Label>
            <TextBlock Padding="10,5" Name="previewTotalCopy" HorizontalAlignment="Left" Width="90" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">Remaining:</Label>
            <TextBlock Padding="10,5" Name="previewCopyLeft" HorizontalAlignment="Left" Width="84" />
        </StackPanel>
        <StackPanel Orientation="Horizontal">
            <Label Height="26" Width="auto" HorizontalAlignment="Left">Location :</Label>
            <TextBlock Padding="10,5" Name="previewLocation" HorizontalAlignment="Left" Width="92" />
        </StackPanel>
        <Separator/>
        <Button Width="150" Height="30" Name="hireThisBook" Click="hireThisBook_Click"> Hire</Button>
        <Separator/>
        <Button Margin="10" Width="100" Height="20" Name="editThisBook" Click="editThisBook_Click"> Edit</Button>
        <Button Margin="10" Width="100" Height="20" Name="deleteThisBook" Click="deleteThisBook_Click">Delete</Button>
    </StackPanel>
</Grid> 
```

编辑：详细的例外情况，

```
System.NullReferenceException
Object reference not set to an instance of an object.
at System.Data.Linq.SqlClient.QueryConverter.VisitInvocation(InvocationExpression invoke)
at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node)
at System.Data.Linq.SqlClient.QueryConverter.VisitExpression(Expression exp)
at System.Data.Linq.SqlClient.QueryConverter.VisitJoin(Expression outerSequence,     Expression innerSequence, LambdaExpression outerKeySelector, LambdaExpression  innerKeySelector, LambdaExpression resultSelector)
   at     System.Data.Linq.SqlClient.QueryConverter.VisitSequenceOperatorCall(MethodCallExpression mc)
 at System.Data.Linq.SqlClient.QueryConverter.VisitMethodCall(MethodCallExpression mc)
at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node)
at System.Data.Linq.SqlClient.QueryConverter.VisitWhere(Expression sequence,     LambdaExpression predicate)
at  System.Data.Linq.SqlClient.QueryConverter.VisitSequenceOperatorCall(MethodCallExpression mc)
at System.Data.Linq.SqlClient.QueryConverter.VisitMethodCall(MethodCallExpression mc)
at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node)
at System.Data.Linq.SqlClient.QueryConverter.VisitSelect(Expression sequence, LambdaExpression selector)
at System.Data.Linq.SqlClient.QueryConverter.VisitSequenceOperatorCall(MethodCallExpression mc)
at System.Data.Linq.SqlClient.QueryConverter.VisitMethodCall(MethodCallExpression mc)
at System.Data.Linq.SqlClient.QueryConverter.VisitInner(Expression node)
at System.Data.Linq.SqlClient.QueryConverter.ConvertOuter(Expression node)
at System.Data.Linq.SqlClient.SqlProvider.BuildQuery(Expression query, SqlNodeAnnotations annotations)
at System.Data.Linq.SqlClient.SqlProvider.System.Data.Linq.Provider.IProvider.Execute(Expression query)
at System.Data.Linq.DataQuery`1.System.Collections.Generic.IEnumerable<T>.GetEnumerator()
at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
at System.Data.Linq.Provider.BindingList.Create[T](DataContext context, IEnumerable`1 sequence)
at System.Data.Linq.DataQuery`1.GetNewBindingList()
at System.Data.Linq.DataQuery`1.System.ComponentModel.IListSource.GetList()
at MS.Internal.Data.ViewManager.GetViewRecord(Object collection, CollectionViewSource cvs, Type collectionViewType, Boolean createView)
at MS.Internal.Data.DataBindEngine.GetViewRecord(Object collection, CollectionViewSource key, Type collectionViewType, Boolean createView)
at System.Windows.Data.CollectionViewSource.GetDefaultCollectionView(Object source, Boolean createView)
at System.Windows.Data.CollectionViewSource.GetDefaultCollectionView(Object source, DependencyObject d)
at System.Windows.Controls.ItemCollection.SetItemsSource(IEnumerable value)
at System.Windows.Controls.ItemsControl.OnItemsSourceChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
at System.Windows.DependencyObject.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
at System.Windows.FrameworkElement.OnPropertyChanged(DependencyPropertyChangedEventArgs e)
at System.Windows.DependencyObject.NotifyPropertyChange(DependencyPropertyChangedEventArgs args)
at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex, DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry, EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean coerceWithCurrentValue, OperationType operationType)
at System.Windows.DependencyObject.InvalidateProperty(DependencyProperty dp)
at System.Windows.Data.BindingExpressionBase.Invalidate(Boolean isASubPropertyChange)
at System.Windows.Data.BindingExpression.TransferValue(Object newValue, Boolean isASubPropertyChange)
at System.Windows.Data.BindingExpression.Activate(Object item)
at System.Windows.Data.BindingExpression.AttachToContext(AttachAttempt attempt)
at System.Windows.Data.BindingExpression.MS.Internal.Data.IDataBindEngineClient.AttachToContext(Boolean lastChance)
at MS.Internal.Data.DataBindEngine.Task.Run(Boolean lastChance)
at MS.Internal.Data.DataBindEngine.Run(Object arg)
at MS.Internal.Data.DataBindEngine.OnLayoutUpdated(Object sender, EventArgs e)
at System.Windows.ContextLayoutManager.fireLayoutUpdateEvent()
at System.Windows.ContextLayoutManager.UpdateLayout()
at System.Windows.ContextLayoutManager.UpdateLayoutCallback(Object arg)
at System.Windows.Media.MediaContext.InvokeOnRenderCallback.DoWork()
at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

在查看详细信息中，InnerException 说“null”我找不到什么问题。有什么建议吗？谢谢你。

# java - 使用 XPath 读取站点地图

> ID：13977878
> 
> 赞同：0
> 
> 时间：2012-12-20T18:00:06.303
> 
> 标签：java, xml, xpath

我想用 XPath 阅读站点地图，但它不起作用。这是我的代码：

```
private void evaluate2(String src){
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true); 
    try{
        DocumentBuilder builder = factory.newDocumentBuilder();
        Document doc = builder.parse(new ByteArrayInputStream(src.getBytes()));

        System.out.println(src);

        XPathFactory xp_factory = XPathFactory.newInstance();

        XPath xpath = xp_factory.newXPath();

        XPathExpression expr = xpath.compile("//url/loc");

        Object result = expr.evaluate(doc, XPathConstants.NODESET);

        NodeList nodes = (NodeList) result;

        System.out.println(nodes.getLength());

        for (int i = 0; i < nodes.getLength(); i++) {
            items.add(nodes.item(i).getNodeValue());
            System.out.println(nodes.item(i).toString()); 
        }         
    }catch(Exception e){
        System.out.println(e.getMessage());
    }
} 
```

在我检索站点地图的远程源之前，它通过变量 src 传递给 evaluate2。并且`System.out.println(nodes.getLength());`显示 0 My xpath 查询正在工作，因为此查询在 PHP 中工作。您在我的代码中看到错误吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:09:18.217

我认为输入有命名空间。因此，您必须为 xpath 对象初始化 namespaceContext 并使用前缀更改您的 xpath。即 //usr/loc 应该是 //ns:url/ns:loc 然后在命名空间对象中添加命名空间前缀绑定。

您可以找到与 apache common 一起可用的 NamespaceContext 实现。[http://ws.apache.org/commons/util/apidocs/index.html](http://ws.apache.org/commons/util/apidocs/index.html) ws-commons-utils

```
NamespaceContextImpl namespaceContextObj = new NamespaceContextImpl();
    nsContext.startPrefixMapping("ns", "http://sitename/xx");
xpath.setNamespaceContext(namespaceContextObj); 
```

XPathExpression expr = xpath.compile("//ns:url/ns:loc");

如果您不知道即将到来的命名空间，您可以从它自己的文档中获取它们，但我怀疑它会有多大用处。这里有一些操作方法 [http://www.ibm.com/developerworks/xml/library/x-nmspccontext/index.html](http://www.ibm.com/developerworks/xml/library/x-nmspccontext/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:50:23.973

您使用可识别名称空间的解析器（就是这样做的）解析站点地图`factory.setNamespaceAware(true)`，然后尝试使用不使用名称空间解析器（或引用任何名称空间）的 XPath 来访问它。

最简单的解决方案是将解析器配置为不支持命名空间。只要您只是解析一个独立的站点地图，那应该不是问题。

代码中的另一个问题是您将站点地图内容作为字符串传递，然后使用平台默认编码转换该字符串。只要您的平台默认编码与您从服务器检索的实际字节匹配（假设您还使用平台默认编码创建了字符串），这将起作用。如果没有，您可能会收到转换错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T18:24:15.643

我在您的代码中看不到任何错误，所以我认为问题出在源头上。您确定源文件包含此元素吗？

也许您可以尝试使用此代码来解析文档中的字符串

```
builder.parse(new InputSource(new StringReader(xml))); 
```

# asp.net - 如何调用创建pdf的页面

> ID：13977893
> 
> 赞同：0
> 
> 时间：2012-12-20T18:01:20.997
> 
> 标签：asp.net, vb.net

我有一个名为*OrderExport.aspx*的页面，它在服务器上的文件夹中创建一个 pdf 文件。

在我的*OrderSend.aspx*页面中，我有一个函数可以发送附有 pdf 文件的电子邮件，如下所示：

```
Dim atc As Net.Mail.Attachment = New Attachment(stm, fileNameOrder)
mail.Attachments.Add(atc) 
```

如何在发送电子邮件之前从该函数调用*OrderExport.aspx而不向用户显示它？*

发送电子邮件时，我需要确保 pdf 文件存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:23:50.830

您可能想要创建一个类而不是一个 aspx 页面来处理 PDF 创建。一种方法是使用 PDFSharp 库，该库可以处理创建 PDF 文档，然后将其保存到可以附加到电子邮件消息的流中。您还可以同时将流保存到服务器上的文件中。

```
' Create a new PDF document
Dim document As PdfDocument = New PdfDocument
document.Info.Title = "TITLE"
Dim securitySettings As Security.PdfSecuritySettings = document.SecuritySettings
' Restrict some rights.
securitySettings.PermitAccessibilityExtractContent = False
securitySettings.PermitAnnotations = False
securitySettings.PermitAssembleDocument = False
securitySettings.PermitExtractContent = False
securitySettings.PermitFullQualityPrint = True
securitySettings.PermitModifyDocument = False
securitySettings.PermitPrint = True
' Create an empty page
Dim page As PdfPage = document.AddPage
' Get an XGraphics object for drawing
Dim gfx As XGraphics = XGraphics.FromPdfPage(page)
Dim img As XImage = XImage.FromGdiPlusImage(imgPermit)
gfx.DrawImage(img, 20, 20)
Dim stream As New MemoryStream()
document.Save(stream, False)
Dim xStream As System.IO.Stream = stream
SendEmail(sEmail, xStream) 
```

在您的邮件中，它的构造类似于此

```
Dim xStream As New Attachment(pdf, "FILE" + Date.Now.ToString("MM.dd.yyyy") + ".pdf")
mm.Attachments.Add(xStream) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:29:21.837

关注点分离是最好的解决方案，但如果您需要一个快速的解决方案 - 不是一个好的解决方案 - 将类和函数公开并像任何其他类一样调用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T18:43:01.620

您需要将 GUI 与实际逻辑分开。

您可能在 OrderExport.aspx 中有创建 PDF 并将其保存到磁盘的代码。您应该将该代码放入一个单独的类中，以便您可以从 OrderExport.aspx 和带有“发送电子邮件”按钮的页面调用它。同样，从 OrderSend.aspx 中提取用于发送电子邮件的代码并从那里调用它，然后从“发送电子邮件”按钮中调用它。

# redirect - Squid 将所有请求重定向到同一页面

> ID：13977895
> 
> 赞同：0
> 
> 时间：2012-12-20T18:01:25.687
> 
> 标签：redirect, proxy, squid

我是 Squid 的新手，我想将所有请求重定向到一个静态页面。我进行了一项研究，但没有发现任何关于它的信息。

有人可以分享如何像这样配置 Squid 吗？

它应该看起来像：

1.  你使用我的代理
2.  你去 google.com
3.  您将被重定向到 www.mysite.com

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:36:39.160

我找到了解决方案。

只需使用默认 squid 设置并编辑 ACCESS_DENIED 错误文件即可获得静态消息，完全符合我的要求。

# jquery - 使用 jquery 在visualforce中加载页面

> ID：13977899
> 
> 赞同：0
> 
> 时间：2012-12-20T18:01:48.763
> 
> 标签：jquery, apex-code, visualforce

我正在尝试在我的 visualforce 页面中嵌入一个网站，但代码不起作用。

```
<apex:page >
   <apex:includeScript value="{$Resource.jQuery}"  />
   <script>
      $j = jQuery.noConflict();
      function LoadPage(){
      $.get('http://google.com, function(data) {
      $('#siteloader').html(data);
  });
}
   </script>

<body>
onload=LoadPage();
</body>

</apex:page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T03:16:51.457

为什么要使用 AJAX 来显示网站？您是否尝试过[iframe 标签](http://www.w3schools.com/tags/tag_iframe.asp)？

# android - 如何在位图中绘制文本？

> ID：13977900
> 
> 赞同：1
> 
> 时间：2012-12-20T18:01:48.810
> 
> 标签：android

如何在位图上绘制文本？我做的：

```
 float width = Converter.convertDpToPixel(250, context);
    float height = Converter.convertDpToPixel(40, context);
    Bitmap myBitmap = Bitmap.createBitmap((int)width + 1, (int)height+1, Bitmap.Config.ARGB_8888);
    Canvas myCanvas = new Canvas(myBitmap);
    Paint paint = new Paint();
    Typeface tanger = Typeface.createFromAsset(context.getAssets(),"fonts/Tangerine_Bold.ttf");
    paint.setAntiAlias(true);
    paint.setSubpixelText(true);
    paint.setTypeface(tanger);
    paint.setStyle(Paint.Style.FILL);
    paint.setColor(Color.BLACK);
    paint.setTextSize(55);
    paint.setTextAlign(Align.CENTER);
    myCanvas.drawText(quote, 16, 60, paint);
    return myBitmap; 
```

但只显示部分文本，我不知道为什么。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T18:10:05.943

您的位图位于`40px`中`height`，而您的文本是从`60px`位图顶部下方开始绘制的。由于您`textSize`是`55`其中的一部分，因此它仍然可见。您可能希望增加`Bitmap`.

# apache - 使用来自 homebrew apache httpd24 的 homebrew apxs 使用 libtool 失败：编译：无法推断标记配置

> ID：13977903
> 
> 赞同：3
> 
> 时间：2012-12-20T18:01:54.843
> 
> 标签：apache, homebrew, libtool

使用来自 homebrew apache httpd24 的 homebrew apxs 使用 libtool 失败：编译：无法推断标记配置

```
$ apxs -i -c -Wc,"-arch x86_64" -Wl,"-arch x86_64 " mod_uwsgi.c
/usr/share/apr-1/build-1/libtool --silent --mode=compile cc -prefer-pic   -DDARWIN -DSIGPROCMASK_SETS_THREAD_MASK  -I/usr/local/Cellar/httpd24/2.4.3/include/apache2  -I/usr/include/apr-1   -I/usr/include/apr-1  -arch x86_64  -c -o mod_uwsgi.lo mod_uwsgi.c && touch mod_uwsgi.slo
libtool: compile: unable to infer tagged configuration
libtool: compile: specify a tag with `--tag'
apxs:Error: Command failed with rc=65536
. 
```

我必须导出什么环境才能让 libtool 不抱怨标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:31:41.197

在挖掘源代码后，我发现如果 LTFLAGS 设置为 --tag=cc 一切正常。

```
$ LTFLAGS=--tag=cc apxs -i -c mod_uwsgi.c 
```

# node.js - 我可以在同一页面上对不同的 div 使用单独的 app.post 请求吗？

> ID：13977908
> 
> 赞同：0
> 
> 时间：2012-12-20T18:02:07.483
> 
> 标签：node.js, express, pug

我有一个带有侧边栏的页面，可以更改其功能。每个不同的侧边栏布局都是一个 div。其中两个边栏允许文本输入。现在我有一个 app.get 语句调用一个处理所有侧边栏布局的处理程序，但是这个解决方案非常混乱。我将如何拆分不同的侧边栏以使用不同的处理程序函数？

例如，我在 app.js 中有这样的语句：

```
app.post('/', home.sidebarHandler); 
```

sidebarHandler 目前处理登录和注册为新用户，但我希望这由两个单独的函数来完成。

这是我的玉代码的一部分，这是 div 之一：

```
form#sbCreateBox(method='post')
    input.sbText(type='text', name= 'usernameReg', placeholder='Username', required)
    input.sbText(type='text', name= 'acctHolderName', placeholder='Name')
    input.sbText(type='email', name= 'useremail', placeholder='Email Address',      required)
    input.sbText(type='password', name= 'passwordReg', autocomplete='off',    placeholder='Password', required)
    input.sbText(type='password', name= 'passConfirm', autocomplete='off', placeholder='Confirm Password', required)
    input#sbCreateButton(type='submit', value='Create Account') 
```

我如何设置路由以具有单独的 app.post 语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:19:43.430

您可以在服务器端代码中定义两条路由：

```
app.post('/register', home.registerUser);
app.post('/login', home.loginUser); 
```

并根据用户的操作更新您的 HTML 以发布到正确的 URL（/register 或 /login）。

**编辑** 您可以创建两个表单。一个将发布到 /register，另一个发布到 /login（注意表单元素上的 action 属性）：

*登记表*

```
form#sbCreateBox(method='post' action='/register')
    input.sbText(type='text', name= 'usernameReg', placeholder='Username', required)
    input.sbText(type='text', name= 'acctHolderName', placeholder='Name')
    input.sbText(type='email', name= 'useremail', placeholder='Email Address',      required)
    input.sbText(type='password', name= 'passwordReg', autocomplete='off',    placeholder='Password', required)
    input.sbText(type='password', name= 'passConfirm', autocomplete='off', placeholder='Confirm Password', required)
    input#sbCreateButton(type='submit', value='Create Account') 
```

*登录表格*

```
form#sbCreateBox(method='post' action='/login')
    input.sbText(type='text', name= 'usernameReg', placeholder='Username', required)
    input.sbText(type='password', name= 'passwordReg', autocomplete='off',    placeholder='Password', required)
    input#sbCreateButton(type='submit', value='Login') 
```

# php - 替换字符串的最后七个字符

> ID：13977920
> 
> 赞同：3
> 
> 时间：2012-12-20T18:02:51.210
> 
> 标签：php

我有一个字符串，我想用“#”替换字符串的最后 7 个字符。例如，我有“MerryChristmasu87yujh7”，我想用七个“#######”替换“87yujh7”。因此，最后的字符串将是“MerryChristmasu#######”。

我尝试了以下代码，但它返回“MerryChristmasu#######1”。它不会转换所有七个结束字符。

```
$string = "MerryChristmasu87yujh7";
$match = substr($string, -7, -1);
$result = str_replace($match, "#######", $string); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T18:04:32.477

应该...

```
$match = substr($string, -7); 
```

...没有最后的-1。但实际上，这样做要好得多...

```
$result = substr($string, 0, -7) . str_repeat('#', 7); 
```

...或者，更通用的：

```
$coverWith = function($string, $char, $number) {
  return substr($string, 0, -$number) . str_repeat($char, $number);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:05:50.893

```
$cuttedString = substr("your string", -7); 
```

这应该可以完成这项工作。

# scroll - 修复位置：溢出中的绝对元素：滚动时滚动元素

> ID：13977922
> 
> 赞同：6
> 
> 时间：2012-12-20T18:03:03.157
> 
> 标签：scroll, css-position, css

我想使用`overflow: scroll`（或自动）完成比屏幕更宽的图片库的预览。在右侧，与最后一个可见图像重叠的阴影应表明右侧可见更多图像。

这是一个小提琴：http: [//jsfiddle.net/SBdLg/](http://jsfiddle.net/SBdLg/)

首先，我想：简单，给那个图片库一个`box-shadow: inset`. 但这将显示在图像后面。现在，有了重叠`div`，`position: absolute`我达到了预期的效果，但`box-shadow`向右滚动时也会移动。

`div`恕我直言，当使用包含阴影而不是顶部的图像时，也会出现此问题。

CSS是否可以达到预期的效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:11:05.370

`position: relative`从`outer`DIV中删除并将其`shadow`精确定位在您需要的位置（这是丑陋的一点）将帮助您实现这一目标。

查看**演示：http:** [//jsfiddle.net/SBdLg/11/](http://jsfiddle.net/SBdLg/11/)

# sql - 绑定变量“Select”未声明错误？

> ID：13977927
> 
> 赞同：1
> 
> 时间：2012-12-20T18:03:15.653
> 
> 标签：sql, plsql

当我想运行我的匿名块时出现此错误

```
Bind Variable "select" is NOT DECLARED
anonymous block completed 
```

这个错误的原因是什么？我该如何阻止它？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:24:13.613

您不需要从 dual 中选择 sysdate 以及其他一些问题。

```
declare
  filename varchar2(21) := to_char(sysdate, '"MED_LIST_"DD_MM_YY".csv"');
Begin 
  execute immediate 'alter table ext_table location ('''||filename||''')';
end; 
```

# mysql - 是否可以通过 adobe air iOS 应用程序连接到远程 MySQL 数据库。

> ID：13977929
> 
> 赞同：0
> 
> 时间：2012-12-20T18:03:23.963
> 
> 标签：mysql, apache-flex, air, adobe

我做了一些研究，我知道您可以在 adobe flex 中使用服务器端语言进行连接，但这可以在 iOS 应用程序中进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:21:00.883

iOS 有一个 ODBC 驱动程序：

[http://www.prlog.org/10938886-open-database-connectivity-odbc-arrives-for-apple-ipad-iphone-and-ipod-touch.html](http://www.prlog.org/10938886-open-database-connectivity-odbc-arrives-for-apple-ipad-iphone-and-ipod-touch.html)

显然“MySQL 的 C 驱动程序（连接器/C）”也适用于 iOS：

[http://www.mysql.com/products/connector/](http://www.mysql.com/products/connector/)

请参阅有关 C 连接器的帖子：

[http://blog.iosplace.com/?p=20](http://blog.iosplace.com/?p=20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T05:17:30.607

是的，您需要实现 web 服务。Webservice是flex和Mysql、Sqlserver任意数据库之间的中介

# wordpress - 尽管 WP_Debug 设置为 false，为什么 Wordpress 会显示一长串错误？

> ID：13977930
> 
> 赞同：0
> 
> 时间：2012-12-20T18:03:26.777
> 
> 标签：wordpress, debugging, podscms

我有一个带有 Pods 框架的 Wordpress 3.5 安装。

当发生数据输入错误时，我调用`pods_error`Pods Framework 的函数向用户提供错误消息。

通常，它在我的本地主机中正常工作，例如：

![](../Images/fdc730122988febe0cb09f9696318004.png)

但是同样的错误会在服务器端发出很长的消息，例如：

![](../Images/d8a56da699b414c1f342690fc4bb69a9.png)

此错误消息对用户不友好。

我设置`WP_DEBUG`在`false`两边。为了找出详细错误消息的原因，我还应该检查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:02:07.607

我们已经修复了这个问题，您可以在[http://pods.io/latest/](http://pods.io/latest/)获取最新的 Pods 2.1.1，它应该很快就会发布。您所看到的是 Pod 生成的 PHP 警告和服务器上的 X-Debug 的组合，它将错误格式化为 HTML。

# sql-server - 如何将 MSSQLServer 存储过程输入参数设置为输出参数以进行回传。

> ID：13977931
> 
> 赞同：0
> 
> 时间：2012-12-20T18:03:29.147
> 
> 标签：sql-server, stored-procedures

所以我有一个存储过程，我试图将输出参数设置为输入参数，但我无法让它工作。

基本上这里是我的过程...

```
...
@InID DECIMAL(9),
@ID DECIMAL(9) OUTPUT,
...
if @InID is not null
begin
   @ID = @InID
end
... 
```

但这表明存在语法错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:34:46.607

```
create  procedure [dbo].[StackOverflow]
(
    @InID DECIMAL(9),
    @ID DECIMAL(9) OUTPUT
)
as
begin

if @InID is not null
begin
   set @ID = @InID
end
end 
```

你得到的语法错误是什么？下一个工作正常：

```
declare @out as decimal
exec StackOverflow 1, @out 
```

# asp.net-mvc - asp.net mvc 404 代码错误

> ID：13977938
> 
> 赞同：3
> 
> 时间：2012-12-20T18:03:54.717
> 
> 标签：asp.net-mvc, http-status-code-404

我在 asp.net mvc 有项目。还有一个我不知道如何解决的问题：我在 web.config 错误处理中添加，没关系，但它返回了

```
HTTP/1.1 302 Found
Content-Length: 157
Location: /Error404.html?aspxerrorpath=/fghdhdfghg 
```

这是错误的，我需要 HTTP/1.1 404 Not Found。我已经在

[那个网站](Http://www.bertal.ru/index.php?a636586/aurami.ru/fghdhdfghg#h)

你知道如何为我的 error404.html 页面设置错误代码吗？我已经尝试过硬编码的 html 页面和 MVC 操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:43:34.990

您可以设置或从控制器`Response.StatusCode = 404`返回 a 。`HttpNotFoundResult`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:20:12.447

您得到了 302（对象已移动），因为您在配置中明确请求了这一点，告诉它在 404 错误的情况下使用备用页面。您的另一个选择是让 Web 服务器发回 404 错误，但您将没有机会连同它一起发送 html 内容（大概是您重定向的全部原因）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T18:21:26.707

302 不是错误。它是“临时移动”的 HTTP 状态代码，它告诉 Web 浏览器/搜索引擎它应该继续使用它最初使用的 URL。

在使用 mod_rewrite、PHP 的 header() 和其他此类 URL 更改方案时，302 重定向很常见。您的网络服务器中是否启用了缓存..???

# keyboard-shortcuts - Angular-UI ui-keypress 不起作用

> ID：13977940
> 
> 赞同：1
> 
> 时间：2012-12-20T18:04:03.400
> 
> 标签：keyboard-shortcuts, angularjs, angular-ui

我什至无法简单地使用 angular-ui 并运行。我希望能够轻松检测按键，例如，在按下`enter`文本框后自动添加项目，而无需按下添加按钮。

* * *

这是我目前的尝试：

```
<!DOCTYPE html>
<html ng-app xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Main</title>
  <link rel="stylesheet", href="http://angular-ui.github.com/angular-ui/build/angular-ui.css" />
</head>
<body ng-controller="Ctrl">
  <button ng-click="add()">Add</button>
  <input type="text" ui-keypress="{enter: 'add()'}" />
  {{item}}
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js">    </script>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.3/angular.min.js"></script>
  <script src="http://angular-ui.github.com/angular-ui/build/angular-ui.js"></script>
  <script src="main.js"></script>
</body>
</html>

var myApp = angular.module('myApp', ['ui.directives']); 
```

* * *

```
function Ctrl($scope) {
  $scope.item = "";

  $scope.add = function () {
    $scope.item = "Item Added";
  }
} 
```

您可以在此处查看行为：http: [//jsfiddle.net/NbjZL/5/](http://jsfiddle.net/NbjZL/5/)。请注意，输入文本后单击按钮有效，但`enter`输入文本后按下按钮无效。我已经阅读了可以找到的文档并查看了几个示例，但我确信我仍然缺少一些小东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T18:30:13.920

Angular ui 无法找到 Angular 应用程序。您需要做的就是在 ng-app 中指定应用程序名称以使其正常工作。

```
<html ng-app="myModule" xmlns="http://www.w3.org/1999/xhtml"> 
```

检查[js fiddle](http://jsfiddle.net/jayrmotta/NbjZL/70/)以查看代码工作

# .net - 无需重新加载即可获取标记 - Google Maps V3

> ID：13977949
> 
> 赞同：1
> 
> 时间：2012-12-20T18:04:38.910
> 
> 标签：.net, google-maps-api-3, sql-server-2008-r2, reload, bounds

我使用 google maps v3、.NET 和 SQL Server 开发了一个应用程序。提交搜索框后，将根据您输入的地址显示地图。

现在这是第一个问题出现的地方。我想获取地图边界以在地图上创建标记。所以我要做的是在地图加载后重新加载页面并且我有边界然后在重新加载中我从数据库中获取标记。下一个问题是每当地图缩放或移动时，我都会再次重新加载页面以获取标记。这会导致页面不断重新加载。

我知道有一种方法可以获取边界，然后从数据库中获取标记，而无需重新加载整个页面。此功能类似于在 google 或 yelp 上进行的任何搜索。有没有人有如何做到这一点的示例或代码示例的链接？

# android - ActionBar 中的 SearchView 可绘制对象出现模糊

> ID：13977952
> 
> 赞同：8
> 
> 时间：2012-12-20T18:04:48.700
> 
> 标签：android, android-actionbar

我的 ActionBar 有以下菜单布局：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:id="@+id/itemSearch"
        android:icon="@drawable/actionbar_icon_search"
        android:showAsAction="ifRoom|collapseActionView"
        android:actionViewClass="android.widget.SearchView" 
        android:title="Search"/>
</menu> 
```

这是设置代码：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.actionbar_default, menu);

    SearchView searchView=(SearchView) menu.findItem(R.id.itemSearch).getActionView();
    int searchPlateId = searchView.getContext().getResources().getIdentifier("android:id/search_src_text", null, null);
    View searchEditText = searchView.findViewById(searchPlateId); 
    ((TextView) searchEditText).setTextColor(Color.WHITE);
    searchView.setOnCloseListener(new OnCloseListener() {...});
    searchView.setOnQueryTextListener(new OnQueryTextListener() {...});
} 
```

一切都很好，除了一件事：在我的华硕平板电脑（TF-201，Android 3.2.1）上，图形模糊：

![在此处输入图像描述](../Images/387c17f351528e26184bd4ee1a6817fc.png)

如果我删除`android:actionViewClass="android.widget.SearchView"`，一切看起来都很正常：

![在此处输入图像描述](../Images/7d5a41cc554df8e421e8c8f692d70abe.png)

在 4.1.2 模拟器上不会重现此问题。我尝试只在我的菜单中留下通货膨胀代码，`onCreateOptionsMenu()`但这没有帮助。

**我该如何解决？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-21T08:24:11.353

所以我击败了解决方案，但是，如果不使用 ActionBarSherlock 库，它仅声明对 API 14 及更高版本的正确兼容性。

* * *

# 第一个解决方案（API 14+）

重要的是要连接到应用程序的**主题上下文**，否则您将获得尽可能低的 SearchView 设计（模糊图标）

**以编程方式创建 SearchView**

**分段**

```
SearchView searchView =
                new SearchView(getActivity().getActionBar().getThemedContext()); 
```

**活动**

```
SearchView searchView = new SearchView(getActionBar().getThemedContext()); 
```

# 第二种解决方案（ABS 兼容性，API 8+）

**动作条 Sherlock 片段**

```
SearchView searchView = 
  new SearchView(getSherlockActivity().getSupportActionBar().getThemedContext()); 
```

**动作条夏洛克活动**

```
SearchView searchView = new SearchView(getSupportActionBar().getThemedContext()); 
```

* * *

# 第三种解决方案（API 11+）

在某些情况下，设置`SearchView.setBackgroundColor(int color)`会使图标看起来不那么模糊，请尝试**Color.WHITE**或**Color.BLACK**

***请注意**，无论是否折叠，这都会更改 MenuItem 的背景颜色，例如。通过使用 Theme Holo.Light.DarkActionBar，您需要根据您的 ActionBar 样式使用正确的颜色。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-19T15:03:17.020

我遇到了同样的问题，但其他答案并没有解决我的问题。我正在扩展我的活动课程`AppCompatActivity`。我的 searchview 图标在 Android 4.* 上看起来很模糊，在 Android 5.* 上看起来不错，没有任何问题。

我将我的 xml 更改为：

```
 <item android:id="@+id/action_search"
      android:icon="@drawable/ic_search_white_24dp"
      app:showAsAction="always"
      app:actionViewClass="android.support.v7.widget.SearchView"
      android:iconifiedByDefault="true" /> 
```

并且进口

```
import android.support.v7.widget.SearchView; 
```

代替`import android.widget.SearchView;`

问题已解决。

# java - Spring @Autowired 会话 bean

> ID：13977954
> 
> 赞同：0
> 
> 时间：2012-12-20T18:04:51.547
> 
> 标签：java, spring, session, jsf-2, autowired

我有一个会话范围的用户 bean：

```
@Component
@Scope("session")
public class UserBean {
    private User user;

    public User getUser() {
        return user;
    }

    public void setUser(User user) {
        this.user = user;
    }
} 
```

和一个地址 bean：

```
@Component
@Scope("session")
public class AddressBean {

    @Autowired
    private UserBean userBean;

    public getUserBean(){
          return userBean;
    }

    public void setUserBean(UserBean userBean){
          this.userBean=userBean;
    }
 } 
```

当我在 JSF 中调用 UserBean 时，它很好，我可以看到一个对象已被实例化。当我调用 AddressBean ...时，UserBean 始终为 null 并且没有被注入。我怎样才能正确接线？

# mysql - MySQL LEFT JOIN 来自同一个源表的多个表

> ID：13977957
> 
> 赞同：1
> 
> 时间：2012-12-20T18:05:10.030
> 
> 标签：mysql

我有以下表格：

```
companyContacts
addresses
states
phoneNumbers 
```

我需要在 、 和 上进行`addresses`LEFT `states`JOIN `phoneNumbers`。我需要与 连接，`phoneNumbers`并且需要与连接。`addresses``companyContacts``states``addresses`

我可以进行如下选择来获取所有内容。但是，如果某人有地址而不是电话号码，则不会返回结果。我如何才能使两者`phoneNumbers`都`addresses`从 加入`companyContacts`？

```
SELECT * FROM
    companyContacts AS c
    LEFT JOIN phoneNumbers AS p
        ON c.entityID = p.entityID
    LEFT JOIN addresses AS a
        ON p.entityID = a.entityID
    LEFT JOIN states AS s
        ON a.stateID = s.id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:07:41.117

听起来你想要这个：

```
SELECT * 
FROM  companyContacts AS c
LEFT JOIN phoneNumbers AS p
   ON c.entityID = p.entityID
LEFT JOIN addresses AS a
   ON c.entityID = a.entityID
LEFT JOIN states AS s
   ON a.stateID = s.id 
```

如果您同时加入`companyContacts.entityId`两者`phoneNumbers`，`addresses`那么即使没有电话号码或地址，您也会返回记录。你写电话号码的方式需要存在才能返回地址

# php - PHP 和使用标头

> ID：13977958
> 
> 赞同：0
> 
> 时间：2012-12-20T18:05:18.877
> 
> 标签：php

我有一个包含变量 $blogid 的登录页面，它从前一页“获取”博客 ID 号。代码是`$blogid = strip_tags(htmlentities(stripslashes($_GET['blog'])));` 用户登录后，我需要将用户 ID 和博客 ID 传递到另一个页面（comments_post.php）我有以下代码

```
 $_SESSION['user'] = $userrow[0];
        $_SESSION['pass'] = $userpass;

        die(header("Location: comments_post.php?blog=1&user=$userrow[0]")); 
```

重定向将博客 ID 传递为 1 和正确的用户 ID 号（来自表）。我需要该语句来传递由 $blogid 定义的博客 ID 号。如果我将代码更改为 blog=$blogid ，则仅传递用户 ID。如何让 $blogid 变量传递给 comments_post.php？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:08:29.223

怎么样

```
die(header('Location: comments_post.php?blog=' . $blogid . '&user= ' . $userrow[0])); 
```

你也确定 $blogid 被定义了吗？

# ruby - Ruby minitest-ci gem

> ID：13977960
> 
> 赞同：0
> 
> 时间：2012-12-20T18:05:34.723
> 
> 标签：ruby, continuous-integration, minitest

minitest-ci gem 的文档（似乎是为 Jenkins 等 CI 工具生成测试结果的唯一选择）有一个非常烦人的习惯，即不保留`rake minitest:models`调用时的结果`rake minitest`- 运行 minitest:models 的测试结果被删除在运行其余测试之前。minitest-ci 几乎不存在的文档声称将其添加到 test_helper.rb 将禁用麻烦的自动清理行为，但它不会：

```
# Why do SO and GitHub have to use completely different ways of indicating inline code?
# test/helper.rb
MiniTest::Ci.auto_clean = false 
```

有没有人设法让 minitest-ci 保存*所有*测试结果文件？我在这里达到了智慧的尽头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:12:01.923

我认为[ci_reporter gem](http://rubygems.org/gems/ci_reporter)支持 miniTest。这可能是另一种选择。

# forms - 如何使用 Spring Framework 将下拉值作为命令对象传递并上传到数据库

> ID：13977961
> 
> 赞同：1
> 
> 时间：2012-12-20T18:05:38.350
> 
> 标签：forms, spring, jsp, spring-mvc, controller

这里是春天的新手。我有一个 scheduleLoad.jsp（如下），用于获取用户的下拉列表输入并将其传递给 confirmLoad.jsp 屏幕并更新数据库。

```
Select Year:<form method="post" action="confirmLoadTest">
<select name="loadScheduleData">
<option value="2010-2011">2010-2011</option>
<option value="2011-2012">2011-2012</option>
<option value="2012-2013">2012-2013</option>
</select>
</form><br><br>
<input type="submit" value="Submit"/> 
```

我在使用 loadScheduleData 传递控制器中的命令对象时遇到问题。这是控制器[http://pastebin.com/G044Qn72](http://pastebin.com/G044Qn72)。底部的注释代码是工作代码，但我试图让未注释的代码工作。当用户点击“提交”并将其传递给我的 confirmLoad.jsp 时，我不确定如何接受命令对象的输入。现在它给了我错误：

`SEVERE: Servlet.service() for servlet [springApp] in context with path [/SpringApp] threw exception [No adapter for handler [us.tx.state.tea.tsds.Controller.ScheduleLoadController@7c1b2e27]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler] with root cause javax.servlet.ServletException: No adapter for handler [us.tx.state.tea.tsds.Controller.ScheduleLoadController@7c1b2e27]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler`

我一直在尝试将这两个教程中的代码拼凑起来：[http](http://www.mkyong.com/spring-mvc/spring-mvc-dropdown-box-example/) ://www.mkyong.com/spring-mvc/spring-mvc-dropdown-box-example/和[http://www.tutorialspoint.com/spring /spring_mvc_form_handling_example.htm](http://www.tutorialspoint.com/spring/spring_mvc_form_handling_example.htm)

任何帮助将不胜感激！先感谢您！

# java - Java中“包含类的子类”的含义？

> ID：13977963
> 
> 赞同：-1
> 
> 时间：2012-12-20T18:05:43.153
> 
> 标签：java, class

[当我阅读一篇论文](http://dl.acm.org/citation.cfm?id=2393661)时，我遇到了“包含类的子类”这个表达。`containing class`这在 Java中是什么意思？这是论文的摘录。

`Primarily, this entailed three things: (i) studying the implementation of the entity, as well as its usage, to reason about the intent behind the functionality; (ii) performing static dependency analysis on the entity, and any other types, methods, or fields referenced by it, including constants; and (iii) examining the inheritance hierarchy and subclasses of the containing class. This approach took considerable time and effort to apply.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:10:42.350

此示例具有包含类的子类：

```
class Parent {
    class Child {
    }
}

class ParentSubclass extends Parent {
    void whatever() {
        new Child(); // Creates an instance of Parent.Child
    }
} 
```

`ParentSubclass`是的*包含*类的*子*类。请注意，*外部*（或其子类）将不起作用，因为您*需要*有一个包含（“外部”）类来实例化非“内部”类。*`Child`*`Parent``new Child()`*`static`***

 ***当您现在向 中添加一个方法`doSomething`、在其中`Parent`调用它`Child`但在`ParentSubclass`.

```
class Parent {
    void doSomething() {
        System.out.println("Not doing anything");
    }

    class Child {
        void whatever() {
            doSomething(); // actually: Parent.this.doSomething()
        }
    }
}

class ParentSubclass extends Parent {
    void doSomething() {
        System.out.println("I'm just slacking.");
    }

    void whatever() {
        Child a = new Child(); // Creates an instance of Parent.Child
        a.whatever(); // will print "I'm just slacking".
    }
} 
```

像这样的情况使静态代码分析成为一个相当困难的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T18:12:53.557

由于我无法访问该论文，因此这是我最好的猜测：在 Java 中，类之间可以通过多种方式相互关联：除了相互继承之外，类还可以*嵌套*在另一个内部。

下面是一个继承自它所嵌套的类的类的示例：

```
public class Outer {
    public void doSomething() {
        // ...does something
    }
    private static class Inner extends Outer {
        public void doSomething() {
            // ...does something else
        }
    }
} 
```

在上面的示例中，`Inner`继承自`Outer`用作其包含类的 。***

# c# - 正则表达式只匹配一次

> ID：13977968
> 
> 赞同：0
> 
> 时间：2012-12-20T18:05:59.927
> 
> 标签：c#, regex

我有文字

```
1
00:00:03,837 --> 00:00:07,170
Text1

2
00:00:08,875 --> 00:00:10,968
Tex2

3
00:00:11,010 --> 00:00:13,843
Text3 
```

我想让它像那样

```
00:00:03,837 --> 00:00:07,170
Text1

00:00:08,875 --> 00:00:10,968
Tex2

00:00:11,010 --> 00:00:13,843
Text3 
```

我试过这个：

```
Match match = Regex.Match(loadedText, @"\d{1,4}\r\n");

if (match.Success)
{
    for (int i = 0; i < match.Groups.Count; i++)
    {
        loadedText= loadedText.Replace(match.Groups[i].Value, "");
    }
    rtbLoaded.Text = loadedText;
} 
```

但它给了我这个结果：

```
00:00:03,837 --> 00:00:07,170
Text1

2
00:00:08,875 --> 00:00:10,968
Tex2

3
00:00:11,010 --> 00:00:13,843
Text3 
```

所以只有一次......我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:09:47.020

试试这个替换规则：

```
string result = Regex.Replace(originalString, @"(?<=(\r\n|^))(\d+\r\n)", ""); 
```

这将替换所有仅包含数字的行或第一行中包含数字的行。

参考您的示例输入：

```
string input = "1\r\n00:00:03,837 --> 00:00:07,170\r\nText1\r\n\r\n2\r\n00:00:08,875 --> 00:00:10,968\r\nTex2\r\n\r\n3\r\n00:00:11,010 --> 00:00:13,843\r\nText3\r\n\r\n";
Console.WriteLine(Regex.Replace(input, @"(?<=(\r\n|^))(\d+\r\n)", "")); 
```

这输出：

> 00:00:03,837 --> 00:00:07,170 文本
> 1
> 
> 00:00:08,875 --> 00:00:10,968
> Tex2
> 
> 00:00:11,010 --> 00:00:13,843 文本
> 3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T18:09:28.527

组是正则 `()`表达式中的部分，而不是单个匹配项。

所以在正则表达式`(abc)(def)`中，第一组是`abc`，第二组是`def`。

不要遍历*组*（您只有默认组！），您需要*匹配*多次。也许使用内置的替换方法而不是`Replace`你在那里做的这个黑客。

# xml - 使用 cURL 发布时出现 XML 错误

> ID：13977969
> 
> 赞同：1
> 
> 时间：2012-12-20T18:06:02.067
> 
> 标签：xml, curl, php

我使用 cURL 将一些 XML 从一个页面发布到同一站点上的另一个页面：

我从一个数组生成 XML（这个位工作正常）：

```
$xml = new SimpleXMLElement('<test/>');
array_walk_recursive($arr, array ($xml, 'addChild'));
$xmlxml = $xml->asXML() 
```

然后使用 cURL 发布到另一个页面：

```
$url = "http://www.test.com/feedtest.php";
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
curl_setopt($ch, CURLOPT_POSTFIELDS, $xmlxml);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch);
echo $output; 
```

这会产生错误：

> 警告：simplexml_load_file() [function.simplexml-load-file]：I/O 警告：无法在“xxxxx/”中加载外部实体“<?xml version="1.0"?> <test> [....]”第 16 行上的 feedtest.php"

我究竟做错了什么？

我应该补充一下，这是另一页上发生的事情：

```
if ( $_SERVER['REQUEST_METHOD'] === 'POST' ){ 
    $postFile = file_get_contents('php://input'); 
}
$xml = simplexml_load_file($postFile); 
```

最后一行是触发错误的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:21:16.353

这是一个非常微不足道的错误，很容易错过：

```
$postFile = file_get_contents('php://input'); 
            ^^^^^^^^^^^^^^^^^ 
```

这已将 XML 字符串放入其中`$postFile`。但是然后您将其用作文件名：

```
$xml = simplexml_load_file($postFile);
                      ^^^^ 
```

相反，您可以这样加载它：

```
$postFile = 'php://input'; 
```

这是一个完美的有效文件名。所以后面的代码应该可以工作：

```
$xml = simplexml_load_file($postFile); 
```

或者，您可以加载字符串：

```
$postFile = file_get_contents('php://input'); 
...
$xml = simplexml_load_string($postFile); 
```

# python - 忽略在 __del__() 中打印到 stderr 的异常

> ID：13977970
> 
> 赞同：4
> 
> 时间：2012-12-20T18:06:13.420
> 
> 标签：python

根据[Python (2.7) 文档](http://docs.python.org/2/reference/datamodel.html)：

> 由于调用 __del__() 方法的不稳定环境，在执行期间发生的异常将被忽略，而是向 sys.stderr 打印警告

完全且绝对忽略 __del__() 中引发的异常的最 Pythonic 方式是什么——也就是说，不仅忽略异常，而且**不打印任何内容到 sterr**。有没有比临时将 stderr 重定向到空设备更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T18:08:22.483

我假设这是在`__del__()`您正在编写的函数中，如果是这样，只需自己捕获异常并忽略它。

```
def __del__(self):
    try:
        # do whatever you need to here
    except Exception:
        pass 
```

对 stderr 的日志记录仅*适用*于`__del__()`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T18:08:11.670

只需在`try`/`except`里面使用`__del__()`：

```
def __del__(self):
   try:
      # ...
   except:
      pass 
```

这将捕获所有异常并且不会打印任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T18:08:50.453

只需使用 try/except 块：

```
def __del__(self):
    try:
        something_that_might_throw()
    except:
        pass 
```

# php - 包括布局文件 - 最佳方法

> ID：13977972
> 
> 赞同：0
> 
> 时间：2012-12-20T18:06:14.073
> 
> 标签：php, layout, include

在开发应用程序时，我包含 phtml 文件来构建界面并使逻辑远离设计。

我已经用 3 种不同的方法进行了一些测试来包含这些文件，并得出了这个结果：

1.  include(FORMS_FOLDER."/campaign/create.phtml") - 加载时间：0,00011491775512695
2.  $render->form( **FILE** ) - 加载时间：0,00013995170593262 -> 增加 21.78%
3.  Render::form( **FILE** ) -> 加载时间：0,00019311904907227 -> 增加 68.04%

即使加载时间非常快，我应该坚持哪个选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:10:08.423

也许第一种方法最快，因为它是 PHP 中的本机函数。使用选项 2 和 3，OOP 风格会导致 PHP 思考片刻并将 $render->form() 方法转换为 include 语句。

如果您想保持富有表现力的 OOP 风格方法，我会选择选项 2 或 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:16:48.517

第二种选择。检查一些“更重要”的框架是如何做到的，因为它们的方法是经过精心挑选的。

例如，检查 Symfony2 是如何实现它的。注意`render`功能，这里是开始位置，您可以从中跟踪其余部分

[https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php)

因为在使用它的短短 2 周内，我就成为了**Symfony2 的绝对粉丝**，你可以查看他们的 Form 组件。您可以单独使用它，而无需使用整个全栈框架。

更新：如果您可以选择导入第三方代码，您还可以查看[http://twig.sensiolabs.org/这是一个模板引擎 :)](http://twig.sensiolabs.org/)

更新 2：原生 PHP 方法是最快的，但并不总是最好的方法。如果您构建的不仅仅是 1 文件 1 用途脚本，我建议使用 OOP 方法，这就是我投票支持选项 #2 的原因。请注意，OOP 应用程序比程序应用程序**慢**，但它们允许*更好*的结构和更容易的维护。至于速度差异，您可以查看：[面向对象的PHP慢吗？](https://stackoverflow.com/questions/1651759/is-object-oriented-php-slow)

# objective-c - UIBarButtonItem 和 UIGestureRecognizer

> ID：13977973
> 
> 赞同：2
> 
> 时间：2012-12-20T18:06:19.110
> 
> 标签：objective-c, uigesturerecognizer

我有一个`UIView`我添加了一个`UITapGestureRecognizer`：

```
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapDetected:)];
tapRecognizer.numberOfTapsRequired=1;
tapRecognizer.numberOfTouchesRequired=1;
[self.myView addGestureRecognizer:tapRecognizer]; 
```

然后我在视图中添加一个`UIToolBar`带有按钮的：

```
UIToolbar *topBar = [[UIToolbar alloc ]initWithFrame:CGRectMake(0, 0, self.myView.frame.size.width, 44)];
topBar.barStyle = UIBarStyleBlackTranslucent;

UIBarButtonItem *logout = [[UIBarButtonItem alloc] initWithTitle:@"Logout" style:UIBarButtonItemStyleBordered target:self action:@selector(logout)];

[topBar setItems:@[logout] animated:NO]; 
```

我在单击注销按钮时遇到问题，并且我的点击识别器会触发而不是我的注销操作。如果我单击并按住，则会触发注销操作（我猜点击识别器失败了，所以让按钮操作触发）。

按下按钮时如何不触发手势识别器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T05:12:11.833

刚遇到同样的问题。因为我不想引入容器视图（UIToolbar 应该覆盖我现有的视图）。在 Patrick.Ji 粗略指出的帮助下，我想出了这个：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    if ([touch.view.superview isKindOfClass:[UIToolbar class]]) {
        return NO;
    }
    return YES;
} 
```

不要忘记将手势的代表设置为`self`

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UITapGestureRecognizer *mainTapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(mainTapGesture:)];
    mainTapGestureRecognizer.delegate = self;
    [self.view addGestureRecognizer:mainTapGestureRecognizer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:20:36.550

检查点击识别器中的视图。如果它是您的注销按钮，请让触摸无法通过`super`.

或者，确保您的工具栏不是您的视图的子视图。相反，拥有一个包含工具栏和内容视图的容器视图，并将手势识别器添加到此内容视图。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-23T05:43:31.433

实现 UIGestureRecognizer 的这个委托方法（记得设置你的 tapRecognizer.delegate = self）

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:   (UITouch *)touch {

    if ([touch.view isKindOfClass:[UIBarButtonItem class]]) 
    {
        return NO;
    }
    return YES;
} 
```

# c++ - ActiveMQ 线程安全吗？

> ID：13977975
> 
> 赞同：4
> 
> 时间：2012-12-20T18:06:48.310
> 
> 标签：c++, multithreading, activemq, activemq-cpp

我们想在同一进程的不同线程上运行我们的`cms::MessageConsumer`和。`cms::MessageProducer`

我们如何安全地做到这一点？

拥有两个`cms::Connection`对象和两个`cms::Session`对象，消费者和生产者各一个，是否足以保证安全？这是必要的吗？

静态库级别的对象之间是否存在阻止这种使用的共享状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T19:57:31.217

您应该阅读 JMS v1.1 规范，它清楚地指出了哪些对象可以在多个线程中使用，哪些不是。即 Session、MessageConsumer 和 MessageProducer 被认为在线程之间共享是不安全的。我们通常会尽量使它们成为线程安全的，但肯定有一些方法会让你自己陷入困境。在每个线程中使用单个会话通常是一个好主意，并且通常为每个 MessageConsumer / MessageProducer 使用一个会话是一个好主意，因为 Session 包含单个调度线程，这意味着具有许多消费者的会话必须共享其调度线程用于向每个消费者发送消息，这可以根据场景降低延迟。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T06:45:23.607

我正在回答我自己的问题以补充 Tim Bish 的回答，我接受它提供了基本信息。

来自[http://activemq.apache.org/cms/cms-api-overview.html](http://activemq.apache.org/cms/cms-api-overview.html)

> 什么是内容管理系统？
> 
> CMS API 是 Java 中 JMS API 的 C++ 推论，用于从分布在网络上或位于同一台机器上的客户端发送和接收消息。在 CMS 中，我们尽一切努力尽可能地保持与 JMS api 的一致性，只有当 JMS 功能强烈依赖于 Java 编程语言本身的功能时才会出现分歧。尽管存在一些差异，但大多数差异都很小，而且 CMS 大部分都遵循 JMS 规范，因此牢牢掌握 JMS 的工作原理应该会使使用 CMS 变得更加容易。

JMS 规范对线程安全有什么看法？

在此处下载规范：http: [//download.oracle.com/otndocs/jcp/7195-jms-1.1-fr-spec-oth-JSpec/](http://download.oracle.com/otndocs/jcp/7195-jms-1.1-fr-spec-oth-JSpec/)

> 2.8 多线程 JMS 可能要求它的所有对象都支持并发使用。由于对并发访问的支持通常会增加一些开销和复杂性，因此 JMS 设计限制了对那些自然会由多线程客户端共享的对象的并发访问要求。其余部分设计为一次由一个逻辑控制线程访问。JMS 定义了一些限制会话并发使用的特定规则。因为他们需要的 JMS 细节知识比我们在
> 
> 表 2-2 支持并发使用的 JMS 对象
> 
> *   目的地：是
> *   连接工厂：是
> *   连接：是
> *   会话：没有
> *   消息生产者：否
> *   消息消费者：否
> 
> 这一点，它们将在后面描述。在这里，我们将描述施加它们的基本原理。
> 
> 限制对 Session 的并发访问有两个原因。首先，Sessions 是支持事务的 JMS 实体。实现多线程事务非常困难。其次，Sessions支持异步消息消费。重要的是，JMS 不要求用于异步消息消费的客户端代码能够处理多个并发消息。此外，如果一个 Session 已经设置了多个异步消费者，重要的是不要强迫客户端处理这些单独的消费者同时执行的情况。这些限制使 JMS 更易于用于典型客户端。更复杂的客户端可以通过使用多个会话来获得他们想要的并发性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T18:27:08.620

据我从 Java 方面了解，*连接*是线程安全的（创建起来相当昂贵），但*Session*和*messageProducer*不是线程安全的。因此，您似乎应该为每个线程创建一个会话。

# twitter-bootstrap - 如何使用引导程序在跨度内居中元素

> ID：13977976
> 
> 赞同：-1
> 
> 时间：2012-12-20T18:06:51.163
> 
> 标签：twitter-bootstrap, center

我想知道如何将项目集中在一个范围内（使用 bootsrap ），以便在移动设备上产生良好的效果。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:19:13.477

以分页为中心的类怎么样

```
 <div class="myspan1 pagination-centered">
      <button class="myclass1">
        WHATEVER
      </button>
    </div> 
```

# html - 优化使用 CSS 掩码的 CSS3 动画

> ID：13977979
> 
> 赞同：3
> 
> 时间：2012-12-20T18:07:20.627
> 
> 标签：html, css, animation

我正在处理基于 CSS3 的动画，其中我有一个具有线性渐变作为背景的 div，然后我使用 -webkit-mask-image 属性使用 PNG 作为蒙版。

为了使其具有动画效果，我想将蒙版移动到渐变顶部。它工作正常，看起来很漂亮，但我的问题是它有点杀死 CPU。

这是动画：

```
@keyframes moveMask {
    0%  { -webkit-mask-position: 0px 0px;}
    100% { -webkit-mask-position: 2000px 0px; }
} 
```

我用这个来称呼它：

```
animation: moveMask 200s linear infinite alternate; 
```

我尝试添加以下技巧，但它没有改变任何东西：

```
transform: translate3d(0,0,0);
-webkit-transform: translate3d(0,0,0); 
```

关于如何优化它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:53:12.490

正如 Rich Bradshaw 指出的那样，我想您会发现它只是没有得到很好的优化。不过，要实现类似的效果，您可以创建一个动画 GIF，将画布大小加倍，然后在另一半画布的每一帧上放置一个静态版本的 GIF。这样，动画将始终在后台不可见地播放，您只需在想要显示动画版本时通过更改图像的位置来切换到它。

这种技术的一个问题是，当您触发它时，动画不一定从头开始。这对您的特定动画可能重要也可能不重要。

# activerecord - belongs_to 和 has_many 相同的项目

> ID：13977980
> 
> 赞同：2
> 
> 时间：2012-12-20T18:07:28.797
> 
> 标签：activerecord

我正在建模一个**课程**表，课程属于用户，课程的老师和创建者，而且课程可以有很多学生，他们也是用户。

所以它会是这样的

```
class Lesson < ActiveRecord::Base
  belongs_to :user
  has_many :users
end 
```

我想打电话给第一个用户**教师**和用户**学生**的集合，我已经阅读了[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)上的文档，但我找不到我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T18:11:39.403

这应该有你想要的： http: [//api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-belongs_to)

我认为您需要以下`class_name`选项：

```
class Lesson < ActiveRecord::Base
  belongs_to :teacher, class_name: "User"
  has_many :students, class_name: "User"
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T18:14:47.107

在您当前的代码中，所有用户都可以是课程的“所有者”（教师），而不是您应该有两个额外的类“学生”和“教师”，它们都与“用户”类具有 1:1 的关系。

这会更合适：

```
class Teacher < ActiveRecord::Base
  has_one :user
end

class Student < ActiveRecord::Base
  has_one :user
end

class Lesson < ActiveRecord::Base
  belongs_to :teacher
  has_many :students
end 
```

# asp.net - 单独文件中的 ASP.NET C# 部分类不起作用 CS1061

> ID：13977984
> 
> 赞同：1
> 
> 时间：2012-12-20T18:07:54.730
> 
> 标签：asp.net, partial

我有一个名为 prequal.aspx 的 asp.net 页面，代码隐藏为 prequal.aspx.cs。有用。我想将此页面中的每个客户端代码分离到它们自己的部分文件中（以减少以后错误修改错误的机会。）两个 .cs 文件都是这样开始的：

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Data.SqlClient;

    public partial class prequal : System.Web.UI.Page
    { 
```

当我将其中一个客户端代码放入其自己的文件中时，它可以正常编译，但是当我尝试查看页面时出现以下错误：

CS1061：“ASP.prequal_aspx”不包含“lnkLanguage_Click”的定义，并且找不到接受“ASP.prequal_aspx”类型的第一个参数的扩展方法“lnkLanguage_Click”（您是否缺少 using 指令或程序集引用？）

prequal.aspx 有这个：

`<asp:LinkButton id="lnkLanguage" onclick="lnkLanguage_Click" runat="server" CausesValidation="False">English / En Español</asp:LinkButton>`

prequal.aspx.cs 有这个：

```
 protected void lnkLanguage_Click()
    {
        // alternate preferred language
        if (Session["lang"].ToString() == "spa")
        {
            Session["lang"] = "eng";
        }
        else
        {
            Session["lang"] = "spa";
        }
        populateQuestions();
    } 
```

populateQuestions() 将调用 prequal.aspx.cs 中的其他代码，后者调用 prequal-client1.aspx.cs 中的代码。代码在我拆分之前有效，所以我会错误地创建单独的部分类文件吗？还是我还不知道的其他问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:11:45.067

我相信签名`lnkLanguage`必须是：

```
protected void lnkLanguage_Click(object sender, EventArgs e)
{
  //...
} 
```

# c++ - 带有二维数组的 C++ Visual Studio 堆栈溢出

> ID：13977989
> 
> 赞同：8
> 
> 时间：2012-12-20T18:08:12.810
> 
> 标签：c++, visual-studio-2010, stack-overflow

我正在使用 Visual Studio 2010 Win 8。我有一个类，我正在制作一个二维数组来保存游戏的游戏数据。

创建一个空白控制台应用程序并制作 main.cpp 并添加此代码。对 MAP_SIZE 使用 360 会导致堆栈溢出，而使用 359 则不会。为什么会这样？我正在寻找一个更大的数组。理想情况下，我想要 2000 - 10,000 之类的东西。

```
#define MAP_SIZE 360

typedef unsigned short ushort;
typedef unsigned long ulong;

struct Tile
{
    ushort baseLayerTileID;
    ulong ownerID;
};

class Server
{
private:
    Tile _map[MAP_SIZE][MAP_SIZE];
};

int main()
{
    Server s;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T18:11:39.767

我的估计`sizeof(Tile)`是 8 或更多。这意味着`sizeof(Server)`至少 360*360*8 = 1036800，即 0.99 MB。堆栈通常很小，1MB 是常见的默认大小。您应该改为在堆上分配图块，也许使用`std::vector`.

```
class Server
{
public:
    Server() : _map(MAP_SIZE * MAP_SIZE) {}
private:
    std::vector<Tile> _map; // position [i][j] is at [i*MAP_SIZE+j]
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T18:12:11.637

`Tile`您正在堆栈上分配 360 x 360 对象的数组。这从一开始就是一个坏主意。您在堆栈上分配了一个非常大的内存块。堆栈不适用于此类用途。

如果您只需要一个实例并且事先知道大小，则此内存应该是静态的，或者您应该从堆中分配它（使用`new`或什至`malloc()`）。

考虑使用构造函数来`Server`分配内存，`new`而不是按照您的操作方式进行操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-20T18:10:46.343

堆栈的大小有限。如果您需要容纳一个大数组，请使用动态分配。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-20T18:11:54.007

您创建了一个类型，每个实例需要约 1MB 的堆栈空间，这显然比您的堆栈可以容纳的要大。

*   可移植选项是从固定数组更改为动态分配或向量类型。
*   不可移植的选项是增加应用程序中的堆栈大小（这反过来会增加所有线程的堆栈大小）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-01T00:40:33.313

默认堆栈大小为 1MB。您的 struct size = ushort(2bytes) + ulong (4byte)= 6 个字节，编译器将其转换为 8 个字节以进行结构对齐。所以 8*360*360 =1036800 字节，略高于 1MB

有3个解决方案：

1-强制停止对齐：

```
 #pragma pack(push)  /* push current alignment to stack */
 #pragma pack(1)     /* set alignment to 1 byte boundary */
 struct Tile
 {
   ushort baseLayerTileID;
   ulong ownerID;
 };
 #pragma pack(pop)   /* restore original alignment from stack */ 
```

这将允许最大 MAP_SIZE= sqrt(1024*1024/6)=418 ，因此这允许更大的地图大小，但不是您想要的大小

2-您可以更改 Visual Studio 设置以允许编译器和链接器在堆栈中使用超过 1 MB：您需要将其更改为更大的最大映射大小，即 8*10000*10000 ~800MB

*   右键单击项目，然后从菜单中选择属性。
*   进入配置属性->C/C++->命令行，添加这个参数：

    /F801000000

![在此处输入图像描述](../Images/307b74fb1beb956c496419607262c7cb.png)

*   转到配置属性->链接器->命令行，添加此参数

    /堆栈：801000000

![在此处输入图像描述](../Images/9d875fada9b637caab5f7ebc9b6a187b.png)

完毕！

3-第三种解决方案是动态数组在堆上分配，而不是静态数组，正如所有人所说。

# validation - ColdFusion VIN号码验证码

> ID：13977991
> 
> 赞同：4
> 
> 时间：2012-12-20T18:08:19.430
> 
> 标签：validation, coldfusion, vin

我正在尝试[将此 PHP 验证代码](https://stackoverflow.com/questions/3831764/php-vin-number-validation-code)转换为 ColdFusion。但是，我无法让我的 CF 版本正确验证 VIN。我希望有人可以阐明我所缺少的东西。

```
<cfscript>
    function isVIN(v) {
        var i = "";
        var d = "";
        var checkdigit = "";
        var sum = 0;
        var weights = [8, 7, 6, 5, 4, 3, 2, 10, 0, 9, 8, 7, 6, 5, 4, 3, 2];
        var transliterations = {
            a = 1,
            b = 2,
            c = 3,
            d = 4,
            e = 5,
            f = 6,
            g = 7,
            h = 8,
            j = 1,
            k = 2,
            l = 3,
            m = 4,
            n = 5,
            p = 7,
            r = 9,
            s = 2,
            t = 3,
            u = 4,
            v = 5,
            w = 6,
            x = 7,
            y = 8,
            z = 9
        };

        if (! REFindNoCase("^([\w]{3})[A-Z]{2}\d{2}([A-Z]{1}|\d{1})([\d{1}|X{1})([A-Z]+\d+|\d+[A-Z]+)\d{5}$", ARGUMENTS.v)) {
            return false;
        }

        if (Len(ARGUMENTS.v) != 17) {
            return false;
        }

        for (i = 1; i <= Len(ARGUMENTS.v); i++) {
            d = Mid(ARGUMENTS.v, i, 1);

            if (! isNumeric(d)) {
                sum += transliterations[d] * weights[i];
            } else {
                sum += d * weights[i];
            }
        }

        checkdigit = sum % 11;

        if (checkdigit == 10) {
            checkdigit = "x";
        }

        if (checkdigit == Mid(ARGUMENTS.v,8,1)) {
            return true;
        }

        return false;
    }
</cfscript> 
```

（CFLib.org 上有一个 VIN 验证功能，但它也不起作用）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T19:16:12.977

您的功能有两个问题。

首先，正则表达式不正确。这是一个简化的工作版本：

```
^[A-Z\d]{3}[A-Z]{2}\d{2}[A-Z\d][\dX](?:[A-Z]+\d+|\d+[A-Z]+)\d{5}$ 
```

**注意：**根据[亚当的回答](https://stackoverflow.com/questions/13977991/coldfusion-vin-number-validation-code#13979824)，有一个比这更简单的模式。

其次，在您的校验位比较中，Mid 是一个出局 - 似乎 8 应该是 9。

*（推测这是一个语言转换问题，因为 PHP 是 0 索引，而 CFML 是 1 索引。）*

在这两个固定的情况下，修改后的函数为 VIN 返回 true `WAUBA24B3XN104537`（这是我在快速搜索中可以找到的唯一示例 VIN）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T20:18:10.467

实际上正则表达式仍然有点错误。我认为@PeterBoughton 修复了语法，但它实际上不适用于手头的任务。

这是修改后的代码部分，带有适当的注释：

```
var vinRegex = "(?x)    ## allow comments
    ^                   ## from the start of the string
                        ## see http://en.wikipedia.org/wiki/Vehicle_Identification_Number for VIN spec
    [A-Z\d]{3}          ## World Manufacturer Identifier (WMI)
    [A-Z\d]{5}          ## Vehicle decription section (VDS)
    [\dX]               ## Check digit
    [A-Z\d]             ## Model year
    [A-Z\d]             ## Plant
    \d{6}               ## Sequence
    $                   ## to the end of the string
";

if (! REFindNoCase(vinRegex, arguments.v)) {
    return false;
} 
```

这可以大大简化为：

```
^[A-Z\d]{8}[\dX][A-Z\d]{2}\d{6}$ 
```

使用其中任何一个也消除了长度检查的要求，因为正则表达式也会强制执行。

此修改的测试代码：

```
for (vin in [
    "1GNDM19ZXRB170064",
    "1FAFP40634F172825"
]){
    writeOutput("#vin#: #isVin(vin)#<br />");
} 
```

我将使用详细版本更新 CFLib，因为它更容易理解正在发生的事情，并符合规范。

# sql - 数据是“姓，名”。我需要将其写为“FirstName LastName”

> ID：13977998
> 
> 赞同：1
> 
> 时间：2012-12-20T18:08:49.250
> 
> 标签：sql, sql-server, sql-server-2008, parsing, coalesce

运行 sql server 2008 标题说了算，但在我的选择语句中我有这个

```
COALESCE( ca.AttributeList.value('(/AttributeList/IRName)[1]','varchar(max)')
        ,ca2.AttributeList.value('(/AttributeList/IRName)[1]','varchar(max)'))
      AS IR_Name 
```

它返回`lastName, FirstName`

这在导出到 csv 时会成为一个问题，因为它会创建两个单独的列，而不是什么。

我必须以某种方式弄清楚如何让字符串 be `firstName lastName`，没有逗号，并将 firstName 放在第一位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T18:30:05.363

```
 SELECT PARSENAME(REPLACE('John , Doe', ',', '.'), 1) + ' ' + PARSENAME(REPLACE('John , Doe', ',', '.'), 2) 
```

这会将“John , Doe”切换为“Doe John”。现在，您只需将“John, Doe”替换为

```
 COALESCE(ca.AttributeList.value('(/AttributeList/IRName)[1]','varchar(max)'),ca2.AttributeList.value('(/AttributeList/IRName)[1]','varchar(max)')) AS IR_Name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T19:33:54.160

另一种方法是使用字符串函数：

```
select (case when IR_Name like '%,%'
             then (ltrim(rtrim(substring(IR_NAME, charindex(',', IR_NAME)+1, 1000))) + ' ' +
                   ltrim(rtrim(left(IR_Name, charindex(',', IR_NAME) - 1)))
                  )
             else IR_NAME
         end) t
from (select COALESCE( ca.AttributeList.value('(/AttributeList/IRName)[1]','varchar(max)')
                      ,ca2.AttributeList.value('(/AttributeList/IRName)[1]','varchar(max)'))
             AS IR_Name
      . . .
     ) t 
```

修剪功能是删除多余的空格。

`parsename`解决方案很聪明。但是，它看起来很奇怪，因为 parsename 是为多部分命名约定而设计的，最多有四个部分用句点分隔。