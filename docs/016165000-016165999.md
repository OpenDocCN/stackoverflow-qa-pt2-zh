# StackOverflow 问答 16165000-16165999

# javascript - jQuery 逐一显示列表项的最佳方式

> ID：16165001
> 
> 赞同：0
> 
> 时间：2013-04-23T08:52:02.553
> 
> 标签：javascript, jquery, events, click, show

我想通过单击按钮一一显示列表项。

**这是我的代码：**

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>
    $(document).ready(function() {
        $('ol > li').hide();
        $('button').click(function() {
            if ($('ol > li:first').is(':visible'))
                $('ol > li:visible:last').next().show();
            else
                $('ol > li:first').show();
        });
    });
</script>
<button type="button">Show</button>
<ol>
    <li>#1</li>
    <li>#2</li>
    <li>#3</li>
    <li>#4</li>
    <li>#5</li>
    <li>#6</li>
</ol> 
```

它有效，但我很确定可以优化。最好的方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:57:07.863

您可以将显示改为单行：

```
$('button').click(function() {
    $('ol > li:hidden:first').show();
}); 
```

工作示例 - [http://jsfiddle.net/WV84H/](http://jsfiddle.net/WV84H/)

您可以通过缓存 li 的列表来提高效率：

```
var $listItems = $('ol > li');
$('button').click(function() {
    $listItems.filter(':hidden:first').show();
}); 
```

工作示例 - [http://jsfiddle.net/WV84H/1/](http://jsfiddle.net/WV84H/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:57:33.533

```
$('ol > li').hide();
$('button').click(function() {
    $('ol > li:hidden').eq(0).show();
}); 
```

**工作示例** [http://jsfiddle.net/YVeuY/](http://jsfiddle.net/YVeuY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-06T09:18:17.317

我为此使用 css`transition-delay`属性，并使用 scss 为每个`<li>`元素增加它

> [https://www.w3schools.com/cssref/css3_pr_transition-delay.asp](https://www.w3schools.com/cssref/css3_pr_transition-delay.asp)

```
 $delay-increment: 0.3;
    $delay: 0-$delay-increment;

    @for $i from 1 through 10 { //adding transition delays to provide sequential icons show on profile load
        li:nth-child(#{$i}) {
            transition-delay: #{$delay+$delay-increment}s;

            &:after{
                transition-delay: #{$delay+$delay-increment}s;
            }
        }

        $delay: $delay + $delay-increment;
    } 
```

显示`<li>`我使用 JS 只是为了设置`show`负责不透明度更改的类

请参阅下面的已编译 sass 示例：

```
$('.show').click(function() {
  $('ul').toggleClass('show');
})
```

```
li:nth-child(1) {
  transition-delay: 0s;
}

li:nth-child(2) {
  transition-delay: 0.3s;
}

li:nth-child(3) {
  transition-delay: 0.6s;
}

li:nth-child(4) {
  transition-delay: 0.9s;
}

li:nth-child(5) {
  transition-delay: 1.2s;
}

li:nth-child(6) {
  transition-delay: 1.5s;
}

li:nth-child(7) {
  transition-delay: 1.8s;
}

li:nth-child(8) {
  transition-delay: 2.1s;
}

li:nth-child(9) {
  transition-delay: 2.4s;
}

li:nth-child(10) {
  transition-delay: 2.7s;
}

ul>li {
  opacity: 0;
  transition: opacity .4s;
}

ul.show>li {
  opacity: 1;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button class='show'>Show</button>

<ul>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
  <li>list item</li>
</ul>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T08:58:03.703

```
<script>
$(document).ready(function() {
  var $liList= $('ol > li');
   $liList.hide();
    $('button').click(function() {
        var $first=$liList.filter(":first")
        if ($first.is(':visible'))
            $liList.filter(":visible:last').next().show();
        else
            $first.show();
    });
});
</script> 
```

# if-statement - 生成块编译时 间 If-Else 参数化

> ID：16165002
> 
> 赞同：1
> 
> 时间：2013-04-23T08:52:07.627
> 
> 标签：if-statement, verilog

我希望能够使用生成块参数化一些行为级别的 Verilog。该模块用于可重新配置的读出和 FIFO 块，主要是我们可以编写一个代码并在顶层使用一个参数。

假设我们有：

```
always @(posedge write_out_clk or posedge RESETN)
 begin
   if (RESETN)          
    SENSE_ADDR <= 0;
   else if (enb[0] == 1)
        SENSE_ADDR <= 1;   // for example but may be some other wire/bus etc
   else if (enb[1] == 2)
        SENSE_ADDR <= 1;   // for example but may be some other wire/bus etc
   else
    SENSE_ADDR <= SENSE_ADDR;
   end
 end 
```

这是行为性的，所以实现的细节留给编译器，用户给定时序约束等。如果我对它们进行硬编码，这适用于块内的“n”个 else-if 语句，目前综合和模拟都适用于 16 个语句。

然而，我的问题是如何使用生成参数化它？显然，如果 'n=8' 对其进行硬编码并没有什么大不了的。如果'n = 64'或'n = 128'等怎么办。如果模块的其余部分使用'n'的生成完全参数化，硬编码它似乎是一种耻辱......

我试过做类似的事情：

```
genvar elseif_generate;
generate
   for (elseif_generate=0; elseif_generate<FIFO_SUB_BLOCKS; elseif_generate=elseif_generate+1)
   begin: elseif_generate_logic
   always @(posedge write_out_clk or posedge RESETN)
    begin
    if (RESETN)
        SENSE_ADDR <= 0;
    else if (enb[elseif_generate] == 1)
        SENSE_ADDR <= some_wire[elseif_generate];
    else
        SENSE_ADDR <= SENSE_ADDR;
    end
   end
endgenerate 
```

然而，这会导致输出线“SENSE_ADDR”出现多源错误。这让我想到了另一个问题。显然生成块在这里不适合，但我将如何为这个块实现参数化代码复制？基本上我想要行为的功能，硬编码的 if-else 总是以参数化的形式阻塞......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T14:33:17.243

这是否满足您的需求？无需生成。

```
module mux #(
        parameter WIDTH = 5,
        parameter NUM   = 2,
        parameter NUMLG = $clog2(NUM)
    ) (
        input [NUMLG -1:0] sel,
        input [WIDTH - 1:0] in [0:NUM-1],
        output [WIDTH - 1:0] out
    );

    assign out = in[sel];

endmodule 
```

如果您的模拟器不能很好地支持 SystemVerilog，您将不得不修改它以破坏输入数组，但概念是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:12:17.603

您不需要生成块。添加一个组合 always 块以计算`next_SENSE_ADDR`将失败到`SENSE_ADDR`.

```
always @(posedge write_out_clk or posedge RESETN)
 begin
   if (RESETN)          
    SENSE_ADDR <= 0;
   else
    SENSE_ADDR <= next_SENSE_ADDR;
 end

integer idx;
always @* begin // @(SENSE_ADDR or enb or some_wire)
  next_SENSE_ADDR = SENSE_ADDR; // default, value if enb is all 0
  // count down because lsb has higher priority
  for ( idx=FIFO_SUB_BLOCKS-1; idx>=0; idx-- ) begin
    if ( enb[idx] )
      next_SENSE_ADDR = some_wire[idx];
  end
end 
```

# git - 如何在 post-receive 钩子中修改 git commit 消息

> ID：16165004
> 
> 赞同：0
> 
> 时间：2013-04-23T08:52:12.653
> 
> 标签：git, hook, githooks, git-post-receive

我需要在 post-receive 钩子中修改提交消息（添加错误跟踪 id）。有没有一种优雅的方式来做到这一点，还是我必须编写“git rebase -i”的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:48:31.963

您不能修改提交消息（或提交的任何其他部分），因为提交 ID 是提交内容的加密校验和：更改提交的任何部分都会更改校验和，这意味着它不是同一个提交了。您可以进行新的不同提交（类似于`rebase -i`），或者您可以使用注释，如前所述。

您最好的选择通常是在首先进行提交*之前*调整评论。如果做不到这一点，笔记旨在让您在事后附加数据。从旧的提交进行新的提交可以工作，但会很烦人：推送提交的开发人员将必须获得由 post-receive 钩子创建的新提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:19:30.800

您可以通过 git-notes 在提交中添加注释。因此，它不会修改您的提交。尽管如此，它也不会改变你的 git commit 消息。 [https://www.kernel.org/pub/software/scm/git/docs/git-notes.html](https://www.kernel.org/pub/software/scm/git/docs/git-notes.html)

# breeze - 微风js：仅添加实体的registerEntityTypeCtor？

> ID：16165006
> 
> 赞同：2
> 
> 时间：2013-04-23T08:52:14.660
> 
> 标签：breeze

我使用 registerEntityTypeCtor 函数在创建实体时添加了一些初始化代码。但是，无论实体的状态如何（已添加、已更改、已分离等），都会触发此代码

我希望 registerEntityTypeCtor 中的初始化代码仅应用于状态为已添加的实体。问题是实体的状态仅在调用定制构造函数之后设置。我能做些什么来解决这个问题？

```
 function configureMetadataStore(metadataStore) {
        metadataStore.registerEntityTypeCtor('Mandate', function () {
            this.blah = 'test';
        }, mandatInitializer);

        //Validator.register(someValidator);
        logger.info('Validators applied');
    }

    function mandatInitializer(mandat) {     
        mandat.TransactionType = '0';
        mandat.Status = '0';
        mandat.NextSequenceType = '0';
        mandat.MandateType = '0';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T07:26:37.227

registerEntityTypeCtor 方法具有三个输入参数：实体名称、构造函数和初始化方法。我认为您可以使用第三个参数仅在添加的实体中进行初始化。

```
dtContext.metadataStore.registerEntityTypeCtor(entityName, constructor, initializerMethod); 
```

- -编辑 - -

您可以在 initializerMethod 中检查 id 是否未定义：

```
function initializerMethod(entity){
  if(entity.id()===unefined || entity.id()=== null){
    //Do things that you want with the new entity
    //...
    //Initilize the id with a temporal value that would be override in the server side.
  }
} 
```

# jquery - 使用带有淡入淡出的 jQuery .hide()

> ID：16165008
> 
> 赞同：31
> 
> 时间：2013-04-23T08:52:19.317
> 
> 标签：jquery, hide, fade

我有一个`.hide()`基于复选框隐藏 div 的功能。

[JS Fiddle 在这里工作](http://jsfiddle.net/Z9ZVk/5/) [真实站点示例在这里](http://www.haselden.co.uk/rttest/inner.html)

我试图给它动画，以便`.hide()`淡入/淡出而不是消失。

尝试使用 jQuery Fade 函数，但作为参数`.hide()`但似乎不起作用

```
$("div").click(function () {
      $(this).hide("fade", {}, 1000);
}); 
```

我尝试在我的代码中使用它（参见 JS Fiddle），如下所示：

```
if(allSelected.length > 0){
            $("div.prodGrid > div:not(" + allSelected + ")").hide("fade", {}, 1000);
        } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-04-23T08:54:37.593

```
$("div").click(function () {
  $(this).fadeOut(1000);
}) 
```

还有`fadeIn`和`fadeToggle`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-23T08:57:38.877

如果您想淡出或使用 @Arnelle 的解决方案

替换`$(this).hide("fade", {}, 1000);` 为

```
 $(this).hide("slow");//or $(this).hide(1000); 
```

在隐藏你的 div 之前，传递“slow”会给出一个很好的动画。

通过更改修改了您的小提琴：http: [//jsfiddle.net/Z9ZVk/8/](http://jsfiddle.net/Z9ZVk/8/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T08:59:12.210

尝试使用`fadeout`持续时间而不是使用隐藏。

```
 if(allSelected.length > 0){
        $("div.prodGrid > div:not(" + allSelected + ")").fadeOut(1000);
    } 
```

**[工作小提琴](http://jsfiddle.net/Z9ZVk/7/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-28T13:59:07.953

我已经尝试了以下链接中的代码，它工作正常。

[使用带有淡入淡出的 jQuery .hide() 和 .show() - **现场演示**](http://www.thedevelopertips.com/JQuery/JQuery/Fade-SlideEffects.aspx?id=53)

```
 $("#btnHideShow").click(function () {
            if ($("#btnHideShow").val() == "Hide") {
                $("#imgHideShow").hide(1000);
                $("#btnHideShow").attr("value", "Show");
            }
            else {
                $("#imgHideShow").show(1000);
                $("#btnHideShow").attr("value", "Hide");
            }
        }); 
```

您还可以从下面的链接中使用 Jquery找到**淡入、淡出、上滑和下滑。**

[使用 Jquery 的 fadeIn fadeOut 和 slideUp slideDown 效果](http://www.thedevelopertips.com/JQuery/JQuery/Fade-SlideEffects.aspx?id=53)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-19T11:30:02.080

**隐藏/显示具有渐变效果的 div 以实现平滑过渡**的最佳方法可以通过 CSS 、jQuery 与添加和删除类的组合来实现。

```
$("#div1").addClass('fade in show').removeClass('in hidden');
$("#div2").removeClass('fade in show').addClass('in hidden');
```

```
.hidden {
    display: none;
}

.show {
    display: block;
}

.fade {
    opacity: 0;
    -webkit-transition: opacity 0.15s linear;
    -o-transition: opacity 0.15s linear;
    transition: opacity 0.15s linear;
}

    .fade.in {
        opacity: 1;
    }
```

# visual-studio-2012 - VS2012使用TFS构建定义安装Shield项目构建

> ID：16165010
> 
> 赞同：0
> 
> 时间：2013-04-23T08:52:29.550
> 
> 标签：visual-studio-2012

我有一个`VS2012 sln`包括安装屏蔽安装程序项目。如果我通过解决方案资源管理器手动构建解决方案/项目，一切都会很好。但是，当使用 TFS 构建定义时，我收到以下错误：

`C:\Builds\1\<NAME>\<Build_Definition_Name>\Sources\InstallSetup\InstallSetup.isproj (29)`: 导入的项目

" `C:\Program Files (x86)\MSBuild\InstallShield\2012SpringLimited\InstallShield.targets`" 未找到。确认声明中的路径正确，并且该文件存在于磁盘上。

有人可以帮忙吗？

信息：

```
Using VS 2012
    OS - Win 7 x64 Pro 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T20:56:17.673

您需要在运行构建的机器上安装 InstallShield。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T16:40:37.527

如果有人遇到同样的问题，我可以通过阅读 Flexera 在他们的网站上提到的内容来解决它：[链接](http://helpnet.flexerasoftware.com/installshield20helplib/Content/helplibrary/TFS-Overview.htm)

简要说明：在构建定义的进程选项卡中，确保 MSBuild 平台面向 x86。

我也运行了 64 位 Windows (8.1) 和 Team Foundation Server 2013 Express。

# jsp - 在 request.getParameter 上插入单引号和反斜杠

> ID：16165011
> 
> 赞同：0
> 
> 时间：2013-04-23T08:52:30.147
> 
> 标签：jsp

如何在插入语句中插入单引号（'）和反斜杠（）？

目前，我有这个

```
 String message = request.getParameter("message");

            insert = "INSERT INTO campaign (cid, uid, sender_id, content, dcs, Starttime, endtime, status, lastmodifiedid, creationtime, msisdnfile, number_subscribers) VALUES(" + cid + ", " + adminid + ", '"+ request.getParameter("sender_id") + "', '" + message + "', '" + dcs + "', '" +startDate + " " + request.getParameter("startTime") + "', '" + endTime + "', 'Pending', '" + adminid + "', NOW(), '" +  uploadedfile + "', '" + number_of_subs + "')"; 
```

我需要如果 message.contains(') 或 message.contains('\') 那么它将替换为 (\') 或 (\')。我怎样才能做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:56:08.857

你的意思是这样的？

```
insert = insert.replace("'", "\\'"); 
```

这将在您的插入语句中用文字反斜杠替换所有单引号

# jsf - NullPointerException with primefaces pickList

> ID：16165013
> 
> 赞同：3
> 
> 时间：2013-04-23T08:52:36.527
> 
> 标签：jsf, primefaces

我正在尝试使用选择列表将一些用户从一个列表拖放到另一个列表，如下所示：

```
<p:pickList id="employees" >
    <f:selectItem itemLabel="Test User 1" itemValue="1" />
    <f:selectItem itemLabel="Test User 2" itemValue="2" />
    <f:selectItem itemLabel="Test User 3" itemValue="3" />
</p:pickList> 
```

就像在陈列柜里

[http://www.primefaces.org/showcase/ui/picklist.jsf](http://www.primefaces.org/showcase/ui/picklist.jsf)

但我得到了例外：

```
java.lang.NullPointerException
    at org.primefaces.component.picklist.PickListRenderer.encodeMarkup(PickListRenderer.java:86)
    at org.primefaces.component.picklist.PickListRenderer.encodeEnd(PickListRenderer.java:59)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:881)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at org.primefaces.component.tabview.TabViewRenderer.encodeTabContent(TabViewRenderer.java:279)
    at org.primefaces.component.tabview.TabViewRenderer.encodeContents(TabViewRenderer.java:237)
    at org.primefaces.component.tabview.TabViewRenderer.encodeMarkup(TabViewRenderer.java:127)
    at org.primefaces.component.tabview.TabViewRenderer.encodeEnd(TabViewRenderer.java:71)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:881)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:439)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Apr 23, 2013 11:43:59 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [default] in context with path [/PrimeTemplate] threw exception [null] with root cause
java.lang.NullPointerException
    at org.primefaces.component.picklist.PickListRenderer.encodeMarkup(PickListRenderer.java:86)
    at org.primefaces.component.picklist.PickListRenderer.encodeEnd(PickListRenderer.java:59)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:881)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at org.primefaces.component.tabview.TabViewRenderer.encodeTabContent(TabViewRenderer.java:279)
    at org.primefaces.component.tabview.TabViewRenderer.encodeContents(TabViewRenderer.java:237)
    at org.primefaces.component.tabview.TabViewRenderer.encodeMarkup(TabViewRenderer.java:127)
    at org.primefaces.component.tabview.TabViewRenderer.encodeEnd(TabViewRenderer.java:71)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:881)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:312)
    at com.sun.faces.renderkit.html_basic.GroupRenderer.encodeChildren(GroupRenderer.java:105)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeRecursive(HtmlBasicRenderer.java:304)
    at com.sun.faces.renderkit.html_basic.GridRenderer.renderRow(GridRenderer.java:185)
    at com.sun.faces.renderkit.html_basic.GridRenderer.encodeChildren(GridRenderer.java:129)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:851)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:439)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    at org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:120)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

请告知如何解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:12:26.510

您是否尝试将它与 pojo 类一起使用？所以你需要定义你自己的`converter`类。还有你为什么用`f:selectItem`？`p:pickList`已经具有`value`提供要显示的列表的属性。`itemLabel` `itemValue`属性也应该有所帮助。就像在展示中：

```
p:pickList id="pickList" value="#{pickListBean.cities}" var="city" 
                itemLabel="#{city}" itemValue="#{city}" /> 
```

关于定义自己的转换器类，这些问题可以帮助[1](https://stackoverflow.com/questions/3621251/how-to-write-a-custom-converter-when-working-with-primefaces-components-that-co)和[2](https://stackoverflow.com/questions/7058667/converter-in-primefaces-picklist)。

# excel-2007 - 如何将文本文件的内容逐个单元格插入到excel工作表中？

> ID：16165021
> 
> 赞同：0
> 
> 时间：2013-04-23T08:52:59.307
> 
> 标签：excel-2007

我有一个文本文件，其中包含许多用空格分隔的 3 位数字。现在我想将文本文件中的每个数字放入 Excel 工作表中按行移动的每个单元格中。一旦
第一行被填满，数字应该被插入到第二行的单元格中。

我尝试使用 Excel 2007 的数据选项卡下的“从文本获取外部数据”选项。它显示一条消息“文件包含的数据多于单个工作表可以容纳的数据”。单击“是”以尽可能多地导入数据时，数字将显示在单行的每个单元格中，直到单元格 XFD1。为什么数字不显示在工作表的下一行？

请建议我如何实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:57:19.917

将空格交换为：
逗号 (,)、分号 (;) 或制表符
以分隔成列

使用
enter/return
分隔成行

然后以 CSV 格式打开文件。

# java - Java变量值初始化

> ID：16165027
> 
> 赞同：0
> 
> 时间：2013-04-23T08:53:07.330
> 
> 标签：java, variables, initialization

我是 Java 的初学者，正在努力理解变量初始化的以下问题，希望得到专家的帮助。

给定考试的代码：

```
public class SimpleCalc {
    public int value;
    public void calculate() { value += 7; }
} 
```

和

```
public class MultiCalc extends SimpleCalc {
    public void calculate() { value -= 3; }
    public void calculate(int multiplier) {
        calculate();
        super.calculate();
        value *= multiplier;
    }
    public static void main (String[] args) {
        MultiCalc calculator = new MultiCalc ();
        calculator.calculate(2);
        System.out.println(calculator.value);
    }
} 
```

我的理解是，这需要引发运行时异常，因为变量“值”永远不会获得分配给它的实际初步值（公共 int 值；）。但是，代码的工作和行为就像变量“value”被分配了 0（与 public int value=0; 相同）。有人可以解释一下为什么会这样吗？非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T08:55:09.707

> . 但是，代码的工作和行为就像变量“value”被分配了 0（与 public int value=0; 相同）。

java中的实例变量获取默认值。即，int 获取 0 作为默认值，float 获取 0.0 等等。因此，如果您不初始化，它们将获得默认值。

```
Data Type   Default Value (for fields)
byte    0
short   0
int 0
long    0L
float   0.0f
double  0.0d
char    '\u0000'
String (or any object)      null
boolean false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:03:52.457

> 我的理解是，这需要引发运行时异常，因为变量“值”永远不会获得分配给它的实际初步值（公共 int 值；）。

未能初始化必须初始化的变量由编译器检查并且是*编译时*错误。

运行时错误在运行时引发。即当您运行已成功编译的程序时。未能设置值会导致的唯一运行时错误是 NullPointerException（用于访问空引用），或者如果您除以一个为零的整数，则很少会出现 ArithmeticException。

`final`必须初始化字段和局部变量，但非最终字段将为其默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T08:56:38.153

*Java 中的原始类型*总是被赋予一个默认值。对于 an`int`这始终为 0。

如果您要使用一个`Integer`对象（而不是`int`），如果它没有被初始化，您会看到一个空指针异常被抛出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T08:58:01.813

这种初始化发生在java中的实例变量上。变量“值”是一个实例变量，存在于该类的每个对象中。数据类型的实例变量`int`具有分配给它的默认值 0。不同的数据类型（实例变量）具有不同的默认值。

[例子](http://way2java.com/java-introduction/data-types-default-values-no-garbage/)

# c# - Catel（MVVM 框架）[AS] 不返回正确的程序集名称

> ID：16165028
> 
> 赞同：0
> 
> 时间：2013-04-23T08:53:08.250
> 
> 标签：c#, mvvm, catel

我正在试验并试图了解 Catel 框架。

我知道 Catel 有一个命名约定来注册视图和视图模型。根据文档`[AS]`约定，应替换为程序集名称。这不是我的情况，我必须手动编写程序集名称，如下所示：

```
string aSSname = Assembly.GetExecutingAssembly().GetName().Name;
var viewLocator = serviceLocator.ResolveType<IViewLocator>();
viewLocator.NamingConventions.Add(aSSname + ".Views.[VM]Window"); 
```

以下代码对我不起作用：

```
viewLocator.NamingConventions.Add("[AS]"+ ".Views.[VM]Window"); 
```

**更多信息（*如果有帮助*）：**

上面的所有代码都放在`App.xaml.cs`

我将 viewModel 作为单独的程序集加载：

```
 AppDomain.CurrentDomain.PreloadAssemblies(typeof (App).Assembly.GetDirectory()); 
```

总而言之，我怎样才能使这个例子符合`[AS]`约定。

***我猜：***

我的猜测是 viewLocator 正在寻找错误的程序集。可能在同一个程序集中寻找视图模型。

如果这是正确的，我该如何更改`viewLocator`它在正确的程序集中搜索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:26:11.807

Catel 只能知道用于解析视图的类型的 [AS]。因此，如果您在 MyProject.Views 程序集中的类型中使用 [AS]，它无法解析 MyProject.ViewModels 程序集中的视图模型。

在这种情况下，您必须简单地使用预期的程序集名称指定命名约定（例如 MyProject.Views.[VM]View

您也可以通过使用反射并解析包含 .Views 的所有命名空间来自己动态地执行此操作。在 Catel 的 TypeCache 中的程序集中。

# c - 在一次 send()（tcp 套接字）调用中保证发送的最小数据大小是多少？

> ID：16165042
> 
> 赞同：3
> 
> 时间：2013-04-23T08:53:39.173
> 
> 标签：c, linux, networking, tcp, network-programming

在[select](http://www.unix.com/man-page/linux/2/select/)返回后，为 tcp 套接字设置了 write fd。如果我尝试在该套接字上发送数据，使用[发送](http://www.unix.com/man-page/linux/2/send/)api一次发送的**最小保证数据大小是多少？**我知道我必须运行一个循环以确保发送所有数据。我仍然想了解发送的最低保证数据是多少，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:25:48.953

这以前出现过。我仍在寻找参考答案。

让我们从 send() 的函数原型开始

`ssize_t send(int sockfd, const void *buf, size_t len, int flags);`

对于**阻塞 TCP 套接字**- 所有文档都会建议 send() 和 write() 将返回 [1..len] 之间的值，除非出现错误。然而，现实情况是，我认识的任何人都没有观察到 send() 返回的值不是 -1（错误）或成功案例中的“len”，以表明所有“buf”都是在一次调用中发送的。我从来没有对此感觉良好，所以我进行了防御性编码，只是将我的阻塞发送调用放在一个循环中，直到发送整个缓冲区。

对于**非阻塞 TCP 套接字**- 您应该像最小值为“1”（或错误时为 -1）一样编写代码。不要对最小数据大小做任何假设。

对于 recv()，您应该始终假设 recv() 将在成功情况下返回 1..len 或 0（关闭）或 -1（错误）之间的随机值。不要假设 recv 会返回一个完整的缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:11:15.217

当`select() indicates`套接字可写时，可以保证您可以传输至少一个字节*而不会产生`EWOULDBLOCK`or`EAGAIN`*。没什么可说的，虽然你不会产生不同的错误:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:01:04.527

来自[官方 POSIX 参考](http://pubs.opengroup.org/onlinepubs/009695399/functions/select.html)：

> `O_NONBLOCK`当使用clear 调用输出函数不会阻塞时，无论该函数是否会成功传输数据，都应认为描述符已准备好写入。

如您所见，它实际上并没有提及任何大小，或者写入甚至会成功，只是您将能够在不阻塞的情况下写入套接字。

所以答案是没有最小保证大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:04:38.587

我不认为在 POSIX 层上你可以控制它。send() 将接受您传递到 TCP/IP 堆栈实现的内部缓冲区的任何内容。接下来会发生什么，这已经是另一个故事了，您可以使用相同的 select() 调用来查看它。

如果您询问适合 MTU 的一个数据包的大小（但在途中数据包的分段和重组方面也应谨慎使用此假设）

升级版：

我会在这里回答你的评论。不，您根本不应该为碎片而烦恼。将其留给 TCP/IP 堆栈。您不应该这样做的原因有很多。举个例子。您的应用程序在 OSI 模型的 Application(7) 层上运行（虽然我认为 OSI 模型在大多数情况下是一个邪恶的东西，但它确实适用于这个示例）。从这一层开始，您试图影响位于低得多的层（会话/传输）上的逻辑的功能/属性。你不应该这样做。像 send()、recv() 这样的 POSIX 调用旨在让您的应用程序能够指示底层您需要传递一定数量的数据，并且您可以监控命令的执行 (select())，即所有你必须做的。

UPD2：以上所有内容都主要考虑 NON_BLOCKING 套接字。抱歉忘了提这一点，我已经很久没有在我的项目中使用阻塞套接字了。如果你的套接字阻塞了，我仍然会考虑一次传递所有内容，然后等待另一个线程中的操作结果，因为试图优化这可能会导致非常依赖操作系统/驱动程序的代码。

# excel - EXCEL VBA Select Case 错误检查

> ID：16165048
> 
> 赞同：0
> 
> 时间：2013-04-23T08:53:56.537
> 
> 标签：excel, vba

我想在下面的代码部分中进行错误检查。但是，我不知道如何正确地做到这一点。请提供一些指导。提前致谢。

```
Select Case Trim(y)
    Case Is = ""
        MsgBox ("Empty field!")

    Case (UCase(Left(y, 1)) = "=") '<--This line requires guidance
        MsgBox ("invalid input")
End Select 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:00:20.403

这不会编译。宁可尝试

```
Select Case UCase(Left(Trim(y), 1))
    Case ""
        MsgBox ("Empty field!")

    Case "="
        MsgBox ("invalid input")
End Select 
```

关于如何构建您的结构`select`或是否完全使用它，还有其他选择（例如，您可以选择级联`if`语句）：

```
Select Case Left(y,1)
    Case "="
        MsgBox ("invalid input")

    Case Else
        If Trim(y) = "" Then
           MsgBox ("Empty field!")
        End If
End Select 
```

# c# - 在 C# 应用程序中获取 iPhone 信息

> ID：16165054
> 
> 赞同：0
> 
> 时间：2013-04-23T08:54:10.280
> 
> 标签：c#, iphone, imei

我正在寻找一种从 USB 连接的 iPhone（IMEI、MODEL 等）中检索信息的方法。实际上，我想检索所有可能的信息，因为我正在寻找一种简单的方法来跟踪所有员工的电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T13:30:46.380

使用[https://mobiledevice.codeplex.com](https://mobiledevice.codeplex.com)，您可以阅读一些基本信息，例如 IMEI、MODEL 等。您只需要 iTunesSetup 包中的 CoreFoundation.dll 和 iTunesMobileDevice.dll

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T08:58:52.773

抱歉，只有 Made for iTunes（MacBook，...）中的设备可以通过 30 针基座连接器与 iPhone 通信。这些设备还需要发布协议以供应用程序通过外部附件框架访问它们。

# amazon-web-services - 将现有应用程序 AWS 堆栈转换为 CloudFormation

> ID：16165056
> 
> 赞同：2
> 
> 时间：2013-04-23T08:54:13.867
> 
> 标签：amazon-web-services, amazon-cloudformation

我有一个托管在 AWS 中的网站，它使用了许多 AWS 服务。该环境是使用 Web 控制台和 AWS CLI 的组合手动创建的。我想开始使用 CloudFormation 管理它。我使用过 CouldFormer 工具来创建堆栈模板，但我找不到使用它来管理现有环境的方法。它可以让我创建一个没有太多问题的重复环境，但我真的不想删除整个生产环境，所以我可以使用 CloudFormation 重新创建它。

有没有办法创建现有环境的模板并开始使用 CloudFormation 对其进行更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T10:32:36.650

@Sailor 是对的......不幸的是，我也无法引用可靠的消息来源 - 这只是长时间与 Cloud Formation 合作并对其有足够了解的组合。（也许我是可靠的消息来源）

但是您可以做的是使用您的 Cloud Forward 堆栈，并将您现有的生产基础设施融入其中。

例如，如果您有一些 EC2 映像和一个扩展组 - 将其推出，然后开始终止其他的。你将如何做取决于你的环境，但如果它是为云而设计的，那应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T16:18:05.090

目前没有办法做到这一点。

# ios - UINavigationController 中的 UIInterfaceOrientation

> ID：16165058
> 
> 赞同：0
> 
> 时间：2013-04-23T08:54:30.250
> 
> 标签：ios, uinavigationcontroller, orientation, uiinterfaceorientation

在我的应用程序中，我得到了 2 `UIViewControllers`，第一个是根控制器，`UINavigationController`第二个由第一个通过推送到`UINavigationController's`堆栈调用。

所以第一个视图应该只在纵向，而第二个应该支持所有方向。

我首先写了这段代码：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation{
    return toInterfaceOrientation == UIInterfaceOrientationPortrait;
} 
```

但它仍然旋转到所有方向。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:56:15.163

我为`UINavigationController`. 它在这里描述

[如何在 iOS 6 中强制 UIViewController 为纵向](https://stackoverflow.com/questions/12520030/how-to-force-a-uiviewcontroller-to-portait-orientation-in-ios-6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:49:49.787

我没有使用`uinavigationcontroller`，而是使用了`presentmodalviewcontroller`。这让我可以使用不同的方向管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:40:58.497

我可以知道你使用的是什么IOS版本吗？IOS 6 不推荐使用此方法

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
```

请检查以下 URL 投票的答案是您可能正在寻找的一些内容

[ios 6 中的 UITabBarController 旋转问题](https://stackoverflow.com/questions/12522903/uitabbarcontroller-rotation-issues-in-ios-6/12526152#12526152)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:03:07.607

您执行此操作的最佳方法是将 APP 摘要中的支持方向更改为您喜欢的方向（纵向方向）。

![在此处输入图像描述](https://i.stack.imgur.com/P14p4.png)

然后您可以处理其他页面方向委托方法。

```
-(BOOL)shouldAutorotate{
return YES; 
```

}

-(NSInteger)supportedInterfaceOrientations{ NSInteger 掩码 = 0; if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight]) 掩码 |= UIInterfaceOrientationMaskLandscapeRight; if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeLeft]) 掩码 |= UIInterfaceOrientationMaskLandscapeLeft; if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortrait]) 掩码 |= UIInterfaceOrientationMaskPortrait; if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortraitUpsideDown]) 掩码 |= UIInterfaceOrientationMaskPortraitUpsideDown; 返回掩码；}

# javascript - 有没有办法重新初始化/刷新/重新加载实际的 JavaScript/jQuery 方法？

> ID：16165059
> 
> 赞同：1
> 
> 时间：2013-04-23T08:54:32.633
> 
> 标签：javascript, jquery, jquery-plugins, jrecorder

因此，作为一个小背景故事，我在一个通过 ajax 动态提供一些 HTML 的页面上使用[jRecorder插件用于 jQuery。](http://www.sajithmr.me/jrecorder-jquery)用户可以为幻灯片中的图像录制 .wav 旁白，然后（通过 ajax）翻转到另一个图像，录制另一个旁白，冲洗并重复。结束背景故事！

我相信，这个问题本身更倾向于 jQ/JS。当我再次运行“记录”功能时，我在控制台中收到此错误：

> 未捕获的类型错误：对象 # 没有方法 'jStartRecording'

这*仅*在我切换到第二张图像并单击“记录”时出现。第一个旁白记录很好，可以毫无问题地播放。我想我收到错误是因为我需要重新初始化或重新加载 jRecorder 插件/方法/函数，因为我试图使用一组不同的选项再次调用 jRecorder（在幻灯片中切换到另一个图像之后） . 由于我再次调用它，似乎某些内容尚未完全加载，或者插件操作的每个实例之间存在某种冲突。

**底线：有没有办法重新初始化 jQuery 插件，以便在动态切换参数后再次运行它？**

也许我完全找错了树——我不知道。任何来自不同视角的见解都将不胜感激。非常感谢！

**编辑：**根据要求，这里有一些代码。这[是插件源](http://www.sajithmr.me/jrecorder/jRecorder.js)。希望能帮助到你！

`renderPanes()`每次使用新图像的数据刷新包含旁白记录器的小部件时调用。显然，为了简洁和安全，有些内容已被删除。

```
function renderPanes(type, bucket_id) {
var isRecording = false;

$.getJSON( [endpoint] )
.done(function(json){
    [....]

    $.jRecorder({ 
            host : [endpoint],
            callback_started_recording:     function(){callback_started(); },
            callback_stopped_recording:     function(){callback_stopped(); },
            callback_activityLevel:          function(level){callback_activityLevel(level); },
            callback_activityTime:     function(time){callback_activityTime(time); },
            callback_finished_sending:     function(time){ callback_finished_sending() },
            swf_path : '/assets/js/jrecorder/jRecorder.swf',
    });

    $("#narration_play").click(function(){
        var audio = new Audio("[folder path]/"+bucket_id+".wav");
        audio.play();
    });

    $("#narration_record").click(function(){
        if (!isRecording) {
            $.jRecorder.record(30);
            $("#narration_record").html("<i class='icon-stop'></i> Stop");
            isRecording = true;
        } else {
            isRecording = false;
            $("#narration_record").html("<i class='icon-comment'></i> Record");
            $("#narration_play").removeClass('disabled');
            $.jRecorder.stop();
            $.jRecorder.sendData();
        }
    });
});
} 
```

# linux - !#:3 是什么意思？

> ID：16165063
> 
> 赞同：13
> 
> 时间：2013-04-23T08:54:38.600
> 
> 标签：linux, bash, shell, zsh, ack

```
 curl http://beyondgrep.com/ack-2.02-single-file > ~/bin/ack && chmod 0755 !#:3 
```

`!#:3`from [ack 安装指南](http://beyondgrep.com/install/)是什么意思？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T08:59:55.113

在 bash 或 zsh 中`!`表示历史命令（不是 shebang 行，它`#!`与 bash 或 zsh 本身无关）。

`!#`表示到目前为止键入的整个命令行，并`:3`选择第三个单词，在这种情况下为`~/bin/ack`.

所以该命令等价于：

```
 curl http://beyondgrep.com/ack-2.02-single-file > ~/bin/ack && chmod 0755 ~/bin/ack 
```

# javascript - jQuery dialog() 可以在一个页面上工作，但不能在另一个页面上工作

> ID：16165065
> 
> 赞同：1
> 
> 时间：2013-04-23T08:54:38.813
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个页面，其中包含 jQuery 和 jQuery UI，以从 div 元素创建模式对话框。这工作正常。现在从另一个具有相同 HTML 标记和对相同 JavaScript 文件的引用的页面，我执行完全相同的操作并得到以下错误：

**互联网浏览器 8：**

> 对象不支持此属性或方法

**铬（26.0.1410.64）：**

> 未捕获的类型错误：对象 # 没有方法“对话”

这是两个页面中 HTML 的样子：

```
<div id="dialog-message" class="ui-widget" style="margin-left: auto; margin-right: auto; display: none;" title="Activity Monitoring">
    <p>
        <span id="messageContainer"></span>
    </p>
</div> 
```

这是第二页出错的代码。请注意，第一行正确执行并且“messageContainer”的内容设置正确：

```
$('#messageContainer').html(message);
$('#dialog-message').dialog({
    autoOpen: false,
    bgiframe: true,
    draggable: false,
    height: "auto",
    modal: true,
    open: function (event, ui) { $(".ui-dialog-titlebar-close").hide(); },
    position: { my: "center", at: "center", of: window },
    resizable: false,
    width: 450,
    buttons: dialogButtons
}); 
```

这些是 jQuery 文件的包含。出于隐私原因，我部分省略了路径，但我验证了它，并且它在第一行 jQuery 代码成功执行时工作。第三个 include 是对上面 JavaScript 代码所写文件的引用：

```
<script language="javascript" type="text/javascript" src="http://.../javascript/jquery-1.8.2.min.js"></script>
<script language="javascript" type="text/javascript" src="http://.../javascript/jquery-ui-1.10.2.custom.min.js"></script>
<script language="javascript" type="text/javascript" src="http://.../javascript/Utility.js"></script> 
```

我在这里想念或在看什么吗？我无法找出为什么在一个页面中它可以完美运行，而在另一个页面中我得到了错误。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:00:27.557

检查您是否两次不包含 jquery ui

# mysql - MySQL在字符串中查找字符串的结束位置

> ID：16165068
> 
> 赞同：1
> 
> 时间：2013-04-23T08:54:46.470
> 
> 标签：mysql, string

我正在寻找一种方法来识别字符串中匹配字符串的结束位置。如果我在字段中有以下文本：

```
The book is on the shelf 
```

我想找到文本“on”的结束位置，我可以使用 locate() 找到开始位置，它返回开始位置，但我也在尝试获取结束位置。

我的预期结果将是这样的：

```
Text                     | End Position
----------------------------------------------
The book is on the shelf | 14 
```

我有一个查询，它使用 LIKE 来查找带有通配符的匹配文本。我正在搜索一个可以包含 5000 个字符的文本字段，当然尝试在该字段中查找匹配的文本非常耗时。因此，我希望有一种方法可以基本上显示 LIKE 与文本匹配的位置。也许开始和结束位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:03:56.687

```
SELECT @a := 'The book is on the shelf', 
    LOCATE('on', @a) AS pos_initial, 
    (LOCATE('on', @a) + LENGTH('on')) as pos_final; 
```

# jquery - Sharrre 中缺少 Google+ 计数

> ID：16165069
> 
> 赞同：2
> 
> 时间：2013-04-23T08:54:47.557
> 
> 标签：jquery, css, google-plus, social-media

大约一个月前，我[在 IIS7 上](http://demoportal.esriaustralia.com.au/public/LanguagesOfMelbourne/)设置了一个基本的 Javascript 应用程序。我利用[Sharrre](http://sharrre.com/) jquery 插件向其中添加了一些社交媒体按钮。

几个月来，他们看起来和预期的一样：
**编辑** *下面的截图不是来自我的网站，因为我没有从它工作时的屏幕截图。您可以从[这张图片](http://esriaustraliatechblog.files.wordpress.com/2013/04/thecbd.png?w=455&h=286)中看到它的工作原理。*

![在此处输入图像描述](https://i.stack.imgur.com/cO8fb.png)

但是，我注意到在过去的几周中，无论浏览器和空缓存如何，它都无法正确显示：

![在此处输入图像描述](https://i.stack.imgur.com/OBmoG.png)

我没有对代码进行任何更改，所以寻找一些关于什么原因的建议？

我能想到的可能是因为有更多的人分享它，这个数字导致气球以某种方式移动到其他地方或消失了？我在 Firebug 中看不到任何相关错误，我不相信 IIS 在服务器端被摆弄。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:16:35.310

在您的 map.js 文件中，您可以尝试将 sharrre 初始化代码更新为以下内容吗？

```
$('#shareme').sharrre({
  share: {
    googlePlus: true,
    facebook: true,
    twitter: true,
  },
  buttons: {
    googlePlus: {size: 'tall', annotation:'bubble'},
    facebook: {layout: 'box_count'},
    twitter: {count: 'vertical'},
  },
  enableHover: false,
  enableCounter: false,
  enableTracking: true
}); 
```

（为 googlePlus 添加“注释：'bubble'”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:09:22.553

在您的配置中添加注释：

googlePlus: {size: 'tall', annotation:'bubble'},

# opencv - 如何在自定义检测算法中使用级联分类器？

> ID：16165070
> 
> 赞同：0
> 
> 时间：2013-04-23T08:54:48.663
> 
> 标签：opencv, machine-learning, computer-vision, classification

因此，我创建了自己的 HoG 特征提取器和一个简单的滑动窗口算法，其伪代码如下所示：

```
for( int i = 0; i < img.rows; i++ ) {
   for( int j = 0; j < img.cols; j++ ) {
     extract image ROI from the current position
     calculate features for the ROI
     feed the features into svm.predict() function, to determine whether it's human or not
   }
} 
```

然而，由于它非常慢（尤其是当你包含不同的尺度时），我决定在我的正样本和负样本上使用 openv_traincascade 命令训练一些级联分类器。

opencv_traincascade 为我提供了 cascade.xml、params.xml 和一些 stage.xml 文件

我的问题是如何在我的检测循环中利用这个训练有素的级联分类器？

**编辑**：不，不是detectMultiScale。我使用级联分类器的原因只是为了加快对非对象的检测，我仍然需要使用自己的算法来计算可能的 ROI 的分数。对困惑感到抱歉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:27:18.557

按照关于对象检测的 opencv[文档](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html?highlight=cascadeclassifier#CascadeClassifier)，您必须创建级联检测器对象并 ::load 要应用的级联（您生成的 xml 文件）。::detectMultiScale 用于通过滑动不同比例和大小的窗口并合并高置信度的接近样本来填充当前帧中检测到的对象的 std::vector。

代码[在这里](http://code.opencv.org/projects/opencv/repository/revisions/master/raw/samples/cpp/tutorial_code/objectDetection/objectDetection.cpp)！[同样的问题在这里](https://stackoverflow.com/questions/16099272/how-to-use-cascade-xml-for-object-recognition-in-opencv/16100248#16100248)回答？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:11:30.943

为了使用级联分类器，您必须调用该[`CascadeClassifier::load`](http://docs.opencv.org/modules/objdetect/doc/cascade_classification.html#cascadeclassifier-load)函数（将生成的 XML 文件的路径作为参数传递）。每当您想检查感兴趣的对象是否存在时，您都应该调用`CascadeClassifier::detect`or`CascadeClassifier::detectMultiScale`函数。

# asp.net - 只需将写入 xml 转储到屏幕

> ID：16165071
> 
> 赞同：1
> 
> 时间：2013-04-23T08:54:49.063
> 
> 标签：asp.net, xml, vb.net

XML/ASP.net VB 新手在这里玩得开心，大海捞针。

我只想将一些 XML 转储到屏幕上！大量站点告诉我如何迭代节点，xpath 我直接进入。我只是希望全部放映。

```
Dim doc As New XmlDocument
doc.Load("remote.xml")

Dim writer as XmlTextWriter = new XmlTextWriter("debug.xml",nothing)
writer.Formatting = Formatting.Indented
doc.Save(writer) 
```

将它写入文件做得很出色，但我希望它出现在屏幕上。doc.print（作家）.....

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:11:00.473

用你的文档的 innerXml 试试。确保对其进行 HtmlEncode 以使其显示。用 id='ltXml' 在你的 aspx 上粘贴一个文本控件，然后是这样的：

```
Dim doc As New XmlDocument()
doc.Load(Server.MapPath("~/remote.xml"))

ltXml.Text = Server.HtmlEncode(doc.InnerXml) 
```

由 OP 根据评论进行编辑。

让您的类中的函数返回 Xml 字符串。

```
Private Class [MyClass]
        Public Shared Function getXml() As String
        Dim doc As New XmlDocument()
        doc.Load("somefile.xml")

        Return HttpContext.Current.Server.HtmlEncode(doc.InnerXml)
    End Function
End Class 
```

然后在网页后面的 aspx 代码中调用类函数：

```
ltXml.Text = [MyClass].getXml() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:19:10.487

我建议使用现代[`XDocument`类](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)而不是旧的、已弃用的`XmlDocument`.

[XDocument.ToString](http://msdn.microsoft.com/en-us/library/bb341005.aspx)已经返回了格式良好的 XML 版本，因此您需要做的就是：

```
Dim doc As XDocument = XDocument.Load("remote.xml")
Dim formatted As String = doc.ToString() 
```

# ruby - 如何使用 nokogiri 在指定元素之后选择元素？

> ID：16165072
> 
> 赞同：1
> 
> 时间：2013-04-23T08:54:50.267
> 
> 标签：ruby, nokogiri

以下表为例，我知道如何`<td>'Title_A'</td>`通过 xapth 的 text() 函数进行匹配，有没有直接的方法来选择`<td> text_unknown </td>`它之后的？：

```
<table>
    <tr><td rowspan=2> Title_A </td>    <td> text_unknown </td></tr>
                                    <tr><td> text_unknown </td></tr>

    <tr><td rowspan=2> Title_B </td>    <td> text_unknown </td></tr>
                                    <tr><td> text_unknown </td></tr>

    <tr><td rowspan=4> Title_C </td>    <td> text_unknown </td></tr>
                                    <tr><td> text_unknown </td></tr>
                                    <tr><td> text_unknown </td></tr>
                                    <tr><td> text_unknown </td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:21:15.813

假设您将 'Title_A' 与以下 XPath 匹配：

```
//td[text()='Title_A'] 
```

下一个单元格将是

```
//td[text()='Title_A']/following-sibling::td[1] 
```

或者，如果您已经在变量中包含标题单元格：

```
title_a = doc.xpath("//td[text()='Title_A']") 
```

然后你可以使用 DOM 方法`next_sibling`：

```
next_cell = title_a.next_sibling 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:42:36.693

对 html 使用 css，对 xml 使用 xpath。`+`是 css 下一个相邻兄弟选择器。

```
doc.at('td[text()="Title_A"] + td') 
```

我看到 Title_A 周围有一些空格，所以也许：

```
doc.at('td[text()*="Title_A"] + td') 
```

# php - match() 函数和匹配变量

> ID：16165082
> 
> 赞同：0
> 
> 时间：2013-04-23T08:55:13.493
> 
> 标签：php, javascript, var

现在我有一个文本输入和一个 php 变量。

`$price = 200;`
`<input type="text" name="promotion_code">`

在用户输入 'promotion_code' 的值后，没有提交按钮或任何链接。
它可以匹配该页面上 javascript 之间的“promotion_code”。让我们说javascript：

`var str="123203";`

所以我想将 'promotion_code' 与 'var str' 匹配。
如果匹配则`$price = $price - 10;`
如果不匹配则 $price 值不会改变..任何可以帮助或任何方法来解决这个问题？

笔记 ：！！被告知。此表单没有提交按钮.. 比较过程应该在用户输入时及时进行`promotion_code`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:59:46.453

你不应该用 JavaScript 来做这件事，它不够安全。任何人都可以通过查看您页面的源代码来查看您的 JavaScript 代码。

尝试使用 ajax 请求来实现。

```
jQuery.ajax({
    type : "post",
    url : "request.php",
    data : "code=" +jQuery("input[name=promotion_code]").val(),
    success : function(ret){
        jQuery("#price").text(ret);
    }
}); 
```

在这里，您使用值代码调用页面 request.php

这里可以是 request.php ：

```
$price = 200;
$code = $_POST["code"];
if( $code == "123203" ){
    $price -= 10;
}
return $price; 
```

然后使用 request.php 页面返回的数据更新价格字段。

当然，您必须调整该代码。我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:08:52.327

确保在服务器上执行此操作，因为任何人都可以看到页面源代码中的代码。此外 $price 在服务器上，并且客户端值对服务器不可用，直到您使用例如 AJAX 将请求发送回服务器

所以像

```
<form action="purchase.php" id="form1">
  Promotion code: <input type="text" name="promotion_code" id="prCode" />
  <input type="button" id="prCodeBut" value="Apply" />
  Price: <input type="text" readonly="readonly" 
           name="finalprice" id="fPrice" value="<?PHP echo $price; ?>" />
</form> 
```

**JavaScript**

[演示 1 - 使用点击](http://jsfiddle.net/mplungjan/Y68qN/)

```
var orgPrice = <?PHP echo $price; ?>;
window.onload=function() {
  document.getElementById("prCodeBut").onclick=function(){
    // hardcoding the promocode is NOT recommended
    if (document.getElementById("prCode").value == "<?php echo $promocode; ?>") {
      document.getElementById("fPrice").value=orgPrice-10;
    }
  }
} 
```

[演示 2 使用 onkeyup](http://jsfiddle.net/mplungjan/FwvYK/)

```
var orgPrice = <?PHP echo $price; ?>;
window.onload=function() {
  document.getElementById("prCode").onkeyup=function(){
    // hardcoding the promocode is NOT recommended
    if (document.getElementById("prCode").value == "<?php echo $promocode; ?>") {
      document.getElementById("fPrice").value=orgPrice-10;
    }
  }
} 
```

[DEMO 3 使用 onblur](http://jsfiddle.net/mplungjan/HUc59/)

```
var orgPrice = <?PHP echo $price; ?>;
window.onload=function() {
  document.getElementById("prCode").onblur=function(){
    // hardcoding the promocode is NOT recommended
    if (document.getElementById("prCode").value == "<?php echo $promocode; ?>") {
      document.getElementById("fPrice").value=orgPrice-10;
    }
  }
} 
```

**Ajax 隐藏促销代码**

```
// delay from http://stackoverflow.com/a/1909508/295783
var delay = (function(){
  var timer = 0;
  return function(callback, ms){
    clearTimeout (timer);
    timer = setTimeout(callback, ms);
  };
})();

$(function() {
  $("#prCodeBut").on("keyup",function() {
    delay(function() { 
      $.get("checkPromo.php",{promotion: $("#prCode").val()},function(data) {
        $("#fPrice").val(data);
      }); 
    },300);
  });
}); 
```

# postgresql - PostgreSQL 聚合组的性能有限

> ID：16165084
> 
> 赞同：0
> 
> 时间：2013-04-23T08:55:29.987
> 
> 标签：postgresql, query-optimization, postgresql-performance

我是 PostgreSQL 的新手。有没有办法提高以下查询的执行时间：

```
SELECT s.id, s.name, s.url,
       (SELECT array_agg(p.url)
        FROM (
            SELECT url
            FROM pages
            WHERE site_id = s.id ORDER BY created DESC LIMIT 5
        ) as p
       ) as last_pages
FROM sites s 
```

我还没有找到如何将`LIMIT`子句插入聚合调用，作为排序。

table 中有`created`( `timestamp`) 和`site_id`( )的索引，但是很遗憾，没有to的外键。该查询旨在返回一个站点列表，其中包含 5 个最近创建的页面的子列表。`integer``pages``sites.id``pages.site_id`

PostgreSQL 版本是 9.1.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-29T07:41:08.220

您需要从像数据库管理系统一样思考开始。您还需要非常仔细地考虑您从数据库中询问的内容。

您的基本问题是，当顺序扫描可能快得多时，您可能会在这里发生大量单独的索引调用。由于您有必须关联的子查询，因此您当前的查询给计划者的灵活性很小。

一个更好的方法是使用视图（内联或非内联）和窗口函数：

```
 SELECT s.id, s.name, s.url, array_agg(p.url)
     FROM sites s
     JOIN (select site_id, url, 
                  row_number() OVER (partition by site_id order by created desc) as num
             from pages) p on s.id = p.site_id
    WHERE num <= 5; 
```

这可能会将大量索引扫描更改为单个大型顺序扫描。

# kendo-ui - IE9 中 Jquery UI 选项卡内的 Kendo UI 编辑器中未呈现有序列表

> ID：16165085
> 
> 赞同：0
> 
> 时间：2013-04-23T08:55:37.973
> 
> 标签：kendo-ui

放置在 Jquery UI 选项卡中时，有序列表在 IE9 中将数字显示为零。在包括（IE7，IE8）在内的所有其他浏览器中都能完美运行。谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T16:13:44.110

似乎是[在 IE9 中显示全零的有序列表](https://stackoverflow.com/questions/5584500/ordered-list-showing-all-zeros-in-ie9)的副本（不幸的是，由于这个原因无法关闭它）。

简而言之，它不是真正的 jQuery 或 Kendo-UI 问题，而是已知的 IE9 问题。

# javascript - 如何使用填充的属性 dataTransfer 创建事件？

> ID：16165087
> 
> 赞同：5
> 
> 时间：2013-04-23T08:55:48.383
> 
> 标签：javascript, internet-explorer, events, simulate

我有带有 javascript 代码的本地 html 文件。

我应该通过测试来介绍拖放。

它只使用 IE。

在 javascript 代码事件中捕获“drop”并分析 dataTransfer (e.dataTransfer.getData("Text")) 的内容。

在测试中，我用下一个代码模拟事件：

```
event = document.createEventObject(); 
```

这里创建了包含 dataTransfer == null 的事件。

写是不可能的，因为属性是只读的。

```
target.fireEvent("ondrop", event); 
```

事件在 javascript 代码中触发，但 dataTransfer 为空。

我应该在 dataTransfer 中放置一些测试元素。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-07T21:03:35.360

您可以尝试使用 CustomEvent 接口，但我不确定它是否适用于 IE。

```
var event = new CustomEvent('build', { 'detail': elem.dataset.time }); 
```

[https://developer.mozilla.org/en-US/docs/Web/API/document.createEvent#Adding_custom_data_.E2.80.93_CustomEvent](https://developer.mozilla.org/en-US/docs/Web/API/document.createEvent#Adding_custom_data_.E2.80.93_CustomEvent)

# c# - Regex 仅获取 3.X 的字符串

> ID：16165088
> 
> 赞同：2
> 
> 时间：2013-04-23T08:55:49.597
> 
> 标签：c#, regex

我有这样的字符串：

```
 - 3.1 TitleA
 - 3.1.1 TitleB
 - 3.1.1.1 TitleC
 - 3.2 TitleD
 - 3.2.1 TitleE
 - 3.2.2 TitleF
 - 3.3 TitleG 
```

我只想获得以 3.XI 开头的标题，尝试使用 (C#) ：

```
Match m = Regex.Match(table_of_content[i], "3.[1-999]"); 
```

但是它给了我这样的标题，例如`3.2.1` 我如何才能获得以 3.X 开头的标题标题？

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:00:39.717

一个快速的解决方案是：

```
@" 3\.\d+ " 
```

这假设在节号之前和之后有一个空格。

如果假设适用，这是避免匹配情况的最简单解决方案，例如：

*   `13.2`（之前出现的其他数字`3`）
*   `2.3.2`（`3`不是最高级别的节号）
*   `3.10.1`（2级以上小节）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:05:23.103

我认为他只需要 3.x（不是 3.xx）

```
(?<!\w|\.)3.\d+(?!\w|\.) 
```

好的，然后这个

# java - 场景生成器检查器

> ID：16165090
> 
> 赞同：0
> 
> 时间：2013-04-23T08:55:52.620
> 
> 标签：java, javafx-2, javafx, scenebuilder

我正在使用`Scene Builder`，我想复制检查员的外观

![在此处输入图像描述](https://i.stack.imgur.com/5jwLO.png)

**我的问题：**

1.  填充，大小，位置区域...等面板是在一个内`Scroll Pane`还是只是两个分隔符，中间有一个标签？它看起来像一个`Swing` `TitledBorder` `Jpanel`.

2.  如果是面板，使用了什么以及如何设置标题？

3.  如果是分隔符，如何默认设置实线分隔线而不是虚线？我查看了 CSS 分析器，但找不到正确的 CSS 语句。

4.  `fx:id`字段有命名约定吗？我只找到了一些全部用小写字母编写的示例，例如“maintabbedpane”。

# wordpress - 菜单中的 Wordpress、魔术字段和帖子类型

> ID：16165095
> 
> 赞同：0
> 
> 时间：2013-04-23T08:56:10.367
> 
> 标签：wordpress

前段时间我使用了魔法场，我不记得让我的帖子类型显示在我的菜单中时遇到任何问题。

据我记得并且能够在线研究，我需要做的就是以下几点：

1.  在 Magic 字段中创建新的 Post 类型
2.  在高级选项中，确保选中“在导航菜单中显示”
3.  添加新的自定义帖子
4.  浏览至外观 > 菜单
5.  选择我的主导航菜单
6.  在左侧选择帖子类型

但是，当我到达 #5 时，我记得它没有显示在左侧。

我在我的本地机器上创建了一个新的开发站点，安装了 Wordpress 3.4 和 Magic field 2.2.1，然后我尝试创建一个帖子类型并将其添加到菜单中，但这再次没有在菜单选项中的任何地方显示给我。

我似乎无法找到它。

我什至浏览了新帖子类型的数据库条目，只是为了检查 JSON（至少我非常确定它是 JSON），而且它似乎正确地设置了在 navs 中显示的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T20:17:54.153

也许您需要设置顶部面板，称为“屏幕选项”。您必须选择您的自定义帖子类型才能在左侧菜单中显示。

# python - 如何在python中获取数组的索引长度

> ID：16165098
> 
> 赞同：0
> 
> 时间：2013-04-23T08:56:20.563
> 
> 标签：python, arrays

我有一个类似的python代码

```
 for i in re.finditer('something(.+?)"', html): 
```

我现在试图找出在进入那个循环之前它要循环多少次......换句话说，数组 i 的长度。谁能给我一个替代但类似的代码，我得到循环的长度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:59:33.343

```
x = list(re.finditer('something(.+?)"', html))

if len(x)
     ....

for i in x:
     .... 
```

`findall`不是一个适当的替代品，因为它返回字符串，而不是匹配对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T08:57:13.620

你不能这样做，`re.finditer`因为它返回一个**迭代器**，它不知道它什么时候完成，直到它完成（因为它在每次迭代中找到下一个匹配）......，你必须使用`re.findall`.

```
matches = re.findall('something(.+?)"', html)
num_loops = len(matches) 
```

或者如果您确实需要匹配对象，请使用@thg435 的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T08:57:50.343

`finditer`返回找到的结果。没有办法`finditer`提前告诉你要循环多少次。

你需要使用别的东西。要么`re.findall`或可能`re.search`得到长度

# wpf - 如何为数据网格列添加模板？

> ID：16165099
> 
> 赞同：1
> 
> 时间：2013-04-23T08:56:20.553
> 
> 标签：wpf, datagrid, itemsource

我正在向数据网格动态添加 itemsource：

```
datagrid.ItemsSource = _table.DefaultView;
            foreach (DataColumn column in _table.Columns)
            {
                if (column.DataType == typeof(bool))
                {
                    var dgrcl = new DataGridCheckBoxColumn
                        {
                            IsThreeState = false,
                            Header = column.Caption,
                            Binding = new Binding(column.ColumnName),
                            Width = new DataGridLength(15, DataGridLengthUnitType.Star)
                        };
                    datagrid.Columns.Add(dgrcl);
                }
                else
                {
                    var dgrcl = new DataGridTextColumn();
                    dgrcl.Binding = new Binding(column.ColumnName);
                    dgrcl.Header = column.Caption;
                    datagrid.Columns.Add(dgrcl);
                }
            } 
```

但是，如果我向 Datagrid 添加一个新行（带有复选框列） - 复选框是三态的。我尝试在 xaml 中添加下一个代码：

```
<Style TargetType="CheckBox" x:Key="dgrChkBoxStyle">
            <Setter Property="IsThreeState" Value="False"></Setter>
            <Setter Property="IsChecked" Value="True"></Setter>
        </Style>   
<DataGrid Name="datagrid" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" Margin="10" VerticalAlignment="Stretch" AlternatingRowBackground="Honeydew" AlternationCount="2" AutoGenerateColumns="False">
            <DataGridCheckBoxColumn>
                <DataGridCheckBoxColumn.ElementStyle>
                    <Style TargetType="CheckBox" BasedOn="{StaticResource dgrChkBoxStyle}"></Style>
                </DataGridCheckBoxColumn.ElementStyle>
            </DataGridCheckBoxColumn>
        </DataGrid> 
```

但是有一个例外是“在使用 ItemsSource 之前，Items 集合必须为空”。

我是 WPF 的新手，请多多指教，如何制作只有两种状态的复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:57:19.180

you should write the column definition like so :

```
 <DataGrid Name="datagrid" Grid.ColumnSpan="2" HorizontalAlignment="Stretch" Margin="10" VerticalAlignment="Stretch" AlternatingRowBackground="Honeydew" AlternationCount="2" AutoGenerateColumns="False">
        <DataGrid.Columns>
            <DataGridCheckBoxColumn>
                <DataGridCheckBoxColumn.ElementStyle>
                    <Style TargetType="CheckBox" BasedOn="{StaticResource dgrChkBoxStyle}"></Style>
                </DataGridCheckBoxColumn.ElementStyle>
            </DataGridCheckBoxColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:11:20.813

您可以`DataGridCheckBoxColumn`直接访问。怎么样？

```
<Style x:Key="DgCheckBoxColumnStyle" x:TargetType="{x:Type DataGridCheckBoxColumn}">
    <Setter Property="IsThreeState" Value="False" />
    <Setter Property="Binding" Value="{Binding <SomePath>, TargetNullValue="True"}" />
</Style>

<DataGridCheckBoxColumn Style="{StaticResource DgCheckBoxColumnStyle}" /> 
```

有关详细信息，请参阅[msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridcheckboxcolumn%28v=vs.100%29.aspx)。应该比您尝试实现它的方式更容易。

如果您确实想访问列中的控件，则必须为 DataGridBoundColumn.ElementStyle 提供一种样式，为[DataGridBoundColumn.EditingElementStyle](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridboundcolumn.editingelementstyle%28v=vs.100%29.aspx)提供[一种](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagridboundcolumn.elementstyle%28v=vs.100%29.aspx)样式。

# c# - 跨流程测量时间

> ID：16165109
> 
> 赞同：4
> 
> 时间：2013-04-23T08:56:41.923
> 
> 标签：c#, .net, datetime, benchmarking

我需要测量同一台机器上两个进程之间的通信延迟。我想出的最好方法是将消息序列化`DateTime.UtcNow`（`DateTime.Now`似乎非常慢，以至于它极大地扭曲了我的测量结果）并将其与`DateTime.UtcNow`另一个消息进行比较过程。这是最好的吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:04:15.227

如果您的目标是测量和比较进程之间的确切时间，则应使用 Windows API 函数[`QueryPerformanceCounter()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644904%28v=vs.85%29.aspx)。它返回的值在进程之间是同步的，因为它返回一个内部处理器值。

`Stopwatch`也在`QueryPerformanceCounter()`其实现中使用，但它不公开返回的绝对值，因此您不能使用它。

您将不得不[使用 P/Invoke 来调用 QueryPerformanceCounter()](http://www.pinvoke.net/default.aspx/kernel32/QueryPerformanceCounter.html)但这很容易。

使用 P/Invoke 的开销很小。[从 MSDN 文档](http://msdn.microsoft.com/en-us/library/aa712982.aspx)：

> PInvoke 每次调用的开销在 10 到 30 条 x86 指令之间。除了这个固定成本之外，编组还会产生额外的开销。在托管和非托管代码中具有相同表示的 blittable 类型之间没有编组成本。例如，在 int 和 Int32 之间进行转换是免费的。

由于从返回的值`QueryPerformanceCounter()`是长的，因此不会产生额外的封送处理成本，因此您只剩下 10-30 条指令的开销。

另请参阅[此 MSDN 博客](http://blogs.msdn.com/b/kirillosenkov/archive/2012/01/10/datetime-utcnow-is-generally-preferable-to-datetime-now.aspx)，其中指出 UtcNow 的分辨率约为 10 毫秒 - 与性能计数器的分辨率相比，这是相当大的。（虽然我实际上不相信这适用于 Windows 8；我的测量结果似乎表明 UtcNow 具有毫秒分辨率）。

无论如何，很容易证明 P/Invoking QueryPerformanceCounter() 比使用 DateTime.UtcNow 具有更高的分辨率。

如果您运行以下代码的发布版本（从 OUTSIDE 调试器运行），您会看到几乎所有 DateTime.UtcNow 已用时间都是 0，而所有 QueryPerformanceCounter() 都是非零的。

这是因为 DateTime.UtcNow 的分辨率不足以测量调用的经过时间`Thread.Sleep(0)`，而`QueryPerformanceCounter()`它是。

```
using System;
using System.Runtime.InteropServices;
using System.Threading;

namespace ConsoleApplication1
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            for (int i = 0; i < 100; ++i)
            {
                var t1 = DateTime.UtcNow;
                Thread.Sleep(0);
                var t2 = DateTime.UtcNow;

                Console.WriteLine("UtcNow elapsed = " + (t2-t1).Ticks);
            }

            for (int i = 0; i < 100; ++i)
            {
                long q1, q2;

                QueryPerformanceCounter(out q1);
                Thread.Sleep(0);
                QueryPerformanceCounter(out q2);

                Console.WriteLine("QPC elapsed = " + (q2-q1));
            }
        }

        [DllImport("kernel32.dll", SetLastError=true)]
        static extern bool QueryPerformanceCounter(out long lpPerformanceCount);
    }
} 
```

现在我意识到调用 QueryPerformanceCounter() 的开销可能非常高，以至于它测量的是调用需要多长时间，而不是需要多长时间`Thread.Sleep(0)`。我们可以通过两种方式消除它：

首先，我们可以修改第一个循环如下：

```
for (int i = 0; i < 100; ++i)
{
    var t1 = DateTime.UtcNow;
    long dummy;
    QueryPerformanceCounter(out dummy);
    Thread.Sleep(0);
    QueryPerformanceCounter(out dummy);
    var t2 = DateTime.UtcNow;

    Console.WriteLine("UtcNow elapsed = " + (t2-t1).Ticks);
} 
```

现在 UtcNow 应该计时 Thread.Sleep(0)*和*对 QueryPerformanceCounter() 的两次调用。但如果你运行它，你仍然会看到几乎所有经过的时间都为零。

其次，我们可以计算调用 QueryPerformanceCounter() 一百万次需要多长时间：

```
var t1 = DateTime.UtcNow;

for (int i = 0; i < 1000000; ++i)
{
    long dummy;
    QueryPerformanceCounter(out dummy);
}

var t2 = DateTime.UtcNow;
Console.WriteLine("Elapsed = " + (t2-t1).TotalMilliseconds); 
```

在我的系统上，调用 QueryPerformanceCounter() 一百万次大约需要 32 毫秒。

最后，我们可以计算调用 DateTime.UtcNow 一百万次需要多长时间：

```
var t1 = DateTime.UtcNow;

for (int i = 0; i < 1000000; ++i)
{
    var dummy = DateTime.UtcNow;
}

var t2 = DateTime.UtcNow;
Console.WriteLine("Elapsed = " + (t2-t1).TotalMilliseconds); 
```

在我的系统上大约需要 10 毫秒，这比调用 QueryPerformanceCounter() 快大约 3 倍。

**总之**

因此 DateTime.UtcNow 的开销低于 P/Invoking QueryPerformanceCounter()，但它的分辨率要低得多。

所以你付了钱，你就可以选择了！

# oracle - 可以在 Oracle 上停用隐式提交吗？

> ID：16165114
> 
> 赞同：0
> 
> 时间：2013-04-23T08:56:48.353
> 
> 标签：oracle, transactions

是否可以停用在 Oracle 数据库上的创建、删除、重命名、更改语句之后调用的隐式提交？

简单的例子：

```
CREATE TABLE TEST.test2x (id NUMBER(10,0));
ALTER TABLE TEST1.test2x ADD PRIMARY KEY (id); 
```

由于模式错误，alter 语句将失败，但现在已经创建了表。那么，在使用 create、alter 等时，是否有可能绕过这种行为，只提交全部或全部不提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:57:07.297

有一种方法可以做“全有或全无”的 DDL，但只能以非常有限的方式 -[`CREATE SCHEMA`](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_6014.htm)声明。

例如，以下`CREATE SCHEMA`语句尝试创建两个表，`T1`并且`T2`. 但是，DDL`T2`不正确。两个表最终都没有被创建。

```
SQL> REM Verify the tables do not already exist.
SQL> SELECT * FROM T1;
SELECT * FROM T1
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> SELECT * FROM T2;
SELECT * FROM T2
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> CREATE SCHEMA AUTHORIZATION TEST
  2      CREATE TABLE T1
  3      (
  4          X NUMBER PRIMARY KEY
  5      )
  6      CREATE TABLE T2
  7      (
  8          -- Try to reference a column that does not exist.
  9          X NUMBER REFERENCES T1(Y)
 10      );
        X NUMBER REFERENCES T1(Y)
                 *
ERROR at line 9:
ORA-02428: could not add foreign key reference
ORA-00904: "Y": invalid identifier

SQL> REM Verify the tables still don't exist.
SQL> SELECT * FROM T1;
SELECT * FROM T1
              *
ERROR at line 1:
ORA-00942: table or view does not exist

SQL> SELECT * FROM T2;
SELECT * FROM T2
              *
ERROR at line 1:
ORA-00942: table or view does not exist 
```

但是，`CREATE SCHEMA`它的局限性在于它仅支持`CREATE TABLE`,`CREATE VIEW`和`GRANT`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:51:57.417

您可以在 plsql“开始/结束”块内运行这些命令。然后捕获并处理错误。

IE。

```
begin
  execute immediate 'create table xyz (x number)';
  execute immediate 'alter table bad.xyz add';
exception
  when others then
    execute immediate 'drop table xyz';
end; 
```

# javascript - 在特定字符jquery之后删除引号中的字符

> ID：16165118
> 
> 赞同：1
> 
> 时间：2013-04-23T08:56:59.383
> 
> 标签：javascript, jquery, string, replace

我有一个这样的字符串

```
{'Salary':'Basic_Salary - ( ESI * .5 ) - Employee_PF + Bonus','Gross_Salary':'( Salary - Tax )','Employee_PF': ''} 
```

如果我有另一个字符串`'Salary':'',`

我想替换 Salary 并得到结果

```
{'Salary':'Basic_Salary - ( ESI * .5 ) - Employee_PF + Bonus','Gross_Salary':'( Salary - Tax )','Employee_PF': ''} 
```

我可以轻松检查`'Salary'`. 我坚持的是，如何在`''`之后替换字符串`'Salary':`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:02:54.020

您基本上正在使用作为字符串出现的 JSON 对象，在这种情况下，您可以将此字符串解码为 JavaScript 对象，然后将属性修改为任何其他对象

```
var obj = jQuery.parseJSON({'Salary':'Basic_Salary - ( ESI * .5 ) - Employee_PF + Bonus','Gross_Salary':'( Salary - Tax )','Employee_PF': ''}); 
```

然后 ：

```
obj.Salary = "Whatever you like"; 
```

然后你总是可以将它转换回字符串

```
JSON.stringify 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:14:34.183

```
var str = "{'Salary':'Basic_Salary - ( ESI * .5 ) - Employee_PF + Bonus','Gross_Salary':'( Salary - Tax )','Employee_PF': ''}";
var obj = JSON.parse(str);
    obj.Salary = '';
str = JSON.stringify(obj); 
```

# dns - www 别名的 DNS CNAME 不起作用

> ID：16165127
> 
> 赞同：0
> 
> 时间：2013-04-23T08:57:21.297
> 
> 标签：dns, hosting, cname

我在一家公司（公司 1）注册了一个域名。由于托管问题，我将托管转移到另一家公司（公司 2），并将“公司 2”名称服务器注册为 Çompany 1 的 NS 记录。

到目前为止一切顺利，一切正常。除了一件事，www 别名不再起作用。在“公司 1”的 DNS 设置中，我将 www.mydomain.com 注册为 mydomain.com 的 CNAME，但这似乎不起作用。

有谁知道我必须如何注册 www.mydomain.com ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:04:36.337

“公司 2”是否具有您的域的 SOA 还是“公司 1”？如果您不确定，请使用 [DIG](http://en.wikipedia.org/wiki/Dig_%28command%29)命令找出答案。（太低代表评论）

# algorithm - Lazy Shuffle Algorithms

> ID：16165128
> 
> 赞同：7
> 
> 时间：2013-04-23T08:57:26.047
> 
> 标签：algorithm, language-agnostic, lazy-evaluation, shuffle

I have a large list of elements that I want to iterate in random order. However, I cannot modify the list and I don't want to create a copy of it either, because 1) it is large and 2) it can be expected that the iteration is cancelled early.

```
List<T> data = ...;
Iterator<T> shuffled = shuffle(data);
while (shuffled.hasNext()) {
    T t = shuffled.next();
    if (System.console().readLine("Do you want %s?", t).startsWith("y")) {
        return t;
    }
}
System.out.println("That's all");
return t; 
```

I am looking for an algorithm were the code above would run in `O(n)` (and preferably require only `O(log n)`space), so caching the elements that were produced earlier is not an option. I don't care if the algorithm is biased (as long as it's not obvious).

(I uses pseudo-Java in my question, but you can use other languages if you wish)

Here is the best I got so far.

```
Iterator<T> shuffle(final List<T> data) {
    int p = data.size();
    while ((data.size() % p) == 0) p = randomPrime();
    return new Iterator<T>() {
        final int prime = p;
        int n = 0, i = 0;
        public boolean hasNext() { return i < data.size(); }
        public T next() {
            i++; n += prime;
            return data.get(n);
        }
    }
} 
```

Iterating all elements in `O(n)`, constant space, but obviously biased as it can produce only `data.size()` permutations.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T11:17:38.243

The easiest shuffling approaches I know of work with indices. If the `List` is not an `ArrayList`, you may end up with a very inefficient algorithm if you try to use one of the below (a `LinkedList` does have a `get` by ID, but it's O(n), so you'll end up with O(n^2) time).

If O(n) space is fine, which I'm assuming it's not, I'd recommend the [Fisher-Yates / Knuth shuffle](http://en.wikipedia.org/wiki/Knuth_shuffle#The_modern_algorithm), it's O(n) time and is easy to implement. You can optimise it so you only need to perform a single operation before being able to get the first element, but you'll need to keep track of the rest of the modified list as you go.

**My solution:**

Ok, so this is not very random at all, but I can't see a better way if you want less than O(n) space.

It takes O(1) space and O(n) time.

There may be a way to push it up the space usage a little and get more random results, but I haven't figured that out yet.

It has to do with [relative primes](http://en.wikipedia.org/wiki/Relatively_prime). The idea is that, given 2 relative primes `a` (the generator) and `b`, when you loop through `a % b`, `2a % b`, `3a % b`, `4a % b`, ..., you will see every integer 0, 1, 2, ..., b-2, b-1, and this will also happen before seeing any integer twice. Unfortunately I don't have a link to a proof (the wikipedia link may mention or imply it, I didn't check in too much detail).

I start off by increasing the length until we get a prime, since this implies that any other number will be a relative prime, which is a whole lot less limiting (and just skip any number greater than the original length), then generate a random number, and use this as the generator.

I'm iterating through and printing out all the values, but it should be easy enough to modify to generate the next one given the current one.

Note I'm skipping `1` and `len-1` with my `nextInt`, since these will produce `1,2,3,...` and `...,3,2,1` respectively, but you can include these, but probably not if the length is below a certain threshold.

You may also want to generate a random number to multiply the generator by (mod the length) to start from.

Java code:

```
static Random gen = new Random();

static void printShuffle(int len)
{
  // get first prime >= len
  int newLen = len-1;
  boolean prime;
  do
  {
     newLen++;
     // prime check
     prime = true;
     for (int i = 2; prime && i < len; i++)
        prime &= (newLen % i != 0);
  }
  while (!prime);

  long val = gen.nextInt(len-3) + 2;
  long oldVal = val;
  do
  {
     if (val < len)
        System.out.println(val);
     val = (val + oldVal) % newLen;
  }
  while (oldVal != val);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-11T23:11:04.850

This is an old thread, but in case anyone comes across this in future, a paper by Andrew Kensler describes a way to do this in constant time and constant space. Essentially, you create a reversible hash function, and then use it (and not an array) to index the list. Kensler describes a method for generating the necessary function, and discusses "cycle walking" as a way to deal with a domain that is not identical to the domain of the hash function. Afnan Enayet's summary of the paper is here: [https://afnan.io/posts/2019-04-05-explaining-the-hashed-permutation/](https://afnan.io/posts/2019-04-05-explaining-the-hashed-permutation/).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T10:21:17.023

You may try using a buffer to do this. Iterate through a limited set of data and put it in a buffer. Extract random values from that buffer and send it to output (or wherever you need it). Iterate through the next set and keep overwriting this buffer. Repeat this step.

You'll end up with n + n operations, which is still O(n). Unfortunately, the result will not be actually random. It will be close to random if you choose your buffer size properly.

On a different note, check these two: [Python - run through a loop in non linear fashion](https://stackoverflow.com/questions/6403607/python-run-through-a-loop-in-non-linear-fashion), [random iteration in Python](https://stackoverflow.com/questions/9252373/random-iteration-in-python)

Perhaps there's a more elegant algorithm to do this better. I'm not sure though. Looking forward to other replies in this thread.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-24T02:41:17.993

This is not a perfect answer to your question, but perhaps it's useful.

The idea is to use a reversible random number generator and the usual array-based shuffling algorithm done lazily: to get the `i`'th shuffled item, swap `a[i]` with and a randomly chosen `a[j]` where `j` is in `[i..n-1]`, then return `a[i]`. This can be done in the iterator.

After you are done iterating, reset the array to original order by "unswapping" using the reverse direction of the RNG.

The unshuffling reset will never take longer than the original iteration, so it doesn't change asymptotic cost. Iteration is still linear in the number of iterations.

How to build a reversible RNG? Just use an encryption algorithm. Encrypt the previously generated pseudo-random value to go forward, and decrypt to go backward. If you have a symmetric encryption algorithm, then you can add a "salt" value at each step forward to prevent a cycle of two and subtract it for each step backward. I mention this because RC4 is simple and fast and symmetric. I've used it before for tasks like this. Encrypting 4-byte values then computing mod to get them in the desired range will be quick indeed.

You can press this into the Java iterator pattern by extending `Iterator` to allow resets. See below. Usage will look like:

```
ShuffledList<Integer> lst = new SuffledList<>();

... build the list with the usual operations

ResetableInterator<Integer> i = lst.iterator();
while (i.hasNext()) {
  int val = i.next();

  ... use the randomly selected value

  if (anyConditinoAtAll) break;
}
i.reset();  // Unshuffle the array 
```

I know this isn't perfect, but it will be fast and give a good shuffle. Note that if you don't `reset`, the next iterator will still be a new random shuffle, but the original order will be lost forever. If the loop body can generate an exception, you'd want the reset in a `finally` block.

```
class ShuffledList<T> extends ArrayList<T> implements Iterable<T> {

    @Override
    public Iterator<T> iterator() {
        return null;
    }   

    public interface ResetableInterator<T> extends Iterator<T> {
        public void reset();
    }

    class ShufflingIterator<T> implements ResetableInterator<T> {

        int mark = 0;

        @Override
        public boolean hasNext() {
            return true;
        }

        @Override
        public T next() {
            return null;
        }

        @Override
        public void remove() {
            throw new UnsupportedOperationException("Not supported.");
        }

        @Override
        public void reset() {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    }
} 
```

# ios - UITableView、InsertRowsAtIndexPath 处理多个请求

> ID：16165129
> 
> 赞同：3
> 
> 时间：2013-04-23T08:57:31.660
> 
> 标签：ios, objective-c, xcode, uitableview

我的 tableview 控制器中有一个名为“fetchEntries”的方法，它通过从 Web 服务获取数据来放置数据。它还采用了一个名为“pageNumber”的参数，我通过从另一个方法调用此方法来递增该参数。这个 pageNumber 实际上是从 rss 提要的不同页面中提取数据。

```
- (void) fetchEntries:(NSInteger )pageNumber
{ 
        channel = [[TheFeedStore sharedStore] fetchWebService:pageNumber withCompletion:^(RSSChannel *obj, NSError *err){

            if (!err) {
                int currentItemCount = [[channel items] count];
                channel = obj;
                int newItemCount = [[channel items] count];

                int itemDelta = newItemCount - currentItemCount;

                if (itemDelta > 0) {

                    NSMutableArray *rows = [NSMutableArray array];

                    for (int i = 0; i < itemDelta; i++) {
                        NSIndexPath *ip = [NSIndexPath indexPathForRow:i inSection:0];
                        [rows addObject:ip];
                    }
                    [[self tableView] insertRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationBottom];
                    [aiView stopAnimating];
                }
            }
        }];
    [[self tableView] reloadData];

} 
```

它工作得很好。例如，当 pageNumber 为 1 并且它正在加载 tableview 中的数据时，如果由于涉及图像而该过程尚未完成，并且我将 pageNumber 增加到 2，它将停止加载第 1 页的条目并开始加载第 2 页而不完成第 1 页。

**问题：1）我有什么方法可以自定义，以便“insertRowsAtIndexPath”方法从第 1 页条目完成的索引开始加载第 2 页条目。2）或者，有什么办法可以将它们放在单独的线程中，以便它们可以独立运行并且它们都可以同时运行。**

任何帮助，将不胜感激。提前致谢。

# jquery - 缩放/扩展元素的最佳方式：CSS 或 jQuery

> ID：16165130
> 
> 赞同：1
> 
> 时间：2013-04-23T08:57:31.980
> 
> 标签：jquery, css

我想知道将鼠标悬停在元素上时扩展元素大小/缩放的最佳方法是：**CSS 还是 jQuery？**

我用 CSS 过渡做了这个[小提琴](http://jsfiddle.net/FCxfR/8/)，但它没有做我想要的，宽度和高度的大小不平滑且不成比例：

```
<div></div>

div{

    width: 300px;
    height: 300px;
    background: #aa00aa;
    -moz-transition: height 0.3s ease-in-out;
    -webkit-transition: height 0.3s ease-in-out;
    -o-transition: height 0.3s ease-in-out;
    transition: height 0.3s ease-in-out;

    -moz-transition: width 0.3s ease-in-out;
    -webkit-transition: width 0.3s ease-in-out;
    -o-transition: width 0.3s ease-in-out;
    transition: width 0.3s ease-in-out;

}

div:hover{
    background: #aa00aa;
    height: 400px;
    width: 400px;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:04:07.447

这种过渡使您的盒子更大

```
transition: width 1s ease-in-out, height 1s ease-in-out; 
```

但是要实现真正的缩放效果，您需要同时将框移到左侧和顶部。像这样[http://jsfiddle.net/slash197/FCxfR/14/](http://jsfiddle.net/slash197/FCxfR/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:05:16.170

过渡就像任何其他 CSS 规则一样工作。如果你有：

```
color: red;
color: green; 
```

...颜色是绿色的。在这种情况下，转换仅应用于`width`. 您可以同时指定：

```
transition: height 0.3s ease-in-out, width 0.3s ease-in-out; 
```

或作为

```
transition-property: height, width;
transition-duration: .3s;
transition-timing-function: ease-in-out; 
```

甚至

```
transition-property: height, width;
transition: .3s ease-in-out; 
```

[http://jsfiddle.net/FCxfR/13/](http://jsfiddle.net/FCxfR/13/)

# jquery - 如何打开和关闭表格行

> ID：16165133
> 
> 赞同：0
> 
> 时间：2013-04-23T08:57:42.517
> 
> 标签：jquery, html, xslt

我目前正在我的 XSLT (html) xml 样式表中切换一些表格行。

我有 6 行我先隐藏 3 行，然后在 onClick 命令上我想隐藏 1 行并打开其他 3 行。

这就是它的样子

**加载 xml**

```
first row - Talents_Passive | Talent/Talent_Cost
second row - Prerequisite
third row - Action / Range / Cost
seventh row - Description 
```

**单击时**// 应该能够使用我的 jQuery 在两者之间切换

```
first row - Talents_Passive | Talent/Talent_Cost
second row - Prerequisite
fourth row - Action
fifth row - Range
Sixth row - Cost
seventh row - Description 
```

这就是我的代码的样子

```
<?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/Collection">
     <html>
     <header>

        <script type ="text/javascript" src="jquery.js" ></script>
        <script>
            <!-- insert toggling here -->

        function toggle_it(itemID){ 
      // Toggle visibility between none and inline 
      if ((document.getElementById(itemID).style.display == 'none')) 
      { 
        document.getElementById(itemID).style.display = 'inline'; 
      } else { 
        document.getElementById(itemID).style.display = 'none'; 
      } 
  } 

        </script>
    </header>
     <body>

     <!-- header -->
     <table border="0" width="550" height="25">
        <tr>
            <td>
            <div style="font-family:Calibri, Arial; font-size:15pt">
            Passive Talents
            </div>
            </td>
         </tr>      
     </table>

     <!-- Passive Talent loop -->
        <xsl:for-each select="Talents_Passive">
        <xsl:variable name="i" select="position()"/>
        <div style="font-family:Calibri, Arial; font-size:5pt">
        <xsl:if test="Talent != ''">
            <table border="0" width="550">

                <tr>
                    <td bgcolor="#A0A0A0" width="80%">
                        <a href="#" onClick="toggle_it('{$i}')">  <b id="toggle"><xsl:value-of select="Talent"/></b></a></td>
                    <td bgcolor="#A0A0A0" width="20%" align="center">
                        <xsl:value-of select="Talent_Cost"/><xsl:text>  -  </xsl:text><xsl:value-of select="Talent_Type"/></td>
                 </tr>

                 <xsl:if test="Prerequisite != ''">
                <tr>
                    <td colspan="2" bgcolor="#C0C0C0"><b>Prerequisite: </b><xsl:value-of select="Prerequisite"/></td>
                </tr>
                </xsl:if>

                 <tr>
                    <td colspan="2" bgcolor="#C0C0C0" id="{$i}" style="display:inline;"> 
                    <xsl:if test="Action != ''">
                        <b>Action: </b><xsl:value-of select="Action"/>
                    </xsl:if>
                    <xsl:if test="Range != ''">
                        <xsl:text>    </xsl:text> <b>Range: </b><xsl:value-of select="Range"/> 
                    </xsl:if>
                    <xsl:if test="Cost != ''">
                        <xsl:text>    </xsl:text> <b>Cost: </b><xsl:value-of select="Cost"/>
                    </xsl:if>
                    </td>
                 </tr>  

                <xsl:if test="Action != ''">
                <tr>
                    <td colspan="2" bgcolor="#E0E0E0" id="{$i}" style="display:none;"><b>Action: </b><xsl:value-of select="Action"/></td>
                </tr>
                </xsl:if>

                <xsl:if test="Range != ''">
                <tr>
                    <td colspan="2" bgcolor="#E0E0E0" id="{$i}" style="display:none;"><b>Range: </b><xsl:value-of select="Range"/></td>
                </tr>
                </xsl:if>

                <xsl:if test="Cost != ''">
                <tr>
                    <td colspan="2" bgcolor="#E0E0E0" id="{$i}" style="display:none;"><b>Cost: </b><xsl:value-of select="Cost"/></td>
                </tr>
                </xsl:if>

                <xsl:if test="Description != ''">
                <tr>
                    <td colspan="2" bgcolor="#EBEBEB"><b>Description: </b><xsl:value-of select="Description"/></td>
                </tr>
                </xsl:if>

            </table>
        </xsl:if>
        </div>
     </xsl:for-each>
     </body>
     </html>
    </xsl:template>
    </xsl:stylesheet> 
```

目前发生的情况是当 onClick 事件被执行时第三行隐藏，但第四、第五和第六行不显示......

有效我希望第二排与第四排、第五排和第六排交换 plaes.. 任何帮助将不胜感激。

我想这就是我烦恼的原因...

```
<script>
                <!-- insert toggling here -->

            function toggle_it(itemID){ 
          // Toggle visibility between none and inline 
          if ((document.getElementById(itemID).style.display == 'none')) 
          { 
            document.getElementById(itemID).style.display = 'inline'; 
          } else { 
            document.getElementById(itemID).style.display = 'none'; 
          } 
      } 

            </script> 
```

但我无法弄清楚为什么它不会像我计划的那样切换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:36:23.597

The problem is that you do not have unique id's in your generated html.

Your have to add a prefix to each of your id's. E.g.:

```
<td colspan="2" bgcolor="#C0C0C0" id="action_{$i}" style="display:inline;"> 
<td colspan="2" bgcolor="#E0E0E0" id="x_{$i}" style="display:none;">
<td colspan="2" bgcolor="#E0E0E0" id="y_{$i}" style="display:none;">
<td colspan="2" bgcolor="#E0E0E0" id="z_{$i}" style="display:none;"> 
```

And change your javascript function to something like:

```
 function toggle_it_withId(itemID){ 
  // Toggle visibility between none and inline 
      if ((document.getElementById(itemID).style.display == 'none')) 
      { 
        document.getElementById(itemID).style.display = 'inline'; 
      } else { 
        document.getElementById(itemID).style.display = 'none'; 
      } 
  }

    function toggle_it(id_nr)
    { 
        toggle_it_withId("action_" + id_nr);
        toggle_it_withId("x_" +id_nr);
        toggle_it_withId("y_" +id_nr);
        toggle_it_withId("z_" +id_nr);
      } 
```

But this could be even easier with jquery slectors

Update (one posibility) how to do this whith jquery:

*   Add an unique id to you talent table.

    ```
    <table border="0" width="550" id="talenttable_{id}" > 
    ```

*   Add class attributes to your row' you like to toggle. Something like details for the hidden ones and overview for open ones.

    ```
    <td colspan="2" bgcolor="#C0C0C0" class="overview" style="display:inline;">
    <td colspan="2" bgcolor="#E0E0E0" class="details" style="display:none;"> 
    ```

*   Change the your toggle function to something like:

    ```
     function toggle_it(id_nr)
     { 
       $('#talenttable_'+ id_nr + ' .details').toggle();
       $('#talenttable_'+ id_nr + ' .overview').toggle();
      } 
    ```

*   Optional you can also get rid of the bgcolor and style attributes and put this information into the classes.

# maven - 我的 Maven settings.xml 中的“http://central”是什么意思？

> ID：16165137
> 
> 赞同：13
> 
> 时间：2013-04-23T08:57:56.257
> 
> 标签：maven

多年来，我一直在复制“示例”`settings.xml`文件，几乎所有这些文件似乎都包含一个带有 URL 的存储库`http://central`。这让我很烦，因为在本地域中实际上可能有一台名为“central”的机器，所以这是一个有效的 URN，但它也必须（可能？）对 Maven 有一些特殊的含义。

它只是常用的简写，但实际的 URL 被忽略了吗？我可以用其他东西替换它，还是完全删除它？它在任何地方都有记录吗？

如果重要的话，我会在具有内部 iBiblio 镜像的企业网络上开发，它充当我们的“中心”。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-23T09:25:15.237

AFAIK，它在[Configure Maven to Download from Nexus](https://support.sonatype.com/entries/20943003-configure-maven-to-download-from-nexus)`a bogus URL`中提到如下示例：-

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

`nexus profile`配置`central repository`为从下载`a bogus URL`。`http://central`

此 URL**被**同一`settings.xml`文件中的镜像设置覆盖，以指向您的`single Nexus group`. 然后，nexus 组在 activeProfiles 元素中列为活动配置文件。

我希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-05T13:16:09.410

我们也完全使用了这个示例配置，即使使用相同的评论大约 15（！）年也没有任何问题。对于 maven 构建，这并不重要，因为任何依赖项都需要 nexus。

但是今天我尝试使用组合的 ant+maven 构建构建一个项目，该构建未能通过来自中央仓库的 artifact:remoteRepository 任务获取依赖项。

解决方案是修复中央仓库中的“url”标签：[https ://repo.maven.apache.org/maven2](https://repo.maven.apache.org/maven2)

所以看起来在大多数情况下它并不重要，但为了避免任何极端情况，请始终使用正确的 url。

# vba - Excel - VBA：使匹配方法的限制更少（通过在句子中查找单词）

> ID：16165138
> 
> 赞同：5
> 
> 时间：2013-04-23T08:57:59.940
> 
> 标签：vba, excel

我在我的 excel 程序中使用 match 函数，但我遇到了问题，因为**它只选择相同的匹配项**。例如，如果您将一个带有“Banana”的单元格与另一个带有“Banana”的单元格进行比较，它将起作用并返回一个正值。
但是如果你将“Banana”与内容为“Banana choco”的单元格进行比较，那么它就不会识别出香蕉这个词在单元格中。

就我而言，只要在句子中发现一个单词，我就想返回一个 TRUE 值。

这是我的代码：

```
Worksheets("sBldgMakati").Activate

For i = 2 To 605
  Range("B" & i).Activate
  myResult = IsNumeric(Application.Match(ActiveCell.Value, elementsListRange, 0))

   If myResult Then
   Range("K" & i).Value = Range("K" & i).Value + 10
   Else
   Range("K" & i).Value = Range("K" & i).Value + 0
End If

Next i 
```

我必须在此代码中指定，`elementsListRange`对应于内容仅为一个单词的一系列单元格（例如“Banana”），并且`ActiveCell.value`通常是一个较长的表达式（例如“Banana choco”）。

在此先感谢您的帮助 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:10:43.850

从 Excel 中的帮助文档（如果您按 F1 并搜索`match`）：

> 如果 match_type 为 0 并且 lookup_value 是文本字符串，您可以在 lookup_value 参数中使用通配符——问号 (?) 和星号 (*)。问号匹配任何单个字符；星号匹配任何字符序列。

因此，`=MATCH("*Banana*",C8,0)`返回`1`if `C8`contains `"Banana choco"`。

在 VBA 中，如果要匹配的项目在单元格中，则可以在字符串连接中包含通配符星号，例如：

```
myResult = IsNumeric(Application.Match("*" & ActiveCell.Value & "*", elementsListRange, 0)) 
```

如果该范围内有许多句子`B2:B605`必须针对 中的所有单词进行测试`elementListRange`，就像在这种情况下出现的情况一样，我认为您可能需要执行以下操作（未经测试）：

```
For Each cell in elementsListRange.Cells
    myResult = Application.Match("*" & cell.Value & "*", B2:B605, 0)
    if (IsNumeric(myResult)) then
        Range("K" & myResult).Value = Range("K" & myResult).Value + 10
    end if
next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T10:45:59.443

使用以下函数，它匹配字符串中的子字符串：

```
Function match(searchStr As Variant, matchStr As Variant) As Boolean
    match = False
    If (IsNull(searchStr) Or IsNull(matchStr)) Then Exit Function
    If (matchStr = "") Or (searchStr = "") Then Exit Function
    Dim f As Variant
    f = InStr(1, CStr(searchStr), CStr(matchStr), vbTextCompare)
    If IsNull(f) Then Exit Function
    match = f > 0
End Function 
```

要将其与范围一起使用：

```
Dim searchstr="A Banana found"
Dim isFound as boolean
IsFound=false
For each c in range
    If match(searchstr, c.value) 
         IsFound=true
         Exit for
    End if
End for 
```

**请注意**，`searchStr`and`matchStr`是变体，因此您可以将值从 Excel 单元格传递给它。

# ios - 处理 tableview 确实在容器视图控制器中的索引路径委托方法中选择了行

> ID：16165139
> 
> 赞同：1
> 
> 时间：2013-04-23T08:58:01.593
> 
> 标签：ios, uinavigationcontroller, containment

我在 containerview 控制器中添加了两个视图控制器作为子视图控制器，一个视图控制器具有 AQGridView，其中歌曲专辑作为项目。当我选择专辑时，我如何导航到另一个显示歌曲详细信息的视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:13:12.247

对于这种情况，您应该使用 UINavigation。因为当您想在多个视图控制器中导航时，UINavigation 控制器是最佳选择。

所以在你的应用程序委托的“didFinishLaunching”方法中。

1.  创建并分配 UINavigationController 的实例。
2.  添加你想成为应用程序登陆页面的 UIViewController 作为导航控制器的 rootviewcontroller。
3.  将 UINavigationController 设置为应用程序窗口的 rootViewController。

完成此操作后，您可以推送（显示）和弹出（删除）您想要的任何 UIViewController。

希望这可以帮助。

# php - php mysql + ajax 和 jquery dpopulate 动态下拉列表

> ID：16165144
> 
> 赞同：0
> 
> 时间：2013-04-23T08:58:11.583
> 
> 标签：php, mysql, jquery, drop-down-menu

我正在创建 2 个动态下拉列表，第二个是基于第一个的选择，但问题是第二个没有填充，我不知道错误在哪里，谁能帮助我？？？？

# 数据库配置文件

```
<?php
$host = "localhost";
$user = "*****";
$password = "****";
$db = "lam_el_chamel_db";
?> 
```

# 选择.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
             $(document).ready(function(){
            $("select#district").attr("disabled","disabled");
            $("select#governorate").change(function(){
            $("select#district").attr("disabled","disabled");
            $("select#district").html("<option>wait...</option>");
            var id = $("select#governorate option:selected").attr('value');
            $.post("select_district.php", {id:id}, function(data){
                $("select#district").removeAttr("disabled");
                $("select#district").html(data);
            });
        });
        $("form#select_form").submit(function(){
            var cat = $("select#governorate option:selected").attr('value');
            var type = $("select#district option:selected").attr('value');
            if(cat>0 && type>0)
            {
                var result = $("select#district option:selected").html();
                $("#result").html('your choice: '+result);
            }
            else
            {
                $("#result").html("you must choose two options!");
            }
            return false;
        });
    });
        </script>
    </head>
    <body>
    <?php include "select.class.php"; ?>
        <form id="select_form">
            Choose a governorate:<br />
            <select id="governorate">

            <?php echo $opt->ShowGovernorate(); ?>

            </select>
            <br /><br />

           choose a district:<br />
            <select id="type">
                <option value="0">choose...</option>
            </select>
            <br /><br />
            <input type="submit" value="confirm" />
        </form>
        <div id="result"></div>
    </body>
</html> 
```

# 选择类.php

```
<?php 
 class SelectList
{
    protected $conn;

        public function __construct()

        {
           $this->DbConnect();
        }
    protected function DbConnect()
   {
    include "dbconfig.php";
    $this->conn = mysql_connect($host,$user,$password) OR die("Unable to connect to the database");
    mysql_select_db($db,$this->conn) OR die("can not select the database $db");
    return TRUE;
   }  

    public function ShowGovernorate()
    {
            $sql = "SELECT * FROM governorate";
            $res = mysql_query($sql,$this->conn);
            $governorate = '<option value="0">choose...</option>';
            while($row = mysql_fetch_array($res))
            {
                $governorate .= '<option value="' . $row['governorate_id'] . '">' . $row['governorate_name'] . '</option>';
            }
            return $governorate;

    }
    public function ShowDistrict()
   {
    $sql = "SELECT * FROM districts WHERE governorate_id=$_POST[id]";
    $res = mysql_query($sql,$this->conn);
    $district = '<option value="0">choose...</option>';
       while($row = mysql_fetch_array($res))
      {
        $district .= '<option value="' . $row['district_id'] . '">' . $row['district_name'] . '</option>';
      }
    return $district;
   }

}   
$opt = new SelectList(); 

?> 
```

# 选择_type.php

```
<?php
include "select.class.php";
echo $opt->ShowDistrict();
?> 
```

# 表结构

省：

*   省ID
*   省名

地区：

*   区号，
*   区名，
*   省ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:26:00.943

在 select.php 页面上，您使用 id 作为选择标签是 'id="type"' 这将是选择标签中的 'id = "district"' 用于选择一个地区：下面的文本。

```
choose a district:<br />
<select id="type">
    <option value="0">choose...</option>
 </select> 
```

通过以下

```
choose a district:<br />
<select id="district">
   <option value="0">choose...</option>
</select> 
```

通过“select_district.php”重命名页面“select_type.php”或更改 $.post ajax 查询。通过“select_type.php”正确发送请求页面名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:27:54.867

这应该在

从`$sql = "SELECT * FROM districts WHERE governorate_id=$_POST[id]";`

至`$sql = "SELECT * FROM districts WHERE governorate_id=$_POST['governorate']";`

也在 select.php 改变

```
<select id='governorate'> to <select id='governorate' name='governorate'> 
```

# php - PHP 进度条仅在脚本完成后显示

> ID：16165148
> 
> 赞同：2
> 
> 时间：2013-04-23T08:58:19.797
> 
> 标签：php, progress-bar

我正在尝试从[http://w3shaman.com/article/php-progress-bar-script](http://w3shaman.com/article/php-progress-bar-script)运行示例。

我在 Windows 上使用[quickPHP](http://www.zachsaw.com/?pg=quickphp_php_tester_debugger)。上面的教程有运行良好的实时[演示链接。](http://stuff.w3shaman.com/php-progress-bar/)

**问题：**

当我测试这个脚本时，只有当 PHP 完成处理时我才会得到 bar。我也尝试使用 jQuery UI 进度条，但 PHP 在显示进度条之前变得很忙，然后突然显示 100 完成。怎么了 ？

**来自[上述链接](http://w3shaman.com/article/php-progress-bar-script)的代码：**

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
<head>
    <title>Progress Bar</title>
</head>
<body>
<!-- Progress bar holder -->
<div id="progress" style="width:500px;border:1px solid #ccc;"></div>
<!-- Progress information -->
<div id="information" style="width"></div>
<?php
// Total processes
$total = 10;

// Loop through process
for($i=1; $i<=$total; $i++){
    // Calculate the percentation
    $percent = intval($i/$total * 100)."%";

    // Javascript for updating the progress bar and information
    echo '<script language="javascript">
    document.getElementById("progress").innerHTML="<div style=\"width:'.$percent.';background-color:#ddd;\">&nbsp;</div>";
    document.getElementById("information").innerHTML="'.$i.' row(s) processed.";
    </script>';

    // This is for the buffer achieve the minimum size in order to flush data
    echo str_repeat(' ',1024*64);

    // Send output to browser immediately
    flush();

    // Sleep one second so we can see the delay
    sleep(1);
}

// Tell user that the process is completed
echo '<script language="javascript">document.getElementById("information").innerHTML="Process completed"</script>';
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:39:52.113

我认为现在，快速 PHP 不会让您获得此处所述的中间结果：[http](http://www.zachsaw.com/forum/viewtopic.php?f=11&t=27&hilit=flush) ://www.zachsaw.com/forum/viewtopic.php?f=11&t=27&hilit=flush （我知道这是一个旧帖子，但我找不到任何最近在 QuickPHP 上使用刷新的参考）。

似乎由于 QuickPHP 处理 PHP 输出的方式，它只在完整的脚本执行完成后才发送结果。这就是为什么您要完成该栏的原因，因为您的脚本依赖于在 php 脚本仍在运行时继续向 Web 浏览器发送数据的可能性。

所以答案是，现在不可能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:12:03.727

尝试使用这个：

```
//At the beginning of your PHP file
ob_start();
... 
```

接着：

```
ob_flush();
flush(); 
```

代替

```
flush(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T15:09:23.460

我在工作中也遇到过类似的情况。我使用 jquery、json 来检查脚本执行的进度。php 脚本将其状态写入一个临时文件。我[在博客](http://thupten.veryusefulinfo.com/2011/07/20/progress-bar-to-display-servers-script-execution-using-jqueryjqueryui/)上写过，这里可能有一些错误，但做得很好。

# jquery - Jquery 如果元素的类以 x 开头，则不要添加类

> ID：16165149
> 
> 赞同：20
> 
> 时间：2013-04-23T08:58:20.350
> 
> 标签：jquery, addclass

我是一个绝对的新手，所以为垃圾编码道歉！我为自己设置的练习项目编写了以下 Jquery：

当您单击 div 时，它添加了类“in_answerbox1”，并在添加了类“answerbox_letter1”的答案框中创建了一个克隆的 div。

最终，网格（或表格中的单元格）中会有许多 div，当您单击特定的一个时，它会淡出并似乎出现在答案框中。然后当你点击答案框中的东西时，网格中的相关div会重新出现，并且克隆会从答案框中删除。

但是，我现在希望仅当我单击的内容尚未在答案框中时才添加该类：即，如果原始或克隆具有包含“答案框”的类。

我写了以下内容，知道它不会起作用，但它可能会更好地解释我想要什么。

```
var n = 0;

$('#box').click(function(){

    if(!$(this).hasClass('*[class^="answerbox"]')) {

    $(this).addClass('in_answerbox' + (n+ 1) );

    $(this).clone().appendTo('#answerbox').addClass('answerbox_letter' + (n + 1));
    n = (n + 1);

}

}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-04-23T09:03:31.137

我认为问题在于 if 条件：

```
if(!$(this).hasClass('[class^="answerbox"]')) { 
```

尝试这个 ：

```
if(!$(this).is('[class*="answerbox"]')) {
    //Finds element with no answerbox class
} else {
    //The element has already an answerbox class
} 
```

你应该看看[toggleClass](http://api.jquery.com/toggleClass/)和[是](http://api.jquery.com/is/)jquery docs。

请参阅这个[现场小提琴示例](http://jsfiddle.net/qTyJU/9/)。

小提示：而不是`n = (n + 1)`你可以做的`n++`:)。

**编辑**：

再次阅读问题后，我做了一个**[完整的工作脚本](http://jsfiddle.net/qTyJU/11/)**：

假设**Html**是：

```
<div id="box">
    <p>Answer1</p>
    <p>Answer2</p>
    <p>Answer3</p>
</div>

<div id="answerbox">

</div> 
```

**jQuery** :

```
var n = 0;

$('#box p').on('click',function(e) {
    e.preventDefault();
    if(!$(this).is('[class*="answerbox"]')) {
        n++;
        $(this).addClass('in_answerbox' + n );
        $(this).clone().appendTo('#answerbox').addClass('answerbox_letter' + n); 
    }
}); 
```

在此处查看此[示例](http://jsfiddle.net/qTyJU/11/)。

您应该考虑使用[data-attributes](http://html5doctor.com/html5-custom-data-attributes/)，它们会比`classes`您尝试做的更可靠。

* * *

请注意，如果您希望选择器仅在类属性以单词开头时匹配，您将需要`[class^="word"]`. `*`但是搜索整个类属性。不过要小心，`[class^="word"]`不会匹配`<div class="test word">` [看到这里](https://jsfiddle.net/soyuka/x6pzhvjb/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T09:07:43.817

使用`.is()`而不是`.hasClass()`. 前者可以与 CSS 选择器一起使用，而后者只能使用类名作为“固定”字符串。

```
if(!$(this).is('[class^="answerbox"]')) 
```

注意：只有当元素只有一个类时，这才会始终如一地工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-04T17:49:19.257

The other answers do not work if your element has multiple classes on the same element. You need to select it as such:

```
if ( $(this).is('[class^="bleh_"], [class*=" bleh_"]') ) {

    // Return true if element has class that starts with "bleh_"

    // Note: The second argument has a space before 'bleh_'

} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T11:06:56.870

如果您需要适用于多个类名的东西，请检查此

```
var theClasses = $(this).attr('class').split(" ");
var i=0;
var found = false;
while(i<theClasses.length && !found) {
   if(theClasses[i].indexOf('answerbox') == 0) {   // starts with answerbox
      found = true;
   }
   i++;
}
if(!found) {
   // the current element does not have a class starting with answerbox
} 
```

# jquery - 未捕获的 SyntaxError：带有 jsonp 的意外标记

> ID：16165150
> 
> 赞同：1
> 
> 时间：2013-04-23T08:58:23.190
> 
> 标签：jquery, ajax, jsonp

我正在对以下 API 进行 jsonp 调用：http: [//blockchain.info/ticker](http://blockchain.info/ticker)。我一直在对 jsonp 进行很好的研究，但我找不到我做错了什么。在 Chrome 中，浏览器不断显示：'Uncaught SyntaxError: Unexpected token :'。下面是代码。

```
$.ajax({                                                                                                                                                                                                        
            type: 'GET',                                                                                                                                                                                                 
            url: 'http://blockchain.info/ticker?q=&callback=?',                                                                                                                                              
            dataType: 'jsonp',                                                                                                                                                                                                
            success: function() { console.log('Success!'); },                                                                                                                                                                                       
            error: function() { console.log('Uh Oh!'); },
            jsonp: 'jsonp'                                                                                                                                                
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:07:09.933

我认为您返回的 json 有错误，请查看浏览器中的控制台，并替换`jsonp`为`jsonpCallback`并放置您的回调函数名称：

```
$.ajax({type:'GET',                                                                 
                url: 'http://blockchain.info/ticker?q=&callback=?',
                dataType:'jsonp',
                success: function(data) { console.log('Success!'); },
                error: function(errror) { console.log(errror); },
                jsonpCallback:'callbackName'             
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-22T12:10:17.290

该错误是因为您 jsonp 期望一个名为“callbackName”的函数，然后我们已经知道了。例子：

回调名称（）

而不是 callbackName: 因为是错误的

那么你需要在服务器中返回

回调名称（数据 json）

# mongodb - mongod 崩溃（以信号 5 终止）

> ID：16165151
> 
> 赞同：1
> 
> 时间：2013-04-23T08:58:26.453
> 
> 标签：mongodb, crash

我配置了一个mongodb的capped collection，容量超过3G，在mongod多次崩溃之后，mongod.log没有任何问题。但是linux abrt已经为mongod转储了核心，来自coredump的消息如下：

```
 Program terminated with signal 5, Trace/breakpoint trap. #0 0x00000000010b9951 in v8::internal::OS::DebugBreak() () Missing separate debuginfos, use: debuginfo-install 
glibc-2.12-1.107.el6.x86_64 libgcc-4.4.7-3.el6.x86_64 libstdc++-4.4.6-4.el6.x86_64 (gdb) where #0 0x00000000010b9951 in v8::internal::OS::DebugBreak() () #1 0x00000000010ba06a in 
v8::internal::OS::Abort() () #2 0x0000000000f1c5f3 in API_Fatal(char const*, char const*, ...) () #3 0x0000000000ece607 in ?? () #4 0x0000000000ece916 in 
v8::internal::V8::FatalProcessOutOfMemory(char const*, bool) () #5 0x000000000108c891 in v8::internal::Map::UpdateCodeCache(v8::internal::Handle<v8::internal::Map>, 
v8::internal::Handle<v8::internal::String>, v8::internal::Handle<v8::internal::Code>) () #6 0x0000000001149180 in 
v8::internal::StubCache::ComputeKeyedLoadOrStoreElement(v8::internal::Handle<v8::internal::Map>, v8::internal::KeyedIC::StubKind, v8::internal::StrictModeFlag) () #7 
0x0000000001000bfc in v8::internal::KeyedIC::ComputeMonomorphicStub(v8::internal::Handle<v8::internal::Map>, 
v8::internal::KeyedIC::StubKind, v8::internal::StrictModeFlag, v8::internal::Handle<v8::internal::Code>) () #8 0x000000000100779a in 
v8::internal::KeyedIC::ComputeStub(v8::internal::Handle<v8::internal::JSObject>, v8::internal::KeyedIC::StubKind, v8::internal::StrictModeFlag, 
v8::internal::Handle<v8::internal::Code>) () #9 0x0000000001008551 in v8::internal::KeyedLoadIC::Load(v8::internal::InlineCacheState, 
v8::internal::Handle<v8::internal::Object>, v8::internal::Handle<v8::internal::Object>, bool) () #10 0x000000000100894d in v8::internal::KeyedLoadIC_Miss(v8::internal::Arguments, 
v8::internal::Isolate*) () 
```

我的mongodb是2.4.1，运行在centos 6.3，16G内存和8cpus。任何人都可以帮助我吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:37:56.507

提到的内存不足错误让我怀疑这可能是这个错误的发生（V8 内存泄漏）：

[https://jira.mongodb.org/browse/SERVER-9230](https://jira.mongodb.org/browse/SERVER-9230)

您可以升级到 2.4.2+ 并查看错误是否仍然发生在您身上吗？

# asp.net - 找不到请求的 .Net Framework 数据提供程序。它可能没有安装

> ID：16165158
> 
> 赞同：6
> 
> 时间：2013-04-23T08:58:41.327
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, deployment

完成 ASP.NET MVC 3（在[此处](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-1)查找）后，我尝试在线发布该应用程序。我联系了托管公司以确定是否可以托管 MVC 3 应用程序。但我不得不 bin 部署（dll 文件）应用程序。[因此，在hanselmans blog](http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx)上执行了一些步骤后，我陷入了以下错误：

> 找不到请求的 .Net Framework 数据提供程序。它可能没有安装。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.ArgumentException：找不到请求的 .Net Framework 数据提供程序。它可能没有安装。
> 
> 源错误：
> 
> 在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。
> 
> 堆栈跟踪：
> 
> [ArgumentException：找不到请求的 .Net Framework 数据提供程序。它可能没有安装。]
> System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName) +1420503
> System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name) +362
> System.Data.Entity.Internal.LazyInternalConnection.Initialize () +49
> System.Data.Entity.Internal.LazyInternalConnection.get_ConnectionHasModel() +10 System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +265 System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(类型 entityType) + 17
> System.Data.Entity.Internal.Linq.InternalSet 1.get_InternalContext() +15 System.Data.Entity.Infrastructure.DbQuery`1.Initialize() +62
> System.Data.Entity.Internal.Linq.InternalSet``1.System.Linq.IQueryable.get_Provider() +37 System.Linq.Queryable.OrderByDescending(IQueryable`1个来源，表达式2个参数）+188 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod（ControllerContext controllerContext，ActionDescriptor actionDescriptor，IDictionary`2个参数）+27`1 keySelector) +66
> MvcMusicStore.Controllers.HomeController.GetTopSellingAlbums(Int32 count) +420 MvcMusicStore.Controllers.HomeController.Index() +47
> lambda_method(Closure , ControllerBase , Object[] ) +40
> System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
> System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T14:31:11.360

根据我的经验，该错误意味着 web.config 中连接字符串的属性值*不*`providerName`正确，或者未安装提供程序。如果您设置为(SQL Server Compact)，这在开发中并不少见，我可以向您保证它没有安装在您的 Web 主机上；它仅在 Visual Studio 中用于开发。您可能只需要将其更改为真正的 SQL Server 提供程序：.*`providerName``System.Data.SqlServerCe.4.0``System.Data.SqlClient`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T06:14:57.633

我解决了这个问题。

我在 providerName 中找到了一个空格。因此，.net 框架无法与数据库建立连接字符串。

检查您的 connectionString 标记属性值。您的 providerName 可能没有很好地定义。查找任何空格（因为命名不允许任何空格）并检查 providerName 值中的额外字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-06T22:12:09.927

另一个数据点...

我使用 Oracle 和实体框架。我安装了 Oracle ODP.NET, Managed Driver 来解决这个问题。在 NuGet 包管理器中输入

```
Install-Package Oracle.ManagedDataAccess 
```

它将使用适当的程序集信息和 DbProviderFactories 更新 App.config。我正在使用 VS 2015，Entity Framework 6。我还安装了 Oracle Developer Tools。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T10:55:00.477

我遇到了类似的问题 .. 并且有一个非常有趣的解决方案 .. 只需查看您的 ConnectionString ——如果它与您用于其他 ASP.Net 应用程序的相同，那么它不应该是......实体框架完全不同的情况

```
<add name="EmployeeContext" connectionString="Server=.\SQLEXPRESS;Database=DB1;User Id=user1;password=password1;" providerName="System.Data.SqlClient**;**" /> 
```

改成——

```
<add name="EmployeeContext" connectionString="Server=.\SQLEXPRESS;Database=DB1;User Id=user1;password=password1;" providerName="System.Data.SqlClient"/> 
```

你能找出区别吗..只有一点点——没有';' 在 ProviderName 的末尾 .. 是的，这会有所不同 .. 它应该与 ProviderName 的相同副本相同，尽管我没有检查区分大小写。但这解决了我的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-16T12:35:10.403

错误是完美的，上面的评论很好，但在我的情况下，我在 web.config 文件中拼写错误的提供程序：**System.Data.SqlClinet**而不是**System.Data.SqlClient***

# android - 将 webview 滚动到底部后显示 admob 广告

> ID：16165163
> 
> 赞同：1
> 
> 时间：2013-04-23T08:58:57.397
> 
> 标签：android, android-layout

无论如何，只有在用户将 web 视图一直滚动到底部之后才能显示 admob 广告？我不希望它显示在 webview 的顶部，因为它会阻止内容或减少可见区域。我应该如何修改我的 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:18:55.573

1.  使用以下方法获取 webView 内容高度：

    ```
    int height = (int) Math.floor(webView.getContentHeight() * webView.getScale()); 
    ```

2.  覆盖webview中的scroll方法监听滚动事件，如果滚动达到真实高度，则webview在滚动的底部。在这里打电话`loadAd()`。

# jquery - jQuery 1.7.2、nested_form 和 simple_form 出错

> ID：16165172
> 
> 赞同：0
> 
> 时间：2013-04-23T08:59:16.680
> 
> 标签：jquery, ruby-on-rails, nested-forms, simple-form

单击嵌套表单中的 link_to_add 链接时，我收到“未捕获的错误：语法错误，无法识别的表达式：#[object Object]_fields_blueprint”。

**form.html.erb**

```
<%= simple_nested_form_for(@post, :html => {:multipart => true}) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :title %>
    <%= f.input :content %>
    <%= f.simple_fields_for :news_photos do |p| %>
      <%= p.input :image %>
      <%= p.input :caption %>
    <% end %>
    <%= f.link_to_add "Add Photo", :news_photos %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

**post.rb**

```
class Post < ActiveRecord::Base
  has_many :news_photos, :dependent => :destroy
  accepts_nested_attributes_for :news_photos, :allow_destroy => true
end 
```

**news_photo.rb**

```
class NewsPhoto < ActiveRecord::Base
  belongs_to :post
  has_attached_file :image, :styles => {:featured => "299x185>", :main => "631x298>", :thumb => "104x106>"}, :default_url => "/images/empty.png"
end 
```

有任何想法吗？

# google-maps - 按住宿和位置类型自动填充位置

> ID：16165173
> 
> 赞同：6
> 
> 时间：2013-04-23T08:59:21.220
> 
> 标签：google-maps, autocomplete, google-places-api

我希望 Google 的自动完成建议仅列出住宿和位置。我一直在努力让住宿类型正常工作，但没有出现任何建议。

当我从 autoComplete 变量中删除 ac_options 时，一切正常，但当然没有任何建议被特定类型缩小。

```
 var ac_options = {
        types: ['lodging']
    };

    var input = document.getElementById(this.options.autoCompleteInputId);
    var autocomplete = new google.maps.places.Autocomplete(input, ac_options);

    //bind to input field
    autocomplete.bindTo('bounds', this.gmap); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-01T09:57:24.980

根据以下链接，我认为住宿不是有效的选择...

[https://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)

您应该尝试关注...

[https://developers.google.com/maps/documentation/javascript/examples/places-queryprediction](https://developers.google.com/maps/documentation/javascript/examples/places-queryprediction)

在示例中使用“住宿”代替“附近的披萨”... :)

# mysql - MySQL - 慢速多个子查询和 GROUP BY

> ID：16165175
> 
> 赞同：0
> 
> 时间：2013-04-23T08:59:23.340
> 
> 标签：mysql, subquery

使用 GROUP BY 运行以下查询时，会花费太多时间。

```
 SELECT specialities.id AS ID_DEPARTMENT, 
        specialities.name AS ID_DEPARTMENT_NAME, 
        agenda.idagenda AS ID_SERVICE, 
        agenda.name AS ID_SERVICE_NAME, 
        supervisor.clients_waiting AS CWaiting,
        IFNULL(supervisor.clients_resent_waiting_area, 0) AS CWaiting_Resent_Area,
        supervisor.clients_attending AS CAttending,
        supervisor.clients_attended AS CAttended,
        (SELECT SUM(TIME_TO_SEC(TIMEDIFF(NOW(), time_waiting)) / CWaiting) 
         FROM supervisor_time_data 
         WHERE supervisor_time_data.id_service = supervisor.id_service) AS TME, 
        (SELECT SUM(TIME_TO_SEC(TIMEDIFF(NOW(), time_attending)) / CAttending) 
         FROM supervisor_time_data 
         WHERE supervisor_time_data.id_service = supervisor.id_service) AS TMA, 
        (SELECT TIME_TO_SEC(MAX(TIMEDIFF(NOW(), time_waiting))) 
         FROM supervisor_time_data 
         WHERE supervisor_time_data.id_service = supervisor.id_service) AS MTE, 
        (SELECT TIME_TO_SEC(MAX(TIMEDIFF(NOW(), time_attending))) 
         FROM supervisor_time_data 
         WHERE supervisor_time_data.id_service = supervisor.id_service) AS MTA,
        supervisor.tme_accumulated AS TME_ACCUMULATED,
        supervisor.tma_accumulated AS TMA_ACCUMULATED
 FROM supervisor, supervisor_time_data, agenda, specialities
 WHERE supervisor.id_service = agenda.id 
   AND supervisor_time_data.id_service = supervisor.id_service 
   AND agenda.idspeciality = specialities.id
   AND supervisor.booked_or_sequential = 0
   AND supervisor.id_service IN (1,2,3) 
 GROUP BY supervisor.id_service
 ORDER BY agenda.name ASC; 
```

它需要超过 3 秒，在评论 GROUP BY 行时需要 8 毫秒。

关于如何优化此查询的任何想法？

谢谢

编辑：

```
CREATE TABLE `supervisor` (
  `id` int(9) NOT NULL AUTO_INCREMENT,
  `id_department` int(6) DEFAULT NULL,
  `id_service` int(9) DEFAULT NULL,
  `clients_waiting` int(6) DEFAULT '0',
  `clients_attending` int(6) DEFAULT '0',
  `clients_attended` int(6) DEFAULT '0',
  `tma_accumulated` int(9) DEFAULT '0',
  `tme_accumulated` int(9) DEFAULT '0',
  `clients_resent_waiting_area` int(6) DEFAULT NULL,
  `booked_or_sequential` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_service` (`id_service`),
  KEY `booked_or_sequential` (`booked_or_sequential`),
  KEY `clients_waiting` (`clients_waiting`)
) ENGINE=MyISAM AUTO_INCREMENT=172 DEFAULT CHARSET=latin1; 
```

.

```
CREATE TABLE `supervisor_time_data` (
  `id` int(9) NOT NULL AUTO_INCREMENT,
  `id_ogs` int(32) DEFAULT NULL,
  `booked_or_sequential` tinyint(1) DEFAULT NULL,
  `time_waiting` datetime DEFAULT NULL,
  `time_attending` datetime DEFAULT NULL,
  `status` int(2) DEFAULT '0',
  `id_service` int(6) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_service` (`id_service`),
  KEY `time_waiting` (`time_waiting`),
  KEY `time_attending` (`time_attending`),
  KEY `booked_or_sequential` (`booked_or_sequential`)
) ENGINE=MyISAM AUTO_INCREMENT=2281 DEFAULT CHARSET=latin1; 
```

.

```
CREATE TABLE `agenda` (
  `id` int(3) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `idagenda` varchar(255) DEFAULT NULL,
  `iduser` int(3) DEFAULT NULL,
  `date_created` datetime DEFAULT NULL,
  `agendatype` tinyint(4) DEFAULT NULL,
  `idspeciality` int(6) DEFAULT NULL,
  `denomination` varchar(255) DEFAULT NULL,
  `ticket_count` int(3) DEFAULT NULL,
  `waiting` int(3) DEFAULT NULL,
  `ticket_start` int(3) DEFAULT NULL,
  `ticket_end` int(3) DEFAULT NULL,
  `ticket_letter` varchar(12) DEFAULT NULL,
  `idcenter` int(9) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `idagenda` (`idagenda`),
  KEY `idspeciality` (`idspeciality`)
) ENGINE=MyISAM AUTO_INCREMENT=2228 DEFAULT CHARSET=latin1; 
```

.

```
CREATE TABLE `specialities` (
  `id` int(6) NOT NULL AUTO_INCREMENT,
  `name` varchar(255) DEFAULT NULL,
  `date_created` datetime DEFAULT NULL,
  `idwaitingarea` int(3) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=149 DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:12:10.610

这是您对连接的查询。如果这不起作用，请发布您的架构。

```
SELECT
  specialities.id              AS ID_DEPARTMENT,
  specialities.name            AS ID_DEPARTMENT_NAME,
  agenda.idagenda              AS ID_SERVICE,
  agenda.name                  AS ID_SERVICE_NAME,
  supervisor.clients_waiting   AS CWaiting,
  IFNULL(supervisor.clients_resent_waiting_area, 0) AS CWaiting_Resent_Area,
  supervisor.clients_attending AS CAttending,
  supervisor.clients_attended  AS CAttended,
  SUM(TIME_TO_SEC(TIMEDIFF(NOW(), supervisor_time_data.time_waiting)) / supervisor.clients_waiting) AS TME,
  SUM(TIME_TO_SEC(TIMEDIFF(NOW(), supervisor_time_data.time_attending)) / supervisor.clients_attending) AS TMA,
  TIME_TO_SEC(MAX(TIMEDIFF(NOW(), supervisor_time_data.time_waiting))) AS MTE,
  TIME_TO_SEC(MAX(TIMEDIFF(NOW(), supervisor_time_data.time_attending))) AS MTA,
  supervisor.tme_accumulated   AS TME_ACCUMULATED,
  supervisor.tma_accumulated   AS TMA_ACCUMULATED
FROM supervisor
  LEFT JOIN supervisor_time_data
    ON supervisor_time_data.id_service = supervisor.id_service
  LEFT JOIN agenda
    ON supervisor.id_service = agenda.id
  LEFT JOIN specialities
    ON agenda.idspeciality = specialities.id
WHERE supervisor.booked_or_sequential = 0
    AND supervisor.id_service IN(1,2,3)
GROUP BY supervisor.id_service
ORDER BY agenda.name ASC; 
```

# java - 批量选择记录 Spring JDBCTemplate

> ID：16165176
> 
> 赞同：5
> 
> 时间：2013-04-23T08:59:26.250
> 
> 标签：java, spring, jdbc, db2

我有一张大约有 500 万条记录的表。我想从这个表中读取所有记录并对它们进行一些处理。现在我想批量查询这些记录，一次说 1000 条，处理它们并获取下 1000 条记录，依此类推。

但是 JDBCTemplate.query 方法只返回包含表中所有记录的 List。显然我不能在内存中有 500 万条记录。

有没有办法使用 Spring JDBC 解决我的问题？如果有帮助，底层数据库将是 DB2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:43:01.517

尝试这样的事情

```
 jdbcTemplate.query(sql, new RowCallbackHandler() {
        public void processRow(ResultSet arg0) throws SQLException {
            // ...
        }
    }); 
```

这样您就可以一一处理任意数量的记录

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:07:08.223

阅读[JdbcTemplate 的 javadoc](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html)。还有很多其他方法，也称为`query()`，它们不返回列表，而是将 a`RowCallbackHandler`或 a`ResultSetExtractor`作为参数。使用这些。

要设置结果集一次获取的行数，覆盖[`applyStatementSettings()`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/jdbc/core/JdbcTemplate.html#applyStatementSettings%28java.sql.Statement%29)并调用[`Statement.setFetchSize()`](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#setFetchSize%28int%29)

# winapi - 如何在 WIN32 API 的 ReadDirectoryChange 中只刷新一次？

> ID：16165182
> 
> 赞同：1
> 
> 时间：2013-04-23T08:59:49.247
> 
> 标签：winapi, loops, refresh

我`ReadDirectoryChange`在 WIN32 API 中使用。复制 10 个文件夹后，我的程序运行刷新 10 次。但是我只希望它刷新一次。你能帮助我吗？这是我的代码：

```
bool FolderWatcher::Loop ()
{
    // declare a variable and using it to return
    int i = 0;
    // convert from WCHAR to LPWSTR
    LPWSTR ptr = _folder;
    char buf[256 * (sizeof(FILE_NOTIFY_INFORMATION) + MAX_PATH * sizeof(WCHAR))] = {0};
    DWORD bytesReturned = 0;
    BOOL result = FALSE;
    FILE_NOTIFY_INFORMATION *fni = NULL;
    // using CreateFile to choose folder need to watch
    HANDLE hDir = CreateFileW( 
        ptr,
        FILE_LIST_DIRECTORY | 
        STANDARD_RIGHTS_READ,
        //Enables subsequent open operations on a file or device to request read access.
        FILE_SHARE_READ | 
        //Enables subsequent open operations on a file or device to request write access.
        FILE_SHARE_WRITE | 
        //Enables subsequent open operations on a file or device to request delete access.
        FILE_SHARE_DELETE,
    NULL,
    //Opens a file or device, only if it exists.
    OPEN_EXISTING,
    FILE_FLAG_BACKUP_SEMANTICS,
    NULL);
    // check if directory is not exists
    if (!hDir || hDir == INVALID_HANDLE_VALUE)
    {
        i = 0;
    }
    else
    {
        for (;;)
        {
            // call ReadDirectoryChangeW to watch folder
            result = ReadDirectoryChangesW(hDir,
            buf,
            sizeof(buf) / sizeof(*buf),
            FALSE, /* monitor the entire subtree */
                FILE_NOTIFY_CHANGE_FILE_NAME |
                FILE_NOTIFY_CHANGE_DIR_NAME |
                FILE_NOTIFY_CHANGE_ATTRIBUTES |
                FILE_NOTIFY_CHANGE_SIZE | 
                /*FILE_NOTIFY_CHANGE_LAST_WRITE | 
                FILE_NOTIFY_CHANGE_LAST_ACCESS |*/
                FILE_NOTIFY_CHANGE_CREATION |
                FILE_NOTIFY_CHANGE_SECURITY,
            &bytesReturned,
            NULL,
            NULL);
                if (result && bytesReturned)
                {
                    wchar_t filename[MAX_PATH];
                    wchar_t action[256];
                    for (fni = (FILE_NOTIFY_INFORMATION*)buf; fni; )
                    {
                        switch (fni->Action)
                        {
                             // excute if a folder/ text docu is added
                            case FILE_ACTION_ADDED:
                            {
                                i = 1;
                                PostMessage (_hwndNotifySink, WM_FOLDER_CHANGE, 0, (LPARAM) _folder);
                            }
                                break;
                            // excute if a folder/ text docu is removed
                            case FILE_ACTION_REMOVED:
                            {
                                i = 1;
                                PostMessage (_hwndNotifySink, WM_FOLDER_CHANGE, 0, (LPARAM) _folder);
                            }
                                break;
                            case FILE_ACTION_MODIFIED:
                            {
                                i = 1;
                                if(lstrcmp(fni->FileName, L"service.log") != 0)
                                PostMessage (_hwndNotifySink, WM_FOLDER_CHANGE, 0, (LPARAM) _folder);
                                break;
                            }
                            // excute if a folder/ text docu is renamed
                            case FILE_ACTION_RENAMED_OLD_NAME:
                            {
                                i = 1;
                                PostMessage (_hwndNotifySink, WM_FOLDER_CHANGE, 0, (LPARAM) _folder);
                                break;
                            }
                            // excute if a folder/ text docu is renamed new name
                            case FILE_ACTION_RENAMED_NEW_NAME:
                            {
                                i = 1;
                                PostMessage (_hwndNotifySink, WM_FOLDER_CHANGE, 0, (LPARAM) _folder);
                            }
                                break;
                        }
                    if (fni->NextEntryOffset)
                    {
                        char *p = (char*)fni;
                        fni = (FILE_NOTIFY_INFORMATION*)(p + fni->NextEntryOffset);
                    }
                    else
                    {
                        fni = NULL;
                    }
                }
            }
            else
            {
                i = 0;
            }
        }   
    CloseHandle(hDir); // close handle
    }
    return i; // return value of i
    } 
```

万一`WM_FOLDER_CHANGE`，我调用刷新功能。

# function - 我应该在返回类型为 void 的函数中使用 cfreturn

> ID：16165192
> 
> 赞同：7
> 
> 时间：2013-04-23T09:00:23.947
> 
> 标签：function, coldfusion, void, cfml

正确的方法是什么？我认为两者都有效，但我想知道两者是否有好处。

```
<CFFUNCTION name="setSomething" access="public" output="no" returntype="void">
    <CFSET ... />
</CFFUNCTION> 
```

或者

```
<CFFUNCTION name="setSomething" access="public" output="no" returntype="void">
    <CFSET ... />

    <CFRETURN />
</CFFUNCTION> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-23T09:02:47.637

这没什么大不了的。这里没有对错。当返回类型被设置为`void`函数时不能返回任何东西。

如果需要，您可以`<cfreturn />`在代码中使用来提前退出函数。把它放在最后不会做任何事情，因为无论你把它放在那里，这个函数都不会返回任何东西。但是把它放在那里也没有什么坏处，有些人可能会认为如果它在那里声明“这里没有返回任何东西”会更清楚。

我认为这是个人喜好问题。

# c# - 从代码设置 MultiSelectList 的问题

> ID：16165194
> 
> 赞同：0
> 
> 时间：2013-04-23T09:00:28.030
> 
> 标签：c#, asp.net-mvc, razor

我正在开发一个简单的 asp.net mvc 应用程序，但是在多选列表中预选项目时遇到问题。这是我在控制器中的代码：

```
 ViewBag.Authors = new MultiSelectList(db.Authors, "AuthorId", "FullName", db.Authors.Where(a => a.Books.Any(b => b.BookId == id)).Select(a => a.AuthorId)); 
```

这是视图内的剃须刀代码：

```
<div class="editor-label">
    @Html.LabelFor(model => model.AuthorIds, "Authors")
</div>
<div class="editor-field">
    @Html.ListBoxFor(model => model.AuthorIds, (MultiSelectList)ViewBag.Authors)
    @Html.ValidationMessageFor(model => model.AuthorIds)
</div> 
```

它呈现多选列表，但不选择我在代码中设置的项目。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-09T17:11:29.470

我想回答这个问题有点晚了，但它*应该*可以将 model.AuthorIds （在控制器中）预填充到您想要在视图中选择的值。在 SelectList 上设置选定值的方法实际上是用于非强类型 Html.ListBox，而不是强类型 Html.ListBoxFor。

# asp.net-mvc - 使用 System.Net.Mail 发送的邮件最终位于“垃圾”文件夹中

> ID：16165197
> 
> 赞同：-4
> 
> 时间：2013-04-23T09:00:34.000
> 
> 标签：asp.net-mvc, razor

我有一个从表格发送电子邮件：

```
 System.Net.Mail.MailMessage message = new     System.Net.Mail.MailMessage();
                    message.To.Add(user.adresseEmail);
                    message.Subject = "This is the Subject line";
                    message.From = new System.Net.Mail.MailAddress("ad@live.com");
                    message.Body = "Login"+user.UserID+"\nPassword"+user.pwdUser;
                    //planet,topnet,ttnet
                    System.Net.Mail.SmtpClient smtp = new System.Net.Mail.SmtpClient("smtp.topnet.tn");
                    smtp.Send(message); 
```

但是收到的电子邮件不是在盒子里，而是在垃圾箱里。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:04:06.133

尝试更改主题和正文以更加用户友好。可能您的邮件提供商或邮件客户端“认为”它是垃圾邮件:)

# php - 从 amazon mws php api 中删除 DEBUG 信息

> ID：16165207
> 
> 赞同：0
> 
> 时间：2013-04-23T09:01:27.287
> 
> 标签：php, amazon, amazon-mws

当我在 linux cli 中使用亚马逊 MWS php API 时，代码会返回大量错误信息 - 输出以：-

```
About to connect() to mws.amazonservices.co.uk port 443 (#0)
Trying 178.236.4.102... connected
Connected to mws.amazonservices.co.uk (178.236.4.102) port 443 (#0)
Initializing NSS with cer.... 
```

实际的 PHP 代码如下：-

```
include_once ('MarketplaceWebService/.config.inc.php');  

function SubmitFeed(MarketplaceWebService_Interface $service, $request) 
{
try {
        $response = $service->submitFeed($request);
          if ($response->isSetSubmitFeedResult()) { 
              $submitFeedResult = $response->getSubmitFeedResult();
              if ($submitFeedResult->isSetFeedSubmissionInfo()) { 
                  $feedSubmissionInfo = $submitFeedResult->getFeedSubmissionInfo();
                  if ($feedSubmissionInfo->isSetFeedSubmissionId()) 
                  {
                      return $feedSubmissionInfo->getFeedSubmissionId();
                  }
              } 
          } 
} catch (MarketplaceWebService_Exception $ex) {
   echo("Caught Exception: " . $ex->getMessage() . "\n");  echo("Response Status Code: " . $ex->getStatusCode() . "\n");
   echo("Error Code: " . $ex->getErrorCode() . "\n");  echo("Error Type: " . $ex->getErrorType() . "\n");
   echo("Request ID: " . $ex->getRequestId() . "\n"); echo("XML: " . $ex->getXML() . "\n");
   echo("ResponseHeaderMetadata: " . $ex->getResponseHeaderMetadata() . "\n");
    }
}

$xml = '<?xml version="1.0" encoding="utf-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
<Header>
<DocumentVersion>1.01</DocumentVersion>
<MerchantIdentifier>xxxxxxxxxx</MerchantIdentifier>
</Header>
<MessageType>Inventory</MessageType>
<Message>
<MessageID>1</MessageID>
<OperationType>Update</OperationType>
<Inventory>
<SKU>VWDTA29E</SKU>
<Quantity>41</Quantity>
</Inventory>
</Message>
</AmazonEnvelope>';

$xmlHandle = @fopen('php://temp', 'rw+');
fwrite($xmlHandle, $xml);
rewind($xmlHandle);
$md5 = base64_encode(md5(stream_get_contents($xmlHandle), true));

$parameters = array (
  'Merchant' => MERCHANT_ID,
  'FeedType' => '_POST_INVENTORY_AVAILABILITY_DATA_',
  'FeedContent' => $xmlHandle,
  'PurgeAndReplace' => false,
  'ContentMd5' => $md5,
);

$request = new MarketplaceWebService_Model_SubmitFeedRequest($parameters);
echo $feedsubmissionid = SubmitFeed($service, $request); 
```

我怎样才能阻止显示此信息，因为这仅在测试而不是生产中有用？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:50:49.597

找到它 - 在 Client.php 中的私有函数 getDefaultCurlOptions rem out 或设置 CURLOPT_VERBOSE = false！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:58:02.797

对此无能为力，我面临同样的问题，并且也很难跟踪您的输出。但是尝试通过跟踪 echo 语句来编辑 Feeds API 类文件（如果有的话）！

> 好运...

# compilation - 共享对象编译错误

> ID：16165209
> 
> 赞同：2
> 
> 时间：2013-04-23T09:01:29.083
> 
> 标签：compilation, shared-libraries, shared

我正在尝试编译一个库 libEncryption.so。

这是我的make文件包含的内容：

```
cc -g -w -fPIC  -c -ISource/Header -I//usr/local/ssl/include -L//usr/local/ssl/lib -     lssl -lcrypto Source/Common/C/Encryption.c -DBIT64 -DDBG -DLITTLEENDIAN -DOMS -DRMS
mv Encryption.o Objects/Encryption.o
ld -fPIC -G  Objects/Encryption.o  -L/usr/local/ssl/lib -lssl -lcrypto -o   libEncryption.so 
```

在运行这个我不断收到以下错误

> ld: /usr/local/ssl/lib/libcrypto.a(sha1dgst.o): 重定位 R_X86_64_32 反对 `a local symbol' 在制作共享对象时不能使用；使用 -fPIC /usr/local/ssl/lib/libcrypto.a 重新编译：无法读取符号：错误值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T08:42:02.020

它告诉你 libcrypto.a 不是用`fPIC`.

您应该使用 重建它，或者在编译您的东西时`-fPIC`放弃使用。`-fPIC`

# oauth - glassfish3.1.2.2：com.sun.jersey.oauth.signature.UnsupportedSignatureMethodException：任何方法

> ID：16165210
> 
> 赞同：0
> 
> 时间：2013-04-23T09:01:29.943
> 
> 标签：oauth, glassfish, jax-rs, netbeans-7

我尝试使用以下环境实现 jersey-oauth：glassfish 3.1.2.2 with Netbeans 7.3 as IDE jersey 1.17 我手动升级了 glassfish/modules jersey-oauth 1.17 上的 jersey jars

JaxRS 资源运行良好，直到代码尝试调用

> com.sun.jersey.oauth.signature.OAuthSignature.getSignatureMethod()

最后一行导致了这个异常：

> com.sun.jersey.oauth.signature.UnsupportedSignatureMethodException：在 com.sun.jersey.oauth.signature.OAuthSignature.getSignatureMethod(OAuthSignature.java:257) 上的 HMAC-SHA1 在 com.sun.jersey.oauth.signature.OAuthSignature.verify (OAuthSignature.java:124)

所以我认为可能无法正确支持 HMAC-SHA1。然后我用了其他方法，没有一个成功。

请有人帮忙吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:50:18.807

只为那些遇到这个问题的人。

正如我所说，我试图在 glassfish 上升级球衣版本。但是我意识到它没有生效，因为有osgi-cache。

为确保对球衣 jar 的更改生效，建议在服务器未运行时删除 /glassfish/domains/youdomain/osgi-cache 文件夹。

无需担心此文件夹，因为它将在下次服务器启动时自动生成。

# wordpress - 如何为移动版设置不同的静态主页？（WordPress）

> ID：16165211
> 
> 赞同：14
> 
> 时间：2013-04-23T09:01:32.873
> 
> 标签：wordpress

我想为我的移动版网站设置一个不同的静态主页。它并不是一个额外的移动版本，但它是响应式的。

我现在有一个全屏图像滑块设置为静态主页。由于网站的响应式构建，这可以缩放到屏幕大小，但在移动设备（例如 iPhone）上看起来不是很好。所以我有另一个主页模板，我想在移动设备上查看网站时使用它。

这可以通过任何插件来完成还是应该通过编码来完成？我不想使用主题切换器或类似的东西，我只想为移动设备设置不同的静态页面。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T09:59:42.227

您可以使用[`wp_is_mobile`](http://codex.wordpress.org/Function_Reference/wp_is_mobile)检查移动设备，并在[`template_redirect`](http://codex.wordpress.org/Plugin_API/Action_Reference/template_redirect)检测到移动设备时挂钩以加载不同的模板：

```
function so16165211_mobile_home_redirect(){
    if( wp_is_mobile() && is_front_page() ){
        include( get_template_directory() . '/home-mobile.php' );
        exit;
    }
}
add_action( 'template_redirect', 'so16165211_mobile_home_redirect' ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-03T14:49:41.733

我会将[Mobile-Detect](https://github.com/serbanghita/Mobile-Detect)包含在其自己的文件夹中的主题中，并将此代码添加到**header.php**的开头：

```
if( is_front_page() ){

    include_once('mobile-detect/Mobile_Detect.php');
    $detect = new Mobile_Detect(); 

    if ( $detect->isMobile() || $detect->isTablet() ) {
        $redirect_url = 'http://example.com/mobile_home';
        header('Location: ' . $redirect_url ); // Redirect the user
    }
} 
```

您可以自定义此解决方案以随心所欲地工作。我已经将它用于几个类似解决方案的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-04T14:05:24.340

这应该可以工作：（将其插入functions.php）

```
 //* Redirect homepage on mobile
add_action( 'wp_head', 'wps_params', 10 );
function wps_params() {
    ?>
    	<script>
	if (window.location.pathname == '/' && jQuery(window).width() <= 480) {
	   window.location = "/webshop/";
	}
	</script>

    <?php
}
```

将“/webshop/”替换为您的手机主页链接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-02T20:49:16.447

您可以尝试使用[detectmobilebrowsers](http://detectmobilebrowsers.mobi/)脚本。

我记得它只是一个 php 文件，只有一个函数，询问如何处理不同的移动设备（iPhone、iPad、Android、Windows Phone、BlackBerry 和 Palm 设备）。

[通过转到此函数生成器](http://detectmobilebrowsers.mobi/help/)页面，您可以更好地了解脚本的工作原理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-24T09:02:35.100

这很容易，无需编写所有代码。从 wordpress 存储库安装“重定向”插件。1\. 进入设置页面。2\. 使用您的默认桌面主页输入“源 URL” 3\. 在“匹配”选项中，选择“URL 和用户代理”并在“操作”选项中选择“重定向到 URL”。单击“添加重定向”。4\. 将出现新的配置选项。给你想要的任何标题。“源 URL”必须为空白（表示这是您的基本主页）。在“用户代理”选项中，选择 iPhone 还是 Android。在“匹配”选项上，为移动主页设置所需的重定向。

完毕！

您当然可以根据您之前使用该插件设置的重定向来区分桌面和移动设备上的主页。但是，您不能使用相同的 url 名称（例如：www.abcde.com 用于桌面，www.abcde.com/mobilehomepage 用于移动设备）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-14T00:19:39.493

这对我来说很棒：

```
function so16165211_mobile_home_redirect(){
    if( wp_is_mobile() && is_front_page() ){
        include( get_template_directory() . '/home-mobile.php' );
        exit;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-14T00:26:55.710

将以下内容添加到您的 functions.php 应该可以解决问题：

```
//* Redirect homepage on mobile

add_action( 'wp_head', 'wps_params', 10 );

function wps_params() {
?>

<script>
if (window.location.pathname == '/' && jQuery(window).width() <= 480) {
   window.location = "/webshop/";
}
</script>

<?php
} 
```

# wordpress - WP：使用高级自定义字段将 Vimeo ID 输入 iframe 代码

> ID：16165212
> 
> 赞同：0
> 
> 时间：2013-04-23T09:01:33.477
> 
> 标签：wordpress, vimeo

我在其他情况下使用过它并且似乎可以工作，但是 vimeo 抛出了一个错误......

```
<?php 
    echo '<iframe src="http://player.vimeo.com/video/';
        the_field('vimeo');
    echo ' title=0&amp;byline=0&amp;portrait=0" width="1000" height="565" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:23:44.387

尝试

```
<?php 

$videoID = get_field('vimeo');

echo '<iframe src="http://player.vimeo.com/video/'.$videoID.'&amp;title=0&amp;byline=0&amp;portrait=0" width="1000" height="565" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';

?> 
```

# api - Soundcloud API 密钥

> ID：16165214
> 
> 赞同：1
> 
> 时间：2013-04-23T09:01:35.340
> 
> 标签：api, soundcloud, api-key

当我在 Soundcloud 上创建应用程序时，我会得到一个客户端 ID 和客户端密码。在应用程序的设置屏幕中，我找不到 API 密钥。

javascript api 要求提供 API 密钥，我从哪里获得密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T19:11:51.837

**客户端 ID**就是 API 密钥的意思。

如果你使用他们的 JavaScript SDK，你会调用这个脚本来设置它：

```
SC.initialize({
    client_id: "YOUR_CLIENT_ID", // API key
    redirect_uri: "http://example.com/callback.html",
}); 
```

配置后，您可以使用 SDK 方法而无需`client_id`再次提供：

```
SC.get("/tracks", {q: "hello"}, function(tracks){
    // do something with the result tracks
}); 
```

如果您检查请求（例如使用 Firebug），您可能会`client_id`在请求的 URL 中看到您的：

```
http://api.soundcloud.com/tracks?q=hello&client_id=YOUR_CLIENT_ID 
```

# javascript - javascript, replace \n with \r\n

> ID：16165215
> 
> 赞同：11
> 
> 时间：2013-04-23T09:01:40.807
> 
> 标签：javascript, regex

I need to replace all `\n` with `\r\n`, but only if `\n` hasn't already `\r` previosly.
i.e.
`Hello\nGreat\nWorld` -> `Hello\r\nGreat\r\nWorld`
`Hello\r\nGreat\r\nWorld` -> `Hello\r\nGreat\r\nWorld`.

In Java i can do it in next way

```
"Hello\nGreat\nWorld".replaceAll("(?<!\r)\n", "\r\n"); 
```

But `(?<!X)` construct is absent in JS.
Any ideas, how can I do it in JS?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-23T09:05:38.823

Simply make the `\r` an optional part of the match, then you can replace with impunity:

```
"Hello\r\nWorld\n".replace(/\r?\n/g, "\r\n") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T09:06:06.167

```
str.replace('\r\n', '\n').replace('\n', '\r\n') 
```

# android - 我怎样才能让一个应用程序处于纵向模式，只有一个可以改变方向的 DialogFragment？

> ID：16165219
> 
> 赞同：0
> 
> 时间：2013-04-23T09:01:49.267
> 
> 标签：android, screen-orientation

我有一个应用程序，其中包含一个`Activity`和一些`Fragments`。我希望我的应用程序处于纵向模式，但有一个`DialogFragment`必须检测方向，并相应地更改其布局。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:02:52.520

在其中`onCreate`，您应该以编程方式将其方向设置为`SCREEN_ORIENTATION_UNSPECIFIED`

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

# c++ - 为什么我的列表在上次函数调用后被更改？

> ID：16165221
> 
> 赞同：0
> 
> 时间：2013-04-23T09:01:53.317
> 
> 标签：c++, visual-c++, linked-list, member

我有一个类`Polynomial`定义为

```
 template<typename, T>
   class Polynomial{
      Monomial<T> *head;
   public:
      Polynomial(Monomial<T> *p=NULL){ head=p;}
      Polynomial insert(T c, int n){
        Monomial<T>*q=new Monomial<T>(c,n);
        Monomial<T> *p=head, *t=NULL;
        while(p!=NULL && q->pw < p->pw) { t=p; p=p->next;}
        if(t==NULL){q->next=head; head=q; }
        else{ t->next = q;  q->next=p; }   
        return *this;
      }
      T evaluate(T x){
        T sum=0;
        for(Monomial<T>* p=head; p!=NULL; p=p->next)
            sum+=p->evaluate(x);
        return sum;
      }
   }; 
```

where`Monomial`是使用结构的链表。在我的主要功能中，我有

```
 10    int main(){
    20        Polynomial<int> p;
    30        cout<<p.insert(1,2).insert(2,3).insert(2,1).insert(4,5).evaluate(2);
    40        p.destroy();
    50    } 
```

我在第 30 行和第 40 行以及第 40 行有断点，在调试时我意识到虽然我的输出是正确的，但我所拥有的列表`p`并不是我所期望的，就像只`insert(1,2)`调用了第一个。所以我在`insert`and`evaluate`成员中设置了断点，我观察到所有的`insert`s 都在`evaluate`被调用之前完成，之后我的列表在第一次插入后返回到它的状态`insert(1,2)`。

我真的不明白为什么会发生这种情况，因为`insert`像这样分开电话后

```
 30     p.insert(1,2);    p.insert(2,3);    p.insert(2,1);    p.insert(4,5);
     40     cout<<p.evaluate(2); 
```

我得到了我想要的，但这两种方法有什么区别，为什么第一种方法没有给我想要的东西（即所有插入都存在）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:04:11.017

在

```
 Polynomial insert(T c, int n){ // <- returns the value which cannot be chained
    Monomial<T>*q=new Monomial<T>(c,n);
    Monomial<T> *p=head, *t=NULL;
    while(p!=NULL && q->pw < p->pw) { t=p; p=p->next;}
    if(t==NULL){q->next=head; head=q; }
    else{ t->next = q;  q->next=p; }   
    return *this;
  } 
```

您正在返回`*this`-> 好的，但是如果您想将其用作链式，则必须返回一个参考，例如

```
 Polynomial& insert(T c, int n){ // <- see the Polynomial&, returns reference, which can be chained
    Monomial<T>*q=new Monomial<T>(c,n);
    Monomial<T> *p=head, *t=NULL;
    while(p!=NULL && q->pw < p->pw) { t=p; p=p->next;}
    if(t==NULL){q->next=head; head=q; }
    else{ t->next = q;  q->next=p; }   
    return *this;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:04:48.917

您需要将方法的返回值更改为`insert`引用：

```
Polynomial & insert(T c, int n); 
```

当从此函数返回时，您现在所拥有的创建了对象的副本，随后的调用将值插入到副本中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T09:04:49.713

这是因为插入返回多项式。尝试返回参考：

```
Polynomial &insert(T c, int n){ 
```

通过返回多项式，插入总是返回对象本身的副本。所以第 30 行复制了许多原始 p，但 p 没有改变。

# php - PHP - 我无法更新我的数据库

> ID：16165222
> 
> 赞同：-4
> 
> 时间：2013-04-23T09:01:57.440
> 
> 标签：php

谁能帮我？

看来我无法使用我制作的这段代码更新我的数据库。

我不知道错了。

我想在表单中显示旧数据的同时更新指定 ID 的整行。

我该如何纠正？

```
<?php //upd_emp.php

  mysql_connect ("localhost", "root","")  or die (mysql_error());
  mysql_select_db ("emp_db0");
  $id =$_POST['emp_idn'];

  $result = mysql_query("SELECT * FROM emp_tbl WHERE emp_id  = '$id'");
  $test = mysql_fetch_array($result);
  if (!$result) 
    {
    die("Error: Data not found..");
    }
            $fname=$test['fname'] ;
            $mname= $test['mname'] ;                    
            $lname=$test['lname'] ;
            $email=$test['email'] ;

     if(isset($_POST['SAVE']))
     {  
 $f_save = $_POST['f_name'];
 $m_save = $_POST['m_name'];
 $l_save = $_POST['l_name'];
 $e_save = $_POST['e_mail'];

mysql_query("UPDATE emp_tbl SET fname ='$f_save', mname ='$m_save',
     lname ='$l_save',email ='$e_save' WHERE emp_id = '$id'")
            or die(mysql_error()); 
echo "Saved!";

     }

    ?>

    <form action = "upd_emp.php" method="post">

            First Name:<input type="text" name="f_name" value="<?php echo $fname ?>"/>
            Middle Initial:<input type="text" name="m_name" value="<?php echo $mname ?>"/>
            Last Name:<td><input type="text" name="l_name" value="<?php echo $lname ?>"/>
            Email Add:<input type="text" name="e_mail" value="<?php echo $email ?>"/>
            <input type="submit" name="save" value="SAVE" />

     </form>

This code here at top came from a form page after clicking the submit button "view.php"
   <?php $id =$_POST['emp_idn']; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:04:11.180

您正在使用

```
$_POST['SAVE'] 
```

在形式上它是“保存”

改变你的 $_POST

至

```
$_POST['save']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:42:23.997

更改以下条件

```
 if(isset($_POST['SAVE'])) 
```

这样

```
 if(isset($_POST['save'])) 
```

您错误地使用了提交按钮的名称。

# r - 计算每行的每周回报 - 应用

> ID：16165232
> 
> 赞同：3
> 
> 时间：2013-04-23T09:02:23.720
> 
> 标签：r, apply

我有一个非常基本的问题，但我不知道如何实现它：我有一个返回的 data.frame，其中每个工具的返回是逐行的：

```
 tmp<-as.data.frame(t(data.frame(a=rnorm(250,0,1),b=rnorm(250,0,1)))) 
```

现在我想计算每一行的每周收益，即每个后续五个元素的乘积（=1+return）。这样我就得到了 50 个不重叠的每周回报。

我怎样才能做到这一点？我希望我能把我的问题告诉你。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:14:39.390

嗯，这并不完全清楚，但包`zoo`和功能`rollapply`应该让你得到你想要的（我想！）：

```
tmp2 <- rollapply(t(tmp) , width = 5 , FUN = function(x) prod( 1 + x ) , by = 5 , by.column = TRUE )
head( tmp2 )
                  a             b
 [1,] -6.2279765402  0.2035895290
 [2,]  0.4088722374  3.3903379722
 [3,]  0.2112797361 -0.3812740172
 [4,]  0.7713020593 -0.0559832485
 [5,] -0.4930095796 -2.1750123558
 [6,]  6.2076460590  0.0188344154 
```

我曾经`t()`转置数据框，参数设置`width`窗口的大小，`by`参数设置窗口移动时移动多少元素，所以我们的宽度为5，每次移动5个位置，结果为50返回。同样，当我这样做时，R 是矢量化`function(x) prod( 1 + x )`的，如果 x 的每个元素超过一个，它会为 x 的每个元素添加一个，并且由于我们在函数中将宽度设置为 5，因此有 5 个元素`x`。

并且测试我们发现行'a'的前五列的乘积是：

```
 1+ tmp[1,1:5]
          V1      V2       V3       V4       V5
a -0.4655032 2.02795 2.133612 1.029273 3.004145

prod( 1+ tmp[1,1:5] )
[1] -6.227977 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:20:24.367

因此，据我所知，您想计算每行每五个后续列的乘积。这是代码：

```
# Sample data
set.seed(3)
tmp <- as.data.frame(t(data.frame(a=rnorm(250,0,1),b=rnorm(250,0,1))))

# Compute products per row in steps of five and rbind results afterwards
tmp.agg <- do.call("rbind", lapply(seq(nrow(tmp)), function(i) {
  sapply(seq(1, length(tmp), 5), function(j) {
    Reduce(prod, tmp[i,j:(j+4)] + 1)
  })
}))

tmp.agg
            [,1]         [,2]       [,3]         [,4]        [,5]        [,6]         [,7]        [,8]      [,9]      [,10]      [,11]       [,12]
[1,] -0.01642594 -0.004438307 -0.0231848 -0.046496247 -0.08965697 -0.07132495 -0.144778621 -0.02727861 0.1148542 0.17021314 -0.3852979 -0.46081791
[2,]  0.15293410  0.031532305  0.1023034  0.003880801 -0.01795657 -0.03010335 -0.000979364  0.48269767 0.1357064 0.04855989  0.4002406  0.06878954
          [,13]         [,14]         [,15]        [,16]      [,17]         [,18]       [,19]        [,20]        [,21]       [,22]      [,23]        [,24]
[1,] 0.05578327 -0.0461665415 -0.0009288497  0.054057705 -0.4094909 -0.0004848274  0.22665096 -0.003439506 -0.161383874  0.07839329 0.06254542 1.320146e-05
[2,] 0.26472709 -0.0001023569  0.0565177862 -0.009908618 -0.3056234 -0.0798260012 -0.03187966  0.001753645 -0.003536846 -0.05118659 0.72050663 1.726878e-01
          [,25]      [,26]       [,27]      [,28]       [,29]      [,30]       [,31]      [,32]       [,33]      [,34]         [,35]      [,36]       [,37]
[1,] 0.09297968 -0.3897201 -0.03092538  3.4957663 0.316273690 0.25769516 -1.54040152 0.04903115 -1.72941882 -0.7814886 -6.448821e-03 -7.1289278  0.01151266
[2,] 0.03609944  0.5364990  0.01610708 -0.0652631 0.007055414 0.02600772 -0.03116456 2.30021712  0.01136907  0.1532950 -2.141868e-05 -0.7549226 -0.13295228
             [,38]       [,39]       [,40]       [,41]        [,42]      [,43]      [,44]       [,45]      [,46]       [,47]      [,48]       [,49]
[1,] -0.4453617085  1.22240858  0.01303989 -0.30123118 -6.736829848 -0.0988588 -0.2314011 0.120263690 0.05006402  0.17631687 0.03386454 -0.14113772
[2,]  0.0005811551 -0.08559412 -6.35558415  0.01240032  0.001522634  0.1929070 -0.3015167 0.000790891 2.07795076 -0.05711388 0.17521929  0.03909323
           [,50]
[1,] -0.11744356
[2,]  0.09676705 
```

# c# - 在线程池中提交队列

> ID：16165235
> 
> 赞同：0
> 
> 时间：2013-04-23T09:02:37.647
> 
> 标签：c#, threadpool

我正在使用这样的线程池启动一个线程：

```
 ThreadPool.QueueUserWorkItem(new WaitCallback(outp), (object)new object[] { output}); 
```

输出是一个队列。

这是调用函数：

```
 private void outp(object obj)
    {
        object[] arg = obj as object[];
        Queue<String> output = arg[0];
    } 
```

问题：arg[0] 无法转换为队列。如何正确地将队列提交到线程池？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:06:27.633

传递队列，而不是数组：

```
ThreadPool.QueueUserWorkItem(new WaitCallback(outp), output); 
```

使用队列：

```
private void outp(object obj)
{
    Queue<string> output = obj as Queue<string>;
    // use queue here
} 
```

* * *

顺便说一句，您不需要显式创建回调委托。只需传递方法：

```
ThreadPool.QueueUserWorkItem(outp, output); 
```

如果多个线程同时访问您的队列，还可以考虑使用[ConcurrentQueue 。](http://msdn.microsoft.com/en-us/library/dd267265.aspx)

# javascript - 将 moment.js 与 lang 文件和 require.js 一起使用

> ID：16165239
> 
> 赞同：10
> 
> 时间：2013-04-23T09:02:48.713
> 
> 标签：javascript, requirejs, momentjs

我目前正在尝试将 moment.js 库与 require.js 一起使用，但我仍然无法理解此类项目的正确设置。这是我在 main.js 文件中所做的：

```
requirejs.config({
    baseUrl: 'app',

        paths: {
            // ... more parameters (all Backbone related)
            'moment': 'lib/moment',
            'moment_de': 'lib/lang/de',
        },

    shim: {
        'moment' : {
            deps: [],
        },

        'moment_de': {
            deps: ['moment'],
        },

        // ... more parameters (all Backbone related)
    }
}); 
```

我正在使用单独的模块进行配置。该模块如下所示：

```
define(['moment', 'moment_de'], function(moment, de) {

    moment.lang('de');

    var configuration = {}
    // ...    
    return configuration;
}); 
```

如您所见，我正在尝试更改此文件中时刻对象的全局语言，但遇到以下错误消息：

```
Uncaught Error: Module name "../moment" has not been loaded yet for context: _. Use require([]) 
```

后来：

```
Uncaught TypeError: Cannot call method 'preparse' of undefined 
```

第一条错误消息是正在加载的语言模块，尽管它应该在 moment 模块之后加载（如果我做得对的话）。第二个是从试图切换到尚未加载的语言模块的那一刻模块。

有人可以对这个问题有所了解。提前致谢。

**编辑**：我使用缩小的语言版本（例如[这个](https://github.com/timrwood/moment/blob/develop/min/lang/de.js)）解决了这个问题。显然，缩小版本使用的是 AMD 格式，这样可以更容易地包含在 require.js 项目中）。

不过，我仍然不太明白为什么不能使用 shim 配置包含语言。也许有人可以试着解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-29T16:11:48.503

## 另一个解决方案（2015）：

此示例旨在演示如何将`moment.js`翻译与`navigator.language`属性一起使用，通常是用户的首选语言。

[在requirejs](/questions/tagged/requirejs "show questions tagged 'requirejs'")配置中分别定义`moment.js`和语言文件，如下所示：

```
require.config({
  config: {
    'moment': {
      noGlobal: true
    }
  },
  paths: {
    ...
    'moment': '../vendor/moment/moment',
    'moment_de': '../vendor/moment/locale/de',
    'moment_pl': '../vendor/moment/locale/pl'
    ...
  },
  ...
}); 
```

创建一个小模块，例如`lib/moment.js`并指定您的语言配置（您可以[在此处](http://www.metamodpro.com/browser-language-codes)找到 RFC 4646 语言标签列表）：

```
define(function(require) {
  'use strict';

  var moment = require('moment'), locale;

  switch(navigator.language) {
    case 'de':
    case 'de-at':
    case 'de-de':
    case 'de-li':
    case 'de-lu':
    case 'de-ch':
      locale = 'moment_de';
    break;

    case 'pl':
      locale = 'moment_pl';
    break;

    ...
  }

  if (locale) {
    require([locale]);
  }

  return moment;
}); 
```

请注意：`moment.js`默认支持英文。

* * *

在您的[chaplinjs](/questions/tagged/chaplinjs "显示标记为“chaplinjs”的问题")视图类（或任何其他[mvc](/questions/tagged/mvc "显示标记为“mvc”的问题")类/纯脚本等）中，像这样使用它：

```
define([
  'chaplin'
  'lib/moment'
], function(Chaplin, moment) {
  'use strict';

  var MyView = Chaplin.View.extend({

    ...

    parse: function() {
      ...
      console.log(moment().format('LLL'));
      ...
    }

    ...

  });

  return MyView;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-21T19:23:48.403

```
require({
    paths: {
        'moment': '//cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/moment.min',
        'moment_de': '//cdnjs.cloudflare.com/ajax/libs/moment.js/2.0.0/lang/de.min'
    }
}, ['moment', 'moment_de'], function(moment){
    moment.lang('de');
    alert(moment(1316116057189).fromNow());
}); 
```

您不需要填充模块，因为 moment.js 支持 AMD。 [http://jsfiddle.net/moderndegree/xYXUC/](http://jsfiddle.net/moderndegree/xYXUC/)

# c# - 以毫米为单位绘图

> ID：16165240
> 
> 赞同：0
> 
> 时间：2013-04-23T09:02:50.020
> 
> 标签：c#, .net, graphics, drawing

我正在一个需要绘图的项目中工作，我有一个问题。如何以毫米为单位绘制东西。我有这段代码，但结果似乎不准确。我用尺子在屏幕上测量了一下，大约是 38 毫米。这是代码：

```
e.Graphics.PageUnit = GraphicsUnit.Millimeter;
e.Graphics.DrawLine(Pens.Red, 10, 10, 50, 10); 
```

请给我指导，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:04:51.453

为了能够以“真实世界”的单位绘制某些东西，您需要了解几件事：

*   使用的分辨率
*   *附加显示器的物理*DPI（隐含包含物理屏幕尺寸的知识）

一个简单的例子：

两台计算机在 Windows 中具有相同的分辨率和相同的 DPI 设置。
但是，一台计算机连接了 13 英寸显示器，另一台计算机连接了 27 英寸显示器。
这意味着较小显示器上的物理像素密度要高得多，即每毫米像素更多。

因此，一条 10 毫米长的线需要在小型显示器上包含大约两倍的像素数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:15:02.267

丹尼尔是对的，“最坏的情况”你必须获得桌面分辨率和屏幕（监视器）DPI并自己计算单位。
但在第一次去我会尝试使用 TransformPoints：http: [//msdn.microsoft.com/en-us/library/k42sdzey.aspx](http://msdn.microsoft.com/en-us/library/k42sdzey.aspx)

# javascript - 如何清除 UIWebView 的 HTML5 应用缓存

> ID：16165241
> 
> 赞同：0
> 
> 时间：2013-04-23T09:02:52.317
> 
> 标签：javascript, html, uiwebview, browser-cache

我最近遇到了一个问题，即 HTML5 应用程序缓存在使用 UIWebView 呈现 html 内容的本机容器中停止工作。cache.manifest 文件已更改，UIWebView 开始下载过程但在某些文件上失败。在 iPad 的 Safari 中一切正常。如您所知，无法通过 JavaScript 了解应用程序缓存错误。所以我想完全清除缓存并从头开始。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:02:52.317

重新安装本机应用程序没有帮助。清理 HTML5 应用程序缓存的唯一方法是使用以下步骤：

1.  下载 iFunBox [http://www.i-funbox.com/](http://www.i-funbox.com/)
2.  连接设备并运行 iFunBox
3.  打开以下路径 Connected Devices=>Your Device Name=>User Applications=>Your native container app name=>Library=>Caches=>com.apple.WebAppCache
4.  删除 ApplicationCache.db 和 com.apple.WebAppCache 文件夹本身
5.  享受

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T14:34:37.333

从您的本机容器中，您可以清除 UIWebview 用于实现 HTML5 应用程序缓存的 sqlite 数据库。

我写了一篇关于它的文章，其中包含一些示例代码：[Clear the HTML5 Application Cache of an UIWebView](http://www.benjaminloulier.com/posts/clear-the-html5-application-cache-of-an-uiwebview)

# ios - UITableViewCell 调整高度而不改变它的内容 lauout

> ID：16165244
> 
> 赞同：3
> 
> 时间：2013-04-23T09:02:53.333
> 
> 标签：ios, iphone, objective-c, uitableview

这要死我了！
我有一个`UITableView`带有图像、姓名和电话号码的单元格。
看这里：

![在此处输入图像描述](https://i.stack.imgur.com/1xdcF.png)

现在，我想在触摸单元格时增加单元格的高度，以便在其中添加一些按钮。当我消耗单元格时，我还将它的 bg 图像更改为更高的图像。
我使用`[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];`它，它工作得很好，平滑地动画单元格，除了它也改变了单元格的内容：

![单元格的内容调整大小:(](https://i.stack.imgur.com/8i9MV.png)

**我能做些什么让内容在单元格调整大小后保持不变？**

顺便说一句，我确实尝试过使用，
`[_tableView beginUpdates];`
`[_tableView endUpdates];`
但细胞只是“跳”到了新的高度，所以我放弃了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:07:12.380

您需要了解 contentView 的布局。

如果您使用**Autolayout**，请检查您的约束 ( `cell.contentView.constraints`)。如果您使用**UIViewAutoresizing**，请为 contentView 的所有子视图设置正确的 autoresizingMasks ( `cell.contentView.autoresizingMask`)。您也可以尝试关闭 autoResizing ( `cell.contentView.autoresizesSubviews = NO`)，但这可能会导致错误的结果。

另外我想知道，为什么单元格背景图像中有一个箭头？可能您也应该使用其他图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:23:29.043

您可以创建两个自定义单元格，一个在扩展之前创建，另一个用于扩展单元格。当您触摸单元格时，存储选定的单元格`indexpath`并在重新加载表格时，相应地`cellForRowAtIndexPath:`检查`indexpath`和加载单元格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:08:29.523

尝试将`UIViewAutoresizing`姓名和电话号码标签（或内容中的任何其他 UI 元素）的掩码设置为固定的上边距。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T11:00:35.993

谢谢大家的回答，但没有任何帮助。起初我使用了内置的单元格项目（imageView、textLabel、detailTextLabel），这些项目随着单元格的转换而改变大小。
当我将带有定义框架的自定义子视图添加到它工作的单元格时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-08T00:51:20.457

尝试以下委托方法来设置 tableview 的高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 70.0;
} 
```

您可以创建一组图像

```
imgPaths = [[NSArray alloc] 
                initWithObjects:
                [[NSBundle mainBundle] pathForResource:@"abc" ofType:@"png"],
                [[NSBundle mainBundle] pathForResource:@"def" ofType:@"png"],nil]; 
```

将其添加到 cellForRowAtIndexPath 方法中。

例子：

```
[cell.imageView setImage:[UIImage imageWithContentsOfFile:[imgPaths objectAtIndex:indexPath.row]]]; 
```

# knockout.js - 淘汰赛链接 DropDownList ko.observableArray() - 选择的插件

> ID：16165246
> 
> 赞同：0
> 
> 时间：2013-04-23T09:02:56.427
> 
> 标签：knockout.js, jquery-chosen

主要问题是我需要链接两个选择。当我在第一个选择一个国家时，第二个必须显示所选国家的州。

我得到了什么，自定义绑定：

```
 ko.bindingHandlers.chosen = {
        init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
            $(element).chosen();            
        },
        update: function(element, valueAccessor, allBindingsAccessor, viewModel) {
            $(element).trigger("liszt:updated");         
        }
};

var viewModel = {
Comunidades : ko.observableArray([
    {"name": "Comunidad Valenciana" ,
     "id" : 0, "provincias": 
        [{"name" : "Alicante", "id": 0},
         {"name": "Valencia", "id" : 1},
         {"name": "Castellon", "id" : 2}
        ] } ,
    {"name": "Madrid" , "id" : 1 },
    {"name": "Murcia" , "id" : 2 }]
),
    ]),
selectedOne : ko.observableArray(),

ko.applyBindings(viewModel); 
```

有了这个，我在 HTML 选择中显示第一个数组，但我不知道如何在第一个选项中显示“Provincias”。

我会尝试做一个演示。

```
<link rel="stylesheet" href="http://harvesthq.github.com/chosen/chosen/chosen.css" />  
<select data-bind="options: Comunidades , value: selectedOne, chosen : true, optionsText: 'name', optionsValue: 'id'   "  class="chzn-select" style="width:300px;" ></select>

<select data-bind="options: Comunidades , value: selectedTwo, chosen : true, optionsText: 'name', optionsValue: 'id'   "  class="chzn-select" style="width:300px;" ></select>

<p data-bind="text: selectedOne"></bind>
<p data-bind="text: selectedTwo"></bind> 
```

[http://i.imgur.com/shqlFVp.png?1](http://i.imgur.com/shqlFVp.png?1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:49:10.060

[http://jsfiddle.net/benfosterdev/wHtRZ/](http://jsfiddle.net/benfosterdev/wHtRZ/)

```
]) 
```

有我启发的示例。使用带有 Knockout 的级联下拉列表，也有助于 Papa 示例。

# php - 用PHP计算PDF文件中的行数

> ID：16165247
> 
> 赞同：0
> 
> 时间：2013-04-23T09:03:00.770
> 
> 标签：php

在 PHP 脚本中，我需要计算 PDF 文件中的（文本）行数。我怎样才能做到这一点？我似乎在谷歌上找不到任何答案。

我感兴趣的PDF文件是硕士论文的绑定模板（由用户创建和上传）。我不希望在其中找到文本段落，而只是在单个页面上找到单行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-26T16:54:55.603

这是一个可能有效的简短建议。首先看看这个链接[http://www.phpclasses.org/browse/file/31030.html](http://www.phpclasses.org/browse/file/31030.html)。它是一个 pdf 到 txt 的转换器。如果您知道文本大小，则可以计算此脚本上的行。

```
include('class.pdf2text.php');
$a = new PDF2Text();
$a->setFilename('file.pdf');
echo $a->output();
...
Calculate how many lines the file contains 
```

# qt - 如何在 Qt C++ 中终止线程

> ID：16165248
> 
> 赞同：0
> 
> 时间：2013-04-23T09:03:04.240
> 
> 标签：qt, progress-bar, qthread

我曾经`QFuture`为我的代码中已有的函数启动一个线程，该函数需要很长时间并冻结我的 GUI。

该线程似乎工作正常：

```
QFuture<int> result = QtConcurrent::run(&m_DC, &DatabaseController::getAll); 
```

但是，当`getAll`函数结束时，我认为该线程仍在运行，它不应该运行，但我不知道如何结束或完成它。我查看了文档，但并没有真正说清楚。

基本上我在线程开始时将进度条显示为繁忙，并希望在线程结束时隐藏它

```
if(result.isRunning())
{
    ui->progressBar->setRange(0,0);
    ui->progressBar->show();
}

if(result.isFinished())
{
    ui->progressBar->hide();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:11:23.280

使用 QFutureWatcher 监控 QtConcurrent::Run 返回的 QFuture，将 QFutureWatcher::finished 连接到一个 slot 以包装你的 progressBar 的显示。就像是

```
connect(&job_watcher_,
        SIGNAL(finished()),
        SLOT(endLengthyJob())); 
```

主窗口.cpp

```
void MainWindow::endLengthyJob()
{
    ui->progress_bar->hide();
} // end_slot(MainWindow::endLengthyJob) 
```

附注：由 QtConcurrent::Run 生成的线程无法终止。

# java - 如何在一组自定义对象中查找对象

> ID：16165258
> 
> 赞同：0
> 
> 时间：2013-04-23T09:03:28.760
> 
> 标签：java, hashset

下面的代码包含一组自定义对象。我正在尝试搜索其中的对象。

我已经覆盖了 equals() 方法以将其与特定字段匹配，但我无法理解为什么它无法找到它。

> “XX\t未找到\tXX”

正在打印而不是

> “成立！！”

导入 java.util.HashSet；导入 java.util.Set；

```
public class TestEquals {

  private static Set<CustomObject> setCustomObjects;    

  public static void main(String[] args){
    setCustomObjects = new HashSet<CustomObject>();

    setCustomObjects.add(new CustomObject(2, "asas"));
    setCustomObjects.add(new CustomObject(3, "gdhdf"));
    setCustomObjects.add(new CustomObject(4, "bnbv"));
    setCustomObjects.add(new CustomObject(5, "ljhj"));

    AnotherObject anObj = new AnotherObject(3, 4);

    if(setCustomObjects.contains(anObj)){
        System.out.println("Found!!");
    }else{
        System.out.println("XX\tNot Found\tXX");
    }
  }
}

class CustomObject {

  public CustomObject(int test, String name) {
    this.test = test;
    this.name = name;
  }

  private int test;
  private String name;

  @Override
  public boolean equals(Object obj) {
    if(obj instanceof AnotherObject){
        AnotherObject temp = (AnotherObject)obj;
        System.out.println("test" + temp.getOtherTest());
        return this.test == temp.getOtherTest();
    }
    return true;
  }

  @Override
  public int hashCode() {
    int hash = 22;
    hash = 32 * hash + this.test;
    return hash;
  }

}

class AnotherObject {

  public AnotherObject(int otherTest, double test2) {
    this.otherTest = otherTest;
    this.test2 = test2;
  }

  private int otherTest;
  private double test2;

  public int getOtherTest() {
    return otherTest;
  }
  public void setOtherTest(int otherTest) {
    this.otherTest = otherTest;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:11:09.063

你还没有覆盖`equals`和`hashCode`in `AnotherObject`。这样做，你应该得到你所期望的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:27:30.020

使来自不同不相关类的 2 个对象被视为相等可能是一种反模式，但如果你真的必须这样做，那么你可以通过在它们中以相同的方式实现`equals()`和解决这个问题。`hashCode()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:09:25.890

HashSet 内部使用 HashMap。您的 CustomObject 和 AnotherObject 哈希值也必须相等才能找到它。

根据您关注的 int 为 AnotherObject 实现 hashCode 。

# c# - C# Json 动态对象

> ID：16165261
> 
> 赞同：4
> 
> 时间：2013-04-23T09:03:33.647
> 
> 标签：c#, json, object, dynamic

我正在使用 **Json 动态对象**。

这是我用来从对象中获取数据的方法：

```
string = obj.item.today.price; 
```

这很好用，问题是一旦我必须开始使用数字示例：

```
string = obj.daily.10000; 
```

它给了我一个错误

有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:11:57.213

`call` `10000 on daily object`仅仅因为`10000`它不是一个有效的[标识符](http://msdn.microsoft.com/en-us/library/aa664670%28v=vs.71%29.aspx)，那是不可能的。

让我解释一下这里发生了什么：

`JSON`解析器生成一些运行时类型，继承自一些基本`JSON`类型（例如`JsonObject`）。所以，`obj`是一些生成的类型，你`item`在它上面调用属性，它返回类似的生成类型，然后你调用`today`属性等等。

最后一步很奇怪，任何类型都不能有`10000`属性，无论是否生成。

但是，*如果库支持对对象的键值访问*，您可以尝试编写

```
obj.daily["10000"] 
```

或将 obj 转换为[JObject](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Linq_JObject.htm)（假设您使用的是 JSON.NET）并调用[Property](http://james.newtonking.com/projects/json/help/index.html?topic=html/T_Newtonsoft_Json_Linq_JObject.htm)方法：

```
var jsonObject = (JObject) obj;
var propertyValue = jsonObject.Property("10000").Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:17:10.307

如果你使用 Json.NET

```
string json = "{ dayly : { 1000 : 'asd' } }";
dynamic d = JsonConvert.DeserializeObject(json);
Console.WriteLine((d.dayly as JObject).Property("1000").Value); 
```

# expression - SSIS 表达式查找字符

> ID：16165263
> 
> 赞同：0
> 
> 时间：2013-04-23T09:03:43.583
> 
> 标签：expression, ssis

我正在使用 SSIS 2008。

我想要一个列的表达式，它必须查看传入的值是否包含句点。

如果它不包含句点，则必须在值的末尾添加一个 .00。

例子。

```
123.00 Stays 123.00
435 becomes 435.00 
```

![在此处输入图像描述](https://i.stack.imgur.com/e7Vq3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:32:05.333

试试这个表达式`Derived Column`

```
FINDSTRING(Column,".",1) != 0 ? column : column + ".00" 
```

![在此处输入图像描述](https://i.stack.imgur.com/tGja8.png)

# java - 从 ArrayOfByte 中逐字节提取

> ID：16165266
> 
> 赞同：2
> 
> 时间：2013-04-23T09:03:47.673
> 
> 标签：java, android

我有一个这样的 ArrayOfByte：

```
byte[] arrayOfByte = new byte[1024] 
```

它里面随机包含1,2,3,4的数组..

假设里面有大约 100 Byte 的数据，

我的问题是如何从中提取逐字节数据：我使用`Log.d(TAG, "arrayOfByte :"+arrayOfByte);`它会显示`arrayOfByte :[B@2b052c60`

现在我想分别提取每个字节，`display: 1,1,2,1,3,3,3,2,2,1,4,4,4,2,3,3,3...`就像这样

**更新：** 感谢 Sumit Singh，它有效..

现在假设我们`display: [1,1,1,2,3,2,2,2,1,1,1,0,0,0,0,0,0,0]`

**问题1：**如何将这些值放入一些`int[] series`

**问题2：**我可以从中删除一些起始元素并制作它吗`[2,2,1,1,1,0,0,0,0,0,0,0]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:06:05.487

您可以使用[Arrays.toString(byte[] a)](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#toString%28byte%5B%5D%29)：

> 返回指定数组内容的字符串表示形式。字符串表示由数组元素的列表组成，括在方括号 ("[]") 中。相邻元素由字符“,”（逗号后跟一个空格）分隔。元素被转换为字符串 by `String.valueOf(byte)`。如果 a 为空，则返回“空”。

```
Arrays.toString(arrayOfByte) 
```

它将返回您的字节数组的字符串表示形式，`1,1,2,1,3,3,3,2,2,1,4,4,4,2,3,3,3`例如

```
Log.d(TAG, "arrayOfByte :"+ Arrays.toString(arrayOfByte)); 
```

**为下一个问题更新**

**答案 1：**

*   有很多方法可以做到这一点，最简单的是遍历每个字节数组元素并将原语从 char 扩大到 int：[JLS 5.1.2 Widening Primitive Conversion](http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html#5.1.2)
*   您可以使用作为**NIO**一部分的[ByteBuffer](http://docs.oracle.com/javase/6/docs/api/java/nio/ByteBuffer.html) ，如下所示：

     **`int[] intArray = ByteBuffer.wrap(arrayOfByte).asIntBuffer().array()`** 

 ****答案 2：**

对于这个问题也有很多方法，我建议使用[Arrays.copyOfRange](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28byte%5B%5D,%20int,%20int%29)。它将返回具有给定范围的新数组。

> 将指定数组的指定范围复制到新数组中。范围 (from) 的初始索引必须介于零和 original.length 之间，包括两者。original[from] 的值被放入副本的初始元素中（除非 from == original.length 或 from == to）。原始数组中后续元素的值被放入副本中的后续元素中。范围（to）的最终索引，必须大于等于from，可能大于original.length，这种情况下（byte）0被放置在索引大于等于的副本的所有元素中到 original.length - 从。返回数组的长度将是 to - from。

```
byte[] newByteArray = Arrays.copyOfRange(arrayOfByte, startIndex, endIndex); 
```**

# sql-server-2008 - 创建兼容性矩阵

> ID：16165267
> 
> 赞同：1
> 
> 时间：2013-04-23T09:03:49.667
> 
> 标签：sql-server-2008, tsql

我的数据如下：

```
[attribute] [value]
foo yellow
foo green
foo red
foo blue
foo orange
foo cyan
foo magenta
foo white
foo brown
foo purple 
```

[在这个小提琴中提供](http://sqlfiddle.com/#!3/d41d8/12764/0)

我想将数据转换为兼容性矩阵的一种框架，它应该看起来像（ cols 和 rows 基于属性值）：

```
 yellow green red blue orange cyan magenta white brown purple
yellow    x
green            x
red                   x
blue                      x
orange                          x
cyan                                  x
magenta                                      x
white                                               x
brown                                                     x
purple                                                          x 
```

同种属性应自动填充`x`，其他所有组合由用户稍后设置。由于`values`per的数量`attribute`可能会有所不同，因此如果动态完成转换会很好。

我使用 pivot / unpivot 拍摄了一些照片，但只改变了 cols ans 行 - 所以只走了一半（或四分之一；））的方式。

任何帮助或提示表示赞赏！

**编辑**：为了更好地理解，我更改了演示数据的属性值。颜色值以前是数字。

**Edit2**：根据斯蒂芬的更新答案和所提到的动态获取结果的目标，我添加了以下示例查询。也许有人可以使用它，有同样的需要。#data 是提供基础数据的临时表。

```
DECLARE     @SQL VARCHAR(MAX);
SET         @SQL = 'SELECT ' + '?placeholder?' + ' as name, '
SELECT @SQL = @SQL + case when row_number() over ( order by rand() ) > 1 then ',' else '' end +  'case value when ''' + cast( d.value as nvarchar ) + ''' then 1 else 0 end as "' +  cast( d.value as nvarchar ) + '"' from #data as d;
select @sql = @sql + ' from #data;'
set @SQL = replace( @sql, '?placeholder?', 'value' );
--select @SQL;
exec ( @sql ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:18:19.683

如果我正确理解了你的问题，你可以试试这个：

**编辑**更新到新要求

```
CREATE TABLE `test_matrix_colors` (
  `color` varchar(255) NOT NULL
);

INSERT INTO `test_matrix_colors` (`color`) VALUES
('yellow'),
('green'),
('red'),
('blue'),
('orange'),
('cyan'),
('magenta'),
('white'),
('brown'),
('purple');

SELECT 
    color,
    IF(color='yellow',1,0) as yellow,
    IF(color='green',1,0) as green,
    IF(color='red',1,0) as red,
    IF(color='blue',1,0) as blue,
    IF(color='orange',1,0) as orange,
    IF(color='cyan',1,0) as cyan,
    IF(color='magenta',1,0) as magenta,
    IF(color='white',1,0) as white,
    IF(color='brown',1,0) as brown,
    IF(color='purple',1,0) as purple
FROM 
    test_matrix_colors
WHERE 1 
```

我在本地获得的结果：

![在此处输入图像描述](https://i.stack.imgur.com/rCiHV.png)

之后，您可以获得所需的任何组合......例如蓝橙色：

```
SELECT
    orange as blue_orange
FROM (
    SELECT 
        color,
        IF(color='yellow',1,0) as yellow,
        IF(color='green',1,0) as green,
        IF(color='red',1,0) as red,
        IF(color='blue',1,0) as blue,
        IF(color='orange',1,0) as orange,
        IF(color='cyan',1,0) as cyan,
        IF(color='magenta',1,0) as magenta,
        IF(color='white',1,0) as white,
        IF(color='brown',1,0) as brown,
        IF(color='purple',1,0) as purple
    FROM 
        test_matrix_colors
    WHERE 1
) as tmp
WHERE
    color = 'blue' 
```

# c# - 在windows c#中将单词表移动到datagridview中

> ID：16165269
> 
> 赞同：0
> 
> 时间：2013-04-23T09:03:54.633
> 
> 标签：c#, windows, datagridview, ms-word

我有一个应用程序，其中数据存储在单词表中。我想把表格的内容放到gridview中。有没有可能这样做。下面是代码的一部分

```
private void FillDocumentInfo(Word._Document reportDoc, string heading, Hashtable documentInfo)
{
    object oEndOfDoc = "\\endofdoc"; /* \endofdoc is a predefined bookmark */
    object oMissing = System.Reflection.Missing.Value;

    Word.Paragraph oPara;
    object oRng = reportDoc.Bookmarks.get_Item(ref oEndOfDoc).Range;
    oPara = reportDoc.Content.Paragraphs.Add(ref oRng);
    oPara.Range.InsertParagraphBefore();
    oPara.Range.Font.Size = 20;
    oPara.Range.Text = heading;
    oPara.Range.Font.Bold = 1;

    oPara.Range.InsertParagraphAfter();
    Word.Range wrdRng = reportDoc.Bookmarks.get_Item(ref oEndOfDoc).Range;
    Word.Table oTable;
    wrdRng = reportDoc.Bookmarks.get_Item(ref oEndOfDoc).Range;
    oTable = reportDoc.Tables.Add(wrdRng, documentInfo.Count, 2, ref oMissing, ref oMissing);
    oTable.AutoFitBehavior(Word.WdAutoFitBehavior.wdAutoFitContent);
    oTable.Range.ParagraphFormat.SpaceAfter = 6;

    IDictionaryEnumerator _enumerator = documentInfo.GetEnumerator();
    int r = 1, c = 1;
    while (_enumerator.MoveNext())
    {
        oTable.Rows[r].Range.Font.Bold = 0;
        oTable.Rows[r].Range.Font.Italic = 1;
        oTable.Cell(r, c++).Range.Text = _enumerator.Key.ToString();
        oTable.Cell(r++, c--).Range.Text = _enumerator.Value.ToString();

        List<string> cellValues = new List<string>();

        string cellContents = _enumerator.Key.ToString();
        string cellcont = _enumerator.Value.ToString();
        // add the cell contents to the array, but remove the strange termination character on the end of the data
        cellValues.Add(cellContents.Remove(cellContents.Length - 1));
        cellValues.Add(cellcont.Remove(cellcont.Length - 1));

        AddWordTableRow(cellValues);
    }                                    
    documentInfo.Clear();
}

public void AddWordTableRow1(string name, string address)
{
    dataGridView1.Rows.Add(new string[] { name, address});
}

public void AddWordTableRow(List<string> cellValues)
{
    DataGridViewRow dr = new DataGridViewRow();
    dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells; 
    AddWordTableRow1(cellValues[0], cellValues[1]);
} 
```

这里出现跨线程操作异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:36:11.923

您可能需要调用 AddWordTableRow1() 方法。您可以使用您在评论中发布的操作尝试此操作，也可以尝试使用我用于调用的这个有用的扩展方法；

```
public static void InvokeEx<T>(this T @this, Action<T> action) where T : ISynchronizeInvoke
        {
            if (@this.InvokeRequired)
            {
                @this.Invoke(action, new object[] { @this });
            }
            else
            {
                action(@this);
            }
        } 
```

在你的情况下，像这样使用它；

```
dataGridView1.InvokeEx(() => dataGridView1.Rows.Add(new string[] { name, address})); 
```

编辑#1：

此外，如果您希望填充行/列以显示您放入其中的数据，请尝试修改数据网格属性；**AutoSizeColumnsMode**和**AutoSizeRowsMo​​de**

# symfony - “Doctrine\ORM\EntityRepository”的 symfony2 类子类不是有效的实体或映射的超类

> ID：16165272
> 
> 赞同：5
> 
> 时间：2013-04-23T09:04:00.047
> 
> 标签：symfony, doctrine

```
namespace griffin\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
/**
 * @ORM\Entity(repositoryClass="griffin\UserBundle\Entity\UserRepository")
 * @ORM\Table(name="users")
 */
class User {

    const STATUS_ACTIVE   = 1;
    const STATUS_INACTIVE = 0;

    /**
     * @ORM\Id
     * @ORM\Column(name="id_users", type="smallint")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $idUsers; 
```

和 Repository 类一样

```
namespace griffin\UserBundle\Entity;
use Doctrine\ORM\EntityRepository;

class UserRepository extends EntityRepository {

    public function getAdmin()
    {
        return $this->getEntityManager()
                ->createQuery('select * from users where users_groups_id = 1')
                ->getResults;
    }
} 
```

当我在我的控制器中调用它时

```
$results = $this->getDoctrine()
    ->getRepository('griffin\UserBundle\Entity\UserRepository')
    ->getAdmin();

var_dump($results); 
```

我有错误 `Class "griffin\UserBundle\Entity\UserRepository" sub class of "Doctrine\ORM\EntityRepository" is not a valid entity or mapped super class.`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T09:18:54.717

`getRepository()`将实体类作为第一个参数：

```
$results = $this->getDoctrine()
    ->getRepository('griffin\UserBundle\Entity\User')
    ->getAdmin(); 
```

* * *

**注意：快速查看**[EntityManager](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityManager.php#L734-L761)类本身总是一个好主意。如果这样做，您将看到以下方法签名`getRepository()`：

```
/**
 * Gets the repository for an entity class.
 *
 * @param string $entityName The name of the entity.
 *
 * @return EntityRepository The repository class.
 */
public function getRepository($entityName)
{
    //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:19:14.280

改为使用`$this->getDoctrine->getRepository('griffin\UserBundle\Entity\User')`。getRepository 方法需要您想要存储库的实体的名称，而不是存储库名称本身，因为并非每个实体都必须具有自定义存储库类。

请参阅[http://symfony.com/doc/master/book/doctrine.html#custom-repository-classes](http://symfony.com/doc/master/book/doctrine.html#custom-repository-classes)

# google-app-engine - Google App Engine + python 2.7：HTTP 错误 500：INKApi 错误

> ID：16165273
> 
> 赞同：1
> 
> 时间：2013-04-23T09:04:00.847
> 
> 标签：google-app-engine, python-2.7

我正在尝试来自 GAE 的非常简单的“Hello world 程序”，还有一行用于日志记录。

```
import webapp2
import logging

class MainPage(webapp2.RequestHandler):

    def get(self):
        logging.info('Executing my app.')
        self.response.headers['Content-Type'] = 'text/plain'
        self.response.write('Hello, webapp2 World!')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

此示例在部署到 apppot 后运行良好。

但随着开发环境。我可以从日志控制台看到日志，然后总是出现 INK 错误。我试图从不同的例子中复制代码，没有帮助。

我已经检查了 GAE 版本，偏好。一切似乎都很好。任何人都可以帮忙吗？

日志：

> ```
>  INFO     2013-04-23 08:38:20,326 main.py:8] Executing my app.
>  HTTPError()
>  HTTPError()
>  Traceback (most recent call last):
>   File "C:\Program Files\Google\google_appengine\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 1302, in communicate
>     req.respond()
>   File "C:\Program Files\Google\google_appengine\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 831, in respond
>     self.server.gateway(self).respond()
>   File "C:\Program Files\Google\google_appengine\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 2115, in respond
>     response = self.req.server.wsgi_app(self.env, self.start_response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\wsgi_server.py", line 246, in __call__
>     return app(environ, start_response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\request_rewriter.py", line 311, in _rewriter_middleware
>     response_body = iter(application(environ, wrapped_start_response))
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\python\request_handler.py", line 89, in __call__
>     self._flush_logs(response.get('logs', []))
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\python\request_handler.py", line 220, in _flush_logs
>     apiproxy_stub_map.MakeSyncCall('logservice', 'Flush', request, response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 94, in MakeSyncCall
>     return stubmap.MakeSyncCall(service, call, request, response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 320, in MakeSyncCall
>     rpc.CheckSuccess()
>   File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_rpc.py", line 156, in _WaitImpl
>     self.request, self.response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\ext\remote_api\remote_api_stub.py", line 200, in MakeSyncCall
>     self._MakeRealSyncCall(service, call, request, response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\ext\remote_api\remote_api_stub.py", line 226, in _MakeRealSyncCall
>     encoded_response = self._server.Send(self._path, encoded_request)
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 393, in Send
>     f = self.opener.open(req)
>   File "C:\Python27\lib\urllib2.py", line 406, in open
>     response = meth(req, response)
>   File "C:\Python27\lib\urllib2.py", line 519, in http_response
>     'http', request, response, code, msg, hdrs)
>   File "C:\Python27\lib\urllib2.py", line 444, in error
>     return self._call_chain(*args)
>   File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
>     result = func(*args)
>   File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
>     raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
> HTTPError: HTTP Error 500: INKApi Error
> Traceback (most recent call last):
>   File "C:\Program Files\Google\google_appengine\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 1302, in communicate
>     req.respond()
>   File "C:\Program Files\Google\google_appengine\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 831, in respond
>     self.server.gateway(self).respond()
>   File "C:\Program Files\Google\google_appengine\lib\cherrypy\cherrypy\wsgiserver\wsgiserver2.py", line 2115, in respond
>     response = self.req.server.wsgi_app(self.env, self.start_response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\wsgi_server.py", line 246, in __call__
>     return app(environ, start_response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\request_rewriter.py", line 311, in _rewriter_middleware
>     response_body = iter(application(environ, wrapped_start_response))
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\python\request_handler.py", line 89, in __call__
>     self._flush_logs(response.get('logs', []))
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\devappserver2\python\request_handler.py", line 220, in _flush_logs
>     apiproxy_stub_map.MakeSyncCall('logservice', 'Flush', request, response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 94, in MakeSyncCall
>     return stubmap.MakeSyncCall(service, call, request, response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_stub_map.py", line 320, in MakeSyncCall
>     rpc.CheckSuccess()
>   File "C:\Program Files\Google\google_appengine\google\appengine\api\apiproxy_rpc.py", line 156, in _WaitImpl
>     self.request, self.response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\ext\remote_api\remote_api_stub.py", line 200, in MakeSyncCall
>     self._MakeRealSyncCall(service, call, request, response)
>   File "C:\Program Files\Google\google_appengine\google\appengine\ext\remote_api\remote_api_stub.py", line 226, in _MakeRealSyncCall
>     encoded_response = self._server.Send(self._path, encoded_request)
>   File "C:\Program Files\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 393, in Send
>     f = self.opener.open(req)
>   File "C:\Python27\lib\urllib2.py", line 406, in open
>     response = meth(req, response)
>   File "C:\Python27\lib\urllib2.py", line 519, in http_response
>     'http', request, response, code, msg, hdrs)
>   File "C:\Python27\lib\urllib2.py", line 444, in error
>     return self._call_chain(*args)
>   File "C:\Python27\lib\urllib2.py", line 378, in _call_chain
>     result = func(*args)
>   File "C:\Python27\lib\urllib2.py", line 527, in http_error_default
>     raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
> HTTPError: HTTP Error 500: INKApi Error
> INFO     2013-04-23 16:38:22,436 server.py:561] default: "GET / HTTP/1.1" 500 - 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T01:41:30.890

我遇到了同样的问题 INKApi 错误，来自 erickthered 的答案解决了我的问题：[https ://stackoverflow.com/a/19460147/1591720](https://stackoverflow.com/a/19460147/1591720)

# java - 如何划分以不同语言特定字符开头的名称字符串

> ID：16165284
> 
> 赞同：1
> 
> 时间：2013-04-23T09:04:18.713
> 
> 标签：java, string, character-encoding, localization

如何划分以不同语言特定字符开头的名称字符串？

似乎是一个简单的问题，但除非你知道自己的方式，否则它有点难！

我希望在没有任何额外实用程序库的情况下做到这一点。可以只用 String 类来完成吗？

对不起（白痴我！）让我改写一下：

我在电话簿中有联系人姓名。其中一些是希伯来语/阿拉伯语，其中一些是中国人，还有一些是英语。我想将这些名称分解为以每种语言开头的名称。

我应该为此使用什么字符串实用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:09:10.780

您可以使用 String 类来做到这一点。使用要用于拆分和使用的字符创建正则表达式`String.split(regex)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:28:08.597

解决了！

这就是所谓的[Unicode Block](https://en.wikipedia.org/wiki/Unicode_block) 我遵循以下[SO 答案](https://stackoverflow.com/questions/810954/java-alphabets-in-different-languages?rq=1)

# javascript - 从 textarea 复制到 div，保留换行符

> ID：16165286
> 
> 赞同：16
> 
> 时间：2013-04-23T09:04:31.307
> 
> 标签：javascript, jquery, html, textarea

我有一个`<textarea>`和一个`<div>`（有一个`<p>`内部）。在区域中输入文本时，`<p>`会在 keyUp 时使用内容更新。

有没有办法从 textarea 中保留换行符（新行）并以某种方式让它们像 div/p 中的换行符一样工作？

用 ,替换双“新行”`</p><p>`也可以吗？这接近所见即所得的处理方式，但不希望这样做，这是一个非常小的项目。

* * *

这就是我到目前为止所得到的。

```
$(".box textarea").keyup(function () {
  var value = $(this).val();  
  $('.box p').text(value);
}); 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-23T09:10:00.767

您可能想要添加 CSS 规则`white-space: pre`或添加`white-space: pre-wrap`到`.box p`. 这将按原样显示空白。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-23T09:08:38.713

你可以简单地这样做：

```
$('.box textarea').keyup(function() {
    var value = $(this).val().replace(/\n/g, '<br/>');
    $(".box p").html(value);
}); 
```

`\n`这将替换元素中的所有换行符`textarea`并将它们全部替换为 html标签，这样您也可以在标签元素`<br/>`内的 textarea 中保留换行符。`<p>`

**简单的演示在这里：**

```
$('.box textarea').keyup(function() {
  $(".box p").html(this.value.replace(/\n/g, '<br/>'));
});
```

```
textarea,p {
  width: 90%;
  height: 80px;
}
p {
  border: 1px solid #eee;
  padding: 5px;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="box">
  <textarea></textarea>
  <br/>
  <p></p>
</div>
```

如果您可以更改您的 css 文件，那么您也可以按照*@Explosion Pills*的建议尝试以下解决方案。即使您仍然必须在此处使用 jquery 代码将`textarea`输入的文本添加`p`到事件标记，`keyup`例如：

```
$('.box textarea').keyup(function() {
  $(".box p").html(this.value);  // replace is not needed here
});
```

```
textarea,p {
  width: 90%;
  height: 80px;
}
p {
  border: 1px solid #eee;
  padding: 5px;
  white-space: pre; // <--- This is the important part
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="box">
  <textarea></textarea>
  <br/>
  <p></p>
</div>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-04T16:11:26.037

这是最简单和最安全的纯 jQuery 解决方案：

```
$(".box textarea").keyup(function () {
  var value = $(this).val();
  $('.box p').text(value).css('white-space', 'pre-wrap');
}); 
```

当然，如果你可以添加`.box p { white-space: pre-wrap }`到你的静态 CSS 样式中，那么你不需要用 jQuery 注入它。

（另请注意，这[`white-space: pre-wrap`](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)也会导致多个连续的空格被保留，而不是折叠成一个空格。如果您不希望这样，但仍想保留换行符，请`white-space: pre-line`改用。）

* * *

附言。您*永远不*应该将未转义的用户输入传递给`.html()`（例如当前接受的答案），因为如果输入包含任何 HTML 元字符（如`&`or ），这样做会导致输出错误`<`，并且还可以打开您的 HTML 注入和跨站点脚本（XSS ) 攻击，如果输入可能受到恶意攻击者的影响。

如果您绝对坚持不`white-space`以任何形式使用 CSS 属性，则需要先转义输入中的任何 HTML 元字符，然后再将`<br>`标签添加到其中。可能最简单和最安全的方法是让浏览器为您处理转义，例如：

```
$(".box textarea").keyup(function () {
  var value = $(this).val();
  $('.box div.output').text(value).html(function (index, html) {
    return '<p>' + html.replace(/[^\S\n]+\n/g, '\n').replace(/\n\n+/g, '</p><p>').replace(/\n/g, '<br>') + '</p>';
  });
}); 
```

这将*首先*使用将输入文本复制到目标元素中`.text()`（自动对其进行 HTML 转义），然后修改生成的 HTML 代码以从行中删除尾随空格，将多个连续换行符折叠成段落分隔符，最后将单个换行符替换为`<br>`标签。

（注意，为了在输出中允许多个段落，目标元素实际上应该是 a `<div>`，而不是`<p>`元素。将一个元素嵌套`<p>`在另一个元素中是无效的 HTML，并且可能不会在不同的浏览器上产生一致的结果。）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T09:11:39.710

用于`string.replace("\n", "<br/>")`将文本区域中的任何换行符替换为页面中的新行。

JavaScript：

```
<script type="text/javascript">
function ta()
{
taValue = document.getElementById("ta").value;
taValue = taValue.replace("\n", "<br/>");
document.getElementById("tatext").innerHTML = taValue;
}
</script> 
```

HTML：

```
<textarea id="ta" onkeyup="ta()"></textarea>
<div id="tatext"></div> 
```

# html - 在下面的 CSS 中将图像浮动到文本的右侧

> ID：16165293
> 
> 赞同：1
> 
> 时间：2013-04-23T09:04:51.510
> 
> 标签：html, css, css-float

我不确定其他人是否遇到过这个问题。我正在尝试将图像放在标题下方（以及段落上方）并将其浮动到文本的右侧，并在图像左侧放置 10px 的边距。在我的 CSS 样式表中，我已经清楚地选择了图像并应用了“浮动：右”属性，但是当我刷新网页时，图像似乎仍然停留在标题下方的左侧。

我能找到的唯一解决方案是响应博客文章（'在 H3 标记旁边浮动图像'），它建议在图像代码之后向 HTML 添加规则。但这违背了 CSS 的全部意义。如果我想在我网站的多个页面上应用此规则怎么办？

我的HTML如下：

```
<!DOCTYPE HTML>
  <html>
    <head>
      <link rel="stylesheet"href="css/style.css" type="text/css" media="screen">
    </head>
    <body>
      <div id="header" class="grid_11">
        <h1>Birthdays<h1>
        <h2>Perfect Fun-Philled Events<h2>
      </div>

      <div id="content">
      <div class="post">
        <img src="img/birthday cookie.jpg" class="pic">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam commodo imperdiet libero, id dapibus lorem viverra sit amet. Phasellus eleifend diam a erat viverra nec sodales orci feugiat Maecenas molestie nisl at erat lobortis commodo non nec lectus.</p>
        <p><a href="http://3.bp.blogspot.com/_rwCJzc5dlWA/TPV7v1QQZsI/AAAAAAAAAjk/MgRY11AGuBA/s1600/PA300421.JPG">Original photo available here. </a></p> 
      </div>
    </body>
  </html> 
```

以及相应的CSS：

```
#content {
    float: left;
    width: 700px;
    margin-right: 20px;
}

#content .post {
    background: #FFF;
    padding: 10px;
    margin-bottom: 20px;
    border: 4px solid #DA6;
    color: #420600;
}

#content .post h3 {
    margin: 0;
    color: #420600;
}

#pic {
    float: right;
    margin-left: 10px;
    border: 4px solid #FFF;
} 
```

如果有人有任何建议，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:11:50.850

您正在使用`#`which 表示`id`. 你应该使用`.`for `class`，像这样：

```
.pic {
float: right;
margin-left: 10px;
border: 4px solid #FFF;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:47:46.560

```
you can change the Image tag to

<img src="img/birthday cookie.jpg" id="pic"  alt ="alternate text" />

if you not use this any where in the page then it's better to use id than class  and always use alt tag to image. 
```

# iphone - UIBezierPath 不绘制圆角底角

> ID：16165296
> 
> 赞同：12
> 
> 时间：2013-04-23T09:04:57.897
> 
> 标签：iphone, ios, uiview, rounded-corners, uibezierpath

我正在尝试为我的观点制作圆角并解决一个奇怪的问题。

我使用以下代码为我的视图制作圆角

```
bezierPath = [UIBezierPath bezierPathWithRoundedRect:btnView.bounds
                                       byRoundingCorners:UIRectCornerAllCorners
                                             cornerRadii:radius];
CAShapeLayer *maskLayer = [[CAShapeLayer alloc] init];
    maskLayer.frame = btnView.bounds;
    maskLayer.path = bezierPath.CGPath;
    btnView.layer.mask = maskLayer; 
```

问题是，它不适用于底角。如果我使用`UIRectCornerBottomLeft`没有任何反应，如果我`UIRectCornerAllCorners`只使用顶角是圆形的。

编辑：我不使用 layer.cornerRadius 因为我只想圆底角。

事实证明我没有问题，如果我`UIViewAutoresizingFlexibleHeight`从我的视图中删除自动调整大小的掩码。但我想使用自动调整大小的面具。如果可以，有可能吗？

我已经尝试在设置图层蒙版之前和之后设置 autoresizingMask。没运气！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-06-25T19:52:32.517

我刚刚遇到了一个需要几个小时才能解决的类似问题 - 答案非常简单：将我的代码从 viewDidLoad 移动到 viewDidLayoutSubviews：这是自动布局完成后调用的第一个方法....所以我怀疑我确实有 4 个圆角但不知何故，他们离开了屏幕的边缘。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T10:03:20.270

在我得到另一个答案之前，如果可以将 autoresizingMask 与 一起使用**，**`UIBezierPath`我会说“不”并标记为正确答案。

 **我不会删除我的问题，因为任何人都可以在不知道原因的情况下排除同样的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T23:06:13.867

解决方案：

```
-(void)roundCorners:(UIRectCorner)corner radius:(float)radius
{   
    _cornerRadius = radius;
    _corner = corner;
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect {
    // Drawing code
    [super drawRect:rect];

    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:self.bounds byRoundingCorners:_corner cornerRadii:CGSizeMake(_cornerRadius, _cornerRadius)];

    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = self.bounds;
    maskLayer.path = maskPath.CGPath;

    self.layer.mask = maskLayer;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T09:09:21.090

然后用波纹管代码代替圆角...

```
btnView.layer.cornerRadius = 8.0; 
```

`QuartzCore/QuartzCore.h`只需在您`.m`喜欢的下面导入...

```
#import <QuartzCore/QuartzCore.h> 
```

**更新：**

为此，您可以使用不同`RoundingCorners`的属性，`UIBezierPath`如下所示....

例如：`UIRectCornerBottomLeft`、`UIRectCornerBottomRight`、`UIRectCornerTopLeft`和`UIRectCornerTopRight`。`UIRectCornerAllCorners`

```
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect: btnView.bounds
                                               byRoundingCorners:UIRectCornerBottomLeft
                                                     cornerRadii:CGSizeMake(10.0, 10.0)];

CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = btnView.bounds;
maskLayer.path = maskPath.CGPath;
btnView.layer.mask = maskLayer;
[btnView setNeedsDisplay]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-12T02:21:39.717

我认为你应该使用

```
bezierPath.lineCapStyle = CGLineCap.Round 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T09:10:51.503

您可以用户`view.layer.cornerRadius`设置圆角。

编辑：使用以下

```
 layer.mask = MTDContextCreateRoundedMask(layer.bounds, topleftRadius, topRightRadius, bottomLeftRadius,bottomRightRadius); 
```

这是支持的方法。

```
static inline UIImage* MTDContextCreateRoundedMask(CGRect rect, CGFloat radius_tl, CGFloat radius_tr, CGFloat radius_bl, CGFloat radius_br)
{
    CGContextRef context;
    CGColorSpaceRef colorSpace;

    colorSpace = CGColorSpaceCreateDeviceRGB();

    context = CGBitmapContextCreate( NULL, rect.size.width, rect.size.height, 8, 0, colorSpace, kCGImageAlphaPremultipliedLast );

    CGColorSpaceRelease(colorSpace);

    if ( context == NULL ) {
        return NULL;
    }

    CGFloat minx = CGRectGetMinX( rect ), midx = CGRectGetMidX( rect ), maxx = CGRectGetMaxX( rect );
    CGFloat miny = CGRectGetMinY( rect ), midy = CGRectGetMidY( rect ), maxy = CGRectGetMaxY( rect );

    CGContextBeginPath( context );
    CGContextSetGrayFillColor( context, 1.0, 0.0 );
    CGContextAddRect( context, rect );
    CGContextClosePath( context );
    CGContextDrawPath( context, kCGPathFill );

    CGContextSetGrayFillColor( context, 1.0, 1.0 );
    CGContextBeginPath( context );
    CGContextMoveToPoint( context, minx, midy );
    CGContextAddArcToPoint( context, minx, miny, midx, miny, radius_bl );
    CGContextAddArcToPoint( context, maxx, miny, maxx, midy, radius_br );
    CGContextAddArcToPoint( context, maxx, maxy, midx, maxy, radius_tr );
    CGContextAddArcToPoint( context, minx, maxy, minx, midy, radius_tl );
    CGContextClosePath( context );
    CGContextDrawPath( context, kCGPathFill );

    CGImageRef bitmapContext = CGBitmapContextCreateImage( context );
    CGContextRelease( context );

    UIImage *theImage = [UIImage imageWithCGImage:bitmapContext];
    CGImageRelease(bitmapContext);

    return theImage.layer.mask;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-14T23:39:41.223

不得不改变视角。由于自动调整大小，viewDidLoad 中的底角无法使用。不得不将代码移动到 viewDidAppear。

```
-(void)viewDidAppear:(BOOL)animated{
[super viewDidAppear:animated];

CGRect bounds = self.view.bounds;
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:bounds byRoundingCorners:(UIRectCornerTopLeft | UIRectCornerBottomLeft) cornerRadii:CGSizeMake(5.0, 5.0)];

CAShapeLayer *maskLayer = [CAShapeLayer layer];
maskLayer.frame = bounds;
maskLayer.path = maskPath.CGPath;
self.view.layer.mask = maskLayer;

self.view.layer.masksToBounds = YES;
[self.view setNeedsDisplay];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-05-21T10:56:07.507

最后我成功了，它确实有效。试试看。

```
CGRect frame = self.accountBackgroundImage2.frame;
frame.size.height = self.view.bounds.size.height;
UIBezierPath *path=[UIBezierPath bezierPathWithRoundedRect:self.accountBackgroundImage2.bounds byRoundingCorners:(UIRectCornerBottomLeft |UIRectCornerBottomRight) cornerRadii:CGSizeMake(12.5, 12.5)];

CAShapeLayer *shapeLayer = [[CAShapeLayer alloc] init];
shapeLayer.frame = self.accountBackgroundImage2.bounds;
shapeLayer.path  = path.CGPath;
_accountBackgroundImage2.layer.mask = shapeLayer;
self.accountBackgroundImage2.frame = frame; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-08-04T20:56:50.040

另一种方式

在“ viewWillLayoutSubviews ”中执行

```
- (void)viewWillLayoutSubviews{
[self roundCornersOnView:self.buttonJoin onTopLeft:NO topRight:YES bottomLeft:YES bottomRight:NO radius:10.0];
} 
```

功能

```
-(UIButton *)roundCornersOnView:(UIButton *)button onTopLeft:(BOOL)tl topRight:(BOOL)tr bottomLeft:(BOOL)bl bottomRight:(BOOL)br radius:(float)radius {

if (tl || tr || bl || br) {
    UIRectCorner corner = 0; //holds the corner
    //Determine which corner(s) should be changed
    if (tl) {
        corner = corner | UIRectCornerTopLeft;
    }
    if (tr) {
        corner = corner | UIRectCornerTopRight;
    }
    if (bl) {
        corner = corner | UIRectCornerBottomLeft;
    }
    if (br) {
        corner = corner | UIRectCornerBottomRight;
    }

    UIButton *roundedView = button;
    UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:roundedView.bounds byRoundingCorners:corner cornerRadii:CGSizeMake(radius, radius)];
    CAShapeLayer *maskLayer = [CAShapeLayer layer];
    maskLayer.frame = roundedView.bounds;
    maskLayer.path = maskPath.CGPath;
    roundedView.layer.mask = maskLayer;
    return roundedView;
} else {
    return button;
} 
```

}**

# javascript - 如何使用hammer.js 和javascript？

> ID：16165297
> 
> 赞同：1
> 
> 时间：2013-04-23T09:05:12.970
> 
> 标签：javascript, html, iscroll, hammer.js, swipeview

如何使用 Hammer.js。**我想要电话间隙中应用程序的滑动视图。**完全正确**--->我的意思是一步一步的过程。我发现了一些基于它我尝试实现的东西。它**不起作用。Hammer.js中的代码**

```
(function(Hammer) {
    /**
     * ShowTouches gesture
     * requires jQuery
     * show all touch on the screen by placing elements at there pageX and pageY
     * @param   {Boolean}   [force]
     */
    Hammer.plugins.showTouches = function(force) {
        // the circles under your fingers
        var template = '<div style="position:absolute;z-index:9999;left:0;top:0;height:14px;width:14px;border:solid 2px #777;' +
            'background:rgba(255,255,255,.7);border-radius:20px;pointer-events:none;' +
            'margin-top:-9px;margin-left:-9px;"></div>';

        // elements by identifier
        var touch_elements = {};
        var touches_index = {};

        /**
         * remove unused touch elements
         */
        function removeUnusedElements() {
            // remove unused touch elements
            for(var key in touch_elements) {
                if(touch_elements.hasOwnProperty(key) && !touches_index[key]) {
                    touch_elements[key].remove();
                    delete touch_elements[key];
                }
            }
        }

        Hammer.detection.register({
            name: 'show_touches',
            priority: 0,
            handler: function(ev, inst) {
                touches_index = {};

                // clear old elements when not using a mouse
                if(ev.pointerType != Hammer.POINTER_MOUSE && !force) {
                    removeUnusedElements();
                    return;
                }

                // place touches by index
                for(var t= 0,total_touches=ev.touches.length; t<total_touches;t++) {
                    var touch = ev.touches[t];

                    var id = touch.identifier;
                    touches_index[id] = touch;

                    // new touch element
                    if(!touch_elements[id]) {
                        touch_elements[id] = $(template).appendTo(document.body);
                    }

                    // Paul Irish says that translate is faster then left/top
                    touch_elements[id].css({
                        left: touch.pageX,
                        top: touch.pageY
                    });
                }

                removeUnusedElements();
            }
        });
    };
})(window.Hammer); 
```

**当我编译并执行代码时，我得到了一个错误**

```
04-23 14:23:40.936: E/Web Console(740): TypeError: Result of expression 'Hammer' [undefined] is not an object. at file:///android_asset/www/hammer.js:8 
```

和

```
04-23 14:23:40.936: E/Web Console(740): ReferenceError: Can't find variable: Hammer at file:///android_asset/www/range.html?var%20id=results.rows.item(1).id:35 
```

**而在第 35 行中，我给出了..**

```
var hammer = new Hammer(document.getElementById("pageWrapper")); 
```

**html**

```
<div id="pageWrapper">
    <div class="page" >
    <h4 style="background-image:url(img/______.png); margin-bottom:80px; text-align:center;">hello</h4>
    <img src="img/______.png" style="margin-left:5px;" /><img align="middle"  />
</div> 
```

**因为，我遇到了错误，所以我尝试使用 [这里] （[https://github.com/cubiq/SwipeView/blob/master/src/swipeview.js](https://github.com/cubiq/SwipeView/blob/master/src/swipeview.js)）的 SwipeView.js 来实现它，它进入了循环..显示页面控制器，但缺少以下内容**

*   页面控制器被垂直而不是水平看到
*   为滑动视图设置的图像不可见。
*   页面垂直移动而不是水平移动

**我还发现一个 WARNING 作为 Miss a drag ，因为我们正在等待 WebCore 对着陆的响应。**

我尝试添加以下代码...没有变化

```
document.addEventListener( "touchstart", function(e){ onStart(e); }, false );
    function onStart ( touchEvent ) {
      if( navigator.userAgent.match(/Android/i) ) {
       touchEvent.preventDefault();
      }
    } 
```

**有什么补救措施或解决方案吗？**

# oracle10g - 深度克隆 Oracle 表

> ID：16165301
> 
> 赞同：0
> 
> 时间：2013-04-23T09:05:23.030
> 
> 标签：oracle10g

在 Oracle 中有一种方法可以深度克隆表 - 即克隆表定义 + 索引 + 触发器 + 约束（不要介意序列）。我知道：

```
create clone_table as 
  select * 
    from table 
```

，但它仅适用于表的字段。

我需要克隆具有大量索引/触发器等的大量表，我想将其自动化。该解决方案应该适用于 Oracle 10G，但它只是 11G，它也是可以接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:09:58.273

用于`dbms_metadata`此任务，尤其是它的功能`get_ddl`。

这是[Oracle 的文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_metada.htm#ARPLS640)，我相信您会在 Internet 上找到大量示例。

或者，根据您的确切要求，您可能会成功使用`dbms_datapump`或更老式的`exp`实用`imp`程序。

# awk - awk log2 除法/比率为零

> ID：16165312
> 
> 赞同：0
> 
> 时间：2013-04-23T09:05:57.110
> 
> 标签：awk, divide-by-zero

我有一个如下所示的**csv**文件：

```
ID1              ID2         AVG1     AVG2         
ENSG00000207447 RNU6-2    0.101431  0.163308     
ENSG00000207427 SNORA51   0.096551  0            
ENSG00000201784 SNORD14A  0.068653  0.0320985    
ENSG00000207315 SNORA28   0         0.01936      
ENSG00000207787 MIR98     0         0 
```

我想计算 and 的**log2**比率`AVG1`并将`AVG2`其打印在每行的 AVG 列旁边，使其看起来像这样：

```
ID1              ID2       AVG1         AVG2       log2Ratio
ENSG00000207447 RNU6-2    0.101431  0.163308     2.0632577007
ENSG00000207427 SNORA51   0.096551  0            inf
ENSG00000201784 SNORD14A  0.068653  0.0320985    7.105015172
ENSG00000207315 SNORA28   0         0.01936      0
ENSG00000207787 MIR98     0         0            inf 
```

我试过了

```
$ awk 'NF> 2 { ratio =($3/$4)/log(2) ; print $0, ratio }' testlog2.csv > testlog2_2.csv
and
$ awk 'BEGIN{OFS="\t"} {if ($4==0) {print $0, "inf"} else {print $0, ($3/$4)/log(2)}}' testlog2.csv > testlog2_2.csv 
```

但`awk`每当分母为 0 时就会一直崩溃。如果您有任何建议如何绕过它，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:21:01.463

您的问题是，您应该单独打印标题行。

验证它：

```
kent$  awk 'BEGIN{print "A"/"B"}'                                                                                                                                           
awk: cmd. line:1: fatal: division by zero attempted 
```

您可以将 awk 行更改为：

```
 awk 'BEGIN{OFS="\t"} NR==1{print;next}{if ($4==0) {print $0, "inf"} else {print $0, ($3/$4)/log(2)}}' file 
```

我对你的代码没有太大的改变，基本上是复制粘贴，只是添加`NR==1`部分。

**笔记**

如果您运行代码，您将看到输出与您的预期不同（您的问题中的示例）。我希望你的逻辑`($3/$4)/log(2)`是正确的。

`NR==1{...}`修复后的输出：

```
ID1              ID2       AVG1      AVG2
ENSG00000207447  RNU6-2    0.101431  0.163308   0.896061
ENSG00000207427  SNORA51   0.096551  0          inf
ENSG00000201784  SNORD14A  0.068653  0.0320985  3.08567
ENSG00000207315  SNORA28   0         0.01936    0
ENSG00000207787  MIR98     0         0          inf 
```

# python - 将字符串转换为嵌套的 XML 数据

> ID：16165316
> 
> 赞同：0
> 
> 时间：2013-04-23T09:06:01.890
> 
> 标签：python, xml, python-3.x

我有以下字符串：

```
"Sweden, Västmanland, Västerås" 
"Sweden, Dalarna, Leksand" 
"Ireland, Cork, Cobh"
"Ireland, Clare, Boston"
"Ireland, Cork, Baltimore"
"Sweden, Dalarna, Mora" 
```

我希望将其转换为 xml，如下所示：

```
<?xml version="1.0" ?> 
<data>
<country name = "Ireland">
    <region name = "Clare">
        <settlement name  = "Boston"/>
    </region>
    <region name = "Cork">
        <settlement name = "Baltimore"/>
        <settlement name = "Cobh"/>
    </region>
</country>

<country name = "Sweden">
    <region name = "Dalarna">
        <settlement name = "Leksand"/>
        <settlement name = "Mora"/>
    </region>
    <region name = "Västmanland">
        <settlement name = "Västerås"/>
    </region>
</country>
</data> 
```

python3 的内置库可能会帮助我进行这种转换，以便我不必要地重新发明轮子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:20:44.243

```
import xml.etree.ElementTree as ET
from collections import defaultdict

strings = ["Sweden, Västmanland, Västerås",
"Sweden, Dalarna, Leksand",
"Ireland, Cork, Cobh",
"Ireland, Clare, Boston",
"Ireland, Cork, Baltimore",
"Sweden, Dalarna, Mora"]

dd = defaultdict(lambda: defaultdict(list))

for s in strings:
    a, b, c = s.split(', ')
    dd[a][b].append(c)

root = ET.Element('data')

for c, regions in dd.items():
    country = ET.SubElement(root,  'country', {'name': c})
    for r, settlements in regions.items():
        region = ET.SubElement(country, 'region', {'name': r})
        for s in settlements:
            settlement = ET.SubElement(region, 'settlement', {'name': s})

import xml.dom.minidom # just to pretty print for this example
print(xml.dom.minidom.parseString(ET.tostring(root)).toprettyxml()) 
```

* * *

```
<?xml version="1.0" ?>
<data>
    <country name="Ireland">
        <region name="Cork">
            <settlement name="Cobh"/>
            <settlement name="Baltimore"/>
        </region>
        <region name="Clare">
            <settlement name="Boston"/>
        </region>
    </country>
    <country name="Sweden">
        <region name="Dalarna">
            <settlement name="Leksand"/>
            <settlement name="Mora"/>
        </region>
        <region name="Västmanland">
            <settlement name="Västerås"/>
        </region>
    </country>
</data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:42:06.227

您可以将输入解析为字典，如下所示：

```
strings = ["Sweden, Vastmanland, Vasteras",
"Sweden, Dalarna, Leksand", 
"Ireland, Cork, Cobh",
"Ireland, Clare, Boston",
"Ireland, Cork, Baltimore",
"Sweden, Dalarna, Mora" ]

d = {}
for s in strings:
    tmp = s.split(", ")
    country = tmp[0].strip()
    region = tmp[1].strip()
    settlement = tmp[2].strip()

    if d.get(country):
        if d[country].get(region):
            d[country][region].append(settlement)
        else:
            d[country][region] = [settlement]
    else:
        d[country] = {region: [settlement]} 

for k, v in d.items():
    print k,v 
```

这给出了以下输出：

```
Sweden {'Vastmanland': ['Vasteras'], 'Dalarna': ['Leksand', 'Mora']}
Ireland {'Clare': ['Boston'], 'Cork': ['Cobh', 'Baltimore']} 
```

现在您可以轻松地将此 dict 转换为 xml 字符串。

虽然，贾米拉克的回答要好得多。

# mysql - 在 C++ 中具有 MySQL 连接器代码的线程不会结束

> ID：16165322
> 
> 赞同：3
> 
> 时间：2013-04-23T09:06:20.987
> 
> 标签：mysql, connector

在我正在处理的 XMLRPC 服务器中（基于 xmlrpc-c），线程可能希望使用以下函数建立 MySQL 连接以检索一些数据：

```
Distribution getEntitySetFromMysql( int id ) {

    Distribution result;

    try {
        sql::Driver *driver = get_driver_instance();
        sql::Connection *con = driver->connect( (std::string)DBHOST, (std::string)USER, (std::string)PASSWORD);
        con->setSchema( (std::string)DATABASE );

        sql::Statement *stmt = con->createStatement();
        std::stringstream query;
        query << "SELECT concept_id, weight FROM entity_set_lines WHERE entity_set_id = " << id;
        sql::ResultSet *res = stmt->executeQuery ( query.str() );

        while (res->next()) {
            result[ res->getInt("concept_id") ] = res->getDouble("weight");
        }

        delete res;
        delete stmt;
        con->close();
        delete con;

    } catch (sql::SQLException &e) {
        std::cout << "ERROR: SQLException in " << __FILE__;
        std::cout << " (" << __func__<< ") on line " << __LINE__ << std::endl;
        std::cout << "ERROR: " << e.what();
        std::cout << " (MySQL error code: " << e.getErrorCode();
        std::cout << ", SQLState: " << e.getSQLState() << ")" << std::endl;

        if (e.getErrorCode() == 1047) {
            std::cout << "\nYour server does not seem to support Prepared Statements at all. ";
            std::cout << "Perhaps MYSQL < 4.1?" << std::endl;
        }

    } catch (std::runtime_error &e) {

        std::cout << "ERROR: runtime_error in " << __FILE__;
        std::cout << " (" << __func__ << ") on line " << __LINE__ << std::endl;
        std::cout << "ERROR: " << e.what() << std::endl;

    }

    return result;
} 
```

一切正常，但是在线程运行此代码并成功返回其结果后，该线程仍然挂起并且不会退出。这种方法有什么问题？这是多么根本的错误？MySQL 连接器线程安全吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:05:39.810

在谷歌搜索解决方案时，我遇到了`sql::Driver::threadInit()`和的提及`sql::Driver::threadEnd()`。但是，由于我使用的是 C++ 连接器 1.0.5 版，因此我无法使用这些功能。`driver->threadInit();`在获取驱动程序实例后并`driver->threadEnd();`在我的函数结束时添加一个，这个问题就解决了。

以下是[MySQL 1.1.0 更改历史](https://wikis.oracle.com/pages/viewpage.action?pageId=27394600)中提到的这个线程的初始化和结束功能：

> 添加了 Driver::threadInit() 和 Driver::threadEnd() 方法。线程客户端的每个线程都必须在线程的最开始调用 Driver::threadInit()，然后才能使用 Connector/C++ 执行任何其他操作，并且每个线程都必须在完成时调用 Driver::threadEnd()。您可以在 examples/pthreads.cpp 中找到一个演示使用的示例。强烈建议不要在线程之间共享连接。如果您设置某些（未记录的）互斥锁，理论上是可能的，但它根本不受支持。每个线程使用一个连接。不要有两个线程同时使用同一个连接。请查看 MySQL 手册中关于线程的 C API 说明。连接器/C++ 封装了 C API。（劳林，安德烈，乌尔夫）

TL;DR：如果您遇到此问题，请确保您的 C++ MySQL 连接器版本 >= 1.1.0 并使用`sql::Driver::threadInit()`and`sql::Driver::threadEnd()`方法包围您的连接代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:05:52.240

两个想法：

1.  libmysql 不是完全[线程安全](http://dev.mysql.com/doc/refman/5.1/en/c-api-threaded-clients.html)的。
2.  如果发生异常，您的代码的结构方式将泄漏内存。**通过在try/catch**之外声明变量并使用**finally**（或本地等效项）来确保正确清理或使用**智能指针**（如果可用），您可能会得到更好的服务。

由于您没有显示任何调用或周围代码，因此很难判断实际发生了什么。当它应该完成时，您是否检查线程的退出代码？您可以将它附加到调试器中以查看它在做什么而不是关闭吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T12:41:55.773

实际上 ：

不要使用：`sql::Driver::threadInit()`也不`sql::Driver::threadEnd()`

因为：您已经在使用`try()`

你忘了 ：

```
res->close();
stmt->close();
con->close();

delete res;
delete stmt;
delete con; 
```

例子 ：

```
int connection_and_query_func()
{
     /*connection and query variables*/
     sql::Driver *driver;
     sql::Connection *con;
     sql::Statement *stmt;
     sql::ResultSet *res;
     int err_exception_getErrorCode=0;

     /*results variables*/
     int my_int_from_column_1 = 0;
     double my_double_from_column_2 = 0;
     ....
     std:string my_string_from_column_p = "";

 try
    {
        /* Create a connection */
        driver = get_driver_instance();
        con = driver->connect("address_name", "user_name", "password");

        /* Connect to the MySQL database */
        con->setSchema("schema_name");

        /* Execute MySQL Query*/
        stmt = con->createStatement();
        res = stmt->executeQuery("your query statement here");

        /* Read MySQL Query results per column*/
        my_int_from_column_1 = res->getInt(1);
        my_double_from_column_2 = res->getDouble(2);
        ....
        my_string_from_column_p = res->getString(p);

        /* Close MySQL Connection*/
        res->close();
        stmt->close();
        con->close();

        delete res;
        delete stmt;
        delete con;
    };

 /* Get last error*/
 catch (sql::SQLException &exception)
    {
        err_exception_getErrorCode = exception.getErrorCode();
    };

 return(0);
}; 
```

结论：这可以执行任意多次。函数示例 (connection_and_query_func()) 将在完成后正确关闭 MySQL 连接 - 无需向您的 MySQL 服务器添加进程！！！

进一步：阅读官方手册[https://docs.oracle.com/cd/E17952_01/connector-cpp-en/connector-cpp-en.pdf](https://docs.oracle.com/cd/E17952_01/connector-cpp-en/connector-cpp-en.pdf)

替代方案：如果您无法从程序/功能端正确关闭连接和查询（从而将进程添加到您的 MySQL 服务器），请考虑以下 2 个选项：

1/ 将所有 MySQL 超时参数设置为 10 秒。或更少（例如）；2/ 编写一个 SHOW PROCESSLIST 脚本并删除处于 SLEEP 状态太久的进程。

干杯。

# cordova - 移动设备服务

> ID：16165326
> 
> 赞同：4
> 
> 时间：2013-04-23T09:06:27.450
> 
> 标签：cordova, jquery-mobile

过去几天我一直在处理几个项目，一个是移动应用程序（使用 Jquery mobile 和 Phonegap 创建），另一个是 Windows 服务。

我想知道**是否可以使用 Jquery & Phonegap 之类的技术为移动设备创建服务**。对于服务，我的意思是像 Windows 服务这样的服务，它将在后台运行，将在设备启动时自行启动等。

```
If Yes then 
{
   HOW ? please share some resources and knowledge to chew on
}
If No then 
{
   what's the best way to develop a Mobile device service (platform dependent) ?
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:51:48.780

无法使用 Jquery & Phonegap 创建设备服务。原因是您不能在后端将 Javascript 代码作为服务运行。Phonegap 只是在 webview 中呈现内容，因此编写的 Javascript 代码仅限于该范围。

> 开发移动设备服务（平台相关）的最佳方式是什么？

潜入原生开发。

进一步阅读[这个](https://stackoverflow.com/questions/10343828/creating-an-android-service-with-phonegap-have-phonegap-app-run-even-when-clos)，关于 SO 的另一个讨论。

# coding-style - 为什么人们将评论用作业务逻辑

> ID：16165331
> 
> 赞同：2
> 
> 时间：2013-04-23T09:06:36.910
> 
> 标签：coding-style, business-logic

为什么人们依赖评论作为业务逻辑？（例如 CakePHP、Doctrine）

教义示例（从他们的文档中，教义与代码本身一样依赖注释）：

```
/**
 * @Entity @Table(name="products")
 **/
class Product
{
    /** @Id @Column(type="integer") @GeneratedValue **/
    protected $id;
    /** @Column(type="string") **/
        protected $name;
... 
```

几周前，我不得不在一个 CakePHP 应用程序中进行更改，我遇到了一个没有调用回调的问题，只是深入挖掘了他们的内心，我发现我需要在函数定义之前放置一个 docblock 注释被认出来叫了，我在袜子里。不幸的是，我现在没有代码可以给你一个例子。

我使用了很多编程语言，但我发现这种我只在 PHP 中看到的趋势非常烦人，我认为这违反了编程规则。

也许有人可以对此有所了解，在我看来这是一个非常糟糕的做法，但我期待听到你的意见。

**谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:47:08.780

这是一种相对简单的方法（无论好坏），将第三方的新功能分别引入编程语言而不会导致编译器错误。但是你是对的 搜索错误有时很烦人。

# java - 静态地图问题

> ID：16165332
> 
> 赞同：0
> 
> 时间：2013-04-23T09:06:37.107
> 
> 标签：java, internet-explorer, map

我有一个带有静态映射的类，其中声明为

```
public class SessionMonitor {
    public static Map activeSessions = Collections.synchronizedMap(new LinkedHashMap());
} 
```

在我访问地图的其他课程中，

```
if (SessionMonitor.activeSessions.containsKey(userDTO.getUserName()) && !userDTO.getRoleMaster().getId().equals(100L)) {
    setMessage("Active session exists for this user");
    return ERROR;
}
SessionMonitor.activeSessions.put(userDTO.getUserName(), userDTO.getId()); 
```

当不满足'IF'条件时，它会将元素放入地图中，如图所示。但在那之后，控制奇怪地回到了“IF”状态。只有当请求来自 IE 时才会发生这种情况。有什么问题？

# android - 无法执行dex：多个dex文件定义了Landroid/Manifest$permission；

> ID：16165335
> 
> 赞同：5
> 
> 时间：2013-04-23T09:06:44.780
> 
> 标签：android, static-libraries

```
Unable to execute dex: Multiple dex files define Landroid/Manifest$permission;
Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Landroid/Manifest$permission; 
```

如何解决这个问题呢？

```
When i try to run my project that time Console displays this type of error, How to solved it, please help me if you have any idea regarding to this. 
```

# android - 为本机 andorid 制作高级记录器代码，错误“预期主表达式在 ',' 标记之前”

> ID：16165341
> 
> 赞同：0
> 
> 时间：2013-04-23T09:07:15.277
> 
> 标签：android, c++, logging, java-native-interface, printf

嗨，我正在为 android 开发新的记录器。在vc版本中我使用这样的日志，

* * *

```
//ref http://stackoverflow.com/questions/8487986/file-macro-shows-full-path
  #define CURRENT_FILE_NAME (strrchr(__FILE__, '\\') ? strrchr(__FILE__, '\\') + 1 : __FILE__)

//ref ##VAR things - http://www.delorie.com/gnu/docs/gcc/gcc_44.html
//ref define "" __vars__ something - http://mail-archives.apache.org/mod_mbox/httpd-dev/199710.mbox/%3CPine.LNX.3.95.971028083446.14671A-100000@gaia.vr.net%3E
  #define printfAdv(fmt,...)\
    {\
printf("[%s] " fmt " ... @(%s)[%s:%d]\n",__TIME__,##__VA_ARGS__,__FUNCTION__,CURRENT_FILE_NAME,__LINE__);\
fflush(stdout);\
    }
 #define  LOGV(fmt,...)  \
    {\
printfAdv(fmt,__VA_ARGS__);\
    } 
```

* * *

->[09:59:42] 输入 ... @(processInputKey)[vc_input.cpp:63] 它就像魅力一样。

但是在android中，由于一些错误，它无法构建。

* * *

```
 #define  InternalLoggerv(...)  __android_log_print(ANDROID_LOG_VERBOSE,LOG_TAG,__VA_ARGS__)

//ref http://stackoverflow.com/questions/8487986/file-macro-shows-full-path
//win for two back slash
#define CURRENT_FILE_NAME (strrchr(__FILE__, '\\') ? strrchr(__FILE__, '\\') + 1 : __FILE__)

//ref ##VAR things - http://www.delorie.com/gnu/docs/gcc/gcc_44.html
//ref define "" __vars__ something - http://mail-archives.apache.org/mod_mbox/httpd-dev/199710.mbox/%3CPine.LNX.3.95.971028083446.14671A-100000@gaia.vr.net%3E
#define printfAdv(fmt,...)\
    {\
InternalLoggerv("" fmt " ... @(%s)[%s:%d]\n",##__VA_ARGS__,__FUNCTION__,CURRENT_FILE_NAME,__LINE__);\
    }

//  fflush(stdout);\
//printf(fmt " ... @(%s)[%s:%d]\n",##__VA_ARGS__,__FUNCTION__,CURRENT_FILE_NAME,__LINE__);\
//printf("[%s] " fmt " ... @(%s)[%s:%d]\n",__TIME__,##__VA_ARGS__,__FUNCTION__,CURRENT_FILE_NAME,__LINE__);\

#define  LOGV(fmt,...)  \
    {\
printfAdv(fmt,__VA_ARGS__);\
    } 
```

* * *

这会在 LOGV("blah blah"); 不是当 LOGV("%s","blah balhh"); 并且错误说'预期的主表达式'，'令牌'......

是什么让这与众不同，我如何在 android 本机 deveolopemnt 中使用类似的东西？那你。

# android - 主页小部件键盘焦点

> ID：16165343
> 
> 赞同：1
> 
> 时间：2013-04-23T09:07:20.207
> 
> 标签：android, android-appwidget

我正在开发一个 Android (4.1, 4.2) Home Widget。我创建了我的小部件，现在它位于主屏幕上。当我使用带有外部键盘的 Android 平板电脑时，所有快捷方式图标都是可聚焦的（图标周围的浅蓝色方块），但我的小部件无法通过键盘导航键选择。

我将小部件的布局设置为可聚焦、可点击和可聚焦的InTouchMode，但没有任何变化。

有没有办法做到这一点？

谢谢

# cakephp - 使用两个表在蛋糕 php 中使用 where 条件加入查询？

> ID：16165345
> 
> 赞同：0
> 
> 时间：2013-04-23T09:07:34.007
> 
> 标签：cakephp, cakephp-2.1

我们如何在 cake php 中使用两个带有 where 条件的表来编写 Join 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:12:06.947

你可以！！
检查这个是否对你有帮助

```
$table = 'table_name';
    $query['conditions'] = array($table.'.entity_id' => $entity_id, $table.'.is_active' => 1);

        $query['fields'] = array('creator.first_name AS cf_name', 'creator.last_name AS cl_name', 'creator.email AS c_email', 'usr.first_name', 'usr.last_name',
            $table.'.id AS id', $table.'.guid', $table.'.updated_date',
            'usr.email AS email');

        // To do joining to get attribute with value
        $query['joins'] = array(
            array(
                    'table' => $this->user,
                    'alias' => 'usr',
                    'type' => 'INNER',
                    'conditions' => array('usr.id = '.$table.'.user_id')
                ),
                array(
                    'table' => $this->user,
                    'alias' => 'creator',
                    'type' => 'INNER',
                    'conditions' => array('creator.id = '.$table.'.creator_id')
                ),
        );
        $query['order'] = array($table.'.updated_date' => 'DESC');

        // Cache implementation
        $result = $this->find('all', $query); 
```

# vim - 如何在 vim 中模拟 :autocmd VisualLeave * 或 :autocmd VisualEnter *？

> ID：16165350
> 
> 赞同：3
> 
> 时间：2013-04-23T09:07:54.080
> 
> 标签：vim, vim-plugin

如您所知，vim 中（遗憾地）没有 VisualLeave 或 VisualEnter 自动命令。有没有办法模仿它？

（旁注：有这样的事件会给 vim 增加更多的力量）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T02:07:25.580

到目前为止，最好的解决方案在这里：[当 vim 进入可视模式时运行命令](https://stackoverflow.com/questions/15561132/run-command-when-vim-enters-visual-mode)

这是没有 Visual* autocmd 事件的解决方法。

# grammar - 为什么 LL 语法不能是左递归的？

> ID：16165352
> 
> 赞同：18
> 
> 时间：2013-04-23T09:08:01.663
> 
> 标签：grammar, ll, left-recursion

龙*[书中](http://en.wikipedia.org/wiki/Compilers%3a_Principles,_Techniques,_and_Tools)*，LL语法定义如下：

语法是 LL 当且仅当对于任何产生式`A -> a|b`，以下两个条件适用。

1.  `FIRST(a)`并且`FIRST(b)`是不相交的。这意味着它们不能同时导出`EMPTY`

2.  如果`b`可以导出`EMPTY`，则`a`不能导出任何以 开头的字符串`FOLLOW(A)`，即`FIRST(a)`并且`FOLLOW(A)`必须是不相交的。

而且我知道LL语法不能递归，但是形式上的原因是什么？我猜左递归语法会与规则 2 相矛盾，对吧？例如，我写了以下语法：

```
S->SA|empty
A->a 
```

因为`FIRST(SA) = {a, empty}`and `FOLLOW(S) ={$, a}`, then `FIRST(SA)`and`FOLLOW(S)`不是不相交的，所以这个文法不是 LL。但我不知道是左递归make`FIRST(SA)`而`FOLLOW(S)`不是不相交，还是有其他原因？换句话说，是否每个左递归文法都会有一个违反 LL 文法条件 2 的产生式？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T10:07:00.167

好的，我弄清楚了，如果语法包含左递归产生式，例如：

```
S->SA 
```

然后它必须以某种方式包含另一个产生来“完成”递归，比如：

```
S->B 
```

并且由于FIRST(B)是FIRST(SA)的子集，所以它们是联合的，这违反了条件1，在填充FIRST(B)和FIRST(SA)中的终端对应的解析表条目时必然存在冲突。总而言之，左递归语法可能导致两个或多个产生式的 FIRST 集具有公共终结符，从而违反条件 1。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-23T09:22:40.230

考虑你的语法：

```
S->SA|empty
A->a 
```

这是三个规则的简写：

```
S -> SA
S -> empty
A -> a 
```

现在考虑字符串`aaa`。它是如何产生的？如果您没有前瞻，则一次只能读取一个字符，因此您可以这样开始（您有`S`作为开始符号）：

```
S -> SA
S -> empty
A -> a 
```

很好，你已经制作了第一个`a`. 但是现在你不能再应用任何规则了，因为没有更多的非终结符了。你被困住了！

你应该做的是：

```
S -> SA
S -> SA
S -> SA
S -> empty
A -> a
A -> a
A -> a 
```

但是如果不阅读整个字符串，您将不知道这一点。您将需要无限量的前瞻。

在一般意义上，**是**的，每个左递归文法都可以有不明确的字符串，而无需无限前瞻。再看一下这个例子： 有两种不同的规则`S`。我们应该使用哪一个？

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-23T20:12:12.547

`LL(k)`文法是一种允许构造确定性下降解析器的文法，它仅具有`k`前瞻符号。左递归的问题在于，在检查完整的输入字符串之前，无法确定要应用哪个规则，这使得所需的`k`可能无限。

使用您的示例，选择 a `k`，并为解析器提供长度的输入序列`n >= k`：

```
aaaaaaa... 
```

解析器无法决定它是否应该应用`S->SA`或`S->empty`通过查看`k`前面的符号，因为该决定将取决于之前选择了多少次`S->SA`，而这是解析器没有的信息。

解析器必须`S->SA`准确地选择`n`时间和`S->empty`一次，并且不可能通过查看`k`输入流中的第一个符号来确定哪个是正确的。

要知道，解析器必须同时检查完整的输入序列，并计算选择了多少次`S->SA`，但这样的解析器将超出`LL(k)`.

请注意，无限前瞻不是解决方案，因为解析器在有限资源上运行，因此总会有一个长度有限的输入序列，其长度足以使解析器在产生任何输出之前崩溃。

# ruby-on-rails - 使用 RoleModel gem：如何从用户中删除所有以前分配的角色

> ID：16165354
> 
> 赞同：0
> 
> 时间：2013-04-23T09:08:06.507
> 
> 标签：ruby-on-rails, authorization, cancan, role

在我的 RoR 应用程序中，我使用 Role Model 和 CanCan gems。用户没有默认角色。在我为用户分配角色之前，role_mask 为空。我可以分配多个角色。但我无法删除所有角色并将roles_mask 再次设为nil。最后分配的角色仍然存在 我需要删除以前分配的角色，全部！可能吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:24:23.417

如果您想让单个用户角色为零，那么在您的角色中修改操作就像

```
 user.roles_mask = nil 
```

并保存

如果你想让所有的角色掩码为零，那么你可以通过编写一个 rake 任务来做到这一点。就像是

```
task :make_roles_nil => :environment do
User.all.each do |user|
user.roles_mask = nil
user.save
end
end 
```

将其放入 lib/tasks 目录中一个名为 user.rake 的文件，然后运行

```
bundle exec rake user:make_roles_nil RAILS_ENV = YOUR ENVIRONMENT(development or production) 
```

# junit - 在詹金斯的远程服务器上执行junit

> ID：16165356
> 
> 赞同：1
> 
> 时间：2013-04-23T09:08:12.137
> 
> 标签：junit, jenkins, remote-server

有人能帮忙吗。

我正在使用 Jenkins 将构建部署到远程服务器，到目前为止一切顺利。但是，我想在该远程服务器上运行 JUnit 测试，但我找不到如何在 Jenkins 中执行此操作。我已经在 ANT 中尝试过，但它给了我关于 junit.jar 的错误。

我相信测试是在本地而不是远程执行的。

任何帮助，将不胜感激; 詹金斯对我来说是一种全新的体验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-04T18:51:30.220

最初，您必须注意几件事。Jenkins 是一个 CI 工具，它构建了许多功能来使事情自动化。如果您需要在远程服务器上运行测试，请按照以下顺序创建这样的设置：

*   在机器上安装 jenkins 并将其正确配置为 CI-Server。

*   使用必要的工具部署您的远程服务器并配置好。

*   在 Jenkins 服务器上，安装 SSH 插件以通过 ssh 在远程机器上运行作业。

*   **在Jenkins -> Manage Jenkins -> Manage Nodes -> Add Node**菜单下将远程服务器添加为从节点。

*   根据您的要求配置节点。

*   创建一个新作业，该作业可以在 jenkins 中使用 pre/post build 操作运行 junit 测试。

*   最后安排从节点的构建并启动它。

有关分步说明，请参阅此[答案。](https://stackoverflow.com/a/37345305/2383136)

# c# - 在没有 XSD 的情况下共享 WSDL 类型

> ID：16165363
> 
> 赞同：9
> 
> 时间：2013-04-23T09:08:40.073
> 
> 标签：c#, wcf, web-services, xsd, wsdl

我似乎找不到从具有共享类型的 WSDL 生成代理但没有任何 XSD 的示例。任何人都可以将其标记为重复并指出一个例子吗？

这里有 2 个服务，每个都有自己的命名空间和通用类型。唯一可以公开访问的是它们的 WSDL，没有类型的 XSD 或其 .dll 可以传递给`wsdl.exe /sharedtypes`或`svcutils`没有它，我最终得到相同`class Foo`的，我无法传递给`SetFoo`and `class Foo1`。

我能想到的最好的办法是以编程方式生成代理并通过 CodeDOM 检测重复项，忽略`DataContract`/`WebServiceBinding`命名空间，但这是一个巨大的混乱......

```
[WebService(Namespace = "http://tempuri.org/FOO1")]
public class Service1 : WebService
{
    [WebMethod]
    public Foo GetFoo()
    {
        return new Foo();
    }
}

[WebService(Namespace = "http://tempuri.org/FOO2")]
public class Service2 : WebService
{
    [WebMethod]
    public void SetFoo(Foo foo)
    {
    }
}

public class Foo
{
    public int Bar { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T14:41:05.500

有一种方法可以做到这一点，[这里概述了](https://stackoverflow.com/a/6043418/569662)。

在您的情况下，您可以跳过第一步，从服务 1 生成代理，然后在生成服务 2 代理时使用 svcutil 上的 /r 标志来引用服务 1 代理程序集。

这将确保您的服务 2 代理将使用来自您的服务 1 代理的相同 Foo 实例。

但是，您是否考虑过仅托管具有两个操作的单个服务？它将为您节省大量工作。

编辑：也看看这篇文章：http: [//blogs.msdn.com/b/youssefm/archive/2009/10/09/reusing-types-in-referenced-assemblies-with-svcutil-sr-switch。 aspx](http://blogs.msdn.com/b/youssefm/archive/2009/10/09/reusing-types-in-referenced-assemblies-with-svcutil-s-r-switch.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T21:13:56.673

添加您的两个网络参考后：

1.  双击第二个 Web 服务引用
2.  在对象浏览器中导航到 Foo 的定义
3.  右键单击 Foo 并选择转到定义
4.  删除类 Foo 的定义
5.  为 webservice one 的命名空间添加 using 语句
6.  `<namespace-of-service-reference-2>.Foo`查找并替换的所有实例`Foo`

这应该可以解决您的问题，因为它会强制两个服务引用的自动生成代码使用相同的类声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-01T09:18:59.107

首先，您需要为所有常见的服务数据类型设置 [DataContract(Namespace="some namespace here")]，否则当生成 WSDL 和 XSD 时，您将拥有来自两个不同命名空间的对象 --- 这绝对是*必不可少*。命名空间值仅适用于 XSD 中定义的类型，而不适用于 WSDL 中定义的类型。XSD = 数据，WSDL = 服务。

当且仅当您设置了 META 服务行为时，才会生成 XSD 和 WSDL - 添加此行为，然后您可以导航到 URL。然后，META 服务行为的 URL 将具有指向您的 WSDL 和 XSD 的链接。

我使用以下代码在 Windows 服务中而不是通过 IIS 来自托管服务，但是同样的原则适用....

```
/// <summary>
/// Enables meta data output for a service host.
/// </summary>
/// <param name="host">The service host.</param>
/// <remarks>Must be invoked prior to starting the service host.</remarks>
public static void SetupMetaDataBehaviour(ServiceHost host)
{
    ServiceMetadataBehavior metaDataBehaviour = host.Description.Behaviors.Find<ServiceMetadataBehavior>();
    if (metaDataBehaviour == null)
    {
        metaDataBehaviour = new ServiceMetadataBehavior();
        metaDataBehaviour.HttpGetEnabled = true;
        host.Description.Behaviors.Add(metaDataBehaviour);
    }
    else
    {
        metaDataBehaviour.HttpGetEnabled = true;
    }
} 
```

# oracle - 将 ntext 转换为 clob

> ID：16165366
> 
> 赞同：0
> 
> 时间：2013-04-23T09:08:51.773
> 
> 标签：oracle, sql-server-2008, clob, ntext

我必须将数据从一张表复制到另一张表中，一张在 Oracle 中，一张在 MSSQL Server 中。我想将数据从 MSSQL Server 表复制到 Oracle 表。问题是 MSSQL Server 表有一个数据类型`ntext`的列，而 Oracle 表中的目标列是`clob`.

当我使用查询时， `insert into oracle.table select * from sqlserver.table@mssql;`我收到以下错误：

```
SQL Error: ORA-00997: illegal use of LONG datatype 
```

有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:15:48.707

我通过 PL/SQL 过程进行了尝试，并且成功了。我创建了一个游标，将值传递给在 VARCHAR2 中声明的变量，然后`EXECUTE IMMEDIATE`为`INSERT INTO....SELECT * FROM <TABLE_NAME>@MSSQL`.

# solr - Solr 4.2 管理主页仅显示“正在加载...”

> ID：16165368
> 
> 赞同：2
> 
> 时间：2013-04-23T09:08:59.960
> 
> 标签：solr, admin, solr4

我刚刚在我的本地计算机上使用端口 8080 安装了 Solr 4.2 并使用 url 进行了测试 `http://localhost : 8080/solr/`，然后我使用 url 将其分享给我的同事，`http://10.18.59.179:8080/solr/`其中 10.18.59.179 是我公司的本地 IP。但是我的同事（他的 ip 是 10.18.59.105）告诉我，管理主页只显示“正在加载...”并挂在那里。我之前安装了 solr 3.3，他们可以正确连接到我计算机上的管理页面。Solr 4.2 的管理页面有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:18:27.007

Solr 4.2 代码是经过测试和工作的稳定版本。如果您可以访问它的管理页面但其他人无法访问它，首先要检查它是否有另一台机器有权访问您的计算机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-11T15:08:25.407

就我而言，任何浏览器都会永远显示“正在加载...”。再次就我而言，原因是我在启动 Solr 5.2 时在 ZooKeeper 开关中出现了拼写错误。它应该是“-z localhost:2181,localhost:2182,localhost:2183”，但我有“-z localhost:2181,localhost2182,localhost:2183”。添加“：”后，一切都重新开始工作。

# c# - 在 Azure 上使用 Excel

> ID：16165372
> 
> 赞同：2
> 
> 时间：2013-04-23T09:09:18.857
> 
> 标签：c#, .net, excel, azure, cloud

我正在尝试使用 Excel 互操作在 Azure 上创建 excel 文件，但收到以下消息：

“由于以下错误，检索具有 CLSID {XXX} 的组件的 COM 类工厂失败：80040154”

我知道我必须在服务器上有 excel 才能解决这个问题。

有谁知道如何在 azure 上安装 excel？

谢谢你，伊多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:50:53.250

您确实需要服务器上的 Excel，我想将它安装在 Azure WebRole 上会非常困难。通常在这样的服务器上使用 Office 自动化是一个坏主意，并且不受 Microsoft 支持。你最好使用像SpreadsheetGear（[http://www.spreadsheetgear.com/](http://www.spreadsheetgear.com/)）这样的东西，它不需要安装Excel，并且会更加稳定和高性能。

# yii - 权限模块使用不同的应用程序实例

> ID：16165376
> 
> 赞同：0
> 
> 时间：2013-04-23T09:09:26.013
> 
> 标签：yii, rights

我正在开发一个 Yii 应用程序，它使用多个模块，包括用于访问控制的权限模块。它们都驻留在同一个“模块”文件夹中，并在同一个 config/main.php 文件中进行配置。并且应用程序只有一个入口脚本。

但是我注意到 Rights 模块使用不同的应用程序会话，而所有其他模块使用另一个应用程序会话。由于这个原因，用户会话不与权限共享。

有没有人遇到过 yii 模块的问题？请帮忙。谢谢！

我的配置文件：

```
'rights'=>array(
            'debug' => true,
            'superuserName'         => 'Super Administrator', // Name of the role with super user privileges.                       
            'authenticatedName'     => 'Customer', // Name of the authenticated user role.
            'userIdColumn'          => 'id', // Name of the user id column in the database.
            'userNameColumn'        => 'username', // Name of the user name column in the database.
            'enableBizRule'         => true, // Whether to enable authorization item business rules.
            'enableBizRuleData'     => true, // Whether to enable data for business rules.
            'displayDescription'    => false, // Whether to use item description instead of name.
            'flashSuccessKey'       => 'success', // Key to use for setting success flash messages.
            'flashErrorKey'         => 'error', // Key to use for setting error flash messages.
            //'baseUrl'             =>'/rights', // Base URL for Rights. Change if module is nested.
            //'layout'              => 'rights.views.layouts.main', // Layout to use for displaying Rights.
            //'appLayout'           => 'application.views.layouts.main', // Application layout.
            //'cssFile'             => 'rights.css', // Style sheet file to use for Rights.
            'install'               => false, // Whether to enable installer.
        ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T10:28:06.200

经过两天的尝试，我找到了解决方案。

我注意到它在系统中使用了两个不同的键前缀（stateKeyPrefix）。一个用于权利，另一个用于其他模块。这可以配置为在主配置文件中使用单键前缀。

```
'user'=>array(
            'class'=>'RWebUser',
            'allowAutoLogin'=>true, // enable cookie-based authentication
            'stateKeyPrefix'=>'f298d9729c7408c3d406db95a9639204', // some random value
    ), 
```

希望这会帮助有同样问题的人。

# java - jQuery - JSON 填充下拉列表

> ID：16165380
> 
> 赞同：1
> 
> 时间：2013-04-23T09:09:40.990
> 
> 标签：java, jquery, json, jsp, spring-mvc

我正在尝试从需要 JSON 的 jQuery 调用中填充下拉列表。我在网上找到了以下代码，这是我的起点（Java 和 Spring 3），但我接受其他/更好的方法：

JSP（仅显示相关代码）：

```
<script language="JavaScript">
            $(document).ready(function() { 
                $('#parkName').change(
                function(){
                    alert($(this).val());
                    $.getJSON('${findUnitsURL}', {
                        parkName : $(this).val(),
                        ajax : 'true'
                    }, function(data) {
                        var html = '<option value="">City</option>';
                        var len = data.length;
                        for ( var i = 0; i < len; i++) {
                            html += '<option value="' + data[i].name + '">'
                                + data[i].name + '</option>';
                        }
                        html += '</option>';

                        $('#parkUnitTitleAersa').html(html);
                    });
                });
            });
        </script>

<div id="content">

                <form:form method="post" action="mainForm" commandName="mainForm">

                    <form:select id="parkName" path="parkName">
                        <form:option value="NONE" label="--- Select ---" />
                        <form:options items="${parkList}" />
                    </form:select>

                    <form:select id="parkUnitTitleAersa" path="parkUnitTitleAersa">
                        <form:option value="NONE" label="--- Select ---" />
                        <form:options items="${parkUnitList}" />
                    </form:select>

                    <p class="submit"><input type="submit" name="commit" value="Login"></p>
                    </form:form>

            </div> 
```

具有请求方法的 Java 控制器：

```
@RequestMapping(value = "units", method = RequestMethod.GET)
    public @ResponseBody List<String> unitsForPark(@RequestParam(value = "parkName", required = true) String parkName) {
        List<String> l = new ArrayList<String>();
        l.add("AA01");
        l.add("AA02");
        l.add("LA03");
        l.add("SG04");

        return l;
    } 
```

当我在“parkName”下拉列表中选择一个值时，不会填充另一个值。使用萤火虫我得到这个错误：

```
[10:46:39.881] GET http://localhost:8084/SpringBlog/units?parkName=LA&ajax=true [HTTP/1.1 406 No Aceptable 62ms] 
```

任何想法？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:06:44.667

[`406`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.7)指向一个 Spring 问题，因为 Spring 不知道如何创建数据的 JSON 视图，因为[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)正在设置 header `Accept: application/json`。你应该看看 Spring 的[ContentNegotiatingViewResolver](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html)和[MappingJacksonJsonView](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/view/json/MappingJacksonJsonView.html)

假设您已经[`<mvc:annotation-driven/>`](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config)在 Spring Web 应用程序的上下文配置中？如果是这样，那么可能只是 Jackson 在运行 Spring 时不在类路径上。如果使用 Maven、Ivy、Gradle（或其他依赖管理/构建工具），只需手动将其添加到您的类路径或作为依赖。

# javascript - 您可以将 JST 模板放入 _.template 函数中吗？

> ID：16165381
> 
> 赞同：0
> 
> 时间：2013-04-23T09:09:46.383
> 
> 标签：javascript, backbone.js

我正在尝试在主干中执行此操作：

```
@modal_template = _.template(JST["templates/collaborators/share_auditions_modal"]) 
```

它应该将模板 JST 文件存储到 @modal_template 变量。虽然它不起作用。我不能只将模板放在视图中的“模板：”中，因为这只是在该视图中的一个事件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:56:12.460

我对 JST 方法不是很熟悉，但我认为你的语法倒退了。可能您希望将编译后的下划线模板放入 JST 对象中以供以后使用：

```
window.JST['person/contact'] = _.template(
    "<div class='contact'><%= name %> ..."
); 
```

有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/10033996/backbone-js-separate-templates-from-html-file)以及上述代码片段的来源[这篇文章。](http://ricostacruz.com/backbone-patterns/#jst_templates)

# svn - SVN 异常 E210004：Jenkins 中的网络数据格式错误

> ID：16165382
> 
> 赞同：4
> 
> 时间：2013-04-23T09:09:49.960
> 
> 标签：svn, jenkins

当从 SVN 中检出稍大的文件时，例如 .jar 文件（来自 Jenkins），我经常会遇到一个奇怪的 SVN 格式错误的网络数据异常。

```
org.tmatesoft.svn.core.SVNException: svn: E210004: Malformed network data
at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:64)
at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
at org.tmatesoft.svn.core.internal.io.svn.SVNReader.readItem(SVNReader.java:422)
at org.tmatesoft.svn.core.internal.io.svn.SVNReader.readItem(SVNReader.java:456)
at org.tmatesoft.svn.core.internal.io.svn.SVNReader.readItem(SVNReader.java:456)
at org.tmatesoft.svn.core.internal.io.svn.SVNReader.readTuple(SVNReader.java:288)
at org.tmatesoft.svn.core.internal.io.svn.SVNConnection.readTuple(SVNConnection.java:280)
at org.tmatesoft.svn.core.internal.io.svn.SVNEditModeReader.readTuple(SVNEditModeReader.java:265)
at org.tmatesoft.svn.core.internal.io.svn.SVNEditModeReader.driveEditor(SVNEditModeReader.java:221)
at org.tmatesoft.svn.core.internal.io.svn.SVNRepositoryImpl.update(SVNRepositoryImpl.java:1503)
at org.tmatesoft.svn.core.internal.wc16.SVNUpdateClient16.update(SVNUpdateClient16.java:557)
at org.tmatesoft.svn.core.internal.wc16.SVNUpdateClient16.doCheckout(SVNUpdateClient16.java:965)
at org.tmatesoft.svn.core.internal.wc2.old.SvnOldCheckout.run(SvnOldCheckout.java:19)
at org.tmatesoft.svn.core.internal.wc2.old.SvnOldCheckout.run(SvnOldCheckout.java:8)
at org.tmatesoft.svn.core.internal.wc2.SvnOperationRunner.run(SvnOperationRunner.java:20)
at org.tmatesoft.svn.core.wc2.SvnOperationFactory.run(SvnOperationFactory.java:1221)
at org.tmatesoft.svn.core.wc2.SvnOperation.run(SvnOperation.java:292)
at org.tmatesoft.svn.core.wc.SVNUpdateClient.doCheckout(SVNUpdateClient.java:781) 
```

有人对此有任何想法吗？网络流量通过 VPN 传输。尽管连接中会有一些轻微的“打嗝”，但我认为结帐过程将能够从中恢复。

# javascript - jQuery如何仅在条件为真时运行函数

> ID：16165386
> 
> 赞同：0
> 
> 时间：2013-04-23T09:10:04.813
> 
> 标签：javascript, jquery

我有一个检查 CSS 值是否存在的函数，问题是我需要该函数仅在 CSS 类存在时才能工作，目前该函数一直在运行，因为我使用的是 else 条件（需要重新执行 if健康）状况）。

```
 //use for @media only screen and (max-width: 767px) detection    
 $(window).resize(function(){
    if ($('#mobile-view').css('visibility') === 'hidden') {
        $("#product-gallery").insertAfter("#product-info");
    }
     else { 
         $("#product-info").insertAfter("#product-gallery");
    }
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:13:42.413

您可以使用`:hidden`伪选择器：

```
if ($('#mobile-view').is(':hidden')) {
    $("#product-gallery").insertAfter("#product-info");
} else {
    $("#product-info").insertAfter("#product-gallery");
} 
```

另见：[`.is()`](http://api.jquery.com/is/)和[`:hidden`](http://api.jquery.com/hidden-selector/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:13:28.923

将其更改为

```
if ($('#mobile-view').is(":visible")) {

    $("#product-info").insertAfter("#product-gallery");
} else {
     $("#product-gallery").insertAfter("#product-info");
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:14:02.540

你可以使用 hasClass

```
if ($('#mobile-view').hasClass(className)) {
 // put your logic inside this.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:14:23.400

尝试使用`$("#mobile-view").is(":visible") == true`

# php - 投票百分比计算错误

> ID：16165388
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:10:07.710
> 
> 标签：php, math, percentage

我创建了一个 php 程序，用户可以在其中对投票进行投票，之后，投票结果将仅显示百分比，但是我的程序遇到错误。
我用于百分比计算的代码是
`<?php echo round(($num_votes / $total_votes) * 100) ?>`

Now 如果我们谈论一个示例民意调查结果，假设我们有五个选项
`option A - 4 votes`
`option B - 2 votes`
`option C - 4 votes`
`option D - 1 votes`
`option E - 0 votes`
Total votes =`11`

在这种情况下，生成的百分比结果是
`option A - 36%`
`option B - 18%`
`option C - 36%`
`option D - 9%`
`option E - 0%`

但是百分比的总数是`99%`而不是`100%`。我想要的是总应该是`100%`
任何帮助将不胜感激
谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:16:47.610

如果您使用的是四舍五入的数字，您确实可以得到...四舍五入的数字。这些四舍五入的数字的总和将不同于常规总和。你几乎无法改变这一点。如果你坚持，你必须：

1.  计算四舍五入的数字
2.  计算总和，如果不是 100%，
3.  遍历四舍五入的数字并决定哪一个应该得到缺失的百分比。

但是你在弄乱数据。你可能认为你在清理它，但你把它搞砸了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:23:15.873

这种方式导致〜100％，'number_format'是件好事

```
$a = 4;
$b = 2;
$c = 4;
$d = 1;
$e = 0;
$total = $a + $b + $c + $d + $e;

$arr = array(
    'a' => number_format(($a / $total) * 100, 3),
    'b' => number_format(($b / $total) * 100, 3),
    'c' => number_format(($c / $total) * 100, 3),
    'd' => number_format(($d / $total) * 100, 3),
    'e' => number_format(($e / $total) * 100, 3)
);

foreach ($arr as $answer => $percentage) {
    echo  $answer .': '. $percentage . '<br />';
}

// this will be 100.001 so we format is
echo 'total: '. number_format(array_sum($arr), 2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:19:49.097

您可以指定小数点后的位数。例如：圆形（数字，2）；

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-23T09:18:13.897

没有什么开箱即用的办法，如果你[`floor()`](http://php.net/manual/en/function.floor.php)每件事都会错过一分，如果[`ceil()`](http://www.php.net/manual/en/function.ceil.php)你会获得一分。

你*可以* `floor()`一切然后如果然后计算[`array_sum()`](http://php.net/manual/en/function.array-sum.php)，如果不是然后`100`找到它。[`min()`](http://php.net/manual/en/function.min.php)`ceil()`

# dependency-injection - 仅拦截服务，而不是 Windsor 中的实施

> ID：16165390
> 
> 赞同：0
> 
> 时间：2013-04-23T09:10:15.197
> 
> 标签：dependency-injection, castle-windsor, interceptor, castle-dynamicproxy

我有这个代码：

```
container.Register(
    Component.For(typeof(MyServiceInterceptor<>)),
    Component.For<IMyService<string>, MyServiceImpl<string>>()
        .Interceptors(typeof(MyServiceInterceptor<>))
        .Anywhere
) 
```

Windsor 为 MyServiceImpl<> 生成代理类。但我只想拦截 IMyService<> 方法。怎么做？

# html - 带有正文的 HTML 超链接中的 iOS 短信方案

> ID：16165393
> 
> 赞同：6
> 
> 时间：2013-04-23T09:10:21.910
> 
> 标签：html, ios, sms, href

我们正在尝试在 HTML 页面中创建一个超链接，该超链接应该打开预定义的 SMS - 当用户在我们的页面上点击此链接时，SMS 应用程序应该以预定义的数字和正文打开。我们能够成功设置号码，但我们无法设置此短信的正文。可能吗？

到目前为止，我们正在尝试的链接是：

`<a href="sms:123456789?body=sometext">sms link</a>`

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T09:28:09.113

**不**，这是不可能的。

> 短信方案用于启动消息应用程序。此类型 URL 的格式为“sms:”，其中是一个可选参数，用于指定 SMS 消息的目标电话号码。此参数可以包含数字 0 到 9 以及加号 (+)、连字符 (-) 和句点 (.) 字符。**URL 字符串不得包含任何消息文本或其他信息。**

参考：[iPhoneURLScheme 短信](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/SMSLinks/SMSLinks.html#//apple_ref/doc/uid/TP40007899-CH7-SW1)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-06T22:11:58.503

对于 iOS 8：

```
<a href="sms:123456789&body=sometext">sms link</a> 
```

我在删除电话号码 1234 时进行了自定义...因此用户可以输入他们选择的号码以共享我的应用程序的链接

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-09-21T11:40:36.967

目前我得到了这些情况：

适用于 iOS 8（尚未测试 iOS 7）：

```
<a href="sms:123456879&body=bodytext">Send sms</a> 
```

适用于 Android 4.x，不适用于 5.x

```
<a href="sms:123456879?body=bodytext">Send sms</a> 
```

我也测试了 smsto 但这并不重要让它在 Android 5 上运行

检查这个小提琴来测试：

[https://jsfiddle.net/w4vcyjfw/14/](https://jsfiddle.net/w4vcyjfw/14/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-01T13:59:07.543

**是**的，这是可能的。

ios 5 和 6 上的小礼物

`<a href="sms:123456789;body=sometext">sms link</a>`

# java - 如何在运行时更改 Swing 应用程序的外观？

> ID：16165394
> 
> 赞同：3
> 
> 时间：2013-04-23T09:10:22.410
> 
> 标签：java, swing, user-interface, look-and-feel

我知道有一种`SwingUtilities.updateComponentTreeUI(Component c)`方法，但它并不完美。例如，我有一个`JFileChooser`并且当前的外观是Windows，然后我将外观更改为Nimbus `SwingUtilities.updateComponentTreeUI(mainWindow)`，并且主窗口的样式正确更改，但是当我使用该`JFileChooser.showOpenDialog(Component parent)`方法显示文件选择器时，它仍然在Windows外观和感觉。如果我使用该`JPopupMenu.show(Component invoker, int x, int y)`方法显示一个弹出对话框，也会发生同样的情况。

这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:26:19.820

假设这`value`是新外观的类名，下面是更新所有窗口和子组件的片段：

```
public static void updateLAF(String value) {
    if (UIManager.getLookAndFeel().getClass().getName().equals(value)) {
        return;
    }
    try {
        UIManager.setLookAndFeel(value);
        for (Frame frame : Frame.getFrames()) {
            updateLAFRecursively(frame);
        }
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (UnsupportedLookAndFeelException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static void updateLAFRecursively(Window window) {
    for (Window childWindow : window.getOwnedWindows()) {
        updateLAFRecursively(childWindow);
    }
    SwingUtilities.updateComponentTreeUI(window);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T09:22:18.797

调用`SwingUtilities.updateComponentTreeUI(mainWindow)`只会更新 Swing 层次结构中的 Swing 组件`mainWindow`。

如果您将`JFileChooser`代码存储在某处（例如，在类的字段中）而不显示`JFileChooser`选择器，则调用将不会更新`SwingUtilities.updateComponentTreeUI(mainWindow)`。您可以通过向您自己添加一个侦听器并在外观更改时从该侦听器`UIManager`调用来解决此问题。`SwingUtilities.updateComponentTreeUI(myStoredFileChooser)`

确保你不会用这个创建内存泄漏，例如让那个监听器只有一个`WeakReference`（`JFileChooser`因为 UIManager 的生命周期等于 JVM 的生命周期）

# css - 谷歌地图 API v3 div 不会正确填充空间 100% 宽度 + 高度

> ID：16165395
> 
> 赞同：0
> 
> 时间：2013-04-23T09:10:23.260
> 
> 标签：css, google-maps-api-3, size, fluid-layout, variable-width

这是[我的网站](http://permanet.cz.cc/index.html)。（我整个早上都在努力，但目前我的主机似乎有一些问题，所以如果你无法连接它应该稍后再工作）。

如您所见，地图太大了。我有一个浮动在页面右侧的侧边栏，宽度为 150 像素，但这被掩盖了。我还有一个页脚，我将其设计为“推”到页面底部。如果没有地图 div，这可以正常工作，一切都应该是这样，但是当我在剩余空间中创建地图 div 时，我无法让它正确填充空间。如果我将宽度 + 高度设置为 100%，则侧边栏会被覆盖，并且地图在我的页脚下方延伸大约页脚的高度，这就是现在的设置方式。我尝试将宽度和高度设置为“自动”，但这并不能解决我的问题。它所做的只是将 div 的比例限制为我在代码中设置的最小宽度和高度（100x100px）。我已经设置了'html'和'body'

**CSS**

```
@charset "utf-8";
/* CSS Document */
#body {
 height: 100%;
 I have loads of other stuff here but my host isn't working properly at the moment so I can't get to it :S
}
#wrapper    {
 min-width: 100%;
 min-height: 100%;
 margin: 0  auto -150px;
 position: relative;
 overflow-x: hidden;
}

#main {
 height: 100%;
 width: 100%;
}

#content {
 width: 100%;
 height: 100%;
 padding: 0;
}

#googleMap {
 width: 100%;
 height: 100%;
 min-width: 100px;
 min-height: 100px;
 padding: 0;
 position:absolute;
 top: 86px;
 left: 0;
}

#sidebar    {
 width: 150px;
 height: 100%;
 min-height: 100%;
 float: right;
 text-align: center;
 background-image: url(../images/sidebar.png);
 background-repeat: no-repeat;
 background-color: #8fa642;
 margin: 0;
 padding: 0;
 overflow: hidden;
} 
```

**HTML** - 为了便于阅读，我省略了标题等，但这可以使用我网站上的源查看器获得。

```
<div id="main">
 <div id="content">

  <div id="sidebar">
  Hello<br />
  This will be the sidebar!<br />
  It will be pretty plain til I work out the javascript...<br/>
  <img width="60px" height="60px" /><br/>
  <img width="60px" height="60px" />
  </div><!--sidebar-->

  <div id="googleMap" />
 </div><!--content-->

 <div class="push" />

 <div id="footer" class="footer clear">  
  <div class="image_carousel">
  <!-- Elastislide Carousel -->
   <ul id="carousel" class="elastislide-list">
   <li><a href="https://www.facebook.com/pages/Flagship-Global/135769953251026" target="_blank"><img src="images/slider/flagship.png" height="54px" alt="wwoof" /></a></li>
   <li><a href="http://eebu.earthshipeurope.org/" target="_blank"><img src="images/slider/eebu.png" height="54px" alt="eebu" /></a></li>
   <li><a href="#"><img src="images/small/3.jpg" height="54px" alt="image03" /></a></li>
   <li><a href="#"><img src="images/small/4.jpg" height="54px" alt="image04" /></a></li>
   <li><a href="#"><img src="images/small/5.jpg" height="54px" alt="image05" /></a></li>
   <li><a href="#"><img src="images/small/6.jpg" height="54px" alt="image06" /></a></li>
   <li><a href="#"><img src="images/small/7.jpg" height="54px" alt="image07" /></a></li>
   <li><a href="#"><img src="images/small/8.jpg" height="54px" alt="image08" /></a></li>
   <li><a href="#"><img src="images/small/9.jpg" height="54px" alt="image09" /></a></li>
   <li><a href="#"><img src="images/small/10.jpg" height="54px" alt="image10" /></a></li>
   <li><a href="#"><img src="images/small/11.jpg" height="54px" alt="image11" /></a></li>
   <li><a href="#"><img src="images/small/12.jpg" height="54px" alt="image12" /></a></li>
   <li><a href="#"><img src="images/small/13.jpg" height="54px" alt="image13" /></a></li>
   <li><a href="#"><img src="images/small/14.jpg" height="54px" alt="image14" /></a></li>
   <li><a href="#"><img src="images/small/15.jpg" height="54px" alt="image15" /></a></li>
   <li><a href="#"><img src="images/small/16.jpg" height="54px" alt="image16" /></a></li>
   <li><a href="#"><img src="images/small/17.jpg" height="54px" alt="image17" /></a></li>
   <li><a href="#"><img src="images/small/18.jpg" height="54px" alt="image18" /></a></li>
   <li><a href="#"><img src="images/small/19.jpg" height="54px" alt="image19" /></a></li>
   <li><a href="#"><img src="images/small/20.jpg" height="54px" alt="image20" /></a></li></ul>
   <!-- End Elastislide Carousel-->
   <div class="clear" />
  </div><!--image_carousel-->
  <div id="page_info">
  &#169; Permanet 2013
  </div><!--page info-->
 </div><!--footer-->
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
 <script src="js/jquerypp.custom.js" type="text/javascript"></script>
 <script src="js/jquery.elastislide.js" type="text/javascript"></script>
 <script type="text/javascript">        
 $( '#carousel' ).elastislide();
 </script>
</div><!--main--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:20:38.790

您可以像这样调整 iframe 的宽度：

```
#googleMap {
  width: 73% !important;
} 
```

但是你真正需要做的是在你的谷歌地图和小部件区域周围创建两个新的 div。然后，您将为每个人定义所需的宽度，例如：

```
#container_googlemap_Map {
  width: 70%;
}

#widget_area {
  width: 30%;
} 
```

# c# - 如何从一个面板拖放（复制）到另一个面板

> ID：16165400
> 
> 赞同：5
> 
> 时间：2013-04-23T09:10:31.627
> 
> 标签：c#, vb.net, drag-and-drop

我在一个表格上有两个面板。
一个面板有一些控件，如按钮或图像，第二个面板是空的。我想将控件从面板 1 拖放到面板 2，但它应该创建控件的副本，并且在拖动矩形时应该显示与控件相同的大小，并且当拖放到面板 2 中时，拖动的形状应该出现在那里在鼠标位置
实际上我想创建一个类似模拟器的东西。在面板 1 中有一些工具，当有人在面板 2 上拖放工具时，它应该出现在鼠标位置。

语言无所谓可能是`C#`或`VB.NET`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-01T12:27:42.210

你尝试过这样的事情吗？

```
private void Form5_Load(object sender, EventArgs e)  
{  
    this.panel1.AllowDrop = true;  
    foreach (Control c in this.panel1.Controls)  
    {  
        c.MouseDown += new MouseEventHandler(c_MouseDown);  
    }  
    this.panel1.DragOver += new DragEventHandler(panel1_DragOver);  
    this.panel1.DragDrop += new DragEventHandler(panel1_DragDrop);  
}  

void c_MouseDown(object sender, MouseEventArgs e)  
{  
    Control c = sender as Control;  
    c.DoDragDrop(c, DragDropEffects.Move);  
}  

void panel1_DragDrop(object sender, DragEventArgs e)  
{  
    Control c = e.Data.GetData(e.Data.GetFormats()[0]) as Control;  
    if (c != null)  
    {  
        c.Location = this.panel1.PointToClient(new Point(e.X, e.Y));  
        this.panel1.Controls.Add(c);  
    }  
}  

void panel1_DragOver(object sender, DragEventArgs e)  
{  
    e.Effect = DragDropEffects.Move;  
} 
```

VB.NET

```
Private Sub Form5_Load(sender As Object, e As EventArgs)
    Me.panel1.AllowDrop = True
    For Each c As Control In Me.panel1.Controls
        c.MouseDown += New MouseEventHandler(AddressOf c_MouseDown)
    Next
    Me.panel1.DragOver += New DragEventHandler(AddressOf panel1_DragOver)
    Me.panel1.DragDrop += New DragEventHandler(AddressOf panel1_DragDrop)
End Sub

Private Sub c_MouseDown(sender As Object, e As MouseEventArgs)
    Dim c As Control = TryCast(sender, Control)
    c.DoDragDrop(c, DragDropEffects.Move)
End Sub

Private Sub panel1_DragDrop(sender As Object, e As DragEventArgs)
    Dim c As Control = TryCast(e.Data.GetData(e.Data.GetFormats()(0)), Control)
    If c IsNot Nothing Then
        c.Location = Me.panel1.PointToClient(New Point(e.X, e.Y))
        Me.panel1.Controls.Add(c)
    End If
End Sub

Private Sub panel1_DragOver(sender As Object, e As DragEventArgs)
    e.Effect = DragDropEffects.Move
End Sub 
```

[资源](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/3d23ad93-e70d-4076-bf50-3e17ec43d0e1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T11:27:00.413

我正在更改@Shim 的一些代码。这是更新的代码，其中您的控件副本将放置在另一个面板中

```
Random rnd = new Random();

private void Form5_Load(object sender, EventArgs e)  
{  
    this.panel1.AllowDrop = true;  
    foreach (Control c in this.panel1.Controls)  
    {  
        c.MouseDown += new MouseEventHandler(c_MouseDown);  
    }  
    this.panel1.DragOver += new DragEventHandler(panel1_DragOver);  
    this.panel1.DragDrop += new DragEventHandler(panel1_DragDrop);  
}  

void c_MouseDown(object sender, MouseEventArgs e)  
{  
    Control c = sender as Control;  
    c.DoDragDrop(c, DragDropEffects.Move);  
}  

void panel1_DragDrop(object sender, DragEventArgs e)  
{  
    Control c = e.Data.GetData(e.Data.GetFormats()[0]) as Control;
    // Here, you get a copy of your drag drop button and dynamically new button is created  
    Button btn = new Button();
    btn.Name = "Button" + rnd.Next();
    btn.Size = c.Size;
    if (c != null)  
    {  
        // Add the newly created button to you Panel
        btn.Location = this.panel1.PointToClient(new Point(e.X, e.Y));  
        this.panel1.Controls.Add(btn);  
    }  
}  

void panel1_DragOver(object sender, DragEventArgs e)  
{  
    e.Effect = DragDropEffects.Move;  
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-10T13:20:46.083

此解决方案将在移动鼠标时拖动按钮（或任何其他选择的组件）并将其放置在您放置它的位置

```
private SimpleButton selectedButton;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        xtraScrollableControl2.AllowDrop = true;
        xtraScrollableControl2.DragEnter += XtraScrollableControl_DragEnter;
        xtraScrollableControl2.DragDrop += XtraScrollableControl_DragDrop;
        xtraScrollableControl2.DragOver += XtraScrollableControl_DragOver;
    }

    private void XtraScrollableControl_DragEnter(object sender, DragEventArgs e)
    {
        e.Effect = e.Data.GetDataPresent(typeof(Bitmap)) ? DragDropEffects.Copy : DragDropEffects.None;
    }

    private void XtraScrollableControl_DragDrop(object sender, DragEventArgs e)
    {

        var simpleButton = e.Data.GetData(e.Data.GetFormats()[0]) as SimpleButton;
        if (simpleButton == null) return;
        if (simpleButton.Parent != sender) 
        {
            var btn = new SimpleButton
            {
                Dock = DockStyle.None,
                Size = new Size(125, 50),
                Text = simpleButton.Text,
                Location = ((XtraScrollableControl) sender).PointToClient(new Point(e.X, e.Y)),
                ImageList = simpleButton.ImageList, 
                ImageIndex = simpleButton.ImageIndex,
                ImageLocation = simpleButton.ImageLocation,
                Parent = ((XtraScrollableControl)sender)
            };
            btn.MouseDown += simpleButton_MouseDown;

            ((XtraScrollableControl)sender).Controls.Add(btn);
        }
        else
        {
            ((XtraScrollableControl)sender).Controls.Remove(simpleButton);
            simpleButton.Location = ((XtraScrollableControl)sender).PointToClient(new Point(e.X, e.Y));
            ((XtraScrollableControl)sender).Controls.Add(simpleButton);
        }

        selectedButton = null;
    }

    private void XtraScrollableControl_DragOver(object sender, DragEventArgs e)
    {
        e.Effect = DragDropEffects.Copy;
        selectedButton.Location = ((XtraScrollableControl)sender).PointToClient(new Point(e.X, e.Y));
    }

    private void simpleButton_MouseDown(object sender, MouseEventArgs e)
    {
        var btn = sender as SimpleButton;
        if (btn == null) return;
        selectedButton = btn;
        btn.DoDragDrop(btn, DragDropEffects.Copy);
    } 
```

希望这会有所帮助

我使用了 DevExpress 组件，但用于标准

```
开发快递
XtraScrollableControl
简单按钮

微软
控制板
按钮

```

# sql - 如何按行和列分组？

> ID：16165401
> 
> 赞同：2
> 
> 时间：2013-04-23T09:10:32.137
> 
> 标签：sql, tsql, reporting-services, sql-server-2008-r2, grouping

我找不到任何可以帮助我接近目标的问题/答案。我[在 SQL Fiddle 上有下表检查代码](http://www.sqlfiddle.com/#!3/35cff/7)。

```
SITENAME RTYPE SEASON  CTRSTAT  CTRTYPE UNITS  STARTDATE  WKTYPE    INVSTAT
 site1    T2B    P     null      null    92      null     FRSA_P    Unsold
 site1    T2B    Pre   null      null    36      null     FRSA_P    Unsold
 site1    T2B    PRI   null      null    173     null     FRSA_P    Unsold
 site1    T2B    SPE   null      null    56      null     FRSA_P    Unsold
 site1    T2B    P    Complete   FRSA    2     2013-01-01 FRSA_P    Sold
 site1    T2B    Pre  Complete   FRSA    2     2013-01-01 FRSA_P    Sold
 site1    T2B    PRI  Complete   FRSA    2     2013-01-01 FRSA_P    Sold
 site1    T2B    P    Complete   FRSA    1     2013-03-05 FRSA_P    Sold
 site1    T2B    P    Complete   FRSA    3     2014-01-01 FRSA_P    Sold
 site1    T2B    Pre  Complete   FRSA    4     2014-01-01 FRSA_P    Sold
 site1    T3B    P     null      null    69      null     FRSA_P    Unsold
 site1    T3B    Pre   null      null    26      null     FRSA_P    Unsold
 site1    T3B    PRI   null      null    125     null     FRSA_P    Unsold
 site1    T3B    SPE   null      null    40      null     FRSA_P    Unsold
 site1    T3B    Pre  Complete   FRSA    2     2013-01-01 FRSA_P    Sold
 site1    T3B    P    Complete   FRSA    1     2014-01-01 FRSA_P    Sold
 site1    T3B    Pre  Complete   FRSA    2     2014-01-01 FRSA_P    Sold 
```

然后以某种方式得到如下图所示的报告。如果 InvStatus 未售出，则报告应返回*Unsold*，否则返回 CTRSTAT。

![按列和行分组后的结果](https://i.stack.imgur.com/mpAax.jpg)

请不要关注总数和总计，图像来自使用其他数据的excel。只是为了获得所需结果的样本。

**编辑：**日期列对应于一整年，因此例如`2013-03-05`属于该列的日期`01/01/2013`列。如果日期为空，则它们将转到显示的最后一年，在这种情况下`01/01/2014`，但可能是 2015 年或最后显示的任何时期。

我尝试了几种不同的方法，与各种类型`GROUP BY`一起使用，但都没有奏效。并且没有用，或者至少我没有设法得到正确的结果。也许只是不可能，至少不是一个简单的方法。`GROUPING``SETS``CUBE``ROLLUP`

这是我尝试过的众多查询之一的示例，试图扭曲它以获得类似报告的内容，但仍然没有接近。

```
SELECT
       sitename, rtype, season, ctrstat, ctrtype, SUM(units)
      ,startdate, invstat
  FROM tt
 GROUP BY
GROUPING SETS ((sitename,InvStat,ctrstat)
               ,(RType,ctrtype,season,startdate)
               ,()
              ) 
```

**编辑：**也许应该更好地使用 SSRS 来完成这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:38:39.740

正如您在编辑中提到的那样，我认为这样做 i SSRS 是要走的路。您可以使用矩阵轻松创建您要查找的报告。通过使用 SQL fiddle 中给出的数据，您可以快速获得如下所示的内容。

编辑：添加总值 ![在此处输入图像描述](https://i.stack.imgur.com/s8kZS.png)

![在此处输入图像描述](https://i.stack.imgur.com/dQv3z.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:15:11.957

虽然 SSRS 可能是一个更好的选择，但这里是如何使用 SQL 查询来完成的。最后，将两者结合起来可能是最好的解决方案。

```
WITH CTE_Pivot AS 
(
    SELECT
         sitename
        ,rtype
        ,season
        ,CASE WHEN invstat = 'Sold' AND ctrStat = 'Complete' AND YEAR(startdate)=2013 THEN units ELSE 0 END AS Complete2013
        ,CASE WHEN invstat = 'Sold' AND ctrStat = 'Complete' AND (YEAR(startdate)=2014 OR startdate IS NULL) THEN units ELSE 0 END AS Complete2014
        ,CASE WHEN invstat = 'Unsold' AND YEAR(startdate)=2013 THEN units ELSE 0 END AS Unsold2013
        ,CASE WHEN invstat = 'Unsold' AND (YEAR(startdate)=2014 OR startdate IS NULL) THEN units ELSE 0 END AS Unsold2014
        ,units AS Total
    FROM tt 
)
SELECT sitename,rtype,season
    ,SUM(Complete2013) AS Complete2013
    ,SUM(Complete2014) AS Complete2014
    ,SUM(Unsold2013) AS Unsold2013
    ,SUM(Unsold2014) AS Unsold2014
    ,SUM(Total) AS GrandTotal
FROM CTE_Pivot
GROUP BY GROUPING SETS ((sitename,rtype,season),(sitename,rtype),sitename) 
```

**[SQLFiddle 演示](http://www.sqlfiddle.com/#!3/35cff/9)**

第一部分是旋转你的列。这是一种相当简单的方法，不使用`PIVOT`函数，而是为语句中的每一列声明条件`CASE`。它假设您有固定数量的可能值（和列），这些值可能并不完美，但是创建[动态列需要动态 SQL](https://www.simple-talk.com/blogs/2007/09/14/pivots-with-dynamic-columns-in-sql-server-2005/)，这会使该查询达到全新的复杂程度。

毕竟在这种情况下，我真的认为 CTRSTAT 的值不会有太大的不同，而且我猜你预先知道所有可能的值。年份有点问题，但我想仍然没有那么多。您也许可以选择“今年、去年、下一年”，使其更适应未来。

查询的第二部分只是使用简单的分组集进行分组。ROLLUP 将与此相同。

# android - android中的自定义xml数据包

> ID：16165402
> 
> 赞同：0
> 
> 时间：2013-04-23T09:10:32.307
> 
> 标签：android, xml, client-server, packet

我们可以在 android 中创建/构造自定义 xml 数据包吗？我需要创建一个如下所示格式的 xml 数据包并将其发送到服务器。

[根据与此链接](http://gwyneth.blogspot.in/2011/02/android-udp-client-code-snippets.html)类似的链接，可以使用 DatagramSocket 和 DatagramPacket 向服务器发送数据包。但是如何完成创建自定义 xml 数据包的任务呢？在谷歌上找不到太多帮助。

xml格式：

```
 <a_list>
   <packet_count>12</packet_count>
     <info>
       <id>12345</id>
     </info>
 </a_list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:52:14.703

试试这个-

```
String Data="<xml></xml>"           
Document docData= null;
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();          
DocumentBuilder db = dbf.newDocumentBuilder();          
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(Data));
docData = db.parse(is); 

        Element baseRoot=docData.getDocumentElement();  
Element root = docData.createElement("a_list"); 
baseRoot.appendChild(root); 

Element childpack = docData.createElement("packet_count"); 
root.appendChild(childpack); 

Text text = docData.createTextNode("12"); 
childpack.appendChild(text); 

Element childinfo = docData.createElement("info"); 
root.appendChild(childinfo );

Element childid = docData.createElement("id"); 
childinfo.appendChild(childid);

text = docData.createTextNode("12345"); 
childinfo.appendChild(text); 
```

# python - 如何在 argparser 的两个子命令中共享 args？

> ID：16165404
> 
> 赞同：0
> 
> 时间：2013-04-23T09:10:40.887
> 
> 标签：python, python-3.x, command-line-arguments, argparse

例如，有两个 sub_commands`run`和`batch-run`，`run`解析器如下所示：

```
parser_run = sub_parsers.add_parser("run")
parser_run.add_argument("-c", "--config", dest="config", required=True,
    help="specify the config file to use", )

parser_run.add_argument("--from", dest="start_step", default=0, type=int,
    help="Only step after this number will be processed")
parser_run.add_argument("--to", dest="end_step", default=100, type=int,
    help="Only step before this number will be processed ")
parser_run.add_argument("--skip", dest="skip_step", default="",
    help="Steps to skip, use comma as seperator")

parser_run.add_argument("-v", "--verbose-level", dest="verbose_level", type=int, default=2)
parser_run.add_argument("--dry-run", dest="dry_run", action="store_true", default=False)
parser_run.add_argument("--allow-dangling", dest="allow_dangling", action="store_true", default=False)
parser_run.add_argument("--resume", dest="resume", action="store_true", default=False)
parser_run.add_argument("--remove", dest="clean", action="store_true", default=False) 
```

现在我需要编写`batch`解析器，它具有除`run`之外的所有参数`-c`（它用于`-b`指定批处理配置文件）。我只是想知道是否需要将所有代码复制并粘贴`add_argument`到`batch`解析器。或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:12:58.640

该`parser_run`对象就是一个对象，因此您可以将其分配给另一个变量，使用循环等：

```
parser_run = sub_parsers.add_parser("run")
parser_run.add_argument("-c", "--config", dest="config", required=True,
    help="specify the config file to use", )

parser_batch = sub_parsers.add_parser("batch")
parser_batch.add_argument("-b", "--batch-config", dest="config", required=True,
    help="specify the batch config file to use", )

for sub_parser in (parser_run, parser_batch):
    sub_parser.add_argument("--from", dest="start_step", default=0, type=int,
        help="Only step after this number will be processed")
    sub_parser.add_argument("--to", dest="end_step", default=100, type=int,
        help="Only step before this number will be processed ")
    sub_parser.add_argument("--skip", dest="skip_step", default="",
        help="Steps to skip, use comma as seperator")

    sub_parser.add_argument("-v", "--verbose-level", dest="verbose_level", type=int, default=2)
    sub_parser.add_argument("--dry-run", dest="dry_run", action="store_true", default=False)
    sub_parser.add_argument("--allow-dangling", dest="allow_dangling", action="store_true", default=False)
    sub_parser.add_argument("--resume", dest="resume", action="store_true", default=False)
    sub_parser.add_argument("--remove", dest="clean", action="store_true", default=False) 
```

现在两个子解析器都添加了相同的参数。

# c# - 如何根据日期=明天显示记录？

> ID：16165407
> 
> 赞同：0
> 
> 时间：2013-04-23T09:10:51.600
> 
> 标签：c#, asp.net, sql-server

我必须根据条件在 gridview 中显示记录 - `Appointment date = tomorrow date`。

我尝试了很多选择，但没有得到确切的方法。我正在使用 datetime 进行约会，它也有时间。所以我不能单独删除时间和比较日期。

现在在 sqldatasource 中使用这个查询：

```
SELECT * FROM [Patient_Appointment_Detail] WHERE ([AptTime] = @AptTime) 
```

并在控制参数中使用：

```
<asp:ControlParameter ControlID="lblgetdate" DefaultValue="NULL" Name="AptTime" 
                PropertyName="Text" Type="DateTime" /> 
```

我在加载页面时将明天的日期标记为标签。但无法删除 AptTime 中的时间并仅比较日期。

```
lblgetdate.Text = DateTime.Now.AddDays(1).ToString("dd/mm/yyyy"); 
```

我也收到此错误：

> 字符串未被识别为有效的日期时间。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.FormatException：字符串未被识别为有效的 DateTime。源错误：在执行当前 Web 请求期间产生了未处理的异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:13:28.750

在 SQL Server 中，您可以将[DateTime](http://msdn.microsoft.com/en-us/library/ms187819.aspx)转换为[Date](http://msdn.microsoft.com/library/bb630352.aspx)：

```
SELECT * 
FROM [Patient_Appointment_Detail] 
WHERE CAST([AptTime] AS DATE) = CAST(@AptTime AS DATE) 
```

参考：[MS SQL 比较日期？](https://stackoverflow.com/questions/4794028/ms-sql-compare-dates)

您还有另一个问题，您将参数中的字符串作为 DateTime 传递。这是非法的，你有一个例外。

创建一个控件来保存您的日期，例如[Calendar](http://www.w3schools.com/aspnet/control_calendar.asp)：

```
<asp:ControlParameter ControlID="myCalendar" DefaultValue="NULL" Name="AptTime" 
            PropertyName="SelectedDate" Type="DateTime" />

myCalendar.SelectedDate = DateTime.Now.AddDays(1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:24:23.683

这将做你想要的：

```
SELECT * FROM [Patient_Appointment_Detail] WHERE ([AptTime] = DATEADD(day, 1, CONVERT(DATETIME, @AptTime))) 
```

如果您将日期作为今天的日期传递。

要与明天的日期进行日期比较，请使用：

```
SELECT * FROM [Patient_Appointment_Detail] WHERE CAST([AptTime] AS DATE) = CAST(CONVERT(DATETIME, @AptTime) AS DATE)) 
```

# angularjs - angularjs：使用带有服务的自定义过滤器

> ID：16165411
> 
> 赞同：0
> 
> 时间：2013-04-23T09:11:04.617
> 
> 标签：angularjs

我可以找到很多关于如何创建自定义过滤器并使用它来过滤一组数据的示例。但是，我找不到任何关于如何使用过滤器通过后端服务进行过滤的示例。例如：

```
<input type="text" ng-model="query" />

<table id="searchTextResults">    
  <tr ng-repeat="item in items | filter:query">
       results go here
  </tr>
</table> 
```

而不是过滤现有项目，输入输入应该调用服务以从服务器获取结果。在这种情况下使用过滤器是否有意义？还是我应该将逻辑保留在控制器中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:03:13.027

在这种情况下，过滤器会表现得很糟糕，因为过滤器是作为每个 $digest 循环的一部分执行的。在实践中，这意味着给定的过滤器将在每个 $digest 循环中至少执行两次，因此您将对后端有大量请求。

除此之外，过滤器不能真正可靠地用于从服务器获取数据，因为过滤器是同步执行的，而后端调用是异步的。

简而言之 - 远离触发后端调用的过滤器。

# android - 谷歌地图 API v2

> ID：16165415
> 
> 赞同：2
> 
> 时间：2013-04-23T09:11:17.160
> 
> 标签：android

我正在尝试运行 Google map API v2 的示例代码，我收到以下错误，任何人都可以帮助我

```
04-23 08:54:23.178: E/Trace(1703): error opening trace file: No such file or directory (2)
04-23 08:54:24.489: W/dalvikvm(1703): VFY: unable to resolve static field 859 (MapAttrs) in Lcom/google/android/gms/R$styleable;
04-23 08:54:24.489: D/dalvikvm(1703): VFY: replacing opcode 0x62 at 0x000e
04-23 08:54:24.508: D/AndroidRuntime(1703): Shutting down VM
04-23 08:54:24.508: W/dalvikvm(1703): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-23 08:54:24.538: E/AndroidRuntime(1703): FATAL EXCEPTION: main
04-23 08:54:24.538: E/AndroidRuntime(1703): java.lang.NoClassDefFoundError: com.google.android.gms.R$styleable
04-23 08:54:24.538: E/AndroidRuntime(1703):     at com.google.android.gms.maps.GoogleMapOptions.createFromAttributes(Unknown Source)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at com.google.android.gms.maps.SupportMapFragment.onInflate(Unknown Source)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:279)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.Activity.setContentView(Activity.java:1881)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at com.swetha.googlemap.MainActivity.onCreate(MainActivity.java:17)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.Activity.performCreate(Activity.java:5104)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.os.Looper.loop(Looper.java:137)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at java.lang.reflect.Method.invokeNative(Native Method)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at java.lang.reflect.Method.invoke(Method.java:511)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-23 08:54:24.538: E/AndroidRuntime(1703):     at dalvik.system.NativeStart.main(Native Method)
04-23 08:59:24.708: I/Process(1703): Sending signal. PID: 1703 SIG: 9 
```

主要活动

公共类 MainActivity 扩展 FragmentActivity { GoogleMap 地图；@SuppressLint("NewApi") @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); map=((MapFragment)getFragmentManager().findFragmentById(R.id.map)).getMap();

map.setMapType(GoogleMap.MAP_TYPE_NORMAL);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:26:56.607

导入 google play 服务，查看此[链接](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)了解如何导入。

并将行更改`map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)) .getMap();`为`map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)) .getMap();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T12:22:32.883

如果您从 FragmentActivity 扩展意味着您正在为低于 11 的目标开发应用程序。您应该使用 SupportMapFragment。

```
SupportMapFragment fm = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map); 
```

请参阅我的博客文章，我试图总结使用适用于 Android 的 Google Maps API V2 构建应用程序所需的一切。

1.  [Maps API V2 问题的解决方案（使用 google_play_services_lib）。](http://mzubair.com/solving-the-problemserrors-of-google-maps-api-v2/)
2.  [使用 Maps API V2 for minSDK=8 (Android 2.2 Froyo) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2/)
3.  [使用 Maps API V2 for minSDK=11 (Android 3.0 HoneyComb) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2-for-minsdk11-android-23-0-honeycomb/)

# mysql - 更新未绑定的datagridview没有错误但失败结果

> ID：16165421
> 
> 赞同：0
> 
> 时间：2013-04-23T09:11:32.810
> 
> 标签：mysql, .net, vb.net, datagridview

我想从未绑定的 datagridview 行更新 mysql 表，我使用的是未绑定的 datagridview，因为当我想用 odbc 驱动程序添加绑定的 datagridview 时，我的 VS2005 没有响应。

> ```
>  Using connection As New MySqlConnection(connectionString)
>         Dim cmdText As String = "UPDATE titem set no = '" & TextBoxX1.Text & "', kdbarang = @column1 "
>         Dim command As New MySqlCommand(cmdText, connection)
>         connection.Open()
>         Dim transaction As MySqlTransaction = connection.BeginTransaction()
>         command.Transaction = transaction
>         Try
> 
>             For i As Integer = 0 To dgvitem.Rows.Count - 2
> 
>                 command.Parameters.Clear()
>                 command.CommandText = cmdText
>                 command.Parameters.Add("@Column1", MySqlDbType.VarChar).Value = dgvitem.Rows(i).Cells(1).Value
>                 command.ExecuteNonQuery()
>             Next
>             MessageBox.Show("Data Berhasil Disimpan")
>         Catch ex As Exception
>             MessageBox.Show(ex.Message)
>         Finally
>             connection.Close()
>         End Try
>     End Using
> End Sub 
> ```

没有错误，但结果不正确。循环更新失败，我不知道如何。请有人给我参考来解决它。谢谢你。

# mongodb - 一对多 Mongo 策略，同时查询两个集合

> ID：16165422
> 
> 赞同：0
> 
> 时间：2013-04-23T09:11:35.710
> 
> 标签：mongodb, database-design, nosql

我有两个集合：一个包含约 7.600.000 个文档，其中包含有关可用旅行的信息，另一个包含约 5000 个文档，其中包含有关地区、城市和国家数据的酒店信息。trips 集合具有特定酒店的 id 字段。

我的问题是，我必须查询这两个集合以获取有关某些旅行的信息：来自酒店集合的位置信息以及来自旅行集合的价格、人数等其他信息。

我已经阅读了关于合并两个集合的 mapreduce 策略，但我认为它不适合我的情况，因为如果我使用酒店 ID 链接它们，它只会创建 5000 个文档？可能吗？

另一种方法是在旅行集合中两次嵌入酒店信息，但在这种情况下我害怕更新酒店信息。

请给我一些建议，并告诉我哪种方法是最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T23:00:40.300

你有很多选择。这一切都是关于决定在哪里“加入”数据。选项：

1.  加入前端。也许先带回所有旅行，然后使用 AJAX 调用来懒惰地加载酒店信息。（假设是一个 Web 应用程序）。重点是，两个电话可能不是最糟糕的事情！

2.  在 Mongo 中使用 map/reduce 来输出你想要的数据。它不会实时工作，但它会给你正确的结果。它不限于 5,000 个文档。您可以从更大的旅行收藏开始，并带来您需要的东西。它非常灵活。

3.  嵌入酒店信息。请注意，如果酒店信息不经常更改，您只想嵌入酒店信息。如果它不断变化，我会考虑保持原样。

对于我使用 Mongo 所做的很多工作，我发现两次调用并没有那么糟糕——尤其是在处理快速变化的数据时。

# mysql - 为我的 SQL 服务器声明并设置无法识别的语法

> ID：16165423
> 
> 赞同：2
> 
> 时间：2013-04-23T09:11:36.310
> 
> 标签：mysql, sql, syntax, xampp, declare

我正在使用 XAMPP 运行 SQL 服务器版本：5.1.44。我一直在查看使用命令 DECLARE 和 SET 的 SQL 教程。

当我跑

```
DECLARE @iVariable INT, @vVariable VARCHAR(100), @dDateTime DATETIME
SET @iVariable = 1 
```

它响应

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DECLARE @iVariable INT, @vVariable VARCHAR(100), @dDateTime DATETIME SET @iVari' at line 1 
```

谁能解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:49:13.870

我假设您使用 MySQL，因为上述错误在任何级别上都与 SQL Server 无关......
我还假设您不想创建函数或存储过程，但在查询窗口中使用一些变量（一种“立即窗口”）。

在这种情况下，您不需要“DECLARE”关键字（因为它必须在存储过程中使用-也必须是“BEGIN”关键字之后的第一个命令-）。
所以你应该能够做到这一点：

```
SET @iVariable = 1 
```

甚至这个：

`SET @iVariable = 15;`

`SET @iVariable = "foo"`

是的，我知道您现在的想法（关于变量及其类型）......但它是 MySQL，而不是 SQL Server 或 Sybase；）

# gnuplot - 为一组 X 绘制不同的 Y

> ID：16165426
> 
> 赞同：0
> 
> 时间：2013-04-23T09:11:44.633
> 
> 标签：gnuplot

我有一组 X 值。否则我有三组 Y 值，让它分别为 y1、y3、y4。现在，我无法在 GNUPLOT 的同一图中绘制 X 与 y1、y3、y4 的图。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:31:31.847

如果您将数据保存在文件中，假设`data.dat`

```
X1   Y1    Y2    Y3
1    0.1   0.2   0.3
...  ...   ...   ... 
```

您可以绘制 Y1、Y2 和 Y3 与 X 的关系

```
plot 'data.dat' using 1:2, '' u 1:3, '' u 1:4 
```

`u`作为`using`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:25:49.990

如果所有 y 值的单位相同，则一个 y 轴就足够了。如果没有，您最多可以针对 2 个 y 轴绘制 x（[方法如下](http://gnuplot.sourceforge.net/demo/multiaxis.html)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:33:18.860

您使用“轴”选项进行绘图。这是一个使用相同 X 值绘制 2 个图的示例：

```
set xrange [-4:4]
plot cos(x) axes x1y1 title "cos" with linespoints lt 1 pt 7 ps 0.0,\
     sin(x) axes x1y2 title "sin" with linespoints lt 2 pt 8 ps 0.0
pause mouse any "Click the mouse or hit any key to terminate" 
```

如果你用 gnuplot 运行它，它应该如下图所示![示例双图](https://i.stack.imgur.com/qJyrp.png)

# plsql - 动态查询错误

> ID：16165438
> 
> 赞同：1
> 
> 时间：2013-04-23T09:12:33.127
> 
> 标签：plsql, oracle11g

当我尝试执行以下查询时，我在第 4 行遇到错误，例如“ORA-06512: at line 5”，其中“sample”是动态全局临时表。

```
 declare max_seq_dp varchar2(20);
 cnt number(20);
 begin
  execute immediate 'select count(*) into cnt from sample';
  dbms_output.put_line(cnt);
  if (cnt)>0 then
     begin
       select max(sequence_number) into max_seq_dp 
       from sample1 where column1 = '2045'
       and is_active = 1;
       dbms_output.put_line(max_seq_dp);
     end;
  end if;
 end; 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:14:56.780

该变量需要在执行立即数之外指定：

`execute immediate 'select count(*) from sample' into cnt;`

但是只要表名不是动态的，你可以在不立即执行的情况下做同样的*事情*：

```
begin
   select count(*) into cnt from sample;
   ... 
```

# java - 在 Spring AOP 中使用 @annotation

> ID：16165439
> 
> 赞同：0
> 
> 时间：2013-04-23T09:12:37.120
> 
> 标签：java, spring, aop, spring-aop

我正在使用带有 aspectj-autoproxy 的 Spring AOP。我使用@Around 注释来拦截某些类和方法。

```
@Around(value = "@annotation(counter)") 
```

此代码应拦截带有 @Counter 注释的方法。

我的问题是，这个定义是否强制扫描类路径中的所有类？我问是因为我有一个巨大的项目，如果将扫描所有类路径，可能会遭受几分钟的加载时间。

如果答案是肯定的，我该如何禁用他的扫描？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:48:32.357

它只会扫描定义的 Spring bean，因此不会扫描完整的类路径。此外，注释 @Counter 应指定为完全限定的类名称，我认为“计数器”不是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-25T13:09:03.253

使用以下方法限制扫描：

```
execution(* com.my.package..*.*(..)) && @annotation(counter) 
```

# php - PHP 人物搜索与爆炸

> ID：16165441
> 
> 赞同：1
> 
> 时间：2013-04-23T09:12:52.260
> 
> 标签：php, sql, sql-server, explode, sqlsrv

我想使用 SQLSRV 驱动程序在 PHP 和 MSSQL 中创建搜索功能。

我在页面上只有一个搜索输入字段。我想在名为“Persons”的表和以下列中搜索人员：SSN、Firstname、Lastname

问题是一个人在 Firstname 列中可能有一个或多个 middelname。

我还想搜索单个字符串，例如：仅名字或仅中间名称或姓氏。

我怎样才能做到这一点？我应该在 PHP 中使用explode 函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T16:10:29.090

我建议建立一个搜索索引。

在下面，我假设您的`persons`表格如下所示：

```
 | person_id | firstname | lastname | ssn | 
```

为了能够建立搜索索引，您需要一个`person_searchindex`表：

```
 | person_id | search_term | 
```

然后你可以使用这样的东西：（这只是第一个草图。）

```
<?php
function addTermToSearchIndex($person_id, $term)
{
    performQuery("INSERT INTO person_searchindex (person_id, search_term)
                  VALUES (" . (int)$person_id . ", ".
                  "\"" . escapeForQuery($term) . "\");");
}

function buildSearchIndexForPerson($person_id, $firstname, $lastname, $ssn)
{
    $firstnames = explode(" ", $firstname);
    foreach($firstnames => $name)
    {
        addTermToSearchIndex($person_id, $name);
    }

    $lastnames = explode(" ", $lastname);
    foreach($lastnames => $name)
    {
        addTermToSearchIndex($person_id, $name);
    }

    addTermToSearchIndex("$ssn");
}

function deleteSearchIndexForPerson($person_id)
{
    performQuery("DELETE FROM person_searchindex WHERE person_id = " . (int)$person_id . ";");
}

function rebuildSearchIndexForPerson($person_id, $firstname, $lastname, $ssn)
{
    deleteSearchIndexForPerson($person_id);
    buildSearchIndexForPerson($person_id, $firstname, $lastname, $ssn);
}

function rebuildSearchIndex()
{
    performQuery("DELETE FROM person_searchindex;");
    $result = performQuery("SELECT * FROM persons;");
    while($row = getRow($result))
    {
         buildSearchIndexForPerson($ow["person_id"], $row["firstname"], $row["lastname"], $row["ssn"]);
    }
}

function search($searchterm)
{
     $sqlcond = "FALSE";

     $terms = explode(" ", $searchterm);
     foreach($terms => $term)
     {
         $sqlcond .= " OR s.search_term LIKE \"%" . escapeForQuery($term) . "%\"";
     }

     return performQuery("SELECT p.person_id, p.firstname, p.lastname, p.ssn FROM persons AS p LEFT JOIN person_searchindex AS s ON p.person_id = s.person_id WHERE $sqlcond;");
}

?> 
```

`rebuildSearchIndexForPerson()`每当您添加或更改人员行时，添加对该方法的调用。`deleteSearchIndexForPerson()`每当您删除人员行时，添加对该方法的调用。当您第一次想要搜索某些内容时，您必须调用`rebuildSearchIndex()`为您的老人行创建搜索索引。之后，您将能够使用该`search()`功能。

正如我所说，这只是第一个草图。例如，您必须更改方法`performQuery`，`escapeForQuery`以及`getRow`您实际使用的方法。此外，php 代码的质量也不是特别好。但是它的工作原理应该很清楚。

# http - Web 服务器绝对需要哪些 http 方法？

> ID：16165443
> 
> 赞同：0
> 
> 时间：2013-04-23T09:12:59.840
> 
> 标签：http, webserver

每个网络服务器必须实现的 http 协议的最低限度是多少？换句话说，http 的哪一部分对于将网页传递给普通的网络浏览器是绝对必要的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:15:41.937

来自[RFC 2616 第 5.1.1 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html#sec5)：

> 所有通用服务器都必须支持 GET 和 HEAD 方法。所有其他方法都是可选的；但是，如果实现了上述方法，则必须使用与第 9 节中指定的语义相同的语义来实现它们。

# plone - from plone.app.content.batching import Batch 失败并出现 ImportError: No module named batching

> ID：16165446
> 
> 赞同：1
> 
> 时间：2013-04-23T09:13:18.397
> 
> 标签：plone

我刚刚升级到 Plone 4.3，我收到了这个错误：

```
ImportError: No module named batching 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:14:56.387

plone.app.content 不再提供批处理实现。

代替

```
from plone.app.content.batching import Batch 
```

和

```
try:
    from plone.app.content.batching import Batch # Plone < 4.3
    HAS_PLONE43 = False
except ImportError:
    from plone.batching import Batch # Plone >= 4.3
    HAS_PLONE43 = True 
```

[**编辑**]

这两个实现有不同的 API：`pagesize`参数`size`在 plone.app.batching 中命名；此外，需要开始索引而不是页码。

如果您的代码看起来像这样

```
 b = Batch(items,
            pagesize=pagesize,
            pagenumber=pagenumber) 
```

将其替换为

```
 if HAS_PLONE43:
        b = Batch(items,
                size=pagesize,
                start=pagenumber * pagesize)
    else:
        b = Batch(items,
                pagesize=pagesize,
                pagenumber=pagenumber) 
```

# apache2 - 如何以正确的方式使用附加的查询字符串进行虚拟主机重定向

> ID：16165448
> 
> 赞同：1
> 
> 时间：2013-04-23T09:13:19.953
> 
> 标签：apache2, query-string, virtualhost, url-redirection

`redirect`我对我需要做的一些规则感到困惑`production`。我已经看到`a lot of examples in stackoverflow`了，他们已经建立了一些`knowledge`关于重定向的内容。但是，除了重定向到新网址之外，我没有任何特定条件，`exact query string`无论它是如何形成`appended`的。

既然是在生产中，我确实有闲来无事的尝试和捕捉，所以我想尽可能地避免错误。这是我认为我应该做的：

```
<VirtualHost X.X.X.X:80>
  ServerName mypoductionserver.com
  ServerAlias cs.myproductionserver.com
  LogLevel warn
  ErrorLog  /var/log/apache2/productionerror.log

  CustomLog /var/log/apache2/productionaccess.log combined

  RewriteCond %{QUERY_STRING} .
  RewriteRule (.*) http://www.newproductionserver.com/? [R=301,L] 
</VirtualHost> 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:26:06.263

首先，您的 RewriteCond 表示您的查询字符串应包含一个或多个字符。如果您希望即使没有查询字符串也能进行重定向，只需删除条件即可。否则，您可能只想将其设为 '.+' 以阐明它应该至少是一个字符。

其次，有两个错误`RewriteRule`。

首先，`(.*)`您正在捕获路径 - 但您永远不会将其添加到新字符串中。

其次，通过以 a 结束您的规则`?`，您将删除原始查询字符串。

规则应如下所示：

```
RewriteRule (.*) http://www.newproductionserver.com/$1 [R=301,L] 
```

意思是“使用你在第一个括号中捕获的`$1`东西”，删除`?`意思是“不替换查询字符串”。

此外，为了让任何重写都起作用，您需要首先激活 mod_rewrite：

```
RewriteEngine On 
```

# c# - 从 xml 响应中提取节点

> ID：16165453
> 
> 赞同：0
> 
> 时间：2013-04-23T09:13:29.800
> 
> 标签：c#, xml

以下是我从 Web 服务生成的响应。我想做这样的事情，我只想要`PresentationElements`这个响应中的节点。任何帮助我怎样才能实现这个查询？

```
<?xml version="1.0"?>
<GetContentResponse xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <ExtensionData />
  <GetContentResult>
    <ExtensionData />
    <Code>0</Code>
    <Value>Success</Value>
  </GetContentResult>
  <PresentationElements>
    <PresentationElement>
      <ExtensionData />
      <ContentReference>Product View Pack</ContentReference>
      <ID>SHOPPING_ELEMENT:10400044</ID>
      <Name>View Pack PE</Name>
      <PresentationContents>
        <PresentationContent>
          <ExtensionData />
          <Content>View Pack</Content>
          <ContentType>TEXT</ContentType>
          <Language>ENGLISH</Language>
          <Medium>COMPUTER_BROWSER</Medium>
          <Name>Name</Name>
        </PresentationContent>
        <PresentationContent>
          <ExtensionData />
          <Content>Have more control of your home's security and lighting with View Pack from XFINITY Home.</Content>
          <ContentType>TEXT</ContentType>
          <Language>ENGLISH</Language>
          <Medium>COMPUTER_BROWSER</Medium>
          <Name>Description</Name>
        </PresentationContent>
        <PresentationContent>
          <ExtensionData />
          <Content>/images/shopping/devices/xh/view-pack-2.jpg</Content>
          <ContentType>TEXT</ContentType>
          <Language>ENGLISH</Language>
          <Medium>COMPUTER_BROWSER</Medium>
          <Name>Image</Name>
        </PresentationContent>
        <PresentationContent>
          <ExtensionData />
          <Content>The View Pack includes:
2 Lighting / Appliance Controllers
2 Indoor / Outdoor Cameras</Content>
          <ContentType>TEXT</ContentType>
          <Language>ENGLISH</Language>
          <Medium>COMPUTER_BROWSER</Medium>
          <Name>Feature1</Name>
        </PresentationContent>
      </PresentationContents>
    </PresentationElement>
  </PresentationElements>
</GetContentResponse> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:30:31.550

您可以使用 XPath 扩展

```
var xdoc = XDocument.Parse(response);
XElement presentations = xdoc.XPathSelectElement("//PresentationElements"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:15:19.613

您可以使用`System.Xml.Linq.XDocument`：

```
//Initialize the XDocument
XDocument doc = XDocument.Parse(yourString);

//your query
var desiredNodes = doc.Descendants("PresentationElements"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:25:44.430

很简单，你试过吗：

```
XDocument xml = XDocument.Load("... xml");
var nodes = (from n in xml.Descendants("PresentationElements")
                        select n).ToList(); 
```

您还可以使用以下方式将每个单独的节点投影到匿名类型：

```
select new 
{
  ContentReference = (string)n.Element("ContentReference").Value,
  .... etc
} 
```

# c# - 使用 Group by 获取 Linq 中某个字段的总和

> ID：16165454
> 
> 赞同：1
> 
> 时间：2013-04-23T09:13:34.630
> 
> 标签：c#, sql, linq, group-by, sum

我有一个 SQL：

```
 SELECT ApplicationNo,COUNT(ApplicationNo) AS CNT, SUM(Amount) as AMNT 
FROM Payments where (TYPE=1 AND Position=1)  and (Date>='2011-01-01')
and (Date<='2012-01-01')
GROUP BY ApplicationNo 
```

有没有办法可以在 Linq 中转换它？

```
var q = (from payments in context.Payments
                  where payments.Date >= fromdate && payments.Date <= todate
                  group payments by new { payments.ApplicationId } into g
                  select new
                  {
                      applicationId=g.Key,
                      Amount=g.Sum(a=>a.Amount)
                  }); 
```

如果我在 Linq 中编写相同的内容，然后最后使用 Group by，我不会得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:16:53.320

```
DateTime fromDate = new DateTime(2011, 1, 1);
DateTime toDate = new DateTime(2011, 1, 1);

var query = from p in db.Payments
            where p.Type == 1 && p.Position == 1 && 
            p.Date >= fromDate && p.Date <= toDate
            group p by p.ApplicationNo into g
            select new {
                 ApplicationNo = g.Key,
                 CNT = g.Count(),
                 AMNT = g.Sum(x => x.Amount)
           }; 
```

这`db`是您的上下文类。

# apache-camel - 在到达消费者之前验证 VirtualTopic 的消息

> ID：16165457
> 
> 赞同：0
> 
> 时间：2013-04-23T09:13:43.067
> 
> 标签：apache-camel, fuseesb

我正在尝试使用验证器验证发送到 FuseESB 中的虚拟主题（基于 Apache ServiceMix，版本 7.1.0）的 Apache Camel（版本 2.10.4）的消息：xsd（消息是 TextMessage 中的 XML），以及何时它验证失败，我想将消息重定向到另一个主题，并停止处理，所以不要将它发送给普通消费者。因为消费者将因无效消息而失败。

我想对路由进行验证，所以验证一次，而不是对多个消费者进行验证。

骆驼可以做到这一点吗？语法是什么？

我目前的做法是这样的：

```
static final String ACTIVEMQ_TOPIC_PREFIX = "activemq:topic:";
static final String ACTIVEMQ_CONSUMER_PREFIX = "activemq:queue:Consumer.*.";

static final String TOPIC_ORDER_CREATED = "VirtualTopic.order.created";
static final String TOPIC_ORDER_CREATED_ERROR = 
                                          "VirtualTopic.order.created.error";

static final String DIRECT_ORDER_CREATED_ERROR = "direct:orderCreatedError";

from(DIRECT_ORDER_CREATED_ERROR)
    .to(ACTIVEMQ_TOPIC_PREFIX + TOPIC_ORDER_CREATED_ERROR)
    .log("Message sent to " + TOPIC_ORDER_CREATED_ERROR);

// validate order.created topic message 
// before sending to consumer queues.
from(ACTIVEMQ_TOPIC_PREFIX + TOPIC_ORDER_CREATED) 
    .errorHandler(deadLetterChannel(DIRECT_ORDER_CREATED_ERROR))
    .choice() // validation is enabled with property
        .when(simple("${properties:" + PROP_VALIDATION_ENABLED + "} == true"))
            .log("Validating order created body")
            .to("validator:xsd/myxsd.xsd") // validate against xsd
            .onException(ValidationException.class)
                .handled(true) 
                .maximumRedeliveries(0)
                .useOriginalMessage()
                // if invalid send to error topic
                .to(DIRECT_ORDER_CREATED_ERROR)
                .stop()
            .end()
    .end()
    .to(ACTIVEMQ_CONSUMER_PREFIX + TOPIC_ORDER_CREATED)
    .log("Message sent to " + TOPIC_ORDER_CREATED); 
```

我在日志中看到“验证订单创建正文”和“发送到 VirtualTopic.order.created.error 的消息”。在 webconsole 上，我看到一条消息在错误主题中排队，用于一条主主题消息。

问题是 VirtualTopic.order.created 的消费者仍然收到无效消息

您能帮我找到正确的语法来在消息发送给 VirtualTopic 的消费者之前拦截消息吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:01:12.970

您可以只使用 deadLetterChannel，让它使用原始消息，然后处理任何错误并将其移至 DLQ。

```
from(ACTIVEMQ_TOPIC_PREFIX + TOPIC_ORDER_CREATED) 
.errorHandler(deadLetterChannel(DIRECT_ORDER_CREATED_ERROR).useOriginalMessage())
.choice() // validation is enabled with property
    .when(simple("${properties:" + PROP_VALIDATION_ENABLED + "} == true"))
        .log("Validating order created body")
        .to("validator:xsd/myxsd.xsd") // validate against xsd
.end()
.to(ACTIVEMQ_CONSUMER_PREFIX + TOPIC_ORDER_CREATED)
.log("Message sent to " + TOPIC_ORDER_CREATED); 
```

此外，如果您在路线中使用 onException，那么您应该将其放在路线的顶部，而不是中间。

# sql - 通过 R sqlSave 更新 SQL 表

> ID：16165458
> 
> 赞同：7
> 
> 时间：2013-04-23T09:13:48.817
> 
> 标签：sql, r, sql-update, rodbc

我在 R 中有一个包含 3 列的数据框，使用 sqlSave 我可以轻松地在 SQL 数据库中创建一个表：

```
channel <- odbcConnect("JWPMICOMP")
sqlSave(channel, dbdata, tablename = "ManagerNav", rownames = FALSE, append = TRUE, varTypes = c(DateNav = "datetime"))
odbcClose(channel) 
```

此数据框包含有关经理的信息（姓名、导航和日期），这些信息每天都会使用当前日期的新值进行更新，如果出现错误，也可能会更新旧值。

我怎样才能在 R 中完成这项任务？

我尝试使用 sqlUpdate 但它返回以下错误：

```
> sqlUpdate(channel, dbdata, tablename = "ManagerNav")
Error in sqlUpdate(channel, dbdata, tablename = "ManagerNav") : 
  cannot update ‘ManagerNav’ without unique column 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T09:40:38.510

当您创建“白鲨方式”表时（请参阅文档），它不会获得主索引，而只是普通列，并且通常是错误的类型。通常，我使用您的方法来获取正确的列名，但之后您应该进入数据库并分配主索引、正确的列宽和类型。

之后，`sqlUpdate()`可能会工作；我说可能，因为我已经放弃了使用`sqlUpdate()`，有太多的注意事项，并`sqlQuery(..., paste("Update....)))`用于实际工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T16:52:10.417

我会为此做的是以下

解决方案 1

```
sqlUpdate(channel, dbdata,tablename="ManagerNav", index=c("ManagerNav")) 
```

解决方案 2

```
Lcolumns <- list(dbdata[0,]) 
sqlUpdate(channel, dbdata,tablename="ManagerNav", index=c(Lcolumns)) 
```

索引用于指定 R 将要更新的列。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-15T20:15:54.230

如果其他解决方案都不起作用并且您的数据不是那么大，我建议使用`sqlQuery()`并遍历您的数据框。

```
one_row_of_your_df <- function(i) {
  sql_query <- 
paste0("INSERT INTO your_table_name (column_name1, column_name2, column_name3) VALUES",
"(",
"'",your_dataframe[i,1],",",
"'",your_dataframe[i,2],"'",",",
"'",your_dataframe[i,3],"'",",",
")"
  )
  return(sql_query)
} 
```

这个函数是 Exasol 特有的，它与 MySQL 非常相似，但并不完全相同，因此可能需要进行一些小改动。

然后使用一个像这样的简单 for 循环：

```
 for(i in 1:nrow(your_dataframe)) 
    {
        sqlQuery(your_connection, one_row_of_your_df(i))
    } 
```

# c# - 用于访问路径的 http 动词 post 在 asp.net 中是不允许的

> ID：16165463
> 
> 赞同：0
> 
> 时间：2013-04-23T09:14:05.200
> 
> 标签：c#, button, postback, response.redirect

当我写代码时..

```
 <asp:Button ID="Button1" runat="server" onclick="Button1_Click" 
        PostBackUrl="~/Biodata.xls" Text="Button" />

 protected void Button1_Click(object sender, EventArgs e)
{
    Server.Transfer("a.aspx");
} 
```

我收到下面给出的错误。

> 不允许使用用于访问路径“/WebSite4/Biodata.xls”的 HTTP 动词 POST。

在这里，我试图在下载 xls 文件后将页面重定向到另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:37:22.290

你正在看这部分：

```
Server.Transfer("a.aspx"); 
```

但是错误消息是指这部分：

```
PostBackUrl="~/Biodata.xls" 
```

不要回发到 xls 文件。这不是下载东西的方式。而且你不能“下载一些东西然后重定向到其他地方”。这不是 HTTP 请求和响应的工作方式。

浏览器请求了您的页面。您正在返回响应。

1.  您可以将作业交给 a.aspx。然后返回响应是 a.aspx 的工作。

2.  或者，您可以使用 xls 文件本身进行响应，并在 HTTP 标头中使用适当的内容类型和配置。您将使用像 Response.BinaryWrite 这样的[东西。](http://social.msdn.microsoft.com/Forums/en-US/netfxnetcom/thread/d31de6f6-36ff-4632-a6cd-7def6e688f7c) 然后由浏览器来处理它。浏览器可以使用 Excel 之类的工具打开它，或者它可以为用户提供保存文件的机会。

你不能同时做这两件事。你必须选择。

另请参阅[此处](https://stackoverflow.com/questions/2209324/the-http-verb-post-used-to-access-path-test-html-is-not-allowed)和[此处](http://forums.asp.net/t/953470.aspx)了解其他相关问题。

# magento - 为价格比较网站定制像 magento 这样的电子商务购物车

> ID：16165466
> 
> 赞同：-3
> 
> 时间：2013-04-23T09:14:17.323
> 
> 标签：magento, e-commerce, web-site-project

我正在使用网络抓取开发一个价格比较网站。对于前端，我正在考虑使用像 magento 或类似的即用型电子商务购物车。我浏览了这些电子商务网站的演示页面，发现有很多我不需要的模块，例如。订单、运输、付款、折扣等。此外，数据库还需要一些设计更改。是否可以对它们进行这些更改？哪个电子商务网站最能满足我的目的？或者还有其他我可以定制的现成可用的网站吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:19:48.033

## 第一的

这不是这类答案的地方。尝试不同的fourms

## 第二

永远不要调整/重新设计软件来完成另一个软件的工作。我不记得那句披着狮子皮的山羊的名言了。

# jquery - 防止多次点击，直到动画完成（jQuery）

> ID：16165470
> 
> 赞同：3
> 
> 时间：2013-04-23T09:14:28.993
> 
> 标签：jquery

我有一个带有缩略图的画廊，当单击缩略图时，当前图像淡出，新图像淡入。

但是，我想停止多次单击，因此图像必须完全淡出才能单击新缩略图。

我怎样才能用下面的代码做到这一点？

非常感谢，

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>TEST</title>
<script type='text/javascript' src='jquery-1.9.1.js'></script>

<style type='text/css'>
#imageWrap{
position:relative;
overflow:hidden;
height:534px;
width:800px;
}
.next{
display:none;
}
#imageWrap img{
width: 800px;
position: absolute;
top: 0;
left: 0;
background-color: #000;
}
</style>

<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$('.thumbnail').on('click',function(){
$('#imageWrap').append('<img src="' + $(this).attr('src') + '" class="next" />');
$('#imageWrap .active').fadeOut(5500);
$('#imageWrap .next').fadeIn(4000, function(){
    $('#imageWrap .active').remove();
    $(this).addClass('active');
});

});
});//]]>  

</script>

</head>
<body>
<img src="dimming/1.jpg" class="thumbnail" alt="A" width="40" height="40"/>
<img src="dimming/2.jpg" class="thumbnail" alt="B" width="40" height="40"/>
<img src="dimming/C.jpg" class="thumbnail" alt="C" width="40" height="40"/>
<img src="dimming/D.jpg" class="thumbnail"alt="D" width="40" height="40"/>
<img src="dimming/E.jpg" class="thumbnail" alt="E" width="40" height="40"/>

<div id="imageWrap">
    <img src="dimming/C.jpg" alt="Main Image" width="800" height="534" class="active" />
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:19:11.140

通过添加一个布尔标志，您可以在决定做什么之前检查其状态：

```
// Are we in the middle of an animation?
var currentlyAnimating = false;

$('.thumbnail').on('click',function(){
    if (currentlyAnimating) {
        return;
    }

    currentlyAnimating = true;

    $('#imageWrap').append('...');
    $('#imageWrap .active').fadeOut(5500);
    $('#imageWrap .next').fadeIn(4000, function(){
        $('#imageWrap .active').remove();
        $(this).addClass('active');
        currentlyAnimating = false;
    });
}); 
```

当然，您也可以通过查询相关元素的 DOM 或 jQuery 效果队列的状态来进行此检查，但 IMO 使用上述本地化解决方案更简单、更清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:17:44.647

您可以使用选择器进行检查`#imageWrap .next`并且`#imageWrap .active`不进行动画处理`:animated`。

```
$('.thumbnail').on('click',function(){
   if(!$("#imageWrap .next, #imageWrap .active").is(":animated")){
      $('#imageWrap').append('<img src="' + $(this).attr('src') + '" class="next" />');
      $('#imageWrap .active').fadeOut(5500);
      $('#imageWrap .next').fadeIn(4000, function(){
          $('#imageWrap .active').remove();
          $(this).addClass('active');
      });//this was missing      
   }
}); 
```

# search - Cloudant 搜索功能

> ID：16165476
> 
> 赞同：1
> 
> 时间：2013-04-23T09:14:45.293
> 
> 标签：search, heroku, lucene, cloudant

看到这篇关于[Cloudant 搜索功能的](https://cloudant.com/for-developers/search)[相对较旧](https://cloudant.com/blog/developer-preview-cloudant-search-for-couchdb/)的博文。

正在寻找一些查询的答案，因为我们使用 Cloudant Heroku 插件并且需要支持搜索查询：

*   是否可以将基于 Lucene 的搜索索引存储在 CouchDB 本身中，这样如果我们复制数据库（例如，复制到移动设备上的 Couchbase/CouchDB），那么索引数据也会随之而来？

*   索引是否适用于复制的 CouchDB 数据库或仅适用于 Cloudant？

*   如果我们将 PDF 作为附件存储在 CouchDB 文档中怎么办？是否支持开箱即用地索引和搜索这些字段？我们是否应该解析 PDF 并编写自己的分析器，然后将其导入 Cloudant？

*   如果我们想要支持搜索从 Cloudant 复制到移动设备上的本地 CouchDB 实例的 CouchDB 的 PDF“附件”的内容，那么最好的方法是什么？

如果有人可以提供一些通过 Cloudant 实现这些目标的指示，那就太好了。

我知道有一些替代品，如[这里](http://wiki.apache.org/couchdb/Full_text_search)提到[的 CouchDB-Lucene](https://github.com/rnewson/couchdb-lucene)。

但由于我们使用 Cloudant 作为中央 CouchDB，很想知道这是否可以轻松完成。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T11:14:23.920

> 是否可以将基于 Lucene 的搜索索引存储在 CouchDB 本身中，这样如果我们复制数据库（例如，复制到移动设备上的 Couchbase/CouchDB），那么索引数据也会随之而来？

Cloudant 上的搜索索引始终存储在数据库之外。与视图数据一样，它们不会被复制。否则，我们无法使用 Lucene 高度优化的磁盘格式。

> 索引是否适用于复制的 CouchDB 数据库或仅适用于 Cloudant？

搜索索引仅适用于 Cloudant（使用设计文档中的“索引”字段）。您需要为移动设备或复制的 vanilla-CouchDB 实例提供单独的解决方案。

> 如果我们将 PDF 作为附件存储在 CouchDB 文档中怎么办？是否支持开箱即用地索引和搜索这些字段？我们是否应该解析 PDF 并编写自己的分析器，然后将其导入 Cloudant？

目前，您需要使用 Tika 之类的工具自己解析 PDF 中的文本，并将其存储在文档中的一个字段中，然后通过搜索对其进行索引。不太可能支持自定义分析器，但可能会支持索引二进制文件。

> 如果我们想要支持搜索从 Cloudant 复制到移动设备上的本地 CouchDB 实例的 CouchDB 的 PDF“附件”的内容，那么最好的方法是什么？

这取决于平台。由于您已经解析出用于 Cloudant 搜索的 PDF 文本，因此您可以使用设备上的本地搜索 API。不幸的是，这些在地面上还有些薄，我还没有时间自己尝试。据我所知，目前 iOS 上还没有 SearchKit 很遗憾。

或者，您可以使用 Cloudant 的搜索进行在线搜索，然后从本地数据库中提取文档，就像您拥有文档 ID 一样。

# c - 可疑指针转换警告

> ID：16165477
> 
> 赞同：2
> 
> 时间：2013-04-23T09:14:45.557
> 
> 标签：c, pointers, warnings, compiler-warnings, c18

我正在使用 Microchip 的 C18 编译器编译我的 C 代码。我`[2054] suspicious pointer conversion`在这段代码中收到警告：

```
unsigned char ENC_MAADR1 = 0x65;
unsigned char ENC_ReadRegister(unsigned char address);
// ...
puts(ENC_ReadRegister(ENC_MAADR1)); // <-- warning on this line 
```

这个警告是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T09:16:42.770

`puts`需要`const char*`，您正在交付`unsigned char`，甚至没有指针。

从[这里](http://www.mkssoftware.com/docs/man3/puts.3.asp)：

```
#include <stdio.h> 

int puts(const char *s); 
```

该`puts()`函数将指向的字符串写入`s`标准输出流stdout，并将换行符附加到输出。不写入字符串的终止空字符。

改为使用`putc(int c, FILE* stream)`...请参阅[此处](http://www.cplusplus.com/reference/cstdio/putc/)以获取参考。

感谢您的注释！

# mongodb - 如何手动锁定 mongodb 数据库以进行读取？

> ID：16165481
> 
> 赞同：1
> 
> 时间：2013-04-23T09:15:08.157
> 
> 标签：mongodb, collections

我想*安全地*切换集合，例如将集合重命名`foobar`为`foobar.old`，然后将其他集合重命名为`foobar`. 据我了解，这些重命名之间存在差距，当任何尝试从`foobar`集合中读取时都会出现错误。有什么方法可以更安全地交换这些收藏吗？

更新：

我用`renameCollection`. 如前所述，问题是如何防止客户端在两次重命名的那短暂时刻读取 db。

# ember.js - Ember.js 服务器端分页

> ID：16165483
> 
> 赞同：3
> 
> 时间：2013-04-23T09:15:12.090
> 
> 标签：ember.js, ember-data

我正在使用[这个](https://stackoverflow.com/questions/13008838/ember-pagination-full-example)完美的分页解决方案。

它有一个特点：它向服务器询问整组数据。我只想请求其中的一部分。

我需要在 ember-data 中做什么来配置我的请求，以便它们在页面信息中包含更多参数？

谢谢你

更新：以这种方式完成：

```
App.Books = Ember.Route.extend
  setupController: (controller, model) ->
    controller.set 'content', App.Book.find({page_number: controller.get('currentPage')}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T10:28:27.453

您可以将查询发送`find`到`DS.Model`. 因此，如果您有遵循 OData 协议的端点，您可以这样做：

```
App.Post.find({ '$top': 10, '$skip': 0 }); 
```

它只会返回前 10 个帖子。

# java - 在不使用 JVM 堆空间的 Java 内存缓存中

> ID：16165484
> 
> 赞同：3
> 
> 时间：2013-04-23T09:15:15.127
> 
> 标签：java, caching, in-memory

我正在寻找不使用 JVM 堆空间的 Java 内存缓存。

我研究过 EhCache 和 JCS，但它们都使用堆。

我希望它是可扩展的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:27:58.277

您还可以考虑使用 [HazelCast In Memory Data Grid](http://www.hazelcast.com/)解决方案。我用过它，我会说它是我遇到的最好的解决方案之一。

# python - 在 python 中打包和解包二进制浮点数

> ID：16165488
> 
> 赞同：9
> 
> 时间：2013-04-23T09:15:28.803
> 
> 标签：python, file-io, struct, binaryfiles

在进行二进制文件写入时，我在 python 中打包和解包二进制浮点数时遇到了一些麻烦。这是我所做的：

```
import struct

f = open('file.bin', 'wb')
value = 1.23456
data = struct.pack('f',value)
f.write(data)
f.close()

f = open('file.bin', 'rb')
print struct.unpack('f',f.read(4))
f.close() 
```

我得到的结果如下：

```
(1.2345600128173828,) 
```

多余的数字是怎么回事？这是一个舍入错误吗？这是如何运作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T09:23:19.040

在大多数平台上，Python 浮点数就是 C 所称的 a `double`，但是您将数据写成 as `float`，它的精度只有一半。

如果你使用`double`，你的精度损失会更少：

```
>>> data = struct.pack('d',value)
>>> struct.unpack('d',data)
(1.23456,)
>>> data = struct.pack('f',value)
>>> struct.unpack('f',data)
(1.2345600128173828,) 
```

`float`struct 格式仅提供单[精度（24 位用于显着精度）](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-05T00:15:54.210

**这是一个十进制到二进制的问题。**

你知道小数中的一些分数是如何重复的吗？例如，1/3 是 0.3333333-> 永远。1/7 是 0.142857142857[142857]-> 永远。

所以这是踢球者：重复分数是那些分母的因子不是 10 的因子 - 例如不是 2 和/或 5 的倍数。

*   1/2 均分
*   1/3 重复
*   1/4 均分
*   1/5 均分
*   1/6 次重复
*   1/7 次重复
*   1/8 均分
*   1/9 次重复
*   1/10 均分
*   1/11 次重复
*   等等

那么现在它是如何在二进制中工作的呢？嗯，这有点糟糕，因为唯一能除以的因子是 2。除 2 之外的所有其他素数都将有重复的小数，这些小数会永远重复——包括十分之一、百分之一等，它们的分母都是 5 . 1.2345 是 12345/10000，其分母中有 2 和 5 因子，而 5 意味着你有一个重复的二进制小数，它永远重复。

但你不能永远重复。这意味着您必须将小数四舍五入才能适合编码浮点数的二进制数字。

当您转换回十进制时，会显示舍入误差。

编码的结果是：**尽可能晚地计算除法，**以防止这些错误随着每次计算而累积。

# perl - TAP中的等待状态有什么意义？

> ID：16165489
> 
> 赞同：0
> 
> 时间：2013-04-23T09:15:29.560
> 
> 标签：perl, tap, tap-harness, test-more

这是一个比其他任何问题都更符合我理解的问题。我过去[`Test::More`](https://metacpan.org/module/Test%3a%3aMore)常常通过[`TAP::Harness`](https://metacpan.org/module/TAP%3a%3aHarness).

当测试运行时，它会返回一个退出代码和一个等待代码。

`Test::More` [根据文档](https://metacpan.org/module/Test%3a%3aMore#EXIT-CODES)，退出代码旨在在失败时返回非零值。

但是等待代码意味着什么？对于我正在运行的测试，它似乎是失败测试数 (256 * n) 的倍数。

我的猜测是该协议试图模拟 Unix 上的父子进程关系，但我对等待代码一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T14:58:13.277

有关如何构建等待代码的更多信息，[请参阅 $?](http://perldoc.perl.org/perlvar.html#Error-Variables) . 正如您所推测的，Test::More 的退出代码乘以 256，通常该值将是失败测试的数量。

等待代码有用的原因是，它可以让您查看harness 下的代码何时因信号而退出：

```
use Test::More tests => 2;

ok 1,"first";
kill 15,$$;
ok 1,"second"; 
```

将产生 15 的等待状态。您的脚本是否退出信号取决于您在做什么；我有一个系统必须调用一个不可靠的远程服务，并且在另一端死机时会看到 SIGPIPE 错误。

# java - 使用 Jericho 在两个特定文本之间提取数据

> ID：16165491
> 
> 赞同：0
> 
> 时间：2013-04-23T09:15:35.487
> 
> 标签：java, html-parsing, jericho-html-parser

我正在使用 Jericho 来解析 Html。我有一个 html 页面，我需要在其中提取两个特定文本之间的数据。

```
 <table width="100%" align="left">
        <tr><td>
             <b>  Item 7\. </b>
        </td></tr>
    </table>
    ...........other data...........
other tags    
<table width="100%" align="left">
        <tr><td>
             <b>  fd ..fds   </b>
        </td></tr>
    </table>

    ...........other data ends...........

    <table width="100%" align="left">
        <tr><td>
             <b>  Item 8\. </b>
        </td></tr>
    </table> 
```

如何使用 jercio提取**第 7**项和**第 8 项之间的数据。**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T06:36:53.103

在我的情况下，“第 7 项”和“第 8 项”出现在“粗体”内，然后是

我迭代了元素列表。我的代码

```
for (Element allElement : allElements) {

            if(strtInd==false){
            if((allElement.getStartTag().toString().toLowerCase()).startsWith(("<table").toLowerCase())){

                List<Element> boldElem = allElement.getAllElements(HTMLElementName.B);

                if(null !=boldElem && boldElem.size()>0){
                    Element e1 =  boldElem.get(0);
                    if(null != e1&& (e1.getTextExtractor().toString().toLowerCase()).startsWith(("Item 7.").toLowerCase())){
                        prevElement = allElement;
                        strtInd = true;
                    }
                }

            }
            }else{

                if((allElement.getStartTag().toString().toLowerCase()).startsWith(("<table").toLowerCase())){

                    List<Element> boldElem = allElement.getAllElements(HTMLElementName.B);

                    if(null !=boldElem && boldElem.size()>0){
                        Element e1 =  boldElem.get(0);
                        if(null != e1&& (e1.getTextExtractor().toString().toLowerCase()).startsWith(("Item 8.").toLowerCase())){
                            System.out.println(e1.getTextExtractor().toString());
                            strtInd = false;
                            break;
                        }
                    }

                }
                    sBuff.append(allElement.getFirstElement());
                    prevElement =allElement;
                    System.out.println(allElement);
            }

        } 
```

# ember.js - 在 Ember 应用程序中读取 package.json

> ID：16165501
> 
> 赞同：5
> 
> 时间：2013-04-23T09:16:02.230
> 
> 标签：ember.js, gruntjs, yeoman

我们基于`yeoman`( `grunt`) 的`Ember.js`项目具有以下结构（仅显示了一些相关组件）：

```
myapp/
├── app
├── component.json
├── package.json
├── Gruntfile.js
├── README.md
│   ├── adapters
│   ├── application.js
│   ├── components
│   ├── controllers
│   ├── generated
│   ├── images
│   ├── models
│   ├── routes
│   ├── scripts
│   ├── styles
│   ├── templates
│   └── views
├── dist
├── node_modules
└── test 
```

我们需要访问 和 中的一些`application.js`值。我们想在部署过程中访问它（作为任务？）。这可能吗？如何实施？`package.json``component.json``grunt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T11:49:29.143

您还可以使用像[https://github.com/outaTiME/grunt-replace](https://github.com/outaTiME/grunt-replace)这样的即用型 grunt 包来完成此类任务，最常见的用例是例如提取版本号并用它标记您的 javascript 文件在咕噜咕噜的跑步中

示例实现***（尚未测试）***：

在您的**Gruntfile.js**中：

```
...
replace: {
    dist: {
        options: {
            variables: {
                version: '<%= pkg.version %>'
            }
        },
        prefix: '@@',
        files: [
            {expand: true, flatten: true, src: ['app/application.js', 'app/README.md'], dest: 'dist/'}
        ]
    }
}
... 
```

**应用程序.js**

```
...
var App = Framework.Application.create({
    VERSION: @@version,
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:34:35.673

用于`grunt.file.readJSON('package.json')`从文件中读取 json 以执行 grunt 任务。

# php - PHP中的第一个单词大写

> ID：16165503
> 
> 赞同：-4
> 
> 时间：2013-04-23T09:16:11.357
> 
> 标签：php, codeigniter, ucfirst

当我使用 PHP 时，我遇到了一个问题，我如何才能在这段代码中使用第一个字母。

```
<?php foreach($aa as $row):?>

<?php echo ''.$row->username.'' ?>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:17:06.867

Php 有一个[`ucfirst()`](http://php.net/manual/en/function.ucfirst.php) 函数，它使字符串的第一个字符大写。

`<?php echo ''.ucfirst($row->username).'' ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:18:55.573

[`ucfirst()`](http://php.net/manual/en/function.ucfirst.php)会帮助你，但请注意，它只会将第一个转换为大写。所有其他的也可以是大写，所以您可能希望先将它们转换为小写。

```
<?php echo ucfirst(strtolower($row->username)); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:18:04.333

使用 CSS 而不是 PHP 函数来显示它会更容易。

使用这行 CSS：

```
text-transform: capitalize; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:18:42.623

安全的 UTF-8 方法

```
<?php echo asd($row->firstname); ?>

    function asd($string){
     if(mb_strlen($string)){
     return mb_strtoupper(mb_substr($string,0,1)).mb_substr($string,1,mb_strlen($string));
    }else{
     return false;
    }
    } 
```

但在**Codeigniter**中你可以这样做：

```
$this->load->helper('string');
echo humanize($row->username); 
```

**第三种情况**（我通常更喜欢的一种）是使用 CSS 类：

```
.capitalize{
 text-transform:capitalize;
}

<a class="capitalize"><?php echo $row->firstname; ?></a> 
```

# mysql - MySQL SELECT 查询中的性能问题？

> ID：16165505
> 
> 赞同：1
> 
> 时间：2013-04-23T09:16:21.653
> 
> 标签：mysql

在其中一个 Facebook 群组中，有人问了一个问题：

假设我们有 2 个查询。

```
SELECT * FROM video WHERE video_id='45f54' AND video_type='youtube';

SELECT * FROM video WHERE video_type='youtube' AND video_id='45f54' 
```

`video_id`是一个索引字段。

这两个查询的性能有什么区别吗？

有人回答在子句之后放置索引字段`WHERE`更快....，但为什么呢？两个不一样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:27:14.027

假设表`video`是相同的，那么这两个查询实际上是相同的，因为 MySQL 优化器将在内部处理 WHERE 条件。这里有几个类似问题的链接

*   [查询中列的顺序是否重要？](https://stackoverflow.com/questions/4582331/does-the-order-of-columns-in-a-query-matter)
*   [https://dba.stackexchange.com/questions/1792/in-mysql-does-the-order-of-the-columns-in-a-where-clause-affect-query-performan](https://dba.stackexchange.com/questions/1792/in-mysql-does-the-order-of-the-columns-in-a-where-clause-affect-query-performan)

对于优化，您可能希望考虑以下（如果尚未完成）

*   将 video_type 更改为 ENUM()，甚至是通过 INTEGER 链接的单独表
*   对 video_type 进行更改后的 (video_type,video_id) 上的索引。
*   限制 video_id 的长度，即 CHAR(5) 如果它们总是 5 个字符长

我个人会创建一个新表“video_types”（videotypeID SMALLINT UNSIGNED AUTO_INCREMENT，videotype VARCHAR）。这将允许视频中的搜索潜在地更加优化，尽管它仍然严重依赖于数据。

# r - 在 R 中使用 awk 命令提取数据

> ID：16165507
> 
> 赞同：0
> 
> 时间：2013-04-23T09:16:35.013
> 
> 标签：r

这个问题是这个问题的延续和澄清，[从文本文件中提取数据](https://stackoverflow.com/questions/14261776/extracting-data-from-text-files)我关闭了这个问题，但我仍然难以将答案应用于我的问题。

我坐在一台 Windows 机器上，我正在使用 Putty 将作业提交给超级计算机。作业返回以下格式的文件，[http://www.d.umn.edu/~psiders/courses/chem4642/quantumchemsoftware/tutorial/gamess/methanol.out](http://www.d.umn.edu/~psiders/courses/chem4642/quantumchemsoftware/tutorial/gamess/methanol.out)。（请注意，这是一个 .log 文件而不是 .out 文件，这对于阅读以下内容很重要）。

我使用以下 shell 命令查询文件，

```
grep MAXIMUM FileName.log | awk '{print $4}' 
```

它返回一系列我复制到剪贴板的数字，然后运行以下 R 文件，

```
MAX1 <- readClipboard(format=1, raw=FALSE) # reading data
plot(MAX1, type="b", ylim=c(0,0.00005), xlim=c(0,50), 
main=bquote(After~ .(length(MAX1))~ iterations))
abline(h=0.00001, col="red") 
```

它返回计算的图形表示。

（其他人使用 perl 脚本执行此操作）。

计算完成后，我从超级计算机中提取文件并将其存储在我的 Windows 系统中。

我想要做的是准备一个可以在 Windows 环境中查询 .log 文件的 R 脚本。

我知道如何更改目录、列出文件并使用 readLines 将文件放入 R，

```
grep("MAXIMUM",readLines("FileName.log"), value=TRUE) #searching files 
```

但这不会将值作为我可以放入绘图中的一串数字返回。它看起来像没有应用“awk”的字符串。

谁能帮我解决这最后一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:29:08.793

如果`g`是`grep`then 的结果：

```
read.table(text = g)[, 4] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T12:22:32.100

如果您想坚持使用 grep 和类似于 awk 的方法，这可能会有所帮助：

```
selected.lines <- grep("MAXIMUM",readLines("FileName.log"), value=TRUE)
values <- unlist(lapply(selected.lines, function(x) { s<-strsplit(x, " +"); return(s[[1]][5]) })) 
```

但是重新考虑使用 read.table 的方法可能更直接、更快捷。

# jdbc - 如何在 Sybase 数据库中使用 sql 数组？

> ID：16165516
> 
> 赞同：1
> 
> 时间：2013-04-23T09:16:55.747
> 
> 标签：jdbc

**在将sql** Array 与**Sybase**数据库一起使用时，我遇到了`"createArrayOf(String arg0, Object[] arg1)has not been completed and should not be called."`运行时异常。

 ****用法：

```
String[] list = {"test"};
statement.setArray(1, statement.getConnection().createArrayOf("varchar", ist)); 
```

例外：

```
Exception in thread "main" com.sybase.jdbc4.utils.UnimplementedOperationException: The method com.sybase.jdbc4.jdbc.SybConnection.public Array createArrayOf(String arg0, Object[] arg1) has not been completed and should not be called.
    at com.sybase.jdbc4.jdbc.ErrorMessage.raiseRuntimeException(Unknown Source)
    at com.sybase.jdbc4.utils.Debug.notImplemented(Unknown Source)
    at com.sybase.jdbc4.jdbc.SybConnection.createArrayOf(Unknown Source) 
```****

# telerik - KendoUI 网格数字文本框过滤器的最小值和最大值不起作用

> ID：16165517
> 
> 赞同：1
> 
> 时间：2013-04-23T09:17:00.953
> 
> 标签：telerik, kendo-ui, kendo-grid

我的应用程序中有 KendoUI 网格。有一列具有“类型：数字”，因此在网格过滤器菜单中会出现一个数字文本框。我想在过滤器菜单中设置该数字文本框的最小值和最大值。我试图这样做：

```
filterable: { 
    min:0,
    max:5,
    extra: false, 
    operators: { 
        number: {
            eq: "Is Equal To",
            neq: "Is Not Equal To"
        }
    }
} 
```

但它不起作用。为什么？有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T14:43:29.467

您可以使用网格的`filterMenuInit`事件来获取对数字文本框小部件的引用并设置它的最小值和最大值。这是一个例子：

```
$("#grid").kendoGrid({
    // other config options omitted for brevity...
    filterable: { 
        extra: false, 
        operators: { 
            number: {
                eq: "Is Equal To",
                neq: "Is Not Equal To"
            }
        }
    },
    filterMenuInit: function(e) {
        var numeric;
        if (e.field === "my-field-name") {
            numeric = e.container
                .find("[data-role=numerictextbox]")
                .getKendoNumericTextBox();
            if (numeric) {
                numeric.min(0);
                numeric.max(5)
            }
        }
    }
}); 
```

查看[KendoUI 网格文档](http://docs.kendoui.com/api/web/grid#events-filterMenuInit)以获取更多详细信息。

# php - 使用 PHP 将 MySQL 数据导出到 CSV 文件显示 1 行和空白 CSV

> ID：16165521
> 
> 赞同：1
> 
> 时间：2013-04-23T09:17:20.780
> 
> 标签：php, mysql, csv, export

我有这段代码可以将 MySQL 数据导出到 CSV 文件，但是当我回显结果时，它只显示数据库中的 1 行，即使我在 PHP My Admin 中运行 SQL，它也会显示大约 29 行。

它只是生成一个空白的 CSV 文件

```
$sql="select description, jobreceived, timebookedfor, bookedfor,
      site_contact, site_address, invoice_contact, invoice_address,
      quotedprice, cleardowndetails, notes, mo_number from jobs ";
$rs=mysql_query($sql,$conn) or die(mysql_error());
$filename="jobs.csv";
$file=fopen($filename,"w");
//$output="sequence,firstname,surname,email,membertype\n";
fwrite($file,$output);
while($result=mysql_fetch_array($rs))
{
    echo $result["description"].','.$result["jobreceived"].'<br>';
    //$output=$result["sequence"].",".$result["name"].","
              .$result["email"].",".$result["country"]."\n";
    $output=proper($result["description"]).",".$result["jobreceived"]
           ."\r\n";
    fwrite($file,$output);
}
fclose($file);
function proper($string)
{
    $first=strtoupper(substr($string,0,1));
    $rest=strtolower(substr($string,1));
    $result=$first.$rest;
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:50:05.700

也许您应该尝试删除 fwrite($file,$output); 循环中的语句。如果查询结果按预期回显，那么问题显然是 fwrite 语句（可能是文件权限）。如果结果未按预期回显，则您的查询结果可能存在问题。此外，作为建议，请确保按照 fopen 手册的规定，为操作系统使用正确的行尾字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:27:15.673

你可以用这两个函数来做

```
function csv_from_result($query, $delim = ",", $newline = "\n", $enclosure = '"')
{
    if ( ! is_object($query) OR ! method_exists($query, 'list_fields'))
    {
        show_error('You must submit a valid result object');
    }

    $out = '';

    // First generate the headings from the table column names
    foreach ($query->list_fields() as $name)
    {
        $out .= $enclosure.str_replace($enclosure, $enclosure.$enclosure, $name).$enclosure.$delim;
    }

    $out = rtrim($out);
    $out .= $newline;

    // Next blast through the result array and build out the rows
    foreach ($query->result_array() as $row)
    {
        foreach ($row as $item)
        {
            $out .= $enclosure.str_replace($enclosure, $enclosure.$enclosure, $item).$enclosure.$delim;
        }
        $out = rtrim($out);
        $out .= $newline;
    }

    return $out;
}

function write_file($path, $data, $mode = 'wb')
{
    if ( ! $fp = @fopen($path, $mode))
    {
        return FALSE;
    }

    flock($fp, LOCK_EX);
    fwrite($fp, $data);
    flock($fp, LOCK_UN);
    fclose($fp);

    return TRUE;
} 
```

将您的查询对象传递给函数。

```
$sql="select
          description,
          jobreceived,
          timebookedfor,
          bookedfor,
          site_contact,
          site_address,
          invoice_contact,
          invoice_address,
          quotedprice,
          cleardowndetails,
          notes,
          mo_number
        from jobs";
$rs =   mysql_query($sql,$conn) or die(mysql_error()); 
```

现在将资源传递给`csv_from_result`函数

```
$file_data  =   csv_from_result($rs); 
```

现在你可以写文件了

```
$filename   =   "jobs.csv"; 
write_file($filename , $file_data); // $filename can be a complete path 
```

或回显查看 csv 结果

```
echo $file_data; 
```

# asp.net - 动态创建 TabContainer 并将其动态添加到手风琴窗格

> ID：16165526
> 
> 赞同：1
> 
> 时间：2013-04-23T09:17:39.300
> 
> 标签：asp.net, ajaxcontroltoolkit, accordion, tabcontainer

我已经动态创建了一个手风琴窗格，但现在我想将 Ajax TabContainer 添加到我的手风琴窗格中，其中包含多个选项卡，但由于某种原因，如果我添加多个选项卡它不会显示，但在我的页面源代码中它会显示。如果我只添加一个选项卡，它会显示，但不会显示我添加到其中的控件。

这是我的代码：

```
'Create AccrionPane
Dim pane As New AjaxControlToolkit.AccordionPane
pane.ID = "pane_" & dt.Rows(i).Item("PRENR").ToString
pane.HeaderContainer.Controls.Add(headerLabel1)
pane.HeaderContainer.Controls.Add(headerLabel2)

'Create TabContainer
Dim tbContainer As New AjaxControlToolkit.TabContainer
tbContainer.ID = "container_" & dt.Rows(i).Item("PRENR").ToString

'Create TabContent
Dim tbContent As New Control
tbContent.ID = "tbContent_" & dt.Rows(i).Item("PRENR").ToString

'Create TabPanel
Dim tbPanel As New AjaxControlToolkit.TabPanel
tbPanel.ID = "tbPanel_" & dt.Rows(i).Item("PRENR").ToString
tbPanel.HeaderText = "PREMIUM AMOUNT"

'Adding the controls to Page
tbContent.Controls.Add(dvEarner1)
tbPanel.Controls.Add(tbContent)
tbContainer.Tabs.Add(tbPanel)
'tbContainer.Tabs.Add(tbPanel1)
'tbContainer.Tabs.Add(tbPanel2)
'tbContainer.Tabs.Add(tbPanel3)
'tbContainer.Tabs.Add(tbPanel4)
'tbContainer.Tabs.Add(tbPanel5)
pane.ContentContainer.Controls.Add(tbContainer)
Me.MainAccordion1.Panes.Add(pane) 
```

我究竟做错了什么？我想在手风琴窗格的每个选项卡中显示 DetailsViews

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:39:59.197

我解决了，这是一个ID冲突的情况。

# sql - 查找所有列的空/空记录数

> ID：16165528
> 
> 赞同：3
> 
> 时间：2013-04-23T09:17:44.637
> 
> 标签：sql, sql-server

我有一张有 40 列的表格。

我希望编写一个查询，它将向我返回每列中空值/空值的数量。

例子，

如果有 A、B、C 和 D 列。

我想要的输出是：

```
 A|B|C|D
 3|5|4|9 
```

其中 3 是记录数：其中 A 为 null 或 A = '' 等等...

任何帮助，将不胜感激。我正在使用 MS SQL 2008 R2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:24:47.040

试试这个——

```
DECLARE @temp TABLE
(
      A VARCHAR(50)
    , B VARCHAR(50)
    , C VARCHAR(50)
    , D VARCHAR(50)
)

INSERT INTO @temp (A, B, C, D)
VALUES 
    ('', 'dr', '1', NULL),
    ('d', NULL, '45', 'h')

SELECT 
    A = COUNT(CASE WHEN ISNULL(A, '') = '' THEN 1 END)
  , B = COUNT(CASE WHEN ISNULL(B, '') = '' THEN 1 END)
  , C = COUNT(CASE WHEN ISNULL(C, '') = '' THEN 1 END)
  , D = COUNT(CASE WHEN ISNULL(D, '') = '' THEN 1 END)
FROM @temp 
```

**更新：**

在这种情况下，请尝试动态 sql -

```
DECLARE @TableName SYSNAME
SELECT @TableName = 'dbo.test1'

DECLARE @SQL NVARCHAR(MAX)

SELECT @SQL = 'SELECT' + CHAR(13) + STUFF((
    SELECT CHAR(13) + ', ' + c.name + ' = COUNT(CASE WHEN ISNULL(CAST(' + c.name + ' AS NVARCHAR(MAX)), '''') = '''' THEN 1 END)'
    FROM (
        SELECT o.[object_id]
        FROM sys.objects o
        JOIN sys.schemas s ON o.[schema_id] = s.[schema_id]
        WHERE o.[type] = 'U'
            AND s.name + '.' + o.name = @TableName
    ) o
    JOIN sys.columns c ON o.[object_id] = c.[object_id]
    FOR XML PATH(''), TYPE).value('.', 'NVARCHAR(MAX)'), 1, 2, ' ') + CHAR(13) + 'FROM ' + @TableName

PRINT @SQL

EXEC sys.sp_executesql @SQL 
```

在输出中你可以得到类似的东西：

```
SELECT
  WorkOutID = COUNT(CASE WHEN ISNULL(CAST(WorkOutID AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, TimeSheetDate = COUNT(CASE WHEN ISNULL(CAST(TimeSheetDate AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, DateOut = COUNT(CASE WHEN ISNULL(CAST(DateOut AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, EmployeeID = COUNT(CASE WHEN ISNULL(CAST(EmployeeID AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, IsMainWorkPlace = COUNT(CASE WHEN ISNULL(CAST(IsMainWorkPlace AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, DepartmentUID = COUNT(CASE WHEN ISNULL(CAST(DepartmentUID AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, WorkPlaceUID = COUNT(CASE WHEN ISNULL(CAST(WorkPlaceUID AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, WorkShiftCD = COUNT(CASE WHEN ISNULL(CAST(WorkShiftCD AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, TeamUID = COUNT(CASE WHEN ISNULL(CAST(TeamUID AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, WorkHours = COUNT(CASE WHEN ISNULL(CAST(WorkHours AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, AbsenceCode = COUNT(CASE WHEN ISNULL(CAST(AbsenceCode AS NVARCHAR(MAX)), '') = '' THEN 1 END)
, PaymentType = COUNT(CASE WHEN ISNULL(CAST(PaymentType AS NVARCHAR(MAX)), '') = '' THEN 1 END)
FROM dbo.test1 
```

![教授](https://i.stack.imgur.com/b1m0h.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:11:53.060

试试这个

```
DECLARE @cols1 NVARCHAR(MAX);
DECLARE @sql NVARCHAR(MAX);

SELECT @cols1 = STUFF((
    SELECT ', COUNT(CASE WHEN ISNULL(CONVERT(NVARCHAR(MAX), [' + t1.NAME + ']), '''') = '''' THEN 1 END) AS ' + t1.name
    FROM sys.columns AS t1
    WHERE t1.object_id = OBJECT_ID('myTable')
    --ORDER BY ', COUNT([' + t1.name + ']) AS ' + t1.name
    FOR XML PATH('')
), 1, 2, '');

SET @sql = '
SELECT ' + @cols1 + '
FROM myTable
'

EXEC(@sql) 
```

# ios - iOS 应用推广实体产品

> ID：16165531
> 
> 赞同：0
> 
> 时间：2013-04-23T09:17:48.080
> 
> 标签：ios, app-store, in-app-purchase

我对营销有一个想法。现在我有一个糖果崩溃之类的游戏。每当用户获得 10,000 分时，如果他们购买我们的实体产品，他们可以获得 10% 的折扣。我的想法在应用审核中是否违法？

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:30:57.557

如果您要销售数字商品，则必须通过应用内购买。但是，如果它是真实世界的商品，您可以在应用程序内出示优惠券。请参阅应用指南：[https](https://developer.apple.com/appstore/resources/approval/guidelines.html) ://developer.apple.com/appstore/resources/approval/guidelines.html 第 11 节

# android - 安卓应用崩溃

> ID：16165535
> 
> 赞同：0
> 
> 时间：2013-04-23T09:17:59.600
> 
> 标签：android, maps

我的应用程序正处于开发的最后阶段，但我找不到应用程序崩溃的原因，希望这里有人可以。它从不同的文件中获取输入，但是当我尝试搜索时，应用程序会挂起一分钟然后崩溃。

根据我的 LogCat 文件，它在崩溃之前到达的行是

`mapV = (MapView) findViewById(R.id.mapView);`然后它崩溃了。同样在 LogCat 中，它在 packagename.DisplaySearchOptions 处显示 java.lang.NullPointerException。

这是我的代码 -

```
// All imports

public class DisplaySearchOptions extends MapActivity 
{
    MapController mControl;
    GeoPoint GeoP;
    MapView mapV;
    EditText numberOfRooms;

int theAvailablePropertiesBedrooms[] = {4, 3, 3, 1, 5};
int theAvailablePropertiesprice[] = {300000, 180000, 200000, 50000, 450000};
double LatHouses[] = {53.426599, 53.425500, 53.425122, 53.413081, 53.416208};
double LongHouses[] = {-7.931568, -7.939915, -7.950454, -7.957041, -7.904963};

double desiredRooms = 0;
double desiredPrice = 0;

class MapOverlay extends com.google.android.maps.Overlay 
{
    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);

        // ---translate the GeoPoint to screen pixels---
        Point screenPts = new Point();
        mapView.getProjection().toPixels(GeoP, screenPts);

        // ---add the marker---
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.pushpin);
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y - 50, null);
        return true;
    }
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.search_options);
    Log.d("Events", "Inside onCreate method");

    Button searchBtn = (Button) findViewById(R.id.btnSearch);
    Log.d("Events", "Button searchBtn = (Button) findViewById(R.id.btnSearch); LINE REACHED");

    mapV = (MapView) findViewById(R.id.mapView);
    Log.d("Events", "mapV = (MapView) findViewById(R.id.mapView); LINE REACHED");

    mapV.setBuiltInZoomControls(true);
    mapV.setSatellite(true);        

    final List<Overlay> mapOverlays = mapV.getOverlays();
    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    final HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable, this);

    // Starting point on map
    double lat = 53.423933100000000000;
    double longi = -7.940689799999973000;

    GeoP = new GeoPoint((int) (lat * 1E6), (int) (longi * 1E6));

    mControl = mapV.getController();
    mControl.animateTo(GeoP);
    mControl.setZoom(15);

    searchBtn.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("Events", "searchBtn.setOnClickListener(new Button.OnClickListener() LINE REACHED");

            EditText numberOfRooms = (EditText) findViewById(R.id.numberRoomsnew);

            String myEditValue = numberOfRooms.getText().toString();

            desiredRooms = Integer.parseInt(myEditValue);

            Spinner priceEntered = (Spinner) findViewById(R.id.priceRange);
            String myEditValue2 = priceEntered.getSelectedItem().toString();

            desiredPrice = Integer.parseInt(myEditValue2);

            double roomScoreForHouses[] = { 0, 0, 0, 0, 0 };
            double priceScoreForHouses[] = { 0, 0, 0, 0, 0 };

            for (int i = 0; i < 5; i++) 
            {
                if (desiredRooms == theAvailablePropertiesBedrooms[i]){
                    roomScoreForHouses[i] = 1.0;
                } else if (desiredRooms == theAvailablePropertiesBedrooms[i] + 1){
                    roomScoreForHouses[i] = 0.75;
                } else if (desiredRooms == theAvailablePropertiesBedrooms[i] - 1){
                    roomScoreForHouses[i] = 0.75;
                } else if (desiredRooms == theAvailablePropertiesBedrooms[i] + 2){
                    roomScoreForHouses[i] = 0.5;
                } else{
                    roomScoreForHouses[i] = 0;
                }
            }

            // Repeat this for price
            for (int i = 0; i < 5; i++) 
            {
                if (desiredPrice >= theAvailablePropertiesprice[i] - 50000 && desiredPrice <= theAvailablePropertiesprice[i] + 50000){
                    priceScoreForHouses[i] = 1.0;
                } 
                else if (desiredPrice == theAvailablePropertiesprice[i] + 1){
                    priceScoreForHouses[i] = 0.75;
                } 
                else if (desiredPrice == theAvailablePropertiesprice[i] - 1){
                    priceScoreForHouses[i] = 0.75;
                } 
                else if (desiredPrice == theAvailablePropertiesprice[i] + 2){
                    priceScoreForHouses[i] = 0.5;
                } 
                else{
                    priceScoreForHouses[i] = 0;
                }
            }

            for (int i = 0; i < 5; i++) {
                if ((roomScoreForHouses[i] + priceScoreForHouses[i]) > .75) 
                {
                    GeoPoint point = new GeoPoint((int) (LatHouses[i] * 1E6),(int) (LongHouses[i] * 1E6));
                    OverlayItem overlayitem = new OverlayItem(point,"House Information:", "Price:"+ theAvailablePropertiesprice[i]+ " Num Rooms "+ theAvailablePropertiesBedrooms[i]);
                    itemizedoverlay.addOverlay(overlayitem);
                }
                mapOverlays.add(itemizedoverlay);
            }
        }
    });     

}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

这是我的 search_options.xml 文件 -

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <!-- Choose number of rooms label -->
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold|italic"
        android:text="Choose number of bedrooms:"
        android:textSize="18sp" />

    <!-- Number of rooms text field -->
    <EditText
        android:id="@+id/numberRoomsnew"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="No. of rooms"
        android:imeActionLabel="launch"
        android:inputType="number" />

    <!-- Select price range label -->
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textStyle="bold|italic"
        android:text="Select your price range:"
        android:textSize="18sp" />

    <!-- Price range drop down menu -->
    <Spinner
        android:id="@+id/priceRange"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:prompt="@string/prompt"
        android:entries="@array/priceRange" />

    <!-- Search button -->
    <Button
        android:id="@+id/btnSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Search" />

</LinearLayout> 
```

还有我的清单——

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.cornboyz.googlemapsC"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <uses-library android:name="com.google.android.maps" />

        <!-- Launches this screen first -->
        <activity
            android:name="com.cornboyz.googlemapsC.Splash"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.cornboyz.googlemapsC.ButtonClass"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.cornboyz.googlemapsC.BUTTONCLASS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.cornboyz.googlemapsC.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.cornboyz.googlemapsC.MAINACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.cornboyz.googlemapsC.SearchOptions"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.cornboyz.googlemapsC.SEARCHOPTIONS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.cornboyz.googlemapsC.DisplaySearchOptions"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="com.cornboyz.googlemapsC.DISPLAYSEARCHOPTIONS" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.cornboyz.googlemapsC.SearchActivity"
            android:label="@string/title_activity_search" >
            <intent-filter>
                <action android:name="com.cornboyz.googlemapsC.SEARCHACTIVITY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

这是我完整的 LogCat -

```
04-23 10:54:31.648: E/AndroidRuntime(1613): FATAL EXCEPTION: main
04-23 10:54:31.648: E/AndroidRuntime(1613): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.cornboyz.googlemapsC/com.cornboyz.googlemapsC.DisplaySearchOptions}: java.lang.NullPointerException
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.os.Looper.loop(Looper.java:137)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at java.lang.reflect.Method.invokeNative(Native Method)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at java.lang.reflect.Method.invoke(Method.java:511)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at dalvik.system.NativeStart.main(Native Method)
04-23 10:54:31.648: E/AndroidRuntime(1613): Caused by: java.lang.NullPointerException
04-23 10:54:31.648: E/AndroidRuntime(1613):     at com.cornboyz.googlemapsC.DisplaySearchOptions.onCreate(DisplaySearchOptions.java:91)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.Activity.performCreate(Activity.java:5104)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-23 10:54:31.648: E/AndroidRuntime(1613):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-23 10:54:31.648: E/AndroidRuntime(1613):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:54:25.267

您的 search_options 布局似乎不包含任何 ID 为“mapView”的视图

由于您在此布局中使用 setContentView，因此 findViewById 为 R.id.mapView 返回 null

# jquery - 来自 chrome 扩展的 ajax 调用失败

> ID：16165536
> 
> 赞同：0
> 
> 时间：2013-04-23T09:18:02.133
> 
> 标签：jquery, ajax, google-chrome-extension, google-suggest

我正在尝试对生成 xml 的 googlesuggest 页面进行 ajax 调用。我使用了一个似乎可行的小技巧，并[在此处](http://blog.shreyaschand.com/2013/01/03/google-autocomplete-api/)记录了 代码是这样的：

```
$.ajax({
  url: 'https://suggestqueries.google.com/complete/search',
  data: {
    client: 'firefox',
    q: word,
  },
  dataType: 'jsonp'
})
.done(function(dataWeGotViaJsonp){
  var len = dataWeGotViaJsonp.length;
  for(var i=0;i<len;i++){
    alert(dataWeGotViaJsonp[i]);
  }
}); 
```

我的扩展程序的控制台中没有任何错误，但它不会生成任何内容。我应该如何使它正常工作或有什么问题？

从[this](https://suggestqueries.google.com/complete/search?q=ob&client=firefox) : 返回的数据如下所示：

```
["ob",["obama","obamacare","obituaries","obey","oblivion","obama phone","oberlin college","obama gun control","obagi","obsidian"]] 
```

其中“ob”是搜索词。

更新：

这是我在这篇文章中提供的第一个链接的说明之后更新的代码，用 $.getJSON 替换了 $.ajax。

```
function process(word){
  $.getJSON("https://suggestqueries.google.com/complete/search?callback=?",
    { 
      "jsonp":"suggestCallBack", // jsonp callback function name
      "q":word, // query term
      "client":"firefox" // force youtube style response, i.e. jsonp
    }
  );
  suggestCallBack= function(dataWeGotViaJsonp){
    alert("asdas");
    var len = dataWeGotViaJsonp.length;
    for(var i=0;i<len;i++){
      alert(dataWeGotViaJsonp[i]);
    }
  };
}; 
```

更新 2：

我将 client: 说明符下的关键字 'firefox' 替换为 'youtube' ，它现在返回如下内容：

```
 window.google.ac.h
    (
    ["ob",[["obama",0,[]],
    ["obamacare",0,[]],
    ["obituaries",0,[]],
    ["obey",0,[]],
    ["oblivion",0,[]],
    ["obama phone",0,[]],
    ["oberlin college",0,[]],
    ["obama gun control",0,[]],
    ["obagi",0,[]],
    ["obsidian",0,[]]],
    {"k":1,"q":"I3uqQqdI9GsurIoEbRJwRQ_P7Co"}]   
) 
```

我不知道如何实际解析。我很好奇为什么它不能在标准的谷歌搜索下工作。可以在这个[JSfiddle](http://jsfiddle.net/XxTuA/2/)上找到一个非常好的测试工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T20:17:35.483

我设法让它工作，但它的行为有点不同，比这个链接指定的有点奇怪。问题是我从 $.ajax 切换到 $.getJSON 调用，并且我使用了文档中指示的内容，即使我使用了`client: 'youtube'`说明符，实际上也得到了谷歌结果（检查）。我认为现在谷歌将其用于 youtube 和谷歌搜索，或者他们以某种方式混淆了。

```
$.getJSON("https://suggestqueries.google.com/complete/search?callback=?",
                { 
                  "jsonp":"suggestCallBack", // jsonp callback function name
                  "q":query, // query term
                  "client":"youtube" // force youtube style response, i.e. jsonp
                }
            );
    suggestCallBack = function (data) {
                var suggestions = []; //creates void array
                $.each(data[1], function(key, val) {
                    suggestions.push(val[0]); //moves every suggestion from the word into the array
                })
                suggestions.length = 1; //restricts the array to only the first element
                suggestions = []; //resets the array to void for future calls
            }; 
```

这对我来说非常有效，它应该适用于任何人。我认为它也可以与 the 一起使用，`$.ajax`但只能使用`client: 'youtube'`.

# c - 将 14 位转换为 8 位并返回

> ID：16165539
> 
> 赞同：1
> 
> 时间：2013-04-23T09:18:05.233
> 
> 标签：c, bit-manipulation

我已经编写了一些 C 代码，其中我有一个 14 位数字，我想将其转换为 2 位字节，其中两个 msb 必须为零。换句话说，16383（二进制 111111111111111）应该以 MSB = 00111111 和 LSB = 11111111 的形式出现。我使用的代码如下所示。这个对吗？

```
dataMSB = (number>>8) & 0x00FF;
dataLSB = number & 0x00FF; 
```

然后我有另一个 14 位数字作为两个 8 位字节输入，两个 lsb 需要被丢弃。在这里，我很确定我做错了，但不确定。有任何想法吗？

```
number = dataMSB << 8;
number += dataLSB; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:45:24.590

对[IDEOne](http://www.ideone.com)的简单测试表明您的代码执行正确。

```
int number = 16000;

int dataMSB = (number >> 8) & 0x00FF;
int dataLSB = number & 0x00FF;

// This prints 62 and 128, which is an expected result.
// 62  = 00111110
// 128 = 10000000
cout << dataMSB << " " << dataLSB << endl;

number = dataMSB << 8;
number += dataLSB;

// This prints 16000 as expected.
cout << number << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:02:22.853

`LSB`如果我们使用转换并`MSB`转换回来，您的代码将完美运行。

根据您的问题，我假设如果数据 MSB 和 LSB 是用户输入的值，那么您需要丢弃 2 位`dataMSB`，*而不是`dataLSB`*. 为此，您可能需要执行以下操作：

```
number = (dataMSB & 0x003F)<< 8;
number += dataLSB; 
```

`dataMSB`如果长度为 8 位，例如 255 ，它也会给你完美的结果。

我用下面的来测试。二进制反向打印：

```
#include <stdio.h>
#include <stdlib.h>

#define BIT(i) (1<<(i))

void PrintBin(const int num)
{
    int value = num;
    char bin[17]="0000000000000000";
    int i;
    for (i=0;i<16;i++)
        bin[i]= (value & BIT(i))? '1':'0';
    bin[16]='\0';
    printf("%d::%s\n",num,bin);
}

void main()
{
    int dataMSB, dataLSB;
    int number = 16383;
    int number1 =0;
    PrintBin(number);
    dataMSB = (number>>8) & 0x00FF;
    dataLSB = number & 0x00FF;
    PrintBin(dataMSB);
    PrintBin(dataLSB);
    dataMSB =255;
    number1 =(dataMSB & 0x003F) << 8;
    number1 += dataLSB;
    PrintBin(number1);
} 
```

# c - 接收UDP数据包时是否可以读取TTL IP头字段？

> ID：16165542
> 
> 赞同：4
> 
> 时间：2013-04-23T09:18:07.790
> 
> 标签：c, sockets, unix

我正在使用 UDP 套接字发送数据包，我想检查接收数据包的 IP 标头中的 TTL 字段。可能吗？

我注意到一个 IP_HDRINCL sockoption，但它似乎只适用于 RAW 套接字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-03-15T20:20:18.133

`recvmsg()`i您可以使用界面获取该信息。首先，您需要告诉系统您要访问此信息：

```
int yes = 1;
setsockopt(soc, IPPROTO_IP, IP_RECVTTL, &yes, sizeof(yes)); 
```

然后准备接收缓冲区：

```
// Note that IP packets can be fragmented and 
// thus larger than the MTU. In theory they can 
// be up to UINT16_MAX bytes long!
const size_t largestPacketExpected = 1500;
uint8_t buffer[largestPacketExpected];
struct iovec iov[1] = { { buffer, sizeof(buffer) } }; 
```

如果您还想知道数据包的来源（使用`recvfrom()`而不是时也会得到`recv()`），您还需要存储该地址：

```
// sockaddr_storage is big enough for any socket address your system
// supports, like sockaddr_in or sockaddr_in6, etc.
struct sockaddr_storage srcAddress; 
```

最后，您需要存储控制数据。每个控制数据项都有一个固定大小的标头 ( `struct cmsghdr`)，在大多数系统上大小为 12 字节，然后是有效负载数据，其大小和解释取决于控制项的类型。在您的情况下，有效负载数据只是一个字节，即 TTL 值。但是，必须考虑一些对齐要求，因此您不能只保留 13 个字节，实际上您的缓冲区在大多数系统上需要更大，这就是系统为此提供了一个方便的宏的原因：

```
uint8_t ctrlDataBuffer[CMSG_SPACE(sizeof(uint8_t))]; 
```

如果您想检索多个控制数据项，您可以像这样定义缓冲区：

```
uint8_t ctrlDataBuffer[
    CMSG_SPACE(x) 
    + CMSG_SPACE(y) 
    + CMSG_SPACE(z) 
]; 
```

`x`其中、`y`和`z`是返回的有效负载数据的大小。没有任何额外有效负载数据的普通标头的大小由返回`CMSG_SPACE(0)`，它应该等于`sizeof(struct cmsghdr)`. 但是在您的情况下，有效负载数据只是一个字节。

现在您需要将所有这些放在一起`struct msghdr`：

```
struct msghdr hdr = {
    .msg_name = &srcAddress,
    .msg_namelen = sizeof(srcAddress),
    .msg_iov = iov,
    .msg_iovlen = 1,
    .msg_control = ctrlDataBuffer,
    .msg_controllen = sizeof(ctrlDataBuffer)
}; 
```

请注意，您可以将所有不感兴趣的字段设置为`NULL`（指针）或`0`（长度）。如果您愿意，您可以仅检索源地址，也可以仅检索数据包有效负载或仅控制数据以及这三者的任意组合。

最后你可以从套接字中读取：

```
ssize_t bytesReceived = recvmsg(soc, &hdr, 0); 
```

返回值就像 for 一样`recv()`，-1 表示错误，0 表示另一端已关闭流（但这仅在 TCP 的情况下才有可能，并且您无法检索 TCP 套接字的 TTL），否则您将获得写入的字节数`buffer`.

怎么办`srcAddress`？

```
if (srcAddress.ss_family == AF_INET) {
    struct sockaddr_in * saV4 = (struct sockaddr_in *)&scrAddress;
    // ...

} else if (srcAddress.ss_family == AF_INET6) {
    struct sockaddr_in6 * saV6 = (struct sockaddr_in6 *)&scrAddress;
    // ...

} // and so on 
```

好的，但是现在控制数据呢？您需要按如下所示对其进行处理：

```
int ttl = -1;
struct cmsghdr * cmsg = CMSG_FIRSTHDR(&hdr); 
for (; cmsg; cmsg = CMSG_NXTHDR(&hdr, cmsg)) {
    if (cmsg->cmsg_level == IPPROTO_IP
        && cmsg->cmsg_type == IP_RECVTTL
    ) {
        uint8_t * ttlPtr = (uint8_t *)CMSG_DATA(cmsg);
        ttl = *ttlPtr;
        break;
    }
}
// ttl is now either the real ttl or -1 if something went wrong 
```

该`CMSG_DATA()`宏为您提供了一个正确对齐的指向实际控制数据有效负载的指针。同样，可能存在内存需求的填充，因此永远不要尝试直接访问数据。

与使用原始套接字相比，此方法的优点是：

*   此代码不需要 root 权限。
*   `sendmsg()`比原始套接字更便携。
*   该套接字是一个普通的 UDP 套接字，其行为与任何其他 UDP 套接字一样。

有关您可以通过这种方式获取哪些其他信息的更多信息，您需要查看您的操作系统的 API 文档（例如 的手册页`ip`）。例如，这是 [OpenBSD 的手册页][1] 的链接。请注意，您还可以获得有关其他“级别”（例如 SOL_SOCKET）的信息，记录在该级别的手册页上。

哦，如果您想知道，`CMSG_LEN()`它类似于`CMSG_SPACE()`但不完全相同。`CMSG_LEN(x)`返回有效载荷大小为 的控制数据实际使用的实际字节数`x`，而`CMSG_SPACE(x)`返回有效载荷大小为`x` *正确对齐下一个控制数据所需的任何填充的控制数据实际使用的字节数标头*。因此，在为多个控制数据项保留存储空间时，您始终**必须**使用`CMSG_SPACE()`! 您仅`CMSG_LEN()`用于设置`cmsg_len`字段`struct cmsghdr`以防您自己创建此类结构（例如，当使用`sendmsg()`which exists 时）。

最后一件重要的事情要知道：万一你不小心把它`ctrlDataBuffer`弄得太小了，并不是说你根本不会得到任何控制数据或遇到错误，控制数据就会被截断。这种截断由一个标志指示（的标志字段`hdr`在输入时被忽略，但它可能在输出时包含标志）：

```
// After recvmsg()...
if (hdr.msg_flags & MSG_CTRUNC) {
    // Control data buffer was too small to make all data fit!
} 
```

如果您愿意，如果您的数据缓冲区选择得太小，您可以获得相同的行为。只需查看以下代码：

```
ssize_t bytesReceived = recvmsg(soc, &hdr, MSG_TRUNC);
if (hdr.msg_flags & MSG_TRUNC) {
    // The data buffer was too small, data has been read but it
    // was truncated. bytesReceived does *NOT* contain the amount of
    // bytes read but the amount of bytes that would have been read if
    // the data buffer had been of sufficient size!
} 
```

当然，**在销毁数据包后**知道正确的大小可能并没有真正的用处。但是你可以这样做：

```
ssize_t bytesReceived = recvmsg(soc, &hdr, MSG_TRUNC | MSG_PEEK); 
```

这样，数据就位于套接字缓冲区中，因此您可以再次读取它，因为您知道了所需的缓冲区大小。但是，类似的东西不适用于控制数据。您需要提前知道正确的控制数据大小，或者您需要编写一些试错代码，例如在循环中增加控制数据缓冲区，直到`MSG_CTRUNC`不再设置。通常，一旦找到合适的大小，您就可以记住它，因为对于给定的套接字，控制数据的数量通常是恒定的，除非您进行`setsockopt()`会更改它的调用。默认情况下，UDP 套接字根本不返回控制数据，除非您有请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:03:21.437

当您使用 UDP 套接字时，所有标头都将被删除（解封装），因此您将无法获取 TTL 字段值或 IP 标头的任何其他字段，但如果您有兴趣获取或设置它，使用原始套接字并构建您的标头，通过使用原始套接字，标头将传递给您的应用程序，包括您构建的标头（IP+传输）层标头。

# html - 文本不换行到列表项中的下一行

> ID：16165555
> 
> 赞同：2
> 
> 时间：2013-04-23T09:18:53.350
> 
> 标签：html, css

快速查看主菜单下拉菜单，例如关于我们，子项没有换行到列表项的下一行，而是超出了列表项的行。我已经设置了一个自动高度。UL LI 和锚点上的宽度。我试过使用

```
white-space: pre-wrap; 
```

但这会删减部分内容。我将非常感谢将此文本放在列表项中。列表项的高度不是问题。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:30:05.563

`white-space: nowrap;`从 中删除 并将`#section-header #zone-menu ul.nice-menu-down li` 填充更改`#section-header #zone-menu ul.nice-menu a`为`padding: 1em;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:21:43.680

你试过使用`word-wrap:break-word`吗？

# python - 设置内部小部件的最大大小时，QScrollArea 消失

> ID：16165560
> 
> 赞同：1
> 
> 时间：2013-04-23T09:18:56.260
> 
> 标签：python, layout, pyqt, scrollbar, qscrollarea

当我们尝试在其中设置小部件的最大/最小尺寸时，我遇到了滚动区域消失的问题。这是正常行为吗？

有关信息，这是我的屏幕的构建方式：

```
<Splitter>
  <ScrollArea>
    <LayoutOfScroll>
      <Widget>
        <Layout>... 
```

并且布局中还有很多其他小部件，我正在尝试为其设置最大尺寸。但是当我在它们上设置最大/最小尺寸时，它们更喜欢自己堆叠......

我应该指定我已经将`widgetResizable`属性设置为`True`，如果我将它设置为`False`，滚动区域就在那里，但是我不能调整我的窗口大小，因为小部件保持相同的大小......

如何在我的子小部件上设置最大/最小尺寸并保留滚动区域。

PS：这是我在 docs 中读到的内容`QScrollArea`，但我不明白......这似乎与我的情况相对应：

> 如果滚动区域用于显示包含排列在布局中的子窗口小部件的窗口小部件的内容，重要的是要意识到布局的大小策略也将决定窗口小部件的大小。这对于了解您是否打算动态更改布局的内容特别有用。在这种情况下，将布局的大小约束属性设置为对布局的最小和/或最大大小提供约束的属性（例如，QLayout::SetMinAndMaxSize）将导致滚动区域的大小在任何时候更新布局变化。

# asp.net-mvc - 从 Context/Cookie 访问 WebAPI 中的用户数据

> ID：16165561
> 
> 赞同：5
> 
> 时间：2013-04-23T09:18:56.310
> 
> 标签：asp.net-mvc, asp.net-web-api

**更新：**

我已将代码更改为`FormsAuthentication.SetAuthCookie(_model.UserName, true);`. 我确实有 2 个 Web.config 文件，1 个用于 MVC，另一个用于 WebAPI。在 MVC 配置中，我定义了

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication> 
```

两个应用程序都在同一个域上。

* * *

**更新：**我们是否应该在 WebAPI 中使用 cookie？

* * *

目前，我有一个使用表单身份验证的 MVC 项目和一个 WebAPI 项目。问题是我无法在 WebAPI 项目中获取与请求关联的用户。我认为这是可能的，或者可能实施是错误的？

注意：我将 cookie 代码放在 WebAPI 控制器方法中作为测试，它不是应该在的地方。

**MVC - 处理登录请求，创建身份验证票。**

```
// POST: /Account/Login
[AllowAnonymous]
[HttpPost]
public ActionResult Login(LoginModel _model, string _returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(_model.UserName, _model.Password))
        {
            FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(_model.UserName, true, 15);
            string encryptedTicket = FormsAuthentication.Encrypt(ticket);
            HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);
            Response.Cookies.Add(cookie);

            // set redirect
        }
    }

    // If we got this far, something failed, redisplay form
    return View(_model);
} 
```

**WebAPI - 处理更新请求**

```
[AcceptVerbs("PUT")]
public HttpResponseMessage UpdateInfo(int _id, ExampleModel _model)
{
    try
    {
        HttpCookie authCookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null)
        {
            string encTicket = authCookie.Value;

            if (!String.IsNullOrEmpty(encTicket))
            {
                // decrypt the ticket if possible.
                FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(encTicket);

                var userData = ticket.UserData;
            }
        }

        // do update
        return Request.CreateResponse(HttpStatusCode.OK, data, GlobalConfiguration.Configuration);
    }
    catch (Exception err)
    {
        m_logger.Error(err);
        throw;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T12:41:10.950

为什么要手动创建表单身份验证票？为什么你不能这样做？

```
if (Membership.ValidateUser(_model.UserName, _model.Password))
{
    FormsAuthentication.SetAuthCookie(_model.UserName, true);

    // set redirect
} 
```

要控制超时，您可以在 web.config 中进行设置：

```
<authentication mode="Forms">
    <forms timeout="15" />
</authentication> 
```

如果这样做，则不必检查 cookie 来获取用户名。它应该自动设置在控制器的`User.Identity.Name`属性上。这适用于 MVC`Controller`和`ApiController`s。

此外，如果您的 MVC 应用程序和 WebAPI 应用程序托管在 Web 服务器的不同节点（或不同服务器）上，则 MVC 项目和 WebAPI 项目`machineKey`的 web.config 文件必须相同。它们也必须在同一个域中，但如果它们是具有不同 web.config 文件的独立应用程序，则它们必须具有相同的`machineKey`值（`decryption`、`decryptionKey`、`validation`和`validationKey`）。这些是验证、加密和解密 .ASPXAUTH cookie 所需的值。

> 我们是否应该在 WebAPI 中使用 cookie？

如果您使用上述模式，则不必手动获取任何 cookie，至少用于身份验证/授权。Cookie 与方法、标头、响应代码等一起是 HTTP 规范的一部分。WebAPI 将它们放在其中是有原因的。如果您需要它们，请使用它们。如果您不需要它们，请不要使用它们。

你应该尽量避免通过这样做来获得它们：

```
HttpCookie authCookie = HttpContext.Current.Request.Cookies["name"]; 
```

您可以像这样从 ApiController 获取 cookie：

```
IEnumerable<CookieHeaderValue> cookies = this.Request.Headers.GetCookies("name");
if (cookies.Any())
{
    IEnumerable<CookieState> cookie = cookies.First().Cookie;
    if (cookie.Any())
    {
        string value = cookie.First().Value;
    }
} 
```

**更新**

我一直使用这个生成工具：[http ://aspnetresources.com/tools/machineKey](http://aspnetresources.com/tools/machineKey)

只需单击“生成密钥”按钮，然后将生成的部分粘贴到两个 web.config 文件`<machineKey ../>`部分下的某处。`<system.web>`

**更新**

根据谁有权查看您的 web.config 文件，可能存在安全问题。如果您像这样将其签入您的源代码控制存储库，任何可以访问您的源代码的人都可以看到验证和加密密钥。

我所做的有点复杂，但它可以保证这些字符串的安全。您可以改为将`validationKey`和`encryptionKey`值存储在 中`appSettings`，然后加密`appSettings`配置文件的各个部分（使用类似[CloudConfigCrypto](https://github.com/danludwig/CloudConfigCrypto)的东西）。这意味着无法访问您的加密证书私钥的任何人都无法读取这些值。然后，您可以使用`Microsoft.Web.Administration.ServerManager`该类在运行时更改`machineKey`值，在`Application_Start`. 但是，有关此问题的更多详细信息超出了此问题的范围。

另一种选择是将它们排除在源代码控制之外，但是每次部署时都必须手动更新 web.config。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:17:43.407

[`WebSecurity`](http://msdn.microsoft.com/en-us/library/webmatrix.webdata.websecurity%28v=vs.111%29.aspx)通过使用命名空间中的类，我找到了将表单身份验证与 Web API 和 MVC 应用程序一起使用的最简单方法`WebMatrix.WebData`。它提供了对最常用操作的非常简单的访问，例如创建用户帐户、登录和注销用户、重置或更改密码。而且您不必自己处理会话 cookie。

我在与您类似的设置中使用它，我们必须对 Web API 和 MVC 应用程序使用表单身份验证。

**API 示例**

登录：

```
if(WebSecurity.Login(username, password))
{
    return Request.CreateErrorResponse(
        HttpStatusCode.Forbidden, "Invalid credentials");
}
else
{
    return Request.CreateResponse(HttpStatusCode.OK);
} 
```

登记：

```
if(WebSecurity.UserExists(username))
{
    return Request.CreateErrorResponse(
        HttpStatusCode.BadRequest, "Username already exists");
}

WebSecurity.CreateUserAndAccount(username, password, data);

HttpResponseMessage response = Request.CreateResponse(
    HttpStatusCode.Created, yourUserObject);
    response.Headers.Location = new Uri(
        Url.Link("DefaultApi",
            new { controller = "users", id = WebSecurity.GetUserId(username) }));
return response; 
```

相同的调用适用于 MVC 应用程序。

# c - c 信号量和共享内存操作计数器

> ID：16165562
> 
> 赞同：0
> 
> 时间：2013-04-23T09:19:04.427
> 
> 标签：c, shared-memory, semaphore

我正在使用信号量和共享内存。我需要创建 11 个子流程。首先，I=0 是打印 A，其他人正在打印 B。然后我需要每个进程用计数器打印消息，`*APtr`因此输出上会有数字 1-11 的行，然后是进程的含义和最后一行 *APtr 的最终值应该是 12。

现在它不工作了。进程同时写入和读取 *APtr，所以我得到第一个数字的输出，例如 1、1、1、4、5、6、7、7、8、8、11、12

```
int I, A;
int *APtr;
//create shared memory (action counter)
if((A=shmget(ftok(argv[0],getpid()), sizeof(int),  IPC_CREAT | 0660)) == -1)
{
    exit(2);
}
if((APtr=shmat(A,NULL,0)) == NULL)
{
    exit(2);
}
*APtr = 1;

/*semaphor semA*/
sem_t semA;
if(sem_init(&semA, 0, 1)==-1)
{
    exit(2);
}
/*semafor semA*/
pid_t pid;
for(int i=0; i<11; ++i)
{
    if((pid = fork()) < 0)
    {     //chyba spusteni noveho procesu
        kill(0, SIGTERM);
        exit(2);
    }
    else if(pid == 0)
    {
        I=i;
        if(I == 0)//A
        {
            sem_wait(&semA);
            //int pom = *APtr;
            fprintf(stdout, "%d: A %d:\n", *APtr, I);
            fflush(stdout);
            *APtr+=1;
            sem_post(&semA);
        }
        else//B
        {
            sem_wait(&semA);
            //int pom = *APtr;
            fprintf(stdout, "%d: B %d:\n", *APtr, I);
            fflush(stdout);
            *APtr+=1;
            sem_post(&semA);
        }
        break;
    }
    else
    {
        //fprintf(stdout, "%d\n", *APtr);
    }
}
sem_destroy(&semA);
if(pid != 0)
{
    sleep(1);
    fprintf(stdout, "%d\n", *APtr);
}
return 0; 
```

如果我理解正确，`sem_init(&semA, 0, 1);`应该初始化信号量以允许在命令完成`sem_wait(&semA);`之前只允许一个进程工作。`sem_post(&semA);`那么我在做什么/理解错误？

* * *

切换到 sem_open() 后，我返回 NULL 并且所有分叉进程在 sem_wait() 上崩溃，这是我的新代码。

```
int I, A;
int *APtr;
//create shared memory (action counter)
if((A=shmget(ftok(argv[0],getpid()), sizeof(int),  IPC_CREAT | 0660)) == -1)
{
    exit(2);
}
if((APtr=shmat(A,NULL,0)) == NULL)
{
    exit(2);
}
*APtr = 1;

/*semaphor semA*/
sem_t *semA;
if(semA = sem_open("/semA", O_CREAT, 0700, 1) == SEM_FAILED)
{
    exit(2);
}
/*semafor semA*/
pid_t pid;
for(int i=0; i<11; ++i)
{
    if((pid = fork()) < 0)
    {     //chyba spusteni noveho procesu
        kill(0, SIGTERM);
        exit(2);
    }
    else if(pid == 0)
    {
        I=i;
        if(I == 0)//A
        {
            sem_wait(semA);
            fprintf(stdout, "%d: A %d:\n", *APtr, I);
            fflush(stdout);
            *APtr+=1;
            sem_post(semA);
        }
        else//B
        {
            sem_wait(semA);
            fprintf(stdout, "%d: B %d:\n", *APtr, I);
            fflush(stdout);
            *APtr+=1;
            sem_post(semA);
        }
        break;
    }
    else
    {
        //fprintf(stdout, "%d\n", *APtr);
    }
}
if(pid != 0)
{
    sleep(1);
    sem_close(semA);
    fprintf(stdout, "%d\n", *APtr);
}
return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:24:34.383

```
sem_t semA;
if(sem_init(&semA, 0, 1)==-1) 
```

您的信号量不在共享内存中，它存在于堆栈中。

所以在你 fork() 之后，每个进程都会有它自己的这个信号量的副本。您应该将信号量放置在您创建的共享内存中的某个位置，以便所有进程都可以访问相同的信号量。

您可以使用 sem_open() 代替 sem_init() 创建一个命名信号量，该信号量在打开它的任何人之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T16:26:17.263

它缺少大括号：

```
if((semA = sem_open("/semA123", O_CREAT, 0700, 1)) == SEM_FAILED) 
```

# reporting-services - 在不选择参数的情况下加载负载报告

> ID：16165569
> 
> 赞同：0
> 
> 时间：2013-04-23T09:19:18.770
> 
> 标签：reporting-services

我有包含两个参数的 SSRS 报告。我想在页面加载时显示带有参数的一些默认值的报告。有没有办法做到这一点？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:33:09.920

创建报告时为参数设置默认值：

![在此处输入图像描述](https://i.stack.imgur.com/T99Eu.png)

您还可以在部署报表后通过报表管理器设置参数默认值：

![在此处输入图像描述](https://i.stack.imgur.com/Fsbo7.png)

# c# - 在我的 DataGridView 中过滤行？

> ID：16165572
> 
> 赞同：1
> 
> 时间：2013-04-23T09:19:27.293
> 
> 标签：c#, binding, datagridview, datatable, dataset

这并不容易，据我所知，我只能在为 DataTable（使用 DefaultView.RowFilter）或 BindingSource（使用 Filter）分配 DataSource 时过滤 DataGridView 中的行。但我的 DataGridView 数据源是这样的：

```
myDataGridView.DataSource = myDataSet;
myDataGridView.DataMember = "myTableName";
//filtering rows using myDataSet.Tables["myTableName"].RowFilter = "..." doesn't work. 
```

myDataSet 已经绑定到我的表单上的某些控件，我不想在 myDataGridView 的 DataSource 更改时重新绑定它。

我不想像这样设置我的 DataGridView 的 DataSource：

```
myDataGridView.DataSource = myDataTable;
//then use myDataTable.DefaultView.RowFilter = "...";
//or
BindingSource bs = new BindingSource(myDataSet, "myTableName");
myDataGridView.DataSource = bs;
//then use bs.Filter = "..." 
```

我只想要第一个代码中的 DataGridView 数据源，如何在该上下文中为它过滤行？请确保它有效并注意我在这里提到的内容。

您的帮助将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:58:52.070

尝试`myDataSet.Tables["myTableName"].DefaultView.RowFilter = "..."`

如果这不能让你的船浮起来，那么这来自[另一个 SO 线程](https://stackoverflow.com/questions/5843537/filtering-datagridview-without-changing-datasource)。

`(dataGridViewFields.DataSource as DataTable).DefaultView.RowFilter = string.Format("Field = '{0}'", textBoxFilter.Text);`

# android - ActionBarSherlock 操作栏在 JellyBean 上不可见

> ID：16165580
> 
> 赞同：1
> 
> 时间：2013-04-23T09:19:53.563
> 
> 标签：android, android-actionbar, actionbarsherlock, compatibility, android-actionbar-compat

我搬到了 ABS，在 Gingerbread 上很好，但在 ICS 上没有显示操作栏。这是为什么？

显现：

```
 <application
      android:name="MyApp"
      android:allowBackup="true"
      android:icon="@drawable/ic_launcher"
      android:label="@string/app_name"
      android:theme="@style/Theme.Sherlock.Light" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:09:18.447

您可能在应用程序中隐藏了标题栏。隐藏标题栏也将删除任何本机操作栏。

我会搜索（并删除）这样的东西：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

任何 XML 也是如此：

```
<item name="android:windowNoTitle">true</item> 
```

应设置为假。（在您使用的主题中应该是默认的）

# javascript - live（）点击在javscaript中无法正常工作

> ID：16165584
> 
> 赞同：1
> 
> 时间：2013-04-23T09:20:23.447
> 
> 标签：javascript, function

这是我的 final.xml 文件：-

```
<root>
    <child1 entity_id = "1" value= "Asia">
        <child2 entity_id = "2" value = "india">
            <child3 entity_id = "3" value = "Gujarat">
                <child5 entity_id = "5" value ="Rajkot"></child5>
            </child3>
            <child4 entity_id = "4" value = "Rajshthan">
                <child6 entity_id = "6" value = "Ajmer"></child6>
            </child4>
        </child2>
    </child1>
</root> 
```

这是我的 html 代码：-

```
<body>
    <div id="loader">
        <span id='update-target'>Click here to load value</span>
    </div>

    <div id="firstLevelChild"></div>

    <div id="path"><span class="tagit-new"></span></div>
</body> 
```

这是我的脚本：-

```
<script>
data = false;

$(document).ready(function() {
    $('#loader').click(function() {
        $(this).hide();
        $.ajax({
            type: "GET",
            url: "final.xml",
            dataType: "xml",
            success: function(xml) {
                data = xml;
                ul = $("<ul></ul>");
                $(xml).find('child1').each(function(){
                    var value_text = $(this).attr('value');
                    var id = $(this).attr('entity_id');
                    li = $("<li id='" + id + "'></li>");
                    li.html(value_text);
                    ul.append(li);
                    $(this).unbind('click');

                });       //close each(      
                ul.appendTo('#firstLevelChild');
            }
        }); //close $.ajax(
    }); //close click(

    $(document).on("click", "li", function(event) {
        event.stopPropagation();
        loadChild($(this).attr("id"), event);
        return false;
    });
});
$("#firstLevelChild ul li").live("click", function(){
    $("#path .tagit-new").html($(this).html());
    a = $("<a class=\"close\">x</a>\n");
    $(".tagit-new").append(a);

$(".close").click(function(){
    $(".tagit-new").html('');
});
});
function loadChild(id) {
    var obj = $("#firstLevelChild #" + id);

    if(obj.data("loaded") == null) {
        ul = "<ul>";
        var path = (id == 0) ? "root" : "[entity_id='" + id + "']";

        // Only if it contains children
        if( $(data).find(path).children().length > 0) {
            $("li").show();
        }

        $(data).find(path).children().each(function(){
            var value_text = $(this).attr('value');
            var id = $(this).attr('entity_id');
            ul += "<li id='" + id + "'>" + value_text + "</li>";
        });

        ul += "</ul>";
        obj.append(ul);
       obj.data("loaded", true);
    } else {
        $("#" + id + " ul").remove();
        obj.data("loaded", null);
    }
}
</script> 
```

这是我使用的 js 文件：-

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> 
```

在这里，我尝试从 xml 文件中获取 Region。
从 xml 文件中查找 chil1 属性值。然后设置点击它。单击它显示那里的孩子喜欢：- 单击`Asia`显示那里的孩子。明智的树，例如：-

```
Asia 
    India 
```

然后点击`India`

```
Asia 
    India
         Gujarat
         Rajshthan 
```

然后点击古吉拉特邦

```
Asia
    India
         Gujarat
                Rajkot
         Rajshthan 
```

现在我`live()`用来在现在的问题中附加点击的值`<span>`
是当我第一次点击它时，它在 span 中正确显示。
但第二次点击它们显示那里的孩子。类似这种类型的东西：-
亚洲印度古吉拉特邦拉杰科特拉杰什坦最后点击的值是拉杰科特，所以在我的跨度显示类似这种类型的东西：-
`<div id="path"><span class="tagit-new">`**拉杰科特**`</span></div>`
现在我点击那里的父然后它显示
`<div id="path"><span class="tagit-new">`**古吉拉特拉杰**`</span></div>`
科特 作为我的逻辑它唯一显示点击的文本。**Gujurat**
为什么我会遇到这个问题，请查看我的代码并帮助我解决这个问题。
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:21:34.927

`live()`自 jQuery 1.7 起已被弃用。您使用的是 1.8.3。改为使用`on`。看到[这个](http://api.jquery.com/live/)

> 根据其继承者重写 .live() 方法很简单；这些是对所有三种事件附件方法进行等效调用的模板：
> 
> ```
> $(selector).live(events, data, handler); // jQuery 1.3+
> $(document).delegate(selector, events, data, handler); // jQuery 1.4.3+
> $(document).on(events, selector, data, handler); // jQuery 1.7+ 
> ```

# php - 如何以 db 形式运行字符串中的 php 代码？

> ID：16165590
> 
> 赞同：-4
> 
> 时间：2013-04-23T09:20:40.647
> 
> 标签：php

如何以 db 形式运行字符串中的 php 代码？
我想在db中保存一些模板片段。然后使用db来要求这些片段。怎么办？
有时我将 html 代码存储在 db 中，然后在从 db 获取时轻松地回显这些片段。但有时我想让一些 php 代码存储在 db 中。所以我不需要包含静态 php，而只需要使用 db 片段。但是来自 db 的代码是 html+php ，当 php 只能将它们作为 str 回显时。

```
<?php 

    $name='linjuming';

    // get $part_code from db
    $part_code='<div class="hello"><?php echo $name ?></div>';

    // how to output:
    //<div class="hello">linjuming</div>
    echo $part_code;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:23:22.407

不确定您是否在询问如何实际使用数据库。如果你是，那么这个问题不适合堆栈溢出。也不确定是否要直接从字符串解析 PHP（这是不好的做法，因为它会打开各种安全漏洞）。你的问题让我感到困惑，因为你粘贴的代码说你试图只输出一个字符串作为 div 的一部分。

如果您的意思是您只想在 div 中输出该字符串，那么您的代码在 php 中嵌套了 php 标签……这不是 php 的工作方式。

`$part_code="<div class=\"hello\">$name</div>";`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-23T09:22:20.730

```
<?php 

    $name='linjuming';

    // get $part_code from db
    $part_code='<div class="hello">'.$name.'</div>';

    // how to output:
    //<div class="hello">linjuming</div>
    echo $part_code;

?> 
```

# c++ - WinRT 与真正的 C++ 互操作

> ID：16165596
> 
> 赞同：2
> 
> 时间：2013-04-23T09:21:09.590
> 
> 标签：c++, windows-runtime

我有这个用常规 C++ 编写的库，它期望`std::istream&`它会读取并阻塞。它在 WinRT 下编译得很好。

[`Stream`](http://msdn.microsoft.com/en-us/library/system.io.stream.aspx).NET 中的类非常相似，我认为这将是一件容易的事。使图书馆从其中之一中读取。

但是，在 WinRT 中只有一个[异步流](http://msdn.microsoft.com/sv-SE/library/windows/apps/windows.storage.streams.iinputstream?cs-save-lang=1&cs-lang=cpp)可用。将我的 Stream 对象转换为`IInputStream`. 但是我如何包装它以便能够将它传递给期望的库`std::istream&`？

```
void readFrom(std::istream& input); 
```

# unit-testing - 茉莉花单元测试未在 phantomjs 脚本中执行

> ID：16165599
> 
> 赞同：0
> 
> 时间：2013-04-23T09:21:18.600
> 
> 标签：unit-testing, jasmine, phantomjs

我编写了一个小脚本，它从磁盘加载我的 SpecRunner.html（茉莉单元测试）。尽管一切看起来都很好，但测试并未执行。这是我的代码：

```
var page = require('webpage').create()
    , file = "./SpecRunnerCoverage.html" ;

page.open(file, function (status) {
    var json = page.evaluate(function () {
        return window._yuitest_coverage;
    });

    console.log(JSON.stringify(json));
    phantom.exit();
}); 
```

它执行如下：

```
$> phantomjs myScript 
```

从代码覆盖率数据中我可以看出没有执行任何测试。无论如何我可以执行这些测试吗？

非常感谢

更新：我刚刚注意到，当我在评估函数周围包裹一个 setTimeout 并延迟整个过程时，它可以工作。有比 setTimeout 更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T20:00:00.053

jasmine 启动过程在`window.onload`被调用时开始运行测试，因此在调用幻像页面加载回调时，您的规范不一定已经完成。通过使用 a `setTimeout`，您可以在页面加载后有时间在浏览器中运行测试。仍然可能很脆弱，`setTimeout`因为随着您添加更多规范，运行完整套件所需的时间会发生变化，并且您当前的超时持续时间可能不足以让套件完成。

如果您的项目可以具有 ruby​​ 依赖项，则可以使用[jasmine ruby​​ gem](https://rubygems.org/gems/jasmine)。gem 包含一个 rake 任务`rake jasmine:ci`，它将使用您的测试启动服务器并使用 phantom 加载页面并等待所有规范完成并将失败打印到命令行。

# facebook - sdk javascript中的facebook登录状态

> ID：16165601
> 
> 赞同：0
> 
> 时间：2013-04-23T09:21:24.137
> 
> 标签：facebook, login, sdk, status

我在获取已登录用户的登录状态时遇到问题。不会调用 getLoginStatus 函数。我想获取访问令牌以获取用户数据。我尝试使用自己的 APP-ID 和游戏 APP-ID (298553513572593)。上面你可以看到我的代码：

```
<body>
    <div id="fb-root"></div>
    <script type="text/javascript">
        // Load the SDK asynchronously
        (
        function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            //js.src = "http://connect.facebook.net/de_DE/all.js";
            js.src = "http://connect.facebook.net/de_DE/all.js#xfbml=1&appId=APP_ID";
            fjs.parentNode.insertBefore(js, fjs);
        }
        (document, 'script', 'facebook-jssdk')
    );

        function login() {
            FB.login(function(response) {
                if (response.authResponse) {
                    // connected
                } else {
                    // cancelled
                }
            });
        }

        window.fbAsyncInit = function() {
            // init the FB JS SDK
            FB.init({
                appId      : 'APP_ID',                          
                status     : true,                                      
                cookie     : true,
                xfbml      : true 
            });

            // Additional initialization code such as adding Event Listeners goes here                      
            FB.getLoginStatus(function(response) {
                alert(response);
                if (response.status === 'connected') {
                    // connected
                    var uid = response.authResponse.userID;
                    var accessToken = response.authResponse.accessToken;
                } else if (response.status === 'not_authorized') {
                    // not_authorized
                    login();
                } else {
                    // not_logged_in
                    login();
                }
            });
        };
    </script>
    <div>
        <fb:login-button show-faces="true" width="200" max-rows="1"></fb:login-button>
    </div>
</body> 
```

Html-Tag 具有属性`xmlns:fb="http://ogp.me/ns/fb#"`

# html - 如何创建具有流体定位的类似表格的布局？[内图]

> ID：16165605
> 
> 赞同：0
> 
> 时间：2013-04-23T09:21:29.447
> 
> 标签：html, css, layout, positioning, fluid-layout

**这是我正在寻找的布局：**

![我正在寻找的布局](https://i.stack.imgur.com/5KHHT.png) ![展开](https://i.imgur.com/8bdiVxo.png) ![更紧](https://i.imgur.com/V1KLo0R.png)

现在，我所有的盒子都有一个右边距和下边距，我必须删除每个第三个元素的右边距，以免它溢出包装器并下降到下一行。

如果我调整包装器的大小，我必须手动校准边距以定位框，这充其量感觉很hacky。

我希望做的是有一个不比这更复杂的 HTML 标记

```
<div id="wrapper">
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
    <div class="box"></div>
</div> 
```

这产生了上面看到的布局；扩大边距，直到同一行上有另一个框的空间，如果太紧，则折叠行。有没有可能只使用CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:15:06.697

假设框之间的边距为 20px。我建议将边距设置在框的底部和左侧。设置包装器的宽度，使其适合所有框，包括它们的边距（在本例中为 360 像素宽）。然后将包装器的 margin-left 设置为 -20px。

[小提琴](http://jsfiddle.net/tYHuh/)

```
#wrapper {
    width: 360px;
    height: 220px;
    margin-left: -20px;
}

.box {
    float: left;
    height: 100px;
    width: 100px;
    margin-left: 20px;
    margin-bottom: 20px;
    background: #f00;
} 
```

# android - Android 是否有办法将应用程序的状态存储到磁盘

> ID：16165609
> 
> 赞同：0
> 
> 时间：2013-04-23T09:21:51.967
> 
> 标签：android, wakelock

我想在我的应用程序中以特定时间间隔执行唤醒锁。如果 Android 可以在唤醒锁被释放之前将我的应用程序的整个状态存储到磁盘，然后在 AlarmManager 警报或其他一些进程想要启动我的应用程序时重新加载，那就太好了。目前我将很多变量存储到磁盘并在应用程序再次重新启动时重新加载它们。如果您进入待机模式，Microsoft Windows 会执行此操作。只是想知道Android是否支持类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:50:40.967

我认为没有存储整个应用程序状态的好方法。保存应用程序的状态时，无需存储每个变量。大多数变量可能是指向运行时对象（如表面）的指针。不应该保存这些，以及任何解压缩的图像、声音等。相反，在恢复时，您应该再次从 APK 资源加载它们。如果没有程序员的工作，我认为没有有效的方法可以做到这一点。抱歉，必须有人知道加载什么应用程序。

我认为您误解了智能手机的工作方式和行为方式。或者，也许我误解了你的问题。如果您谈论的是桌面上的 MS Windows 以及它们如何休眠，那与手机的工作方式和用户使用它们的方式完全不同。在 Windows CE 上，睡眠到内存可能工作得很好，你只需存储你所做的一切并停止 CPU。在单一用途的设备上，比如导航设备，它已经足够了，而且运行良好。您通过关闭设备来关闭导航，打开电源意味着您再次开始导航。完整操作系统的恢复在这里很好。

但是智能手机不会作为整个设备进入睡眠状态。它们有很多应用。如果一个应用程序不需要做任何事情，这并不意味着整个设备都可以因此而休眠。它是电话，您必须能够接听电话。接收邮件。使用 GPS 记录您的轨迹。与休眠的窗口不同，操作系统本身必须继续运行。

因此，只需序列化您需要恢复到旧状态的最少信息。系统无法为您执行此操作，因为您一小时前创建的网络连接无效，文件可能被其他应用程序移动。如果您的活动或服务是由 AlarmManager 启动的，则您必须存储自己之前所做的事情。使用 SharedPreferences 或 Sqlite 数据库。如果您有简单的数据，请仅使用 OnSaveInstanceState 包。

你想解释你想要完成什么吗？我认为您想以错误的方式设计您的应用程序。

# machine-learning - 如何将新的 weka 分类算法添加到 weka 库

> ID：16165610
> 
> 赞同：0
> 
> 时间：2013-04-23T09:21:52.717
> 
> 标签：machine-learning, weka, decision-tree

我想使用weka的一些分类算法（如c4.5，ID3），但我不知道如何将它们添加到weka！weka上有吗？如果这些算法不可用，我该如何添加它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:42:58.460

快速的谷歌搜索将我带到了[weka.classifiers.trees](http://weka.sourceforge.net/doc/weka/classifiers/trees/package-summary.html)的包描述页面，您可以在其中看到提到的两个分类器都包含在 weka 中。

1.  [ID3 javadoc](http://weka.sourceforge.net/doc/weka/classifiers/trees/Id3.html)
2.  C4.5在weka中被命名为J48：[J48 javadoc](http://weka.sourceforge.net/doc/weka/classifiers/trees/J48.html)

希望这能回答您的问题，如果没有，请提供有关您问题的更多详细信息。

# php - Latin-1 / UTF-8 编码 php

> ID：16165611
> 
> 赞同：2
> 
> 时间：2013-04-23T09:21:52.543
> 
> 标签：php, mysql, utf-8

我有一个 UTF-8 编码的数据库，混合了 Latin-1。（我认为这就是问题所在）

这就是字符在数据库中的外观。

```
Ä° (should be İ)
è 
```

当我将标题设置为

```
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
```

然后字符出来：

```
 İ
 � 
```

当我删除标题时，它们会像在数据库中一样出现。我希望他们像这样出来：

```
 İ
 è 
```

如果可能的话，我正在寻找一种在 PHP 中解决这个问题的方法。我目前无法更正数据本身，这是正确的做法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T09:25:47.753

您的 HTML 输出需要采用单一编码，这是无法解决的。这意味着需要先将不同编码的内容转换为您的 HTML 编码。虽然这可能与`iconv`or相关`mb_convert_encoding`，但您必须解决两个问题：

1.  您需要知道（或猜测）内容的当前编码
2.  您需要在任何地方手动执行此操作

例如，理论上的解决方案是选择 UTF-8 作为您的 HTML 编码，然后对您要输出的所有字符串执行此操作：

```
$string = '...'; // from the database

// If it's not already UTF-8, convert to it
if (mb_detect_encoding($string, 'utf-8', true) === false) {
    $string = mb_convert_encoding($string, 'utf-8', 'iso-8859-1');
}

echo $string; 
```

上面的代码假定非 UTF-8 内容以 latin-1 编码，根据您的问题这是合理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:44:56.387

也许您应该选择 utf8 作为正确检索字符的连接字符集。默认值可能不适合您所需的字符。

更多细节在这里[mysql_set_charset](http://php.net/manual/en/function.mysql-set-charset.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:38:31.290

在这种情况下，您必须整理 3 件事。DB表内容的字符编码几乎无关紧要，因为在MySQL中您可以设置DB服务器与PHP脚本之间通信的字符编码。请参阅[http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html](http://dev.mysql.com/doc/refman/5.0/en/charset-connection.html) 如果您以正确的方式使用 SET NAMES / SET CHARACTER SET，则可以将通信设置为获取 UTF-8 字符.

您需要检查 PHP 脚本文件的“物理”（字节级）字符编码。在您使用的文本编辑器/IDE 中将其设置为 UTF-8。

您需要使用适当的 HTML 标头，您在上面正确地编写了它。

如果一切都正确匹配，结果应该没问题。

唯一可能的问题是，当 DB 表中的文本内容以不正确的字符编码存储时。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-22T16:29:25.020

我知道这是一篇旧帖子，但万一遇到这个问题，这是我为解决问题所做的。

1) 将表导出到 sql

2）用notepad++或其他编辑器打开sql

3）复制所有然后将其粘贴到带有BOM（或记事本并另存为unicode）的新文件中

4）我的导出文件中有这个：

```
 /*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
   /*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
   /*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
   /*!40101 SET NAMES latin1 */; 
```

我将 SET NAMES 从 latin1 更改为 utf8

```
 /*!40101 SET NAMES utf8 */; 
```

如果你没有这条线，只需简单地添加这条新线并从

```
CREATE TABLE IF NOT EXISTS `table_name` (
  // column names....
) ENGINE=MyISAM AUTO_INCREMENT=301 DEFAULT CHARSET=latin1; 
```

改变

```
DEFAULT CHARSET=latin1; 
```

至

```
DEFAULT CHARSET=utf8; 
```

删除旧表（当然是备份旧表）并导入这个新文件。

它对我有用。希望有帮助。

# extjs - 将动态数据添加到 extjs 存储

> ID：16165612
> 
> 赞同：5
> 
> 时间：2013-04-23T09:21:53.167
> 
> 标签：extjs, store

我需要通过循环将大量记录动态添加到 extjs 数据存储中。但是 store.add 通常需要很长时间。是否可以将这些数据一起添加？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-23T10:37:59.370

您可以使用商店。[loadData()](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.data.Store-method-loadData)或存储。[loadRecords()](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.data.Store-method-loadRecords)方法：

```
 var mydata = [
     [1, 'John', 'Smith'],
     [2, 'Fred', 'Jones']
 ];
store.loadData(mydata, false); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-01T13:42:51.243

在 ExtJS Store 中添加或修改大量数据时，建议您使用以下方法禁用所有事件：

```
store.suspendEvents();
for(var i=0; i<9000, i++) {
    store.add({ ... });
}
store.resumeEvents(); 
```

插入完成后，再次启用事件。这可以极大地提高你的表现。

# arrays - 使用带有深度分量的 GL_TEXTURE_2D_ARRAY 的不完整附件

> ID：16165616
> 
> 赞同：5
> 
> 时间：2013-04-23T09:22:07.833
> 
> 标签：arrays, opengl, textures, fbo, shadow-mapping

我正在尝试使用 opengl 纹理数组来存储大量阴影贴图。不幸的是，我在检查帧缓冲区时总是收到“附件不完整”错误。我尝试像在 nvidia 的级联阴影映射示例中那样设置我的纹理数组（请参阅 [NVIDIA 的级联阴影映射示例](http://developer.download.nvidia.com/SDK/10.5/opengl/samples.html)）。

所以这里有一些代码：

1.  创建纹理：

    ```
    glGenTextures(1, &shadowMapArray_);
    glBindTexture(GL_TEXTURE_2D_ARRAY, shadowMapArray_);
    //maxArrayDepth_ = GL_MAX_ARRAY_TEXTURE_LAYERS
    glTexImage3D(GL_TEXTURE_2D_ARRAY, 0, GL_DEPTH_COMPONENT, size_, size_, maxArrayDepth_, 0, GL_DEPTH_COMPONENT, GL_FLOAT, 0);
    glTexParameteri(GL_TEXTURE_2D_ARRAY, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D_ARRAY, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D_ARRAY, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D_ARRAY, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D_ARRAY, GL_TEXTURE_COMPARE_FUNC, GL_LESS);
    glBindTexture(GL_TEXTURE_2D_ARRAY, 0); 
    ```

2.  创建 FBO：

    ```
    glGenFramebuffers(1, &fbo_);
    glBindFramebuffer(GL_FRAMEBUFFER, fbo_);
    glDrawBuffer(GL_NONE);
    glBindFramebuffer(GL_FRAMEBUFFER, 0); 
    ```

3.  将阴影贴图绘制到图层中：

    ```
    glUseProgram(programID_);
    glBindFramebuffer(GL_FRAMEBUFFER, fbo_);
    glFramebufferTextureLayer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, shadowMapArray_, 0, currArraySize_);
    GLView::checkGLFramebuffer("ShadowMapGenerator::createShadowMap()"); //here i get the incomplete attachment
    [...]
    currArraySize_++; 
    ```

系统规格：

带有 Nvidia 驱动程序 304.60 和 GTX 560 Ti 的 Debian Squeeze 64 位。旧驱动程序版本是由于较新版本中的着色器编译器错误。

# vb6 - 使用 vb6 打开/复制文件

> ID：16165623
> 
> 赞同：0
> 
> 时间：2013-04-23T09:22:38.003
> 
> 标签：vb6, io

我有一个不断被进程使用（锁定）的 .txt 文件。我如何从另一个 vb6 程序中读取这个文件？我尝试先复制它然后阅读，但 FileCopy 给出：

> 运行时错误“70”权限被拒绝

打开文件也是如此`Open "file.txt" for binary as...`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:23:24.083

如果另一个进程在没有共享权限的情况下锁定了文件，这是不可能的。一种方法是使用 Shadow Copies 的低级 API。但据我所知，这些都是无证的。尽管 sysinternals 确实提供了一些示例。（没有源代码）

# apache-pig - WARN util.NativeCodeLoader: 无法为您的平台加载 native-hadoop 库

> ID：16165625
> 
> 赞同：0
> 
> 时间：2013-04-23T09:22:45.993
> 
> 标签：apache-pig

我分别使用以下 java 代码和 pig 代码运行 java 嵌入式 pig 伪模式..

版本：

Hadoop 版本 - 2.0.0-cdh4.1.2

猪版 - 0.10.0-cdh4.1.2

Java代码：

```
public class CallPig {  

    public static void main(String[] args) {
    try {       
        Properties props = new Properties();
        props.setProperty("fs.default.name", "hdfs://localhost:8020");
        props.setProperty("mapred.job.tracker", "hdfs://localhost:8021");

        Configuration conf = new Configuration();
        System.out.println(conf);
        System.out.println(conf.get("fs.default.name"));

        PigServer pig = new PigServer(ExecType.MAPREDUCE, props);       
      //  pig.debugOn();
        pig.registerScript("scripts/loadScript.pig");

        }
        catch(Exception e) {
            e.printStackTrace();
        }
     }
} 
```

猪代码：

```
register '/usr/lib/pig/piggybank.jar';

a = load 'sample.txt' using PigStorage(';') as (fname:chararray, lname:chararray);

b = foreach a generate $0;

store b into 'file'; 
```

但是我收到错误，因为 pigstats.PigStatsUtil: 0 map reduce job(s) failed！

这是我的完整堆栈跟踪...

```
13/04/23 14:36:12 WARN conf.Configuration: fs.default.name is deprecated. Instead, use fs.defaultFS

13/04/23 14:36:12 INFO executionengine.HExecutionEngine: Connecting to hadoop file system at: hdfs://localhost:8020

13/04/23 14:36:13 INFO executionengine.HExecutionEngine: Connecting to map-reduce job tracker at: hdfs://localhost:8021

13/04/23 14:36:13 WARN conf.Configuration: fs.default.name is deprecated. Instead, use fs.defaultFS

13/04/23 14:36:13 WARN conf.Configuration: dfs.df.interval is deprecated. Instead, use fs.df.interval

13/04/23 14:36:13 WARN conf.Configuration: dfs.max.objects is deprecated. Instead, use dfs.namenode.max.objects

13/04/23 14:36:13 WARN conf.Configuration: dfs.name.dir.restore is deprecated. Instead, use dfs.namenode.name.dir.restore

13/04/23 14:36:13 WARN conf.Configuration: hadoop.native.lib is deprecated. Instead, use io.native.lib.available

13/04/23 14:36:13 WARN conf.Configuration: dfs.https.client.keystore.resource is deprecated. Instead, use dfs.client.https.keystore.resource

13/04/23 14:36:13 WARN conf.Configuration: dfs.backup.address is deprecated. Instead, use dfs.namenode.backup.address

13/04/23 14:36:13 WARN conf.Configuration: dfs.backup.http.address is deprecated. Instead, use dfs.namenode.backup.http-address

13/04/23 14:36:13 WARN conf.Configuration: dfs.data.dir is deprecated. Instead, use dfs.datanode.data.dir

13/04/23 14:36:13 WARN conf.Configuration: dfs.name.dir is deprecated. Instead, use dfs.namenode.name.dir

13/04/23 14:36:13 WARN conf.Configuration: dfs.permissions is deprecated. Instead, use dfs.permissions.enabled

13/04/23 14:36:13 WARN conf.Configuration: dfs.safemode.extension is deprecated. Instead, use dfs.namenode.safemode.extension

13/04/23 14:36:13 WARN conf.Configuration: dfs.datanode.max.xcievers is deprecated. Instead, use dfs.datanode.max.transfer.threads

13/04/23 14:36:13 WARN conf.Configuration: fs.default.name is deprecated. Instead, use fs.defaultFS

13/04/23 14:36:13 WARN conf.Configuration: fs.checkpoint.dir is deprecated. Instead, use dfs.namenode.checkpoint.dir

13/04/23 14:36:13 WARN conf.Configuration: dfs.https.need.client.auth is deprecated. Instead, use dfs.client.https.need-auth

13/04/23 14:36:13 WARN conf.Configuration: dfs.block.size is deprecated. Instead, use dfs.blocksize

13/04/23 14:36:13 WARN conf.Configuration: dfs.access.time.precision is deprecated. Instead, use dfs.namenode.accesstime.precision

13/04/23 14:36:13 WARN conf.Configuration: dfs.https.address is deprecated. Instead, use dfs.namenode.https-address

13/04/23 14:36:13 WARN conf.Configuration: dfs.replication.interval is deprecated. Instead, use dfs.namenode.replication.interval

13/04/23 14:36:13 WARN conf.Configuration: fs.checkpoint.edits.dir is deprecated. Instead, use dfs.namenode.checkpoint.edits.dir
13/04/23 14:36:13 WARN conf.Configuration: dfs.replication.min is deprecated. Instead, use dfs.namenode.replication.min
13/04/23 14:36:13 WARN conf.Configuration: dfs.write.packet.size is deprecated. Instead, use dfs.client-write-packet-size
13/04/23 14:36:13 WARN conf.Configuration: dfs.name.edits.dir is deprecated. Instead, use dfs.namenode.edits.dir
13/04/23 14:36:13 WARN conf.Configuration: dfs.replication.considerLoad is deprecated. Instead, use dfs.namenode.replication.considerLoad

13/04/23 14:36:13 WARN conf.Configuration: dfs.balance.bandwidthPerSec is deprecated. Instead, use dfs.datanode.balance.bandwidthPerSec

13/04/23 14:36:13 WARN conf.Configuration: dfs.permissions.supergroup is deprecated. Instead, use dfs.permissions.superusergroup

13/04/23 14:36:13 WARN conf.Configuration: dfs.safemode.threshold.pct is deprecated. Instead, use dfs.namenode.safemode.threshold-pct

13/04/23 14:36:13 WARN conf.Configuration: topology.script.number.args is deprecated. Instead, use net.topology.script.number.args

13/04/23 14:36:13 WARN conf.Configuration: dfs.secondary.http.address is deprecated. Instead, use dfs.namenode.secondary.http-address

13/04/23 14:36:13 WARN conf.Configuration: dfs.http.address is deprecated. Instead, use dfs.namenode.http-address

13/04/23 14:36:13 WARN conf.Configuration: fs.checkpoint.period is deprecated. Instead, use dfs.namenode.checkpoint.period

13/04/23 14:36:13 WARN conf.Configuration: topology.node.switch.mapping.impl is deprecated. Instead, use net.topology.node.switch.mapping.impl

13/04/23 14:36:13 WARN conf.Configuration: io.bytes.per.checksum is deprecated. Instead, use dfs.bytes-per-checksum

13/04/23 14:36:14 INFO pigstats.ScriptState: Pig features used in the script: UNKNOWN

13/04/23 14:36:14 INFO rules.ColumnPruneVisitor: Columns pruned for a: $1

13/04/23 14:36:14 INFO mapReduceLayer.MRCompiler: File concatenation threshold: 100 optimistic? false

13/04/23 14:36:14 INFO mapReduceLayer.MultiQueryOptimizer: MR plan size before optimization: 1

13/04/23 14:36:14 INFO mapReduceLayer.MultiQueryOptimizer: MR plan size after optimization: 1

13/04/23 14:36:14 INFO pigstats.ScriptState: Pig script settings are added to the job

13/04/23 14:36:14 INFO mapReduceLayer.JobControlCompiler: mapred.job.reduce.markreset.buffer.percent is not set, set to default 0.3

13/04/23 14:36:14 INFO mapReduceLayer.JobControlCompiler: creating jar file Job9023414129086454587.jar

13/04/23 14:36:16 INFO mapReduceLayer.JobControlCompiler: jar file Job9023414129086454587.jar created

13/04/23 14:36:16 INFO mapReduceLayer.JobControlCompiler: Setting up single store job

13/04/23 14:36:16 INFO mapReduceLayer.MapReduceLauncher: 1 map-reduce job(s) waiting for submission.

13/04/23 14:36:16 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.

13/04/23 14:36:17 WARN conf.Configuration: fs.default.name is deprecated. Instead, use fs.defaultFS

13/04/23 14:36:17 WARN conf.Configuration: dfs.safemode.extension is deprecated. Instead, use dfs.namenode.safemode.extension

13/04/23 14:36:17 WARN conf.Configuration: io.bytes.per.checksum is deprecated. Instead, use dfs.bytes-per-checksum

13/04/23 14:36:17 INFO input.FileInputFormat: Total input paths to process : 1

13/04/23 14:36:17 INFO util.MapRedUtil: Total input paths to process : 1

13/04/23 14:36:17 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable

13/04/23 14:36:17 INFO util.MapRedUtil: Total input paths (combined) to process : 1

13/04/23 14:36:17 INFO mapReduceLayer.MapReduceLauncher: 0% complete

13/04/23 14:36:17 INFO mapred.JobClient: Cleaning up the staging area hdfs://localhost:8020/var/lib/hadoop-hdfs/cache/mapred/mapred/staging/hduser/.staging/job_201304231219_0009

13/04/23 14:36:17 INFO mapReduceLayer.MapReduceLauncher: 100% complete

13/04/23 14:36:17 ERROR pigstats.PigStatsUtil: 0 map reduce job(s) failed!

13/04/23 14:36:17 INFO pigstats.SimplePigStats: Script Statistics: 

HadoopVersion   PigVersion  UserId  StartedAt   FinishedAt  Features
2.0.0-cdh4.1.2  0.10.0-cdh4.1.2 hduser  2013-04-23 14:36:14 2013-04-23 14:36:17 UNKNOWN

Failed!

Failed Jobs:
JobId   Alias   Feature Message Outputs

Input(s):

Output(s):

Counters:
Total records written : 0
Total bytes written : 0
Spillable Memory Manager spill count : 0
Total bags proactively spilled: 0
Total records proactively spilled: 0

Job DAG:
null 
```

不知道我错在哪里..

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-30T07:35:47.763

通过添加 /hadoop-0.20-mapreduce/lib/native/Linux-amd64-64 作为源而不是 jar 解决了“无法加载本机 hadoop 库”的问题。

# php - 如何在codeigniter中显示来自tank_auth的用户数据？

> ID：16165627
> 
> 赞同：0
> 
> 时间：2013-04-23T09:22:51.070
> 
> 标签：php, mysql, codeigniter, authentication, tankauth

使用 Tank Auth 从我的数据库中的“用户”表中获取所有数据的正确方法是什么？

我试过了`$this->db->get('users');`

但是我如何获取特定登录用户的数据？我必须使用`$this->tank_auth->get_user_id();`吗？

这是我尝试过的：

```
function get_user_data()
{
    $id = $this->tank_auth->get_user_id();
    $this->db->where('id', $id);
    $users = $this->db->get('users');

    return $users->result();
} 
```

我希望有人可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T13:21:44.993

此代码将获取有关当前登录用户的数据。

在您的控制器中：

```
$this->load->library('tank_auth');

if (!$this->tank_auth->is_logged_in()) {
    exit('no logged user');
} else {
    $user_id = $this->tank_auth->get_user_id();
    $user_data = $this->users->get_user_by_id($user_id,1);
} 
```

# c++ - 如何使用 C++ 获取 Windows DNS 后缀搜索列表

> ID：16165629
> 
> 赞同：4
> 
> 时间：2013-04-23T09:23:01.710
> 
> 标签：c++, .net, windows

如何使用 c++ 从 ip 配置中获取 windows dns 后缀 serach 列表？（.NET <= 3.5）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T13:46:51.190

您可以从注册表中获取它们。

如果从网络控制面板设置：

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\Tcpip\Parameters\SearchList 
```

如果由组策略设置：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\DNSClient\SearchList 
```

使用[Registry 类读取](http://msdn.microsoft.com/en-gb/library/microsoft.win32.registry.getvalue.aspx)，可以使用相同的类，但是，您需要管理员权限才能这样做。

C# 使用管理和 WMI 类：

```
ManagementObjectSearcher q= new ManagementObjectSearcher("SELECT ServiceName,DNSDomainSuffixSearchOrder FROM Win32_NetworkAdapterConfiguration");// WHERE DNSDomainSuffixSearchOrder IS NOT NULL");
var qc= q.Get();

foreach (ManagementObject mo in qc)
{
    if ( mo.Properties["DNSDomainSuffixSearchOrder"] != null)
    {
        var s = mo.Properties["DNSDomainSuffixSearchOrder"];
        if (s.Value != null)
        {
            Console.WriteLine(mo["ServiceName"]);
            string[] sfxNames = s.Value as string[];
            foreach (string sx in sfxNames)
            {
                Console.WriteLine(sx);
            }
        }
    }
} 
```

# java - BigDecimal 最少 2 个小数位

> ID：16165630
> 
> 赞同：2
> 
> 时间：2013-04-23T09:23:07.583
> 
> 标签：java, currency, tostring, bigdecimal

我看到[Using BigDecimal to work with currency](https://stackoverflow.com/questions/1359817/using-bigdecimal-to-work-with-currencies)但我有一点不同的问题。

我将带有 BigDecimal 参数的对象提供给 PDF 生成库，我不能使用 Formatter，只能发送对象。默认 toString 方法是否可能总是以 *.xx wg 134.40 格式写入 BigDecimal 对象？

我使用 setScale 但它不适用于例如 134.300 因为它写入 134.3 而不是 134.30

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:28:46.613

我认为问题是您忘记了 BigDecimal 是不可变的，并且 setScale 不会改变现有的 BigDecimal

```
BigDecimal decimal = BigDecimal.valueOf(134.4);
BigDecimal decimal2 = decimal.setScale(2, RoundingMode.HALF_UP);
System.out.println(decimal2); 
```

印刷

```
134.40 
```

顺便说一句，做同样的事情`double`

```
double d = 134.4;
System.out.printf("%.2f%n", d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:27:12.743

只需使用`NumberFormat.getCurrencyInstance().format(n)`生成的字符串并将其传递给 PDF 生成库。

# c++ - 为什么 back_insert_iterator/front_insert_iterator/insert_iterator 的 value_type/difference_type/pointer/reference 都是 void？

> ID：16165635
> 
> 赞同：21
> 
> 时间：2013-04-23T09:23:15.327
> 
> 标签：c++, types, iterator, iterator-traits

在我的项目中，我想将流拆分为某种给定类型的值，因此我将模板函数实现为

```
template <typename TElem, typename TOutputIter>
TOutputIter SplitSpace(std::istream& IS, TOutputIter result)
{
    TElem elem;
    while (IS >> elem)
    {
        *result = elem;
        ++result;
    }
    return result;
} 
```

我认为这很尴尬，因为我必须`TElem`在调用它时明确给出类型。例如，我必须写：

```
std::vector<int> v;
SplitSpace<int>(std::cin, back_inserter(v));
// I want to it to be   SplitSpace(std::cin, back_inserter(v)); 
```

我试图从（模板）迭代器中获取值类型，`std::iterator_traits`并按如下方式使用：

```
template <typename TOutputIter>
TOutputIter SplitSpace(std::istream& IS, TOutputIter result)
{
    typename std::iterator_traits<TOutputIter>::value_type elem;
    while (IS >> elem)
    {
        *result = elem;
        ++result;
    }
    return result;
} 
```

但是，上述代码不适用于`back_insert_iterator`. `back_insert_iterator/front_insert_iterator/insert_iterator`我检查了命名空间中的源代码，`std`发现`value_type/difference_type/pointer/reference`都是`void`.

我想知道为什么这些类型都是`void`，有什么考虑吗？另一个问题是，是否可以在`SplitSpace`调用时不显式给出元素类型来实现该函数？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T10:05:23.427

`value_type`在 OutputIterators 的情况下没有多大意义，因为输出迭代器不能访问任何值，更重要的是它可以接受广泛的值类型。

OutputIterator 的唯一要求`it`是它必须支持表达式`*it = o` **where`o`是某个类型的值，该值位于可写入 i 的特定迭代器类型的类型**集中（第 24.2.1 节）。这意味着输出迭代器可以潜在地接受广泛的类型：例如，它可以返回一个为各种类型`operator*`重载的代理对象；在这种情况下`operator=`应该是什么？`value_type`

例如，考虑以下输出迭代器：

```
struct SwallowOutputIterator : 
    public std::iterator<output_iterator_tag, void, void, void, void>
{
    struct proxy // swallows anything
    {
        template <typename T>
        void operator=(const T &) {}
    };

    proxy operator*() 
    {
        return proxy();
    }

    // increment operators
}; 
```

这里没有明智的选择`value_type`。

相同的推理适用于`pointer`和`reference_type`。`difference_type`未定义，因为您无法计算两个输出迭代器之间的距离，因为它们是单程的。

注意：标准明确指出，`insert_iterator`它的兄弟姐妹必须继承自`iterator<output_iterator_tag, void, void, void, void>`，所以这不是你的实现的特点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:51:41.910

正如 Luc 在评论中提到的，您可以使用标准库轻松完成您想要做的事情：

```
std::vector<int> v;
std::copy( std::istream_iterator( std::cin )
         , std::istream_iterator()
         , std::back_inserter( v ) ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-23T10:17:01.630

如果您只是在寻找一种避免指定`TElem`模板参数的方法，您可以使用这种方法：

```
template <typename TOutputIter>
TOutputIter SplitSpace(std::istream& IS, TOutputIter result)
{
    typedef typename TOutputIter::container_type::value_type TElem;

    TElem elem;
    while (IS >> elem)
    {
        *result = elem;
        ++result;
    }
    return result;
} 
```

...当然，根据您假装使用的 TOutputIter 类型，您不应该使用这种方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T09:36:38.497

AFAIK, you should be able to obtain the `container_type` from the iterator, from which you should be able to obtain a `value_type`. You probably want to specialize for a `pair` at some point. This should answer part two, as for part one; not sure...

# c# - 如何在 C# 中为抽象语法树编写访问者模式？

> ID：16165640
> 
> 赞同：18
> 
> 时间：2013-04-23T09:23:21.270
> 
> 标签：c#, abstract-syntax-tree, visitor-pattern

我必须编写一个访问者模式来导航 AST。谁能告诉我更多我将如何开始写它？据我了解，AST 中的每个节点都会有 visit() 方法（？），它会以某种方式被调用（从哪里？）。我的理解到此结束。为了简化一切，假设我有节点 Root、Expression、Number、Op，树看起来像这样：

```
 Root
        |
       Op(+)
      /   \
     /     \
 Number(5)  \
             Op(*)
             /   \
            /     \
           /       \
       Number(2)   Number(444) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-08-03T19:00:20.257

模式访问者是一种设计模式，它允许您在解析树上实现任意操作（作为访问者实现）（例如类型检查），而无需修改解析树节点的实现。

它可以通过以下方式实现（我使用的是伪代码）：

首先，您需要定义所有节点都必须实现的树节点的基类。

```
abstract class VisitableNode {
   abstract void accept( Visitor v );
} 
```

节点类必须实现的唯一方法是 accept 方法。

然后，您应该定义分析树的访问者节点的基类。

```
abstract class Visitor {
   abstract void visit( Root rootNode );
   abstract void visit( Op opNode );
   abstract void visit( Number number );
} 
```

请注意，访问者的基类仅适用于您的解析树，并且应该为您在解析树中定义的每个节点类型提供一个访问方法。

然后，您应该让您的节点类实现以下列方式扩展 VisitableNode 类：

```
class Root : VisitableNode {
   [...]
   void accept( Visitor v ) {
      v.visit(this);
   }
}

class Op : VisitableNode {
   [...]
   void accept( Visitor v ) {
      v.visit(this);
   }
}

class Number : VisitableNode {
   [...]
   void accept( Visitor v ) {
      v.visit(this);
   }
} 
```

现在您拥有不应更改的解析树结构，并且您可以随意实现任意数量的访问者（操作）。

为了进行类型检查，您必须将类型与您的值一起存储在 Number 类中，或者为您支持的每种类型都有一个 Number 类：NumberFloat、NumberInteger、NumberDouble 等。

例如，假设您有一种方法可以从 Number 类中推断出值的静态类型。

我还将假设您可以通过 getChild(int childIndex) 方法访问节点的子节点。

最后，我将使用一个简单地表示您打算支持的静态类型的类 Type（如 Float、Integer 等......）。

```
class TypeCheckVisitor : Visitor {

   // Field used to save resulting type of a visit
   Type resultType;

   void visit( Root rootNode )
   {
      rootNode.getChild(0).accept( this );
   }

   void visit( Op opNode )
   {
      opNode.getChild(0).accept( this );
      Type type1 = resultType;

      opNode.getChild(1).accept( this );
      Type type2 = resultType;

      // Type check
      if( !type1.isCompatible( type2 ) ){
         // Produce type error
      }

      // Saves the return type of this OP (ex. Int + Int would return Int)
      resultType = typeTableLookup( opNode.getOperator(), type1, type2 );
   }

   void visit( Number number )
   {
      // Saves the type of this number as result
      resultType = number.getType();
   }
} 
```

然后，您可能会以类似于以下方式将 Type 类实现为枚举：

```
enum Type {
   Double,
   Float,
   Integer;

   boolean isCompatible(Type type1, Type type2){
      // Lookup some type table to determine types compatibility
   }
} 
```

最后，您只需要实现您的类型表和运算符表。

编辑：在访问递归中，使用要递归的节点的接受方法进行递归实际上是正确的。

至于用法，您可以通过以下方式对解析树的根节点进行类型检查（并同时确定表达式的类型）：

```
TypeCheckVisitor v = new TypeCheckVisitor();
rootNode.accept( v );
print( "Root type is: " + v.resultType ); 
```

您还可以以相同的方式对不同于根的解析树的任意节点进行类型检查。

# image - Magento 图像字段管理网格未保存

> ID：16165641
> 
> 赞同：2
> 
> 时间：2013-04-23T09:23:22.317
> 
> 标签：image, magento, upload, module, save

我在这里遇到问题，我认为这基本上只是因为我错过了一步。当我保存文件时，图像确实保存到指定的目录。但是，当我去编辑表单时，我上传的图像没有显示。

这是我构建的第一个网格模块，所以我有点不清楚它是如何工作的。

在 Form.php 我的图像字段如下：

```
$fieldset->addField('something_else', 'image', array(
            'name'      => 'something_else[something_else]',
            'label'     => 'Something Else',
            'title'     => 'Something Else',
            'required'  => false,
        )); 
```

我已将 enctype 设置为：'enctype' => 'multipart/form-data'

我的控制器在 if ($postData = $this->getRequest()->getPost()) 之后的保存操作中有此代码：

```
if(isset($_FILES['something_else']))
                {
                    foreach($_FILES['something_else']['name'] as $imgname => $img)
                    {
                        if($_FILES['something_else']['name'][$imgname] != '' && isset($_FILES['something_else']['name'][$imgname]))
                        {
                            $imgArray = array(
                                'name' => $_FILES['something_else']['name'][$imgname],
                                'type' => $_FILES['something_else']['type'][$imgname],
                                'tmp_name' => $_FILES['something_else']['tmp_name'][$imgname],
                                'error' => $_FILES['something_else']['error'][$imgname],
                                'size' => $_FILES['something_else']['size'][$imgname]
                            );
                            $uploader = new Varien_File_Uploader($imgArray);
                            $uploader->setAllowedExtensions(array('jpg','jpeg','png','gif'));
                            $uploader->setAllowRenameFiles(true);
                            $uploader->setFilesDispersion(false);

                            $path = Mage::getBaseDir('media') . DS . 'somethingelse' . DS;

                            $name = str_replace(' ', '_', $_FILES['something_else']['name'][$imgname]);

                            $uploader->save($path, $name);

                            $bazData[$imgname] = 'somethingelse' . DS . $uploader->getCorrectFileName($name);
                        }
                        else
                        {
                            unset($bazData[$imgname]);
                        }
                    }
                } 
```

在查看表单时，我还缺少什么将数据发送回 form.php 以显示吗？

我希望这是足够的信息，并提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T04:03:39.833

试试这个和平的代码在您的图像字段表单中使用此代码：

```
 $fieldset->addField('filename', 'file', array(
          'label'     => Mage::helper('test')->__('File'),
          'required'  => false,
          'name'      => 'filename',
      )); 
```

在控制器中的保存功能中使用此

```
if(isset($_FILES['filename']['name']) && $_FILES['filename']['name'] != '') { 
            try {   
                    /* Starting upload */   
                    $uploader = new Varien_File_Uploader('filename');

                    // Any extention would work
                    $uploader->setAllowedExtensions(array('jpg','jpeg','gif','png'));
                    $uploader->setAllowRenameFiles(false);

                    // Set the file upload mode 
                    // false -> get the file directly in the specified folder
                    // true -> get the file in the product like folders 
                    //  (file.jpg will go in something like /media/f/i/file.jpg)
                    $uploader->setFilesDispersion(false);

                    // We set media as the upload dir
                    $path = Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_MEDIA)."test/" ;
                    //echo $path, $_FILES['filename']['name'];exit;
                    $uploader->save($path, $_FILES['filename']['name'] );

                } catch (Exception $e) {

                }
          //  echo $path;exit;
                //this way the name is saved in DB

            $data['image_path'] = $path.$_FILES['filename']['name'];
        } 
```

.希望它会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:26:48.473

您必须在表单中设置字段值。喜欢：

```
$data = array('something_else' => 'image/url');
$fieldset->addField('something_else', 'image', array(
            'name'      => 'something_else',
            'label'     => 'Something Else',
            'title'     => 'Something Else',
            'required'  => false,
        )); 
$form->setValues($data); 
```

或者：

```
$fieldset->addField('something_else', 'image', array(
            'name'      => 'something_else',
            'label'     => 'Something Else',
            'title'     => 'Something Else',
            'required'  => false,
            'value'     => 'image/url',
        )); 
```

# javascript - href 到页面 + 立即通过 .js 更改类名

> ID：16165643
> 
> 赞同：0
> 
> 时间：2013-04-23T09:23:27.553
> 
> 标签：javascript, html

我有一些这样的链接页面： **test1.html**

```
<div>
<a href="test2.html">Go to TAB1</a>
<a href="test2.html">Go to TAB2</a>
</div> 
```

第二页是带有标签的页面： **test2.html**

```
<div id="tab1" class="active-content">      
     <p>Hello this is the first TAB</p>
</div>
<div id="tab2" class="content">
    <p>Hello this is the second TAB</p>
</div> 
```

我需要做的是，当我单击`Go to TAB2`href 时，切换到页面`test2.html`并更改 div 类，使它们看起来像这样：（为了在页面加载时显示第二个 TAB）。

```
<div id="tab1" class="content">      
     <p>Hello this is the first TAB</p>
</div>
<div id="tab2" class="active-content">
    <p>Hello this is the second TAB</p>
</div> 
```

我尝试使用 javascript `href="javascript:tab()"`，但我不能同时做这两件事。页面更改为`test2.html`但在页面加载之前运行代码。

```
function tab(){
    window.location.href='test2.html';
    var element = document.getElementById("tab1");
    element.className="content";
    var element = document.getElementById("tab2");
    element.className="active-content";
} 
```

我尝试使用`setTimeout`or`onload`方法但没有。我需要更改为 test2.html 并更改为第二个选项卡，只需单击一个 href，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:31:54.653

首先，您需要使用 URL 发送一些数据。这将被 test2 页面拾取，并且可以采取行动。

对另一个页面上的锚点的引用由散列定义：

```
test2.html#tab1 
```

这通常会将页面滚动到锚点，但您可以编写一个小 javascript 来解析“#”的 URL 并更改相关类：

```
var url_raw=window.location.href;

//Split the string at the #, and take the second part
var layer_to_change=url.split("#")[1];

//Set the class of the needed layer
document.getElementById(layer_to_change).className="active-content"; 
```

这将驻留在 onload 事件处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:28:02.357

添加片段：

```
<a href="test2.html#tab2">Go to TAB2</a> 
```

然后在 test2.html 上有这个 JavaScript：

```
var tabnum = location.hash.replace('#', '');
if (tabnum) {
    document.getElementById(tabnum).className = "active-content";
} 
```

# asp.net - ASP.NET MVC：测试服务器上的路由错误

> ID：16165646
> 
> 赞同：1
> 
> 时间：2013-04-23T09:23:34.640
> 
> 标签：asp.net, asp.net-mvc-3, asp.net-mvc-routing

我第一次开发 ASP.NET MVC3 网站。在我的开发机器上一切正常。

我在我们的测试机器上部署了所有东西。在一些丢失的 DLL 问题之后，该网站似乎可以在以下 url 上运行：

```
http://localhost/Test%20Website 
```

但是当我单击以下链接时（它是由内联 javascript 创建的，因为我使用的是与问题无关的 Infragistics Grid）：

```
<a href=\"/Patient/Edit/' + val + '\"><img src=\"../Resources/Edit.png\" align=\"left  \"></a> 
```

我收到 HTTP 错误 404.0 - Not Found，这是合乎逻辑的，因为物理路径是：C:\inetpub\wwwroot\Patient\Edit\537

虽然物理路径应该是： C:\inetpub\wwwroot\Test Website\Views\Patient\Edit\537 （至少......我想......不明白 MVC 路由是如何工作的）

顺便说一句，使用 ActionLink HTML 帮助程序创建的链接可以正常工作。所以这有效：@Html.ActionLink("About", "About", "Home") 这有效：@Html.Partial("Search", new SearchModel())

所以，我的问题是，你如何解决这些问题？

ps：资源中的所有图像也不起作用。*叹*

**回答后更新**

对不起，很重要的是要注意这发生在 javascript 函数中作为字符串。那是因为我正在使用 Infragistic 的 JQuery 网格中的 FormatterFunction。好的，这就是我到目前为止所得到的：

```
"function(val) {return '<a href=\"" + @Url.Content("~/Patient/Edit/" + val) + "\"><img src=\"../Resources/Edit.png\" align=\"left\"></a>'; }" 
```

当前上下文中不存在名称“val”，这是合乎逻辑的。但我不知道如何解决它，因为我对 javascript/Razor/etc 的知识有限……你能帮忙吗？在这种情况下，Val 是它所绑定的列的值。在这种情况下，患者的 ID。

**Ego4eg 询问更多代码**

它是 Infragistics JQuery 网格。这个网格有一个 FormatterFunction，它有一个字符串作为参数。此字符串需要是一个 javascript 函数。为了给你一个想法，这看起来像：

```
@(Html.Infragistics()
.Grid(Model)
.ID("grid1")
.AutoGenerateColumns(false)
.Columns(column => {
    //column.For(p => p.ID).FormatterFunction("function(val) {return '<a href=\"/Patient/Edit/' + val + '\"><img src=\"../Resources/Edit.png\" align=\"left\"></a>'; }").Width("25px").HeaderText(" ");
    column.For(p => p.ID).FormatterFunction("function(val) {return '<a href=\"" + @Url.Action("Edit", "Patient", new { id = val }) + "\"><img src=\"../Resources/Edit.png\" align=\"left\"></a>'; }").Width("25px").HeaderText(" ");
    column.For(p => p.ID).FormatterFunction("function(val) {return '<a href=\"/Home/CreateRemark/?patientID=' + val + '\"><img src=\"../Resources/add.png\" align=\"left\"></a>'; }").Width("25px").HeaderText(" ");
    column.For(p => p.FullName).DataType("string").HeaderText("Naam").Width("250px");
    column.For(p => p.Address).DataType("string").HeaderText("Adres").Width("400px");
    column.For(p => p.BSN).DataType("string").HeaderText("BSN").Width("85px");
    column.For(p => p.DateOfBirthAsString).DataType("string").HeaderText("Geboortedatum").Width("85px");
    column.For(p => p.GeneralPractitionerName).DataType("string").HeaderText("Huisarts");
}) 
```

希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:29:11.150

最好像这样使用`Url.Content`：

```
<a href=\"@Url.Content("~/Patient/Edit/" + val)\"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:32:00.100

试试这个：

```
<a href ="Url.Action("Edit", "Patient", new { id = val })" /> 
```

# c# - 禁用 DropDownList 中的值

> ID：16165647
> 
> 赞同：1
> 
> 时间：2013-04-23T09:23:38.167
> 
> 标签：c#, drop-down-menu

我有一个下拉列表，可以在其中选择人名。但是我需要禁用已使用的值，因为我想在一个事件的同一个 id 中有两个相同的值......在数据库中，我使用复合键解决了这个问题，但我需要以编程方式解决这个问题。

这是我较短的数据源：

```
<asp:SqlDataSource 
    ID="SqlDataSource1" 
    runat="server" 
    ConnectionString="<%$ ConnectionStrings:fotbalConnectionString %>"
    SelectCommand="SELECT table1.ID_person, table1.ID_event,FROM [table1] WHERE ([ID_event] = @ID_event)        
    <SelectParameters>
        <asp:QueryStringParameter 
            DefaultValue="0" 
            Name="ID_event" 
            QueryStringField="id" 
            Type="Int32" />
    </SelectParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:36:31.100

You can create a **hash** whose **keys will be the identifiers** of values you have in the dropDownList and the **values will be a boolean** which will indicate if it has been used.

You will need a method to **update** the Hash, so everytime you select some item from the DDL (dropDownList) you mark it as used or not (if it's the case). You can call this method from SelectedIndexChanged event.

Also will need a method to **list** values (key) from the Hash for your DDL where you just get unselected (value == false) items.

The property where you store data could have a getter like this:

```
private Hashtable SelectedValuesHash        
{
        get
        {
            object o = ViewState["SelectedValuesHash"];

            if (o == null)
                return new Hashtable();
            else
                return (Hashtable)o;
        }
    } 
```

The method to add values could be like this:

```
 private void AddSelectedValuesToHash(int key, bool hasBeenSelected)
    {
        var rows = ViewState["SelectedValuesHash"] as Hashtable;

        if (rows == null)
        {
            rows = new Hashtable();
            ViewState["SelectedValuesHash"] = rows;
        }
        rows.Add(key, hasBeenSelected);
    } 
```

# c - 二维数组 - C 中的无效初始化程序？

> ID：16165652
> 
> 赞同：0
> 
> 时间：2013-04-23T09:24:01.180
> 
> 标签：c, arrays, initialization, char, multidimensional-array

嘿伙计们，我正在尝试初始化 2D 字符数组，但遇到了麻烦。

```
int size = 300 * 400;
char * frame[3] = malloc(sizeof(char *)*size*3); 
```

给米：`error: invalid initializer`。所以我尝试了：

```
int size = 300 * 400;
char frame[3][size] = malloc(sizeof(char *)*size*3); 
```

但后来我明白了`error: variable-sized object may not be initialized`吗？

有什么想法可以用 3 行初始化大小为 300*400 的数组吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:27:40.623

你可以试试：

```
int size = 300 * 400;
const int rows_number = 3;
char* frame[ rows_number ]; // crate array with 3 elements, each of them `char*`
for( unsigned ii = 0; ii < rows_number; ++ii )
{
    // allocate `size` char`s for each "row"
    frame[ ii ] = malloc( sizeof(char) * size ); 
    // do not forget to free this memory later
} 
```

# java - 如何根据客户端的分辨率重新调整应用程序组件的大小？

> ID：16165656
> 
> 赞同：0
> 
> 时间：2013-04-23T09:24:05.873
> 
> 标签：java, android, gwt, resize, smartgwt

我有一个 GWT Web 应用程序，它在全窗口大小的浏览器中完美运行，但是当我重新调整窗口大小时，它看起来不太好，所有组件都不在各自的位置。

因此，每当我更改窗口大小或如果我将在选项卡或移动设备上运行应用程序时，我都想更改所有组件的大小。

有没有其他可用的方法？

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:53:23.367

您可以使用 gwt-bootstrap 之类的东西（它可以根据视口大小和用户代理更改视图）。但基本上你可以（我认为应该）在创建组件时使用 CSS 的 @media 选择器。

您可以通过 GWT 处理所有调整大小事件并手动调整每个组件的大小，但这不是一个好主意，因为您的应用程序的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:41:46.303

尝试

```
public static Window getWindow(Component c)
{
    while (c != null)
    {
        if (c instanceof Window) break;
        c = c.getParent();
    }
    return (Window)c;
}

public static int getResolution(Component c)
{
    return getWindow(c).getBounds();    
} 
```

所以应该是这样的

```
Rectangle bounds getScreenResolution(this);
Dimension resolution = new Dimension(bounds.width,bounds.height); 
```

放置在要调整大小的组件中。

然后将其与调整大小侦听器结合使用

```
getWindow(this).addComponentListener(new ComponentAdapter()
{
    public void componentResized(ComponentEvent e)
    {
       Rectangle bounds = getScreenResolution(this);
       setPrefferedSize(new Dimension(bounds.width,bounds.height));
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T10:18:16.277

您可以使用`Window.getClientHeight`and `Window.getClientWidth`- 虽然它不会返回以像素为单位的实际屏幕大小，但它会返回 GWT 应用程序可以使用的区域的大小，因此它也尊重浏览器窗口的当前大小。

您可以使用 收听浏览器窗口大小的变化`Window.addWindowResizeListener`。

也许这也解决了您的移动设备问题。如果您真的需要知道您的应用程序是否以及在哪个移动设备上运行，您最好的机会是 User-Agent 字符串，您可以使用`Window.Navigator.getUserAgent()`. 如果要使用延迟绑定，还可以创建一个新属性，如下所示：

```
<define-property name="mobile.user.agent" values="mobilesafari, none"/>
<property-provider name="mobile.user.agent"><![CDATA[
    var ua = navigator.userAgent.toLowerCase();
    if (ua.indexOf("webkit") != -1 && ua.indexOf("mobile") != -1) {
        return "mobilesafari";
    }
    // Additional checks go here
    return "none";
]]></property-provider> 
```

您还可以查看[LayoutPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.0/com/google/gwt/user/client/ui/LayoutPanel.html)，它本机支持百分比的宽度和高度。

另一种选择是使用 CSS 而不是 GWT 代码，让浏览器处理大小调整。虽然这并不总是一个可行的选择，但如果可能的话，应该选择去做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T15:58:15.520

它是纯 GWT 还是您使用 SmartGWT 组件？

如果您使用 SmartGWT，您应该能够使用[Layout](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/layout/package-summary.html)类来更好地管理组件。

[使用Canvas.setWidth(int)](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/Canvas.html#setWidth%28int%29)和[Canvas.setHeight(int)](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/Canvas.html#setHeight%28int%29)方法对组件大小进行硬编码是不明智的。

[在此示例](http://www.smartclient.com/smartgwt/showcase/#layout_user_sizing)中了解布局如何帮助动态调整组件大小。

# android - AndroidBitmap_lockPixels 总是失败

> ID：16165658
> 
> 赞同：2
> 
> 时间：2013-04-23T09:24:16.717
> 
> 标签：android, android-ndk, ffmpeg, java-native-interface

在我的`jni`模块中，我将图像复制到`bitmaps`以前从我的 java 应用程序传递的图像。

我使用`AndroidBitmap_lockPixels/AndroidBitmap_unlockPixels`. 基本上，它可以正确渲染图像，但有一些奇怪的效果：有时应用程序会卡住，或者一段时间后 `AndroidBitmap_lockPixels`总是返回 -3

`(ANDROID_BITMAP_RESULT_ALLOCATION_FAILED)`. 我想这是因为我不是从`GUI`线程更新这些位图，不是吗？

如果是这样，将这个操作“发布”到 GUI 的正确方法是什么

线？有可能`jni`吗？

谢谢。

# qt - Qt 应用程序边界

> ID：16165661
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:24:27.457
> 
> 标签：qt

我想知道 Qt 的边界是什么。例如，我知道它可以指定类型（例如`qint`or `QString`），并且我知道它无法获取系统信息，例如 CPU 使用情况或内存使用情况。

我的问题是关于 Qt 的限制。

Qt 只能与项目内部的东西交互，而不能与外部的东西交互（我的意思是与系统相关的），这是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:37:45.467

如果您正在寻找这个，您可以使用[QSysInfo](http://doc.qt.digia.com/4.7/qsysinfo.html)类获取有关操作系统的信息。这是一个例子，我相信还有其他帮助类。我认为您应该使用其他库来获取 CPU 使用率等信息，请参见[此处](http://qt-project.org/forums/viewthread/17559)以及[此问题](https://stackoverflow.com/questions/479722/how-to-get-current-cpu-and-ram-usage-in-c)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:10:30.500

QT 只不过是一个 GUI C++ 跨平台框架。它并没有真正的边界，它实现了某些跨平台功能（如小部件/框架/控制很多其他东西）。在它自己的功能中，它提供（如上所述）QSysInfo 类，但是您可以自由添加任何依赖于操作系统的（如果您将应用程序定位为特定平台）或跨平台解决方案来完成您需要的任何任务 - 硬件信息/操作系统监控/等..

# objective-c - 当我推送和弹出 UIViewControllers 时，如何防止 UINavigationBar 动画？

> ID：16165662
> 
> 赞同：1
> 
> 时间：2013-04-23T09:24:33.770
> 
> 标签：objective-c, animation, uinavigationcontroller, uinavigationbar, pushviewcontroller

我在 UINavigationController 中设置了自定义 UINavigationBar。当从 NavigationController 推送和弹出新的视图控制器时，我想防止 NavigationBar 动画。通常，UINavigationBar 在推送期间从右到左动画标题和后退按钮，在弹出期间从左到右动画。我想停止此功能，使 NavigationBar 或多或少保持静态。

我可以通过在我的自定义 UINavigationBar 中覆盖以下内容来防止弹出动画：

```
-(UINavigationItem *)popNavigationItemAnimated:(BOOL)animated{
    return [super popNavigationItemAnimated:NO];
} 
```

但是，如果我覆盖

```
- (void)pushNavigationItem:(UINavigationItem *)item animated:(BOOL)animated 
```

每当我将新的视图控制器推送到 NavigationController 上时，UINavigationBar 仍然会显示动画。

编辑：我仍然希望推送或弹出的 viewController 动画进出。只有 NavigationBar 应该停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-27T20:30:58.857

这对我有用 - 在 UINavigationBar 上覆盖此方法：

```
- (void)pushNavigationItem:(UINavigationItem *)item {
    NSMutableArray* items = [[self items] mutableCopy];
    [items addObject:item];
    self.items = items;
} 
```

# php - 如何使用来自 CArrayDataProvider 的自定义列创建 CGridView？

> ID：16165664
> 
> 赞同：0
> 
> 时间：2013-04-23T09:24:37.800
> 
> 标签：php, yii, cgridview, cactivedataprovider

我有一系列看起来像这样的模型。这些模型是基本 Yii 模型类 ( `BazClass`) 的扩展，所以这是一个自定义解决方案，但我不明白为什么它不应该工作。

```
$list = array
(
    0 => FooClass#1
    (
        [BazClass:_attributes] => array
        (
            'FOO_ATTRIBUTE' => '4567'
            'BAZ_ATTRIBUTE' => '1234'
            'NAME' => 'FOO BAR'
        )
        [BazClass:_related] => array()
        [_md] => null
        [CModel:_errors] => array()
        [CModel:_validators] => null
        [CModel:_scenario] => ''
        [CComponent:_e] => null
        [CComponent:_m] => null
    ),
) 
```

我通过这样做使它成为数据提供者：

```
$dataProvider = new CArrayDataProvider($list, array(
  'pagination'=>array(
    'pageSize'=>10,
  ),
));
$dataProvider->setData($list); 
```

并尝试像这样在视图中渲染它。基本上我只是想显示一个名称列表，列名为“名称”。

```
$this->widget('zii.widgets.grid.CGridView', array(
    'dataProvider'=>$dataProvider,
    'columns'=>array(
      array(
        'header' => 'Name',
        'value' => $data->NAME,
      ),
    ),
)); 
```

[`CGridView`文档](http://www.yiiframework.com/doc/api/1.1/CGridView)中的示例使它看起来是可能的，但我得到的错误是：

```
Either "name" or "value" must be specified for CDataColumn. 
```

好吧，显然我*确实*指定了一个值，但它似乎为空。我也尝试过`$data['NAME']`（因为我在某处读到`CArrayDataProvider`不返回模型），但它仍然评估为空。

我还检查了它`$dataProvider->getData()`返回的列表与我传递的列表相同。

是什么赋予了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-24T06:29:58.767

你应该在你的值周围加上引号，否则它会在错误的上下文中被解释

```
array( 'header' => 'Name', 'value' => '$data->NAME', ), 
```

# html - 格式化没有选择器的任何内容

> ID：16165665
> 
> 赞同：0
> 
> 时间：2013-04-23T09:24:38.903
> 
> 标签：html, selector

我有 ：

```
<h3 class="maintitle">Here Text</h3> 
```

我可以加

```
<p></p>

<h3 class="maintitle"><p>Here Text</p></h3> 
```

和格式

```
.maintitle p {padding:10px;} 
```

是否可以在不添加额外选择器的情况下做到这一点？

```
<h3 class="maintitle">Here Text</h3> 
```

和

```
.maintitle <?> {padding:10px;} 
```

我不想移动内容 .maintitle ，只想改变里面的内容而不添加选择器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:28:21.213

不确定我是否理解您想要的，但如果您只是这样做：

```
.maintitle {padding:10px;} 
```

所有具有**class="maintitle"**属性的元素都将受到您的 CSS 修改的影响：p、span、div、...

或者 ：

> h3 { 填充：10px; }

...如果您只想设置所有 h3 填充

# image-processing - 如何确定高斯滤波器的窗口大小

> ID：16165666
> 
> 赞同：7
> 
> 时间：2013-04-23T09:24:40.470
> 
> 标签：image-processing, signal-processing, matlab

高斯平滑是一种常见的图像处理功能，高斯滤波的介绍请参考[这里](http://homepages.inf.ed.ac.uk/rbf/HIPR2/gsmooth.htm)。正如我们所看到的，一个参数：标准导数将决定高斯函数的形状。但是，当我们用高斯滤波进行卷积时，还要同时确定另一个参数：高斯滤波器的窗口大小。例如，当我们使用`fspecial`MATLAB 提供的函数时，不仅要提供标准推导，还要提供窗口大小。直观地说，高斯标准推导越大，高斯核窗口应该越大。但是，关于如何设置正确的窗口大小没有一般规则。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T11:11:44.580

`size`面罩的过滤器数量驱动过滤器数量。较大的`size`，对应于较大的卷积掩码，通常会导致更大程度的过滤。作为更大程度的降噪的一种权衡，更大的过滤器也会影响图像的细节质量。

那是里程碑。现在来到`Gaussian filter`，`standard deviation`是主要参数。如果您使用 2D 过滤器，**则在蒙版边缘，您可能希望权重接近 0**。

在这方面，正如我已经说过的，您可以选择尺寸通常为***.*** `standard deviation`这样，几乎整个高斯钟都被考虑在内，并且在掩码的边缘，您的权重将渐近趋于零。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-13T22:08:24.743

[这](https://en.wikipedia.org/wiki/Gaussian_blur#Mechanics)是一个很好的参考。

1.  离散化后，距离大于 3 sigma 的像素的权重可以忽略不计。看到[这个](https://en.wikipedia.org/wiki/Standard_deviation)

2.  正如已经指出的，6sigma 意味着 3sigma 双向

3.  由于上面的第 1 点和第 2 点，用于过滤的卷积矩阵的大小会无意中变为 6sigma x 6sigma。

[在这里](https://en.wikipedia.org/wiki/Gaussian_function#Discrete_Gaussian)，您如何获得离散高斯。

最后，标准偏差的大小（以及因此使用的内核）取决于您怀疑图像中有多少噪声。显然，与较小的内核相比，较大的卷积核意味着更远的像素对中心像素的新值有贡献。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-19T20:29:15.333

给定 sigma 和滤波器中的最小权重 epsilon，您可以求解滤波器 x 的必要半径：

[![在此处输入图像描述](https://i.stack.imgur.com/svfgY.png)](https://i.stack.imgur.com/svfgY.png)

例如，如果 sigma = 1，则当 x <= 2.715 时，高斯大于 epsilon = 0.01，因此滤波器半径 = 3（宽度 = 2*3 + 1 = 7）就足够了。

*   sigma = 0.5，x <= 1.48，使用半径 2
*   sigma = 1，x <= 2.715，使用半径 3
*   sigma = 1.5，x <= 3.84，使用半径 4
*   sigma = 2, x <= 4.89, 使用半径 5
*   sigma = 2.5，x <= 5.88，使用半径 6

如果您减少/增加 epsilon，那么您将需要更大/更小的半径。

# c - 在 Linux 中更改进程名称而不更改 argv[0]

> ID：16165667
> 
> 赞同：8
> 
> 时间：2013-04-23T09:24:40.620
> 
> 标签：c, linux, process, rename, argv

我需要用 C 语言修改我的程序的进程名称。
我准确地说，这不是我想要更改的线程的名称。
我想更改程序的名称，但我找到的唯一解决方案是修改`argv[0]`.
我还找到了另一个解决方案`prctl(PR_SET_NAME, "newname")`，但是这个解决方案不起作用。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-15T03:53:06.330

`prctl`调用和修改的区别在于`argv[0]`：

*   修改`argv[0]`更改信息`/proc/$pid/cmdline`
*   调用`prctl(PR_SET_NAME)`更改信息`/proc/$pid/status`

这意味着您将获得您的进程发出的不同名称`ps -a`和`ps -ax`.

如果您在执行 ps 时希望不同的参数具有相同的进程名称，您可以同时执行它们（即，更改`argv[0]`和调用`prctl`）。

希望答案有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-05T11:29:04.000

# android - textview 在 android html.fromHtml 中是可点击的

> ID：16165670
> 
> 赞同：0
> 
> 时间：2013-04-23T09:24:51.033
> 
> 标签：android, textview

我必须开发一个 android 示例。

在这里，我必须传递 html 字符串值并在 textview 上设置值。

我使用了以下代码：

```
<TextView
        android:id="@+id/title1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:text="Title"

        android:layout_below="@+id/youtube_view"

       /> 
```

在安卓代码中：

```
 String fullcontent = in.getStringExtra("FullContent");
       full_content = fullcontent.substring(1);

       lblContent = (TextView) findViewById(R.id.title1);

    lblContent.setText(Html.fromHtml(full_content),TextView.BufferType.SPANNABLE);

    lblContent.setMovementMethod(LinkMovementMethod.getInstance()); 
```

在这里我必须运行应用程序，这意味着 textview 是可点击的......我怎样才能禁用 textview 可点击......

# android - ImageView 无法加载图片(jpg,png,...)

> ID：16165671
> 
> 赞同：0
> 
> 时间：2013-04-23T09:24:52.027
> 
> 标签：android, image, bitmap, imageview

我正在尝试从我的 res/drawable 文件夹中加载图像。我使用了 Android Developers [Link](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)中的指南。出于某种原因，它不起作用。我得到的唯一错误是“SPAN_EXCLUSIVE_EXCLUSIVE 跨度不能有零长度”，我对此进行了研究。显然它与自定义键盘有关，但我根本没有使用文本输入。应用程序本身不是崩溃。我希望你们能帮助我:) 布局文件只包含一个带有 ImageView 的 RelativeLayout。

```
public class PixelActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pixel);
    String uri = "@drawable-hdpi/testbild.png";
    final int imageResource = getResources().getIdentifier(uri, null, getPackageName());

    final ImageView iv = (ImageView) findViewById(R.id.imageview1);

    //int imageHeight = options.outHeight;
    //int imageWidth = options.outWidth;
    //String imageType = options.outMimeType;
    new Thread(new Runnable()
    {

        public void run()
        {
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inJustDecodeBounds = true;
            BitmapFactory.decodeResource(getResources(), imageResource, options);

            iv.post(new Runnable()
            {

                public void run()
                {
                    iv.setImageBitmap(decodeSampledBitmapFromResources(getResources(),imageResource,iv.getWidth(),iv.getHeight()));
                    //iv.setImageResource(R.drawable.testbild);
                }
            });
        }
    });

}

public static int calculateInSampleSize(BitmapFactory.Options options,int reqWidth, int reqHeight)
{
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if(height > reqHeight || width > reqWidth)
    {
        final int heightRatio = Math.round((float)height/(float)reqHeight);
        final int widthRatio = Math.round((float)width/(float)reqWidth);

        inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    return inSampleSize;
}

public static Bitmap decodeSampledBitmapFromResources(Resources res, int resId, int reqWidth, int reqHeight)
{
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    options.inSampleSize = calculateInSampleSize(options,reqWidth,reqHeight);
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeResource(res, resId, options);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:32:59.267

```
String uri = "@drawable-hdpi/testbild.png"; 
```

那是无效的。删除`-hdpi`部分和`.png`部分，然后重试。或者，切换到提供所有三个参数`getIdentifier()`：

```
final int imageResource = getResources().getIdentifier("testbild", "drawable", getPackageName()); 
```

# c - getchar() 和 putchar() 是函数还是宏？

> ID：16165672
> 
> 赞同：3
> 
> 时间：2013-04-23T09:24:59.747
> 
> 标签：c, macros, getchar, putchar

我参考了两个可靠的信息来源，两者似乎对同一事物有不同的定义：

[http://www.cplusplus.com/reference/clibr%E2%80%A6](http://www.cplusplus.com/reference/clibr%E2%80%A6)

[http://www.ocf.berkeley.edu/~pad/tigcc/doc/html/stdio_fputchar.html](http://www.ocf.berkeley.edu/~pad/tigcc/doc/html/stdio_fputchar.html)

第一个来源说`putchar()`是一个函数，`getchar()`但在第二个链接中它说`putchar()`是一个宏。我的书说`getchar()`是一个宏。哪个是对的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:35:25.737

`getchar`和`putchar`是函数，但可以另外定义为宏。它们是否存在取决于实现。C 标准说关于标准库函数（C99，7.1.4@1）：

> 头文件中声明的任何函数都可以另外实现为头文件中定义的类函数宏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:31:44.747

有关信息，在我的 mac 'man getchar' 上给出了这个：

```
 The fgetc() function obtains the next input character (if present) from the stream pointed at by stream, or the
 next character pushed back on the stream via ungetc(3).

 The getc() function acts essentially identically to fgetc(), but is a macro that expands in-line.

 The getchar() function is equivalent to getc(stdin). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:33:59.183

这完全取决于它在编译器中的实现方式。

# c# - 从 aspx 页面下载 Word 可编辑文档

> ID：16165675
> 
> 赞同：0
> 
> 时间：2013-04-23T09:25:09.437
> 
> 标签：c#, asp.net, ms-word

我目前有一个 aspx 页面返回一个 html 表单（带有图像和 css）。我想在不重写所有代码的情况下下载此表单的 Word 可编辑版本。可能吗 ？

一个例子：我有一个页面'WebForm2.aspx'，其中包含这样的简单内容。

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm2.aspx.cs" 
Inherits="WebApplication15.WebForm2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <h1>Title</h1>
        <asp:CheckBox runat="server" ID="myTest" Text="Doc 1" /><br />
        <asp:CheckBox runat="server" ID="myTest2" Text="Doc 2" /><br />
        <asp:CheckBox runat="server" ID="myTest3" Text="Doc 3" /><br />
        <asp:CheckBox runat="server" ID="myTest4" Text="Doc 4" /><br />
    </div>
    </form>
</body>
</html> 
```

我希望从其他页面获得该按钮，例如一个按钮，可让您在可编辑的 Word 文档中下载“WebForm2.aspx”的内容。

我在 Page_PreRender 方法中添加了这个

```
Response.AddHeader("Content-Type", "application/msword"); 
```

这是部分工作。如果我保存文档 css 并且未加载图像，但如果我只打开可下载的内容 css 并加载图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:04:32.673

MS Word 可以编辑 html 文档，因此通过在标题中添加 Content-Type=application/msword 记录将使浏览器在浏览器中打开您的页面，不幸的是没有 css 和图像。

在页面的预渲染事件中添加以下代码

```
 Response.AddHeader("Content-Type", "application/msword"); 
```

# javascript - datetimepicker 的验证消息无法正常工作？

> ID：16165681
> 
> 赞同：3
> 
> 时间：2013-04-23T09:25:36.770
> 
> 标签：javascript, jquery, kendo-ui

这里的问题是验证 datetimepicker 并在页面加载后重置值。

在页面加载验证工作正常但 datetimepickers 值未重置。

页面加载后，两个问题的值都没有重置，验证也不起作用。

这是小提琴：http: [//jsfiddle.net/XHW3w/6/](http://jsfiddle.net/XHW3w/6/)

```
enter code here:$("#filter-msg").kendoWindow({
  modal: true,
  visible: false
    });
 $("#reset").click(function () {
 $("#datetimepicker1").val('');
 $("#datetimepicker2").val('');
 });

$("#datetimepicker1").kendoDatePicker({});
 $("#datetimepicker2").kendoDatePicker({}); 
```

以上是我的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:56:26.130

在过滤器函数中，`mindate`和的值`maxdate`返回为`null`。这是因为`.data()`没有存储来自日期选择器的更新值。

我已更新您的代码以使用日期选择器的值，如小提琴所示。

[http://jsfiddle.net/XHW3w/9/](http://jsfiddle.net/XHW3w/9/)

```
$("#filter").on("click", function () {
   var mindate = $('#datetimepicker1').val();  // uses the val method
   var maxdate = $('#datetimepicker2').val();  // uses the val method

   var product = $("#products").data("kendoDropDownList").value();
   var order = $("#orders").data("kendoDropDownList").value();

    if (!mindate || !maxdate || !product || !order) {
      var content = "";
       if (!mindate) 
        content += "<div class=\"k-error-colored\">mindate is not defined!</div>";
       if (!maxdate) 
        content += "<div class=\"k-error-colored\">maxdate is not defined!</div>";
       if (!product) 
        content += "<div class=\"k-error-colored\">product is not defined!</div>";
       if (!order) 
        content += "<div class=\"k-error-colored\">order is not defined!</div>";

    $("#filter-msg").data("kendoWindow")
        .content(content)
        .center()
        .open();
    return false;
    }
}); 
```

# jquery - jQuery 和 SVG 在 Chrome 中具有自定义属性

> ID：16165682
> 
> 赞同：1
> 
> 时间：2013-04-23T09:25:37.627
> 
> 标签：jquery, google-chrome, svg

我的网页上有一些我想用 jQuery 访问的 SVG 元素。SVG 元素附加了几个自定义数据属性，我想在 jQuery 选择器中使用它来获取正确的元素。我的问题是自定义属性选择器在 Chrome 中不起作用，而在 IE9 和 Firefox 中起作用。下面是一个 SVG 元素的示例：

```
<rect width="75" data-myAttribute="someValue"></rect> 
```

这是我用来获取具有自定义属性集的所有元素的 javascript：

```
$('rect[data-myAttribute]'); 
```

因此，该语句在 Chrome 中返回 0 个元素，而在 Firefox 和 IE 中返回所有 X 元素。然而，在选择器中使用“标准”属性似乎适用于所有浏览器。例如，此语句将在所有浏览器中正确返回所有元素：

```
$('rect[width]'); 
```

有人可以解释为什么会发生这种情况，以及我可以做些什么来在 jQuery 选择器中的 SVG 元素上使用自定义属性？我使用自定义数据属性，因为 SVG 元素没有我可以使用的 ID 或类。

注意：这种特定情况下的 SVG 元素是由 HighCharts javascript 库创建的，但我想这不重要。我使用 jQuery 版本 1.8.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:27:34.977

> 数据属性名称必须至少有一个字符长，并且必须以“data-”为前缀。它不应包含任何大写字母。

尝试这个 -

```
<rect id='r' width="75" data-value="someValue">d</rect> 

$('rect[data-value]');   // select element with data-value attribute

$('rect').data('value'); // read attribute value 
```

[jsFiddle 工作演示](http://jsfiddle.net/mohammadAdil/RFtgD/)

# javascript - 单击时如何删除div上的选定图像？

> ID：16165689
> 
> 赞同：0
> 
> 时间：2013-04-23T09:25:55.673
> 
> 标签：javascript, jquery

我对 Javascript 相当陌生，想创建一个 div，它允许人们通过单击 div 内的区域来定义其上的点。将添加一个图像来表示单击的点。此后，如果该人想要删除该点，则在单击图像时，应将其删除。

我已经完成了允许人们根据对现有小提琴的微小修改来定义点的部分：http: [//jsfiddle.net/uKkRh/1/](http://jsfiddle.net/uKkRh/1/) 参考：[jquery 如何将引脚添加到图像并将位置保存到SQL](https://stackoverflow.com/questions/9616035/jquery-how-to-add-pin-to-image-and-save-the-position-to-sql)

我还设法通过单击按钮删除所有图像。

但是，当人们单击图像时，我仍然不知道如何从 div 中删除图像。

我尝试了以下方法：

```
$('#container >img').click(function() {

   var selectedImg = $(this);
   selectedImg.remove();
   return;
 }); 
```

但它会间歇性地工作。

请参阅我的 JSfiddle 以获取我的示例。[http://jsfiddle.net/WindSaviour/rUNsJ/19/](http://jsfiddle.net/WindSaviour/rUNsJ/19/)

```
var point = [];
var id = 0;
$(document).ready(function() {
    var output = $('#container');

    $("#container").click(function(e) {
        e.preventDefault();
        var isPointPresent = false;
        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop;
        console.log("Mouse Click Pos (x=" + x + ", y=" + y + ")");

        for(var i=0; i< point.length; i++)  {

            if(x >= point[i].min_x && x<=point[i].max_x) {
                if(y >= point[i].min_y && y<=point[i].max_y) {
                    isPointPresent = true;
                    point.splice(i,1);
                    break;
                }
            }
        }
        point[point.length] = { "x-pos":  x, "y-pos":y, "min_x": x-25, "max_x": x+25, "min_y": y-83, "max_y": y};

        if(isPointPresent) {
            $('#container >img').click(function() {

                var selectedImg = $(this);
                selectedImg.remove();
                return;
            });
        }

        var img = $('<img>');
        var left = x-25;
        var top = y-83;
        console.log("Img Start Pos (x=" + left + ", y=" + top + ")");
        img.css('top', top);
        img.css('left', left);
        img.attr('src', 'http://www.clker.com/cliparts/P/w/G/0/N/o/google-map-th.png');

        img.attr('id', id);
        img.appendTo('#container');
        /*
        */
        id++;
    })

});

$('#remove').click(function() {
   $('#container > img').remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:40:40.160

试试这个[http://jsfiddle.net/uKkRh/635/](http://jsfiddle.net/uKkRh/635/)，但你需要更新版本的 jQuery

```
$('#container').on('click', 'img', function (e) {
    e.stopPropagation();
    $(this).remove();
}); 
```

# sql - SQL 结果作为网格/单行结果集输出到多行

> ID：16165690
> 
> 赞同：0
> 
> 时间：2013-04-23T09:26:00.197
> 
> 标签：sql, sql-server-2008, resultset

是否可以将结果集输出为网格？例如，我使用 sql 输出以下结果集：

```
col1    col2    col3    col4    col5    col6    col7    col8    col9
10      23      54      12      23      45      56      24      2 
```

但不是输出形成一长行，而是有一个函数我可以用来让它输出为：

```
col1    col2    col3
10      23      54
12      23      45
56      24      2 
```

所以我基本上每三列打破结果行。

此外，输出将是对连接的 sql 表中的数据执行的各种计算的组合，以防万一这会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:39:04.723

如果您不介意手动定义要拆分的列，并且格式将保持固定，您可以使用它`CROSS APPLY ... VALUES`来取消透视数据。例如

```
SELECT  c.Col1, c.Col2, c.Col3
FROM    T
        CROSS APPLY
        (   VALUES
                (Col1, Col2, Col3),
                (Col4, Col5, Col6),
                (Col7, Col8, Col9)
        ) c (Col1, Col2, Col3); 
```

**[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/41edc/1)**

# php - 使用 PHP 构建定价逻辑

> ID：16165693
> 
> 赞同：0
> 
> 时间：2013-04-23T09:26:06.257
> 
> 标签：php, logic

希望你们都度过了充满彩虹和玫瑰的美好一天！

好的，好的..我会直截了当：

我有一个接受多个参数并根据这些参数计算产品价格的函数。这是一个概念性示例：

```
public function getPrice( $params ) {
    // black magic goes here
    return $price;
} 
```

参数包括：

1.  `$params[width]`范围从 10 到 72 英寸
2.  `$params[height]`范围从 10 - 44 英寸

（实际上还有更多参数，但为了简单起见，我将它们保留了出来）。

现在，我在 Excel 中有一个表（类似于真值表），其中的行代表`width`，列代表`height`. 对应单元格中的值为`price`.

我怎样才能最好地在 PHP 中实施这种定价策略？我认为嵌套`if`语句会起作用，但在 10th 之后就累了`if`。帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:27:57.077

您可以将 Excel 中的信息存储在二维数组中。

IE

```
$prices = array(  // Columns --
                  array(1,2,3), // Rows 
                  array(4,5,6), //  |
                  array(7,8,9)  //  |
               ); 
```

然后您可以通过执行以下操作根据宽度/高度查找您的价格：

`return $prices[row][column];`

在您的情况下，行将是宽度，列将是高度。

由于范围从 10 开始，因此需要一些额外的工作，因此您需要从输入的值中减去 10。

IE：

`return $prices[width-10][height-10];`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:32:17.737

你为什么不把所有的数据都放到你的数据库中呢？有一行包含每个参数的所有值，以及相应的价格？只需 1 个查询...

# java - 在服务器级别与应用程序级别配置日志记录的优缺点

> ID：16165694
> 
> 赞同：0
> 
> 时间：2013-04-23T09:26:07.160
> 
> 标签：java, logging

在 java 中配置日志记录有时会很棘手（由于现有的多个日志记录 API），并且可以在不同级别（服务器、应用程序，两者？）完成。那么在这些级别配置日志记录的优缺点是什么？

我带着这份清单来了，但我希望其他人分享他们的经验：

*   服务器级
    *   优点
        *   集中配置
        *   部署前不得修改应用程序
        *   可以登录到由服务器管理的资源（相对于服务器路径的文件，DB...）
    *   缺点
        *   必须确保每个应用程序使用相同的日志记录 API
        *   随着部署更多应用程序，配置会变得越来越大
        *   服务器可能对每个应用程序的类别 => 日志级别映射了解太多
*   应用级
    *   优点
        *   应用程序可以使用其选择的日志记录 API
        *   应用程序可以配置自己的日志记录级别
    *   缺点
        *   必须在部署之前编辑配置，以指定日志文件的路径（如果相对于服务器）或日志数据库的 JNDI 名称

有没有办法将两者结合起来只保留专业人士？就像在服务器级别配置记录器，然后在应用程序级别配置类别=> 日志级别映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:45:10.563

> 有没有办法将两者结合起来只保留专业人士？就像在服务器级别配置记录器，然后在应用程序级别配置类别=> 日志级别映射？

*   要回答这个问题，我会说，是的，我们可以做到。但在这种情况下，您的服务器和应用程序必须遵循正确的设计，不利的一面是，所有应用程序都可能变得紧密耦合。

如果您的应用程序是基于 Java 的，那么您实际上可以为所有应用程序创建一个记录器文件，并且您必须在其中设置应用程序记录器级别，前提是您的应用程序遵循不同的包结构。

假设 app1 遵循包结构 com.app1。*.* 和 app2 跟随 com.app2。*.* ，然后您可以修改记录器级别，如下所示，

```
*.*.com.app1 = logger_level1
*.*.com.app2 = logger_level2 
```

但是如果你的 app2 依赖于 app1，或者它有像 com.app1.app2.* 这样的包或一些常见的包名，那么你可能在 logger 属性上定义了更多，所以包结构和设计对于遵循单一的日志记录机制。

# php - 如果日期小于今天不显示

> ID：16165701
> 
> 赞同：-2
> 
> 时间：2013-04-23T09:26:22.453
> 
> 标签：php, mysql, phpmyadmin

我正在通过 php 在 mysql 数据库中搜索数据

```
id   name   empcode        doj     date of retirement
1     xyz     123456   12/02/1955    12/02/1985      //its an example purpose only
2     abc     254525   05/02/1955    12/02/1989
3     def     055455   10/02/1945    12/02/1552
4     ijk     875545   12/02/1955    12/02/1962 
```

当我用姓名搜索时，它应该检查姓名以及员工是否在当前日期退休。显示没有具有此结果的员工。

```
$raw_results = mysql_query("SELECT * FROM newdb
            WHERE (`EMPCODE` LIKE '%".$query."%') OR (`NAME` LIKE '%".$query."%')") or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:33:34.103

我认为最好将数据库中的日期存储为 int(11) 并以 unix 时间戳格式存储日期。然后您可以轻松地操纵日期。

# security - 如何在数据库上安全地存储用户名/密码（哈希不会做）

> ID：16165702
> 
> 赞同：1
> 
> 时间：2013-04-23T09:26:23.740
> 
> 标签：security, postgresql, grails, passwords, grails-plugin

想象一下这种情况：您的用户向您提供他们的凭据（用户名/密码）以访问第三方服务。因此，您必须在连接到服务时生成这些凭据，而不能只存储加盐哈希。

环境是 Grails，以 psql 作为 DB。从程序员的角度来看，理想情况下，用户/密码仍然是域对象的一部分（因此它们易于使用）。

安全存储它们的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:34:12.103

*（我*不是*安全或加密专家；这是我根据阅读和研究得出的理解，但与权威建议相去甚远。请咨询网络应用安全专家的建议并进行适当的安全审核。）*

您真正能做的最好的事情是让您的应用程序在用户未主动登录时无法解密它们。

使用部分基于用户的原始未散列密码的密钥加密凭据。当然，您*永远不会*存储用户密码以在您的系统上登录您的服务，因此您只能在身份验证期间访问它的一小段时间（而且只有在那时，因为网络还没有赶上 90 年代中期并采用理智的质询-响应身份验证方案）。您可以在用户登录时解密保存的第三方服务凭据，并将它们存储在用户的易失性服务器端会话中。

对于加密密钥，您可以使用您为每个（用户、3rd-party-credential）对随机生成的大盐值对用户名和用户原始密码进行哈希处理，并与加密的凭据一起存储。盐应该不同于用于存储散列密码的盐。

这远非理想，并且存在各种问题 - 但是在用户的会话到期或他们记录我们并且您清除他们的会话后，将无法访问凭据。

这也意味着您的应用程序在他们未主动登录时无法代表他们采取行动，根据您的要求，这一限制可能会成为您的障碍。

较弱的选项是为所有用户凭据设置一个密钥，该密钥由系统管理员在重新启动应用程序时手动输入。该密钥必须存储在内存中，但它至少不位于磁盘或数据库中，因此窃取您数据库转储的人将难以解密存储的凭据。

如果攻击者找到一种方法来欺骗您的应用程序在解密后泄露这些域对象，或者让它让他们冒充该用户，让它代表另一个用户在 3rd 方服务上执行操作等，这两个选项都不会帮助您. 不过，它至少可以防止数据库转储和类似攻击被盗。

`pgcrypto`进一步的建议：与其在数据库中使用加密，不如在应用程序端进行。这意味着数据库永远不会看到解密数据所需的密钥材料；它永远不会泄露到数据库日志中、被嗅出`pg_stat_activity`等。

# c# - 将字符串转换为 12 小时格式的日期时间格式

> ID：16165703
> 
> 赞同：2
> 
> 时间：2013-04-23T09:26:29.823
> 
> 标签：c#, asp.net, datetime

我在 SQL Server 数据库中有一个字段类型 DateTime。我正在开发一个网络服务来获取日期和时间。

日期以这种格式 4/14/2013 10:10:01 PM 存储在数据库中。

现在，我有一个如下的网络方法：

```
public string GetdataJson(string lastdate)
        {

            DateTime myDateTime = DateTime.Parse(lastdate);

            string getvalue = "select * from tblfameface where last_updated >='" + myDateTime  + "'";

            con1 = new SqlConnection(conString1);
            con1.Open();
            SqlCommand cmd = new SqlCommand(getvalue, con1);
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            DataTable dt1 = new DataTable();
            da.Fill(dt1);

            string jsonString = JsonConvert.SerializeObject(dt1);
            String finalString = "{\"Records\":";
            finalString += jsonString;
            finalString += "}";
            return finalString;

        } 
```

但是这段代码给了我一个错误，字符串未被识别为有效的日期时间。如何将字符串转换为日期时间格式，如 4/14/2013 10:10:01 PM？帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T09:30:52.997

您想要 12 小时制使用小 hh ，您想要 24 小时制使用大写 HH

```
DateTime formatted =Covert.ToDateTime( lastdate.ToString("dd/MM/yyyy hh:mm:ss.fff",
                                      CultureInfo.InvariantCulture)); 
```

如果要使用 12 小时制，请在格式字符串中使用 tt 来生成 AM/PM 指示符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:27:58.063

在您的格式字符串`tt`中用于**PM/AM**部分。这是代码：

```
 DateTime dateTime = 
    DateTime.ParseExact("4/14/2013 10:10:01 PM", 
                        "M/dd/yyyy hh:mm:ss tt",
                        System.Globalization.CultureInfo.InvariantCulture); 
```

这也应该有效：

```
DateTime result = DateTime.Parse("04/14/2013 10:10:01 PM"); 
```

你确定你得到了正确的字符串吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:45:49.210

尝试这个：

```
string getvalue = "select * from tblfameface where
     last_updated >= Convert(DateTime, '" + myDateTime  + "')"; 
```

或者这取决于你在 last_updated 列上的 SQL 数据类型

```
string getvalue = "select * from tblfameface where
     last_updated >= Convert(DateTime2(7), '" + myDateTime  + "')"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:36:44.580

将查询行替换为

```
string getvalue = "select * from tblfameface where CAST(last_updated AS 
DATETIME)>='" + myDateTime.ToString("dd/MM/yyyy hh:mm:ss tt")  + "'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T09:29:11.770

使用此代码

```
DateTime.ParseExact(yourString, "MM/dd/yyyy hh:mm:ss tt"); 
```

# c# - 在加载的 DataTemplateSelector 上绑定不同的目标

> ID：16165704
> 
> 赞同：0
> 
> 时间：2013-04-23T09:26:31.980
> 
> 标签：c#, wpf, data-binding, triggers

我正在使用 DataTemplateSelector 选择不同的 UserControls（参考[http://tech.pro/tutorial/807/wpf-tutorial-how-to-use-a-datatemplateselector](http://tech.pro/tutorial/807/wpf-tutorial-how-to-use-a-datatemplateselector)），根据所选路径我选择所需的 UserControl。

现在的问题是，当使用 WebBrowser 控件时，我应该将它绑定到 MyScrollViewer 的 ActualHight，但在所有其他的情况下它都可以与 Hight 一起使用，否则滚动条显示不好。必须来自 WebBrowser 控件。

如何根据加载的 UserControl 在 Hight/ActualHight 之间切换 ContentControl 中的绑定？

```
<DataTemplate x:Key="WebTemplate1">
    <DockPanel LastChildFill="True">
        <controls:WebBrowserUserControl SourceHtml="{Binding Converter={StaticResource UriConverter1}}" />
    </DockPanel>
</DataTemplate>

<DataTemplate x:Key="ImgTemplate1">
    <Image Source="{Binding Converter={StaticResource RelativeToAbsolutePathConverter1}}"
           Stretch="None" />
</DataTemplate> 
```

...

```
<ScrollViewer Name="MyScrollViewer"
              HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch"
              DockPanel.Dock="Left"
              HorizontalScrollBarVisibility="Auto"
              VerticalScrollBarVisibility="Auto">
    <Grid x:Name="MyGridHelper">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
            <DockPanel x:Name="MyDockPanel" Dock="Top" HorizontalAlignment="Left">
                <ContentControl x:Name="MyContentControl"
                                Width="{Binding ElementName=MyScrollViewer,
                                                Path=Width/ActualWidth}"
                                Height="{Binding ElementName=MyScrollViewer,
                                                 Path=Height/ActualHight}"
                                Content="{Binding Path=CurrentItem1,
                                                  Mode=OneWay}"
                                ContentTemplateSelector="{StaticResource MyTemplateSelector}" />
            </DockPanel>
    </Grid>
</ScrollViewer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T12:59:25.633

`DataTemplateSelector`本身不能影响 的其他属性，`ContentControl`但是，您可以使用 a`Converter`来确定 Width\Height 基于用于确定要使用哪个模板的相同逻辑。所以是这样的：

```
<ContentControl x:Name="MyContentControl"
                Width="{Binding ElementName=MyScrollViewer, Converter={StaticResource MyWidthConverter}, ConverterParameter="???"}"
                Height="{Binding ElementName=MyScrollViewer, Converter={StaticResource MyHeightConverter}, ConverterParameter="???"}"
                Content="{Binding Path=CurrentItem1, Mode=OneWay}"
                ContentTemplateSelector="{StaticResource MyTemplateSelector}" /> 
```

我为 打上问号是`ConverterParameter`因为我不清楚您如何确定哪种情况需要哪种宽度/高度。但是您可以传入一个参数，该参数将允许您决定要传回哪个值，并根据该决定，`Converter`可以确定是获取`ScrollViewer`传入的 ActualWidth/ActualHeight 还是 Width/Height。

# regression - MGCV P-Spline 平滑参数

> ID：16165709
> 
> 赞同：0
> 
> 时间：2013-04-23T09:26:46.387
> 
> 标签：regression, spline, smoothing, mgcv

我正在使用 MGCV 包和 gam() 函数将 P-Spline 拟合到一些数据。据我了解 gam() 选择平滑参数 - lambda - 通过最小化 GCV 出现在惩罚最小二乘函数中。

是否`fit$sp`返回通过最小化 GCV 选择的 lambda 值？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T18:28:43.580

是的。

平滑参数选择的默认标准是 GCV。

这个问题更适合[https://stats.stackexchange.com/](https://stats.stackexchange.com/)

也就是说，似乎很多人都在这里问 R 建模问题。

# php - 将 PHP 5.3.8 更新到 PHP 5.3.24 后无法发布隐藏输入

> ID：16165713
> 
> 赞同：1
> 
> 时间：2013-04-23T09:26:58.347
> 
> 标签：php, post, input, hidden

我将我的 PHP v5.3.8 升级到 v5.3.24。由于更新我的脚本不再有效。

输入变量 POST 就是问题所在。

在此处形成源代码：http: [//pastebin.com/N4XKSQjR](http://pastebin.com/N4XKSQjR)

线路问题如下（最后一行）：

```
<input type="hidden" name="count_result" value="416"> 
```

在我的 PHP 处理表单页面（traitement.php）上，我像这样恢复这个字段：

```
 $count_result = $_POST['count_result']; 
```

我得到这个 php 错误：

> 注意：未定义索引count_result上线...

该脚本在 PHP 5.3.8 上没有问题，但在 PHP 5.3.24 上没有问题。

谁能帮我？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:44:01.900

我能够找到的唯一解决方案，并且基于我在尝试复制问题时遇到的错误。注意，我在 PHP 5.4.x 上测试过这个
错误：

> 警告：未知：输入变量超过 1000

在我`php.ini`的行中：

```
; max_input_vars = 1000 
```

已被注释掉 - 意味着它默认为`1000`. [在 5.3.9 之前](http://php.net/manual/en/info.configuration.php)，**这不是一个选项**，因此您没有遇到问题并且它是无限的^^。PHP >=5.3.9 默认为`1000`，所以为了让你的脚本兼容这么多的输入，你需要在 PHP 中设置那个指令。我将它设置为 2000 并且效果很好。

由于您复制了旧的 php.ini，它可能不会存在于其中，因此添加：

```
max_input_vars = 2000 
```

在那里的某个地方，它至少适用于您当前的示例。^^

# git - Git：如何列出补丁文件的提交

> ID：16165717
> 
> 赞同：1
> 
> 时间：2013-04-23T09:27:04.483
> 
> 标签：git, format-patch

我有一个补丁文件（有人`git format-patch HEAD~3 HEAD --stdout > his_last_3_commits.patch`或多或少地关注了[那个网站](https://ariejan.net/2009/10/26/how-to-create-and-apply-a-patch-with-git/)）

我想知道**如何列出其中的内容**（我的意思**是提交的标题**）`his_last_3_commits.patch`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:46:04.130

这是我执行的最后一条命令（感谢[Gary Fixler](https://stackoverflow.com/a/16166548/535203)和[论坛](http://www.unix.com/shell-programming-scripting/92492-convert-email-headers-encoding.html)的回答）：

```
grep "^Subject:" his_last_3_commits.patch | sed "s/'/\\\\\\\\\\\'/g" | xargs --max-args=1 -I% php -r "echo iconv_mime_decode('%', 0, 'UTF-8');echo \"\n\";" 
```

PS：如果有人知道执行此操作的`git`命令，请不要犹豫在这里回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:04:32.010

如果您的意思是提交消息，这是否足够？

```
grep "^Subject:" his_last_3_commits.patch 
```

你只会得到每条提交消息的第一行，但如果你坚持[一个好的风格](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)，它们会很有用。

# android - 异步任务返回空

> ID：16165718
> 
> 赞同：0
> 
> 时间：2013-04-23T09:27:04.863
> 
> 标签：android, json, android-asynctask

我正在开发使我能够从 php mysql 加载用户的应用程序，当我选择其中一个时，它会打开一个新活动以显示用户名和删除它的按钮。问题是当我运行应用程序时，AllUsersActivity 不会返回用户。它显示一个空白页面，这里是方法 LoadAllUsers 的代码，如果没有任何用户，则有一个“else”移动到另一个 avtivity 以创建用户。但我删除了它，因为我希望它显示用户并在不添加的情况下删除它们。在我删除添加部分后，它返回给我 null，尽管连接工作正常并且它从 logcat 中的数据库中检索数据。任何人都可以帮我吗

```
/**
     * Background Async Task to Load all users by making HTTP Request
     * */
    class LoadAllUsers extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllUsersActivity.this);
            pDialog.setMessage("Loading users. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All users from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_users, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All users: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // user found
                    // Getting Array of user
                    user = json.getJSONArray(TAG_USER);

                    // looping through All users
                    for (int i = 0; i < user.length(); i++) {
                        JSONObject c = user.getJSONObject(i);

                        // Storing each json item in variable
                        String U_mail = c.getString(TAG_UMAIL);
                        String Name = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_UMAIL, U_mail);
                        map.put(TAG_NAME, Name);

                        // adding HashList to ArrayList
                        usersList.add(map);
                    }
                } 
            } 

            catch (JSONException e) {
                e.printStackTrace();  }

            return null;
        }

/**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all users
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllUsersActivity.this, usersList,
                            R.layout.list_item, new String[] { TAG_UMAIL,
                                    TAG_NAME},
                            new int[] { R.id.um, R.id.name });
                    // updating listview
                    setListAdapter(adapter);
                }
            }); 
```

这是日志猫

```
04-23 09:22:36.814: W/System.err(916): org.json.JSONException: No value for users
04-23 09:22:36.814: W/System.err(916):  at org.json.JSONObject.get(JSONObject.java:354)
04-23 09:22:36.814: W/System.err(916):  at org.json.JSONObject.getJSONArray(JSONObject.java:544)
04-23 09:22:36.824: W/System.err(916):  at com.example.androidhive.AllUsersActivity$LoadAllUsers.doInBackground(AllUsersActivity.java:140)
04-23 09:22:36.824: W/System.err(916):  at com.example.androidhive.AllUsersActivity$LoadAllUsers.doInBackground(AllUsersActivity.java:1)
04-23 09:22:36.824: W/System.err(916):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
04-23 09:22:36.865: W/System.err(916):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)

 04-23 09:22:36.924: W/System.err(916):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
    04-23 09:22:36.924: W/System.err(916):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor

.java:573) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:59:59.320

您没有`onPostExecute()`覆盖，您应该在那里关闭对话框并更新您的 UI。

我还注意到您`return null;`在`doInBackground()`方法中使用，如果您想按照方法签名的建议返回一个字符串，那么您将在此处返回一个字符串以传递给该`onPostExecute()`方法。

正如 Gordak 建议的那样，您可以将方法签名更改为`AsyncTask<Void, Void, ArrayList<HashMap<String, String>>>`（注意您必须使用大写 V 表示`Void`），然后您可以简单地返回`HashMap`并处理它`onPostExecute()`

**编辑**

我注意到您更新的问题有几件事，首先，您的异常是因为当您尝试加载用户数组时在 JSON 中找不到该字段。 `user = json.getJSONArray(TAG_USER);`检查您的提要以确保字段名称或`TAG_USER`.

其次，您始终将 null 放入您`onPostExecute()`的文件中，因此文件路径将始终为 null。

最后，`onPostExecute()`始终在 UI 线程上执行，因此您不需要`runOnUIThread()`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:53:14.517

我不明白你想做什么。我猜你从 JSON 字符串中获取数据是什么。查看您的代码，此数据包含一些`JSONObject`. 每个对象都包含一封邮件和一个姓名。

在这种情况下我可能会做什么。而不是扩展 a `AsyncTask<String, String, String>`，扩展 a `AsyncTask<void, void, ArrayList<HashMap<String, String>>>`。这样，您的`doInBackground`方法返回的 a`ArrayList<HashMap<String, String>>`可能比单个字符串更有趣。

在 for 循环结束时，返回 usersList。

如果遇到异常，请处理它并返回 null 或一个空的新 ArrayList> 对象。

然后决定你要在`onPostExecute`方法中做什么。

希望它可以帮助你。

# php - PHP创建文件夹，上传文件并允许删除文件最佳安全措施

> ID：16165724
> 
> 赞同：1
> 
> 时间：2013-04-23T09:27:14.430
> 
> 标签：php

我正在开发一个允许用户上传图像的应用程序。该脚本会创建多种尺寸的图像并将它们存储在具有会话 ID 的文件夹中，例如 /uploads/skj28cnkjck783wo/thumbnails，然后在用户点击提交/下一步/执行后将文件夹重命名为唯一名称。

我需要让用户能够删除单个文件，但想知道这样做的最佳安全方式是什么。如果我基于会话 ID 删除，用户肯定能够更改它并删除不属于他们的文件。

我在想我可以将用户信息和对象引用存储在一个表中并进行查找以确保用户有权删除该文件或将文件存储在具有基于数据库条目唯一的用户 ID 的文件夹中，但想知道什么专家们认为。我做了一些谷歌搜索，但都有缺陷。

我正在运行 IIS7 作为 Web 服务器。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:44:40.197

尝试将关系“用户名（或用户 ID）”->“用户文件”存储在单独的表中。这是最好的安全方式，因为操作系统（在您的情况下是 Windows）只能检测到一个用户 - Web 服务的所有者（IIS 或 Apache 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:49:28.390

操作文件的是您，而不是用户本人。

用户在他的 GET 或 POST 请求中给出文件名（或者可能是一些文件 ID）。

1.  通过拒绝所有包含斜杠的输入来禁止相对路径。如果您不允许子文件夹，这很容易。
2.  如果您允许子文件夹，请拒绝所有具有 ../ 等的内容。
3.  您可以通过更改文件名（如 flickr 所做的那样）来保留文件，并保留文件名的数据（以显示给用户）和所有者。如果所有者和用户不匹配，则拒绝。

# android - 安卓：notifyDataSetChanged(); 不工作

> ID：16165728
> 
> 赞同：29
> 
> 时间：2013-04-23T09:27:28.153
> 
> 标签：android, refresh, adapter

我在服务器中有一个数据库，从平板电脑中我从数据库中的一个表中获取一些值。我将此信息正确加载到列表中，但我想知道为什么在发生更改时，即使我使用`notifyDataSetChanged();`. 我必须说，要加载加载数据，请使用 AsyncTaskClass 所以，我的问题是我不知道是否使用 notifyDataSetChanged(); 方法正确，因为如果有变化我想刷新图像。以下是该类的部分代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.all_candidatos);

        candidatosList = new ArrayList<HashMap<String, String>>();

        new CargarCandidatos().execute();
    }

//  public void timer(){
//       new CountDownTimer(tiempo, 100) {
//
//              public void onTick(long millisUntilFinished) {
//                  
//              }
//
//              public void onFinish() {
//              //  new CargarCandidatos().execute();
//
//              }
//           }.start();}

    /**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class CargarCandidatos extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Monitorizacion.this);
            pDialog.setMessage("Loading ...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            JSONObject json = jParser.makeHttpRequest(url_candidatos, "GET", params);

            Log.d("Candidatos: ", json.toString());

            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {

                    candidatos = json.getJSONArray(TAG_CANDIDATOS);

                    for (int i = 0; i < candidatos.length(); i++) {
                        JSONObject c = candidatos.getJSONObject(i);

                        // Storing each json item in variable
                        String nserie = c.getString(TAG_NSERIE);
                        String dni = c.getString(TAG_DNI);
                        String nombre = c.getString(TAG_NOMBRE);
                        String test = c.getString(TAG_TEST);
                        String pregunta = c.getString(TAG_PREGUNTA);
                        String bateria = c.getString(TAG_BATERIA);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_NSERIE, nserie);
                        map.put(TAG_DNI, dni);
                        map.put(TAG_NOMBRE, nombre);
                        map.put(TAG_TEST, test);
                        map.put(TAG_PREGUNTA, pregunta);
                        map.put(TAG_BATERIA, bateria);

                        // adding HashList to ArrayList
                        candidatosList.add(map);
                    }
                } 
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            pDialog.dismiss();
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    adapter = new SimpleAdapter(
                            Monitorizacion.this, candidatosList,
                            R.layout.list_item, new String[] { TAG_NSERIE,
                                    TAG_DNI, TAG_NOMBRE, TAG_TEST, TAG_PREGUNTA, TAG_BATERIA},
                            new int[] { R.id.id, R.id.dni, R.id.nombre, R.id.test, R.id.pregunta, R.id.bateria});
                    setListAdapter(adapter);
                    adapter.notifyDataSetChanged();
                //  timer();
                }
            });

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-12-09T19:32:49.127

`notifyDataSetChanged()`对您不起作用的主要原因之一是，

**您的适配器失去了对您的列表的引用**。

当您第一次初始化时，`Adapter`它会引用您的引用`arrayList`并将其传递给它的超类。但是，如果您重新初始化现有`arrayList`的，它将失去参考，因此，与`Adapter`.

在创建新列表并将其添加到`Adapter`. 始终遵循以下准则：

1.  `arrayList`在全局声明时初始化。
2.  直接将 List 添加到适配器，而不检查 null 和空值。直接将适配器设置到列表中（不检查任何条件）。适配器向您保证，无论您对数据进行更改，`arrayList`它都会处理它，但永远不会丢失参考。
3.  始终修改 arrayList 本身中的数据（如果您的数据是全新的，那么您可以调用`adapter.clear()`并且`arrayList.clear()`在实际将数据添加到列表之前）但不要设置适配器，即如果新数据填充`arrayList`在`adapter.notifyDataSetChanged()`

忠于文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T09:49:20.400

你需要编辑的东西是把你的

```
runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    adapter = new SimpleAdapter(
                            Monitorizacion.this, candidatosList,
                            R.layout.list_item, new String[] { TAG_NSERIE,
                                    TAG_DNI, TAG_NOMBRE, TAG_TEST, TAG_PREGUNTA, TAG_BATERIA},
                            new int[] { R.id.id, R.id.dni, R.id.nombre, R.id.test, R.id.pregunta, R.id.bateria});
                    setListAdapter(adapter);
                    adapter.notifyDataSetChanged();
                //  timer();
                }
            }); 
```

进入 OnCreate()。并从 Asynctask 返回列表 candidatosList。而不是设置用于更新candidatosList 列表的计时器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-01-30T18:14:16.153

如果您对`registerDataSetObserver()`. Android Studio 为我添加了一个，但没有实现对 super 的调用。如下添加它足以让我的 listView 再次工作：

```
@Override
    public void registerDataSetObserver(DataSetObserver observer) {
        super.registerDataSetObserver(observer);    
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-23T09:45:19.617

适配器定义布局的组成部分！-> setListAdapter() : 为 ListView/GridView/Gallery 定义适配器...但您需要指定数据！

我建议您在“onCreate”或构造函数中初始化“setListAdapter”。将数据设置到适配器后（例如：adapter.setItem(yourData)）

现在 ！你应该调用 notifyDataSetChanged ！因为**您已更改数据但视图未刷新并且 notifydatasetchanged() 重新加载视图的内容**（ListView/GridView/Gallery...）

为了获得良好的实践和正确理解，我建议您使用“ **baseAdapter** ”使用“自定义适配器”

阅读并做本教程（我已经学习了这个）：[http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

阅读文档：http: [//developer.android.com/reference/android/widget/BaseAdapter.html](http://developer.android.com/reference/android/widget/BaseAdapter.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-02-20T16:32:05.033

应该从 UI 线程调用更新函数。我的答案实际上与@user1621629 的[答案](https://stackoverflow.com/a/16166190/449553)相似，不同之处在于我使用的是 rxJava，所以这里的工作代码可以为我解决这个问题：

```
this.subscriber = myAdapter.getSubscriber(); // keep for unsubscribe in destroy
dataSource.subscribeOn(Schedulers.computation()).observeOn(AndroidSchedulers.mainThread()).subscribe(this.subscriber); 
```

因此，我将所有执行设置为将列表的数据获取到计算线程，但在 UI 线程中显示结果。

这是我为此创建订阅者的方法：

```
public class MyListAdapter extends RecyclerView.Adapter<LocationListAdapter.ViewHolder> {

private List<ListItem> mDataset = new ArrayList<>();

public Subscriber<ListItem[]> getSubscriber() {
    return Subscribers.create(new Action1<ListItem[]>() {
        @Override
        public void call(ListItem[] listItems) {
            mDataset.clear();
            mDataset.addAll(Arrays.asList(listItems));
            notifyDataSetChanged();
        }
    });
}
...... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-05T19:03:12.017

正如[Hissain 上面所描述的](https://stackoverflow.com/a/20479071/2162226)，

> > 您需要维护对列表的引用

这是我如何让它工作的：

1.  让发送给适配器的列表设置为活动中的实例成员

2.  在对数据执行更改的逻辑中，确保它更新了活动传递给适配器的相同列表实例

3.  然后调用 .notifyDataSetChanged(); 工作过

请记住，listView 位置从 1 开始，因此您必须为您的 java.util.List 执行 (listViewPosition - 1)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-11T06:19:07.690

我对 Hissain 先生的回答没有太多的评论。这是正确的，但我想再提一件事，对列表的引用不应该改变。如果底层数据源发生变化，请不要更改对新列表的引用。只需对同一个列表对象执行操作。为此，请使用 clear() 清除列表，然后使用 add() 或 addALL() 将数据添加到同一列表中，然后调用 notifyDataSetChanged()。例如。在列表的第一次初始化

```
list = dataSource.getList(); 
```

然后可以从列表中添加和删除内容并调用 notifyDataSetChanged() 它工作正常，但如果在代码中，尝试更改对另一个对象的引用。像

```
list = dataSource.getList(); 
```

其中 getList() 每次都返回新列表，因此引用更改为其他列表对象并调用 notifyDataSetChnaged 不会对列表产生影响。但是如果 getList() 返回相同的列表对象，则它可以正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-20T07:51:17.863

如果您设置的一切都很好但仍然无法正常工作，那么您的列表...是否是列表中的 Mutablekind...！

```
private val demoList: MutableList<AnyClass> = mutableListOf() 
```

一旦你像上面可变的方式定义了你的列表，那么你就可以获得该方法

```
.add
.addAll
.remove 
```

ETC...

否则，如果您创建了普通列表，那么它将无法正常工作`notifyDataSetChanged`

# orchardcms - 果园代币 ->

> ID：16165733
> 
> 赞同：0
> 
> 时间：2013-04-23T09:27:45.590
> 
> 标签：orchardcms

我从 Orchard Token Providers 那里得到了一些帮助，任何帮助都是一件好事。我大部分时间都在复制评论令牌。

目标是在发布“问题”内容项时发送电子邮件。

这是我对内容类型“问题”的解决方案：

```
public interface ITokenProvider : IEventHandler
{
    void Describe(dynamic context);
    void Evaluate(dynamic context);
}

public class QuestionTokens : ITokenProvider

{
    public QuestionTokens()
    {
        T = NullLocalizer.Instance;
    }
public Localizer T { get; set; }

public void Describe(dynamic context)
{
    //presume this is correct 
    context.For("Content", T("Content Items"), T("Content Items"))
        .Token("QuestionText", T("Question Text"), T("Text of the question"))
        .Token("QuestionAuthor", T("Question Author"), T("Author of the question"));
    //presume this is incorrect? correct for the content type?
    context.For("Question", T("Questions"), T("Questions from users"))
        .Token("QuestionText", T("Question Text"), T("Text of the question"))
        .Token("QuestionAuthor", T("Question Author"), T("Author of the question"));
}

public void Evaluate(dynamic context)
{

    Func<IContent, object> questionTextAccessorFromContent = (content) => { 
        var part = content.As<QuestionPart>();
        return part.QuestionText; 
    };

    Func<QuestionPart, object> questionTextAccessor = (part) =>
    {
        return part.QuestionText;
    };

    Func<IContent, object> authorAccessorFromContent = (content) => { 
        var part = content.As<QuestionPart>();
        return part.Author; 
    };

    Func<QuestionPart, object> authorAccessor = (part) =>
    {
        return part.Author;
    };

    //doesnt work 
    context.For<IContent>("Content")
        .Token("QuestionText", (Func<IContent, object>)
    (content => content.As<QuestionPart>().Record.QuestionText))
        .Token("QuestionAuthor", (Func<IContent, object>)
    (content => content.As<QuestionPart>().Record.Author));
    //doesnt work 
    context.For<IContent>("Question")
        .Token("QuestionText", (Func<IContent, object>)
    (content => content.As<QuestionPart>().Record.QuestionText))
        .Token("QuestionAuthor", (Func<IContent, object>)
    (content => content.As<QuestionPart>().Record.Author));
    //doesnt work 
    context.For<QuestionPart>("Question")
        .Token("QuestionText", (Func<QuestionPart, object>)
    (content => content.Record.QuestionText))
        .Token("Author", (Func<QuestionPart, object>)
    (content => content.Record.Author)); ;
}

private static string QuestionText(IContent question) 
{
    var questionPart = question.As<QuestionPart>();
    return questionPart.QuestionText;
}

private static string Author(IContent question) 
{
    var questionPart = question.As<QuestionPart>();
    return questionPart.Author;
} 
```

}

这是操作（当问题发布时），它会发送一封带有正文的电子邮件：（已更新以测试 Medeiros 建议）

```
<p>A question has been created by: {Content.QuestionAuthor}</p>
<p>A question has been created by: {Content.QuestionAuthor.Text}</p>
<p>A question has been created by: {Content.QuestionAuthor.Value}</p>
<p>A question has been created by: {Question.QuestionAuthor}</p>
<p>A question has been created by: {Question.QuestionAuthor.Text}</p>
<p>A question has been created by: {Question.QuestionAuthor.Value}</p>
<p>Message: {Content.QuestionText}</p>
<p>Message: {Content.QuestionText.Text}</p>
<p>Message: {Content.QuestionText.Value}</p>
<p>Message: {Question.QuestionText}</p>
<p>Message: {Question.QuestionText.Text}</p>
<p>Message: {Question.QuestionText.Value}</p> 
```

所有“我的”标记都替换为空白文本。其他令牌，如： {Content.ContentType} {User.Email} 工作得很好。任何人注意到的任何错误或提示都将非常有用。

谢谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T13:17:20.473

我重新编写了令牌提供程序，它的工作方式有点......（现在完全工作）

```
public class QuestionTokens : Orchard.Tokens.ITokenProvider
{
    private readonly IContentManager contentManager;
    private readonly IWorkContextAccessor workContextAccessor;

    public QuestionTokens(IContentManager contentManager, IWorkContextAccessor workContextAccessor)
    {
        this.workContextAccessor = workContextAccessor;
        this.contentManager = contentManager;
        T = NullLocalizer.Instance;
    }

    public Localizer T { get; set; }

    /// <summary>
    /// Describes the specified context.
    /// </summary>
    /// <param name="context">The context.</param>
    public void Describe(DescribeContext context)
    {
        context.For("Content", T("Content Items"), T("Content Items"))
            .Token("QuestionText", T("Question Text"), T("Text of the question"))
            .Token("QuestionAuthor", T("Question Author"), T("Author of the question"));
    }

    /// <summary>
    /// Evaluates the specified context.
    /// </summary>
    /// <param name="context">The context.</param>
    public void Evaluate(EvaluateContext context)
    {
        context.For<IContent>("Content")
            .Token("QuestionText", content => QuestionText(content, context))
            .Token("QuestionAuthor", content => Author(content, context));
    }

    private string QuestionText(IContent question, EvaluateContext context) 
    {
        var questionPart = question.As<QuestionPart>();
        return questionPart.QuestionText;
    }

    private string Author(IContent question, EvaluateContext context) 
    {
        var questionPart = question.As<QuestionPart>();
        return questionPart.Author;
    }

} 
```

我现在至少可以在私有 QuestionText 和 Author 方法中调试代码。由于在控制器中触发此行时触发了已发布的事件，因此检索到的值为“null”：services.ContentManager.Create("Question");

因此内容项尚未被填充，并且“已发布”事件在其生命开始之前就被触发了。是时候玩一下它的内容类型设置，看看这是否会有所不同......

最后，所有工作都根据需要。当我不希望它发生时，事件部分“已发布”事件仍在发生，因此我改变了内容的生命。

从控制器：（删除了服务中的一些代码，因此我没有发布更多代码）

```
var item = services.ContentManager.New<Models.QuestionPart>("Question");
this.TryUpdateModel(item);
services.ContentManager.Create(item.ContentItem); //where the event is firing  
Services.ContentManager.Publish(item.ContentItem); //where i expected the event to fire :) 
```

最初是创建、更新和保存。但事件限制了这一点。所以现在它是新的，更新和创建。至于代币。它们很简单：{Content.QuestionAuthor} 和 {Content.QuestionText}。当一切正常并且一切正常时，一切都很好而且很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T20:15:38.657

马修，尝试为以下内容添加 .Value：`{Content.QuestionAuthor.Value}`

如果这不起作用，请尝试 .Text。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T13:48:18.673

您原始问题中的代码看起来很准确。您遵循创建从 IEventHandler[链接](http://orchard.codeplex.com/discussions/273862)继承的接口的正确 Orchard Events 总线约定。

您对控制器代码的更改可能是您获得值的原因。我调试代码的经验是，它取决于您的规则订阅的事件。例如，“Content Created”类型的事件在 Evaluate 方法中命中调试器，但所有自定义部件属性均为空。但是“提交自定义表单时”的事件会命中并填充值。

我花了一整天的时间对我的代码进行故障排除，该代码看起来与上面的代码相似，直到我开始测试我的规则中的其他事件类型，它才在私有函数中填充了数据。

这是我的代码：

```
public interface ITokenProvider : IEventHandler
{
  void Describe(dynamic context);
  void Evaluate(dynamic context);
}

public class PersonTokens : ITokenProvider
{
  private readonly IContentManager _contentManager;

  public Localizer T { get; set; }

  public PersonTokens(IContentManager contentManager)
  {
    _contentManager = contentManager;
    T = NullLocalizer.Instance;
  }
  public void Describe(dynamic context)
  {
    context.For("Content", T("Content Items"), T("Content Items"))
      .Token("FirstName", T("First Name"), T("The Person's First Name"))
      .Token("LastName", T("Last Name"), T("The Person's Last Name"))
      .Token("EmailAddress", T("Email Address"), T("The Person's Email Address"))
      .Token("PhoneNumber", T("Phone Number"), T("The Person's Phone Number"));
  }

  public void Evaluate(dynamic context)
  {
    // Orchard.Tokens.Implementation.TokenManager.EvaluateContextImpl
    context.For<IContent>("Content")
      .Token("FirstName", (Func<IContent, object>)FirstName)
      .Token("LastName", (Func<IContent, object>)(content => content.As<PersonPart>().Record.LastName))
      .Token("EmailAddress", (Func<IContent, object>)(content => content.As<PersonPart>().EmailAddress))
      .Token("PhoneNumber", (Func<IContent, object>)PhoneNumber); // left the PhoneNumber out of sample
  }

  private string FirstName(IContent person)
  {
    var personPart = person.As<PersonPart>();
    return personPart.Record.FirstName;
  }
} 
```

# javascript - $(窗口).unload(函数(){}); 是不是在火狐和opera中被解雇了？

> ID：16165739
> 
> 赞同：1
> 
> 时间：2013-04-23T09:28:00.713
> 
> 标签：javascript, firefox, opera, jquery

我以前的帖子是[window.onbeforeunload 和 window.onunload 在 Firefox、Safari、Opera 中不起作用？](https://stackoverflow.com/questions/14645011/window-onbeforeunload-and-window-onunload-is-not-working-in-firefox-safari-o)在这种情况下它不起作用。所以我创建了一个新线程。

现在这适用于`IE`、`safari`和`chrome`。

唯一`beforeunload`触发且未触发的`firefox`事件`unload`。

两者都不工作`Opera`。

我的 jQuery 将是：

```
$(window).on('beforeunload', function () {
  return 'Are you sure want to LOGOUT the session ?';
});

$(window).unload(function () {
  closeWindow();
});

function closeWindow() {
  alert('fdf');
  $.ajax({
    type: 'post',
    url: 'Test.jsp',
    async: false,
    //data : "userId="+encodeURIComponent(userId)+"&secureKey="+encodeURIComponent(secureKey)+"&nickname="+encodeURIComponent(name)+"&sid="+Math.random() ,
    cache: false,
    contentType: 'application/x-www-form-urlencoded; charset=utf-8',
    scriptCharset: 'utf-8',
    dataType: 'html',
    //alert(sessionId+" "+userId+ " "+secureKey+" "+message);

    error: function (xhr, ajaxOptions, thrownError) {
      //alert("status :"+xhr.status+"\nthrownError : "+thrownError+"\nresponseText : "+xhr.responseText);
    },

    success: function (responseData, status) {
      //alert("LogoutAction Response Data : "+ responseData +"\nStatus : "+status);
      var checkMsg = $.trim(responseData);

      if (checkMsg != 'null' && checkMsg.length != 0 && checkMsg != null) {
        alert('Window close : ' + checkMsg);
      }
    },
  });
} 
```

我的`Test.jsp`意志是

```
<%  System.out.println("Window is closed !"); 
out.println("Window is closed !");   %> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-23T09:30:57.943

你需要从你的卸载事件回调中返回一些东西 -

```
$(window).unload(function() {
        closeWindow();
        return "some string";
}); 
```

# java - 以我给出的格式获取日期时间

> ID：16165744
> 
> 赞同：0
> 
> 时间：2013-04-23T09:28:15.020
> 
> 标签：java, calendar

我有一个包含日期和时间信息的 Java Date 对象，例如 2010-11-11T09:30:47。我想编写一个方法，将此 Date 对象转换为以下格式。“yyyy-MM-dd'T'HH:mm:ss.SSS'Z'

我写了以下代码。

```
 private Calender getValue(Date dateObject) {
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
    formatter.setTimeZone(TimeZone.getTimeZone("GMT"));

    String timestamp = formatter.format(dateObject);

    System.out.println("Created GMT cal with date [" + timestamp + "]");

    } 
```

当我运行程序时，它正在打印

> 使用日期 [2010-11-11T04:00:47.000Z] 创建 GMT 校准

我给的是“2010-11-11T09:30:47”，我的时间是 09:30:47。它正在打印的是“04:00:47”。

**为什么时间会从 9.30 变为 4.00。？**

我需要做什么才能获得与我付出相同的时间。喜欢 2010-11-11T09:30:47.000Z

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:37:14.183

Remove **formatter.setTimeZone(TimeZone.getTimeZone("GMT"));**

```
 SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
  String timestamp = formatter.format(new Date());
  System.out.println("Created GMT cal with date [" + timestamp + "]"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:32:57.630

*您所在*时区的日期可能是 09:30:47 。但是您将日期格式配置为 GMT 时区。所以它显示的是 GMT 时区的时间。

如果您使用其他日期格式来解析输入字符串并获取 Date 对象，请确保此其他日期格式也使用 GMT 时区。

要获得更多帮助，请向我们展示如何创建传递给您的方法的 Date 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:43:11.173

您只需要删除以下行

```
formatter.setTimeZone(TimeZone.getTimeZone("GMT")); 
```

因为您将时区设置为 GMT，而您的时区是 GMT + 5.30。这就是当您将时间设置为 9.30 时，您将得到**9.30 - 5.30 = 4.00**的原因。

您可以使用以下代码：

```
private void getValue(Date dateObject) 
{
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
    String timestamp = formatter.format(dateObject);
    System.out.println("Created GMT cal with date [" + timestamp + "]");
} 
```

# javascript - 使用企业客户 ID 将 Google Maps javascript v2 升级到 v3

> ID：16165747
> 
> 赞同：5
> 
> 时间：2013-04-23T09:28:22.817
> 
> 标签：javascript, ipad, google-maps-api-3

我正在使用此[链接](https://developers.google.com/maps/articles/v2tov3)将 Google Maps JavaScript Application v2 升级到 v3。基本上我的方法是从 api 获取输出，解析它并使用 MapKit 框架加载它，我使用这段[代码](https://github.com/kishikawakatsumi/MapKit-Route-Directions)成功地做到了。

我的问题：根据文档，如果我们为商业客户使用谷歌地图，我们将需要使用客户 ID 代替密钥。

所以如果我使用这段代码：

```
<script src="https://maps.googleapis.com/maps/api/js?v=3&client=gme-myclientId&sensor=false" type="text/javascript"></script> 
```

我得到以下输出，其中所有位置都绘制在单点（可能是中心）：

![映射当前输出](https://i.stack.imgur.com/iT79V.png)

如果我使用此代码：

```
 <script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script> 
```

我将得到预期的（正确的）输出，如下所示：

![在不使用 clientId 的情况下映射预期输出](https://i.stack.imgur.com/Wak3I.png)

我还浏览了此[文档](https://developers.google.com/maps/documentation/business/guide)以正确使用客户端 ID，但有帮助。我正在使用与 v2 相同的客户端 ID，希望不会造成任何问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-13T07:29:32.137

感谢所有对我的问题的评论，这让我解决了这个问题。所以，我想到了分享解决方案。

当我不使用客户端 ID 时，

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false" type="text/javascript"></script> 
```

响应结构是

```
"overview_path": [{
                    "jb": 37.785610000000005,
                    "kb": -122.41127000000002
                }, … ]; 
```

但是，在使用客户端 ID 时，请说 gme-myClientId

```
<script src="https://maps.googleapis.com/maps/api/js?v=3&client=gme-myClientId&sensor=false" type="text/javascript"></script> 
```

响应结构是

```
"overview_path": [{
                    "hb": 37.785610000000005,
                    "ib": -122.41127000000002
                }, …]; 
```

因此，jb,kb 到 hb,ib 的变化导致了问题，因为我使用变量作为获取值的关键。

我使用的是内部遵循此程序的[第三方代码。](https://github.com/kishikawakatsumi/MapKit-Route-Directions)

我邮寄了 Google 企业支持，他们回复我说我可能在我的 Javascript 库中使用了一些未记录的变量。变量名称在库被缩小时自动生成，并且可以（并且经常）在他们推送的每个版本中更改。正确的方法是仅使用记录在案的 API 方法。

可以在 [此处找到使用文档化 API 方法的链接](https://developers.google.com/maps/documentation/javascript/reference#LatLng)

我修改了我的代码以使用如下

```
var latT = someLocationObject.lat();
var longT = someLocationObject.lng(); 
```

它对我有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-11T16:28:30.803

好吧，要使用“gme-XXXXX”之类的客户端 ID，您需要购买 Google Maps for Business 许可证。你已经买了一个吗？

问候，

# javascript - Javascript eval字符串+变量

> ID：16165748
> 
> 赞同：0
> 
> 时间：2013-04-23T09:28:24.397
> 
> 标签：javascript, jquery

我在运行时使用 <%= %> 语法评估了一段 javascript 代码...

现在，在 <%= %> 内部，我希望将值存储在变量中，而不是硬编码字符串……我该怎么做？

这是功能：

```
function updateDescriptionLabel(msgToParse, dataColumn, TextBoxID) {
    var myData = JSON.parse(msgToParse.d);
    alert(msgToParse);
    alert(dataColumn);
    alert(TextBoxID);

    // this is the explicit call, it's ok
    $('#' + '<%= this.TextBoxDES_MACCHINA.ClientID  %>').val($.trim(myData["DescrMacchina"]));

    // NOW i want to make the call by using the variable value
    var txtDes = TextBoxID;

    $('#' + '<%= this.' + txtDes.toString() + '.ClientID %>').val($.trim(myData["DescrMacch"]));

    // BUT i get the error: Too many characters in character literal
} 
```

============== 编辑===============

我有一堆 TextBoxID，在失去焦点时，从数据库中获取一个值，并将其显示在与 ID 相关的适当 TextBoxDESCRIPTION 上......但我必须为每个 TextBox 复制代码，所以我想概括它...

我发布了整个代码。

```
 <script language="javascript" type="text/javascript">

    /* ==> JSON  */

    //Ajax Request
    function SendAjaxRequest(urlMethod, jsonData, returnFunction) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: urlMethod,
            data: jsonData,
            dataType: "json",
            success: function (msg) {
                // Do something interesting here.
                if (msg != null) {
                    returnFunction(msg);
                }
            },
            error: function (xhr, status, error) {
                // Boil the ASP.NET AJAX error down to JSON.
                var err = eval("(" + xhr.responseText + ")");

                // Display the specific error raised by the server
                alert(err.Message);
            }
        });
    }

    // I'd like to generalize it ...
    function SendComplexAjaxRequest(urlMethod, jsonData, returnFunction, dataColumn, TextBoxID) {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: urlMethod,
            data: jsonData,
            dataType: "json",
            success: function (msg) {
                // Do something interesting here.
                if (msg != null) {
                    returnFunction(msg, dataColumn, TextBoxID);
                }
            },
            error: function (xhr, status, error) {
                // Boil the ASP.NET AJAX error down to JSON.
                var err = eval("(" + xhr.responseText + ")");

                // Display the specific error raised by the server
                alert(err.Message);
            }
        });
    }

// ONE function for each textBox
    function callUpdateGuastoAttributes(code) {
        var urlMethod = '<% = ResolveClientUrl("~/Services/ws_Attributes.asmx/OdLGetMacchinaAttributes") %>';
        var jsonData = "{'COD_MACCHINA':'" + code + "'}";
        var successFunction = updateLabelsGuastoAttributs;
        SendAjaxRequest(urlMethod, jsonData, successFunction);
    }

    function callUpdateCausaGuastoAttributes(code) {
        var urlMethod = '<% = ResolveClientUrl("~/Services/ws_Attributes.asmx/OdLGetMacchinaAttributes") %>';
        var jsonData = "{'COD_MACCHINA':'" + code + "'}";
        var successFunction = updateLabelsCausaGuastoAttributs;
        SendAjaxRequest(urlMethod, jsonData, successFunction);
    }

// I can have only one function:
    function callUpdateMacchinaAttributes(code) {
        var urlMethod = '<% = ResolveClientUrl("~/Services/ws_Attributes.asmx/OdLGetMacchinaAttributes") %>';
        var jsonData = "{'COD_MACCHINA':'" + code + "'}";
        var successFunction = updateDescriptionLabel;
        SendComplexAjaxRequest(urlMethod, jsonData, successFunction, 'DescrMacchina', 'TextBoxDES_MACCHINA');
    }

    /* <== CALLBACK  */
function updateLabelsMacchinaAttributs(msg) {
        var myData = JSON.parse(msg.d);
        $('#' + '<%= this.TextBoxDES_MACCHINA.ClientID  %>').val($.trim(myData["DescrMacchina"]));
    }

    function updateLabelsGuastoAttributs(msg) {
        var myData = JSON.parse(msg.d);
        $('#' + '<%= this.TextBoxDES_GUASTO.ClientID  %>').val($.trim(myData["description"]));
    }

    function updateLabelsCausaGuastoAttributs(msg) {
        var myData = JSON.parse(msg.d);
        $('#' + '<%= this.TextBoxDES_CAUSA_GUASTO.ClientID  %>').val($.trim(myData["description"]));
    }

// BUT I have to generalize it...
function updateDescriptionLabel(msgToParse, dataColumn, TextBoxID) {
        var myData = JSON.parse(msgToParse.d);
        alert(msgToParse);
        alert(dataColumn);
        alert(TextBoxID);

        // this is the explicit call
        $('#' + '<%= this.TextBoxDES_MACCHINA.ClientID  %>').val($.trim(myData["DescrMacchina"]));

        // i want to make the call by using the variables values
        var dCol = dataColumn;
        var txtDes = TextBoxID;

        $('#' + '<%= this.' + txtDes.toString() + '.ClientID %>').val($.trim(myData[dCol]));

        // i get the error: Too many characters in character literal
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:37:34.030

我提出这样的解决方案（取决于你的其他代码......）：

```
function updateDescriptionLabel(msgToParse, dataColumn, TextBoxID) {
    var myData = JSON.parse(msgToParse.d);
    alert(msgToParse);
    alert(dataColumn);
    alert(TextBoxID);

    // this is the explicit call, it's ok
    $('#' + '<%= this.TextBoxDES_MACCHINA.ClientID  %>').val($.trim(myData["DescrMacchina"]));

    // NOW i want to make the call by using the variable value

    $('#' + TextBoxID).val($.trim(myData["DescrMacch"]));
} 
```

然后当你调用这个函数时这样做：

```
updateDescriptionLabel("your message", <yourcolumn>, <%= this.TextBoxDES_MACCHINA.ClientID  %>); 
```

# ios - Set NSDecimal to zero

> ID：16165749
> 
> 赞同：4
> 
> 时间：2013-04-23T09:28:25.000
> 
> 标签：ios, objective-c, nsdecimalnumber, nsdecimal

What are the different ways of setting a `NSDecimal` to zero? I'm not keen on any of the 3 I found so far.

```
NSDecimal zero = {0}; // Not obvious what's going on here.

NSDecimal zero = @(0).decimalValue; // @(0) appears to always return the same instance.

NSDecimal zero = [NSDecimalNumber zero].decimalValue; // [NSDecimalNumber zero] appears to always return the same instance. 
```

Is there one that is most accepted than others? Am I missing some kind of `NSDecimalZero` constant/function?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:48:58.010

I have never noticed that `NSDecimal` doesn't have a nice `Create` function.

I can't imagine another method than the 3 you list.

```
NSDecimal zero = {0}; 
```

You are right, this is not obvious, this is actually very far from obvious. Usual programmers won't look up the documentation to see what value the struct will represent with all attributes set to zero.

```
NSDecimal zero = @(0).decimalValue 
```

I don't like it because it uses `NSNumber` and needlessly creates an autoreleased object.

```
NSDecimal zero = [NSDecimalNumber zero].decimalValue 
```

This is my preferred solution. Using `NSDecimal` structs directly is done mostly for performance boosts (without creating objects on the heap). This method matches the intent because it uses a singleton constant.

However, if you have a lot of code involving `NSDecimal` and performance is really important for you, create your own function/macro to initialize the struct and use this function everywhere. Then this problem won't matter to you because the function name will make the code obvious.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:45:20.810

`NSDecimal` is a C struct which you are not supposed to look inside (you can but you shouldn't) so that rules out the first which is technically looking inside the struct.

Either of the second two are absolutely fine. Note that, in C, assigning to a struct copies all the fields, so although [NSDecimalNumber zero] always returns the same object, your NSDecimal will be a unique struct and changing its contents won't affect any other NSDecimal that has been "created" in the same way.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:38:19.797

I guess you need to use NSDecimalNumber,

Typically we do as:

```
NSDecimalNumber *zeroDecimal = [[NSDecimalNumber alloc] initWithFloat:0.f]; 
```

> NSDecimal zero = @(0).decimalValue; // @(0) appears to always return the same instance.
> 
> NSDecimal zero = [NSDecimalNumber zero].decimalValue; // [NSDecimalNumber zero] appears to always return the same instance.

Above two returns equivalent value of 0.0, first one is just the shorthand notation for the second one. You boxed 0 to NSDecimalNumber, using new syntax.

* * *

However, NSDecimal is typedefStruct that looks like this

```
typedef struct {
    signed   int _exponent:8;
    unsigned int _length:4;     // length == 0 && isNegative -> NaN
    unsigned int _isNegative:1;
    unsigned int _isCompact:1;
    unsigned int _reserved:18;
    unsigned short _mantissa[NSDecimalMaxSize];
} NSDecimal; 
```

# asp.net - QueryString 值中的“&”

> ID：16165753
> 
> 赞同：2
> 
> 时间：2013-04-23T09:28:32.803
> 
> 标签：asp.net, request.querystring

我正在使用 QueryStrings 让用户从下拉列表中自动选择值。此下拉列表中的某些值包含“&”。

例如“收购与发展”

当用户通过一个带有“&”的值时，字符串值在后半部分之前被截断。

```
string functionalDepartment = Request.QueryString["FunctionalDepartment"];
//returns "Acquisitions " 
```

从 QueryString 获取值时，有没有办法可以包含值的后半部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:32:03.657

在将其传递给查询字符串之前，只需替换：

```
.Replace("&","%26"); 
```

或使用 Server.URLEncode()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:32:26.363

& 字符需要进行 URL 编码，因为 & 用于将查询字符串划分为 name=value 对。创建*URL*时，请使用：

```
HttpUtility.UrlEncode(url); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T09:32:18.740

您可以`System.Web.HttpUtility.UrlEncode`在设置下拉列表的值时使用。

这将确保`&`不会破坏这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:34:20.983

使用[HttpServerUtility.UrlEncode：](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

URL 编码确保所有浏览器都能正确传输 URL 字符串中的文本。某些浏览器可能会截断或损坏与符号 (&) 等字符。

更多详细信息请参阅此[查询带有特殊字符的字符串](https://stackoverflow.com/questions/9579151/query-strings-with-special-characters)

我也提到

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-23T09:35:07.127

`Server.UrlEncode("url")`会解决你的问题。

例子：

```
 MyURL = "http://www.ursite.com/urpage.aspx?ReqStr=" + Server.UrlEncode("ASP.NET Examples"); 
```

# c# - 如何使用asp.net和phantomjs对页面进行截图并返回给客户端

> ID：16165755
> 
> 赞同：2
> 
> 时间：2013-04-23T09:28:33.473
> 
> 标签：c#, javascript, asp.net, phantomjs

我希望能够阅读网站的屏幕截图，并尝试使用 phantomjs 和 ASP.NET。

我尝试使用 page.render 将屏幕截图保存到文件中。它作为控制台应用程序工作，但当我从 asp.net 处理程序调用它时就不行了。这可能是由于文件权限，因为简单的应用程序（如 hello.js）工作正常。

没关系，我的偏好不是写入文件，而是处理字节并直接从处理程序返回图像。

我对如何做到这一点有点迷茫。我注意到一个名为 page.renderBase64 的方法，但不知道如何使用它。

目前我正在使用 IHttpHandler。

这里有一个类似的问题，但那个人最终放弃了 phantomjs。我喜欢它的外观，如果可能的话，我想继续使用它。 [使用 C# 运行 Phantomjs 以获取网页快照](https://stackoverflow.com/questions/14048895/running-phantomjs-using-c-sharp-to-grab-snapshot-of-webpage)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-30T11:57:49.520

根据您的最后评论，您可以在 phantom js 文件中执行以下操作：

```
var base64image = page.renderBase64('PNG');
system.stdout.write(base64image); 
```

在 C# 中：

```
 var startInfo = new ProcessStartInfo {
    //some other parameters here
    ...
    FileName = pathToExe,
    Arguments = String.Format("{0}",someParameters),
    UseShellExecute = false,
    CreateNoWindow = true,
    RedirectStandardOutput = true,
    RedirectStandardError = true,
    RedirectStandardInput = true,
    WorkingDirectory = pdfToolPath
    };
    var p = new Process();
    p.StartInfo = startInfo;
    p.Start();
    p.WaitForExit(timeToExit);
    //Read the Error:
    string error = p.StandardError.ReadToEnd();
    //Read the Output:
    string output = p.StandardOutput.ReadToEnd(); 
```

在您的*输出*变量中，您可以读取从 phantomJS 返回的 base64，然后执行您的计划。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-12T20:15:03.167

从这里使用 Phantomjs 的[包装器 nreco wrapper](http://www.nrecosite.com/phantomjs_wrapper_net.aspx)

你可以在这里获取 rastor 的 js：[rastorize](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)

然后 C# 中的以下代码将完成这项工作。

```
var phantomJS=new PhantomJS();
phantomJS.Run("rasterize.js", new[] { "http://google.com","ss.pdf" }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T11:47:11.523

这个问题源于我对 base64 字符串的实际含义缺乏了解。

在 phantomjs 运行的 javascript 文件中，我可以将 base64 图像直接写入控制台，如下所示：

```
var base64image = page.renderBase64('PNG');
console.log(base64image); 
```

在运行 phantomjs 的 c# 代码中，我可以将控制台输出转换回字节并将图像写入响应，如下所示：

```
var info = new ProcessStartInfo(path, string.Join(" ", args));
info.RedirectStandardInput = true;
info.RedirectStandardOutput = true;
info.UseShellExecute = false;
info.CreateNoWindow = true;

var p = Process.Start(info);
p.Start();

var base64image = p.StandardOutput.ReadToEnd();
var bytes = Convert.FromBase64CharArray(base64image.ToCharArray(), 0, base64image.Length);

p.WaitForExit();

context.Response.OutputStream.Write(bytes, 0, bytes.Length);
context.Response.ContentType = "image/PNG"; 
```

这似乎避免了我遇到的文件锁定问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-23T21:00:55.357

使用 CasperJS 和 PhantomJS ，我得到了漂亮的网页照片。

```
var casper = require('casper').create();

casper.start('http://target.aspx', function() {
    this.capture('snapshot.png');
});

casper.run(function() {

    this.echo('finished');
}); 
```

我强烈建议您查看该工具。不过，我仍然不确定如何进行回传..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T08:17:39.193

设置 ProcessStartInfo 对象的“WorkingDirectory”属性以指定文件的保存位置。

# hive - 获取最后一小时的数据

> ID：16165756
> 
> 赞同：2
> 
> 时间：2013-04-23T09:28:34.347
> 
> 标签：hive

我需要有关创建查询的帮助。我有下表。

```
Name(String) | Capacity(String) | Time(BIGINT) 
```

我想得到`Time`最后一小时的行。我怎样才能做到这一点？

我尝试关注但没有奏效。

```
select * 
from table1 
where Time > (unix_timestamp() - 60*60*1000); 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T04:58:57.870

问题解决了。发生这种情况是因为 unix_timestamp() 是以秒为单位给出的，而我没有注意到这一点。如下更改代码有效。

`select * from table1 where Time > (unix_timestamp()*1000 - 60*60*1000);`

谢谢大家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T11:54:18.863

我不认为有一个功能。

一种方法是，您必须在 shell 脚本中从 unix 中花费数小时

```
select * 
from table1 
where Time > ${hiveconf:onehourago}; 
```

将上述代码写入文件

并在 shell 脚本中调用上述文件，如下所示。

通过使用获取 hourfromunix `date -d "1 hour ago" +%Y%m%d%H%M%S`

```
Hive -hiveconf onehourago=$hourfromunix -f filename.hql 
```

# gnuplot - gnuplot 不会处理我的脚本以获得简单的指数总和

> ID：16165757
> 
> 赞同：0
> 
> 时间：2013-04-23T09:28:40.393
> 
> 标签：gnuplot

谁能告诉我，如果我尝试`tuneliranje_1.gp`用 gnuplot 处理这个文件，为什么我不会得到任何输出：

```
set terminal epslatex color colortext size 9cm,5cm
set size 1.5,1.0
set output "tuneliranje_1.tex"

set style line 1 linetype 1 linewidth 3 linecolor rgb "#FF0055"

set grid

set key at graph 1, 0.95
set key samplen 2
set key spacing 2

f(x)=30*exp(2*x)+3*exp(-2*x)

set xtics ("$0$" 0)
set ytics ("$0$" 0)

set xrange [-11:10]
set yrange [-0.5:3]

plot f(x) ls 1 title "$f(x)=30 e^{2x}+3e^{-2x}$" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:38:33.227

我会说，因为您指定的范围内该函数的最小值约为 18 .. 尝试放置`set yrange[0:100]`

# java - 无法获取两个日期之间的记录

> ID：16165759
> 
> 赞同：0
> 
> 时间：2013-04-23T09:28:43.190
> 
> 标签：java, mysql, swing, date, jdatechooser

我的问题是我无法获取两个日期之间的所有记录。

我有两个`JDateChooser`s。当我选择两个日期（例如 '10-apr-2011' 到 '20-apr-2011'）时，我希望这些日期之间的所有记录都显示在我的`JList`. 但我无法在`JList`.

我正在使用mysql数据库。

```
 private void Display(java.awt.event.ActionEvent evt) {

    try 
    { 

        Class.forName("com.mysql.jdbc.Driver");  
        Connection con= 
           (Connection)DriverManager.getConnection(
             "jdbc:mysql://localhost:3306/test","root","ubuntu123");   
        java.util.Date jd =  jDateChooser1.getDate();
        java.util.Date jd1 = jDateChooser2.getDate();

        // PreparedStatement stmt = (PreparedStatement) con.prepareStatement("select date from invoice where date = ?);

        // PreparedStatement pstmt = (PreparedStatement) con.prepareStatement("SELECT date FROM invoice WHERE date BETWEEN ' ' AND ' '");

        PreparedStatement pstmt = (PreparedStatement) con.prepareStatement("SELECT date FROM invoice WHERE date >= '+jd + ' AND date <= '+jd1 + '");

        pstmt.execute();  

        ResultSet rs = pstmt.getResultSet();

        int i =0;
        DefaultListModel listModel = new DefaultListModel();

        while(rs.next())
        {   

            String [] data;
            data = new String[100];
            data [i] = rs.getString("date");
            jList1.setModel(listModel);
            listModel.addElement(data [i]);
            i = i+1;

        }
    } 
    catch (Exception e) 
    {
        System.out.println("2nd catch  " + e);
    }        
} 
```

谁能告诉我我的错误在哪里？提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:34:35.717

由于这是一个`PreparedStatement`你可以尝试：

```
PreparedStatement pstmt = (PreparedStatement) con.prepareStatement("SELECT date FROM invoice WHERE date >= ? AND date <= ?");
pstmt.setDate(1,new java.sql.Date(jd.getTime()));
pstmt.setDate(2,new java.sql.Date(jd1.getTime()));
ResultSet rs = pstmt.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:52:57.400

1.  永远不要创建一个`GUI Objects`内部硬和长时间运行`JDBC`，也不要在内部`try`- `catch`- `finally`，除非那些对象永远不会被创建

2.  `DefaultListModel listModel = new DefaultListModel();`应该创建一个局部变量，然后不需要`XxxListModel`在运行时重新创建一个新的

3.  必须从 中删除所有元素`listModel`，否则 new`Items`将附加到末尾`JList`

4.  `String [] data;`and`data = new String[100];`和`data [i] = rs.getString("date");`inside的定义`while(rs.next()) {`是非常无用的，因为数据库记录是从这个数组中存储的`XxxListModel`，并且可以在其他地方访问以供其他用途使用

5.  `Connection`，`PreparedStatement`并且`ResultSet`应该在`finally block`（`try`- `catch`- `finally`）中关闭，否则这些会在内存中`Objects`停留（并增加） ，`JVM`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T09:35:56.183

您需要更改您的查询。像这样的东西： -

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
String jdStr = sdf.format(jd);
String jd1Str = sdf.format(jd1);
PreparedStatement pstmt = (PreparedStatement) con.prepareStatement("SELECT date FROM invoice WHERE date >= '" + jdStr + "' AND date <= '" + jd1Str + "'"); 
```

以前，在您的查询中，两个参数`jd`&`jd1`没有被追加。此更改现在会将其附加到查询中。问题在于`jd & jd1`未正确附加到查询中。

**注意：-**我添加了一个 SDF，以便您可以将日期格式化为所需的格式并将其附加到查询中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T09:35:59.177

你需要跳出`jList1.setModel(listModel);`循环

```
while(rs.next())
    {   

        String [] data;
        data = new String[100];
        data [i] = rs.getString("date");
        //jList1.setModel(listModel);
        listModel.addElement(data [i]);
        i = i+1;

       }

jList1.setModel(listModel); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T09:38:45.387

您确定 SQL 中的日期和 java.util.Date 中的日期格式相同吗？

尝试使用

```
SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd");
String formattedDate = formatter.format(todaysDate); 
```

检查它们是否相同。

默认情况下，jd 和 jd1 会因 SQL 日期而异[@see SQL Dates](http://www.w3schools.com/sql/sql_dates.asp)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-23T09:40:45.493

这不是正确的使用方式`PreparedStatement`，它已经准备好处理日期，所以你**不应该将它们转换为 String**。您的代码应如下所示：

```
PreparedStatement pstmt = ...
pstmt.setDate(...) 
```

此外，您的查询字符串并**没有真正使用 jd 作为变量**，您误用了 ' 和 "

# css - 使用 ！CSS 属性名称中的（感叹号）

> ID：16165762
> 
> 赞同：4
> 
> 时间：2013-04-23T09:28:56.283
> 
> 标签：css

我已经看到这个使用过一次或两次，其中`!`标记放在属性名称之前。例如：

```
!overflow: hidden; 
```

（另[见此处](http://blog.proto.io/wp-content/themes/richardshepherd-TwentyTenFive-ed29e68/css/publicsite.css)）

谁能阐明它的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:33:53.947

我找不到任何关于它的信息，但它显然是一个黑客。至少 Chrome 不会应用属性名称中带有感叹号的样式。对我来说有趣的是，至少对于我检查的样式，除了正确之外，*另一个*样式表应用了完全相同的样式——所以也许这只是一个直截了当的错误。

# mysql - 如何将表拆分为两个表并使用交叉链接 ID 链接记录

> ID：16165764
> 
> 赞同：0
> 
> 时间：2013-04-23T09:29:00.627
> 
> 标签：mysql, sql, database-design, split

我需要一些帮助来将旧客户数据库拆分为客户和地址

例如：

让我们调用旧表和`TB_old` 2 个新表`new_customer``new_address`

**TB_old**具有以下列：

```
cust_id, firstname, lastname, address, city, postalcode, phone, email, password 
```

**新客户**得到：

```
cust_id(new,A_I), firstname, lastname, phone, email, pass, address_id(link to new_address) 
```

**new_address**得到：

```
address_id(new), address, city, postalcode, cust_id (link to new_customers) 
```

我已经做了什么：

```
INSERT INTO new_customers firstname, lastname, phone etc etc
SELECT TB_old.firstname TB_old.lastname etc etc from TB_old 
```

我被困在哪里：

我坚持将地址插入 new_address，同时使用相对 cust_id 更新它，并使用相对地址更新 new_customer 内部的 address_id。

编辑：额外的图像以使其清楚：

![](https://i.stack.imgur.com/yF7DM.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:44:02.050

第一件事：地址属于客户。考虑到这一点，您可以这样做：

```
INSERT INTO new_customers 
    (cust_id, firstname, lastname, phone, email, password)
SELECT 
    (cust_id, firstname, lastname, phone, email, password)
FROM TB_old;

INSERT INTO new_address
    (address_id, cust_id, address, city, postalcode)
SELECT 
    (null, cust_id, address, city, postalcode)
FROM TB_old; 
```

;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:35:49.927

您需要链接旧密钥和新密钥。最简单的方法：将字段 oldKey 添加到第一个表中，将数据加载到其中（存储旧键），然后填充第二个表，使用旧键进行链接。毕竟 - 删除 oldKey 列。

# mysql - Mysql RLIKE / PREG_MATCH 错误

> ID：16165770
> 
> 赞同：0
> 
> 时间：2013-04-23T09:29:16.487
> 
> 标签：mysql, regex, encoding, character-encoding, rlike

冷有人可以解释为什么这会返回 true：

```
SELECT BINARY 'â' RLIKE '[™]';
SELECT BINARY 'é' RLIKE '[©]'; 
```

可以解决什么问题？这是我的一些错误配置吗？

**更新：**

发现使用`(™|©)`而不是`[™©]`作为第一个解决方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:05:02.590

从[文档](http://dev.mysql.com/doc/refman/5.6/en/regexp.html)中：

> **警告**
> REGEXP 和 RLIKE 运算符以字节方式工作，因此它们不是多字节安全的，并且可能会产生多字节字符集的意外结果。

# linux - 10w socket connect linux net block 如何突破瓶颈

> ID：16165772
> 
> 赞同：1
> 
> 时间：2013-04-23T09:29:23.263
> 
> 标签：linux, node.js, sockets, ubuntu-12.04

我用nodejs写了一个推送服务器，可以支持70w用户长连接。</p>

但是当我像这样启用用户心跳时，</p>

```
 var timeInterval = Math.floor(Math.random() * 1200000;
 setInterval(function()
      client.pingreq();
 },timeInterval); 
```

会有太多的小包阻塞网络，影响消息推送。

我使用 iftop，检查一下，网络速度很慢。

top 命令显示服务器有大量可用内存和 cpu 可供使用。

linux可以配置来改变这个问题吗？

# jquery - 会话未从跨域连接中保存

> ID：16165776
> 
> 赞同：0
> 
> 时间：2013-04-23T09:29:46.497
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, cross-domain

我有一个允许跨域授权的 Asp.Mvc 网站，我需要创建允许连接到我的网站的 js 文件。这个脚本是某种 API，它是从不同站点建立连接所必需的。我在我的本地 IIS 服务器上的简单 HTML 页面上对其进行测试，当它发送登录数据时，用户信息成功保存在 httpContext 中，但在下一次查询时，会话中的用户数据为空。我不知道这是不是真的，但看起来所有查询都在服务器上进行了自己的会话。那么我应该怎么做才能修复跨域连接的会话呢？

UPD。我发现在每个查询的 httpContext 中，Sessions ID 总是不同的，但我仍然不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:33:08.183

当您执行跨域请求时，您永远无法为请求的域/服务器设置会话。域 B 的职责是设置其会话。域 A 永远不能设置会话。

# javascript - 隐藏/显示功能一次只能使用一项？- jQuery

> ID：16165785
> 
> 赞同：1
> 
> 时间：2013-04-23T09:30:17.507
> 
> 标签：javascript, jquery, css

我有两个这样的 jquery 函数：

```
$(document).ready(init); 
  function init() { 
  $(".alphaleft").hover(function (g) { 
  $(".boxy,.yee").show(); 
  }, 
  function (g) { 
  $(".boxy,.yee").hide(); 
  }); 
}

$(document).ready(init); 
  function init() { 
  $(".alpharight").hover(function (h) { 
  $(".tea,.coffee").show(); 
  }, 
  function (h) { 
  $(".tea,.coffee").hide(); 
  }); 
} 
```

但一次只出现一个？就像如果我评论其中一个，另一个工作正常，反之亦然......不知道是什么原因造成的。有什么建议么？拉我的头发一个小时了:(

编辑： http: [//jsfiddle.net/W3TTh](http://jsfiddle.net/W3TTh)这是我的 jfiddle！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:33:08.847

`ready`将函数作为匿名函数传递。

```
$(document).ready(function(){ 
   $(".alphaleft").hover(function (g) { 
    $(".boxy,.yee").show(); 
   }, 
   function (g) { 
    $(".boxy,.yee").hide(); 
   }); 
});

$(document).ready(function () { 
  $(".alpharight").hover(function (h) { 
    $(".tea,.coffee").show(); 
  }, 
  function (h) { 
    $(".tea,.coffee").hide(); 
  }); 
}); 
```

这可以防止由于函数名称相同而发生的冲突。由于您在闭包之外声明函数，因此由于两者之间的共享名称及其全局范围，第二个函数将覆盖第一个函数。

这个[小提琴](http://jsfiddle.net/NfzjH/)演示了如何`init`覆盖该方法。也可以通过重新排列代码来演示：

```
//Init function created  
function init() { 
  $(".alphaleft").hover(function (g) { 
  $(".boxy,.yee").show(); 
  }, 
  function (g) { 
  $(".boxy,.yee").hide(); 
  }); 
}

//Init function overridden
function init() { 
  $(".alpharight").hover(function (h) { 
  $(".tea,.coffee").show(); 
  }, 
  function (h) { 
  $(".tea,.coffee").hide(); 
  }); 
}

//Init function called 2x after being overridden
$(document).ready(init);
$(document).ready(init); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:35:22.773

不需要两个`ready`函数。也不需要调用单独的`init`函数：

```
$(document).ready(function() { 
  $(".alphaleft").hover(function () { 
      $(".boxy,.yee").show(); 
  }, function () { 
      $(".boxy,.yee").hide(); 
  }); 

  $(".alpharight").hover(function () { 
      $(".tea,.coffee").show(); 
  }, function ) { 
      $(".tea,.coffee").hide(); 
  }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:45:58.413

这是因为您正在重新声明该`init`功能。只需将它包装在一个这样的函数中：

```
$(document).ready(init); 
function init() { 
    $(".alphaleft").hover(function (g) { 
        $(".boxy,.yee").show(); 
    }, 
    function (g) { 
        $(".boxy,.yee").hide(); 
    }); 
    $(".alpharight").hover(function (h) { 
        $(".tea,.coffee").show(); 
    }, 
    function (h) { 
        $(".tea,.coffee").hide(); 
    });    
} 
```

这是一个工作示例：http: [//jsfiddle.net/DrYZV/](http://jsfiddle.net/DrYZV/)

# eclipse-rcp - 如何在 Eclipse 4.x 中获取工作区位置

> ID：16165787
> 
> 赞同：0
> 
> 时间：2013-04-23T09:30:20.910
> 
> 标签：eclipse-rcp, eclipse-pde

我需要在 Eclipse 4.x 平台中使用 API 获取工作区的位置。我知道我可以使用

```
ResourcesPlugin.getWorkspace().getRoot().getLocation().toString(); 
```

但我想知道是否有另一种方法可以在没有静态引用的情况下做到这一点`ResourcesPlugin`？例如使用依赖注入..

在此先感谢秦托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T22:45:46.530

来自[Eclipse 维基](http://wiki.eclipse.org/Eclipse4/RCP/Dependency_Injection)：

`@Inject @Named(E4Workbench.INSTANCE_LOCATION) private Location instanceLocation;`

但是，这在我的 LifeCycleManager 中对我不起作用，引发了一个异常，即无法注入 Location 对象。我删除了 @Named 注释并注入了一个有效的 Location 对象：

`@Inject private Location instanceLocation;`

# javascript - 如何在迭代数组的 ng-repeat 中设置双向数据绑定？

> ID：16165788
> 
> 赞同：0
> 
> 时间：2013-04-23T09:30:30.790
> 
> 标签：javascript, angularjs, scope, ng-repeat

我在我的 webapp 中使用了 angularjs，但我不明白如何在 ng-repeat 中将数组传递给 ng-model。这是我的代码

```
<div>
<table class="table table-hover" width="100%">
<tbody>
    <tr ng-repeat="item in items">
        <td width="33%">{{item.name}}</td>
        <td width="66%">
            <input class="input-xlarge" type="text" name="{{item.price}}" value="{{item.price}}" />
        </td>
    </tr>
</tbody>
</table>
<button class="btn btn-success" ng-click="save()">Save</button> 
```

如您所见，保存按钮在表单外部。我想在输入标签中添加一个 ng-model，但它必须是一个数组，因为它位于 ng-repat 内。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:47:40.763

您可以通过在控制器中添加一个看起来像这样的添加函数来做到这一点

```
$scope.add = function(){
  $scope.items.push({price:''})
} 
```

并在旁边添加一个按钮以保存

```
<button ng-click="add()">Add</button> 
```

# php - 使用 SDK 在 Facebook 上发布 wordpress 帖子

> ID：16165790
> 
> 赞同：0
> 
> 时间：2013-04-23T09:30:38.667
> 
> 标签：php, wordpress, variables, post, facebook-javascript-sdk

我想在 facebook 上发布 wordpress 帖子。我使用了 facebook 的 javascript SDK 并使用 save_post 钩子来获取帖子的标题和内容。但是，问题是 save_post 在 php 中，我必须在 javascript 中使用变量，但我无法做到。我什至怀疑我所做的是否正确。

这是我的js代码

```
function streamPublish(name, description, hrefTitle, hrefLink, userPrompt)
{
            showLoader(true);
            FB.ui(
            {
                method: 'stream.publish',
                message: '',
                attachment: {
                    name: name,
                    caption: '',
                    description: (description),
                    href: hrefLink
                },
                action_links: [
                    { text: hrefTitle, href: hrefLink }
                ],
                user_prompt_message: userPrompt
            },
            function(response) {
                showLoader(false);
            });

        }
        function showStream(){
            FB.api('/me', function(response) {

            var fbpost = document.getElementById('posttofb').val();
            alert(fbpost);

            streamPublish(response.name, 'title', 'hrefTitle', 'http://thinkdiff.net', "Share thinkdiff.net");

            });
        } 
```

和我的 php 代码

```
add_action('save_post','save_post_callback');
function save_post_callback($post_id)
{
global $post; 
if ($post->post_type != 'post')
{
    return;
}
else
{
echo"122222222222222";
?>

<div id="posttofb">
<?php
$title=$post->post_title;
?>
</div> 

<?php
echo $post->post_content;
//echo $post->the_title();
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:11:23.993

您将在 id posttofb 写入后执行您的 javascript。

尝试类似：

```
<div id="posttofb">
<?php
$title=$post->post_title;
?>
</div> 
<script>
$(function() { //document.Ready
showStream();
});
</script> 
```

或者仅在这种情况下（将您的 showStream 更改为 showStream(title)）：

```
<script>
$(function() { //document.Ready
showStream(<?=$post->post_title?>);
});
</script> 
```

# matplotlib - 执行 matplotlib.pyplot.subplots() 时出错

> ID：16165793
> 
> 赞同：5
> 
> 时间：2013-04-23T09:30:39.763
> 
> 标签：matplotlib, ipython

我有一个从日志数据创建 png 图像的脚本。它在生产机器上运行良好，但现在在处理这条线时会在新盒子上吐出错误：

```
 fig, ax = plt.subplots(1,1, figsize=(20,14))

AttributeError: 'module' object has no attribute 'subplots' 
```

我怀疑各种模块的版本差异存在问题。有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-18T21:14:56.620

最新版本的 Ipython 没有这个问题。按照@Jay Bosamiya 的建议将其作为答案来解决这个问题。

# jquery - 将选定的类添加到最近的 tr

> ID：16165794
> 
> 赞同：0
> 
> 时间：2013-04-23T09:30:40.277
> 
> 标签：jquery

我创建了一个函数，用于选择 ID 为 selectall 的复选框上的所有复选框。

```
<tr class="">
    <td width="5%" class="center"><input type="checkbox" onclick="" value="0" id="selectall" name="chkRecordId"></td>
</tr>

<tr id="row_21" class="even">
     <td class="center"><input type="checkbox" id="CategoryCheckIn" value="21" class="case" name="data[Category][checkIn][]"></td>
</tr>

<tr id="row_1" class="odd">
    <td class="center"><input type="checkbox" id="CategoryCheckIn" value="1" class="case" name="data[Category][checkIn][]"></td>
 </tr> 
```

像这样。现在我想添加代码以选择所有带有 .case 类的复选框以及将类添加到最近的 tr 'selected'

在复选框选择的情况下，功能运行良好。但是我对向 tr 添加类感到困惑。虽然我已经尝试过我的代码在这里被写下来。如果单击全选，则在 addClass 的情况下会失败。

```
$(function(){
$("#selectall").click(function () {
    $('.case').attr('checked', this.checked).closest("tr").addClass("selected");
});

$(".case").click(function(){
    $(this).closest("tr").toggleClass("selected");
    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }
});

$(".case:checked").each(function() {
    $(this).closest("tr").addClass("selected");
});

}); 
```

我有 id 为“提交”的提交按钮，如果选中任何 checkbox.case，我想检查提交单击，否则返回 false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:53:15.220

我建议如下：

```
$('#selectall').change(function () {
    var thisClosest = $(this).closest('tr'),
        checked = this.checked;
    // selecting the elements by class:
    $('.case')
    // setting the property (not the attribute) to be equal that of #selectall
    .prop('checked', checked)
    // finding the closest tr element of each of those check-boxes
    .closest('tr')
    // adding the closest tr of the #selectall element (cached earlier)
    // then calls the addClass() or removeClass() methods depending on
    // the #selectall being checked (addClass()) or unchecked (removeClass())
    .add(thisClosest)[checked ? 'addClass' : 'removeClass']('selected');
});

$('.case').change(function(){
    $(this).closest('tr')[this.checked ? 'addClass' : 'removeClass']('selected');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/brhMv/2/)。

以上更新为：

```
$('#selectall').change(function () {
    var thisClosest = $(this).closest('tr'),
        checked = this.checked;
    $('.case').prop('checked', checked).closest('tr').add(thisClosest)[checked ? 'addClass' : 'removeClass']('selected');
});

$('.case').change(function () {
    var that = this,
        $that = $(that),
        checked = that.checked,
        $selectall = $('#selectall');
    $that.closest('tr').add($selectall.closest('tr'))[checked ? 'addClass' : 'removeClass']('selected');
    $selectall.prop('checked', false);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/brhMv/3/)。

除了您最初的问题，关于如何`.case`检查提交时检查的任何元素：

```
$('form').submit(function(e){
    if (!$('.case:checked').length) {
        return false;
    }
}); 
```

参考：

*   [`add()`](http://api.jquery.com/add/).
*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`:checked`选择器](http://api.jquery.com/checked-selector/)。
*   [`closest()`](http://api.jquery.com/closest/).
*   [`prop()`](http://api.jquery.com/prop/).
*   [`removeClass()`](http://api.jquery.com/removeClass/).
*   [`submit()`](http://api.jquery.com/submit/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:01:39.910

虽然我的代码有点长，但我找到了完美的解决方案。

```
$("#selectall").click(function () {
    $('.case').attr('checked', this.checked);
    if($('.case').prop('checked'))
        $('.case').closest("tr").addClass("selected");
    else
        $('.case').closest("tr").removeClass("selected");
});

$(".case").click(function(){
    $(this).closest("tr").toggleClass("selected");
    if($(".case").length == $(".case:checked").length) {
        $("#selectall").attr("checked", "checked");
    } else {
        $("#selectall").removeAttr("checked");
    }
});

$(".case:checked").each(function() {
    $(this).closest("tr").addClass("selected");
}); 
```

它运作良好，但如果选中单个复选框，我仍然很困惑在提交时验证？

# c# - 超时已过。在操作完成之前超时时间已过或服务器没有响应。在远程 Windows .net 上工作

> ID：16165799
> 
> 赞同：0
> 
> 时间：2013-04-23T09:31:00.173
> 
> 标签：c#, sql-server, winforms, ado.net

我正在使用 C# windows 应用程序，需要连接 MS SQL 服务器并使用 SP。但是我收到“超时已过期。在操作完成之前超时时间已过或服务器没有响应。” 错误。在远程系统的应用程序上出现此错误。我已经指定了“command.CommandTimeout = 0;” 定时器设置为 5000；我需要在预定时间运行查询/SP。command 是 SqlCommand 对象。但得到相同。

请帮助任何人！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:34:31.017

首先，您必须手动检查是否可以使用 SQLServer Management Studio 连接到数据库。如果是，则必须设置：

```
command.CommandTimeout = 60; 
```

祝你好运！

# sql-server - 创建表后调用插入时出现“无效的列名”错误

> ID：16165803
> 
> 赞同：11
> 
> 时间：2013-04-23T09:31:09.067
> 
> 标签：sql-server, sql-server-2012-express

我正在使用 SSMS 开发 SQL 脚本，它对数据库进行了一些更改：

```
USE MyDatabase;

BEGIN TRANSACTION;

-- some statements

PRINT(N'#1');

IF (EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = N'dbo' AND TABLE_NAME = N'Table1' AND COLUMN_NAME = 'Table2_Id'))
BEGIN
    ALTER TABLE [dbo].[Table1] DROP CONSTRAINT [FK_Table1_Table2_Table2_Id];
    ALTER TABLE [dbo].[Table1] DROP COLUMN [Table2_Id];
    DROP TABLE [dbo].[Table2];

    PRINT(N'Table2 was dropped.');
END

PRINT(N'#2');

IF (NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = N'dbo' AND TABLE_NAME = N'Table2'))
BEGIN
    CREATE TABLE [dbo].[Table2]
    (
        [Id] INT NOT NULL PRIMARY KEY IDENTITY,
        [Number] INT NOT NULL UNIQUE,
        [Name] NVARCHAR(200) NOT NULL,
        [RowVersion] TIMESTAMP NOT NULL
    );
PRINT(N'Table2 was re-created.');
    INSERT INTO [dbo].[Table2]([Number], [Name]) VALUES(-1, N'Default value');
PRINT(N'Default value was inserted in Table2.');
END

-- some statements

COMMIT TRANSACTION; 
```

如果`Table1`有一个名为 的列`Table2_Id`，则数据库有两个表（`Table1`和`Table2`）以及它们之间的外键关系。在这种情况下，我需要：

*   删除外键关系`FK_Table1_Table2_Table2_Id`；
*   删除外键列`Table1.Table2_Id`；
*   下降`Table2`;
*   使用新表模式重新创建`Table2`；
*   在中插入一些默认值`Table2`。

当我尝试执行此脚本时，出现以下错误：

> 消息 207，级别 16，状态 1，第 262 行无效的列名称“数字”。
> 消息 207，级别 16，状态 1，第 262 行无效的列名称“名称”。

看起来 SQL Server 使用旧架构`Table2`（确实没有这些列），但是如果表刚刚使用新架构创建，这怎么可能？

我究竟做错了什么？

服务器版本是 SQL Server 2012 (SP1) - 11.0.3128.0 (X64)。

**更新**。

我添加了`PRINT`调用（参见上面的脚本）。消息窗口中没有任何内容，除了错误消息。所以，脚本没有被执行......这是怎么回事？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T10:45:04.760

SQL Server 尝试编译整个批处理。如果表已经存在，那么它将根据预先存在的定义进行编译。引用新列的语句不会编译，因此批处理永远不会执行。

您需要将使用新定义的语句分组到一个新批次中。如果您在 SSMS 中运行它，只需插入一个`GO`

```
USE MyDatabase;

BEGIN TRANSACTION;

-- some statements

PRINT(N'#1');

IF (EXISTS (SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = N'dbo' AND TABLE_NAME = N'Table1' AND COLUMN_NAME = 'Table2_Id'))
BEGIN
    ALTER TABLE [dbo].[Table1] DROP CONSTRAINT [FK_Table1_Table2_Table2_Id];
    ALTER TABLE [dbo].[Table1] DROP COLUMN [Table2_Id];
    DROP TABLE [dbo].[Table2];

    PRINT(N'Table2 was dropped.');
END

GO

PRINT(N'#2');

IF (NOT EXISTS (SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = N'dbo' AND TABLE_NAME = N'Table2'))
BEGIN
    CREATE TABLE [dbo].[Table2]
    (
        [Id] INT NOT NULL PRIMARY KEY IDENTITY,
        [Number] INT NOT NULL UNIQUE,
        [Name] NVARCHAR(200) NOT NULL,
        [RowVersion] TIMESTAMP NOT NULL
    );
PRINT(N'Table2 was re-created.');
    INSERT INTO [dbo].[Table2]([Number], [Name]) VALUES(-1, N'Default value');
PRINT(N'Default value was inserted in Table2.');
END

COMMIT 
```

否则，您可以在子批次中运行违规行

```
 EXEC(N'INSERT INTO [dbo].[Table2]([Number], [Name]) VALUES(-1, N''Default value'');') 
```

# ios - UIImagePicker 禁用相机缩放

> ID：16165804
> 
> 赞同：4
> 
> 时间：2013-04-23T09:31:12.653
> 
> 标签：ios, objective-c, xcode, uiimagepickercontroller, uigesturerecognizer

我在 UIImagePicker 相机视图顶部添加了带有 UIGestures 的叠加层，并且我需要禁用相机缩放，因为当我用捏合放大或缩小叠加层时它会触发，尤其是当用户将叠加图像缩小太多时。我找不到如何防止这种行为的信息。如果 UIImagePicker 不可能，我需要切换到 AVCaptureSession 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-11T12:51:43.160

我最终通过使用 [ImagePickerController.view addSubView:myOverlayView] 而不是 ImagePickerController.overlayView = myoverlayView 来解决这个问题。希望这对你有帮助。

# android - Android：由于进度对话框，活动已泄漏窗口？

> ID：16165810
> 
> 赞同：4
> 
> 时间：2013-04-23T09:31:30.173
> 
> 标签：android

我正在开发我的第一个 Android 应用程序，我想在用户单击我的应用程序中的登录按钮时显示进度对话框。所以我在应用程序中集成了 asynctask，所有操作（如登录注销）都已成功完成，但问题是成功登录后这给了我错误，如 LoginActivity 由于进度对话框而泄漏了窗口。如何关闭进度对话框并更新 UI。

请参考以下代码并告诉我一些更改

以下是登录活动

```
public class LoginActivity extends SherlockActivity {
.................
@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    sessionmngr = new SessionManager(this);
    //check the user login or not
    if (sessionmngr.isLoggedIn()) {
        Intent checkLoginIntnt = new Intent(this,ProjectFragActivity.class);
        startActivity(checkLoginIntnt);
    }
    setContentView(R.layout.activity_login);
    ........
}
// onclick listener when click on login activity

public void LoginToBookingScape(View v) throws JSONException {

    username = edtTxtUserName.getText().toString();
    userpsw = edtTxtUserPsw.getText().toString();

    if ((username.trim().length() > 0)&&(userpsw.trim().length() > 0)) {

        JsonWebService jsonWebs = new JsonWebService();
        jsonWebs.execute(loginUrl);

    }else {
        ............
    }   
} 
```

以下是在 LoginActivity 中扩展 AsyncTask 的内部类

```
private class JsonWebService extends AsyncTask<String,Void,String> {

    private ProgressDialog dialogLogin;
    @Override
    protected String doInBackground(String... url) {

                httpPost.setEntity(new UrlEncodedFormEntity(params));
                ....
                inStream = httpEntity.getContent();
                .........
                return jsonResp;
    }

    @Override
    protected void onPostExecute(String jsonData) {
        //get string data from doinBackground
        try {
            JSONObject jsonObj = new JSONObject(jsonData);
            String key_login = jsonObj.getString(KEY_LOGIN);

            if (key_login.equalsIgnoreCase("0")) {
                .............

            }else {
                ....
                sessionmngr = new SessionManager(getApplicationContext());

                sessionmngr.createLoginSession(id,jsonObj.getString(KEY_UNAME), 
                        jsonObj.getString(KEY_UEMAIL));

                dialogLogin = ProgressDialog.show(LoginActivity.this, "Bookingscape", 
                        "Please Wait",true);
                dialogLogin.setIcon(R.drawable.icon);
                new Thread(new Runnable() {

                    @Override
                    public void run() {
                        try {
                            Thread.sleep(4000);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }).start();

                Intent inteProj = new Intent(getApplicationContext(),           

                    ProjectFragActivity.class);
                startActivity(inteProj);
                finish();   
            }
        ........
    }
    @Override
    protected void onCancelled() {
        dialogLogin.dismiss();
        dialogLogin = null;
        super.onCancelled();
    }
} 
```

}

我想在这里问一个问题

> 上面的代码是优化和可重用的。

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-23T09:44:43.503

问题是您在不关闭进度对话的情况下转移到新活动。这将导致泄漏窗口错误

我认为您必须在代码中移动`dialogLogin.dismiss();`表单`onCancelled()`块 `onPostExecute`

您必须在参加其他活动之前执行此操作。即之前

```
Intent inteProj = new Intent(getApplicationContext(),ProjectFragActivity.class);
startActivity(inteProj); 
```

这行代码。我认为这将解决您的问题

**一个疑问**：你的 onPreExecute 在哪里？通常我在该块中显示进度代码并在 onPostExecute 中关闭它

通常流程是这样的`onPreExecute-->doInBackground --->onPostExecute`

编辑 ：

onPreExecute：初始化您的 UI 组件（例如：对话框）。在您的情况下`ProgressDialog`出现

doInBackground ：在`onPreExecute`块控制进入这个块之后，这将。这里`ProgressDialog`继续它的工作

onPostExecute ：在所有后台操作之后控制来到这里。在这里你可以关闭你的`ProgressDialog`并转到你的新活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T05:59:42.540

**可能是因为你在写**

```
Intent inteProj = new Intent(getApplicationContext(),           
ProjectFragActivity.class);
startActivity(inteProj); 
```

**在关闭对话框之前，意味着您的对话框仍在显示过程，即使您的活动发生了变化。所以只要把你的**

```
dialogLogin.dismiss();
dialogLogin = null; 
```

**在此之前的行**

```
Intent inteProj = new Intent(getApplicationContext(),           
ProjectFragActivity.class);
startActivity(inteProj); 
```

**那么这个问题就会得到解决。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-03T10:29:01.903

我也有这个问题，这就是造成它的原因。我的应用程序接受输入并将它们添加到 SQLite 数据库。这就是我所拥有的：

```
 public Item doInBackground(String...params) {
       Item item = new Item();
        try {

            item.setItemName(params[0]);
            item.setSupplierPhone(params[1]);
            ...
            databaseHandler.addItem(item);

            //Toast.makeText(mContext, "Item successfully saved.", Toast.LENGTH_SHORT).show();

            databaseHandler.close();

        } catch (SQLiteException e) {
            Toast.makeText(mContext, "Error saving Item!", Toast.LENGTH_SHORT).show();
        }
        return item;
    } 
```

我认为这是因为我试图在执行路径已经存在后显示一个对话框`onPostExecute()`

同样重要的是要注意引发此异常的原因有很多。[这里](https://stackoverflow.com/questions/2850573/activity-has-leaked-window-that-was-originally-added)讨论了很多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T11:25:48.027

在转发到下一个活动之前，您需要关闭对话框。使用：- dialog.dismiss();

# iphone - 如何检测从应用商店更新后首次应用启动，iphone

> ID：16165820
> 
> 赞同：4
> 
> 时间：2013-04-23T09:31:58.703
> 
> 标签：iphone, objective-c, xcode, nsuserdefaults

只有在从应用商店更新应用程序后，我才需要做一些事情。我用 NSUserDefaults 来做，但这对我不好，因为它只在第一次更新后才有效。

帮助

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-23T09:40:16.023

MTMigration项目（MIT 许可证）完全符合您的要求[：](https://github.com/mysterioustrousers/MTMigration)

> 管理只需要在 iOS 应用程序的版本更新上运行一次的代码块。这可能是数据规范化例程、“此版本中的新功能”屏幕或错误修复中的任何内容。

其使用示例：

```
[MTMigration migrateToVersion:@"0.9" block:^{
    // Some 0.9 stuff
}];

[MTMigration migrateToVersion:@"1.0" block:^{
    // Some 1.0 stuff
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T19:58:42.553

```
if ([[NSString stringWithFormat:@"Version %@",[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"]]isEqualToString:@"Version 1.0"])
{
// run your code here
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-23T09:39:40.087

您可以将当前版本与旧版本进行比较，如下所示：

```
[NSString stringWithFormat:@"Version %@",[[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleShortVersionString"]]; 
```

并且`if statement`对于您知道的当前版本 1.1、2.0 .... 等，您可以处理它。

# android - Android 3.0 中接收EditText 无法使用椭圆模式TextUtils.TruncateAt.MARQUEE 错误

> ID：16165823
> 
> 赞同：1
> 
> 时间：2013-04-23T09:32:06.550
> 
> 标签：android

在我的 android xml 布局中编写 EditText 时，我遇到了一个新错误。布局的代码是：

```
 <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:padding="10dip" >

                    <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:text="Full Name"
                        android:textColor="#372c24" />

                    <EditText
                        android:id="@+id/reg_fullname"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="20dip"
                        android:layout_marginTop="5dip"
                        android:imeOptions="actionNext" />

                    <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:text="Email:"
                        android:textColor="#372c24" />

                    **<EditText
                        android:id="@+id/reg_email"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginBottom="20dip"
                        android:layout_marginTop="5dip"
                        android:imeOptions="actionNext" />**

                    <TextView
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:text="Password"
                        android:textColor="#372c24" />

                    **<EditText
                        android:id="@+id/reg_password"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="5dip"
                        android:imeOptions="actionDone" />**

                    <Button
                        android:id="@+id/saveBtn"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:gravity="center"
                        android:imeOptions="actionSend"
                        android:text="LOGIN" />
                </LinearLayout> 
```

错误跟踪是：

```
 Caused by: android.view.InflateException: Binary XML file line #72: Error inflating class android.widget.EditText
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.createView(LayoutInflater.java:596)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:644)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:224)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.app.Activity.setContentView(Activity.java:1777)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at com.bearing.inhouse.DashboardActivity.onCreate(DashboardActivity.java:38)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1700)
04-23 09:11:56.109: E/AndroidRuntime(1692):     ... 11 more
04-23 09:11:56.109: E/AndroidRuntime(1692): Caused by: java.lang.reflect.InvocationTargetException
04-23 09:11:56.109: E/AndroidRuntime(1692):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.view.LayoutInflater.createView(LayoutInflater.java:576)
04-23 09:11:56.109: E/AndroidRuntime(1692):     ... 27 more
04-23 09:11:56.109: E/AndroidRuntime(1692): Caused by: java.lang.IllegalArgumentException: EditText cannot use the ellipsize mode TextUtils.TruncateAt.MARQUEE
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.widget.EditText.setEllipsize(EditText.java:112)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.widget.TextView.<init>(TextView.java:946)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.widget.EditText.<init>(EditText.java:58)
04-23 09:11:56.109: E/AndroidRuntime(1692):     at android.widget.EditText.<init>(EditText.java:54)
04-23 09:11:56.109: E/AndroidRuntime(1692):     ... 30 more 
```

我以前使用过 EditText，但从未收到此错误。我从错误日志中不明白我应该做什么。你之前在代码中发现过这个错误吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T12:49:51.543

我在声明使用的地方找到[了这个链接：](https://code.google.com/p/android/issues/detail?id=7252)

```
android:ellipsize="end"
android:singleLine="true" 
```

这有效：

```
<EditText
       android:id="@+id/titleTxt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@android:color/white"
        android:ellipsize="end"
        android:hint="title"
        android:inputType="text"
        android:singleLine="true"
        android:textColor="@android:color/black"
        android:textSize="@dimen/text_size_normal" /> 
```

希望它对你也一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T12:29:23.610

设置此属性以编辑文本。Elipsize 正在使用禁用的文本编辑：

```
android:lines="1"
android:scrollHorizontally="true"
android:ellipsize="end"
android:singleLine="true"
android:editable="false" 
```

或使用

```
setKeyListener(null); 
```

# python - 如何在前端表单中使用 django-wysihtml5？

> ID：16165825
> 
> 赞同：1
> 
> 时间：2013-04-23T09:32:11.797
> 
> 标签：python, django, wysihtml5, django-wysihtml5

我正在使用[`django-wysihtml5`](http://danir.us/projects/django-wysihtml5)在管理员中获取富文本功能，并且效果很好。

我想知道是否有任何选项可以使用这个 django 库在前端（不仅是管理员）使用的表单中获得相同的功能。也许我们必须在`ModelForm __init__()`方法中指定一个小部件？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T07:31:27.143

[django-wysihtml5](https://github.com/danirus/django-wysihtml5)中的示例项目现在实现了您正在寻找的用例。它使用 bootstrap-wysihtml5 作为公共接口。

完成这项工作的关键文件是：

*   demo/twitter_bootstrap.py：实现 ModelForm 中使用的 django 小部件
*   demo/articles/forms.py：为文章实现 ModelForm

要查看实际演示，请创建一个 virtualenv，git clone 应用程序，然后按照步骤安装[演示站点](https://github.com/danirus/django-wysihtml5#demo-site)。

# c# - WinRT C# - 具有下拉样式的列表框

> ID：16165830
> 
> 赞同：1
> 
> 时间：2013-04-23T09:32:18.700
> 
> 标签：c#, combobox, listbox, styles, windows-runtime

我想用组合框进行多项选择，但我认为这并不容易。这就是为什么我想使用具有下拉样式的列表框，例如组合框。

你有什么想法吗？（组合框上的多选或列表框上的下拉样式）。

谢谢你的时间，

问候。

# sql - 如何提出有效的请求？

> ID：16165837
> 
> 赞同：2
> 
> 时间：2013-04-23T09:32:36.170
> 
> 标签：sql, sql-server

再会。

查询从数据库中的表中选择不同的行：

```
SELECT 
DISTINCT 
f.id_service as f_id_service,
 f.id_city as f_id_city, 
f.name as f_name, 
f.address as f_address, 
f.business as f_business, 
f.web as f_web, 
f.phone as f_phone, 
f.id_firm as f_id_firm, 
p.name as p_name 
FROM Firm f left join Price p on p.id_service=f.id_service AND p.id_city=f.id_city AND p.id_firm=f.id_firm 
```

对于导航，我使用 NOT IN：

```
SELECT 
DISTINCT TOP 20 
f.id_service as f_id_service,
 f.id_city as f_id_city, 
f.name as f_name, 
f.address as f_address, 
f.business as f_business, 
f.web as f_web, 
f.phone as f_phone, 
f.id_firm as f_id_firm, 
p.name as p_name 
FROM Firm f left join Price p on p.id_service=f.id_service AND p.id_city=f.id_city AND p.id_firm=f.id_firm 

WHERE 

f.name 
NOT IN (
SELECT DISTINCT TOP 20 
f.name FROM Firm f 
left join Price p on p.id_service=f.id_service AND p.id_city=f.id_city AND p.id_firm=f.id_firm 
WHERE p.id_city='73041' AND p.include='1' AND p.blocked='0' AND f.blocked='0' AND p.id_group='44' AND p.id_subgroup='266' 
ORDER BY f.name ASC
) 
AND p.id_firm=f.id_firm AND p.id_city='73041' AND p.include='1' AND p.blocked='0' 
AND f.blocked='0' AND p.id_group='44' AND p.id_subgroup='266'
ORDER BY f.name ASC 
```

在最后一个查询中是检查`f.name NOT IN`，但我需要像在第一个查询中一样检查整个字符串，而不仅仅是`f.name`.

这个怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T13:36:02.520

可能这对您有帮助-

```
;WITH cte AS 
(
    SELECT DISTINCT 
          f_id_service = f.id_service
        , f_id_city = f.id_city
        , f_name = f.name
        , f_address = f.[address]
        , f_business = f.business
        , f_web = f.web
        , f_phone = f.phone
        , f_id_firm = f.id_firm
        , p_name = p.name
    FROM Firm f
    LEFT JOIN Price p ON p.id_service = f.id_service AND p.id_city = f.id_city AND p.id_firm = f.id_firm
    WHERE p.id_city = '73041' 
        AND p.[include] = '1' 
        AND p.blocked = '0' 
        AND f.blocked = '0' 
        AND p.id_group = '44' 
        AND p.id_subgroup = '266'
)
SELECT TOP 20   
      f_id_service
    , f_id_city
    , f_name
    , f_address
    , f_business
    , f_web
    , f_phone
    , f_id_firm
    , p_name
FROM cte
WHERE f_name NOT IN (
        SELECT DISTINCT TOP 20 f_name
        FROM cte
        ORDER BY f_name
    )
ORDER BY f_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T22:42:59.617

```
SELECT f.name as f_name, 
max(f.address) as f_address, 
max(f.business) as f_business, 
max(f.web) as f_web, 
max(f.phone) as f_phone, 
max(p.name) as p_name 
FROM Firm f 
left join Price p on p.id_service=f.id_service 
AND p.id_city=f.id_city AND p.id_firm=f.id_firm

WHERE 

f.name NOT IN (
SELECT TOP $numnext 
f.name 
FROM Firm f 
left join Price p on p.id_service=f.id_service AND p.id_city=f.id_city 
AND p.id_firm=f.id_firm
WHERE 
p.id_firm=f.id_firm AND p.id_city='73041' AND p.include='1' AND p.blocked='0' 
AND f.blocked='0' AND p.id_group='44' AND p.id_subgroup='266' 
GROUP BY f.name
ORDER BY f.name ASC
) 

AND
p.id_firm=f.id_firm AND p.id_city='73041' AND p.include='1' AND p.blocked='0'
AND f.blocked='0' AND p.id_group='44' AND p.id_subgroup='266'
GROUP BY f.name
ORDER BY f.name ASC 
```

# css - jQueryUI 模态对话框 - 拖动会导致 Google Chrome 中的位置发生意外变化

> ID：16165838
> 
> 赞同：1
> 
> 时间：2013-04-23T09:32:37.700
> 
> 标签：css, jquery-ui, google-chrome, webforms, jquery-dialog

铬诉 26.0.1410.64

jQuery v. 1.7.1

jQueryUI 诉最新

web 应用程序是使用 asp.net webforms 构建的

*   发生的情况是，当页面位于顶部时，对话框正常打开并且一切都按预期工作。拖动对话框不会导致任何问题。如果页面向下滚动，当试图拖动对话框时，对话框的**顶部**css 属性大致增加了垂直滚动量的值。这仅在 Google Chrome 中发生。

这是打开模式弹出窗口的函数的一部分。

```
 var $dialog = $('<div id="dialogIframe" title="Some title"></div>')
    .html('<iframe id="jqueryIframe" style="border: 0px;" src="' + page + '"
    width="99%" height="99%"></iframe>')
    .dialog({
        autoOpen: false,
        modal: true,
        height: height,
        width: width,
        resizable: false,
        draggable: true,
        buttons: dialog_buttons,
        close: function (event, ui) {
            $('#dialogIframe').remove();
        }
     });

     $dialog.dialog('open'); 
```

*   我正在研究别人的代码。我不确定是什么导致了这种行为。**什么可能导致这种行为？**

编辑：-切换到 jQuery 版本时：1.9.1 它可以按预期在 Google chrome 中运行，但是现在在 IE9 和 FF 最新版本中出现了同样的问题（它们在旧 jQ 版本中正常工作）

编辑2：-我觉得这个问题可能与webforms中的MaintainScrollPositionOnPostback页面属性有关，顺便说一句，我无法以任何传统方式禁用或设置为false：在aspx页面上，同一页面的代码隐藏，母版页，web.config，这太棒了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:27:23.437

在chrome中遇到了同样的问题并解决了

```
 open:function(){
            $('body').addClass('stop-scrolling')
        },

    beforeClose: function( event, ui ) {
        $('body').removeClass('stop-scrolling')
    }, 
```

这对我有用，因为我的对话非常小，但是当对话中的内容多于屏幕上的空间时，您可能会遇到麻烦

CSS类看起来像

```
 .stop-scrolling {
 height: 100%;
 overflow: hidden;
} 
```

并防止身体滚动

# ios - HelloFacebookSample 无法按预期工作，导致 facebook 应用程序崩溃

> ID：16165840
> 
> 赞同：1
> 
> 时间：2013-04-23T09:32:39.457
> 
> 标签：ios, integration, facebook-ios-sdk, sample

我正在使用“facebook-ios-sdk-3.5.2.pkg”中的示例代码（HelloFacebookSample）。

当我尝试发布状态更新时，它失败并显示警报。 ![发布状态更新结果](https://i.stack.imgur.com/IeeSa.png)

带有文本“Beta 功能”、“此功能目前不可用”

而在上述阶段，如果你锁定你的手机并解锁它，tada！脸书应用程序崩溃。

旁注：我的设备正在运行 6.1.2。而且我不明白应用程序何时/如何/何时决定显示本机共享对话框或 facebook 应用程序共享对话框或只是 safari。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:33:19.077

共享对话框（您看到的那个）目前处于有限测试阶段。因此，您可能遇到了 SDK 显示对话框但服务器在您提交共享时将您标记为未处于测试阶段的情况。如果您拥有最新的 Facebook for iOS 应用程序 (6.0+)，则 HelloFacebookSample 应用程序会显示本机共享对话框。

您可以查看此文档以获取有关共享以及如何在您的应用中使用它的更多指示： [https ://developers.facebook.com/docs/howtos/share-dialogs-ios-sdk/](https://developers.facebook.com/docs/howtos/share-dialogs-ios-sdk/)

HelloFacebookSample 应用程序主要展示了共享对话框。

也就是说，如果您现在想成功运行示例，我建议您临时修改：

```
FBAppCall *appCall = [FBDialogs presentShareDialogWithLink:urlToShare
...
}]; 
```

至：

```
FBAppCall *appCall = nil; 
```

在`postStatusUpdateClick:`方法中。这将使用 iOS6 Share Sheet 或使用 Graph API 调用发布状态更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T14:37:11.407

这是一个测试版功能。Facebook 允许您使用以下方式在调试模式下启用 beta 功能：

```
 [FBSettings enableBetaFeature:FBBetaFeaturesOpenGraphShareDialog];
   [FBSettings enableBetaFeature:FBBetaFeaturesShareDialog]; 
```

但看起来 Facebook 刚刚将分享对话框从测试版中移除： [https ://developers.facebook.com/blog/post/2013/05/20/sharing-made-simple-for-ios-apps/](https://developers.facebook.com/blog/post/2013/05/20/sharing-made-simple-for-ios-apps/)

# c# - 在 C# 中填充数组会导致“对象引用未设置为对象的实例”。

> ID：16165842
> 
> 赞同：0
> 
> 时间：2013-04-23T09:32:44.527
> 
> 标签：c#, list, generics

我想制作一些虚拟数据以在我的 asp.net mvc 3 视图中使用。以下代码是控制器的一部分，应该将数据传递给视图。

```
List<KeyValuePair<int, int>> dummyData = new List<KeyValuePair<int, int>>();
                dummyData.Add(new KeyValuePair<int, int>(1,1));
                dummyData.Add(new KeyValuePair<int, int>(1,2));
                dummyData.Add(new KeyValuePair<int, int>(2,1));
                dummyData.Add(new KeyValuePair<int, int>(3,1));
                dummyData.Add(new KeyValuePair<int, int>(4,1));
                dummyData.Add(new KeyValuePair<int, int>(4,2));
                dummyData.Add(new KeyValuePair<int, int>(4,3));
                dummyData.Add(new KeyValuePair<int, int>(4,4)); 
```

顾名思义，这是我的虚拟数据。这背后的想法是，第一个数字代表表格中的行号，第二个数字代表列号。我想以某种方式组合与同一行相关但具有不同列号的记录。为此，我选择使用二维数组：

```
int dummyCount = dummyData.Count;

            List<KeyValuePair<int, int>>[,] dummyArray = new List<KeyValuePair<int, int>>[dummyCount,dummyCount];

            int index1 = -1;
            int index2 = 0;

            for (int i = 0; i < dummyCount; i++)
            {

                int tempColNum = 1;
                if (dummyData[i].Value != tempColNum)
                {
                    dummyArray[index1, index2].Add(dummyData[i]);
                    index2++;
                }
                else
                {
                    index1++;
                    index2 = 0;
                    dummyArray[index1, index2].Add(new KeyValuePair<int, int>(dummyData[i].Key, dummyData[i].Value));
                }
            } 
```

但是当我到达这里时：`dummyArray[index1, index2].Add(new KeyValuePair<int, int>(dummyData[i].Key, dummyData[i].Value));`我从标题中得到错误：`Object reference not set to an instance of an object.`。最初我只尝试过`dummyArray[index1, index2].Add(dummyData[i]);`，但得到了同样的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T09:35:03.267

您的虚拟数组未初始化。所有单元格均为空。您需要在每个单元格中创建列表，如下所示：

```
if (dummyArray[index1, index2] == null) 
  dummyArray[index1, index2] = new List<KeyValuePair<int, int>>() 
```

此外，您的代码可能会出现无效的索引引用。如果在第一个周期

```
if (dummyData[i].Value != tempColNum) 
```

将评估为真，您将尝试从索引 [-1,0] 处的虚拟数组中提取元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:37:05.387

It seems like the both code fragments are not really connected. In the second fragment you create a new dummyArray which only creates the list but not the elements. And you start using the elements in the remainder of the second fragment.

You should add the elements like fragement one between the creation of the list and the usage.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:41:17.387

因为当你调用`dummyArray[index1, index2].Add(new KeyValuePair<int, int>(dummyData[i].Key, dummyData[i].Value));`虚拟数组元素时仍然没有初始化。

您应该检查 null 如下代码：

```
if (dummyArray[index1, index2] == null)
{
     dummyArray[index1, index2] = new List<KeyValuePair<int, int>>();
} 
```

希望这有帮助。

# java - 使用 Spring MVC 在页面中多次提交

> ID：16165843
> 
> 赞同：0
> 
> 时间：2013-04-23T09:32:45.987
> 
> 标签：java, spring, jsp

我正在使用 Spring MVC 实现一个基于 Web 的 Java 应用程序。

我现在正在做的是提供一个页面，允许用户从一组单选按钮中进行选择，并通过单击“提交”按钮以 CSV 格式导出一组数据。

但是，我遇到了一个情况。

用户下载一个 CSV 文件后，无论何时想要下载另一个文件，如果再次单击“提交”按钮，下载过程将不会被触发，并会显示“操作已提交。等待操作完成”的对话框。会出现。

这是我的代码：

```
<form:form action="handle_export?user_id=${userId}" method="post">
                <div>
                    <table>
                        <tr>
                            <td>
                                <input id="set0" type="radio" name="exportType" value="0"/>
                            </td>
                            <td>
                                <label for="set0">dataset0 Export</label>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <input id="set1" type="radio" name="exportType" value="1"/>
                            </td>
                            <td>
                                <label for="set1">dataset1  Export</label>
                            </td>
                        </tr>
                    </table>
                </div>

            <input type="button" class="submit button-1" value="Download" name="bottom_Download" />
    </form:form> 
```

我可以多次触发“提交”按钮吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-27T12:24:52.077

我一直在与黑板作斗争，我已经解决了：

- 从 FORM 中删除“动作” -
在 JS 上创建一个函数，例如：generateCSV() - 函数是这样的：

```
var userid = document.getElementById('userid');
window.open('handle_export?user_id=' + userid); 
```

在 handle_export 上，检索以下值：

```
String userid = request.getParameter("userid");
// ...
// generate and download file 
```

这样，它在新窗口中打开，黑板不会显示“操作已提交。等待操作完成”的对话框。.

我希望这会有所帮助，问候。

# c - 如何将程序的输出显示到文件和控制台（stdout）？

> ID：16165854
> 
> 赞同：3
> 
> 时间：2013-04-23T09:33:18.263
> 
> 标签：c, io-redirection

假设我有一个简单地输出“Hello World”的程序：

```
//DEMO.c
#include<stdio.h>

int main()
{
printf("HELLO World");
} 
```

现在我想将它同时显示到屏幕和文件中`output.txt`。所以我在命令提示符中输入以下命令（我在 Windows XP 上使用 CodeBlocks 并且已将其配置为在命令提示符下工作）：

`demo.exe>>output.txt>>stdout`

它不起作用！请告诉我该怎么做，即如何将我在屏幕上看到的相同内容（当我运行程序时）同时输出到文本文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:41:30.547

您需要下载`tee`适用于 Windows 的命令。`tee`是一个 UNIX/Linux 命令，它将标准输入复制到标准输出并输出到文件。然后，您可以这样做：

```
demo.exe | tee output.txt 
```

[这是`tee`](http://code.google.com/p/wintee/)Windows 的一个端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:28:46.487

```
#include <stdio.h>

#define my_fprintf(fp,...)  do{fprintf(fp, __VA_ARGS__);fprintf(stdout, __VA_ARGS__);}while(0)

int main(int argc, char **argv){
    FILE *fp;

    fp=fopen("output.txt","w");//or filename from argv[1]

    my_fprintf(fp, "hello world by %s\n", argv[0]);

    fclose(fp);

    return 0;
 } 
```

# c++ - 将结构传递给线程

> ID：16165859
> 
> 赞同：1
> 
> 时间：2013-04-23T09:33:36.650
> 
> 标签：c++, c, winapi

我想知道如何将结构传递给线程。我编写了一个示例应用程序，在其中声明了一个结构`main`并尝试将其传递给线程。

这是我的代码：

```
DWORD WINAPI Name1(LPVOID lparam)
{
    data x;
    x.name[15]="Sarah";
    x.DOB="19/10/2007";
    fputs(stdout,name,15);
    fputs(stdout,DOB,15);

    return 0;
}

int main()
{
    struct data
    {
        char name[15];
        char DOB[15];
    };

    HANDLE thread2;
    DWORD threadID2;
    thread2= CreateThread(NULL,0,Name1,(LPVOID *)data,0,&threadID2);

    if(thread2==NULL)
    {
        cout<<"Couldn't Create Thread:("<<endl;
        exit(0);
    }

    return 0;
} 
```

不幸的是，我没有掌握将结构传递给线程的窍门:(如果有人帮助我，我将不胜感激。

我试图改变结构的数据类型来传递它，但是，我想我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T09:40:42.603

您正在将局部变量传递给线程启动函数。一旦变量超出范围，它将被销毁。这意味着当新线程尝试访问它时它可能不存在。您应该通过值传递整数类型或在动态存储（堆）中分配对象。

一旦新线程拥有指向对象的指针，它可能也应该负责销毁它。这一切都取决于您希望如何分配和管理对象的所有权。

```
struct Foo
{
    char name[15];
    char DOB[15];
};

void Start()
{
    Foo *someObject = new Foo();

    CreateThread(NULL, 0, threadFunc, (LPVOID *)someObject, 0, &threadID2);
}

DWORD WINAPI threadFunc(void *v)
{
    Foo *someObject = static_cast<Foo*>(v);

    delete someObject;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T09:41:30.570

如果要将结构传递给线程，则必须在堆上而不是在堆栈上获取该结构，并将其地址传递给线程。我还修复了一些错误......比如字符串复制，等等......

我没有使用任何 typedef，因为您似乎使用的是 C++。

```
struct data{
    char name[15];
    char DOB[15];
};

DWORD WINAPI Name1(LPVOID lparam)
{
    data *x = (data*)lparam;
    strcpy(x->name, "Sarah");
    strcpy(x->DOB, "19/10/2007");
    fputs(stdout, x->name, 15);
    fputs(stdout, x->DOB, 15);

    HeapFree(GetProcessHeap(), 0, x);

    return 0;
}

int main()
{
    HANDLE thread2;
    DWORD threadID2;
    data * x;

    x = HeapAlloc(GetProcessHeap(), 0, sizeof(data));
    thread2= CreateThread(NULL, 0, Name1, (LPVOID)x, 0, &threadID2);
    if(thread2==NULL)
    {
        cout << "Couldn't Create Thread:(" << endl;
        exit(0);
    }

    return 0;
} 
```

# c# - 在构建过程中添加 Web 引用

> ID：16165864
> 
> 赞同：2
> 
> 时间：2013-04-23T09:33:48.030
> 
> 标签：c#, .net, web-reference

我在 Visual Studio 2005 中有一个 C# 解决方案。当我必须为确定的环境构建项目时，我必须更改一个项目中的 Web 引用，从 Visual Studio 中手动删除引用，然后添加一个新的相同的名称，但更改了网址。

我想让这个添加网络参考的手动过程不那么乏味。

我希望在配置管理器中，除了调试和发布配置、开发、预生产和生产配置之外，它们中的每一个都确定与特定环境关联的正确 Web 引用。

我正在考虑创建一个 preBuild 事件（可能是一个 .bat 文件），根据构建配置，可以正确创建 Web 引用。

我不确定如何做到这一点。我对此有一些疑问：

1）我可以创建不同的“app.config”文件，其中的属性

```
<setting name="MyService_serviceagent" serializeAs="String">
      <value>developmentEnvironmentURL</value>
</setting> 
```

会因环境而异，我可以根据所选配置复制正确的 app.config 文件。

这会从网络参考中重新生成 Reference.cs 文件吗？（我猜不是）。即使界面没有改变，这会不会是一个问题，或者如果我只在我想重新生成类时手动重新生成网络引用就足够了？

2）这样做是个坏主意吗？您是否想到任何替代方案，或者当我想构建指向确定环境的解决方案时，是否更容易接受我应该删除并添加相应的 Web 引用？

感谢您阅读：）

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T09:59:04.637

> 当我必须为确定的环境构建项目时，我必须更改一个项目中的 Web 引用，从 Visual Studio 中手动删除该引用，并添加一个具有相同名称的新引用，但更改 url。[...] 我正在考虑创建一个 preBuild 事件，在该事件中可以正确创建 Web 引用。

我认为这不是一个好的或可维护的解决方案。如果所有更改都是 URL，您能解释*为什么*您认为需要重新添加引用吗？为什么不能只更改 web.config 中的服务 URL？

无论如何，如果您必须有两个单独的引用，则将它们都添加，这样每个服务引用都可以有自己的配置。最终，您可以将这些服务引用放在一个单独的库中，您可以从主项目中引用该库。然后在需要您在代码中选择使用哪个实现的服务的项目中（例如，这可能取决于每个项目的环境变量，因此您可以在编译时确定它，或者只是一个配置值，以便选择正确的服务在运行时）。

第三种解决方案可能是不创建引用，而是利用`ClientBase<T>`您在运行时创建代理的位置。

# iphone - 如何用图像画一个完整的圆

> ID：16165868
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:33:54.503
> 
> 标签：iphone, ios, xcode, core-graphics, geometry

我对核心图形很陌生。我需要画一个完整的圆圈。我该怎么做？我目前有一个蒙面圈。

我提到了[这个例子](http://www.thinkandbuild.it/how-to-build-a-custom-control-in-ios/)。

![在此处输入图像描述](https://i.stack.imgur.com/4YQrk.png)

```
//Use the draw rect to draw the Background, the Circle and the Handle 
-(void)drawRect:(CGRect)rect{

    [super drawRect:rect];

    CGContextRef ctx = UIGraphicsGetCurrentContext();

/** Draw the Background **/

    //Create the path
    CGContextAddArc(ctx, self.frame.size.width/2, self.frame.size.height/2, radius, 0, M_PI *2, 0);

//    CGContextFillEllipseInRect(ctx, CGRectMake(self.frame.size.height/2, self.frame.size.width/2, 100, 100));
//    CGContextSetRGBFillColor(ctx, 0.5, 0.5, 0.5, 1.0);

    //Set the stroke color to black
    [[UIColor greenColor]setStroke];

    //Define line width and cap
    CGContextSetLineWidth(ctx, TB_BACKGROUND_WIDTH);
    CGContextSetLineCap(ctx, kCGLineCapButt);

    CGContextDrawPath(ctx, kCGPathStroke);

    UIGraphicsBeginImageContext(CGSizeMake(TB_SLIDER_SIZE,TB_SLIDER_SIZE));
    CGContextRef imageCtx = UIGraphicsGetCurrentContext();

    CGContextAddArc(imageCtx, self.frame.size.width/2  , self.frame.size.height/2, radius, 0, ToRad(self.self.startAngle), 0);

    [[UIColor redColor]set];

    CGContextSetLineWidth(imageCtx, TB_LINE_WIDTH);
    CGContextDrawPath(imageCtx, kCGPathStroke);

    //save the context content into the image mask
    CGImageRef mask = CGBitmapContextCreateImage(UIGraphicsGetCurrentContext());
    UIGraphicsEndImageContext();
    CGContextSaveGState(ctx);
    CGContextClipToMask(ctx, self.bounds, mask);
    CGImageRelease(mask);

    //list of components
    CGFloat components[8] = {
        0.0, 0.0, 1.0, 1.0,     // Start color - Blue
        1.0, 1.0, 1.0, 1.0 };   // End color - Violet

    CGColorSpaceRef baseSpace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(baseSpace, components, NULL, 2);
    CGColorSpaceRelease(baseSpace), baseSpace = NULL;

    //Gradient direction
    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    //Draw the gradient
    CGContextDrawLinearGradient(ctx, gradient, startPoint, endPoint, 0);
    CGGradientRelease(gradient), gradient = NULL;

    CGContextRestoreGState(ctx);

/** Draw the handle **/
    [self drawTheHandle:ctx];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T01:06:23.770

```
CGContextDrawPath(imageCtx, kCGPathFill); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T06:11:18.940

将后组宽度和线宽设置为 140 就可以了！！

```
#define TB_BACKGROUND_WIDTH 140    //The width of the dark background
#define TB_LINE_WIDTH 140          //The width of the active area (the gradient) and the width of the handle 
```

# android - android 4.0及以上，Canvas.clipRect() ，内存泄漏

> ID：16165872
> 
> 赞同：0
> 
> 时间：2013-04-23T09:34:04.417
> 
> 标签：android

有没有遇到过？有人可以给我一个打击如何处理吗？多谢。

在我的游戏中，我使用了大量的Canvas.clipRect()函数，我发现，在android 4.0及以上，游戏运行10分钟后，它的进程被activityManager杀死。我放弃了使用 Canvas.clipRect()，它运行了很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T10:46:50.600

尝试使用 Canvas.clipRegion() 而不是使用 Canvas.clipRect()。这个对我有用。

示例解决方法：

```
public void setClipNoOOM(int left, int top, int right, int bottom, Region.Op op, android.graphics.Canvas canvas) {
    if (op == Region.Op.INTERSECT)
        canvas.clipRect(left, top, right, bottom, op);
    else {
        RectF rectF = new RectF(left, top, right, bottom);
        Matrix m = canvas.getMatrix();
        m.mapRect(rectF);
        Region region = new Region((int)rectF.left, (int)rectF.top, (int)rectF.right, (int)rectF.bottom);
        canvas.clipRegion(region, op);
    }
} 
```

# php - 当我真的期待一个合并的行 MySQL 和 INNER JOIN 时，我得到了 2 行返回

> ID：16165873
> 
> 赞同：0
> 
> 时间：2013-04-23T09:34:07.700
> 
> 标签：php, mysql, inner-join

我有以下 SQL：

```
 $queryString = "
        SELECT 
            c.id,
            c.object,
            c.ref,
            c.title,
            o.value
        FROM 
            organisations c
        INNER JOIN 
            organisationType oT ON
            oT.ref = c.ref 
        INNER JOIN 
            options o ON
            oT.value = o.ref
        WHERE c.ref = '585567'
        ORDER BY 
            title
    "; 
```

*   我的组织表包含有关组织的信息（以下是一个组织）

> id、dateModified、object、ref、title
> 
> 2312, 2013-04-22 17:34:55, {"__attributes":{"item_id":6868447,"external_id":..., 585567, 测试机构

*   我的 organizationType 表包含一个组织的多个条目，因为一个组织可以是多种不同的类型。（以下是分配给上述组织的2种）

> id、dateModified、relativeTable、ref、值
> 
> 5, 2013-04-22 17:34:55, 组织, 585567, 3
> 
> 6, 2013-04-22 17:34:55, 组织, 585567, 2

*   最后，我的选项表包含可供参考的每种类型的一行：

> id、dateModified、relativeTable、ref、值
> 
> 1, 2013-04-22 16:36:59, 组织, 2, 客户
> 
> 2, 2013-04-22 16:36:59, 组织, 3, 合伙人
> 
> 3, 2013-04-22 16:38:27, 组织, 4, 供应商

我希望能够返回一个组织，其类型嵌入到末尾（o.value）

所以我的结果可能是：

```
[1] => stdClass Object
        (
            [id] => 2312
            [object] => ""
            [ref] => "585567"
            [title] => "Test organisation"
            [type] => array( [0] => "Client", [1] => "Vendor" )
        ) 
```

使用我当前的 SQL，我将返回一个包含 2 行的数组，其中包含该行的所有组件的副本，除了已更改的类型。这很好，但并不完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:45:07.817

您不能真正像在 SQL 中那样直接带回子数组。不过，您可以带回所有值的串联字段。像这样的东西： -

```
$queryString = "
                SELECT c.id,
                        c.object,
                        c.ref,
                        c.title,
                GROUP_CONCAT(o.value) AS type
                FROM organisations c
                INNER JOIN organisationType oT ON oT.ref = c.ref 
                INNER JOIN options o ON oT.value = o.ref
                WHERE c.ref = '585567'
                GROUP BY c.id, c.object, c.ref, c.title
                ORDER BY title
    "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:47:05.220

AFAIK。mysql不可能将数组作为字段值返回。您可以通过自己的代码执行此操作，将“order by 1,2,3,4”添加到您的 sql 表达式中，并在 fetch 循环中收集一个数组，将 1-4 列与前一行进行比较。

# java - 无法实例化 GridView 类

> ID：16165880
> 
> 赞同：0
> 
> 时间：2013-04-23T09:34:27.717
> 
> 标签：java, android, xml, gridview, shared-libraries

我想使用 GridView 布局。我的最小和最大 API 值是 8 到 17。

我正在使用android android-support-v13.jar。

我还将 gridlayout_v7 作为库从 SDK 的 extras/support/android/v7/ 文件夹中包含到我的项目中。

**我的布局 XML**

```
<android.support.v7.widget.GridLayout
xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/gridview"
android:layout_width="fill_parent" 
android:layout_height="fill_parent"
android:columnWidth="90dp"
android:numColumns="auto_fit"
android:verticalSpacing="10dp"
android:horizontalSpacing="10dp"
android:stretchMode="columnWidth"
android:gravity="center"
>
</android.support.v7.widget.GridLayout> 
```

**我得到的错误**

无法实例化以下类： - android.support.v7.widget.GridLayout（打开类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。

# javascript - 如何在新添加的表单提交上放置事件侦听器

> ID：16165887
> 
> 赞同：0
> 
> 时间：2013-04-23T09:34:44.510
> 
> 标签：javascript, jquery

我的网页中有一些带有类名的表单`post_reply`

我正在使用以下内容来跟踪表单的提交

```
$(document).ready(function(){
    $(".post_reply").submit(function(event){
       // statements
    });
}); 
```

它有效，但是如果我使用 jquery / javascript 在页面中添加一些新表单，它不会跟踪它们的提交。

我也试过

```
$(document).ready(function(){
    $("#comments").on('submit', 'form.post_reply', function (event) {
      // statements
    });
}); 
```

上面`#comments`是容器 div。但它也不起作用。有什么解决办法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:41:45.670

`.on()`应该管用。但这里有另一种选择：

```
$("body").delegate("form.post_reply", "submit", function() {
  // statements
); 
```

但是该`.on()`方法应该确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T10:22:06.163

通过尝试了这么多方法，最后下面的方法解决了我的问题。

```
$("#comments").on('submit', '.post_reply', function (event) {

}); 
```

感谢所有人的帮助。

# java - Spring Security、Kerberos 扩展和 AD

> ID：16165888
> 
> 赞同：1
> 
> 时间：2013-04-23T09:34:44.570
> 
> 标签：java, active-directory, spring-security, spring-security-kerberos

我正在尝试在我的项目中使用 Kerberos 身份验证。这是我公司的内部服务，我想对用户进行身份验证，并从我们的 Active Directory 中检索用户组。为此，我使用了 Spring Security、Kerberos 扩展和我们公司的 AD。

问题：我可以使用 Kerberos 进行身份验证，但我们在 AD 上的域是“WAN.CORP.COM”。因此，我使用 username@WAN.CORP.COM 获取我的用户，并且我无法在 AD 上询问此过滤器（userPrincipalName 类似于 username@corp.com）。

我的 security.xml 包含：

```
<sec:ldap-user-service id="ldapUserService" server-ref="ldapCorp" user-search-filter="(userPrincipalName={0})" />
<sec:ldap-server id="ldapCorp" url="ldap://ldap.wan.corp.com:389/DC=wan,DC=corp,DC=com" manager-dn="CN=ldap read,OU=CORP,DC=wan,DC=corp,DC=com" manager-password="pass" /> 
```

但是 Spring Security 发送异常，因为它无法检索 user@WAN.CORP.COM...

任何人都可以帮助我吗？我想直接由 Spring Security 制作，如果没有，我想我可以在 DummyUserDetailsS​​ervice 中获取信息，对吗？

非常感谢，对不起我的英语不好......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T11:18:56.803

Spring security 3.1 已经实现了 LDAP / AD auth。

在这里看到它：http: [//static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html#d0e6795](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ldap.html#d0e6795) [http://javarevisited.blogspot.com/2011/11/ldap-authentication -active-directory.html](http://javarevisited.blogspot.com/2011/11/ldap-authentication-active-directory.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T12:53:01.180

您可以提供自己的 UserDetailsS​​ervice 实现，将 LdapUserDetailsS​​ervice 注入其中。

在 loadUserByUsername 方法中，您可以修改用户名，然后使用修改后的用户名调用 LdapUserDetailsS​​ervice 的 loadUserByUsername。

# sql - select count(1) vs select rowcnt from sysindexes 性能和使用？

> ID：16165889
> 
> 赞同：4
> 
> 时间：2013-04-23T09:34:47.600
> 
> 标签：sql, sql-server, performance, sql-server-2008

我在 NET 上读到，使用案例 2 比案例 1 更快地检查表中的行数。所以我对 sys.sysindexes 中的 count(1) 和 rowcnt 进行了性能测试，我发现第二个要好得多。

我有一个问题，当我需要在存储过程或临时查询中计算表中的行数时，在生产代码中使用 CASE 2 是否很好，案例 2 是否有可能失败？

编辑：在这种情况下，表中的行数接近 20000

```
DBCC FREEPROCCACHE
DBCC DROPCLEANBUFFERS

--CASE 1
SELECT count(1) from Sales.Customer c -- 95%

--CASE 2
SELECT rowcnt
from sys.sysindexes s
WHERE id=object_id('Sales.Customer') AND s.indid < 2 -- 5% 
```

![在此处输入图像描述](https://i.stack.imgur.com/1lyZf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:37:36.913

That system table only has the total number of rows in the table. So you cannot use it if you need to count any subset (i.e. have a WHERE clause).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:07:08.257

根据这个[http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/9c576d2b-4a4e-4274-8986-dcc644542a65/](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/9c576d2b-4a4e-4274-8986-dcc644542a65/)它反映了未提交的数据。

我试过这个，这是真的。

当您打开事务时，`count(*)`如果您不使用其中一个快照隔离级别，您将阻塞，否则它将为您提供正确的、已提交的值。

除此之外，它应该没问题，可以处理大量负载等。

# ember.js - 如何为 ember.js 中的嵌套路由创建正确的结构？

> ID：16165892
> 
> 赞同：1
> 
> 时间：2013-04-23T09:34:59.580
> 
> 标签：ember.js, ember-router

我需要创建一个带有路由的应用程序：

/users - 用户列表
/users/123 - 用户信息
/users/123/items - 用户项目列表
/users/123/items/456 - 项目信息

我在这里写了这段代码

```
$(function() {
  var App = window.App = Ember.Application.create({LOG_TRANSITIONS: true});

  App.Router.map(function() {
    this.resource("users", {path: '/users'}, function() {
      this.resource("user", {path: '/:user_id'}, function() {
        this.resource("items", {path: '/items'}, function() {
          this.route("item", {path: '/:item_id'});
        });
      });
    });
  });

  App.Store = DS.Store.extend({
    revision: 11,
    adapter: "DS.FixtureAdapter"
  });

  //ROUTES
  App.UsersIndexRoute = Ember.Route.extend({
    model: function() {
      return App.User.find();
    }
  });
  App.UsersUserIndexRoute = Ember.Route.extend({
    model: function(params) {
      return App.User.find(params.user_id);
    },
    setupController: function(controller, model) {
      controller.set('content', model);
    }
  });

  //DATA
  App.User = DS.Model.extend({
    name: DS.attr('string'),
    items: DS.hasMany('App.Item')
  });
  App.Item = DS.Model.extend({
    name: DS.attr('string')
  });
  App.User.FIXTURES = [
    {
      id: 1,
      name: 'Joe',
      items: [1, 2]
    }, {
      id: 2,
      name: 'John',
      items: [2, 3]
    }
  ];
  App.Item.FIXTURES = [
    {
      id: 1,
      name: 'Item 1',
    }, {
      id: 2,
      name: 'Item 2',
    }, {
      id: 3,
      name: 'Item 3',
    }
  ];
  return true;
}); 
```

和模板：

```
<script type="text/x-handlebars" data-template-name="application">
  <div>
    <h1>ember routes</h1>
    {{outlet}}
  </div>
</script>
<script type="text/x-handlebars" data-template-name="index">
  <h2>Hello from index</h2>
  {{#linkTo 'users'}}users area{{/linkTo}}
</script>
<script type="text/x-handlebars" data-template-name="users">
  <h2>users area</h2>
  {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="users/index">
  <h3>users list</h3>
  {{#each user in controller}}
  {{#linkTo "user" user}}{{user.name}}{{/linkTo}}<br/>
  {{/each}}
</script>
<script type="text/x-handlebars" data-template-name="users/user">
  {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="users/user/index">
  <h4>user {{name}} index</h4>
</script>
<script type="text/x-handlebars" data-template-name="users/user/items">
  <h4>user {{name}} items</h4>
  {{outlet}}
</script> 
```

如果我去 /users ，我会看到一个用户列表 - 没关系。

如果我转到 /users/1，我会在浏览器控制台中看到消息：“已转换为 'users.user.index'”，但未显示模板 'users/user/index' 的内容。

我不明白为什么，因为我有 App.UsersUserIndexRoute

也许我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T10:04:50.970

如果我没记错的话，使用带有模型钩子的`UserIndexRoute`（而不是`UsersUserIndexRoute`- 定义为资源的路由通常没有前缀其父路由的名称）

```
model: function(params) {
  return this.modelFor("user");
} 
```

（和相应的模板）应该可以解决问题。

# javascript - 如何使用 jQuery 更改 CSS 元素的样式

> ID：16165899
> 
> 赞同：0
> 
> 时间：2013-04-23T09:35:23.893
> 
> 标签：javascript, jquery, css

我有以下代码：

```
 $('.signup-form-wrapper').css("style", "display: block");
                $('.login-form-wrapper').css("style", "display: none"); 
```

不知道为什么它不起作用。该元素当前如下所示：

```
 <div class="signup-form-wrapper form-wrapper" style="display: none;"> 
```

我正在尝试将这种样式更改为显示：块，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:37:28.607

您可以将代码更改为：

```
$('.signup-form-wrapper').show(); 
```

> 这大致相当于调用 .css('display', 'block')，除了 display 属性恢复到最初的样子。

来源：[http ://api.jquery.com/show/](http://api.jquery.com/show/)

或者

```
$('.signup-form-wrapper').css({ display: 'block' }); 
```

> .css（属性）
> 
> .css（属性名，值）

来源：[http ://api.jquery.com/css/#css-propertyName-value](http://api.jquery.com/css/#css-propertyName-value)

两者都将显示您的元素并更改样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:36:11.980

试试这个

```
$('.signup-form-wrapper').css("display", "block");
$('.login-form-wrapper').css("display", "none"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:37:51.070

如果您只是在寻找显示和隐藏某些内容，则可以使用较短的功能，例如`.hide()`或`.show()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:44:14.960

`.css()`本身设置`style`元素的。

函数调用语法为：

```
$(elem).css('style-property','style-value'); 
```

将您的代码更改为：

```
$('.signup-form-wrapper').css("display", "block");
$('.login-form-wrapper').css("display", "none"); 
```

或者对于单个元素的多个样式传递一个对象：

```
$(elem).css({'style-property1':'style-value1','style-property2':'style-value2'}); 
```

例如

```
$('.signup-form-wrapper').css({"display": "block", "border":"1px solid red"}); 
```

[JQuery`.css()`文档参考](http://api.jquery.com/css/)

# java - 我可以在 parsys 里面有一个 parsys

> ID：16165901
> 
> 赞同：5
> 
> 时间：2013-04-23T09:35:25.890
> 
> 标签：java, html, css, content-management-system, aem

我的页面中有一个段落系统（parsys），并且在其中我正在拖动一个组件；该组件内部有两个段落系统。所以现在我将在组件中存在的两个段落系统中拖动一个富文本组件。但是，在两个段落系统中拖动富文本组件后，我无法编辑这两个富文本组件，因为它们重叠了。你能告诉我我们是否可以在 parsys 中拥有一个 parsys，并且它是否支持内容创作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T06:26:56.423

是的，可以在 parsys 中有一个 parsys。重叠问题是 CSS 问题，大多数情况下可以通过在组件代码末尾添加以下 div 来解决。

```
<div style="clear:both"></div> 
```

此外，为了防止向您的页面添加额外的 div 样式，这应该只在作者模式下完成：

```
<% if (WCMMode.fromRequest(request) == WCMMode.EDIT) { %>
    <div style="clear:both"></div>
<% } %> 
```

# android - 使用 android 模拟器相机时出现错误 100

> ID：16165906
> 
> 赞同：1
> 
> 时间：2013-04-23T09:35:45.880
> 
> 标签：android, camera

我正在创建使用相机的 Android 应用程序时遇到问题。我用 os 4.0 创建了一个虚拟设备，我想用我的网络摄像头作为摄像头。我第一次在模拟器上打开我的应用程序时，它运行良好，但是，在那之后，应用程序崩溃并出现“错误 100”。我的应用程序针对 os 10。

我已经搜索了解决方法或解决此问题，但我找不到任何关于它的信息。有谁知道解决方案？我自己没有实际的 Android 设备来测试它，但我几乎可以肯定它可以在实际设备上运行。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:40:18.133

`camera`在实例化一个新对象时释放该对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:39:14.110

相机错误 100 -“媒体服务器死亡。在这种情况下，应用程序必须释放相机对象并实例化一个新对象。”

按照 SDK 所说的去做，释放相机对象并创建一个新对象。

[开发者 Android 相机](http://developer.android.com/reference/android/hardware/Camera.html)

也读这个。它可能会对您有所帮助：Droid 的媒体服务器在 camera.takePicture() 上死掉了

# shell - How can I make xargs execute two commands?

> ID：16165915
> 
> 赞同：0
> 
> 时间：2013-04-23T09:36:20.650
> 
> 标签：shell, command-line, syntax, amazon-s3, xargs

I tried this

> s3cmd ls s3://somebucket/data/ | awk '{print $4}' | xargs -I %s s3cmd -v -c s3.cfg cp %s 's3://anotherbucket/data/' && s3cmd -c s3.cfg rm %s -v

it does not work, of course, because the second command (`s3cmd rm`) is not treated as part of the xargs argument...

How can I do it?

Background is that the move operation of the `s3cmd` in my case appears not to delete the source file, so I wanted to replace it with a copy and a delete, which appears to work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:00:57.427

我最终只是调用了 sh （从 xarg 手册页中获取了该提示）并从那里开始工作，如下所示：

> s3cmd ls s3://somebucket/data/ | awk '{打印 $4}' | xargs -n 1 sh -c 's3cmd -v -c s3.cfg cp $0 's3://anotherbucket/data/'; s3cmd -c s3.cfg rm $0 -v';

# wkhtmltopdf - wkhtmltopdf - Even number of pages as output

> ID：16165916
> 
> 赞同：1
> 
> 时间：2013-04-23T09:36:21.467
> 
> 标签：wkhtmltopdf

I'm looking for a way to make sure that the output from wkhtmltopdf always consists of an even number of pages, i.e. adding a blank page at the end of the pdf if the number of pages is uneven. If anyone has a good solutions for this I would be really happy

/J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:40:49.933

一个简单的解决方案是创建 pdf，然后检查页数并在必要时添加一个空页面，例如 itext / itextsharp。猜测页数或长度非常困难。

# sql - 需要在sql中编写递归日期函数吗？

> ID：16165917
> 
> 赞同：1
> 
> 时间：2013-04-23T09:36:22.070
> 
> 标签：sql, sql-server, tsql, recursive-query

我有一张假期表，因为我需要返回最后一个工作日期。

```
Table_holiday

Id Date        Text
1  2013-03-29  Good Friday
2  2013-05-01  Maharashtra day
3  2013-05-02  Holiday 
```

当我执行我的`date_recursive`函数时，它应该检查并返回我的`last_business`日期

`For example`

如果我执行它`@date datetime = '2013-03-29'`应该返回我`last working date '2013-03-28'`，因为这是最后一个工作日期

对 sql 中的新手有任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:47:42.943

请试试：

```
DECLARE @Table_holiday as TABLE(id int, [date] datetime, [Text] nvarchar(50))
insert into @Table_holiday values(1, '2013-03-29', 'Good Friday')
insert into @Table_holiday values(2, '2013-05-01', 'Maharashtra day')
insert into @Table_holiday values(3, '2013-05-02', 'Holiday')

declare @date datetime
set @date ='2013-03-29'

;with T(dt) as
(
    select @date union all
    select T1.[date] from T inner join @Table_holiday T1 on T1.[date]=T.dt-1
)select min(dt)-1 from T 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T09:49:57.720

假设假期表中**没有**的任何日期都是工作日期，您可以向后搜索，直到找到非假期。

```
;with cte(adate) as (
    select @date
    from table_holiday
    where @date = Date
    union all
    select h.Date
    from cte
    join table_holiday h on dateadd(d,-1,cte.adate) = h.Date
)
select isnull((select dateadd(d,-1,min(adate)) from cte), @date); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:47:55.303

```
 select (case when DATEDIFF(day,GETDATE(),'2008-08-05')<2 Then "last
 working date" Else "" END) from Table_holiday 
```

希望它有帮助。

# javascript - Jquery knockout dynamic template not working

> ID：16165920
> 
> 赞同：0
> 
> 时间：2013-04-23T09:36:26.600
> 
> 标签：javascript, jquery, knockout.js, knockout-2.0

I have a view model:

```
function ViewModel() {
    this.applications = ko.observableArray();
    this.templateView = ko.observable("application-grid");
    this.templateToUse = function () {
        return this.templateView();
    }.bind(this);
};
var viewModel = new ViewModel();
ko.applyBindings(viewModel); 
```

I have a list that is binded to the viewModel

```
<ul data-bind="template: { name: templateToUse, foreach: applications }"></ul> 
```

When the page loads, it firs selects the "application-grid" template id.

When i change it first time, `viewModel.templateView('application-list');`, the template changes.

Then, if i change it back, `viewModel.templateView('application-grid');`, the template doesn't change anymore.

I am doing something wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T10:03:42.940

如果要使用淘汰赛模板，则可以在绑定中指定：

```
<ul data-bind="template: { name: templateToUse, foreach: applications, templateEngine: new ko.nativeTemplateEngine() }"></ul> 
```

默认情况下，如果在页面上引用，knout 将使用 jquery 模板。您也可以使用其他模板，有关更多信息，请参阅[文档](http://knockoutjs.com/documentation/template-binding.html)。

# php - Left/Inner join with AND,WHERE, and OR

> ID：16165923
> 
> 赞同：0
> 
> 时间：2013-04-23T09:36:36.400
> 
> 标签：php, sql, join

I have 2 tables:

Friends

```
 ID  |  Profile  |  Check
------+-----------+---------
  int |    int    |   bool 
```

Where `ID` is person who sent original friend request, `Profile` is ID of person request was sent to, and `Check` is 0 = request pending; 1 = request accepted.

Messages

```
 OwnerID  |  ...
-----------+-------
    int    |  ... 
```

Where `OwnerID` is ID of member who wrote the message.

So basically, what I am looking at is first:

select all rows from friends_list table where ID or Profile is equal to the memberID cookie. BUT heres my plight: If I send another user a friend request, then my ID is placed in the ID field and their ID is placed in the Profile field of the friend_list table. But if another user requests a friend request from me, then my ID would go into the Profile field and theirs would go in the ID field.

So, I would have a row where ID = 1, and Profile = 2\. And the next row would be ID = 3 and Profile = 1\. Now, both users with IDs 2 and 3 are friends of mine (ID 1), So I need to show all messages from 1, 2, and 3 (mine and my two friends) where check = 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:47:44.270

我*想*你想要的是这样的：

```
(
    SELECT m.*
    FROM Messages m
    INNER JOIN Friends f ON m.OwnerID = f.ID
    WHERE f.Profile = ?
) UNION (
    SELECT m.*
    FROM Messages m
    INNER JOIN Friends f ON m.OwnerID = f.Profile
    WHERE f.ID = ?
) 
```

您需要查看这两个单独的查询，我认为您不能*仅*使用 s的组合来明智地做到这一点`JOIN`。

假设您使用的是 MySQL，这不应该返回重复的行，因为默认修饰符`UNION`是`DISTINCT`. 其他 RDBMS 引擎可能要求您明确说明这一点或使用其他一些解决方法（例如`GROUP BY`实际消息 ID 上的 a）。

您可能还想在两个查询`m.Check = 1`的子句中添加一个条件`WHERE`，以确保您只收到已接受好友请求的消息。

显然，上面的内容旨在用作准备好的语句，其中两个占位符将替换为相同的数据 - `memberID`cookie。

# jquery - jqueryUI conformation dialog Disappears

> ID：16165928
> 
> 赞同：1
> 
> 时间：2013-04-23T09:36:40.543
> 
> 标签：jquery, forms, jquery-ui, submit

Can someone help with the jQueryUI dialog box that I am trying to get to work for a confirmation yes or no

```
 <script src="/Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>

      <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <script>

        $(function () {

            $("#dialog").dialog({
                autoOpen: false,
                resizable: false,
                height: 240,
                modal: true,
                show: {
                    effect: "blind",
                    duration: 1000
                },
                hide: {
                    effect: "explode",
                    duration: 1000
                },
                buttons: {
                    "Yes": function () {
                        $(this).dialog("close");
                        $('#searchForm').submit();
                    },
                    "No": function () {
                        $(this).dialog("close");
                        return false
                    }
                }
            });
        });
        $(function () {
            $('#searchForm').submit(function () {

                $("#dialog").dialog("open");

            });
        });
</script>

    <div id="dialog" title="Confirm Terms?">
  <p><span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 20px 0;"></span>Click YES to accept the Terms of Use</p>
</div>
       <form action="#" id="searchForm" method="post" name="searchForm">
            <input id="firstname" name="firstname" style="width: 140px;" type="text" value="paul" />
            <input id="surname" name="surname" style="width: 140px;" type="text" value="east" />
            <input id="address" name="address" style="width: 490px;" type="text" value="" />
            <input type="submit" value="Filter" />

                  </form> 
```

Every time I click the submit button the dialog box appears for about 1 second then disappears and submits the form. Please can you point to where I am going wrong

[I have ran it in jsfiddle here](http://jsfiddle.net/DFNET/8/)

thanks Paul

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:53:59.737

该对话框立即消失，因为您的提交功能没有`return false`或没有`preventDefault()`调用。看：

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

如果没有这个，表单提交将在您的对话框显示后自动发生。

**编辑：**

此外，当在对话框 Yes 按钮处理程序中提交表单时，您将再次调用提交函数，这将立即重新显示对话框 - 可能不是您想要的！

在调用表单上的提交之前，您必须存储用户的确认。例如：

```
var reallySubmit = false;

...

buttons: {
    "Yes": function () {
        reallySubmit = true;
        $(this).dialog("close");
        $('#searchForm').submit();
    },

...

$('searchForm').submit(function () {
    if (!reallySubmit) {
        $("#dialog").dialog("open");
        return false;
    }
});

... 
```

# validation - 控制器中的 web2py 验证器

> ID：16165929
> 
> 赞同：1
> 
> 时间：2013-04-23T09:36:44.270
> 
> 标签：validation, web2py

是否可以在控制器中使用像 IS_NOT_EMPTY() 这样的 web2py 验证器？它们似乎是导入的，但在控制器中，但它们根本没有用。调用它们时应该使用哪些参数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T13:05:08.047

验证器通常被指定为`requires`DAL 字段对象的属性，通常在定义模型时。您还可以`requires`在控制器中指定字段的属性（这通常在验证器或其参数是有条件的并且在调用特定控制器操作之前才确定时完成）。手动生成`FORM`对象时，还可以将验证器分配给`requires`表单助手的属性，例如`INPUT`,`SELECT`等。

您也可以直接实例化和调用验证器，尽管这种情况不太常见。为此，首先实例化验证器对象（如果验证器构造函数接受任何参数，则可能传递参数），然后通过传入要验证的单个值来调用该对象。验证器将返回一个 2 元组——第一个元素将是经过验证的值（如果验证器进行转换，则可能进行转换），第二个元素将是要么`None`或错误消息（如果验证失败）。例如：

```
>>> IS_EMAIL()('bademail')
('bademail', 'enter a valid email address')
>>> IS_EMAIL()('goodemail@email.com')
('goodemail@email.com', None) 
```

# c# - RadioButtonList within Repeater within UpdatePanel causing Full Postback

> ID：16165934
> 
> 赞同：0
> 
> 时间：2013-04-23T09:36:57.213
> 
> 标签：c#, asp.net, updatepanel, repeater, autopostback

I have a RadioButtonList with AutoPostBack=true that is within a Repeater. The entire Repeater is surrounded by an Update Panel. However, the RadioButtonList is causing a full postback to occur.

I have tried other scenarios where the UpdatePanel is also within the repeater as well and still get the same issue.

The following code shows the issue.

The first Radio Button is outside of an Update Panel and should cause a full postback. This works correctly.

The second Radio Button is within its own Update Panel and should cause a partial postback. This works correctly.

The third Radio Button is within a Repeater that is within an Update Panel. This should cause a partial postback, however, it is causing a full postback.

The fourth Radio Button is within an Update Panel that is within a Repeater. This should also cause a prtial postback, however, it is causing a full postback.

```
<%@ Page Language="C#" AutoEventWireup="true" %>
<script runat="server">

    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            rptTest1.DataSource = Enumerable.Range(1, 1);
            rptTest1.DataBind();

            rptTest2.DataSource = Enumerable.Range(1, 1);
            rptTest2.DataBind();
        }
    }
</script>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:ScriptManager ID="script1" EnablePartialRendering="true" runat="server" />

    Date1: <%=System.DateTime.Now.ToString() %>
    <asp:RadioButtonList ID="rbl1" AutoPostBack="true" runat="server">
        <asp:ListItem>a</asp:ListItem>
        <asp:ListItem>b</asp:ListItem>
        <asp:ListItem>c</asp:ListItem>
    </asp:RadioButtonList>
    <br /><br />

    <asp:UpdatePanel runat="server" UpdateMode="Conditional">
        <ContentTemplate>

            Date2: <%=System.DateTime.Now.ToString() %>
            <asp:RadioButtonList ID="rbl2" AutoPostBack="true" runat="server">
                <asp:ListItem>a</asp:ListItem>
                <asp:ListItem>b</asp:ListItem>
                <asp:ListItem>c</asp:ListItem>
            </asp:RadioButtonList>
            <br /><br />
        </ContentTemplate>
    </asp:UpdatePanel>

    <asp:UpdatePanel runat="server" id="upd1" UpdateMode="Conditional">
        <ContentTemplate>
            <asp:Repeater ID="rptTest1" runat="server">
                <ItemTemplate>
                    Date3: <%=System.DateTime.Now.ToString() %>
                    <asp:RadioButtonList ID="rbl3" AutoPostBack="true" runat="server">
                        <asp:ListItem>a</asp:ListItem>
                        <asp:ListItem>b</asp:ListItem>
                        <asp:ListItem>c</asp:ListItem>
                    </asp:RadioButtonList>
                    <br /><br />
                </ItemTemplate>
            </asp:Repeater>
        </ContentTemplate>
    </asp:UpdatePanel>

    <asp:Repeater ID="rptTest2" runat="server">
        <ItemTemplate>
            <asp:UpdatePanel runat="server" id="upd2" UpdateMode="Conditional">
                <ContentTemplate>
                    Date4: <%=System.DateTime.Now.ToString() %>
                    <asp:RadioButtonList ID="rbl4" AutoPostBack="true" runat="server">
                        <asp:ListItem>a</asp:ListItem>
                        <asp:ListItem>b</asp:ListItem>
                        <asp:ListItem>c</asp:ListItem>
                    </asp:RadioButtonList>
                    <br /><br />
                </ContentTemplate>
            </asp:UpdatePanel>
        </ItemTemplate>
    </asp:Repeater>

    </div>
    </form>
</body>
</html> 
```

I need to find a way of having an AutoPostBack RadioButton within a repeater that does NOT cause a full postback as the page itself is large and the resulting postback causes a large flicker to the end user.

# c - 使用asn.1生成的源文件时c函数的多重定义

> ID：16165936
> 
> 赞同：0
> 
> 时间：2013-04-23T09:37:02.657
> 
> 标签：c, asn.1

我有三个 .asn 文件。这三个文件被asn.1编译器编译后，每个文件在输出文件夹中都有对应的目录。在每个文件夹中，都有许多由 asn.1 编译器生成的 C 源文件。总有一个.c 文件与.asn 文件同名（扩展名除外，即test.asn 和test.c）。在这个文件中，定义了一些函数；之类`asn_alloc`的`asn_free`

因此，有三个文件实现了`asn_alloc`和`asn_free`功能。我将在我的 C 项目中使用所有生成的 C 文件。

问题是，`asn_alloc`函数是在三个地方定义的。这就是我收到编译器错误的原因：

> 函数的多重定义

我该如何处理这个问题？我认为编辑生成的源文件不是一个好主意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T16:15:48.340

此问题特定于您正在使用的 ASN.1 工具。使用一些 ASN.1 工具（例如[http://www.oss.com](http://www.oss.com)上的工具），您可以在同一编译中包含所有 .asn 文件，以便生成一个所有名称均已消除歧义的 .c 文件，或者您可以在每个编译中使用 -prefix xxx 选项，其中每个 ASN.1 编译的 xxx 不同，从而导致生成的名称以 xxx 为前缀，因此不会发生冲突。

# java - 编写一个合并两个数组列表的方法，交替两个数组列表中的元素

> ID：16165942
> 
> 赞同：10
> 
> 时间：2013-04-23T09:37:09.933
> 
> 标签：java

写一个方法

> 公共静态 ArrayList 合并（ArrayList a，ArrayList b）

合并两个数组列表，两个数组列表中的交替元素。如果一个数组列表比另一个短，则尽可能交替，然后从较长的数组列表中附加剩余的元素。例如，如果 a 是

> 1 4 9 16

b 是

> 9 7 4 9 11

然后合并返回数组列表

> 1 9 4 7 9 4 16 9 11

* * *

我尝试做的是用 if 语句编写一个 for 循环，这样当 i 是偶数 (i%2==0) 时从数组列表 a 和当 i 是奇数。但是，我不确定如何处理一个数组列表可能比另一个更长的事实。有人可以帮我吗？

**编辑**：好的，这是代码（但远非正确）：

```
public static ArrayList<Integer> merge(ArrayList<Integer> een, ArrayList<Integer> twee)
{
    ArrayList<Integer> merged = new ArrayList<Integer>();

    for(int i = 0; i<100; i++)
    {           
        if(i%2!=0)
        {
            merged.add(a.get(i));
        }   
        if(i%2 == 0)
        {
            merged.add(b.get(i));
        }               
    }

    System.out.println(merged);
    return merged;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T09:41:23.943

迭代器似乎最容易做到这一点

```
public static <T> ArrayList<T> merge(Collection<T> a, Collection<T> b) {
    Iterator<T> itA = a.iterator();
    Iterator<T> itB = b.iterator();
    ArrayList<T> result = new ArrayList<T>();

    while (itA.hasNext() || itB.hasNext()) {
        if (itA.hasNext()) result.add(itA.next());
        if (itB.hasNext()) result.add(itB.next());
    }

    return result;
} 
```

没有迭代器：

```
public static <T> ArrayList<T> merge(List<T> a, List<T> b) {
    ArrayList<T> result = new ArrayList<T>();
    int size = Math.max(a.size(), b.size());

    for (int i = 0; i < size; i++) {
        if (i < a.size()) result.add(a.get(i));
        if (i < b.size()) result.add(b.get(i));
    }

    return result;
} 
```

注意，我稍微放宽了方法签名。如果您使用迭代器实现合并，`Collection`（甚至`Iterable`）就可以了。否则，`List`会做。不需要 require`ArrayList`作为方法参数类型

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-23T09:48:50.447

没有迭代器：

```
public static ArrayList merge(ArrayList a, ArrayList b) {
    int c1 = 0, c2 = 0;
    ArrayList<Integer> res = new ArrayList<Integer>();

    while(c1 < a.size() || c2 < b.size()) {
        if(c1 < a.size())
            res.add((Integer) a.get(c1++));
        if(c2 < b.size())
            res.add((Integer) b.get(c2++));
    }
    return res;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-23T09:48:50.853

试试这个：我使用数组实现。

```
public static void main(String[] args) {
    int[] first = { 1, 4, 9, 16 };
    int[] second = { 9, 7, 4, 9, 11 };
    int[] merge = new int[first.length + second.length];
    int j = 0, k = 0, l = 0;
    int max = Math.max(first.length, second.length);
    for (int i = 0; i < max; i++) {
        if (j < first.length)
            merge[l++] = first[j++];
        if (k < second.length)
            merge[l++] = second[k++];
    }
    System.out.println(Arrays.toString(merge));
} 
```

输出：

```
[1, 9, 4, 7, 9, 4, 16, 9, 11] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-23T09:50:02.680

您不需要检查模数，否则您将跳过每个输入列表中的每个第二个元素。

```
public static <E> List<E> merge(List<E> een, List<E> twee) {
    List<E> merged = new ArrayList<E>(een.size() + twee.size());
    List<E> shorter = een.size() <= twee.size() ? een : twee;
    List<E> longer = een.size() > twee.size() ? een : twee;
    for (int i = 0; i < shorter.size(); i++) {
        merged.add(een.get(i));
        merged.add(twee.get(i));
    }
    for (int i = shorter.size(); i < longer.size(); i++) {
        merged.add(longer.get(i));
    }
    return merged;
} 
```

这个通用版本适用于所有类型的列表和通用类型。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-27T06:34:55.060

这是我的解决方案

```
LinkedList<Integer> list3 = new LinkedList<Integer>();

Iterator<Integer> itA = list.iterator();
Iterator<Integer> itB = list2.iterator();

while(itA.hasNext() && itB.hasNext()){
    list3.add(itA.next());
    list3.add(itB.next());
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-06T09:46:35.817

我有同样的情况，下面是我的解决方案：

```
// array list to hold the merged list
ArrayList<Integer> mergedList = new ArrayList<Integer>();

// Get the bigger size
int maxSize = listOne.size() > listTwo.size() ? listOne.size() : listTwo.size();

// Loop thru the list
for( int i = 0; i <= maxSize; i++){
    // We need to check first if index exist then just add it to mergeList
    if( i < listOne.size() ) mergedList.add( listOne.get( i ) );
    // We need to check first if index exist then just add it to mergeList
    if( i < listTwo.size() ) mergedList.add( listTwo.get( i ) );
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T10:07:01.593

试试这个

```
Iterator iterator1 = arr1.iterator();
     Iterator iterator2 = arr2.iterator();
     while (iterator1.hasNext() || iterator2.hasNext()) {
       if(iterator1.hasNext()){
         mergerArr.add(iterator1.next());
       }
       if(iterator2.hasNext()){
         mergerArr.add(iterator2.next());
       }
     } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-05T08:35:13.733

Array1= {1,2,3} Array2= {a,b,c,d,e}

输出= {1, a, 2, b, 3, c, d, e}

公共类 MergeArray {

```
public static void main(String args[])
{
char [] arr1= {'1','2','3'};
char [] arr2= {'a','b','c','d','e'};

int l1= arr1.length;
int l2=arr2.length;

int l3=l1+l2;

char [] arr3=new char[l1+l2];

int i=0;
int j=0;
int k=0;
int m=0;
int r=0;

if(l1<l2)
    r=l1;
else
    r=l2;

while(m<r)
{
    arr3[k++]=arr1[i++];
    arr3[k++]=arr2[j++];
    m++;
}

while(k<l3)
{
    if(l1<l2)
        arr3[k++]=arr2[j++];
    else
        arr3[k++]=arr1[i++];
}

for(int n=0;n<l3;n++)
{
    System.out.print(arr3[n]+" ");
}

} 
```

}

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-15T09:10:25.047

我在 php 中通过以下方式完成了此操作：

```
<?php
    $list1 = array("a","b","c");
    $list2 = array(1,2,3);
    $list3 = array();
    $j=0;
    $k=0;

    for($i=0;$i<6;$i++)
    {
        if($i%2==0)
        {
            $list3[$i]=$list1[$j];
            $j++;
        }

        else
        {
            $list3[$i]=$list2[$k];
            $k++;
        }

        echo $list3[$i]."<br>";
    }
?> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-01-20T19:41:45.693

好的，我的建议是使用 ArrayList：

```
public static void main(String[] args) {
        Scanner in = new Scanner(System.in);
        String[] list1 = in.nextLine().split(",");
        String[] list2 = in.nextLine().split(",");
        ArrayList<String> merged = new ArrayList<>();
        for (int i = 0; i < Math.max(list1.length,list2.length); i++) {
                merged.add(list1[i]);
                merged.add(list2[i]);
        }
        System.out.println(String.join(",", merged));
    } 
```

如果您确定输入只是数字，您可以将代码更改为整数。

# javascript - 如何检测字符串是否为URI

> ID：16165946
> 
> 赞同：0
> 
> 时间：2013-04-23T09:37:15.840
> 
> 标签：javascript, html, regex, file, function

我使用这个函数来检测一个字符串是否是一个 URL：

```
function ValidUrl(str) {
    var pattern = new RegExp('^(https?:\\/\\/)?' + // protocol
    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name
    '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR ip (v4) address
    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path
    '(\\?[;&a-z\\d%_.~+=-]*)?' + // query string
    '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locator
    if (!pattern.test(str)) {
        alert(str + " is not a valid URL.");
        return false;
    } else {
        alert(str + " is a valid URL.");
        return true;
    }
} 
```

但是，我需要查看该字符串是否为 URI、`file://`、`chrome-extension://`&`ftp://`包括在内。

我该怎么做呢？使用 RegExp 完成新手...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:44:13.907

用这个改变连接的第一个字符串：

```
^((https?|file|ftp|chrome-extension):\/\/)? 
```

# php - PHP for loop gives error(internal server error) when run more than 160 times

> ID：16165948
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:37:24.287
> 
> 标签：php, arrays, foreach, internal-server-error

I have an array with around 300 or 400 elements. I am using a `foreach` loop to process every array element, like this:

```
$cnt=0;
foreach($resIds as $resId)
{
  $cnt++;
  //my queries and other code 

} 
```

My problem is that the above code causes an internal server error.

If I put one condition in the loop it's working fine for first 160 loops, like:

```
$cnt=0;
    foreach($resIds as $resId)
    {
      $cnt++;
      if($cnt<=160)
      {
        //my queries and other code 
      }

    } 
```

If I set `$cnt` variable to 161 it will give error of **Internal Server Error**.

Can anyone help me with this?

here is the Code

```
foreach($resIds as $resId)
 {

$cnt++;
if($cnt<=160)
{
    $transRes = $conn->query('select * from bb_users where id = '.$resId.' and deleted=0');
    while($trans = $transRes->fetch())
    {
    $user = $cartObj->getUserInfo($trans['Session_Id']);

$cartRes = $conn->query('select * from bb_cart where Session_Id = "'.$user['Session_Id'].'" and deleted=0');
$cartdetail = '';
$finaltotal = '';
$productregisterRes = $conn->query("Select * from product_register where OrderId = '".$user['OrderId']."'")->fetch();   

while($cart = $cartRes->fetch())
{
    $ProductId = $cart['ProductId'];
    $ProductName = $cart['ProductName'];
    if($cart['Color']!="")
    {
        $freeproductname = stripslashes($productregisterRes['FREEProductName']);            
        $freeproductname = str_replace(",Lady Gaga featuring (Born This Way & Bad Romance)", "", $freeproductname);
        $ProductColor = '['.$cart['Color'].']';
    }
    else
    {
        $freeproductname ="";
        $ProductColor ="";
    }
    $ProductQty = $cart['ProductQty'];
    $ProductPrice = $cartObj->getpriceformat($cart['ProductPrice']);                
    $Discount = $cartObj->getpriceformat($cart['Discount']);        
    $TotalPrice = $cartObj->getpriceformat($cart['TotalPrice']);
    $finaltotal += $cart['TotalPrice'];

    $cartdetail .='<tr>
        <td align="left" width="40%">'.stripdata($ProductName).'<br/><I>'.$freeproductname.'<br/>'.$ProductColor.'</I></td>
        <td align="center" width="15%">$'.$ProductPrice.'</td>

        <td align="center" width="15%">'.$ProductQty.'</td>
        <td align="center" width="15%">$'.$Discount.'</td>
        <td align="right" width="15%" style="padding-right:45px">$'.$TotalPrice.'</td>
      </tr>';
}
$VoucherCode=$crypt->decrypt($user['mpcode']);
$State = getStateName($user['State']);
$Country = getCountryName($user['Country']);

$billingname = stripdata($user['FirstName']).' '.stripdata($user['LastName']);
$billingaddress = stripdata($user['Address1']).'<br>'.stripdata($user['City']).', '.$State.' '.stripdata($user['Zip']).'<br>'.$Country;

$ShippingState = getStateName($user['ShippingState']);
$ShippingCountry = getCountryName($user['ShippingCountry']);

$shippingname = stripdata($user['ShippingFirstName']).' '.stripdata($user['ShippingLastName']);
$shippingaddress = stripdata($user['ShippingAddress1']).'<br>'.stripdata($user['ShippingCity']).', '.$ShippingState.' '.stripdata($user['ShippingZip']).'<br>'.$ShippingCountry;

$email = $user['Email'];
$phone = $user['Phone'];
$DateTime = getDateTime($user['DateTime']);
$afterdiscount = $cartObj->getpriceformat($finaltotal) - ($cartObj->getpriceformat($user['mpcode_discount']) + $cartObj->getpriceformat($user['misc_discount']));   
$misc_discount = $cartObj->getpriceformat($user['misc_discount']); 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:47:32.443

在大多数服务器上，包括 php 页面的“正在运行的脚本”的超时设置非常低。错误 500 可能表示完成所有迭代花费的时间太长，并且 160 可能会达到您的超时。

# opengl - 更新 OpenGL mipmaped 纹理

> ID：16165963
> 
> 赞同：4
> 
> 时间：2013-04-23T09:38:13.127
> 
> 标签：opengl, opengl-4

我无法完全理解 OpenGL 中的纹理更新。假设我使用这样的 mipmap 创建 OpenGL 纹理：

```
 ///.. tex gen and bind here .... ///

        glTexStorage2D(GL_TEXTURE_2D,numMipMapLevels,GL_RGBA8,imageInfo.Width,imageInfo.Height);
        glTexSubImage2D(GL_TEXTURE_2D,0,0,0,Width,Height,GL_BGRA,GL_UNSIGNED_BYTE,data);
        glGenerateMipmap(GL_TEXTURE_2D); 
```

**现在第一个问题：** 这是否意味着，当我想更新包含所有 mipmap 级别的纹理时，我是否必须遍历每个级别并使用适当的 mipmap 尺寸和图像字节调用 glTexSubImage2D？如果答案是 YES，那么我有：

**第二个问题**：如何检索每个 mipmap 维度和数据以传递到纹理中？

或者，我可以只做更新：

```
 glTexSubImage2D(GL_TEXTURE_2D,0,0,0,Width,Height,GL_BGRA,GL_UNSIGNED_BYTE,data); 
```

然后立即重新生成mipmap？

```
 glGenerateMipmap(GL_TEXTURE_2D); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:58:45.917

### 回答第一个问题

是的

### 回答第二个问题

每个 mipmap 级别的宽度和高度正好是它上面的 mipmap 级别的一半。*因此，对于第n*级 mipmap ，维度是*w·2 ^(-n)*和*h·2 ^(-n)*，其中*w*和*h*是第 0 级的大小。

它可以通过回忆移位（类 C 语言中的`>>`and`<<`运算符）是 2 个运算符的力量来轻松编程。所以*`a << n`= a·2 ^n*和*`a >> n`= a·2 ^(-n)*

### 回答第三个问题

是的，但是特定 OpenGL 实现使用的缩小过滤器的质量可能无法满足您的需求。

# ios - 像本机相机应用程序一样执行闪光灯（灯光）

> ID：16165967
> 
> 赞同：0
> 
> 时间：2013-04-23T09:38:26.563
> 
> 标签：ios, objective-c, flash

我怎样才能像原生相机应用程序一样执行闪光灯？我找到了以下代码来打开灯，但我需要拍一张闪光灯。

```
if(self.videoDevice.hasTorch) {
    [self.videoDevice lockForConfiguration:nil];
    [self.videoDevice setTorchModeOnWithLevel: 1.0 error: nil];
    [self.videoDevice unlockForConfiguration];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:44:51.397

试试这个。看起来和你期待的一样

[http://iosdevelopertips.com/camera/flashlight-application-using-the-iphone-led.html](http://iosdevelopertips.com/camera/flashlight-application-using-the-iphone-led.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T09:44:53.667

您必须将 torchLevel 设置在 0.0 到 1.0 之间，然后再设置为 0.0，时间间隔非常小。

```
- (BOOL)setTorchModeOnWithLevel:(float)torchLevel error:(NSError **)outError 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:51:51.603

试试这个代码：

```
- (void)turnOnCamerFlash
{
    if (NSClassFromString(@"AVCaptureDevice") != nil)
    {
        AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

        if ([device hasTorch])
        {
            [device lockForConfiguration:nil];
            [device setTorchMode:AVCaptureTorchModeOn];
            [device unlockForConfiguration];
        }       
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T10:52:29.157

那里似乎没有闪光功能，所以（唯一？）执行闪光的可能性是使用计时器。

```
 - (IBAction)doFlash:(id)sender {
        if(self.videoDevice.hasTorch) {
            flashCounter = 0;
            [NSTimer scheduledTimerWithTimeInterval: 0.1
                                             target:self
                                           selector:@selector(flashLightTicker:)
                                           userInfo:nil
                                            repeats: YES];
        }
    }

    - (void)flashLightTicker:(id)sender {
        [self.videoDevice lockForConfiguration:nil];
        if(flashCounter == 0) {
            [self.videoDevice setTorchModeOnWithLevel: 0.1 error: nil];
        }
        if(flashCounter == 5) {
            [self.videoDevice setTorchMode: AVCaptureTorchModeOff];
        }
        if(flashCounter == 7) {
            [self.videoDevice setTorchModeOnWithLevel: AVCaptureMaxAvailableTorchLevel error: nil];
        }
        if(flashCounter >= 10) {
            [self.videoDevice setTorchMode: AVCaptureTorchModeOff];
            [sender invalidate];
        }
        [self.videoDevice unlockForConfiguration];
        flashCounter++;
    } 
```

# android - Android - 屏幕组件的大小（和名称）

> ID：16165978
> 
> 赞同：-1
> 
> 时间：2013-04-23T09:39:08.183
> 
> 标签：android, wallpaper

我敢肯定这会被问过，但我不知道如何查找它，因为我不知道我正在寻找的东西的名称......

我正在制作动态壁纸，并有一个覆盖*整个*屏幕的画布。在屏幕顶部，有一个包含小图标的栏，我需要知道它占用了多少像素，因为我想避免显示图像的顶部被切掉。这个酒吧叫什么，它有多高？

同样在屏幕底部还有另一个包含更大图标的栏 - 它可以横向滚动。这叫什么，它有多高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T10:07:56.123

经过进一步调查，我看到顶部栏被描述为标题栏、状态栏和通知栏！我仍然不知道哪个是正确的......但我确实找到[了这个](https://stackoverflow.com/questions/12462266/height-of-title-bar-from-a-live-wallpaper?lq=1)问题，它回答了我问题中最重要的部分。

# windows-phone-7.1 - 如何通过stackpanel在Windows Phone项目页面上的中心添加带有长文本的按钮

> ID：16165981
> 
> 赞同：-3
> 
> 时间：2013-04-23T09:39:15.067
> 
> 标签：windows-phone-7.1, windows-phone

我在 windows phone 项目中遇到了一个可怕的问题。我正在设计一个页面中心有两个按钮的页面，这里是 xaml 代码：

```
<StackPanel x:Name="Mainpg00" Visibility="Visible">
            <Button Width="200" HorizontalAlignment="Left" Height="200" Click="Button1_Click" VerticalAlignment="Center">
            <Button.Content>
                <TextBlock TextWrapping="Wrap" Text="Generate Registration OTP"/>
            </Button.Content>
        </Button>

        <Button Width="200" HorizontalAlignment="Right" Height="200" Click="Button2_Click" VerticalAlignment="Center">
            <Button.Content>
                <TextBlock TextWrapping="Wrap" Text="Proceed with OTP"/>
            </Button.Content>
        </Button>
        </StackPanel> 
```

我面临的问题是我无法在页面中心设置按钮。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:52:08.013

如果居中，您的意思是：

![在此处输入图像描述](https://i.stack.imgur.com/ALZEP.png)

然后，将 StackPanel 的 Orientation 属性设置为 Horizo​​ntal。这里有代码：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel x:Name="Mainpg00" Visibility="Visible" Orientation="Horizontal" HorizontalAlignment="Center">
        <Button Width="200" HorizontalAlignment="Left" Height="200" Click="Button1_Click" VerticalAlignment="Center">
            <Button.Content>
                <TextBlock TextWrapping="Wrap" Text="Generate Registration OTP"/>
            </Button.Content>
        </Button>

        <Button Width="200" HorizontalAlignment="Right" Height="200" Click="Button2_Click" VerticalAlignment="Center">
            <Button.Content>
                <TextBlock TextWrapping="Wrap" Text="Proceed with OTP"/>
            </Button.Content>
        </Button>
    </StackPanel>
    </Grid> 
```

否则，如果你想要的是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/zXGi8.png)

然后使用对齐和按钮大小：

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel x:Name="Mainpg00" Visibility="Visible" VerticalAlignment="Center">
        <Button Click="Button1_Click" VerticalAlignment="Center">
            <Button.Content>
                <TextBlock TextWrapping="Wrap" Text="Generate Registration OTP"/>
            </Button.Content>
        </Button>

        <Button Click="Button2_Click" VerticalAlignment="Center">
            <Button.Content>
                <TextBlock TextWrapping="Wrap" Text="Proceed with OTP"/>
            </Button.Content>
        </Button>
    </StackPanel>
    </Grid> 
```

# javascript - JavaScript 数组检查

> ID：16165982
> 
> 赞同：0
> 
> 时间：2013-04-23T09:39:17.680
> 
> 标签：javascript, arrays, dialog, prompt

我将有未知数量的提示对话框。
在一些用户操作后我会得到他们的号码，但我想创建它们，显示它们，最后检查它们中的一些是否是`null(empty)`.
我正在寻找如何做到这一点的想法。
我可以不循环吗？
就像是：

```
arrayName[] = prompt("Enter text");
arrayName[] = prompt("Enter text");
arrayName[] = prompt("Enter text");
arrayName[] = prompt("Enter text"); 
```

然后检查其中一些是否为空？
我可以像在 PHP 和 C# 中那样以简写方式声明数组吗？

```
array[]
array[] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T09:41:49.857

是的，您可以使用 =[] 创建数组

```
var arrayName=[];
arrayName.push(prompt("Enter text"));
arrayName.push(prompt("Enter text"));
arrayName.push(prompt("Enter text"));
arrayName.push(prompt("Enter text"));
arrayName.push(prompt("Enter text"));

for (var i=0;i<arrayNames.length;i++) {
  if (arrayName[i]==null) alert("You did not answer "+(i+1))
} 
```

如果您可以使用循环，那当然更简单。请告诉使用你为什么不想使用循环？

```
var arrayName=[];
for (var i=0;i<unknownNumberOfPrompts;i++) {
  var answer = prompt("Enter text","");
  if (answer) arrayName.push(answer);
}
if (arrayname.length>0) {
  // something was answered
} 
```

# android - 具有可见性的 android 布局 GONE

> ID：16165985
> 
> 赞同：28
> 
> 时间：2013-04-23T09:39:33.300
> 
> 标签：android, view, show-hide

四个视图使用相同的 xml。我只想显示线性布局`view 1`。我输入`android:visibility="gone"`了xml。然后我正在做以下事情`view 1`-

```
LinearLayout layone= (LinearLayout) view.findViewById(R.id.layone);

layone.setVisibility(View.VISIBLE); 
```

但这并没有将可见性设置为可见。

`GONE`一旦在 xml 中声明，就不能显示视图吗？

我不想仅仅通过做来转换逻辑，

```
layone.setVisibility(View.GONE); 
```

在除视图 1 之外的三个视图中的每一个中。

想法或评论？

更新：

我的 xml -

```
<TextView
                android:id="@+id/layone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Previous Page"
                android:textColor="#000000"
                android:textSize="16dp"
                android:paddingLeft="10dp"
                android:layout_marginTop="10dp"
                android:visibility="gone" />
         <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:orientation="horizontal"
            android:padding="10dp"
            android:gravity="center_vertical"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"          
            android:tag="PrevEntries"     
            android:id="@+id/laytwo"
            android:layout_marginTop="10dp"
            android:background="@layout/roundedtext"
            android:visibility="gone" >

            <TextView
                android:id="@+id/laythree"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Previous Page"
                android:textColor="#000000"
                android:textSize="18dp"
                android:gravity="center"
                android:textStyle="bold" />

        </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-23T09:45:43.937

```
<TextView
                android:id="@+id/layone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Previous Page"
                android:textColor="#000000"
                android:textSize="16dp"
                android:paddingLeft="10dp"
                android:layout_marginTop="10dp"
                android:visibility="gone" /> 
```

layone 是一个文本视图。
你弄错了身份证。

```
LinearLayout layone= (LinearLayout) view.findViewById(R.id.laytwo);// change id here

layone.setVisibility(View.VISIBLE); 
```

应该做的工作。

或像这样更改以显示 TextView：

```
TextView layone= (TextView) view.findViewById(R.id.layone);

    layone.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-23T10:15:55.203

通过这样完成：

```
view = inflater.inflate(R.layout.entry_detail, container, false);
TextView tp1= (TextView) view.findViewById(R.id.tp1);
LinearLayout layone= (LinearLayout) view.findViewById(R.id.layone);
tp1.setVisibility(View.VISIBLE);
layone.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-25T04:21:43.017

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/activity_register_header"
    android:minHeight="50dp"
    android:orientation="vertical"
    android:visibility="gone" /> 
```

试试这段代码..对我来说，这段代码有效..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-24T00:15:59.287

Kotlin Style 的方式更简单（示例）：

```
 isVisible = false 
```

完整示例：

```
 if (some_data_array.details == null){
                holder.view.some_data_array.isVisible = false} 
```

# php - 错误：“字段列表”中的未知列“数组”

> ID：16165986
> 
> 赞同：1
> 
> 时间：2013-04-23T09:39:34.017
> 
> 标签：php, mysql, xampp

尝试执行该过程时出现错误：“字段列表”中的“未知列”“数组”。我还是 php 新手，所以我想知道我的编码有什么问题。

这是首先编码。

```
<?php
include("dbconnect.php");

$q = mysql_query("SELECT bachok_qtt FROM bachok WHERE bachok_type = 'pants' ");
if(is_resource($q) and mysql_num_rows($q)>0)
{
    $r = mysql_fetch_array($q);
    $r["bachok_qtt"];
}

$w = mysql_query("SELECT bachok_qtt FROM bachok WHERE bachok_type = 'clothes' ");
if(is_resource($w) and mysql_num_rows($w)>0)
{
    $s = mysql_fetch_array($w);
    $s["bachok_qtt"];
}       

$e = mysql_query("SELECT stock_qtt FROM stock WHERE stock_type = 'pants' ");
if(is_resource($e) and mysql_num_rows($e)>0)
{
    $a = mysql_fetch_array($e);
    $a["stock_qtt"];
}    

$t = mysql_query("SELECT stock_qtt FROM stock WHERE stock_type = 'clothes' ");
if(is_resource($t) and mysql_num_rows($t)>0)
{
    $b = mysql_fetch_array($t);
    $b["stock_qtt"];
}    

if ($r < $a)
{
    if($s < $b)
    {
        $sql1 = "UPDATE stock SET stock_qtt = stock_qtt - $r  WHERE stock_type = 'pants' ";
        $sql2 = "UPDATE stock SET stock_qtt = stock_qtt - $s  WHERE stock_type = 'clothes' ";

        $result1 = mysql_query($sql1) or die ("Error: " . mysql_error());
        $result2 = mysql_query($sql2) or die ("Error: " . mysql_error());

        if($result1)
        {
            if($result2)
            {
            echo "Successful";
            echo "<br>";
            echo "<a href='admin2.php'>Back to main page</a>";
            }
        }
        else 
        {
            echo "ERROR";
        }
    }
}
else
{
    echo "Not enough stock";
    echo "<br>";
    echo "<a href='admin2.php'>Back to main page</a>";
}

?> 
```

那么，为什么它在执行时会抛出未知的列数组。我是否正确使用了 MySQL_fetch_array()？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:41:39.707

问题来了。。

```
$sql1 = "UPDATE stock SET stock_qtt = stock_qtt - $r  WHERE stock_type = 'pants' ";
$sql2 = "UPDATE stock SET stock_qtt = stock_qtt - $s  WHERE stock_type = 'clothes' "; 
```

`$r`和都是`$s`数组。

我想你正在尝试这样做..

```
$r = mysql_fetch_array($q);
$r = $r["bachok_qtt"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T09:44:25.087

您的问题是您定义`$r`为一个数组，然后尝试在字符串中使用它。查看您的代码，我实际上怀疑您希望将值分配给`$r["bachok_qtt"]`变量，然后在查询中使用它。

例如下面的代码不做任何事情：

```
$r["bachok_qtt"]; 
```

您应该按如下方式更新您的代码：

```
$q = mysql_query("SELECT bachok_qtt FROM bachok WHERE bachok_type = 'pants' ");
if(is_resource($q) and mysql_num_rows($q)>0)
{
    $r = mysql_fetch_array($q);
    $bachok_qtt = $r["bachok_qtt"];
}

$w = mysql_query("SELECT bachok_qtt FROM bachok WHERE bachok_type = 'clothes' ");
if(is_resource($w) and mysql_num_rows($w)>0)
{
    $s = mysql_fetch_array($w);
    $bachok2 = $s["bachok_qtt"];
} 
```

然后你的SQL如下：

```
$sql1 = "UPDATE stock SET stock_qtt = stock_qtt - $bachok_qtt  WHERE stock_type = 'pants' ";
$sql2 = "UPDATE stock SET stock_qtt = stock_qtt - $bachok2  WHERE stock_type = 'clothes' "; 
```

还应该通知您，该`mysql_*`函数系列现在正在弃用，并且很快就会失效。与其在新代码中使用它们，不如研究[MySQLi](http://php.net/manual/en/book.mysqli.php)或[PDO](http://php.net/manual/en/book.pdo.php)的使用。它们不仅带来了长寿的好处，而且还消除了使用`mysql_*`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T09:57:42.800

给你，我修正了你的错误。尝试这个

```
 <?php
 include("dbconnect.php");

 $q = mysql_query("SELECT bachok_qtt FROM bachok WHERE bachok_type = 'pants' ");
 if(is_resource($q) and mysql_num_rows($q)>0)
 {
  $r = mysql_fetch_array($q);

  }

 $w = mysql_query("SELECT bachok_qtt FROM bachok WHERE bachok_type = 'clothes' ");
 if(is_resource($w) and mysql_num_rows($w)>0)
 {
  $s = mysql_fetch_array($w);

 }       

 $e = mysql_query("SELECT stock_qtt FROM stock WHERE stock_type = 'pants' ");
 if(is_resource($e) and mysql_num_rows($e)>0)
 {
  $a = mysql_fetch_array($e);

 }    

 $t = mysql_query("SELECT stock_qtt FROM stock WHERE stock_type = 'clothes' ");
 if(is_resource($t) and mysql_num_rows($t)>0)
 {
 $b = mysql_fetch_array($t);

 }    

 if ($r["bachok_qtt"] < $a["stock_qtt"])
 {
 if($s["bachok_qtt"] < $b["stock_qtt"])
 {
    $sql1 = "UPDATE stock SET stock_qtt = stock_qtt - '".$r["bachok_qtt"]."'  WHERE stock_type = 'pants' ";
    $sql2 = "UPDATE stock SET stock_qtt = stock_qtt - '".$s["bachok_qtt"]."'  WHERE stock_type = 'clothes' ";

    $result1 = mysql_query($sql1) or die ("Error: " . mysql_error());
    $result2 = mysql_query($sql2) or die ("Error: " . mysql_error());

    if($result1)
    {
        if($result2)
        {
        echo "Successful";
        echo "<br>";
        echo "<a href='admin2.php'>Back to main page</a>";
        }
    }
    else 
    {
        echo "ERROR";
    }
 }
 }
 else
 {
 echo "Not enough stock";
 echo "<br>";
 echo "<a href='admin2.php'>Back to main page</a>";
 }

  ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T09:53:24.750

我想你可以看看`$r["bachok_qtt"];` 也许你想说的话`$r = $r["bachok_qtt"];`

# expandablelistview - ExpandableListView 使用 BaseExpandableListAdapter 扩展但从 Sqlite DB 示例中读取

> ID：16165991
> 
> 赞同：0
> 
> 时间：2013-04-23T09:39:57.257
> 
> 标签：expandablelistview, simplecursoradapter, expandablelistadapter

资深极客。

我想请求一个简单但完全有效的示例，说明如何在从 BaseExpandableListAdapter 扩展的同时实现 ExpandableListView 然而从 Sqlite 数据库中读取数据。

我已经对这个问题进行了研究和实验（请参见[此处](https://stackoverflow.com/questions/16107985/expandable-listview-with-2-textviews-in-grouprow-xml)），但是在我能够在标题中显示一些数据的地方取得的成功很少，尽管所有组标题的重复值相同。子项也不显示。

使用 BaseExpandableListAdapter 进行扩展的原因是为组标题提供自定义布局。SQLite 访问的原因自然是因为那是我的数据存储的地方。

到目前为止，在网上搜索到的所有示例都使用 SimpleCursorTreeAdapter 或 CursorTreeAdapter 作为基于 DB 的应用程序中的扩展程序，或者在使用的数据位于 ArrayLists 中时仅使用 BaseExpandableListAdapter。

以下是迄今为止的实验。（使用此代码，只有组标题一遍又一遍地填充相同的数字。子项不会出现）

```
public class ExpandableListViewAdapterCustom extends BaseExpandableListAdapter {
    protected Activity currentActivity;
    public ExpandableListViewAdapterCustom(Activity callingActivity){
    this.currentActivity = callingActivity;
    }

    private Cursor mGroupsCursorLocal ;
    private Cursor mChildCursor;
    private Context ctx;
    private int groupItem;
    private int childItem;
    private String[] fieldsToUseFromGroupCursor;
    private int[] screenTextsToMapGroupDataTo;
    private String[] fieldsToUseFromChildCursor;
    private int[] screenTextsToMapChildDataTo;

    public ArrayList<String> tempChild;
    public LayoutInflater minflater;
    public Activity activity;
    public int intGroupTotal;

    public void setCurrentActivity(Activity activity) {
       this.activity = activity;
    }

    public void setCtx(Context ctx) {
       this.ctx = ctx;
    }

     public void setGroupItem(int groupItem) {
         this.groupItem = groupItem;
      }

    public void setChildItem(int childItem) {
        this.childItem = childItem;
    }

    public Activity getCurrentActivity() {
        return currentActivity;
    }

     public Cursor getmGroupsCursorLocal() {
        return mGroupsCursorLocal;
      }

    public Context getCtx() {
        return currentActivity.getBaseContext();
    }

    public void setmGroupsCursorLocal(Cursor mGroupsCursor) {
        this.mGroupsCursorLocal = mGroupsCursor;
    }

    public ExpandableListViewAdapterCustom(Cursor mGroupsCursor,
                                       Activity activity,
                                       int groupItem,
                                       int childItem,
                                       String[] fieldsToUseFromGroupCursor,
                                       int[] screenTextsToMapGroupDataTo,
                                       String[] fieldsToUseFromChildCursor,
                                       int[] screenTextsToMapChildDataTo) {

        DatabaseRoutines db = new DatabaseRoutines(activity);

        setmGroupsCursorLocal(mGroupsCursor);
        mGroupsCursorLocal = db.fetchGroup();
        activity.startManagingCursor (mGroupsCursor);
        mGroupsCursorLocal.moveToFirst();

        mChildCursor=db.fetchChildren(mGroupsCursorLocal.getColumnIndex("Year"));
        mChildCursor.moveToFirst();
        activity.startManagingCursor(mChildCursor);

        setCtx(activity);
        setCurrentActivity(activity);

        }

        public void setInflater(LayoutInflater mInflater, Activity act) {
        this.minflater = mInflater;
        activity = act;
        }

        @Override
        public Object getChild(int groupPosition, int childPosition) {
           return null;
        }

        @Override
        public long getChildId(int groupPosition, int childPosition) {
          return 0;
        }

        @Override
        public View getChildView(int groupPosition, 
            int childPosition,boolean         
            isLastChild, 
            View convertView, 
            ViewGroup parent) {
           View v = convertView;
           if (v == null) 
        {
        LayoutInflater inflater = 
       (LayoutInflater)     ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);            
       v = inflater.inflate(R.layout.exp_listview_childrow, parent, false);
        }

        TextView txtMonth = (TextView) v.findViewById(R.id.txtMonth);
        TextView txtMonthAmountSent = (TextView)
        v.findViewById(R.id.txtMonthAmountSentValue);
        TextView txtMonthReceived = (TextView)
        v.findViewById(R.id.txtMonthAmountReceivedValue);
        txtMonth.setText(mChildCursor.getString(mChildCursor.getColumnIndex("Month")));

    txtMonthAmountSent.setText
   (mChildCursor.getString(mChildCursor.getColumnIndex("TotalSent")));
    txtMonthReceived.setText

    (mChildCursor.getString(mChildCursor.getColumnIndex("TotalReceived")));
    return v;
     }

    @Override
    public int getChildrenCount(int groupPosition) {
        return (mChildCursor.getCount());
       }

    @Override
     public Object getGroup(int groupPosition) {
     return null;
    }

    @Override
    public int getGroupCount() {
    return mGroupsCursorLocal.getCount();
    }

    @Override
    public void onGroupCollapsed(int groupPosition) {
    super.onGroupCollapsed(groupPosition);
    }

    @Override
     public void onGroupExpanded(int groupPosition) {
    super.onGroupExpanded(groupPosition);
    }

    @Override
    public long getGroupId(int groupPosition) {
    return 0;
    }

    @Override
    public View getGroupView(
       int groupPosition, 
       boolean isExpanded,
       View convertView,     
       ViewGroup parent) 
     {
         View v = convertView;
         if (v == null) {
        LayoutInflater inflater =  
        (LayoutInflater)  ctx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = inflater.inflate(R.layout.exp_listview_groupheader, parent, false);
       }

       TextView txtYear = (TextView) v.findViewById(R.id.txtYearValue);
       TextView txtAmountSent = (TextView) v.findViewById(R.id.txtAmountSentValue);
       TextView txtAmountRecieved = (TextView) 
       v.findViewById(R.id.txtAmountReceivedValue);

       txtYear.setText(mGroupsCursorLocal.getString(
       mGroupsCursorLocal.getColumnIndex("Year")));

       txtAmountSent.setText(
       mGroupsCursorLocal.getString(mGroupsCursorLocal.getColumnIndex("TotalSent")));

       txtAmountRecieved.setText(
      GroupsCursorLocal.getString(mGroupsCursorLocal.getColumnIndex("TotalReceived")));
      return v;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int groupPosition, int childPosition) {
      return false;
    }

} 
```

数据库代码是这样的

```
public Cursor fetchGroup() {
    SQLiteDatabase db = this.getReadableDatabase();  //if memory leaks check here
        String query = "SELECT DISTINCT MIN(ID) AS id, 
    Year, SUM(SentAmount) AS    TotalSent, SUM(ReceivedAmount) AS TotalReceived 
     FROM  MyTbl GROUP BY Year ORDER BY Year DESC ";
      return db.rawQuery(query, null);}

public Cursor fetchChildren(int Yr) {
    SQLiteDatabase db = this.getReadableDatabase(); //if memory leaks check here
    String query = "SELECT  MIN(ID) AS id, 
    Year, Month, SUM(SentAmount) AS TotalSent, 
     SUM(ReceivedAmount) AS TotalReceived        
     FROM  MyTbl Where Year= "+ Yr +"   GROUP BY Year, 
     Month ORDER BY Year DESC, Month DESC";
    return db.rawQuery(query, null);
   } 
```

使用以下方法从主要活动调用代码

```
 ExpandableListView elv = (ExpandableListView)    

    findViewById(R.id.expandableListView);
       ExpandableListAdapter mAdapter = new 
       ExpandableListViewAdapterCustom(mGroupsCursor,    
       MyActivity.this,
            R.layout.exp_listview_groupheader,// Your row layout   for a group
            R.layout.exp_listview_childrow, // Your row layout for a child
            new String[] { "Year",
            "TotalSent",
            "TotalReceived" },// Field(s) to use from group cursor       
            new int[] {R.id.txtYearValue,
                       R.id.txtAmountSentValue,
                       R.id.txtAmountReceivedValue },// Widget ids to put group data                        
                       into new String[] { "Year","Month", 
                       "TotalSent", 
                       "TotalReceived" },  // Field(s) to use from child cursors  new  
                        int[] {R.id.txtMonthValue,
                        R.id.txtMonthAmountSentValue,
                        R.id.txtMonthAmountReceivedValue});// Widget ids to put child d   
                        data into
                        elv.setClickable(true);
                        elv.setAdapter(mAdapter); // set the 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-04T12:12:29.397

在将近两周没有回答之后，我决定简单地使用一个使用 ArrayLists 的 ExpandableListView 示例并对其进行修改，以便 ArrayLists 由数据库中的数据填充。它不是我想要的，但它有效。我实际上很惊讶，现在网络上有一个使用 ExpandableListview 扩展形式 BaseAdapter 的示例，但使用说 cursorTreeAdapter 或 SimpleCursorAdapter 从 SQlite 读取。以下是我如何做到的，以防将来对某人有所帮助。显示的代码是从 DB 填充 ArrayList 的位

```
public ArrayList<ExpandListGroup> SetStandardGroups() {

    ArrayList<ExpandListGroup> list = new ArrayList<ExpandListGroup>();
    ArrayList<ExpandListChild> list2 = new ArrayList<ExpandListChild>();
    int intMonthNum;
    ExpandListGroup grp;
    ExpandListChild chld;

    //initialize db code here
    DatabaseRoutines db = new DatabaseRoutines(this);

    //create the Groups retreival cursor;
    Cursor mGroupsCursor = db.fetchGroup();

    //---the database call is done using this code which is in my 
    //---custom db class which implements the sqlhelper methods etc
    //------start of db code snippet------------------------------- 
    //---public Cursor fetchGroup() {
    //---SQLiteDatabase db = this.getReadableDatabase();
    //--- String query = "SELECT DISTINCT MIN(ID) AS id, Year, 
    //--- SUM(SentAmount) AS TotalSent, 
    //--- SUM(ReceivedAmount) AS TotalReceived 
    //--- FROM  Tbl GROUP BY Year ORDER BY Year DESC ";
    //--- return db.rawQuery(query, null);}
    //------end of db code snippet-------------------------------
    mGroupsCursor.moveToFirst();

    //method is depreciated from api14 but i'm targeting Gingerbread (api10) so i need to use it.
    startManagingCursor(mGroupsCursor);
    int intYear;
    int intHeaderCounter = 0;
    int intChildCounter = 0;
    int intChildTotalCount = 0;
    int intHeaderTotalGroupCount = mGroupsCursor.getCount();

    //set the starting Year for the loop, if there is data;
    if (intHeaderTotalGroupCount > 0) {
        //get the first year
        //intYear = mGroupsCursor.getInt(mGroupsCursor.getColumnIndex("Year"));

        for (intHeaderCounter = 0; intHeaderCounter < intHeaderTotalGroupCount; intHeaderCounter++) {

            grp = new ExpandListGroup();
            intYear = mGroupsCursor.getInt(mGroupsCursor.getColumnIndex("Year"));
            grp.setYear(intYear);
            grp.setYearAmountReceived(mGroupsCursor.getDouble(mGroupsCursor.getColumnIndex("TotalReceived")));
            grp.setYearAmountSent(mGroupsCursor.getDouble(mGroupsCursor.getColumnIndex("TotalSent")));
            grp.setTag(mGroupsCursor.getString(mGroupsCursor.getColumnIndex("id")));

            //Prepare counters for inner loop for child items of each
            Cursor mChildCursor = db.fetchChildren(intYear);
            mChildCursor.moveToFirst();
            intChildTotalCount = mChildCursor.getCount();
            //populate child items
            for (intChildCounter = 0; intChildCounter < intChildTotalCount; intChildCounter++) {
                chld = new ExpandListChild();
                intMonthNum = mChildCursor.getInt(mChildCursor.getColumnIndex("Month"));
                chld.setMonthNumber(intMonthNum);
                chld.setTotalReceivedMonth(mChildCursor.getInt(mChildCursor.getColumnIndex("TotalReceived")));
                chld.setTotalSentMonth(mChildCursor.getInt(mChildCursor.getColumnIndex("TotalSent")));
                chld.setTag(mGroupsCursor.getString(mGroupsCursor.getColumnIndex("id")).toString());

                list2.add(chld);
                //grp.setItems(list2);
                //move to next child record;

                mChildCursor.moveToNext();

            }

            grp.setItems(list2);
            list.add(grp);

            list2 = new ArrayList<ExpandListChild>();
            //move to next parent record;
            mGroupsCursor.moveToNext();

        }

    } else {
        log.d( "yourdebugtag_here", "Sorry, No Transactions Found.");
    }

    //db.close();

    return list;
} 
```

# svn - 从 svn 日志中提取信息

> ID：16165993
> 
> 赞同：2
> 
> 时间：2013-04-23T09:40:15.660
> 
> 标签：svn, logging, version-control

通常，当我执行 时`svn log -v`，我会得到以下格式的响应：

```
------------------------------------------------------------------------
r8223 | neo | 2013-04-23 10:51:46 +0200 (Tue, 23 Apr 2013) | 1 line
Changed paths:
   M /dir/myfile.py

mycomment: validation changes for customers
------------------------------------------------------------------------ 
```

但是说，我想列出 svn 提交的所有修订号，它们的评论中有“验证更改”。我怎么能列出来？

**svn log -l 1000 -v |grep "验证更改"| awk '{print $somevalue}'** 也无济于事，因为它只是评论位的一部分！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T12:28:45.987

Subversion 1.8+ 命令行客户端允许您在命令中使用新选项`--search`和`--search-and`选项`svn log`。

该命令不会在存储库内*执行全文搜索，并且仅考虑以下数据：*

*   修订的作者（`svn:author`未版本化的属性），
*   日期（`svn:date`未版本化的属性），
*   记录消息文本（`svn:log`未版本化的属性），
*   更改的路径列表（即受特定修订影响的路径）。

以下是有关这些新搜索选项的帮助页面：

```
 If the --search option is used, log messages are displayed only if the
 provided search pattern matches any of the author, date, log message
 text (unless --quiet is used), or, if the --verbose option is also
 provided, a changed path.
 The search pattern may include "glob syntax" wildcards:
     ?      matches any single character
     *      matches a sequence of arbitrary characters
     [abc]  matches any of the characters listed inside the brackets
 If multiple --search options are provided, a log message is shown if
 it matches any of the provided search patterns. If the --search-and
 option is used, that option's argument is combined with the pattern
 from the previous --search or --search-and option, and a log message
 is shown only if it matches the combined search pattern.
 If --limit is used in combination with --search, --limit restricts the
 number of log messages searched, rather than restricting the output
 to a particular number of matching log messages. 
```

因此，在您的情况下，命令可能是：

`svn log -v --search "validation changes" URL-TO-REPOSITORY | awk '{print $somevalue}'`

# jquery - 使用jquery将数据绑定到按钮单击ajax中的跨度

> ID：16165998
> 
> 赞同：0
> 
> 时间：2013-04-23T09:40:27.657
> 
> 标签：jquery, scala, lift

我正在尝试创建一个简单的电梯网络应用程序。我想`<span>`从片段 JsCmds 返回函数的视图中显示一些数据。到目前为止，我尝试了以下代码。

**在我看来**

```
 <div id="ticketDiv" style="display:none;border:2px solid #FF00FF">
    <p>This is a sample div which show and hide while ajax calling</p><br />
    Ticket Number: <span id="ticketNumber"></span>
    <input id="testId" value="test"/>
 </div> 
```

**在片段**中

 **```
 class ShowBookedTicket {

    def showBookedTicket(s: String): JsCmd = {      

        JsCmds.JsHideId("PGMainDiv")&
        JsCmds.JsShowId("ticketDiv")&
        JsCmds.SetValueAndFocus("testId","12345")
        //JsCmds.SetValById("ticketNumber", "1234")
        //JsCmds.SetHtml("1234","<span></span>")
         //"#ticketNumber" #> "12345" 
        //"#ticketNumber *" #> "12345"
        //JsCmds.Function("testJsFunction",List("param"),SHtml.ajaxCall( () => JsRaw("""$('#ticketDiv').show()""")).cmd)._2
         }

  def render = "*" #> {
    "#PGOK [onClick]" #> SHtml.onEvent(showBookedTicket)
  }
} 
```

我也尝试了所有注释行。但我没有得到任何正确的结果。如果我给文本框ID，那么它正在工作`JsCmds.SetValueAndFocus("testId","12345")`。`JsCmds.SetValById("ticketNumber", "1234")`我怎样才能修复跨度中的数据。谁能给出一个答案。

谢谢..!!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:34:52.753

我不完全确定您遇到的确切问题，并且正在做出一些假设，因为您只有 HTML 的一部分称为 - 例如，什么是`PGMainDiv`？片段是如何调用的，是什么`#PGOK`等。

但是，我认为它看起来像：

```
 <div data-lift="ShowBookedTicket">
    <div id="ticketDiv" style="display:none;border:2px solid #FF00FF">
        <p>This is a sample div which show and hide while ajax calling</p><br />
        Ticket Number: <span id="ticketNumber"></span>
        <input id="testId" value="test"/>
    </div>
    <input type="button" id="PGOK" />
  </div> 
```

如果是这种情况，那么您所拥有的似乎有效。因此，我认为注释代码存在问题。对于那些，代码中有一些项目：

`JsCmds.SetHtml`将要替换的元素的 id 和 a 作为参数`NodeSeq`。您评论的版本都没有。如果您将其更改为：

```
 JsCmds.SetHtml("ticketNumber", <span>1234</span>) //No quotes around the XML 
```

`"#ticketNumber" #> "12345"`不适用于您的方法，因为它是 a`CssSelector`并且需要应用于 a `NodeSeq`。这只会发生在内部`render`或如果您手动调用`apply`它。

`JsCmds.Run`此外，如果这使事情变得更容易，您还可以发出任意 Javascript 。因此，您也可以直接使用 jquery 函数，例如：

```
JsCmds.Run("$('#ticketNumber').html('1234')"); 
```**

# ibm-mq - 使用 MQCB 时的 MQPUT：MQRC_HCONN_ASYNC_ACTIVE

> ID：16165999
> 
> 赞同：1
> 
> 时间：2013-04-23T09:40:30.557
> 
> 标签：ibm-mq, mq

我们的进程需要从本地 Q 管理器上的主题读取消息，并写入同一本地 Q 管理器上的不同主题。

要阅读我们使用过的消息`MQCB`。消息到达进程的回调函数。然而，虽然回调保持注册状态，但我们无法向`MQPUT`其他主题发送消息。

我们收到一条错误消息： `2500 : MQRC_HCONN_ASYNC_ACTIVE` `An attempt to issue an MQI call has been made while the connection is started`

显然，单个连接句柄不能同时用于读取和写入。我们必须暂停`MQCB`,`MPUT`消息并恢复`MQCB`以使其工作。

有没有办法避免不得不暂停和恢复？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:12:28.720

是的，这是使用 MQCB 时的预期行为。您可以采取两种方法：

1) 创建另一个到同一个队列管理器的连接以发布消息。
2）如果您的设计是每当您在回调函数上收到消息时发布消息，则从回调函数本身发布消息。

**更新**

MQRC_ALREADY_CONNECTED (2002) 问题：您使用了哪个 MQCNO_HANDLE_SHARE_* 选项？建议您使用 MQCNO_HANDLE_SHARE_BLOCK 选项来解决这个问题。我编写了一个示例程序，并使用 MQCNO_HANDLE_SHARE_BLOCK 选项在同一个线程上创建了两个连接。