# StackOverflow 问答 14781000-14781999

# c# - 使用 ScrollViewer 单击并拖动滚动

> ID：14781005
> 
> 赞同：2
> 
> 时间：2013-02-08T20:43:11.043
> 
> 标签：c#, wpf, scrollviewer

我想允许使用 a 进行单击和拖动滚动`ScrollViewer`（即单击中的任意位置`ScrollViewer`并向上或向下拖动，它将相应地滚动）

我有一个`StackPanel`嵌套在 a 中`ScrollViewer`，并且我已经可以滚动工作了。我相信我在某个地方看到了那个答案，但我似乎再也找不到了。

这必须仅使用代码来完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T10:33:01.653

看看[Matt Hamilton 的这段代码](http://matthamilton.net/touchscrolling-for-scrollviewer)：

```
public class TouchScrolling : DependencyObject
{
    public static bool GetIsEnabled(DependencyObject obj)
    {
        return (bool)obj.GetValue(IsEnabledProperty);
    }

    public static void SetIsEnabled(DependencyObject obj, bool value)
    {
        obj.SetValue(IsEnabledProperty, value);
    }

    public bool IsEnabled
    {
        get { return (bool)GetValue(IsEnabledProperty); }
        set { SetValue(IsEnabledProperty, value); }
    }

    public static readonly DependencyProperty IsEnabledProperty =
        DependencyProperty.RegisterAttached("IsEnabled", typeof(bool), typeof(TouchScrolling), new UIPropertyMetadata(false, IsEnabledChanged));

    static Dictionary<object, MouseCapture> _captures = new Dictionary<object, MouseCapture>();

    static void IsEnabledChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var target = d as ScrollViewer;
        if (target == null) return;

        if ((bool)e.NewValue)
        {
            target.Loaded += target_Loaded;
        }
        else
        {
            target_Unloaded(target, new RoutedEventArgs());
        }
    }

    static void target_Unloaded(object sender, RoutedEventArgs e)
    {
        System.Diagnostics.Debug.WriteLine("Target Unloaded");

        var target = sender as ScrollViewer;
        if (target == null) return;

        _captures.Remove(sender);

        target.Loaded -= target_Loaded;
        target.Unloaded -= target_Unloaded;
        target.PreviewMouseLeftButtonDown -= target_PreviewMouseLeftButtonDown;
        target.PreviewMouseMove -= target_PreviewMouseMove;

        target.PreviewMouseLeftButtonUp -= target_PreviewMouseLeftButtonUp;
    }

    static void target_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
    {
        var target = sender as ScrollViewer;
        if (target == null) return;

        _captures[sender] = new MouseCapture
        {
            VerticalOffset = target.VerticalOffset,
            Point = e.GetPosition(target),
        };
    }

    static void target_Loaded(object sender, RoutedEventArgs e)
    {
        var target = sender as ScrollViewer;
        if (target == null) return;

        System.Diagnostics.Debug.WriteLine("Target Loaded");

        target.Unloaded += target_Unloaded;
        target.PreviewMouseLeftButtonDown += target_PreviewMouseLeftButtonDown;
        target.PreviewMouseMove += target_PreviewMouseMove;

        target.PreviewMouseLeftButtonUp += target_PreviewMouseLeftButtonUp;
    }

    static void target_PreviewMouseLeftButtonUp(object sender, MouseButtonEventArgs e)
    {
        var target = sender as ScrollViewer;
        if (target == null) return;

        target.ReleaseMouseCapture();
    }

    static void target_PreviewMouseMove(object sender, MouseEventArgs e)
    {
        if (!_captures.ContainsKey(sender)) return;

        if (e.LeftButton != MouseButtonState.Pressed)
        {
            _captures.Remove(sender);
            return;
        }

        var target = sender as ScrollViewer;
        if (target == null) return;

        var capture = _captures[sender];

        var point = e.GetPosition(target);

        var dy = point.Y - capture.Point.Y;
        if (Math.Abs(dy) > 5)
        {
            target.CaptureMouse();
        }

        target.ScrollToVerticalOffset(capture.VerticalOffset - dy);
    }

    internal class MouseCapture
    {
        public Double VerticalOffset { get; set; }
        public Point Point { get; set; }
    } 
```

}

这里有一些怪癖。我注意到，当显示内容时，ScrollViewer 实际上正在被加载、卸载和再次加载。

这意味着我不能只在`IsEnabledChanged`方法中连接事件并在事件处理程序中解开它们`target_Unloaded`，因为它们会立即被解开。相反，我不得不将它们连接到 Loaded 事件的处理程序中，而该处理程序又永远不会脱钩。

这意味着那里存在某种“内存泄漏”，但这是我准备接受的。

# utf-8 - Lua 的 UTF-8 编码

> ID：14781006
> 
> 赞同：2
> 
> 时间：2013-02-08T20:43:14.487
> 
> 标签：utf-8, lua, coronasdk

我正在使用 Corona SDK 开发应用程序。我想将 UTF-8 编码的文本发送到服务器并解码响应（也在 UTF-8 中。）

有人熟悉我可以使用的 UTF-8 编码和解码功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:46:25.490

Lua 标准库没有任何处理 UTF-8 字符的函数。您必须使用一些外部库（如 ICU）或使用现有的 Lua 绑定。

# ruby - rvm help 命令输出看起来很奇怪

> ID：14781008
> 
> 赞同：1
> 
> 时间：2013-02-08T20:43:26.163
> 
> 标签：ruby, ubuntu, rvm

当我输入 ubuntu 终端时：

`$ rvm help use`

命令输出如下所示：

```
M-bM-^HM-4 rvm use [ruby-string]

Setup current shell to use a specific ruby version.
... 
```

字符是什么`M-bM-^HM-4`？我应该使用特殊命令来阅读帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:27:01.663

这是 unicode 字符：

```
∴ rvm list 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-08T20:47:36.077

我也看到了。看起来这只是记录者在术语“rvm”的每个实例之前输入的一些奇怪的字符。

可能在他们的控制台上，它突出显示了该术语或类似的东西。

# sql-server - 在 SQL Server 2008 中重命名全文目录

> ID：14781010
> 
> 赞同：2
> 
> 时间：2013-02-08T20:43:31.697
> 
> 标签：sql-server, sql-server-2008, full-text-catalog

无论如何要重命名 SQL Server 2008 中的全文目录？

在 SSMS 中似乎没有执行此操作的选项，但我想知道是否有 SQL 命令来完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:58:07.407

您不能重命名全文目录，只能删除并重新创建它，查看此链接以获取可以轻松修改以执行此操作的脚本...

[http://support.microsoft.com/kb/2391904](http://support.microsoft.com/kb/2391904)

# mysql - MySQL Join 不返回在新数据库实例中的两个表中匹配的数据

> ID：14781013
> 
> 赞同：6
> 
> 时间：2013-02-08T20:43:50.603
> 
> 标签：mysql, database, join, instance

我已经在这里潜伏了几个月，从阅读其他问题中学到了很多东西，但这是我第一次有勇气问一个问题！

```
SELECT  * FROM tableA a
JOIN tableB b ON b.tableBid = a.tableBid
WHERE a.tableAcol = 'paramValue'; 
```

我在表 B 中只有 39 行，对于其中的每个人来说，在 tableA 中都有一行用于 paramValue 和匹配的 tableBid，所以我希望得到 39 行。事实上，在另一个数据库实例中，我确实这样做了。

我看不出实例中有任何显着差异，尽管这可能是无知，但在这个新实例中，我只得到 7 条具有相同查询的记录。

如果我将查询更改为

```
SELECT  * FROM tableA a
LEFT JOIN tableB b ON b.tableBid = a.tableBid
WHERE a.tableAcol = 'paramValue'; 
```

或者

```
SELECT  * FROM tableA a
LEFT JOIN tableB b ON a.tableBid = b.tableBid
WHERE a.tableAcol = 'paramValue'; 
```

然后我得到了我期望的 39 行 a.tableBid 在所有情况下都匹配 b.tableBid 并且没有空值

我显然很困惑。谁能解释一下。

无法发布真实数据，但我可以重现它

```
 CREATE TABLE tableB (  
tableBid varchar(30) NOT NULL   PRIMARY KEY,
nameB varchar(25) NOT NULL  ,
description varchar(40) NOT NULL);

CREATE TABLE tableA (
userID varchar(30) NOT NULL,
tableBid Varchar(30) NOT NULL,
info varchar(10) NOT NULL,
PRIMARY KEY(userID, tableBID));

insert into tableB (tableBid, nameB, description)
values 
('a', 'a name', 'blah'),
('b', 'b name', 'blah'),
('c', 'c name', 'blah'),
('d', 'd name', 'blah');

insert into tableA (userID, tableBid, info)
values
('deel','a',  'blah'),
('deel','b',  'blah'),
('deel','c',  'blah'),
('deel','d',  'blah'); 
```

然后

```
SELECT  * FROM tableA a
LEFT JOIN tableB b ON b.tableBid = a.tableBid
WHERE a.userID = 'deel'; 
```

给了我 4 行：

```
deel    a   blah    a   a name  blah
deel    b   blah    b   b name  blah
deel    c   blah    c   c name  blah
deel    d   blah    d   d name  blah 
```

但

```
SELECT  * FROM tableA a
JOIN tableB b ON b.tableBid = a.tableBid
WHERE a.userID = 'deel'; 
```

给我

```
deel    d   blah    d   d name  blah 
```

**表定义**

```
CREATE TABLE `tablea` (
   `userID` varchar(30) NOT NULL,
   `tableBid` varchar(30) NOT NULL,
   `info` varchar(10) NOT NULL,
   PRIMARY KEY (`userID`,`tableBid`)
 ) ENGINE=Xeround DEFAULT CHARSET=latin1

CREATE TABLE `tableb` (
   `tableBid` varchar(30) NOT NULL,
   `nameB` varchar(25) NOT NULL,
   `description` varchar(40) NOT NULL,
   PRIMARY KEY (`tableBid`)
 ) ENGINE=Xeround DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:49:14.940

您的查询输出中的一个逻辑假设：**如果发生这种情况，那就是一个错误。**

在透露您正在使用**Xeround 引擎**之后，我认为您应该编写您收集的测试用例并将其作为错误提交到他们的错误列表或论坛中。

# url - 我发现在其个人资料网页中的人名之前的URL中总是有一个波浪线。它的意义是什么？

> ID：14781016
> 
> 赞同：-1
> 
> 时间：2013-02-08T20:43:52.433
> 
> 标签：url, web

我发现在它的个人资料页面中，URL中的人名之前总是有一个波浪线。例如这个网页：[http ://cg.cs.tsinghua.edu.cn/people/~taochen/](http://cg.cs.tsinghua.edu.cn/people/~taochen/)

名字'taochen'之前有一个'~'。

它的意义是什么？规则还是习惯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:47:19.977

波浪号 (~) 通常表示用户主目录（在 Unix 世界中）。因此，当教育机构想要表示以或多或少不受控制的方式生成的网页时，波浪号是告诉开放互联网的好方法，“嘿，这个网站是由不拥有这一切的人创建的领域”。或者，“这是他们的*主页*”。

并回答第二部分......这是最佳实践，而不是规则。

# javascript - 如何渲染到立方体的帧缓冲区背面？（从我的角度来看，看不见的一面？）

> ID：14781019
> 
> 赞同：0
> 
> 时间：2013-02-08T20:44:02.663
> 
> 标签：javascript, three.js, webgl

我正在尝试使用 Three.js 库在 WebGL 中开发体积渲染。我知道如何在纯 WebGL 中做到这一点，但我无法在 Three.js 中找到任何方法。

所以..问题...

1）如何将边界框（我有一个立方体）的背面绘制到帧缓冲区？我只需要绘制立方体的不可见边。

2）如何绘制边界框的正面？（仅正面）

非常感谢 :-) 我真的不知道如何在 Three.js 中做到这一点……有可能吗？如果不可能，我会在纯 WebGL 中进行。但我不想混合使用 WebGL 和 Three.js 库。我想要干净的解决方案。

非常感谢你:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T22:48:32.707

您可以像这样选择正面或背面剔除：

```
renderer.setFaceCulling( THREE.CullFaceFront );

renderer.setFaceCulling( THREE.CullFaceBack ); 
```

三.js r.55

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T22:24:03.920

解决方案是：

设置为渲染器：

renderer.setFaceCulling("前");

或者

renderer.setFaceCulling("back");

感谢您对[WestLangley 的帮助。](https://stackoverflow.com/users/1461008/westlangley)

# python - 如何更改我的金字塔/python 网络应用程序目录的权限？

> ID：14781021
> 
> 赞同：1
> 
> 时间：2013-02-08T20:44:11.327
> 
> 标签：python, filesystems, pyramid, chmod

现在我的网络应用程序在我的本地机器上有这个文件结构

```
 env
    tutorial
        tutorial
            templates
                home.pt
            static
                pages
                    1.html
                    2.html
                    3.html
                     ....
            views.py
            __init__.py 
```

pages目录下的html文件是由表单生成的。我想让这个 pages 目录可写，以便用户可以通过应用程序向其中添加 html 文件，但使所有其他目录不可写且只能读取。我一直在阅读有关 chmod 的内容，看起来像

```
chmod a+x env/tutorial/tutorial/static/pages 
```

将使该页面目录可写。但是我怎样才能确保只有那个目录是可写的（所有其他的都是不可写的和只读的）？会不会只是

```
chmod a-x env 
```

显然我会先执行这个命令。当我执行它时，我应该在哪个目录中。如果我在我的本地机器上正确地完成了所有这些，我是否仍然能够开发（添加代码等）或者我应该等到我全部完成。当我将应用程序放在 Web 服务器上时，这些权限会被保留，还是必须以不同的方式再次执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:52:24.987

在生产环境中，Web 服务器通常以非特权用户身份运行，例如`www-data`或某事。此类用户通常没有设置登录 shell 并且不拥有文件系统上的文件，因此如果您的应用程序中的缺陷允许攻击者在机器上运行任意代码，他们仍然无法修改任何文件。

因此，*在生产环境*中，确保 Web 服务器用户*无法*修改任何文件的最简单方法是将文件的所有权更改为 Web 服务器有效用户以外的其他用户。您的普通登录用户或者`root`是很好的候选人：

```
chown -R bigboy:bigboy /opt/where/my/code/is 
```

或者

```
sudo chown -R root:root /opt/where/my/code/is 
```

正常`umask`设置将允许 Web 服务器读取文件但不允许写入任何内容。非常适合典型的 Web 应用程序。

因此，要授予网络服务器对某个目录的写入权限，您可以将目录的所有权更改为网络服务器的有效用户：

```
sudo chown -R www-data /opt/where/my/static/directory/is 
```

在*开发环境中*，您通常以普通登录用户身份运行该`pserve`命令，因此撤销用户的读取权限是不切实际的，因为您将无法编辑任何文件。最简单的方法是将另一个用户添加到系统，`chown`将您的静态目录添加到该用户，以该用户身份打开终端外壳并从那里运行服务器。

```
sudo chown -R testuser:testuser env/tutorial/tutorial/static/pages
sudo su testuser
env/bin/pserve ... 
```

或者，在*开发环境中*，您可以继续以普通登录用户身份运行所有内容，因为您通常是唯一可以访问服务器的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:05:53.683

不，

```
chmod a+x env/tutorial/tutorial/static/pages 
```

设置该目录的执行位。您想要的是为每个运行 rails 的用户（或可能的组）在该目录上设置写入位。对于当前用户，执行：

```
chmod +w env/tutorial/tutorial/static/pages 
```

从 chmod 手册页——看看底部的符号模式表（Mac OSX）：

```
MODES
 Modes may be absolute or symbolic.  An absolute mode is an octal number constructed from the sum of one or more
 of the following values:

       4000    (the set-user-ID-on-execution bit) Executable files with this bit set will run with effective uid
               set to the uid of the file owner.  Directories with the set-user-id bit set will force all files
               and sub-directories created in them to be owned by the directory owner and not by the uid of the
               creating process, if the underlying file system supports this feature: see chmod(2) and the
               suiddir option to mount(8).
       2000    (the set-group-ID-on-execution bit) Executable files with this bit set will run with effective gid
               set to the gid of the file owner.
       1000    (the sticky bit) See chmod(2) and sticky(8).
       0400    Allow read by owner.
       0200    Allow write by owner.
       0100    For files, allow execution by owner.  For directories, allow the owner to search in the directory.
       0040    Allow read by group members.
       0020    Allow write by group members.
       0010    For files, allow execution by group members.  For directories, allow group members to search in
               the directory.
       0004    Allow read by others.
       0002    Allow write by others.
       0001    For files, allow execution by others.  For directories allow others to search in the directory.

 For example, the absolute mode that permits read, write and execute by the owner, read and execute by group mem-
 bers, read and execute by others, and no set-uid or set-gid behaviour is 755 (400+200+100+040+010+004+001).

 The symbolic mode is described by the following grammar:

       mode         ::= clause [, clause ...]
       clause       ::= [who ...] [action ...] action
       action       ::= op [perm ...]
       who          ::= a | u | g | o
       op           ::= + | - | =
       perm         ::= r | s | t | w | x | X | u | g | o 
```

# c - C - 在两个不同的文件中调用相同的互斥锁，不能正常工作

> ID：14781023
> 
> 赞同：1
> 
> 时间：2013-02-08T20:44:14.723
> 
> 标签：c, mutex

我有一个 file1.c 与：`pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;`在全球。在 file1.h : `extern pthread_mutex_t mutex;`。但我也在 file2.c 中调用了这个互斥锁。

file1.c 和 file2.c 使用这样的互斥锁：

文件1.c：

```
#include "finc1.h"

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;

void *f1()
{
   if (...)
   {
      pthread_mutex_unlock(&mutex);
      return (NULL);
   }
   if (...)
   {
      pthread_mutex_unlock(&mutex);
      return (...);
   }
   else
   {
      ...
   }
   pthread_mutex_unlock(&mutex);
   return (...);
}

void *f2()
{
   ...
   pthread_mutex_unlock(&mutex);
   return (...);
}

void *func1()
{
   pthread_mutex_lock(&mutex);
   if (...)
     return (f1());
   if (...)
     return (f1());
   return (f2());
} 
```

文件1.h：

```
...
extern pthread_mutex_t mutex;
... 
```

文件2.c：

```
#include "finc1.h"

void func2()
{
   pthread_mutex_lock(&mutex);
   ...
   pthread_mutex_unlock(&mutex);
} 
```

我还有另一个文件，比如说带有 func3() 的 file3.c，它没有任何互斥体，但先调用 func1()，然后调用 func2()。

文件 3.c：

```
#include "finc1.h"

void func3()
{
   if(...)
     return(func1());
   func1();
   func2();
} 
```

现在问题来了。那个互斥锁只能在 10 次以上工作 1 次。我不知道为什么。我做错什么了吗？

提前致谢 ！

# ruby-on-rails - Rails 3 引擎的未定义方法 render_cell

> ID：14781041
> 
> 赞同：2
> 
> 时间：2013-02-08T20:45:10.143
> 
> 标签：ruby-on-rails, rails-cells

我用`rails plugin new golgi --mountable`. [单元格](https://github.com/apotonick/cells)gem被添加为 gemspec 文件的依赖项：`s.add_dependency "cells"`. 捆绑并运行生成器会`rails g cell cart show`产生以下结构：

```
app / cells / golgi / cart /show.html erb
app / cells / golgi / cart_cell.rb 
```

然后我尝试调用`render_cell :cart, :show`views/layouts/golgi/application.html.erb 但我得到一个未定义的方法错误： `undefined method 'render_cell' for #<#<Class:0x000001009ec590>:0x00000100931600>`

请注意，我正在运行为测试引擎提供的“虚拟”应用程序 (/test/dummy)。我需要什么才能使电池与可安装的引擎一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-10T22:53:07.453

安装 gem 后，您可能忘记重新启动 rails 服务器。

# php - php mysqi bind_param 变量数与准备好的语句中的参数数不匹配

> ID：14781051
> 
> 赞同：35
> 
> 时间：2013-02-08T20:45:43.380
> 
> 标签：php, mysqli, prepared-statement

这一定是新手的错误，但我没有看到。这是我的代码片段：

```
$mysqli = mysqli_connect($dbCredentials['hostname'], 
    $dbCredentials['username'], $dbCredentials['password'], 
    $dbCredentials['database']);

if ($mysqli->connect_error) {
    throw new exception( 'Connect Error (' . $mysqli->connect_errno . ') '
    . $mysqli->connect_error);
}

$stmt = $mysqli->prepare("SELECT DISTINCT model FROM vehicle_types 
    WHERE year = ? AND make = '?' ORDER by model");

$stmt->bind_param('is', $year, $make);

$stmt->execute(); 
```

当我回显 $year 和 $make 的值时，我看到了值，但是当我运行此脚本时，我得到一个空值，并且在我的日志文件中出现以下警告：

```
PHP Warning:  mysqli_stmt::bind_param(): Number of variables doesn't match number of parameters in prepared statement 
```

在这种情况下，数据库中的年份是 int(10) 类型，我尝试传递一个已被转换为 int 的副本，并且 make 是一个 varchar(20) 与 utf8_unicode_ci 编码。我错过了什么吗？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-02-08T20:58:28.350

您准备的陈述是错误的，应该是：

```
$stmt = $mysqli->prepare("SELECT DISTINCT model FROM vehicle_types WHERE year = ? AND make = ? ORDER by model"); 
```

单引号造成的？是值而不是标记。它已经是一个字符串，因为您正在使用`bind_param('is'`

# c# - 如何从子文档数组中仅检索一个特定元素？

> ID：14781054
> 
> 赞同：1
> 
> 时间：2013-02-08T20:45:47.857
> 
> 标签：c#, arrays, mongodb, projection

我的情况如下：我有一个文档，其中包含一个文档数组，表示用户加入的应用程序（如图所示）。

![文档示例](../Images/482f6268879976174565cfeeed57927a.png)

我只需要根据应用程序名称按用户检索一个文档...我编写了以下代码并且它可以工作...但是它会检索所有应用程序。如何做到只返回一个？

```
public Application GetUserApplication(string username)
        {
            var query = Query.And(Query.EQ("UserName", username), Query.ElemMatch("Applications", 
                Query.EQ("Key", this.applicationKey)));

            MongoCursor<BsonDocument> cursor = this.users.FindAs<BsonDocument>(query);

            cursor.SetFields(new string[]{ "Applications" });
            cursor.SetLimit(1);

            var it = cursor.GetEnumerator();

            var apps = it.MoveNext() ? it.Current["Applications"].AsBsonArray : null;

            ...
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T20:58:34.843

您需要将`$`位置运算符添加到`SetFields`投影中以识别匹配元素的索引：

```
cursor.SetFields(new string[]{ "Applications.$" }); 
```

顺便说一句，您可以使用更简洁的语法：

```
cursor.SetFields("Applications.$"); 
```

# c++ - 告诉子类对超类的受保护变量做某事是一种好的做法（也许是一些已知的设计模式？）？

> ID：14781057
> 
> 赞同：0
> 
> 时间：2013-02-08T20:45:58.967
> 
> 标签：c++

这是一个好的模式吗？

```
BaseClass {
protected:
  Data m_data;
public:
  Interesting public_method() {
    //returns something interesting about m_data
    //what exactly depends on what the subclass put into m_data
  }
}

DerivedClass {
public:
  DerivedClass() { //properly populate m_data }
} 
```

这样做的缺点是事情太“松散”并且没有在编译时强制执行，因为子类程序员只是被告知做某事，而不是真的被迫去做，所以我想知道这是否被经验丰富的 c++ 编码人员认为是好的做法。

有什么好的出路或更好的方法吗？

如果只有超类构造函数可以在子类构造函数完成其工作后被强制调用。然后超类构造函数中可以包含所需的参数

c++ 不允许这样做:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:52:13.357

这不是一种模式，而是一种反模式。经验法则：受保护的变量不好。继承的行为（从一般的具体类继承）是不好的。当然，有时可能有理由忽略其中任何一个，但如果不说出你真正想要做什么，就很难说。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T20:54:08.263

在我看来，永远不应该使用受保护的变量。我更喜欢使用带有受保护方法的私有变量。这样，如果您想使用多态对象，您可以覆盖您的方法并避免“坏意外”。如果你的类是`final`，当然你可以直接使用受保护的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T20:56:13.937

对我来说，这听起来不太对劲。尽管派生类调用基类并非闻所未闻，但更常见的是派生类将覆盖（虚拟）`public_method`以提供该信息。

或者，按照建议，使用工厂函数。或者一个静态的“构造函数”成员函数，所以不是调用 new，而是调用一个调用`new`和`special function to make set the data`.

所有可能的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T21:02:05.423

> 如果只有超类构造函数可以在子类构造函数完成其工作后被强制调用。然后超类构造函数中可以包含所需的参数。

ctor *-initializer-list*非常强大。虽然您只能使用表达式，但这些表达式可以包含函数调用。实际上，您可以在构造函数主体中执行的任何操作都可以从初始化列表中实现。

当然，你必须尊重构造顺序，所以你不能在初始化之前调用基类上的成员函数。但是您可以在初始化成员时访问基类。

```
class BaseClass
{
  Data m_data;
protected:
  BaseClass( Data&& data ) m_data(data) {}
public:
  Interesting public_method() {
    //returns something interesting about m_data
    //what exactly depends on what the subclass put into m_data
  }
};

class DerivedClass : public BaseClass
{
  static Data make_arg_into_data( const T& arg ) { /* calculate and return the right value for m_data */ }
  static Interesting make_arg_into_member_init( BaseClass* pThis, const T& arg ) { return pThis->public_method(); }
  V m_member;
public:
  DerivedClass( T arg ) BaseClass(make_arg_into_data(arg)), m_member(make_arg_into_member_init(this, arg)) {  }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T20:51:15.420

听起来你可以使用工厂：

```
BaseClass {
private:
  Data m_data;
public:
  void setData(const Data& data) { m_data = data; }
  virtual Data generateData() = 0;
};

struct Factory
{
   template<class T>
   static BaseClass* getInstance()
   {
       BaseClass* t = new T;
       t->setData(t->generateData());
       return t;
   }
}; 
```

并将其称为

```
BaseClass* p = Factory::getInstance<Derived>(); 
```

如您所见，非抽象派生类被迫调用`generateData`，因此它们必须生成有效的`Data`.

我只使用原始指针以方便编写，不要:)

# mysql - Mysql将max id的行更新为sum语句的值

> ID：14781058
> 
> 赞同：1
> 
> 时间：2013-02-08T20:45:58.533
> 
> 标签：mysql, sql

这可能是一个白日梦，但我试图让这两个单独工作的命令作为一个命令工作。而不是 XXXXX，我想在 select 语句中转储（这给了我昨天总数和今天总数的差异）。组合命令将找到最近的行（最大 idtanklevel）并使用其自身与前一行的差异对其进行更新。

```
update fw_db.tanklevel2 T3
inner join (select max(idtanklevel) as idtanklevel from fw_db.tanklevel2) T4
on T3.idtanklevel = T4.idtanklevel
set glycolsmallchange = XXXXX; 
```

和

```
select round(sum((T1.glycolsmall) - (T2.glycolsmall)),2) 
from fw_db.tanklevel2 T1, fw_db.tanklevel2 T2 
where 
T1.idtanklevel = (select max(idtanklevel) from fw_db.tanklevel2)
and 
T2.idtanklevel=(select max(idtanklevel)-1 from fw_db.tanklevel2); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:50:06.917

以下是我如何在一个语句中完成所有这些工作。（请注意，此查询假定它`idtanklevel`是表中的 PRIMARY KEY 或至少一个 UNIQUE KEY `tanklevel2`；如果不是这种情况，则需要调整查询。）

一些简短的评论来记录每个表引用和每个内联视图的目的：

```
-- m  = get id of latest row
-- t  = get latest row (the row to be updated)
-- pr = get id for the prior row
--      pri = source for prior row id
--      l = id of latest row (identical to "m")
-- pv = get value from prior row
-- p  = wrapper so we can join to row returned from pv

UPDATE fw_db.tanklevel2 t
  JOIN ( SELECT MAX(idtanklevel) AS idtanklevel FROM fw_db.tanklevel2 ) m
    ON m.idtanklevel = t.idtanklevel
 CROSS
  JOIN ( SELECT pv.glycolsmall
              , pv.idtanklevel
           FROM ( SELECT MAX(pri.idtanklevel) AS idtanklevel
                    FROM fw_db.tanklevel2 pri
                   WHERE pri.idtanklevel <
                         (SELECT MAX(l.idtanklevel) FROM fw_db.tanklevel2 l)
                ) pr
           JOIN fw_db.tanklevel2 pv
             ON pv.idtanklevel = pr.idtanklevel
          LIMIT 1
       ) p
   SET t.glycolsmallchange = ROUND(t.glycolsmall - p.glycolsmall,2) 
```

请注意，上面的查询使用稍微不同的技术来识别“先前”行。查询不是从最大 id 值中减去 1，而是获取第二高的 id 值（低于最大值的最高 id 值）。

要实现您的查询使用的相同策略（即从最大 id 值中减去 1，请删除上面该查询的这一部分：

```
 FROM ( SELECT MAX(pri.idtanklevel) AS idtanklevel
                    FROM fw_db.tanklevel2 pri
                   WHERE pri.idtanklevel <
                         (SELECT MAX(l.idtanklevel) FROM fw_db.tanklevel2 l)
                ) pr 
```

并将其替换为：

```
 FROM ( SELECT MAX(l.idtanklevel)-1 AS idtanklevel
                    FROM fw_db.tanklevel2 l
                ) pr 
```

* * *

要在不实际执行更新的情况下测试此语句，请删除`SET`子句并将`UPDATE`关键字替换为`SELECT`和相关表达式列表，以便您查看返回的行，例如：

```
SELECT t.glycolsmallchange                    AS old_glycolsmallchange
     , ROUND(t.glycolsmall - p.glycolsmall,2) AS new_glycolsmallchange
     , t.idtanklevel  AS latest_row_id
     , t.glycolsmall  AS latest_glycolsmall
     , p.idtanklevel  AS prior_row_id
     , p.glycolsmall  AS prior_glycolsmall
  FROM 
```

# php - 为什么我在使用未定义索引时没有收到错误？

> ID：14781063
> 
> 赞同：-1
> 
> 时间：2013-02-08T20:46:05.783
> 
> 标签：php, c++, indexing

我来自`php`并且当我定义这样的东西时：

```
$a = array();
echo $a[586]; 
```

我会收到关于未定义索引的通知。

同时在`c++`我可以这样做：

```
map<int, string> my_map;
cout << "Map is: " << my_map[34535];

string sentence = "acdefb s";
cout << "Letter is: " << sentence[15]; 
```

而且我不会收到任何错误。

为什么不可能在`php`和可能在`c++`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T20:47:59.510

因为 PHP 和 C++ 是两种完全不同的语言，具有完全不同的语义。在 C++中将`[]`运算符与`std::map`对象一起使用时，如果映射中不存在键，则将新元素插入映射中。在 PHP 中，情况并非如此。

至于您的第二个示例`std::string sentance`，在 C++ 中使用具有无效索引（索引为 ）的***运算***`[]`符是无效的`>= sentance.length()`。`std::string`您可能不会收到任何“错误”，因为使用无效索引的结果`std::string`是**[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)**，这意味着任何事情都可能发生。现代平台上的一个常见结果是分段错误/访问冲突，这通常会使您的程序崩溃。

如果您想防止未定义的行为，`std::string`您可以使用而`std::string::at()`不是运算符。如果您使用无效索引，`[]`该`at`函数会进行边界检查并抛出异常。`std::out_of_range`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T21:16:55.987

C++ 是一种为性能而编写的语言。如果您有一个包含 1000 万个项目的数组，并且合法地遍历所有项目，则将增加时间来检查这 10M 访问中的每一个是否有效。作为副作用，您还可以在“正确”的情况下走出有效范围而不会被检测到。最有可能的是，如果您超出有效范围太远，就会出现问题。但是 C++ 不能保证它确实会出错，或者可能发生什么其他事情——这就是所谓的“未定义行为”——简称 UB。

在地图的情况下，它不会做你认为它做的事情，它实际上会在你的容器中创建一个新的空元素，然后打印它。

因此，在您有“未知”索引的情况下——例如一个将索引作为参数的函数，最好检查该值是否在范围内——至少在代码的调试版本中是这样。例如`assert()`，您可以使用：

```
// v is a vector, or string, or some such. 
assert(index < v.size); 
```

每当您超出有效范围时，这都会“破坏”您的程序。在发布版本中，`assert`编译为空，因此当您在正确的发布版本中运行代码时没有额外的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:53:32.347

以大于字符串长度的值索引句子字符串几乎总是会导致分段错误。如果这段代码实际上没有错误地运行，那是因为“幸运的是”这个内存地址不能解析为不属于进程的东西。相反，你只会得到垃圾。

# sql - 按时间间隔分组数据

> ID：14781069
> 
> 赞同：5
> 
> 时间：2013-02-08T20:46:35.113
> 
> 标签：sql, oracle, time, grouping, intervals

我想按时间间隔对表中的数据进行分组。该表保留了订单信息，包括用户 ID、商品名称、型号、数量、活动日期等。现在我想按时间间隔对这些数据进行分组。时间间隔可以是 5 分钟、10 分钟、15 分钟等。此外，查询应该只返回在 5 分钟间隔内多次下订单的用户（所有列数据）。是否可以在一个 SQL 查询中实现这一点？我使用甲骨文。

谢谢

**编辑：**

样本数据

```
**userid    item name    model      quantity   order date**
abc calculator   cdm83ss    1      02-FEB-2013 09:20:13     
abc alarm clock  actp001    1      02-FEB-2013 09:26:22
yyy iPhone       iP4    1      02-FEB-2013 09:28:14
abc alarm clock  actz321    2      02-FEB-2013 09:30:00
zzz backpack     bp344tk    1      04-FEB-2013 13:15:00
zzz backpack     bp234zz    2      04-FEB-2013 13:19:32
zzz camera       cm234  1      04-FEB-2013 13:20:22 
ttt tv       fs45yup    1      04-FEB-2013 13:28:19 
```

我希望得到：

```
**userid    item name    model      quantity   order date**
abc         calculator   cdm83ss    1      02-FEB-2013 09:20:13     
abc         alarm clock  actp001    1      02-FEB-2013 09:26:22
abc         alarm clock  actz321    2      02-FEB-2013 09:30:00
zzz         backpack     bp344tk    1      04-FEB-2013 13:15:00
zzz         backpack     bp234zz    2      04-FEB-2013 13:19:32
zzz         camera       cm234  1      04-FEB-2013 13:20:22 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T21:07:04.960

是的。大概您也希望将结果视为日期时间值。这需要一些日期时间算法。基本上，获取自午夜以来的分钟数，除以分钟数，然后再次相乘（向下舍入）。然后加回午夜的时间：

```
select t.*
from (select t.*,
             count(*) over (partition by userid, interval) as CntInInterval
      from (select trunc(orderdate)+
                   (floor(((orderdate - trunc(orderdate))*24*60)/10)*10)/(24*60) as interval, t.*
            from t
           ) t
     ) t
where cntInInterval > 1 
```

要按时间间隔分组，您可以使用：

```
 select interval, count(*)
      from (select trunc(orderdate)+floor(((orderdate - trunc(orderdate))*24*60)/10)*10 as interval, t.*
            from t
           ) t
      group by interval 
```

在这些查询中，“10”代表任意分钟数。请注意，这些是从午夜开始计算的，因此像 17 这样的值总是从一天的前 17 分钟开始。

区间的定义是日期的算术表达式。

          trunc(orderdate)+floor(((orderdate - trunc(orderdate))*24*60)/10)*10 作为间隔，

第一部分`trunc(orderdate)`是 Oracle 语法，用于删除日期的时间部分。这会将日期移至一天开始时的午夜。

该表达式`orderdate - trunc(orderdate)`计算自午夜以来的天数——这是一天的小数部分。因此，0.25 将是 6:00 am 将其`*24*60`转换为分钟。因此，0.25 变为 0.25*60*24 = 360 - 自午夜以来的分钟数。

然后表达式`floor(x/y)*y`简单地将任何值“截断”为 y 的较低倍数。所以，`floor(118/10)`是 11，而 11*10 是 110。换句话说，这会将 a*y 和 (a+1)*y（直到不包括）之间的所有值映射到相同的值 a*y。

在 2013 年 1 月 1 日上午 6:08 考虑实践中的表达：

```
`trunc(orderdate)` moves the date to midnight on 2013-01-01.
`orderdate - trunc(orderdate)` creates a number like 0.25.
`((orderdate - trunc(orderdate))*24*60)` produces the value 368
`floor(((orderdate - trunc(orderdate))*24*60)/10)*10` produces 360
`floor(((orderdate - trunc(orderdate))*24*60)/10)*10*(1/24*60)` produces 0.25 
```

再加上一分钟，时间又变成了早上 6:00。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T21:45:19.597

如果您需要更简单的方法来获取时间间隔 - 我无法为您提供任何其他帮助，因为我不知道您的表格和数据：

```
-- Time interval - every 15 min from midnight --
SELECT To_Char(trunc(SYSDATE) + (LEVEL/1440*15), 'HH24:MI') interval_15_min 
  FROM dual
CONNECT BY LEVEL <= 10 -- this is orbitraty 
/
SQL>

INTERVAL_15_MIN
--------------
00:15
00:30
00:45
... 
```

# jquery - jQuery 图片投票

> ID：14781077
> 
> 赞同：1
> 
> 时间：2013-02-08T20:46:54.717
> 
> 标签：jquery, html, css

我正在使用下面的代码制作一个简单的图像投票系统，但我遇到了一个问题，我想为每张图片单独显示投票结果。

当有人按下喜欢按钮时，Like div 必须只出现在投票的图片上。

**CSS：**

```
.pborder{
width:150px;
height:247px;
border:4px solid #CCCCCC;
background-color:#FFFFFF;
float:left;
margin-right:10px;
margin-bottom:10px;
z-index:1;
}

#ptitle{
width:140px;
height:18px;
float:left;
margin-left:5px;
margin-top:5px;
background-color:#006699;
font-family:Verdana, Arial, Helvetica, sans-serif;
color:#FFFFFF;
text-align:center;
font-size:13px;
}

#ppicdiv{
width:140xp;
height:170px;
float:left;
margin-left:5px;
margin-top:5px;
z-index:2;
}

.fholder{
width:140px;
height:38px;
background-color:#000000;
float:left;
margin-left:5px;
margin-top:6px;
z-index:2;
}

.likeup{
width:28px;
height:28px;
float:left;
margin-left:5px;
margin-top:5px;
z-index:3;
cursor:pointer;
}

.likedown{
width:28px;
height:28px;
float:right;
margin-right:5px;
margin-top:5px;
z-index:3;
cursor:pointer;
}

.lvoted{
width:130px;
height:30px;
text-align:center;
color: #FF0000;
font-family:Verdana, Arial, Helvetica, sans-serif;
font-size:22px;
position:absolute;
margin-top:40px;
margin-left:5px;
z-index:4;
background-image:url(../image/votedbg.png);
background-repeat:repeat-x;
display:none;
}

.dvoted{
width:130px;
height:30px;
text-align:center;
color: #FF0000;
font-family:Verdana, Arial, Helvetica, sans-serif;
font-size:22px;
position:absolute;
margin-top:40px;
margin-left:5px;
z-index:4;
background-image:url(../image/votedbg.png);
background-repeat:repeat-x;
display:none;
} 
```

**jQuery代码：**

```
<script type="text/javascript">
$(document).ready(function(){

$(".likeup").click(function() {
$('.dvoted').hide();
$('.lvoted').show();
});

$(".likedown").click(function() {
$('.lvoted').hide();
$('.dvoted').show();
});

});
</script> 
```

**机身内部：**

```
<div class="pborder">
<div id="ptitle">Image one</div>
<div id="ppicdiv">
<div class="lvoted">Like</div>
<div class="dvoted">Dislike</div>
<img src="image/1.jpg" border="0" />
</div>
<div class="fholder">
<div class="likeup"><img src="image/like.jpg" border="0" width="28" height="28" /></div>
<div class="likedown"><img src="image/dislike.jpg" border="0" width="28" height="28" /></div>
</div>
</div>

<div class="pborder">
<div id="ptitle">Image two</div>
<div id="ppicdiv">
<div class="lvoted">Like</div>
<div class="dvoted">Dislike</div>
<img src="image/2.jpg" border="0" />
</div>
<div class="fholder">
<div class="likeup"><img src="image/like.jpg" border="0" width="28" height="28" /></div>
<div class="likedown"><img src="image/dislike.jpg" border="0" width="28" height="28" /></div>
</div>
</div> 
```

我希望能帮助我。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:50:22.710

我想这就是你要找的：

```
$(".likeup").click(function() {
   $container = $(this).closest('.pborder');
   $container.find('.dvoted').hide();
   $container.find('.lvoted').show();
});

$(".likedown").click(function() {
   $container = $(this).closest('.pborder');
   $container.find('.lvoted').hide();
   $container.find('.dvoted').show();
}); 
```

也就是说，当单击图像时，通过 DOM 向上导航到包含`pborder`div，然后仅在该容器中找到`dovted`和项。`lvoted`

顺便说一句，您的 html 无效：该`id`属性应该是唯一的，但是您在div和div`id`上重复了相同的内容。这些应该更改为类而不是 id，或者如果您不在 JS 或 CSS 中使用它，甚至可能从这些 div 中完全删除该属性。`ptitle``ppicdiv`

# php - 如何搜索唯一的数组键？

> ID：14781084
> 
> 赞同：0
> 
> 时间：2013-02-08T20:47:24.910
> 
> 标签：php, arrays

我正在尝试根据值获取数组的键。

```
$array1=array(
'0'=>'test1',
'1'=>'test2',
'2'=>'test3',
'3'=>'test1'
)

$array2=array(
'0'=>'11',
'1'=>'22',
'2'=>'33',
'3'=>'44'
) 
```

我有

`$source`是针。它可以是' `test1`'、' `test2`'或' `test3`'

```
for loop to get different $source string

   if(in_array($source[$i], $array1)){
      $id=array_search($source[$i],$array1);
      //I want to output 11, 22 or 33 based on $source
      //However, my $array1 has duplicated value.
      //In my case, if $source is test1, the output will be 11,11 instead of 11 and 44

      echo $array2[$id]);
   } 
```

我不知道如何解决这个问题。我的大脑被炸了。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:54:48.200

PHP 有一个功能： http: [//php.net/manual/en/function.array-keys.php](http://php.net/manual/en/function.array-keys.php)

即`$keys = array_keys( $myArray, $theValue );`并获得第一个：`$keys[0];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T20:53:39.423

这应该有效。

```
$array3 = array_flip(array_reverse($array1, true));
$needle = $source[$i];
$key = $array3[$needle];
echo $array2[$key]; 
```

什么`array_flip`是交换键和值。在重复值的情况下，仅交换最后一对。为了解决这个问题，我们使用`array_reverse`但我们保留了密钥结构。

编辑：为了更清楚，这里是试运行。

```
$array1=array(
'0'=>'test1',
'1'=>'test2',
'2'=>'test3',
'3'=>'test1'
) 
```

`array_reverse($array1, true)`输出后将是

```
array(
'3' => 'test1',
'2' => 'test3',
'1' => 'test2',
'0' => 'test1'
) 
```

现在，当我们翻转它时，输出将是

```
array(
'test1' => '0', //would be 3 initially, then overwritten by 0
'test2' => '1',
'test3' => '2',
) 
```

# php - Wordpress 重写问题

> ID：14781085
> 
> 赞同：0
> 
> 时间：2013-02-08T20:47:31.163
> 
> 标签：php, wordpress

```
function add_new_rewrite_rules()
{
    add_rewrite_rule('^gourmet/area/([^/]*)/genre/([^/]*)/?','index.php?post_type=gourmet&gourmet_area=$matches[1]&gourmet_genre=$matches[2]','top');
    add_rewrite_rule('^gourmet/area/([^/]*)/genre/([^/]*)/type/([^/]*)/?','index.php?post_type=gourmet&gourmet_area=$matches[1]&gourmet_genre=$matches[2]&food_type=$matches[3]','top');
} 
```

所以我有这样的东西，但是当我去：[http ://www.site.com/gourmet/area/Test1/genre/Test2/type/Test3](http://www.site.com/gourmet/area/Test1/genre/Test2/type/Test3)

我有一个 var_dump($wp_query->query_vars['gourmet_area'];)，由于某种原因它没有传递最后一个变量。

它发布：Test1 和 Test2，但不是 Test3。如果我删除第一条规则，它将转储 Test3。

如果只有这些可用，我如何让它包含 Test1、Test2？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:05:11.737

在正则表达式的末尾添加一些美元符号。只有当路径以斜杠或任何非斜杠字符结尾时，正则表达式才有效。

```
function add_new_rewrite_rules()
{
    add_rewrite_rule('^gourmet/area/([^/]*)/genre/([^/]*)/?$','index.php?post_type=gourmet&gourmet_area=$matches[1]&gourmet_genre=$matches[2]','top');
    add_rewrite_rule('^gourmet/area/([^/]*)/genre/([^/]*)/type/([^/]*)/?$','index.php?post_type=gourmet&gourmet_area=$matches[1]&gourmet_genre=$matches[2]&food_type=$matches[3]','top');
} 
```

美元符号标志着字符串的结束。

# php - 需要帮助上传PHP文件以上传用户用户名下的文件

> ID：14781088
> 
> 赞同：0
> 
> 时间：2013-02-08T20:47:45.487
> 
> 标签：php, file-upload

我有一个程序，要求每个用户上传自己的图像。该图像必须是（他们的用户名）.png。例如：testuser123.png。自动输入用户名的 PHP 脚本是

```
<?=$_SESSION['Username']?> 
```

基本上，我需要将文件另存为

```
<?=$_SESSION['Username']?>.png 
```

不过，我将如何使用这个特定的脚本来做到这一点？任何帮助将不胜感激！我遇到的问题是我不知道将那部分代码放在哪里，而且我不确定它是否会起作用。我知道我的代码必须进行一些编辑，但我不知道如何。

```
<?php
$allowedExts = array("png");
$extension = end(explode(".", $_FILES["file"]["name"]));
|| ($_FILES["file"]["type"] == "image/png")
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];
    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:06:51.947

当您通过表单上传文件时，它会被上传到服务器的临时目录。您需要将其移动到您网站中的适当目录，否则将在服务器进行垃圾收集时将其删除。为此，您需要使用 move_uploaded_file()。鉴于您的脚本原样，这就是您需要的：

```
<?php
$allowedExts = array("png");
$extension = end(explode(".", $_FILES["file"]["name"]));
|| ($_FILES["file"]["type"] == "image/png")
&& ($_FILES["file"]["size"] < 20000)
&& in_array($extension, $allowedExts))
  {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Error: " . $_FILES["file"]["error"] . "<br>";
    }
  else
    {
    echo "Upload: " . $_FILES["file"]["name"] . "<br>";
    echo "Type: " . $_FILES["file"]["type"] . "<br>";
    echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
    echo "Stored in: " . $_FILES["file"]["tmp_name"];

    $path = "/path/to/directory";
    move_uploaded_file($_FILES["file"]["tmp_name"], $path."/".$_SESSION['Username'].".png");

    }
  }
else
  {
  echo "Invalid file";
  }
?> 
```

# c# - 良好实践，实现异步 2d winforms 元素时的模式

> ID：14781090
> 
> 赞同：0
> 
> 时间：2013-02-08T20:47:58.260
> 
> 标签：c#, winforms, asynchronous, drawing, 2d

如果有人可以在以下主题中为我提供建议，我将不胜感激：

我准备了小型 Windows 窗体游戏应用程序，它在主窗体上以这种方式实现了以下事件：

```
Shown += (sender, e) => GameItem.Start(); 
```

假设函数 Start() 负责在这样的表格上绘制球：

```
 while (true)
     {            
        game.BoardUI.pboxBall.Location = new Point(X++, Y++);
        game.BoardUI.pboxBall.Image = global::BoringGame.Properties.Resources.redBall;
         Application.DoEvents();
     } 
```

主窗体实现了另一个事件：

```
MouseMove += (sender, e) => Game.MoveBoard(e.X); 
```

此事件负责绘制球碰撞和反弹的板。此事件异步工作，但绘制的板正在闪烁。

我想知道如何实现事件 mouseMove 使鼠标项绘制的移动不闪烁：

```
 public void MoveBoard(int x)
     { 
        new Thread(() =>
        {
           game.BoardUI.pboxPaddle.Location = new Point(X, Y);
            game.BoardUI.pboxPaddle.Image = global::BoringGame.Properties.Resources.ballPad;
        }).Start();                
    } 
```

我试着用`SynchronizationContext UiSyncContext;`

我应该怎么做才能改进我的应用程序。我需要单独的线程来服务鼠标移动事件吗？如果是，那么如何使用它？也许绘图没有优化 - 也许我应该使用另一个控件来绘制移动元素。目前我使用图片框。

如果有人就此问题向我提出建议，我将不胜感激。

感谢帮助，解决方法：

```
 //SetStyle(ControlStyles.OptimizedDoubleBuffer, true);

    this.DoubleBuffered = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:56:43.123

如果闪烁是问题，那么您可以尝试最小化移动对象被擦除和重新绘制到新位置之间的时间。线程可能无济于事。正如 itsme86 所说，这可能是一个[缓冲](http://en.wikipedia.org/wiki/Multiple_buffering#Double_buffering_in_computer_graphics)问题。

# java - org.jboss.seam.RequiredException：@In 属性需要非空值：selectAccountPageBean.accountSessionBean

> ID：14781093
> 
> 赞同：0
> 
> 时间：2013-02-08T20:48:01.367
> 
> 标签：java, jboss, seam

我的堆栈跟踪的“原因：”部分说：

```
Caused by: org.jboss.seam.RequiredException: 
@In attribute requires non-null value: selectAccountPageBean.accountSessionBean 
```

页面范围的 bean 有这个：

```
@Name("selectAccountPageBean")
@Scope(ScopeType.PAGE)
public class SelectAccountPageWidgetBean 
    extends BaseWidgetBean implements Serializable
{
...
    @In(create = true)
    private AccountSessionBean accountSessionBean;
...
} 
```

会话范围的 bean 有这个：

```
@Name("accountSessionBean")
@Scope(ScopeType.SESSION)
public class AccountSessionBean implements Serializable
{
...
} 
```

当我从 facelet 引用页面范围的 bean 时，我得到了错误。

我在其他应用程序中也做过同样的事情，而且效果很好。是否有一些我在某处缺少的配置值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T13:42:49.140

我不确定哪个更改修复了它，但我们做了两件事。

1.  我们在 components.properties 文件中添加。有人建议我们应该
    在类路径上放置一个，即使它是空的。
2.  我们的组件所在的包有问题。包结构类似于：

    ```
    foo.bar.baz 
    ```

    但是该组件位于以下目录中：

    ```
    foo/bar/pirate/monkey/baz 
    ```

我们只是将文件移动到正确的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T20:45:03.213

我曾经因为在 facelet 中拼错了 bean 名称而遇到了这个错误。您也可以包含 facelet 代码吗？

# ssl - 修改“Machine Keys”文件夹的权限后 SSL 损坏 - 错误 107 (net::ERR_SSL_PROTOCOL_ERROR)：SSL 协议错误

> ID：14781094
> 
> 赞同：5
> 
> 时间：2013-02-08T20:48:08.527
> 
> 标签：ssl, iis-6, windows-server-2003, x509certificate

我在我的 STAGE 服务器（带有 IIS 6 的 Windows 2003 服务器）上运行了一个 ASP.NET Web 应用程序。

我已经开始在我的应用程序中使用[Google Analytics Core Reporting API](https://developers.google.com/analytics/devguides/reporting/core/v3/coreDevguide)，它在我的 DEV 盒（Windows 7 / IIS 7.5）上运行良好

当我将代码移动到 STAGE 服务器时，我开始收到[“系统找不到指定的文件”异常](https://stackoverflow.com/q/14263457/3661)；解决方案是使用 App Pool 标识加载用户配置文件，但 IIS 6 没有该功能。

我找到了 IIS 6 的解决方法，即授予 App Pool 帐户读/写权限

```
C:\Document and Settings\All Users\Application Data\Microsoft\Crypto\RSA\Machine Keys 
```

当我设置权限时，我已将它们应用于所有子实体（通过高级选项）；这不仅没有解决错误；但它也中断了与我网站的 SSL 连接。

我明白了`Error 107 (net::ERR_SSL_PROTOCOL_ERROR): SSL protocol error.`；非 SSL url 工作得很好。

我的问题是如何恢复正确的权限`C:\Document and Settings\All Users\Application Data\Microsoft\Crypto\RSA\Machine Keys`并修复我的 SSL 连接？

任何其他有关修复我的 SSL 连接的建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T08:38:17.830

我放弃了解决这个问题，因为无论如何我都将应用程序移动到不同的服务器；并且看起来没有任何其他应用程序受到影响。

然后我重新启动了 IIS，一切都崩溃了。

IIS 没有启动备份；`IIS Admin Service`不是以“错误 6：句柄无效”开头。

该错误帮助我找到了问题的根源，并找到了`MachineKeys`文件夹的正确权限。

[本文](http://sharepoint-geek.com/2010/05/05/iis-admin-error-handle-is-invalid-permissions-ssl-certificate-machinekeys/)向我指出[了 MachineKeys 文件夹的默认权限 - KB 278381](http://support.microsoft.com/default.aspx?scid=KB;EN-US;278381)，它具有正确的权限。

**注意：**知识库文章指出`Everyone`应该`Special Permissions`有`This folder only`; 然而 sharepoint-geek 的文章建议将这些权限应用于`This folder, subfolders, and files`（我这样做了）。

一旦权限被修复，`iisreset`工作，甚至我的 SSL 问题都得到了解决。

希望这可以节省几个小时的挫败感。

# css - Safari 停留在悬停状态 CSS 错误

> ID：14781105
> 
> 赞同：0
> 
> 时间：2013-02-08T20:48:41.900
> 
> 标签：css, drop-down-menu, hover

我有一个 CSS 下拉菜单。它适用于 Firefox、Chrome、IE7+，但不适用于 Safari。奇怪的。如果您在父菜单中，下拉菜单将保持 :hover 状态。

我可以很好地描述这一点，但基本上下拉菜单在任何页面上都可以正常工作，除非选择了父项。

工作正常： http: [//firstglancesolutions.kinetixbizsuite.com/](http://firstglancesolutions.kinetixbizsuite.com/) 不起作用： http: [//firstglancesolutions.kinetixbizsuite.com/services](http://firstglancesolutions.kinetixbizsuite.com/services)

添加的类应该只弄乱Safari，这似乎很奇怪？我一直在尝试仅使用 Safari 来查找错误或任何相关问题，但似乎无法对此进行调试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:40:50.887

主页和服务页面似乎都使用不同的方法来显示下拉菜单。主页更改`display`下拉菜单`UL`。Services 页面更改了`overflow`下拉列表的 parent `LI`，这似乎会导致 Safari 出现问题。我建议在所有页面上使用主页方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:35:21.487

在整个页面中，相同的 JavaScript`/CatalystScripts/Java_DynMenusSelectedCSS.js`被引用了五次。

尝试将其减少到只有一个，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:40:47.053

您还在使用 jQuery（第 14-18 行），但不包括 jquery js 文件。

# ruby-on-rails - 如何开始使用 Rails 4？

> ID：14781106
> 
> 赞同：0
> 
> 时间：2013-02-08T20:48:42.427
> 
> 标签：ruby-on-rails

目前有可能吗？有人可以指出好的资源吗？我只能找到不同的幻灯片“rails4 很酷”。还是我应该坚持使用rails3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T20:19:24.447

如果你正在学习rails，我会说继续它。如果您正在构建应用程序，您可能需要等待。社区还没有开始更新许多常见的 gem 以支持新版本，所以你可能会因为获得很多功能而感到沮丧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T20:52:37.393

Rails 4 是新的，目前不会有很多资源可供收集。但是您可以从以下位置开始：

[http://railscasts.com/episodes/400-what-s-new-in-rails-4](http://railscasts.com/episodes/400-what-s-new-in-rails-4)

[http://edgeguides.rubyonrails.org/4_0_release_notes.html](http://edgeguides.rubyonrails.org/4_0_release_notes.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:23:19.643

这需要很长的时间才能快速概述：[http ://blog.wyeworks.com/2012/11/13/rails-4-compilation-links/](http://blog.wyeworks.com/2012/11/13/rails-4-compilation-links/)

# jsf - 为什么我将 h:outputLabel 作为未知标签？

> ID：14781107
> 
> 赞同：2
> 
> 时间：2013-02-08T20:48:46.777
> 
> 标签：jsf, facelets

我正在尝试为我实习期间的一个项目学习 JSF，但我真的很挣扎。

谁能解释为什么在这段代码中我收到 h:outputLabel 的“未知标签”警告？

谢谢！

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0      Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Insert title here</title>
</head>
<body>

    <h:outputLabel value ="Welcome #{loginbean.name}"></h:outputLabel>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T20:50:24.790

因为您忘记声明`h:`XML 命名空间。

将该 XML 命名空间添加到您的`<html>`元素。

```
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"> 
```

### 也可以看看：

*   [我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)- 包含一个 Hello World

* * *

**与具体问题**无关**`<h:outputLabel>`，生成一个 HTML`<label>`元素，目的是标记 HTML 输入元素。您似乎只想显示一些文本。在这种情况下，您实际上使用了错误的元素，您应该使用`<h:outputText>`.**

 **```
<h:outputText value="Welcome #{loginbean.name}" /> 
```

或者更好的是，只需在模板文本中使用 EL。这在 JSF 1.x 中不受支持，但在 Facelets 上的 JSF 2.x 中受支持。

```
Welcome #{loginbean.name} 
```

### 也可以看看：

*   [是否建议对所有内容都使用 h:outputText ？](https://stackoverflow.com/questions/5539894/is-it-suggested-to-use-houtputtext-for-everything/5540859#5540859)**

# cocoa-touch - 从众多选项中选择一个 - 目标 c

> ID：14781113
> 
> 赞同：0
> 
> 时间：2013-02-08T20:49:25.380
> 
> 标签：cocoa-touch, user-interface, selection

嗨，我正在寻找一个组件，其中一个选项可以从给定的许多选项中选择。该组件允许用户只选择一个选项，一旦选择了任何选项，之前选择的选项就会被取消选择。当我查看 xcode 时，我找不到任何类似的组件。我在此处附上了正在寻找的组件的图像。任何人都可以在 xcode 中将我指向这个组件（请参阅附图）。![在此处输入图像描述](../Images/6fd9d3458949a4bc8df5fa14393b5a31.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:52:42.847

`UITableView`这对我来说很像。可能最容易与`UITableViewController`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:53:05.233

这是一个分组`UITableView`。您需要自己实现逻辑以在表视图委托中维护选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:56:05.250

在您的 UITableView 上转到您的属性检查器，在第三部分中有一个选项，标记为“选择”。有你的地方！

![在此处输入图像描述](../Images/f3ce434202e185416fa7472250858ab5.png)

# javascript - 将绑定应用于整个 dom 或需要它的每个单独元素？

> ID：14781120
> 
> 赞同：1
> 
> 时间：2013-02-08T20:50:13.087
> 
> 标签：javascript, coding-style, knockout.js

新的淘汰赛。什么更易于维护并被视为更好的编码实践？

A）我应该创建 1 个大型视图模型并将该绑定应用到整个 dom 吗？
B）我应该创建许多模型并将它们的绑定应用于需要该模型的每个元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:35:37.833

我将创建一个主视图模型，该模型在其中创建其他视图模型，然后在将主视图模型绑定到或绑定到任何内容后执行类似的操作。

```
<body id="bind-the-master-to-me">
    <!-- ko with: childViewModelA -->
    <div data-bind="visible: shouldIBeVisible">...</div>
    <!-- /ko -->

    <!-- ko with: childViewModelB -->
    <div data-bind="foreach: somePropOfB">...</div>
    <!-- /ko -->
</body> 
```

希望有帮助

# php - 在 Xvfb 上运行 Selenium Webdriver - firefox 错误

> ID：14781123
> 
> 赞同：1
> 
> 时间：2013-02-08T20:50:29.547
> 
> 标签：php, firefox, selenium, xvfb

我正在尝试在安装了 firefox 10.0.12 的 centros 上运行的服务器上运行一些自动化的 Selenium 测试，如下所示：

```
Xvfb :99 -screen 0 800x600x16&
export DISPLAY=:99;
java -jar ./autotesting/selenium-server-standalone-2.28.0.jar&
php ./autotesting/index.php; 
```

index.php 指向一个 SimpleTest 测试类，它像这样启动一个 WebDriver 会话（使用 facebook php 绑定）：

```
$webdriver = new WebDriver();
$this->session = $webdriver->session('firefox');
$this->session->open($this->url); 
```

它在我的本地机器上运行，但在服务器上我得到以下输出：

```
13:17:11.344 INFO - Executing: [new session: {browserName=firefox}] at URL: /session)
org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on       port 7055 after 45000 ms. Firefox console output:
mkdir: `99/.mozilla/extensions/{ec8030f7-c20a-464f-9b0e-13a3a9e97384}': Not a directory

(Gecko:8766): libgnomevfs-WARNING **: Unable to create ~/.gnome2 directory: Not a directory
Could not create per-user gnome configuration directory `99/.gnome2/': Not a directory
mkdir: `99/.mozilla/extensions/{ec8030f7-c20a-464f-9b0e-13a3a9e97384}': Not a directory 
```

我对幕后发生的事情知之甚少，无法解决这个问题 - 为什么在 firefox 运行时执行 mkdir 命令？是否因为我不是root用户而失败？

# php - 从数据库中选择随机值并将其链接到另一行

> ID：14781124
> 
> 赞同：0
> 
> 时间：2013-02-08T20:50:29.883
> 
> 标签：php, mysql, select, random

我正在尝试链接数据库中的 2 行，以便 PHP 代码从一行中随机选择一个值，并将其链接到第二行。例子：

```
<?php

date_default_timezone_set("Asia/Tel_Aviv");

$mysqli = new mysqli;
$mysqli->connect("localhost", "root", "", "root");

$giftsq = $mysqli->query("SELECT * FROM `gifts`");
while($gifts = $giftsq->fetch_array())
{
    $date = date('H:i');
    if ($gifts['time'] <= $date)
    {
        $giftsid = $gifts['id'];
        // $mysqli->query("DELETE FROM `gifts` WHERE `id` = '".$giftsid."'");
        $winner = $mysqli->query("SELECT * FROM `giveaways` WHERE `giftid` = '".$giftsid."' ORDER BY RAND() LIMIT 1") or die('Error:'.$mysqli->error);
        if($winner->num_rows >= 1)
        {
            $newwinner = $winner->fetch_array;
            echo $newwinner['userid'];
        }
    }
}

?> 
```

您可以看到它选择了所有日期小于或等于当前日期的礼物 ID。When the correct giftIDs are selected, the system want to select randomly a winner by selecting the same giftid on the second row called `giveaways`.

但由于某种原因它不起作用..

这是数据库的抽象：

## 礼物

时间是代表礼物赠品的结束时间。

```
id ------ title ------ img ------ creator ------ members ------ points ------ time
3         dota         1.png      Captain        250            30000         14:00
6         gta          2.png      User           303            20000         24:00
7         flolo        3.png      Captain        204            10000         22:30 
```

## 赠品

```
id ------ giftid ------ userid
1           2           765611980448343721
2           6           765611980448343723
3           6           176561198044834371
4           6           176561198044834372
5           7           184582450892423483
6           7           423894024830294820 
```

所有这些过程的结果是，我应该打印到屏幕上，已为gifid 编号 6 选择的用户 ID 是以下用户之一：176561198044834371 176561198044834372 176561198044834373

并且选择的giftid号7随机是以下用户之一：184582450892423483 423894024830294820

有人可以帮我理解如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:08:17.677

尽可能多地使用 SQL 语句。可能有一种方法可以将它们组合成一个，但这只是一个简单的示例：

```
$time = date("H:i");

$sql = $mysqli->query("SELECT gift_id FROM gifts WHERE gift_time <= '$time'");

while($row = $sql->fetch_array())
{
    $gift = $row['g_id'];

    $g_sql = $mysqli->query("SELECT * FROM giveaways WHERE gift_id = '$gift' ORDER BY RAND() LIMIT 1");
    $g_row = $g_sql->fetch_array();

    echo '<p>' . $g_row['user_id'] . '</p>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:17:37.390

为什么要在 PHP 中进行过滤？这是非常低效的。为什么不简单地做

```
SELECT ...
FROM ...
WHERE time <= CURTIME() 
```

# php - PHP数组数学，删除重复和添加数组行

> ID：14781125
> 
> 赞同：0
> 
> 时间：2013-02-08T20:50:33.653
> 
> 标签：php, arrays, addition

我有一个包含两个值的数组，用户 ID 和事务值。userID 不是唯一的，我想要一个相同值的列表/数组，只是“总结”。含义：如果用户 ID 出现的次数更多，那么我希望将第二个值（交易）加在一起。我将发布一个示例。

```
$a = array(
    1 => 1,
    1 => 2,
    2 => 3,
    2 => -17
); 
```

运行所需的任何功能后的结果是：

```
$a = array(
    1 => 3,
    2 => -14
); 
```

因此没有重复的用户 ID，并且交易值被添加到用户 ID 的一个条目中。

我从 SQL 数据库中获取这些值，所以如果我可以用 SQL 视图或其他东西解决这个问题，那也将是一个有效的答案:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:54:40.443

在 sql 中，如果你的列是 id 和 value，你可以这样做

```
select sum(value) from table_name group by id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:54:56.247

看看这个

```
$array = array_unique($array); 
```

[function.array 唯一](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-08T20:54:19.150

```
$a = array(
    1 => 1,
    1 => 2,
    2 => 3,
    2 => -17
);

$b = array_unique($a); 
```

# php - magento 安装错误

> ID：14781131
> 
> 赞同：1
> 
> 时间：2013-02-08T20:50:54.713
> 
> 标签：php, zend-framework, magento

安装 Magento 后，在导入数据库时​​没有错误，我在前端[http://metalhouse.devpassion.eu/](http://metalhouse.devpassion.eu/)上遇到了一些奇怪的错误：

```
There has been an error processing your request
The PDO extension is required for this adapter but the extension is not loaded

Trace:
#0 /home/kiwikiwi/public_html/metalhouse/lib/Zend/Db/Adapter/Abstract.php(247): Zend_Db_Adapter_Pdo_Abstract->setFetchMode(2)
#1 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Resource.php(165): Zend_Db_Adapter_Abstract->__construct(Array)
#2 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Resource.php(110): Mage_Core_Model_Resource->_newConnection('pdo_mysql', Object(Mage_Core_Model_Config_Element))
#3 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(320): Mage_Core_Model_Resource->getConnection('core_read')
#4 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(335): Mage_Core_Model_Resource_Db_Abstract->_getConnection('read')
#5 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Resource/Db/Abstract.php(355): Mage_Core_Model_Resource_Db_Abstract->_getReadAdapter()
#6 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Resource/Db/Collection/Abstract.php(134): Mage_Core_Model_Resource_Db_Abstract->getReadConnection()
#7 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Config.php(1350): Mage_Core_Model_Resource_Db_Collection_Abstract->__construct(Object(Mage_Core_Model_Resource_Website))
#8 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Config.php(1386): Mage_Core_Model_Config->getModelInstance('core_resource/w...', Object(Mage_Core_Model_Resource_Website))
#9 /home/kiwikiwi/public_html/metalhouse/app/Mage.php(460): Mage_Core_Model_Config->getResourceModelInstance('core/website_co...', Object(Mage_Core_Model_Resource_Website))
#10 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Abstract.php(208): Mage::getResourceModel('core/website_co...', Object(Mage_Core_Model_Resource_Website))
#11 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/Abstract.php(213): Mage_Core_Model_Abstract->getResourceCollection()
#12 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/App.php(602): Mage_Core_Model_Abstract->getCollection()
#13 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/App.php(460): Mage_Core_Model_App->_initStores()
#14 /home/kiwikiwi/public_html/metalhouse/app/code/core/Mage/Core/Model/App.php(344): Mage_Core_Model_App->_initCurrentStore('', 'store')
#15 /home/kiwikiwi/public_html/metalhouse/app/Mage.php(640): Mage_Core_Model_App->run(Array)
#16 /home/kiwikiwi/public_html/metalhouse/index.php(80): Mage::run('', 'store')
#17 {main} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:45:29.490

### 检查要求

为了运行 Magento，您的服务器需要满足一些基本的软件要求。听起来您还没有配置启用 PDO 的 PHP。

您可以按照以下简单步骤测试服务器的兼容性：

1.  [将magento-check](http://www.magentocommerce.com/_media/magento-check.zip)文件下载到您的计算机并解压缩。
2.  将提取的 magento-check.php 文件上传到服务器上的 Magento 目录
3.  在浏览器中导航到此页面`/magento-check.php`

### 安装 PDO

您可以通过命令行相当容易地安装它

```
pecl install pdo_mysql 
```

然后在安装完成后，请务必将其添加到您的`php.ini`并重新启动 Apache/Nginx 等。

```
extension=pdo_mysql.so 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:08:39.610

Magento 在 PDO 期间使用数据库。在您的服务器上未安装此模块。或者没有在 PHP 上激活。

使用 phpinfo() 创建文件并检查它。如果未安装 PDO，请联系您的系统管理员或托管支持并要求解决此问题。

# java - 将 javascript json 对象转换为 Java json 对象

> ID：14781135
> 
> 赞同：0
> 
> 时间：2013-02-08T20:51:07.450
> 
> 标签：java, json

我正在尝试将以下脚本转换为 java json，但是我失败了`"aTargets", [0]`

我不确定如何创建一个只有零的数组。

要转换的脚本，

```
var oTable = $('#example').dataTable( {
        "aoColumnDefs": [
            { "bSortable": false, "aTargets": [ 0 ] }
        ],
        "aaSorting": [[1, 'asc']]
}); 
```

我的爪哇

```
 public JSONObject getOptions() {
        JSONObject json = new JSONObject();
        json.put("aoColumnDefs", new JSONArray()
                //Failing here
                .put(new JSONObject("bSortable", "false", "aTargets", "[0]")));
                                                          //Failing here too
        json.put("aaSorting", new JSONArray(new JSONArray(1, 'asc')));
        return json;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:01:56.983

这是未经测试的，但我相信它是正确的：

```
JSONObject json = new JSONObject();
json.put("aoColumnDefs", new JSONArray()
  .put(new JSONObject("bSortable", "false", "aTargets", new JSONArray().put(0))));
json.put("aaSorting", new JSONArray().put(new JSONArray().put(1, "asc")); 
```

# sql-server - 架构更新正在终止，因为可能会发生数据丢失

> ID：14781137
> 
> 赞同：41
> 
> 时间：2013-02-08T20:51:12.167
> 
> 标签：sql-server, visual-studio-lightswitch

我不断遇到这个错误，这通常是由我在构建应用程序时犯的一些错误引起的`Lightswitch`。它通常与关系相关联。在发布应用程序并看到错误之前，我通常会继续前进并做很多事情。到这个时候，很难计算出我做错了什么。有没有办法追溯这个错误以查看我需要在表格中更改什么？

> Net SqlClient 数据提供程序：检测到消息 50000、级别 16、状态 127、第 6 行。架构更新正在终止，因为可能会发生数据丢失。

谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-09T15:55:15.373

当您对实体的属性（在表设计器中）所做的更改会导致已发布数据库中的实体表被删除并重新创建，并且表中包含数据时，就会发生此错误。这正是 SQL Server 的工作方式，它不受 LightSwitch 的控制。但是，LightSwitch 会谨慎行事，并且不允许进行可能导致任何数据丢失的操作。

可能触发这种情况的事情类型是：

*   *重命名*属性
*   将其从*需要*更改为*不需要*等
*   更改属性的*数据类型*
*   & 甚至（如果我没记错的话）改变属性在属性列表中的*位置*

但是，您可以将属性添加到属性列表的末尾，而不会触发表被删除和重新创建。

在尝试发布应用程序之前进行太多更改确实不是一个好主意，这正是您建议的原因 - 最终不知道您做了什么。您特别希望在对实体的属性进行任何更改后发布。即使您只是发布到开发机器上的本地 SQL Server 实例（包括 SQL Express），也要在发布到生产服务器之前“测试”您的更改。

我解决这个问题的方法（当我过去仍然习惯使用 LS 的内在数据时，ApplicationData - 我现在使用附加的数据源）是手动更改数据库本身中的列，使用类似 SSMS（SQL服务器管理工​​作室）。然后，您可以决定允许（潜在的）数据丢失。**更改的内容**要非常小心，并确保它仅与您对 LightSwitch 中的属性所做的更改**相同。**当然，在对其进行任何更改之前备份数据库。如果您导致数据库与 LightSwitch 不同步，您将遇到重大问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-30T15:01:11.110

可以作为问题线索的一项在错误消息中。例如，在上面的错误消息 [Msg 50000, Level 16, State 127, Line 6] 中，第 6 行指的是 .publish.sql 文件中的行号，它是构建的一部分。该文件可以在项目的 /bin/Debug 子目录中找到。由于它是一个文本文件，你可以用任何文本编辑器或VS2012打开该文件来查看该文件并找到出现错误的行号。

在我的特定问题中，我删除了一个不再需要的列。在生成的 .publish.sql 文件中，我能够找到检查我正在更改的表中的行的 IF EXISTS 行。由于我知道这个更改不会破坏我关心的数据，所以我只是将 VS2012 中的 IF EXISTS 行注释掉，然后再次执行脚本。改变按计划进行。

**请注意：此建议覆盖了为保护您的数据而设置的安全防护措施。仅当您感觉舒适时才进行此更改。 *********

 *** * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-01-14T18:32:49.533

当项目发布失败并出现“架构更新正在终止，因为可能会发生数据丢失”之类的错误时

右键单击项目->发布单击高级，在常规选项卡中->***选中“如果可能发生数据丢失，则阻止增量部署”***，在放置选项卡中->将***对象放置在目标中而不是源中*** ，然后单击确定以发布

注意：有时当上述方法不起作用时，请尝试：“取消选中”阻止增量部署和发布

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-14T12:44:37.590

如果您在 Visual Studio 中比较两个模式。单击数据工具操作菜单中的查看结果。

[![在此处输入图像描述](../Images/32b6b39727ef5b1fde535df9faf306b2.png)](https://i.stack.imgur.com/HCfBw.png)

在每个错误上方都会对导致您的错误的原因进行评论。这将为您提供错误详细信息。

[![在此处输入图像描述](../Images/903ec507e3a0f28a6da2868af15992a2.png)](https://i.stack.imgur.com/VZxfD.png)**

# c# - Windows 8 的 Scrollviewer 在缩放后无法正确平移

> ID：14781144
> 
> 赞同：1
> 
> 时间：2013-02-08T20:51:26.847
> 
> 标签：c#, windows-runtime, windows-store-apps, winrt-xaml, scrollviewer

我的滚动查看器上的放大按钮有问题。

查看器的内部是一个网格。在该网格内部是一堆按特定顺序排列的图像。理想情况下，我想通过单击按钮从图像转到图像，并且我已经实现了这一点。我有一个正常工作的缩小按钮，但是当我放大时......它不会滚动到我想要的位置。我使用图像的边距滚动到它。

我似乎遇到的问题是可滚动的高度和宽度没有更新。

当按下缩小时，我调用：

```
zoomFactor = 1;
rosaryScroll.ZoomToFactor(zoomFactor);
rosaryScroll.InvalidateScrollInfo();
setRosaryState(rosaryState); 
```

通过使用其边距和滚动查看器的大小将图像居中到滚动查看器上，将念珠状态滚动到查看器中的特定图像。

```
rosaryScroll.ScrollToHorizontalOffset(
     (selectedBead.Margin.Left
     + (selectedBead.Width / 2)
     + rosaryScroll.Margin.Left / 2)
     * zoomFactor);
rosaryScroll.ScrollToVerticalOffset(
     (selectedBead.Margin.Top
     - (selectedBead.Height / 2)
     - rosaryScroll.Margin.Top / 2)
     * zoomFactor); 
```

当我缩小（zoomFactor 为 5）时，可滚动的高度/宽度很好并且易于滚动。rosaryScroll.ScrollableHeight= 2336.0 双 rosaryScroll.ScrollableWidth= 2584.0 双

但是当我放大（zoomFactor 为 1）时，可滚动的高度/宽度仍然很小 rosaryScroll.ScrollableHeight= 84.0 double rosaryScroll.ScrollableWidth= 0.0 double

那么在我的缩放调用之后如何更新这个 Scrollable Height 和 Width 呢？InvalidateScrollInfo() 似乎无效...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T05:50:17.810

我会考虑放弃使用`ScrollViewer`基于操作事件和渲染转换的解决方案并推出您自己的解决方案。正如您所注意到的 -`ScrollViewer`不是为了简单的编程操作而编写的，它会让您难以实现任何不是为它设计的自定义行为。属性不会根据请求立即更新，您可能需要等待某些事件（例如`ViewChanged`）才能看到新值。您可以尝试使用我编写的[扩展](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/1086dee22b9d#WinRTXamlToolkit/Controls/Extensions/ScrollViewerExtensions.cs)来为偏移和缩放因子值设置动画，但请注意，这些有点笨拙，有些人的行为有问题。

# java - 程序之间的通信

> ID：14781147
> 
> 赞同：0
> 
> 时间：2013-02-08T20:51:38.563
> 
> 标签：java

我在这里有 2 个一般性问题：

首先，假设我有 2 个 Java 程序正在运行。几乎就像一个响应者和一个执行者。

执行者可以从响应者发出命令、请求等。我知道可以通过多线程将它们都打包为一个程序，但不一定只有 1 个响应者，可能有 3 个，甚至可能是 0 个响应者。

这两个程序“通信”（例如流）的最佳方式是什么，这意味着我无法访问其他适配器？

第二个问题：

有没有办法检查 Java 程序是否已经打开？因此，如果我运行一个程序，如果第一个程序仍在运行，我将无法第二次运行它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T20:55:40.880

1.  您必须明确编写基于套接字的解决方案。今天我想 REST 将是最明显的选择。一个更重量级的解决方案是基于 JMS 的（涉及一个独立的消息队列，也基于 socked）。

2.  是的，有一种方法，但没有开箱即用的方法。它通常涉及创建检查是否存在的临时文件。提供了一些方便的方法，例如`createTemporaryFile`处理`deleteOnExit`低级工作的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T20:57:22.067

您必须选择程序之间的通信级别。在 Java 中，最低级别的通信将通过 Socket API。除此之外，还实现了许多其他协议：RMI、Corba、各种 Web 服务等。

为了确保 1 个实例运行，您必须依赖该实例之外的东西。我能想到：

*   运行应用程序创建的外部文件。
*   运行应用程序产生的数据库记录。
*   由您正在运行的应用程序打开的端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T22:16:06.697

您的两个问题的答案都可以使用 Sockets

1-对于通信，多线程客户端/服务器应用程序可能是一个很好的解决方案

2-要检查程序是否已经在运行，作为一种解决方法（除了使用文件），您可以侦听某个端口，因此如果程序的另一个实例未能侦听此端口，则意味着程序已经在运行。

您可以将侦听的端口存储在文件中，而不是对其进行硬编码，以避免与可能偶然使用相同端口的其他应用程序发生冲突。

# jquery - 编写这个 jQuery 的更优雅的方式？

> ID：14781148
> 
> 赞同：2
> 
> 时间：2013-02-08T20:51:47.240
> 
> 标签：jquery, toggleclass

尽管它是切换的，但我不得不将其分解为两部分。这是因为我想让动画在添加和删除类时有所不同。

**添加**活动类后，我需要 UL 等到活动 CSS 转换完成（0.2 秒），然后触发 jQuery。

**移除**活动类后，我需要先触发 UL 宽度动画，然后在完成时移除活动类。

现在正因为如此，它感觉又脏又便宜。有没有简单优雅的解决方案？

```
// toggle filters
$(".filter .toggle").on('click', function () {

    if ($('.toggle').hasClass('active')) {

        $('.filter ul').animate({
            width: 'toggle'
        }, 500, function () {
            $('.filter .toggle').toggleClass('active');
        });

    } else {
        $('.filter').find('.toggle').toggleClass('active').end()
            .find('ul').delay(150).animate({
            width: 'toggle'
        }, 500);
    }

}); 
```

这是我的困境的[一个小提琴](http://jsfiddle.net/zX9SJ/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:05:33.507

尝试这个：

[**这是jsFiddle。**](http://jsfiddle.net/Td95k/11/)

```
if ( !$('.filter ul').is(':animated') && $('.toggle').hasClass('active') ) {

    $('.filter ul').stop().animate({
        width: 'toggle'
    }, 500, function () {
        $('.filter .toggle').toggleClass('active');
    });

} else {
    $('.filter').find('.toggle').toggleClass('active').end()
        .find('ul').animate({width: 'toggle'
    }, 500);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:07:27.163

此模式适用于不同元素上的各种可逆动画队列：

*   将您的序列放入一组闭包中。
*   `reverse`如果您希望它向后运行，请调用它。
*   `reduce`将数组放入 JQuery 承诺链中。

```
$(".filter .toggle").on('click', function () {
  var a = [ function() { return $('.filter .toggle').toggleClass("active"); } , 
            function() { return $('.filter ul').animate({width: 'toggle'}, 500); } ];
  if ($(this).hasClass('active')) a.reverse();
  a.reduce(function(p,c){ return p.then(function(){return c().promise();}); }, $.when());
}); 
```

# objective-c - 让我的子类拦截消息

> ID：14781149
> 
> 赞同：0
> 
> 时间：2013-02-08T20:51:56.990
> 
> 标签：objective-c, macos, cocoa

我有一个`NSPopUpButton`子类，我计划在我的程序中的多个位置使用它。它是子类的，因为它具有特殊的功能。

通常要接收动作事件，您在控制器类中创建一个方法，然后将其与接口构建器连接以处理动作。例如，如果用户更改了其中的一个选项，`NSPopUpButton`它将向界面构建器操作方法发送一条消息，如下所示。

```
- (IBAction)sourcePopUpMenuChanged:(id)sender {
    NSLog(@"sourcePopUpMenuChanged");
} 
```

在大多数情况下这很好，但在我的情况下，我想让它把消息发送到它自己的子类而不是控制器类。我想这样做是因为我在后台设置了一个全局变量来跟踪 的索引`popUpMenu`，因为弹出菜单出现在我的应用程序的许多不同窗口中。

我知道我可以`IBAction`为这个控件的每个窗口创建事件并每次手动设置全局变量，但这似乎效率低下。

有没有办法，如果我的控件的任何实例收到“操作”消息，我可以运行某种代码，例如，为`gIndex = PopUpMenu Index Selected`.

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:59:31.613

要回答您的问题，您可以覆盖子类`sendAction:to:`上的方法`NSPopUpButton`来完成您的工作。只是不要忘记调用`super`，以便将操作消息转发给常规接收者。

当控件想要发送配置的操作时，它使用`sendAction:to:`调用的方法`sendAction:to:from:`（`NSApp`单个`NSApplication`实例）。此方法遵循响应者链来查找操作消息的最终接收者。

# javascript - 如何在javascript中比较两个字符串日期？

> ID：14781153
> 
> 赞同：73
> 
> 时间：2013-02-08T20:52:08.103
> 
> 标签：javascript, date

我有两个格式为 m/d/yyyy 的字符串日期。例如，“2012 年 11 月 1 日”、“2013 年 1 月 2 日”。我正在用 JavaScript 编写一个函数来比较两个字符串日期。我的函数的签名是 `bool isLater(string1, string2),`如果string1传递的日期晚于string2传递的日期，它将返回true，否则返回false。因此，isLater(“1/2/2013”​​, “11/1/2012”) 应该返回 true。如何为此编写 JavaScript 函数？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-02-08T20:57:33.857

```
var d1 = Date.parse("2012-11-01");
var d2 = Date.parse("2012-11-04");
if (d1 < d2) {
    alert ("Error!");
} 
```

[演示 Jsfiddle](https://jsfiddle.net/v01obvwy/322/)

最近从评论中发现，您可以直接比较如下字符串

```
if ("2012-11-01" < "2012-11-04") {
    alert ("Error!");
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-03-13T10:03:38.533

您可以简单地比较 2 个字符串

```
function isLater(dateString1, dateString2) {
  return dateString1 > dateString2
} 
```

然后

```
isLater("2012-12-01", "2012-11-01") 
```

返回真，而

```
isLater("2012-12-01", "2013-11-01") 
```

返回假

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-08T20:54:42.223

解析日期并像数字一样比较它们：

```
function isLater(str1, str2)
{
    return new Date(str1) > new Date(str2);
} 
```

如果您需要支持其他日期格式，请考虑使用[date.js](http://www.datejs.com/)等库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-22T12:57:31.343

直接解析不是 yyyy-mm-dd 格式的日期字符串，就像在[接受的答案](https://stackoverflow.com/a/14781232/7384523)中一样不起作用。[vitran](https://stackoverflow.com/a/43661403/7384523)的答案确实有效，但混合了一些 JQuery，所以我对其进行了一些修改。

```
// Takes two strings as input, format is dd/mm/yyyy
// returns true if d1 is smaller than or equal to d2

function compareDates(d1, d2){
var parts =d1.split('/');
var d1 = Number(parts[2] + parts[1] + parts[0]);
parts = d2.split('/');
var d2 = Number(parts[2] + parts[1] + parts[0]);
return d1 <= d2;
} 
```

PS 会直接评论 vitran 的帖子，但我没有代表这样做。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-04-27T15:00:48.393

如果您的日期不是标准格式 yyyy-mm-dd (2017-02-06)，例如 20/06/2016。您可以使用此代码

```
var parts ='01/07/2016'.val().split('/');
var d1 = Number(parts[2] + parts[1] + parts[0]);
parts ='20/06/2016'.val().split('/');
var d2 = Number(parts[2] + parts[1] + parts[0]);
return d1 > d2 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-07-23T18:38:09.673

您可以使用“Date.parse()”正确比较日期，但由于在大多数评论中，人们都试图拆分字符串，然后尝试将数字相加并与明显错误的逻辑进行比较 - 不完全。

这是诀窍。如果您要破坏字符串，则以嵌套格式比较各个部分。

比较年与年，月与月，日与日。

```
<pre><code>

var parts1 = "26/07/2020".split('/');
var parts2 = "26/07/2020".split('/');

var latest = false;

if (parseInt(parts1[2]) > parseInt(parts2[2])) {
    latest = true;
} else if (parseInt(parts1[2]) == parseInt(parts2[2])) {
    if (parseInt(parts1[1]) > parseInt(parts2[1])) {
        latest = true;
    } else if (parseInt(parts1[1]) == parseInt(parts2[1])) {
        if (parseInt(parts1[0]) >= parseInt(parts2[0])) {
            latest = true;
        } 
    }
}

return latest;

</code></pre> 
```

# jquery - Jquery .load() 没有持续触发

> ID：14781159
> 
> 赞同：0
> 
> 时间：2013-02-08T20:52:24.630
> 
> 标签：jquery, load

我有以下代码：

```
$('#result').load('http://www.mystie.com/speicificpage h2:contains(unique1)'); 
```

它工作得很好但有时根本不起作用..我不知道为什么..

我尝试使用 ajax 而不是缓存，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:58:44.807

[如果人们以http://mystie.com/](http://mystie.com/)而不是[http://www.mystie.com/](http://www.mystie.com/)访问您的页面，它是否可能不起作用？在这种情况下，请求可能被视为“跨域”。将其更改为：

```
$('#result').load('/speicificpage h2:contains(unique1)'); 
```

可能有帮助。

（哦，这`h2:contains(unique1)`真的是 url 的一部分吗？在我看来更像是 jQuery CSS 选择器的一部分。只是想知道。）

# c - C内部循环中的奇怪计数器变量，没有变回

> ID：14781166
> 
> 赞同：-2
> 
> 时间：2013-02-08T20:52:37.627
> 
> 标签：c, counter

注意我的计数器变量。请注意我如何在第二个 while 循环上方将其设置为 0。出于某种原因，我的 printf(counter) 语句说计数器永远不会重置为零。它只是在文件末尾继续++ing。这完全打乱了我对这个程序的逻辑。有什么帮助吗？

```
ch=fgetc(fp);
while(ch != EOF)
{
    counter = 0;
    while(ch != '\n' && ch!=EOF)
    {
        char word[32] = "";

        // keeps track of the current run thru of the
        //  loop so we know what input we're looking at.
        counter = counter+1;
        while(ch != ' ' && ch!='\n' && ch!=EOF)
        {
            // the following block builds up a character
            //  array from the current "word" (separated
            //  by spaces) in the input file.
            int len = strlen(word);
            word[len] = ch;
            word[len+1] = '\0';
            ch = fgetc(fp);
        }

        // the following if-else block sets the variables
        //  TextA, TextB, and TextC to the appropriate Supply Types.
        //  this part may be confusing to read mentally, but not to
        //  trace; all it does is logically set TextA, B, and C.
        if(counter==1)
        {
            if(strlen(TextA)==0)
            {
                strcpy(TextA,word);
            }
            else if(strlen(TextB)==0 && strcmp(word,TextA)!=0 && strcmp(word,TextC)!=0)
            {
                strcpy(TextB,word);
            }
            else if(strlen(TextC)==0 && strcmp(word,TextA)!=0 && strcmp(word,TextB)!=0)
            {
                strcpy(TextC,word);
            }
        }

        printf("TextA:  %s, TextB:  %s, TextC:  %s  word:   %s \n",TextA,TextB,TextC,word);
        printf("i equals:  %d",counter);

        switch(counter)
        {
            case 1:
                printf("Got in case 1.");
                if(strcmp(TextA,word)==0)
                {
                    SubTypeOption = 1;
                }
                else if(strcmp(TextB,word)==0)
                {
                    SubTypeOption = 2;
                }
                else if(strcmp(TextC,word)==0)
                {
                    SubTypeOption = 3;
                }
                break;

            case 2:
                // We actually ultimately don't need to keep track of
                // the product's name, so we do nothing for case i=2.
                // Included for readibility.
                break;

            case 3:
                WholesalePrice = atof(word);
                break;

            case 4:
                WholesaleAmount = atoi(word);
                break;

            case 5:
                RetailPrice = atof(word);
                break;

            case 6:
                RetailAmount = atoi(word);
                break;
        } //End switch(counter)

        if(ch='\n')
            counter = 0;

        ch = fgetc(fp);

    }//End while(ch != '\n')

    //The following if-else block "tallys up" the total amounts of SubTypes bought and sold by the owner.

    if(SubTypeOption == 1)
    {
        SubType1OwnersCost = SubType1OwnersCost + (WholesalePrice*(float)WholesaleAmount);
        SubType1ConsumersCost = SubType1ConsumersCost + (RetailPrice *(float)RetailAmount);
    }
    else if(SubTypeOption == 2)
    {
        SubType2OwnersCost = SubType2OwnersCost + (WholesalePrice*(float)WholesaleAmount);
        SubType2ConsumersCost = SubType2ConsumersCost + (RetailPrice *(float)RetailAmount);
    }
    else if(SubTypeOption == 3)
    {
        SubType3OwnersCost = SubType3OwnersCost + (WholesalePrice*(float)WholesaleAmount);
        SubType3ConsumersCost = SubType3ConsumersCost + (RetailPrice *(float)RetailAmount);
    }

}//End while((ch = fgetc(fp))!= EOF) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T20:57:45.983

一些想法：

1.  是什么类型的`ch`？应该是`int`。（注意`fgetc`返回`int`）。如果是，`char`则表达式`ch != EOF`可能无法按您的预期工作。

2.  如果输入超过 16 个字符，我可以很好地看到`counter`被重置。这取决于您的编译器生成的确切代码，但是如果您将某些内容存储在`word[16]`（第 17 个字节）并且`counter`紧跟在堆栈上`word`，您将开始将字符写入包含`counter`.

# ruby-on-rails - 如何模仿 Ruby on Rails 开发环境

> ID：14781167
> 
> 赞同：1
> 
> 时间：2013-02-08T20:52:38.590
> 
> 标签：ruby-on-rails, development-environment

我是 Ruby on Rails 开发的新手。我的任务是对现有的 Ruby on Rails 网站进行一些更改，该网站由另一位 ROR 开发人员创建。我的问题是，如何设置一个模仿以前开发人员使用的本地开发环境？应用程序中是否有某些文件可以指导我完成此过程？比如如何连接到暂存数据库，哪个是正确的本地服务器来运行等等。

几个星期以来，我一直试图弄清楚这一点。在之前的项目中，我对应用程序进行了更改，然后将其推送到 heroku 上的暂存版本。我知道这是一种可怕的做事方式，但我别无选择。而且，我不想在这种情况下再次这样做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:09:49.770

第一步：如果之前的开发人员没有给您留下任何设置说明，请先记下您所学的内容，以便下一位从事该项目的开发人员起床并更快地进行。

首先，您需要确保您使用的是相同版本的 ruby​​。检查项目的根目录是否有 .rvmrc 或 .ruby-version 文件或类似文件。您也许还可以看到 prod 中使用的版本。

接下来，对于数据库配置，在 config/database.yml 中查找它期望找到数据库的位置。通常会有一个用于在您的本地机器上运行的开发，一个用于测试，一个用于生产，但也可能有其他的。在我们的组织中，config/database.yml 是 config/databases 中配置文件的符号链接，我们为开发、质量保证和生产环境提供不同的设置，以及为个人开发人员定制的设置。如果您的公司碰巧在“中心”位置有一个开发模式数据库，您可以配置您的设置以使用该数据库，而不必在您自己的机器上进行设置。

请特别注意“测试”数据库设置，因为每次测试运行时该数据库都会被破坏并重新创建。

接下来，运行 'bundle install' 并确保所有 gem 都安装无误。安装完所有 gem 后，您可能只想加载 rails 控制台以确保环境正确初始化。接下来，尝试通过“rake test”或“rake spec”运行测试套件。

希望一旦这一切都运行起来，您将能够通过控制台中的“rails s”启动本地服务器，并将浏览器指向 localhost:3000。如果项目使用其他服务，如 memcached、redis 或工头，您可能需要为这些东西做额外的设置。

您可能还想阅读[Thoughtbot 如何处理这个问题](http://robots.thoughtbot.com/post/41439635905/bin-setup)，以及关于使用 vagrant 的评论。

# .htaccess - 通过 /beta 扩展将域重定向到启动页面和访问站点

> ID：14781176
> 
> 赞同：0
> 
> 时间：2013-02-08T20:53:25.867
> 
> 标签：.htaccess, redirect, dns, subdomain, launch

我有一个处于 beta 模式的网站，我也有一个 LaunchRock 页面设置。我需要进行设置，以便 mydomain.com 指向启动页面 (signup.mydomain.com) 但仍显示 mydomain.com。但是，我仍然需要通过访问 mydomain.com/beta 来访问 beta 站点，而无需将该站点从当前目录中移出。有什么方法可以通过 Apache .htaccess Redirect 来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:13:53.767

在没有实际重定向的情况下，我无法让您的第一个要求自己工作，直到我看到 Clemens 关于代理的回答，所以我将它合并到这里。

```
RewriteEngine On

#Redirect to signup.mydomain.com if not requesting /beta
RewriteCond %{REQUEST_URI} !^/beta(/|$)
RewriteCond %{QUERY_STRING} !beta=true
RewriteRule (.*) http://signup.mydomain.com/$1 [P]

#Strip /beta and append beta=true query string
RewriteCond %{REQUEST_URI} ^/beta
RewriteRule beta(.*) $1?beta=true [QSA] 
```

这基本上从您的查询中删除 /beta 并将 beta=true 查询附加到您的查询字符串是什么。然后它第二次检查这个新的查询字符串。

如果您在程序中的某处使用 beta=true，只需将其更改为其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:08:18.987

`mod_rewrite`希望在这里成为您的朋友，如果您将以下`.htaccess`文件放在文档根目录中（或者最好将其放在 apache 配置文件中，或者`conf.d`如果您的安装有一个目录 - 如果您在那里有写访问权限）。

```
RewriteEngine On

RewriteCond %{PATH_INFO} !^/beta
RewriteRule (.*) http://signup.mydomain.com/$1 [P] 
```

它应该如何工作？

第一行激活重写（如果已经打开，可能不需要）。

下一行定义了一个条件：如果 url 的路径以 开头`/beta`，则不要在下一行应用该规则。(`^/beta`是正则表达式，`!`前面的表示不匹配就应用。)

最后一行首先说匹配传入的“所有内容”并将其发送到`http://signup.mydomain.com/`，附加任何传入的内容。`[P]`说“代理”它，即 apache 本身将请求 url 并将它得到的响应发送到浏览器，所以浏览器中的url不会改变。

**警告：**这仅适用于 apache 本身可以连接到`http://signup.mydomain.com/`. 这有时不起作用，尤其是如果此域位于同一服务器上。

RTFM 了解更多信息： [http ://httpd.apache.org/docs/2.4/rewrite/](http://httpd.apache.org/docs/2.4/rewrite/)

# c# - 是否可以将元素直接转换为数组？

> ID：14781179
> 
> 赞同：2
> 
> 时间：2013-02-08T20:53:35.173
> 
> 标签：c#, casting

有没有办法将单个对象`T`转换为`T[]`

使用 this 的一个例子是在将一个单一的传递给`string`需要一个函数的函数时`string[]`

例子

```
void ExistingMethod(string[] sa);
void main()
{
  string s;
  ExistingMethod(s); //<= problem is there a syntax that allows this type of cast?
} 
```

对这样的解决方案不感兴趣

```
string [] singleElementArray = new string[1];
singleElementArray[0] = s;
ExistingMethod(singleElementArray) 
```

我正在寻找 C# 是否允许这种类型的转换。

我想我看到了一种Java允许它通过简单地`([s])`用[]包装它的方式。C# 有这种语法吗？

请注意，对创建 1 的数组并分配它不感兴趣...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T20:55:51.347

更改`foo(string[] sa)`为`foo(params string[] sa)`。

`params`让您可以像这样放置一个带有数组参数参数数组的数组：`foo(foo, bar, baz);`而不是`foo(new[]{foo, bar, baz});`

或者你可以做一个`.Arr<T>(this T obj)`函数，它返回一个`T[]`. 像这样的东西：

```
public static T[] Arr<T>(this T obj)
{
return new[]{ obj };
} 
```

然后像这样使用它：

```
foo(obj.Arr()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T20:55:52.257

没有演员允许这样做，但是您可以使用动态创建一个数组

```
string s = "blah";
foo(new [] { s }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T20:55:46.917

C# 具有以下语法：

```
foo(new[] { s }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T20:57:06.773

不，单个字符串不是字符串数组，因此将其转换为数组是没有意义的。您可以在这里做的最简单的事情是：

```
void foo(string[] sa);
void main()
{
  string s = "some value"; // A string must have a value before you can use it
  foo(new[]{ s }); 
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T21:40:13.397

由于您在评论中声明 foo() 是您无法修改的库的一部分，并且假设 foo() 是一个实例方法，您可以扩展它以完全接受您想要的语法。

类 Bar 中 foo() 的原始实现示例：

```
class Bar {
    public void foo(string[] s) {
        foreach (var s1 in s) {
            Console.WriteLine(s1);                
        }
    }
} 
```

您对 foo() 的扩展：

```
static class BarExtensions {
    public static void foo(this Bar bar, string s) {
        bar.foo(new[] {s});
    }
} 
```

您的示例调用，修改为使用外部类：

```
class Program {
    static void Main() {
        var bar = new Bar();
        string s = "hello";
        bar.foo(s); // This is how you wanted to call it 
    }
} 
```

# java - java webservice同时接受json和文件上传？

> ID：14781184
> 
> 赞同：0
> 
> 时间：2013-02-08T20:53:55.950
> 
> 标签：java, json, web-services, rest

我有以下可以正常工作的 Web 服务。我需要添加上传文件以及序列化为 JSON 的 TrackBean 实例的功能。

我发现了很多只是文件上传的例子，但没有一个会接受 json 和同一篇文章中的文件。

一次做这一切是不好的技术吗？首先上传文件，从服务器获取某种令牌作为响应，然后在第二个帖子中发送 json，引用来自帖子 #1 的令牌，这样服务器就会知道与哪个文件关联，这是一个更好的做法吗？传入的 JAXB_TrackBean 实例。

在此先感谢您的帮助！

网络服务块：

```
@POST
@Path( "/post" )
@Consumes( MediaType.APPLICATION_JSON )
public Response createTrackInJSON( JAXB_TrackBean track )
{

    String result = "TrackBean saved : " + track.getText() ;
    return Response.status( 201 ).entity( result ).build();

} 
```

JAXB_TrackBean：

```
@XmlRootElement( name = "track" )
@XmlType( propOrder = { "id", "text" } )
public class JAXB_FtTextBean
{
     private long id = 0;
     private String text;

        // getter/setters omitted for brevity 

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:19:50.597

当我必须在 web 服务请求中包含我的文件时，我通常会做的是我接受文件内容作为字节数组或 base 64 编码内容。在这种方式下，文件只是调用的另一个参数。不是最有效的方法，但提供了结果。值得一提的是，我尝试仅使用 SOAP WS 来了解这种方法，但我看不出它不应该与 REST+JSON 一起使用的原因。

# ruby - 无法将波旁威士忌函数与 sass 一起使用（sass -r bourbon.rb 失败）

> ID：14781191
> 
> 赞同：0
> 
> 时间：2013-02-08T20:54:21.007
> 
> 标签：ruby, sass, rbenv, bourbon

我在使用线性渐变或框阴影等函数编译 sass 文件时遇到问题。我遇到的问题与这里[https://github.com/thoughtbot/bourbon/issues/68](https://github.com/thoughtbot/bourbon/issues/68)完全相同，其中生成的 css 只是一堆`false`'s.

我没有在 Rails 项目上工作，所以我想我可能必须在做时将 bourbon.rb 文件作为库包含在内`sass --watch`，但这对我不起作用：

```
sass --watch .:.. --r ./bourbon/lib/bourbon.rb
LoadError: cannot load such file -- bourbon/generator
  Use --trace for backtrace. 
```

[没有要加载的文件 - ruby​​gems (LoadError)](https://stackoverflow.com/questions/2896485/no-such-file-to-load-rubygems-loaderror)这里说这可能表明我安装了几个版本的 Ruby，并`which -a ruby`显示了 rbenv 1.9.3-p327 以及 /usr/bin/ruby （我还不清楚至于有什么区别）。无论如何，我将 .rbenv 移到了备份中，据说现在只有一个版本的 ruby​​。我还尝试指定 ruby​​gems 路径

```
echo $RUBYLIB          
/usr/lib/ruby/1.9.1/rubygems 
```

但是在尝试将 bourbon.rb 文件包含到 sass --watch 时，我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:26:53.400

伊莉丝，你用的是哪个版本的波旁威士忌？`$bourbon -v`

从 bourbon 3.0 开始，不再需要将`--r ./bourbon/lib/bourbon.rb`标志传递给 sass --watch 命令。

请在此处阅读新的安装说明：http: [//bourbon.io/](http://bourbon.io/)

# jquery - 挂钩到 jQuery .live 函数

> ID：14781196
> 
> 赞同：0
> 
> 时间：2013-02-08T20:54:42.243
> 
> 标签：jquery

我正在尝试编写一段代码来挂钩：

```
var builder_blvd = {

    // Enter into editing a layout
    edit : function ( name, page )
    {
        // Get the ID from the beginning
        var page = page.split('[(=>)]');

        // Prepare the edit tab
        $('#builder_blvd .nav-tab-wrapper a.nav-edit-builder').text(themeblvd.edit_layout+': '+name).addClass(page[0]+'-edit');
        $('#builder_blvd #edit_layout .ajax-mitt').html(page[1]);

        // Setup hints
        $('.sortable:not(:has(div))').addClass('empty');
        $('.sortable:has(div)').removeClass('empty');

        // Setup sortables
        $('.sortable').sortable({
            handle: '.widget-name',
            connectWith: '.sortable'
        });

        // Sortable binded events
        $('.sortable').bind( 'sortreceive', function(event, ui) {
            $('.sortable:not(:has(div))').addClass('empty');
            $('.sortable:has(div)').removeClass('empty');
        });

        // Setup widgets
        $('#builder_blvd .widget').themeblvd('widgets');

        // Setup options
        $('#builder_blvd').themeblvd('options', 'setup');

        // Take us to the tab
        $('#builder_blvd .nav-tab-wrapper a').removeClass('nav-tab-active');
        $('#builder_blvd .nav-tab-wrapper a.nav-edit-builder').show().addClass('nav-tab-active');
        $('#builder_blvd .group').hide();
        $('#builder_blvd .group:last').fadeIn();

    }

}; 
```

我想挂钩 $('#builder_blvd #edit_layout .ajax-mitt').html(page[1]); 触发一段代码，该代码在发布时从中删除 DOM 元素。上面的代码来自一个父主题，如果可能的话，我宁愿保持原样。

这是我试图让这个工作：

```
jQuery(document).ready(function($) {
    $('#builder_blvd #edit_layout .ajax-mitt').bind( 'change', function(event, ui) {
        $('#edit_builder #titlediv').remove();
    });
}); 
```

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:54:08.147

您可以覆盖原始对象并访问旧功能:) 因此无需“挂钩”到该 .html 代码

```
var builder_blvd_edit = builder_blvd.edit;
builder_blvd.edit = function ( name, page ){
    builder_blvd_edit(name, page);
    $('#edit_builder #titlediv').remove();
} 
```

# c++ - 在'='令牌之前传递结构错误“unqualified-id”

> ID：14781201
> 
> 赞同：0
> 
> 时间：2013-02-08T20:55:15.083
> 
> 标签：c++, structure

我一直在尝试将一个包含我所有变量的结构传递给多个函数，这些函数保存在一个单独的类中。我知道这个错误很可能与某种语法错误有关，但我看不出我做错了什么。

main.ccp 是：

```
#include <iostream>
#include <cstdlib>
#include <ctime>
#include <fstream>
#include "running.h"

using namespace std;

int main()
{
    //------Class Objects---------
    running runObj;

    //----------Vars--------------

    char saveGame = 'N';
    struct gameVar
    {
        int correctGuesses;  // These vars need to be reset for each new game.
        int Lives;
        int rowCorrect;
        int highScore;
        char anotherGame;
    } values;
    values.highScore = 12;
    values.anotherGame = 'Y';

    //--------Game Loop-----------

    // int highScore2 = runObj.readHighScore();

    while (values.anotherGame = 'Y')
    {
        struct gameVar = runObj.processGame(gameVar);
        struct gameVar = runObj.afterText(gameVar);
        gameVar values;
        values.anotherGame;
    }

    cout << endl << "-------------------------------------------------------" << endl;
    cout << "Would you like to save your high score? Y/N" << endl;
    cin >> saveGame;

    if(saveGame == 'Y')
    {
        runObj.saveHighScore(gameVar);
    }

    return 0;
} 
```

我的头文件是：

```
#ifndef RUNNING_H
#define RUNNING_H

class running
{
    public:
        struct gameVar processGame(struct gameVar);
        void saveHighScore(struct hs);
        int readHighScore();
        struct gameVar afterText(struct gameVar);
};

#endif // RUNNING_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:57:30.573

首先，一个简单的问题：您`=`在`while`循环条件中使用，这会将值分配`'Y'`给`gameVar.anotherGame`. 你真正想要的是`==`，测试平等。

看看这一行：

```
struct gameVar = runObj.processGame(gameVar); 
```

你想在这里做什么？`gameVar`是您的结构的名称，而不是`gameVar`类型的对象。您的对象实际上被称为`values`. 也许您想做类似的事情：

```
values = runObj.processGame(values); 
```

下一行也是如此。

看起来你有这种困惑的原因是因为你在定义你`struct`的同时创建了一个该类型的对象。被`struct`调用`gameVar`的只是对象的蓝图，您创建一个与该蓝图匹配的对象，称为`values`：

```
struct gameVar
{
  // ...
} values; 
```

如果`struct`将函数外部定义`main`为：

```
struct gameVar
{
  // ...
}; 
```

然后使用以下命令创建它的实例`main`：

```
gameVar values; 
```

您必须将这个`values`对象传递给函数 - 您不能传递类型，这就是`gameVar`。

我不确定你当时试图做什么：

```
gameVar values;
values.anotherGame; 
```

这将*重新定义*循环内的`values`对象，`while`并将在循环结束时销毁。然后您访问数据成员`anotherGame`，但不对其执行任何操作。也许您正在寻找：

```
gameVar values;
values.highScore = 12;
values.anotherGame = 'Y';

while (values.anotherGame == 'Y')
{
    values = runObj.processGame(values);
    values = runObj.afterText(values);
} 
```

值得注意的是，在 C++ 中，您不需要`struct`在每次使用之前放置`gameVar`类型。类型名称只是`gameVar`. 也就是说，您可以将声明更改`processGame`为：`gameVar processGame(gameVar);`

# visual-studio-2012 - 关于在 WP 8 上开发的一般问题

> ID：14781202
> 
> 赞同：1
> 
> 时间：2013-02-08T20:55:17.073
> 
> 标签：visual-studio-2012, windows-phone-8, heap-memory, multiscreen

作为Windows Phone 8（以下简称WP8）的新开发者，又是一位经验丰富的android开发者，不知道在开发WP8时会遇到什么困难。

我想请为此操作系统开发的人从他们的经验中学习。

更具体地说，这是我的一些问题：

1.  **应用程序大小限制**：在 Android 上，每个应用程序的最大大小为 50 MB，但对于较大的应用程序，有一个库可将其放大至 4GB（除了 50MB）。WP8有限制吗？如果是这样，它是什么，有没有办法扩展它？

2.  **内存限制**：在 Android 上，每个应用程序都有一个相对较小的最大堆大小限制。每个应用程序最多可以使用此限制的内存，如果它尝试使用更多，应用程序会因内存不足异常而崩溃。WP8有什么？它有像windows那样的虚拟内存吗？

3.  **Emulation&designer vs devices**：在 Android 上，模拟器真的很慢（但功能非常强大），而且模拟器和 UI 设计师并不总是拥有与真实设备上相同的可视屏幕。例如，在模拟器上（或者尤其是 UI 设计师），如果屏幕以一种方式显示，它可能会以完全不同的方式显示。WP8 的模拟器（和 UI 设计者）能否被尊重并真正被用来代替真实的设备？

4.  **IDE 有用的警告和提示**：在 Android 上，每个版本都有自己的新 API 功能，但 IDE（使用 LINT 工具）会在您使用应用程序的新功能时发出警告，以防它可以在旧设备上运行。不仅如此，它还有大量的警告和提示可以帮助您并成为更好的开发人员。Visual Studio 是否具有隐藏在 WP8 上开发的相同功能？

5.  **多屏支持**：在 Android 上，为了支持多屏、分辨率和密度，采取了许多步骤。他们甚至制作了一个称为 DP 的长度单位，它具有基于设备密度的多个像素。为了支持多屏幕，WP8 必须提供什么？我必须自己检查这些东西，还是有任何开箱即用的解决方案？我还注意到一个名为 ViewBox 的类 - 将其用作处理不同屏幕纵横比的解决方案是否常见？

6.  **低内存占用 UI 组件**：在 Android 上，创建一些 UI 组件时考虑使用尽可能少的内存。例如，从 AdapterView 扩展的所有 UI 组件都使用一个适配器，该适配器使用最少数量的 UI 组件来显示用户可以滚动的无限量数据（例如 listView 类）。WP8有类似的解决方案吗？

7.  **其他提示**：希望听到有关您的体验的其他一般提示，以及是否需要注意一些事项。也许你们中的一些人知道的其他主题，或者其他 android 开发人员在为 WP8 开发时遇到的事情。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:10:49.950

我的意见：

1-我以前没有听说过这种限制。

2- [windows phone 8 的内存使用限制](https://stackoverflow.com/questions/14318070/memory-usage-limit-for-windows-phone-8)

3 & 5- 在 wp8 (xaml) 中没有像“px”或“dpi”这样的单位，如 android。您只需说“让这个框为 10”，然后操作系统将根据屏幕分辨率进行处理。如果您的应用程序在模拟器上正常运行，您的应用程序将在其他设备以及模拟器上运行。

6- Silverlight 有一个称为“数据绑定”的功能。您可以将任何对象绑定到您的 UI。你只需要初始化你的对象，然后你不需要做任何 listview 或 textview 操作，Silverlight 会处理它。（[http://www.codeproject.com/Articles/80555/Databinding-in-Silverlight-applications](http://www.codeproject.com/Articles/80555/Databinding-in-Silverlight-applications)）

7- WP8 SDK 不支持 C# 库的所有功能。你应该意识到这一点。

# javascript - Highchart 区域范围图表，带有沿线的渐变

> ID：14781214
> 
> 赞同：9
> 
> 时间：2013-02-08T20:56:00.460
> 
> 标签：javascript, jquery, highcharts

以下是具有渐变的区域范围图。

[http://jsfiddle.net/gXpHH/1/](http://jsfiddle.net/gXpHH/1/)

我想要做的是让渐变跟随曲线，这样沿着底线的任何一点的颜色都是相同的，当它到达顶线时它以相同的颜色结束。我很确定这不是目前在 highcharts 中的一个选项，但我只是想看看是否有人以前遇到过这个问题。这是当前生成渐变的代码：

```
series: [{
            name: "Shade",
            fillColor: {
                linearGradient: [0, 0, 0, 300],
                stops: [
                    [0, "#4572A7"],
                    [1, "rgba(2,0,0,0)"]
                ]
            },
            data: [
                [0, 14733, 18890],
                [1, 16583, 21642],
                //... rest here
                [10, 42417, 61955]
            ]
    }] 
```

谢谢

**注意**：这与[折线图（Highcharts）上的渐变填充不同，](https://stackoverflow.com/questions/10216654/gradient-fill-on-line-chart-highcharts)因为我需要渐变来跟随曲线

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:29:32.033

困难在于粒度：Highcharts 为系列点绘制了一个单一的 SVG 路径，并将该路径与渐变相关联。但是，如果您的系列数据相对线性，则以下近似值可能有用。请参阅[我创建的 jsfiddle](http://jsfiddle.net/martyk/7b7Bp/2/)：

假设您的系列数据不是静态的，我的演示包括两个系列和一个函数，对于每个系列，该函数尝试动态创建最接近您的要求的线性渐变：

```
function getLinearGradient(series) {
    var lastY0=null, lastY1=null, maxY0=null, maxY1=null;
    $.each(series.data, function(key,value) {
        maxY0 = Math.max(value[1],maxY0);
        maxY1 = Math.max(value[2],maxY1);
        lastY0 = value[1];
        lastY1 = value[2];
    });
    var firstY0 = series.data[0][2],
        firstY1 = series.data[0][2]
    ;
    var minY0=maxY0, minY1=maxY1;
    $.each(series.data, function(key,value) {
        minY0 = Math.min(value[1],minY0);
        minY1 = Math.min(value[2],minY1);
    });
    var minY = minY0,
        maxY = maxY1,
        heightY = maxY - minY
    ;        
    var gradient = {
            x1: 10 + ( ((firstY0-minY) / heightY) * 80 ) + "%",
            y1: "10%",
            x2: 10 + ( ((lastY1-minY) / heightY) * 80 ) + "%",
            y2: "90%"
    };
    return gradient;
}; 
```

当然，这种方法不是一个成熟的解决方案，只有在您处理大致遵循线性曲线的数据时才有用。这是[jsfiddle](http://jsfiddle.net/martyk/7b7Bp/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T16:56:44.357

我没有任何例子，我也不确定它是否已经在规范中，但我很确定实现这种效果的唯一方法是使用 svg mash 渐变。

您可以使用路径点作为混合矩阵的边界点并获得您想要的效果。

请参阅[此处](http://www.svgopen.org/2011/papers/18-Advanced_Gradients_for_SVG/)了解更多信息。

# javascript - 在dust.js中 $idx 的初始值不能从零开始吗？

> ID：14781217
> 
> 赞同：5
> 
> 时间：2013-02-08T20:56:17.790
> 
> 标签：javascript, templates, dust.js

如果我使用索引助手是否可以使计数从 1 而不是 0 开始。两者：

```
{@idx}{.}{/idx} 
```

和

```
{$idx} 
```

是从零开始的。

有谁知道这样做的方法？

如果您可以这样做，那将是完美的：

```
{$idx + 1} 
```

但显然那是行不通的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T21:56:25.550

我想你可以将数学助手与 $idx 结合使用：

```
{@math key=$idx method="add" operand="1"/} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T20:39:40.050

要在灰尘模板中使用@math，您需要添加默认情况下从灰尘核心包中排除的灰尘助手。

为了在节点中“加载”灰尘助手，您需要的特定语法是：

```
var dust = require('dustjs-linkedin');
dust.helper = require('dustjs-helpers'); 
```

万一您无法添加这些帮助程序，这将是一个非常奇怪的决定，您仍然可以像这样在当前代码库中创建自己的函数，可以使用它来代替 @gt 或 @math

```
var baseContext = dust.makeBase({
    position: function(chunk, context) {
        return context.stack.index + 1;
    },
  }); 
```

现在您可以使用 {position} 而不是 ${idx} 来计算循环从 1 到 n。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-31T16:09:13.863

将数学助手放入 {@idx}

```
<table>
{#names}
<tr><td>{@idx}{@math key="{$idx}" method="add" operand="1"/}{/idx}</td>
    <td>{name}</td>
</tr>
{/names}
</table> 
```

# c# - 不能声明局部变量名称“选择”，因为它会给“选择”赋予不同的含义

> ID：14781218
> 
> 赞同：2
> 
> 时间：2013-02-08T20:56:21.453
> 
> 标签：c#, if-statement, while-loop, do-while

对不起，我对编程世界完全陌生。我正在创建一个控制台应用程序，它基本上接受您是否要将摄氏温度转换为华氏温度或反之亦然的输入。

我遇到的问题是：

> “错误 3 不能在此范围内声明名为‘选择’的局部变量，因为它会给‘选择’赋予不同的含义，‘选择’已在‘父或当前’范围中用于表示其他内容”

我尝试查看其他示例，但它们比我的大脑现在可以理解的要复杂得多。

```
namespace TemperatureApp
{
    class Program
    {
        static void Main(string[] args)
        {
            int choice;

            do
            {
                Console.WriteLine("Hi! This is a temperatue app");
                Console.WriteLine("Press 1 for C to F or 2 for F to C");
                //take the user input
                int choice = Convert.ToInt32(Console.ReadLine());

                if (choice == 1)
                {
                    Console.WriteLine("Great, you chose C to F. Now enter the temp.");
                    int celcius = Convert.ToInt32(Console.ReadLine());
                    //next line use the formula and show answer
                }
                if (choice == 2)
                {
                    Console.WriteLine("Great, you chose F to C. Now enter the temp.");
                    int fahrenheit = Convert.ToInt32(Console.ReadLine());
                    //next line use the formula and show answer
                }
                else
                    Console.WriteLine("That is not the right choice.");
                    //In this way, keep asking the person for either 1 or two

            }
            while (choice != 1 || choice != 2);

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T20:58:12.003

```
int choice = Convert.ToInt32(Console.ReadLine()); 
```

应该读

```
choice = Convert.ToInt32(Console.ReadLine()); 
```

通过`int`第二次放入，您在 {} 中声明了另一个名为“choice”的变量。该定义与外面的定义相冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:00:25.787

这一切都在错误消息中，您已经在同一范围内两次声明了您的*选择变量。*

当您从控制台输入读取值时，您不需要重新声明您只需要设置它的变量。详细说明：

```
int choice; // declare variable

do
{
    int choice = ...; // re-declare variable
} 
```

在第二行，您要为变量*分配*一个值，而不是重新声明它，为此您只需替换此行：

```
int choice = ... 
```

和

```
choice = ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:06:15.813

> 我遇到的问题是：
> 
> “不能在此范围内声明名为'choice'的局部变量，因为它会给'choice'赋予不同的含义，后者已在'父或当前'范围内用于表示其他内容”。
> 
> 我试着看其他例子

您不应该查看示例，而应查看错误和您的代码。C# 编译器的消息非常人性化，这一点也很清楚。您只需要了解所使用的语言。

> 无法声明名为“选择”的局部变量

你声明一个像这样的变量: `variable-type variable-name`，它发生在错误的行，在你的`do`-loop 中：

```
int choice = Convert.ToInt32(Console.ReadLine()); 
```

在这里，`int`您*声明*变量，即`int`它的类型。删除`int`将使该行成为[*assignment*](http://en.wikipedia.org/wiki/Assignment_operator)，这是您所需要的。的结果`Convert.ToInt32(Console.ReadLine())`被分配 (=) 给 -`choice`变量。您只能在声明变量后对其进行分配，但您已经在代码的前面完成了该操作。所以错误说：

> 因为它会给'选择'赋予不同的含义，它已经在'父或当前'范围中用于表示其他东西

如果你在你的代码中查找，你会看到在[父作用域](http://msdn.microsoft.com/en-us/library/aa691132(v=vs.71).aspx)（in `static void Main()`）中声明了一个同名的变量：

```
int choice; 
```

现在您应该知道您只需要声明一个变量一次，并且这通常最好在尽可能小的范围内完成。在您的情况下，您可以简单地删除`int`before `int choice = Convert.ToInt32(Console.ReadLine());`，因为您还需要在-loop`choice`之外访问。`do`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T20:58:41.407

尝试将选择变量声明排除在循环范围之外。像这样：

```
 int choice;

   do
    {
        Console.WriteLine("Hi! This is a temperatue app");
        Console.WriteLine("Press 1 for C to F or 2 for F to C");
        //take the user input
        choice = Convert.ToInt32(Console.ReadLine());

        if (choice == 1)
        {
            Console.WriteLine("Great, you chose C to F. Now enter the temp.");
            int celcius = Convert.ToInt32(Console.ReadLine());
            //next line use the formula and show answer
        }
        if (choice == 2)
        {
            Console.WriteLine("Great, you chose F to C. Now enter the temp.");
            int fahrenheit = Convert.ToInt32(Console.ReadLine());
            //next line use the formula and show answer
        }
        else
            Console.WriteLine("That is not the right choice.");
            //In this way, keep asking the person for either 1 or two

    }
    while (choice != 1 || choice != 2);

    Console.ReadLine();
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T20:59:24.977

您不能有一个与另一个局部变量同名的局部变量。您*可以*拥有一个与更大的非局部范围（例如类成员）的变量同名的局部变量，但在这种情况下，局部变量隐藏了更大范围的变量。

你要做的是把`int`第二个拿掉`choice`。你不需要重新声明它，你只想分配它。

```
choice = Convert.ToInt32(Console.ReadLine()); 
```

# regex - 如何返回可以重复迭代的正则表达式匹配

> ID：14781220
> 
> 赞同：0
> 
> 时间：2013-02-08T20:56:40.813
> 
> 标签：regex, scala, iterator, set-comprehension

我似乎只能迭代结果 val 一次。调用 length 会对其进行迭代，因此调用`result.next`会导致异常。

```
 val result = for ( regex(name) <- regex findAllIn output) yield name
    println(result.length)
    println(result.next) 
```

结果是 AFAIK 一个 Iterator[String]，所以我不确定为什么我只能迭代一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:00:47.873

您可以尝试在其上调用类似`toVector`的东西，以便将其存储在一个持久集合中，然后您可以根据需要多次迭代它。

`Iterator`只会让您遍历内容一次，因此如果您想多次遍历它，请将其变成一个集合。鉴于你有一个`Iterator[String]`，调用类似的东西`.toVector`会给你一个`Vector[String]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:01:20.643

> 结果是 AFAIK 一个 Iterator[String]，所以我不确定为什么我只能迭代一次。

因为这就是`Iterator`s 的工作方式。您无法返回或重置它们 - 一旦您遍历它们，它们就会“用完”。

一种解决方法是将结果转换为例如 a `List`，它没有这样的限制：

```
val result = (for ( regex(name) <- regex findAllIn output) yield name).toList
println(result.length)
println(result.head) 
```

# asp.net-mvc - MVC @Html.DisplayForModel() 不同的视图

> ID：14781223
> 
> 赞同：1
> 
> 时间：2013-02-08T20:56:44.173
> 
> 标签：asp.net-mvc

我刚开始学习MVC。

我知道您可以在 Shared/DisplayTemplates 中创建一个强类型视图，然后在从控制器返回一个列表后，您可以执行 @Html.DisplayForModel() 并将其用作整个列表的模板。

但是，如果我不总是希望按照我在此 DisplayTemplate 中指定的方式构建模型怎么办？如何创建不同的显示模板？

显而易见的方法似乎是为每个对象创建一个模板，然后执行类似...

```
@foreach(var item in Model)
{
    @Html.DisplayFor(x=>x, "AlternativeTemplate")
} 
```

..但是你现在有了foreach，它看起来并不那么优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:00:41.500

没错，您可以使用 DisplayForModel 重载，该重载采用 String 参数作为模板名称。[http://msdn.microsoft.com/en-us/library/ee430910(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/ee430910(v=vs.98).aspx)

您只需在 Views/Shared/DisplayTemplates 下定义模板，并使用字符串中给出的确切名称。

# javascript - 为什么这段 JavaScript 代码（RequireJS 和 Node.js 的模块模式）有效？

> ID：14781224
> 
> 赞同：5
> 
> 时间：2013-02-08T20:56:53.217
> 
> 标签：javascript, node.js, function, module, requirejs

由于我对 RequireJS 和 Node.js（加上一般的 JavaScript）的了解有限，我通常会看看一些知名 JavaScript 库的源代码。每次我看到这样的东西：

```
( // Wrapping
    function (root, factory) {
        if (typeof exports === 'object') { // Node.js

            var underscore = require('underscore');
            var backbone = require('backbone');

            module.exports = factory(underscore, backbone);

        } else if (typeof define === 'function' && define.amd) { // Require.JS

            define(['underscore', 'backbone'], factory);

        } 
    }(this, function (_, Backbone) { // Factory function, the implementation
        "option strict";

        function Foo() {}

        return Foo; // Export the constructor
    })
); // Wrapping 
```

我能理解的（希望如此）：

*   当脚本不包含在`<script>`标签中时，包装代码的匿名函数会自动执行
*   此代码适用于 RequireJS 和 Node.js（`if`一开始就检查）；函数的结果`factory`要么分配给`module.exports`（Node.js），要么用作函数的参数`define`（RequireJS）。

**Q1**：这段代码在没有 RequireJS 和 Node.js 的情况下如何工作？`if`并且`else if`检查将失败，`factory`函数永远不会执行并且脚本不会返回任何内容。

**Q2**`this` ：作为`root`参数传递的目的是什么？它从未使用过

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T22:23:58.567

实际上，我认为您问题中的代码不适用于浏览器全局变量。此片段中使用的模式称为 UMD - 通用模块定义。实际上这种模式有很多变体，你可以在[https://github.com/umdjs/umd浏览更多示例](https://github.com/umdjs/umd)

至于问题：

**Q1** 这个片段在没有 RequireJS 或任何其他 AMD 加载器的浏览器中无法工作，原因很明显 - 只有两个检查 - 用于 NodeJS 和定义函数，所以如果不使用 AMD 库，工厂函数将不会被调用。

要调用工厂函数，只需为浏览器全局变量添加另一个条件

```
if (typeof exports === 'object') { // Node.js
    var underscore = require('underscore');
    var backbone = require('backbone');
    module.exports = factory(underscore, backbone);

} else if (typeof define === 'function' && define.amd) { // Require.JS
     define(['underscore', 'backbone'], factory);
} else {
    // Browser globals
    factory(root._, root.Backbone);
} 
```

请注意，我们使用传递给包装函数的根对象，正如[nekman](https://stackoverflow.com/users/141363/nekman)指出的那样，它将`window`在浏览器环境中设置为，因此我们只需将该窗口上定义的全局对象传递给工厂，这些对象通常由`script`页面上的其他标签定义。希望这能回答你的第二个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:15:16.020

**Q1：**如果 the`if`和 the都`else if`失败了，唯一可以假设的是`underscore`and是从标签`Backbone`加载的。`<script>`前段时间，我向[Backbone.localStorage 插件](https://github.com/jeromegn/Backbone.localStorage)[添加了一个提交](https://github.com/jeromegn/Backbone.localStorage/commit/d4f07c85122eaee3d47b1cdefe74da2b4c42b80a#backbone.localStorage.js)，它做了同样的假设。

**Q2：**将`this`指向“全局对象”（`window`在浏览器环境和`global`Node.js 环境中）。在您的情况下，它没有被使用，也不需要传入。`factory`单独就足够了。

# flash - SWF 到 PDF 批量转换

> ID：14781226
> 
> 赞同：2
> 
> 时间：2013-02-08T20:57:03.343
> 
> 标签：flash

我有数百个 swf 格式的文件（它是一本电子书），我想将它们批量转换为 pdf（以便在我的 iPad 上阅读它们）。

我尝试了一些像**eConverter**一样的东西（swfdec 没有工作得到错误），这也可能无法进行批量覆盖。

**swftool**，运行良好，但质量很差。我看不懂这些字母。

**SWF Printer** Pro 再次质量不佳

**ffmpeg**给出错误“不支持压缩的 SWF 格式”

如果你们能帮助我找到解决方案，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-01T07:17:05.280

如果您只想在 iPad 上阅读它们，您可以执行以下操作：

1.  在 Finder 中创建 ORB 书。

将所有 swf 文件打包到一个 .orb 文件中。（每页一个瑞士法郎）

[http://rintarou.dyndns.org/2014/09/13/create-an-orb-book-in-finder/](http://rintarou.dyndns.org/2014/09/13/create-an-orb-book-in-finder/)

2.  下载适用于 iPad 的 ORB 查看器（Lite 可免费使用 Ads 并且仅打开第一个 .orb 文件）。

用它来读取 iPad 上的 .orb 文件。

[http://rintarou.dyndns.org/works/orb-viewer/](http://rintarou.dyndns.org/works/orb-viewer/)

如果您确实需要将它们转换为 PDF，您可以购买 ORB Reader for Mac。

它将在 Mac 上读取 .orb 并转换为 PDF。

PS。我是上述这些应用程序的作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-12T04:31:56.063

我用 HotKey 脚本做类似的事情。下面附加了一个示例（带有解释和 HotKeyNet 脚本主机软件的链接）。（注意：此答案特定于 Windows 平台。）

```
// Software: http://hotkeynet.com
// http://www.adobe.com/support/flashplayer/debug_downloads.html
// https://www.foxitsoftware.com/products/pdf-reader/

// Script for HotKeyNet (0.1.45 Build 210) to automate
// converting many .SWF files to PDFs by opening each SWF in
// Adobe's standalone Flash Player and then printing it as a
// PDF file using Foxit Reader's virtual PDF printer. The SWF
// files' contents are static (not animated), and are thus
// suitable for printing. They are pages of a print magazine
// and the files contain multiple objects - images, text,
// fonts, and rendering and layout information.

// The script works by sending a sequence of keystrokes
// to the main and child windows of Adobe Flash Player
// and Foxit Reader's PDF Printer

// To use this script:
// 1) Load it in HotKeyNet.exe, then:
// 2) Minimise HotKeyNet to the taskbar.
// 3) Set Foxit's PDF Printer as the default printer.
// 4) Open file 01.swf in Adobe Flash Player, and manually
//    perform the above sequence for converting it to PDF
//    to establish the source and destination folders to
//    be used by the player and the virtual printer.
// 5) Ensure that the flash player has the focus. (i.e.
//    that it is the foreground application.)
// 6) Press the HotKey defined below to run the script.

// Part 1: Define a user-command "PrintOnePage".
// Within the command, %1% stands for a parameter
// passed to the command, which will be a filename.
// That name will be used as both the .SWF file to
// be opened and the .PDF file to be written.

<Command PrintOnePage>
        <sendpc local>
            <sendwin "Adobe Flash Player 23">

// Key sequence to open a file in the player:
// Alt+F, O, Alt+B, filename, Alt+O, Enter 

            <key LAlt F>
            <key O>
            <key LAlt B>
            <wait 500>
            <text %1%>
            <key LAlt O>
            <wait 500>
            <key Enter>

            <sendwin "Adobe Flash Player 23">

// Key sequence to print the file as a PDF:
// Alt+F, P, Alt+P, Alt+N, filename, Enter

            <key LAlt F>
            <key P>
            <wait 4000>
            <sendwin Print>
            <key LAlt P>
            <wait 500>
            <sendwin "Print to PDF Document - Foxit Reader PDF Printer">
            <key LAlt N>
            <text %1%>
            <key Enter>
            <wait 12000>

// End of user-command definition

// Part 2: Define a HotKey that, when pressed (once),
// will run the above command multiple times with a
// different parameter each time. They are 02, 03, 04,
// etc, which are the SWF and PDF filename pairs.

<hotkey F1>
<PrintOnePage 02>
<PrintOnePage 03>
<PrintOnePage 04>
<PrintOnePage 05>
<PrintOnePage 06>

// Add a line for each page file

// End of script 
```

# asp.net - 反序列化为 DataTable 时，浮点/字符串值被错误地转换为整数

> ID：14781235
> 
> 赞同：2
> 
> 时间：2013-02-08T20:57:50.037
> 
> 标签：asp.net, json, json.net

我正在通过 ajax 将此关注对象发布到 asp.net Web 服务器：

```
$.ajax({
   type: "POST",
   url: "/home.aspx",
   contentType:'application/json',
   data:JSON.stringify({d1:42.00,d2:3.14,d3:'17'})
}); 
```

当 JSON.Net 反序列化对象时

```
JsonConvert.DeserializeObject<DataTable>(stringfied); 
```

d2和d3看成int，结果是：d1 = 42, d2 = 3, d3 = 17

问题与这篇文章完全一样：http: [//digitalbush.com/2011/04/24/asp-net-mvc3-json-decimal-binding-woes/](http://digitalbush.com/2011/04/24/asp-net-mvc3-json-decimal-binding-woes/)

我无法使用本文来解决此问题，因为我使用的是 Web 表单。

有什么出路吗？

**更新**

实际上上面的字符串是错误的，这个反映了问题，我只是在Linqpad上转载：

```
JsonConvert.DeserializeObject<DataTable>("[{\"Price\":3},{\"Price\":3.33}]").Dump(); 
```

数据表的结果是：3 and 3 not 3 and 3.33

如果我使用`DeserializeObject`方法，它可以正常工作，但我需要使用 Datatable，因为我在应用程序上有一个通用函数可以将 Datatable 转换为 MSExcel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:34:30.007

有了这么简单的数据，为什么不使用`Generic.Dictionary`?

```
string json = "{d1:42.00, d2:3.14, d3:\"17\"}";

Web.Script.Serialization.JavaScriptSerializer serializer = new Web.Script.Serialization.JavaScriptSerializer();
System.Collections.Generic.Dictionary<string, object> jsonObject = (System.Collections.Generic.Dictionary<string, object>)serializer.DeserializeObject(json);

decimal d1 = jsonObject["d1"];
decimal d2 = jsonObject["d2"];
string d3 = jsonObject["d3"]; 
```

# c# - 修改嵌入在类库中的文件然后保存文件

> ID：14781238
> 
> 赞同：3
> 
> 时间：2013-02-08T20:58:24.387
> 
> 标签：c#, .net, excel-dna

我已经研究了几个星期，并且很难找到解决方案，我希望通过在这里发布一个一般性的问题来获得一些见解。

我有一个已将资源嵌入到（.xlsm）中的类库（在本例中为 .xll）。您可能知道也可能不知道，.xll 与 Excel 相关联，因此当有人打开 .xll 时，它会加载到 Excel 实例中。在我的场景中，当 .xll 加载到 Excel 中时，.xll 会加载嵌入的 .xlsm 的副本。到目前为止，一切都很好。这使我可以向我工作场所的最终用户发送一些东西，无论出于何种意图和目的，它都只是一个奇怪的 Excel 文件。

当用户希望能够保存他们对 Excel 工作表所做的更改时，就会出现问题。如果他们将其保存到桌面（使用 Excel 内置的保存功能），那么保存的只是 .xlsm。再次打开该 .xlsm 时，将不再加载 .xll，并且 .xlsm 中包含的任何 .NET 功能都将不起作用。

此时可能会出现几个问题。首先，为什么不直接向系统注册 .xll 呢？主要是因为如果我注册了 .xll，那么每次有人打开 Excel 时，都会打开 .xll，这意味着我嵌入的 .xlsm 也会打开（请记住，这就是 .xll 在启动时所做的事情。）用户往往会觉得这很烦人... :-)。

接下来，为什么不同时发送两个文件呢？回答：对最终用户的干扰太大（请耐心等待）。爱它或恨它，他们想要一个文件打开然后修改。对他们来说，.xll 只是 .xlsm 的另一个版本，我希望他们保留这种看法，因为这样可以更容易地解释自己。

最后，为什么不将 .xll 作为一个整体分发给我的团队并针对它发布 .xlsms 呢？回答：这些 .xll 将被发送到一大堆随机的地方，我无法控制用户在他们的机器上将拥有什么，所以我更喜欢保持独立。

我想到了两个基本的解决方案。

**选项一是**弄清楚如何简单地从 .xlsm 重新编译 .xll（可能通过 .xll 的实例），然后将该 .xll 保存到用户选择的位置。这将需要我创建自己的保存方法，因为 Excel 对此无济于事，并且可能包括我需要拦截用户在保存时所做的任何努力，以便我可以将它们重定向到我自己的保存方法。问题是我不知道如何让 .xll 自行重新编译，特别是因为我将把 .xll 发送到不一定有 SDK 的机器上。最重要的是，强迫用户使用我自己的保存方法将是另一个不受欢迎的中断（至少在我看来......）

**选项二**是创建一个作为可执行文件工作的程序集。基本上它会包含 .xlsm 和 .xll，并且可执行文件会加载 Excel，然后将 .xll 应用到它。只要可执行文件不需要管理员权限，我想我可以将它们发送出去代替常规的旧文件（这里的大多数人甚至从来没有看到扩展名，带有正确的图标，大多数人不能分辨其中的不同之处）。唯一的问题是我无法弄清楚如何在不使用资源文件并将 .xlsm 转换为字节码的情况下将 .xlsm 链接到程序集。这基本上让我们回到了第一方。

**本质上**，选项 1 要求我弄清楚如何在外国机器上编译，而选项 2 要求我弄清楚如何包含整个 .xlsm 以便我可以修改它并将其放回原来的位置……或者至少把它放在可执行文件可以很容易地再次找到它的地方。

无论如何，如果你做到了这一步，我将永远感激你。我只是想弄清楚下一步该往哪里看，并希望有人能指出我正确的方向。

提前致谢。

# jquery - 更改视频播放器流宽高比

> ID：14781239
> 
> 赞同：0
> 
> 时间：2013-02-08T20:58:24.713
> 
> 标签：jquery, html, video-streaming, aspect-ratio

我有一个 html 视频播放器元素`<video/>`和一个 m3u8 流。可以根据流分辨率将流的纵横比从 4:3 更改为 16:9？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:04:51.080

当 videoWidth 和 videoHeight 已知（以及持续时间等）时，onloadedmetadata 事件将触发，然后您可以使用它来调整显示元素的宽度/高度

# c++ - 如何在 Linux 和 C++ 上设计 GUI

> ID：14781244
> 
> 赞同：1
> 
> 时间：2013-02-08T20:58:38.593
> 
> 标签：c++, linux, ide

我是 Linux 新手。除了 Windows 和 Arduino，我也希望能够在 Linux 上编程。我正在运行 Linux mint 14 Cinnamon (Nadia) 版本。

我想制作带有用户界面的应用程序。如果这需要我使用不同的版本，那没关系：然后我会重新安装 Mint KDE 或 XFce，这没问题。

我一直在研究几种在 Linux 上编写 C++ 的编程工具 到目前为止，它们（CodeBlocks Geany 和我什至尝试过 Vim）都没有创建用户界面并将代码放在后面的东西。

我从 Visual Studio 中想念的是能够制作一个表单、在其上放置按钮、放置一个文本输入字段和一个图像字段等，并且能够用它做一些事情。也许这不是 Linux 的工作方式，也许它是一个分裂的东西。也许有编码软件，是从GUI设计软件中分离出来的。

那么Linux开发者通常是如何做到这一点的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:02:00.807

大量开发人员和工作室使用[Qt](http://qt.digia.com "Qt")进行 Linux 和 Windows 开发。我强烈推荐它，因为它为您提供了一个名为“QtCreator”的 IDE 和一个名为“Designer”的设计器，用于布置表单和小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:01:47.443

如前所述，qt 和 qt creator/designer 非常适合 GUI 应用程序。另一种选择是使用 GTK 和 Glade。Glade 允许您在所见即所得的编辑器中布局组件并为 gui 生成 xml 文件。然后使用 GTK，您可以使用 Gtk::Builder 在应用程序中加载 xml 文件，这将为您创建 gui。然后，您可以获得指向 gui 中各种组件的指针以添加处理程序等。

# php - php LOAD DATA LOCAL INFILE csv 到 mysql

> ID：14781249
> 
> 赞同：1
> 
> 时间：2013-02-08T20:58:54.043
> 
> 标签：php, mysql, csv, load-data-infile

在提出我的第一个问题之前，我已经尝试了一段时间并尽可能多地调查了途径。

我有一个非常简单的 csv 文件。一列，数据由 linux 换行符分隔。我想将它导入到表（代码）的第二列（密码）中。第一列是主键自动递增。

这是简单的 csv 数据（linux 换行 - \n）

```
A12345678911
A12345678912
A12345678913
A12345678914 
```

这是收集文件的表格。

```
<form enctype="multipart/form-data" action="upload_webcodes.php" method="post">
    <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
        <input type="hidden" name="success" value="success" />
    Send this file: <input name="webcodeupload" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

这是试图运行查询以将 tmp 文件加载到数据库中的 php。

```
<?php

function dbconnect(){
$db = mysql_connect('localhost', 'root', 'root');
mysql_select_db("mydatabase", $db);
return $db;
}

if ($_FILES['upload']['type'] === 'text/csv') { 
    $database = dbconnect();
    $getfile = $_FILES['upload']['tmp_name'];   
    $sql = " LOAD DATA LOCAL INFILE $getfile INTO TABLE codes (`passcode`) LINES TERMINATED BY '\n' ";
    mysql_query($sql);   
}
?> 
```

我无法让它工作。我正在用 MAMP 在本地尝试这个。/tmp/php 文件夹 Date Modified 得到更新，但我在那里看不到文件。我什至尝试过更大的文件，因为我的测试文件非常简单。提交表单后，我已打印出 $_FILES 数组。

```
Array
(
    [webcodeupload] => Array
        (
            [name] => Aimport.csv
            [type] => text/csv
            [tmp_name] => /Applications/MAMP/tmp/php/phpsp9ezx
            [error] => 0
            [size] => 52
        )

) 
```

似乎预期的结果在那里？我已经在 phpmyAdmin 中尝试过查询，如果我删除了 LINES TERMINATED BY 子句，它就可以工作。我怀疑这是 phpmyAdmin 的事情，我也尝试过这段代码在查询中使用和不使用该子句。

此外，加载页面时还有一些“未定义索引”错误。我有点理解为什么，并且已经阅读了此处指示掩盖错误的方法的线程，但我有兴趣知道如何避免它们而不是隐藏它们。

任何输入将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T02:40:55.047

首先，您已经正确分析，该文件应该在`/tmp/php`. 所以，你应该检查

1.  `/tmp/php`文件夹中的权限。
2.  为了让 MySQL 能够从`/tmp/php`目录中读取文件，在 linux 中，不要忘记`/etc/apparmor.d/usr.sbin.mysqld`通过添加这一行来设置 apparmor 配置`/tmp/php/** rwk,`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T02:47:31.967

将您的条件更改为：

```
if ($_FILES['webcodeupload']['type'] == 'text/csv') {
    // what you have now
} 
```

您提供的转储显示表单输入字段是“webcodeupload”，但您的 PHP 正在检查“上传”。

脚本结束时文件不存在的原因很好，这就是 php 的工作原理。您必须调用该[`move_uploaded_file`](http://php.net/manual/en/function.move-uploaded-file.php)函数才能将上传的文件实际移动到某处，否则 PHP 会在脚本结束时将其删除（以防止资源消耗攻击）。

请注意，您的`if`陈述中可能存在其他问题，但这会让您更接近。

# mysql - 根据其他列 SQL 的值填充列

> ID：14781253
> 
> 赞同：0
> 
> 时间：2013-02-08T20:59:23.073
> 
> 标签：mysql, sql-server-2008-r2

我是 MYSQL 的新手。我有两列 A 和 B ，我想填充列`C`这样 value `(C) = func(valA, valB)`。我已经填满`A`了`B`列，我想在列中输入`C`。任何帮助表示赞赏。谢谢。编辑：

```
DECLARE @g geometry; 
SET @g = geometry::Point(Latitude, Longitude, 4326) 
```

我需要在 C 列中插入@g，并且我有纬度（A 列）和经度（B 列）。我能够执行以下操作：

```
UPDATE myTable
SET `C` = `A` + `B` 
```

但是当我尝试表演时

```
UPDATE myTable
SET `C` = geometry::Point(`A`, `B`, 4326), //--it gives me an error that `error occurred during execution of geometry` 
```

有什么建议么 ？我是新手，所以我可能做错了很多事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:03:12.693

尝试这个

```
update your_table set C = Concat(A,',',B) 
```

**编辑：**

也许您的意思是地理而不是几何。

`GEOGRAPHY`用于坐标/点，`GEOMETRY`用于区域/多边形。

尝试这个

```
UPDATE myTable
SET `C` = geography::Point(`A`, `B`, 4326); 
```

这里有一些[在 SQL Server 2008 中添加点数据的不同方法](http://colinmackay.co.uk/2008/02/07/different-ways-to-add-point-data-in-sql-server-2008/)

# php - 为什么这个函数看不到包含文件中包含的文件的变量？

> ID：14781254
> 
> 赞同：0
> 
> 时间：2013-02-08T20:59:23.530
> 
> 标签：php, variables, scope, undefined, require

第一篇在这里！好的，所以我有一个包含此代码的函数：

```
require_once('../strap.php');

$admin = new Member;
$admin->setName($_POST['username']);
$admin->setPassword($hash);
$admin->setEmail($_POST['email']);
$admin->updateDatabase(); 
```

所需的文件如下所示：

```
//define constants
define('ROOTPATH', __DIR__ . '/');
define('CLASSES', __DIR__ . '/classes/');

//Lazy load any required php classes
function __autoload($class_name) {
    $file = CLASSES . $class_name . '.php';
    if( file_exists($file) ) {
        require_once $file;
    } else {
        echo "Can't find ". $file;;
    }
}

//does config exist?
if (!file_exists('config.php')) {
    //redirect to install routine if config does not exist
    header(ROOTPATH . 'admin/install.php') ;
}

require('config.php');

//connect to the database
try {
    $pdo = new PDO('mysql:database='.$conf['database'].';host='.$conf['host'].';port='.$conf['port'].';', 
    $conf['username'], $conf['password']);
} catch(PDOException $e) {
    die('ERROR: Could not connect: ' . print_r($e->getMessage()));
} 
```

并且其中所需的文件（config.php）如下所示：

```
$conf['username'] = 'root';
$conf['password'] = '';
$conf['host'] = 'localhost';
$conf['database'] = 'dddatabase';
$conf['port'] = '3306';
$conf['prefix'] = 'cms_'; 
```

我的问题是我收到此错误：注意：未定义变量：第 152 行 D:\wamp\www\testing\scripts\CMS\classes\Member.php 中的 conf

并且

注意：未定义变量：第 153 行 D:\wamp\www\testing\scripts\CMS\classes\Member.php 中的 pdo

当它初始化一个新的 Member 对象然后调用 updateDatabase() 方法时，该方法使用 $conf[] 数组和 $pdo 对象。

但是，如果我再次包含strap.php，我会收到错误消息：Cannot redeclare __autoload() (previously declared in D:\wamp\www\testing\scripts\CMS\strap.php:16) in D:\wamp\www\第 23 行的 testing\scripts\CMS\strap.php

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:15:29.417

在您尝试访问 $pdo 和 $conf 变量的 Member 类中，您需要将它们声明为全局变量。因此，在 Member 类中，在您尝试使用这些变量的函数中，将以下内容添加到函数的开头（或至少在您引用它们之前）：

```
global $conf, $pdo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-19T16:22:07.173

我需要看看你的班级成员。

但是当您尝试使用未定义的对象变量时会引发此类错误。

您要么需要使用 setter 将 $conf 传递给 Member 类，如下所示：

需要'config.php'；

`$member = new Member();` `$member->setConfig($conf);`

在内部，您的 setter 和类可能如下所示：

...

```
/** var array $config **/
private $config = array();

public function  setConfig(array $conf)
{
    $this->config = $conf;
}

public function getPort()
{
    return $this->config['port];
} 
```

...

现在，我个人更喜欢只使用类并避免使用数组（）。如果其他人结束使用您的类，则必须了解数组结构而不是类定义。

快速重新实现您要实现的目标，如下所示：

...

```
php INI File:

[database]
username =  root
password = 1234
database = localhost
host = localhost 
```

```
// Immutable value Object

Class Config
{

    private $username;
    private $password;
    private $host;
    private $database;
    private $port;
    private $prefix;

    public function __construct($username, $password, $host, $database, $port, $prefix = 'db_')
    {
        $this->username = $username;
        $this->password = $password;
        $this->host     = $host;
        $this->database = $database;
        $this->port     = $port;
        $this->prefix   = $prefix;
    }

    public function getUsername()
    {
        return $this->username;
    }

    /**
     * @return mixed
     */
    public function getDatabase()
    {
        return $this->database;
    }

    /**
     * @return mixed
     */
    public function getHost()
    {
        return $this->host;
    }

    /**
     * @return mixed
     */
    public function getPassword()
    {
        return $this->password;
    }

    /**
     * @return mixed
     */
    public function getPort()
    {
        return $this->port;
    }

    /**
     * @return mixed
     */
    public function getPrefix()
    {
        return $this->prefix;
    }
}

// Entity

class Member
{
    private $name;
    private $password;
    private $email;
    private $config;

    public function setPost($post)
    {
        $this->name     = isset($post->name) ? $post->name : 'admin';
        $this->email    = isset($post->email) ? $post->email : 'admin@localhost';
        $this->password = isset($post->password) ? $post->password : '1234';
    }

    /**
     * @param mixed $config
     */
    public function setConfig($config)
    {
        $this->config = $config;
    }

    /**
     * @return mixed
     */
    public function getConfig()
    {
        return $this->config;
    }

    /**
     * @param mixed $email
     */
    public function setEmail($email)
    {
        $this->email = $email;
    }

    /**
     * @return mixed
     */
    public function getEmail()
    {
        return $this->email;
    }

    /**
     * @param mixed $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * @return mixed
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * @param mixed $password
     */
    public function setPassword($password)
    {
        $this->password = $password;
    }

    /**
     * @return mixed
     */
    public function getPassword()
    {
        return $this->password;
    }

}

class Connection
{
    /**
     * @var  Config $config
     */
    private $config;
    private $connection;

    public function __construct(Config $config)
    {
        $this->config = $config;
    }

    public function connect()
    {
        if (!$this->connection instanceof \PDO) {
            $this->connection = new \PDO(
                'mysql:database=' . $this->config->getDatabase() .
                ';host=' . $this->config->getHost() .
                ';port=' . $this->config->getPort() . ';',
                $this->config->getUsername(),
                $this->config->getPassword()
            );
        } else {
            $this->connection;
        }
    }
} 
```

...

那么我们现在应该有：

定义（'ROOTPATH'，**目录**。'/'）；定义（'CLASSES'，**DIR** .'/classes/'）；

```
//Lazy load any required php classes
function __autoload($class_name) {
    $file = CLASSES . $class_name . '.php';
    if( file_exists($file) ) {
        require_once $file;
    } else {
        echo "Can't find ". $file;;
    }
}

//does config exist?
if (!file_exists('config.ini')) {
    //redirect to install routine if config does not exist
    header(ROOTPATH . 'admin/install.php') ;
}

if(false == $config = parse_ini_file('config.ini')) {
    //Do something else
}

$post = (object)$_POST;
$configClass = new Config(
    $config['username'], 
    $config['password'],   
    $config['host'], 
    $config['database'], 
    $config['port']
);

$connection = new Connection($configClass);

try {
    $connection->connect();
} catch(\Exception $e) {
    die($e->getMessage());
}

$member = new Member();

//Either

$member->setPost($post);

//OR

$member->setName($post->name);
$member->setEmail($post->email);
$member->setPassword($post->password);

//I do not understand, what you are try to do below but its from your question

$member->updateDatabse(); 
```

...

我不确定你想用你的成员类实现什么，它是活动记录吗？

不要使用全球，它的陷阱。

# python - 没有灾难性回溯的慢速 Python 正则表达式

> ID：14781258
> 
> 赞同：0
> 
> 时间：2013-02-08T20:59:34.043
> 
> 标签：python, regex

我有 2 个 csv 文件。第一个，`input`，由带有各种错误的输入街道地址组成。第二，`ref`是一个干净的街道地址表。内的记录`input`需要与内的记录相匹配`ref`。将文件转换为具有唯一记录的列表很快，但是一旦我进入匹配过程，它就非常慢，需要整整 85 秒才能匹配两个地址`input`，`ref`而不需要任何正则表达式！我意识到`ref`是这里的问题；它的长度超过 100 万条记录，文件大小为 30 MB。我预计这些大小会出现一些性能问题，但是只为两条记录花费这么长时间是不可接受的（实际上，我可能必须匹配多达 10,000 条或更多记录。此外，我最终需要将一些正则表达式嵌入到`ref`项目中以允许更灵活的匹配。测试新的正则表达式模块更糟糕，同样的两条`input`记录需要高达 185 秒的时间。有人知道大幅加快速度的最佳方法吗？例如，我可以按邮政编码索引吗？

以下是分别来自 input 和 ref 的示例地址（预处理后）：

```
60651 N SPRINGFIELD AVE CHICAGO
60061 BROWNING CT VERNON HILLS 
```

这是我到目前为止所拥有的。（作为一个新手，我意识到我的代码可能存在各种低效率，但这不是问题）：

```
import csv, re

f = csv.reader(open('/Users/benjaminbauman/Documents/inputsample.csv','rU'))

columns = zip(*f)

l = list(columns)

inputaddr = l[0][1:]

f = csv.reader(open('/Users/benjaminbauman/Documents/navstreets.csv','rU'))
f.next()

reffull = []
for row in f:
    row = str(row[0:7]).strip(r'['']').replace("\'","")
    if not ", , , , ," in row: reffull.append(row) 

input = list(set(inputaddr))

ref1 = list(set(reffull))
ref2 = ref1

input_scrub = []
for i in inputaddr:
    t = i.replace(',',' ')
    input_scrub.append(' '.join(t.split()))

ref_scrub = []

for i in ref1:
    t = i.replace(',',' ')
    ref_scrub.append(' '.join(t.split()))

output_iter1 = dict([ (i, [ r for r in ref_scrub if re.match(r, i) ]) for i in input_scrub ])

unmatched_iter1 = [i for i, j in output_iter1.items() if len(j) < 1]
matched_iter1 = {i: str(j[0][1]).strip(r'['']') for i, j in output_iter1.items() if len(j) is 1}
tied_iter1 = {k: zip(*(v))[1] for k,v in output_iter1.iteritems() if len(v) > 1} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:49:29.567

如果执行时间可以接受，也许您可​​以使用 difflib 模块，而不是新模块中的模糊正则表达式：

```
import difflib

REF = ['455 Gateway Dr, Brooklyn, NY 11239',
       '10 Devoe St, Brooklyn, NY 11211',
       '8801 Queens Blvd, Elmhurst, NY 11373 ',
       '342 Wythe Ave, Brooklyn, NY 11249 ',
       '4488 E Live Oak Ave, Arcadia, CA 91006',
       '1134 N Vermont Ave, Los Angeles, CA 90029',
       '1101 17th St NW, Washington, DC 20036 ',
       '3001 Syringa St, Hopeful-City, AL 48798',
       '950 Laurel St, Minneapolis, KS 67467']

INPUT = ['4554 Gagate Dr, Brooklyn, NY 11239',
         '10 Devoe St, Brooklyn, NY 11211',
         '8801 Queens Blvd, Elmhurst, NY 11373 ',
         '342 Wythe Ave, Brooklyn, NY 11249 ',
         '4488 E Live Oak Ave, Arcadia, CA 91006',
         '1134 N Vermont Ave, Los Angeles, CA 90029',
         '1101 17th St NW, Washington, DC 20036 ',
         '3001 Syrinuy St, Hopeful Dam, AL 48798',
         '950 Laurel St, Minneapolis, KS 67467',
         '455 Gateway Doctor, Forgotten Place, NY 11239',
         '10 Devoe St, Brook., NY 11211',
         '82477 Queens Blvd, Elmerst, NY 11373 ',
         '342 Waithe Street, Brooklyn, MN 11249 ',
         '4488 E Live Poke Ave, Arcadia, CA 145',
         '1134 N Vermiculite Ave, Liz Angelicas, CA 90029',
         '1101 1st St NW, Washing, DC 20036 ']

def treatment(inp,reference,crit,gcm = difflib.get_close_matches):
    for input_item in inp:
        yield (input_item,gcm(input_item,reference,1000,crit))

for a,b in treatment(INPUT,REF,0.65):
    print '\n- %s\n     %s' % (a, '\n     '.join(b)) 
```

结果是：

```
- 4554 Gagate Dr, Brooklyn, NY 11239
     455 Gateway Dr, Brooklyn, NY 11239
     342 Wythe Ave, Brooklyn, NY 11249 

- 10 Devoe St, Brooklyn, NY 11211
     10 Devoe St, Brooklyn, NY 11211

- 8801 Queens Blvd, Elmhurst, NY 11373 
     8801 Queens Blvd, Elmhurst, NY 11373 

- 342 Wythe Ave, Brooklyn, NY 11249 
     342 Wythe Ave, Brooklyn, NY 11249 
     455 Gateway Dr, Brooklyn, NY 11239

- 4488 E Live Oak Ave, Arcadia, CA 91006
     4488 E Live Oak Ave, Arcadia, CA 91006

- 1134 N Vermont Ave, Los Angeles, CA 90029
     1134 N Vermont Ave, Los Angeles, CA 90029

- 1101 17th St NW, Washington, DC 20036 
     1101 17th St NW, Washington, DC 20036 

- 3001 Syrinuy St, Hopeful Dam, AL 48798
     3001 Syringa St, Hopeful-City, AL 48798

- 950 Laurel St, Minneapolis, KS 67467
     950 Laurel St, Minneapolis, KS 67467

- 455 Gateway Doctor, Forgotten Place, NY 11239
     455 Gateway Dr, Brooklyn, NY 11239

- 10 Devoe St, Brook., NY 11211
     10 Devoe St, Brooklyn, NY 11211

- 82477 Queens Blvd, Elmerst, NY 11373 
     8801 Queens Blvd, Elmhurst, NY 11373 

- 342 Waithe Street, Brooklyn, MN 11249 
     342 Wythe Ave, Brooklyn, NY 11249 
     455 Gateway Dr, Brooklyn, NY 11239

- 4488 E Live Poke Ave, Arcadia, CA 145
     4488 E Live Oak Ave, Arcadia, CA 91006

- 1134 N Vermiculite Ave, Liz Angelicas, CA 90029
     1134 N Vermont Ave, Los Angeles, CA 90029

- 1101 1st St NW, Washing, DC 20036 
     1101 17th St NW, Washington, DC 20036 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T22:33:58.127

我突然想到为什么这条线

```
output_iter1 = dict([ (i, [ r for r in ref_scrub if re.match(r, i) ]) for i in input_scrub ]) 
```

花了这么长时间。匹配过程是为超大列表中的每个项目搜索`ref`与较小列表中的项目的匹配`input`，而不是相反。不幸的是，我希望它以这种方式构建，以便我可以将正则表达式嵌入到 中的项目中`ref`，因为这些项目是由地址属性标记的，以便于锚定。鉴于我对 sql 的理解有限，我想有两种解决方法。根据 eyquem 的建议，第一个可以使用我在上一条评论中提出的想法。第二个可以在使用 regex 或 difflib 进行更复杂的匹配之前，使用 equals to 语句按城市和邮政编码属性进行查找（索引？）。

我已经在和中拆分项目`input`，`ref`以便城市和邮政编码属性是列表中的单独项目，例如：

```
ref ('COVE POINTE CT', 'BLOOMINGTON, 61704')
input ('S EBERHART', 'CHICAGO, 60628') 
```

以下允许我将搜索范围缩小到`ref`共享相同城市和邮政编码的部分。`input`这将包含超过 1000 条记录的文件的时间长度缩短到 56 秒。这要好得多。

```
matchaddr = []
refaddr = []
unmatched = []
for i in ref:
    for t in input:
        if t[1] == i[1]:
            if re.match(i[0],t[0]):
                matchaddr.append(t[0] + ', ' + t[1])
                refaddr.append(i[0] + ', ' + i[1]) 
```

现在我可以再次使用我心爱的正则表达式（前提是表达式不会引起其他问题，例如灾难性的回溯）。此外，此代码的速度是因为首先找到与城市和邮政编码属性的完美匹配。如果我尝试允许灵活匹配城市和邮政编码，速度可能会大大牺牲。不幸的是，它可能不得不走到那一步（输入还包含混乱的城市和邮政编码属性）。

# sql-server - 如何创建查询以显示下表中的清单？

> ID：14781262
> 
> 赞同：1
> 
> 时间：2013-02-08T21:00:02.527
> 
> 标签：sql-server, stored-procedures

使用sql server 2008，我需要一个查询来显示以下结果

```
 User_Name        Group_Name          Checked
 user1              Lead                 0
 user1              Admin                1
 user1              Supervisor           0
 user1              Monitor              0
 user2              Lead                 0
 user2              Admin                0
 user2              Supervisor           1
 user2              Monitor              1 
```

**我有 4 个组（Lead、Admin、Supervisor、monitor），链接表是用户组。如何为每个用户显示所有组（如上）？如果为用户选中组，则它显示在用户组中，如果未选中，则不在表中。**

表格：

**用户：**

```
User_ID int
User_Name nvarchar
Email nvarchar 
```

**团体：**

```
Group_ID int
Group_Name nvarchar 
```

**用户组：**

```
User_ID int, 
Group_ID int 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:09:19.303

试试这个：

```
select User.User_Name, Group.Group_Name,
 case when UserGroup.User_ID is null then 0 else 1 end as Checked
from User cross join Group
 left join UserGroup on User.User_ID = UserGroup.User_ID
   and Group.Group_ID = UserGroup.Group_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:13:05.333

在 SQL Server 2005+ 中，您可以使用[`APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)将每个`group`值分配给 each的运算符`user`，然后您可以加入`usergroup`表：

```
select u.user_name,
  g.group_name,
  case when ug.user_id is not null then 1 else 0 end Checked
from [user] u
cross apply [group] g
left join usergroup ug
  on u.user_id = ug.user_id
  and g.group_id = ug.group_id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/44b0b/10)

# php - 使用explode或regex或substr函数将城市从php中的状态中提取出来

> ID：14781263
> 
> 赞同：0
> 
> 时间：2013-02-08T21:00:02.967
> 
> 标签：php, explode

我有下面的代码，我试图从城市状态字符串中提取城市。它在大多数情况下都有效，但发现它在下面不起作用，因为科罗拉多州在城市中并且也是州。我需要制作`$geography_nav`科罗拉多斯普林斯，并且当该州不属于城市字符串时，我还需要它来工作。关于如何做到这一点的任何想法？

`$geography->description = Colorado
$geography->name- = Colorado Springs Colorado`

 ````
 $geography_nav=explode($geography->description, $geography->name);</code> 
```

I am updating this, I don't necessarly need to use explode, just trying to find some way to extract the city out of the city state string. The format will always be the same as shown above in `$Geography->name` and the` 

`$Geography->description`将始终等于州名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:30:42.740

我使用了[strrpos](http://www.php.net/manual/en/function.strrpos.php)函数，它从右侧搜索字符串的实例。

如果您知道 $geography->name 肯定具有位于 $geography->description 末尾的状态，这**将起作用。**

```
$statePos = strrpos($geography->name, $geography->description);
if ($statePos>0){
   $state = substr($geography->description, $statePos);
   $city = substr($geography->description, 0, strlen($geography->description)-$statePos);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:30:37.970

好吧，我想如果你有一个状态数组，你可以尝试做一个 strrpos() 并找到每个状态名称的最后一个事件（如果有的话）。Explode 不会对你有任何帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:52:08.787

实际上，这里的正则表达式是您真正需要的。在每个条目上使用 preg_match [http://www.php.net/manual/en/function.preg-match.php](http://www.php.net/manual/en/function.preg-match.php)

正则表达式：`$regex = '/([a-z\s]+)\s[(Arizona),(New Mexico)]/i'`

用法：`preg_match( $regex , $string , $matches ); $city = $matches[1];`

（将所有状态，逗号分隔并在括号内添加到方括号中）

**编辑**

要使用您在上面提供的代码：

```
if( preg_match( '/^([a-z\s]+)\s' . $geography->description . '/i' , $geography->name, $matches ) )
    $geography_nav = $matches[1]; 
```

# c++ - 如何自复制向量？

> ID：14781264
> 
> 赞同：3
> 
> 时间：2013-02-08T21:00:03.337
> 
> 标签：c++, vector, stl

假设我有一个`vector<string>`包含“a”和“b”的a，我想复制自己2次，以便向量现在包含“a”、“b”、“a”、“b”、“a”、“b”

有什么比使用`for`and更好的方法`push_back`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:09:14.390

我最初的想法：

```
myvec.reserve(myvec.size()*3);  //reserve not only speeds things upt it also protects us ftom iterator invalidation
vector<string>::iterator it = myvec.end();    //we ant to add two times the origional onto the end so we save the end of the origional end
myvec.insert(myvec.end(), myvec.begin(), it);
myvec.insert(myvec.end(), myvec.begin(), it); 
```

感谢 Emilio Garavaglia 首先指出了这方面的问题，请参阅这里有很多问题的原因：[如果向量有足够的空间（通过保留创建），std::vector::insert() 是否会使迭代器无效？](https://stackoverflow.com/questions/14820835/does-stdvectorinsert-invalidate-iterators-if-the-vector-has-enough-room-c)

第二次尝试：

```
std::size_t size = myvec.size();
myvec.resize(size*3);  //resize must protects us from iterator invalidation
vector<string>::iterator it = myvec.begin()+size;
std::copy(myvec.begin(),it,it);
std::copy(myvec.begin(),it,it+size); 
```

因为没有实现会实现 std::string 的默认构造函数在堆上分配一些东西，这应该会导致更少的堆访问，因此比其他示例更快。

另一个堆访问最小化是将向量复制到另一个插入它然后移入原件，我偷了 Emilio Garavaglia 代码并拉皮条：

```
{
vector<string> m = { "a", "b" };
auto n = m; // keep initial value safe
m.reserve(3 * m.size()); // preallocate, to avoid consecutive allocations
m.insert(m.end, n.begin(), n.end());
std::for_each(n.begin(),n.end(),[&n](std::string &in){n.emplace_back(std::move(in));});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:12:37.773

```
vector<string> m = { "a", "b" };

auto n = m; // keep initial value safe

m.reserve(3 * m.size()); // preallocate, to avoid consecutive allocations
m.insert(m.end, n.begin(), n.end());
m.insert(m.end, n.begin(), n.end()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T21:15:24.660

我的第一个想法是为了避免使迭代器无效的问题。

```
{   // note: nested scope
    vector<string> temp(vec); // 1st copy
    temp.insert(temp.end(), vec.begin(), vec.end()); // 2nd copy
    temp.insert(temp.end(), vec.begin(), vec.end()); // 3rd copy
    temp.swap(vec); // swap contents before temp is destroyed
} 
```

回顾一下，我认为 PorkyBrain 和 Emilio Garavaglia 的答案*可能*更有意义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T22:11:21.997

这是一个简单的方法：

```
template<typename T, typename A1, typename A2>
std::vector<T, A1> operator+( std::vector<T, A1> left, std::vector<T, A2> const& right ) {
  left.insert( left.end(), right.begin(), right.end() );
  return left;
}

int main() {
  std::vector<string> m = { "a", "b" );

  m = m + m + m;
} 
```

但正如@ChristianAmmer 指出的那样，覆盖`operator+`a`std::vector`是模棱两可的。那将是错误的。

因此，您可以编写一个完整的中缀命名运算符语法，并使用 C++ 的魔力将其嵌入到 C++ 语言中，以消除这种歧义。有点像这样：

```
#include <utility>

template<typename Operation, short op>
struct InfixOp {
  Operation* self() { return static_cast<Operation*>(this); }
  Operation const* self() const { return static_cast<Operation const*>(this); }
};

template<typename first_type, typename Infix, short op>
struct PartialForm {
  Infix const* infix;

  first_type a;

  template<typename T>
  PartialForm(T&& first, Infix const* i):infix(i), a(std::forward<T>(first)) {}
};

#define OVERRIDE_OPERATORS(OP, CODE) \
template<\
  typename Left,\
  typename Operation\
>\
PartialForm<typename std::remove_reference<Left>::type, Operation, CODE> operator OP( Left&& left, InfixOp<Operation, CODE> const& op ) {\
  return PartialForm<typename std::remove_reference<Left>::type, Operation, CODE>( std::forward<Left>(left), op.self() );\
}\
\
template<\
  typename Right,\
  typename First,\
  typename Operation\
>\
auto operator OP( PartialForm<First, Operation, CODE>&& left, Right&& right )\
  ->decltype( (*left.infix)( std::move( left.a ), std::forward<Right>(right)) )\
{\
  return (*left.infix)( std::move( left.a ), std::forward<Right>(right) );\
}

OVERRIDE_OPERATORS(+, '+')
OVERRIDE_OPERATORS(*, '*')
OVERRIDE_OPERATORS(%, '%')
OVERRIDE_OPERATORS(^, '^')
OVERRIDE_OPERATORS(/, '/')
OVERRIDE_OPERATORS(==, '=')
OVERRIDE_OPERATORS(<, '<')
OVERRIDE_OPERATORS(>, '>')
OVERRIDE_OPERATORS(&, '&')
OVERRIDE_OPERATORS(|, '|')
//OVERRIDE_OPERATORS(!=, '!=')
//OVERRIDE_OPERATORS(<=, '<=')
//OVERRIDE_OPERATORS(>=, '>=')

template<typename Functor, char... ops>
struct Infix:InfixOp<Infix<Functor, ops...>, ops>...
{
  Functor f;
  template<typename F>
  explicit Infix(F&& f_in):f(std::forward<F>(f_in)) {}
  Infix(Infix<Functor, ops...> const& o):f(o.f) {}
  Infix(Infix<Functor, ops...>&& o):f(std::move(o.f)) {}
  Infix(Infix<Functor, ops...>& o):f(o.f) {}
  template<typename L, typename R>
  auto operator()( L&& left, R&& right ) const
    -> decltype( f(std::forward<L>(left), std::forward<R>(right)))
  {
    return f(std::forward<L>(left), std::forward<R>(right));
  }
};

template<char... ops, typename Functor>
Infix<Functor, ops...> make_infix( Functor&& f )
{
  return Infix<Functor, ops...>(std::forward<Functor>(f));
}

#include <vector>

struct append_vectors {
  template<typename T>
  std::vector<T> operator()(std::vector<T> left, std::vector<T>const& right) const {
    left.insert(left.end(), right.begin(), right.end());
    return std::move(left);
  }
};

struct sum_elements {
  template<typename T>
  std::vector<T> operator()(std::vector<T> left, std::vector<T>const& right) const {
    for(auto it = left.begin(), it2 = right.begin(); it != left.end() && it2 != right.end(); ++it, ++it2) {
      *it = *it + *it2;
    }
    return left;
  }
};
struct prod_elements {
  template<typename T>
  std::vector<T> operator()(std::vector<T> left, std::vector<T>const& right) const {
    for(auto it = left.begin(), it2 = right.begin(); it != left.end() && it2 != right.end(); ++it, ++it2) {
      *it = *it * *it2;
    }
    return left;
  }
};

#include <iostream>

int main() {
  auto append = make_infix<'+'>(append_vectors());
  auto sum = make_infix<'+'>(sum_elements());
  auto prod = make_infix<'*'>(prod_elements());

  std::vector<int> a = {1,2,3};
  a = a +append+ a +append+ a;
  a = a +sum+ a;
  a = a *prod* a;

  std::cout << a.size() << "\n";
  for (auto&& x:a) {
    std::cout << x << ",";
  }
  std::cout << "\n";
} 
```

它的优点是在你使用它的时候很清楚（我的意思是，`a = a +append+ a`很清楚它打算做什么），但代价是理解它的工作原理有点棘手，而且对于这样一个简单的问题有点冗长.

但至少模糊性消失了，这是一件好事，对吧？

# .net - .net 服务器应用程序中简单但必不可少的搜索选项

> ID：14781265
> 
> 赞同：1
> 
> 时间：2013-02-08T21:00:10.690
> 
> 标签：.net, search, fuzzy-search

我有一个基于 .net 服务器的应用程序，它只需要能够对**单个 db 列**进行全文“模糊”搜索。底层数据库引擎是 SQL Server 2008 r2。

数据列**写入一次**（从不修改），预计在“加载”下**每分钟将添加多达 10 个新字符串**。

字符串的上限为 1000 个字符。目前只有西方语言，但计划在未来添加其他语言。

消费客户端会将搜索词（很可能是空格分隔的关键字）传递给服务器，然后服务器会将匹配记录列表返回给客户端。

唯一“复杂”的部分是需要处理拼写错误和类似的单词。

感觉好像使用 DoubleMetaphone 之类的东西滚动我自己会起作用，但显然需要开发工作。

**所以我想知道人们是否认为一些现有的搜索“应用程序”可能是合适的？**（例如 Lucene.net）。**或者，如果它们对于如此小的搜索要求来说太过分了。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:10:11.663

我会使用 SQL Server 全文搜索。它功能强大，可调整，支持不同语言的语言特性等等。

我认为你应该从这个开始：http: [//msdn.microsoft.com/en-us/library/ms142571 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms142571(v=sql.105).aspx)

将其应用于您的应用程序的非常一般的步骤将是：

1.  从 SQL Server 安装中安装全文搜索组件。

2.  在您的数据库中创建和调整全文索引。

3.  使用必要的谓词定义搜索查询。

4.  集成到您的应用程序中！

# php - 计算指数

> ID：14781269
> 
> 赞同：0
> 
> 时间：2013-02-08T21:00:24.990
> 
> 标签：php, excel, exponent

在 Excel 中`=(B5/2)^2*3.141592654`，其中**B5**是杆。

这不会产生相同的结果。

```
$rodarea = $rod/2 ^2*3.141592654 ; 
```

我究竟做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:13:30.747

我猜你的错误是用任何语言（perl？）写的：

`$rodarea = $rod/2 ^2*3.141592654 ;`

`^`由于`XOR`is also的歧义，许多编程语言不尊重指数运算符`^`。它们通常具有一些类似`pow`或`exp`做指数的功能。在你的情况下，你也可以这样做：

```
$rodarea = (($rod/2)*($rod/2))*3.141592654 ; 
```

（perl 中的指数是`**`, not `^`，虽然我不知道这是否是正确的语言）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:52:44.520

在 Excel 中，^ 是指数运算符....在 PHP 中，^ 是位运算符。要在 PHP 中计算指数，您需要使用[pow()](http://www.php.net/manual/en/function.pow.php)函数。

```
$rodarea = pow($rod / 2, 2) * 3.141592654 ; 
```

# php - 发布复选框值

> ID：14781270
> 
> 赞同：35
> 
> 时间：2013-02-08T21:00:30.080
> 
> 标签：php, checkbox

我想在 booking.php 页面上发布复选框的值。

页面上有很多复选框，但我不知道如何在`booking.php`页面上发布。

```
<form name="booking.php" method="post">
    <label for="tour" class="tour-label">Add to Tour List</label>
    <input type="checkbox" name="booking-check" value="Desert Safari" />
</form>
<div class="details"><a href="booking.php">Book Selected Tours</a></div> 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-08T21:05:32.030

有许多链接可以让您知道如何处理 php.ini 中复选框的帖子值。看看这个链接：[http ://www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)

单个复选框

HTML 代码：

```
<form action="checkbox-form.php" method="post">
    Do you need wheelchair access?
    <input type="checkbox" name="formWheelchair" value="Yes" />
    <input type="submit" name="formSubmit" value="Submit" />
</form> 
```

PHP代码：

```
<?php

if (isset($_POST['formWheelchair']) && $_POST['formWheelchair'] == 'Yes') 
{
    echo "Need wheelchair access.";
}
else
{
    echo "Do not Need wheelchair access.";
}    

?> 
```

复选框组

```
<form action="checkbox-form.php" method="post">
    Which buildings do you want access to?<br />
    <input type="checkbox" name="formDoor[]" value="A" />Acorn Building<br />
    <input type="checkbox" name="formDoor[]" value="B" />Brown Hall<br />
    <input type="checkbox" name="formDoor[]" value="C" />Carnegie Complex<br />
    <input type="checkbox" name="formDoor[]" value="D" />Drake Commons<br />
    <input type="checkbox" name="formDoor[]" value="E" />Elliot House

    <input type="submit" name="formSubmit" value="Submit" />
 /form>

<?php
  $aDoor = $_POST['formDoor'];
  if(empty($aDoor)) 
  {
    echo("You didn't select any buildings.");
  } 
  else
  {
    $N = count($aDoor);

    echo("You selected $N door(s): ");
    for($i=0; $i < $N; $i++)
    {
      echo($aDoor[$i] . " ");
    }
  }
?> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-12-01T21:14:24.270

在正常情况下，复选框返回一个开/关值。

您可以使用以下代码进行验证：

```
<form action method="POST">
      <input type="checkbox" name="hello"/>
</form>

<?php
if(isset($_POST['hello'])) echo('<p>'.$_POST['hello'].'</p>');
?> 
```

这将返回

```
<p>off</p> 
```

或者

```
<p>on</p> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T21:04:39.770

你应该使用

```
<input type="submit" value="submit" /> 
```

在你的`form`.

并添加`action`到您的`form`标签中，例如：

```
<form action="booking.php" method="post"> 
```

它将您的表格发布到您选择的行动中。

从 php 你可以得到这个值

```
$_POST['booking-check']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T21:05:55.463

在您的表单标签中，而不是

```
name="booking.php" 
```

利用

```
action="booking.php" 
```

然后，在 booking.php 中使用

```
$checkValue = $_POST['booking-check']; 
```

此外，您还需要一个提交按钮

```
<input type='submit'> 
```

# algorithm - 最优网格聚类

> ID：14781271
> 
> 赞同：2
> 
> 时间：2013-02-08T21:00:31.623
> 
> 标签：algorithm, dynamic-programming

首先，一维案例。给定一个包含 N 个数字的数组，将其分成 n 个块，以使每个元素与其块平均值的平方距离之和最小化。例如，如果要求将 [0.1,0.3,2,1.2,1.3] 分成三部分，则最优解是 [[0.1,0.3],[2],[1.2,1.3]]。

使用动态编程，这可以在 O(N * n) 中轻松解决

现在是 2D 案例。给定一个 (N,M) 矩阵，我们想将它切成 n*m 块。解决方案应该看起来像一个不规则间隔的网格 - 它是一组 n 个水平切口和 m 个垂直切口。

这似乎更棘手。可以通过固定水平切割来动态找到最佳垂直切割，但这似乎并没有导致任何地方。枚举所有可能的水平切割 O(C(M,m)) 是棘手的。

有没有办法在多项式时间内做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T02:12:32.083

这听起来很像 NP-Hard 问题：[http](http://en.wikipedia.org/wiki/K-means_clustering) ://en.wikipedia.org/wiki/K-means_clustering所以我认为不存在多项式时间算法。

# php - 仅在尚不存在时发布

> ID：14781272
> 
> 赞同：0
> 
> 时间：2013-02-08T21:00:34.073
> 
> 标签：php, mysql, database, wordpress, duplicates

我正在为 Wordpress 构建一个插件，我从 XML 提要中提取数据并使用 wp_insert_post() 函数发布所有这些数据。该插件每小时执行一次，因此我必须防止重复发布。

我尝试添加一个过滤器并将 XML 提要中的 post_date 与 Wordpress 中的进行比较（因为我给帖子提供了与 XML 相同的 post_date），但它不起作用，我不知道为什么..

这是我的代码：

```
 add_filter('posts_where', 'checkPosts'); //I add a filter
    $query = new WP_Query('post_type=event'); // Make a query for the custom post_type 'event'
    if(!$query->have_posts()) { //If it doesn't have any posts with the same post_date post it
        $post_id = wp_insert_post($post);
        wp_set_object_terms($post_id, $genres, 'genre');
    }
    remove_filter('posts_where', 'checkPosts');

function checkPosts($where = '') {
    $where .= " AND post_date = ".$post_date;
    return $where;
} 
```

有人可以告诉我我的错误或给我另一种技术来防止在 Wordpress 中出现相同的帖子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:24:00.510

我对 Wordpress 过滤器不是特别熟悉，但我不相信双等号是有效的 SQL。

尝试更改您的过滤器功能：

```
function checkPosts($where = '') {
    $where .= " AND post_date = ".$post_date;
    return $where;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:15:00.067

好吧，所以如果有人试图做同样的事情，这对我有用。

我删除了过滤器，因为我不是 100% 确定如何使用它们，并且使用这种方法可以更快/更容易地实现它们：

```
$query = new WP_Query('post_type=event&year='.$post_Y.'&monthnum='.$post_m.'&day='.$post_d.'&hour='.$post_H.'&minute='.$post_i);
    if(!$query->have_posts()) {
        $post_id = wp_insert_post($post);
        wp_set_object_terms($post_id, array( $venue_name ), 'locatie');
    } 
```

只需用您要使用的信息填写年份、月份等，就是这样！

# r - 将 R 代码分解到文件路径的下一行

> ID：14781274
> 
> 赞同：2
> 
> 时间：2013-02-08T21:00:43.217
> 
> 标签：r

为什么这样有效：

```
PC<-read.csv('./public-transportation/san-francisco/passenger-count.csv', header=TRUE) 
```

但以下在 R 中不起作用：

```
inputFile <-paste('./public-transportation/',
'san-francisco/passenger-count.csv')
PC<-read.csv(inputFile, header=TRUE) 
```

我所做的只是传递一个包含文件名的变量？抱歉，我对 R 比较陌生。这让我有点困惑。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T21:02:50.757

这不起作用，因为默认分隔符`paste`是空格。所以你需要设置`sep=""`、使用`paste0`或使用`file.path`。

```
# paste with sep=""
inputFile <- paste('./public-transportation/',
  'san-francisco/passenger-count.csv', sep="")
# paste0
inputFile <- paste0('./public-transportation/',
  'san-francisco/passenger-count.csv')
# file.path
inputFile <- file.path('./public-transportation/',
  'san-francisco/passenger-count.csv') 
```

# django - django 模板：扩展模板是否能够更改父页面中的 css？

> ID：14781281
> 
> 赞同：6
> 
> 时间：2013-02-08T21:01:02.467
> 
> 标签：django, templates, extend

我有两个 django 模板页面，其中之一是“base.html”，基本的 html 标签设置为基本模板。现在我有一个扩展它的页面“child.html”，里面有类似`{% extends "base.html" %}`的东西。现在我必须更改`<body>`这个特定页面的背景颜色，所以在“child.html”的 css 中我写道：

```
body {
    background-color: #000000;
    /* some other css here */
} 
```

但身体似乎对任何变化都没有反应。我想我一定错过了什么。请帮忙，谢谢。

**编辑：** 在“child.html”中，我只是有

```
<link rel="stylesheet" type="text/css" href="/site-media/css/template_conf.css"/> 
```

我尝试在 中更改 body css `template_conf.css`，并且没有其他页面包含`template_conf.css`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-08T21:14:55.427

在主模板中：

```
<body class="{% block body_class %}{% endblock %}">
...
</body> 
```

然后在子模板中，只定义块：

```
{% block body_class %} my_new_body_css_class {% endblock %} 
```

这将呈现一个`<body class="my_new_body_css_class">...</body>`并且您必须在链接的 CSS 中定义此类。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-09T11:14:14.647

为此，在头部的 base.html 中添加一个块，允许您在 base.html 中的那个之后插入另一个 css

```
<head>

    .... other head tags ....

    <link rel="stylesheet" type="text/css" href="/site-media/css/template_conf.css"/>
    {% block extra_css %}{% endblock %}
</head> 
```

这允许您通过在 child.html中`template_conf.css`添加另一个标签来覆盖 css 标签`<link>`

```
{% block extra_css %}
<link rel="stylesheet" type="text/css" href="/site-media/css/child_template.css"/>
{% endblock %} 
```

这允许您覆盖 base.html 中需要更改的部分，同时仍然能够调整 child.html 中所需的页面部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:17:04.420

如果您在 firebug 或其他浏览器调试器中看到新的 css 加载，请尝试：

```
body {
background-color: #000000 !important;
/* some other css here */ 
```

}

# regex - 如何使用正则表达式格式化逗号分隔的地图结构

> ID：14781289
> 
> 赞同：1
> 
> 时间：2013-02-08T21:02:00.690
> 
> 标签：regex, vim, notepad++, sublimetext2

使用文本编辑器，无需编写 JavaScript 函数（例如，不能使用这个很好的答案：[Replacing the nth instance of a regex match in Javascript](https://stackoverflow.com/questions/36183/replacing-the-nth-instance-of-a-regex-match-in-javascript)）

我该如何处理这样的事情（我无法控制的专有代码结构）

```
map(key1, value1, key2, value2, key3, value3, key4, value4 ...) 
```

并将其转换为

```
map(
  key1, value1,
  key2, value2,
  key3, value3,
  key4, value4 
  ...
) 
```

我发现的一个选项是使用这个正则表达式来查找每个第二个逗号 `(([^,]*,){2})`

然后替换为`\1\n\t`

但我想改进它：

**1\. 没有很好的处理第一行和最后一行**

```
 map(key1, value1,
    key2, value2,
    key3, value3,
    key4, value4 ...) 
```

**2\. 仅适用于平面结构**

例如，我想不出一种方法来改变它

```
map(key1, value1, key2, map(key3, value3, key4, value4 ...), key5, value5) 
```

对此

```
map(
  key1,value1,
  key2,map(
    key3,value3,
    key4,value4 
  ),
  key5,value5    
) 
```

使用正则表达式，还是有办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T01:36:29.643

Eran，哦，你终于用 标记了这个问题`vim`，太好了！^_^

vim可以格式化一下，我写了一个小函数：

**请注意，我用作`\r`换行符，如果它不适合您，请更改为`\n`**

```
function! ExpandMap()
    let s = line('.')
    exec 'silent s/(/(\r/g'
    let e = line('.')
    exec 'silent '.s.','.e.'s/),\=/\r&\r/g'
    let e = line('.')
    exec 'silent '.s.','.e.'s/,[^,]*\zs,\ze/,\r/g'
    let e = line('.')
    exec s.','.e.' normal =='
endfunction 
```

`.vimrc`如果你经常使用它，你可以把它放在你的文件中。您也可以通过键入来尝试一下`:so %`

您可以通过以下方式为该函数调用创建映射：

```
`nnoremap <leader>r :call ExpandMap()<cr>` 
```

这样，如果您想重新格式化您的`map`行，只需将光标移动到该行，并在`Normal`模式类型`<leader>r`（默认为 \）

这个功能会变

```
map(k1, v1, k2,  map(k3, v3, k4, v4), k5, v5, k6, map(k7, v7,k8,v8,k9,v9),k10,v10,k11,v11) 
```

进入

```
map(
        k1, v1,
        k2,  map(
            k3, v3,
            k4, v4
            ),
        k5, v5,
        k6, map(
            k7, v7,
            k8,v8,
            k9,v9
            ),
        k10,v10,
        k11,v11
) 
```

在这里，我展示了它是如何工作的：

*   我把窗口一分为二，只显示功能
*   我在函数之后创建了一个映射
*   我制作了两个嵌套地图，也是为了缩短线条，我刚刚使用过`k#`，`v#`

![在此处输入图像描述](../Images/d60645d19a4471330fe075b3384ac1e0.png)

现在，你什么时候卸载你的记事本++？^_^

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:21:01.080

一个非常基本的实现，在文本方向替换“向下”。

寻找：

```
([^(,)]+,[^(,)]+) 
```

代替：

```
\n\t\1 
```

请注意，这不起作用`...`（那是什么？），并且它不会对嵌套深度做任何花哨的事情。跟踪嵌套深度将需要一个具有超出正则表达式能力的解析器。[解析一种编程语言和解析 HTML](https://stackoverflow.com/a/1732454/697568)一样难。

# ios - 在 iTunes 之外发布 iOS 应用的成本

> ID：14781292
> 
> 赞同：0
> 
> 时间：2013-02-08T21:02:05.027
> 
> 标签：ios, itunes

如果我创建一个在应用商店发布的 ios 应用，我必须每年支付 99 美元。如果我不想在应用商店上发布它而只想从我的网站上分享它，是否需要为此支付任何类型的许可/注册费？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:05:22.343

如果您不通过 App Store 发布，您唯一的客户将是越狱者 - 为这些受众发布是免费的。

如果您认为您的应用程序一年的收入不足以支付 99 美元，您或许应该考虑另一种商业模式。

如果您担心应用内购买实物商品，请遵循 Till 的建议（引自下面的评论）：

> Apple 实际上不允许通过 iTunes 支付实物商品（如食品）——您必须为此类商品使用不同的支付方式（如信用卡）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:01:19.217

您应该研究的是一个网络应用程序。您可以通过多种方式定制网页，使其看起来像一个应用程序，然后当用户使用 iPhone 访问您的网站时，您可以做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T00:52:05.677

您所支付的本质上是 App Store 提供的分发平台，这非常不可思议。您还可以选择在应用程序购买和推送通知中集成 iCloud 等其他 Apple 功能。

如果您想在 App Store 之外分发应用程序并希望获得相同水平的曝光率，我猜您每年的花费将超过 99 美元。您可以通过 Ad Hoc 分发（仅限 100 台设备，实际上这只是为了测试）或企业分发（299 美元/年，没有 30% 的折扣或 App Store 分发）在您的网站上分发您的应用程序。

就分发而言，使用 App Store 的成本/收益确实对您有利。

# youtube-api - YouTube 播放位置和流量来源是如何确定的？

> ID：14781294
> 
> 赞同：0
> 
> 时间：2013-02-08T21:02:18.507
> 
> 标签：youtube-api

我希望 YouTube 上的某个人能对这个问题有所了解。我想知道使用哪些信息来确定播放位置和流量来源？这些仅仅是document.location.href和document.location.referer吗？或者是否使用了 HTTP 引用标头（可能因浏览器而异）？

问题的原因基本上是围绕搜索引擎优化，只是试图了解其中一些“归因”决策是如何做出的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:41:29.433

这里有更多信息：[https](https://developers.google.com/youtube/analytics/v1/dimsmets/dims#insightTrafficSourceDetail) ://developers.google.com/youtube/analytics/v1/dimsmets/dims#insightTrafficSourceDetail 。如果您在 Web 应用程序中嵌入视频并且没有看到正确反映的 EXT_URL，请使用此处描述的过程提交错误：[https ://youtube-eng.googleblog.com/2012/09/the-youtube-api- on-stack-overflow_14.html](https://youtube-eng.googleblog.com/2012/09/the-youtube-api-on-stack-overflow_14.html)。

# php - php和css中的随机背景

> ID：14781295
> 
> 赞同：0
> 
> 时间：2013-02-08T21:02:20.560
> 
> 标签：php, css, html, background

所以我试图让它做到这一点，它会选择 1.jpg 2.jpg 或 3.jpg。我的猜测是我做错了，但我没有收到 php 错误，我的 IDE 也没有告诉我我的 CSS 错误，所以我没有什么可做的。

代码：

HTML/CSS：

```
<html>
    <head>
        <link rel="stylesheet" href="css/styles.css" type="text/css" media="all">
        <script type="text/javascript" src="js/jquery-1.4.2.min.js" ></script>
        <?php
            include 'php/backgorundlogic.php';
        ?>
        <style>
            body {
                background:url($bgset);
                background-size:cover;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <input class="searchbar" type="text" />
        </div>
    </body>
</html> 
```

PHP：

```
<?php
    $rbg = mt_rand(1, 3);
    $ext = '.jpg';

    $bgset = 'img/' + $rbg + $ext;
?> 
```

演示：[在这里](http://orikina.com)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:05:51.563

利用 。而不是 +

```
<?php
    $rbg = mt_rand(1, 3);
    $ext = '.jpg';

    $bgset = 'img/' . $rbg . $ext;
?> 
```

并更改此行

```
 <style>
        body {
            background:url(<?php echo $bgset; ?>);
            background-size:cover;
        }
    </style> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:03:55.547

这一行：

```
background:url($bgset); 
```

应该是这样的：

```
background:url(<?php echo $bgset ?>); 
```

现在 PHP 引擎`$bgset`作为纯文本传递，因为它不在 PHP 脚本上下文中。您可能会考虑更加面向未来并且 HTML 转义该值：

```
background:url(<?php echo htmlspecialchars($bgset) ?>); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T00:40:44.827

```
 background: url('<?php $a = array(‘anyfile.jpg’,'anyotherfile.gif’, ‘somefile.png’); echo $a[array_rand($a)];?>'); 
```

或者如果您的图像名称符合末尾带有整数的内容，例如。云3.png

```
 background: url('/images/lm/clouds<?php echo rand(0,10)?>.png') ; 
```

# java - 每天、每周、每月和每年调用一个方法

> ID：14781296
> 
> 赞同：0
> 
> 时间：2013-02-08T21:02:34.837
> 
> 标签：java, timer, task, alarm

我需要在特定时间自动向我的客户发送报告，例如

*   每天上午 00:01
*   每周日 00:01 AM
*   每个月的第一天
*   每年的第一天

我每天都在这样做：

```
public void contextInitialized(ServletContextEvent arg0) {

        System.out.println("context initiallized");
        System.out.println("Starting timer");

        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.HOUR_OF_DAY, 0);
        calendar.set(Calendar.MINUTE, 1);
        calendar.set(Calendar.SECOND, 0);

        Date alarmTime = calendar.getTime();

        _timer = new Timer();
        _timer.schedule(new AlarmTask(), alarmTime);
    } 
```

这是我执行日常任务的课程：

```
public class AlarmTask extends TimerTask {

    public void run() {
        // Do your work here; it's 00:01 AM!         
    }
} 
```

它似乎工作正常 **但是** 当我在凌晨 00:01 之后的任何时间启动 tomcat 说在凌晨 02:30 时，任务在加载上下文后立即执行，我需要在第二天执行它......

他们对我的代码有任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:05:42.677

你为什么不使用 QuartzSchedular [http://quartz-scheduler.org/](http://quartz-scheduler.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:04:48.503

`Calendar`模拟完整日期，以便您在过去安排。`Timer`将通过立即执行来响应。在 上增加天数`Calendar`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:06:29.357

你看过[石英](http://www.quartz-scheduler.org/)吗？它可以帮助您安排任务！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T14:16:01.063

如果您在大型项目中执行此操作，我更喜欢您使用[Quartz Schedular](http://quartz-scheduler.org/)，因为它有一个用户界面来处理作业以及创建和编辑作业。如果它只是一个必须定期执行的小警报任务，请创建一个批处理文件并将其添加到[chron](http://www.cyberciti.biz/faq/how-do-i-add-jobs-to-cron-under-linux-or-unix-oses/)作业以在特定时间间隔运行。

希望这会有所帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T21:30:43.067

我想你必须按照 Marko Topolnik 上面所说的去做[https://stackoverflow.com/a/14781326/2040095](https://stackoverflow.com/a/14781326/2040095)

但此外，您是否还需要为 Timer 类调用方法“计划”的 3 个参数形式，因为您需要每天发送此报告，而不仅仅是一天？

所以像

```
_timer.schedule(new AlarmTask(), alarmTime, period ); 
```

对于每日报告，**期间**将是 24 小时。

# windows-8 - XAML 如何让 Canvas 的 Child 填满整个 Canvas？

> ID：14781300
> 
> 赞同：4
> 
> 时间：2013-02-08T21:02:57.873
> 
> 标签：windows-8, winrt-xaml

如果我有这个 XAML：

```
<Grid xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"> 
<StackPanel Orientation="Horizontal">
    <Grid Background="Gray" Margin="5"
        Height="200" Width="200">
        <Rectangle Fill="Blue" />
    </Grid>
    <Canvas Background="Gray" Margin="5"
        Height="200" Width="200">
        <Rectangle Fill="Blue" />
    </Canvas>
    <StackPanel Background="Gray" Margin="5"
        Height="200" Width="200">
        <Rectangle Fill="Blue" />
    </StackPanel>
</StackPanel> 
```

只有 Grid 被蓝色矩形填充，但我希望 Canvas 以相同的方式操作并用蓝色矩形填充？

我准备制作自定义画布，但不知道如何去做。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T22:52:54.687

你可以尝试这样的事情：

```
<Canvas x:Name="myCanvas" Background="Gray" Margin="5"
    Height="200" Width="200">
    <Rectangle Fill="Blue"
               Height="{Binding ElementName=myCanvas, Path=ActualHeight}"
               Width="{Binding ElementName=myCanvas, Path=ActualWidth}" />
</Canvas> 
```

这将告诉矩形从命名元素的实际尺寸中获取其尺寸。

只有 Grid 被填充的原因是因为它是唯一一个告诉它的孩子的大小。StackPanel 从所有子元素的组合大小中获取它的大小，而 Canvas 是您告诉它的大小，但不会调整任何子元素的大小。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T23:00:22.437

由于 Canvas 不遵守 Horizo [​​ntalAlignment](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.horizontalalignment%28v=vs.95%29.aspx)和[VerticalAlignment](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.verticalalignment%28v=vs.95%29.aspx)，因此您必须明确设置嵌套元素的大小。

一种选择是元素绑定：

```
<Canvas x:Name="theCanvas" Background="Gray" Margin="5" Height="200" Width="200" >
     <Rectangle Fill="Blue" 
                Height="{Binding ElementName=theCanvas, Path=Height}" 
                Width="{Binding ElementName=theCanvas, Path=Width}"  />
</Canvas> 
```

这有点脆弱，因为它依赖于父元素名称（此处`myCanvas`）。在 WPF 中，您可以使用[RelativeSource](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.relativesource%28v=vs.110%29.aspx) FindAncestor 来解决此问题，但在 Silverlight 或 Windows 8 中则不行。

您可以找到许多解决方法/扩展来填补 FindAncestor 空白 -[就像这个](http://blog.thekieners.com/2010/09/08/relativesource-binding-with-findancestor-mode-in-silverlight/)- 这样可能是一个更可重用的选项？

您也可以在转换器中执行某些操作，遍历可视化树以获取画布尺寸。

# ssl - ClassCastException 试图在 IBM WebSphere 中导入 SSL 证书

> ID：14781308
> 
> 赞同：0
> 
> 时间：2013-02-08T21:03:21.410
> 
> 标签：ssl, websphere, ssl-certificate

我正在尝试在[http://www-01.ibm.com/support/docview.wss?uid=swg21592616](http://www-01.ibm.com/support/docview.wss?uid=swg21592616)中提到的 WAS 生产环境中导入 SSL 证书，但是在最后一步之前（单击确定添加列表中的新证书），我收到下一个错误：

> java.lang.ClassCastException：com.ibm.websphere.models.config.security.impl.SecurityImpl 与 com.ibm.ws.console.security.SignerCerts.SignerCertsController.setupCollectionForm 上的 javax.management.AttributeList 不兼容（SignerCertsController.java:156 ) 在 org.apache.struts.tiles.TilesRequestProcessor.processTilesDefinition(TilesRequestProcessor.java:242) 在 org.apache.struts 的 com.ibm.ws.console.core.action.BaseController.perform(BaseController.java:401)。 org.apache.struts.action.RequestProcessor.process(RequestProcessor.java: com.ibm.isclite.container.controller.InformationController.processForwardConfig(InformationController.java:207) 279) 在 org.apache.struts.action.ActionServlet.process(ActionServlet.java:1486) 在 org.apache。struts.action.ActionServlet.doPost(ActionServlet.java:528) at javax.servlet.http.HttpServlet.service(HttpServlet.java:738) at javax.servlet.http.HttpServlet.service(HttpServlet.java:831) at com .ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1443) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1384) 在 com.ibm.ws.webcontainer.filter .WebAppFilterChain.doFilter(WebAppFilterChain.java:104) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77) 在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java :852) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443) 在 com.ibm 的 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:785)。 ws。webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175) 在 com.ibm.ws.webcontainer.webapp.WebAppRequestDispatcher.forward(WebAppRequestDispatcher.java:325) 在 org.apache.struts.action.RequestProcessor.doForward(RequestProcessor. java:1070) 在 org.apache.struts.tiles.TilesRequestProcessor.doForward(TilesRequestProcessor.java:273) 在 org.apache.struts.action.RequestProcessor.processForwardConfig(RequestProcessor.java:455) 在 org.apache.struts.tiles .TilesRequestProcessor.processForwardConfig(TilesRequestProcessor.java:319) 在 com.ibm.isclite.container.controller.InformationController.processForwardConfig(InformationController.java:207) 在 org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:279) ) 在 org.apache.struts.action.ActionServlet.process(ActionServlet.java:1486) 在 org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:528) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:738) 在 javax.servlet.http.HttpServlet.service(HttpServlet .java:831) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1443) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1384) 在 com。 ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131) 在 com.ibm.ws.console.core.servlet.WSCUrlFilter.setUpCommandAssistence(WSCUrlFilter.java:927) 在 com.ibm.ws.console。 core.servlet.WSCUrlFilter.continueStoringTaskState(WSCUrlFilter.java:494) 在 com.ibm.ws.console.core.servlet.WSCUrlFilter.doFilter(WSCUrlFilter.java:315) 在 com.ibm.ws.webcontainer.filter.FilterInstanceWrapper。doFilter(FilterInstanceWrapper.java:188) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116) 在 com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)在 com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:852) 在 com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:785) 在 com.ibm.ws.webcontainer .servlet.ServletWrapper.handleRequest(ServletWrapper.java:443) 在 com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175) 在 com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp .java:3610) 在 com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:274) 在 com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:926) 在 com。ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557) 在 com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173) 在 com.ibm.ws.http.channel.inbound。 impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455) 在 com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384) 在 com.ibm.ws.http.channel.inbound。 impl.HttpInboundLink.ready(HttpInboundLink.java:272) 在 com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1016) 在 com.ibm.ws.ssl.channel.impl.SSLConnectionLink$ MyReadCompletedCallback.complete(SSLConnectionLink.java:639) 在 com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1772) 在 com.ibm.ws.tcp.channel.impl。AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165) 在 com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217) 在 com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161) 在 com .ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138) 在 com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202) 在 com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler .java:766) 在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)161）在com.ibm.io.async.AsyncFuture.completed（AsyncFuture.java:138）在com.ibm.io.async.ResultHandler.complete（ResultHandler.java:202）在com.ibm.io.async.ResultHandler .runEventProcessingLoop(ResultHandler.java:766) 在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)161）在com.ibm.io.async.AsyncFuture.completed（AsyncFuture.java:138）在com.ibm.io.async.ResultHandler.complete（ResultHandler.java:202）在com.ibm.io.async.ResultHandler .runEventProcessingLoop(ResultHandler.java:766) 在 com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896) 在 com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)

WAS 版本是 7.0.0.0。SSL 证书来自[https://web.sedeb2b.com/EdiwinWSPre/services/WSEmisionSoap](https://web.sedeb2b.com/EdiwinWSPre/services/WSEmisionSoap)

¿ 是否有其他方法可以在 WAS 中导入 SSL 证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:43:42.503

我建议考虑安装最新的修复包。7.0 版已于四年前发布，自那时以来已修复了大量错误：[http ://www-01.ibm.com/support/docview.wss?uid=swg27014463](http://www-01.ibm.com/support/docview.wss?uid=swg27014463)

# html - 浮动 div 块。一个 100% 高度的 div 旁边是两个 50% 高度的堆叠 div

> ID：14781309
> 
> 赞同：1
> 
> 时间：2013-02-08T21:03:30.503
> 
> 标签：html, css, css-float

我正在尝试创建一个像这样的模块网格：

![在此处输入图像描述](../Images/754dcebdb4ed05423f044348ab349d1e.png)

我有一个单一模块的样式，我有所有不同大小的盒子的类，我根据我想要的大小添加到每个盒子的 div 类中：（100%/50%/33%/25% 宽度和高度）。

我正在尝试堆叠您在上图左上角看到的盒子。我想我必须创建另一个或两个类来覆盖周围盒子的浮动，但我不知道该怎么做。这是我的代码：

[**这是一个简单的小提琴**](http://jsfiddle.net/hbyrD/)

[**这是当前代码**](http://jonathonmoore.com/mkt/index3.php)

**HTML：**

```
<div class="box width_25 container_150">
    <div class="header">Half Size Title</div>
    <div class="content">
        Top box
    </div>
</div>
<div class="box width_25 container_150">
    <div class="header">Half Size Title 2</div>
    <div class="content">
        Box right below
    </div>
</div>

<div class="box width_50 container_300">
    <div class="header">Total Mentions</div>
    <div class="content">
        Center div
    </div>
</div>

<div class="box width_25 container_300">
    <div class="header">Title</div>
    <div class="content">
        Right div
    </div>
</div> 
```

**CSS：**

```
/* Variable Widths */

.box {
    display:block;
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: border-box;
    box-sizing: border-box; 
    margin: 1%;

    background: #FFF;
    color: #333;
    border:1px solid #DDD;
    box-shadow:0px 0px 5px 1px #DDD;
}

.width_100 {
    display: inline-block;
    float: left;
    width: 98%;
}

.width_50 {
    display: inline-block;
    float: left;
    width: 48%;
}

.width_33 {
    display: inline-block;
    float: left;
    width: 31.33%;
}

.width_25 {
    display: inline-block;
    float: left;
    width: 23%;
}

.container_150 {
    height:130px; // not 150px to compensate for margins
}
.container_200 {
    height:200px;
}
.container_250 {
    height:250px;
}
.container_300 {
    height:300px;
}
.container_400 {
    height:400px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:11:51.930

您需要将堆叠的 div 包装在 div 中以实现该目的

```
<div style="width:30%;float:left">
    <div style="width:100%; background:blue; height:100px"></div>
    <div style="width:100%;  background:yellow; height:100px"></div>
</div>
<div style="width:70%; float:right;background:red; height:200px"></div> 
```

看看这个[小提琴](http://jsfiddle.net/cgGzT/)

# android - 内部 AlertDialog 调用 REST url，我如何等待使用进度对话框返回

> ID：14781315
> 
> 赞同：0
> 
> 时间：2013-02-08T21:04:05.123
> 
> 标签：android, android-asynctask, android-alertdialog, android-progressbar

我有一系列在 onclick 方法中以菊花链形式连接的 AlertDialogs。在最后一个我需要向 URL 发送调用并等待响应。一旦响应返回，我需要获取响应的消息并创建最后一个 AlertDialog。问题是这在 2.3 Android 中有效，但由于 REST http 调用在 UI 线程上运行，因此对 Android 4.0 的最新更改出错了。所以我想把它移到一个 AsyncTask 中。我通读了教程，但没有找到我的具体困境。这是我的代码：如何让 AlertDialog 等待响应，并在等待时显示 ProgressDialog 或 Spinner？我正在寻找一些优雅的东西，其中 AsyncTask 是一个通用调用，并且可以在其他情况下用于 REST 调用。

```
public void onClick(View view) {

    if(alert != null && alert.isShowing()) {
        break;
    }

    alert = new AlertDialog.Builder(this)
    .setTitle(getResources().getString(R.string.alertPingTitle1).toString())
    .setMessage(getResources().getString(R.string.alertPingMessage1).toString())
    .setPositiveButton(getResources().getString(R.string.alertPingPositive1).toString(),
    new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int which) {
            if (onClicked) {
                log.info("Preventing multiple clicks to Ping Node Id");
                return;
            }

            onClicked = true;
            String returnMessage = "";
            int iconId = 0;
            try {
                String url = String.format(getResources().getString(R.string.urlIdPing).toString(), getRestUrl(), getId() );

                // This is where the Rest call will happen in an AsyncTask
                AsyncRest rest = new AsyncRest( Preferences.this );
                rest.execute( new RestObject(type,null,null,true,false) );

            ..........................

                // This is the current state of the 2.3 code
                JSONObject sent = RestRequest.sendPost(RestHttp.createHttpClient(), url, null, true);
                if (sent != null && sent.getInt("response") == 200) {
                    returnMessage = "VALID REST call ";
                    iconId = android.R.drawable.ic_dialog_info;
                } else {
                    if (sent != null) {
                        returnMessage = "INVALID REST response " + "\n\n Response code: " + sent.getInt("response");
                    } else {
                        returnMessage = "INVALID REST call.";
                    }
                    iconId = android.R.drawable.ic_dialog_alert;
                }
            } catch(JSONException e) {
                returnMessage = "Errored in JSON payload.";
            }

            alert = new AlertDialog.Builder(SetPreferences.this)
            .setTitle(getResources().getString(R.string.alertPingTitle2).toString())
            .setMessage(returnMessage)
            .setIcon(iconId)
            .setPositiveButton(getResources().getString(R.string.alertOkay).toString(), 
            new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int which) {}
            }).show();

        }
    })
}).show();

onClicked = false;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:10:41.480

您并没有真正具体说明问题是什么，但我假设您不确定如何实现`AsyncTask`.

查看开发人员文档：http `AsyncTask`: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

有一个例子，你可以按照那里。基本上，您希望`doInBackground()`在 AsyncTask 中进行 REST 调用。然后，您在通话结束后需要对 UI 进行的任何更改都将进入`onPostExecute()`.

**编辑：**更多细节

```
 private class AsyncRest extends AsyncTask<String, Void, Void> {
  protected Void doInBackground(String... url) {
     // do your REST call here
     return null;
  }

  protected void onPostExecute(Void nothing) {
     // update your UI here
  }
 } 
```

要执行，请调用`new AsyncRest().execute(url);`

要获取后台任务的结果，请在执行后调用 get()。

```
AsyncRest rest = new AsyncRest( SetPreferences.this );
rest.execute( new RestObject(Constants.ROTypes.post,url,null,null,true,false) );
JSONObject sent = rest.get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:16:48.857

使用`AsyncTask`您的代码将如下所示：

在您的活动中...

```
public MyActivity extends Activity implements AsyncRestCallback {

    public void onClick(View view) {

        if(alert != null && alert.isShowing()) {
            break;
        }

        alert = new AlertDialog.Builder(this)
        .setTitle(getResources().getString(R.string.alertPingTitle1).toString())
        .setMessage(getResources().getString(R.string.alertPingMessage1).toString())
        .setPositiveButton(getResources().getString(R.string.alertPingPositive1).toString(),
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                if (onClicked) {
                    log.info("Preventing multiple clicks to Ping Node Id");
                    return;
                }

                onClicked = true;
                String returnMessage = "";
                int iconId = 0;
                String url = String.format(getResources().getString(R.string.urlIdPing).toString(), getRestUrl(), getId() );

                AsyncRest rest = new AsyncRest().execute( url );
            })
    }).show();

    onClicked = false;

    }

    @Override
    public void finished(String returnMessage) {

        alert = new AlertDialog.Builder(SetPreferences.this)
        .setTitle(getResources().getString(R.string.alertPingTitle2).toString())
        .setMessage(returnMessage)
        .setIcon(iconId)
        .setPositiveButton(getResources().getString(R.string.alertOkay).toString(), 
        new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {}
        }).show();
    }
} 
```

休息异步

```
public class AsyncRest extends AsyncTask<String, Integer, String> {

    private AsyncRestCallback callback;

    public AsyncRest(AsyncRestCallback callback) {

        this.callback = callback;
    }

    @Override
    protected String doInBackground(String... params) {

        String returnMessage = "";
        String url = params[0]

        try {

            JSONObject sent = RestRequest.sendPost(RestHttp.createHttpClient(), url, null, true);
            if (sent != null && sent.getInt("response") == 200) {
                returnMessage = "VALID REST call ";
                iconId = android.R.drawable.ic_dialog_info;
            } 
            else {
                if (sent != null) {
                    returnMessage = "INVALID REST response " + "\n\n Response code: " + sent.getInt("response");
                } 
                else {
                    returnMessage = "INVALID REST call.";
                }
                iconId = android.R.drawable.ic_dialog_alert;
            }
        } catch(JSONException e) {
            returnMessage = "Errored in JSON payload.";
        }

        return returnMessage;
    }

    @Override
    protected void onPostExecute(String returnMessage) {

        callback.finished(returnMessage);
    }

    public interface AsyncRestCallback {

        public void finished(String returnMessage);
    }
} 
```

# c# - 在 WPF 应用程序中切换页面 - 无法转到一页

> ID：14781316
> 
> 赞同：0
> 
> 时间：2013-02-08T21:04:06.510
> 
> 标签：c#, wpf, user-controls

我在 WPF 应用程序中制作了切换页面。

```
public static class Switcher
    {
        public static MainWindow pageSwitcher;

        public static void Switch(UserControl newPage)
        {
            pageSwitcher.Navigate(newPage);
        }
    } 
```

一切正常，我可以在页面之间移动，但我不能转到一页（问题页），只能在一页（添加）。在其他页面我没有任何问题去这个页面。

在添加类中：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            Switcher.Switch(new Question());

        } 
```

我收到一个错误：

> 参数 1：无法从 'Application.Question' 转换为 'System.Windows.Controls.UserControl' 'Application.Switcher.Switch(System.Windows.Controls.UserControl)' 有一些无效参数

从任何其他页面我可以毫无问题地进入问题页面。从添加页面我可以转到任何其他页面，而不仅仅是问题页面。

问题类：

```
namespace Application.Pages
{

public partial class Question : UserControl
{
    public Question()
    {
        InitializeComponent();
    }

    private void Add_pyt_Click(object sender, RoutedEventArgs e)
    {
        Switcher.Switch(new Add());
    }

    private void page1_Click(object sender, RoutedEventArgs e)
    {
        Switcher.Switch(new Page1());
    }
  }
} 
```

还有我的 Page1 课程，当问题页面运行良好时。

```
public partial class Page1 : UserControl
    {
        public Page1()
        {
            InitializeComponent();

        }

        private void bt_Add_Click(object sender, RoutedEventArgs e)
        {

            Switcher.Switch(new Question());
        }
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:08:00.513

这很可能是因为您的`Question`课程实际上不是`UserControl`. 在另一个示例中，您明确传递了一个`UserControl`.

```
public static void Switch(UserControl newPage)
{
     pageSwitcher.Navigate(newPage);
} 
```

验证`Question`该类继承自`UserControl`.

```
public class Question : UserControl
{ ... } 
```

如果您实际上是继承自`UserControl`，请尝试适当地转换它。

```
Switcher.Switch((UserControl)new Question()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:23:17.240

我解决了。我更改了页面名称，现在可以使用了。可能我有同名的财产，这阻止了它。

# emacs - Emacs相同的键盘映射不同的命令

> ID：14781325
> 
> 赞同：2
> 
> 时间：2013-02-08T21:04:47.817
> 
> 标签：emacs, lisp

我想知道是否有办法说地图

sY 到两个不同的命令。

我在想我想让 sY 在一个较低的拆分窗口中调出终端，然后调出 bash，然后将焦点切换到新窗口，这样

```
(defun bash-window ()
  (interactive)  
  (split-window-below)
  (other-window 1)
  (shell)
  ) 
```

然后用相同的命令终止shell进程并取消拆分下部窗口有没有办法用lisp做到这一点，它似乎lisp在emacs lisp编程中没有保持状态......除非我对此不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:16:06.213

为什么不写一个新的函数来做这两个，然后绑定呢？

Emacs Lisp（以及一般的大多数 Lisp）*确实*有状态，你只需要知道在哪里寻找它。（这是 CLisp 与纯函数式最大的不同。）

例如，

```
(setq bash-window-active nil)

(defun bash-window nil
    (interactive)
    (if bash-window-active
        (function-to-reverse-those-performed-below)
      (progn
        (split-window-below)
        (other-window 1)
        (shell)
        (setq bash-window-active t)))

(global-set-key "\C-cb" 'bash-window) 
```

# python - python ssh脚本错误

> ID：14781331
> 
> 赞同：1
> 
> 时间：2013-02-08T21:05:09.073
> 
> 标签：python, ssh, ssh-keys

只是一点背景知识，我正在编写一个脚本来 ssh 到几个远程服务器并将我的公钥复制到它们。我开始编写一个 custon ssh 客户端，因为我无法安装任何外部 python 模块。长话短说，我工作的公司说，如果它不是标准 python 库的一部分，你就不能使用它。

经过数周的搜索，我找到了一个我认为是我所有祈祷的答案的脚本。我已经对其进行了修改以满足我的需要，但我遇到了一个未找到变量的错误，我需要一些指导来解决这个问题。

这是脚本：

```
#!/usr/bin/python

import pty, re, os, sys, stat, socket
from getpass import getpass

class ssherror(Exception):
    def __init__(self, value):
        self.value = value
    def __str__(self):
        return repr(self.value)

class sshclient:
    def __init__(self, ip, passwd, user, port):
        self.ip = ip
        self.passwd = passwd
        self.user = user
        self.port = port

    def runcmd(self, c):
        (pid, f) = pyt.fork()
        if pid == 0:
            os.execlp("ssh", "ssh", '-p %d' % self.port, self.user + '@' + self.ip, c)
        else:
        return (pid, f)

    def pushfile(self, src, dst):
        (pid, f) = pty.fork()
        if pid == 0:
            os.execlp("scp", "scp", '-P %d' % self.port, src, self.user + '@' + self.ip + ':' + dst)
        else:
            return (pid, f)

    def pushdir(self, src, dst):
        (pid, f) = pty.fork()
        if pid == 0:
            os.execlp("scp", "scp", '-P %d' % self.port, "-r", src, self.user + '@' + self.ip + ':' + dst)
        else:
            return (pid, f)

    def _read(self, f):
        x = ''
        try:
            x = os.read(f, 1024)
        except Exception, e:
            pass
        return x

    def connect(self, pid, f):
        output = ''
        got = self._read(f)
        m = re.search('authenticity of host', got)
        if m:
            os.write(f, 'yes\n')
            while True:
                got = self._read(f)
                m = re.search('Permanently added', got)
                if m:
                    break

            got = self._read(f)
        m = re.search('assword:', got)
        if m:
            os.write(f, self.passwd + '\n')
            tmp = self._read(f)
            tmp += self._read(f)
            m = re.search('Permission denied', tmp)
            if m:
                raise Exception('Invalid passwd')
            got = tmp
        while got and len(got) > 0:
            output += got
            got = self._read(f)
        os.waitpid(pid, 0)
        os.close(f)
        return output

    def cmd(self, c):
        (pid, f) = self.runcmd(c)
        return self.connect(pid, f)

    def push(self, src, dst):
        s = os.stat(src)
        if stat.S_ISDIR(s[stat.ST_MODE]):
            (pid, f) = self.pushdir(src, dst)
        else:
            (pid, f) = self.pushfile(src, dst)
        return self.connect(pid, f)

def sshconnect(ip, passwd, user, port=22):
    s = sshclient(ip, passwd, user, port)
    return s.connect(pid, f)

def sshpush(ip, passwd, src, dst, user, port=22):
    s = sshclient(ip, passwd, user, port)
    return s.push(src, dst)

passwd = getpass()
src = '/path/to/dir/being/copied'
dst = '/path/to/destination/directory'
user = os.getlogin()
port = portnum
hosts = ['host1', 'host2', 'host3']
for host in hosts:
    try:
        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    except socket.error, msg:
        print 'Failed to create socket. Error code: ' + str(msg[0]) + ' , Error message : ' + msg[1]
        sys.exit()

    print 'Socket Created'
    try:
        ip = socket.gethostbyname(host)
    except socket.gaierror:
        print 'Hostname could not be resolved. Exiting...'
        sys.exit()

    print 'Ip address of ' + host + ' is ' + ip
    sshconnect(ip, passwd, user, port)
    sshpush(ip, passwd, src, dst, user, port=22)
    print 'ssh directory copied to ' + host 
```

我已经对其进行了很多更改，但仍然出现以下错误：

```
Traceback (most recent call last):
  File "ssh.py", line 129, in <module>
    sshconnect(ip, passwd, user, port)
  File "ssh.py", line 99, in sshconnect
    return s.connect(pid, f)
NameError: global name 'pid' is not defined 
```

我知道我需要定义 pid，但我在最好的方法上画了一个空白。任何帮助、建议、Advil 将不胜感激！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:12:59.943

线上错别字：

20：（`(pid, f) = pyt.fork()`应该是pty）

24：之后没有`else:`

93：`pid`并且`f`没有在这个函数范围内定义 -> 这是你的问题。

106：`portnum`在这个范围内未知

它们是否允许您使用[适当的](http://www.aptana.com/products/studio3)IDE 进行代码验证？切换到它。否则，如果您喜欢准系统 vi，请使用静态源[检查器](http://www.doughellmann.com/articles/pythonmagazine/completely-different/2008-03-linters/index.html)。

查看 Paul Mikesell 的代码片段，我认为您不需要`sshconnect`第 91 行的函数。只需`sshclient.push`像在下一个函数 ( `sshpush`) 中所做的那样调用它，它就会自行连接。

# php - 使用 Url 在 codeigniter 中上传文件类

> ID：14781344
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:05:53.640
> 
> 标签：php, codeigniter, curl, upload

有一种方法可以让我使用 codeigniter 中的 File Uploading Class 上传图像？？？

我使用这个例子并且工作[https://www.codeigniter.com/user_guide/libraries/file_uploading.html](https://www.codeigniter.com/user_guide/libraries/file_uploading.html)

但是想要在文本字段中使用 url`<input type="file" name="userfile"/>`

抱歉，英语不是我的母语 使用 url 上传图片，例如使用 curl 但使用 File Uploading Class

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:08:04.493

不，如果用户通过表单上传文件，则为文件上传类。

您需要从文本字段中获取 URL，然后使用[cURL](http://jp2.php.net/manual/en/book.curl.php)之类的内容来获取内容并将它们写入服务器上的文件。

# perl - bash 的“DIE”信号处理程序

> ID：14781345
> 
> 赞同：1
> 
> 时间：2013-02-08T21:05:54.933
> 
> 标签：perl, bash, error-handling

`$SIG{__DIE__}`在 Perl 中，如果程序因错误退出，您可以编写一个处理程序来执行代码。bash 是否提供类似的功能？

这是我正在尝试做的事情：我有一个 bash 脚本，它创建一个新目录并调用几个命令，这些命令又用数据文件填充新目录。我正在使用`set -e`，以便如果任何命令失败，脚本将立即终止。如果发生故障，我希望脚本删除它创建的目录。如果脚本成功完成，那么新的输出当然应该保留。

bash 是否提供了一个 DIE 信号处理程序，或任何可以让我这样做的类似功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T21:08:07.690

由于您使用的是`set -e`，您可以安装一个`ERR`处理程序：

```
trap errfunc ERR 
```

`errfunc`如果任何命令以非零退出代码退出，将被调用（并且因为您正在使用`set -e`，这将终止脚本）。

您也可以通过这种方式传递参数：

```
trap 'errfunc $LINENO' ERR 
```

由于陷阱命令`eval`在错误点是 'd，因此该陷阱会将失败命令的行号传递给`errfunc`.

# r - ctree 在 R 中的派对包中绘制决策树，终端节点出现一些奇怪的数字 - 问题？

> ID：14781349
> 
> 赞同：2
> 
> 时间：2013-02-08T21:06:18.343
> 
> 标签：r, plot, modeling, decision-tree

我遇到了一些非常奇怪的东西..我不知道为什么..

我在下面使用相同的代码：

```
library(party)
r_tree <- ctree(readingSkills$nativeSpeaker ~ readingSkills$age + 
                 readingSkills$shoeSize + readingSkills$shoeSize + 
                 readingSkills$score,data = readingSkills)
plot(r_tree,type = "simple")
r_tree 
```

两周前我得到了正常的图表..但是今天我的终端节点中有一些奇数，如下图所示..我试图重新启动我的电脑，卸载数据包，一次又一次地重新安装，但它仍然无法正常工作.. ![在此处输入图像描述](../Images/470b97f4521c6fe1a4cef2e4ccdd417d.png) 只是想知道是否有人看到同样的问题，或者我做错了什么，或者我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T09:22:27.357

这是由包“partykit”引起的错误。如果您要从头重新打开 R 或执行以下操作：

`detach("package:partykit", unload=TRUE)`并运行

```
library(party)
r_tree <- ctree(readingSkills$nativeSpeaker ~ readingSkills$age + 
                  readingSkills$shoeSize + readingSkills$shoeSize + 
                  readingSkills$score,data = readingSkills)
plot(r_tree,type = "simple") 
```

你会得到正常的情节 ![在此处输入图像描述](../Images/8835643dd127f9d72e9b49f5fe6a06f7.png)

但是，如果您再次库“partykit”包并重新运行相同的代码，您将再次得到那个无意义的情节

```
library(partykit)
r_tree <- ctree(readingSkills$nativeSpeaker ~ readingSkills$age + 
                  readingSkills$shoeSize + readingSkills$shoeSize + 
                  readingSkills$score,data = readingSkills)
plot(r_tree,type = "simple") 
```

![在此处输入图像描述](../Images/3d51c4d1ea1c236c8e4b818387029853.png)

# mysql - 浮点数和子查询

> ID：14781353
> 
> 赞同：0
> 
> 时间：2013-02-08T21:06:41.433
> 
> 标签：mysql, sql

我有疑问：

```
SELECT 
    DISTINCT `g`.`id` , 
    `g`.`steam_id` , 
    `g`.`type` , 
    `g`.`title` ,
    `g`.`price` , 
    `g`.`metascore` , 
    `g`.`image` ,
    (
        SELECT `id`
        FROM `game_promotions`
        WHERE `game_promotions`.`game_id` = `g`.`id`
    ) AS `promotion_id`,
    (

        SELECT `price`
        FROM `game_promotions`
        WHERE `game_promotions`.`game_id` = `g`.`id`
    ) AS `promotion_price`, 
    (
        SELECT COUNT( `id` )
        FROM `bot_games`
        WHERE `game_id` = `g`.`id`
        AND `buyer` IS NULL
    ) AS `copies`
FROM 
    `games` AS `g` , 
    `game_genres` AS `gg`
WHERE
    `gg`.`game_id` = `g`.`id`
    AND `g`.`title` LIKE "Counter%"
GROUP BY `promotion_id`
LIMIT 0 , 30 
```

问题是不好退货`promotion_price`。在`game_promotions`表中，`price`是“24.99”，但在查询结果`promotion_price`中是“14.9899997711182”。返回的促销ID是好的。只有浮动价格无效。为什么这个数字变了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:16:15.147

好的，我不确定这是否正是您想要的，但我在下面发布了我修改后的查询。首先，我摆脱了隐式连接并用显式的`INNER JOIN`. 我还用 `LEFT JOIN`s 移动了您的子查询以获得更好的性能。我删除了`DISTINCT`和 ，`GROUP BY`因为我真的不明白你为什么需要它们。

```
SELECT 
    `g`.`id` , 
    `g`.`steam_id` , 
    `g`.`type` , 
    `g`.`title` ,
    `g`.`price` , 
    `g`.`metascore` , 
    `g`.`image`,
    `gp`.`id` AS `promotion_id`,
    `gp`.`price` AS `promotion_price`, 
    `bg`.`copies`
FROM 
    `games` AS `g`
INNER JOIN `game_genres` AS `gg`
    ON `gg`.`game_id` = `g`.`id`
LEFT JOIN `game_promotions` as `gp`
    ON `g`.`id` = `gp`.`game_id`
LEFT JOIN ( SELECT `game_id`, COUNT(`id`) `copies`
            FROM `bot_games`
            WHERE `buyer` IS NULL
            GROUP BY `game_id`) `bg`
    ON `bg`.`game_id` = `g`.`id`
WHERE `g`.`title` LIKE "Counter%"
LIMIT 0 , 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:32:53.347

你的意思是结果是24.9899997711182？这在单精度浮点误差范围内。

您会得到预期的结果，只需将其四舍五入到小数点后两位即可显示。

# java - 从模型访问 playframework 2.1 中的配置

> ID：14781361
> 
> 赞同：2
> 
> 时间：2013-02-08T21:07:02.147
> 
> 标签：java, playframework-2.1

我正在尝试使用以下方法访问我的 application.conf 文件中的值：

```
Play.configuration.getString("value"); 
```

我得到错误：

```
error: package Play does not exist 
```

我需要导入什么才能访问 conf 文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T21:23:14.390

这种语法看起来像 Scala Api。对于 Java，您应该使用此方法：

```
play.Play.application().configuration().getString("value");

// or
import play.Play;
Play.application().configuration().getString("value"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-24T01:42:21.643

或者你可以做

```
import com.typesafe.config.ConfigFactory;
ConfigFactory.load().getString("value"); 
```

对于类型安全

# c# - 如果不使用 using 语句，IDisposable 内存会泄漏吗？

> ID：14781365
> 
> 赞同：3
> 
> 时间：2013-02-08T21:07:22.627
> 
> 标签：c#, idisposable

如果不使用 using 语句，IDisposable 内存会泄漏吗？
如果是这样，如果代码不多，有人可以提供内存泄漏示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T21:41:56.647

一个正确编写的程序，它创建了一个实现 的类型的实例`IDisposable`，并且没有*明确知道*在被放弃时能够充分清理自身，*必须*确保`Dispose`在放弃它之前在该实例上调用它。任何程序如果不能调用`Dispose`一个没有它就可以正常工作的类型，就会被*破坏*。

虽然如果自动完成可以处理所有事情会很好，但它是一个非常糟糕的清理机制。它不提供关于排序、线程上下文、及时性或完成确定性的保证（使用确定性清理时，可以合理地确定如果清理失败，程序不会正常完成；使用终结时，程序可能似乎正常完成，甚至没有尝试清理对象）。

Microsoft 可能曾经打算让每个`IDisposable`类在被放弃后都能够充分清理，但这根本不切实际。在许多情况下，如果一个类在被放弃后尝试自行清理会增加大量复杂性，并且只会将一个存在明显问题且易于追踪的损坏程序转变为通常可以工作的损坏程序除非终结器线程相对于其他线程的计时导致事情以某种意外和不可重现的方式失败。

尽管实施了某些类型，但`IDisposable`可以无条件安全地放弃，还有一些在某些情况下可以安全地放弃。在处理它们很困难的情况下放弃这些类型是很好的（例如，因为引用由多个对象持有，这些对象由各种线程操作，并且当任何特定对象持有最后一个幸存者时，没有好的方法可以知道它参考），前提是一个人记录了一个人相信这种行动是安全和适当的理由。`IDisposable`然而，这种行为在一个人接受了未知血统的对象的情况下是不合适的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:09:51.257

不，它不会泄漏。最终垃圾收集将绕过处理对象。

`IDisposable`允许调用者提前释放资源。

**更新**

正如@Servy 和@Brian Rasmussen 所说。实现的类也`IDisposable`应该实现终结器。这是推荐的做法。见[http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/b1yfkh5e(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T21:37:56.350

首先，请注意*IDisposable 通常与外部非托管资源¹*相关- 例如文件、连接 - 以及此类资源的泄漏；GC 仍将根据可达性正确处理此类使用的 CLR 对象和内存。

IDisposable 定义了一个契约，并表示在添加到类型或从类型中删除时的重大更改。*任何未能履行本合同的行为都可能导致“未明确定义的行为”。*该`using`构造是一种工具，可以避免处理调用 Dispose 和带有异常的边缘情况的细节，但它不是合同的一部分，也不是必需的。然而，合同保持不变，*任何违反合同的行为都将消除上述 IDisposable 的“正常工作”的所有责任。*

*   一些实现 IDisposable 的类型永远不会泄漏资源；他们可能不会处理任何外部资源。
*   一些实现 IDisposable 的类型不遵循也实现终结器的“最佳实践”；如果不调用 Dispose，它们*将泄漏外部资源。*
*   某些类型，例如那些也实现终结器模式的类型，可能只会在某些 GC 情况下泄漏外部资源。也就是说，*终结器可能不会很快被调用。*这种情况在低负载情况下可能太慢而不会成为问题，但在高负载情况下会导致意外故障。
*   某些类型可能会导致*行为不明确和状态不一致的情况*。

*不要违反合同。*

* * *

¹ IDisposable 类型还*可以*更改 Dispose 中不使用非托管资源的某些状态：如果违反合同，这仍然包含在“未明确定义的行为”中。我使用 IDisposable 类型的一种情况是管理运行时可调用包装器 (RCW) 对象，即使它们在技术上是由运行时“管理”的。有关更多情况，请参阅 supercat 的评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T21:13:28.427

这一切都取决于你`IDisposable`是什么。

该`IDisposable`模式基本上是一种确定性释放托管（和非托管）资源的方法，而不是等到该对象的终结器运行。例如，如果您打开数据库连接、文件句柄等，您当然希望“按需”释放或清理这些资源，因此它们不会阻止您在其他地方重新获取对它们的访问权限。这是该`Dispose`模式的主要用例。

那么，它会泄漏内存吗？同样，这取决于 - 如果您使用`IObervable<T>`订阅，很可能，因为从某种意义上说，它们是未发布的事件处理程序（我在这里大大简化了）。如果不关闭它会导致内存泄漏`SqlConnection`吗？不是按照“内存泄漏”的最严格定义，因为连接最终会关闭（例如，当您的应用程序终止时，或者连接对象最终被收集和完成时），但我想我可以这样总结所有这些：

**“总是丢弃你的 IDisposables”**

编辑：@Servy 是绝对正确的——在我的`SqlConnection`例子中，我相信终结器会自动关闭连接，但这不是`IDisposables`一般的保证行为——所以总是处置！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T21:17:06.167

`using`声明只是语法糖

```
 using(var resource = expression) statement 
```

翻译喜欢的东西

```
{
   var resource = expression;
   try {
      statement;
   }
   finally {
      [if(resource!=null)]((IDisposable)resource).Dispose();
   }
} 
```

如果 dispose 模式正确实施，则不会发生内存泄漏。`Finalizer`调用方法的 GC 调用（非确定性）`Dispose`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T21:11:07.260

`Using`语句将`Dispose`在块的末尾调用对象方法。

您可以使用以下示例获得相同的结果：

```
 obj a = new obj(); // Assuming obj : IDisposable
 try 
 {
    // Your code here
 }
 finally
 {
    if (a != null)
    { 
       a.Dispose();
    }
 } 
```

# jquery - 可以对同位素进行二次排序吗？

> ID：14781366
> 
> 赞同：1
> 
> 时间：2013-02-08T21:07:27.433
> 
> 标签：jquery, jquery-isotope

我已经把排序代码都弄清楚了，它按预期工作。我喜欢二级过滤器的选项。

我有一个类似的系列：

```
<div id="member1" class="sortItem" data-factor="2">
    <span class="name">Jobs</span>
</div>
<div id="member2" class="sortItem" data-factor="2">
    <span class="name">Wayne</span>
</div>
<div id="member3" class="sortItem" data-factor="3">
    <span class="name">Wozniak</span>
</div> 
```

因此，如果我对数据因子进行排序，我最终会得到（缩写）：

```
+-------------+-------------+
   NAME           FACTOR
+-------------+-------------+
Wozniak         3
Wayne           2
Jobs            2 
```

但我想要的是二级排序总是按字母顺序排列，如：

```
+-------------+-------------+
   NAME           FACTOR
+-------------+-------------+
Wozniak         3
Jobs            2
Wayne           2 
```

和数据因子的反向排序（再次单击排序按钮）：

```
+-------------+-------------+
   NAME           FACTOR
+-------------+-------------+
Jobs            2
Wayne           2
Wozniak         3 
```

关于如何实现第二类的任何想法？

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T12:43:43.263

排序方法仅返回将按字母或数字排序的字符串或数字。

如果你想将两者结合起来，*最小的公分母是 string*。

剩下的唯一问题是如何使数字按字母顺序排序。您可以通过添加前导 0 来填充它们来做到这一点。根据收藏的大小，您可能需要 1、2 或 3 位数字。

## 例如

对于 3 位数字（最多 1000 个元素），您的排序键将变为：

```
003Wozniak
002Jobs
002Wayne 
```

这将按照您想要的方式进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T03:01:45.203

实际上，您可以按多种事物进行排序，请查看同位素网站上的 getSortData 示例...

```
getSortData: {
    sort1: function($elem) {
        return parseInt($elem.attr('data-category-sort1'), 10);
    },
    bywidth: function($elem) {
        return $elem.width();
    },
    byname: function($elem) {
        return $elem.find('.name').text();
    }
    // more...
} 
```

# asp.net - GridView boundfield 嵌套类

> ID：14781368
> 
> 赞同：3
> 
> 时间：2013-02-08T21:07:33.570
> 
> 标签：asp.net, .net, nested-class, boundfield, datafield

我正在本地主机上开发 ASP.NET 页面，然后将其上传到服务器上。在本地主机上，我成功地在 GridView 的 BoundField 的 DataField 属性中使用了嵌套类。嵌套类的意思是：绑定到 GridView 行的数据项的属性在`DataField="Object.property"`哪里。`Object`一切正常。但是当我在服务器上发布网站时，出现异常：

> 在所选数据源中找不到名为“Object.property”的字段或属性。

我试图找到解决方案并发现：[GridView bound with Properties of nested class](https://stackoverflow.com/questions/1130351/gridview-bound-with-with-properties-of-nested-class)

我继续寻找，但到处都提到在边界字段中使用嵌套类是不可能的。但它在本地主机上对我来说就像一个魅力。

有谁知道为什么？它是 .NET Framework 的最新版本（我在 localhost 上安装了 4.5 版，在服务器上安装了 4 版）还是什么？是的，很明显版本是原因，但我没有找到任何关于它的提及。

感谢您的澄清。Uiii

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T06:37:20.363

BoundField column show only immediate associated properties to instance

So there is only way that we have to use DataBinder.Eval in an ItemTemplate to access the nested class property.

Here's Code :

```
<asp:TemplateField>
<ItemTemplate>
    <%#DataBinder.Eval(Container.DataItem, "NestedClass.Name")%>
</ItemTemplate> 
```

# css - CSS3 页面卷曲效果问题

> ID：14781369
> 
> 赞同：1
> 
> 时间：2013-02-08T21:07:33.843
> 
> 标签：css, z-index

我目前正在开发一个使用 CSS3 的“页面提升”效果的网站（请参阅[此处的演示项目 2-4](http://www.paulund.co.uk/playground/demo/css_box_shadow/)），对于我的第一页，它运行良好。

但是，我现在尝试将其添加到具有背景颜色的元素（工作元素在元素内部具有`.lift`元素，这使得阴影位于堆叠上下文中的所有内容下方），但在非工作元素上， z-indexing 似乎有问题。它将走向一个极端（阴影位于背景顶部；`z-index:1`在`.lift`元素上）或另一个（阴影不仅位于它所在的元素`:after`下方，而且位于*该*元素的父元素下方；不在`z-index`元素上`.lift`）。

[这是我遇到的问题的演示，并附有一些注释。](http://jsfiddle.net/3eLAe/10/)阴影应该在白色盒子的下方，但在蓝色盒子的顶部。有没有办法解决这个问题，以便阴影位于正确的位置，而不会将背景移动到`.lift`元素的子元素（ren）或在元素周围添加无关的包装器`.lift`？

这是代码：

```
<div class="main">
    <div class="lift"></div>
</div>

.main {
    background: #00f;
    height: 151px;
    width: 400px;
}
.lift {
    position: relative;
    z-index: 1;
    margin-bottom: 10px;
    height: 150px;
    width: 200px;
    background: #fff;
}
.lift:after {
    content:'';
    position: absolute;
    z-index: -2;
    width: 75%;
    max-width: 300px;
    height: 15%;
    bottom: 24px;
    right: 10px;
    -webkit-box-shadow: 0 20px 10px rgba(0, 0, 0, 0.5);
    -moz-box-shadow: 0 20px 10px rgba(0, 0, 0, 0.5);
    box-shadow: 0 20px 10px rgba(0, 0, 0, 0.5);
    -webkit-transform: rotateZ(3deg) skewX(10deg);
    -moz-transform: rotateZ(3deg) skewX(10deg);
    -ms-transform: rotateZ(3deg) skewX(10deg);
    -o-transform: rotateZ(3deg) skewX(10deg);
    transform: rotateZ(3deg) skewX(10deg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T18:14:07.027

这是你的 #main .. 的 z-index 超过你的 .lift:after

```
.main {
    background-color: #00f;
    height: 300px;
    width: 400px;
    margin-bottom: 20px;
    padding:20px;
    position:relative;
    z-index:-3;
} 
```

我建议您不要对 z-index 使用负值。

继续

# mysql - 在 Mysql 数据库的 varchar 列中查找所有整数

> ID：14781370
> 
> 赞同：2
> 
> 时间：2013-02-08T21:07:34.787
> 
> 标签：mysql

这听起来很奇怪......但我需要一种方法来找出特定列中存储为整数的所有条目。

显然，过去有人在没有打开 MySQL 严格模式的情况下将此列从整数转换为 varchar，这显然导致一些条目保留为整数：

作品：

```
SELECT * FROM inv_array where serial = 187870123 
```

不工作：

```
SELECT * FROM inv_array where serial = '187870123' 
```

串行列配置为 varchar，所以上面应该可以工作，不是吗？MySQL 不应该将这些整数转换为 varchar 吗？我要疯了吗？

我需要在这个数据库中找到所有串行存储为整数的条目，并将它们转换为 varchar。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:16:19.167

我想你的数据有问题。假设数据存储为`VARCHAR`，那么上述在您的第一个查询中而不是在您的第二个查询中起作用的原因是因为 MySQL 尝试将`VARCHAR`字段中的数据转换为整数以与您的第一个查询进行比较。它将使用所有第一个非字母字符来比较整数。

这实际上会更容易向您展示。

这是一个[SQL Fiddle](http://sqlfiddle.com/#!2/c6c75/1)。

如果您的 VARCHAR 字段中有数据（例如换行符），则第一个查询有效，因为它匹配到换行符。同样，如果您的数据是 123XYZ 并且您将其与 123 进行比较，它将被返回。这是因为 MySQL 在按整数值搜索时会将 123XYZ 转换为 123。

```
CREATE TABLE inv_array  (id int, serial varchar(100));
INSERT INTO inv_array VALUES (1, '123XYZ
                                 ');
SELECT * FROM inv_array where serial = 123; #returns records
SELECT * FROM inv_array where serial = '123XYZ'; #does not return any records 
```

希望这可以帮助。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:23:45.600

很可能您在某些行中有一些空格。

您可以使用正则表达式找到这样的行，如下所示：

带前导空格的数字

```
select * from inv_array where serial REGEXP ' +[0-9]+' 
```

带有尾随空格的数字

```
select * from inv_array where serial REGEXP '[0-9]+ +' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:35:04.513

如果它们都是 VARCHAR 并且您想搜索 INT，则可以使用 CAST 来执行此操作，而无需对数据库进行任何重大更改。

VARCHAR 到 INT

```
SELECT * FROM inv_array WHERE CAST(SERIAL_VARCHAR AS UNSIGNED) = 187870124; 
```

INT 到 VARCHAR

```
SELECT * FROM inv_array_1 WHERE CAST(SERIAL_INT AS CHAR) = '187870124'; 
```

对于永久解决方案，我建议更新您的表格。

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/6a386/1)

如果您确实有前导零，那么您如何在选择查询中删除它们。 `SELECT trim(leading 0 FORM serial) FROM inv_array WHERE serial = 187870124`.

# javascript - 任何人都可以在 JS 中提出一个好的原型示例来帮助我理解原型是什么？

> ID：14781373
> 
> 赞同：-5
> 
> 时间：2013-02-08T21:07:41.590
> 
> 标签：javascript, jquery, prototype

我正在阅读原型，但我似乎无法理解它们的作用以及拥有它们的意义。任何人都可以创建一个简单的示例（例如，collegeStudent 对象）来帮助我理解原型的基本概念吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:19:04.130

假设您创建了一个名为`person`：

```
function person(name, age, gender) {
  this.name = name;
  this.age = age;
  this.gender = gender;
} 
```

现在假设您创建了一些新人：

```
var fred = new person("fred", 35, "male");
var mary = new person("mary", 24, "female");
var joe = new person("joe", 46, "male"); 
```

`person`目前拥有三个属性，`name,age, gender`.

使用原型，您可以向对象和所有先前实例化的对象添加新属性。

`person.prototype.hairColor = null;`<-- 如果将其设置为“棕色”，则所有先前实例化的对象都将具有值“棕色”。所以`fred.hairColor`会是棕色的。

**这样做的好处是您可以将所有先前实例化和未来的对象设置为默认值，而无需手动设置所有这些对象的属性。**

# android - Android：在特定 SD 卡上禁用 fsck_msdos

> ID：14781375
> 
> 赞同：1
> 
> 时间：2013-02-08T21:07:50.577
> 
> 标签：android, linux, fat32, fsck

使用运行 Android 4.0.4 的三星 Galaxy SIII（AT&T 版本）和三星定制的库存，我只是想安装一张 SD 卡（通过通过 OTG 适配器连接到 USB 主机端口的读卡器）。

不幸的是，这个设备似乎对文件系统的正确性“有太高的标准”——它拒绝安装卡，说`Unable to read FAT: Success`.

其他 Android 设备没有这个问题，可能运行的检查不那么广泛。

SIII 可以挂载全新的 SD 卡，但是即使在正常使用 10 类卡几天后，该卡也无法挂载在 SIII 中，尽管可以挂载在其他 Android 设备上，以及 Mac、Linux、和窗户。

就像您可以将`.nomedia`文件放在磁盘上以禁用 MediaScanner 一样`.nofsck`，我可以在卡上放置类似的东西来禁用或限制 fscking 吗？或者，非 root 应用程序可以做些什么来禁用或限制 fscking？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-09T17:52:58.577

这可能不是您想要的，但是...如果您将 OEM 字段名称设置为“EXFAT”，您可以获得 ~ 空白 SD 卡 :)) [https://android.googlesource.com/platform/external/fsck_msdos/+/refs /heads/kitkat 发布](https://android.googlesource.com/platform/external/fsck_msdos/+/refs/heads/kitkat-release)

# c# - 是什么触发了 UI 上的绑定？

> ID：14781381
> 
> 赞同：0
> 
> 时间：2013-02-08T21:08:02.830
> 
> 标签：c#, wpf, data-binding

我在 WPF 窗口中有一个文本框，我从后面的代码中填充（在用户从 OpenFileDialog.

尽管我的 TextBox.Text 绑定到我的 ViewModel 类中的 String 属性，但当文本设置到 TextBox.Text 时，该属性不会被填充。

如果我在 TextBox 中键入内容，则该属性会被填充，因此必须在用户输入期间触发某些事件或发生某些事情，而不是在我通过代码设置值时发生。

我缺少正确绑定的步骤是什么？

此外，属性上的 set 方法是在属性更改时调用，还是在 UI 上调用？或两者？如果更改 UI 调用 set 方法，该方法会触发 PropertyChanged 事件以更新 UI，那么是什么阻止了这种循环？

*（我知道我可以直接设置属性，但我觉得我对绑定缺乏了解，我希望这将有助于填补一些空白。）*

我的示例代码：

```
<Window x:Class="ConfigurationViewer.ViewerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ConfigurationViewer"
    Title="Configuration Viewer" Height="512" Width="714" >
    <Window.DataContext>
        <local:TaskViewModel x:Name="_model"/>
    </Window.DataContext>
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal">
            <TextBlock Text="Configuration file" Margin="2" VerticalAlignment="Center" />
            <TextBox Height="29" Margin="2" Name="textFilePath" Width="277" Text="{Binding Path=ConfigurationPath}" />
            <Button Content="Browse ..." Margin="2" Name="buttonBrowseFile" Width="98" Click="buttonBrowseFile_Click" />
            <Button Content="Open" Margin="2" Name="buttonOpenFile" Width="98" Click="buttonOpenFile_Click"  />
        </StackPanel>
    </DockPanel>
</Window> 
```

* * *

```
 public partial class ViewerWindow : Window
    {
        public ViewerWindow()
        {
            InitializeComponent();
        }

        private void buttonBrowseFile_Click(object sender, RoutedEventArgs e)
        {
            OpenFileDialog openDialog = new OpenFileDialog();
            openDialog.Multiselect = false;
            openDialog.InitialDirectory = textFilePath.Text;

            Nullable<Boolean> ok = openDialog.ShowDialog();
            if (ok == true)
            {
                textFilePath.Text = openDialog.FileName;
            }
        }

        private void buttonOpenFile_Click(object sender, RoutedEventArgs e)
        {
        }
    } 
```

* * *

```
 public class TaskViewModel : INotifyPropertyChanged
    {
        private String _configurationPath = String.Empty;
        public String ConfigurationPath
        {
            get { return _configurationPath; }
            set
            {
                _configurationPath = value;
                OnPropertyChanged("ConfigurationPath");
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        private void OnPropertyChanged(String prop)
        {
            PropertyChangedEventHandler handler = this.PropertyChanged;
            if (handler != null)
            {
                var e = new PropertyChangedEventArgs(prop);
                handler(this, e);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T21:38:50.153

`TextBox.Text`设置属性时 ViewModel 属性未更新的原因是Binding 的[UpdateSourceTrigger](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.updatesourcetrigger.aspx)属性设置为`LostFocus`。这是`TextBox.Text`属性绑定的默认值。

如果将其更改为`PropertyChanged`， ViewModel 属性将按预期更新：

```
<TextBox Text="{Binding ConfigurationPath, UpdateSourceTrigger=PropertyChanged}"/> 
```

* * *

当然，WPF 绑定系统会注意避免无限更新循环。

# c - 我不断收到此错误：二进制 ^ 的无效操作数（具有“双”和“双”）

> ID：14781384
> 
> 赞同：0
> 
> 时间：2013-02-08T21:08:33.890
> 
> 标签：c, binary, double, operands

每当我运行代码时，我的第 52 行和第 61 行都会不断给我相同的错误消息。

```
#include<stdio.h>
#include<math.h>

double getinput(void);
double calcwindchillold(double v, double t);
double calcwindchillnew(double v, double t);
void printResults(double windchillold, double windchillnew);

int main(void)
{
    double v = 0;
    double t = 0;
    double windchillold = 0;
    double windchillnew = 0;

    v = getinput();
    t = getinput();
    windchillold = calcwindchillold(v,t);
    windchillnew = calcwindchillnew(v,t);
    return 0;
}
double getinput(void)
{
    double v,t;
    printf("Input the wind speed in MPH: ");
    scanf("%lf", &v);
    printf("Input the temperature in degrees Fahrenheit: ");
    scanf("%lf", &t);

    return v,t;

}

double calcwindchillold(double v, double t)
{
    double windchillold;

    windchillold = ((0.3 * v^0.5) + 0.474 - (0.02 * v) * (t - 91.4) + 91.4);
// in the line above this is the error.

    return windchillold;
}

double calcwindchillnew(double v, double t)
{
    double windchillnew;

    windchillnew = 35.74 + 0.6215*t - 35.75*(v^0.16) + 0.4275 * t * v^0.16;
// in the line above this is the second error.

    return windchillnew;
}

void printResults(double windchillold, double windchillnew)
{
    printf("The wind chill using the old formula is: %lf F\n", windchillold);
    printf("The wind chill using the new formula is: %lf F\n", windchillnew);
} 
```

这有调试系统说：错误：二进制^的无效操​​作数（有'double'和'double'）

查看了其他也出现“双重”错误并且无法使用该信息来帮助我自己的脚本。

我知道这可能是我看过的一些简单的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:09:36.223

在 C`^`中是异或运算符 (XOR)，而不是求幂运算符。您不能对两个浮点值进行异或运算。

要取幂，您可以使用[`pow(3)`](http://www.manpagez.com/man/3/pow/)函数 from `math.h`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:09:36.393

位运算符不适用于浮点类型的操作数。操作数必须具有整数类型。

> （C99，6.5.11p2 按位异或运算符）“每个操作数都应具有整数类型。”

`^`是 C 中的按位异或运算符。

要使用幂运算，请使用 中声明的`pow`和`powf`函数`math.h`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:31:14.217

```
#include <math.h>
double pow( double base, double exp ); 
```

在 C 中，您不能返回多个值，因此请执行这样的单个函数...

```
double getinput(const char* message) {
    double retval;
    printf("%s: ", message);
    scanf("%lf", &retval);
    return retval;
} 
```

在了解指针以及如何掌握操作系统之前，请尽量保持代码简单。

希望能帮助到你 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T21:12:50.203

另一个问题：

```
return v,t; 
```

C 中不能有多个返回值。

您可以在调用时将其作为输出参数执行，也可以创建单独的函数。例如：

```
void getinput(double* v_out, double* t_out) 
```

# javascript - jQuery 父切片

> ID：14781392
> 
> 赞同：2
> 
> 时间：2013-02-08T21:09:09.147
> 
> 标签：javascript, jquery, css, jquery-selectors

您好，我为某些 div 中的某些元素制作了更多的假负载。我的问题是当我单击**加载更多**jquery 切片并单击我的所有元素时加载（来自我的第一个容器和第二个容器）。

这是我的代码，[**这里是 jsFiddle**](http://jsfiddle.net/327xr/)：

```
$(".tohide").hide();
$(".tohide").slice(0, 3).show();

$(".more-comments").click(function(){
    var showing = $(".tohide:visible").length;
    $(".tohide").slice(showing - 1, showing + 999).show(); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:13:36.830

使用`next()`and `children()`，像这样：

```
$(this).next("#comments").children(".tohide").slice(showing, showing + 999).show(); 
```

见[演示](http://jsfiddle.net/zaknotzak/327xr/9/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:13:39.537

你不需要使用`slice`inside `click`，试试这个：

[**这是工作的jsFiddle。**](http://jsfiddle.net/Wp2k5/2/)

```
$(".more-comments").click(function(){
    $(this).next('.comments').children('.tohide').show();
}); 
```

还要注意`id`'s 是唯一的，不要在不同的元素上使用它们。在你的例子中是`#comments`.

# c# - 在 ServiceStack.OrmLite 中获取运行时类的表名/避免硬编码表名

> ID：14781394
> 
> 赞同：3
> 
> 时间：2013-02-08T21:09:16.813
> 
> 标签：c#, .net, orm, servicestack, ormlite-servicestack

我使用[ServiceStack.OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite)并希望从表中获取总行数。我目前通过[ServiceStack.OrmLite 文档](https://github.com/ServiceStack/ServiceStack.OrmLite)中指出的那样做

```
db.Scalar<int>("SELECT COUNT(*) FROM User"); 
```

但是，该表的名称`User`将来可能会更改，因此我正在寻找一种不对其进行硬编码的方法。是否可以从相应的类中获取表的名称，例如 ie

```
string table_name = db.GetTableName<User> ();
db.Scalar<int>("SELECT COUNT(*) FROM {0}", table_name); 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T15:21:02.880

访问类型的配置元数据的 2 种方法是：

```
ModelDefinition<User>.Definition.ModelName;
typeof(User).GetModelMetadata().ModelName; 
```

尽管在某些数据库中您需要引用您的表名，但您可以这样做：

```
var modelDef = ModelDefinition<User>.Definition;
OrmLiteConfig.DialectProvider.GetQuotedTableName(modelDef) 
```

所以是的，您可以将其包装在一个扩展方法中，该方法可以满足您的要求：

```
public static MyOrmLiteExtensions {
    public static string GetTableName<T>(this IDbConnection db) {
        var modelDef = ModelDefinition<T>.Definition;
        return OrmLiteConfig.DialectProvider.GetQuotedTableName(modelDef);
    }
} 
```

# c - 在C中截断整数

> ID：14781397
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:09:32.443
> 
> 标签：c, integer

有没有办法从C中的整数中删除最后一个数字？例如，如果用户输入数字：“123”，有没有办法将其更改为“12”？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T21:10:56.750

将该整数除以 10。

123 / 10 == 12。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-08T21:10:56.977

我通常只除以 10。整数数学会截断。通常这会让初学者发疯，但这正是你想要的。不过要注意负数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T21:11:22.087

如果要将其截断为整数值，只需使用整数除法。

```
number = 123;
number /= 10;
/* number is now 12 */ 
```

对于字符串，取决于您如何分配它，您可以将 3 设置为一个`\0`字符，以便不在字符串中打印它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-08T21:14:27.250

除以 10 绝对是首选解决方案。

*但是，如果您想在转换为整数之前*从输入字符串中删除最后一位数字（例如，如果用户输入的数字可能太大而无法放入`int`5000111222 中），您可以执行以下操作，假设用户输入在`char *`变量中`buf`：

```
buf[strlen(buf)-1] = 0; 
```

这会提前一个字符终止字符串。请注意，如果字符串为空 ( `""`)，这将产生未定义的行为，因此请首先确保字符串为非空。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T21:14:47.017

请记住，数字与其十进制表示不同。

也就是说，您可以在这里使用整数除法除以十。

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    int i;
    for (i = 10; i < 21; i++)
        printf("%d %d\n", i, i/10);

    return 0;
} 
```

# wpf - ItemsControl DataTemplate 中的 WPF MVVM 访问元素

> ID：14781401
> 
> 赞同：1
> 
> 时间：2013-02-08T21:09:36.750
> 
> 标签：wpf, mvvm, datatemplate, itemscontrol

我需要从我的`ComboBox`es 中获取值，这些值驻留`ObservableCollection`在`ItemsControl`. 而且我需要将它们存储在一个单独的数据结构中，至少我认为是这样。听起来很简单？我希望是这样，我整天都在坚持。

这是我的 XAML：

```
<Window.Resources>
    <Style x:Key="IVCell" TargetType="{x:Type ItemsControl}">
        <Setter Property="ItemTemplate">
            <Setter.Value>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding Variable.Name}"/>
                        <ComboBox x:Name="IVValues" ItemsSource="{Binding Values}"
                                  SelectedIndex="0"/>
                    </StackPanel>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>

...
        <ItemsControl Name="IndependentVariables" Style="{StaticResource IVCell}" ItemsSource="{Binding IVCollection}"/> 
```

where 在`IVCollection`这里定义，在我的 ViewModel 中：

```
public class MainViewModel : ViewModelBase
{
    public ObservableCollection<ExternalClass> IVCollection { get; set; }

    ...
} 
```

在你问是什么之前`ExternalClass`，要知道那是包含`Variable`和的东西`Values`。

这就是问题所在。我需要得到`SelectedIndex`of `ComboBox`（所以我会改变当前的代码`SelectedIndex="0"`）。如果我`ExternalClass`需要包含这些`SelectedIndex`值，那将很容易，因为我已经可以访问它的字段（`Variable`和`Value`）。但我需要这些`int`价值观

```
public class MainViewModel : ViewModelBase
{
    public ObservableCollection<int> SelectedIndices { get; set; }

    ...
} 
```

或类似的东西。我已经制作了一个快速包装类来同时包含`SelectedIndices`and `IVCollection`，但显然这不起作用，因为`ItemsControl`想要一个`ObservableCollection`，而不是一个有两个`ObservableCollection`s 的类。

而且我想这里问题的真正实质（我可能是错的，这就是我要问的原因）是我如何访问我当前所在的`Style`/范围之外的属性（例如）？我可以在代码隐藏中毫无问题地做到这一点，就像这样，`DataTemplate``IVCell`

```
 private void IVValues_OnSelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        for (var i = 0; i < IndependentVariables.Items.Count; i++)
        {
            var uiElement = IndependentVariables.ItemContainerGenerator.ContainerFromIndex(i);
            var cBox = FindVisualChild<ComboBox>(uiElement); //Homebrew method
            //cBox.SelectedIndex
        }
    } 
```

但再一次，我试图保持对 MVVM 的友好。我什至尝试过将事件命令与 MVVM Light 等一起使用，但这只是推迟了问题。我需要解决它。或者绕过它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:24:23.607

我会这样做，我会为所选值创建一个属性

```
// within the MainViewModel class
private ExternalClass _selectedObject;
public ExternalClass SelectedObject
 {
   get { return _selectedObject; }
   set
       {
            _selectedObject= value;
            RaisePropertyChanged("SelectedObject");
       }
  } 
```

然后将`SelectedItem`in绑定`ComboBox`到`SelectedObject`属性

```
<ComboBox ItemsSource="{Binding IVCollection}" SelectedItem="{Binding SelectedObject}" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                ... data template goes here
            </DataTemplate>
        </ComboBox.ItemTemplate>
 </ComboBox> 
```

希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:47:56.480

这是可以实现的一种方法，尽管它并不比您的示例对 MVVM 更友好。

在 MainWindow 中，在显示视图之前的某处添加以下路由事件处理程序，例如构造函数或加载的事件：

```
AddHandler(Selector.SelectionChangedEvent, new SelectionChangedEventHandler(OnSelectionChanged)); 
```

然后添加这个处理程序：

```
private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
     var comboBox = e.OriginalSource as ComboBox;
     if (comboBox == null) return;
     var context = comboBox.DataContext as ExternalClass;
     if (context == null) return;
     var indexOfContext = IVCollection.IndexOf(context);
     if (indexOfContext < 0) return;
     SelectedIndices[indexOfContext] = comboBox.SelectedIndex;
} 
```

我仍然不确定您打算如何跟踪哪个 SelectedIndex 与哪些数据一起使用，因此在上面的示例中，我假设 SelectedIndices 有一个固定长度。

如果您正在寻找纯数据绑定解决方案，我强烈建议您在 ExternalClass 上放置一个属性并绑定到它。或者，如果您反对，请使用 ExternalClass 周围的包装类，它将 ExternalClass 作为一个属性，将 SelectedIndex 作为另一个。这将是最简单和最 MVVM 友好的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T18:08:07.573

@sleiman 和 @Brandon 您的回答都不是 100%，但它们仍然非常有帮助。我使用您的两个答案中的元素达到了我的解决方案，因此我犹豫是否接受其中一个。

我使用了包装类解决方案和公开属性解决方案的组合（以及一种半无关但仍然必要的事件处理技术）来创建以下内容：

```
public class IVWrapper : INotifyPropertyChanged
{
    public VariableValueList<double> IVCollection { get; set; }
    private int selectedIndex;
    public int SelectedIndex
    {
        get { return selectedIndex; }
        set
        {
            selectedIndex = value;
            OnPropertyChanged("SelectedIndex");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;

        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

和

```
public class MainViewModel : ViewModelBase
{

    public ObservableCollection<IVWrapper> IVWrapperCollection { get; set; }

    ...

    private void InitializeIVs()
    {
        IVWrapperCollection.Clear();
        foreach (var iv in ...)
        {
            var toBeAdded = new IVWrapper {IVCollection = iv};
            toBeAdded.PropertyChanged += (sender, args) => Foo();
            IVWrapperCollection.Add(toBeAdded);
        }
    }

    public void Foo()
    {
        //Doin stuffs
    }
} 
```

与我的 ViewModel 的这种额外集成允许我在`selectionIndex`更改时调用一个函数。整洁的！而且干净！

XAML MainView 中的相应更改：

```
 <StackPanel>
                        <TextBlock Text="{Binding IVCollection.Variable.Name}"/>
                        <ComboBox ItemsSource="{Binding IVCollection.Values}"
                                  SelectedIndex="{Binding SelectedIndex}"/>
                    </StackPanel>

...

        <ItemsControl Name="IndependentVariables" Style="{StaticResource IVCell}" ItemsSource="{Binding IVWrapperCollection}"/> 
```

# active-directory - 创建仅在用户登录到特定计算机时适用的基于 AD 用户的策略

> ID：14781408
> 
> 赞同：0
> 
> 时间：2013-02-08T21:10:28.337
> 
> 标签：active-directory

假设我有 machine1、machine2 和 machine3。我想要的设置应该只影响 machine3。当我设置计算机策略时，我可以将它应用到机器 OU 并且只有那台机器在里面，所以那里没有问题。但是，当我设置用户策略并将其应用于用户时，该策略将应用于用户登录的任何机器，在此示例中为 machine1、machine2 和 machine3。

我的问题是我将如何设置用户策略，以便在用户登录 machine1 和 machine2 时它不会应用于用户，但在用户登录 machine3 时应用到用户？我在Windows2008 DC环境。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:10:51.210

你看过 GPO 环回处理模式吗？

[http://social.technet.microsoft.com/wiki/contents/articles/2548.windows-server-understand-user-group-policy-loopback-processing-mode.aspx](http://social.technet.microsoft.com/wiki/contents/articles/2548.windows-server-understand-user-group-policy-loopback-processing-mode.aspx)

# javascript - 构造要随更改复制的默认数据对象

> ID：14781409
> 
> 赞同：0
> 
> 时间：2013-02-08T21:10:31.707
> 
> 标签：javascript, json, ajax

我有一个有 2 个玩家的游戏。他们有几乎相同的开始数据，当然它在游戏过程中会发生变化。

我猜我需要一些构造函数对象之王，我将复制然后修改它，我还需要它是 JSON 以便于 ajax 发送。

有没有可以帮助我的设计模式？我不喜欢使用数据库，因为我只需要单个游戏实例的数据。

这是我现在为一位玩家使用的结构：

```
player = {
    "active" : true,
    "room" : openRoom,
    "id" : playerID,
    "name": username,
    "hp" : 5,
    "units" : {
        1 : {
            "id" : 1,
            "hp" : 3,
            "row" : 1,
            "square" : 1
        },
        2 : {
            "id" : 2,
            "hp" : 4,
            "row" : 2,
            "square" : 1
        },
        3 : {
            "id" : 3,
            "hp" : 5,
            "row" : 3,
            "square" : 1
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:15:10.440

我想你想克隆 JSON 对象。使用 JQuery 最简单的方法是

```
player1 = $.extend({}, player, {name:"Allen"});
player2 = $.extend({}, player, {name:"John"}); 
```

如果不使用 JQuery，请使用 JSON 对象

```
var player1 = JSON.parse(JSON.stringify(player));
var player2 = JSON.parse(JSON.stringify(player));
player1.name = "Allen";
player2.name = "John"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:18:42.250

[http://www.w3schools.com/js/js_objects.asp](http://www.w3schools.com/js/js_objects.asp)

在“使用对象构造函数”部分是您需要的所有信息，它显示了一个使用 Person 对象的示例，但我认为它直接适用于您尝试做的事情。

快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:19:03.517

有几种关于对象实例化和初始化的设计模式。但是，您似乎不需要任何继承或“属性共享”技术，因此返回新对象的非常简单的函数应该很适合作为构造函数。您甚至可以在编码时使用对象文字。

两个构造函数的示例，每个都有一些参数：

```
function makePlayer(id, name, units) {
    return {
        "active" : true,
        "room" : openRoom,
        "id" : id,
        "name": name,
        "hp" : 5,
        "units" : units
    };
}
var uuid = 1;
function makeUnit(row) {
    return {
        "id" : uuid++,
        "hp" : 3,
        "row" : row,
        "square" : 1
    };
}
var player = makePlayer(playerId, username, [makeUnit(2), makeUnit(4), makeUnit(3)]);
var jsonstring = JSON.stringify(player); 
```

# ios - 在 Cocoapod 中集成 plcrashreporter？

> ID：14781418
> 
> 赞同：1
> 
> 时间：2013-02-08T21:10:54.867
> 
> 标签：ios, cocoapods, plcrashreporter

我想在 cocoapod 中使用这个 IOS 项目：

[https://code.google.com/p/plcrashreporter/](https://code.google.com/p/plcrashreporter/)

创建 podspec 简单吗？有人已经在某处做过了吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:44:01.700

做起来并不难。看看其他一些 podspecs 看看它是如何工作的。

[https://github.com/CocoaPods/Specs](https://github.com/CocoaPods/Specs)

还有格式的文档：[https ://github.com/CocoaPods/CocoaPods/wiki/The-podspec-format](https://github.com/CocoaPods/CocoaPods/wiki/The-podspec-format)

此外，一旦你让它工作，你可以提交你的 podspec，以便每个人都可以使用它。[主页http://cocoapods.org/](http://cocoapods.org/)上提供了有关如何执行此操作的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T10:14:12.220

肯定很多人都做过这件事。这是这样做的方法：

```
Pod::Spec.new do |s|
  s.name = 'MyPod'
  s.version = '1.0'
  s.authors = {'Your Name Here' => 'you@example.com'}
  s.homepage = 'http://www.example.com'
  s.summary = 'My pod is awesome'
  s.source = {:git => 'https://git.example.com/MyPodRepo', :revision => '1e16eee5c4e2'}
  s.platform = :ios
  s.source_files =  'MyPodSubdir/**/*.{h,m}'
  s.frameworks = 'QuartzCore'
  s.ios.preserve_paths = 'MyPodSubdir/Externals/*.framework'
  s.ios.vendored_frameworks = 'MyPodSubdir/Externals/CrashReporter.framework'
  s.ios.resource = 'MyPodSubdir/Externals/CrashReporter.framework'
  s.ios.xcconfig = { 'LD_RUNPATH_SEARCH_PATHS' => '"$(PODS_ROOT)/MyPod/MyPodSubdir/Externals"' }
end 
```

pod 规范中的最后 4 行允许您拥有一个使用 PLCrashReporter 的 pod。

在这个关于 PLCrashReporter 和 CocoaPods的[博客条目中找到。](http://codereaper.com/blog/2014/creating-a-pod-with-crashreporter/)

# java - Eclipse (Maven) 中的 Junit 包命名冲突

> ID：14781422
> 
> 赞同：1
> 
> 时间：2013-02-08T21:11:11.227
> 
> 标签：java, eclipse, maven, junit

我想为我的 junit 测试使用默认的 maven 目录，所以：

*   在 Eclipse 中，我创建了一个`test/java`文件夹。
*   我在那里创建了一个junit类`package com.xxx.xxx.tracker.utils.test;`

但是eclipse给了我一个错误。它想将包名称更改为

```
package test.java.com.xxx.xxx.tracker.utils.test; 
```

或者eclipse想让我把它移到对应的文件夹中`com/xxx/xxx/tracker/utils/test`

这是来自eclipse的确切消息：

> *   声明的包“com.xxx.xxx.tracker.utils.test”与预期的包“test.java.com.xxx.xxx.tracker.utils.test”不匹配
> *   2个快速修复可用
> *   将 xxxTest.java 移动到 'package com.xxx.xxx.tracker.utils.test'
> *   将包声明更改为“test.java.com.xxx.xxx.tracker.utils.test”

`test.java`我想将 junit 保留在 test/java 文件夹中，以使其不受构建并遵循约定，但在我的包名称中包含它没有意义。

有没有办法让包名保持我想要的方式，并将它放在 test/java 文件夹中？

**编辑：**是因为我的“src”文件夹中有项目吗？例如：

```
src/
   com.xxx.xxx.tracker.utils.Xxxx.java
   test/
       java/
           com.xxx.xxx.tracker.utils.XxxxTest.java 
```

这个项目不是从 Maven 开始的。它是由其他人转换的。

**编辑 2**：火更多的燃料：

这是我的 pom.xml 中的一些内容（我没有设置）。

```
<build>
<sourceDirectory>/home/me/workspace/proj_PARENT/proj_Classes/src</sourceDirectory>
<testSourceDirectory>/home/me/workspace/proj_PARENT/proj_Classes/src/test/java</testSourceDirectory> 
```

我确实有 eclipse m2e 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T23:11:48.987

您的结构和类路径有问题。使用您描述的布局，文件夹 src 是源代码的根目录。但它包含测试，应该在一个子文件夹中。在您的情况下，您有嵌套的源文件夹。这一定会导致编译问题，因为 *.java 文件将出现在两个包中。其中一个包无效。

```
src/
   com.xxx.xxx.tracker.utils.Xxxx.java
   test/
       java/
           com.xxx.xxx.tracker.utils.XxxxTest.java 
```

现在您应该创建两个 src 文件夹。

```
src/
   main/
       java/
           com.xxx.xxx.tracker.utils.Xxxx.java
   test/
       java/
           com.xxx.xxx.tracker.utils.XxxxTest.java 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:03:50.927

在 Eclipse 中遵循标准 Maven 目录布局的 Maven 项目应该在其构建路径中包含以下源文件夹（来自 .classpath 文件的片段）

```
<classpathentry kind="src" output="target/classes" path="src/main/java"/> 
<classpathentry kind="src" output="target/test-classes" path="src/test/java"/> 
```

您的 Eclipse 项目资源管理器应如下所示：

![在此处输入图像描述](../Images/67d4b79c56a9b36e13a243da1a654d3a.png)

如果您使用的是 Eclipse m2e 插件，在您的项目上创建 src/main/java 和 src/test/java 文件夹将导致它们自动添加到构建路径中。

**更新 ：**

在您的问题更新中，您表明您将 testSourceDirectory 嵌套在 sourceDirectory 中。大多数 IDE 会警告您不要这样做，并且很可能会导致问题。Eclipse 可以通过从源文件夹中排除测试部分来处理它，但是每次您尝试通过 m2e 插件更新项目配置时，您都会再次看到嵌套异常消息。

如果你真的想要这种设置，你需要相应地配置构建路径（右键单击项目 - 构建路径 - 配置构建路径）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:43:55.390

尝试向`test/java`您的项目添加一个新文件夹并将其配置为`Project > Properties > Java Build Path`. 看看`Source`标签。

您的目录布局应该是：

```
project/
-> src/
-> test/ 
```

使用`.test`作为测试包的后缀可能不是必需的，并且`x.y.z.MyClass`在`x.y.z.MyClassTest`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-11T17:52:13.457

这正是我所做的。

*   创建新的源目录：`src/test/java`和`src/main/java`.
*   获取我当前所有的 com.xxx.xxx.trackar* 包，全选，右键单击`Refactor > Move`，我将它们移动到`src/main/java`
*   `src/test/java`使用不带 .test 后缀的包名创建我的新 junit 测试。
*   编辑 pom.xml 以符合新的源目录。
*   右键单击项目`Maven > update Project`。
*   `Project > Properties > Java Build Path`见`Source`标签。确保`src/test/java`并且`src/main/java`在里面并且`src`不在里面。如果不正确，请返回并再次更新 pom.xml（并查看有效的 pom）...
*   关闭并再次打开 Eclipse。
*   包名错误消失了！！！！！！耶！

感谢大家的帮助。PS：我丢失了版本控制历史，但这是因为我使用的是旧系统。

# objective-c - 找不到实例方法“-objectFromJSONString”（返回类型默认为“id”）

> ID：14781428
> 
> 赞同：1
> 
> 时间：2013-02-08T21:11:30.470
> 
> 标签：objective-c, xcode

有人可以帮我解决这个警告吗？

警告：

```
Instance method '-objectFromJSONString' not found (return type defaults to 'id') 
```

代码：

```
- (void)checkVersion {
    NSString *version = @"";

    NSURL *url = [NSURL URLWithString:@"http://itunes.apple.com/lookup?id=<Your app ID>"];
    ASIHTTPRequest *versionRequest = [ASIFormDataRequest requestWithURL:url];
    [versionRequest setRequestMethod:@"GET"];
    [versionRequest setDelegate:self];
    [versionRequest setTimeOutSeconds:150];
    [versionRequest addRequestHeader:@"Content-Type" value:@"application/json"];
    [versionRequest startSynchronous];

    NSString* jsonResponseString = [versionRequest responseString];

    // --> ERROR NEXT LINE
    NSDictionary *loginAuthenticationResponse = [jsonResponseString objectFromJSONString];

    NSArray *configData = [loginAuthenticationResponse valueForKey:@"results"];

    for (id config in configData)
    {
        version = [config valueForKey:@"version"];
    }

    //Get Current Version
    NSString *currentVersion=[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"];
    //Check your version with the version in app store
    if (![version isEqualToString:currentVersion]) 
    {
        UIAlertView *alert = [[[UIAlertView alloc] initWithTitle:@"New Version"
                                                         message:@"Download it!" delegate:self
                                               cancelButtonTitle:@"Cancel"
                                               otherButtonTitles:@"Download", nil] autorelease];
        [alert show];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:27:10.040

您需要将 JSONKit 头文件导入到使用它的文件中：

```
#import "JSONKit.h" 
```

# android - jquery-android 应用程序的互联网权限

> ID：14781437
> 
> 赞同：0
> 
> 时间：2013-02-08T21:12:10.717
> 
> 标签：android, jquery, cordova

我制作了一个小应用程序（在 Eclipse 上使用 jquery 和 phonegap）。在这个应用程序中，我使用了一些 ajax 来调用一个 xml 文件。

在某些设备上，互联网权限不起作用（例如 Nexus S、rom non-stock rasbeanjelly、Samsung S3、android 4.1 jellybean）。在其他人身上，它完美无缺。

我在清单中使用了这个权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

我还尝试在 MainActivity 中添加它（以避免连接速度慢的问题）：

```
super.setIntegerProperty("loadUrlTimeoutValue", 70000); 
```

也许对于每个设备或 android 版本来说还不够？

我也使用 phonegap 来做 iOS 版本的应用程序，我遇到了同样的问题（但我只在模拟器上尝试过）。

# batch-file - 如何批量读取 txt 中的行。以及如何将每一行放在自己的变量中？

> ID：14781443
> 
> 赞同：1
> 
> 时间：2013-02-08T21:12:40.563
> 
> 标签：batch-file

我需要将文本中的每一行都放在自己的变量中。像这样：

文本文件：

```
TEMPLATE: Permission, Username, Password;
Admin, Admin, Superflip;
User, Mom, Hi; 
```

我希望这个文件中的每一行都在它的 OWN 变量中。是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T01:45:55.033

以下应该工作......

```
@echo off & setlocal enabledelayedexpansion
set num=0
::Change "File_Path" to where your file is. If it is in the same directory, just put the name.
for /f "delims=" %%i in (File_Path) do (
    set /a num+=1
    set line[!num!]=%%i
) 
```

脚本的工作原理：该变量`num`设置为在`for`循环中使用。循环遍历文件中的`for`每一行，将`File_Path`行设置为`line`，后缀为数字。

此脚本模拟创建数组。要调用特定线路，请输入`%line[number_of_line]%`. 例如，要检查`line 3`和`line 5`是否相同，您可以输入类似

```
if %line[3]%==%line[5]% echo Line 3 and 5 are the same. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:32:03.883

你也可以简单地这样做：

```
< filename.txt (
set /p line1=
set /p line2=
set /p line3=
) 
```

这是一种更简单的方法。

# ruby-on-rails - Rails Facebook Omniauth 法拉第错误

> ID：14781444
> 
> 赞同：0
> 
> 时间：2013-02-08T21:12:43.777
> 
> 标签：ruby-on-rails, facebook, omniauth

我有一个带有 ruby​​-1.9.3-p374 和 rails 3.2.11 的 OS X 10.8.2。我已按照#360 Facebook Authentication guide on rails cast 但当我尝试登录时收到错误消息：

```
Faraday::Error::ConnectionFailed

SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed 
```

我该如何解决这个问题？有没有明确的指南？

谢谢你的支持

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T02:37:17.540

关于这个问题已经很少有类似的问题了，我建议你看看这些解决方案是否适合你。

*   [Omniauth Facebook 错误 - Faraday::Error::ConnectionFailed](https://stackoverflow.com/questions/10775640/omniauth-facebook-error-faradayerrorconnectionfailed)
*   [OmniAuth 和 Facebook：证书验证失败](https://stackoverflow.com/questions/3977303/omniauth-facebook-certificate-verify-failed)
*   [Faraday::Error::ConnectionFailed Omniauth Facebook](https://stackoverflow.com/questions/11028216/faradayerrorconnectionfailed-omniauth-facebook)（仅限 Windows）

# actionscript-3 - 在 air /as3 中创建 POST 请求以用于 youtube 直接上传

> ID：14781455
> 
> 赞同：2
> 
> 时间：2013-02-08T21:13:20.920
> 
> 标签：actionscript-3, post, air, youtube-api

我正在 adobe air 中开发一个简单的 youtube 应用程序，到目前为止，我可以在 youtube 中获得批准窗口并获取用于上传的令牌。但是，我被困在您在 POST 上发送数据以及所有信息的部分（[https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading](https://developers.google.com/youtube/2.0/developers_guide_protocol_direct_uploading)）

我已经将视频数据加载为字节数组，我需要创建包含链接中显示的所有信息的整个 POST 请求。（xml atom 提要、bytearray 数据等）我有所有需要的信息，我只需要构建 POST 请求。

如何在 as3/air 中做到这一点？我是否将所有信息都创建为 URLVariables？哪些是标题，哪些不是？如何将 --<boundary_string> 添加到 POST？你如何将 bytearra 添加到 POST 中？高度赞赏所有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:33:49.410

发送 POST 变量时，我总是这样做：

```
<fx:Declarations>
    <s:HTTPService id="loginServ" resultFormat="text" result="onResult(event)" method="POST" url="http://www.myurl.com/login.php"/>
</fx:Declarations> 
```

然后您将拥有两个功能，一个用于发送请求，一个用于处理您返回的结果：

```
private function login():void{
    //Make a new Object to hold all of your POST variables
    var reqInfo:Object = new Object();

    //Then set the properties of that Object to be each POST variable
    reqInfo.username = "admin";
    reqInfo.password = "password";

    //Finally, send the request with the Object as the parameter
    loginServ.send(reqInfo);
}

private function onResult(e:ResultEvent):void {
    trace("Result:" + e.result);
} 
```

# java - rst.getTimestamp("upload_date") 在 Amazon RDS MySQL 中不起作用

> ID：14781456
> 
> 赞同：0
> 
> 时间：2013-02-08T21:13:27.003
> 
> 标签：java, mysql, amazon-web-services, timestamp, amazon-rds

我在 AWS RDS 上有一个 MySQL 数据库表，其中有一个名为**upload_date**的列，其**TYPE**是**TIMESTAMP**并且**DEFAULT**是**current_timestamp**。

我在本地 MySQL 数据库中做了同样的事情。

当我在本地数据库连接中调用 rst.getTimestamp("upload_date") 时，效果很好。但是，当我在我的 AWS RDS MySQL 上尝试同样的事情时，我得到了这个异常

```
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
    at com.mysql.jdbc.ResultSetRow.getTimestampFast(ResultSetRow.java:1033)
    at com.mysql.jdbc.BufferRow.getTimestampFast(BufferRow.java:576)
    at com.mysql.jdbc.ResultSetImpl.getTimestampInternal(ResultSetImpl.java:6466)
    at com.mysql.jdbc.ResultSetImpl.getTimestamp(ResultSetImpl.java:6066)
    at com.mysql.jdbc.ResultSetImpl.getTimestamp(ResultSetImpl.java:6104)
    at org.udhc.gen.HealthRecord.getAllUploadedHealthRecords(HealthRecord.java:337)
    at org.udhc.gen.HealthRecord.main(HealthRecord.java:858) 
```

我哪里错了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:26:06.850

问题是：

我已经改变了表格来添加这个新列 - 所以之前输入的行有

00-00-00 00:00（或类似的时间）

这导致了上述预期。

使固定：

```
UPDATE FORUM SET UPLOAD_DATE = CURRENT_TIMESTAMP 
```

# c++ - SDL_Surface 透明度问题

> ID：14781464
> 
> 赞同：0
> 
> 时间：2013-02-08T21:13:49.083
> 
> 标签：c++, opengl, sdl, sdl-ttf

我一直在使用 sdl ttf，现在，我正在为多行文本渲染创建一个文本渲染器函数。

我正在为每条线创建一个曲面，在“全局”曲面中插入，然后将该“全局”曲面转换为纹理。

实际上我的问题如下：如果我让全局表面透明，则 blitting 不起作用（它显示一个空表面），如果我设置 SDL_FillRect，然后执行 SDL_SetColorKey，则不起作用。

我尝试使用逐像素方法来做到这一点，它可以工作，但这不是预期的结果。

我实际上需要的是：Blit 表面（文本渲染表面与 TTF_RenderText_Blended），在具有透明背景的 SDL_Surface 内对它们进行 blit，仅此而已。

```
SDL_Surface * surfed_texture = SDL_CreateRGBSurface(SDL_SWSURFACE,surface_width,surface_height,32,
0x000000ff, 0x0000ff00, 0x00ff0000, 0xff000000);

Uint32 tormv = SDL_MapRGB(surfed_texture->format,255,0,255);

int possiblecolors[] = { 255,0,255,255,255,255 };

int in_pc = 0;

if(color.r == possiblecolors[0] && color.g == possiblecolors[1] && color.b == possiblecolors[2]){
    in_pc=3;
}

/*SDL_FillRect(surfed_texture,NULL,SDL_MapRGB(surfed_texture->format,possiblecolors[in_pc],possiblecolors[in_pc+1],possiblecolors[in_pc+2]));
SDL_SetColorKey(surfed_texture, SDL_SRCCOLORKEY, SDL_MapRGB(surfed_texture->format,possiblecolors[in_pc],possiblecolors[in_pc+1],possiblecolors[in_pc+2]));
*/
SDL_Surface * temporal = NULL;
for(int i=0;i<(int)buff_split.size();i++){
    const char* c_text = buff_split.at(i).c_str();

    temporal = TTF_RenderText_Blended(font,c_text,color);

    int w_fo;
    int h_fo;
    TTF_SizeText(font,c_text,&w_fo,&h_fo);

    SDL_Rect rct;
    rct.y=i*lineSkip;

    if(txt_align==ALIGN_LEFT){
        rct.x=0;
    }else if(txt_align==ALIGN_CENTER){
        rct.x = surface_width/2 - w_fo/2;
    }else if(txt_align==ALIGN_RIGHT){
        rct.x = surface_width - w_fo;
    }

    rct.w=0;
    rct.h=0;

    // Blit surface

    SDL_BlitSurface(temporal,NULL,surfed_texture,&rct);

    SDL_FreeSurface(temporal);

} 
```

Blitting 到具有透明背景的“surfed_texture” = 不显示 blitted 表面。每像素方法：不删除所有背景。

并且 SDL_SetColorKey 不起作用！（我已经尝试过 SDL_DisplayFormatAlpha 并且仍然无法正常工作）。

一些帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:59:07.740

解决方案如下：

在“全局”表面中使用 SDL_SetAlpha NOT，将 SDL_SetAlpha 应用到每个没有标志的“时间”表面，并且值为 0：

```
SDL_SetAlpha(temporal,NULL,0); 
```

现在它工作正常！

# c++ - 如何更改结构指针的单个成员的值？

> ID：14781468
> 
> 赞同：0
> 
> 时间：2013-02-08T21:14:09.910
> 
> 标签：c++

```
 #include <iostream>
 #include <cstring>
 using namespace std;

 struct Student {
     int no;
     char grade[14];
 };

 void set(struct Student* student);
 void display(struct Student student);

 int main( ) {
     struct Student harry = {975, "ABC"};

     set(&harry);
     display(harry);
 }
 void set(struct Student* student){
     struct Student jim = {306, "BBB"};

     *student = jim; // this works
     //*student.no = 306; // does not work
 }
 void display(struct Student student){

     cout << "Grades for " << student.no;
     cout << " : " << student.grade << endl;
 } 
```

如何使用指针仅更改结构的一个成员？为什么 *student.no = 306 不起作用？只是有点困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:15:30.847

如果你有一个指向结构的指针，你应该使用`->`它来访问它的成员：

```
student->no = 306; 
```

这是做的语法糖`(*student).no = 306;`。你的原因不起作用是因为[operator priority](http://en.cppreference.com/w/cpp/language/operator_precedence)。没有括号， 的`.`优先级高于`*`，并且您的代码等效于`*(student.no) = 306;`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:15:34.237

`operator*`具有非常低的优先级，因此您必须用括号控制评估：

```
(*student).no = 306; 
```

虽然它总是可以这样做：

```
student->no = 306; 
```

在我看来，这要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:55:25.067

你应该使用

```
student->no = 36 
```

虽然我们正在这样做，但将结构按值传递给函数并不是一个好习惯。

```
// Use typedef it saves you from writing struct everywhere.
typedef struct {
     int no;
// use const char* insted of an array here.
     const char* grade;
 } Student;

 void set(Student* student);
 void display(Student* student);

 int main( ) {
     // Allocate dynmaic. 
     Student *harry = new Student;
      harry->no = 957;
      harry->grade = "ABC";

     set(harry);
     display(harry);
 }
 void set(Student *student){

     student->no = 306; 
 }
 void display(Student *student){

     cout << "Grades for " << student->no;
     cout << " : " << student->grade << endl;

     delete student;
 } 
```

# java - Guice：Singleton.class 和 @Singleton 之间的区别

> ID：14781471
> 
> 赞同：25
> 
> 时间：2013-02-08T21:14:16.033
> 
> 标签：java, dependency-injection, singleton, guice

在 Guice 中，有什么区别：

```
// Inside your AbstractModule subclass:
@Override
public void configure() {
    bind(Service.class).to(ServiceImpl.class).in(Singleton.class);
} 
```

和：

```
@Override
public void configure() {
    bind(Service.class).to(ServiceImpl.class);
}

@Provides @Singleton
public ServiceImpl providesService() {
    return new ServiceImpl();
} 
```

他们都一样吗？您什么时候会使用其中一种？提前致谢。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-09T02:36:54.827

它们**几乎**相同。该`@Singleton`语法对于注释`@Provides`方法或注释类本身很有用（尽管我更喜欢将范围注释保留在模块中）。

不同之处在于*哪个键被标记为 Singleton*，这与`@Singleton`vs `Singleton.class`（或`Scopes.SINGLETON`, `asEagerSingleton`，`@Singleton`类注释或`toInstance`隐式单例）关系不大，而与默认语法使简单化的关系更多。例如：

```
public class MyModule extends AbstractModule {
  @Override public void configure() {
    bind(A.class).to(AImpl.class).in(Singleton.class);

    bind(B.class).to(BImpl.class);
    bind(BImpl.class).in(Singleton.class);
  }

  @Provides @Singleton C provideC() { return new CImpl(); }

  @Provides @Singleton D provideD(DImpl dImpl) { return dImpl; }

  @Provides E provideE(EImpl eImpl) { return eImpl; }
  @Provides @Singleton EImpl provideEImpl() { return new EImpl(); }
} 
```

上面我们已经将 interface 绑定`A`到 class `AImpl`，并将 interface绑定`B`到 class `BImpl`，但是行为是不同的：

*   注入每次`A`都会检索相同的实例。`AImpl`
*   注入每次`AImpl`都会检索一个不同`AImpl`的，所有这些都不同于`A`'s 实例。
*   注入每次`B`都会检索相同的实例。`BImpl`
*   注入`BImpl`还将检索注入的同一`BImpl`实例`B`。

可以看到，每个key都不一样，Guice只要接口绑定Singleton，就会允许多个实现实例。如果您只注入`A`和`B`接口，则行为看起来相同，但如果您从同一个 Injector 注入接口和实现，您可能会看到不同的行为。

类似的逻辑也适用于`@Provides`方法：

*   注入`C`将始终返回相同的`CImpl`实例。
*   注入每次`CImpl`都会创建一个新的，除非没有可注入的公共零参数构造函数，否则注入将失败。`CImpl``CImpl`
*   注入`D`将始终返回相同的`DImpl`实例。
*   Injecting`DImpl`每次都会返回一个新实例，并且每个实例都与`D`.
*   注入每次`E`都会返回相同的实例。`EImpl`
*   注入`EImpl`还将检索相同的实例`E`注入。

这提供了一些灵活性。想象一个假设`Cache`，它保留了一定数量的最近检索到的对象，这些对象是您想要拥有的`@User Cache`并且`@Product Cache`都是可注入的。如果你`bind(Cache.class).in(Singleton.class)`是，你将在对象之间共享一个缓存（以及任何裸`Cache`注入），而如果你是，`bind(Cache.class).annotatedWith(User.class).to(Cache.class).in(Singleton.class)`那么带注释的键将保留在单例范围内，并且每种对象类型都将拥有自己的缓存。

# javascript - Python http服务器上传多个文件

> ID：14781478
> 
> 赞同：0
> 
> 时间：2013-02-08T21:14:46.533
> 
> 标签：javascript, python, http, simplehttpserver

我正在使用我在下面链接到的 simplehttpwithupload.py 脚本来托管一个简单的 http 服务器，人们可以在其中向我上传文件。有没有办法修改源代码，以便一次选择多个文件进行上传？因此，当“选择文件”对话框出现时，用户可以单击/shift单击并选择几个文件，然后将其上传。

[https://www.dropbox.com/s/wshzyseignnz78x/simplehttpwithupload.py](https://www.dropbox.com/s/wshzyseignnz78x/simplehttpwithupload.py)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:30:31.460

> 有没有办法修改源代码，以便一次选择多个文件进行上传？因此，当“选择文件”对话框出现时，用户可以单击/shift单击并选择几个文件

我很确定没有简单的方法。事情可能已经有所改善，但是当我在一两年前研究这个问题时，唯一能完全满足您的需求的解决方案是基于 Flash 的。问题是文件选择对话框在客户端，浏览器不直接支持多文件选择。

有一个基于 JavaScript 的下载多个文件的解决方案，但它与您的要求不完全匹配。有关说明，请参阅[使用单个文件元素上传多个文件](http://the-stickman.com/web-development/javascript/upload-multiple-files-with-a-single-file-element/)，以及[多个文件上传器：Mootools 版本](http://the-stickman.com/web-development/javascript/multiple-file-uploader-mootools-version/)以获得更高版本的更漂亮的版本。

主要思想是：

> 您只能将文件上传信息存储在文件上传元素 () 中，每个要上传的文件始终需要一个元素。
> 
> 选择文件后隐藏文件元素实际上是一件相对简单的事情，并在其位置添加一个新的（空的）元素。

要将 JavaScript 解决方案应用于`simplehttpwithupload.py`，您必须重写该`list_directory`函数。

# java - 读取文件中的 int 时出现错误 NoSuchElementException

> ID：14781482
> 
> 赞同：0
> 
> 时间：2013-02-08T21:15:12.007
> 
> 标签：java, error-handling, int

```
import java.util.*;
import java.io.*;

public class PayrollDemo{
    public static void main(String[]args) throws FileNotFoundException {
        Scanner input = new Scanner("Output.txt");
        Employee employee = readEmployee(input);  // <------ error here
        input.useDelimiter("\t");
        while(input.hasNext())
        {
            readEmployee(input);
            printDetail(employee);
        }
        input.close();
    }

    public static Employee readEmployee(Scanner s) 
    {
        String name = s.next();
        int id = s.nextInt();     // <------ error here
        double hourlyPayRate = s.nextDouble();
        double hoursWorked = s.nextDouble();
        Employee emp = new Employee(name, id);
        emp.SethourlyPayRate(hourlyPayRate);
        emp.SethoursWorked(hoursWorked);
        return emp;
    }   

    public static void printDetail(Employee e)
    {
        System.out.printf(e.getName()+ "    " + e.getId()+ "    " + e.GethourlyPayRate()+ " " + e.GethoursWorked()+ "   " +e.GetGrossPay());
    }
} 
```

我的代码没有从 Scanner 中读取 int，而是返回一条消息：NoSuchElementException。并且错误还指向Employee员工readEmployee（输入）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:16:20.233

执行时您的文件中似乎没有任何可用元素`s.nextInt()`

当您`next()`调用时`Scanner`，最好使用 . 检查元素是否可用`hasNext()`。

例子：

```
if(s.hasNextInt())   //while (or) if or whatever you want to use.
{
 int id = s.nextInt(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:18:10.040

在检查输入是否存在之前，切勿读取它。使用`Scanner#hasNextXXX`前使用方法`Scanner#nextXXX`。此外，每当您使用`Scanner.next()`, or `Scanner#nextInt`or`Scanner#nextDouble`方法时，都会留下一个未读取的换行符，因此您需要使用对 . 的空白调用来使用它`Scanner#next()`。

因此，将`public static Employee readEmployee(Scanner s)`方法的前 4 行替换为：

```
// Use conditional operator to test for any available input. 
// If no input is available, just give a default from your side.
String name = s.hasNext() ? s.next() : "";
s.next();
int id = s.hasNextInt() ? s.nextInt(): 0;     // <------ error here
s.next();
double hourlyPayRate = s.hasNextDouble() ? s.nextDouble(): 0.0;
s.next();
double hoursWorked = s.hasNextDouble() ? s.nextDouble(): 0.0;
s.next(); 
```

# java - 在 REST 服务中使用 ContainerResponse 过滤器时，GET 工作但 POST 不工作？

> ID：14781484
> 
> 赞同：1
> 
> 时间：2013-02-08T21:15:21.527
> 
> 标签：java, javascript, ajax, rest, same-origin-policy

我开始将我的软件从 Primefaces 更改为 HTML5 客户端 - 服务器解决方案。

问题：同源策略在使用 POST 时失败，但在使用 GET 时有效。

**网络服务**

```
@POST
@Override
@Consumes({"application/xml", "application/json"})
public void create(Users entity) {
    super.create(entity);
}

@GET
@Override
@Produces({"application/xml", "application/json"})
public List<Users> findAll() {
    return super.findAll();
} 
```

**筛选**

```
public class CrossOriginResourceSharingFilter implements ContainerResponseFilter {

public ContainerResponse filter(ContainerRequest request, ContainerResponse response) {
    response.getHttpHeaders().putSingle("Access-Control-Allow-Origin", "*");
    response.getHttpHeaders().putSingle("Access-Control-Allow-Methods", "GET, POST, PUT, DELETE");
    response.getHttpHeaders().putSingle("Access-Control-Allow-Headers", "content-type");
    return response;
} 
```

}

**WEB.XML**

```
<init-param>
        <param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
        <param-value>entity.CrossOriginResourceSharingFilter</param-value>
    </init-param> 
```

**客户**

```
 <form id="register-form"> 

                    <div class="register-form-block">
                        <input type="text" value='Your first name' name="firstName" id="firstName"/>
                    </div> 

                    <div class="register-form-block">
                        <input type="text" value='Your surname' name="lastName" id="lastName" onclick="this.value = ('')" />
                    </div>

                    <div class="register-form-block">
                        <input type="text" value='Username' name="username" id="username" onclick="this.value = ('')"/>
                    </div>
                    <div class="register-form-block">
                        <input type="password" value='Password' name="password" id="password" onclick="this.value = ('')"/>
                    </div>
                    <div class="register-form-block">
                        <input type="password" value='Password again' name="passwordagain" onclick="this.value = ('')"/>
                    </div>

                    <button type="submit" class="btn btn-primary" id="btnAddUser" onclick="foo()">Register</button>

                </form>
<script>
       function foo(){

    alert('Button pressed');

        $.ajax({
            type: 'POST',
            contentType: 'application/json',
            url: 'http://127.0.0.1:8080/testsoft/webresources/entity.users/',
            dataType: "json",
            data: formToJSON(),
            success: function(data, textStatus, jqXHR) {
                alert('User created successfully');

            },
            error: function(jqXHR, textStatus, errorThrown) {
                alert('addUser error: ' + textStatus +' ERROR:'+ errorThrown);
            }
        });
    };

        function formToJSON() {
        alert($('#username').val());
                return JSON.stringify({
                        "username": $('#username').val(),
                        "firstName": $('#firstName').val(),
                        "lastName": $('#lastName').val(),
                        "password": $('#password').val(),

                    });
        }
    </script> 
```

**错误**

```
 Failed to load resource: the server responded with a status of 500 (Internal Server Error) (22:49:54:618 | error, network)
  at http://localhost:8080/testsoft/webresources/entity.users/
XMLHttpRequest cannot load http://localhost:8080/testsoft/webresources/entity.users/. Origin http://localhost:8383 is not allowed by Access-Control-Allow-Origin. (22:49:54:618 | error, javascript) 
```

**另一个解决方案不起作用，根本没有错误消息**

```
function foo(){

    alert('Button pressed');
        console.log('#####################addUser################################');

        $.ajax({
            type: "POST",
            contentType: "application/json",
            url: "http://127.0.0.1:8080/testsoft/webresources/entity.users/",
            dataType: "json",
            data: {"username":"UllaUser","password":"testpwd","firstName":"Unto","lastName":"lastnameson","nickName":null,"isAdmin":false,"isCustomer":false,"isGuest":false,"isActive":true,"isInvemailsent":false,"isInvCardSent":null,"inSaveDateSent":false,"isThankCardSent":false,"weddingAsUser":false,"hasGuestUsers":false,"userRole":null,"email":null,"createDate":null,"turnout":null,"lastUpdated":1360240740000,"secretQuestion":null,"secretAnswer":null,"weddingWeddingId":null,"languageLanguageId":null,"invitationInvitationId":null,"emailEmailId":null,"addressAddressId":null},

        success: function(data){  

    // we have the response  
            alert("Server said:\n '" + data.username + "'");

            },
            error: function(data) {

    alert('addUser error: ' + data.username);
            }
        });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:04:35.430

这可能是因为某些浏览器（如 chrome）沙箱`localhost`。尝试插入您的 ip 而不是 localhost，看看是否有任何作用。

# websphere-portal - RAD 8.5 - 没有可用的 Portlet 项目选项

> ID：14781490
> 
> 赞同：5
> 
> 时间：2013-02-08T21:15:32.277
> 
> 标签：websphere-portal, ibm-rad

刚刚安装了 RAD 8.5 的试用版，但我没有看到任何创建 Portlet 项目的选项。

我错过了什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T15:21:25.707

如果功能不存在，您还可以通过转到 windows/preferences/capabilities 添加功能。单击高级。展开 Web Developer(advanced) 并启用 Portal Development

# c++ - 防止模板参数上的 ADL

> ID：14781492
> 
> 赞同：4
> 
> 时间：2013-02-08T21:15:48.157
> 
> 标签：c++, templates

我目前有一个采用一系列类型的类模板。每种类型都可能需要用类本身来实例化。我目前拥有的是这样的：

```
template <typename... Types>
struct TypeList; // Not defined

struct Placeholder; // Not defined

template <typename Types, typename AnotherType = Default>
class MyClass
{
    // ...
}; 
```

然后你可以像这样使用它：

```
typedef MyClass<TypeList<Container1<Placeholder>, Container2<std::string,
        Placeholder>, OtherType>, OptionalType> MyTypedef;
MyTypedef my_object; 
```

`MyClass`将`Placeholder`用自己替换外观，使用结果类型，一切都很好。

当我尝试执行以下任一操作时会出现问题：

```
MyTypedef *my_ptr = &my_object;
my_free_function(my_object); 
```

这两者都会导致编译器错误，因为编译器会尝试实例化`Container1<Placeholder>`并`Container2<std::string, Placeholder>`执行参数相关查找 (ADL)，而使用 的实例化`Placeholder`本身会失败。

我知道可以通过执行以下操作来避免 ADL，例如，

```
MyTypedef *my_ptr = std::addressof(my_object);
(my_free_function)(my_object); 
```

但是，我不想让用户`MyClass`不得不不断地抑制 ADL。是否有另一种直接的方法让用户提供类型列表而不将这些类型用于 ADL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:02:23.640

好的，我让一切正常。诀窍是直接使用依赖类型而不是使用模板。我的最终解决方案是按如下方式定义 TypeList：

```
template <typename... Types>
struct TypeList
{
private:
    struct Holder
    {
    private:
        typedef TypeList<Types...> InnerTypeList;
        template <typename Types, typename AnotherType>
        friend class MyClass;
    };
public:
    typedef Holder type;
}; 
```

然后，MyClass 的用户可以做

```
typedef MyClass<TypeList<Container1<Placeholder>, Container2<std::string,
        Placeholder>::type, OtherType>, OptionalType> MyTypedef;
MyTypedef my_object; 
```

注意添加 '::type'

最后，在 MyClass 中，我替换了

```
typedef typename SubstituteType<Types, Placeholder, MyClass>::type InternalTypeList; 
```

和

```
typedef typename SubstituteType<Types::InnerTypeList, Placeholder, MyClass>::type
        InternalTypeList; 
```

给我`InternalTypeList`和以前一样的类型。

因为依赖类型`Holder`没有它自己的模板参数，所以编译器不必为 ADL 目的实例化占位符类型，并且一切正常。

# c - 给指针char赋值？

> ID：14781493
> 
> 赞同：0
> 
> 时间：2013-02-08T21:15:48.483
> 
> 标签：c, struct, strncpy

```
struct group {
    char *name;
    struct user *users;
    struct xct *xcts;
    struct group *next;
};

int add_group(Group **group_list_ptr, const char *group_name) {
printf("%p\n",group_list_ptr);
*group_list_ptr = malloc(sizeof(struct group));

printf("%p\n",*group_list_ptr);
printf("%p\n",(*group_list_ptr)->name);
(*group_list_ptr)->name = malloc(sizeof(*group_name));
printf("%p\n",(*group_list_ptr)->name);
strncpy((*group_list_ptr)->(*name), "hello", strlen(*group_name));
//printf("%s\n",(*group_list_ptr)->name);
return 0; 
```

}

我如何为 *name 赋值。在为结构分配内存后，我为名称分配内存

```
strncpy((*group_list_ptr)->(*name), "hello", strlen(*group_name)); 
```

我正在用“hello”对其进行测试，但我想复制 const char *group_name。

我收到错误

```
lists.c:24:32: error: expected identifier before ‘(’ token
lists.c:24:32: error: too few arguments to function ‘strncpy’ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:20:42.847

```
strncpy((*group_list_ptr)->name, "hello", strlen("hello")); 
```

您不想取消引用 name 成员，这是编译器错误。

您也不能使用 sizeof 来获取字符串的长度。使用 strlen()。

对于 strcpy()，最后一个参数是您要复制的字符串的长度。确保它小于目标缓冲区！

# jquery - Joomla 1.5 如何隐藏我的网站源代码？

> ID：14781497
> 
> 赞同：1
> 
> 时间：2013-02-08T21:16:04.827
> 
> 标签：jquery, xcode, joomla, obfuscation

如何向用户隐藏我网站的源代码？示例在这里（我们不能单击鼠标右键）： http: [//www.internetine-tv.narod.ru/](http://www.internetine-tv.narod.ru/)

或者如果它是不可能的，也许我可以隐藏部分代码？如果我想隐藏我的嵌入电视频道的代码，我可以这样做吗？现在每个人都可以在源代码中找到它。谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:18:18.520

你不能。你能做的最好的就是混淆它。例如，在 Chrome 中，在您提供的网站上，我可以执行`CTRL`+`U`来查看源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:19:46.200

你正在寻找禁用上下文菜单，看看这个 Q 已经在 SO - [How to disable right-click context-menu in javascript](https://stackoverflow.com/questions/381795/how-to-disable-right-click-context-menu-in-javascript)

就像这样，您发送到浏览器的任何信息，例如嵌入代码，都将被用户查看。你对此无能为力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:23:10.660

您不能隐藏 (x)html、css 或 javascript 源代码。你可以隐藏你的python/php/asp代码（只是不允许目录遍历）即，您生成页面的所有 php 代码都不会显示您可以拥有哪些代码，如果您想混淆代码添加垃圾数据，这是一件令人讨厌的事情，但这是您可以做的最接近的事情来隐藏您的 html 代码。高温高压

# sql - Oracle 复杂字符串替换

> ID：14781499
> 
> 赞同：1
> 
> 时间：2013-02-08T21:16:14.660
> 
> 标签：sql, oracle, plsql, oracle10g

我有下表

```
mytable 
type         | id       | name           | formula  
"simple"     | 1        | "COUNT"        | "<1>"  
"simple"     | 2        | "DISTINCT"     | "<2>"  
"simple"     | 3        | "mycol"        | "<3>"  
"complex"    | 4        | null           | "<1>(<2> <3>)" 
```

现在我想阅读此表并添加一个替换公式字符串的附加列。对于 id 4，我需要：`"COUNT(DISTINCT mycol)"`
知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T01:43:21.603

在 Oracle 11 中，它可能如下所示：

```
select
   type, id, name, formula, value
from 
   mytable
   left join (
      select
         id_complex,
         listagg(decode(pos, 2, name, part)) within group (order by occ, pos) as value
      from 
         (
            select
               id_complex, occ, pos,
               regexp_replace(pair, '^(.*?)(<.*?>)$', '\'||pos) as part
            from
               (
                  select
                     id as id_complex,
                     occ,
                     regexp_substr(formula||'<>', '.*?<.*?>', 1, occ) as pair
                  from
                     (
                        select level as occ from dual
                        connect by level <= (select max(length(formula)) from mytable)
                     ),
                     mytable
                  where type = 'complex'
               ),
               (select level as pos from dual connect by level <= 2)
         )
         left join mytable on part = formula and type = 'simple'
      group by id_complex
   ) on id = id_complex
order by id 
```

[SQL小提琴](http://www.sqlfiddle.com/#!4/f0cf4/18)

# java - 选择选项时 ArrayList 到字符序列的转换问题

> ID：14781501
> 
> 赞同：0
> 
> 时间：2013-02-08T21:16:16.770
> 
> 标签：java, android, arraylist, charsequence

我从数据库中填充了一个 alerttdialog。我将这些值存储在 中`arrayList`，将它们转换为字符序列列表，然后将它们设置为我的警报对话框构建器。如图所示：

这是我的数据库中填充的“文本模板”选项的屏幕截图：

![在此处输入图像描述](../Images/542d86434de79f1f2e9ecdaf0b923f70.png)

例如，当我单击其中一个选项时`Call me`。它在指定的编辑文本中按应有的方式显示。如果我单击其他选项之一，例如“给我发电子邮件”，则会忽略此选项，只有我的第一个“如果”选项`Call me`。将如图所示工作：

![在此处输入图像描述](../Images/cb6059e290d1cef69a7ddd8bce6d00ae.png)

这让我相信由于某种原因只`Call me`被添加到我的字符序列数组中，但我不知道为什么。这是我的完整课程。我在`longOnClick`方法上遇到了这个问题。我在下面的代码中标记了这个问题区域：

```
 package com.example.flybase2;

import java.util.ArrayList;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.app.AlertDialog.Builder;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.text.Editable;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnLongClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class ContactsEmail extends Activity implements OnClickListener, OnLongClickListener{

String emailPassed;
String emailAdd;
String emailSub;
String emailMess;
EditText setEmailAddress;
EditText setEmailSubject;
EditText setEmailMessage;
Button btnSendEmail;
int i;
CharSequence[] items;
DBHandlerTempComms addTemp = new DBHandlerTempComms(this, null, null);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

setContentView(R.layout.emaillayout);

Bundle extras = getIntent().getExtras(); 
if (extras != null) {
    emailPassed = extras.getString("passedEmailAdd"); 
}

setEmailAddress = (EditText) findViewById (R.id.inputEmailAddress);
setEmailAddress.setText(emailPassed);
setEmailSubject = (EditText) findViewById (R.id.inputEmailSubject);
setEmailMessage = (EditText) findViewById (R.id.inputEmailMessage);

btnSendEmail = (Button)findViewById(R.id.btnSendEmail);

btnSendEmail.setOnClickListener(this);

setEmailMessage.setOnLongClickListener(this);

}

@Override
public void onClick(View sendEmailClick) {

    emailAdd = setEmailAddress.getText().toString();
    emailSub = setEmailSubject.getText().toString();
    emailMess = setEmailMessage.getText().toString();

    Intent sendEmailIntent = new Intent(Intent.ACTION_SEND); 
    sendEmailIntent.setType("message/rfc822");
       sendEmailIntent.putExtra(Intent.EXTRA_EMAIL,new String[] {emailAdd});  
       sendEmailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSub); 
       sendEmailIntent.putExtra(Intent.EXTRA_TEXT, emailMess); 
       startActivity(Intent.createChooser(sendEmailIntent, "Send mail..."));
       finish();

}

 *********************ISSUE AREA********************
        @Override
        public boolean onLongClick(View v) {

            addTemp.open();
            Cursor getTemps = addTemp.setList();
            addTemp.close();

            if (getTemps != null) {
                String[] from = new String[getTemps.getCount()];
                startManagingCursor(getTemps);
                if (getTemps.moveToFirst()) {
                    int count = 0;
                    do {
                        String userName = getTemps.getString(1);
                        from[count] = userName;
                        count++;
                    } while (getTemps.moveToNext());
                }

                ArrayList<String> content = new ArrayList<String>();  

               for (int a = 0; a < from.length; a ++)
               { 

               content.add(from[a]);              

               }           
               items = content.toArray(new CharSequence[content.size()]);
            }

            Builder alertDialogBuilder = new AlertDialog.Builder(ContactsEmail.this);

            alertDialogBuilder.setTitle("Message Templates:");

            alertDialogBuilder.setItems(items, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int item) {

                    if (items[item].equals("Call me.")) {

                        setEmailMessage.setText(items[item]);

                    }

                    else if (items[item].equals("Text me.")) {

                        setEmailMessage.setText(items[item]);

                    }

                    else if (items[item].equals("Leaving the house now.")) {

                        setEmailMessage.setText(items[item]);

                    }

                    else if (items[item].equals("Leaving work now.")) {

                        setEmailMessage.setText(items[item]);

                    }

                    else if (items[item].equals("Create New Template +")) {

                        AlertDialog.Builder builder = new AlertDialog.Builder(ContactsEmail.this);
                        builder.setTitle("Type New Template:");

                                                final EditText input = new EditText(ContactsEmail.this);

                                                builder.setView(input);

                                                builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
                                                public void onClick(DialogInterface dialog, int whichButton) {
                                                  Editable value = input.getText();

                                                  setEmailMessage.setText(value);

                                                  String templateValue = (String)value.toString();
                                                  addTemp.open();
                                                  addTemp.insertTemplate(templateValue);
                                                  addTemp.close();

                                                  }
                                                });

                                                builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
                                                  public void onClick(DialogInterface dialog, int whichButton) {

                                                  }
                                                });

                                                builder.show();

                    }

                }
               });

            alertDialogBuilder.show();

            return true;
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:43:14.623

有点尴尬，但我刚刚意识到我有不同的字符串将我的 IF 与存储在字符序列中的字符串进行比较，所以它现在可以工作了！

# compression - 协助压缩大型自定义数据文件的方法

> ID：14781504
> 
> 赞同：1
> 
> 时间：2013-02-08T21:16:25.833
> 
> 标签：compression, data-compression, lossless-compression

我正在寻求有关如何更好地帮助压缩工具获得更好的无损压缩的建议。

我有许多大文件（>100meg），其中包含来自各种传感器的传感器读数。来自各种传感器的样本具有不同的位大小（16 位、24 位、32 位）和不同的频率（70Hz 到 250Hz）。使用我知道的常用压缩器（zip、gzip、bzip2），我可以获得大约 70% 的原始文件大小的压缩文件。在我看来，如果我可以告诉压缩工具这些字节是这种类型的样本，而这些字节是另一种样本类型，可能会有压缩增益，但我不知道有什么可以让我这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:36:41.657

第 0 步是以二进制编码数据。（两个字节中的 16 位，三个字节中的 24 位等）我希望您已经这样做了。

第一步是使用差异。根据您的描述，我敢打赌，连续的值变化不大。因此差异很小并且有许多前导零位。尝试一下，然后使用通用压缩器。

第 2 步是使用可变长度整数编码。每个字节的高位决定了每个整数的跨度。整数的第一个字节的高位始终为零。同一整数的所有后续字节的高位为 1。从每个字节的低七位构建整数。（我将第一个字节设为最低有效位，但您也可以按最高有效位顺序进行。）这会将您的微小差异编码在一个字节中。此外，此编码将处理样本中的任意数量的位，这在您的应用程序中很方便。试试这个，然后是通用压缩机。

第 3 步可能会更详细地分析波形以获得更好的预测器。第 1 步只是使用最后一个值作为预测变量。您可以将前*n 个*值的更复杂函数用作下一个值的预测器。这是否有帮助在很大程度上取决于您的数据。

# linux - Linux/Unix shell 脚本中的冒泡排序

> ID：14781505
> 
> 赞同：1
> 
> 时间：2013-02-08T21:16:29.900
> 
> 标签：linux, shell, unix, sorting, bubble-sort

我正在尝试执行冒泡排序是 Unix shell 脚本。为什么我的代码不起作用？

```
a=(10 8 20 25 12)

for ((i=0;i<5;i++))
do
 for((j=0;j<5;j++))
 do
if ((${a[j]} > ${a[$((j+1))]}))
then
  v=${a[$j]}
  a[$j]=${a[$((j+1))]}
  a[$((j+1))]=$v
    fi
 done
done
    echo ${a[*]}
    echo "end..." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:36:05.660

我想这是家庭作业。因此我不给出代码，只是指出代码中的错误：

`for((j=0;j<5;j++))`然后阅读`a[j+1]`，这将是问题，因为何时`j=4`，`j+1`不存在

解决这个问题，您的程序将排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-09T11:17:23.730

试试这个：

```
echo "Enter size of array";
read  n; #get the size of array from user.
echo "Enter the array";
read -a arr;  #get the array form user eg: 2 3 4 5 6
echo "Orignal array is: ${arr[*]}"; #print orignal array

flag=1;
for (( i = 0; i < $n-1; i++ ))
do
    flag=0;
    for ((j = 0; j < $n-1-$i; j++ ))
    do
        if [[ ${arr[$j]} -gt ${arr[$j+1]} ]]
        then
            temp=${arr[$j]};
            arr[$j]=${arr[$j+1]};
            arr[$j+1]=$temp;
            flag=1;
        fi
    done

    if [[ $flag -eq 0 ]]; then
        break;
    fi

done
echo "Final sorted Array is ${arr[*]}"; 
```

# c# - 如何在 ScriptScope 上设置功能

> ID：14781506
> 
> 赞同：0
> 
> 时间：2013-02-08T21:16:48.443
> 
> 标签：c#, .net, clr, ironruby

如何在 IronRuby 下的 ScriptScope 上设置委托？我尝试了上面的代码，但在调用函数时出现了 ArgumentException。

```
scope.SetVariable("import", new Action<string>(DSLImport));

import "Data" 
```

另外，如何使用上述代码将块作为回调发送到 C# 代码？

```
import "Data" do |f|
    f.foo = false
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:29:44.470

我找到了一种可能不是最好但有效的方法。它是 ScriptScope 的扩展方法：

```
public static void SetMethod(this ScriptScope scope, string name, Delegate method)
{
    scope.SetVariable(name + "__delegate", method);
    scope.Engine.Execute("def " + name + "(*args, &block)\nargs.push block if block != nil\n" + name + "__delegate.invoke(*args)\nend", scope);
} 
```

# emacs - emacs 24 - 镜像 - 在缓冲区之间镜像文件

> ID：14781508
> 
> 赞同：2
> 
> 时间：2013-02-08T21:16:55.160
> 
> 标签：emacs, dired

我是 EMACS 的新手，一直在尝试 image-dired 并尝试使此功能工作“跟踪缩略图缓冲区中的移动并镜像 dired 缓冲区中的这些移动，反之亦然”。

因此，当我通过图像目录缩略图缓冲区时它可以工作（它由目录缓冲区中相应文件上的光标反映）。但是当我移动通过 dired 缓冲区时，image-dired-thumbnail 缓冲区上的相应缩略图不会突出显示。

最初我怀疑“image-dired-track-movement”变量，但很快就放弃了这个想法，因为它正在反映 dired 缓冲区上缩略图的变化。

任何指示都会有所帮助！

（抱歉想发布一张图片来显示我的问题，但显然我没有足够的声誉：P）

# plsql - Pl/SQL - 提取文本并在重复时合并

> ID：14781517
> 
> 赞同：1
> 
> 时间：2013-02-08T21:17:37.560
> 
> 标签：plsql, oracle10g

甲骨文 10g

我的要求是：

1.  选择每个部门
2.  选择每个部门的每个单独项目（每个项目都有自己的行，但如果重复则合并）
3.  选择每个不同部门和项目的每种颜色（如果重复，请选择最小的数字）
4.  选择每个不同部门和项目的每个用户（如果有多个则聚合）

数据库数据

```
Department    Item_List                  Color       User
Research      Item 1                    1\. Blue      John
Research      Item 1;Item 2             2\. Blue      Mike
Research      Item 1;Item 2; Item 3     1\. Red       Steve
Research      Item 2                    1\. Purple    John
Research      Item 1;Item 4             2\. Red       Bill
Ops           Item 1;Item 2             3\. Silver    John
Ops           Item 1;Item 3             3\. Silver    Mike
Ops           Item 4                    4\. Yellow    Mark 
```

预期成绩

```
Department    Item_List         Color         User
Research        Item 1         1\. Blue       John, Mike
Research        Item 2         1\. Blue       Mike
Research        Item 1         1\. Red        Steve, Bill
Research        Item 2         1\. Red        Steve
Research        Item 3         1\. Red        Steve
Research        Item 2         1\. Purple     John
Research        Item 4         1\. Red        Bill
Ops             Item 1         3\. Silver     John, Mike
Ops             Item 2         3\. Silver     John
Ops             Item 3         3 Silver      Mike
Ops             Item 4         4\. Yellow     Mark 
```

我正在使用以下 SQL，但它不起作用：

```
with data as 
(
select
DEPARTMENT, 
ITEM_LIST,
(length(ITEM_LIST)-length(replace(ITEM_LIST,';','')))+1 cnt,
MIN(Color) as Color,
wm_concat(USER) as USER
from DataBase_Table
Group by 
DEPARTMENT, 
ITEM_LIST
)
select 
DEPARTMENT
ITEM_LIST,
Color,
User
from
(
select distinct 
DEPARTMENT,
ltrim(regexp_substr(ITEM_LIST,'[^;]+',1,level)) ITEM_LIST, 
Color,
level,
User
from data
connect by level <= cnt
order by DEPARTMENT
)
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:10:12.220

```
with 
   t1 as (
      select 
         department, 
         trim(regexp_substr(item_list, '[^;]+', 1, occ)) as item,
         to_number(regexp_substr(color, '^\d+')) as color_no, 
         regexp_replace(color, '^\d+(.*)$', '\1') as color_name, 
         user_
      from 
         (
            select level as occ from dual 
            connect by level <= (select max(length(item_list)) from source)
         ), 
         source
      where regexp_substr(item_list, '[^;]+', 1, occ) is not null
   )
select 
   department, 
   item,
   color, 
   listagg(user_, ',') within group (order by user_)
from
   (
      select 
         min(color_no)||color_name as color, 
         color_name
      from t1
      group by color_name
   ) 
   natural join t1 
group by 
   department, 
   item,
   color
order by 1 desc, 2, 3 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/9fa33/28)

在 Oracle 10 中，您应该使用
`wm_concat(distinct user_)`
而不是
`listagg(user_, ',') within group (order by user_)`

# php - 实现工厂模式的正确方法是什么？

> ID：14781518
> 
> 赞同：4
> 
> 时间：2013-02-08T21:17:37.947
> 
> 标签：php, design-patterns, factory

我只是想知道这是否是在 PHP 中创建对象和实现工厂模式的正确方法。我知道我们有工厂方法模式和抽象工厂模式，但我们是否有类似以下 [http://noondreams.com/shared/data/pages/images/Factory.png](http://noondreams.com/shared/data/pages/images/Factory.png)的模式？

```
class Factory
{
 public function make($format)
 {
    switch($format)
    {
        case Source::Assocs:
            return new \Source\Formats\Assocs();
        case Source::XML
            return new \Source\Formats\XML();
        //Some other formats
    }
 }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T21:26:53.393

不，这不是真正的工厂模式。工厂模式看起来更像这样：

```
<?php
abstract class File
{
    public static function createFromFile($filename)
    {
        $extension = /* get file extension */;

        switch ($extension)
        {
            case 'xml':
                return new XmlFile($filename);
                break;
            case 'php':
                return new PhpFile($filename);
                break;
        }

        throw new \InvalidArgumentException();
    }
}

class XmlFile extends File
{

}

class PhpFile extends File
{

} 
```

请注意抽象类如何创建具体类的实例，这些实例扩展了它，而用户不必担心它可能返回的各种类型。

**注意**：在实际场景中，您不会使用 switch 语句，但可能会使用反射或各种其他技术，因为抽象类不会知道它的所有子类。

这可能看起来更像这样：

```
<?php
abstract class File
{
    public static function createFromFile($filename)
    {
        $extension = /* get file extension */;
        $extension = ucfirst($extension);

        $reflection = new ReflectionClass($extension . 'File');
        return $reflection->newInstanceArgs(array($filename));
    }
}

class XmlFile extends File
{

}

class PhpFile extends File
{

} 
```

# javascript - Dojo FilteringSelect 仅触发一次 OnChange 事件

> ID：14781523
> 
> 赞同：2
> 
> 时间：2013-02-08T21:18:00.957
> 
> 标签：javascript, dojo, dom-events, dijit.form

我有一个以编程方式创建的`dojo.form.FilteringSelect`小部件。`dojo.Dialog`我第`onChange`一次`FilteringSelect`选择并进入`FilteringSelect`. 以后每次我选择新的东西时，该`onChange`事件都不会触发。

`onChange`在为我的语句提供参数时，我尝试过声明该属性`new FilteringSelect`。我试过使用`dojo.connect`. 我试过了`mySelectDijit.on`。都有相同的效果。

```
var select = new dijit.form.FilteringSelect({
    id : "fields-select-" + expNum,
    store : store,
    required : false,
    intermediateChanges : true
}, fieldinput);

dojo.connect(select, 'onChange', LoadOperatorValue); 
```

`onChange`每次更改时如何触发事件`FilteringSelect`？

**更新：**

我已经添加了相关代码。此代码基于 ArcGIS Javascript API v3.3，其中包括 Dojo。

```
dojo.require("dijit.Dialog");
dojo.require("dijit.form.FilteringSelect");
dojo.require("dojo.store.Memory");
dojo.require("dijit.form.MultiSelect");
dojo.require("dijit.form.TextBox");
dojo.require("dijit.form.Textarea");
dojo.require("dijit.form.NumberSpinner");
dojo.require("dijit.form.DateTextBox");

var expNum = 1;
var queryDiv;
var layer;
var dialog;

function CreateDialog(lyr) {

    layer = lyr;

    queryDiv = dojo.create("div", {
        id : "queryDiv"
    });

    var buttonInput = dojo.create("button", {
        id : "button"
    }, queryDiv);

    var button = new dijit.form.Button({
        id : "addExpression",
        label : "Add Expression",
        onClick : function() {
            BuildExpression(layer);
        }
    }, buttonInput);

    BuildExpression(layer)

    dialog = new dijit.Dialog({
        title : "Query: " + layer.layerObject.name,
        content : queryDiv,
        style : "width: 600px"
    });

    dialog.show();
}

function BuildExpression(layer) {

    var expDiv = dojo.create("div", {
        class : "expression",
        id : "expression-" + expNum
    }, queryDiv);

    var filterDiv = dojo.create("div", {
        class : "filter",
        id : "filter-" + expNum
    }, expDiv);

    var fieldSpan = dojo.create("span", {
        id : "field-" + expNum,
        class : "field"
    }, filterDiv);

    var operatorSpan = dojo.create("span", {
        id : "operator-" + expNum,
        class : "operator"
    }, filterDiv);

    var valueSpan = dojo.create("span", {
        id : "value-" + expNum,
        class : "value"
    }, filterDiv);

    var removeSpan = dojo.create("span", {
        id : "remove-" + expNum,
        class : "remove"
    }, filterDiv);

    var removeInput = dojo.create("button", {
        id : "button"
    }, removeSpan);

    var removeButton = new dijit.form.Button({
        id : "removeExpression" + expNum,
        label : "Remove",
        onClick : function() {
            dojo.destroy(expDiv);
        }
    }, removeInput);

    var fieldinput = dojo.create("input", {
        id : "field-input-" + expNum
    }, fieldSpan);

    var fields = [];
    dojo.forEach(layer.layerObject.fields, function(field, index) {
        if (index < layer.layerObject.infoTemplate.info.fieldInfos.length && layer.layerObject.infoTemplate.info.fieldInfos[index].visible == true) {
            field.operatorSpan = operatorSpan;
            field.valueSpan = valueSpan;
            fields.push({
                name : field.alias,
                id : field
            });
        }
    });

    var store = new dojo.store.Memory({
        data : fields
    });

    var select = new dijit.form.FilteringSelect({
        id : "fields-select-" + expNum,
        store : store,
        required : false,
        intermediateChanges : true
    }, fieldinput);

    dojo.connect(select, 'onChange', LoadOperatorValue);
    expNum++
}

function LoadOperatorValue(field) { debugger;
    dojo.empty(field.operatorSpan);
    dojo.empty(field.valueSpan);

    if ("domain" in field && "codedValues" in field.domain) {

        field.operatorSpan.innerHTML = "IS";

        var sel = dojo.create("select", {
            id : "multiselect-" + expNum
        }, field.valueSpan);

        dojo.forEach(field.domain.codedValues, function(cv, index) {
            dojo.create("option", {
                innerHTML : cv.name,
                value : cv.code
            }, sel);
        });

        var multiselect = new dijit.form.MultiSelect({}, sel);

    } else if (field.type == "esriFieldTypeString") {

        var operatorInput = dojo.create("input", {
            id : "operator-input"
        }, field.operatorSpan);

        var operators = [{
            name : "IS",
            id : " = "
        }, {
            name : "IS NOT",
            id : " <> "
        }, {
            name : "LIKE",
            id : " LIKE "
        }, {
            name : "NOT LIKE",
            id : " NOT LIKE "
        }];

        var opStore = new dojo.store.Memory({
            data : operators
        });

        var select = new dijit.form.FilteringSelect({
            id : "operator-select-" + expNum,
            store : opStore,
            required : false
        }, operatorInput);

        var valueInput = dojo.create("input", {
            id : "value-input"
        }, field.valueSpan);

        if (field.length < 50) {
            var textBox = new dijit.form.TextBox({
                id : "value-input-" + expNum
            }, valueInput);
        } else {
            var textBox = new dijit.form.Textarea({
                id : "value-input-" + expNum
            }, valueInput);
        }

    } else if (field.type == "esriFieldTypeDouble" || field.type == "esriFieldTypeSingle" || field.type == "esriFieldTypeInteger" || field.type == "esriFieldTypeSmallInteger") {

        var operatorInput = dojo.create("input", {
            id : "operator-input"
        }, field.operatorSpan);

        var operators = [{
            name : "=",
            id : " = "
        }, {
            name : "!=",
            id : " <> "
        }, {
            name : "<",
            id : " < "
        }, {
            name : "<=",
            id : " <= "
        }, {
            name : ">",
            id : " > "
        }, {
            name : ">=",
            id : " >= "
        }];

        var opStore = new dojo.store.Memory({
            data : operators
        });

        var select = new dijit.form.FilteringSelect({
            id : "operator-select-" + expNum,
            store : opStore,
            required : false
        }, operatorInput);

        var valueInput = dojo.create("input", {
            id : "value-input"
        }, field.valueSpan);

        var constraints = {};

        if ("domain" in field && "range" in field.domain) {
            constraints.min = field.domain.range.min;
            constraints.max = field.domain.range.max;
        }

        if (field.type == "esriFieldTypeDouble" || field.type == "esriFieldTypeSingle") {
            constraints.places = 2;
        }

        var numberSpinner = new dijit.form.NumberSpinner({
            id : "value-input-" + expNum
        }, valueInput);

    } else if (field.type == "esriFieldTypeDate") {

        var operatorInput = dojo.create("input", {
            id : "operator-input"
        }, field.operatorSpan);

        var operators = [{
            name : "IS",
            id : " = "
        }, {
            name : "IS NOT",
            id : " <> "
        }, {
            name : "Before",
            id : " < "
        }, {
            name : "Before or IS",
            id : " <= "
        }, {
            name : "After",
            id : " > "
        }, {
            name : "After or IS",
            id : " >= "
        }];

        var opStore = new dojo.store.Memory({
            data : operators
        });

        var select = new dijit.form.FilteringSelect({
            id : "operator-select-" + expNum,
            store : opStore,
            required : false
        }, operatorInput);

        var valueInput = dojo.create("input", {
            id : "value-input"
        }, field.valueSpan);

        var dateTextBox = new dijit.form.DateTextBox({
            id : "value-input-" + expNum
        }, valueInput);

    } else {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:00:17.680

好吧，当我过去创建这些类型的小部件时，我已经完成了如下操作，它与您的几乎相同，但请注意 on change 处理程序...

```
var select = new dijit.form.FilteringSelect({
    id : "fields-select-" + expNum,
    store : store,
    required : false,
    onChange: function(value){
        //do something here
    }
}, fieldinput); 
```

*更新：通过重新阅读您的帖子，我可以看到您已经尝试过这种方法，我只是想我会把它留在答案中以供参考，因为它过去对我有用。*

更新

关于[dojo 1.8](http://dojotoolkit.org/)，可能值得考虑使用[dojo 的模板化小部件](http://dojotoolkit.org/documentation/tutorials/1.8/templated/)来帮助删除 javascript 中的许多程序化创建的元素。还值得阅读其他一些 dojo 教程，例如[使用 dijit 获得选择性](http://dojotoolkit.org/documentation/tutorials/1.8/selects/)、[自定义小部件](http://dojotoolkit.org/documentation/tutorials/1.8/recipes/custom_widget/)和[定义模块](http://dojotoolkit.org/documentation/tutorials/1.8/modules/)教程，它们将真正帮助您充分利用 dojo 小部件。“变得有选择性”的有过滤选择小部件。

很难说出为什么你的 onChange 事件只被调度一次。我真正能说的就是让您完全简化只有过滤选择小部件的所有内容，并确保您可以多次单独捕获 onChange 事件。然后开始重新集成其余代码。

对不起，我不能给你任何确切的答案，我会继续寻找。

更新

好的，我刚刚获取了您的代码并使用 dojo 1.8 在测试环境中运行，我不得不剥离层对象，用一个简单的数组替换它，但它似乎工作正常。我还使用定义将代码更改为模块（在[模块教程](http://dojotoolkit.org/documentation/tutorials/1.8/modules/)中进行了解释）。这是代码...

```
define(["dijit/Dialog",
        "dijit/form/FilteringSelect",
        "dojo/store/Memory",
        "dijit/form/MultiSelect",
        "dijit/form/TextBox",
        "dijit/form/Textarea",
        "dijit/form/NumberSpinner",
        "dijit/form/DateTextBox"],

    function (){

        var expNum = 1;
        var queryDiv;
        var layer;
        var dialog;

        function BuildExpression(layer) {

            var expDiv = dojo.create("div", {
                class : "expression",
                id : "expression-" + expNum
            }, queryDiv);

            var filterDiv = dojo.create("div", {
                class : "filter",
                id : "filter-" + expNum
            }, expDiv);

            var fieldSpan = dojo.create("span", {
                id : "field-" + expNum,
                class : "field"
            }, filterDiv);

            var operatorSpan = dojo.create("span", {
                id : "operator-" + expNum,
                class : "operator"
            }, filterDiv);

            var valueSpan = dojo.create("span", {
                id : "value-" + expNum,
                class : "value"
            }, filterDiv);

            var removeSpan = dojo.create("span", {
                id : "remove-" + expNum,
                class : "remove"
            }, filterDiv);

            var removeInput = dojo.create("button", {
                id : "button"
            }, removeSpan);

            var removeButton = new dijit.form.Button({
                id : "removeExpression" + expNum,
                label : "Remove",
                onClick : function() {
                    dojo.destroy(expDiv);
                }
            }, removeInput);

            var fieldinput = dojo.create("input", {
                id : "field-input-" + expNum
            }, fieldSpan);

            var fields = [{"name":"value1", "id":"v1"}, {"name":"value2", "id":"v2"}];
            //dojo.forEach(layer.layerObject.fields, function(field, index) {
            //    if (index < layer.layerObject.infoTemplate.info.fieldInfos.length && layer.layerObject.infoTemplate.info.fieldInfos[index].visible == true) {
            //        field.operatorSpan = operatorSpan;
            //        field.valueSpan = valueSpan;
            //        fields.push({
            //            name : field.alias,
            //            id : field
            //        });
            //    }
           // });

            var store = new dojo.store.Memory({
                data : fields
            });

            var select = new dijit.form.FilteringSelect({
                id : "fields-select-" + expNum,
                store : store,
                required : false,
                intermediateChanges : true
            }, fieldinput);

            dojo.connect(select, 'onChange', function(value){console.log(value)});
            expNum++
        }

        function LoadOperatorValue(field) { debugger;
            dojo.empty(field.operatorSpan);
            dojo.empty(field.valueSpan);

            if ("domain" in field && "codedValues" in field.domain) {

                field.operatorSpan.innerHTML = "IS";

                var sel = dojo.create("select", {
                    id : "multiselect-" + expNum
                }, field.valueSpan);

                dojo.forEach(field.domain.codedValues, function(cv, index) {
                    dojo.create("option", {
                        innerHTML : cv.name,
                        value : cv.code
                    }, sel);
                });

                var multiselect = new dijit.form.MultiSelect({}, sel);

            } else if (field.type == "esriFieldTypeString") {

                var operatorInput = dojo.create("input", {
                    id : "operator-input"
                }, field.operatorSpan);

                var operators = [{
                    name : "IS",
                    id : " = "
                }, {
                    name : "IS NOT",
                    id : " <> "
                }, {
                    name : "LIKE",
                    id : " LIKE "
                }, {
                    name : "NOT LIKE",
                    id : " NOT LIKE "
                }];

                var opStore = new dojo.store.Memory({
                    data : operators
                });

                var select = new dijit.form.FilteringSelect({
                    id : "operator-select-" + expNum,
                    store : opStore,
                    required : false
                }, operatorInput);

                var valueInput = dojo.create("input", {
                    id : "value-input"
                }, field.valueSpan);

                if (field.length < 50) {
                    var textBox = new dijit.form.TextBox({
                        id : "value-input-" + expNum
                    }, valueInput);
                } else {
                    var textBox = new dijit.form.Textarea({
                        id : "value-input-" + expNum
                    }, valueInput);
                }

            } else if (field.type == "esriFieldTypeDouble" || field.type == "esriFieldTypeSingle" || field.type == "esriFieldTypeInteger" || field.type == "esriFieldTypeSmallInteger") {

                var operatorInput = dojo.create("input", {
                    id : "operator-input"
                }, field.operatorSpan);

                var operators = [{
                    name : "=",
                    id : " = "
                }, {
                    name : "!=",
                    id : " <> "
                }, {
                    name : "<",
                    id : " < "
                }, {
                    name : "<=",
                    id : " <= "
                }, {
                    name : ">",
                    id : " > "
                }, {
                    name : ">=",
                    id : " >= "
                }];

                var opStore = new dojo.store.Memory({
                    data : operators
                });

                var select = new dijit.form.FilteringSelect({
                    id : "operator-select-" + expNum,
                    store : opStore,
                    required : false
                }, operatorInput);

                var valueInput = dojo.create("input", {
                    id : "value-input"
                }, field.valueSpan);

                var constraints = {};

                if ("domain" in field && "range" in field.domain) {
                    constraints.min = field.domain.range.min;
                    constraints.max = field.domain.range.max;
                }

                if (field.type == "esriFieldTypeDouble" || field.type == "esriFieldTypeSingle") {
                    constraints.places = 2;
                }

                var numberSpinner = new dijit.form.NumberSpinner({
                    id : "value-input-" + expNum
                }, valueInput);

            } else if (field.type == "esriFieldTypeDate") {

                var operatorInput = dojo.create("input", {
                    id : "operator-input"
                }, field.operatorSpan);

                var operators = [{
                    name : "IS",
                    id : " = "
                }, {
                    name : "IS NOT",
                    id : " <> "
                }, {
                    name : "Before",
                    id : " < "
                }, {
                    name : "Before or IS",
                    id : " <= "
                }, {
                    name : "After",
                    id : " > "
                }, {
                    name : "After or IS",
                    id : " >= "
                }];

                var opStore = new dojo.store.Memory({
                    data : operators
                });

                var select = new dijit.form.FilteringSelect({
                    id : "operator-select-" + expNum,
                    store : opStore,
                    required : false
                }, operatorInput);

                var valueInput = dojo.create("input", {
                    id : "value-input"
                }, field.valueSpan);

                var dateTextBox = new dijit.form.DateTextBox({
                    id : "value-input-" + expNum
                }, valueInput);

            } else {

            }
        }

        return {
            CreateDialog: function(lyr) {

                layer = lyr;

                queryDiv = dojo.create("div", {
                    id : "queryDiv"
                });

                var buttonInput = dojo.create("button", {
                    id : "button"
                }, queryDiv);

                var button = new dijit.form.Button({
                    id : "addExpression",
                    label : "Add Expression",
                    onClick : function() {
                        BuildExpression(layer);
                    }
                }, buttonInput);

                BuildExpression(layer)

                dialog = new dijit.Dialog({
                    title : "Query: ",// + layer.layerObject.name,
                    content : queryDiv,
                    style : "width: 600px"
                });

                dialog.show();
            }
        }
    }
) 
```

然后我通过在一个简单的 html 文件中要求模块并调用 CreateDialog 函数来测试它......

```
require(
    ["dojo/parser",
     "tb/testModule",
     "dojo/domReady!"],

    function(parser, testModule){               
        parser.parse();
        //test module
        testModule.CreateDialog({});
    }
) 
```

*注意：包“tb/testModule”使用 tb，因为这就是我在[dojo config](http://dojotoolkit.org/documentation/tutorials/1.8/dojo_config/)中设置包名的方式。*

如果您开始在过滤后的选择框中输入，一旦您对数组中的 2 个值中的任何一个自动完成，您应该会在控制台中看到记录的等效值。

这是我得到的屏幕截图，你可以看到我首先记录了 value1 的 id，然后是 value2 的 id...

![在此处输入图像描述](../Images/a99ae438320e3c4ad3029c692fd9dd16.png)

如果你没有得到第二个事件，它一定是在某个地方迷路了。我想知道变量范围是否会影响某些事情，但我不必更改它们的任何范围。我只是将主函数移到模块的返回块中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T10:13:32.787

只需`id`在数组上放置不同的内容，例如：

```
var stateStore = new Memory({
        data: [
            {name:"Alabama", id:"AL"},
            {name:"Alaska", id:"AK"}
              ]
}); 
```

1.  如果`id`您的阵列上没有，`onChange`则不会触发事件
2.  如果两者的值`id`相同，`onChange`则事件将仅在第一次触发。

@Brian如果你把对象放在你的id上，比如：

```
var stateStore = new Memory({
        data: [
            {name:"Alabama", id:{val:"dummy1"},
            {name:"Alaska", id:{val:"dummy2"}
              ]
}); 
```

即使两个 id 对象彼此不同，该事件也不会在第二次触发，因为`FilteringSelect`不会检查两个 id 为：

```
{val:"dummy1"}=={val:"dummy2"} 
```

但它会检查为

```
"[object Object]"=="[object Object]" //both are same and no onChange event will be fired 
```

# jquery - 为什么滑块图像唯一没有响应？

> ID：14781526
> 
> 赞同：0
> 
> 时间：2013-02-08T21:18:02.990
> 
> 标签：jquery, css, responsive-design

我正在使用 woothemes 的 flexslider，并且无法弄清楚为什么在调整浏览器大小/在 ipad/iphone 上查看网站时图像总是比内容宽得多。

我在滑块、幻灯片或图像上看不到任何可能导致图像无法调整大小的样式。实际图像本身没有设置高度或宽度属性。此外，滑块中只有一张图像。

内容容器似乎也在调整大小，图像/幻灯片宽度设置为 100%，但仍溢出到右侧，导致出现水平滚动。

网站：[http ://whitakerbespoke.com/](http://whitakerbespoke.com/)

编辑：图像现在调整大小，但仍有一个水平滚动条，右侧有一个巨大的空白区域。我认为图像是造成这种情况的原因，但似乎并非如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:21:42.890

添加`width: 100%`到`.flexslider .slides img`css 声明，所以它看起来像这样（flexslider.css 的第 21 行）：

```
.flexslider .slides img {margin: 0 auto; display: block; width: 100%;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:20:24.017

添加`max-width: 100%`到`img`，它工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:28:26.403

简单： [http](http://whitakerbespoke.com/wp-content/themes/spacing/css/skeleton-responsive.css?ver=3.5.1) ://whitakerbespoke.com/wp-content/themes/spacing/css/skeleton-responsive.css?ver=3.5.1 第28行

```
#footer .container {
    width: 960px;
} 
```

你需要使这个盒子灵活......就像'width：100％';

继续

# amazon-rds - 为亚马逊 rds 导入数据库：第 667 行的错误 2006 (HY000)：MySQL 服务器已消失

> ID：14781529
> 
> 赞同：4
> 
> 时间：2013-02-08T21:18:12.640
> 
> 标签：amazon-rds

在将数据库导入我的 amazon rds 实例时，我收到了以下错误：

> ERROR 2006 (HY000) at line 667: MySQL server has gone away

我继续尝试将`interative_timeout`设置更改为更大的数字。但是，它只会让我为会话设置它，而亚马逊不允许为全局会话设置它。

如何将更大的数据库导入我的亚马逊 rds 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T14:25:26.127

您可以使用参数组设置简单地更改 RDS 数据库大小设置。大多数 MSQL 设置都在那里。但是，这将需要重新启动实例。您想要的设置是 max_allowed_pa​​cket ，您不仅需要在客户端设置它，还需要在服务器本身上设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T21:45:04.040

我是这样做的，请注意我的数据库不是很大（最大的是 1.5G）。

首先转储您现有的数据库：

```
mysqldump [database_name] --master-data=2 --single-transaction --order-by-primary -uroot -p | gzip > /mnt/dumps/[database_name].sql.gz 
```

然后，您可以将此文件传输到有权使用类似[scp](http://www.hypexr.org/linux_scp_help.php)访问您的 RDS 实例的 Amazon EC2 实例。一旦文件位于您的 Amazon EC2 实例上，您应该使用以下方法提取它：

```
gzip [database_name].sql.gz -d
#you should now have a file named [database_name].sql in your directory.
mysql -uroot -p -h=[rds-instance]
source [database_name].sql 
```

然后它应该开始导入。此信息位于他们的[文档](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.NonRDSRepl.html)中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T05:30:16.533

该[文档](http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/MySQL.Procedural.Importing.AnySource.html)提供了有关如何导入大型数据集的说明。通常，最好的方法是创建平面文件并将它们导入您的 RDS 实例。

我最近完成了一个超过 120GB 的数据库从物理服务器到 RDS 的迁移。我将每个表转储到一个平面 CSV 文件中，然后将较大的文件分成多个 1GB 大小的部分。然后我将每个表导入到 RDS。

# mysql - 将数据插入到由 JOIN SELECT QUERY 产生的表中？

> ID：14781531
> 
> 赞同：0
> 
> 时间：2013-02-08T21:18:21.480
> 
> 标签：mysql, sql

如何将数据插入到由 JOIN SELECT 查询产生的表中

我想将下面查询结果中的值“ok”插入 b.URL

```
SELECT
  a.ESN,
  b.URL,
  a.Status,
  a.GroupID,
  a.RouteID
FROM STx a
  LEFT JOIN Routes b
    ON a.RouteID = b.RouteID
WHERE a.GroupID = 39
    AND a.Status = "Tested"
order by a.ESN; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:25:49.653

我想也许这就是你需要的：

```
UPDATE Routes b 
SET URL = 'ok' 
WHERE EXISTS 
    (SELECT * FROM STx a 
     WHERE a.GroupID = 39 
       AND a.Status = 'Tested' 
       AND a.RouteID = b.RouteID) 
```

这会将所需的 URL 值设置为“确定”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:20:34.620

你只需在它前面加上`INSERT INTO table (columns)`. 如果您尝试在 中查找`b.URL`值，请`SELECT`添加过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:26:00.397

```
insert into desire_table (col1,col2,col3,...) SELECT
  a.ESN,
  b.URL,
  a.Status,
  a.GroupID,
  a.RouteID
FROM STx a
  LEFT JOIN Routes b
    ON a.RouteID = b.RouteID
WHERE a.GroupID = 39
AND a.Status = "Tested"
order by a.ESN; 
```

请记住，必须匹配输出列才能位于新表中，命令mather意味着您选择的第一个列进入col1，第二个进入col2，因此您必须匹配col1，col2，等等使用您的选择输出

# java - 使用 Java 的 Kerberos 身份验证失败

> ID：14781532
> 
> 赞同：3
> 
> 时间：2013-02-08T21:18:37.370
> 
> 标签：java, kerberos

我的客户在使用他们的 Java 应用程序时遇到了一些问题（我很久没有在 Java 领域玩了）。该应用程序使用 Kerberos 进行身份验证，并且在 Java 1.6.30 之前运行良好。但是一旦他们升级到 Java 1.7.11，他们就会开始收到以下错误：

```
javax.secrutiy.auth.login.LoginException: Unable to obtain the Principal Name for authentication. 
```

JVM 在 Windows 域中的 Windows 7 上运行，因此我们正在针对 AD 进行身份验证。版本之间是否有重大更改？他们是否需要更改代码才能解决此问题？还是 Java 团队中的某个人搞砸了？TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T13:40:08.400

嗨，您可能会遇到这个潜在的问题。

[http://www.javaactivedirectory.com/?page_id=93](http://www.javaactivedirectory.com/?page_id=93)

Java 6 不尊重注册表值，而 java 7 尊重。

# javascript - 如何将 JSON 对象用于引导树而不是 JSON 文件？

> ID：14781537
> 
> 赞同：0
> 
> 时间：2013-02-08T21:18:58.230
> 
> 标签：javascript, jquery, twitter-bootstrap

我正在使用[Bootstrap Tree](https://github.com/cutterbl/Bootstrap-Tree)来构造一个树控件。您可以使用 JSON 文件作为树节点的源。您需要做的就是这个（[来源](https://github.com/cutterbl/Bootstrap-Tree/blob/master/index.html)）：

```
<li><a href="jsonexample.json" role="branch" class="tree-toggle closed" data-toggle="branch" data-value="JSON_Example">JSON Ajax Example</a></li> 
```

我的问题是：如何使用 JSON 对象而不是 JSON 文件作为树的源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:03:36.830

仅供参考，这是该插件的早期版本，这就是为什么我还没有创建演示站点或文档的原因。我认为整个api将来可能会发生变化。我想保持简单，并以与核心 Bootstrap 组件相同的整体方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:59:50.313

最终，click 事件将调用 href。这是一个发布请求，从数据 api 传入任何参数。因此，如果 href="mydynamic.cfc" data-method="myjsongenmethod" data-id="someidvalue" data-returnformat="json"，那么它将执行一个 jQuery ajax POST，传递一个数据对象 {"method ": "myjsongenmethod", "id": "someidvalue", "returnformat": "json"} 到您的服务器端模板“mydynamic.cfc”（或您想要的任何其他服务器端）。它会期望您的返回格式与您在该示例 json 文档中看到的一样。

# zend-framework - Zend 框架中的 Modulel 不起作用

> ID：14781540
> 
> 赞同：1
> 
> 时间：2013-02-08T21:19:07.963
> 
> 标签：zend-framework

我在使用 zend 框架创建模块化应用程序时遇到问题，我多次学习了更多教程和模块，但我总是遇到同样的错误。

我的应用程序的结构如下图所示。

+网站

*   应用

    +配置

    +模块

    ```
     admin

      default 
    ```

    +引导程序.php

*   文档

*   图书馆

*   上市

*   测试

在每个模块中，我都有一个扩展类 Zend_Application_Module_Bootstrap 的类，分别是：

*   Admin_Bootstrap
*   Default_Bootstrap

我的 application.ini 文件如下：

```
[production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

;module support
resources.frontController.moduleDirectory = APPLICATION_PATH "/modules"
resources.modules[] = ""
resources.frontController.params.prefixDefaultModule = "1"
resources.frontController.defaultModule="default"
;end module support
[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

如果我尝试访问该 url`http://localhost/site.it/public/`没关系，但如果我尝试访问该 url`http://localhost/site.it/public/admin` 我收到错误 The requested URL `http://localhost/site.it/public/admin`was not found on this server.

文件 .htaccess 由以下部分组成：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T21:43:31.697

你最好使用像 siteit.localhost 这样的别名，这样你就不需要每次都写 public 。这可能会解决您的问题，但我需要添加一些东西；在模块 admin 中，控制器的名称前是否有 Admin？

喜欢

```
class Admin_IndexController extends Zend_Controller_Action {... 
```

顺便说一句，在我们的代码中，我们像这样在模块中包含每个文件夹，（如果您不使用子视图，请删除子视图行）

```
define('ROOT_DIR', realpath(dirname(__FILE__) . '/../'));

$modules = array('admin', 'foo' , 'asdasd');

foreach ($modules as $module) {
    set_include_path(get_include_path() . PATH_SEPARATOR . ROOT_DIR . '/application/modules/' . $module . '/models');
    set_include_path(get_include_path() . PATH_SEPARATOR . ROOT_DIR . '/application/modules/' . $module . '/forms');
    set_include_path(get_include_path() . PATH_SEPARATOR . ROOT_DIR . '/application/modules/' . $module . '/views');
    set_include_path(get_include_path() . PATH_SEPARATOR . ROOT_DIR . '/application/modules/' . $module . '/controllers');
    $subview->addBasePath(get_include_path() . PATH_SEPARATOR . ROOT_DIR . '/application/modules/' . $module . '/views');
} 
```

# algorithm - 大 N 值的矩阵求幂算法

> ID：14781543
> 
> 赞同：3
> 
> 时间：2013-02-08T21:19:35.103
> 
> 标签：algorithm, matrix, fibonacci

我想计算非常大的 N 值的斐波那契，即。10^6，复杂度为 O(logN)。这是我的代码，但它在 30 秒内给出了 10^6 的结果，这非常耗时。帮我指出错误。我必须以模 10^9+7 的形式给出输出。

```
static BigInteger mod=new BigInteger("1000000007");

BigInteger fibo(long n){
    BigInteger F[][] = {{BigInteger.ONE,BigInteger.ONE},{BigInteger.ONE,BigInteger.ZERO}};
    if(n == 0)
        return BigInteger.ZERO;
    power(F, n-1);
    return F[0][0].mod(mod);
}

void power(BigInteger F[][], long n) {
    if( n == 0 || n == 1)
        return;
    BigInteger M[][] = {{BigInteger.ONE,BigInteger.ONE},{BigInteger.ONE,BigInteger.ZERO}};
    power(F, n/2);
    multiply(F, F);
    if( n%2 != 0 )
        multiply(F, M);
  }

void multiply(BigInteger F[][], BigInteger M[][]){
    BigInteger x =  (F[0][0].multiply(M[0][0])).add(F[0][1].multiply(M[1][0])) ;
    BigInteger y =  F[0][0].multiply(M[0][1]).add(F[0][1].multiply(M[1][1])) ;
    BigInteger z =  F[1][0].multiply(M[0][0]).add( F[1][1].multiply(M[1][0]));
    BigInteger w =  F[1][0].multiply(M[0][1]).add(F[1][1].multiply(M[1][1]));

    F[0][0] = x;
    F[0][1] = y;
    F[1][0] = z;
    F[1][1] = w;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T22:35:04.907

使用这些[重复](https://en.wikipedia.org/wiki/Fibonacci_sequence#Matrix_form)：

> *F* [2 *n* -1] = *F* [*n*] ² + *F* [*n* -1] ²
> 
> *F* [2 *n*] = (2 *F* [*n* −1] + *F* [*n*] ) *F* [*n*]

连同[记忆](https://en.wikipedia.org/wiki/Memoization)。例如，在 Python 中，您可以使用[`@functools.lru_cache`](https://docs.python.org/3/library/functools.html#functools.lru_cache)装饰器，如下所示：

```
from functools import lru_cache

@lru_cache(maxsize=None)
def fibonacci_modulo(n, m):
    """Compute the nth Fibonacci number modulo m."""
    if n <= 3:
        return (0, 1, 1, 2)[n] % m
    elif n % 2 == 0:
        a = fibonacci_modulo(n // 2 - 1, m)
        b = fibonacci_modulo(n // 2, m)
        return ((2 * a + b) * b) % m
    else:
        a = fibonacci_modulo(n // 2, m)
        b = fibonacci_modulo(n // 2 + 1, m)
        return (a * a + b * b) % m 
```

这将在几微秒内计算第 10 ⁶斐波那契数（模 10 ^(9 + 7）：)

```
>>> from timeit import timeit
>>> timeit(lambda:fibonacci_modulo(10 ** 6, 10 ** 9 + 7), number=1)
0.000083282997366 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T21:49:54.273

我得到了一个更合理的 - 虽然仍然很慢 -`real 0m2.335s`使用您的代码的时间。

计算斐波那契数的算法还可以（有一些调整可以加快速度，但没有什么戏剧性的效果），所以问题是大`BigInteger`s 上的操作很慢，并且`F(10^6)`有将近 700,000 位。

由于您要计算余数模`mod = 10^9 + 7`，并`(mod-1)^2`适合 a ，因此您可以使用s 而不是s`long`获得更快的实现，在每个步骤中计算余数。直接转录`long``BigInteger`

```
public class FiboL {

    static final long mod = 1000000007L;

     static long fibo(long n){

          long F[][] = {{1,1},{1,0}};

          if(n == 0)
            return 0;
          power(F, n-1);
            return F[0][0]; //.mod(mod);
        }

    static void power(long F[][], long n){

          if( n == 0 || n == 1)
              return;
          long M[][] = {{1,1},{1,0}};

          power(F, n/2);
          multiply(F, F);

          if( n%2 != 0 )
             multiply(F, M);
        }

    static void multiply(long F[][], long M[][]){

          long x =  (F[0][0] * M[0][0]) % mod + (F[0][1] * M[1][0]) % mod;
          long y =  (F[0][0] * M[0][1]) % mod + (F[0][1] * M[1][1]) % mod;
          long z =  (F[1][0] * M[0][0]) % mod + (F[1][1] * M[1][0]) % mod;
          long w =  (F[1][0] * M[0][1]) % mod + (F[1][1] * M[1][1]) % mod;

          F[0][0] = x % mod;
          F[0][1] = y % mod;
          F[1][0] = z % mod;
          F[1][1] = w % mod;
    }
    public static void main(String[] args) {
        System.out.println(fibo(1000000));
    }
} 
```

运行在`real 0m0.083s`.

# c# - 如何在 Windows Phone 上调试内存不足

> ID：14781547
> 
> 赞同：4
> 
> 时间：2013-02-08T21:19:50.110
> 
> 标签：c#, memory-management, windows-phone-8

我正在用 c# 制作一个 WP8 图像处理应用程序，并且遇到了一些内存问题。

如果我离开应用程序并多次返回，我的内存就会耗尽（例如 Home -> back -> home -> back...）。

我想知道如何调试这个问题？我正在尝试尽可能多地清理内存（使用 Dispose/将内容设置为 null），但它不起作用。

我将如何调试它？有没有办法找出内存是如何被什么使用的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:24:12.033

检查这个问题的答案：

[Windows Phone 内存分析器](https://stackoverflow.com/questions/8066576/windows-phone-memory-profilers)

> Windows Phone SDK 带有一个用于内存消耗和其他东西的分析器，安装 SDK 后，它在 Visual Studio 中可用。

或者，这里是 MSDN 文章的直接链接：

[http://msdn.microsoft.com/en-us/library/hh202934%28v=vs.92%29.aspx](http://msdn.microsoft.com/en-us/library/hh202934%28v=vs.92%29.aspx)

**更新：**

看起来这个问题是针对 WP7 的，所以它可能适用也可能不适用。但是，我发现一篇文章同时适用于 WP8 和 WP7：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202934(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202934(v=vs.105).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T02:02:50.870

lhan16 的回答很到位。

您需要做的是使用内存分析并定期检查哪些内存堆以查看不应该分配的内存。这至少可以帮助您缩小内存泄漏的罪魁祸首。我写了一篇文章，其中包括一个存储太多字节 [] 的简单示例，以及如何使用内存分析工具找到那些 @ [http://www.developer.nokia.com/Community/Wiki/Techniques_for_memory_analysis_of_Windows_Phone_apps#Profiling](http://www.developer.nokia.com/Community/Wiki/Techniques_for_memory_analysis_of_Windows_Phone_apps#Profiling)

# javascript - 在 Firefox 18、IE 9、Chrome 24 中获取鼠标坐标

> ID：14781548
> 
> 赞同：0
> 
> 时间：2013-02-08T21:19:51.150
> 
> 标签：javascript, internet-explorer, google-chrome, firefox

我尝试为一个事件（例如 document.onmousemove）获取鼠标坐标，但是，我得到了 IE9 的不同值。我使用这个功能。

```
function mouseCoords(event){
if(event.pageX || event.pageY){
    return {x:event.pageX, y:evevent.pageY};
}
return { //IE
    x:event.clientX + document.body.scrollLeft - document.body.clientLeft,
    y:event.clientY + document.body.scrollTop  - document.body.clientTop
};} 
```

¿ 是否存在适用于这三种浏览器的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:25:38.573

试试这个 event.client.pageX

```
function mouseCoords(event){
if(event.client.pageX || event.client.pageY){
    return {x:event.client.pageX, y:evevent.client.pageY};
}
return { //IE
    x:evevent.clientX + document.body.scrollLeft - document.body.clientLeft,
    y:evevent.clientY + document.body.scrollTop  - document.body.clientTop
};} 
```

# javascript - JavaScript 看不到函数外的变量

> ID：14781549
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:19:57.030
> 
> 标签：javascript, jquery

我有这个功能：

```
$(function ($) {
...
});

var getNotifyBar = $(".NotifyBar");
function showNotify(text) {
    getNotifyBar.hide().find(".text").html(text).end().slideDown();
} 
```

当我使用函数时，`showNotify(text)`什么也没有发生。但是当我把它放在（浏览器的）JavaScript 控制台中时，它就可以工作了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T21:22:40.517

这很可能在所有具有类 NotifyBar 的元素都被渲染之前运行

```
var getNotifyBar = $(".NotifyBar"); 
```

这意味着当您稍后尝试使用它时它是空的。你应该这样做：

```
var getNotifyBar;
$(function ($) {
 getNotifyBar = $(".NotifyBar");
}); 
```

现在它应该被正确加载。接下来，您需要记住 getNotifyBar 是对已从选择器加载的 jQuery 对象的引用。因此，您不需要将其包装在`$()`. 您应该进行以下更改：

```
function showNotify(text) {
 getNotifyBar.hide().find(".text").html(text).end().slideDown();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:24:49.153

您的代码现在没有机会工作并且可以从控制台工作，因为当您在控制台中运行它时，它是在 DOMReady 之后。将代码代替示例中的 3 个点，它将起作用，因为：

```
$(function($){

//code here

}) 
```

将在 DOMReady 之后运行代码

# php - 代码点火器 | 如何解决这个逻辑问题？

> ID：14781551
> 
> 赞同：0
> 
> 时间：2013-02-08T21:20:00.220
> 
> 标签：php, codeigniter, logic

我有一个功能可以让您更新您的信息，例如电子邮件和用户名。电子邮件字段有一个验证`is_unique[table.email]`。当假设用户不想更改电子邮件，而只想更改国家或其他信息时，is_unique 将显示该消息。但是如果我在更新页面中删除它，用户可能会输入一个已经在数据库中的电子邮件地址。

解决这个问题的最佳逻辑方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:22:05.693

将提交的电子邮件与数据库中的电子邮件进行比较。如果不同，则使用电子邮件验证。如果没有，不要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:22:39.343

假设您正在使用数据库查询并计算它返回的行数（0 表示该地址是空闲的），您需要传递用户的唯一 ID：

```
$result = $this->db->where('email_address',$email)->where('id !=',$userid)->get('users')->num_rows(); 
```

我刚刚在上面所做的将检查我们当前用户以外的任何人是否使用请求的电子邮件进行了注册。如果此用户只想更新他/她的国家/地区，则不会触发错误。

编辑：这将在您的自定义表单验证规则 __unique_email() 或类似的东西中。这需要在控制器中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T21:40:09.230

您可以在表单中添加一个隐藏字段，其中包含当前电子邮件地址的值，然后如果提交的值不同，则运行验证

# android - RingtonePreference 未保存在 PreferenceActivity 中

> ID：14781557
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:20:27.290
> 
> 标签：android, sharedpreferences, preferenceactivity, ringtone, preferencescreen

我正在使用`PreferenceScreen`在我的 Android 应用程序中设置一些用户首选项。它适用于几个`ListPreference`和`CheckboxPreference`项目，但我无法`RingtonePreference`正常工作。将显示相应的铃声对话框，并且可以选择，但永远不会保存选择。

无论我选择什么，我的应用程序都只会播放默认声音。每当我重新打开铃声对话框时（无论是在做出选择后立即，还是在退出应用程序并返回后），它总是只选择默认项目。我有一个显示首选项值的字段，它始终显示选择了默认声音，即使在首选项屏幕上更改它之后也是如此。我还确认，当我使用 DDMS 监控设备上的相应 xml 文件（在 /data/data/myapp/shared_prefs 中）时，它没有改变。如果我更改其他项目（例如 a `CheckboxPreference`），我会看到 shared_prefs 文件实时更改。我已经将我的剥离`PreferenceScreen`到最低限度，它的行为仍然相同。我尝试在手机上更改键名、默认值和清除应用程序数据.. 似乎没有任何效果。

我确实在 SO（[此处](https://stackoverflow.com/questions/7587668/ringtone-preference-not-saving-choice)和[此处](https://stackoverflow.com/questions/12052096/ringtonepreference-doesnt-save-its-value)）上发现了 2 个类似的问题，但它们已有几个月的历史，没有答案和/或提出问题的人放弃并尝试了另一种方法。我想弄清楚为什么它看起来不像设计的那样工作......或者至少，找到一种合适的方法来完成同样的事情。

我的代码的相关部分如下..提前谢谢！

**/res/xml/preferences.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
  <RingtonePreference
    android:key="alertSound"
    android:ringtoneType="notification"
    android:summary="Select audio notification sound"
    android:title="Alert Sound" >
  </RingtonePreference>
</PreferenceScreen> 
```

**/src/myapp/EditPrefsActivity.java：**

```
public class EditPrefsActivity extends PreferenceActivity {
  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    settings = PreferenceManager.getDefaultSharedPreferences(this);
    addPreferencesFromResource(R.xml.preferences);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T00:17:39.523

我刚刚找到了解决方案！答案最近发布在一个类似的问题中：[https ://stackoverflow.com/a/15887357/1992342](https://stackoverflow.com/a/15887357/1992342)

`android:launchMode="singleInstance"`从清单中的 EditPrefsActivity`<activity>`条目中删除可以解决问题。显然这是一个 [鲜为人知的] Android 错误。

# html - 流体柱和固定缓冲柱 - 如何使用 css 使其高度等于流体柱？

> ID：14781563
> 
> 赞同：0
> 
> 时间：2013-02-08T21:20:47.927
> 
> 标签：html, css

我希望这些空 div 与流体 div 具有相同的高度。

[http://jsfiddle.net/QLdZs/](http://jsfiddle.net/QLdZs/)

html:

```
<div id="container">
    <div class="buffer"></div>
    <div class="buffer"></div>
    <div class="buffer"></div>
    <div id="content">
        this is content<br/>
        lalala<br/>
        lala<br/>
        lala<br/>
        lalalalala lala la<br/>
        o sole mio<br/>
    </div>
 </div> 
```

CSS：

```
#container {
 overflow:hidden;   
}
.buffer {
    float:left;
    background-color:red;
    width:100px;
    min-height:10px;
    border-right:1px solid white;
 }
#content {
    overflow:hidden;
    background-color:green;
} 
```

我知道我可以制作`#container {position:relative;}`，然后设置`.buffer {position:absolute;height:100%;}`，但我必须分别为所有这些缓冲区设置位置，并将边距设置为`#content`div。有时我会有两个、三个缓冲区，有时没有。所以这不是最好的方法。

你有什么好主意我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:51:36.840

看看这篇文章，我认为这是你需要的：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

不过，我通常只使用固定高度。

引自文章：

```
<div id="container3">
    <div id="container2">
        <div id="container1">
            <div id="col1">Column 1</div>
            <div id="col2">Column 2</div>
            <div id="col3">Column 3</div>
        </div>
    </div>
</div> 
```

和 CSS

```
#container3 {
    float:left;
    width:100%;
    background:green;
    overflow:hidden;
    position:relative;
}
#container2 {
    float:left;
    width:100%;
    background:yellow;
    position:relative;
    right:30%;
}
#container1 {
    float:left;
    width:100%;
    background:red;
    position:relative;
    right:40%;
}
#col1 {
    float:left;
    width:26%;
    position:relative;
    left:72%;
    overflow:hidden;
}
#col2 {
    float:left;
    width:36%;
    position:relative;
    left:76%;
    overflow:hidden;
}
#col3 {
    float:left;
    width:26%;
    position:relative;
    left:80%;
    overflow:hidden;
} 
```

# ajax - Ajax 的“更新”标签内的动态内容

> ID：14781565
> 
> 赞同：0
> 
> 时间：2013-02-08T21:20:58.973
> 
> 标签：ajax, jsf-2, primefaces

我正在尝试动态更新 Primefaces 中 tabView 内单击选项卡的内容。我正在尝试模拟我在 ajax 的侦听器标记内的内容，我知道单击选项卡时这不起作用，因为侦听器标记内的 EL 已被评估为字符串。问题，有没有办法做到这一点？谢谢你的帮助。

```
<p:tabView id="tv1" widgetVar="wv1" activeIndex="1">

      <p:ajax event="tabChange"
              listener="#{bean.onTabChange}"
              update="#{bean.updatedTabID}"/>

      <p:tab title="tab1">
         <p:dataTable id="dtTab1">... </p:dataTable>
      </p:tab>
      <p:tab title="tab2">
         <p:dataTable id="dtTab2">... </p:dataTable>
      </p:tab>
</p:tabView> 
```

支持豆

```
String updatedTab

public String updatedTabID(){
    return updatedTab;
}

public void onTabChange(TabChangeEvent event) {
    Tab activeTab = event.getTab();
    String activeTabTitle = activeTab.getTitle();        

    if(activeTabTitle.equals("tab1")){
       updatedTab=":tv1:dtTable1";
       // update dataTable1 collection

    }else if(activeTabTitle.equals("tab2")){
       updatedTab=":tv1:dtTable2";
       // update dataTable2 collection
    }
} 
```

# ms-office - 我可以在 64 位 Windows XP 上运行 Microsoft Office 2010 家庭和学生版吗？

> ID：14781567
> 
> 赞同：-4
> 
> 时间：2013-02-08T21:21:03.450
> 
> 标签：ms-office

我有一个 64 位版本的 Windows XP，我想知道是否可以在上面安装 Microsoft Office Home and Student 2010。我的一些朋友告诉我，我无法在 64 位 Windows XP 机器上安装此版本的 Office。

我检查了光盘上的文件，它有 32 位和 64 位选项。我可以在我的 64 位 Windows XP 机器上安装 32 位版本吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:24:54.337

它不起作用：[http ://arstechnica.com/information-technology/2009/12/microsoft-why-office-2010-wont-support-windows-xp-64-bit/](http://arstechnica.com/information-technology/2009/12/microsoft-why-office-2010-wont-support-windows-xp-64-bit/)

对不起，微软认为在 WinXP 上性能太差了！有点失望我知道...

# c - C错误从流式套接字读取数据包

> ID：14781568
> 
> 赞同：0
> 
> 时间：2013-02-08T21:21:30.297
> 
> 标签：c, sockets

我只是在 C 中使用流式套接字，但在读取从服务器应用程序返回的数据包时遇到问题。下面的代码显示了在客户端和服务器端使用的结构。

```
struct packet
{
    uint16_t f1;
    uint16_t f2;
    uint32_t f3;
    uint16_t pf1;
    uint32_t pf2;
}; 
```

用于发送的服务器端：

```
char buffer[14];
struct packet myPacket;

myPacket.f1 = 2321;
myPacket.f2 = 4423;
myPacket.f3 = 2134;
myPacket.pf1 = 765;
myPacket.pf2 = 9867;

htonPacket(myPacket, buffer); 
```

将数据打包到缓冲区的函数。

```
void htonPacket(struct packet h, char buffer[14]) {
    uint16_t u16;
    uint32_t u32;

    u16 = htons(h.f1);
    memcpy(buffer+0, &u16, 2);

    u16 = htons(h.f2);
    memcpy(buffer+2, &u16, 2);

    u32 = htonl(h.f3);
    memcpy(buffer+4, &u32, 4);

    u16 = htons(h.pf1);
    memcpy(buffer+8, &u16, 2);

    u32 = htonl(h.pf2);
    memcpy(buffer+10, &u32, 4);
} 
```

客户端拆包打印：

```
void ntohPacket(struct packet* h, char buffer[14]) {
    uint16_t u16;
    uint32_t u32;

    memcpy(&u16, buffer+0, 2);
    h->f1 = ntohs(u16);

    memcpy(&u16, buffer+2, 2);
    h->f2 = ntohs(u16);

    memcpy(&u32, buffer+4, 4);
    h->f3 = ntohl(u32);

    memcpy(&u16, buffer+6, 2);
    h->pf1 = ntohs(u16);

    memcpy(&u32, buffer+8, 4);
    h->pf2 = ntohl(u32);
} 
```

打印解压数据：

```
printf("myPacket.f1: %d\n", myPacket.f1);
printf("myPacket.f2: %d\n", myPacket.f2);
printf("myPacket.f3: %d\n", myPacket.f3);
printf("myPacket.pf1: %d\n", myPacket.pf1);
printf("myPacket.pf2: %d\n", myPacket.pf2); 
```

当我打印这些值时，很明显我在寻址或写入错误的内存位置时遇到了一些问题，但我似乎找不到错误。

```
myPacket.f1: 2321
myPacket.f2: 4423
myPacket.f3: 2134
myPacket.pf1: 2134
myPacket.pf2: 50135040 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:24:22.930

好吧，您正在为您的`memcpy`操作使用不同的偏移量，所以您当然会得到垃圾......

```
memcpy(buffer+0, &u16, 2);
memcpy(buffer+2, &u16, 2);
memcpy(buffer+4, &u32, 4);
memcpy(buffer+8, &u16, 2);
memcpy(buffer+10, &u32, 4); 
```

对比

```
memcpy(&u16, buffer+0, 2);
memcpy(&u16, buffer+2, 2);
memcpy(&u32, buffer+4, 4);
memcpy(&u16, buffer+6, 2);
memcpy(&u32, buffer+8, 4); 
```

你的最后几行`ntohPacket`应该是

```
memcpy(&u16, buffer+8, 2);
h->pf1 = ntohs(u16);

memcpy(&u32, buffer+10, 4);
h->pf2 = ntohl(u32); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:24:04.430

您的 memcpy 偏移量是错误的。固定的：

```
memcpy(&u16, buffer+0, 2);
h->f1 = ntohs(u16);

memcpy(&u16, buffer+2, 2);
h->f2 = ntohs(u16);

memcpy(&u32, buffer+4, 4);
h->f3 = ntohl(u32);

memcpy(&u16, buffer+8, 2);  <-- here
h->pf1 = ntohs(u16);

memcpy(&u32, buffer+10, 4);  <-- here
h->pf2 = ntohl(u32); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T22:00:26.387

为什么所有的舞蹈都需要从一个结构复制东西到一个变量中，然后调整字节顺序和 memcpy？你可以一口气做完`dst->f1 = htons(src->f1)`。只用`struct`s 来处理东西要容易得多，而不是用单个字节胡闹（当然，你必须小心编译器不会偷偷填充）。我认为以这种方式重做代码将解决您的问题。

# excel - Excel VBA 宏查找和格式化

> ID：14781573
> 
> 赞同：0
> 
> 时间：2013-02-08T21:21:48.787
> 
> 标签：excel, vba, find, format

我正在尝试创建一个可以在标题中找到特定字符串的宏，然后格式化该列中的单元格。例如，我有一个名为“Purchase Date”、“Cap Date”和“Exp Date”的标题。我希望能够找到使用的“日期”的第一个实例，将它们格式化为文本，然后找到下一个出现和格式等。

我创建了一个只会找到第一个实例，然后不再寻找的实例。任何想法？我查找了“查找”和“之后”，但无法让它们正常工作。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:02:15.670

它不是特别优雅，但这很可能会为您解决问题。只需编辑一些硬编码值，例如 sheetname 并确保您的列数不超过 99 列或行数不超过 999 行。

```
Public Sub FormatRowsInDateColumns()
Dim header As String

Worksheets("Sheet1").Activate

'loop through columns
For col = 1 To 99

    'check if header cell contains word date
    header = Cells(1, col).Value
    If InStr(1, header, "date", vbTextCompare) <> 0 Then

        'convert cell values to string
        For Row = 1 To 999
            'Formats value and perserves as text with an apostrophe
            Cells(Row, col).Value = "'" & Format(Cells(Row, col).Value, "yyyy/mm/dd")
        Next Row

        'set column format as text
        Columns(col).NumberFormat = "@"
    End If
Next col

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:28:16.017

我也挣扎着越过第一个发现。从 Do While 中查看下面代码的最后一部分。也许你可以从中做点什么。

```
Sub HyperLinking()     
  Call HyperLink("Text TO Hyperlink", "C:\Document.docx")   
End Sub 

Private Function HyperLink(LinkName As String, LinkAddress As String) 
  Dim WDApp As Object, wd As Object, rn As Long 
  On Error Resume Next 
  Set WDApp = GetObject(, "Word.Application") 
  If Err.Number <> 0 Then 
      Set WDApp = CreateObject("Word.Application") 
  End If 
  On Error Goto 0 
  Set wd = WDApp.Documents.Open(LinkAddress) 
  WDApp.Visible = True 
  Set objWdRange = wd.Content      
  objWdRange.Find.ClearFormatting 
  With objWdRange.Find 
      .Text = LinkName 
      .Forward = True 
      .Wrap = wdFindContinue 
  End With 
  Do While objWdRange.Find.Execute = True 
      objWdRange.Hyperlinks.Add Anchor:=objWdRange, Address:=LinkAddress, SubAddress:="", ScreenTip:="Linked  Document", TextToDisplay:=LinkName 
      objWdRange.Find.Execute 
  Loop      
  wd.Save 
  wd.Close 
  Set wd = Nothing 
  Set WDApp = Nothing      
End Function 
```

一个问题是，有时，我猜由于格式的原因，所有的单词都找不到。也许有人可以帮助解决为什么会发生这种情况？

您可以根据您的要求调整此代码。

# javascript - Javascript：接口和 DTO

> ID：14781574
> 
> 赞同：4
> 
> 时间：2013-02-08T21:21:49.773
> 
> 标签：javascript, oop

我正在寻找在 javascript 中模拟接口和 DTO 来解决这个问题。对象 dto、对象调用者和同一接口 IWorker 的不同实现。

调用者将收到一个用于实例化的 dto，将用户输入提供给它，然后调用 Iworker 的正确实现（方法执行）。

我希望在我的代码中我只有一个 dto 实例和一个调用者实例，所以每次用户做出另一种选择时我都会调用 caller.CallWorker()

请告诉我这个想法是否好，欢迎使用 javascript 实现

非常感谢

**编辑：感谢您的帮助，将采用 Bergi 解决方案，但我还需要一件事** 所以我的实现将是这样的：

```
var caller = {
    callWorker: function(obj) {
        if(obj.id == 1)  Worker1.execute();
        if(obj.id == 2)  Worker2.execute();
        if(obj.id == 2)  Worker3.execute();
    }
}; 
```

但这意味着我必须在 html 页面中添加所有工作人员定义（每个实现一个 js 脚本）。我只想动态添加脚本，实际上活动工作者依赖于很多业务逻辑，所以我将动态包含它们以使页面中只有活动工作者。你建议我怎么做？做 caller.callworker 中的所有条件吗？**或者有更优雅的方法。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T22:13:05.000

> 我正在寻找模拟界面

动态类型语言 JavaScript 中没有“接口”，也没有类。最近模拟是检查给定对象是否具有特定方法集的函数；但它不能进行任何类型或功能测试。

> 和 DTO

最接近 DTO 的是 JSON 可序列化对象。这意味着它没有循环，不包含`Date`对象甚至宿主对象。

> 我希望在我的代码中我只有一个 dto 实例和一个调用者实例，所以每次用户做出另一种选择时我都会调用 caller.CallWorker()

那是另一种设计模式：单例。它们可以很容易地用 JS 编码，因为可以动态创建对象，并且不需要需要防止多次实例化的类和构造函数。只需为它们使用对象文字。

> 欢迎使用 javascript 实现

这只是一个简单的示例，但您可以在需要的地方扩展它：

```
function makeDTO(id) {
    // creates a basic data structure, with empty or default values or from parameters
    return {
        id: id,
        userInput: [],
        validate: false,
        …
    };
}
var caller = {
    callWorker: function(obj) {
        // do something
    }
};

var dto = makeDTO(14);
caller.callWorker(dto);
var asString = JSON.stringify(dto); 
```

> 或者有更优雅的方法。

使工人成为一个数组或对象。例如

```
var workers = {
    1: {/* std worker #1 */},
    …
};
// then the caller will look like this:
var caller = {
    callWorker: function(obj) {
        var workerName = obj.id; // just the id? Or something more complex
        if (workerName in workers)
            workers[workerName].execute(obj);
        else
            dynamicallyLoadWorker(workerName, function callbackWhenLoaded(worker) {
                workers[workerName] = worker;
                worker.execute(obj);
            });
    }
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:59:13.997

由于 JavaScript 是动态类型的，因此不需要`interface`构造。您可以为每个实现调用您的方法，而无需从接口继承。就 DTO 而言，同样的答案确实适用。您可以根据需要使用 JSON 构造一个对象，并通过网络传输它，而无需您提到的任何静态类型构造。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T22:02:17.583

[JS.Class](http://jsclass.jcoglan.com/)允许您创建[接口](http://jsclass.jcoglan.com/interfaces.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-15T08:16:49.423

**关于接口：**

对于 javascript，有[JSDoc @interface](https://jsdoc.app/tags-interface.html)。

如果您更喜欢 Typescript，请选择[Interfaces](https://www.typescriptlang.org/docs/handbook/interfaces.html)。

如果您只想从 IDE 中获得一些关于已定义和未定义的代码提示，我最近使用了[JSDoc @typedef](https://jsdoc.app/tags-typedef.html#examples)：

```
/**
 * @typedef {Object} MyType
 * @property {boolean} foo
 * @property {function} bar
 * @property {(running|paused)} baz
 */ 
```

# php - Magento V2 API 覆盖产品信息模型 V2（属性未显示）

> ID：14781579
> 
> 赞同：4
> 
> 时间：2013-02-08T21:22:18.793
> 
> 标签：php, api, magento, soap

我正在尝试覆盖`catalogProductInfo`. 我要做的就是为返回的肥皂结果添加另一个属性。问题是我的新属性没有显示。这是我迄今为止尝试解决的问题。

1.  我试图进入 php.ini 文件并`soap.wsdl_cache_enabled=1`关闭`soap.wsdl_cache = 1`
2.  我尝试进入 /tmp/ 文件夹并删除 wsdl 缓存文件
3.  我禁用了magento缓存并尝试重新索引

我正在尝试覆盖以下 magento 产品信息 api 模型 V2...

[http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.info.html](http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalog_product.info.html)

我正在使用 v2，即以下示例。我想要做的是在返回结果中添加另一个属性

```
$prodInfo = $fclient->catalogProductInfo($fsession, $prod->product_id, null,$attributes); 
```

这就是我试图覆盖返回的内容...我首先创建了我的模块。这是我的配置文件 /app/code/local/Namespace/ImportExport/etc/config.xml

```
<config>
    <modules>
        <Namespace_ImportExport>
            <version>0.0.1</version>
        </Namespace_ImportExport>
    </modules>
    <global>
        <models>
            <catalog>
                <rewrite>
                    <product_api_v2>Namespace_ImportExport_Model_Product_Api_V2</product_api_v2>
                </rewrite>
            </catalog>
        </models>
    </global>
</config> 
```

在下面的代码中，我尝试添加`associated`基本的产品数据。我这样做只是为了简单地看看它是否出现。问题是当我拨打肥皂电话时。它不会出现在返回的结果中。我的模块已成功覆盖`Mage_Catalog_Model_Product_Api_V2`，因为我可以在我的模块中破坏它。

/app/code/local/Namespace/ImportExport/Model/Product/Api/V2.php

# 命名空间_ImportExport_Model_Product_Api_V2

```
<?php
class Namespace_ImportExport_Model_Product_Api_V2
    extends Mage_Catalog_Model_Product_Api_V2
{

    /**
     * Retrieve product info
     *
     * @param int|string $productId
     * @param string|int $store
     * @param stdClass $attributes
     * @return array
     */
    public function info($productId, $store = null, $attributes = null, $identifierType = null)
    {
        $product = $this->_getProduct($productId, $store, $identifierType);

        if (!$product->getId()) {
            $this->_fault('not_exists');
        }

        $result = array( // Basic product data
            'associated' =>"test",
            'product_id' => $product->getId(),
            'sku'        => $product->getSku(),
            'set'        => $product->getAttributeSetId(),
            'type'       => $product->getTypeId(),
            'categories' => $product->getCategoryIds(),
            'websites'   => $product->getWebsiteIds(),
        );
        if($product->getTypeId() == "configurable") {
            Mage::log($product);
//          $child_products = $product->getTypeInstance(true)->getAssociatedProducts($product);
//          if(!empty($child_products)) {
//              $result['associated_products'] = "";
//              foreach ($child_products as $p) {
//                  $result['associated_products'] .= $p->getData('sku').",";
//              }
//          }
        }

        $allAttributes = array();
        if (isset($attributes->attributes)) {
            $allAttributes += array_merge($allAttributes, $attributes->attributes);
        }

        $_additionalAttributeCodes = array();
        if (isset($attributes->additional_attributes)) {
            foreach ($attributes->additional_attributes as $k => $_attributeCode) {
                $allAttributes[] = $_attributeCode;
                $_additionalAttributeCodes[] = $_attributeCode;
            }
        }

        $_additionalAttribute = 0;
        foreach ($product->getTypeInstance(true)->getEditableAttributes($product) as $attribute) {
            if ($this->_isAllowedAttribute($attribute, $allAttributes)) {
                if (in_array($attribute->getAttributeCode(), $_additionalAttributeCodes)) {
                    $result['additional_attributes'][$_additionalAttribute]['key'] = $attribute->getAttributeCode();
                    $result['additional_attributes'][$_additionalAttribute]['value'] = $product->getData($attribute->getAttributeCode());
                    $_additionalAttribute++;
                } else {
                    $result[$attribute->getAttributeCode()] = $product->getData($attribute->getAttributeCode());
                }
            }
        }

        return $result;
    }

} 
```

我什至尝试`associated`在`catalogProductReturnEntity` 模块目录 wsdl.xml 文件 /app/code/core/Mage/Catalog/etc/wsdl.xml 中添加

```
<complexType name="catalogProductReturnEntity">
    <all>
        <element name="associated" type="xsd:string" minOccurs="0" />
        <element name="product_id" type="xsd:string" minOccurs="0" />
        <element name="sku" type="xsd:string" minOccurs="0" />
        <element name="set" type="xsd:string" minOccurs="0" />
        <element name="type" type="xsd:string" minOccurs="0" />
        <element name="categories" type="typens:ArrayOfString" minOccurs="0" />
        <element name="websites" type="typens:ArrayOfString" minOccurs="0" />
        <element name="created_at" type="xsd:string" minOccurs="0" />
        <element name="updated_at" type="xsd:string" minOccurs="0" />
        <element name="type_id" type="xsd:string" minOccurs="0" />
        <element name="name" type="xsd:string" minOccurs="0" />
        <element name="description" type="xsd:string" minOccurs="0" />
        <element name="short_description" type="xsd:string" minOccurs="0" />
        <element name="weight" type="xsd:string" minOccurs="0" />
        <element name="status" type="xsd:string" minOccurs="0" />
        <element name="url_key" type="xsd:string" minOccurs="0" />
        <element name="url_path" type="xsd:string" minOccurs="0" />
        <element name="visibility" type="xsd:string" minOccurs="0" />
        <element name="category_ids" type="typens:ArrayOfString" minOccurs="0" />
        <element name="website_ids" type="typens:ArrayOfString" minOccurs="0" />
        <element name="has_options" type="xsd:string" minOccurs="0" />
        <element name="gift_message_available" type="xsd:string" minOccurs="0" />
        <element name="price" type="xsd:string" minOccurs="0" />
        <element name="special_price" type="xsd:string" minOccurs="0" />
        <element name="special_from_date" type="xsd:string" minOccurs="0" />
        <element name="special_to_date" type="xsd:string" minOccurs="0" />
        <element name="tax_class_id" type="xsd:string" minOccurs="0" />
        <element name="tier_price" type="typens:ArrayOfString" minOccurs="0" />
        <element name="meta_title" type="xsd:string" minOccurs="0" />
        <element name="meta_keyword" type="xsd:string" minOccurs="0" />
        <element name="meta_description" type="xsd:string" minOccurs="0" />
        <element name="custom_design" type="xsd:string" minOccurs="0" />
        <element name="custom_layout_update" type="xsd:string" minOccurs="0" />
        <element name="options_container" type="xsd:string" minOccurs="0" />
        <element name="additional_attributes" type="typens:associativeArray" minOccurs="0" />
    </all>
</complexType> 
```

我仍然一无所获。我关闭了肥皂缓存。我已关闭所有 magento 缓存。我究竟做错了什么 ？？

[更新]尽管如此，没有任何改变。该属性`associated`是我正在寻找的那个。我在星期五发了这篇文章。接下来的星期一我试了一下，相关的属性突然出现了。现在有一个新问题。我正在尝试添加一个新属性，但遇到了同样的问题。有什么建议么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T16:06:52.573

弄清楚了。Php Soap 有一个 Server 和 Client 类。所以你必须确保你清除了soap请求者的缓存和响应。换句话说，使用soap调用的服务器找到缓存并清除它，同时接收缓存调用的服务器也清除。必须清除两者才能获得完整更新。不仅仅是肥皂服务器。

# logging - 在 log4net 中没有记录

> ID：14781580
> 
> 赞同：1
> 
> 时间：2013-02-08T21:22:21.407
> 
> 标签：logging, log4net, log4net-configuration

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>

  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
  </configSections>
  <log4net>
    <appender name="Console" type="log4net.Appender.ColoredConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%newline%date{ABSOLUTE} [%thread] %level %logger - %message%newline"/>  
      </layout>
      <mapping>
        <level value="ERROR" />
        <foreColor value="White" />
        <backColor value="Red, HighIntensity" />
      </mapping>
      <mapping>
        <level value="INFO" />
        <foreColor value="Green" />
        <backColor value="White, HighIntensity" />
      </mapping>
    </appender>
    <appender name ="Rolling" type="log4net.Appender.RollingFileAppender">
      <file value="C:\Users\AQureshi\Desktop\New folder\DailyLogsForProcessor.txt"/>
      <appendToFile value="true" />
      <rollingStyle value="Size"/>
      <maximumFileSize value="10MB"/>
      <staticLogFileName value="true"/>
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{ABSOLUTE} [%thread] %level %logger - %message%newline"/>
      </layout>
    </appender>
    <root>
      <level value="DEBUG" />
      <appender-ref ref="Rolling" />
    </root>    
    <logger name="AnotherLog4NetTest.testing">
      <level value="DEBUG"/>
      <appender-ref ref="Console"/>
    </logger>
  </log4net>
</configuration> 
```

我的 appConfig 文件中有上述 log4net 配置。logger 标签的 name 属性是命名空间和类。所以 AnotherLog4NetTest 是命名空间，它有一个名为 testing 的类。
这个想法是，只有将其余日志写入控制台的类测试才会写入`<root>`元素中指定的文件。

但是记录器没有在控制台上登录，它仍在记录到文件中。
有人可以告诉我如何将我的课程测试日志记录到控制台，将其余的记录到文件中。

# java - 如何从 Maven 中为 Eclipse 添加构建路径选项

> ID：14781589
> 
> 赞同：2
> 
> 时间：2013-02-08T21:22:54.327
> 
> 标签：java, eclipse, maven

自去年夏天以来，Eclipse 支持一项功能，您可以在该功能中抑制每个构建路径的非重要代码问题（[在此处描述](http://eclipser-blog.blogspot.nl/2012/03/ignore-optional-compile-problems-is-now.html)）。

当您从 GUI 设置此选项时，我看到这在项目的 .classpath 文件中反映如下。

```
 <classpathentry including="**/*.java" kind="src" path="src/main/java"/>
    <classpathentry including="**/*.java" kind="src" path="target/generated-sources/proto">
            <attributes>
                    <attribute name="ignore_optional_problems" value="true"/>
            </attributes>
    </classpathentry> 
```

我有一个现有的基于 Maven 的项目，我想对其进行配置，以便当我运行 **mvn eclipse:eclipse**时 ，生成的 .classpath 文件包含带有生成源代码的构建路径的上述选项。

我已经检查了[eclipse mojo](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)的所有选项，但我无法弄清楚如何做到这一点。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T21:52:22.940

目前，[Maven2 Eclipse 插件](http://jira.codehaus.org/browse/MECLIPSE)(mvn eclipse:eclipse) 和[Eclipse M2E 插件](http://eclipse.org/m2e)都不支持此功能。

这两个项目都有与此相关的未解决问题/错误：

*   已在[Eclipse Bugzilla](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388541)中为它提交了一个错误，其中包含一个补丁。
*   Maven2 Eclipse 插件也有一个[未解决](https://issues.apache.org/jira/browse/MECLIPSE-735)的问题。

# c++ - `operator>>' 不是 `Instance' 的成员

> ID：14781591
> 
> 赞同：0
> 
> 时间：2013-02-08T21:23:00.037
> 
> 标签：c++, compiler-errors

我有`InstancePool`包含 Instance.h 标头的类（下面的一部分），但我`operator>>`在`InstancePool`.

```
#include <iostream>
#include <string>
#include <vector>
#include <map>
#include <sstream>
#include <stdlib.h>

using namespace std;

#include "Instance.h"
#include "InstancePool.h"

istream &operator >> (istream &in , InstancePool &ip) {

    ip.Instances->clear();

    string input;
    getline(in , input);

    while (!in.eof()) {

        Instance inst;

        Instance::operator >>(in , inst); // <- line giving me the error

        ip.Instances->push_back(inst);

        getline(in , input);

    }
} 
```

InstancePool 运算符>> 函数是“朋友”函数顺便说一句，Instance 中的相同函数也是如此。可能我正试图以错误的方式访问实例“操作员>>”，但如果我知道正确的方式，我会被诅咒......有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:26:20.693

Friend 函数不是成员函数，您不能像以前那样明确限定函数的名称，因为它根本不在名为`Instance`.

好消息是：你不需要。只需正常调用它：

```
in >> inst; 
```

不过，您的代码中有更多错误。首先，`while (in.eof())`当读取错误时会导致无限循环——<strong>永远不要这样做。

其次，您正在阅读和丢弃带有`getline`. 这可能不是你想要做的，对吧？您想从行中读取每个实例还是直接从输入流中读取？

# google-drive-api - 如何使用 Google Drive API 更改融合表的可见性？

> ID：14781598
> 
> 赞同：0
> 
> 时间：2013-02-08T21:23:17.707
> 
> 标签：google-drive-api, google-fusion-tables

我读到我可以使用 Google Drive API v2 将 Google Fusion Table 的可见性从私有更改为不公开或公开。我尝试将“shared”属性设置为 true 无济于事（结果是 200-OK 但没有更改为“shared”），并且在私有和未列出的表上权限对我来说是相同的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:03:43.787

使用[`drive.permissions.insert`](https://developers.google.com/drive/v2/reference/permissions/insert)Drive API 的方法。您将添加一个权限以公开融合表。如需更多信息，请阅读[Drive SDK 共享指南](https://developers.google.com/drive/manage-sharing)。

# ruby - 在不存在的情况下，我可以将什么作为我的 watir-webdriver 页面“元素”？

> ID：14781607
> 
> 赞同：2
> 
> 时间：2013-02-08T21:23:51.663
> 
> 标签：ruby, watir-webdriver

我正在测试一个噩梦般的网站，在大多数情况下，它会将所有重要的东西都放在 iframe 中。

但是，还有其他常见的情况，系统会烦人地在新选项卡中打开一个页面，但不包含在 iframe 中。

我正在尝试找出一种条件方法来检查 iframe 的存在并使用它，否则不会。

到目前为止，这是我想出的：

```
# The browser object...
@br = Watir::Browser.new 
```

“frm”是我试图开始工作的条件方法......

```
# Just an example element definition...
def click_my_button
  @br.frm.button(id: "button").click
end 
```

我在 Watir 的 Container 模块中定义它，如下所示：

```
module Watir
  module Container
    def frm
      if frame(id: "iframeportlet").exist?
        frame(id: "iframeportlet")
      else
        # This is the part that I can't figure out.
      end
    end
  end
end 
```

当 iframe 存在时，它工作得很好，但毫不奇怪，当它不存在时，我会收到 NilClass 错误。

所以，我的问题是：在 else 子句中可以加入什么来使它起作用？更广泛地说，是否有更好的方法来实现这一点？正如你可以想象的那样，我真的很想避免将网站中的每个元素都定义两次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:32:41.067

我想通了，这很简单。frm 方法的 else 子句只需要一个“自我”......

```
else
  self
end 
```

就是这样。不过，我很想知道这种方法是否存在任何隐藏的陷阱。

# javascript - Javascript createImageData 抛出 DOM 异常 9，rgb 数据不工作

> ID：14781612
> 
> 赞同：2
> 
> 时间：2013-02-08T21:24:11.307
> 
> 标签：javascript, html5-canvas

当我调用以下命令时，在 Chrome 浏览器 v. 24 上

> `brush(x,y,w,h)`

控制台报告一个

> DOM异常错误9

在这一行：

> `var imageData = cvs.createImageData(w,h);`

此外，`setPixel()`应该按照说明更改 的`r,g,b,a`值，`imageData.data`但在我的浏览器上它看起来是透明的。创建一个透明的`brush(...)`w * h 正方形，这不是我想要的。

```
function setPixel(imageData, x, y, r, g, b, a) {
    index = (x + y * imageData.width) * 4;
    imageData.data[index+0] = r;
    imageData.data[index+1] = g;
    imageData.data[index+2] = b;
    imageData.data[index+3] = a;
}

function brush(x, y, w, h) {
        var canvas = document.getElementById('maincanvas');
        var cvs = canvas.getContext('2d');
        var imageData = cvs.createImageData(w,h);
        var r = 0;
        var g = 0;
        var b = 0;

        setPixel(imageData, x, y , r, g, b, 255);
        cvs.putImageData(imageData, x, y);
} 
```

我的问题：除了异常之外，还有其他原因导致输出透明`createImageData`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:28:30.820

尝试将 ( `console.log()`) 您的论点记录到`createImageData`. 这个函数似乎`NOT_SUPPORTED_ERR: DOM Exception 9`在第一个参数是`NaN`or时抛出`Infinity`（可能在其他情况下也是如此）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:06:49.847

来自下一页的报价

“当没有对画布应用样式规则时，它最初将是完全透明的。”

[https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Basic_usage?redirectlocale=en-US&redirectslug=Canvas_tutorial%2FBasic_usage](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Basic_usage?redirectlocale=en-US&redirectslug=Canvas_tutorial%2FBasic_usage)

# workflow - 用于显示的 jBPM5 任务实例序列

> ID：14781616
> 
> 赞同：0
> 
> 时间：2013-02-08T21:24:29.607
> 
> 标签：workflow, jbpm

请假设以下场景，在一个流程流中有三个humanTask1、humanTask2、humanTask3；这三个都分配给同一个用户A；

现在，假设有两个流程实例 (p1, p2) 处于活动状态。每个流程实例可以处于不同的任务级别。

也就是说，对于 p1，任务状态为 humanTask3-inprogress，对于 p2，humanTask1-inprogress

要在网页中显示此用户 A 的任务，我希望它们在工作流设计中出现时按顺序排列，例如，

1.  p2-humanTask1
2.  p1-humanTask3

`taskService.getTasksOwned()`可能不会按此顺序返回任务列表。

如何确保任务按此顺序显示？

我正在使用 jBPM 5.3；`LocalTaskService`;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:13:40.623

AFAIK, there is no out-of-the-box solution for this. You will have to decide your own order and then apply it whether by ordering the result of taskService.getTasksOwned() or by creating and executing a customized version of the query that taskService.getTasksOwned() is using.

Hope it helps,

# opengl - 不透明 OpenGL 纹理具有透明边框

> ID：14781617
> 
> 赞同：2
> 
> 时间：2013-02-08T21:24:48.057
> 
> 标签：opengl, transparency, textures

我的问题涉及使用 OpenGL 渲染文本——文本被渲染成纹理，然后绘制到四边形上。问题是纹理边缘的像素被绘制成部分透明的。纹理的内部很好。

我正在计算纹理坐标以击中我的纹理像素的中心，使用 NEAREST（非）插值，将纹理环绕设置为 CLAMP_TO_EDGE，并设置投影矩阵以将我的顶点放置在视口像素的中心。还是看到了问题。

我正在使用他们的纹理实用程序开发 VTK。这些是用于加载纹理的 GL 调用，由调试器逐步确定：

```
glGenTextures(1, &id);
glBindTexture(GL_TEXTURE_2D, id);
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
// Create and bind pixel buffer object here (not shown, lots of indirection in VTK)...
glTexImage2D( GL_TEXTURE_2D, 0 , GL_RGBA, xsize, ysize, 0, format, GL_UNSIGNED_BYTE, 0);
// Unbind PBO -- also omitted
glBindTexture(GL_TEXTURE_2D, id);
glAlphaFunc (GL_GREATER, static_cast<GLclampf>(0));
glEnable (GL_ALPHA_TEST);
// I've also tried doing this here for premultiplied alpha, but it made no difference:
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
glMatrixMode(GL_TEXTURE);
glLoadIdentity(); 
```

渲染代码：

```
 float p[2] = ...; // point to render text at

  int imgDims[2] = ...; // Actual dimensions of image
  float width = ...; // Width of texture in image
  float height = ...; // Height of texture in image

  // Prepare the quad
  float xmin = p[0];
  float xmax = xmin + width - 1;
  float ymin = p[1];
  float ymax = ymin + height - 1;
  float quad[] = { xmin, ymin,
                   xmax, ymin,
                   xmax, ymax,
                   xmin, ymax };

  // Calculate the texture coordinates.
  float smin = 1.0f / (2.0f * (imgDims[0]));
  float smax = (2.0 * width - 1.0f) / (2.0f * imgDims[0]);
  float tmin = 1.0f / (2.0f * imgDims[1]);
  float tmax = (2.0f * height - 1.0f) / (2.0f * imgDims[1]);

  float texCoord[] = { smin, tmin,
                       smax, tmin,
                       smax, tmax,
                       smin, tmax };

  // Set projection matrix to map object coords to pixel centers
  // (modelview is identity)
  GLint vp[4];
  glGetIntegerv(GL_VIEWPORT, vp);
  glMatrixMode(GL_PROJECTION);
  glPushMatrix();
  glLoadIdentity();
  float offset = 0.5;
  glOrtho(offset, vp[2] + offset,
          offset, vp[3] + offset,
          -1, 1);

  // Disable polygon smoothing. Why not, I've tried everything else?
  glDisable(GL_POLYGON_SMOOTH);

  // Draw the quad
  glColor4ub(255, 255, 255, 255);
  glEnableClientState(GL_VERTEX_ARRAY);
  glEnableClientState(GL_TEXTURE_COORD_ARRAY);
  glVertexPointer(2, GL_FLOAT, 0, points);
  glTexCoordPointer(2, GL_FLOAT, 0, texCoord);
  glDrawArrays(GL_QUADS, 0, 4);
  glDisableClientState(GL_TEXTURE_COORD_ARRAY);
  glDisableClientState(GL_VERTEX_ARRAY);

  // Restore projection matrix
  glMatrixMode(GL_PROJECTION);
  glPopMatrix(); 
```

出于调试目的，我用红色覆盖了最外层的纹素，用绿色覆盖了下一层纹素（否则很难看到大部分为白色的文本图像中发生了什么）。

我已经使用 gDEBugger 检查了内存中的纹理，它看起来和预期的一样——纹理区域周围有明亮的红色和绿色边框（额外的空白空间被填充以使其大小成为 2 的幂）。以供参考：

![好像素！](../Images/726f3a98e7de26a1cbe533fc8f634ec4.png)

这是最终渲染图像的样子（放大 20 倍——黑色像素是在调试边框下渲染的文本的残余）。淡红色边框，但仍然是粗体的绿色内边框：

![像素差！](../Images/779053324f45ad2368c5b3ce48c5c778.png)

因此，受影响的只是像素的外边缘。我不确定是颜色混合还是 alpha 混合把事情搞砸了，我很茫然。我注意到角落像素是边缘像素的两倍，也许这很重要......也许这里有人可以发现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T05:19:16.810

可能是“像素完美”问题。OpenGL 将线的中心定义为光栅化为像素的点。中间正好是 1 个整数和下一个整数之间的一半……让像素 (x,y) 显示“完美像素”……将你的坐标固定为：

```
x=(int)x+0.5f; // x is a float.. makes 0.0 into 0.5, 16.343 into 16.5, etc. 
y=(int)y+0.5f; 
```

这可能是搞乱混合的原因。我在纹理调制方面遇到了同样的问题……在底部和右侧边缘有一条稍微暗一点的线或一系列像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-04T02:16:40.090

好的，这几天我一直在努力。几乎没有什么想法根本行不通。唯一有效的是承认这个“完美像素”的存在并试图欺骗它。糟糕的是，我不能为你的答案投赞成票宇宙培根。但是你的答案，即使它看起来不错——会有点破坏像游戏这样的特殊程序中的一切。我的回答——改进了你的。

这是解决方案：

Step1：制作一个绘制您需要的纹理的方法，并仅将其用于绘制。并将 0.5f 添加到每个坐标。看：

```
public void render(Texture tex,float x1,float y1,float x2,float y2)
{
    tex.bind();
    GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0,0);
    GL11.glVertex2f(x1+0.5f,y1+0.5f);
    GL11.glTexCoord2f(1,0);
    GL11.glVertex2f(x2+0.5f,y1+0.5f);
    GL11.glTexCoord2f(1,1);
    GL11.glVertex2f(x2+0.5f,y2+0.5f);
    GL11.glTexCoord2f(0,1);
    GL11.glVertex2f(x1+0.5f,y2+0.5f);
    GL11.glEnd();
} 
```

步骤 2：如果您要使用“glTranslatef(somethin1,somethin2,0)”，那么制作一种克服“Translatef”并且不会让相机在分数距离上移动的方法会很好。因为如果相机移动的可能性很小，比如说，0.3 - 迟早你会再次看到这个问题（我想多次）。下一个代码使相机跟随具有 X 和 Y 的对象。相机永远不会从视线中丢失对象：

```
public void LookFollow(Block AF)
{
    float some=5;//changing me will cause camera to move faster/slower
    float mx=0,my=0;

    //Right-Left
    if(LookCorX!=AF.getX())
    {
        if(AF.getX()>LookCorX)
        {
            if(AF.getX()<LookCorX+2)
                mx=AF.getX()-LookCorX;
            if(AF.getX()>LookCorX+2)
                mx=(AF.getX()-LookCorX)/some;
        }
        if(AF.getX()<LookCorX)
        {
            if(2+AF.getX()>LookCorX)
                mx=AF.getX()-LookCorX;
            if(2+AF.getX()<LookCorX)
                mx=(AF.getX()-LookCorX)/some;
        }
    }

    //Up-Down
    if(LookCorY!=AF.getY())
    {
        if(AF.getY()>LookCorY)
        {
            if(AF.getY()<LookCorY+2)
                my=AF.getY()-LookCorY;
            if(AF.getY()>LookCorY+2)
                my=(AF.getY()-LookCorY)/some;
        }
        if(AF.getY()<LookCorY)
        {
            if(2+AF.getY()>LookCorY)
                my=AF.getY()-LookCorY;
            if(2+AF.getY()<LookCorY)
                my=(AF.getY()-LookCorY)/some;
        }
    }

    //Evading "Perfect Pixel"
    mx=(int)mx;
    my=(int)my;

    //Moving Camera
    GL11.glTranslatef(-mx,-my,0);

    //Saving up Position of camera.
    LookCorX+=mx;
    LookCorY+=my;
}
float LookCorX=300,LookCorY=200; //camera's starting position 
```

结果——我们收到了一个移动得更锐利的相机，因为步长不能小于 1 个像素，有时，有必要做一个更小的步长，但纹理看起来还不错，而且，它 - 很棒进步！

对不起，一个真正的大答案。我仍在研究一个好的解决方案。一旦我找到更好更短的东西——这将被我抹去。

# simplemodal - 多个简单模态框

> ID：14781621
> 
> 赞同：0
> 
> 时间：2013-02-08T21:25:15.223
> 
> 标签：simplemodal

所以我已经看到这个问题被问了几次，埃里克马丁回答了这个问题：

我在我正在构建的网站上做了同样的事情。我只是为每个模态创建了不同的内容，并给每个模态一个唯一的 ID。所以我的内容看起来像：

```
<a id='help'>HELP CONTENT</a>
<a id='about'>ABOUT CONTENT</a>
<a id='options'>OPTIONS CONTENT</a>

<div id='modal_help'>HELP CONTENT</div>
<div id='modal_about'>ABOUT CONTENT</div>
<div id='modal_options'>OPTIONS CONTENT</div> 
```

然后在我的 JS 中，我有：

```
$('a').click(function (e) {
    e.preventDefault();

    $('#modal_' + this.id).modal({OPTIONS});
}); 
```

希望有帮助。

因此，查看模态示例演示：

```
<div id='logo'>
        <h1>Simple<span>Modal</span></h1>
        <span class='title'>A Modal Dialog Framework Plugin for jQuery</span>
    </div>
    <div id='content'>
        <div id='osx-modal'>
            <h3>OSX Style Modal Dialog</h3>
            <p>A modal dialog configured to behave like an OSX dialog. Demonstrates the use of the <code>onOpen</code> and <code> onClose</code> callbacks as well as custom styling and a handful of options.</p>
            <p>Inspired by <a href="http://okonet.ru/projects/modalbox/">ModalBox</a>, an OSX style dialog built with <a href="http://www.prototypejs.org/ ">prototype</a>.</p>
            <input type='button' name='osx' value='Demo' class='osx demo'/> or <a href='#' class='osx'>Demo</a>
        </div>

        <!-- modal content -->
        <div id="osx-modal-content">
            <div id="osx-modal-title">OSX Style Modal Dialog</div>
            <div class="close"><a href="#" class="simplemodal-close">x</a></div>
            <div id="osx-modal-data">
                <h2>Hello! I'm SimpleModal!</h2>
                <p>SimpleModal is a lightweight jQuery Plugin which provides a powerful interface for modal dialog development. Think of it as a modal dialog framework.</p>
                <p>SimpleModal gives you the flexibility to build whatever you can envision, while shielding you from related cross-browser issues inherent with UI development..</p>
                <p>As you can see by this example, SimpleModal can be easily configured to behave like an OSX dialog. With a handful options, 2 custom callbacks and some styling, you have a visually appealing dialog that is ready to use!</p>
                <p><button class="simplemodal-close">Close</button> <span>(or press ESC or click the overlay)</span></p>
            </div>
        </div>
    </div> 
```

我不明白如何在同一页面上调用第二个模态框。我知道这是一个新手问题，但这让我很困惑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:47:58.260

有一个你正在尝试做的真实例子（简化）会更有帮助。但是，使用您提供的演示代码，您可以执行以下操作：

HTML：

```
<div id='logo'>
    <h1>Simple<span>Modal</span></h1>
    <span class='title'>A Modal Dialog Framework Plugin for jQuery</span>
</div>
<div id='content'>
    <div id='osx-modal'>
        <h3>OSX Style Modal Dialog</h3>
        <p>A modal dialog configured to behave like an OSX dialog. Demonstrates the use of the <code>onOpen</code> and <code> onClose</code> callbacks as well as custom styling and a handful of options.</p>
        <p>Inspired by <a href="http://okonet.ru/projects/modalbox/">ModalBox</a>, an OSX style dialog built with <a href="http://www.prototypejs.org/ ">prototype</a>.</p>
        <!-- added id -->
        <a href='#' id='osx-modal' class='osx'>OSX Modal</a>
        <!-- new link for second modal -->
        <a href='#' id='second-modal' class='osx'>Second Modal</a>
    </div>

    <!-- modal content -->
    <div id="osx-modal-content">
        <div id="osx-modal-title">OSX Style Modal Dialog</div>
        <div class="close"><a href="#" class="simplemodal-close">x</a></div>
        <div id="osx-modal-data">
            <h2>Hello! I'm SimpleModal!</h2>
            <p>SimpleModal is a lightweight jQuery Plugin which provides a powerful interface for modal dialog development. Think of it as a modal dialog framework.</p>
            <p>SimpleModal gives you the flexibility to build whatever you can envision, while shielding you from related cross-browser issues inherent with UI development..</p>
            <p>As you can see by this example, SimpleModal can be easily configured to behave like an OSX dialog. With a handful options, 2 custom callbacks and some styling, you have a visually appealing dialog that is ready to use!</p>
            <p><button class="simplemodal-close">Close</button> <span>(or press ESC or click the overlay)</span></p>
        </div>
    </div>

    <!-- content for second modal -->
    <div id="second-modal-content">
        contents of second modal
    </div>
</div> 
```

JavaScript：

```
$('a.osx').click(function (e) {
    e.preventDefault();

    $('#' + this.id + '-content').modal({OPTIONS});
}); 
```

# python - Django 管理站点激活

> ID：14781622
> 
> 赞同：0
> 
> 时间：2013-02-08T21:25:22.477
> 
> 标签：python, django

我一直在研究 Django 教程，到目前为止一切都很完美。

然而，在第 2 部分（教如何处理管理站点）中，我遇到了一个问题。

[按照教程中的说明](https://docs.djangoproject.com/en/1.4/intro/tutorial02/#activate-the-admin-site)取消注释激活管理站点的行后，我尝试激活服务器并进入管理站点以查看以下错误：

```
DoesNotExist at /admin/
Site matching query does not exist 
```

好吧，通过一些谷歌搜索，我设法通过在 settings.py 中注释该行来解决它：

`'django.contrib.sites'`

这样做后一切似乎都正常，但我想这是一个问题，因为教程中没有提到取消注释这一行

姜戈：1.4.3

蟒蛇：2.7.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:51:34.687

取消注释`django.contrib.sites`并运行`syncdb`命令。如果您已经这样做了，但它似乎不起作用，并且您仍然想保留`sites`应用程序未注释，那么：

跑`./manage.py shell`

```
from django.contrib.sites.models import Site
Site.objects.create() 
```

在那之后一切都应该很好。如果您想修改新的站点记录，可以在 Django 管理部分中进行`sites`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:29:28.783

运行服务器之前的 Python manage.py syncdb

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-08T11:15:40.773

如果尚未完成，请创建一个用户：

```
python manage.py createsuperuser 
```

添加到文件 settings.py：

```
 INSTALLED_APPS = [
    ...
    'django.contrib.sites',
    ... 
```

]

并在 bash 运行中：

```
python manage.py migrate 
```

享受 ！

# ios - 乳胶到 NSAttributedString？

> ID：14781624
> 
> 赞同：5
> 
> 时间：2013-02-08T21:25:31.040
> 
> 标签：ios, math, nsstring, latex, nsattributedstring

是否有可用的库可以将 Latex 或其他数学符号转换为好看的 NSAttributedString？我见过[AttributedMarkdown](https://github.com/dreamwieber/AttributedMarkdown)和其他 Markdown-to-NSAttributedString 或 Markdown-to-HTML（可以转换为 NSAttributedString）库。但是乳胶呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:41:10.497

这个 [http://www-sop.inria.fr/marelle/tralics/](http://www-sop.inria.fr/marelle/tralics/) 是用 C++ 编写的，所以它应该在 Xcode 中编译，你可以用它来将它转换为 xml 或完全改变它来立即创建 NSAttributedString。希望能帮助到你...

# javascript - 使用 JavaScript 在循环中生成不同的函数名

> ID：14781628
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:25:43.593
> 
> 标签：javascript, function, loops

我试图在这个 for 循环中为函数生成不同的名称，例如 realname1、realname2、realname3 等。

```
for(i=0;i<data.results.length;i++) {
    pic = data.results[i].profile_image_url;
    var img = document.createElement("img");
    img.src=pic;
    img.width=50;
    img.height=50;
    img.addEventListener('click', realname, false); //here is the line where I want to change
    document.body.appendChild(img);
    username = data.results[i].from_user_name;
    username_array.push(username);
    text = data.results[i].text;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:35:27.430

理想情况下，您会希望创建一个更通用的函数来传递参数，而不是拥有多个函数。但是，如果没有看到这些功能的作用，我不能具体建议一个。

至于做你想做的事，这取决于函数是如何定义的。如果这些是全局函数（希望不是），那么这样的事情会起作用：

```
img.addEventListener('click', window["realname"+i], false); 
```

如果函数在一个公共对象中，会更好一些：

```
var someobj = {
    realname1 : function(){...},
    realname2...
} 
```

在这种情况下，你会这样做：

```
img.addEventListener('click', someobj["realname" + i], false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:37:06.317

您的问题有点模棱两可，但我想我可以猜到您要做什么。而且你不是用javascript方式做的:)

您应该知道您可以将函数分配给变量，因此您可以在循环中管理它们，而不是在很多名称下创建大量函数。

```
var somefunctionIjustDid = function(a){ return a+1; }
somefunctionIjustDid(3); //returns 4 
```

您想学习的第二件事是 javascript 作用域的一些基础知识。如果您想创建一个函数来处理单击并将其绑定到循环中的不同事物 - 它是这样的：

```
for(var i=...){

someNode.addEventListener('click',(function(){
  var store_i_for_later = i;
  return function(){
    //this here handles the event and has the current i value of the loop execution in store_i_for_later 
  }
})(),false)

} 
```

这种机制称为闭包，我推荐一些阅读。

毕竟 - 如果您使用`jQuery.on`委托[http://api.jquery.com/on/](http://api.jquery.com/on/)并将选择器作为第二个参数，您可能根本不需要该循环。或者你可以自己实现这个，不用 jQUery，但那是另一回事了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:30:41.183

```
img.addEventListener('click', 'realname_'+i+'()', false); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T21:31:36.610

在循环之外添加这样的对象

```
var functionObj = {
  '1':realname1,
  '2':realname2
}; 
```

所以在里面，你可以做这样的事情..

```
img.addEventListener('click', functionObj[i], false); 
```

编辑：错字。

# c++ - 创建 ostream 到文件或 cout 的正确方法

> ID：14781629
> 
> 赞同：4
> 
> 时间：2013-02-08T21:25:46.737
> 
> 标签：c++

我正在尝试为我在学校的项目创建一个 Log 类。它需要能够根据传递的参数将信息写入标准输出或文件。我正在研究如何做到这一点，我偶然发现了一个带有类似问题的线程：[从 std::cout 或 std::ofstream(file) 获取 std::ostream](https://stackoverflow.com/questions/366955/obtain-a-stdostream-either-from-stdcout-or-stdofstreamfile)

该线程与我自己的线程之间的唯一区别是我想在课堂内进行。`std::ostream out(buf)`尽管他们使用buf 即时使用和构建 ostream，但正在查看解决方案。如何在我的 Log 类中正确声明它，以便只有在我进入 Log 构造函数后才能构造“out”对象？

我在下面快速尝试了一下，但我不确定它是否正确，或者我是否走在正确的轨道上。感谢任何帮助，谢谢。

`out << "Some string" << endl;`编辑：我希望在我让这个 Log 类正常工作后能够做。

EDIT2：我现在收到以下新代码的错误`error : 'std::basic_ostream<_CharT, _Traits>::basic_ostream() [with _CharT = char, _Traits = std::char_traits<char>]' is protected`

```
// log.h
#include <string>
#include <fstream>

#ifndef LOG_H_
#define LOG_H_

class Log 
{
    public:
        enum Mode { STDOUT, FILE };

        // Needed by default
        Log(const char *file = NULL);
        ~Log();

        // Writing methods
        void write(char *);
        void write(std::string);
    private:
        Mode mode;
        std::streambuf *buf;
        std::ofstream of;
        std::ostream out;
};

#endif

// log.cpp
#include "log.h"
#include <iostream>
#include <stdlib.h>
#include <time.h>

Log::Log(const char *file)
{
    if (file != NULL)
    {
        of.open(file);
        buf = of.rdbuf();
        mode = FILE;
    }
    else
    {
        buf = std::cout.rdbuf();
        mode = STDOUT;
    }

    // Attach to out
    out.rdbuf(buf);
}

Log::~Log()
{
    if (mode == FILE)
        of.close();
}

void Log::write(std::string s)
{
    out << s << std::endl;
}

void Log::write(char *s)
{
    out << s << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:34:43.257

您使用 创建`tmp`并将`std::ostream tmp(buf);`其地址存储在`out`中`this->out = &tmp;`。但是，`tmp`将在构造函数的末尾超出范围，并且指针将不再指向有效对象。

您应该做的不是`out`a`std::ostream*`而是简单地 a `std::ostream`：

```
std::ostream out; 
```

然后在你的构造函数中，一旦你`buf`准备好了，你可以`out`通过做`out.rdbuf(buf);`.

* * *

回复编辑：

`std::ostream`没有默认构造函数 - 它必须采用缓冲区指针。我的错。但是，修复很简单。使用构造函数的成员初始化列表传递空指针（`nullptr`在 C++11`0`或`NULL`C++03 中）：

```
Log::Log(const char *file)
  : out(nullptr)
{
  // ...
} 
```

# android - 使用除调试哈希键以外的哈希键时，Android Facebook 应用程序崩溃

> ID：14781633
> 
> 赞同：1
> 
> 时间：2013-02-08T21:26:06.393
> 
> 标签：android, facebook, hash

我开发了一个使用调试哈希键完美运行的应用程序。但是当我在 Eclipse 下使用“Android Tools / Export Signed Application Package ...”生成的 apk 时，它会崩溃。

正如[http://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/](http://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/)下所述，我展示了一个显示哈希键的 Toast。我将此键添加到我的应用程序的哈希键列表中。但这无济于事。

我阅读[了集成了 facebook 登录的 android 应用程序，如何生成发布密钥？](https://stackoverflow.com/questions/12393860/android-app-with-facebook-login-integrated-how-to-generate-the-release-key)但没有找到答案。

先感谢您！BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T00:46:34.627

可能这个链接会帮助你我认为你使用签名的apk来生成hashkey

[签名的 APK 对 Facebook 有不同的 Key-Hash](https://stackoverflow.com/questions/11864700/signed-apk-has-different-key-hash-for-facebook)

# azure - 连接到 Azure ServiceBus 队列

> ID：14781639
> 
> 赞同：2
> 
> 时间：2013-02-08T21:26:41.507
> 
> 标签：azure, servicebus, azureservicebus

我正在开发我的第一个 Azure 实现，我已经设置了我的 azure 帐户，并使用 NuGet 将正确的 DLL 和配置安装到我的应用程序中。当我将 WCF 客户端设置为指向服务总线队列并运行该方法时，我得到了这个异常：

> Microsoft.ServiceBus.ServerErrorException

```
 at Microsoft.ServiceBus.RelayedSocketInitiator.Connect(Uri uri, TimeSpan timeout)
   at Microsoft.ServiceBus.ConnectivityModeConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   at Microsoft.ServiceBus.Channels.BufferedConnectionInitiator.Connect(Uri uri, TimeSpan timeout)
   at Microsoft.ServiceBus.Channels.ConnectionPoolHelper.EstablishConnection(TimeSpan timeout)
   at Microsoft.ServiceBus.Channels.ClientFramingDuplexSessionChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at Microsoft.ServiceBus.Channels.LayeredChannel`1.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout) 
```

我的端点配置是：

```
<endpoint address="sb://MyService.servicebus.windows.net/MyServicequeue"
                binding="netTcpRelayBinding" contract="PaperlessImportServiceWCF.PaperlessImportServiceSoap"
                name="MyServiceServiceSoap"  behaviorConfiguration="sbTokenProvider"/> 
```

我的`endpoint`行为是：

错误消息非常通用，我不确定我应该看什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:34:53.810

我认为您对中继服务的工作方式有一些误解。从您显示的配置中，您使用的是 NetTcpRelayBinding，它用于请求重放连接。但是，在您的端点中，您似乎正在使用队列地址作为端点。

a) 如果您打算以请求-回复方式使用您的服务/客户端，那么您需要创建一个服务总线中继端点，并在您的端点中使用该地址。[本教程](http://msdn.microsoft.com/en-us/library/ee706736.aspx)是此服务总线功能的一个很好的起点。

b) 如果您打算使用队列，那么您需要使用 NetMessagingBinding。[这篇文章](http://blogs.msdn.com/b/tomholl/archive/2011/10/07/using-service-bus-queues-with-wcf.aspx)是关于如何执行上述场景的一个很好的起点。

无论哪种情况，您似乎都使用了错误的基地址。'myservice' 是您的服务总线命名空间的名称吗？如果不是，那么您应该将其替换为您的命名空间的名称。基本服务总线地址的格式为：protocol://YOUR_NAMESPACE.servicebus.windows.net

# javascript - 使用 fs 时的文件路径

> ID：14781642
> 
> 赞同：0
> 
> 时间：2013-02-08T21:26:43.920
> 
> 标签：javascript, node.js, filepath, fs

所以我知道`fs`模块使用`process.cwd()`而不是模块的实际位置，但我仍然对文件路径有一点问题。

所以我有一个这样的应用程序结构：

```
- app
   - controllers
   - models
   - views
   - tmp
   - index.js 
```

我正在控制器中创建 csv 文件，并希望将其存储在`tmp`.

所以考虑到尽管在控制器中，

```
process.cwd() is '/app' 
```

我这样做了：

```
fs.open('tmp/FILENAME','w',function (err,fd) { 
```

err 为空，因此似乎工作正常。所以应该在 /app/tmp/

另一方面，在 index.js 我有

```
res.attachment(__dirname + '/tmp/FILENAME') 
```

当 console.logged 是

```
/app/tmp/FILENAME 
```

哪个是对的。很明显，另一半是造成问题的原因。

所以我的问题是-**考虑到 process.cwd() 在这种情况下使用 fs 的正确方法是什么？** 有点难过，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:54:12.823

依赖`process.cwd()`是有风险的，你稍后介绍的其他一些代码可能会改变它。

使用`__dirname + '/tmp/FILENAME'`更安全。

# java - 更新后刷新 JTable

> ID：14781645
> 
> 赞同：2
> 
> 时间：2013-02-08T21:26:55.983
> 
> 标签：java, swing, user-interface, binding, beans-binding

这是我遇到的问题的一个简单示例。

我有一个简单的课程：

```
public class Test{
    Integer a;
    Integer b;

    //getters and setters

    public void getC()
    {
        return a + b;
    }

} 
```

请注意，它有一个名为 C 的属性，它是 a 和 b 的总和。

然后我将它绑定到一个 JTable，如下所示：

```
List<Test> testList = new ArrayList<Test>();
...add some Test objects to the list
ObservableList observableList = ObservableCollections.observableList(testList);
JTable table = new JTable();
JTableBinding tableBinding = SwingBindings.createJTableBinding(AutoBinding.UpdateStrategy.READ_WRITE, observableList, table); 
```

然后，我使用以下代码为测试对象的每个属性 a、b 和 c 添加绑定。（注意这只是我使用的通用代码）

```
BeanProperty beanProperty = BeanProperty.create(properyName);
JTableBinding.ColumnBinding columnBinding = tableBinding.addColumnBinding(beanProperty);
columnBinding.setColumnName(columnName);
columnBinding.setColumnClass(clazz);
columnBinding.setEditable(editable); 
```

现在这将正确显示表格，但是当我更新表格中的 a 或 b 时会出现问题。由于 c 是根据 a 和 b 计算的，因此我希望 c 在其中一个值发生变化时更新。这不会发生。

我猜表需要刷新以反映实体的新值？

谁能解释我需要做些什么来实现这一点？我需要添加一些额外的 bean 绑定属性吗？

这是我正在使用的 bean 绑定库：

```
<dependency>
  <groupId>org.jdesktop</groupId>
  <artifactId>beansbinding</artifactId>
  <version>1.2.1</version>
</dependency>

org.jdesktop.swingbinding.SwingBindings 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:21:38.713

[作为参考，这里](https://stackoverflow.com/a/14393923/230513)讨论了潜在的问题，[这里](https://stackoverflow.com/a/13628183/230513)为`DefaultTableModel`和引用了手动解决方案`AbstractTableModel`。实际上，更改`a`或`b`必须通知任何`TableModelListener`可能`c`已更改的内容。这可能有助于指导您搜索合适的 bean 绑定属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T00:56:49.380

在此问题的帮助下[，](https://stackoverflow.com/questions/8389944/jtable-binding-not-permitted)我能够通过将 JTable 上的 setVale 函数覆盖为：

```
@Override
public void setValueAt(Object value, int row, int col)
{
    super.setValueAt(value, row, col);
    tableBinding.unbind();
    tableBinding.bind();
    revalidate();
} 
```

谢谢大神指点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-07T04:51:14.593

只需在更新或插入后写这两行

```
bindingGroup.unbind();
bindingGroup.bind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-08T00:19:24.040

我修了一点，这解决了问题；您不允许取消绑定主 bindingGroup，但您指定 jtablebinding 像这样更新它

```
Binding b = bindingGroup.getBindings().get(0);
b.unbind();
b.bind(); 
```

# c++ - c++自定义类型向量优化

> ID：14781650
> 
> 赞同：0
> 
> 时间：2013-02-08T21:27:11.867
> 
> 标签：c++, vector, constructor, temporary, custom-type

我有一个 A 类，它有一个私有 int _i 成员。我希望将 n 个 A 实例存储在一个向量中。因此，我给了向量一个初始容量。另外，我想保存具有不同 _i 值的对象，并在循环中构造具有不同值的对象。对应代码如下：

```
 #include <vector>
#include <iostream>

using namespace std;

class A
{
public:
    A( int i = -1 ) { _i = i; cout << "cc  " << _i << endl; }
    A( const A &other ) { _i = other._i; cout << "ccc " << _i << endl; }
    ~A() { cout << "dc  " << _i << endl; }
    int get_i() const { return _i; }
private:
    int _i;
};

const int n = 2;

vector<A> v( n );

int main()
{
    cout << "---" << endl;

    for ( int i = 0; i < n; i++ )
        v[i] = A( i );

    cout << "---" << endl;

    for ( int i = 0; i < n; i++ )
        cout << v[i].get_i() << endl;

    cin.ignore( 1 );

    return 0;
}

output:

cc  -1
ccc -1
dc  -1
cc  -1
ccc -1
dc  -1
---
cc  0
dc  0
cc  1
dc  1
---
0
1 
```

我认为，初始容量参数首先会不必要地创建和破坏对象。并且在第一个循环中也不必要地创建了临时对象。我的问题是如何修复代码以直接将对象传递到向量中而无需默认和临时对象构造？下面是我想要的输出：

```
---
cc  0
cc  1
---
0
1 
```

准确地说，我不知道默认和临时对象创建是否会暴露性能问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:29:30.657

使用`reserve`, not`resize`来设置容量。然后`emplace_back`用于就地施工，避免临时工。

```
vector<A> v;

int main()
{
    v.reserve(n)
    cout << "---" << endl;

    for ( int i = 0; i < n; i++ )
        v.emplace_back( 1 );
} 
```

# r - read.table 在控制台中使用时与在 R 降价文件中使用时的行为不同

> ID：14781652
> 
> 赞同：1
> 
> 时间：2013-02-08T21:27:17.640
> 
> 标签：r, knitr, rstudio, r-markdown

我正在尝试使用 RStudio 在 R markdown 中的代码块内读取文件（管道分隔）。请参阅下面的 R 降价代码块

```
```{r}
dealInfo <- read.table("deneme.dat",header=TRUE,sep="|",quote="",comment="",fill=TRUE)
dim(dealInfo)
``` 
```

输出

```
dealInfo <- read.table("deneme.dat", header = TRUE, sep = "|", quote = "", comment = "", 
fill = TRUE)
## Warning: invalid input found on input connection 'deneme.dat'
## Warning: incomplete final line found by readTableHeader on 'deneme.dat'
dim(dealInfo)
## [1]  1 50 
```

文件的第一行有“Société”一词。但是，当我在控制台中输入命令时，read.table 会毫无怨言地读取文件中的所有行。读入 data.frame 时的“é”字符将转换为“\xe9”。文件 deneme.dat 包含三行数据。当我降价打印 dealInfo 的内容时，我看到在第一次出现“é”之后什么都没有被读取。我相信这解释了第二个警告。

我不确定为什么控制台和降价在读取同一个文件时表现不同，看起来语言环境和其他配置参数在两种环境中都是相同的。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T23:24:03.823

我猜这是一个错误（关于文件编码），不久前在 RStudio 和 knitr 中都已修复。请升级[RStudio (v0.97.316)](http://www.rstudio.com/ide/download/)和[knitr (](http://cran.r-project.org/package=knitr) v1.0.5) ，看看问题是否仍然存在。另请参阅[常见问题解答 1](https://github.com/yihui/knitr/blob/master/FAQ.md) :)

在最坏的情况下，您可以使用操作系统的本机编码 ( `File => Save with Encoding`) 重新保存 Rmd 文档。您描述的问题的根本原因是 RStudio`options(encoding = ...)`用于声明文档的编码，但这是不合适的，因为它改变了整个 R 会话的编码（我承认这是由于我在非常开始）。现在 RStudio 能够以`knitr`非侵入性的方式将编码传递给。

# c - 读取文件时出现随机内存

> ID：14781653
> 
> 赞同：0
> 
> 时间：2013-02-08T21:27:21.830
> 
> 标签：c, file, fread

我已经制作了一个函数，可以将文件读入 C 中的内存。但是我遇到了代码问题，随机字符似乎出现在字符串的末尾。即使我在最后添加了 '\0' 。我根本不明白这一点，因为整个文件都出现了，而且我没有足够的空间来容纳更多的字符，所以如果有更多的字符，应该会有某种错误？无论如何，有人知道是什么原因造成的吗？

```
char* LoadSourceFile(char* filename)
{
    int fileSize;
    char* buffer;
    struct stat handle;
    FILE* bestand;

    stat(filename, &handle);
    if (fopen_s(&bestand, filename, "r") != 0) {
        return NULL;
    }

    fileSize = handle.st_size;
    handle.st_size++;
    buffer = (char*)malloc(handle.st_size);
    if (buffer == NULL) {
        return buffer;
    }

    fread_s(buffer, handle.st_size, fileSize, 1, bestand);
    buffer[fileSize] = '\0';
    fclose(bestand);

    return buffer;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:32:44.377

这

```
fread_s(buffer, handle.st_size, fileSize, 1, bestand); 
```

应该

```
fread_s(buffer, handle.st_size, 1, fileSize, bestand); 
```

根据[文档](http://msdn.microsoft.com/en-us/library/hh977173.aspx)，该函数`fread_s`接受以下内容：

```
size_t fread_s(void *buffer,size_t bufferSize, size_t elementSize, size_t count, FILE *stream ); 
```

> 缓冲区：数据的存储位置。
> 
> bufferSize：目标缓冲区的大小（以字节为单位）。
> 
> elementSize：**要读取的项目的大小（以字节为单位）。**
> 
> count：要读取的最大项目数。
> 
> 流：指向 FILE 结构的指针。

您将其设置`elementSize`为`filesize`意味着每个元素都是`filesize`字节，而它应该是 1 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:33:54.533

查看 fread_s 的返回值，它是读取到缓冲区的字节数。它可能低于预期。

```
bytes_read = fread_s(buffer, handle.st_size, fileSize, 1, bestand);
buffer[bytes_read] = '\0'; 
```

编辑：您必须交换计数/大小参数才能使我所说的正确：

```
bytes_read = fread_s(buffer, handle.st_size, 1, fileSize, bestand);
buffer[bytes_read] = '\0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:41:57.303

请脱掉

```
handle.st_size++; 
```

并插入

```
buffer = (char*)malloc(sizeof(char) * ( handle.st_size + 1 ) ); 
```

和

```
fread_s(buffer, handle.st_size + 1, 1, handle.st_size, bestand); 
```

希望能帮助到你 ：）

# sed - sh 脚本行中“-”的用途是什么： ext="$(echo $ext | sed 's/\./\\./' -)"

> ID：14781654
> 
> 赞同：2
> 
> 时间：2013-02-08T21:27:32.283
> 
> 标签：sed, gnu, sh, bsd

我正在将一个显然是使用 GNU 实现编写的 sh 脚本移植`sed`到`sed`. 脚本中带有原始注释的确切行是：

```
# escape dot in file extension to grep it
ext="$(echo $ext | sed 's/\./\\./' -)" 
```

我能够用以下方法重现结果（显然我没有用尽所有可能的值`ext`）：

```
ext=.h; ext="$(echo $ext | sed 's/\./\\./' -)"; echo [$ext] 
```

使用 GNU 的`sed`以下实现返回：

```
[\.h] 
```

使用 BSD 的`sed`以下实现返回：

```
sed: -: No such file or directory
[] 
```

为. `ext=.h; ext="$(echo $ext | sed 's/\./\\./')"; echo [$ext]`_ `[\.h]`_`sed`

我查看了 GNU 和 BSD 的`sed`手册页都没有发现任何关于尾随“-”的信息。用“-”搜索`sed`也不是很有成效。

“-”是错字吗？某些意外值是否需要“-” `$ext`？问题不`sed`在于 ，而在于`sh`？

有人可以指导我看什么，或者更好地解释“-”的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:31:29.293

在我的系统上，该语法没有记录在手册页中，但它在“信息”页面中：

> sed 选项... [脚本] [输入文件...]
> 
> 如果您不指定 INPUTFILE，或者如果 INPUTFILE 是`-',`sed'，则过滤标准输入的内容。

鉴于这种特殊用法，我认为您可以省略“-”，它应该仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T01:13:50.020

你的具体问题得到了回答，但你的脚本全错了。看看这个：

```
# escape dot in file extension to grep it
ext="$(echo $ext | sed 's/\./\\./')" 
```

主要问题是：

1.  您没有引用您的变量 ($ext)，因此它将通过文件名扩展加上如果它包含空格将作为多个参数而不是 1 传递给 echo。请改为：

    ```
    ext="$(echo "$ext" | sed 's/\./\\./')" 
    ```

2.  您正在使用一个外部命令 (sed) 和一个管道来做一些 shell 自己可以做的事情。改为这样做：

    ```
    ext="${ext/./\.}" 
    ```

3.  最糟糕的是：您正在转义变量中的 RE 元字符 (.)，因此您可以将其传递给 grep 以对其进行 RE 搜索，就好像它是一个字符串一样 - 这没有任何意义并且变得难以处理在一般情况下，您的变量可以包含 RE 元字符的任意组合。只需进行字符串搜索而不是 RE 搜索，您无需转义任何内容。不要执行上述任何一个替换命令，然后执行其中任何一个而不是`grep "$ext" file`：

    ```
    grep -F "$ext" file
    fgrep "$ext" file
    awk -v ext="$ext" 'index($0,ext)' file 
    ```

# c# - 抽象连接错误

> ID：14781655
> 
> 赞同：1
> 
> 时间：2013-02-08T21:27:33.083
> 
> 标签：c#, connection, abstraction

我有一个名为 IConnection 的接口

```
public interface IConnection
{

    bool IsConnected { get; }
    Task ConnectAsync(IEndPoint remoteEP);
    Task<int> SendAsync(byte[] data, int offset, int size);
    Task<int> ReceiveAsync(byte[] buffer, int offset, int size);
    void Disconnect();
    void Close();

    event EventHandler<DisconnectedEventArgs> Disconnected;

} 
```

它由两种不同类型的连接实现——基于 Socket 的连接类和基于 HTTP 的连接类。我还希望将来可以选择添加其他连接类型。

在我的主 ChatClient 类中启动连接时，我将检查用户的配置，然后根据用户的喜好，创建一个 SocketConnection 或一个 HTTPConnection。从那时起，我只指使用它的 IConnection 接口的连接。

IConnection 类有一个 Disconnected 事件，当用户调用 Disconnect 或发生某些意外连接错误时会引发该事件。DisconnectedEventArgs 将包含有关导致断开连接发生的原因的信息。

我想知道的是，我如何抽象不同类型的错误？

套接字可能会遇到许多不同的错误情况，这会导致它断开连接，包括但不限于 -

*   远程端发起了一个优雅的断开连接（即..读取返回 0）
*   读/写抛出带有标志 SocketError.ConnectionAborted 的 SocketException
*   读/写抛出带有标志 SocketError.NetworkReset 的 SocketException

http 连接也可能会遇到许多不同的错误情况，例如 -

*   轮询远程服务器失败 - 例如..主机突然消失
*   HTTP 身份验证凭据被拒绝

如何将套接字的所有可能错误和 http 连接的所有可能错误组合成一个类型？

我是否使用包含所有可能错误的值的枚举？

我有简单的错误代码和错误描述吗？

我应该处理多少个套接字错误条件？只有我希望遇到的那些？还是全部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:33:17.233

为什么不`DisconnectEventArgs`包含一个`public Exception Error { get; set; }`. `Error`正常调用时为null `Disconnect`，否则包含Socket或Http异常。

# android - 从 Play 商店安装 AndroidApp 时崩溃

> ID：14781656
> 
> 赞同：1
> 
> 时间：2013-02-08T21:27:49.660
> 
> 标签：android

我有一个最近提交到 Play 商店的应用程序。我已经测试了 .apk 文件，一切正常。在第一次安装时（从商店） - 您可以登录，但随后它崩溃了。这是我从报告中获得的堆栈跟踪：

```
java.lang.NullPointerException
at com.latlon.InitialSearchActivity.e(Unknown Source)
at com.latlon.InitialSearchActivity.a(Unknown Source)
at com.latlon.InitialSearchActivity.g(Unknown Source)
at com.latlon.InitialSearchActivity.a(Unknown Source)
at com.latlon.MyResultReceiver.onReceiveResult(Unknown Source)
at android.os.ResultReceiver$MyRunnable.run(ResultReceiver.java:43)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method) 
```

我只是不确定从哪里开始寻找。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:35:41.323

好吧，堆栈跟踪的这一部分是您的代码：

```
java.lang.NullPointerException
at com.latlon.InitialSearchActivity.e(Unknown Source)
at com.latlon.InitialSearchActivity.a(Unknown Source)
at com.latlon.InitialSearchActivity.g(Unknown Source)
at com.latlon.InitialSearchActivity.a(Unknown Source)
at com.latlon.MyResultReceiver.onReceiveResult(Unknown Source) 
```

你`onReceiveResult()`在课堂上的方法`MyResultReceiver`被调用了。该方法调用了类中的方法`a`，`InitialSearchActivity`该方法调用了该类中的方法，该方法调用了该类中的方法`g`，该方法调用了`a`该类中的方法`e`。在方法`e`中有一个`NullPointerException`（即：在该方法中，您尝试使用您认为包含对象引用的变量，但该变量包含`null`.

看起来方法名称已被混淆，因此您可能需要查看代码才能弄清楚真正的方法名称是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:49:04.507

检查 Proguard 上的文档（这是进行代码混淆的工具）。

您很可能“过度混淆”，这可能会导致已部署代码出现问题。就像你看到的那样。

您可以通过编辑“proguard-project.txt”文件来关闭 Proguard 功能。为确保不会发生混淆，请确保此文件中的每一行都被注释掉（通过在每行的开头放置一个哈希 - 或 # 标记）。

有一个名为的命令`retrace`允许您取消映射您的混淆。您需要提供一些由 proguard 创建的文件才能使其正常工作。

检查文档以获得完整的解释：http: [//developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

快速修复（消除 Proguard）是注释文件，因此它不会首先运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T21:49:29.533

看起来你使用了一些工具（比如 Proguard）来混淆你的代码。您是否在混淆后测试过您的 APK？

从上面的日志中，您的代码中发生了 NullPointerException，您需要使用混淆工具生成的密钥文件对代码进行去混淆，以便找出已访问空指针的真实位置（代码行） .

请注意，在混淆的过程中，有时（人为错误）会导致一些需要的方法被混淆。这反过来会导致找不到这些方法，因此可能会引发异常 (NoSuchMethod)。

# django - Vagrant上的Django，本地和Heroku上的Postgres，无法连接到服务器：没有这样的文件或目录

> ID：14781659
> 
> 赞同：0
> 
> 时间：2013-02-08T21:28:18.873
> 
> 标签：django, heroku, postgresql-9.1

我终于将我的 Django 应用程序部署在 Heroku 上，在本地和生产环境中使用 Vagrant 和 Postgres。本地主机已启动并正在运行，我在管理员中添加用户。但是当我跑步时

```
heroku run python manage.py syncdb 
```

它会抛出这个错误：

psycopg2.OperationalError：无法连接到服务器：没有这样的文件或目录服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接？

当我尝试在线访问管理员时也会发生同样的事情：http: [//vast-sierra-7949.herokuapp.com/admin/](http://vast-sierra-7949.herokuapp.com/admin/)

我是 Heroku 的新手，我已经尝试了几乎所有我能找到的入门教程，包括

[http://gettingstartedwithdjango.com/en/lessons/introduction-and-launch/](http://gettingstartedwithdjango.com/en/lessons/introduction-and-launch/)

[https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django) ,

[https://github.com/callmephilip/django-heroku-bootstrap](https://github.com/callmephilip/django-heroku-bootstrap)和

[https://github.com/jpadilla/django-project-template](https://github.com/jpadilla/django-project-template)

这最后一个 github 链接实际上允许我进行部署，在我运行时遇到错误之前

```
git push heroku master 
```

那个错误是：manage.py：错误：没有这样的选项：--noreload

我知道有几个帖子有这个错误，但我已经浏览了尽可能多的帖子，但没有解决这个问题。

先感谢您，

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T00:38:39.903

查看这篇博文：http: [//jamie.ideasasylum.com/2012/09/connecting-navicat-to-postgresql-on-vagrant/](http://jamie.ideasasylum.com/2012/09/connecting-navicat-to-postgresql-on-vagrant/)

作者讨论了如何`pg_hba.conf`通过添加以下行来进行修改，以允许主机（在本例中为 Heroku 实例）连接到安装在主机内来宾 VM 上的 postgres 服务器。

```
# "local" is for Unix domain socket connections only
local   all             all                                     md5
# IPv4 local connections:
host    all             all             127.0.0.1/32            md5
host    all             all             10.0.2.2/32             md5 
```

我不确定您是否可以在 Heroku 实例上访问这些文件，但这是一个开始的地方。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:31:47.577

请务必[设置 heroku DB 设置](https://devcenter.heroku.com/articles/django#database-settings)

# sencha-touch - 如何使用 Sencha Touch 中的 Navigation View 设置导航栏标题的标题？

> ID：14781661
> 
> 赞同：0
> 
> 时间：2013-02-08T21:28:31.560
> 
> 标签：sencha-touch, sencha-touch-2

```
Ext.define('MyView', {
    extend: 'Ext.navigation.View',

    alias: 'widget.myview',

    config: {                
        title: 'My View',
        items: [            
            {
                id: 'alist',
                xtype: 'list',
                itemTpl: [
                    '<div>{DisplayName}</div>'
                ],
                onItemDisclosure: true
            }
        ]
    }
}); 
```

目前初始导航视图没有设置标题，即使我已经在 config.xml 中指定了它。这是一个错误吗？我意识到当你推送一个新视图时，它将使用视图的标题来填充，但我需要在推送任何视图之前最初设置标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:45:31.680

你的`alist`项目是第一个视图，给它一个标题，你应该很好。导航视图从当前活动项目中获取它的标题。

# svn - 需要将现有的颠覆项目放在新的根文件夹下

> ID：14781666
> 
> 赞同：0
> 
> 时间：2013-02-08T21:29:05.153
> 
> 标签：svn, subclipse

我正在尝试让颠覆与我的新 maven 设置一起玩得很好

考虑以下 sscce 场景：

**项目 1** - 已经在 SVN 中

```
/project1
  /src
  /target
  pom.xml 
```

**项目 2** - 也已经在 SVN 中

```
/project2
  /src
  /target
  pom.xml 
```

我想将这两个项目都转换为一个全球 Maven 项目的模块，即

```
/myProjects
  /project1
    /src
    /target
    pom.xml
  /project2
    /src
    /target
    pom.xml
  pom.xml 
```

文件系统已经在服务器和我的开发机器上以这种方式设置，但外部`/myProjects`不是实际的颠覆文件夹（我使用 subclipse 中的“右键单击 -> 新建 -> 新建远程文件夹”创建它，然后其他文件夹上的“右键单击->重命名/移动”。但后来我尝试执行“myProjects->共享项目”，它想清除我的 SVN 数据/评论等。

我该怎么办？[这种直接命令解决方案](https://stackoverflow.com/questions/417726/how-to-move-a-single-folder-from-one-subversion-repository-to-another-repository)是唯一的方法，还是我可以使用 subclipse 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T03:46:25.337

1.  没有*像*“Subversion 项目”这样的东西（或者至少是*消歧*）。/project1 和 /project2 是**单独的 Subversion 存储库**的根还是它们**在公共存储库中的不同路径**？
2.  在任何情况下，都需要某种类型的对存储库服务器（和管理端工具）的访问，subclipse 只是客户端颠覆客户端

    *   转储/加载方式是**物理连接**两个（或多个）独立存储库的常用方式
    *   您还可以选择并实现存储库的**逻辑连接**：在根目录下使用 /myProjects 创建新存储库，添加 /project1 和 /project2 作为目录外部，并从三个物理存储库中获取所需的逻辑树
    *   如果 /project1 和 /project2 是公共 repo 的一部分，您可以重新组织存储库树，仅使用客户端命令：`svn mkdir`+`svn mv`就可以了

# javascript - jQuery任务，获取一个select html元素的值

> ID：14781668
> 
> 赞同：2
> 
> 时间：2013-02-08T21:29:15.150
> 
> 标签：javascript, jquery, html

我有一个我无法解决的问题......我有这个 jQuery 代码：

```
v=$('#sede').val();
$('#sede').change(function() {
    console.log('valor de v:'+v);
}); 
```

这个html选择：

```
<select name="se" id="sede" size="1">
  <option value="1">Primer Elemento</option>
  <option value="2">Segundo Elemento</option>
  <option value="3">Tercer Elemento</option>
  <option value="4">Cuarto Elemento</option>
</select> 
```

问题是变量 v 仅在我单击选择时显示第一个项目值，无论第二个、第三个或任何项目...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T21:30:27.980

您应该获得`<select>`on change 事件的值：

```
var v;
$("#sede").change(function() {
    v = this.value;
    console.log("valor de v:" + v);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:30:51.203

那是因为您需要在更改`v`后重置 的值`select`。像这样：

```
var v;
$('#sede').change(function() {
  v = $('#sede').val();
  console.log('valor de v:'+v);
}); 
```

出于演示目的，请参阅带有警报的[DEMO 。](http://jsfiddle.net/zaknotzak/WwVzU/)

# c# - 在win8商店应用程序中，如何对GridView中的项目进行淡入叠加？

> ID：14781675
> 
> 赞同：0
> 
> 时间：2013-02-08T21:29:59.930
> 
> 标签：c#, xaml, windows-8, microsoft-metro, winrt-xaml

我是 Win8 开发的新手，我坚持实现一些我认为相当容易的设计，因为我确实有一些 C#、Javascript 等方面的经验。

我这样创建了一个DataTemplate：</p>

```
<DataTemplate x:Key="Customized250x250ItemTemplate">
    <Grid HorizontalAlignment="Left" Width="250" Height="250">
        <Border>
            <Image Source="{Binding Image}" Stretch="UniformToFill" AutomationProperties.Name="{Binding Title}"/>
        </Border>
        <TextBlock HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding State}" VerticalAlignment="Top" Margin="0,10,20,0" FontFamily="Segoe UI" FontSize="12"/>
        <Grid x:Name="InfoGrid" Background="Black" Opacity="0">
            <Grid.RowDefinitions>
            <RowDefinition Height="20"/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition Height="20"/>
        </Grid.RowDefinitions>
        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="Nickname" VerticalAlignment="Center" Margin="10,0,0,0" FontFamily="Segoe UI" FontSize="17.333" Grid.Row="1"/>
        <TextBlock HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding Nickname}" VerticalAlignment="Center" Margin="0,0,20,0" FontFamily="Segoe UI" FontSize="19.333" Grid.Row="2"/>
        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="Age" VerticalAlignment="Center" Margin="10,0,0,0" FontFamily="Segoe UI" FontSize="17.333" Grid.Row="3"/>
        <TextBlock HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding Age}" VerticalAlignment="Center" Margin="0,0,20,0" FontFamily="Segoe UI" FontSize="19.333" Grid.Row="4"/>
        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="Race" VerticalAlignment="Center" Margin="10,0,0,0" FontFamily="Segoe UI" FontSize="17.333" Grid.Row="5"/>
        <TextBlock HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding Race}" VerticalAlignment="Center" Margin="0,0,20,0" FontFamily="Segoe UI" FontSize="19.333" Grid.Row="6"/>
        <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="Language" VerticalAlignment="Center" Margin="10,0,0,0" FontFamily="Segoe UI" FontSize="17.333" Grid.Row="7"/>
        <TextBlock HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding Language}" VerticalAlignment="Center" Margin="0,0,20,0" FontFamily="Segoe UI" FontSize="19.333" Grid.Row="8"/>
        </Grid>
    </Grid>
</DataTemplate> 
```

那个名为“ **InfoGrid** ”的 Grid 被设计为**当前悬停 GridViewItem**的详细信息的**覆盖容器**，当某个**GridViewItem 悬停**时，覆盖将**很好地淡入**。所以我将它的不透明度设置为 0，寻找一些方法来完成我的设计。（我在网站上使用过这种设计很多次，但第一次在 Win8 应用程序中使用）

 ******那时我真的觉得自己被困住了，这似乎是不可能的。

我倾向于覆盖模板（ItemTemplate & ItemContainerStyle）它不起作用。ItemTemplate 都是关于Data，ItemContainerStyle 都是关于style，但它们是相互**独立的**，当PointerOver 状态为on 时，它不能对ItemTemplate 中的内容做任何事情，只是简单地改变外部容器的一些无用属性。

这让我感到困惑，为什么 Win8 Metro 中的 GridView 不为单个 GridViewItem 提供**悬停**事件，我需要知道什么来完成这个吗？请给点提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:41:51.600

虽然`ItemContainerStyle`可能包括一些可以帮助您的视觉状态 - 简单地将 a`UserControl`放在`ItemTemplate`/中可能会更容易`DataTemplate`。一旦您创建了一个`UserControl`- 您可以轻松访问其代码隐藏，并且您可以随时处理各种事件、定义视觉状态和这些状态之间的转换。您的问题可能是没有可以通过触摸输入处理的悬停事件，因此您应该考虑一些替代方案 - 也许在您点击项目时在详细信息视图中或在单独的面板中显示您的叠加网格视图项。请注意，`TextBlock`大多数用户无法读取 250x250 磁贴顶部的 10 行或 8 秒网格。******

# symfony - Doctrine - 根据字段检查记录是否存在

> ID：14781688
> 
> 赞同：8
> 
> 时间：2013-02-08T21:31:05.557
> 
> 标签：symfony, doctrine-orm

在 symfony2 中使用教义，我有一个简单的用户模型，其中包含以下字段：

```
Username
Email
Password 
```

如何根据电子邮件地址加载模型？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T21:39:38.247

```
$user = $this->getDoctrine()
             ->getRepository('YourBundle:User')
             ->findOneBy(array('email' => $email)); 
```

请阅读有关此[的官方学说或文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html#by-simple-conditions)

# sql - 在 Quality Center 中生成 Excel 报告时出错

> ID：14781693
> 
> 赞同：0
> 
> 时间：2013-02-08T21:31:30.540
> 
> 标签：sql, excel, hp-quality-center

我编写了从头到尾测试良好的 SQL 代码（所有可能的值），但是当“生成报告”到 Excel 时，弹出错误（“”不是有效的浮点值）。实际上，我的值都不是有效的浮点值，到目前为止它只是一个列表。我已关闭后处理，因此它与任何宏无关。我该如何克服这个错误，真正的问题是什么？SQL 相当简单：

```
SELECT
run1.rn_run_name,
cycle.cy_cycle,
test.ts_name,
STEP.ST_STEP_NAME,
STEP.ST_STATUS
FROM (
SELECT
*
from run
where rownum =1 order by RN_EXECUTION_DATE desc
) run1
left join cycle on cycle.cy_cycle_id = run1.rn_cycle_id
left join step on run1.rn_run_id = step.st_run_id
left join test on step.st_test_id = ts_test_id
where cycle.cy_cycle_id  is not null
and run1.rn_run_id  is not null
and step.st_test_id is not null
and  ts_test_id is not null
order by
cycle.cy_cycle,
test.ts_name,
run1.rn_run_name,
STEP.ST_STEP_ORDER 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T21:47:54.943

此问题已由 ALM 补丁 12 修复。

# c# - 如何在数据集 DataTable 中显示 DataColumns

> ID：14781694
> 
> 赞同：2
> 
> 时间：2013-02-08T21:31:31.260
> 
> 标签：c#, sql, sql-server, vb.net, sql-server-2005

我有一个查询，我将它作为数据表放入数据集中。查询运行良好，但是在数据表中它没有在数据列中列出任何内容，因为我无法报告它...任何想法为什么这不起作用？我的查询如下。

```
SELECT * FROM (
    SELECT timeclock.dtTimeIn, timeclock.dtTimeOut, employees.sfirstname,
       RANK() OVER ( ORDER BY dtTimeIn) rk1, --earliest record gets 1
       RANK() OVER (ORDER BY dtTimeOut DESC) rk2 --latest record gets 1

    FROM   TimeClock INNER JOIN
                         Employees ON TimeClock.lEmployeeID = Employees.lEmployeeID
    WHERE (dtTimeIn > dateadd(day, datediff(day, 0, getdate())-1, 0)) AND (dtTimeOut < dateadd(day, datediff(day, 0, getdate()), 0)) AND 
      (sDept IN ('1', '2', '3'))
) A
WHERE rk2=1 
```

我运行查询时的当前输出：

```
 dtTimeIn                    dtTimeOut       sfirstname    rk1      rk2
2/7/2013 2:36:00 PM 2/7/2013 7:52:33 PM        Brian        10        1 
```

![在此处输入图像描述](../Images/148a10fbd64f375eb1d8a2a78dffbf14.png)

在向导中创建表适配器时...我收到一条错误消息：

```
The Wizard detected the following problems when configuring the TableAdapter:
"OpenTime":

Details:
Generated SELECT statement.
The OVER SQL construct or statement is not supported
To add these components to your dataset, click Finish. 
```

我猜它不喜欢查询...但我不确定除了使用“OVER”功能之外如何完成查询...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T21:47:49.400

由于`TableAdapter`向导的限制，您必须创建`DataTable`使用代码。

```
DataTable dataTable;

using (SqlConnection sqlConn = new SqlConnection())
{
    sqlConn.Open();

    using (SqlDataAdapter sqlDataAdapter = new SqlDataAdapter())
    using (sqlDataAdapter.SelectCommand = sqlConn.CreateCommand())
    {

        sqlDataAdapter.SelectCommand.CommandType = CommandType.Text;
        sqlDataAdapter.SelectCommand.CommandText = '
            SELECT * FROM (
                SELECT timeclock.dtTimeIn, timeclock.dtTimeOut, employees.sfirstname,
                    RANK() OVER ( ORDER BY dtTimeIn) rk1, --earliest record gets 1
                    RANK() OVER (ORDER BY dtTimeOut DESC) rk2 --latest record gets 1

                FROM TimeClock INNER JOIN
                    Employees ON TimeClock.lEmployeeID = Employees.lEmployeeID
                WHERE (dtTimeIn > dateadd(day, datediff(day, 0, getdate())-1, 0)) AND (dtTimeOut < dateadd(day, datediff(day, 0, getdate()), 0)) AND (sDept IN ('1', '2', '3'))
            ) A
            WHERE rk2=1';

        sqlDataAdapter.Fill(dataTable);
    }
} 
```

填写完毕后`dataTable`，只需将其分配给 ReportViewer 的`DataSource`

```
ReportDataSource rds = new ReportDataSource(dataTable.TableName, dataTable);
ReportViewer1.LocalReport.DataSources.Clear();
ReportViewer1.LocalReport.DataSources.Add(rds); 
```

请注意，这些代码片段中有很大一部分未经测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-11T18:34:36.070

我认为不要使用拖放界面来创建 tableAdapter，因为您的查询包含`OVER SQL`构造（如错误所说），您必须创建 tableAdapter 并在代码中填充数据表。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T21:11:42.000

您可以从查询中创建一个视图，然后简单地从您的视图中选择，这应该从 tableAdapter 中隐藏 OVER SQL。

# extjs - 如何在php中访问post参数？

> ID：14781699
> 
> 赞同：1
> 
> 时间：2013-02-08T21:31:54.087
> 
> 标签：extjs, yii, extjs4

我在 Extjs4 plus yii 框架中工作并使用 MVC 结构。我打算将数据从 extjs4 发送到 yii 框架。我正在使用 post 方法将数据发送到服务器端，但我还没有成功在 yii 框架中显示数据。当我使用 get() 方法时，数据很容易访问到 yii 框架端。实际上我不想在 url 中显示数据，所以这就是我在 extjs4 中使用 post() 方法的原因。

这是我的一些代码：

1.  模型文件：

    ```
    Ext.define('Bal.model.sn.UserModel', {
        extend: 'Ext.data.Model',
        //idproperty:'userId',//fields property first position pk. 
        fields: ['userId', 'firstName', 'middleName', 'lastName', 'languageId', 'primaryEmail', 'birthDate', 'password', 'securityQuestionId', 'securityQuestionAnswer', 'isMale', 'creationTime', 'ipAddress', 'confirmationCode', 'userStatusId', ]
    }); 
    ```

2.  存储文件：

    ```
    Ext.define('Bal.store.sn.UserStore', {
        extend: 'Ext.data.Store',
        model: 'Bal.model.sn.UserModel',
        //autoLoad: true,

        proxy: {
            type: 'ajax',
            api: {
                read: 'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin',
                create: 'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin',
                //update: ,
                //destroy: ,
            }, //End of api
            extraParams: {
                hello: 'Inside store',
            },
            actionMethods: {
                create: 'POST',
                read: 'POST',
                update: 'POST',
                destroy: 'POST'
            },
            reader: {
                type: 'json',
                //root: ,
                //successProperty: ,
            }, //End of reader
            writer: {
                type: 'json',
                root: 'records',
            }, //End of writer
        } //End of proxy

    }); //End of store 
    ```

3.  我的控制器文件一些代码：

    ```
    var obj = this.getStore('sn.UserStore');
    obj.load({
        params: {
            hello: 'jitu'
        }
    }); 
    ```

4.  这是我的 yii 框架控制器文件代码：

    ```
    $postData = json_decode(file_get_contents("php://input"), true);
    $clientData = $postData['records'];

    echo $_POST['hello']; 
    ```

如何在 yii 框架中显示这个 hello 参数？请给点建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:12:47.593

我用这样的东西。如果 $_POST['PostDataName'] 为空 getPost($name) 返回 NULL

```
public function actionFoo()
{
   $data = Yii::app()->request->getPost('PostDataName');
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-09T04:55:08.817

你得到什么错误。像 400、404、500 等。你的 YII 应用程序中是否启用了 CSRF。如果没有，那么应该这样做。

```
public function actioTest()
{
    $post = $_POST['hello'];
} 
```

如果启用了 CSRF，那么您还必须在请求中传递 CSRF 值。

# meteor - 正确使用回调？

> ID：14781701
> 
> 赞同：0
> 
> 时间：2013-02-08T21:32:09.527
> 
> 标签：meteor

我正在学习流星编写一个简单的应用程序来从一个集合中提取信息（一组，并基于从该集合返回的内容（项目、名称和项目 ID 的大列表），在不同的集合中查找一个项目名称。我的想法是项目集合只在服务器上发布，因为它很大并且客户端不需要直接访问它。

一切或多或少都有效，除了我认为我没有正确处理回调。这是我写的简单测试。我传递项目名称的模板：

```
Template.operations.getTypeID = function(name) {
  result = "";
  console.log("Precall Logging name: ", name);
  console.log("Precall Logging result: ", result);

  result = Meteor.call('getID', name, function (error, result) {
    console.log("Async Logging in call: result: ", result);
  });

  console.log("Name is now", name);
  console.log("Result is now", result);

  return name;
} 
```

这是服务器上的方法，我最终将在其中根据名称查找 ID：

```
Meteor.methods({ 

        getID: function(itemName) {
            result = itemName + "_changed";
            console.log("server: getID result:", result);

            return result;
         }

}); 
```

这里是我在 HTML 文件中调用模板的地方：

```
<td>{{getTypeID name}}</td> 
```

当我使用该应用程序时，我可以看到方法 getID 以一种看起来像异步的方式被调用 - getID 方法中的结果会发生变化，并在模板中的其他条目之后写入控制台。如何将回调中返回的结果设置为可在模板中使用并返回给客户端，以便我可以在页面中呈现它？

**更新：**这是我在进行一些编辑后的 ​​console.log 输出：

```
Precall Logging name:  Apples lootlog.js:79
Precall Logging result:   lootlog.js:80
Name is now Apples lootlog.js:86
Result is now undefined lootlog.js:87
Precall Logging name:  Oranges lootlog.js:79
Precall Logging result:   lootlog.js:80
Name is now Oranges lootlog.js:86
Result is now undefined lootlog.js:87
Precall Logging name:  Melons lootlog.js:79
Precall Logging result:   lootlog.js:80
Name is now Melons lootlog.js:86
Result is now undefined lootlog.js:87
Precall Logging name:  Grapes lootlog.js:79
Precall Logging result:   lootlog.js:80
Name is now Grapes lootlog.js:86
Result is now undefined lootlog.js:87
Precall Logging name:  Onion lootlog.js:79
Precall Logging result:   lootlog.js:80
Name is now Onion lootlog.js:86
Result is now undefined lootlog.js:87
Async Logging in call: result:  Apples_changed lootlog.js:83
Async Logging in call: result:  Oranges_changed lootlog.js:83
Async Logging in call: result:  Melons_changed lootlog.js:83
Async Logging in call: result:  Grapes_changed lootlog.js:83
Async Logging in call: result:  Onion_changed 
```

这是打印到流星控制台的内容：

```
server: getID Name: Apples
server: getID result: Apples_changed
server: getID Name: Oranges
server: getID result: Oranges_changed
server: getID Name: Melons
server: getID result: Melons_changed
server: getID Name: Grapes
server: getID result: Grapes_changed
server: getID Name: Onion
server: getID result: Onion_changed 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:10:53.267

您是否尝试过为您的 Meteor.call 调用 getID 的返回值分配一个变量？看起来您希望变量 'name' 改变，所以执行 'name = Meteor.call ...' 应该处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:57:48.097

我不推荐用于将数据传输到模板的范例，对于每个循环的项目，您都在对服务器进行 Meteor.call，这在较高延迟的环境中确实会减慢速度。

模板助手有一个 Meteor.call 内部，它不能在客户端同步运行，所以你必须将结果传递给一个反应变量，例如`Session`，然后将它们传递给模板。

我建议您拨打一个电话而不是许多小电话，在下面的代码中，我使用了一个带有一组名称的调用。

服务器

```
Meteor.methods({ 
        //Input variable is an array of names
        getID: function(itemNameArray) {
            result = {};  //Initialize an empty array

            itemNameArray.forEach(function(entry) {
                itemNameArray[entry] = entry + "_changed";
            });
            return result;
         }
}); 
```

客户

```
Template.operations.getTypeID = function(name) {
    Session.get("variables")[name];
}

Meteor.call('getID', ["Apples", "Oranges", "Grapes", "Onions"], function (error, result) {
    Session.set("variables", result);
}); 
```

同样，我不确定您到底想做什么，但是您可以将数组替换为您从何处获得名称的数据源。

[Session.set/get](http://docs.meteor.com/#session)是[响应式](http://docs.meteor.com/#reactivity)的，因此一旦 Meteor 从服务器获取数据，它就会相应地更新模板

# mysql - 使用 DataMapper 时找不到 _mysql_init

> ID：14781702
> 
> 赞同：15
> 
> 时间：2013-02-08T21:32:10.547
> 
> 标签：mysql, ruby, datamapper

我有一个简单的 MySQL 表：

```
% mysql -u rampion dev -e 'describe person'
+-------+--------------+------+-----+---------+----------------+
| Field | Type         | Null | Key | Default | Extra          |
+-------+--------------+------+-----+---------+----------------+
| id    | int(11)      | NO   | UNI | NULL    | auto_increment |
| uid   | varchar(256) | NO   | PRI | NULL    |                |
+-------+--------------+------+-----+---------+----------------+ 
```

还有一个我想运行的简单 DataMapper 脚本：

```
# temp.rb
require 'rubygems'
require 'datamapper'

DataMapper::Logger.new($stdout, :debug)
DataMapper.setup(:default, "mysql://rampion@localhost/dev")

class Person
  include DataMapper::Resource
  property :id,     Serial
  property :uid,    String
end

DataMapper.finalize

p Person.first_or_create(:uid => 'Steve') 
```

但是当我运行它时，我得到动态链接器错误：

```
% ruby temp.rb
~/.rvm/gems/ruby-1.8.7-p334/gems/dm-validations-1.0.2/lib/dm-validations.rb:33: warning: already initialized constant OrderedHash
DataObjects::URI.new with arguments is deprecated, use a Hash of URI components (~/.rvm/gems/ruby-1.8.7-p334/gems/dm-do-adapter-1.0.2/lib/dm-do-adapter/adapter.rb:215:in `new') 
dyld: lazy symbol binding failed: Symbol not found: _mysql_init
  Referenced from: ~/.rvm/gems/ruby-1.8.7-p334/gems/do_mysql-0.10.12/lib/do_mysql/do_mysql.bundle
  Expected in: flat namespace

dyld: Symbol not found: _mysql_init
  Referenced from: ~/.rvm/gems/ruby-1.8.7-p334/gems/do_mysql-0.10.12/lib/do_mysql/do_mysql.bundle
  Expected in: flat namespace

zsh: trace trap  ruby temp.rb 
```

我`LD_LIBRARY_PATH`设置为`/usr/local/mysql/lib`，这是我安装 MySQL 的地方，它似乎`_mysql_init`在那里定义：

```
% grep '_mysql_init' $LD_LIBRARY_PATH/libmysqlclient.18.dylib
Binary file /usr/local/mysql/lib/libmysqlclient.18.dylib matches 
```

我不知道我需要做什么来解决这个问题。

# vb.net - 需要帮助将文件下载到 appdata

> ID：14781707
> 
> 赞同：0
> 
> 时间：2013-02-08T21:32:38.260
> 
> 标签：vb.net

所以我需要帮助将文件下载到`%appdata%`. 我正在使用代码，但它不起作用。代码是：

```
 My.Computer.Network.DownloadFile _
    ("http://ownage.c12craft.com/xenon/XenonUpdate.jar", _
    "C:\%appdata%\Roaming\.minecraft\bin\XenonUpdate.jar") 
```

有人可以修复它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:49:39.717

%appdata% 未在 vb.net 中的字符串中展开

以下应该有效：

```
My.Computer.Network.DownloadFile _
("http://ownage.c12craft.com/xenon/XenonUpdate.jar", _
Path.Combine(Environment.GetFolderPath( _
Environment.SpecialFolder.ApplicationData), _
".minecraft\bin\XenonUpdate.jar") 
```

# f# - monoDevelop 3.0.3.2 中的 Fsharp ASP mvc 4 项目 -> 找不到错误 AspNetMvc3'

> ID：14781709
> 
> 赞同：3
> 
> 时间：2013-02-08T21:32:42.537
> 
> 标签：f#, monodevelop

我刚刚安装了 fSharp 语言绑定。我正在尝试在 MonoDevelop 3.0.3.2 中创建一个 Fsharp ASP mvc 4 项目，但我得到了这个：

System.InvalidOperationException：找不到项目类型“AspNetMvc3”。

有什么想法我接下来需要做什么吗？

# r - 在 R 中使用 ffdf 出现内存不足错误

> ID：14781717
> 
> 赞同：0
> 
> 时间：2013-02-08T21:33:28.420
> 
> 标签：r, large-data-volumes, out-of-memory

我想知道如何解决以下问题。我在 postgreSQL 中有一个表，有 1 亿行和 4 列，我想在 R 中使用 ffdf。这是我的代码

```
query <- "select * from ratings"
drv <- dbDriver("PostgreSQL")
rating.ff <- read.dbi.ffdf(query = query, 
                           dbConnect.args=list(drv,user="postgres",
                                               password="mypassword"),
                           verbose = TRUE) 
```

我收到以下错误：

```
 Error en postgresqlExecStatement(conn, statement, ...) : 
     RS-DBI driver: (could not Retrieve the result : 
     out of memory for query result) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:07:53.527

此消息来自 RPostgreSQL 包，表明您的查询太大而无法由您的数据库设置处理。我不认为这是 R 内存问题，您需要调整数据库配置，以便它可以处理返回更大的结果集。

# split - 将文件夹的内容分成不同的文件夹

> ID：14781722
> 
> 赞同：0
> 
> 时间：2013-02-08T21:34:02.520
> 
> 标签：split, action, directory, automator

我有一个文件夹，里面有 518 个 .tcx 文件。我想将这些 gps 文件上传到 Strava.com。Strava 一次只允许批量上传 25 个文件。

我有一个包含 518 个文件的文件夹。我想将它们分成小块（25 个文件），然后通过 Strava 提供的电子邮件上传选项上传它们。

我在想automator可以提供帮助，但我找不到类似的东西。我还想为其他从 Garmin 切换到 Strava 的人提供此解决方案，我认为将其作为自动操作提供它很容易。

建议？

-乔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:32:16.303

Automator 本身并没有一种直接的方法来将输入分成我知道的块。然而，这是`xargs`(1) 的设计目的的一部分。

1.  使用“新邮件”操作创建一个正常的工作流程，并根据需要填写。如果您有信心，请执行“发送外发消息”操作。（出于这些步骤的目的，将其保存在您的主文件夹中，名称为“send-files.workflow”。）

2.  使用以下操作创建服务工作流程（在 Finder 中接收选定的文档）：

    运行 Shell 脚本（Shell：/bin/bash，将输入：传递给标准输入）

    ```
    xargs -n 25 automator -i - ~/send-files.workflow 
    ```

您现在可以选择一堆文件并选择您的服务，这将创建包含（最多）25 个批次的邮件消息。显然，如果您对终端感到满意，您可以直接从命令行执行第 2 步，而不是使用服务，如下所示：

```
ls *.tcx | xargs -n 25 -i - ~/send-files.workflow 
```

另外，一个鲜为人知的事实：如果您使用 Mail 打开一个文件，它将创建一条新消息，该文件作为附件。如果您一次打开多个文件，它将创建一条包含所有文件的消息，因此您可以执行以下操作：

```
ls *.tcx | xargs -n 25 open -a Mail 
```

当然，这只会在附件中创建一条消息，它不会为您寻址或发送它，但它对于一次性任务很有用。

# ios - 修剪 NSString

> ID：14781728
> 
> 赞同：0
> 
> 时间：2013-02-08T21:34:43.797
> 
> 标签：ios, regex, nsregularexpression

我正在`NSString`通过以下方式修剪：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"X = (\\d+.\\d+), Y = (\\d+.\\d+), (%@)" options:0 error:NULL];
NSTextCheckingResult *match = [regex firstMatchInString:txt.text options:0 range:NSMakeRange(0, [txt.text length])];
if (match) {
    NSRange firstHalfRange = [match rangeAtIndex:1];
    NSString *xString = [txt.text substringWithRange:firstHalfRange];
    NSRange secondHalfRange = [match rangeAtIndex:2];
    NSString *yString = [txt.text substringWithRange:secondHalfRange];
    NSRange thirdHalfRange = [match rangeAtIndex:3];
    NSString *colorString = [txt.text substringWithRange:thirdHalfRange];

    NSLog(@"X = %@, Y = %@, Color: %@", yString, xString, colorString);
} 
```

`NSString`看起来像这样：

```
@"this is the content. The content of this string may vary, as well as the length, and my include any characters, with numbers X = 295.000000, Y = 207.500000, TheWhite" 
```

部分 Y = 295.000000 X = 207.500000 始终保持不变，除了可能改变的 X 和 Y 数字，以及：TheWhite，例如 TheBlack

使用这种方法，我成功提取了 X 和 Y 值，但不是最终的字符串。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:53:17.460

您的模式以`(%@)`. 我应该以`(.+)`相反的方式结束。

# asp.net-mvc - asp.net mvc 检查 gridview 复选框

> ID：14781735
> 
> 赞同：0
> 
> 时间：2013-02-08T21:35:23.923
> 
> 标签：asp.net-mvc, gridview, checkbox

我是 MVC 的新手，我很难完成使用经典 ASP.net 很容易完成的任务。

我有一个 gridView，每行都有一个复选框，我想要一个功能，用户勾选他想要的行的复选框，单击页面上的某个按钮，然后将选定的行发送到服务器。

在普通的 ASP 中，整个页面被发送，因此很容易检查 gridView 行和每行中的复选框，但在 MVC 中，重点是 Controller 类不知道 GUI 的细节，所以我该如何实现这样的MVC 中的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:51:08.217

您不会像在 MVC 中那样使用服务器端控件。[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)用于 Web 表单框架。这两个 SO 帖子涵盖了类似的问题：

1.  [ASP.NET MVC 的网格控件？](https://stackoverflow.com/questions/177275/grid-controls-for-asp-net-mvc)
2.  [如何在 Mvc 中使用 gridView 而不添加表单 runat 服务器？](https://stackoverflow.com/questions/9841564/how-to-use-gridview-in-mvc-without-adding-form-runat-server)

所以在那篇文章中有很多例子。我使用[jQuery DataTables](http://www.datatables.net/)没有问题。您使用循环构建表，然后应用 DataTable 将其变成可搜索、可排序、可过滤的网格。

浏览一个教程，比如[http://www.asp.net/mvc](http://www.asp.net/mvc)上的教程，会让您熟悉 MVC 的工作原理，并向您展示如何更新您的模型。

**更新：**我不知道您的后端是如何配置的，所以这是在黑暗中拍摄......但一种简单的入门方法是这样的：

1.  获得模型后，转到 Controllers 文件夹并右键单击 -> 添加 -> 控制器
2.  给它命名
3.  在模板下选择“具有读/写操作和视图的 MVC 控制器，使用实体框架”
4.  选择您的模型类别
5.  选择您的数据上下文
6.  点击添加

这将创建一个包含所有 CRUD 操作和相关视图的控制器。四处寻找应该会有所帮助……尤其是`Edit.cshtml`.

# sas - 创建以其他为条件的新变量 [sas]

> ID：14781741
> 
> 赞同：0
> 
> 时间：2013-02-08T21:35:42.657
> 
> 标签：sas

原始数据集如下：

```
sub month y
1   1     1
1   2     2
1   3     3
1   5     5 
```

我想要的是根据每个主题的月份获得前 3 年，如果 y 在那个月缺失，那么新变量也是`.`如此。比如说，对于上面的例子，lag1 是`y`上个月的previous，`lag2`是2 个月前的previous y，`lag3`到目前为止是这样：

```
sub month y lag1 lag2 lag3
1   1     1  .    .    .
1   2     2  1    .    .
1   3     3  2    1    .
1   5     5  .    3    2 
```

问题是我检查了`lag`功能`dif`，但在我的情况下，我想要的`lag`取决于`month`月份之间也有差距，所以我不能使用前一个类似的`lag1`功能。

我也需要为许多科目做这个。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:11:10.667

SQL解决方案：

```
data have;
input sub month y;
datalines;
1   1     1
1   2     2
1   3     3
1   5     5 
;;;;
run;

proc sql;
create table want as
    select H.sub,H.month, H.y, One.y as lag1, Two.y as lag2, Three.y as lag3
    from have H
    left join (select * from have) One on H.sub=One.sub and H.month=One.month+1
    left join (select * from have) Two on H.sub=two.sub and H.month=Two.month+2
    left join (select * from have) Three on H.sub=three.sub and H.month=Three.month+3
;
quit; 
```

显然，如果你想要其中的 36 个，这会有点长，但至少不是那么复杂。还有各种其他方法可以做到这一点。不要使用 LAG，这会让人头疼，而且无论如何都不合适。如果您熟悉哈希的概念，哈希表可能更有效并且需要更少的编码。

哈希解决方案：

```
data want;
if _n_ = 1 then do;
 declare hash h(dataset:'have(rename=y=ly)');
 h.defineKey('sub','month');
 h.defineData('ly');
 h.defineDone();
 call missing(sub,month,ly);
end;
set have;
array lags lag1-lag3;
do prevmonth = month-1 to month-3 by -1;
  if prevmonth le 0 then leave;
  rc=h.find(key:sub,key:prevmonth);
  if rc=0 then lags[month-prevmonth] = ly;
  call missing(ly);
end;
run; 
```

这非常简单，可以扩展到 36 [或其他] - 只需将数组的长度更改为`array lags lag1-lag36`和 do 语句`do prevmonth=month-1 to month-36 by -1;` 您可能需要做的大部分工作就是安排事情，以便月份在这里工作 - 通过创建一个整数月份，或者更改循环标准以使用月/年或诸如此类的东西。您没有显示您的数据是如何指定的，因此无法提供帮助。

# css - 如何使页面居中以允许两侧的背景？

> ID：14781742
> 
> 赞同：0
> 
> 时间：2013-02-08T21:35:43.057
> 
> 标签：css, html, background, alignment

我在说的是如下：

```
html {
    background: url(../Images/bgplaid.jpg);
    background-repeat: inherit;
    margin: 0px;
    padding: 0px;
    margin-top: 0px;
    padding-top: 0px;
    width: 1024px;      
} 
```

该 css 会将页面大小设置为 1024 像素，因此几乎所有屏幕都较大，而 1024 像素的外部是背景图像。

我想知道的是如何使页面居中以使其始终保持在中心。目前它位于左侧。背景仅显示在右侧。我想知道如何使 html 居中。

我尝试将其放入 div 中，`align='center'`并尝试包含 div 和浮动中心。没有骰子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:38:18.003

使用`margin: 0px auto;`：

```
html {
    background: url(../Images/bgplaid.jpg);
    background-repeat: inherit;
    margin: 0px auto;
    padding: 0px;
    margin-top: 0px;
    padding-top: 0px;
    width: 1024px;      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:41:59.323

把你的身体后面的所有东西都放在一个带有 id 包装器的 div 中`<html><body><div id="wrapper">YOUR HTML CODE</div></body></html>`

```
#wrapper {
width: 1024px;
margin: 0 auto;
} 
```

# php - 如何复制客户地址？

> ID：14781747
> 
> 赞同：3
> 
> 时间：2013-02-08T21:36:08.563
> 
> 标签：php, magento

当客户第一次输入地址时，该地址将用作帐单**和**送货地址。但是数据库中只有一个条目。因此，如果客户后来决定通过编辑现有地址来更改收货地址，那么账单地址也会随之更改。为了防止这种情况，我需要在数据库中输入两个单独的条目，一个用于帐单地址，另一个用于送货地址。所以，

我编写了一个事件观察器，使用该事件`customer_address_save_after`来检查默认帐单地址的条目是否与默认送货地址的条目相同。如果是这样，则保存此地址的副本作为新的送货地址。好吧，至少这是这个想法，

```
public function customerAddressSaveAfter($observer)
{
    $session = Mage::getSingleton('customer/session');

    if ($session->getCustomer()->getDefaultBilling()  ==
        $session->getCustomer()->getDefaultShipping())
    {
        $address = $observer->getCustomerAddress();

        $address->unsAddressId()
                ->unsAddressType();           

        Mage::getModel('customer/address')
            ->setData($address->getData())
            ->setIsDefaultShipping('1')
            ->setSaveInAddressBook('1')
            ->save();
    }

    return $this;
} 
```

但是运行代码似乎会导致无限循环，直到内存耗尽。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:40:10.043

这里的问题是无限递归，因为您在“客户/地址”保存事件中保存了“客户/地址”。

在您的副本上设置一些属性，并在保存之前检查它：

```
public function customerAddressSaveAfter($observer)
{
    $address = $observer->getCustomerAddress();
    if ($address->getIsDuplicate()) {
        return $this;
    }

    $session = Mage::getSingleton('customer/session'); 

    if ($session->getCustomer()->getDefaultBilling()  ==
        $session->getCustomer()->getDefaultShipping())
    {
        $address->unsAddressId()
                ->unsAddressType();           

        Mage::getModel('customer/address')
            ->setData($address->getData())
            ->setIsDefaultShipping('1')
            ->setSaveInAddressBook('1')
            ->setIsDuplicate(true)
            ->save();
    }

    return $this;
} 
```

# javascript - jquery：在第一次使用表单时运行代码

> ID：14781748
> 
> 赞同：0
> 
> 时间：2013-02-08T21:36:13.557
> 
> 标签：javascript, jquery, forms

我正在尝试运行一段代码，每 xxxx 秒将表单的值存储到数据库中，这应该只在用户第一次使用表单时运行，所以我想为此使用基本的焦点事件，这个有效，但这意味着每次用户关注某个字段时，代码都会（再次）运行，但不会在 xxxx 秒后运行。

所以我需要一种方法，如果用户开始使用表单，它应该每 xxxx 秒运行一次 setInterval 函数，而不是每次用户关注某个字段时。

// 基本示例

```
$('form').on('focus', 'input, textarea, select', function(){
    setInterval(function(){ 
        //run code into db
        alert('saved');
    },10000);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:36:51.640

您可以使用[一个](http://api.jquery.com/one/)：

```
$('form').one('focus', 'input, textarea, select', function(){
    setInterval(function(){ 
        //run code into db
        alert('saved');
    },10000);
}); 
```

但这会每个元素执行一次，所以恐怕最好的解决方案不是那么迷人：

```
$('form').one('focus', 'input, textarea, select', function(){
    if ($(this.form).data('done')) return;
    $(this.form).data('done', 'yes');
    setInterval(function(){ 
        //run code into db
        alert('saved');
    },10000);
}); 
```

或者 ：

```
var doit = function() {
    setInterval(function(){ 
        //run code into db
        alert('saved');
    },10000);
    $('form').off('focus', 'input, textarea, select', doit);
};
$('form').on('focus', 'input, textarea, select', doit); 
```

# ruby-on-rails - 在 Mountain Lion 上安装 zmq gem

> ID：14781751
> 
> 赞同：2
> 
> 时间：2013-02-08T21:36:42.527
> 
> 标签：ruby-on-rails, ruby, gem, homebrew, zeromq

通过自制软件安装 zmq。

然后尝试运行：

```
$ sudo gem install zmq -- --with-zmq-dir=/usr/local
Building native extensions.  This could take a while...
ERROR:  Error installing zmq:
    ERROR: Failed to build gem native extension.

/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb --with-zmq-dir=/usr/local
checking for zmq.h... yes
checking for zmq_init() in -lzmq... no
checking for zmq_init() in -lzmq... no
extconf.rb:36: Couldn't find zmq library. try setting --with-zmq-dir=<path> to tell me where it is. (RuntimeError)

Gem files will remain installed in /Library/Ruby/Gems/1.8/gems/zmq-2.1.4 for inspection.
Results logged to /Library/Ruby/Gems/1.8/gems/zmq-2.1.4/gem_make.out 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-10T22:05:33.130

问题是[当前 gem 不适用于 3.xx](https://github.com/zeromq/rbzmq/issues/25)。
但是，您可以使用 安装 ZeroMQ 2.2.0 `brew install zeromq22`，之后 gem 将安装得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:56:51.337

没有 ZeroMQ 系统库，`zmq`gem 就没有编译的希望了。但是，如果您使用的是 Homebrew，这是一个简单的过程：

```
brew install zeromq 
```

如果您已经这样做了但找不到，那么您的编译器可能没有找到 ZeroMQ 库。你会想用它来寻找它，`find /usr -name 'libzmq*'`看看它藏在哪里。它可能在另一个目录中，而不是`/usr/local/lib`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-30T02:52:03.940

```
$ brew install zeromq22
$ gem install zmq -- --with-zmq-dir=/usr/local/opt/zeromq22 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T07:35:04.320

除了`--with-zmq-dir=/usr/local`，还尝试将`--with-zmq-lib=/usr/local/lib`和添加`--with-zmq-include=/usr/local/include`到您的 gem install 命令。通常只需 --with-zmq-dir 就足够了，但这个 gem 似乎并非如此。

# sql - T-SQL 从 DateTime 中删除时间

> ID：14781752
> 
> 赞同：0
> 
> 时间：2013-02-08T21:36:44.340
> 
> 标签：sql, tsql, sql-server-2005-express

SQL Server 2005 Express 中的这两行有什么区别？

```
DATEADD(d, 0, DATEDIFF(d, 0, @Today)); 
```

和

```
DATEADD(d, DATEDIFF(d, 0, @Today), 0); 
```

除了使此语句随机失败之外：

```
DECLARE @DateSrc DATETIME;

-- Chop off the time part:
SET @DateSrc = DATEADD(d, 0, DATEDIFF(d, 0, @Today));

INSERT INTO dbo.SeqNo(MyGUID, TheDay, LastNo)
SELECT @MyGUID, @DateSrc, 0
WHERE NOT EXISTS ( 
  SELECT 1 FROM dbo.SeqNo AS sn
  WHERE sn.MyGUID = @MyGUID AND sn.TheDay = @DateSrc 
  ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T01:16:22.833

它们都会产生相同的结果，但第二种格式更好，因为它适用于其他时间间隔（小时、月、年等），而第一种则不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:28:46.880

语法是：DATEADD (datepart , number , date )

第 1 行：DATEADD(d, 0, DATEDIFF(d, 0, @Today));

第 2 行：DATEADD(d, DATEDIFF(d, 0, @Today), 0);

所以答案是 number 解析为 int (line 2) ，而 date 解析为 datetime (line1) - 这就是区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T06:15:36.010

问题是并发问题。

存储过程的更改已经在生产中几天了，没有问题；有趣的修复一个人认为。显然这两个版本都有效。

但是，我刚刚再次查看了检查应用程序单个实例的代码，并且在此存储过程调用之后将其移至。啊啊啊！并发问题。

很抱歉给您带来麻烦，再次感谢您的帮助。

附言。只是一件有趣的事情......为什么我不能按照我上面的评论在 SQL Server Management Studio 中重现并发问题？这与较新的 DateAdd 格式完美交错。

# c# - 为什么这个属性没有用它的命名空间序列化？

> ID：14781756
> 
> 赞同：0
> 
> 时间：2013-02-08T21:36:52.753
> 
> 标签：c#, xml-serialization, xmlserializer

我有这两个课

```
[XmlRoot(ElementName="XMI", Namespace = XmiStrings.XmiNamespace)]
public class XMIElement
{
    [XmlAttribute("version", Namespace = XmiStrings.XmiNamespace)]
    public string Version { get; set; }
    [XmlAttribute("schemaLocation", Namespace = XmiStrings.XsiNamespace)]
    public string SchemaLocation { get; set; }

}

public static class XmiStrings
{
    public const string XmiNamespace = "http://schema.omg.org/spec/XMI/2.1";
    public const string XsiNamespace = "http://www.w3.org/2001/XMLSchema-instance";
    public const string PackageTypesNamespace = "http://SysID_Profile.ServiceProfile/schemas/PackageTypes/_zdnHsHCBEeKdD9Oad6OUOQ/0";
    public const string RHPNamespace = "http://RhapsodyStandardModel.RhpProperties/schemas/RHP/_zddWsXCBEeKdD9Oad6OUOQ/0";
    public const string RhapsodyProfileNamespace = "http://RhapsodyStandardModel/schemas/RhapsodyProfile/_zddWsHCBEeKdD9Oad6OUOQ/0";
    public const string ServiceProfileNamespace = "http://SysID_Profile/schemas/ServiceProfile/_zdnHsXCBEeKdD9Oad6OUOQ/0";
    public const string SimpleTypesNamespace = "http://SysID_Profile.ServiceProfile/schemas/SimpleTypes/_zddWsnCBEeKdD9Oad6OUOQ/0";
    public const string StandardNamespace = "http://schema.omg.org/spec/UML/2.1/StandardProfileL2";
    public const string EcoreNamespace = "http://www.eclipse.org/emf/2002/Ecore";
    public const string UmlNamespace = "http://schema.omg.org/spec/UML/2.1";
    public const string SchemaLocation = "http://SysID_Profile.ServiceProfile/schemas/PackageTypes/_zdnHsHCBEeKdD9Oad6OUOQ/0 #_zpg3YHCBEeKdD9Oad6OUOQ http://RhapsodyStandardModel.RhpProperties/schemas/RHP/_zddWsXCBEeKdD9Oad6OUOQ/0 #_zpqBA3CBEeKdD9Oad6OUOQ http://RhapsodyStandardModel/schemas/RhapsodyProfile/_zddWsHCBEeKdD9Oad6OUOQ/0 #_zpp_o3CBEeKdD9Oad6OUOQ http://SysID_Profile/schemas/ServiceProfile/_zdnHsXCBEeKdD9Oad6OUOQ/0 #_zpg1_nCBEeKdD9Oad6OUOQ http://SysID_Profile.ServiceProfile/schemas/SimpleTypes/_zddWsnCBEeKdD9Oad6OUOQ/0 #_zpg2fXCBEeKdD9Oad6OUOQ http://schema.omg.org/spec/UML/2.1/StandardProfileL2 http://schema.omg.org/spec/UML/2.1/StandardProfileL2.xmi#_yzU58YinEdqtvbnfB2L_5w http://schema.omg.org/spec/UML/2.1 http://www.eclipse.org/uml2/2.0.0/UML";
} 
```

而这个控制台应用程序

```
class Program
{
     static void Main(string[] args)
    {
        var xmi = new XMIElement();
        xmi.Version = "2.1";
        xmi.SchemaLocation = XmiStrings.SchemaLocation;

        var serializer = new XmlSerializer(typeof(XMIElement));
        var writer = new StreamWriter("test.xml");
        serializer.Serialize(writer, xmi, GetNamespaces());
    }

    private static XmlSerializerNamespaces GetNamespaces()
    {
        var ns = new XmlSerializerNamespaces();
        ns.Add("xmi", XmiStrings.XmiNamespace);
        ns.Add("xsi", XmiStrings.XsiNamespace);
        ns.Add("PackageTypes", XmiStrings.PackageTypesNamespace);
        ns.Add("RHP", XmiStrings.RHPNamespace);
        ns.Add("RhapsodyProfile", XmiStrings.RhapsodyProfileNamespace);
        ns.Add("ServiceProfile", XmiStrings.ServiceProfileNamespace);
        ns.Add("SimpleTypes", XmiStrings.SimpleTypesNamespace);
        ns.Add("Standard", XmiStrings.StandardNamespace);
        ns.Add("ecore", XmiStrings.EcoreNamespace);
        ns.Add("uml", XmiStrings.UmlNamespace);
        return ns;
    }
} 
```

这给出了这个输出

```
 <?xml version="1.0" encoding="utf-8"?>
 <xmi:XMI xmlns:PackageTypes="http://SysID_Profile.ServiceProfile/schemas/PackageTypes/_zdnHsHCBEeKdD9Oad6OUOQ/0"
     xmlns:RHP="http://RhapsodyStandardModel.RhpProperties/schemas/RHP/_zddWsXCBEeKdD9Oad6OUOQ/0"
     xmlns:ecore="http://www.eclipse.org/emf/2002/Ecore"
     xmlns:ServiceProfile="http://SysID_Profile/schemas/ServiceProfile/_zdnHsXCBEeKdD9Oad6OUOQ/0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns:RhapsodyProfile="http://RhapsodyStandardModel/schemas/RhapsodyProfile/_zddWsHCBEeKdD9Oad6OUOQ/0"
     xmlns:SimpleTypes="http://SysID_Profile.ServiceProfile/schemas/SimpleTypes/_zddWsnCBEeKdD9Oad6OUOQ/0"
     xmlns:Standard="http://schema.omg.org/spec/UML/2.1/StandardProfileL2"
     xmlns:uml="http://schema.omg.org/spec/UML/2.1"
     version="2.1"
     xsi:schemaLocation="http://SysID_Profile.ServiceProfile/schemas/PackageTypes/_zdnHsHCBEeKdD9Oad6OUOQ/0 #_zpg3YHCBEeKdD9Oad6OUOQ http://RhapsodyStandardModel.RhpProperties/schemas/RHP/_zddWsXCBEeKdD9Oad6OUOQ/0 #_zpqBA3CBEeKdD9Oad6OUOQ http://RhapsodyStandardModel/schemas/RhapsodyProfile/_zddWsHCBEeKdD9Oad6OUOQ/0 #_zpp_o3CBEeKdD9Oad6OUOQ http://SysID_Profile/schemas/ServiceProfile/_zdnHsXCBEeKdD9Oad6OUOQ/0 #_zpg1_nCBEeKdD9Oad6OUOQ http://SysID_Profile.ServiceProfile/schemas/SimpleTypes/_zddWsnCBEeKdD9Oad6OUOQ/0 #_zpg2fXCBEeKdD9Oad6OUOQ http://schema.omg.org/spec/UML/2.1/StandardProfileL2 http://schema.omg.org/spec/UML/2.1/StandardProfileL2.xmi#_yzU58YinEdqtvbnfB2L_5w http://schema.omg.org/spec/UML/2.1 http://www.eclipse.org/uml2/2.0.0/UML"
     xmlns:xmi="http://schema.omg.org/spec/XMI/2.1" /> 
```

所以我的问题是：当 XMI 元素和 SchemaLocation 都正确显示时，为什么版本属性没有显示为 xmi:version="2.1" ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:47:35.723

您显示的输出无法从您显示的程序中产生。

1.  schemaLocation 属性具有 xsi 命名空间而不是“ [http://schema.omg.org/spec/XMI/2.1](http://schema.omg.org/spec/XMI/2.1) ”
2.  “模式位置字符串”不在程序中。

您需要发布发布的程序生成的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T12:23:53.437

您需要将 Form 添加到属性中：

```
[XmlAttribute("version", Namespace = XmiStrings.XmiNamespace, Form=System.Xml.Schema.XmlSchemaForm.Qualified)] 
public string Version { get; set; } 
```

# javascript - 带有点击事件的 Javascript 日期对象

> ID：14781757
> 
> 赞同：0
> 
> 时间：2013-02-08T21:37:04.943
> 
> 标签：javascript, jquery, performance

对stackoverflow有点新手并且花了太多时间思考这个问题，但简而言之，我试图找出最好的方法和最少的代码量来实现这一点。我有一个条件，它将根据一天中的时间执行操作。见下文：

```
var date = new Date();
var time = date.getHours();

if(time < 12){
header.prepend('Morning ');
link.attr('href', 'css/morning.css');
} else if (time >= 12 && time <= 18){
header.text('its afternoon time');
link.attr('href', 'css/day.css');
} else {
header.prepend('Night ');
link.attr('href', 'css/night.css');
} 
```

点击事件也发生了类似的动作：

```
$('button').click(function(){
var styleswitcher = $(this).text().toLowerCase();
link.attr('href', 'css/' + styleswitcher + '.css');
}); 
```

有没有办法将它们组合成一个函数，我觉得我通过在条件和点击事件中调用样式表两次来重复自己。因此，如果时间和点击事件匹配显示正确的样式表，则类似的东西。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:41:30.883

是的，只需将代码打包并放入函数中即可。

```
$(document).ready(function() {

    function change_css() {    
        var date = new Date();
        var time = date.getHours();
        var styleSwitcher = 'night';

        if(time < 12) {
            styleSwitcher = 'morning';
        }

        else if(time >= 12 && time <= 18) {
            styleSwitcher = 'day';
        }

        link.attr('href', 'css/' + styleSwitcher + '.css');
    }

    change_css(); // First call on initial run.

    $('button').click(function() {
        change_css();
    });

}); 
```

注意：我还没来得及测试这段代码，但想法是正确的。

# javascript - 使用 nodejs 阻塞 API 调用

> ID：14781763
> 
> 赞同：1
> 
> 时间：2013-02-08T21:37:37.140
> 
> 标签：javascript, api, node.js, blocking

我不确定这是否是正确的方法，但我希望在一个 for 循环中发出 10 个 API 请求，并且我希望每个 API 请求都被阻塞。也就是说，等到我收到响应而不去回调，然后再次遍历 foo 循环。这是for循环

```
for (var i=0; i< out.items.length; i++) {
    var object = makediffbotAPIcall(out.items[i]);
    console.log(object);
} 
```

请求函数如下

```
function makediffbotAPIcall(item, array) {
    var url_to_send_diffbot = "string of url here";

    request(url_to_send_diffbot, function (error, response, body) {
        if (!error && response.statusCode == 200) {
            var article_object = JSON.parse(body)       
            var object = {"Title": article_object.title, "Url":article_object.url};
        }

    });

    return object;
} 
```

这段代码的问题是对象没有及时返回以便 for 循环使用它。我尝试在 makediffbotAPIcall 函数的末尾放置一个 setTimeout，但这也不起作用。任何建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T09:19:01.247

有一个非常好的 node.js 库“async”用于管理异步环境中的控制流。对于这个特定的问题，请使用[https://github.com/caolan/async#forEach](https://github.com/caolan/async#forEach)系列版本，并且在 makediffbotAPIcall 中进行了一些修改，使事情完全按照您的要求工作，所以这里是解决方案

```
async.forEachSeries(out.items,function(item,callback){
makediffbotAPIcall(item,out.items,function(object){
//here you will get either object or null
callback();
}),function(err){
// this will be called when all array items will get processed
})

function makediffbotAPIcall(item, array, callback) {

var url_to_send_diffbot = "string of url here"

request(url_to_send_diffbot, function (error, response, body) {
    if (!error && response.statusCode == 200) {
        var article_object = JSON.parse(body)       
        return callback({"Title": article_object.title, "Url":article_object.url})

    }
    else
        return callback(null);
})
} 
```

我不确定 makediffbotAPIcall 的第二个参数我假设你想传递完整的数组，所以我只是传递整个数组，如果不是这种情况你可以根据需要修改它。

如果您有任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T06:35:23.420

Async.js 是一个很好的起点，还有其他类似的 - [https://github.com/joyent/node/wiki/modules#wiki-async-flow](https://github.com/joyent/node/wiki/modules#wiki-async-flow)

但是请注意，“阻塞”代码在 node/js 中并不是一个好主意。它是一种单线程事件驱动语言。您不想阻止代码，因为例如，您的服务器将停止对请求做出反应。由于上述原因，大多数 asnyc 模式会要求您提供一个回调函数，有时称为“下一个”，您需要在每个函数的末尾调用它，因此将调用行中的下一个函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T22:07:03.087

*我发现在处理 JS 中的异步问题时，临时移动*和*命名*所有匿名函数以显式显示它们何时被*传递*以及何时被*调用*通常很有用。

```
function makediffbotAPIcall(item, array) {

    var url_to_send_diffbot = "string of url here"

    var receiveResponse = function (error, response, body) {
        if (!error && response.statusCode == 200) {
            var article_object = JSON.parse(body);   
            var object = {"Title": article_object.title, "Url":article_object.url};
        }
    }

    request(url_to_send_diffbot, receiveResponse);
    return object;
} 
```

所以这里有几个问题。第一，即使您的请求是同步的（对于可怜的旧单线程 javascript，这将是一件可怕的事情），这也不起作用，因为您使用`var object`inside `receiveResponse`，因此该变量在该函数之外将不可用！

对于这个特殊问题，最简单的解决方案是调用`console.log(object)`inside `receiveResponse`。假设您实际上简化了一些执行更复杂操作的代码，则有多种模式可用。每个请求在前一个请求之后按顺序发生是否重要，还是可以并行运行并单独记录（可能是无序的）？基本上，您需要添加一个回调参数并使用inside`makediffbotAPIcall`调用该函数，或者返回一个 Promise 对象，除非您已经在使用提供它们的框架/库，或者您确实需要很多支持并行和/或顺序操作。`object``responseReceived`

我重新阅读了你的问题，看起来你想要阻止行为，这是一个使用递归的纯 JS 解决方案（不需要 lib =P）：

```
var i=0;
var callNext = function(object){
    if(i<out.items.length) {
        makediffbotAPIcall(out.items[i], callNext);
    }
    console.log(object);
    i++;
}

callNect("nothing to log for first obj");

function makediffbotAPIcall(item, array, callback) {

    var url_to_send_diffbot = "string of url here"

    var receiveResponse = function (error, response, body) {
        if (!error && response.statusCode == 200) {
            var article_object = JSON.parse(body);   
            var object = {"Title": article_object.title, "Url":article_object.url};
            callback(object);
        }
    }

    request(url_to_send_diffbot, receiveResponse);
} 
```

这可以做一些整理（递归的基本情况处理得很笨拙），但你并不总是需要一个库；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T22:07:18.173

您需要 async.js 库中的 forEachSeries(arr, iterator, callback) 。

它所做的是它以非重叠的顺序方式迭代 arr。非常适合按顺序执行的重复性任务。一旦所有迭代完成，就会调用回调。最好的部分是它干净利落，没有回调麻烦。

您应该尝试 async.js 中的其他功能。这是一个很棒的图书馆，非常方便。

# c# - 从 XmlElement 返回 XmlDocument

> ID：14781764
> 
> 赞同：2
> 
> 时间：2013-02-08T21:37:46.057
> 
> 标签：c#

我是 C# 新手，我不确定是否所有的细节都在这里。

最初，我应该发送一个 SOAP 请求并将其响应读入数据集。

以下代码有效：

```
DataSet ds = new DataSet(); 
cred.CredExecution mycredit = new cred.CredExecution();
ds = mycredit.RetrieveParsedRawData(inquiry, true);
// I have the Web Reference "cred" added to the project.
// Since I wasn't sure if a service reference was needed, I added that too. 
```

现在响应格式已更改为 XML，我不知道如何阅读它。

我将代码更改如下：

```
System.Xml.XmlDocument XmlDoc = new System.Xml.XmlDocument();
cred.CredExecution mycredit = new cred.CredExecution();
XmlDoc = mycredit.RetrieveParsedRawData(inquiry, true); 
```

但它失败并出现错误：

> *无法将类型“System.Xml.XmlElement”隐式转换为“System.Xml.XmlDocument”*

我尝试使用：

```
System.Xml.XmlElement XmlEle = new System.Xml.XmlElement(); 
```

但系统未能说它受到保护。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T22:14:33.683

从外观上看，RetrieveParsedRawData 返回一个 XmlElement 而不是 xmldocument。所以这应该有效。

```
cred.CredExecution mycredit = new cred.CredExecution();
System.Xml.XmlElement XmlEle = mycredit.RetrieveParsedRawData(inquiry, true);
System.Xml.XmlDocument XmlDoc = XmlEle.OwnerDocument; 
```

# powershell - Powershell CSV 日志

> ID：14781765
> 
> 赞同：1
> 
> 时间：2013-02-08T21:37:49.863
> 
> 标签：powershell, csv

我想开发一个脚本来记录给定目录中文件夹的大小、它们的名称以及它们被记录的日期。我希望脚本以以下 CSV 格式导出：

```
Date;A;b;c;durga;New Folder;New Folder (2)
0125-1416;0.00;0.05;1;1; 0.00
0125-1417;0.00;0.05;0.00;0.00
0125-1419;0.00;0.05;0.00;0.00;20;30 
```

最后，我希望脚本足够智能，可以根据此日志文件确定是否添加或删除了文件夹。因此，如果我的根目录 C:\scripts 有文件夹 A、B 和 C。我希望脚本在下次运行时知道我是删除 A 还是添加 D，并在我的 CSV 文件中说明这一点。

该脚本将每隔一段时间（每天？）运行一次，并且基本上将一个新行附加到大小不断增加的名为“log.txt”的 CSV 文件中。

到目前为止，我有一些代码在我的文件夹中递归并总结它们各自的大小，保存父文件夹的名称、大小和日期，并将所有这些信息楔入一个新对象，然后将其扔进一个数组索引。当我试图让一堆类似格式的对象看起来像我想要的 CSV 输出时，我迷失了方向。必须有更好的方法来从中获取 CSV 文件！

这是我的“获取给定目录中文件夹的大小”的代码：

```
cd C:\scripts
$a = @()
get-childitem | where {$_.PSIsContainer} | foreach   {
$size = (Get-ChildItem $_ -recurse | where {!$_.PSIsContainer} | Measure-Object -Sum Length).Sum
$date = Get-Date -UFormat %Y%m%d-%H%M
$size1 = "{0:n2}" -f ($size / 1MB) 
$obj = new-object psobject
add-member -inp $obj noteproperty date $date
add-member -inp $obj noteproperty path $_.Name
add-member -inp $obj noteproperty size $size1 
$a += $obj 
} 
```

我是 Powershell 的新手，所以这就是我被绊倒的地方：我有我的文件夹的大小，我不知道如何在 $a 中提取我的对象，将它们全部格式化（就像我发布的示例 CSV直到我的帖子开头），将它们保存为 CSV，让脚本足够智能，以便在下次运行脚本时读取 CSV，并在记录 CSV 文件的下一行时考虑更改。

有一个更好的方法吗？这是我潜伏一年后的第一篇文章，所以请温柔点……哈哈。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:05:21.530

您可以使用[`Export-csv`命令行开关](http://technet.microsoft.com/en-us/library/hh849932.aspx)将数据输出为 csv 文件。您只需要将数组值通过管道传输到其中：

```
$a | Export-Csv -NoTypeInformation -path log.txt 
```

看起来您也想使用分号而不是逗号作为分隔符，您也可以这样做：

```
$a | Export-Csv -NoTypeInformation -path log.txt -Delimiter ";" 
```

然后读取 csv 的内容，使用[`import-csv`命令行开关](http://technet.microsoft.com/en-us/library/hh849891.aspx)并将结果存储在变量中。

```
$b = import-csv -Path .\log.txt -Delimiter ";" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:55:20.823

我试了一下。我替换了您的`get-date`格式以匹配输出，因为它们在您的示例中不匹配。这将为每个文件夹创建一列。列永远不会被删除，只是添加。因此，如果添加了一个新文件夹，一个新列将出现在所有记录中，其值仅存在于它存在的记录中。如果删除了文件夹，则以前的记录在该列中将具有空值。

```
cd C:\scripts
$filename = "log.csv"
$out = @()

$date = Get-Date -Format MMdd-HHmm

#Create new record
$rec = New-Object psobject -Property @{
    Date = $date
}

Get-ChildItem | where {$_.PSIsContainer} | foreach {
    $size = (Get-ChildItem $_.FullName -recurse | where {!$_.PSIsContainer} | Measure-Object -Sum Length).Sum
    $rec | Add-Member -MemberType NoteProperty -Name $_.Name -Value ("{0:n2}" -f ($size / 1MB))
}

#Check if file exists and get columns
if (Test-Path $filename -PathType Leaf) {
    $in = Import-Csv $filename
    $incol = $in | Get-Member -MemberType NoteProperty | % { $_.Name }
    $reccol = $rec | Get-Member -MemberType NoteProperty | % { $_.Name }

    #Add missing columns to exisiting records
    Compare $incol $reccol | ? { $_.SideIndicator -eq "=>" } | % { $in | Add-Member -MemberType NoteProperty -Name $_.InputObject -Value $null }
    #Add missing columns to new record
    Compare $reccol $incol | ? { $_.SideIndicator -eq "=>" } | % { $rec | Add-Member -MemberType NoteProperty -Name $_.InputObject -Value $null }

    $out += $in
}

$out += $rec

$out | Export-Csv $filename -NoTypeInformation 
```

# java - 注入命名 Guice 单例

> ID：14781771
> 
> 赞同：5
> 
> 时间：2013-02-08T21:38:25.103
> 
> 标签：java, dependency-injection, junit, guice

我有一个简单的 POJO：

```
public class MyPOJO {
    @Inject
    private Fizz fizz;

    private Buzz buzz;

    // rest of class omitted for brevity
} 
```

我想配置我的 Guice 模块`Fizz`，使其注入两种类型的 es：

1.  一个特殊的全局单例`Fizz`实例；和
2.  其他（非特殊）`Fizz`实例

我想`MyPOJO`注入特殊/单例实例。所以我修改了我的代码：

```
public class MyPOJO {
    @Inject @Named("Special-Fizz")
    private Fizz fizz;

    private Buzz buzz;

    // rest of class omitted for brevity
} 
```

然后在我的模块中：

```
public class MyModule extends AbstractModule {
    @Override
    public void configure() {
        bind(Fizz.class).annotatedWith(
            Names.named("Special-Fizz"))
            .to(Fizz.class);

        // Other bindings here...
    }

    @Provides @Singleton
    private Fizz providesFizz() {
        return new Fizz(true, "Special", 12.0);
    }
} 
```

但是当我尝试单元测试（JUnit 4.10）时：

```
public class MyTest {
    @Named("Special-Fizz") private Fizz specialFizz;

    @Test
    public void usingNamedShouldInjectSpecialFizz() {
        MyModule mod = new MyModule();
        Injector injector = Guice.createInjector(mod);

        specialFizz = injector.getInstance(Fizz.class);

        Assert.assertTrue(specialFizz != null);
    }
} 
```

这通过了。到现在为止还挺好。但是，如果我更改该`specialFizz`字段的名称：

```
 @Named("Special-Fuzz-This-Shouldnt-Work") private Fizz specialFizz; 
```

并重新运行测试，*它仍然通过*。为什么？！？我在哪里会误入歧途？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T01:44:25.533

很奇怪。如果 Guice 找不到`Named`它正在注入的绑定，它应该抱怨。不过，我对你的测试有点困惑。我不知道有什么`injector.inject`作用。你的意思是`injectMembers`？实际获取 POJO 的实例并确保它以您期望的方式工作可能更有意义。也许是这样的：

```
public class FizzTest {

  public static class MyModule extends AbstractModule {
    @Override
    protected void configure() {
    }

    @Provides
    @Singleton
    @Named("Special-Fizz")
    public Fizz providesFizz() {
      return new Fizz(true);
    }
  }

  public static class Fizz {
    boolean special = false;
    public Fizz() {}
    public Fizz(boolean special) {
      this.special = special;
    }
  }

  public static class MyPOJO {
    @Inject @Named("Special-Fizz")
    private Fizz fizz;

    @Inject
    private Fizz otherFizz;
  }

  @Test
  public void test() {
    MyModule mod = new MyModule();
    Injector injector = Guice.createInjector(mod);

    MyPOJO pojo = injector.getInstance(MyPOJO.class);
    assertTrue(pojo.fizz.special);
    assertTrue(!pojo.otherFizz.special);
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:58:39.900

Guice 看到了这个`@Provides`方法，并愉快地使用它来注入`Fizz`. 如果你想有一个特殊的实例`Fizz`，你可以从方法中删除注释`providesFizz()`，而是绑定

```
bind(Fizz.class)
    .annotatedWith(Names.named("Special-Fizz")
    .toInstance(providesFizz()); 
```

通过这种方式，您可以准确地告诉 Guice`Fizz`使用哪个作为“Special-Fizz”，否则仍然让它`Fizz`“正常”注入。

免责声明：我实际上没有尝试过像您这样的设置，但我使用过类似的设置。让我知道它是否有效。

# google-app-engine - 是否有任何理由手动配置应用引擎数据存储索引？

> ID：14781772
> 
> 赞同：1
> 
> 时间：2013-02-08T21:38:26.460
> 
> 标签：google-app-engine, configuration, indexing, datastore

python dev_appserver 会自动添加完成查询所需的索引。有什么理由去那里改变事情吗？是否可以进行优化以使 sdk 无法自行解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:58:40.797

App Engine 开发服务器仅在遇到需要索引的代码时才会自动创建索引。您可能有需要特定索引的代码，但无论出于何种原因，您从未在开发服务器中遇到该代码路径 - 也许您的本地数据不包含具有特定值的实体，该值可能会触发需要索引的特定查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:06:29.680

是的，对于某些查询，您可能能够手动配置索引以避免爆炸案例。

[https://developers.google.com/appengine/docs/python/datastore/indexes?hl=en](https://developers.google.com/appengine/docs/python/datastore/indexes?hl=en)

# symbols - 抄写员符号的含义

> ID：14781774
> 
> 赞同：0
> 
> 时间：2013-02-08T21:38:41.510
> 
> 标签：symbols, facebook-scribe

我开始使用 Scribe，我正在阅读手册用户，但我找不到任何关于 Scribe 在目标端的链接列上使用的符号。

例如，我知道支票和“X”是什么意思，但也有菱形和其他我不明白的符号。

任何我可以阅读所有这些的手册或页面都会非常有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:59:34.687

这是一个很好的[Scribe 用户指南](https://openmind.scribesoftware.com/download/ScribeInsightUserGuide)。

希望能帮助到你。

例如：- 下载电子书并转到第 62 页后，您可以找到有关图形符号的详细信息。

# javascript - 客户端javascript函数

> ID：14781775
> 
> 赞同：2
> 
> 时间：2013-02-08T21:38:47.877
> 
> 标签：javascript, client-side

在客户端javascript中，b/w有什么区别

```
$(function(){
   ....
}); 
```

和

```
function myFunc() {
   ...
} 
```

（在谷歌上找不到相关教程）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:41:31.390

第一个是[**jQuery**](http://jquery.com/)（一个 JavaScript 库）中使用的[*DOM 就绪*](http://api.jquery.com/ready/)处理函数。它在 DOM 完全加载时执行。而第二个是一个简单定义的函数 name 。[](http://jquery.com/)**`myFunc`**

 ****您可以在MDN**中阅读有关 JavaScript 函数的更多信息： [https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:42:12.007

它们是功能的完全不同的用途。
第一个 on 调用`$()`带有参数的函数`function() {}`。
第二个定义 function `myFunc`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:42:24.680

$() 是 jQuery 的 document.ready 语法的简写：[文档](http://api.jquery.com/ready/)

$() 中的代码将在 dom 加载到足以被访问/操作时运行。

第二个示例只是一个普通的函数声明，并创建了一个名为 myFunc 的函数，`myFunc()`以后可以使用语法调用该函数。**

# entity-framework - 实体框架：如何从具有复合键的表中返回一行？

> ID：14781777
> 
> 赞同：9
> 
> 时间：2013-02-08T21:38:58.113
> 
> 标签：entity-framework, return, row, composite-key

```
 public class UserBuilding
    {
        [Key, Column(Order = 0)]
        public int UserId { get; set; }
        [Key, Column(Order = 1)]
        public int BuildingId { get; set; }
        public int BuildingLevel { get; set; }
    } 
```

如果我想返回属于用户的所有不同建筑物，我会执行以下操作：

```
database.UserBuildings.Where(b => b.UserId == userId); 
```

我的问题是，如果我想从特定用户那里返回特定建筑物怎么办？这样做最“有效”的方法是什么？有没有比以下更好的方法（例如内置函数）：

```
database.UserBuildings.Where(b => b.UserId == userId && b.BuildingId == buildingId); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T21:42:30.373

我认为您正在寻找[DbSet.Find](http://msdn.microsoft.com/en-us/library/gg696418%28v=vs.103%29.aspx)方法。此方法通过主键查找实体。如果您有复合主键，则按照它们在模型中定义的顺序传递键值：

```
var userBuilding = database.UserBuildings.Find(userId, buildingId); 
```

# azure-virtual-machine - Azure VM 角色是否仍然存在？

> ID：14781779
> 
> 赞同：1
> 
> 时间：2013-02-08T21:39:07.327
> 
> 标签：azure-virtual-machine, azure-vm-role

我尝试使用 csupload 将我的 sysprep'd .vhd 文件上传到 Azure 存储，但是当我这样做时，我得到“订阅未获得此功能的授权”。我确实在我的帐户上启用了虚拟机预览，但我从未启用虚拟机角色测试版，而且我无法在门户中找到仍然提供它的任何地方。我看到来自 Microsoft 的新视频，包括三天前发布的[这个视频，指的是 VM 角色，所以我认为它仍然是一个产品。](http://channel9.msdn.com/Series/Windows-Azure-Cloud-Services-Tutorials/Windows-Azure-Cloud-Services-Concepts-Part-1)

MSDN 文档是一团糟……有些是旧的，有些是矛盾的，有些与虚拟机（IaaS）有关，而不是与虚拟机角色（PaaS）有关。几天来，我一直在挖掘我能找到的每个链接。

我意识到这个问题比典型的 StackOverflow 问题稍微宽泛一些，对此我深表歉意，但是......是否还有一个 VM 角色 (PaaS) 可供未注册原始测试版的人使用？如果有，我如何获得访问权限？我找不到来自 Microsoft 的关于结束测试期或转向通用可用性的单一公告。如果计划是转储 VM 角色 (PaaS) 以支持持久虚拟机 (IaaS)，我找不到有关此的信息。有谁知道这个计划是什么？

谢谢！

斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:53:07.813

据我所知，经典/无状态/非持久性 VM 角色功能已经处于测试阶段超过 2.5 年。Microsoft 不推荐依赖 Beta 功能的实时生产部署。

似乎从今年开始，Microsoft 就不再接受任何客户的 Beta VM Role。建议每个人都迁移到 Windows Azure 虚拟机 (Iaas)。官方并未就此发表任何声明。

拥有 VM Role Beta Access 的人可以继续使用，直到任何进一步的公告，但没有新客户被接受。您可以联系 Windows Azure 支持团队，他们应该能够以更好的方式回答。

此外，如果启用了 Windows Azure 虚拟机功能，您可以使用 Windows Azure PowerShell 上传 sysprep'd .vhd 。

更新：更新：“Windows Azure VM 角色将完全退役”。

这是最近发布的更新文档：http: [//msdn.microsoft.com/library/3dae01d2-2397-47ed-a134-f9ffe58a9b52.aspx](http://msdn.microsoft.com/library/3dae01d2-2397-47ed-a134-f9ffe58a9b52.aspx)

# mef - 在类库中使用 MEF

> ID：14781783
> 
> 赞同：0
> 
> 时间：2013-02-08T21:39:36.987
> 
> 标签：mef

好的，所以在类库中，不使用 MEF 是个好主意吗？

这是一个例子：

ISomeInterface

5 ISomeInterface 的实现

一次导入所有 ISomeInterface 并使用它们的类。

同样，这一切都在一个 dll 中。由于它在 DLL 中，因此没有引导 MEF 来创建目录，而且构建目录只是为了使用它一次似乎有点过分。

我只是在学习 MEF 以及如何使用它。

格雷格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:42:25.933

在阅读了更多内容之后，似乎没有理由不能在 DLL 中使用 MEF 来创建自己的部件。当我问这个问题时，我在想 Importing 将主要在 Main() 或 App() 类型的函数中组成整个应用程序。但是，如果需要在导出到应用程序的主要部分上进行组合，它仍然可以使用 MEF 在构造函数中组合自身，如下所示：

```
//An aggregate catalog that combines multiple catalogs
        var catalog = new AggregateCatalog();
        //Adds all the parts found in the same assembly as the Program class
        catalog.Catalogs.Add(new AssemblyCatalog(typeof(Program).Assembly));

        //Create the CompositionContainer with the parts in the catalog
        _container = new CompositionContainer(catalog);

        //Fill the imports of this object
        try
        {
            this._container.ComposeParts(this);
        }
        catch (CompositionException compositionException)
        {

        } 
```

# javascript - 检测 jQuery 1.8+ 中的图像加载 - 自弃用以来替代 load()

> ID：14781787
> 
> 赞同：5
> 
> 时间：2013-02-08T21:40:00.367
> 
> 标签：javascript, jquery, image, jquery-events, image-preloader

## 解释

出于我欣赏的原因，从 jQuery 1.8 开始，该`load`事件已被弃用，但是，仍然可以通过使用某些解决方法来检测图像是否已加载（即使它在缓存中）。*因此，该事件的弃用实际上是非常令人恼火的，因为它至少可以作为检测图像何时完成加载到页面上的起点。*

尽管如此，它已被弃用，因此我提出这个问题是希望我能找到答案，从而帮助我和可能很快遇到同样问题的其他人。

## 一个例子（在 jQuery 1.8 之前）

在不使用插件的情况下（因为这应该可以用很少的代码完成，因此不需要插件），我想在加载页面上的每个图像时调用一个函数。

像这样的东西（由于弃用，这将不起作用）：

```
$('#mn_content .column').on('load','img',function(){
    console.log('loaded');  
}) 
```

## 我的问题

`load`既然事件不存在，有人知道如何实现这一目标吗？

***请注意：****如果（现在）实现这一点的唯一方法是使用 Javascript`new Image`对象，那么请不要浪费您的时间帮助我，因为其他人比我更需要您的帮助。我能够编写这段代码，对于如此基本的东西似乎有点啰嗦。*

***我只是问了这个问题，以确保在不使用 Javascript`image`对象的情况下无法实现这一目标***

*我当然会非常感谢任何帮助，我只是不希望你在其他人更需要你帮助的时候花太多时间在我身上。:-)*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T21:42:04.453

load 事件仍然存在，您不能再使用它来绑定它`.load`。您的事件委托示例应该继续适用于 1.9 和 2.0（如果您正在测试的浏览器支持加载事件的冒泡）

我个人仍然会[使用新的 Image 方法](https://stackoverflow.com/a/3511216/176877)，因为我不相信所有浏览器都会正确地冒泡加载事件。

编辑：对不起，如果我不清楚，我的意思是加载事件仍然存在，你只需要正确绑定它。由于加载事件不会在所有浏览器中冒泡（如果在任何浏览器中？），您必须将事件直接绑定到图像。我建议使用您要求我们不要为您提供示例的方法。

# c# - WCF Web 服务正在抛出 EndPointNotFoundException

> ID：14781789
> 
> 赞同：1
> 
> 时间：2013-02-08T21:40:02.733
> 
> 标签：c#, .net, wcf, exception-handling, wcf-endpoint

我正在尝试配置 WCF 服务以支持与客户端服务的双工通信，并且由于我切换到 WSDualHttpBinding 我现在在 IIS 中的服务上得到了这个

> 在[http://exampple.com/Temporary_Listen_Addresses/06be1668-e09f-441c-9fc9-999e4922d4a8/1002945c-979b-484e-a2c5-fa3470b6706d](http://exampple.com/Temporary_Listen_Addresses/06be1668-e09f-441c-9fc9-999e4922d4a8/1002945c-979b-484e-a2c5-fa3470b6706d)上没有可以接受消息的端点监听。这通常是由不正确的地址或 SOAP 操作引起的。有关更多详细信息，请参阅 InnerException（如果存在）。内部异常为空，基本上服务器上的服务托管在 IIS 中，然后我在客户端计算机上有一个连接到服务器的自托管服务和一个连接到自托管服务的客户端应用程序。wsDualHttpbinding 是从服务器到自托管服务，自托管服务公开一个命名管道供客户端应用程序进行通信。

这是服务中的 Web.config：

```
<?xml version="1.0"?>
<configuration>
  <system.serviceModel>
    <protocolMapping>
      <remove scheme="http" />
      <add scheme="http" binding="wsDualHttpBinding" />
    </protocolMapping>
    <bindings>
      <wsDualHttpBinding>
        <binding name="WsDualHttp_EcuWebBinding" />
      </wsDualHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="EcuWebServiceBehavior" name="EcuWeb.Service.EcuWebService">
        <endpoint address="/EcuWebService.svc" binding="wsDualHttpBinding" bindingConfiguration="WsDualHttp_EcuWebBinding" name="WsDualHttp_EcuWeb" contract="EcuWeb.Service.IEcuWebService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="EcuWebServiceBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" minFreeMemoryPercentageToActivateService="1" multipleSiteBindingsEnabled="true">
    <serviceActivations>
      <add relativeAddress="EcuWebService.svc" service="EcuWeb.Service.EcuWebService" />
    </serviceActivations>
  </serviceHostingEnvironment>
  </system.serviceModel>
</configuration> 
```

这是我的主机应用程序中的 App.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <client>
            <endpoint address="http://localhost:51334/EcuWebService.svc/EcuWebService.svc" binding="wsDualHttpBinding" bindingConfiguration="WsDualHttp_EcuWeb" contract="EcuWebService.IEcuWebService" name="WsDualHttp_EcuWeb">
                <identity>
                    <userPrincipalName value="myusername@domain.com" />
                </identity>
            </endpoint>
        </client>
        <behaviors>
            <serviceBehaviors>
                <behavior name="NetNamedPipeBehavior_EcuService">
                    <serviceDebug includeExceptionDetailInFaults="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <bindings>
            <netNamedPipeBinding>
                <binding name="NetNamedPipedBinding_EcuService" />
            </netNamedPipeBinding>
            <wsDualHttpBinding>
                <binding name="WsDualHttp_EcuWeb" />
            </wsDualHttpBinding>
        </bindings>
        <services>
            <service behaviorConfiguration="NetNamedPipeBehavior_EcuService"
                name="Ecu.Services.EcuService">
                <endpoint address="net.pipe://localhost/EcuNamedPipe" binding="netNamedPipeBinding" bindingConfiguration="NetNamedPipedBinding_EcuService" name="NetNamedPipeBinding_IEcuService" contract="Ecu.Services.IEcuService" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

最后是来自客户端测试应用程序的 App.config：

```
<?xml version="1.0"?>
<configuration>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
    <system.serviceModel>
        <bindings>
            <netNamedPipeBinding>
                <binding name="NetNamedPipeBinding_IEcuService" />
            </netNamedPipeBinding>
        </bindings>
        <client>
            <endpoint address="net.pipe://localhost/EcuNamedPipe" binding="netNamedPipeBinding" bindingConfiguration="NetNamedPipeBinding_IEcuService" contract="EcuServiceClient.IEcuService" name="NetNamedPipeBinding_IEcuService">
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T19:04:08.053

我已经解决了这个问题，这要归功于 SO 上的另一篇文章，它向我指出了这篇关于 WCF Duplex 服务的文章。[复式文章](http://www.dotnetconsult.co.uk/weblog2/PermaLink,guid,b891610a-6b78-4b54-b9a6-4ec81c82b7c0.aspx)

一旦我切换到 net.tcp 并设置好一切以使用它，双工通信就没有问题了。

# java - 使用 for 循环使用 java textfield.setText() 输出字符串

> ID：14781802
> 
> 赞同：1
> 
> 时间：2013-02-08T21:41:37.427
> 
> 标签：java, swing, document, jtextfield, parseint

问题是，我尝试制作第二个文本字段（textFieldGen）来打印出确切的结果，例如控制台。目前，第二个文本字段仅显示一个字符串。

这是我在 java GUI 上的第一个编码。（额外信息，我使用 Eclipse 和 WindowBuilder + GEF 构建它）

```
import java.awt.EventQueue;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import java.awt.TextField;
import java.awt.Label;
import java.awt.Button;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;

public class PassGenerator {
private JFrame frmPasswordGenerator;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                PassGenerator window = new PassGenerator();
                window.frmPasswordGenerator.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
public PassGenerator() {
    initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize() {
    frmPasswordGenerator = new JFrame();
    frmPasswordGenerator.setTitle("Password Generator");
    frmPasswordGenerator.setBounds(100, 100, 419, 229);
    frmPasswordGenerator.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frmPasswordGenerator.getContentPane().setLayout(null);

    final TextField textFieldGen = new TextField();
    final TextField textFieldPass = new TextField();

    textFieldPass.setBounds(74, 60, 149, 19);
    frmPasswordGenerator.getContentPane().add(textFieldPass);

    Label labelPass = new Label("Password Length:");
    labelPass.setBounds(74, 33, 177, 21);
    frmPasswordGenerator.getContentPane().add(labelPass);

    Button genButton = new Button("Generate");
    genButton.setBounds(262, 60, 86, 23);
    frmPasswordGenerator.getContentPane().add(genButton);
    // Add action listener to button
    genButton.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
        // Execute when button is pressed
        //System.out.println("You clicked the button");
            String getTxt = textFieldPass.getText();
            boolean y = true;

            do{
                try{
                    int c = Integer.parseInt(getTxt);
                    Random r = new Random();
                    String[] alphabet = {"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","w","x","y","z"};
                    int nc = 0-c;
                    int c2 = c/2;
                    int nc2 = 0-c2;
                    int ncm = (nc+1)/2;

                    if (c%2 == 0){
                        for(int x = nc2; x<0;x++){
                            int alphaNum = r.nextInt(26);
                            System.out.print(alphabet[alphaNum]);
                            String alpha = alphabet[alphaNum];
                            textFieldGen.setText(alpha.toString());
                            int numNum = r.nextInt(10);
                            System.out.print(numNum);
                            textFieldGen.setText(Integer.toString(numNum));
                        }
                    }
                    else {
                        for(int x = ncm; x<0;x++){
                            int alphaNum = r.nextInt(26);
                            System.out.print(alphabet[alphaNum]);
                            String alpha = alphabet[alphaNum];
                            textFieldGen.setText(alpha.toString());
                            int numNum = r.nextInt(10);
                            System.out.print(numNum);
                            textFieldGen.setText(Integer.toString(numNum));
                        }
                        int numNum = r.nextInt(10);
                        System.out.print(numNum);
                        textFieldGen.setText(Integer.toString(numNum));
                    }
                    y = false;
                }
                catch (NumberFormatException e1 ){
                    int messageType = JOptionPane.PLAIN_MESSAGE;
                    JOptionPane.showMessageDialog(null, "Please Enter Integer only", "Error!!", messageType);
                    y = false;
                }
            }while (y);
        }
    });          

    Label labelGen = new Label("Generated Password:");
    labelGen.setBounds(74, 109, 149, 21);
    frmPasswordGenerator.getContentPane().add(labelGen);

    textFieldGen.setBounds(74, 136, 149, 19);
    frmPasswordGenerator.getContentPane().add(textFieldGen);

    Button copyButton = new Button("Copy");
    copyButton.setBounds(262, 136, 86, 23);
    frmPasswordGenerator.getContentPane().add(copyButton);  
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:43:46.777

采用`textFieldGen.setText (textFieldGen.getText () + "\n" + Integer.toString(numNum))`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T01:24:50.647

我不明白你为什么要设置文本字段的内容两次。我会这样做：

```
int alphaNum = r.nextInt(26);
System.out.print(alphabet[alphaNum]);
String alpha = alphabet[alphaNum];
//textFieldGen.setText(alpha.toString());
int numNum = r.nextInt(10);
System.out.print(numNum);
//textFieldGen.setText(Integer.toString(numNum));
textFieldGen.setText(alpha + Integer.toString(numNum)); 
```

通常，当您只想在文本字段中添加一些字符时，替换整个文本并不是一个好习惯。如果您不喜欢上述内容，那么您可以执行以下操作：

```
textField.setText(alpha);
...
Document doc = textField.getDocument();
doc.insertString(doc.getLength(), Integer.toString(numNum), null); 
```

编辑：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

public class SSCCE extends JPanel
{
    public SSCCE()
    {
        JTextField textField = new JTextField(20);
        add( textField );

        textField.setText( "testing: " );

        try
        {
            Document doc = textField.getDocument();
            doc.insertString(doc.getLength(), "1", null);
        }
        catch(Exception e) {}
    }

    private static void createAndShowUI()
    {
        JFrame frame = new JFrame("SSCCE");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add( new SSCCE() );
        frame.pack();
        frame.setLocationRelativeTo( null );
        frame.setVisible( true );
    }

    public static void main(String[] args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                createAndShowUI();
            }
        });
    }
} 
```

# php - 在 CodeIgniter 中使用 WHERE CONCAT 和 Active Record

> ID：14781808
> 
> 赞同：3
> 
> 时间：2013-02-08T21:42:07.650
> 
> 标签：php, mysql, codeigniter, activerecord

我试图在这里插入的原始查询是：

```
SELECT * FROM x WHERE CONCAT(y, ' ', x) LIKE '%value%'; 
```

我已经检查了 AR 文档，但找不到任何可以让我这样做的东西。我不太熟悉它是如何构建这些查询的，并希望有人能指出我正确的方向。谢谢一堆。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T21:52:27.950

如果要使用 AR 类，则需要将 FALSE 作为第三个参数传递，以避免查询被自动转义。您现在只能自己逃避争论：

```
$value = $this->db->escape_like_str($unescaped);

$this->db->from('x');
$this->db->where("CONCAT(y, ' ', x) LIKE '%".$value."%'", NULL, FALSE);
$result = $this->db->get(); 
```

请参阅手册的 Active Record 会话中的第 4) 点。报价：

```
 Custom string:

   You can write your own clauses manually:
   $where = "name='Joe' AND status='boss' OR status='active'";
   $this->db->where($where);
   $this->db->where() accepts an optional third parameter. If you set it to FALSE, CodeIgniter will not try to protect your field or table names with backticks.
   $this->db->where('MATCH (field) AGAINST ("value")', NULL, FALSE); 
```

恕我直言，一种更简单的方法应该是运行“常规”查询并利用绑定：

```
$result = $this->db->query("CONCAT(y, ' ', x) LIKE '%?%'", array($value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:45:55.800

像这样的东西应该工作：

```
$this->db->where("CONCAT(y, ' ', x) LIKE '%value%'");

$this->db->get(x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T13:45:14.580

或者使用关联数组方法而不使用第三个参数：

```
$a = array(
    'CONCAT(`y`, " ", `x`)' => $value,
    'title' => $title,
    ...
);
...
$this->db->like($a); 
```

将生成查询的 WHERE 部分：
`... WHERE CONCAT(`y`, " ", `x`) LIKE '%test value%' AND `title` LIKE '%test title%' AND ...`
在使用多个搜索参数时显然很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-23T14:51:55.017

这是旧的，但...

你可以试试这个：

```
$this->db->like('CONCAT(field_name," ",field_name_b)',$this->db->escape_like_str('value')); 
```

# java - Java 硒。禁用页面的自动滚动

> ID：14781809
> 
> 赞同：2
> 
> 时间：2013-02-08T21:42:07.350
> 
> 标签：java, selenium-webdriver, scroll

我正在使用 Java 的 selenium 进行自动化测试，浏览器是 Firefox。

这是我的示例代码：

```
WebElement elem = driver.findElement(By.xpath(".//*[@id='main']/div/div[3]/div[1]/div/div[3]/div/div/div/a"));
Actions action = new Actions(driver);
Actions action2 = action.moveToElement(elem);
action2.perform(); 
```

问题是“moveToElement”动作正在触发页面的自动滚动事件。我希望页面保持原样而不滚动。有人可能知道如何禁用此自动滚动？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:28:27.090

你不能。WebDriver 在对元素进行操作时将元素滚动到视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:40:05.523

您不能禁用自动滚动。

* * *

一些可能的解决方法：

1.  如果这对你的事业有帮助，你可以尝试在你[的身上触发一个综合`mouseover`事件](https://stackoverflow.com/questions/911586/javascript-simulate-mouse-over-in-code)`WebElement`。

2.  之后`moveToElement()`，您可以尝试使用[`window.scrollTo()`](https://developer.mozilla.org/en-US/docs/DOM/window.scroll)或例如`Page Up`键重新滚动到您需要的位置。显然，这会破坏`mouseover`元素，但也许这就是您所需要的。

3.  您可以通过[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)类将真实的鼠标光标定位在元素上。这可能有点棘手，您可能需要使用浏览器进入全屏模式（或使用[this](https://stackoverflow.com/questions/14655581/selenium-and-html-window-location/14677516#14677516)），然后手动处理滚动偏移（如果有的话）。

* * *

一切都取决于您的意图，您真正需要对元素做什么以及为什么。

# css - 谷歌浏览器上的边界半径中断

> ID：14781810
> 
> 赞同：1
> 
> 时间：2013-02-08T21:42:09.243
> 
> 标签：css, html

我很难找到解决这个问题的方法。我在[这里](http://jsfiddle.net/B9b2x/2/)设置了这个小例子。

谷歌浏览器似乎打破了*:hover*的边界半径，而 Firefox 正确呈现它。解决此问题的正确方法是什么？

`position:relative`在*.bubble*中可能是破坏它的东西，如果是这样，是否有任何其他解决方案可以将*.info*绝对位置 div 嵌套到*.bubble*所以`top:`会使用 .bubble 的顶部*而*不是页面？

HTML：

```
<div class="bubble">
    <img src="http://oneslidephotography.com/wp-content/uploads/2009/05/Digital-SLR-Photography-All-in-One-For-Dummies-sample-image.jpg" />
    <div class="info">
        <h3>Some Info Text</h3>
    </div>
</div> 
```

CSS：

```
.bubble {
    position: relative;
    float: left;
    width: 200px;
    height: 200px;
    border-radius: 50%;
    overflow: hidden;
}

.info {
    overflow: hidden;
    position: absolute;
    width: inherit;
    -webkit-transition: top 0.2s ease-out;
    -moz-transition: top 0.2s ease-out;
    -o-transition: top 0.2s ease-out;
    -ms-transition: top 0.2s ease-out;
    transition: top 0.2s ease-out;
    top:200px;
}

.bubble:hover .info {
    top:80px;
}

.info h3{
    text-align: center;
    font-family: sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:47:50.723

我认为问题在于您的图像占据了整个背景。

我已经对其进行了更改，因此您没有图像（并减小了边框半径）……所以只是基本的边框半径，当然，一切都很好：

```
<div class="bubble" style='border:solid 1px'>
    <div class="info">
        <h3>Some Info Text</h3>
    </div>
</div> 
```

[http://jsfiddle.net/SbR6n/](http://jsfiddle.net/SbR6n/)

听起来像一个错误。

# javascript - 在来自 forEach 的另一个回调中引用相同的对象

> ID：14781816
> 
> 赞同：1
> 
> 时间：2013-02-08T21:42:25.120
> 
> 标签：javascript

我正在尝试向对象添加新属性。它似乎在这个范围内正常工作：

```
rows.forEach(function (row, i) {
  row.foo = i;
}); 
```

如果我执行 console.log(rows) 我可以看到 foo 添加了正确的值。如果我在 forEach 中有另一个回调，我不会再看到更改。为什么？

```
rows.forEach(function (row, i) {
  getUserById(row.user_id, function(user) {           
    row.foo = i;
  });
}); 
```

是的，回调 get 正确触发。这是getUserById

```
function getUserById(userId, callback) {
  connection.query('select * from t_user where id = ?', [userId], function(err, results) {

  if (err) {
    console.log("repo error");
  } else {
    if (results.length == 0) {
      callback(null);
  } else {
      callback(results[0]);
    }
  }
}); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:00:31.623

我只能想象如果`getUserById`延迟调用您传递的回调函数，您会看到这个问题。在这种假设下，您的问题是时间问题。

每次你调用`getUserById`并传递一个回调，你基本上是在说“当你得到这个 id 的用户时调用这个函数”，然后继续你的程序的其余部分。这意味着当`console.log`被调用时，您的回调尚未被调用。相反，您必须等待所有回调完成，然后调用任何依赖于您在回调中设置的值的代码。

等待所有回调完成的一般方法是制作一个特殊的回调函数，该函数将委托给每个回调，并在它们全部被调用后进行跟踪。

[这是一个使用异步](https://github.com/caolan/async)库回答的问题，我很喜欢这个库（尽管有许多库可以解决这个控制流问题）。

[在 Node.js 中等待多个回调的惯用方式](https://stackoverflow.com/questions/5172244/idiomatic-way-to-wait-for-multiple-callbacks-in-node-js)

这是一个原始的 JavaScript 解决方案，它足够健壮，可以在并非所有回调都相同的一般情况下工作（也就是说，如果您希望为每个用户 ID 使用不同的回调）。

[多个异步回调 - 完成时使用数组触发函数](https://stackoverflow.com/questions/4737680/multiple-asynchronous-callbacks-using-an-array-to-fire-function-when-complete)

# jquery-mobile - 在弹出窗口中的图片之间滑动

> ID：14781817
> 
> 赞同：0
> 
> 时间：2013-02-08T21:42:27.973
> 
> 标签：jquery-mobile, popup, jquery, swipe

我在使用 jquery mobile 识别弹出窗口上的滑动事件时遇到了一些麻烦。我已经成功实现了页面之间的滑动，但似乎无法让它在弹出窗口中工作。

我的弹出窗口包含一个图像和一个关闭按钮。当我滑动它时，它后面的页面被滑动并且弹出窗口消失了。绑定到滑动事件的回调函数永远不会被调用。

这是我的 HTML 代码：

```
<a href="#vikingmanager1popup" data-rel="popup" data-position-to="window"><img src="images/vikingmanager1_thumb.jpg" />

<div data-role="popup" id="vikingmanager1popup" id="pic">
    <img class="popphoto" src="images/vikingmanager1.jpg" />
    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right"></a>
</div> 
```

这是我的js：

```
$(document).on('swipe',"#pic",function() {
    console.log("Hello");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:05:31.350

好吧似乎已经自己解决了...

ID 不应该放在 div 上，而应该放在图像本身上。

# wolfram-mathematica - 在 Mathematica 中读取包

> ID：14781823
> 
> 赞同：1
> 
> 时间：2013-02-08T21:42:54.227
> 
> 标签：wolfram-mathematica

我已经在 Mathematica 中创建了一个包，但我似乎无法让 Mathematica 读取它。包的形式为：

开始包[“名称`”]

（*函数[]::用法*）

开始["`私人'"]

（*功能*）

结尾[]

结束包[]

我将此文件保存为 .m。问题是，在我退出内核然后尝试使用 Needs["name`"] 读取包后，我总是收到 no::cont 错误。我尝试将文件保存在 $BaseUserDirectory 和 $BaseDirectory 中，但它仍然给我一个 no::cont 错误：

Needs["name `"] Needs::nocont: "Context \!\(\"name`\") 在评估 Needs 时未创建。"

我也试过在 Mathematica 中使用内置的 File->Install 函数，但它仍然给我同样的错误。关于上下文，我需要改变什么吗？

任何帮助深表感谢。

谢谢你，jm

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-16T10:37:53.977

创建包笔记本时在“初始化单元”中写入定义。否则它们将被忽略。这对我在 OS X 上的版本 9 有效。在以前的版本中可能没有必要，但我不记得了...... :-)

# javascript - 淘汰js将正确的参数传递给方法

> ID：14781824
> 
> 赞同：1
> 
> 时间：2013-02-08T21:42:55.630
> 
> 标签：javascript, knockout.js

在敲除中使用点击绑定时，敲除如何知道将正确的参数传递给其绑定的方法？

```
<div id="test" data-bind="click: runTest"/>
</div>

self.runTest = function (coolParameter){
doSomethingCool();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:47:04.247

> 调用您的处理程序时，Knockout 将提供当前模型值作为第一个参数。如果您正在为集合中的每个项目呈现一些 UI，并且您需要知道单击了哪个项目的 UI，这将特别有用。

从[文档](http://knockoutjs.com/documentation/click-binding.html)

文档中也有一些关于如何通过添加包装函数来传递更多参数的讨论

```
<button data-bind="click: function(data, event) { 
    myFunction('param1', 'param2', data, event) 
}">
    Click me
</button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:47:11.777

淘汰赛了解要从上下文传递哪个值。它是当前的模型对象。例如，如果您在 foreach 淘汰赛中通过当前项目。

# playframework-2.0 - 如何在播放框架 2 上使用会话解决此错误

> ID：14781828
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:43:44.510
> 
> 标签：playframework-2.0

我用 play framework 2 开始了一个小项目。无论如何，我在使用会话时遇到了这个错误：（图片） [http://i.stack.imgur.com/RANmz.png](http://i.stack.imgur.com/RAnmz.png)

课程在这里： [https ://github.com/jstar88/LibreTitan/blob/master/app/services/Authenticator.java](https://github.com/jstar88/LibreTitan/blob/master/app/services/Authenticator.java)

你能告诉我问题出在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:51:02.177

我想这是因为 session() 是一个静态调用，它是 API 中控制器的一部分，如此链接[http://www.playframework.com/documentation/api/2.0.4/java/index.html](http://www.playframework.com/documentation/api/2.0.4/java/index.html)所示。

要解决此问题，您可以静态引用它或让您的服务扩展控制器（我无法想象您会想要）

```
public static boolean isCurrentUserLogged() {
    return play.mvc.Controller.session("id_user") != null;
} 
```

# iphone - 对@2x 和图像分辨率的困惑

> ID：14781832
> 
> 赞同：0
> 
> 时间：2013-02-08T21:44:01.740
> 
> 标签：iphone, ios, cocoa-touch

我有一些从网上得到的图像。假设我可以在不进行像素化的情况下制作的最大尺寸为 500 x 500。话虽如此，我是否应该制作它的@2x 版本，只需 500 x 500 版本和普通版本（即非视网膜）250 × 250？对于为正确的屏幕分辨率正确调整图像大小有点困惑，我们将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:46:20.030

是的，你说的是正确的。

请记住，一旦你把它放在设备上，@2x 将在视网膜屏幕上显示为 250x250 点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:46:28.703

如果@2x 版本是 500 x 500，那么它将在加载时被视为 250 x 250 双分辨率图像 ( `scale`= 2)。

# apache - ModRewrite 到漂亮的 URL

> ID：14781835
> 
> 赞同：0
> 
> 时间：2013-02-08T21:44:21.023
> 
> 标签：apache, .htaccess, mod-rewrite

我知道有很多这样的问题，但我真的找不到一个可以翻译成我需要的问题：

我正在尝试重写

```
www.domain.com/subfolder/index.php?p=test.php&condition=true&another=false 
```

至

```
www.domain.com/subfolder/p/test/condition/true/another/false 
```

其中 PHP GET 变量可以是整数、字符串或布尔值。p 变量是特殊的，并且会一直存在。

我试过了

```
RewriteEngine On
RewriteRule ^([^/]*)$ /subfolder/index.php?p=$1 [L] 
```

作为部分解决方案，但我无法让它工作（我只是得到 404s）

我是一个 Mod Rewrite 菜鸟，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:54:51.447

这更多地与正则表达式有关。如果没记错的话，你需要更多这样的东西：

```
RewriteRule ^/subfolder/(.*)/(.*)/$ /subfolder/index.php?p=$1&condition=$2 [L] 
```

每个编号的参数必须对应于重写的第一部分的某些部分。也就是说，**$1**对应于第一个**(.*)**。

我没有时间对此进行测试，但这个想法或多或少是正确的。

# tree - 在 COMMON LISP 中使用前序和中序进行树重建

> ID：14781837
> 
> 赞同：2
> 
> 时间：2013-02-08T21:44:43.437
> 
> 标签：tree, lisp, common-lisp, binary-tree, allegro-cl

由于我一直在学习 LISP 并阅读实用的通用 lisp，因此我发现了一些问题并试图解决这些问题，我陷入了这个特定问题，并且不确定如何解决它，因此希望得到一些帮助/建议。

我需要能够从它的前序和有序创建一个后序树

例如，如果给出以下内容：

预购：ABDECF

顺序：DBEACF

输出将是后序：DEBFCA

从我所见，中序的第一个元素始终是后序的第一个元素，所以我开始编写代码来反映这一点：

```
(defun tree-recovery (preorder inorder)
  (let (root)
    (setf root (first inorder)))) 
```

但我不确定从这里去哪里，任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:20:54.497

如果我们命名我们的函数`tree-recovery`，让它恢复树而不是构建后序序列。（需要比我更聪明的人来解决问题，而无需实际重建树）。

中序和后序从同一个元素开始，但该元素 *不是*根：前*序*序列的第一个元素是根。

让我们恢复树，假设所有序列元素都是可比较的非零原子`EQL`。我们将*叶子*表示为 atom 的值，其他节点表示为`(list root left right)`，空子树表示为 NIL。

```
(defun tree-recovery (preorder inorder)
  (if (rest preorder)
      (let* ((root (pop preorder))
             (inorder-root-tail
               (member root inorder))
             (inorder-left
               (ldiff inorder inorder-root-tail))
             (left-length
               (length inorder-left))
             (inorder-right
               (rest inorder-root-tail))
             (preorder-left
               (subseq preorder 0 left-length))
             (preorder-right
               (subseq preorder left-length)))
        (list root
              (tree-recovery preorder-left inorder-left)
              (tree-recovery preorder-right inorder-right)))
      (first preorder))) 
```

对于空树，我们返回 NIL。对于一个叶子节点的普通树，我们返回一个值。

`preorder`对于其他树，我们首先从（它的第一个位置）弹出根元素。然后我们在 中找到一个以根元素开头的子列表 `inorder`。我们用它来得到一块`inorder`对应于我们的左子树和一块`inorder`对应于我们的右子树。知道我们的左子树的*大小*`preorder`，我们很容易得到左右一块。

现在，当我们有一棵树时，进行后序遍历很容易：

```
(defun postorder (tree)
  (and tree ;; non-empty
       (if (consp tree) ;; non-leaf
           (destructuring-bind (root left right) tree
             (append (postorder left)
                     (postorder right)
                     (postorder root)))
           (list tree)))) 
```

我们试试看：

```
(postorder 
 (tree-recovery '(a b d e c f)
                '(d b e a c f)))
=> (D E B F C A) 
```

似乎工作。

# ios - 如何将图像下载到应用程序中？

> ID：14781839
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:44:49.067
> 
> 标签：ios, objective-c

如何将图像下载到应用程序中？就像我想从我的网站获取图像并将其下载到该人的 iphone 应用程序中以在应用程序中显示？基本上图像不会通过 url 显示。

更详细：

如何在不使用 UIImage 的情况下将图像下载到应用程序。我想获取图像并将其下载为文件名“anne.png”，然后使用 UIImage 作为 anne.png 在整个应用程序中引用它。看 - 我想先下载它，这样当有人第二次访问该应用程序时，他们会看到图像，同时看到默认图像.. 谢谢。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:55:14.047

对于单个图像，您可以使用以下内容。请记住，这将阻止 UI 直到图像完全下载。

```
[UIImage imageWithData:[NSData dataWithContentsOfURL:photoURL]]; 
```

要在不阻塞 UI 的情况下下载图像：

```
dispatch_queue_t downloadQueue = dispatch_queue_create(“image downloader”, NULL);

dispatch_async(downloadQueue, ^{
    [NSData dataWithContentsOfURL:photoURL];
    dispatch_async(dispatch_get_main_queue(), ^{
        UIImage *image = [UIImage imageWithData:imageData];
        // Code to show the image in the UI goes here
    });
￼}); 
```

要将图像保存到手机相机胶卷，您可以使用[UIImageWriteToSavedPhotosAlbum](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImageWriteToSavedPhotosAlbum)。

将图像保存在应用程序的目录中。使用 NSData 的[writeToFile:atomically:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/uid/20000172-CIAEAHFJ)

要从网站下载多张图片，也许这可以帮助您：

[下载多个图像并显示多个 UIImageView 的最佳方法是什么？](https://stackoverflow.com/questions/14263303/whats-the-best-way-to-download-multiple-images-and-display-multiple-uiimageview/14263764#14263764)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:56:14.100

[http://mobiledevelopertips.com/cocoa/download-and-create-an-image-from-a-url.html](http://mobiledevelopertips.com/cocoa/download-and-create-an-image-from-a-url.html)

**远程图像的 URL**

我们首先创建一个指向远程资源的 URL：

```
NSURL *url = [NSURL URLWithString: @"http://mobiledevelopertips.com/images/logo-iphone-dev-tips.png"]; 
```

**从 NSData 创建 UIImage**

下一步是使用从 URL 下载的数据构建一个 UIImage，该数据由一个保存远程图像内容的 NSData 对象组成：

```
 UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]]; 
```

**把它放在一起**

以下是如何将它们包装在一起，通过从上面的 UIImage 创建 UIImageView 将远程图像作为子视图添加到现有视图：

```
 NSURL *url = [NSURL URLWithString:@"http://mobiledevelopertips.com/images/logo-iphone-dev-tips.png"];
UIImage *image = [UIImage imageWithData: [NSData dataWithContentsOfURL:url]]; 
  [self.view addSubview:[[UIImageView alloc] initWithImage:image]]; 
```

# asp.net - 自定义 Sharepoint 2010 表单中的 PeopleEditor 控件不起作用

> ID：14781843
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:45:35.113
> 
> 标签：asp.net, sharepoint, sharepoint-2010

我正在开发用于将项目添加到 sharepoint 2010 自定义列表的自定义表单。在我的 add.aspx 网站上，我使用以下 Web 控件：

```
<SharePoint:UserField runat="server" ID="Workers" ControlMode="New" FieldName="Workers"/>

<SharePoint:PeopleEditor runat="server" ID="Managers" ControlMode="New" FieldName="Managers"/> 
```

如您所见，它们连接到列表中的特定字段：

```
<Field ID="{1EE0732A-FDD7-4128-A112-BE136DB948D9}" Name="Workers" DisplayName="Workers" Type="UserMulti" Required="TRUE" Mult="TRUE"/>

<Field ID="{1A499D66-B23B-40E4-8306-AF40F9081729}" Name="Managers" DisplayName="Managers" Type="UserMulti" Required="TRUE" Mult="TRUE"/> 
```

问题是，在我填写表格并单击保存按钮后，新项目出现在列表中，但只是填写了工人字段。为什么它对 PeopleEditor 控件 (microsoft.sharepoint.webcontrols.peopleeditor) 不起作用？我真的很想让这个工作，因为它有 Accounts 集合，其中包含所有域 \ uid 的用户，这些用户放在这个控件中。如何使其工作或如何从 Microsoft.SharePoint.WebControls.PeopleEditor 获取此类集合？我需要以某种方式获取这些值以对“保存”单击事件执行服务器端验证。

顺便提一句。是否有网络控件用于每种字段类型的信息？即：
**SharePoint:RadioButtonChoiceField - 选择
SharePoint:TextField - 文本
SharePoint:BooleanField - 布尔值**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:14:48.463

尝试使用`FormField`它将为您采用默认控件模板，如果您有自定义字段，它也将采用自定义控件。

```
<SharePoint:FormField runat="server" id="fldTitle" FieldName="Title" ControlMode="New" /> 
```

编辑：针对您的评论，这是解析用户字段值的正确方法：

```
private void ProcessUsers(SPListItem item, string fieldName)
{
  string fieldValue = item[fieldName] as string;
  SPFieldUserValueCollection users = new SPFieldUserValueCollection(item.Web, fieldValue);

  foreach(SPFieldUserValue uv in users)
  {
    SPUser user = uv.User;
    // Process user
  } 
```

# linux - 共享内存标记为虚拟内存？

> ID：14781844
> 
> 赞同：1
> 
> 时间：2013-02-08T21:45:39.520
> 
> 标签：linux, unix, operating-system, ipc

我运行一个程序，它分配 64MB 作为 IPC 通信的共享内存。pmap 显示分配了 64MB 的块。然而，"top" 显示 proc 的 RES 内存只有 40MB 左右！我得出结论，共享内存被标记为 VIRT。但为什么？Linux 仍然有超过 1GB 的可用 RAM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T21:47:09.783

你真的用过那64MB吗？Linux 延迟分配。

参看。[malloc 是否会为 Linux（和其他平台）上的分配懒惰地创建支持页面？](https://stackoverflow.com/questions/911860/does-malloc-lazily-create-the-backing-pages-for-an-allocation-on-linux-and-othe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T15:36:12.373

Linux 不会将进程“获得”的所有内存加载到 RAM 中，它只会在您编程引用该内存块时将内存从虚拟位置加载到 RAM。这里的“内存”是指私有内存和共享内存。我还没有做任何实验来验证上述观点，但我在很多地方都看到过，比如 SO，我确实相信。仅供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T20:41:28.900

就像用户态程序处理的大多数（如果不是全部）内存一样，共享内存是虚拟的。只有活动页面需要映射到物理（即常驻内存）。采取不同的做法会浪费资源。

唯一的例外是当进程专门用`mlock`.

# javascript - 解决方法 AngularJS DOM 异常

> ID：14781845
> 
> 赞同：2
> 
> 时间：2013-02-08T21:45:43.417
> 
> 标签：javascript, angularjs

在 $digest 阶段复制它时，Angular 似乎被 Chrome（可能还有其他浏览器）XMLHttpRequest 的“打开”状态绊倒了。当访问 XMLHttpRequest.status 字段时，它会引发异常。我的实际用例没有绑定到状态字段；XMLHttpRequest 对象只是我 $watch 的数组中另一个对象的一个​​成员。

所以，

a) Angular 是否应该更聪明地处理这种情况并忽略异常？
b）有没有办法让Angular在消化包含对象时忽略字段或对象？
c) 其他解决方法建议？

这是一个例子。这个 HTML+Javascript ( [JSFiddle](http://jsfiddle.net/darrinm/Km7PL/4/) ):

```
<div ng-app ng-controller="TestCtrl">
  <h2>XMLHttpRequest.status: {{ xhr.status }}</h2>
</div>

function TestCtrl($scope) {
  $scope.xhr = new XMLHttpRequest();
  $scope.xhr.open('POST', 'http://localhost:8000/api/medias', true);
} 
```

导致此错误：

```
Error: INVALID_STATE_ERR: DOM Exception 11
Error: An attempt was made to use an object that is not, or is no longer, usable.
at eval (eval at Jb (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:74:389), <anonymous>:16:4)
at d.fn.x.assign (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:63:120)
at Object.j (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:52:126)
at Object.e.$digest (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:84:286)
at Object.e.$apply (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:86:469)
at http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:15:396
at Object.d [as invoke] (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:26:401)
at pb (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:15:317)
at jc (http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:15:178)
at http://cdnjs.cloudflare.com/ajax/libs/angular.js/1.0.3/angular.min.js:159:424 angular.min.js:60 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:31:10.637

您需要使用该**[`$http`](http://docs.angularjs.org/api/ng.%24http)**服务。（示例 99% 来自 Angular 文档示例）

**控制器：**

```
function TestCtrl($http, $scope) {
  $scope.xhr = {status : undefined};

  $http.post('http://localhost:8000/api/medias', {params:{'go':'here'}})
    .success(function(data, status) {
      $scope.xhr.status = status;
    })
    .error(function(data, status) {
      $scope.xhr.status = status;
    });
} 
```

**编辑（未测试）：使用**XMLHttpRequest的****控制器**： 使用**[事件侦听](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)**器调用`$apply`**

 **```
function TestCtrl($http, $scope) {
   $scope.xhr = {status : undefined};

   var xhr = new XMLHttpRequest();

   xhr.addEventListener('progress', function(event) {
     var progress = event['something']//get what you need from the event..
      $scope.$apply(function() {
        $scope.xhr.progress = progress;
      });
   }, false);

   xhr.open('POST', 'http://localhost:8000/api/medias', true);
} 
```

**模板：**

```
<div ng-app ng-controller="TestCtrl">
  <h2>XMLHttpRequest.status: {{ xhr.status }}</h2>
  <h2>XMLHttpRequest.status: {{ xhr.progress}}</h2>
</div> 
```

**例子：**

*   **[plnkr](http://plnkr.co/edit/FH2LPTM1pHdL01v7ABKu?p=preview)**（带获取）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:44:05.067

对于我的问题的 b 部分：

> b）有没有办法让Angular在消化包含对象时忽略字段或对象？

答案是肯定的，用函数包装字段/对象，例如：

```
$scope.getXhr = function () { return xhr; } 
```

Angular 在 $digesting 时会忽略它。当然，这假定您希望/需要忽略它。对该字段/对象的更改不会触发观察者。**

# jquery - 单击时将项目添加到会话

> ID：14781846
> 
> 赞同：0
> 
> 时间：2013-02-08T21:45:55.507
> 
> 标签：jquery, laravel

使用 Laravel，在以下场景中，如何将图书 ID 添加到会话中？

```
@foreach( $books as $book )
    <li>
        {{ $book->name }}
        <a href="#" onClick='addBookToList( "<?= $book->id ?>" )'>Add Book To List</a>
    </li>
@endforeach 
```

这是我的尝试。我知道它不应该以这种方式工作，但我需要如何改变它？

```
<script>
function addBookToList( bookId )
{
    <? Session::put( 'bookId', bookId ); ?>
}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:35:44.543

亚历山大是当场的。我将使用路由来处理请求，但您可以在控制器中使用完全相同的代码。

```
//routes.php
Route::post('/ajax/add-book', function(){
     Session::put( 'bookId', Input::get('bookId') );
}); 
```

您的 html/js 实现很好。这是实现相同目的的另一种方法：

```
<a href="javascript:void(0)" data-book="<?= $book->id ?>">Add Book To List</a> 
```

在你的 js 文件中

```
$('a[data-book]').click(function($e){
    $e.preventDefault();
     $.post("/ajax/add-book", {
        "bookId": $(this).data('book')
      });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:05:50.797

从未使用过 Laravel，但我相信这些方面的东西可能会起作用：

```
var addBookToList = function(bookId){
  $.post("session.php", {
    "bookId": bookId
  });
}; 
```

```
<a href="#" onClick='addBookToList( "<?= $book->id ?>" )'>Add Book To List</a> 
```

```
<?php Session::put( 'bookId', Input::get('bookId') ); ?> 
```

# javascript - RFC 电子邮件正则表达式模式在 Visual Studio 中显示为错误？

> ID：14781848
> 
> 赞同：1
> 
> 时间：2013-02-08T21:46:01.280
> 
> 标签：javascript, visual-studio-2010

我正在使用 RFC 中的[确切电子邮件正则表达式模式](http://www.regular-expressions.info/email.html)：

```
 [a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])? 
```

然而

当我将其粘贴到 vs 时：

```
var emailPattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i; 
```

它显示错误：http: [//i.stack.imgur.com/UkJJE.jpg](https://i.stack.imgur.com/UkJJE.jpg)

![在此处输入图像描述](../Images/34d72ed4d3b4cbea4b855d2f5db1b866.png)

*未确定的字符串常量*

如何消除此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T21:52:59.647

`/`如果您决定使用 / 作为分隔符，我认为您需要在您的正则表达式中转义，因此将正则表达式中的每次`/`出现替换为`\/`.

问题是，因为第一个和最后一个`/`在这里指示您正则表达式真正开始的位置和真正结束的位置，您需要`/`在正则表达式内部转义，以便解析器了解在哪里停止。

这应该工作：

```
var emailPattern = /[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i; 
```

正如您在评论中指出的那样，使用该构造`new Regexp("...")`可以让您构建正则表达式而不必逃避。

两种构造是等价的。更多信息[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

# system-requirements - 系统要求和功能要求

> ID：14781849
> 
> 赞同：1
> 
> 时间：2013-02-08T21:46:06.427
> 
> 标签：system-requirements

你能解释一下系统和功能要求之间的区别吗？

在我工作的公司中，我为负责履行和提供客户请求的服务的应用程序之一担任业务分析师/设计角色。我的可交付成果是一份包含系统需求和功能需求的设计文档。我们定义系统需求以定义系统的高级功能，并定义功能需求以将系统需求分解成足够的细节。所以一个 SR 可以包含 1-N 个 FR。我不确定这是否是整个行业都遵循的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-23T11:46:58.880

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:48:16.940

在软件工程中，功能需求描述了软件应该做什么。系统要求描述了应该在哪些硬件/操作系统/中间件软件上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T22:36:37.537

Punter Vicky，我会很实际地告诉你：这几乎是一回事。**功能需求**是一种系统需求，描述了系统必须做什么。可能是计算、技术细节、数据操作和处理以及其他定义系统应该完成的特定功能。**System Requirement**有两层含义： 1) 硬件/软件/等先决条件；2）类似于功能需求，但可能以抽象的方式使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T17:44:38.930

有不同的方式来查看/定义系统和功能需求，所有这些都是正确的。您的系统需求可以定义整个系统需要做什么，并为系统的每个子部分编写功能需求，以详细说明它如何满足系统需求。除了在需求之间进行跟踪之外，您还有另一个将系统需求分配给不同子系统的“文档”。我仍然会在比软件需求更高的层次上处理这些功能需求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-08T23:39:48.830

Punter Vicky，我已经做了 20 多年的需求，我发现我工作的每家公司的定义都不同。我建议您向贵公司索取一些以前的文档示例。

您之前收到的答案在技术上是正确的。功能需求通常说明系统将如何与用户一起工作，系统需求将告诉您系统将如何在技术上完成功能需求。祝你好运。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-21T21:07:58.437

功能需求解决“什么”，系统需求解决“如何”。

草坪搬运工应该能够割草：功能。它可以使用金属刀片或塑料来执行切割功能：系统。

有了电话，一个人应该可以打电话：功能。电池应该保持更长的时间才能通话：系统或非功能要求 (NFR)

# xml - 使用 Google Apps 脚本解析和编辑 XML

> ID：14781853
> 
> 赞同：1
> 
> 时间：2013-02-08T21:46:20.880
> 
> 标签：xml, google-apps-script

我一直在寻找一种使用 Google Apps 脚本解析和编辑 XML 的方法。使用内置的 Xml 类解析数据很容易，但这并不能让我编辑任何数据。以示例 XML 为例：

```
<?xml version='1.0' encoding='UTF-8'?>
<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gContact='http://schemas.google.com/contact/2008' xmlns:batch='http://schemas.google.com/gdata/batch' xmlns:gd='http://schemas.google.com/g/2005' gd:etag='&quot;Xh9QE00OESt7I2Bp&quot;'>
<id>http://www.google.com/m8/feeds/profiles/domain/test.com/full/user</id>
<info>Test Info</info>
</entry> 
```

假设我正在寻找修改信息条目。目前我只是将整个内容保存为一个字符串，`indexOf("<info>")`用于查找条目的开始位置并将测试从那里替换为`indexOf("</info>")`. 这似乎可行，但我认为它不那么可靠（如果标签具有属性，它将无法找到它）。

我在这里看到另一个线程有人建议使用 XML（不是 Xml）来修改属性，但我不知道如何将我拥有的现有 xml（用 UrlFetchApp 检索到字符串中）解析到对象中。

有没有人对此有任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T09:07:26.143

万一将来有人发现这个（你好未来的人，飞行汽车和机器人女仆怎么样？），我无法找到在应用程序脚本中解析和编辑 xml 的方法，所以我编写了自己的 json 到 xml对我有用的功能（处理来自 google profile api 的数据）。我还没有对它进行太多其他测试，所以如果你想使用它们，你可能必须修改它们。

```
function xmlToJson(xmlElement) {
  var e = {"namespace" : xmlElement.getName().getNamespace(),
           "name" : xmlElement.getName().getLocalName()};
  var xmlAs = xmlElement.getAttributes();
  if(xmlAs.length > 0) {
    e.attributes = {};
    for(var j = 0; j < xmlAs.length; j++) {
      e.attributes[xmlAs[j].getName().getLocalName()] = {"namespace" : xmlAs[j].getName().getNamespace(),
                                                         "name" : xmlAs[j].getName().getLocalName(),
                                                         "value" : xmlAs[j].getValue()};
    }
  }

  var xmlChildren = xmlElement.getElements();
  if(xmlChildren.length > 0) {
    e.children = {};
    for(var i = 0; i < xmlChildren.length; i++){
      var child = xmlToJson(xmlChildren[i]);
      if(typeof e.children[child.name] != "undefined")
        e.children[child.name].push(child);
      else
        e.children[child.name] = [child];
    }
  } else {
    e.value = xmlElement.getText();
  }
  return e;
}

function jsonToXmlString(json) {
  var xml = "<?xml version='1.0' encoding='UTF-8'?>";
  var namespaces = new Object(); // List of things which are possibly namespaces
  namespaces["http://www.w3.org/2000/xmlns/"] = "xmlns";

  function appendNode(node) {
    if(typeof node.attributes != 0) {
      var attributes = ""; // Get attributes first incase any are namespaces
      var keys = getKeys(node.attributes);
      for(var i = 0; i < keys.length; i++) { // Loop through attributes once to get namespaces
        if(node.attributes[keys[i]].value.indexOf("http") == 0) // Possible namespace, store in namespaces
          namespaces[node.attributes[keys[i]].value] = node.attributes[keys[i]].name;
      }
      // If we only do one loop, there may be some namespaces on attributes that don't get recorded first
      for(var i = 0; i < keys.length; i++) { 
        if(node.attributes[keys[i]].namespace != "") // Get namespace if needed
          var ns = (namespaces[node.attributes[keys[i]].namespace] || node.attributes[keys[i]].namespace) + ":";
        else
          var ns = "";
        attributes += " " + ns + node.attributes[keys[i]].name + "='" + node.attributes[keys[i]].value + "'"; 
      }
    }
    if(node.namespace != "") // Get namespace if needed
      var ns = (namespaces[node.namespace] || node.namespace) + ":";
    else
      var ns = "";

    xml += "<" + ns + node.name + attributes;

    if(typeof node.children != "undefined") { 
      xml += ">";
      var cKeys = getKeys(node.children);
      for(var i = 0; i < cKeys.length; i++) {
        for(var j = 0; j < node.children[cKeys[i]].length; j++)
          appendNode(node.children[cKeys[i]][j]);
      }
    } else if(typeof node.value != "undefined") {
      xml += ">" + node.value;
    } else {
      xml += "/>";
      return
    }

    xml += "</" + ns + node.name + ">"
  }

  appendNode(json);
  return xml;
} 
```

# .net - 如何使 IEnumerable .包含不区分大小写？

> ID：14781857
> 
> 赞同：63
> 
> 时间：2013-02-08T21:46:52.043
> 
> 标签：.net, arrays, string, linq

假设我有一个 .net 字符串数组。

```
string[] strings = new string[] { "AbC", "123", "Xyz", "321" }; 
```

如果我想查看字符串数组是否包含“ABC”，我可以写

```
strings.Contains("ABC"); 
```

但是，假设我想要一个函数，如果字符串的大写值包含“ABC”，它将返回 true。我可以大写整个数组，但看起来该`.Contains`方法有一些用于指定比较的重载，但我对语法感到困惑。

如何使用该`IEnumerable<string>.Contains()`方法实现此逻辑？

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-02-08T21:49:13.523

使用接受相等比较器的重载[Enumerable.Contains](http://msdn.microsoft.com/en-us/library/bb339118.aspx)方法：

```
strings.Contains("ABC", StringComparer.InvariantCultureIgnoreCase) 
```

框中还有[字符串比较器](http://msdn.microsoft.com/en-us/library/system.stringcomparer.aspx)，您可以使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:54:42.587

我个人喜欢这个家伙的`LambdaComparer`，它对这样的东西非常有用：

[使用 IEqualityComparer 和 Lambda 表达式对您的集合进行 LINQ](http://brendan.enrick.com/post/linq-your-collections-with-iequalitycomparer-and-lambda-expressions.aspx)

示例用法：

```
var comparer = new LambdaComparer<string>(
    (lhs, rhs) => lhs.Equals(rhs, StringComparison.InvariantCultureIgnoreCase));

var seq = new[]{"a","b","c","d","e"};

Debug.Assert(seq.Contains("A", comparer)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-04T16:46:58.120

如果由于某种原因您更喜欢或被迫使用`StringComparison`而不是`StringComparer`，您可以添加一个扩展方法，如下所示：

```
public static bool Contains(this IEnumerable<string> items, string value, StringComparison stringComparison)
{
    StringComparer stringComparer;

    switch (stringComparison)
    {
        case StringComparison.CurrentCulture:
            stringComparer = StringComparer.CurrentCulture;
            break;
        case StringComparison.CurrentCultureIgnoreCase:
            stringComparer = StringComparer.CurrentCultureIgnoreCase;
            break;
        case StringComparison.InvariantCulture:
            stringComparer = StringComparer.InvariantCulture;
            break;
        case StringComparison.InvariantCultureIgnoreCase:
            stringComparer = StringComparer.InvariantCultureIgnoreCase;
            break;
        case StringComparison.Ordinal:
            stringComparer = StringComparer.Ordinal;
            break;
        case StringComparison.OrdinalIgnoreCase:
            stringComparer = StringComparer.OrdinalIgnoreCase;
            break;
        default:
            throw new NotImplementedException();
    }

    return items.Contains(value, stringComparer);
} 
```

关于如何映射这些的更多变化可以在[这个问题](https://stackoverflow.com/questions/32763927/elegant-way-of-converting-between-stringcomparison-and-stringcomparer)中找到。

# css - JavaFX 2.2：设置表格单元格样式并处理行伪类（悬停、选中等）

> ID：14781861
> 
> 赞同：2
> 
> 时间：2013-02-08T21:47:12.277
> 
> 标签：css, hover, tableview, javafx, tablecell

我正在开发一个 JavaFX 应用程序，其中包含一个带有特殊单元格的 TableView，这样当单元格中的数据无效时，单元格就会变成红色。

使用 css 很容易，但我无法涵盖 TableCell 的所有伪类。

```
import javafx.application.Application;
import javafx.beans.property.BooleanProperty;
import javafx.beans.property.IntegerProperty;
import javafx.beans.property.ReadOnlyBooleanWrapper;
import javafx.beans.property.ReadOnlyIntegerWrapper;
import javafx.beans.property.ReadOnlyStringWrapper;
import javafx.beans.property.StringProperty;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.scene.Scene;
import javafx.scene.control.ContentDisplay;
import javafx.scene.control.TableCell;
import javafx.scene.control.TableColumn;
import javafx.scene.control.TableView;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.stage.Stage;
import javafx.util.Callback;

public class Test extends Application {

    public static void main( String[] args ) throws Exception {
        Application.launch( "Sportz Club" );
    }

    @Override
    public void start( Stage stage ) throws Exception {
        TableView<User> table = new TableView<>();
        table.getStylesheets().add(
            this.getClass().getResource( "test.css" ).toExternalForm() );

        final TableColumn<User, String> nameColumn =
        this.<String>unstyledColumn( "name" );
        nameColumn.setText( "Name" );
        table.getColumns().add( nameColumn );

        final TableColumn<User, Integer> numColumn =
        this.<Integer>unstyledColumn( "number" );
        numColumn.setMinWidth(200);
        numColumn.setText( "Number" );
        table.getColumns().add( numColumn );

        final TableColumn<User, Boolean> allowedColumn =
        this.unstyledColumn( "allowed" );
        allowedColumn .setText( "Allowed" );
        allowedColumn .setMinWidth(200);
        allowedColumn .setCellFactory( allowedCellFactory() );
        table.getColumns().add( allowedColumn );

        ObservableList<User> items = FXCollections.observableArrayList();
        items.add( new User( "guy #1", 1, true ) );
        items.add( new User( "guy #2", 2, true ) );
        items.add( new User( "Steve", 3, false ) );
        table.setItems( items );

        stage.setScene( new Scene( table, 500, 500 ) );
        stage.centerOnScreen();
        stage.show();
    }

    private Callback<TableColumn<User, Boolean>, TableCell<User, Boolean>> allowedCellFactory() {
        final Callback<TableColumn<User, Boolean>, TableCell<User, Boolean>> callback =
            new Callback<TableColumn<User, Boolean>, TableCell<User, Boolean>>() {
                @Override
                public TableCell<User, Boolean> call(
                    TableColumn<User, Boolean> arg0 ) {
                    return new TableCell<User, Boolean>() {
                        @Override
                        protected void updateItem( Boolean item, boolean empty ) {
                            super.updateItem( item, empty );
                            if ( item == null || empty ) {
                                return;
                            }
                            if ( item ) {
                                getStyleClass().remove( "invalidCell" );
                            }
                            else {
                                getStyleClass().add( "invalidCell" );
                            }
                            setContentDisplay( ContentDisplay.TEXT_ONLY );
                            setText( item.toString() );
                        };
                    };
                }
            };
        return callback;
    }

    private <S> TableColumn<User, S> unstyledColumn( String name ) {
        TableColumn<User, S> column = new TableColumn<>();
        column.setCellValueFactory( new PropertyValueFactory<User, S>( name ) );
        return column;
    }

    public static class User {

        StringProperty name;
        IntegerProperty number;
        BooleanProperty allowed;

        public User( String name, int number, boolean allowed ) {
            this.name = new ReadOnlyStringWrapper( name );
            this.number = new ReadOnlyIntegerWrapper( number );
            this.allowed = new ReadOnlyBooleanWrapper( allowed );
        }

        public StringProperty nameProperty() {
            return name;
        }

        public IntegerProperty numberProperty() {
            return number;
        }

        public BooleanProperty allowedProperty() {
            return allowed;
        }

    }
} 
```

这是完整的代码^ 但有趣的是**allowedCellFactory**方法，只要单元格中的值为false，它就会添加“invalidCell”样式类。

这是css：（test.css，与上面的代码放在同一个包中）

```
.invalidCell {
    -fx-background-color: #FFBBBB;
    -fx-text-fill: black !important;
}

.invalidCell:odd {
    -fx-background-color: #FFAAAA;
}

.invalidCell:hover {
    -fx-background-color: #CCAACC;
}

.invalidCell:filled:selected:focused, .invalidCell:filled:selected, .invalidCell:selected  {
-fx-background-insets: 0, 1.4;
-fx-background-color: linear-gradient(from 0% 0% to 0% 100%, #FF6666 0%, #FF2222 100%);
}

.table-view:focused .invalidCell:filled:focused:selected:hover {
    -fx-background: -fx-accent;
    -fx-background-color: yellow;
    -fx-background-insets: 0, 1, 2;
    -fx-text-fill: -fx-selection-bar-text;
} 
```

**运行应用程序时可以看到的问题是，当行**的其余部分悬停时，“允许”列不会改变样式。当您将鼠标悬停在允许的列本身上时，它会更改颜色以匹配 :hover 伪类。

我希望它做的是当行悬停时允许的列与所有其他列一起更改。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T09:08:41.453

从 CSS 文件中删除以下样式代码

```
.invalidCell:hover {
   -fx-background-color: #CCAACC;
} 
```

# php - 有什么方法可以使用 PDO 获取存储过程的参数及其顺序？

> ID：14781865
> 
> 赞同：1
> 
> 时间：2013-02-08T21:47:48.093
> 
> 标签：php, stored-procedures, pdo

即使命名参数，使用“bindParam”也需要我知道调用存储过程时应该输入的顺序参数。

有没有办法：

*   调用存储过程并在编译语句期间，不必知道参数的顺序

*   或者从语句或 PDO 对象中获取存储过程所需参数的名称和顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:39:10.313

为什么不按名称绑定参数？

```
$stmt = $pdo->prepare("SELECT * FROM mytable WHERE n = :num AND z = :zone");

$stmt->execute(array( "zone" => $zone, "num" => $num )); 
```

顺便说一句，我更喜欢简单地通过将数组传递给execute()来传递参数。没有必要使用 bindParam()，这样做也没有任何好处。有参数类型说明符，但如果您阅读 PDO 代码，这些说明符将被忽略，至少在 PDO_MySQL 驱动程序中是这样。

* * *

回复您的评论：好的，现在我明白您的问题了。

不，没有办法查询 MySQL 存储过程来了解它需要什么参数，或者你将如何在过程中使用它们。您必须至少了解自己的代码。

# macros - 如何处理来自 Clojurescript 宏的所需 Clojurescript 代码？

> ID：14781868
> 
> 赞同：11
> 
> 时间：2013-02-08T21:47:54.583
> 
> 标签：macros, clojure, clojurescript

假设我有一个 X.clojurescript 和一个 X.clojure 命名空间。X.clojurescript 中的所有内容都是 Clojurescript 代码，X.clojure 中的所有内容都是 Clojure 代码。不幸的是，我不能直接在 Clojurescript 中定义宏，我必须在 Clojure 中定义它们，然后使用

```
(ns X.clojurescript.abc
  (:require-macros [X.clojure.def :as clj])) 
```

这可以。但是，如果宏（在 X.clojure 中定义）需要引用在 Clojurescript 命名空间（X.clojurescript）中定义的东西怎么办？问题是 Clojure 编译器在解析其他命名空间时不会查看我的 Clojurescript 命名空间（一个单独的目录）。

我通过简单地在我的 Clojure 代码中创建一个名称空间来解决这个问题，该名称空间与 Clojurescript 中存在的名称空间和所需定义相同，但这似乎有点愚蠢。因此，例如，如果我在宏中需要 X.clojurescript.abc.y，我将在 Clojure 端创建一个额外的命名空间，在我的 Clojure 版本的 X.clojurescript.abc 中定义一个虚拟 y；有点笨。

如何处理需要在 Clojurescript 端引用某些内容的宏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-13T13:56:05.097

宏在定义时唯一需要特定命名空间的情况是，如果宏使用来自所述命名空间的代码来生成它将返回的符号列表。

您可以在 repl 中遵循这些示例：

```
(defmacro foo
  [a]
  `(bar/bar ~a)) 
```

即使 bar 不是定义的命名空间， foo 的定义也会编译

```
(foo :a) 
```

现在调用 foo 将失败，因为您尚未定义 bar 命名空间或函数 bar

```
(ns bar)
(defn bar
  [x]
  [x x]) 
```

在 bar 命名空间中定义 bar

```
(ns user)
(foo :a) 
```

=> [:a :a]

请注意，在 foo 定义时 bar 不需要存在。事实上，命名空间在 foo 定义时甚至不需要存在。

# string - When trying to add a space back into a tokenized String, why are two spaces added into my output?

> ID：14781871
> 
> 赞同：0
> 
> 时间：2013-02-08T21:48:12.117
> 
> 标签：string, tokenize, stringbuilder

Beginner here. Sorry for the vague title but the code should put my question into perspective.

```
public static void main(String [] args)
{
    String sentence = "hi. how are you! i'm just dandy.";
    String tokenSent;

    tokenSent = sentenceCapitalizer(sentence);

    System.out.println(tokenSent);
}

public static String sentenceCapitalizer(String theSentence)
{
    StringTokenizer strTokenizer = new StringTokenizer(theSentence, ".!", true);

    String token = null;
    String totalToken = "";
    String ch = "";

    while(strTokenizer.hasMoreTokens())
    {
        token = strTokenizer.nextToken().trim();

        token = token.replace(token.charAt(0), Character.toUpperCase(token.charAt(0)));

        StringBuilder str = new StringBuilder(token);
        str.append(" ");

        totalToken += str;

    }

    return totalToken; 
} 
```

OUTPUT AS IS: Hi . How are you ! I'm just dandy .

I was able to capitalize the first letter of each sentence but I'm wanting the output to keep the same format as the original String. The problem is that it puts a space before and after the ending punctuation. Is there any way to fix this problem using only a StringBuilder and/or StringTokenizer? Thank you for your time.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:01:03.567

When you declare `new StringTokenizer(theSentence, ".!", true)` ,`true` enables to return delimiter characters also as next token. Since you appending a space to each token, it is normal to get that output.

You can check if the token is a delimiter character, if so, you add the space.

```
if(token.length() == 1 &&
   delims.indexOf(token.charAt(0)) != -1)
 str.append(" "); //we just hit the delim char, add space 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T22:07:24.197

You can do this.

```
String delim = ".!";
StringTokenizer strTokenizer = new StringTokenizer(theSentence, delim, true); 
```

Then,

```
if(delim.contains(token))
    str.append(" "); 
```

# .net - 打开和关闭多个驱动器

> ID：14781874
> 
> 赞同：3
> 
> 时间：2013-02-08T21:48:25.190
> 
> 标签：.net, vb.net, mci

我正在开发一个 DVD 刻录机器人。作为该过程的一部分，我需要打开和关闭 DVD 托盘，以便机器人在刻录后拾取磁盘。然而，我遇到了一个问题。我只能在一台 DVD 刻录机上控制弹出！由于我有两个，这是一个问题。我一直在看这个小时，无法弄清楚出了什么问题。它可以很好地控制 1 张 dvd，但是当我在另一个类上将它实例化时它不起作用。这是下面的课程。我知道我可能错过了一些简单的东西，但对于我的生活，我无法弄清楚。

```
Public Class openCloseDrive
'Api call to send the commands to the mci device
Private Declare Function mciSendString Lib "winmm.dll" Alias _
    "mciSendStringA" (ByVal lpstrCommand As String, ByVal _
        lpstrReturnString As String, ByVal uReturnLength As Integer, _
            ByVal hwndCallback As Integer) As Integer
'
'Api call to check for mci success or error
Private Declare Function mciGetErrorString Lib "winmm.dll" Alias _
    "mciGetErrorStringA" (ByVal dwError As Integer, ByVal lpstrBuffer _
        As String, ByVal uLength As Integer) As Integer

'will hold the mci return value
Dim retVal As Integer = Nothing

'This will contain the drive letter of the specified cd drive.
Dim _cdDrive As String = Nothing

Public Sub New(_driveLetter As String)
    _cdDrive = Chr(34) & _driveLetter & Chr(34)
End Sub

Public Function Open() As Integer
    'This will open the DVD Tray
    Dim retVal As Integer
    'This will Open the CD Drive Tray.
    mciSendString("open " & _cdDrive & " type cdaudio alias cd wait shareable", 0, 0, 0)
    retVal = mciSendString("set cd door open", 0, 0, 0)

    Return retVal
End Function

Public Function Close() As Integer
    'this Will close the DVD tray
    Dim retVal As Integer

    'This will Close the CD Drives Tray door.
    mciSendString("open " & _cdDrive & " type cdaudio alias cd wait shareable", 0, 0, 0)
    retVal = mciSendString("set cd door closed", 0, 0, 0)

    Return retVal
End Function

Public ReadOnly Property devices_InternalMCIStatus() As String
    '
    'Check the mci device to see if a error occured, and/or give 
    'some type of description even if everything was executed ok.
    '
    'Use this property if you want to, after each command you carried 
    'out to check and see if the command was successfully executed or 
    'not. It will tell you the status whether it was successful or not.
    '
    Get
        '
        'Make the length of this buffer 255 spaces since the returned
        'value could get pretty long, depending on what is going on.
        Dim buf As String = Space(255)

        mciGetErrorString(retVal, buf, 255)

        Return buf

        buf = Nothing

    End Get

End Property 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:41:04.670

我想我找到了解决办法。它是一个名为 cdrecord.exe 的命令行程序。通过向它发送命令行选项，打开和关闭托盘似乎没有问题！

# f# - 在延续传递风格和记忆之间进行选择

> ID：14781875
> 
> 赞同：16
> 
> 时间：2013-02-08T21:48:45.517
> 
> 标签：f#, functional-programming, ocaml, memoization, continuations

在用函数式语言编写记忆和延续传递风格 (CPS) 函数的示例时，我最终使用了 Fibonacci 示例。然而，斐波那契并没有真正从 CPS 中受益，因为循环仍然必须经常以指数方式运行，而使用记忆化，它第一次只有 O(n)，以后每次只有 O(1)。

将 CPS 和 memoization 结合起来对 Fibonacci 有一点好处，但是有没有例子说明 CPS 是防止你用完堆栈*并*提高性能的最佳方法，以及 memoization 不是解决方案的地方？

或者：是否有关于何时选择其中一个或两者兼而有之的指导方针？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-09T12:34:54.533

### 在 CPS 上

虽然 CPS 作为编译器中的中间语言很有用，但在源语言级别上，它主要是一种设备，用于 (1) 编码复杂的控制流（与性能无关）和 (2) 转换非尾调用消耗堆栈空间进入一个持续分配尾调用消耗堆空间。例如，当您编写（未经测试的代码）时

```
let rec fib = function
  | 0 | 1 -> 1
  | n -> fib (n-1) + fib (n-2)

let rec fib_cps n k = match n with
  | 0 | 1 -> k 1
  | n -> fib_cps (n-1) (fun a -> fib_cps (n-2) (fun b -> k (a+b))) 
```

先前`fib (n-2)`分配了新堆栈帧的非尾调用变成了尾调用`fib (n-2) (fun b -> k (a+b))`，尾调用分配闭包`fun b -> k (a+b)`（在堆上）以将其作为参数传递。

这不会*渐近*地减少程序的内存使用量（可能会进行一些进一步的特定于域的优化，但那是另一回事了）。您只是在用堆栈空间交换堆空间，这在堆栈空间受到操作系统严重限制的系统上很有趣（对于 ML 的某些实现（例如 SML/NJ）不是这种情况，它们在堆上跟踪它们的调用堆栈而不是使用系统堆栈），并且由于额外的 GC 成本和潜在的局部性降低而可能降低性能。

CPS 转换不太可能大大提高性能（尽管您的实现和运行时系统的细节可能会如此），并且是一种普遍适用的转换，可以避免具有深度调用堆栈的递归函数的“堆栈溢出”。

### 关于记忆

记忆对于引入递归函数的子调用共享很有用。递归函数通常通过将其分解为几个严格简单的“子问题”（递归子调用）来解决“问题”（“计算斐波那契`n`”等），其中一些基本情况可以立即解决问题。

对于任何递归函数（或问题的递归公式），您都可以观察到子问题空间的*结构*。哪些更简单的实例`Fib(k)`需要`Fib(n)`返回结果？这些实例又需要哪些更简单的实例？

在一般情况下，这个子问题空间是一个图（出于终止目的通常是非循环的）：有一些节点有几个父节点，它们是几个不同的问题，它们是子问题。例如，`Fib(n-2)`是`Fib(n)`和的子问题`Fib(n-2)`。*此图中的节点共享*量取决于特定问题/递归函数。在斐波那契的情况下，所有节点都在两个父节点之间共享，因此共享*很多*。

没有记忆的直接递归调用将无法观察到这种共享。递归函数的调用结构是*树*，而不是图，共享子问题，例如`Fib(n-2)`将被完全访问多次（与图中从起始节点到子问题节点的路径一样多）。记忆化通过让一些子调用直接返回“我们已经计算过这个节点，这是结果”来引入共享。对于有很多共享的问题，这可能会导致（无用）计算的显着减少：当引入 memoization 时，Fibonacci 从指数复杂度变为线性复杂度——请注意，还有其他编写函数的方法，不使用 memoization，而是不同的子调用结构，具有线性复杂度。

```
let rec fib_pair = function
  | 0 -> (1,1)
  | n -> let (u,v) = fib_pair (n-1) in (v,u+v) 
```

使用某种形式的共享（通常通过存储结果的大表）来避免子计算的无用重复的技术在算法界是众所周知的，它被称为[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)。当您认识到一个问题适合这种处理时（您注意到子问题之间的共享），这可以提供很大的性能优势。

### 比较有意义吗？

两者似乎大多是相互独立的。

有很多问题是 memoization 不适用的，因为子问题图结构没有任何共享（它是一棵树）。相反，CPS 转换适用于所有递归函数，但它本身并不会带来性能优势（除了由于您使用的特定实现和运行时系统导致的潜在常量因素，尽管它们很可能使代码*慢*而不是快）。

### 通过检查非尾部上下文来提高性能

有一些与 CPS 相关的优化技术可以提高递归函数的性能。它们包括在递归调用之后查看“留待完成”的计算（这将变成直接 CPS 样式的函数）并为其找到替代的、更有效的表示，这不会导致系统的闭包分配。考虑例如：

```
let rec length = function
  | [] -> 0
  | _::t -> 1 + length t

let rec length_cps li k = match li with
  | [] -> k 0
  | _::t -> length_cps t (fun a -> k (a + 1)) 
```

您可以注意到非递归调用的上下文，即`[_ + 1]`具有一个简单的结构：它添加一个整数。与其将 this 表示为一个函数`fun a -> k (a+1)`，您可以只存储与该函数的多个应用程序相对应的要添加的整数，从而制作`k`一个整数而不是一个函数。

```
let rec length_acc li k = match li with
  | [] -> k + 0
  | _::t -> length_acc t (k + 1) 
```

该函数在恒定的而非线性的空间中运行。通过将尾部上下文的表示从函数转换为整数，我们消除了使内存使用线性化的分配步骤。

仔细检查执行添加的顺序会发现它们现在以不同的方向执行：我们首先添加对应于列表开头的 1，而`cps`版本最后添加它们。这种顺序反转是有效的，因为`_ + 1`它是一个关联操作（如果您有多个嵌套上下文，`foo + 1 + 1 + 1`则从内部开始计算它们是有效的，`((foo+1)+1)+1`或者从外部开始计算它们`foo+(1+(1+1))`）。上述优化可用于围绕非尾调用的所有此类“关联”上下文。

基于相同的想法当然还有其他可用的优化（我不是此类优化的专家），即查看所涉及的延续的结构并以比在堆上分配的函数更有效的形式表示它们。

这与“去功能化”的转换有关，它将延续的表示从函数更改为数据结构，而不改变内存消耗（当在原始程序中分配闭包时，去功能化程序将分配数据节点），但允许用一阶语言（没有一等函数）表达尾递归 CPS 版本，并且在数据结构和模式匹配比闭包分配和间接调用更有效的系统上更有效。

```
type length_cont =
  | Linit
  | Lcons of length_cont

let rec length_cps_defun li k = match li with
  | [] -> length_cont_eval 0 k
  | _::t -> length_cps_defun t (Lcons k)
and length_cont_eval acc = function
  | Linit -> acc
  | Lcons k -> length_cont_eval (acc+1) k

let length li = length_cps_defun li Linit

type fib_cont =
  | Finit
  | Fminus1 of int * fib_cont
  | Fminus2 of fib_cont * int

let rec fib_cps_defun n k = match n with
  | 0 | 1 -> fib_cont_eval 1 k
  | n -> fib_cps_defun (n-1) (Fminus1 (n, k))
and fib_cont_eval acc = function
  | Finit -> acc
  | Fminus1 (n, k) -> fib_cps_defun (n-2) (Fminus2 (k, acc))
  | Fminus2 (k, acc') -> fib_cont_eval (acc+acc') k

let fib n = fib_cps_defun n Finit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T21:54:29.153

CPS 的一个好处是错误处理。如果你需要失败，你只需调用你的失败方法。

我认为最大的情况是当你不谈论计算时，记忆化非常好。如果您谈论的是 IO 或其他操作，那么 CPS 的好处是存在的，但记忆化不起作用。

至于 CPS 和 memoization 都适用并且 CPS 更好的实例，我不确定，因为我认为它们是不同的功能。

最后，CPS 在 F# 中有所减少，因为尾递归已经使整个堆栈溢出问题不再存在。

# widget - Pinterest 小部件：在页面上添加任何图像将其固定选项

> ID：14781879
> 
> 赞同：0
> 
> 时间：2013-02-08T21:49:13.927
> 
> 标签：widget, pinterest

我在这里使用 Pin It 小部件的代码生成器：http: [//business.pinterest.com/widget-builder/#](http://business.pinterest.com/widget-builder/#)

并选择了“在页面上添加任何图像”选项。但是，当我尝试使用按钮固定时，小部件会显示一个空白矩形。页面上有超过 6 张图片，均带有直接 URL（包括 http://）。当我阅读[此处的文档时](https://help.pinterest.com/entries/21101982-Adding-the-Pin-It-Button-to-your-website#pincontentguidelines)，它说必须选择图像才能使其工作，但是当您选择“在页面上添加任何图像”选项时，它不会要求您指定图像。

我怎样才能使这项工作，以便用户可以在页面上固定任何图像？其他人有这个问题吗？我希望这个选项的功能类似于 Pin It 书签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:06:46.223

确保脚本标签位于结束正文标签之前，如果您在头部标签中包含脚本，您将不会获得图像列表。

这在您生成代码的页面（[http://business.pinterest.com/widget-builder/#do_pin_it_button](http://business.pinterest.com/widget-builder/#do_pin_it_button)）上注明，但很容易错过！

# drupal-7 - 在 webform 组件中添加更多功能

> ID：14781881
> 
> 赞同：0
> 
> 时间：2013-02-08T21:49:19.203
> 
> 标签：drupal-7, drupal-webform

我必须在 webform 字段集中添加更多按钮。添加更多可以多次完成。什么是最好的方法。

我尝试使用 webform_addmore 模块。但它不能解决我的问题，因为在这个模块中我必须预先创建字段集。所以它不能是无限的。

欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:46:40.330

我希望你可以做drupal节点主题。以下是您可以遵循的步骤。

1.  查找 drupal webform 节点 ID
2.  编辑节点，例如 node--node_id.tpl.php
3.  所有变量都在 $node 中，您可以通过打印编辑看到。您可以从此自定义您的网络。

# c# - 将当前类/对象的类型传递给 C# 程序中没有显式类型引用的泛型方法？

> ID：14781882
> 
> 赞同：4
> 
> 时间：2013-02-08T21:49:28.203
> 
> 标签：c#, generics, types

在调用泛型方法时，我可以使用当前类/对象的类型，而不是显式传递当前类/对象的名称吗？

例如，给定下面的示例代码：

```
public class SomeClass
{
    public SomeClass()
    {
        // Call some generic method that returns a string.
        string s = GenMeth<SomeClass>)();
    }
} // public class SomeClass 
```

有没有办法告诉 C# 我想将当前类 (SomeClass) 的类传递给 GenMeth() 而不必明确地说*SomeClass*？

说明该概念的假设和虚假示例：

```
string s = GenMeth<GetType(this)>(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:53:43.093

如果您让您的方法使用该类型的实例，它可以推断它。例如，如果您的方法如下所示：

```
void GenMeth<T>(T instance) {} 
```

然后你可以像这样调用它：

```
GenMeth(this); 
```

您是否可以接受这可能是另一回事。（如果您从未使用过参数会有点奇怪）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T21:52:19.473

不，没有这样的语法。

理论上，您可以通过反射调用该方法，从而允许您使用`this.GetType()`，但这会使事情变得更糟。只是……不要那样做。如果您复制/粘贴代码，记住将泛型参数更改为当前类型会容易*得多。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T21:56:08.947

您可以创建一个扩展方法来执行您对任何对象的任何操作。您可以使用扩展方法检查合法的类型`GetType()`。

```
public static class ObjectExtensions {

  public static string GenMeth(this object obj) {
    // do stuff here and return string type
  }
} 
```

# windows - 如何向我的 C# 应用程序添加安全登录？

> ID：14781892
> 
> 赞同：0
> 
> 时间：2013-02-08T21:50:03.150
> 
> 标签：windows, authentication, login, ldap, credentials

我有一个 C# 桌面应用程序，用户在其中输入他的公司 ID 卡号作为针对有效员工数据库表的“身份验证”的简单形式。如果在表中找到具有正确权限级别的用户，则应用程序运行并且用户可以使用应用程序中的所有屏幕和菜单。问题是任何拥有有效用户 ID 号（可能来自丢失或被盗的 ID 卡）的人都可以运行该程序并获取数据。

我们想让这个应用程序更安全。有没有办法使用 Windows ID 和密码来验证应用程序用户？至少我们希望强制应用用户重新输入计算机上当前登录的 Windows 用户的凭据（ID 和密码）。如果验证失败，则应用程序将退出并且不会运行。

将这个“功能”添加到我的应用程序有哪些选择？最简单的方法是什么？LDAP 绑定？将输入的 Windows ID 与在 LDAP 中找到的用户 ID 进行比较？最安全的方法是什么？我很擅长让我的应用程序与数据库对话，但我从来没有在 Windows 安全或身份验证方面做过很多事情，所以你必须在我的水平上说话。我们希望避免将 Windows 用户 ID 存储在数据库中。该应用程序是一个 VS 2008 项目，但有一天我需要在我的 VS 2010 项目中做同样的事情。谢谢！

# python - 运行 python 多进程进行图像处理

> ID：14781895
> 
> 赞同：0
> 
> 时间：2013-02-08T21:50:07.793
> 
> 标签：python, multiprocessing

我有一个 python 函数，它接受图像路径并根据图像是否为黑色输出真或假。我想在同一台机器上处理多个图像，如果其中一个不是黑色的，则停止该过程。我在这里阅读了很多关于 python、celery 等的多处理，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:59:46.547

我建议查看[Pools](http://docs.python.org/2/library/multiprocessing.html)以轻松地动态创建进程。如果您需要一些共享状态，在这种情况下，已找到指示非黑色图像的布尔值，请查看[Managers](http://docs.python.org/2/library/multiprocessing.html#multiprocessing-managers)。

更新：这是我的意思的一个例子。

```
import multiprocessing.Manager as Manager
import multiprocessing.Pool as Pool

m = Manager()
p = Pool(processes=5)

state_info = m.dict()
state_info['image_found'] = False

def processImage(img):

    # ... Process Image ...

    if imageIsBlack(img):
        state_info['image_found'] = True
        p.terminate()

 p.apply(processImage, imageList)

 if state_info['image_found']:
     print 'There was a black image!!'
 else:
     print 'No black images were found.' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T16:24:42.060

最后，这对我很有效。[从此处](https://stackoverflow.com/questions/6286235/multiple-threads-in-python/6286343#6286343)的示例中复制它。出于说明目的，我已将我的 _isImgNonBlack 函数和图像序列替换为 0 和 1 的列表，其中 0 是黑色图像，1 个非黑色图像。

```
import multiprocessing

def isImgNonBlack(result_queue, imgSeq):
    for img in imgSeq:
        # If a non-black is found put a result
        if img==1:
            result_queue.put(1)

    # else put a zero as the result
    result_queue.put(0)

if __name__ == '__main__':
    processs = []
    result_queue = multiprocessing.Queue()
    nbProc = 20

    # making a fake list of images with 
    # 10,000 0's follwed by a single 1
    images = [0 for n in range(10000)]
    images.append(1)

    for n in range(nbProc): # start processes crawling for the result
        process = multiprocessing.Process(target=isImgNonBlack, args=[result_queue, images])
        process.start()
        processs.append(process)
        print 'Starting Process : %s' % process

    result = result_queue.get() # waits until any of the proccess have `.put()` a result

    for process in processs: # then kill them all off
        process.terminate()

    # finally print the result
    print "Seq have a non black img: %s" % result 
```

# php - jQuery / PHP Like / Like 按钮

> ID：14781900
> 
> 赞同：2
> 
> 时间：2013-02-08T21:50:32.113
> 
> 标签：php, jquery, codeigniter

我正在尝试创建一个简单的喜欢/不喜欢按钮来更新数据库。jQuery 代码位于外部文件中。PHP 变量是从 Codeigniter 中的控制器发送的。

当页面重新加载时，它会正确显示当前登录的用户是否能够喜欢或不喜欢他们正在查看的用户。如果他们单击一次，一切正常 - 按钮在喜欢/不喜欢之间变化，喜欢的数量增加或减少，并且数据库被更新。第二次单击时，它会重新加载整个页面但不更新数据库 - 我如何停止刷新 + 使其在不重新加载页面的情况下更新？

PHP：

```
<div id="like_button">

<p><a href=""><span id="like_unlike" class="link"><?php if($already_liked){echo "Unlike";}else{echo"Like";}?></span></a> (<span id="number_of_likes"><?php echo $number_of_likes; ?></span>)</p>

<span id="liked_unliked_user_id" style="display:none"><?php echo $liked_unliked_user_id; ?></span>
<span id="liking_unliking_user_id" style="display:none"><?php echo $liking_unliking_user_id; ?></span>

</div> 
```

jQuery：

```
$( function() {

$( '#like_button a' ).click( function( e ) {

  var thisrecord = $( this ).closest( "div" );

  var liking_unliking_user_id = parseInt( thisrecord.find( "span#liking_unliking_user_id" ).html() );
  var liked_unliked_user_id = parseInt( thisrecord.find( "span#liked_unliked_user_id" ).html() );
  var like_unlike = thisrecord.find( "#like_unlike" ).html();

  if (like_unlike == 'Like') 
  {
    $( this ).replaceWith( '<a href=""><span id="like_unlike" class="link">Unlike</span></a>' );
    var likes = parseInt( thisrecord.find( "span#number_of_likes" ).html() ) + 1;
    thisrecord.find( "span#number_of_likes" ).html( likes );
    $.post( base_url+"/controller/function/" + liked_unliked_user_id + "/" + liking_unliking_user_id );
  }
  else
  {
    $( this ).replaceWith( '<a href=""><span id="like_unlike" class="link">Like</span></a>' );
    var likes = parseInt( thisrecord.find( "span#number_of_likes" ).html() ) - 1;
    thisrecord.find( "span#number_of_likes" ).html( likes );
    $.post( base_url+"/controller/function/" + liked_unliked_user_id + "/" + liking_unliking_user_id );
  }

  e.preventDefault();
});
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T22:09:28.893

当您第一次创建`.click()`事件时，jQuery 选择器会找到所有`'#like_button a'`元素并将此事件附加到它们。当您`#like_button a`使用`$(this).replaceWith(...)`此新元素替换元素时**，不会**附加事件`.click()`，因为您的原始选择器仅运行一次以附加事件（当时该元素不存在）。

在您的代码中，页面重新加载是因为您单击了一个简单地链接回当前页面的链接——您的`.click()`函数使用`e.preventDefault()`.

如果您命名函数，然后`.click()`在替换对象后重新附加事件，这应该可以正常工作：

```
$( function() {
    function toggleLike(e)
    {
        var thisrecord = $( this ).closest( "div" );

        var liking_unliking_user_id = parseInt( thisrecord.find( "span#liking_unliking_user_id" ).html() );
        var liked_unliked_user_id = parseInt( thisrecord.find( "span#liked_unliked_user_id" ).html() );
        var like_unlike = thisrecord.find( "#like_unlike" ).html();

        if (like_unlike == 'Like') 
        {
            $( this ).replaceWith( '<a href=""><span id="like_unlike" class="link">Unlike</span></a>' );
            var likes = parseInt( thisrecord.find( "span#number_of_likes" ).html() ) + 1;
            thisrecord.find( "span#number_of_likes" ).html( likes );
            $( '#like_button a' ).click(toggleLike); // **frakenstein teh .click() event
            $.post( base_url+"/controller/function/" + liked_unliked_user_id + "/" + liking_unliking_user_id );
        } else {
            $( this ).replaceWith( '<a href=""><span id="like_unlike" class="link">Like</span></a>' );
            var likes = parseInt( thisrecord.find( "span#number_of_likes" ).html() ) - 1;
            thisrecord.find( "span#number_of_likes" ).html( likes );
            $( '#like_button a' ).click(toggleLike); // **frakenstein teh .click() event
            $.post( base_url+"/controller/function/" + liked_unliked_user_id + "/" + liking_unliking_user_id );
        }

        e.preventDefault();
    }

    $( '#like_button a' ).click(toggleLike);
}); 
```

# c++ - 为从其模板成员函数调用中已知的类型创建新容器的类

> ID：14781901
> 
> 赞同：2
> 
> 时间：2013-02-08T21:50:46.127
> 
> 标签：c++, templates, types, containers, factory

这个问题可能很难理解，但问题很简单，我将在这里用简单的语言来描述它。现在，我的资源管理是：

```
 cResMgr<cTexture> textures;
    cResMgr<cSound> sounds; 
```

我想做的是：

```
 cResMgr resources;
    resources.add<cTexture>(...);
    resources.get<cSound>(...); 
```

基本上，我的资源管理器具有“获取”和“添加”功能。我希望当我第一次调用 cWhatever 类型的函数时，它会为它创建一个容器。下次调用时，它就在那里（类似于函数中的静态变量）

问题是，我该如何实现它？我能想到的唯一解决方案是让每个资源都派生自空基类 cResource，这样我就可以拥有一个指向 cResource 的指针容器。问题是，资源类型不是我的（它们来自外部库）

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:02:17.560

我真的不知道你为什么不只是为每种资源类型使用不同的资源管理器。

此外，如果集合可以是全局静态的，为什么需要资源管理器的*实例？*

无论如何，这应该做你所描述的：

```
#include <string>
#include <map>

typedef double cTexture;
typedef std::string cSound;

struct cResMgr
{
    template <typename T>
        void add(std::string const& id, T const& v) const
        {
            mapFor<T>()[id] = v;
        }

    template <typename T>
        T& get(std::string const& id) const
        {
            return mapFor<T>().at(id);
        }

    private:
    template <typename T>
    static std::map<std::string, T> mapFor()
    {
        static std::map<std::string, T> _theMap;
        return _theMap;
    }
};

int main()
{
    cResMgr resources;
    resources.add<cTexture>("wall", cTexture {});
    resources.get<cSound>("sad_trombone");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T22:03:02.637

你在正确的轨道上使用了一个用于类型擦除目的的基类，并让你的资源管理器持有指向它的资源的指针。就像您暗示的那样，让资源系统的用户从基类中获取资源是不合理的负担。

所以，你需要做的是创建一个类来包装资源......

```
class ResourceBase
{
    /*...*/
};

template<typename T>
class Resource : public ResourceBase
{
    /* contains a T. T is the user's resource */
}; 
```

然后，您的资源管理器可以包含 ResourceBase 指针列表。当用户说`resources.get<cSound>("sound7");`您可以查找`ResourceBase`指针（如果有）时，将其向下转换为 a`Resource<cSound>`并返回`cSound`包含的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T22:05:38.123

您可以使用地图。当然，这是在运行时解决的，这有点违背模板在编译时尽可能多地解决的目标。此外，容器会有点棘手，因为容器没有一些抽象基类。我会为此使用 Boost.Any。然后看起来像这样：

```
template<res_type>
container<res_type>& get()
{
     map<type_info, boost::any>::iterator it = map.find(typeid(res_type));
     if(it == map.end())
         map[typeid(res_type)] = container<res_type>();
     boost::any& c = map[typeid(res_type)];
     return boost::any_cast<container<res_type> >(c);
} 
```

我没有编译这个，但我希望它能够理解这一点。最后，一个问题：你真的有这么多不同的类型，所有这些都值得麻烦还是好奇。

# objective-c - CoreData 可以返回唯一的实体属性吗？

> ID：14781905
> 
> 赞同：1
> 
> 时间：2013-02-08T21:51:44.267
> 
> 标签：objective-c, core-data, nsfetchrequest, predicates

假设我有一个具有名为 animalType 的属性的实体。在核心数据中，我有 10,000 个这样的实体，并且有未知数量的不同动物类型，例如。狗、猫、鸟等。我可以告诉核心数据获取每种动物类型并返回类似于以下内容的数组：

```
@[Dog, Cat, Bird, Fish, ...] 
```

我不想获取一个实体数组，我只想要一个唯一的`animalTypes`. 不`animalType`应该重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:18:24.083

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Animal"];
request.returnsDistinctResults = YES;
request.resultType = NSDictionaryResultType;
request.propertiesToFetch = @[@"animalType"];

NSArray *fetchedObjects = [self.managedObjectContext 
                         executeFetchRequest:request error:nil];

NSArray *result = [fetchedObjects valueForKeyPath:@"animalType"];

// @[@"Dog", @"Cat", @"Fish" ...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:10:03.793

是的，你会想要`NSFetchRequest`'s`setReturnsDistinctResults:`方法，结合`setPropertiesToFetch:`and `setResultType: NSDictionaryResultType`。基本上， fetch 将返回一个字典数组，而这些字典又将包含与您获取的特定属性相对应的键值对——在您的情况下，每个字典都有一个键 ,`animalType`和该键的不同值。将其转换为您描述的数组将很简单。

# php - 插入单选按钮的值

> ID：14781907
> 
> 赞同：1
> 
> 时间：2013-02-08T21:52:01.240
> 
> 标签：php, html, mysql, radio-button

当单选按钮签入mysql db表时，我试图插入它的值。下面是执行此操作的 HTML 和 PHP。请让我知道出了什么问题？

> 这是 HTML 首先：

```
<div class='container'>
    <label for='username' >Business*:</label><br/>
    <input type="radio" name="bus" id="username" value="bus" maxlength="50" /><br/>
    <span id='register_username_errorloc' class='error'></span>
</div>
<div class='container'>
    <label for='username' >Personal*:</label><br/>
    <input type="radio" name="pers" id="username" value="per" maxlength="50" /><br/>
    <span id='register_username_errorloc' class='error'></span>
</div> 
```

> 现在的PHP：

```
function InsertIntoDB(&$formvars)
    {

        $confirmcode = $this->MakeConfirmationMd5($formvars['email']);

        $formvars['confirmcode'] = $confirmcode;

        $insert_query = 'insert into '.$this->tablename.'(
                name,
                email,
                username,
                password,
                confirmcode,
                dob,
                business,
                personal
                )
                values
                (
                "' . $this->SanitizeForSQL($formvars['name']) . '",
                "' . $this->SanitizeForSQL($formvars['email']) . '",
                "' . $this->SanitizeForSQL($formvars['username']) . '",
                "' . md5($formvars['password']) . '",
                "' . $confirmcode . '",
                "' . $this->SanitizeForSQL($formvars['dob']) . '",
                "' . $this->SanitizeForSQL($formvars['bus']) . '",
                "' . $this->SanitizeForSQL($formvars['pers']) . '"
                )';      
        if(!mysql_query( $insert_query ,$this->connection))
        {
            $this->HandleDBError("Error inserting data to the table\nquery:$insert_query");
            return false;
        }        
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T12:44:59.163

我认为有一个逻辑错误。您应该只将其中一个变量保存在数据库的单选按钮中。

> ```
>  "' . $this->SanitizeForSQL($formvars['bus']) . '",
>            "' . $this->SanitizeForSQL($formvars['pers']) . '" 
> ```

# jquery - ValidationMessageFor 不呈现错误信息

> ID：14781908
> 
> 赞同：4
> 
> 时间：2013-02-08T21:52:08.630
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4, jquery-validate, unobtrusive-validation

我有一个部分观点：

```
 @Html.EditorFor(model => model.BM)
 @Html.ValidationMessageFor(model => model.BM) 
```

在主视图中，如果我这样做：

```
@using (Html.BeginForm())
{
   @Html.Partial("QuoteStep1", Model)
} 
```

然后调用 $('form').validate() 验证表单，如果我不填写数据，则会显示错误消息。

但是，如果我改为使用 AJAX 调用加载部分视图，则调用 $('form').validate() 仍然有效（它正确返回 true 或 false）但不再显示错误消息！

我在某处读到我应该将以下内容添加到部分视图的顶部：

```
@if (this.ViewContext.FormContext == null) 
{
   this.ViewContext.FormContext = new FormContext(); 
 } 
```

但它根本没有任何影响。

**[编辑：我的研究更新]**

经过2个多小时的调试，我发现了一些东西。首先，因为我使用 AJAX 请求加载表单的内容，所以新添加的 HTML 控件不是 DOM 的一部分。因此，jquery 验证器无法知道这些控件。

因此，在 AJAX 成功回调中添加以下代码行应该可以解决问题：

```
$.validator.unobtrusive.parse($('form')); 
```

这是在将 AJAX 结果添加到 DOM 之后立即设置的。

当我进一步调试验证器时，我可以看到该代码被调用：

```
 $(selector).find(":input[data-val=true]").each(function () {
            $jQval.unobtrusive.parseElement(this, true);
        }); 
```

意思是，它找到了新添加的输入框。

在 $jQval.unobtrusive.parseElement 方法中，以下代码被命中：

```
 this.adapt({
                    element: element,
                    form: form,
                    message: message,
                    params: paramValues,
                    rules: rules,
                    messages: messages
                }); 
```

元素是我的文本框，表单是查看表单，消息是“BM 必须是数字”。所以在我看来一切都很好。

但是你猜怎么着......验证错误消息仍然没有出现！

有任何 jquery 大师可以帮忙吗？:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-01-08T07:22:01.183

我也对这个问题进行了很多研究，我发现它对我有帮助：只需添加 $("#myForm").valid(); 和：

```
<script src='@Url.Content("~/Scripts/jquery.validate.js")' type='text/javascript'></script>
<script src='@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")' type='text/javascript'></script> 
```

# ios - RestKit 崩溃，因为 NSManagedObjectContext 在 RKResponseMapperOperation 中为零

> ID：14781910
> 
> 赞同：7
> 
> 时间：2013-02-08T21:52:10.847
> 
> 标签：ios, ruby-on-rails, core-data, restkit, nsmanagedobjectcontext

我正在处理我的文凭项目，其中包括一个带有 Core Data 数据库的 iOS 客户端和一个 Ruby on Rails 服务器。我正在使用 RestKit 进行它们之间的通信。目前我在让整个系统正常工作时遇到了一个大问题：当我尝试将响应映射到来自服务器的对象时，**出现以下异常**：

```
2013-02-08 22:40:43.947 App[66735:5903] *** Assertion failure in -[RKManagedObjectResponseMapperOperation performMappingWithObject:error:], ~/Repositories/App/RestKit/Code/Network/RKResponseMapperOperation.m:358
2013-02-08 23:04:30.562 App[66735:5903] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to perform mapping: No `managedObjectContext` assigned. (Mapping response.URL = http://localhost:3000/contacts?auth_token=s78UFMq8mCQrr12GZcyx)'
*** First throw call stack:
(0x1de9012 0x1c0ee7e 0x1de8e78 0x16a4f35 0x8f56e 0x8d520 0x1647d23 0x1647a34 0x16d4301 0x23a253f 0x23b4014 0x23a52e8 0x23a5450 0x90ac6e12 0x90aaecca)
libc++abi.dylib: terminate called throwing an exception 
```

我正在尝试从服务器加载联系人列表（数组），该列表应保存为 Core Data 中的“用户”。

我在**数据模型类**中构建了所有核心数据代码，就像我在这个视频中看到的那样：http: [//nsscreencast.com/episodes/11-core-data-basics](http://nsscreencast.com/episodes/11-core-data-basics)。这里是：

头文件：

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface AppDataModel : NSObject

+ (id)sharedDataModel;

@property (nonatomic, readonly) NSManagedObjectContext *mainContext;
@property (nonatomic, strong) NSManagedObjectModel *managedObjectModel;
@property (nonatomic, readonly) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (NSString *)modelName;
- (NSString *)pathToModel;
- (NSString *)storeFilename;
- (NSString *)pathToLocalStore;

@end 
```

Implementation file:

```
#import "AppDataModel.h"

@interface AppDataModel ()

- (NSString *)documentsDirectory;

@end

@implementation AppDataModel

@synthesize managedObjectModel = _managedObjectModel;
@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;
@synthesize mainContext = _mainContext;

+ (id)sharedDataModel {
    static AppDataModel *__instance = nil;
    if (__instance == nil) {
        __instance = [[AppDataModel alloc] init];
    }

    return __instance;
}

- (NSString *)modelName {
    return @"AppModels";
}

- (NSString *)pathToModel {
    return [[NSBundle mainBundle] pathForResource:[self modelName]
                                           ofType:@"momd"];
}

- (NSString *)storeFilename {
    return [[self modelName] stringByAppendingPathExtension:@"sqlite"];
}

- (NSString *)pathToLocalStore {
    return [[self documentsDirectory] stringByAppendingPathComponent:[self storeFilename]];
}

- (NSString *)documentsDirectory {
    NSString *documentsDirectory = nil;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    documentsDirectory = [paths objectAtIndex:0];
    return documentsDirectory;
}

- (NSManagedObjectContext *)mainContext {
    if (_mainContext == nil) {
        _mainContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        _mainContext.persistentStoreCoordinator = [self persistentStoreCoordinator];
    }

    return _mainContext;
}

- (NSManagedObjectModel *)managedObjectModel {
    if (_managedObjectModel == nil) {
        NSURL *storeURL = [NSURL fileURLWithPath:[self pathToModel]];
        _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:storeURL];
    }

    return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (_persistentStoreCoordinator == nil) {
        NSLog(@"SQLITE STORE PATH: %@", [self pathToLocalStore]);
        NSURL *storeURL = [NSURL fileURLWithPath:[self pathToLocalStore]];
        NSPersistentStoreCoordinator *psc = [[NSPersistentStoreCoordinator alloc]
                                             initWithManagedObjectModel:[self managedObjectModel]];
        NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
        NSError *e = nil;
        if (![psc addPersistentStoreWithType:NSSQLiteStoreType
                               configuration:nil
                                         URL:storeURL
                                     options:options
                                       error:&e]) {
            NSDictionary *userInfo = [NSDictionary dictionaryWithObject:e forKey:NSUnderlyingErrorKey];
            NSString *reason = @"Could not create persistent store.";
            NSException *exc = [NSException exceptionWithName:NSInternalInconsistencyException
                                                       reason:reason
                                                     userInfo:userInfo];
            @throw exc;
        }

        _persistentStoreCoordinator = psc;
    }

    return _persistentStoreCoordinator;
}
@end 
```

The **User class** is pretty straightforward, auto-generated with xCode.

Header file:

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface User : NSManagedObject

@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * firstName;
@property (nonatomic, retain) NSString * lastName;
@property (nonatomic, retain) NSNumber * userID;

@end 
```

Implementation file:

```
#import "User.h"

@implementation User

@dynamic email;
@dynamic firstName;
@dynamic lastName;
@dynamic userID;

@end 
```

Just like the data model class, I have a **server manager class** which I use for communication:

Header file:

```
#import <Foundation/Foundation.h>
#import <RestKit/RestKit.h>
#import "AppServerProtocol.h"
#import "AppDataModel.h"

@interface AppServer : NSObject <AppServerDelegate>

+ (id)sharedInstance;

@property (strong, nonatomic) RKObjectManager *objectManager;
@property (strong, nonatomic) RKEntityMapping *userMapping;

@end 
```

And implementation file:

```
#import "AppServer.h"
#import "User.h"
#import "Device.h"
#import "Ping.h"
#import "AppAppDelegate.h"

@interface AppServer ()

@property BOOL initialized;

@end

@implementation AppServer

+ (id)sharedInstance {
    static AppServer *__instance = nil;
    if (__instance == nil) {
        __instance = [[AppServer alloc] init];
        __instance.initialized = NO;
    }

    if (![__instance initialized]) {
        [__instance initServer];
    }

    return __instance;
}

- (void)initServer {
    // initialize RestKit
    NSURL *baseURL = [NSURL URLWithString:@"http://localhost:3000"];
    _objectManager = [RKObjectManager managerWithBaseURL:baseURL];

    // enable activity indicator spinner
    [AFNetworkActivityIndicatorManager sharedManager].enabled = YES;

    // initialize managed object store
    _objectManager.managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:[[AppDataModel sharedDataModel] managedObjectModel]];

    _userMapping = [RKEntityMapping mappingForEntityForName:@"User" inManagedObjectStore:_objectManager.managedObjectStore];
    [_userMapping addAttributeMappingsFromDictionary:@{
     @"email" : @"email",
     @"firstName" : @"first_name",
     @"lastName" : @"last_name"
     }];
    [_userMapping setIdentificationAttributes: @[@"userID"]];

    RKResponseDescriptor *contactsResponseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:_userMapping pathPattern:@"/contacts" keyPath:nil statusCodes:nil];
    [_objectManager addResponseDescriptor:contactsResponseDescriptor];

    _initialized = YES;
}

// contacts
- (void)getContactsForCurrentUser {
    NSString *authToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"AppAuthenticationToken"];

    [_objectManager getObjectsAtPath:@"/contacts" parameters:@{@"auth_token": authToken} success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
        RKLogInfo(@"Load collection of contacts: %@", mappingResult.array);
    } failure:^(RKObjectRequestOperation *operation, NSError *error) {
        RKLogError(@"Operation failed with error: %@", error);
    }];

}

@end 
```

So when I open the Contacts Table View, which is set up correctly to use a fetched results controller (successfully pulling entities out of the DB), I have a dangerous refresh button, which calls **the method** you've just read above:

```
- (void)downloadContacts {
    [[AppServer sharedInstance] getContactsForCurrentUser];
} 
```

Here is the format of **the response**:

```
[
    {
        "created_at":"2013-01-11T14:03:57Z",
        "email":"john@example.com",
        "first_name":"John",
        "id":2,
        "last_name":"Doe",
        "updated_at":"2013-02-07T10:57:16Z"
    },
    {
        "created_at":"2013-01-11T14:03:57Z",
        "email":"jane@example.com",
        "first_name":"Jane",
        "id":3,
        "last_name":"Doe",
        "updated_at":"2013-02-07T10:57:16Z"
}
] 
```

And before the exception **the console** states the following:

```
2013-02-08 22:40:36.892 App[66735:c07] I restkit:RKLog.m:34 RestKit logging initialized...
2013-02-08 22:40:36.994 App[66735:c07] SQLITE STORE PATH: ~/Library/Application Support/iPhone Simulator/6.0/Applications/D735548F-DF42-4E13-A7EF-53DF0C5D8F3B/Documents/AppModels.sqlite
2013-02-08 22:40:37.001 App[66735:c07] Context is ready!
2013-02-08 22:40:43.920 App[66735:c07] I restkit.network:RKHTTPRequestOperation.m:154 GET 'http://localhost:3000/contacts?auth_token=s78UFMq8mCQrr12GZcyx'
2013-02-08 22:40:43.945 App[66735:c07] I restkit.network:RKHTTPRequestOperation.m:181 
```

**The line of the RestKit library**, that fails before the whole exception is thrown is:

```
NSAssert(self.managedObjectContext, @"Unable to perform mapping: No `managedObjectContext` assigned. (Mapping response.URL = %@)", self.response.URL); 
```

I have followed that back to the initServer method in the AppServer.m file, in which, before the method returns, **the properties of the RKObjectManager class** are like this: [http://imgur.com/LM5ZU9m](https://imgur.com/LM5ZU9m)

As I have debugged, I've traced that the problem is not with the server side or the communication of the app - I can see the JSON received and deserialized into an array, but the moment it's passed to the next method which is supposed to save it to Core Data, the whole app goes kaboom because of the NSAssert of the managed object context.

**Any help is greatly appreciated!**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:14:22.340

After a few days of debugging, I finally found out what went wrong: it looks like I also had to set the path to my local persistence store and generate managed object contexts for the managed object store myself.

Here's where I found the solution: [https://github.com/RestKit/RestKit/issues/1221#issuecomment-13327693](https://github.com/RestKit/RestKit/issues/1221#issuecomment-13327693)

I've just added a few lines in my server init method:

```
NSError *error = nil;
NSString *pathToPSC = [[AppDataModel sharedDataModel] pathToLocalStore];

_objectManager.managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:[[AppDataModel sharedDataModel] managedObjectModel]];
[_objectManager.managedObjectStore addSQLitePersistentStoreAtPath:pathToPSC fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];

if (error != nil) {
    NSLog(@"\nSerious object store error!\n");
    return;
} else {
    [_objectManager.managedObjectStore createManagedObjectContexts];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:47:14.413

I managed to do it using this function `RKApplicationDataDirectory()` to get the application directory and set my database path.

```
// Initialize HTTPClient
NSURL *baseURL = [NSURL URLWithString:@"http://myapiaddress.com"];
AFHTTPClient* client = [[AFHTTPClient alloc] initWithBaseURL:baseURL];
//we want to work with JSON-Data
[client setDefaultHeader:@"Accept" value:RKMIMETypeJSON];

// Initialize RestKit
RKObjectManager *objectManager = [[RKObjectManager alloc] initWithHTTPClient:client];
NSURL *modelURL = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"NameOfMyCoreDataModel" ofType:@"momd"]];

//Iniitalize CoreData with RestKit
NSManagedObjectModel *managedObjectModel = [[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL] mutableCopy];
RKManagedObjectStore *managedObjectStore = [[RKManagedObjectStore alloc] initWithManagedObjectModel:managedObjectModel];
NSError *error = nil;

NSString *path = [RKApplicationDataDirectory() stringByAppendingPathComponent:@"nameOfDB.sqlite"];

objectManager.managedObjectStore = managedObjectStore;

[objectManager.managedObjectStore addSQLitePersistentStoreAtPath:path fromSeedDatabaseAtPath:nil withConfiguration:nil options:nil error:&error];

[objectManager.managedObjectStore createManagedObjectContexts]; 
```

# templates - 是否可以将助手嵌套在带有把手的选项哈希中？

> ID：14781916
> 
> 赞同：49
> 
> 时间：2013-02-08T21:52:26.180
> 
> 标签：templates, backbone.js, handlebars.js, helpers

例如，有没有办法将我的“ **i18n** ”助手嵌套在另一个助手的哈希变量中？

```
{{view "SearchView" placeholder="{{t 'search.root'}}" ref="search" url="/pages/search" className='home-search'  polyfill=true}} 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2014-05-07T20:55:50.300

**更新：** Handlebars 现在支持[subexpressions](https://handlebarsjs.com/guide/expressions.html#subexpressions)，所以你可以这样做：

```
{{view "SearchView" (t 'search.root')}} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-11T22:22:27.040

不直接支持您的方案，但您可以使用一些变通方法。把手助手只是 javascript 代码，因此您可以从助手代码本身中执行它们：

```
function translateHelper() {
    //...
}

function viewHelper = function(viewName, options) {
    var hash = options.hash;
    if(hash.placeholder) { 
        hash.placeholder = translateHelper(hash.placeholder);
    }
};

Handlebars.registerHelper('view', viewHelper);
Handlebars.registerHelper('t', translateHelper); 
```

只需将 i18n 键作为参数传递：

```
{{view placeholder="search.root"}} 
```

这很好，只要您的助手知道哪些参数应该本地化，哪些不应该本地化。如果这不可能，您可以尝试通过 Handlebars 运行所有辅助参数，如果它们包含一个把手表达式：

```
function resolveNestedTemplates(hash) {
  _.each(hash, function(val, key) {
    if(_.isString(val) && val.indexOf('{{' >= 0)) {
      hash[key] = Handlebars.compile(val)();
    }
  });
  return hash;
}

function view(viewName, options) {
  var hash = resolveNestedTemplates(options.hash, this);
} 
```

并使用您描述的嵌套模板语法：

```
{{view placeholder="{{t 'search.root'}}" }} 
```

我意识到这些选项都不是完美的，但它们是我能想到的最好的。

# php - MySQL 使用 table1.id REGEXP table2.id 为同一组选择不同的行

> ID：14781918
> 
> 赞同：2
> 
> 时间：2013-02-08T21:52:32.367
> 
> 标签：php, mysql, sql, regex

表名：组

```
id  name
1   ONE
2   TWO
3   THREE
4   FOUR
5   FIVE
6   SIX 
```

表名：titles

```
id  title           groups  isactive
1   First Title     1,2,4   yes
2   Second Title    2,5,7   yes
3   Third Title     3,1,2   yes
4   Fourth title    2,4,5   yes 
```

链接栏：id

询问：

```
SELECT 
 t.*, g.name
FROM 
 `titles` AS t, groups AS g 
WHERE 
  t.groups REGEXP CONCAT('^', g.id, '')
ORDER by title ASC, name ASC 
```

结果：

```
id  title           groups  isactive    name
1   First Title     1,2,4   yes         ONE
4   Fourth title    2,4,5   yes         TWO
2   Second Title    2,5,7   yes         TWO
3   Third Title     3,1,2   yes         THREE 
```

现在，问题是我只想为每个组选择一个标题，但是，可能有重复的组名，例如（id = 4 和 2）都分配给组号 TWO。

如何只显示具有高 ID 的那个？那么结果应该是这样的：（不包括id=2）

```
id  title           groups  isactive    name
1   First Title     1,2,4   yes         ONE
4   Fourth title    2,4,5   yes         TWO
3   Third Title     3,1,2   yes         THREE 
```

我也尝试使用此查询：

```
SELECT 
 t.*, g.name
FROM 
 `titles` AS t, groups AS g 
WHERE 
  t.groups REGEXP CONCAT('^', g.id, '')
GROUP by g.name
ORDER by t.id DESC 
```

或者

```
ORDER by t.id ASC 
```

但两者都显示：

```
id  title           groups  isactive   name
3   Third Title     3,1,2   yes        THREE
2   Second Title    2,5,7   yes        TWO
1   First Title     1,2,4   yes        ONE 
```

[请看演示 - SQL](http://sqlfiddle.com/#!2/aae12/1) FIDDLE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:13:24.937

试试这个

```
SELECT A.*, B.NAME FROM titles A
JOIN (
         SELECT g.name, max(t.id) id
         FROM titles AS t, groups AS g 
         WHERE t.groups REGEXP CONCAT('^', g.id, '')
         group by g.name
     ) B on A.id = b.id 
```

[SQL 演示](http://sqlfiddle.com/#!2/aae12/16)

# scala - scala中的haskell accumArray等价物？

> ID：14781919
> 
> 赞同：0
> 
> 时间：2013-02-08T21:52:32.957
> 
> 标签：scala, haskell, scala-collections

Haskell 有一个函数`accumArray`函数，它通过一个键对 2 元组进行分组，然后使用相同的键减少值。Scala 没有，scalaz 中似乎有一个，但依赖于许多其他 scalaz 功能。有没有更好的方法在 scala 中编写 accumArray ？此处haskell中此功能的详细信息：http: [//zvon.org/other/haskell/Outputarray/accumArray_f.html](http://zvon.org/other/haskell/Outputarray/accumArray_f.html)

下面是我的实现。谢谢。

```
 private def accumArray[A <% Ordered[A], B, C](f: (B, C) => B,
                                                base: B,
                                                bounds: (A, A),
                                                ll: List[(A, C)]): Vector[(A, B)] = {
    ll.filter(i => i._1 >= bounds._1 && i._1 <= bounds._2).
      groupBy(_._1).
      map(e =>
        e._1 -> e._2.map(_._2).foldLeft(base)(f)
      ).
      toVector
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T00:29:59.280

这是我的解决方案，不是那么短

```
def accumArray[A <% Ordered[A], B, C](f: (B, C) => B,
                                      base: B,
                                      bounds: (A, A),
                                      xs: Seq[(A, C)]): Vector[(A, B)] = {
  @scala.annotation.tailrec
  def accum(ys: Seq[(A, C)], zs: Vector[(A, B)]): Vector[(A, B)] =
    (ys, zs) match {
      case(Seq(), _)           => zs
      case(((a,c)) +: rs, Vector())  => accum(rs, Vector((a, f(base,c))))
      case(((a1,c)) +: rs, vs :+ ((a2,b))) =>
        if(a1 == a2) accum(rs, vs :+ (a2, f(b,c)))
        else accum(rs, zs :+ (a1, f(base,c)))
    }

  val (min, max) = bounds
  val ys = xs.filter{case(x, _) => x >= min && x <= max}.sortBy(_._1)
  accum(ys, Vector())
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:08:55.493

元组列表可以看作是键值对的列表。这让我想起了 Map 类型。显然，使用 ScalaZ 可以累积 Map：[Using scala Maps to accumulating values](https://stackoverflow.com/questions/12496200/using-scala-maps-to-accumulate-values)

我还没有学到足够的 ScalaZ（函数式编程）来给你一个工作示例，但你似乎有使用 Haskell 的经验，并且可能有足够的知识来使用 ScalaZ 做到这一点。

# geospatial - 在 Unidata Integrated Data Viewer (IDV) 上从 THREDDS 目录加载数据？

> ID：14781920
> 
> 赞同：1
> 
> 时间：2013-02-08T21:52:42.890
> 
> 标签：geospatial, data-visualization, netcdf, thredds

我正在尝试通过目录将一些数据从 THREDDS 服务器加载到 IDV，但我收到错误消息，例如

> *服务器不支持 Content-Length*

我可以从我的本地文件夹中添加 netcdf 数据，但无法让这个数据正常工作。似乎我错过了一个基本步骤，因为我在用户手册上也找不到我正在寻找的信息。我想知道是否有人有类似的问题......
我正在尝试下面的目录。

> [http://opendap.co-ops.nos.noaa.gov/thredds/catalog/NOAA/GBOFS/MODELS/201302/catalog.html](http://opendap.co-ops.nos.noaa.gov/thredds/catalog/NOAA/GBOFS/MODELS/201302/catalog.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T11:54:39.673

`.html`如果您尝试使用扩展名而不是扩展名打开目录，这就是您将在 IDV 中遇到的错误`.xml`。

在 IDV 中，您可以通过多种方式打开数据集：

1.  “Data=>Choose Data=>From a Catalog”：指定 thredds 目录（使用 xml 扩展名），然后导航到所需的数据集。我通常使用常规网络浏览器（如 Chrome）来定位我感兴趣的 thredds 目录，然后将目录 URL 从 .html 扩展名更改为 .xml 扩展名。对于加尔维斯顿湾数据，请指定“ [http://opendap.co-ops.nos.noaa.gov/thredds/gbofs_catalog.xml](http://opendap.co-ops.nos.noaa.gov/thredds/gbofs_catalog.xml) ”。您将看到一个文件夹列表。您需要单击文件夹名称左侧的点以展开文件夹，以便查看数据集。然后选择一个数据集名称并单击页面底部的“添加源”按钮。

2.  “Data=>Choose Data=>From a Web Server”：指定所需数据集的 DAP URL。我通常使用常规 Web 浏览器（如 Chrome）在 opendap 服务器上导航，直到找到 OPeNDAP 数据集访问表单，例如： http: [//opendap.co-ops.nos.noaa.gov/thredds/dodsC/NOAA/ GBOFS/MODELS/201302/nos.gbofs.fields.forecast.20130205.t00z.nc.html](http://opendap.co-ops.nos.noaa.gov/thredds/dodsC/NOAA/GBOFS/MODELS/201302/nos.gbofs.fields.forecast.20130205.t00z.nc.html) 然后我将表单顶部附近的“数据 URL”剪切并粘贴到 IDV URL 框中。

3.  “Data=>Choose Data=>From the File System”：指定本地 NetCDF、Grib、HDF5 或 NcML 文件。

当您尝试加载的数据集不符合 CF 约定时，加载本地 NcML 文件会特别方便，并且您需要进行一些修复以便可以在 IDV 中读取数据集。

# linux - logrotate apache 错误并发送到电子邮件

> ID：14781921
> 
> 赞同：1
> 
> 时间：2013-02-08T21:52:43.967
> 
> 标签：linux, apache, logrotate

谁能告诉我如何使用 logrotate 命令向我发送带有 apache 日志的每日电子邮件？

我真的找不到我想要的例子

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:55:25.187

我不知道如何为此使用 logrotate，但是编写 shell 脚本来归档最新日志并通过电子邮件将其发送给您，然后将此脚本放入 crontab 中是很容易的。

# cakephp - Cakephp更改网址？

> ID：14781930
> 
> 赞同：-1
> 
> 时间：2013-02-08T21:53:53.920
> 
> 标签：cakephp

我想将我在 cake php /eng/users/ 中的 url 更改为 /users/；我的意思是当我输入这个 /eng/users/ cakephp 时不要向我显示这样的错误

**缺少控制器错误：找不到 EngController。错误：在以下文件中创建类“EngController”：“app\Controller\EngController.php”**

这 /eng/users/ 和 /users/ 都一样吗？任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:17:28.820

您正在寻找路由器。

阅读这篇文章：[http ://book.cakephp.org/2.0/en/development/routing.html#routes-configuration](http://book.cakephp.org/2.0/en/development/routing.html#routes-configuration)

尤其是对于用户的原因，您应该在 /app/Config/routes.php 中添加

```
Router::connect(
   '/eng/:controller/*', array('controller' => 'users')
); 
```

eng 可以设置为一些前缀等等。

# emacs - 我在哪里可以下载 Emacs v18 源代码？

> ID：14781931
> 
> 赞同：1
> 
> 时间：2013-02-08T21:54:03.890
> 
> 标签：emacs

我试图找到一个 Emacs 版本，它可以在运行在 DEC VAX 上的 OpenBSD 上编译。版本 21 和 23 甚至来自 Ports 树的 Zile 也无法编译。我希望版本 18 会；但是我在哪里可以下载呢？GNU FTP 服务器只能追溯到版本 21。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T22:16:54.867

一些较旧的东西已移至`old-gnu`顶级目录。你可以在这里找到它：http: [//ftp.gnu.org/old-gnu/emacs/emacs-18.59.tar.gz](http://ftp.gnu.org/old-gnu/emacs/emacs-18.59.tar.gz)

# linux - 捕获标准错误和标准输出的好方法

> ID：14781935
> 
> 赞同：1
> 
> 时间：2013-02-08T21:54:28.230
> 
> 标签：linux, bash, shell, unix, logging

除了将标准错误流合并到源脚本的标准输出流之外，这很好用。关于如何修复它的任何建议？

```
#!/usr/bin/env bash

# Source this from a script to capture and `tee` standard error and standard 
# out to a log file. Calling script must source this script.  For Example:
#
# . /usr/bin/logy /var/log/project/$0.log
#
# The logging uses >(process substitution). Process substitution is supported 
# in shells like bash and zsh but is not supported in sh.

_LOG=${1?log file}
test $# -eq 1 || exit 1

mkdir -p "$(dirname "$_LOG")"

# Append stdout and stderr to log file
exec > >(
  echo -e "START\t$(date)" >> "$_LOG"
  tee -a "$_LOG"
  echo -e "END\t$(date)" >> "$_LOG"
) 2>&1 
```

这是一个例子：

```
. /usr/bin/logy $0.log
echo stdout
echo stderr >&2
exit 1 
```

运行脚本：

```
$ ./t
$ echo $?      # $? is the return value
1 
```

很好，返回值 1 被保留了……

记录了什么？

```
$ cat t.log
START    Thu, Feb 07, 2013  2:58:57 PM
stdout
stderr
END    Thu, Feb 07, 2013  2:58:57 PM 
```

这个想法是制作单个日志文件，然后用于`logrotate`维护它们。

这是问题所在。标准输出和错误流被合并。此输出表明标准错误流已进入标准输出：

```
./t > /dev/null 
```

这从 echo 语句中输出两行，显示两者都进入标准输出：

```
./t 2> /dev/null 
```

有没有一种很好的方法来保留流，同时保留 stdout/err 语句的日志文件中的顺序？出于这个原因，我不认为两种`exec`陈述是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:02:47.193

好先生，这应该工作

```
script_name.sh |& tee -a /var/log/script_name.sh.log 
```

[**澄清**](http://tldp.org/LDP/abs/html/io-redirection.html)部分命令

```
|& was added to Bash 4 as an abbreviation for 2>&1 | 
```

# java - 带组的 Java 模式

> ID：14781938
> 
> 赞同：2
> 
> 时间：2013-02-08T21:54:36.153
> 
> 标签：java, regex, regex-group

我有这个模式：

```
 Pattern p = Pattern.compile("([0-9]){11}"); 
```

我的问题是如何从组中获取所有数字并将其相加。我正在尝试使用此代码，但无法正常工作：

```
 Matcher matcher = p.matcher(field);
    int result = 0;

    if (matcher.matches()) {
        for (int i = 0; i <= matcher.groupCount(); i++) {
            String number = matcher.group(i + 1);
            result += Integer.parseInt(number);
        }
        return result;
    } else {
        return -1;
    } 
```

它找到的唯一组是最后一组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-10T19:39:17.363

**也许您可以改用字符串的“substring()”？**

**请参见下面的示例：**

```
public static void main(String[] args) {
    String stringOfNumbers = "AAA23211111111BBB";

    int sumOfDigits = 0;
    Matcher matcher = Pattern.compile("([0-9]{11})").matcher(stringOfNumbers);
    if (matcher.find()) {
        String extractedNumbers = matcher.group(1);
        for (int i = 0; i < extractedNumbers.length(); i++) {
            int oneDigit = Integer.parseInt(extractedNumbers.substring(i, i + 1));
            sumOfDigits += oneDigit;
        }
    }

    System.out.println("Sum of digits: " + sumOfDigits); // Output: 'Sum of digits: 15'
} 
```

# ruby - ActiveRecord - 获取第 N 行到第 N+10 行的查询结果

> ID：14781944
> 
> 赞同：0
> 
> 时间：2013-02-08T21:54:49.530
> 
> 标签：ruby, activerecord

我知道这可能已经被问过（事实上，我很确定）。

假设我有一个模型文章，并且想要查找所有符合特定条件的文章，按日期排序。

```
Article.find(:conditions => [SOME CONDITION], :order => "date asc") 
```

如果我想从此查询中获取第 10 到第 20 行，我该如何使用 ActiveRecord？

我正在使用 Postgres，如果它有什么不同的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:59:07.807

Rails 3 的表示法是：

```
Article.where(...conditions...).order('date ASC').limit(10).offset(10) 
```

你可能想要的是一个分页工具，比如[Paginator](http://paginator.rubyforge.org)或类似的东西。它将提供一个界面来显示第 N 页，而不必自己进行限制和偏移计算。

# elasticsearch - ElasticSearch 和附件类型（NEST C#）

> ID：14781946
> 
> 赞同：9
> 
> 时间：2013-02-08T21:55:05.797
> 
> 标签：elasticsearch, attachment, nest

我正在尝试使用 elasticsearch/NEST 索引 pdf 文档。

该文件已编入索引，但搜索结果返回 0 个匹配项。

我需要搜索结果只返回文档 ID 和突出显示结果

（不含 base64 内容）

这是代码：

我会很感激这里的任何帮助，

谢谢，

```
class Program
{
    static void Main(string[] args)
    {
        // create es client
        string index = "myindex";

        var settings = new ConnectionSettings("localhost", 9200)
            .SetDefaultIndex(index);
        var es = new ElasticClient(settings);

        // delete index if any
        es.DeleteIndex(index);

        // index document
        string path = "test.pdf";
        var doc = new Document()
        {
            Id = 1,
            Title = "test",
            Content = Convert.ToBase64String(File.ReadAllBytes(path))
        };

        var parameters = new IndexParameters() { Refresh = true };
        if (es.Index<Document>(doc, parameters).OK)
        {
            // search in document
            string query = "semantic"; // test.pdf contains the string "semantic"

            var result = es.Search<Document>(s => s
                .Query(q =>
                    q.QueryString(qs => qs
                        .Query(query)
                    )
                )
                .Highlight(h => h
                    .PreTags("<b>")
                    .PostTags("</b>")
                    .OnFields(
                      f => f
                        .OnField(e => e.Content)
                        .PreTags("<em>")
                        .PostTags("</em>")
                    )
                )
            );

            if (result.Hits.Total == 0)
            {
            }
        }
    }
}

[ElasticType(
    Name = "document",
    SearchAnalyzer = "standard",
    IndexAnalyzer = "standard"
)]
public class Document
{
    public int Id { get; set; }

    [ElasticProperty(Store = true)]
    public string Title { get; set; }

    [ElasticProperty(Type = FieldType.attachment,
        TermVector = TermVectorOption.with_positions_offsets)]
    public string Content { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-25T16:30:42.870

安装附件插件并重启ES

```
bin/plugin -install elasticsearch/elasticsearch-mapper-attachments/2.3.2 
```

创建一个映射到附件插件文档的附件类

```
 public class Attachment
  {
      [ElasticProperty(Name = "_content")]
      public string Content { get; set; }

      [ElasticProperty(Name = "_content_type")]
      public string ContentType { get; set; }

      [ElasticProperty(Name = "_name")]
      public string Name { get; set; }
  } 
```

在您正在索引的 Document 类上添加一个名为“File”的属性和正确的映射

```
 [ElasticProperty(Type = FieldType.Attachment, TermVector = TermVectorOption.WithPositionsOffsets, Store = true)]
  public Attachment File { get; set; } 
```

在索引类的任何实例之前显式创建索引。如果您不这样做，它将使用动态映射并忽略您的属性映射。如果您将来更改映射，请始终重新创建索引。

```
 client.CreateIndex("index-name", c => c
     .AddMapping<Document>(m => m.MapFromAttributes())
  ); 
```

索引您的项目

```
 string path = "test.pdf";

  var attachment = new Attachment();
  attachment.Content = Convert.ToBase64String(File.ReadAllBytes(path));
  attachment.ContentType = "application/pdf";
  attachment.Name = "test.pdf";

  var doc = new Document()
  {
      Id = 1,
      Title = "test",
      File = attachment
  };
  client.Index<Document>(item); 
```

在 File 属性上搜索

```
 var query = Query<Document>.Term("file", "searchTerm");

  var searchResults = client.Search<Document>(s => s
          .From(start)
          .Size(count)
          .Query(query)
  ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T11:58:42.553

// 我正在使用 FSRiver 插件 - [https://github.com/dadoonet/fsriver/](https://github.com/dadoonet/fsriver/)

```
void Main()
{
    // search in document
    string query = "directly"; // test.pdf contains the string "directly"
    var es = new ElasticClient(new ConnectionSettings( new Uri("http://*.*.*.*:9200"))
        .SetDefaultIndex("mydocs")
        .MapDefaultTypeNames(s=>s.Add(typeof(Doc), "doc")));
        var result = es.Search<Doc>(s => s
        .Fields(f => f.Title, f => f.Name)
        .From(0)
        .Size(10000)
            .Query(q => q.QueryString(qs => qs.Query(query)))
            .Highlight(h => h
                .PreTags("<b>")
                .PostTags("</b>")
                .OnFields(
                  f => f
                    .OnField(e => e.File)
                    .PreTags("<em>")
                    .PostTags("</em>")
                )
            )
        );
}

[ElasticType(Name = "doc",  SearchAnalyzer = "standard", IndexAnalyzer = "standard")]
public class Doc
{
    public int Id { get; set; }

     [ElasticProperty(Store = true)]
     public string Title { get; set; }

    [ElasticProperty(Type = FieldType.attachment, TermVector = TermVectorOption.with_positions_offsets)]
    public string File { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T09:38:39.910

I am working on the same so now i am trying this [http://www.elasticsearch.cn/tutorials/2011/07/18/attachment-type-in-action.html](http://www.elasticsearch.cn/tutorials/2011/07/18/attachment-type-in-action.html)

This article explains issue

pay attension that you should do correct mapping

```
 "title" : { "store" : "yes" },
 "file" : { "term_vector":"with_positions_offsets", "store":"yes" } 
```

I will try to figure out how to do that with NEST api and update this post

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-01T04:06:48.143

您需要在索引项目之前添加如下映射。

```
client.CreateIndex("yourindex", c => c.NumberOfReplicas(0).NumberOfShards(12).AddMapping<AssetSearchEntryModels>(m => m.MapFromAttributes())); 
```

# javascript - 在 JavaScript 中获取平台特定的换行符？

> ID：14781952
> 
> 赞同：6
> 
> 时间：2013-02-08T21:55:27.547
> 
> 标签：javascript, firefox, firefox-addon, newline

多年前，我为我的一个 Firefox 插件编写了以下函数，它可以帮助我获得特定于平台的换行符：

```
GetNewLine: function()
{
    var platform = navigator.platform.toLowerCase();

    if(platform.indexOf('win') != -1) // Windows
        return "\r\n";
    else if(platform.indexOf('mac') != -1) // Mac
        return "\r";
    else // *nix
        return "\n";
} 
```

这似乎工作正常，但在阅读新[行 Wikipedia 文章](http://en.wikipedia.org/wiki/Newline)后，我注意到最近的 Apple 操作系统（OS X 和更高版本）现在使用 UNIX 样式的`\n`行尾。因此，我的小函数可能会针对这种情况返回错误的东西（我没有可以测试它的 Mac OS）。

**有没有办法让 Firefox 告诉我特定于平台的换行符是什么？**也许某种内置的实用功能？我在我的扩展程序编写的文本文件中使用这些换行符，并且我想使用特定于平台的换行符，以便文件看起来适合各种系统。

**更新（2013 年 2 月 13 日）：**因此，在`navigator.platform.toLowerCase()`Mac-mini（OS X）上运行函数调用时，我得到了输出值`macintel`。这将导致我的函数返回`\r`而不是`\n`应有的返回。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T14:30:52.610

这是我最终使用的：

```
GetNewLine: function()
{
    var OS = Components.classes["@mozilla.org/xre/app-info;1"].
             getService(Components.interfaces.nsIXULRuntime).OS;

    return /winnt|os2/i.test(OS) ? "\r\n" : /mac/i.test(OS) ? "\r" : "\n";
} 
```

[我很确定“mac”案例永远不会发生，因为它没有在OS TARGET](https://developer.mozilla.org/en-US/docs/OS_TARGET)变量中列为可能性（我正在通过 中的`OS`属性进行测试`nsIXULRuntime`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T15:40:28.873

更新 1/16/15：编码不处理操作系统特定的换行符。

来自irc：

```
07:49   futpib  i guess encoding is for charset only
07:49   Will    character encoding is nothing to do with OS-specific line-endings 
```

~~如果您使用 OS.File 和 TextEncoder 它会将您的 \n 编码为适当的操作系统（我很确定）： [https ://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.File_for_the_main_thread](https://developer.mozilla.org/en-US/docs/JavaScript_OS.File/OS.File_for_the_main_thread)~~

 ~~```
let encoder = new TextEncoder();                                   // This encoder can be reused for several writes
let array = encoder.encode("This is some text");                   // Convert the text to an array
let promise = OS.File.writeAtomic("file.txt", array,               // Write the array atomically to "file.txt", using as temporary
    {tmpPath: "file.txt.tmp"});                                    // buffer "file.txt.tmp". 
```~~  ~~* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:15:05.810

无需确定是否只想在换行符上拆分文本，您可以执行以下操作：

```
htmlstring = sNewLine.replace(/(\r\n|\n|\r)/gm, "<br>"); 
```

如果您需要底层网络服务器换行符，您可以通过 Ajax 调用获取它，如果使用 ASP.NET，则返回类似这样的内容

```
Environment.NewLine 
```~~

# iphone - 如何从应用程序中的视频录制视频

> ID：14781961
> 
> 赞同：1
> 
> 时间：2013-02-08T21:56:15.657
> 
> 标签：iphone, ios, objective-c

我正在 iPad 屏幕上的 UIView 上播放视频剪辑。在一半的屏幕上播放视频。在另一半我也在做一些文字动画和播放声音。

我需要记录所有这些（视频+文本动画+音频）。因为这一切都在同一个观点上。

我可以使用 AVAsset 编写器通过 UIScreenCapture 视图类记录屏幕。

但它不录制在屏幕上播放的视频。我已经在 AVPlayer 和 MPMovie 播放器控制器上播放了视频，但 AV 资产编写器不从屏幕录制视频。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T06:27:13.817

关于 Caputring Screen，我找到了一些不错的教程，我认为它会对您有所帮助。第一个教程捕获全屏视频和第二个教程指导您如何使用 ScreenCaputring 添加声音。

[链接1 链接](http://aroth.no-ip.org:82/wordpress/archives/673)[2](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)

希望对你有帮助。谢谢

# jquery - 是否有一个简单的 jQuery 函数来固定和取消固定 h1 标签？

> ID：14781965
> 
> 赞同：2
> 
> 时间：2013-02-08T21:56:30.290
> 
> 标签：jquery, q

我知道[scrollerama](http://johnpolacek.github.com/scrollorama/)和[superscrollerama](http://johnpolacek.github.com/superscrollorama/)。

我和他们两个都挣扎了几天。而且我不能让它们仅用于固定。我不需要动画和类型支持。我尝试使用示例文档并一次删除一个块元素的 HTML 内容，然后分页符。似乎 scrollerama 仅在存在整个示例时才有效。或者更有可能......我不够聪明，无法弄清楚。

我要做的就是固定一个`<h1></h1>`标签，然后在到达特定标签时取消固定它。

我在这里也看到了这个问题：[CSS Trouble with Pinned Header Div](https://stackoverflow.com/questions/10274020/css-trouble-with-pinned-header-div)但这似乎根本不起作用。

示例代码：

```
 <!DOCTYPE html>
<html>
<head>
    <title>Untitled</title>
    <style type="text/css">
    </style>
    <script language="Javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script language="Javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>
</head>
<body>
<article>
    <header></header>
    <section id="wrap">

        <h1> Pin this when it hits the window top</h1>
        <div class="innercontent">
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p class="unpin">Unpin the previous h1 tag when this hits window top</p>
        </div>

        <h1> Pin this when it hits the window top</h1>
        <div class="innercontent">
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p class="unpin">Unpin the previous h1 tag when this hits window top</p>
        </div>

        <h1>Pin this when it hits the window top</h1>
        <div class="innercontent">
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p>inner content here</p>
        <p class="unpin">Unpin the previous h1 tag when this hits window top</p>
        </div>
    </section>
    <footer></footer>
</article>
</body>
</html> 
```

某个地方的一些 jquery 函数示例的链接将非常有帮助。或者快速解释如何将 scrollerama 剥离为仅 pin/upin 功能会有所帮助。

## 额外的：

sbeliv01 提出了这个问题：[How to find the most recent element to the current position with jQuery](https://stackoverflow.com/questions/10760567/how-to-find-the-closest-element-to-the-current-position-with-jquery)

但是，当调整边距时该方法会失败（为 HTML5 重置）。它仅在元素上绝对没有边距调整时才有效。当试图简单地将 H1 标签包装在无样式的 div 中时，页面滚动时会出现可怕的闪烁。

这是非功能性的，但我已经设置了一个
jsFiddle 以根据需要使用：
[**FIDDLE HERE**](http://jsfiddle.net/NotInUse/ffdFd/2/)
正如您所看到的那样，事情固定得很好，但后来他们无法取消固定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T01:09:20.740

在使用它并使用 Phillip Wills 的建议之后，我已经将代码安顿到它似乎运行得更好的地方。

我之前使用的 if/else 语句没有问题。似乎问题仅在于在 jquery 中使用什么位置。

功能性的jQuery：

```
 $(function(){
    $(window).bind('scroll', function() {
        $('.info').each(function() {
          var pin = $(this);
          var inner = pin.next().position().top - $(window).scrollTop();
          var ptop = pin.height() + 20;

            if (inner < ptop) {
                pin.addClass('pinned');
            } else {
                pin.removeClass('pinned');
            }
        });        
    });
}); 
```

主要问题是找到下一个对象的顶部，Phillip 帮助解决了这个问题，然后找到了固定对象的顶部，并为滚动提供了一些额外的空间。

`[**Functional jsFiddle demo here**](http://jsfiddle.net/NotInUse/ffdFd/8/)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-28T21:58:32.000

您可能需要调整一些值，但是使用第二个 if 语句而不是使用 else，似乎可以解决问题...这是您的匿名函数中的一些更新代码：

```
var bottom = pin.next().position().top + pin.next().height() - $(window).scrollTop();
var inner = pin.next().position().top - $(window).scrollTop();
console.log(position, bottom, inner);

if (position <= 0 && bottom >= 50 && inner <= 15) {
   pin.addClass('pin');
} 
if (bottom <= 30 || inner >= 15) {
   pin.removeClass('pin');
} 
```

这是更新小提琴的链接：http: [//jsfiddle.net/ffdFd/3/](http://jsfiddle.net/ffdFd/3/)

# terminal - Unix：查找文本文件中列出的目录文件名并移动到新目录

> ID：14781969
> 
> 赞同：0
> 
> 时间：2013-02-08T21:56:53.427
> 
> 标签：terminal, osx-mountain-lion

我是一个命令行新手，试图找出适当的命令来在 Mac OS X 的终端中执行以下命令。

假设我已将所有文件放在同一目录中，我想隔离并将该目录中文本文件中列出的一组选定文件移动到新目录，我该如何：

*   读取 .txt 文件中列出的选定文件名列表

*   按文件名查找所有匹配项

*   隔离所有文件匹配并将其移动到新目录

我发现这是在当前目录中找到一个或两个 filestring.filetype 并将所有匹配项移动到新目录：

```
find . -type f -iname "*filestring*.filetype" -print0| xargs -0 -J % mv % ~/NewDirectory/ 
```

而且我找到了这个 tar 命令，但是它会为“filename.txt”中列出的每个文件名创建一个存档副本

```
tar -cf - -T filename.txt |(cd /path/to/new/dir && tar -xvf -) 
```

任何帮助深表感谢！

我从可信赖的来源收到了一个有效的解决方案：

```
cat "filename.txt" | xargs -I % mv % ~/NewDirectory/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:18:48.787

```
while read filename
do 
  mv "$filename" ~/NewDirectory/
done < filename.txt 
```

# c# - 如何使用 linq 查询数据库以通过一次调用获取相关行？

> ID：14781970
> 
> 赞同：0
> 
> 时间：2013-02-08T21:57:16.523
> 
> 标签：c#, linq

这是一个非常简单的数据库模式来说明我的问题：

有3张桌子。T1、T2 和 T3。

T1 与 T2 具有一对多的关系。

T2 和 T3 是一对多的关系。

如何获取 T3 中与 T1.Id (T1 中的主键) 相关的所有行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T22:04:20.100

尝试

```
var t3Rows = dataContext.T3.Where(x => x.T2.T1.Id == id); 
```

# php - 位置搜索，基本的 php-mysql 错误？

> ID：14781971
> 
> 赞同：-2
> 
> 时间：2013-02-08T21:57:19.527
> 
> 标签：php, mysql, location, distance

我收到此错误：

警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 34 行的 /home/rydes235/public_html/search-test.php 中给出

尝试查询我的数据库时。

我的查询是：

```
 $query = mysql_query("SELECT postcode, ( 3959 * acos( cos( radians('$latitude') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('$longitude') ) + sin( radians('$latitude') ) * sin( radians( lat ) ) ) ) AS distance FROM uk_postcode_05 HAVING distance < 25 ORDER BY distance ASC LIMIT 0 , 5"); 
```

我试图简单地显示：

```
 while($row = mysql_fetch_array($query)){
    $town = ($row['town']);
    $country = ($row['country']);
    echo ($town.','.$country.'<br>');
} 
```

（第 34 行是 mysql_fetch_array() 行）。

我的 mysql 表有列 - 邮政编码、城镇、国家、经度、纬度、地区。

有人知道吗？如果您需要更多信息，请告诉我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T21:59:32.020

您需要确保 mysql_query 在调用 mysql_fetch_array() 之前不会返回错误

```
$query = mysql_query("...");
if ($query == false) {
    echo "Mysql error '". mysql_errno() . "' : " . mysql_error();
} else {
    ...
} 
```

您还应该停止使用 mysql_*() 函数，因为它们已被弃用，并查看[MySQLi](http://www.php.net/manual/en/class.mysqli.php)以保护您的数据库免受 SQL 注入。

# ruby-on-rails - 嵌套资源 + 自定义控制器方法

> ID：14781974
> 
> 赞同：1
> 
> 时间：2013-02-08T21:57:35.600
> 
> 标签：ruby-on-rails

我正在关注[可排序列表](http://railscasts.com/episodes/147-sortable-lists-revised)上的 Railscast ，但我遇到了嵌套资源的问题。

在我的应用程序中，“项目”有许多“步骤”，我正在为“步骤”创建一个可排序的列表。

我将方法“排序”添加到步骤控制器，并在 尝试加载页面时收到错误**未定义的局部变量或方法“sort_project_steps_url” 。**如果我从 tbody 中删除 data-update-url，页面会正确加载。链接排序的正确方法是什么？

路线.rb：

```
 resources :projects do
    resources :steps
      match "steps/:id" => "steps#number", :as => :number
      collection {post :sort}
  end 
```

步骤控制器：

```
class StepsController < ApplicationController
  before_filter :get_project

  # Sorts steps
  def sort
    render nothing: true
  end

  private
  # get_project converts the project_id given by the routing
  # into an @project object
  def get_project
    @project = Project.find(params[:project_id])
  end
end 
```

步骤/show.html.erb：

```
<table id="stepTable">
    <tbody data-update-url="<%= sort_project_steps_url(@project) %>">
</tbody>
</table> 
```

我的 rake 路线如下（不确定为什么排序出现在项目而不是步骤下）：

```
 admin_root            /admin(.:format)                               admin/dashboard#index
batch_action_admin_admin_users POST       /admin/admin_users/batch_action(.:format)      admin/admin_users#batch_action
             admin_admin_users GET        /admin/admin_users(.:format)                   admin/admin_users#index
                               POST       /admin/admin_users(.:format)                   admin/admin_users#create
          new_admin_admin_user GET        /admin/admin_users/new(.:format)               admin/admin_users#new
         edit_admin_admin_user GET        /admin/admin_users/:id/edit(.:format)          admin/admin_users#edit
              admin_admin_user GET        /admin/admin_users/:id(.:format)               admin/admin_users#show
                               PUT        /admin/admin_users/:id(.:format)               admin/admin_users#update
                               DELETE     /admin/admin_users/:id(.:format)               admin/admin_users#destroy
               admin_dashboard            /admin/dashboard(.:format)                     admin/dashboard#index
     batch_action_admin_images POST       /admin/images/batch_action(.:format)           admin/images#batch_action
                  admin_images GET        /admin/images(.:format)                        admin/images#index
                               POST       /admin/images(.:format)                        admin/images#create
               new_admin_image GET        /admin/images/new(.:format)                    admin/images#new
              edit_admin_image GET        /admin/images/:id/edit(.:format)               admin/images#edit
                   admin_image GET        /admin/images/:id(.:format)                    admin/images#show
                               PUT        /admin/images/:id(.:format)                    admin/images#update
                               DELETE     /admin/images/:id(.:format)                    admin/images#destroy
   batch_action_admin_projects POST       /admin/projects/batch_action(.:format)         admin/projects#batch_action
                admin_projects GET        /admin/projects(.:format)                      admin/projects#index
                               POST       /admin/projects(.:format)                      admin/projects#create
             new_admin_project GET        /admin/projects/new(.:format)                  admin/projects#new
            edit_admin_project GET        /admin/projects/:id/edit(.:format)             admin/projects#edit
                 admin_project GET        /admin/projects/:id(.:format)                  admin/projects#show
                               PUT        /admin/projects/:id(.:format)                  admin/projects#update
                               DELETE     /admin/projects/:id(.:format)                  admin/projects#destroy
      batch_action_admin_steps POST       /admin/steps/batch_action(.:format)            admin/steps#batch_action
                   admin_steps GET        /admin/steps(.:format)                         admin/steps#index
                               POST       /admin/steps(.:format)                         admin/steps#create
                new_admin_step GET        /admin/steps/new(.:format)                     admin/steps#new
               edit_admin_step GET        /admin/steps/:id/edit(.:format)                admin/steps#edit
                    admin_step GET        /admin/steps/:id(.:format)                     admin/steps#show
                               PUT        /admin/steps/:id(.:format)                     admin/steps#update
                               DELETE     /admin/steps/:id(.:format)                     admin/steps#destroy
   batch_action_admin_comments POST       /admin/comments/batch_action(.:format)         admin/comments#batch_action
                admin_comments GET        /admin/comments(.:format)                      admin/comments#index
                               POST       /admin/comments(.:format)                      admin/comments#create
                 admin_comment GET        /admin/comments/:id(.:format)                  admin/comments#show
        new_admin_user_session GET        /admin/login(.:format)                         active_admin/devise/sessions#new
            admin_user_session POST       /admin/login(.:format)                         active_admin/devise/sessions#create
    destroy_admin_user_session DELETE|GET /admin/logout(.:format)                        active_admin/devise/sessions#destroy
           admin_user_password POST       /admin/password(.:format)                      active_admin/devise/passwords#create
       new_admin_user_password GET        /admin/password/new(.:format)                  active_admin/devise/passwords#new
      edit_admin_user_password GET        /admin/password/edit(.:format)                 active_admin/devise/passwords#edit
                               PUT        /admin/password(.:format)                      active_admin/devise/passwords#update
                 project_steps GET        /projects/:project_id/steps(.:format)          steps#index
                               POST       /projects/:project_id/steps(.:format)          steps#create
              new_project_step GET        /projects/:project_id/steps/new(.:format)      steps#new
             edit_project_step GET        /projects/:project_id/steps/:id/edit(.:format) steps#edit
                  project_step GET        /projects/:project_id/steps/:id(.:format)      steps#show
                               PUT        /projects/:project_id/steps/:id(.:format)      steps#update
                               DELETE     /projects/:project_id/steps/:id(.:format)      steps#destroy
                project_number            /projects/:project_id/steps/:id(.:format)      steps#number
                 sort_projects POST       /projects/sort(.:format)                       projects#sort
                      projects GET        /projects(.:format)                            projects#index
                               POST       /projects(.:format)                            projects#create
                   new_project GET        /projects/new(.:format)                        projects#new
                  edit_project GET        /projects/:id/edit(.:format)                   projects#edit
                       project GET        /projects/:id(.:format)                        projects#show
                               PUT        /projects/:id(.:format)                        projects#update
                               DELETE     /projects/:id(.:format)                        projects#destroy
                        images GET        /images(.:format)                              images#index
                               POST       /images(.:format)                              images#create
                     new_image GET        /images/new(.:format)                          images#new
                    edit_image GET        /images/:id/edit(.:format)                     images#edit
                         image GET        /images/:id(.:format)                          images#show
                               PUT        /images/:id(.:format)                          images#update
                               DELETE     /images/:id(.:format)                          images#destroy
                          root            /                                              projects#index 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:08:14.633

明白了，我的 routes.rb 中有错误；我没有在“步骤”下嵌套集合。这是我的修复：

```
 resources :projects do
    resources :steps do
        collection {post :sort}
      end
      match "steps/:id" => "steps#number", :as => :number
  end 
```

感谢 AnkitG 为我指明了正确的方向。

# java - 停止 HtmlUnit 加载外部 Javascript/CSS 以测试性能？

> ID：14781977
> 
> 赞同：1
> 
> 时间：2013-02-08T21:58:06.653
> 
> 标签：java, testing, integration-testing, htmlunit

像许多人一样，我使用 HtmlUnit 为我的应用程序进行用户测试。我的大部分网页都包括谷歌分析、KISSmetrics 等 javascript，我想阻止 HtmlUnit 加载，这样测试就不会花时间从互联网上多次加载脚本。

有没有办法阻止 HtmlUnit 加载这些脚本？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:15:58.737

[您可以通过实现自己的ScriptPreProcessor](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/ScriptPreProcessor.html)来禁止执行 separae javasript 。我还没有尝试过，但它似乎是一种很有前途的方法。您可以以检测您不想执行的 jsvascript 的方式实现 ScriptPreProcessor，然后将其从网站中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-28T08:48:48.847

你可以这样做：

```
WebClient client=new WebClient();
new FalsifyingWebConnection(client)
{
    @Override
    public WebResponse getResponse(WebRequest settings) throws IOException
    {
        if (settings.getUrl().toExternalForm().startsWith("http://analytics.google.com"))
        {
           return createWebResponse(settings, "", "text/javascript");
        }
        return super.getResponse(settings);
    }
}; 
```

# c++ - 从 Visual Studio 2012 导出 exe

> ID：14781980
> 
> 赞同：0
> 
> 时间：2013-02-08T21:58:17.233
> 
> 标签：c++, exe

有什么方法可以在 VS12 中将我的 c++ 项目编译为带有所有 dll 导入（如 GLUT）和媒体文件（如图像/声音）的 exe。我只需要 1 个 exe 文件，即使没有安装 GLUT，它也可以在每台计算机上运行。（ps 我知道调试文件中是 exe，但如果没有安装 glut 则无法工作）谢谢

# c - 使用 malloc 和 realloc 从输入文件到数组

> ID：14781981
> 
> 赞同：1
> 
> 时间：2013-02-08T21:58:21.380
> 
> 标签：c

我正在尝试从文件中读取输入，并使用 malloc 和 realloc 将每个字符串放入一个数组中。因此，如果输入文件是：

```
alex
john
jane
smith 
```

数组的内容包含 {"alex\n", "john\n", "jane\n", "smith\n"}。到目前为止，我已经做了这样的事情：

```
int n=0;
int size=1;
File *fp = fopen(args[0],"r");
int c;
char* inputFile;
inputFile = (char*) malloc(size);
if(fp==0){
  fprintf(stderr, "Cannot open file!\n");
  return -1;}
else{
  do{
    c = fgetc(fp);
    inputFile = (char*) realloc(inputFile, size+1);
    inputFile[n]=c;
    n++;
    size++;
  }while(c!=EOF); 
```

我相信这个算法最终会得到这样的数组 {'a','l','e','x','\n','j','o','h','n',' \n','j','a','n','e','\n','s','m','i','t','h','\n'}

如何使 inputFile 成为二维数组？我应该如何处理 realloc？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:20:39.960

您可能希望首先分配一个初始大小为 10 的指针数组：

```
int size = 10;
char **inputFile= malloc(sizeof*inputFile*size); 
```

然后为您阅读的每个单词分配更多内存并将其插入到数组中：

```
char line[100];
fscanf(file, "%s", line);
inputFile[index++] = strdup(line); 
```

现在检查是否需要更多单词，然后重新分配数组：

```
if (index==size) {
   size += 10;
   inputFile = realloc(inputFile, sizeof*inputFile*size);
} 
```

所以你最终会得到这样的结果：

```
[0]->"alex"
[1]->"john"
[2]->"jane"
[3]->"smith" 
```

完成后，您需要遍历数组并释放每个字符串，然后释放数组，这部分留作练习:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T23:24:16.790

您可以尝试以下方法或只是研究它是如何完成的。它在我的 linux 机器上运行良好。如果您有任何问题，请告诉我。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const int INITIAL_MAX_LINES = 2;
const int MAX_LINES_INC = 2;

const int INITIAL_MAX_LINE_LENGTH = 2;
const int MAX_LINE_LENGTH_INC = 2;

int main (int argc, char *argv[])
{
  int nlines = 0, i;
  FILE *fp = fopen(argv[1], "r");
  char **inputFile, *buffer;
  int max_lines, c, buflen, bufpos, end_of_line;

  if (argc < 2) {
    printf("No enough arguments.\n");
    return -1;
  }

  max_lines = INITIAL_MAX_LINES;

  inputFile = (char **) malloc(max_lines * sizeof(char*));
  if (fp==0) {
    fprintf(stderr, "Cannot open file!\n");
    return -1;
  }
  else{
    /* Start with a buffer. */
    bufpos = 0;
    buflen = INITIAL_MAX_LINE_LENGTH;
    buffer = (char *) malloc(buflen * sizeof(char *));

    c = 0;
    while (c != EOF) {

      end_of_line = 0;

      c = fgetc(fp);

      if (c == EOF || c == '\n' || c == '\r') {
        end_of_line = 1;
       /* Discard this character. */
      }
      else {
        /* Put this character in the buffer. */
        /* But check if we have enough memory first! */
        /* Leave room for the null character at the end. */
        if (bufpos >= buflen - 1) {
          buflen += MAX_LINE_LENGTH_INC;
          buffer = (char *) realloc(buffer, buflen * sizeof(char));
        }
        buffer[bufpos] = c;
        bufpos++;
      }

      if (end_of_line) {
        /* Remember this line and get a new buffer. */
        /* Check if we need more memory. */
        if (nlines >= max_lines) {
          max_lines += MAX_LINES_INC;
          inputFile = (char **) realloc(inputFile, max_lines * sizeof(char*));
        }

        /* Null terminate the buffer.*/
        buffer[bufpos++] = 0;

        inputFile[nlines] = buffer;
        nlines++;

        bufpos = 0;
        buflen = INITIAL_MAX_LINE_LENGTH;
        buffer = (char *) malloc(buflen * sizeof(char *));
      }
    }
  }

  printf("%d lines\n", nlines);
  for (i=0; i<nlines; i++) {
    printf("%s\n", inputFile[i]);
  }
} 
```

# google-maps - 谷歌地图ip地址列表

> ID：14781983
> 
> 赞同：0
> 
> 时间：2013-02-08T21:58:23.910
> 
> 标签：google-maps

我已经查看但找不到将 IP 地址列表加载到谷歌地图中的方法或答案。假设您有 20 个 IP 地址，并希望在网页加载时通过 api 调用将它们加载到谷歌地图上……这可能吗？我可以提供 ip 地址的文本列表供 api 在加载时抓取。这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-18T16:09:20.580

老线程，但我正在研究同样的问题，所以这里......

对于一个简单（但手动）的工具，您可以使用[BatchGeo](http://batchgeo.com/)加载 IP 地址列表，并让系统对其进行地理定位。结果显示在可嵌入的谷歌地图上。据我所知，他们没有 API 支持。

一种可能的自动化方法是使用外部 api 进行地理位置（[想到 FreeGeoIP](http://freegeoip.net/)），并通过 Google API 将纬度/经度列表传递给 Google。

# javascript - Google Analytics 事件在 iframe 中不起作用

> ID：14781985
> 
> 赞同：1
> 
> 时间：2013-02-08T21:58:26.090
> 
> 标签：javascript, google-analytics

我在我的客户网站上构建页面，这些页面可以是他们合作伙伴网站上的 iframe。
我在网站上包含了这个 GA 代码。

```
 var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-1494300-1']);
    _gaq.push(['_setDomainName', 'mysite.com']);
    _gaq.push(['_trackPageview']);

    (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        _gaq.push(['_trackEvent', 'iframe', '/products/default.aspx', 'Petersburg- Zip Code:26847',, false]);

    })(); 
```

我已经验证了代码显示并在从 iframe 中拉入网站时被调用，但是，我们没有在 GA 中获得任何事件数据。我已经阅读了 iframe 和 GA 跟踪，大多数问题似乎是跨域限制的结果。但是，通过这种实现，我不需要来自父母的任何信息，而父母也不需要来自我的任何信息，我只需要事件数据。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T23:13:14.770

1.  确保您没有任何过滤器过滤掉数据
2.  确保您列出的`_setDomainName`域与您的 iframe 域匹配
3.  确保您指向正确的帐户#

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T23:08:23.607

谷歌分析依赖于 cookie。不同域中 iframe 中的 Cookie 从技术上讲是第 3 方 Cookie。默认情况下，Safari 会阻止第三方 cookie。您仍然应该看到 Chrome 和 Firefox 用户的大部分流量，除了少数更改默认设置的用户。

对于 Internet Explorer 流量，您必须确保在 iframe 的响应中实施 P3P 紧凑策略。否则，第三方 cookie 也将被阻止。

[阅读有关如何为 Google Analytics 设置 P3P CP 标头的更多信息](https://stackoverflow.com/questions/3547449/iframes-google-analytics-cookies-p3p)。

# javascript - EXT.JS 4.0.5 中的网格滚动问题，不考虑工具栏高度

> ID：14781989
> 
> 赞同：1
> 
> 时间：2013-02-08T21:58:40.210
> 
> 标签：javascript, extjs

我有这个网格：

![在此处输入图像描述](../Images/b96e089049d8123328aba52a14012c0f.png)

知道为什么会这样做吗？我知道内部面板需要为 350px，并且在 firebug 中应用它可以正常工作，但当然 Ext 喜欢动态重新计算所有内容，我不知道在哪里将高度应用到内部面板以使其显示正确的行为。

我知道 4.0.5 使用虚拟滚动条，并且我通过`scroll: false`在网格组件上设置并添加`style: { overflowX: 'hidden', overflowY: 'scroll' }`到它的 viewconfig 来禁用它们。问题是内部面板没有考虑工具栏的高度，而是将滚动条推到其容器下方。我也无法升级 extjs。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:17:32.930

这看起来像是 4.1 中解决的错误，但是我无法真正测试您的代码，因此很难判断，您可以尝试在网格`viewready`事件中执行此操作：

```
grid.determineScrollbars(); 
```

如[4.07](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.Panel-method-determineScrollbars)文档中所述。

**编辑：**

在事件发生后简单地尝试重新布局组件怎么样`viewready`：

```
grid.on('viewready', function(grid) {
    grid.doComponentLayout()
}); 
```

（或者如果你正在使用 MVC 事件处理方式）

# python - 在 django 中使用过滤器遍历 m2m

> ID：14781992
> 
> 赞同：0
> 
> 时间：2013-02-08T21:58:51.640
> 
> 标签：python, django, many-to-many, django-views

我正在尝试从 m2m 关系返回过滤值以在模板中使用。应该是微不足道的，但我无法让它工作。

我尝试在[此处](https://stackoverflow.com/questions/223990/how-do-i-perform-query-filtering-in-django-templates)描述的模型中执行此操作，但没有使其正常工作。现在我在视图中尝试一种可能更简单的方法，在[此处](https://stackoverflow.com/questions/12986010/getting-all-unique-values-stored-in-a-many-to-many-field)描述，但也无法使其正常工作。

```
class Activity(models.Model):
    activity_nm = models.CharField(max_length=60)  
    enddt = models.DateField()
    groups =  models.ManyToManyField(Group)
    def __unicode__(self):
        return self.activity_nm     

class Group (models.Model):
    group_nm = models.CharField(max_length=64)
    def __unicode__(self):
        return self.group_nm        

def group_details_page(request, group_nm):
    g=Activity.objects.filter(groups__in=[Group.objects.filter(group_nm=group_nm)],enddt__gt=now)
    return render_to_response('group_details_page.html', {'group': g},context_instance=RequestContext(request)) 
```

我的目标是返回一个组的所有活动，其中活动的结束日期 > 现在可以在模板中使用。

谢谢。

编辑：收到的错误是：int() 参数必须是字符串或数字，而不是 'QuerySet'

EDIT2：看起来这个问题比我想象的要多。我现在无法返回任何值。

```
g=Group.objects.all() 
```

不向模板返回值。模板解析 base.html 调用，但试图只是`{{ group.group_nm }}`出现是行不通的。

EDIT3：得到它返回组名（抱歉混淆）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:52:33.347

我认为您想要做的是从以下指定的组中过滤`activity_set`（请参阅[后向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#backwards-related-objects)）`group_nm`：

```
def group_details_page(request, group_nm):
    group_instance = Group.objects.get(group_nm=group_nm)
    activities = group_instance.activity_set.objects.filter(enddt__gt=now)
    return render_to_response(...etc...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:08:58.870

测试了它，解决方案非常简单。

将`g=Activity.objects.filter(groups__in=[Group.objects.filter(group_nm=group_nm)],enddt__gt=now)`一个可迭代对象放入`[QuerySet]`django 不知道如何索引的列表 () 中。

解决方案是转储列表理解：

```
g=Activity.objects.filter(groups__in=Group.objects.filter(group_nm=group_nm),enddt__gt=now) 
```

然后它就像一个魅力。

# c# - 静态字段究竟是如何在内部工作的？

> ID：14781993
> 
> 赞同：66
> 
> 时间：2013-02-08T21:58:56.983
> 
> 标签：c#, java, php, oop, static-members

假设你有一堂课，

```
class Foo
{
    public static bar;
} 
```

当你说：

```
new Foo(); 
```

我可以想象在内存中，为这个对象保留了一个空间。

...当你再说一遍：

```
new Foo(); 
```

...好吧，现在您有另一个空间可用于该对象。

但是，静态场究竟在哪里？

我真正想学习的是：

**对对象的引用如何引用它们引用的对象的相同字段？**

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-03-02T18:10:11.380

虽然类型系统的确切细节取决于实现，但让我更详细地说明它，而不是仅仅说明*它取决于*并且*你不应该关心*。[我将根据Jeffrey Richter的](https://rads.stackoverflow.com/amzn/click/com/0735667454)[*CLR 通过 C#*](https://rads.stackoverflow.com/amzn/click/com/0735667454)[一书和Hanu Kommalapati 等人](https://web.archive.org/web/20110811103129/http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)的文章[*See How the CLR Creates Runtime Objects*](https://web.archive.org/web/20110811103129/http://msdn.microsoft.com/en-us/magazine/cc163791.aspx)描述它在 Microsoft 的实现 (.NET) 中的大致工作原理。（[原始 MSDN 2005 年 5 月号](http://download.microsoft.com/download/3/a/7/3a7fa450-1f33-41f7-9e6d-3aa95b5a6aea/MSDNMagazineMay2005en-us.chm)）。

* * *

假设你有一堂课：

```
class Foo
{
    // Instance fields
    string myBar = "Foobar";
    int myNum;

    // Static fields
    static string bar = "Foobar";
    static int num;
}

Foo myFoo = new Foo();
Type typeOfFoo = typeof(Foo); 
```

**实例字段在哪里？**

每当您说`new Foo()`时，都会为对象实例分配和初始化空间，并调用构造函数。此实例在下图中显示为*Foo 的实例*。例如 instance 仅包含类的实例字段（在本例中为`myBar`和`myNum`），而对于分配在堆上的对象，运行时使用了两个额外的字段（`Sync block index`和`Type handle`）。类型句柄是指向`Type`描述实例类型的对象的指针，在本例*中为 Foo 类型*。

当您`new Foo()`再次说时，分配了新空间，该空间将再次包含该类型的实例字段的空间。如您所见，实例字段与对象*实例*相关联。

运行时将每个实例字段放置在距对象数据开头的固定偏移处。例如，`myBar`可能生活在偏移量 +4。实例字段的地址就是对象的地址加上字段的偏移量。

**静态字段在哪里？**

C# 和 Java 中的静态字段不与任何对象实例相关联，而是与类型相关联。类、结构和枚举是类型的示例。只有一次（每种类型）分配了一些空间来保存静态字段的值。为描述类型的结构中的静态字段分配空间是有意义的，因为每种类型`Type`也只有一个对象。`Type`这是 C# 和 Java 采用的方法。

`Type`对象¹是在运行时加载类型时创建的。此结构包含运行时所需的各种信息，以便能够分配新实例、调用方法和执行强制转换等。它还包含静态字段的空间，在本例中为`bar`和`num`。

运行时已将每个静态字段放置在与类型数据开头的某个偏移量处。这对于每种类型都是不同的。例如，`bar`可能生活在偏移 +64。静态字段的地址是`Type`对象的地址加上字段的偏移量。类型是静态已知的。

![显示一些对象结构及其关系。](../Images/b4d05948cdd9e7b53fb4760a306efc86.png)

¹ ) 在 Microsoft .NET 中，多种不同的结构描述了一个类型，例如*MethodTable*和*EEClass*结构。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-08T22:02:57.793

这完全取决于所讨论的实现。对于 C# 和 Java，运行时可以决定在哪里存储变量的内存。对于 C 和大多数编译语言，编译器会做出此决定。

话虽如此，在实践中，*这并不重要*。它由规范确定的用法，因此您可以自由使用知道行为的变量将得到保证。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-26T20:02:33.923

对于 Java，静态字段引用的对象将像其他对象一样驻留[在堆上：](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.3)

> 堆是为所有类实例和数组分配内存的运行时数据区域。

[当类被加载](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.4.1)时，该字段将被初始化（如果声明包含初始化），这发生在以下任何一项第一次出现之前：

> *   类的一个实例被创建。
> *   调用类声明的静态方法。
> *   分配了类声明的静态字段。
> *   使用类声明的静态字段，并且该字段不是常量变量（第 4.12.4 节）。

对静态字段的访问是通过 2 个特殊的 JVM 指令[getstatic](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.getstatic)和[putstatic](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.putstatic)完成的。但除了这种区别之外，静态字段类似于非静态字段。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-08T22:05:28.620

我只熟悉C#，这是我对它的理解：

然后您的程序启动，它将所有相关程序集加载到 AppDomain 中。加载组件时，会调用所有静态构造函数，包括静态字段。他们将在那里生活，卸载它们的唯一方法是卸载 AppDomain。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-08T22:03:01.463

这因语言而异，甚至因平台而异……

例如，在 .NET 方面，静态成员与管理`EEClass`定义“关联”，*可以*是堆分配的**或**“任何地方”分配的成员（C# 规范没有指定堆/堆栈行为，它是一种实现虚拟机的详细信息）

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-26T18:24:06.113

可能会有例外，但对于引用类型，`new`-keyword 通常会在称为“堆”的内部数据结构中创建一个对象。堆由 CLR（公共语言运行时）管理。无论您拥有静态成员、实例成员还是局部变量，都没有区别。

静态成员和实例成员（没有关键字的成员）之间的区别在于`static`，静态成员每个类型（类、结构）仅存在一次，而实例成员每个实例（每个对象）存在一次。

只有参考是静态的还是非静态的；这种区别不适用于被引用的对象（除非对象是值类型）。静态成员、实例成员和局部变量都可以引用同一个对象。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-04T14:33:11.387

Static members and constants are stored on heap. Unlike objects on heap that can get garbage collection, Static members and constants do stay till Appdomain is torn down, Hence once should be carefull in dealing with static fields

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-02-08T22:02:50.080

静态变量属于类而不是对象，因此`bar`即使您初始化了数千个`Foo`.

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-03T10:01:52.590

根据规范，静态变量存储在[Constant Pool](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.5)中。JVM 将此信息存储在永久代中。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-27T02:34:47.353

这取决于语言到语言或语言的设计者。如果我谈论 Java，静态成员存储在 JVM 的方法区域中，并且所有对象都链接到它们。另一件非常重要的事情是我们可以在不创建类的对象的情况下访问静态数据成员。这意味着分配给静态数据成员的内存不依赖于该对象的创建班级。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-05T14:29:28.740

通常静态变量存储在程序存储器的数据段中。因此，对于正在运行的程序中创建/存在的每个类，都将在数据段上创建静态变量，并且所有其他变量都在代码段中初始化。

所以基本上就像

```
+++++++++++++++++++++++++++++++++++++
+ DATA Segment
+   -static vars
+   
+----------------------------------
+  instances | instances | instances|
+            |           |          | 
```

这里单个区域在实例之间共享。

来自[维基百科](http://en.wikipedia.org/wiki/Data_segment) “数据区域包含程序使用的全局变量和静态变量，这些变量
显式初始化为一个值。”

# php - 为什么分配给 $bool1 或 $bool2 与分配给括在括号中的同一语句不同？

> ID：14781994
> 
> 赞同：0
> 
> 时间：2013-02-08T21:59:00.363
> 
> 标签：php

我完全糊涂了。为什么在语法层面上，下面的两个陈述会有什么不同？

```
$bool1=false;
$bool2=true;

//Statement1
$result=$bool1 or $bool2;  // Returns false

//Statement2
$result=($bool1 or $bool2);  // Returns true 
```

据我所知，这两个陈述应该是完全一致的。但是，出于某种原因，它们不是。我可以解决这个问题，但它们不相同的事实意味着我错过了语言的某些方面，而且我不知道在哪里检查。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T22:02:12.137

这是由于优先规则。`or`的优先级低于`=`，因此 Statement1 被解析为：

```
($result = $bool1) or $bool2; 
```

要获得您想要的，请`||`改用：

```
$result = $bool1 || $bool2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:02:00.420

赋值运算符 ( `=`) 的优先级高于 or 运算符 ( `or`)

```
$result=$bool1 or $bool2; 
```

首先执行 $bool1 到 $result 的赋值（给出 FALSE），然后执行 or 与 $bool2，结果为 FALSE

```
$result=($bool1 or $bool2); 
```

括号强制`$bool1 or $bool2`首先执行，这是一个TRUE；然后将该值分配给 $result

只是为了显示差异，请尝试

```
$result=$bool1 || $bool2; 
```

和

```
$result=($bool1 || $bool2); 
```

因为 or 运算符 ( `||`) 的优先级高于赋值运算符 ( `=`)

这是`||`和之间的差异`or`显着的情况之一

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T22:04:09.027

这些语句实际上是相同的并且评估相同的东西，也就是说，如果您打印整行（包括赋值部分

```
$bool1=false;
$bool2=true;

//Statement1
var_dump($result=$bool1 or $bool2);  // Returns true

//Statement2
var_dump($result=($bool1 or $bool2));  // Returns true 
```

区别在于任务。在语句 1 中，它被读作，`($result = $bool1) or $bool2`而语句 2 被读作`$result = ($bool1 or $bool2)`

由于 bool1 为假且 bool1 为真，因此在语句 1 中，您最终得到`$result or $bool2`which 的计算结果为`true`（但请注意 (`$result`仍然为假）

在陈述 2 中，你最终得到了 just `$result`（并且`$result`是真的）。

# sql - 在 SQL Server 的列中删除尾随空格和更新

> ID：14781999
> 
> 赞同：164
> 
> 时间：2013-02-08T21:59:19.923
> 
> 标签：sql, sql-server-2008, trailing

我在名为`Company Name`.

此列中的所有数据都有尾随空格。

我想删除所有这些，并且我希望数据没有任何尾随空格。

公司名称就像`"Amit Tech Corp "`

我希望公司名称是`"Amit Tech Corp"`

* * *

## 回答 #1

> 赞同：335
> 
> 时间：2013-02-08T22:00:57.873

尝试 `SELECT LTRIM(RTRIM('Amit Tech Corp '))`

[`LTRIM`](https://docs.microsoft.com/en-us/sql/t-sql/functions/ltrim-transact-sql)- 删除字符串左侧的所有前导空格

[`RTRIM`](https://docs.microsoft.com/en-us/sql/t-sql/functions/rtrim-transact-sql)- 从右边删除任何空格

前任：

```
update table set CompanyName = LTRIM(RTRIM(CompanyName)) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-02-08T22:01:28.533

要仅修剪尾随空格，您应该使用

```
UPDATE
    TableName
SET
    ColumnName = RTRIM(ColumnName) 
```

但是，如果要修剪所有前导和尾随空格，请使用此

```
UPDATE
    TableName
SET
    ColumnName = LTRIM(RTRIM(ColumnName)) 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-07T22:06:51.710

好吧，这是一个很好的脚本，可以动态修剪表上的所有 varchar 列：

```
--Just change table name
declare @MyTable varchar(100)
set @MyTable = 'MyTable'

--temp table to get column names and a row id
select column_name, ROW_NUMBER() OVER(ORDER BY column_name) as id into #tempcols from INFORMATION_SCHEMA.COLUMNS 
WHERE   DATA_TYPE IN ('varchar', 'nvarchar') and TABLE_NAME = @MyTable

declare @tri int
select @tri = count(*) from #tempcols
declare @i int
select @i = 0
declare @trimmer nvarchar(max)
declare @comma varchar(1)
set @comma = ', '

--Build Update query
select @trimmer = 'UPDATE [dbo].[' + @MyTable + '] SET '

WHILE @i <= @tri 
BEGIN

    IF (@i = @tri)
        BEGIN
        set @comma = ''
        END
    SELECT  @trimmer = @trimmer + CHAR(10)+ '[' + COLUMN_NAME + '] = LTRIM(RTRIM([' + COLUMN_NAME + ']))'+@comma
    FROM    #tempcols
    where id = @i

    select @i = @i+1
END

--execute the entire query
EXEC sp_executesql @trimmer

drop table #tempcols 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2015-12-14T05:43:41.167

SQL Server 不支持 Trim() 函数。

但是您可以使用 LTRIM() 删除前导空格，使用 RTRIM() 删除尾随空格。

可以将其用作 LTRIM(RTRIM(ColumnName)) 来删除两者。

```
update tablename
set ColumnName= LTRIM(RTRIM(ColumnName)) 
```

**更新：2022**

我在 7 年前（2015 年）回答了这个问题。那个时候 SQL server 中并没有直接的剪裁功能。

但是从 SQL Server 2017 开始，他们引入了***Trim()***函数。

因此，任何使用 SQL Server 2017 或更高版本的人都可以轻松地执行以下相同的操作。

```
update tablename
set ColumnName= TRIM(ColumnName) 
```

但是，如果您使用旧版本，您仍然必须使用我在 7 年前提到的方式。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-08T22:02:20.213

```
update MyTable set CompanyName = rtrim(CompanyName) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-08T22:02:49.140

使用[TRIM](http://www.1keydata.com/sql/sql-trim.html) SQL 函数。

如果您使用的是 SQL Server，请尝试：

```
SELECT LTRIM(RTRIM(YourColumn)) FROM YourTable 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-20T04:27:01.913

如果您使用的是**SQL Server（从 vNext 开始）** 或 **Azure SQL 数据库**，则可以使用以下查询。

```
SELECT TRIM(ColumnName) from TableName; 
```

对于其他**SQL SERVER 数据库**，您可以使用以下查询。

```
SELECT LTRIM(RTRIM(ColumnName)) from TableName 
```

LTRIM - 从左边删除空格

示例：`select LTRIM(' test ') as trim`=`'test '`

RTRIM - 从右边删除空格

示例：`select RTRIM(' test ') as trim`=`' test'`

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-05-13T10:20:11.943

使用ETL从excel文件中提取数据后我遇到了同样的问题，最后我在那里找到了解决方案：

[https://www.codeproject.com/Tips/330787/LTRIM-RTRIM-doesn-t-always-work](https://www.codeproject.com/Tips/330787/LTRIM-RTRIM-doesn-t-always-work)

希望能帮助到你 ;）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-18T10:34:20.043

*如果我们还想处理空格和不需要的制表符-*

检查并尝试以下脚本（**单元测试**）-

```
--Declaring
DECLARE @Tbl TABLE(col_1 VARCHAR(100));

--Test Samples
INSERT INTO @Tbl (col_1)
VALUES
('  EY     y            
Salem')
, ('  EY     P    ort       Chennai   ')
, ('  EY     Old           Park   ')
, ('  EY   ')
, ('  EY   ')
,(''),(null),('d                           
    f');

SELECT col_1 AS INPUT,
    LTRIM(RTRIM(
    REPLACE(
    REPLACE(
    REPLACE(
    REPLACE(
    REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(
        REPLACE(col_1,CHAR(10),' ')
        ,CHAR(11),' ')
        ,CHAR(12),' ')
        ,CHAR(13),' ')
        ,CHAR(14),' ')
        ,CHAR(160),' ')
        ,CHAR(13)+CHAR(10),' ')
    ,CHAR(9),' ')
    ,' ',CHAR(17)+CHAR(18))
    ,CHAR(18)+CHAR(17),'')
    ,CHAR(17)+CHAR(18),' ')
    )) AS [OUTPUT]
FROM @Tbl; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-12-07T04:37:47.567

```
SELECT TRIM(ColumnName) FROM dual; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-04-16T19:48:57.493

嗯，这取决于您使用的 SQL Server 版本。

在 SQL Server 2008 r2、2012 和 2014 中，您可以简单地使用`TRIM(CompanyName)`

[SQL Server TRIM 函数](https://msdn.microsoft.com/en-us/library/ee634558.aspx)

在其他版本中，您必须使用`set CompanyName = LTRIM(RTRIM(CompanyName))`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-10-29T11:12:43.643

例子：

```
SELECT TRIM('   Sample   '); 
```

结果：`'Sample'`

```
UPDATE TableName SET ColumnName = TRIM(ColumnName) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-10-01T04:31:09.603

要删除**Enter**：

```
Update [table_name] set
[column_name]=Replace(REPLACE([column_name],CHAR(13),''),CHAR(10),'') 
```

要删除**选项卡**：

```
Update [table_name] set
[column_name]=REPLACE([column_name],CHAR(9),'') 
```