# StackOverflow 问答 14328000-14328999

# php - 我无法从数据库中检索值

> ID：14328000
> 
> 赞同：0
> 
> 时间：2013-01-14T22:32:59.200
> 
> 标签：php, mysql, sql, database

```
$raw_results=mysql_query("SELECT resort_name FROM resorts WHERE resort_id=(SELECT resort_id FROM resort_place WHERE place_id=(SELECT place_id FROM place WHERE place='$query')) ") or die(mysql_error());
$check_num_rows=mysql_num_rows($raw_results);
$solutions = array();
while($row = mysql_fetch_assoc($raw_results)) {
$solutions[] = $row['solution'];
} 
```

这是我的代码，它会返回一条错误消息，例如

> 警告：mysql_query() [function.mysql-query]: Unable to save result set in C:\xampp\htdocs\search\news.php on line 131 子查询返回超过 1 行

谁能帮我从数据库中检索值...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:35:25.287

这将与您的多个子查询产生相同的结果。

```
SELECT  DISTINCT a.resort_name 
FROM    resorts a
        INNER JOIN resort_place b
            ON a.resort_id = b.resort_id
        INNER JOIN place c
            ON b.place_id = c.place_id
WHERE   c.place='$query' 
```

作为旁注，`SQL Injection`如果值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:36:20.763

使用 IN 运算符，如 place_id in（您的子查询在这里）

```
 $raw_results=mysql_query("SELECT resort_name FROM resorts WHERE resort_id IN 
       (SELECT resort_id FROM resort_place WHERE place_id IN 
            (SELECT place_id FROM place WHERE place='$query')
       ) 
  ") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:44:39.310

其他答案是明智的，您可以做得比嵌套查询更好。

如果你真的想`AND my_column_id = (SELECT something FROM ...)` 确保子查询只返回一行，也许可以用`LIMIT 0, 1`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T22:35:10.863

改用使用`mysqli_`or`PDO`函数的准备好的语句。您的查询可以使用显式完成`JOIN`：

```
SELECT DISTINCT resorts.resort_name
FROM resorts
JOIN resort_place ON resort_place.resort_id = resorts.resort_id
JOIN place ON place.place_id = resort_place.place_id
WHERE place.place = '$query' 
```

# rest - Azure 部署版本

> ID：14328002
> 
> 赞同：2
> 
> 时间：2013-01-14T22:33:02.810
> 
> 标签：rest, service, azure, cloud

我会尽量简化。我正在使用 windows azure cloud 来托管我们的 web 服务和数据库。并且可以通过 URL 访问这些 Web 服务：“https://server.mydomain.com”

现在我们对模型和整个 Web 服务进行了一些重大更改。这破坏了老用户的 API 接口。现在我们要在 URL 上部署最新版本：“https://server.mydomain.com/v2”，以便老用户仍然可以访问旧版本。

我搜索了 SO 和其他资源，但我找不到明确的答案如何在不弄乱旧版本的情况下部署新版本。

任何朝着正确方向的事情都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:39:25.497

在我从事的一个项目中，我们在 Web API 之上构建了一个版本控制方案。我们使用[本教程](http://seroter.wordpress.com/2012/09/25/versioning-asp-net-web-api-services-using-http-headers/)开始。我建议从那里开始。

抱歉笼统的回答，如果您发布更多细节，我会进行一些更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:09:01.533

我建议部署单独的云服务并使用“v2.server.mydomain.com”

# java - 使用 javax.print 库打印属性（托盘控制、双面打印等）

> ID：14328012
> 
> 赞同：26
> 
> 时间：2013-01-14T22:33:37.940
> 
> 标签：java, pdf, printing

一段时间以来，我一直在尝试确定一种使用**标准 Java Print 库打印具有****某些属性**的文件（特别是 PDF 文档）的方法，特别是打印到某些托盘或使用双面打印。

有很多关于如何做到这一点的文档，事实上，我已经研究并尝试了这些方法。典型的方式是这样的：

```
public static void main (String [] args) {
    try {

        PrintService[] pservices = PrintServiceLookup.lookupPrintServices(null, null);

        //Acquire Printer
        PrintService printer = null;
        for (PrintService serv: pservices) {
            System.out.println(serv.toString());
            if (serv.getName().equals("PRINTER_NAME_BLAH")) {
                printer = serv;
            }
        }

        if (printer != null) {
            System.out.println("Found!");

            //Open File
            FileInputStream fis = new FileInputStream("FILENAME_BLAH_BLAH.pdf");

            //Create Doc out of file, autosense filetype
            Doc pdfDoc = new SimpleDoc(fis, DocFlavor.INPUT_STREAM.AUTOSENSE, null);

            //Create job for printer
            DocPrintJob printJob = printer.createPrintJob();

            //Create AttributeSet
            PrintRequestAttributeSet pset = new HashPrintRequestAttributeSet();

            //Add MediaTray to AttributeSet
            pset.add(MediaTray.TOP);

            //Add Duplex Option to AttributeSet
            pset.add(Sides.DUPLEX);

            //Print using Doc and Attributes
            printJob.print(pdfDoc, pset);

            //Close File
            fis.close();

        }

    }
    catch (Throwable t) {
        t.printStackTrace();
    }
} 
```

简而言之，您执行以下操作

1.  查找打印机
2.  创建打印机作业
3.  创建一个属性集
4.  将属性添加到 AttributeSet，例如 Tray 和 Duplex
5.  使用 AttributeSet 在打印机作业上调用 print

这里的问题是，尽管有记录的方法，以及我从几个教程中发现的方法，但这种方法......**不起作用**。现在请记住，我知道这听起来不太描述，但请听我说。 **我不轻易说**...

[PrinterJob 的官方文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/print/PrinterJob.html#print%28javax.print.attribute.PrintRequestAttributeSet%29)实际上提到了 AttributeSet 在默认实现中被忽略。 [这里看到的源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/awt/print/PrinterJob.java)表明这是真的 - 属性被传入并完全忽略。

显然，您需要该类的某种扩展版本，它可能基于特定的打印机及其功能？我试图编写一些测试代码来告诉我这些功能 - 我们在办公室设置了各种各样的打印机，大小不一，简单或充满花里胡哨 - 更不用说我电脑上的几个驱动程序只是为了伪- 打印机驱动程序，无需任何硬件即可创建文档和模拟打印机。测试代码如下：

```
public static void main (String [] args) {

    PrintService[] pservices = PrintServiceLookup.lookupPrintServices(null, null);

    for (PrintService serv: pservices) {
        System.out.println(serv.toString());

        printFunctionality(serv, "Trays", MediaTray.class);
        printFunctionality(serv, "Copies", Copies.class);
        printFunctionality(serv, "Print Quality", PrintQuality.class);
        printFunctionality(serv, "Color", ColorSupported.class);
        printFunctionality(serv, "Media Size", MediaSize.class);
        printFunctionality(serv, "Accepting Jobs", PrinterIsAcceptingJobs.class);
    }
}

private static void printFunctionality(PrintService serv, String attrName, Class<? extends Attribute> attr) {
    boolean isSupported = serv.isAttributeCategorySupported(attr);
    System.out.println("    " + attrName + ": " + (isSupported ? "Y" : "N"));
} 
```

我发现的结果是，每台打印机都无一例外地返回支持“副本”，而所有其他属性都不支持。此外，无论这看起来多么难以置信，每台打印机的功能都是相同的。

不可避免的问题是多层次的：如何以注册的方式发送属性？此外，如何正确检测打印机的功能？确实，PrinterJob 类实际上是否以可用的方式扩展，或者属性总是被忽略？

我在 Internet 上找到的示例似乎向我表明，后一个问题的答案是“不，它们总是被忽略”，这对我来说似乎很荒谬（但随着我筛选数百页，它变得越来越可信）。 **这段代码是 Sun 简单设置但从未工作**到完成状态的代码吗？如果是这样，**是否有任何替代方案？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T16:28:09.583

问题在于 Java 打印 API 是世界之间的桥梁。打印机制造商不发布 JVM 驱动程序。他们发布了适用于 Windows、Macintosh 的驱动程序，并且也许有人拥有适用于一个或多个 *nix 平台的给定打印机的驱动程序。

随之而来的是一些在某个主机系统上的 JVM 中运行的 Java 代码。当您开始查询打印机功能时，您不是在与打印机对话——您是在与 java.awt.print 中的一个桥接类对话，该桥接类连接到 JVM，它连接到主机操作系统，连接到任何特定的为给定的打印机安装了驱动程序。所以有几个地方可能会崩溃......您所在的特定JVM可能会也可能不会完全实现用于查询打印机功能的API，更不用说为给定作业传递这些参数了。

几点建议：

1.  研究 javax.print 类作为 java.awt.print 的替代品——我从那里获得了更多的打印运气。
2.  尝试为您的打印机使用替代打印驱动程序——您可以定义到给定打印机的多个命名连接，每个连接都有不同的驱动程序。如果您有制造商提供的驱动程序，请尝试更通用的驱动程序，如果您有通用驱动程序，请尝试安装更具体的驱动程序。
3.  在您的平台的替代 JVM 实现下运行您的代码

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-18T21:48:42.597

因此，我们不可避免地找到了一种方法，可以使用不同的设置打印到不同的托盘，但不是直接打印。我们**发现通过 printJob.print 方法发送属性是不可能**的，而且很多都没有改变。但是，我们能够设置打印作业的名称，然后**使用低级 Perl 脚本拦截打印作业**，解析名称，并在那里设置纸盘和双面打印设置。这是一个极端的黑客，但它有效。**Java 打印机属性不起作用**仍然是事实，如果您想设置它们，您将**需要找到另一种方法。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T18:40:23.947

我们对打印 PDF 有类似的要求，希望将一些页面发送到特定托盘，并且还希望将文档装订。我们使用Java 代码+ghost 脚本组合首先将PDF 转换为ghost 脚本，然后在ghost 脚本文件中添加PJL（打印作业语言）命令来选择托盘并装订文档。然后将编辑后的幽灵脚本文件发送到打印机。

这是用Java编写的完整示例

[http://reddymails.blogspot.com/2014/07/how-to-print-documents-using-java-how.html](http://reddymails.blogspot.com/2014/07/how-to-print-documents-using-java-how.html)

-内存

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-05T20:50:26.760

我发现打印机托盘的诀窍是遍历`Media.class`using `getSupportedAttributeValues(...)`，匹配人类可读的名称，然后选择该特定值。在具有多种托盘配置的 Windows、MacOS 上进行了测试。

```
String tray = "1";

// Handle human-readable names, see PRINTER_TRAY_ALIASES usage below for context.  Adjust as needed.
List<String> PRINTER_TRAY_ALIASES = Arrays.asList("", "Tray ", "Paper Cassette ");

// Get default printer
PrintService printService = PrintServiceLookup.lookupDefaultPrintService();

// Attributes to be provided at print time
PrintRequestAttributeSet pset = new HashPrintRequestAttributeSet();

Media[] supported = printService.getSupportedAttributeValues(Media.class, null, null);
for(Media m : supported) {           
    for(String pta : PRINTER_TRAY_ALIASES) {
        // Matches "1", "Tray 1", or "Paper Cassette 1"
        if (m.toString().trim().equalsIgnoreCase(pta + tray)) {
            attributes.add(m);
            break;
        }
    }
}

// Print, etc
// printJob.print(pdfDoc, pset); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-06T18:56:44.123

这是它在 javafx 中的样子 托盘可能会有所不同，它还会打印出所有可用的托盘，只需更改托盘名称即可

```
private void printImage(Node node) {
    PrinterJob job = PrinterJob.createPrinterJob();
    if (job != null) {
        JobSettings js = job.getJobSettings();
        PaperSource papersource = js.getPaperSource();
        System.out.println("PaperSource=" + papersource);
        PrinterAttributes pa = printer.getPrinterAttributes();
        Set<PaperSource> s = pa.getSupportedPaperSources();
        System.out.println("# of papersources=" + s.size());
        if (s != null) {
            for (PaperSource newPaperSource : s) {
                System.out.println("newpapersource= " + newPaperSource);
                //Here is where you would put the tray name that is appropriate
                //in the contains section
                if(newPaperSource.toString().contains("Tray 2"))
                    js.setPaperSource(newPaperSource);
            }
        }
        job.getJobSettings().setJobName("Whatever");
        ObjectProperty<PaperSource> sources = job.getJobSettings().paperSourceProperty();
        System.out.println(sources.toString());
        boolean success = job.printPage(node);
        if (success) {
            System.out.println("PRINTING FINISHED");
            job.endJob();
            //Stage mainStage = (Stage) root.getScene().getWindow();
            //mainStage.close();
        }
    }
} 
```

这是我的输出：

```
PaperSource=Paper source : Automatic
# of papersources=6
newpapersource= Paper source :
newpapersource= Paper source :  Manual Feed in Tray 1
newpapersource= Paper source :  Printer auto select
newpapersource= Paper source :  Tray 1
newpapersource= Paper source :  Tray 2
newpapersource= Paper source : Form-Source
ObjectProperty [bean:  Collation = UNCOLLATED
 Copies = 1
 Sides = ONE_SIDED
 JobName = Whatever
 Page ranges = null
 Print color = COLOR
 Print quality = NORMAL
 Print resolution = Feed res=600dpi. Cross Feed res=600dpi.
 Paper source = Paper source :  Tray 2
 Page layout = Paper=Paper: Letter size=8.5x11.0 INCH Orient=PORTRAIT leftMargin=54.0 rightMargin=54.0 topMargin=54.0 bottomMargin=54.0, name: paperSource, value: Paper source :  Tray 2]
PRINTING FINISHED 
```

# c# - C# 套接字连接问题

> ID：14328021
> 
> 赞同：0
> 
> 时间：2013-01-14T22:34:30.220
> 
> 标签：c#, sockets, connection, disconnect

好的，所以我的代码中有一个导致问题的套接字连接。它连接然后很快断开连接。它在“connections++;”之后断开连接 线。有任何想法吗？

根据以下要求提供此表格的所有代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;

namespace Middleware
{
public partial class Middleware : Form
{

    //variables
    private Socket server;
    private Socket remoteclient;
    private Socket clientreturn;
    private Socket serversync;
    private byte[] data = new byte[1024];
    private byte[] datars = new byte[1024];
    private int connections = 0;

    public Middleware()
    {
        InitializeComponent();
        Control.CheckForIllegalCrossThreadCalls = false;
    }

    private void Middleware_Load(object sender, EventArgs e)
    {

    }

    void OnConnectedRemote(IAsyncResult result)
    {
        try
        {
            remoteclient.EndConnect(result);
        }
        catch
        {
            remoteclient.Close();
        }
    }

    void OnConnected(IAsyncResult result)
    {
        Socket client = server.EndAccept(result);

        connections++;
        server.BeginAccept(new AsyncCallback(OnConnected), null);
        try
        {
            txtStatus.Text = "" + connections;
            byte[] message = Encoding.ASCII.GetBytes("Welcome to my server");
            client.BeginSend(message, 0, message.Length, SocketFlags.None, new AsyncCallback(OnDataSent), client);
        }
        catch
        {
            client.Close();
        }
    }

    void OnConnectedSync(IAsyncResult result)
    {
        Socket sync = serversync.EndAccept(result);

        connections++;
        //serversync.BeginAccept(new AsyncCallback(OnConnectedSync), null);
        try
        {
            txtStatus.Text = "" + connections;
            byte[] message = Encoding.ASCII.GetBytes("Connected to Middleware");
            sync.BeginSend(message, 0, message.Length, SocketFlags.None, new AsyncCallback(OnDataSentSync), sync);
        }
        catch
        {
            sync.Close();
        }
    }

    void OnDataSent(IAsyncResult result)
    {

        Socket client = (Socket)result.AsyncState;

        try
        {

            //end send and begin receive from client
            int sent = client.EndSend(result);
            client.BeginReceive(data, 0, data.Length, SocketFlags.None, new AsyncCallback(OnDataReceived), client);

        }
        catch (SocketException)
        {

            //close client
            client.Close();

        }
    }

    void OnDataSentSync(IAsyncResult result)
    {

        Socket sync = (Socket)result.AsyncState;

        try
        {

            //end send and begin receive from client
            int sent = sync.EndSend(result);

            sync.BeginReceive(data, 0, data.Length, SocketFlags.None, new AsyncCallback(OnDataReceivedSync), sync);

        }
        catch (SocketException)
        {

            //close client
            sync.Close();

        }
    }

    void OnDataReceivedSync(IAsyncResult result)
    {

        Socket sync = (Socket)result.AsyncState;
        //clientreturn = (Socket)result.AsyncState;

    }

    void OnDataSentWaiting(IAsyncResult result)
    {

        Socket sync = (Socket)result.AsyncState;

        try
        {

            //end send and begin receive from client
            int sent = sync.EndSend(result);
            //sync.BeginReceive(data, 0, data.Length, SocketFlags.None, new AsyncCallback(OnDataReceived), sync);

        }
        catch (SocketException)
        {

            //close client
            sync.Close();

        }
    }

    void OnDataReceived(IAsyncResult result)
    {

        Socket client = (Socket)result.AsyncState;
        clientreturn = (Socket)result.AsyncState;

        try
        {

            //if nothing is received then close connection
            //otherwise get message and add to list box
            //create newsocket, bind and listen to create server connection
            //begin accept
            int receive;
            receive = client.EndReceive(result);
            //string port = (((IPEndPoint)client.RemoteEndPoint).Port.ToString ());

            if (receive == 0)
            {
                client.Close();
                return;
            }
            else
            {

                string message = Encoding.ASCII.GetString(data, 0, receive);
                lstAll.Items.Add(message);
                txtSent.Text = message;
                byte[] echomessage = Encoding.ASCII.GetBytes(message);

                bool check = remoteclient.Poll(1000, SelectMode.SelectRead);
                bool avail = (remoteclient.Available == 0);
                if (check & avail)
                {

                    btnConnect.Enabled = true;
                    btnDisconnect.Enabled = false;
                    MessageWait(message);
                    //serversync.BeginSend(echomessage, 0, echomessage.Length, SocketFlags.None, new AsyncCallback(OnDataSentWaiting), serversync);
                    //client.BeginReceive(data, 0, data.Length, SocketFlags.None, new AsyncCallback(OnDataReceived), client);

                }
                else
                {

                    client.BeginReceive(data, 0, data.Length, SocketFlags.None, new AsyncCallback(OnDataReceived), client);
                    remoteclient.BeginSend(echomessage, 0, echomessage.Length, SocketFlags.None, new AsyncCallback(OnRemoteDataSent), remoteclient);

                }
            }
        }
        catch (SocketException)
        {
            //close client
            client.Close();
        }

    }

    private void MessageWait(string message)
    {
        byte[] echomessage = Encoding.ASCII.GetBytes(message);
        serversync.BeginSend(echomessage, 0, echomessage.Length, SocketFlags.None, new AsyncCallback(OnDataSentSync), null);
    }

    void OnRemoteDataSent(IAsyncResult result)
    {
        try
        {

            int sent = remoteclient.EndSend(result);
            remoteclient.BeginReceive(data, 0, data.Length, SocketFlags.None, new AsyncCallback(OnRemoteDataReceived), null);

        }
        catch (SocketException)
        {

            //close server connection
            remoteclient.Close();

        }

    }

    void OnRemoteDataReceived(IAsyncResult result)
    {
        try
        {

            int receive = remoteclient.EndReceive(result);
            string message = Encoding.ASCII.GetString(data, 0, receive);
            txtReceived.Text = message + " from Middle";
            datars = Encoding.ASCII.GetBytes(txtReceived.Text);
            clientreturn.BeginSend(datars, 0, datars.Length, SocketFlags.None, new AsyncCallback(OnDataSentBack), clientreturn);

        }
        catch (SocketException)
        {

            //close server
            clientreturn.Close();

        }
    }

    void OnDataSentBack(IAsyncResult result)
    {

        Socket client = (Socket)result.AsyncState;

        try
        {

            int sent = client.EndSend(result);

        }
        catch (SocketException)
        {
            //closeserver
            client.Close();
        }

    }

    private void btnConnect_Click(object sender, EventArgs e)
    {
        try
        {

            btnConnect.Enabled = false;
            remoteclient = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
            IPEndPoint remoteEndPoint = new IPEndPoint(IPAddress.Parse(txtIP.Text), 2000);
            remoteclient.BeginConnect(remoteEndPoint, new AsyncCallback(OnConnectedRemote), null);
        }
        catch
        {
            remoteclient.Close();
        }
    }

    private void btnStart_Click(object sender, EventArgs e)
    {
        int port;
        port = int.Parse(txtPort.Text);
        btnStart.Enabled = false;

        server = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        IPEndPoint localEP = new IPEndPoint(0, port);
        server.Bind(localEP);
        server.Listen(4);
        server.BeginAccept(new AsyncCallback(OnConnected), null);

        txtStatus.Text = "Waiting for client...";
    }

    private void btnSyncC_Click(object sender, EventArgs e)
    {
        int port;
        port = int.Parse(txtPort.Text);
        btnStart.Enabled = false;

        serversync = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        IPEndPoint localEP2 = new IPEndPoint(0, port);
        serversync.Bind(localEP2);
        serversync.Listen(1);
        serversync.BeginAccept(new AsyncCallback(OnConnectedSync), null);

        txtStatus.Text = "Waiting for sync client...";
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:40:51.820

我敢打赌，这个`txtStatus`对象有问题，你实际上得到了一个 NullReferenceException，它被捕获、忽略，并导致套接字立即关闭。

# facebook - 带有类似按钮的默认 wordpress 库

> ID：14328024
> 
> 赞同：0
> 
> 时间：2013-01-14T22:34:51.410
> 
> 标签：facebook, wordpress, gallery

想要在带有默认 wordpress 画廊的灯箱叠加层上添加点赞和/或分享按钮。我知道可以（或多或少）使用 Nextgen 完成，但希望避免重做网站上的所有画廊。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:49:24.323

您将需要编辑您的灯箱模板文件。您是在使用灯箱插件还是主题中包含它？无论哪种方式，您都需要找到该文件并在那里添加您的喜欢按钮。

# c# - 在 C# 中访问名称时使用 int

> ID：14328025
> 
> 赞同：0
> 
> 时间：2013-01-14T22:34:52.040
> 
> 标签：c#, windows-phone-8, var

我目前正在使用 c# 构建一个 windows phone 8 应用程序，我想知道如何实现这一点：

```
for (int i = 1; i <= 18; i++)
{
    _(i)Score.Text = "whatever here";
} 
```

运行时应该是这样的：

```
_1Score.Text = "whatever here";
_2Score.Text = "whatever here";
_3Score.Text = "whatever here";
etc. 
```

我怎么能做到这一点，因为只是推杆`_(i)Score`不起作用。

编辑：我正在做的是制作一个有表格概览的记分卡应用程序。我将每一个命名为 1Socre、2Score、3Score 等，我只想更新他们所说的内容。它们都是文本框，我只是替换里面的文本。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:36:46.723

这是实现您正在做的事情的最直接方式：

```
var name = string.Format("_{0}Score", i);
this.Controls[name].Text = "..."; 
```

了解类型（基于@sa_ddam213 的评论）：

```
foreach(var textBox in Children.OfType<TextBox>().Where(txt => txt.Name.EndsWith("Score")))
{
    textBox.Text = "...";
} 
```

# algorithm - 二维阴影算法

> ID：14328030
> 
> 赞同：3
> 
> 时间：2013-01-14T22:35:17.220
> 
> 标签：algorithm, flash, 2d, shadow

我正计划制作一款利用光（和阴影）作为游戏一部分的游戏，但是我想不出一种有效的算法来实现它们，我确信有一个优雅的解决方案。

![我想做什么的插图](../Images/646a0b110f11e59628dd32d7486e0894.png)

白色区域被光直接照亮，浅灰色被直接照亮的墙壁照亮，深灰色为黑暗。

我希望以有效的方式找到这些区域。（实时，灯光可以移动）

虽然不现实，但这是我能想到的最简单的问题，任何其他包括直射光和反射光的实现都是受欢迎的。

...

我的第一次尝试是从灯光到屏幕周边画线，然后找到它们相交的第一面墙。但是对墙壁的每个照明部分重复此算法以标记“环境”光是不可行的。

另请注意，游戏是在 Flash 中的，所以我认为我不能使用 gpu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:22:29.043

受瑞恩回答的启发。

在 2d 网格中，将屏幕的每个点标记为点亮。然后为屏幕上的每一面墙（按照靠近点的顺序）在它们后面画一个阴影，如下所示：![指向墙壁阴影](../Images/a1990d2fcb4ab30a7a73dc063d1eb648.png)在去下一堵墙之前，首先检查它的哪些部分被点亮，哪些部分没有，以免两次绘制阴影. 标记为下一步绘制阴影的所有墙壁，因为这些是可能被点亮的墙壁。（我们应该在下一部分之前再次检查）

对于每个点亮的线段（墙），首先检查是否有任何墙与线段相交。对于每个交叉点，在交叉点将点亮的段分成 2 段。![线性光到墙的交叉点](../Images/b95f6864c378fd15d30c8bab80f9a64e.png)

对于每条线段的端点，在一个临时数组中重复第一部分，最后将所有点亮的点添加到最终数组中。

第一部分应该遍历屏幕上的所有点和墙上的所有点一次。所以 O（面积+墙的长度），并且取决于场景的复杂性（墙的数量和交叉点，第二部分应该应用第一部分大约 20 次。

这可能会实时工作，但请确保在灯光不移动时存储照明区域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:06:34.627

你不需要画所有的光线，只需要画重要的。例如，一个点光源和一个线，你只需要解决两个交叉点。

对于反射照明，您将从强度为 n 的点光源开始，然后每次此光与墙壁相交时，您将墙壁分成更小的部分，并在照明部分上添加强度为 n-1 的线性光源。您可以根据需要多次执行此操作。

# c++ - 在 std::common_type 的实现中发现这种情况有什么意义？

> ID：14328034
> 
> 赞同：3
> 
> 时间：2013-01-14T22:35:33.897
> 
> 标签：c++

以下是 的专业之一[`std::common_type`](http://en.cppreference.com/w/cpp/types/common_type)。

```
template <class T, class U>
struct common_type<T, U> {
    typedef decltype(true ? declval<T>() : declval<U>()) type;
}; 
```

我的想法是条件语句是不必要的。如果它正在检查`true`，表达式是否总是会解析为`declval<T>()`？如果是这样，返回的 typedef 如何证明定义的合理性......

> “确定所有类型中的通用类型`T...`，即所有类型都`T...`可以隐式转换为的类型。”

有人可以解释条件语句吗？检查`true`是多余的，并且条件*总是*会解析到第一个操作数，这是否准确？如果是这样，返回的类型如何满足定义？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:36:24.383

三元条件表达式的类型*是*两种参数类型的共同类型。因此，三元表达式可以用作通用类型的*定义*。

请注意，`decltype`它不会评估其参数，并且条件是真还是假是无关紧要的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T22:42:29.910

三元运算符的类型不仅仅是编译器知道它必须采用的分支的类型。如果有这样的类型，它就是两个分支共有的类型。如果没有这种类型，则编译失败。三元运算符是唯一具有将其转换为表达式的通用类型而不是两个值的表达式结果的属性的运算符。也就是说，三元运算符只是被滥用来获取通用类型。然而，条件并不重要。

标准中的相关部分是 5.16 [expr.cond] 第 3 段：

> 否则，如果第二个和第三个操作数具有不同的类型并且具有（可能是 cv 限定的）类类型，或者如果两者都是相同值类别和相同类型（除了 cv 限定）的 glvalue，则尝试转换每个这些操作数的类型到另一个的类型。

段落后面是如何提供通用类型的规则。*否则*是指第二个或第三个表达式是 throw *-expression*或第二个或第三个表达式中的一个或两个具有 type 的情况`void`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T22:59:02.640

其他解释是正确的，但我认为一个简单的示例程序将展示三元运算符如何更好地工作：

```
int main() {
    std::cout << demangle(typeid(true ? 1 : 3.14).name()) << std::endl;
} 
```

[尽管](http://liveworkspace.org/code/4CT82W%245)第二个操作数`double`是`int`. 这是因为三元运算符的结果是第二个和第三个操作数之间的*公共类型*（在这种情况下是`int`and `double`）。当您申请`decltype`该运营商时，这就是您所得到的。

# jquery - 简单的 Fancybox 不工作，按照发球台的说明进行操作。请看我的代码

> ID：14328038
> 
> 赞同：0
> 
> 时间：2013-01-14T22:35:41.230
> 
> 标签：jquery, html, fancybox

我无法让 Fancybox 工作。我已经阅读了 fancybox 网站上的说明一百万次，但它根本不起作用。我的图像加载就像没有fancybox一样。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js"></script>
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css" media="screen" />
  <script type="text/javascript">
    $(document).ready(function() {
    $(".fancybox").fancybox();
    });
  </script>
</head>

<body>
    <a href="img/test.jpg"><img src="img/test.jpg" /></a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:58:29.237

检查 fancybox href 属性和 src 属性它们指向 root 所以你需要删除第一个斜杠 /

```
<script type="text/javascript" src="fancybox/jquery.fancybox.pack.js"></script>
<link rel="stylesheet" href="fancybox/jquery.fancybox.css" type="text/css" media="screen" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:59:02.077

将 class="fancybox" 添加到*a*标签。像这样：

```
<a href="img/test.jpg" class="fancybox"><img src="img/test.jpg" /></a> 
```

您正在使用*$('.fancybox')*，这使 jQuery 寻找 fancybox 类。

# java - Java中数组的toString方法如何？

> ID：14328044
> 
> 赞同：-2
> 
> 时间：2013-01-14T22:36:14.053
> 
> 标签：java, string, tostring

假设你有一个这样的字符串数组：

```
String[] someArray = new String[] {"foo", "bar", "bas"}; 
```

现在我可以让你得到一个 toString 表示：

```
System.out.println(Arrays.toString(someArray)); 
```

但是返回相同字符串表示的自定义 toString 方法如何呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:41:30.783

`Arrays.toString(Object)`您可以通过谷歌搜索 java 源代码来查看源代码。

我在这里找到了一些：

[某些 JDK 中 Arrays.java 的 Java 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Arrays.java#Arrays.toString%28java.lang.Object%5B%5D%29)

去那里阅读 toString 方法的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:38:10.020

如果您传递`Arrays.toString()`一个自定义对象数组，它将调用`toString()`这些对象的方法。因此，如果您在对象上实现了 toString 方法，`Arrays.toString()`则会将其拾取

# android - 使用 Android 意图启动 Spotify Radio

> ID：14328048
> 
> 赞同：2
> 
> 时间：2013-01-14T22:36:24.670
> 
> 标签：android, spotify

我知道你可以使用以下方法开始一首特定的歌曲：

```
String uri = "spotify:track:308p4aUi2JKGC0i750B2JM";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
startActivity(intent); 
```

而且我知道您可以通过以下搜索在桌面应用程序上启动广播频道：

```
spotify:radio:track:308p4aUi2JKGC0i750B2JM 
```

但是，当我尝试通过执行类似操作来启动收音机时：

```
String uri = "spotify:radio:track:308p4aUi2JKGC0i750B2JM";
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
startActivity(intent); 
```

没发生什么事...

有谁知道如何做到这一点？甚至可能吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T15:31:31.850

*免责声明：我为 Spotify 工作*

在检查 Android 应用程序的源代码后，似乎启动收音机是出于内部意图。换句话说，通过一个未发布的 URI 方案，该方案是未发布的，因为它可能会在版本之间发生变化。

我不确定这是否是为移动客户端计划的功能，但我肯定会在内部询问它。我会鼓励在社区论坛上发表一个帖子（他们确实会被阅读）来推动它。

**更新**：显然使用内部 URI 方案的原因是，当为 Android 应用程序开发无线电功能时，URI 方案还没有完全确定。团队似乎有兴趣修复这种行为，我已经提交了一张 JIRA 票以提醒他们。

# c# - 在存储库类中使用 Membership 类

> ID：14328049
> 
> 赞同：0
> 
> 时间：2013-01-14T22:36:24.613
> 
> 标签：c#, asp.net-mvc, repository-pattern

我创建一个这样的存储库类：

```
public class ProfileRepository : IProfileRepository
    {

        private Guid _userIdentifier = (Guid)Membership.GetUser().ProviderUserKey;
        ....
    } 
```

每当我没有登录到我的站点并尝试导航到过滤页面时，它都会在我的存储库类上`[Authorize]`抛出一个错误 ( )`Object reference not set to an instance of an object.``private Guid _userIdentifier = (Guid)Membership.GetUser().ProviderUserKey;`

filter 属性没有捕捉到用户未通过身份验证的事实。能够在存储库类中获取当前登录用户的最佳方法是什么，以便可以`ProviderUserKey`在整个存储库类中使用它？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-15T03:20:34.697

请控制反转。

寻找用户标识符不是存储库的责任。无论如何，您实际上是在为声明空间中的私有成员赋值。我知道 C# 允许您这样做，但请检查此代码是如何在后台编译的，并养成以这种方式编码的习惯。最后，声明应该只是声明。

为了进一步帮助您，我需要查看您的调用代码。此外，您没有提及您的会员提供商的类型。

# php - PHP 锁定事务

> ID：14328050
> 
> 赞同：2
> 
> 时间：2013-01-14T22:36:31.963
> 
> 标签：php, locking

我有一个 PHP 拍卖网站，我希望立即支付客户出价的任何金额（我将在以后退还所有未中标的出价）。假设我的商品目前是 10 美元，我有客户 A 和 B。

如果 A 出价 15 美元，那么我要求 A 立即输入他的信用卡信息并从卡中收取 15 美元。在信用卡处理完成之前，投标不算作投标。

假设当 A 输入他的信用卡信息时，B 也出价。A 先输入完信用卡信息，然后点击提交。如果 B 的出价低于或等于 15，它将提示 B 类似“抱歉有人在您输入信用卡信息时提出了更高的出价”。如果 B 的出价大于 15，那么它当然会从 B 的卡中收取该金额，并且最新价格是 B 的出价。

现在我的问题是，在我的网站发送向 A 的卡收取 15 美元的费用（比方说 Paypal）的请求期间，B 应该无法同时付款（否则我们将向双方的卡收取费用）。B 必须等到 A 的付款完成后，我的服务器才能处理 B 的“提交付款”请求。当我的服务器确实处理请求时，它应该检查 B 的出价是高于还是低于提交的最新付款（A 支付 15 美元）。

所以基本上我想在 A 的付款发送到 Paypal 并等待 Paypal 的响应时为所有其他用户“锁定”“提交付款”功能。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:43:14.260

为此使用您的数据库。对于每个出价，创建一行；使用包含例如 1=输入的投标金额的“状态”列；2=CC 信息输入/验证；3=接受投标。授权充值后（即状态2和状态3之间），查询投标金额是否还足够，然后才向CC充值（同时更新状态为3。）

如果由于其他人完成了更高的出价而导致出价被取代，则拒绝该出价。

# ios - NSUserDefaults 返回之前的结果

> ID：14328057
> 
> 赞同：1
> 
> 时间：2013-01-14T22:36:57.620
> 
> 标签：ios, objective-c, xcode, nsuserdefaults

我有一个 tableView，我可以在其中从列表中选择一艘船，当我点击它时，我希望信息在另一个屏幕上弹出。我目前这样做的方式是：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath;
{

cargoShips* ship=[boatsForOwner objectAtIndex:indexPath.row];
UITableViewCell *cell = [self.boatsTableView cellForRowAtIndexPath:indexPath];

[self performSegueWithIdentifier:@"boatInfoSegue" sender:cell];

NSString *nameString = ship.name;
NSString *sizeString = ship.size;

NSUserDefaults *shipName = [NSUserDefaults standardUserDefaults];
[shipName setObject:nameString forKey:@"globalName"];
[shipName synchronize];
NSUserDefaults *shipSize = [NSUserDefaults standardUserDefaults];
[shipSize setObject:sizeString forKey:@"globalSize"];
[shipSize synchronize];
[tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

并将其加载回文本（在另一个文件中）

```
 NSString *getName = [[NSUserDefaults standardUserDefaults]
                     objectForKey:@"globalName"];
NSString *getSize = [[NSUserDefaults standardUserDefaults]
                     objectForKey:@"globalSize"];

shipNameText.text = getName;
shipSizeText.text = getSize; 
```

现在，这很好用，除了它不返回我选择用于获取 infoView 的单元格，而是返回之前选择的对象。因此，如果我选择列表中的第一个对象，它将返回 null，我选择的下一个项目将获得我应该为第一个对象获得的结果，依此类推。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:49:32.107

`NSUserDefaults`是用于保存设置的工具，而不是用于传输对象的工具。如果我是你，我是这样做的：

```
#pragma mark - Segue
- (void)prepareForSegue:(UIStoryboardSegue *)segue
                 sender:(id)sender {
    if ([segue.identifier isEqualToString:@"boatInfoSegue"]) {

        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        CargoShip *ship = boatsForOwner[indexPath.row];

        BoatViewController *vc = (BoatViewController *)segue.destinationViewController;
        vc.ship = ship;      
    }
} 
```

类名应该大写，这就是我写的原因`CargoShip`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:46:16.763

从我在你的代码中可以看到。您的问题是您首先执行序列，然后更新`NSUserDefaults`将这一行移动`[self performSegueWithIdentifier:@"boatInfoSegue" sender:cell];`到方法末尾的值。这应该使它工作，但你需要重构你的代码。

# c - 将 c 函数移植到 NASM

> ID：14328060
> 
> 赞同：0
> 
> 时间：2013-01-14T22:37:00.667
> 
> 标签：c, x86, nasm

我想将此 c++ 函数移植到 NASM。

```
DWORD WINAPI Generic(LPVOID lpParameter) {
    __asm {
        mov eax, [lpParameter]
        call eax
        push 0
        call ExitThread
    }
    return 0;
} 
```

我在理解 lpParameter 如何在这里工作时遇到了一些问题，当我在 NASM 上编译它时，我遇到了错误。

这是我当前的代码：

```
BITS 32
global _start

_start:
mov eax, [lpParameter]
call eax
push 0
call exitfunk

exitfunk:
mov ebx, 0x0A2A1DE0
push 0x9DBD95A6
call ebp
cmp al, byte 6
jl short goodbye
cmp bl, 0xE0
jne short goodbye
mov ebx, 0x6F721347
goodbye:
push byte 0
push ebx
call ebp 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:58:02.600

IIRC，NASM 不支持命名函数参数，因此您必须手动从寄存器或堆栈中提取参数。AFAIR，所有 Win32 API 函数都需要堆栈上的参数，所以你应该替换这个

```
mov eax, [lpParameter] 
```

有了这个

```
mov eax, [esp+4] 
```

# java - Java：在无头服务器上运行 Applet

> ID：14328061
> 
> 赞同：4
> 
> 时间：2013-01-14T22:37:02.387
> 
> 标签：java, applet, awt, headless

我的问题很简单。假设这是我的整个代码库，我无法更改它：

```
import java.awt.*;

public class Example1b extends java.applet.Applet
{
   public static void main(String [] args)
   {
      Frame f = new Frame("Example 1b");

      Example1b ex = new Example1b();

      f.add("Center", ex);

      f.pack();
      f.show();
   }
} 
```

有什么技巧可以让它在没有显示的 Web 服务器上运行吗？我知道 java.applet.Applet 不能在无头模式下工作，所以我可以存根 awt 类，或者做一些其他的诡计吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:45:54.437

在`Applet`客户端的浏览器、applet 查看器或 IDE 中运行。[这里](https://stackoverflow.com/a/13985919/230513)提到了服务器上无头模式的一些替代方案，包括 JWS、VNC 和 Xvfb。

# ios - iOS 上的自定义键盘不会触发“编辑更改”事件

> ID：14328068
> 
> 赞同：1
> 
> 时间：2013-01-14T22:37:31.290
> 
> 标签：ios, objective-c, events, editing

我创建了一个可以正常工作的自定义键盘。它会更改 textField 中的值，但不会触发 Sent 事件“Editing Changed”。如果我使用计算机键盘或常规 IOS 键盘，则会触发事件并调用分配给它的函数。

因此，textField 数据已更改，但它不会将其识别为“编辑更改”。方法 textField:shouldChangeCharactersInRange:replacementString: 也没有被调用。

任何想法？

# pool - 产生比 gevent 池中更多的线程

> ID：14328069
> 
> 赞同：3
> 
> 时间：2013-01-14T22:37:36.563
> 
> 标签：pool, gevent, spawn

据我了解，gevent 中的池的想法是在任何时候将并发请求的总数限制为数据库或 API 或类似的。

假设我有这样的代码，其中我产生的绿叶比我在以下空间中的空间还多`Pool`：

```
import gevent.pool

pool = gevent.pool.Pool(50)
jobs = []
for number in xrange(300):
    jobs.append(pool.spawn(do_something, number))

total_result = [x.get() for x in jobs] 
```

尝试产生第 51 个请求时的实际行为是什么？第 51 个请求何时处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T15:49:28.793

pool 类使用信号量来计算活动的 greenlets，`size`在构造函数中使用 count 进行初始化：

```
class Pool(Group):

    def __init__(self, size=None, greenlet_class=None):
        if size is not None and size < 1:
            raise ValueError('Invalid size for pool (positive integer or None required): %r' % (size, ))
        Group.__init__(self)
        self.size = size
        if greenlet_class is not None:
            self.greenlet_class = greenlet_class
        if size is None:
            self._semaphore = DummySemaphore()
        else:
            self._semaphore = Semaphore(size) 
```

每次`spawn()`被调用时，它都会尝试获取信号量：

```
 def spawn(self, *args, **kwargs):
        self._semaphore.acquire()
        try:
            greenlet = self.greenlet_class.spawn(*args, **kwargs)
            self.add(greenlet)
        except:
            self._semaphore.release()
            raise
        return greenlet 
```

如果池已满，则被调用的 greenlet 将等待`_semaphore.acquire()`待命。每当任何 greenlets 结束执行时，就会释放信号量：

```
 def discard(self, greenlet):
       Group.discard(self, greenlet)
       self._semaphore.release() 
```

So in your case, I'd expect the 51st request to be handled (or started, to be precise) as soon as any of the first 50 requests is done.

# wsdl - 将版本添加到 WSDL

> ID：14328081
> 
> 赞同：3
> 
> 时间：2013-01-14T22:38:17.603
> 
> 标签：wsdl

这个问题看起来很简单，但我找不到合适的位置在 WSDL 文档中设置其定义的版本。

目标是能够很容易地看到它什么时候过时，我将来什么时候更新它。

我要把它设置为1.0。如果将来我向它添加一个新操作，我将它设置为 1.1。然后，如果有人拥有 1.0 版本，很容易看到它缺少该操作定义并请求更新它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T07:39:04.670

首先要意识到的是，服务的新版本可以被视为新服务。相似但不同。然后问题变为“如果服务相似，如何最大限度地减少重复”。

至于版本控制，您可以使用名称空间声明（例如`targetNamespace="mynamespace/1.0"`）或`<version>1.0</version>`在（或`version="1.0"`属性上）用于请求/响应消息的类型的根节点中的标记）。

使用命名空间很可能意味着一种实现只能服务于一个版本的服务。如果您希望某个实现服务于版本 1.0-1.3 和另一个 1.3+，那么您可能会使用该`<version/>`方法（或`@version`），因为在这种情况下只有一个命名空间。然后，实现可以在内部根据 的值决定是处理还是拒绝`<version/>`。

在更加混合的服务环境中，您可以使用该`<version/>`方法创建一个代理实现，该实现中继到使用该`targetNamespace`方法的服务。最好还是使用 UDDI，如果您有一个可以使用的话。

请考虑您的更改的向后兼容性。正如您所建议的，添加操作是完全向后兼容的。如果你有一个 1.0 版本的客户端 X，并向你的服务器（现在是 1.1）添加一个操作，X 仍然可以调用服务器，因为 X 知道的所有操作仍然可用。（前提是您没有更改命名空间以反映（使用`<version/>`.）的版本。接口的（不存在）向后兼容性通常反映在更改的主要版本号（例如 1.1 -> 2.0）中，这可能会导致您意识到您可以对命名空间进行重大更改，并使用`<version/>`标记进行次要更改。

玩得开心，这是有趣的事情！

# r - 更新 MongoDB 中的多个文档 (rmongodb)

> ID：14328089
> 
> 赞同：1
> 
> 时间：2013-01-14T22:38:40.510
> 
> 标签：r, mongodb, crud, rmongodb, database

我偶然发现了一些关于函数处理更新（`mongo.update()`）的问题。

## 免责声明

由于我仍在熟悉[MongoDB](http://www.mongodb.org/)和[rmongodb](http://cran.r-project.org/web/packages/rmongodb/index.html)包，所以插图中的问题很可能是由于我缺乏知识;-)

## 准备工作

**确保加载包**

```
pkg <- "rmongodb"
lib <- file.path(R.home(), "library")
if (!suppressWarnings(require(pkg, lib.loc=lib, character.only=TRUE))) {
    install.packages(pkg, lib=lib)
    require(pkg, lib.loc=lib, character.only=TRUE)
} 
```

**全局变量**

```
db      <- "__test"
ns.0    <- "user"
ns      <- paste(db, ns.0, sep=".")
con     <- mongo.create(db=db) 
```

## 创建数据库的初始状态

**确保空数据库**

```
mongo.remove(mongo=con, ns=ns, 
    criteria=mongo.bson.from.list(lst=list(namefirst="John"))) 
```

**插入文档**

```
fields      <- list(namefirst="John", namelast="Doe")
b           <- mongo.bson.from.list(lst=fields)
mongo.insert(mongo=con, ns=ns, b=b)
if (is.null(mongo.find.one(mong=con, ns=ns, query=b))) {
    stop("Something went wrong")
} 
```

**更新/更新文档**

```
criteria    <- list(namefirst="John", namelast="Smith")
fields      <- list(namefirst="John", namelast="Smith", age=30)
b           <- mongo.bson.from.list(lst=fields)
crit        <- mongo.bson.from.list(lst=criteria)
mongo.update(mongo=con, ns=ns, criteria=crit, objNew=b, 
    flags=mongo.update.upsert)
if (is.null(mongo.find.one(mong=con, ns=ns, query=b))) {
    stop("Something went wrong")
} 
```

**列出可用的文档**

```
criteria    <- list(namefirst="John")
crit        <- mongo.bson.from.list(lst=criteria)
cursor      <- mongo.find(mongo=con, ns=ns, query=crit)
out         <- NULL
while (mongo.cursor.next(cursor=cursor)) {
    bson <- mongo.cursor.value(cursor=cursor)    
    out <- c(out, list(bson))
}
> out
[[1]]
    _id : 7      50f484fe3c3b8b8e3daa72e0
    namefirst : 2    John
    namelast : 2     Doe

[[2]]
    _id : 7      50f484ff3c3b8b8e3daa72e1
    namefirst : 2    John
    namelast : 2     Smith
    age : 1      30.000000 
```

此时，集合中有两个文档，这是我们所期望的。

## 问题 #1：使用默认标志值更新 ( `0`)

```
criteria    <- list(namefirst="John")
fields      <- list(age=99)
b           <- mongo.bson.from.list(lst=fields)
crit        <- mongo.bson.from.list(lst=criteria)
mongo.update(mongo=con, ns=ns, criteria=crit, objNew=b)
cursor      <- mongo.find(mongo=con, ns=ns, query=crit)
out         <- NULL
while (mongo.cursor.next(cursor=cursor)) {
    bson <- mongo.cursor.value(cursor=cursor)
    out <- c(out, list(mongo.bson.to.list(bson)))
}
if (out[[1]]$age != 99) {
    stop("Something went wrong")
}
> out
[[1]]
[[1]]$`_id`
{ $oid : "50f484ff3c3b8b8e3daa72e1" }

[[1]]$namefirst
[1] "John"

[[1]]$namelast
[1] "Smith"

[[1]]$age
[1] 30 
```

执行更新后，只剩下一个文档。

## 问题 #2：使用“multi”标志值更新 ( `2`)

从头开始，因为以前的更新似乎已经损坏了数据库：

**确保空数据库**

```
mongo.remove(mongo=con, ns=ns, 
    criteria=mongo.bson.from.list(lst=list(namefirst="John"))) 
```

**插入文档**

```
fields      <- list(namefirst="John", namelast="Doe")
b           <- mongo.bson.from.list(lst=fields)
mongo.insert(mongo=con, ns=ns, b=b)
if (is.null(mongo.find.one(mong=con, ns=ns, query=b))) {
    stop("Something went wrong")
} 
```

**更新/更新文档**

```
criteria    <- list(namefirst="John", namelast="Smith")
fields      <- list(namefirst="John", namelast="Smith", age=30)
b           <- mongo.bson.from.list(lst=fields)
crit        <- mongo.bson.from.list(lst=criteria)
mongo.update(mongo=con, ns=ns, criteria=crit, objNew=b, 
    flags=mongo.update.upsert)
if (is.null(mongo.find.one(mong=con, ns=ns, query=b))) {
    stop("Something went wrong")
} 
```

尝试更新多个文档。我在这里追求的是在两个集合中更改`age`to的值`99`

```
criteria    <- list(namefirst="John")
fields      <- list(age=99)
b           <- mongo.bson.from.list(lst=fields)
crit        <- mongo.bson.from.list(lst=criteria)
mongo.update(mongo=con, ns=ns, criteria=crit, objNew=b, 
    flags=mongo.update.multi)
cursor      <- mongo.find(mongo=con, ns=ns, query=crit)
out         <- NULL
while (mongo.cursor.next(cursor=cursor)) {
    bson <- mongo.cursor.value(cursor=cursor)
    out <- c(out, list(mongo.bson.to.list(bson)))
} 
```

**调查当前数据库状态**

```
> out
[[1]]
[[1]]$`_id`
{ $oid : "50f485cd3c3b8b8e3daa72e2" }

[[1]]$namefirst
[1] "John"

[[1]]$namelast
[1] "Doe"

[[2]]
[[2]]$`_id`
{ $oid : "50f485ce3c3b8b8e3daa72e3" }

[[2]]$namefirst
[1] "John"

[[2]]$namelast
[1] "Smith"

[[2]]$age
[1] 30

> sapply(out, function(ii) ii$age)
[[1]]
NULL

[[2]]
[3] 30 
```

我希望两个文档都有`age = 99`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T00:14:25.833

在这两个“潜在错误”中，您都将记录更新为仅包含年龄字段的记录。您的记录仍然存在，但它们没有 namefirst 字段（或除 age 和 _id 之外的任何其他字段）来匹配后面的查询。mongo.update() 通常替换整个文档，而不是选定的字段。您的第二个示例可以这样编码：

```
criteria    <- list(namefirst="John")
fields      <- list(age=99)
b           <- mongo.bson.from.list(lst=list('$set'=fields))
crit        <- mongo.bson.from.list(lst=criteria)
mongo.update(mongo=con, ns=ns, criteria=crit, objNew=b, 
    flags=mongo.update.multi) 
```

仅设置所需的字段。有关更多信息，请参阅[http://docs.mongodb.org/manual/applications/update](http://docs.mongodb.org/manual/applications/update)。

顺便说一句，虽然你的例子很清楚，但你可以更简洁地写成：

```
mongo.update(con, ns, list(namefirst="John"),
                      list('$set'=list(age=99)), mongo.update.multi) 
```

# python - AttributeError：“QuerySet”对象没有“请求”属性

> ID：14328090
> 
> 赞同：0
> 
> 时间：2013-01-14T22:38:41.643
> 
> 标签：python, django

我有以下型号：

```
class App(models.Model):
    name                    = models.CharField(max_length=20)
    ...    

class Request(models.Model):
    ...
    app        = models.ForeignKey(App)
    ... 
```

尝试以下操作时：

```
a = App.objects.all().prefetch_related('request_set')

for r in a.requests:
    print r 
```

它给：

```
AttributeError: 'QuerySet' object has no attribute 'requests' 
```

这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:40:00.740

您使用错误的属性来访问应用程序上的请求 - 您需要使用`a.request_set`（或`related_name`在您的`ForeignKey`定义中设置为“请求”）。

# c# - c# MVC 有条件地隐藏标题按钮

> ID：14328092
> 
> 赞同：3
> 
> 时间：2013-01-14T22:38:58.520
> 
> 标签：c#, asp.net-mvc, razor

在我的`_Layout.cshtml`我有以下代码，如果用户的角色是，则不会显示按钮`UserType1`

```
 @if (!(HttpContext.Current.User.IsInRole("UserType1")))
     { 
       <li><a href="../St/Index">Static</a> </li>
       <li><a href="../St/Clients">Clients</a> </li>
     } 
```

我想知道是否有更好或最佳实践的方法来做到这一点。请注意，我将此代码放入我的`_Layout.cshtml`文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:40:31.960

这似乎很好。有些人（比如我）可能更喜欢更进一步，并将此检查包装在自定义 HTML 帮助程序中，以便能够对条件进行单元测试：

```
@if (Html.ShouldShowButtons())
{ 
    <li><a href="../St/Index">Static</a> </li>
    <li><a href="../St/Clients">Clients</a> </li>
} 
```

和助手的实现：

```
public static class HtmlExtensions
{
    public static bool ShouldShowButtons(this HtmlHelper html)
    {
        return html.ViewContext.HttpContext.User.IsInRole("UserType1");
    }
} 
```

作为替代方案，您可以使用子操作实现更复杂的逻辑：

```
@{Html.RenderAction("MenuButtons", "Menu");} 
```

然后，您将有一个相应的控制器操作，它检查用户是否处于所需的角色并使用标记呈现部分视图。

# sql - 从两个表中选择一列并将它们放在一个表中

> ID：14328093
> 
> 赞同：2
> 
> 时间：2013-01-14T22:39:03.907
> 
> 标签：sql, ms-access

我的意思不仅仅是把它们放在一起，因为我在表 1 中有一行写着“Stuff”，而表 2 中有另一行写着“Things”，并将它们放在一个写着“StuffThings”的单元格中，我只是意味着简单地将表 1 和表 2 中的所有数据合并为一列。例如....

```
Table 1:
Item 1
Item 2
Item 3

Table 2: 
Item 4
Item 5
Item 6

New Table:
Item 1
Item 2
Item 3
Item 4
Item 5
Item 6 
```

我所有的尝试都是这样的

```
Select (Table1.Row + Table2.Row) AS JobNumber
FROM Table1, Table2; 
```

它只是做类似的事情

```
Item 1Item 2
Item 1Item 3
  .....

etc. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:41:07.243

我想你想要一个 UNION 查询：

```
SELECT Table1.Row AS JobNumber
FROM Table1
UNION
SELECT Table2.Row AS JobNumber
FROM Table2 
```

或者 UNION ALL，如果你想要重复。

# javascript - 当用户尝试提交未完成的 Angular 表单时显示错误

> ID：14328095
> 
> 赞同：0
> 
> 时间：2013-01-14T22:39:05.797
> 
> 标签：javascript, angularjs

我目前正在使用 Angular 表单，用户单击“下一步”并显示表单的下一部分。但是，我有它，以便在所有字段都有效之前禁用下一步按钮。

我的问题是，当用户单击下一步按钮时，如何添加我制作的类以突出显示未完成的字段？我应该使用 $scope.watch 还是有更简单的方法来根除无效表单的来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:35:17.883

如果我正确理解了这个问题，文档中有一个很好的例子来说明你想要完成的事情：[http ://docs.angularjs.org/api/ng.directive:form](http://docs.angularjs.org/api/ng.directive:form)

如果该字段为空，则会显示一条消息

```
<form name="myForm" ng-controller="Ctrl">
  userType: <input name="input" ng-model="userType" required>
  <span class="error" ng-show="myForm.input.$error.required">Required!</span> 
```

# jquery - Orbit Jquery 插件将宽度扩展到没有链接的内容大小

> ID：14328098
> 
> 赞同：0
> 
> 时间：2013-01-14T22:39:11.423
> 
> 标签：jquery, slider, orbit

我正在使用 ZURB Foundation 的 Orbit Jquery 插件，我想知道是否有一种方法可以自动检测宽度而无需包含`a href=""`链接。据我所知，插件检测`a`元素的宽度并基于此计算宽度和高度。有没有一种无需使用 a 元素即可检测宽度和高度的方法？

我把代码放在 jsfiddle 上，虽然它在那里几乎没有功能。

[http://jsfiddle.net/jhoffm34/36vqb/1/](http://jsfiddle.net/jhoffm34/36vqb/1/)

我对此仍然很陌生，但想知道是否有一种简单的方法可以实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:47:59.337

在 jQuery 中，您可以使用[.width()检测宽度](http://api.jquery.com/width/)

```
 var ratio=1/5; // 
 var height=$('img:first','#sliderfeatured').width()*ratio; // grab the first img width
 // or var height = $('img:first', '#sliderfeatured').attr('width')*ratio; 
```

# image - 为 dompdf 安装哪个图像 php 扩展

> ID：14328099
> 
> 赞同：1
> 
> 时间：2013-01-14T22:39:15.173
> 
> 标签：image, dompdf

我正在尝试使用[dompdf](http://code.google.com/p/dompdf/)创建 pdf，但是在尝试添加图像时出现此错误。

```
Uncaught exception 'DOMPDF_Exception' with message 'Function imagecreatefromgif() not found.  Cannot convert gif image: E:\APBPEVALUACIONDES/imagenes/header.gif.  Please install the image PHP extension.' in E:\APBPEVALUACIONDES\dompdf6\include\cpdf_adapter.cls.php:470 
```

任何人都可以建议我扩展此错误。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:29:41.913

[`imagecreatefromgif()`](http://php.net/manual/en/function.imagecreatefromgif.php)是[GD PHP 扩展](http://php.net/manual/en/book.image.php)的一部分。在 dompdf 0.5.1 或更早版本中，如果您坚持使用 PNG，您可以不使用 GD，但在 0.6.0 中，GD 几乎是必需的。除非您的文档不包含图像，否则它显然会包含图像。

检查您的 PHP 配置。只要您使用的是 0.6.0，您就可以在位于 dompdf/www/setup.php（通过您的 Web 服务器访问）的配置页面中查找任何其他危险信号。

仅供参考，以下是完整功能要求的简要说明：

*   PHP5+ (必填)
*   [DOM 扩展](http://us3.php.net/manual/en/book.dom.php)（必需，默认启用）
*   GD 扩展
*   [MBString 扩展名](http://us3.php.net/manual/en/book.mbstring.php)
*   如果您需要访问“远程”文件（即使用带域的 URL 的文件引用，例如[http://example.com/image.png](http://example.com/image.png)） ， [allow_url_fopen设置为 true。](http://php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)托管服务提供商有时会禁用此功能。
*   运行 dompdf 的进程（通常是您的 Web 服务器）对 DOMPDF_TEMP_DIR、DOMPDF_FONT_DIR 和 DOMPDF_FONT_CACHE 指定的目录的读/写访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T07:45:58.660

我面临同样的问题。我做了两件事。

1.  DOMPDF_ENABLE_REMOTE 在 pdf\dompdf_config.custom.inc.php 和 pdf\dompdf_config.custom.inc.php 处设置为 true

2.  我尝试使用 .jpg 文件。

    它对我有用！

# r - 无法在 Mac 上获取 R 文件

> ID：14328105
> 
> 赞同：0
> 
> 时间：2013-01-14T22:39:31.627
> 
> 标签：r

我在 Mac 上，尝试获取 R 文件，但出现错误：

```
getwd() ##reveals the correct directory 
```

我正在尝试做

```
source("test.R", local=TRUE) 
```

我收到此错误：

```
Error in source("test.R", local = TRUE) : 
  test.R:1:2: unexpected input
1: {\
    ^

> Sys.info()                                                                                            
sysname "Darwin" 
release "10.8.0"
version "Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386" 
```

这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:11:53.577

好的。直接的问题是您正在尝试将文本文档保存为 .rtf，这是 TextEdit 默认执行的操作。如果在启动 TextEdit 时按下 Shift-Command-T，您可以切换到纯文本，它可以让您以 .R 扩展名保存文件。

但更一般地说，你真的不应该使用 TextEdit。要么使用 RStudio（非常棒），要么使用“真正的”文本编辑器。甚至只使用 R GUI。

# iphone - 如何绘制围绕中心坐标相对于设备旋转的真实世界坐标？

> ID：14328107
> 
> 赞同：2
> 
> 时间：2013-01-14T22:39:56.790
> 
> 标签：iphone, ios, gps, core-location

我正在开发一个简单的位置感知游戏，其中用户的当前位置显示在游戏地图上，以及他周围其他玩家的位置。它不是使用 MKMapView，而是使用没有街道的自定义游戏地图。

如何将其他玩家的其他纬度/经度坐标转换为 CGPoint 值，以在具有固定比例（如 50 米 = 屏幕上 50 点）的世界比例游戏地图中表示它们，并定位所有点以便用户可以看到他必须去哪个方向才能接触到另一个玩家？

关键目标是为平面自上而下视图生成纬度/经度坐标的 CGPoint 值，但将点定位在用户当前位置周围，类似于谷歌地图的定向地图功能（箭头），以便您知道在哪里是什么。

是否有进行计算的框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:06:11.237

首先，您必须将 lon/lat 转换为以米为单位的笛卡尔 x,y。
接下来是与其他玩家的度数方向。方向是 dy/dx，其中 dy = player2.y 到 me.y，dx 相同。通过除以 playerv2 和我之间的距离，将 dy 和 dx 归一化。你收到

```
ny = dy / sqrt(dx*dx + dy*dy)
nx = dx / sqrt(dx*dx + dy*dy) 
```

乘以 50。现在你在 player2 的方向上有一个 50 m 的点：

```
comp2x = 50 * nx;
comp2y = 50 * ny; 
```

现在将地图置于 me.x/me.y 的中心。并将屏幕应用于仪表刻度

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T01:38:23.823

你想要来自 MapKit 的[MKMapPointForCoordinate](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html#//apple_ref/c/func/MKMapPointForCoordinate)。这会将经纬度对转换为由 x 和 y 定义的平面。查看描述投影的[MKMapPoint](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MapKitDataTypesReference/Reference/reference.html)的文档。然后，您可以根据需要将这些 x,y 对缩放和旋转为 CGPoints 以供显示。（您必须进行试验以了解哪些缩放因子适用于您的游戏。）

要以用户为中心，只需从所有其他对象的点中减去它们的 x 和 y 位置（在 MKMapPoints 中）的值。就像是：

```
MKMapPoint userPoint = MKMapPointForCoordinate(userCoordinate);
MKMapPoint otherObjectPoint = MKMapPointForCoordinate(otherCoordinate);

otherObjectPoint.x -= userPoint.x; // center around your user
otherObjectPoint.y -= userPoint.y;

CGPoint otherObjectCenter = CGPointMake(otherObjectPoint.x * 0.001, otherObjectPoint.y * 0.001);

// Using (50, 50) as an example for where your user view is placed.
userView.center = CGPointMake(50, 50);
otherView.center = CGPointMake(50 + otherObjectCenter.x, 50 + otherObjectCenter.y); 
```

# android - 如何实现需要扩展活动的文件浏览器代码？

> ID：14328109
> 
> 赞同：0
> 
> 时间：2013-01-14T22:40:01.693
> 
> 标签：android, file, arraylist, listactivity

如何在不扩展 listactivity 类的情况下实现文件浏览器？我正在尝试在我的应用程序中添加一个选项来选择文件浏览器来选择他们自己的文件来使用而不是默认文件。我做了一个按钮，移动到文件浏览器列表，但是当我使用代码时`setListAdapter(ArrayAdapter);`它说我需要扩展 ListActivity。当我这样做时，我在完全运行应用程序时遇到问题。关于我做错了什么的任何想法？我怎么能不用扩展listactivity，因为我的应用程序不仅仅是一个列表，它只需要使用列表。谢谢！

更新-LOGCAT

```
01-15 09:39:22.399: D/AndroidRuntime(317): Shutting down VM
01-15 09:39:22.409: W/dalvikvm(317): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
01-15 09:39:22.409: E/AndroidRuntime(317): Uncaught handler: thread main exiting due to uncaught exception
01-15 09:39:22.429: E/AndroidRuntime(317): java.lang.IllegalStateException: Could not execute method of the activity
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.View$1.onClick(View.java:2031)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.View.performClick(View.java:2364)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.View.onTouchEvent(View.java:4179)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.View.dispatchTouchEvent(View.java:3709)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
01-15 09:39:22.429: E/AndroidRuntime(317):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
01-15 09:39:22.429: E/AndroidRuntime(317):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
01-15 09:39:22.429: E/AndroidRuntime(317):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.os.Looper.loop(Looper.java:123)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.app.ActivityThread.main(ActivityThread.java:4363)
01-15 09:39:22.429: E/AndroidRuntime(317):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 09:39:22.429: E/AndroidRuntime(317):  at java.lang.reflect.Method.invoke(Method.java:521)
01-15 09:39:22.429: E/AndroidRuntime(317):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
01-15 09:39:22.429: E/AndroidRuntime(317):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
01-15 09:39:22.429: E/AndroidRuntime(317):  at dalvik.system.NativeStart.main(Native Method)
01-15 09:39:22.429: E/AndroidRuntime(317): Caused by: java.lang.reflect.InvocationTargetException
01-15 09:39:22.429: E/AndroidRuntime(317):  at phil.H.com.HIITActivity.changesong(HIITActivity.java:132)
01-15 09:39:22.429: E/AndroidRuntime(317):  at java.lang.reflect.Method.invokeNative(Native Method)
01-15 09:39:22.429: E/AndroidRuntime(317):  at java.lang.reflect.Method.invoke(Method.java:521)
01-15 09:39:22.429: E/AndroidRuntime(317):  at android.view.View$1.onClick(View.java:2026)
01-15 09:39:22.429: E/AndroidRuntime(317):  ... 21 more
01-15 09:39:22.429: E/AndroidRuntime(317): Caused by: java.lang.NullPointerException
01-15 09:39:22.429: E/AndroidRuntime(317):  at phil.H.com.HIITActivity.getDir(HIITActivity.java:216)
01-15 09:39:22.429: E/AndroidRuntime(317):  ... 25 more
01-15 09:39:22.509: I/Process(59): Sending signal. PID: 317 SIG: 3
01-15 09:39:22.509: I/dalvikvm(317): threadid=7: reacting to signal 3
01-15 09:39:22.609: I/dalvikvm(317): Wrote stack trace to '/data/anr/traces.txt'
01-15 09:44:22.559: I/Process(317): Sending signal. PID: 317 SIG: 9
01-15 09:44:22.659: E/JavaBinder(59): !!! FAILED BINDER TRANSACTION !!!
01-15 09:44:22.680: I/WindowManager(59): WIN DEATH: Window{44debcc8 phil.H.com/phil.H.com.HIITActivity paused=false}
01-15 09:44:22.680: I/ActivityManager(59): Process phil.H.com (pid 317) has died.
01-15 09:44:22.939: I/UsageStats(59): Unexpected resume of com.android.launcher while already resumed in phil.H.com
01-15 09:44:23.559: W/InputManagerService(59): Got RemoteException sending setActive(false) notification to pid 317 uid 10029 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:44:55.087

您不必使用`ListActivity`. `ListView`只要您使用正确的方法，您使用的布局中必须有一个对象。

[`ListView`](http://developer.android.com/reference/android/widget/ListView.html)在您膨胀的 XML 文件中设置一个，然后获取它：

```
ListView myListView = (ListView) findViewById(R.id.my_list); 
```

然后，您可以设置它的适配器：

```
myListView.setAdapter(ArrayAdapter); 
```

该文档有一个关于中等高级实现[的很棒的教程。](http://developer.android.com/guide/topics/ui/layout/listview.html)`ListView`

# django-forms - 更新日期时间字段（来自系统），但不要使其对用户可见

> ID：14328112
> 
> 赞同：2
> 
> 时间：2013-01-14T22:40:10.597
> 
> 标签：django-forms

以下是我的“视图”，它通过“editpost.html”呈现表单。我想更新要由系统时间编辑的时间戳（日期时间字段），但不希望用户看到它。我尝试在模型定义 Meta 类中使用“隐藏”关键字，但这并不能正确更新时间。我尝试在模板中执行此操作，但不起作用。有任何想法吗？

```
def editpost(request, postid):    
    blog = BlogPost.objects.get(pk=postid)
    if request.method == 'POST':
        form = BlogPostForm(request.POST, instance=blog)
        blog = form.save()
        return HttpResponseRedirect('/blog/%s' % str(postid))
    else:
        form = BlogPostForm(initial={'timestamp': datetime.now()}, instance=blog)
        form.save(commit=False)
    return render_to_response("editpost.html", {'form': form, 'postid': postid}, RequestContext(request)) 
```

编辑帖子.html

```
{% block content %}
<form action="." method="post">{% csrf_token %}
    {% for field in form %}
        {% if field.label_tag != "Timestamp" %}
            <div class="fieldWrapper">
                {{ field.errors }}
                {{ field.label_tag }} {{ field }}
            </div>
        {% endif %}
    {% endfor %}
<input type="submit" value="Save" />
</form>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T16:05:39.057

可能更好`def save(...)`的是重写模型。你可以试试：

> ```
> def save(self, *args, **kwargs):
>     self.timestamp = datetime.now()
>     super(Dog,self).save(*args, **kwargs) 
> ```

# ruby - 在 Ruby 中评估许多布尔表达式，例如 Array#join

> ID：14328114
> 
> 赞同：17
> 
> 时间：2013-01-14T22:40:17.260
> 
> 标签：ruby, syntactic-sugar, boolean-expression

在 Ruby 中，您可以使用[Array#join](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-join)通过可选的分隔符将多个字符串简单地连接在一起。

```
[ "a", "b", "c" ].join        #=> "abc"
[ "a", "b", "c" ].join("-")   #=> "a-b-c" 
```

我想知道是否有很好的语法糖可以用一堆布尔表达式做类似的事情。例如，我需要将`&&`一堆表达式放在一起。但是，将使用哪些表达式取决于用户输入。所以与其做一堆

```
cumulative_value &&= expression[:a] if user[:input][:a] 
```

我想首先根据输入收集所有表达式，然后`&&`一举将它们全部收集在一起。就像是：

```
be1 = x > y
be2 = Proc.new {|string, regex| string =~ regex}
be3 = z < 5 && my_object.is_valid?
[be1,be2.call("abc",/*bc/),be3].eval_join(&&) 
```

默认情况下Ruby中有这样的设备吗？如果可能的话，我只想要一些语法糖来使代码更干净。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-14T22:55:01.667

试试[`Array#all?`](http://ruby-doc.org/core/Enumerable.html#method-i-all-3F)。If`arr`是一个布尔数组，它本身就可以工作：

```
arr.all? 
```

`true`如果其中的每个元素都`arr`为真，则将返回，`false`否则。

您可以使用[`Array#any?`](http://ruby-doc.org/core/Enumerable.html#method-i-any-3F)相同的方式在 上加入数组`||`，也就是说，`true`如果数组中的任何元素为真则返回，否则返回`false`。

只要您确保将正确的变量传递到块中（或使用类、实例或全局变量），这也适用`arr`于 的数组。`Procs``Proc#call`

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-14T22:55:22.073

您可以使用`#all?`,`#any?`并`#none?`实现此目的：

```
[true, false].any?
=> true

[true, false].all?
=> false 
```

并且不要忘记，除`nul`和之外的所有值都`false`评估为`true`。

```
['', [], {}].all?
=> true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T23:09:07.853

在这种特殊情况下，您只想通过用户选择的表达式过滤表达式哈希，然后测试所有这些表达式是否为真：

```
cumulative_value = expression.select {|k, v| user[:input][k] }.values.all? 
```

这将首先从表达式中选择所有有匹配`user[:input]`键的成员，然后它将`Array#all?`用于测试所选表达式中的所有值是否为真。那么你`cumulative_value`的要么是真的，要么是假的。

由于您的表达式值可能是 procs，因此您必须评估过滤后的表达式列表中的所有 procs，并从中构建一个 results 数组，您可以调用`all?`它：

```
cumulative_value = expression.select {|k, v| user[:input][k] }.
  values.map {|value| value.is_a?(Proc) ? value.call : value }.all? 
```

几乎没有“语法糖”，但它可以完成工作而不会非常复杂。

# validation - 保持 验证失败时打开

> ID：14328115
> 
> 赞同：12
> 
> 时间：2013-01-14T22:40:17.517
> 
> 标签：validation, jsf, jsf-2, primefaces

我有一个 CRUD 页面，它在 Primefaces 数据表中显示来自查询（域对象列表）的数据。

```
<p:dataTable 
                id="negozi" 
                var="n" 
                value="#{nController.theListFromQuery}" 
                rowKey="#{n.id}"
                selection="#{nController.selected}" 
                selectionMode="single">

                <p:column headerText="Field1">
                    <h:outputText value="#{n.f1}" />
                </p:column>
                <p:column headerText="Field2">
                    <h:outputText value="#{n.f2}" />
                </p:column>
<p:column style="width:4%">
                    <p:commandButton 
                        actionListener="#{nController.prepareEdit(n)}"
                        update=":editDialogId" 
                        oncomplete="editDialog.show()" 
                        value="Edit" />
                </p:column>
... 
```

通过单击编辑按钮，将显示一个对话框：

```
 <p:dialog 
                header="Edit N" 
                widgetVar="editDialog" 
                id="editDialogId">

                    <h:form id="formDialog">

                        <h:panelGrid id="editDialogTable" columns="2" cellpadding="10" style="margin:0 auto;">

                            <p:outputLabel for="field1" value="F1:" />
                            <p:inputText id="field1" value="#{nController.selected.f1}" />
                            <p:outputLabel for="field2" value="F2:" />
                            <p:inputText id="field2" value="#{nController.selected.f2}" />
<p:commandButton 
                        value="Confirm" 
                        actionListener="#{nController.doEdit}" 
                        update=":form" 
                        oncomplete="editDialog.hide()"
                        rendered="#{nController.selected.id!=null}" />                  
... 
```

有用。现在我想让 F1 成为必填字段。

我将“必需”属性添加到 inputText 字段，会发生什么？

当我尝试在没有必填字段的情况下确认表单时，实体没有被编辑（这是正确的）但对话框已关闭（这是不对的！）

当我重新打开对话框时，我可以在必填（和无效）字段上看到红色突出显示。

**如果表单无效，我想要的是防止对话框关闭。**

我必须写一些 JS 还是 JSF 会帮助我？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-14T22:43:17.480

PrimeFaces ajax 响应将`args`对象放入具有属性的范围内`validationFailed`。你可以利用它。

```
oncomplete="if (args &amp;&amp; !args.validationFailed) PF('editDialog').hide()" 
```

*（`args`在请求过程中抛出异常时，为了不导致 JS 错误，需要进行预检查）*

您可以将其重构为可重用的 JS 函数，如下所示。

```
oncomplete="hideDialogOnSuccess(args, 'editDialog')" 
```

```
function hideDialogOnSuccess(args, dialogWidgetVar) {
    if (args && !args.validationFailed) {
        PF(dialogWidgetVar).hide();
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-15T16:11:36.123

这篇文章现在已经三年了，但我发现很有帮助，所以我的发现可能对其他人有所帮助。

至少在 PF 5.x 中，BalusC 提供的解决方案似乎必须以两种方式进行修改。(1) 将“args”参数添加到 oncomplete 事件处理程序的调用中，以及 (2) 使用 PF primefaces 原语来识别 PF 表中的小部件。这是我正在使用的代码：

```
oncomplete="hideDialogOnSuccess(args, PF('editDialog'))"

function hideDialogOnSuccess(args, dialogWidgetVar) {
    if (args && !args.validationFailed) {
        dialogWidgetVar.hide();
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T20:08:23.900

我相信这是最干净的解决方案。这样做你**不需要改变你的按钮代码**。此解决方案覆盖隐藏函数原型。

```
$(document).ready(function() {
    PrimeFaces.widget.Dialog.prototype.originalHide = PrimeFaces.widget.Dialog.prototype.hide; // keep a reference to the original hide()
    PrimeFaces.widget.Dialog.prototype.hide = function() {
        var ajaxResponseArgs = arguments.callee.caller.arguments[2]; // accesses oncomplete arguments
        if (ajaxResponseArgs && ajaxResponseArgs.validationFailed) {
            return;  // on validation error, prevent closing
        }
        this.originalHide();
    };
}); 
```

这样，您可以将代码保留为：

```
<p:commandButton value="Save" oncomplete="videoDetalheDialogJS.hide();" 
   actionListener="#{videoBean.saveVideo(video)}" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-30T01:57:59.967

要保持对话框在验证失败时打开，您只需将 commandButton 设置如下：

```
<p:commandButton value="save"
action="#{YourBean.yourActionMethod}"
oncomplete="if (!args.validationFailed) PF('yourDialogWidgetVar').hide()"/> 
```

我将在这里留下一个完整的例子：

```
<h:form id="ad-form">
            <p:dialog id="ad-dialog" widgetVar="adDialog" modal="true" width="400"
            closeOnEscape="true" resizable="false" header="Addreass">

            <p:messages id="a-msgs" closable="true" />

            <h:panelGrid columns="2" id="ad-painel-dialog" width="100%">
                <p:outputLabel value="Country" for="country" />
                <p:inputText id="country" style="width:100%"
                    value="#{clientSaverBean.editableAddress.country}" />

                <p:outputLabel value="City" for="city" />
                <p:inputText id="city"
                    value="#{clientSaverBean.editableAddress.city}" />

                <p:outputLabel value="Zip-Code" for="zipcode" />
                <p:inputText id="zipcode"
                    value="#{clientSaverBean.editableAddress.zipCode}" />

                <p:outputLabel value="Street" for="street" />
                <p:inputTextarea id="street"
                    value="#{clientSaverBean.editableAddress.street}" />

                <p:outputLabel value="Number" for="number" />
                <p:inputText id="number"
                    value="#{clientSaverBean.editableAddress.number}" />

                <h:panelGroup />

                <f:facet name="footer">
                    <p:commandButton value="save"
                        action="#{clientSaverBean.saveAddress}"
                        process=":ad-form:ad-dialog"
                        update=":ad-form:a-msgs :ad-form:ad-painel-dialog :client-form:ad-table" 
                        oncomplete="if (!args.validationFailed) PF('adDialog').hide()"/>
                </f:facet>
            </h:panelGrid>
        </p:dialog>

    </h:form> 
```

# javascript - 如何在不发出新的 http 请求的情况下更改日期

> ID：14328129
> 
> 赞同：1
> 
> 时间：2013-01-14T22:41:12.843
> 
> 标签：javascript, html, httprequest

我现在有这个：

![在此处输入图像描述](../Images/61a44bda78bb9ad206455dc8d0f4cbc3.png)

它包含在标准的 php/html/css 页面中。

在不发出新的 http 请求即发送 $_GET 以获取月份和年份的情况下合并按钮“上个月”和“下个月”的最佳方式是什么，因为我想保留用户输入的任何数据页。

如何将月份/年份传递给页面本身，以便它可以分别使用它用于生成日历的功能进行更改？

我想我必须使用 jQuery/javascript/AJAX，我在这些领域不是最有经验的，所以任何替代方案都会很棒。

那么，如何使用日历的新参数刷新功能？我通过我的函数当前月份和年份来生成我的日历：

HTML -

```
<form  action="this.php" id="PREVIOUS_MONTH" method="post">
<input type="submit"  value="Previous Month"/>
</form> 
```

PHP -

```
function generateCalendar($month, $year){
.. generate calendar code
} 
```

如何使用 AJAX 使用新参数（即前一个月/前一年）刷新函数（generateCalendar），而不发出新的 http 请求？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:45:38.837

我认为你应该使用javascript。可以试试jQuery，不难理解。

如果要传输数据，请检查 ajax ：

看这里玩 ajax 和 jQuery：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果您想要一个非常小的库，请尝试 microajax：[http ://code.google.com/p/microajax/](http://code.google.com/p/microajax/)

```
microAjax("/my/url", function(resource) {
  alert("I load this : " + resource);
}); 
```

# performance - 关于重物的迭代

> ID：14328136
> 
> 赞同：0
> 
> 时间：2013-01-14T22:41:57.570
> 
> 标签：performance, actionscript-3, for-loop

（我说的重是指有几行的物体）

嗨，我有这个疑问，我有一个类 EntityVO，并且最近变得相当大，250 多行，但主要是带有 getter 和 setter 的私有变量。

我的疑问是，迭代它们会因为类的大小而不是迭代轻量级类而消耗更多时间？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:45:01.397

不会。类中的字段数量不会以任何方式影响类的性能（创建类时除外）。

当您遍历一个类数组时，您实际上只是在抛出对实际实例的引用，而不是存储在其中的所有数据。

# colors - 证明 YUV 4:2:0 方案每像素的等效位数为 12

> ID：14328138
> 
> 赞同：0
> 
> 时间：2013-01-14T22:41:59.217
> 
> 标签：colors, yuv, subsampling

证明 YUV 4:2:0 方案每像素的等效位数为 12

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:35:10.153

YUV 4:2:0 中存储 4 个像素的位数为：

```
4*8+8+8=48 bits 
```

即亮度为 4 个字节，每个颜色平面为 1 个字节

这给出了平均值

```
48/4=12bpp 
```

# asp.net - Orchard CMS - 确定模型在内容项驱动程序中是否有效

> ID：14328141
> 
> 赞同：3
> 
> 时间：2013-01-14T22:42:23.713
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, orchardcms, orchardcms-1.6

在我的 Orchard 实例中，我有一个自定义内容类型，其中包含自定义内容部分。在内容部分的“编辑器驱动程序”中，我需要检查容器内容项是否有效（即通过验证）。

由于 Orchard 的工作方式，正常的 ModelState 在这里不起作用——我可以确定内容部分是否有效，但我需要了解整个内容项（内容项中还有其他内容部分）。

[我知道一旦使用生命周期事件（ http://docs.orchardproject.net/Documentation/Understanding-content-handlers](http://docs.orchardproject.net/Documentation/Understanding-content-handlers) ）发布/创建内容部分，就有执行代码的方法，但没有办法（据我所知）传递那些事件信息。

基本上，如果内容项有效，我需要执行一个方法，并且我需要传递 ViewModel 中包含的方法信息。

可能有（并且可能是）更好的方法来做到这一点，但我正在努力在 Orchards 框架内找到一种方法。

示例代码：

```
//POST
protected override DriverResult Editor(EventPart part, IUpdateModel updater, dynamic shapeHelper)
{
    var viewModal = new EventEditViewModel();

    if (updater.TryUpdateModel(viewModal, Prefix, null, null))
    {
        part.Setting = viewModal.Setting;
    }

    //here's where I need to check if the CONTENT ITEM is valid or not, for example
    if (*valid*)
    {
        DoSomething(viewModal.OtherSetting);
    }

    return Editor(part, shapeHelper);
} 
```

注意：我使用的是 Orchard 1.6 版。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:43:11.720

恐怕没有简单的方法可以从驱动程序内部做到这一点。太早了。您可以通过 访问其他部分`part.As<OtherPart>`，但此时可能会或可能不会更新这些部分。

您可以尝试像这样使用处理程序和`OnPublishing`/ `OnPublished`（和其他）事件：

```
 OnPublishing<MyPart>((ctx, part) =>
        {
            // Do some validation checks on other parts
            if (part.As<SomeOtherPart>().SomeSetting == true)
            {
                notifier.Error(T("SomeSetting cannot be true."));
                transactions.Cancel();
            }
        }); 
```

实例在哪里，注入到 ctor 中`transactions`。`ITransactionManager`

如果您需要更多控制，编写自己的控制器来处理项目更新/创建是最好的方法。

为了做到这一点（假设您已经有了控制器），您需要使用处理程序`OnGetContentItemMetadata`方法来指向 Orchard 以使用您的控制器而不是默认控制器，如下所示：

```
 OnGetContentItemMetadata<MyPart>((context, part) =>
        {
            // Edit item action
            context.Metadata.EditorRouteValues = new RouteValueDictionary {
            {"Area", "My.Module"},
            {"Controller", "Item"},
            {"Action", "Edit"},
            {"id", context.ContentItem.Id}};

            // Create new item action
            context.Metadata.CreateRouteValues = new RouteValueDictionary {
            {"Area", "My.Module"},
            {"Controller", "Item"},
            {"Action", "Create"});
        }); 
```

# python - : 是什么意思？

> ID：14328142
> 
> 赞同：2
> 
> 时间：2013-01-14T22:42:28.787
> 
> 标签：python, qt

例如：

`icon = QIcon(":icons/main.png")`

“icons”目录位于主程序目录之外的另一个目录中：

/usr/share/ProgramName/design/icons/main.png

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:46:15.487

它是作为其他人链接编译到程序中的二进制资源： [资源描述](http://doc.qt.digia.com/qt/resources.html)

真的是你需要阅读的全部内容

# jquery - 运行多个 JQuery 代码

> ID：14328147
> 
> 赞同：1
> 
> 时间：2013-01-14T22:42:54.437
> 
> 标签：jquery, wordpress

您好，感谢您的帮助。我正在使用 wordpress 运行多个 jQuery 函数。一旦我添加第二个，它就会破坏第一个的代码。我不明白为什么会这样。

```
<script type="text/javascript">
var timeInterval = null, transition_time = 0, time_between_slides = 4000;
jQuery(document).ready(function ($) {

  /* This is for the slider */
    var $slider = $('.slider');
    var $sliderLi = $slider.find('li');

    $sliderLi.hide();
    //$slider.find('li:first').addClass('active').fadeIn(transition_time);
    slideShow();
    timeInterval = setInterval(slideShow, transition_time + time_between_slides);

    function slideShow() {
        var i = $slider.find('li.active').index();

        $sliderLi.eq(i).removeClass('active').fadeOut(transition_time);

        if (i == -1 || $sliderLi.length == i + 1) {
            $slider.find('li:first').addClass('active').fadeIn(transition_time);
        } else {
            $sliderLi.eq(i + 1).addClass('active').fadeIn(transition_time);
        }
    };

    $slider.mouseenter(function () {
        clearInterval(timeInterval);
    }).mouseleave(function () {
        timeInterval = setInterval(slideShow, transition_time + time_between_slides);
    });

});

</script> 
```

第二代码

```
<script type="text/javascript">
jQuery(document).ready(function () {

    var $popup = $('.popup');

    $('area').on({
      click : function(e){
        var $this = $(this),
            $obj = $('#'+$this.prop('alt'));

        $popup.text($obj.text()).css({
          top: e.pageY + 10,
          left: e.pageX + 40,
        }).show();
      };

});
</script> 
```

我尝试过两种不同的方式。首先是在第一个代码的底部插入第二个代码。这最终破坏了第一个代码，而第二个代码不起作用。我也尝试过分手，因为它在这里。第二个代码仍然不起作用，即使它正在运行 [http://jsfiddle.net/timcoolley/B5wa4/5/](http://jsfiddle.net/timlcooley/B5wa4/5/) 我不确定是什么破坏了代码。在这个过程中的任何帮助都会很棒。

这是阅读人们共享的所有内容后编辑的代码。问题仍然存在。滑块坏了，点击区域的东西不起作用。

```
<script type="text/javascript">

var timeInterval = null, transition_time = 0, time_between_slides = 4000;
var $slider = $('.slider');
var $sliderLi = $slider.find('li');

var $popup = $('.popup');
jQuery(document).ready(function ($) {

  /* This is for the slider */

    $sliderLi.hide();
    //$slider.find('li:first').addClass('active').fadeIn(transition_time);
    slideShow();
    timeInterval = setInterval(slideShow, transition_time + time_between_slides);

    function slideShow() {
        var i = $slider.find('li.active').index();

        $sliderLi.eq(i).removeClass('active').fadeOut(transition_time);

        if (i == -1 || $sliderLi.length == i + 1) {
            $slider.find('li:first').addClass('active').fadeIn(transition_time);
        } else {
            $sliderLi.eq(i + 1).addClass('active').fadeIn(transition_time);
        }
    };

    $slider.mouseenter(function () {
        clearInterval(timeInterval);
    }).mouseleave(function () {
        timeInterval = setInterval(slideShow, transition_time + time_between_slides);
    });

/* This is for the popup feature */
    $('area').on({
      click : function(e){
        var $this = $(this),
            $obj = $('#'+$this.prop('alt'));

        $popup.text($obj.text()).css({
          top: e.pageY + 10,
          left: e.pageX + 40
        }).show()
      };

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:45:58.870

`$`如果您要像这样使用它，则需要在第二个代码中将它传递给您的就绪函数`$('.popup')`

```
jQuery(document).ready(function ($) { 
```

[编辑] 正如 Kevin B 指出的那样，如果您有其他代码使用 $. 我假设了这一点，因为您在第一个版本中使用了别名版本，但我想如果不看看您还有什么，我就无法做出这个假设。

但是，您的第二个代码片段中有几个语法错误。

```
left: e.pageX + 40, 
```

这后面不需要逗号（IE 会出错）。

当你关闭你的点击功能时，你不需要分号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T05:05:24.630

我在代码中看到了一些可能导致问题的问题。第一个是缺少的$。此外，功能可以放置在更好的位置。发生的很多事情都与理解 jQuery(document).ready(function ($) { 在 jQuery 中的含义有关。你可以改天来找我接受一些培训。与此同时，试试这个：

```
<script type="text/javascript">
var timeInterval = null, transition_time = 0, time_between_slides = 4000, popup = null, slider = null, sliderLi = null;

jQuery(document).ready(function ($) {

  /* This is for the slider */
    slider = $('.slider');
    sliderLi = slider.find('li');

    sliderLi.hide();
    //slider.find('li:first').addClass('active').fadeIn(transition_time);
    slideShow();
    timeInterval = setInterval(slideShow, transition_time + time_between_slides);

    slider.mouseenter(function () {
        clearInterval(timeInterval);
    }).mouseleave(function () {
        timeInterval = setInterval(slideShow, transition_time + time_between_slides);
    });

    popup = $('.popup');

    $('area').on({
      click : function(e){
        var area = $(this);
        var target = $('#' + area.prop('alt'));

        popup.text(target.text()).css({
          top: e.pageY + 10,
          left: e.pageX + 40
        }).show();
      };

});

function slideShow() {
    var i = slider.find('li.active').index();

    sliderLi.eq(i).removeClass('active').fadeOut(transition_time);

    if (i == -1 || sliderLi.length == i + 1) {
        slider.find('li:first').addClass('active').fadeIn(transition_time);
    } else {
        sliderLi.eq(i + 1).addClass('active').fadeIn(transition_time);
    }
}
</script> 
```

过度使用 $ 符号确实没有必要。当您通过 jQuery 就绪事件将 $ 传递给函数时，它允许使用 $ 代替 jQuery。新参数不需要以 $ 开头。这实际上只是一种风格的编程选择。var foo 与 var $foo 相同，$(".slider") 与 jQuery(".slider") 相同。这些参数可以简单地称为 foo，就像您的 timeInterval、transition_time 和 time_between_slides 参数一样。

其次，您只需要评论给出的一个准备好的功能。并且通常将一个函数放置在 jQuery 就绪函数之类的东西之外是一个好主意，这样它就可以在全局级别访问。

我们将不得不看看这是否适合您，但这应该是朝着正确方向迈出的一步。享受，J

# android - 如何在不使用 Facebook 登录/注销按钮的情况下以编程方式从 Facebook SDK 3.0 注销？

> ID：14328148
> 
> 赞同：80
> 
> 时间：2013-01-14T22:43:00.057
> 
> 标签：android, facebook, facebook-graph-api, facebook-android-sdk

标题说明了一切。我正在使用自定义按钮来获取用户的 Facebook 信息（用于“注册”目的）。然而，我不想让应用记住最后注册的用户，也不想记住当前通过 Facebook 原生应用登录的用户。我希望每次都弹出 Facebook 登录活动。这就是为什么我想以编程方式注销任何以前的用户。

我怎样才能做到这一点？这就是我登录的方式：

```
private void signInWithFacebook() {

    SessionTracker sessionTracker = new SessionTracker(getBaseContext(), new StatusCallback() 
    {
        @Override
        public void call(Session session, SessionState state, Exception exception) { 
        }
    }, null, false);

    String applicationId = Utility.getMetadataApplicationId(getBaseContext());
    mCurrentSession = sessionTracker.getSession();

    if (mCurrentSession == null || mCurrentSession.getState().isClosed()) {
        sessionTracker.setSession(null);
        Session session = new Session.Builder(getBaseContext()).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
        mCurrentSession = session;
    }

    if (!mCurrentSession.isOpened()) {
        Session.OpenRequest openRequest = null;
        openRequest = new Session.OpenRequest(RegisterActivity.this);

        if (openRequest != null) {
            openRequest.setPermissions(null);
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);

            mCurrentSession.openForRead(openRequest);
        }
    }else {
        Request.executeMeRequestAsync(mCurrentSession, new Request.GraphUserCallback() {
              @Override
              public void onCompleted(GraphUser user, Response response) {
                  fillProfileWithFacebook( user );
              }
            });
    }
} 
```

理想情况下，我会在此方法开始时调用以注销任何以前的用户。

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-01-14T23:05:06.760

**最新 SDK 更新：**

现在@zeuter 的回答对于 Facebook SDK v4.7+ 是正确的：

> `LoginManager.getInstance().logOut();`

**原答案：**

请不要使用 SessionTracker。它是一个内部（包私有）类，并不打算作为公共 API 的一部分使用。因此，它的 API 可能随时更改，而没有任何向后兼容性保证。您应该能够摆脱代码中的所有 SessionTracker 实例，而只使用活动会话。

要回答您的问题，如果您不想保留任何会话数据，只需在您的应用关闭时调用[closeAndClearTokenInformation 。](https://developers.facebook.com/docs/reference/android/3.0/Session#closeAndClearTokenInformation%28%29)

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-09-03T05:41:53.083

此方法将帮助您在 android 中以编程方式从 facebook 注销

```
/**
 * Logout From Facebook 
 */
public static void callFacebookLogout(Context context) {
    Session session = Session.getActiveSession();
    if (session != null) {

        if (!session.isClosed()) {
            session.closeAndClearTokenInformation();
            //clear your preferences if saved
        }
    } else {

        session = new Session(context);
        Session.setActiveSession(session);

        session.closeAndClearTokenInformation();
            //clear your preferences if saved

    }

} 
```

* * *

## 回答 #3

> 赞同：66
> 
> 时间：2015-03-31T16:00:52.157

由于 Facebook 的 Android SDK v4.0（请参阅[更改日志](https://developers.facebook.com/docs/android/change-log-4.x)），您需要执行以下操作：

```
LoginManager.getInstance().logOut(); 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2013-03-20T06:26:47.627

这是允许我以编程方式从 facebook 注销的代码段。如果您发现任何我可能需要改进的地方，请告诉我。

```
private void logout(){
    // clear any user information
    mApp.clearUserPrefs();
    // find the active session which can only be facebook in my app
    Session session = Session.getActiveSession();
    // run the closeAndClearTokenInformation which does the following
    // DOCS : Closes the local in-memory Session object and clears any persistent 
    // cache related to the Session.
    session.closeAndClearTokenInformation();
    // return the user to the login screen
    startActivity(new Intent(getApplicationContext(), LoginActivity.class));
    // make sure the user can not access the page after he/she is logged out
    // clear the activity stack
    finish();
} 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-08-09T10:39:51.790

由于 Facebook 的 Android SDK v4.0 您需要执行以下操作：

```
LoginManager.getInstance().logOut(); 
```

这还不够。这将简单地清除缓存的访问令牌和配置文件，以便`AccessToken.getCurrentAccessToken()`现在`Profile.getCurrentProfile()`将变为空。

要完全注销，您需要撤销权限，然后调用`LoginManager.getInstance().logOut();`. 要撤销权限，请执行以下图形 API -

```
 GraphRequest delPermRequest = new GraphRequest(AccessToken.getCurrentAccessToken(), "/{user-id}/permissions/", null, HttpMethod.DELETE, new GraphRequest.Callback() {
        @Override
        public void onCompleted(GraphResponse graphResponse) {
            if(graphResponse!=null){
                FacebookRequestError error =graphResponse.getError();
                if(error!=null){
                    Log.e(TAG, error.toString());
                }else {
                    finish();
                }
            }
        }
    });
    Log.d(TAG,"Executing revoke permissions with graph path" + delPermRequest.getGraphPath());
    delPermRequest.executeAsync(); 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2015-04-29T20:43:17.480

**SDK 4.0 中删除了**会话类。**登录管理是通过类**LoginManager**完成的。所以：**

 **```
mLoginManager = LoginManager.getInstance();
mLoginManager.logOut(); 
```

正如[升级到 SDK 4.0](https://developers.facebook.com/docs/android/upgrading-4.x)的参考所说：

> **Session Removed** - AccessToken、LoginManager 和 CallbackManager 类取代并替换了 Session 类中的功能。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-07-02T21:21:11.610

是的，正如@luizfelippe 提到的**Session**类自**SDK 4.0 以来已被删除。**我们需要使用 LoginManager。

我只是查看了**LoginButton**类以进行注销。他们正在做这种检查。他们仅在**accessToken**不为空时注销。所以，我认为在我们的代码中也有这个更好..

```
AccessToken accessToken = AccessToken.getCurrentAccessToken();
if(accessToken != null){
    LoginManager.getInstance().logOut();
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-22T10:01:51.590

```
private Session.StatusCallback statusCallback = new SessionStatusCallback();

logout.setOnClickListener(new OnClickListener() {
@Override
public void onClick(View arg0) {
Session.openActiveSession(this, true, statusCallback);  
}
});

private class SessionStatusCallback implements Session.StatusCallback {
@Override
public void call(Session session, SessionState state,
Exception exception) {
session.closeAndClearTokenInformation();    
}
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-22T12:28:59.803

Facebook 提供了两种登录和注销帐户的方法。一种是使用LoginButton，另一种是使用LoginManager。LoginButton 只是一个按钮，点击后就完成了登录。另一方面，LoginManager 会自行执行此操作。在您的情况下，您已经使用 LoginManager 自动注销。

`LoginManager.getInstance().logout()`这对你有用吗？**

# facebook-fql - 空白用户资料图片

> ID：14328151
> 
> 赞同：0
> 
> 时间：2013-01-14T22:43:14.493
> 
> 标签：facebook-fql

> **可能重复：**
> [如何只获取上传了个人资料照片的朋友，而忽略那些具有默认轮廓的用户？](https://stackoverflow.com/questions/10827962/how-to-get-only-friends-with-profile-photos-uploaded-and-ignore-those-users-wit)

有没有办法使用 fql 检查用户是否有个人资料图片或只是一张普通的空白图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:56:05.160

从文档

> pic：被查询对象的小头像URL。图像的最大宽度为 50 像素，最大高度为 150 像素。**此 URL 可能为空。**

虽然，做这个查询：

```
select pic from user where uid = xxxx 
```

在我*知道*没有个人资料图片的用户上，返回了这个：

```
{
  "data": [
    {
      "pic": "http://profile.ak.fbcdn.net/static-ak/rsrc.php/v1/yV/r/Xc3RyXFFu-2.jpg"
    }
  ]
} 
```

# java - 光标适配器和多列 Android

> ID：14328153
> 
> 赞同：0
> 
> 时间：2013-01-14T22:43:34.157
> 
> 标签：java, android, sqlite, cursor

我有一个列表片段，我用一个简单的光标适配器填充。但是，只有第一列绑定到布局。这是代码。

```
public class ContactList extends ListFragment

{
private ActivityDbAdapter mDbHelper;
private Long mRowId=Long.valueOf(1);
Activity mContext;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 
{
    mContext=getActivity();
    mDbHelper=new ActivityDbAdapter(mContext);
    mDbHelper.open();
    Cursor activity = mDbHelper.fetchContacts(mRowId);
    if (activity.moveToFirst())
    {

    String[] from = new String[]{ActivityDbAdapter.COLUMN_NAME_CONTACT1 ,
            ActivityDbAdapter.COLUMN_NAME_CONTACT2,ActivityDbAdapter.COLUMN_NAME_CONTACT3,
            ActivityDbAdapter.COLUMN_NAME_CONTACT4, ActivityDbAdapter.COLUMN_NAME_CONTACT5};

    int[] to = new int[]{R.id.contacts};

    SimpleCursorAdapter contacts = 
        new SimpleCursorAdapter(mContext, R.layout.activity_contact_row, activity, from, to);

    setListAdapter(contacts);
    }

    return inflater.inflate(R.layout.activity_contact_list, container, false);

}

} 
```

...所以这里只有 Contact1 出现在布局中。或者我首先拥有的任何专栏。据我了解，我不必使用 for 循环来正确绑定所有列，但您似乎这样做了？除非我在这里遗漏了什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:12:54.177

将此方法用于您的`ListFragment`而不是旧方法。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 
{
    mContext=getActivity();
    mDbHelper=new ActivityDbAdapter(mContext);

    mDbHelper.open();
    Cursor activity = mDbHelper.fetchContacts(mRowId);
    mDbHelper.close();

    String[] from = new String[]{ActivityDbAdapter.COLUMN_NAME_CONTACT1 ,
            ActivityDbAdapter.COLUMN_NAME_CONTACT2,ActivityDbAdapter.COLUMN_NAME_CONTACT3,
            ActivityDbAdapter.COLUMN_NAME_CONTACT4, ActivityDbAdapter.COLUMN_NAME_CONTACT5};

    int[] to = new int[]{R.id.contacts};

    SimpleCursorAdapter contacts = 
        new SimpleCursorAdapter(mContext, R.layout.activity_contact_row, activity, from, to);

    setListAdapter(contacts);

    return inflater.inflate(R.layout.activity_contact_list, container, false);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:50:27.637

`R.id.contacts`您的数组中只有一项 ( ) `to`；因此，只有一个视图用于/显示数据。您还需要为其他视图添加 ID。

# javascript - HIghcharts 单个绘图点颜色

> ID：14328154
> 
> 赞同：3
> 
> 时间：2013-01-14T22:43:35.773
> 
> 标签：javascript, jquery, highcharts

> **可能重复：**
> [Highstock/Highchart 无法设置个别点颜色](https://stackoverflow.com/questions/11976093/highstock-highchart-cannot-set-individual-point-color)

目前使用addPoint函数更新highcharts图，某些点需要突出显示/不同颜色...我在api参考中找不到这样做的方法，可以吗？

```
//exampleA - Series arrayId
//exampleB - Point value 
//exampleC when not null would has extra tooltip info, these points need to be a different color.

addPoint: function(exampleA, exampleB, exampleC) 
{
    mcjs.chart.series[exampleA].addPoint({ y: exampleB, exampleC });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:20:52.570

是的，有可能。

您可以更改`fillColor`属性内部`Marker`的`Data`属性。

里面的`color`属性`data`对我不起作用。

如果你想要一个绿点，你可以看看[我做的这个例子](http://jsfiddle.net/Lu2w9/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:13:43.660

是 - 颜色是您传递给 addPoint 的选项对象中的一个选项。[这是addPoint](http://api.highcharts.com/highstock#Series.addPoint%28%29)的 API 参考，[这里是](http://api.highcharts.com/highstock#series.data)对您可用的选项的描述。

如果您说想要一个绿点，您的代码最终应该或多或少看起来像这样 -

```
mcjs.chart.series[exampleA].addPoint({ fillColor: "#659355", y: exampleB, exampleC }); 
```

现在虽然你传递的对象看起来不太有效——你需要为每个值匹配一个键；exampleC 没有密钥。

# qtp - 如何从网页中捕获 QTP 中的值并将其通过电子邮件发送给 Outlook

> ID：14328156
> 
> 赞同：2
> 
> 时间：2013-01-14T22:43:48.003
> 
> 标签：qtp

我正在尝试从报告页面中捕获一个值：

这是我正在生成的报告，网页上有一个错误编号，我如何在 QTP 中捕获该值并将其复制到 Excel 文件中并将文件作为电子邮件发送。

附件是报告网页的参考图片

[![网络报告](../Images/2e2c4662bc6daadb57bf4acae285847f.png)](https://i.stack.imgur.com/G4sSk.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:48:47.797

您可以为错误的文本值创建一个输出值`WebElement`。为了识别错误元素，您可以使用匹配文本的正则表达式（类似于`\d+(\s\(\d+\))?`）。

您还应该使用视觉关系识别来获取**Total Errors**标题下的第一个字段。

从那时起，您就有了价值，发送电子邮件和/或进入 Excel 是一件简单的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:57:37.053

如果它是使用 WebTable(“TableName”).GetCellData(i, ColumnName) 使用 QTP 的 webtable 读取值。那张桌子的类别是什么？

将值写入excel的代码

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("C:\pathtoexcel.xlsx")
Set objWorksheet = objWorkbook.Worksheets(1)
strCellValue = objExcel.Cells(1, 1).Value
objWorksheet.Cells(1, 1).Value = Valuefromwebtable
objWorkbook.Save
objExcel.Quit 
```

发送电子邮件的代码

```
Set Objoutlook = CreateObject("Outlook.Application")
Set newEmailMail = Objoutlook.CreateItem(olMailItem)
newEmailMail.Subject = "Message Subject to send"
newEmailMail.Body = "Message Body "
newEmailMail.RecipIents.Add(Email Address) 'Email Address
newEmailMail.Attachments.Add(File Attachment) ' Excel file created 
newEmailMail.Send
Set Objoutlook = Nothing 
```

# html - HTML - 标签添加换行符

> ID：14328159
> 
> 赞同：4
> 
> 时间：2013-01-14T22:43:59.907
> 
> 标签：html, css

好的，所以我`<li>`让它向右浮动......就像这样：

![在此处输入图像描述](../Images/195d0c371ddbf53625b62e0dbf38bc0a.png)

这是：

```
<div id="right_menu">
<ul>
<li class="search-li"><input placeholder="Search things here..." type="text" class="search-tr" /></li>
</ul>
</div> 
```

这是CSS：

```
#right_menu {
    float:right;
    background: #575757;
}
#right_menu ul li a {
    border-left:1px solid #fff;
    border-right:0px !important;
} 
```

类`search-li`并`search-tr`没有风格。搜索菜单被环绕`#first_menu`，CSS 是：

```
#first_menu {
    background: #333 !important;
    width:100%;
    border-top:1px solid #fff;
}
#first_menu ul{
    margin: 0;
    padding: 0;
    background: #333;
    float: left;
    } 
```

无论如何，当我在......里面的盒子`<form action="search.php" method="get"> ... </form>`周围添加时，我明白了：`<input>``<li>`

![在此处输入图像描述](../Images/fab06b5e1c60a9332c8fda8527f5c6ba.png)

我该如何解决？

谢谢

编辑：再想一想，甚至不确定添加表单和按 Enter 是否会起作用......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T22:47:27.353

FORM 是块元素，因此它们添加了换行符。重置表单的 CSS，使其不会。

采用：

```
form {
   display:inline;
   margin:0;
   padding:0;
} 
```

Using`!important`是一个知道 CSS 特异性如何工作的标志。[阅读此内容](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)很好。

此外，最好从[CSS reset](http://developer.yahoo.com/yui/reset/)开始，这将完全防止此表单布局问题。

# php - PHP 变量变量

> ID：14328169
> 
> 赞同：1
> 
> 时间：2013-01-14T22:44:42.830
> 
> 标签：php, variable-assignment

我有一些生成的数组，它们的变量名存储在另一个数组中，如下所示

```
$array1 = 4x119 array;
$array2 = 4x119 array;
etc ..
$var1= [
"array1",
"array2",
etc...
]; 
```

并试图像这样循环它们

```
foreach ($var1 as $loopitem){
var_dump($$loopitem[3]);
} 
```

我怎样才能使这不那么模棱两可？

目前我相当确定它正在寻找一个称为内容的变量，`$loopitem[3]`而不是在`$arr1[3]`没有 [3] 的情况下查看 var 转储返回正确

没有 [3]

```
数组（4）{
  [0]=>
  数组（119）{

剩余的输出

```

与 [3]

```
空值

```

有什么建议么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:45:52.100

您可以使用`${$loopitem}[3]`它使其具有可读性和明确性。实际上，我*总是*将这种语法用于变量变量，因为`$$foo`很容易被误读为`$foo`.

但是，最好不要使用它们，而是使用数组！

# ios - 如何存储 CLLocationCoordinate2D？

> ID：14328173
> 
> 赞同：7
> 
> 时间：2013-01-14T22:44:56.643
> 
> 标签：ios, mkmapview, cllocation, parse-platform

我正在尝试构建一个应用程序来构建和保存类似于映射我的运行的路线。我正在使用来自 Apple 的[Breadcrumb](https://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010048)示例代码，特别是`CrumbPath`and`CrumbPathView`作为我的路线的基础。两个问题：

1.  如果我尝试访问类似的`MKMapPoint *points`对象`CrumbPath`：

    ```
    [_route lockForReading];
    NSLog(@"%@", _route.points);
    NSLog(@"%d", _route.pointCount);
    [_route unlockForReading]; 
    ```

    我的应用程序崩溃，说：

    ```
    Thread 1: EXC_BAD_ACCESS (code: 1, address: 0x9450342d) 
    ```

    我很难理解，因为在`CrumbPath.m`文件中，苹果公司的人通过显式获取写锁然后解锁它来写入“数组”，但是如果我获取读锁并尝试从中读取，它崩溃。

2.  我尝试访问 的原因`points`是试图获取`MKMapPoints`，将它们转换为`CLLocationCoordinate2D`对象并保存它们，以便我可以根据用户的请求重绘`polyline`。由于我无法访问 ，因此`points`我尝试将我发送到的`CLLocationCoordinate2D`对象保存在一个数组中以上传到我的[Parse](http://parse.com)后端，但我总是收到一条错误消息：`locationManager``_route`

    ```
    Sending 'CLLocationCoordinate2D' to parameter of incompatible type 'id' 
    ```

    这并没有让这变得更容易。有人知道我为什么会收到这些错误吗？

**位置经理代表**

```
-(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations {
    if (_userLocation.longitude != manager.location.coordinate.longitude
        && _userLocation.latitude != manager.location.coordinate.latitude) {
        _userLocation = manager.location.coordinate;
    }

    if (_isRecording) {
        if (!_route) {
            NSLog(@"lat: %f, lng: %f", _userLocation.latitude, _userLocation.longitude);
            _route = [[CrumbPath alloc] initWithCenterCoordinate:_userLocation];
            [_mapView addOverlay:_route];

            MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(_userLocation, 2000, 2000);
            [_mapView setRegion:region animated:YES];
        }else {
            MKMapRect updateRect = [_route addCoordinate:_userLocation];

            if (!MKMapRectIsNull(updateRect)) {
                MKZoomScale currentZoomScale = (CGFloat)(_mapView.bounds.size.width / _mapView.visibleMapRect.size.width);
                CGFloat lineWidth = MKRoadWidthAtZoomScale(currentZoomScale);
                updateRect = MKMapRectInset(updateRect, -lineWidth, -lineWidth);
                [_routeView setNeedsDisplayInMapRect:updateRect];
            }
        }
        [_routePoints addObject:_userLocation];

        [_route lockForReading];
        NSLog(@"%d", _route.pointCount);
        NSLog(@"%@", _route.points);
        [_route unlockForReading];
    }
} 
```

**停止记录逻辑**

```
 //stop recording
    NSLog(@"STOP");
    if (_route) {
        NSLog(@"There is a route");
        //Show route options toolbar
        [_route lockForReading];

        NSLog(@"%@", _route);
        NSLog(@"%d", _route.pointCount);
        NSLog(@"%@", _route.points);

        PFObject *routeToSave = [PFObject objectWithClassName:@"Routes"];
        //[routeToSave setObject:_route forKey:@"routePoints"];

        [_route unlockForReading];

        [routeToSave saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
            if (!error) {
                NSLog(@"%c", succeeded);
            }else {
                NSLog(@"%@", error);
            }
        }];
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T23:00:46.110

关于您的第一个问题，崩溃是因为：

```
NSLog(@"%@", _route.pointCount); 
```

它应该是：

```
NSLog(@"%d", _route.pointCount); 
```

正如我的评论中提到的，`%d`应该用于计数并且`%@`会导致崩溃。

关于您的第二个问题，您不能将 ac struct 添加到`NSArray`. 您应该`NSValue`在将其添加到数组之前将其包装起来。`CLLocationCoordinate2D`是一个 c 结构。在此处查看[文档。](http://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CoreLocationDataTypesRef/Reference/reference.html)

改变这个：

```
[_routePoints addObject:_userLocation]; 
```

到：

```
NSValue *aValue = [NSValue valueWithMKCoordinate:_userLocation];
[_routePoints addObject:aValue]; 
```

要从 中取回坐标`NSValue`，您可以使用，

```
[aValue MKCoordinateValue]; 
```

如您的错误消息中所述，您试图添加`CLLocationCoordinate2D`到需要对象的数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:52:06.927

无论您使用什么 api 来进行解析，都需要一个 id，它是指向任何对象的指针。如果我没记错的话，一个 cllocationcoordinate2d 是两个双精度的 c-struct 而不是一个对象。您可能应该创建一个小包装对象来保存这两个双精度并将它们转换为/从 CLLocationCoordinate2d 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T22:59:59.433

1：

线：`NSLog(@"%@", _route.points)`; 是错的

_route.points 不是字符串，您使用的是 NSTrig 格式化符号“%@”。

更远：

由于 CLLocationCoordinate2D 是 C-Sruct 而不是 Objective-C 对象，因此您可能想要创建自己的 GeoPoint 类。

# cuda - 如何在不隐式调用“复制”的情况下初始化 CUDA 推力向量？

> ID：14328178
> 
> 赞同：5
> 
> 时间：2013-01-14T22:45:05.147
> 
> 标签：cuda, gpgpu, thrust

我有一个指针，它引用了我想复制到设备`int *h_a`的大量数据点（在主机上）。`N`所以我这样做：

```
thrust::host_vector<int> ht_a(h_a, h_a + N);
thrust::device_vector<int> dt_a = ht_a; 
```

但是，创建`ht_a`似乎隐含地*复制* `h_a`而不是引用它，这是低效的，因为我不需要`h_a`.

我只想创建`ht_a`这样一个`&ht_a[0]`指向`h_a[0]`- 怎么做？

非常感谢。

*或者，由于除了复制到设备内存之外，我实际上并没有做任何事情`ht_a`，我很想知道我们是否可以直接在 and 之间`int*`进行`thrust::device_vector<int>`。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:59:46.950

编辑代码以显示如何从设备复制回主机：

```
#include <stdio.h>
#include <thrust/device_vector.h>
#include <thrust/copy.h>

int main() {

 int N = 10;
 int *h_a;
 int *h_b;
 h_a = (int *)malloc(N*sizeof(int));
 h_b = (int *)malloc(N*sizeof(int));
 for (int i=0; i<N; i++) {
   h_a[i] = i;
   h_b[i] = 0;
   }

 thrust::device_vector<int> dt_a(h_a, h_a + N);

 thrust::copy(dt_a.begin(), dt_a.end(), h_b);

 for (int i=0; i<N; i++)
   printf("h_b[%d] = %d\n", i, h_b[i]);
 return 0;
} 
```

# javascript - 以 UTC 格式转换日期时间

> ID：14328179
> 
> 赞同：0
> 
> 时间：2013-01-14T22:45:17.010
> 
> 标签：javascript, datetime, utc, birt

我必须将 UTC 中的日期从 birt 中的语言环境日期时间转换。唯一的问题是日期分为两个数字数据类型，例如“20131012”而不是“yyyyMMdd”和“223112”而不是“h24:mi:ss”。

谁能帮助转换受语言环境设置影响的这两种数据类型，而其他两种数据类型处于 UTC 模式？

感谢任何人刚刚读到这个..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:39:09.177

Javascript Date 对象基于[UTC 时间值](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)。当调用诸如此类的方法时`date.toString`，本地系统设置用于显示本地日期和时间。

您可以使用[Date.UTC](http://ecma-international.org/ecma-262/5.1/#sec-15.9.4.3)创建一个 UTC 时间值，使用它创建一个日期对象，然后使用日期对象获取本地（系统）等效日期和时间。

例如：

```
var utcDate = '20131012';
var utcTime = '223112';

// Get a UTC time value
var timeValue = Date.UTC(utcDate.substring(0,4),
                         utcDate.substring(4,6) - 1, // Months are zero indexed
                         utcDate.substring(6),
                         utcTime.substring(0,2),
                         utcTime.substring(2,4),
                         utcTime.substring(4)
                        ); 

// Convert time value to date object
var date = new Date(timeValue); 
```

# c# - 使用 Mono 在其他平台上使用 Java 代码

> ID：14328180
> 
> 赞同：0
> 
> 时间：2013-01-14T22:45:19.113
> 
> 标签：c#, java, binding, mono, cross-platform

我正在开发一个用 Java (6.0) 编写的项目，我想在几乎所有平台 (iOS/Android/Windows/Windows Phone/Mac/Linux) 中使用它，所以我想到了 Mono 并将代码转换为 C#但它有 40,000 行代码，所以要花很多时间来编写它。然后我意识到我可以使用 JavaBinding 来转换很多并使用它，但我不确定我是否可以在 Windows 或更重要的 iOS 中使用它。

所以基本上我的问题是“java绑定是否将Java代码转换为C#或者它只是对java代码的调用？如果是这样，我不能将它用于我的MonoTouch项目”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:36:13.240

有两种可能的方法，

1.  使用 Sharpen 将 Java 代码转换为 C# 代码。一个完美的例子，是将 Android 移植到 C# [http://blog.xamarin.com/android-in-c-sharp/](http://blog.xamarin.com/android-in-c-sharp/)
2.  使用 IKVM 在 Mono 上托管 Java 代码。[http://www.ikvm.net/](http://www.ikvm.net/)

JavaBinding 仅对 Android 的 Mono 有用，我认为它不适用于 Windows/iOS。

# javascript - 如何在javascript数组中找到索引并返回数组的其他部分？

> ID：14328181
> 
> 赞同：0
> 
> 时间：2013-01-14T22:45:20.473
> 
> 标签：javascript, arrays, indexing, find

我想在`rj: Object`下面返回，并且我有一个要匹配的索引键，`kid: 1`. `Object`考虑到主要可以包含> 10k个项目 ，最好/最快的方法是什么？

```
Object
 coord: MM.Coordinate
 data: Object
 geometry: Object
 properties: Object
   kid: 1            <== index id
   rj: Object        <== object i want
   __proto__: Object
__proto__: Object
element: HTMLDivElement
location: MM.Location
touch: true
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:53:28.887

如果需要查找很多对象，可以构建查找表。遍历您的主要对象集合，并通过它们的标识符将它们存储在键值映射（简单对象）中：

```
var mainsByKid = {}; // if the keys are integers (and not sparse), use an array
for (var i=0; i<mains.length; i++) {
     var main = mains[i],
         key = main.properties.kid; // must be unique
     mainsByKid[key] = main;
} 
```

现在您可以简单地通过以下方式访问您的对象

```
mainsByKid[1]; 
```

# java - mvn 安装 vs jar:jar

> ID：14328183
> 
> 赞同：4
> 
> 时间：2013-01-14T22:45:23.410
> 
> 标签：java, maven, build, jar, installation

“mvn install”命令与使用 jar:jar 插件有什么区别？

很明显，“安装”似乎构建了一个 jar，因此，我想知道 jar:jar 插件的需求是什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T22:55:26.700

您可以在 maven 命令行上指定两种类型的内容：

*   生命周期阶段（这些不包括`:`字符）

*   插件目标（这些包括至少一个`:`字符，取决于您对插件的指定程度，可能是`short-name:goal`或`groupId:artifactId:goal`或`groupId:artifactId:version:goal`）

共有[三个生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)：默认、干净和站点。每个生命周期都由一系列阶段组成。当您在生命周期中指定一个阶段时，Maven 将按该生命周期中的所有阶段的顺序执行，直到并包括指定的阶段。

当您指定插件目标时，将调用该插件目标并且仅调用该插件目标。

Maven 有一个*包装*的概念，它定义了一[组默认的插件绑定](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Built-in_Lifecycle_Bindings)到生命周期阶段。例如`jar`，默认情况下包装（除非您`pom.xml`包含`<packaging>...</packaging>`元素，否则默认情况下）绑定`jar:jar`到`package`阶段并绑定`install:install`到`install`阶段。

所以当你输入

```
$ mvn package 
```

Maven 将在生命周期阶段一直运行，执行绑定的插件（从生命周期或通过在 pom 中指定插件执行）。

当您键入

```
$ mvn jar:jar 
```

Maven 将只运行 jar 插件的 jar 目标。

生命周期是您想要使用的 100 次中的 99 次。

以下是您通常希望直接调用插件目标的时间

*   `jetty:run`启动 webapp 服务器

*   `surefire:test`快速重新运行测试（通常`-Dtest=...`指定特定的

*   `release:prepare release:perform`发布你的代码

*   `versions:...`对版本相关的东西进行一些更新或查询，例如`versions:display-plugin-updates`

*   `ship:ship`或`cargo:deployer-deploy`将您构建的工件推送（运送）到托管环境

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:46:55.703

`install`将工件放在您的本地（在您的机器上）maven 存储库中，`jar:jar`而不是。如果您调用`jar:jar`一个库，然后尝试在另一个项目中引用该库，它将不在您的本地存储库中。

另请注意，这`mvn package`是一种更清洁的包装方式，而不是使用`jar:jar`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T23:03:26.710

`mvn install`命令将“执行” [maven 生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)直到*安装*阶段。这意味着将执行所有先前的阶段（包括*打包*阶段）。

在一个简单的 maven jar 项目中，包阶段绑定到 maven-jar-plugin。所以执行`mvn install`将在某个时候执行`jar:jar`。

# r - 如何在 ggplot2 中为已指定尺寸美学的形状添加更大的边框？

> ID：14328185
> 
> 赞同：5
> 
> 时间：2013-01-14T22:45:35.660
> 
> 标签：r, ggplot2

我正在尝试将一组样本的几个特征绘制成各种美学。圆圈的边框颜色和大小就是其中之一。但是，如果我尝试为这些形状设置更大的基线边框，通过设置`lwd=2`，所有形状都会恢复到相同的大小并且图例消失了。我只想让圆圈有更大的边框，我该怎么做？

一个例子：

```
library(ggplot2)
testFrame <- data.frame(
  sizeVar=factor(c('a', 'a', 'a', 'a', 'b', 'b', 'b', 'b')),
  samples=rep(c('Sample1', 'Sample2'), times=4),
  features=c(rep('Feature1', times=4), rep('Feature2', times=4))
)
testPlot <- ggplot(data=testFrame, aes(x=samples, y=features))
testPlot + 
    geom_point(aes(size=sizeVar), pch=21, color='black', fill='gray') +
    scale_size_manual(values=c(9,4)) + theme_bw()
testPlot + 
   geom_point(aes(size=sizeVar), pch=21, lwd=3, color='black', fill='gray') + 
   scale_size_manual(values=c(9,4)) + theme_bw() 
```

![不带 lwd 的输出](../Images/8dff93e7ecf6a67bf8b42289b4d3deff.png) ![在此处输入图像描述](../Images/df5568de2a64ddf7c5ef41b1395af5cb.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T00:16:08.380

从您的图表开始：

```
> testPlot + 
    geom_point(aes(size=sizeVar), pch=21, color='black', fill='gray') +
    scale_size_manual(values=c(9,4)) + theme_bw() 
```

列出元素：

```
> grid.ls()

GRID.gTableParent.162
  background.1-6-6-1
  spacer.4-3-4-3
  panel.3-4-3-4
    grill.gTree.126
      panel.background.rect.121
      panel.grid.major.y.polyline.123
      panel.grid.major.x.polyline.125
    geom_point.points.116
    panel.border.rect.118
  axis-l.3-3-3-3
    axis.line.y.zeroGrob.136
    axis
  axis-b.4-4-4-4
    axis.line.x.zeroGrob.130
    axis
  xlab.5-4-5-4
  ylab.3-2-3-2
  guide-box.3-5-3-5
  title.2-4-2-4 
```

现在更改适当的元素：

```
> grid.edit("geom_point.points", grep=TRUE, gp=gpar(lwd=3)) 
```

![在此处输入图像描述](../Images/8188191b401f2882e4fbd92f0b1fc903.png)

# facebook - 使用 facebook getUser() 登录 codeigniter 返回 0

> ID：14328186
> 
> 赞同：1
> 
> 时间：2013-01-14T22:45:35.393
> 
> 标签：facebook, codeigniter, login

好吧，我正在尝试使用 codeigniter 使用 facebook 实现登录，当我调用 getUser() 函数时，我总是有 0，我尝试了所有可能的解决方案，但它们都不适合我，我不知道为什么，这是我的 facebook 库类：

```
<?php 

include(APPPATH.'libraries/facebook/facebook.php');

class Fbconnect extends Facebook {

    public $user = NULL;
    public $user_id = FALSE;
    public $fb = FALSE;
    public $fbSession = FALSE;
    public $appkey = 0;

    public function Fbconnect(){

        $ci =& get_instance();
        $ci->config->load('facebook', TRUE);
        $config = $ci->config->item('facebook');        
        parent::__construct($config);
        parse_str( $_SERVER['QUERY_STRING'], $_REQUEST );

        $this->user_id = $this->getUser();
        $me = null;
        if($this->user_id){
            try{
                $me = $this->api('/me');
                $this->user = $me;
            } catch(FacebookApiException $e){
                error_log($e);
            }
        }

    }

} 
```

这里是我的主控制器：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Main extends CI_Controller {

    public function index()
    {

            $this->load->view('index');
    }

        public function fb_request()
        {
            $this->load->library('fbconnect');
            $data = array(
                'redirect_uri' => site_url('main/handle_facebook_login'),
                'scope' => array('email','user_birthday')
            );
            redirect($this->fbconnect->getLoginUrl($data));
        }

        public function handle_facebook_login()
        {
            $this->load->library('fbconnect');
            $user = $this->fbconnect->user;
            echo "<pre>";
                print_r($user);
                echo "</pre>";
            if($user)
            {
                echo "<pre>";
                print_r($user);
                echo "</pre>";
            }
            else
            {
                echo "Could not login ... ";
            }
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T11:00:58.090

同样的问题给了我严重的偏头痛..lol 但解决问题的方法是将 index.php 包含在 fb 登录重定向 url 和您的 Facebook 应用程序站点 url 中。我将 htaccess 与 codeigniter 一起使用，因此即使在每个页面请求上都调用它，也没有在我的 URL 中使用 index.php。也许你应该试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:57:39.480

确保您的 AppId 和密钥根据您的应用程序是正确的。有时应用程序可能需要一些时间才能激活。

# android - 如何在 TextureView 上呈现 Google Maps Android API v2？

> ID：14328190
> 
> 赞同：3
> 
> 时间：2013-01-14T22:45:46.923
> 
> 标签：android, google-maps-android-api-2

根据[这个评论](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4782#c1)，Google Maps Android API v2 依赖于 SurfaceView 来显示地图。并且视图动画不适用于 SurfaceView。这是我面临的问题：[http](http://www.youtube.com/watch?v=rBWvRxV64WU) ://www.youtube.com/watch?v= rBWvRxV64WU（幻灯片动画开始时 MapView 闪烁）。我认为使用 TextureView 可能不会出现这个问题。那么，如何在 TextureView 上渲染 Google 地图？

--- 更新 ---
Google 地图团队在 API 16 上修复了这个问题：[https ://code.google.com/p/gmaps-api-issues/issues/detail?id=4839](https://code.google.com/p/gmaps-api-issues/issues/detail?id=4839)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:03:23.927

> 那么，如何在 TextureView 上渲染 Google 地图？

在 Google 找到一份工作，加入 Maps 团队，并对封闭源 Maps V2 库进行修改，以便`TextureView`在受支持的设备上使用。

否则，您无法更改它，因为它不是开源的，因此您无法修改它。

对不起！

# python - 修改 Python 模块的常见做法

> ID：14328194
> 
> 赞同：5
> 
> 时间：2013-01-14T22:46:09.683
> 
> 标签：python, module, reload

我有一个 Python 模块测试，我想编辑测试并在​​解释器的测试中运行一些函数。Python 会自动查看我在测试中编辑的函数的差异而不重新导入吗？这个动作的合适词是什么？

1.  重新导入/重新加载/重新定义的最佳实践是什么？
2.  如何有效地做到这一点？（用鼠标突出显示文本然后复制和粘贴似乎效率低下）。

**编辑**到目前为止没有提到任何工作，所以我将发布更多细节：

我的模块中有一个类，称为 Test。所以我使用了语句`from test import Test`。现在，当我尝试命令时`reload(test)`，解释器告诉我重新加载未定义。如果我这样做了，`import imp`那么`imp.reload(test)`解释器会告诉我这`test`是未定义的。这里出了什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:49:55.327

我怀疑您使用的是 Python 3，并且所有回答者都假设您使用的是 Python 2。

在 Python 3 中，`reload`从`builtins`移至[`imp`](http://docs.python.org/3.3/library/imp.html#imp.reload).

所以，答案是：

```
imp.reload(test) 
```

为了将来参考，如果您使用的是 Python 3，几乎总是值得一提，除非您知道它不相关，因为许多老前辈（阅读：您想要回答的人）会假设 2.7 .

同时，回到你的主要问题：

> 重新导入/重新加载/重新定义的最佳实践是什么？

对于简单的情况，`reload()`或者`imp.reload()`正是您想要的。（对于*超级*简单的情况，复制粘贴没有错……）

`bar`但是当你有一些类对象`foo.Bar`然后 reload时，你很容易混淆自己`foo`。它也不能很好地与`from foo import *`，这对于交互式会话通常很方便。

如果您可以启动一个新的解释器会话并导入模块，那就更干净了。如果您需要创建一堆对象来开始使用模块，您可以将它们作为全局变量临时添加到模块中，或者创建一个定义它们的包装器模块。一些 IDE 可以将所有这些都包装起来，因此只需按一些加速键序列就会导致它重新启动解释器并重新运行您`import`和所有设置的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:52:51.667

> Python 会自动查看我在测试中编辑的函数的差异而不重新导入吗？

不。

> 这个动作的合适词是什么？

请参阅内置[reload(*模块*)](http://docs.python.org/2/library/functions.html#reload)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T06:08:58.660

好吧，对于初学者来说，你绝对**不**应该有一个名为的模块`test`，因为 Python 的标准库中已经有一个。

`test`未定义，因为您导入了`Test`，而不是`test`. 你也需要`import test`。

但请注意，由于工作方式`imp.reload()`，重新加载`test` *不会*更新`Test`；那仍将引用该类的旧副本。您也必须`from test import Test`再次这样做。

完整的事件序列：

```
>>> import imp
>>> import test
>>> from test import Test
>>> Test().whatever()
# edit your code
>>> imp.reload(test)
>>> from test import Test  # or: Test = test.Test
>>> Test().whatever() 
```

这个故事的寓意是这很`reload`糟糕，你应该不惜一切代价避免它。如果您想在每次编辑库后重新运行一堆代码，只需将该代码放在一个*文件*中并运行它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T22:53:54.380

假设有一个名为的模块`data.py`包含：

> ```
> def foo():pass 
> ```

```
In [13]: import data

In [14]: dir(data)
Out[14]: ['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'foo'] 
```

现在在 shell 仍在运行时向 data.py 添加另一个函数：

> ```
> def foo():pass
> def bar():pass 
> ```

```
In [15]: import data

In [16]: dir(data)     #new function bar is not fetched by the import
                       #coz it simply loads the data object already present in memory

Out[16]: ['__builtins__', '__doc__', '__file__', '__name__', '__package__', 'foo'] 
```

用于`imp.reload()`重新加载模块对象。

```
In [17]: import imp

In [18]: imp.reload(data)
Out[18]: <module 'data' from 'data.py'>

In [19]: dir(data)
Out[19]: 
['__builtins__',
 '__doc__',
 '__file__',
 '__name__',
 '__package__',
 'bar',
 'foo']          # bar fetched 
```

`help()`上`reload()`：

> 重新加载（模块）-> 模块
> 
> 重新加载模块。该模块必须之前已成功导入。

# c# - C# 删除除一个之外的所有数据表的最佳方法

> ID：14328197
> 
> 赞同：0
> 
> 时间：2013-01-14T22:46:16.733
> 
> 标签：c#, system.data.datatable

我想删除一个数据集中的所有数据表。我试过这个： -

```
 foreach (DataTable table in DtSet.Tables)
        {
            if (table.TableName != "tblAccounts")
            {
                DtSet.Tables.Remove(table);
            }
        } 
```

但我得到一个

> “集合已修改；枚举操作可能无法执行。” 错误

.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:49:49.473

您不能在枚举期间修改集合。但你可以使用`for-loop`：

```
for (int i = DtSet.Tables.Count - 1; i >= 0; i--)
{
    var table = DtSet.Tables[i];
    if (table.TableName != "tblAccounts")
        DtSet.Tables.Remove(table);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:03:17.900

只是把它扔在那里，因为它未经测试但没有循环。

```
var accounts = DtSet.Tables["tblAccounts"];
DtSet.Tables.Clear();
DtSet.Tables.Add(accounts); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T22:50:03.810

每当您尝试在`foreach`. 它与迭代集合的方式有关。

您可以通过几种方式进行 - 一种方法是在循环中确定要删除的表，然后返回并删除它们。我认为以下将起作用：

```
var tablesToRemove = new List<DataTable>();
foreach (DataTable table in DtSet.Tables)
{
    if (table.TableName != "tblAccounts")
    {
        tablesToRemove.Add(table);
    }
}

foreach (DataTable table in tablesToRemove)
{
    DtSet.Tables.Remove(table);
} 
```

# c# - 锁定winform位置

> ID：14328202
> 
> 赞同：1
> 
> 时间：2013-01-14T22:46:51.100
> 
> 标签：c#, winforms, controls

我有一个主窗体窗口，它将弹出一个新的窗体窗口。我想锁定弹出窗体的位置，使窗口不能移动，它会与主窗体同时移动。（因此，如果用户拖动主窗体，弹出窗口也会随之移动）

在网站上进行了搜索，有些是这样的：

```
this.FormBorderStyle=System.Windows.Forms.FormBorderStyle.None 
```

我将 Locked 属性设置为 True 但这不起作用。

但我想保留边界。锁定表格的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:50:04.240

你可以做这样的事情（取自[这里](https://stackoverflow.com/questions/907830/how-do-you-prevent-a-windows-form-being-moved)）：

```
protected override void WndProc(ref Message message)
{
    const int WM_SYSCOMMAND = 0x0112;
    const int SC_MOVE = 0xF010;

    switch(message.Msg)
    {
        case WM_SYSCOMMAND:
           int command = message.WParam.ToInt32() & 0xfff0;
           if (command == SC_MOVE)
              return;
           break;
    }

    base.WndProc(ref message);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:30:33.627

```
public class Form1
{
    private Form2 Form2 = new Form2();
    private Point form2Location;
    private Point form1Location;
    private void Button1_Click(System.Object sender, System.EventArgs e)
    {
        form1Location = this.Location;
        Form2.Show();
        form2Location = Form2.Location;
    }

    private void Form1_Move(System.Object sender, System.EventArgs e)
    {
        Form2.IsMoving = true;
        Point form2OffSetLocation = new Point(this.Location.X - form2Location.X, this.Location.Y - form2Location.Y);
        Form2.Location = form2OffSetLocation;
        Form2.IsMoving = false;
    }
}    

public class Form2
{

    public bool IsMoving;
    private void Form2_Move(System.Object sender, System.EventArgs e)
    {
        if (IsMoving) return; 
        if (staticLocation.X != 0 & staticLocation.Y != 0) this.Location = staticLocation; 
    }

    private Point staticLocation;
    private void Form2_Load(System.Object sender, System.EventArgs e)
    {
        staticLocation = this.Location;
    }
} 
```

*我同意汉斯的观点，我想一旦你看到它看起来有多狡猾，你可能也会同意。*

# jquery - 选择选项时显示隐藏的 div

> ID：14328209
> 
> 赞同：4
> 
> 时间：2013-01-14T22:47:24.720
> 
> 标签：jquery, show-hide

我一生都无法弄清楚我错过了什么。

在[这个 jsFiddle](http://jsfiddle.net/eventide/BG4Dg/)中，我在 dom 上隐藏了一个带有两个文本框的 div。我想在下拉列表中选择特定选项时显示 div。

这是被隐藏/显示的 div：

```
<div id="movieAddNewDirector">
  <label id="lblMovieAddDirector">Add a New Director:</label>
  <br />
  <label for="txtMovieAddNewDirectorFirstName">First Name:</label>
  <input type="text" name="txtMovieAddNewDirectorFirstName" id="txtMovieAddNewDirectorFirstName" size="20" />
  <br />
  <label for="txtMovieAddNewDirectorLastName">Last Name:</label>
  <input type="text" name="txtMovieAddNewDirectorLastName" id="txtMovieAddNewDirectorLastName" size="20" />
</div> 
```

这是相关的jQuery代码

```
$('#ddlMovieAddDirector').change(function () {    
    var id = $(this).find('option:selected').attr('id');

    alert('id: ' + id);

    if (id == '#optMovieAddDirectorNew') {
      alert('attempting to show new director div');
      $('#movieAddNewDirector').show();
    } else {
      alert('id didn\'t match - id: ' + id);
      $('#movieAddNewDirector').hide();
    }
}); 
```

“id 不匹配”始终显示，即使选择第二个选项时，显示检测到的 id 的第一个警报显示应该显示 div 的正确 id！

我知道我在 jQuery 中有正确的 ID，但我不明白为什么这不起作用。对于显示/隐藏 div 的单选按钮选择，我有一些非常相似的工作。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T22:48:57.587

改变`if (id == '#optMovieAddDirectorNew') {`

对此：`if (id == 'optMovieAddDirectorNew') {`

“#”符号不是 id 的一部分，它仅用于在选择器中查找 id

和 JSfiddle [http://jsfiddle.net/BG4Dg/1/](http://jsfiddle.net/BG4Dg/1/)

# php - PHP preg_match_all 同一行

> ID：14328215
> 
> 赞同：2
> 
> 时间：2013-01-14T22:47:53.843
> 
> 标签：php, regex

正则表达式有问题（它们不是我的强项）。我正在尝试匹配 {{ 和 }} 之间的所有字符串，但是如果一组括号出现在同一行上，则将其视为单个匹配...示例：

```
$string = "
  Hello, kind sir
  {{SHOULD_MATCH1}} {{SHOULD_MATCH2}}
  welcome to
  {{SHOULD_MATCH3}}
  ";

preg_match_all("/{{(.*)}}/", $string, $matches);

var_dump($matches); // returns arrays with 2 results instead of 3 
```

返回：

```
array(2) {
  [0]=>
  array(2) {
    [0]=>
    string(35) "{{SHOULD_MATCH1}} {{SHOULD_MATCH2}}"
    [1]=>
    string(17) "{{SHOULD_MATCH3}}"
  }
  [1]=>
  array(2) {
    [0]=>
    string(31) "SHOULD_MATCH1}} {{SHOULD_MATCH2"
    [1]=>
    string(13) "SHOULD_MATCH3"
  }
} 
```

有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:50:33.183

[用非贪婪](http://www.regular-expressions.info/repeat.html#greedy)形式替换`*`量词。`*?`

这将使其尽可能少地匹配，同时仍然允许表达式作为一个整体进行匹配，这与其当前的尽可能匹配的行为不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:56:48.600

您可以使用以下模式之一。

1.  `{{(.+?)}`
2.  `{{([^}]+)`
3.  `{{(\w+)`
4.  `{{([[:digit:][:upper:]_]+)`
5.  `{{([\p{Lu}\p{N}_]+)`

# excel - Excel - 如何比较 2 列中的单元格，然后如果 B 列匹配，则使用 B 列中匹配单元格旁边的 C 列中的值？

> ID：14328221
> 
> 赞同：1
> 
> 时间：2013-01-14T22:48:08.790
> 
> 标签：excel, formula, vlookup

我不知道还能问谁，所以如果你能提供帮助，我将不胜感激。

我有 4 列：

在 A 列中，我有 1000 个产品 Sku 的更新列表，即。A1001 来自 C 列。在 B 列中，它是空的。在 C 列中，我有 1500 个 sku 的旧列表在 D 列中，我有一个与 C 列中的 sku 对应的名称值。即。皮塔饼

样本数据：

```
   A B C D

A10897 () A10897 皮塔饼

A15006 () A15006 蜡烛

A15008 () A15016 番茄

A15009 () A15017 牛奶

A10900 () A10900 面包

A10901 () A10901 小麦

```

到目前为止，我已经尝试了 3 个公式，但它没有返回正确的名称。

```
=IF(ISNA(VLOOKUP(E2,$B$2:$B$9999,1,FALSE)),"No",F2) 
```

什么excel公式将A列中的单元格与C列进行比较以查看它们是否匹配，如果匹配，则将C列旁边的D列中单元格的值显示到A列中匹配单元格旁边的B列单元格中。

像这样：

```
   A B C D

A10897 皮塔饼 A10897 皮塔饼

A15017 牛奶 A15006 蜡烛

A10901 小麦 A15016 番茄

...（不匹配）A15017 牛奶

...（不匹配）A10900 面包

...（不匹配）A10901 小麦

ETC...

```

请帮助*绝望*

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:57:38.490

这应该有效：

```
 =IFERROR(VLOOKUP(A2,$C$2:$D$9999,2,0),"(NO MATCH)") 
```

# c# - 我应该从我的 ScheduledTaskAgent 添加反向引用，还是从前台项目复制代码？

> ID：14328223
> 
> 赞同：1
> 
> 时间：2013-01-14T22:48:21.787
> 
> 标签：c#, visual-studio, windows-phone-8, azure-mobile-services

我添加了一个`ScheduledTaskAgent`附属于我的 WP8 项目的项目 - 我在 WP8 项目中添加了一个对项目的引用`ScheduledTaskAgent`。在`ScheduledTaskAgent`项目的`OnInvoke()`代码中，我想查询一个已经在 WP8 项目中定义的 WAMS 表。WAMS 代码对项目来说是“希腊语” `ScheduledTaskAgent`。IOW，它不承认这一点：

```
 protected override void OnInvoke(ScheduledTask task)
   {
                IMobileServiceTable<WAMS_INVITATIONS> table =     
    app.MobileService.GetTable<WAMS_INVITATIONS>();    
                MobileServiceTableQuery<String> query = <bla>;
                return await query.ToListAsync();
                . . .
    } 
```

...这并不奇怪，因为“app”是另一个项目的`App.xaml.cs`类，并且`WAMS_INVITATIONS`是另一个项目中定义要查询的表的类。那么......`ScheduledTaskAgent`项目是否可以将引用添加回引用它的前台项目，或者这个循环引用会导致问题？否则，我需要复制`MobileService`App.xaml.cs 中的声明和前台项目中的表定义类吗？

通过向 ScheduledTaskAgent 项目添加对“Windows Azure 移动服务托管客户端”的引用，我使编译器可以理解 IMobileServiceTable。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:25:26.493

kindasimple 的答案是正确的，但是一旦您成功构建代理，您可能会遇到一个已知问题：当前的移动服务 SDK 不能用于 Windows Phone 上的后台任务。SDK 会引用 UI 组件，因此您的应用可能无法通过认证。我们知道这个问题并正在修复，只是想给你一个提示。

# compression - 压缩 KML 文件

> ID：14328224
> 
> 赞同：-1
> 
> 时间：2013-01-14T22:48:24.843
> 
> 标签：compression, openlayers, kml

无论如何压缩KML文件？

我的 KML 文件创建一次 pr。夜晚。并且总是命名相同。但是最大的文件占用了将近 10mb。在具有高速互联网的计算机上下载大约需要 10 秒。我希望这个文件更小。或者如果有其他方法可以最小化文件内容，而不会丢失我想知道的任何功能:)

我使用 Openlayers 来查看地图并加载 KML 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:13:40.653

KMZ 文件是压缩的 KML 文件。

[KMZ 文件](https://developers.google.com/kml/documentation/kmzarchives)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:51:08.443

首先要尝试的是 gzip 压缩 - 看看这个 - [https://developers.google.com/speed/articles/gzip](https://developers.google.com/speed/articles/gzip)

# g++ - 带有clang但不是g ++的非静态数据成员错误

> ID：14328231
> 
> 赞同：2
> 
> 时间：2013-01-14T22:49:10.093
> 
> 标签：g++, clang

**摘要**：我有一个[代码片段](http://pastebin.com/DGnfxmYe)，可以用 g++ 编译，但不能用 clang。

**详情**：

我有一个项目可以用 g++ 很好地编译，但是当用 clang 编译时，我得到一个关于`error: use of non-static data member`. 我试图创建一个小测试用例来演示问题，但是对于小测试用例 g++ 给出了与 clang 相同的错误。

我已经向 pastebin 发布了一个 236 行文件来演示该问题： http: [//pastebin.com/DGnfxmYe](http://pastebin.com/DGnfxmYe)

当使用 g++ 4.6.3 编译时，它工作正常。但是当使用 clang 3.2 编译时，我收到以下错误消息：

```
myhashmap.hpp:169:29: error: use of non-static data member 'num_bins' of 'MyHashMap' from nested type 'iterator'
          for (_index++; (_index < num_bins) && (bins[_index] == NULL); _index++)
                                   ^~~~~~~~
myhashmap.hpp:169:43: error: use of non-static data member 'bins' of 'MyHashMap' from nested type 'iterator'
          for (_index++; (_index < num_bins) && (bins[_index] == NULL); _index++)
                                                 ^~~~
myhashmap.hpp:171:17: error: use of non-static data member 'num_bins' of 'MyHashMap' from nested type 'iterator'
          if (_index < num_bins) {
                       ^~~~~~~~
myhashmap.hpp:172:17: error: use of non-static data member 'bins' of 'MyHashMap' from nested type 'iterator'
            _theNode = bins[_index];
                       ^~~~ 
```

查看代码，我明白为什么 clang 会给出这些错误消息。我不明白为什么 g++ 首先正确编译了代码。我没有编写这段代码，但我想让它用 clang 干净地编译。所以我试图准确地理解它在做什么。我很想了解为什么它用 g++ 编译而不是用 clang 编译。g++ 是否以不同的方式解释 c++ 标准，或者代码是否利用了一些 g++ 扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:18:20.747

它在 GCC 4.8（预发行版）中失败，所以我认为这是一个已修复的错误。我找不到相应的错误报告。

要修复代码，我认为您需要`int _num_bins`向迭代器添加一个成员，并将 cotnainer 传递给 and`num_bins`中的迭代器构造函数`begin()`，`end()`因此它存储在每个迭代器对象中。

* * *

*（此外，不要为不`(void)`带参数的函数编写，那是可憎的。在 C++ 中，编写了不带参数的函数`()`）*

# mysql - MySQL LEFT JOIN 查询很慢

> ID：14328232
> 
> 赞同：1
> 
> 时间：2013-01-14T22:49:13.530
> 
> 标签：mysql, sql, join

```
SELECT bi.id, 
       bi.location, 
       bi.expense_group, 
       bi.level, 
       bi.is_active, 
       bi.type, 
       full_name, 
       Sum(DISTINCT bl.amount)                                      AS 
       BudgetAmount, 
       Sum(DISTINCT Ifnull(( bl.amount * 6 ) - ( + bal1.amount + bal2.amount + 
                                                 bal3.amount 
                                                 + bal4.amount + bal5.amount + 
                                                 bal6.amount ), 0)) AS 
       Difference, 
       Sum(DISTINCT Ifnull(Round(( + bal1.amount + bal2.amount + bal3.amount 
                                   + bal4.amount + bal5.amount + bal6.amount ) / 
                                 6), 0) 
       )                                                            AS Average, 
       Sum(DISTINCT bal1.amount)                                    AS BAL1, 
       Sum(DISTINCT bal2.amount)                                    AS BAL2, 
       Sum(DISTINCT bal3.amount)                                    AS BAL3, 
       Sum(DISTINCT bal4.amount)                                    AS BAL4, 
       Sum(DISTINCT bal5.amount)                                    AS BAL5, 
       Sum(DISTINCT bal6.amount)                                    AS BAL6 
FROM   (SELECT * 
        FROM   budget_items 
        WHERE  bi.location IS NOT NULL) AS bi 
       LEFT JOIN budget_lines AS bl 
              ON bi.id = bl.budget_item_id 
                 AND bl.budget_id = 5983 
       LEFT JOIN balance_lines AS bal1 
              ON bi.id = bal1.budget_item_id 
                 AND bal1.balance_id = 28839 
       LEFT JOIN balance_lines AS bal2 
              ON bi.id = bal2.budget_item_id 
                 AND bal2.balance_id = 28633 
       LEFT JOIN balance_lines AS bal3 
              ON bi.id = bal3.budget_item_id 
                 AND bal3.balance_id = 26664 
       LEFT JOIN balance_lines AS bal4 
              ON bi.id = bal4.budget_item_id 
                 AND bal4.balance_id = 14500 
       LEFT JOIN balance_lines AS bal5 
              ON bi.id = bal5.budget_item_id 
                 AND bal5.balance_id = 10199 
       LEFT JOIN balance_lines AS bal6 
              ON bi.id = bal6.budget_item_id 
                 AND bal6.balance_id = 7204 
GROUP  BY bi.id 
ORDER  BY bi.position 
```

如您所见，实际上只有 3 个表，但我需要为每个余额查询其中一个。这需要很多时间。我的错误在哪里？

* * *

在与@Gordon Linoff 的帖子苦苦挣扎后，我尝试自己修复它。@Gordon Linoff 是你的意思吗？

```
 SELECT bi.id, 
       bi.location, 
       bi.expense_group, 
       bi.level, 
       bi.is_active, 
       bi.type, 
       full_name, 
       (bl.bud_amount) AS BudgetAmount, 
       (coalesce(( bl.bud_amount * 6 ) - (bal.bal_amount1 + bal.bal_amount2 + bal.bal_amount3 + bal.bal_amount4 + bal.bal_amount5 + bal.bal_amount6),
                    0)) AS Difference, 
       (coalesce(Round(( bal.bal_amount1 + bal.bal_amount2 + bal.bal_amount3 + bal.bal_amount4 + bal.bal_amount5 + bal.bal_amount6 ) / 
                                 6), 0) 
           ) AS Average, 
       bal.bal_amount1                                    AS BAL1, 
       bal.bal_amount2                                    AS BAL2, 
       bal.bal_amount3                                    AS BAL3, 
       bal.bal_amount4                                    AS BAL4, 
       bal.bal_amount5                                    AS BAL5, 
       bal.bal_amount6                                    AS BAL6 
FROM (SELECT * 
      FROM   budget_items bi
      WHERE  bi.location IS NOT NULL
     ) AS bi

     LEFT JOIN
     (select budget_item_id, Sum(case when budget_id = 5983 then amount end) AS bud_amount  
     from budget_lines
      group by budget_item_id
    ) AS bl
    on bl.budget_item_id = bi.id

     JOIN
     (select budget_item_id,
             IFNULL(Sum(case when balance_id = 28839 then  amount end), 0) AS bal_amount1, 
             IFNULL(Sum(case when balance_id = 28633 then  amount end), 0) AS bal_amount2, 
             IFNULL(Sum(case when balance_id = 26664 then  amount end), 0) AS bal_amount3, 
             IFNULL(Sum(case when balance_id = 14500 then  amount end), 0) AS bal_amount4,
             IFNULL(Sum(case when balance_id = 10199 then  amount end), 0) AS bal_amount5,
             IFNULL(Sum(case when balance_id = 7204 then  amount end), 0) AS bal_amount6 
      from balance_lines
      group by budget_item_id
    ) AS bal
    on bal.budget_item_id = bi.id
ORDER BY bi.location 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:58:51.153

只要你有`sum(distinct . . . )`问题。您在左外连接上得到笛卡尔积，如果有两条线的数量相同，您的整体结果将不准确。

我想你想用这样的子查询替换所有那些左外连接：

```
select budget_item_id,
       Sum(case when budget_id = 5983 then  amount end) AS BAL, 
       Sum(case when budget_id = 28839 then  amount end) AS BAL1, 
       Sum(case when budget_id = 28633 then  amount end) AS BAL2, 
       Sum(case when budget_id = 26664 then  amount end) AS BAL3, 
       Sum(case when budget_id = 14500 then  amount end) AS BAL4,
       Sum(case when budget_id = 10199 then  amount end) AS BAL5,
       Sum(case when budget_id = 7204 then  amount end) AS BAL6 
from balance_lines
group by budget_item_id 
```

然后修复其余的查询。

这是编写查询的尝试。这无疑有语法错误：

```
SELECT bi.id, 
       bi.location, 
       bi.expense_group, 
       bi.level, 
       bi.is_active, 
       bi.type, 
       full_name, 
       (bl.bal) AS BudgetAmount, 
       (coalesce(( bl.bal * 6 ) - (bl.bal1 + bl.bal2 + bl.bal3 + bl.bal4 + bl.bal5 + bl.bal6),
                    0)) AS Difference, 
       (coalesce(Round(( bl.bal1 + bl.bal2 + bl.bal3 + bl.bal4 + bl.bal5 + bl.bal6 ) / 
                                 6), 0) 
           ) AS Average, 
       bl.bal1                                    AS BAL1, 
       bl.bal2                                    AS BAL2, 
       bl.bal3                                    AS BAL3, 
       bl.bal4                                    AS BAL4, 
       bl.bal5                                    AS BAL5, 
       bl.bal6                                    AS BAL6 
FROM (SELECT * 
      FROM   budget_items bi
      WHERE  bi.location IS NOT NULL
     ) bi left outer join
     (select budget_item_id,
             Sum(case when budget_id = 5983 then  amount end) AS BAL, 
             Sum(case when budget_id = 28839 then  amount end) AS BAL1, 
             Sum(case when budget_id = 28633 then  amount end) AS BAL2, 
             Sum(case when budget_id = 26664 then  amount end) AS BAL3, 
             Sum(case when budget_id = 14500 then  amount end) AS BAL4,
             Sum(case when budget_id = 10199 then  amount end) AS BAL5,
             Sum(case when budget_id = 7204 then  amount end) AS BAL6 
      from balance_lines
      group by budget_item_id
    ) bal
    on bal.budget_item_id = bi.id
ORDER  BY bi.position 
```

请注意，我完全删除了 external `group by`，假设它`bi.id`是预算项目表上的唯一键。

# linux - 循环从多个目录复制文件 Linux

> ID：14328242
> 
> 赞同：0
> 
> 时间：2013-01-14T22:49:52.073
> 
> 标签：linux, for-loop, copy-paste

任务是将一个文件从编号为 n=1:10 的几个子目录（例如 /dir_4/file.txt）以不同的名称（例如 file_4.txt）复制到主目录，如下所示：

```
for n=1:10
 cp /dir_n/file.txt file_n.txt
end 
```

如何在 Linux 中编写和执行这个脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:55:39.893

在 bash 中，应该这样做。

```
#!/bin/bash
for I in {1..10}; do
    cp /dir_${I}/file.txt file_${I}.txt
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:32:47.547

在 Python 中

```
 import os
   import shutil
   src="dir1"
   dest="test"
   myrange = range(1,3)
   for var in myrange:
       dfile = "test/temp_"+str(var)+".txt"
       src = "dir"+str(var)
       full_file_name = os.path.join(src, "temp.txt")
      if (os.path.isfile(full_file_name)):
                      shutil.copy(full_file_name, dfile) 
```

# javascript - javascript“静态导入”

> ID：14328245
> 
> 赞同：3
> 
> 时间：2013-01-14T22:50:10.643
> 
> 标签：javascript, namespaces

javascript中是否有与java静态导入等效的东西？例如，如果我有一个`Math`看起来像

```
com.example.Math = function() {

   function1(...) {}
   function2(...) {}

} 
```

现在，其中一些函数自然地链接在一起，这样一个函数的输出就是另一个函数的输入。我可以做类似的事情

```
com.example.Math.function2(com.example.Math.function1()); 
```

这看起来有点难看，我真的很想做类似的事情：

```
function2(function1()) 
```

但我不想将 function1 和 function2 放在全局命名空间中。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:50:46.630

就在这里。它被称为[`with`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/with)。

```
with (com.example.Math) {
    function2(function1());
} 
```

那说：

> `with`不推荐使用，并且在 ECMAScript 5严格[模式下](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)被禁止。推荐的替代方法是将要访问其属性的对象分配给临时变量。

例如：

```
var m = com.example.Math;
m.function2(m.function1()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:54:35.597

怎么样：

```
var Math = com.example.Math; 
```

进而：

```
Math.fn1( Math.fn2(...) ); 
```

我当然假设您的代码*不是*全局代码。（如果您不熟悉在 JS 中避免使用全局代码的概念，请阅读模块模式。）

* * *

你可以更进一步：

```
var Math = com.example.Math,
    func1 = Math.func1,
    func2 = Math.func2; 
```

进而：

```
func1( func2(...) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-21T16:16:44.120

我会做这样的事情：

```
var O = function() {
  var that = {};
  var PI = Math.PI;
  that.circ = function(r) {
    return 2*PI*r;  
  };
  return that;
};
var o = O();
console.log(o.circ(1)); 
```

请注意如何在方法中`PI`没有`Math`命名空间的情况下使用`O.prototype.circ`。

在 JavaScript 中，命名空间和对象没有区别，所以有些人会争辩`Math`说它不是命名空间，但由于 JavaScript 不支持这个概念，所以它和`com.mycompany.somelibrary`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T22:59:53.360

一种选择是使用闭包来包装对象。它不一定会消除对象本身，但它有助于提高可读性，如果您使用的是 JS 压缩器，则可以帮助减少输出文件的大小：

```
(function(Math) {
    Math.function2(Math.function1(...));
}(com.example.Math);) 
```

您还可以传入多个对象（即：）`function(Math, Foo) {...}(com.example.Math, com.example.Foo)`。

* * *

如果您只想直接使用几个函数，只需像这样传递它们：

```
(function(function1, function2) {
    function2(function1(...));
}(com.example.Math.function1, com.example.Math.function2);) 
```

但是，这消除了 Math 实例和函数之间的关系，因此如果您的方法依赖于实例变量，您可能会遇到一些奇怪的行为。作为一个不起作用的例子，想象这个类：

```
com.example.Counter = {
    counter: 0,
    increment: function() { this.counter++; }
} 
```

# objective-c - 我的动画无法启动

> ID：14328246
> 
> 赞同：0
> 
> 时间：2013-01-14T22:50:17.133
> 
> 标签：objective-c, animation, uikit

我已经完成此代码以在单击按钮时启动动画，当我单击按钮时应该更改按钮的内容并启动动画，但它只会更改按钮的内容？我的代码有什么问题吗？

```
@synthesize SwishImage;
@synthesize SwishButton;

- (IBAction) Swish {
if (SwishImage.isAnimating) {
    [SwishImage stopAnimating];
    [SwishButton setTitle:@"Swish" forState:UIControlStateNormal];
} else {
    [SwishImage startAnimating];
    [SwishButton setTitle:@"Searching" forState:UIControlStateNormal];
}
}
- (void)viewdidload
{

NSArray * SwishArray;
SwishArray = [[NSArray alloc] initWithObjects:
                   [UIImage imageNamed:@"Orange_dot.png"],
                   [UIImage imageNamed:@"1.png"],
                  [UIImage imageNamed:@"2.png"],
                   [UIImage imageNamed:@"3.png"],
                   [UIImage imageNamed:@"4.png"],
                   nil];
    SwishImage.animationImages=SwishArray;
    SwishImage.animationDuration = 1;
    SwishImage.animationRepeatCount = 0;

[super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:27:00.643

当我将它复制到一个空的 Xcode 项目中并在 Interface Builder 中正确链接所有内容时，图像视图开始制作动画。我假设某些东西在 Interface Builder 中没有正确链接。

话虽如此，从标准的角度来看，您的代码有点尴尬。变量名称应以小写字母开头（包括属性）。你不再需要@synthesize 并且有一个新的 NSArray 快捷方式。这是您的课程的外观：

视图控制器.h

```
@interface ViewController : UIViewController
@property (strong, nonatomic) IBOutlet UIImageView *swishImage;
@property (strong, nonatomic) IBOutlet UIButton *swishButton;
@end 
```

视图控制器.m

```
@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *swishArray = @[
               [UIImage imageNamed:@"Orange_dot.png"],
               [UIImage imageNamed:@"1.png"],
               [UIImage imageNamed:@"2.png"],
               [UIImage imageNamed:@"3.png"],
               [UIImage imageNamed:@"4.png"],
    ];
    self.swishImage.animationImages=swishArray;
    self.swishImage.animationDuration = 1;
    self.swishImage.animationRepeatCount = 0;
}

- (IBAction)swish:(id)sender {
    if (self.swishImage.isAnimating) {
        [self.swishImage stopAnimating];
        [self.swishButton setTitle:@"Swish" forState:UIControlStateNormal];
    } else {
        [self.swishImage startAnimating];
        [self.swishButton setTitle:@"Searching" forState:UIControlStateNormal];
    }
}

@end 
```

然后只需选择您的图像视图并转到 Connections Inspector。您应该看到标题为“引用插座”的部分，确保 swishImage 已连接到您的视图控制器。

# vb.net - 使用 VB.net 连接到 Oracle

> ID：14328248
> 
> 赞同：0
> 
> 时间：2013-01-14T22:50:27.193
> 
> 标签：vb.net, oracle

我正在使用 Oracle 11g，并试图让它连接到 VB.net。我已经安装了 Oracle 数据提供程序。我可以访问示例文件夹下的 tnsnames.ora。但是由于某种原因我无法找到 listener.ora 文件。尝试连接到数据库时出现以下错误：ORA-12560: TNS: 协议适配器错误。我试图让我的数据库通过服务运行，但没有一个显示我的数据库。

希望我很清楚，我会提出任何建议，为什么没有侦听器文件以及为什么会发生此错误。我已经尝试过教程，使用此链接[http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/dotnet/GettingStartedVBVersion/GettingStartedNET_VBVersion.htm](http://www.oracle.com/webfolder/technetwork/tutorials/obe/db/dotnet/GettingStartedVBVersion/GettingStartedNET_VBVersion.htm)并且还使用了向导但仍然收到相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-01-24T04:51:00.733

好的。为您的数据库安装带有 odt 的 ODAC。（32 位）。不要编辑和 tns 详细信息，并将 oracledataaccess.dll 的引用添加到您的项目中。导入这两个

```
Imports Oracle.DataAccess.Client
Imports Oracle.DataAccess.Types 
```

然后添加行

```
Dim oradb As String = "Data Source=*your tns entry goes here*" + "User Id=uname;Password=pass;"
Dim conn As New OracleConnection(oradb)
conn.open() 
```

这为我完成了工作。如果可行，请将数据添加到您的 tns 文件中，因为不建议将连接字符串保留在代码中。

# settings - 从 account-authenticator accountPreferences 屏幕启动 Intent？

> ID：14328253
> 
> 赞同：1
> 
> 时间：2013-01-14T22:50:43.407
> 
> 标签：settings, android-preferences, preferenceactivity, accountmanager

我在我的应用程序中包含了 AccountManager 代码，以使用户能够从他们的设置应用程序中创建和管理他们的帐户。

我在我的帐户身份验证器定义中的“accountPreferences”首选项文件中进行了链接，这些选项在“设置”>“帐户”>“我的应用程序”屏幕中正确显示。当我点击其中一个时，我没有得到我链接的活动，而是得到：

```
01-14 14:47:27.304: ERROR/AndroidRuntime(27708): FATAL EXCEPTION: main
    android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?
    at android.app.ContextImpl.startActivity(ContextImpl.java:944)
    at android.app.ContextImpl.startActivity(ContextImpl.java:931)
    at android.preference.Preference.performClick(Preference.java:967)
    at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:215) 
```

我将 PreferenceScreen 中的意图定义为：

```
<intent
    android:action="android.intent.action.VIEW"
    android:targetPackage="com.myapp.android"
    android:targetClass="com.myapp.android.activities.AccountForwardingActivity"/> 
```

并且目标活动也按照您的预期定义，除了意图过滤器之外没有其他特殊标志来匹配该操作（我还列出了其他自定义操作）。

```
<activity android:name=".activities.AccountForwardingActivity"
    android:theme="@style/Theme.MyApp"
    android:launchMode="singleTask">
    <intent-filter>
        <action android:name="com.myapp.android.PAYMENT_TYPES"/>
        <action android:name="com.myapp.android.ADDRESS_LIST"/>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

我究竟做错了什么？如何将这个从 Settings.apk 启动的意图标记为新任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T00:26:16.190

我的问题是将 Preference Screens 放在我的 PreferenceCategory 中。

这工作正常：

```
<PreferenceCategory android:title="General Settings" />
<PreferenceScreen
    android:title="Account Settings"
    android:summary="Favorites, Orders, and more.">
    <intent
        android:action="android.intent.action.VIEW"
        android:targetPackage="com.myapp.android"
        android:targetClass="com.myapp.android.activities.AccountForwardingActivity"/>
</PreferenceScreen> 
```

将 PreferenceScreen 嵌套在 PreferenceCategory 中不起作用，并导致上述错误。

# java - 如何在 Java 中将 TemporalType.TIMESTAMP 转换为 Date()？

> ID：14328255
> 
> 赞同：5
> 
> 时间：2013-01-14T22:50:54.170
> 
> 标签：java, sql, timestamp

我有一个`@Entity`

```
@Entity
@Table(name = "variable")
@XmlRootElement
public class Variable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;

    @Column(unique = true, nullable = false)
    private String name;

    @Column
    @Enumerated(EnumType.STRING)
    private VariableType type;

    @Column(nullable = false)
    private String units;

    @Column
    private String description;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "created_on", nullable = false)
    private Date createdOn;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "retired_on", nullable = true)
    private Date retiredOn;

    @Column(nullable = false)
    private boolean core;
} 
```

当我使用插入数据时`VariableManager`，它会在数据库中正确运行

```
variableCrudService.create(new Variable(name, type, units, description, new Date(), core)); 
```

我可以在日志中看到

```
 added variable id=13 name=v4 type=String units=u4 description=created with web service createdOn=2013-01-14 14:43:57.0 retiredOn=null core=true 
```

并在数据库 mysql> select * from variable;

```
+----+------+------------+-------+--------------------------+---------------------+------------+------+
| id | name | type       | units | description              | created_on          | retired_on | core |
+----+------+------------+-------+--------------------------+---------------------+------------+------+
|  1 | v1   | Double     | u1    | created via migration    | 2013-01-14 13:15:19 | NULL       |    1 |
|  2 | v2   | String     | u2    | created via migration    | 2013-01-14 13:15:19 | NULL       |    1 |
|  3 | v3   | BigDecimal | u3    | created via migration    | 2013-01-14 13:15:19 | NULL       |    0 |
| 12 | v4   | String     | u4    | created with web service | 2013-01-14 14:41:31 | NULL       |    1 |
+----+------+------------+-------+--------------------------+---------------------+------------+------+
4 rows in set (0.00 sec) 
```

但是当我使用 curl 进行测试时，我得到了奇怪格式的时间戳

```
[
    {
        "core": true, 
        "createdOn": 1358198119000, 
        "description": "created via migration", 
        "id": 1, 
        "name": "v1", 
        "retiredOn": null, 
        "type": "Double", 
        "units": "u1"
    }, 
    {
        "core": true, 
        "createdOn": 1358198119000, 
        "description": "created via migration", 
        "id": 2, 
        "name": "v2", 
        "retiredOn": null, 
        "type": "String", 
        "units": "u2"
    }, 
    {
        "core": false, 
        "createdOn": 1358198119000, 
        "description": "created via migration", 
        "id": 3, 
        "name": "v3", 
        "retiredOn": null, 
        "type": "BigDecimal", 
        "units": "u3"
    }, 
    {
        "core": true, 
        "createdOn": 1358203437000, 
        "description": "created with web service", 
        "id": 13, 
        "name": "v4", 
        "retiredOn": null, 
        "type": "String", 
        "units": "u4"
    }
] 
```

这是怎么回事？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:01:39.223

我认为日期值是正确的，但可能不是您想要的格式。您可以尝试创建自定义日期适配器以确保 JAXB 以正确的格式解组值。看看这个：[jaxb unmarshal timestamp](https://stackoverflow.com/questions/2519432/jaxb-unmarshal-timestamp)

# ruby-on-rails - heroku scale web=1 返回“没有 web 这样的类型”

> ID：14328256
> 
> 赞同：4
> 
> 时间：2013-01-14T22:50:54.197
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, scale

我正在尝试为已经在生产中拥有应用程序的客户端设置临时服务器。使用 8 个网络测功机扩大生产规模。

我创建了一个临时应用程序并推送了代码。当我运行时：

```
heroku scale web=1 --app=myapp-staging 
```

我得到：

```
Scaling web processes... failed
!    No such type as web 
```

在这两种情况下，procfile 完全相同。它只有两行，看起来像这样：

```
web: bundle exec rails server thin -p $PORT -e $RACK_ENV
worker: bundle exec rake jobs:work 
```

在应用程序配置中，我将 $PORT 设置为 80 并将 $RACK_ENV 设置为“生产”。导轨是 3.2.8。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:01:25.457

它必须是大写`Procfile`的。如果你这样做`heroku run bash`并检查`ls`文件是否真的存在？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:46:07.303

只需创建一个简单的文本文件： 具有以下内容的 Procfile：**用于****`web: target/start -Dhttp.port=${PORT} ${JAVA_OPTS}`**playframework 应用程序或**`web: sh target/bin/webapp`**示例 java web 应用程序。

# javascript - 如何确定文件是否已在 JavaScript 中被选中？

> ID：14328257
> 
> 赞同：2
> 
> 时间：2013-01-14T22:50:55.757
> 
> 标签：javascript, html

我正在使用 JavaScript 来验证上传表单，其中一个条件是检查是否选择了任何文件。我认为这很简单，但我无法让它工作。此代码无效吗？var 文件适用于其他条件，所以不是这样

```
var file = document.getElementById('file');

if(file.value =="") {
    alert("no file selected")
    return false;
}

<input  name="uploaded" type="file" id="file" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T23:12:54.520

您可以使用以下示例：

```
var fileInput = document.getElementById('file');
fileInput.onchange = function () {
    var input = this.files[0]; 
    if (input) {
        //process input.
    } else {
        alert("Please select a file.");
    }
}; 
```

希望这可以帮助。

# java - kyotocabinet java绑定安装错误

> ID：14328258
> 
> 赞同：0
> 
> 时间：2013-01-14T22:51:01.763
> 
> 标签：java, kyotocabinet

我正在尝试安装 kyotocabinet 的 java 绑定。我使用mac端口安装kyotocabinet（1.2.76）。然后我下载并解压了kyoto java binding 1.24。

接下来，我将当前目录设置为解压缩京都 java 绑定的位置。

现在的问题是：当我运行 ./configure 时，我收到错误“configure: error: kccommon.h is required”。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T16:29:28.017

问题是 ./configure 找不到 macports 安装。

使用以下命令告诉配置原始库的位置：

```
CPPFLAGS="-I/System/Library/Frameworks/JavaVM.framework/Versions/A/Headers" ./configure --with-kc=/opt/local/ 
```

我还添加了 CPPFLAGS，因为在我的 Mac（10.8.3）上也找不到 jni 标头。

make 也会失败，为了让这个工作我附加

```
-I/System/Library/Frameworks/JavaVM.framework/Versions/A/Headers 
```

到 ./configure 创建的 Makefile 中的 CPPFLAGS 参数。可能有一种不那么老套的方式，但这应该可行。

前段时间我在这里写了一个更详细的 HowTo：http: [//jhoff.de/kyotocabinet-on-mac/](http://jhoff.de/kyotocabinet-on-mac/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T03:12:34.483

需要先安装c源码包，再安装java客户端见： http: [//fallabs.com/kyotocabinet/spex.html#installation](http://fallabs.com/kyotocabinet/spex.html#installation)

# templates - 如何向节奏模板提供数据？

> ID：14328266
> 
> 赞同：0
> 
> 时间：2013-01-14T22:51:28.080
> 
> 标签：templates, emacs, elisp

我正在尝试将自动插入和速度模板结合起来，以自动用正确的内容填充新文件。

我的目标是让自动插入调用速度模板，为它提供一些数据（例如类名）。

像这样的东西：

```
(eval-after-load 'autoinsert
'(define-auto-insert
     (cons "\\.\\([Hh]\\|hh\\|hpp\\)\\'" "My C / C++ header")
     (lambda()
         (tempo-template-c++-class)))) 
```

我想为 C++ 类模板提供缓冲区的文件名，以便它可以很好地扩展。理想情况下，创建一个名为“foo.h”的文件将使用“foo”作为数据扩展模板，从而创建“foo”类。

我尝试按照[Tempo Manual 中的](http://www.xemacs.org/Documentation/packages/html/tempo_5.html)说明使用“保存列表” ，但到目前为止还没有运气。

谢谢您的帮助。

顺便问一下，有没有比这更好的方法

```
(file-name-sans-extension (file-name-nondirectory buffer-file-name)) 
```

从文件中获取类名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T22:09:02.503

`C-h f tempo-define-template RET`给出模板元素列表及其含义：

```
A string: It is sent to the hooks in `tempo-insert-string-functions',
and the result is inserted.
...
Anything else: It is evaluated and the result is treated as an
element to be inserted.  One additional tag is useful for these
cases.  If an expression returns a list '(l foo bar), the elements
after `l' will be inserted according to the usual rules.  This makes
it possible to return several elements from one expression. 
```

因此，只需将`(file-name-sans-extension (file-name-nondirectory buffer-file-name))`模板放入您想要类名的位置（是的，我认为这确实是从文件名中获取类名的最佳方法）。

# css - CSS 尺寸声明

> ID：14328268
> 
> 赞同：4
> 
> 时间：2013-01-14T22:51:49.623
> 
> 标签：css, coding-style, standards

在 CSS 中定义边距/填充等大小时，我经常错过值 '0' 的 'px' 例如

```
.myClass {
  5px 0 0 5px
} 
```

最近我的同事告诉我要包含“px”

```
.myClass {
  5px 0px 0px 5px
} 
```

是否有任何优点或缺点或任何一种方法？或者这只是偏好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:53:29.450

没有缺点，你可以使用没有“px”的 0。

> 零长度可以表示为“0”。（换句话说，对于零长度，单位标识符是可选的。）

[http://www.w3.org/TR/css3-values/#lengths](http://www.w3.org/TR/css3-values/#lengths)

编辑：这个问题也已经被问过了

*   [CSS中零像素的大小有或没有'px'后缀？](https://stackoverflow.com/questions/5359222/)
*   [在 CSS 中指定 0 值时，我应该明确标记单位还是省略？](https://stackoverflow.com/questions/7923042/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:57:48.597

这是关于css中单位的简要概述，我认为非常有用：

[CSS 单位 (w3c)](http://www.w3.org/Style/Examples/007/units.en.html)

一般来说，最好声明您使用的单位，而 0 始终相同，因此如果您有 0 值（零），则不必编写单位，如果您确实编写单位，则没有优势

（相反，对于您编写的每个不必要的单元，如果未优化，您的 css 文件会大 2 个字节：D）

# c - 前面带有 (void *) 的取消引用

> ID：14328270
> 
> 赞同：0
> 
> 时间：2013-01-14T22:51:52.110
> 
> 标签：c, pointers, dereference

我对取消引用 C 指针有一些疑问。给定以下代码：

```
void *vptr; // declare as a void pointer type
int val = 1;
int *iptr;

// void type can hold any pointer type or reference
iptr = &val;
vptr = iptr;
printf("iptr=%p, vptr=%p\n", (void *)iptr, (void *)vptr); 
```

当我们这样做`(void *)iptr`时，我们实际上在打印什么？我认为在取消引用时，它应该打印数字 1，但它实际上打印了一个地址。这是为什么？为什么要`(void *)`在前面添加才能打印地址？还`iptr`不够吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:54:44.393

> 当我们执行 (void *)iptr 时，我们实际打印的是什么？

您正在`iptr`以实现定义的方式打印指针的值。

> 我以为取消引用时应该打印数字1，但实际上打印的是地址

您没有通过`(void *)`操作取消引用任何内容，您正在转换为 `void *`. 要打印所指向的对象的值，`iptr`您需要使用`d`带有参数的转换说明符`*iptr`（这里是取消引用`iptr`指针）。

> 为什么要在前面加上（void *）才能打印地址？

因为`p`转换说明符需要类型的参数`void *`。

> iptr 还不够吗？

`iptr`is a `int *`but`p`转换说明符需要 a `void *`，因此如果没有强制转换，它将调用未定义的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:55:09.657

编写`(void*)iptr`时，将*指向 int*的*指针转换为指向 void*的指针。取消引用指针被写为`*iptr`. 这将采取价值`iptr`点。

当您`iptr`使用 format打印时`%p`，您会打印 iptr 指向的地址。它与 相同`&val`。如果要打印`iptr`指向的值，请使用格式`%d`

```
printf("*iptr=%d\n", *iptr); 
```

这将显示

> *iptr=1

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T22:56:14.857

要取消引用 C/C++ 中的指针，请使用`*`符号。您实际上在做的是转换`iptr`为 void 指针。因此，您会看到打印的地址。

**试试这个** `printf("iptr=%p, vptr=%p\n", *iptr, (void *)vptr);`:)

# c# - 一个数据库具有多个上下文的 EF 初始化程序

> ID：14328272
> 
> 赞同：4
> 
> 时间：2013-01-14T22:52:04.710
> 
> 标签：c#, sql-server-2008, entity-framework, ef-code-first

我有一个带有 SQL 数据库的现有应用程序，该数据库已使用数据库优先模型进行编码（每次我有架构更改时都会创建一个 EDMX 文件）。

已经完成了一些额外的开发（支持原始应用程序的 Windows 服务），它使用 EF POCO/DbContext 作为数据层而不是 EF EDMX 文件。没有在 DbContexts 中配置初始化设置，但它们从未修改数据库，因为 DbSet 对象始终与表匹配。

现在，我编写了一个单独的应用程序，它使用现有数据库但只使用它自己的新表，它使用 EF 初始化程序自行创建。我曾认为这是使用 EF Code First 来管理这些新表的好时机。我第一次运行应用程序时一切正常，但现在我从我的一些原始 EF POCO DbContexts（从未使用过初始化程序）中得到了这个错误。

> 自创建数据库以来，支持“ServerContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库

经过一番调查，我发现 EF 将其架构的哈希与某处 sql 服务器中存储的一些哈希进行比较。在上下文实际使用数据库上的初始化程序之前，该值不存在（在我的情况下，直到最近的应用程序添加了它的表）。

现在，我的其他 DbContexts 在读取现在存在的哈希值时抛出错误，并且它与自己的不匹配。使用 EDMX 的 EF 连接没有任何错误。

似乎解决方案是将这条线放在`protected override void OnModelCreating(DbModelBuilder modelBuilder)`所有遇到问题的 DbContexts 中

```
Database.SetInitializer<NameOfThisContext>(null); 
```

但是，如果稍后我想编写另一个应用程序并让它首先使用 EF 代码再次创建自己的表，那么现在我将永远无法协调这个理论上甚至更新的上下文和现在导致问题的上下文之间的哈希值.

有没有办法清除 EF 存储在数据库中的哈希？EF 是否足够智能以仅更改在当前上下文中作为 DbSet 存在的表？任何见解表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:08:08.477

是的，有界数据库上下文实际上是一种很好的做法。例如，一个基本上下文类，要使用与 DB 的公共连接，每个子类都使用 Database.SetInitializer(null); 正如你所建议的。

然后继续并拥有 1 个具有“数据库视图”的大型上下文，该上下文负责所有迁移，并且只有该上下文应该这样做。单一的事实来源。

拥有多个负责数据库迁移的上下文是一场噩梦，我认为您无法解决。弄乱由代码优先迁移创建的系统条目只能以泪水告终。

正是你描述的主题，我在 A julie Lerman 视频中看到。她建议的解决方案是一个单一的“迁移”上下文，然后使用许多有界数据库上下文。

如果您有一个复数帐户： [http ://pluralsight.com/training/players/PsodPlayer?author=julie-lerman&name=efarchitecture-m2-boundedcontext&mode=live&clip=11&course=efarchitecture](http://pluralsight.com/training/players/PsodPlayer?author=julie-lerman&name=efarchitecture-m2-boundedcontext&mode=live&clip=11&course=efarchitecture)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:35:01.317

你用的是什么EF版本？EF Code First 用于在`EdmMetadata`表中存储 SSDL 的哈希值。然后在 .NET Framework 4.3 中发生了一些变化，EdmMetadata 表被替换为`__MigrationsHistory`表（有关更多详细信息，请参阅[此博客文章](http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/)）。但在我看来，您真正关心的是[多租户迁移](http://entityframework.codeplex.com/wikipage?title=Multi-tenant%20Migrations)，您可以在其中使用同一个数据库拥有多个上下文。此功能已在[EF6中引入](http://entityframework.codeplex.com)- （目前 Aplpha2 版本是公开可用的）另外，请注意 EdmMetadata/__MigrationHistory 表特定于 CodeFirst。如果您使用设计器（模型优先/数据库优先），则不会在数据库中存储其他信息，并且不会检查 EF 模型是否与数据库匹配。这可能导致难以调试错误和/或数据损坏。

# actionscript-3 - 需要我的 Adob e Air 桌面应用程序使系统托盘图标闪烁

> ID：14328279
> 
> 赞同：0
> 
> 时间：2013-01-14T22:52:42.227
> 
> 标签：actionscript-3, air, flash-cs5

我在 Flash CS5 中创建了一个非常简单的 Adob​​e Air 桌面应用程序。该应用程序只是一个 400 x 200 的小窗口，它具有一个动态文本字段，该字段使用 URLRequest 加载位于 Internet 上的“.txt”文件。该应用程序以设定的时间间隔检查新文件，现在每 5 分钟一次。

我需要找到一种方法让应用程序闪烁系统托盘图标或在应用程序本身中闪烁一个按钮，当加载“新”文件时，查看“.txt”文件的时间/日期戳。不仅仅是当它再次加载文件时。

我提前道歉我对 Adob​​e Air 和 Flash Actionscript 3.0 非常陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:39:17.813

对于桌面（非移动）AIR 应用程序，您可以使用 NativeWindow 类的[nofityUser](http://help.adobe.com/en_US/air/reference/html/flash/display/NativeWindow.html#notifyUser%28%29)函数。

例子：

```
import flash.desktop.NotificationType;
import flash.events.MouseEvent;

function notifyMe(aNotificationType:String):void
{
    if(NativeWindow.supportsNotification)
    {
        stage.nativeWindow.notifyUser(aNotificationType);
    }
    else
    {
        trace("Notification not supported on this OS");
    }
}

function onStageClicked(e:MouseEvent):void
{
    // You could also pass NotificationType.CRITICAL here
    notifyMe(NotificationType.INFORMATIONAL);
}
stage.addEventListener(MouseEvent.CLICK, onStageClicked); 
```

# jquery - 当目标未定义时，jQuery扩展是否创建一个空对象

> ID：14328284
> 
> 赞同：0
> 
> 时间：2013-01-14T22:53:02.447
> 
> 标签：jquery

使用 jQuery 扩展功能并遇到了我试图扩展未定义的目标对象的情况。我没有收到任何错误，但源对象未按预期扩展。我曾假设 jQuery 会创建一个空白对象并扩展到该对象，但情况似乎并非如此。我可以通过自己创建空对象来解决这个问题，但我正在寻找一些确认，即 jQuery 的扩展就是这种情况。我在 jQuery Api 中找不到关于目标对象未定义的任何内容。

编辑：对不起，我应该包括一个 JSFiddle -[在这里](http://jsfiddle.net/RgpDb/)或看下面的例子。这样做需要修改我的问题。如果您查看小提琴选项对象存在，但我试图扩展的属性不存在。这就是我的问题所在。我猜 jQuery 不会以这种方式创建空属性。我需要手动将属性添加到对象中吗？

```
options = {newdata:true};

$("#click").click(function(){
  console.log(options);
  someFunc(options);
});

function someFunc(options) {
  $.extend(options.data, {
    someNewData: true
  });
  console.log(options);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:58:41.733

读取相关的[jQuery 源文件](https://github.com/jquery/jquery/blob/master/src/core.js#L270)

```
target = arguments[0] || {}; 
```

使用发送到的第一个参数`jQuery.extend`。如果它是假的或未定义的，将创建一个新的空对象。`target` 然后由`jquery.extend`.

如果您要执行以下操作：

```
var target = undefined;
var data = {'hello': 'world'};
jQuery.extend(target, data); 
```

`target`还是会`undefined`。如果您想使用`target`可能未定义的 a，您必须`jQuery.extend`像这样使用：

```
var target = undefined;
var data = {'hello': 'world'};
target = jQuery.extend(target, data); 
```

处理您的示例代码，您需要执行以下操作：

```
function someFunc(options) {
    options.data = $.extend(options.data, {
        someNewData: true
    });
    console.log(options);
} 
```

请注意如何将 的返回值`jQuery.extend`分配给`options.data`。

# node.js - Heroku Node.JS 错误

> ID：14328286
> 
> 赞同：0
> 
> 时间：2013-01-14T22:53:20.230
> 
> 标签：node.js, heroku

在我部署了我的 node.js 应用程序之后，Heroku 给了我这个错误。你知道错误信息是什么意思吗？谢谢！

```
2013-01-14T22:50:34+00:00 heroku[web.1]: State changed from crashed to starting
2013-01-14T22:50:36+00:00 heroku[web.1]: Starting process with command `node app.js`
2013-01-14T22:50:37+00:00 app[web.1]: 
2013-01-14T22:50:37+00:00 app[web.1]: /app/node_modules/express/lib/router/index.js:252
2013-01-14T22:50:37+00:00 app[web.1]:     throw new Error(msg);
2013-01-14T22:50:37+00:00 app[web.1]:           ^
2013-01-14T22:50:37+00:00 app[web.1]: Error: .get() requires callback functions but got a [object Undefined]
2013-01-14T22:50:37+00:00 app[web.1]:     at Router.route.Route.sensitive (/app/node_modules/express/lib/router/index.js:252:11)
2013-01-14T22:50:37+00:00 app[web.1]:     at Array.forEach (native)
2013-01-14T22:50:37+00:00 app[web.1]:     at Router.route (/app/node_modules/express/lib/router/index.js:248:13)
2013-01-14T22:50:37+00:00 app[web.1]:     at Router.methods.forEach.Router.(anonymous function) [as get] (/app/node_modules/express/lib/router/index.js:270:16)
2013-01-14T22:50:37+00:00 app[web.1]:     at Function.methods.forEach.app.(anonymous function) [as get] (/app/node_modules/express/lib/application.js:411:26)
2013-01-14T22:50:37+00:00 app[web.1]:     at Routes.self.init (/app/routes.js:23:9)
2013-01-14T22:50:37+00:00 app[web.1]:     at Object.<anonymous> (/app/app.js:42:8)
2013-01-14T22:50:37+00:00 app[web.1]:     at Module._compile (module.js:449:26)
2013-01-14T22:50:37+00:00 app[web.1]:     at Object.Module._extensions..js (module.js:467:10)
2013-01-14T22:50:37+00:00 app[web.1]:     at Module.load (module.js:356:32)
2013-01-14T22:50:38+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-14T22:50:38+00:00 heroku[web.1]: Process exited with status 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:11:37.107

尝试检查您的 /app/routes.js 文件，会有一个没有两个参数的路由。尝试在第 23 行注释掉。

或者没有正确定义，但是这个问题不应该与 Heroku 相关，当你在本地启动 node app.js 时它应该会抛出一个错误*耸耸肩*

希望您设法对其进行排序！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:13:35.013

似乎这是您的应用程序的问题，而不是与 Heroku 相关的问题。

您应该尝试在本地运行该项目，并找出问题所在。

检查你的 `app/routes.js' 文件。

# wpf - 我应该如何将 WPF MainWindow“mainloop”与应用程序逻辑的“mainloop”联系起来

> ID：14328289
> 
> 赞同：0
> 
> 时间：2013-01-14T22:53:47.327
> 
> 标签：wpf, visual-studio, window, mvp

当我们在 Visual Studio (2010) 中创建 WPF 项目时，它会自动创建一个 MainWindow.xaml，其代码隐藏包含一个 MainWindow 类，其中包含一个`InitializeComponent()`。我表面上知道，在项目文件的某个地方，有一个`main()`与演示文稿等效的实际功能，因此当加载应用程序 GUI 时，GUI 事件会在应用程序层“向下”处理 - 一旦它们存在。

我计划在 Model-View-Presenter 应用程序中开发一些东西，并且我已经在模拟非常基本的域逻辑和应用程序外观。

我的疑问是：当我有我的域逻辑时，我应该如何将 Presenter 与应用程序外观连接起来，或者更务实的是，我应该在哪里以及如何（在项目文件中）开始从空白 WPF 应用程序“充实”应用程序在 Visual Studio 中创建。我做了类似添加现有项目的东西，但已经过时了。

（编辑：来自[设计模式书](http://books.google.com.br/books/about/Analysis_Patterns.html?id=4V8pZmpwmBYC&redir_esc=y)：“以域模型中的特定对象作为主题打开应用程序外观。该主题充当外观完成的所有操作的起点。”这似乎很好开始为发起...）

是否有任何常见、明显或最佳实践的方法？

（另外，如果有人可以为这个问题建议/编辑一个更好的标题，我将不胜感激）

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:57:05.667

Microsoft 的本指南（虽然有点旧）很好地解释了 Rich Gui 应用程序的层和部分：http: [//msdn.microsoft.com/en-us/library/ee658087.aspx](http://msdn.microsoft.com/en-us/library/ee658087.aspx)

* * *

您实际上如何构建项目和文件完全取决于您。您可以在一个项目中构建一个独立的应用程序。您将无法很容易地重用该代码，但您的 WPF 应用程序不会注意到。

您可以通过多种方式对课程进行分组。按命名空间，按程序集（项目），嵌套类等...何时使用通常取决于重用或分布在不同的机器上。

当您构建一个 UI 部件和一个 Web 服务部件时，您可能会将它们分别放在不同的项目中。

当您想在网站、Windows 应用程序和手机应用程序中重复使用您的业务课程时，您可能希望将它们分别放在不同的项目中。

分离成项目可以防止您在类之间创建循环依赖关系。

通常，您会从 UI 中获得一系列项目，这些项目引用了引用数据层的业务层等。而且您经常会看到一些交叉关注点（例如日志记录和安全性），它们是来自这些“层”中的每一个的引用'。

最后，层可以映射到项目（程序集）或命名空间（项目内）。你选择哪一个取决于你。

* * *

在 WPF 项目中，应用程序入口点由 App.Xaml 指定。您会在其中找到对要加载的主表单的引用。

```
 <Application x:Class="WpfApplication1.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml"> <-- Start up here -->
    <Application.Resources>

    </Application.Resources>
 </Application> 
```

实际的入口点在您的项目设置中定义： ![启动对象](../Images/156d4b380b108d3e1377c5a8b68b9f7b.png)

您可以启动 App.xaml.cs 中的任何初始化代码。最简单的方法是通过订阅`OnStart`事件或`OnLoadCompleted`事件。您还可以在 MainWindow.xaml.cs 代码中启动您的逻辑。将实际逻辑放在一个单独的类中，并从您的 OnStart 或 OnLoadCompleted 事件中引用它。

![启动事件](../Images/e81b5beb7838d7c324bda9db82479fc0.png)

并在那里添加您自己的代码

```
/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application
{

    private void Application_Startup(object sender, StartupEventArgs e)
    {

    }
} 
```

一种更好、更面向对象且可单元测试的方法是使用[Prism](http://msdn.microsoft.com/en-us/library/ff648465.aspx)或[MVVM Light](http://mvvmlight.codeplex.com/)。这些框架的范围是如此之大，以至于它们保证了自己的主题。

我不确定你为什么想要一个主循环。除非你打算做某种游戏或 3D 渲染。在其他情况下，您可以通过向可见对象添加命令并让 Windows 处理主要输入注册和事件分派就足够了。对于长时间运行的任务，您可以使用线程在后台完成（[再次不同的主题](http://www.codeproject.com/Articles/58836/Using-Background-Process-in-WPF)）。

# java - App Engine 最大文件大小超出错误 413

> ID：14328292
> 
> 赞同：1
> 
> 时间：2013-01-14T22:53:54.377
> 
> 标签：java, google-app-engine, file-upload, filesize, blobstore

我对用户可以使用该`UploadOptions`方法将图像上传到 GAE blobstore 的大小进行了限制。当上传的文件太大时，我会被重定向到这个页面：

> 错误 413 您的客户端发出的请求过大。超出每个 Blob 的最大上传大小限制。

如何防止重定向？我想提供一个有意义的消息来告诉用户当前页面上的文件太大。

我的上传代码：

```
<form action="<%= blobstoreService.createUploadUrl("/upload", UploadOptions.Builder.withMaxUploadSizeBytes((512000))%>" method="post" enctype="multipart/form-data"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:23:04.010

使用 ajax 请求提交表单。响应代码在那里，您可以相应地对其进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T03:07:44.593

或者，如果您想要自定义消息，您可以编辑错误页面。有一种方法可以为每个错误页面定义默认页面或静态页面，在您的情况下为 413。

检查：[https ://developers.google.com/appengine/docs/java/config/webxml?hl=en#Error_Handlers](https://developers.google.com/appengine/docs/java/config/webxml?hl=en#Error_Handlers)

# ember.js - 如何使用新的 Ember 路由器绑定到链接的活动类？

> ID：14328295
> 
> 赞同：22
> 
> 时间：2013-01-14T22:54:06.357
> 
> 标签：ember.js

我在我的 Ember.js 应用程序中使用 Twitter Bootstrap 进行导航。Bootstrap 使用标签`active`上的类来包装导航链接，而不是在链接本身上设置类。`li``active`

Ember.js 的新`linkTo`助手将`active`在链接上设置一个类，但（据我所知）不提供任何挂钩该属性的功能。

现在，我正在使用这种丑陋的方法：

```
{{#linkTo "inbox" tagName="li"}}
  <a {{bindAttr href="view.href"}}>Inbox</a>
{{/linkTo}} 
```

这将输出：

```
<li class="active" href="/inbox"><a href="/inbox">Inbox</a></li> 
```

这是我想要的，但不是有效的 HTML。

我还尝试从父视图绑定到生成的 LinkView 的`active`属性，但如果这样做，父视图将在插入之前渲染两次，这会触发错误。

除了手动重新创建`linkTo`助手内部使用的逻辑以将`active`类分配给链接之外，是否有更好的方法来实现此效果？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-14T23:49:32.843

我们肯定需要一个更公开、更永久的解决方案，但这样的事情现在应该可行。

模板：

```
<ul>
{{#view App.NavView}}
  {{#linkTo "about"}}About{{/linkTo}}
{{/view}}

{{#view App.NavView}}
  {{#linkTo "contacts"}}Contacts{{/linkTo}}
{{/view}}
</ul> 
```

视图定义：

```
App.NavView = Ember.View.extend({
  tagName: 'li',
  classNameBindings: ['active'],

  active: function() {
    return this.get('childViews.firstObject.active');
  }.property()
}); 
```

这依赖于几个约束：

*   导航视图包含单个静态子视图
*   您可以为您`<li>`的 s 使用视图。[文档中](http://emberjs.com/guides/views/customizing-a-views-element/)有很多关于如何从 JavaScript 定义或 Handlebars 自定义视图元素的详细信息。

我已经提供[了这个工作的现场 JSBin](http://jsbin.com/olovun/2/edit)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-26T16:22:32.060

好吧，我采用了 @alexspeller 的好主意并将其转换为 ember-cli：

应用程序/组件/链接-li.js

```
export default Em.Component.extend({
    tagName: 'li',
    classNameBindings: ['active'],
    active: function() {
        return this.get('childViews').anyBy('active');
    }.property('childViews.@each.active')
}); 
```

在我的导航栏中，我有：

```
{{#link-li}}
    {{#link-to "squares.index"}}Squares{{/link-to}}
{{/link-li}}
{{#link-li}}
    {{#link-to "games.index"}}Games{{/link-to}}
{{/link-li}}
{{#link-li}}
    {{#link-to "about"}}About{{/link-to}}
{{/link-li}} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-02T13:50:31.533

您还可以使用嵌套链接：

```
{{#link-to "ccprPracticeSession.info" controller.controllers.ccprPatient.content content tagName='li' href=false eventName='dummy'}}
  {{#link-to "ccprPracticeSession.info" controller.controllers.ccprPatient.content content}}Info{{/link-to}}
{{/link-to}} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-30T20:10:31.707

基于 katz 的回答，您可以在单击`active`nav 元素时重新计算该属性`parentView`。

```
App.NavView = Em.View.extend({

    tagName: 'li',
    classNameBindings: 'active'.w(),

    didInsertElement: function () {
        this._super();
        var _this = this;
        this.get('parentView').on('click', function () {
            _this.notifyPropertyChange('active');
        });
    },

    active: function () {
        return this.get('childViews.firstObject.active');
    }.property()
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-24T00:43:09.803

我刚刚编写了一个组件来使它更好一点：

```
App.LinkLiComponent = Em.Component.extend({
  tagName: 'li',
  classNameBindings: ['active'],
  active: function() {
    return this.get('childViews').anyBy('active');
  }.property('childViews.@each.active')
});

Em.Handlebars.helper('link-li', App.LinkLiComponent); 
```

用法：

```
{{#link-li}}
  {{#link-to "someRoute"}}Click Me{{/link-to}}
{{/link-li}} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-24T19:34:49.373

我重新创建了内部使用的逻辑。其他方法似乎更骇人听闻。这也将使在我可能不需要路由的其他地方重用逻辑变得更加容易。

像这样使用。

```
{{#view App.LinkView route="app.route" content="item"}}{{item.name}}{{/view}}

App.LinkView = Ember.View.extend({
    tagName: 'li',
    classNameBindings: ['active'],
    active: Ember.computed(function() {
      var router = this.get('router'),
      route = this.get('route'),
      model = this.get('content');
      params = [route];

      if(model){
        params.push(model);
      }

      return router.isActive.apply(router, params);
    }).property('router.url'),
    router: Ember.computed(function() {
      return this.get('controller').container.lookup('router:main');
    }),
    click: function(){
        var router = this.get('router'),
        route = this.get('route'),
        model = this.get('content');
        params = [route];

        if(model){
            params.push(model);
        }

        router.transitionTo.apply(router,params);
    }
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-26T16:08:03.517

您可以跳过扩展视图并使用以下内容。

```
{{#linkTo "index" tagName="li"}}<a>Homes</a>{{/linkTo}} 
```

即使没有 href，Ember.JS 仍然知道如何连接到 LI 元素。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-01T05:18:29.540

对于同样的问题，我使用了基于 jQuery 的解决方案，不确定性能损失，但它是开箱即用的。我重新打开 Ember.LinkView 并扩展它。

```
Ember.LinkView.reopen({
    didInsertElement: function(){
        var el = this.$();

        if(el.hasClass('active')){
            el.parent().addClass('active');
        }

        el.click(function(e){
            el.parent().addClass('active').siblings().removeClass('active');
        });
    }
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-07-09T22:49:17.047

撰写本文时的当前答案已过时。在更高版本的 Ember 中，如果您使用它，当当前路由与目标链接匹配时，`{{link-to}}`它会自动`'active'`在元素上设置类。`<a>`

因此，只需编写您的 css 并期望`<a>`将具有`active`并且它应该开箱即用地做到这一点。

幸运的是，添加了该功能。之前解决这个“问题”所需的所有东西都是非常荒谬的。

# java - Hibernate序列化中的字符串到GML对象

> ID：14328296
> 
> 赞同：1
> 
> 时间：2013-01-14T22:54:06.890
> 
> 标签：java, json, jackson, gml

我有来自 Hibernate 实体的 GML 字符串，我想将其转换为 GML 对象。有没有像 GML 对象这样的东西，比如我们有几何对象？我要做的是在浏览器中打印到 GML，以便可以扩展其标签，但是现在由于我将 GML 作为字符串，它只是将 GML 作为字符串打印

```
"gml": [

"<gml:Polygon>\n <gml:outerBoundaryIs>\n <gml:LinearRing>\n <gml:coordinates>\n -83.675395,36.540759 -83.675395,39.466012 -75.16643499999999,39.466012 -75.16643499999999,36.540759 -83.675395,36.540759 \n </gml:coordinates>\n </gml:LinearRing>\n </gml:outerBoundaryIs>\n</gml:Polygon>\n"] 
```

我想打印 GML 以便可以扩展标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-24T22:46:21.493

GeoTools 可以读取 GML v2 或 3 并为您提供 JTS 几何，它在休眠空间中使用：

```
import org.geotools.gml3.GMLConfiguration;
import org.geotools.xml.Parser;
import com.vividsolutions.jts.geom.Geometry;

Reader reader = new StringReader(gmlString);
GMLConfiguration gmlConfiguration = new GMLConfiguration();
Parser gmlParser = new Parser(gmlConfiguration);
Geometry geometry = (Geometry) gmlParser.parse(reader); 
```

这是[GeoTools 测试中的另一个示例](https://github.com/geotools/geotools/blob/master/modules/extension/xsd/xsd-gml3/src/test/java/org/geotools/gml3/GML3ParsingTest.java)，但它使用功能而不是几何。

然后使用 org.geotools.geojson.feature.FeatureJSON 或 [org.geotools.geojson.geom.GeometryJSON](http://docs.geotools.org/latest/javadocs/org/geotools/geojson/geom/GeometryJSON.html)获取 Geometry 实例并给出 JSON 字符串，如下所示：

```
GeometryJSON geometryJSON = new GeometryJSON();
String json = geometryJSON.toString(geometry) 
```

我希望这足以让某人开始。似乎没有很多代码示例。

# php - PHP FTP/SFTP 切换类

> ID：14328299
> 
> 赞同：6
> 
> 时间：2013-01-14T22:54:18.573
> 
> 标签：php, design-patterns, ftp, sftp, phpseclib

好的，所以通过 ftp 或 sftp 从您自己的服务器访问其他服务器......我已经编写了一个小类来处理任何一个......它显然是新的并且可以很容易地改进所以我想我会把它扔在这里看看其他人想想（stackoverflow 获得了很多观点，所以希望这可以帮助其他人），以及他们如何改进它......所以我想问题是......如何改进？

```
class ftp_sftp{
//determine, if ssh, to use phpseclib or php's inbuilt ssh_sftp 'libssh'
public $ssh_type = 'phpseclib';
//set ths path to the directory containing the entire phpseclib files
public $phpseclib_path = 'scripts/phpseclib0.3.0';

//private vars generated by this class
public $host;
public $username;
public $password;
public $connection_type;
public $port_number;
public $connection = false;

//contruct method which will attempt to set the connection details and automatically attempt to establisha connection to the server
public function __construct( $host, $username, $password, $connection_type, $port_number = false ){

    //add the webroot to the beginning of the $this->phpseclib_path (this is bespoke to my own configuration)
    $this->phpseclib_path = WEBROOT_PRIVATE.$this->phpseclib_path;

    //setting the classes vars
    $this->host         = $host;
    $this->username     = $username;
    $this->password     = $password;
    $this->connection_type = $connection_type;

    //set the port number to defaults based on connection type if none passed
    if( $port_number === false ){
        if( $connection_type == 'ftp' ){
            $port_number = 21;
        } else {
            $port_number = 22;
        }
    }
    $this->port_number = $port_number;

    //now set the server connection into this classes connection var
    $this->connection = $this->connect();
}

//tests the details passed and tries to establish a connection, returns false on fail.
function connect(){
    br($this->connection_type);
    switch( $this->connection_type )
        {
            case 'ftp':
                        $connection = ftp_connect($this->host);
                        $login = ftp_login($connection, $this->username, $this->password);

                        //if no connection was possible return false and leave $this-connection as false
                        if(!$connection || !$login){
                            return false;
                        } else {
                            // enabling passive mode
                            ftp_pasv( $connection, true );
                            return $connection;
                        }
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    //inlcude the phpseclib path in the include array and include the ssh2 class
                                    set_include_path($this->phpseclib_path );
                                    if(!include('Net/SSH2.php')){
                                        echo 'Sorry failed to load SSH2 class';
                                        br();
                                    }
                                    if(!include('Net/SFTP.php')){
                                        echo 'Sorry failed to load SFTP class';
                                        br();
                                    }

                                    $connection = new Net_SFTP($this->host, $this->port_number);
                                    $login = $connection->login($this->username, $this->password);
                            break;

                            case 'libssh2':
                                    $connection = ssh2_connect($this->host, $this->port_number);
                                    $login = ssh2_auth_password($connection, 'username', 'secret');
                            break;

                            default:
                                    echo 'No ssh method defined, please define one in: $ftp_sftp->ssh_type';
                                    exit();
                            break;
                        }

                        //if no connection was possible return false and leave $this-connection as false
                        if (!$connection || !$login) {
                            return false;
                        } else {
                            return $connection;
                        }
            break;

            default: echo 'No connection type set cannot choose a method to connect';
            break;
        }
}

//acces the phpseclib errors
public function errors(){
if($this->connection_type == 'sftp' && $this->ssh_type == 'phpseclib'){
        print_r($this->connection->getErrors());
    } else {
        echo 'no error logs available';
    }
}

//function used by this class to check certain values are set
public function connection_check(){
    if( $this->connection === false){
        echo 'Sorry there seems to be a connection problem please try again';
        br();
    }

    if( $this->connection_type === false){
        echo 'Sorry there seems to be a no connection type set';
    }

    if( $this->connection === false || $this->connection_type === false ){
        exit();
    }
}

//transfers a file to the connected server
public function put($targetLocationToSendTo, $existingLocationToSendFrom){

    //check the connection
    $this->connection_check();

    switch( $this->connection_type )
        {
            case 'ftp':
                        //ftp_put the file across
                        $put = ftp_put( $this->connection, $targetLocationToSendTo, $existingLocationToSendFrom, FTP_BINARY);
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $put = $this->connection->put( $targetLocationToSendTo, $existingLocationToSendFrom, NET_SFTP_LOCAL_FILE );
                            break;

                            case 'libssh2':
                                    $put = ssh2_scp_send($this->connection, $targetLocationToSendTo, $existingLocationToSendFrom, 0755);
                            break;
                        }
            break;
        }

    return $put;
}

//list the contents of a remote directory
public function dir_list( $dirToList ){

    //check the connection
    $this->connection_check();

    //run appropriate list
    switch( $this->connection_type )
        {
            case 'ftp':
                        $list = $this->connection = ftp_nlist($this->connection, $dirToList);
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $list = $this->connection->nlist( $dirToList );
                            break;

                            case 'libssh2':
                                    echo 'Sorry there is no support for nlist with libssh2, however this link has a possible answer: http://randomdrake.com/2012/02/08/listing-and-downloading-files-over-sftp-with-php-and-ssh2/';
                            break;
                        }
            break;
        }

    return $list;
}

//get the timestamp of the file on another server
public function remote_filemtime( $pathToFile ){

    //check the connection
    $this->connection_check();

    //run appropriate list
    switch( $this->connection_type )
        {
            case 'ftp':
                        $timeStamp = ftp_mdtm($this->connection, $pathToFile);
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $statinfo = $this->connection->stat( $pathToFile );
                            break;

                            case 'libssh2':
                                    $statinfo = ssh2_sftp_stat($this->connection, $pathToFile);
                            break;
                        }

                        if($statinfo['mtime']){
                            $timeStamp = $statinfo['mtime'];
                        } else {
                            $timeStamp = false;
                        }
            break;
        }

    return $timeStamp;
}

//make a directory on the remote server
public function make_dir( $dirToMake ){
    //check the connection
    $this->connection_check();

    //run appropriate list
    switch( $this->connection_type )
        {
            case 'ftp':
                        $dir_made = ftp_mkdir($this->connection, $dirToMake);
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $statinfo = $this->connection->mkdir( $dirToMake );
                            break;

                            case 'libssh2':
                                    $statinfo = ssh2_sftp_mkdir($this->connection, $dirToMake, 0755);
                            break;
                        }
            break;
        }

    return $dir_made;
}

//change directory
public function change_dir( $dirToMoveTo ){
    //check the connection
    $this->connection_check();

    //run appropriate list
    switch( $this->connection_type )
        {
            case 'ftp': $chdir = ftp_chdir($this->connection, $dirToMoveTo );
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $chdir = $this->connection->chdir( $dirToMoveTo );
                            break;

                            case 'libssh2':
                                    echo 'Sorry this feature does exist yet for when using libssh2 with the ftp_sftp class';
                                    exit();
                            break;
                        }
            break;
        }

    return $chdir;
}

//curent directory we are looking in
public function pwd(){

    //check the connection
    $this->connection_check();

    //run appropriate list
    switch( $this->connection_type )
        {
            case 'ftp': $pwd = ftp_pwd($this->connection);
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $pwd = $this->connection->pwd();
                            break;

                            case 'libssh2':
                                    echo 'Sorry this feature does exist yet for when using libssh2';
                                    exit();
                            break;
                        }
            break;
        }

    return $pwd;
}

//delete file
public function delete_file($fileToDelete){
    //check the connection
    $this->connection_check();

    //run appropriate list
    switch( $this->connection_type )
        {
            case 'ftp': $unlink = ftp_delete($this->connection, $fileToDelete);
            break;

            case 'sftp':
                        //decide which ssh type to use
                        switch( $this->ssh_type ){
                            case 'phpseclib':
                                    $unlink = $this->connection->delete( $fileToDelete );
                            break;

                            case 'libssh2':
                                    $unlink = ssh2_sftp_unlink($this->connection, $fileToDelete);
                            break;
                        }
            break;
        }

    return $unlink;
}   }//end of class 
```

使用类：

```
$ftp_sftp = new ftp_sftp( '92.21.627.163', 'ftpuser', 'yourpassword', '', 'ftp', '21' );
echo $ftp_sftp->pwd(); 
```

我在使用easyPHP在我的win7机器上连接phpseclib时遇到了一些麻烦，并且已经开始了一个Q ..如果有人有任何想法，我将非常感激...... [无法连接phpseclib - 错误10060](https://stackoverflow.com/questions/14326406/cannot-get-phpseclib-to-connect-error-10060)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T19:10:27.683

这段代码的主要*问题*是它*垂直缩放*。假设您决定添加另一个实现，一个本地文件系统，为“文件”引入第三个`$connection_type`潜在*值*。现在你必须通过代码`case 'file':`到处添加条件，使`ftp_sftp`增长失控。您现在在“sftp”代码分支中又遇到了同样的问题，处理`$ssh_type`.

**原始代码**

```
switch($connection_type) {
    case 'ftp'  : // ...
    case 'stfp' : // ...
} 
```

**变成**

```
switch($connection_type) {
    case 'ftp'  : // ...
    case 'stfp' : // ...
    case 'file' : // ...
} 
```

请记住，这是针对打开的代码中的**每个 switch 语句**`$connection_type`。想象一下我们要向`ftp_sftp`类中添加多少行代码来合并每个额外的行为......

事实上，看起来你现在实际上有 3 个策略，*ftp*、*sftp*和*ssh*。

您在这里要做的是将代码设置为*水平*扩展而不是*垂直*扩展，而实现这一点的方法是通过[策略设计模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

本质上，您所做的是在代码中提取通用接口，然后为 FTP 和 SFTP 创建单独的实现。有很多不同的方法可以对此进行实际实施，因此请随心所欲地调整！

**通用接口**

这是任何“ftp 类”必须能够做的定义。

```
interface PhpFtp
{
    public function __construct($host, $username, $password, $port_number = false);
    public function connect();
    public function errors();
    public function connection_check();
    public function put($targetLocationToSendTo, $existingLocationToSendFrom);
    public function dir_list( $dirToList );
    public function remote_filemtime( $pathToFile );
    public function make_dir( $dirToMake );
    public function change_dir( $dirToMoveTo );
    public function pwd();
    public function delete_file($fileToDelete);
} 
```

**一个工厂**

现在在整个代码中只有一个 switch 语句来检查`$connection_type`. 您可能会决定以`default`不同的方式处理此案。

```
class PhpFtpFactory
{
    public static function create($connection_type)
    {
        switch($connection_type) {
            case 'ftp':
                $oFtp = new Ftp();
                break;
            case 'sftp':
                $oFtp = new Sftp();
                break;
            default:
                throw new UnexpectedValueExcpetion(
                    'No connection type set cannot choose a method to connect');
        }

        // Potential follow-up construction steps
        return $oFtp;
    }
} 
```

**一个基类**

不是绝对必要的，但非常有帮助。此外，我们在这里潜入了另一种设计模式，称为[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)。 `BaseFtp::pwd`是一个模板方法，它控制整个*pwd*算法，但将其中一部分委托给具体的子代。

```
abstract class BaseFtp implements PhpFtp
{
    public function pwd()
    {
        $this->connection_check();
        return $this->_pwd();
    }

    abstract protected function _pwd();
} 
```

**具体的FTP实现**

现在我们有一个简洁的 FTP 类，它只做 FTP 操作，它对 SFTP 一无所知。

```
class Ftp extends BaseFtp
{
    protected function _pwd()
    {
        return ftp_pwd($this->connection);
    }

    public function connect()
    {
        $connection = ftp_connect($this->host);
        $login      = ftp_login($connection, $this->username, $this->password);

        // if no connection was possible return false and leave $this-connection as false
        if(!$connection || !$login)
            return false;

        // enabling passive mode
        ftp_pasv( $connection, true );
        return $connection;
    }
} 
```

**具体的 SFTP 类**

现在我们有了一个独立的 SFTP 类，但是请注意它`$ssh_type`就像原始`ftp_sftp`类为`$connection_type`. 一旦你掌握了策略模式，并完成了`Ftp`&`Sftp`类，你可以返回并在实现中实现策略模式，`Sftp`这样你就有了 2 个类`Phpseclib`& `Libssh2`，例如。

```
class Sftp extends BaseFtp
{
    protected function _pwd()
    {
        // decide which ssh type to use
        switch($this->ssh_type) {
            case 'phpseclib':
                return $this->connection->pwd();

            case 'libssh2':
                echo 'Sorry this feature does exist yet for when using libssh2';
                return false;
        }
    }

    public function connect()
    {
        // decide which ssh type to use
        switch( $this->ssh_type ) {
            case 'phpseclib':
                // inlcude the phpseclib path in the include array
                // and include the ssh2 class
                set_include_path($this->phpseclib_path );
                if(!include('Net/SSH2.php')){
                    echo 'Sorry failed to load SSH2 class';
                    br();
                }
                if(!include('Net/SFTP.php')){
                    echo 'Sorry failed to load SFTP class';
                    br();
                }

                $connection = new Net_SFTP($this->host, $this->port_number);
                $login = $connection->login($this->username, $this->password);
                break;

            case 'libssh2':
                $connection = ssh2_connect($this->host, $this->port_number);
                $login = ssh2_auth_password($connection, 'username', 'secret');
                break;

            default:
                echo 'No ssh method defined, please define one in: $ftp_sftp->ssh_type';
                exit();
                break;
        }

        if(!$connection || !$login)
            return false;
    }
} 
```

**使用新代码**

随着新系统的到位，它更容易 10 倍地查看是什么，每个类都专注于它的特定领域，并且代码*水平*增长。这意味着什么？还记得上面，当我们考虑在原始范例中添加第三个`$connection_type` *“文件”时？*在新的安排中，我们更新**了一个**switch 语句，即工厂中的那个：

```
class PhpFtpFactory
{
    public static function create($connection_type)
    {
        switch($connection_type) {
            case 'ftp':
                $oFtp = new Ftp();
                break;
            case 'sftp':
                $oFtp = new Sftp();
                break;
            case 'file':
                $oFtp = new File();
                break;
            default:
                throw new UnexpectedValueExcpetion(
                    'No connection type set cannot choose a method to connect');
        }

        // Potential follow-up construction steps
        return $oFtp;
    }
} 
```

然后当然你添加新的具体实现

```
class File extends PhpFtp
{
    // ...
} 
```

由于新`File`班级可以进入自己的空间，我们不会扩展一个中心班级，即原始`ftp_sftp`班级。

为了使用新系统，你在工厂找了一个实例，然后从那里开始

```
// get an instance of the Ftp class
$ftp  = PhpFtpFactory::create('ftp');

// get an instance of the Sftp class 
$sftp = PhpFtpFactory::create('sftp'); 
```

这些实例中的任何一个都支持所有`PhpFtp`功能，因为它们实现了接口！这也使您能够编写*多态*代码。考虑一个对接口进行类型提示的函数

```
// This is polymorphic code
function doFtpStuff(PhpFtp $oFtp) {
   // As mentioned above $oFtp can be an instance of any class that implements PhpFtp
   $oFtp->connect();
   $oFtp->pwd();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:55:19.393

Wordpress 的 SFTP 实现以一种奇怪的方式执行 chdir 和 pwd。他们做 ssh2_exec()。不知道这是否适用于那里的文件下载/上传。这是他们的实现：

[http://core.svn.wordpress.org/trunk/wp-admin/includes/class-wp-filesystem-ssh2.php](http://core.svn.wordpress.org/trunk/wp-admin/includes/class-wp-filesystem-ssh2.php)

我认为 phpseclib 更好，但仅供参考。

此外，最新版本的 phpseclib 是 0.3.1。idk...只是另一个仅供参考，哈哈。

最后，也许做 include_once() 而不是 include()？这样类可以被实例化多次？

# actionscript-3 - Bitmapdata.draw(MovieClip) 给出空白 BitmapData

> ID：14328301
> 
> 赞同：0
> 
> 时间：2013-01-14T22:54:23.240
> 
> 标签：actionscript-3, flash, movieclip, bitmapdata, adobe-illustrator

我将游戏中的所有矢量元素预绘制为位图以提高性能 - 矢量元素从 Illustrator 导出为 swf 文件（我怀疑这是问题的一部分）。在 as3 中嵌入 swf 文件时，如下所示：

```
[Embed(source = 'file.swf')] private static const image:Class; 
```

然后将它添加到舞台上，就像这样

```
stage.addChild(new image); 
```

一切都很好，但如果我把它画成这样的位图数据......

```
genericBitmapData.draw(new image); 
```

这是一个空白的位图数据。在绘制之前，我尝试`gotoAndStop`在第 0 帧和第 1 帧上使用，但无济于事。是否有人对 Illustrator 导出的 swf 文件有经验，以及我如何按预期获得这​​些绘图的任何见解？

[这](http://abscure.net/files/button-01.swf)是一个非常简单的 .swf 的链接，它产生相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:13:08.140

这是我修改后的解决方案：

```
//create movieclip
var mc:MovieClip = new image();
addEventListener(Event.ENTER_FRAME, enterFrameHandler);

//this gets called on next frame
function enterFrameHandler(event:Event):void
{
    removeEventListener(Event.ENTER_FRAME, enterFrameHandler);
    genericBitmapData.draw(mc);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:45:55.280

所以事实证明，在我可以使用它来绘制之前，需要先实例化该对象，而检测何时该对象的最简单方法是监听`ENTER_FRAME`事件：

```
(new image).addEventListener(Event.ENTER_FRAME, functionToDrawImage); 
```

当调用该函数时，它将准备好绘制位图数据，然后一切正常。

# c# - 如何将 lambda 传递给 Razor 辅助方法？

> ID：14328303
> 
> 赞同：13
> 
> 时间：2013-01-14T22:54:27.343
> 
> 标签：c#, asp.net-mvc, razor, lambda, html-helper

我有一个剃须刀辅助方法需要接受一个`Func<>`返回一些 HTML 内容以打印出来的方法。这是我最初拥有的：

```
@helper node(string title, Func<HelperResult> descriptions)
{
    ....
    <div>@descriptions()</div>
    ....
}

@node("title", 
              new Func<HelperResult>(() => 
              {
                 return new HelperResult(
                     @<text>
                     <span>"desc1"</span>
                     <span>"desc2"</span>
                     </text>);
              })) 
```

不幸的是，我的文字永远不会被打印出来。也没有错误。

所以我了解了内联助手，并将调用方法更改为：

```
@node("title",                     
              @<text>
              <span>"desc1"</span>
              <span>"desc2"</span>
              </text>) 
```

但是现在我得到一个编译错误说

> “委托‘System.Func’不接受 1 个参数”。

但我没有传递任何论据。

因此，如果我将其更改为`Func<object,HelperResult>`然后使用它调用它，则会`@descriptions(null)`收到以下错误：

> “如果不先将 lambda 表达式转换为委托或表达式树类型，则不能使用 lambda 表达式作为动态分派操作的参数”

我确定我在某处有问题，但我不确定它是什么。

**编辑**：我想我可能已经解决了这个问题，但它引入了一些其他问题。

我所做的是在传递给动态方法之前转换 lambda。我想这就是错误想说的：

```
@node("title",                     
              ((Func<dynamic, HelperResult>)(@<text>
              <span>"desc1"</span>
              <span>"desc2"</span>
              </text>)) 
```

这行得通，它可以正确打印出`span`标签。不幸的是，我在调用 this 时必须传入一个无用的参数`Func`。

现在我遇到的问题是，我的真正功能不仅仅是写一些跨度。它更像是这样的：

```
@node("title",                     
              ((Func<dynamic, HelperResult>)(@<text>
              <span>@Helpers.Format(resource.Description,"item")</span>
              </text>)) 
```

另一个助手在哪里`@Helpers.Format`，资源是页面模型中的（动态）变量。

当然现在代码运行但没有打印出来（在`<span>`标签内）。我在我的辅助函数中放置了一个断点`Format`，它会命中它并且所有参数都已正确设置，所以我不确定它为什么不能正确输出。同样，如果我只是将其更改为 resource.Description 则仍然没有任何输出。

由于它在此上下文之外运行良好，我想知道 Razor 的内联助手是否不捕获外部变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-22T19:39:38.047

实际上 HelperResult 是微软不希望你使用的东西，正如文档所证明的那样：

> 公共类 HelperResult：命名空间 System.Web.WebPages 中的 IHtmlString
> 
> 摘要：此类型/成员支持 .NET Framework 基础结构，不打算直接从您的代码中使用。

您的问题的一个可能解决方案可能是将您的描述函数包装在另一个助手中，然后将该助手作为[方法组](https://stackoverflow.com/questions/886822/what-is-a-method-group-in-c)传递给您的节点助手，如下所示：

```
@helper Node(string title, Func<HelperResult> descriptions)
{
    <div>@descriptions()</div>
}

@helper Description() {
    <span>desc1</span>
    <span>desc2</span>
}

@Node("title", Description) 
```

无论如何，您的第一个想法不应该起作用，因为 Func 类型的参数实际上等于无参数函数，在这种情况下，您需要像这样编写 lambda 表达式：

```
myFunction( () => doSomething) 
```

所以你的函数调用应该是：

```
@node("title", () =>                    
              @<text>
              <span>"desc1"</span>
              <span>"desc2"</span>
              </text>) 
```

由于这些助手的未来[有点可疑](https://stackoverflow.com/questions/4451287/razor-declarative-html-helpers)，我会考虑切换到[HtmlHelpers](http://develoq.net/2011/how-to-create-custom-html-helpers-for-asp-net-mvc-3-and-razor-view-engine/)用于小片段的 html 或[Partials](http://rachelappel.com/razor/partial-views-in-asp-net-mvc-3-w-the-razor-view-engine/)用于更大的块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-08T09:24:16.613

```
@Test(new Func<object, HelperResult>[]{@<text>hello</text>})

@Test(new Func<object, HelperResult>[]{@<text>hello</text>,@<text>world</text>})

@helper Test(params Func<object, HelperResult>[] results)
{
    foreach (var result in results)   
    {
        @result(null);
    }
} 
```

# pdf - 在 xulrunner 中嵌入 PDF 内容

> ID：14328309
> 
> 赞同：0
> 
> 时间：2013-01-14T22:54:48.933
> 
> 标签：pdf, plugins, xulrunner, adobe-reader

在 xulrunner 1.9.2 上，我可以将 Adob​​e Reader 插件放入我的 xulrunner 应用程序的 /plugins 并加载内容：

```
 <vbox minwidth="200">

        <html   xmlns = "http://www.w3.org/1999/xhtml" >
            <div id="htmlDiv">

                <embed
                    id      = "pdfObject"
                    type    = "application/pdf"
                    src     = "chrome://manuals/content/test.pdf#toolbar=1&amp;navpanes=1&amp;scrollbar=1&amp;page=1&amp;view=FitH"
                    height  = "850px"
                    width   = "1100px"
                />
            </div>
        </html>

    </vbox> 
```

我现在正在迁移到 xulrunner 17.0.1，但我无法让它工作 - Adob​​e Reader 在它自己的弹出窗口中给出了一个错误。

我检查了当前 Firefox 安装中的版本，它是正确的。我还从应用程序配置文件中删除了 pluginsreg.dat - 没有成功。

任何关于如何将内容恢复到基于 xulrunner 的应用程序的想法都会很棒。

许德夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:01:06.443

没关系 - chrome 路径在 chrome.manifest 中缺少斜杠；）

保罗

# php - cassandra-pdo 选择复合键时出错

> ID：14328310
> 
> 赞同：1
> 
> 时间：2013-01-14T22:54:49.840
> 
> 标签：php, pdo, cassandra, cql3

在 PHP 上使用 cassandra-pdo 选择数据时，我在 /var/log/apache2/error.log 中收到以下错误：

```
[Mon Jan 14 23:37:47 2013] [error] [client 10.0.0.5] PHP Fatal error:  Uncaught exception 'PDOException' with message 'CQLSTATE[08006] [8] No more data to read.' in /var/www/test_cassandra_pdo.php:13\nStack trace:\n#0 /var/www/test_cassandra_pdo.php(13): PDOStatement->execute()\n#1 {main}\n  thrown in /var/www/test_cassandra_pdo.php on line 13 
```

我正在使用：

*   最新的 cassandra-pdo ( [http://code.google.com/a/apache-extras.org/p/cassandra-pdo/](http://code.google.com/a/apache-extras.org/p/cassandra-pdo/) )
*   阿帕奇/2.2.22
*   带有 Suhosin-Patch (cli) 的 PHP 5.3.10-1ubuntu3.4（构建时间：2012 年 9 月 12 日 19:00:43）
*   卡桑德拉 1.2
*   Ubuntu 12.04 LTS

下面是我的PHP代码：

```
// Connect to two hosts
$dsn = "cassandra:host=cassandra001,port=9160;host=cassandra002,port=9160;cqlversion=3.0.0";
$db = new PDO($dsn);
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->exec("USE test");

$stmt = $db->prepare("SELECT page, local, key, vl FROM lalala;");
//$stmt->bindValue(':key', 'a');
$stmt->execute();

$result = $stmt->fetchAll();
var_dump($result); 
```

下面是数据结构（使用 cqlsh 创建和列出）：

```
Connected to test at cassandra001:9160.
[cqlsh 2.3.0 | Cassandra 1.2.0 | CQL spec 3.0.0 | Thrift protocol 19.35.0]
Use HELP for help.
cqlsh> use test;
cqlsh:test> describe table lalala;

CREATE TABLE lalala (
page text,
local text,
key text,
value text,
vl text,
PRIMARY KEY (page, local, key)
) WITH
bloom_filter_fp_chance=0.010000 AND
caching='KEYS_ONLY' AND
comment='' AND
dclocal_read_repair_chance=0.000000 AND
gc_grace_seconds=864000 AND
read_repair_chance=0.100000 AND
replicate_on_write='true' AND
compaction={'class': 'SizeTieredCompactionStrategy'} AND
compression={'sstable_compression': 'SnappyCompressor'}; 
```

使用 cqlsh 的选择：

```
cqlsh:test> SELECT page, local, key, vl FROM lalala;

 page       | local | key   | vl
------------+-------+-------+----------------
 teste.html |    EN | title | Ola, bem vindo 
```

我在 cassandra-pdo 上打开了一个问题，但没有任何回报：

[http://code.google.com/a/apache-extras.org/p/cassandra-pdo/issues/detail?id=15](http://code.google.com/a/apache-extras.org/p/cassandra-pdo/issues/detail?id=15)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:24:24.033

[有一个](https://github.com/Orange-OpenSource/YACassandraPDO)[cassandra pdo](http://code.google.com/a/apache-extras.org/p/cassandra-pdo/issues/detail?id=5#c4)的分支。我开始使用它。但不确定我是否会完全转向它。我将测试开发人员对我的问题报告的反应。如果不积极维护，我会从 apache 搬回原来的 pdo 并使用 cql2。希望不要发生，cql3 map 类型太有用了。

# android - 启用触控探索后，如何保持单指针手势？

> ID：14328313
> 
> 赞同：3
> 
> 时间：2013-01-14T22:55:04.143
> 
> 标签：android, accessibility, android-view, talkback

我有一个捕获用户签名的自定义视图（[约翰汉考克](http://en.wikipedia.org/wiki/John_Hancock_%28disambiguation%29)）。我希望我们的应用程序尽可能易于访问，因此我特别注意确保优化*TalkBack*和*Explore-by-Touch*的屏幕。由于*Explore-by-Touch*将所有一个手指手势更改为两个手指手势，因此它破坏了自定义签名视图。

我想做的是让*Explore-by-Touch*在悬停时宣布视图的内容描述，然后在用户双击时启用视图。这将允许他们像普通用户一样使用单个指针在视图顶部绘制。

我四处搜索，但很难找到有关 Android 可访问性库的详细文档。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T19:47:23.850

开启触控探索后，单指触控事件会转换为悬停事件。[您可以通过将OnHoverListener](http://developer.android.com/reference/android/view/View.OnHoverListener.html)添加到您的视图或覆盖[View.onHoverEvent](http://developer.android.com/reference/android/view/View.html#onHoverEvent%28android.view.MotionEvent%29)来观看这些事件。

一旦你拦截了这些事件，你通常可以将它们传递给你的正常触摸处理代码，并从悬停动作映射到触摸动作（如下所示）。

```
@Override
public boolean onHoverEvent(MotionEvent event) {
    if (mAccessibilityManager.isTouchExplorationEnabled()) {
        return onTouchEvent(event);
    } else {
        return super.onHoverEvent(event);
    }
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_HOVER_ENTER:
            return handleDown(event);
        case MotionEvent.ACTION_MOVE:
        case MotionEvent.ACTION_HOVER_MOVE:
            return handleMove(event);
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_HOVER_EXIT:
            return handleUp(event);
    }

    return false;
} 
```

# xml - 无法从 F# 更新 SQL Server XML 列

> ID：14328314
> 
> 赞同：2
> 
> 时间：2013-01-14T22:55:04.590
> 
> 标签：xml, f#, sql-update, sql-server-2012

[我在查询表达式](http://msdn.microsoft.com/en-us/library/hh225374%28v=VS.110%29.aspx)页面上找不到任何回答我问题的内容。简而言之，我可以更新任何 SQL Server 数据列，除了`type XML`. 下面的示例代码与我的实际代码仅在列名称上有所不同。

```
let update () : unit =
    let dbctx = DBSchema.GetDataContext() // The DBSchema type has already been defined as a SimpleDataContextType
    query {
        for row in dbctx.My_Table do
        select row
    }
    |> Seq.iter (fun s ->
        s.IntCol <- 10 // Works
        s.VarcharCol <- "Varchar value" // Works
        /////
        s.XmlCol.Add(new XElement(XName.Get "ChildNode")) // Does not work!
        /////
        let x = s.XmlCol
        x.Add(new Xelement(XName.Get "ChildNode"))
        s.XmlCol <- x // Still does not work!
        /////
        dbctx.DataContext.SubmitChanges()) 
```

`XML column`SQL Server 中的永远不会改变。它保持不变，即使其他列按照指示发生变化。

是否有不同的推荐方式`SQL Server XML columns`从 F# 更新？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:04:38.507

除非您创建一个新`XElement`实例，否则*引用相等性*仍然成立，并且 Linq-to-SQL 无法检测`XmlCol`.

以下示例应按预期工作

```
let x = s.XmlCol
x.Add(new XElement(XName.Get "ChildNode"))
s.XmlCol <- new XElement(x) 
```

当您考虑F#中的默认*结构相等时，这种行为会令人困惑。*

您可以阅读类似的线程[Linq-to-SQL With XML Database Fields -- 为什么这样有效？](https://stackoverflow.com/questions/689772/linq-to-sql-with-xml-database-fields-why-does-this-work)另一种解释。

# facebook-graph-api - 如何获得照片的“突出显示”状态？

> ID：14328317
> 
> 赞同：3
> 
> 时间：2013-01-14T22:55:22.167
> 
> 标签：facebook-graph-api

在以下屏幕截图中，其中一张图像（右上角）被“突出显示”。如何以编程方式获得此状态？

![脸书照片](../Images/2bfbeb69fc0a69c39462ee8e75fa76ed.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T06:36:17.370

你可以使用 `[pageid]?fields=posts.fields(timeline_visibility)`，

返回数据将有一个字段`"timeline_visibility" : "starred"`

但它只适用于 facebook 页面，当我试图获取我的时间线时

```
[userid]?fields=id,name,posts.fields(timeline_visibility) 
```

返回值为`"timeline_visibility": "no timeline unit for this post"`

# database - 扇形陷阱和鸿沟陷阱 - 数据库

> ID：14328319
> 
> 赞同：14
> 
> 时间：2013-01-14T22:55:27.917
> 
> 标签：database, conceptual-model

谁能告诉我什么是深渊陷阱？也许也是粉丝陷阱，因为我不太清楚。另外，请提供易于理解的示例（通过 Chen 符号）。

*到目前为止我的理解：我知道 Fan 陷阱是 M:1:1:M，这表明实体之间的路径是不明确的。
我明白那个。例如，如果 M 代表 Student，而另一个 M 代表 School，那么它将是模棱两可的，因为我们不知道哪个学生在哪个学校学习（这是我目前所理解的）。*

但是，我无法理解什么是鸿沟陷阱。

另外，如何识别陷阱然后修复它？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-05-07T17:23:57.570

基于 Conolly&Begg：

**当模型表示实体类型之间的关系但某些实体出现之间的路径**不明确时，就会出现****扇形陷阱**。**

 **示例：(Staff)-1:N-has-1:1-(Division)-1:1-operates-1:N-(Branch) [![粉丝陷阱](../Images/b6cd2139bdf9c9c7cc25ff75ad9988a8.png)](https://i.stack.imgur.com/6EXf9.png) 在此模型中，可能无法确定员工所属的分支，在员工所属部门有1个以上分支机构的情况。

重构模型解决陷阱 (Division)-1:1-operates-1:N-(Branch)-1:1-has-1:N-(Staff) [![不是粉丝陷阱](../Images/1f324ae7f38feff822835b15dbf8ec75.png)](https://i.stack.imgur.com/CAOxq.png)

**当模型建议实体类型之间的关系但某些事件之间**不存在路径时，就会出现****鸿沟陷阱**。**

 **示例：（分公司）-1:1-has-1:N-（员工）-0:1-oversees-0:N-（PropertyForRent） [![深渊陷阱](../Images/cdab145e9618b74a15bf06d474dba821.png)](https://i.stack.imgur.com/LFoIs.png)

由于员工与 PropertyForRent 的关系对于员工来说是可选参与 (0:1)，因此 Branch 到 PropertyForRent 的路径可能不存在。对此的解决方案是 Branch 和 PropertyForRent 之间的直接关系，强制参与。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-22T14:22:10.193

简而言之，对于这两种情况（FAN 和 CHASM），它会产生比实际更多的行（结果集）。如何识别

*   **FAN -> 1-NN**表示从一 -> 多 -> 多的表关系
*   **CHASM -> N-1-N**表示一个行表到两个或多个表的多关系
*   **LOOP -> 加入**所有表，并在循环时像圆一样（在这种情况下，我们绝对会丢失一些行）

没有什么可识别的，但当你创造宇宙时，我们必须睁大眼睛，如果你在开发宇宙时看到这些情况，总会有问题。所以通过应用别名、上下文来纠正。

一旦在宇宙级别解决了所有问题，我们就可以进行报告了。通过练习，您将拥有出色的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T09:35:27.143

当三张桌子以一种彼此之间存在一对多的方式连接时，就会出现我的粉丝陷阱。表示表 AB 和 C 以 .. 的形式连接。表 A 以一对多的方式链接到表 B，表 B 到表 C 再次与主要方式 A-->B-->C 相关联。****

# nvd3.js - 如何在本地机器上使用 nvd3 示例

> ID：14328326
> 
> 赞同：7
> 
> 时间：2013-01-14T22:55:43.677
> 
> 标签：nvd3.js

我想使用他们网站上的 nvd3 示例：http: [//nvd3.org/livecode/#codemirrorNav](http://nvd3.org/livecode/#codemirrorNav)

我应该怎么办？示例链接有多个选项卡，我应该复制粘贴并将所有这些代码保存在一个文件夹中并打开 index.html 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:44:02.603

我会下载他们的源代码并使用他们的示例文件夹中的示例，因为它已经整齐地设置好供您操作。

来源：[https](https://github.com/novus/nvd3) ://github.com/novus/nvd3 （克隆或下载为 .zip）

PS 我会使用 Firefox 来打开它们，因为 Chrome 对在本地使用文件而不是来自网络服务器非常敏感。

# segmentation-fault - glsl dot 函数间接导致程序中的分段错误

> ID：14328327
> 
> 赞同：0
> 
> 时间：2013-01-14T22:55:57.993
> 
> 标签：segmentation-fault, glsl, opengl-3, dot-product

这是我的顶点着色器代码：

```
#version 330

layout(location = 0) in vec3 vertex_position;
layout(location = 0) in vec3 vertex_normal;

//model space
uniform vec3 toLight;

uniform mat4 model;
uniform mat4 view;
uniform mat4 projection;

smooth out vec3 color;

void main()
{
  gl_Position = projection * view * model * vec4(vertex_position, 1.0f);

  vec3 normal = normalize(vertex_normal);

  float intensity = dot(normal, toLight);
  intensity = clamp(intensity, 0, 1);

  color = vec3(intensity);
} 
```

在这段代码中，我尝试使用[Learning Modern 3D Graphics Programming 网站上](http://arcsynthesis.org/gltut/Illumination/Tutorial%2009.html)的教程来计算光照。顺便说一句，这是一本很棒的书，但是这里的代码与列出的代码基本相同，只是更改了几个名称，但是通过一些实验，我发现了一些非常奇特的东西。分段错误发生在

> 颜色 = vec3（强度）；

行，我知道因为删除该行会导致程序正常运行，（当然除了没有照明）

但是，当我更换线路时

> 浮动强度=点（正常，toLight）；

和：

> 浮动强度 = 3.14159；

它钳位到 1.0f 并且一切正常，立方体是白色的，如果我输入一个负数也会发生同样的情况：数字被钳位为零并且立方体是黑色的......

所以这很奇怪，这是事实：

*   删除将输出向量设置为请求颜色的行时，分段错误消失。
*   去除点积的计算时，分割错误也消失了
*   当强度恒定浮动时，一切正常。
*   将颜色设置为*不涉及强度*的任何内容都可以正常工作。
*   编辑：发现一些有趣的信息，当使用强度变量设置颜色变量以外的变量时工作正常，例如`vec3 temp = vec3(intensity);`不会导致段错误，但是将颜色设置为与强度变量无关的东西也可以正常工作`color = vec3(1.0f);`，虽然，如果我要为其设置颜色`temp`也会崩溃，这很奇怪。

非常感谢任何建议。谢谢

另外，我会包含我的opengl，c++代码，但我认为没有必要，如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:25:52.220

最佳猜测：您在设置`toLight`制服的代码中有一个错误——它看起来像`glUniform3fv(toLight_location, 3, pointer)`，但是`pointer`是伪造的（NULL 或其他无效）。GL 驱动程序代码尝试取消引用此指针并崩溃。当您删除`toLight`着色器中的所有使用时，它不会崩溃，因为`toLight_location`它不活动时变为 -1，并且`glUniform3fv`调用变为 noop。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:07:41.190

天啊！我犯了一个大错误，就在这里：

```
layout(location = 0) in vec3 vertex_position;
layout(location = 0) in vec3 vertex_normal; 
```

注意如何`vertex_position`和`vertex_normal`有相同的位置，我也没有。将`vertex_normal`位置设置为 1 修复了所有问题，对不起，我浪费了你的大部分时间，但感谢大家的建议和蒂姆，他让我意识到正常情况下发生了段错误，使我进入了源代码的顶部，一样谢谢大家... =D

# matlab - MATLAB Patch 创建佛蒙特州的倾斜地图

> ID：14328329
> 
> 赞同：1
> 
> 时间：2013-01-14T22:56:06.027
> 
> 标签：matlab, 3d, 2d, patch

我一直在探索 2D Plot 默认值、补丁和其他文档，以及 Matlab 论坛以寻求解决此问题的方法，但经过 3 个月的查找后却没有。

我正在使用线段数据来绘制佛蒙特州的美国人口普查区，从而创建该州的地图。构成 Vermont 的约 185 个补丁创建了一个稍微向左倾斜的图形，就好像 2D 绘图被投影到 3D 平面上一样。我对特拉华州的数据有同样的问题。

为什么 Patch(x,y) 坚持以倾斜的方式进行修补，即使我通过图形窗口并且所有标志都说它以 2D 显示？

编辑 1：使用`[az,el] = view`I get `el == 90`，意味着我的绘图绝对是 2D，如[如何在 Matlab 中确定轴是 2D 还是 3D？](https://stackoverflow.com/questions/8064969/how-to-determine-if-axes-are-2d-or-3d-in-matlab)

# c# - 从 RSS 提要元素中删除 Html 标签

> ID：14328330
> 
> 赞同：1
> 
> 时间：2013-01-14T22:56:14.230
> 
> 标签：c#, rss, xmlreader

我正在阅读当元素包含 html 标签时有时会损坏的新闻提要。它抛出这个异常：

> [意外的节点类型元素。ReadElementString 方法只能在内容简单或为空的元素上调用。]

**XML 示例**：

```
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
  <channel>
    <title>test xml feed</title>
    <atom:link href="http://www.newssite.com" rel="self" type="application/rss+xml"/>
    <description>test</description>
    <item>
      <title>
        Title followed by html tags
        <br/>
      </title>
      <link>
        http://www.newssite.com
      </link>
      <description>
        Description Data
      </description>
      <pubDate>Mon, 14 Jan 2013 21:20:00 +0400</pubDate>
      <category>Cat1</category>
    </item>
  </channel>
</rss> 
```

**代码示例**：

```
static void Main(string[] args)
        {
            XmlReader reader = new XmlTextReader(@"d:\test.xml");
            SyndicationFeed feed = SyndicationFeed.Load(reader);
        }
    } 
```

我为另一个 xml 日期格式问题尝试了这个[答案](https://stackoverflow.com/questions/210375/problems-reading-rss-with-c-sharp-and-net-3-5/2724742#2724742)，它运行良好。当我使用它解决 html 标签时，它不起作用并且仍然抛出异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:31:55.823

使用 Html Agility Pack 解析提要

在 codeplex 上：http: [//htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/)

# javascript - Mixpanel Analytics for Javascript 在离线时是否工作？

> ID：14328332
> 
> 赞同：4
> 
> 时间：2013-01-14T22:56:18.270
> 
> 标签：javascript, mixpanel

*类似于：[适用于 Android 的 Mixpanel 分析是否在离线时工作？](https://stackoverflow.com/questions/13208891/does-mixpanel-analytics-for-android-work-when-offline?rq=1)*

在 Javascript API 上，当访问者离线时，事件和用户跟踪是否安全？

我问是因为我们的应用程序有时会在移动设备上使用，我们仍然需要跟踪这些离线事件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T03:11:50.380

不，不是的。如果您查看[未压缩的 JS](https://cdn.mxpnl.com/libs/mixpanel-2.2.js)，事件没有排队，并且没有重试失败。但是，如果失败，[回调](https://mixpanel.com/docs/integration-libraries/javascript-full-api#track)会传递一个 0，因此您可以根据需要使用它来实现自己的重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T03:32:25.567

[正如 raylu 在原始源代码](https://cdn.mxpnl.com/libs/mixpanel-2.2.js)中指出的那样，它不是开箱即用的。但是，如果您还查看[REST API](https://mixpanel.com/docs/api-documentation/http-specification-insert-data)的源代码和文档，您可以将`time`其作为参数传递给`track`，这样您就可以确保时间戳是正确的（作为对 henry 答案的改进）。

如果您`MixpanelLib.prototype.track`在 JS 中查找，您会看到它不会更改时间，如果您查看 REST API 文档，他们会明确表示：

> time 是事件发生的时间，它必须是 unix 时间戳，比代码发送时间早 5 天的请求将被拒绝 - 这是出于安全原因，因为您的令牌通常是公开的。格式为自 1970 年以来的秒数，GMT 时区。如果你想导入数据，你可以通过一个特殊的 API 来处理任何事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T17:19:56.467

在 html5 设备和浏览器上，Localytics 将所有事件数据写入持久存储，并在连接可用时使用正确的时间戳上传它们。

尽管 Mixpanel 不能像这样开箱即用，但您可以使用相同的方法并检查它们的回调值以确定何时删除事件。时间戳将不正确，但您将获得所有数据。

随时查看我们的来源（链接在下面的文档中），看看我们是如何做到的： [http ://www.localytics.com/docs/html5-integration/](http://www.localytics.com/docs/html5-integration/)

——亨利

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-23T18:49:28.533

Mixpanel 不支持离线跟踪，但你没有理由不能自己实现它。归根结底，Mixpanel JS 库是 HTTP API 的 JavaScript 包装器。

您可以编写自己的使用 Mixpanel [HTTP API](https://mixpanel.com/help/reference/http#tracking-via-http)的 JavaScript 库。您可以在此处了解如何为 Ionic/Cordova 应用程序执行[此](http://meltuhamy.com/dev/offline-resilient-mixpanel-tracking-for-ionic-without-a-cordova-plugin/)操作- 尽管该博客文章旨在跟踪离线 Cordova 应用程序，但它演示了使用 JavaScript 对 Mixpanel 进行离线弹性跟踪的概念。

# regex - 匹配两个或三个单词和可选项

> ID：14328335
> 
> 赞同：1
> 
> 时间：2013-01-14T22:56:49.473
> 
> 标签：regex

我在考试过去的论文中尝试了一些问题，但我特别在这个问题上苦苦挣扎。目前我在想一些事情：

```
([A-Z]*),? ([A-Z]*) ([A-Z]*)? 
```

但这似乎不起作用，因为我确定我的格式/它通常是错误的。请帮忙？

如果您想知道问题如下，那么您对我想要实现的目标有所了解。非常感谢。

> 个人姓名应包含一个姓氏和一个或多个姓氏。如果姓氏放在名字之前，则姓氏后面必须加逗号。这里有些例子：
> 
> *   格雷厄姆·亚瑟·查普曼
> *   埃里克空闲
> *   吉利亚姆，特里
> *   特里·琼斯
> *   克里斯，约翰·马伍德
> *   迈克尔·佩林
> 
> 您将如何使用 egrep 命令查找包含个人姓名的行？您可以假设名称仅用大写字母书写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:06:15.267

```
^[A-Z]+,?( [A-Z]+)+?$ 
```

这样做是确保该行以一个字母开头（可选地后跟一个逗号），然后是由空格后跟至少一个字母组成的任何其他单词组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:03:26.763

您的正则表达式只允许两个名字。使用它（不捕获组）：

```
[A-Z]+,?( [A-Z]+)+ 
```

我已将 s 更改`*`为`+`s，因为您的也仅匹配两个空格。

# ios - 在情节提要中的视图控制器之间滑动手势

> ID：14328336
> 
> 赞同：4
> 
> 时间：2013-01-14T22:57:01.480
> 
> 标签：ios, xcode, storyboard

我正在寻找添加左右滑动手势以在视图控制器之间进行更改，这可能吗？在情节提要中是否有一种简单的方法可以做到这一点？谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T01:17:10.347

故事板允许您在两个视图控制器之间设置转场。我会说首先在视图之间附加segues，给它一个标识符。

然后使用类似的东西

```
UISwipeGestureRecognizer * recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(myRightAction)];
[recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
[self addGestureRecognizer:recognizer]; 
```

将滑动识别器添加到视图。

然后在 myRightAction 方法中，您想要进行 segue 调用，例如

```
[self performSegueWithIdentifier: @"MySegue" sender: self]; 
```

进入视图或关闭视图以离开视图。

您可以使用导航视图控制器来获得左右过渡动画。您还可以制作自定义转场。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-09T08:50:15.610

在 Xcode 5 上它更简单，需要更少的代码：

故事板->实用程序面板->对象库->将滑动手势识别器拖放到场景中

你必须把它拖到视图本身（背景颜色出现的地方），这样你才能看到这个连接：引用插座集合->视图

通过将委托的连接引脚拖到 viewController 来添加委托

显示助理编辑器 -> 通过 ctrl + 拖放添加一个动作到您的委托类 viewController.m

在那个动作里面写

```
[self performSegueWithIdentifier:@"mySegueIdentifier" sender:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:16:42.617

哎呀。发表了关于事故的评论。看看这个答案：[https](https://stackoverflow.com/a/14125580/1126783) ://stackoverflow.com/a/14125580/1126783 。您可以只使用滑动手势而不是按钮，它使用情节提要。

# python - Python - 为什么按钮有时有效，有时无法执行所有分配的逻辑？

> ID：14328338
> 
> 赞同：0
> 
> 时间：2013-01-14T22:57:10.857
> 
> 标签：python, linux, python-2.7

在我的python脚本中，我有这样的按钮，当我按下按钮时它非常奇怪，它有时可以工作，但有时无法执行 self.buttononTop() 调用，并且需要一段时间才能执行`subprocess.call(...)`正确的操作是`urllib2.urlopen`其余部分失败，不稳定。是什么导致它有时会失败而有时会起作用？我也为此更新了linux内核，但似乎没有任何改进。

任何的想法？

```
 def disconnectButton(self, w):
    print "Window Resize"
    self.buttononTop()
    """URL url = new URL("http://"
            + my_main_server
            + "/a/disconnectusername?username="
            + my_main_username
            + "&password="
            + my_main_password
            + "&language=EN");"""
    urllib2.urlopen(disconnect_url).read()
    subprocess.call("/var/tmp/restartMe.sh", shell=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:02:23.803

必须用作多线程。

```
import threading

def task1():
  urllib2.urlopen(blabla)

class bla:
  def disconnectButton(self, w):
    print "Window Resize"
    self.buttononTop()
    #urllib2.urlopen(disconnect_url).read()
    t1 = threading.Thread(target=task1)
    subprocess.call("/var/tmp/restartMe.sh", shell=True) 
```

# c++ - C++ SQLite3 在更新后立即返回一个空查询

> ID：14328339
> 
> 赞同：1
> 
> 时间：2013-01-14T22:57:13.030
> 
> 标签：c++, sql, database, sqlite

我在使用 SQLite 3 版本 3.7.14.1 时遇到问题，如果我进行更新然后立即尝试进行查询，它将返回 0 结果，就好像它不存在一样。

这是我的日志示例：

```
SQLiteDB::beginTransaction: 0
SQLiteDB::prepareStatement: 0
SQLiteDB::executeStatement -- Executing SQL query:SELECT ... ID LIKE '2' ...
SQLiteDB::executeStatement: 100
SqlHandler::queryEvent -- Bound results.
SqlHandler::retrieveEvents -- Result set has 1 entries
SQLiteDB::releaseStatement: 0
SQLiteDB::prepareStatement: 0
SQLiteDB::executeStatement -- Executing SQL query:UPDATE ... WHERE ID = '2'
SQLiteDB::executeStatement: 101
SQLiteDB::releaseStatement: 0
SQLiteDB::endTransaction: 0

SQLiteDB::beginTransaction: 0
SQLiteDB::prepareStatement: 0
SQLiteDB::executeStatement -- Executing SQL query:SELECT ... ID LIKE '2' ...
SQLiteDB::executeStatement: 100
SqlHandler::queryEvent -- Bound results.
SqlHandler::retrieveEvents -- Result set has 1 entries
SQLiteDB::releaseStatement: 0
SQLiteDB::prepareStatement: 0
SQLiteDB::executeStatement -- Executing SQL query:UPDATE id = '2'
SQLiteDB::executeStatement: 101
SQLiteDB::releaseStatement: 0
SQLiteDB::endTransaction: 0

SQLiteDB::beginTransaction: 0
SQLiteDB::prepareStatement: 0
SQLiteDB::executeStatement -- Executing SQL query:SELECT ... ID LIKE '2' ...
SQLiteDB::executeStatement: 101
SqlHandler::queryEvent -- Nothing found.
SQLiteDB::releaseStatement: 0
Accessor::query -- Unable to perform query. queryEvent failed.
SQLiteDB::endTransaction: 0 
```

如果我对“3”进行更新并选择“2”就没有问题，只有当我更新“2”并选择“2”时（或在同一记录上更新和选择）

所有更新的信息都是正确的，但是选择失败，除非我在操作之间放置一个小睡眠或中断（不能背靠背运行）

我是多线程、共享缓存和多个连接

```
sqlite3_config(SQLITE_CONFIG_SERIALIZED);

sqlite3_enable_shared_cache(true);

sqlite3_open("file::memory:?cache=shared", &hDBC_); 
```

提前感谢您的帮助。

编辑：对于我正在使用的开始和结束事务

```
sqlite3_exec 
```

对于我正在使用的查询、插入、删除、更新的准备语句

```
sqlite3_prepare_v2 
```

对于我正在使用的执行语句

```
sqlite3_step 
```

对于我正在使用的发布声明

```
sqlite3_finalize 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:57:15.407

谢谢大家的帮助。

问题出在我的查询中。我有一个触发器，只要给定记录有更新，就会更新“last_modified”字段。我的查询有一个 where 子句说 ... last_modified < current_timestamp。因此，如果在与查询相同的 1 秒间隔内发生任何更新，它们就会被删除。问题是我不理解/意识到时间戳的精度是 1 秒。

再次感谢大家的帮助

# java - ConcurrentModificationException，帮助我理解一些事情

> ID：14328341
> 
> 赞同：0
> 
> 时间：2013-01-14T22:57:28.940
> 
> 标签：java, exception

我不太清楚为什么我在这个方法开始时会出现异常以及为什么在这个位置？（那里没有修改）

```
 Iterator<EventGroup> groupIterator = eventGroups.iterator();
   while (groupIterator.hasNext()) {
        EventGroup eventGroup = groupIterator.next();

        Iterator<ScheduledEvent> eventIterator = eventGroup.getEvents().iterator();
        while (eventIterator.hasNext()) {

            ScheduledEvent event = eventIterator.next();   // <------------- ConcurrentModificationException

            boolean found = ((SomeObject) event).getSomeId() == someId;
            if (found) {
                unschedule++;
                unscheduleEvent(event);
                eventGroup.remove(event);

                if (eventGroup.isEmpty()) {
                    eventGroups.remove(eventGroup);
                }
            }
        }
    } 
```

似乎这里唯一要修改的是`eventGroup`，但我正在使用迭代器来遍历它。

请帮助我了解这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T22:58:57.060

`eventIterator`是一个迭代器`eventGroup`，你`eventGroup.remove(event);`在迭代时调用。您应该改用迭代器来删除该项目：

```
eventIterator.remove(); 
```

此行为在[ArrayList 的 javadoc 中进行](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)了解释：

> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：**如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。**

注意：你有同样的问题，`eventsGroup`你应该`eventGroups.remove(eventGroup);`用`groupIterator.remove();`.

# ios - 为每个标签栏项目设置背景

> ID：14328345
> 
> 赞同：2
> 
> 时间：2013-01-14T22:57:41.170
> 
> 标签：ios, xcode, background, uitabbar

我现在已经挣扎了几个小时，试图为我的 UITabBar 中的每个项目添加一个 uniqe 图像（因为我希望标签分隔符正确显示，并且在最左边和最右边没有分隔符）。

我的应用程序委托中的以下代码在底部以一种奇怪的方式显示项目。也想删除标题标签。什么是正确的方法？这真让我抓狂..

[我的标签栏的图像](http://tinypic.com/r/4uuhwj/6)

```
UIImage *selectedImage0   = [UIImage imageNamed:@"home-tab-active"];
UIImage *unselectedImage0 = [UIImage imageNamed:@"home-tab"];

UIImage *selectedImage1   = [UIImage imageNamed:@"guide-tab-active"];
UIImage *unselectedImage1 = [UIImage imageNamed:@"guide-tab"];

UIImage *selectedImage2   = [UIImage imageNamed:@"search-tab-active"];
UIImage *unselectedImage2 = [UIImage imageNamed:@"search-tab"];

UIImage *selectedImage3   = [UIImage imageNamed:@"favorites-tab-active"];
UIImage *unselectedImage3 = [UIImage imageNamed:@"favorites-tab"];

UIImage *selectedImage4   = [UIImage imageNamed:@"locations-tab-active"];
UIImage *unselectedImage4 = [UIImage imageNamed:@"locations-tab"];

// The Tab Bar
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
UITabBarItem *item0 = [tabBarController.tabBar.items objectAtIndex:0];
UITabBarItem *item1 = [tabBarController.tabBar.items objectAtIndex:1];
UITabBarItem *item2 = [tabBarController.tabBar.items objectAtIndex:2];
UITabBarItem *item3 = [tabBarController.tabBar.items objectAtIndex:3];
UITabBarItem *item4 = [tabBarController.tabBar.items objectAtIndex:4];

[item0 setFinishedSelectedImage:selectedImage0 withFinishedUnselectedImage:unselectedImage0];
[item1 setFinishedSelectedImage:selectedImage1 withFinishedUnselectedImage:unselectedImage1];
[item2 setFinishedSelectedImage:selectedImage2 withFinishedUnselectedImage:unselectedImage2];
[item3 setFinishedSelectedImage:selectedImage3 withFinishedUnselectedImage:unselectedImage3];
[item4 setFinishedSelectedImage:selectedImage4 withFinishedUnselectedImage:unselectedImage4]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:30:33.743

标签项的标题和图像应该来自分配给每个标签的内容控制器，而不是来自标签栏控制器。看起来你有你在应用程序委托中创建的那些以及属于各个控制器的那些，这就是为什么你会得到重叠的图像和标题（标签栏项目的默认字符串是标题分配给该选项卡的控制器）。

# python - Python - Tkinter - 在继承自 Toplevel() 的类中创建的小部件出现在类外部的不同框架中，Toplevel() 类为空

> ID：14328346
> 
> 赞同：0
> 
> 时间：2013-01-14T22:57:47.687
> 
> 标签：python, python-2.7, inheritance, tkinter

我正在尝试创建一个类并从中继承，`Toplevel()`以便该类的 GUI 元素可以包含在单独的窗口中。通常我只是继承自，`Frame()`但为了我的目的，我需要所有东西都在一个窗口中。我正在我的 GUI 模板脚本中编写代码，这样我就可以在将它粘贴到我想要使用它的实际脚本之前弄清楚如何让它工作。这是代码：

```
from Tkinter import *
import socket

myplayername = ''

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.pack()

        class InfoLabel(Frame):
            def __init__(self, name, value, bgc, nfgc, vfgc, master=None):
                Frame.__init__(self, master)
                self.pack()
                Label(master=self, text=name, bg=bgc, fg=nfgc).pack({"side": "left"})
                Label(master=self, text=value, bg=bgc, fg=vfgc).pack({"side": "left"})

        class LabelEntry(Frame):
            def __init__(self, name, variable, bgc, fgc, entrysize, master=None):
                Frame.__init__(self, master)
                self.pack()
                Label(master=self, text=name, bg=bgc, fg=fgc).pack({"side": "left"})
                Entry(master=self, textvariable=variable, bg=bgc).pack({"side": "left"})

        class HostGameWindow(Toplevel):
            def __init__(self):
                global myplayername
                Toplevel.__init__(self)
                self.title('Host a Game')
                hostname = socket.gethostname()
                hostipaddr = socket.gethostbyname(hostname)
                hostport = 11489
                players = 0

                portsv = StringVar(value=str(hostport))
                numofplayers = StringVar(value=str(players))
                myname = StringVar(value=myplayername)

                hostgameframe = Frame(master=self, bg='#999', bd=3, relief=RIDGE, padx=5, pady=5).pack({"side": "left"})
                hoststatusframe = Frame(master=self, bg='white', bd=3, relief=RIDGE).pack({"side": "left"})
                hostbuttonframe = Frame(master=hostgameframe, bd=2, relief=RAISED, padx=5, pady=5).pack({"side": "bottom"})
                InfoLabel(master=hostgameframe, name='Hostname:', value=hostname, bgc='#999', nfgc='blue', vfgc='red').pack({"side": "top"})
                InfoLabel(master=hostgameframe, name='IP Address:', value=hostipaddr, bgc='#999', nfgc='blue', vfgc='red').pack({"side": "top"})
                LabelEntry(master=hostgameframe, name='Host on port:', variable=portsv, bgc='#999', fgc='blue', entrysize=len(str(hostport))).pack({"side": "top"})
                LabelEntry(master=hostgameframe, name='Players Joining:', variable=numofplayers, bgc='#999', fgc='blue', entrysize=2).pack({"side": "top"})
                LabelEntry(master=hostgameframe, name='Player Name:', variable=myname, bgc='#999', fgc='blue', entrysize=16).pack({"side": "top"})
                Button(master=hostbuttonframe, text='Host Game', width=10).pack({"side": "left"})
                Button(master=hostbuttonframe, text='Start Game', width=10).pack({"side": "left"})

            def close():
                self.destroy()

        def HostGameDialog():
            HostGameWindow()

        Button(master=self, text='Host a Game', command=HostGameDialog).pack()

root = Tk()
app = Application(master=root)
#root.wm_iconbitmap(default='INSERT ICON HERE')
#root.wm_title("TITLE OF PROGRAM")
#app.master.maxsize(640, 480)
app.master.minsize(640, 480)
app.master.resizable(0, 0)
app.mainloop()
app.quit() 
```

现在由于某种原因，当我单击“托管游戏”按钮时，它会调用该`HostGameDialog()`函数并`HostGameWindow()`创建`HostGameWindow()`类改为出现在主`Application()`框架中。对我来说真正奇怪的是它不会给出任何错误，它只是将所有小部件放在主应用程序框架中，而不是`Toplevel()`创建的。

我到底做错了什么？为什么没有任何小部件放在里面`Toplevel()`？我已经做了几个小时了，没有任何意义。如果您知道任何可能对我有帮助的事情，请告诉我。

哇，我从来没有在这里等过这么久的回复，这一定是一个非常漂亮的问题，我仍然不知道该怎么办。任何想法都非常感谢！

我想没有人知道该怎么做...不过我会继续检查这里！

解决了！如果您创建对它的引用，那么在同一行上创建和打包一个小部件并不是一个好主意。`Widget(args*).pack(args*)`仅当您只调用而不创建对它的引用时，才能在同一行创建和打包小部件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:39:40.000

当您这样做时`x=a().b()`，存储在 x 中的是`b()`.

考虑以下代码行：

```
hostgameframe = Frame(self, bg='#999', bd=3, 
    relief=RIDGE, padx=5, pady=5).pack({"side": "left"}) 
```

如果我们折叠所有选项（为清楚起见），我们将得到以下结果：

```
hostgameframe = Frame(...).pack(...) 
```

你能看到发生了什么吗？`hostgameframe`被设置为 的结果`pack(...)`。`pack`总是返回`None`，所以`hostgameframe`是`None`。当您稍后创建另一个小部件并将其设置为主窗口时，该小部件最终会进入主窗口。

因此，要解决您的问题，您需要将小部件的创建与布局分开。我个人认为这是您应该始终坚持的最佳做法。对于不需要保留对小部件的引用的情况，将它们组合成一个语句是无害的。即便如此，我认为如果您养成始终将小部件创建与小部件布局分开的习惯，您的代码将更易于管理。

```
hostgameframe = Frame(self, bg='#999', bd=3, relief=RIDGE, padx=5, pady=5)
hostgameframe.pack({"side": "left"}) 
```

# javascript - VBS 脚本 getElementbyID 错误（自动登录脚本）

> ID：14328348
> 
> 赞同：0
> 
> 时间：2013-01-14T22:57:53.197
> 
> 标签：javascript, vbscript, jscript

我正在编写适用于不同站点的 .vbs 脚本文件，但我正在为我的大学网页编写用于互联网页面登录的自动登录脚本。

所以我一直在工作，直到它填写用户名和密码，但我无法点击登录。

这是大学登录的链接。我不确定您是否可以从网络外访问它。

**（请注意编辑请不要将其设为实时链接）**

hxxps://wlc-airrowdy1.utsa.edu/fs/customwebauth/studentlogin.html

**这是我的脚本代码。**

```
WScript.Quit Main

Function Main
    Set IE = WScript.CreateObject("InternetExplorer.Application", "IE_")
    IE.Visible = True
    IE.Navigate "https://wlc-airrowdy1.utsa.edu/fs/customwebauth/studentlogin.html"

    Wait IE
    WScript.Echo "This is WSH version", WScript.Version

    With IE.Document
        .getElementByID("username").value = "myuser"
        .getElementByID("password").value = "mypass"
        .getElementByID("top").submitAction
    End With
End Function

Sub Wait(IE)
    Do
        WScript.Sleep 500
    Loop While IE.ReadyState < 4 And IE.Busy 

    Do
        WScript.Sleep 500
    Loop While IE.ReadyState < 4 And IE.Busy 
End Sub

Sub IE_OnQuit
    On Error Resume Next
    WScript.StdErr.WriteLine "IE closed before script finished."
    WScript.Quit
End Sub 
```

**如果您无法访问上面的链接，这是页面的源代码。**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="EN" xml:lang="EN">
<head>

<title>UTSA: AIR Rowdy Wireless Network - The University of Texas at San Antonio</title>
<meta content=no-cache http-equiv=Cache-control />
<meta content=no-cache http-equiv=Pragma />
<meta content=-1 http-equiv=Expires />
<meta http-equiv="Content-Language" content="EN" />
<meta content="text/html; charset=iso-8859-1" http-equiv=Content-Type />
<meta name="author" content="UTSA IT: Christopher Chipps" />
<meta name="robots" content="none" />
<meta name="MSSmartTagsPreventParsing" content="true" />
<meta name="Description" content="The AIRowdy Guest wireless Internet access page." />
<meta name="Keywords" content="UTSA OIT, OIT, The Office of Information Technology, Department IT, Department Software, Help Desk" />
<meta name=GENERATOR content="MSHTML 8.00.7600.16535" />

<link rel="shortcut icon" href="http://www.utsa.edu/oit/favicon.ico" />
<link href="3col.css" type="text/css" rel="stylesheet" />

<SCRIPT language="javascript" type="text/javascript" src="./loginscript.js"></SCRIPT>

<SCRIPT language="javascript" type="text/javascript">
    var url = "";
    if(url != ""){
        var link = document.location.href;
        var searchString = "?redirect=";
        var equalIndex = link.indexOf(searchString);
        var redirectUrl = "";
        if(equalIndex > 0) {
                equalIndex += searchString.length;
                redirectUrl += link.substring(equalIndex);
                //attach the redirect url only if the ext web auth url doesn't contain it
                searchString = "&redirect=";
                equalIndex = url.indexOf(searchString);
                if(equalIndex < 0){
                    url+= "&redirect=";
                    url+=redirectUrl;
                }
        }
        window.location.href = url;
    }
</SCRIPT>
</head>
    <body>
       <div class="h"><a href="#content">Skip to main content</a></div>
        <table id="bodytable" align="center" cellpadding="0" cellspacing="0">
            <tr>
                <td id="banner1">   
                   <img src="utsaicon2c.gif" alt="UTSA The University of Texas at San Antonio" /></td>
            </tr>
            <tr>
                <td id="banner2">
                    <ul id="mainnav">
                        <li>&nbsp;</li>
                    </ul></td>
          </tr>
            <tr>
                <!-- keep the td tags in one line or else you will have a gap in IE -->              
                <td id="leftcontent">
                  <h1><a name="content"></a>Welcome to AirRowdy</h1>
                  <FORM method=post action="/login.html">
                  <INPUT value=0 maxLength=15 size=16 type=hidden name=buttonClicked />
                  <INPUT value=0 maxLength=15 size=16 type=hidden name=err_flag />
                  <INPUT maxLength=31 size=32 type=hidden name=err_msg />
                  <INPUT value=0 maxLength=15 size=16 type=hidden name=info_flag />
                  <INPUT maxLength=31 size=32 type=hidden name=info_msg />
                  <INPUT maxLength=255 size=255 type=hidden name=redirect_url /> 

                  <table width="100%" border="0" cellpadding="0" cellspacing="10" class="border_padding">
                    <tr>
                      <td colspan="2" valign="top"><h2>Student Login</h2></td>
                      <td width="48%" rowspan="4" align="right" valign="top"><img src="AirRowdy1.gif" alt="Welcome to AirRowdy" width="244" height="155" border="0" /></td>
                    </tr><script language="javascript" type="text/javascript">getErrorMsgIfAny();</script>                    
                    <tr>
                      <td width="21%"><label for="username"><b>myUTSA ID (abc123)</b></label></td>
                      <td width="31%"><input type="text" maxlength=63 size=25 name=username /></td>
                    </tr>

                    <tr>
                      <td><label for="password"><b>Password</b></label></td>
                      <td><input onkeypress=submitOnEnter(event); maxlength=63 size=25 type=password name=password emweb_type="PASSWORD" autocomplete="off" /></td>
                    </tr>
                    <tr>
                      <td>&nbsp;</td>
                      <td><script language="javascript" type="text/javascript">getHtmlForButton("Submit","Login","button","submitAction()"); setDisabledBtn();</script></td>
                    </tr>
                  </table>
                  </FORM>
                  <p>AirRowdy is UTSA's wireless network. It is available from any building at UTSA (Main Campus, Downtown Campus and The Institute of Texan Cultures).</p>
                  <p>Log on to AirRowdy with 
                  your UTSA ID (abc123) and password.</p>
                  <p>Logged-in users can 
                  reach the Internet, access e-mail and print at one of UTSA's Print Spots on campus.</p>
                  <h3>Usage 
                    Policy</h3>
                  <p>Use of the campus wireless network is governed by the <abbr title="The University of Texas at San Antonio" lang="en" xml:lang="en">UTSA</abbr> Information Resources Use and Security Policy (http://www.utsa.edu/hop/chapter8/8-12.cfm). By connecting to this network, you agree to abide by university policies   regarding appropriate computer usage. &nbsp;</p>
                  <h3>About AirRowdy</h3>
<!--                  <p>To ensure connectivity 
                    you should purchase a wireless network card that is 802.11b or 
                    802.11g (Wi-Fi) compliant.&nbsp; A web browser which supports SSL 
                    and Javascript is also required.&nbsp; No configuration changes are 
                    necessary once your wireless card is installed and functioning 
                    correctly. All web traffic (HTTP, HTTPS, etc.) is allowed on the 
                    wireless network.</p>-->
<!--                  <p>You should connect to AIR Rowdy using a wireless network card that is 802.11b or 
                    802.11g (Wi-Fi) compliant.&nbsp; A web browser which supports SSL 
                    and Javascript is also required.&nbsp; No configuration changes are 
                    necessary once your wireless card is installed and functioning 
                    correctly. All web traffic (HTTP, HTTPS, etc.) is allowed on the 
                    wireless network.</p>-->
                  <p>As a general rule, 
                    traffic on wireless networks, including AirRowdy, is <i><b>not</b></i> encrypted. This means  there is a risk of 
                    having your session &quot;sniffed&quot; during transmission.&nbsp; If you plan 
                    on entering sensitive information (passwords, credit card numbers) 
                    on a website, ensure  the site is SSL-encrypted - the URL 
                    should start with http<strong><i>s</i></strong> (not http)&nbsp; and 
                    you should see a &quot;lock&quot; icon in your browser's status 
                    bar.</p>
                  <h3>AirRowdy 
                    Help</h3>
                  <p><b>Students</b>: To activate 
                    your UTSA ID, or if you are experiencing connection issues with 
                    AirRowdy, please visit one of the Student Computing Services Labs 
                    during regular hours for assistance.</p>
                  <p>- BB 2.01.20 (Main Campus)<br />
                    - FS 2.400 (Downtown 
                  Campus)<br />
              - Library JPL  Information Commons              </p>              </td>
          </tr>

                <tr>
                    <td id="footer">
                        <div id="bottomNav"> <strong>&copy; The University of Texas at San Antonio, One UTSA Circle, San Antonio, TX 78249-1644, (210) 458-4011</strong></div></td>
                </tr>
                <tr>
                    <td id="credit">Designed &amp; Maintained by The Office of Information Technology &#8212; Last update:
                   <!-- #BeginDate format:Am1 -->August 12, 2010<!-- #EndDate -->-></td>
                </tr>
        </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:50:00.737

我不确定表单元素是否有一个名为`submitAction`. 是不是应该简单[`submit`](http://msdn.microsoft.com/en-us/library/aa752442%28v=vs.85%29.aspx)吗？

而且我没有看到任何具有您要查找的 ID 的元素：`"username"`，`"password"`或`"top"`

```
With IE.Document
    .getElementByID("username").value = "myuser"
    .getElementByID("password").value = "mypass"
    .getElementByID("top").submitAction
End With 
```

我猜你正在寻找例如

```
<td width="31%"><input type="text" maxlength=63 size=25 name=username /></td> 
```

您将使用的位置[`getElementsByName`](http://msdn.microsoft.com/en-us/library/aa752544%28v=vs.85%29.aspx)，它返回一个元素数组

```
dim elements: set elements = document.getElementsByName("username")
elements(0).Value = "username" 
```

# jquery - 查找多个 src 并将 css 背景应用于其父 div

> ID：14328349
> 
> 赞同：0
> 
> 时间：2013-01-14T22:57:59.827
> 
> 标签：jquery, background-image, image, parent, src

我一直在研究这个，但只能看到使用 .replace 的帖子和使用单个图像的其他方法。

不知道如何做到这一点，但把[小提琴](http://jsfiddle.net/tweedman23/cse2u/)放在一起来展示我正在努力的方向。

滑块中有 img 需要被移除并应用到它们自己的父 div 作为 css 背景。如您所见，slide1 和 slide2 具有不同的 lorempixel url，但第一个 url 应用于两张幻灯片。

这是我正在使用的 jQuery：

```
$(document).ready( function(){

  var src = $('.page').find('img').attr('src');

  $('.page img').each(function() {

      $(this).parent().css('backgroundImage','url('+src+')');
      $(this).remove();

  }); 
```

});

任何指导都会很棒

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:02:19.993

改变了你的 jquery ：

```
$(document).ready( function(){
  $('.page img').each(function() {
      $(this).parent().css('backgroundImage','url('+$(this).attr('src')+')');
      $(this).remove();
  });    

}); 
```

问题是当您执行 src 时，会为您提供图像源文件数组，而您并没有在循环中循环。适当地。

更新了 jsfiddle - [http://jsfiddle.net/cse2u/3/](http://jsfiddle.net/cse2u/3/)

# c# - 协/逆变接口和可分配性

> ID：14328351
> 
> 赞同：2
> 
> 时间：2013-01-14T22:58:03.793
> 
> 标签：c#, covariance, contravariance

我认为，我在方差方面遇到了一些问题，我并不完全理解。我有一个带有两个类型参数的通用接口，如下所示：

```
public interface IInvoker<TParameter, TResult> {
    TResult Invoke(TParameter parameter);
} 
```

现在，就我而言，我想让抽象`TA`类`TB`成为抽象类，如下所示：

```
public abstract class AbstractParameter {
    public int A { get; set; }
}
public abstract class AbstractResult {
    public string X { get; set; }
}

public class Parameter1 : AbstractParameter {
    public int B { get; set; }
}
public class Result1 : AbstractResult {
    public string Y { get; set; }
}
// ... Many more types 
```

然后我想处理一组不同的实现`IInvoker<,>`，所以我想我可以做这样的事情

```
public class InvokerOne : IInvoker<Parameter1, Result1> { /* ... */ }
public class InvokerTwo : IInvoker<Parameter2, Result2> { /* ... */ }

// ..
IInvoker<AbstractParameter, AbstractResult>[] invokers = { new InvokerOne(), new InvokerTwo() }; 
```

据我所知，这不起作用，因为`IInvoker<AbstractParameter, AbstractResult>`不能从（和朋友）分配。首先，我认为`IInvoker<Parameter1, Result1>`是时候在我的界面（`in``out``interface IInvoker<in TParameter, out TResult>`

但我不明白为什么？据我所知，任何使用 an 的人都`IInvoker<AbstractParameter, AbstractResult>`应该可以打电话`Invoke`，对吧？我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:16:08.720

问题是`TResult`类型参数是逆变的，但是您试图在分配中使用它们协变，例如

```
IInvoker<AbstractParameter, AbstractResult> i1 = new InvokerOne(); 
```

`TResult`是协变的，所以`AbstractResult`可以是比 . 更大的类型`Result1`。但是，因为`TParameter`是逆变的，所以`TParameter`必须是比 更小的类型`Parameter1`，而`AbstractParameter`.

如果上述内容有效，您可以执行以下操作：

```
class OtherParameter : AbstractParameter { ... };
IInvoker<AbstractParameter, AbstractResult> i1 = new InvokerOne();
i1.Invoke(new OtherParameter()); 
```

这是不安全的。

但是，您可以拥有以下内容：

```
public class OtherParameter1 : Parameter1 { }
IInvoker<OtherParameter1, AbstractResult> i1 = new InvokerOne(); 
```

这里`OtherParameter1`可以作为参数传递给，`Invoke`因为它总是有效的 for `Parameter1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:44:00.080

您缺少的一件事是界面中的差异声明。该接口不是变体，除非您将其声明为：

```
public interface IInvoker<in TParameter, out TResult>
//                        ^^             ^^^
//                        Look!          Here too!
{
    TResult Invoke(TParameter parameter);
} 
```

`in`和关键字有助于强调差异的`out`性质。类型对于参数是逆变的，对于`in`参数是协变的`out`。换句话说，假设通常的`Animal : Mammal : Cat`示例，您可以这样做：

```
IInvoker<Mammal, Mammal> a = Whatever();
IInvoker<Cat, Mammal> b = a;
IInvoker<Mammal, Animal> c = a; 
```

这本身并不是特别有用，但关键是您可以在`IInvoker<Mammal, Mammal>`需要的任何地方使用 an`IInvoker<Cat, Mammal>`或`IInvoker<Mammal, Animal>`.

您的问题还缺少一些重要的东西：您到底想对您的一组`IInvoker<,>`实现做什么？（“我想处理`IInvoker<,>`......的一组不同实现”）这个问题的答案将引导你找到你的解决方案。你想用一些继承自 AbstractParameter 的对象来调用它们吗？如果是这样，正如李解释的那样，如果你能做你想做的事，你会遇到一些麻烦，因为没有什么能阻止这一点：

```
IInvoker<AbstractParameter, AbstractResult>[] invokers = { new InvokerOne(), new InvokerTwo() };
AbstractParameter[] parameters = { new ParameterOne(), new ParameterTwo() };
AbstractResult[] results = { invokers[0].Invoke(parameters[1] /* oops */), invokers[1].Invoke(parameters[0] /* oops */) }; 
```

解决该问题的一种方法是从界面中删除参数。使其成为调用者的私有字段，或者创建一个将调用者与其参数配对的类，如下所示：

```
interface IInvokerParameterPair<out TResult>()
    where TResult : AbstractResult
{
    TResult InvokeTheInvoker();
}

class InvokerParameterPair<TParameter, TResult> : IInvokerParameterPair<TResult>
    where TParameter : AbstractParameter 
    where TResult : AbstractResult
{
    private IInvoker<TParameter, TResult> _invoker;
    private TParameter _parameter;
    public InvokerParameterPair(IInvoker<TParameter, TResult> invoker, TParameter parameter)
    {
        _invoker = invoker;
        _parameter = parameter;
    }
    public TResult InvokeTheInvoker()
    {
        return _invoker.Invoke(_parameter);
    }
} 
```

另一方面，如果您想做一些与 Invoke 方法无关的处理，那么您的调用程序应该实现一些其他公共接口或从其他一些公共基类继承，如下所示：

```
public interface IProcessable { }
public interface IInvoker<in TParameter, out TResult> : IProcessable
{
    TResult Invoke(TParameter parameter);
}

public class InvokerOne : IInvoker<Parameter1, Result1> { /* ... */ }
public class InvokerTwo : IInvoker<Parameter2, Result2> { /* ... */ }

IProcessable[] invokers = { new InvokerOne(), new InvokerTwo() }; 
```

或这个：

```
public interface IInvoker<in TParameter, out TResult> : IProcessable
{
    TResult Invoke(TParameter parameter);
}

public abstract class Processable { }
public class InvokerOne : Processable, IInvoker<Parameter1, Result1> { /* ... */ }
public class InvokerTwo : Processable, IInvoker<Parameter2, Result2> { /* ... */ }

Processable[] invokers = { new InvokerOne(), new InvokerTwo() }; 
```

# sql - 如何通过脚本自动生成临时表列和数据类型

> ID：14328353
> 
> 赞同：2
> 
> 时间：2013-01-14T22:58:16.913
> 
> 标签：sql, sql-server, sql-server-2008

我经常在 SQL 中创建临时表，并且正在寻找一种为表定义自动生成列名和数据类型的方法，因此我不必每次都查看它们。

例如我运行：

```
SELECT CustomerID
  ClientID,
  FirstName
  LastName
INTO #Test
From dbo.Customer 
```

最初使用我需要的适当列和数据设置临时表。一旦我完成了所有这些，我就返回并取出 INTO 语句并写下以下内容：

```
CREATE TABLE #Test
(
...
...
); 
```

我想找到一种从临时表的初始创建中自动生成列名和数据类型的方法。现在，由于我最初是插入到一个自动创建的临时表中，所以我使用这个：

```
EXEC tempdb..sp_help '#Test'; 
```

这为我提供了我需要的一切，而无需查看所有列数据类型，但我想知道是否有一种方法可以自动生成类似这样的列名。所以自动生成会生成：

```
CustomerID int,
ClientID int,
FirstName varchar(50),
LastName varchar(50) 
```

这将允许我将其复制并粘贴到我的创建表语句中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T23:35:48.123

这可能会给你一个开始：

```
DECLARE @viewname VARCHAR(50);
SET @viewname ='tableorviewname';
SELECT  c.name + ' '+ t.name + 
case t.name  
WHEN 'varchar' THEN '('+CAST(c.max_length AS VARCHAR(3) )+'),'
ELSE ',' 
end
FROM sys.columns c
INNER JOIN sys.types AS t ON c.system_type_id = t.system_type_id
WHERE object_id = (SELECT object_id from sys.objects where name = @viewname)
ORDER BY c.column_id 
```

编辑：临时表：

临时表略有不同，例如这在 sql 2008 中适用于名为 #tv_source 的临时表

```
DECLARE @viewortablename VARCHAR(50);
SET @viewortablename ='tempdb..#tv_source';
SELECT  c.name + ' '+ t.name + 
case t.name  
WHEN 'varchar' THEN '('+CAST(c.max_length AS VARCHAR(3) )+'),'
ELSE ',' 
end
FROM tempdb.sys.columns c
INNER JOIN sys.types AS t ON c.system_type_id = t.system_type_id
WHERE object_id =  object_id(@viewortablename)
ORDER BY c.column_id 
```

注意：这给出了一个逗号分隔的列表，但没有尝试删除最后一个逗号，它只给出一个列表，您可能希望将其放在字符串上并进行操作等，然后用作动态 sql 或其他东西。尽管如此，它应该让你开始你想做的事情。

对其他人的注意，sql 2000 不会正确显示长度，例如在 varchar(45) 上，它只会列出 varchar 部分，我没有尝试为这个问题修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:13:57.103

```
SELECT
', ['+ac.name+'] '+Type_Name(User_type_id)+
CASE WHEN Type_Name(User_type_id) = 'Decimal' 
      THEN +'('+CONVERT(Varchar(4),ac.Precision)+','+CONVERT(Varchar(4),ac.Scale)+')' 
      WHEN Type_Name(User_type_id) IN 
            ('tinyint','smallint','int','real','money','float','numeric','smallmoney','DateTime') 
      THEN ''
      ELSE +'('+CONVERT(Varchar(4),ac.Max_Length)+')' 
END AS TableColumn
FROM Tempdb.sys.all_columns AS ac
      INNER JOIN Tempdb.Sys.SysObjects AS so
            ON so.ID = ac.Object_ID
WHERE 1 = 1
AND so.Name = '##YourTempTableGoesHere' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-26T09:02:20.187

...我创建了一个可以输出列和数据类型列表的函数，如果对象是表，那对您有用吗？

```
CREATE FUNCTION [dbo].[fnDiscoverColumns]
( @PObjectName NVARCHAR(300) )

RETURNS @Data TABLE ( ColumnList NVARCHAR(350) )

AS
BEGIN

DECLARE @PObjectID TABLE  ( [object_id] INT )
INSERT @PObjectID ( [object_id] )

SELECT [object_id] FROM sys.objects AS O WHERE O.name = @PObjectName AND O.type = 'U'

DECLARE @PObjectDetails TABLE ( [RowNo] INT,[ColumnName] NVARCHAR(300),[XType] INT,[DataType] NVARCHAR(100),[system_type_id] INT,[user_type_id] INT,[MaxLength] NVARCHAR(5),[Precision] INT,[Scale] INT,[ColumnList] NVARCHAR(300) )

INSERT @PObjectDetails ( [RowNo],[ColumnName],[XType],[DataType],[system_type_id],[user_type_id],[MaxLength],[Precision],[Scale],[ColumnList] )

SELECT DISTINCT
ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS 'RowNo',
C.name AS 'ColumnName',
T.xtype AS 'XType',
UPPER(T.name) AS 'DataType',
C.system_type_id,
C.user_type_id,
CASE WHEN C.max_length < 0 THEN 'MAX' ELSE CAST(C.max_length AS VARCHAR) END AS 'MaxLength',
C.precision AS 'Precision',
C.scale AS 'Scale',
CASE
WHEN [XType] IN (34,35,36,40,48,52,56,58,59,60,61,62,98,99,104,122,127,189,240,241) THEN QUOTENAME(C.name) +'  '+ UPPER(T.name) +',' 
WHEN [XType] IN (106,108) THEN QUOTENAME(C.name) +'  '+ UPPER(T.name) +'('+ CAST([Precision] AS VARCHAR) +','+ CAST(C.scale AS VARCHAR) +'),'
WHEN [XType] IN (41,42,43,165,167,173,175,231,239) THEN QUOTENAME(C.name) +'  '+ UPPER(T.name) +'('+ CASE WHEN C.max_length < 0 THEN 'MAX'  WHEN C.max_length > 1 THEN CAST(C.max_length / 2 AS VARCHAR) ELSE CAST(C.max_length AS VARCHAR) END +'),' ELSE NULL END AS 'ColumnList'
FROM sys.all_columns AS C
JOIN systypes AS T ON C.system_type_id = T.xusertype
WHERE C.object_id = (SELECT * FROM @PObjectID)  --373576369

--Return column names and data types
INSERT @Data
SELECT 'CREATE TABLE #ColumnsList ('

INSERT @Data
SELECT 
CASE WHEN C.RowNo = (SELECT MAX(RowNo) FROM @PObjectDetails) THEN LEFT(C.ColumnList, ABS(LEN(C.ColumnList + ',') - 2)) ELSE C.ColumnList END AS 'GeneratedColumns'     
FROM @PObjectDetails AS C

INSERT @Data
SELECT ')'

RETURN
END
GO 
```

提交到数据库后，像这样运行它：

```
SELECT * FROM [dbo].[fnDiscoverColumns] ('ExecutionLogStorage') --name of table 
```

这应该会给你这样的输出：

```
CREATE TABLE #ColumnsList (
[LogEntryId]  BIGINT,
[InstanceName]  NVARCHAR(38),
[ReportID]  UNIQUEIDENTIFIER,
[UserName]  NVARCHAR(260),
[ExecutionId]  NVARCHAR(64),
[RequestType]  TINYINT,
[Format]  NVARCHAR(26),
[Parameters]  NTEXT,
[ReportAction]  TINYINT,
[TimeStart]  DATETIME,
[TimeEnd]  DATETIME,
[TimeDataRetrieval]  INT,
[TimeProcessing]  INT,
[TimeRendering]  INT,
[Source]  TINYINT,
[Status]  NVARCHAR(40),
[ByteCount]  BIGINT,
[RowCount]  BIGINT,
[AdditionalInfo]  XML
) 
```

# ruby-on-rails - Ruby on Rails，谷歌图表

> ID：14328354
> 
> 赞同：1
> 
> 时间：2013-01-14T22:58:19.323
> 
> 标签：ruby-on-rails, google-visualization

我正在为 Ruby 使用[googlecharts gem](http://googlecharts.rubyforge.org/)。我想绘制具有不同列颜色和垂直轴范围的汽车的直方图。不知何故，所有列都具有相同的颜色，并且轴标签也不起作用。我的错误在哪里？

```
 <%= image_tag(Gchart.bar :size => '340x260', 
                   :title => 'Car Types',
                   :data => [5,1,10],
                   :legend => ['BWM','Audi','Opel'],
                   :bar_colors => '3300CC,3399FF,33CCFF',
                   :axis_with_labels =>'y',                   
                   :axis_labels =>[0,10]

                   ) %> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:37:42.043

这对我来说很好：

```
<%= image_tag(Gchart.bar :size => '340x260', 
                   :stacked => false,
                   :title => 'Car Types',
                   :data => [[5],[1],[10]],
                   :legend => ['BWM','Audi','Opel'],
                   :bar_colors => ['3300CC','3399FF','33CCFF'],
                   :axis_with_labels => ['y'],                   
                   :axis_labels => [[0,10]]
                   ) %> 
```

# c# - 在 WPF 中将 DataGridComboBoxColumn 动态添加到 DataGrid

> ID：14328356
> 
> 赞同：3
> 
> 时间：2013-01-14T22:58:23.463
> 
> 标签：c#, wpf, datagrid, datagridcomboboxcolumn

我正在以编程方式将表从我的数据库模型加载到`DataGrid`我的应用程序中

每当我确定我加载了一个`Base`名为“”的列时，我想在用户想要编辑此值时为用户提供选项以`DataGrid`从`ComboBox`

所以每当我发现我发现一个“ `Base`”列时，我都会这样做：

```
for (int i = 1; i < this.main_grid.Columns.Count; i++)
{
    if (this.main_grid.Columns[i].Header.ToString() == "Base")
    {

        var query = from tbl in db.BASES select tbl;
        this.main_grid.Columns.RemoveAt(i);
        DataGridComboBoxColumn dgCmbCol = new DataGridComboBoxColumn();
        dgCmbCol.Header = "Base";
        dgCmbCol.ItemsSource = query.ToList();
        dgCmbCol.DisplayMemberPath = "base_name";
        dgCmbCol.SelectedValuePath = "base_id";
        dgCmbCol.SelectedItemBinding = new Binding("SelectedItem");
        this.main_grid.Columns.Add(dgCmbCol);

        break;
    }
} 
```

问题是当我调用`db.SaveChanges()`它时不会保存任何东西。在这样的情况下我该怎么办？

# css - codepen 中的 CSS Masonry 显示比指定的少一列

> ID：14328357
> 
> 赞同：1
> 
> 时间：2013-01-14T22:58:24.740
> 
> 标签：css, image, gallery

这是 codepen [http://codepen.io/yashrg/pen/GmhJj](http://codepen.io/yashrg/pen/GmhJj)的链接 基本上是一个应该在 5 列中显示图像的图像库。我在这里使用无缝响应式照片网格教程[http://css-tricks.com/seamless-responsive-photo-grid/](http://css-tricks.com/seamless-responsive-photo-grid/)

但预期的结果不是我所期望的。我只看到 4 列。为什么会这样？

# vb.net - 在数据绑定 DataGridView 中显示复选框

> ID：14328359
> 
> 赞同：1
> 
> 时间：2013-01-14T22:58:33.027
> 
> 标签：vb.net, datagridview

我无法从数据库的布尔列中正确填充 DataGridView 复选框列。

第一个 form_load 代码：

```
Me.DataGridView1.DataSource = Me.bindingSource1
GetData("SELECT myInt, myBool, myString " & _
        "FROM " & myFavTable & " " & _
        "WHERE (myInt > 100) ORDER BY myString")

formatGrid() 
```

在 GetData 我用数据填充 myTable：

```
Me.dataAdapter.Fill(myTable)
Me.bindingSource1.DataSource = myTable 
```

最后我在显示之前格式化网格。

我手动格式化它，因为加载比自动格式化快得多。

```
 With DataGridView1
        .AllowUserToAddRows = False
        .AllowDrop = False
        .AllowUserToOrderColumns = False
        .AllowUserToResizeRows = False
        .SelectionMode = DataGridViewSelectionMode.FullRowSelect
        .MultiSelect = False
        .Dock = DockStyle.Fill
        .EditMode = DataGridViewEditMode.EditProgrammatically

       With .Columns(0)
            .Name = "postN"
            .HeaderText = "Postal"
            .Width = 55
        End With

        With .Columns(1) 'here should be a checkbox
            .Width = 20
        End With

        With .Columns(2)
            .Name = "colCity"
            .HeaderText = "City"
            .Width = 180
        End With
    End With 
```

但是使用此代码，在我应该显示复选框的列中，字符串值`0`在数据库中显示为`FALSE`.

在这种情况下，如何在中间列而不是文本中获得复选框？

我在绑定之前和之后尝试使用 .Columns.Add... 但没有想要的结果。
这样我就可以得到`checkboxes`，但在新列中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:11:40.317

在设计时将列添加到 DataGridView 并将中间列设置为 CheckBoxColumn。

然后设置：

```
With DataGridView1
   .AutoGenerateColumns = False 
```

**编辑：** 我现在看到了问题。您需要将 DataPropertyName 设置为与列相同。

当您向 DataGridView 添加列时，在该对话框中设置 DataPropertyName 以匹配 DataTable (myTable) 列名称。这就是映射背后的魔力。

![在此处输入图像描述](../Images/c6b0caf44508907315e539cfa6eb1dad.png)

这是代码：

```
DataTable dt = new DataTable();
dt.Columns.Add("TextBoxCol");
dt.Columns.Add("CheckBoxCol");
DataRow dr = dt.NewRow();
dr[0] = "Hello";
dr[1] = false;
dt.Rows.Add(dr);
dr = dt.NewRow();
dr[0] = "World";
dr[1] = true;
dt.Rows.Add(dr);
dataGridView1.DataSource = dt; 
```

![在此处输入图像描述](../Images/71eb50f8ebc12b84433802922696c807.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-08T14:19:07.133

我有同样的问题。我有一个用这个 SQL 填充的 DataSet：

```
"SELECT nombre, CASE WHEN fecha IS NULL THEN 0 ELSE 1 END AS baja" 
```

任务

```
dtgEmpleado.DataSource = ds.Tables(0)

With dtgEmpleado
    .Columns(0).HeaderText = "Nombre"
    .Columns(0).DataPropertyName = "nombre"
    .Columns(0).Name = "nombre"
    .Columns(0).Width = 100
    .Columns(1).HeaderText = "Baja"
    .Columns(1).DataPropertyName = "baja"
    .Columns(1).Name = "baja"
    .Columns(1).Width = 70
End With 
```

我希望将“Baja”列显示为“复选框”。

我可以这样做：

```
AutoGenerateColumns = False 
```

但更简单的方法，改变 SQL 语句：

```
"SELECT nombre, CAST(CASE WHEN fecha IS NULL THEN 0 ELSE 1 END AS BIT) AS baja" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:12:51.120

```
Dim cell As DataGridViewCell = New DataGridViewCheckBoxCell()

With DataGridView1
    With .Columns(1)
        .CellTemplate = cell
    End With
End With 
```

**编辑：**

这是一个建议，不要尝试在您的设计时添加列，`DataGridView`因为您自己查询它会生成一个`DataGridViewCheckBoxCell`

```
GetData("SELECT myInt AS Id, myBool AS Bool, myString AS String " & _
        "FROM " & myFavTable & " " & _
        "WHERE (myInt > 100) ORDER BY myString")

Me.dataAdapter.Fill(myTable)
Me.bindingSource1.DataSource = myTable

DataGridView1.DataSource = bindingSource1; 
```

# jquery - this._destroy 不是函数

> ID：14328368
> 
> 赞同：2
> 
> 时间：2013-01-14T22:59:08.030
> 
> 标签：jquery, jquery-mobile, backbone.js

我有一个backbone.js + jquery ui + jquery 移动应用程序，由于某种原因.remove() 抛出：this._destroy 不是jquery 库中的函数错误。还有其他人遇到这个吗？我猜这是一个问题，'this' 指的是不同的元素，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:01:59.183

不同之处可能是您在骨干对象上调用 .remove() 与 jQuery 对象——Backbone.View 对象和 jQuery 对象都具有 .remove() 方法——也许你在一种类型上调用它，思考是另一个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:20:14.403

找到了一个原生 JS 解决方法：

```
var thisCancel = $(e.currentTarget).closest('tr').prop('id');
var dRemove = document.getElementById(thisCancel);
dRemove.parentNode.removeChild(dRemove); 
```

# python - Python Docx 回车

> ID：14328369
> 
> 赞同：9
> 
> 时间：2013-01-14T22:59:14.067
> 
> 标签：python, python-docx

`Python Docx`是一个非常好的库，用于为不直接处理所有 COM 内容的东西生成 Microsoft Word 文档。尽管如此，我遇到了一些限制。

*   有谁知道如何将回车符放入一串文本中？

我希望一个段落有多行，而它们之间没有额外的空间。但是，写出一个将行与通常行分开的字符串`\n`是行不通的。也不是使用`&#10`or `&#13`。还有其他想法，或者这个框架对于类似的东西来说太有限了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-20T06:59:28.203

我不确定这是否可能。看起来 Word 实际上将按下回车键（我将此操作视为“\r\n”和“\n”的一种编程等效项）作为新段落的创建。

* * *

如果我在 Word 中录制包含以下内容的宏：

1.  输入文本“一”
2.  按回车键

我得到的VBA：

```
Selection.TypeText Text:="One"
Selection.TypeParagraph 
```

* * *

如果我创建一个看起来像这样的 Word 文档（在每个单词后按 Enter）：

```
One

Two

Three 
```

该文档的正文在`documents.xml`文件中如下所示：

```
<w:body>
    <w:p w:rsidR="00BE37B0" w:rsidRDefault="00CF2350">
        <w:r>
            <w:t>One</w:t>
        </w:r>
    </w:p>
    <w:p w:rsidR="00CF2350" w:rsidRDefault="00CF2350">
        <w:r>
            <w:t>Two</w:t>
        </w:r>
    </w:p>
    <w:p w:rsidR="00CF2350" w:rsidRDefault="00CF2350">
        <w:r>
            <w:t>Three</w:t>
        </w:r>
    </w:p>
    <w:sectPr w:rsidR="00CF2350" w:rsidSect="001077CC">
        <w:pgSz w:w="11906" w:h="16838"/>
        <w:pgMar w:top="1440" w:right="1440" w:bottom="1440" w:left="1440" w:header="708" w:footer="708" w:gutter="0"/>
        <w:cols w:space="708"/>
        <w:docGrid w:linePitch="360"/>
    </w:sectPr>
</w:body> 
```

从[MSDN](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.paragraph%28v=office.14%29.aspx)我们可以看到该`<w:p>`元素代表一个段落。

* * *

我认为解决此问题的方法是遵循[Python Docx](https://github.com/mikemaccana/python-docx/blob/master/example-makedocument.py)中的示例：

```
body.append(paragraph("Hi."))
body.append(paragraph("My name is Alice."))
body.append(paragraph("Let's code")) 
```

或者：

```
for paragraph_text in "Hi. \nMy name is Alice.\n Let's code".split("\n"):
    body.append(paragraph(paragraph_text.strip())) 
```

**编辑：**

进一步研究一下，如果您在 Word 中按 Shift + Enter，它会通过添加手动换行符（不是段落）追加`Chr(11)`. 在 Open XML 中，这转换为[Break](http://msdn.microsoft.com/en-us/library/documentformat.openxml.wordprocessing.break%28v=office.14%29.aspx)。

查看`docx.py`Python Docx 的文件，可能是这样的方法（免责声明：未测试）：

```
for text in "Hi. \nMy name is Alice.\n Let's code".split("\n"):
    run = makeelement('r')
    run.append(makeelement('t', tagtext=text))
    run.append(makeelement('br'))
    body.append(run) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-01-16T14:09:20.377

`add_break()`您可以通过调用运行来使用 python-docx 实现回车。例如：

```
doc = Document()
p = doc.add_paragraph()
run = p.add_run()
run.add_break() 
```

[python-docx 参考](http://python-docx.readthedocs.org/en/latest/dev/analysis/features/text/breaks.html#candidate-protocol-run-add-break)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-20T22:29:58.253

从 v0.7.2 开始，python-docx 将字符串中的 '\n' 和 '\r' 字符转换为`<w:br/>`元素，从而提供您描述的行为。它还将 '\t' 字符转换为`<w:tab/>`元素。

此行为适用于提供给以下对象的字符串：

*   `Document.add_paragraph()`
*   `Paragraph.add_run()`

对于分配给的字符串：

*   `Paragraph.text`
*   `Run.text`

# android - 删除操作后更新 ListView

> ID：14328373
> 
> 赞同：4
> 
> 时间：2013-01-14T22:59:33.973
> 
> 标签：android, sqlite, android-listview

我正在显示从 Android OS sqlite 数据库中提取的数据。当我单击它们时，我成功地删除了要删除的项目。但是，我在操作后刷新或更新列表视图时遇到问题。

下面是我删除联系人的代码。

```
deleteBtn = (Button)v.findViewById(R.id.deleteBtn);
    deleteBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(v.getContext(), "Deleted: " + c.getId() + " " + c.getName(), Toast.LENGTH_SHORT).show();
            adapter.deleteContact(c.getId());
            updateList();
        }
    }); 
```

下面是 updateList() 方法：

```
public void updateList(){
    myList.refreshDrawableState();
    myList.invalidateViews();
    this.notifyDataSetChanged();
} 
```

我在此方法中包含了我尝试刷新的所有三种方式，但没有一种对我有用。知道如何实现这一目标吗？

编辑：我改变了我的代码，认为这将是解决方案，但它也不起作用：

DbAdapter 类删除方法（）：

```
public boolean deleteContact(int rowId){
    getAllContactsList();
    return db.delete(DB_TABLE, COLUMN_ID + "=" + rowId, null) > 0;

} 
```

获取所有联系人列表（）：

```
public List<Contact> getAllContactsList(){
    List<Contact> contactList = new ArrayList();

    Cursor c = db.query(DB_TABLE, new String [] {COLUMN_ID, COLUMN_FNAME, COLUMN_LNAME}, null, null, null, null, null);

    //loop through cursor rows and add to list
    if(c.moveToFirst()){
        do{
            Contact contact = new Contact();
            contact.setId(Integer.parseInt(c.getString(0)));
            contact.setfName(c.getString(1));
            contact.setlName(c.getString(2));
            contactList.add(contact);
        }while(c.moveToNext());
    }
    return contactList;
}public List<Contact> getAllContactsList(){
    List<Contact> contactList = new ArrayList();

    Cursor c = db.query(DB_TABLE, new String [] {COLUMN_ID, COLUMN_FNAME, COLUMN_LNAME}, null, null, null, null, null);

    //loop through cursor rows and add to list
    if(c.moveToFirst()){
        do{
            Contact contact = new Contact();
            contact.setId(Integer.parseInt(c.getString(0)));
            contact.setfName(c.getString(1));
            contact.setlName(c.getString(2));
            contactList.add(contact);
        }while(c.moveToNext());
    }
    return contactList;
} 
```

我想通过在删除联系人之前获取一个新光标它会相应地更新列表。不幸的是，它没有任何区别。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:09:27.610

It seems that you have the Database Adapter class, but you're missing the ArrayAdapter class, which is intended to manage the list of items, displayed in your ListView. Take a look at [this example](http://www.ezzylearning.com/tutorial.aspx?tid=1763429), specifically at the WeatherAdapter.java class.

If I am wrong in my assumptions and the `adapter` object in your code is not a database adapter, but an ArrayAdapter class, try putting `adapter.notifyDataSetChanged()` instead of this.notifyDataSetChanged().

Let me know if this helped.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:14:50.987

您必须通知列表的适配器您已修改基础数据。

尝试使用`adapter.notifyDataSetChanged();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:16:06.243

您必须重新查询并生成新列表：

```
public void updateList(){
    clear();
    addAll(contactsDbHelper.getAllContactsList()); //addAll works since 11 API version.
    notifyDataSetChanged(); //need this is you dissabled auto notify
} 
```

PS 您应该使用[Content providers](http://developer.android.com/guide/topics/providers/content-providers.html)和[CursorAdapter](http://developer.android.com/reference/android/widget/CursorAdapter.html)来完成这项工作，但是您需要手动通知内容提供者有关更改，因为`Cursor.requery()`自 11 版本以来已弃用。

# ios - SKPaymentTransaction：transactionDate 到底是什么？

> ID：14328374
> 
> 赞同：10
> 
> 时间：2013-01-14T22:59:38.157
> 
> 标签：ios, objective-c, in-app-purchase

在 Apple 的文档中`transactionDate`是：

> 交易添加到 App Store 支付队列的日期。（只读）

我只是想澄清一下在以下情况下 transactionDate 是什么：

1.  在 T1 时间购买了一些东西（transactionDate 是 T1？）
2.  在 T2 时间恢复购买（transactionDate 是 T2 还是 T1？）
3.  恢复事务的originalTransaction，它的transactionDate是T1还是T2？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-04-07T11:20:53.020

> 1.  在 T1 时间购买了一些东西（transactionDate 是 T1？）

是的。交易日期为 T1。按照苹果的文档：

> **transactionDate ：**交易添加到 App Store 支付队列的日期。

* * *

> 2.  在 T2 时间恢复购买（transactionDate 是 T2 还是 T1？）

没关系。如果`transactionState`设置为`SKPaymentTransactionStateRestored`，则应阅读`originalTransaction`。按照苹果的文档：

> **originalTransaction ：**此属性的内容未定义，除非 transactionState 设置为 SKPaymentTransactionStateRestored。当交易恢复时，当前交易持有新的交易标识符、收据等。*您的应用程序将读取此属性以检索恢复的事务。*

* * *

> 3.  恢复事务的originalTransaction，它的transactionDate是T1还是T2？

T1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T11:28:41.307

1) if `transactionState`is `SKPaymentTransactionStatePurchased`transactionDate 总是 T1

2) if `transactionState`is `SKPaymentTransactionStateRestored`transactionDate is T2 or T3 (restored date)

3) originalTransaction.transactionDate 它总是 T1

# django-forms - django 错误：意外的关键字参数“小部件”

> ID：14328381
> 
> 赞同：1
> 
> 时间：2013-01-14T23:00:03.063
> 
> 标签：django-forms

我想将一个字段（名为“图标”）显示为单选按钮。

我创建了回调方法以使用 JQuery 显示 DateTimeFields。下面的代码应该这样做，但是当我运行我的服务器时出现此错误：

调用元类库时出错 make_custom_datefield() 得到了意外的关键字参数“小部件”

...

异常位置：fields_for_model 中的 Virtualenvs/django/local/lib/python2.7/site-packages/django/forms/models.py，第 164 行

表格.py：

```
def make_custom_datefield(f):
    formfield = f.formfield()
    if isinstance(f, DateTimeField):
        formfield.widget.format = '%m/%d/%Y'
        formfield.widget.attrs.update({'class':'datetimePicker', 'readonly':'true'})
    return formfield

class FlashForm(forms.ModelForm):
    formfield_callback = make_custom_datefield

    class Meta:
        model = Flash
        exclude=('user','marker','address')
        widgets = {'icon': forms.RadioSelect(), } 
```

你能帮帮我吗，我真的不知道如何解决这个问题！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:14:25.463

最终，我找到了答案：我必须添加 **kwargs 参数。

```
def make_custom_datefield(f,**kwargs):
    formfield = f.formfield(**kwargs)
    if isinstance(f, DateTimeField):
        formfield.widget.format = '%m/%d/%Y'
        formfield.widget.attrs.update({'class':'datetimePicker', 'readonly':'true'})
    return formfield 
```

# python - Python - cPickle 嵌套日期时间对象

> ID：14328382
> 
> 赞同：2
> 
> 时间：2013-01-14T23:00:06.203
> 
> 标签：python, datetime, pickle

我有一个列表列表，每个子列表看起来像这样：

```
a = [datetime.datetime(2012, 2, 1), datetime.datetime(2012, 2, 2), 'string', 4.00]
b = [datetime.datetime(2012, 3, 1), datetime.datetime(2012, 3, 4), 'another_string', 5.00]

list_of_lists = [a,b] 
```

要腌制列表：

```
cPickle.dump(list_of_lists, open(filename, 'wb')) #filename defined 
```

运行时，它会引发：

```
Traceback (most recent call last):
  File "analyze_data.py", line 129, in <module>
    analyze_data(sys.argv[1]) #because the dump runs inside a function
  File "analyze_data.py", line 77, in analyze_data
    cPickle.dump(list_of_lists, open(filename, 'wb')) 
TypeError: 'datetime.datetime' object is not callable 
```

我已经在 Python 2.7.3 和 2.6.8 上复制了该错误。

与常规泡菜相同的错误/回溯。此外，紧接在 cPickle.dump 之前的打印语句表明错误发生在这里而不是其他地方。

从[文档](http://docs.python.org/2/library/pickle.html)中，听起来您可以 cPickle 嵌套对象，并非所有对象都必须是内置类型。也许我可以将所有[日期](http://docs.python.org/2/library/datetime.html)时间对象更改为字符串。毫无疑问，有很多方法可以完成序列化，我可以调整代码以使上述问题不存在。但是，如果确实如此，我需要了解为什么这是不可能的。

谁能解释为什么嵌套的日期时间对象不能通过 cPickle/pickle 序列化？

编辑：酸洗上述数据结构在函数之外工作正常。里面，没有骰子。见下文。

```
def analyze_data(some_id, some_date=default_date): #some_id/some_date (datetime object) defined above
  …
  #create list_of_lists
  …
  string_date = some_date.strftime('%Y%m%d') #works
  filename = '{0}_{1}.p'.format(some_id, string_date) #filename created fine
  cPickle.dump(list_of_lists, open(filename, 'wb')) #kaboom 
```

我将此函数映射到其他模块中的其他数据，因此理想情况下希望将酸洗保留在函数调用中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T17:14:23.820

为此，我不会做任何复杂的事情......我会编写您想要编写的代码。我会使用[dill](http://pythonhosted.org/dill)，它可以在 python 中序列化几乎任何东西。

```
>>> import dill
>>> import datetime
>>> a = [datetime.datetime(2012, 2, 1), datetime.datetime(2012, 2, 2), 'string', 4.00]
>>> b = [datetime.datetime(2012, 3, 1), datetime.datetime(2012, 3, 4), 'another_string', 5.00]
>>> 
>>> list_of_lists = [a,b]
>>> 
>>> lol = dill.loads(dill.dumps(list_of_lists))
>>> lol
[[datetime.datetime(2012, 2, 1, 0, 0), datetime.datetime(2012, 2, 2, 0, 0), 'string', 4.0], [datetime.datetime(2012, 3, 1, 0, 0), datetime.datetime(2012, 3, 4, 0, 0), 'another_string', 5.0]]
>>>
>>> default_date = datetime.datetime.today()
>>> 
>>> def analyze_data(some_id, some_date=default_date):
...     string_date = some_date.strftime('%Y%m%d')
...     filename = '{0}_{1}.p'.format(some_id, string_date)
...     return dill.loads(dill.dumps(list_of_lists))
... 
>>> # no kaboom
>>> analyze_data('123')
[[datetime.datetime(2012, 2, 1, 0, 0), datetime.datetime(2012, 2, 2, 0, 0), 'string', 4.0], [datetime.datetime(2012, 3, 1, 0, 0), datetime.datetime(2012, 3, 4, 0, 0), 'another_string', 5.0]] 
```

Dill 还提供[了一些很好的工具](https://github.com/uqfoundation/dill/blob/master/dill/detect.py)，可以帮助您了解在代码失败时导致酸洗失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:04:32.307

运行以下内容`python2.7 test.py`：

```
# encoding: utf-8
# SO 14328382
import cPickle
import datetime

default_date = datetime.datetime.now()

def analyze_data(some_id, some_date=default_date): #some_id/some_date (datetime object) defined above
    #…
    #create list_of_lists
    #…
    a = [datetime.datetime(2012, 2, 1), datetime.datetime(2012, 2, 2), 'string', 4.00]
    b = [datetime.datetime(2012, 3, 1), datetime.datetime(2012, 3, 4), 'another_string', 5.00]
    list_of_lists = [a,b]

    string_date = some_date.strftime('%Y%m%d') #works
    filename = '{0}_{1}.p'.format(some_id, string_date) #filename created fine
    cPickle.dump(list_of_lists, open(filename, 'wb')) #kaboom

analyze_data('abc', datetime.datetime(2013,3,12)) 
```

不会抛出错误，但会生成包含以下`abc_20130312.p`内容的文件：

```
(lp1
(lp2
cdatetime
datetime
p3
(S'\x07\xdc\x02\x01\x00\x00\x00\x00\x00\x00'
tRp4
ag3
(S'\x07\xdc\x02\x02\x00\x00\x00\x00\x00\x00'
tRp5
aS'string'
p6
aF4
aa(lp7
g3
(S'\x07\xdc\x03\x01\x00\x00\x00\x00\x00\x00'
tRp8
ag3
(S'\x07\xdc\x03\x04\x00\x00\x00\x00\x00\x00'
tRp9
aS'another_string'
p10
aF5
aa. 
```

所以从那里开始，慢慢地扩展它，看看你的代码在哪里中断。

# c++ - 可以使用 static_cast 避免 vtable 开销吗？

> ID：14328385
> 
> 赞同：6
> 
> 时间：2013-01-14T23:00:16.233
> 
> 标签：c++, vtable, overhead, static-cast

这是我的问题。我有一个基类和一个派生类，它覆盖了基类中的一些方法。为简单起见，请考虑以下示例：

```
struct base
{
  virtual void fn()
  {/*base definition here*/}
};

struct derived : base 
{
  void fn()
  {/*derived definition here*/}
}; 
```

在我的实际程序中，这些类作为参数传递给其他类并在其他方法中调用，但为了简单起见，让我们创建一个简单的函数，将基类或派生类作为参数。我可以简单地写

```
void call_fn(base& obj)
{obj.fn();} 
```

由于虚函数，对适当函数的调用将在**运行时解决。**

但是，我担心，如果`call_fn`要调用 , 百万次（在我的情况下，它会因为我的实际应用程序是一个模拟实验），我会得到一个我想避免的显着开销。

所以，我想知道使用 static_cast 是否真的可以解决这个问题。也许是这样的：

```
template <typename T>
void call_fn(base& obj)
{(static_cast<T*>(&obj))->fn();} 
```

在这种情况下，函数调用将作为`call_fn<base>(obj)`调用基方法或`call_fn<derived>(obj)`调用派生方法来完成。

这个解决方案会避免 vtable 开销还是会受到影响？提前感谢您的任何回复！

顺便说一句，我知道 CRTP，但不是很熟悉。这就是为什么我想先知道这个简单问题的答案:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T23:06:21.433

> 这个解决方案会避免 vtable 开销还是会受到影响？

它仍将使用动态调度（是否会导致任何明显的开销是一个完全不同的问题）。您可以通过限定函数调用来禁用动态调度，如下所示：

```
static_cast<T&>(obj).T::fn(); 
```

虽然我什至不会尝试这样做。离开动态调度，然后测试应用程序的性能，做一些分析，做进一步的分析。再次分析以确保您了解分析器告诉您的内容。只有到那时，才考虑进行一次更改并再次配置文件以验证您的假设是否正确。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T23:49:28.263

这并不是您实际问题的真正答案，但我很好奇“调用虚函数与​​调用常规类函数的真正开销是什么”。为了让它“公平”，我创建了一个 classes.cpp，它实现了一个非常简单的功能，但它是一个在“main”之外编译的单独文件。

类.h：

```
#ifndef CLASSES_H
#define CLASSES_H

class base
{
    virtual int vfunc(int x) = 0;
};

class vclass : public base
{
public:
    int vfunc(int x);
};

class nvclass
{
public:
    int nvfunc(int x);
};

nvclass *nvfactory();
vclass* vfactory();

#endif 
```

类.cpp：

```
#include "classes.h"

int vclass:: vfunc(int x)
{
    return x+1;
}

int nvclass::nvfunc(int x)
{
    return x+1;
}

nvclass *nvfactory()
{
    return new nvclass;
}

vclass* vfactory()
{
    return new vclass;
} 
```

这是从以下位置调用的：

```
#include <cstdio>
#include <cstdlib>
#include "classes.h"

#if 0
#define ASSERT(x) do { if(!(x)) { assert_fail( __FILE__, __LINE__, #x); } } while(0)
static void assert_fail(const char* file, int line, const char *cond)
{
    fprintf(stderr, "ASSERT failed at %s:%d condition: %s \n",  file, line, cond); 
    exit(1);
}
#else
#define ASSERT(x) (void)(x)
#endif

#define SIZE 10000000

static __inline__ unsigned long long rdtsc(void)
{
    unsigned hi, lo;
    __asm__ __volatile__ ("rdtsc" : "=a"(lo), "=d"(hi));
    return ( (unsigned long long)lo)|( ((unsigned long long)hi)<<32 );
}

void print_avg(const char *str, const int *diff, int size)
{
    int i;
    long sum = 0;
    for(i = 0; i < size; i++)
    {
    int t = diff[i];
    sum += t;
    }

    printf("%s average =%f clocks\n", str, (double)sum / size);
}

int diff[SIZE]; 

int main()
{
    unsigned long long a, b;
    int i;
    int sum = 0;
    int x;

    vclass *v = vfactory();
    nvclass *nv = nvfactory();

    for(i = 0; i < SIZE; i++)
    {
    a = rdtsc();

    x = 16;
    sum+=x;
    b = rdtsc();

    diff[i] = (int)(b - a);
    }

    print_avg("Emtpy", diff, SIZE);

    for(i = 0; i < SIZE; i++)
    {
    a = rdtsc();

    x = 0;
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    x = v->vfunc(x);
    ASSERT(x == 4); 
    sum+=x;
    b = rdtsc();

    diff[i] = (int)(b - a);
    }

    print_avg("Virtual", diff, SIZE);

    for(i = 0; i < SIZE; i++)
    {
    a = rdtsc();
    x = 0;
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    x = nv->nvfunc(x);
    ASSERT(x == 4);     
    sum+=x;
    b = rdtsc();
    diff[i] = (int)(b - a);
    }
    print_avg("no virtual", diff, SIZE);

    printf("sum=%d\n", sum);

    delete v;
    delete nv;

    return 0;
} 
```

代码的真正区别是：虚拟调用：

```
40066b: ff 10                   callq  *(%rax) 
```

非虚调用：

```
4006d3: e8 78 01 00 00          callq  400850 <_ZN7nvclass6nvfuncEi> 
```

结果：

```
Emtpy average =78.686081 clocks
Virtual average =144.732567 clocks
no virtual average =122.781466 clocks
sum=480000000 
```

请记住，这是每个循环 16 次调用的开销，因此调用函数和不调用函数之间的差异大约是每次迭代 5 个时钟周期[包括将结果和其他所需处理相加]，而虚拟调用每次增加 22 个时钟迭代，所以每次调用大约 1.5 个时钟。

**我怀疑你会注意到，假设你在你的函数中做了一些比 return x + 1 更有意义的事情。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:05:38.947

VTable 位于您的类中。如果您有虚拟成员，他们将通过 VTable 访问。强制转换不会影响 VTable 是否存在，也不会影响成员的访问方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T06:56:21.987

如果您有一个多态数组，其中元素是多态的，但所有元素都具有相同的类型，您还可以将 vtable 外部化。这允许您查找该函数一次，然后直接在每个元素上调用它。在这种情况下，C++ 对您没有帮助，您必须手动完成。

如果您正在对事物进行微优化，这也很有用。我相信Boost的功能使用了类似的技术。它只需要 vtable 中的两个函数（调用和释放引用），但编译器生成的一个还包含 RTTI 和其他一些东西，这可以通过手动编码一个只有这两个函数指针的 vtable 来避免。

# objective-c - NSButton 子类作为 colorwell 并防止 NSColorPanel 接触第一响应者

> ID：14328386
> 
> 赞同：1
> 
> 时间：2013-01-14T23:00:16.370
> 
> 标签：objective-c, cocoa, nsbutton, first-responder, nscolorpanel

我遵循了一些使`NSButton`子类工作的示例`NSColorWell`（因为我们的`NSButton`子类已经为我们提供了我们需要的外观行为），但是我注意到在使用按钮调用面板并更改颜色之后，它也改变了颜色我们文档中的选定文本。如果我改为`NSColorWell`使用我们的外观自定义进行子类化，它不会有这个问题吗？

但是，我仍然希望有一种解决方法可以避免这种情况，并且仍然可以让我们使用我们的按钮子类。我已经看到讨论线程建议让按钮本身成为第一响应者，但是由于按钮位于单独的调色板中，因此我无法使其正常工作。此外，我不希望更改响应者链或让调色板成为关键窗口。覆盖 setColor:的类别`NSColorPanel`会有多邪恶，使其发布预期的通知但不触及第一响应者？

（注意，我目前正在使用`BFColorPickerPopover`DrummerB [https://github.com/DrummerB/BFColorPickerPopover](https://github.com/DrummerB/BFColorPickerPopover) ，而不是简单地打开颜色面板。但是我不认为这很复杂。我有同样的`NSColorPanel`/第一个集成之前的响应者问题）。

被要求发布源代码，所以这是我的 NSButton 子类中的相关位（注意，使用上面提到的选择器弹出框而不是`NSColorPanel`直接使用）：

。H：

```
@interface ...
@property (nonatomic, strong) NSColor *color;
@property (nonatomic, assign) BOOL active;
@property (nonatomic, strong) NSColor *buttonColor;
@property (nonatomic, weak) BFColorPickerPopover *popover;
- (void)activate:(BOOL)exclusive; // param ignored, always exclusive
- (void)activate;
- (void)deactivate;
- (void)takeColorFrom:(id)sender;
@end 
```

米：

```
@implementation ...
@dynamic color;
- (NSColor *)color
{
    return self.buttonColor;
}
- (void)setColor:(NSColor *)newColor
{
    self.buttonColor = newColor;
    [self generateSwatch];
    self.needsDisplay = YES;
    self.popover.color = newColor;
}
- (void)activate:(BOOL)exclusive
{
    [self activate]; // always exclusive
}
- (void)activate
{
    self.popover = [BFColorPickerPopover sharedPopover];
    self.popover.color = self.buttonColor;
    [self.popover showRelativeToRect:self.frame ofView:self.superview
                             preferredEdge:self.preferredEdgeForPopover];
    [[NSNotificationCenter defaultCenter] addObserver:self
                        selector:@selector(popoverDidClose:)
                            name:NSPopoverDidCloseNotification
                          object:self.popover];
    [[NSNotificationCenter defaultCenter] addObserver:self
                        selector:@selector(colorDidChange:)
                            name:NSColorPanelColorDidChangeNotification
                          object:self.popover.colorPanel];
    activeButton = self;
    self.active = YES;
}
- (void)deactivate
{
    if (self.popover)
    {
        [self.popover close];
        self.popover = nil;
    }
    [[NSNotificationCenter defaultCenter] removeObserver:self
           name:NSPopoverDidCloseNotification object:self.popover];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                      name:NSColorPanelColorDidChangeNotification
                   object:self.popover.colorPanel];
    if (activeButton == self) activeButton = nil;
    self.active = NO;
}
- (void)popoverDidClose:(NSNotification *)notification
{
    self.popover = nil; // don't let deactivate ask it to close again
    [self deactivate];
}
- (void)colorDidChange:(NSNotification *)notification
{
    self.buttonColor = self.popover.colorPanel.color;
    [self generateSwatch];
    self.needsDisplay = YES;
    [self sendAction:self.action to:self.target];
}
- (void)mouseDown:(NSEvent *)theEvent
{
    if (self.isEnabled && !self.active)
        [self activate];
    else if (self.active)
        [self deactivate];
}
- (void)takeColorFrom:(id)sender
{
    if ([sender respondsToSelector:@selector(color)])
        self.color = [sender color];
}
@end 
```

**附录：**

我尝试使用普通`NSColorWell`代替我的 NSButton 子类，但同样的问题。`changeColor:`除了调用操作方法外，面板中选择的颜色还会调用第一响应者。所以忘记`NSButton`了我的问题中的所有内容，一般来说，一个人如何使用 a `NSColorWell`，其颜色也不能被推到第一响应者身上？必须求助于自定义预期的第一响应者以选择性地忽略`changeColor:`，还是让`NSColorWell`第一响应者真的是要做的事情，或者别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:15:16.207

是的，一个更好的网络搜索词（*NSColorWell “第一响应者”*），我看到其他人`NSColorWell`长期以来一直在努力解决同样的问题。许多旧的邮件列表线程已经涵盖了这一点，并看到了 3 个解决方案：

1.  [http://www.cocoabuilder.com/archive/cocoa/82832-nscolorwell-changecolor-and-first-responder.html](http://www.cocoabuilder.com/archive/cocoa/82832-nscolorwell-changecolor-and-first-responder.html) Douglas Davidson 建议对潜在的第一响应者进行子类化，以便他们忽略`changeColor:`（可能我会做什么）

2.  [http://www.cocoabuilder.com/archive/cocoa/3263-your-nscolorwell-got-in-my-nstext.html](http://www.cocoabuilder.com/archive/cocoa/3263-your-nscolorwell-got-in-my-nstext.html) Guy English 建议暂时将颜色设为第一响应者（我尝试过但因颜色而出现问题在一个我不想成为关键的小组中幸福）

3.  [http://www.cocoabuilder.com/archive/cocoa/180323-detecting-currently-active-nscolorwell.html](http://www.cocoabuilder.com/archive/cocoa/180323-detecting-currently-active-nscolorwell.html)马丁建议`changeColor:`首先通过冒充`NSColorPanel`和覆盖私有方法来阻止调用（最接近我想要的，但应用商店拒绝的风险比我想象的要大）

**更新**：我尝试了#1，但事实证明我无法覆盖第一响应者（`WebView`/ `WebHTMLView`grrr）。与＃3一起，我将以下内容放在一个`NSColorPanel`类别中，设置我的颜色按钮`panel.avoidsChangingFirstResponder=YES`，它似乎工作：

```
static char changeColorPatchAssociatedObjectKey; // address of this is used as a unique runtime value

- (BOOL)avoidsChangingFirstResponder
{
    NSNumber *changeColorPatchFlag = (NSNumber *)objc_getAssociatedObject(self, &changeColorPatchAssociatedObjectKey);
    return changeColorPatchFlag && changeColorPatchFlag.boolValue;
}

- (void)setAvoidsChangingFirstResponder:(BOOL)enablePatch
{
    NSNumber *changeColorPatchFlag = (NSNumber *)objc_getAssociatedObject(self, &changeColorPatchAssociatedObjectKey);
    if ((!changeColorPatchFlag && enablePatch) || (changeColorPatchFlag && changeColorPatchFlag.boolValue != enablePatch))
        objc_setAssociatedObject(self, &changeColorPatchAssociatedObjectKey, @( enablePatch ), OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

+ (void)load
{
    if (self == [NSColorPanel class])
    {
        // patch implementation of _forceSendAction:notification:firstResponder: (use swizzle technique from MAKVONotificationCenter.m)
        // for one that calls original but with the last BOOL parameter conditionally changed to NO
        SEL methodSel = NSSelectorFromString(@"_forceSendAction:notification:firstResponder:");
        Method method = class_getInstanceMethod(self, methodSel);
        IMP origImpl = method_getImplementation(method);
        IMP newImpl = imp_implementationWithBlock(^(void *obj, SEL s, BOOL isAct, BOOL isNotif, BOOL isFirstResp) {
            NSNumber *changeColorPatchFlag = (NSNumber *)objc_getAssociatedObject((__bridge id)(obj), &changeColorPatchAssociatedObjectKey);
            if (changeColorPatchFlag && changeColorPatchFlag.boolValue)
                isFirstResp = NO;
            ((void (*)(void *, SEL, BOOL, BOOL, BOOL))origImpl)(obj, s, isAct, isNotif, isFirstResp);
        });
        class_replaceMethod(self, methodSel, newImpl, method_getTypeEncoding(method));
    }
} 
```

我希望其他人觉得这很有用。

# asp.net - 在 Jquery 中为跨域 Web 服务格式化 JSONP

> ID：14328390
> 
> 赞同：0
> 
> 时间：2013-01-14T23:00:30.107
> 
> 标签：asp.net, jquery, jsonp

我在外部域上有网络服务，其中包含用于发送邮件的网络服务

我想使用 jquery ajax 调用跨域 web 服务，问题是我无法获得成功值，即使 web 服务已成功执行并且邮件已发送，它也会出错

我签入了萤火虫（Net Tab），在执行它时附加了？callback = [一些垃圾函数]，并且因为它没有找到该函数，所以它没有显示正确的消息。

下面是我的网络方法

```
[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)]
public string SendMail()
{
    string returnVal = string.Empty;
    try
    {
        MailMessage message = new MailMessage();
        message.From = new MailAddress("[from]");
        message.To.Add("[to]");
        message.Subject = "TEST";
        message.Body = "TEST MAIL";
        message.Priority = MailPriority.High;
        SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
        client.EnableSsl = true;
        client.Credentials = new NetworkCredential("[username]", "[password]");
        client.Send(message);
        returnVal = "[mycallback]({'status':'Success'})";
    }
    catch (System.Exception ex) { returnVal = "[mycallback]({'status':'Fail Reason: " + ex.Message + "'})"; }
    return returnVal;
} 
```

下面是我的ajax jquery调用

```
 $(document).ready(function(){
            $.ajax({
                type:"GET",
                url:"http://audiomedia.dev.asentechdev1.com/MailSender.asmx/SendMail",
                dataType:"jsonp",
                jsonpCallback: 'mycallback',
                success: function(data){
                    alert(json.Parse(data));
                },
                error: function (data) {
                    alert("Error: " + data.responseText);
                }   
            });
            function mycallback(data){
                alert("CallBack: " + JSON.stringify(data));
            }
        }); 
```

通过更改返回值并添加回调，我得到了来自服务器的回复， ![在此处输入图像描述](../Images/466a2ce89c376362483a8043592663ca.png) 但即使在成功发送邮件之后，它仍然会进入错误回调。谁能告诉我如何格式化成功消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:03:51.723

您需要将响应数据包装在同名的函数中`SomeJunkFunction`。例如...

```
SomeJunkFunction() {return {"SomeProperty":"SomeValue"}}; 
```

至于为什么需要这个...

同源策略防止跨域查询返回数据。要解决此问题，您可以模拟包含一个外部 javascript 文件。模拟的 JS 文件有一个返回数据的函数。浏览器假定该函数是静态且合法的，因此允许它运行。

为了让客户端知道“静态”js 中提供的函数的名称，它会在调用中传递它，例如`SomeJunkFunction`并相信您创建的新函数将以这种方式命名。

有关更多信息和一些示例代码，请参阅[此页面](http://www.onlinesolutionsdevelopment.com/blog/web-development/javascript/jsonp-example/)。

**编辑**：为了澄清，您不会`SomeJunkFunction`在页面本身上创建，它需要包含在服务器的响应中。它没有参数。您的服务器不返回数据，它返回一个函数，该函数在调用时返回数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:06:26.957

您收到错误状态是因为您没有返回正确的 JSONP。为了完成一个跨域 JSONP 请求，您必须返回包装在 jQuery 生成的回调函数中的请求。如果 jQuery 没有收到包含在此函数中的响应，则永远不会触发成功回调。

改变

```
 return returnVal; 
```

至

```
 return "[callback]({status: [returnVal]})"; 
```

# uiview - “UIView”没有可见的@interface 声明选择器“imageRef”

> ID：14328391
> 
> 赞同：1
> 
> 时间：2013-01-14T23:00:33.900
> 
> 标签：uiview, cgimageref

我正在编写一个相机应用程序（类似于本机相机应用程序），以便在触摸快照按钮时，我想在视图重置并准备好拍摄另一张照片之前快速抓取图片（来自隐藏的 imageView）。下面是一段代码，我的问题是：CGImageRef img = (CGImageRef)[view imageRef]。它给了我一个错误：“UIView”没有可见的@interface 声明选择器“imageRef”。我该如何解决这个错误？

```
- (BOOL)TakePictureFromImageView:(UIView*)view {
    CGImageRef img = (CGImageRef)[view imageRef];
    if (img)
    {
        UIImage *photo = [self correctImageOrientation:img];
        UIImageWriteToSavedPhotosAlbum(thePhoto, nil, nil, nil);    
        return YES;
    }
    return NO;
} 
```

# android - Android编程（如何在textview中显示字符串）

> ID：14328392
> 
> 赞同：0
> 
> 时间：2013-01-14T23:00:40.590
> 
> 标签：android, android-activity

大家好。我正在开发一个扫描设备系统信息的应用程序，我想知道是否可以添加两个字符串：

*   `String manufacturer = Build.MANUFACTURER;`
*   `String model = Build.MODEL;`

到我的`MainActivity`并以某种方式将它们显示在屏幕上。这是我的`MainActivity`：

```
package com.shadycorp.diji.clock

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:07:21.927

第一步，在您的 onCreate 方法中，获取对 TextView 组件的引用（使用 XML 中的资源名称），然后您可以直接在其上设置文本（此代码示例中的最后 2 行显示您需要做什么）。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView tv = (TextView) findViewById(R.id.some_textview_resource_name);
    tv.setText("Text is: " + Build.MANUFACTURER + Build.MODEL);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:08:57.057

在您的布局中`activity_main`添加两个`TextView`具有指定 ID 的 s：

```
<TextView
    android:id="@+id/manufacturer"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left" />
<TextView
    android:id="@+id/model"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="left" /> 
```

然后，在您的`onCreate()`方法中，在扩展布局后，`TextView`使用分配的 ID 找到这些 s：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
TextView manufacturerTextView = (TextView)findViewById(R.id.manufacturer);
TextView modelTextView = (TextView)findViewById(R.id.model);
// Now you can set TextView's text using setText() method:
manufacturerTextView.setText(Build.MANUFACTURER);
modelTextView.setText(Build.MODEL); 
```

就这样！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:02:46.623

```
textView.setText("Manufacturer " + manufacturer  + "Model" +model); 
```

# sql - 从 SQL 中分割结果时出错

> ID：14328394
> 
> 赞同：2
> 
> 时间：2013-01-14T23:00:46.840
> 
> 标签：sql, razor, webmatrix

我对一个我不理解的 SQL 查询有疑问：我正在使用带有剃刀语法的 WebMatrix。我想查询我的股票表，并以百分比的形式查找我的主要推动者中有多少股票。

在代码块中，我有：

```
var topmovers = db.QueryValue("select COUNT(STOCKCODE) from dbo.STOCK_ITEMS where STOCK_CLASSIFICATION = 170") ?? 0;   

var instock = db.QueryValue("select COUNT(STOCKCODE) from dbo.STOCK_ITEMS where STOCK_CLASSIFICATION = 170 and TOTALSTOCK > 0") ?? 0;   

var ofpc = instock/topmovers;` 
```

然后在身体里，我有

```
@ofpc.ToString("P2") 
```

它返回 0 或 100，具体取决于我使用变量`instock`和`topmovers`. 我想要一个百分比，而不是 100% 或 0%！

如果我去，`@instock.ToString();`我会得到 862

如果我去，`@topmovers.ToString();`我会得到 965

根据我的数学，862/965 是 0.8932 (89.32%)

`ofpc`但是，当我输出它时，我得到了 0.00%`@ofpc.ToString("P2")`

我显然在某个地方错了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:05:48.410

同样的问题发生在 SQL Server 中，它执行整数除法，所以：

```
select 1/2 
```

总是返回 0。

因此，您需要将其中一个值转换为浮点数。你能用这个表达吗：

```
var ofpc = cast(instock as float)/topmovers; 
```

或者类似的东西？也许：

```
var ofpc = (instock*1.0)/topmovers 
```

您还可以使数据库返回一个浮点值：

```
var topmovers = db.QueryValue("select cast(COUNT(STOCKCODE) as float) from dbo.STOCK_ITEMS where STOCK_CLASSIFICATION = 170") ?? 0;` 
```

我所做的是将第一个计数转换为 SQL 中的浮点数。毫无疑问，您可以在应用程序级别执行此操作，但我更熟悉 SQL。这应该使`topmovers`变量成为浮点数，并且除法将是浮点除法。

# ios - Phonegap - 第一个应用程序

> ID：14328395
> 
> 赞同：2
> 
> 时间：2013-01-14T23:00:48.670
> 
> 标签：ios, xcode, cordova

我正在使用 Phonegap for iOS 构建我的第一个应用程序。我正在尝试获取加速度计值并将其显示为屏幕上的警报。我有最新版本的cordova-2.3.0。这是 index.html 文件的代码 -

```
<!DOCTYPE html>
<html>
    <head>
        <title>PhoneGap Device Ready Example</title>
        <script type=”text/javascript” charset=”utf-8” src=”cordova-2.3.0.js”&gt;</script>
        <script type=”text/javascript” charset=”utf-8”&gt;
            document.addEventListener(“deviceready”, onDeviceReady, false);

            function onDeviceReady() {
                navigator.accelerometer.getCurrentAcceleration(onSuccess, onError);
            }

            // onSuccess: Get a snapshot of the current acceleration
            //
            function onSuccess(acceleration) {
                alert('Acceleration X: ' + acceleration.x + '\n' +
                      'Acceleration Y: ' + acceleration.y + '\n' +
                      'Acceleration Z: ' + acceleration.z + '\n' +
                      'Timestamp: '      + acceleration.timestamp + '\n');
            }

            // onError: Failed to get the acceleration
            //
            function onError() {
                alert('onError!');
            }
            </script>
    </head>
    <body>
        <h1> Example </h1>
        <p>getCurrentAcceleration </p>
    </body
</html> 
```

然而，什么也没有发生。我得到一个白屏，上面写着 Example 和 getCurrentAcceleration。

有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:06:09.910

1.  我不知道是不是你的问题，但你的身体末尾缺少结束标签，它看起来像 `</body.`

2.  确保在 config.xml 文件中有这一行：

    `<plugin name="Accelerometer" value="CDVAccelerometer" />`

3.  是否还有其他 phonegap 功能，例如 navigator.notification.alert 运作良好？也许您的项目设置不正确？

4.  确保 cordova-2.3.0.js 适用于 iOS 版本一。

# macros - Racket - 将特殊变量注入宏代码

> ID：14328396
> 
> 赞同：3
> 
> 时间：2013-01-14T23:00:49.803
> 
> 标签：macros, racket

我想将特殊变量注入宏以进行编译时绑定。

因此，例如，以下形式：

```
(define-route (my/route)
  (some-proc @@request)
  (some-other-proc @@request)) 
```

应扩展为：

```
(some-code)
...
(lambda (request)
  ...
  (some-proc request)
  (some-other-proc request)) 
```

其中 request 绑定到生成代码中的请求，在调用者指定的所有位置。

我不知道如何最好地去做。这是球拍宏提供执行能力的更常见模式，还是我必须手动执行？

如果是这样，我是否应该递归循环遍历主体模式，寻找任何匹配 '@@request 的符号然后替换它们？我注意到 syntax->list 不是以这种方式递归的，即

```
(syntax->list #'(printf "first: ~a\" (get-var (other-proc))) 
```

是 3 个语法对象而不是 4 个，第三个 syntax-obj 是 2 个以上。所以我假设我需要在这里手动重复，但也许有更好的方法来做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:26:58.453

也许使用[syntax-parameterize](http://docs.racket-lang.org/reference/stxparam.html)（及其变体[splicing-syntax-parameterize](http://docs.racket-lang.org/reference/splicing.html#%28form._%28%28lib._racket/splicing..rkt%29._splicing-syntax-parameterize%29%29)）应该可以解决问题？当您想要拥有类似关键字的东西并且宏需要根据上下文重新连接关键字的含义时，它是一个标准工具。

这是它的样子：

```
#lang racket/base

(require racket/stxparam
         racket/splicing
         (for-syntax syntax/parse racket/base))

(define-syntax-parameter @@request
  (lambda (stx)
    (raise-syntax-error #f "Use outside of a define-route" stx)))

(define-syntax (define-route stx)
  (syntax-parse stx 
    [(_ (name:id) body:expr ...)
     (syntax/loc stx
       (begin
         (printf "blah blah blah\n")

         (define name
           (lambda (request)
             (splicing-syntax-parameterize ([@@request
                                             (make-rename-transformer #'request)])
               body ...)))))]))

;; example
(define (f r)
  (printf "f sees: ~s\n" r))

(define-route (my/route)
  (f @@request))

(my/route 42) 
```

语法参数化重新连接`@@request`a 的词汇上下文中的使用，`define-route`以便它引用回`request`由`lambda`. 如果在 a 的上下文之外使用`define-route`，它将尝试引发合理的错误消息。

（您*可以*按照您最初计划的方式执行此操作，以递归方式遍历语法对象的结构并挑选出`@@request`元素。这只是比您需要做的工作更多，除非需求真的不寻常。）

# sql - SQL Server 在 nvarchar 字符串中选择 unicode 空字符

> ID：14328401
> 
> 赞同：0
> 
> 时间：2013-01-14T23:01:22.163
> 
> 标签：sql, sql-server, unicode, null

我有已导入我们的 SQL Server 2008 数据库（使用排序规则）的内容，这些内容在列`SQL_Latin1_General_CP1_CI_AS`中被 UNICODE NULLS 污染。`nvarchar(128)`

其影响是当我们的 java 库尝试导出 PDF 报告中的内容和其他此类操作时，它会炸毁我们的 Java 库。

我正在尝试查找和修改各种表和列中的值。我们的一些员工告诉我，违规值看起来像`'u s e r n a m e'`而不是`'username'`.

在试图找到这些有问题的 UNICODE NULLS 时，我运行了以下 SQL：

```
SELECT name 
FROM users
WHERE name LIKE '%[^ -~]%' COLLATE Latin1_General_BIN 
```

返回的是以下集合：

```
M
M
M
N
S
S
S
S
ÿþA 
```

我认为这些单字母值可能后跟 UNICODE NULLS，但我不确定。最后一个看起来也很可疑。

是否有某种使用方法`CONVERT`和十六进制值——0x00 来定位字符串中的 UNICODE NULLS `nvarchar`？

编辑＃1：

```
select name, CAST(RIGHT(name,1) AS varbinary(128)) AS RIGHTER_1,
from users
where id=1

returns:

B   0x4200 
```

所以，那个字母“B”有点好笑。这里确实有 UNICODE NULLS，并且这些库的架构不是为了处理 UNICODE。它们使用 LATIN UTF8 字符坚如磐石。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T19:40:21.583

尝试使用 varbinary 转换查找空 unicode 字符序列可能会导致误报，例如 UTF16 LE 中的以下 unicode：

```
20 00 00 A0 
```

该字符串是一个空格，后跟一个 Unicode 字符 A0。两者都是有效的非空字符。但是，如果您这样做：

```
where charindex (0x0000, cast(UnicodeText as varbinary (max))) > 0 
```

您会在空格结尾和下一个字符的开头之间得到误报。

这是我写的一个函数。请注意，它在处理大文本时表现不佳，我正在努力改进。可能 CLR proc 会更好地工作。尝试这个：

```
 create function dbo.FindNullUnicode
(
    @Input nvarchar(max)
    ,@StartPosition bigint = 1
)
returns bigint
as
begin
    if @StartPosition < 1
        set @StartPosition = 1;

    declare @pos bigint = @StartPosition;
    declare @len bigint = len(@Input);
    declare @singlechar nchar(1);

    while (@pos <= @len)
    begin
        if unicode(SUBSTRING(@input,@pos,1)) = 0 
            return @pos;

        set @pos +=1;
    end;
    return 0;
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T19:55:15.263

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T09:00:32.930

您可以使用`CAST(name AS varbinary(128))`将值查看为十六进制并检查它。

您可以使用 condition 找到“空字符” `name LIKE '%'+CHAR(0)+'%'`，但是，有效的 unicode 字符串也可能包含零，因此这可能不是您需要做的。

您确定问题不在您的库或 PDF 生成器中吗？看起来您在数据库中有 unicode 字符串，但应用程序将它们解释为 ASCII 字符串。

# android - 对于 DOM 解析器，应该认为多大的 xml 文件太大？

> ID：14328405
> 
> 赞同：3
> 
> 时间：2013-01-14T23:01:30.913
> 
> 标签：android, ios, xml, dom, sax

我一直在为 iOS 和 Android 开发一个相当简单的应用程序，它解析本地 xml 以形成项目列表并显示有关它们的信息。在查看我的解析选项时，我选择了适用于 android 的本机 SAX 解析器，以及内置于 Objective-C 的 NSXMLparser 类。在查看我的选项时，我反复看到有人说 DOM 解析器不适合大型 xml 文件。然而，没有人确切地定义过“大”的含义。在应用程序的更高版本中，我正在考虑切换到 DOM 解析器。

我的问题是：您在哪里划清界限，并消除 DOM 解析器作为选项？有问题的平台是 iOS 和 Android，当然，这两个平台仍然有许多旧设备。那么，假设一个比平均速度慢的设备，线在哪里绘制？

谢谢您的考虑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T23:11:05.183

DOM 解析器必须将整个 XML 加载到内存中。此外，与原始 XML 的大小相比，解析后的 XML 占用的内存通常是 5 到 10 倍。

如果您知道您的应用程序允许的内存消耗是 N 兆字节的 RAM，那么您可以自己画这条线：将 N 除以 10。

例如，如果您不想超过 10MB 的 RAM，那么您的 XML 不应超过 1MB。

只有最新的设备有 1GB 的 RAM（在所有应用程序中分配），旧设备有 512MB 甚至 256MB。256MB/10 = 25MB。您可能不想占用所有内存的 10% 以上，因此对于所有平台支持的 DOM XML，超过 2.5MB 的内存就太多了。

但是，这只是经验法则，只有现实生活中的测试才能告诉你真相。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:49:27.820

什么太大了？这是您拥有多少工作记忆的函数，这会因设备而异。在 iPhone 上，在 3GS 上，你只有 256MB，iPhone 4 有 512MB，iPhone 5 有 1GB。

顺便说一句，while`NSXMLParser`是一个 SAX 解析器，如果您使用`initWithContentsOfURL`，它会在解析开始之前将整个提要加载到内存中。因此，您会遭受类似 DOM 的大量内存消耗，但会使用繁琐的类似 SAX 的接口。因此，如果您查看 Apple 的[PerformanceXML 示例](https://developer.apple.com/library/ios/#samplecode/XMLPerformance/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008094)，当他们说明一个占用空间小的流式 SAX 解析器时，他们会退回到`LibXML2`流式传输很好的示例。使用 时`NSXMLParser`，我还通过将 my 包装`NSURLConnection`在 a 中来实现类似的效果`NSInputStream`，因此我可以使用 SAX 解析器启用的小内存占用来调用`initWithStream`和享受。`NSXMLParser`

简而言之，在解析非常大的 XML 文件时，请确保您的 SAX 解析器不会仍然过度消耗内存，而是`LibXML2`使用`NSXMLParser`.`NSInputStream`

对我来说，这完全是任意的，如果 XML 超过 1MB，我将使用流式 SAX 解析器`LibXML2`。如果它那么大，我不会使用 DOM 解析器，也不会使用`NSXMLParser`.

另请参阅 Ray Wenderlich 的[如何为您的 iPhone 项目选择最佳 XML 解析器](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)

# python - 将 Python 代码转换为符合 PEP8 的工具

> ID：14328406
> 
> 赞同：127
> 
> 时间：2013-01-14T23:01:31.727
> 
> 标签：python, coding-style, pep8

我知道有一些工具可以验证你的 Python 代码是否符合 PEP8，例如有[一个在线服务](http://pep8online.com/)和[一个 python 模块](https://github.com/jcrocholl/pep8/)。

但是，我找不到可以*将*我的 Python 文件转换为独立的 PEP8 有效 Python 文件的服务或模块。有谁知道有没有？
*我认为这是可行的，因为 PEP8 就是关于代码的外观，对吧？*

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2013-01-14T23:09:23.140

您可以使用[autopep8](http://pypi.python.org/pypi/autopep8)！*当您为自己煮一杯咖啡时，此工具会愉快地删除所有那些不改变代码含义*的讨厌的 PEP8 违规行为。

通过 pip 安装它：

```
pip install autopep8 
```

将此应用于特定文件：

```
autopep8 py_file --in-place 
```

或者对于您的项目（递归），*详细选项会为您提供一些有关其进展情况的反馈*：

```
autopep8 project_dir --recursive --in-place --pep8-passes 2000 --verbose 
```

*注意：有时默认的 100 次通过是不够的，我将其设置为 2000，因为它相当高，并且会捕获除最麻烦的文件之外的所有文件（一旦发现没有可解决的 pep8 违规，它就会停止通过）...*

### 在这一点上，我建议重新测试并进行提交！

如果你想要*“完全”*符合 PEP8：我使用的一种策略是运行上面的 autopep8，然后运行 ​​PEP8，它会打印剩余的违规（文件、行号和内容）：

```
pep8 project_dir --ignore=E501 
```

并手动单独更改这些（例如 E712s - 与布尔值比较）。

*注意：autopep8 提供了一个`--aggressive`参数（无情地“修复”这些改变含义的违规行为），但要注意，如果你确实使用积极的，你可能必须调试......（例如在 numpy/pandas`True == np.bool_(True)`但不是`True is np.bool_(True)`！）*

### 您可以检查每种类型的违规次数（之前和之后）：

```
pep8 --quiet --statistics . 
```

注意：我认为 E501（行太长）是一种特殊情况，因为您的代码中可能会有很多这样的情况，有时 autopep8 不会更正这些情况。

*例如，我[将这种](https://github.com/pydata/pandas/pull/2632)技术应用于[pandas](http://pandas.pydata.org/)代码库。*

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-03-26T08:38:10.257

不幸的是，“pep8 风暴”（整个项目）有几个负面影响：

*   很多合并冲突
*   打破 git 责备
*   使代码审查变得困难

作为替代方案（感谢[@yp 的想法](https://github.com/pydata/pandas/issues/6248)），我编写了一个小包，其中 autopep8s 仅包含自上次提交/分支以来您一直在处理的那些行：

### *基本上离开项目* [比你发现它好一点](https://github.com/hayd/pep8radius)：

```
pip install pep8radius 
```

假设您已完成工作`master`并准备提交：

```
# be somewhere in your project directory
# see the diff with pep, see the changes you've made since master
pep8radius master --diff
# make those changes
pep8radius master --diff --in-place 
```

或者清除自上次提交以来提交的新行：

```
pep8radius --diff
pep8radius --diff --in-place

# the lines which changed since a specific commit `git diff 98f51f`
pep8radius 98f51f --diff 
```

*基本上[`pep8radius`](https://github.com/hayd/pep8radius)是将 autopep8 应用于 git/hg diff 输出中的行（来自[最后一个共享提交](https://stackoverflow.com/questions/23975995/git-diff-branch-against-working-tree-not-including-merges)）。*

此脚本目前适用于 git 和 hg，如果您使用其他东西并希望它工作，[请发表评论/问题/公关](https://github.com/hayd/btyfi/issues/5)！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-26T14:11:24.607

@Andy Hayden 很好地概述了 autopep8。除此之外，还有一个名为[pep8ify](https://pypi.python.org/pypi/pep8ify)的包也可以做同样的事情。

但是，这两个包都只能删除 lint 错误，但不能格式化代码。

```
little = more[3:   5] 
```

上面的代码在 pep8ifying 之后也保持不变。但是代码看起来还不是很好。您可以使用 yapf 之类的格式化程序，即使代码符合[PEP8 ，它也会格式化代码。](https://pypi.python.org/pypi/yapf)上面的代码将被格式化为

```
little = more[3:5] 
```

有时这甚至会破坏您的手动格式化。例如

```
BAZ = {
    [1, 2, 3, 4],
    [5, 6, 7, 8],
    [9, 10, 11, 12]
} 
```

将转换为

```
BAZ = {[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12]} 
```

但是您可以告诉它忽略某些部分。

```
BAZ = {
   [1, 2, 3, 4],
   [5, 6, 7, 8],
   [9, 10, 11, 12]
}  # yapf: disable 
```

摘自我的旧博文：[自动 PEP8 并格式化您的 Python 代码！](http://www.avilpage.com/2015/05/automatically-pep8-your-python-code.html)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-02-04T08:03:49.630

我对 python 和代码风格的不同工具进行了广泛的研究。有两种类型的工具：linter - 分析您的代码并就错误使用的代码样式给出一些警告并显示如何修复它的建议，以及代码格式化程序 - 当您保存文件时，它会使用 PEP 样式重新格式化您的文档。

因为重新格式化必须更准确——如果它重新格式化你不希望它变得无用的东西——它们涵盖的 PEP 部分更少，而 linter 显示更多。

它们都具有不同的配置权限 - 例如，pylinter 可在其所有规则中配置（您可以打开/关闭每种类型的警告），黑色根本无法配置。

以下是一些有用的链接和教程：

**文档：**

*   PEP-257 文档字符串约定： [https ://www.python.org/dev/peps/pep-0257/](https://www.python.org/dev/peps/pep-0257/)
*   PEP-484 类型提示：[https ://www.python.org/dev/peps/pep-0484](https://www.python.org/dev/peps/pep-0484)
*   Chromium 风格指南 [https://chromium.googlesource.com/chromiumos/docs/+/master/styleguide/python.md](https://chromium.googlesource.com/chromiumos/docs/+/master/styleguide/python.md)
*   自动测试的代码样式 [https://chromium.googlesource.com/chromiumos/third_party/autotest/+/master/docs/coding-style.md](https://chromium.googlesource.com/chromiumos/third_party/autotest/+/master/docs/coding-style.md)
*   可汗学院编码风格指南 [https://github.com/Khan/style-guides/blob/master/style/python.md](https://github.com/Khan/style-guides/blob/master/style/python.md)
*   Python 搭便车指南[https://docs.python-guide.org/](https://docs.python-guide.org/)
*   EdX Python 风格指南 [https://edx.readthedocs.io/projects/edx-developer-guide/en/latest/style_guides/python-guidelines.html](https://edx.readthedocs.io/projects/edx-developer-guide/en/latest/style_guides/python-guidelines.html)
*   关于 RealPython 的代码风格文章[https://realpython.com/python-pep8/](https://realpython.com/python-pep8/)

**短绒**（按受欢迎程度排序）：

*   mypy [https://github.com/python/mypy](https://github.com/python/mypy) linter用于类型检查 (PEP-484)
*   pycodestyle [https://github.com/PyCQA/pycodestyle](https://github.com/PyCQA/pycodestyle) - 使用 PEP-8 的好方法，非常受欢迎。通常与 pylint 和 flake8 一起使用（同时）
*   pylint [https://github.com/PyCQA/pylint](https://github.com/PyCQA/pylint)非常可配置，积极支持
*   强盗[https://github.com/PyCQA/bandit](https://github.com/PyCQA/bandit)安全检查
*   探矿者[https://github.com/PyCQA/prospector](https://github.com/PyCQA/prospector) pylint+代码难度检查
*   flake8 [https://github.com/PyCQA/flake8](https://github.com/PyCQA/flake8) pycodestyle 包装器，能够打开插件。非常大的不同可配置插件列表。这是很棒的 flake8 存储库： [https ://github.com/DmytroLitvinov/awesome-flake8-extensions](https://github.com/DmytroLitvinov/awesome-flake8-extensions)
*   wemake [https://github.com/wemake-services/wemake-python-styleguide](https://github.com/wemake-services/wemake-python-styleguide) - 尝试在一个项目中组合许多不同的 linter（实际上它是一个 flake8 插件，结合了其他几个 linter 的样式）
*   pylama [https://github.com/klen/pylama](https://github.com/klen/pylama)试图将另外 10 个 linters 合二为一（mypy、pylint、pycodestyle、pydocstyle 等）。我可以在这里看到唯一的一个问题 - 旧版本（github repo 大约 10 个月没有更新。）
*   pydocstyle [https://github.com/PyCQA/pydocstyle](https://github.com/PyCQA/pydocstyle)文档字符串 linter (PEP-257)

**代码格式化程序（按受欢迎程度排序）：**

*   黑色 [https://github.com/psf/black](https://github.com/psf/black)最流行的格式化程序，在几家大公司中使用。比 yapf 创建的晚，但在 GitHub 上已经有了更多的开始
*   yapf [https://github.com/google/yapf](https://github.com/google/yapf)谷歌代码格式化程序
*   autopep8 [https://github.com/hhatto/autopep8](https://github.com/hhatto/autopep8)基于 pycodestyle

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-04-05T10:24:26.687

如果您使用的是 eclipse + PyDev，您可以简单地从 PyDev 的设置中激活 autopep8：Windows -> Preferences -> 在搜索过滤器中输入“autopep8”。

检查“使用 autopep8.py 进行代码格式化？” -> 好的

现在 eclipse 的 CTRL-SHIFT-F 代码格式化应该使用 autopep8 格式化你的代码:)

![截屏](../Images/e18d3804b7e121b3b3604d223128671d.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-21T11:11:28.597

有许多。

IDE 通常内置一些格式化功能。IntelliJ Idea / PyCharm 有，Eclipse 的 Python 插件也是如此，等等。

有可以针对多种语言的格式化程序/linter。[https://coala.io](https://coala.io)就是一个很好的例子。

然后是单一用途的工具，其中许多在其他答案中提到。

一种自动重新格式化的特定方法是将文件解析为 AST 树（不删除注释），然后将其转储回文本（意味着不保留任何原始格式）。例如[https://github.com/python/black](https://github.com/python/black)。

# delphi - 在 TOleContainer 中嵌入多个 MS Word 实例

> ID：14328411
> 
> 赞同：7
> 
> 时间：2013-01-14T23:01:51.520
> 
> 标签：delphi, ms-word, toolbar, ole

这让我很头疼...

我正在开发的 delphi 应用程序在 TOLEContainer 中使用 Word 打开一个或多个表单。我遇到的问题是，当使用 Word 的嵌入实例打开多个表单时，一个实例的控件会影响所有其他实例，而第一个实例上的控件不可用。

例如，第一个 TOleContainer 的控件仍然可见并且似乎已启用但不起作用，在第一个实例中选择文本并在第二个实例中使用控件会导致更改反映在第一个实例中（清除为泥？！？）一切都非常混乱，所以我附上了一张照片：

![OleControls 工具栏控制 word 的两个实例](../Images/7a1c78677f0201f68f87a85802b36cd9.png)

目的是将每个单词实例嵌入到它自己的形式中并利用它自己的控件。那么是什么导致了我不受欢迎的行为，我能做些什么呢？我确信这很简单，比如捕捉 OleContainer 的“激活”属性和设置（我不知道要设置什么），但我没有运气。

我认为一种替代方法可能是创建我自己的 TWordApplication 实例，并通过 Windows.SetParent() 重新父级（这确实有效，顺便说一句，每个实例都可以控制自己，但需要对应用程序进行大量返工）或嵌入一个 OleContainer ......我可以嵌入 TWordApplication 实例他们自己的 OleContainers 吗？如果是这样怎么办？或者更改 CreateObjectFromFile 的默认打开行为（但我认为这是由 Word 的 COM 服务器控制的）...

供参考....通过实例化几个表单来测试以下内容...

```
// This embed into an OleContainer, but opening two forms 
// leaves me with one that has working controls and another 
// that has non-working controls (this code on it's own form)
// If this code is on TForm2 and you create two instances of TForm2
// Word behaves incorrectly
OleContainer1.CreateObjectFromFile('C:\Test.docx', false);
OleContainer1.AutoActivate := aaGetFocus;
OleContainer1.DoVerb(ovOpen);

OleContainer1.Run;

//  To embed Word on a TPanel (this code on it's own form)
//  This code on TForm3, create two instance of TForm3 to see 
//  word work independently as desired
wordApp := TWordApplication.Create(Self);
wordApp.ConnectKind := TConnectKind.ckNewInstance;
wordApp.Caption := IntToStr(AppId);
wordApp.Visible := True;

WordHandle := FindWindow('OpusApp', PWideChar(wordApp.Caption));

Windows.SetParent(WordHandle, Panel1.Handle);

if AppId = 1 then
begin
  lFilename := 'C:\Test.docx';
end else begin
  lFilename := 'C:\Test2.docx';
end;
wordApp.Documents.Open(lFileName, EmptyParam, EmptyParam,EmptyParam,EmptyParam,EmptyParam,EmptyParam,EmptyParam,EmptyParam,EmptyParam,EmptyParam,EmptyParam); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T08:50:50.107

您可以尝试使用 IOleInPlaceActiveObject 并在表单激活和停用时激活和停用。请参阅我的问题的已接受答案：[上下文菜单随着 Word 自动化而消失](https://stackoverflow.com/questions/2949817/context-menu-disappears-with-word-automation)

# string - 使用 bash 有条件地打印

> ID：14328412
> 
> 赞同：0
> 
> 时间：2013-01-14T23:01:53.240
> 
> 标签：string, bash, shell, scripting

我正在尝试处理大量文本文件。这些文本文件包含以下两个连续行之一：

“_atom_site_fract_z”后跟“#END”

或者

"_atom_site_fract_z" 后跟字符串，例如 "C1 C 0.46450 0.18880 0.92540"

我想使用 bash/sed 仅保留后一种类型的文件（没有“_atom_site_fract_z”后跟“#END”的文件）。

我如何实现这一目标？

注意：两个字符串由 NEWLINE 分隔。它们没有被空格隔开。

更新：文件名存储在一个文本文件中，我想逐行读取文本文件，以检查是否应该保留该文件。我不一定要删除它们，但想将稍后键入的文件保存在目录中的单独文件夹中。

UPDATE2：除了这两行之外，还有“其他行”。我想搜索具有两行特定组合的文件。所有文件都有“_atom_site_frac_z”和“#END”，但它们不会一个接一个地出现。但是，“_atom_site_frac_z”总是出现在“#END”之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:08:40.880

您说您只想保留后一种类型的*文件*。`sed`可能对处理行很有用，但对于你可能想要的整个`grep`文件`find`。

```
find "$dir" -type f -exec grep -qF '_atom_site_fract_z#END' {} \; -print # get a list of the files to delete.
find "$dir" -type f -exec grep -qF '_atom_site_fract_z#END' {} \; -delete # actually delete them 
```

**更新**

如果您的文件来自*换行符分隔的*文本文件中的列表，那么您可以像这样处理它们：

```
while read filename; do
    awk '!/#END/{
        checkNext=0;
    } /_atom_site_fract_z/{
        checkNext=1;
        next;
    } /#END/{
        if (checkNext) {
            print(FILENAME);
            exit(0);
        }
    }' "$filename"
done < list_of_files.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:46:22.273

如果以上方法在这里不起作用，这是我的解决方案。没有经过严格测试，只是为了让您知道。

```
#!/bin/bash
while read filename; do
   CHECK=""
   CHECK=$(awk 'BEGIN{FS="\n";RS=""} $1~/_atom_site_fract_z/ && $2~/#END/' $filename)
   if [ -z "$CHECK" ]; then
      echo $filename > new_files.txt
   fi
done < files.txt 
```

# java - 无法在 Java 中接收键盘输入

> ID：14328416
> 
> 赞同：0
> 
> 时间：2013-01-14T23:02:17.933
> 
> 标签：java, swing, jframe, keylistener, keyevent

我正在尝试获得一些基本的键盘输入功能，例如箭头键。但是，我尝试的任何方法似乎都不起作用，我一直在使用 KeyListener 接口，检查输入的 JPanel 获得焦点，并且似乎没有错误。

```
 public class PlayField extends JPanel implements KeyListener
    {
        private SpelModel mijnmodel;
        private boolean rechts = false;
        private boolean links = false;

        public PlayField(SpelModel mijnmodelArg)
        {
            setBackground(Color.WHITE); 
            mijnmodel = mijnmodelArg;
            this.setFocusable(true);
        }

        @Override
        public void paintComponent(Graphics g)
        {
            super.paintComponent(g); //some methods that i've taken out of the example
            drawStones(g,mijnmodel.getStenen());
            drawPeddle(g,mijnmodel.getBat());
            drawBall(g,mijnmodel.getBall()); 
        }
        @Override
        public void keyPressed(KeyEvent e){
            System.out.println("Key Pressed!!!");           
    }

    //Called when the key is released   
        @Override
    public void keyReleased(KeyEvent e){
        System.out.println("Key Released!!!");          
        }

        //Called when a key is typed
        @Override
        public void keyTyped(KeyEvent e){}
        } 
```

问题可能是我正在使用多个类来创建一个窗口（第一个 JFrame，然后是一个包含 2 个 JPanel 的 JPanel，其上是“PlayField”类）​​并且无法在另一个面板中实现焦点？最好的行动方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T23:05:55.220

问题：

*   您有一个实现 KeyListener 的类，但我没有看到您将 KeyListener 添加到任何组件。实现接口是不够的，而是必须将 KeyListener 添加到组件中才能进行侦听。
*   如果您使用 KeyListeners，则必须注意焦点问题（如您所述）。KeyListener 仅在被侦听的组件具有焦点时才有效。
*   Swing 应用程序应避免使用 KeyListener，最好使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。对该网站的简短搜索将向您展示有关此问题的许多讨论，因为这个问题已被多次询问和回答*，*我不止几次。
*   例如：[java-keylistener-not-registering-arrow-keys](https://stackoverflow.com/a/8961998/522444)

# c++ - 在 C++ 可变参数模板中传递可变参数

> ID：14328419
> 
> 赞同：0
> 
> 时间：2013-01-14T23:02:26.620
> 
> 标签：c++, templates, variadic

假设我有一个模板函数，它接受可变参数并使用这些参数调用其他函数......

```
template<typename... A> func(int i, A... args)
{
  // do something common

  switch (i)
  {
    case 0: x(args...); break;
    case 1: y(args...); break;
    case 2: z(args...); break;

    default: break; 
  }

  // do something common
} 
```

...而其他功能被定义为...

```
void x(int a, int b);
void y(int a, int b);  // note: takes same args as x()
void z(std::string a); 
```

这不会编译，因为使用 std::string 参数调用 func() 将找不到与带有 std::string 参数的 x() 和 y() 的匹配项。

请注意， func() 使用一些外部标准（本示例中的参数 i 的值）来决定将参数 args 传递给哪个其他函数。

有没有办法在不诉诸于将参数 args 填充到 std:tuple 中并传递它的情况下实现这一目标？

[编辑]

好的，我想出了一种对我的目的来说足够好的方法。这是一个示例类来说明...

```
class X
{
  private:

    bool a(int) { return true; }
    bool b(int) { return true; }

    template<typename... A> bool a(const A&...) { return false; }
    template<typename... A> bool b(const A&...) { return false; }

  public:

    template<typename... A> void x(int i, const A&... args)
    {
        if (i == 0)
        {
            a(args...);
        }
        else
        {
            b(args...);
        }
    }
}; 
```

a() 和 b() 的可变参数模板方法将捕获对 Xx() 的任何调用，其中参数不是单个 int。这解决了我收到的编译器错误，并启用了我正在寻找的更简单的类 API。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:04:37.787

是的，进行单独的重载：

```
template <typename A1>
func(A1 arg1)
{
    x(arg1);
}

template <typename A1, typename A2>
func(A1 arg1, A2 arg2)
{
    y(arg1, arg2);
}

template <typename A1, typename A2, typename A3>
func(A1 arg1, A2 arg2, A3 arg3)
{
    z(arg1, arg2, arg3);
} 
```

（当然，任何额外的通用代码都可以分解为一个单独的通用函数，可能是一个可变参数函数模板。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:09:48.683

看看这篇文章，我知道您可以将`...`其用作参数来告诉您正在使用可变数量的参数。

[... C++ 中的语法](http://weblogs.asp.net/whaggard/archive/2004/07/03/172616.aspx)

这是另一个带有很好注释代码的示例： [Functions with Variable Argument Lists in C and C++ using va_list](http://www.cprogramming.com/tutorial/lesson17.html)

我希望这有帮助。

# javascript - Ajax 上传器没有收到 JSON 响应

> ID：14328423
> 
> 赞同：1
> 
> 时间：2013-01-14T23:02:47.480
> 
> 标签：javascript, jquery, ajax, uploader

我尝试从 Andrew Valums 制作 Ajax 上传器，我知道我需要的只是帮助接收来自上传处理器文件的响应。有没有办法让它完成？

这是JavaScript源

```
$(function(){
var btnUpload=$('#upldbutton');
var status=$('#status');
new AjaxUpload(btnUpload, {
    action: 'upload-file-cart.php?upldid=<? if($item=='add'){ if($geterr==1){ echo $categories_posthash; }else{ echo $token; }} else{ if($pg=='blogs'){ echo $post_blg_cnt_hash; } else { echo $prod_prod_hash; }} ?>',
    name: 'uploadfile',
    dataType: 'json',
    onSubmit: function(file, ext){
        if (! (ext && /^(jpg|jpeg)$/.test(ext))){
            alert('Only JPEG files allowed for upload!');
            return false;
        }
        status.html('<div id="msgbox3" style="margin-left: 2px; width: 351px; position: absolute; z-index: 2;"><img src="resources/template/img/warning-icon.png" width="16" height="16" alt="err_orng" style="position: absolute; margin-left: -25px; margin-top: -1px;" />WARNING: Upload in progress! <b>Please wait!</b></div>');
    },
    onComplete: function(responseJSON){
        status.text('');
        var errormessage = responseJSON["errormessage"];
        var filename = responseJSON["filename"];
        if(errormessage==="success"){
            $('<li></li>').appendTo('#files').html('<a class="img-delete delete" href="#" onclick="nos_dz(\''+filename+'\');"></a> <a class="fancyimg" href="<? echo $content_path; ?>'+filename+'"><img src="<? echo $content_path; ?>/'+filename+'" alt="" width="82" height="82" /></a>').addClass('upldimages success');
            $('#failupload').hide();
            $(function() {
                $(".delete").click(function() {
                    var upldimages = $(this).parent();
                    var id = $(this).attr("id");
                    var string = 'id='+ id ;

                    $.ajax({
                        type: "POST",
                        success: function(){
                            upldimages.fadeOut('slow', function() {$(this).remove();});
                        }
                    });
                    return false;
                });
            });
            alert('Success!');
        }
        else if(errormessage=="exist"){
            $('<li style="position: absolute; margin-left: 115px; margin-top: -19px;" id="failupload"></li>').appendTo('#files').text(filename).addClass('error');                  
        }
        else {
            $('<li></li>').appendTo('#files').text(filename).addClass('error');
        }
    }
});
}); 
```

# java - 如何在 Java 中的多维数组中设置随机 3 个单位“船”？

> ID：14328425
> 
> 赞同：0
> 
> 时间：2013-01-14T23:03:12.123
> 
> 标签：java, arrays, text, multidimensional-array

我正在制作一个基于文本的战舰游戏来练习 Java 编程（我还是很新，所以请耐心等待：S） 该游戏有一个 7x7 网格系统，使用多维字符数组（'-'）。当用户点击时，它会将其中一个“-”更改为“x”。用户提供A1、B5等坐标，程序将其转换为数组可以读取的0-6的数字。

现在我有了这个方法，我的 Player 类中的 setPlayerShips 应该在名为 playerShip1、playerShip2 和 playerShip3 的数组中设置不同的 x 和 y 坐标。数组中的第一个元素是船第一个点的 x 坐标，第二个元素是 y 坐标。第三个是第二个点的 x 坐标，第四个是 y 坐标，依此类推。这些船可以是垂直的或水平的（不倾斜），并且长度为 3 个单位。当我运行程序时，我注意到这个方法根本无法正常工作（它没有设置船3个单位的长度，并且没有在适当的位置），所以请大家看看这个方法并帮助我弄清楚它有什么问题？--注意方法的结束并不是真正的结束，

```
//set player ships coordinates, can be numbers from 0-6
  public static void setPlayerShips(){
    //first two coordinates are completely random(from 0-6)
    playerShip1[0]=(int)(Math.random()*7);
    playerShip1[1]=(int)(Math.random()*7);
    //next coordinates have to be next to this point, but can be in any direction
    do{
      playerShip1[2]=(int)(Math.random()*7);
    }while((Math.abs(playerShip1[2]-playerShip1[0]))>1);//x coordinate has to be either 1 away from or on the same as the first
    //if x coordinates are the same, y has to be 1 more than first y (unless first y is 5 - then make it 1 less than first y or else ship wont fit)
    if(playerShip1[0]==playerShip1[2] && playerShip1[1]>=5){
      playerShip1[3]=playerShip1[1]+1;
    }else if(playerShip1[0]==playerShip1[2] && playerShip1[1]>=5){
      playerShip1[3]=playerShip1[1]-1;
    }
    //if, both x's are the same, third x must be as well
    if(playerShip1[0]==playerShip1[2]){
      playerShip1[4]=playerShip1[0];
    }else if(playerShip1[0]==0){//else, if they aren't equal and the first x is 0 - add the last to the end after the second so it fits
      playerShip1[4]=playerShip1[2]+1;
    }else{//else, add it before the first x
      playerShip1[4]=playerShip1[0]-1;
    }
    //if both y coordinates equal eachother , third must be equal as well
    if(playerShip1[1]==playerShip1[3]){
      playerShip1[5]=playerShip1[1];
    }else if(playerShip1[3]==6){//else if second y coordinate is 6 and they are not all equal, next must come before first or it wont fit
      playerShip1[5]=playerShip1[1]-1;
    }else if(playerShip1[1]==0){//else if first y coordinate is 1, next must come after second y coordinate or it wont fit
      playerShip1[5]=playerShip1[3]+1;
    } 
```

提前谢谢 - 如果这是一个菜鸟问题，对不起！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:53:53.570

首先，我认为您应该查看您的“船舶描述”，制作一个相关的类来存储其位置。

然后，您的算法看起来并不友好。我建议你另一个：

1.  选择一个点：`(x, y)`在您的网格上（使用`Math.random() * 7`），
2.  选择一个方向：*上 =* `0`，*左 =* `1`，*下 =* `2`或*右 =* `3`（使用`Math.random() * 4`），
3.  计算船点：如果*正确*，则`x`值是相同的，并且是`y`，`y`例如。如果顶部，值为, ，且值为。`y + 1``y + 2``x``x``x - 1``x - 2``y``y`

在 3) 之前，您可以根据原始位置和方向检查船舶是否适合网格（例如（`x = 3`并且`y = 1`方向 =*顶部*不适合（`y`值是`1`和））。如果不适合，只需选择新的点和方向`0`。`-1`

我希望它会帮助你！

# php - 如果在数据库中设置了值，则将文本值应用于总计

> ID：14328431
> 
> 赞同：0
> 
> 时间：2013-01-14T23:03:34.610
> 
> 标签：php, mysql, joomla1.5

我试图弄清楚如何修改此代码片段，以便我可以从 #__kiduka_accounts 表中提取 gstexempt 值，检查它是设置为 0 还是 1 并相应地应用税值。

```
$db = JFactory::getDBO();
    $query = 'SELECT a.id, a.gstexempt FROM #__users as u
        LEFT JOIN #__kiduka_accounts as a ON u.id = a.user_id 
        WHERE u.gid < 23';
    if(JRequest::getInt('membertype', 0) > 0)
    {
        $query .= ' AND a.membertype = '.JRequest::getInt('membertype', 0);
    }
    $db->setQuery($query);
    $users = $db->loadResultArray();
    $query = 'SELECT * FROM #__kiduka_products WHERE id = '.JRequest::getVar('purchaseproduct');
    $db->setQuery($query);
    $product   = $db->loadObject();
    $params    = JComponentHelper::getParams('com_kiduka');
    $tax       = $params->get('tax');
    $gstexempt = $users->gstexempt;

    if ($gstexempt != 1) {

        $subtotal   = $product->price;
        $taxtotal   = $subtotal * $tax / 100;
        $finaltotal = $taxtotal + $subtotal;

    } else {

        $subtotal   = $product->price;
        $taxtotal   = "0.00";
        $finaltotal = $subtotal;

    } 
```

任何人都可以分享一些关于我需要改变什么才能完成这项工作的见解吗？

谢谢你。

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:11:06.077

尝试仔细检查您正在运行的 sql 查询，并直接在服务器上运行它以验证它是否给出了您期望的结果。在我看来它可能会导致问题的行之一是连接。

如果您正在对硬编码的用户行 (g.id = 23) 进行连接，您确定这条记录的值不是 1？

设置后立即尝试对用户执行 print_r 并查看数据库结果结构（和/或在此处发布）

# ember.js - Ember.js 新路由器导航错误消息：错误：断言失败：无法在未定义的对象上调用带有 'id' 的 get

> ID：14328434
> 
> 赞同：4
> 
> 时间：2013-01-14T23:03:49.417
> 
> 标签：ember.js, ember-router

我一直在尝试新的路由器和新的 Ember 代码（版本：v1.0.0-pre.2-366-g4772b18），我有点麻烦。我想做一件简单的事情：当我点击一个链接时，它应该导航到那个状态。

但是我得到了这个错误：

> 断言失败：无法在未定义的对象上调用带有“id”的 get。

要触发错误，请单击大红色标题。顶部的第一个 - 上面写着“Ember Ready”。

我没有 JSFiddle，但你可以在这里查看实时站点：http://eduardmoldovan.com/[我](http://eduardmoldovan.com/)基本上在那里推送了相同的代码。

我的代码：

```
var Ngin = window.Ngin = Ember.Application.create({
    ready: function() {
        "use strict";
        this.set("Router.enableLogging", true);
        this.set("Router.location", "history");
    },
    customEvents: {
        blur: "blur",
        paste: "paste",
        changed: "changed"
    }
});

DS.RESTAdapter.configure("plurals", {
    article: "article"
});

Ngin.Store = DS.Store.extend({
    revision: 11,
    adapter: DS.RESTAdapter.create({
        namespace: "private-api",
        bulkCommit: true
    })
});

Ngin.Article = DS.Model.extend({
    title: DS.attr("string"),
    lead: DS.attr("string"),
    url: DS.attr("string"),
    pubdate: DS.attr("date"),
    channel: DS.attr("string")
});

Ngin.IndexController = Ember.ObjectController.extend({
    content: [],
    goToArticle: function() {
        "use strict";
        this.get('target').transitionTo("article");
    }
});
Ngin.IndexModel = DS.Model.extend({});

Ngin.ApplicationView = Ember.View.extend({
    templateName: "page"
});

Ngin.Router.map(function(match) {
    "use strict";
    match("/").to("index");
    match("/technical/:url/").to("article");
});

Ngin.IndexRoute = Ember.Route.extend({
    setupController: function(controller) {
        "use strict";
        var all,
            latestOne,
            latestList;
        latestOne = Ngin.Article.find({
            filter: 'latest-one'
        });
        latestList = Ngin.Article.find({
            filter: 'latest-list'
        });
        controller.set('latestOne', latestOne);
        controller.set('latestList', latestList);
    },
    renderTemplate: function() {
        "use strict";
        this.render("header", {
            outlet: "header"
        });
        this.render("index", {
            outlet: "content"
        });
        this.render("footer", {
            outlet: "footer"
        });
    }
});

Ngin.ArticleRoute = Ember.Route.extend({
    model: function(params) {
        "use strict";
        console.log('ede');
        return Ngin.Article.find(params.url);
    },
    setupController: function(controller) {
        "use strict";
    },
    renderTemplate: function() {
        "use strict";
    }
});

$("body div").remove();

Ngin.initialize(); 
```

像这样一个简单的动作：`{{action goToArticle}}`

我真的不明白谁想叫什么。对此有任何想法吗？我一直在寻找答案或例子，但没有幸运。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T23:59:25.960

您的问题是您在`transitionTo`没有提供模型的情况下打电话。

Ember 正在尝试过渡到该`article`路线。为此，它需要生成`:url`动态细分的价值。为了得到它，它将您作为第二个参数传递的模型传递`transitionTo`给路由的`serialize`方法。

默认`serialize`方法尝试使用`id`模型的属性填充动态段。

你的行动是：

```
{{action goToArticle}} 
```

它应该是：

```
{{action "goToArticle" article}} 
```

然后，您需要更新您`IndexController`的参数：

```
Ngin.IndexController = Ember.ObjectController.extend({
  content: [],
    goToArticle: function(article) {
      this.transitionTo("article", article);
    }
}); 
```

综上所述，您确实应该在此处使用链接，而不是操作。这将为您处理一切：

```
{{#linkTo "article" article}}{{article.title}}{{/linkTo}} 
```

您可以在 Ember 指南中了解[链接助手](http://emberjs.com/guides/templates/links/)和[操作助手。](http://emberjs.com/guides/templates/actions/)

# recursion - Groovy 递归函数在哪里存储结果？

> ID：14328437
> 
> 赞同：2
> 
> 时间：2013-01-14T23:03:58.510
> 
> 标签：recursion, groovy, tree

我正在尝试构建一个简单的树状对象结构并确定每个对象的深度级别。为此，我创建了一个递归函数，但该函数总是返回最后的结果，而不是预期的总结果。我可能将结果存储在不正确的位置。

```
def getStructure(anObject, level=0) {

    def results = []

    // [parent id, object id, level]

    if(anObject.parent == null) {
        results.add([0, anObject.id, level])
    } else {
        anObject.children?.each { child ->
            results.add([anObject.parent.id, child.id, level])
    }

    // recursive call
    anObject.children?.each { child ->
       getStructure(child, level++)
    }

    results
} 
```

在我的测试用例中，我总是得到最新的运行，所以我猜结果 = [] 每次都会重新初始化。如何存储递归函数的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:07:14.710

您需要将递归调用的结果添加到结果中。代替

```
// recursive call
anObject.children?.each { child ->
   getStructure(child, level++)
} 
```

试试这个：

```
// recursive call
anObject.children?.each { child ->
   results.addAll(getStructure(child, level++))
} 
```

# c++ - 我尝试定义 hash_map 变量在 VS2008 中对我不起作用

> ID：14328439
> 
> 赞同：4
> 
> 时间：2013-01-14T23:04:06.927
> 
> 标签：c++, visual-studio-2008, hashmap

我正在使用 Visual Studio 2008。这是我的代码：

```
#include "stdafx.h"
#include <conio.h>
#include <hash_map>
#include <iostream>

using namespace std;

hash_map <int, int> hm;

int main()
{
    return 0;
} 
```

这是我的错误：

```
error C2143: syntax error : missing ';' before '<'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:45:12.977

在 MSVC 编译器中，标准库的扩展被放置在`stdext`命名空间中：

```
#include <hash_map>

stdext::hash_map<int, int> hm;

int main()
{
    return 0;
} 
```

*免责声明：我不拥有 VS2008，但这应该可以。:)*

但请注意，如果可能，您应该更新到最新的编译器，并改用新的标准无序容器：`std::unordered_map`和`std::unordered_set`.

# ios - 一种使用私有 API 重启 iOS 设备或重启 Springboard 的方法？

> ID：14328441
> 
> 赞同：14
> 
> 时间：2013-01-14T23:04:21.027
> 
> 标签：ios, iphone-privateapi

我正在寻找一些私有 API 或一段代码，它们可以让我重新启动 iOS 设备或重新启动 Springboard。

我查看了 SBReboot，但看起来它受到某些权利的保护。

另外，我尝试了reboot(int) 和reboot2(int)，但看起来它们都只对“root”用户有效，对“mobile”用户没有任何作用。

我正在寻找一种适用于非越狱设备的解决方案。但是，私有 API 是可以的（应用程序不会进入 AppStore）

**更新 1**

回应以下约西亚的回答。寻找获得 root 权限的机会并不是唯一的选择。例如，任何允许崩溃内核或 Springboard 的漏洞对我来说都很好（即使它不能用于获得 root 权限）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T23:24:10.503

没有可以从应用程序内部作为移动设备执行的私有或公共 API。这很烦人，但这是事实。

唯一可行的方法是拥有一个越狱设备，你说这是不可能的。

最后，甚至没有任何不安全的方法可以做到这一点。您不能超载内存或任何会导致重新启动的东西。苹果只是杀死你的应用程序。

最后，你可以做一件事......找到一个你可以通过这个应用程序执行的漏洞，让你自己获得root权限，直到重新启动。可能，但您没有从这里获得该信息。

不过祝你好运。（哦，如果有人确实有办法做到这一点，请告诉我，这可以用作漏洞利用）

## 编辑

我找到了一种无需越狱即可重新启动跳板的方法，但它并没有真正做到你想要的。但它可以给人们一些想法。

1.  首先，您只需要禁用您的设备密码。否则，此故障将不起作用。转到设置>；常规>；密码锁定并将其关闭。

2.  锁定您的设备。

3.  进入锁屏并以横向模式（水平）转动您的设备。

4.  在保持横向模式的同时向上滑动那个相机滑块（我不知道你怎么称呼它，哈哈）

5.  一旦整个锁屏出现并且看不到，请按主页按钮并同时点击屏幕右下角的照片库方块。注意：不需要等待相机加载并激活。

6.  您应该会在很短的时间内看到主屏幕，然后才能看到 Apple 标志/加载圆圈，您的设备现在正在重新启动。（注意：在 iOS 6 中，Apple 在重新进入 Apple 徽标时替换了通常的加载圈，不用担心您的设备不会重新启动）

# c# - 如何将 SQL Server 表拉入内存以便对其运行查询

> ID：14328444
> 
> 赞同：3
> 
> 时间：2013-01-14T23:04:39.967
> 
> 标签：c#, sql-server, linq, datatable, dataview

我在 sql server 的表上运行 > 50K 简单选择，我真的很想加快速度。我读过您可以将数据拉入内存并使用数据视图之类的东西进行查询。

有没有办法在 Linq 中使用某些东西来结束 -

```
var dv = CreateTheDataViewFromDatabase();

var result = dv.Where("CategoryId=2 And Uncle='bob'"); 
```

这会比多次查询数据库快得多吗？我担心数据视图上没有索引，因此可能会丢失将其保存在内存中的收益。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:11:46.390

我希望最快的方法是生成一个查询，该查询按顺序返回整个“50K 简单选择”集的结果，这样您就可以将整个事情作为一个查询运行并迭代结果依次。

这样做的原因是，当您将表拉到内存中时，您会丢失任何可能在 sql server 中可用以帮助查询结果的索引信息。当然，代价是您的查询返回了 50K 查询价值的数据，但是如果您针对数据读取器和数据表正确执行此操作，您应该能够避免在客户端的内存中保留不必要的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:09:08.810

是的，您可以使用 Linq 针对您`DataTable`的`AsEnumerable`. 例如：

```
var rows = from row in dt.AsEnumerable()
            where row.Field<int>("CategoryId") == 2 && row.Field<string>("Uncle") == "bob" 
            select row; 
```

确保添加对`System.Data.DataSetExtensions`

**更新：动态 SQL**

可以即时建立您的条件。看看[动态 LINQ](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)和[谓词生成器](http://www.albahari.com/nutshell/predicatebuilder.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T02:57:41.990

听起来您的程序正在花费大量时间与数据库进行通信。如果您查询数据库一次并将结果保存在计算机的内存中，您可以大大加快该过程。如果您使用的是[ADO.NET 实体数据模型](http://msdn.microsoft.com/en-us/library/vstudio/bb399247%28v=vs.100%29.aspx)，那么您可以轻松地查询数据库并将检索到的记录保存在 IEnumerable 中。然后，您可以使用 LINQ 对保存的值执行查询。

```
//Get the data from your database 
public IEnumerable<DataValue> GetDataValues()
{
    try
    {
        using (var db = new MyEntities())
        {
            return (from data in db.DataValues
                   select data).ToList(); 
        }
    }
    catch(Exception e)
    {
        Console.WriteLine(e); 
    }
}

//Perform operations on the data
public void DoSomething()
{
    var data = GetDataValues(); 
    var result = data.Where(p => p.CategoryId == 2 && p.Uncle == "Bob"); 
    //etc...
} 
```

[您可以在此处](http://www.dotnetperls.com/where)和[此处](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)找到一些关于使用 LINQ 的体面示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T23:17:15.183

如其他答案所示，这是可能的，但有一些事情需要考虑：

首先，需要提取的数据总量是多少。如果该数量需要如此多的内存以致虚拟内存大量启动，那么您将失去所有速度优势，因为操作系统需要的时间长短在分页上。

其次，50k+ 的查询数量很多。考虑进行设计更改/重构以减少查询量。不同算法的好处可能会超过您建议的解决方案。

# ruby-on-rails - ERB 语法错误

> ID：14328447
> 
> 赞同：0
> 
> 时间：2013-01-14T23:04:51.180
> 
> 标签：ruby-on-rails, ruby, erb

这有什么理由返回语法错误吗？

```
<%= link_to(post), :confirm => 'Are you sure?', method: :delete, :remote => true, do %>
  <div>Delete</div>
<% end %> 
```

这是我得到的错误：

```
syntax error, unexpected tASSOC, expecting keyword_end 
```

我需要`:remote => true`在链接上使用 Ruby gem 来显示灯箱。

## 更新

我也尝试在 the 之前删除逗号，`do`但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:16:44.630

两个问题：

1.  您只为`link_to`函数的参数之一加上括号。
2.  `do`在（如 Dave 指出的）之前有一个尾随逗号。

你可以用括号括起来：

```
<%= link_to(post, confirm: 'Are you sure?', method: :delete, remote: true) do %>
   <div>Delete</div>
<% end %> 
```

或没有

```
<%= link_to post, confirm: 'Are you sure?', method: :delete, remote: true do %>
   <div>Delete</div>
<% end %> 
```

# c# - C和C#之间的RSA加密

> ID：14328448
> 
> 赞同：1
> 
> 时间：2013-01-14T23:04:57.243
> 
> 标签：c#, c, openssl, rsa

我正在尝试编写一个简单的 RSA 加密方案来加密单个服务器和可能的许多客户端之间的小消息。

我想出的计划是让客户端生成一个密钥对并将公钥发送到服务器。服务器有一个存储套接字和公钥的对象。当需要发送消息时，服务器将调用 Client 对象中的一个方法，该方法将加密消息并将其发送给客户端。

我只会加密发送到客户端的消息，所以我不需要担心密钥的完整交易。

我想我已经很清楚了。

问题来自于尝试连接两种不同的 RSA 实现。服务器是用 C# 编写的，客户端是使用 C 的 MetaTrader 客户端。我决定使用 OpenSSL 来尝试弥合差距，但到目前为止我还无法在客户端上生成密钥。我正在为 c# ( [http://openssl-net.sourceforge.net/](http://openssl-net.sourceforge.net/) ) 使用 openssl 包装器，并且我正在尝试为 MetaTrader 编写一个非常基本的包装器 dll。到目前为止，它包含两个函数，GenerateRSAKeys 和 DecryptRSA。

现在，我只想生成一个包含公钥的 PEM 格式字符串。这就是我迄今为止对 GenerateRSAKeys() 所做的。

```
extern "C" unsigned char *__stdcall GenerateRSAKeys (){

int len;
unsigned char *buf = new unsigned char[1024];

rsa = RSA_generate_key(512,RSA_F4,NULL,NULL);

len=i2d_RSAPublicKey(rsa, &buf);

return buf;} 
```

现在，当将 buf 发送到服务器时，我收到一个字符。比如“X”

所以我的第一个问题是，导出生成的公钥的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:10:30.880

您正在返回一个指向堆栈上分配的缓冲区的指针；当函数返回时，这个缓冲区将被覆盖。尝试`buf = new unsigned char[1024];`

# javascript - 你什么时候把 Javascript 放在 body 里，什么时候放在 head 里，什么时候使用 doc.load？

> ID：14328449
> 
> 赞同：22
> 
> 时间：2013-01-14T23:04:58.223
> 
> 标签：javascript, jquery, location, head, document-body

> **可能重复：**
> [在 HTML 文件中放置 Javascript 的位置？](https://stackoverflow.com/questions/196702/where-to-place-javascript-in-a-html-file)
> [我应该在 html 的主体还是头部编写脚本？](https://stackoverflow.com/questions/3531314/should-i-write-script-in-the-body-or-the-head-of-the-html)

我一直想知道，主要是因为在创建页面时我总是遇到麻烦，基于以下几点：

你什么时候写你的javascript

*   在里面`<head>`
*   在里面`<body>`
*   与`$(document).ready()`

我可能很愚蠢，但我有几次因为错误的位置或是或否`doc.ready()`命令而没有执行我的 JavaScript (/jQuery)。所以我真的很想知道。

jQuery 和 'var' 命令也是如此

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T23:09:32.467

`$(document).ready()`只需确保在加载 javascript 之前加载所有 DOM 元素。

**没关系的时候**

无需等待此事件触发，您最终可能会操作页面上尚不存在的 DOM 元素或样式。DOM 就绪事件还允许您更灵活地在页面的不同部分运行脚本。例如：

```
<div id="map"></div>
<script type="text/javascript">document.getElementById('map').style.opacity = 0;</script> 
```

将运行，因为在脚本运行之前已经加载了地图 div。事实上，通过将脚本放在页面底部，您可以获得一些[相当不错的性能改进。](http://developer.yahoo.com/performance/rules.html)

**什么时候重要**

但是，如果您在`<head>`元素中加载脚本，则大部分 DOM 都没有加载。此示例将不起作用：

```
<script type="text/javascript">document.getElementById('map').style.opacity = 0;</script>
<div id="map"></div> 
```

不会，因为地图 div 尚未加载。

**安全的解决方案**

您可以通过简单地等待整个 DOM 加载来避免这种情况：

```
<script type="text/javascript">$(document).ready(function () { 
    document.getElementById('map').style.opacity = 0;
});
</script>
<div id="map"></div> 
```

有很多[文章](http://www.learningjquery.com/2006/09/introducing-document-ready)解释了这一点，还有[jQuery 文档](http://api.jquery.com/ready/)本身。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T23:09:40.040

通过现代“最佳实践”，它是这样的：

*   `<head>`在页面开始呈现之前将脚本放在它们应该发生的时间。例如 HTML 5 shim 库或 Modernizr。
*   当对如何导入脚本的控制有限时，将脚本放在“就绪”处理程序中。可以包含在页面上以不显眼地添加功能的实用程序之类的东西通常使用“就绪”处理程序，因为它们无法确定如何使用它们。
*   `<body>`如果您在所有其他情况下都可以摆脱它，请将脚本放在末尾。

有时，您最终会在页面中产生依赖项，这些依赖项需要您希望在 body 元素末尾加载的内容。这是一个不受欢迎的情况，但如果你无法避免它可能会强制将脚本加载到 .`<head>`而不是`<body>`.

最好在文档末尾加载内容，因为浏览器`<script>`在加载标签时会评估它们的内容。（有一些“现代”方法可以避免这种情况，但这进入了更复杂的领域。）

何时使用“就绪”处理程序（或“加载”处理程序，就此而言）的决定与关于放置`<script>`标签的位置的决定略有不同。如果你有来自服务器端模板系统的页面内小部件生成（不受欢迎，但你能做什么？）例如 jQuery 引用，那么你需要在页面顶部导入 jQuery，即使其他代码可能会将初始化推迟到“就绪”处理程序。也就是说，关于何时使用“就绪”的决定与您的脚本是否愿意依赖于在正确的位置被导入到页面中，或者是否要确保无论在哪里都发生正确的事情有关它的`<script>`标签被放置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-14T23:11:33.197

这是您何时需要执行代码的问题。

如果您要操作 DOM 树（例如移动元素/显示隐藏等）并且将代码放在文档的头部，则在执行代码时您的元素将不存在，因此您的代码将无法工作.

在这种情况下，您可以将代码放在文档的头部，并在文档 DOM 准备好时调用它，使用`$(document).ready()`

很少需要将代码放在文档末尾，我能想到的一种情况是 google plus +1 按钮，这需要您在最后一个 +1 按钮之后放置脚本，因此您只需将其粘贴到文档末尾为了确定。

# c - 简单字符串连接的问题

> ID：14328453
> 
> 赞同：1
> 
> 时间：2013-01-14T23:05:43.673
> 
> 标签：c

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

我正在编写一个非常简单的程序，我试图在 for 循环中连接两个字符串。字符串连接中的第一个字符串是固定的，第二个字符串是通过函数获得的`itoa`。该程序正在成功构建，但是当我尝试运行该程序时，它无法运行并停止。我刚刚调试了程序，在调试时我意识到程序卡在了字符串连接操作中。我在下面发布程序。感谢您的支持 ：

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc,char *argv[])
{
    char *str="NULL" ,dec[] = "NULL";
    int i,num;

    printf("Enter a number : \n");
    scanf("%d",&num);

    for (i=0;i<num;i++)
    {   str = "test_file_num_"; 
        itoa(i,dec,10);
        strcat(str,dec);
         printf("%s\n",str);
    }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:10:50.177

写入`str`是错误的，它的内存不可写入。当您`char *str="NULL"`为初学者执行此操作时，您仅分配 5 个字节（开始连接时您将需要更多字节），并且在某些情况下，您也在只读内存上执行此操作（可能在 .data 上或可能在 .text 上）它会起作用，但它是未定义的行为。

如果您不能使用动态内存，请尝试执行以下操作：

```
char str[128]="NULL" 
```

这会在堆栈上分配 128 个字节（您可能需要更多）。这不是最好的方法，但它将是解决您问题的最小更改。

编辑：

这行同样的问题`str = "test_file_num_";` 它指向`str`一个驻留在只读内存上的字符串文字。为此更改：

```
strcpy(str, "test_file_num_"); 
```

这会将字符串文字复制到堆栈分配的缓冲区。

最后，我认为您应该用以下代码替换循环内的所有代码：

```
printf("test_file_num_%d\n", i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:11:30.193

`char *str = "NULL";`声明`str`为 char 指针，并使用**只读**的字符串文字“NULL”的地址对其进行初始化。修改字符串文字是一种未定义的行为，这就是为什么会出现分段错误`strcat`（这反过来又是未定义行为的标志）。更不用说内存的初始分配（'NULL' 的 4 个字节 + '\0' 的 1 个字节 = 5 个字节）不适合附加字符串的连接。

[而是使用malloc()](http://www.cplusplus.com/reference/cstdlib/malloc/)动态分配内存，如下所示：

```
char *str=(char*) malloc(100*sizeof(char)); 
```

或者，如果您不想这样做，则始终可以像先前的答案所说的那样分配一个数组。

**注意**：如果您动态分配内存，请不要忘记在处理完数据后对其进行[free()](http://www.cplusplus.com/reference/cstdlib/free/)，否则您的程序会泄漏内存。如果您想了解更多关于动态分配内存的信息，可以参考[这里](http://www.vdesignourweb.com/c/c_dynamic_memory.html)。

# python - Python：如何仅迭代字典中的值并附加到值？

> ID：14328455
> 
> 赞同：1
> 
> 时间：2013-01-14T23:05:48.920
> 
> 标签：python

我有以下代码，我试图在搜索期间迭代值，然后附加到值。

```
for delvt, pin in zip(temp_delvt_list, temp_pin_list):
    temp[delvt].append(pin)
    print temp
SPFFile = open(pathSPFfiles + temp_cell + ".spf", "r")
for line in SPFFile:
    for pin in temp[delvt]:
         print pin 
```

温度的输出是：

```
defaultdict(<type 'list'>, {'0.1995': ['in1', 'in2'], '0.399': ['in0', 'y']}) 
```

引脚输出仅为：

```
in0
iny 
```

为什么pin也不输出in1和in2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:11:47.870

因为你在改变的循环之外`delvt`，所以你只使用最后一个分配的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:13:22.093

您可以使用`dict_var.values()`迭代值`dict_var`

# hibernate - Hibernate：我可以定义仅在目标实体存在时才发生的 OneToOne 关系吗？

> ID：14328459
> 
> 赞同：0
> 
> 时间：2013-01-14T23:06:10.373
> 
> 标签：hibernate

我在加载包含与另一个实体的可选一对一关系的实体时遇到问题。

当我尝试加载具有相应映射的实体时，一切似乎都很好，但有时（我猜是当我尝试加载`CitationInformation`没有相应映射的 时`VenueTopic`）我得到以下异常：

```
org.hibernate.PropertyAccessException: could not set a field value by reflection setter of 
```

这些是我的课：

```
@Entity
public class CitationInformation {
    @Id
    @GeneratedValue
    private long identifier;

    private String doi;

    @OneToOne(optional = true, targetEntity = VenueTopic.class)
    @JoinColumn(name = "venue")
    @NotFound(action=NotFoundAction.IGNORE)
    private String venue;
    ...
}

@Entity
public class VenueTopic {
    @Id
    private String venueName;
    private String topic;
    ...
} 
```

不幸的是，我需要处理这种肮脏的情况，因为我必须将我的休眠实体与来自另一个表的数据集成，而这些数据不是通过休眠生成的。

我想我在这段关系中搞砸了`@OneToOne`。我不确定我是否正确定义了它是可选的，以及我希望如何处理缺失值。

我想要的行为`CitationInformation`应该始终包含一个`venue`，但*只有*当有一个`VenueTopic`具有相同的实体时，关系才应该存在`venueName`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:03:57.947

我认为将 CitationInformation 类中的私有字符串场所从 String 类型更改为 VenuTopic 类型可能会解决问题。我不明白为什么您已经将类型字符串映射到另一个实体时使用它。

# android - JSON 序列化器 Android

> ID：14328464
> 
> 赞同：2
> 
> 时间：2013-01-14T23:06:27.830
> 
> 标签：android, jsonserializer, json-lib

我将 JSONLib 2.4 用于 JSONSerializer() 方法。每次我开始活动时，它都会强制关闭。我尝试抛出 JSONException，但它给了我一个错误。怎么了？这是电话：

```
JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt); 
```

这是我的 LogCat 输出：

01-14 17:29:24.825: W/dalvikvm(13265): 无法解析 Lnet/sf/json/JSONException 的超类；(1034) 01-14 17:29:24.825: W/dalvikvm(13265): 类 'Lnet/sf/json/JSONException;' 的链接 失败 01-14 17:29:24.825: W/dalvikvm(13265): VFY: 无法解析异常类 813 (Lnet/sf/json/JSONException;) 01-14 17:29:24.825: W/dalvikvm(13265) : VFY: 无法在 addr 0x2e 01-14 17:29:24.825 找到异常处理程序: W/dalvikvm(13265): VFY: 拒绝 Lnet/sf/json/JSONSerializer;.toJSON (Ljava/lang/Object;Lnet/sf /json/JsonConfig;)Lnet/sf/json/JSON; 01-14 17:29:24.825: W/dalvikvm(13265): VFY: 在 0x002e 拒绝操作码 0x0d 01-14 17:29:24.825: W/dalvikvm(13265): VFY: 拒绝 Lnet/sf/json/JSONSerializer； .toJSON (Ljava/lang/Object;Lnet/sf/json/JsonConfig;)Lnet/sf/json/JSON; 01-14 17:29:24.825: W/dalvikvm(13265): 验证程序拒绝类 Lnet/sf/json/JSONSerializer；01-14 17:29:24.856: W/dalvikvm(13265): threadid=11: 线程以未捕获的异常退出 (group=0x41b28930) 01-14 17:29:24.872: E/AndroidRuntime(13265): 致命异常: AsyncTask ＃1 01-14 17：29：24.872：E / AndroidRuntime（13265）：java.lang.RuntimeException：执行doInBackground（）时发生错误01-14 17：29：24.872：E / AndroidRuntime（13265）：在android .os.AsyncTask$3.done(AsyncTask.java:299) 01-14 17:29:24.872: E/AndroidRuntime(13265): 在 java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352) 01-14 17:29:24.872: E/AndroidRuntime(13265): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:219) 01-14 17:29:24.872: E/AndroidRuntime(13265): 在 java.util .concurrent.FutureTask.run(FutureTask.java:239) 01-14 17:29:24.872: E/AndroidRuntime(13265):

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:10:12.453

答案在 logcat 的第一行。

```
Unable to resolve superclass of Lnet/sf/json/JSONException 
```

如果您查看[JSONException 的 javadoc，](http://json-lib.sourceforge.net/apidocs/net/sf/json/JSONException.html)它会显示类层次结构。您可以在 JSONException 上方看到它说`org.apache.commons.lang.exception.NestableRuntimeException`这意味着 NestableRuntimeException 是 JSONException 的超类，因此您需要在项目中拥有 NestableRuntimeException 才能使 JSONException 工作。

与您将 JsonLib 添加到项目中的方式相同，您还应该添加 JsonLib 的依赖项。根据 mvnrepository，json-lib 2.4 依赖于相当多的视图库，commons-lang 2.5 就是其中之一。[您可以在此处](http://mvnrepository.com/artifact/net.sf.json-lib/json-lib/2.4)查看 mvnrepository 报告的它们。您还可以在[此处](http://json-lib.sourceforge.net/dependencies.html)的 json-lib 项目页面上看到它们。

对于看起来有大量依赖项并且会使您的 apk 更大的移动应用程序。我没有使用过 json-lib，但我可能会建议使用更独立的东西，比如[gson](http://code.google.com/p/google-gson/)（[下载](http://code.google.com/p/google-gson/downloads/list)）。

# php - 编辑帖子时检索属于帖子的所有标签

> ID：14328465
> 
> 赞同：1
> 
> 时间：2013-01-14T23:06:29.273
> 
> 标签：php, cakephp, has-and-belongs-to-many

我有两个模型，`Post`它们`Tag`是在 HABTM 关系中设置的，如下所示：

```
class Post extends AppModel {
    public $hasAndBelongsToMany = array('Tag');
}

class Tag extends AppModel {    
    public $hasAndBelongsToMany = array('Post');
} 
```

编辑帖子时，我想在输入框中显示属于该帖子的所有标签。

现在我的帖子控制器中有这个：

```
$this->set('tags', $this->Post->Tag->find('list')); 
```

但由于某种原因，它会返回表中的*每个*标签`tags`，而不是只返回属于该帖子的标签。

如何修改它，使其仅检索属于我正在编辑的帖子的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:14:12.370

您使用 find() 函数的方式意味着您需要标签表的所有行。

在您的模型中：

```
class Post extends AppModel {

/**
 * @see Model::$actsAs
 */
    public $actsAs = array(
        'Containable',
    );

        public $hasAndBelongsToMany = array('Tag');
}

class Tag extends AppModel {    

/**
 * @see Model::$actsAs
 */
    public $actsAs = array(
        'Containable',
    );

    public $hasAndBelongsToMany = array('Post');
} 
```

您应该以这种方式使用 find 函数：

```
$postWithTag = $this->Post->find('first', array('conditions' => array('Post.id' => $post_id),'contain'=>array('Tag'))); 
```

它返回 Post 及其标签。

如果你只想要没有帖子的标签，你应该在 PostTag 模型中放置 belongsTo 关系：

```
class PostTag extends AppModel {    

/**
 * @see Model::$belongsTo
 */
    public $belongsTo = array(
        'Post','Tag'
    );
} 
```

然后以这种方式使用查找功能：

```
class PostController extends AppController {

/**
 * @see Controller::$uses
 */
    public $uses = array(
        'Post', 'PostTag'
    );

    public function post(){

          /**
           * Your code
           */
          $tags = $this->PostTag->find('all', array('conditions' => array('PostTag.post_id' => $post_id)));
          $this->set('tags',$tags);
    } 
```

# javascript - 为什么我无法使用 Javascript 访问我的 WCF Web 服务？

> ID：14328466
> 
> 赞同：0
> 
> 时间：2013-01-14T23:06:30.453
> 
> 标签：javascript, ajax, wcf, web-services, httprequest

我是 AJAX 的新手，我正在尝试通过以下方式访问 WCF Web 服务：

```
$(function () {
    $('#formNew').submit(function () {
        var datos = {
            "Nombre": $('#nombre').val(),
            "ApellidoP": $('#appP').val(),
            "ApellidoM": $('#appM').val(),
            "UserName": $('#username').val(),
            "Password": $('#password').val(),
        };
        var args = "Data=" + JSON.stringify(datos);
        var url = 'http://127.0.0.1:81/SismosService.svc/usuario/new?' + args;
        alert(url);
        $.ajax({
            type: 'GET',
            url: url,
            success: function (data) {
                alert("Exito " + JSON.stringify(data));
            },
            error: function (data) {
                alert("Error " + JSON.stringify(data));
            }
        });
    });
}); 
```

当我填写表单并单击提交按钮时，我在 Firebug 上收到以下错误：

ñ

```
S_ERROR_NOT_AVAILABLE: prompt aborted by user
[Break On This Error]   

throw Components.Exception("prompt aborted by user", Cr.NS_ERROR_NOT_AVAILABLE) 
```

我的网络服务定义如下：

```
 [WebGet(UriTemplate = "/usuario/new?Data={data}",
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Bare)]
    ResponseObject<Usuarios> NewUsuario(string data); 
```

我究竟做错了什么？是我发送参数的方式吗？是我试图访问网络服务的方式吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:40:18.153

我通常使用以下配置来启用对我的 WCF 服务的 ajax 调用：

1) 首先我在 Web.config 中创建一个 JSON 端点行为并将我的服务与它相关联：

```
<system.serviceModel>
  <behaviors>
    <endpointBehaviors>
      <behavior name="WebHttpJson">
        <webHttp defaultBodyStyle="Wrapped"
                 defaultOutgoingResponseFormat="Json" />
      </behavior>
    </endpointBehaviors>
  </behaviors>
  <services>
    <service name="MyApp.LoginService">
      <endpoint address=""
                behaviorConfiguration="WebHttpJson"
                binding="webHttpBinding"
                contract="MyApp.LoginService" />
    </service>
  </services>
</system.serviceModel> 
```

2）然后我可以像这样简单地定义我的 WCF 服务：

```
[ServiceContract]
public class LoginService
{
    [OperationContract]
    public void SignIn(string email, string pswd)
    {
        // Check credentials and create session cookie
    }
} 
```

3) 最后进行 jQuery ajax 调用，如下所示：

```
$.ajax({
    contentType: 'application/json; charset=utf-8',
    url: serviceUrl + '/SignIn',
    type: 'POST',
    data: JSON.stringify({
        email: 'john.doe@abc.com', 
        pswd: 'qwerty'
    }),
    success: function () { alert('success!'); },
    error: function () { alert('error!'); }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:23:40.683

JSON.stringify **(data)**用于将 javascript 对象转换为 json 表示。

我认为在 success\error 函数中，您需要采用另一种方式：

```
 success: function (data) {
                            alert("Exito " + JSON.parse(data));
                          },
 error:   function (data) {
                            alert("Error " + JSON.parse(data));
                          } 
```

（使用 JSON.parse、JSON.stringify 时 - 确保在项目中包含 json2.min.js）

# single-sign-on - 如何在 OpenIG 中提出名称请求？

> ID：14328468
> 
> 赞同：2
> 
> 时间：2013-01-14T23:06:36.163
> 
> 标签：single-sign-on, reverse-proxy, federated-identity, openam, openacs

在这种情况下，我一直在尝试使用 ForgeRock 人员的 OpenIG 身份网关来集成一些遗留系统，特别是我将它与来自 Ars Digita 和不同机构的 OpenACS+.LRN 项目一起使用。

问题出在：使用 OpenIG 文档中的配方提取隐藏值并回复请求的 cookie 以避免安全问题，我收到了成功的 POST 请求以登录系统，但在请求之后，OpenACS 日志告诉我最初的请愿书请求的`http://10.10.10.10/register`不是真正的客户请愿书`http://openacs-domain.com/register`，而是中断到 302 重定向到 IP 方向以进行新的登录。

我已修改 /etc/hosts 以检查它是否执行名称解析但没有成功。

奇怪的是，如果我在发出初始请求时回到域，我有一个有效的启动会话，一切都很酷。

我希望我的描述性足够强，并且有人对此有解决方案。我将附上我的 config.json

```
 {
  "heap": {
    "objects": [
    {
        "name": "HandlerServlet",
        "comment": "Entry point that transforms Servlet request to handler request.",
        "type": "HandlerServlet",
        "config": {
            "handler": "DispatchHandler",
            "baseURI":"http://10.10.10.10"
        }
    },
    {      
        "name": "DispatchHandler",
        "type": "DispatchHandler",
        "config": {
            "bindings": [  
                {                      
                    "condition": "${exchange.request.uri.path == '/register/'}",
                    "handler": "LoginChain"
                },
                {                      
                    "handler": "OutgoingChain",
                },
            ]  
        }  
    },
    {
        "name": "LoginChain",
        "type": "Chain",
        "config": {
            "filters": ["SwitchFilter", "HiddenValueExtract"],
            "handler": "OutgoingChain"
        }  
    },
    {
        "name": "HiddenValueExtract",
        "type": "EntityExtractFilter",
        "config": {
            "messageType": "response",
            "target": "${exchange.hiddenValue}",
            "bindings": [
                {
                    "key": "time",
                    "pattern": "time\"\s.*value=\"(.{10})\"",
                    "template": "$1"
                },
                {
                    "key": "tokenId",
                    "pattern": "token_id\"\s.*value=\"(.{3})\"",
                    "template": "$1"
                },
                {
                    "key": "hash",
                    "pattern": "hash\"\s.*value=\"(.*)\"",
                    "template": "$1"
                }
            ]
        }       
    },
    {
        "name": "SwitchFilter",
        "type": "SwitchFilter",
        "config": {
            "onResponse": [
                {
                    "condition": "${exchange.response.status == 200}",
                    "handler": "LoginRequestHandler"
                }
            ]
        }
    },
    {
        "name": "LoginRequestHandler",
        "type": "Chain",
        "config": {
            "filters": ["LoginRequest"],
            "handler": "OutgoingChain"
        }  
    },
    {  
        "name": "LoginRequest",
        "type": "StaticRequestFilter",
        "config": {
            "method": "POST",
            "uri": "http://10.10.10.10/register/",
            "form": {
                "form:mode": ["edit"],
                "form:id": ["login"],
                "__confirmed_p": ["0"],
                "__refreshing_p": ["0"],
                "return_url": ["/dotlrn/control-panel"],
                "time": ["${exchange.hiddenValue.time}"],
                "token_id": ["${exchange.hiddenValue.tokenId}"],
                "hash": ["${exchange.hiddenValue.hash}"]
                "email": ["user.example@gmail.com"],
                "password": ["password"]
            }
            "headers": {
                "cookie": ["${exchange.response.headers['Set-Cookie'][0]}"],
            }  
        }  
    },
    {
        "name": "OutgoingChain",
        "type": "Chain",
        "config": {
            "filters": ["CaptureFilter"],
            "handler": "ClientHandler"
        }  
    },
    {  
        "name": "CaptureFilter",
        "type": "CaptureFilter",
        "config": {
            "captureEntity": false,
            "file": "/tmp/gateway.log",
        }      
    },
    {
        "name": "ClientHandler",
        "comment": "Responsible for sending all requests to remote servers.",
        "type": "ClientHandler",
        "config": {
            }
        }
    ]
  },
  "servletObject": "HandlerServlet",
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T16:46:44.923

这是最终版本：

```
{

"heap": {
    "objects": [
    {
        "name": "LogSink",
        "comment": "Default sink for logging information.",
        "type": "ConsoleLogSink",
        "config": {
            "level": "DEBUG",
        }
    },
    {
        "name": "DispatchServlet",
        "type": "DispatchServlet",
        "config": {
            "bindings": [
                {
                    "pattern":"^/saml",
                    "object":"FederationServlet"
                },
                {
                    "pattern":"",
                    "object":"HandlerServlet"
                }
            ]
        }
    },
    {
        "name": "FederationServlet",
        "type": "org.forgerock.openig.saml.FederationServlet",
        "config": {
            "assertionMapping": {
                "userName":"mail",
                "password":"employeenumber"
            },
            "subjectMapping":"subjectName",
            "redirectURI":"/register",
            "logoutURI":"/register/logout"
         }
    },
    {
        "name": "HandlerServlet",
        "comment": "Entry point that transforms Servlet request to handler request.",
        "type": "HandlerServlet",
        "config": {
            "handler": "DispatchHandler",
            "baseURI":"http://www.plataformaciapem.org.mx"
        }
    },
    {      
        "name": "DispatchHandler",
        "type": "DispatchHandler",
        "config": {
            "bindings": [  
                {                      
                    "condition": "${exchange.request.uri.path != '/register/'}",
                    "handler": "ClientHandler"
                },
                {
                    "condition": "${empty exchange.session.userName}",
                    "handler": "SPInitiatedSSORedirectHandler",
                },
                {                      
                    "handler": "LoginChain",
                },
            ]  
        }  
    },
     {
        "name": "SPInitiatedSSORedirectHandler",
           "type": "StaticResponseHandler",
           "config": {
               "status": 302,
               "reason": "Found",
               "headers": {
                   "Location": ["http://www.plataformaciapem.org.mx/saml/SPInitiatedSSO"]
               }
           }
    },
    {
        "name": "LoginChain",
        "type": "Chain",
        "config": {
            "filters": ["SwitchFilter", "HiddenValueExtract"],
            "handler": "OutgoingChain"
        }  
    },
    {
        "name": "HiddenValueExtract",
        "type": "EntityExtractFilter",
        "config": {
            "messageType": "response",
            "target": "${exchange.hiddenValue}",
            "bindings": [
                {
                    "key": "time",
                    "pattern": "time\"\s.*value=\"(.{10})\"",
                    "template": "$1"
                },
                {
                    "key": "tokenId",
                    "pattern": "token_id\"\s.*value=\"(.{3})\"",
                    "template": "$1"
                },
                {
                    "key": "hash",
                    "pattern": "hash\"\s.*value=\"(.*)\"",
                    "template": "$1"
                }
            ]
        }       
    },
    {
        "name": "SwitchFilter",
        "type": "SwitchFilter",
        "config": {
            "onResponse": [
                {
                    "condition": "${exchange.response.status == 200}",
                    "handler": "LoginRequestHandler"
                }
            ]
        }
    },
    {
        "name": "LoginRequestHandler",
        "type": "Chain",
        "config": {
            "filters": ["LoginRequest"],
            "handler": "OutgoingChain"
        }  
    },
    {  
        "name": "LoginRequest",
        "type": "StaticRequestFilter",
        "config": {
            "method": "POST",
            "uri": "http://www.plataformaciapem.org.mx/register/",
            "form": {
                "form:mode": ["edit"],
                "form:id": ["login"],
                "__confirmed_p": ["0"],
                "__refreshing_p": ["0"],
                "return_url": ["/dotlrn/control-panel"],
                "time": ["${exchange.hiddenValue.time}"],
                "token_id": ["${exchange.hiddenValue.tokenId}"],
                "hash": ["${exchange.hiddenValue.hash}"]
                "email": ["${exchange.session.userName}"],
                "password": ["${exchange.session.password}"],
            }
            "headers": {
                "cookie": ["${exchange.response.headers['Set-Cookie'][0]}"],
            }  
        }  
    },
    {
        "name": "OutgoingChain",
        "type": "Chain",
        "config": {
            "filters": ["CaptureFilter"],
            "handler": "ClientHandler"
        }  
    },
    {  
        "name": "CaptureFilter",
        "type": "CaptureFilter",
        "config": {
            "captureEntity": false,
            "file": "/tmp/gateway.log",
        }      
    },
    {
        "name": "ClientHandler",
        "comment": "Responsible for sending all requests to remote servers.",
        "type": "ClientHandler",
        "config": {
            }
        }
    ]
  },
  "servletObject": "DispatchServlet",
} 
```

# sql-server-2008-r2 - 合并拉取订阅输出路径更改（Sql Express 2008R2）

> ID：14328470
> 
> 赞同：0
> 
> 时间：2013-01-14T23:06:54.947
> 
> 标签：sql-server-2008-r2, replication, sql-server-express, merge-replication

我有一个合并复制，其中拉订阅者（Sql Express 2008R2）和 Sql Server 2008R2 作为发布者。我只想为特定订阅者打开登录以进行偶尔的调试。订户机器上的 SSMS 不是一个选项。

我知道在订阅者 ( [http://msdn.microsoft.com/en-us/library/ms187722.aspx](http://msdn.microsoft.com/en-us/library/ms187722.aspx) ) 创建合并代理时应该使用“optional_command_line”并设置“-Output”属性。

但是我已经在几个月前创建了代理并安排在同步中心，现在想编辑代理的属性——在某些订阅者机器上临时设置其输出路径和详细级别。

有没有办法做到这一点而不必重做整个订阅？这里有这样的东西（[http://support.microsoft.com/kb/312292](http://support.microsoft.com/kb/312292)），但只是他们建议的非 gui 版本。

我有哪些选择？如果没有明确指定 -Output，输出将按照这个（[http://msdn.microsoft.com/en-us/library/ms147839.aspx](http://msdn.microsoft.com/en-us/library/ms147839.aspx)）发送到“控制台”。如果我的合并计划是通过同步中心进行的，如果我没有专门指定我的日志文件，我在哪里可以找到这个记录的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:40:02.380

无法通过同步中心将代理输出到文件。您将需要从命令行按需同步，以便使用 SQL Server Express 启用详细代理日志记录到文件。要从命令行运行合并代理，请从 COM 文件夹执行 replmerg.exe。它看起来像这样：

![在此处输入图像描述](../Images/b2ace3f1c3a3318f0726c4dcac461e01.png)

此示例将详细的合并代理日志输出到*C:\TEMP\mergeagent.log*。您将需要根据您的环境更新 replmerg.exe 参数值。

# python - 获取日期作为数组

> ID：14328474
> 
> 赞同：2
> 
> 时间：2013-01-14T23:07:15.327
> 
> 标签：python, date

> **可能重复：**
> [在 Python 中遍历一系列日期](https://stackoverflow.com/questions/1060279/iterating-through-a-range-of-dates-in-python)

我有一个方法可以传入开始日期和结束日期。最终结果是我想要开始日期和结束日期之间的所有日期作为列表。例如，如果开始日期是 '2013-01-01' 而结束日期是 '2013-01-04' 那么 ['2013-01-01','2013-01-02','2013-01-03 ','2013-01-04'] 应该返回。我可以做类似下面的事情。但想知道是否有一种我没有考虑过的简单方法

```
year = int(startdate.split('-')[0])
month = int(startdate.split('-')[1])
day = int(startdate.split('-')[2]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:17:14.313

```
>>> from datetime import datetime, timedelta
>>> starttime = datetime.strptime('2013-01-01', '%Y-%m-%d')
>>> endtime = datetime.strptime('2013-01-04', '%Y-%m-%d')
>>> [starttime + timedelta(days=i) for i in range((endtime - starttime).days + 1)]
[datetime.datetime(2013, 1, 1, 0, 0), datetime.datetime(2013, 1, 2, 0, 0), datetime.datetime(2013, 1, 3, 0, 0), datetime.datetime(2013, 1, 4, 0, 0)]
>>> list(map(lambda x: x.strftime('%Y-%m-%d'), _))
['2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:14:49.517

这应该有效：

```
from datetime import datetime
from datetime import timedelta

d1 = datetime.strptime('2013-01-01', '%Y-%m-%d')
d2 = datetime.strptime('2013-01-04', '%Y-%m-%d')

[d1 + timedelta(days=x) for x in range(0, (d2 - d1).days + 1)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:29:11.677

我会去：

```
from dateutil import parser as dateparser
from dateutil.rrule import rrule, DAILY

sd = dateparser.parse('2013-01-01')
ed = dateparser.parse('2013-01-04')

dates = (rrule(DAILY, sd, until=ed))
fmt = '{:%Y-%m-%d}'
print map(fmt.format, dates)
# ['2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04'] 
```

# php - Auth.net 捕获问题

> ID：14328475
> 
> 赞同：29
> 
> 时间：2013-01-14T23:07:19.087
> 
> 标签：php, magento, payment-gateway, authorize.net

我在 auth.net 上捕获交易的功能是

```
public function capture(Varien_Object $payment, $amount){

    if(!$this->isEnabled()){
        return parent::capture($payment, $amount);
    }else{

        $captureCase = $_POST['invoice']['capture_case'];
        if(isset($captureCase) && $captureCase == "online"){
            if($capOrderid = $payment->getOrder()->getIncrementId()){

                $capOrder = $payment->getOrder();
                $capPayment = $payment;
                $capAmount = $amount;

                $capTransID = $capPayment->getLastTransId();

                $ccProfile = $this->getProfileForOrder($capOrderid);
                if(isset($ccProfile['used_this_profile']) && $ccProfile['used_this_profile'] == 1){

                    $pID = $ccProfile['cust_profile_id'];
                    $ppID = $ccProfile['cust_paymentprofile_id'];
                    $nick = $ccProfile['nickname'];

                    $lastOrderId = $capOrder->getIncrementId();

                    $cvv = $payment->getCcCid();
                    $directResponseFields = $this->createTransaction($pID,$ppID,$capAmount,$lastOrderId,"profileTransPriorAuthCapture",$cvv,$capTransID);
                    $responseCode = $directResponseFields[0]; // 1 = Approved 2 = Declined 3 = Error
                    $responseReasonCode = $directResponseFields[2]; // See http://www.authorize.net/support/AIM_guide.pdf
                    $responseReasonText = $directResponseFields[3];
                    $approvalCode = $directResponseFields[4]; // Authorization code
                    $transId = $directResponseFields[6];

                    switch ($responseCode) {
                        case "1":
                            $capPayment->setStatus(self::STATUS_APPROVED);
                            $capPayment->setCcTransId($transId);
                            $capPayment->setLastTransId($transId);
                            if (!$capPayment->getParentTransactionId() || $transId != $capPayment->getParentTransactionId()) {
                                $capPayment->setTransactionId($transId);
                            }
                            return true;
                            break;
                        case "2":
                            Mage::throwException(__('Payment authorization transaction has been declined.'));
                            break;
                        default:
                            Mage::throwException(__('Payment authorization error.'));
                            break;
                    }

                }

            }

        }elseif(!isset($captureCase)){
            $oldorderid = Mage::getModel('adminhtml/sales_order_create')->getSession()->getOrder()->getIncrementId();

            if(isset($oldorderid) && ($oldorderid != $payment->getOrder()->getIncrementId())){ // if order is created from admin and has an order to refund first.
                $oldOrder = Mage::getModel('sales/order')->loadByIncrementId($oldorderid);
                $oldPayment = $oldOrder->getPayment();
                $oldAmount = $oldPayment->getAmountOrdered();

                $transID = $oldPayment->getLastTransId();

                $ccProfile = $this->getProfileForOrder($oldorderid);
                if(isset($ccProfile['used_this_profile']) && $ccProfile['used_this_profile'] == 1){

                    $pID = $ccProfile['cust_profile_id'];
                    $ppID = $ccProfile['cust_paymentprofile_id'];

                    if($directResponseFields = $this->refundCIM($pID,$ppID,$transID,$oldorderid,$oldAmount)){

                        $responseCode = $directResponseFields[0]; // 1 = Approved 2 = Declined 3 = Error
                        $responseReasonCode = $directResponseFields[2]; // See http://www.authorize.net/support/AIM_guide.pdf
                        $responseReasonText = $directResponseFields[3];
                        $approvalCode = $directResponseFields[4]; // Authorization code
                        $transId = $directResponseFields[6];
                        switch ($responseCode) {
                            case "1":

                                //$oldPayment->setStatus(self::STATUS_SUCCESS);
                                $oldOrder->cancel()->save();

                                //$oldPayment->setIsTransactionClosed(1);
                                $oldOrder->setState(Mage_Sales_Model_Order::STATE_CANCELED, true)->save();
                                //$oldOrder->setState(Mage_Sales_Model_Order::STATE_CLOSED, true)->save();

                                //Mage::throwException(__("a".$responseCode));
                                //return $this;
                                break;
                            case "4":
                                Mage::throwException(__('Error Code 4\. You cannot refund an unsettled transaction.'));
                                break;
                            default:
                                if(isset($responseReasonText) && !empty($responseReasonText)){
                                    Mage::throwException(__("Code: ".$responseReasonCode." - ".$responseReasonText));
                                }else{
                                    Mage::throwException(__('Error in refunding the payment. This can happen if the customer has deleted their profile from CIM.'));
                                }
                                break;
                        }
                    }

                }else if(isset($transID) && $oldAmount > 0) {

                    $oldPayment->setAnetTransType(self::REQUEST_TYPE_CREDIT);
                    $oldRequest = $this->_buildRequest($oldPayment);

                    $oldRequest->setXTransId($transID);

                    $oldPayment->setXAmount($oldAmount,2);  
                    $oldRequest->setXCurrencyCode($oldOrder->getBaseCurrencyCode());
                    $oldRequest->setXCardNum($oldPayment->getCcLast4());

                    $oldResult = $this->_postRequest($oldRequest);

                    if ($oldResult->getResponseCode()==self::RESPONSE_CODE_APPROVED) {
                        $oldPayment->setStatus(self::STATUS_SUCCESS);
                        $oldOrder->cancel()->save();
                    }else{
                        Mage::throwException($this->_wrapGatewayError($oldResult->getResponseReasonText())); //////////error here/////////

                    }
                }else{
                    Mage::throwException(Mage::helper('authnet')->__('Error in refunding the payment.'));
                }
            }
        }

        $quote = Mage::getSingleton('customer/session');
        $nickname = $quote->getAuthorizenetNickname();
        $profile = $quote->getProfile();
        $postedNickname = $quote->getNickname();

        if(!isset($nickname) || $nickname == "" || $nickname == "nnnew"){

            if ($amount <= 0) {
                Mage::throwException(Mage::helper('authnet')->__('Invalid amount for authorization.'));
            }

            if ($payment->getCcTransId()) {
                $payment->setAnetTransType(self::REQUEST_TYPE_PRIOR_AUTH_CAPTURE);
            } else {
                $payment->setAnetTransType(self::REQUEST_TYPE_AUTH_CAPTURE);
            }

            $payment->setAmount($amount);

            $request= $this->_buildRequest($payment);
            $result = $this->_postRequest($request);

            if ($result->getResponseCode() == self::RESPONSE_CODE_APPROVED) {
                $payment->setStatus(self::STATUS_APPROVED);
                $payment->setCcTransId($result->getTransactionId());
                $payment->setLastTransId($result->getTransactionId());
                if (!$payment->getParentTransactionId() || $result->getTransactionId() != $payment->getParentTransactionId()) {
                    $payment->setTransactionId($result->getTransactionId());
                }
                if(isset($profile) && $profile == "save"){
                    $order = $payment->getOrder();
                    $billing = $order->getBillingAddress();

                    $ccno = $payment->getCcNumber();
                    $exp = sprintf('%04d-%02d', $payment->getCcExpYear(), $payment->getCcExpMonth());
                    $cvv = $payment->getCcCid();
                    $email = $order->getCustomerEmail();
                    $orderId = $order->getIncrementId();

                    if($profiles = $this->getCustId($email)){
                        foreach ($profiles as $_nickname => $cust_profile_id){
                            if($_nickname == $postedNickname){
                                Mage::throwException(__('Nickname already in use.')); 
                            }
                        }
                        $profileId = $cust_profile_id;
                    }else{
                        $profileId = $this->createProfile($payment,true);
                    }
                    if($profileId && $profileId != 1){
                        $ppId = $this->createPaymentProfile($billing,$profileId,$ccno,$exp,$postedNickname,$email,$cvv,true);
                        $this->assignNicknameToOrder($orderId,$profileId,$ppId,$postedNickname,0);
                    }
                }   

                return $this;
            }

            if ($result->getResponseReasonText()) {
                Mage::throwException($this->_wrapGatewayError($result->getResponseReasonText()));
            }
                Mage::throwException(Mage::helper('paygate')->__('Error in capturing the payment.'));

        }else if($nickname != "" && $nickname != "nnnew"){

            $selectedNickname = $nickname;

            $conn_selected = $this->conn();
            $results_selected = $conn_selected->query("SELECT * FROM ".$this->getTable()." WHERE cust_paymentprofile_id = '".$selectedNickname."'");
            while ($row = $results_selected->fetch() ) {
                $pID = $row['cust_profile_id'];
                $nick = $row['nickname'];
            }
            $ppID = $selectedNickname;
            $order = $payment->getOrder();
            $lastOrderId = $order->getIncrementId();

            $cvv = $payment->getCcCid();
            $directResponseFields = $this->createTransaction($pID,$ppID,$amount,$lastOrderId,"profileTransAuthCapture",$cvv);
            $responseCode = $directResponseFields[0]; // 1 = Approved 2 = Declined 3 = Error
            $responseReasonCode = $directResponseFields[2]; // See http://www.authorize.net/support/AIM_guide.pdf
            $responseReasonText = $directResponseFields[3];
            $approvalCode = $directResponseFields[4]; // Authorization code
            $transId = $directResponseFields[6];

            switch ($responseCode) {
                case "1":
                    $payment->setStatus(self::STATUS_APPROVED);
                    //$payment->setCcTransId($result->getTransactionId());
                    $payment->setLastTransId($transId);
                    if (!$payment->getParentTransactionId() || $transId != $payment->getParentTransactionId()) {
                        $payment->setTransactionId($transId);
                    }
                    $this->assignNicknameToOrder($lastOrderId,$pID,$ppID,$nick,1);
                    return true;
                    break;
                case "2":
                    Mage::throwException(__('Payment authorization transaction has been declined.'));
                    break;
                default:
                    Mage::throwException(__('Payment authorization error.'));
                    break;
            }
        }
        Mage::throwException(Mage::helper('paygate')->__('Error in capturing the payment.'));
    }
} 
```

当我尝试获取已授权的金额时，问题随机出现。我的交易请求转储是

```
[request] => Array
        (
            [x_version] => 3.1
            [x_delim_data] => True
            [x_relay_response] => False
            [x_test_request] => FALSE
            [x_login] => ****
            [x_tran_key] => ****
            [x_type] => PRIOR_AUTH_CAPTURE
            [x_method] => CC
            [x_invoice_num] => dummy
            [x_amount] => 127.48
            [x_currency_code] => USD
            [x_trans_id] => 
            [x_first_name] => dummy
            [x_last_name] => dummyl
            [x_company] => 
            [x_address] => dummy Apt 67
            [x_city] => dummy
            [x_state] => California
            [x_zip] => dummy
            [x_country] => US
            [x_phone] => dummy
            [x_fax] => 
            [x_cust_id] => 
            [x_customer_ip] => 68.183xxxxx8
            [x_customer_tax_id] => 
            [x_email] => abc@aol.com
            [x_email_customer] => 0
            [x_merchant_email] => 
            [x_ship_to_first_name] =>dummy
            [x_ship_to_last_name] => dummy
            [x_ship_to_company] => 
            [x_ship_to_address] => dummy Blvd.
            [x_ship_to_city] => dummy
            [x_ship_to_state] => dummy
            [x_ship_to_zip] => dummy
            [x_ship_to_country] => US
            [x_po_num] => 
            [x_tax] => 0.0000
            [x_freight] => 0.0000
        ) 
```

响应是

```
[result] => Array
        (
            [response_code] => 3
            [response_subcode] => 2
            [response_reason_code] => 33
            [response_reason_text] => A valid referenced transaction ID is required.
            [approval_code] => 
            [avs_result_code] => P
            [transaction_id] => 0
            [invoice_number] => 100dddd38
            [description] => 
            [amount] => 127.48
            [method] => CC
            [transaction_type] => prior_auth_capture
            [customer_id] => 
            [md5_hash] => dummy
            [card_code_response_code] => 
            [c_av_vresponse_code] => 
            [split_tender_id] => 
            [acc_number] => 
            [card_type] => 
            [requested_amount] => 
            [balance_on_card] => 
        ) 
```

我注意到`Transaction ID`在我的请求中丢失了，Auth.net 开发人员网站说同样的..有时订单被捕获，但大多数时候，他们没有..我还注意到成功捕获和不成功捕获，交易 ID 都存在在 Magento 中（我可以在管理面板中查看它，看到[这个](http://awesomescreenshot.com/0e0sz0wba)

当我尝试通过 mag admin 创建发票和捕获交易时，出现错误

**网关错误：需要有效的引用事务 ID。**

我想知道为什么会发生这种情况..有人可以帮助我>？任何想法？

我的盘子形式是 Magento Enterprise (1.12.x)，我想要工作的扩展是 Elayers（我没有购买它，为某人工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T05:39:00.233

当您在使用的 Magento 版本中加载模型时，TransctionID 被隐藏。尝试在加载模型时使用 ->addFieldToSelect('transaction_id') 。这样做的原因是因为它是一个受保护的数据属性，永远不应该按照您在此处尝试的方式直接处理。

或者，您确实应该使用 Magento 从销售订单模型创建发票的能力。

```
$order = Mage::getModel('sales/order');
$service = Mage::getModel('sales/service_order' , $order);
$service->prepareInvoice(); 
```

prepareInvoice 接受一个可选数组（'sku' => 'qty'）

这使得管理每个订单多张发票的可能性变得容易。

# iphone - CGContextDrawImage + CGContextClipToMask 性能

> ID：14328480
> 
> 赞同：0
> 
> 时间：2013-01-14T23:07:49.383
> 
> 标签：iphone, ios, ipad, core-graphics, quartz-graphics

我正在使用 CGContextDrawImage 并且对性能不满意。

这是我的情况：

我有一个 CGImage，它是从具有 kCGBitmapByteOrder32Big 和 kCGImageAlphaPremultipliedLast 的 CGBitmapContext 创建的，并且包含 RGBA 像素。大小为 64x64 像素。

我有另一个用 kCGBitmapByteOrder32Big 和 kCGImageAlphaPremultipliedLast 创建的 CGBitmapContext，但是这个位图上下文要大得多，在我的例子中是 1200x1600 像素。

我正在尝试沿用户绘制的路径标记图像（使用 CGContextDrawImage 和正常混合模式）。每次标记之前，我都会调用 CGContextClipToMask 以确保下次绘制时，图像被裁剪到某个蒙版（由用户选择，例如可以是圆形、星形、三角形等）。在我的 iPhone 4S 上的整个用户界面变得完全没有响应之前，我似乎无法每秒标记超过 5 到 10 次。除非我真的很慢地拖动手指，否则渲染速度会非常慢。

我可以增加图章之间的间距，但是如果我使用远高于 1 或 2 像素的间距，情况会很糟糕，因此我想将每个图章之间的间距保持在 1 像素左右。

我已经分析了我的应用程序，并且 90% 的 CPU 时间都花在了来自 CGContextDrawImage 调用的 Apple 代码中。我也阅读了有关 Quartz2D 性能的所有 Apple 文档。

还有什么我可以尝试使用 Core Graphics / Quartz2D 来加快速度吗？如果可能的话，我宁愿不要下拉到 OpenGL，但可能没有其他选择......

如果我注释掉应用掩码的行，性能就不错了。

哦，由于公司政策，我不能发布代码，对不起...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T23:42:49.117

这是由在同一上下文中堆叠掩码引起的。通过保存/恢复每个掩码之间的状态，性能要好得多。

# ios - MPMoviePlayer 播放视频流时如何访问原始视频数据

> ID：14328483
> 
> 赞同：2
> 
> 时间：2013-01-14T23:08:16.700
> 
> 标签：ios, metadata, mpmovieplayer

我正在使用 MPMoviePlayerController 播放视频流。因为在原始数据中嵌入了一些元数据，我需要解析出来，所以我需要找到一种方法来访问原始视频数据。有谁知道这样做的方法？嵌入的元数据没有 ID3 标记，所以我不能使用内置的元数据功能来检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-21T05:47:19.333

回答我自己的问题。使用 Apple 的 MPMoviePlayerController 或 AVFoundation 框架无法解析除 ID3 标签之外的任何格式的元数据。如果需要，您将不得不使用 3rd 方视频播放器。

# java - 如何使用 RabbitMQ 和 nodejs 运行独立的 java

> ID：14328485
> 
> 赞同：1
> 
> 时间：2013-01-14T23:08:31.627
> 
> 标签：java, node.js, rabbitmq, amqp

我一直在努力将 node.js 放在我们的 java webserver 前面，以利用 node 的异步处理——做一些轻量级的处理和其他任务，最终是 socket.io。该应用程序的大部分实际工作都是在 java 中完成的，到目前为止，我们一直在使用 jetty 网络服务器来处理所有请求。我最初一直在考虑使用 node-http-proxy 来转发（可能是修改过的请求）。经过进一步考虑，我意识到我可以使用 RabbitMQ 和 node-amqp 库之类的东西来实现更健壮的通信协议，而不是转发 http 请求。这也将更好地支持从 java 通过 node 和 socket.io 推送回浏览器。

我的问题是：现在使用节点处理所有传入请求，是否有任何理由继续在码头内运行 java？如果不是，我是否应该从命令行的 main 方法中直接运行 java 代码？最后，这种方法是否存在重大缺陷？

我们的应用程序是一个单页应用程序，除了最初加载页面的第一个请求之外，所有进一步的调用都只是 restful json 调用，并且应该很容易通过 amqp 传输。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T02:14:59.453

根据使用情况，使用 Jetty 或 Tomcat 作为 java 程序容器没有任何优势。Jetty 或 Tomcat 的优势在于接收 HTTP 请求并将其转发给 worker java 程序。但是在您的情况下，NodeJS 接收请求并转发给 MQ，**java 工作人员将主动连接到 MQ 并获取任务并在完成后发送结果**。所以最好在这里使用独立的Java。并且当请求变得很多时，当worker集群处理更多任务时，很容易启动许多独立的Java程序。NodeJS 和 MQ 可以异步缓存多个请求，Java 工作者可以同步处理它们。例如：1 个 NodeJS 服务器、1 个 MQ 服务器、3 个 Java 工作服务器。

# java - 将 Long 转换为 Integer 会引发 ClassCastException

> ID：14328490
> 
> 赞同：-1
> 
> 时间：2013-01-14T23:08:41.820
> 
> 标签：java, google-app-engine, exception, casting

我试图将 long 转换为 int，但失败了。如果这很重要，我会在 Google App Engine 的 Servlet 中使用。我已经对[post1](https://stackoverflow.com/questions/4355303/how-can-i-convert-a-long-to-int-in-java)，[post2](https://stackoverflow.com/questions/5804043/convert-long-into-integer)[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)进行了搜索，但我的日志中没有结果。指向这一行：

```
//fields
private int multiplyer;
private Map<String, Object> mappings;

//the method
        Echo.log.info("key: "+WinningSetMappingEnum.multiplyer.toString()
        +"  value: "
        +mappings.get(WinningSetMappingEnum.multiplyer.toString())
        +"  "
        +mappings.get(WinningSetMappingEnum.multiplyer.toString()).getClass().getName()
                    );//For logging

         multiplyer=(Integer)mappings.get(MappingEnum.multiplyer.toString());//PROBLEM 
```

日志：

```
com.wtsang02.deserlizeMapping: key: multiplyer value: 0 java.lang.Long
java.lang.ClassCastException: java.lang.Long cannot be cast to java.lang.Integer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:12:38.990

两者`Long`和`Integer`扩展`java.lang.Number`。

你想如何将一个类转换为另一个不直接相关的类？您可以转换的是原始值

```
 Integer i = (int) (myLong.longValue()) 
```

尽管`intValue()`在`Long`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T16:13:06.843

```
private Map<String, Object> mappings; 
```

返回一个对象。因此解决方案是

```
long l = (Long) mappings.get(WinningSetMappingEnum.multiplyer
                .toString());
        multiplyer = (int) l; 
```

# cuda - CUDA 链接错误：未解析的外部但在 *.cu 文件中指定了外部

> ID：14328491
> 
> 赞同：4
> 
> 时间：2013-01-14T23:08:43.973
> 
> 标签：cuda, gpu

使用 Cuda 5.0、VS2010

这个项目在 VS2012 中编译和链接很好，但是 VS2012 不支持 Nsight 调试所以我也在 VS2010 中开发。所以我有一个 VS2010 项目文件，但我使用相同的源代码文件（.h、.cpp、.cu、.cuh。

VS2010 build 编译一切正常，但链接报告错误与未解决的外部：

```
 Generating Code...
1>videoFuncUnThread.obj : error LNK2019: unresolved external symbol _runKernel referenced in function "void __cdecl videoFuncUnThread(int,bool,unsigned int * const)" (?videoFuncUnThread@@YAXH_NQAI@Z)
1>D:\StrApp\Viper1B_10\Viper1B_10\Debug\Viper1B_10.exe : fatal error LNK1120: 1 unresolved externals
1>
1>Build FAILED.
1> 
```

缺少的符号 runKernel 是调用设备端模块（驻留在 PTX 文件中）的主机端模块。

当我搜索所有出现的 runKernel 时，我得到 3 行：

```
filter.cu(127):                     extern "C" CUresult runKernel (int numFrames,     cudaStream_t stream, bool firstBatch, int* searchLimit) { ... } // module code 
videofuncunthread.cpp(28): extern "C" CUresult runKernel(int numFrames, cudaStream_t stream,  bool firstBatch,  int* search);  // 
videofuncunthread.cpp(137): CUresult resultKernel = runKernel( NinBatch, gStream, firstBatch, (int *)searchLimit); 
```

由于“filter.cu”编译它意味着调用行（137）与原型声明（28）一致；您还可以看到 filter.cu 中的定义与原型相同。

最后，我注意到我已经成功编译、链接和运行了 VS2010 上 cuda 5.0 示例中的示例。我已经验证我在两个项目中使用相同的 Cuda 构建规则，并且我的项目和 Cuda 示例项目之间的项目属性是相同的。

您可以提供的任何见解或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T10:07:17.127

您确定 VS2010 正在构建和链接您的 CUDA 代码吗？有关设置 VS2010 的说明，请参阅[此答案，特别是启用 CUDA 构建自定义。](https://stackoverflow.com/a/7285235/214473)另请注意，如果您`.cu`在构建自定义之前添加了文件，那么您需要将`.cu`文件的类型设置为`CUDA C/C++`（右键单击文件，*Properties*，设置*Item Type*）。

一项快速检查是对`.cu`文件进行更改并确保它正在重新编译。

# azure-storage - 在 Windows Azure Blob 存储中使用子目录

> ID：14328493
> 
> 赞同：5
> 
> 时间：2013-01-14T23:09:04.793
> 
> 标签：azure-storage, azure-blob-storage

我正在尝试将文件上传到 Windows Azure blob 存储。据我了解，您可以将文件上传到类似于子目录的内容中。我想将文件上传到 blob，以便该文件基本上驻留在`/TestContainer/subDirectory1/subDirectory2/file.png`

```
// Setup the Windows Aure blob client
CloudStorageAccount storageAccount = CloudStorageAccount.FromConfigurationSetting("BlobStorage");
CloudBlobClient client = storageAccount.CreateCloudBlobClient();

// Retrieve the TestContainer container from blob storage
CloudBlobContainer container = client.GetContainerReference("TestContainer");
if (container.CreateIfNotExist())
  container.SetPermissions(new BlobContainerPermissions { PublicAccess = BlobContainerPublicAccessType.Blob });

// Setup the blob
CloudBlob blob = container.GetBlobReference("");

// Create the meta data for the blob
NameValueCollection metadata = new NameValueCollection();
metadata["id"] = fileID.ToString();
blob.Metadata.Add(metadata);

// Store the blob 
byte[] bytes = GetFileBytes();
blob.UploadByteArray(bytes); 
```

如何上传具有目录结构的文件？[这里](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)的链接提到有一种方法可以做到这一点。但是，它并没有告诉你如何去做。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-15T15:46:04.420

有几种方法。更简单的方法是只使用`/`已经提到的@makerofthings7 字符。`CloudBlobDirectory`如果您愿意，也可以使用对象。这是一个显示两者的示例。

```
CloudBlobContainer testContainer = blobClient.GetContainerReference("testcontainer");

//Upload using a CloudBlobDirectory object
var dir = testContainer.GetDirectoryReference("UsingCloudDirectory/foo/bar/baz/");
var blobRef = dir.GetBlockBlobReference("BlobByDir.bin");

using (MemoryStream ms = new MemoryStream(new byte[] { 0x0 }))
{
    blobRef.UploadFromStream(ms);
}

//Upload using the filename without a CloudBlobDirectory
var blobRef2 = testContainer.GetBlockBlobReference("UsingBlobName/foo/bar/baz/BlobByName.bin");
using (MemoryStream ms = new MemoryStream(new byte[] { 0x0 }))
{
    blobRef2.UploadFromStream(ms);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T03:42:30.283

我相信您所要做的就是在 blob 名称中包含子目录，例如`/my/sub/directory/file.txt`

目录实际上并不存在于容器名称和由`/`文件名中的字符分隔的字符串之外。

# android - Android 服务 AIDL 数据类型

> ID：14328494
> 
> 赞同：2
> 
> 时间：2013-01-14T23:09:07.120
> 
> 标签：android, service, types, aidl

我在系统应用程序中有一个服务。我希望没有系统权限的客户端应用程序能够调用服务中的函数来执行需要系统权限的事情。由于服务在它自己的应用程序中，我使用 AIDL 为服务和客户端应用程序之间的 IPC 定义接口。

我希望制作客户端应用程序的人能够编写需要系统权限的自己的代码，并为我提供包含在我的服务中的代码。因此，我的服务将收到一个通用请求，指示将请求传递到何处以及请求本身。

由于我不知道客户端需要将哪些数据传入/传出到他们自己的代码中，因此我想使用通用接口来处理他们可能需要的任何类型的数据。我是否需要为每种数据类型在 AIDL 接口中添加一个函数：

```
void doStuff(in String inStr, out String outStr);
void doStuff(in int inInt, out int outInt); 
```

ETC...

制作我自己的可打包对象会更好吗？使用 AIDL 处理此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:45:11.600

你的问题有两个部分：

a.) 服务（指示将请求传递到何处）：

您可以获取调用者 UID，然后将其用作作业/请求指示器。

b) AIDL 类型：

默认情况下，AIDL 支持以下数据类型：

1.) Java 编程语言中的所有原始类型（例如 int、long、char、boolean 等） 2.) String 3.) CharSequence 4.) List

如果您有任何其他对象，那么您需要创建自己的可打包对象。

# ruby - 使用正则表达式获取最后一位数字

> ID：14328496
> 
> 赞同：0
> 
> 时间：2013-01-14T23:09:08.430
> 
> 标签：ruby, regex

我有一个字符串：

```
10 101/12/201209/12/2012 8 75.00 600.00 2 1RPT/136185RAMADA HOTEL & SUITES 
```

我想从字符串中获取这个值：

```
136185 
```

我尝试使用`/([^\/]*)$/`，但它返回：

```
136185RAMADA HOTEL 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:41:16.360

使用的反面`scan`是使用`split`：

```
 s = '10 101/12/201209/12/2012 8 75.00 600.00 2 1RPT/136185RAMADA HOTEL & SUITES'
    s.split(/\D+/).last # Everything that isn't a number is a separator, take the last one
    => "136185" 
```

如果规则是最后一个“/”之后的第一个数字，那么即使企业名称中有数字，这也有效：

```
 s = '10 101/12/201209/12/2012 8 75.00 600.00 2 1RPT/136185MOTEL 6'
    s.split(?/).last.to_i # => 136185 
```

请注意，“7 Seas Hotel”仍然会引起问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:22:49.953

```
str = "10 101/12/201209/12/2012 8 75.00 600.00 2 1RPT/136185RAMADA HOTEL & SUITES"

str[/\d+(?=\D*\z)/]
# => "136185" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:23:53.947

我不知道这是否是最短的解决方案，但`(\d+)\D*\Z`应该可以。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T00:40:03.427

如果号码总是六位数，请使用：

```
'10 101/12/201209/12/2012 8 75.00 600.00 2 1RPT/136185RAMADA HOTEL & SUITES'.split[6].split('/').last[0, 6]
=> "136185" 
```

任何正则表达式解决方案的潜在问题是数字 + 酒店名称可能会导致解决方案使用`\d+`返回错误值，如果酒店名称类似于`7 Seas`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T23:13:29.703

尝试

```
string[/.*\b(\d+)/,1] 
```

这在匹配一组数字之前匹配尽可能多的字符，从单词边界开始以确保贪婪`.*`不会吃掉数字组的开头。

或使用

```
string.scan(/\d+/).last 
```

这更具可读性，但不是纯正则表达式。

# sql - 结果/日期范围内的 1:1 关系

> ID：14328498
> 
> 赞同：0
> 
> 时间：2013-01-14T23:09:11.470
> 
> 标签：sql, sql-server, resultset

我试图让我的查询在我拉的范围内每天输出一行性能结果。我每天每次重复大约 10 行，结果看起来很奇怪。您能否验证我如何更改查询以将结果分解为每日阅读？抱歉给您添麻烦了……让我知道我是否应该换一种说法。

这是代码：

```
DECLARE @StartDate AS SMALLDATETIME
DECLARE @EndDate AS SMALLDATETIME

SET @StartDate = '2012-04-01'
SET @EndDate = '2012-04-30'

SET ANSI_WARNINGS OFF

SELECT
      DT.DateFull,
      --DATEPART(MM,DT.DateFull) AS Date,
      --DATENAME(MM,DT.DateFull) AS [Month],  
      E.AreaID,      
      --E.GeographicLocationID,      
      E.EmployeeID,
      ES.PeopleSoftTitleStartDate,
      QA.TopRep,
      QA.RepCount,
      CASE 
          WHEN SUM(QA.TopRep) = '0' OR SUM(RepCount) = '0'
          THEN '0'
          ELSE CAST(100*(SUM(QA.TopRep))/SUM(QA.RepCount) AS DECIMAL (8,2))
      END 'ERP',  
      QA.RepResolve,
      QA.RepResolveCount,
      CASE 
          WHEN SUM(QA.RepResolve) = '0' OR SUM(RepResolveCount) = '0'
          THEN '0'
          ELSE CAST(100*(SUM(QA.RepResolve))/SUM(QA.RepResolveCount) AS DECIMAL (8,2))
      END 'RR',
      QA.ACSNPSPromoter,
      QA.ACSNPSDetractor,
      QA.ACSNPSCount,
      CASE
          WHEN QA.ACSNPSCount = '0'
          THEN '0'
          ELSE CAST(100*(SUM(QA.ACSNPSPromoter)-SUM(QA.ACSNPSDetractor))/SUM(QA.ACSNPSCount) AS DECIMAL(8,2))
      END 'NPS',
      AHT.AHT,
      AHT.TalkTime,
      AHT.CallWorkTime,
      AHT.HandledCalls/*,
      CASE  
        WHEN (DT.DateFull Between emp.Transition_Date and emp.Month_one) 
        THEN 'First 30 Days'
        WHEN (DT.DateFull Between emp.Month_one And emp.Month_Two ) 
        THEN '30 - 60 days'
        WHEN (DT.DateFull Between emp.Month_Two And emp.Month_Three) 
        THEN '60-90 days'
        ELSE 'After Period'
      END AS Stat_Period*/

INTO #DATA              

FROM 
    dbTools.Config.vwDate AS DT WITH(NOLOCK)     

INNER JOIN 
     dbEmployee.Summary.vwEmployeeHistory AS E WITH(NOLOCK)          

ON 
    DT.datefull BETWEEN E.StartDate AND E.EndDate

LEFT JOIN
    dbEmployee.Summary.vwEmployeeSnapshot AS ES WITH(NOLOCK)
ON
    E.EmployeeID = ES.EmployeeID
    AND DT.datefull BETWEEN E.StartDate AND E.EndDate

LEFT JOIN
--ERP and Rep Resolve
(SELECT
    MONTH(StatDate) AS Mth,
    EmployeeID,
    --SUM(ACSTopRepScore)/SUM(ACSEntireRepCount) AS ERP,
    ACSTopRepScore AS TopRep,
    ACSEntireRepCount AS RepCount,
    --SUM(ACSRepResolvedScore)/SUM(ACSRepResolvedCount) AS RepResolve,
    ACSRepResolvedScore AS RepResolve,
    ACSRepResolvedCount AS RepResolveCount,
    ACSNPSPromoter AS ACSNPSPromoter,
    ACSNPSDetractor AS ACSNPSDetractor,
    ACSNPSCount AS ACSNPSCount

FROM
    dbReportSummary.ReportSummary.vwAfterCallSurvey WITH(NOLOCK)

WHERE
    StatDate BETWEEN @StartDate AND @EndDate

GROUP BY
    MONTH(StatDate),
    EmployeeID,
    ACSTopRepScore,
    ACSEntireRepCount, 
    ACSRepResolvedScore, 
    ACSRepResolvedCount,
    ACSNPSPromoter, 
    ACSNPSDetractor,
    ACSNPSCount

) AS QA

ON
    (QA.Mth IN (MONTH(DT.DateFull)))
    AND QA.EmployeeID = E.EmployeeID

LEFT JOIN
--AHT--
(SELECT 
    MONTH(StatDate) AS Mth,
    EmployeeId,
    HandledCalls AS HandledCalls,
    TalkTime AS TalkTime,
    CallWorkTime AS CallWorkTime,
    CASE
        WHEN SUM(TalkTime) + SUM(CallWorkTime) = 0 OR SUM(HandledCalls) = 0
        THEN 0.0
            ELSE (SUM(TalkTime) + SUM(CallWorkTIme))/SUM(HandledCalls)
        END 'AHT'

FROM
    dbReportSummary.ReportSummary.vwACDAgentSummary WITH(NOLOCK)

WHERE
    StatDate BETWEEN @StartDate AND @EndDate

GROUP BY
    MONTH(StatDate),
    EmployeeId,
    HandledCalls, 
    TalkTime,
    CallWorkTime

) AS AHT

ON
    (AHT.Mth IN (MONTH(DT.DateFull)))
    AND AHT.EmployeeID = E.EmployeeID

WHERE
    (DT.DateFull <=@EndDate AND DT.DateFull >=@StartDate)
    AND (E.StartDate <=@EndDate AND E.EndDate >=@StartDate)
    AND (E.PeopleSoftDepartmentFunctionID = 'CSC')
    AND E.PeopleSoftDepartmentID IN ('9030', '9080', '9355', '9040', '<<OSCCALTECH>>', '<<WDTSMO>>', '9195','<<OSVTS>>', '<<OSVTS_TCS>>','9085')
    AND E.EmployeeID IS NOT NULL
    AND (ES.PeopleSoftTitleStartDate BETWEEN DT.DateFull AND DT.DateFull + 90)

GROUP BY
        DT.DateFull,
      --DATEPART(MM,DT.DateFull),
      --DATENAME(MM,DT.DateFull), 
      E.AreaID,                                
     -- E.GeographicLocationID,       
      E.EmployeeID,
      ES.PeopleSoftTitleStartDate,
      QA.TopRep,
      QA.RepCount,
      QA.RepResolve,
      QA.RepResolveCount,
      QA.ACSNPSPromoter,
      QA.ACSNPSDetractor,
      QA.ACSNPSCount,
      AHT.AHT,
      AHT.TalkTime,
      AHT.CallWorkTime,
      AHT.HandledCalls         

SELECT
    D.DateFull,
    --Date,
    --[Month],
    D.AreaID,
    --GE.GeographicLocationDescription AS Center,           
    D.EmployeeID,
    nE.EmployeeName,
    D.PeopleSoftTitleStartDate,     
    D.TopRep,
    D.RepCount,
    D.ERP,
    D.RepResolve,
    D.RepResolveCount,
    D.RR,
    D.ACSNPSPromoter,
    D.ACSNPSDetractor,
    D.ACSNPSCount,
    D.NPS,
    D.AHT,
    D.TalkTime,
    D.CallWorkTime,
    D.HandledCalls

FROM #DATA AS D                                                        

LEFT JOIN 
    dbEmployee.Config.vwName AS nE WITH (NOLOCK)   
ON
    D.EmployeeID = nE.EmployeeID

--LEFT JOIN 
--  dbEmployee.Config.vwGeographicLocation AS GE WITH (NOLOCK)               
--ON 
--  GE.GeographicLocationID = D.GeographicLocationID              

WHERE
    (D.TopRep IS NOT NULL
    AND D.RepCount IS NOT NULL
    AND D.RepResolve IS NOT NULL
    AND D.RepResolveCount IS NOT NULL
    AND D.ACSNPSPromoter IS NOT NULL
    AND D.ACSNPSDetractor IS NOT NULL
    AND D.ACSNPSCount IS NOT NULL
    AND D.AHT IS NOT NULL
    AND D.TalkTime IS NOT NULL
    AND D.CallWorkTime IS NOT NULL
    AND D.HandledCalls IS NOT NULL
    AND D.HandledCalls <> '0' )

GROUP BY
        D.DateFull,
      --Date,
      --[Month],    
      D.AreaID,               
      --GE.GeographicLocationDescription,           
      D.EmployeeID,
      nE.EmployeeName,
    D.PeopleSoftTitleStartDate,
      D.TopRep,
      D.RepCount,
      D.ERP,
      D.RepResolve,
      D.RepResolveCount,
      D.RR,
      D.ACSNPSPromoter,
      D.ACSNPSDetractor,
      D.ACSNPSCount,
      D.NPS,
      D.AHT,
      D.TalkTime,
      D.CallWorkTime,
      D.HandledCalls

ORDER BY 
      D.DateFull ASC,
      AreaID,                   
 --     Center,           
      EmployeeName    

DROP TABLE #DATA

/*Additional Info
Tech Depts - PeopleSoftDepartmentID IN ('9030', '9080', '9355', '9040', '<<OSCCALTECH>>', '<<WDTSMO>>', '9195','<<OSVTS>>', '<<OSVTS_TCS>>')
Bilingual Tech - PeopleSoftDepartmentID = '9085'
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:52:41.590

> 每天输出一行绩效结果

一天一排的产量意味着`group by [Date]`。子句中的其他列`group by`也将导致服务器按它们分组，可能每天创建不止一行。*不过，我的猜测是，看看您的查询，您对每位员工*每天一行感兴趣（您说“rep”）。在这种情况下，您也想`group by`雇用员工。

如果您想要结果中的其他非聚合列，请稍后将它们加入。这是一个草图：

```
select A.*, E.name, ... E.col_N
from ( 
  select [Date], EmployeeID, max(foo) as x, sum(bar) as y, avg(zowie) as z
  from tablename 
  group by [Date], EmployeeID
) as A
join Employees as E
on A.EmployeeID = E.EmployeeID 
```

# python - 视频在通过 Python ftplib 上传时出现损坏

> ID：14328500
> 
> 赞同：-1
> 
> 时间：2013-01-14T23:09:25.067
> 
> 标签：python, video, ftplib

我正在尝试使用 Python 中的**ftplib**库来尝试将一些视频 FTP 到我的网站。我有一个基本“工作”的脚本，但它有一个问题。当我尝试使用 VLC 播放器播放我的视频时，它似乎已损坏，因为它只播放视频的前 15 秒（可能直到视频中的一些重要关键帧，但这可能不是重点），然后只播放音频有时继续。

奇怪的是，如果我`ls -l`在本地目录和远程目录上执行，文件大小是相同的（即使 Mac 本地计算文件大小为 75.6 MB，而 cPanel 文件管理器显示它仅为 71.2 MB） . 仔细检查，两端的 MD5 校验和也相同。但很明显，数据在服务器端并不完全正确。奇怪的是，我可能没有在我的 Python 脚本中正确打开 .mov 文件，因为我花了一点时间才将我的头脑围绕在文件和类似文件的对象上（这意味着我可能仍然错了）。

这是我当前的上传脚本：

```
#!/usr/bin/env python

import os
from ftplib import FTP

# Log in to the FTP server
ftp = FTP('campusweatherservice.com')
ftp.login('myusername', 'mypassword')

# Change directories to the intended video source
os.chdir('/Users/cws/Desktop/CNET')

f = file('cnet.mov', 'rb')         # Currently opening the file as a file object
ftp.storbinary('STOR CNET.mov', f) # We then try to store it this way

# Close our file object and then quit the FTP client
f.close()
ftp.quit() 
```

我在这里有什么想法或明显的错误吗？如果您想亲自尝试视频文件，[请访问 http://www.campusweatherservice.com/CNET/CNET.mov](http://www.campusweatherservice.com/CNET/CNET.mov)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T05:19:40.347

因此，希望您可以从对原始问题的评论中看到，这个问题是一个测试问题，而不是代码问题。

在这里学到的教训：

1.  如果您的校验和匹配，请确保您的文件实际上并不相同。与一些奇怪的边缘案例相比，这种情况的可能性要高出 1000 倍（正如我最初认为的那样）
2.  如果您在 Stack Overflow 帖子中提供了可操作的项目（例如“下载我的视频以亲自查看”），您可能应该自己测试一下。

所以我想这个问题现在至少可以作为 a) 使用 Python 通过 FTP 上传文件的参考和 b) 在 Stack Overflow 上提问的好课！

# image - 用fft过滤图像

> ID：14328502
> 
> 赞同：0
> 
> 时间：2013-01-14T23:09:38.450
> 
> 标签：image, fft, convolution

我正在尝试使用 2D FFT 将过滤器应用于图像。我有滤波器矩阵（卷积核等），但如果我想使用 fft，我需要将滤波器和图片矩阵扩展为 2 方矩阵的幂。

首先我用零扩展它（所以图片和过滤器的矩阵将在 2 矩阵的大幂次的左上角），我得到了这个结果

![简单零扩展的结果](../Images/a2a45cde86f8fcbf3b8867c95e55c5ee.png)

然后我尝试了我在应用没有 fft 的卷积时对图片矩阵所做的事情，从每侧使用滤波器维度/2 的填充图片矩阵，然后使用简单的扩展滤波器矩阵到 2 的幂矩阵的填充矩阵与 fft 和 i 进行卷积明白啦 ![带填充矩阵](../Images/280488ad94997145b11f9e7ae6d1f5dc.png)

这是原图。

![原来的](../Images/456ec09a3075b2b12dbe8e7ea7984bae.png)

关于算法：我在两个扩展矩阵上应用 2d fft，而不是在我做简单逆 fft 之后的点乘矩阵。图片矩阵也是从 0 到 16M 的数字（前 8 位是红色，第二个 8 位是绿色，第三个 8 位是蓝色）

我认为问题在于我如何将图片和滤波器矩阵扩展为 2 矩阵的平方幂，但我不确定。我测试了 fft 函数（fft 和反 fft，我得到了相同的图片（没有逐点乘法））

过滤器也是

```
 0 .2  0
.2 .2 .2
 0 .2  0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T05:18:55.383

您不需要一次全部转换图像。在子块上使用 FFT。按内核大小重叠转换后的子图像，然后丢弃环绕瞬态（重叠保存）或添加输入打开和输入关闭瞬变（重叠添加）。

在尝试二维快速卷积之前，先了解一维的[快速卷积。](http://en.wikipedia.org/wiki/Convolution#Fast_convolution_algorithms)

# c# - COM接口函数返回中的Guid对象

> ID：14328504
> 
> 赞同：2
> 
> 时间：2013-01-14T23:09:46.093
> 
> 标签：c#, .net, perl, com

我有一个 COM 接口，它具有如下所述的函数签名：

**指导** `GetGuid2()`

它在一个类中实现：

```
 public Guid GetGuid2()
    {
      return Guid.NewGuid();
    } 
```

那么这个函数需要被 Perl 使用。

```
 my $dotNetLib = 'MyCOMDLL';
    my $server = Win32::OLE->new($dotNetLib) || die "Unable to launch server\n";
    my $guid = $server->GetGuid2(); 
```

但我收到此错误：

> Win32::OLE(0.1601) 错误 0x80020005: Playground.pl 中的“类型不匹配”

我们可以在 COM 层返回 GUID 对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:07:09.937

当您需要通过 .NET 从 COM 返回 GUID 时，您需要将其转换为 Byte[] 或 String，然后将其重建为另一侧的 guid 或执行字符串比较，因为 GUID 不兼容 COM类型。

# mysql - 在查询中组合输出值

> ID：14328506
> 
> 赞同：0
> 
> 时间：2013-01-14T23:09:59.510
> 
> 标签：mysql, sql

如何结合输出值。我的查询低于`It.Finance`...假设高、中和低下的 3 个值..我想将中低结合在一起作为平均值，这意味着我的输出值可能是

高的

平均（中低）

```
select  count(h.Dept_id) as DeptCount,

i.Id as CompanyId,

i.Account as AccountTotal,

i.Technology as IT,

ISNULL(it.Finance,'NoCapacity') as School

from Institution i left join 

 History h on h.Institution_id = i.Id left join 

   xxxxx

   yyyyy      

group by i.Id,i.Account,i.Technology,it.Finance 
```

是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:21:13.170

***最佳盲猜：***

```
select  count(h.Dept_id) as DeptCount,
i.Id as CompanyId,
i.Account as AccountTotal,
i.Technology as IT,
coalesce(it.Finance,'NoCapacity') as School,
Max(it.Finance) as High, 
(Avg(it.Finance) + Min(it.Finance))/2 as Average
from Institution i left join 
History h on h.Institution_id = i.Id left join 
   xxxxx -- your unknown tables
   yyyyy -- your unknown tables     
group by i.Id, i.Account 
```

# javascript - JavaScript 中的垂直滚动菜单

> ID：14328507
> 
> 赞同：1
> 
> 时间：2013-01-14T23:10:01.650
> 
> 标签：javascript, css, html, scroll, hyperlink

有没有办法创建一个垂直滚动菜单，当你点击一个链接时，整个菜单会向上或向下移动？真的很难解释。我能找到的最好的例子是旧的 xbox nxe 仪表板。

[http://www.youtube.com/watch?v=Q2PyNpbteuU](http://www.youtube.com/watch?v=Q2PyNpbteuU)

如果您的链接在哪里（首页 - 关于 - 联系方式）并且您点击联系方式；该链接现在将在列表中居中，about 将位于顶部，home 位于下方。

家

**关于**

联系方式（比你点击联系方式）

-

关于

**接触**

家（现在看起来像这样）

-

这可能吗？使用 HTML5？CSS？Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T18:00:19.053

在这里你会发现我用 jquery 做的水平和垂直实现：

[http://codepen.io/rafaelcastrocouto/pen/kuAzl](http://codepen.io/rafaelcastrocouto/pen/kuAzl)

垂直菜单的HTML代码：

```
<nav id="vmenu">
  <section>
    <div class="active"><a>First</a></div>
    <div><a>Second</a></div>
    <div><a>One more</a></div>
    <div><a>XBox</a></div>
    <div><a>Menu</a></div>
    <div><a>Last</a></div>
  </section>
</nav> 
```

CSS：

```
#vmenu {
  border: 1px solid green;
  overflow: hidden;
  position: relative;
  padding: 5%;
}
#vmenu section {
  position: relative;
  margin-top: 10%;
  transition: top 0.5s;
}
#vmenu section div {
  float: left;
  display: inline-block;
  padding: 0; margin: 0;
  transform: scale(1);
  transition: transform 0.5s;
}
#vmenu section div.active { 
  transform: scale(1.2);
}
#vmenu section div a {
  text-align: center;
  background: #ddd;
  box-shadow: 0 0 1em #444;
  border-radius: 1em;
  display: block;
  width: 60%; height: 60%;
  padding: 10%;
  margin: 10%;
}
#vmenu section div.active a { 
  background: #ccc;
  box-shadow: 0 0 1em;  
} 
```

和 JS：

```
var size = 200;
  var count = $('#vmenu section').get(0).children.length;
  $('#vmenu').height(2 * size).width(size);  
  $('#vmenu section').height(size * count);
  $('#vmenu section div').height(size).width(size).on('click', function(){
    $('#vmenu section div').removeClass('active')
    $(this).addClass('active');
    var c = this.parentNode.children;
    var i = Array.prototype.indexOf.call(c, this);
    $('#vmenu section').css('top', i * size * -1);
  }); 
```

# ios - 合并字典 - 不兼容的类型错误

> ID：14328510
> 
> 赞同：8
> 
> 时间：2013-01-14T23:10:33.140
> 
> 标签：ios, objective-c, nsdictionary

我已经尝试合并两个 NSDictionaries 几个小时了。搜索了一下，发现可以用`[NSMutableDictionary addEntriesFromDictionary:]`。

```
 NSDictionary *areaAttributes = [[area entity] attributesByName];
    NSDictionary *gpsAttributes = [[gps entity] attributesByName];

    NSMutableDictionary *areaAttributesM = [areaAttributes mutableCopy];
    NSMutableDictionary *gpsAttributesM = [gpsAttributes mutableCopy];

    NSMutableDictionary *combinedAttributes =  [areaAttributesM addEntriesFromDictionary:gpsAttributesM]; 
```

但我得到了错误：

```
Initializing 'NSMutableDictionary *_strong' with an expression of incompatible type 'void' 
```

所以这是说`[areaAttributesM addEntriesFromDictionary:gpsAttributesM]`返回`void`？我的理解正确吗？为什么它返回无效？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T23:13:23.367

是的，你是对的。从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)：

```
- (void)addEntriesFromDictionary:(NSDictionary *)otherDictionary 
```

至于为什么，这很简单：在 Cocoa 中改变对象的函数通常返回 void，因此您可以轻松地将它们与返回不同对象的函数区分开来。

`mutableCopy`此外，`gpsAttributes`字典没有理由。它只是被用作 的参数`-[addEntriesFromDictionary:]`，它不需要是可变的。

所以，正确的做法是：

```
NSDictionary *areaAttributes = [[area entity] attributesByName];
NSDictionary *gpsAttributes = [[gps entity] attributesByName];

NSMutableDictionary *combinedAttributes = [areaAttributes mutableCopy];
[combinedAttributes addEntriesFromDictionary:gpsAttributes]; 
```

`NSDictionary`如果您经常这样做，您可能希望将其包装在一个函数（或类别中的方法）中：

```
NSDictionary *mergeDictionaries(NSDictionary *lhs, NSDictionary *rhs) {
    NSMutableDictionary *ret = [lhs mutableCopy];
    [ret addEntriesFromDictionary:rhs];
    return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T16:29:08.183

从文档中， addEntriesFromDictionary 告诉我们：

如果两个字典包含相同的键，则接收字典的该键的先前值对象将被发送一条释放消息，并且新的值对象将取代它。您需要使用 setObject 将每个对象添加到字典中。您需要遍历一个字典的键并将其添加到最终字典中。

甚至 setObject 也一样：

价值的关键。密钥被复制（使用 copyWithZone:; 密钥必须符合 NSCopying 协议）。如果字典中已经存在 aKey，则使用 anObject 代替它。字典中不能有两个相同的键。字典中的所有键都是唯一的。

如果您仍然希望在字典中具有相同的键值，则必须使用不同的键。

例如，您有两个具有以下值的字典：

```
NSDictionary *dict1=@{@"hello":@"1",@"hello2" :@"2"};
NSDictionary *dict2=@{@"hello":@"1",@"hello2":@"2",@"hello3":@"1",@"hello6":@"2",@"hello4":@"1",@"hello5" :@"2"};

 NSMutableDictionary *mutableDict=[NSMutableDictionary dictionaryWithDictionary:dict1];
    for (id key in dict2.allKeys){
        for (id subKey in dict1.allKeys){
            if (key==subKey) {
                [mutableDict setObject:dict2[key] forKey:[NSString stringWithFormat:@"Ext-%@",key]];
            }else{
                [mutableDict setObject:dict2[key] forKey:key];
            }
        }
    } 
```

在此循环结束时，您的新可变字典将具有以下键值：

```
{
    "Ext-hello" = 1;
    "Ext-hello2" = 2;
    hello = 1;
    hello2 = 2;
    hello3 = 1;
    hello4 = 1;
    hello5 = 2;
    hello6 = 2;
} 
```

如您所见，hello 和 hello2 键被重命名为 Ext-hello1、Ext-hello2。形成 dict1，并且您仍然将所有 dict2 值添加到可变 dict 中。

如果您不想添加新键，则可以将值添加到 arrya 并将该数组添加到字典中。您可以将 for 循环修改为：

```
for (id key in dict2.allKeys){
    for (id subKey in dict1.allKeys){
        if (key==subKey) {
            NSMutableArray *myArr=[[NSMutableArray alloc]init];
            [myArr addObject:dict1[subKey]];
            [myArr addObject:dict2[key]];
            [mutableDict setObject:myArr forKey:key];
        }else{
            [mutableDict setObject:dict2[key] forKey:key];
        }
    }
} 
```

现在您将值合并到一个数组中：

```
{
    hello =     (
        1,
        1
    );
    hello2 = 2;
    hello3 = 1;
    hello4 = 1;
    hello5 = 2;
    hello6 = 2;
} 
```

这样，键的数量将相同，并且相同键的值将作为数组添加。

# java - bind 编译但不被调用

> ID：14328514
> 
> 赞同：0
> 
> 时间：2013-01-14T23:10:54.810
> 
> 标签：java, bind, javafx

我正在尝试将我的打印方法绑定到 xProperty() `(print().bind(scene.xProperty());)`。它运行一次，但是当调用 xProperty 时，我的方法不会再次被调用。我如何让它多次调用。

```
public DoubleProperty print(){
    System.out.println("print");
    DoubleProperty dp = new DoubleProperty(){
        public void removeListener(ChangeListener cl){}
        public void removeListener(InvalidationListener cl){}
        public void addListener(ChangeListener cl){}
        public void addListener(InvalidationListener cl){}
        public double get(){return 10;}
        public String getName(){return "";}
        public Object getBean(){return new Object();}
        public boolean isBound(){return true;}
        public void unbind(){}
        public void bind(ObservableValue observable){}
        public void set(double d){}
    };
    return dp;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:06:44.813

我不确定您在此处寻找的确切内容，但与其从头开始实现您自己的 DoubleProperty（例如，您的实现缺少对侦听器的正确处理），我建议您使用[SimpleDoubleProperty](http://docs.oracle.com/javafx/2/api/javafx/beans/property/SimpleDoubleProperty.html)作为基础。

例如：

```
public class Bean {
    private DoubleProperty print;
    public DoubleProperty printProperty(){
        if (print == null)
            print = new SimpleDoubleProperty(this, "print");
        return print;
    }
 } 
```

现在，您可以绑定到 print 属性并在其上注册您自己的侦听器。

# javascript - 此 Javascript 代码中的“范围”和“上下文”不同

> ID：14328519
> 
> 赞同：9
> 
> 时间：2013-01-14T16:59:18.560
> 
> 标签：javascript

我在我的 Javascript 代码中使用了这个基本的事件系统，并试图为我的同事记录它。我不太确定这段代码中的“范围”和“上下文”有什么区别。谁能帮我理解为什么我什至都需要它们？

```
this.myClass.prototype.on = function (type, method, scope, context) {
    var listeners, handlers, scope;
    if ( !(listeners = this.listeners) ) {
        listeners = this.listeners = {};
    }

    if ( !(handlers = listeners[type]) ) {
        handlers = listeners[type] = [];
    }

    scope = (scope ? scope : window);
    handlers.push({
        method: method,
        scope: scope,
        context: (context ? context : scope)
    });
}

this.myClass.prototype.trigger = function(type, data, context) {
    var listeners, handlers, i, n, handler, scope;
    if (!(listeners = this.listeners)) {
        return;
    }
    if (!(handlers = listeners[type])){
        return;
    }
    for (i = 0, n = handlers.length; i < n; i++){
        handler = handlers[i];
        if (context && context !== handler.context) continue;
        if (handler.method.call(
            handler.scope, this, type, data
        )===false) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-14T17:56:13.420

这段代码不必要地令人困惑。`context`和一词`scope`用于表示错误的事物。首先，让我解释一下它们对每个 JavaScript 开发人员应该意味着什么：

函数的**上下文**是该函数的值`this`——即作为方法调用该函数的对象。

```
function F() { this.doSomething('good'); } 
```

您可以在不同的上下文中调用此函数，如下所示：

```
obj1 = { doSomething: function(x) { console.log(x); } }

obj2 = { doSomething: function(x) { alert(x); } }

F.call(obj1);
F.call(obj2); 
```

有许多强大的编程模式由此产生。函数绑定（下划线`bind`或 jQuery `proxy`）就是一个例子。

**另一方面，**范围定义了 JavaScript 在运行时解析变量的方式。**JavaScript中~~只有两个~~四个作用域——全局作用域、函数作用域、块作用域和模块作用域。此外，它还处理使闭包成为可能的称为“作用域链”的东西。**

 *** * *

您的`on`方法保存变量`scope`，然后在`trigger`函数中将其用作上下文，这令人困惑（它不应该被命名`scope`——它是上下文）：

```
handler.method.call(
    handler.scope, this, type, data
) 
```

而且我不知道`this`上面的电话是什么。

该`on`方法还接受一个`context`默认为提供`scope`的，以防万一`context`是假的。然后`context`使用它来过滤要调用的函数`trigger`。

```
context !== handler.context 
```

这使您可以通过将处理程序与任意对象（它们称为`context`）关联来对处理程序进行分组，然后只需指定`context`.

同样，我认为这段代码过于复杂，本可以用更简单的方式编写。但是，你不应该首先像这样编写自己的事件发射器——每个库都准备好供你使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-10-30T05:22:59.573

范围与变量的可见性有关，上下文是指在其中执行函数的对象。

**作用域**：在 JavaScript 中，作用域是通过使用函数来实现的。当您在函数内部使用关键字“var”时，您正在初始化的变量是私有的，并且在该函数之外无法看到。但是，如果这个函数内部有函数，那么那些“内​​部”函数可以“看到”那个变量；该变量被称为“范围内”。函数可以“看到”在它们内部声明的变量。他们还可以“看到”任何在其外部声明的内容，但不能“看到”在嵌套在该函数中的函数内部声明的内容。这是 JavaScript 中的作用域。

**上下文**：它指的是在其中执行函数的对象。当您使用 JavaScript 关键字“this”时，该词指的是函数正在其中执行的对象。**

# git - Git - 我在哪里可以找到一些关于如何使用 Git 做稍微复杂的事情的练习？

> ID：14328522
> 
> 赞同：0
> 
> 时间：2013-01-14T23:11:23.140
> 
> 标签：git

我想学习如何使用 Git 进行更复杂的操作。目前我使用 GitHub，我可以：

1.  克隆存储库
2.  初始化一个新的存储库
3.  从存储库中添加和删除文件
4.  提交
5.  推送提交

每当事情变得稍微复杂一点时，我就会发现自己很快就感到无法理解。

阅读教程和书籍所提供的帮助不如实际进行实验。有谁知道我可以在 Git 中运行更复杂操作的练习的网站，例如合并和回滚更改以及使用多个分支等等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:23:54.430

由于您使用的是 GitHub，请查看[https://github.com/grayghostvisuals/Practice-Git](https://github.com/grayghostvisuals/Practice-Git)。它链接到六种学习资源，仅用于您所描述的玩耍。

[挑战](http://try.github.com/levels/1/challenges/1)部分似乎正是您想要的指导练习类型，尽管它是基于浏览器的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:27:25.700

学习 git 的一些资源包括：

*   [Github 官方教程](http://learn.github.com/p/intro.html)
*   [Github 挑战](http://try.github.com/levels/1/challenges/1)
*   [git ready 的 Github 提示和技巧](http://gitready.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T01:15:21.033

Stackoverflow.com .. 不，这不是玩笑。我将通过计票来解决这里的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T00:17:19.573

[Pro Git](http://www.git-scm.com/book)是对 git 的恰到好处*的*介绍。它通过一个命令一个命令地遍历几乎每天使用的 git 的每个方面。有很多图表可以与命令一起使用。因此，在您自己的存储库中，这是一本很棒的书。

唯一的缺点是您必须创建存储库并将其设置为本书开始时的形状，但早期的说明为您准备好以后的说明。

有许多描述个人行动的网站和博客，以及采取这些行动所需的步骤。Stack Overflow 上也有许多问题的答案，提供了分步说明。

确保不只是阅读步骤的最佳方法；建立一个小型存储库并跟随。你很快就会变得精通。

# python - Django - 带有“if x in list”的模板不起作用

> ID：14328525
> 
> 赞同：7
> 
> 时间：2013-01-14T23:11:36.697
> 
> 标签：python, django

我有一个看起来像这样的 Django 模板：

```
{% if thing in ['foo', 'bar'] %}
    Some HTML here
{% else %}
    Some other HTML
{% endif %} 
```

问题是它空着回来。如果我切换到这个：

```
{% if thing == 'foo' or thing == 'bar' %}
    Some HTML here
{% else %}
    Some other HTML
{% endif %} 
```

它工作正常。有什么原因你不能`x in list`在 Django 模板中使用吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T23:14:32.413

你可以。但是您不能在模板中使用列表文字。在视图中生成列表，或者避免使用`if ... in ...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T17:41:33.583

我得到了[这个](https://stackoverflow.com/a/11279231/4157431)答案的帮助。我们可以用来`split`在模板本身内部生成一个列表。我的最终代码如下（我想同时排除`"user"`和`"id"`）

```
 {% with 'user id' as list %}
        {% for n, f, v in contract|get_fields %}
        {% if n not in list.split %}
        <tr>
            <td>{{f}}</td>
            <td>{{v}}</td>
        </tr>
        {% endif %}
        {% endfor %}
        {% endwith %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-04T18:28:01.553

从视图中的上下文数据发送列表。

视图.py：

```
class MyAwesomeView(View):
    ...
    def get_context_data(self, **kwargs):
        context = super().get_context_data(**kwargs)
        context['list'] = ('foo', 'bar')
        ...
        return context 
```

我的模板.html：

```
{% if thing in list %}
    Some HTML here
{% else %}
    Some other HTML
{% endif %} 
```

在 Django 版本 3.2.3 上测试。

# haxe - 使用 NME 3.5.3 时如何指定输出目录

> ID：14328529
> 
> 赞同：0
> 
> 时间：2013-01-14T23:11:47.370
> 
> 标签：haxe, nme

我刚刚将 NME 升级到 3.5.3，看起来编译后的文件总是在相对于主源文件的名为“bin”的目录中结束。在我的 nmml 文件中，我有这样一行：

```
 <set name="BUILD_DIR" value="/path/to/output/dir" /> 
```

该行指定了输出文件在以前版本的 NME 中结束的位置。现在是怎么做的？我发现的关于如何编写 .nmml 文件的唯一参考文档位于[http://www.nme.io/developers/documentation-old/nmml-project-files/](http://www.nme.io/developers/documentation-old/nmml-project-files/)由于网址说`documentation-old`我怀疑它不是最新的了。该文档是否有最新版本？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T10:10:15.140

这似乎已在 3.5.4 版本中修复

# jquery - jQuery + Grails

> ID：14328532
> 
> 赞同：0
> 
> 时间：2013-01-14T23:11:54.357
> 
> 标签：jquery, grails

我正在尝试在带有 jquery 插件 v1.8.0 的 grails 2.1.1 应用程序中使用 jquery。

我的 .js 文件位于“web-app/js/”中

我的视图标题是

```
<head>
<g:javascript library="jquery" plugin="jquery"/>
<g:javascript src="dataFeed.js"/> 
```

这有效：

```
alert("hello"); 
```

这不会：

```
$(document).ready(function(){
    alert("help");
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T10:36:27.987

这是我在 grails 2.4.x 中的 jquery 和 jquery-ui 设置

从 jqueryui 网站获取 css 和 js 文件并将它们放入 grails-app/assets

```
<asset:stylesheet src="application.css"/>  
<asset:javascript src="application.js"/>    

<!-- jquery-ui assets -->
<asset:javascript src="jquery-1.9.0.min.js"/>   
<asset:javascript src="bootstrap.min.js"/>   
<asset:javascript src="jquery-ui-1.10.0.custom.min.js"/>   
<asset:javascript src="google-code-prettify/prettify.js"/>   
<asset:javascript src="docs.js"/>   
<asset:javascript src="demo.js"/>   
<asset:stylesheet src="bootstrap.min.css"/> 
<asset:stylesheet src="docs.css"/> 
<asset:stylesheet src="jquery-ui-1.10.0.custom.css"/> 
<asset:stylesheet src="font-awesome.min.css"/> 
<asset:stylesheet src="style.min.css"/> 

<!-- datatable assets -->
<asset:javascript src="jquery.js"/> 
<asset:javascript src="jquery-ui.js"/> 
<asset:javascript src="jquery.dataTables.js"/>  
<asset:stylesheet src="jquery.dataTables.css"/> 
```

# java - 移植时理解与翻译

> ID：14328533
> 
> 赞同：-3
> 
> 时间：2013-01-14T23:11:55.463
> 
> 标签：java, c++, porting

我正在将一个项目从 C++ 移植到 Java，这件事一直困扰着我。我无法 100% 理解代码，有时我需要妥协并将其翻译成 Java，而不了解它的作用。请让我知道您对此的想法，您是如何处理的？我猜你不可能知道这一切，也许没关系？

感谢您对这个第一次搬运工的任何建议：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:18:55.750

您不必 100% 了解要移植的代码，但您应该 100% 了解代码试图做什么。这样，您可以在移植过程中编写单元和集成测试，确保一切按预期工作。通过为 C++ 代码编写单元测试，然后编写 Java 单元测试，然后移植它，这也是了解 C++ 的好机会。冲洗并重复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T23:19:56.733

如果您不了解它在做什么，您希望如何生成工作代码？Java 和 C++ 在外观相似的代码工作方式上可能存在细微差别。我认为您确实需要花时间完全理解代码在做什么，而不是复制粘贴到 Java 中并修复语法差异。

# script# - 将 ScriptSharp 从 0.7.4 升级到 0.7.6 会引发“getField is not defined”错误

> ID：14328534
> 
> 赞同：0
> 
> 时间：2013-01-14T23:12:00.557
> 
> 标签：script#

我刚刚在我的机器上编译了 ScriptSharp 的主分支并升级了我的项目的 dll（mscorlib、Script.jQuery、Script.jQuery.History、Script.Web）和 javascript（mscorlib.js）文件。

我不得不更改很多`Type.GetField`,`Type.SetField`并`Type.InvokeMethod`调用在 Script 类中使用它们，因为它们在 0.7.6 中被移到那里。然后我的项目编译成功。

现在，当我在浏览器中加载我的项目时，我遇到了这个`getField is not defined`错误。我在 Chrome 和 Internet Explorer 10 中的 Windows 7 上进行了测试，并在两者中都遇到了相同的错误。我还检查了`mscorlib.js`我的浏览器使用的文件是 0.7.6 文件。

我错过了什么？这个`getField`方法应该在哪里声明？我没有看到它`mscorlib.js`。

谢谢

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:53:52.567

您是否还从您的私人构建中更新了编译器？特别是 ScriptSharp.dll 和 ScriptSharp.Build 程序集。以及与这些匹配的 msbuild .targets 文件。

协同工作的新编译器还应该将 Script.GetField 转换为所需的脚本，而不是调用不存在的 getField 方法。

# flume - 如何在 1.3.1 版本中编写 Flume 自定义 sink 和 source

> ID：14328536
> 
> 赞同：0
> 
> 时间：2013-01-14T23:12:21.657
> 
> 标签：flume

我正在尝试在flume 1.3版中编写自己的接收器和源。它没有配置文件flume-site.xml。编译我的 java 文件后如何使用这个自定义接收器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T10:28:28.383

您需要将带有已编译接收器的 jar 放在某个地方以流式处理 CLASSPATH。在 1.3.1 版本中，只需 lib/ 就足够了。对于较新的版本，您可以选择使用“plugins.d”目录，查看 FLUME-1735 [1] 了解更多详细信息（已在主干中修复，并将成为 1.4.0 的一部分）。

要将水槽配置为实际使用您的接收器，请在配置中使用您的类的完全限定名称（例如 package.ClassName）。例如，如果您的类在包“earth.europe”中并且类名是“WorldSink”，那么您需要使用以下配置片段：

```
a1.sinks = s1
a1.sinks.s1.type = earth.europe.WorldSink 
```

雅尔切克

链接：

1：[https ://issues.apache.org/jira/browse/FLUME-1735](https://issues.apache.org/jira/browse/FLUME-1735)

# java - Flyway 迁移并非总是在没有可识别模式的情况下执行

> ID：14328537
> 
> 赞同：1
> 
> 时间：2013-01-14T23:12:30.770
> 
> 标签：java, flyway

我有一个包含两个模块的项目。这两个模块都使用 flyway 进行数据库的迁移和初始设置。这两个项目都是独立的。我还在每个模块中进行了测试。每当我运行两个模块，或者只运行一个模块的一个测试时，迁移可能不会执行。模块一包含

*   abcaccount.persistence.jdbc.migrations.Vaccount_1__CreateStructure.java abcaccount.persistence.jdbc.migrations.Vaccount_2__CreateIndexOnN​​ame.sql ... abcaccount.persistence.jdbc.migrations.Vaccount_5__AddDAOCreatedAndUpdated.sql

和 JDBCAccountPersistenceServiceImpl 和 JDBCAccountPersistenceServiceImplTest。

模块二包含

*   abcauthentication.persistence.jdbc.migrations.Vauth_1__CreateTableForPasswords.sql abcauthentication.persistence.jdbc.JDBCAuthenticationPersistenceServiceImpl

和 JDBCAuthenticationPersistenceServiceImplTest。

两个 Impls 共享一个父类，在其 init 方法中调用：

```
//prepare db.
Flyway flyway = new Flyway();
flyway.setDataSource(getDataSource());
flyway.setLocations(getClass().getPackage().getName()+".migrations");
flyway.migrate(); 
```

如果在干净的数据库和填充的数据库上分别启动，这两个测试都可以工作。但是，如果我清理数据库并从 intellij 运行测试并首先运行 JDBCAuthenticationPersistenceServiceImplTest，则另一个测试将失败：

```
org.postgresql.util.PSQLException: ERROR: relation "account" does not exist
  Position: 13
    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2103) 
```

在这种情况下，schema_version 将只包含一行：

```
1 |              1 | auth.1  | CreateTableForPasswords | SQL  | Vauth_1__CreateTableForPasswords.sql | -1961897674 | another      | 2013-01-14 23:39:00.736033 |             18 | t 
```

如果我手动删除所有表，测试将再次运行。如果我在干净的数据库（maven）上从控制台运行测试，它也可以工作。我究竟做错了什么？难道 auth.1 被认为是比 account.1 更高的版本，因此 account.1 补丁没有被执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T09:11:00.230

这里有三个问题。

1.  您缺少像 Vaccount_ 这样的 sqlMigrationPrefix
2.  Flyway 对版本过于宽容，应该拒绝 account.1 作为有效的版本号
3.  模块可能应该有单独的元数据表

# ios - 在谷歌地图 iOS 上显示带有 URL 架构的标记

> ID：14328548
> 
> 赞同：5
> 
> 时间：2013-01-14T23:13:11.120
> 
> 标签：ios, google-maps, url-scheme

使用 iOS 6 谷歌地图，我可以通过以下方式打开地图：comgooglemaps://?center=37.759748,-122.427135

但是我不能显示一个标记来显示中心，我怎样才能用这个 URL 模式显示一个？谢谢。

# winforms - 列表框和 SqlDataReader 问题

> ID：14328556
> 
> 赞同：1
> 
> 时间：2013-01-14T23:13:57.317
> 
> 标签：winforms, ado.net, sqldatareader

我正在尝试将存储过程`listbox`中的员工数据加载到表单加载事件中，`ID`并为每个事件分配一个图像。上面的代码是我迄今为止所拥有的。所以我在这里要做的是`listview`用我的数据阅读器中的数据填充数据。

```
SqlConnection conn = new SqlConnection(
                            @"Data Source=MyPC\Test;Initial Catalog=TEST5;Integrated Security=True");
SqlCommand cmd = new SqlCommand("SELECT emp_first_name FROM Employees", conn);
cmd.CommandType = CommandType.Text;

SqlDataReader dr = cmd.ExecuteReader();

listView1.Items.Clear();

while (dr.Read())
{
    ListViewItem recs = new ListViewItem();

    recs.Text = dr["dept_name"].ToString();
    recs.Text = dr["emp_first_name"].ToString();
    recs.Text = dr["emp_last_name"].ToString();
    recs.Text = dr["emp_email"].ToString();
    recs.Text = dr["emp_phone"].ToString();
    recs.Text = dr["emp_position"].ToString();
    recs.Text = dr["emp_address1"].ToString();
    recs.Text = dr["emp_address2"].ToString();
    recs.Text = dr["emp_city"].ToString();
    recs.Text = dr["emp_state"].ToString();
    recs.Text = dr["emp_postal_code"].ToString();

    recs.Tag = dr["empId"].ToString();
    recs.ImageIndex = 0;
    listView1.Items.Add(recs);
} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:40:10.810

您的查询当前仅返回一个字段：

```
SqlCommand cmd = new SqlCommand("SELECT emp_first_name FROM Employees", conn); 
```

我猜你想要这个：

```
SqlCommand cmd = new SqlCommand("SELECT * FROM Employees", conn); 
```

您需要打开连接并关闭一次性资源。您当前的代码不断替换该`recs.Text`属性，以至于您应该在列表中看到的唯一内容是“emp_postal_code”值。我*怀疑*您正在寻找类似的东西，您将用户名显示为 ListViewItem 的主要项目，然后将其他信息包含为该项目的子项目（在详细视图中显示时）：

```
listView1.Items.Clear();

using (SqlConnection conn = new SqlConnection(...)) {
  conn.Open();
  using (SqlCommand cmd = new SqlCommand("SELECT * FROM Employees", conn)) {
    using (SqlDataReader dr = cmd.ExecuteReader()) {
      while (dr.Read()) {
        ListViewItem recs = new ListViewItem();

        recs.Text = dr["emp_first_name"].ToString() + " " +
                    dr["emp_last_name"].ToString();

        recs.SubItems.Add(dr["dept_name"].ToString());
        recs.SubItems.Add(dr["emp_email"].ToString());
        etc...

        recs.Tag = dr["empId"].ToString();
        recs.ImageIndex = 0;
        listView1.Items.Add(recs);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:51:34.007

我在这里看到几件事：

1.  你永远不会打开连接：
2.  您在阅读器中引用了许多未包含在语句的 select 子句中的字段。
3.  您覆盖而不是附加到 ListViewItem 的文本属性，以便仅显示最后分配的属性值。

# objective-c - Xcode 中的 ViewController 问题？

> ID：14328558
> 
> 赞同：0
> 
> 时间：2013-01-14T23:14:09.657
> 
> 标签：objective-c, xcode, uiviewcontroller

我对 Xcode 还很陌生，但遇到了一些问题。我有一个选项卡式视图控制器，一个子选项卡有一个 UITableView。单击单元格时，我需要打开 TableData（一个 ViewController）。出于某种原因，我只是得到一个黑屏。然后我将代码更改为：

```
TableData *newView = [self.storyboard instantiateViewControllerWithIdentifier:@"TableData"];
[self presentViewController:newView animated:YES completion:nil]; 
```

但我在 Xcode 中收到错误 SIGABRT。我该如何解决？

这有效，但给了我一个黑屏：

```
TableData *view = [TableData alloc];
view.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController: view animated:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:20:44.867

只需在情节提要中为 segue 创建一个标识符，然后使用：

```
[self performSegueWithIdentifier:@"yourTableViewStoryboardSegueIdentifier" sender:self]; 
```

更新：

问题很可能是由于用户从他的 tableView 中抓取了无效行。为了只获取行号，您需要做的就是：

```
int rowNumberSelected = indexPath.row; 
```

至于他的第二个代码片段，它只显示黑屏的原因是因为他实际上并没有将其链接到情节提要中的 viewController。他只是在分配代码。如果他通过代码添加子视图，那么它们会显示出来，但情节提要中什么也没有。

由于用户正在使用 Storyboard，因此最好只使用 segues 和dismissals。

# html - 水平对齐 div 和自动换行中的元素

> ID：14328561
> 
> 赞同：1
> 
> 时间：2013-01-14T23:14:21.790
> 
> 标签：html, css

HTML 是

```
<div class="jfmfs-friend-container">
    <div class="jfmfs-friend  ">
        <input class="friend-checkbox" type="checkbox">
        <img src="/picture">
        <div class="friend-name">Test User</div>
    </div>
</div> 
```

在这里，我能够`checkbox, img and friend-name div`在一行中实现所有三个元素。我正在寻找以下内容：

1.  复选框和朋友名称在 img 的垂直中间。
2.  朋友名称 div 中的自动换行
3.  所有元素之间的距离相等（至少 5px）。现在所有3个都彼此相邻，没有空间

这是我的CSS。我正在为任何 display:block 属性的父 div 提供 css 代码：

```
.jfmfs-friend div {
    color:#111111;
    font-size:11px;
    overflow:hidden;
    display:inline-block;
}

div.friend-name  {
    margin-left: 10px;
    vertical-align: middle;
    word-wrap: break-word;
}

.friend-checkbox {
    position: relative;
    vertical-align:middle;
    display: inline-block;
}

#jfmfs-friend-container {
    overflow:scroll;
    overflow-x: hidden;
    -ms-overflow-x: hidden;
    width:100%;
    height:400px;  
    font-family: 'lucida grande', tahoma, verdana, arial, sans-serif;
    color: #333;
    font-size: 12px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:24:34.620

演示：http: [//jsfiddle.net/55twK/](http://jsfiddle.net/55twK/)

1.  设置`vertical-align:middle`为所有三个元素，现在你错过了 img。
2.  现在所有三个元素都像内联元素一样工作，如果有更多的文本 div 可以将自己换行到新行。因此，其中一个选项是为 div 设置宽度或最大宽度。
3.  水平边距和内边距适用于内联元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:29:05.050

要将元素居中在“jfmfs-friend” div 中，您需要添加以下 css：

```
div.jfmfs-friend  {
    text-align: center;
} 
```

要在您的“朋友名称”中自动换行，您需要设置宽度。目前它将扩展到其父级的大小。设置“friend-name”潜水的宽度或其父容器之一将导致文本在遇到元素边缘时中断。

为了使您的元素彼此分离，您需要使用填充和边距 css 属性，直到获得所需的效果。为每个元素添加 5px 的填充可能会满足您的要求。

```
.friend-checkbox, img, .friend-name {
     padding: 5px;
} 
```

您可以使用[jsfiddle.net](http://jsfiddle.net/)来调整布局并获得实时预览。这将帮助您获得所需的间距。

此外，请查看有关[padding](http://www.w3schools.com/css/css_padding.asp)和[margin](http://www.w3schools.com/css/css_margin.asp)属性的这些参考。

# ssh - 我可以使用期望 SSH 连接到机器并使用单个 bash 行进行交互吗？

> ID：14328562
> 
> 赞同：1
> 
> 时间：2013-01-14T23:14:28.527
> 
> 标签：ssh, expect, login-script

我有一堆已经在做一些事情的脚本，我只想向它们添加这个功能。

我想采用以下简单的期望脚本并将其转换为我可以放置在 bash 脚本中或从命令行运行的 bash shell 命令。

```
spawn ssh $machine
expect {
   "~]" {
      send "/etc/loginscript.sh\r"
      interact
   } 
} 
```

如果不将我的期望脚本保存到文件并从 bash 调用它，我无法找到一种方法来执行此操作。这不是一个有效的解决方案，我需要能够从只读系统上的 CMD 调用此命令。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:20:42.047

使用期望的`-c`选项：

```
expect -c "spawn ssh \"$machine\"; expect { \"~]\" {send \"/etc/loginscript.sh\r\"; interact}}" 
```

# javascript - jqplot：如何使用 JSON 数据渲染器向图中添加 2 条不同的线

> ID：14328565
> 
> 赞同：0
> 
> 时间：2013-01-14T23:14:36.517
> 
> 标签：javascript, jqplot

我正在尝试编写一个渲染器函数作为 JSON 的测试。jqplot 的示例代码适用于单行，但我希望能够用 JSON 加载替换我现有的数据（4 个不同的图、2 行、2 个条形图）。

下面是一个测试渲染函数的示例（简化为将 COS/SIN 数据返回到测试图表）。

```
var SampleLine = function()
{
    var data=[[]];
    for(var i=0; i<13; i+=0.5)
    {
        data[0].push([i, Math.sin(i)]);
    }
    return data;
};

var SecondLine = function()
{
    var data=[[]];
    for(var i=0; i<13; i+=0.5)
    {
        data[0].push([i, Math.cos(i)]);
    }
    return data;
};

var plot3 = $.jqplot('chartdiv', [],
        {
            title:'JSON Test',
            dataRenderer: SecondLine,

            axes: {
                xaxis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    label:'Date',
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                    labelOptions: {
                        fontFamily: 'Georgia, Serif',
                        fontSize: '12pt'
                    },
                },
                yaxis:{
                    label:'Units',
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                    labelOptions: {
                        fontFamily: 'Georgia, Serif',
                        fontSize: '12pt'
                    },
                }
            },
            series:[
                {
                    showMarker:true,
                    markerOptions: { style:'circle' },
                },
                {
                    renderer:$.jqplot.BarRenderer,
                },
                {
                    renderer:$.jqplot.BarRenderer,
                },
                {
                    showMarker:true,
                    markerOptions: { style:'square' },
                },
            ],
        }
); 
```

我的问题是如何添加第二个 dataRenderer，因为我需要来自不同来源的数据来组合图表上的线条和条形。硬设置数组有效，但我正在尝试使用 AJAX/JSON 从我的数据库和其他来源获取数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:49:51.047

我不相信有一种方法可以添加多个 dataRenderer，但为什么不只使用一个 dataRenderer 来检索每个系列，然后将其传递回 jqPlot -

如果您没有使用 dataRenderer，您将像这样传递 4 个数据系列 -

```
 $.jqplot('chartdiv',  [dataSeries1, dataSeries2, dataSeries3, dataSeries4], { 
```

因此，使用您的 dataRenderer 函数来检索每个数据系列，将每个数据系列设置为一个数组，然后将整个集合作为一个数组传回 -

```
 var retrieveData = function()
    {
      var dataSeries1=[];
      var dataSeries2=[];
      var dataSeries3=[];
      var dataSeries4=[];
      var returnData=[];

      //Populate each data array with values
      for(var i=0; i<13; i+=0.5)
      {
         dataSeries1[0].push([i, Math.cos(i)]);
      }

      //Populate dataSeries2, dataSeries3, dataSeries4
      ......
      //Add all to returnData array then return it

      return returnData;
    }; 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:27:20.903

我不知道是什么`dataRenderer`，还有 JQPlot doc。

您可以通过玩 plot1.series 数组来添加或删除系列。

这是一个很好的jsfiddle：jsfiddle.net/fracu/HrZcj

这个想法是用数据创建一个数组

```
for(var i=0 ; i<50 ; i++)
{
    myNewSerie = Array();
    x = (new Date()).getTime();
    y = Math.floor(Math.random() * 100);
    myNewSerie.push([x, y]);
} 
```

然后使用下一个可用插槽将其添加到图表中

```
plot1.series[plot1.series.length] = myNewSerie 
```

最后重绘使用`plot1.replot();`

在小提琴末尾检查 updateSeries 功能

# ruby-on-rails - Rails 中可能有 2 个 after_create 回调？

> ID：14328569
> 
> 赞同：0
> 
> 时间：2013-01-14T23:15:43.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, rails-activerecord, ruby-on-rails-4

我有一个带有回调的 ActiveRecord 模型，例如：

```
class Employee < ActiveRecord::Base
  after_create :add_new_employee_bonus

  private
  def add_new_employee_bonus
    self.bonus += 100
  end
end 
```

我可以有 2 个回调吗？Rails 文档没有说明这一点：

```
after_create :add_new_employee_bonus, :another_callback_method 
```

当然，我可以尝试一下，但我想确保它得到官方支持，即使它确实有效。

使用最新的 Rails（截至目前为 3.2.11），但如果 R​​ails 4 支持这对我来说已经足够了。

***更新***：我确实尝试了上面的方法并且效果很好，我只是想要一些支持它的证据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:17:25.117

是的，它受支持。我不具体了解rails 4，但我无法想象他们改变了这一点。

# c# - （嵌入式）Raven Studio 和我现有的 MVC 4 路由不能一起工作？

> ID：14328570
> 
> 赞同：3
> 
> 时间：2013-01-14T23:15:43.850
> 
> 标签：c#, asp.net-mvc, ravendb

我是 RavenDB 和可嵌入的东西的新手。我现在在谷歌上搜索了将近两个小时，但找不到我的问题的解决方案；可能是因为我仍然是 RavenDB n00b :-)

我的文档存储初始化看起来像这样并且工作正常（我可以查询文档）：

```
IocContainer.Instance.RegisterSingle(() =>
{
    var ds = new EmbeddableDocumentStore {DataDirectory = "Data", UseEmbeddedHttpServer = true};
    return
        ds
            .Initialize()
            .OpenSession();
}); 
```

在第一个或两个请求中，路由按我期望的那样工作，所以我最终使用了我的 HomeController。再次刷新后，我最终进入了`/raven/studio.html?...`Great！但不是我期望降落的地方！

如果我随后将 URL 更改为 /Home，就像我的控制器一样，我会看到以下结果：

```
Could not figure out what to do
Your request didn't match anything that Raven knows to do, sorry... 
```

当然，当我删除`UseEmbeddedHttpServer`它时，它就像以前一样工作，但这不是我想要的。我希望能够浏览文档。

我的默认 MVC`RouteConfig`使用 * 添加到 {id} 生成：

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{*id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:24:28.770

关闭 RavenDb 中的内部 Http-server 或将 RavenDb-http-server 映射到另一个端口

1：

```
var ds = new EmbeddableDocumentStore {
   DataDirectory = [DataFolder],
  UseEmbeddedHttpServer = false
}; 
```

2：

```
int ravenPort = 8181;
NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(ravenPort);
var ds = new EmbeddableDocumentStore {
   DataDirectory = [DataFolder],
   UseEmbeddedHttpServer = true,
   Configuration = {Port = ravenPort}
}; 
```

如果 2 Raven Studio 现在可以在端口 8181 上访问，而不是映射到您网站的端口 (80)

# c# - 如何降低自动生成代码的可见性

> ID：14328574
> 
> 赞同：2
> 
> 时间：2013-01-14T23:15:52.807
> 
> 标签：c#, visibility, ranorex

我有一堆自动生成的代码（来自 Ranorex GUI 测试工具），它们公开了一个公共界面，如下所示：

```
public partial class MessageBoxPopupAppFolder : RepoGenBaseFolder
{
  // Ranorex.Button exposes public methods like Click()
  public virtual Ranorex.Button ButtonYes
  {
    get
    {
      return _buttonyesInfo.CreateAdapter<Ranorex.Button>(true);
    }
  }
} 
```

我的问题是我正在编写一个看起来像下面的代码的中间层，我希望该代码的用户不会通过直接调用自动生成的代码来绕过它（这很可能会破坏复杂的业务规则)

```
public class MyAdapter
{
  private MessageBoxPopupAppFolder _myMessageBox;

  public static void Acknowledge()
  {
    // some complex business rules
    _myMessageBox.ButtonYes.Click();
  }
} 
```

我有一些解决方案，但似乎没有一个真正令人满意：

*   手动（或通过脚本）修改自动生成的代码以更改 Ranorex 方法的可见性。这意味着需要进行一些命名空间重构，并且难以通过代码重新生成来维护
*   将此代码链接到一个完全独立的二进制文件中，并通过一个真正私有的 API 与之通信。前面还有很多工作
*   实现某种代码自我评估，以检测并报告（作为单元测试失败）对该 API 的任何“禁止”使用

我能做什么？

澄清一下：我不关心我的中间件保密，只需要控制实际点击的正确顺序。

**编辑**：我想向我的团队成员（我的中间件用户）公开的是面向业务的 API（如`Acknowledge()`）。这可以。不好的是我无法阻止 Ranorex 原始 API ( `Button.Click()`) 出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:56:29.993

1.  如果你想安全，你最好的选择是你的第一个，使用脚本来修改自动生成的代码。将脚本添加到您的集成构建过程中，以确保此获取始终运行，以防代码重新生成。

2.  否则，您可以设置 FxCop 规则来检测您不想使用的方法调用。

3.  如果团队很小并且他们对遵循设计指南感到满意。那么这是训练团队不使用 API 的问题。在您的代码审查过程中，您的团队将不得不寻找这个问题。缺点是这只是一种预防措施，您的团队成员仍然可能犯错误。在这种情况下，QA 和代码审查将是你最好的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:22:11.630

Ranorex 不支持修改生成成员的可见性？

第一个绝对听起来像是要走的路，因为它似乎直接就是您要寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:28:42.593

在我看来，您对设计“太深”了，无法用优雅且完全干净的解决方案来解决这个问题。所有替代方案都有自己的缺点，我可以建议的一个是为您在自己的类中公开的 Ranorex 类型提供一个适配器/外观类。然后这些适配器会处理一些逻辑，然后将调用路由到真正的底层 Ranorex 对象。在您的`Acknowledge`示例中，这将是适配器上的一个方法，而您公开的公共类型将只是适配器。

理想情况下，我希望在 Button 类中有一个 Click 事件，以便您可以听到它并做出相应的反应。

# javascript - Phonegap 2.2.0 - 检测方向

> ID：14328575
> 
> 赞同：4
> 
> 时间：2013-01-14T23:15:53.520
> 
> 标签：javascript, ios, cordova

我有一个我想保持纵向模式的应用程序，除了我想要检测方向更改、触发 js 事件并更改方向的单个视图（仅适用于该视图）。

我的应用程序中有以下代码：

```
 window.shouldRotateToOrientation = function(rotation) {
     switch (rotation) {        
       case 0:
       case 180:
        console.log("Portrait");
        return false;
        //LandscapeRight or LandscapeLeft
       case 90:
       case -90:
        console.log("Landscape");
        return false;
     }
  } 
```

这在为 iOS5 构建时似乎可以正常工作，通过返回 false 使应用程序保持纵向方向，并在设备处于横向模式时正确触发。然而，当为 iOS6 构建时，每次设备旋转时，该函数被调用 4 次，匹配每种情况 - 使检测无用。

我是否正确地接近这个 - 还有另一种方法还是我错过了什么？

请注意，我对 XCode/ios/ObjectiveC 环境的了解非常有限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:26:09.140

试试这个代码：

```
function changeOrientation() {
    switch (window.orientation) {
        case 0:
            // portrait, home bottom
        case 180:
            // portrait, home top
            alert("portrait H: " + $(window).height() + " W: " + $(window).width());
            break;
        case -90:
            // landscape, home left
        case 90:
            // landscape, home right
            alert("landscape H: " + $(window).height() + " W: " + $(window).width());
            break;
    }
}

window.onorientationchange = function () {
    //Need at least 800 milliseconds
    setTimeout(changeOrientation, 1000);
} 
```

超时应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T08:17:26.143

以下对我来说可以检测方向：

```
function isOrientationPortrait(){
  if ($(window).height() > $(window).width()){ 
    return true; 
  } else { 
    return false; 
  }
}

$(window).on('orientationchange', function () {
  if(isOrientationPortrait()){
    console.log("Portrait");
  } else {
    console.log("Landscape"); 
  }
}); 
```

# iphone - AVAssetExportSessionestimateOutputFileLength 总是返回 0

> ID：14328576
> 
> 赞同：4
> 
> 时间：2013-01-14T23:15:56.790
> 
> 标签：iphone, ios, objective-c, cocoa-touch, avfoundation

存在`estimatedOutputFileLength`属性`AVAssetExportSession`始终返回**0**的问题（并在模拟器上返回**-9223372036854775808**）。

我已经尝试了一切以使其正常工作，尝试不同`outputFileType`的 s，`shouldOptimizeForNetworkUse`打开和关闭，指定（或不指定）`outputURL`...尽管如此，似乎没有任何效果，我开始认为这可能是一个错误在 SDK 中。

这是我的代码：

```
AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetMediumQuality]; // doesn't matter which preset is used
//exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;
NSLog(@"bytes = %lld", exportSession.estimatedOutputFileLength); 
```

我只是不明白为什么这不起作用！（iOS 6、iPhone 5）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-08T02:26:16.667

您可以通过在 exportSession 上设置适当的 timeRange 来解决此问题：

```
exportSession.timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration); 
```

似乎在 iOS 中，估计文件长度时 AVAssetExportSessionInternal.timeRange 没有得到合理的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T11:08:59.850

您需要包括时间范围。

您打算导出多少文件。没有它，它将返回 0，

```
AVAssetExportSession *exporter = [[AVAssetExportSession alloc] initWithAsset: songAsset presetName: AVAssetExportPresetAppleM4A];
exporter.outputFileType = AVFileTypeAppleM4A;

CMTime full = CMTimeMultiplyByFloat64(exporter.asset.duration, 1);
exporter.timeRange = CMTimeRangeMake(kCMTimeZero, full);
long long size = exporter.estimatedOutputFileLength;
fileInfo.fileSize = size; 
```

# android-ndk - 本机函数的分配和内存释放

> ID：14328586
> 
> 赞同：0
> 
> 时间：2013-01-14T23:16:53.297
> 
> 标签：android-ndk

我尝试使用 android-ndk。面临这样的问题：需要分配缓冲区供jni部分使用，然后释放。我在这里找到了这样的实现： jni 部分的函数：

```
 jobject Java_com_domain_applicationname_FFMpegWrapper_allocNative(JNIEnv* env, jobject thiz, jlong size)
{
void* buffer = malloc(size);
jobject directBuffer = (*env)->NewDirectByteBuffer(env, buffer, size);
jobject globalRef = (*env)->NewGlobalRef(env, directBuffer);
return globalRef;
}
void Java_com_domain_applicationname_FFMpegWrapper_freeNative(JNIEnv* env, jobject thiz, jobject globalRef)
{
void *buffer = (*env)->GetDirectBufferAddress(env, globalRef);
free(buffer);
(*env)->DeleteGlobalRef(env, globalRef);
} 
```

在 Java 部分，我这样做：

```
 public class FFMpegWrapper {
.........
/** allocate buffer*/
public static native ByteBuffer allocNative(long bufferSize);

/** free buffer*/
public static native void freeNative(ByteBuffer buffer);
} 
```

在 MainActivity 中创建：

```
 long bufferSize = 1024;
    ByteBuffer my_buffer = FFMpegWrapper.allocNative(bufferSize);
    FFMpegWrapper.logFileInfo("/storage/sdcard0/movies/126_3_17.avi");//this function I won't describe it business doesn't treat but it works it is visible from logs below
    //to here everything works well
    FFMpegWrapper.freeNative(my_buffer);//and here we receive a departure from the program and even the window of an exception isn't shown simply is closed activity. 
```

日志猫：

```
01-14 17:53:06.924: I/com.domain.tag(22249): initialize_passed
01-14 17:53:06.964: I/com.domain.tag(22249): openened
01-14 17:53:06.964: I/ttag(22249): 3270391527096277528
01-14 17:53:06.984: I/com.domain.tag(22249): File was opened
01-14 17:53:06.984: I/com.domain.tag(22249): File '/storage/sdcard0/Movies/126_3_17.avi', Codec avi
01-14 17:53:06.984: W/dalvikvm(22249): JNI WARNING: DeleteGlobalRef on non-global 0x4780001d (type=1)
01-14 17:53:06.984: I/dalvikvm(22249): "main" prio=5 tid=1 NATIVE
01-14 17:53:06.984: I/dalvikvm(22249): | group="main" sCount=0 dsCount=0 obj=0x41065568 self=0x40ebe9a0
01-14 17:53:06.984: I/dalvikvm(22249): | sysTid=22249 nice=0 sched=0/0 cgrp=apps handle=1074450224
01-14 17:53:06.984: I/dalvikvm(22249): | schedstat=( 74908625 168640538 138 ) utm=4 stm=2 core=0
01-14 17:53:06.999: I/dalvikvm(22249): #00 pc 00001260 /system/lib/libcorkscrew.so (unwind_backtrace_thread+27)
01-14 17:53:06.999: I/dalvikvm(22249): #01 pc 0005f904 /system/lib/libdvm.so (dvmDumpNativeStack(DebugOutputTarget const*, int)+35)
01-14 17:53:06.999: I/dalvikvm(22249): #02 pc 000537ac /system/lib/libdvm.so (dvmDumpThreadEx(DebugOutputTarget const*, Thread*, bool)+303)
01-14 17:53:06.999: I/dalvikvm(22249): #03 pc 00053846 /system/lib/libdvm.so (dvmDumpThread(Thread*, bool)+25)
01-14 17:53:06.999: I/dalvikvm(22249): #04 pc 00038e02 /system/lib/libdvm.so
01-14 17:53:06.999: I/dalvikvm(22249): #05 pc 000414da /system/lib/libdvm.so
01-14 17:53:06.999: I/dalvikvm(22249): #06 pc 0002f728 /data/data/ru.dzakhov.ffmpeg.test/lib/libmylib.so (Java_ru_dzakhov_ffmpeg_test_FFMpegWrapper_freeNative+25)
01-14 17:53:06.999: I/dalvikvm(22249): #07 pc 0001de70 /system/lib/libdvm.so (dvmPlatformInvoke+112)
01-14 17:53:06.999: I/dalvikvm(22249): #08 pc 0004d0c2 /system/lib/libdvm.so (dvmCallJNIMethod(unsigned int const*, JValue*, Method const*, Thread*)+393)
01-14 17:53:06.999: I/dalvikvm(22249): #09 pc 0004f1dc /system/lib/libdvm.so (dvmResolveNativeMethod(unsigned int const*, JValue*, Method const*, Thread*)+171)
01-14 17:53:06.999: I/dalvikvm(22249): #10 pc 000272a0 /system/lib/libdvm.so
01-14 17:53:06.999: I/dalvikvm(22249): #11 pc 0002bba8 /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
01-14 17:53:06.999: I/dalvikvm(22249): #12 pc 0005faf6 /system/lib/libdvm.so (dvmInvokeMethod(Object*, Method const*, ArrayObject*, ArrayObject*, ClassObject*, bool)+373)
01-14 17:53:06.999: I/dalvikvm(22249): #13 pc 0006709c /system/lib/libdvm.so
01-14 17:53:06.999: I/dalvikvm(22249): #14 pc 000272a0 /system/lib/libdvm.so
01-14 17:53:06.999: I/dalvikvm(22249): #15 pc 0002bba8 /system/lib/libdvm.so (dvmInterpret(Thread*, Method const*, JValue*)+180)
01-14 17:53:06.999: I/dalvikvm(22249): #16 pc 0005f830 /system/lib/libdvm.so (dvmCallMethodV(Thread*, Method const*, Object*, bool, JValue*, std::__va_list)+271)
01-14 17:53:06.999: I/dalvikvm(22249): #17 pc 000496b2 /system/lib/libdvm.so
01-14 17:53:06.999: I/dalvikvm(22249): #18 pc 0004c44e /system/lib/libandroid_runtime.so
01-14 17:53:06.999: I/dalvikvm(22249): #19 pc 0004d556 /system/lib/libandroid_runtime.so (android::AndroidRuntime::start(char const*, char const*)+389)
01-14 17:53:07.004: I/dalvikvm(22249): #20 pc 00000dce /system/bin/app_process
01-14 17:53:07.004: I/dalvikvm(22249): #21 pc 00017120 /system/lib/libc.so (__libc_init+35)
01-14 17:53:07.004: I/dalvikvm(22249): at ru.dzakhov.ffmpeg.test.FFMpegWrapper.freeNative(Native Method)
01-14 17:53:07.004: I/dalvikvm(22249): at ru.dzakhov.ffmpeg.test.MainActivity.onCreate(MainActivity.java:39)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.Activity.performCreate(Activity.java:5184)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.ActivityThread.access$600(ActivityThread.java:140)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
01-14 17:53:07.004: I/dalvikvm(22249): at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 17:53:07.004: I/dalvikvm(22249): at android.os.Looper.loop(Looper.java:137)
01-14 17:53:07.004: I/dalvikvm(22249): at android.app.ActivityThread.main(ActivityThread.java:4898)
01-14 17:53:07.004: I/dalvikvm(22249): at java.lang.reflect.Method.invokeNative(Native Method)
01-14 17:53:07.004: I/dalvikvm(22249): at java.lang.reflect.Method.invoke(Method.java:511)
01-14 17:53:07.004: I/dalvikvm(22249): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
01-14 17:53:07.004: I/dalvikvm(22249): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
01-14 17:53:07.004: I/dalvikvm(22249): at dalvik.system.NativeStart.main(Native Method)
01-14 17:53:07.004: E/dalvikvm(22249): VM aborting
01-14 17:53:07.004: A/libc(22249): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1), thread 22249 (hov.ffmpeg.test) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:35:39.850

关于 JNI：[http ://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp16785](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/design.html#wp16785)

1.  `Objects are passed to native methods as local references`. 这意味着您必须将全局引用存储在本机端，如果您将全局引用传递回 java，它将被包装为本地对象。因此，当您稍后尝试释放它时，此本地对象将传递给您的代码。
2.  当您从本地创建全局引用时 - 如果您不再需要它，则免费本地引用。

因此，您可以为分配的全局对象（或分配的缓冲区）维护某种映射，并返回对 NewDirectByteBuffer 返回的作业对象的本地引用。

# java - 尝试通过 glassfish 设置/使用 mysql 数据源（使用 Cargo 和 Maven）。如何部署mysql连接器？

> ID：14328588
> 
> 赞同：3
> 
> 时间：2013-01-14T23:17:07.167
> 
> 标签：java, mysql, jakarta-ee, glassfish, cargo

晚上好！

通过 Maven 使用 Cargo，我已将 pom.xml 配置为创建 glassfish 的实例，然后在运行集成测试之前将我的项目部署到它。我大部分时间都在那里，因为我已经部署了我的代码，我已经为它设置了一个数据源和一个 JNDI 资源，但是当我尝试实际使用该资源时，我得到以下异常：

```
Wrong class name or classpath for Datasource Object 
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 
```

在定期安装 glassfish 时，我可以轻松安装连接器，但在这种情况下，glassfish 的安装是自动的，并且每次运行测试时都会创建一个新实例。

有什么方法可以提供 mysql 连接器，或者在 glassfish 可以读取的类路径上，或者通过将其安装在每个构建创建的 glassfish 的新实例中？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:56:29.693

再浏览一下文档，我发现我可以通过在容器配置中提供 maven 依赖项来做到这一点，如下所示：

```
<configuration>
    <container>
        <containerId>glassfish3x</containerId>
        <artifactInstaller>
            <groupId>org.glassfish.main.distributions</groupId>
            <artifactId>glassfish</artifactId>
            <version>${glassfish.version}</version>
        </artifactInstaller>
        <dependencies>
            <dependency>
                <groupId>mysql</groupId>
                <artifactId>mysql-connector-java</artifactId>
            </dependency>
        </dependencies>
    </container>
    <configuration>
        <properties>
            <cargo.datasource.datasource.mysql>
                cargo.datasource.jndi=jdbc/MysqlPool|
                cargo.datasource.driver=com.mysql.jdbc.Driver|
                cargo.datasource.url=jdbc:mysql://localhost/databasename|
                cargo.datasource.transactionsupport=LOCAL_TRANSACTION|
                cargo.datasource.username=username|
                cargo.datasource.password=password
            </cargo.datasource.datasource.mysql>
        </properties>
    </configuration>
</configuration> 
```

注意 mysql 依赖项。它需要引用我的项目中已经定义的依赖项（对于我的项目来说，它的范围是“提供”）。这按预期工作。:)

# magento - 从 Magento 管理员 > 客户 > 管理客户 > 地址中删除电话

> ID：14328595
> 
> 赞同：0
> 
> 时间：2013-01-14T23:17:25.430
> 
> 标签：magento, backend

我想从 Magento 客户管理中删除 PHONE 和 FAX 字段。我已经删除了前端中的所有字段和验证，但该字段仍在后端

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:21:31.597

尝试从数据库中删除它们。表 eav_attribute。首先检查 entity_type_id - 它需要属于 customer_address；

```
SELECT entity_type_id FROM `eav_entity_type` WHERE entity_type_code = 'customer_address'
DELETE from eav_attribute where attribute_code IN ('telephone', 'fax') AND entity_type_id = ? (from previous query) 
```

那时不需要更改代码。

首先备份您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:27:41.710

你应该在适当的地方注释掉Adminhtml文件夹中的相关代码行，建议你作为前端，你已经这样做了，所以让你的确切路径

而不是从数据库中删除，更好的方法是评论相关的代码行。好像出了什么问题，Mag将从默认脚本重新加载数据库，您删除的字段将再次出现..

HTH...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-31T09:11:40.453

不需要太多的努力，只需运行这些 SQL 命令

```
SELECT * FROM `eav_attribute` 
```

现在寻找`Telephone`under `attribute_code`，主要是`attribute_id`31

使用以下 SQL 语句更新表

```
UPDATE `eav_attribute` SET `is_required` = '0' WHERE `eav_attribute`.`attribute_id` =31; 
```

# android - 使用 OnContextItemSelected 从 ListView 项中检索文本

> ID：14328596
> 
> 赞同：3
> 
> 时间：2013-01-14T23:17:40.090
> 
> 标签：android, listview, android-contextmenu

我有一个带有删除和类似选项的“经典”上下文菜单的 ListView。由于我从 SharedPreferences 对象中删除，我需要检索键，即设置到 ListView 项目中的文本。

我试过以下代码：

```
 @Override
    public boolean onContextItemSelected(MenuItem item){
        AdapterContextMenuInfo saved = (AdapterContextMenuInfo) item.getMenuInfo();

        TextView view = (TextView)findViewById((int) saved.id);

        Log.d("DEBUG:", "before key");
        String key = view.getText().toString();
        Log.d("DEBUG:", "after...");

        switch (item.getItemId()){
            case R.id.conmenu_delete:
                return true;

            case R.id.conmenu_copy:
                return true;

            case R.id.conmenu_send:
                return true;

            default:
                return super.onContextItemSelected(item);
        }
    } 
```

但是，不幸的是，它在尝试从视图中检索文本时崩溃，正如我从日志中知道的那样。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T23:40:19.603

您已经正确地投射了`AdapterContextMenuInfo`.
从那里，您可以获得可以再次投射到小部件中的 targetView。我想这是`TextView`你的情况。在那`TextView`你可以调用简单的`getText()`方法。

```
@Override
public boolean onContextItemSelected(MenuItem item) {

           AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
           String key = ((TextView) info.targetView).getText().toString();

           switch (item.getItemId()){
                case R.id.conmenu_delete:
                    return true;

                case R.id.conmenu_copy:
                    return true;

                case R.id.conmenu_send:
                    return true;

                default:
                    return super.onContextItemSelected(item);
          }
} 
```

如果您的列表填充了自定义对象，您显然必须将其转换为相应的类型，例如：

```
Person person = (Person) getListAdapter().getItem(info.position);
String key = person.getName(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-11T17:09:21.803

```
 @Override
public boolean onContextItemSelected(MenuItem item) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) item.getMenuInfo();

    Object obj = getListView().getItemAtPosition(info.position);
    String title = obj.toString();

} 
```

# integer - ocaml 查看 int 的特定数字

> ID：14328600
> 
> 赞同：2
> 
> 时间：2013-01-14T23:18:38.450
> 
> 标签：integer, ocaml, digits

我正在编写一个 ocaml 程序，但我不知道如何查看 int 的特定数字

比如说我们有

```
let a = 405;; 
```

我希望能够查看第一个数字 4 或第二个数字 0。我怎样才能做到这一点？我想把它变成一个字符串并查看字符，但我觉得应该有另一种方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:30:33.793

您可以编写一个递归函数来提取数字中的所有数字：

```
(* Assuming n is a non-negative number *)
let digits n =
    let rec loop n acc =
        if n = 0 then acc
        else loop (n/10) (n mod 10::acc) in
    match n with
    | 0 -> [0]
    | _ -> loop n [] 
```

一旦你有一个数字列表

```
# digits 405;;
- : int list = [4; 0; 5] 
```

您可以使用一些[List](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)函数来获取任何数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T23:30:42.130

（我会说这是一个一般的编程问题，而不是 OCaml 问题。）

要获得从右侧 0 开始编号的数字 k，请除以`(/)`10 的 k 次方，然后取结果 mod 10。

从左边编号数字会使这个问题变得更难。如果你必须这样做，你需要知道数字的位数，你可以从 log base 10 中得到。

转换为字符串（或者，正如 pad 所建议的，转换为数字列表）可能非常好。这基本上按顺序对所有数字进行了所有除法和修改。如果你没有做很多这些转换，它会足够快（恕我直言）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-25T01:10:30.497

我正在添加一个新答案，因为@pad 的解决方案丢弃了前导“0”。我提出了一个保留所有前导零的解决方案，例如，如果您想解析电话号码，这很有用。

```
let digits s = 
    let rec aux n nb_chars accu = match n with
        | 0 -> (if nb_chars=0 then accu else (aux 0 (nb_chars-1) (0::accu)))
        | _ -> aux (n/10) (nb_chars - 1) (n mod 10::accu)
        in
    let rec init_list = function
        | 0 -> []
        | n -> 0 :: (init_list (n-1))
        in
    if s=(String.make (String.length s) '0')
    then (init_list (String.length s))
    else aux (int_of_string s) (String.length s) [] ;; 
```

# angularjs - 使用 Yeoman build 我收到“未捕获的错误：未知提供者：aProvider <- a”

> ID：14328601
> 
> 赞同：2
> 
> 时间：2013-01-14T23:18:38.763
> 
> 标签：angularjs

当我运行 yeoman build 然后转到我的网络应用程序时，我收到以下错误

未捕获的错误：未知的提供者：aProvider <- a

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:26:36.277

看看这个相关的问题[https://github.com/yeoman/yeoman/issues/646](https://github.com/yeoman/yeoman/issues/646)

# bash - Bash if 块语法

> ID：14328606
> 
> 赞同：0
> 
> 时间：2013-01-14T23:19:26.610
> 
> 标签：bash, if-statement, syntax

我的 if 块有语法错误，我无法纠正它

```
if [[ $X >= 100] || [$Y >= 100 ]]
then
   echo "..."
fi 
```

我重写了这个，但没有找到正确的语法。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:21:41.380

这是一个语法错误，您应该尝试：

```
if ((X >= 100 || Y >= 100 ))
then
   echo "..."
fi 
```

## 笔记

*   使用这种语法，无需记住`-ge`之类的。这就像算术
*   `((...))`是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。`let`如果需要副作用（分配），也用作 的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T23:21:31.610

你正在寻找的是这个：

```
if [[ $X -ge 100 || $Y -ge 100 ]];
then
   echo "..."
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T23:21:30.873

你`if`的很好。你的`[[`命令搞砸了。

```
if [[ $X -ge 100 || $Y -ge 100 ]] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T13:37:49.197

您似乎正在尝试嵌套`[...]`表达式，这不是您可以在`bash`. 该`[[ ... ]]`表达式是一个完全独立的构造，可在`bash`. 我不会费心发布正确的表达方式，因为其他答案已经很好地涵盖了。

# mysql - MySQL：将where子句中的日期与连接进行比较

> ID：14328607
> 
> 赞同：1
> 
> 时间：2013-01-14T23:19:45.783
> 
> 标签：mysql, join, indexing

我很难弄清楚如何查询/索引数据库。

情况很简单。每次用户访问一个类别时，都会存储他/她的访问日期。我的目标是列出用户最近一次访问后添加元素的类别。

下面是两张表：

```
CREATE TABLE `elements` (
  `category_id` int(11) NOT NULL,
  `element_id` int(11) NOT NULL,
  `title` varchar(255) NOT NULL,
  `added_date` datetime NOT NULL,
  PRIMARY KEY (`category_id`,`element_id`),
  KEY `index_element_id` (`element_id`)
)

CREATE TABLE `categories_views` (
  `member_id` int(11) NOT NULL,
  `category_id` int(11) NOT NULL,
  `view_date` datetime NOT NULL,
  PRIMARY KEY (`member_id`,`category_id`),
  KEY `index_element_id` (`category_id`)
) 
```

询问：

```
SELECT
    categories_views.*,
    elements.category_id
FROM
    elements
    INNER JOIN categories_views ON (categories_views.category_id = elements.category_id)
WHERE
    categories_views.member_id = 1
    AND elements.added_date > categories_views.view_date
GROUP BY elements.category_id 
```

解释：

```
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: elements
         type: ALL
possible_keys: PRIMARY
          key: NULL
      key_len: NULL
          ref: NULL
         rows: 89057
        Extra: Using temporary; Using filesort
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: categories_views
         type: eq_ref
possible_keys: PRIMARY,index_element_id
          key: PRIMARY
      key_len: 8
          ref: const,convert.elements.category_id
         rows: 1
        Extra: Using where 
```

每个表中有大约 100k 行，查询大约需要 0.3 秒，这对于 Web 上下文中的每个用户操作都应该执行的操作来说太长了。

如果可能，我应该添加哪些索引，或者我应该如何重写这个查询以避免使用文件排序和临时表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:43:26.810

如果每个成员的 category_views 数量相对较少，我建议测试不同的查询：

```
SELECT v.*
  FROM categories_views v
 WHERE v.member_id = 1
   AND EXISTS 
       ( SELECT 1
           FROM elements e
          WHERE e.category_id = v.category_id
            AND e.added_date > v.view_date
       ) 
```

为了获得该查询的最佳性能，您需要确保拥有索引：

```
... ON elements (category_id, added_date)

... ON categories_views (member_id, category_id) 
```

注意：看起来`categories_views`表上的主键可能是`(member_id, category_id)`，这意味着已经存在适当的索引。

我假设（尽我所能从原始查询中得出）该`categories_views`表仅包含用户类别的“最新”视图，即`member_id, category_id`是唯一的。如果原始查询返回正确的结果集（如果它仅返回自用户对该类别的“最后一次查看”以来添加了“新”元素的类别，则看起来必须如此；否则，存在表中的任何“较旧”`view_date`值`categories_views`都会触发该类别的包含，即使有一个比类别中的最新 (max) 元素`view_date`晚的更新。`added_date`

如果不是这种情况，即`(member_id,category_id)`不是唯一的，则需要更改查询。

* * *

原始问题中的查询有点令人费解，它引用`element_views`为表名或表别名，但这并没有出现在 EXPLAIN 输出中。我假设它`element_views`是 . 的同义词`categories_views`。

* * *

对于原始查询，在`elements`表上添加覆盖索引：

```
 ... ON elements (category_id, added_date) 
```

目标是让解释输出显示“使用索引”

您也可以尝试添加索引：

```
 ... ON categories_views (member_id, category_id, added_date) 
```

要从 categories_view 表中获取所有列（对于选择列表），查询将不得不访问表中的页面（除非存在包含所有这些列的索引。目标是减少行数需要在数据页上访问以通过索引满足所有（或大部分）谓词来查找行。

* * *

是否有必要`category_id`从表中返回列`elements`？由于内部连接谓词，我们不是已经知道这与表中的`category_id`列中的值相同吗？`categories_views`

* * *

# php - ajax catch php echo 后，在输出中添加 \n

> ID：14328613
> 
> 赞同：0
> 
> 时间：2013-01-14T23:20:19.710
> 
> 标签：php, html, ajax, jquery

我有一个非常简单的问题。当 ajax 从 php 中捕获回声时，女巫看起来像这样：

```
<h2> Hello world </h2>
 <p>Simple text</p> 
```

ajax 将 \n 添加到其中，因此 HTML 页面中的输出如下所示：

> 你好世界\n\n
> 简单文本\n

并且它（\n）在重新加载后消失。它不是 PHP 的错，因为当我在 echo 之前查找 \n 字符时，它不会替换任何东西，所以它必须通过 ajax 处理。您不知道如何在不重新加载页面的情况下摆脱输出中的 \n 吗？

**编辑：** ajax：......我让它变得简单......

```
$('#send').click(function(){
  var obsah = CKEDITOR.instances['content'].getData();
  var id = adr();
  $.ajax({
    data:{'content': content, 'id':id},
    success: function(data){
          $('#removeable').append(data);           
       },
    error: function(){
        alert('Error')    
      }
    });
  }); 
```

php:

```
if(!empty($_POST['content'])){
    $prispevek = mysql_real_escape_string($_POST['content']);
            $id = $_POST['id'];
            $sql = "UPDATE navigation SET `content` = CONCAT_WS('',`content`,'$prispevek') WHERE `ID` = '$id'";
    mysql_query($sql) or die (mysql_error());
    //$prispevek = str_replace("\n", "", $prispevek);
    echo $prispevek;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-22T09:43:46.077

问题是`\n`元素之间的（换行符）是由 textarea 引起的。因此，使用 jQuery 可以轻松修复添加行：

```
obsah = obsah.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, ' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-22T09:51:02.040

您是否尝试过使用**nl2br** php 功能？( [http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php) )

我认为这应该对你有所帮助。

```
echo nl2br($prispevek); 
```

还有一件事情。我建议您添加**退出；**或**死（）；**打印 php 响应后。

像这样：

```
echo nl2br($prispevek);
exit; 
```

为什么你应该这样做？读这个：`https://stackoverflow.com/questions/2909475/will-php-code-exit-after-echo-for-ajax`

# c++ - C ++导致病毒错误？

> ID：14328614
> 
> 赞同：4
> 
> 时间：2013-01-14T23:20:23.120
> 
> 标签：c++, pointers, memory-leaks

读完这篇文章后你可能会说我疯了，但当你读到我在这里说的话时，我真的希望你相信我。为了了解可能导致内存泄漏或其他错误的情况，我编写了以下代码并尝试在我的电脑上编译，

```
#include <iostream>

using namespace std;

class game
{
   int x;

   public : 
   char *s;
   char read();
   char manipulation();
};

char game :: read()
{
   char string[100];
   cout<<"Enter name ";
   cin>>string;
   s = string;
   cout<<"Name is "<<&s<<endl;
}

int main()
{ 
   game games,games1;
  // games.read();
   cout<<"Name is "<<games.s<<endl;
   return 0;
} 
```

如果我在 main 中执行 games.read()，我的防病毒软件 BITDEFENDER 会显示以下错误，“BITDEFENDER 在 c:/c++/inline.exe 中检测到受感染的项目。病毒名称：Gen:Variant.Graftor。 51542\. 为保护您，该文件已被消毒”

inline.cpp 是我的程序的名称。如果我删除该行“games.read()”，它编译得很好。指针是否在某处导致内存泄漏？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T23:22:20.603

您的防病毒程序刚刚发现了一个释放后使用漏洞。

`string`是一个*本地*数组。退出
后无法使用。`read()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:24:05.383

如果您的系统声称您的代码是病毒，那么从某种意义上说，您正在失去理智，这没什么好担心的。你不是。

病毒扫描程序将寻找与病毒一致的行为模式并报告它们。它们并不完美，非病毒行为有时看起来像病毒。

例如，一个经典的病毒策略是使用无效指针写入来运行任意代码。最早的病毒之一使用了这个，它仍然是一种常见的策略（我记得不久前的一个 IE 更新来解决这个问题）。因此，如果您有一个指针错误（如上一张海报所述），那么它可能看起来像病毒。

# java - 用于 JTextField 数组的 ActionListener

> ID：14328615
> 
> 赞同：0
> 
> 时间：2013-01-14T23:20:34.180
> 
> 标签：java, swing

我想根据 JTextField 的内容将其内容居中。

```
 for(int i=0; i<10; i++){                                   
           txtFields[i] = new JTextField(20); 

           txtFields[i].addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    txtFields[i].setHorizontalAlignment(JTextField.CENTER);
                }
            });
        } 
```

我收到错误，无法在内部类中访问局部变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:31:20.047

这是因为该变量`i`在调用 actionPerformed 的范围内不可用。一个简单的解决方法是在 for 循环的范围内声明一个 final 变量：

```
for (int i = 0; i < 10; i++) {    
    final JTextField currentField = new JTextField(20);                               
    txtFields[i] = currentField;
    txtFields[i].addActionListener(new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent e) {
             currentField.setHorizontalAlignment(JTextField.CENTER);
         }
    });
} 
```

或者：

```
for (int i = 0; i < 10; i++) {                             
    txtFields[i] = new JTextField(20);
    txtFields[i].addActionListener(new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent e) {
             ((JTextField) e.getSource()).setHorizontalAlignment(JTextField.CENTER);
         }
    });
} 
```

就个人而言，我建议您创建一个在其构造函数中接受 JTextField 的 ActionListener 子类。这是一种更简洁的方法，有助于减少您遇到的令人困惑的缺陷。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:26:04.010

就在“addActionListener”语句之前写“final int j = i;”，然后在内部类中使用“j”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T16:00:45.530

为什么是 ActionListener？也许我误解了您的要求，但这不会满足您的要求：

```
for (int i=0; i<10; i++)
{                                   
  txtFields[i] = new JTextField(20);
  txtFields[i].setHorizontalAlignment(JTextField.CENTER);
} 
```

# sql - 在Oracle中将字符串拆分为多行

> ID：14328621
> 
> 赞同：123
> 
> 时间：2013-01-14T23:20:58.903
> 
> 标签：sql, string, oracle, plsql, tokenize

我知道 PHP 和 MYSQL 已经在某种程度上回答了这个问题，但我想知道是否有人可以教我在 Oracle 10g（最好）和 11g 中将字符串（逗号分隔）拆分为多行的最简单方法。

表格如下：

```
Name | Project | Error 
108    test      Err1, Err2, Err3
109    test2     Err1 
```

我想创建以下内容：

```
Name | Project | Error
108    Test      Err1
108    Test      Err2 
108    Test      Err3 
109    Test2     Err1 
```

我已经看到了一些关于堆栈的潜在解决方案，但是它们只占一列（即逗号分隔的字符串）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2014-11-25T22:05:43.773

这可能是一种改进的方式（也使用正则表达式和连接方式）：

```
with temp as
(
    select 108 Name, 'test' Project, 'Err1, Err2, Err3' Error  from dual
    union all
    select 109, 'test2', 'Err1' from dual
)
select distinct
  t.name, t.project,
  trim(regexp_substr(t.error, '[^,]+', 1, levels.column_value))  as error
from 
  temp t,
  table(cast(multiset(select level from dual connect by  level <= length (regexp_replace(t.error, '[^,]+'))  + 1) as sys.OdciNumberList)) levels
order by name 
```

**编辑**：这是查询的简单（如“不深入”）解释。

1.  `length (regexp_replace(t.error, '[^,]+')) + 1`用于`regexp_replace`擦除不是分隔符的任何内容（在本例中为逗号）并`length +1`获取有多少元素（错误）。
2.  使用**分层查询**`select level from dual connect by level <= (...)`创建一列，找到的匹配数从 1 增加到错误总数。

     **预习：

    ```
    select level, length (regexp_replace('Err1, Err2, Err3', '[^,]+'))  + 1 as max 
    from dual connect by level <= length (regexp_replace('Err1, Err2, Err3', '[^,]+'))  + 1 
    ```** 
***   `table(cast(multiset(.....) as sys.OdciNumberList))`做一些预言类型的转换。
    *   将`cast(multiset(.....)) as sys.OdciNumberList`多个集合（原始数据集中的每一行一个集合）转换为一个数字集合 OdciNumberList。
    *   该`table()`函数将集合转换为结果集。*   `FROM`没有连接会在您的数据集和多重集之间创建**交叉连接。**结果，数据集中具有 4 个匹配项的行将重复 4 次（在名为“column_value”的列中的数字越来越多）。

    预习：

    ```
    select * from 
    temp t,
    table(cast(multiset(select level from dual connect by  level <= length (regexp_replace(t.error, '[^,]+'))  + 1) as sys.OdciNumberList)) levels 
    ```

    *   `trim(regexp_substr(t.error, '[^,]+', 1, levels.column_value))`将`column_value`用作 的*nth_appearance/ocurrence*参数`regexp_substr`。*   您可以从数据集中添加一些其他列（`t.name, t.project`作为示例）以便于可视化。**

 **对 Oracle 文档的一些参考：

*   [正则表达式_REPLACE](https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions130.htm)
*   [REGEXP_SUBSTR](https://docs.oracle.com/cd/B12037_01/server.101/b10759/functions116.htm)
*   [可扩展性常量、类型和映射 (OdciNumberList)](https://docs.oracle.com/cd/B19306_01/appdev.102/b14289/dcicnstnts.htm#sthref951)
*   [CAST（多组）](https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions016.htm)
*   [分层查询](https://docs.oracle.com/cd/B19306_01/server.102/b14200/queries003.htm)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-15T04:12:10.063

正则表达式是一件很棒的事情:)

```
with temp as  (
       select 108 Name, 'test' Project, 'Err1, Err2, Err3' Error  from dual
       union all
       select 109, 'test2', 'Err1' from dual
     )

SELECT distinct Name, Project, trim(regexp_substr(str, '[^,]+', 1, level)) str
  FROM (SELECT Name, Project, Error str FROM temp) t
CONNECT BY instr(str, ',', 1, level - 1) > 0
order by Name 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-05-05T05:24:26.160

以下两者之间存在巨大差异：

*   拆分单个分隔字符串
*   为表中的多行拆分分隔字符串。

如果您不限制行，则**CONNECT BY**子句将产生**多行**并且不会提供所需的输出。

*   对于单个分隔字符串，请查看将[**单个逗号分隔的字符串拆分为行**](http://lalitkumarb.wordpress.com/2014/12/02/split-comma-delimited-string-into-rows-using-oracle-sql/)
*   要在表格中拆分分隔字符串，请查看在表格中[**拆分逗号分隔字符串**](http://lalitkumarb.wordpress.com/2015/03/04/split-comma-delimited-strings-in-a-table-using-oracle-sql/)

除了**Regular Expressions**之外，还有其他一些替代方法正在使用：

*   **XML表**
*   **模型**子句

**设置**

```
SQL> CREATE TABLE t (
  2    ID          NUMBER GENERATED ALWAYS AS IDENTITY,
  3    text        VARCHAR2(100)
  4  );

Table created.

SQL>
SQL> INSERT INTO t (text) VALUES ('word1, word2, word3');

1 row created.

SQL> INSERT INTO t (text) VALUES ('word4, word5, word6');

1 row created.

SQL> INSERT INTO t (text) VALUES ('word7, word8, word9');

1 row created.

SQL> COMMIT;

Commit complete.

SQL>
SQL> SELECT * FROM t;

        ID TEXT
---------- ----------------------------------------------
         1 word1, word2, word3
         2 word4, word5, word6
         3 word7, word8, word9

SQL> 
```

使用**XMLTABLE**：

```
SQL> SELECT id,
  2         trim(COLUMN_VALUE) text
  3  FROM t,
  4    xmltable(('"'
  5    || REPLACE(text, ',', '","')
  6    || '"'))
  7  /

        ID TEXT
---------- ------------------------
         1 word1
         1 word2
         1 word3
         2 word4
         2 word5
         2 word6
         3 word7
         3 word8
         3 word9

9 rows selected.

SQL> 
```

使用**MODEL**子句：

```
SQL> WITH
  2  model_param AS
  3     (
  4            SELECT id,
  5                      text AS orig_str ,
  6                   ','
  7                          || text
  8                          || ','                                 AS mod_str ,
  9                   1                                             AS start_pos ,
 10                   Length(text)                                   AS end_pos ,
 11                   (Length(text) - Length(Replace(text, ','))) + 1 AS element_count ,
 12                   0                                             AS element_no ,
 13                   ROWNUM                                        AS rn
 14            FROM   t )
 15     SELECT   id,
 16              trim(Substr(mod_str, start_pos, end_pos-start_pos)) text
 17     FROM     (
 18                     SELECT *
 19                     FROM   model_param MODEL PARTITION BY (id, rn, orig_str, mod_str)
 20                     DIMENSION BY (element_no)
 21                     MEASURES (start_pos, end_pos, element_count)
 22                     RULES ITERATE (2000)
 23                     UNTIL (ITERATION_NUMBER+1 = element_count[0])
 24                     ( start_pos[ITERATION_NUMBER+1] = instr(cv(mod_str), ',', 1, cv(element_no)) + 1,
 25                     end_pos[iteration_number+1] = instr(cv(mod_str), ',', 1, cv(element_no) + 1) )
 26                 )
 27     WHERE    element_no != 0
 28     ORDER BY mod_str ,
 29           element_no
 30  /

        ID TEXT
---------- --------------------------------------------------
         1 word1
         1 word2
         1 word3
         2 word4
         2 word5
         2 word6
         3 word7
         3 word8
         3 word9

9 rows selected.

SQL> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-01-17T20:27:58.823

还有几个相同的例子：

```
SELECT trim(regexp_substr('Err1, Err2, Err3', '[^,]+', 1, LEVEL)) str_2_tab
  FROM dual
CONNECT BY LEVEL <= regexp_count('Err1, Err2, Err3', ',')+1
/

SELECT trim(regexp_substr('Err1, Err2, Err3', '[^,]+', 1, LEVEL)) str_2_tab
  FROM dual
CONNECT BY LEVEL <= length('Err1, Err2, Err3') - length(REPLACE('Err1, Err2, Err3', ',', ''))+1
/ 
```

此外，可以使用 DBMS_UTILITY.comma_to_table 和 table_to_comma： [http ://www.oracle-base.com/articles/9i/useful-procedures-and-functions-9i.php#DBMS_UTILITY.comma_to_table](http://www.oracle-base.com/articles/9i/useful-procedures-and-functions-9i.php#DBMS_UTILITY.comma_to_table)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-10-27T13:55:39.770

我想提出一种使用 PIPELINED 表函数的不同方法。它有点类似于 XMLTABLE 的技术，只是您提供了自己的自定义函数来拆分字符串：

```
-- Create a collection type to hold the results
CREATE OR REPLACE TYPE typ_str2tbl_nst AS TABLE OF VARCHAR2(30);
/

-- Split the string according to the specified delimiter
CREATE OR REPLACE FUNCTION str2tbl (
  p_string    VARCHAR2,
  p_delimiter CHAR DEFAULT ',' 
)
RETURN typ_str2tbl_nst PIPELINED
AS
  l_tmp VARCHAR2(32000) := p_string || p_delimiter;
  l_pos NUMBER;
BEGIN
  LOOP
    l_pos := INSTR( l_tmp, p_delimiter );
    EXIT WHEN NVL( l_pos, 0 ) = 0;
    PIPE ROW ( RTRIM( LTRIM( SUBSTR( l_tmp, 1, l_pos-1) ) ) );
    l_tmp := SUBSTR( l_tmp, l_pos+1 );
  END LOOP;
END str2tbl;
/

-- The problem solution
SELECT name, 
       project, 
       TRIM(COLUMN_VALUE) error
  FROM t, TABLE(str2tbl(error)); 
```

结果：

```
 NAME PROJECT    ERROR
---------- ---------- --------------------
       108 test       Err1
       108 test       Err2
       108 test       Err3
       109 test2      Err1 
```

这种方法的问题是优化器通常不知道表函数的基数，它必须进行猜测。这可能对您的执行计划有害，因此可以扩展此解决方案以为优化器提供执行统计信息。

您可以通过在上面的查询上运行 EXPLAIN PLAN 来查看此优化器估计：

```
Execution Plan
----------------------------------------------------------
Plan hash value: 2402555806

----------------------------------------------------------------------------------------------
| Id  | Operation                          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                   |         | 16336 |   366K|    59   (0)| 00:00:01 |
|   1 |  NESTED LOOPS                      |         | 16336 |   366K|    59   (0)| 00:00:01 |
|   2 |   TABLE ACCESS FULL                | T       |     2 |    42 |     3   (0)| 00:00:01 |
|   3 |   COLLECTION ITERATOR PICKLER FETCH| STR2TBL |  8168 | 16336 |    28   (0)| 00:00:01 |
---------------------------------------------------------------------------------------------- 
```

即使该集合只有 3 个值，优化器仍为它估计 8168 行（默认值）。起初这似乎无关紧要，但优化器决定次优计划可能就足够了。

解决方案是使用优化器扩展为集合提供统计信息：

```
-- Create the optimizer interface to the str2tbl function
CREATE OR REPLACE TYPE typ_str2tbl_stats AS OBJECT (
  dummy NUMBER,

  STATIC FUNCTION ODCIGetInterfaces ( p_interfaces OUT SYS.ODCIObjectList )
  RETURN NUMBER,

  STATIC FUNCTION ODCIStatsTableFunction ( p_function  IN  SYS.ODCIFuncInfo,
                                           p_stats     OUT SYS.ODCITabFuncStats,
                                           p_args      IN  SYS.ODCIArgDescList,
                                           p_string    IN  VARCHAR2,
                                           p_delimiter IN  CHAR DEFAULT ',' )
  RETURN NUMBER
);
/

-- Optimizer interface implementation
CREATE OR REPLACE TYPE BODY typ_str2tbl_stats
AS
  STATIC FUNCTION ODCIGetInterfaces ( p_interfaces OUT SYS.ODCIObjectList )
  RETURN NUMBER
  AS
  BEGIN
    p_interfaces := SYS.ODCIObjectList ( SYS.ODCIObject ('SYS', 'ODCISTATS2') );
    RETURN ODCIConst.SUCCESS;
  END ODCIGetInterfaces;

  -- This function is responsible for returning the cardinality estimate
  STATIC FUNCTION ODCIStatsTableFunction ( p_function  IN  SYS.ODCIFuncInfo,
                                           p_stats     OUT SYS.ODCITabFuncStats,
                                           p_args      IN  SYS.ODCIArgDescList,
                                           p_string    IN  VARCHAR2,
                                           p_delimiter IN  CHAR DEFAULT ',' )
  RETURN NUMBER
  AS
  BEGIN
    -- I'm using basically half the string lenght as an estimator for its cardinality
    p_stats := SYS.ODCITabFuncStats( CEIL( LENGTH( p_string ) / 2 ) );
    RETURN ODCIConst.SUCCESS;
  END ODCIStatsTableFunction;

END;
/

-- Associate our optimizer extension with the PIPELINED function   
ASSOCIATE STATISTICS WITH FUNCTIONS str2tbl USING typ_str2tbl_stats; 
```

测试生成的执行计划：

```
Execution Plan
----------------------------------------------------------
Plan hash value: 2402555806

----------------------------------------------------------------------------------------------
| Id  | Operation                          | Name    | Rows  | Bytes | Cost (%CPU)| Time     |
----------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT                   |         |     1 |    23 |    59   (0)| 00:00:01 |
|   1 |  NESTED LOOPS                      |         |     1 |    23 |    59   (0)| 00:00:01 |
|   2 |   TABLE ACCESS FULL                | T       |     2 |    42 |     3   (0)| 00:00:01 |
|   3 |   COLLECTION ITERATOR PICKLER FETCH| STR2TBL |     1 |     2 |    28   (0)| 00:00:01 |
---------------------------------------------------------------------------------------------- 
```

如您所见，上面计划中的基数不再是 8196 的猜测值。它仍然不正确，因为我们将列而不是字符串文字传递给函数。

在这种特殊情况下，需要对函数代码进行一些调整才能更准确地估计，但我认为这里已经大致解释了整体概念。

此答案中使用的 str2tbl 函数最初由 Tom Kyte 开发： [https ://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:110612348061](https://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:110612348061)

可以通过阅读本文进一步探索将统计信息与对象类型相关联的概念： [http ://www.oracle-developer.net/display.php?id=427](http://www.oracle-developer.net/display.php?id=427)

此处描述的技术适用于 10g+。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-06-06T12:48:07.370

从 Oracle 12c 开始，您可以使用`JSON_TABLE`and `JSON_ARRAY`：

```
CREATE TABLE tab(Name, Project, Error) AS
SELECT 108,'test' ,'Err1, Err2, Err3' FROM dual UNION 
SELECT 109,'test2','Err1'             FROM dual; 
```

并查询：

```
SELECT *
FROM tab t
OUTER APPLY (SELECT TRIM(p) AS p
            FROM JSON_TABLE(REPLACE(JSON_ARRAY(t.Error), ',', '","'),
           '$[*]' COLUMNS (p VARCHAR2(4000) PATH '$'))) s; 
```

输出：

```
┌──────┬─────────┬──────────────────┬──────┐
│ Name │ Project │      Error       │  P   │
├──────┼─────────┼──────────────────┼──────┤
│  108 │ test    │ Err1, Err2, Err3 │ Err1 │
│  108 │ test    │ Err1, Err2, Err3 │ Err2 │
│  108 │ test    │ Err1, Err2, Err3 │ Err3 │
│  109 │ test2   │ Err1             │ Err1 │
└──────┴─────────┴──────────────────┴──────┘ 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=oracle_18&fiddle=c01bdae96dc0be5a00e7b342a2bcc26e)**

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-07-21T20:20:46.350

直到 Oracle 11i 才添加 REGEXP_COUNT。这是一个从 Art 的解决方案中采用的 Oracle 10g 解决方案。

```
SELECT trim(regexp_substr('Err1, Err2, Err3', '[^,]+', 1, LEVEL)) str_2_tab
  FROM dual
CONNECT BY LEVEL <=
  LENGTH('Err1, Err2, Err3')
    - LENGTH(REPLACE('Err1, Err2, Err3', ',', ''))
    + 1; 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-12-01T13:16:49.763

这是一个使用 XMLTABLE 的替代实现，它允许转换为不同的数据类型：

```
select 
  xmltab.txt
from xmltable(
  'for $text in tokenize("a,b,c", ",") return $text'
  columns 
    txt varchar2(4000) path '.'
) xmltab
; 
```

...或者如果您的分隔字符串存储在表格的一行或多行中：

```
select 
  xmltab.txt
from (
  select 'a;b;c' inpt from dual union all
  select 'd;e;f' from dual
) base
inner join xmltable(
  'for $text in tokenize($input, ";") return $text'
  passing base.inpt as "input"
  columns 
    txt varchar2(4000) path '.'
) xmltab
  on 1=1
; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-01-14T04:34:56.807

我遇到了同样的问题，xmltable 帮助了我：

SELECT id, trim(COLUMN_VALUE) text FROM t, xmltable(('"' || REPLACE(text, ',', '","') || '"'))

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-08-17T13:54:46.287

我想添加另一种方法。这个使用递归查询，这是我在其他答案中没有看到的。Oracle 从 11gR2 开始支持它。

```
with cte0 as (
    select phone_number x
    from hr.employees
), cte1(xstr,xrest,xremoved) as (
        select x, x, null
        from cte0
    union all        
        select xstr,
            case when instr(xrest,'.') = 0 then null else substr(xrest,instr(xrest,'.')+1) end,
            case when instr(xrest,'.') = 0 then xrest else substr(xrest,1,instr(xrest,'.') - 1) end
        from cte1
        where xrest is not null
)
select xstr, xremoved from cte1  
where xremoved is not null
order by xstr 
```

拆分字符非常灵活。只需在`INSTR`通话中更改它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-11-26T21:31:47.747

不使用**connect by**或**regexp**：

```
 with mytable as (
      select 108 name, 'test' project, 'Err1,Err2,Err3' error from dual
      union all
      select 109, 'test2', 'Err1' from dual
    )
    ,x as (
      select name
      ,project
      ,','||error||',' error
      from mytable
    )
    ,iter as (SELECT rownum AS pos
        FROM all_objects
    )
    select x.name,x.project
    ,SUBSTR(x.error
      ,INSTR(x.error, ',', 1, iter.pos) + 1
      ,INSTR(x.error, ',', 1, iter.pos + 1)-INSTR(x.error, ',', 1, iter.pos)-1
    ) error
    from x, iter
    where iter.pos < = (LENGTH(x.error) - LENGTH(REPLACE(x.error, ','))) - 1; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-28T13:29:29.930

在 Oracle 11g 及更高版本中，您可以使用递归子查询和简单的字符串函数（可能比正则表达式和相关的分层子查询更快）：

**甲骨文设置**：

```
CREATE TABLE table_name ( name, project, error ) as
 select 108, 'test',  'Err1, Err2, Err3' from dual union all
 select 109, 'test2', 'Err1'             from dual; 
```

**查询**：

```
WITH table_name_error_bounds ( name, project, error, start_pos, end_pos ) AS (
  SELECT name,
         project,
         error,
         1,
         INSTR( error, ', ', 1 )
  FROM   table_name
UNION ALL
  SELECT name,
         project,
         error,
         end_pos + 2,
         INSTR( error, ', ', end_pos + 2 )
  FROM   table_name_error_bounds
  WHERE  end_pos > 0
)
SELECT name,
       project,
       CASE end_pos
       WHEN 0
       THEN SUBSTR( error, start_pos )
       ELSE SUBSTR( error, start_pos, end_pos - start_pos )
       END AS error
FROM   table_name_error_bounds 
```

**输出**：

> ```
> 姓名 | 项目 | 错误
> ---: | :-------- | :----
>  108 | 测试 | 错误1
>  109 | 测试2 | 错误1
>  108 | 测试 | 错误2
>  108 | 测试 | 错误3
> 
> ```

*db<>[在这里摆弄](https://dbfiddle.uk/?rdbms=oracle_11.2&fiddle=74868f2e6eb4aff73630ac2b66f611c1)*

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-06T04:36:55.580

如果您安装了 Oracle APEX 5.1 或更高版本，则可以使用便捷`APEX_STRING.split`功能，例如：

```
select q.Name, q.Project, s.column_value as Error
from mytable q,
     APEX_STRING.split(q.Error, ',') s 
```

第二个参数是分隔符字符串。它还接受第三个参数来限制您希望它执行的拆分次数。

[https://docs.oracle.com/en/database/oracle/application-express/20.1/aeapi/SPLIT-Function-Signature-1.html#GUID-3BE7FF37-E54F-4503-91B8-94F374E243E6](https://docs.oracle.com/en/database/oracle/application-express/20.1/aeapi/SPLIT-Function-Signature-1.html#GUID-3BE7FF37-E54F-4503-91B8-94F374E243E6)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2014-10-20T12:18:46.643

我使用了 DBMS_UTILITY.comma_to _table 函数实际上它的工作代码如下

```
declare
l_tablen  BINARY_INTEGER;
l_tab     DBMS_UTILITY.uncl_array;
cursor cur is select * from qwer;
rec cur%rowtype;
begin
open cur;
loop
fetch cur into rec;
exit when cur%notfound;
DBMS_UTILITY.comma_to_table (
     list   => rec.val,
     tablen => l_tablen,
     tab    => l_tab);
FOR i IN 1 .. l_tablen LOOP
    DBMS_OUTPUT.put_line(i || ' : ' || l_tab(i));
END LOOP;
end loop;
close cur;
end; 
```

我使用了自己的表名和列名**

# ruby-on-rails - 嵌套资源 - 第二个对象 id 没有被拉出？

> ID：14328622
> 
> 赞同：0
> 
> 时间：2013-01-14T23:21:06.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我认为这行代码：

```
<%= link_to(@a.heroes[i]['name'], edit_d3user_d3hero_path(@temp_d3user, @temp_d3hero)) %><br/> 
```

我收到以下错误，我不知道为什么

```
No route matches {:action=>"edit", :controller=>"d3heros", :d3user_id=>#<D3user id: 4, x_battleTag: "rwk-1242", x_timePLayed: nil, x_killMnstrTtl: 1014469, x_killsEliteTtl: 51552, x_lastHeroPlayed: "10692899", x_game_id: nil, created_at: "2013-01-14 13:10:35", updated_at: "2013-01-14 23:10:17">, :id=>false} 
```

手动将代码更改为

```
<%= link_to(@a.heroes[i]['name'], edit_d3user_d3hero_path(@temp_d3user, 1)) %><br/> 
```

有效，因此可以将问题隔离到 @temp_d3hero 对象的 id 未被代码拉取。

@temp_d3hero 的调试

```
--- !ruby/object:D3hero
attributes:
  id: 1
  x_name: Ziyi
  x_class: wizard
  x_id: '10692899'
  x_level: 60
  ... 
```

@temp_d3user 的调试

```
--- !ruby/object:D3user
attributes:
  id: 4
  x_battleTag: rwk-1242
  x_timePLayed: !!null 
  x_killMnstrTtl: 1014469 
```

最后是我的模型

D3英雄

```
class D3hero < ActiveRecord::Base
  attr_accessible :x_class, :x_name, :x_level, :x_life, :x_damage, :x_id , :x_gender

  validates :x_id, presence: true, uniqueness: true

  belongs_to :d3user
end 
```

D3用户

```
class D3user < ActiveRecord::Base
  attr_accessible :x_battleTag, :x_game_id, :x_killMnstrTtl, :x_killsEliteTtl, :x_lastHeroPlayed, :x_timePLayed

  has_many :d3heros
end 
```

和路线.rb

```
D3gearcheck::Application.routes.draw do
  get "d3heros/new"

  get "d3users/new"

  resources :users
  resources :sessions, only: [:new, :create, :destroy]
  resources :heroines
  resources :d3users do
    resources :d3heros
  end
  resources :d3heros 
```

非常感谢任何有关如何使其工作的帮助。

谢谢！

更新-控制器

```
def resultv2
@mystring = params[:battleTag]
@mystring.gsub!("#", "-")  

@a = Covetous::Profile::Career.new @mystring
# after is interpret only if no exception before
flash.now[:success] = 'Battle Tag Lookup Successful'
@acount = @a.heroes.count

#### hack -- d3user not created. create it now. Otherwise, update now.

@d3user = D3user.find_by_x_battleTag(@mystring)
if !@d3user
  D3user.create(:x_battleTag => @mystring,
                :x_killMnstrTtl => @a.kills['monsters'],
                :x_killsEliteTtl => @a.kills['elites'],
                :x_lastHeroPlayed => @a.lastHeroPlayed) 
else
  @d3user.update_attributes(:x_battleTag => @mystring,
                           :x_killMnstrTtl => @a.kills['monsters'],
                           :x_killsEliteTtl => @a.kills['elites'],
                           :x_lastHeroPlayed => @a.lastHeroPlayed)     
end 
```

此外，@temp_d3hero 和 @temp_d3user 通过

```
<% @temp_d3user = local_d3user?(params[:battleTag]) %>
<% @temp_d3hero = local_d3hero?(@a.heroes[i]['id']) %> 
```

它也返回有效且正确的对象，如上面 2 个对象的调试所示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:22:43.050

尝试这个

```
<%= link_to(@a.heroes[i]['name'], edit_d3user_d3hero_path(@temp_d3user, @temp_d3hero.id)) %><br/> 
```

# css - div 将高度同步到右侧的对等点

> ID：14328624
> 
> 赞同：1
> 
> 时间：2013-01-14T23:21:13.977
> 
> 标签：css

![在此处输入图像描述](../Images/e0f8bae814295f484956d8c077fea3b1.png)我有一个包含三个子 div 的容器 div。见附件。

中心 div 可以动态拉伸高度。我想要的是如果容器 div 将与中心 div 一起拉伸，那么左侧 div 将拉伸以适应新的容器 div，因此与中心 div 保持同步。

任何人都知道一种纯粹的CSS方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:54:45.337

是的，如果你有一个底部边框，这是有道理的。如果您需要有关 javascript 的帮助，请告诉我们。不过，不会有纯 CSS 方法来实现这一点。您必须使用 javascript 找到中心 div 的高度，并告诉您的左 div 高度相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:27:02.153

这实际上并没有调整列的高度，但是在没有实际内容向下推高度的情况下实现此效果的唯一非 JavaScript 方法是使用假列。您将背景图像应用于模仿列的父元素。不适用于响应式设计，但 A List Apart 的好人在此处解释该方法做得更好[http://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

# matlab - 编辑矩阵中的行，MatLab

> ID：14328625
> 
> 赞同：0
> 
> 时间：2013-01-14T23:21:19.147
> 
> 标签：matlab, matrix, rows

我有一个矩阵，我想使用循环`A`将每一行乘以 2 。`for`

```
A = [1 2 3; 
     4 5 6; 
     7 8 9]; 
```

所以基本上matlab应该输出：

```
[2  4  6; 
 8  10 12; 
 14 16 18]; 
```

我试过：

```
A = [1 2 3 ; 4 5 6  ; 7 8 9];
for i=1:3
    x= A([i],:)*2;
end 
```

但`x`输出为`[14 16 18]`.

我怎样才能得到我想要的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:24:25.660

使用 for 循环将是：

```
for n=1:size(A,1)
    x(n,:)=2*A(n,:);
end 
```

但是没有 for 循环更容易获得相同的结果：

```
x=2*A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:29:24.233

认为每次进入 for 循环时，您的答案都会被覆盖。您也许可以执行以下操作：

```
 for i=1:3
     x([i],:) = A([i],:)*2;
 end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T23:25:54.237

在 MAtlab 中，for 循环非常低效。我建议您在使用 matlab 时学会解决它。对于像这样的小事情，您可能看不到任何有害影响，但对于任何大规模的事情，它是不可以的。

无论如何，对于您的问题，您可以这样做`x = A*2`。那应该给你你的解决方案。

# gmail - 可以从 gmail 上下文小工具保存到外部数据库的字符数是否有限制？

> ID：14328631
> 
> 赞同：0
> 
> 时间：2013-01-14T23:21:48.463
> 
> 标签：gmail, google-apps-script, google-gadget, gmail-contextual-gadgets

我正在编写一个连接到 gmail 以将其与外部应用程序连接的 gmail 上下文小工具。我遇到了一个问题：如果收到的电子邮件似乎超过了大约 1000 个字符，那么我似乎无法将该电子邮件的完整副本直接保存到外部应用程序数据库中（保存少于大约 1000 个的电子邮件内容没有问题人物）。有人可以确认这确实是 Gmail 施加的限制吗？如果是这样，有什么办法可以规避这个限制吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T05:48:13.550

是的，可以提取的数据有 1000 个字符的限制。请参阅“提取器在其每个输出字段中最多可以返回 1,000 个字符”的[限制部分。](https://developers.google.com/google-apps/gmail/contextual_gadgets#limitations)

此外，[故障排除](https://developers.google.com/google-apps/gmail/contextual_gadgets#troubleshooting)部分显示“提取的匹配项不得超过 1000 个字符”

# java - 从电脑使用手机发送短信

> ID：14328632
> 
> 赞同：0
> 
> 时间：2013-01-14T23:21:50.087
> 
> 标签：java, sms, gsm, sms-gateway, kannel

我需要我的计算机程序能够发送和接收 SMS 消息。该软件必须独立于 Internet 运行，因此使用基于 Web 的 SMS 网关不是解决方案。

该软件应该在 linux 或 Windows 机器上运行。Windows 对我的用例更重要。我的程序是用 Java 编写的，但我想可能有独立于编程语言的解决方案。

我正在考虑以下选项之一。

Kannel [http://www.kannel.org/](http://www.kannel.org/)虽然支持 Linux，但我想我可以找到一种在 Windows 中编译它的方法，如下所示：[http ://www.ddj.co.za/kannel-for-windows](http://www.ddj.co.za/kannel-for-windows)

另一个似乎是一个更轻量级的选择[http://smsj.sourceforge.net/](http://smsj.sourceforge.net/)

在没有互联网连接的情况下，您想到的这些或其他方式可能是通过计算机发送 SMS 的更好方式？

我正在考虑使用这些库，所以我不必编写所有的 AT 命令。

还有怎么把手机连接到电脑上？例如，如果我在使用 kannel 时只用 USB 数据线连接手机就可以了。

更新：我需要使用简单的 GSM 手机，而不是依赖于 IOS 或 Android 的特定功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:26:05.140

试试 smslib.org + 一些 GSM 调制解调器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:32:25.797

也许不希望你需要或不想要，但可能对其他人有用：当我的 iPhone 越狱时，有一个 Cydia 应用程序，我用来通过我的手机从我的电脑发送短信，[BiteSMS](http://bitesms.com/)。

您必须 ssh 进入，然后类似于：

```
/Applications/biteSMS.app/biteSMS -send -carrier 077xxxxxx “The message goes here” 
```

显然，您将 077xxx 替换为您要发送到的号码。

看起来它与 Android 的过程非常相似，请查看有关通过 Android 执行[此](https://android.stackexchange.com/questions/18344/rooted-phone-sending-sms-message-via-command-line)操作的问题。同样，这需要与电话建立 ssh 连接。还有一个关于“从命令行发送短信”的谷歌，还有其他可用资源。

至于其他方法，如果不将手机连接到您的计算机并访问操作系统，我看不到任何可行的选择，而 ssh 似乎是最简单的方法。

# c# - 为什么c#中没有监听器？

> ID：14328634
> 
> 赞同：-3
> 
> 时间：2013-01-14T23:21:59.470
> 
> 标签：c#, java

在java中，很多类都支持监听回调，我认为是观察者模式。但是 nc#，我没有找到，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:23:22.350

[C# 支持Delegate](http://msdn.microsoft.com/en-us/library/ms173171%28v=vs.80%29.aspx)形式的第一类函数。

请注意，在您的情况下，[事件](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)是侦听器样式范例的基础。

例如，一个表格：

```
public class Form1
[--snip--]
    public event EventHandler Closed;
    public event EventHandler Clicked; 
```

另一个想要修改该表单的类：

```
public class Other
{
    public static void CloseHandler(object sender, EventArgs e)
    {
        Console.WriteLine("Closed");
    }

    public static void Main(string[] args)
    {
        Form1 form = new Form1();
        form.OnClose += CloseHandler;
        form.OnClick += (s,e) => Console.WriteLine("Click");
    }
} 
```

这（除非语法错误）应该在表单关闭时将“Closed”打印到控制台。并在单击表单时“单击”。请注意，我排除了执行调用以使其简单的代码。

另请注意，C# 中的事件通常被命名为中断事件的现在时（发生在动作之前）和过去时（发生在动作之后）。您通常还有一个 OnClosed 或类似的方法，以允许继承类在不附加事件的情况下覆盖功能，更不用说允许一个中心位置来避免 null 问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T23:24:59.110

C# 将显式`Listener`类型替换为允许客户端注册给定类型的回调的[事件。](http://msdn.microsoft.com/en-us/library/8627sbea.aspx)最近，[响应式扩展](http://msdn.microsoft.com/en-us/data/gg577609.aspx)库实现了观察者模式，允许使用 Linq 转换、过滤等事件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T23:23:44.773

C# 使用委托和事件以及 lambda 表达式，它们允许非常优越的模式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T23:24:39.563

好吧...要列出 C# 中的回调，您可以使用[Delegates](http://msdn.microsoft.com/en-us/library/aa288459%28v=vs.71%29.aspx)、[Events](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)和[Lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)代替 Java 侦听器，充当一流的函数并允许更好的编码模式质量。最近，引入了 Linq [Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577611.aspx)，为开发人员提供了更多工具。

# regex - 使用正则表达式清理 MS Access 查询

> ID：14328640
> 
> 赞同：0
> 
> 时间：2013-01-14T23:22:46.763
> 
> 标签：regex, ms-access

我想在 MS Access 查询中清理（转义特殊字符），具有以下字段：('''2', 'Last Motion', '', 'DooMotion Plugin', 1, '-', True, #12/ 30/2012 07:55:00#, #12/30/2012 07:55:00#, #01/1/2001 00:00:00#)

此处列出了特殊字符及其转义方式：http: [//support.microsoft.com/kb/826763/en-us](http://support.microsoft.com/kb/826763/en-us)。简而言之，特殊字符是：？@ " ' # % ~ ; [ ] { } ( ) 并且可以通过将它们放入括号 [] 中进行转义。

我的问题是是否可以一次使用正则表达式清理整个查询。如果是，请举例说明。

如果不可能，那么我可以将其分解为字段级别并单独清理每个字段。如何用正则表达式做到这一点。

问候，乔斯特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:04:18.457

按照 Anton 的建议，如何在 .NET 中使用查询参数？这是我目前使用的代码：

```
objConn = CreateObject("ADODB.Connection")
objCatalog = CreateObject("ADOX.Catalog")
objConn.Open("Provider=Microsoft.Jet.OLEDB.4.0; Data Source=" & strDatabase)
objCatalog.activeConnection = objConn
sql = "INSERT INTO Devices (Code, Name) VALUES ("'" & fCode & "','" & fName & "')"
objConn.execute(sql) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:10:39.233

对于那些想知道在 .NET 中使用参数的解决方案的人，这里是代码：

```
Dim queryString As String = "INSERT INTO Devices (name, version) VALUES (@Name, @Version)"
' Open database connection.
Using connection As New OleDb.OleDbConnection(connectionString)
    Dim command As New OleDb.OleDbCommand(queryString)
    ' Strongly typed.
    command.Parameters.Add("@Name", OleDb.OleDbType.VarChar, 255).Value = Me.TextBox1.Text
    command.Parameters.Add("@Version", OleDb.OleDbType.Integer).Value = Me.TextBox2.Text
    command.Connection = connection 'Set the Connection to the new OleDbConnection

    ' Open the connection and execute the insert command.
    Try
        connection.Open()
        command.ExecuteNonQuery()
    Catch ex As Exception
        Console.WriteLine(ex.Message)
    End Try
End Using 'The connection is automatically closed when the code exits the Using block 
```

再次感谢 Anton 为我指出正确的解决方案。

# mongodb - 如何在 MongoDB 中创建嵌套组？

> ID：14328642
> 
> 赞同：0
> 
> 时间：2013-01-14T23:22:51.287
> 
> 标签：mongodb

假设 Mongo 中有一个数据！有几个项目，还有经理，问题被分配给了谁。每个问题都分配给不同的人，因为项目有不同的部分。如何计算数字，每个受让人都已在项目中分配。例如：

```
{
    "Project A": {
            "Ted":10,
            "Matt":5
            },
    "Project B": {
            "Mary":3,
            "Hector":30
            }
} 
```

以下写入总和但不分组：

```
db.test.issues.group({
    "key": {
        "project": true
        "assignee":true
    },
    "initial": {
        "countassignee": 0
    },
    "reduce": function(obj, prev) {
        prev.countassignee++;
    }
}); 
```

它将返回为：

```
{
{
"project": "Project A",
"countassignee":10,
"assignee":"Ted" 
}
....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T07:55:22.397

您提供的数据样本非常混乱。它的项目 A 和项目 B 应该是不同的文件。我相信组的最佳用途是在集合中进行聚合，如果您想在文档中计数，您可以使用 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T11:03:09.820

好的！这似乎不是最好的答案，但它会做！首先定义一个按项目排序的游标

```
var cursor = db.test.find().sort({projects:1}); 
```

计数器列表：

```
var asgn_nums = {}; 
```

和一个保存项目名称的变量；：

```
var project = '0'; 
```

这里对每个项目都很重要：

```
while (cursor.hasNext()) {
    var issue = cursor.next();
    var p = issue.project;
    if(p != project)
    {
        if(project != '0'){
            print(project+":");
            printjson(asgn_nums);
        }
        project = p;
        asgn_nums = {};
    }
    if(issue.assignee != null)
    {
        if (asgn_nums[issue.assignee] == null)
            asgn_nums[issue.assignee] = 1;
        else
            asgn_nums[issue.assignee]+= 1;
    }
    if(!cursor.hasNext())
    {
        print(project+":");
        printjson(asgn_nums);
    }
} 
```

# php - php str_replace 其他函数

> ID：14328649
> 
> 赞同：0
> 
> 时间：2013-01-14T23:23:46.567
> 
> 标签：php, string, url-rewriting, str-replace

我正在运行一个 mp3 爬虫网站，我想从 URL 中删除 Get/，因为它会导致我的 seo 出现问题，请查看这个 mp3begins.com，

我尝试使用 str_replace 删除“/”但没有成功。

```
$latestitem = $row['term'];
$latestsearch = trim(str_replace(" ","-",strtolower($latestitem)));
$latest_item = stripslashes($latestitem);
$latest_search = stripslashes($latestsearch);
$latestsearch123 = str_replace(" / "," ",$latest_item); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:26:19.120

你试过这个吗？

```
$latestsearch123 = str_replace("/","",$latest_item); 
```

还是空格是故意的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:36:59.963

你可以使用 preg_replace：

```
$yourUrl = "Get/some/Url/you/have";
$trimmedUrl = preg_replace('/Get\\//', '', $yourUrl); 
//result: "some/Url/you/have" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:43:01.610

`$latestsearch123 = str_replace(" / "," ",$latest_item);`将搜索前面有一个空格，后面有一个空格的斜线。那是你打算做的吗？试试没有空格。

# heroku - 如何使 awesome_print 成为 heroku 控制台中的默认值？

> ID：14328650
> 
> 赞同：6
> 
> 时间：2013-01-14T23:23:48.033
> 
> 标签：heroku, gem, awesomeprint

如何使 awesome_print 成为 heroku 控制台中的默认值？

当我`Model.all`在控制台中输入时，我希望 awesome_print 无需输入即可显示结果`ap Model.all`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-30T10:18:36.547

以下 gem 组合似乎在 Rails 4 中完成了它。

```
# for the pretty
gem 'pry'
gem 'pry-rails'
gem 'pry-doc'
gem 'pry-awesome_print'
gem "awesome_print" 
```

您也可以从`.pryrc`以下行中删除，它仍然可以工作：

```
require 'awesome_print'
AwesomePrint.pry! 
```

印刷愉快！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T04:25:10.770

尝试安装 pry，它具有出色的打印等功能，并具有安装到 rails 应用程序的说明：http: [//pryrepl.org/](http://pryrepl.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-03T16:39:15.253

如果你有 awesome_print gem，你只需`AwesomePrint.irb!`在控制台中使用，瞧.. 它会按照你想要的方式显示输出。

# iphone - exteriorWhenContainedIn 未按预期工作

> ID：14328654
> 
> 赞同：1
> 
> 时间：2013-01-14T23:23:58.147
> 
> 标签：iphone, ios, objective-c, uiappearance

我正在使用 iOS 的 UIAppearanceProxy 来自定义我的应用程序的外观。

在大多数应用程序中，我希望导航栏有一个背景图像。在应用程序的一个特定部分，我希望导航栏具有不同的背景图像。

这就是我正在做的事情`application:didFinishLaunchingWithOptions:`

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navbar_bg1"]
                                   forBarMetrics:UIBarMetricsDefault];

[[UINavigationBar appearanceWhenContainedIn:[DiscoverViewController class], nil] setBackgroundImage:[UIImage imageNamed:@"navbar_bg2"]                                                   forBarMetrics:UIBarMetricsDefault]; 
```

我想将所有外观代码保存在一个地方，而不是覆盖特定视图控制器中的导航栏。

同样有助于了解的是，我的应用程序由 TabBarController 构成，其中每个选项卡控制一个 NavigationController，它拥有一个子类 ViewController，如上面的 DiscoverViewController。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T23:33:11.620

正如您刚才所说，导航栏不包含在`DiscoverViewController`您的层次结构中；相反，两者都包含在导航控制器中。保持外观代码集中的一种方法是创建一个空的子类`UINavigationController`并将其实例化，而不是`UINavigationController`在相关位置（无论是 nib 还是情节提要或仅以编程方式）。然后，要设置子元素的样式，请在“包含时”`DiscoveryNavigationController`或您拥有的外观代理中获取它们。我过去使用过这种方法，效果很好。

# jquery - 按键上的jQuery openmenu

> ID：14328659
> 
> 赞同：0
> 
> 时间：2013-01-14T23:24:31.850
> 
> 标签：jquery, menu

我创建了一个 jQuery 脚本，您需要按 numpad0 并打开一个菜单。粘贴`jQuery('.panel_toggle').trigger('click');`工作并调出菜单但将其放在功能中不起作用。另外我必须注意，控制台注册我按 numpad0 以便正常工作。

```
jQuery(document).ready(function() {
   jQuery(".panel_toggle").toggle(function() { 
      jQuery('#panel_stats').stop().animate({'height':'415px'},500)
    },function() {
      jQuery('#panel_stats').stop().animate({'height':'0px'},500)
    });

   jQuery('body, html').live('keypress', openMenu)
});

function openMenu(e){
   console.log(e.keyCode)
   if(e.keyCode == '96')
   {
      e.preventDefault()
      jQuery('.panel_toggle').trigger('click');
    }
} 
```

无论如何，我很困惑。

# ajax - Ajax 服务器端同步 HTTP 请求？

> ID：14328660
> 
> 赞同：0
> 
> 时间：2013-01-14T23:24:33.650
> 
> 标签：ajax, jquery

我正在建立一个网站，该网站有一个定期生成文件到硬盘驱动器的 cron 作业。但是，这一代的时间并不精确，我希望它在访问者的浏览器生成后立即加载。

有没有一种好方法可以让我的服务器通知访问者的浏览器重新加载页面？其他方式很重:(

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:42:48.030

您应该阅读有关**Comet**的信息，Comet 允许您从服务器端接收“推送”到客户端。

例如，。这就是facebook聊天的工作方式..

看看， [http://en.wikipedia.org/wiki/Comet_(programming)](http://en.wikipedia.org/wiki/Comet_%28programming%29)

# css - LESS CSS 转义过滤器

> ID：14328664
> 
> 赞同：0
> 
> 时间：2013-01-14T23:24:42.733
> 
> 标签：css, less

我需要我的 LESS 文件来编译以下过滤器：

```
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); 
```

我似乎无法找出正确的语法来逃避它，因为 LESS 正在剥离 + 符号和空格。我设法通过添加反斜杠来保留 + 号。但这对空间不起作用。我敢肯定这非常容易，但我想不通;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:40:41.607

试试这个：

```
filter: ~"url('data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale')"; 
```

# lua - 尝试索引本地“g2”（函数值）

> ID：14328666
> 
> 赞同：1
> 
> 时间：2013-01-14T23:24:43.353
> 
> 标签：lua

我正在使用的程序叫做**Oxidizer**，一个*分形 flam3*编辑器。基本上，为了使这些美丽的数字艺术作品动起来，我使用`.lua`脚本。

我正在使用的一个脚本`algorhythm.lua`调用其他脚本来运行。一个是控制脚本，`cs_temp.lua`另一个是`utils.lua`. 这是我得到错误的地方。

显示为错误的特定行是**1399**，即以下代码中的第二行。

```
function alignx(g1,g2)
   local x1,x2 = #g1.xforms,#g2.xforms
 -- Align xforms for final-x, pad if necessary
local fx1,fx2 = 0,0

for x=1,x1 do
      if g1.xforms[x].is_finalxform == "Y" then fx1 = x end
   end
   for x=1,x2 do
      if g2.xforms[x].is_finalxform == "Y" then fx2 = x end
   end
   if fx1>0 or fx2>0 then

  -- case 1: both have finalx - reorder g2

  if fx1>0 and fx2>0 and fx1~=fx2 then
 print('case 1')
 if fx1>x2 then              -- pad g2 with sufficient xforms
    for i=1,math.abs(fx1-x2) do 
       table.insert(g2.xforms,newx())
       print("adding xform to genome 2") 
    end
    x2 = #g2.xforms
 end
 x2ind = agen(x2,1,x2)
 x2ind[fx2] = fx1
 x2ind[fx1] = fx2
 xforms2 = ordx(g2.xforms,x2ind)
 g2.xforms = xforms2
  end

  -- case 2: g1 has finalx but not g2 - xpad and reorder g2
  if fx1>0 and fx2==0 then
 print('case 2')             -- pad g2 with final xform
 local xtmp = newx(1)
 xtmp.is_finalxform = 'Y'
 xtmp.symmetry = 1
 table.insert(g2.xforms,clone_genome(xtmp))
 print("adding final xform to genome 2") 
 x2 = #g2.xforms
 fx2 = x2
 if fx1>x2 then              -- pad g2 with sufficient xforms
    for i=1,math.abs(fx1-x2) do 
       table.insert(g2.xforms,newx())
       print("adding xform to genome 2") 
    end
    x2 = #g2.xforms
 end
 x2ind = agen(x2,1,x2)
 x2ind[fx2] = fx1
 x2ind[fx1] = fx2
 xforms2 = ordx(g2.xforms,x2ind)
 g2.xforms = xforms2
  end

  -- case 3: g2 has finalx but not g1 - xpad g1 and reorder g2
  if fx1==0 and fx2>0 then
 print('case 3')
 local xtmp = newx(1)
 xtmp.is_finalxform = 'Y'
 xtmp.symmetry = 1
 table.insert(g1.xforms,clone_genome(xtmp))
 print("adding final xform to genome 1") 
 x1 = #g1.xforms
 fx1 = x1
 if fx1>x2 then              -- pad g2 with sufficient xforms
    for i=1,math.abs(fx1-x2) do 
       table.insert(g2.xforms,newx())
       print("adding xform to genome 2") 
    end
    x2 = #g2.xforms
 end
 x2ind = agen(x2,1,x2)
 x2ind[fx2] = fx1
 x2ind[fx1] = fx2
 xforms2 = ordx(g2.xforms,x2ind)
 g2.xforms = xforms2
  end
 end
end 
```

我知道要筛选的内容很多，但我想尽可能具体。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T01:23:05.687

根据您的问题（仍不清楚），以下行是有问题的行：

```
local x1,x2 = #g1.xforms,#g2.xforms 
```

*Lua*程序中出现错误**尝试索引**，因为您需要将其初始化为表，这再次要求成为表。*`g2.xforms``g2`*

 *检查您的整个代码并跟踪您定义`g2`为函数的任何地方，因为您的程序将其解释为函数变量而不是表。*

# supercsv - SuperCSV 的能力

> ID：14328668
> 
> 赞同：3
> 
> 时间：2013-01-14T23:25:04.127
> 
> 标签：supercsv

我正在考虑使用 SuperCSV 检查我收到的一些文件的内容。文件的格式是这样的：它有一个标题记录，后跟数据记录，然后是 CRC32 校验和值。

例如

```
ABC|2|20130115150327|
1|1234567890123456|1234|20130109204710|21130109204710|
2|6543210987654321|1234|20130110043658|21130110043658|
1A345C7D 
```

在这种情况下，我对 SuperCSV 的功能有几个疑问。

*   它是否允许您针对不同的定义验证不同的行，即一个用于标题记录，一个用于数据记录？
*   它是否允许您验证分隔符（在这种情况下为管道“|”）必须附加到行尾？
*   是否有或有人编写过验证十六进制值的 CellProcessor？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T03:12:25.893

> *   它是否允许您针对不同的定义验证不同的行，即一个用于标题记录，一个用于数据记录？

是的。通常，您会`getHeader()`使用不使用 CellProcessors 来读取标题，但没有什么可以阻止您`read()`使用 CellProcessors 将标题作为普通行读取。每次调用都`read()`允许您传入 CellProcessor，因此您可以使用 3 个不同的 CellProcessor 数组以不同方式处理/验证标题、数据行和校验和。

> *   它是否允许您验证分隔符（在这种情况下为管道“|”）必须附加到行尾？

当您`|`用作分隔符时，最后一列将被视为空列 ( `null`)。这意味着用于读取标题的 CellProcessor 数组必须有 4 个元素（或 6 个用于数据行），否则您将收到异常，指出列数与单元处理器的数量不匹配。通过在末尾放置一个`new Equals(null)`处理器，您基本上可以验证该行是否以`|`.

> *   是否有或有人编写过验证十六进制值的 CellProcessor？

您可以使用现有的单元处理器`new StrRegex("[0-9A-F]+")`使用正则表达式进行验证。您甚至可以使用[StrRegex.registerMessage() 为验证错误注册一条人类可读的消息（例如“不是有效的十六进制值”）](http://supercsv.sourceforge.net/apidocs/org/supercsv/cellprocessor/constraint/StrRegEx.html#method_summary)。

如果您想将十六进制解析为数字（可能不是，但以防万一），那么`ParseHex`Super CSV 中没有现有的 CellProcessor。如果您编写一个并提交一个补丁，我会将它包含在即将发布的版本中！根据数字的大小，也许最好更新[ParseLong](http://supercsv.sourceforge.net/apidocs/org/supercsv/cellprocessor/ParseLong.html)以拥有另一个接受基数（在本例中为 16）的构造函数？

我建议保持简单并使用[CsvListReader](http://supercsv.sourceforge.net/apidocs/org/supercsv/io/CsvListReader.html)（您可以使用其他阅读器，但您需要定义一个 nameMapping 数组来为标题、数据和校验和行提供列名），如下所示：

1.  使用 'header' CellProcessor 数组读取第一行（我假设第二列是后面的数据行数？）。

2.  使用“数据”CellProcessor 数组读取数据行*n*次（其中*n*由第二个标题列给出）。

3.  使用“校验和”CellProcessor 数组（可能只是一个`ParseChecksum()`）读取校验和。

# html - 将图片移出身体

> ID：14328671
> 
> 赞同：0
> 
> 时间：2013-01-14T23:25:29.517
> 
> 标签：html, css, image

抱歉，您必须这样做，但您可以访问以下地址：[http ://www.neopets.com/userlookup.phtml?user=coool_xman](http://www.neopets.com/userlookup.phtml?user=coool_xman)

我需要帮助来制作顶部横幅（上面写着 Krawk 的横幅），使其脱离“白盒子”，并在自己的区域内。我希望横幅在盒子上方，所以基本上只是向上移动了 300px 左右，其他一切都保持不变。

我尝试过创建另一个身体，浮动等，但无法弄清楚。这是我的代码。

```
<style>
body {
background: fixed url("http://i1164.photobucket.com/albums/q565/whitehouses88/PLs/PirateBunk.jpg") no-repeat;
}
hr, #header, #footer, .sf, #ban {
display: none;
}
.contentModuleHeader, .contentModuleHeaderAlt {
font: 18pt tahoma;
color: #261712;
font-weight: bold;
text-align: left;
background-color: #ffffff;
}
.content div div, .content .contentModule, .contentModuleTable, .contentModule, #main {
border: none;
}
td, body, font, .medText, body, p {
font: 9pt tahoma;
line-height: 12pt;
}
b {
color: #6e231e;
}
i {
color: #261712;
}
a:link, a:visited, a:active, a b {
color: #90714d;
font-weight: bold;
}
a:hover, a:hover b {
color: #261712;
}
#aja {
width: 8px;
}
#navy {
padding: 4px;
margin: 4px;
text-align: center;
}
#navy a {
color: #ffffff !important;
background: #90714d;
display: inline-block;
width: 75px;
padding: 4px;
margin: 2px;
text-transform: uppercase;
font: 9pt trebuchet MS;
font-weight: bold;
}
#navy a:hover {
padding: 4px;
margin: 2px;
background: #6e231e;
}
#main {
margin-top: 10px;
margin-bottom: 10px;
border: 10px solid #261712;
}
#userneopets img {
background: #90714d;
padding: 8px;
}
</style>

<table><tr>
<td width="1100" valign="top">
<img src="http://i1327.photobucket.com/albums/u673/Vipersnake94/KrawkIsland2_zps134bd61f.png" width="975" class="special">
</td>
<td width="1100" valign="top">
</td>
</tr></table>
<div id="navy">
<a href="/myaccount.phtml">Account</a><a href="/customise/">Customize</a><a href="/games/arcade.phtml">Games</a><a href="/explore.phtml">Explore</a><a href="/nf.phtml">News</a><a href="/petcentral.phtml">Central</a><a href="/neoboards/index.phtml">Boards</a><a href="/objects.phtml">Shops</a><a href="/mall/index.phtml">Mall</a><a href="/~Sparkle">Credit</a>
</div>
<br><div style="width: 800px;">

</div> 
```

* * *

```
<style>
body {
background: fixed url("http://i1164.photobucket.com/albums/q565/whitehouses88/PLs/PirateBunk.jpg") no-repeat;
}
hr, #header, #footer, .sf, #ban {
display: none;
}
.contentModuleHeader, .contentModuleHeaderAlt {
font: 18pt tahoma;
color: #261712;
font-weight: bold;
text-align: left;
background-color: #ffffff;
}
.content div div, .content .contentModule, .contentModuleTable, .contentModule, #main {
border: none;
}
td, body, font, .medText, body, p {
font: 9pt tahoma;
line-height: 12pt;
}
b {
color: #6e231e;
}
i {
color: #261712;
}
a:link, a:visited, a:active, a b {
color: #90714d;
font-weight: bold;
}
a:hover, a:hover b {
color: #261712;
}
#aja {
width: 8px;
}
#navy {
padding: 4px;
margin: 4px;
text-align: center;
}
#navy a {
color: #ffffff !important;
background: #90714d;
display: inline-block;
width: 75px;
padding: 4px;
margin: 2px;
text-transform: uppercase;
font: 9pt trebuchet MS;
font-weight: bold;
}
#navy a:hover {
padding: 4px;
margin: 2px;
background: #6e231e;
}
#main {
margin-top: 274px;
margin-bottom: 10px;
border: 10px solid #261712;
}
#userneopets img {
background: #90714d;
padding: 8px;
}

img.special { position: absolute; top: 0; }

</style>

<table><tr>
<td width="1100" valign="top">
<img src="http://i1327.photobucket.com/albums/u673/Vipersnake94/KrawkIsland2_zps134bd61f.png" width="975" class="special">
</td>
<td width="1100" valign="top">
</td>
</tr></table>
<div id="navy">
<a href="/myaccount.phtml">Account</a><a href="/customise/">Customize</a><a href="/games/arcade.phtml">Games</a><a href="/explore.phtml">Explore</a><a href="/nf.phtml">News</a><a href="/petcentral.phtml">Central</a><a href="/neoboards/index.phtml">Boards</a><a href="/objects.phtml">Shops</a><a href="/mall/index.phtml">Mall</a><a href="/~Sparkle">Credit</a>
</div>
<br><div style="width: 800px;">

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:02:42.583

使用这个 CSS：

```
img.special { position: absolute; top: 0; }
body { margin-top: 274px; } 
```

我使用[Firebug](https://getfirebug.com/)添加了它，它对我有用。

这是在做什么：

*   首先，它绝对定位图像，（使用正确的类名指定特定图像 - `.special`）
*   其次，通过将 top 设置为 ，它将图像移动到顶部`0`。这只有效，因为图像是绝对定位的。
*   `top-margin`第三，它通过向页面添加等于图像高度的a 来向下移动整个网站。

# jquery - 将 deferred 传递给 jquery 函数

> ID：14328672
> 
> 赞同：2
> 
> 时间：2013-01-14T23:25:30.593
> 
> 标签：jquery, jquery-deferred

我正在尝试使用文档以及其他人编写的代码来找出 jQuery 的延迟 api，但发现它非常混乱。我想知道如果看下面的功能，你可以解释一下

1.  dfd.resolve 的意义是什么。这是否意味着fadeOut 已完成，即仅在fadeOut 完成后才执行？这是否将延迟对象传递给 jQuery fadeOut 函数？

2.  当 promise.promise(); 时会发生什么 被退回？为什么调用 promise(); 在承诺财产上？

    你能解释一下这段代码吗

    ```
    hide: function() {
            if (this.el.is(":visible") === false) {
                return null;
            }
            promise = $.Deferred(_.bind(function(dfd) {
                this.el.fadeOut('fast', dfd.resolve)}, this));
            return promise.promise();
        }, 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:28:19.927

你是对的。`dfd.resolve`作为回调传递给`fadeOut`，因此当淡出完成时，promise 将解析。

`promise = $.Deferred`具有误导性，因为`$.Deferred`返回一个`Deferred`对象，而不是一个承诺。调用`.promise()`deferred 将返回一个承诺。

deferred 和 promise 的区别在于 promise 仅用于注册回调（通过`always`、`done`、`fail`、`pipe`、`progress`或`then`），而原始的 deferred 对象也有一个`resolve`方法。

**总结一下**： a`promise`与原来的相同`deferred`，减去`resolve`方法（及其相关方法）。这用于保护您的`promise`，因此您是唯一有能力解决/拒绝它的人。调用者所能做的就是给它添加回调函数。

这是[来自文档的引用](http://api.jquery.com/deferred.promise/)：

> 该`deferred.promise()`方法允许异步函数防止其他代码干扰其内部请求的进度或状态。Promise 仅公开附加附加处理程序或确定状态所需的 Deferred 方法（`then`、`done`、`fail`、`always`、`pipe`、`progress`和`state`），但不公开更改状态的方法（`resolve`、`reject`、`notify`、`resolveWith`、`rejectWith`和`notifyWith`）。

* * *

为了简化这一点，让我们删除下划线绑定：

```
function hide () {
  var deferred = $.Deferred(function(dfd) {
    $('div').fadeOut('slow', dfd.resolve)
  });

  return deferred.promise();
}

hide().then(function () {
  alert('Fade out is done!');
}); 
```

这是小提琴：http: [//jsfiddle.net/fDUej/](http://jsfiddle.net/fDUej/)

# meteor - 捆绑 Meteor 应用程序时出错？

> ID：14328679
> 
> 赞同：3
> 
> 时间：2013-01-14T23:25:56.870
> 
> 标签：meteor

当我尝试捆绑我的 Meteor 应用程序时，我得到：

```
$ meteor bundle app.tgz
Errors prevented bundling:
Exception while bundling application:
Error
    at new JS_Parse_Error (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:263:18)
    at js_error (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:271:11)
    at croak (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:733:9)
    at token_error (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:740:9)
    at unexpected (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:746:9)
    at /usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:1124:9
    at maybe_unary (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:1209:19)
    at expr_ops (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:1236:24)
    at maybe_conditional (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:1240:20)
    at maybe_assign (/usr/local/meteor/lib/node_modules/uglify-js/lib/parse-js.js:1264:20) 
```

该应用程序在本地运行良好，我无法从错误消息中理解错误所在。甚至不确定从哪个文件开始寻找问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:46:47.713

Meteor 正在尝试缩小您的 javascript 并且 uglifyjs 使用的内部解析器遇到错误。您确定您的 javascript 没有语法错误吗？分号都在正确的位置吗？您是否在浏览器中收到任何控制台错误？

另外，请指定您使用的 Meteor 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T15:42:19.870

确保您当前没有任何您不想包含在项目目录中的目录，例如之前的 bundle/ 目录。这肯定会在捆绑时导致 JS_Parse_error，但不会阻止您通过流星运行或 mrt 运行您的应用程序 - 这样一个简单的错误，但可能会花费您宝贵的时间来弄清楚。

# ruby-on-rails - 从 RSpec 示例调用时未触发 ActiveRecord before_validation 回调

> ID：14328680
> 
> 赞同：0
> 
> 时间：2013-01-14T23:26:00.640
> 
> 标签：ruby-on-rails, ruby, rspec, factory-bot

我已经阅读了与类似问题有关的大部分答案，但尚未找到解决方案。代码如下：

**设置**

```
class Person < ActiveRecord::Base
  # Other inconsequential code
  # ...
  has_and_belongs_to_many :roles
  before_validation: attach_roles
  # ...
  def attach_roles
    roles << Role.default if roles.blank?
  end
end

class Role < ActiveRecord::Base

  has_and_belongs_to_many: people

  def self.default
  #
  # Get default role
  #
  end

end 
```

**测试**

```
require 'spec_helper'

RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
end

describe Person do

  context "constructor" do

    it "creates a valid Person" do
      person = build(:person)
      person.should_receive(:attach_roles) # This works
      person.valid?
      puts person.roles.inspect # Returns []
    end    

    it "creates a another valid Person" do
      person = build(:person)
      person.valid?
      person.should be_valid # This fails
      puts person.roles.inspect # Returns []
    end

  end

end 
```

**问题**

`attach_roles`回调似乎没有被调用。然而`should_receive`断言为真

**在控制台中**

```
p = FactoryGirl.build(:person)
p.roles # []
p.valid? # true
p.roles # [<Role>] 
```

有人能解释一下吗？

*旁注：也欢迎尝试创建默认角色的任何其他想法。*

**环境**：

*   导轨**3.2.1**
*   红宝石**1.9.3**
*   rspec **2.12.0**
*   factory_girl **4.1.0**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:13:59.693

您的`should_receive`测试证明`attach_roles`正在调用它，它只是没有按照您的预期进行。

我看到有两件事让我担心。

其中之一与@apneadiving 指出的相同。

在 Ruby 中尝试分配给实例变量时，您必须使用`self.roles`. 我不确定是如何`<< x`工作的。如果它是类似的语法糖，`roles= roles + x`那么你需要`self.roles`，但如果是，`roles.insert(x)`那么你不需要。当有疑问时，`self.roles`总是会做你所期望的。

我担心的另一件事是您正在使用`<<`尚未持久化的模型。该操作具有破坏性，并且会尝试将`Role`. 由于您可能在首次创建模型时调用了该函数，因此此代码仅在未持久化时才会运行。虽然我认为它主要是有效的，但我不确定这是否是你想要的。我认为你会更好：

```
def attach_roles
  roles.build(Role.default)
end 
```

这假设它`Role.default`正在返回一个属性哈希。不过，我可能对您的意图有误。

我希望这会有所帮助。

# python - 如果 Python 被解释，为什么需要 setup.py 的编译器

> ID：14328690
> 
> 赞同：3
> 
> 时间：2013-01-14T23:27:06.433
> 
> 标签：python, installation

python 有很多我不明白的地方，如果这是一个过于基本的问题，请原谅我。

我在 Windows 上运行 python 2.7，在使用 setuptools 的 setup.py 安装包时，我经常遇到以下错误：`error: Unable to find vcvarsall.bat`这是一个到处讨论的问题，包括这里： [Python 问题：无法找到 vcvarsall.bat](https://stackoverflow.com/questions/2272786/python-issueunable-to-find-vcvarsall-bat)和在这里：[http ://blog.eddsn.com/2010/05/unable-to-find-vcvarsall-bat/](http://blog.eddsn.com/2010/05/unable-to-find-vcvarsall-bat/)

我的问题是，如果 python 是一种解释性语言，为什么你甚至需要一个编译器来安装一个包？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-14T23:28:27.617

Python 被解释，但许多库使用编译的 C 扩展。当自动安装程序无法编译给定包的 C 扩展时，就会出现您看到的错误。

# c# - SQL Server Express 连接字符串/FluentNHibernate

> ID：14328696
> 
> 赞同：3
> 
> 时间：2013-01-14T23:27:41.960
> 
> 标签：c#, sql, sql-server, fluent-nhibernate, connection-string

我的连接字符串有一些问题。我一直在测试很多不同的字符串和方法，现在我被卡住了。

```
private static void InitializeSessionFactory()
{
    _sessionFactory = Fluently.Configure()
            .Database(MsSqlConfiguration.MsSql2008
                          .ConnectionString(
 @"Server=Data Source=.\SQLEXPRESS;DataBase=carDB.mdf;User ID=sa;Password=xxxSecretxxx;")
                          .ShowSql()
            )
            .Mappings(m =>
                      m.FluentMappings
                          .AddFromAssemblyOf<Car>())
            .ExposeConfiguration(cfg => new SchemaExport(cfg).Create(true, false))
            .BuildSessionFactory(); 
    } 
```

（我知道我根本不应该使用“sa”——为什么我这样做只是因为缺乏管理软件，所以我不得不使用那里唯一的帐户）

我正在使用 SQL Server Express 数据库。

我得到的例外是：

> *创建 SessionFactory 时使用了无效或不完整的配置。
> 检查 PotentialReasons 集合和 InnerException 了解更多详细信息。*

这是我内心的例外

> *建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。
> 服务器未找到或无法访问。
> 验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。
> （提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）*

有谁知道我应该如何处理这个？我花了几个小时试图让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T09:50:42.073

在连接字符串中，您不指定数据库*文件*，而是指定数据库*名称*。所以不应该

```
@"Server=Data Source=.\SQLEXPRESS;DataBase=carDB.mdf;User ID=sa;Password=xxxSecretxxx;" 
```

但

```
@"Server=Data Source=.\SQLEXPRESS;DataBase=carDB;User ID=sa;Password=xxxSecretxxx;" 
```

前提是数据库确实具有名称`carDB`而不是其他类似`Cars`.

此外，我建议使用`SqlConnectionStringBuilder`该类来构建连接字符串，因为它保证了语法正确的连接字符串。

附带说明：您是否知道也可以为 Express 版安装管理工具（例如用于 SQL Server Express 的 SQL Server Management Studio）？这使事情变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:36:41.910

目前尚不清楚您使用的是哪个版本的 SQL Server。它是以太快递或紧凑型。

如果是 SQL Express，那么试试这个：

```
@"Data Source=.\SQLEXPRESS;Initial Catalog=carDB;User ID=sa;Password=********;" 
```

对于 SQL Compact，通常足以指定 db 文件的路径和名称：

```
@"Data Source=path\\carDB.sdf;" 
```

但是对于 SQL Compact，您可能需要另一个提供程序`MsSqlCeConfiguration.Standard`

# javascript - 另一个参数中的 Javascript 参数

> ID：14328700
> 
> 赞同：0
> 
> 时间：2013-01-14T23:28:25.713
> 
> 标签：javascript

当您在函数的另一个参数中包含一个参数时，这意味着什么？

例如：

```
var c = function (a,b) {
    a(b);
}; 
```

做什么`a(b)`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:38:51.533

我们知道，形式的表达式是对带有单个参数`f(x)`的函数的调用。此外，JS 允许我们将函数回调作为参数传递给其他函数。例如：`f``x`

```
function callback(x) { alert(x); }

c(callback, 5); 
```

回调接受一个参数，而另一个参数`5`作为参数传递给回调。反过来，它会提醒该号码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:29:25.327

在这种情况下`c`，是一个可以传递两个对象的函数，`a`并且`b`. 从定义来看，它`a`应该是一个函数对象和`b`该函数的参数。

在定义中，您有一个称为`a`传递对象参数的函数`b`。

详细了解[javascript 中的函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:53:32.870

JavaScript 将函数视为第一类对象。这意味着您可以将函数作为参数传递。（有点像 C# 中的委托）

在您的情况下，`a`是一个指向函数的参数，您在 c 表示的函数内执行它。（`a` 本身，`b`用作它的第一个参数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T23:30:01.087

这意味着它`a`应该是一个函数，当它被传递给时，它会被执行`c`，以及另一个参数。

[使用示例：](http://jsfiddle.net/x6qpq/1/)

```
//c accepts a function and an argument
c(function(theSentB){
  //this passed function gets executed due to a(b);
  //and 'hello' is passed to it

  alert(theSentB);

},'hello') 
```

# mongodb - 部署 Meteor 应用程序时如何指定 MongoHQ 数据库？

> ID：14328704
> 
> 赞同：11
> 
> 时间：2013-01-14T23:28:41.503
> 
> 标签：mongodb, meteor

我想使用我自己的 MongoHQ 数据库在使用`meteor deploy`. [该文档解释了在我控制的机器上部署和运行时如何执行此操作](http://docs.meteor.com/#deploying)：

```
$ PORT=3000 MONGO_URL=mongodb://localhost:27017/myapp node bundle/main.js 
```

但是关于如何使用`meteor deploy`. 是否可以？

编辑：我尝试遵循[http://docs.meteor.com/#meteor_settings](http://docs.meteor.com/#meteor_settings)并添加了一个 settings.json 文件并将其放入：

```
{"MONGO_URL" : "mongodb://user:pass@mongohq.com:10000/mydatabase"} 
```

然后部署

`meteor deploy myappname.meteor.com --settings settings.json`

但部署的版本并没有使用我的数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T17:04:02.987

我最终部署到 Heroku，而不是使用[buildpack](https://github.com/jordansissel/heroku-buildpack-meteor)。然后我可以使用 heroku 配置设置变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T01:16:47.393

快速扫描代码库会发现 remote_collection_driver.js 中的这一行：

Meteor._RemoteCollectionDriver = new Meteor._RemoteCollectionDriver(process.env.MONGO_URL);

我敢肯定，如果您将其破解以指向您想要的位置，它将起作用。如果这太过分了（例如，如果您计划更新 Meteor 版本），您可以尝试从您自己的代码中尽早尝试更改 Meteor._RemoteCollectionDriver 或 process.env.MONGO_URL（无需直接侵入 Meteor 的 js ）。祝你好运。

# java - OpenJPA 实体类如何始终与 db 同步

> ID：14328705
> 
> 赞同：0
> 
> 时间：2013-01-14T23:28:41.827
> 
> 标签：java, jpa, synchronization, openjpa, entitymanager

在使用 OpenJPA 时，如果我用注释 @Entity 标记一个类，是否有办法指定（通过注释）始终保持该实体与底层数据库同步。

目标是始终访问最新修改的数据。我知道在实体类之外，我们可以做一个`EntityManager.refresh`并且会刷新对象以从数据库加载最新数据。但是有没有办法在创建实体本身时指定它。这样未来的开发人员可以只看实体类就知道它总是有最新的数据。他不需要扫描整个代码库来查看 EntityManager.refresh 的调用位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T08:01:55.723

我认为您正在处理的问题是对同一实体的并发修改。JPA 不是为处理这个问题而设计的。在 JPA 应用程序中处理并发访问的更合适的形式是锁定。

您也没有提到事务隔离。您所说的行为在很大程度上取决于数据的可访问性，这些数据在事务开始后被修改。这在所有事务隔离级别中都是不可能的。

您应该将您的要求更多地与系统时钟之类的东西进行比较。您总是希望在调用方法时访问最新日期`now`。因此，您应该有一个可以返回该对象的服务。您还应该通过该服务为该对象编写更新。因此，该服务可以完全控制当前最新的对象。

# c# - 遍历两个列表以获取索引位置

> ID：14328707
> 
> 赞同：-2
> 
> 时间：2013-01-14T23:28:49.880
> 
> 标签：c#, .net

我试图找到有效的方法来遍历两个列表并根据两个列表中元素之间的匹配返回第二个列表的索引。然后使用索引从另一个数组中查找数据，因此第二个列表基本上保存了数组的位置。

两个 List 都是 RowType 类型，其中

```
public class RowType 
{
    public int Type; //Acts as a group
    public int SubType; //Specific classification of the type
} 
```

我目前的方法是遍历第一个列表，然后对于每个元素，遍历第二个列表，比较 Type 或 Type\Subtype 组合以获得索引。这本质上是 O(n*m)，它拖累了整体性能。

List1 可以包含 RowType 元素的组合，其中**仅指定了 Type 或 Type 和 SubType 两者**。

List2 包含同时具有**Type 和 SubType**的元素。

在下面的示例中，T1 和 T2 是两种类型，R1 到 R16 是 SubType。SubType 在 Type 中是唯一的。所以 R1 是 T1 的子类型，那么没有其他类型将 R1 作为子类型。

```
Input
    List<RowType> list1 = new List<RowType>(){ T1, T2, RT3 }
    List<RowType> list2 = new List<RowType>(){ RT1, RT3, RT6, RT7, RT9 }

    where 
    RT1 -> Type = T1, SubType = R1
    RT3 -> Type = T3, SubType = R3
    RT6 -> Type = T1, SubType = R6
    RT7 -> Type = T2, SubType = R7
    RT9 -> Type = T4, SubType = R9

Expected Output
    0, 1, 2, 3  

Index 0 since T1 is Type for RT1
Index 2 since T1 is Type for RT6
Index 3 since T2 is Type for R7
Index 1 since RT3 matches RT3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:32:14.513

您可以首先迭代原始列表并将每个条目添加到字典中，其中键是列表中的元素，值是索引。只要您`GetHashCode`在 中正确覆盖，`RowType`您应该能够使用`Dictionary<RowType, int>`. 之后，迭代第二个列表并在字典中查找每个项目以确定其索引。这将产生 O(n + m) 但显然会占用更多内存。

# facebook - 与 2013 年 2 月的重大更改不同，它失败了

> ID：14328708
> 
> 赞同：5
> 
> 时间：2013-01-14T23:28:50.740
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-apps

我的应用程序目前允许用户喜欢和不喜欢他们提要中的帖子，包括来自其他用户/朋友的帖子。

当我启用 2013 年 2 月的重大更改时，我的应用程序仍然可以喜欢来自其他用户的帖子（POST postid/likes），但不能再不同于相同的帖子（DELETE postid/likes）。

由于我们没有在其他用户的墙上写，我不希望这会失败。

无论如何，我希望喜欢/不喜欢被类似对待——没有一个成功而另一个失败。

这是一个已知问题和/或有解决方法吗？

**更新**

启用 2013 年 2 月的重大更改后，尝试赞另一个用户的帖子成功，但尝试删除会返回 HTTP 403 Forbidden 状态，并出现错误：

```
"{"error":{"message":"(#200) Feed story publishing to other users is disabled for this application","type":"OAuthException","code":200}}" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T00:49:15.250

这听起来像是我们这边的一个错误。您能在我们的[创建错误表单](https://developers.facebook.com/bugs/create)上提交错误吗？

# java - 如何在 Java 中创建对象对或组织我的代码

> ID：14328710
> 
> 赞同：1
> 
> 时间：2013-01-14T23:28:58.313
> 
> 标签：java, organization

我正在为我的学校机器人俱乐部编写一个机器人，并且需要一种将对象组织成对的方法。该代码使用两个螺线管对象来表示一个螺线管伸出一个缩回，我想将这两个对象放入“对”中以进行跟踪，因为我将处理很多螺线管对象。现在来自 C++ 的长期背景，我会为此使用结构，或者甚至更好地使用默认的 STL 对。**我应该使用什么样的数据结构来组织对象对？**. 我对 Java 还很陌生，所以如果有什么比一个类更好用的话，我很感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T23:34:33.453

请注意，在 C++ 中，您可以很容易地使用一个类来表示一对。由于 Java 只有类，所以这是您唯一的选择。换句话说，如果您愿意，您可以轻松推出自己的 Pair 课程。您甚至可能需要一个自定义类来表示这种配对，但也可以定义配对中两个对象之间的确切交互。

或者，您可以使用 java.util.Map。如果一对中的元素之间存在某种映射语义（即对是有序的），这将特别有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T23:34:08.647

我认为这不仅仅是“让他们在一起”。如果您的螺线管对具有不同的行为（一个缩回，另一个伸出），我会说您需要一种超越 Pair 的新类型来实现它。它应该是`SolenoidPair`具有适当行为的自定义类型（例如）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T23:36:16.017

如果您想推出自己的 Pair 课程：

```
public class Pair<X, Y> {

    private final X x;
    private final Y y;

    public Pair(X x, Y y) {
        this.x = x;
        this.y = y;
    }

    public X getX() {
        return x;
    }

    public Y getY() {
        return y;
    }
} 
```

像这样使用：

```
Pair<String, Integer> p = new Pair<String, Integer>("Heloo", 100); 
```

你可能也想在里面放一些二传手！

但似乎可能会有更好的方法来封装您的数据。将更多的逻辑包装在这个对类中并创建一个真实的对象可能是一个更好的主意，其中包含一些更精致和更合适的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T23:31:57.047

考虑使用[`Pair<L, R>`](http://commons.apache.org/lang/api/org/apache/commons/lang3/tuple/Pair.html)Apache Commons。

# sql-server - 如何允许 SSRS 中的下拉列表参数具有默认值“--全部--”？

> ID：14328712
> 
> 赞同：7
> 
> 时间：2013-01-14T23:29:09.960
> 
> 标签：sql-server, reporting-services, ssrs-2008

我有一个基于存储过程填充的下拉列表 - 部分工作正常。

![在此处输入图像描述](../Images/ecc6a7dba7a06f0bc8b70b1735172a3d.png)

它会根据“调查 ID”的任何内容动态填充

但我不希望它说`<Select a Value>`，而是应该说`" -- All -- "`，因为这就是报告的工作方式。

到目前为止，我试图创建一个返回的虚拟数据集`Null`和“全部”的标签，但它没有用。也许我做错了？我用这个：

```
select distinct  Name, ID  from LK_TargetTypes
where Name like '%pizza'
union select '-- All --', null ; 
```

`LK_TargetTypes`一些不相​​关的表也是如此。我想将它与其他 DDL 值合并。

这是另一张图片：

![在此处输入图像描述](../Images/28c8bf0bca1d0e2a7259706b8b5e5504.png)

任何提示表示感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:56:43.663

`-- All --`通过将选项作为查询所基于的数据集的一部分返回，您做得对。

您收到`<Select a Value>`消息是因为，您还没有选择一个值。您需要做的是`-- All --`为此参数分配默认值。打开参数设置并单击默认值选项卡并输入默认值，在本例中`Null`为`-- All --`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:28:15.830

我同意 Chris 的回答，但是我要补充一点，有时您希望将默认值添加到一个不是全部且不是单一选择的多值中。通常我设置了两个数据集，每个数据集都在一个用于报告的表变量中。与此类似：

'AvailableValues' 数据集可以是：

```
declare @Table Table ( personID int identity, person varchar(8));

insert into @Table values ('Brett'),('John'),('Peter');

select *
from @Table 
```

'DefaultValues' 数据集可以是：

```
declare @Table Table ( personID int identity, person varchar(8));

insert into @Table values ('Brett'),('John');

select *
from @Table 
```

如果我设置一个参数并将“可用”值绑定到“从查询中获取值”并选择我的可用数据集，则它具有第一组。如果我然后选择“默认”值并选择“从查询中获取值”并选择默认值，我可以选择一个子集作为默认值。唯一的问题是您必须确保第二个中的数据源是第一个的合法子集。

您也可以从一组中选择默认值以获取所有列表以及选择您指定的所有值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T01:55:20.903

出于某种原因，我让它工作的唯一方法是改变存储过程本身；并添加

```
UNION SELECT null, ' -- All -- ' 
```

看起来当您使用查询填充下拉参数时，向参数添加非查询值/标签并不容易。

我知道可能还有另一种方式。但既然这行得通，我想它还可以

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T15:03:29.743

如果您在参数的弹出 gui 中选择“允许多个值”（单击“参数”文件夹下左侧的参数），它将给出一个“全选”选项。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-02T11:31:27.180

从上面您会发现使用 Union 将 Select All 添加到您的数据集查询中。

现在选择“ALL”作为默认值，上面正确提到将其设置为特定值 Null 将不起作用；相反，我使用了特定的查询并使用了我用来填充下拉参数的相同数据集并且它有效。

注意：我的数据集按升序排序，***____ALL__***排在首位，值为 Null。

# django - Django Admin：如何在 oneToOne 关系中的两个模型中显示带有 list_display 的字段值？

> ID：14328714
> 
> 赞同：10
> 
> 时间：2013-01-14T23:29:14.770
> 
> 标签：django, admin, models, one-to-one

我相信我的问题的答案很简单，但我在任何地方都找不到。这是我的困境。我有两个模型：Member 和 MemberDetail，它们在 oneToOne 关系中，如下所示：

```
class Member(models.Model):
   ID = models.AutoField(primary_key=True)
   FIRST_NAME = models.CharField('First name', max_length=50)
   LAST_NAME = models.CharField('Last name', max_length=50)
   def __unicode__(self):  
      return u'%s %s' % (self.FIRST_NAME, self.LAST_NAME)

class MemberDetail(models.Model):
   member = models.OneToOneField(Member, primary_key=True)
   DATE_OF_BIRTH = models.DateField('Date of birth')
   EMAIL = models.EmailField('E-mail')
   PHONE = models.CharField('Phone', max_length=15) 
```

现在在我的 admin.py 中，我想显示成员的所有数据表，如下所示：

```
class MemberDetailInline(admin.TabularInline):
    model = MemberDetail

class MemberAdmin(admin.ModelAdmin):
    list_display = ("FIRST_NAME", "LAST_NAME", "date_of_birth", "email", "phone")
    inlines = [
        MemberDetailInline,
    ]

admin.site.register(Member, MemberAdmin) 
```

我根本不知道如何写 list_display 的“date_of_birth”、“email”和“phone”部分。我能做的最接近的事情是在内联之后添加：

```
def date_of_birth(self, MemberDetail):
    return MemberDetail.DATE_OF_BIRTH
def date_of_birth(self, MemberDetail):
    return MemberDetail.EMAIL
def date_of_birth(self, MemberDetail):
    return MemberDetail.PHONE 
```

但是页面上的字段显示为空。解决办法是什么？谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-15T21:31:41.640

最后！！！我解决了。因为我认为这很简单，但我不得不用其他方式和多表继承：

```
models.py
class Member(models.Model):
    ID = models.AutoField(primary_key=True)
    FIRST_NAME = models.CharField('First name', max_length=50)
    LAST_NAME = models.CharField('Last name', max_length=50)

# Using multi table inheritance - automaticly creates one to one field
class MemberDetail(Member):
    DATE_OF_BIRTH = models.DateField('Date of birth')
    EMAIL = models.EmailField('E-mail')
    PHONE = models.CharField('Phone', max_length=15) 
```

现在为 admin.py

```
admin.py
class MemberDetailAdmin(admin.ModelAdmin):
    list_display = ("FIRST_NAME", "LAST_NAME", "DATE_OF_BIRTH", "EMAIL", "PHONE")

admin.site.register(MemberDetail, MemberDetailAdmin) 
```

就是这样。也许，还有其他解决方案，但这对我有好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T00:59:48.790

如果有人偶然发现这个问题/问题，我不知道从 OneToOne 关系访问字段的直接方法，但是，我能够使用以下代码段解决问题。请注意，我可以`list_filter`通过使用两个“_”访问 OneToOne 的字段来访问 OneToOne 字段，例如：`modelB_fieldOne`.

```
@admin.display(description='Date')
    def transaction_date(self, purchase):
        return purchase.transaction.date

list_display = ('product', 'transaction_date')
list_filter = ('product', 'transaction__date') 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T23:42:02.417

你应该能够做`'member_detail__email'`等。`list_display`

由于它是 1-1，因此您应该有一个 backref，并且使用两个下划线引用相关字段。

# scala - 为另一个特征提供清单的特征

> ID：14328723
> 
> 赞同：0
> 
> 时间：2013-01-14T23:30:05.217
> 
> 标签：scala, manifest, traits

我正在尝试做这样的事情：

```
trait BaseMongoDAO[T <: IdentifiableModel with CaseClass] {

  implicit val manifest: Manifest[T]

  ........ some implicit manifest usage here
}

trait MongoUserRepository extends BaseMongoDAO[User] with UserRepository {

  override val manifest = Manifest.classType(User.getClass)

  ........ implementing UserRepository here

} 
```

但它似乎不起作用，它说我的清单是不兼容的类型。

我做错事情了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:36:26.903

如果我们看一下 的定义`classType`：

```
def classType[T](clazz: Predef.Class[_]): Manifest[T] =
    new ClassTypeManifest[T](None, clazz, Nil) 
```

我们可以看到`T`不是从参数推断出来的，因此只能从返回类型推断出来，或者通过显式给出类型参数来推断。以下应该可以解决您的问题：

```
override val manifest = Manifest.classType[User](User.getClass) 
```

或者：

```
override val manifest: Manifest[User] = Manifest.classType(User.getClass) 
```

# css - 我可以对 GWT CSS 混淆的类名应用范围吗

> ID：14328725
> 
> 赞同：0
> 
> 时间：2013-01-14T23:30:15.160
> 
> 标签：css, gwt

我有 2 个 CSS 文件，为同一个 CSSResource 定义了 2 组 CSS 规则。我可以以某种方式应用某种范围，以便一个 css 文件中的样式不会覆盖另一个 css 文件中的样式吗？

一个简化的例子：

**CSS资源**

```
public interface Style extends CssResource {
String box_bkg();
} 
```

**样式1.CSS**

```
.box_bkg {
background-color: red;
} 
```

**样式2.CSS**

```
.box_bkg {
background-color: yellow;
} 
```

**客户端捆绑**

```
public interface BoxBundle extends ClientBundle {
    @Source("css/Style1.css")
    MyClass.Style redBoxStyle();

    @Source("css/Style2.css")
    MyClass.Style yellowBoxStyle();
} 
```

当我查看生成的 HTML 时，我发现混淆的类名是相同的，无论它来自哪个 BoxBundle 方法。所以盒子要么全是黄色，要么全是红色。如果混淆的名称相同，我如何设置不同的框样式？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:47:55.503

混淆的类名是根据`CssResource`子接口和方法名计算出来的。如果你想要不同的类名，你必须至少创建一个子接口`MyClass.Style`并将其用作方法的返回类型`BoxBundle`；目标是这两种方法具有不同的返回类型：

```
public interface BoxBundle extends ClientBundle {
   @Source("css/Style1.css")
   Style1 redBoxStyle();

   @Source("css/Style2.css")
   Style2 yellowBoxStyle();

   interface Style1 extends MyClass.Style { }
   interface Style2 extends MyClass.Style { }
} 
```

另请参阅[https://code.google.com/p/google-web-toolkit/issues/detail?id=6144](https://code.google.com/p/google-web-toolkit/issues/detail?id=6144)

# python - 从另一个页面引用实体

> ID：14328727
> 
> 赞同：1
> 
> 时间：2013-01-14T23:30:30.523
> 
> 标签：python, google-app-engine, google-cloud-datastore

我正在使用 Google App Engine 创建一个带有表单的页面，以创建一个名为“tutorial”的实体。然后当点击下一个时，用户有另一个表单，以便为之前创建的教程创建一个章节。我的问题是将“教程”的参考带到“章节”

新教程页面的处理程序：

```
class NewTut(FuHandler):
    def get(self):
        self.render('newTut.html')
    def post(self):
        title = self.request.get("title")
        tags = self.request.get("tags")
        tut = Tutorial(title=title, tags=tags)
        tut.put()

        self.redirect('/newchap' #should i put here 'tut'?#) 
```

`tut`这部分效果很好，但是在创建章节时如何使用它？

新章节页面的处理程序：

```
class NewChap(FuHandler):
    def get(self):
        self.render('newChapter.html')

    def post(self):
        tutorial = Tutorial(??????)
        title = self.request.get("chapTitle")
        content = self.request.get("content")
        note = self.request.get("note") 
```

我需要在这里做什么才能让这个引用工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T01:15:05.200

您想通过 URL 将教程 ID 传递到下一页。您可以将其作为 get 参数，或者只是路径的一部分。以下是如何将其作为 get 参数：

```
self.redirect('/newchap?tutorial_id=%s' % tut.key) 
```

然后，在您的 NewChap 处理程序中：

```
tutorial_id = request.get("tutorial_id")
tutorial = db.Key.from_path('Tutorial', tutID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:12:49.047

@dlorenc 答案的一部分有效，因为在 NewChap 上它不起作用。所以这就是我让它工作的方式：

在 NewTut 哈德勒：

```
self.redirect('/newchap?tutorial_id=%s' % tut.key) 
```

在 NewChap 处理程序中，在帖子上：

```
tutID = self.request.get("tutorial_id")
tutorial = db.Key.from_path('Tutorial', tutID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:35:37.007

您应该重定向到`'/newchap/%s' %tut.key.id()`然后在请求中获取 id。

# css - IE8 支持 :hover:after 吗？

> ID：14328734
> 
> 赞同：3
> 
> 时间：2013-01-14T23:30:51.107
> 
> 标签：css, internet-explorer-8, css-selectors, pseudo-element, pseudo-class

我有一个弹出菜单，在“快速链接”的末尾，我使用第一个 LI 标记上的 :after 伪元素来显示精灵文件中的图标。

的HTML：

```
<ul class="rs-quick-links-nav">
   <li>
    <a href="#">QUICK LINKS</a>
    <ul>
     <li><a href="#">Enhanced Recipe Search</a></li>
     <li><a href="#">Recipe Collections &amp; Favorites</a></li>
     <li><a href="#">Cooking Tips &amp; Techniques</a></li>
     <li><a href="#">Shopping &amp; Storing</a></li>
     <li><a href="#">Tools &amp; Products</a></li>
     <li><a href="#">New Uses for Old Things</a></li>
     <li><a href="#">Guide to Ingredients</a></li>
    </ul>
  </li>
</ul> 
```

CSS：

```
.rs-quick-links-nav { position: absolute; top: 0; right: 20px; }
.rs-quick-links-nav > li { float: left; position: relative; white-space: nowrap; height: 19px; padding: 4px 0 4px 0; }
.rs-quick-links-nav > li > a { color: #999999; display: block; font: normal 1.2em Arial, sans-serif; }
.rs-quick-links-nav > li:after { content: ' '; background: transparent url('@static.base@/i/rs-global-sprite.png') -220px 0 no-repeat; height: 19px; position: absolute; top: 0; right: -22px; width: 21px; }
.rs-quick-links-nav > li > a:hover { text-decoration: none; }
.rs-quick-links-nav > li:hover:after { content: ' '; background: transparent url('global-sprite.png') -220px -20px no-repeat; height: 19px; position: absolute; top: 0; right: -22px; width: 21px; }
.rs-quick-links-nav li ul { background-color: #FFFFFF; border: 4px solid #69b8b8; left: -9999px; padding: 2px 8px; position: absolute; top: 24px; visibility: hidden; z-index: 9900; }
.rs-quick-links-nav li:hover ul { left: auto; right: -18px; visibility: visible; }
.rs-quick-links-nav li li { padding: 2px 0; }
.rs-quick-links-nav li li + li { border-top: 1px dotted #333333; }
.rs-quick-links-nav li li a { color: #666666; display: block; font: normal 1.2em/30px Arial, Verdana, sans-serif; height: 30px; padding: 0px 8px; }
.rs-quick-links-nav li li a:hover { background: #f6f6f6; } 
```

应该发生的是，当您将鼠标悬停在 LI 标记上时，我将图标更改为活动颜色。

.rs-quick-links-nav > li:hover:after 似乎适用于 Firefox、Chrome 和 Safari，但不适用于 IE8（IE8 之前我不关心任何东西）。根据 QuirksMode，IE8 应该支持 :hover 和 :after，所以我不确定为什么 .rs-quick-links-nav > li:hover:after 不起作用。有没有人有任何想法如何使这项工作（即使我必须用 Javascript 做一些事情）。

编辑： DOCTYPE 是 HTML5 文档类型。

```
<!DOCTYPE html> 
```

编辑：这里的 JSFiddle 片段 [http://jsfiddle.net/tangst/hA7FH/](http://jsfiddle.net/tangst/hA7FH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T13:31:20.483

在您的`:after:hover`规则中添加`content:"";`. 这将强制重绘

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T04:01:23.843

你的文档类型是什么样的？

IE8 确实处理伪选择器，但如果您没有严格的文档类型，则 :hover 选择器将仅适用于锚点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T23:52:50.187

几个不错的选择：

*   使用垫片。这使您可以进行改造（由于 css 的级联性质）并修复“旧版浏览器缺乏支持”问题。例如：[http ://selectivizr.com/](http://selectivizr.com/)

*   使用 jQuery 1.8.1+，它为旧浏览器提供了对这些东西的支持。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:46:15.110

最后，我不得不编写一些 Javascript 来控制该元素的悬停事件并以这种方式设置元素的样式。它在 IE8 中不是很完美，但它确实有效。

# actionscript-3 - android上的flex mobile：最小化应用程序时如何停止音乐

> ID：14328736
> 
> 赞同：1
> 
> 时间：2013-01-14T23:30:54.610
> 
> 标签：actionscript-3, flash-builder

我在 Flex Mobile 中开发了一个小型应用程序（Flex4.7 中的 Project actionscript mobile）。我有背景音乐。

我的问题是，当应用程序最小化（Home android 按钮）时，音乐仍在播放：我希望当应用程序再次处于活动状态时，按下 Home 按钮并恢复时音乐暂停。

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T04:44:22.927

在您的文档类中，监听 Stage 类的 ACTIVATE 和 DEACTIVATE 事件：

```
package
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite
    {
        public function Main():void 
        {
            stage.addEventListener(Event.ACTIVATE, onAppActivated);
            stage.addEventListener(Event.DEACTIVATE, onAppDeactivated);
        }

        private function onAppActivated(e:Event):void 
        {
            // Play audio
        }

        private function onAppDeactivated(e:Event):void 
        {
            // Pause audio
        }
   }
} 
```

# wpf - WPF UI 交互滞后，但为什么？

> ID：14328737
> 
> 赞同：2
> 
> 时间：2013-01-14T23:30:56.163
> 
> 标签：wpf, lag, onrender

为了演示我遇到的问题，我编写了下面的简单示例，该示例绘制了一条曲线和一条跟随光标的黑线。

有人可以解释为什么当我增加“numPointsMul”时，与鼠标的交互和光标线的绘制变得非常滞后？

为什么图形中的点数会这样影响指针的绘制呢？请注意，我已关闭所有命中测试，并且该图仅在`OnRender`.

我收集到增加点数会导致`OnRender`函数花费更长的时间，但我不明白为什么它会导致指针的绘制滞后，因为`OnRender`当光标移动时不会被调用，而是会调用 Invalidation 事件。看起来命中测试仍在进行中？

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication4"
        Title="MainWindow" Height="800" Width="1024" WindowStartupLocation="CenterScreen">

    <local:UserControl1/>

</Window>

<UserControl x:Class="WpfApplication4.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             IsEnabled="False" IsHitTestVisible="False">
    <Line Name="m_line" Stroke="Black"/>
</UserControl>

 public partial class UserControl1 : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();

            Application.Current.MainWindow.PreviewMouseMove += new MouseEventHandler(MainWindow_PreviewMouseMove);
        }

        void MainWindow_PreviewMouseMove(object sender, MouseEventArgs e)
        {
            m_line.X1 = m_line.X2 = Mouse.GetPosition(this).X;
            m_line.Y1 = 0;
            m_line.Y2 = ActualHeight; 
        }

        protected override void OnRender(DrawingContext drawingContext)
        {
            base.OnRender(drawingContext);

            drawingContext.DrawRectangle(Brushes.Green, null, new Rect(0, 0, ActualWidth, ActualHeight));

            Pen p = new Pen(Brushes.Black, 1);

            StreamGeometry streamGeometry = new StreamGeometry();
            using (StreamGeometryContext geometryContext = streamGeometry.Open())
            {
                double numPointsMul = 1;
                int count = (int)(ActualWidth * numPointsMul);
                for (int i = 0; i < count; ++i)
                {
                    double y = ActualHeight / 2 + 20 * Math.Sin(i * 0.1);

                    if (i == 0)
                    {
                        geometryContext.BeginFigure(new Point(i , y), true, true);
                    }
                    else
                    {
                        geometryContext.LineTo(new Point(i, y), true, true);
                    }
                }
            }

            drawingContext.DrawGeometry(Brushes.Red, p, streamGeometry);
        }
    } 
```

# php - UTC 时间刻度（自 01/01/0001 00:00:00 起）

> ID：14328741
> 
> 赞同：4
> 
> 时间：2013-01-14T23:31:43.370
> 
> 标签：php, time, epoch

我正在尝试与第三方服务集成，该服务想知道有多少“UTC 时间（从 01/01/0001 00:00:00 开始）”已经过去。

什么是蜱？

假设它是一秒钟（我不知道它是）......自 01/01/0001 00:00:00 以来我应该怎么做？这比 32 位整数大。不确定它是否大于 64 位整数，但 PHP 的 date() 函数返回 32 位整数 - 而不是 64 位整数。

如果我知道在 01/01/0001 00:00:00 和 UNIX 纪元之间已经过去了多少秒，我可以使用 bcmath 或 gmp 将该数量（作为常数）添加到 time() （再次假设滴答声是秒），但我不知道那个数字是多少。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:42:00.680

我希望使用 .NET 编写的服务，因为 .NET 框架知道 DateTime.Ticks。[文档](http://msdn.microsoft.com/en-us/library/system.datetime.ticks.aspx)中提到了一个勾号：

> 一个滴答表示一百纳秒或百万分之一秒。一毫秒内有 10,000 个滴答声。
> 
> 此属性的值表示自 0001 年 1 月 1 日午夜 12:00:00 以来经过的 100 纳秒间隔数，它表示 DateTime.MinValue。它不包括可归因于闰秒的滴答数。

因此，从 01/01/0001 00:00:00 到 10.000.000，您将需要几秒钟。

我找到了价值：

```
621,355,968,000,000,000 
```

[对于此SO 帖子](https://stackoverflow.com/questions/1627067/convert-time-t-to-ticks)中从 01-01-0001T00:00:00 到 01-01-1970 的刻度。我不知道它是如何计算的。我假设 .NET 框架会输出它。如您所述，我建议验证该值并将其声明为 PHP 中的常量。

PHP 的 int 类型是有符号整数。它的大小取决于您使用的系统。如果它是 64 位系统，则值范围应该足够大。如果没有，您可以使用[GMP 扩展](http://php.net/manual/en/gmp.examples.php)或[BC Math](http://www.php.net/manual/en/book.bc.php)扩展来处理大量数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:57:21.407

“滴答声”没有标准定义。可能表示秒、50 秒、60 秒或 100 秒、毫秒或任何数量的其他细分。您需要向服务提供商询问详细信息。

如果他们想让你从第 1 年开始计算，那会引发各种其他麻烦的问题，因为公历（我们现在使用的）直到 1582 年才引入！（直到 1961 年，UTC 的概念也没有标准化。）服务提供商可能会也可能不会考虑日历的变化。

检查所有这些的一种简单方法是询问他们现在（或其他最近的参考日期）对应的值是多少。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T23:37:49.880

Unix 时间是自 1970 年 1 月 1 日以来经过的秒数。当然您可以使用特殊的库，例如 bcmath 来添加时间戳。unix 时间比 UTC 时间晚 1970 年，因此常数为 1970*365*24*60*60 秒。

# ruby-on-rails - 通过附加属性使用 has_many 创建关联

> ID：14328742
> 
> 赞同：1
> 
> 时间：2013-01-14T23:31:49.693
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有3个模型：

```
class Product < ActiveRecord::Base
  has_many :product_recommendations, :dependent => :destroy
  has_many :recommendations, :through => :product_recommendations
end

class Recommendation < ActiveRecord::Base
  has_many :product_recommendations, :dependent => :destroy
  has_many :products, :through => :product_recommendations
end

class ProductRecommendation < ActiveRecord::Base
  belongs_to :recommendation
  belongs_to :product
end 
```

我还有一个创建新推荐的方法：

```
def self.get_recommendation(product, rating_set)
    r = Recommendation.create
           r.title            =  @title
           r.description      =  @description
           r.cover_img        =  @image_url
           r.curr_price       =  @curr_item_price
           r.save! 
end 
```

我在调用该方法时传入了产品对象和 rating_set 属性。

如何创建与 1) 产品对象的 product_recommendation 关联。2）新创建的推荐对象。3) 属于 ProductRecommendation 连接表的附加属性（rating_set）。

我尝试了以下没有运气：

```
product.create_product_recommendations( {:rating_set => rating_set}, {:recommendation => r} ) 
product.recommendations.create( :rating_set => rating_set, :recommendation => r ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:14:40.640

我通过在连接表上创建记录来解决这个问题：

```
pr = ProductRecommendation.new(:rating_set => rating_set.id, :recommendation_id => r.id, :product_id => product.id)
pr.save! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:25:10.793

你很近...

```
product.product_recommendations.create( {:rating_set => rating_set}, {:recommendation => r} ) 
```

在您提到的方法中-“创建”方法将创建一个新项目并将其放入数据库中。那可能不是你想要的。相反，使用“新”并为新推荐设置参数，如下所示：

```
r = Recommendation.new(title: @title, description: @description, etc.).
r.save 
```

如果您在控制器中执行此操作，则可能不需要将其拆分为单独的方法。只需调用 new 并保存在控制器中（创建操作） - 这将允许您处理错误、重定向等。

# .net - 如何使用 perlin.getValue() 在 Libnoise 中生成 3D 高度图？

> ID：14328745
> 
> 赞同：1
> 
> 时间：2013-01-14T23:32:07.793
> 
> 标签：.net, xna, perlin-noise

我一直在使用 Libnoise 的 dotnet 端口使用以下代码在 XNA 中生成一些高度图：

```
ImprovedPerlin perlin = new ImprovedPerlin(seed, NoiseQuality.Standard);
FilterModule module = new SumFractal();
module.Frequency = 0.2f;
module.OctaveCount = 6;
module.Lacunarity = 2;
module.Gain = 2;
module.Offset = 1;
module.SpectralExponent = 0.9f;
module.Primitive3D = perlin;
float bound = 10f;
NoiseMapBuilderPlane builder = new NoiseMapBuilderPlane(
  6.0f + mapX, 10.0f + mapX, 1.0f + mapZ, 5.0f + mapZ, true);
    //bound + mapx,  (bound + mapX) * 2, bound, bound * 2, true);
NoiseMap noiseMap = new NoiseMap(128, 128);

builder.SetSize(128, 128);
builder.SourceModule = module;
builder.NoiseMap = noiseMap;
builder.Build();

Graphics.Tools.Noise.Renderer.GradientColor gradient = 
Graphics.Tools.Noise.Renderer.GradientColor.GRAYSCALE;
Color[] colorData = new Color[128 * 128];
texture =
  new Texture2D(AssetManager.graphicsDeviceManager.GraphicsDevice, 128, 128);

for (int y = 0; y < 128; ++y)
{
    for (int x = 0; x < 128; ++x)
    {
        byte color = gradient.GetColor(noiseMap.GetValue(x, y)).Green;
    }
}
texture.SetData<Color>(colorData); 
```

这一切都很好，即使我在提供的不使用 XNA 的 libnoise 样本中得到不同的结果（出于某种原因，我需要降低频率才能在 XNA 中获得相同的结果）。

遗憾的是，没有 NoiseBuilder[3D] 可以生成噪声的 3D 变体，所以我必须使用 perlin 函数自己构建它。但是，即使尝试使用 perlin.getValue() 来生成 2D 噪声似乎也以错误告终；

```
float px = 0;
float py = 0;
for (int y = 0; y < 128; ++y)
{
    py += 0.1f;
    for (int x = 0; x < 128; ++x)
    {
        px += 0.1f;
        int color = (int)((perlin.GetValue(px, py, 0) + 1) * 177.5f);
    }
}

texture.SetData < Color > (colorData); 
```

![左 = perlin.getValue()，右 = 法师 2 = NoiseMapBuilderPlane](../Images/f25989ef8e1fadbe4e194d2517d8a04a.png)

我也不知道如何合并 SumFractal，但我想这对以后来说是一个担心。

# sql - 识别为同一表中的特定日期范围添加的新记录（SQL Server）

> ID：14328746
> 
> 赞同：0
> 
> 时间：2013-01-14T23:32:07.960
> 
> 标签：sql, sql-server, tsql

我正在使用下表（下面包含虚拟数据；实际表也有大约 50K 记录）

**表 All_Users**

```
ID, Domain, ReportDate, SamAccountName
1, Win1, 1/7/2013, user1
2, Win1, 1/7/2013, user2
3, Win1, 1/7/2013, user3
4, Win1, 1/14/2013, user1
5, Win1, 1/14/2013, user2
6, Win1, 1/14/2013, user3
7, Win1, 1/21/2013, user1
8, Win1, 1/21/2013, user2
9, Win1, 1/21/2013, user3
10, Win1, 1/21/2013, user4
11, Win1, 1/21/2013, user5 
```

每周，我们都会从 AD 中获取一个摘录，并将其上传到 SQL Server 数据库（由 Report date 列标识）。**目标是能够运行查询以识别为特定日期范围添加的新 AD 帐户**。

```
E.g, identify new AD accounts added from 1/7/2013 through 1/21/2013 

The result should be: 
10, Win1, 1/21/2013, user4
11, Win1, 1/21/2013, user5 
```

目前我有一个查询如下：

```
SELECT DISTINCT ReportDate, SamAccountName, Domain, ID
FROM dbo.tbl_All_Users
WHERE (NOT (SamAccountName IN
       (SELECT SamAccountName
        FROM tbl_All_Users
        WHERE (ReportDate = '1/7/2013')))) AND (ReportDate = '1/21/2013') 
```

这最初是有效的，但随着表的增长 - 查询已经开始超时（出于显而易见的原因 - 它效率不高）。

什么是有效的方法来做到这一点？我尝试过使用内部连接（正如我在本网站上的帖子中看到的那样），但我似乎无法让它适合我的具体情况。鉴于我缺乏 SQL 知识，我似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:47:51.163

在重写查询之前，您应该查看索引的使用。表上有索引吗？如果没有，您可以从 ReportDate 列上的索引开始。

您可能会通过该索引获得很大的改进，但随后您可能会有更多机会通过更高级的性能分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T05:43:00.497

您还可以查看查询计划并查看最大成本在哪里，它还可能会建议可以改进特定查询的新索引。数据库调优顾问将更进一步，并建议额外的统计数据。请注意，额外的索引通常会增加插入和更新的成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:50:11.247

```
SELECT SamAccountName, MIN(ReportDate)                    
FROM tbl_All_Users 
GROUP BY SamAccountName
HAVING MIN(ReportDate) BETWEEN '1/7/2013' AND '1/21/2013' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T23:47:55.500

问题并不完全清楚-您是否要返回除了在这两个范围日期添加的所有用户（正如您的查询似乎正在做的那样）？

在这种情况下：

```
;with newlyAdded (select SamAccountName from dbo.tbl_Al_Users
 where ReportDate IN ('2012017', '20130121'))

 select distinct ReportDate, SamAccountName, Domain, ID
 from dbo.tbl_All_Users T
 where not exists (select 1 from newlyAdded nA where nA.SamAccountName = T.SamAccountName) 
```

# java - Java Spring MVC 模板项目问题

> ID：14328750
> 
> 赞同：1
> 
> 时间：2013-01-14T23:32:20.367
> 
> 标签：java, spring, spring-mvc, classnotfoundexception

我刚刚使用 Spring Template for MVC 创建的全新项目。我尝试在服务器上运行并获得以下信息。

有任何想法吗？

```
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/src]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Caused by: java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContextException
    at java.lang.Class.getDeclaredFields0(Native Method)
    at java.lang.Class.privateGetDeclaredFields(Class.java:2291)
    at java.lang.Class.getDeclaredFields(Class.java:1743)
    at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87)
    at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:261)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationListenerAnnotations(WebAnnotationSet.java:90)
    at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:65)
    at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:405)
    at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:881)
    at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContextException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
    ... 25 more
Jan 15, 2013 10:27:41 AM org.apache.catalina.startup.HostConfig deployDescriptor
SEVERE: Error deploying configuration descriptor /Users/maratlevit/springsource/vfabric-tc-server-developer-2.7.2.RELEASE/base-instance/conf/Catalina/localhost/src.xml
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/src]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:439)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

**编辑：**查看标记选项卡，我看到以下内容：

```
Description Resource    Path    Location    Type
Archive for required library: '/Users/maratlevit/.m2/repository/org/springframework/spring-aop/3.1.1.RELEASE/spring-aop-3.1.1.RELEASE.jar' in project 'FirstLesson' cannot be read or is not a valid ZIP file   FirstLesson     Build path  Build Path Problem 
```

**编辑 2：**根据要求添加了依赖项列表：

```
/Users/maratlevit/.m2/repository/org/springframework/spring-context/3.1.1.RELEASE/spring-context-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-aop/3.1.1.RELEASE/spring-aop-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/aopalliance/aopalliance/1.0/aopalliance-1.0.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-beans/3.1.1.RELEASE/spring-beans-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-core/3.1.1.RELEASE/spring-core-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-expression/3.1.1.RELEASE/spring-expression-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-asm/3.1.1.RELEASE/spring-asm-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-webmvc/3.1.1.RELEASE/spring-webmvc-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-context-support/3.1.1.RELEASE/spring-context-support-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/springframework/spring-web/3.1.1.RELEASE/spring-web-3.1.1.RELEASE.jar
/Users/maratlevit/.m2/repository/org/aspectj/aspectjrt/1.6.10/aspectjrt-1.6.10.jar
/Users/maratlevit/.m2/repository/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.jar
/Users/maratlevit/.m2/repository/org/slf4j/jcl-over-slf4j/1.6.6/jcl-over-slf4j-1.6.6.jar
/Users/maratlevit/.m2/repository/org/slf4j/slf4j-log4j12/1.6.6/slf4j-log4j12-1.6.6.jar
/Users/maratlevit/.m2/repository/log4j/log4j/1.2.15/log4j-1.2.15.jar
/Users/maratlevit/.m2/repository/javax/inject/javax.inject/1/javax.inject-1.jar
/Users/maratlevit/.m2/repository/javax/servlet/servlet-api/2.5/servlet-api-2.5.jar
/Users/maratlevit/.m2/repository/javax/servlet/jsp/jsp-api/2.1/jsp-api-2.1.jar
/Users/maratlevit/.m2/repository/javax/servlet/jstl/1.2/jstl-1.2.jar
/Users/maratlevit/.m2/repository/junit/junit/4.7/junit-4.7.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:28:23.117

我要检查的第一件事是：

项目 -> 右键单击​​ -> 属性 -> Java 构建路径 -> 库 -> 确保“Maven 依赖项”在该列表中。

第二次测试：

项目 -> 右键单击​​ -> 属性 -> 部署程序集 -> 确保“Maven 依赖项”在该列表中作为源。然后，确保其对应的 Deploy Path 正确。我通常将我的部署路径设为 {project}/src/main/webapp/WEB-INF/lib

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:42:51.157

需要更具体的信息：它是一个 Maven 项目吗？所有 jar 都添加到项目中了吗？

可能导致 `ClassNotFound`异常的因素：

1.  jar 未添加到`WEB-INF/lib`目录中

2.  在 web.xml 中未正确配置 DispatcherServlet 引用

能否上传web.xml、spring xml、项目结构并验证以上信息？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:44:03.457

很可能您的类路径设置正确，这就是您获得`ClassNotFoundException`.

检查它的正确性，并且所有的罐子都在正确的位置。

# javascript - 阻止 CkEditor 添加样式

> ID：14328751
> 
> 赞同：2
> 
> 时间：2013-01-14T23:32:23.780
> 
> 标签：javascript, html, ckeditor

我不希望我的用户对样式有任何控制权，但是在[CkEditor](http://ckeditor.com/)`p`中，如果您从单词或文本编辑中复制和粘贴，它会自动将样式属性添加到标签中。瞬间，`<p style="margin: 0; font-size: 12px">text</p>`当我想要它做的只是`<p></p>`如何解决这个问题时，它可能会做。如，我如何限制 CkEditor 可以制作或阻止它添加某些样式的标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:49:45.460

目前您只能使用[config.forcePasteAsPlainText](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-forcePasteAsPlainText)等功能。当您将此选项设置为`true`仅段落时，粘贴时将创建换行符（与纯文本一样）。

在2月发布的CKEditor 4.1中，将引入新的重要特性——[基于配置的数据和特性激活](http://dev.ckeditor.com/ticket/9829)。您将能够配置允许的元素、样式、属性和类。

# vb.net - VB.net给word文档添加水印

> ID：14328754
> 
> 赞同：1
> 
> 时间：2013-01-14T23:32:36.557
> 
> 标签：vb.net, vba, ms-word, watermark

我正在尝试使用 VB.NET 使用位于页面布局 > 页面背景 > 水印下的 Word 内置水印工具向 Microsoft Word 2010 文档添加水印。我已经对该主题进行了大量研究，但所有结果都建议使用`AddTextEffect`向标题添加一些自定义文本。

虽然这在视觉上实现了相同的结果，但它没有使用 Word 中的内置水印功能。因为它忽略了 Word 中的内置水印功能，所以我无法使用我的程序删除/编辑现有水印。请让我知道您可能有任何建议！

我当前的代码：

```
wordDoc = wordApp.Documents.Open(file.FullName)
wordApp.Visible = True

        'Create watermark
        With wordDoc
            .Activate()
            .Sections(1).Range.Select()
            .ActiveWindow.ActivePane.View.SeekView = Word.WdSeekView.wdSeekCurrentPageHeader
            .ActiveWindow.ActivePane.Selection.HeaderFooter.Shapes.SelectAll()
            .ActiveWindow.ActivePane.Selection.HeaderFooter.Shapes.AddTextEffect(Microsoft.Office.Core.MsoPresetTextEffect.msoTextEffect1, watermark, font, 1, Microsoft.Office.Core.MsoTriState.msoFalse, Microsoft.Office.Core.MsoTriState.msoFalse, 0, 0).Select()
            .ActiveWindow.ActivePane.Selection.ShapeRange.Line.Visible = False
            .ActiveWindow.ActivePane.Selection.ShapeRange.Fill.Visible = True
            .ActiveWindow.ActivePane.Selection.ShapeRange.Fill.ForeColor.RGB = RGB(colorBox.BackColor.R, colorBox.BackColor.G, colorBox.BackColor.B)
            .ActiveWindow.ActivePane.Selection.ShapeRange.Fill.Transparency = 0.5
            .ActiveWindow.ActivePane.Selection.ShapeRange.Rotation = 315
            .ActiveWindow.ActivePane.Selection.ShapeRange.LockAspectRatio = True
            .ActiveWindow.ActivePane.Selection.ShapeRange.Height = 130
            .ActiveWindow.ActivePane.Selection.ShapeRange.Left = -999995
            .ActiveWindow.ActivePane.Selection.ShapeRange.Top = -999995
            .ActiveWindow.ActivePane.View.SeekView = Word.WdSeekView.wdSeekMainDocument
            .ActiveWindow.Document.Save()
        End With 
```

# c++ - 错误的文件输入c ++

> ID：14328755
> 
> 赞同：-1
> 
> 时间：2013-01-14T23:32:48.857
> 
> 标签：c++, file, random, input

出于某种原因，这段代码

```
for (i = 0; i < 1024; i++)
    mem[i] = 0;

  //Read input file
  instructions.open (fname.c_str(), fstream::in);
  if (!instructions.is_open() ) {
    std::cout << "Error 404: file not found\n";
    exit (404);
  }

for (i = initial_pos; !instructions.eof(); i++) 
  instructions >> mem[i]; 
```

正在读取这个文件

```
1
21
1
9
11
9
16
11
9
3
60
2
0
21
0
1
11
4
0
2
2
90
0 
```

像这样：

```
1
33
1
32
11
0
28
11
1
26
11
2
24
11
3
22
41
1
1
51
8
22
1
3
21
2
0
60
34
12
5
2
2
3
90
0
0
0
1
0 
```

>> 操作数似乎向内存添加随机数有什么特别的原因吗？请注意，mem 是一个初始化的数组，所有数字都是在读取后打印出来的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:38:13.127

冒着写第一百次的风险，你的代码*应该*是这样的：

```
std::ifstream infile(fname.c_str());   // "in" is implied

if (!infile) { /* error, could not open file */ }

for (int n; infile >> n; )
{
    // we read the number n
} 
```

如果您只想要一个整数容器，那就更好了：

```
#include <vector>
#include <iterator>
#include <fstream>

std::ifstream infile(fname.c_str());
std::istream_iterator<int> beg(infile), end();

std::vector<int> v(beg, end);

// now "v" contains all the integers. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:05:50.333

解决它。我错误地调用了可执行文件。

它应该是：

[ [ [ [输入姓名]]]]

但我这样称呼它：

sim test1.bin

所以模拟器将初始PC设置为“test1.bin”，并将输入设置为默认输入“input.bin”，所以我读错了文件。

我想这总是归结为糟糕的家庭作业发音。

# html - 重新加载后在下拉菜单中保存所选选项

> ID：14328756
> 
> 赞同：0
> 
> 时间：2013-01-14T23:32:53.720
> 
> 标签：html

我正在使用这个下拉菜单：

HTML：

```
<ul id="dropdown">
    <li> Choose theme
    <ul> 
        <li id="stylesheet1" > <a href="#"> Default </a></li>
        <li id="stylesheet2" > <a href="#"> Theme 1 </a></li>
        <li id="stylesheet3" > <a href="#"> Theme 2 </a></li>
        <li id="stylesheet4" > <a href="#"> Theme 3 </a></li>

    </ul>
</li>
</ul> 
```

这是CSS：

```
#dropdown {
 float: left;
 margin: 0;
 padding: 0;
 }
#dropdown li {
 background: #F7F0E0;
 border:1px solid #666;
 float: left;
 list-style: none;
 margin: 0;
 padding:0 0 0 10px;
 position: relative;
 height:20px;
 width:100px;
}
#dropdown li:hover {
 background: #FF2828;
}
#dropdown li a {
 text-decoration:none;
}
#dropdown ul {
 background: #F7F0E0;
 display: none;
 margin: 0;
 padding: 0;
 position: absolute;
 top: 20px;
 left: -1px;
 z-index: 500;
}
 #dropdown ul {
 position: absolute;
   }
 #dropdown li:hover ul {
 display: block;
 } 
```

下次重新加载页面时是否可能保留所选选项？或者我应该再做一个下拉菜单，例如：

```
<form>
<select id="myList" >
  <option id="stylesheet1">Default</option>
  <option id="stylesheet2">Theme 1</option>
  <option id="stylesheet3">Theme 2</option>  
  <option>Theme 3</option>
</select>

<form> 
```

我在我的页面上使用 javascript 和 cookie，我是否也应该使用它来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:43:02.387

Cookie 虽然可能有效，但并不安全。您的某些用户可能禁用了 cookie，因此对他们不起作用。

要在下次重新加载页面时保持选择的选项，最好使用服务器端脚本，在数据中保留一些持久性。您可能会阅读有关[PHP POST & GET](http://php.net/manual/en/reserved.variables.request.php)和[PHP Session](http://php.net/manual/en/ref.session.php)的信息。

作为替代方案，您可以添加在[localStorage](http://tutorials.jenkov.com/html5/local-storage.html) (html5) 中选择的选项。但是，此替代方法不适用于旧浏览器。

# google-app-engine - Jasper 报告 Google App Engine 的替代方案

> ID：14328759
> 
> 赞同：1
> 
> 时间：2013-01-14T23:33:10.490
> 
> 标签：google-app-engine, jasper-reports

在 Google App Engine 中运行的 Jasper 报告的替代方案是什么？有人试过吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-13T13:21:08.977

我们在 Compute Engine 或 Kubernetes 上尝试了[JasperReports® 服务器](https://community.jaspersoft.com/project/jasperreports-server)的变体，但身份验证存在问题；

[AppEngine URLFetchService 删除自定义响应标头属性？](https://stackoverflow.com/questions/45163680/appengine-urlfetchservice-removing-custom-response-header-attribute/45164536#45164536)

即使 JasperReports 服务器为登录 POST 请求返回 200 OK 状态，“Set-Cookie”属性也不会出现在响应标头中。

否则，这将是 Google Cloud 平台的一个不错的报告解决方案。

# c# - 如何对数据表中的数据进行分组（GridView 样式）

> ID：14328760
> 
> 赞同：0
> 
> 时间：2013-01-14T23:33:10.303
> 
> 标签：c#, .net

对于特殊要求，我们创建了自己的 HTML 表格，它的工作方式类似于网格视图。它从 DataTable 中获取数据并填充 TD 和 TR 单元格

我们希望像网格视图一样实现分组功能，我们在其中指定列名并将所有值分组。

如何直接在 DataTable 中执行分组，然后按原样输出行？我可以使用 Linq 吗？请通过指导示例来提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:42:39.493

您可以尝试将您的转换`DataTable`为`IEnumerable`使用`AsEnumerable`（确保添加对 System.Data.DataSetExtensions 的引用）。

然后使用[GroupBy](http://msdn.microsoft.com/en-us/library/bb534501.aspx)对您的数据进行分组。它将返回`IEnumerable<IGrouping<TKey, TSource>>`每个`IGrouping<TKey, TElement>`对象包含对象集合和键的位置。例子：

```
var groups = dt.AsEnumerable().GroupBy( r => r.Field<string>("someField") ); 
```

**更新**：您可以使用多个字段（[参见示例](https://stackoverflow.com/questions/1869001/linq-group-by-multiple-fields-syntax-help)）或嵌套它们（[参见示例](https://stackoverflow.com/questions/442425/nested-group-by-in-linq)）进行分组

# jquery - jQuery UI 加载事件？

> ID：14328762
> 
> 赞同：3
> 
> 时间：2013-01-14T23:33:15.983
> 
> 标签：jquery, onload-event

无论如何，不​​仅可以检测到已加载 jquery UI，而且还会在它加载时触发事件？现在我将代码包装在 $(document).ready() 函数中，但有时 UI 代码会出错，因为 UI 库没有完全加载（一切都以正确的顺序加载）。该代码 99% 的时间都可以正常工作，但大约 1% 的用户会收到与 UI 未加载相关的 javascript 错误。

就像是

```
$(document).ready(function() {
  jQuery.ui.ready(function() { .... 
```

这样的事情可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:54:32.710

您可以尝试使用 getcript 加载您的插件，如 jQuery-ui 和其他插件，并在脚本完全加载之前保持准备好的功能

```
// Hold the ready function(s)
$.holdReady(true);

// Retrieve the script and unlock the ready function(s) when the script is loaded
$.getScript("myplugin.js", function() {
    $.holdReady(false);
}); 
```

让您准备好功能简单

```
$(document).ready(function() {

    // your code here

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:40:44.593

我过去遇到过类似的问题。用这个：

```
if (typeof jQuery.ui != 'undefined') {
  //do something
} 
```

希望这可以帮助！

# c++ - 为什么 c++ 返回这个结果

> ID：14328763
> 
> 赞同：-3
> 
> 时间：2013-01-14T23:33:39.757
> 
> 标签：c++

当我想计算 0 的补码时，我得到 -1 作为答案。我认为它应该是一个很大的数字，因为它是二进制数中的 11111111（我不知道使用了多少位，我只是写了 8）系统。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T23:34:28.713

使用`unsigned`整数类型。有符号整数的按位运算有很多实现定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:36:19.103

当值以 2s 补码解释时，所有位设置为`-1`.

# bash - Bash bc 计算器评估，带有 NOT 评估的多个条件

> ID：14328765
> 
> 赞同：0
> 
> 时间：2013-01-14T23:34:06.450
> 
> 标签：bash, bc

长话短说，是否可以让 bc 评估以下表达式？

```
echo "!(2.2 >= 0) && !(2.2 < 10)" | bc
bash: !: event not found 
```

我知道这有效：

```
echo "(2.2 >= 0) && (2.2 < 10)" | bc
1 
```

那么我做错了什么？bc 手册页说它支持*!expr*，但我似乎无法调用它。我知道可以通过否定比较符号来解决这个问题，但我想知道在这种情况下应该如何调用*!expr 。*

非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:42:37.723

```
bash: !: event not found 
```

有一个特性`bash`，称为“历史扩展”（请参阅`man bash`​​ ）：它会`!`特别处理，即使在双引号内也是如此。

用单引号替换双引号应该会有所帮助（那里不会发生历史扩展）。

此外，历史扩展不会发生在非交互式 shell 中（也就是说，您的示例将在脚本中按原样工作）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:47:31.440

带双引号的 bash 漫游：

```
kent@7pLaptop:/tmp$ echo  -e "\x21(3>5)"|bc
1 
```

测试下：

```
kent@7pLaptop:/tmp$ bash -version|head -1
GNU bash, version 4.2.42(2)-release (i686-pc-linux-gnu) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:40:32.723

似乎 bash 正在解释您的“！” 作为某种命令。替换“ for ' 对我有用。

当只是向终端输出一些东西时也会发生这种情况：

```
$ echo "!"
-bash: !: event not found
$ echo '!'
! 
```

# c# - 表单大小更改时如何自动缩放子控件的字体大小？

> ID：14328771
> 
> 赞同：1
> 
> 时间：2013-01-14T23:34:33.870
> 
> 标签：c#, .net, tablelayoutpanel

我正在使用 TableLayoutPanel 来包含我希望在调整表单大小时自动调整大小的控件。我想知道当表单本身被调整大小时，如何使表单的子控件的大小与表单成比例？尽管 TableLayoutPanel 会自动调整所包含控件的大小，但这些控件保持相同的字体大小。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T23:36:19.110

这是迄今为止我想出的最好的方法。我使用两个比例因子，并遍历所有控件以选择性地选择要缩放的那些：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace TestTableLayoutPanel
{
    public partial class Form2 : Form
    {
        private const float LARGER_FONT_FACTOR = 1.5f;
        private const float SMALLER_FONT_FACTOR = 0.8f;

        private int _lastFormSize;

        public Form2()
        {
            InitializeComponent();

            this.Resize += new EventHandler(Form2_Resize);
            _lastFormSize = GetFormArea(this.Size);
        }

        private int GetFormArea(Size size)
        {
            return size.Height * size.Width;
        }

        private void Form2_Resize(object sender, EventArgs e)
        {

            var bigger = GetFormArea(this.Size) > _lastFormSize;
            float scaleFactor = bigger ? LARGER_FONT_FACTOR : SMALLER_FONT_FACTOR;

            ResizeFont(this.Controls, scaleFactor);

            _lastFormSize = GetFormArea(this.Size);

        }

        private void ResizeFont(Control.ControlCollection coll, float scaleFactor)
        {
            foreach (Control c in coll)
            {
                if (c.HasChildren)
                {
                    ResizeFont(c.Controls, scaleFactor);
                }
                else
                {
                    //if (c.GetType().ToString() == "System.Windows.Form.Label")
                    if (true)
                    {
                        // scale font
                        c.Font = new Font(c.Font.FontFamily.Name, c.Font.Size * scaleFactor);
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-31T10:11:53.210

根据之前的答案，我写了一个真正的字体比例解决方案。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace MachineControlsTest
{
    public partial class Form2 : Form
    {

        private int _lastFormSize;

        public Form2()
        {
            InitializeComponent();

            this.Resize += new EventHandler(Form2_Resize);
            _lastFormSize = GetFormArea(this.Size);
        }

        private int GetFormArea(Size size)
        {
            return size.Height * size.Width;
        }

        private void Form2_Resize(object sender, EventArgs e)
        {
            Control control = (Control)sender;

            float scaleFactor = (float)GetFormArea(control.Size) / (float)_lastFormSize;

            ResizeFont(this.Controls, scaleFactor);

            _lastFormSize = GetFormArea(control.Size);

        }

        private void ResizeFont(Control.ControlCollection coll, float scaleFactor)
        {
            foreach (Control c in coll)
            {
                if (c.HasChildren)
                {
                    ResizeFont(c.Controls, scaleFactor);
                }
                else
                {
                    //if (c.GetType().ToString() == "System.Windows.Form.Label")
                    if (true)
                    {
                        // scale font
                        c.Font = new Font(c.Font.FontFamily.Name, c.Font.Size * scaleFactor);
                    }
                }
            }
        }
    }
} 
```

# php - mod_rewrite：图像文件名被误认为是重写值

> ID：14328774
> 
> 赞同：0
> 
> 时间：2013-01-14T23:35:02.773
> 
> 标签：php, .htaccess, mod-rewrite

在我的`.htaccess`文件中，我有这个重写规则：
`RewriteRule example actual-page.php [L]`

简单地重写：
`www.mysite.com/example`到`www.mysite.com/actual-page.php`

我遇到的问题导致`example`文件名（my_example.png）中的图像由于与规则混淆而无法加载。

我通过将规则更改为：
`RewriteRule /example /actual-page.php [L]`

我只想知道正确的解决方案是什么。在 mod_rewrite 的世界里我还有很多东西要学，我想知道是否有针对此类问题的已实施修复，或者你是否真的应该让规则更具体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:36:27.720

在你的规则前面加上这一行：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

这意味着只有当请求的 url 不是真实文件时，以下规则才会匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:21:06.740

您的重写规则`RewriteRule example actual-page.php [L]`意味着：

在当前 url 中查找正则表达式`example`，如果找到，将 URL 替换为`actual-page.php`. 然后终止重写过程并忽略进一步的规则（L-flag）。

如果字符串“example”出现在 url 中的任何位置，包括“example.png”，也包括“another-example-from-a-different-url”，则此正则表达式将触发。

因此，确保不要使用正则表达式搜索任何地方，而是告诉它匹配整个 url 字符串，或者至少是重要部分，这是一个非常好的主意。这样做的语法字符是“^”表示“字符串开始”，“$”表示“字符串结束”。这会将您的规则更改为`RewriteRule ^example$ actual-page.php [L]`.

另一方面，这现在可能不起作用，因为 url 确实包含一个斜杠，不允许再匹配。您可以添加它：`RewriteRule ^/example$ actual-page.php [L]`. 请注意，查询字符串从未在此匹配中使用，您无法在 RewriteRule 中检测到它，但必须在其前面使用 RewriteCond 子句。

将任何虚拟 url 重写为现有 PHP 脚本但不触及任何现有资源（如 HTML 文件、图像等）的通用用例如下所示：

```
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -l
RewriteRule .* - [L]
RewriteRule .* php-script.php [L] 
```

This has an inverse logic: If the first rule matches, and the requested filename is either a file, or a directory or a symbolic link, then the rewriting does not take place. This will cancel rewriting if a real ressource is requested. Otherwise the same URL is tried in the second RewriteRule, and the php-script.php is executed and can then analyze the requested URL and act upon it.

# zend-framework2 - 如何从 zf2 的控制器中禁用全局视图/布局对象？

> ID：14328775
> 
> 赞同：0
> 
> 时间：2013-01-14T23:35:10.093
> 
> 标签：zend-framework2

我正在使用 ZF 2.0.6，并且我知道以下技巧来禁用视图，但它使其他全局视图/布局保持不变。我也知道有一个 setContent 方法可以破坏所有我不需要的东西。**那么如何从控制器中禁用全局视图/布局对象呢？**

*仅禁用视图*

```
$viewModel = new ViewModel(array());
$viewModel->setTerminal(true);
return $viewModel; 
```

*破坏响应*

```
return $this->getResponse()->setContent('Nooooooooo!'); 
```

在 Module 引导和调度事件中设置布局时似乎有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:38:06.370

我选择了clobber 方法并传递了一个新的视图模型。这似乎可行，但必须有一个更优雅的方法。

*控制器*

```
use Zend\View\Model\ViewModel;
use Module\Form\Form;

....

public function createAction()
{
    $viewRenderer = $this->getServiceLocator()->get('viewrenderer');
    $viewModel = new ViewModel();
    $viewModel->setTemplate('module/controller/action')
              ->setVariables(array('form' => new Form()));
    return $this->getResponse()
                ->setContent($viewRenderer->render($viewModel));
} 
```

# ruby-on-rails - rake 任务：类的未定义方法

> ID：14328776
> 
> 赞同：0
> 
> 时间：2013-01-14T23:35:23.637
> 
> 标签：ruby-on-rails, rake, rake-task, rakefile

我在我的 RakeFile 中添加了一个新任务（我知道这样做的新方法是将您的任务添加到 lib/tasks，但其他任务在 RakeFile 中，我还不想重构。）我添加的任务访问模型（尽管模型名称不在错误中）但不会访问其方法。

```
rake aborted!
undefined method `transcode' for #<Class:0x10700e878> 
```

我在 RakeFile 中的任务非常简单；

```
namespace :casta do
  desc "Transcode user videos from S3"
  task :transcode => :environment do
    ProfileVideo.transcode
  end
end 
```

我的模型非常简单；

```
class ProfileVideo < ActiveRecord::Base

  belongs_to :application_form

  def transcode
    puts "Transcoding"
  end

end 
```

我的其他 RakeFile 任务使用脚本/运行程序，它们工作得很好。

rails
2.3.14 rake 0.8.7（我在 0.9.2 虽然降级测试）

想要一些见解，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:38:13.143

您将 transcode 作为类方法调用，因此将 transcode 方法更改为：

```
 def self.transcode
    puts "Transcoding"
  end 
```

或者更可能是您想要的：您可以创建一个 ProfileVideo 实例并在其上调用 transcode ，然后将 transcode 方法保持原样：

```
 task :transcode => :environment do
    pv = ProfileVideo.new(attributes)
    pv.transcode
  end 
```

# android - 如何让 TextView 或 EditText 显示变量

> ID：14328780
> 
> 赞同：0
> 
> 时间：2013-01-14T23:35:50.517
> 
> 标签：android

我正在尝试在 a`TextView`或上显示计算结果`EditText`。我从 one100lbs 和 tenPounds 中获取用户输入，然后将它们加在一起并尝试将其显示在 totalPounds 上。这不是我要使用的方程式，只是想看看它是否有效。目前，我的应用程序下面的代码崩溃了。这一切都归于一`activity`。另外，当我更改我的更改`EditText`位置的 ID 时，怎么会`editText`发生`relative layout`？请不要链接，我知道它很简单，但我是菜鸟。我已经搜索并且很难找到解决方案。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pounds);
    addListenerOnSpinnerItemSelection();

    EditText one100lbs = (EditText) findViewById(R.id.one100lbs);
    int one = Integer.valueOf(one100lbs.getText().toString());

    EditText tenPounds = (EditText) findViewById(R.id.tenPounds);
    int two = Integer.valueOf(tenPounds.getText().toString());

    int result = one + two;

    TextView textView = (TextView) findViewById(R.id.totalPounds);
    textView.setText(result);   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:38:31.597

你想要这样的东西：

```
textView.setText(String.valueOf(result)); 
```

就目前而言，当您仅提供一个 int 时，Android 会尝试查找资源 id，这将失败。

我还发现您正在使用 EditTexts，它因在输入数字时失败而臭名昭著，除了[强制键盘仅是 numbers](https://stackoverflow.com/questions/9334314/how-to-force-edittext-to-accept-only-numbers)之外，您还可以执行以下操作：

```
int one = 0;
int two = 0;

try{
  EditText one100lbs = (EditText) findViewById(R.id.one100lbs);
  one = Integer.valueOf(one100lbs.getText().toString().trim());
}
catch (NumberFormatException e)
{
  one = -1;
}

try{
  EditText tenPounds = (EditText) findViewById(R.id.tenPounds);
  two = Integer.valueOf(tenPounds.getText().toString().trim()); 
}
catch (NumberFormatException e)
{
  two = -1;
}

int result = one + two;

TextView textView = (TextView) findViewById(R.id.totalPounds);
textView.setText(String.valueOf(result)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:18:50.983

您可以使用以下任一方法：

```
textView.setText(Integer.toString(result)); 
```

或者

```
textView.setText(result + ""); 
```

# ruby-on-rails - Rails 如何创建可通过浏览器和 cron 作业使用的方法

> ID：14328781
> 
> 赞同：0
> 
> 时间：2013-01-14T23:36:13.817
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cron, whenever

我有一个我创建的名为的方法，`get_primary_email(user)`它在我的 application_controller.rb 文件中。

现在我在我的应用程序以及调用使用方法的 cron 作业中都使用了这个方法`get_primary_email(user)`

我的问题是，如果我将方法定义为：

```
def get_primary_email(user)
end 
```

它在我的应用程序中运行良好，但 cron 作业出错。

如果我将方法定义为：

```
def self.get_primary_email(user)
end 
```

我的 cron 工作有效，但是通过浏览器调用 get_primary_email(user) 的每个方法都失败了。

我如何在这两个地方使用相同的方法？

**编辑**

日程安排.rb

```
set :output, "#{path}/log/cron.log"

every 1.day, :at => "8:00pm" do
  runner "BirthdayRemindersController.send_birthday_email_reminders"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:42:55.170

这通常通过设置 cron 作业来调用 rake 任务来完成。在 rake 任务中，您可以轻松调用 Rails 代码。

网上有很多例子。这是来自SO的一个：

[rails 的 cron 工作：最佳实践？](https://stackoverflow.com/questions/285717/a-cron-job-for-rails-best-practices)

编辑——添加 Resqueue 代码和 Mailer 示例

用户.rb

```
class User

  scope :birthday_today, lambda { where('birthday = ?', Date.today) }

  def self.send_birthday_alerts
    self.birthday_today.each do |user|
      BirthdayAlertJob.enqueue(user.id)
    end
  end

  def get_primary_email
    ...
  end

end 
```

工作/birthday_alert_job.rb

```
class BirthdayAlertJob
  @queue = :birthday_alert

  def self.perform(u_id)
    user = User.find(u_id)
    UserMailer.birthday_alert(@user).deliver
  end
end 
```

日程安排.rb

```
every 1.day, :at => "8:00pm" do
  rake "users:send_birthday_alerts"
end 
```

用户.rake

```
namespace :users do
  desc "Queue up Birthday Alerts"
  task :send_birthday_alerts => :environment do
    User.send_birthday_alerts
  end
end 
```

user_mailer.rb

```
class UserMailer < ActionMailer::Base

  def birthday_alert(user)
    mail(to: user.primary_email, subject: "Happy Birthday")
    ...
  end
end 
```

这很接近，未经测试等。我知道您需要做的一件事是确保尚未向用户发送电子邮件。不知道你现在是怎么做的。另一列可以保存警报最后一次排队的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:48:12.753

根据您发布的内容，我建议您这样做：

**lib/birthday_reminders.rb：**

```
class BirthdayReminders
  def self.send_birthday_email_reminders
    # code ...
  end

  def self.primary_email_for(user)
    # code ...
  end
end 
```

**控制器/application_controller.rb：**

```
class ApplicationController < ActionController::Base
  def get_primary_email(user)
    BirthdayReminders.primary_email_for(user)
  end
end 
```

**某处/schedule.rb：**

```
set :output, "#{path}/log/cron.log"

every 1.day, :at => "8:00pm" do
  runner "BirthdayReminders.send_birthday_email_reminders"
end 
```

# c# - Prism，知道何时加载 WPF 页面

> ID：14328790
> 
> 赞同：0
> 
> 时间：2013-01-14T23:37:53.370
> 
> 标签：c#, .net, prism

我正在尝试对使用 Prism 4.0 进行视图管理的现有 .NET 应用程序进行一些更改。我不太了解.NET、WPF、Prism，如果这个问题是菜鸟，我很抱歉。基本上我的情况是这样的：

单击按钮以推送新页面：

```
 private void CreateGraphCommandHandler()
    {
        // Request navigation
        RegionManager.RequestNavigate(RegionNames.MainRegion, ScreenNames.GraphView);
        EventAggregator.GetEvent<CreateGraphMessage>().Publish(SelectedChart);
    } 
```

在 CreateGraphCommandHandler 方法中，它基本上是获取适当的数据点并构建一个 FrameWorkElement 类型的图表。它使用一些名为 Visifire 的第三方库来渲染我相信的情节。然后有一个按钮来保存图像并转到下一页查看更多图表。

部分图像的保存如下所示：

```
 void SaveUsingEncoder(FrameworkElement visual, string fileName, BitmapEncoder encoder)
        {
            int aheight = (int)visual.ActualHeight;
            int awidth = (int)visual.ActualWidth;

            RenderTargetBitmap bitmap = new RenderTargetBitmap(
                awidth,
                aheight,
                96,
                96,
                PixelFormats.Pbgra32);
            bitmap.Render(visual);
            BitmapFrame frame = BitmapFrame.Create(bitmap); 
```

所以据我所知，这个调用保存了当前在屏幕上呈现的内容。

有一个新的要求是生成人们可以为所需数据集生成的所有图表。因此，基本上，通过所有屏幕并绘制数据图表，将其保存到适当的位置。我遇到的问题是，当下一个屏幕被推送以生成第一个绘图时，我认为 Save 在绘图完成渲染之前被调用。

当屏幕被推送到创建绘图的页面时，将调用此方法：

```
EventAggregator.GetEvent<CreateGraphMessage>().Subscribe(CreateGraphHandler); 
```

所以我认为在 CreateGraphHandler 方法结束时，我可以调用 SaveChart() 方法（与按下按钮调用的方法相同）。问题是，当调用 SaveUsingEncoder 方法时，FrameworkElement 视觉对象为空。所以我假设页面没有加载并保存错误。我想知道是否有办法在调用 SaveChart() 之前等待此页面完成加载图表？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:45:05.463

您可以做的是使用`Loaded`页面的事件发送另一条消息，`EventAggregator`让负责绘图的组件知道页面已加载并且可以呈现为位图。

# ios - 不同视图控制器中的同名变量

> ID：14328791
> 
> 赞同：4
> 
> 时间：2013-01-14T23:37:56.830
> 
> 标签：ios, objective-c, xcode, viewcontroller

我正在编写一个简单的选项卡式 iOS 应用程序。它有 3 个选项卡，每个选项卡都有自己的视图控制器。在每个视图控制器中，我声明一个同名变量：

```
float nitriteLevel; 
```

但是，当我在一个 VC 中更改 nitriteLevel 的值时，它也会更改其他 VC 中 nitriteLevel 的值。据我了解，这不应该是，它们应该是完全独立且不相关的。我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:09:56.917

Do you declare it in the middle of the implementation section? Or even outside any @... @end block? If so then you made it global. That is possible because beneath Objective-C there is Ansi C.

For a private instance variable do the following: MyClassName.h file:

```
@interface MyClassName : ItsSuperclassName <SomeProtocol> {
    float nitriteLevel;
}

// if you want it private then there is no need to declare a property. 

@end 
```

MyClasseName.m file:

```
@implementation

// These days there is no need to synthesize always each property.
// They can be auto-synthesized. 
// However, it is not a property, cannot be synthesized and therefore there is no getter or setter. 

    -(void) someMehtod {

        self->nitriteLevel = 0.0f;  //This is how you access it. 
        float someValue2 = self->nitriteLevel; // That is fine. 

        self.nitriteLevel = 0.0f; // This does not even compile. 
        [self setNitriteLevel: 0.0f]; //Neither this works. 
        float someValue2 = self.nitriteLevel; // nope
        float someValue3 = [self setNitriteLevel]; // no chance

    }
@end 
```

I am not 100% positive about the following: This type of variable is not being initialized automatically. You cannot use `float nitriteLevel = 0.0f;` at that point. Make sure that you initialize it in the init method. Depending on your stile initialize them latest in viewDidLoad (in View Controllers).

# javascript - 使用 columnizer 根据最小屏幕分辨率重新定义列数

> ID：14328795
> 
> 赞同：2
> 
> 时间：2013-01-14T23:38:12.990
> 
> 标签：javascript, jquery, responsive-design, media-queries

我正在使用[columnizer jQuery 插件](http://welcome.totheinter.net/columnizer-jquery-plugin/)将我的内容拆分为列。请注意，我的网站是响应式的，具有流体宽度容器。我一直在根据窗口的最小屏幕分辨率调用不同的 javascript，这与 CSS 媒体查询的工作方式相同。

minscreen 用作不同的断点，我想用它来更改在`columnize()`函数选项中定义的列数。

这是我用来创建断点的函数之一：

```
/* Min Screen 480
----------------------------------------------------------------*/
function minScreen480(){
    document.body.style.overflow = "hidden";
        if ($(window).width() >= 480) {
            // Set stuff here
        }else{
            // Remove stuff here
        }
    document.body.style.overflow = "";
} 
```

然后我像这样运行该函数`window.resize`：

```
$(window).resize(function(){
    minScreen480();
}).trigger('resize'); 
```

这是 columnize 函数本身：

```
$('.element').columnize({ columns: 2, lastNeverTallest: true }); 
```

我已经尝试了我能想到的一切，但它似乎永远无法正常工作。我不能将`columnize()`函数放在我的`minScreen480()`函数中，因为`columnize()`它已经构建为在调整大小时调整它的列。当我将它放在`minScreen480()`函数中并在 上运行时`window.resize`，列开始增加，变得一团糟。

有更多经验的人可以帮助我吗？

仍然无法提出解决方案。想我会编辑看看我是否能得到一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T06:11:13.713

如果这个问题仍然存在：

关于调整大小时的列相乘 - 发生这种情况是因为 columnizer 有自己的调整大小功能，并且要停止这种效果 - 你应该使用 columnizer 选项**buildOnce**

```
$('.element').columnize({ columns: 2, lastNeverTallest: true, buildOnce:true }); 
```

并重新*列*，尝试使用展开：

```
jQuery(document).ready(function($){

 $(window).resize(function(){

    // remove all parent make by your jquery columnizer
    $('.column > *').unwrap();

    // re-initialize jQuery columnizer with 1 column

    $('.element').columnize({ columns: 1 });

 });

}); 
```

在这里找到它[http://wpquestions.com/question/show/id/2179](http://wpquestions.com/question/show/id/2179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T15:02:59.523

我在尝试解决相同问题时遇到了 Tommi Kaikkonen [TYPESETTING RESPONSIVE CSS3 COLUMNS的这个 CSS3 解决方案。](http://www.kaikkonendesign.fi/columns/)我不确定您必须支持哪些浏览器，但这在 IE10+、Webkit 和 iOS 中运行良好。

> “css3 列获取内容并根据列宽或列数 css 属性将其划分为列。前者将内容插入到动态数量的列中，并具有您给它的宽度。后者将相同高度的内容分配给你给它的列数。”

在他的示例中，他使用 CSS3 属性`column-width`来定义列的宽度，这允许列数水平动态迭代，而不是使用`column-count`指定列数，并允许高度根据需要动态调整。

根据我的需要，我有固定数量的内容，因此我将使用媒体查询并`column-count`根据浏览器窗口大小来控制我的内容包含在其中的列数。

1.  [CSS3 列数](https://developer.mozilla.org/en-US/docs/Web/CSS/column-count)
2.  developer.mozilla.org/en-US/docs/Web/CSS/column-width （对不起，它只让我发布两个链接）

# kml - KML 是否支持搜索功能

> ID：14328803
> 
> 赞同：1
> 
> 时间：2013-01-14T23:38:26.313
> 
> 标签：kml, google-earth

是否有将 Google 地球定位到指定位置的 KML 标签序列？

如果我启动 Google 地球，在搜索文本框中输入“休斯顿”并按 [搜索]，地图将定位到德克萨斯州休斯顿。

您可以通过 KML 完成此任务吗？

如果没有，你会怎么做呢？我正在尝试从 C# 应用程序执行此操作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T21:25:58.340

大多数基本的 KML 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
    <name>Name of KML</name>
    <StyleMap>
    .........
    </StyleMap>
    <Folder>
    ......
    </Folder>
</Document> 
```

如果您将`<LookAt>`或分配`<Camera>`给`<Document>`节点，则无论何时加载 KML，它都应加载该视图 - 除非另有说明（例如通过 API/COM）

因此，您的 KML 应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
    <name>Name of KML</name>
    <LookAt>
    ..........
    </LookAt>
    <StyleMap>
    .........
    </StyleMap>
    <Folder>
    ......
    </Folder>
</Document> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:55:25.970

我假设您正试图以 KML 文件中的许多点/特征为中心？

（据我所知）无法通过 KML 定义初始地图设置。也就是说，Google Earth 5.0 支持 Tours，并且使用 FlyTo 元素可以实现以某个位置为中心的目标，但我不相信无论如何可以在没有 JavaScript 或插件的情况下自动播放播放列表（您需要这样做）这在 KML 中似乎否定）。

我知道 Google Maps API 会自动居中并缩放加载的 KML 文件（任何人都可以评论 Google Earth 是否也这样做？）。我没有尝试过，但我很好奇是否有办法使用文件夹来利用这种行为。如果（以及一个很大的如果）：

1.  Google 地球在加载的 KML 文件上居中/缩放，以及
2.  Google 地球仅对第一个或最后一个文件夹中的数据执行此操作

（我不知道这两个都是真的）

您可以尝试将您的搜索点放在一个文件夹中，然后查看地图是否跟踪到它。

很抱歉，此回复的整个第二部分都是一个疯狂的猜测，但我现在无法对其进行测试，并认为它可能值得一试。如果我押注它，我的答案将是仅靠 KML 无法完成。测试上面的 hack 很容易，如果你没有机会，我今晚晚些时候应该有时间尝试一下并发布一个附录。

# wso2 - 是否可以在 WSO2 数据服务中提供可选的输出映射？

> ID：14328806
> 
> 赞同：0
> 
> 时间：2013-01-14T23:38:32.360
> 
> 标签：wso2, wso2esb, wso2dss

我有 Oracle 存储过程，其中 Oracle REF CURSOR 作为 OUT 参数。当数据库中存在数据时，将执行一个 select 语句，并且 REF CURSOR 将映射 select 语句中的列，这些列可以在数据服务的 OUTPUT 映射中访问。但是，当没有数据用于存储过程的相应输入时，将执行不同的选择语句。第二个 SELECT 语句具有不同的列集。（简而言之，根据对存储过程的输入执行两个选择语句中的任何一个，两个选择语句中的列集不同）

由于我们在数据服务中使用 DB 列定义了输出映射，并且在这种情况下，由于正在执行具有不同列集的不同选择语句，因此每次执行时数据服务都无法找到输出映射中定义的所有列存储过程因此我得到以下错误

```
<axis2ns19:DataServiceFault xmlns:axis2ns19="http://ws.wso2.org/dataservice">Error obtaining parser from data source:DS Fault Message: Error in 'SQLQuery.processStoredProcQuery'
DS Code: DATABASE_ERROR
Source Data Service:-
Name: GET_USER_DS
Location: /GET_USER_DS.dbs
Description: N/A
Default Namespace: http://ws.wso2.org/dataservice
Current Request Name: USER_op
Current Params: {in_user_id=111111111}
Nested Exception:-
DS Fault Message: Error in 'StaticOutputElement.execute', cannot find parameter with type:column name:DASHBOARDID
DS Code: INCOMPATIBLE_PARAMETERS_ERROR
" 
```

有没有办法为数据服务定义可选的输出映射，这样即使输出映射中的列在返回的结果集中不可用，我也不会收到此错误？

请告诉我。谢谢阿比吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T04:24:25.867

使用[DSS 3.0.0 及更高](http://wso2.com/products/data-services-server/)版本，您可以为值不确定的结果元素设置 optional="true"。因此，对于从 REF_CURSOR 和其他选择语句返回的元素，请在 dbs 的结果元素定义中设置 optional="true" 。

```
<result element="element" rowName="elements" >
  <element name="DASHBOARDID" column="DASHBOARDID" xsdType="xs:string" optional="true"/>
</result> 
```

# swing - 如何为没有 JFrame 的 JPanel 进行布局？（也 - java.awt.headless 麻烦）

> ID：14328811
> 
> 赞同：3
> 
> 时间：2013-01-14T23:39:01.743
> 
> 标签：swing, layout, amazon-ec2, awt

我需要从基于 Java servlet 的应用程序中动态生成一些图像。我想让布局比仅使用硬编码位置和 Graphics2D.drawString 更易于维护，所以我想我会为此使用 AWT/Swing 布局。

这在我的 Windows 开发机器上运行良好（创建 JFrame、添加组件、.pack() 框架、通过将 BufferedImage 传递给 component.paint() 进行渲染；请注意，我没有调用 .setVisible(true)）。（注意 - 我使用 JFrame 的唯一原因是有一些东西可以调用 .pack() ，否则我可能会使用更轻量级的东西。）

但是，它在我的 Elastic Beanstalk 托管 AWS EC2 Tomcat7 机器上失败，出现 java.awt.HeadlessException。

```
java.awt.HeadlessException
    at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:173)
    at java.awt.Window.<init>(Window.java:477)
    at java.awt.Frame.<init>(Frame.java:419)
    at javax.swing.JFrame.<init>(JFrame.java:218) 
```

第一个问题（已过时）：这是否有机会在不安装 X11 的情况下工作？如果是，我应该将“java.awt.headless”设置为什么？如果我使用“true”，那么它将在当前失败的地方失败。如果我使用“false”，它现在会在本机代码实际尝试使用窗口系统的其他地方失败吗？

第二个问题：如何设置这个“java.awt.headless”属性（对于 EBS 环境）？

因为到目前为止我已经：

在我的 .ebextensions / .config 中添加了以下内容：

```
option_settings:
  - namespace:  aws:elasticbeanstalk:container:tomcat:jvmoptions
     option_name:  Djava.awt.headless
     value:  false 
```

编辑 /etc/tomcat7/tomcat7.conf 并将以下内容放在那里：

```
JAVA_OPTS="-Djava.awt.headless=false" 
```

尽管在重新部署/ Tomcat 重新启动后，传递给 tomcat 的 JVM 选项似乎是“java.awt.headless = true”：

```
[ec2-user@ip-address ~]$ sudo ps aux | grep headless
tomcat    7200 12.6 45.4 1406724 276604 ?      Sl   23:02   0:47 /usr/lib/jvm/jre/bin/java -DPARAM3= -DPARAM4= -DPARAM1=production_worker.properties -DPARAM2= -DJDBC_CONNECTION_STRING= -DPARAM5= -DAWS_SECRET_KEY= -DAWS_ACCESS_KEY_ID= -XX:MaxPermSize=64m -Xmx512m -Xms512m -classpath :/usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar:/usr/share/java/commons-daemon.jar -Dcatalina.base=/usr/share/tomcat7 -Dcatalina.home=/usr/share/tomcat7 -Djava.awt.headless=true -Djava.endorsed.dirs= -Djava.io.tmpdir=/var/cache/tomcat7/temp -Djava.util.logging.config.file=/usr/share/tomcat7/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager org.apache.catalina.startup.Bootstrap start 
```

此外，尽管我的代码仍然根本找不到该属性：

```
log.error("java.awt.headless=", System.getProperty("java.awt.headless")); 
```

这输出：

```
2013-01-14 22:13:17,421 +0000 [http-bio-8080-exec-4] ERROR ServiceImpl:45  - java.awt.headless= 
```

编辑 - 我也有

```
System.setProperty("java.awt.headless", "false"); 
```

但这似乎也没有帮助。

**Edit2** - 我取消了 JFrame，只是实例化了一个 JPanel。这使它现在可以在无头环境中渲染。

但是，我无法弄清楚如何正确地进行布局。我一直在我的不同布局上调用 doLayout，在我的组件上调用 something.setSize(something.getPreferredSize())，但结果是重叠或不可见的标签。这一切都是因为我不再调用 JFrame.pack() （因为没有 JFrame 可以调用它）。

**所以第三个问题 - 我如何确保我的 JPanel 布局正确而没有 JFrame 来调用 .pack() ？**

**Edit3** - 第三个问题的答案是调用 panel.addNotify(); panel.setSize(panel.getPreferredSize()); 面板.验证（）；这要感谢 Andrew Thomson：

[从 JPanel（w/oa JFrame）创建 BufferedImage 时，我还可以使用布局管理器吗？](https://stackoverflow.com/questions/12500952/when-creating-a-bufferedimage-from-a-jpanel-w-o-a-jframe-can-i-also-use-a-lay)

# javascript - 如果值为负，Highcharts 将数据标签与 x 轴对齐

> ID：14328814
> 
> 赞同：1
> 
> 时间：2013-01-14T23:39:20.600
> 
> 标签：javascript, html, graph, highcharts

我有一个启用了数据标签的 Highcharts 图表。默认情况下，数据标签附加到每个数据栏的末尾（请参阅此小提琴：http: [//jsfiddle.net/cyphun/NHCvW](http://jsfiddle.net/cyphun/NHCvW)）。

是否可以移动负数据标签并将它们显示在 x 轴旁边而不是栏的末端？这是我想做的修改后的屏幕截图：

[http://cl.ly/image/2G3F0I2l2m1z](http://cl.ly/image/2G3F0I2l2m1z)

这是我的 Highcharts 示例代码的副本：

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'column'
            },
           plotOptions: {
                column: {
                    dataLabels: {
                        enabled: true,
                        useHTML: true,
                        style: {
                            color: '#252525',
                            fontWeight: 'bold'
                        }
                    }
                }
            },
            title: {
                text: 'Column chart with negative values'
            },
            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },
            tooltip: {
                formatter: function() {
                    return ''+
                        this.series.name +': '+ this.y +'';
                }
            },
            credits: {
                enabled: false
            },
            series: [{
                name: 'Jane',
                data: [2, -2, -3, 2, 1]
            }]
        });
    });

}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T08:14:04.473

您可以通过使用 stackLabels 并通过设置 dataLabels 的 y（位置 y）属性来实现这一点。此外，您应该将 dataLabels 的verticalAlign 设置为“top”。

```
plotOptions: {
    column: {
        dataLabels: {
            enabled: true,
            useHTML: true,
            style: {
                color: '#252525',
                fontWeight: 'bold'
            },
            verticalAlign : 'top',
            y: -15
        }
    }
} 
```

演示：http: [//jsfiddle.net/NHCvW/49/](http://jsfiddle.net/NHCvW/49/)

# c - fgets 不阻塞输入 - C

> ID：14328816
> 
> 赞同：3
> 
> 时间：2013-01-14T23:39:41.513
> 
> 标签：c, stdin, scanf, fgets

我正在为学校编写程序；这是我第一次与 C 合作。

我正在使用 fgets 读取输入，但有时 fgets 不会阻塞（将程序抛出无限循环）。为了回答每个人的第一个问题，不，我没有在手离开之前使用 scanf ，`\n`这会导致这个问题。我曾一度使用 sscanf ，但这与 fgets 相关，所以我认为这不是问题。

有一些代码提供给我们处理套接字。我已经浏览了它，但找不到问题的根源。由于篇幅原因，代码没有包含在内，但如果有帮助，我可以包含它。

长话短说，除了 scanf 问题，fgets 是否有任何理由不阻止输入？任何帮助表示赞赏！

编辑：我应该在早些时候更清楚地说明这一点，但在这种情况下，我仅将 fgets 用于标准输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:54:12.133

与 C 中的大多数标准函数一样，您需要进行一些挖掘才能弄清楚发生了什么。最好的起点是功能文档。

[fgets() 文档](http://www.cplusplus.com/reference/cstdio/fgets/ "fgets 文档")

从这个文档中，我们可以看到 fgets 接受三个参数并返回一个 char*。假设参数正确，该函数将从流中读取，直到到达换行符或文件末尾标记。在成功的情况下，返回码将是一个指向 str 参数的指针。

不过，您可能更感兴趣的案例是失败案例。失败时，该函数返回 NULL。要确定故障究竟是如何发生的，您需要检查文件错误指示器并查看它是否打印了一条消息。这可以按如下方式完成：

```
if ( fgets (mystring , 100 , pFile) == NULL )
{
    // We handle error here
    if (ferror (pFile))
    {
        printf ("We encountered an error!\n");
        perror ("Error message");
    }
} 
```

从这里，您应该能够确定发生了什么。可能的原因是无效参数或不符合预期格式/条件的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:44:53.860

我知道这是一个较老的问题，但我想我会分享我遇到这个问题时的发现。如果没有您的代码，我无法判断这是否与您遇到的问题相同，但我在自己的代码中发现我使用`close()`的是设置为 0 的文件描述符。好奇我查找了文件描述符 0 在系统和低标准输入是 FD 0 ( [http://en.wikipedia.org/wiki/File_descriptor](http://en.wikipedia.org/wiki/File_descriptor) )。我确信有很多方法可以解决这个问题，但在我的例子中，我使用了一个简单的 if 语句来结束我的关闭：

```
if(fd > 2)
{
close(fd);
} 
```

# php - PHP中的“反射”与“变量”有什么区别

> ID：14328821
> 
> 赞同：0
> 
> 时间：2013-01-14T23:40:33.083
> 
> 标签：php, zend-framework

似乎这两个特性有一些共同点，比如说，调用一个方法只是在字符串中使用它的名字。有什么不同？有什么反射可以做但变量变量不能做的吗？

更重要的是，这两个特性在 PHP 执行引擎（VM）中的实现有什么区别

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:59:35.827

他们彼此没有任何关系。

变量变量允许您利用包含字符串的变量来访问不同变量的内容。它们令人困惑，在我的经验中很少使用。

```
<?php
$first = 'Bob';
$last = 'Smith';

$t = 'first';
echo $t;
echo $$t;

$t = 'last';
echo $t;
echo $$t; 
```

反射是一个通用术语，用于描述语言或库中的设施，让您发现类的结构。这对于试图实现与用户提供的类一起使用或具有高度通用功能的设计模式的框架或组件开发人员通常很有用。如果您正在生成 php 代码或提供记录现有代码的工具，它们也非常有用。

正如您从 api 文档中看到的那样：http: [//php.net/manual/en/book.reflection.php](http://php.net/manual/en/book.reflection.php)这为您提供了在运行时确定类的属性和方法的方法。

# javascript - Javascript 网络工作者：为什么我需要两次 postMessage 才能触发事件？

> ID：14328826
> 
> 赞同：2
> 
> 时间：2013-01-14T23:40:58.410
> 
> 标签：javascript, web-worker

一般来说，我是 Javascript 和网络编程的新手。我正在尝试找出网络工作者，并拥有以下代码（在 chrome 中运行）：

worker_example.html

```
<!DOCTYPE html>
<html>
    <head>
        <script type="text/javascript" src="worker_example.js"></script>
    </head>
<html> 
```

worker_example.js

```
var worker = new Worker("worker.js");

worker.addEventListener('message', function(e) {
    document.write("hello");
}, false);

worker.postMessage(""); 
```

worker.js

```
// self.postMessage(""); 
```

我的问题是为什么不`worker.postMessage("")`触发事件？但是，如果我取消注释 worker.js 中的单行，一切正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:43:58.900

附加到的事件侦听器`worker`侦听**从**工作人员**到**父页面的消息。您还需要*在工作人员*中注册一个侦听器。

父.js

```
var worker = new Worker('worker.js');

worker.addEventListener('message', function (e) {
  console.log(e.data);
});

worker.postMessage('marco'); 
```

worker.js

```
self.addEventListener('message', function (e) {
  self.postMessage(e.data + ' polo');
}); 
```

# uitableview - 在自定义 UlTableViewCell 中使用 UITextField 时 resignFirstResponder 崩溃

> ID：14328828
> 
> 赞同：2
> 
> 时间：2013-01-14T23:41:33.920
> 
> 标签：uitableview, ios6, crash, uitextfield, uitextfielddelegate

我的应用程序出现间歇性崩溃。崩溃日志让我认为 UITextField 的 resignFirstResponser 被调用的方式似乎存在一些问题。我在自定义表格视图单元格中使用 UITextField 和 UITextFieldDelegate 协议方法，这会导致间歇性崩溃。我在下面发布崩溃日志。请任何可以帮助我了解崩溃根本原因的建议或意见都会很棒。此外，似乎崩溃主要发生在 iOS 6 上

谢谢。

以下是 Crittercism 崩溃日志：

```
    0 libobjc.A.dylib 0x39d585b0 objc_msgSend + 16 + 15
    1 UIKit 0x3477f165-[UITextField_resignFirstResponder] + 457 + 456
    2 UIKit 0x34664249-[UIResponder resignFirstResponder] + 281 + 280
    3 UIKit 0x34712397-[UITextField resignFirstResponder] + 147 + 146
    4 UIKit 0x346962f5-[UITableView reloadData] + 225 + 224
    5 BF 0x0008ed37 -[BFOpenBetsController updateFilterData] (BFOpenBetsController.m:768)
    6 BF 0x0008d695 -[BFOpenBetsController deleteBet:] (BFOpenBetsController.m:566)
    7 BF 0x00094fbd -[BFOpenBetsUnMatchedCell userTapOnButton:] (BFOpenBetsUnMatchedCell.m:198)
    8 UIKit 0x347380a5-[UIApplication sendAction:to:from:forEvent:] + 73 + 72
    9 UIKit 0x34738057-[UIApplication sendAction:toTarget:fromSender:forEvent:] + 31 + 30
    10 UIKit 0x34738035-[UIControl sendAction:to:forEvent:] + 45 + 44
    11 UIKit 0x347378eb-[UIControl（内部）_sendActionsForEvents：withEvent：] + 503 + 502
    12 UIKit 0x34737de1-[UIControl touchesEnded:withEvent:] + 489 + 488
    13 UIKit 0x34656421 _UIGestureRecognizerUpdate + 5769 + 5768
    14 核心基础 0x351536cd __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 21 + 20
    15 核心基础 0x351519c1 __CFRunLoopDoObservers + 277 + 276
    16 核心基础 0x35151d17 __CFRunLoopRun + 743 + 742
    17 核心基础 0x350c4ebd CFRunLoopRunSpecific + 357 + 356
    18 核心基础 0x350c4d49 CFRunLoopRunInMode + 105 + 104
    19 图形服务 0x32a172eb GSEventRunModal + 75 + 74
    20 UIKit 0x346a12f9 UIApplicationMain + 1121 + 1120

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:27:11.613

似乎在更新过滤器数据时，您重新加载了表格视图，而此时有些`UITextField`处于编辑模式。尝试用这样的东西重现。

如果这是问题所在，请在调用之前尝试`resignFirstResponder`所有活动。`UITextField``reloadData``UITableView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T05:36:45.633

您的 UITextField 之一可能正在被释放（就像它们在滚动出视图时所做的那样，或者可能是在重新加载视图时）。看到您有一个 TextField 委托，它可能不知道该字段不再存在，因此当它调用 resign 第一响应者时，它会崩溃。

解决方案是在自定义单元格的 dealloc 例程中调用 uitextfield setDelegate:nil。

见[https://stackoverflow.com/a/9484805/899996](https://stackoverflow.com/a/9484805/899996)

# php - 使用 src in显示 html

> ID：14328833
> 
> 赞同：0
> 
> 时间：2013-01-14T23:42:06.920
> 
> 标签：php, mysql, image, src

我正在使用 <img src="logo.php" > 调用一个 php 页面，该页面在显示实际的 gif 图像之前将一些内容写入数据库。我们称之为版本 1

在任何给定页面上，代码如下所示：

```
<a href="http://www.abc.com">
<img alt="Hi" src="http://www.abc.com/logo.php"/></a> 
```

然后，logo.php 看起来像这样：

```
// first update a database table with some relevant info

// then, output the logo image

header("Content-Type: image/gif");
echo file_get_contents("/path/to/image/logo.gif"); 
```

它工作得很好，（感谢我在这里收到的答案：[Stack Question Answered](https://stackoverflow.com/questions/14268292/create-an-image-trackback-for-an-outside-web-publisher-to-link-to-my-site "邮政")

现在，我正在尝试创建第二个选项，它做同样的事情，除了它显示一些 html 以及图像。让我们称之为版本 2

在任何给定页面上，代码如下所示：

```
<a href="http://www.abc.com">
<img alt="Hi" src="http://www.abc.com/logo_html.php"/></a> 
```

我希望这个其他文件“logo_html.php”输出类似这样的内容

```
<p>Hello World</p>
<p>Some More html</p>
<img alt="Hi" src="http://www.abc.com/logo.gif"/> 
```

我尝试使用简单的 <p>Hello World</p> 将“echo file_get_contents”文件更改为 php 文件，但没有显示任何内容（只是浏览器找不到图像时得到的 X。

如果这是我的“logo_html.php”文件，我将其更改为这个，然后在 myfile.php 中放入一些文本，我也没有得到任何结果。

```
header("Content-Type: image/gif");
echo file_get_contents("/path/to/file/myfile.php"); 
```

我需要在我的 logo_html.php 文件中进行哪些更改才能调出和显示图像以及一些额外的 html？

一如既往地提前感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:43:46.210

除了图像二进制内容，您不能输出任何内容。`src`image 标记的属性接受二进制图像内容的地址，而不是 html。

所以最后的答案是：你不能那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:49:13.810

**你不能那样做。**如果这是可能的并且你会链接到我的图片，我会给你图片和一个脚本标签，它会窃取你客户的 cookie ;)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:45:28.017

你应该使用`<iframe>`. 图像元素不能包含除图像之外的任何其他内容——浏览器会认为代码是图像数据的一部分，但因为它与 mime 类型不匹配（GIF 图像必须以 GIF89a 或类似的开头）它会认为它已损坏.

还`file_get_contents("/path/to/file/myfile.php")`返回 php 文件的内容。您可能想要包含它。

# c# - 如何在 MVC 3 中将 WebForms .ascx 显示为部分视图

> ID：14328835
> 
> 赞同：3
> 
> 时间：2013-01-14T23:42:33.743
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我正在构建一个新的 ASP.NET MVC 3 应用程序。在这个应用程序中，我想在我的新 MVC razor 应用程序的覆盖中显示一个旧的 WebForms 用户控件 (.ascx/.ascx.cs) 作为局部视图。我在网上找不到任何关于这样做的信息。谁能告诉我这是否可行，如果可以，请给我一些文档？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T00:05:37.100

做这样的事情是非常糟糕的做法。但是，这可以通过以下代码来实现：

```
@Html.Partial("_Foo") 
```

然后在您的`_Foo`部分视图中，您可以拥有以下内容：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<dynamic>" %>
<%@ Register Assembly="SomeAssembly" Namespace="SomeNs" TagName="foo" %>

<foo:SomeControl runat="server" ID="fooControl" /> 
```

希望这可以帮助。看看这个问题：

*   [MVC 3：将用户控件添加到 Razor 视图](https://stackoverflow.com/questions/6317317/mvc-3-add-usercontrol-to-razor-view)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T00:08:44.203

The long answer involves 'yes you can, but....'

The short answer is, you shouldn't.

Without knowing the specifics of your .ascx file, you can render a partial using

```
@Html.Partial(PageName) 
```

But, if you have any server controls they will not work. MVC doesn't support the same kind of call back control state functionality. So, you are using any thing resembling

```
<asp:Button runat=server /> 
```

then you're far better off re-factoring your partial.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-26T12:09:07.383

我正在做类似的事情。我发现这些链接可能会对您有所帮助。

[http://www.codemag.com/article/1009061](http://www.codemag.com/article/1009061)

[如何在 MVC4 中呈现远程 ReportViewer aspx 页面？](https://stackoverflow.com/questions/15422124/how-do-i-render-a-remote-reportviewer-aspx-page-in-mvc4)

[如何在 asp.net mvc 3 razor 视图中使用 reportviewer 控件？](https://stackoverflow.com/questions/6144513/how-can-i-use-a-reportviewer-control-in-an-asp-net-mvc-3-razor-view)

# hadoop - 减速机后进一步加工

> ID：14328839
> 
> 赞同：0
> 
> 时间：2013-01-14T23:42:45.147
> 
> 标签：hadoop

可能是一个非常蹩脚的问题。我有两个文档，我想以 map reduce 方式找到两个文档的重叠，然后比较重叠（假设我有一些措施可以做到这一点）

所以这就是我的想法：

```
1) Run the normal wordcount job on one document (https://sites.google.com/site/hadoopandhive/home/hadoop-how-to-count-number-of-times-a-word-appeared-in-a-file-using-map-reduce-framework)
2) But rather than saving a file, save everything in a HashMap(word,true)
3) Pass that HashMap along the second wordcount mapreduce program and then as I am processing the second document, check the words against the HashMap to find whether the word is present or not. 
```

所以，像这样

```
 1) HashMap<String, boolean> hm = runStepOne(); <-- map reduce job
 2) runSteptwo(HashMap<String, boolean>) 
```

我如何在hadoop中做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:47:34.077

听起来您可以使用某种形式的[DistributeCache](http://hadoop.apache.org/docs/r1.0.4/api/org/apache/hadoop/filecache/DistributedCache.html)在初始 wordcount 作业之后存储您的中间结果，然后运行另一个利用这些中间结果来测试它们是否出现在第二个文档中的作业。您也许可以将这两个步骤封装到一个 MR 工作中，但我不知道该怎么做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:58:31.033

[查看使用 MapReduce 进行数据密集型文本处理](http://lintool.github.com/MapReduceAlgorithms/index.html)中的第 3.5 节，了解如何进行连接。同一篇论文中也有不同的 MR 算法。

# php - FPDF：在单元格内更改文本颜色？

> ID：14328848
> 
> 赞同：8
> 
> 时间：2013-01-14T23:43:07.063
> 
> 标签：php, text, colors, cell, fpdf

我想要它，这样说白色的文本将使用 SetTextColor 作为白色，而橙色使用橙色。

```
$pdf->SetTextColor(255,255,255);
$pdf->Cell(50,0,'WHITE ORANGE ORANGE WHITE',0,1,'C'); 
```

如何影响“橙色”单词以使用橙色文本颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-29T13:22:56.853

有一个小技巧是可能的。我刚刚让它打印了 2 个单元格，一个接一个，如下所示：

```
//Setting the text color to black
$pdf->SetTextColor(0,0,0);

//Printing my cell      
$pdf->SetFont('Arial','B');
$pdf->Cell(55,5,"Black Text ",1,0,'C');
$pdf->SetXY($coordXbase,$coordY);

//Setting the text color to red
$pdf->SetTextColor(194,8,8);

//Printing another cell, over the other
$pdf->SetFont('Arial','B');
//Give some space from the left border, and print the red text after the black text that is in the cell behind this one.
$pdf->Cell(55,5,"                        Red Text",0,0,'C');
$pdf->SetXY($coordXbase,$coordY);

//Setting the text color back to back, in the next cells.
$pdf->SetTextColor(0,0,0); 
```

结果是这样的：

![多色单元格结果](../Images/e746314c0c22ffe0a7e2b9dfdb8cd630.png)

由于我有点着急，我没有时间创建一些函数来帮助解决这个问题，但这将是一个很好的起点：）

PS：告诉你们是否找到更简单的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-16T16:30:59.730

我也需要那个功能。这是我编写的用于执行简单彩色字符串的函数：

```
function cellMultiColor($stringParts) {
    $currentPointerPosition = 0;
    foreach ($stringParts as $part) {
        // Set the pointer to the end of the previous string part
        $this->_pdf->SetX($currentPointerPosition);

        // Get the color from the string part
        $this->_pdf->SetTextColor($part['color'][0], $part['color'][1], $part['color'][2]);

        $this->_pdf->Cell($this->_pdf->GetStringWidth($part['text']), 10, $part['text']);

        // Update the pointer to the end of the current string part
        $currentPointerPosition += $this->_pdf->GetStringWidth($part['text']);
    } 
```

你像这样使用它：

```
cellMultiColor([
    [
        'text' => 'Colored string example: ',
        'color' => [0, 0, 0],
    ],
    [
        'text' => 'red',
        'color' => [255, 0, 0],
    ],
    [
        'text' => ', ',
        'color' => [0, 0, 0],
    ],
    [
        'text' => 'blue',
        'color' => [0, 0, 255],
    ],
]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-13T18:50:42.703

如果您不需要使用 Cell 方法，则可以改用 Write 方法：

```
$pdf->SetFont('Arial','b',12);
$pdf->SetTextColor(153,0,153);
$pdf->Write(7,'Text in color, ');
$pdf->SetFont('Arial','',12);
$pdf->SetTextColor(0,0,0);
$pdf->Write(7,'and text in black all in the same line'));
$pdf->Ln(7); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-04T12:59:49.540

我不得不做类似的事情。而不是颜色，我不得不改变字体的大小。在我的单元格中，我改为调用该函数，在您的情况下，您可以这样做

```
$pdf->Cell(50,0,white($pdf,'White').orange($pdf,'orange'),0,1,'C'); 
```

并将函数定义为

```
function white($pdf,$val){
              $pdf->SetTextColor(255,255,255);
              return $pdf->Text(0,0,$val);
              } 
```

橙色也是如此。

提示：要正确定位它，请使用 getX() 和 getY()

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-16T20:39:49.023

您也可以使用这样的`writeHTML`方法（tcpdf ver 6.2）

```
$html = 'Simple text <span style="color: rgb(255,66,14);">Orange</span> simple  <span style="color: rgb(12,128,128);">Turquoise</span>';
$this->writeHTML($html, true, false, true, false, ''); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-15T05:53:42.640

答案＃1：你不能。根据定义，单元格的字体和颜色是统一的。您可以使用 getStringWidth 测量单词的宽度，并在一系列单元格中进行测量。

答案 #2：许多贡献的脚本都是基于构建内置函数的变体。毕竟，您拥有所有 FPDF 的 PHP 代码。您可以制作自己的 Cell_plus 函数，该函数采用一组短语和另一个数组或两个或三个属性。然后可能将其作为附加脚本提供。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-24T15:44:12.130

你应该替换这个：

```
$pdf->Cell(50,0,'WHITE ORANGE ORANGE WHITE',0,1,'C'); 
```

为了这

```
$pdf->Cell(50,0,'WHITE ORANGE ORANGE WHITE',0,1,'C', true); 
```

//在最后添加真正的参数

# php - WordPress get_post_meta 在函数中不起作用

> ID：14328849
> 
> 赞同：0
> 
> 时间：2013-01-14T23:43:08.273
> 
> 标签：php, wordpress, meta-boxes

我在自定义帖子类型上有一个用于宽度的元框。我试图用`get_post_meta`在头部放置一些 CSS。一切正常，但元值没有通过。这是我的功能：

```
function mo_carousel_css(){
    global $post;
    $width = get_post_meta( $post->ID, 'mo_carousel_width', true );
    ?>
    <style type="text/css">
        .jcarousel-container-horizontal{
        width:<?php echo $width; ?>px;
        }
    </style>
    <?php
    } 
```

我已经检查了数据库并且元键/值分别被正确`mo_carousel_width`存储`500`。我认为`global $post;`这将是修复，但没有运气。

通过访问可以在后端的元框中很好地检索该值，`$object`但这似乎也不起作用。这是创建值的表单的代码：

```
 /* Display the post meta box. */
function mo_carousel_meta_box( $object, $box ) { ?>

    <?php wp_nonce_field( basename( __FILE__ ), 'mo_carousel_nonce' ); ?>
    <p>
        <span>Carousel Size</span>
        </br>
        <input type="text" name="mo-carousel-width" id="mo-carousel-width" value="<?php echo esc_attr( get_post_meta( $object->ID, 'mo_carousel_width', true ) ); ?>" size="10" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:41:12.267

我是通过研究 Shortcode API 编写的，我认为它应该可以工作，但我还没有尝试过。

```
function mo_carousel_css() {
    global $post;
    preg_match( '/' . get_shortcode_regex() . '/s', $post->post_content, $m); 
    if (is_array($m) && $m[2] == 'shortcode' ) { 
                $shortcode_args = shortcode_parse_atts( $m[3] );
        $width = get_post_meta( $shortcode_args['idatt'], 'mo_carousel_width', true );
        <style type="text/css">
            .jcarousel-container-horizontal{ width:<?php echo $width; ?>px; }
        </style>
    } 
} 
```

基本上它的作用是检查当前帖子中是否使用了短代码。如果正在使用短代码，请从中检索属性并使用 id 属性来获取发布元数据。

如果您的简码是，`[displayCustomPost id=24]`那么您将不得不`shortcode`用`displayCustomPost`和`idatt`替换`id`。

# c# - 使用会话 ID 在安全网页上验证用户

> ID：14328862
> 
> 赞同：0
> 
> 时间：2013-01-14T23:44:44.627
> 
> 标签：c#, asp.net, session, sessionid

这是我之前发布的问题的后续，但当时还不清楚。我希望我现在可以更清楚。

我在所有安全页面上登录后使用 ASP.NET 和 C# 来验证用户。我*应该*能够在不接触 web.config 文件的情况下执行此操作，因此请避免任何涉及编辑 web.config 文件的此类解决方案。经过一些调试，我发现当用户登录时，任何其他人（无需登录）都可以从另一台计算机访问安全页面，或者只是在同一台计算机上但在不同的浏览器中访问。这显然很糟糕，所以我想知道如何使用有效用户的初始会话 ID 来保护所有后续 page_load 免受具有直接页面路径但不是有效登录名的其他用户的影响。

目前，我在所有安全 page_load 函数中所做的唯一检查是检查 wether `MySession.GetSessionId()==null`。如何使用返回的这个值`GetSessionId()`来检查登录时的初始会话 ID 值是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:59:39.603

每个用户和每个用户代理的会话已经是唯一的。如果多个用户都在访问同一个会话，那么您的会话创建和设置逻辑中肯定存在错误，可能是在设置用户 ID 的位置。我的心理调试告诉我：

*   所有用户和凭据都意外地从某种持久性存储中设置为相同的值，或者
*   您正在`static`某处的某个字段中存储对会话的引用，该字段的值由所有用户共享

但是，如果不显示代码，将很难调试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:50:13.340

仅仅依靠 sessionID 是不可行的！仅通过检查 sessionID，您就没有用户的任何信息。

将登录用户的用户 ID 存储在会话中。然后检查安全页面是否有有效的用户 ID。

不是最优雅的解决方案，但这种方式无需更改为 web.config。

然而，我怀疑网站中的身份验证/授权逻辑没有充分利用 asp.net 附带的会员功能。

也许您可以通过指出提供长期且安全的解决方案来获得一些分数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:21:02.553

快速而肮脏的解决方案。检查伪代码

在登录页面 (Login.aspx)

```
BtnLogin_click()
{
        // Query database to check username/password match
        // If Success store corresponding UserID in session
        Session["userID"]=YourDbValue;   // Say 1 is for administrator, 2 is for user
} 
```

在安全页面上 (Secure.aspx)

```
 PageLoad(){
       if (Session["userID"]!="1")
          // Log this attempt somewhere  
          Response.Redirect("~/NotAuthorized.aspx"); 
   } 
```

我强烈建议您反对这种方法并实施适当的会员系统，因为您必须在每个页面中都对其进行硬编码，否则，如果将来将许多管理员角色添加到站点中，您仍然会遇到麻烦。

达米安。

# java - Java - 为碰撞旋转矩形

> ID：14328864
> 
> 赞同：2
> 
> 时间：2013-01-14T23:45:05.170
> 
> 标签：java, rectangles

我正在使用 Java Slick StateBaeedGame 并希望为我的碰撞旋转我的矩形，我知道这可以使用 Graphics 或 Graphics2D 对象来实现视觉目的，但这不会修改矩形本身，即最初与变量一起列出的矩形并在图形方法中调用不旋转，为了让事情更清楚，这里有一些代码：

```
 java.awt.geom.Rectangle2D.Float rectTwo = new Rectangle2D.Float(460 + buckyPositionX, 50 + buckyPositionY, 100, 100);

public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
      worldMap.draw(buckyPositionX,buckyPositionY); //draw the map at 0,0 to start
      bucky.draw(shiftX,shiftY); //draw bucky at 320, 160 (center of the screen)

    g.rotate(460 + buckyPositionX, 50 + buckyPositionY, 40);
    g.fillRect((float)rectTwo.getX(), (float)rectTwo.getY(), (float)rectTwo.getWidth(), (float)rectTwo.getHeight());
      } 
```

当我加载我的 GUI 时，矩形 rectTwo 将显示为旋转，但它实际上并未旋转，如果我测试碰撞，矩形仍处于 0 度。

那么，如何让我的矩形变量改变它的角度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:00:00.317

一般来说，你不能。

你可以做的是改变形状的路径......

```
PathIterator pathIterator = shape.getPathIterator(AffineTransform.getRotateInstance(Math.toRadians(33.5))); 
```

这对您现在没有多大用处，但您可以使用 a`Path2D#append`将路径附加回`Shape`对象中......

```
GeneralPath path = new GeneralPath();
path.append(pathIterator, true); 
```

哪个可以让你画...

```
((Graphics2D)g).fill(path); 
```

当然，这假设您的`Graphics`上下文是一个`Graphics2D`实例。

这也意味着，您不能保持对 a 的直接引用`Rectange2D`，而是需要使用它`Shape`。

# php - 在单独的 .js 文档中使用我在 .php 文档中创建的变量

> ID：14328868
> 
> 赞同：0
> 
> 时间：2013-01-14T23:45:44.200
> 
> 标签：php, javascript, variables

我已经查看并将继续查看更多论坛帖子，但我还没有找到解决这个简单问题的方法。

很简单，我从服务器获取一些数据，我在我的 .php 文件中操作这些数据并创建四个变量。我的变量是（为简单起见）$v1、$v2、$v3、$v4。现在我还有一个 .js 文件，我想在其中使用这四个变量。具体来说，我想在谷歌地图标记中使用这些变量（但如果你不知道，你不必回答）但是如何我可以抓住这些变量并在我的谷歌地图标记（.js 文件）中使用它们的值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:53:27.707

如果您在加载外部脚本之前在脚本标记中声明全局变量，则外部脚本中将可用。

```
<html>
<head>
    <script type="text/javascript">
    var v1 = <?=$v1?>,
        v2 = <?=$v2?>,
        v3 = <?=$v3?>,
        v4 = <?=$v4?>;
    </script>
    <script type="text/javascript" src="js/someExternalScript.js"></script>
</head>
<body>
    Some body
</body>
</html> 
```

如果需要，您还可以使用脚本标记在您包含的另一个页面中定义变量，例如 javascript 外部文件。按照脚本出现在源代码中的顺序，后面的脚本将可以访问先前脚本中的全局变量（这里的全局意味着未在函数/闭包范围内定义）。例如，大多数人将 jquery 作为外部脚本包含在内，并且 jquery 之后包含的所有脚本都可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:14:20.843

你可以做两件事：

1.  正确处理问题。
2.  半途而废。

我将首先给出第二条指令，因为它应该让您对这两种技术之间的关系有所了解。

# 半个屁吧

这假设您正在编写的脚本不是基于 Ajax 的 - 只是一些标准的 generate-page-with-PHP 并包含 .js。

1.  编写一个将生成 Javascript 内容的 php 文件：

    ```
    // /js/vars.php
    $v1 = $v2 = $v3 = $v4 = time();

    header("Content-type: text/javascript");

    echo "window.Variables = {
        v1: $v1,
        v2: $v2,
        v3: $v3,
        v4: $v4
    }"; 
    ```

    （请注意，如果变量是字符串，则应添加引号）

2.  `<head>`在要在其中使用变量的文件之前要求该文件。

    ```
    <script type="text/javascript src="/js/vars.php"> 
    ```

3.  在您的 .js 文件中使用它。

    ```
    var smth = Variables.v1 + Variables.v2; 
    ```

由于许多原因，这是一个禁忌，其中包括：

*   由 PHP 文件生成的 JavaScript 不易维护。
*   全局 JS 命名空间有些混乱。
*   它不能很好地与 Ajax 配合使用。

# 恰当的

1.  编写一个将生成 JSON 数据的 php 文件：

    ```
    // /js/vars.php
    $v1 = $v2 = $v3 = $v4 = time();

    $jsonArr = array(
    'v1'=> $v1,
    'v2'=> $v2,
    'v3'=> $v3,
    'v4'=> $v4
    );
    header("Content-type: application/json");            
    echo json_encode($jsonArr); 
    ```

2.  编写一些将使用 Ajax 提取数据的 JavaScript 代码。例如。使用 jQuery：

    ```
    $.getJSON('js/vars.php', function(data) {
        alert(data.v1+data.v2);
    }); 
    ```

# android - 为什么 isItemChecked() 在 ActionMode 下返回 true？

> ID：14328869
> 
> 赞同：4
> 
> 时间：2013-01-14T23:45:44.983
> 
> 标签：android, android-listview, actionbarsherlock

我已经设置了一个`ActionMode`回调，用作使用项目中的上下文`ActionBar`(CAB) `ActionBarSherlock`。

我正在尝试设置多项选择，以便我可以删除`ListView`.

我在调试时注意到，当上下文`ActionBar`(CAB) 未打开并且我调用`isItemChecked()`我触摸的列表项时，它会返回 false。但是当 CAB 打开时，我接触的项目（我以前没有接触过）在调用`isItemChecked()`. 然后，当我对数组 from 调用 delete 时`getCheckedItemIds()`，该数组不包含以前为`isItemChecked()`.

有人见过这个吗？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.habit);
    habitListView = (ListView)findViewById(R.id.habitsListView);
    habitListView.setAdapter(mAdapter);
    habitListView.setChoiceMode(AbsListView.CHOICE_MODE_MULTIPLE);
    habitListView.setItemsCanFocus(false);
    habitListView.setOnItemLongClickListener(new MyOnItemLongClickListener());
    habitListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            if (habitListView.isItemChecked(position)) { // for debugging, returns false here
                                                         // when CAB isnt up.
                int h = 2;
            }
            // handle differently when CAB is on.
            if (mMode != null) {
                if (habitListView.isItemChecked(position)) { // returns true here when CAB is up
                                                             // but this is the first time I'm
                                                             // clicking the item
                    habitListView.setItemChecked(position, false);
                    // turn CAB off if this is the last to be unchecked
                    if (habitListView.getCheckedItemIds().length == 0) {
                        mMode.finish();
                    }
                } else {
                    habitListView.setItemChecked(position, true);
                }
            } else {
                // start detail/edit view activity
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getSupportMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {
    case R.id.menu_create:
        Habit test = new Habit("FLOSS", "GOOD", "", "");
        mDbHelper.createHabitEntry(test);
        mAdapter.changeCursor(mDbHelper.getAllEntries());
        break;
    }
    return false;
}

private class MyOnItemLongClickListener implements OnItemLongClickListener {
    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
        habitListView.setItemChecked(position, true);
        mMode = startActionMode(new MyActionModeCallback());
        return true;
    }
}

private class MyActionModeCallback implements ActionMode.Callback {
    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onDestroyActionMode(ActionMode mode) {
        habitListView.setOnItemLongClickListener(new MyOnItemLongClickListener());
    }

    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        mode.getMenuInflater().inflate(R.menu.main_long_click_context, menu);
        habitListView.setOnItemLongClickListener(null);
        return true;
    }

    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_delete:
            long[] selected = habitListView.getCheckedItemIds();
            if (selected.length > 0) {
                for (long id : selected) {
                    mDbHelper.deleteEntry(id);
                }
            }
            mAdapter.changeCursor(mDbHelper.getAllEntries());
            mode.finish();
            break;
        }
        return true;
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T03:14:37.273

所以对我有用的就是使用

```
 habitListView.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            //handle differently when CAB is on.
            if (mMode != null){

                view.setSelected(!view.isSelected());

                updateCABtitle();

                //turn CAB off if this is the last to be unchecked
                    if (habitListView.getCheckedItemIds().length == 0){
                        mMode.finish();
                    } 

            } else {
                //start detail/edit view activity
                Intent intent = new Intent(getApplicationContext(), HabitDetailActivity.class);
                startActivity(intent);

            }

        }

    }); 
```

和

```
 private class MyOnItemLongClickListener implements OnItemLongClickListener{

    @Override
    public boolean onItemLongClick(AdapterView<?> parent, View view,
                    int position, long id) {

            habitListView.setItemChecked(position, true);

            mMode = startActionMode(new MyActionModeCallback());
            updateCABtitle();

            return true;
    }

} 
```

我真的不明白为什么`setItemChecked()`不工作，`onItemClick()`但似乎是`onItemLongClick()`。看起来好像有一个默认的单击处理程序被调用，`AbsListView.PerformItemClick()`它必须对选中/未选中进行一些切换或其他操作。

# css - 如何使用 CSS 更改 Squarespace6 博客中的“评论”一词？

> ID：14328874
> 
> 赞同：-4
> 
> 时间：2013-01-14T23:46:11.317
> 
> 标签：css, comments, blogs, squarespace

我需要在我的 Squarespace 博客上将“评论”一词更改为“在留言簿上签名”。支持团队说我可以通过 CSS 做到这一点，但他们无法为这个“高级修改”提供任何进一步的帮助。感谢所有帮助。非常感谢你们。-担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:01:07.453

使用 CSS 并没有真正的好方法来做到这一点，但它可以做到。

假设您有以下标记：

```
<span>Comment</span> 
```

添加一个 psuedo-element`:after`将产生类似*"CommentSign the Guestbook" 的*内容：

```
span:after { content: "Sign the Guestbook"; } 
```

然后您可以隐藏实际文本并重新定位替换文本：

```
span {
  display:inline-block;
  text-indent:-9999px;
}
span:after {
  content: "Sign the Guestbook";
  margin-left:9999px;
} 
```

它并不完美，最好只更改实际文本。替换`span`为具有文本的元素，并减少`margin-left`您怀疑原始文本占用的数量。您也可以使用带有所需文本的背景图像，但这有点痛苦且难以编辑。

演示：http: [//jsfiddle.net/zjrSj/1/](http://jsfiddle.net/zjrSj/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:51:26.770

打开您的 HTML/PHP 文件并将其更改为签署留言簿。除非你做了一些奇怪的事情，否则你不能在 CSS 中做到这一点。如果这对您没有帮助，请发布您的代码，以便我可以手动帮助您。

# assembly - cmp汇编语言指令-gas格式

> ID：14328875
> 
> 赞同：4
> 
> 时间：2013-01-14T23:46:13.000
> 
> 标签：assembly, x86-64, gnu-assembler, att, cmp

我正在将 32 位和 64 位汇编语言文件从 gas 格式转换为 MASM 格式，并且在我的代码中遇到了一条似乎完全有问题的指令。我的意思是，我认为汇编器无法知道操作数的大小，指令是否从内存中获取 8、16、32 或 64 位来执行比较。这是说明：

*   cmp $0, 8(%rsp)

如果指令是以下指令之一，汇编器可能已经根据寄存器计算出要获取和比较的内存操作数的大小：

*   cmp %rax, 8(%rsp)
*   cmp %eax, 8(%rsp)
*   cmp %ax, 8(%rsp)

我原以为指令需要是 cmpb、cmpw、cmpl、cmpq ......但不，我的程序只用 cmp 指令就可以很好地组装它。不幸的是，我不记得这段代码在做什么，而且非常不明显......所以解决这个问题的更简单方法是知道指令在做什么。

有人知道吗？任何人都明白为什么这种语法（未指定操作数大小/类型）甚至允许使用直接操作数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T23:51:24.587

它必须有某种默认值。我在我的机器上试过，上面写着`as`：

```
Apple Inc version cctools-836, GNU assembler version 1.38 
```

我得到了这些结果：

```
$ cat example.s 
    cmp $0, 8(%rsp)
$ make example.o
as   -o example.o example.s
$ otool -tV example.o
example.o:
(__TEXT,__text) section
0000000000000000    cmpl    $0x00,0x08(%rsp) 
```

所以在我的机器上，它选择了`cmpl`. using`gcc`而不是`as`给了我相同的结果，但是 using`clang`产生了您期望的错误：

```
$ clang -c example.s 
example.s:1:2: error: ambiguous instructions require an explicit suffix (could be 'cmpb', 'cmpw', 'cmpl', or 'cmpq')
 cmp $0, 8(%rsp)
 ^ 
```

# ios - 如何将分数垂直显示为 2 列

> ID：14328880
> 
> 赞同：0
> 
> 时间：2013-01-14T23:47:03.073
> 
> 标签：ios, objective-c, xcode

我有一个分数屏幕，我想在屏幕上垂直显示前 5 个分数（Level1 和 Level2），并用一条线将它们分开。分数来自两个按降序排序的 NSArray 对象。我一直在研究 UITableView / UITableViewCell 以显示多列，它看起来涉及更多我正在寻找的编码。是否有任何其他替代 iOS 控件可以完成这项工作？

有任何想法吗？

这就是它的样子

```
1 级 2 级
====== ======

34 46
32 33
24 28
20 21
16 18

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:53:24.020

你有两个选择：

在这里做的最优雅的解决方案（尽管您不情愿）是子类`UITableViewCell`化并提供您自己的表格单元格的实现，其中`UILabel`每个列值都有两个 s，然后您可以在单元格中间画一条垂直线（一旦显示所有单元格，它将变成表格视图中间的一条线）。

`UILabel`另一种选择是简单地在表格视图单元格中添加一个附加项`-tableView:cellForRowAtIndexPath:`并设置`frame`它，使其位于单元格的右侧：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    self.textLabel.text = [firstArray objectAtIndex:indexPath.row];       

    UILabel *secondColumnLabel = [[UILabel alloc] initWithFrame:CGRectMake(<customize your values here>];
    secondColumnLabel.backgroundColor = [UIColor clearColor];
    // any other customization goes here
    secondColumnLabel.text = [secondArray objectAtIndex:indexPath.row];
    [cell addSubview:secondColumnLabel];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:08:15.840

Maybe there are other solutions, but I personally took the road of subclassing `UITableViewCell`. This is a screenshot of how it looks in my app:

![screenshot for multi-row UITableViewCell](../Images/7efb8b46a94b4d669d0c09476ec58e0b.png)

Feel free to grab the code for this from [the GitHub repo of my app](https://github.com/herzbube/littlego/). It's a class named `TableViewGridCell` ( under the path `src/ui`). The class has a few limitations that are documented in the header file. In the screenshot you can also see that there is a slight glitch, one cell has its line one pixel off. This still needs fixing...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:48:49.210

您可以制作两个 UITableView 并将它们彼此相邻并在您的视图控制器中独立处理它们。或者，如果您愿意，您可以轻松制作一些格式化的 html 并将其显示在 webview 中。

# python - 如何升级 Python 以及已安装的软件包？

> ID：14328882
> 
> 赞同：2
> 
> 时间：2013-01-14T23:47:18.463
> 
> 标签：python, package, setuptools, distutils, distutils2

如果我用 Python 2.6 安装了几个包（例如 using `easy_install`），然后我想升级到 Python 2.7，有没有办法升级 Python，然后自动“导入”所有已安装的包？还是必须重新安装？

两个相关的问题：（1）如果一个包安装在 Python 2.6 包目录中，将它导入到`PYTHONPATH`较新的 Python（如 Python 2.7）是否合法，或者必须使用 Python 2.7 重新安装所有包？(2) 如果我使用`easy_install`，我如何告诉它使用较新的 Python？例如 2.7 而不是 2.6？还是我应该`easy_install`使用 Python 2.7 重新安装来执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:01:07.633

首先，这是您要使用[`pip`](http://www.pip-installer.org)而不是`easy_install`. （你仍然需要`easy_install`得到`pip`它自己，但除此之外，不要再碰它了。）如果你使用过`pip`，你可以这样做：

```
pip freeze > modules.dump 
```

这为您提供了已安装的所有模块的列表及其版本号。大多数情况下，您只需获取模块列表 ( `line.split('==')[0] for line in f`) 并将其传递给`pip install`.

但那是为了将来参考。今天，您必须通过查看您的`site-packages`目录自己拼凑起来。幸运的是，很多东西最终都会`foo_bar-1.2.3.4-blah-blah.egg`以 . 所以，你不能*完全*自动化它，但你可以接近。`foo-bar``foo_bar``easy_install``pip`

 *但是，是的，不管你怎么做，你都需要重新安装。任何需要 C 扩展代码的东西都必须重新编译。纯 Python 包可能不需要更改，但它们可能需要更改，而且您总比抱歉更安全。此外，如果您尝试复制某些内容而不复制其他内容，那么您的依赖关系将会变得一团糟。

> (1) 如果一个包安装在 Python 2.6 包目录中，将其导入到较新的 Python（如 Python 2.7）的 PYTHONPATH 是否合法，或者必须使用 Python 2.7 重新安装所有包？

不要那样做；如上所述，重新安装它们。

> (2) 如果我使用easy_install，如何告诉它使用较新的Python？例如 2.7 而不是 2.6？还是我应该使用 Python 2.7 重新安装 easy_install 来执行此操作？谢谢。

你需要 2.7 `easy_install`。您通常可以`easy_install`通过运行来使用 2.7 和 2.6，例如，`python2.6 $(which easy_install)`但不保证反过来也能正常工作。

而且你无论如何都不想这样做。如果你想要两个版本的 Python 并行，你想要两个版本的 -`easy_install`通常你想以`easy_install-2.6`and结尾`easy_install-2.7`，`easy_install`作为你认为你的“主要”python 的任何一个的符号链接。*

# php - 编辑页面中的输入::old

> ID：14328883
> 
> 赞同：0
> 
> 时间：2013-01-14T23:47:19.147
> 
> 标签：php, orm, laravel, eloquent

当值为时，我如何在编辑页面中使用**Input::old()**

```
{{ $user->name }} 
```

但是，如果**名称**无效¹，或者其他什么，我如何获得 Input::old() 并**覆盖**{{ $user->name }} ？

例如：

```
<input type="text" id="name" name="name" placeholder="Nome" class='span12' value="{{ $user->name }}" /> 
```

¹*验证测试失败*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T06:55:04.930

```
{{ Form::text(
     'name', 
      Input::old('name', $user->name), 
      array('class' => 'span12','placeholder' => 'Name')
)}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:00:59.537

我不知道我是否正确，但在**Developer Api**中，有这个：

```
 public static function old($key = null, $default = null)
 {
     return array_get(Session::get(Input::old_input, array()), $key, $default);
 } 
```

所以，我可以使用：

```
{{ Input::old('name', $user->name) }} 
```

正确的？

所以，我认为是这样。如果我不正确，请告诉我。

无论如何，谢谢各位。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T03:03:37.630

我的第一个/快速猜测是您没有提前调用 flash() ，这是首先将输入值放入会话所必需的......

```
Input::flash(); 
```

[http://laravel.com/docs/input#old-input](http://laravel.com/docs/input#old-input)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-07T07:54:45.297

用这个

```
<input type="text" id="name" name="name" placeholder="Nome" class='span12' value="{{old('name', $user->name) }}" /> 
```

和复选框

```
 <input id="main" class="form-check-inline"
 type="checkbox" name="position" {{old('position',$user->position)?'checked':''}}> 
```

# php - 如何在不使用 JS 的情况下制作可扩展面板？

> ID：14328894
> 
> 赞同：0
> 
> 时间：2013-01-14T23:48:08.707
> 
> 标签：php, javascript, html, forms

我的问题是如何在不使用 javascript 的情况下在 HTML 表单中创建可扩展面板，以便当用户单击每个面板时，它会展开并显示表单。

点击前：

```
<ul>
    <li id="panel1"><a></a><div class="content"></div></li>
    <li id="panel2"><a></a><div class="content"></div></li>
    <li id="panel3"><a></a><div class="content"></div></li>
</ul> 
```

点击后：

```
<ul>
    <li id="panel1">
      <a></a>
        <div class="content">
            <form id="FORM"> ..... </form>
        </div>
    </li>
    <li id="panel2"><a></a><div class="content"></div></li>
    <li id="panel3"><a></a><div class="content"></div></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:52:05.180

根本不使用任何 javascript，你不能。

除非您每次只放置链接并将用户重定向到具有扩展内容的页面。

或者，除非您使用 :hover 伪选择器而不是 click 事件编写某种复杂的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:05:25.873

您可以使用 :target css 伪选择器来做到这一点 - 虽然它不是很优雅，因为单击锚标记会修改 url，因此很难切换表单。最好使用 javascript。

```
 <style>
        form {
            display: none;
        }
        form:target {
                display: block;
                background: red;
            }
        </style>
        <ul>
<li id="panel1" ><div class="content"><a href="#form">Show form</a><form id="form" > My form <input type="text"></form></div></li>
<li id="panel2"><div class="content">My content</div></li>
<li id="panel3"><div class="content">My content</div></li>
</ul> 
```

:target 的一些示例：http: [//css-tricks.com/css-target-for-off-screen-designs/](http://css-tricks.com/css-target-for-off-screen-designs/)和[http://css-tricks.com/on-target/](http://css-tricks.com/on-target/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T00:05:40.507

CSS 3 有一个`:target`伪选择器可能会有所帮助。这是一个例子：[https ://tinker.io/1756b](https://tinker.io/1756b)

# excel - Microsoft Excel 2003 - 复制乱序描述

> ID：14328896
> 
> 赞同：0
> 
> 时间：2013-01-14T23:48:30.423
> 
> 标签：excel, multiple-columns, vba

我已经使用 Microsoft Excel 2003 进行了彻底的搜索，但找不到针对我的特定问题的答案。

我需要通过 svc_itm_cde（服务项目代码）将 R 列描述（字母数字）从一个 xls 电子表格（我们称之为 ssA）复制到另一个电子表格（ssB）中的 L 和 M 列。大约有 300 个 svc_itm_cdes。

三个并发症：

1.  ssA 中的 svc_itm_cde 列与 ssB 中的顺序不同。
2.  ssB 中的一些 L & M 行已经包含描述，必须跳过。
3.  ssB 中的一些 svc_item_cdes 不会出现在 ssA 中，反之亦然。

一位朋友帮助我导出到 cvs 并开始编写 Python 脚本，但这太冗长了。有没有办法用vba代码（最好）做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:19:40.623

对于 300 条记录，这可能是一种过于复杂的方法，但它对于更大的数据集来说是一种有用的技术......

如果您只需要将所有数据集中在一个位置，以便确定要保留哪些描述以及要丢失哪些描述，那么您可以使用 ADO 并将两个数据集连接在一起。

首先转到 Visual Basic 编辑器（按 Alt+F11）。在那里使用工具 > 引用添加对“Microsoft ActiveX 数据对象 2.8 库”的引用

现在插入>模块并粘贴此代码：

```
Option Explicit

Sub master_list()

    Dim cn As ADODB.Connection
    Set cn = New ADODB.Connection

    ' This is the connection string for .xlsx files (Excel 2007 and later)
    With cn
        .Provider = "Microsoft.ACE.OLEDB.12.0"
        .ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & _
            "Extended Properties=Excel 12.0 Xml;"
        .Open
    End With

    Dim rs As ADODB.Recordset
    Set rs = New ADODB.Recordset

    rs.Open "SELECT * FROM [ssA$] LEFT JOIN [ssB$] ON [ssA$].[svc_itm_cde] = " & _
    "[ssB$].[svc_itm_cde] UNION ALL SELECT * FROM [ssA$] RIGHT JOIN [ssB$] ON " & _
    "[ssA$].[svc_itm_cde] = [ssB$].[svc_itm_cde] " & _
    "WHERE [ssA$].[svc_itm_cde] IS NULL;", cn

    Dim i As Integer
    Dim fld As ADODB.Field
    i = 0

    ' Sheet3 should be a blank sheet that we can output the results to
    With Worksheets("Sheet3")
         For Each fld In rs.Fields
             i = i + 1
             .Cells(1, i).Value = fld.Name
         Next fld

        .Cells(2, 1).CopyFromRecordset rs
    End With

    rs.Close
    cn.Close

    End Sub 
```

如果您使用 Excel 2003 或更早版本，则连接字符串部分应为：

```
With cn
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & _
        "Extended Properties=Excel 8.0;"
    .Open
End With 
```

# php - 多个查询未运行

> ID：14328897
> 
> 赞同：0
> 
> 时间：2013-01-14T23:48:31.237
> 
> 标签：php, mysql, wamp

我正在尝试在我的表上运行查询以创建一行并获取它的自动递增的“id”号，然后附加到关联的记录中。我正在使用 php 发送查询，并在我的本地 WAMP 主机和远程主机上对其进行了测试。这是我的代码：

```
$myemail = someEmailAddress

$q = mysqli_query($cxn,"INSERT INTO `purchases`(`id`, `email`) 
VALUES (NULL , '$myemail'); 
SELECT LAST_INSERT_ID();") or die(mysql_error()); 
```

如果我取出这一点：

```
SELECT LAST_INSERT_ID(); 
```

查询运行良好，我得到了一条闪亮的新记录，其中包含正确自动递增的“id”，但将其放回原处，什么也没有发生。顺便说一句，在我的 WAMP 服务器的 phpMyAdmin 的 SQL 窗口中运行相同的查询，我得到了我正在寻找的结果。

我认为问题在于在同一个字符串中运行多个查询。据我所知，语法是正确的，所以我正在运行的服务器有问题吗？

让我解释一下我想要实现的目标。我正在为自己做生意，我希望客户能够在线预订。我想将客户可能想要同时预订的单个事件分组到一张发票​​中。我有一个数组 ($_SESSION[basket]) 收集会话中的数据，并且在预订时我想在我的“购买”表中创建一个新记录，它有一个自动增量主键“id”，当那是创建我需要知道该新记录的“id”值，以便我可以通过具有多对多关系的第三个表将他们预订的事件链接到购买。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:57:44.223

要从最后一个 sql 中获取自动生成的 id，请使用以下命令：

```
 The mysqli_insert_id() function returns the ID generated by a query on a table with a

 column having the AUTO_INCREMENT attribute. If the last query wasn't an INSERT or UPDATE

 statement or if the modified table does not have a column with the AUTO_INCREMENT attribute

, this function will return zero. 
```

只需`$mysqli->insert_id`在需要时在查询后调用。

抱歉，您使用的是程序样式，您会这样称呼它

`mysqli_insert_id($cxn)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T00:37:57.880

使用这个功能

```
function get_last_id()
{
    $q_last = mysql_query("SELECT max(id) as 'id' FROM purchases ") or die(mysql_error());
    return mysql_fetch_assoc($fetch); 
} 
```

# ssis - 将包作为计划作业执行时出现错误代码 0x80004005

> ID：14328898
> 
> 赞同：0
> 
> 时间：2013-01-14T23:48:41.123
> 
> 标签：ssis

错误信息是：

> POSTGRES dm_genders_d 验证失败并返回错误代码 0x80004005。

我已经看到几个几乎可以肯定这是一个权限问题的引用，这听起来对我来说是正确的，但我完全无法识别相关权限。

Postgres 连接使用 ODBC。该包正在将数据从 PostgreSQL 移动到 SQL Server。目前 32 位和 64 位驱动程序都存在，但我还没有看到如何在它们之间进行选择。

我已经为这项工作对 32 位进行了所有推荐的更改。

我们正在使用 Windows 身份验证。

我已经设置了一个代理来以我的用户身份执行该作业。

这些都没有减轻这个错误。

更新：是的，已经定义了 32 位数据源，并且正在使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-04T06:06:17.420

**我遇到了这个错误，我可以通过在“系统 DSN** ”而不是“**用户 DSN** ”选项卡中添加 ODBC 连接来解决它。

**开始** > **ODBC 数据源**

[![在此处输入图像描述](../Images/5c318c3ec1415088dadded476b9cd5f7.png)](https://i.stack.imgur.com/R84Mp.png)

我还用 32 位运行时运行了包

为此：在 SQL Server 代理 > 属性 > 步骤 > 编辑中右键单击您的作业

在出现的窗口（作业步骤属性）中，您可以设置 32 位运行时。（下图） [![在此处输入图像描述](../Images/7894be1f6813ff6bce3566e9ed0e9c5f.png)](https://i.stack.imgur.com/plgCO.png)

# jquery - 在 CakePHP REST 插件中处理 JSON API 请求的身份验证

> ID：14328905
> 
> 赞同：13
> 
> 时间：2013-01-14T23:49:18.140
> 
> 标签：jquery, rest, cakephp

我一直在尝试使用此处的 REST 插件为我的 CakePHP 应用程序构建一个 API：[https ://github.com/kvz/cakephp-rest-plugin](https://github.com/kvz/cakephp-rest-plugin)

使用这个插件的原因是因为我想要一种简单的方法来处理与受保护方法上的 API 调用有关的身份验证，并在未来处理日志记录等。

为了防止重复，插件的设置如上一个问题所述：[CakePHP REST 插件不返回数据](https://stackoverflow.com/questions/14288331/cakephp-rest-plugin-not-returning-data)，该数据现已修复并可以正常工作。

下一部分是处理身份验证。我在我的 beforeFilter 方法中添加了以下内容，基本上应该说如果它是一个休息调用并且用户没有登录（注意：并非所有方法都需要用户登录）然后登录。

```
if (!$this->Auth->user()) {

            if ($this->Rest->isActive()) {   

                $loginUser = $this->User->loginUser(
                    $credentials['username'],
                    AuthComponent::password($credentials['password'])
                );

                if($loginUser) {                        
                    if (!$this->Auth->login($loginUser['User'])) {
                        $msg = sprintf('Unable to log you in with the supplied credentials. ');
                        return $this->Rest->abort(array('status' => '403', 'error' => $msg));
                    }
                }

            }
        } 
```

对于那些想要查看模型调用的人：

```
 public function loginUser($usernameOrEmail, $password)
    {
        return $this->find('first', array(
            'conditions' => array(
                'OR' => array(
                    'User.email' => $usernameOrEmail,
                    'User.username' => $usernameOrEmail,
                    'User.phone' => $usernameOrEmail
                ),
                'User.password' => $password
            ),
            'recursive' => -1
        ));
    } 
```

但是我无法让它工作。我正在做这样的测试请求：

```
 $.ajax({
        url: 'http://domain.com/users/test.json',
        dataType: 'jsonp',
        data: { username: 'test', password: 'test' },
        headers: {
            Authorization: "TRUEREST"
        },
        success: function(response) {
            console.log(resonse);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            console.log(jqXHR, textStatus, errorThrown);
        }
    }); 
```

我在这里的三个主要问题是：

*   我在这里手动传递用户名和密码但是标题部分正确吗？关于它的解释在此处的文档中相当模糊：[https ://github.com/kvz/cakephp-rest-plugin#authorization](https://github.com/kvz/cakephp-rest-plugin#authorization)

*   `$credentials['username']`要捡起来吗？$credentials 是具有 HTTP 身份验证的全球性事物还是我错过了什么？

*   这是否会在用户每次发出请求时登录？因为如果是这样的话，它似乎有点混乱。

当前的代码实现错误：`Uncaught SyntaxError: Unexpected token :`

这是JSON输出，对我来说看起来不错...

```
{
    "data": {
        "User": []
    },
    "meta": {
        "status": "error",
        "feedback": [{
            "message": "Log in to continue",
            "level": "error"
        }],
        "request": {
            "http_host": "domain.com",
            "http_user_agent": "Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit\/537.22 (KHTML, like Gecko) Chrome\/25.0.1364.29 Safari\/537.22",
            "server_addr": "##.##.###.###",
            "remote_addr": "##.###.###.###",
            "server_protocol": "HTTP\/1.1",
            "request_method": "GET",
            "request_uri": "\/users\/test.json?callback=jQuery172015279368730261922_1358207116601&username=test&password=test123&_=1358207116611",
            "request_time": 1358207116
        },
        "credentials": {
            "class": null,
            "apikey": null,
            "username": null
        },
        "time_epoch": "1358207117",
        "time_local": "Mon, 14 Jan 2013 15:45:17 -0800",
        "version": "0.3"
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T00:36:12.420

您的问题很多，涵盖的范围很广。我会指出我看到问题的所有方向。您可能会发现的最大问题是找不到用户。这是因为除非您`$credentials`在代码中的其他位置进行设置，否则它们不会被设置。

**缺少凭据**

我没有看到您在`$credentials`任何地方设置变量。.ajax 中的数据选项作为 GET 请求传递。您可能需要从 更新`$credentials['var']`为`$_GET['var']`。如果我没记错的话，这些也可以在`$this->data->params['username']`和中找到`$this->data->params['password']`。

**如果用户未经过身份验证怎么办**

我看到了您的`if (!$this->Auth->user())`，并且我看到了您尝试在哪里提取用户信息，但逻辑似乎允许未经授权的用户通过。你可能想多看看这个逻辑。这是我要做的：

```
if ($this->Rest->isActive()) {
     $user = $this->User->loginUser(
          $_GET['username'],
          AuthComponent::password($_GET['password'])
     );

     if (!$this->Auth->login($user)) {
          $msg = sprintf('Unable to log you in with the supplied credentials. ');
          return $this->Rest->abort(array('status' => '403', 'error' => $msg));
     }
} else {
     // handle the non-rest request
} 
```

# mysql - SQL 连接或合并结果？

> ID：14328924
> 
> 赞同：2
> 
> 时间：2013-01-14T23:51:42.093
> 
> 标签：mysql, sql, relational-database

看看这个数据库模式：

![数据库架构](../Images/b2869c4516b24414f8392f22d7b8aa8b.png)

用户可以订购产品。对于任何订单，我在*orders*表中添加一条新记录，并在*orders-products* N:M 表中为用户订购的任何单个产品添加一条新记录（并填写 items 字段）。但是，当用户创建订单时，我需要显示**所有产品**的列表，并使用为任何产品订购的数量填写 items 字段。

通常，为此，我使用两个查询。
第一个查询获取*产品*表中的所有产品：

```
SELECT * FROM products; 
```

第二个查询获取在*orders-products*表中订购的产品，通过*orders-idorder* FK**过滤**它们：

 *```
SELECT orders_idorder AS idorder, products_idproduct AS idproduct, pieces FROM orders_products WHERE orders_idorder=1; 
```

然后我**将结果合并到**一个数组中，并使用它来显示完整的产品列表以及为每个产品订购的零件。最终结果是这样的：

```
+---------+------------+--------------+--------+---- ----+
| 订单 | 产品标识 | 描述 | 价格 | 件|
+---------+------------+--------------+--------+---- ----+
| 1 | 1 | 产品 1 | 10.20 | 2 |
| 1 | 2 | 产品 22 | 11.00 | 空 |
| 1 | 3 | 产品 333 | 19.22 | 空 |
| 1 | 4 | 产品 4444 | 9.20 | 空 |
+---------+------------+--------------+--------+---- ----+

```

***注意***：在上面的示例中，products 表中有 4 条*记录，而orders-products**表*中只有 1 条记录（idorder=1，idproduct=1 和pieces=2）。 -> 在这里你可以找到[SQL Dump](http://www.m4ss.net/test.sql)来测试查询。 合并从 2 个查询构建的数组是最好的方法吗？**我可以用一个查询来完成吗？** 你觉得演出怎么样？

 **** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:59:59.143

通常让数据库优化合并会比你在代码中做的更好。db 通常也更擅长排序。

您如何构建查询取决于您想要的结果集。如果您想要所有产品，无论它们是否出现在订单表中，那么您将使用 OUTER JOIN 否则 INNER JOIN 将过滤掉从未订购过的产品。

如果您向我们提供一些示例数据的所需结果，我们可能会帮助您进行查询，但请先自己试一试。

```
set @searchOrderId = 1;
select ifnull(op.orders_idorder, @searchOrderId) AS idOrder,
    p.idproduct,
    p.description,
    p.price,
    op.pieces
from products p
left join orders_products op on op.products_idproduct = p.idproduct
where ifnull(op.orders_idorder, @searchOrderId) = @searchOrderId ; 
```

我正在玩的[SQL Fiddle来测试它。](http://sqlfiddle.com/#!2/a04ad/17)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:45:02.250

当然，您可以通过将表连接在一起使用单个查询来获取信息。是你遇到的问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T13:09:50.913

我认为一般来说，执行单个查询来检索结果会比执行两个查询并合并结果更好。鉴于所提供的信息，不可能说出理想的执行计划是什么。表大小、架构等将发挥作用。

要从单个订单中检索所有产品，请尝试：

```
select
    o.idorder,
    p.idproduct,
    p.description,
    p.price,
    op.pieces
from
    orders o
    inner join orders_products op
        on o.idorder = op.orders_idorder
    inner join products p
        on op.products_idproduct = p.idproduct
where
    o.idorder = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T22:21:16.687

我明白了，您希望将 Products 表中的 LEFT JOIN 连接到 Orders_Products。这将为您提供您正在寻找的结果。****

# html - MVC4 移动 Web 应用进入应用商店

> ID：14328927
> 
> 赞同：2
> 
> 时间：2013-01-14T23:52:15.693
> 
> 标签：html, jquery-mobile, asp.net-mvc-4

我使用 MVC4-mobile 和 HTML5 开发了一个 Web 应用程序。当我们从任何手机输入 URL 时，一切正常。但我想知道如何将我的网络应用程序转换为混合应用程序，以便我可以在 istore 或 GooglePlay 中上传。

请帮助我完成我需要遵循的程序或步骤，除了 phoneGap 之外，还有什么工具可以使用。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T12:22:18.133

选项很少，但我只会提到其中的两个。

1.  最常用的是 Phonegap/Cordova 应用程序包装框架（也是我的主要选择）。Cordova 是 Phonegap 框架的新名称。它将使您可以访问常用的手机功能（Android、iPhone、Blackberry 和 WP7+）。它非常易于使用，并且有很多可用的 vorking 教程，您甚至可以在 youtube 中找到它们。

    这是一个 phonegap 链接：[http](http://cordova.apache.org/) ://cordova.apache.org/ 。在那里，您将找到如何在所有可用平台上安装/配置它的教程。这是一个较旧的链接：[在此处输入链接描述](http://phonegap.com/)，它仍然有可用的信息。

    如果有疑问，请始终搜索 phonegap 示例而不是 cordova。出于某种原因，Phonegap 仍然是一个最常用的名称。

    这是一个Phonegap + jQuery Mobile 的例子：[http](http://therockncoder.blogspot.com/2012/07/jquery-mobile-phonegap-and-camera.html) ://therockncoder.blogspot.com/2012/07/jquery-mobile-phonegap-and-camera.html ，在那里你会找到一个用于Android和iOS实现的github链接。

    ***通过PhoneGap javascript API***，“web 应用”可以访问手机功能，如地理定位、加速度计相机、联系人、数据库、文件系统等。基本上，手机 SDK 提供的任何功能都可以“桥接”到javascript 世界。另一方面，在移动网络浏览器上运行的普通网络应用程序无法访问大多数这些功能（安全性是主要原因）。因此，PhoneGap 应用程序与其说是 Web 应用程序，不如说是一个移动应用程序。您当然可以使用 PhoneGap 来包装一个根本不使用任何 PhoneGap API 的 Web 应用程序，但这不是创建 PhoneGap 的目的。

    现在有些***缺点***。使用每个平台的 PhoneGap，您必须维护不同的项目。当需要使用多个 PhoneGap 插件时，这种负担会增加，因为您需要在每个平台上搜索和更新不同的文件。

2.  Mosync 也是一个很好的解决方案。这个框架有一些比Phonegap 处理得更好的东西。像：

    *   使用 MoSync，您只需为所有平台维护一个项目。对于 iOS，您仍然需要使用 Xcode，因为 MoSync 会为它输出一个项目，但除了构建它之外，无需深入研究 Apple 的 IDE。

    *   为 JavaScript 提供的全部功能都放在所有操作系统的同一个文件中。没有插件的文件，因为它没有（至少我知道），但是通过下一节中描述的方式实现了相同的可扩展性。

    *   如果 MoSync 在 JavaScript 端没有提供某些功能，则没有可以使用的插件，但还有另一种方法。MoSync 从 C++ 端提供了许多功能，如果默认情况下无法从 JavaScript 访问它们，则可以轻松使用它们。我确信 MoSync 团队将来会为 JavaScript 库添加更多功能。

    *   使用 MoSync，您不仅限于复制原生 UI 的 JavaScript 框架，您可以真正创建仅使用 JavaScript 响应速度更快的原生 UI 元素。

3.  另一方面，Rhomobile 使用较少，因此支持较少。

    我很少听到关于这个框架的好消息，但从来没有时间学习/使用它。

> RhoMobile 应用程序与操作系统无关，能够支持企业级和消费级操作系统，包括 Windows® Embedded Handheld、Windows® CE、Windows® Phone 7 系列、Apple® iOS、Android® 和 BlackBerry®。您可以完全控制应用程序在不同设备上的行为方式。使用 RhoMobile Suite，您终于摆脱了操作系统设计的限制，能够创建与消费者应用程序一样优雅和直观的业务应用程序（这是从他们的主站点复制的）。

# jquery - 如何给我所有的网页链接打开延迟？

> ID：14328928
> 
> 赞同：0
> 
> 时间：2013-01-14T23:52:23.150
> 
> 标签：jquery, html

我想知道是否有人有过时间延迟的经验？我试图让我的所有全球链接延迟打开。只是为了给它一个艺术效果，让它更顺畅地交换页面。但由于某种原因，我无法让它工作。我会很感激我能得到的任何帮助。

**HTML：**

```
 <!DOCTYPE html>
<html lang="en-US">
    <head>
    <meta charset="utf8" />
        <link rel="stylesheet" type="text/css" media="all" href="css/mainstyle.css"/>
        <meta name="viewport" content="initial-scale=1" />
        <title> Redneck Rampage </title>
    </head>
    <body class="filter">
    <div id="background"> 
        <div id="wrapper">
            <div class="navigation">
                <ul id="mainmenu">
                    <li class="active"><a href="index.html">Home</a></li>   
            <li><a href="band.html">Band</a></li>  
            <li><a href="news.html">News</a></li>
                    <li><a href="shows.html">Shows</a></li>
                    <li><a href="music.html">Music</a></li>
                    <li><a href="gallery.html">Gallery</a></li>
                    <li><a href="media.html">Media</a></li>
                    <li><a href="store.html">Store</a></li>

                </ul>
            </div>

                <div class="footer homepage">
                    <p class="rednecks">Website and Contents &copy; Redneck Rampage 2013\. </p>
                    <p class="signature">Designed by Martin Metsalu </p>

                        <ul id="footermenu">
                            <li><a href="terms.html">Terms of use</a></li>
                            <li><a href="privacy.html">Privacy Policy</a></li>
                            <li><a href="contact.html">Contact</a></li>
                       </ul>
                    <div class="socialplugins">
                        <div class="test"><a href="#"><img src="IMG/soundcloud.png" alt="plugin#1" ></a></div>        
                        <div class="test"><a href="#"><img src="IMG/youtube.png" alt="plugin#2"></a></div>
                        <div class="test"><a href="#"><img src="IMG/myspace.png" alt="plugin#3"></a></div>
                        <div class="test"><a href="#"><img src="IMG/facebook.png" alt="plugin#4"></a></div>

                    </div>

                </div>
         </div>
    </div>
</body>
</html> 
```

**查询：**

```
 $('a').click(function(e) {
$('a[href*="/steve"]').each(function(index) {
    setTimeout(
         function(href){window.open(href)},
         (index+1)*5000, $(this).attr('href')
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:00:30.917

```
$( 'a[href*="/steve"]' ).each( function () {
    $( this ).on( 'click', function ( event ) {
        event.preventDefault();
        ( function ( h ) {
            setTimeout( function () {
                window.location = h;
            }, 5000 );
        })( this.href );
    });
}); 
```

试试看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:57:15.020

我认为你只需要`e.preventDefault();`在点击功能的顶部做

# scala - 如何使 GroupBy 返回的地图可变？

> ID：14328929
> 
> 赞同：2
> 
> 时间：2013-01-14T23:52:33.213
> 
> 标签：scala

我有一个包含地图的类。我有一个惰性 val，它基本上包含按特定格式分组的地图。我想通过一个方法多次使用它，然后在某个时间点清除这张地图。我该怎么做这样的事情。

例子

```
class A(input: Map[key,value]) {
   private lazy val mapgrouped = input.groupBy(_._1.a)
   def useMap()
   {
       //use the mapgrouped Map multiple times
   }

   def clearMap()
   {
      // clear the mapgrouped field here
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:26:45.577

除非您有特殊的性能要求，否则我建议选择 var-of-immutable 而不是 val-of-mutable。前者允许安全发布：读者不一定会获得最新版本的数据，但可以保证他们获得其他线程无法篡改的内部一致的快照。

在你的情况下，我可能会做这样的事情：

```
private var mMapGrouped: Option[Map[A,B]] = None

def useMap() {
  val map = mMapGrouped.getOrElse {
    val newMap = rebuildTheMap(...)
    mMapGrouped = Some(newMap)
    newMap
  }

  doStuffWith(map)
}

def clearMap() {
  mMapGrouped = None
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:00:18.040

您无法控制`lazy val`RHS 的评估策略，它们是严格的一次性评估。

您的分组地图是私有的，因此我假设您不允许该 Map 实例本身泄漏。在这种情况下，您可以根据`Map`您需要的任何策略使可变并重置/重新生成其内容。

# javascript - 替换字符串中的表情符号，除非在特定文本组中

> ID：14328930
> 
> 赞同：1
> 
> 时间：2013-01-14T23:52:34.087
> 
> 标签：javascript, regex

我试图用图像标签替换给定字符串中的表情符号，前提是它不在某个字符组内。

鉴于：

```
var reg = /(?!<):\/(?![^<>]*>)/g,
    string = ':/ <a href="http://blah.com">http://blah.com</a> :/',
    result = string.replace(reg, 'IMG'); 
```

结果：`IMG <a href="http://blah.com">httpIMG/blah.com</a> IMG`

我想知道是否有一种方法可以忽略 HTML 标签内的替换，而不仅仅是在`<>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:08:59.347

Maybe this is not the best solution but if you use jQuery the following *"oneliner"* can do the job:

```
var str = ":/ <a href='http://blah.com'>http://blah.com</a> :/";

$("<div />", { html : str }).contents().each(function() {
    if (this.nodeType === 3)
        this.nodeValue = this.nodeValue.replace(/:\//g, "IMG");
}).end().html(); 
```

**DEMO:** [http://jsfiddle.net/Hfnje/](http://jsfiddle.net/Hfnje/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:55:05.227

为什么不将其与单词边界匹配？

```
/\B:\/\B/ 
```

这将匹配：：
/
foo：/ bar

但不是：
http://
foo:/bar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:09:45.977

在@VisioN 的帮助下，我设法想出了这个：

```
message =
  $('<div />', html: message).contents().each(->
    if @nodeType is 3
      for replacement, emoticons of self.emoticons
        for emoticon in emoticons
          @nodeValue = @nodeValue.replace new RegExp(emoticon, 'g'),
            $('<span />', class:'emoticon ' + replacement, title: emoticon)[0].outerHTML

      $(@).replaceWith @nodeValue
  ).end().html() 
```

它不漂亮，但它正在工作。

# utorrent - utorrent Hash：未找到元素

> ID：14328935
> 
> 赞同：3
> 
> 时间：2013-01-14T23:53:15.363
> 
> 标签：utorrent

***问题：***

我不断收到***Hash: Element not found 错误。***

> ***技术细节：***
> 
> *   uTorrent 3.2.3（撰写本文时的最新版本）
>     *   运行大约 30 个 Torrent（全部下载）
> *   赢 7 64 位
> *   戴尔 N5050 :sigh:

***症状：***

*   强制重新检查被禁用（有时）
*   当我恢复 torrent 时，它会在发生这种情况时停止，它会顺利进行，直到下一个***Hash: Element not found***错误
    *   它不会发生在特定的 %age

***尝试的解决方案：***

网上搜了很多，下面找到几个

1.  **在别处重新下载。**设置下载文件夹并更改它并重新下载种子。***不！不工作！***令人沮丧的是，我要删除我下载的 90% 的种子！！
2.  **好'ol重击**。对着屏幕发誓，做出沉重的拳头和手势。令人惊讶的是，这不起作用！
3.  **强制重新检查。**没有帮助，有时不可用。
4.  ***磁盘 I/O 错误。***看到一篇文章说这可能是由于磁盘 I/O 错误。
    *   意识到我正在使用**DELL**笔记本电脑
    *   意识到硬盘在以前的 DELL 上出现故障
    *   再次尝试***解决方案＃2***。结果相同。
    *   似乎是问题的最可能解释，因此阅读有关硬盘检查的文章并下载一些建议的软件来检查硬盘健康
    *   有趣的是，硬盘还可以

这些都不起作用！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-04-05T12:57:48.347

当我的硬盘驱动器磁盘空间不足时出现此错误，因此我认为这与某些文件/磁盘访问问题有关，具体取决于您写入的位置

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-18T11:50:17.110

我试图将一些大文件下载到网络驱动器（Windows XP 到 Samba），但我遇到了同样的`Element Not Found`错误。

就我而言，启用磁盘缓存已经解决了这个问题。我不得不**取消选中***uTorrent Options -> Preferences -> Advanced -> Disk Cache*下的`Disable Windows caching of disk writes`and选项（这样可以启用缓存）。`Disable Windows caching of disk reads`

 *![utorrent偏好截图](../Images/68e2abfa3a64e2c6e6b93c1dcc6487e7.png)

来源：http: [//forum.utorrent.com/topic/34159-error-element-not-found/page-2#entry251137](http://forum.utorrent.com/topic/34159-error-element-not-found/page-2#entry251137)

我真的认为这个问题属于[超级用户](http://superuser.com)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T23:53:15.363

***工作***解决方案结果非常简单。

> ***检查您的防病毒软件！***

我的防病毒软件正在悄悄隔离一些可疑文件。

> ***将这些文件添加到排除列表中。***

一切都好起来了。*

# firefox - XMLHttpRequest.send(Int8Array) POST 仅在 Firefox 中失败

> ID：14328947
> 
> 赞同：0
> 
> 时间：2013-01-14T23:54:11.760
> 
> 标签：firefox, xmlhttprequest, send

我正在尝试使用`XmlHttpRequest`带有作为数据的对象发布数据（文件的一部分） `Int8Array`，但它在 FF18 中失败，但在 IE 10 和 Chrome 中完美运行。

这是我的 JS：

```
//dataObj is an Int8Array with approx. 33,000 items
var oReq = new XMLHttpRequest();
oReq.open("POST", "Ajax/PostChunk");
oReq.onload = function (oEvent) {
    //
};

oReq.send(dataObj); 
```

我在 Firefox 中使用 Firebug 来调试我的 JS，当我在*Net*选项卡下观看活动时，这个 XHR 调用没有任何显示。好像它从未被调用过。

此外，在此调用之前，我`.ajax()`为“Ajax/PostChunkSize”调用了 jQuerys 方法，该方法在所有浏览器中都可以正常工作，尽管它的数据不使用 an `Int8Array`。据我所知，我不能使用`.ajax()`它，因为`.ajax()`它不支持对象。`Int8Array`

有谁知道为什么 Firefox 甚至不尝试发送这个？有任何问题，请提出。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:16:41.130

发送类型化数组（相对于数组缓冲区）的能力是最新加入的 in-flux XMLHttpRequest2 规范。它将在 4 月左右在 Firefox 20 中得到支持（请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=819741](https://bugzilla.mozilla.org/show_bug.cgi?id=819741)），但与此同时，如果您的 Int8Array 覆盖了其整个缓冲区，`send(dataObj.buffer)`那么应该可以...

请注意，根据旧规范，上面的代码应该发送一个类似于“[object Int8Array]”的字符串，而不是抛出；您可能需要检查以确保其他浏览器确实在发送数组数据而不是该字符串。

# magento - Magento 图层导航从根类别开始

> ID：14328949
> 
> 赞同：3
> 
> 时间：2013-01-14T23:54:17.047
> 
> 标签：magento

是否可以通过开箱即用的 Magento 安装来查看从根类别开始的分层导航页面？

也就是说，使用示例数据，如果我导航到

```
http://magento1point7pointzeropoint1.dev/catalog/category/view/id/8 
```

我得到了商店里所有手机的清单，分层导航让我没有按类别排序的选项。

如果我导航到手机的父类别页面（电子）

```
http://magento1point7pointzeropoint1.dev/catalog/category/view/id/13 
```

分层导航让我可以选择过滤

```
Cell Phone
Camera
Computer 
```

这些都是电子产品的子类别。

所以，我想知道的是，商店/系统中是否有一个页面可以浏览到 ROOT 类别，其中分层导航将使我能够按顶级类别（家具、电子产品、服装) **或**按 **所有*这些父类别的子类别排序的能力（太多无法列出）。

当我尝试浏览到根类别时

```
http://magento1point7pointzeropoint1.dev/catalog/category/view/id/3 
```

我得到一个 404 页面。所以我的第一个假设是该功能不存在，但你的第一直觉经常让你误入歧途，所以我转向 StackOverflow/“社区”寻求明确的答案。

（边界编程相关，我知道，但作为研究编程问题的一部分，我要问）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T00:25:07.377

这是可能的，而且是真正的 magento 方式，而不是那么直截了当。阻止控制器显示根类别的主要因素是`catalog/category`助手。

类别控制器`_initCatagory`调用`canShow`方法：

```
if (!Mage::helper('catalog/category')->canShow($category)) {
    return false;
} 
```

法师类别助手：

```
public function canShow($category)
{
    if (is_int($category)) {
        $category = Mage::getModel('catalog/category')->load($category);
    }

    if (!$category->getId()) {
        return false;
    }

    if (!$category->getIsActive()) {
        return false;
    }
    if (!$category->isInRootCategoryList()) {
        return false;
    }

    return true;
} 
```

如您所见，它会检查以确保该类别不是根类别。我过去处理这个问题的方法是使用一个模块：

*   创建一个自定义路由器来处理“所有产品”登陆页面并实例化我的自定义类别控制器
*   创建一个控制器来处理加载适当站点的根类别和证明（扩展核心类别控制器）
*   实现我自己的类别助手，它只重载这个方法并放弃检查

您可能会从那里遇到其他问题，但至少您应该有一个起点。

为了更直接地回答您的问题，根据我的经验，如果没有硬塞进去，它就不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T01:56:57.030

我建议的是一种不同的方法，但是应该可以在不对类别路由/处理/等进行大量更改的情况下工作。

将一个类别添加到您的根目录，标签为 Products、Catalog 或类似的通用名称。配置它以支持分层导航并将所有其他类别放入其中。当然，这意味着顶部导航被搞砸了；等等任务#2。

现在类别已按我们希望的方式设置，重写`Mage_Catalog_Block_Navigation`并更改方法最顶部的逻辑，`renderCategoriesMenuHtml`以开始使用`$child`循环中第一个子项的子项进行渲染，其中填充`$activeCategories`用于构建标记的数组。

事实证明，这将比弄乱根类别如何与层次结构联系起来要干净得多，并且它实现了拥有主分层导航的目标。唯一潜在的缺点（取决于您如何看待它）是您的 URI 和面包屑路径中将包含“/products/”（或目录）。

# cloud-foundry - 新版 vmc 报错：CFoundry::TargetRefused: target denied connection (getaddrinfo: No such host is known.)

> ID：14328952
> 
> 赞同：0
> 
> 时间：2013-01-14T23:54:45.490
> 
> 标签：cloud-foundry

在我的公司网络中，我尝试使用以下版本的 vmc：0.5.0.beta.7 和 0.4.7。当我尝试执行**vmc target api.cloudfoundry.com**时，出现以下错误：

```
CFoundry::TargetRefused: target refused connection (getaddrinfo: No such host is known. ) 
```

当我尝试版本 0.3.18 时，我没有收到该错误。请注意，我通过设置 http_proxy 环境变量来正确设置 http 代理。

有没有人遇到过这个问题或知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T17:27:13.920

要让 VMC 在公司防火墙 (SOCKS) 后工作，您可以使用 socksify (http://socksify.rubyforge.org/)。我刚刚将以下内容（针对我的环境进行了更正）添加到 gems/vmc-0.4.7/lib/vmc/cli.rb：

```
require 'socksify'
TCPSocket::socks_server = "127.0.0.1"
TCPSocket::socks_port = 9050 
```

不是很优雅，但效果很好，我终于可以使用 CF 了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:25:53.503

您能否尝试在不需要任何代理设置的网络上执行 vmc 目标？

# node.js - 使用 Windows Azure Powershell 设置唯一的部署名称

> ID：14328954
> 
> 赞同：2
> 
> 时间：2013-01-14T23:54:51.213
> 
> 标签：node.js, powershell, azure, azure-web-roles

我正在尝试使用[Windows Azure PowerShell (December 2012)](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/powershell-cmdlets)升级运行 node.js 的 Azure Web 角色。我曾经使用 PowerShell 成功部署了这个 Web 角色。根据他们的[指示](http://www.windowsazure.com/en-us/develop/nodejs/how-to-guides/powershell-cmdlets/#header-9)，我应该可以执行`Publish-AzureServiceProject`升级项目。尝试执行该命令时，我收到以下错误：

`The deployment name 'deploymentName' already exists under service 'serviceName'`

我找不到可以使用 PowerShell 设置部署名称的位置。我已向PowerShell 生成`DeploymentName`的文件添加了一个设置，并尝试将其作为参数传递。我是否正在正确升级服务，或者是否有任何人运行过的参数允许您设置它？`deploymentSettings.json``DeploymentName`

**更新（2013 年 1 月 16 日）**

正如@AvkashChauhan 建议的那样，我做了一个香草部署。我最初发布到 Staging，然后运行 ​​Publish-AzureServiceProject 并能够升级项目。

问题是当我使用 Azure 的 Swap VIP 功能将暂存部署推广到生产环境时。交换部署后，我有一个没有部署的空暂存槽。如果我尝试运行 Publish-AzureServiceProject 以再次发布到暂存槽（我没有更改其间的任何部署设置）。部署失败并显示上述错误消息。

**更新（2013 年 1 月 22 日）**

我还没有找到解决这个问题的方法。我在 azure-sdk-tools repo 上报告了一个问题，希望在那里得到回应。您可以在此处阅读更多信息或关注：[https ://github.com/WindowsAzure/azure-sdk-tools/issues/892](https://github.com/WindowsAzure/azure-sdk-tools/issues/892)

我会报告这个问题的任何更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:55:54.623

我真的很想知道为什么更新云服务会失败。这是我刚刚尝试检查使用“Set-AzureServiceProject”设置完成的服务设置是否有任何问题，如下所示：

```
> Set-AzureServiceProject -Location "East US" -Slot "Production" 
```

基于上述设置，我的 deploymentSettings.json 如下所示（订阅 ID 是根据发布设置首先设置的，存储名称与服务名称相同）：

```
{"Slot":"Production","Location":"East US","Subscription":"","StorageAccountName":""} 
```

现在，当我使用 Publish-AzureServiceProject 更新我的服务时，它可以正常工作：

```
PS C:\node\AvkashSvc\> Publish-AzureServiceProject

Publishing  to Windows Azure. This may take several minutes...

4:27:57 PM - Preparing runtime deployment for service 'AvkashSvc'
4:27:57 PM - Preparing deployment for AvkashSvc with Subscription ID: ***...
4:28:01 PM - Connecting...
4:28:02 PM - Uploading Package...
4:28:05 PM - Upgrading...
4:30:29 PM - Created Deployment ID: **********.
4:30:29 PM - Starting...
4:30:29 PM - Initializing...
4:30:29 PM - Instance WebRole1_IN_0 of role WebRole1 is ready.
4:30:30 PM - Created Website URL: http://AvkashSvc.cloudapp.net.
4:30:30 PM - Complete. 
```

我可以建议尝试将插槽更改为“暂存”并执行第一次部署，然后更新以查看您是否遇到相同的问题。您只是尝试对 vanila node.js 应用程序做同样的事情吗？

# ruby-on-rails - craigslist 上的 HTTP GET 被阻止

> ID：14328955
> 
> 赞同：5
> 
> 时间：2013-01-14T23:54:53.643
> 
> 标签：ruby-on-rails, amazon-ec2, craigslist

我正在尝试在 craigslist [sfbay.craigslist.org](http://sfbay.craigslist.org)上执行 HTTP GET 。这是我的（ruby）代码，非常简单

```
require 'net/http'
result = Net::HTTP.get(URI.parse('http://sfbay.craigslist.org')) 
```

我最终收到错误消息“此 IP 已被自动阻止”。

仅当我从 Amazon EC2 或 heroku 上尝试此操作时，才会发生此行为。当我在自己的计算机 localhost 上再次尝试时，我得到了正确的结果。这与 Amazon EC2 有关系吗？

我想知道其他人是否有同样的问题。如何从 EC2 访问 craigslist？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T14:32:46.067

我可以确认 Craigslist 正在通过 IP（而不是用户代理）阻止主要的 Amazon EC2 IP 范围。它可以在其他地方工作，但我怀疑任何卷都会导致其他 IP 被阻止。

你可以用[tor](https://stackoverflow.com/questions/tagged/tor)绕过它。更重要的是，[这个 stackoverflow 问题讨论了 craigslist mashups 使用的数据源](https://stackoverflow.com/questions/237124/how-do-craigslist-mashups-get-data)。

我什至测试了巴西 EC2，假设他们可能没有阻止所有 CIDR。没有布埃诺。

# c# - 从 MSVS 内部和外部运行应用程序的区别

> ID：14328956
> 
> 赞同：0
> 
> 时间：2013-01-14T23:55:00.593
> 
> 标签：c#, visual-studio, c#-4.0, xna, xna-4.0

我注意到我正在开发的应用程序（用 C#/XNA 编写的游戏）有时会表现出不同的行为，具体取决于它是否从 Microsoft Visual Studio (2010) 中启动，而不是在 MSVS 之外启动时（例如从 Windows 资源管理器）。具体来说，有时我会得到在 MSVS 中不会发生的错误（出现异常）。

造成这种差异的原因可能是什么？理想情况下，有一种方法可以让 MSVS 尽可能严格地检查应用程序，这样我就可以确定在开发过程中所有错误都确实发生（并且可以修复）。

该问题发生在发布和调试模式下。游戏使用了许多外部 dll（nuclex lib、sharp dx），但这些库都在 MSVS 内部和外部使用。游戏完全在一个线程中运行。

**请注意，问题不是关于我需要调试的特定错误，而是关于（可能）由应用程序启动方式引起的一般差异。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T03:10:21.177

在 Visual Studio 中运行时，有两个主要因素会导致您的程序以不同方式运行。

首先，[Visual Studio 托管过程](http://msdn.microsoft.com/en-us/library/ms185331.aspx)。我认为默认情况下它是禁用的。但是，如果需要，它的切换位于应用程序项目属性的“调试”选项卡中。

第二，当附加调试器时，.NET JIT 将发出不同的、更易于调试的机器代码。您可以通过取消选中工具 -> 选项 -> 调试 -> 常规中的“**在模块加载时抑制 JIT 优化（仅限托管） ”复选框来禁用**[此行为。](http://msdn.microsoft.com/en-us/library/ms241594(v=vs.100).aspx)

 **您可以尝试禁用此选项，然后在调试器下运行游戏并查看是否出现相同的错误。请注意，当然，禁用此功能将使您的程序*更难*调试 - 但在这种情况下确实有帮助。

正如评论中提到的，这种问题与代码生成有关几乎是闻所未闻的（尽管理论上，我认为这是可能的）。由性能变化引起的潜在线程错误的可能性要大得多。它也可能是一个表现不佳的本地库——尽管这也很不寻常。**

# java - Spring 3检查是否有一个url的处理程序

> ID：14328957
> 
> 赞同：0
> 
> 时间：2013-01-14T23:55:05.097
> 
> 标签：java, spring, url, servlets

我正在使用带有 spring 3 的 java servlet。有没有办法检查是否有特定 URL 的处理程序？

我正在尝试实现一个测试，以确保处理我的 Jsp 文件中使用的所有 url。如果我想进行 url 重构，我想确保我的 jsps 中没有任何“断开的链接”......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:04:19.943

如果您使用 JUnit 和 Spring 3，这里是 FooController 测试的示例：

```
@Controller
@RequestMapping(value = "/foo")
public class FooAdminController {

    @RequestMapping(value = "/bar")
    public ModelAndView bar(ModelAndView mav) {

        mav.setViewName("bar");
        return mav;
    }
} 
```

FooController 的测试用例：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration({"file:src/path/to/servlet-context.xml" })
public class FooControllerTest {

    @Autowired
    private RequestMappingHandlerMapping handlerMapping;

    @Autowired
    private RequestMappingHandlerAdapter handleAdapter;

    @Test
    public void fooControllerTest() throws Exception{

        // Create a Mock implementation of the HttpServletRequest interface
        MockHttpServletRequest request = new MockHttpServletRequest();

        // Create Mock implementation of the HttpServletResponse interface
        MockHttpServletResponse response = new MockHttpServletResponse();

        // Define the request URI needed to test a method on the FooController
        request.setRequestURI("/foo/bar");

        // Define the HTTP Method
        request.setMethod("GET");

        // Get the handler and handle the request
        Object handler = handlerMapping.getHandler(request).getHandler();
        ModelAndView handleResp = handleAdapter.handle(request, response, handler);

        // Test some ModelAndView properties
        ModelAndViewAssert.assertViewName(handleResp ,"bar");
        assertEquals(200, response.getStatus());
    }
} 
```

# c# - 从 C# 中的 listBox 值填充组合框

> ID：14328961
> 
> 赞同：2
> 
> 时间：2013-01-14T23:55:24.220
> 
> 标签：c#, combobox, listbox, listboxitem

我无法解决这个问题。我需要从（C#`comboBox`中的 Windows 窗体）中的值填充项目。 每次我在 中添加值时，都必须自动填充。`listBox`
`listbox``combobox`

提前致谢。

这是代码，但现在可以使用

```
for (int i = 0; i < listBox1.Items.Count; i++)
        {
            comboBox1.Items.Add(listBox1.Items[i]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T00:25:09.387

```
private BindingList<string> bindingList;

List<string> stringList = new List<string();
//populate the list any way you want for example
stringList.Add("Hello");
stringList.Add("Good Morning");

bindingList = new BindingList<string>(stringList);
this.comboBox1.DataSource = bindingList;
this.listBox1.DataSource = bindingList; 
```

我建议使用循环加载 strngList 变量，或者如果数据来自数据库，则以这种方式加载字段，然后绑定到 ComboBox。

# javascript - 从Javascript控制台访问jsFiddle中的变量？

> ID：14328963
> 
> 赞同：33
> 
> 时间：2013-01-14T23:55:32.807
> 
> 标签：javascript, firebug, google-chrome-devtools, jsfiddle

我用以下代码创建了一个[小提琴：](http://jsfiddle.net/casebash/UMh6d/)

```
var x=10; 
```

当我尝试在控制台中查看它时，我得到以下信息：

```
> x
ReferenceError: x is not defined 
```

有道理，因为运行控制台需要 Javascript。有没有办法让这个工作？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-15T00:06:22.423

如果您使用 Chrome 或 Chromium，请查看您的开发者控制台的底部，其中`<top frame>`出现了字符串。单击它并选择`result(fiddle.jshell.net)`。这将改变浏览器的当前范围，您可以访问所有全局变量。`no wrap`另外，如果您也想访问`var`变量，请记住将 jsFiddle 中的加载选项更改为。

![屏幕截图 Chrome](../Images/af91381885365a78aafedb44c9b3bdb4.png)

**更新：2014.12.01**

对于 Firefox (34+) 和新的 Firefox 开发人员版，可以通过在开发人员工具中启用**选择框架作为当前目标文档**额外工具来执行相同操作，然后单击它并选择`http://fiddle.jshell.net/_display/`.

![截图火狐](../Images/60f02b821bbca0794277e30a52263be7.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T00:03:02.283

控制台就像它自己的闭包，其中`this === window`：您只能看到控制台中定义的变量（每个命令/脚本）。

因此，您有两种方法可以发布控制台中可见的数据：

1.  `var x = 5; console.log(x); // out of your code, not as console command`
2.  `window.x = 5; // now x is global, so in console you get 5 for x.`

您可以使用调试器代替纯控制台命令。在 firebug 和 chrome 的开发工具中，您可以设置断点，刷新页面（在 jsFiddle 中应该运行执行此操作），现在您可以在范围内查看变量的实际值。（您需要重新加载页面一次，将代码放入调试器，然后在下一次重新加载时在 document.ready 事件中获得断点。）

# javascript - 正则表达式要么 / 要么

> ID：14328964
> 
> 赞同：1
> 
> 时间：2013-01-14T23:55:35.830
> 
> 标签：javascript, regex

我有一个字符串可以有两种不同的电子邮件地址

```
way 1: str = " text text. Recipient: test@test.com";
way 2: str = " text text. Recipient Email: test@test.com"; 
```

在javascript中，我使用以下内容查看是否有电子邮件地址

```
test.match(/Recipient:\s(\w+@\w+.\w+)/); 
```

但这仅适用于其收件人的方式 1。我想为收件人或收件人电子邮件匹配它。

我将如何修改上述内容以支持这两个条款？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:58:40.303

我会将其添加到您的正则表达式中

```
(?: Email)? 
```

非捕获组比此处提供的其他解决方案更明确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:57:09.567

尝试

```
test.match(/Recipient( Email)?:\s(\w+@\w+.\w+)/); 
```

这使得“电子邮件”部分是可选的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T23:57:21.643

这个：

```
( Email)? 
```

将可选地匹配“电子邮件”，（a ? 表示前面的项目 0 或 1 次）所以添加我们有：

```
test.match(/Recipient( Email)?:\s(\w+@\w+.\w+)/); 
```

# google-app-engine - 更新时出现“版本未准备好”错误 - GAE Python

> ID：14328966
> 
> 赞同：2
> 
> 时间：2013-01-14T23:56:00.223
> 
> 标签：google-app-engine

我无法更新我的前端和后端。我收到错误消息“版本未准备好”。这个错误已经持续了长达 24 小时。我有一个永远在队列中运行的任务。我最好的猜测是这个任务正在停止更新。我无法删除该任务，因为它一直在运行，也无法删除队列，因为我无法上传新的 queue.yaml 定义。由于最大递归错误，同一任务先前失败，因为我在异步 tasklet 中有一个同步 RPC。

我很确定修复将需要 GAE 方面的某个人强行重置任务队列。因此，这个问题更适合向 GAE 团队提出，并在一个不太公开的论坛中提供有关我的应用程序的详细信息。不过，据我所知，他们[不允许直接支持问题，并建议在此处发布问题](https://developers.google.com/appengine/community)。那么，我的后续问题是，当您遇到需要 GAE 团队采取行动的 GAE 问题时——您如何处理它们（除了每月支付 500 美元购买高级支持帐户）？

编辑：

该任务是/应该在后端实例上运行。我打算通过控制台关闭所有后端和前端实例，假设它们会取消任务并重新启动。但我发现只有一个前端实例在运行——没有后端。关闭该前端实例后，仪表板报告我有 0 个实例正在运行，但该网站仍在运行，并且该任务始终在运行。

编辑：

禁用应用程序会阻止任务运行。重新启用该应用程序后，我能够对其进行更新。虽然我的队列中有一个[幽灵任务](https://stackoverflow.com/questions/14330455/gae-ghost-task-in-the-machine)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T03:33:38.277

如果您有一个卡住的任务队列作业，我会尝试禁用队列并终止运行该作业的实例。如果这不起作用，我会尝试暂时禁用该应用程序。

# javascript - 使用 JavaScript 揭示原型模式，我如何命名原型中包含的函数？

> ID：14328969
> 
> 赞同：2
> 
> 时间：2013-01-14T23:56:41.067
> 
> 标签：javascript, jquery, design-patterns, namespaces, prototype

我正在使用 Revealing Prototype Pattern 并将 2 个不同的原型放入同一个 JavaScript 文件中。这些链接指向我发现的与此相关的文章。 [http://bit.ly/U83hdg，http://bit.ly/VmJ71h](http://bit.ly/U83hdg)。_ [_](http://bit.ly/VmJ71h)

我的印象是这些会像原子类一样运行，其中与一个相关的函数将不知道另一个函数。

例如，这两个原型都有一个“init”和一个“set”函数。我在浏览器中看到的行为是“init”的最后一个版本被执行，即使代码引用了第一个原型名称。

这是我的两个原型中的通用精简代码。

```
var operationA = function (control, settings) {
   this.control = control;
   this.settings = settings;
};

operationA.prototype = function () {
   init = function () {
      // do something
      return this;
   }
   set = function () {
      // do something
      return this;
   };

   return {
      init: init,
      set: set
   };
}

var operationB = function (control, settings) {
   this.control = control;
   this.settings = settings;
};

operationB.prototype = function () {
   init = function () {
      // do something
      return this;
   }
   set = function () {
      // do something
      return this;
   };

   return {
      init: init,
      set: set
   };
} 
```

这就是我实例化第一个对象的方式。

```
var objectASettings = {
   property1: 48,
   property2: 37
};
var objectA = new operationA('#mySelector', objectASettings);
objectA.init().set(); 
```

当上述运行时，正在执行 operationB 原型中的 init 和 set 函数，而不是执行 operationA 原型中的 init 和 set 函数。

我假设这些原型基本上命名了它们包含的函数。我是否需要为 operationA 和 operationB 创建唯一的公共函数名称（如 initA、setA、initB、setB）？

有没有办法让这些公共函数自包含和/或命名空间，所以我可以公开相同的 init 操作名称并在同一个文件中设置 2 个不同的原型？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T03:07:16.677

让它工作的几件事：

1.  在原型函数的第一个成员之前添加 var。
2.  用逗号分隔每个成员（您当然可以将 var 放在每个成员前面，但我喜欢保持干净......不过个人喜好）。
3.  分配给原型的函数必须是自调用的，模式才能正常工作。

这是一个适合您的示例：

```
<html>
<head>
   <script>
        var operationA = function (control, settings) {
           this.control = control;
           this.settings = settings;
        };

        operationA.prototype = function () {
           var init = function () {
              // do something
              return this;
           },
           set = function () {
              alert('set A');
              return this;
           };

           return {
              init: init,
              set: set
           };
        }();

        var operationB = function (control, settings) {
           this.control = control;
           this.settings = settings;
        };

        operationB.prototype = function () {
           var init = function () {
              // do something
              return this;
           }, 
           set = function () {
              alert('set B');
              return this;
           };

           return {
              init: init,
              set: set
           };
        }();

        window.onload = function() {
            var objectASettings = {
               property1: 48,
               property2: 37
            };
            var objectBSettings = {
               property1: 50,
               property2: 50
            };
            var objectA = new operationA('#mySelector', objectASettings);
            objectA.init().set();

            var objectB = new operationB('#foo', objectBSettings)
            objectB.init().set();
        }
   </script>
</head> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T23:59:27.503

您在`var`定义时省略了关键字`init`，`set`因此它们都被分配给全局对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T00:07:19.187

Just define the prototypes as Objects.

```
var operationA = function (control, settings) {
   this.control = control;
   this.settings = settings;
};

operationA.prototype = {
   init: function () {
      // do something
      return this;
   },
   set: function () {
      // do something
      return this;
   }
}

var operationB = function (control, settings) {
   this.control = control;
   this.settings = settings;
};

operationB.prototype = {
   init: function () {
      // do something
      return this;
   },
   set: function () {
      // do something
      return this;
   }
}; 
```

# paypal - 用于基本支付解决方案的 Paypal API？

> ID：14328971
> 
> 赞同：-2
> 
> 时间：2013-01-14T23:56:54.393
> 
> 标签：paypal, paypal-ipn, paypal-adaptive-payments

我只是在为我的新业务寻找一个非常基本的支付解决方案。在我的网站上，我提供了一个界面供用户进行预先指定的付款，并且我的后端服务器可以收到付款通知并立即激活用户帐户。

Paypal 是否提供这样的 API？是否每个人都可以访问此类 API，或者是否有审批流程？

如果有人可以将我指向一个页面开始，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T03:57:00.227

是的，您几乎可以使用 PayPal 提供的任何功能来做到这一点。

*   [付款标准](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/wp_standard_overview)
*   [快速结账](https://www.x.com/developers/paypal/development-and-integration-guides#ec)
*   [付款专业版](https://www.x.com/developers/paypal/development-and-integration-guides#wpp)
*   [预付款](https://www.x.com/developers/paypal/development-and-integration-guides#ppa)
*   [自适应支付](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)

根据您的业务和应用程序的需求，一种可能比另一种更适合您。

在任何情况下，您都可以利用[即时付款通知 (IPN)](https://www.x.com/sites/default/files/ipnguide.pdf)将实时数据发布到服务器上的侦听器脚本。在此您可以更新自己的数据库、访问第三方网络服务、发送电子邮件通知等。

# ios - 连续使用两个手势识别器而不中断

> ID：14328972
> 
> 赞同：0
> 
> 时间：2013-01-14T23:56:55.573
> 
> 标签：ios, objective-c, uiswipegesturerecognizer

在我的应用程序中，我必须一个接一个地实现两个 UIswipegesturerecognizers（左和右），而不需要从屏幕上移开手指。我现在拥有的是用户需要向左滑动，然后在移除手指的情况下向右滑动。有什么想法可以在不移开手指的情况下实现这一目标。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:13:51.607

使用`UIPanGestureRecognizer`并跟踪该`.x`值并自己进行数学运算，以确定手指是否距离原点足够远（将原点存储为变量），然后距离原点足够远。

此外，您可以使用`UITouchesMoved`并获取`.x`.`touch`

# ruby-on-rails-3 - GoogleVisualr gem，未定义的方法 to_js

> ID：14328975
> 
> 赞同：0
> 
> 时间：2013-01-14T23:57:09.153
> 
> 标签：ruby-on-rails-3, google-visualization

我正在使用 gem“google_visualr”来绘制一些直方图。我拿了一个[示例代码](http://googlevisualr.herokuapp.com/examples/interactive/bar_chart)并尝试运行它，但我收到以下消息：undefined method `to_js' for nil:NilClass

我的控制器：

```
 def bar_chart

data_table = GoogleVisualr::DataTable.new
data_table.new_column('string', 'Year')
data_table.new_column('number', 'Sales')
data_table.new_column('number', 'Expenses')
data_table.add_rows(4)
data_table.set_cell(0, 0, '2004')
data_table.set_cell(0, 1, 1000)
data_table.set_cell(0, 2, 400)
data_table.set_cell(1, 0, '2005')
data_table.set_cell(1, 1, 1170)
data_table.set_cell(1, 2, 460)
data_table.set_cell(2, 0, '2006')
data_table.set_cell(2, 1, 660)
data_table.set_cell(2, 2, 1120)
data_table.set_cell(3, 0, '2007')
data_table.set_cell(3, 1, 1030)
data_table.set_cell(3, 2, 540) 

opts = { :width => 400, :height => 240, :title => 'Company Performance', vAxis: {title: 'Year', titleTextStyle: {color: 'red'}} }

@chart = GoogleVisualr::Interactive::BarChart.new(data_table, opts) 

end 
```

我的 index.html.erb：

```
<script src='http://www.google.com/jsapi'></script> 
  <div id='chart'></div><%= render_chart @chart, 'chart' %> 
```

我的错误在哪里？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:15:23.733

你在点击 http://localhost:3000/[controller_name]/bar_chart 吗？

我相信你不是，你可能正在点击 controller#show 动作，这就是为什么视图找不到@chart（nil 类）。

# ios - 将数组内容写入文件

> ID：14328978
> 
> 赞同：4
> 
> 时间：2013-01-14T23:57:12.880
> 
> 标签：ios, objective-c, nsarray

我整天都在使用这里的答案来解决这个问题，但我找不到适合我的解决方案，所以我想我会寻求帮助：

我有一组从实体中提取的对象。

我要做的就是将对象写入文件。

到目前为止，我想出的是：

```
 NSLog(@" Exported Records: %i", [exportArray count]); 
    // the count here is 4 records.
    //Each record has about 8 elements. 
//I'm just trying to get this working with the first two elements right now

        NSString *writeString = nil;
        NSError *error = nil;
        int i = 0;
        NSString *key = nil;
        NSString *tempString = nil;
        for (i=0; i<[exportArray count]; i++)
        {
            tempString = [tempString stringByAppendingString: @" \n "];

            for (int j=0; j<3; j++)
            {
                if (j == 0)
                {
                    key = [[exportArray objectAtIndex:i]  valueForKey:@"title"];
                    //[NSString stringWithFormat:tempString2, [[exportArray objectAtIndex:i]  valueForKey:@"title"]];
                }
                if (j == 1)
                {
                    key = [[exportArray objectAtIndex:i]  valueForKey:@"username"];
                    //[NSString stringWithFormat:tempString2, [[exportArray objectAtIndex:i]  valueForKey:@"username"]];
                }
                writeString = [NSString stringWithFormat:tempString, key];
            }
        }

        // Write to the file
        [writeString writeToFile:dataFile atomically:YES
                    encoding:NSUTF8StringEncoding error:&error];
        if (error)
        {
            NSLog(@"%@", error);
        } 
```

现在，我得到了最后一项，所以我覆盖了字符串。但是，必须有更好的方法来实现这一点。如果这里有另一个答案与我的问题相匹配，请告诉我，或者请发表一些想法。

更新

当我记录 exportArray 时，我得到了这个：

```
"<ItemEntity: 0x1ddf6560> (entity: ItemEntity; id: 0x1ddf46d0 <x-coredata://78FBC4A5-AE1A-4344-98AB-978126457D96/ItemEntity/p2> ; data: <fault>)",
    "<ItemEntity: 0x1ddf6800> (entity: ItemEntity; id: 0x1ddf46e0 <x-coredata://78FBC4A5-AE1A-4344-98AB-978126457D96/ItemEntity/p2051> ; data: <fault>)",
    "<ItemEntity: 0x1ddf6860> (entity: ItemEntity; id: 0x1ddf45d0 <x-coredata://78FBC4A5-AE1A-4344-98AB-978126457D96/ItemEntity/p3075> ; data: <fault>)",
    "<ItemEntity: 0x1ddf68c0> (entity: ItemEntity; id: 0x1ddf45e0 <x-coredata://78FBC4A5-AE1A-4344-98AB-978126457D96/ItemEntity/p5124> ; data: <fault>)"
) 
```

当我记录实际值时：

```
NSLog(@" Exported titles: %@", [exportArray valueForKey:@"title"]);
NSLog(@" Exported usernames: %@", [exportArray valueForKey:@"username"]); 
```

我得到正确的结果。我只是不知道如何将这些和其他属性联系在一起..

```
 Exported titles: (
    1,
    2,
    4,
    6
)
  Exported usernames: (
    ellis,
    david,
    bea,
    ian
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T00:04:26.230

如果您`NSDictionaries`的数组中只有一个，您可以使用`writeToFile:atomically:`它将以`.plist`格式保存文件（这比 CSV 更容易阅读）。

查看[NSArray 的 Apple Docs和](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)[plists](http://en.wikipedia.org/wiki/Property_list)上的一篇好文章。

所以你最终会拥有：

```
[exportArray writeToFile:fileName atomically:YES]; 
```

* * *

**编辑：**您不能将核心数据对象保存到文件中。因此，您要做的是仅使用所需数据创建一个临时数组，然后将其写入文件。

```
NSMutableArray* arrayToSave = [NSMutableArray arrayWithCapacity:exportArray.count];
[exportArray enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSDictionary* exportDict = [NSDictionary dictionaryWithObjectsAndKeys:
                                [obj objectForKey:@"username"], @"username",
                                [obj objectForKey:@"title"], @"title", nil];
    [arrayToSave addObject:exportDict];
}];

[arrayToSave writeToFile:fileName atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T23:59:06.847

用这个，

```
[exportArray writeToFile:dataFile atomically:YES]; 
```

`NSArray`有办法`writeToFile:`做到这一点。在此处查看[文档。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/writeToFile%3aatomically%3a)如果数组中没有自定义对象，这可以正常工作。

如果您只想保存标题或用户名（即使它在数组中有自定义对象），您可以这样做：

```
NSArray *array1 = [exportArray valueForKey:@"title"];
[array1 writeToFile:dataFile atomically:YES]; 
```

或者

```
NSArray *array2 = [exportArray valueForKey:@"username"];
[array2 writeToFile:dataFile atomically:YES]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-15T00:05:12.733

```
[exportArray writeToFile: dataFile atomically:YES]; 
```

创建并写入`.plist`文件格式。

除非数组中有 plist 不支持的对象。

支持的对象是：属性列表对象``NSString`、`NSNumber`、`NSDate`、`NSData`和。`NSArray``NSDictionary`

`UItextField`并且`UItextView`不受 plist 格式的支持，因此这将不起作用。如果您要保存的只是其中的文本，请将文本放入数组中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T00:06:44.253

试试这个：

```
 NSMutableString *string = [NSMutableString string];
    for (NSDictionary* dict in exportArray) {
        for (NSString* key in [dict allKeys]) {
            NSObject* value = [dict objectForKey:key];
            [string appendFormat:@"%@ = %@\n", key, value];
        }
    }

    // Write to the file
    NSError* error = nil;
    [string writeToFile:dataFile atomically:YES encoding:NSUTF8StringEncoding error:&error];
    if (error)
        NSLog(@"%@", error); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-15T00:31:18.840

我会考虑先将其转换为 NSData，然后将其保存为二进制 plist 而不是人类可读的 plist，因为二进制 plist 的读取速度要快得多（我相信是 2-3 倍，但我不记得它是在哪个 WWDC 视频中解释的）。为此，您首先需要将 NSArray 转换为 NSData 对象：

（来源：[Rob Napier 对此 SO 问题的回答](https://stackoverflow.com/questions/1286212/how-to-convert-nsarray-to-nsdata)）

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:array];
// "Note that all the objects in array must conform to the NSCoding protocol."

NSString *error;
NSData *data = [NSPropertyListSerialization dataWithPropertyList:array
format:NSPropertyListBinaryFormat_v1_0 options:NULL error:&error]; 
```

然后您可以使用以下命令将 NSData 写入文件：

```
[data writeToFile:path atomically:YorN]; 
```

要读回它，然后使用：

```
NSData *rawdata = [[NSData alloc] initWithContentsOfFile:/*file*/];
NSData *arrayData = [NSPropertyListSerialization propertyListWithData:rawdata
options:NULL format:NULL error:&error];
NSArray *array = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

您只需要对非常大的 .plist 文件使用二进制进程，但了解它很方便。

# javascript - 结合文本输入类型jquery mobile

> ID：14328983
> 
> 赞同：0
> 
> 时间：2013-01-14T23:57:32.577
> 
> 标签：javascript, html, jquery-mobile

在此链接中：http: [//jquerymobile.com/demos/1.2.0/docs/forms/textinputs/](http://jquerymobile.com/demos/1.2.0/docs/forms/textinputs/)在底部有几种不同的文本输入类型。

现在我的问题是如何结合**电话**和**密码**类型？*tel*类型使用户能够在移动设备上显示数字键盘（键盘），如果该类型接收焦点而不是显示常规键盘。*密码*类型隐藏了用户键入的字符。*由于我网页上的密码仅由数字组成，如果我可以结合电话*类型和*密码*类型的功能，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T02:58:58.793

您可以使用`pattern="[0-9]*"`属性来实现这一点：

```
<input type="password" name="password" pattern="[0-9]*" id="password" value="" placeholder="Enter your numeric password"> 
```

它完全适用于 iOS。

# c++ - 双精度数的位表示

> ID：14328993
> 
> 赞同：0
> 
> 时间：2013-01-14T23:58:57.933
> 
> 标签：c++, floating-point, double

我做了这个程序，它按预期运行，以了解浮点数的位表示：

```
float x1=-675.78125;
int *pint1;
pint1=(int *)&x1;

for(int i=0;i<8*sizeof(float);i++)
{

if(*pint1&1)
{
    cout<<1;
    }
else
    cout<<0;
    *pint1>>=1;

} 
```

但它不适用于双倍：

```
double x=-675.78125;
int *pint;
pint=(int *)&x;

for(int i=0;i<8*sizeof(double);i++)
{

    if(*pint&1)
    {
        cout<<1;
        }
    else
        cout<<0;
        *pint>>=1;

    } 
```

你能解释一下为什么会这样吗？你会怎么做？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:04:32.643

您的第一个程序似乎可以工作而您的第二个程序没有工作的原因是，对于您的特定硬件，float 的大小与 int 相同，而 int 没有足够的空间容纳 a 中的所有位`double`。

但是您已经违反了严格的别名规则，因此，如果您真的想打印浮点类型的位，正确的方法是强制转换为`unsigned char*`然后迭代 char 的每一位，同时在每个位上递增指针底层浮点类型的字节。另请注意，在 big-vs-little endian 上，您的程序的结果可能会有所不同。

# workflow-foundation-4 - 在构建模板 TFS 2010 中浏览项目文件夹

> ID：14328994
> 
> 赞同：2
> 
> 时间：2013-01-14T23:59:03.790
> 
> 标签：workflow-foundation-4, tfsbuild, build-definition

我正在向我的自定义构建模板添加一个新参数。该参数几乎与 下的默认`Projects to Build`参数相同`Required -> Items to Build`。它只是显示一个对话框窗口，其中包含当前 TFS 项目下的文件夹列表。我无法弄清楚控件的类型是什么。我试过`FolderBrowserDialog`了，但它浏览的是计算机而不是 TFS 项目本身。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T00:54:32.603

您可以将此参数的编辑器设置为：

```
 Microsoft.TeamFoundation.Build.Controls.ServerFileBrowserEditor, Microsoft.TeamFoundation.Build.Controls 
```

或者

```
 Microsoft.TeamFoundation.Build.Controls.ServerFolderBrowserEditor, Microsoft.TeamFoundation.Build.Controls 
```

[有关详细步骤，请参阅我的博客](http://blog.jessehouwing.nl/2011/11/which-uieditors-are-available-for-team.html)。

所有这些类型都是`Internal`，因此您无法从自己的代码中引用它们或轻松查看它们。您可以将它们设置为`Editor`您在构建工作流程中创建的参数。您需要指定`Typename, Assemblyname`. 您可以在构建模板的元数据部分找到这些项目。

将您添加`argument`到工作流程中： ![将您的 <code>argument</code> 添加到工作流程中](../Images/aed6224a4bdc1ee128fb98819774895f.png)

打开元数据属性： ![打开元数据属性](../Images/ba42bb17cb8b8068240b851041ea1101.png)

为您的属性设置编辑器： ![为您的属性设置编辑器](../Images/87648916ca4f214f73eba40eb50f088c.png)

* * *

多文件夹选择对话框不是默认 UI 编辑器的一部分。你必须自己动手。要么使用 Reflector 查看现有编辑器的工作方式，要么使用 Reflection 调用现有编辑器作为新编辑器的一部分。

无论哪种方式，它都不会是漂亮的代码，但它会起作用。