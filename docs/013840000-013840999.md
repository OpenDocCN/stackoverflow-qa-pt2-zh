# StackOverflow 问答 13840000-13840999

# android - post方法到底是做什么的？

> ID：13840007
> 
> 赞同：125
> 
> 时间：2012-12-12T12:39:43.640
> 
> 标签：android

我遇到了一个非常奇怪的功能。

当我试图在主线程上运行动画时，它没有启动。当我使用运行所述动画时

```
getView().post(new Runnable() {
            @Override
            public void run() {
                getView().startAnimation(a);
            }
        }); 
```

它确实开始了。

我已经`CurrentThread`在开始动画之前打印了并且都打印了`main`。

显然，我在这里遗漏了一些东西，因为两者都应该在主线程上启动动画......我的猜测是，随着 post 将任务添加到队列中，它从更“正确的时间”开始，但我很想知道在这里更深入地发生了什么。

编辑：让我把事情弄清楚 - 我的问题是，为什么在 post 上启动动画会导致它启动，而在主线程上启动动画时却不会。

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-12-12T12:56:46.843

**post** :post 导致 Runnable 被添加到消息队列中，

**Runnable ：**表示可以执行的命令。通常用于在不同的线程中运行代码。

**run ()** ：开始执行类代码的活动部分。当使用实现 Runnable 的类创建的线程启动时调用此方法。

```
getView().post(new Runnable() {

         @Override
         public void run() {
             getView().startAnimation(a);
         }
     }); 
```

**代码**：`getView().startAnimation(a);`

在你的代码中，

post 导致 Runnable（**代码**将在不同的线程中运行）添加消息队列。

*因此当从messageQueue*中获取 startAnimation 时，它将在新线程中触发

 *[编辑 1]

**为什么我们使用新线程而不是 UI 线程（主线程）？**

用户界面线程：

*   应用程序启动时，会自动创建 Ui Thread

*   它负责将事件分派给适当的小部件，这包括绘图事件。

*   它也是您与 Android 小部件交互的线程

> 例如，如果您触摸屏幕上的 a 按钮，UI 线程会将触摸事件分派给小部件，小部件进而设置其按下状态并将无效请求发送到事件队列。UI 线程将请求出列并通知小部件重绘自身。

如果用户按下将执行 longOperation 的按钮会发生什么？

```
((Button)findViewById(R.id.Button1)).setOnClickListener(           
             new OnClickListener() {        
        @Override
    public void onClick(View v) {
            final Bitmap b = loadImageFromNetwork();
            mImageView.setImageBitmap(b);
}
}); 
```

**用户界面冻结。该程序甚至可能崩溃。**

```
public void onClick(View v) {
  new Thread(new Runnable() {
    public void run() {
        final Bitmap b = loadImageFromNetwork();
        mImageView.setImageBitmap(b);
    }
  }).start();
} 
```

**它打破了从不直接从工作线程更新 UI**的 android 规则

 ****Android 提供了几种从其他线程访问 UI 线程的方法。**

*   Activity.runOnUiThread（可运行）
*   View.post（可运行）
*   View.postDelayed（可运行，长）
*   处理程序

如下图，

**View.post（可运行）**

```
public void onClick(View v) {
  new Thread(new Runnable() {
    public void run() {
      final Bitmap b = loadImageFromNetwork();
      mImageView.post(new Runnable() {
        public void run() {
          mImageView.setImageBitmap(b);
        }
      });
    }
  }).start();
} 
```

**处理程序**

```
final Handler myHandler = new Handler(Looper.getMainLooper());

(new Thread(new Runnable() {

    @Override
    public void run() {
       final Bitmap b = loadImageFromNetwork();
      myHandler.post(new Runnable() {                           

        @Override
        public void run() {
           mImageView.setImageBitmap(b);
          }
        });
      }
    })).start();                
} 
```

![在此处输入图像描述](../Images/8c1b24e921e832756dd0654e523034eb.png)

欲了解更多信息

[http://android-developers.blogspot.com/2009/05/painless-threading.html](http://android-developers.blogspot.com/2009/05/painless-threading.html)

[http://www.aviyehuda.com/blog/2010/12/20/android-multithreading-in-a-ui-environment/](http://www.aviyehuda.com/blog/2010/12/20/android-multithreading-in-a-ui-environment/)

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-10-22T15:54:46.973

这是在 onCreate 还是 onCreateView 上完成的？如果是这样，则应用程序可能未处于视图附加到窗口的状态。许多基于 View 指标的算法可能无法正常工作，因为可能尚未计算 View 的测量值和位置等内容。Android 动画通常要求它们运行 UI 数学

View.post 实际上在 View 的消息循环中对动画进行排队，因此一旦视图附加到窗口，它就会执行动画而不是手动执行动画。

您实际上是在 UI 线程上运行的东西，但在不同的时间

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-12-12T12:47:45.543

看看[这里](https://stackoverflow.com/questions/10558208/android-whats-the-difference-between-activity-runonuithread-and-view-post)以获得一个好的答案。view.post() 与 handler.post() 几乎相同。它进入主线程队列并在其他待处理任务完成后执行。如果您调用 activity.runOnUiThread() ，它将立即在 UI 线程上调用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-15T06:09:00.903

我认为问题可能是您调用 post() 方法的生命周期方法。你是在 onCreate() 中做的吗？如果是这样，请查看我在活动的 onResume() 文档中找到的内容：

> onResume()
> 
> 在 API 级别 1 中添加 void onResume () 在 onRestoreInstanceState(Bundle)、onRestart() 或 onPause() 之后调用，以便您的 Activity 开始与用户交互。**这是开始动画**、打开独占访问设备（如相机）等的好地方。

[https://developer.android.com/reference/android/app/Activity.html#onResume()](https://developer.android.com/reference/android/app/Activity.html#onResume())

因此，正如 Joe Plante 所说，在您调用 post() 时，视图可能还没有准备好开始动画，因此请尝试将其移至 onResume()。

PD：实际上，如果您确实将代码移动到 onResume() ，那么我认为您可以删除 post() 调用，因为您已经在 ui 线程中并且视图应该准备好开始动画了。***

# iphone - 内容宽度未填满手机屏幕

> ID：13840011
> 
> 赞同：1
> 
> 时间：2012-12-12T12:39:57.853
> 
> 标签：iphone, css, responsive-design

我正在努力使我的设计对移动设备友好。我所拥有的是，当我在[http://ipadpeek.com/](http://ipadpeek.com/)（伟大的工具！）上查看设计时，一切都非常合适，尽管当我通过我的 iPhone 4 实际查看它时，内容只占页面的 80% 左右，而剩下的 20% 是白色背景。

只有一个元素看起来适合整个宽度，并且具有以下样式：

```
<div class="text-elements">
<h2>Your website can achieve...</h2>
</div>

.text-elements {
    float: none;
    margin: 0;
    padding: 75px 10px;

    h2 {
      font-size: 4em;
      width: 100%;
    } 
} 
```

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T13:35:38.850

仅供参考，大多数在线 iPad 风格的工具，例如[http://ipadpeek.com/](http://ipadpeek.com/)无论如何都不会发现任何这些溢出问题。

最后我发现问题是至少有一个或多个 div 设置了明确的宽度，但很难找到罪魁祸首！

**给遇到此问题的其他人的提示：**

1.  如果您知道任何设计都是响应式的，请在您的主样式表中的任何显式宽度 div 上使用`max-width: Xpx`, `width: 100%`，以避免它们在以后的课程中成为罪魁祸首。

2.  在项目上使用 width: 100% 时，请确保向内部 div 添加任何其他填充（特别是如果它以像素为单位），或者考虑它，例如`width: 95%`, `padding: 2.5%`.

3.  尝试`overflow: hidden`一些包含您的内容的主要包装器，以查看问题来自何处。

# c++ - OpenCV：如何可视化深度图像

> ID：13840013
> 
> 赞同：24
> 
> 时间：2012-12-12T12:40:09.267
> 
> 标签：c++, opencv, visualization, kinect, depth

我正在使用一个数据集，其中包含图像，其中每个像素都是 16 位无符号整数，以毫米为单位存储该像素的深度值。我试图通过执行以下操作将其可视化为灰度深度图像：

```
cv::Mat depthImage; 
depthImage = cv::imread("coffee_mug_1_1_1_depthcrop.png", CV_LOAD_IMAGE_ANYDEPTH | CV_LOAD_IMAGE_ANYCOLOR ); // Read the file 
depthImage.convertTo(depthImage, CV_32F); // convert the image data to float type   
namedWindow("window");
float max = 0;
for(int i = 0; i < depthImage.rows; i++){
    for(int j = 0; j < depthImage.cols; j++){
        if(depthImage.at<float>(i,j) > max){
            max = depthImage.at<float>(i,j);
        }
    }   
}
cout << max << endl;

float divisor = max / 255.0;
cout << divisor << endl;
for(int i = 0; i < depthImage.rows; i++){
    for(int j = 0; j < depthImage.cols; j++){
        cout << depthImage.at<float>(i,j) << ", ";
        max = depthImage.at<float>(i,j) /= divisor;
        cout << depthImage.at<float>(i,j) << endl;
    }   
}

imshow("window", depthImage);
waitKey(0); 
```

但是，它只显示两种颜色，这是因为所有值都接近，即在 150-175 范围内 + 显示为黑色的小值（见下文）。

![rgb 图像](../Images/0dea3bf82401ed4f50c997af3ae1fee8.png) ![灰度图像](../Images/258402ad3683870a0af9f8c6754636be.png)

有没有办法对这些数据进行标准化，使其显示各种灰度级以突出这些小的深度差异？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-12T15:02:20.850

根据[文档](http://opencv.willowgarage.com/documentation/cpp/highgui_user_interface.html?highlight=imshow#imshow)，函数 imshow 可用于多种图像类型。它支持 16 位无符号图像，因此您可以使用

```
cv::Mat map = cv::imread("image", CV_LOAD_IMAGE_ANYCOLOR | CV_LOAD_IMAGE_ANYDEPTH);
cv::imshow("window", map); 
```

在这种情况下，图像值范围从范围 [0, 255*256] 映射到范围 [0, 255]。

如果您的图像仅包含此范围的较低部分的值，您将观察到模糊的图像。如果要使用整个显示范围（从黑色到白色），则应调整图像以覆盖预期的动态范围，一种方法是

```
double min;
double max;
cv::minMaxIdx(map, &min, &max);
cv::Mat adjMap;
cv::convertScaleAbs(map, adjMap, 255 / max);
cv::imshow("Out", adjMap); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-12T15:43:17.823

添加到 samg 的答案中，您可以扩大显示图像的范围。

```
double min;
double max;
cv::minMaxIdx(map, &min, &max);
cv::Mat adjMap;
// expand your range to 0..255\. Similar to histEq();
map.convertTo(adjMap,CV_8UC1, 255 / (max-min), -min); 

// this is great. It converts your grayscale image into a tone-mapped one, 
// much more pleasing for the eye
// function is found in contrib module, so include contrib.hpp 
// and link accordingly
cv::Mat falseColorsMap;
applyColorMap(adjMap, falseColorsMap, cv::COLORMAP_AUTUMN);

cv::imshow("Out", falseColorsMap); 
```

结果应该类似于下面的结果

![在此处输入图像描述](../Images/6d97da770e1eba87017ccd4ea4926464.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T12:48:41.890

如果`imshow`输入具有浮点数据类型，则该函数假定像素值在 [0; 1]范围。结果，所有大于 1 的值都显示为白色。

所以你不需要除以`divisor`255。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-25T03:25:49.163

添加到 Sammy 的答案中，如果原始范围颜色为 [-min,max] 并且您想要执行直方图均衡并显示深度颜色，则代码应如下所示：

```
double min;
double max;
cv::minMaxIdx(map, &min, &max);
cv::Mat adjMap;
// Histogram Equalization
float scale = 255 / (max-min);
map.convertTo(adjMap,CV_8UC1, scale, -min*scale); 

// this is great. It converts your grayscale image into a tone-mapped one, 
// much more pleasing for the eye
// function is found in contrib module, so include contrib.hpp 
// and link accordingly
cv::Mat falseColorsMap;
applyColorMap(adjMap, falseColorsMap, cv::COLORMAP_AUTUMN);

cv::imshow("Out", falseColorsMap); 
```

# java - 在消息驱动 Bean (MDB) 中捕获异常

> ID：13840023
> 
> 赞同：5
> 
> 时间：2012-12-12T12:40:34.390
> 
> 标签：java, jpa, eclipselink, glassfish-3

我必须如何处理 mdb 中的异常？我有一种有趣的感觉，异常发生在 try catch 块之后，所以我无法捕获并记录它。Glassfish v3 决定重复整个消息。它运行到一个无限循环并在硬盘驱动器上写入大量日志文件。

我正在使用 Glassfishv3.01 + Eclipselink 2.0.1

```
public class SaveAdMessageDrivenBean implements MessageListener {

    @PersistenceContext(unitName="QIS") 
    private EntityManager em;

    @Resource
    private MessageDrivenContext mdc;

    public void onMessage(Message message) {
        try {
            if (message instanceof ObjectMessage) {
                ObjectMessage obj = (ObjectMessage)message;
                AnalyzerResult alyzres = (AnalyzerResult)obj.getObject();
                save(alyzres);
            }
        } catch (Throwable e) { 
            mdc.setRollbackOnly();
            log.log(Level.SEVERE, e);
        }
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    private void save(AnalyzerResult alyzres) throws PrdItemNotFoundException {

       Some s = em.find(Some.class, somepk);
       s.setSomeField("newvalue");

       // SQL Exception happens after leaving this method because of missing field for ex.
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:19:10.583

您遇到了消息中毒的严重案例...

我看到的主要问题是：

*   您正在直接调用您的`save()`方法：这意味着容器无法在方法`onMessage()`周围注入正确的事务处理代理`save`
*   在任何情况下，该`save()`方法都应该具有 `@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)`以便在单独的事务中提交，否则它将加入`onMessage`事务（默认为`REQUIRED`）并绕过您的异常处理代码，在成功执行后提交`onMessage`

我要做的是：

将该方法移动`save`到一个新的无状态会话 bean：

```
@Stateless
public class AnalyzerResultSaver
{
    @PersistenceContext(unitName="QIS") 
    private EntityManager em;

    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    private void save(AnalyzerResult alyzres) throws PrdItemNotFoundException {
        Some s = em.find(Some.class, somepk);
        s.setSomeField("newvalue");
        // SQL Exception happens after leaving this method
    }
} 
```

在你的 MDB 中注入这个 bean：

```
public class SaveAdMessageDrivenBean implements MessageListener {

    @Inject  
    private AnalyzerResultSaver saver;

    @Resource
    private MessageDrivenContext mdc;

    public void onMessage(Message message) {
        try {
            if (message instanceof ObjectMessage) {
                ObjectMessage obj = (ObjectMessage)message;
                AnalyzerResult alyzres = (AnalyzerResult)obj.getObject();
                saver.save(alyzres);
            }
        } catch (Throwable e) { 
            mdc.setRollbackOnly();
            log.log(Level.SEVERE, e);
        }
    }
} 
```

另一个提示：在此代码中，消息中毒仍然存在。现在它源自调用`mdc.setRollbackOnly();`.

我建议在这里记录异常并将消息传输到毒队列，从而防止容器无限地重新提交消息。

**更新：**

“毒药队列”或“错误队列”只是保证您的（希望可恢复的）丢弃消息不会完全丢失的一种手段。它在无法保证消息数据正确性的集成场景中大量使用。

设置有害队列意味着定义目标队列或主题并将“坏”消息重新传递到该目标。

操作员应定期检查此队列（通过专用应用程序）并修改消息并重新提交到“好”队列，或者丢弃消息并要求重新提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:37:57.630

我相信您发布的代码大部分都可以。

您的使用

```
 @TransactionAttribute(TransactionAttributeType.REQUIRED) 
```

被完全忽略，因为这个（和大多数其他）注释只能应用于业务方法（包括 onMessage）。不过这并不重要，因为您的 onMessage 方法会免费获得一个隐式方法。

这导致消息处理在 Java EE 容器中是事务性的。如果事务因任何原因失败，则容器需要尝试再次传递消息。

现在，您的代码正在从 save 方法中捕获异常，这很好。但是随后您将明确标记事务以进行回滚。这具有告诉容器消息传递失败并且它应该重试的效果。

因此，如果您删除：

```
 mdc.setRollbackOnly(); 
```

容器将停止尝试重新传递消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:56:44.353

如果我没记错的话，你让容器处理交易。这样，实体管理器将在方法完成后将要刷新的操作排队，这就是方法完成后出现异常的原因。

直接使用`em.flush()`作为方法的最后一步将执行事务的所有相关查询，在那里抛出异常，而不是稍后在`flush()`提交事务时由容器生成时抛出异常。

# android - 在键盘上按下搜索后，Android 在 ActionBar(Sherlock) 中折叠 EditText

> ID：13840027
> 
> 赞同：0
> 
> 时间：2012-12-12T12:40:39.257
> 
> 标签：android, actionbarsherlock, android-edittext

我的应用程序中出现了一些奇怪的（与键盘相关的）问题，这是由于我以编程方式`EditText`折叠`ActionBarSherlock`.

这就是我正在做的事情：

```
if(searchMenuItem!=null){
    searchMenuItem.collapseActionView();
} 
```

有谁知道是否有任何其他方式来折叠 ActionBar？

**编辑：**

我注意到当我单击屏幕左上角的应用程序图标时会发生同样的问题。在这里被`collapseActionView`隐式调用？我怎么知道这个问题是否是由我的代码的某些未知部分引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:43:30.857

这个怎么样：

```
if(searchMenuItem!=null && searchMenuItem.getActionView() != null){
     searchMenuItem.setActionView(null);
} 
```

（当然，当按下相关菜单项时，您需要再次设置它）。

# sql - 物理驱动器文件与 ASP.NET MVC 中的数据库文件匹配

> ID：13840028
> 
> 赞同：-4
> 
> 时间：2012-12-12T12:40:38.680
> 
> 标签：sql, asp.net-mvc

我的网站上有一个上传按钮，该上传按钮将用户选择的文件保存在我的硬盘上（目前），它还将名称（使用 Guid.NewGuid）+ 友好名称（实际名称）保存在数据库。

该文件保存在 Content/Usercontent （Guid.NewGuid 名称），但我想要的是，当您从数据库中删除一行时，地图 Content/Usercontent 中的文件也被删除，我该怎么做使用 ASP.NET MVC

编辑：为什么我被否决了？至少告诉我我应该改进我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:56:01.120

只要您连接到名为 OnDelete 的事件（例如），您就可以将其与删除该关联文件的例程同步。

我将创建一个类，它是从数据库中添加和删除文件的唯一管理器。当你上传文件时我会做的是调用类`documentMgr.Save(string fileName, string serverPath, byte[] fileContents)`。

在 DocumentManager 类上，我将创建一个名为 FileDeleted 的事件，其中 deegate 采用以下参数（`object sender, FileEventArgs fileArg`s）并在该类上创建一个事件处理程序，`OnFileDeleted(object sender, FileEventArgs fileArgs)`并在调用 DocumentManager.DeleteDocument(string name, string whatever) 时引发 OnFileDeleted 事件。

事件处理程序可以从 where then 处理（如果事件是公共的）。

您可以在 DocumentManager 的构造函数中连接事件，然后使用 dea 调用自动删除文件，通过使用事件，您可以选择做更多事情并在以后扩展功能。

让我知道你是怎么办的

# node.js - 使用 node.js 和 websockets 从移动设备到桌面的视频流

> ID：13840030
> 
> 赞同：1
> 
> 时间：2012-12-12T12:40:46.903
> 
> 标签：node.js, websocket, opera

我们正在使用以下示例在我们的一个应用程序中执行视频流 POC：http: [//francisshanahan.com/index.php/2011/stream-a-webcam-using-javascript-nodejs-android-opera-mobile-网络套接字和 html5/](http://francisshanahan.com/index.php/2011/stream-a-webcam-using-javascript-nodejs-android-opera-mobile-web-sockets-and-html5/)

POC 使用 Node.js 和 websockets 将实时视频从 Mobile（使用 Opera Mobile 浏览器）流式传输到桌面上的 Opera 浏览器。该应用程序在几个月前运行良好。最近我们用 Android 4.1 Jellybean 格式化了移动操作系统并重新安装了 Opera Mobile。

使用相同的浏览器设置，视频流现在无法在移动设备上运行。不过，流式传输可以从同一台 PC 上的另一个 Opera 浏览器实例进行。

通过日志我们可以看到消息从服务器成功发送，但是 onmessage 事件在客户端的接收端根本没有被触发。

目前我们使用的是 Opera 12，它同时支持 Websockets 和 getUserMedia 用于流式传输原生网络摄像头。我们尝试了其他适用于移动设备和桌面的不同 Opera 浏览器，但没有成功。

有什么建议让这个 woking 吗？

谢谢

# php - 数组内部的多个 foreach 循环

> ID：13840034
> 
> 赞同：0
> 
> 时间：2012-12-12T12:40:58.447
> 
> 标签：php, html, forms

我有一个看起来像这样的数组：

```
$array = array(
   'val1' => array('en'=>'Option Title 1','a'=>1),
   'val2' => array('en'=>'Option Title 2','b'=>2),
   'val3' => array('en'=>'Option Title 3','c'=>3)
); 
```

我尝试运行此代码来生成一个选择框：

```
function setOptions($array){
    echo '<select name="select">';
    foreach($array as $key_parent => $val_parent){
        foreach($val_parent as $key => $val){
            if($key !== 'en'){
                $option_value = $val;
            }elseif($key == 'en'){
                $option_title = $val;
            }
        }
        echo '<option value"'.$option_value.'">'.$option_title.'</option>';
    }
    echo '<select>';
} 
```

这打印出我的预期。

```
<select name="select">
  <option value="1">Option Title 1</option>
  <option value="2">Option Title 2</option>
  <option value="3">Option Title 3</option>
</select> 
```

但是，当我打印表单提交的返回值时`$_POST['select']`，我得到`Option Title 1`、`Option Title 2`或`Option Title 3`，`1,2 or 3`这不是我认为很奇怪的。

所以这就留下了一个问题，当所讨论的值之一的键未知（a、b 或 c）时，如何获取 val1、val2、val3 内部的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:43:13.770

你错过了价值属性相等。

```
function setOptions($array){
    echo '<select name="select">';
    foreach($array as $key_parent => $val_parent){
        foreach($val_parent as $key => $val){
            if($key !== 'en'){
                $option_value = $val;
            }elseif($key == 'en'){
                $option_title = $val;
            }
        }
        echo '<option value="'.$option_value.'">'.$option_title.'</option>';
    }
    echo '<select>';
} 
```

# javascript - JQuery Mobile 数据角色不适用于 div

> ID：13840035
> 
> 赞同：2
> 
> 时间：2012-12-12T12:41:04.263
> 
> 标签：javascript, jquery, ajax

我对 JQuery 和 Javascript 都很陌生。我有一个 XML 文件，其中存储了一些产品，我想将这些产品显示在可折叠 div 中作为可折叠 div。我有以下 Javascript 文件：

```
$(document).ready(function()
{
$.ajax({
type: "GET",
url: "producten.xml",
dataType: "xml",
success: parseXml
});
});

function parseXml(xml)
{
var container = document.getElementById("behuizingen");
$(xml).find("behuizing").each(function()
{
var release = document.createElement("div");
release.setAttribute('data-role', 'collapsible');
release.innerHTML = "<h3>" + $(this).find('naam').text() + "</h3>";
container.appendChild(release);
 });
} 
```

这应该获取我所有的产品名称并将它们放在一个可折叠的 div 中，它确实做到了，但它将名称显示为纯 HTML 文本而不是 JQuery Mobile 可折叠 div。这些是我在 HTML 文件中的导入：

```
<link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile.structure-1.2.0.css" />

<link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.css" />

<link rel="stylesheet" href="styles/style.css" />

<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>

<script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script src="styles/winkel.js"></script> 
```

还有一件事，如果我从主页开始并导航到显示产品的页面，它不会显示产品，我必须刷新（ctrl+f5）才能显示它们。如果有人可以帮助我解决这个问题，我将非常感激，因为我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:15:56.750

当您在页面初始化后通过 ajax 附加一个 jquery 移动小部件时，您必须 .trigger("create").ie

```
$( ...new markup that contains widgets... ).appendTo( ".ui-page" ).trigger( "create" ); 
```

为了更好地理解学习[这个](http://jquerymobile.com/test/docs/pages/page-scripting.html)文档。

# wc - 如何制作自己的 wc 实用程序版本？

> ID：13840038
> 
> 赞同：1
> 
> 时间：2012-12-12T12:41:13.480
> 
> 标签：wc

您知道如何制作自己的 wc 实用程序或任何可以帮助您制作的教程吗？我们必须为学校制作自己的 wc 实用程序： - 使用命令行选项 - 从文件中读取文本 - 计算文件中的字符、单词和行数， - 使用 fork() 创建子进程

我只想说我不想让任何人为我做这件事，只是帮助我在哪里可以得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:44:37.460

最有用的例子可能是 K&R 在“The C Programming Language”中提供的解决方案。[这里](http://www.cs.tufts.edu/~nr/noweb/examples/wc.html)也有一个现成的解决方案（用 C 语言完成，带有文学编程）。

我无法理解为什么要使用 fork() 创建子进程。做什么的？

# javascript - 无法从javascript中的json获取价值

> ID：13840043
> 
> 赞同：1
> 
> 时间：2012-12-12T12:41:20.553
> 
> 标签：javascript, json

我在 JavaScript 中有一个函数：

```
function login() {
    user=document.getElementById("user_id").value;
    pass=document.getElementById("password").value;
    params="user="+user+"&pass="+pass;
    url="check_login.php";

    if(window.XMLHttpRequest) {
        var http=new XMLHttpRequest();
    } else {
        var http=new ActiveXObject("Microsoft.XMLHTTP");
    }
    var http=new XMLHttpRequest();

    http.onreadystatechange=function(){
        if(http.status==200 && http.readyState==4) {
            text=http.responseText;
            alert(text.status);
        }
    }
    http.open("POST",url,true);
    http.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    http.send(params);
    return false;
} 
```

服务器端返回的 json 数据如下：

```
$return=array("status"=>"true","user"=>$user,"fname"=>$fname,"middle_name"=>$middle_name,"lname"=>$lname);
$return=json_encode($return);
echo $return; 
```

现在警报应该使警报为真，但它不起作用，我希望我能让你清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:45:34.230

在 JSON 对象中的 for 编码字符串`JSON.parse(text)`之前使用`alert(text.status)`

```
http.onreadystatechange=function(){
    if(http.status==200 && http.readyState==4) {
        text=JSON.parse(http.responseText);
        alert(text.status);
    }
} 
```

# java - Java Datanucleus 是否可以将 sql in 运算符与 JDOQL 一起使用

> ID：13840047
> 
> 赞同：1
> 
> 时间：2012-12-12T12:41:36.460
> 
> 标签：java, sql, datanucleus, jdoql

我是数据核的新手。

是否可以在 datanucleus 的 operator ind JDOQL 中使用 Sql？

我想使用[declerative JDOQL](http://www.datanucleus.org/products/datanucleus/jdo/jdoql.html)，但我不知道如何创建一个查询来执行[SQL In Operater](http://www.w3schools.com/sql/sql_in.asp)所做的事情。

SQL 查询看起来像这样：

```
SELECT * FROM table WHERE id IN (1,2,3,4,5) 
```

感谢您提供有用的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:40:31.013

为什么 JDOQL 会允许一些随机的 SQL？JDOQL 使用**Java 语法**，因此最合乎逻辑的 Java 语法是*Collection.contains*所以你传入一个包含这 5 个元素的 Collection 参数，然后执行

```
:param.contains(id) 
```

显然，查看 JDO 规范会告诉您这一点，而 DataNucleus 并没有什么不同。

# java - Swing GUI，输出不显示

> ID：13840048
> 
> 赞同：-2
> 
> 时间：2012-12-12T12:41:39.650
> 
> 标签：java, swing

我必须构建一个基于 GUI 的应用程序来找到两个节点之间的最短路径。

图表将由用户输入。然后，用户将使用节点和边绘制图形。在鼠标单击时，将创建一个节点。将鼠标从一个节点拖到另一个节点时，将创建一个加权边缘。然后用户将输入开始节点和结束节点。然后将标记最短路径，但输出不显示。

错误是什么？

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseEvent;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JPanel;

class plus extends JFrame {
    int radius = 10, i = 0, x, y, x1, y1, x2, y2;
    double dis;
    int[] a = new int[100];
    int[] b = new int[100];

    JPanel panel2 = new JPanel();
    JButton B1 = new JButton("Enter Nodes");
    JButton B2 = new JButton("Draw Edges");
    JButton B3 = new JButton("Start Node");
    JButton B4 = new JButton("End Node");
    JButton B5 = new JButton("Run");
    JButton B6 = new JButton("Clear");
    JButton button[] = new JButton[100];
    JInternalFrame jInternalFrame1 = new JInternalFrame();

    public plus() {
        setTitle("Shortest Path Finding");
        setSize(700, 600);
        addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });
        Container contentPane = getContentPane();
        contentPane.add(jInternalFrame1, "Center");
        contentPane.add(panel2, "South");
        jInternalFrame1.setVisible(true);
        jInternalFrame1.setBackground(Color.white);
        panel2.add(B1);
        panel2.add(B2);
        panel2.add(B3);
        panel2.add(B4);
        panel2.add(B5);
        panel2.add(B6);
        B1.addActionListener(new B1Listener());
        B2.addActionListener(new B2Listener());
        /*B3.addActionListener(new B3Listener());
        B4.addActionListener(new B4Listener());
        B5.addActionListener(new B5Listener());*/
        B6.addActionListener(new B6Listener());
    }

    class drawedge {
        public void de() {
            jInternalFrame1.addMouseListener(new java.awt.event.MouseAdapter() {
                @Override
                public void mousePressed(java.awt.event.MouseEvent event) {
                    jInternalFrame1MousePressed(event);
                }

                @Override
                public void mouseReleased(java.awt.event.MouseEvent event) {
                    jInternalFrame1MouseReleased(event);
                }
            });
        }

        public void jInternalFrame1MousePressed(MouseEvent e) {
            for (int l = 0; l < i; l++) {
                if (e.getX() == a[l] && e.getY() == b[l]) {
                    x1 = a[l];
                    y1 = b[l];
                    break;
                }
            }
            x1 = e.getX();
            y1 = e.getY();
        }

        public void jInternalFrame1MouseReleased(MouseEvent e) {
            for (int m = 0; m < i; m++) {
                if (e.getX() == a[m] && e.getY() == b[m]) {
                    x2 = a[m];
                    y2 = b[m];
                    x2 = e.getX();
                    y2 = e.getY();
                    Graphics g = getGraphics();
                    g.drawLine(x1 - 10, y1 + 20, x2 - 10, y2 + 20);
                    dis = ((x2 - x1) * (x2 - x1) - (y2 - y1) * (y2 - y1)) / 10;
                    if (dis < 0) {
                        dis = dis * -1;
                    }
                    dis = Math.floor(Math.sqrt(dis));
                    g.drawString("" + dis, (x2 + x1) / 2, (y2 + y1) / 2);
                }
            }
        }
    }

    class drawnode {
        drawnode() {
            jInternalFrame1.setVisible(true);
            jInternalFrame1.getContentPane().setLayout(null);
        }

        public void dn() {
            jInternalFrame1.addMouseListener(new java.awt.event.MouseAdapter() {
                @Override
                public void mouseClicked(java.awt.event.MouseEvent evt) {
                    jInternalFrame1MouseClicked(evt);
                }
            });
        }

        private void jInternalFrame1MouseClicked(MouseEvent e) {
            x = e.getX();
            y = e.getY();
            button[i] = new JButton();
            button[i].setBounds(x - 7, y - 30, 50, 30);
            jInternalFrame1.getContentPane().add(button[i]);
            button[i].setText(Integer.toString(i + 1));
            i++;
            a[i] = x - 7;
            b[i] = y - 30;
        }

    }

    class B1Listener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent event) {
            drawnode d1 = new drawnode();
            d1.dn();

        }
    }

    class B2Listener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent event) {
            drawedge d = new drawedge();
            d.de();
        }
    }

    /*class B3Listener implements ActionListener{
        public void actionPerformed(ActionEvent event) {

        }
    }*/
    class B6Listener implements ActionListener {
        @Override
        public void actionPerformed(ActionEvent event) {
            jInternalFrame1.getContentPane().removeAll();
        }

    }

    public static void main(String args[]) {
        JFrame frame = new plus();
        frame.setLocation(150, 50);
        frame.show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:17:28.117

好的，刚刚尝试了您的代码并在我的屏幕上显示以下内容：

![在此处输入图像描述](../Images/001cc2f0961e03f247ae3671e3ab2c36.png)

据我所知，GUI 出现了，您可以输入节点。但是当我尝试添加边时，它仍然处于“添加节点”模式。所以你的问题不是真正的运行按钮，而是在此之前模式改变。尝试创建一个保存当前模式的变量。我建议一个`enum`：

```
enum eMode {ADD_NODES, ADD_EDGES, SELECT_START_NODE, SELECT_END_NODE, READY}

eMode mode = ADD_NODES; 
```

当您按下底部的一个按钮时，您可以更改此模式。当您在内部框架内或其中一个节点按钮上单击时，首先检查您所处的模式。根据模式，然后您可以在单击的位置添加一个新节点，绘制一条边（您可能需要等待让用户为此单击第二个按钮），选择开始或结束节点。一旦你选择了开始和结束节点，模式就会切换到`eMode.READY`。在这种模式下，按下运行按钮将启动最短路径算法并显示结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:57:40.600

尝试了代码后，我将假设问题出在绘图边缘上。

尝试以下操作 1\. 单击 Enter Nodes 并添加一些节点 2\. 单击 Draw Edges 并尝试绘制一些边缘 - 没有任何反应，所以我假设这是您问题的根源。3\. 尝试单击框架上除节点以外的任何位置。您将看到您仍在添加节点！

此时您有两个问题 1\. 您在 drawnode#dn 中添加了一个鼠标侦听器并且从不删除它，因此您将继续添加节点。2\. 如果您尝试添加边，则您单击的是节点（jbutton）而不是框架，因此您在 drawedge#de 中添加的鼠标事件永远不会被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:04:20.090

我认为主要问题是，除了一些风格问题，我没有检查你所做的是否真的合乎逻辑，只是 B3、B4 和 B5（即运行按钮）都没有`ActionListener`. 没有 ActionListener，没有动作，没有工作，没有输出。还是我错过了什么？

# android - 带有 phonegap 的 android 上作为启动画面的动画图像

> ID：13840053
> 
> 赞同：1
> 
> 时间：2012-12-12T12:41:50.547
> 
> 标签：android, cordova, splash-screen

我已经在谷歌上搜索了一段时间；在我的 android/phonegap 项目中添加动画启动屏幕，但大多数帖子/博客都引用了以下代码：

```
super.setIntegerProperty("splashscreen", R.drawable.splash);
super.loadUrl("file:///android_asset/www/index.html", 10000); 
```

这对于纯图像文件非常有效。但是，当我使用动画图像（当前使用 *.gif 文件，知道 android 不支持 gif）用于启动画面时，它不起作用。

我还发现可以使用android的动画和alpha动画api。有人可以指点我一个不错的教程。

我只想显示一个带有一些动画的启动画面。

谢谢，

七无

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:57:29.657

据我所知，Android 不支持动画 gif。如果你想做一个动画闪屏，你需要做一些 Java 编码。看看这个链接：

[http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App](http://www.codeproject.com/Articles/113831/An-Advanced-Splash-Screen-for-Android-App)

# ruby-on-rails - Rails 控制台中的无范围工作，但在控制器操作中不起作用

> ID：13840055
> 
> 赞同：1
> 
> 时间：2012-12-12T12:41:53.347
> 
> 标签：ruby-on-rails

我有带有 default_scope 的模型：

```
class Campaign < ActiveRecord::Base
  default_scope where("campaigns.status != ?", "archive")
end 
```

然后我需要在显示操作中禁用此范围：

```
@campaign = Campaign.unscoped.find(params[:id]) 
```

但我看到`Couldn't find Campaign with id=1 [WHERE (campaigns.status != 'archive')]`

然后我在 rails 控制台尝试了相同的解决方案：

```
 Campaign.unscoped.find(1)
 SELECT `campaigns`.* FROM `campaigns` WHERE `campaigns`.`id` = 1 LIMIT 1 
```

一切正常，我在控制器中做错了什么？

**更新：**

Campaign.unscoped{ }

也没有工作。似乎@campaign 在其他地方和更早的时候确定了，因为我从我的显示操作中删除了所有行，现在它看起来像：

```
def show
end 
```

而且我仍然收到此错误：`Couldn't find Campaign with id=1 [WHERE (campaigns.status != 'archive')]`

我在 中找到了这个技巧`load_and_authorize_resource`，但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:56:05.557

参考[这个](http://apidock.com/rails/ActiveRecord/Base/unscoped/class)

```
Campaign.unscoped {
  Campaign.find(params[:id]) 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:52:51.357

根据文档，您所拥有的似乎可以正常工作。不过[这里](http://apidock.com/rails/ActiveRecord/Base/unscoped/class)提到，推荐使用unscoped的块形式。您可以尝试一下，看看它是否能解决问题。

# sitecore - Sitecore：以编程方式删除顶部的页面编辑器工具栏

> ID：13840056
> 
> 赞同：2
> 
> 时间：2012-12-12T12:41:59.243
> 
> 标签：sitecore, sitecore6, page-editor

我正在 IFrame 中加载页面（项目渲染，例如 /sitecore/content/.../Page）。它还显示页面编辑器功能区。我想隐藏该工具栏，在我的场景中不需要它。

但是，如果我为 IFrame 设置源 URL，就像`http://mysite/somefolder/page.aspx`它不显示页面编辑器控件一样。

这意味着页面编辑器控件会按需加载。需要知道如何停止在页面上加载页面编辑器控件。如果您知道如何停止将这些控件加载到页面，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:34:25.233

这是因为页面处于编辑模式。这个页面永远不需要在页面编辑器中加载吗？如果没有，那么您可以将以下内容添加到 Page_Load 事件中：

```
Sitecore.Context.Site.SetDisplayMode(Sitecore.Sites.DisplayMode.Normal, Sitecore.Sites.DisplayModeDuration.ResetAfterRequest); 
```

否则，您可以`?sc_mode=normal`在设置 iFrame 时附加到 URL`src`以实现相同的目的。这样，如果您想在 iFrame 之外编辑页面，您可以使用标准的 Sitecore 页面编辑器功能。

您当前/正在将 IFrame 的 URL 设置为什么（当您获得控件时）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:25:22.210

我找到了一个解决方案，我用 CSS 隐藏了这个功能区，这是一个非常简单的解决方案，

```
<style>
    /*Hide the edit mode ribbon panel appears in the iframes. Originally added this to Price strategy control.*/
    #scWebEditRibbon, #scCrossPiece
    {
        display: none;
    }
</style> 
```

# directx - 如何在 DirectX 11 中渲染纹理并将纹理传输到常规内存？

> ID：13840059
> 
> 赞同：1
> 
> 时间：2012-12-12T12:42:05.733
> 
> 标签：directx, rendering, directx-11, render-to-texture

我想利用 DirectX 加速将图像渲染到纹理。但是，我不想在屏幕上显示该图像，而是想将该图像作为位图返回到常规内存中，以便对结果进行任何处理。如何将一些纹理转移到常规内存？我正在使用 DirectX 11。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:11:02.960

您可以使用具有 cpu 读取访问权限的单独“暂存”纹理。使用 CopySubresource() 或 CopyResource() 将您的渲染目标纹理复制到此暂存纹理，然后对此暂存纹理执行 Map()。

--> [http://msdn.microsoft.com/en-us/library/windows/desktop/ff476259(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476259(v=vs.85).aspx)

# jquery - 我想检查我的 div 中的第二张图片是否有给定的类...？

> ID：13840071
> 
> 赞同：1
> 
> 时间：2012-12-12T12:43:13.563
> 
> 标签：jquery

这就是我检查页面上的第一张图片是否有类的方法：

```
$("img").first().hasClass('happy') 
```

我有一个 div，并希望检查其中的第二张图片以获取课程。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:44:52.820

您可以使用`eq()`来获取集合中包含的特定元素。

```
$("div").find("img:eq(1)").hasClass("happy"); 
```

注意：它是从零开始的，所以第二个元素是 index `1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:44:49.453

```
$("div.my-class img:eq(1)").hasClass('happy'); 
```

[这是它的 jquery 文档。](http://api.jquery.com/eq-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:45:35.303

使用[eq()](http://api.jquery.com/eq/)

```
$("img").eq(1).hasClass('happy') 
```

请注意，使用 访问第一个元素，使用 访问`eq(0)`第二个元素`eq(1)`。

# java - 使用 C3P0 和 Hibernate/Spring 创建的许多线程

> ID：13840073
> 
> 赞同：3
> 
> 时间：2012-12-12T12:43:15.333
> 
> 标签：java, mysql, multithreading, hibernate, c3p0

我在 Linux 环境下使用 Tomcat，在 Java Web 应用程序中做了一个将 Hibernate 和 Spring 合并的项目。由于 Mysql 8 小时超时问题，我们想使用 C3P0 来管理与我们的 Mysql 数据库的连接池。但是当我们使用它时，我们会创建许多线程。我想通了，因为我在每个请求上都打印了所有这些请求，并打印了一个内存状态，向我展示了不断增加的内存和那种线程：

> *   名称：C3P0PooledConnectionPoolManager[identityToken->1hged7o8r13kpj7n1h3ycia|39c446]-HelperThread-#0 守护进程：真组！main groupParent：系统存活：true 中断：false
> *   名称：C3P0PooledConnectionPoolManager[identityToken->1hged7o8r13kpj7n1h3ycia|17ec0e8]-AdminTaskTimer 守护进程：真正的组！main groupParent：系统存活：true 中断：false

在足够的时间之后，它可以产生超过 500 个这样的线程。

这是我的 Hibernate.cfg.xml：

```
 <property name="connection.provider_class">
            org.hibernate.connection.C3P0ConnectionProvider</property>
    <property name="hibernate.c3p0.acquire_increment">1</property> 
    <property name="hibernate.c3p0.idle_test_period">5</property>
    <property name="hibernate.c3p0.max_size">100</property> 
    <property name="hibernate.c3p0.max_statements">100</property> 
    <property name="hibernate.c3p0.min_size">10</property> 
    <property name="hibernate.c3p0.timeout">5</property>

    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/myBase</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.connection.password"></property>
    <property name="hibernate.hbm2ddl.auto">update</property>
    <property name="hibernate.default_schema">myProject</property>
    <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
    <property name="show_sql">false</property>

    <property name="cache.provider_class">
      org.hibernate.cache.NoCacheProvider
    </property> 
```

我还尝试添加一个 C3P0 属性文件，但除了减少辅助线程数外，它不会删除未使用的线程：

```
 c3p0.maxStatements=5    

c3p0.maxIdleTime=10

c3p0.numHelperThreads=1

c3p0.testConnectionOnCheckout=true
c3p0.preferredTestQuery=SELECT 1

c3p0.initialPoolSize=1
c3p0.minPoolSize=1
c3p0.maxPoolSize=10

c3p0.acquireIncrement=1
c3p0.idleConnectionTestPeriod=1 
```

有谁知道为什么会发生这种情况以及如何解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:00:35.787

如果您看到 c3p0 助手和计时器线程的倍增，那么当您希望只有一个时，您会以某种方式创建大量 c3p0 数据源。有时，如果您正在热重新加载您的应用程序但在回收时忘记关闭（）旧的 c3p0 数据源，则会发生这种情况。

实际上，看起来您正在“泄漏”数据源。您需要弄清楚发生这种情况的原因/地点。有关一些线索，请查看您的日志以获取信息级别的 c3p0 数据源初始化消息。例如，搜索字符串“Initializing c3p0 pool”。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T09:42:19.217

好的，我找到了一个属性组合来解决我的问题，请记住，我一次不需要很多连接：

*   c3p0.maxStatements=5
*   c3p0.maxIdleTime=10
*   c3p0.numHelperThreads=3
*   c3p0.testConnectionOnCheckout=true
*   c3p0.preferredTestQuery=选择 1
*   c3p0.initialPoolSize=1
*   c3p0.minPoolSize=1
*   c3p0.maxPoolSize=1 c3p0.acquireIncrement=1
*   c3p0.idleConnectionTestPeriod=1
*   c3p0.maxAdministrativeTaskTime=1

谢谢大家

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:56:02.733

我希望它会创建多个与 和 成比例的线程`c3p0.minPoolSize` ，`c3p0.maxPoolSize`并且您的最大值为 10。

[http://www.mchange.com/projects/c3p0/#other_ds_configuration](http://www.mchange.com/projects/c3p0/#other_ds_configuration) " **numHelperThreads**和 maxAdministrativeTaskTime 帮助配置 DataSource 线程池的行为。**默认情况下，每个 DataSource 只有三个关联的帮助线程**。如果性能似乎在重负载下拖累，或者如果您通过 JMX 或直接检查 PooledDataSource 观察到“待处理任务”的数量通常大于零，请尝试增加 numHelperThreads。maxAdministrativeTaskTime 对于遇到任务无限期挂起和“明显死锁”消息的用户可能很有用。 （更多信息请参见附录 A。）"

numHelperThreads 定义了每个 DataSource 使用了多少线程，因此实际上您将有 10 个线程使用`numHelperThreads=1`.

确保 C3P0 仅使用一个线程的唯一方法是将 `c3p0.minPoolSize` 和设置`c3p0.maxPoolSize`为 1，但这违背了连接池的目的。

# sql - 为什么表变量不适用于 SQL Server 中的 SELECT INTO

> ID：13840086
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:44:20.030
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
DECLARE @TEMP_TBL TABLE (COL1 INT, COL2 VARCHAR(100)
SELECT ID, NAME INTO @TEMP_TBL  FROM TB1 
```

上面的代码没有在下面的代码工作的地方工作。为什么？

```
SELECT ID, NAME INTO TB2 FROM TB1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:45:56.677

它`INSERT INTO ... SELECT ...`不是`SELECT ... INTO ...`这样：

```
INSERT INTO @TEMP_TBL 
SELECT ID, NAME FROM TB1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:07:59.360

SELECT... INTO 创建一个新表。如果你想自己创建一个临时表而不是你想要反转它：

```
 DECLARE @TEMP_TBL TABLE (COL1 INT, COL2 VARCHAR(100))
 INSERT INTO @TEMP_TBL 
 SELECT ID, NAME FROM TB1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:03:30.033

您在查询中缺少结尾“）”。试试这个：

```
DECLARE @TEMP_TBL TABLE (COL1 INT, COL2 VARCHAR(100))

INSERT INTO @TEMP_TBL
select ID, NAME FROM TB1 
```

# silverlight - Silverlight 5 绑定。按名字查找祖先？

> ID：13840091
> 
> 赞同：0
> 
> 时间：2012-12-12T12:44:31.370
> 
> 标签：silverlight, silverlight-5.0

SL5 中是否有通过名称绑定到祖先的绑定模式？

就像是：

```
{Binding AParentProp, RelativeSource={RelativeSource FindByName="MyParent"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:02:09.503

您可以像这样绑定到特定的命名元素：

```
{Binding Property, ElementName=name} 
```

你这样命名你的元素：

```
<Grid x:Name="name" ....>

</Grid> 
```

# android - 根据屏幕大小调整 Toast 消息大小的好方法是什么？

> ID：13840092
> 
> 赞同：1
> 
> 时间：2012-12-12T12:44:34.677
> 
> 标签：android, toast

我一直在使用 Toast 和我正在编写的应用程序中的默认样式来学习 android。它在我相当低分辨率的手机上运行良好，但在具有更高分辨率屏幕的设备（如我的 Galaxy 相机）上，默认的 Toast 消息非常微小。是否有一些标准方法可以根据屏幕分辨率调整 Toast 消息字体大小（或者只是让它使用点大小而不是像素大小来选择字体大小）？

# magento - 为每次销售自动生成并通过电子邮件发送唯一的优惠券代码

> ID：13840104
> 
> 赞同：2
> 
> 时间：2012-12-12T12:44:52.343
> 
> 标签：magento, magento-1.6

我一直在寻找解决这个我试图解决的问题的方法。场景如下：我想为在两个指定日期之间进行的每次购买发放一次性优惠券代码。代金券将在另外两个指定日期之间兑换。代金券必须仅供一次性使用，但如果原始购买者不想要/不需要它，则可能会被赠送。可以为每个客户分配任意数量的个人优惠券代码 - 每次购买都会发出一个。应自动生成优惠券代码并通过电子邮件将其与订单确认一起发送给他们，因此无需手动工作。

有人可以帮助提供 Magento 1.6.2 的可用代码，或者将我指向一个可以完成这项工作的插件吗？

我已经联系 MageStore 询问他们的产品是否符合我的需求，但我想我会在这里问这个问题，以防我能更快地得到答案/解决方案，因为他们目前不可用。

=== 最终工作解决方案 ===

我在不同的地方找到了代码，每个地方都有一些帮助，但对我来说没有一个整体的工作解决方案。最终，我设法将它组合成一个模块 - 这是该模块的observer.php 部分（野兽的症结）。我希望它可以帮助某人！

注意 - 此代码在我的场景中适用于我。我不能对此提供任何支持，也不对它在您的应用程序中的使用承担任何责任 - 请在您认为合适的情况下使用它。

```
<?php
/**
 * Our class name should follow the directory structure of
 * our Observer.php model, starting from the namespace,
 * replacing directory separators with underscores.
 * i.e. app/code/local/SmashingMagazine/
 *                     LogProductUpdate/Model/Observer.php
 */
class Robgt_AutoVoucher_Model_Observer
{
    /**
     * Magento passes a Varien_Event_Observer object as
     * the first parameter of dispatched events.
     */
    public function autoVoucher(Varien_Event_Observer $observer)
    {

        // Should we run this code at all?
        // Between 17th at midnight and 24th at midday December 2012 ONLY
        $from = strtotime('2012-12-17 00:00:01');
        $to = strtotime('2012-12-24 11:59:59');
        $now = time();

        if($from <= $now && $to >= $now) {

            //Get the Order ID
            $order = $observer->getEvent()->getOrder();
            $orderEntityId = $order->getId(); 
            $orderid = $order->getIncrementId();
            //$orderid = Mage::getSingleton('checkout/session')->getLastRealOrderId();

            if(empty($orderid))
            {
                $orderid = '999999999';
            }

            // Grab the last 3 digits of the Order number for use in the voucher code
            $last_orderNumberDigits = substr($orderid, -3, 3);; 

            // Create coupon code random part
            $codeLength = 7;
            $chars = "ABCDEFGHIJKLMNPQRSTUVWXYZ1234567890";
            srand((double)microtime()*1000000);
            $i = 0;
            $code = '' ;
            while ($i <= $codeLength)
            {
                $num = rand() % 33;
                $tmp = substr($chars, $num, 1);
                $code = $code . $tmp;
                $i++;
            }

            $couponRandomCode = $code;

            // Build coupon code
            // Format is: MH[Last 3 Digits of Order number]-[5 Random digits]
            $couponCode = 'MH'.$last_orderNumberDigits.'-'.$couponRandomCode;
            $couponName = 'Xmas2012 - '.$couponCode;

            // Build the coupon rule
            $rule = Mage::getModel('salesrule/rule');

            $rule->setName($couponName);
            $rule->setDescription('Xmas 2012 Discount coupon');
            $rule->setFromDate('2013-01-01'); // Jan 1st
            $rule->setToDate('2013-01-31'); // Jan 31st
            $rule->setCouponType(2);
            $rule->setCouponCode($couponCode);
            $rule->setUsesPerCoupon(1);
            $rule->setUsesPerCustomer(1);
            $rule->setCustomerGroupIds('0,1,3,4');
            $rule->setIsActive(1);

            $conditions = array(
                "1" => array(
                    'type' => 'salesrule/rule_condition_combine',
                    'aggregator' => 'all',
                    'value' => 1,
                    'new_child' => false
                    ),
                "1--1" => array(
                    'type' => 'salesrule/rule_condition_product_found',
                    'value' => 1,
                    'aggregator' => 'all',
                    'new_child' => false
                ),
                "1--1--1" => array(
                    'type' => 'salesrule/rule_condition_product',
                    'attribute' => 'category_ids',
                    'operator' => '!()',
                    'value' => '932,341,800,1116'
                )
            );
            $actions = array(
                "1" => array(
                        "type"          => "salesrule/rule_condition_product",
                        "aggregator"    => "all",
                        "value"         => "1",
                        "new_child"     => false
                ),
                "1--1" => array(
                        "type"          => "salesrule/rule_condition_product",
                        "attribute"     => "category_ids",
                        'operator' => '!()',
                        'value' => '932,341,800,1116'
                )
            );

            $rule->setData('conditions',$conditions);
            $rule->setData("actions",$actions);
            $rule->setStopRulesProcessing(1);
            $rule->setIsAdvanced(1);
            $rule->setProductIds('');
            $rule->setSortOrder(0);
            $rule->setSimpleAction('by_percent');
            $rule->setDiscountAmount(10);
            $rule->setDiscountStep(0);
            $rule->setSimpleFreeShipping(0);
            $rule->setTimesUsed(0);
            $rule->setIsRss(0);
            $rule->setWebsiteIds('1');

            $rule->loadPost($rule->getData());
            $rule->save();

            // Email the details to Trev
            $to  = 'trevor.wallinger@gmail.com';
            //$to  = 'robgt.com@gmail.com';
            $subject = 'New Xmas 2012 Voucher Code';
            $message = '<body style="background:#F6F6F6; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; margin:0; padding:0;">
            <div style="background:#F6F6F6; font-family:Verdana, Arial, Helvetica, sans-serif; font-size:12px; margin:0; padding:0;">
            <table cellspacing="0" cellpadding="0" border="0" height="100%" width="100%">
                <tr>
                    <td align="center" valign="top" style="padding:20px 0 20px 0">
                        <!-- [ header starts here] -->
                        <table bgcolor="FFFFFF" cellspacing="0" cellpadding="10" border="0" width="650" style="border:1px solid #E0E0E0;">
                            <tr>
                                <td valign="top">
                                    <h1 style="font-size:22px; font-weight:normal; line-height:22px; margin:0 0 11px 0;">A new coupon code was generated, as follows:</h1>
                                    <p style="font-size:12px; line-height:16px; margin:0 0 8px 0;"><strong>Order Number:</strong> '.$orderid.'</p>
                                    <p style="font-size:12px; line-height:16px; margin:0 0 8px 0;"><strong>Coupon Code:</strong> '.$couponCode.'</p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
            </div>
            </body>     
            ';
            $headers  = 'MIME-Version: 1.0' . "\r\n";
            $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";     

            try {
                mail($to, $subject, $message, $headers);
                $mailReport = 'Mail sent!';
            }
            catch(Exception $ex) {
                $mailReport = "Mail failed to send!";
            }

            // Log the voucher code generated
            // Saved to /var/log/coupons.log
            Mage::log(
                "Coupon created: {$couponCode} | Order ID: {$orderid} | Mail Report: {$mailReport}\n\r",
                null, 
                'coupons.log'
            );

        } // End If Date check.

    }

} 
```

# javascript - 使用 Knockout 和 JayData 进行下拉刷新

> ID：13840108
> 
> 赞同：1
> 
> 时间：2012-12-12T12:45:01.267
> 
> 标签：javascript, html, knockout.js, odata, jaydata

我正在使用`Knockout.js`and开发 HTML5 应用程序，并且`JayData`在实现下拉刷新数据列表时遇到了问题。

我使用 API 查询远程`OData`服务`JayData`并将结果分配给`KO observable`数组：

```
db.MySet
  .orderBy('it.Field1')
  .skip(recordsToSkip)
  .take(20)
  .toArray()
  .then(function(result) {
     self.MyDataList(result);
  } 
```

我总是丢失旧记录。我该如何修复我的代码？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:58:57.553

您需要将新的对象数组连接到旧列表：

```
.then(function(result) {
    oldList = oldList.concat(result);
    self.MyDataList(oldList);
} 
```

（因此，在第一次运行时，您需要设置`oldList = []`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:02:55.297

我猜在将结果绑定到 Knockout observable 时缺少一件小事：检查现有数组是否已经包含元素并将结果附加到现有数组。

我的同事 Viktor 有一个教程，它使用[Knockout+JayData pull-to-refresh实现了一个高分列表](http://jaystack.com/blog/sliding-puzzle-html5-game-powered-by-jaystorm)

```
db.MySet
  .orderBy('it.Field1')
  .skip(recordsToSkip)
  .take(20)
  .toArray()
  .then(function(result) { 
     if (result.length){
       if (self.MyDataList().length){
            self.MyDataList(self.MyDataList().concat(result));
       }else{
            self.MyDataList(result);
       }
    }
   }); 
```

这会修复应用程序吗？该示例的完整上下文可以在[GitHub上找到](https://github.com/jaystorm/slidingpuzzle/blob/master/puzzle.js#L426)

# iphone - 如何防止 UIScrollView 滚动两个页面？

> ID：13840111
> 
> 赞同：1
> 
> 时间：2012-12-12T12:45:07.583
> 
> 标签：iphone, ios, uiscrollview, uikit

我有`UIScrollView`并且我正在`pagingEnabled`模式下使用它。在这个`UIScrollView`，我有很多图片要加载。所以不可能全部加载。我决定加载五个五个。最初，我加载了五张图片并设置了它们的位置、大小和**标签**。到目前为止，我能够做到这一点。

一旦用户到达第四页，我需要设置第六页并从超级视图中删除第一页。为此，我正在使用这种方法来做到这一点。

```
[[self.scrollView viewWithTag:currentPage-3] removeFromSuperView]; 
```

为了正确检测页面更改事件，我使用了几乎所有的委托方法 `UIScrollView`，但是当用户连续滚动时，我错过了页面。所以，我无法正确加载图像。例如，当我错过加载第 6 页时，我无法加载第 8 页。

我尝试禁用`userInteraction mode`，即使它设置为**NO**，用户也可以继续滚动。

我想要做的是，当用户更改页面时，我想禁用`UIScrollView`滚动，直到我完成将图像加载到`UIScrollView`.

你们有什么想法，我怎么能做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:41:11.563

> 我想要做的是，当用户更改页面时，我想禁用`UIScrollView`滚动，直到我完成将图像加载到 UIScrollView 中。

如果要在每个页面滚动后禁用滚动，请查看`UIScrollViewDelegate`方法，例如`scrollViewDidScroll:`

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intf/UIScrollViewDelegate)

`scrollViewDidScroll:`您可以在to`scrollEnabled`上设置。图像完成加载后，重新启用滚动相同的属性。 `UIScrollView``NO`

# scala - Scala - 可以在方法级别应用implicitNotFound 注释吗？

> ID：13840115
> 
> 赞同：6
> 
> 时间：2012-12-12T12:45:16.893
> 
> 标签：scala, annotations, implicit

我有一个方法，它接受类型参数和隐式视图边界。当使用无效数据类型调用该方法时，我可以使用 @implicitNotFound 注释给出更好的编译器错误吗？

该方法的文档是无用的，甚至源代码也无济于事，并且在线使用的所有示例都是在 trait 或 class 级别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:08:19.097

不，你不能直接这样做。正如您所注意到的，`@implicitNotFound`注释特征或类。但是，如果您真的想要自定义消息，您可以为该方法创建一个特殊的隐式类型并对其进行注释。

# javascript - 打印宽度较大的html表格时出现问题

> ID：13840117
> 
> 赞同：2
> 
> 时间：2012-12-12T12:45:25.807
> 
> 标签：javascript, printing, html-table, internet-explorer-9

我有十行的 html 表，`<td>`每行一个宽度大于浏览器视图宽度，而在 IE 9 中打印它时，它只打印视图中的内容。我想打印整张桌子，我该怎么做？

检查这个[jsfiddle](http://jsfiddle.net/TKDzT/1/show/)示例，这是我需要打印的表格。请帮助我做到这一点。

# opencv - 使用 Visual Studio 2012 构建 OpenCV 库

> ID：13840118
> 
> 赞同：2
> 
> 时间：2012-12-12T12:45:29.407
> 
> 标签：opencv, visual-studio-2012

有没有人能够使用 Visual Studio 2012 构建 OpenCV 库？

我特别有兴趣看到它在 ARM 上的 Windows 8 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T02:08:57.540

此问题的重要方面（关于使用 Visual C++ 2012 构建库并将其用于 Windows 8 的部分）在以下问题中得到解决：

[在带有 Visual C++ 的 Windows 应用商店应用程序中使用 OpenCV](https://stackoverflow.com/questions/14065370/using-opencv-in-a-windows-8-store-app-with-visual-c-2012)

# javascript - 两次初始化jQuery对象可以吗？

> ID：13840122
> 
> 赞同：2
> 
> 时间：2012-12-12T12:45:38.690
> 
> 标签：javascript, jquery, jquery-selectors

我有一个需要 jQuery 对象的函数，但为了方便起见，我还希望接受选择器字符串和元素。所以我正在做这样的事情：

```
test($('.something'));
test('.something');
test($('.something')[0]);

function test (param1) {
  //ensure jquery object
  if (!(param1 instanceof $)) {
    param1 = $(param1);
  }

  //do something with $param1
} 
```

无论如何初始化 jQuery 对象会不会有什么影响和性能问题？

```
function test (param1) {
  //ensure jquery object
  param1 = $(param1);

  //do something with $param1
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:58:03.967

他们都将工作。但是，如果您正在寻找最佳选择，您应该使用第一个功能。[看看这个](http://jsperf.com/jquery-object-initialization)。

**更新**

[这是](http://jsperf.com/jquery-object-initialization/2)由 OP 进行更正的性能以及我没有想到的一项额外测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:03:43.223

当您使用另一个 jQuery 元素实例化 jQuery 时，它将返回后者的浅表副本。在构造函数内部，在确定选择器不是字符串或 DOM 元素后，[在此处](https://github.com/jquery/jquery/blob/master/src/core.js#L189)`jQuery.makeArray()`调用。这反过来又调用[这里](https://github.com/jquery/jquery/blob/master/src/core.js#L655)来制作浅拷贝。`jQuery.merge()`

这显然会占用宝贵的周期，尤其是因为您**期望**一个 jQuery 对象作为您的参数。`instanceof`因此，首先使用来确定类型更有意义。

还有多少意义？假设该参数有 20% 的可能性不是 jQuery 对象，那么进行类型检查将产生**6 倍的性能提升**（基于 Chrome）。

看看[结果](http://jsperf.com/jquery-double-init)。

# javascript - Java 和 JavaScript 如何协同工作？

> ID：13840126
> 
> 赞同：2
> 
> 时间：2012-12-12T12:45:48.870
> 
> 标签：javascript, java, integration

我将首先声明我知道 Java 不是 JavaScript，反之亦然。

我有一个项目，我需要计算 1750 个文档名称和文档内容中每个单词的出现次数。我从一位同事那里得到了一些很棒的 JavaScript，它完全可以从网页上的表单输入中完成我想要的。

我想使用Java的FileReader、BufferedReader、walkFileTree等来遍历文档所在的目录。

我不确定这是否是最有效或最有效的方法，但是代码的 Java 和 JavaScript 部分现在都彼此独立工作，我想看看是否可以让它们在它们之间传递数据在我开始重新发明轮子之前。

这就是我到目前为止的位置。我被困在 CLParse 方法中并插入了伪代码：

```
public static void main(String... aArgs) throws FileNotFoundException    {
    File startingDirectory= new File("CGT");
    List<File> files = FileListing.getFileListingNoSort(startingDirectory);
    for(File file : files )           {
        CLParse(file.toString());
    }   }

static private List<File> getFileListingNoSort(File aDirectory) throws FileNotFoundException    {
    List<File> result = new ArrayList<File>();
    File[] filesAndDirs = aDirectory.listFiles();
    List<File> filesDirs = Arrays.asList(filesAndDirs);
    for(File file : filesDirs)          {
        result.add(file); //always add, even if directory
        if ( ! file.isFile() )   {
            List<File> deeperList = getFileListingNoSort(file);
            result.addAll(deeperList);
        }      }      
    return result;
    }

 /* is something like this doable and how would I do it?
 */
public static void CLParse(String fn) {
      pass fn to JavaScript counter
      return an array of {word,occurences} for the string
      write array to file
      } 
```

我将创建另一组方法来提取文档内容并将其作为字符串传递。我很想知道是否有人有任何在 Java 和 JavaScript 之间来回传递值的实际经验，以及关于如何更好/更好的方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:59:02.350

我会尝试调查 Mozilla Rhino。
[http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29](http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:02:36.553

查看犀牛[https://developer.mozilla.org/en-US/docs/Rhino](https://developer.mozilla.org/en-US/docs/Rhino)

您可以创建 java 对象并在 javascript 中使用它们。集成很简单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:04:29.713

你有 2 个选项可以让它们相互交互，我知道：

1.Applet <-> javascript

2.Serlvet <-> javascript

使用选项 1，您必须与 JSObject 建立通信：[JSObject](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingJavaScriptFromApplet.html)

或者您不能使用它立即调用 Applets 方法，`document.appletname.methodname();` 您甚至可以简单地将相同的格式解析为彼此。

使用选项 2，您必须与 Servlet 建立通信。

在这里你必须向 Servlet 发送一个 Ajax 请求：

```
$.post('login',{name:"Peter", pw:"123456"},function() 
{ 
   //do whatever
}) 
```

[JavaServlet 类](http://docs.oracle.com/javaee/1.4/api/javax/servlet/http/HttpServlet.html)

第一条评论，必须写成你的 web.xml 中的 Servlet，它是 servlet 模式。第二个是可以在 servlet 中读取的参数。该函数描述了可以在请求中完成的内容。

这两个选项之间的区别是：

1.小程序在用户电脑上运行，所以你可以访问他的文件。但为此，您的小程序必须签名。

2.Servlet在Server上运行。在这里，您拥有完整的文件访问权限（如果系统允许您也拥有它）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:50:18.017

您可以使用 AJAX 向服务器发送和接收值。您可以将参数或 JSON 发送到服务器并获得响应。

您可以使用[JSONP](http://en.wikipedia.org/wiki/JSONP)来提供数据，或者如果您无法控制第二台服务器，则使用反向代理将请求通过第一台服务器代理到第二台服务器。

# iphone - 如何给每个按钮一个不同的图像？

> ID：13840127
> 
> 赞同：0
> 
> 时间：2012-12-12T12:45:49.703
> 
> 标签：iphone, objective-c, image

我有一个应用程序，您有 3 个按钮，如果您按下一个按钮，三个按钮的按钮图像会发生变化，但按钮 2 和按钮 3 的图片可能与按钮 1 的图片不同，而按钮 3 的图片可能与按钮 2 的图片不同

我已经尝试过了，但它没有用

```
 NSInteger imageIndex1 = arc4random_uniform(images.count);
       NSInteger imageIndex2 = arc4random_uniform(images.count);
       NSInteger imageIndex3 = arc4random_uniform(images.count);

    if (imageIndex1 == imageIndex2 ) {
        imageIndex2 = arc4random_uniform(images.count);
    }

    else if (imageIndex1 == imageIndex3  ) {
        imageIndex3 = arc4random_uniform(images.count);
    }

        else if (imageIndex2 == imageIndex3  ) {
            imageIndex3 = arc4random_uniform(images.count);

    }

    else
       [self.picture1 setImage:images[imageIndex1] forState:UIControlStateNormal];
       [self.picture2 setImage:images[imageIndex2] forState:UIControlStateNormal];
       [self.picture3 setImage:images[imageIndex3] forState:UIControlStateNormal];
      imageIndex1 = imageIndex2;
      imageIndex1 = imageIndex3;
      imageIndex2 = imageIndex3; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T15:51:50.777

看起来这个的另一个副本被关闭为重复。以下是该问题的答案：问题的目标是随机更改按钮上的图像。但问题是，在图像数组中选择随机索引有时会生成当前索引（它是随机的，因此发生这种情况的概率为 1/array.count）。这是一种排除给定索引的方法...

```
- (NSUInteger)randomUnsignedLessThan:(NSInteger)max excluding:(NSUInteger)exclude {

    NSInteger firstTry = -1;
    while (firstTry == exclude) firstTry = arc4random() % max;
    return firstTry;
} 
```

请注意，此方法将始终调用 arc4random 一次，并且需要 1+N 次调用，概率为 1/max^N，因此对于低范围和高性能要求，您可能会考虑使用不同的算法来排除一个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:59:22.943

尝试这个：

```
NSInteger imageIndex1 = arc4random_uniform(images.count);
NSInteger imageIndex2 = arc4random_uniform(images.count);
NSInteger imageIndex3 = arc4random_uniform(images.count);

while (imageIndex2 == imageIndex1 ) {
    imageIndex2 = arc4random_uniform(images.count);
}

while (imageIndex3 == imageIndex1 ) {
    imageIndex3 = arc4random_uniform(images.count);
}

[self.picture1 setImage:images[imageIndex1] forState:UIControlStateNormal];
[self.picture2 setImage:images[imageIndex2] forState:UIControlStateNormal];
[self.picture3 setImage:images[imageIndex3] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:56:04.893

在这里，您将`self.picture1`图像设置在 else 部分，因此如果首先任何条件为真，则`self.picture1`不会设置图像，因此您面临的这个问题还为每个按钮添加 setImage 的代码`else`，如下代码

```
 [self.picture1 setImage:images[imageIndex1] forState:UIControlStateNormal];
       [self.picture2 setImage:images[imageIndex2] forState:UIControlStateNormal];
       [self.picture3 setImage:images[imageIndex3] forState:UIControlStateNormal]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:57:43.640

尝试这个...

```
 if (imageIndex2 == imageIndex1 ) {
            imageIndex2 = arc4random_uniform(images.count);
    }

    if (imageIndex3 == imageIndex1 ) {
            imageIndex3 = arc4random_uniform(images.count);
          }

[self.picture1 setImage:images[imageIndex1] forState:UIControlStateNormal];
       [self.picture2 setImage:images[imageIndex2] forState:UIControlStateNormal];
       [self.picture3 setImage:images[imageIndex3] forState:UIControlStateNormal];
       imageIndex1 = imageIndex2;
       imageInde

x1 = imageIndex3; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T14:36:26.460

我想我找到了解决方案。这是现在的代码：

```
 Boolean p1 =true;
    Boolean p2 = true;
    Boolean p3 = true;

       NSInteger imageIndex1 = arc4random_uniform(images.count);
       NSInteger imageIndex2 = arc4random_uniform(images.count);
       NSInteger imageIndex3 = arc4random_uniform(images.count);

    if (imageIndex1 == imageIndex2 ) {
        p1 = false;
        imageIndex2 = arc4random_uniform(images.count);

    }

    if(imageIndex1 == imageIndex3  ) {
        p2 = false;
        imageIndex1 = arc4random_uniform(images.count);

    }

       if (imageIndex2 == imageIndex3  ) {
           p3 = false;
            imageIndex3 = arc4random_uniform(images.count);

    }

    if(p1 == true && p2 == true && p3 == true) {
       [self.picture1 setImage:images[imageIndex1] forState:UIControlStateNormal];
       [self.picture2 setImage:images[imageIndex2] forState:UIControlStateNormal];
       [self.picture3 setImage:images[imageIndex3] forState:UIControlStateNormal];
    } 
```

# android - 开发像 Google Play 这样的应用程序？

> ID：13840128
> 
> 赞同：-2
> 
> 时间：2012-12-12T12:45:51.003
> 
> 标签：android, google-play

> **可能重复：**
> [开发像 Google play 这样的应用程序？](https://stackoverflow.com/questions/13839912/develop-application-like-google-play)

我想为我的组织目的开发像“Google play”这样的应用程序。请给我一些建议？我该如何开始？

我正在寻找我们拥有包含 android 应用程序的服务器。通过使用此应用程序，它必须列出我们服务器上所有可用的应用程序，还列出从我们的服务器安装的应用程序，并显示已安装应用程序的更新（如果它在我们的服务器中可用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:51:25.627

也许您可以为此目的使用 Google play 本身。看看这里：

[http://googleenterprise.blogspot.ca/2012/12/a-new-way-to-distribute-your-internal.html](http://googleenterprise.blogspot.ca/2012/12/a-new-way-to-distribute-your-internal.html)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:54:21.323

你能再具体一点吗？您在这里需要一个服务器和客户端组件，也许使用一些其余的 Web 服务来为您的客户端提供服务。作为一个快速的想法，您可以发布一个带有一些自定义项目的网格视图，这些项目在滚动时会异步调用您的网络服务来显示您的应用程序。

同样，我不确定这是否是您要查找的内容，请尝试更具体一些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T12:55:17.190

安装应用程序非常简单 - 只需发送意图“打开”.apk 文件即可。也可以列出已安装的应用程序 - PackageManager 检查更新 - GCM 或 AlarmManager 经常检查更新。

另一方面，也许您只需要上次介绍的私人频道：http: [//support.google.com/a/bin/answer.py ?hl=en&answer=2494992](http://support.google.com/a/bin/answer.py?hl=en&answer=2494992)

# css - 显示：块，宽度：100% & 居中对齐

> ID：13840134
> 
> 赞同：0
> 
> 时间：2012-12-12T12:46:12.627
> 
> 标签：css, tablelayout

我在电子邮件中有一张表格，显示何时`(max-width :600px)`

CSS：

```
table[class="advert-container show"] { display: block !important; } 
```

两个表都具有= 100％，但带有“show”类的底部表似乎左对齐，

块对我的桌子做了什么？:(

这是我的 JsFiddle：http: [//jsfiddle.net/QPhEp/1/](http://jsfiddle.net/QPhEp/1/)

![在此处输入图像描述](../Images/58a037cc9c61b3bbcc0024fc19f64aee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:50:48.557

实际上`display:block`将元素显示为块级元素（如段落和标题）[参考](http://www.w3schools.com/cssref/pr_class_display.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:56:25.510

你需要使用

```
table[class="advert-container show"] { display: table !important; }
td.ad {  margin:10px; float:left; } 
```

而不是阻塞。

我对这个新小提琴的风格有更多的改进。 [http://jsfiddle.net/zJacq/1/](http://jsfiddle.net/zJacq/1/)

```
table[class="advert-container show"] { display: table; }
td.ad { padding:10px; } 
```

​</p>

# search - 为什么我的 ack --ignore-dir 不起作用？

> ID：13840135
> 
> 赞同：4
> 
> 时间：2012-12-12T12:46:13.917
> 
> 标签：search, ack

我正在尝试在整个服务器中搜索字符串，同时使用 ack 排除 dev/ (-R)。到目前为止我有

```
sudo ack -i --ignore-dir=dev * foo

--version ack v1.39 
```

但我遇到了一个错误。我哪里错了？

欢迎就此事提供任何帮助或建议

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T16:07:56.113

首先，每当您说“我遇到错误”时，请将其更改为“我遇到以下错误”，然后告诉我们错误是什么。该错误对于我们能够帮助诊断问题很重要。

其次，您使用的 ack 版本非常旧。最新的是 1.96。

第三，你的论点乱了套。您正在搜索“foo”，对吗？那么你应该做“ack foo *”，而不是“ack * foo”。

您不应该为文件名指定“*”。让 ack 为您查找文件。如果“dev”是您调用的目录中的一个目录，那么“ack *”将扩展为“ack dev [其他目录]”，它明确告诉 ack 在“dev”目录中搜索，它会覆盖`--ignore-dir`指示。

你应该做的是：

```
ack -i --ignore-dir=dev foo 
```

然后让 ack 进行文件查找。如果由于某种原因您必须覆盖`ack`正在查找的文件，您应该只在命令行上指定文件名。

最后，你可能一开始就不应该使用 ack 来完成这个任务。ack 专门用于搜索源代码，它不会搜索它不考虑源代码的文件。如果您正在搜索整个服务器，那么您可能也想要搜索非源代码文件，对吧？为此使用 grep。

# php - 具有来自数据库的动态值的滑块

> ID：13840137
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:46:31.263
> 
> 标签：php, jquery, sql, jquery-ui-slider

我有这个滑块的代码并且可以工作，但我需要滑块显示我在 SQL 表中的动态值（数字和字母数字）。出于这个原因，我不能把像这里这样的静态值放在`min`,`max`和`step`. 我该怎么做才能在那里显示我的表的值？

```
<script>
    $("#slider").slider({
        value:100,
        //MIN ANSWER INPUT VALUE ??? AND WITH MAX THE SAME
        min: 0,
        max: 500,
        step: 50,
        slide: function(event, ui) {
            $( "#amount" ).val( "$" + ui.value );
        }
    });
    $("#amount").val("$" + $("#slider").slider("value"));
});
</script>

<p>
    <label for="amount"><?php echo $row_questionset['QuestionValue']; ?>< /label>
    <input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
</p>
<div id="slider"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:05:07.773

你可以做这样的事情。

```
<?php 
//get the values from the database here and set them to variables.
$minValue = 1;
$maxValue = 4;
$stepValue = 2;
?>
<html>
<script>
var minValue = <?php echo $minValue; ?> ;
var maxValue = <?php echo $maxValue; ?>;
var stepValue = <?php echo $stepValue; ?>;//if a string value, put <?php echo $stepValue; ?> inside quotes.
$( "#slider" ).slider({
                    value:100,//MIN ANSWER INPUT VALUE ??? AND WITH MAX THE SAME
                    min: minValue,
                    max: maxValue,
                    step: stepValue,
                    slide: function( event, ui ) {
                        $( "#amount" ).val( "$" + ui.value );
                    }
                });
$( "#amount" ).val( "$" + $( "#slider" ).slider( "value" ) );
</script>

<p>
<label for="amount"><?php echo $row_questionset['QuestionValue']; ?></label>
<input type="text" id="amount" style="border: 0; color: #f6931f; font-weight: bold;" />
</p>

<div id="slider">

</div>
</html> 
```

# algorithm - 熵解码器。从数据中提取未知数量的编码系数

> ID：13840140
> 
> 赞同：0
> 
> 时间：2012-12-12T12:46:48.953
> 
> 标签：algorithm, optimization, entropy

我需要使用以下算法从流中读取数据：

-从流中计算所有连续的设置位（“1”）。

- 然后，从流中读取更多位。K 是可变的，并且在整个程序中都会发生变化。让我们将读取的数据称为“m”

解码后的数字是

```
number = (consecutive_set_bits << k) + m; 
```

这个算法被执行了很多次。正因为如此，这段代码尽可能快是至关重要的。

主要问题是 1 字节、2 字节、4 字节等集合中的编码数字的数量是可变的，因此一个简单的实现（我现在脑子里只有一个）需要一个读取单字节的循环来自流的位。在最坏的情况下，对于一个编码系数，我在循环中进行了 14 次迭代。

我能以某种方式避免这个循环吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:39:49.380

顺序提取单个位的想法还不错。如果做得好，它可能几乎与任何其他解决方案一样快。

*粒度为g*的流中任意位置的位序列，例如对于（16 位）`word`s 的流，g=16，可以在大小为 g 的块上逐块处理。

`s`要从流中提取通过`e`(with )位置的位`(e - s) <= g`作为“右对齐”数字，示例实现可能是：

```
shift = s % g

lowerBits = data[ floor( s / g ) ] >> shift
upperBits = data[ floor( e / g ) ] << (g - shift)

bitSequence = (lowerBits | upperBits) & ( (1 << (e-s)) -1 )[*] 
```

[*] 这最后一项只是掩盖了我们可能得到的任何不需要的高位，并将它们`0`放在最终结果中。

（注意数据的字节顺序:)）

这是否真的会加快速度通常无法确定。（取决于正在处理的数据、底层计算硬件、使用的编译器等。请注意，需要一些除法和一次模运算，这可能会显着减慢算法速度。）

可以以相同的方式非常有效地逐个提取位。例如：

```
blockIndex = floor( bitPosition / g )
bitIndex = bitPosition % g
nextBit = (data[ blockIndex ] >> bitIndex) & 1 
```

这当然可以优化以避免重新计算`blockIndex`以及`bitIndex`如果和何时`bitPosition`总是只增加 1。

另一种常见的方法是使用变量“掩码”来提取单个位：

```
mask = 1
index = 0
while ( not all bits read ) { 
  block = data[index]
  if ( mask & block != 0 ) {
    // a 1 was encountered
  } else {
    // a 0 was encountered
  }
  mask = mask << 1
  if ( mask == 0 ) {
    mask = 1
    index = index + 1
  }
} 
```

请注意如何`mask`使用它来屏蔽当前位并跟踪何时前进到下一个数据块。为此`mask`，当然必须与`g`数据块具有相同的宽度。

总结一下：

我认为，在一般情况下，该解决方案不会比每次读取一次循环迭代更有效，并且任何优化只会稍微改变一个方向或另一个方向的性能。

# javascript - jQuery：检查字符串中是否存在特殊字符

> ID：13840143
> 
> 赞同：38
> 
> 时间：2012-12-12T12:46:52.440
> 
> 标签：javascript, jquery, special-characters

我知道这个问题在 Stack 上被问得更频繁，但我似乎无法从已经发布的问题中得到直接的答案。

我需要检查所有特殊字符（除了 - ）是否都在一个字符串中，如果是，那么给用户一个警报。

我到目前为止是这样的：

```
if($('#Search').val().indexOf('@') == -1 || $('#Search').val().indexOf('#') == -1 || $('#Search').val().indexOf('$') == -1 || $('#Search').val().indexOf('%') == -1 || $('#Search').val().indexOf('^') == -1 || $('#Search').val().indexOf('&') == -1 || $('#Search').val().indexOf('*') == -1 || $('#Search').val().indexOf('(') == -1 || $('#Search').val().indexOf(')') == -1 || $('#Search').val().indexOf('_') == -1 || $('#Search').val().indexOf('\'') == -1 || $('#Search').val().indexOf('\"') == -1 || $('#Search').val().indexOf('\\') == -1 || $('#Search').val().indexOf('|') == -1 || $('#Search').val().indexOf('?') == -1 || $('#Search').val().indexOf('/') == -1 || $('#Search').val().indexOf(':') == -1 || $('#Search').val().indexOf(';') == -1 || $('#Search').val().indexOf('!') == -1 || $('#Search').val().indexOf('~') == -1 || $('#Search').val().indexOf('`') == -1 || $('#Search').val().indexOf(',') == -1 || $('#Search').val().indexOf('.') == -1 || $('#Search').val().indexOf('<') == -1 || $('#Search').val().indexOf('>') == -1 || $('#Search').val().indexOf('{') == -1 || $('#Search').val().indexOf('}') == -1 || $('#Search').val().indexOf('[') == -1 || $('#Search').val().indexOf(']') == -1 || $('#Search').val().indexOf('+') == -1 || $('#Search').val().indexOf('=') == -1)
{
   // Code that needs to execute when none of the above is in the string
}
else
{
  alert('Your search string contains illegal characters.');
} 
```

但这似乎不起作用......有人可以在这件事上帮助我吗？

提前致谢！

圭多

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-12-12T12:50:50.887

如果您真的想检查所有这些特殊字符，使用正则表达式会更容易：

```
var str = $('#Search').val();
if(/^[a-zA-Z0-9- ]*$/.test(str) == false) {
    alert('Your search string contains illegal characters.');
} 
```

`a-z`以上将只允许完全由范围内的字符组成的字符串，,,，`A-Z`加上`0-9`连字符和空格字符。包含任何其他字符的字符串将导致`alert`.

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-12T13:06:26.940

```
var specialChars = "<>@!#$%^&*()_+[]{}?:;|'\"\\,./~`-="
var check = function(string){
    for(i = 0; i < specialChars.length;i++){
        if(string.indexOf(specialChars[i]) > -1){
            return true
        }
    }
    return false;
}

if(check($('#Search').val()) == false){
    // Code that needs to execute when none of the above is in the string
}else{
    alert('Your search string contains illegal characters.');
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-12T13:24:54.790

您也可以使用白名单方法 -

```
var str = $('#Search').val();
var regex = /[^\w\s]/gi;

if(regex.test(str) == true) {
    alert('Your search string contains illegal characters.');
} 
```

此示例中的正则表达式是数字、单词字符、下划线 (\w) 和空格 (\s)。插入符号 (^) 表示我们要查找不在正则表达式中的所有内容，因此请查找不是单词字符、下划线、数字和空格的内容。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T12:49:20.377

您正在检查字符串是否包含*所有*非法字符。`||`将s更改为`&&`s。

# php - 用php更新Mysql

> ID：13840145
> 
> 赞同：2
> 
> 时间：2012-12-12T12:47:05.150
> 
> 标签：php, mysql, database, forms

如果有测验，我有一个积分系统。当他们从测验中单击提交时，我希望他们在 mysql 中获得 +1 积分。我有一个名为登录和表用户的数据库，并且在用户中，我希望在他们完成测验时将分数更新为 1+。我使用的 quiz_form 的代码：

```
:<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Registration Form</title>
</head>

<body>
<table width="328" border="0" align="center">
<form id="form1" name="form1" method="post" action="script.php">
<tr>
<td colspan="2"><h2 style="color:#FF0000">Quiz1</h2></td>
</tr>
<tr>
<td>UserName:</td>
<td>
<input name="txtusername" type="text" id="txtusername" value="<?php
session_start();

if ($_SESSION['username'])
{

     echo "".$_SESSION['username'];

}

else
    header ("location: welcome1.html");

?>
" />
</td>
</tr>
<tr>
<td>Who is Obama?</td>
<td><input type="password" name="txtPassword" id="txtPassword" /></td>
</tr>
<tr>
  <td>What was the bing thing that were going to happend in 2012?</td>
  <td><input type="text" name="txtemail" id="txtemail" /></td>
</tr>
<tr>
<td>What is a farrari?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />

</td>
</tr>
<tr>
<td>What is a spoon used for?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td>Witch letter does this url start with?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td>Are COD a game?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td colspan="2" align="center">
<input type="submit" name="btnRegister" id="btnRegister" value="submit" />

</td>
</tr>
</form>
</table>
<table width="328" border="0" align="center">
<form id="form1" name="form1" method="post" action="script2.php">
<tr>
<td colspan="2"><h2 style="color:#FF0000">Quiz2</h2></td>
</tr>
<tr>
<td>UserName:</td>
<td>
<input name="txtusername" type="text" id="txtusername" value="<?php

if ($_SESSION['username'])
{

     echo "".$_SESSION['username'];

}

else
    header ("location: welcome1.html");

?>
" />
</td>
</tr>
<tr>
<td>Who evented facebook?</td>
<td><input type="password" name="txtPassword" id="txtPassword" /></td>
</tr>
<tr>
  <td>What is a cat?</td>
  <td><input type="text" name="txtemail" id="txtemail" /></td>
</tr>
<tr>
<td>What is a lamborgini?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />

</td>
</tr>
<tr>
<td>What is goodel used for?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td>What is the last letter in this url</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td>Are Counter strik a game?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td colspan="2" align="center">
<input type="submit" name="btnRegister" id="btnRegister" value="submit" />

</td>
</tr>
</form>
</table>
<table width="328" border="0" align="center">
<form id="form1" name="form1" method="post" action="script3.php">
<tr>
<td colspan="2"><h2 style="color:#FF0000">Quiz3</h2></td>
</tr>
<tr>
<td>UserName:</td>
<td>
<input name="txtusername" type="text" id="txtusername" value="<?php

if ($_SESSION['username'])
{

     echo "".$_SESSION['username'];

}

else
    header ("location: welcome1.html");

?>
" />
</td>
</tr>
<tr>
<td>What is yourube used for?</td>
<td><input type="password" name="txtPassword" id="txtPassword" /></td>
</tr>
<tr>
  <td>What is a dog?</td>
  <td><input type="text" name="txtemail" id="txtemail" /></td>
</tr>
<tr>
<td>What is a kebab?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />

</td>
</tr>
<tr>
<td>Who is the most famed tenager in 2012/13?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td>What is the 4th letter in this url?</td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td>100*2 - 5 +105 -55 +45= </td>
<td>
<input type="text" name="txtnummer" id="txtnummer" />
</td>
</tr>
<tr>
<td colspan="2" align="center">
<input type="submit" name="btnRegister" id="btnRegister" value="submit" />

</td>
</tr>
</form>
</table>
</body>
</html> 
```

这是我用于测验的脚本：

```
<?php
//=============Configuring Server and Database=======
$host        =    'localhost';
$user        =    'root';
$password    =    '';
//=============Data Base Information=================
$database    =    'login';

$conn        =    mysql_connect($host,$user,$password) or die('Server Information is not Correct'); //Establish Connection with Server
mysql_select_db($database,$conn) or die('Database Information is not correct');

//===============End Server Configuration============

//=============Starting Registration Script==========

$username    =    mysql_real_escape_string($_POST['txtusername']);

//=============To Encrypt Password===================

//============New Variable of Password is Now with an Encrypted Value========

if(isset($_POST['btnRegister'])) //===When I will Set the Button to 1 or Press Button to register
{
$query = mysql_query("SELECT * FROM quiz WHERE username='$username'");
if(mysql_num_rows($query) > 0 ){
echo "Sorry but you can only take a quize once:S";

}else{

mysql_query ("insert into quiz(username)values('$username')");
$sql = "UPDATE users SET points = COALESCE(level,0)+1 WHERE username = $username";
header('location: succes.php');
}
}
?> 
```

再次，这项工作很棒。但我只需要让他们再获得 1 分。所以如果他们有 10 分并参加了这个测验，他们在点击提交后会得到 11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:08:20.143

试试这个更新查询

```
 $qry = "UPDATE users SET points = points+1 WHERE username = $username" 
```

正如评论中所说，开始使用 PDO 或 MySqli 并为您的未来代码准备好语句，因为旧的 mysql 命令已被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:13:56.790

我觉得你这里有问题：

```
$sql = "UPDATE users SET points = COALESCE(level,0)+1 WHERE username = $username"; 
```

所以，如果你这样做。

尝试这个，

```
$sql = "UPDATE users SET points = COALESCE(level+1,0) WHERE username = $username"; 
```

# android - eclipse _out xml 文件

> ID：13840146
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:47:06.963
> 
> 标签：android, eclipse

> **可能重复：**
> [Android sdk main.out.xml 解析错误](https://stackoverflow.com/questions/11641967/android-sdk-main-out-xml-parsing-error)

有时当我在布局 xml 文件中并意外点击运行按钮时，我会在目录中创建一个 x_out.xml 文件。就像我在 home.xml 中并点击运行，eclipse 创建 home_out.xml 并且它是空的，你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:48:20.177

您可以告诉 Eclipse 启动最新的启动配置，而不是尝试为当前文档/选择创建启动配置。**在 Preferences -> Run/Debug -> Launching 下，您可以选择“始终启动以前启动的应用程序”。**

编辑：您可能有一个插件，它定义了触发 XML 文件的启动快捷方式。这听起来像是一件很愚蠢的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:50:00.657

当您在 eclipse 中安装一些 xml-plugins 时会发生这种情况。

如果其他项目不需要这些 xml 插件，则可以删除它们。Eclipse 将 xml 文件识别为您的 android 项目的一部分，并直接启动 android 项目

当您在选中一个 XML 文件的情况下单击 Run 按钮时，Eclipse 正在对该 XML 运行 XSL 转换并生成 .out.xml 文件作为结果。这是 Eclipse Web Tools 特性的一个特性，如果您安装了 Eclipse for Java EE Developers 包（它也可能包含在其他包中），您将拥有该特性。

**要删除此错误 -**

> 打开首选项并导航到运行/调试>启动；您会在窗口底部的启动操作下找到该选项。

# c# - 为什么 Eval("ID") 在 asp:LinkBut ton 中不起作用？

> ID：13840147
> 
> 赞同：0
> 
> 时间：2012-12-12T12:47:09.343
> 
> 标签：c#, asp.net, asplinkbutton

我的代码是

```
<asp:LinkButton ID="LinkButton1" runat="server" 
 PostBackUrl='<%# String.Format("~/WebForms/AnaEkran_EPDK.aspx?id={0}", Eval("ID")) %>' >
</asp:LinkButton> 
```

和

```
<a href="~/WebForms/AnaEkran_Bayi.aspx?id=<%# Eval("ID") %>" >.....</a> 
```

他们不工作。在链接按钮输出上是一个 javascript:__doPostBack('LinkBut​​ton1', '')，为什么 id 不接受？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:01:16.307

寻找`OnClientClick` 链接按钮

**从后面的代码** 中将其放入页面加载中

```
LinkButton1.OnClientClick = "window.location = '~/WebForms/AnaEkran_EPDK.aspx?id="+ ID.toString() + "'; return false;" 
```

**或在 aspx 中执行此操作**

```
<asp:LinkButton ID="LinkButton1" runat="server" 
 OnClientClick="goToYourPage();" >
</asp:LinkButton> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:05:15.987

尝试将此属性添加到您的 LinkBut​​ton：

```
 href='<%#"~/WebForms/AnaEkran_Bayi.aspx?id="+Eval("ID")%>' 
```

# javascript - 使用 JS 函数将 HTML 中隐藏部分的图像添加到 JS 数组中，并将数组中的所有元素绘制到画布上

> ID：13840148
> 
> 赞同：0
> 
> 时间：2012-12-12T12:47:12.360
> 
> 标签：javascript, html5-canvas, kineticjs

我有以下函数，用于将 HTML 中隐藏部分的图像加载到 JavaScript 数组中：

```
window.onload = function(){
console.log("src " + document.getElementById("building").src);
    var sources = {};
        sources[0] = document.getElementById("building").src,
        sources[1] = document.getElementById("chair").src,
        //sources[2] = document.getElementById("drink").src

    loadImages(sources, drawImage);
}; 
```

一旦图像被加载到 JS 数组中，我调用“loadImages”函数：

```
function loadImages(sources, callback){
    var imagesDir = "";
    var images = {};
    var loadedImages = 0;
    var numImages = 0;

    console.log("length " + sources.length);
    for (var src in sources){
        numImages++;
    }
    console.log("Num Images " + numImages);

    var index=0;
    console.log("length " + sources.length);
    for (index=0;index < numImages ;index++){
        console.log(index);
        images[index] = new Image();
        images[index].src = imagesDir + sources[index];
        console.log("Adding " + sources[index]);
        callback(images[index]);
    }

    stage.add(imagesLayer); // should only be added once!!
} 
```

依次调用 drawImage() 方法：

```
function drawImage(imageObj) {
    //var layer = new Kinetic.Layer();

    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,
      // puts the image in teh middle of the canvas
      x: stage.getWidth() / 2 - 50 / 2,
      y: stage.getHeight() / 2 - 50 / 2,
      draggable: true
    });

    // add cursor styling
    canvasImage.on('mouseover', function() {
      document.body.style.cursor = 'pointer';
    });
    canvasImage.on('mouseout', function() {
      document.body.style.cursor = 'default';
    });

    imagesLayer.add(canvasImage);
  } 
```

此方法将图像绘制到画布的中心，并将它们的 'draggable' 属性设置为 true，以便可以在画布周围拖放它们。

JavaScript 全部在我的页面中，并且在我有一个隐藏部分中，我想在画布上绘制的所有图像都首先被加载。我这样做是因为它使图像在浏览器中加载和显示的速度比直接从源代码加载到 JavaScript 中要快得多。

图像使用以下 HTML 加载：

```
<img id="building" src="images/assets/building.png" alt="Asset" />
<img id="chair" src="images/assets/chair.gif" alt="Asset" />
<img id="drink" src="images/assets/drink.gif" alt="Asset" />
<img id="food" src = "images/assets/food.gif" alt="Asset"/> 
```

我正在将大约 40 张左右的图片加载到 HTML 中

目前我在画布上绘制了两个图像，“建筑”和“椅子”，但是由于某种原因，当我取消注释将`sources[2] = document.getElementById("drink").src`第三个图像绘制到画布上并在浏览器中查看页面时，我的画布没有t 显示在屏幕上，我得到一个控制台错误，上面写着，

> 未捕获的异常：[异常...“组件返回失败代码：0x80040111（NS_ERROR_NOT_AVAILABLE）[nsIDOMCanvasRenderingContext2D.drawImage]”nsresult：“0x80040111（NS_ERROR_NOT_AVAILABLE）”位置：“JS 框架 :: [http://www.html5canvastutorials.com/libraries /kinetic-v4.1.2.js](http://www.html5canvastutorials.com/libraries/kinetic-v4.1.2.js) :: :: line 4222" 数据：无]

我正在使用 Kinetic.js 库 (http://kineticjs.com/)，在我看来，这个错误似乎在库中......

有谁知道是否是这种情况？或者我的代码中有什么地方做错了导致这个错误发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:24:26.960

这不是库中的错误，而是该图像的错误。要么获取错误的 src 属性，要么该位置不存在该图像。确保您的网址、文件类型/名称正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:52:44.720

试试这个

```
 var img = new Image();
    img.onload = function()
    {
        // some code here
    }
    img.src = 'assets/.../image.png'; 
```

# spring - 如何强制 jboss 使用 WAR 中的 hibernate-entitymanager.jar 而不是 Jboss_home 目录

> ID：13840150
> 
> 赞同：0
> 
> 时间：2012-12-12T12:47:25.710
> 
> 标签：spring, maven, jboss

我的问题如下，我在我的 WS 应用程序`Hibernate-entitymanager-3.5.6-FINAL`jar 中使用，如果我没记错 3.3.x，JBOSS 4.2.3 会在他的方向上休眠，这会导致版本冲突。不要将我重定向到`ClassLoader`我已经阅读过的JBOSS的相关文章，并将其放入`JBOSS_HOME\server\default\deploy\management\console-mgr.sar\web-console.war\WEB-INF\jboss-web.xml`

```
<class-loading java2ClassLoadingCompliance="false">
 <loader-repository>
  pl.mycompany:archive=hibernate-entitymanager 
  <loader-repository-config>java2ParentDelegation=false</loader-repository-config> 
 </loader-repository>
</class-loading> 
```

谁能给我一个提示我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T21:15:40.407

请参阅文章[ClassLoadingConfiguration](https://community.jboss.org/wiki/classloadingconfiguration)：

他们提到了**唯一存档名称**

* * *

对于 jboss-service.xml：

```
<server>
   <loader-repository>
      com.example:archive=unique-archive-name
      <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
   </loader-repository> 
```

...

隔离的 EAR 或 WAR 存储库将按以下顺序加载其库：

```
WEB-INF/lib (for WARs)

libraries in server/default/lib

tomcat-libraries in server/default/deploy/jbossweb-tomcat50.sar (jboss-3.2.6). 
```

server/default/lib 中的库与 jbossweb-tomcat50.sar 混合在一起，没有特定的顺序（有关详细信息，请查看 JMX 控制台中的 loader-repository）。

* * *

第二种解决方案：从 jboss 中删除休眠类（移至认可）。

# math - OpenGL FPS相机相对于lookAt目标的移动

> ID：13840152
> 
> 赞同：0
> 
> 时间：2012-12-12T12:47:30.280
> 
> 标签：math, opengl, perspectivecamera

我在 OpenGL 中有一个摄像头。在添加 FPS 控制器之前，我对它没有任何问题。问题是基本的 FPS 行为还可以。相机向前、向后、向左和向右移动+朝鼠标输入提供的方向旋转。当相机移动到目标位置的两侧或后面时，问题就开始了。在这种情况下，相机局部向前、向后、向左、向右方向不会根据其当前的前视进行更新，但与它就在目标前面一样保持不变。示例：如果目标对象位置在 (0,0,0) 并且相机位置在 (-50 ,0,0) （在目标的左侧）并且相机正在看着目标，然后来回移动它我必须使用左右移动键，而后退/前进键将相机侧向移动。这是我用来计算相机位置的代码，

```
void LookAtTarget(const vec3 &eye,const  vec3 &center,const  vec3 &up)
{

    this->_eye = eye;
    this->_center = center;
    this->_up = up;
    this->_direction =normalize((center - eye)); 

    _viewMatrix=lookAt( eye,  center , up);
    _transform.SetModel(_viewMatrix );
    UpdateViewFrustum();
}

void SetPosition(const vec3 &position){
    this->_eye=position;
    this->_center=position + _direction;
    LookAtTarget(_eye,_center,_up);
}
void SetRotation(float rz , float ry ,float rx){
    _rotationMatrix=mat4(1);
    vec3 direction(0.0f, 0.0f, -1.0f);
    vec3 up(0.0f, 1.0f, 0.0f);

    _rotationMatrix=eulerAngleYXZ(ry,rx,rz);
    vec4 rotatedDir= _rotationMatrix * vec4(direction,1) ;
    this->_center = this->_eye + vec3(rotatedDir);

    this->_up =vec3( _rotationMatrix * vec4(up,1));

    LookAtTarget(_eye, _center, up);

} 
```

然后在渲染循环中设置相机的变换：

```
 while(true)
{
    display();
    fps->print(GetElapsedTime());
    if(glfwGetKey(GLFW_KEY_ESC) || !glfwGetWindowParam(GLFW_OPENED)){
        break;
    }

    calculateCameraMovement();

    moveCamera();

    view->GetScene()->GetCurrentCam()->SetRotation(0,-camYRot,-camXRot);

    view->GetScene()->GetCurrentCam()->SetPosition(camXPos,camYPos,camZPos);

} 
```

lookAt() 方法来自[GLM](http://glm.g-truc.net/)数学库。我很确定我必须将一些向量（眼睛、中心等）与旋转矩阵相乘，但我不确定哪些向量。我试图将 _viewMatrix 乘以 _rotationMatrix 但它会造成混乱。FPS 摄像机位置的代码和旋转计算取自[这里](http://r3dux.org/2011/05/simple-opengl-keyboard-and-mouse-fps-controls/)。但对于实际渲染，我使用可编程管道。

**更新：** 我通过添加一个单独的方法解决了这个问题，该方法不使用lookAt计算相机矩阵，而是使用通常和基本的方法：

```
void FpsMove(GLfloat x, GLfloat y , GLfloat z,float pitch,float yaw){
    _viewMatrix =rotate(mat4(1.0f), pitch, vec3(1, 0, 0));
    _viewMatrix=rotate(_viewMatrix, yaw, vec3(0, 1, 0));
    _viewMatrix= translate(_viewMatrix, vec3(-x, -y, -z));
    _transform.SetModel( _viewMatrix );
} 
```

它解决了这个问题，但我仍然想知道如何使用我在此处介绍的 lookAt() 方法使其工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:15:51.047

您需要更改相机的前进方向，这可能是固定的`(0,0,-1)`。您可以通过 camYRot（在 lookat 函数中计算）围绕 y 轴旋转方向，以便向前与相机指向的方向相同（在 z 轴和 x 轴构成的平面中）。

# maven-plugin - 如何在 maven mojo 中获取项目目录？

> ID：13840158
> 
> 赞同：6
> 
> 时间：2012-12-12T12:47:48.290
> 
> 标签：maven-plugin

我正在尝试将一些遗留代码包含在一个 Maven 插件中。遗留代码正在 OS 当前工作目录中写入其输出。我想将所有这些移到目标目录中。即如果我的项目嵌套是

```
A
-B
-C 
```

我在 B 或 C 中运行 mvn install，我在 B 或 C 中获得输出，并希望将它们移动到 B/target 和 C/target。更糟糕的是，如果我在 A 中启动 mvn install，B 和 C 的输出都会在 A 中结束，这显然非常糟糕（覆盖）。

我一直在寻找一种方法来获取当前项目文件夹（不是启动 mvn install 的地方），但到目前为止还没有发现任何不涉及将所有内容推回给用户的方法（命令行黑客、pom 黑客、属性文件等）。我还希望有一种方法可以在启动旧版之前更改工作目录，但 Java 不允许这样做。那么我应该如何进行呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-24T20:52:34.853

为了再次回答我自己的问题（经常发生在我身上），解决方案从这里开始：

```
/**
 * The maven project.
 * 
 * @parameter expression="${project}"
 * @readonly
 */
private MavenProject project; 
```

然后在设置方法中：

```
this.model = project.getModel();
this.build = model.getBuild();
this.finalName = build.getFinalName();
this.targetDir = new File(build.getDirectory()); 
```

这让*targetDir*指向正确的位置。然后遗留代码运行，随心所欲地放置点，插件通过将它们移动到目标目录中进行清理。

这对于初学者来说已经足够好了。但是有了 targetDir 可用，我实际上结束了对遗留代码的厕所培训，以便在正确的地方开展业务。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-30T13:10:39.080

快速说明：对于最新的 maven 插件，可以使用注释：

```
@Parameter(readonly = true, defaultValue = "${project}")
private MavenProject project; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-24T05:16:56.633

如果您只想获取构建工件的目录，这样做可能会更整洁：

```
/**
 * @parameter expression="${project.build.directory}/${project.build.finalName}"
 * @readonly
 */
private File outputPath; 
```

# list - JPQL 将 IN 与 LIKE 结合

> ID：13840159
> 
> 赞同：4
> 
> 时间：2012-12-12T12:47:49.240
> 
> 标签：list, jpql

JPQL 查询中是否有可能在`LIKE`列表中使用 a （与`IN`关键字一样）。

就像是：`"Select a From Table a WHERE a.field LIKE IN :list"`

这样我就可以像这样设置参数：`{"12%","13%","16%"}` 还是我必须动态链接许多 OR 子句？

THX，死灵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:12:19.013

我认为这不可能按照您喜欢的方式进行，但是您可以使用几个 OR'ed 条件，例如`Select * from table1 where x like "12%1234" OR x like "23%"`.

如果这不起作用，因为列表太长或其他原因，也许查看标准 api 以编程方式或您需要的条件？

# javascript - 在javascript中计算导数

> ID：13840162
> 
> 赞同：0
> 
> 时间：2012-12-12T12:48:00.160
> 
> 标签：javascript, precision, differentiation

要计算给定函数 Func 在给定点 x 处的导数值，为了获得良好的精度，人们会认为：

```
a = Fun( x - Number.MIN_VALUE)
b = Func( x + Number.MIN_VALUE)
return (b-a)/(2*Number.MIN_VALUE) 
```

现在对于任何`x + Number.MIN_VALUE`（或`x - Number.MIN_VALUE`）都在javascript中返回x。

我尝试了不同的值，并`1 + 1e-15`返回 1.000000000000001。试图获得更高的精度，`1 + 1e-16`返回`1`。所以我将不得不使用`1e-15`Number.MIN_VALUE 而不是`5e-324`.

在这种情况下，有没有办法在 javascript 中获得更好的精度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:58:38.397

实际上，这根本不是关于 javascript 的。

减少点之间的间隔不会增加导数的精度。关闭点中的函数值将在最后一位数字中计算出一些错误，最后，您的错误将比点分离大得多。然后，您将具有巨大相对误差的非常小的差异除以非常小的数字，您很可能会得到完全的垃圾。

获得更好的导数值的最佳方法是在多个点上计算函数（间隔不是很小），然后构造一个近似多项式并在您感兴趣的点上对其进行微分。

# opencv - 如何在opencv中管理计数器边界矩形

> ID：13840163
> 
> 赞同：0
> 
> 时间：2012-12-12T12:48:01.363
> 
> 标签：opencv

我一直在使用高斯状态模型测试背景减法。我正在使用 opencv 2.1.0。我可以生成场景前景的二值图像。现在我要做的就是绘制边界矩形以突出显示移动的对象。我已经使用 cvCountourBoundingRect 来获得覆盖计数的矩形。我面临的问题是在多个计数的情况下，有时附近的矩形重叠。在这里，有人可以建议我防止矩形重叠吗？在理想情况下，两个矩形不应重叠。它应该画一个更大的矩形，覆盖所有两个矩形。

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:34:24.190

在 OpenCV 中没有现成的可能性来执行此操作。但实际上算法很简单：

1.  循环遍历所有矩形并检查两个矩形是否相互重叠。本主题将很有用：[确定两个矩形是否相互重叠？](https://stackoverflow.com/questions/306316/determine-if-two-rectangles-overlap-each-other)
2.  对于每对重叠的矩形，创建包含它们的矩形。为此，您应该从第一个矩形中选择一个角，从第二个矩形中选择另一个角，这两个角将为您创建矩形。我不认为这是一项艰巨的任务 - 只是简单的数学。

# php - 如何在多个站点中制作重复的帖子和页面 - Wordpress

> ID：13840164
> 
> 赞同：-1
> 
> 时间：2012-12-12T12:48:03.080
> 
> 标签：php, wordpress

我想通过功能或插件在wordpress上制作重复的帖子和页面，任何建议。

另外，我想将这些重复用于多站点功能。也就是说，如果我创建另一个站点，它可能会继承主站点的帖子和页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:59:10.447

您可以使用内置的导出/导入功能来做到这一点。在管理菜单的工具菜单下，您可以找到这两个选项。只需导出帖子和页面 XML 文件。然后在您的新站点或多站点上，您可以导入该 XML 文件。您还可以选择在导入时下载所有媒体，这将带来图像、PDF 等。

这是文档：

[http://codex.wordpress.org/Tools_Export_Screen](http://codex.wordpress.org/Tools_Export_Screen)

[http://codex.wordpress.org/Tools_Import_Screen](http://codex.wordpress.org/Tools_Import_Screen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T04:17:40.247

我有一个包含新站点基本设置的子站点。每当创建新子站点时，我都会使用主站点上的“多站点克隆器”插件来指定该“模板”子站点。

对于复制帖子/页面，您可以使用导出/导入过程。

但是现在（从您的问题开始 4 年后）有一个插件可以让您将页面或从一个子站点复制到另一个子站点：Multisite Post Duplicator ( [https://wordpress.org/plugins/multisite-post-duplicator/](https://wordpress.org/plugins/multisite-post-duplicator/) ) . 我还没有使用它（尽管我很快就会对其进行测试），但它有很好的评论并且似乎得到了维护。

我现在（四年后）添加此信息，因为在寻找类似需求时出现了这个问题。

# excel - 通过 excel vba 断开链接的 powerpoint

> ID：13840166
> 
> 赞同：3
> 
> 时间：2012-12-12T12:48:05.600
> 
> 标签：excel, vba, hyperlink, powerpoint

我正在尝试使用 VBA 脚本通过 Excel 更新带有嵌入图表的 PowerPoint 演示文稿。这适用于我的代码。问题是我还希望 - 在图表更新后 - 断开/删除指向 Excle 工作表的链接。

代码示例还显示了我的代码以及不起作用的行。

任何建议或解决方案将不胜感激！

```
Function RefreshPPT()
Set PPT = CreateObject("PowerPoint.Application")
PPT.Visible = True
PPT.Presentations.Open "Name.pptx", Untitled:=msoTrue
PPT.ActivePresentation.UpdateLinks
PPT.ActivePresentation.BreakLinks ------ this line doesn´t work
PPT.ActivePresentation.SaveAs Filename:="Name2.pptx"
PPT.Quit
Set PPT = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:07:48.700

感谢您的回答。

我想我已经解决了问题：breakline 命令的语法错误。我必须直接处理幻灯片和形状：

```
PPT.ActivePresentation.Slides(i).Shapes(s).LinkFormat.BreakLink 
```

# php - 在使用 php 加载不同内容的同时为特定页面设计 url

> ID：13840167
> 
> 赞同：0
> 
> 时间：2012-12-12T12:48:15.370
> 
> 标签：php, url, web, structure

**在设计网站时，对于url 设计**和相关后端来说，什么是好的做法。假设我有一个**网站**，上面有新闻帖子。我希望网址看起来像这样：

> mysite.com/news/newsItem1

通常，这样的 url 将引用服务器上名为 newsItem1 的文件夹。但在这种情况下，会有很多 newsItems（存储为 xml 文件），我认为为每个项目创建一个文件夹并不是一个好主意。

当我制作这样的网址时，也会发生同样的事情：

> mysite.com/news/newsItem1.html

在那种情况下，我将不得不为每个 newsItem 制作一个 html 文件。

我想要的是每个 newsItem 都不同的 url，但在服务器上它基本上指向一个 php 文件，该文件解析匹配的 xml 文件并返回其内容。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:08:37.333

为此，您必须使用允许您重新设计 url 的 .htacces。
您可以根据需要使用类似的东西：

```
http://www.mysite.com/news/newsItem.php?id=1 
```

并将 .htaccess 文件中 url 设计的重写规则写为：

```
RewriteEngine On
RewriteRule ^id/([^/]*)\.html$ /news/newsitem.php?id=$1 [L] 
```

结果将是：

```
http://www.mysite.com/id/1.html 
```

这是 .htaccess 教程的链接 [http://www.htaccess-guide.com/](http://www.htaccess-guide.com/)

# php - 将图像均匀分布到图库中的列

> ID：13840168
> 
> 赞同：2
> 
> 时间：2012-12-12T12:48:17.320
> 
> 标签：php, image, gallery, sinemacula

## 简要说明

我目前正在构建一个包含三列的画廊，每列包含的图像都具有相同的宽度，但高度可以不同。

`glob()`列的图像从目录中收集并使用 PHP函数放入数组中。这是简单的部分...

画廊的外观示例：

![画廊的基本设计](../Images/ebed299117fd2ab4bfa6b7927cf606d2.png)

## 问题

由于这些图像被动态加载并放置到列中，因此列的高度可能会有很大差异。

例如，如果将两张肖像照片放在第 1 列中，而将两张风景照片放在第 2 列中，那么这些列将非常不均匀，如下所示：

![这个设计的问题](../Images/f1512191438c7738e8f47da1ec84a4d7.png)

列的高度不太可能匹配，但我希望它们与给定的图像尽可能接近，因此想形成一个算法来查看检索到的图像并将它们放在列中返回尽可能接近高度的三列。

因此，例如，脚本将通过重新排序图像并像这样放置它们来纠正上述问题：

![图像排序结果](../Images/08400417ab53b42a6cf3b3d7198856f7.png)

如果我有正确的算法，我可以写这个，我只是想不出最好的步骤来做到这一点。任何人都可以建议任何步骤吗？

## 可能的解决方案

我想到的一种方法（我认为会有更好的方法，因为我认为这是有缺陷的）：

1.  将所有图像的高度相加，然后除以列数 (3)。这将为我们提供目标高度
2.  将图像分配到列数组，当它超过列的高度时，溢出到下一列。
3.  将任何剩余的图像放入第一列，然后是第二列等...

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:12:24.670

我建议以下内容：

1.  将您的图像从最高到最短排列成一个数组（假设您的宽度是恒定的）
2.  将图像添加到第一列数组
3.  将图像添加到下一列数组，直到总高度等于或大于前一列数组
4.  重复步骤 2 和 3，直到使用所有图像（您甚至可以按升序和降序交替填充列以帮助解决问题）
5.  在将图像添加到列之前，随机播放图像数组以使网格线显得随机
6.  调整较短列的图像上的垂直边距以匹配最高列的总高度（某种垂直对齐对齐）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:30:08.267

你可以试试这样的东西。创建数组：

```
$totalHeight = array(
 1 => 0, //Column 1
 2 => 0, //Column 2
 3 => 0 //Column 3
); 
```

将图像添加到具有最小**$totalHeigth**的列，并通过添加图像高度**增加该列的高度。**

所以如果在某个循环中你有这样的数组：

```
$totalHeight = array(
 1 => 2500, //Column 1
 2 => 1950, //Column 2
 3 => 2450 //Column 3
); 
```

您将知道需要在第 2 列中添加图像。

# javascript - Javascript - 通过纬度和经度以编程方式返回附近的地方

> ID：13840170
> 
> 赞同：-2
> 
> 时间：2012-12-12T12:48:21.330
> 
> 标签：javascript, jquery, localization, geolocation, openstreetmap

是否有可能获得附近的地方，提供纬度和经度？

例如，如果我想要提供的纬度、经度周围 50 公里范围内的地方，我该如何实现呢？

有没有算法/公式？

我正在使用[OpenStreetMap](http://www.openstreetmap.org/)地理位置

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:55:20.637

您可以使用以下公式计算两个给定坐标之间的距离：(lat1, lon1) 和 (lat2, lon2)

```
dist = arccos(sin(lat1) · sin(lat2) + cos(lat1) · cos(lat2) · cos(lon1 - lon2)) · R 
```

参考：[Great-circle_distance](http://en.wikipedia.org/wiki/Great-circle_distance)

现在假设您将所有这些坐标保存在数据库中，然后您可以运行查询以查找范围 50 公里内的所有位置。

```
SELECT * FROM Places WHERE acos(sin(1.3963) * sin(Lat) + cos(1.3963) * cos(Lat) * cos(Lon - (-0.6981))) * 6371 <= 50; 
```

也可以在 Javascript 中执行此操作。您需要使用一些数学函数并遍历存储坐标的数组以检查距离。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:59:53.093

我认为您可以使用此公式根据 lat/lng 找到 2 点之间的距离。然后，您可以将其用于您的目的：

```
var kmBetween = function(a, b){ 
    var e = Math, ra = e.PI/180; 
    var b = b.lat * ra, c = a.lat * ra, d = b - c; 
    var g = b.lng * ra - a.lng * ra; 
    var f = 2 * e.asin(e.sqrt(e.pow(e.sin(d/2), 2) + e.cos(b) * e.cos(c) * e.pow(e.sin(g/2), 2))); 
    return f * 6378.137; 
}

var distance = kmBetween({
                          lat: 45.5,
                          lng: 33.4
                         },
                         {
                          lat: 44.3,
                          lng: 32.4
                        }); 
```

# android - greendao 左加入困境

> ID：13840171
> 
> 赞同：3
> 
> 时间：2012-12-12T12:48:27.643
> 
> 标签：android, greendao

我正在使用greenDao，我需要从几个类似于左连接功能的表中提取数据。这是我的模式生成器的引用：

```
private static void genRetailers(Schema schema) {
    // create retailer entity
    Entity retailerEntity = schema.addEntity("Retailer");
    retailerEntity.addIdProperty().notNull();
    retailerEntity.addStringProperty("title");

    Entity shopEntity = schema.addEntity("Shop");
    shopEntity.addIdProperty().notNull();
    shopEntity.addStringProperty("address");
    Property retailerId = shopEntity.addLongProperty("retailerId")
            .getProperty();
    // (1) Retailer < - > (*) Shop
    retailerEntity.addToMany(shopEntity, retailerId);
} 
```

当我做：

```
 return (ArrayList<Retailer>) mDaoSession.getRetailerDao()
                .queryBuilder().list(); 
```

我只获取零售商表本身的内容，但是我还需要为空的 Shop 实体值。只有在我打电话`getShops()`给实体后才会被填满。我需要在第一次查询时填写实体。它是怎么做的？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-07T16:55:52.650

使用 queryDeep 方法：

```
return mDaoSession.getRetailerDao().queryDeep(null); 
```

# linux - 如何使用 perf 在多处理器计算机中获取每条 cpu 消息？

> ID：13840175
> 
> 赞同：1
> 
> 时间：2012-12-12T12:48:36.963
> 
> 标签：linux, multiprocessing, perf

我的工作是使用`perf`. 包括缓存未命中、LLC-loads、LLC-load-misses、LLC-stores、LLC-store-misses 等等，我只得到总的统计数据。

有没有办法区分它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:39:24.017

根据您的版本，`perf`您可以使用`-a`和`-C`开关的组合。

来自[kernel.org 的 perf wiki](https://perf.wiki.kernel.org/index.php/Tutorial#Processor-wide_mode)：

> 演示机只有两个 CPU，但我们可以限制为 CPU 1。
> 
> ```
>  perf stat -B -e cycles:u,instructions:u -a -C 1 sleep 5
> 
>     Performance counter stats for 'sleep 5':
> 
>     301,141,166 cycles
>     225,595,284 instructions             #      0.749 IPC
> 
>     5.002125198  seconds time elapsed 
> ```

所以，如果你有 4 个处理器，你可以这样做：

```
perf stat -B -e cycles:u,instructions:u -a -C 0 sleep 5
perf stat -B -e cycles:u,instructions:u -a -C 1 sleep 5
perf stat -B -e cycles:u,instructions:u -a -C 2 sleep 5
perf stat -B -e cycles:u,instructions:u -a -C 3 sleep 5 
```

# c# - 将两个文本框值添加到第三个 C# 时出错

> ID：13840177
> 
> 赞同：0
> 
> 时间：2012-12-12T12:48:40.880
> 
> 标签：c#, textbox

我正在尝试插入`textbox1 + textbox2 = textbox3`. `selectAll();`并且我所有的文本框在进入文本框时都设置为。因此，当我输入`textbox1`所有文本时，所有文本都将处于选择模式，如果我单击退格键，所有数据都将被删除，并且会发生错误，例如

> *输入字符串的格式不正确*

我的代码是

```
textBox3.Text = (int.Parse(textBox1.Text) + int.Parse(textBox2.Text)).ToString();` 
```

我试过了

```
 if (textBox1.Text != "")
        {
            textBox3.Text = (int.Parse(textBox1.Text) + int.Parse(textBox2.Text)).ToString();
        } 
```

在这种情况下，当我单击退格键时，文本框三中的值没有改变。意味着文本框将为空。这就是为什么价值在第三个文本框中没有改变的原因。请帮我。我怎么能克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:56:37.500

您假设您的输入 (`textBox1.Text`和`textBox2.Text`) 是整数。

如果他们不是，`int.Parse`将失败并给你你所看到的错误。

您需要使用`int.TryParse`：

```
int result1 = 0:
int.TryParse(textBox1.Text, out result1);
int result2 = 0:
int.TryParse(textBox2.Text, out result2);

textBox3.Text = (result1 + result2).ToString(): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T12:54:53.167

Int 不是可以为空的项目-并且由于您想要解析一个空值（在您的退格之后），因此它会导致错误。

改用 int.TryParase(value_to_parse ,out where to store 结果 Int) TryParse 返回一个布尔值来说明解析是否成功 问候

# mysql - mysql if 函数 - 子查询作为条件

> ID：13840181
> 
> 赞同：11
> 
> 时间：2012-12-12T12:48:48.930
> 
> 标签：mysql, subquery, conditional

我相信以下查询是不言自明的：

```
SELECT IF (SELECT COUNT(*) FROM mytable > 0, 'yes', 'no'); 
```

为什么它不起作用？我应该如何纠正它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-12T12:51:15.567

将子查询括在括号中：

```
SELECT IF ((SELECT COUNT(*) FROM mytable), 'yes', 'no'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T12:51:47.733

这是你想要的吗？

```
SELECT IF(COUNT(*) > 0, 'yes', 'no') FROM mytable; 
```

* * *

1：

```
SELECT
  t1.*,
  (SELECT IF(COUNT(*) > 0, 'yes', 'no') FROM mytable) AS col1
FROM
  table t1; 
```

2：

```
SELECT
  t1.*,
  t2.*
FROM
  table t1,
  (SELECT IF(COUNT(*) > 0, 'yes', 'no') AS col1 FROM mytable) t2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T12:58:10.833

如果您的查询更复杂并且这只是一个简化的问题，我认为这对您来说是更好的解决方案

```
SELECT IF ( (SELECT COUNT(*) AS counter FROM myTable HAVING counter>0) , 'yes', 'no') 
```

所以你可以做更复杂的检查（即计数器> N或多个条件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T12:56:39.520

试试这个：

```
SELECT IF((SELECT COUNT(*) FROM mytable) > 0, 'yes', 'no'); 
```

# ruby-on-rails - Heroku Cedar 耙子版本

> ID：13840182
> 
> 赞同：0
> 
> 时间：2012-12-12T12:48:56.637
> 
> 标签：ruby-on-rails, heroku, rake

Heroku Cedar 使用什么版本的 Rake？

我的 gemfile 是 10.0.2 版本，部署代码确认它捆绑在 Heroku 上：

```
Installing rake (10.0.2) 
```

但是该应用程序无法启动，并且运行`heroku run rake db:migrate --app appname`或查看`heroku logs --tail`给了我 `/app/vendor/bundle/ruby/1.9.1/gems/rake-10.0.2/lib/rake.rb:24:in 'require': no such file to load -- rake/version (LoadError)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:20:25.997

`rake`Cedar 上没有预装，你只有一个空容器。所有依赖项都是从您的应用程序（例如 Bundler）中引入的。

# c# - AutoMapper 继承和 Linq

> ID：13840184
> 
> 赞同：19
> 
> 时间：2012-12-12T12:49:10.227
> 
> 标签：c#, .net, linq, automapper

我一直在研究如何在中使用继承，`AutoMapper`但我正在努力让它与`Linq`. 这是我的代码：

我在这里定义了我的映射：

```
CreateMap<Article, ArticleDetailsViewModel>()
    .Include<Article, ArticleNewsItemDetailsViewModel();

CreateMap<Article, ArticleNewsItemDetailsViewModel>(); 
```

`ArticleDetailsViewModel`是 的基类`ArticleNewsItemDetailsViewModel`。

现在问题出在这里，如果我有：

```
CreateMap<ArticleNewsItem, ArticleNewsItemDetailsViewModel>(); 
```

视图模型中的所有属性都会自动映射，因为它们与其对应的 Linq 对象同名。**但是**，因为我使用的是`Article => ArticleNewsItemDetailsViewModel`映射，所以这是不可能的，而是我必须将每个定义为：

```
.ForMember(x => x.Property1, opt => opt.MapFrom(src => src.ArticleNewsItem.Property1) 
```

我考虑过将所有属性从`ArticleNewsItemDetailsViewModel`一个新的视图模型中移出，并让该类成为其中的一个属性`ArticleNewsItemDetailsViewModel`，只要这两个对象之间存在映射，它就可以工作，但感觉不是很干净。

有什么办法可以避免这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:54:37.673

假设您有以下课程：

```
 public class Article
    {
        public string Prop1 { get; set; }
        public string Prop2 { get; set; }
        public ArticleNewsItem ArticleNewsItem { get; set; }
    }

    public class ArticleDetailsViewModel
    {
        public string Prop1 { get; set; }
    }

    public class ArticleNewsItemDetailsViewModel : ArticleDetailsViewModel
    {
        public string Prop2 { get; set; }
        public string Prop3 { get; set; }
    }

    public class ArticleNewsItem
    {
        public string Prop3 { get; set; }
    } 
```

映射应如下所示：

```
var res = Mapper.Map<Article, ArticleNewsItemDetailsViewModel>(_article);
Mapper.Map(_article.ArticleNewsItem, res); 
```

此外，您可以创建[自定义类型转换器](https://github.com/AutoMapper/AutoMapper/wiki/Custom-type-converters)以避免每次需要映射`Article`到`ArticleNewsItemDetailsViewModel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T15:39:52.850

抱歉，如果我在脑海中过度简化了这一点，但您不能简单地添加您提到的直接映射：

```
CreateMap<ArticleNewsItem, ArticleNewsItemDetailsViewModel>(); 
```

对我来说，这是最简单，最干净的解决方案......

**编辑** 对不起，我误解了。如果不通过 .ConstructUsing() 或 .ConvertUsing() 方法（或以不整洁的方式进行操作）创建自定义映射，则无法将对象映射到嵌套属性...

```
Mapper.CreateMap<Article, ArticleNewsItemDetailsViewModel>().ConstructUsing(ConstructItem) 
```

..然后创建您的方法来构建 ArticleNewsItemDetailsViewModel...

```
private static ArticleNewsItemDetailsViewModel ConstructItem(Article source)
    {
        var newsItem = new ArticleNewsItem
                           {
                               Prop1 = source.Prop1,
                               Prop2 = source.Prop2
                           };

        var result = new ArticleNewsItemDetailsViewModel()
                         {
                             ArticleNewsItem = newsItem
                         };

        return result;
    } 
```

但是，我仍然建议重新实施您的解决方案，以便您映射'like for like'。这是一个很好的例子：[http ://automapper.codeplex.com/wikipage?title=Nested%20Mappings](http://automapper.codeplex.com/wikipage?title=Nested%20Mappings)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T01:16:08.023

假设所有必需的属性都在文章中，您可以创建一个[自定义值解析器](http://automapper.codeplex.com/wikipage?title=Custom%20Value%20Resolvers)来执行此操作，例如

```
public class ArticleNewsItemResolver : ValueResolver<Article, ArticleNewsItem>
{
    protected override ArticleNewsItem ResolveCore(Article source)
    {
        return Mapper.DynamicMap<Article, ArticleNewsItem>(source);
    }
}
...

CreateMap<Article, ArticleNewsItemDetailsViewModel>()
    .ForMember(src => src.NewsItem, opt => opt.ResolveUsing<ArticleNewsItemResolver>()); 
```

# sql-server-2000 - 如何在不使用 FIELDTERMINATOR 的情况下通过 TSQL 批量插入

> ID：13840187
> 
> 赞同：1
> 
> 时间：2012-12-12T12:49:21.427
> 
> 标签：sql-server-2000

我想从 .dat 文件批量插入数据。
但问题是该文件不包含任何我可以分隔不同值的字符。
实际上该文件包含由考勤机生成的代码，代码看起来像

**31201201100915000100000043210001**
**31201205301806000200000043210011**

以上两行是员工**4321**
1 天的考勤，第一行是 TimeIn 条目，第二行是 TimeOut 条目，
详细信息如下

31 - 机器代码
2012 - 年
01 - 月
10 - 天
09 - 小时
15 - 最小值
0001 - 输入或输出（0001 表示输入，0002 表示输出)
0000000061 - 员工代码
0001 - 终端编号（终端输入为 0001，终端输出为 0011）

我可以批量导入此文件吗？如果是，那怎么办？谁能告诉我如何解决这个问题？

**谢谢**

我正在使用 SQL Server 2000 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:19:56.560

您需要使用 BULK INSERT 或 BCP 将数据放入临时表，然后使用 SUBSTRING() 和 CAST()/CONVERT() 函数解析出列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:26:00.050

使用 Environment.Newline 操作符将 dat 文件读入字符串

```
string[] Lines = System.IO.ReadAllLines("dat.file"); 
```

然后为每一行做一些事情

```
Int MachineCode = Lines[0].SubString(0,2);
Int Year = Lines[0].SubString(2,4); 
```

# c++ - 如何测试 HTTP 客户端

> ID：13840192
> 
> 赞同：0
> 
> 时间：2012-12-12T12:49:35.240
> 
> 标签：c++, http, testing, web-applications

我正在开发一个 HTTP 客户端。我想针对不同的 HTTP 状态代码、cookie 等测试其行为。是否有任何网站或任何其他方法可以这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:53:10.997

您的问题含糊不清，但这是我认为您要问的答案。

你有几个选择。

首先，您可以简单地以便宜或免费的方式获得一个帐户。这很容易完成，但是如果您需要，您将无法在服务器端进行大量控制。

其次，您可以设置本地 Web 服务器并针对它编写代码。你有很多选择；初学者请使用 Google IIS 或 Apache（取决于您的平台）。如果您想利用它们提供的一些附加功能，您甚至可以获得像 EasyPHP 或 WAMP 这样的完整包。

# java - Axis2 请求期间突然出现 SocketTimeoutException

> ID：13840193
> 
> 赞同：1
> 
> 时间：2012-12-12T12:49:38.213
> 
> 标签：java, sockets, httpclient, axis2

所以我有一个 Web 应用程序（在 tomcat 内），它使用来自外部提供商的 Axis2 Web 服务。我已经根据提供者的 WSDL 生成了我的 Web 服务客户端的代码。

该代码现在至少可以正常工作 6 个月。6 天前它停止工作，我收到了 SocketTimeoutException。测试服务器至少有一个月没有动过，所以我可以排除对 Java 二进制文件或服务器中设置的更改。

这是我的堆栈跟踪的多汁部分：

```
[2012-12-12 13:33:15.718 MEZ]: org.apache.axis2.AxisFault: Read timed out
[2012-12-12 13:33:15.718 MEZ]:  at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
[2012-12-12 13:33:15.718 MEZ]:  at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
[2012-12-12 13:33:15.718 MEZ]:  at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
[2012-12-12 13:33:15.718 MEZ]:  at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:389)
[2012-12-12 13:33:15.718 MEZ]:  at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:222)
[2012-12-12 13:33:15.718 MEZ]:  at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:435)
[2012-12-12 13:33:15.734 MEZ]:  at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:402)
[2012-12-12 13:33:15.734 MEZ]:  at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
[2012-12-12 13:33:15.734 MEZ]:  at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
[2012-12-12 13:33:15.734 MEZ]:  at my.generated.webservice.client.Quoting_ServiceStub.getQuotesByRequest(Quoting_ServiceStub.java:4215)
...
[2012-12-12 13:33:15.781 MEZ]: Caused by: java.net.SocketTimeoutException: Read timed out
[2012-12-12 13:33:15.781 MEZ]:  at java.net.SocketInputStream.socketRead0(Native Method)
[2012-12-12 13:33:15.781 MEZ]:  at java.net.SocketInputStream.read(SocketInputStream.java:129)
[2012-12-12 13:33:15.781 MEZ]:  at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
[2012-12-12 13:33:15.781 MEZ]:  at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
[2012-12-12 13:33:15.796 MEZ]:  at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
[2012-12-12 13:33:15.796 MEZ]:  at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
[2012-12-12 13:33:15.796 MEZ]:  at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116) 
```

这发生在所有测试和生产系统（Windows 和 Linux）上。对于通信，我使用的是 HttpClient 3.1 (Apache commons)，并且已经重新启动了应用程序和机器，但没有成功。

现在这是奇怪的事情：我调试了我的 Web 服务客户端，并且能够使用 SoapUI（在 Windows 上）和 curl（在 Linux 上）将请求 XML 发送到 Web 服务服务器并得到响应（在 1.5 秒内快速合理） . 所以这也不是 DNS、防火墙或权限问题。

我很欣赏如何解决这个问题的任何想法。

# iphone - iPhone中的CGContextSetStrokeColorWithColor

> ID：13840196
> 
> 赞同：1
> 
> 时间：2012-12-12T12:50:04.850
> 
> 标签：iphone, objective-c, ios, xcode

我正在使用此代码`UITouches Moved`来绘制图像。

```
 UIGraphicsBeginImageContext(myimage.frame.size);

[myimage.image drawInRect:myimage.frame];

CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);

CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 10);

CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor colorWithPatternImage:[UIImage imageNamed:@"coloredImage.png"]].CGColor);

CGContextSetFillColorWithColor(UIGraphicsGetCurrentContext(), [UIColor clearColor].CGColor);

CGContextSetShouldAntialias(UIGraphicsGetCurrentContext(), YES);

CGContextBeginPath(UIGraphicsGetCurrentContext());

CGContextMoveToPoint(UIGraphicsGetCurrentContext(), previous.x, previous.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), touchLocation.x, touchLocation.y);
CGContextStrokePath(UIGraphicsGetCurrentContext());
myimage.image = UIGraphicsGetImageFromCurrentImageContext();
previous = touchLocation; 
```

在这里，当用户完全绘制图像时，我需要发出警报...即，我有一个图案图像，`myimage`并且`coloredImage`是`myimage`在用户触摸时绘制的图像。我怎样才能知道用户是否完成了图像的绘制？

# android - Android 布局：使用dimen 只是为了一些分辨率

> ID：13840200
> 
> 赞同：0
> 
> 时间：2012-12-12T12:50:10.797
> 
> 标签：android, android-layout

我正在尝试制作一个图像，该图像在除一个之外的所有分辨率中都保留其大小...我想要的是使用“wrap_content”属性作为高度并用dimen属性覆盖它，但仅适用于特定情况（例如值-xlarge）。我确实喜欢这样：

```
 <ImageView android:id="@id/image_frame"
    android:layout_width="match_parent"
    android:layout_height="@dimen/overlayImageHeight" /> 
```

但是，如果我没有在所有 dimen.xml 文件中定义 overlayImageHeight，它当然会崩溃。我试图为其他 dimen.xml 文件放置一个“wrap_content”字符串，但它再次失败，因为 dimen 文件只接受里面的数值。

有没有办法在 xml 文件中定义这种行为？以编程方式进行的其他方式？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T12:58:54.793

您应该给它一个样式，在 中定义样式`res/values/styles.xml`，然后在 中制作不同版本的样式`res/values-xhdpi/styles.xml`。

# c# - SoundEffect 随机降低音量

> ID：13840206
> 
> 赞同：1
> 
> 时间：2012-12-12T12:50:32.820
> 
> 标签：c#, windows-phone-7, xna, nokia

我正在为 wp7 开发游戏，但我遇到了声音问题。

大多数时候，当我播放声音（点击按钮或类似的东西）时，它会完美播放。但是有时，在一段时间内，音量会急剧下降（只有音量，我播放的是背景音乐，听起来不错），然后突然以正确的音量播放。

这个问题是绝对随机的；有时一切正常，所以我不知道如何重现错误...

这是我播放声音的代码：

```
public static void PlaySound(string sound)
{
    SoundEffect s = EngineGame.Sounds[sound];
    currentSound = s.CreateInstance();
    currentSound.Play();
    System.Diagnostics.Debug.WriteLine("Volume: " + currentSound.Volume);
} 
```

顺便说一下，“writeline”总是显示 1.0，所以问题不完全在于音量本身......

PS：我正在诺基亚 710 上测试游戏（如果相关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T04:37:12.473

这只是命中和跟踪解决方案：不要在每次播放该声音时都创建音效实例。您可以通过编写以下代码直接播放声音

音效鼓；鼓 = Content.Load("位置");

在方法里面只写这段代码

鼓.Play();

希望它有效。

# r - 字符向量作为 R 脚本的参数

> ID：13840207
> 
> 赞同：3
> 
> 时间：2012-12-12T12:50:38.673
> 
> 标签：r

我正在运行 R 脚本，但遇到错误：

Rscript 示例.R "a,b,c"

我在代码上方运行，其中 a、b、c 是作为参数传递的字符向量的元素。如果我传递数值（例如 1、5、6），上面的代码可以正常工作

```
Code is :
library("optparse")
library("tldutils") # eval_string
# install.packages("tldutils", repos="http://R-Forge.R-project.org")
option_list <- list(
make_option(c("-c", "--count"), type="character", default="5",
help='Vector of numbers separated by commas and surrounded by ""',
metavar="number")
)
args <- parse_args(OptionParser(option_list = option_list))
print(args$c)
eval_string(sprintf("foo = c(%s)", args$c))
print(foo) 
```

错误是：

```
Error in eval(expr, envir, enclos) : object 'a' not found
Calls: eval_string -> eval.parent -> eval -> eval
Execution halted 
```

请帮助我，我需要在哪里编辑代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:47:47.653

不确定我是否得到了你所追求的，但我希望你能够自己弄清楚细节并解决你的问题。

将字符向量作为参数传递给 R 的最简单方法是使用该`commandArgs`函数（基本包的，无需安装任何花哨的东西）。

```
# Start R from the shell
$ R --args a,b,c

# Within R
> commandArgs()
[1] "/usr/lib64/R/bin/exec/R" "--args"                 
[3] "a,b,c" 
```

如果您只想获取`--args`使用后指定的参数`trailingOnly=TRUE`。添加`strsplit`变成`"a,b,c"`一个三元素向量。或者，将逗号更改为空格，您不需要`strsplit`.

```
$ R --args a,b,c
...
> strsplit(commandArgs(TRUE), ",")[[1]]
[1] "a" "b" "c"

$ R --args a b c
...
> commandArgs(T)
[1] "a" "b" "c" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T12:54:00.107

您传递给脚本的“a,b,c”被解释为变量名，而不是字符串。

编辑：无论如何，我不明白为什么要将数据作为参数传递，而不是a）从标准输入读取它或更好的b）使用例如从文件中读取它`read.table`

# android - 编辑 listView 内容 - Android

> ID：13840216
> 
> 赞同：2
> 
> 时间：2012-12-12T12:51:04.877
> 
> 标签：android, listview, android-listview, textview, android-arrayadapter

我有一个自定义`ArrayAdapter`设置为`listView`. 在每个元素中，`listView`我都有一个与我创建的 .xml 匹配的项目。代码如下所示：

**列表内容.xml**

```
<RelativeLayout
[... some code ommited]
    <ImageView
    [...]
    <TextView
    android:id="@+id/listViewText"
    [...] 
```

**Custom Array Adapter getView(int position, View convertView, ViewGroup parent)**

```
if (position < 4)
{
    convertView = inflater.inflate(R.layout.listContent,null);

    TextView tv = (TextView) findViewById(R.id.listViewText);

    tv.setTextSize(18);
    if (position == 0) tv.setText("0");
    else if (position == 1) tv.setText("1");
    else if (position == 2) tv.setText("2");
    else if (position == 3) tv.setText("3");

    return convertView;
}
return null; 
```

我似乎无法让它工作，我总是遇到一些错误。为了编辑`TextView`我的 listView 项目内部，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:54:48.860

将您的自定义阵列适配器 getView 代码更改为：

```
@Override
public View getView(int position, View convertView, ViewGroup parent){

 View row = convertView;

 if(row==null){
  LayoutInflater inflater=getLayoutInflater();
  row=inflater.inflate(R.layout.listContent, parent, false);
 }

 TextView tv=(TextView)row.findViewById(R.id.listViewText);

tv.setTextSize(18);
    if (position == 0) tv.setText("0");
    else if (position == 1) tv.setText("1");
    else if (position == 2) tv.setText("2");
    else if (position == 3) tv.setText("3");

 return row;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:00:58.340

改变

```
TextView tv = (TextView) findViewById(R.id.listViewText); 
```

到

```
TextView tv = (TextView) convertView.findViewById(R.id.listViewText); 
```

并删除这个

```
if (position < 4) 
```

# php - 左、中、右排列 div 标签

> ID：13840218
> 
> 赞同：0
> 
> 时间：2012-12-12T12:51:12.460
> 
> 标签：php, html

我的网站上有一个三栏。左、中、右[请点击这里查看](http://www.fedri.com)。问题是，左侧和中心栏的代码存在于页眉中，而右侧条码存在于网站的页脚中。

如果网页加载，它首先加载左侧和中心，加载右侧栏需要时间。我试图将右侧栏也保留在标题中。我不明白。我只是将右侧栏的代码从页脚复制到页眉，但它不起作用。如果我确实喜欢这个，那么只有左右栏在那儿，但中心栏在两者下方。

我的标题代码

```
<div id="main-cont">
    <!-- IF S_IN_TOPIC -->
        <div id="main-cont-left" style="width:100%;">
    <!-- ELSE -->
        <div id="main-cont-left">
    <!-- ENDIF -->
    <!-- IF not (S_IN_UCP or S_IN_MCP or S_CLUBS ) -->
    <!-- INCLUDE sidebar_left.html -->
    <!-- IF S_IN_TOPIC -->
        <div id="main-cont-left-main" style="width:720px;">
    <!-- ELSE -->
        <div id="main-cont-left-main">
    <!-- ENDIF -->  
    <!-- ELSE -->
    </div></div><div id="page-body">
    <!-- ENDIF --> 
```

我页脚中的代码是

```
<!-- IF not (S_IN_UCP or S_IN_MCP) -->
</div>
<br style="clear:both;" />
</div>
<!-- IF not S_IN_TOPIC -->
    <!-- INCLUDE sidebar_right.html -->
<!-- ENDIF -->
<br style="clear:both;" />
</div>
<!-- ELSE -->
</div>
<!-- ENDIF --> 
```

请提供我将保留在标题中的代码，以便同时加载所有栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:14:41.247

标题

> ```
> <div id="main-cont">
> <!-- IF S_IN_TOPIC -->
>     <div id="main-cont-left" style="width:100%;">
> <!-- ELSE -->
>     <div id="main-cont-left">
> <!-- ENDIF -->
> <!-- IF not (S_IN_UCP or S_IN_MCP or S_CLUBS ) -->
> <!-- INCLUDE sidebar_left.html -->
> <!-- IF S_IN_TOPIC -->
>     <div id="main-cont-left-main" style="width:720px;">
> <!-- ELSE -->
>     <div id="main-cont-left-main">
>     <!-- INCLUDE sidebar_right.html -->
> <!-- ENDIF -->  
> <!-- ELSE -->
> </div></div><div id="page-body">
> <!-- ENDIF --> 
> ```

页脚

> ```
> <!-- IF not (S_IN_UCP or S_IN_MCP) -->
> </div>
> <br style="clear:both;" />
> </div>
> <br style="clear:both;" />
> </div>
> <!-- ELSE -->
> </div>
> <!-- ENDIF --> 
> ```

由于模板将其包含在 IF not (S_IN_UCP 或 S_IN_MCP) & IF not S_IN_TOPIC 中，因此我只需将包含调用添加到标头的相应块中。

它通常可以工作（因为代码提供了以相同的方式加载左侧，仅上 3 行）但是因为我无法从他的系统中测试模板...

希望有帮助

# django - Django、Celery、RabbitMQ - 任务未执行

> ID：13840219
> 
> 赞同：0
> 
> 时间：2012-12-12T12:51:13.240
> 
> 标签：django, celery, django-celery

我已经像这样设置了我的 Django 环境：

```
INSTALLED_APPS = (
....
    'djcelery',

)

BROKER_URL = "amqp://guest:guest@localhost:5672//"
CELERY_IMPORTS = ('bulksms.tasks', 'premiumsms.tasks', 'reports.tasks')
CELERYBEAT_SCHEDULER = "djcelery.schedulers.DatabaseScheduler"

import djcelery
djcelery.setup_loader() 
```

在 Django 管理员中，我将我想要的任务添加到定期任务（我可以看到那里的所有任务）中，以便每分钟运行一次以进行测试，但该任务永远不会运行。

```
Running django then 
python manage.py celeryd -E --loglevel=DEBUG
python manage.py celerycam 
```

在 Djcelery 下的管理站点中，也没有添加任务的选项（不确定它是否曾经存在。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:50:46.163

如果你想用 Celery 运行定期任务，那么你需要运行 celerybeat 进程

```
python manage.py celery beat 
```

或在工作进程中使用另一个线程

```
python manage.py celery worker -E --loglevel=DEBUG -B 
```

请参阅有关启动调度程序的文档[http://celery.readthedocs.org/en/latest/userguide/periodic-tasks.html#starting-the-scheduler](http://celery.readthedocs.org/en/latest/userguide/periodic-tasks.html#starting-the-scheduler)

# asp.net-mvc-3 - 将 Webgrid 分页应用于表格

> ID：13840223
> 
> 赞同：0
> 
> 时间：2012-12-12T12:51:28.387
> 
> 标签：asp.net-mvc-3, webgrid

我的问题很简单。MVC3 有一个可用于分页的 Webgrid Helper。有没有办法在表格中使用这个助手而不是使用 webgrid？

请在这方面给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:50:31.990

Pager 助手需要一个 WebGrid 才能工作。如果您不想使用 WebGrid，您可以创建自己的分页链接。这篇文章解释了如何，虽然它基于网页框架，并展示了如何使用段落而不是表格： http: [//www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-网络网格](http://www.mikesdotnetting.com/Article/150/Web-Pages-Efficient-Paging-Without-The-WebGrid.)

但是，如果您想在表格中显示您的结果，我不知道您为什么不使用 WebGrid。它呈现一个表格。

# scrolltop - 如何使用 UICollectionView scrollToItemAtIndexPath 将特定项目定位到“左上角”？

> ID：13840229
> 
> 赞同：1
> 
> 时间：2012-12-12T12:51:48.393
> 
> 标签：scrolltop, uicollectionview, uicollectionviewcell

我正在使用带有自定义布局的 UICollectionView。每当重新加载collectionview时，我需要将{0,0}项目定位到contentView的左上角。如果我将滚动位置设置为“UICollectionViewScrollPositionTop”，它会将 {0,0} 项滚动到顶部，但不会滚动到左上角。

那么，该怎么做呢？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:10:26.350

使用 contentOffset 我很容易做到这一点。

即每次在我重新加载 UICollectionView 之前，我都将 collectionView 的 contentOffset 设置为 CGPointZero 而没有动画。效果很好！:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-04T12:27:56.937

使用该`UICollectionView scrollToItemAtIndexPath:`方法时，您可以（按位）组合滚动位置指示器，如下所示：

```
UICollectionView *collectionView = .....;
[collectionView scrollToItemAtIndexPath:indexPath
                       atScrollPosition: UICollectionViewScrollPositionTop | UICollectionViewScrollPositionLeft
                               animated:YES]; 
```

这样，您可以组合 x 轴和 y 轴滚动位置。希望这可以帮助！

# linux - 使用互斥锁但缺少数据的两个进程之间的共享内存

> ID：13840232
> 
> 赞同：4
> 
> 时间：2012-12-12T12:51:55.333
> 
> 标签：linux, ipc, mutex, shared-memory

[使用示例](https://stackoverflow.com/questions/2584678/how-do-i-synchronize-access-to-shared-memory-in-lynxos-posix)我创建了两个进程一个主进程和一个从属进程，以测试共享内存 IPC。主服务器创建共享内存并开始写入，并且在从属连接一段时间后，这正在工作，但是一旦从属连接它不会接收/获取主写入共享内存的所有数据。

主代码如下所示：

```
    typedef struct custom_data_s {
      最小;
      最大整数；
      /* 用以分享 */
      pthread_mutex_t ipc_mutex；
      pthread_cond_t ipc_condvar；
    } custom_data_t;

    诠释主要（无效）{
      int fd = -1;
      custom_data_t *this_custom_data;
      pthread_mutexattr_t 互斥属性；
      pthread_condattr_t cond_attr;

      fd = shm_open("/A_CUSTOM_DATA", O_RDWR | O_CREAT | O_EXCL , (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH));
      如果（fd == -1）{
        printf("错误 fd %d %s\n",fd,strerror(errno));
      }

     if (ftruncate (fd,sizeof(custom_data_t)) == -1) {
        printf("错误 trucate fd %d %s\n",fd,strerror(errno));
        退出（1）；
      }

      this_custom_data = (custom_data_t *) mmap(NULL, sizeof(custom_data_t), PROT_READ | PROT_WRITE , MAP_SHARED ,fd ,0);
      如果（this_custom_data ==（custom_data_t *）-1）{
        printf("错误映射 fd %d %s\n",fd,strerror(errno));
        退出（1）；
      }
      关闭（fd）；

      pthread_mutexattr_init(&mutex_attr);
      pthread_mutexattr_setpshared(&mutex_attr, PTHREAD_PROCESS_SHARED);
      pthread_mutex_init(&this_custom_data->ipc_mutex, &mutex_attr);

      pthread_condattr_init(&cond_attr);
      pthread_condattr_setpshared(&cond_attr, PTHREAD_PROCESS_SHARED);
      pthread_cond_init(&this_custom_data->ipc_condvar, &cond_attr);

     对于 (fd=0; fd != 100000; fd++) {
        pthread_mutex_lock(&this_custom_data->ipc_mutex);
        this_custom_data->min = fd;
        this_custom_data->max = fd+5;
        pthread_cond_signal(&this_custom_data->ipc_condvar);
        pthread_mutex_unlock(&this_custom_data->ipc_mutex);
      }
      /* 清理和退出应该检查所有的退出代码*/
      pthread_mutexattr_destroy(&mutex_attr);
      pthread_condattr_destroy(&cond_attr);

      pthread_cond_destroy(&this_custom_data->ipc_condvar);
      pthread_mutex_destroy(&this_custom_data->ipc_mutex);

      if(0 != munmap(this_custom_data, sizeof(custom_data_t))) {
        printf("错误取消映射 %s\n",strerror(errno));
        退出（1）；
      }  
      if (0 != shm_unlink("/A_CUSTOM_DATA")){
        printf("取消链接 %s 时出错\n",strerror(errno));
        退出（1）；
      }
      返回0；
    }

```

例如 master 在一段时间后从 1 到 10000 开始将 min 和 max 写入共享内存 一旦 slave 连接它应该读取 master 写入的所有数据但是如果在代码中一旦 slave 连接它仍然没有读取所有数据，什么我做错了吗？从站是否应该设置另一个条件变量？我正在尝试学习共享内存，但我认为我做错了什么或不了解互斥锁和共享内存的方式。在从机中，我正在等待设置条件变量，这是从机的代码。

```
    typedef struct custom_data_s {
      最小;
      最大整数；
      /* 用以分享 */
      pthread_mutex_t ipc_mutex；
      pthread_cond_t ipc_condvar；
    } custom_data_t;

    诠释主要（无效）{
      int fd = -1;
      custom_data_t *this_custom_data_ptr;
      custom_data_t this_data;
      int prv_packet = 0;

      fd = shm_open("/A_CUSTOM_DATA", O_RDWR , (S_IRUSR | S_IWUSR | S_IRGRP | S_IROTH));
      如果（fd == -1）{
        printf("错误 fd %d %s\n",fd,strerror(errno));
      }

      if (ftruncate (fd,sizeof(custom_data_t)) == -1) {
        printf("错误 trucate fd %d %s\n",fd,strerror(errno));
        退出（1）；
      }

      this_custom_data_ptr = (custom_data_t *) mmap(NULL, sizeof(custom_data_t), PROT_READ | PROT_WRITE , MAP_SHARED ,fd ,0);
      如果（this_custom_data_ptr ==（custom_data_t *）-1）{
        printf("错误映射 fd %d %s\n",fd,strerror(errno));
        退出（1）；
      }
      关闭（fd）；
    而（1）{
        pthread_mutex_lock(&this_custom_data_ptr->ipc_mutex);
        pthread_cond_wait(&this_custom_data_ptr->ipc_condvar, &this_custom_data_ptr->ipc_mutex);
        memcpy(&this_data, this_custom_data_ptr, sizeof(this_custom_data_ptr));
        如果（prv_packet == 0）{
          printf ("拿到第一");
          prv_packet = this_data.min;
        }
        if ((prv_packet +1) != this_data.min){
          printf ("error prv:%d this:%d\n", prv_packet, this_data.min);
        }
        pthread_mutex_unlock(&this_custom_data_ptr->ipc_mutex);
        prv_packet = this_data.min;
      }
      返回0；
    }

```

我究竟做错了什么？我如何同步，以便一旦连接了从站，它就不会丢失任何数据，但如果它没有连接，那么主站也不会被阻塞。

# c# - 使用 listview 和 streamreader 进行简单的“实时”搜索

> ID：13840234
> 
> 赞同：0
> 
> 时间：2012-12-12T12:52:22.210
> 
> 标签：c#

我正在尝试使用流式阅读器进行简单的实时搜索，以读取 txt 文件并在列表视图中搜索并显示结果，问题是我只能搜索 1 个字母，因此搜索“1”将显示结果以 1 开头的所有内容，例如搜索 1 的结果为“123”，但搜索“12”或“123”不会显示相同的结果。用我试过的这段代码更容易解​​释。

编辑，我正在读取的文本文件具有以下结构： 123;asd;asd;asd;asd;asd;asd <- 行示例

```
 public static string[] testtt(string sökord)
    {
        StreamReader asd = new StreamReader("film.txt");
        string temp;
        string[] xd;

        while (asd.Peek() >= 0) // if I can read another row (I.E next row isnt empty)
        {
            temp = asd.ReadLine();
            xd = temp.Split(';');

            for (int i = 0; i < xd.Length; i++)
            {
                // this should check if my searchword is equal to any member of "xd"
                // but this is where the problem occurs when the input is more than 1
                // character, will post error message from debugger below this code.
                if (xd[i].Substring(0, sökord.Length).ToLower() == sökord.ToLower())
                    return xd;
            }
        }

        return null;
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        try
        {
            listView1.Items.Clear();
            ListViewItem item = new ListViewItem(testtt(textBox1.Text)[0]);
            item.SubItems.Add(testtt(textBox1.Text)[1]);
            item.SubItems.Add(testtt(textBox1.Text)[2]);
            item.SubItems.Add(testtt(textBox1.Text)[3]);
            item.SubItems.Add(testtt(textBox1.Text)[4]);
            item.SubItems.Add(testtt(textBox1.Text)[5]);
            item.SubItems.Add(testtt(textBox1.Text)[6]);
            listView1.Items.Add(item);

            if (textBox1.Text == "")
                listView1.Items.Clear();
        }
        catch (Exception ex)
        {
            //MessageBox.Show(ex.Message);
        }
    } 
```

前任

```
{"Index and length must refer to a location within the string.\r\nParameter name: length"} System.Exception {System.ArgumentOutOfRangeException} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:11:26.347

这相当简单。当您从流阅读器读取的行并且您将值拆分并存储在 xd 中时，此错误将始终出现。假设 xd 的长度为 n。您输入的 sokord 字符串的长度为 m。现在，当您编写时： `(xd[i].Substring(0, sökord.Length)` 只要 xd 的长度 n 小于 m，Substring 函数就会尝试仅从 n 个字母生成 m 个字母的子串。因此它给出了你提到的错误。

无论如何，只需一个简单的检查就可以了：

```
 String sString = null;
    if(xd[i].length>=sokord.length){
        sString = xd[i].SubString(0,sokord.length).toLower();
        if(sString.equals(sokord.toLower()))
            return xd;
    } 
```

迪格维杰

PS：老实说，我已经根据我所能理解的最佳内容编写了答案，因此在一种情况下代码可能有点偏离轨道。但无论如何，我上面描述的错误是 100% 正确的。因此，如果您只是调查一下并遵循轨道，那将是最好的。=)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:21:03.597

仍然不知道我是否正确理解了这个问题，但这不会更容易阅读和理解吗？

```
 private String[] FindSome(String searchword)
    { 
        foreach (String s in System.IO.File.ReadLines("myfile.txt"))
        {
            String[] tmp = s.Split('c');
            foreach (String t in tmp)
            {
                if (t.StartsWith(searchword,StringComparison.CurrentCultureIgnoreCase)) return tmp;
            }
        }
        return null;
    } 
```

# css - 在 css 中声明具有“高度：自动”图像的“背景图像”时未显示

> ID：13840235
> 
> 赞同：4
> 
> 时间：2012-12-12T12:52:22.693
> 
> 标签：css

```
#test {background-image: url('/Skins/slickv2/csdlrsite/shared/1dpt_img_mainpic.png');
                  width: 200px; 
                 height: auto; 
     background-repeat : no-repeat;} 
```

这不显示图像。但是如果我们将高度选项更改为某个值，它可以工作，任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T12:56:46.100

height:auto 将 div 自动调整为内容的高度。背景图像不是内容，因此 div 高度设置为 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T11:06:05.030

这是正确的，因为在上面的答案中 div 将影响该属性，更多我不确定但可能是由于：首先检查背景图像是否应用了实际大小（h 和 w）的实际图像...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T12:57:16.490

CSS 不计算“自动”检测中的背景图像高度。只有文本，其他块等......

# c# - 时间：2018-01-01 标签：c#all distinct value from datatable

> ID：13840243
> 
> 赞同：0
> 
> 时间：2012-12-12T12:52:52.023
> 
> 标签：c#, datatable, dataview

我发现这段代码可用于获取所有不同的值。但我的数据表有 10 列。distinctValues 仅显示我在 toTable() 中写入的列；是否可以使用此功能，但也可以显示其余列？

```
DataView view = new DataView(table);
DataTable distinctValues = view.ToTable(true, "Column1", "Column2"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:58:20.893

除非您提到的那些列是表的完整键，否则不能保证对于这两个列的特定组合，其他列将只有一个值。

如果它们*是*关键，那么就没有必要使用“不同的”过滤器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:05:53.547

您可以使用`Linq-To-DataTable`

```
var distinct = from row in table.AsEnumerable()
               group row by new
               {
                   Col1 = row.Field<string>("Column1"),
                   Col2 = row.Field<string>("Column2")
               } into Group
               select Group.First()
DataTable tblDistinct = distinctRows.CopyToDataTable(); 
```

（假设你只想要一个任意行[第一个]）

# java - 在 Javafx 布局中对齐按钮

> ID：13840244
> 
> 赞同：0
> 
> 时间：2012-12-12T12:53:02.680
> 
> 标签：java, javafx-2

我想对齐我的按钮，使第一个按钮位于屏幕左侧，另外两个位于右侧。我目前正在使用 HBox 来尝试定位它们，但我似乎无法弄清楚如何正确布置它们。下面的代码是我现在使用的。

```
import javafx.application.Application;
import javafx.geometry.Pos;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.stage.Stage;

public class ButtonTest extends Application {
    private Button min, close, openfile;
    public static void main(String[] args){
        launch(args);
    }

    @Override
    public void start(final Stage stage) throws Exception {
        stage.setTitle("Button Test");
        Group root = new Group();
        BorderPane borderpane = new BorderPane();
        setUpButtons();
        HBox hbox = new HBox();
        hbox.setSpacing(10);
        hbox.getChildren().add(openfile);
        HBox hbox1 = new HBox(); 
        hbox1.setAlignment(Pos.CENTER_RIGHT);
        hbox1.getChildren().addAll(min, close);

        hbox.getChildren().add(hbox1);
        HBox.setHgrow(hbox1, Priority.ALWAYS); 
        borderpane.setTop(hbox);
        root.getChildren().add(borderpane);
        Scene scene = new Scene(root,800,600);
        stage.setFullScreen(true);
        scene.getStylesheets().add("button.css");
        stage.setScene(scene);
        stage.show();

    }

    private void setUpButtons() {
        close = new Button("x");
        close.setId("closeBtn");

        min = new Button("_");
        min.setId("minBtn");

        openfile = new Button("Open file");
        openfile.setId("openFileBtn");

    }

} 
```

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:19:31.610

将外部 HBox (hbox) 的对齐设置为 LEFT，将内部 HBox (hbox1) 的对齐设置为 RIGHT。

然后你可以在左边有外部内容，在右边有内部内容。

*编辑：现在有你的问题。停止使用 Group 并将边框窗格直接添加到场景中：

```
Scene scene = new Scene(borderpane,800,600); 
```

# c++ - 如何在执行时更新图表中的数据（在 C++ 构建器中）？

> ID：13840251
> 
> 赞同：0
> 
> 时间：2012-12-12T12:53:24.743
> 
> 标签：c++, charts, c++builder, teechart

我正在使用 Borland C++ Builder 来创建它。代码非常简单，因为它现在的唯一目的是帮助我学习如何使用 TChart 函数。稍后我将使用我学到的知识来创建一个更复杂的程序。

我有一系列数字，必须在备忘录框和图表上显示。图表中的值在程序完成执行后显示，但是，我需要实时更新这些值 - 我的意思是，每次程序计算一个新数字时，它必须立即显示在图表上。有可能这样做吗？如果是这样，我该怎么做？

提前致谢。

```
#pragma hdrstop
#include "Unit1.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm1 *Form1;
//---------------------------------------------------------------------------
__fastcall TForm1::TForm1(TComponent* Owner)
    : TForm(Owner)
{
}
//---------------------------------------------------------------------------

void __fastcall TForm1::Button1Click(TObject *Sender)
{

   TChartSeries* series1 = Chart1->Series[0];
   series1->Clear();

   int num = 0;

   Memo1->Clear();

     for(int i=0; i<5000; i++)
     {
            num = num++;
            Memo1->Lines->Add(IntToStr(num));
            series1->AddXY(i, num, "", clGreen);

           }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:39:20.783

您应该随时强制重新绘制图表：

```
Chart1->Repaint(); 
```

所以你可以有：

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    TChartSeries* series1 = Chart1->Series[0];
    series1->Clear();

    int num = 0;

    Memo1->Clear();

    for(int i=0; i<5000; i++)
    {
        num = num++;
        Memo1->Lines->Add(IntToStr(num));
        series1->AddXY(i, num, "", clGreen);
        Chart1->Repaint();
    }
} 
```

或者，为了提高性能，您可以在添加一些值之后而不是在每次添加之后强制重新绘制图表。IE：

```
void __fastcall TForm1::Button1Click(TObject *Sender)
{
    TChartSeries* series1 = Chart1->Series[0];
    series1->Clear();

    int num = 0;

    Memo1->Clear();

    for(int i=0; i<5000; i++)
    {
        num = num++;
        Memo1->Lines->Add(IntToStr(num));
        series1->AddXY(i, num, "", clGreen);

        if (i % 100 == 0) {
            Chart1->Repaint();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-11T18:20:48.953

是的，这是一个旧线程，但我对遇到它的其他人有一个建议。您也可以仅重新绘制系列，这可能比重新绘制整个图表所需的开销更少。为此，请使用 TChartSeries 重绘方法。对于给定的示例，您将放置一个“series1->Repaint();” 我猜在某个地方，在 for 循环内。

# mysql - 多列分组

> ID：13840259
> 
> 赞同：0
> 
> 时间：2012-12-12T12:54:08.487
> 
> 标签：mysql, group-by, aggregate-functions

我在一个表（A）中有一个东西，在另外两个（C1，C2）category_id 来自不同的表（MC）。

我想计算在特定类别中展示了多少东西。

实时数据示例：

表A

```
main_key (unique)    stuff_id (non unique)
   1                    7
   2                    6 
   3                    3 
```

表C1

```
category_id main_key (it is FK for A table)
   1             1
   1             2
   3             1 
```

表C2

```
category_id main_key (it is FK for A table)
   2             3
   2             1 
```

表 MC

```
category_id category_name
   1             blablbl
   2               asas
   3             asasa
... 
```

之间的关系： C1 和 A 多对一 C2 和 A 多对一 C1 或 C2 和 MC 多对一

在当前示例中，我希望看到最终结果为

```
stuff_qnt        category_id        category_name
2                   1                  blablbl
2                   2                   asas
1                   3                   asasa 
```

我如何通过一个查询来实现它？

我的查询是：

```
SELECT count(A.stuff_id) as stuff_qnt, MC.category_id, MC.category_name 
FROM A
LEFT JOIN C1 using(main_key)
LEFT JOIN C2 using(main_key)
LEFT JOIN MC ON (C1.category_id = MC.category_id AND C2.category_id = MC.category_id)
GROUP BY C1.category_id, C2.category_id 
```

但它向我显示了错误的结果，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:03:47.343

```
SELECT COUNT(*) AS Stuff_Qnt, C.Category_ID, MC.Category_Name
  FROM MC
  JOIN (SELECT C1.Category_ID
          FROM A
          JOIN C1 ON A.Main_Key = C1.Main_Key
        UNION ALL
        SELECT C2.Category_ID
          FROM A
          JOIN C2 ON A.Main_Key = C2.Main_Key
       ) AS C
    ON C.Category_ID = MC.Category_ID
 GROUP BY C.Category_ID, MC.Category_Name
 ORDER BY C.Category_ID, Stuff_Qnt; 
```

您需要将 A 与 C1 连接的类别以及将 A 与 C2 连接的类别，并且您绝对不想要使用 LEFT OUTER JOIN 获得的笛卡尔积，因此您采用类别 ID 列表的 UNION ，然后与 MC 聚合并加入。

```
CREATE TABLE A
(
    main_key INTEGER NOT NULL PRIMARY KEY,
    stuff_id INTEGER NOT NULL
);
INSERT INTO A VALUES(1, 7);
INSERT INTO A VALUES(2, 6);
INSERT INTO A VALUES(3, 3);

CREATE TABLE MC
(
    category_id INTEGER NOT NULL PRIMARY KEY,
    category_name VARCHAR(10) NOT NULL
);
INSERT INTO mc VALUES(1, "blablbl");
INSERT INTO mc VALUES(2, "asas");
INSERT INTO mc VALUES(3, "asasa");

CREATE TABLE C1
(
    category_id INTEGER NOT NULL REFERENCES mc,
    main_key INTEGER NOT NULL REFERENCES a
);
INSERT INTO c1 VALUES(1, 1);
INSERT INTO c1 VALUES(1, 2);
INSERT INTO c1 VALUES(3, 1);

CREATE TABLE C2
(
    category_id INTEGER NOT NULL REFERENCES mc,
    main_key INTEGER NOT NULL REFERENCES a
);
INSERT INTO c2 VALUES(2, 3);
INSERT INTO c2 VALUES(2, 1);

SELECT COUNT(*) AS Stuff_Qnt, C.Category_ID, MC.Category_Name
  FROM MC
  JOIN (SELECT C1.Category_ID
          FROM A
          JOIN C1 ON A.Main_Key = C1.Main_Key
        UNION ALL
        SELECT C2.Category_ID
          FROM A
          JOIN C2 ON A.Main_Key = C2.Main_Key
       ) AS C
    ON C.Category_ID = MC.Category_ID
 GROUP BY C.Category_ID, MC.Category_Name
 ORDER BY C.Category_ID, Stuff_Qnt; 
```

输出：

```
2   1   blablbl
2   2   asas
1   3   asasa 
```

* * *

这是进一步的测试，A 中有两行额外的行，C1 和 C2 中有相应的行。测试了两个查询，我的[查询](https://stackoverflow.com/a/13840710/15168)和[dkkumargoyal](https://stackoverflow.com/users/1053633/dkkumargoyal)的查询。

```
CREATE TABLE A(main_key INTEGER NOT NULL PRIMARY KEY, stuff_id INTEGER NOT NULL);
INSERT INTO A VALUES(1, 7);
INSERT INTO A VALUES(2, 6);
INSERT INTO A VALUES(3, 3);
INSERT INTO A VALUES(4, 3);
INSERT INTO A VALUES(5, 3);

CREATE TABLE MC(category_id INTEGER NOT NULL PRIMARY KEY, category_name VARCHAR(10) NOT NULL);
INSERT INTO mc VALUES(1, "blablbl");
INSERT INTO mc VALUES(2, "asas");
INSERT INTO mc VALUES(3, "asasa");

CREATE TABLE C1(category_id INTEGER NOT NULL REFERENCES mc, main_key INTEGER NOT NULL REFERENCES a);
INSERT INTO c1 VALUES(1, 1);
INSERT INTO c1 VALUES(1, 2);
INSERT INTO c1 VALUES(3, 1);
INSERT INTO c1 VALUES(3, 4);
INSERT INTO c1 VALUES(1, 4);
INSERT INTO c1 VALUES(1, 5);

CREATE TABLE C2(category_id INTEGER NOT NULL REFERENCES mc, main_key INTEGER NOT NULL REFERENCES a);

INSERT INTO c2 VALUES(2, 3);
INSERT INTO c2 VALUES(2, 1);
INSERT INTO c2 VALUES(2, 5);

SELECT COUNT(*) AS Stuff_Qnt, C.Category_ID, MC.Category_Name
  FROM MC
  JOIN (SELECT C1.Category_ID
          FROM A
          JOIN C1 ON A.Main_Key = C1.Main_Key
        UNION ALL
        SELECT C2.Category_ID
          FROM A
          JOIN C2 ON A.Main_Key = C2.Main_Key
       ) AS C
    ON C.Category_ID = MC.Category_ID
 GROUP BY C.Category_ID, MC.Category_Name
 ORDER BY C.Category_ID, Stuff_Qnt;

-- Query by dkkumargoyal
SELECT COUNT(DISTINCT A.stuff_id) AS stuff_qnt, MC.category_id, MC.category_name 
FROM A
LEFT JOIN C1 on a.main_key = c1.main_key  -- USING(main_key)
LEFT JOIN C2 on a.main_key = c2.main_key  -- USING(main_key)
LEFT JOIN MC ON (C1.category_id = MC.category_id OR C2.category_id = MC.category_id)
GROUP BY MC.category_id, mc.category_name
ORDER BY MC.Category_id, stuff_qnt;       -- stuff_qnt added for standard compatibility 
```

所做的更改对于代码在测试 DBMS (Informix 11.70.FC6) 上工作是必要的。

结果1：

```
4   1   blablbl
3   2   asas
2   3   asasa 
```

结果 2：

```
3   1   blablbl
2   2   asas
2   3   asasa 
```

`A.Stuff_ID`我认为我的结果是正确的，另一个不是，主要是因为当问题规定它不是唯一的（并且额外的数据行使其不唯一）时，替代方案取决于唯一性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:41:09.820

请看一下这个参考：

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/47045/2)

询问：

```
select m.category_id, m.category_name, count(a.stuff_id) as cntstuff from
(select * from c1 
 union all
 select * from c2) as c
join a 
on a.main_key = c.main_key
join mc m
on m.category_id = c.category_id
group by m.category_id
order by m.category_id
; 
```

结果：

```
CATEGORY_ID     CATEGORY_NAME   CNTSTUFF
1               blablbl         2
2               asas            2
3               asasa           1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:18:08.087

试试这个 SQL。

```
SELECT COUNT(DISTINCT A.stuff_id) AS stuff_qnt, MC.category_id, MC.category_name 
FROM A
LEFT JOIN C1 USING(main_key)
LEFT JOIN C2 USING(main_key)
LEFT JOIN MC ON (C1.category_id = MC.category_id OR C2.category_id = MC.category_id)
GROUP BY MC.category_id 
```

# javascript - 使用 JavaScript 获取 Twitter 更新

> ID：13840265
> 
> 赞同：-3
> 
> 时间：2012-12-12T12:54:20.607
> 
> 标签：javascript, jquery, html

我希望在动态用户间隔 10 秒内更新 twitter。我编写了以下代码，但它只将查询和用户名作为“microsoft”，其他名称不被接受。我的代码如下。

```
<html>
    <head>
                <!-- DC Twitter CSS -->
        <link href="twitter/jquery.tweet.css" rel="stylesheet">

        <!-- jQuery Library (skip this step if already called on page ) -->
        <script type="text/javascript" src="twitter/jquery.min.js"></script> <!-- (do not call twice) -->

        <!-- DC Twitter JS -->
        <script src="twitter/jquery.tweet.js" charset="utf-8"></script>
        <script type="text/javascript">
        jQuery(function ($) {
            $(".query").tweet({
                username: "microsoft",
                avatar_size: 16, // avatar size in px
                count: 10, // how many tweets to show
                query: "#microsoft", // search query
                loading_text: "searching twitter...",
                refresh_interval: 10 // seconds before next refresh
            });
        });
        </script>
    </head>
    <body>
        <div id="query" class="query" style="width:80%;"></div>
    </body>
</html> 
```

我不知道里面发生了什么。欢迎提出建议。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:11:27.000

用户名可以是空白的，你只需要更新查询参数来改变结果，这也可以是动态的，你到底想做什么？

例如：对于弗雷德，它将是：

```
<html>
<head>
            <!-- DC Twitter CSS -->
    <link href="twitter/jquery.tweet.css" rel="stylesheet">

    <!-- jQuery Library (skip this step if already called on page ) -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script> <!-- (do not call twice) -->

    <!-- DC Twitter JS -->
    <script src="twitter/jquery.tweet.js" charset="utf-8"></script>
    <script>
    jQuery(function ($) {
        $(".query").tweet({
            username: "",
            avatar_size: 16, // avatar size in px
            count: 10, // how many tweets to show
            query: "fred", // search query
            loading_text: "searching twitter...",
            refresh_interval: 10 // seconds before next refresh
        });
    });
    </script>
</head>
<body>
    <div id="query" class="query" style="width:80%;"></div>
</body>
</html> 
```

对于标签弗雷德（#fred），它将是：

```
<html>
<head>
            <!-- DC Twitter CSS -->
    <link href="twitter/jquery.tweet.css" rel="stylesheet">

    <!-- jQuery Library (skip this step if already called on page ) -->
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script> <!-- (do not call twice) -->

    <!-- DC Twitter JS -->
    <script src="twitter/jquery.tweet.js" charset="utf-8"></script>
    <script>
    jQuery(function ($) {
        $(".query").tweet({
            username: "",
            avatar_size: 16, // avatar size in px
            count: 10, // how many tweets to show
            query: "#fred", // search query
            loading_text: "searching twitter...",
            refresh_interval: 10 // seconds before next refresh
        });
    });
    </script>
</head>
<body>
    <div id="query" class="query" style="width:80%;"></div>
</body>
</html> 
```

这是 jsFiddle：http: [//jsfiddle.net/MNebj/](http://jsfiddle.net/MNebj/)

# marklogic - 从 marklogic 批量导出

> ID：13840268
> 
> 赞同：1
> 
> 时间：2012-12-12T12:54:24.383
> 
> 标签：marklogic

我编写了一个 xquery，用于从 Marklogic 将主文件及其相关文件导出为 zip 文件。现在我有一个需要导出大量此类文件的要求。我想到的很明显的方法是zip文件的zip。为了准确解释假设有2个文件需要导出A和B，这两个文件中的每一个都可能有一些与之关联的子文件说A有三个子文件，即A1，A2和A3，同样B有2个子文件，即B1 和 B2。所以我的想法是为每个文件及其子文件创建一个 zip，最后从所有 zip 文件中创建一个 zip 文件。

```
Zip-->zip1-->(A,A1,A2,A3)
   -->zip2-->(B,B1,B2) 
```

想知道这种方法是否好，或者是否有其他更好的批量导出方法可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:29:53.117

考虑一下这种情况，您不仅要批量导出 A 和 B，还可能有 50 万个类似 A/B 的文件。您将创建 50 万个 zip 文件，但还要将其包装在一个巨大的 zip 文件中。听起来您应该考虑分批处理文件，并返回多个 zip 文件，每个文件包含 10 到 1000 个文件。究竟有多少取决于您的系统有多少内存。考虑创建并行运行和创建 zipfile 的批处理的想法。

zips 中的 Zips 听起来也有点矫枉过正，您也可以在 zips 中使用文件夹。但除此之外，它应该可以工作。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:38:06.487

还要意识到 zip 文件或其包含的文件的最大大小为 4G。这可能会阻碍您对一个大拉链的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:06:37.897

我同意嵌套拉链可能是不必要的。就出口而言，没有必要重新发明轮子：看看[http://marklogic.github.com/xqsync/](http://marklogic.github.com/xqsync/)和[http://docs.marklogic.com/guide/ingestion/content-泵](http://docs.marklogic.com/guide/ingestion/content-pump)

# jquery - 通过表的jQuery迭代

> ID：13840269
> 
> 赞同：0
> 
> 时间：2012-12-12T12:54:26.897
> 
> 标签：jquery, html-table

我正在尝试使用 Jquery 向我的表中添加行详细信息功能。这是我现在在下图中面临的问题：

![这就是它现在的样子](../Images/95749ba46513be7f402045a78fdfce36.png)

单击时，行详细信息会显示在每一行上。我想将它专门分配给单击该行上的“详细信息”按钮的行。

这是我的 Jquery 代码：

```
<script type="text/javascript">
 $(function() {
function details(fn) {
    return function() {
        var r = $(this).closest("tbody").find("tr.detailsRow")[fn]();
        $("tr.detailsRow").not(r).hide();
    };
};
$(".detailsRow").hide();
$detailsButtons = $(".detailsButton").click(details('toggle'));
$detailsButtons.closest("tr").find("input").click(details('show'));
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:29:40.870

[`next`](http://api.jquery.com/next/)如果要选择当前行之后的行，则应使用该函数：

```
var r = $(this).closest("tr").next("tr.detailsRow")[fn](); 
```

我创建了一些小提琴：http: [//jsfiddle.net/scaillerie/XM9rz/](http://jsfiddle.net/scaillerie/XM9rz/)。

# objective-c - 如何在可可中复制网络上的文件

> ID：13840270
> 
> 赞同：1
> 
> 时间：2012-12-12T12:54:30.137
> 
> 标签：objective-c, cocoa, file-upload, copy, nsfilemanager

我想将所选文件从我的计算机复制到同一网络上的另一台计算机。我尝试使用 NSFileManager 但没有成功。请帮忙怎么做？

```
NSFileManager *fileManager = [[NSFileManager alloc] init];
NSString * filePath = [NSHomeDirectory() stringByAppendingPathComponent:
[NSString stringWithFormat:@"Documents/test"]];
NSString * filePath2 = [NSHomeDirectory() stringByAppendingPathComponent:
[NSString stringWithFormat:@"Shared/Test"]];
[fileManager copyItemAtPath:filePath toPath:filePath2 error:NULL];
[fileManager release]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T22:41:29.310

2条建议：

1）根据文档，在这一行中，错误应该是“nil”而不是“NULL”

```
[fileManager copyItemAtPath:filePath toPath:filePath2 error:NULL]; 
```

2）也许代码没有找到文件。我注意到您在路径上没有任何文件扩展名（也许“test”应该是“test.txt”？）。即使您在 Finder 中看不到扩展名，大多数文件也有扩展名。获取有关文件的信息以检查其扩展名并在这种情况下修复代码。

# mql - 如何在按钮单击时触发 MQL 查询

> ID：13840272
> 
> 赞同：0
> 
> 时间：2012-12-12T12:54:46.257
> 
> 标签：mql, freebase-acre

在我的应用程序布局中，左侧有一个按钮，右侧有一个面板 (div)。我想在右侧面板中显示特定用户添加的主题数量。为此，我编写了一个运行良好的 MQL 查询。

我只是无法弄清楚在按钮单击事件上触发查询并将其结果显示在右侧面板中的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T10:35:34.270

我认为您可以为此目的使用某种 ajax。在左窗格中，有一个带有超链接的用户列表。单击这些超链接后，应在右侧窗格中打开一个包含结果的不同窗格。您不需要直接触发 mql 查询，只需在超链接单击时调用一个函数，并在其中传递用户名，然后进一步调用 mql 查询并显示结果。

# wpf - 我们如何使用 Mycrosoft Sync Framework 2.0 推迟 SQL Express DB 作为客户端和 SQL Server 作为服务器的冲突解决

> ID：13840274
> 
> 赞同：3
> 
> 时间：2012-12-12T12:54:50.220
> 
> 标签：wpf, sql-server-express, microsoft-sync-framework

我有一个 SQL Express DB 作为本地服务器和一个 SQL Server DB 作为远程服务器。我正在使用 SyncOrchestrator 同步代理来解决冲突。无论有冲突，我都想存储它，以便以后我得到所有的冲突并一一解决。但是 ApplyAction 枚举没有像“SkipChange”或“Defer”这样的值。

请指导。

代码粘贴在下面。

private void btnSync_Click(object sender, RoutedEventArgs e) { SqlConnection clientConn = new SqlConnection(connectionstring1);

```
 SqlConnection serverConn = new SqlConnection(connectionstring2);

        // create the sync orhcestrator
        SyncOrchestrator syncOrchestrator = new SyncOrchestrator();

        SqlSyncProvider localProvider = new SqlSyncProvider("Scope1", clientConn);
        SqlSyncProvider remoteProvider = new SqlSyncProvider("Scope2", serverConn);

        // set local provider of orchestrator to a sync provider associated with the 
        // ProductsScope in the SyncExpressDB express client database
        syncOrchestrator.LocalProvider = localProvider;

        // set the remote provider of orchestrator to a server sync provider associated with
        // the ProductsScope in the SyncDB server database
        syncOrchestrator.RemoteProvider = remoteProvider;

        // set the direction of sync session to Upload and Download
        syncOrchestrator.Direction = SyncDirectionOrder.DownloadAndUpload;

        // subscribe for errors that occur when applying changes to the client
        ((SqlSyncProvider)syncOrchestrator.LocalProvider).ApplyChangeFailed += new EventHandler<DbApplyChangeFailedEventArgs>(Program_ApplyChangeFailed);

        // execute the synchronization process
 SyncOperationStatistics syncStats = syncOrchestrator.Synchronize();             

        MessageBox.Show("Synchronization of Table1 Completed");

        BindClientTables();
        BindServerTables();
        }

    private void btnServerData_Click(object sender, RoutedEventArgs e)
        {
        BindServerTables();
        }

    private void btnClientData_Click(object sender, RoutedEventArgs e)
        {
        BindClientTables();
        }

    static void Program_ApplyChangeFailed(object sender, DbApplyChangeFailedEventArgs e)
        {
        "**Here I want to defer the Resolution for future.**"
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:02:14.667

如果要跳过，则应将 RetryNextSync 指定为操作...

我建冲突...

# javascript - 画布停止动画？

> ID：13840276
> 
> 赞同：0
> 
> 时间：2012-12-12T12:54:56.320
> 
> 标签：javascript, html, canvas, android-canvas

我正在为 Android 浏览器构建 HTML5 游戏，经过一段时间后，画布突然无缘无故停止了动画？

```
function updateAnimation()
{
    context.clear = true; // makes the canvas clear itself on every frame           
    context.save();
    context.clearRect(0,0,ourGameCanvas.width,ourGameCanvas.height);
    context.drawImage(bg_img,0,0,ourGameCanvas.width,ourGameCanvas.height);     
    context.restore();
}

function startupTouchEvents()
{
    ourGameCanvas.addEventListener("touchstart", handleStart, false);
    ourGameCanvas.addEventListener("touchmove", handleMove, false);
}

function handleStart(evt)
{
    evt.preventDefault();       
    var touches = evt.changedTouches;
}

function handleMove(evt)
{
    evt.preventDefault();
} 
```

当我多次触摸屏幕时，动画无缘无故地弯下腰！！！

任何想法 ？

# c# - 验证 App.Config 中的值

> ID：13840277
> 
> 赞同：1
> 
> 时间：2012-12-12T12:55:02.577
> 
> 标签：c#, configuration, app-config

只是一个快速的问题，并想知道正确的方法。

在 Appsettings 的 appConfig 中，我想验证我输入的值。例如，如果我有

```
<appSettings>
    <add key="UseEncryption" value="false"/>
    <add key="MaxThreshold" value="10"/>
    <add key="ProcessDate" value="01/12/2012"/>
</appSettings> 
```

程序正常编译和执行。但是，支持团队可以更改这些值并重新运行应用程序。鉴于编写 Gui 以更改所有这些值并在途中验证它们......是否有另一种方法来验证它们。

例如，我想检查 MaxThrehold 是否为 Int，Processdate 是否为有效日期等

我正在编写一个将在应用程序启动时运行的函数，它将检查每个设置并在它们不正确时停止应用程序。

这是最好的方法吗？每个应用程序设置都有一个验证器类型功能。

我保留了一个名为 CurrentEnvironment 的类，在这里我拥有应用程序配置中我需要的任何设置的所有获取/设置。所以对于每个键，我还将有一个验证器函数来检查值。

问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:00:32.210

> 我正在编写一个将在应用程序启动时运行的函数，它将检查每个设置并在它们不正确时停止应用程序。

这是一个很好的方法，尽管您确实需要确保此函数在执行开始时确实运行。

另一种方法是创建一个自定义配置部分（继承[`ConfigurationSection`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsection.aspx)并添加自定义属性） - 确保这些属性是您要测试的类型。当配置文件反序列化时，如果无法正确解析类型，应用程序将无法启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:01:39.640

对于您的每个键，在对象上使用 TryParse

DateTime.TryParse(appsetting[keyname])

# c++ - Googletest 不运行测试夹具

> ID：13840278
> 
> 赞同：3
> 
> 时间：2012-12-12T12:55:04.680
> 
> 标签：c++, unit-testing, testing, googletest

我正在尝试使用 googletest 在 C++ 中进行单元测试。我在以下位置定义了一个文本夹具`ClusteringTest.h`：

```
#include <gtest/gtest.h>

namespace EnsembleClustering {

class ClusteringTest: public ::testing::Test {

    ClusteringTest() {};

    virtual ~ClusteringTest() {};

    virtual void SetUp() {

    };

    virtual void TearDown() {

    };

};

TEST_F(ClusteringTest, doesGTestWork) {
    EXPECT_EQ(42, 42);
}

} /* namespace EnsembleClustering */ 
```

在我的主要功能中，我调用：

```
 ::testing::InitGoogleTest(&argc, argv);
 return RUN_ALL_TESTS(); 
```

结果是：

```
running EnsembleClustering
[==========] Running 0 tests from 0 test cases.
[==========] 0 tests from 0 test cases ran. (1 ms total)
[  PASSED  ] 0 tests. 
```

为什么我的测试没有运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T13:31:14.850

您需要将您的标头 ClusteringTest.h 包含在某个 .cpp 文件中以使其具体化，并创建一个编译单元。

# asp.net - ASP.Net Label 控件的 Text 属性未在按钮单击事件下更新文本

> ID：13840281
> 
> 赞同：0
> 
> 时间：2012-12-12T12:55:13.653
> 
> 标签：asp.net, sharepoint-2010, label

我在 SharePoint 中开发了一个小型应用程序。我正在使用自定义应用程序页面并在 Page_Load() 方法下对该页面加载 .ascx 控件。在 .ascx 控件中，我创建了一个带有文本框和按钮控件的小表单。在此按钮单击事件下，我想更改标签的文本属性，例如： lblConfirmation.Text = " **Confirmation is OK** "; 但它没有改变文本。它什么也不显示，因为我在标签控件中将文本属性设置为空。

```
<asp:Label ID="lblConfirmation" runat="server" Text="" ></asp:Label> 
```

任何想法，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:42:57.740

你的**asp:Label**定义中的这个单引号是什么？请检查这个

```
<'asp:Label ID="lblConfirmation" runat="server" Text="" ><'/asp:Label> 
```

它必须替换为

```
 <asp:Label ID="lblConfirmation" runat="server" Text="" ></asp:Label> 
```

尝试在您的 Visual Studio 中调试代码，如果您遇到任何错误，请告诉我们？
谢谢

# dependency-injection - 如何使用 Autofac 在 Windows Phone 8 应用程序中注入 ViewModel？

> ID：13840283
> 
> 赞同：3
> 
> 时间：2012-12-12T12:55:17.177
> 
> 标签：dependency-injection, viewmodel, windows-phone-8, viewmodellocator

我希望能够使用 Autofac 作为我的 IoC 容器将 ViewModels 注入到我的 Windows Phone 8 应用程序的视图中。我该怎么做呢？我看过 Caliburn.Micro 框架，但我想使用更简单的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T12:55:17.177

正是为了这个目的，我创建了一个小型演示应用程序。它定义了一个`ViewModelLocator`类：

```
public class ViewModelLocator
{
    private readonly IContainer container;

    public ViewModelLocator()
    {
        var containerBuilder = new ContainerBuilder();
        containerBuilder.RegisterType<MainViewModel>();
        containerBuilder.RegisterType<ItemViewModel>();

        this.container = containerBuilder.Build();
    }

    public MainViewModel MainViewModel
    {
        get
        {
            return this.container.Resolve<MainViewModel>();
        }
    }

    public ItemViewModel ItemViewModel
    {
        get
        {
            return this.container.Resolve<ItemViewModel>();
        }
    }
} 
```

要从您的视图中使用此类，您必须将其添加到应用程序的资源中。您可以通过修改**App.xaml中的****Application.Resources**部分来执行此操作：

 **```
<Application.Resources>
    <local:ViewModelLocator xmlns:local="clr-namespace:AutofacWP8DependencyInjectionDemo" x:Key="ViewModelLocator"/>
</Application.Resources> 
```

现在您将能够在视图中注入视图模型。只是有观点的`DataContext`。要引用`MainViewModel`as，`DataContext`只需将以下内容添加到您的视图中：

```
DataContext="{Binding Path=MainViewModel, Source={StaticResource ViewModelLocator}}" 
```

您可以看到它将 设置`DataContext`为类的`MainViewModel`属性，该属性`ViewModelLocator`使用**Autofac**`MainViewModel`使用依赖注入创建实例。

你可以在这里找到源代码：[https ://github.com/ErikSchierboom/autofacwp8dependencyinjectiondemo.git](https://github.com/ErikSchierboom/autofacwp8dependencyinjectiondemo.git)**

# c# - 循环遍历具有多个列类型的 girdview 列

> ID：13840285
> 
> 赞同：1
> 
> 时间：2012-12-12T12:55:20.810
> 
> 标签：c#, datagridview

首先我会告诉你一些背景知识，我需要创建一个包含动态列的网格，列数将基于用户选择，在我的 DataTable 中，我在列名中添加了数字以保持它们的名称不同，然后我将它与我的绑定格维尤。

现在我需要重命名列 headerText 并从列标题中删除计数器编号，当我尝试使用以下方法循环我的 grid.columns 时，我的网格还有一个未绑定的 Image 类型的列：

`foreach (DataGridViewTextBoxColumn dgc in grdDistProcessing.Columns)`

它给了我错误 InvalidCastException：

**无法将“System.Windows.Forms.DataGridViewImageColumn”类型的对象转换为“System.Windows.Forms.DataGridViewTextBoxColumn”类型。**

我也使用了 DataColumn 但它给了我同样的错误，另一个线程说我们应该使用 DataControlField 但 VS 没有识别它，它是 ASP 的东西吗？还是我缺少参考？

请帮忙。

Rgds,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:00:20.020

如果您有可用的 var 关键字（我认为是 c#3 及更高版本）。

```
foreach (var dgc in grdDistProcessing.Columns)
{

 if(dgc is DataGridViewImageColumn)
{

   //do stuff with it.
   var tempDgc = (DataGridViewImageColumn)dgc; //cast it as needed.
   //use it

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:27:20.837

谢谢scartag，你的解决方案就像一个魅力，顺便说一句，我探索了这个问题的另一个解决方案，我可以使用一个普通的for循环。

```
 `for (int i = 0; i < grdDistProcessing.Columns.Count; i++)
        {
            MessageBox.Show(grdDistProcessing.Columns[i].HeaderText);
        }` 
```

# python - 如何在 PyQt 中将 QRubberBand 与 QRect 类一起使用？

> ID：13840289
> 
> 赞同：4
> 
> 时间：2012-12-12T12:55:28.937
> 
> 标签：python, pyqt

我想在 PyQt 中使用 QrubberBand 和 QRect 在 UI 中通过选取框矩形选择来选择或激活一堆按钮。

如果有人能告诉我如何实现此功能，我将不胜感激？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T19:04:13.043

这是一个简单的演示：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self):
        QtGui.QWidget.__init__(self)
        layout = QtGui.QVBoxLayout(self)
        layout.setMargin(15)
        layout.setSpacing(10)
        for text in 'One Two Three Four Five'.split():
            layout.addWidget(QtGui.QPushButton(text, self))
        self.rubberband = QtGui.QRubberBand(
            QtGui.QRubberBand.Rectangle, self)
        self.setMouseTracking(True)

    def mousePressEvent(self, event):
        self.origin = event.pos()
        self.rubberband.setGeometry(
            QtCore.QRect(self.origin, QtCore.QSize()))
        self.rubberband.show()
        QtGui.QWidget.mousePressEvent(self, event)

    def mouseMoveEvent(self, event):
        if self.rubberband.isVisible():
            self.rubberband.setGeometry(
                QtCore.QRect(self.origin, event.pos()).normalized())
        QtGui.QWidget.mouseMoveEvent(self, event)

    def mouseReleaseEvent(self, event):
        if self.rubberband.isVisible():
            self.rubberband.hide()
            selected = []
            rect = self.rubberband.geometry()
            for child in self.findChildren(QtGui.QPushButton):
                if rect.intersects(child.geometry()):
                    selected.append(child)
            print 'Selection Contains:\n ',
            if selected:
                print '  '.join(
                    'Button: %s\n' % child.text() for child in selected)
            else:
                print ' Nothing\n'
        QtGui.QWidget.mouseReleaseEvent(self, event)

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# javascript - JQuery on（“click”）函数中的“奇怪”变量赋值行为

> ID：13840291
> 
> 赞同：1
> 
> 时间：2012-12-12T12:55:37.940
> 
> 标签：javascript, jquery

我是 javascript 和 jquery 的新手，我遇到了一个小问题。最新版本的 Chrome 和 Firefox 都会发生这种情况，所以我认为这不是浏览器问题。

相关代码在这里（这是 HTML 页面上脚本标签内的自调用函数）。

```
(function () {
    "use strict";
    var submitbutton = $('#submitcommand'),
        textinput = $('#textinput'),
        userinput = textinput.val();

    submitbutton.on('click', function() {
        alert("textinput is " + textinput.val());   // => works
        alert("userinput is " + userinput);     // => undefined

    });
}()); 
```

使用“textinput.val()”第一次调用 alert() 就可以了。对 alert() 的第二次调用不返回任何可见文本，因为“用户输入”正在评估为“未定义”。

我尝试进入 Firebug 控制台并一个接一个地粘贴四个语句（两个分配和两个对 alert() 的调用）。这行得通，并得到我期望的结果。

所以问题是：on('click') 函数中的 'userinput' 变量有什么变化？我在这里没有看到什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:09:53.183

由于该函数是自调用的，因此该变量将在页面加载时设置。每次单击按钮时都不会重新评估它。在页面加载期间，您可能会发现：

1.  输入为空
2.  输入在页面下方低于脚本（我认为更有可能）

所以在设置的时候没有任何价值。您可能希望将变量限定为按钮单击：

```
(function () {
    "use strict";
    var submitbutton = $('#submitcommand'),
        textinput = $('#textinput')

    submitbutton.on('click', function() {
        var userinput = textinput.val();

        alert("textinput is " + textinput.val());   // => works
        alert("userinput is " + userinput);     // => undefined

    });
}()); 
```

此外，您需要确保脚本块位于页面底部，因为当调用该函数时，所有 UI 元素都将加载到浏览器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:18:29.180

您的值在处理程序中未定义。

你也许应该这样使用它：

```
(function() {
    "use strict";
    var submitbutton = $('#submitcommand'),
        textinput = $('#textinput')
        userinput = textinput.val();
    submitbutton.on('click', function() {
        userinput = textinput.val();// sets the value in the handler
        alert("textinput is " + textinput.val()); 
        alert("userinput is " + userinput); 
    });
}()); 
```

工作示例：http: [//jsfiddle.net/avCay/](http://jsfiddle.net/avCay/)

请注意，由于变量的范围和事件处理程序内部值的“重置”，这种方式是有效的。第一遍解析脚本，第二遍执行它，随后的事件处理程序触发 submitbutton 元素的 click 事件，在该事件期间设置该点的值。

编辑：注意：关于 jQuery 读取/加载包装（如在我的示例小提琴中），如果您不希望这样做，您可以这样做： `$('#submitcommand').on('click', function() {` 代替变量，jQuery 将正确地将事件处理程序挂钩到元素。

EDIT2：或者这可能会在这里提供更多的洞察力。如果你这样做：

You will still need to re-access the variable however if you wish to have the "current" value of the input, not that in the "undefined" state during the initial execution due to the parse/execute cycle of the Javascript. **The "re-access" of the .val(); vs the value during the initial script execution is the key to that "undefined" value. and setting it "inside" the handler gets the current value.**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:07:58.270

什么时候

```
var userinput = textinput.val() 
```

被评估：

1.  `textinput`可能还不存在 - 您必须在`document.ready()`处理程序中，或者该`<script>`块必须`#textinput`在 DOM 中。
2.  如果它*确实*存在，则`userinput`获取其*当前*值，而不是它可能碰巧具有的任何未来值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:09:27.617

这是因为 的值`#textinput`在页面加载时为空（除非您在页面加载时将该值设置为某个值）。所以存储的值`userinput`是空的。当您从事件处理程序内部读取值时`textinput`，它会查找输入字段的值。

说得通？:)

# javascript - GWT 在 iframe 内部使用 IE7 中的 setAttribute

> ID：13840293
> 
> 赞同：0
> 
> 时间：2012-12-12T12:55:52.413
> 
> 标签：javascript, gwt, iframe, internet-explorer-7, setattribute

我有一个 GWT 网络应用程序。当我使用

```
 element.setAttribute("style", myAttributeList); 
```

**它非常适用于 IE7** (*)

现在是棘手的部分。我使用典型的*iframe*标记将在*http://www.myGWTApp.com*上提供的 Web 应用程序嵌入到具有不同域的网页中：

 *```
<iframe src="http://www.myGWTApp.com" height="194" width="600"></iframe> 
```

因此，该应用程序运行良好，但我的代码中的每个**element.setAttribute( , )****根本不起作用**。

因此，当从 IFRAME 内部运行时，GWT 失去了它的魔力……

你知道有什么办法可以解决这个问题吗？也许使用JSNI？

谢谢！

**编辑** 嵌入页面包含以下 HTML 标记：

```
<meta content="IE=EmulateIE7" http-equiv="X-UA-Compatible"> 
```

因此，该应用程序在 IE7 中运行。

> (*) 我知道 IE7 的 JS setAttribute 已损坏，但显然 GWT 做得很好并将 Java 程序员与该问题隔离开来（当不涉及 iframe 时）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:53:39.723

验证 iframe 中的容器页面和您的应用程序是否都在`standars`模式下运行。还要检查主机页面是否没有任何`X-UA-Compatible`元标记*

# php - $this 如何在 zend 框架的 .phtml 文件中工作？

> ID：13840298
> 
> 赞同：1
> 
> 时间：2012-12-12T12:56:04.083
> 
> 标签：php, zend-framework, this

对于我所有的 OOP 实践，我从来没有在类定义之外使用过 $this。

虽然在 zendframework 中我们在视图模板文件中使用 $this，但显然它不是类定义的范围。我想知道它是如何实施的？我用谷歌搜索了很多，但没有运气。

我想知道 zendframework 如何使用 $this 呈现它的视图文件的机制。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T12:59:51.313

在视图中，脚本文件（`.phtml`ones）`$this`指的是当前使用的`Zend_View`类实例——被命令渲染这个特定脚本的实例。引用[文档](http://framework.zend.com/manual/1.12/en/zend.view.introduction.html)：

> 这是`[a view script]`一个与其他任何脚本一样的 PHP 脚本，但有一个例外：它在 Zend_View 实例的范围内执行，这意味着对 $this 的引用指向 Zend_View 实例的属性和方法。（控制器分配给实例的变量是 Zend_View 实例的公共属性）。

这就是它的完成方式：当您的控制器调用（显式或隐式）`render`方法（在`Zend_View_Abstract`类中定义）时，最后执行以下方法（在类中定义`Zend_View`）：

```
/**
 * Includes the view script in a scope with only public $this variables.
 *
 * @param string The view script to execute.
 */
protected function _run()
{
   if ($this->_useViewStream && $this->useStreamWrapper()) {
      include 'zend.view://' . func_get_arg(0);
   } else {
      include func_get_arg(0);
   }
} 
```

... 其中`func_get_arg(0)`指的是包含脚本的完整文件名（路径 + 名称）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:01:23.737

它实际上*是*在类定义的范围内。简单的测试用例：

```
<?php
// let's call this view.php
class View {
   private $variable = 'value';
   public function render( ) {
       ob_start( );
       include 'my-view.php';
       $content = ob_get_clean( );
       return $content;
   }
}
$view = new View;
echo $view->render( ); 
```

现在，创建另一个文件：

```
<?php
// let's call this my-view.php.
<h1>Private variable: <?php echo $this->variable; ?></h1> 
```

现在去访问view.php，你会看到my-view.php 可以访问View 类的私有变量。通过使用`include`，您实际上将 PHP 文件加载到当前作用域中。

# phalcon - PHP 致命错误：找不到类“Phalcon\Script\Color”

> ID：13840300
> 
> 赞同：0
> 
> 时间：2012-12-12T12:56:04.957
> 
> 标签：phalcon

我正在运行 Ubuntu Server 12.10 并像这样安装 phalcon

```
sudo apt-get install php5-dev php5-mysql gcc git-core
git clone git://github.com/phalcon/cphalcon.git
cd cphalcon/build
sudo ./install 
```

然后我添加了

```
extension=/usr/lib/php5/20100525/phalcon.so 
```

到位于 /etc/php5/apache2/php.ini 的 php.ini 并重新启动 apache2。如果我执行

```
<?php print_r(get_loaded_extensions()); ?> 
```

我可以看到 phalcon 扩展已加载。然后我像这样安装了 phalcon-devtools

```
git clone git://github.com/phalcon/phalcon-devtools.git
cd phalcon-devtools
sudo ./phalcon.sh 
```

并重新启动apache2。该操作期间未显示任何错误，但是当我尝试执行时

```
phalcon commands 
```

我收到这样的错误

```
PHP Fatal error:  Class 'Phalcon\Script\Color' not found in /home/user/phalcon-devtools/phalcon.php on line 84 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:59:09.017

所以问题出在 CLI 的 php.ini 中，它位于 中`/etc/php5/cli/`，在我添加`extension=/usr/lib/php5/20100525/phalcon.so`之后，我能够使用 Devtools。感谢@NikolaosDimopoulos

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T05:21:33.977

官方文档有点混乱，所以试试这个：

我认为这是扩展未加载的问题

编译成功后的步骤：

```
sudo apt-get install php5-dev php5-mysql gcc git-core 
git clone git https://github.com/Phalcon/cphalcon.git
cphalcon cd/build 
sudo ./install 
```

创建一个名为“ **30-phalcon.ini** ”的新文件，并在其中使用这一行调用扩展 Phalcon：

```
extension=phalcon.so 
```

保存文件并复制文件夹`"/etc/php5/apache2/conf.d /"`，然后`"/etc/php5/cli/conf.d/"`

重启服务器：`sudo service apache2 restart`

虽然 devtools 这样做：

```
sudo git clone https://github.com/phalcon/phalcon-devtools /var/www/devtools 
```

然后创建一个符号链接以通过终端运行：

1：`sudo ln -s /var/www/devtools/phalcon.php /usr/bin/phalcon`

2：`sudo chmod ugo+x /usr/bin/phalcon`

3：`type "phalcon" in the terminal and see if it's work.`

它现在应该可以工作了：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:41:59.557

我总是从 PEAR 频道安装 devtools

```
pear channel-discover pear.phalconphp.com
pear install phalcon/Devtools 
```

您可能会收到 Devtools 未处于稳定模式的错误消息，但（在撰写本文时）您可以使用以下命令：

```
pear install phalcon/Devtools-0.5.0 
```

[资源](http://pear.phalconphp.com)

# android - 获取外部存储路径在 Android 4.1.1 中不起作用

> ID：13840306
> 
> 赞同：0
> 
> 时间：2012-12-12T12:56:20.917
> 
> 标签：android, storage, external

我写了一个安卓代码来拍照（使用安卓相机应用程序）。我想将这张照片保存在外部存储中，所以我使用 Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) 来获取目录路径。

这是我的代码：

```
public void takePhoto(View b){
    /** Esta función recoge la pulsación del botón de tomar fotografía.
     *  Se encarga de lanzar la cámara de fotos del móvil y permitir al 
     *  usario hacer una fotografía.
     *  
     *  Se comprueba si se puede almacenar la foto, para después enviarla
     *  al backend. Si no, no se permite hacer la foto.
     */
    String state = Environment.getExternalStorageState();
    if(Environment.MEDIA_MOUNTED.equals(state)){
        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        // Se crea un File con el path donde se quiere almacenar la foto
        fileName = new String("Incidencia_"+new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date())+".jpg");
        storageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)+"/SmartRoutes", fileName);
        //storageDir = new File(this.getExternalFilesDir(Environment.DIRECTORY_PICTURES)+"/SmartRoutes", fileName);
        if(storageDir != null)
            Log.d(logTag, "Path: "+storageDir.toString());
        // y se pasa al intent como extra.
        takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(storageDir));
        startActivityForResult(takePictureIntent, TAKE_PHOTO_CODE);
    }
    else
        Toast.makeText(this, "No es posible sacar una fotografía", Toast.LENGTH_SHORT).show();
} 
```

然后在 onActivityResult() 上，我尝试获取存储在“storageDir”中的照片并简单地在 LogCat 中打印路径：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    /** En esta función se recogen los resultados de las activities lanzadas desde esta.
     *  En este caso la de la cámara de fotos.
     */
    switch (requestCode) {
    case TAKE_PHOTO_CODE:
        if(resultCode == RESULT_OK){
            Toast.makeText(this, "Foto tomada correctamente", Toast.LENGTH_SHORT).show();
            // Se añade la foto a la galería
            //Intent mediaScanIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
            //photoFile = new File(storageDir.getAbsolutePath());
            photoFile = storageDir;
            Toast.makeText(this, "File.toString(): "+photoFile.toString(), Toast.LENGTH_SHORT).show();
        }
        else if(resultCode == RESULT_CANCELED){
            Toast.makeText(this, "Foto cancelada", Toast.LENGTH_SHORT).show();
        }
        break;
    }
} 
```

问题是我已经在装有 Android 4.0.1 的三星 Nexus S 设备和装有 Android 2.3.6 的三星 Galaxy Mini 中测试了这段代码，并且运行良好。但是当我尝试在三星 Galaxy S3 和三星 Glaxy Note 2 中测试代码时，两者都使用 Android 4.1.1

```
storageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)+"/SmartRoutes", fileName); 
```

返回总是 null，所以 storageDir = null，我不知道为什么。

可能与 Android 4.1.1 版本有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:20:09.990

要在 SD 卡上获取 root derictory，您可以使用：

```
String extStorageDirectory = Environment.getExternalStorageDirectory().getAbsolutePath(); 
```

代替

```
Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) // Folder which used by camera/gallery app. 
```

尝试在 AndroidManifest.xml 中添加此权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T11:27:50.633

该`SmartRoutes`目录似乎不存在。`mkdirs`设置后尝试添加`storageDir`。所以它会是：

```
storageDir = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES)+"/SmartRoutes", fileName);
storageDir.mkdirs(); 
```

# java - Java 日期：长到日期剥离时间

> ID：13840308
> 
> 赞同：0
> 
> 时间：2012-12-12T12:56:35.637
> 
> 标签：java, date, encryption, time, long-integer

我有一个要根据日期加密和解密的文件。编写时，我想使用当前日期，而不是时间。我会用什么来做这个？

然后，每当我想解密它时，我都可以使用 File.lastModified 来获取长日期。从这里，我如何将其仅转换为写入日期（而不是时间）（或上次修改，应该相同）？

我宁愿避免使用额外的库，如果它过于复杂，那很好，因为我正在加密数据，而复杂的代码将有助于摆脱窥探者。最重要的是，它需要能够以相同的方式跨所有语言环境和平台读取日期，以免丢失加密。

编辑： URL 问题已解决。Java 想要 / 在 .net 和 ? 在下面的：

```
"http://login.minecraft.net/?user=" + username + "&password=" + password + "&version=99" 
```

现在我的加密课正在发生一些事情......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:03:53.910

简单的建议：首先将日期转换为 yyyy-mm-dd 字符串。其次，将字符串与您制作密钥所需的任何其他相关数据一起散列。请参阅[将时间戳长转换为普通日期格式](https://stackoverflow.com/questions/6782185/convert-timestamp-long-to-normal-date-format)以进行长/日期到字符串的转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:12:42.877

```
GregorianCalendar c = new GregorianCalendar(time);
c.set(GregorianCalendar.HOUR, 0);
c.set(GregorianCalendar.HOUR_OF_DAY, 0);
c.set(GregorianCalendar.MINUTE, 0);
c.set(GregorianCalendar.SECOND, 0);
c.set(GregorianCalendar.MILLISECOND, 0);
c.getTimeInMillis(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T13:19:37.183

长时间值定义为：

```
A milliseconds value represents the number of milliseconds that have passed since January 1, 1970 00:00:00.000 GMT. 
```

因此，要向下舍入到最近的一天，您需要以下内容：

```
public static final long OneDay = 1000l * 60l * 60l * 24l;

long today = (System.currentTimeMillis() / OneDay) * OneDay;
Date lastMidnight = new Date(today); 
```

但请不要忘记潜在的时区问题。

# c++ - 使用 std::vector 缓冲区进行高效输入处理

> ID：13840311
> 
> 赞同：1
> 
> 时间：2012-12-12T12:56:43.683
> 
> 标签：c++, vector

我正在尝试找到一种快速的输入方式，但我了解到将 STL 用于此类目的可能会很慢。

每当我收到键盘输入时，我都会触发一个回调。它创建一个对象`(int _key, int _state, int _life)`

每次我收到此回调时，我都会`push_back`将对象指向我的 std::vector;

每一帧我都会检查这个向量的顶部并删除“死”输入。

可以轮询该向量以获取当时有效的任何输入，这意味着它将被频繁搜索。

优化：

-所有内存都应该是连续的，所以虽然链接列表更适合动态分配，但我应该坚持使用 STL 的向量吗？我总是在顶部添加并从底部删除，那么我应该使用什么数据结构？

-我正在考虑有一个缓冲区（第二个向量），它不断地从回调接收新输入，然后每一帧将数据从该向量复制到我的活动输入向量的顶部。由于将轮询活动向量，这是否会提高性能，因为在循环期间添加它不会浪费时间？

基本上我试图从这个向量中尽可能多地压缩性能，我可以使用一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:05:27.470

`std::deque`做最好的容器。它保证 O(1) pop_front 和 push_back()*并且*具有随机访问和良好程度（尽管不完全）的缓存行为。

但是，如果您绝对必须具有完全的连续性，那么您需要研究一个自定义的循环缓冲区容器（Boost IIRC 中有一个），因为 a 上的 pop_front()`vector`相当昂贵。

编辑：正如另一位海报所指出的，即使对于非常快速的打字员来说，键盘输入也很少见，以至于我很难相信这是您系统的瓶颈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:09:22.357

您所描述的，在一端添加数据，在另一端删除，是队列的原型描述。这是在带有类的标准库中实现的[`std::queue`](http://en.cppreference.com/w/cpp/container/queue)。

这个队列类是所谓的容器适配器，这意味着它使用另一个容器进行实际存储。默认情况下它使用[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)，但该容器不会将其数据保存在连续的内存区域中。但是，您可以`std::queue`使用几乎任何其他标准容器声明 a ，例如`std::vector`（这是唯一保证将数据存储在连续内存区域中的容器）：

```
std::queue<int, std::vector> my_queue_with_vector;
my_queue_with_vector.push(1);
my_queue_with_vector.push(2);
my_queue_with_vector.push(3);

while (!my_queue_with_vector.empty())
{
    std::cout << my_queue_with_vector.top() << '\n';
    my_queue_with_vector.pop();  // Remove top element in the queue
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:00:51.350

听起来你想要一个`std::deque`. 相邻元素几乎总是在内存中连续分配，并且在开始和结束时具有恒定的时间插入和删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:03:51.323

简短的回答：没关系。std::vector 和 std::list 可以轻松处理每秒数百万次插入操作，但大多数打字员在键盘上的输入速度不会超过每秒 10 个字符。

长答案：如果向量很小（< 100）并且存储在向量上的对象的复制/交换操作很便宜，则 push_back 和擦除通常在向量上非常便宜。用于插入 std:list 或从中删除的分配通常更昂贵。如果它成为一个问题，衡量成本。

std::deque 也有分配，如果我假设你的向量很少包含超过 10 个项目 - 所有这些项目都很便宜 - 是正确的，那么在你的情况下，根据实现可能比你的向量更昂贵。

# c# - MongoDB c#驱动程序排序和表达式查询

> ID：13840319
> 
> 赞同：0
> 
> 时间：2012-12-12T12:57:02.093
> 
> 标签：c#, mongodb, sorting, driver, expression

我正在使用 MongoDB C# 驱动程序并想使用按表达式过滤和按字段名排序。那是我的实现：

```
List<OBJECT> result = collection.FindAll().SetSortOrder(SortFieldName).AsQueryable().Where(expression).ToList(); 
```

变量表达式为：

```
Expression<Func<OBJECT, bool>> expression 
```

和 SortFieldName 是一个包含“名称”或其他内容的字符串。

该命令不起作用，因为结果为空。我错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T14:53:26.860

您不能将本机 MongoDB 查询与 LINQ 查询混合使用。您必须完全以一种方式或另一种方式编写查询。下面是一些示例代码，显示了编写相同查询的两种方式：

```
collection.Insert(new C { Id = 1, X = 3 });
collection.Insert(new C { Id = 2, X = 2 });
collection.Insert(new C { Id = 3, X = 1 });

Console.WriteLine("Using MongoDB query:");
foreach (var document in collection.Find(Query.GT("X", 1)).SetSortOrder("X"))
{
    Console.WriteLine(document.X);
}
Console.WriteLine();

Console.WriteLine("Using LINQ:");
foreach (var document in collection.AsQueryable().Where(c => c.X > 1).OrderBy(c => c.X))
{
    Console.WriteLine(document.X);
}
Console.WriteLine(); 
```

# java - 将目录存储为文件对象或字符串？

> ID：13840322
> 
> 赞同：2
> 
> 时间：2012-12-12T12:57:06.790
> 
> 标签：java

在我的应用程序中，我有一个名为`MyObject`. 此类必须有一个代表目录的成员（对象将写入此目录）。

我应该为这个成员使用 a`String`还是`File`object？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T12:59:57.213

使用一个`File`对象。始终最好选择最能反映数据使用情况的对象类型。

*顺便说一句，你永远不应该调用你的 object `MyObject`。选择一个更有意义的名称来描述您的对象的用途。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:02:06.153

我不认为这很重要。假设您无论如何都需要创建一个 File 对象，可能最干净的是有一个最终的 File 字段。

受评论启发的编辑：更重要的是，如果您有该成员的吸气剂，该吸气剂应该返回`File`or`String`或者甚至`URL`or `URI`？这会影响类的公共 API，应该认真考虑。并且在您需要之前不提供 getter 可能是最简单的（除非它是一个您需要“完成”的库），而是`toString()`为了调试等目的而只提供有意义的覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:12:16.650

文件很难测试。试试[TDD——](http://en.wikipedia.org/wiki/Test-driven_development)它会改进你的设计。我不知道任何文件抽象库，但也许你应该考虑寻找一个。或者至少尝试将您的业务代码与文件处理代码尽可能地分开

# sql - 实体框架在本地工作，但不能在 azure 上工作

> ID：13840326
> 
> 赞同：4
> 
> 时间：2012-12-12T12:57:15.970
> 
> 标签：sql, entity-framework-4, azure

我有一个在本地完美运行的网络项目。但是，当我更改 Azure 上已发布网站中的连接字符串以连接到我在 SQL Azure 上的数据库时，它会开始出现此错误。

```
System.Data.Entity.Infrastructure.UnintentionalCodeFirstException: Code generated using the T4 templates for Database First and Model First development may not work correctly if used in Code First mode. To continue using Database First or Model First ensure that the Entity Framework connection string is specified in the config file of executing application. To use these classes, that were generated from Database First or Model First, with Code First add any additional configuration using attributes or the DbModelBuilder API and then remove the code that throws this exception.
   at MyClass.OnModelCreating(DbModelBuilder modelBuilder) in c:\a\src\MyProject\Model.Context.cs:line 25
   at System.Data.Entity.Internal.LazyInternalContext.CreateModelBuilder()
   at System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext)
   at System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input)
   at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Select[TSource,TResult](IQueryable`1 source, Expression`1 selector) 
```

我的配置有：

```
<connectionStrings>
    <add name="MyDBEntities" connectionString="metadata=res://*/MyModel.csdl|res://*/MyModel.ssdl|res://*/MyModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;Server=tcp:[Removed].database.windows.net,1433;Database=MyDB;User ID=[Removed];Password=[Removed];Trusted_Connection=False;Encrypt=True;Connection Timeout=30;&quot;" providerName="System.Data.EntityClient" /> 
    <add name="MyDB" connectionString="metadata=res://*/Model.csdl|res://*/Model.ssdl|res://*/Model.msl;provider=System.Data.SqlClient;provider connection string=&quot;Server=tcp:[Removed].database.windows.net,1433;Database=MyDB;User ID=[Removed];Password=[Removed];Trusted_Connection=False;Encrypt=True;Connection Timeout=30;&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

我使用该连接字符串在本地使用我的单元测试进行了测试，它可以在连接到 SQL Azure 数据库的本地计算机上运行。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-07T04:10:30.180

我今天遇到了这个确切的问题；这是我第一次部署到 Azure。我一直在拔头发，但我没有剩下的了。 **我终于弄明白了，这可能与这里的原始发帖人有同样的问题。**

就像原始海报一样，我在这些配置中进行了测试：

*   从 Visual Studio 对本地数据库运行 WCF Web 应用程序——成功
*   将 WCF Web App 从 Visual Studio 部署到本地 IIS，针对本地 DB 运行——成功
*   从 Visual Studio 对 Azure SQL DB 运行 WCF Web 应用程序——成功
*   **通过 Visual Studio 将 WCF 应用程序部署到 Azure，针对 Azure SQL DB 运行——失败！！**

在阅读了另一篇文章（[代码优先与数据库优先](https://stackoverflow.com/questions/8618342/code-first-vs-database-first)）之后，我得到了一个提示。那篇文章说，如果“连接字符串有元数据，EF 认为它是模型优先或数据库优先”，但如果它是“普通连接字符串，EF 认为它是代码优先”。我浏览了已部署的 Azure 网站的 web.config，并确认连接字符串具有对 Model-First 元数据的正确引用。那么问题出在哪里？？？

我想**也许 Azure 网站没有读取 web.config 的连接字符串**。回想我是如何创建 Azure 网站的，我记得**我给 Azure SQL DB 赋予了一个别名，该别名与我在 web.config 中的连接字符串的“标签”名称完全相同！** 澄清：

*   在 Azure 管理控制台中，我转到网站设置并查看了“烘焙”到我的 Azure 网站的“连接字符串”设置，这是使用数据库创建网站的副作用——连接字符串“句柄”是“ SsnCustInfoModelContainer”——**我错误地为连接赋予了与连接字符串的 web.config 'handle' 相同的 'handle'/'alias'，认为这会有所帮助。相反，当 EF 查找连接字符串时，它找到了这个“别名”句柄，这是一个不包含元数据的“普通”SQL 连接字符串。这个“别名”掩盖了 web.config 中指定的真实连接字符串。**

所以我销毁了我的 Azure SQL DB 和我的 Azure 网站。然后我重新创建了 Azure 网站，但这次我要求提供“SsnCustInfoModelContainer_Proto”的连接字符串“别名”以连接到关联的 Azure SQL Server。从本地 SQL Server Management Studio 初始化 Azure SQL DB 后，我再次将 WCF Web 应用程序部署到 Azure 网站（当然，为此我必须下载新的部署配置文件），我再次尝试了该应用程序。这次它起作用**了——“别名”“SsnCustInfoModelContainer_Proto”与 EF 没有冲突，也没有被 EF 发现。相反，EF 继续在 web.config 中查找真正的连接字符串以及所有正确的元数据。** 问题解决了。

# python - Outlook 的电子邮件报告应用程序

> ID：13840327
> 
> 赞同：0
> 
> 时间：2012-12-12T12:57:17.320
> 
> 标签：python, macos, email, outlook, applescript

我初创公司的销售人员每天都会从供应商那里发送和接收大量邮件。经销商和客户。但是他们往往会经常忘记这些邮件……至于他们是否已经回复/跟进。他们浪费了很多时间来解决这个问题。期望他们使用像 MailChimp 这样的邮件工具更加痛苦，而票务工具并不适合这些工作。

因此，我正在尝试构建一个应用程序，该应用程序可以创建在特定日期范围内与之交互的电子邮件 ID 总数的报告。唯一的目标是在 csv 文件中创建报告或将数据转储到 Google 电子表格中。

用户输入的期间的报告如下所示：

1.  电子邮件 ID - 特定日期范围内“已发送邮件”和“收件箱”中的所有电子邮件
2.  名称 - 如果存在
3.  地位

“状态”将是：

1.  收到销售人员未回复
2.  已发送但收件人未回复
3.  销售人员回复
4.  ...等等

我不喜欢直接在邮件服务器上运行脚本，但不确定 Outlook Exchange 是否允许这样的事情。如果它可以是直接在销售人员的机器上运行的应用程序，我会更喜欢。

少数使用 Mac 和其他 Windows。我将首先专注于Mac。使用的邮件工具是 Outlook for Mac-2011，机器是 Lions 或 Snow Leopards。邮件位于 Outlook Exchange

我必须承认我不是一个编码员，但我犯了错误/谷歌我通过它。随着假期的临近，我有一些时间，因此想到了这个项目。

我对 Python 比较满意。但是对于这个项目，从我所读到的，似乎是 AppleScripting 的工作。在开始我的失误之前，我想征求 SO 社区的建议：

1.  AppleScripting 是最好的选择吗？如果是，您能否分享最好的资源来阅读相同的内容。我有“AppleScript Mac OS X 上的脚本和自动化综合指南”的副本。但它几乎是 6 岁。
2.  可以仅使用 Python 以某种方式完成吗？- 我想将各自的报告转储到谷歌电子表格上，因此在这里更容易让 Python 参与进来。
3.  是否有任何类似的应用程序已经存在？
4.  还是我完全偏离了轨道

很抱歉乱跑。但真的很期待这方面的一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:10:12.393

我喜欢：

[AppleScript 1-2-3](https://rads.stackoverflow.com/amzn/click/com/0596102119) 和 [AppleScript：权威指南](https://rads.stackoverflow.com/amzn/click/com/0596102119)

这里也有一些很好的教程： [MacScripter](http://macscripter.net/viewforum.php?id=31)

话虽如此，您应该考虑学习 AppleScript 以在您的公司完成一项任务的成本/收益。您最好雇用某人为您编写脚本并专注于发展您的业务。

# memory - “gld/st_throughput”和“dram_read/write_throughput”指标有什么区别？

> ID：13840328
> 
> 赞同：2
> 
> 时间：2012-12-12T12:57:18.077
> 
> 标签：memory, cuda, metrics, throughput

在 CUDA 视觉分析器版本 5 中，我知道“gld/st_requested_throughput”是应用程序请求的内存吞吐量。然而，当我试图找到硬件的实际吞吐量时，我很困惑，因为有两对指标似乎是合格的，它们是“gld/st_throughput”和“dram_read/write_throughput”。哪一对实际上是硬件吞吐量？另一个是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:45:37.860

`gld/st_throughput`包括由 L1 和 L2 缓存服务的事务。While`dram_read/write_throughput`是 L2 和设备内存之间的吞吐量。因此，每个全局内存访问都计入，`gld/st_throughput`但只有错过 L1 和 L2 缓存的请求才计入`dram_read/write_throughput`.

我在任何地方都没有找到对柜台的一个很好的概述。希望 NVIDIA 能提供...

# asp.net - 单击 ASP.NET 按钮后，我得到了正确的重定向，但没有在指定的新窗口中

> ID：13840330
> 
> 赞同：1
> 
> 时间：2012-12-12T12:57:38.590
> 
> 标签：asp.net, response.redirect, new-window

单击 ASP.NET 按钮重定向到正确的网站，但在同一选项卡上，而不是在新选项卡中我需要做的。下面的代码有什么问题 `OnClientClick="aspnetForm.target ='_blank';"`？为什么光靠自己还不够，还需要做什么？

按钮控件的以下 ASP.NET 代码是：

```
<asp:Button ID="btnGenerateReport" runat="server" Text="Generate Report" 
OnClick="btnGenerate_Click" OnClientClick="aspnetForm.target ='_blank';" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T05:37:34.513

**我知道在asp**中将页面重定向到新标签的两种方法

 **> 1）您已经在使用的第一种方法，它也有效。制作 Button 的 onclientclick 事件，并在 Button Click 后面的代码上编写以下代码：-

```
button.OnClientClick = "aspnetForm.target='_blank'"; Response.Redirect("yourpage.aspx"); 
```

> 2）你也可以使用javascript

```
 button.Attributes.Add("onclick", "window.open('yourpage.aspx');return false;"); 
```

这两种方法都会在单击按钮时将您的页面重定向到新选项卡。

您的代码的错误是**OnClientClick = "aspnetForm.target='_blank;'"**删除 '_blank' 之后的分号，它将起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:04:08.817

如果您正在寻找服务器端代码以在按钮单击上打开一个新窗口，那么这里是如何做到这一点的。

将以下脚本添加到页面的部分

```
<script language="javascript" type="text/javascript">
    function openNewWin(url) {
        var x = window.open(url, 'mynewwin', 'width=600,height=600,toolbar=1');
        x.focus();
    }
</script> 
```

然后按如下方式添加一个Button Control

```
<asp:Button ID="btnOpenPop" runat="server" Text="Open Pop"           
    onclick="btnOpenPop_Click" /> 
```

最后在代码隐藏文件中添加一些代码

```
protected void btnOpenPop_Click(object sender, EventArgs e)
{
    string url = "http://www.dotnetcurry.com";
    ClientScript.RegisterStartupScript(this.GetType(), "OpenWin", "<script>openNewWin('" + url + "')</script>");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:05:41.667

您不能在按钮上使用目标属性。

你必须使用javascript函数`window.open()`

检查这个：

[窗口打开() 方法](http://www.w3schools.com/jsref/met_win_open.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T16:03:33.243

我不会轻易发布链接，但我发现这个网站解释了一切，它也解决了我的问题。

[http://dotnetspidor.blogspot.co.uk/2009/01/open-new-window-in-aspnet-web-page_28.html](http://dotnetspidor.blogspot.co.uk/2009/01/open-new-window-in-aspnet-web-page_28.html)**

# salesforce - 关闭浏览器窗口时自动注销用户-salesforce

> ID：13840334
> 
> 赞同：2
> 
> 时间：2012-12-12T12:57:42.893
> 
> 标签：salesforce, apex-code, visualforce

我有一个关于 Salesforce 会话的基本问题，我想在我的用户关闭浏览器窗口时自动注销他们。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-10-02T14:25:52.317

这是一个旧线程，但我想我会继续分享我的工作......

将控制器添加到您的站点主页，并在 init 操作中重定向到安全页面（如果它还不是安全页面）。

```
public PageReference init() {
        String currentURL = Site.getCurrentSiteUrl();
        if (!startsWith(currentUrl, 'https://')) {
            return redirect(currentURL.replace('http://', 'https://'));
        }

        return null;
    } 
```

# java - 使用 Button 使布局可见/不可见

> ID：13840335
> 
> 赞同：0
> 
> 时间：2012-12-12T12:57:43.887
> 
> 标签：java, android, user-interface, button, android-relativelayout

目前，我正在开发一个 Android 平板电脑上的图形用户界面项目。在一个屏幕上，我有几个按钮，我想用它们使其`RelativeLayout`可见/不可见。

我尝试使用 onClickListener，但在内部方法`onClick`中不支持非最终变量，我用它来选择每个按钮和`RelativeLayout`.

GUI 是动态构建的，因为它的整个结构取决于通过 XML 文件提供的数据。此外，接收文本更新的`RelativeLayout`用途`TextView`（传感器数据，如温度和湿度），这就是使用动态方法的原因。

你能给我一些想法来解决这个问题吗？帮助表示赞赏。如果所述信息对您来说还不够，请询问，我会为您提供更多详细信息。

目前我试过这个：

```
private void setSensorPointOnClick(final ObjectView currentObjectView, final String currentLinkName)
{
    for(int i=0; i<listofSensorDeviceButtons.size(); i++ )
    {

        listofSensorDeviceButtons.get(i).setOnClickListener(
            new View.OnClickListener()  
            {
                public void onClick(View v)  
                {
                    arrayClickedButton[i] = listofSensorDeviceButtons.get(i);
                    mainFrameLayout.removeAllViews();
                    stepToObject(currentObjectView, currentObjectView.getName());               
                }
            }
        );

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:27:07.887

要么使用包含要隐藏/显示的视图的字段（并在 onClickListener 中使用它们），要么在事件处理中使用 findViewById。

另一种选择是创建另一个最终视图变量，将在设置 onClickListener 之前设置，以保存新创建视图的引用。

所以，简而言之，我写的可能的解决方案是：

1.  使用字段。
2.  使用 findViewById
3.  使用额外的最终变量。

# windows - 无法从原始流生成正确的 wav 文件

> ID：13840337
> 
> 赞同：1
> 
> 时间：2012-12-12T12:57:45.377
> 
> 标签：windows, audio, wav, wasapi, riff

我捕获了原始音频数据流及其**WAVEFORMATEXTENSIBLE**结构。 **WAVEFORMATEXTENSIBLE**如下图所示：

![WAVEFORMATEXTENSIBLE 结构](../Images/2fa21dbf51105007f4fbc3812c6bcde0.png)

按照 wav 文件的[标准](http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html)，我尝试将原始位写入 wav 文件。我要做的是：

1.  写“RIFF”。

2.  写一个 DWORD。(文件大小 - sizeof("RIFF") - sizeof(DWORD))。

**=== WaveFormat 块 ===**

3.  写“WAVEfmt”

4.  写一个 DWORD。（WAVEFORMATEXTENSIBLE 结构的大小）

5.  编写 WAVEFORMATEXTENSIBLE 结构。

**===事实块===**

6.  写“事实”

7.  写一个 DWORD。( 4 )

8.  写一个 DWORD。（流中的样本数，应该是 sizeof(rawdata)*8/wBitsPerSample ）。

**=== 数据块 ===**

9.  写“数据”

10.  写一个 DWORD（原始数据的大小）

11.  写入原始数据。

从以上步骤得到wav文件后，我用媒体播放器播放了wav文件，没有声音，用大胆播放会给我一个失真的声音，我可以听到这是我想要的正确音频，但声音是被噪音扭曲。

原始数据可以在[这里找到](https://docs.google.com/open?id=0B5bEhIhshfIeOG9PZTdIT19pd2s)

我生成的wav文件[在这里](https://docs.google.com/open?id=0B5bEhIhshfIeWlA3NHBYS1MyU3M)

这让我很困惑，因为当我使用相同的方法将 IEEE-float 数据转换为 wav 文件时，它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:20:49.117

我想通了，似乎 IAudioRenderClient 中的 getbuffer releasebuffer 循环将原始数据的格式与传递给 IAudioClient 的初始化方法的格式相同。

在我的情况下，IAudioClient 中的 GetMixFormat 与传递给初始化方法的格式不同。我认为 GetMixFormat 获得了设备支持的格式。

IAudioClient 应该已经完成​​了从初始化格式到 mixformat 的格式转换。我拦截了初始化方法，获取了格式，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T18:57:11.803

我正在拦截 WASAPI 以访问音频数据并面临完全相同的问题，即从数据生成的音频文件听起来像是正确的内容，但在某种程度上非常嘈杂，尽管帧速率、样本宽度、通道数等设置正确.

WAVEFORMATEXTENSIBLE 的 SubFormat 字段显示数据实际上是 KSDATAFORMAT_SUBTYPE_IEEE_FLOAT，而我最初将其视为整数。根据[这个页面](https://docs.microsoft.com/en-us/windows/win32/api/mmreg/ns-mmreg-waveformatextensible#remarks)，KSDATAFORMAT_SUBTYPE_IEEE_FLOAT 相当于 WAVEFORMATEX 中的 WAVE_FORMAT_IEEE_FLOAT。因此，将 wav 文件的 fmt 块中的“音频格式”（通常从第 20 位开始）设置为 WAVE_FORMAT_IEEE_FLOAT（即 3）解决了这个问题。记得把它放在小端。

*   音频格式的原始值 [![在此处输入图像描述](../Images/180517e53c778e1dd5ec13f61aa9ad18.png)](https://i.stack.imgur.com/zEHzD.png)
*   修改后 [![在此处输入图像描述](../Images/70d4520ca2e67bb57f2741a4c8f24e05.png)](https://i.stack.imgur.com/jLarr.png)

# css - 嵌套 div 的最小高度

> ID：13840338
> 
> 赞同：0
> 
> 时间：2012-12-12T12:57:50.413
> 
> 标签：css

我有一堆嵌套的 div，中间是一些内容。我希望包含内容的 div 具有最外层 div 的最小高度。

有没有人设法做到这一点？

[这](http://jsfiddle.net/hLGbR/)是我想要做的一个例子，我把代码放在下面。我希望最小高度为`#c`s`#a`高度。这*应该*呈现一个绿色框，但它实际上是红色的。

```
<div id="a">
    <div id="b">
        <div id="c">
            Content here
        </div>
    </div>
</div>

​​#a { height: 100px; }
#b { min-height: 100%; background-color: red}
#c { min-height: 100%; background-color: green}
​ 
```

我不担心它在现代浏览器之外的任何东西上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:07:24.540

据我了解，您的 div #a 具有固定的高度，如果是这样的话：

尝试使用此样式`#a`

```
overflow: hidden; 
```

并添加到#b 和#c

```
display: inline; 
```

这就是您的小提琴应该是什么样子，刚刚经过测试并且可以正常工作：

```
#a { min-height: 100px; overflow:hidden;}
#b { min-height:100%; background-color: red; display:inline;}
#c { min-height:100%; background-color: green; display:inline;}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:31:49.313

你很接近：

```
<div id="a">
    <div id="b">
        <div id="c">
            Content here<br />
            her is more content<br />
            Content here<br />
            her is more content<br />
            Content here<br />
            her is more content<br />
            Content here<br />
            her is more content<br />
            Content here<br />
            her is more content<br />

        </div>
    </div>
</div> 
```

CSS：

```
#a { height: auto; }
#b { min-height:100%; background-color: red}
#c { min-height:100%; background-color: green;}​ 
```

​<strong> [FIDDLE](http://jsfiddle.net/hLGbR/13/)（重新编辑）@gearsdigital 的回答

# windows-8 - Metro 应用程序中的 Scrollviewer - 通过触摸滚动并处理其他手势

> ID：13840341
> 
> 赞同：3
> 
> 时间：2012-12-12T12:57:58.493
> 
> 标签：windows-8, microsoft-metro, scrollviewer, gestures

我有 Grid 和 Scrollviewer 的页面：

```
<Grid x:name="mainGrid">
  ...
  <ScrollViewer Name="mainScroller" ScrollViewer.HorizontalScrollBarVisibility="Visible" ScrollViewer.HorizontalScrollMode="Enabled">
    ...
  </ScrollViewer>
  ...
</Grid> 
```

我想对垂直触摸移动（用手指向上移动）进行手势处理，但我也想通过水平触摸移动来保留滚动的 mainScroller 内容。

我尝试为 mainGrid ManipulationCompleted="Grid_ManipulationCompleted" 添加：

```
private void Grid_ManipulationCompleted(object sender, ManipulationCompletedRoutedEventArgs e)
{
  if (e.Cumulative.Translation.Y < -50 && e.Velocities.Linear.Y<1000)
  {
    ...make some action...
  }
} 
```

最终效果是，如果我对 mainGrid 使用 ManipulationMode="TranslateY"，则垂直触摸移动有效，但水平滚动无效，当我不使用它时，水平滚动有效，但垂直触摸移动无效。是否有可能使这两个功能都起作用？对不起我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T16:46:04.977

它可能有助于理解您的场景，但一般来说，您不应该创建可能与内置手势冲突的新手势，就像您提议的那样。

John Wiese
Microsoft - 高级技术传播者
jwiese@microsoft.com
@johnwiese

# c++ - 应用于单个时间序列的独立成分分析

> ID：13840344
> 
> 赞同：1
> 
> 时间：2012-12-12T12:58:18.040
> 
> 标签：c++, math

首先，我不是金融工程大师。我作为一名 COBOL 程序员工作了很多年，虽然我对 c++ 有点生疏，但经过一点复习，我可以做得很好。

我从事期货交易已有几年了，并为自己设定了在单一时间序列数据流（期货价格、股票价格）上实施 ICA 的任务。

ICA 算法是 it++ 包 (fastICA) 的一部分，但是有必要对时间序列数据执行一些预处理，因为 ica 的工作前提是观察的数量至少与源的数量一样大。

根据我的发现，预处理涉及构造一个矩阵 Y，其中包含第一列中的原始时间序列、第二列中时间序列的滞后 1 移位版本等。

```
eg.

Y= 1.0135518 - 0.7113242 - 0.3906069 1.565203
- 0.7113242 - 0.3906069 1.565203 0.0439317
- 0.3906069 1.565203 0.0439317 - 1.1656093
etc. 
```

我的问题是：

1.  执行 ICA 后，恢复时间序列数据中的独立源需要哪些步骤？

2.  如何从最重要到最不重要对 IC 进行排序。

    如果有人可以回答这些问题或为我指明合适的书籍或文章的方向，我将不胜感激。最好是书或文章在本质上更实用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:18:07.603

你可以试试`Handbook of Blind Source Separation: Independent Component Analysis and Applications`Pierre Comon 和 Christian Jutten 作为参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:33:28.460

通常 ICA 返回一个分离矩阵 M。因此，要找到您的来源，您需要将 M 乘以原始测量矩阵。按重要性对 ICA 组件进行排序仅取决于您认为对您重要的内容，例如方差或其他一些统计属性。ICA 本身不提供任何自然排序机制。

# html - 三个 div 定位在表格单元格内

> ID：13840345
> 
> 赞同：3
> 
> 时间：2012-12-12T12:58:19.523
> 
> 标签：html, css, vertical-alignment, alignment

请帮我在表格单元格中对齐三个 div，如下所示：

![在此处输入图像描述](../Images/62e4a4d032d6d082ab6ed2254fe3472e.png)

两个小 div 绝对位于表格单元格的右上角和左下角。一个 div 应该在表格单元格内垂直和水平居中。根据单元格高度，小 div 应该能够与居中的 div 重叠。

我设法对齐中央 div。但我不知道如何实现小 div。

```
 <div style=" #position: absolute; #top: 50%; display: table-cell; vertical-align: middle; text-align: center; width:inherit; height:inherit;">
      <div style=" #position: relative; #top: -50%;  margin-left: auto; margin-right: auto; background-color: green ">
        first line<br>
        second line
    </div>
</div> 
```

这是我目前拥有的：http: [//jsfiddle.net/zm2WW/5/](http://jsfiddle.net/zm2WW/)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:11:20.677

我清理了你的代码。有关演示，请参见[http://jsfiddle.net/zm2WW/12/ 。](http://jsfiddle.net/zm2WW/12/)

这是中间表格单元格现在的样子：

```
<table>
    <tr>
        <td>
        </td>
        <td>
            <div class="containingBlock">
                <span class="topSpan">TopSpan</span>
                <div class="centerCell">text</div>
                <span class="bottomSpan">2</span>
            </div>
        </td>
        <td></td>
    </tr>
</table>​ 
```

还有你的 CSS：

```
td {
    border: 1px solid;
    width: 200px;
    height: 75px;
}

div, span {
    border: 1px solid black;
}

.containingBlock {
    display: table;
    height: 100%;
    position: relative;
    vertical-align: middle;
    width: 100%;
}

.centerCell {
    display: table-cell;
    vertical-align: middle;
    width: 100%;
}

.topSpan {
    position: absolute;
    top: 0;
}

.bottomSpan {
    bottom: 0;
    right: 0;
    position: absolute;
    right: 0
}​ 
```

这里发生的是你有一个相对包含块，它为绝对定位的跨度提供了背景。div 占据整个单元格，但其内容居中，给您相同的效果。

# apache-flex - 如何在 Flex 中检测 CJK 字符

> ID：13840351
> 
> 赞同：0
> 
> 时间：2012-12-12T12:58:45.780
> 
> 标签：apache-flex, flex4

我通过 HTTPService 调用从数据库接收一个 XML 作为我的 flex 应用程序的输入，现在这个 xml 可能有一些 CJK（中文、日文和韩文）字符，我需要检测其中任何一个字符的存在并做出一些决定我的应用程序。xml 通常有英文字符，但可能有 CJK。

请告知我们如何在 flex 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:59:20.007

您可以遍历字符串并查看每个字符：

```
for (var i:int=0; i<mySting.length; i++){
    var thisCharacterCode:Number = myString.charCodeAt(i);
    // now look at the code and see if it is a CJK
} 
```

供参考... CJK 的所有 unicode 字符都可以在这里找到[Unicode Character Charts](http://www.unicode.org/charts/)

# android - 如何使用 ImageViews 放置五个相互连接的图像？

> ID：13840368
> 
> 赞同：0
> 
> 时间：2012-12-12T12:59:55.543
> 
> 标签：android, uiimageview, android-imageview

这是我的xml。我想避免的图形布局中的图像之间存在间隙。我希望所有图像以这样的方式相互对齐，使 5 个图像看起来像一个图像。

```
<LinearLayout
    android:id="@+id/linearInteractTab"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:layout_centerHorizontal="true"
    android:weightSum="5"
    android:layout_margin="5dp" >

    <ImageView
        android:id="@+id/imgCall"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:src="@drawable/call" />

    <ImageView
        android:id="@+id/imgMsg"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/mail" />

    <ImageView
        android:id="@+id/imgComment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/chat" />

    <ImageView
        android:id="@+id/imgDir"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/direction" />

    <ImageView
        android:id="@+id/imgAppt"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:src="@drawable/calender" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:35:06.070

放

```
layout_width="0dp" 
```

对于所有图像并删除

```
android:weightSum="5" 
```

如果所有图像的大小相同，那么这是正确的：

```
android:layout_height="wrap_content" 
```

如果尺寸不同，则很难正确对齐它们，但设置固定尺寸可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:05:48.467

尝试`android:layout_margin="5dp"`从父线性布局中删除此行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:37:45.267

```
 <FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:weightSum="5" >

    <ImageView
    android:id="@+id/imgComment"
    android:layout_width="fill_parent"
    android:layout_marginLeft="10dp"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />
    <ImageView
    android:id="@+id/imgComment"
    android:layout_width="fill_parent"
    android:layout_marginLeft="20dp"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

    <ImageView
    android:id="@+id/imgComment"
    android:layout_width="fill_parent"
    android:layout_marginLeft="30dp"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

   </FrameLayout> 
```

我刚刚使用框架布局放置了 4 个重叠的图像。我只是`marginLeft`为了表明图像确实存在。

# eclipse - What is the global setting for Navigator "Link with editor" in Eclipse Helios?

> ID：13840371
> 
> 赞同：1
> 
> 时间：2012-12-12T12:59:58.537
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt

I'm using eclipse Helios with CDT 7\. I want to set the global preference for the "Link with editor" in Navigator to true. I want to know the property name for this setting. I have searched all the pref files in workspace, but couldn't find.
Is there anything like "org.eclipse.ui.navigate.linkWithEditor"?

Where does Eclipse stores this setting in workspace?

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:42:23.737

The following setting in .ini file is working for global

```
org.eclipse.ui/LINK_NAVIGATOR_TO_EDITOR=true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:27:59.663

Preferences (one file per plugin) are stored under `.metadata/.plugins/org.eclipse.core.runtime/.settings`. If I grep for `link` in that directory, I find it hits in the JDT and Groovy plugins.

# javascript - 如何在 Knockout javascript 表中创建文本链接？

> ID：13840376
> 
> 赞同：8
> 
> 时间：2012-12-12T13:00:11.320
> 
> 标签：javascript, knockout.js

我有一些 KnockoutJS 代码正在工作 - 它拉入一个列表并将其绑定到一个表。

对于显示 的表数据`name`，我希望这是一个`<a href=...>`请，但不确定如何。名称仍然显示，顺便说一句。但是你可以点击它。

这是我当前的代码：-

```
<tbody data-bind="foreach: items">
    <tr>
        <td data-bind="text: name()"></td>
        <td data-bind="text: price()"></td>
        <td data-bind="text: endsOn()"></td>
    </tr>   
</tbody> 
```

没什么太疯狂的。

我有另一个名为的属性`url`，其中包含`http://blah`引导用户访问的完整 url。另外，我想打开一个新标签，拜托。

有什么建议么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T13:07:22.460

您必须从`td`标签中删除 data-bind 属性并在`a`其中放入 attr 绑定`td`：

```
<tbody data-bind="foreach: items">
    <tr>
        <td><a data-bind="text: name, attr: {href: url}" target="_new"></a></td>
        <td data-bind="text: price"></td>
        <td data-bind="text: endsOn"></td>
    </tr>   
</tbody> 
```

PS`()`如果不构造表达式，则不必在 data-bind 属性中放置属性名称。

# python - 如何将列表中的所有项目与 Python 相乘？

> ID：13840379
> 
> 赞同：247
> 
> 时间：2012-12-12T13:00:14.270
> 
> 标签：python, list, multiplication

我需要编写一个函数来获取一个数字**列表并将它们****相乘**。例： `[1,2,3,4,5,6]`会给我`1*2*3*4*5*6`。我真的可以使用你的帮助。

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-12-12T13:03:18.597

Python 3：使用`functools.reduce`：

```
>>> from functools import reduce
>>> reduce(lambda x, y: x*y, [1,2,3,4,5,6])
720 
```

Python 2：使用`reduce`：

```
>>> reduce(lambda x, y: x*y, [1,2,3,4,5,6])
720 
```

为了兼容 2 和 3 使用`pip install six`，则：

```
>>> from six.moves import reduce
>>> reduce(lambda x, y: x*y, [1,2,3,4,5,6])
720 
```

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2012-12-12T13:03:06.647

您可以使用：

```
import operator
import functools
functools.reduce(operator.mul, [1,2,3,4,5,6], 1) 
```

有关解释，请参阅[`reduce`](http://docs.python.org/2/library/functions.html#reduce)和[`operator.mul`](http://docs.python.org/2/library/operator.html#operator.mul)文档。

您需要`import functools`Python 3+ 中的行。

* * *

## 回答 #3

> 赞同：106
> 
> 时间：2015-09-06T17:54:16.140

我会使用`numpy.prod`来执行任务。见下文。

```
import numpy as np
mylist = [1, 2, 3, 4, 5, 6] 
result = np.prod(np.array(mylist)) 
```

* * *

## 回答 #4

> 赞同：68
> 
> 时间：2012-12-12T15:47:11.487

如果您想避免导入任何内容并避免更复杂的 Python 领域，您可以使用简单的 for 循环

```
product = 1  # Don't use 0 here, otherwise, you'll get zero 
             # because anything times zero will be zero.
list = [1, 2, 3]
for x in list:
    product *= x 
```

* * *

## 回答 #5

> 赞同：42
> 
> 时间：2019-02-14T19:32:39.203

开始`Python 3.8`，标准库[`.prod`](https://docs.python.org/3/library/math.html#math.prod)的模块中包含了一个函数：`math`

> `math.prod(iterable, *, start=1)`

该方法返回一个`start`值（默认值：1）乘以可迭代数字的乘积：

```
import math
math.prod([1, 2, 3, 4, 5, 6])

>>> 720 
```

如果 iterable 为空，这将产生`1`（或`start`值，如果提供）。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-11-28T12:44:07.783

这是我机器的一些性能测量结果。如果这是针对长时间运行循环中的小输入执行的，则相关：

```
import functools, operator, timeit
import numpy as np

def multiply_numpy(iterable):
    return np.prod(np.array(iterable))

def multiply_functools(iterable):
    return functools.reduce(operator.mul, iterable)

def multiply_manual(iterable):
    prod = 1
    for x in iterable:
        prod *= x

    return prod

sizesToTest = [5, 10, 100, 1000, 10000, 100000]

for size in sizesToTest:
    data = [1] * size

    timerNumpy = timeit.Timer(lambda: multiply_numpy(data))
    timerFunctools = timeit.Timer(lambda: multiply_functools(data))
    timerManual = timeit.Timer(lambda: multiply_manual(data))

    repeats = int(5e6 / size)
    resultNumpy = timerNumpy.timeit(repeats)
    resultFunctools = timerFunctools.timeit(repeats)
    resultManual = timerManual.timeit(repeats)
    print(f'Input size: {size:>7d} Repeats: {repeats:>8d}    Numpy: {resultNumpy:.3f}, Functools: {resultFunctools:.3f}, Manual: {resultManual:.3f}') 
```

结果：

```
Input size:       5 Repeats:  1000000    Numpy: 4.670, Functools: 0.586, Manual: 0.459
Input size:      10 Repeats:   500000    Numpy: 2.443, Functools: 0.401, Manual: 0.321
Input size:     100 Repeats:    50000    Numpy: 0.505, Functools: 0.220, Manual: 0.197
Input size:    1000 Repeats:     5000    Numpy: 0.303, Functools: 0.207, Manual: 0.185
Input size:   10000 Repeats:      500    Numpy: 0.265, Functools: 0.194, Manual: 0.187
Input size:  100000 Repeats:       50    Numpy: 0.266, Functools: 0.198, Manual: 0.185 
```

您可以看到 Numpy 在较小的输入上要慢很多，因为它在执行乘法之前分配了一个数组。另外，请注意 Numpy 中的溢出。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-06-22T23:31:58.943

我个人喜欢这个将通用列表的所有元素相乘的函数：

```
def multiply(n):
    total = 1
    for i in range(0, len(n)):
        total *= n[i]
    print total 
```

它很紧凑，使用简单的东西（一个变量和一个 for 循环），对我来说感觉很直观（看起来就像我对这个问题的看法，只需取一个，乘以它，然后乘以下一个，等等！ )

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-08-21T05:05:52.563

`Numpy`具有`prod()`返回列表乘积的函数，或者在这种情况下，因为它是 numpy，它是给定轴上数组的乘积：

```
import numpy
a = [1,2,3,4,5,6]
b = numpy.prod(a) 
```

...或者你可以只导入`numpy.prod()`：

```
from numpy import prod
a = [1,2,3,4,5,6]
b = prod(a) 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-01-13T20:55:56.417

简单的方法是：

```
import numpy as np
np.exp(np.log(your_array).sum()) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-09-09T05:26:31.280

```
nums = str(tuple([1,2,3]))
mul_nums = nums.replace(',','*')
print(eval(mul_nums)) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-07-07T14:58:22.947

今天发现了这个问题，但我注意到它没有列表中有`None`' 的情况。因此，完整的解决方案将是：

```
from functools import reduce

a = [None, 1, 2, 3, None, 4]
print(reduce(lambda x, y: (x if x else 1) * (y if y else 1), a)) 
```

在加法的情况下，我们有：

```
print(reduce(lambda x, y: (x if x else 0) + (y if y else 0), a)) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-11-16T10:40:49.677

我希望通过以下方式：

```
 def product_list(p):
          total =1 #critical step works for all list
          for i in p:
             total=total*i # this will ensure that each elements are multiplied by itself
          return total
   print product_list([2,3,4,2]) #should print 48 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-09-05T22:29:03.260

这是我的代码：

```
def product_list(list_of_numbers):
    xxx = 1
    for x in list_of_numbers:
        xxx = xxx*x
    return xxx

print(product_list([1,2,3,4])) 
```

结果：('1*1*2*3*4', 24)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-11T12:07:14.603

我的解决方案：

```
def multiply(numbers):
    a = 1
    for num in numbers:
        a *= num
    return a 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-03-05T08:39:56.297

使用递归怎么样？

```
def multiply(lst):
    if len(lst) > 1:
        return multiply(lst[:-1])* lst[-1]
    else:
        return lst[0] 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2020-04-21T12:10:57.357

'''理解for循环逻辑使用的唯一简单方法'''

Lap=[2,5,7,7,9] x=1 for i in Lap: x=i*x print(x)

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2018-06-18T09:35:48.600

这很简单，不要导入任何东西。这是我的代码。这将定义一个函数，将列表中的所有项目相乘并返回它们的产品。

```
def myfunc(lst):
    multi=1
    for product in lst:
        multi*=product
    return product 
```

# .net - Umbraco“解析 XSLT 文件时出错”

> ID：13840381
> 
> 赞同：3
> 
> 时间：2012-12-12T13:00:21.703
> 
> 标签：.net, xslt, umbraco, publishing-site

我使用 Umbraco 4.9.0 建立了一个网站，并且在本地一切正常。我发布了它并从 IIS 运行它。但它现在可以工作了，除了登录页面上引用的 XSLT 文件（Breadcrumb）它说“错误解析 XSLT 文件 {xslt 文件名}”。

错误是：'解析 XSLT 文件时出错：\xslt\SiteBreadcrumb.xslt'

```
<?xml version="1.0" encoding="UTF-8"?> <!DOCTYPE xsl:stylesheet [

   <!ENTITY nbsp "&#x00A0;"> ]> <xsl:stylesheet   version="1.0"
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxml="urn:schemas-microsoft-com:xslt"
    xmlns:umbraco.library="urn:umbraco.library"
   xmlns:Exslt.ExsltCommon="urn:Exslt.ExsltCommon"
   xmlns:Exslt.ExsltDatesAndTimes="urn:Exslt.ExsltDatesAndTimes"
   xmlns:Exslt.ExsltMath="urn:Exslt.ExsltMath"
   xmlns:Exslt.ExsltRegularExpressions="urn:Exslt.ExsltRegularExpressions"
   xmlns:Exslt.ExsltStrings="urn:Exslt.ExsltStrings"
   xmlns:Exslt.ExsltSets="urn:Exslt.ExsltSets"
   xmlns:tagsLib="urn:tagsLib" xmlns:BlogLibrary="urn:BlogLibrary"
   xmlns:UCommentLibrary="urn:UCommentLibrary"
    exclude-result-prefixes="msxml umbraco.library Exslt.ExsltCommon
   Exslt.ExsltDatesAndTimes Exslt.ExsltMath Exslt.ExsltRegularExpressions
   Exslt.ExsltStrings Exslt.ExsltSets tagsLib BlogLibrary UCommentLibrary
   ">   <xsl:output method="xml" omit-xml-declaration="yes"/>
   <xsl:param name="currentPage" select="/.."/>   <xsl:variable name="minLevel"
   select="1"/>   <xsl:template match="/">
       <xsl:if test="$currentPage/@level &gt; $minLevel">
         <tr>
           <xsl:for-each select="$currentPage/ancestor::* [@level &gt; $minLevel and string

(umbracoNaviHide) != '1']">
             <td style=" height: 24px;">
               <a href="{umbraco.library:NiceUrl(@id)}?nodeId={@id}" style="color:black;">
                 <xsl:value-of select="@nodeName"/>
               </a>
               &gt;
             </td>
           </xsl:for-each>
         </tr>
       </xsl:if>   </xsl:template> </xsl:stylesheet> 
```

有人知道为什么所有 XSLT 文件都不会解析吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:10:59.303

**错误在这条指令上**：

```
 <xsl:if test="$currentPage/@level &gt; $minLevel"> 
```

撒克逊 6.5.5 说：

> xsl 错误：如果在文件的第 21 行：/（无标题）：该值不是节点集

**一种可能的解决方案是替换**：

```
<xsl:param name="currentPage"/> 
```

**与**：

```
<xsl:param name="currentPage" select="/.."/> 
```

这样现在 XSLT 处理器就知道它`$currentPage`包含一个节点。

# python - 在 For 循环中丢失一行文本文件

> ID：13840384
> 
> 赞同：-2
> 
> 时间：2012-12-12T13:00:34.097
> 
> 标签：python

每次我一次读取一行时，我的 For 循环都会跳过第一行。当我只需要将整个文件读入内存时，问题不会发生，但大多数情况下我需要一次读取一行。

这是发生问题的一个示例。这个循环只是对列表中的元素重新排序。我省略了打开和关闭读写文件的行（我这样做很笨拙）。它的所有逗号分隔的文本数据。

```
lineString=fileItemR.readline()

for lineString in fileItemR:
    lineList = lineString.split(",")
    newList = (lineList[1],lineList[0],lineList[2:99])
    lineItem = str(newList)
    formatString = lineItem.replace("('","").replace("', '",",").replace("', ",",").replace("['","").replace("\\n","\n").replace("'])","")

    fileItemW.write(formatString) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:02:34.920

你的问题是你读了文件的第一行并且不做任何事情

```
lineString=fileItemR.readline() 
```

删除这个，你应该没问题

您还可以更简单地实现这一点：

```
for lineString in fileItemR:
    lineList = lineString.split(",")
    lineList[0], lineList[1] = lineList[1], lineList[0]
    fileItemW.write(",".join(lineList[:99]))  #Don't use [:99] if there's only 100 items in the line, and this could change in the future. If you're discarding items past the 100th then this is fine. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T13:03:05.793

它是第一个`readline()`（你在循环之前调用的那个）吃掉你的第一行。

# php - 不计算空格的子字符串

> ID：13840389
> 
> 赞同：1
> 
> 时间：2012-12-12T13:01:00.173
> 
> 标签：php

我想制作一个子字符串，其中`$count`只计算字母，而不是空格。这是我到目前为止所拥有的：

```
$string ="vikas tyagi php";
$string = substr($string, 0, 10);
echo $string; 
```

输出：

```
vikas tyag 
```

期望的输出（我不想计算空格）：

```
vikas tyagi 
```

我该怎么做？

我想提取具有这些条件的字符串

1）基于计数字母

2）没有空白

3）字符串限制也

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:13:20.607

只需计算空格并将它们添加到所需的捕获长度：

```
function spaceless_substr($string, $start, $count) {
    return substr($string, $start, ($count+substr_count($string, ' ', $start, $count)));
}

$string ="vikas tyagi asd sd as asd";
echo substr($string, 0, 14);
// return: "vikas tyagi a"
echo spaceless_substr($string, 0, 14);
// return: "vikas tyagi asd" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:05:46.587

如果我理解正确，您可以这样做：

```
<?php
    $string = "vikas tyagi";
    $lettercount = strlen(str_replace(' ', '', $string));
    echo $string . ' contains ' . $lettercount . ' letters';
?> 
```

在这里，我使用了删除空格[`strlen()`](http://php.net/strlen)的版本`$string`[`str_replace()`](http://php.net/str_replace)

**添加**

我没看懂这个问题

**添加**

这是我的第一次破解，请随时修改您认为合适的地方：

```
$string = "vikas tyagi";

function my_substr($string, $start, $length)
{
    $substr = substr($string, $start, $length);
    $spaces = count(explode(' ', $substr)) - 1;
    if ($spaces > 0)
    {
        return substr($string, $start, $length + $spaces);
    }
    return $substr;
}

echo my_substr($string, 0, 10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:02:26.500

```
$arr = explode(" ",$str);
$length = 10;
for ($i = 0, $currIndex = 0, $finalstring = ""; $currIndex < $length; $i++){
    $finalstring .= " ".substr($arr[$i], 0, $length - $currIndex);
    $currIndex += strlen($arr[$i]);
} 
```

这是一个演示：[http ://codepad.org/lv4KEsAi](http://codepad.org/lv4KEsAi)

# joomla - Joomla 2.5 组件范围内的全局变量

> ID：13840392
> 
> 赞同：1
> 
> 时间：2012-12-12T13:01:07.527
> 
> 标签：joomla, joomla2.5

我正在开发自定义 Joomla 2.5 后端组件。我想知道在我的组件范围内使变量全局化的最佳实践。我应该将声明放在组件主控制器中吗？

```
class MyController extends JController
{       

        /**
         * 
         * @var object External database object 
         */
        public $dbExternal;

        function __construct($config = array()) 
        {

            $this->dbExternal = $this->_getDbInstance();            
            JTable::setDbo($this->dbExternal);

            parent::__construct($config);

        }   

        /**
     * Display task
     *
     * @return void
     */
    function display($cachable = false, $urlparams = false) 
    {
        // set default view if not set
        JRequest::setVar('view', JRequest::getCmd('view', 'My'));

        // call parent behavior
        parent::display($cachable);

        // Set the submenu
        MyHelper::addSubmenu('messages');
    }

        /**
        * Getting instance of the database 
        * 
        * @return instance $dbExternal Return db instance on success
        */
        private function _getDbInstance()
        {
            $params = $this->_getDbParams();

            $dbExternal  = JDatabase::getInstance($params);

            if ($dbExternal->getErrorNum() > 0) 
            {                
               JError::raiseWarning(500, 'JDatabase::getInstance: '.
               $dbExternal->getErrorMsg());
               $this->isError = true;
            }

            return $dbExternal;
        } 

        /**
         * Getting external db parameters
         * 
         * @return array $dbParamsArr Return db params on success
         */
        private function _getDbParams()
        {
            $dbParamsArr              = array();

            $params = JComponentHelper::getParams('com_my');

            $dbParamsArr['host']      = $params->get('db_host');  
            $dbParamsArr['user']      = $params->get('db_user');  
            $dbParamsArr['password']  = $params->get('db_password');  
            $dbParamsArr['database']  = $params->get('db_database');   
            $dbParamsArr['driver']    = $params->get('db_driver');

            return $dbParamsArr;
        }
} 
```

所以我想在任何其他组件控制器或模型中达到 $dbExternal 。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:51:17.013

要从另一个组件访问`$dbExternal`变量，您需要先实例化一个`MyController`对象。在您拥有 的实例之前，该`$dbExternal`变量在任何地方都不存在`MyController`。

```
$myController = new MyController();
$dbExternal = $myController->$dbExternal; 
```

# c# - 在 VB.NET 网站中使用 C# 类

> ID：13840397
> 
> 赞同：0
> 
> 时间：2012-12-12T13:01:19.730
> 
> 标签：c#, .net, vb.net

我有一个带有`CorePoll`命名空间的 C# 类，我将其编译为 .DLL 文件并将其放在网站的**bin**文件夹中。但我不能使用它。`Imports CorePoll`返回**无法加载文件或程序集“CorePoll”或其依赖项之一。试图加载格式不正确的程序。** 这是我在 C# 中的类文件[http://pastebin.com/JkdrnXyT](http://pastebin.com/JkdrnXyT)
![在此处输入图像描述](../Images/f50c438cbad26ab78f5928ac5d60fa22.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:20:31.573

消息**试图加载格式不正确的程序。**，通常来自混合 64/32 位环境。构建 .DLL 时，请确保在构建设置中选择**任何 CPU**作为目标 CPU。这样，无论网站是运行 32 位还是 64 位，DLL 都应该可以工作。但请注意，该消息还指出**无法加载文件或程序集“CorePoll”或其依赖项之一。**，这意味着如果您在 DLL 中引用了其他库，它们也可能无法加载。

**编辑：**查看[文档](http://msdn.microsoft.com/en-us/library/system.badimageformatexception.aspx)后，此异常的另一个潜在原因是混合使用不同版本的 .Net Framework 构建的项目。这可能导致您的错误吗？

> 组件是使用不同版本的 .NET Framework 创建的。通常，当使用 .NET Framework 1.0 或 .NET Framework 1.1 开发的应用程序或组件尝试加载使用 .NET Framework 2.0 SP1 或更高版本开发的程序集时，或者当开发的应用程序时，会发生此异常使用 .NET Framework 2.0 SP1 或 .NET Framework 3.5 会尝试加载使用 .NET Framework 4 开发的程序集。BadImageFormatException 可能会报告为编译时错误，或者可能会在运行时引发异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:21:52.267

没有一个答案对我有帮助，我将 C# 代码转换为 VB.NET 并毫无问题地使用它，感谢您的宝贵时间。

# angularjs - 指令 ng-show 替代品

> ID：13840399
> 
> 赞同：1
> 
> 时间：2012-12-12T13:01:21.157
> 
> 标签：angularjs

我有一个应该显示面包屑导航的控件。它需要数据（路线和标题）才能正确显示导航。数据取自范围并在指令中使用。

导致我出现问题的原因是我在控件中使用了应该翻译标题的本地化指令。即使表达式 in`ng-show`被评估为 false，也会调用此本地化指令。然后本地化指令中的翻译以异常结束，因为它试图翻译不正确的字符串（参见[http://jsfiddle.net/F97wn/7/](http://jsfiddle.net/F97wn/7/)中的“localize”指令）。

这似乎很奇怪。我希望如果某些东西设置了内部内容是可见还是隐藏，那么首先评估它，然后评估内部内容..

好的，然后我发现`ng-show`它只设置了一些css属性，所以它对我来说毫无用处。

问题是：我应该如何解决这个问题 - 用什么代替`ng-show`？

一个例子是[http://jsfiddle.net/F97wn/7/](http://jsfiddle.net/F97wn/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:27:30.320

您可以使用[ngSwitch](http://docs.angularjs.org/api/ng.directive%3angSwitch)将 on 部分设置为“toshow()”，并将内部 ng-switch-when="true" 部分设置为该区域内的自定义指令。如果 toshow 的值不为真，这将不会执行自定义指令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T19:11:53.643

如果指令抛出异常，则可能应该通过以下方式之一将更多信息传递给指令，以便指令可以决定它是否具有执行其需要执行的操作所需的信息：

1.  属性数据——例如，localize="..." show-me="..."
2.  在与 ctrl 关联的范围内定义的东西——例如，$scope.showMe。根据您当前定义指令的方式，指令作用域将可以作为 scope.showMe 访问此属性。
3.  或将服务（具有数据）注入指令 - 例如，directive('localize', function(myShowMeService) { ... }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T20:19:38.260

您可能还想查看`<ng-if>`. ngIf 指令根据表达式中评估的“虚假”和“真实”值有条件地删除并重新创建 DOM 树 (HTML) 的一部分。它可能比`<ng-show>`您的需求更直观。

但是，它目前仅在 AngularJS 的不稳定版本中可用。[如果您可以使用该版本的 AngularJS，您可以在此处](http://docs.angularjs.org/api/ng.directive%3angIf)找到有关它的更多信息。

# html - 编辑 CSS 'underline' 属性的线条粗细

> ID：13840403
> 
> 赞同：135
> 
> 时间：2012-12-12T13:01:31.717
> 
> 标签：html, css

因为您可以像这样在 CSS 中为任何文本添加下划线：

```
h4 {
  text-decoration: underline;
} 
```

然后你怎么能编辑绘制的“线”，你在线上得到的颜色很容易指定，`color: red`但是如何编辑线的高度，即厚度？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-12-12T13:09:52.373

这是实现此目的的一种方法：

HTML：

```
<h4>This is a heading</h4>

<h4><u>This is another heading</u></h4> 
```

​CSS：

```
u {
  text-decoration: none;
  border-bottom: 10px solid black;
}​ 
```

这是一个例子：http: [//jsfiddle.net/AQ9rL/](http://jsfiddle.net/AQ9rL/)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-02-24T18:27:30.983

最近我不得不处理 FF 下划线太粗并且离 FF 中的文本太远的问题，并找到了一个更好的方法来使用一对 box-shadows 来处理它：

```
.custom-underline{
  box-shadow: inset 0 0px 0 white, inset 0 -1px 0 black
} 
```

第一个阴影放在第二个阴影之上，这就是您可以通过改变两者的“px”值来控制第二个阴影的方法。

加：各种颜色、粗细和下划线位置

减号：不能在非纯色背景上使用

在这里我做了几个例子：http: [//jsfiddle.net/xsL6rktx/](http://jsfiddle.net/xsL6rktx/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2019-12-02T08:54:36.837

有`text-decoration-thickness`，目前是[CSS 文本装饰模块 Level 4](https://drafts.csswg.org/css-text-decor-4/#text-decoration-width-property)的一部分。它处于“编辑草稿”阶段 - 所以它是一项**正在进行中**的工作，可能会发生变化。截至 2020 年 1 月，[它仅在 Firefox 和 Safari 中受支持](https://caniuse.com/#feat=mdn-css_properties_text-decoration-thickness)。

> text-decoration-thickness CSS 属性设置元素中文本上使用的装饰线的粗细或宽度，例如穿线、下划线或上划线。

```
a {
  text-decoration-thickness: 2px;
} 
```

Codepen：[https](https://codepen.io/mrotaru/pen/yLyLOgr) ://codepen.io/mrotaru/pen/yLyLOgr （仅限火狐）

* * *

还有`text-decoration-color`，它是[CSS 文本装饰模块 Level 3](https://drafts.csswg.org/css-text-decor-3/#text-decoration-color-property)的一部分。这是更成熟的（候选推荐），大多数主流浏览器都支持（Edge 和 IE 除外）。当然它不能用来改变线条的粗细，但可以用来实现更“柔和”的下划线（也显示在 codepen 中）。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2015-04-07T09:25:36.093

非常简单……在“span”元素外，字体和下划线较小，在“font”元素内，字体较大。

```
<span style="font-size:1em;text-decoration:underline;">
 <span style="font-size:1.5em;">
   Text with big font size and thin underline
 </span>
</span>
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-01-19T20:41:17.000

另一种方法是在要下划线的元素上使用“:after”（伪元素）。

```
h2 {
  position:relative;
  display:inline-block;
  font-weight:700;
  font-family:arial,sans-serif;
  text-transform:uppercase;
  font-size:3em;
}
h2:after {
  content:"";
  position:absolute;
  left:0;
  bottom:0;
  right:0;
  margin:auto;
  background:#000;
  height:1px;
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2015-05-22T07:58:33.427

**我会做一些简单的事情，比如：**

```
.thickness-underline {
  display: inline-block;
  text-decoration: none;
  border-bottom: 1px solid black;
  margin-bottom: -1px;
} 
```

*   您可以使用`line-height`或`padding-bottom`设置它们之间的位置
*   您可以`display: inline`在某些情况下使用

**演示：http:** [//jsfiddle.net/5580pqe8/](http://jsfiddle.net/5580pqe8/)

![CSS下划线](../Images/51db500169903df427b4452e99eea8b3.png)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2018-03-06T08:50:55.367

`background-image`也可用于创建下划线。此方法处理换行符。

它必须通过向下移动`background-position`并水平重复。`background-size`可以使用（背景限于元素的内容框）在一定程度上调整线宽。

```
.underline
{
    --color: green;
    font-size: 40px;
    background-image: linear-gradient(var(--color) 0%, var(--color) 100%);
    background-repeat: repeat-x;
    background-position: 0 1.05em;
    background-size: 2px 5px;
}
```

```
<span class="underline">
     Underlined<br/>
     Text
</span>
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-10-31T11:46:19.037

```
a {
  text-decoration: none;
  position: relative;
}

a.underline {
  text-decoration: underline;
}

a.shadow {
   box-shadow: inset 0 -4px 0 white, inset 0 -4.5px 0 blue;
}
```

```
<h1><a href="#" class="underline">Default: some text alpha gamma<br>the quick brown fox</a></h1>
<p>Working:</p>
<h1><a href="#" class="shadow">Using Shadow: some text alpha gamma<br>the quick brown fox<br>even works with<br>multiple lines</a></h1>
<br>
```

最终解决方案： [http ://codepen.io/vikrant-icd/pen/gwNqoM](http://codepen.io/vikrant-icd/pen/gwNqoM)

```
a.shadow {
   box-shadow: inset 0 -4px 0 white, inset 0 -4.5px 0 blue;
} 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2020-03-25T10:18:03.187

由于新的[css 选项](https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration)的魔力，这现在可以在本地实现：

```
a {
  text-decoration: underline;
  text-decoration-thickness: 5px;
  text-decoration-skip-ink: auto;
  text-underline-offset: 3px;
} 
```

目前还支持比较[差](https://caniuse.com/#search=text-decoration-thickness)。但它最终会登陆 ff 以外的其他浏览器。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-10-17T14:59:32.900

我的解决方案： [https ://codepen.io/SOLESHOE/pen/QqJXYj](https://codepen.io/SOLESHOE/pen/QqJXYj)

```
{
    display: inline-block;
    border-bottom: 1px solid;
    padding-bottom: 0;
    line-height: 70%;
} 
```

您可以使用 line-height 值调整下划线位置，使用border-bottom 调整下划线粗细和样式。

如果要为 href 下划线，请注意禁用默认下划线行为。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-17T15:50:06.880

您可以`linear-gradient`通过将其设置为这样来做到这一点：

```
h1, a {
    display: inline;
    text-decoration: none;
    color: black;
    background-image: linear-gradient(to top, #000 12%, transparent 12%);
}
```

```
<h1>I'm underlined</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim <a href="https://stackoverflow.com">veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in</a> reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
```

而且，是的，你可以像这样改变它......

```
var m = document.getElementById("m");
m.onchange = u;
function u() {
    document.getElementById("a").innerHTML = ":root { --value: " + m.value + "%;";
}
```

```
h1, a {
    display: inline;
    text-decoration: none;
    color: black;
    background-image: linear-gradient(to top, #000 var(--value), transparent var(--value));
}
```

```
<h1>I'm underlined</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim <a href="https://stackoverflow.com">veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in</a> reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
<style id="a"></style>
<input type="range" min="0" max="100" id="m" />
```

# css - 居中第二个具有更高 z-index 的 div

> ID：13840407
> 
> 赞同：1
> 
> 时间：2012-12-12T13:01:53.757
> 
> 标签：css, html, append, center

我正在尝试将 div (boxTest) 集中在一个 100% 宽度和高度固定的 div 中。

下面是代码，这是一个[jsfiddle](http://jsfiddle.net/huddds/vYFxt/)

html

```
 <a href="#" class="clickme">CLICK ME</a> 
```

jQuery

```
 $( function() {
    $(".clickme").click(function() {
    $('body').append('<div class="videoMask" style="position:fixed; top:0; bottom:0; z-index:14000000; left:0; right:0; width:100%; height:100%; background-color:#000000;"></div><div id="boxTest" style=" width:150px; background:#FFFFFF; position:fixed; top:10px; z-index:15000000; height:150px; margin:0; padding:0;"><span class="closeMe">CLOSE</span></div>');
    $('#boxTest').show();   
 });

     $( ".closeMe, .videoMask" ).live('click', function() {
        $( "#boxTest" ).remove(); 
        $( ".videoMask" ).remove();  
     });   
 }); 
```

Ps in line 样式将被更改，我这样做是为了在这里更容易看到。

提前感谢您的任何回复。​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:36:42.313

尝试将此样式应用于#boxTest 以使其水平居中...

```
#boxTest
{
    width:150px;
    position:absolute; /* OR FIXED IF THIS WORKS BETTER FOR YOU */
    margin-left:-75px;
    left:50%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:25:38.263

很难将一个 DIV 固定在另一个具有百分比宽度的 DIV 中。我按如下方式编辑了 CSS，它似乎正确居中对齐。

[http://jsfiddle.net/vYFxt/21/](http://jsfiddle.net/vYFxt/21/)

**CSS**

```
.videoMask
{
    vertical-align:middle;
    z-index:14000000;
    width:500px;
    height:400px;
    background-color:#000;
    display:table-cell;
}

#boxTest
{
    width:150px;
    background:#FFF;
    z-index:15000000;
    height:150px;
    margin:auto;
} 
```

**JS**

```
$(function() {
    $(".clickme").click(function() {
        $('body').append('<div class="videoMask"><div id="boxTest" ><span class="closeMe">CLOSE</span></div></div>');
        $('#boxTest').show();
    });

    $(".closeMe, .videoMask").live('click', function() {
        $("#boxTest").remove();
        $(".videoMask").remove();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:59:53.920

[这样](http://jsfiddle.net/vYFxt/23/)的事情可能对你更有帮助。jQuery 中有很多代码，真的太多了

```
$(function() {
  $(".clickme, .closeme").click(function() {
    $('.clickme').toggle();  
    $('.videoMask').toggle();  
  });
}); 
```

​</p>

# javascript - 如何通过jquery或javascript生成panelgrid的点击事件？

> ID：13840410
> 
> 赞同：2
> 
> 时间：2012-12-12T13:02:05.913
> 
> 标签：javascript, jquery, jsf, primefaces

我正在使用 JSF 2.0 和 primefaces 3.0。我有一个 rowtoggler 和 rowexpansion。由于我使用的是 primefaces 旧版本，所以我没有 rowToggle 事件。而且我需要在行扩展时通过ajax在服务器端调用一个方法。所以我在 rowtoggler 周围放置了 div 标签并调用了一个 javascript 函数。现在我想通过在 rowexpansion 内的 panelgrid 的 click 事件启动 ajax 调用。如果发生这种情况，那么它看起来像 3.4 rowToggle 事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:47:01.897

单击行切换器时，您可以使用 jQuery 的事件绑定来执行 Javascript。

```
<h:form id="form">
    <p:dataTable id="dt" value="[1,2]">
        <p:column>
            <p:rowToggler />
        </p:column>
    </p:dataTable>
    <p:remoteCommand name="remotecommand"
        oncomplete="alert('remote command fired')" />
</h:form>
<script type="text/javascript">
$("[id='form:dt'] .ui-row-toggler").on("click", function() { remotecommand(); });
</script> 
```

Javascript的解释：

通过`$("[id='form:dt'] .ui-row-toggler")`id( `form:dt`) 选择数据表，然后选择所有具有样式类的后代`ui-row-toggler`。

将`.on("click", function() { remotecommand(); })`匿名函数绑定到 click 事件，该事件触发由`p:remoteCommand`.

您可以使用 或来`p:remoteCommand`执行 bean 方法。;-)`action``actionListener`

请注意，我认为这不是一个长期的解决方案。升级到 PrimeFaces 3.4 将是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T20:33:20.813

我已将 commandLink 放在 rowtoggler 周围，并通过 commandlink 进行 ajax 调用，我还可以使用 EL2.2 通过它传递值

```
<p:commandLink action="#{myBean.doSomething(foo)}" >
    <p:rowToggler/>
</p:commandLink> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:55:29.793

我猜你会喜欢

```
<p:panelGrid>
    <p:ajax event="click" listener="#{bean.onclick}" />
    ...
    the rest of the grid here
    ...
<p:panelGrid> 
```

我还没有测试它，但它适用于其他组件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:44:20.057

除了 siebz0r 的解决方案，我还找到了另一种解决方案。

```
<p:commandLink action="#{bean.abcFunction}"> <p:rowToggler/> </p:commandLink> 
```

它也有效且简单:-)

# .net - NHibernate QueryOver 可扩展性

> ID：13840413
> 
> 赞同：1
> 
> 时间：2012-12-12T13:02:15.483
> 
> 标签：.net, nhibernate, lambda, queryover

是否可以通过某种方式扩展 QueryOver API？我要补充的是fol

```
var criteria = QueryOver.Of<InternalAssessor>()
    .WhereRestrictionOn(x => x.Sector).HasAtLeastOneFlagSet((int)sector) 
```

扇区是位标志枚举。我们对 ICriteria API 有这样的标准，我可以做到

```
.Where(BitwiseRestrictions.AtLeastOneFlagSet("Sector", (int)sector)) 
```

但是想要有强类型的方式来做到这一点。有没有扩展 QueryOver 的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:30:20.633

有一种非常简单的方法，如何获取`IQueryOver`、搜索其*基础条件*并附加一个，请参阅[https://gist.github.com/2304623](https://gist.github.com/2304623)

```
public static IQueryOver<TRoot, TSubType> WhereBitwiseRestriction<TRoot, TSubType>(
  this IQueryOver<TRoot, TSubType> query
  , Expression<Func<TSubType, object>> expression
  , int number)
{
  var name = ExpressionProcessor.FindMemberExpression(expression.Body);
  query.UnderlyingCriteria.Add
  (
    BitwiseRestrictions.AtLeastOneFlagSet(name, number)
  );
  return query; 
} 
```

并使用它

```
var criteria = QueryOver.Of<InternalAssessor>()
    ...
    .WhereRestrictionOn(x => x.Name).IsLike(searchedName) // standard
    ...
    .WhereBitwiseRestriction(x => x.Sector, (int)sector) // custom
    ... 
```

*为了完全满足您的要求，我们需要引入一些中间人对象，该对象将引用`query`和我们的`BitwiseRestrictions`. 另一个扩展将立即接受它，追加`number`并返回查询。类似的是`QueryOverRestrictionBuilder`在 NHibernate 中做...但上述工作不够简单吗？*

# git - 在嵌入式系统上构建 git

> ID：13840415
> 
> 赞同：2
> 
> 时间：2012-12-12T05:57:03.187
> 
> 标签：git

我想在我们的嵌入式系统上构建 git，我从[这里](http://code.google.com/p/git-core/downloads/list "这里")得到了 git 的源代码。

`./configure`我使用以下参数运行工具：

```
./configure --build=arm-eabi --host=`uname -p`-`uname -s`-`uname -o` 
```

配置工具运行，并返回错误说：

```
checking whether system succeeds to read fopen'ed directory...configure: error: in`/home/git-1.8.0.2`. 
```

我已经为我们的工具链设置了必要的环境变量，比如`CC`和，所以对编译器没有任何抱怨。但我不知道那个错误信息。看起来像是一些权限问题，但我肯定有完全的权限。任何想法 ？`CXX``./configure``/home/git-1.8.0.2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T10:07:51.553

如果您查看`configure`脚本，您会发现它尝试执行需要执行测试程序的检查。但是因为您正在交叉编译，`configure`所以知道这样无法获得可靠的结果，因此它甚至没有尝试而是退出。

`configure`可以处理以前运行的缓存值，并在环境变量的帮助下完成。您可以使用相同的机制来告诉`configure`它无法执行的测试假设什么​​（对于当前失败的测试，那将是`ac_cv_fread_reads_directories=no`）。

* * *

作为旁注，你有错误的方式`--build`和`--host`参数。`--build`应该指示正在执行构建的机器，而`--host`应该指示最终软件将在其上运行的机器。

提供的名称`--host`也假定为交叉编译工具链的前缀，因此无需显式设置`CC`和`CXX`

# python - 强制在 Blender 中重新计算 matrix_world

> ID：13840418
> 
> 赞同：6
> 
> 时间：2012-12-12T13:02:32.467
> 
> 标签：python, matrix, blender

我正在为搅拌机设计一个附加组件，它可以改变对象某些顶点的位置。Blender 中的每个对象都有一个 matrix_world 属性，该属性包含一个矩阵，该矩阵将顶点坐标从对象转置到世界框架。

```
print(object.matrix_world) # unit matrix (as expected)
object.location += mathutils.Vector((5,0,0))
object.rotation_quaternion *= mathutils.Quaternion((0.0, 1.0, 0.0), math.radians(45))
print(object.matrix_world) # Also unit matrix!?! 
```

上面的代码片段显示，在翻译之后，你仍然拥有相同的 matrix_world。如何强制搅拌机重新计算 matrix_world？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T06:57:28.373

您应该在更改这些值后调用，否则 Blender在需要 [其他地方] 之前[`Scene.update`](http://www.blender.org/documentation/blender_python_api_2_59_0/bpy.types.Scene.html#bpy.types.Scene.update)不会重新计算。`matrix_world`根据 API 文档中的[“Gotcha's”部分](http://www.blender.org/documentation/blender_python_api_2_59_0/info_gotcha.html)，原因是重新计算是一项昂贵的操作，因此不会立即完成：

> 有时您想从 python 修改值并立即访问更新的值，例如：
> 
> 更改对象[bpy.types.Object.location后，您可能希望立即从](http://www.blender.org/documentation/blender_python_api_2_59_0/bpy.types.Object.html#bpy.types.Object.location)[bpy.types.Object.matrix_world](http://www.blender.org/documentation/blender_python_api_2_59_0/bpy.types.Object.html#bpy.types.Object.matrix_world)访问其转换，但这并不像您预期​​的那样工作。
> 
> 考虑可能用于计算对象最终转换的计算，这包括：
> 
> *   动画功能曲线。
> *   司机和他们的蟒蛇表达式。
> *   约束
> *   父对象及其所有的 f 曲线、约束等。
> 
> 为了避免每次修改属性时进行昂贵的重新计算，Blender 将实际计算推迟到需要时进行。
> 
> 但是，当脚本运行时，您可能希望访问更新的值。
> 
> 这可以通过在修改值后调用[bpy.types.Scene.update](http://www.blender.org/documentation/blender_python_api_2_59_0/bpy.types.Scene.html#bpy.types.Scene.update)来完成，该值会重新计算所有标记为要更新的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-13T21:40:08.863

**在循环中调用时调用`bpy.context.scene.update()`会变得昂贵**。

如果您的对象没有复杂的约束（例如普通约束或父对象），则可以在更改对象的 、 或 后使用以下方法重新计算`.location`世界`.rotation_euler\quaternion`矩阵`.scale`。

```
def update_matrices(obj):
    if obj.parent is None:
        obj.matrix_world = obj.matrix_basis

    else:
        obj.matrix_world = obj.parent.matrix_world * \
                           obj.matrix_parent_inverse * \
                           obj.matrix_basis 
```

一些注意事项：

*   设置对象位置/旋转/缩放后立即`matrix_basis`更新对象
*   但是`matrix_local`（当父母）并且`matrix_world`仅在期间更新`scene.update()`
*   何时`matrix_world`手动重新计算（使用上面的代码），`matrix_local`也重新计算
*   如果对象是父对象，则其世界矩阵取决于父对象的世界矩阵以及父对象在创建父对象关系时的逆矩阵。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-30T14:00:25.733

我也需要这样做，但需要在导入包含数万个对象的大型场景时更新此值。调用 'scene.update()' 变得指数级地变慢，所以我需要找到一种方法来做到这一点，而无需调用该函数。这就是我想出的：

```
def BuildScaleMatrix(s):
    return Matrix.Scale(s[0],4,(1,0,0)) * Matrix.Scale(s[1],4,(0,1,0)) * Matrix.Scale(s[2],4,(0,0,1))

def BuildRotationMatrixXYZ(r):
    return  Matrix.Rotation(r[2],4,'Z') * Matrix.Rotation(r[1],4,'Y') * Matrix.Rotation(r[0],4,'X')

def BuildMatrix(t,r,s):
    return   Matrix.Translation(t) * BuildRotationMatrixXYZ(r) * BuildScaleMatrix(s)

def UpdateObjectTransform(ob):
    ob.matrix_world = BuildMatrix(ob.location, ob.rotation_euler, ob.scale) 
```

这不是构建矩阵的最有效方法（如果您知道搅拌机中的更好方法，请添加），并且仅适用于 XYZ 顺序转换，但这避免了在处理大型数据集时出现指数级减速。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T09:28:38.073

访问 Object.matrix_world 会导致它“冻结”，即使你没有对它做任何事情，例如：

```
m = C.active_object.matrix_world 
```

导致矩阵卡住。每当您想访问矩阵时，请使用

```
Object.matrix_world.copy() 
```

仅当您想编写矩阵时，才使用

```
C.active_object.matrix_world = m 
```

# jsf-2 - 如何初始化和访问 JSF2 会话 bean？

> ID：13840422
> 
> 赞同：0
> 
> 时间：2012-12-12T13:02:42.643
> 
> 标签：jsf-2, managed-bean

假设我有 2 个托管 bean：带有会话范围的查询和登录。

我可以看到调用了 setQuery，但参数为 null，因此我的方法 check() 失败。由于查询不是一个简单的值而是一个对象，如何初始化 Bean“查询”？

这是我的 Bean“登录”（不使用注释）：

```
public class login {
  private Query query;

  public void setQuery(Query q) {
    query = q;
  }

  public Query getQuery() {
    return query;
  }

  public String check() {
    ... do s.th. with query
  } 
```

和faces-config.xml：

```
...
<managed-bean>
  <managed-bean-name>query</managed-bean-name>
  <managed-bean-class>Query</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
</managed-bean>
<managed-bean>
  <managed-bean-name>login</managed-bean-name>
  <managed-bean-class>login</managed-bean-class>
  <managed-bean-scope>session</managed-bean-scope>
  <managed-property>
    <property-name>query</property-name>
    <property-class>Query</property-class>
    <value>#{query}</value> 
  </managed-property> 
</managed-bean>
... 
```

# ruby-on-rails - 元编程有副作用时如何重构？

> ID：13840423
> 
> 赞同：0
> 
> 时间：2012-12-12T13:02:43.517
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring, metaprogramming

我正在使用 Ruby on Rails 3.2.9 和 Ruby 1.9.3-p125。在我[上一个问题](https://stackoverflow.com/questions/13827547/trouble-on-loading-classes-when-side-effect-metaprogramming-is-implemented)之后，我最终发现我在元编程一个自我实现的`acts_as_customizable`插件方面遇到了问题，因为相关代码对其他类有*副作用*，而不是“充当可定制”。

总结一下这个问题：“内部”（通过元编程）`acts_as_customizable`为模型声明的方法向模型添加了一个方法，并且为了节省时间，Rails 不会在启动时加载所有这些类，从而使应用程序引发a*直到*类已加载。`Article``customize``Comment``NoMethodError - undefined method 'customize' for #<Comment:0x0...>` *`Article`*

 *一个提议的解决方案是`require_dependency 'article'`在`Comment`模型中，但我正在寻找另一种方法（也许，比提议的更好）让应用程序像现在一样工作，但没有任何问题，就像在这个问题中解释的那样. 也就是说，我想保留*短代码**和*相同的行为*，但使用更“合适”的方式来制作东西，可能会更改类的加载过程或计划对整个代码进行大重构，如果需要的话。

我应该如何处理这种情况？你有什么想法？

* * *

**更新**：经过一番研究，我发现问题仅出现在开发模式下，因为`config.cache_classes`设置为`false`在每次请求时重新加载类。

* * *

*注意*：我想指出元编程在我的案例中非常有用，`Article`并且在*我*的“定制”概念`Comment`方面，类之间高度相关。所以我想*找到一个解决方案来缓解下属行为的变化*。

 *** * *

* 就我而言，元编程（即使它有副作用）让我避免了很多代码语句。***

# php - PHP - 非 WSDL 本地 xsd 架构

> ID：13840426
> 
> 赞同：1
> 
> 时间：2012-12-12T13:02:47.550
> 
> 标签：php, soap, xsd, soap-client

如何在非 WSDL PHP 中包含本地 XSD 模式`SoapClient`？

当我尝试调用方法时服务器会出现此错误`Could not find schema information for the element 'http://localserver/schema.php?:schemaname'`

服务器是使用 ASP 的 Windows 服务器。

# c# - 如何警告类型转换导致的潜在算术错误？

> ID：13840428
> 
> 赞同：9
> 
> 时间：2012-12-12T13:02:54.343
> 
> 标签：c#, math, compiler-warnings, implicit-conversion, arithmetic-expressions

我正在使用 C# 开发一个计算模块，我遇到了这个问题：

```
double v = 4 / 100; 
```

我知道这是一个错误的初始化，它返回`v = 0.0`而不是`v = 0.04`

c# 规则说我必须**确保至少有一个成员是 double**，如下所示：

```
double v = (double) 4 / 100;
double v = 4.0 / 100; 
```

但是，我有很多这种涉及整数变量操作的初始化，我懒得逐行浏览我的代码来检测这些错误。

相反，**编译器是否有可能对此发出警告？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T17:03:29.423

好吧，在玩了一些之后，我有一个解决方案。我使用[这篇文章](http://stylecopplus.codeplex.com/wikipage?title=How%20to%20Create%20StyleCop%20Custom%20Rule)来解决这个问题。我使用[StyleCop](http://stylecop.codeplex.com/)，所以你需要获取并安装它。然后，您可以下载我的 C# 项目[数学分析器](https://www.dropbox.com/s/0mtj1t5t6qe6av2/MathematicsAnalyzer.zip)。

首先，我没有考虑所有类型转换不匹配。事实上，我只容纳一部分。

基本上，我检查该行是否包含“双”，后跟一个空格。我知道这可能会导致错误的警告，因为类的结尾可能是 double 或任何其他的东西，但我将把它留给你来弄清楚如何正确隔离类型。

如果找到匹配项，我会检查它是否匹配此正则表达式：

```
double[ ][A-Za-z0-9]*[ ]?=(([ ]?[0-9]*d[ ]?/[ ]?[0-9]*;)|[ ]?[0-9]*[ ]?/[ ]?[0-9]*d;) 
```

如果它不匹配这个正则表达式，那么我添加一个违规。此正则表达式将匹配以下任何内容：

*   双 i=4d / 100；
*   双 i = 4d / 100;
*   双 i = 4 / 100d;
*   双倍 i = 4/ 100d；
*   双 i = 4 /100d;
*   双 i = 4/100d；
*   双 i=4d / 100；
*   双 i=4 / 100d；
*   双 i=4/100d；

以上任何一项都不会构成违规。正如目前所写的那样，几乎如果不使用“d”，它将引发违规。您需要添加额外的逻辑来说明显式转换操作数的其他可能方式。在我写这篇文章时，我刚刚意识到在两个操作数上都有一个 'd' 很可能会引发异常。哎呀。

最后，我无法让 StyleCop 正确显示我的违规行为。它一直给我一个关于规则不存在的错误，即使有第二双眼睛盯着它，我们也找不到解决方案，所以我破解了它。该错误显示了您尝试查找的规则的名称，所以我只是将规则的名称作为描述性的名称，并在其中包含行号。

要安装自定义规则，请构建 MathematicalAnalyzer 项目。关闭 Visual Studio 并将 DLL 复制到 StyleCop 安装目录中。当您打开 Visual Studio 时，您应该会在 StyleCop 设置中看到该规则。我使用的文章的第 5 步和第 6 步显示了在哪里执行此操作。

这在整个解决方案中一次只会出现一次违规，因此您必须修复它显示的违规，然后再次运行 StyleCop 以查找下一个违规。可能有办法解决这个问题，但我的果汁用完了，就停在这里。

享受！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T21:31:13.387

本文介绍如何设置自定义代码分析规则，当您运行代码分析时，这些规则可以显示警告和不显示的内容。

[http://blog.tatham.oddie.com.au/2010/01/06/custom-code-analysis-rules-in-vs2010-and-how-to-make-them-run-in-fxcop-and- vs2008-太/](http://blog.tatham.oddie.com.au/2010/01/06/custom-code-analysis-rules-in-vs2010-and-how-to-make-them-run-in-fxcop-and-vs2008-too/)

# javascript - 客户端和服务器端编程有什么区别？

> ID：13840429
> 
> 赞同：544
> 
> 时间：2012-12-12T13:03:00.063
> 
> 标签：javascript, php, client-side, server-side

我有这个代码：

```
<script type="text/javascript">
    var foo = 'bar';
    <?php
        file_put_contents('foo.txt', ' + foo + ');
    ?>

    var baz = <?php echo 42; ?>;
    alert(baz);
</script> 
```

为什么这不会将“bar”写入我的文本文件，而是警告“42”？

* * *

注意：这个问题的早期版本明确是关于服务器上的 PHP 和客户端上的 JavaScript。当一种语言在客户端运行而另一种在服务器上运行时（即使它们是相同的语言），问题和解决方案的基本性质对于*任何一对语言都是相同的。*当您看到有关特定语言的答案时，请考虑到这一点。

* * *

## 回答 #1

> 赞同：508
> 
> 时间：2012-12-12T13:03:00.063

您的代码分为两个完全独立的部分，*服务器端*和*客户端*。

```
 |
               ---------->
              HTTP request
                    |
+--------------+    |    +--------------+
|              |    |    |              |
|    browser   |    |    |  web  server |
| (JavaScript) |    |    |  (PHP etc.)  |
|              |    |    |              |
+--------------+    |    +--------------+
                    |
  client side       |      server side
                    |
               <----------
          HTML, CSS, JavaScript
                    | 
```

双方通过 HTTP 请求和响应进行通信。PHP 在服务器上执行并输出一些 HTML 和可能的 JavaScript 代码，这些代码作为响应发送到解释 HTML 并执行 JavaScript 的客户端。一旦 PHP 完成了响应的输出，脚本结束并且服务器上不会发生任何事情，直到新的 HTTP 请求进来。

示例代码执行如下：

```
<script type="text/javascript">
    var foo = 'bar';
    <?php
        file_put_contents('foo.txt', ' + foo + ');
    ?>

    var baz = <?php echo 42; ?>;
    alert(baz);
</script> 
```

第 1 步，PHP 执行标签之间的所有代码`<?php ?>`。结果是这样的：

```
<script type="text/javascript">
    var foo = 'bar';

    var baz = 42;
    alert(baz);
</script> 
```

该`file_put_contents`调用没有产生任何结果，它只是将“+ foo +”写入文件。该`<?php echo 42; ?>`调用产生了输出“42”，它现在位于该代码曾经所在的位置。

生成的 HTML/JavaScript 代码现在被发送到客户端，在那里进行评估。`alert`调用有效，而变量`foo`不在任何地方使用。

**在客户端开始执行任何 JavaScript 之前，所有 PHP 代码都在服务器上执行。JavaScript 可以与之交互的响应中没有留下任何 PHP 代码。**

要调用一些 PHP 代码，客户端必须向服务器发送一个新的 HTTP 请求。这可以使用三种可能的方法之一发生：

1.  一个链接，它使浏览器加载一个新页面。
2.  表单提交，将数据提交到服务器并加载新页面。
3.  [AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求，这是一种Javascript 技术，用于向服务器发出常规 HTTP 请求（如 1\. 和 2\. will），但不离开当前页面。

[这是一个更详细地概述这些方法的问题](https://stackoverflow.com/questions/23740548/how-to-pass-variables-and-data-from-php-to-javascript/23741119)

您还可以使用 JavaScript 使浏览器使用`window.location`或提交表单打开新页面，模拟可能性 1\. 和 2。

* * *

## 回答 #2

> 赞同：177
> 
> 时间：2013-07-01T11:52:42.377

要确定为什么*PHP*代码不能在*JavaScript*代码中工作，我们需要了解**客户端**和**服务器端**语言是什么，以及它们是如何工作的。

*服务器端语言（PHP 等）*：它们从数据库中检索记录，通过[无状态*HTTP*连接](https://stackoverflow.com/questions/4913763/what-does-it-mean-when-they-say-http-is-stateless)维护状态，并做很多需要安全的事情。它们驻留在服务器上，这些程序永远不会将其源代码暴露给用户。

> ![图片来自 wikipedia_http://en.wikipedia.org/wiki/File:Scheme_dynamic_page_en.svg](../Images/5db32d6db7ff17e547c3ed3c5818ed5a.png) [[图像属性](http://en.wikipedia.org/wiki/File:Scheme_dynamic_page_en.svg)]

所以你可以很容易地看到服务器端语言处理 HTTP 请求并处理它们，正如@deceze 所说，*PHP 在服务器上执行并输出一些 HTML，也许还有 JavaScript 代码，作为响应发送给客户端，其中解释 HTML 并执行 JavaScript。*

另一方面，*客户端语言（如 JavaScript）*驻留在浏览器中并在浏览器中运行。*客户端脚本*通常是指网络上的一类计算机程序，由用户的网络浏览器在客户端执行，而不是在*服务器端执行*。

JavaScript 对用户是可见的并且可以很容易地修改，因此对于安全性我们不能依赖 JavaScript。

所以当你在服务器上发出一个*HTTP*请求时，服务器首先会仔细读取PHP文件，看是否有需要执行的任务，然后向客户端发送响应。同样，正如@deceze 所说，*一旦 PHP 完成输出响应，脚本就会结束，服务器上不会发生任何事情，直到新的*HTTP*请求进来。*

> ![图示](../Images/5a7957682d790e9e91b1e1ff34c4322e.png)
> 
> [[图片来源](http://www.html.net/tutorials/php/lesson1.php)]

那么现在如果我需要调用 PHP 该怎么办呢？这取决于您需要如何做：通过重新加载页面或使用 AJAX 调用。

1.  您可以通过重新加载页面并发送*HTTP*请求来实现
2.  您可以使用 JavaScript 进行 AJAX 调用 - 这不需要重新加载页面

**好读：**

1.  [维基百科：服务器端脚本](http://en.wikipedia.org/wiki/Server-side_scripting)
2.  [维基百科：客户端脚本](http://en.wikipedia.org/wiki/Client-side_scripting)
3.  [宇智波斑：客户端和服务器端编程的区别](https://softwareengineering.stackexchange.com/a/171210/51446)

* * *

## 回答 #3

> 赞同：36
> 
> 时间：2012-12-12T13:46:38.433

您的 Javascript 将在客户端而不是服务器上执行。这意味着它`foo`不在服务器端评估，因此它的值不能写入服务器上的文件。

考虑这个过程的最好方法是动态生成一个文本文件。您生成的文本只有在浏览器解释后才成为可执行代码。只有您放置在`<?php`标签之间的内容才会在服务器上进行评估。

顺便说一句，养成在 HTML 或 Javascript 中嵌入随机 PHP 逻辑片段的习惯可能会导致代码非常复杂。我是从痛苦的经历中说出来的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-13T09:26:43.153

在 Web 应用程序中，每个任务都以请求和响应的方式执行。

客户端编程使用带有 Java 脚本及其框架的 html 代码，库在 Internet Explorer、Mozilla、chrome 浏览器中执行。在 java 场景中服务器端编程 servlet 在 Tomcat、web-logic、j boss、WebSphere 服务器中执行

# asp.net - 使用 ASP.net 组件实现 Ajax 组件

> ID：13840433
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:04.540
> 
> 标签：asp.net, html, ajax

它包含ajax上传器和文本框并标记上传完成时我需要做的事情我在文本框中写的内容无需刷新页面即可转到标签

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
<form id="form1" runat="server">
<div>
    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:AjaxFileUpload ID="AjaxFileUpload1" runat="server" 
        onuploadcomplete="AjaxFileUpload1_UploadComplete" />
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div>
</form>
</body>
</html> 
```

这是我的 C# 代码

```
protected void AjaxFileUpload1_UploadComplete(object sender,AjaxControlToolkit.AjaxFileUploadEventArgs e)
{
    string path = Server.MapPath("~/nn/") + e.FileName;
    AjaxFileUpload1.SaveAs(path);
    Label1.Text = TextBox1.Text;
} 
```

问题是 ajax 控制器事件感觉不到 .net 组件有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:06:51.367

我相信您需要将代码包装在更新面板控件中。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:AjaxFileUpload ID="AjaxFileUpload1" runat="server" 
                    onuploadcomplete="AjaxFileUpload1_UploadComplete" />
                <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</form>
</body>
</html> 
```

# c# - 从实体列表中选择主键，通用（使用 ObjectContext）

> ID：13840438
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:10.907
> 
> 标签：c#, entity-framework, generics

在关于stackoverflow的另一个问题中，我发现可以找到类型为 T 的实体的主键 VALUE

```
x=> x.EntityKey.EntityKeyValues[0].Value 
```

我有一个 IQueryable < T > q

*其中 TModel : EntityObject,new()*

我想获取所有主键的列表。

```
 List<int> primarykeyvalues =  q.Select(x => (int)x.EntityKey.EntityKeyValues[0].Value).ToList() 
```

**LINQ to Entities 不支持 ArrayIndex**

这本质上应该与

```
List<int> primarykeyvalues = DB.Products.Select(x=>x.Id).ToList() 
```

（但随后是通用的）

*（我意识到这仅适用于非复合键，但这与我的情况无关）*

**有什么方法可以解决无法识别 EntityKeyValues 的数组索引器的 linq-to-entities？**

解决方案必须是通用的，我宁愿不依赖于魔术字符串中的“Id”之类的东西。获得所有这些主键值的完全替代方法当然总是受欢迎的。

# iphone - 增加 iPad 控制台上的日志详细程度

> ID：13840442
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:19.933
> 
> 标签：iphone, ipad, ios5, logging, ios6

我正在寻找一种方法来增加 iPad 设备上的日志详细程度。现在我有几个运行一个应用程序的完全相同的副本。一些设备报告完整的详细日志（包括通知、调试），而其他设备仅报告警告及以上。

我安装了相同的开发证书集，并且设备在 XCode 和 Iphone 配置实用程序中公开了相同的日志内容（因此，有些给出有限的而另一些给出完整的）日志。

感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:40:23.543

找到了答案。使用`<asl.h>`. 更多细节[在这里](http://doing-it-wrong.mikeweller.com/2012/07/youre-doing-it-wrong-1-nslogdebug-ios.html)。

# java - 带有 javax.mail 和 CentOS 的邮件服务器

> ID：13840444
> 
> 赞同：7
> 
> 时间：2012-12-12T13:03:21.897
> 
> 标签：java, jakarta-mail

我有一个安装在旧 Ubuntu 机器上并使用 javax.mail 发送邮件的 Java 程序。然而，那台机器坏了，我现在在一台新的 CentOS 机器上运行相同的 Java 应用程序。

但是，尝试使用 mail.smtp.host = 127.0.0.1 发送电子邮件时，我收到错误“MessagingException: 501 Syntax: HELO hostname”。

我的猜测是这个 CentOS 还没有激活邮件服务器。

我将如何配置 javax.mail 可以使用的邮件服务器？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-23T21:04:12.957

您的机器主机名必须映射到`/etc/hosts`文件中。

示例：控制台显示：`linux#` 和`cat /etc/hostname`显示

```
linux.mydomain.com 
```

然后编辑运行为`root`.`vi /etc/hosts`

```
127.0.0.1  localhost linux linux.mydomain.com 
```

可以在这里找到详细的信息：[https ://confluence.atlassian.com/display/CONFKB/Sending+Email+Fails+Due+to+501+Syntax%3A+HELO+Hostname+Error](https://confluence.atlassian.com/display/CONFKB/Sending+Email+Fails+Due+to+501+Syntax%3A+HELO+Hostname+Error)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-07T06:11:54.260

在使用 Spring MailSender 发送电子邮件时，我遇到了同样的问题“MessagingException: 501 Syntax: HELO hostname”。对我有用的是在 javaMailProperties 下添加额外的属性“mail.smtp.localhost”，如下所示：

```
 <!-- JAVA MAIL -->
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
    <property name="host" value="" />
    <property name="port" value="25" />
    <property name="protocol" value="smtp" />
    <property name="username" value="" />
    <property name="password" value="" />
    <property name="javaMailProperties">
        <props>
            <prop key="mail.smtps.auth">true</prop>
            <prop key="mail.smtps.starttls.enable">true</prop>
            <prop key="mail.smtps.debug">true</prop>
            <prop key="mail.smtp.localhost">localhost</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:56:51.630

问题是新机器上的命名服务没有正确配置，Java找不到机器的主机名。SMTP HELO 命令需要包含主机名。服务器正在抱怨，因为它丢失了。打开 JavaMail Session 调试，您可以看到发送的实际命令。您可以通过将 JavaMail 属性 mail.smtp.localhost 设置为您要在 HELO 命令中使用的主机名来解决此主机配置问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:06:55.573

你需要运行`sendmail`. 请参阅[此处](http://www.centos.org/docs/5/html/5.1/Deployment_Guide/s3-email-mta-sendmail-default.html)了解更多信息。配置`sendmail`可能是一件苦差事，如果可能，您可能希望`sendmail.cf`从旧机器上进行配置。

我怀疑（也）您应该设置一些中央 MTA（邮件传输代理），以便您企业中的所有机器都使用它，而不是每台主机运行一个。即*不*使用`localhost`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-06-21T17:30:54.450

在我的情况下，etc/hostname 是 susetest（而不是 linux.company.com）

将 etc/hosts 从 127.0.0.1 localhost 修改为 127.0.0.1 localhost susetest（在 localhost 之后，请确保在修改文件时使用选项卡）

确保保存更改，后缀停止，后缀启动以重新启动 SMTP 服务器。

应该可以正常工作。

（添加 properties.setProperty("mail.smtp.localhost", "ourcompany.com"); 到属性也解决了问题，但解决方法不应该是修复，当你可以找到根本原因时，即使需要几天在我的情况下）

# c# - 触发器或计算列？

> ID：13840449
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:31.107
> 
> 标签：c#, sql-server-2008

我`employeeswipe_tbl`在 SQL Server 2008 中有一个包含这些列的表：

```
create employeeswipe_tbl swipepk int (
swipepk int primary ,
empid  int,
dateofswipe date ,
intime datetime,
outime datetime,
logduration  time
) 
```

当员工登录时`intime, empid, dateofswipe`输入和注销时`outime`更新`swipepk`

现在我想要的是当我更新时`outtime`会`logduration`自动计算

```
logduration  = outtime - intime 
```

我正在考虑一些想法，例如计算列或触发器。考虑到我是初学者，谁能给出一个好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:20:02.410

计算列通常是比触发器更好的选择。可以禁用触发器。计算列“总是”正确：

```
create table employeeswipe_tbl (
swipepk int primary key,
empid  int,
intime datetime,
outime datetime,
dateofswipe AS CONVERT(date,intime) ,
logduration AS DATEDIFF(second,intime,outime)
) 
```

正如我的评论中所指出的，两个`datetime`s 之间的差异将是一个时间跨度，而不是另一个 s `datetime`。SQL Server 中没有时间跨度类型，因此最好以秒为单位保持差异 - 在显示期间将其格式化为小时、分钟和秒。例如，如果您需要将几行数据相加，这将变得更容易。

* * *

~~旁注 - 我也在考虑制作`dateofswipe`一个计算列 - 它不只是日期的一部分`intime`吗？~~

# c# - 导出到 .csv 文件

> ID：13840450
> 
> 赞同：3
> 
> 时间：2012-12-12T13:03:31.333
> 
> 标签：c#, asp.net, csv

我在将数据导出到 .csv 文件时遇到问题。我使用2种方法。

```
 Encoding csvEncoding = new UTF8SignatureEncoding();
        byte[] csvFile = TestByte(CsvContentDelimiter.NewLine, CsvContentDelimiter.Semicolon, csvEncoding);

        string attachment = String.Format("attachment; filename={0}.csv", "docs_inv");

        Response.Clear();
        Response.ClearHeaders();
        Response.ClearContent();
        Response.ContentType = "text/csv";
        Response.ContentEncoding = csvEncoding;
        Response.AppendHeader("Content-Disposition", attachment);
        Response.BinaryWrite(csvFile);
        Response.Flush();
        Response.End(); 
```

和

```
 public byte[] TestByte(CsvContentDelimiter rowDelimiter, CsvContentDelimiter columnDelimiter, Encoding encoding)
    {
        StringBuilder sb = new StringBuilder();
        sb.Append("product;");
        return encoding.GetBytes(sb.ToString());
    } 
```

此代码创建 .csv 文件，但文件编码错误，我只看到一些“哈希”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:08:31.530

这是一个使用 UTF8 格式的完整示例。它使用您自己的代码，因此表明是您的编码导致了问题：

```
namespace WebApplication1
{
    using System;
    using System.Text;

    public partial class _Default : System.Web.UI.Page
    {
        protected void btnExport_Click(object sender, EventArgs e)
        {
            // Use UTF8 encoding
            Encoding csvEncoding = Encoding.UTF8;
            byte[] csvFile = TestByte(csvEncoding);

            string attachment = String.Format("attachment; filename={0}.csv", "docs_inv");

            Response.Clear();
            Response.ClearHeaders();
            Response.ClearContent();
            Response.ContentType = "text/csv";
            Response.ContentEncoding = csvEncoding;
            Response.AppendHeader("Content-Disposition", attachment);
            Response.BinaryWrite(csvFile);
            Response.Flush();
            Response.End();
        }

        public byte[] TestByte(Encoding encoding)
        {
            StringBuilder sb = new StringBuilder();
            sb.AppendFormat("Record1,Fred,Bloggs,26{0}", Environment.NewLine);
            sb.AppendFormat("Record2,John,Smith,32{0}", Environment.NewLine);
            return encoding.GetBytes(sb.ToString());
        }
    }
} 
```

# php - Codeigniter 数据中的 MySQL 函数

> ID：13840451
> 
> 赞同：3
> 
> 时间：2012-12-12T13:03:32.700
> 
> 标签：php, mysql, codeigniter, insert

使用 codeigniter 我试图在我的数据库中插入一行，但我希望行中的数据由 MySQL 生成。正确的做法是什么？

```
$data['my_id'] = 'UUID()';
$db->insert('my_table',$data); 
```

显然以上方法行不通，但我怎样才能让它发挥作用呢？

编辑：理论上这是上面应该产生的：

```
INSERT INTO my_table (my_id) VALUES (UUID()); 
```

当然，我的实际查询并不是那么简单，但这应该能说明问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T13:25:56.110

您可以使用`$this->db->set('my_id', 'UUID()', FALSE);`

对于传递多重参数，

```
$data = array(.....) //add the params.
$this->db->set('my_id', 'UUID()', FALSE);
$this->db->insert('my_table',$data); 
```

# android - android用GPS位置标记图像并保存到数据库

> ID：13840455
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:43.237
> 
> 标签：android, gps, android-camera

1.我已经编写了通过android手机拍摄图像的代码2.我得到了用户的当前位置现在我想将此图像与当前gps位置一起保存在sqlite db中，以便人们可以在地图中查看带有标记详细信息的图像。

请帮忙。我对安卓很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:13:11.900

此[链接](https://stackoverflow.com/questions/6915775/storing-images-in-sqlite-android)可用于将图像存储为 blob 文件并检索它。

我的建议是，与其将图像保存到 sqliteDB，不如只保存图像的路径。直接保存在 sqliteDB 中会导致应用程序内存使用量增加。这样你就可以依赖 SD 卡了。

希望有帮助:)

# android - 如何在调用的eclipse方法中搜索？

> ID：13840459
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:52.997
> 
> 标签：android, search

如何在 Eclipse 或 MotoDev IDE 中搜索正在调用哪些方法以及由哪个文件调用？即我有一个名为Validate 的方法，但不知道如何从调用它的哪个类或文件中搜索它的调用位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:10:29.350

您也可以在大纲视图或 java 源代码中右键单击方法名称，然后选择“打开调用层次结构”，这将显示完整的调用链。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:06:17.627

在日食中：

左键单击以突出显示方法或在大纲中选择它。

选择后：

右键单击它->参考

或者

搜索 -> 参考

并选择一个范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:11:00.063

右键单击方法并单击引用，（选择范围，即工作区、项目或层次结构）。

# tfs - TFS 2010：sprint backlog 项目在工作项菜单中不可见

> ID：13840460
> 
> 赞同：0
> 
> 时间：2012-12-12T13:03:56.980
> 
> 标签：tfs, tfs-process-template, tfs-2010

我安装了 TFS 2010 试用版。在 Visual Studio 编辑器中，在 Team menu->New Work Item 下，我只找到了 Bug、Issue、Shared Steps、Task、Testcase、User Story 我没有找到 ChangeRequest、Review、Risk、Sprint Backlog Items。我怎样才能在我的团队菜单中获得这些；谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:46:07.840

您的项目是使用 CMMI 流程模板创建的。如果您还没有任何内容，最简单的方法是使用 SCRUM 模板创建一个新的 TeamProject。

如果您已经使用过该项目，则可以安装 TFS Power Tools。在 VS 中，您将获得工具菜单条目“流程编辑器”->“工作项类型”->“导入 WIT”现在您需要定义所需工作项的 XML 文件。如果您有其他使用这些类型的项目，您可以在那里使用“导出 WIT”并将它们导入您的项目。如果那里没有它们，则需要下载它们。可能的位置：

```
◦Scrum for Team System version 3 (on TFS 2010) 
https://www.scrumforteamsystem.com/Products/Search/SfTS%20v3 

◦MSF Agile version 5 (on TFS 2010) 
http://msdn.microsoft.com/en-us/library/dd380647.aspx 

◦Microsoft Visual Studio Scrum 1.0 (on TFS 2010) 
 http://visualstudiogallery.msdn.microsoft.com/en-us/59ac03e3-df99-4776-be39-1917cbfc5d8e 
```

# c# - c# continue 在主要处理的异常

> ID：13840462
> 
> 赞同：0
> 
> 时间：2012-12-12T13:04:03.913
> 
> 标签：c#, exception-handling

> **可能重复：**
> [如何在未处理的异常后继续运行？](https://stackoverflow.com/questions/7803168/how-do-i-continue-running-after-an-unhandled-exception)

我在 SO 上看到了大量类似的问题和答案，但不一样。

我在 main 中处理所有未捕获的异常，如下所示：

在主要我设置以下：

```
Application.ThreadException += new ThreadExceptionEventHandler(MainForm_UIThreadException);

Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

AppDomain.CurrentDomain.UnhandledException +=
                 new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);

Application.Run(new MainForm()); 
```

如果我在调试器中运行我的程序，在异常发生后我在 MainForm_UIThreadException 或 CurrentDomain_UnhandledException 中处理它们，黄色调试器箭头指向实际发生此异常的行，所以我可以跳过，这意味着（对我而言）执行上下文不会丢失。

我知道我不能继续执行**未处理**的异常，但实际上这个 esception 是在其他地方处理的。

是否可以继续执行当前功能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:23:14.357

> 你没有。当您收到 AppDomain 未处理的异常时，您的应用程序不再处于稳定状态。你究竟会恢复到哪里？当你到了那个地步，你唯一的选择，有充分的理由，就是退出。您可以合理地[安排自己](http://msdn.microsoft.com/en-us/library/aa931253.aspx)再次运行以确保应用程序恢复运行，但更好的想法是在其源处实际处理异常并防止它成为 UnhandledException。

来自：[如何在未处理的异常后继续运行？](https://stackoverflow.com/questions/7803168/how-do-i-continue-running-after-an-unhandled-exception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:34:36.133

在 WinForms 应用程序中，如果要继续运行，则需要在 UI 事件处理程序中处理异常。

例如：

```
private void saveButton_Click(object sender, EventArgs e)
{
    try
    {
        ... call BLL to save data
    }
    catch(Exception ex)
    {
        MessageBox.Show("Failed to save data");
    }
} 
```

# sql - 以“列标题：列值”格式获取单个记录的 SQL 查询

> ID：13840468
> 
> 赞同：4
> 
> 时间：2012-12-12T13:04:17.920
> 
> 标签：sql, sql-server, sql-server-2008, tsql, unpivot

假设我有这张桌子：

```
Create table test(a int, b int, c int, d int) 
```

我可以简单地写'select * from test'来获得以下第一条记录：

```
A B C D  
1 2 3 4

```

但相反，我想要这样（单条记录四行）：

```
答：1  
乙：2  
C: 3  
D: 4

```

有人可以帮我这样做吗？

这是在远程桌面系统上查看单个记录所必需的，该系统非常慢，并且水平滚动很糟糕，其中有 800 列。所以我需要从一条记录中查看数据的格式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T13:07:09.667

您可以使用该[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来执行此操作，以下版本将列名和值连接在一起，但您始终可以将它们显示为单独的列：

```
select col+':'+cast(value as varchar(10)) col
from test
unpivot
(
  value
  for col in (A, B, C, D)
) unpiv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/4ff58/1)

如果您有已知数量的列，上述方法非常有用，但如果您有 800 个要转换的列，您可能需要使用动态 sql 来执行此操作：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test')
         for xml path('')), 1, 1, '')

set @query 
  = 'select col+'':''+cast(value as varchar(10)) col
     from test
     unpivot
     (
       value
       for col in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/fe090/3)

*注意：使用时`UNPIVOT`需要转换的所有列的数据类型必须相同。因此，您可能必须根据需要转换/转换数据。*

**编辑 #1**，因为您的所有列的数据类型都不同，并且您需要取消透视它们，所以您可以使用以下代码。

第一部分获取要动态取消透视的列列表：

```
select @colsUnpivot = stuff((select ','+quotename(C.name)
             from sys.columns as C
             where C.object_id = object_id('test')
             for xml path('')), 1, 1, '') 
```

第二部分获得相同的列列表，但将每一列包装在 a`cast`中`varchar`：

```
select @colsUnpivotCast = stuff((select ', cast('+quotename(C.name)+' as varchar(50)) as '+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test')
         for xml path('')), 1, 1, '') 
```

那么您的最终查询将是：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @colsUnpivotCast AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test')
         for xml path('')), 1, 1, '')

select @colsUnpivotCast = stuff((select ', cast('+quotename(C.name)+' as varchar(50)) as '+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test')
         for xml path('')), 1, 1, '')

set @query 
  = 'select col+'':''+value col
     from
    (
      select '+@colsUnpivotCast+'
      from test
    ) src
     unpivot
     (
       value
       for col in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/7323f/6)

该`UNPIVOT`函数正在执行与 a 相同的过程，`UNION ALL`如下所示：

```
select col+':'+value as col
from
(
  select A value, 'A' col
  from test
  union all
  select cast(B as varchar(10)) value, 'B' col
  from test
  union all
  select cast(C as varchar(10)) value, 'C' col
  from test
  union all
  select cast(D as varchar(10)) value, 'D' col
  from test
) src 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e6496/8)

所有查询的结果都是一样的：

```
|    COL |
----------
|    A:1 |
| B:2.00 |
|    C:3 |
|    D:4 | 
```

**编辑＃2：**使用`UNPIVOT`删除任何可能导致某些数据丢失的空列。如果是这种情况，那么您将需要将列包装起来`IsNull()`以替换`null`值：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @colsUnpivotCast AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test')
         for xml path('')), 1, 1, '')

select @colsUnpivotCast = stuff((select ', IsNull(cast('+quotename(C.name)+' as varchar(50)), '''') as '+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('test')
         for xml path('')), 1, 1, '')

set @query 
  = 'select col+'':''+value col
     from
    (
      select '+@colsUnpivotCast+'
      from test
    ) src
     unpivot
     (
       value
       for col in ('+ @colsunpivot +')
     ) u'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9906e/1)

替换空值，将得到如下结果：

```
|    COL |
----------
|    A:1 |
| B:2.00 |
|     C: |
|    D:4 | 
```

# soundcloud - Soundcloud 录制 flash 插件不适用于 macOS 下当前版本的 chrome

> ID：13840470
> 
> 赞同：2
> 
> 时间：2012-12-12T13:04:23.397
> 
> 标签：soundcloud

这个记录插件在 macOS 下使用当前版本的 chrome 停止为我们工作

铬：版本 23.0.1271.97

macOS：10.8.2

[http://connect.soundcloud.com/examples/recording.html](http://connect.soundcloud.com/examples/recording.html)

### 如何重现：

1.  点击记录
2.  允许使用你的麦克风
3.  -> 录音不开始

（实际上有时它有效（对我来说是 20% 的情况）），有时控制台中也会出现错误

```
PepperFlashPlayer.plugin: 0x2A052 is not valid resource ID. 
```

请帮助我们，我们将其用于制作，很多用户无法录制声音

问候， 德米特里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:20:13.850

我的调查显示：有时“SampleDataEvent.SAMPLE_DATA”事件未在闪存中触发（或未分配）。

为了解决这个问题，我这样做：

添加到事件处理程序“StatusEvent.STATUS”（如果麦克风未静音，则手动调用）：

```
tti = setInterval(applySampleData, 100); 
```

新增功能：

```
protected function applySampleData() : void {
  microphone.removeEventListener(SampleDataEvent.SAMPLE_DATA, recordSampleDataHandler);
  microphone.addEventListener(SampleDataEvent.SAMPLE_DATA, recordSampleDataHandler);
} 
```

在函数“recordSampleDataHandler”（它是 SampleDataEvent.SAMPLE_DATA 监听器）中：

```
if(tti) { clearInterval(tti); tti = 0; } 
```

试试这个。

# html - 绝对 div 覆盖 iframe 边框？

> ID：13840475
> 
> 赞同：2
> 
> 时间：2012-12-12T13:04:57.323
> 
> 标签：html, css

我想知道是否有办法让一个绝对定位的 div 悬停在 div 所在的 iframe 的边框上。可以这样做吗？

我的情况：我有一个包含文件列表的 iframe，每个文件的右端都有一个按钮。我想要一个带有上下文菜单等功能的 div 弹出窗口。但是因为这个按钮位于 iframe 的边缘，所以绝对定位的 div 被放在 iframe 视口的后面/外面。我希望它覆盖在 iframe 之外的文档的其余部分。

```
​&lt;iframe width="100" height="100">
div would be in here, say 300 x 100 px.
</iframe>
overlayed div should be visible here as well, basically the div should overlay the iframe.​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:46:44.697

好吧，从技术上讲，你不能这样做。但是，如果您劫持 iframe 中的事件，您可以在主窗口中重新创建上下文菜单，并使用 div 在 iframe 中的相对位置 + iframe 本身的绝对位置。

因此，总而言之，上下文菜单可以在 iframe 之外，并由 iframe 内的事件进行操作。

让我告诉你如何做到这一点。我没有你的代码，所以我只是在做一个非常粗略的概念证明。:)

[示例](http://jsfiddle.net/Kc84D/)| 代码

HTML

```
<iframe id='my_frame'></iframe>

<div id='copy_to_frame'>
    <ul id='files_list'>
        <li>data.dat</li>
        <li>manual.html</li>
        <li>readme.txt</li>
        <li>model1.obj</li>
        <li>human_model.obj</li>
    </ul>
</div>

<div class='context_menu'>
    <ul>
        <li>Delete</li><li>Open</li><li>Move</li><li>Copy</li>
    </ul>
</div> 
```

Javascript

```
//Declare the necessary variables, good practice
var frame = $("#my_frame"),
    frame_contents = frame.contents(),
    frame_body = frame_contents .find("body"),
    copy_list = $("#copy_to_frame"),
    context_menu = $(".context_menu");

var bInside = false;

//Fill the iframe with a list
frame_body.html(copy_list.html());
copy_list.hide();
paint();

//Attach event handler for context menu popup etc.
$("#files_list li", frame_body).click(function(e){
    var $this = $(this);
    var rel_x = $this.position().left + $this.outerWidth() + 5,
        rel_y = $this.position().top + $this.outerHeight()/2 - context_menu.outerHeight()/2 - frame_body.scrollTop(),
        abs_x = frame.offset().left,
        abs_y = frame.offset().top;

    e.stopPropagation();

    context_menu.css({
        top: rel_y + abs_y,
        left: rel_x + abs_x
    });

    //Show the context menu in this window
    context_menu.show();
    paint($this);
});

//Hide when clicking outside the context menu
$(document).add(frame_body).click(function(){
    if(!bInside){
        context_menu.hide();
        paint();
    }
});

//Determine if mouse is inside context menu
context_menu.mouseenter(function(){
    bInside = true;
}).mouseleave(function(){
    bInside = false;
});

function paint(el){
    $("#files_list li", frame_body).css({
        "background-color": "white",
        "border": "1px solid transparent"
    });

    if(el){
        el.css({
            "background-color": "#ddecfd",
            "border": "1px solid #7da2ce"
        });
    }
} 
```

CSS

```
#my_frame{
    position: absolute;
    border: 1px solid gray;
    width: 200px;
    height: 100px;
    top: 50%; left: 50%;
    margin-top: -62.5px;
    margin-left: -100px;
    z-index: 1;
}

.context_menu{
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    background-color: white;
    z-index: 2;
}

.context_menu ul{
    border: 1px solid black;
    border-right: 0;
    display: inline-block;
}

.context_menu li{
    display: inline-block;
    border-right: 1px solid black;
    padding: 2px;
    text-align: center;
    margin: 0px;
    cursor: default;
}

.context_menu li:hover{
    background-color: lightgray;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T14:39:35.213

根据提供的最少信息，这是一个猜测，但是...

您可以使用 jQuery 在父文档中操作an的*内容，如下所示：*`<iframe>`

```
$('#myFrame').contents().find('a').click(function() { /*...*/ }); 
```

这允许您检测用户何时在`<iframe>`. 然后，您可以确定在哪里放置您的叠加层`<div>`。

您的叠加层`<div>`需要`position: fixed`设置。您可以使用 jQuery 的`.offset()`方法来获取 的坐标`<iframe>`以及在`<iframe>`. 您可以使用这两个值来计算叠加层`<div>`在父文档中的位置。例如，要将叠加层放置在`<iframe>`与单击的链接相同的垂直水平的左侧，您可以执行以下操作：

```
$('#overlayDiv')
    .offset({
        left: $('#myFrame').offset().left - $('#overlayDiv').width(),
        top: $('#myFrame').offset().top + $(this).offset().top
    }) 
```

有关它如何工作的基本示例，请参见此小提琴：http: [//jsfiddle.net/Gxd3M/2/](http://jsfiddle.net/Gxd3M/2/)

*（请注意，这假设父文档和 iframe 的内容都来自同一个服务器，即它们具有[相同的来源](http://en.wikipedia.org/wiki/Same_origin_policy)。）*

# php - 整洁的方式来解决php代码？

> ID：13840476
> 
> 赞同：0
> 
> 时间：2012-12-12T13:05:04.550
> 
> 标签：php, arrays, while-loop

我将如何解决以下问题，该问题涉及为下面定义的数组中的每一行运行更新查询？我希望它变得清晰......

```
<?php

//Some code

user = array();

 while ($row = mysql_fetch_array ($auctioncheck)){
$fdt[] = $row['finish_time'];
if ($date_time >= $fdt) {
$user[] = $row['current_bidder'];
    {
    { 
```

然后我想更新一个将值设置为“user[]”的表。这样做的最简洁的方法是什么？我认为它需要一个while循环，只是我不知道在这种情况下如何去做。所以它会像......

```
 <?php

//Above while loop and then...

$update = mysql_query("UPDATE homepage SET username = '$user[]'...so on"); 
```

基本上我希望为上述数组中的每个用户 [] 执行更新。如果我知道如何确定用户数组中的行数，我也许能够弄清楚。任何帮助将非常感激。干杯。

看起来 for each 将发挥作用。只有我现在关心更新中使用的多个数组的元素。

```
$user = array();
$seller = array();

while ($row = mysql_fetch_array ($auctioncheck)){
$fdt[] = $row['finish_time'];
if ($date_time >= $fdt) {
$user[] = $row['current_bidder'];
$seller[] = $row['seller'];
 }
 }

 $update = mysql_query("UPDATE homepage SET username = '$user[]'...WHERE username = '$seller'"); 
```

Any ide 为任何人提供多个元素和数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:12:52.797

它应该是`$user = array();`

这是你要找的吗？

```
<?php

//Above while loop and then...

foreach($user as $value){
  $update = mysql_query("UPDATE homepage SET username = '$value'");
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:11:39.157

这不是 PHP

```
user = array(); 
```

你错过了`$`

除了

哪里

```
 {
 { 
```

参加进来？

# ruby - 如何设计一个多线程程序，其中每个线程同时读取来自控制台的输入？

> ID：13840482
> 
> 赞同：2
> 
> 时间：2012-12-12T13:05:24.723
> 
> 标签：ruby, multithreading, parallel-processing

这个想法是输入将由控制台提供，并将使用唯一的“id”作为输入的第一个单词来标识。当遇到新的 id 时会产生一个新线程，随后的输入是“开始”。当具有相同 id 的输入会说“关闭”时，线程应该关闭。语句的顺序是随机的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:58:46.120

这里的诀窍是让一个线程（最容易的是主线程）完成所有读取。该线程将解析命令，启动或停止线程，并将命令分派给线程。每个线程都有自己的队列，它从中读取命令，主线程将命令放入其中。让我们看看它是如何完成的。

我们将从控制命令的一个小模块开始，以便它们是 DRY：

```
module ControlCommands
  START_COMMAND = 'start'
  STOP_COMMAND = 'stop'
end 
```

现在让我们看看“主要”：

```
class Main

  def initialize
    @workers = Workers.new
    @console = Console.new(@workers)
  end

  def run
    @console.read_and_dispatch
    @workers.join
  end

end

Main.new.run 
```

这里没什么大不了的。我们制作了一个控制台，并告诉它读取命令并将它们分派给工作人员。控制台在输入用完之前不会从那里返回。`@workers.join`在程序退出之前确保所有工作人员已完成工作并正确关闭的调用。

这是控制台类：

```
class Console

  def initialize(workers)
    @workers = workers
  end

  def read_and_dispatch
    while input = gets
      @workers.dispatch *parse_input(input)
    end
  end

  private

  def parse_input(input)
    input.match(/^(\w+) *(.*)$/)[1..2]
  end

end 
```

`read_and_dispatch`是主循环。它只负责读取和解析输入。只要有输入，它就将其拆分为工人名称和命令，然后告诉工人处理命令。

这是工人类：

```
class Workers

  include ControlCommands

  def initialize
    @workers = {}
  end

  def dispatch(worker_name, command)
    case command
    when START_COMMAND
      start_worker worker_name
    when STOP_COMMAND
      stop_worker worker_name
    else
      dispatch_worker worker_name, command
    end
  end

  def join
    @workers.each do |worker_name, worker|
      worker.stop
      worker.join
    end
  end

  private

  def start_worker(worker_name)
    @workers[worker_name] = Worker.new(worker_name)
  end

  def stop_worker(worker_name)
    @workers[worker_name].stop
  end

  def dispatch_worker(worker_name, command)
    @workers[worker_name].dispatch command
  end

end 
```

这是大部分肉的地方。此类创建工作者（线程）、停止它们并向它们发送命令。注意这里没有错误处理：如果你试图停止一个没有启动的线程，启动一个已经启动的线程，或者向一个不存在的线程发送一个命令，程序将会崩溃或者行为不端。我会将这些情况的处理留作“读者练习”。

这是工人类：

```
class Worker

  include ControlCommands

  def initialize(name)
    @name = name
    @commands = Queue.new
    @thread = start_thread
  end

  def dispatch(command)
    @commands.enq command
  end

  def stop
    @commands.enq STOP_COMMAND
  end

  def join
    @thread.join
  end

  private

  def start_thread
    Thread.new do
      loop do
        command = @commands.deq
        break if command == STOP_COMMAND
        process_command command
      end
    end
  end

  def process_command(command)
    print "thread #{@name} received command #{command.inspect}\n"
  end

end 
```

此类包含线程，以及用于在主线程（读取控制台的线程）和工作线程之间进行通信的队列。该队列还用于同步停止线程，方法是将 STOP_COMMAND 放入队列中，线程通过退出来响应该队列。当您负担得起时，最好同步而不是异步停止线程。

这是一个简单的输入文件：

```
foo start
bar start
foo input
bar input
foo stop
bar stop 
```

以及当程序带有该输入时的输出：

```
thread bar received command "input"
thread foo received command "input" 
```

# php - Windows Azure 中的非拉丁字符 URL 重写

> ID：13840485
> 
> 赞同：1
> 
> 时间：2012-12-12T13:05:35.240
> 
> 标签：php, azure, url-rewriting

我正在检查迁移到 Windows Azure 云托管的可能性，该网站在 URL 中使用阿拉伯（非拉丁）字符。

网站上的原始网址是： http: [//nafham.com/%D8%A7%D8%B3%D9%85-%D8%A7%D9%84%D9%81%D8%A7%D8%B9% D9%84-%D9%85%D9%86-%D8%A7%D9%84%D9%81%D8%B9%D9%84-%D8%BA%D9%8A%D8%B1-%D8% A7%D9%84%D8%AB%D9%84%D8%A7%D8%AB%D9%8A/](http://nafham.com/%D8%A7%D8%B3%D9%85-%D8%A7%D9%84%D9%81%D8%A7%D8%B9%D9%84-%D9%85%D9%86-%D8%A7%D9%84%D9%81%D8%B9%D9%84-%D8%BA%D9%8A%D8%B1-%D8%A7%D9%84%D8%AB%D9%84%D8%A7%D8%AB%D9%8A/)

在托管同一页面的相同 URL 的 azure 上是： http: [//nafham.azurewebsites.net/%D8%A7%D8%B3%D9%85-%D8%A7%D9%84%D9%81%D8 %A7%D8%B9%D9%84-%D9%85%D9%86-%D8%A7%D9%84%D9%81%D8%B9%D9%84-%D8%BA%D9%8A% D8%B1-%D8%A7%D9%84%D8%AB%D9%84%D8%A7%D8%AB%D9%8A/](http://nafham.azurewebsites.net/%D8%A7%D8%B3%D9%85-%D8%A7%D9%84%D9%81%D8%A7%D8%B9%D9%84-%D9%85%D9%86-%D8%A7%D9%84%D9%81%D8%B9%D9%84-%D8%BA%D9%8A%D8%B1-%D8%A7%D9%84%D8%AB%D9%84%D8%A7%D8%AB%D9%8A/)

在 APACHE 服务器上运行的第一个 url 上，url 请求工作正常。

在 Azure 上，阿拉伯字符被忽略，导致请求成为索引页面

关于如何在 Azure 的 url 中允许阿拉伯字符的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:58:06.810

看起来解决这个问题相当复杂。[Hanselman 在这里](http://www.hanselman.com/blog/ExperimentsInWackinessAllowingPercentsAnglebracketsAndOtherNaughtyThingsInTheASPNETIISRequestURL.aspx)有一篇很长的帖子。[这里](http://blogs.iis.net/nazim/archive/2011/04/18/use-of-special-characters-like-in-an-iis-url.aspx)和[这里](http://blogs.iis.net/wadeh/archive/2011/04/20/how-iis-blocks-characters-in-urls.aspx)也有一些讨论。

但是，您可能会注意到几乎每个人都认为这是一个坏主意，并且“修复”基本上是关闭了一系列安全检查。如果可能的话，最好避免使用百分比编码的 URL 并保持安全检查。

# angularjs - Angularjs：两种方式数据绑定和控制器重新加载

> ID：13840489
> 
> 赞同：7
> 
> 时间：2012-12-12T13:05:46.557
> 
> 标签：angularjs

如果使用路由和控制器，那么模型不会在控制器重新加载之间保存他的状态。Angular 在每次路由加载时创建控制器实例和新范围。

例如，我在输入中输入具有 ng-model="something" 的内容，然后转到另一条路线，然后返回第一条路线。我所有输入的文本都丢失了。

我需要在路由更改之间进行简单的双向数据绑定。尽可能简单，如 knockoutjs 中的 ko.observable。或者在一个控制器中隐含地像角度一样。也许使用单例 $scope 作为控制器？

我找到了方法，当我创建服务以在路由更改之间保存数据并将其注入控制器时。在控制器的构造函数中，我使用来自服务的值创建模型，并 $scope.watch 这个模型进行更改，并在更改时将模型的值设置为服务。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T17:25:24.267

你是对的 - 服务是这样做的正确方法。你可以像这样使用它：

**应用程序.js**

```
app.factory('paginationService', function() {
    return {
        cur: 1,
        total: 9,
        pageSize: 8
    };
});

app.controller('Page1Ctrl', function($scope, paginationService) {
  $scope.pagination = paginationService;
}); 
```

**Page1.html**

```
<div ng-controller="Page1Ctrl">
  <h2>Page1</h2>

  <p>curPage: <input type="number" ng-model="pagination.cur" /></p>  
</div> 
```

查看[完整示例](http://plnkr.co/3Uffdf)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:22:36.717

您可以将 $rootScope 注入您的控制器并使用它来存储全局可访问的变量，尽管您仍然会遇到相同的问题来监视更改。您可以创建一个指令，将您的服务注入当前范围，并让它在范围内绑定监视处理程序。

# mysql - mysql - 结合2个不同条件的表

> ID：13840495
> 
> 赞同：1
> 
> 时间：2012-12-12T13:05:56.727
> 
> 标签：mysql, sql

这里我有 2 个表 user 和 userStore

```
user Table
╔════╦══════╦════════╦═══════════╗
║ ID ║ NAME ║  ROLE  ║ STORECODE ║
╠════╬══════╬════════╬═══════════╣
║  1 ║ A    ║ Admin  ║           ║
║  2 ║ B    ║ Store  ║         1 ║
║  3 ║ C    ║ Store  ║           ║
║  4 ║ D    ║ Client ║           ║
║  5 ║ E    ║ Staff  ║           ║
╚════╩══════╩════════╩═══════════╝

userStore Table
╔════╦══════════╗
║ ID ║ CATEGORY ║
╠════╬══════════╣
║  1 ║ X        ║
║  2 ║ X        ║
╚════╩══════════╝

Output
╔════╦══════╦════════╦═══════════╦══════════╗
║ ID ║ NAME ║  ROLE  ║ STORECODE ║ CATEGORY ║
╠════╬══════╬════════╬═══════════╬══════════╣
║  1 ║ A    ║ Admin  ║           ║          ║
║  2 ║ B    ║ Store  ║         1 ║ X        ║
║  4 ║ D    ║ Client ║           ║          ║
║  5 ║ E    ║ Staff  ║           ║          ║
╚════╩══════╩════════╩═══════════╩══════════╝ 
```

我想从用户表中获取除 store 之外的角色的所有行。并且希望仅当它在用户存储表中匹配时才包含存储角色。在输出中，您可以看到 id=3 不可用，因为它没有来自用户存储的匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:12:28.150

这应该是直截了当的，使用`LEFT JOIN`

```
SELECT  a.*, b.*
FROM    user a
        LEFT JOIN userStore b
            ON a.StoreCode = b.ID
WHERE   (a.role <> 'Store') OR 
        (a.role = 'Store' AND NOT b.ID IS NULL ) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/b1305/10)

其他来源

*   [连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:22:53.083

试试这个：

```
SELECT u.id, u.name, u.role, u.StoreCode, IFNULL(us.id, '') id, IFNULL(us.Category, '') Category
FROM USER u 
LEFT JOIN userStore us ON u.StoreCode = us.id 
WHERE IF(LOWER(u.role) = 'store', u.StoreCode IS NOT NULL AND u.StoreCode != '', TRUE); 
```

# php - 在关系数据库查询中存储数据

> ID：13840498
> 
> 赞同：0
> 
> 时间：2012-12-12T13:06:04.740
> 
> 标签：php, mysqli

创建多对多表时，关系数据库。例如，如果您允许用户在网络上抓取图像并标记它们。是否会更好：

1.  检查图像是否已经在数据库中，如果是，则在关系表中创建一个链接，如果不是，则创建一个新图像。

2.  为每个用户创建一个唯一的图像实例，并在寻找显示最受欢迎的图像时按重复次数最多的图像选择和排序

我希望这是有道理的。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:33:30.487

我假设您有相当于一张`USERS`桌子和一张`PICTURES`桌子的东西。也是一个打破多对多关系的表。 `U2P`我会打电话的。

您列为选项 1 的选项似乎是首选方式。检查图片是否在数据库中，是否从`PICTURES`对应的获取主键。如果没有，请将图片放在`PICTURES`表格中。

无论它是新图像还是已经存在的图像，您都会将事件插入`U2P`表中。这将引用事件对应的`USERS`主键和主键。`PICTURES`您还将记录其他数据，例如时间等...

# android - 如何在android中的sql lite数据库中保存和检索图像

> ID：13840504
> 
> 赞同：0
> 
> 时间：2012-12-12T13:06:29.783
> 
> 标签：android

我按照本教程[http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example](http://vimaltuts.com/android-tutorial-for-beginners/android-sqlite-database-example) 只是告诉我如何在此代码中添加一个字段以将图像作为输入和显示？

请帮我

```
 import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

 public class AddEditCountry extends Activity {

 private long rowID; 
 private EditText nameEt;
 private EditText capEt;
 private EditText codeEt;

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.add_country);

      nameEt = (EditText) findViewById(R.id.nameEdit);
      capEt = (EditText) findViewById(R.id.capEdit);
      codeEt = (EditText) findViewById(R.id.codeEdit);

      Bundle extras = getIntent().getExtras(); 

      if (extras != null)
      {
         rowID = extras.getLong("row_id");
         nameEt.setText(extras.getString("name"));  
         capEt.setText(extras.getString("cap"));  
         codeEt.setText(extras.getString("code"));  
      }

      Button saveButton =(Button) findViewById(R.id.saveBtn);
      saveButton.setOnClickListener(new OnClickListener() {

          public void onClick(View v) 
          {
             if (nameEt.getText().length() != 0)
             {
                AsyncTask saveContactTask = 
                   new AsyncTask() 
                   {
                      @Override
                      protected Object doInBackground(Object... params) 
                      {
                         saveContact();
                         return null;
                      }

                      @Override
                      protected void onPostExecute(Object result) 
                      {
                         finish();
                      }
                   }; 

                saveContactTask.execute((Object[]) null); 
             }

             else
             {
                AlertDialog.Builder alert = new  
  AlertDialog.Builder(AddEditCountry.this);
                alert.setTitle(R.string.errorTitle); 
                alert.setMessage(R.string.errorMessage);
                alert.setPositiveButton(R.string.errorButton, null); 
                alert.show();
             }
          } 
     });
   }

   private void saveContact() 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(this);

      if (getIntent().getExtras() == null)
      {
          dbConnector.insertContact(nameEt.getText().toString(),
                  capEt.getText().toString(),
                  codeEt.getText().toString());
      }
      else
      {
         dbConnector.updateContact(rowID,
            nameEt.getText().toString(),
            capEt.getText().toString(), 
            codeEt.getText().toString());
      }
   }
}

                import android.os.AsyncTask;
 import android.os.Bundle;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.CursorAdapter;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;

 public class CountryList extends ListActivity {

 public static final String ROW_ID = "row_id";
 private ListView conListView;
 private CursorAdapter conAdapter;

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    conListView=getListView();
    conListView.setOnItemClickListener(viewConListener);

    // map each name to a TextView
    String[] from = new String[] { "name" };
    int[] to = new int[] { R.id.countryTextView };
    conAdapter = new SimpleCursorAdapter(CountryList.this, R.layout.country_list,  
   null, from, to);
    setListAdapter(conAdapter); // set adapter
 }

 @Override
 protected void onResume() 
 {
   super.onResume();  
   new GetContacts().execute((Object[]) null);
 } 

  @Override
 protected void onStop() 
  {
   Cursor cursor = conAdapter.getCursor();

   if (cursor != null) 
      cursor.deactivate();

   conAdapter.changeCursor(null);
    super.onStop();
 }    

 private class GetContacts extends AsyncTask 
 {
   DatabaseConnector dbConnector = new DatabaseConnector(CountryList.this);

   @Override
   protected Cursor doInBackground(Object... params)
   {
      dbConnector.open();
      return dbConnector.getAllContacts(); 
   } 

   @Override
   protected void onPostExecute(Cursor result)
   {
      conAdapter.changeCursor(result); // set the adapter's Cursor
      dbConnector.close();
   } 
} 

 @Override
 public boolean onCreateOptionsMenu(Menu menu) 
{
   super.onCreateOptionsMenu(menu);
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.country_menu, menu);
   return true;
 }   

 @Override
 public boolean onOptionsItemSelected(MenuItem item) 
 {
    Intent addContact = new Intent(CountryList.this, AddEditCountry.class);
   startActivity(addContact);
   return super.onOptionsItemSelected(item);
}

OnItemClickListener viewConListener = new OnItemClickListener() 
{
   public void onItemClick(AdapterView arg0, View arg1, int arg2,long arg3) 
   {         
      Intent viewCon = new Intent(CountryList.this, ViewCountry.class);
      viewCon.putExtra(ROW_ID, arg3);
      startActivity(viewCon);
   }
};    

 }

         import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
  import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.widget.TextView;

 public class ViewCountry extends Activity {

   private long rowID;
   private TextView nameTv;
   private TextView capTv;
   private TextView codeTv; 

   @Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.view_country);

      setUpViews();
      Bundle extras = getIntent().getExtras();
      rowID = extras.getLong(CountryList.ROW_ID); 
   }

   private void setUpViews() {
       nameTv = (TextView) findViewById(R.id.nameText);
       capTv = (TextView) findViewById(R.id.capText);
       codeTv = (TextView) findViewById(R.id.codeText);
   }

   @Override
   protected void onResume()
   {
      super.onResume();
      new LoadContacts().execute(rowID);
   } 

   private class LoadContacts extends AsyncTask 
   {
      DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

      @Override
      protected Cursor doInBackground(Long... params)
      {
         dbConnector.open();
         return dbConnector.getOneContact(params[0]);
      } 

      @Override
      protected void onPostExecute(Cursor result)
      {
         super.onPostExecute(result);

         result.moveToFirst();
         // get the column index for each data item
         int nameIndex = result.getColumnIndex("name");
         int capIndex = result.getColumnIndex("cap");
         int codeIndex = result.getColumnIndex("code");

         nameTv.setText(result.getString(nameIndex));
         capTv.setText(result.getString(capIndex));
         codeTv.setText(result.getString(codeIndex));

         result.close();
         dbConnector.close();
      }
   } 

   @Override
   public boolean onCreateOptionsMenu(Menu menu) 
   {
      super.onCreateOptionsMenu(menu);
      MenuInflater inflater = getMenuInflater();
      inflater.inflate(R.menu.view_country_menu, menu);
      return true;
   }

   @Override
   public boolean onOptionsItemSelected(MenuItem item) 
   {
      switch (item.getItemId())
      {
         case R.id.editItem:
            Intent addEditContact =
               new Intent(this, AddEditCountry.class);

            addEditContact.putExtra(CountryList.ROW_ID, rowID);
            addEditContact.putExtra("name", nameTv.getText());
            addEditContact.putExtra("cap", capTv.getText());
            addEditContact.putExtra("code", codeTv.getText());
            startActivity(addEditContact); 
            return true;

         case R.id.deleteItem:
            deleteContact();
            return true;

         default:
            return super.onOptionsItemSelected(item);
      } 
   }

   private void deleteContact()
   {

      AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

      alert.setTitle(R.string.confirmTitle); 
      alert.setMessage(R.string.confirmMessage); 

      alert.setPositiveButton(R.string.delete_btn,
         new DialogInterface.OnClickListener()
         {
            public void onClick(DialogInterface dialog, int button)
            {
               final DatabaseConnector dbConnector = 
                  new DatabaseConnector(ViewCountry.this);

               AsyncTask deleteTask =
                  new AsyncTask()
                  {
                     @Override
                     protected Object doInBackground(Long... params)
                     {
                        dbConnector.deleteContact(params[0]); 
                        return null;
                     } 

                     @Override
                     protected void onPostExecute(Object result)
                     {
                        finish(); 
                     }
                  };

               deleteTask.execute(new Long[] { rowID });               
            }
         }
      );

      alert.setNegativeButton(R.string.cancel_btn, null).show();
   }
}

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

  public class DatabaseConnector {

private static final String DB_NAME = "WorldCountries";
private SQLiteDatabase database;
private DatabaseOpenHelper dbOpenHelper;

public DatabaseConnector(Context context) {
    dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
}

   public void open() throws SQLException 
   {
      //open database in reading/writing mode
      database = dbOpenHelper.getWritableDatabase();
   } 

   public void close() 
   {
      if (database != null)
         database.close();
   }       

   public void insertContact(String name, String cap, String code) 
           {
              ContentValues newCon = new ContentValues();
              newCon.put("name", name);
              newCon.put("cap", cap);
              newCon.put("code", code);

              open();
              database.insert("country", null, newCon);
              close();
           }

           public void updateContact(long id, String name, String 
       cap,String code) 
           {
              ContentValues editCon = new ContentValues();
              editCon.put("name", name);
              editCon.put("cap", cap);
              editCon.put("code", code);

              open();
              database.update("country", editCon, "_id=" + id, null);
              close();
           }

           public Cursor getAllContacts() 
           {
              return database.query("country", new String[] {"_id",  
         "name"}, 
                 null, null, null, null, "name");
           }

           public Cursor getOneContact(long id) 
           {
              return database.query("country", null, "_id=" + id, null,   
     null, null, null);
           }

           public void deleteContact(long id) 
           {
              open(); 
              database.delete("country", "_id=" + id, null);
              close();
           }
 }

              import android.content.Context;
 import android.database.sqlite.SQLiteDatabase;
 import android.database.sqlite.SQLiteDatabase.CursorFactory;
   import android.database.sqlite.SQLiteOpenHelper;

 public class DatabaseOpenHelper extends SQLiteOpenHelper {

public DatabaseOpenHelper(Context context, String name,
        CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    String createQuery = "CREATE TABLE country (_id integer primary key  
    autoincrement,name, cap, code);";                 
    db.execSQL(createQuery);        
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:47:29.653

您可以轻松地`BLOB`在 sql 中添加类型字段，并像字节集一样放置图像：

```
//while writing to db:
ByteArrayOutputStream outStr = new ByteArrayOutputStream();
image.compress(CompressFormat.PNG, 100, outStr);
byte[] blob = outStr.toByteArray();

contentValues.put("image", blob);

//while reading from cursor:
byte[] blob = cursor.getBlob("image");
Bitmap image = BitmapFactory.decodeByteArray(blob, 0, blob.length); 
```

# modx - 将用户分配到组 modx

> ID：13840505
> 
> 赞同：1
> 
> 时间：2012-12-12T13:06:34.230
> 
> 标签：modx, modx-revolution

如何将新创建的用户分配给 modx **Programmaticaly**中的特定组？下面是我的代码

```
if(isset($_POST) && count($_POST)){
  $oUser = $modx->newObject('modUser');
  $oUser->set('username', "test");
  //$oUser->set('password', "test");

  $oProfile = $modx->newObject('modUserProfile');
  $oProfile->set('fullname', $_POST['fname']);
  $oProfile->set('email', $_POST['email']);
  $oUser->addOne($oProfile);
  if($oUser->save()===false){
    echo "Error";
  }else
    echo "Done";
} 
```

我用谷歌搜索，但我发现的只是图形教程如何创建组和编辑用户然后分配角色，如果你知道任何教程，那么它也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:00:28.493

这是我一直在做的事情，这是一个在用户注册后触发的 posthook 片段[并且用户被创建]

```
<?php
$specialty = $hook->getValue('specialty');
$country =  strtolower($hook->getValue('excountry'));
$username = $hook->getValue('username');
$staff = $hook->getValue('staff-or-resident'); //Staff | Resident

$joingroup = '';
$joinrole = '';
$blockuser = 'false';

switch ($specialty){

    case 'Other' :
        $joingroup = 15; // Other 
        $joinrole = 1; //member
        $blockuser = 'true';
        break;

    // there are about 15 different groups and roles here... 

    default :
        $joingroup = '0'; // none
        $joinrole = '0'; // none 
        break;  
}

if($joingroup > 0 && $joinrole > 0){
    $user = $modx->getObject('modUser', array('username'=>$username));
    $internalkey = $user->get('id');
    $profile = $user->getOne('Profile',array('internalKey'=>$internalkey));

    $user->joinGroup($joingroup, $joinrole);

    if($blockuser == 'true'){ //block user if they belong to the "other" group
        $profile->set('blocked',1);
    }

    if(!$user->save()){
        return false;
    };
}

return true; 
```

关键是：$user->joinGroup($joingroup, $joinrole); 其中 joingroup 是组 ID ~ 或名称，而 joinrole 是角色 ID ~ 或名称。它记录在这里：[http](http://api.modx.com/revolution/2.1/_model_modx_moduser.class.html#%5CmodUser::joinGroup) ://api.modx.com/revolution/2.1/_model_modx_moduser.class.html#%5CmodUser::joinGroup ()

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T15:47:52.847

在 revo > 2.2 中创建/编辑某些内容的最佳方法是使用“基于类的处理器” - [https://www.markhamstra.com/modx-blog/2012/2/getting-started-with-class-based- processors-2.2/](https://www.markhamstra.com/modx-blog/2012/2/getting-started-with-class-based-processors-2.2/)添加用户到组使用这个处理器[https://github.com/modxcms/revolution/blob/develop/core/model/modx/processors/security/user/update.class.php](https://github.com/modxcms/revolution/blob/develop/core/model/modx/processors/security/user/update.class.php)这个 - [http： //rtfm.modx.com/display/revolution20/Using+runProcessor](http://rtfm.modx.com/display/revolution20/Using+runProcessor)

```
$param = array(
    'id' => 1, // user id
    'groups' => array(
        array(
            "usergroup" => 1,
            "name" => "Administrator",
            "member" => 1,
            "role" => 2,
            "rolename" => "Super User",
            "primary_group" => true,
            "rank" => 0,
            "menu" => null
        ),
        array( .... )
    )
);

$response = $modx->runProcessor('security/user/update',$param );
if ($response->isError()) {
    return $response->getMessage();
} 
```

# function - 为什么光标不在同一个地方？

> ID：13840509
> 
> 赞同：1
> 
> 时间：2012-12-12T13:06:45.667
> 
> 标签：function, dictionary, vim, text-cursor

我有一个非常奇怪的问题，在尝试了整个早上之后我都无法解决。

这是我的功能和映射：

```
nnoremap ,zz :call SwapAW("2-2","5")<CR>
nnoremap ,zc :call SwapAW("2-2","5")<CR> 

function! SwapAW(keyw,number)
  let li = line('.')
  let co = col('.')  

 exe "call cursor(li,co)" 
 let linew= line('.')
 let conew= col('.')
 echo linew conew
endfunction 
```

,zc --> 向右移动光标
,zz --> 光标停留在原处

我更改了所有内容，但无法找出为什么光标在这两种情况下都不会停留在原位。
我将 pe 映射从 ,zc 更改为 ,zd 并将 ,zz 更改为 ,zw （也尝试过其他人）并将leaderkey从更改`,`为`\`，并尝试交换两条映射线。没有什么变化。发生了什么？我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T14:37:01.170

您的映射中有一个尾随`<Space>`字符（在 之后）。*在*函数调用之后移动光标。`,zc``<CR>`

 *对于映射，必须小心隐藏字符。`<Space>`因此，当您实际需要包含一个特殊形式时，建议（有时，例如在映射的开头，有必要）按字面意思编写特殊形式。

* * *

我的[ShowTrailingWhitespace 插件](http://www.vim.org/scripts/script.php?script_id=3966)将突出显示那些尾随空格和制表符，因为许多代码指南不赞成它们。插件页面还包含指向替代品的链接。*

# ios - 集成和使用 W3i iOS Advertiser SDK 来宣传我们的 iOS 应用程序

> ID：13840510
> 
> 赞同：0
> 
> 时间：2012-12-12T13:06:52.827
> 
> 标签：ios, ads

我在 iOS 应用程序中集成 W3i Advertiser SDK，但应用程序在以下行崩溃。

```
 [[W3iAdvertiserSdk sharedConnector] connectWithAppID:W3I_APP_ID]; 
```

这是例外：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryI W3iPublisherJSONRepresentation]: unrecognized selector sent to instance 0xa1d7520'
*** First throw call stack:
(0x29d3012 0x23fae7e 0x2a5e4bd 0x29c2bbc 0x29c294e 0x16af7a 0x3e25 0xcd57b7 0xcd5da7 0xcd6fab 0xce8315 0xce924b 0xcdacf8 0x2903df9 0x2903ad0 0x2948bf5 0x2948962 0x2979bb6 0x2978f44 0x2978e1b 0xcd67da 0xcd865c 0x2d08d 0x26c5)
libc++abi.dylib: terminate called throwing an exception 
```

我搜索了很多，但除了 w3i 的官方指南外，没有与 w3i 集成相关的网络信息和它的使用。 [https://associate.w3i.com/integration/W3i_iOS_Advertiser_SDK_Integration_Guide1.htm](https://associate.w3i.com/integration/W3i_iOS_Advertiser_SDK_Integration_Guide1.htm)

## [https://associate.w3i.com/integration/index.html](https://associate.w3i.com/integration/index.html)

## 以下是我正在遵循的步骤：

**Step1** : 从 W3i 下载 SDK ![在此处输入图像描述](../Images/2987b2a5676afd3ea8fcc09f80cb14d2.png)

**Step2** : 将 W3iAdvertiserSdk-3.2.0 文件夹拖入项目文件夹 ![在此处输入图像描述](../Images/b0fbaf9c67355c20af09f8d06500e12d.png)

**第3 步**添加指向以下框架的链接（如果尚不存在）：

*   AdSupport.framework
*   UIKit.framework
*   基础框架
*   CoreGraphics.framework

**第 4步：**添加到您的 AppDelegate.m 文件中，#import "W3iAdvertiserSdk.h"

如果我在上面的集成之后运行应用程序，那么应用程序运行良好，没有任何错误，但是当我调用 W3iAdvertiser 的方法来连接应用程序时，它会抛出我已经在上面发布的异常。

```
// add this line to application's didFinishLaunchingWithOptions method
[[W3iAdvertiserSdk sharedConnector] connectWithAppID:W3I_APP_ID];  //appId created at w3i

 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSDictionaryI W3iPublisherJSONRepresentation]: unrecognized selector sent to instance 0xa1d7520'
*** First throw call stack:
(0x29d3012 0x23fae7e 0x2a5e4bd 0x29c2bbc 0x29c294e 0x16af7a 0x3e25 0xcd57b7 0xcd5da7 0xcd6fab 0xce8315 0xce924b 0xcdacf8 0x2903df9 0x2903ad0 0x2948bf5 0x2948962 0x2979bb6 0x2978f44 0x2978e1b 0xcd67da 0xcd865c 0x2d08d 0x26c5)
libc++abi.dylib: terminate called throwing an exception 
```

谁能指导我哪里出错了，如何使用 SDK 的功能将 App 与 w3i 连接以通过 w3i 宣传我们的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:11:07.527

您还需要执行此步骤：

1.  在目标的构建设置中将 -ObjC 添加到其他链接器标志。这将允许“选项 1”不会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T17:00:46.307

有两种方法可以将应用程序与 w3i 连接：

方案1：集成W3i-iOS-SDK，在应用启动时调用其方法“connectWithAppId”。

选项 2：在应用程序启动时调用 W3i “appWasRun” API

第一个选项对我不起作用，但 Option2 非常简单并且工作正常。

这是API的格式及其参数：

*`http://api.w3i.com/PublicServices/MobileTrackingApiRestV1.svc/AppWasRun?AppId={APPID}&clientIp={CLIENTIP}&iOSIDFA={advertisingIdentifier}&iOSUDID={IOSUDID}&iOSOpenUDID={IOSOpenUDID}&iOSMD5WLANMAC={iOSMD5WLANMAC}&iOSSha1HashedMac={iOSSha1HashedMac}`*

请求类型：GET

必需参数：APPID（由 W3I 生成）和至少一个标识符（所有参数均由 W3i 首选）

我只使用了 OpenUDID，它运行良好。

```
http://api.w3i.com/PublicServices/MobileTrackingApiRestV1.svc/AppWasRun?AppId=W3i_APP_ID&iOSOpenUDID=OPEN_UDID 
```

有关更多信息，请查看以下链接。

[https://sites.google.com/site/w3ideveloperscom/ios/iOSAFPP/advapi](https://sites.google.com/site/w3ideveloperscom/ios/iOSAFPP/advapi)

[https://associate.w3i.com/integration/Device_Identifiers.htm](https://associate.w3i.com/integration/Device_Identifiers.htm)

希望它会在未来对其他人有所帮助:)

# windows-phone-7 - Windows 8 中是否有类似 Windows Phone 的“用户空闲检测”？

> ID：13840512
> 
> 赞同：2
> 
> 时间：2012-12-12T13:06:58.000
> 
> 标签：windows-phone-7, windows-8, windows-runtime, windows-phone-8

当我的应用程序向用户显示数据并且他们不太可能与屏幕交互时，我在 Windows Phone 7 和 8 上使用了以下代码来禁用用户空闲检测，例如屏幕需要保持打开的食谱应用程序：

[http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/microsoft.phone.shell.phoneapplicationservice.useridledetectionmode(v=vs.92).aspx)

有谁知道是否有类似的可用于 Windows 8 应用程序？我的平板电脑应用程序有相同的要求来禁用屏幕关闭。我还没有找到任何东西:-(

非常感谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T15:25:22.590

为此，您应该使用[DisplayRequest](http://msdn.microsoft.com/en-us/library/windows/apps/br241816.aspx)类，特别是[DisplayRequest.RequestActive 。](http://msdn.microsoft.com/en-us/library/windows/apps/windows.system.display.displayrequest.requestactive.aspx)您还必须记住在完成后调用 DisplayRequest.RequestRelease 以允许显示器休眠，例如，如果您没有查看食谱，或者您在菜单屏幕等。

# asp.net - 从url字符串获取参数

> ID：13840515
> 
> 赞同：1
> 
> 时间：2012-12-12T13:07:01.777
> 
> 标签：asp.net

如果我有一个 URL 但作为一个字符串，例如`www.example.com?q=1234&h=4567`我如何选择例如“q”

我正在从数据库中获取 url，所以我不能使用`request.querystring("q")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:12:43.290

您可以使用[**HttpUtility.ParseQueryString**](http://msdn.microsoft.com/en-us/library/ms150046.aspx)：

```
string url = new Uri("http://www.example.com?q=1234&h=4567").Query;
System.Collections.Specialized.NameValueCollection nvc = System.Web.HttpUtility.ParseQueryString(url);
foreach (string key in nvc.AllKeys)
{
     // ...
} 
```

（请注意，我已将“http”添加到 url，否则您无法创建`Uri`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:13:44.880

我会尝试：

```
HttpUtility.ParseQueryString(new Uri("http://www.example.com?q=1234&h=4567").Query).Get("q") 
```

# javascript - 如何在 JavaScript 中找到我到已知位置的距离

> ID：13840516
> 
> 赞同：17
> 
> 时间：2012-12-12T13:07:05.423
> 
> 标签：javascript, geolocation, gps, distance, latitude-longitude

在浏览器中使用 JavaScript，如何确定从我当前位置到另一个我有纬度和经度的位置的距离？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-12T13:37:48.653

如果您的代码在浏览器中运行，您可以使用 HTML5 地理定位 API：

```
window.navigator.geolocation.getCurrentPosition(function(pos) { 
  console.log(pos); 
  var lat = pos.coords.latitude;
  var lon = pos.coords.longitude;
}) 
```

一旦您知道当前位置和“目标”的位置，您就可以按照这个问题中记录的方式计算它们之间的距离：[计算两个经纬度点之间的距离？（Haversine 公式）](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)。

所以完整的脚本变成了：

```
function distance(lon1, lat1, lon2, lat2) {
  var R = 6371; // Radius of the earth in km
  var dLat = (lat2-lat1).toRad();  // Javascript functions in radians
  var dLon = (lon2-lon1).toRad(); 
  var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
          Math.sin(dLon/2) * Math.sin(dLon/2); 
  var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
  var d = R * c; // Distance in km
  return d;
}

/** Converts numeric degrees to radians */
if (typeof(Number.prototype.toRad) === "undefined") {
  Number.prototype.toRad = function() {
    return this * Math.PI / 180;
  }
}

window.navigator.geolocation.getCurrentPosition(function(pos) {
  console.log(pos); 
  console.log(
    distance(pos.coords.longitude, pos.coords.latitude, 42.37, 71.03)
  ); 
}); 
```

显然，我现在距离马萨诸塞州波士顿市中心 6643 米（这是硬编码的第二个位置）。

有关更多信息，请参阅这些链接：

*   [http://html5demos.com/geo](http://html5demos.com/geo)
*   [http://diveintohtml5.info/geolocation.html](http://diveintohtml5.info/geolocation.html)
*   [计算两个经纬度点之间的距离？（Haversine 公式）](https://stackoverflow.com/questions/27928/how-do-i-calculate-distance-between-two-latitude-longitude-points)
*   [toRad() Javascript 函数抛出错误](https://stackoverflow.com/questions/5260423/torad-javascript-function-throwing-error)

# json - 应用程序/json内容类型请求的Restful WCF POST问题

> ID：13840519
> 
> 赞同：1
> 
> 时间：2012-12-12T13:07:12.650
> 
> 标签：json, wcf, post, wcf-rest, bad-request

我已经使用以下 POST “操作”配置了 RESTful WCF：

```
[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/Test", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Json)]
void PostTest(Stream stream); 
```

在我的 web.config 中，我配置了以下内容：

```
<service name="MyTest.TestSvc" behaviorConfiguration="MyTest.TestBehavior" >
    <endpoint address="" behaviorConfiguration="MyBehavior" binding="webHttpBinding" contract="MyTest.ITestSvc"/>
     <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
</service>

<endpointBehaviors>
    <behavior name="MyBehavior">
        <webHttp />
    </behavior>
</endpointBehaviors>

<serviceBehaviors>
    <behavior name="MyTest.TestBehavior">
        <serviceMetadata httpGetEnabled="true" />
        <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
</serviceBehaviors> 
```

**当我使用“text/plain”**或**“json”**发送 POST 消息时，一切正常。但是，当我尝试使用 **ContentType = "application/json"**发送 POST 消息时， 它失败并显示以下消息： **远程服务器返回错误：（400）错误请求**

我找到的唯一解决方案是定义工厂类：**System.ServiceModel.Activation.WebServiceHostFactory** int Svc 定义标记。

我在以下链接中找到了这个解决方案： [Send JSON to WCF 3.5 using Ajax](https://stackoverflow.com/questions/6617387/send-json-to-wcf-3-5-using-ajax)

据我了解，仅当您不想编辑 web.config 时，定义 WebServiceHostFactory 才有用。

如何在不定义 WebServiceHostFactory 的情况下使其工作？

请注意，我成功获得了“json”内容类型的 POST 消息，但没有获得“application/json”内容类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:51:26.787

问题是要使用原始编程模型（使用`Stream`参数），您需要告诉 WCF 不要尝试将请求理解为 JSON，而只需将原始请求正文传递给参数。您可以使用`WebContentTypeMapper`. [http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2008/04/17/wcf-raw-programming-model-receiving-arbitrary-data.aspx)上的帖子显示了如何做到这一点。工厂的解决方案之所以有效，是因为它在创建端点时会这样做。

# php - SQL 查询以按列中的空值计算分组连接表

> ID：13840521
> 
> 赞同：1
> 
> 时间：2012-12-12T13:07:18.333
> 
> 标签：php, mysql, sql, database, join

我有 3 张桌子`products`和.`stock``purchases`

`Puchases`有一个`primary key`。`purchaseID`

我的`products`表有一个`primary key`of`productID`然后列，其中包含有关产品的详细信息。

我的`stock`桌子上有一个of`primary key`和另一个of 。`framenumber``foreign key``productID``foriegn key``purchaseID`

并非所有产品都有库存。

我想和库存表在`join`最后有一行，它计算列中空值的数量，它代表我有多少库存。`prodcuts``productID``purchaseID`

我已经尝试了很多，`queries`但似乎总是想出`stock`表格中的条目总数或`subqueries`没有正确加入。

我尝试过的一些事情

```
SELECT * , COUNT( * ) AS Count
FROM Products
LEFT JOIN Stock ON Products.productID = Stock.productID
WHERE Stock.OrderID IS NULL AND Stock.framenumber IS NOT NULL
GROUP BY Products.productID 
```

只是给我按productID分组的所有库存对象的计数，而不是加入所有产品

架构

```
CREATE TABLE BikeStock (

FrameNumber VARCHAR(10) PRIMARY KEY,
BikeCode VARCHAR(40),
OrderID INT,
FOREIGN KEY (BikeCode) REFERENCES Bike(BikeCode),
FOREIGN KEY (OrderID) REFERENCES Purchase(OrderID)
);

CREATE TABLE Bike (

BikeCode VARCHAR (40) PRIMARY KEY,
Manufacturer VARCHAR (30),
Model VARCHAR (30),
SubType VARCHAR (30),
Year SMALLINT,
FrameMaterial VARCHAR (20),
Description TEXT,
Gender VARCHAR (6),
Type VARCHAR (20),
Price DECIMAL (11,2)
);

CREATE TABLE Purchase (

DateOfPurchase DATETIME,
OrderID INT NOT NULL AUTO_INCREMENT, 
PRIMARY KEY(OrderID),
CustomerID INT,
FOREIGN KEY (CustomerID) REFERENCES Customer(CustomerID)

); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:25:01.993

```
SELECT Products.productID , SUM( 
case 
   when  (Stock.OrderID IS NULL AND Stock.framenumber IS NOT NULL) 
      then 1 
      else 0 
end case
) AS Count
FROM Products
LEFT JOIN Stock ON Products.productID = Stock.productID
GROUP BY Products.productID 
```

# asp.net-mvc-3 - 在 ASP.NET MVC3 中使用 pdf.js

> ID：13840524
> 
> 赞同：8
> 
> 时间：2012-12-12T13:07:26.810
> 
> 标签：asp.net-mvc-3, pdf, pdf-viewer, pdf.js

我正在查看 github 上的 PDF.js 项目并查看我提出的基本演示（整个视图）：

```
@{
    ViewBag.Title = "GetPDFLetter";
    Layout = null;
}

<!doctype html>
<html>
 <head>
        <title>PDF.JS TEST</title>
        <!-- PDF.js-specific -->
        <script src="@Url.Content("~/Scripts/jquery-1.8.2.min.js")" type="text/javascript"></script>
     <script type="text/javascript" src="@Url.Content("~/PDFScripts/pdf.js")"> </script>

     <script type="text/javascript" src="@Url.Content("~/PDFScripts/core.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/util.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/api.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/canvas.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/obj.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/function.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/charsets.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/cidmaps.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/colorspace.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/crypto.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/evaluator.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/fonts.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/glyphlist.js")"> </script>>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/image.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/metrics.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/parser.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/pattern.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/stream.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/worker.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/jpg.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/jpx.js")"> </script>
  <script type="text/javascript" src="@Url.Content("~/PDFScripts/jbig2.js")"> </script>

       <script type="text/javascript">
           // Specify the main script used to create a new PDF.JS web worker.
           // In production, change this to point to the combined `pdf.js` file.
           var url = '@Url.Content("~/PDFScripts/worker_loader.js")';
           PDFJS.workerSrc = url;
  </script>
 </head>  

 <div>
    <canvas id="the-canvas" style="border:1px solid black"></canvas>
  </div>

    <script type="text/javascript">

        $(document).ready(function () {

            /* -*- Mode: Java; tab-width: 2; indent-tabs-mode: nil; c-basic-offset: 2 -*- */
            /* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */

            //
            // See README for overview
            //

            'use strict';

            //
            // Fetch the PDF document from the URL using promices
            //
            PDFJS.getDocument('helloworld.pdf').then(function (pdf) {
                // Using promise to fetch the page
                pdf.getPage(1).then(function (page) {
                    var scale = 1.5;
                    var viewport = page.getViewport(scale);

                    //
                    // Prepare canvas using PDF page dimensions
                    //
                    var canvas = document.getElementById('the-canvas');
                    var context = canvas.getContext('2d');
                    canvas.height = viewport.height;
                    canvas.width = viewport.width;

                    //
                    // Render PDF page into canvas context
                    //
                    var renderContext = {
                        canvasContext: context,
                        viewport: viewport
                    };
                    page.render(renderContext);
                });
            });

        });
    </script> 
</html> 
```

该文件`helloworld.pdf`与视图在同一个文件夹中，但是当我运行项目时，什么都没有渲染，只是一个小矩形。我错过了什么吗？有什么特别的考虑吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T12:33:47.913

最终想通了。PDF.js 是一个多么棒的库。

我冒昧地[使用 PDF.js 创建了一个示例 MVC3 项目](https://onedrive.live.com/redir?resid=EE97D7BBF7088816%21164)。它遵循了 github 上 90% 的 PDF.js 演示，除了在将 PDF 文件路径分配给查看器方面进行了微小的、不言自明的（在代码中的注释中解释）更改。

# android - 不匹配的输入'结果期望 RPAREN：运行 jython 脚本时

> ID：13840526
> 
> 赞同：4
> 
> 时间：2012-12-12T13:07:36.207
> 
> 标签：android, testing, jython, monkeyrunner

我一直在尝试运行一个 jython 脚本，它安装一个包并打开一个活动，然后拍摄它的屏幕截图，最后将它保存在一个文件中。我正在使用以下代码来执行此操作：

```
 from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
device = MonkeyRunner.waitForConnection()
device.installPackage('F:\jind\Example.apk')
package= 'com.android.example'
activity= 'com.android.example.main_activity'
runComponent= package + '/' + activity
device.startActivity(component=runComponent)
device.press('KEYCODE_MENU', MonkeyDevice.DOWN_AND_UP)
result=device.takeSnapshot()
result.writeToFile('F:\jind\lk.png','png') 
```

运行脚本后。writeToFile() 给出错误说'不匹配的输入'结果'期望 RPAREN

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:33:14.347

修复丢失的')'：

```
device.press() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T05:35:33.160

RPAREN 错误是由于`result.writeToFile('F:\jind\lk.png','png')`. 这是因为转义字符。改用`result.writeToFile('F:\\jind\\lk.png','png')`转义“\”。希望它会奏效。

# tfs - TFS2012 升级 - 构建有时会因 TF215097“DynamicActivity”错误而失败

> ID：13840528
> 
> 赞同：4
> 
> 时间：2012-12-12T13:07:38.053
> 
> 标签：tfs, msbuild

我们使用一些经过调整的构建过程模板，为 TFS2010 开发用于我们所有的构建，但这些 BPT*没有*使用任何自定义活动。我们最近升级到 TFS2012，并在升级期间根据这些[说明](http://blogs.msdn.com/b/jpricket/archive/2012/10/24/upgrading-your-build-definitions-from-tfs2010-to-tfs2012.aspx?Redirected=true&CommentPosted=true#commentmessage)转换了我们的 BPT 。

这在大多数情况下都可以正常工作，但是会定期咳嗽：

> TF215097：为构建定义 \Project1 (Dev10)\Simple 初始化构建时出错 - 手动：为根活动的参数提供的值不满足根活动的要求：“DynamicActivity”：需要类型为“的输入参数值” Microsoft.TeamFoundation.Build.Workflow.Activities.BuildSettings' 用于名为“BuildSettings”的参数。

任何日志中都没有任何内容，我无法以任何方式将其视为根本原因。唯一的解决方法是重新启动构建控制器，此时错误会消失几个小时。当我取消注册并重新注册控制器时，问题消失了大约一天。

这里重要的是，*这些构建过程模板确实可以在 TFS2012 上工作*，但是它们突然停止工作，我无法确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T16:08:23.463

事实证明，一些构建仍在使用旧的 2010 风格的构建过程模板。每当有人将其中一个构建排入队列时，整个构建控制器就会开始吓坏了。通过摆脱那些 BPT，我们解决了这个问题。

# qt4 - QT 创建者无法打开音频示例

> ID：13840529
> 
> 赞同：0
> 
> 时间：2012-12-12T13:07:39.630
> 
> 标签：qt4, demo, missing-data

**QT creator 不会打开多媒体示例。**当我尝试打开一个示例时，我收到一个带有警告的弹出窗口：“您要打开的项目位于写保护位置：/”。然后我可以选择将它复制到一个目录或只是打开它。如果选择复制，它将尝试将 / 复制到所选目录并中途失败。随机挑选的非多媒体示例都有效。

经过进一步调查，整个 /usr/lib/qt4/examples/multimedia/* 目录似乎不存在。

可能与[为什么我缺少 Qt 多媒体功能有关？](https://stackoverflow.com/questions/5410170)

*编辑使其更像一个问题：* 我希望能够通过 QT creator 中的示例库以通常的方式打开示例。我是多媒体编程的新手，想尝试制作一个简单而现代的“虚拟音频电缆”版本，以了解它是如何完成的。我将不时打开和关闭示例以整理我的工作空间，所以**问题是**：我如何将示例放回它们所属的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:07:39.630

我在网上找到了示例：http: [//doc.qt.digia.com/qt/examples-multimedia.html](http://doc.qt.digia.com/qt/examples-multimedia.html) 仍然很奇怪，它没有包含在 qt4-demos 包中，而 qtcreator 期望它存在（因此会出现错误）。

# php - 为什么此查询忽略包含 USA 的字段？

> ID：13840534
> 
> 赞同：0
> 
> 时间：2012-12-12T13:07:50.080
> 
> 标签：php, sql

我知道那里有一个巫师可以回答这个问题......

我有一个列出 500 多种葡萄酒的 PHP / MySQL 数据库。使用表格，网络访问者可以按葡萄酒名称、国家、年份等搜索数据库。

我测试了两 (2) 个不同的查询。

我想使用的拒绝返回针对美国的**国家特定**搜索，但与西班牙、澳大利亚、意大利、加拿大或智利（甚至美国 - 我测试过）没有问题。

仅当用户输入恰好与美国产品匹配的**葡萄酒名称**或**年份**等时，才会显示美国。否则，它将美国视为不存在。

另一个代码（底部）返回所有美国搜索，但不搜索我需要的多个列/术语。

1.  此代码将找不到针对美国的特定国家/地区搜索

    ```
     $cob=mysql_real_escape_string($_POST['user-entry']);

    // remove the line below to prevent searching multiple terms
       $cob = '+' . str_replace(' ',' +',$cob);

      $sql = sprintf ( 
      "SELECT CSPC, Country, Producer, Wine, Year, Price,
      MATCH ( CSPC, Country, Producer, Wine, Year ) 
      AGAINST ( '&s' IN BOOLEAN MODE )  
      FROM winecellar WHERE 
      MATCH ( CSPC, Country, Producer, Wine, Year ) 
      AGAINST ( '%s' IN BOOLEAN MODE )", $cob, $cob ) . $pricerange; 
    ```

2.  此代码将找到针对美国的特定国家/地区搜索

    ```
     $cob=mysql_real_escape_string($_POST['user-entry']);

      $sql="SELECT ID, CSPC, Country, Producer, Wine, Year, Price 
      FROM winecellar WHERE
      ( CSPC LIKE '%" . $cob .  "%' 
      OR Country LIKE '%" . $cob ."%' 
      OR Producer LIKE '%" . $cob ."%' 
      OR Wine LIKE '%" . $cob ."%' 
      OR Year LIKE '%" . $cob ."%' )" . $pricerange; 
    ```

    *   MySQL 服务器版本：5.1.65-cll
    *   国家 = varchar (20)
    *   国家 = NULL 否
    *   全文索引：国家、生产商、葡萄酒、年份

所以我的问题是，是什么阻止了多术语代码（在顶部块中）将 USA 识别为有效查询？

任何帮助将不胜感激，谢谢大家。

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:26:20.423

您正在使用`FULLTEXT`索引。默认最小字长为 4。忽略三个字母的单词。 [这](http://dev.mysql.com/doc/refman/5.1/en/fulltext-fine-tuning.html)是更改默认值的参考。

# eclipse - 从 Vogella 教程启动 Eclipse 应用程序时出错

> ID：13840536
> 
> 赞同：0
> 
> 时间：2012-12-12T13:07:55.990
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我尝试将多个 Eclipse 插件转换为单个 RCP 应用程序，如 Vogellas 教程 (http://www.vogella.com/articles/EclipseRCP/article.html#plugin_creatinge4) 中所述。但是当我启动应用程序时，我收到以下错误“java.lang.RuntimeException：未找到应用程序 ID”。

我的错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:19:14.930

“未找到应用程序 ID”几乎总是意味着您缺少一些必需的插件。转至**Run Configurations**对话框，移至**Plug-ins**选项卡，然后按下**Validate Plug-ins**按钮。您将看到一个小对话框，显示未满足约束的插件的名称，这通常是因为在上述**插件**选项卡上，这些插件没有选中它们的复选框。

**插件**选项卡上的**添加所需插件**按钮通常会为您解决问题。如果这不起作用，请仔细查看列出的插件，看看是否有任何问题；也许您知道您的应用程序需要的插件根本不在列表中，因为您忘记将它添加到您的工作区或目标平台？

 **如果您仍然无法解决问题，请搜索 SO 以`[eclipse-rcp] "no application id"`获取更多调试想法。**

# wordpress - 希伯来语字符在 WP 插件中显示为问号

> ID：13840539
> 
> 赞同：1
> 
> 时间：2012-12-12T13:08:09.923
> 
> 标签：wordpress, utf-8

我正在使用一个名为 Vertical News Scroller 的 WordPress 插件。
它在英语中运行良好，但是当我用希伯来语写作时，我得到了问号。
我对其他插件没有这样的问题，或者在我的希伯来语本地化网站中通常没有这样的问题。

这个插件有一个名为`wp_scroll_news`.

为了找到该表的字符集，我运行了以下查询：

```
SELECT CCSA.character_set_name
FROM information_schema.TABLES T, information_schema.COLLATION_CHARACTER_SET_APPLICABILITY CCSA
WHERE CCSA.collation_name = T.table_collation
AND T.table_name = "wp_scroll_news" 
```

我得到了：
latin1
latin1
latin1

所以我使用了这个查询：

```
ALTER TABLE wp_scroll_news CONVERT TO CHARACTER SET utf8; 
```

然后我再次检查，这次我得到了：
latin1
latin1
UTF8

重新启动（WAMP）服务器并编写新消息后，我仍然得到问号。
我想剩下的两个 latin1 也需要更改为 UTF8。

我怎样才能做到这一点？

# php - 带有概述文本问题的 PHP ImagickDraw

> ID：13840544
> 
> 赞同：3
> 
> 时间：2012-12-12T13:08:28.817
> 
> 标签：php, imagemagick, image-manipulation, imagick

我正在学习和练习我的 Imagick 技能。

我对使用 Imagick 笔画的轮廓文本有疑问。我想在这张图片上实现一个可见的效果：一个流行的互联网模因：

![在此处输入图像描述](../Images/32cf6bb2565fe18799ed049d774d8c7a.png)

这是我到目前为止的代码：

```
$draw = new \ImagickDraw();
$outputImage = new \Imagick('meme.jpg');

$draw->setFillColor('#fff');
$draw->setFont('impact.ttf');
$draw->setFontSize(40);
$draw->setGravity(\Imagick::GRAVITY_NORTH);
$draw->setStrokeColor('#000');
$draw->setStrokeWidth(1);
$draw->setStrokeAntialias(true);
$draw->setTextAntialias(true);

$outputImage->annotateImage($draw, 0, 5, 0, 'Sample text');

$outputImage->setFormat('png');
$outputImage->writeimage('tmp/meme.png'); 
```

问题：文字笔画看起来不太好。我在 Imagick 讨论板上找到了关于第二次注释图像的提示，但没有中风。不工作。

写图前：

```
 $draw->setStrokeColor('transparent');
   $outputImage->annotateImage($draw, 0, 5, 0, 'Sample text'); 
```

任何人都可以给我一个线索吗？

**更新**
总而言之，我生成的图像如下所示：

![在此处输入图像描述](../Images/04c6408cb9a660075a7f6888b65c05e6.png)

正如你所看到的，我在使用不同的字体大小时遇到​​了 2px 笔画的一些问题。在大字体上，它看起来不错，但对于较小的字体，笔画和字体会出现一些问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:09:37.263

版本1：调整大小

![在此处输入图像描述](../Images/955bba9bc1166afa11a610541bcb578d.png)

版本 2：合成过度和调整大小

![在此处输入图像描述](../Images/44dade01293a216784dd4365c9102791.png)

版本 2 提供了更好的结果。请参阅下面的代码。根据最终大小，您需要调整字体和笔触大小，因为调整大小可能会产生不需要的效果。您也可以在不调整大小的情况下尝试版本 2。

**版本 1：调整大小**

```
$draw = new ImagickDraw();
$draw->setFillColor('#fff');
$draw->setFont('impact.ttf');
$draw->setFontSize(100); //use a large font-size
$draw->setStrokeColor('#000');
$draw->setStrokeWidth(4);
$draw->setStrokeAntialias(true);  //try with and without
$draw->setTextAntialias(true);  //try with and without
$outputImage = new Imagick();
$outputImage->newImage(1400,400, "transparent");  //transparent canvas
$outputImage->annotateImage($draw, 20, 100, 0, 'STOP ME FROM MEMEING');
$outputImage->trimImage(0); //Cut off transparent border
$outputImage->resizeImage(300,0, imagick::FILTER_CATROM, 0.9, false); //resize to final size
/*
Now you can compositve over the image
*/
//Clean up
$draw->clear();
$draw->destroy();
$outputImage->clear();
$outputImage->destroy(); 
```

**版本 2：合成过度和调整大小**

```
$draw = new ImagickDraw();
$draw->setFont('impact.ttf');
$draw->setFontSize(100); //use a large font-size
$draw->setStrokeAntialias(true);  //try with and without
$draw->setTextAntialias(true);  //try with and without

//Create text  
$draw->setFillColor('#fff');
$textOnly = new Imagick();
$textOnly->newImage(1400,400, "transparent");  /transparent canvas
$textOnly->annotateImage($draw, 21, 101, 0, 'STOP ME FROM MEMEING');  //parameters depend of stroke and text size
//Create stroke
$draw->setFillColor('#000'); //same as stroke color
$draw->setStrokeColor('#000');
$draw->setStrokeWidth(8);
$strokeImage = new Imagick();
$strokeImage->newImage(1400,400, "transparent");
$strokeImage->annotateImage($draw, 20, 100, 0, 'STOP ME FROM MEMEING');

//Composite text over stroke
$strokeImage->compositeImage($textOnly, imagick::COMPOSITE_OVER, 0, 0, Imagick::CHANNEL_ALPHA );
$strokeImage->trimImage(0);  //cut transparent border
$strokeImage->resizeImage(300,0, imagick::FILTER_CATROM, 0.9, false); //resize to final size
/*
Now you can compositve over the image
*/
//Clean up
$draw->clear();
$draw->destroy();
$strokeImage->clear();
$strokeImage->destroy();
$textOnly->clear();
$textOnly->destroy(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:34:42.193

您可以发布您的结果或更具体地说明您认为不合适的内容吗？

一种解决方案可能是首先在透明背景上创建文本（带有笔划），然后将其合成到图像上。您可以创建更大字体大小的文本并调整大小以使其在最终图像上看起来更平滑。

# php - 在打开的购物车中确认订单

> ID：13840551
> 
> 赞同：-4
> 
> 时间：2012-12-12T13:08:44.980
> 
> 标签：php, opencart

opencart 中的确认订单是如何工作的。我面临问题。当我点击确认订单时，页面没有被重定向。在文件`\upload\catalog\view\theme\default\template\checkout\confirm.tpl`和第 53 行有一个变量`$payment`. 我想知道这个变量是在哪里定义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:08:34.913

OpenCart 中的订单确认是这样工作的：

1.  在结账过程中，客户选择他喜欢的付款方式
2.  在确认选项卡上时，会在 DB 中创建一个新的临时订单
3.  点击“确认”按钮后，最后`confirm()`会调用确认订单的付款方式（在最终确认订单之前，可能会采取其他步骤，具体取决于所选的付款方式）
4.  毕竟客户被重定向到`checkout/success`页面

选择付款方式后，应定义并初始化变量 $payment，检查`catalog/controller/checkout/confirm.php`在线 382（如果未修改）。

对于 SO 来说，这不是一个问题，您应该能够自己完成代码，并且只在此处询问您可能遇到的具体问题。你的问题对 SO 来说不是一个真正的问题，也许只是在黑水中的非游泳者喊叫......

# java - 同步读取（即“接收”而不是侦听器）

> ID：13840552
> 
> 赞同：0
> 
> 时间：2012-12-12T13:08:46.400
> 
> 标签：java, glassfish, jms, synchronous

以下代码片段（独立的 Java 应用程序）永远不会在队列中找到任何消息，而使用消息侦听器实现的同一个客户端（使用 Glassfish 3.1）会：

```
ctx = new InitialContext();
connectionFactory = (ConnectionFactory) ctx.lookup("foo.Factory");

partsQueue = (Queue) ctx.lookup("foo.PartsQueue");

conn = connectionFactory.createConnection();
session = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
consumer = session.createConsumer(partsQueue);

conn.start();

Message msg = null;
int cnt = -1;
do {
    cnt++;
    msg = consumer.receiveNoWait();
} while (msg != null);

        System.out.println("cnt: " + cnt); 
```

如果我在创建消费者后使用以下代码，监听器将找到消息并成功消费它们：

```
listener = new AssemblerListener(this);
consumer.setMessageListener(listener);
System.out.println("waiting for msgs...");
conn.start(); 
```

如前所述，独立的 Java 客户端，我不想在 MDB 中同步做某事。有任何想法吗？没有找到任何提示为什么同步读取在这里不起作用。在这种情况下，使用消息侦听器不是最佳选择，因为有时我必须使用不同的过滤器读取两条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:34:52.693

这是我接收消息的方式：

```
 ActiveMQConnectionFactory activeMQConnectionFactory = new ActiveMQConnectionFactory(url);

    // Getting JMS connection from the server
    ConnectionFactory connectionFactory= activeMQConnectionFactory;

    Connection connection = connectionFactory.createConnection();

    // Creating session for sending messages
    Session session = connection.createSession(false,Session.CLIENT_ACKNOWLEDGE);

    // Getting the queue 'TESTQUEUE'
    Destination destination = session.createQueue("queue_name");

    // MessageConsumer is used for receiving (consuming) messages

    MessageConsumer consumer = session.createConsumer(destination);

    connection.start();        

    // Here we receive the message.
    // By default this call is blocking, which means it will wait
    // for a message to arrive on the queue.
    Message message= consumer.receive(500);
    while(message!= null)
    {

        // There are many types of Message and TextMessage
        // is just one of them. Producer sent us a TextMessage
        // so we must cast to it to get access to its .getText()
        // method.
        if (message instanceof TextMessage) 
        {
            TextMessage textMessage = (TextMessage) message;
       //     BytesMessage Byte

            System.out.println("Received message '"+ textMessage.getText() + "'");
        }           
        message = consumer.receive(1);
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:29:39.403

`consumer.receiveNoWait()``null`如果当时队列是空的，则返回。如果它为空，您的代码不会再次尝试接收消息。

您应该继续循环或使用`consumer.receive()`which 将阻塞直到消息可用

# javascript - 如何在文本区域中用换行符替换分词

> ID：13840553
> 
> 赞同：2
> 
> 时间：2012-12-12T13:08:46.380
> 
> 标签：javascript, jquery, textarea

当文本到达框的末尾时，浏览器会自动插入一个分词符。我想让这个“隐形”变成真实的`\n`。

这是我厌倦的：http: [//jsbin.com/uraneq/1/edit](http://jsbin.com/uraneq/1/edit)

例子： ![在此处输入图像描述](../Images/29dea318933a9e4c3631acdcb3ebbc1a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:35:10.023

`&#8203;`浏览器本身不会自动插入，因此您无法在自动损坏的文本中匹配它。

但是..您可以匹配行长以查看何时可能出现换行符（如果您使用块字体）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:37:29.660

您可以尝试对元素使用[`wrap="hard"`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-button-element.html#attr-textarea-wrap)属性。`TEXTAREA`较旧的浏览器支持`physical`具有类似含义的值`hard`（但至少在 HTML5 中无效）。

# c# - 如何从 NANT 构建文件创建 Visual Studio 解决方案和项目文件

> ID：13840558
> 
> 赞同：1
> 
> 时间：2012-12-12T13:09:19.633
> 
> 标签：c#, visual-studio, msbuild, nant, csproj

我有一个使用 NANT 构建的 C# 项目。有没有一种方便的方法来生成 VS 解决方案和项目文件以使用 Visual Studio 打开和编译这个项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:54:40.473

就在这里。无耻插件： GitHub 上[的 generate-msbuild](https://github.com/skolima/generate-msbuild)任务。它不会进行完全忠实的转换，但会创建一个 Visual Studio 解决方案，您可以在 IDE 中打开并从那里编译。此外，如果您考虑将构建从 NAnt 迁移到 MSBuild，可能会给您一个很好的起点。如果您有任何问题（或错误），请在 GitHub 页面上提问。这在几个大型项目上进行了测试，包括 CruiseControl.NET、NAnt 和 Boo，因此应该可以处理大多数场景。

此外，新的 MSBuild（从 .NET 4.0 开始）可以完成 NAnt 可以做的所有事情——大多数用户只是没有意识到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:16:49.677

不，nant（完成时）允许在构建您可以在 VS 解决方案和项目（固定文件列表）中表示的内容时具有很大的灵活性。也许您可以创建一种从构建脚本的特定子集的 nant 构建文件生成解决方案和项目文件的方法，或者记录 C# 的组装方式，但我认为这不方便，至少对于中小型解决方案而言。

幸运的是，如果有足够的最新版本的 VS，我发现将文件导入新的解决方案和项目非常方便和容易。

# asp.net-mvc - DbContext 子类中的无效对象名称错误

> ID：13840566
> 
> 赞同：0
> 
> 时间：2012-12-12T13:09:31.270
> 
> 标签：asp.net-mvc, entity-framework-4

我正在构建一个 mvc 应用程序并首先使用代码。但是当我尝试访问表时，mvc 会抛出这个错误：

```
Invalid object name 'dbo.Membro'. 
```

我的上下文是：

```
public class JethroContext : DbContext
    {
        public DbSet<Area> Areas { get; set; }
        public DbSet<BaseIgreja> BaseIgrejas { get; set; }
        public DbSet<Igreja> Igrejas { get; set; }
        public DbSet<Celula> Celulas { get; set; }
        public DbSet<Membro> Membros { get; set; }
        public DbSet<Distrito> Distritos { get; set; }
        public DbSet<Setor> Setores { get; set; }
        public DbSet<Usuario> Usuarios { get; set; }
        public DbSet<Ministerio> Ministerios { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    } 
```

在谷歌上搜索我找到了解决方案，但对我不起作用。

```
Database.SetInitializer<JethroContext>(null); 
```

**编辑我：**

会员等级

```
Public class Membro
{
    public int Id {get;set;}
    public String Name {get;set;}
    public DateTime DateCreate {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-01T15:03:59.290

无效的对象名称 'dbo...'。

我刚刚意识到我在连接字符串中选择了错误的目录。大师大错！！！

# php - 文本区域没有连续显示多于一个新行

> ID：13840567
> 
> 赞同：3
> 
> 时间：2012-12-12T13:09:38.697
> 
> 标签：php, html, mysql

我有一个将 blob 文本插入数据库的表单。

当我使用 textarea 将其插入数据库时​​，它工作正常。

例如，如果我将此文本放入 textarea 字段：

```
test

ss
f

f
f

dsdfdsf

sdfsdfsdf 
```

它将它保存到数据库中：

```
test

ss
f

f
f

dsdfdsf

sdfsdfsdf 
```

没关系，现在当我从数据库中获取数据并将其回显到 div 上时，我使用 nl2br()，div 的内容变为：

```
test

ss
f

f
f

dsdfdsf

sdfsdfsdf 
```

所以还是可以的

然而

如果我将数据库的输出回显到 textarea 中，它将变为：

```
test
ss
f
f
f
dsdfdsf
sdfsdfsdf 
```

那不是使用 nl2br，如果我使用 nl2br，则 textarea 变为：

```
test<br /><br /><br />ss<br />f<br /><br /><br /><br />f<br />f<br /><br /><br /><br /><br />dsdfdsf<br /><br /><br />sdfsdfsdf 
```

而且我想要新行，而不是（br /），您可以看到它知道应该有多少行，但是当我不使用nl2br时，它最多只能连续一行新行。

我试过用谷歌搜索，我能找到的只是人们问如何将数据库内容回显到 div，但对我来说，它适用于 div（使用 nl2br），它只是适用于 textarea ......

我还尝试为 textarea 提供 css 属性：'white-space: pre;'，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:15:19.220

`nl2br`如果要将数据输出到文本区域，则不能使用。只需输出数据（使用 htmlspecialchars）。

textarea 将看到 \n （换行符），因为 div 会看到`<br />`。

[http://jsbin.com/uzinut/1](http://jsbin.com/uzinut/1)

# c# - 最大行数 Microsoft.Office.Interop.Word.Table

> ID：13840568
> 
> 赞同：1
> 
> 时间：2012-12-12T13:09:42.153
> 
> 标签：c#, ms-word, office-interop

我正在尝试生成一个表格并将其插入到 Word 文档中，如下所示：

```
object missing = System.Reflection.Missing.Value;
var paragraph = miDoc.Paragraphs.Add(ref missing);

Microsoft.Office.Interop.Word.Table tablaEvaluacion = 
Globals.ThisDocument.Tables.Add(paragraph.Range, lstContacto.Count + 1, lstEvaluacion.Count + 3, ref missing, ref missing); 
```

但是当行数超过 63 时，这会导致异常：“ `COMException was unhandled by user code. The number must be between 1 and 63.`”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T17:05:38.873

首先 -*你 100% 确定你的意思是行吗？*正如您在下面的回答中看到的那样，我在表中插入超过 63 行没有问题，但是插入超过 63 列会导致与您描述的相同的问题。

无论如何，我已经尝试对此进行调查 - 这是我发现的：

使用谷歌：

*   在这里提出了一个类似的问题：http: [//social.msdn.microsoft.com/Forums/en-US/officegeneral/thread/662b1bf2-6067-46e5-8def-c23d86cf0549/](http://social.msdn.microsoft.com/Forums/en-US/officegeneral/thread/662b1bf2-6067-46e5-8def-c23d86cf0549/) - 似乎刚刚得出的结论是这是 Word 设置的限制 - 但 AFAIK 没有确凿的证据（阅读：对任何文档的引用）。

使用文档：

*   该[文档](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.tables.add%28v=office.14%29.aspx)在这里没有太大帮助，因为没有提到限制。

使用 dotPeek：

*   我尝试反编译该`Microsoft.Office.Interop.Word.Tables`类型，希望找到描述限制的评论 - 但没有运气。该代码只是在 Word 中使用函数调用该函数，`COM`因此异常很可能从 Word 一路冒泡，通过互操作程序集进入您的代码。

使用我自己的示例实现：

```
documentA.Tables.Add(range, 01, 64); // COMException -> "The number must be between 1 and 63."
documentA.Tables.Add(range, 01, 63); // All good
documentA.Tables.Add(range, 64, 01); // All good 
```

示例代码显示，当我尝试使用超过 63 列时，`COMException`会抛出您所指的。我正在运行带有 Interop API 版本 15 的 MS Office 2013。

使用微软 Word 2013：

*   首先使用我的示例应用程序插入一个包含 63 列的表格，然后我打开文档并要求 Word 插入另一列 - 这给了我以下错误：

![在此处输入图像描述](../Images/d39a7d0507665a383eadc65cecde6a2b.png)

所以这归结为 63 列似乎是允许插入的最大列数。

希望这有助于解决问题；）

# android - 在android中同时播放两个不同分辨率的视频？

> ID：13840571
> 
> 赞同：1
> 
> 时间：2012-12-12T13:09:51.973
> 
> 标签：android, android-video-player

我正在开发需要同时比较两个视频的应用程序。

我尝试使用两个表面视图，但它不起作用。面临的问题是当两个视频具有不同的分辨率时，两者都不会同时播放..

# javascript - 关于 chrome 全屏消息禁用

> ID：13840574
> 
> 赞同：1
> 
> 时间：2012-12-12T13:09:59.033
> 
> 标签：javascript, google-chrome

当激活 chrome 全屏模式时，我需要禁用顶部出现的全屏消息（“你已经全屏”）。

我需要通过 javascript 来完成。但它是 chrome 的默认功能之一。

谁能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:15:50.483

这是不可能的。正如您指出的那样，**它是 chrome 的默认功能之一**。

我同意麦克风的评论**你不能为了安全起见**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:18:45.203

您不可能按照这些链接的建议这样做。

[https://superuser.com/questions/398945/disable-the-youve-gone-full-screen-notification-in-chrome](https://superuser.com/questions/398945/disable-the-youve-gone-full-screen-notification-in-chrome)

[https://groups.google.com/forum/#!topic/chromebook-central/h1crbhOy-7U](https://groups.google.com/forum/#!topic/chromebook-central/h1crbhOy-7U)

另一方面，您究竟为什么要这样做？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:17:42.030

该消息是，如果您可以完全禁用它，则可能是用户偏好。我已经在使用集成浏览器的 Windows 上为自定义“层”更改此类事情做出了相当大的贡献，我可以告诉你，如果没有一些侦听器应用程序，使用 javascript 是不可能的。我们为这种不断检查某个文本文件的事情创建了一个 C# 侦听器应用程序。我们让 javascript 编辑文本文件，然后让 C# 在某些用户设置中发挥黑客的魔力。

你可以看看[Chromium](http://www.chromium.org/)，精简版的 Chrome，如果有帮助的话；）

ps：对于所有为改变用户设置而发愁的人来说，我们的客户是不会使用电脑的老人，我们的应用程序的目的是为他们做尽可能多的事情。

# awk - awk - 正则表达式

> ID：13840575
> 
> 赞同：2
> 
> 时间：2012-12-12T13:10:02.950
> 
> 标签：awk

我有两个例子：

**1.**

> $ echo "Lorem ipsum dolor sat amet" | awk '{gsub(/L[^r]r/,""); 打印}'
> 
> em ipsum dolor sat amet

**2.**

> $ echo "Loorem ipsum dolor sat amet" | awk '{gsub(/L[^r]r/,""); 打印}'
> 
> Loorem ipsum dolor sit amet

为什么第二个示例与第一个示例不同？

在第一个例子中，记录`[^r]`被视为单个字符？是因为`"o"`删了一个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:13:51.683

`L[^r]r`匹配后面跟不跟like`L`的任何**单个**字符。匹配你想要的 . 量词表示**一个或多个**不是 的字符。`r``r``Lor``Loor``L[^r]+r``+`**`r`**

 **```
$ echo "Loorem ipsum dolor sit amet" | awk '{gsub(/L[^r]+r/,""); print}'
em ipsum dolor sit amet 
```**

# c++ - 从链表中删除节点

> ID：13840591
> 
> 赞同：1
> 
> 时间：2012-12-12T13:10:59.043
> 
> 标签：c++, linked-list

我正在研究从链表中删除节点的迭代删除函数，我认为代码应该可以正常工作，它遍历列表，找到所需的节点，将头指向下一个节点并删除当前节点，但是当我测试运行它时，我得到了无限循环，请你帮我查明错误，这里是函数：

```
typedef struct E_Type * List;
struct E_Type
{
  int data;
  struct E_Type* next;
}; 
```

功能：

```
 bool erase(List & l, int data){
 List head = l; 
 if (l != 0){
    for(List current = head; current; current = current->next){
    if ( current->data == data )
       head = current->next;
       delete current;
       return true;
     }
   }
 return false;
} 
```

测试程序：

```
int main()
{
  List l = 0;
  cout << boolalpha << l->data << "went well? "<< (insert(l,73)) << endl;
  cout << boolalpha << l->data << "went well? "<< (insert(l,24)) << endl;
  print(cout,l);
  cout << boolalpha << "Is deleted 24? "<<(erase(l,24)) << endl;    
  cout << boolalpha << "Is deleted 35? "<<(erase(l,35)) << endl;
  print(cout,l);
  cout << endl;
  return 0;
} 
```

插入：

```
bool insert(List & l, int data)
{   

    List current = l;
    while(current != 0) {
        if (current->data == data)
        return false;
       current = current->next;
    }

    if (l == 0 || l->data > data){
        List new_list = new E_Type;
        new_list->data = data;
        new_list->next = l;
        l = new_list;
    return true;
    }

    else if(l->data < data){
    insert(l->next, data);
    return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:22:31.297

您还需要在 for 循环中跟踪前一个节点并执行以下操作：

```
prev->next = current->next;
delete current; 
```

您还需要处理已删除元素是列表的第一个元素的情况，在这种情况下，您需要设置`l`为`l->next`

```
 bool erase(List & l, int data){
 if (l != 0){
    for(List current = head, prev = 0; current; prev = current, current = current->next){
    if ( current->data == data )
    {
       if (prev)
       {
           prev->next = current->next;
       }
       else
       {
            l = current->next;
       }
       delete current;
       return true;

     }
   }
 return false;
} 
```

您的第一个擦除可能正在创建一个循环列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:49:05.750

正如 Andreas Brinck 已经指出的那样，您还需要更新“上一个”链接。但是，您不需要为此使用专用变量，只需使用指向指针的指针：

```
bool erase(List & l, int data){
  List *it = &l;
  while ( *it ) {
    if ( (*it)->data == data ) {
      List next = (*it)->next;
      delete *it;
      *it = next;
      return true;
     }
     it = &(*it)->next;
  }
  return false;
} 
```

这还负责处理所有“特殊情况”，例如从空列表中删除、删除列表中的第一个元素或删除列表中的最后一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:17:28.317

我们可能还需要查看您的插入方法。

有没有可能

```
current == current->next 
```

如果是这样，可能会导致无限循环。

# android - 用图形多次绘制并存储到同一个位图

> ID：13840592
> 
> 赞同：0
> 
> 时间：2012-12-12T13:10:58.427
> 
> 标签：android, actionscript-3, flash, air

我正在创建一个在 Android 上使用的简单绘图原型，用户可以在其中拖动手指在屏幕上绘制基本线条/形状等。在相同区域上绘制时我遇到了一些性能问题，一段时间后性能下降相当。

我想知道是否有任何方法可以在绘制线条之后（在触摸开始、触摸移动和触摸结束事件链之后）将新绘制的线条存储到包含其余绘图的位图中。

我已经看过了，`bitmap.merge()`但这会在混合颜色时产生问题。我只是希望将任何新的“绘图”保存在之前绘制的所有内容之上。

```
// To hold current 'drawing'
var clip:Shape = new Shape();   

// To hold past 'drawings'
var drawing:Bitmap = new Bitmap();

public function Main()
{
    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT; 

    addChild(drawing);
    addChild (clip);

    addEventListener(TouchEvent.TOUCH_BEGIN, tBegin);
    addEventListener(TouchEvent.TOUCH_MOVE, tMove);
    addEventListener(TouchEvent.TOUCH_END, tEnd);
}

private function tBegin(e:TouchEvent):void 
{
    clip.graphics.lineStyle(28,0x000000);
    clip.graphics.moveTo(mouseX, mouseY);  
}

private function tMove(e:TouchEvent):void 
{
    clip.graphics.lineTo(mouseX, mouseY);
}

private function tEnd(e:TouchEvent):void 
{
    // Save new graphics and merge with drawing
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:23:32.143

只需保持在您的剪辑形状中绘图，然后在 tEnd 上在分配给位图的 bitmapData 内绘制剪辑

```
// To hold current 'drawing'
var bmpData:BitmapData = new BitmapData (800, 800) // put here your desired size

var clip:Shape = new Shape();   

// To hold past 'drawings'
var drawing:Bitmap = new Bitmap(bmpData);

public function Main()
{
    Multitouch.inputMode = MultitouchInputMode.TOUCH_POINT; 

    addChild(drawing);
    addChild (clip);

    addEventListener(TouchEvent.TOUCH_BEGIN, tBegin);
    addEventListener(TouchEvent.TOUCH_MOVE, tMove);
    addEventListener(TouchEvent.TOUCH_END, tEnd);
}

private function tBegin(e:TouchEvent):void 
{
    clip.graphics.lineStyle(28,0x000000);
    clip.graphics.moveTo(mouseX, mouseY);  
}

private function tMove(e:TouchEvent):void 
{
    clip.graphics.lineTo(mouseX, mouseY);
}

private function tEnd(e:TouchEvent):void 
{
    // Save new graphics and merge with drawing
    bmpData.draw (clip);
    clip.graphics.clear();
} 
```

# google-api - 如何使用 php 在谷歌日历上创建活动

> ID：13840594
> 
> 赞同：2
> 
> 时间：2012-12-12T13:10:59.500
> 
> 标签：google-api, google-calendar-api

我正在尝试同步。从我的网站到**谷歌****日历** 之后的事件

用户允许我在**日历**上写字。

我正在使用 PHP，**谷歌日历 API 不是 zend framword**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:22:10.893

您是否尝试阅读参考资料？

使用 quickAdd（基于简单字符串创建事件）

[https://developers.google.com/google-apps/calendar/v3/reference/events/quickAdd](https://developers.google.com/google-apps/calendar/v3/reference/events/quickAdd)

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_CalendarService.php';

$createdEvent = $service->events->quickAdd(
    'primary',
    'Appointment at Somewhere on June 3rd 10am-10:25am');

echo $createdEvent->getId(); 
```

或使用插入

[https://developers.google.com/google-apps/calendar/v3/reference/events/insert](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_CalendarService.php';

$event = new Google_Event();
$event->setSummary('Appointment');
$event->setLocation('Somewhere');
$start = new EventDateTime();
$start->setDateTime('2011-06-03T10:00:00.000-07:00');
$event->setStart($start);
$end = new EventDateTime();
$end->setDateTime('2011-06-03T10:25:00.000-07:00');
$event->setEnd($end);
$attendee1 = new EventAttendee();
$attendee1->setEmail('attendeeEmail');
// ...
$attendees = array($attendee1,
                   // ...
                  );
$event->attendees = $attendees;
$createdEvent = $service->events->insert('primary', $event);

echo $createdEvent->getId(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T21:00:52.350

参考似乎过时了 - 类名不完整（[创建谷歌日历事件](https://stackoverflow.com/questions/13152587/creating-google-calendar-event)）

这是更新的片段：

```
require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_CalendarService.php';

$event = new Google_Event();
$event->setSummary('Appointment');
$event->setLocation('Somewhere');
$start = new Google_EventDateTime();
$start->setDateTime('2011-06-03T10:00:00.000-07:00');
$event->setStart($start);
$end = new Google_EventDateTime();
$end->setDateTime('2011-06-03T10:25:00.000-07:00');
$event->setEnd($end);
$attendee1 = new Google_EventAttendee();
$attendee1->setEmail('attendeeEmail');
// ...
$attendees = array($attendee1,
                   // ...
                  );
$event->attendees = $attendees;

$createdEvent = $cal->events->insert('primary', $event);
echo $createdEvent->id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-13T09:07:02.683

文档描述创建事件的方式对我来说效果很好。

根据[文档](https://developers.google.com/calendar/create-events)：

```
$event = new Google_Service_Calendar_Event(array(
  'summary' => 'Google I/O 2015',
  'location' => '800 Howard St., San Francisco, CA 94103',
  'description' => 'A chance to hear more about Google\'s developer products.',
  'start' => array(
    'dateTime' => '2015-05-28T09:00:00-07:00',
    'timeZone' => 'America/Los_Angeles',
  ),
  'end' => array(
    'dateTime' => '2015-05-28T17:00:00-07:00',
    'timeZone' => 'America/Los_Angeles',
  ),
  'recurrence' => array(
    'RRULE:FREQ=DAILY;COUNT=2'
  ),
  'attendees' => array(
    array('email' => 'lpage@example.com'),
    array('email' => 'sbrin@example.com'),
  ),
  'reminders' => array(
    'useDefault' => FALSE,
    'overrides' => array(
      array('method' => 'email', 'minutes' => 24 * 60),
      array('method' => 'popup', 'minutes' => 10),
    ),
  ),
));

$calendarId = 'primary';
$event = $service->events->insert($calendarId, $event); 
```

假设您已经知道如何[检索访问令牌](https://developers.google.com/calendar/quickstart/php)，则更完整的实现可能如下：

```
require __DIR__ . '/vendor/autoload.php';

/* Retrieve access token */

$client = new Google_Client();
$client->setApplicationName('Google Calendar API PHP Create Event');
$client->setScopes(Google_Service_Calendar::CALENDAR);
$client->setAuthConfig('credentials.json');
$client->setAccessType('offline');
$client->setAccessToken($accessToken);

$service = new Google_Service_Calendar($client);

$event = new Google_Service_Calendar_Event(array(
  'summary' => 'Google I/O 2015',
  'location' => '800 Howard St., San Francisco, CA 94103',
  'description' => 'A chance to hear more about Google\'s developer products.',
  'start' => array(
    'dateTime' => '2015-05-28T09:00:00-07:00',
    'timeZone' => 'America/Los_Angeles',
  ),
  'end' => array(
    'dateTime' => '2015-05-28T17:00:00-07:00',
    'timeZone' => 'America/Los_Angeles',
  ),
  'recurrence' => array(
    'RRULE:FREQ=DAILY;COUNT=2'
  ),
  'attendees' => array(
    array('email' => 'lpage@example.com'),
    array('email' => 'sbrin@example.com'),
  ),
  'reminders' => array(
    'useDefault' => FALSE,
    'overrides' => array(
      array('method' => 'email', 'minutes' => 24 * 60),
      array('method' => 'popup', 'minutes' => 10),
    ),
  ),
));

$calendarId = 'primary';
$event = $service->events->insert($calendarId, $event);
printf('Event created: %s\n', $event->htmlLink); 
```

# javascript - jquery关闭统一插件

> ID：13840596
> 
> 赞同：1
> 
> 时间：2012-12-12T13:11:09.683
> 
> 标签：javascript, jquery, uniform

Uniform 是一个用于样式化表单的 jQuery 插件。在我的应用程序中，我正在使用它，我必须关闭制服并再次打开它，我的意思是我需要重新启动它。

要在某些表单元素上打开制服的功能，请执行以下操作`$("select, input, button, textarea").uniform();`

现在我需要关闭它，我的意思是我想要一个功能来回滚并恢复旧外观。

可以做到吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:14:34.510

您可以自行恢复原始外观（并取消绑定所有事件处理程序）`uniform`：只需使用它的[restore](https://github.com/pixelmatrix/uniform/blob/master/jquery.uniform.js#L661)方法。像这样：

```
$.uniform.restore(); 
```

这个方法也可以在元素集合上调用。

# ruby-on-rails - render_views 返回 NoMethodError

> ID：13840602
> 
> 赞同：1
> 
> 时间：2012-12-12T13:11:32.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec2, rspec-rails

我目前正在阅读 Michael Hartl 的 Ruby on Rails 教程，在教程的第 3.2.2 节中，他谈到了使用 RSpec 来测试页面的标题。我的测试（我自己写的，按照他的教程）一直没有通过标题测试（它可以找到标签，但标题总是一个空白字符串），并且在谷歌上的一些搜索告诉我我需要包含函数`render_views`来传递测试。我的问题是，无论我尝试什么，RSpec 都会返回一个`NoMethodError`for `render_views`。我尝试过的事情：

*   `config.render_views`在`spec_helper.rb`
*   `describe "Static Pages" do render_views ... end`在规范文件中
*   `describe "Static Pages" do RSpec::Rails::ViewRendering.render_views ... end`在规范文件中

他们都返回一个`NoMethodError`.

我没有完全遵循他的 Gemfile，所以 Ruby 和相关 gem 的版本是：

*   红宝石：1.9.3-p125
*   导轨：3.2.9
*   rspec：2.12.0
*   rspec-rails：2.12.0
*   水豚：2.0.1

我在 Windows 7 上的 RubyMine 4.5.4 中工作。但是，在命令提示符下运行测试会返回相同的错误。规范文件位于`static_pages_spec.rb`并且位于`spec/requests`

我的代码`static_pages_spec.rb`：

```
require_relative '../spec_helper'

describe "Static Pages" do
  #RSpec::Rails::ViewRendering.render_views, returns NoMethodError
  #render_views, returns NameError

  describe "Home Page" do
    it "should have the h1 'Sample App'" do
      visit '/static_pages/home'
      page.should have_selector('h1', :text => "Sample App")
    end

   it "should have the title 'Home'" do
      visit '/static_pages/home'
      page.should have_selector('title', :text => "Ruby on Rails Tutorial Sample App | Home")
    end
  end

  describe "Help Page" do
    it "should have the h1 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('h1', :text => "Help")
    end

    it "should have the title 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('title', :text => "Ruby on Rails Tutorial Sample App | Help")
    end
  end

  describe "About Page" do
    it "should have the h1 'About Us'" do
      visit '/static_pages/about'
      page.should have_selector('h1', :text => "About Us")
    end

    it "should have the title 'About Us'" do
      visit '/static_pages/about'
      page.should have_selector('title', :text => "Ruby on Rails Tutorial Sample App | About Us")
    end
  end
end 
```

My`spec_helper.rb`是在创建项目后`spec_helper.rb`通过创建运行自动生成的，在块中添加了这些行：`rails generate integration_test``--no-test-framework``config`

```
# Fix NoMethodError for method 'visit'
config.include Capybara::DSL

config.include Capybara::RSpecMatchers 
```

**编辑** 经过一些测试，我设法通过将 capybara 版本更改为 1.1.2 来通过测试，同时仍然使用 rspec 2.12.0 和 rspec-rails 2.12.0 并且*不*使用 render_views。虽然我很高兴测试通过了，但它仍然不能解决缺少`render_views`方法的问题，如果我尝试使用它，它仍然会出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:39:44.740

好吧，经过多一点测试，失踪`render_views`方法之谜就解决了。要包含渲染视图方法，显然`config.include RSpec::Rails::ViewRendering`在`spec_helper`调用或规范文件之前需要`config.render_views`。`spec_helper``render_views`

其次，关于测试通过或失败，问题似乎出在 Capybara 本身。显然，该`visit`方法在 1.1.2 和 2.0.1 中的实现方式似乎在返回的内容上有很大不同；即使在 include 之后`render_views`，测试仍然失败（不使用`config.include Capybara::RSpecMatchers`）。不过，使用它似乎可以深入了解它的实现；Capybara 使用的失败消息`RSpecMatchers`是它正在寻找 CSS 而不是 HTML。然而，我并没有声称完全理解它为什么会失败，所以如果有人能告诉我为什么 Capybara 2.0.1 导致测试失败而 1.1.2 允许测试通过，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:30:28.147

Capybara 2.0 要求所有测试都在**spec/features**中，而不是在 spec/requests 中。

您可以[在此处](http://alindeman.github.com/2012/11/11/rspec-rails-and-capybara-2.0-what-you-need-to-know.html)阅读所有相关信息。

我建议您至少在初学者的日子里坚持使用 Hartl 教程中提到的版本。将帮助您更快地完成教程！

# android - 在android按钮单击上生成地图

> ID：13840604
> 
> 赞同：1
> 
> 时间：2012-12-12T13:11:39.090
> 
> 标签：android, maps

我对此做了很多研究。找了几个教程。有很多错误，后来我发现“地图视图不适用于 v2 API。”......所以我所有的努力最终都没有给我任何结果。

有人可以告诉我如何在单击按钮时显示地图..？

# c# - 如何从这个以逗号分隔的单行文件制作二维数组？

> ID：13840607
> 
> 赞同：0
> 
> 时间：2012-12-12T13:11:41.157
> 
> 标签：c#, csv, multidimensional-array

我试图弄清楚如何将以下单行 CSV 文件转换为 30x30 2D 数组。

[http://pastebin.com/8NP7s7N0](http://pastebin.com/8NP7s7N0)

我试过自己查，但我似乎无法将我的大脑包裹在多维数组的概念上，我不知道如何将这样的单行文件变成指定大小的数组.

我希望能够制作一个打印时看起来像这样的数组：

> 0,0 = 2
> 
> 0,1 = 2

一直到30,30。

CSV 中的大多数数字确实是 2，但有些是 1。区别是非常重要的。我正在尝试为游戏进行碰撞检测，这个 CSV 文件就是地图。我只需要如何创建这个数组——剩下的交给我。:)

非常感谢大家，祝大家有个愉快的一天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:16:47.333

嗯，首先你需要得到数字......

```
var numbers = Read_File_As_String().Split(new char[',']).Select(n => int.Parse(n)).ToList(); 
```

然后，您需要构建您的阵列

```
const int ROWS = 30;
const int COLS = 30;

var result = new int[ROWS, COLS];

for (int row = 0; row < ROWS; row++)
    for (int col = 0; col < COLS; col++)
        result[row, col] = numbers[(row * COLS) + col]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:22:04.290

假设您的文件首先包含 900 个元素，您需要将其读入..

类似的东西

`line = myStreamReader.readLine().Split(',')`.. 然后在 John U 的示例中，`value`将是该数组中称为 line 的下一个索引

我会让你找出我的例子中缺少的东西：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:30:53.650

这应该是一个使用 5 x 5 网格的完整示例。我已经尝试过了，似乎可以按预期工作：

```
namespace ConsoleApplication1
{
    using System;

    class Program
    {
        const int MapRows = 5;
        const int MapColumns = 5;

        static void Main(string[] args)
        {
            // Create map and the raw data (from file)
            var map = new int[MapRows, MapColumns];
            string rawMapData = "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25";
            string[] splitData = rawMapData.Split(',');
            int index = 0;

            // Loop through data
            for (int row = 0; row < MapRows; row++)
            {
                for (int column = 0; column < MapColumns; column++)
                {
                    // Store in map and show some debug
                    map[row, column] = int.Parse(splitData[index++]);
                    Console.WriteLine(string.Format("{0},{1} = {2}", row, column, map[row, column]));
                }
            }

            // Wait for user to read
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:15:25.087

```
for(row=0;row<30;row++)
{
    for(col=0;col<30;col++)
    {
       array[row][col] = value;
    }
} 
```

每次都需要移动价值以指向下一件事，但我相信你可以弄清楚这一点。

编辑添加：如果它是一张地图，那么首先将它存储为一个数组可能会更容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:20:38.260

既然您询问了多维数组的概念，这里有一些有用的思考数组的方法。请注意，这些是类比，旨在帮助您将它们形象化。

将一维数组视为项目列表（不是列表的编程意义！）。

将 2D 数组视为一个表（同样，不是编程意义上的！）。在表格（如电子表格）中，您有行和列，并且数组中的每个维度都访问其中一个。

对于更高维的数组，从几何角度思考可能会有所帮助。例如，您可以将 3D 数组视为空间中的 3 维点，将 4D 数组视为时空中的 4 维点。

因此，如果您有一个 CSV 文件，请从概念化如何将其重组为表格开始。一旦你有了它，你就有了一个非常直接的到数组的映射。

# java - 在 Hibernate 中生成实体

> ID：13840612
> 
> 赞同：2
> 
> 时间：2012-12-12T13:12:01.217
> 
> 标签：java, hibernate, jakarta-ee, doctrine-orm

我必须开发一个 java web 应用程序。为了持久性，我将使用hibernate。我是 symfony2 开发人员，我喜欢使用 Doctrine 2 控制台生成我的实体。那么是否有类似的用于休眠（或其他众所周知的 Java ORM）的工具可以自动生成实体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:18:00.173

您可以使用[休眠逆向工程工具（休眠工具）](http://www.hibernate.org/subprojects/tools.html)来生成实体类。您需要做的是提供会话工厂配置（它需要您的 hibernate.cfg.xml）和数据库模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:19:52.767

AFAIK，不，没有实体生成器可以与学说或轨道中的实体生成器相提并论。

但是，如果您使用 eclipse，则从现有表生成实体仍然很舒服。看看[这个帮助页面](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jpt.doc.user/tasks019.htm)。页面本身有点过时，但功能仍然存在。菜单将通过属性和关系映射很好地指导您。

IntelliJ 和 NetBeans 等其他 IDE 可能有类似的工具，但我对它们不够熟悉，无法提供建议。

# forms - Joomla 自定义组件上传表单

> ID：13840624
> 
> 赞同：2
> 
> 时间：2012-12-12T13:12:46.020
> 
> 标签：forms, file, joomla, upload

我在为基于库/joomla/filesystem/file.php 的自定义字段创建上传机制时遇到问题。表单在视图中设置了正确的 enctype，它只是没有上传。这是我的组件/模型/字段/uploadfield.php 中的代码：

```
protected function getInput()
{

    //Retrieve file details from uploaded file, sent from upload form
    $file = JFactory::getApplication()->input->get($this->name, null, 'files', 'array');

    //Import filesystem libraries. Perhaps not necessary, but does not hurt
    jimport('joomla.filesystem.file');

    //Clean up filename to get rid of strange characters like spaces etc
    $filename = JFile::makeSafe($file['name']);

    //Set up the source and destination of the file
    $src = $file['tmp_name'];
    $dest = JPATH_COMPONENT . DIRECTORY_SEPARATOR . $filename;

    //First check if the file has the right extension, we need jpg only
    if ( strtolower(JFile::getExt($filename) ) == 'jpg') {
        if ( JFile::upload($src, $dest) ) {
        //Redirect to a page of your choice
        } else {
        //Redirect and throw an error message
        }
    } else {
    //Redirect and notify user file is not right extension
    }

    return '<input type="file" name="' . $this->name . '" id="' . $this->id . '"' . ' />';  
} 
```

在 getInput() 函数中使用上传机制，我什至会以正确的方式解决这个问题吗？它应该在模型中吗？我真的很困惑如何使这项工作，一直试图遵循：[http](http://docs.joomla.org/How_to_use_the_filesystem_package) ://docs.joomla.org/How_to_use_the_filesystem_package但它忽略了上传代码应该去哪里？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:08:49.190

尝试使用我在其中一个组件上使用的以下内容：

```
function getInput(){

    jimport('joomla.filesystem.file');

    $jinput = JFactory::getApplication()->input;
    $fileInput = new JInput($_FILES);
    $file = $fileInput->get('image', null, 'array');

    if(isset($file) && !empty($file['name'])) { 
        $filename = JFile::makeSafe($file['name']);
        $src = $file['tmp_name'];
        $data['image']=$filename;

        $dest = JPATH_COMPONENT . '/' . $filename;

        if ( strtolower(JFile::getExt($filename) ) == 'jpg') {
            if(!JFile::upload($src, $dest)) {
            return false;
            }
        }
        else {
            JError::raiseWarning('', 'File type not allowed!.');
            return false;
        }
    }
    return true;
} 
```

请注意，使用以下代码：

`$file = JRequest::getVar('image', null, 'files', 'array');`

“ **image** ”来自输入字段的名称，如下所示：

```
<input type="file" id="" name="image" /> 
```

因此，更改为您在输入字段中指定的任何名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T18:56:52.560

好的 - 所以我解决了这个问题：

我使用自定义字段文件中的 getInput() 函数来完成在表单上显示输入字段的工作，并在控制器中创建了一个函数来进行保存。有点像这样：

```
function save(){
    jimport('joomla.filesystem.file');

    $jFileInput = new JInput($_FILES);
    $theFiles = $jFileInput->get('jform',array(),'array');

    $filepath = "DESTINATIONFILEPATH"
    JFile::upload( $theFiles['tmp_name']['filename'], $filepath );

    return parent::save();
} 
```

只需要找出将文件名保存到 JInput "jform" 数组的 Joomla 3.0 方法，以便将文件名更新到数据库中。这只是覆盖现有的 jform 数据：

```
$jinput = JFactory::getApplication()->input;
$jinput->set('jform',$arraytoadd); 
```

如果有人感兴趣，我在这里问过这个问题： [Adding field input to JForm using JInput](https://stackoverflow.com/questions/14145050/joomla-3-0-component-adding-field-input-to-jform-using-jinput)

# iphone - POST 请求未成功通过服务器发送

> ID：13840630
> 
> 赞同：0
> 
> 时间：2012-12-12T13:13:05.603
> 
> 标签：iphone, objective-c, ios, push-notification, afnetworking

我正在制作一个在应用关闭后发送推送通知的应用。我正在使用 AFNetworking 与我的服务器通信。这是我的 AFNetworking 功能。

```
-(void)sendPushNotification:(NSMutableDictionary *)params onCompletion:(JSONResponseBlock)completionBlock{
    NSLog(@"%@%@",kAPIHost,kAPIPush);
    NSMutableURLRequest *apiRequest = [self multipartFormRequestWithMethod:@"POST" path:kAPIPush parameters:params constructingBodyWithBlock:^(id <AFMultipartFormData>formData){
        //TODO: attach file if needed
    }];
    NSLog(@"Till here");
    AFJSONRequestOperation *operation = [[AFJSONRequestOperation alloc] initWithRequest:apiRequest];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject){
        //success !
        NSLog(@"SUCCESSSS!");
        completionBlock(responseObject);
    }failure:^(AFHTTPRequestOperation *operation, NSError *error){
        //Failure
        NSLog(@"FAILUREE!");
        completionBlock([NSDictionary dictionaryWithObject:[error localizedDescription] forKey:@"error"]);
    }];
    NSLog(@"tille here 2");
    [operation start];
    NSLog(@"till here 3");
} 
```

然后为了发送推送通知，我有以下代码。

```
- (IBAction)changeEnglish:(id)sender {
    [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"en", nil] forKey:@"AppleLanguages"];
    [[NSUserDefaults standardUserDefaults] synchronize];
    NSString *alertCancel = NSLocalizedString(@"Home_alertCancel", nil);
    NSString *message = @"  Do you wish to change the language? The application will shut down after this. Next up you can restart it again.";

    BlockAlertView *alert = [BlockAlertView alertWithTitle:@"Change language" message:message];

    [alert setCancelButtonWithTitle:alertCancel block:nil];
    [alert setDestructiveButtonWithTitle:@"Ok" block:^{
        [self sendPush];
        exit(0);
    }];
}
-(void)sendPush{
    [[API sharedInstance]sendPushNotification:NULL onCompletion:^(NSDictionary *json){
        //completion
        if(![json objectForKey:@"error"]){
            NSLog(@"notification send");
        }else {
            NSLog(@"Cannot connect to the server");
        }
    }];

} 
```

首先，当我在浏览器中执行推送通知（在浏览器中输入链接并按回车键）时，它工作正常。但是当我想在代码中执行时。它给出了以下日志。

```
2012-12-12 13:44:43.695 doktersApp[666:907] http://linkexample/simplepush.php
2012-12-12 13:44:43.702 doktersApp[666:907] till here
2012-12-12 13:44:43.705 doktersApp[666:907] till here2
2012-12-12 13:44:43.706 doktersApp[666:907] till here3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:17:35.043

你想在出口做吗？那么问题是请求是异步的。操作系统不会等待它并终止应用程序，并且操作没有完成，但在您调用 start 后立即被终止。

一种解决方案是将其包装在 backgroundTask 中，然后告诉 ios 退出后您需要更多时间。

例子：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //begin
    UIBackgroundTaskIdentifier identifier = [application beginBackgroundTaskWithExpirationHandler:^{
        NSLog(@"expired");
    }];
    assert(identifier != UIBackgroundTaskInvalid);

    //this simulates a request
    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (int64_t)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
        //THIS is your completion handler
        NSLog(@"done");
        [application endBackgroundTask:identifier];
    });
} 
```

在您的具体情况下：（这显然未经测试，以上已测试）

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    //begin
    UIBackgroundTaskIdentifier identifier = [application beginBackgroundTaskWithExpirationHandler:^{
        NSLog(@"expired");
    }];
    assert(identifier != UIBackgroundTaskInvalid);

    [[API sharedInstance]sendPushNotification:NULL onCompletion:^(NSDictionary *json){
        //completion
        if(![json objectForKey:@"error"]){
            NSLog(@"notification send");
        }else {
            NSLog(@"Cannot connect to the server");
        }
        NSLog(@"done");
        [application endBackgroundTask:identifier];
    }];
} 
```

# jms - 如何在启用管理安全性的情况下连接到 websphere Application Server 8.5 消息队列

> ID：13840637
> 
> 赞同：1
> 
> 时间：2012-12-12T13:13:25.947
> 
> 标签：jms, websphere

我编写了一个针对**Websphere Applicationserver Message Topic**运行的小客户端测试程序。一切正常。现在，如果我打开管理安全性，我得到一个错误。

这就是我正在使用的代码。

```
public static void main(String[] args)
    {
    try {
    /**
    * Lookup connection factory object using jndi
    */
    System.out.println("* Looking up CF in jndi...");
    Hashtable env = new Hashtable();

    env.put(Context.PROVIDER_URL, "iiop://192.168.195.144:2809");
    env.put(Context.INITIAL_CONTEXT_FACTORY,"com.ibm.websphere.naming.WsnInitialContextFactory");

    Context ctx = new InitialContext(env);

    TopicConnectionFactory fact=(TopicConnectionFactory)ctx.lookup("jms/Ttestsecure");
    TopicConnection connect = fact.createTopicConnection();
    TopicSession session=connect.createTopicSession(false, Session.AUTO_ACKNOWLEDGE);
    Topic topic=null;
    try
    {
        topic =(Topic) ctx.lookup("jms/Totestsecure");
        System.out.println(topic.getTopicName());

    } 
```

这是我得到的错误

> 在 jndi 中查找 CF... JSAS1480I: Die Sicherheit nicht aktiviert, weil die ConfigURL-Eigenschaftendatei nicht definiert ist。javax.naming.NamingException：获取 WsnNameService 属性时出错 [根异常是 org.omg.CORBA.TRANSIENT：初始和转发的 IOR 不可访问 vmcid：IBM 次要代码：E07 已完成：否] 在 com.ibm.ws.naming.util.WsnInitCtxFactory .mergeWsnNSProperties(WsnInitCtxFactory.java:1552) 在 com.ibm.ws.naming.util.WsnInitCtxFactory.getRootContextFromServer(WsnInitCtxFactory.java:1042) 在 com.ibm.ws.naming.util.WsnInitCtxFactory.getRootJndiContext(WsnInitCtxFactory.java:962) ) 在 com.ibm.ws.naming.util.WsnInitCtx.getContext(WsnInitCtx.java:128) 上的 com.ibm.ws.naming.util.WsnInitCtxFactory.getInitialContextInternal(WsnInitCtxFactory.java:614)。命名.util.WsnInitCtx。17 more 我对 websphere 服务器不是很熟悉 有没有人建议什么问题？我只打开了管理安全说明总线安全。如果我关闭所有工作正常。

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T14:29:19.490

您得到的异常表明您没有为客户端设置 ConfigURL

> JSAS1480I: 未启用安全性，因为未设置 ConfigURL 属性文件。
> 
> ```
> Explanation   The com.ibm.CORBA.ConfigURL property specified in setupCmdLine.bat or on the java command line is not set.
> Action    To enable security, set the com.ibm.CORBA.ConfigURL property to a properties file which exists, such as the sas.client.props file. 
> ```

你不见了

```
-Dcom.ibm.CORBA.ConfigURL=file:///home/user1/sas.client.props 
```

* * *

您可以阅读信息中心上的说明：[运行 IBM Thin Client for Enterprise JavaBeans (EJB)](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.base.iseries.doc/ae/tcli_ejbthinclient.html)

# c# - 我的 UI 会在每次使用中创建业务对象吗？或不？

> ID：13840640
> 
> 赞同：0
> 
> 时间：2012-12-12T13:13:32.120
> 
> 标签：c#, oop, design-patterns, layer

尝试在我的新应用程序套件中构建基本的 3 层架构。我第一次想开始应用最佳设计实践（如 IoC/DI 等）。

我的 UI 层必须创建一个 BLL 对象才能完成它的工作。

假设我的 UI 需要调用 BLL 10 次。我是否必须创建我的 BLL 对象 10 次，或者我必须在表单加载时创建一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:19:50.610

> > 我的 UI 层必须创建一个 BLL 对象才能完成它的工作。

首选做法是在创建时或稍后通过属性将业务层对象的接口注入您的 GUI 表单时。在这种情况下，您的表单对业务层对象一无所知，不需要实例化它们，只做它应该做的事情——GUI 交互。

我个人更喜欢构造函数注入：

```
public class MyForm
{
    private IDocumentStorage documentStorage;
    private IJobsRegistrator jobsRegistrator;

    public MyForm(IDocumentStorage documentStorage, IJobsRegistrator jobsRegistrator)
    {
        this.documentStorage = documentStorage;
        this.jobsRegistrator = jobsRegistrator;
    }
} 
```

您的业​​务层接口在哪里`IDocumentStorage`以及在哪里。`IJobsRegistrator`如果有一些限制（比如，你只能有无参数的构造函数），你可以使用属性设置器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:24:04.747

每次调用都重新创建业务对象是正常的。这有助于维护无状态应用程序，如果您正在制作基于 HTTP 的网站，这就是您想要的。

如果由于某些重量级的对象而成为问题，您可以采取一些措施，例如创建对象缓存/池，或将内容保存在 Session 对象中。除非你发现你必须去，否则不要去那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:23:06.913

嗯......如果你期待一个直接的答案，你会感到失望。答案是——视情况而定。

如果您的对象是无状态的轻量级对象 - 如果它让您的生活更轻松，请每次都创建它。

另一方面，如果您的对象必须保持状态，或者需要大量资源来创建它，则必须将其创建为单例，以及创建/管理单例所需的所有开销。

DI 容器都支持这两种场景，但您可以根据自己的场景选择合适的场景

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:27:07.353

如果对象是服务类型类，即接受一些输入并提供一些输出（例如存储库类型对象），您会希望您的 UI 层依赖于它的抽象版本，例如：

```
public class UILayerComponent
{
    private readonly IBLLObject _bllobject;

    public UILayerComponent(IBLLObject obj)
    {
        _bllobject = obj;
    }

} 
```

但是 UI 层应该对这个对象的实例化、生命周期管理甚至具体实现一无所知。这应该是您的 IoC 容器处理的工作。

但是，如果对象是状态驱动的——例如，由一个用户操作创建，并由另一个用户操作更新或删除——那么您应该在有意义的时候创建和处置它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:27:35.313

严格来说 - 简单的 3 层

第 1 层 - 数据库 这里没有逻辑，只是通过 RDBMS 机制进行数据检索和存储

第 2 层 - 业务逻辑/数据访问数据访问对象（向/从第 1 层传递/获取数据，应在此处创建业务对象）和应从此处创建/填充/保存业务数据（域）对象

第 2 层用户界面除了将数据（在从第 2 层获得的业务对象中）呈现给用户以供用户创建/操作外，什么都不做

# java - java中的日志检查指针

> ID：13840645
> 
> 赞同：0
> 
> 时间：2012-12-12T13:13:55.787
> 
> 标签：java, logging

我目前有一个 Web 服务，它存储键到某些值的映射，我设法创建了一个 Web 服务接收到的命令的后台日志记录系统。现在我必须实现一个检查指针，它将日志存储到一个文件中，我已经将它实现为 Timer Task 的扩展。所以我想我可以使用计时器来安排检查指针每 20 分钟左右执行一次任务。我的问题是，除了调用检查指针之外，我还必须测试对服务的任何调用是否仍在处理中，等待它完成，然后阻止 web 服务，直到我发送恢复命令，即静默方法。

```
public class MyCheckpointer extends TimerTask implements Checkpointer {

ObjectOutputStream out; 
FileOutputStream file;
MyLogger log;

public MyCheckpointer(MyLogger l)
{
    File log_txt = new File("./log.txt");
    try {
        this.file = new FileOutputStream(log_txt);
        this.out = new ObjectOutputStream(this.file);

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    this.log = l;

}

@Override
public void run() {
    // TODO Auto-generated method stub
    this.writeLog();
}

private void writeLog()
{
    ArrayList<LogRecord> l = this.log.getArray();
    Iterator<LogRecord> e = l.iterator();
    do
    {
        try {
            out.writeObject(e.next());
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    }while(e.hasNext());
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:19:42.033

我不知道它是否完全适合您的用例，但我建议使用支持异步日志记录的日志框架，而不是滚动您自己的日志框架。例如，log4j 提供了一个异步追加器：[http](http://www.slf4j.org/nlog4j/api/org/apache/log4j/AsyncAppender.html) ://www.slf4j.org/nlog4j/api/org/apache/log4j/AsyncAppender.html 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:20:01.260

Web 服务实现和 MyCheckpointer 类可以共享一个同步对象。例如 java.util.concurrent.Lock：

```
Lock lock = new ReentrantLock(); 
```

那么他们两个都应该调用：

```
lock.lock();
service the command and log/write logs to file
lock.unlock(); 
```

# chat - 龙卷风长轮询聊天中的断开事件

> ID：13840646
> 
> 赞同：4
> 
> 时间：2012-12-12T13:13:56.383
> 
> 标签：chat, tornado, long-polling

我正在开发一个在后端使用 Tornado 的聊天应用程序。我使用长轮询来获取在线用户的数量和服务器上可用的任何新聊天消息。我已经打开了两个与服务器的长轮询连接。

虽然很容易检测到用户何时上线。我已经编写了这个类，它维护了一个上线用户的列表（用户）。该列表很容易发送给任何请求在线用户的客户端（如下面的代码所示。）但是当用户离线时，我无法知道这一点，因此列表（用户）sill 保持不变。因此，即使有人下线，我也无法更新用户列表。请帮助我找出一种方法来删除未连接的用户（使用长轮询）并更新用户列表。
我听说我必须对列表用户应用某种轮询机制，因为与 node.js 不同，tornado 中不会生成断开连接事件。请帮助我实施该轮询机制。代码中的响应将不胜感激。

```
class OnlineHandler(BaseHandler):
    online = [] 
    identifier = [] 
    user = []
    time = []
    @tornado.web.asynchronous
    def post(self):
        random = self.get_argument("random", None)
        self.online_user(self.get_current_user(), self.retuser,random)

    def online_user(self, u, callback, random):
        cls = OnlineHandler
        if u not in cls.user:    
       cls.time.append(time.time())
       cls.user.append(u)
    else:
           index = cls.user.index(u)    
       cls.time[index] = time.time()            
        cls.online.append(callback)
        if random not in cls.identifier:                # new user connected
           cls.identifier.append(random)
           logging.info("Sending online list to %r users",len(cls.online))
           for callback in cls.online:
               try:
                   callback(cls.user)
               except:
                   logging.error("Error in online user callback", exc_info=True)
           cls.online = [] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-22T14:12:29.107

## 我看不到您删除 cls.user 的位置。以下是我的长轮询代码：

class LongPollingHandler(tornado.web.RequestHandler):
@tornado.web.asynchronous def get(self):
global online, count ,lastcount self.connection_closed = False self.user = self.get_argument("name", None)
if self.用户不在线： logging.info("user : " + self.user) online.append(self.user) http = tornado.httpclient.AsyncHTTPClient()
appURL = self.request.protocol + "://" + self .request.host
http.fetch(appURL + "/internal-polling", self._on_finish)

```
 '''push to the client'''  
 def _on_finish(self, response):
      global online, count  ,ipollcount
      gone = self.request.connection.stream.closed()
      print (self.user +" => " + str(gone))
      if gone:
           online.remove(self.user)
           return
      self.write("welcome %s, current online number(s) %s" % (self.user, response.body)) 
```

## self.finish()

但是我刚刚在openshift的托管上遇到了你的问题（当客户端消失时，我的本地主机上没问题），我不知道龙卷风是否在代理后面，代理是否会切断客户端之后的连接。我也在寻找答案。

# jquery-mobile - Jquery Mobile UI 还是 HTML、CSS，使用哪一个？

> ID：13840656
> 
> 赞同：0
> 
> 时间：2012-12-12T13:14:57.830
> 
> 标签：jquery-mobile, user-interface, web, mobile-website

我们正在开始移动 Web 开发。我们从事零售业务，我们希望列出移动网站中可用的所有菜单和东西。我已经探索了网络上可用的框架。我看过一些通过 Jquery Mobile UI 设计的示例，然后我将它们与原生应用程序进行了比较，原生应用程序的外观和感觉比我们通过 Jquery Mobile UI 设计的要好得多。

我相信我们可以使用 HTML 和 CSS 为移动 web 实现更好的外观和感觉，但我们会错过 jquery mobile 中的所有这些效果。有人可以验证我的想法。为了获得良好的外观和感觉，我们应该更喜欢哪一个，Jquery Mobile UI 或使用 HTML 和 css 的自定义开发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:59:17.243

它不必是非此即彼或命题。

有一个适用于 JQM 的[下载构建器](http://jquerymobile.com/download-builder/)，它允许您只下载您想要使用它的部分，例如，您可以排除*列表菜单*，或者您可以排除所有小部件，只使用 JQM 进行页面转换效果或触摸事件。

或者，您始终可以选择告诉 JQM[不要为](http://jquerymobile.com/demos/1.2.0/docs/forms/forms-all-native.html)代码的特定部分设置样式，因此您可以告诉 JQM 不要为列表或其他任何内容设置样式，然后为这些部分使用您自己的自定义 HTML 和 CSS。

另一种选择是，您可以使用 JQM 用于其小部件的类来添加一些自定义样式，显然您最终会得到最少的自定义，但您仍然可以使用 JQM 为其小部件提供的不同方法和事件。

# r - 在 ggplot2 中使用 nls pred$fit 出错

> ID：13840658
> 
> 赞同：9
> 
> 时间：2012-12-12T13:15:11.250
> 
> 标签：r, ggplot2

所以我在 ggplot2 中使用 nls 来绘制功率曲线代码如下：

```
mass <- c(4120,4740,5550,5610,6520,6870,7080,8500,8960,10350,10480,10550,11450,11930,12180,13690,13760,13800,14050,14700,15340,15790,15990,17300,18460,18630,18650,20050,23270,24530,25030,27540,28370,33460,33930,34450,34500)

solv_acc <- c(2760,2990,2990,3180,3900,4010,4140,4680,4750,5330,4980,5860,5930,5570,5910,6790,6690,7020,6240,6620,6600,6860,7940,7600,8250,8530,7410,9160,9140,10300,10440,10390,11020,12640,11920,12110,12650)

df <- data.frame(Mass=log(mass),Solv=log(solv_acc))

plotter <- (ggplot(df, aes(x=Mass, y=Solv)) + geom_point(shape=1) + stat_smooth(method = "nls", formula = y~i*x^z, start=list(i=1,z=0.2)))
plotter <-  plotter + labs(x = "Mass kDa" ,y = "Solvent Accessibility")
print(plotter) 
```

运行上面的代码我得到以下错误：

```
Error in pred$fit : $ operator is invalid for atomic vectors 
```

我假设它尝试使用时发生错误`predict()`？

当我`nls`在同一数据帧上不使用 ggplot2 执行时，我没有收到错误

```
> nls1=nls(Solv~i*Mass^z,start=list(i=1,z=0.2),data=df)
> predict(nls1)
 [1] 7.893393 7.997985 8.115253 8.123230 8.234519 8.273135 8.295350 8.429871 8.468550 8.574147 8.583270 8.588134 8.647895 8.677831 8.692939 8.777944 8.781648 8.783757 8.796793 8.829609
[21] 8.860502 8.881445 8.890558 8.947512 8.994380 9.000995 9.001769 9.053953 9.161073 9.198919 9.213390 9.281841 9.303083 9.420894 9.430834 9.441670 9.442703 
```

谁能指出我为什么会收到错误？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T13:25:47.350

您的问题已在ggplot2 邮件列表中的这个[问题中得到解答。](https://stat.ethz.ch/pipermail/r-help/2010-September/252780.html)简要地，

> 根据 predict.nls 的文档，它无法为预测创建标准错误，因此必须在 stat_smooth 调用中将其关闭。.

所以，我们需要关闭标准错误：

```
ggplot(df, aes(x=Mass, y=Solv)) +
  stat_smooth(method="nls", formula=y~i*x^z, se=FALSE, 
              start=list(i=1,z=0.2)) +
  geom_point(shape=1) 
```

2019 年更新：对于新版本的 ggplot2，我们需要像这样传递`start`参数：`nls`

```
ggplot(df, aes(x = Mass, y = Solv)) +
  stat_smooth(method = "nls", 
              se = FALSE,
              method.args = list( 
                formula = y ~ i*x^z, 
                start = list(i=1, z=2)
              )) +
  geom_point() 
```

# asp.net - 图像未出现在 Default.aspx 中

> ID：13840659
> 
> 赞同：1
> 
> 时间：2012-12-12T13:15:13.340
> 
> 标签：asp.net, image

我正在尝试获取 default.aspx 页面，除了登录屏幕之外什么都没有，以在登录屏幕上方显示徽标。徽标保存在项目主目录中的图像文件夹中。该图像总共位于两个位置，一个在登录前，一个在登录后的不同页面上。

用户登录前是看不到图片的，基本上是得到图片未找到图形。然而，用户在登录后从完全相同的文件中获得完全相同的图像。如果他们然后注销，图像将出现一次，但如果您重新加载页面，它会返回到找不到图像。更复杂的问题是它在运行它进行调试时可以工作，但当我尝试通过浏览器访问它时却不行。

我尝试将图像放在各种目录以及默认页面的不同部分，但仍然没有运气。声明我的形象的行是

```
<asp:Image ImageUrl="~/Images/CCA.jpg" runat="server" AlternateText="CCA Logo"/> 
```

有什么建议么？

编辑：在尝试了一些事情之后，我查看了页面的检查元素，发现图像设置为正确的目录路径（http://server/Portal/PortalSite/Images/CCA.jpg）。当图像工作时（登录后），我可以按照链接获取图像。然而，当它不起作用时，它会带我回到页面

```
http://server/Portal/PortalSite/Default.aspx?ReturnUrl=%2fPortal%2fPortalSite%2fImages%2fCCA.jpg 
```

这可能是 url 路径的问题吗？

编辑：另外，这可能是一个愚蠢的问题，但由于我是新手，我需要在生成的 default.aspx.vb 文件中进行任何类型的设置吗？它目前只有登录重定向信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:20:18.800

如果您使用表单身份验证，您可能希望在 web.config 文件中添加一个位置标记，以允许访问图像文件夹。

```
 <configuration>
     <location path="Images">
        <system.web>
          <authorization>
            <allow users="*" />
          </authorization>
        </system.web>
      </location>
     <appSettings/>
     <system.web>

     <!-- other stuff -->
     </system.web>
    </configuration> 
```

或者您可以尝试将 web.config 文件放入相关文件夹中。

```
<?xml version="1.0" encoding="UTF-8" ?>
<configuration>
  <system.web>
    <authorization>
      <allow users="*" />
    </authorization>
  </system.web>
</configuration> 
```

# java - 将 Java 地图转换为 Javascript 地图

> ID：13840660
> 
> 赞同：5
> 
> 时间：2012-12-12T13:15:18.133
> 
> 标签：java, javascript, jsp

我有一个 Java 地图。我想将其转换为 JavaScript 地图。

转换为 JS map 的 java 函数如下：

```
private Object getJSLocalizedValueMap() {

    Map<String, String> langSel = new HashMap<String, String>();
    langSel.add("en", true);
    langSel.add("de", false);
    langSel.add("fr", false);

    //Now convert this map into Javascript Map
    NativeObject nobj = new NativeObject();
    ScriptEngineManager factory = new ScriptEngineManager();
    ScriptEngine engine = factory.getEngineByName("javascript");
    for (Map.Entry<String, String> entry : langSel.entrySet()) {
        nobj.defineProperty(entry.getKey(), entry.getValue(), NativeObject.READONLY);
    }
    engine.put("langSel", nobj);
    return langSel;
} 
```

在 JSP 页面的 javascript 中，代码是：

```
var langs = ${messagesJS}; 
```

在 Javascript 中，我得到：

```
langs = {en=true, de=false, fr=false}; 
```

代替

```
langs = {"en":true, "de":false, "fr":false} 
```

请建议我如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T13:21:12.887

您可能可以为此使用`JSONObject`该类。它有一个你传入的构造函数`Map`。调用它然后调用该`toString()`方法，它应该给你一个 JS 数组。

[http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject%28java.util.Map%29](http://www.json.org/javadoc/org/json/JSONObject.html#JSONObject%28java.util.Map%29)

所以像：

```
Map<String, String> langSel = new HashMap<String, String>();
langSel.add("en", true);
langSel.add("de", false);
langSel.add("fr", false);

JSONObject jsonObj = new JSONObject(langSel);
engine.put("langSel", jsonObj.toString()); 
```

您需要确保 org.json.JSONObject 类位于您的类路径中。下载 JAR 并手动添加到类路径（通过 Eclipse 或其他方式），或者如果您使用 Maven，请使用如下依赖项：

```
 <dependency>
    <groupId>org.json</groupId>
    <artifactId>json</artifactId>
    <version>20070829</version>
  </dependency> 
```

如果你没有使用 Maven，你仍然可以从这里下载 JAR：http: [//mvnrepository.com/artifact/org.json/json/20090211](http://mvnrepository.com/artifact/org.json/json/20090211)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:28:22.023

而不是下线

```
langSel.add("en", true); 
```

使用这条线

```
langSel.add("\"en\"", true); 
```

试试这个可能会有所帮助。

# c# - 即使窗口已经关闭，RelayCommand 绑定也可以执行查询

> ID：13840664
> 
> 赞同：1
> 
> 时间：2012-12-12T13:15:28.407
> 
> 标签：c#, wpf, c#-4.0

> **可能重复：**
> [用户界面何时与命令分离？](https://stackoverflow.com/questions/4095037/when-does-the-ui-detach-from-commands)

出于测试目的，我创建了包含 2 个窗口的简单应用程序：

a)`MainWindow`按以下方式定义按钮：

```
 <Button Content="Button" HorizontalAlignment="Left" Margin="53,36,0,0" VerticalAlignment="Top" Width="75" Click="HandlerButtonOnClick"/> 
```

然后`HandlerButtonOnClick`定义：

```
/// <summary>
/// The handler button on click.
/// </summary>     
private void HandlerButtonOnClick(object sender, RoutedEventArgs e)
{
 new WindowWithButton().ShowDialog();
} 
```

b)`WindowWithButton`是定义了一个按钮的简单窗口：

```
<Button Content="Button" HorizontalAlignment="Left" Margin="47,47,0,0" VerticalAlignment="Top" Width="75" Command="{Binding Path=Click, ElementName=clickWindow}"/> 
```

`clickWindow`窗口的名称在哪里。

在第二个窗口中，我通过以下方式定义了命令属性：

```
/// <summary>
/// The click.
/// </summary>
private ICommand click;

/// <summary>
/// Gets the click.
/// </summary>
public ICommand Click
{
    get
    {
        return this.click ?? (this.click = new RelayCommand(
                                               obj => MessageBox.Show("Click"), 
                                               obj =>
                                                   {
                                                       Debug.WriteLine("Click queried");
                                                       return true;
                                                   }));
    }
} 
```

我的问题如下。我添加了`Debug.WriteLine("Click queried");`行来检查何时调用它，并且我意识到它不仅在焦点窗口上调用。即使`WindowWithButton`是关闭的，它也被调用。所以，我按下按钮，然后我关闭`WindowWithButton`并激活 MainWindow 并调用 CanExecute 部分。它永远不会停止调用可以执行。每次我打开窗口时，它都会添加另一个执行。因此，当我多次打开窗口时，它会增加执行此代码。即使窗口被卸载，它也不会停止执行。

我该如何阻止这种行为，因为它会导致应用程序稳定性和内存使用以及性能方面的严重问题。

# c# - 如何在 VS 2008 中为 aspx.cs 文件编写单元测试方法？

> ID：13840665
> 
> 赞同：-5
> 
> 时间：2012-12-12T13:15:27.797
> 
> 标签：c#, asp.net

如何为 VS 2008 编写单元测试方法？- 在提交用户名和密码时，我调用了 .aspx.cs 文件中的方法。我需要为 .aspx.cs 文件中定义的方法编写单元测试。-从 .aspx.cs 文件中，我调用了单独文件中的方法。- 所以我需要涵盖 .aspx.cs 文件和 .cs 文件中的代码。所以我的问题是，我们可以编写测试方法 .aspx.cs 文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:22:29.673

我会将您要测试的代码移到单独的类中。听起来这个方法属于一个负责验证用户的类。然后你的 aspx.cs 文件可以使用这个类来验证用户。

如果您真的想这样做，那么这可能会对您有所帮助： [http ://social.msdn.microsoft.com/Forums/en-US/vststest/thread/5c984f7f-31c9-48ef-b8e5-c9c8357431ae](http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/5c984f7f-31c9-48ef-b8e5-c9c8357431ae)

# php - PHP MySQL 到 S3 备份脚本

> ID：13840666
> 
> 赞同：0
> 
> 时间：2012-12-12T13:15:34.587
> 
> 标签：php, mysql, pdo

我每晚在我的 Web 服务器上运行一个 cron 脚本来拍摄我所有数据库的快照，然后将其存储在 S3 上。

我运行的文件在 github > [phpMyS3backup](https://github.com/deadlyhifi/phpMyS3backup)

大部分时间它运行良好，但其他时候我得到一个`Fatal error: Call to a member function fetch() on a non-object in ~/phpMyS3backup.php on line 30`.

这发生在这一点：

```
$GLOBALS['con']= new PDO('mysql:host='.DB_HOST, DB_USER, DB_PASS);
try {
    $res = $GLOBALS['con']->query("SHOW DATABASES");
    while($row = $res->fetch()){
        if($row['Database'] != "information_schema"){
            $alldb[] = $row['Database'];
            deb("Database found: {$row['Database']}");
        }
    }
} 
```

几个问题：

为什么会失败？如果在脚本运行时正在访问任何站点，那会停止脚本运行并导致错误吗？就像我说的，很多时候它有效，其他时候则无效。

将 fetch 放入循环中是否安全，以便如果确实失败，它会再次尝试？还是会陷入无限循环，或者有其他性能问题？

# algorithm - 深度优先搜索递归算法

> ID：13840667
> 
> 赞同：1
> 
> 时间：2012-12-12T13:15:46.707
> 
> 标签：algorithm, recursion, depth-first-search

我在[这里查看 DFS 伪代码](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=graphsDataStrucs2#depth)

```
dfs(node start) {
 stack s;
 s.push(start);
 while (s.empty() == false) {
  top = s.top();
  s.pop();
  mark top as visited;

  check for termination condition

  add all of top's unvisited neighbors to the stack.
  mark top as not visited;
 }
}

dfs(node current) {
 mark current as visited;
 visit all of current's unvisited neighbors by calling dfs(neighbor)
 mark current as not visited;
} 
```

为什么作者在访问所有邻居后将顶点标记为未访问？这是这里必需的步骤吗？既然我们只是在搜索一个顶点，那么如果不将顶点标记为未访问过，它就不能工作吗？

[此处](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=standardTemplateLibrary2#dfs)的另一个链接实际上并没有将顶点设置为已访问后将其标记为未访问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:26:45.297

当您正在寻找顶点而不是顶点本身的*路径*时，应将顶点标记为未访问。

想象一下，您没有在遍历后将顶点标记为未访问，并且某些搜索会遍历图的一部分并确实找到了指向相关顶点的路径。在某些时候，搜索用尽了可以探索的边缘，并将其步骤回溯到某个较早的点，然后从那里继续。

如果正在搜索的顶点有*另*一条路径穿过*同样*位于找到的第一条路径上的顶点，则算法将找不到第二条路径，因为它会将公共顶点视为已经访问过。

另一方面，如果您只寻找一条路径（或只寻找顶点的存在，即根本没有路径），那么您可以跳过将节点标记为“在您离开时”未访问。

# wpf - 三层架构中的 MVVM WPF 应用程序

> ID：13840670
> 
> 赞同：3
> 
> 时间：2012-12-12T13:15:56.690
> 
> 标签：wpf, mvvm, n-tier-architecture

我目前正在使用 MVVM 设计模式开发企业 WPF LOB 桌面应用程序。我的开发机器中当前的解决方案结构如下：

*   **主项目**- 包含所有**视图**(XAML)的 WPF 应用程序
*   **视图模型**- 包含在主项目中备份视图的所有视图模型
*   **BLL** - 业务逻辑层
*   **DAL** - 数据访问层 - 连接到 MS-SQL 服务器并调用存储过程
*   **模型**- 包含所有业务实体

我目前没有使用 WCF，因为此时所有内容都驻留在同一台机器上，除了位于自己服务器中的数据库。但是，将来我们计划将代码库分成 3 层。

我遇到的问题是，一位同事坚持认为我们应该将我们的应用程序拆分为 3 个单独的服务器/机器，如下所示：

1.  **表示层**- 用户计算机中的客户端 WPF 应用程序 ( **View** )。这也可能是一个 Web 客户端应用程序
2.  **逻辑层服务器**- 视图模型 + 模型 + 业务逻辑层 + 数据访问层
3.  **数据层服务器**- 数据库服务器

我无法想象**视图模型与****视图**分开（不同的服务器），他声称这应该是可能的。

**编辑：**我的同事声称，在服务器端拥有视图模型将简化任何未来的部署，并将使其更易于维护，因为更改只会在服务器端进行。但是，我已经使用 ClickOnce 部署了 .NET 应用程序，这并不是什么大问题。

根据[我的阅读](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/4a6e6f7f-f255-4ba3-ba7e-d2a0762a0814)，您可以在包含 View 和 ViewModel 的用户计算机上安装 WPF 客户端应用程序，然后通过 WCF 等通信层在较低层公开服务。

[这个答案在另一篇文章中指出：](https://stackoverflow.com/questions/5141717/compare-between-3-layer-pattern-and-mvvm) “在 MVVM 中，UI 层分为两层。负责应用程序逻辑的 ViewModel 和仅负责演示的 View。” 基于此，我的基本问题是，View 和 ViewModel UI 层可以驻留在不同的层（服务器）中吗？如果是这样，是否推荐？那怎么能做到呢？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T15:05:23.557

，`View Model`无论你怎么称呼它，最后都是`Object`保存在计算机内存中的一个实例。就像任何其他实例化类一样。其目的是连接View和Model，访问各种BL方法等。

即使将视图模型的*实例*从某个服务器传递到客户端是可行的（假设您在服务器上对其进行二进制序列化并在另一端对其进行反序列化） - 否则会产生巨大的开销（无论是在网络上还是在 CPU 上），我看不出它如何使事情变得更容易，相反我想了解**这**将如何使事情更易于维护。

视图和视图模型都应该在客户端。例如

```
Presentation Tier - The client WPF application (View + View Models)
Logic Tier server - Model + Business Logic Layer + Data Access Layer
Data Tier server - The database server 
```

鉴于*这种*分离，他是正确的，在 BL 或 DAL 中所做的更改不需要创建新版本的客户端（只要您不破坏任何接口，不更改模型等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T15:04:44.490

让我们从显而易见的开始：

1.  ViewModel 不在服务器上。它们的作用是使来自多个服务/模型的数据可用于视图，并提供视图和数据之间的链接。没有人这样做，也没有人会认为这是个好主意。曾经。
2.  您的数据层可以以最少的干预存在于您希望它存在的任何地方。

将讨论您的业务逻辑层有多少/很少向上移动以成为 WCF 层以及客户端计算机上将保留多少。这才是应该讨论的内容。

如果您的同事坚持认为视图模型应该在服务器上，请让他/她对其进行原型制作。它应该非常有趣。

# parameters - 添加参数时，IReport“未找到参数”

> ID：13840671
> 
> 赞同：2
> 
> 时间：2012-12-12T13:16:01.550
> 
> 标签：parameters, ireport

我正在使用 IReport 4.8.0。我创建了一个数据集并将其用于表格和图表，一切正常。

现在我想添加一个字符串参数，以便用户可以插入城市名称。

所以我在数据集中添加了一个新的字符串参数并将其拖到页眉中。我还更新了数据集查询，因此它将接收来自参数的值：

```
SELECT
 COUNT(leads.`status`) AS Number_Of_Status,
 leads.`status` AS leads_status,
 leads.`primary_address_city` AS leads_primary_address_city
FROM
 `leads` leads
WHERE
 leads.`primary_address_city` = $P{city_to_choose}
GROUP BY
 leads.`status` 
```

但是我在推送“预览”时得到的只是“找不到参数：city_to_choose”我错过了什么？

![在此处输入图像描述](../Images/6f7030550a7162d8aab89c594792b220.png)

报告的xml代码为：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report44" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="94efea4a-2952-4cb2-9d88-3f853af2a264">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="0"/>
<style name="table">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<style name="table 1">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<style name="table 2">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<style name="table 3">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<style name="table 4">
    <box>
        <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
</style>
<style name="table 4_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 4_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
</style>
<style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
        <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
    <conditionalStyle>
        <conditionExpression><![CDATA[new Boolean($V{REPORT_COUNT}.intValue()%2==0)]]></conditionExpression>
        <style backcolor="#EFF7FF"/>
    </conditionalStyle>
</style>
<subDataset name="New Dataset 1" uuid="281c076f-1c95-4550-aa87-5ee8f14654a6">
    <parameter name="city_to_choose" class="java.lang.String">
        <defaultValueExpression><![CDATA["Cupertino"]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT
 COUNT(leads.`status`) AS Number_Of_Status,
 leads.`status` AS leads_status,
 leads.`primary_address_city` AS leads_primary_address_city
FROM
 `leads` leads
WHERE
 leads.`primary_address_city` = $P{city_to_choose}
GROUP BY
 leads.`status`]]>
    </queryString>
    <field name="Number_Of_Status" class="java.lang.Long"/>
    <field name="leads_status" class="java.lang.String"/>
    <field name="leads_primary_address_city" class="java.lang.String"/>
    <group name="Number_Of_Status">
        <groupExpression><![CDATA[$F{Number_Of_Status}]]></groupExpression>
    </group>
</subDataset>
<queryString>
    <![CDATA[select 1 as dummy_field]]>
</queryString>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="50"/>
</title>
<pageHeader>
    <band height="50">
        <textField pattern="">
            <reportElement uuid="ba67dc80-1d24-4900-8bae-95562947f757" x="114" y="17" width="100" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[$P{city_to_choose}]]></textFieldExpression>
        </textField>
    </band>
</pageHeader>
<detail>
    <band height="238" splitType="Stretch">
        <componentElement>
            <reportElement uuid="2692dbf7-e921-4098-a140-9ed1fc602281" key="table 4" style="table 4" x="0" y="0" width="555" height="190"/>
            <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                <datasetRun subDataset="New Dataset 1" uuid="64281428-2692-42a5-b3c0-357fd1662cb0">
                    <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
                </datasetRun>
                <jr:column width="90" uuid="13b614d9-0f9f-423e-8fca-4a5f2bce1dfb">
                    <jr:tableHeader style="table 4_TH" height="30"/>
                    <jr:tableFooter style="table 4_TH" height="30"/>
                    <jr:columnHeader style="table 4_CH" height="30">
                        <staticText>
                            <reportElement uuid="e89c0625-fb19-4b97-9bbc-80111f5d5055" x="0" y="0" width="90" height="30"/>
                            <textElement/>
                            <text><![CDATA[Lead Status]]></text>
                        </staticText>
                    </jr:columnHeader>
                    <jr:columnFooter style="table 4_CH" height="30"/>
                    <jr:detailCell style="table 4_TD" height="20">
                        <textField>
                            <reportElement uuid="f05e13d6-93ba-42df-ab80-65f156bec0e5" x="0" y="0" width="90" height="20"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{leads_status}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
                <jr:column width="90" uuid="769cd50d-72b1-42f9-9c21-6c9de4a257df">
                    <jr:tableHeader style="table 4_TH" height="30"/>
                    <jr:tableFooter style="table 4_TH" height="30"/>
                    <jr:columnHeader style="table 4_CH" height="30">
                        <staticText>
                            <reportElement uuid="68e27cb2-6b6d-436a-8b28-a495df0a2243" x="0" y="0" width="90" height="30"/>
                            <textElement/>
                            <text><![CDATA[Status Count]]></text>
                        </staticText>
                    </jr:columnHeader>
                    <jr:columnFooter style="table 4_CH" height="30"/>
                    <jr:detailCell style="table 4_TD" height="20">
                        <textField>
                            <reportElement uuid="6dcea81c-8d64-4e87-8c91-c958dba68005" x="0" y="0" width="90" height="20"/>
                            <textElement/>
                            <textFieldExpression><![CDATA[$F{Number_Of_Status}]]></textFieldExpression>
                        </textField>
                    </jr:detailCell>
                </jr:column>
            </jr:table>
        </componentElement>
    </band>
</detail>
<pageFooter>
    <band splitType="Stretch"/>
</pageFooter>
<summary>
    <band height="232" splitType="Stretch">
        <pie3DChart>
            <chart>
                <reportElement uuid="0838f48f-8053-4f24-b429-74124641b223" x="0" y="0" width="555" height="232"/>
                <chartTitle/>
                <chartSubtitle/>
                <chartLegend/>
            </chart>
            <pieDataset>
                <dataset>
                    <datasetRun subDataset="New Dataset 1" uuid="88beae40-88ab-4f36-9f8a-9206883f0a05"/>
                </dataset>
                <keyExpression><![CDATA[$F{leads_status}]]></keyExpression>
                <valueExpression><![CDATA[$F{Number_Of_Status}]]></valueExpression>
            </pieDataset>
            <pie3DPlot>
                <plot/>
                <itemLabel/>
            </pie3DPlot>
        </pie3DChart>
    </band>
</summary> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:10:46.860

这个链接为我解决了这个问题：http: [//isura777.blogspot.co.il/2011/10/pass-parameters-from-main-report-to.html](http://isura777.blogspot.co.il/2011/10/pass-parameters-from-main-report-to.html)

数据集中的参数需要映射到主报表参数中。只有这样，主报表才能识别数据集中定义的参数。

# session-timeout - Shiro 过期会话处理

> ID：13840678
> 
> 赞同：8
> 
> 时间：2012-12-12T13:16:23.527
> 
> 标签：session-timeout, shiro

我的独立应用程序使用**Shiro**进行**安全管理**。我遇到了过期会话的问题。如果用户会话过期并且当我尝试重新登录用户时，我会收到以下异常。有人可以帮忙吗？

```
org.apache.shiro.session.UnknownSessionException：没有 id 为 [d32af383-5f26-463f-a2f0-58a0e82c7890] 的会话
 在 org.apache.shiro.session.mgt.eis.AbstractSessionDAO.readSession(AbstractSessionDAO.java:170)
 在 org.apache.shiro.session.mgt.DefaultSessionManager.retrieveSessionFromDataSource（DefaultSessionManager.java:236）
 在 org.apache.shiro.session.mgt.DefaultSessionManager.retrieveSession（DefaultSessionManager.java:222）
 在 org.apache.shiro.session.mgt.AbstractValidatingSessionManager.doGetSession(AbstractValidatingSessionManager.java:118)
 在 org.apache.shiro.session.mgt.AbstractNativeSessionManager.lookupSession(AbstractNativeSessionManager.java:105)
 在 org.apache.shiro.session.mgt.AbstractNativeSessionManager.lookupRequiredSession(AbstractNativeSessionManager.java:109)
 在 org.apache.shiro.session.mgt.AbstractNativeSessionManager.stop(AbstractNativeSessionManager.java:238)
 在 org.apache.shiro.session.mgt.DelegatingSession.stop(DelegatingSession.java:127)
 在 org.apache.shiro.session.ProxiedSession.stop(ProxiedSession.java:107)
 在 org.apache.shiro.subject.support.DelegatingSubject$StoppingAwareProxiedSession.stop(DelegatingSubject.java:419)
 在 org.apache.shiro.session.ProxiedSession.stop(ProxiedSession.java:107)
 在 org.apache.shiro.subject.support.DelegatingSubject$StoppingAwareProxiedSession.stop(DelegatingSubject.java:419)

```

我正在使用spring来配置shiro

```
<bean id="securityManager" class="org.apache.shiro.mgt.DefaultSecurityManager"> 
    <property name="realm" ref="myRealm"/>
    <property name="sessionManager.globalSessionTimeout" value="3600000" />
</bean> 
<bean id="lifecycleBeanPostProcessor" class="org.apache.shiro.spring.LifecycleBeanPostProcessor"/> 
<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">  
    <property name="staticMethod" value="org.apache.shiro.SecurityUtils.setSecurityManager"/> 
    <property name="arguments" ref="securityManager"/> 
</bean> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:46:33.067

我在使用远程 ejb 进行身份验证时遇到了同样的问题。

作为一种解决方法，第一次登录尝试是在 try/catch 块中捕获`UnknownSessionException`. `Subject`然后从头开始构建 A以再次登录用户。

```
UsernamePasswordToken token = new UsernamePasswordToken(username, password);
try {
    subject.login(token);
} catch (UnknownSessionException use) {
    subject = new Subject.Builder().buildSubject();
    subject.login(token);
    session = subject.getSession(true);
} 
```

# c# - 针对 Active Directory 验证 NT 和 LM 哈希

> ID：13840679
> 
> 赞同：3
> 
> 时间：2012-12-12T13:16:35.757
> 
> 标签：c#, windows, authentication, hash, active-directory

我正在使用 NTLM 协议编写 Web 应用程序身份验证用户。

我已成功从客户端获取密码的 NT 和 LM 哈希。我如何针对 Active Directory 验证它们以确保密码正确。

我正在使用 C#，但我认为我也可以调用本机库。

**编辑**：我看不出拒绝投票的理由。NTLM(v2) 协议已经过时，因此很难找到有关如何处理它的相关信息。尤其是在像 C# 这样的现代语言中。

但我发现了两种可能的方法：

*   使用 Windows 的本机 SSPI 调用（Microsoft 不推荐），但可以通过适当的包装。幸运的是，有一个例子： http: [//pinvoke.net/default.aspx/secur32/InitializeSecurityContext.html](http://pinvoke.net/default.aspx/secur32/InitializeSecurityContext.html)这种方法似乎有效。我能够验证帐户。但是仍然存在一些问题。例如在客户端的 HTTP 请求之间传输有关服务器安全上下文的信息，调用不安全的代码以及无法在其他系统上执行此类操作。
*   尝试通过`System.Net.Security.NegotiateStream`. 这个想法很好，但不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T17:26:08.870

我强烈建议你做一些研究——从你的[另一个问题](https://stackoverflow.com/questions/13805704/c-sharp-helper-classes-to-implement-ntlm-authorization/)的答案中阅读该[文件](http://davenport.sourceforge.net/ntlm.html)将是一个好的开始——在这个问题收集更多的反对票之前。

您尝试实施的 - 密码验证 - 是安全敏感的，这意味着正确理解底层技术和现代安全概念非常重要。

现代安全架构的一个重要设计方面是抵抗所谓的重放攻击：防止窃听客户端和服务器之间连接的人记录身份验证挑战并在以后重放它。

NTLMv2 / NTLMv2 Session 使用这种技术——传统的 NT/LM（现在非常不鼓励）没有。

您只是不能将客户对*您*生成的某些挑战的响应传递给某个工具进行验证-因为这将完全丧失重放攻击抵抗的目的：该工具如何区分您和记录的 Joe Hacker你得到或产生他自己的回应？

它的工作方式是验证密码的实体（即 Active Directory）生成质询，而不是想要对其用户进行身份验证的 Web 服务器。

请不要在您的 Web 服务器中实现旧版 NT/LM 并将其称为“安全性”——事实上，与以纯文本形式发送密码相比，它只会为您提供很少的保护——破解它真的很简单而且很快使用当今现代硬件的所谓“加密”。阅读 davenport 文档，它列出了遗留 NT/LM 的问题。

如果您真的想要 NTLM（它的更安全版本），可以使用一些外部帮助程序。例如看看 Samba、Apache 和 Squid。Squid 使用一些外部工具来处理我认为基于 Samba 工具的 NTLM。

使用积极维护的外部工具（如 Samba）也意味着您将获得安全更新，因为如果您自己编写代码，这不仅仅是编写代码，还需要维护，您需要注意安全问题和修复它们。

# xml - 需要 XPath：如何保留子 XML 标记

> ID：13840681
> 
> 赞同：1
> 
> 时间：2012-12-12T13:16:37.880
> 
> 标签：xml, xslt

我有以下 XML

```
<root>
    <somecontent name='xyz'>
        <some>PQR</some> 
        (XYZ)
        <class>something</class>
    </somecontent>
</root> 
```

我正在尝试在字符串变量中获得以下输出

```
<some>PQR</some>  (XYZ) <class>something</class> 
```

我尝试了 xpath 的数量，但它们都返回了 `PQR (XYZ) something`

我也想保留子标签以供进一步处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:39:41.340

**使用**：

```
/*/somecontent/node() 
```

**要查看已选择的内容，请使用**：

```
<xsl:copy-of select="/*/somecontent/node()"/> 
```

# excel - 删除和计算重复项

> ID：13840683
> 
> 赞同：0
> 
> 时间：2012-12-12T13:16:52.550
> 
> 标签：excel, excel-formula, vba

如何删除重复条目以及如何计算 Microsoft Excel 中重复条目的数量？

*   例如，我在一列中有 100 个值，其中 5 个是唯一值。
*   我想找出 5 个唯一值和唯一值的计数，例如第一个值 21 次第二个值 19 次等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:29:09.093

我的[Duplicate Master](http://www.experts-exchange.com/A_2123.html)插件将完成所有这些以及更多

它包括处理*重复*或*唯一*摘要的字符串的选项

*   不区分大小写的匹配
*   `CLEAN`和或`TRIM`数据
*   忽略所有空格
*   甚至使用正则表达式

![在此处输入图像描述](../Images/81af53f6238356da128be487ecefc5a0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:29:09.810

1.  让你的列表使得每一行都是一个记录（相对于每一列一个记录）
2.  确保您的列表有一个标题行，每列都有一个唯一的名称。
3.  选择您的清单
4.  创建数据透视表
5.  将您的条目列拖到行标签
6.  将该列也拖到值
7.  对于此列，确保它读取 Count of ，如果不是这种情况，则通过左键单击它并选择 Value Field Settings 来更改它，在那里您可以为**Summarize value field by**选择计数。

完毕

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:27:07.423

将现有列表复制到右侧，将名称放在两个列表的顶部，然后使用第一个列表作为行标签创建数据透视表。将第二个列表作为要报告的值，并将其字段设置设置为“计数”。或者，您可以将所有 1 放在第二个列表中，并将其字段设置设置为“总和”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T07:30:53.560

您可以只复制该列，然后突出显示该列并在功能区中选择数据 -> 删除重复项以创建一个唯一列表。然后在唯一列表的右侧，只需使用 =CountIf() 找出有多少。

例如，如果您的唯一列表在 B 中，完整列表在 A 中，只需编写：

```
=Countif(A:A,B1) 
```

我同意支点很棒，但如果你不喜欢它们（像我一样，出于某种原因），那么公式可能是一条不错的路线。

# solr - 尽管模式浏览器显示条目，但 solr 索引为空

> ID：13840687
> 
> 赞同：0
> 
> 时间：2012-12-12T13:16:56.793
> 
> 标签：solr

我有一个非常奇怪的问题：我正在索引文档而没有任何问题。

当我去 solr 后端并搜索时，虽然在模式浏览器中我看到文档已被索引，但我没有得到任何结果。知道出了什么问题吗？

`hidden_b`标志设置`false`为。

感谢所有有用的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:52:11.670

```
/select/?q=*&version=2.2&start=0&rows=10&indent=on 
```

这是您的评论，但这实际上不起作用，拥有所有文件的正确方法是这样

```
/select/?q=*:*&version=2.2&start=0&rows=10&indent=on 
```

注意

```
*:* 
```

代替

```
* 
```

作为你的 q 参数。它的意思是“在任何字段中搜索任何值”（相当于mysql中的SELECT * FROM TABLE）

仅使用 * 不会给您带来任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:06:10.107

您的 schema.xml 中的配置有问题。我想您的默认搜索字段不包含任何数据。您必须将其他字段的内容复制到默认搜索字段。因此，我建议您定义一个仅用于搜索整个内容的字段。例如：

```
<field name="searchfield" type="mySearchField" indexed="true" stored="false" multiValued="true" /> 
```

之后，您更改默认搜索字段，在这种情况下是这样的：

```
<defaultSearchField>searchfield</defaultSearchField> 
```

你要做的最后一件事是：

```
<copyField source="anyfieldfromyours" dest="searchfield"/> 
```

确保您定义了我在此示例中使用的类型并复制了所有字段。如果您只有一个动态字段，则只需复制此字段。

此致

# multithreading - Delphi并行编程 - 多线程慢

> ID：13840688
> 
> 赞同：3
> 
> 时间：2012-12-12T13:17:13.417
> 
> 标签：multithreading, delphi, parallel-processing, delphi-xe2

再会，

一个网络摄像头类每秒大约有 30 帧，所有这些帧都将保存在一个向量中（就像一个队列）。然后 3 个异步线程将读取队列，并尝试完成它们的工作（以保存这些图像）。为什么队列满了？所以问题是这些线程比网络摄像头慢。

```
Procedure TSaveThread.Execute;
begin
   while not terminated  do
   begin
      elElement:=NIL;

      EnterCriticalSection(CritSect);
         if iElementsLength>=0 then
         begin
            elElement:=vElements[iElementsLength];
            Dec(iElementsLength);
         end;
      LeaveCriticalSection(CritSect);

      if elElement<>NIL then
      begin
         JpegImg.Assign(elElement.bmWebcam) ;
         JpegImg.SaveToFile('Save\'+elElement.sTime+'.jpg') ;
         elElement.Free;
      end;

      Sleep(20);
   end;
end; 
```

图像添加到队列中。

```
//------------------------------------------------------------------------------
Procedure TWebcam.OnSave(Sender:TObject; bmWebcam:TBitmap);
begin
   EnterCriticalSection(CritSect);
      inc(iElementsLength);
      vElements[iElementsLength]:=TElement.Create(bmWebcam);
   LeaveCriticalSection(CritSect);
end; 
```

创建线程。

```
for i:=0 to 2 do
    TSaveThread.Create(false); 
```

问题是，这些线程无法保存所有这些图像。为什么？如何改进我的线程？

德尔福版本：德尔福 XE2

网络摄像头帧大小：1280x760 或 960x600 此处完整源代码：[http ://pastebin.com/8SekN4TE](http://pastebin.com/8SekN4TE)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T13:59:34.280

我写了以下程序：

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, Vcl.Graphics, Vcl.Imaging.jpeg, 
  System.IOUtils, System.Diagnostics;

var
  i: Integer;
  bmp: TBitmap;
  jpeg: TJPEGImage;
  Stopwatch: TStopwatch;

begin
  bmp := TBitmap.Create;
  bmp.SetSize(1280, 760);
  jpeg := TJPEGImage.Create;
  Stopwatch := TStopwatch.StartNew;
  for i := 1 to 100 do begin
    jpeg.Assign(bmp);
    jpeg.SaveToFile('C:\desktop\temp\'+TPath.GetRandomFileName);
  end;
  Writeln(Stopwatch.ElapsedMilliseconds);
  Readln;
end. 
```

它将 1280x760 像素位图转换为 JPEG 图像，然后保存到磁盘。它这样做了 100 次。在我的机器上，这需要 9 秒。这是每秒 11 张图像的吞吐量。如果我跳过转换为 JPEG 的步骤并直接保存位图，我可以获得每秒 150 张图像的吞吐量。显然，转换为 JPEG 是一个瓶颈。

您正在寻找每秒 30 张图像。虽然多线程有帮助，但我怀疑你有一台四核机器。一个处理器用于网络摄像头，三个用于节省。因此，如果您只有三个可用线程，那么您可能很难达到每秒 30 帧所需的吞吐量。我的机器上的理论峰值是 33。如果你没有达到每秒 30 帧，那么你的队列显然会溢出。

显而易见的结论是，您需要找到一个更快的 JPEG 转换库。我很确定存在这样的库。例如，我认为这`libjpeg`应该快得多。

至于您现有的代码，有一些明显的缺陷：

1.  `Sleep`通常应该避免。在您的情况下，如果最后一次尝试提取图像成功，那么睡觉就是自杀。不要那样做。您应该使用真正的线程队列。一种允许对同步对象进行适当阻塞等待的方法。使用事件对象和您最喜欢的非线程队列自己制作一个实际上非常简单。
2.  你在打电话时拿着锁`TElement.Create(bmWebcam)`。这将阻碍扩展。分配`TElement.Create(bmWebcam)`给锁外的局部变量。然后分配给共享数据里面的锁。

因此，您可以通过首先删除对`Sleep`. 然后变成`TWebcam.OnSave`这样：

```
Procedure TWebcam.OnSave(Sender:TObject; bmWebcam:TBitmap);
var
  NewElement: TElement;
begin
  NewElement := TElement.Create(bmWebcam);
  EnterCriticalSection(CritSect);
    inc(iElementsLength);
    vElements[iElementsLength] := NewElement;
  LeaveCriticalSection(CritSect);
end; 
```

这些建议会有所帮助，但我认为您需要解决基本问题，即 JPEG 转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T13:52:29.200

多线程不会加速您的媒体（硬盘）。

事实上，它可以通过并行写访问**减慢速度。**

首先，您必须测量您的媒体（硬盘）是否能够在不到 33 毫秒的时间内存储图像 - 因为每 33.333 毫秒您将从网络摄像头获得一张新图像。

如果没有，你不能指望让它运行。

你应该（和/或）

*   使用更多硬盘（例如每个线程一个）
*   使用更多缓存（例如缓存控制器）
*   使用更快的硬盘（例如 SSD）
*   使用较小的图像（降低分辨率）
*   删除一些图像

如果你需要快，不要浪费时间

```
if elElement<>NIL then
  begin
     JpegImg.Assign(elElement.bmWebcam) ;
     JpegImg.SaveToFile('Save\' + elElement.sTime + '.jpg' );
     elElement.Free;
  end
else
  Sleep(20); 
```

OTL 不会帮助您更快地获取媒体，但会更干净:o)

所以你应该看看

# iphone - 带有 m34 参数的 CATransform3DRotate 需要知道角度以适合 特定高度

> ID：13840691
> 
> 赞同：1
> 
> 时间：2012-12-12T13:17:21.253
> 
> 标签：iphone, objective-c, ios, calayer, catransform3d

我有以下转换代码：

```
//preparing transform
CATransform3D basicTrans = CATransform3DIdentity;
basicTrans.m34 =1.0/-projection;

//calculating angle
double angle= [[self angleValueForBlockHeight:height] doubleValue];
double rangle;
if (up)
{
    rangle=angle/360*(2.0*M_PI);
}
else
{
    rangle=(360.0-angle)/360*(2.0*M_PI);
};

//NSLog(@"    angle: %g", angle);

//transforming
bView.layer.transform = CATransform3DRotate(basicTrans, rangle, 1.0f, 0.0f, 0.0f); 
```

如您所见，我正在使用特定角度旋转 bView 以在旋转后具有高度变量的值。正如你所看到的，我在那里有一个 angleValueForBlockHeight 方法。这种方法的代码非常难看。我的问题是如何计算此变换所需的角度。公式或代码段会很棒。请帮帮我。

感谢您的关注。

# jquery - 谷歌地图信息容器问题

> ID：13840696
> 
> 赞同：0
> 
> 时间：2012-12-12T13:17:31.717
> 
> 标签：jquery, google-maps

![在此处输入图像描述](../Images/cd770d3eddaddc663bd0364e38a57e4c.png)

我对 Google 地图集成有两个顾虑

1\. 信息容器正在像这样显示 2 。让它成为我单击的三个指针中的任何一个 信息容器显示在同一个地方。

我该如何解决这个问题

这是我的代码

```
for(var gMarker = 0; gMarker < userData.records.length ; gMarker++){
          var gMarkerThisImage = userData.records[gMarker].LatLng;
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(gMarkerThisImage[0], gMarkerThisImage[1]),
            map:      map,
            title:    'U.S.A center'
          });  
          (function(Marker) {
            console.log(gMarkerThisImage[0], gMarkerThisImage[1]);
            var contentString = '<div id="imageContent">'+
                              '<img src="'+userData.records[gMarker].imagePath+'" width = "100" height="100" alt = >'+
                              '</div>';
            var infowindow = new google.maps.InfoWindow({
                content: contentString , 
                position : new google.maps.LatLng(gMarkerThisImage[0], gMarkerThisImage[1])
            });
            google.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map,marker);
            });
            /*google.maps.event.addListener(marker, 'mouseout', function() {
                infowindow.close(map,marker);
            });*/
          }(marker));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:26:45.877

我已经重新组织了你的代码，看看它-

```
var infowindow = new google.maps.InfoWindow(); //declare it globally if you want one infowindow at a time.

for(var gMarker = 0; gMarker < userData.records.length ; gMarker++){
          var gMarkerThisImage = userData.records[gMarker].LatLng;
          var marker = new google.maps.Marker({
            position: new google.maps.LatLng(gMarkerThisImage[0], gMarkerThisImage[1]),
            map:      map,
            title:    'U.S.A center'
          });  
          (function(Marker) {
            console.log(gMarkerThisImage[0], gMarkerThisImage[1]);
            var contentString = '<div id="imageContent">'+
                              '<img src="'+userData.records[gMarker].imagePath+'" width = "100" height="100" alt = >'+
                              '</div>';
            myWindow(marker,contentstring);
            });
          }(marker));
        }

function myWindow(mark, content)
{
      google.maps.event.addListener(mark, 'mouseover', function() {
      infowindow.open(map,mark);
      infowindow.setContent(content);
      });
} 
```

# python - Xlib 控制键盘事件

> ID：13840697
> 
> 赞同：3
> 
> 时间：2012-12-12T13:17:33.167
> 
> 标签：python, linux, xlib

如何在 python (Xlib) 中模拟键盘按键 我一直在使用 Xlib-python 来模拟鼠标指针事件，例如移动和点击。但是我无法找到足够的帮助来为键盘按键做类似的事情。

首选平台：linux上的python

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:50:08.973

为此使用[xtest 。](http://pypi.python.org/pypi/xtest/1.0)作为额外的奖励，它还处理指针事件注入。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-09T23:31:02.797

我不是 Xlib 方面的专家，但我设法为 PyAutoGUI 模块拼凑了这段代码。这是可以模拟键盘键`keyDown()`的最小可行示例：`keyUp()`

```
# You must run `pip3 install python3-xlib` to get the Xlib modules.

import os

from Xlib.display import Display
from Xlib import X
from Xlib.ext.xtest import fake_input
import Xlib.XK

_display = Display(os.environ['DISPLAY'])

# Create the keyboard mapping.
KEY_NAMES = ['\t', '\n', '\r', ' ', '!', '"', '#', '$', '%', '&', "'", '(',
     ')', '*', '+', ',', '-', '.', '/', '0', '1', '2', '3', '4', '5', '6', '7',
     '8', '9', ':', ';', '<', '=', '>', '?', '@', '[', '\\', ']', '^', '_', '`',
     'a', 'b', 'c', 'd', 'e','f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o',
     'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', '{', '|', '}', '~',
     'accept', 'add', 'alt', 'altleft', 'altright', 'apps', 'backspace',
     'browserback', 'browserfavorites', 'browserforward', 'browserhome',
     'browserrefresh', 'browsersearch', 'browserstop', 'capslock', 'clear',
     'convert', 'ctrl', 'ctrlleft', 'ctrlright', 'decimal', 'del', 'delete',
     'divide', 'down', 'end', 'enter', 'esc', 'escape', 'execute', 'f1', 'f10',
     'f11', 'f12', 'f13', 'f14', 'f15', 'f16', 'f17', 'f18', 'f19', 'f2', 'f20',
     'f21', 'f22', 'f23', 'f24', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9',
     'final', 'fn', 'hanguel', 'hangul', 'hanja', 'help', 'home', 'insert', 'junja',
     'kana', 'kanji', 'launchapp1', 'launchapp2', 'launchmail',
     'launchmediaselect', 'left', 'modechange', 'multiply', 'nexttrack',
     'nonconvert', 'num0', 'num1', 'num2', 'num3', 'num4', 'num5', 'num6',
     'num7', 'num8', 'num9', 'numlock', 'pagedown', 'pageup', 'pause', 'pgdn',
     'pgup', 'playpause', 'prevtrack', 'print', 'printscreen', 'prntscrn',
     'prtsc', 'prtscr', 'return', 'right', 'scrolllock', 'select', 'separator',
     'shift', 'shiftleft', 'shiftright', 'sleep', 'space', 'stop', 'subtract', 'tab',
     'up', 'volumedown', 'volumemute', 'volumeup', 'win', 'winleft', 'winright', 'yen',
     'command', 'option', 'optionleft', 'optionright']

keyboardMapping = dict([(key, None) for key in KEY_NAMES])
keyboardMapping.update({
    'backspace':         _display.keysym_to_keycode(Xlib.XK.string_to_keysym('BackSpace')),
    '\b':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('BackSpace')),
    'tab':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Tab')),
    'enter':             _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Return')),
    'return':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Return')),
    'shift':             _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Shift_L')),
    'ctrl':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Control_L')),
    'alt':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Alt_L')),
    'pause':             _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Pause')),
    'capslock':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Caps_Lock')),
    'esc':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Escape')),
    'escape':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Escape')),
    'pgup':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Page_Up')),
    'pgdn':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Page_Down')),
    'pageup':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Page_Up')),
    'pagedown':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Page_Down')),
    'end':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('End')),
    'home':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Home')),
    'left':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Left')),
    'up':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Up')),
    'right':             _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Right')),
    'down':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Down')),
    'select':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Select')),
    'print':             _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Print')),
    'execute':           _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Execute')),
    'prtsc':             _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Print')),
    'prtscr':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Print')),
    'prntscrn':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Print')),
    'printscreen':       _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Print')),
    'insert':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Insert')),
    'del':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Delete')),
    'delete':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Delete')),
    'help':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Help')),
    'winleft':           _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Super_L')),
    'winright':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Super_R')),
    'apps':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Super_L')),
    'num0':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_0')),
    'num1':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_1')),
    'num2':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_2')),
    'num3':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_3')),
    'num4':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_4')),
    'num5':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_5')),
    'num6':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_6')),
    'num7':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_7')),
    'num8':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_8')),
    'num9':              _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_9')),
    'multiply':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_Multiply')),
    'add':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_Add')),
    'separator':         _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_Separator')),
    'subtract':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_Subtract')),
    'decimal':           _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_Decimal')),
    'divide':            _display.keysym_to_keycode(Xlib.XK.string_to_keysym('KP_Divide')),
    'f1':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F1')),
    'f2':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F2')),
    'f3':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F3')),
    'f4':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F4')),
    'f5':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F5')),
    'f6':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F6')),
    'f7':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F7')),
    'f8':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F8')),
    'f9':                _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F9')),
    'f10':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F10')),
    'f11':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F11')),
    'f12':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F12')),
    'f13':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F13')),
    'f14':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F14')),
    'f15':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F15')),
    'f16':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F16')),
    'f17':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F17')),
    'f18':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F18')),
    'f19':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F19')),
    'f20':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F20')),
    'f21':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F21')),
    'f22':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F22')),
    'f23':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F23')),
    'f24':               _display.keysym_to_keycode(Xlib.XK.string_to_keysym('F24')),
    'numlock':           _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Num_Lock')),
    'scrolllock':        _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Scroll_Lock')),
    'shiftleft':         _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Shift_L')),
    'shiftright':        _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Shift_R')),
    'ctrlleft':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Control_L')),
    'ctrlright':         _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Control_R')),
    'altleft':           _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Alt_L')),
    'altright':          _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Alt_R')),
    # These are added because unlike a-zA-Z0-9, the single characters do not have a
    ' ': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('space')),
    'space': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('space')),
    '\t': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Tab')),
    '\n': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Return')),  # for some reason this needs to be cr, not lf
    '\r': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Return')),
    '\e': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('Escape')),
    '!': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('exclam')),
    '#': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('numbersign')),
    '%': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('percent')),
    '$': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('dollar')),
    '&': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('ampersand')),
    '"': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('quotedbl')),
    "'": _display.keysym_to_keycode(Xlib.XK.string_to_keysym('apostrophe')),
    '(': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('parenleft')),
    ')': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('parenright')),
    '*': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('asterisk')),
    '=': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('equal')),
    '+': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('plus')),
    ',': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('comma')),
    '-': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('minus')),
    '.': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('period')),
    '/': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('slash')),
    ':': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('colon')),
    ';': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('semicolon')),
    '<': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('less')),
    '>': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('greater')),
    '?': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('question')),
    '@': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('at')),
    '[': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('bracketleft')),
    ']': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('bracketright')),
    '\\': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('backslash')),
    '^': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('asciicircum')),
    '_': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('underscore')),
    '`': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('grave')),
    '{': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('braceleft')),
    '|': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('bar')),
    '}': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('braceright')),
    '~': _display.keysym_to_keycode(Xlib.XK.string_to_keysym('asciitilde')),
})

for c in """abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890""":
    keyboardMapping[c] = _display.keysym_to_keycode(Xlib.XK.string_to_keysym(c))

def isShiftCharacter(character):
    """Returns True if the key character is uppercase or shifted."""
    return character.isupper() or character in '~!@#$%^&*()_+{}|:"<>?'

def keyDown(key):
    """Performs a keyboard key press without the release. This will put that
    key in a held down state.

    NOTE: For some reason, this does not seem to cause key repeats like would
    happen if a keyboard key was held down on a text field.

    Args:
      key (str): The key to be pressed down. The valid names are listed in
      pyautogui.KEY_NAMES.

    Returns:
      None
    """
    if key not in keyboardMapping or keyboardMapping[key] is None:
        return

    if type(key) == int:
        fake_input(_display, X.KeyPress, key)
        _display.sync()
        return

    needsShift = isShiftCharacter(key)
    if needsShift:
        fake_input(_display, X.KeyPress, keyboardMapping['shift'])

    fake_input(_display, X.KeyPress, keyboardMapping[key])

    if needsShift:
        fake_input(_display, X.KeyRelease, keyboardMapping['shift'])
    _display.sync()

def keyUp(key):
    """Performs a keyboard key release (without the press down beforehand).

    Args:
      key (str): The key to be released up. The valid names are listed in
      KEY_NAMES.

    Returns:
      None
    """

    """
    Release a given character key. Also works with character keycodes as
    integers, but not keysyms.
    """
    if key not in keyboardMapping or keyboardMapping[key] is None:
        return

    if type(key) == int:
        keycode = key
    else:
        keycode = keyboardMapping[key]

    fake_input(_display, X.KeyRelease, keycode)
    _display.sync() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T14:57:39.913

以防万一任何 Windows 用户偶然发现这个问题：

~~[https://gist.github.com/Audionautics/2906125](https://gist.github.com/Audionautics/2906125)~~

链接可能已损坏，这是我用来构建的类似 Python 代码块：

```
import time
import win32api, win32con

VK_CODE = {'left_arrow':0x25,
           'spacebar':0x20,
           'right_arrow':0x27}

def press(x):
    win32api.keybd_event(VK_CODE[x], 0,0,0)
    win32api.keybd_event(VK_CODE[x],0 ,win32con.KEYEVENTF_KEYUP ,0)

def play():
    time.sleep(1)
    s = time.time()
    while time.time() - s < 15:
        press("left_arrow")
        press("right_arrow")
        press("left_arrow")
        press("right_arrow")
        press('spacebar')  

play() 
```

归功于：

[GitHub 上的 chriskieh](https://gist.github.com/chriskiehl/3287367)

# php - Wordpress：如何为移动用户显示不同的主题

> ID：13840700
> 
> 赞同：0
> 
> 时间：2012-12-12T13:17:41.783
> 
> 标签：php, wordpress, mobile-website

我想为手机特别是 iphone 和 android 访问者展示一个不同的主题。是`WPtouch`的插件很好的解决方案，但我想展示全新`jquery mobile`的基于移动的主题。

在移动设备中检测到用户后，如何为用户显示移动主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:42:08.297

首先，您需要创建一个 WordPress 插件，因为在 functions.php 中实现主题切换的逻辑为时已晚，因为它只有在相应的主题确实已经应用时才会被调用！所以你需要在插件中插入你的逻辑（插件文件在主题文件之前执行）然后使用以下过滤器，将你的检测逻辑放在相应的函数中（`get_template_for_device`和`get_stylesheet_for_device`）：

```
 add_filter('template', 'get_template_for_device');
    add_filter('stylesheet', 'get_stylesheet_for_device');
    add_filter('option_template', 'get_template_for_device');
    add_filter('option_stylesheet', 'get_stylesheet_for_device'); 
```

就个人而言，我已经实现了一个 WURFL 解决方案来检测服务器端的设备，具有相当好的安全性，因为检测用户代理字符串中的字符串的简单方法并不是最可靠的（而且我还需要额外的设备功能信息，只有 WURFL 可以提供） . 我的解决方案是：如果我设置的 deviceinfo cookie 中没有存储数据，我执行 WURFL 进行设备检测，将所有信息存储在 cookie 中。在后续访问或后续页面中，我直接从 cookie 中获取信息并使用上述过滤器提供适当的主题，而无需实例化 WURFL 对象。否则，您可以使用更简单的逻辑来读取用户代理字符串（就像 WPTouch 所做的那样）：它不太可靠，但老实说，它的工作效率超过 90%（根据我自己的经验，但我可能是错的，特别是如果你必须考虑某些地理区域），所以它就足够了。GBD 刚刚在他的评论中给了你一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:39:11.177

这个插件似乎很适合这个任务 [http://wordpress.org/extend/plugins/any-mobile-theme-switcher/](http://wordpress.org/extend/plugins/any-mobile-theme-switcher/)

# android - facebook 无法解析或不是字段

> ID：13840702
> 
> 赞同：0
> 
> 时间：2012-12-12T13:17:55.710
> 
> 标签：android, facebook

```
String queryApp = "SELECT display_name, namespace  FROM application WHERE app_id=7256235347";
                Bundle paramsApp = new Bundle();
                paramsApp.putString("method", "fql.query");
                paramsApp.putString("query", queryApp);
                String resultApp = Util.facebook.request(paramsApp);

                Log.e("APP RESULT", resultApp);

                JSONArray JAApp = new JSONArray(resultApp);

                for (int i = 0; i < JAApp.length(); i++) {
                    JSONObject JOApp = JAApp.getJSONObject(i);

                    String getDisplayName = JOApp.getString("display_name");
                    Log.e("DISPLAY NAME", getDisplayName);
                } 
```

上面一行中的“facebook”显示错误..有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:45:02.077

`Util.facebook`里面没有`com.facebook.android.Util`

正确的方法是

```
import com.facebook.android.Facebook;
import com.facebook.android.AsyncFacebookRunner;

...

Facebook facebook = new Facebook(YOUR_APP_ID);
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);

// all your paramsApp bundle code
...

mAsyncRunner.request(paramsApp, new BaseRequestListener() {
   ...
}); 
```

# c++ - 在框架上用 opencv 绘制矩形

> ID：13840703
> 
> 赞同：6
> 
> 时间：2012-12-12T13:17:56.613
> 
> 标签：c++, opencv

我有一个框架，想在特定位置绘制一个矩形，该矩形具有：

```
#include "opencv2/opencv.hpp"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include<conio.h>

 int main () {
cv::Mat frame = cv::imread("cmd.png");
    cvRectangle(
            &frame,
            cvPoint(5,10),
            cvPoint(20,30),
            cvScalar(255,255,255)
       );
     cv::imshow("test " , frame);
while (cv::waitKey() != 23) ;
return 1; 
 } 
```

wenn 我运行代码时出现内存错误。

```
 Unhandled exception at 0x000007fefd42caed in OpenCV_capture.exe: Microsoft C++ 
exception: cv::Exception at memory location 0x0018ead0.. 
```

知道为什么我会得到这个，我该如何解决

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-12T14:10:42.087

您将 C++ API 与 C API 混为一谈。使用“cv”命名空间中的 rectangle 函数而不是“cvRectangle”：

```
cv::rectangle(
    frame,
    cv::Point(5, 10),
    cv::Point(20, 30),
    cv::Scalar(255, 255, 255)
); 
```

此外，您正在尝试在未打开的窗口中显示图像：

```
int main() {
    cv::namedWindow("test ");

    // ... 
```

如果图像没有正确加载，这也可能会导致错误，因为您正在尝试在空图像上绘图。

```
if (frame.data != NULL) {
    // Image successfully loaded
    // ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T05:37:50.310

此代码有效：

```
#include <opencv\cv.h>
#include <opencv\highgui.h>
int main()
{
//Window 
cvNamedWindow("Drawing",CV_WINDOW_AUTOSIZE);
//Image loading
IplImage* original=cvLoadImage("i.jpg");
 if(Original==NULL ) 
{
    puts("ERROR: Can't upload frame");
    exit(0);
}

cvRectangle(original,cvPoint(100,50),cvPoint(200,200),CV_RGB(255,0,0),5,8);

 //Showing the image
 cvShowImage("Drawing",original);

 cvWaitKey(0);
 //CleanUp
 cvReleaseImage(&original);
 cvDestroyAllWindows();

} 
```

# c# - 仅在调试模式下捆绑 css/js

> ID：13840706
> 
> 赞同：1
> 
> 时间：2012-12-12T13:17:59.953
> 
> 标签：c#, asp.net-mvc-4, visual-studio-debugging, asp.net-optimization, bundling-and-minification

有没有办法让 MVC4 的捆绑系统*仅*在调试模式下包含脚本/样式？

例如，我有很多调试模式脚本可以帮助我调试系统。我显然不希望它们在系统处于发布模式时呈现。

我想到了使用这样的块：

```
 bundles.Add(
    new ScriptBundle("mybundle")
    .Include(
      "~/scripts/foo.js",
      "~/scripts/bar.js"
      #if DEBUG
      ,"~/scripts/baz-debug.js"
      #endif
    )
  ); 
```

但调试模式应通过`web.config`.

那么正确的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:30:09.947

要检查是否启用了调试，您可以使用以下命令：

```
HttpContext.Current.IsDebuggingEnabled 
```

前提是 HttpContext 是可访问的。如果没有，更长的方法将是这个：

```
var isDebug =(System.Web.Configuration.CompilationSection)ConfigurationManager.GetSection("system.web/compilation").Debug; 
```

这两个建议都来自这篇文章：[How do I check if Debug is enabled in web.config](https://stackoverflow.com/questions/542875/how-do-i-check-if-debug-is-enabled-in-web-config)。

我实际上有条件地添加模块的方法是首先创建一个`Dictionary<string, bool>`脚本路径以及是否应该在发布模式下添加它们。

当您调用程序时，如果调试为假，则只需将字典过滤为元素集合：

```
var includes = dict.Where(x => x.Value).Select(x => x.Key); 
```

然后将结果传递给您的`Include`语句。

# sql-server - 如何在 SQL 2008 Server 中获取日期分隔

> ID：13840711
> 
> 赞同：0
> 
> 时间：2012-12-12T13:18:08.570
> 
> 标签：sql-server, xquery

嗨，我有以下查询，它给了我想要的结果，除了一件事。

我的查询：

```
(SELECT
    (SELECT
        '3'       as '@CategoryDepth',
        'CIMtrek_SelectedPage' as '@SelectedPage',
        'CIMtrek_ParentID'     as '@ParentID',
        'CIMtrek_LstParm'      as '@LstParm',
        'CIMtrek_SearchParm'   as '@SearchParm',
        'CIMtrek_Search_No'    as '@isSearch',
        'CIMtrek_CDS1'     as '@ViewName'
        FOR XML PATH('AppConfig'), TYPE ),
        (SELECT
        RES.Header as '@Header'
        FROM (
         SELECT 'Date' AS Header
 UNION ALL 
 SELECT 'MY MENU' AS Header
        ) AS RES

        FOR XML PATH('ColumnHeader'), TYPE ),

        (SELECT
        RES.Param as '@Param'
        FROM (
         SELECT 'CIMtrek_daily_shipdate' AS Param
 UNION ALL 
 SELECT 'MY PARM' AS Param
        ) AS RES

        FOR XML PATH('Params'), TYPE ),
        (SELECT
        RES.Search as '@Search'
        FROM (
         SELECT 'Date|[T1].[CIMtrek_daily_shipdate] ' AS Search
 UNION ALL 
 SELECT 'Department|[T1].[CIMtrek_daily_PackingMethod] ' AS Search
 UNION ALL 
 SELECT 'Rush|[T1].[CIMtrek_daily_Rush] ' AS Search
 UNION ALL 
 SELECT 'Customer Name|[T1].[CIMtrek_daily_CustomerName_1] ' AS Search
 UNION ALL 
 SELECT 'Schedule Name|[T1].[CIMtrek_daily_schedule_name] ' AS Search
 UNION ALL 
 SELECT 'Carrier|[T1].[CIMtrek_daily_carrier] ' AS Search
 UNION ALL 
 SELECT 'Order|[T1].[CIMtrek_daily_order] ' AS Search
 UNION ALL 
 SELECT 'Load #|[T1].[CIMtrek_daily_load] ' AS Search
 UNION ALL 
 SELECT 'Pieces|[T1].[CIMtrek_daily_pieces] ' AS Search
 UNION ALL 
 SELECT 'Cases|[T1].[CIMtrek_daily_cases] ' AS Search
 UNION ALL 
 SELECT 'Weight|[T1].[CIMtrek_daily_weight] ' AS Search
 UNION ALL 
 SELECT 'Cube|[T1].[CIMtrek_daily_cube] ' AS Search
 UNION ALL 
 SELECT 'MY SEARCH|Search' AS Search
        ) AS RES

        FOR XML PATH('Search'), TYPE ),
        (SELECT
        (
        SELECT COUNT(*) FROM (
        SELECT
         ISNULL([T1].[CIMtrek_daily_shipdate],'')  AS CIMtrek_daily_shipdate

        FROM
            [CIMtrek_SystemTable_DatawareHouse] [T1] WHERE  LEN(LTRIM(RTRIM(ISNULL(LTRIM(RTRIM([T1].[CIMtrek_daily_shipdate])),'')))) != 0  AND 
 1 = 1
            AND [T1].[CIMtrek_form] in ('Compliance Daily Shipments') 
            AND [T1].[CIMtrek_daily_status] not in ('Complete')
            AND [T1].[CIMtrek_Archive] not in ('Archived')
        GROUP BY
         ISNULL([T1].[CIMtrek_daily_shipdate],'') 

        ) AS COUNTS1
        ) AS '@CIMtrek_COUNT' ,
        '1' AS '@CIMtrek_COUNT_Level',
        (SELECT
        [T1].[ROW] AS '@Row'
        ,newid() AS '@UnqCimID'
        <!-- 
            changed this to format date to be DD/MM/YYYY

         , [T1].[CIMtrek_daily_shipdate] AS '@CIMtrek_daily_shipdate'

           -->
        ,CONVERT(VARCHAR(10),[T1].[CIMtrek_daily_shipdate],106) AS '@CIMtrek_daily_shipdate'

        FROM (SELECT
        ROW_NUMBER() OVER(ORDER BY  ISNULL([T1].[CIMtrek_daily_shipdate],'') 
 ASC) ROW
        , ISNULL([T1].[CIMtrek_daily_shipdate],'')  AS CIMtrek_daily_shipdate

        FROM
        [CIMtrek_SystemTable_DatawareHouse] [T1]  WHERE  LEN(LTRIM(RTRIM(ISNULL(LTRIM(RTRIM([T1].[CIMtrek_daily_shipdate])),'')))) != 0  AND 
 1 = 1
            AND [T1].[CIMtrek_form] in ('Compliance Daily Shipments') 
            AND [T1].[CIMtrek_daily_status] not in ('Complete')
            AND [T1].[CIMtrek_Archive] not in ('Archived')
        GROUP BY
         ISNULL([T1].[CIMtrek_daily_shipdate],'') 
) T1
        WHERE [T1].ROW BETWEEN 1 and 10
        order by convert(date,[T1].[CIMtrek_daily_shipdate],103)
        FOR XML PATH('Data'), TYPE
        )FOR XML PATH('Data'), TYPE) )FOR XML PATH('Root') 
```

在上面的查询中，我评论了以下行：

```
<!-- 
            changed this to format date to be DD/MM/YYYY

         , [T1].[CIMtrek_daily_shipdate] AS '@CIMtrek_daily_shipdate'

           --> 
```

并输入以下行

```
,CONVERT(VARCHAR(10),[T1].[CIMtrek_daily_shipdate],106) AS '@CIMtrek_daily_shipdate' 
```

这会将日期转换为 : `01-Nov-12 12:00:00 AM`，`01-Nov-12`它也很好，但在某些情况下我得到日期`01-Nov-12 12:45:21 AM`，在这种情况下我必须显示日期和时间。

所以实际上我不应该显示日期时间是什么时候，而是显示日期时间是 `01-Nov-12 12:00:00 AM` 什么时候`01-Nov-12 12:45:21 AM`。

如何在查询本身中处理这个问题？

请帮助我得到这个。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:52:18.003

通过减去 Date 部分，您可以确定 DateTime 列是否实际包含时间元素，然后可以适当地格式化，例如..

```
Case When [T1].[CIMtrek_daily_shipdate]-Convert(Date,[T1].[CIMtrek_daily_shipdate]) = 0
     Then Convert(varchar(12), [T1].[CIMtrek_daily_shipdate], 113)
     Else Convert(varchar(20), [T1].[CIMtrek_daily_shipdate], 113)
     End AS '@CIMtrek_daily_shipdate' 
```

我使用了日期格式 113，它为我提供了格式`12 Dec 2012 13:43:44`，但任何其他包含时间元素的日期格式都可以使用，只需更改`Convert()`函数调用即可。

这假定源列是 DateTime，并且您可以从 DateTime 列中减去日期部分，如图所示。如果源列是 varchar，那么您可以通过将不需要的字符串替换为空字符串来简单地删除任何不需要的时间元素。例如

```
REPLACE([T1].[CIMtrek_daily_shipdate],' 12:00:00 AM','') AS '@CIMtrek_daily_shipdate' 
```

假设时间实际上是以这种方式格式化的。您还可以嵌套`REPLACE()`函数，例如

```
REPLACE(REPLACE([T1].[CIMtrek_daily_shipdate],' 12:00:00 AM',''),' 12:00 AM','') AS '@CIMtrek_daily_shipdate' 
```

# html - 创建正确的媒体查询断点以覆盖移动设备和平板电脑

> ID：13840712
> 
> 赞同：0
> 
> 时间：2012-12-12T13:18:14.053
> 
> 标签：html, css, mobile, media-queries

基本上，我正在构建一个需要 2 个媒体查询的网站，1 个将涵盖移动设备，另一个将涵盖平板电脑。这就是要求。

我遇到的问题是，对于移动设备，最大宽度必须为 640 像素才能覆盖三星 Galaxy S3，但对于平板电脑，Nexus 7 纵向最大宽度为 599，因此我冒着手机落入平板电脑查询的风险。

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:22:19.537

您可以应用此设置。它运作良好（至少对我而言）：

```
/* Large desktop */
@media (min-width: 1200px) { ... }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { ... }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { ... }

/* Landscape phones and down */
@media (max-width: 480px) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:26:56.140

我有一个非常相似的问题。我已经尝试了所有可能的媒体查询。为了区分平板电脑和手机，您必须使用`max-device-width`物理尺寸的媒体查询，而不是像素宽度的媒体查询。

这是我用于横向定位平板电脑的 CSS 的摘录，请看一下`max-device-width`：

```
@media screen and (max-device-width: 1280px) and (orientation: portrait),
screen and (max-device-width: 23cm) and (orientation: landscape),
screen and (orientation: landscape) and (max-device-width: 1280px) and (max-device-height: 1000px) 
```

我在 iPad（非视网膜）、iPad 2（视网膜）和 ASUS Transformer 平板电脑上使用了这个查询。在工作中指定尺寸`cm`就好了，英寸`in`在某些平板电脑上不起作用（目前不记得哪些平板电脑）。

`max-device-width`媒体查询参考官方说明：http: [//www.w3.org/TR/css3-mediaqueries/#device-width](http://www.w3.org/TR/css3-mediaqueries/#device-width)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T03:33:58.557

请参阅手机和平板电脑：如果您在测试页面中运行它，您可以在实际设备上找到正确的尺寸。

[https://jsfiddle.net/t2bybrdu/](https://jsfiddle.net/t2bybrdu/)

html:

```
<div class="body-test">
      <div class="center green-btn">Browser size tester:</div>
      </br>
      </br>
      <div class="result"></div>
</div> 
```

js：

```
$(".body-test .center").click(function(){
    var browser_size = $( window ).width();
    console.log( browser_size + 20);
    console.log( "viewport size: " + Number(20 + browser_size) );
    $(".body-test .result").text("Your viewport size is: " + Number(browser_size + 20) + "px");     
}); 
```

CSS：

```
.green-btn {
    display: block;
    background: green;
    color: white;
    padding: 10px 20px;
    font-size: 18px;
    font-weight: bold;
    border-radius: 4px;
    width: 180px;
}
.body-test {
    padding-top: 120px;

}
.body-test  .result {
    text-align: center;
    font-weight: bold;
    padding: 3em auto;
}

.body-test  .center {
    position: relative;
    left: calc(50% - 100px); 
    cursor: pointer;
} 
```

# java - Salesforce SOQL 返回错误集

> ID：13840718
> 
> 赞同：0
> 
> 时间：2012-12-12T13:18:29.643
> 
> 标签：java, salesforce, soql

我正在执行 SOQL，当我开除时

`SELECT COUNT(ID) FROM Contact`

然后它返回 12958 no of result set 但是当我开火时

```
SELECT LastName, ts2__Text_Resume__c FROM Contact 
```

然后只有 890 个结果出现，尽管第二个查询中结果集的大小超过 4mb，所以我想知道为什么第二个查询给出的行数更少。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:32:16.350

结果是分页的，所以你在第一页有 890 行，然后你需要调用 queryMore 来获取下一页结果。请参阅查询/查询/查询结果文档中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:36:00.010

我们需要考虑两个 JSON 对象 nextRecordsUrl，当我们得到响应时也完成了，一旦我们检查完成是真的，那么所有的结果集都被获取了。

# mongodb - MongoDb 聚合中的条件展开？

> ID：13840720
> 
> 赞同：6
> 
> 时间：2012-12-12T13:18:31.973
> 
> 标签：mongodb, mongoose, aggregation-framework

我试图弄清楚是否有一种方法可以在 MongoDB 的聚合框架中编写条件展开。

我有一个这样的聚合命令：

```
models.Users.aggregate(
        {   // SELECT
        $project : { "sex" : 1,
                 "salesIndex":1
                }
        },
        {   // WHERE
            $match: {"salesIndex": {$gte: index}} 
        },              
        {   // GROUP BY y agregadores
            $group: {
                _id      : "$sex",
                sexCount : { $sum: 1 }
            }
        },
        { $sort: { sexCount: -1 } }
, function(err, dbres) {
         (...)
}); 
```

我想按部门添加一个可选过滤器。一个用户可以在一个或多个部门，这是它在数据库中的样子：

用户 _id 性别 salesIndex 部门 {[d1, d2, d3]}

如果我想搜索特定部门的用户，我会编写一个 $unwind 子句，然后按部门编写一个 $match。但是，我想对这两种情况使用相同的聚合命令，如下所示：

```
models.Users.aggregate(
        {   // SELECT
        $project : { "sex" : 1,
                 "salesIndex":1
                }
        },
        {   // WHERE
            $match: {"salesIndex": {$gte: index}} 
        },  

                    IF (filteringByDepartment){

                        $unwind departments here                            
                        $match by departmentId here
                    } 

        {   // GROUP BY y agregadores
            $group: {
                _id      : "$sex",
                sexCount : { $sum: 1 }
            }
        },
        { $sort: { sexCount: -1 } }
, function(err, dbres) {
         (...)
}); 
```

这可能吗，还是我需要 2 个聚合命令？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T13:40:37.487

在调用之前以编程方式构建聚合管道`aggregate`：

```
var pipeline = [];
pipeline.push(
    {   // SELECT
    $project : { "sex" : 1,
             "salesIndex":1
            }
    },
    {   // WHERE
        $match: {"salesIndex": {$gte: index}}
    }
);
if (filteringByDepartment) {
    pipeline.push(
        { $unwind: '$departments' },
        { $match: { departments: departmentId }}
    );
}    
pipeline.push(
    {   // GROUP BY y agregadores
        $group: {
            _id      : "$sex",
            sexCount : { $sum: 1 }
        }
    },
    { $sort: { sexCount: -1 } }
);

models.Users.aggregate(pipeline, function(err, dbres) {
    //...
}); 
```

# .net - 找不到文件错误 VB.net

> ID：13840722
> 
> 赞同：-3
> 
> 时间：2012-12-12T13:18:37.540
> 
> 标签：.net, vb.net

我有一个问题导致我的整个项目运行不正确。后来我发现是什么原因造成的，但我无法修复它。问题是我的 VB.net 应用程序找不到该文件，我 100% 确定该文件在那里。（老实说，我必须在 \bin\minecraft.jar 中打开 minecraft.jar，相对于应用程序。但我用文本文件尝试过，它也不起作用）

```
 Try
        Shell(Application.StartupPath + "\options.txt")
    Catch Ex As Exception
        MsgBox(ErrorToString) ' I've got file not found..
        MsgBox(Application.StartupPath + "\options.txt") 'Displays the path to my file, and in Explorer (Windows) it opens the file
    End Try 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:26:15.670

[`Shell`](http://msdn.microsoft.com/en-us/library/xe736fyk%28v=vs.71%29.aspx)需要一个可执行文件的路径。`FileNotFindException`即使文件不是可执行文件，它也会抛出一个。

从文档中：

> **例外**
> 
> FileNotFoundException - Shell 无法启动指定的程序。

* * *

如果您希望 Windows 决定使用哪个程序来打开您的文件，请[`Process.Start`](http://msdn.microsoft.com/en-us/library/53ezey2s%28v=vs.100%29.aspx)改用。

```
Process.Start(Application.StartupPath + "\options.txt") 
```

* * *

**编辑：**

好的，你完全改变了你的问题，但我很酷：

> “无法访问 jarfile C:\users\max korlaar\dropbox\max” 而且文件夹名称不是 max.. 它是 max & alex。

你的路径中有一个空格，所以你必须引用它（放在两个之间`"`）。

```
Dim args As String = "-jar  -natives""{1}"" -lwjgl""{2}"" ...etc..etc..." 
```

否则，java 可执行文件将无法区分您传递给它的参数。

# xml - Perl 生成动态 XML 文件

> ID：13840725
> 
> 赞同：2
> 
> 时间：2012-12-12T13:18:55.570
> 
> 标签：xml, perl

我有以下 XML，我想通过 Perl 脚本创建和填充数据。在这个 XML 中，我有一些属性的集合类型，即 primarySiteCollection。

如何动态填充和生成“primarySiteCollection”节点。在此 XML 中，primarySiteCollection 包含 3 个组织站点，但可以有 1 个或多个。

```
<TumorDetails>
    <personUpi>String</personUpi>
    <ageAtDiagnosis>3.14159E0</ageAtDiagnosis>
    <biopsyPathologyReportSummary>String</biopsyPathologyReportSummary>
    <primarySiteCollection>
        <tissueSite>
            <description>String1</description>
            <name>String1</name>
        </tissueSite>
        <tissueSite>
            <description>String2</description>
            <name>String2</name>
        </tissueSite>
        <tissueSite>
            <description>String3</description>
            <name>String3</name>
        </tissueSite>       
    </primarySiteCollection>
</TumorDetails> 
```

这是我的 Perl 脚本。我想动态生成包含属性集合类型的节点。

```
use strict;
use warnings;
use XML::Compile::Schema;

my $node = {
    personUpi                    => 'String',
    ageAtDiagnosis               => '3.14159E0',
    biopsyPathologyReportSummary => 'String',
    primarySiteCollection        => {
        tissueSite => {
            description => 'String',
            name        => 'String',
        },
    },
};

my $schema = XML::Compile::Schema->new('sample.xsd');
my $writer = $schema->compile(WRITER => 'TumorDetails');
my $doc = XML::LibXML::Document->new(q(1.0), q(UTF-8));

print $writer->($doc, $node)->toString; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T21:56:12.053

我认为这很简单，可以使用[XML::Simple](https://metacpan.org/module/XML%3a%3aSimple)安全地完成。如果它要复杂得多，并且您必须处理从对象派生的复杂数据类型，那么模式将非常有用。但为此，XML::Simple 可以。

```
#!/usr/bin/perl
use strict;
use warnings;

use XML::Simple;

my $tissueSite = [
  {
    description => 'String',
    name        => 'String',
  },
  {
    description => 'String2',
    name        => 'String2',
  },
];

my $data = {
  tumorDetails => {
    personUpi => 'String',
    ageAtDiagnosis => '3.14159E0',
    biopsyPathologyReportSummary => 'String',
    primarySiteCollection => {
        tissueSite => $tissueSite,
    },
  },
};

print XMLout($data, KeepRoot => 1, noAttr => 1 ); 
```

您可以将更多哈希添加到`$tissueSite`.

* * *

请记住，如果它变得更复杂，另一种方法更适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T11:28:01.420

我遵循上述方法，工作正常。

但是，如果我不知道 $tissueSite 的大小（它将具有的哈希数？）怎么办。它可以扩展/收缩到任何大小。

假设我将它们收集在数组中：@deription 和 @names 根据用户输入。

是否可以使用来自上述两个数组的运行时值创建 $tissueSite ？

# android - 日历仅返回星期几和时间 (HH:MM:SS)

> ID：13840726
> 
> 赞同：0
> 
> 时间：2012-12-12T13:18:59.813
> 
> 标签：android, time, calendar

```
public Calendar getDayOfTheWeekTimeCalendar() 
{ 
        Calendar calendar = Calendar.getInstance(); 
        calendar.set(Calendar.DAY_OF_WEEK, 5); 
        calendar.set(Calendar.HOUR_OF_DAY,
                8); 
        calendar.set(Calendar.SECOND, 0); 
        calendar.set(Calendar.MINUTE, 30); >
        return calendar; 
    } 
```

当我使用上述方法时，我得到日历为 Thrusday Dec 13 08:30:00 EST 2012 我的问题：我只设置了星期几、时间（小时、分钟和秒）为什么它给我日期，因为我只想要返回星期几和时间的日历

所以我的任务将是递归的，除了做一周并停止

这样我就可以在美国东部标准时间每个星期四的 8:30:00 执行一项任务，但不仅限于本周，即 12 月 13 日这一周

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:26:00.630

Calendar.getInstance() 获取当前日期/时间。你没有指定日期，所以是今天。

从Javadoc ...

与其他对语言环境敏感的类一样，Calendar 提供了一个类方法 getInstance，用于获取这种类型的普遍有用的对象。Calendar 的 getInstance 方法返回一个 Calendar 对象，其日历字段已用当前日期和时间初始化：

`Calendar rightNow = Calendar.getInstance();`

# c# - 将光标或插入点移动到特定页面？

> ID：13840727
> 
> 赞同：2
> 
> 时间：2012-12-12T13:19:00.527
> 
> 标签：c#, java, vb.net, itextsharp

一周前刚开始使用 iTextSharp - 你会认为有些事情是显而易见的，但显然不是。

我想在使用 PDFWriter 添加动态内容之前创建一个 PDF 报告结构（即线条、图像和静态文本）。此报告模板将用于三种类型的报告。

这意味着，我构建了页面，然后我想回到第 1 页并添加一些新内容，然后转到第 2 页并添加更多内容，然后转到第 3 页，依此类推。我会提前确定我需要的页数来构建模板，然后添加额外的内容。

创建页面没有问题。使用 GotoLocalPage 返回第 1 页（或我可能想要调用的任何页面）没有问题。但是我想添加的所有新的直接内容都在最后一页结束。

如何将光标或插入点（由于缺乏知识）移动到任何前一页并开始添加新内容？

我尝试过大纲、书签、锚点，但它们似乎都在向页面添加文本 - 是诸如不可见的锚点之类的东西（即，使用空字符串？）

我不想关闭文档并重新打开以添加其他内容 - 应该有一种方法可以移动到文档的任何给定部分并添加其他内容。

我添加了一些代码作为参考 - 代码是 VB.net，但我在解释 Java 或 C# 时没有任何问题 - 抱歉，我无法添加 StackFlow 不允许我添加的图像，因为我是新手！

```
Private Sub BuildPDFDocument(ByVal DocType As String, ByVal OutFileName As String, ByVal Pages As Integer)

    OutFile = New Document(PageSize.LETTER, 0, 0, 0, 0)

    OutFile.SetPageSize(PageSize.LETTER.Rotate())

    Try

        Using Writer = PdfWriter.GetInstance(OutFile, New FileStream(WorkingOutputFolder & OutFileName, FileMode.Create))

            OutFile.Open()

            '-------------------------------------------------------------------------------------------------------------------

            ContentByte = Writer.DirectContent

            For i = 1 To Pages

                If i > 1 Then OutFile.NewPage()

                AddTemplateImages()

                AddTemplateLines()

                AddTemplateText(DocType, i, Pages)

                AddColumnText()

                AddBarcodeEAN()

                AddBarcode39()

                AddBarcodeQR()

                'THIS WORKS BUT I DO NOT WANT TO ADD DYNAMIC CONTENT HERE 
                'I WANT TO BUILD TEMPLATE FIRST AND THEN GO BACK TO PAGE ONE AND ADD MORE CONTENT

                'AddDynamicContent(i)

            Next

            '-------------------------------------------------------------------------------------------------------------------

            Dim Action As PdfAction

            For i = 1 To Pages

                'Action = PdfAction.GotoLocalPage(i, New PdfDestination(PdfDestination.FIT), Writer)

                Action = PdfAction.GotoLocalPage(i, New PdfDestination(PdfDestination.XYZ, -1, 10000, 0), Writer)

                Writer.SetOpenAction(Action)

                'HERE IS THE PROBLEM - I WANT TO GO TO A SPECIFIC PAGE THEN ADD SOME CONTENT
                'WHEN DONE MOVE TO THE NEXT PAGE ADD SOME MORE CONTENT AND SO AND SO FORTH

                'BUT ALL THE CONTENT ENDS UP ON THE LAST PAGE REGARDLESS OF ME MOVING FROM PAGE TO PAGE

                'HOW DO I MOVE THE CURSOR or INSERTION POINT TO A LOCAL PAGE I HAVE CALLED
                'AND ADD NEW Chunks/Phrases/Paragraphs TO THAT PAGE

                AddDynamicContent(i)

            Next

            'GO BACK TO PAGE 1

            Action = PdfAction.GotoLocalPage(1, New PdfDestination(PdfDestination.FIT), Writer)

            Writer.SetOpenAction(Action)

            '-------------------------------------------------------------------------------------------------------------------

            OutFile.Close()

        End Using

    Catch ex As Exception

        MsgBox(ex.Message)

    End Try

End Sub

Private Sub AddDynamicContent(ByVal PageNumber As Integer)

    'JUST TESTING RIGHT NOW

    ContentByte.BeginText()

    '------------------------------------------------------------------------------

    ContentByte.SetFontAndSize(FontByName("TimesNewRoman"), 8)
    ContentByte.SetTextMatrix(58.0F, 333.0F)
    ContentByte.ShowText("DYNAMIC CONTENT ON PAGE " & PageNumber.ToString)

    '------------------------------------------------------------------------------

    ContentByte.EndText()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:59:00.130

iText(Sharp) 将页面的所有内容尽快刷新到 OutputStream。为什么？因为 iText 是为在高速和低内存使用至关重要的 Web 应用程序中生成 PDF 而编写的。

这意味着当您触发一个新页面时，就没有回头路了。当然有一些解决方法，例如

*   使用 PdfTemplate （例如添加“Y 页 X”，因为您通常在添加最后一页之前不知道 Y）。
*   分两次创建 PDF（一次使用`PdfWriter`，然后使用 操作`PdfStamper`）
*   创建多个 PDF，然后使用`PdfCopy`或连接它们`PdfSmartCopy`。

顺便说一句：看到有人以这种方式使用开放动作是很有趣的。如果您阅读过 PDF 参考，您会发现打开操作是在 Adob​​e Reader 中打开 PDF 时触发的操作。谁告诉你它可以用来在编程时从一个页面移动到另一个页面；-)

另外：您可以通过阅读文档为自己节省大量时间：http: [//itextpdf.com/book](http://itextpdf.com/book)（我是其中的作者）

# c# - Oracle 数组绑定导致数据被截断

> ID：13840734
> 
> 赞同：1
> 
> 时间：2012-12-12T13:19:38.253
> 
> 标签：c#, oracle, odp.net

我正在使用数组绑定将一系列 Python 脚本导入 Oracle 数据库：

```
using (OracleCommand cmd = conn.CreateCommand())
{
    cmd.CommandText = @"insert into scripts (nscript, scriptname, scriptdescr, scripttext, created, modified, createdby) 
            values (nscript.nextval, :1, :2, :3, sysdate, sysdate, 'XXX')";

    OracleParameter paramScriptName = new OracleParameter("ScriptName", OracleDbType.Varchar2, 64);
    paramScriptName.Value = scriptNames.ToArray();

    OracleParameter paramScriptDescription = new OracleParameter("ScriptDescripption", OracleDbType.Varchar2, 128);
    paramScriptDescription.Value = scriptDescriptions.ToArray();

    OracleParameter paramScriptText = new OracleParameter("ScriptText", OracleDbType.Long, 0);
    paramScriptText.Value = scriptTexts.ToArray();

    cmd.Parameters.Add(paramScriptName);
    cmd.Parameters.Add(paramScriptDescription);
    cmd.Parameters.Add(paramScriptText);

    cmd.ArrayBindCount = scriptNames.Count;

    cmd.ExecuteNonQuery();

    paramScriptName.Dispose();
    paramScriptDescription.Dispose();
    paramScriptText.Dispose();
} 
```

遵循本指南：[http ://www.oracle.com/technetwork/issue-archive/2009/09-sep/o59odpnet-085168.html](http://www.oracle.com/technetwork/issue-archive/2009/09-sep/o59odpnet-085168.html)

但是，我注意到一些较长的脚本在导入时会被截断。

关于我做错了什么有什么建议吗？

非常感谢。

史蒂夫

# php - 多个项目和 preg_replace_callback

> ID：13840743
> 
> 赞同：1
> 
> 时间：2012-12-12T13:20:04.717
> 
> 标签：php, preg-replace, preg-replace-callback

我编写了这个脚本，以便能够在我的代码中使用类似 bb-code 的标签。在花了很多时间决定最佳方法并询问[如何动态替换 bb 标签？](https://stackoverflow.com/questions/11988043/how-to-dynamically-replace-bb-tags)，我决定使用 preg_replace_callback。

但是，同一行上有多个项目存在问题

```
Man [forvo=man,nl]
Mannen [forvo=mannen,nl] 
```

上面的部分有效，但下面的部分无效。

```
Kip [forvo=kip,nl] - Kippen [forvo=kippen,nl]
Bal [forvo=bal,nl] - Ballen [forvo=ballen,nl]
Vrouw [forvo=vrouw,nl] - Vrouwen [forvo=vrouwen,nl] 
```

我知道使用 file_get_contents() 不是推荐选项，但如果我想每行使用多个 Forvo-tags，我是否还应该找到 preg_replace_callback 的另一种解决方案？

```
<?php
// Replace forvos in the lesson
$lesson_body = $lesson['Lesson']['body'];

function forvize($match) {
    $word = $match[1];
    $language = $match[2];
    $link = "http://apifree.forvo.com/action/word-pronunciations/format/js-tag/word/".$word."/language/".$language."/order/rate-desc/limit/1/key/API_KEY/";
    $link = file_get_contents($link);
    return $link;
}

//URL's
$lesson_body = preg_replace_callback("/\[forvo\=(.*),(.*)\]/", 'forvize', $lesson_body);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:25:49.687

你犯的错误很常见。默认情况下，FULL STOP ( `.`，也称为*dot* ) 匹配除换行符以外的任何字符。因此，如果您在一行上有一个 bbcode，这没问题：

```
/\[forvo\=(.*),(.*)\]/ 
```

但是，如果您在一行中有更多的单个 bbcode，则点将尽可能多地匹配模式：

```
[forvo=aaaa,bbbbb] ... [forvo=cccc,dddd]
       (.*                       ),(.*) 
```

您可以做的是将第一个参数限制为除逗号 ( `,`) 之外的所有字符，将第二个参数限制为除右方括号 ( `]`) 之外的所有字符。

例子：

```
/\[forvo\=([^,]*),([^\]]*)\]/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:08:29.067

捕获这些的一种方法是使用不贪婪的量词（又名问号）来使其捕获所有内容，直到模式中第一次出现以下字符。

`~\[forvo=(.*?),(.*?)\]~`

*   第一个带括号的组匹配从等号到第一个逗号的所有内容
*   第二个匹配逗号后的所有内容，直到结束方括号

另一种选择是让它捕获除特定字符之外的任何内容（在这种情况下分别为逗号和右括号）。检查[@hakre](https://stackoverflow.com/users/367456/hakre)的答案以了解它是如何完成的。

# c++ - const 参数是否与 const 引用参数相同

> ID：13840744
> 
> 赞同：0
> 
> 时间：2012-12-12T13:20:10.250
> 
> 标签：c++, constants

我有一个功能

```
void h(A const a){...}; 
```

如果我这样做，行为是否可能会改变：

```
void h(A const &a){..same body as above..}; 
```

您可以根据需要自由定义类型 A。当然。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T13:25:27.120

在第一次重载中，h 不能改变 'a'。它在“h”的主体中用于所有目的 const。但是，这涉及复制构造函数来复制初始化“a”。

因此，在第一种情况下，它需要“A”中的可访问复制构造函数。出于同样的原因，它需要 A 中的可访问析构函数。

在第二种情况下，不需要复制初始化，因此不需要“A”的可访问复制构造函数/析构函数。

此外，在第一种情况下，如果“A”的派生对象作为参数传递，“a”将进行“切片”。第二个函数不会有“切片”问题，因为基类引用可以绑定到派生对象。因此，在这种情况下也不需要可访问的析构函数。

在 C++11 中，第一个函数将要求“A”具有可访问的“复制”或“移动”构造函数，具体取决于如何调用“h”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:33:26.600

根据您的 type 的复制构造函数中发生的情况`A`，是的，您可能会得到不同的行为。

如其他答案中所述，按值而不是按引用传递将导致执行复制构造函数`A`，这是代码采用的单独路径。如果您的类`A`处理某些资源，则复制该类可能最终会将该资源的不同实例传递给函数。

实际上，这一切都取决于类的`A`实际作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:25:36.453

简短的回答：没有。

`a`更长的答案：在您的第一个示例中，在堆栈上创建了一个完整副本。无论你用什么调用函数，都会调用 A 的复制构造函数，对于你传入的参数。当函数退出时，`a`将调用析构函数。根据您的实施`A`可能会非常昂贵。

`A`此外，对于无法访问复制构造函数的对象、抽象类（如果是抽象的）以及如果使用派生自 的类调用，则无法调用第一个函数，函数中`A`接收到的副本将被切片。

第二个功能不受这些限制。

TL;DR：你永远不应该使用第一个版本（但你的里程可能会有所不同）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:34:13.083

除了其他人在这里写的关于复制构建的成本`a`和潜在的切片问题（如果它通过了第一种情况下的一些派生类）之外`A`，这些函数具有不同的签名。

如果`h`是某个类的成员函数并试图覆盖基类中的`virtual` 函数`h`，则这两种形式将被视为不同的函数，因为它们的签名不同。这意味着第一种形式不能超载第二种形式。

如果您随后`h`通过指向基类的指针调用派生类，并希望`h`从派生类中调用它们，则它们的签名必须相同。否则`h`将调用来自基类的。这可能会产生明显的差异。

# php - XML SOAP 保存到 mySQL 数据库

> ID：13840745
> 
> 赞同：0
> 
> 时间：2012-12-12T13:20:17.053
> 
> 标签：php, mysql, xml, codeigniter, xml-parsing

我有一个 XML 文件

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header />
   <s:Body>
     <GetAllItemCategoryResponse xmlns="http://tempuri.org/">
       <GetAllItemCategoryResult xmlns:a="http://schemas.datacontract.org/2004/07/HQService" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
         <a:ItemsCategory>
         <a:Code>prov</a:Code>
         <a:Description>Te Fresketa</a:Description>
         <a:LastModifiedDate>0001-01-01T00:00:00</a:LastModifiedDate>
         <a:active>true</a:active>
         </a:ItemsCategory>       
       </GetAllItemCategoryResult>
     </GetAllItemCategoryResponse>
   </s:Body>
 </s:Envelope> 
```

我需要读取这个文件并将记录存储到数据库中。到目前为止，我已经设法上传和阅读记录，但是我无法将它们存储在我的数据库中。我已经看过这个示例，它与我的案例具有相似的 XML 格式，但它不起作用[PHP - 在 PHP 中将 XML 转换为数组 - 在 php 中解析一个肥皂 xml 并将其存储在数据库中](https://stackoverflow.com/questions/7514304/php-converting-xml-to-array-in-php-parsing-a-soap-xml-in-php-and-storing-it)

我正在使用 CodeIgniter（下面是我的代码）

```
function set_xml()
{
    if ($this->input->post('submit'))
    {

        //uploading the file to the server
        if (!empty($_FILES['userfile']['name'])){
            $this->upload->do_upload($_FILES['userfile']['name']);
        }

    }

    $xml = realpath(APPPATH . '../public/').'/'.$_FILES['userfile']['name'];

    $fh = fopen($xml,'r');
    $theData = fread($fh,filesize($xml));
    fclose($fh);

            $element = new simpleXMLElement($theData);
    $centerElement = $element->Body->GetAllItemCategoryResponse->GetAllItemCategoryResult->ItemsCategory;

    $center = array(
        $centerElement->Code
    );

    var_dump($centerElement);

} 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:50:11.540

您的问题是关于保存到数据库还是访问 XML 中的元素？

我怀疑是后者，命名空间让你失望。

请参阅以下示例，该示例从您的 SOAP 响应中访问元素：

```
$xml = file_get_contents(realpath(APPPATH . '../public/').'/'.$_FILES['userfile']['name']); 
$doc = simplexml_load_string($xml,NULL,false, "http://schemas.xmlsoap.org/soap/envelope/");
$doc->registerXPathNamespace('a', 'http://schemas.datacontract.org/2004/07/HQService');

foreach ($doc->xpath('//a:ItemsCategory') as $category) {
    foreach ($category->children('http://schemas.datacontract.org/2004/07/HQService') as $child) {
        echo $child->getName() . ":" . (string)$child . "\n";
    }
} 
```

这将输出以下内容：

```
Code:prov
Description:Te Fresketa
LastModifiedDate:0001-01-01T00:00:00
active:true 
```

之后，只需根据需要保存到数据库即可。希望这可以帮助！

# c# - 如何打印渲染到 SurfaceImageSource 的内容？

> ID：13840747
> 
> 赞同：0
> 
> 时间：2012-12-12T13:20:36.763
> 
> 标签：c#, printing, windows-runtime, directx, sharpdx

我正在使用 SharpDx 在 WinRt 的 Image 控件中呈现一些形状。如何打印渲染到打印机的内容？

```
private void RenderGraphics()
    {
        KSurfaceImageSourceManager _pKSurfaceImageSourceManager = new KSurfaceImageSourceManager();

        SurfaceImageSource _pSurfaceImageSource = _pKSurfaceImageSourceManager.NewSurfaceImageSource((int)imageCtrl.Width, (int)imageCtrl.Height);
        int _w = 0;
        int _h = 0;
        _pKSurfaceImageSourceManager.GetSurfaceImageSourceSize(_pSurfaceImageSource, out _w, out _h);

        this.imageCtrl.Source = _pSurfaceImageSource;
        int _retcode = _pKSurfaceImageSourceManager.ClearSurfaceImageSource(_pSurfaceImageSource, 1, 1, 1, 1);

        int _hrenderTarget = 0;
        int _offsetx = 0;
        int _offsety = 0;
        int _surfacewidth = 0;
        int _surfaceheight = 0;            
        try
        {
            // initiating a Direct2D drawing session: BeginDraw2D 
            _hrenderTarget = _pKSurfaceImageSourceManager.BeginDraw2D(_pSurfaceImageSource, out _offsetx, out _offsety, out _surfacewidth, out _surfaceheight);

            // connecting the _hrenderTarget handle returned by BeginDraw2D to a RenderTarget instance
            _pRenderTarget = new RenderTarget(new IntPtr(_hrenderTarget));

            // Direct2D drawing session targetting _pRenderTarget
            _pRenderTarget.BeginDraw();
            SharpDX.Direct2D1.SolidColorBrush _brush = null;

            int _left = _offsetx;
            int _top = _offsety;
            int _right = _surfacewidth;
            int _bottom = _surfaceheight;

            // border
            _brush = new SharpDX.Direct2D1.SolidColorBrush(_pRenderTarget, new SharpDX.Color4(1, 0, 0, 1));
            _pRenderTarget.FillRectangle(new SharpDX.RectangleF(_left, _top, _right, _bottom), _brush);

            // fill
            int _border = 2;

            _brush = new SharpDX.Direct2D1.SolidColorBrush(_pRenderTarget, new SharpDX.Color4(1, 1, 1, 1));

            _pRenderTarget.FillRectangle(new SharpDX.RectangleF(_left + _border, _top + _border, _right - 2 * _border, _bottom - 2 * _border), _brush);
            _pRenderTarget.DrawEllipse(new SharpDX.Direct2D1.Ellipse(new DrawingPointF(50, 80), 50, 50), new SharpDX.Direct2D1.SolidColorBrush(_pRenderTarget, Color.SlateBlue));

        }
        catch (Exception E)
        {
        }
        finally
        {
            _pKSurfaceImageSourceManager.EndDraw2D(_pSurfaceImageSource);
        }

    } 
```

我尝试在不执行这些渲染操作的情况下打印图像控件的内容，它起作用了。当我在调用此方法后尝试相同时，它会打印空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:24:23.457

我还没有在 Windows 8 中进行打印，但您可能需要使用 BitmapImage 或 WriteableBitmap。WinRT XAML 工具包中有一些代码尚未以最佳方式执行，但应该适用于打印。它基本上归结为：

```
public static class WriteableBitmapRenderExtensions
{
    public static async Task Render(this WriteableBitmap wb, FrameworkElement fe)
    {
        var ms = RenderToStream(fe);
        var msrandom = new MemoryRandomAccessStream(ms);
        await wb.SetSourceAsync(msrandom);
    }

    public static MemoryStream RenderToStream(FrameworkElement fe)
    {
        return new CompositionEngine().RenderToPngStream(fe);
    }
}

public class CompositionEngine
{
    private readonly ImagingFactory _wicFactory;
    private readonly SharpDX.Direct2D1.Factory _d2DFactory;
    private readonly SharpDX.DirectWrite.Factory _dWriteFactory;

    public CompositionEngine()
    {
        _wicFactory = new ImagingFactory();
        _d2DFactory = new SharpDX.Direct2D1.Factory();
        this._dWriteFactory = new SharpDX.DirectWrite.Factory();
    }

    public ImagingFactory WicFactory
    {
        get
        {
            return this._wicFactory;
        }
    }

    public SharpDX.Direct2D1.Factory D2DFactory
    {
        get
        {
            return this._d2DFactory;
        }
    }

    public SharpDX.DirectWrite.Factory DWriteFactory
    {
        get
        {
            return this._dWriteFactory;
        }
    }

    public MemoryStream RenderToPngStream(FrameworkElement fe)
    {
        var width = (int)Math.Ceiling(fe.ActualWidth);
        var height = (int)Math.Ceiling(fe.ActualHeight);

        // pixel format with transparency/alpha channel and RGB values premultiplied by alpha
        var pixelFormat = WicPixelFormat.Format32bppPRGBA;

        // pixel format without transparency, but one that works with Cleartype antialiasing
        //var pixelFormat = WicPixelFormat.Format32bppBGR;

        var wicBitmap = new Bitmap(
            this.WicFactory,
            width,
            height,
            pixelFormat,
            BitmapCreateCacheOption.CacheOnLoad);

        var renderTargetProperties = new RenderTargetProperties(
            RenderTargetType.Default,
            new D2DPixelFormat(Format.R8G8B8A8_UNorm, AlphaMode.Premultiplied),
            //new D2DPixelFormat(Format.Unknown, AlphaMode.Unknown), // use this for non-alpha, cleartype antialiased text
            0,
            0,
            RenderTargetUsage.None,
            FeatureLevel.Level_DEFAULT);
        var renderTarget = new WicRenderTarget(
            this.D2DFactory,
            wicBitmap,
            renderTargetProperties)
        {
            //TextAntialiasMode = TextAntialiasMode.Cleartype // this only works with the pixel format with no alpha channel
            TextAntialiasMode = TextAntialiasMode.Grayscale // this is the best we can do for bitmaps with alpha channels
        };

        Compose(renderTarget, fe);

        // TODO: There is no need to encode the bitmap to PNG - we could just copy the texture pixel buffer to a WriteableBitmap pixel buffer.
        var ms = new MemoryStream();

        var stream = new WICStream(
            this.WicFactory,
            ms);

        var encoder = new PngBitmapEncoder(WicFactory);
        encoder.Initialize(stream);

        var frameEncoder = new BitmapFrameEncode(encoder);
        frameEncoder.Initialize();
        frameEncoder.SetSize(width, height);
        var format = WicPixelFormat.Format32bppBGRA;
        //var format = WicPixelFormat.FormatDontCare;
        frameEncoder.SetPixelFormat(ref format);
        frameEncoder.WriteSource(wicBitmap);
        frameEncoder.Commit();

        encoder.Commit();

        frameEncoder.Dispose();
        encoder.Dispose();
        stream.Dispose();

        ms.Position = 0;
        return ms;
    }

    public void Compose(RenderTarget renderTarget, FrameworkElement fe)
    {
        renderTarget.BeginDraw();

        Do your rendering here

        renderTarget.Clear(new Color(0, 0, 0, 0));
        Render(renderTarget, fe, fe);
        renderTarget.EndDraw();
    }
} 
```

# android - Android 4.0.4 中的 Phonegap 地理位置

> ID：13840753
> 
> 赞同：1
> 
> 时间：2012-12-12T13:20:59.327
> 
> 标签：android, geolocation, phonegap-plugins, sony

我正在开发基于 phonegap 的 android 应用程序，在这个应用程序中，我无法获取 android OS 4.0.4 的当前位置的纬度和经度（我正在索尼 xperia 手机中进行测试）。该代码与其他操作系统版本完全兼容。这个操作系统有什么问题？问候阿什维尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T20:43:17.160

如果您与 PhoneGap Build Service 捆绑，您使用的是`config.xml`文件吗？

最重要的是，“config.xml”必须具有像这样指定的权限：

`<feature name="http://api.phonegap.com/1.0/geolocation" />`

您可以查看解决我的 Android 4.0.4 问题的文件
[http://bit.ly/gap-config](http://bit.ly/gap-config)

# android - 为什么日期对话框要求单击三次以关闭

> ID：13840759
> 
> 赞同：1
> 
> 时间：2012-12-12T13:21:09.733
> 
> 标签：android, datepicker

```
public class QuickIWantActivity extends Activity implements
        OnDateSetListener {
.....
.....
.....

dateET.setOnTouchListener(new View.OnTouchListener() {

@Override
public boolean onTouch(View v, MotionEvent event) {

Calendar cal = Calendar.getInstance();
DatePickerDialog datePickDiag = new DatePickerDialog(
        QuickIWantActivity.this, QuickIWantActivity.this, cal
            .get(Calendar.YEAR), cal.get(Calendar.MONTH),
        cal.get(Calendar.DAY_OF_MONTH));
        datePickDiag.show();
        return true;
        }
    });

@Override
public void onDateSet(DatePicker view, int year, int monthOfYear,
        int dayOfMonth) {

    int month = monthOfYear + 1;
    dateET.setText(dayOfMonth + "- " + month + "- " + year);
}

} 
```

因此，在触摸作为 EditText 的 dateET 时，它会打开日期选择器，我设置新日期并单击设置，它不会被解除，我再次单击设置，即使现在它也不会被解除，最后当我单击设置时它会被解除第三次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:38:54.797

`onTouch`接收三个事件（正常序列）：

```
MotionEvent.ACTION_DOWN
MotionEvent.ACTION_MOVE
MotionEvent.ACTION_UP 
```

并且由于您没有检查其中任何一个（并返回 true），因此您的代码将执行 3 次（每个事件执行一次）。

解决方案：

使用`onClick()`（这是我会做的）或添加检查：

```
@Override
public boolean onTouch(View v, MotionEvent event) {

switch (event.getAction()) { 
  case MotionEvent.ACTION_DOWN:

Calendar cal = Calendar.getInstance();
DatePickerDialog datePickDiag = new DatePickerDialog(
        QuickIWantActivity.this, QuickIWantActivity.this, cal
            .get(Calendar.YEAR), cal.get(Calendar.MONTH),
        cal.get(Calendar.DAY_OF_MONTH));
        datePickDiag.show();
        return false;
        }
    });
break;
} 
```

# r - 将移动平均线图添加到 R 中的时间序列图

> ID：13840761
> 
> 赞同：22
> 
> 时间：2012-12-12T13:21:14.910
> 
> 标签：r, ggplot2, add, time-series, moving-average

我在 ggplot2 包中有一个时间序列图，我已经执行了移动平均，我想将移动平均的结果添加到时间序列图中。

数据集样本（p31）：

ambtemp dt
-1.14 2007-09-29 00:01:57
-1.12 2007-09-29 00:03:57 -1.33
2007-09-29 00:05:57
-1.44 2007-09-29 00:07:57
-1.54 2007-09-29 00:09:57
-1.29 2007-09-29 00:11:57

时间序列表示的应用代码：

```
 Require(ggplot2)
  library(scales)
  p29$dt=strptime(p31$dt, "%Y-%m-%d %H:%M:%S")
  ggplot(p29, aes(dt, ambtemp)) + geom_line() +
     scale_x_datetime(breaks = date_breaks("2 hour"),labels=date_format("%H:%M")) + xlab("Time 00.00 ~ 24:00 (2007-09-29)") + ylab("Tempreture")+
     opts(title = ("Node 29")) 
```

时间序列演示示例 ![时间序列演示示例](../Images/1f713b210160692774128d62233cf711.png)

移动平均图 ![在此处输入图像描述](../Images/22738a29fb4466eb2e51dd1c7b665c24.png) 样本 预期结果样本

挑战在于时间序列数据ov =从包括时间戳和温度的数据集中获得，但移动平均数据仅包括平均列而不包括时间戳，并且拟合这两者可能会导致不一致。

![预期成绩](../Images/1a23169f941972f38940d73bc038f45a.png)

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-12T14:25:35.467

一种解决方案是使用`rollmean()`库中的函数`zoo`来计算移动平均值。

您的问题（p31 和 p29）中的数据框名称有些混淆，因此我将使用第 29 页。

```
p29$dt=strptime(p29$dt, "%Y-%m-%d %H:%M:%S")

library(zoo)
#Make zoo object of data
temp.zoo<-zoo(p29$ambtemp,p29$dt)

#Calculate moving average with window 3 and make first and last value as NA (to ensure identical length of vectors)
m.av<-rollmean(temp.zoo, 3,fill = list(NA, NULL, NA))

#Add calculated moving averages to existing data frame
p29$amb.av=coredata(m.av)

#Add additional line for moving average in red
ggplot(p29, aes(dt, ambtemp)) + geom_line() + 
  geom_line(aes(dt,amb.av),color="red") + 
  scale_x_datetime(breaks = date_breaks("5 min"),labels=date_format("%H:%M")) +
  xlab("Time 00.00 ~ 24:00 (2007-09-29)") + ylab("Tempreture")+
  ggtitle("Node 29") 
```

如果线条颜色应出现在图例中，则必须修改并添加`aes()`in`ggplot()`和。`geom_line()``scale_colour_manual()`

```
 ggplot(p29, aes(dt)) + geom_line(aes(y=ambtemp,colour="real")) +
   geom_line(aes(y=amb.av,colour="moving"))+
   scale_x_datetime(breaks = date_breaks("5 min"),labels=date_format("%H:%M")) + 
   xlab("Time 00.00 ~ 24:00 (2007-09-29)") + ylab("Tempreture")+
   scale_colour_manual("Lines", values=c("real"="black", "moving"="red")) +    
   ggtitle("Node 29") 
```

# mysql - 删除mysql中的重复项

> ID：13840764
> 
> 赞同：0
> 
> 时间：2012-12-12T13:21:21.907
> 
> 标签：mysql

> **可能重复：**
> [如何删除 MySQL 表中的重复项](https://stackoverflow.com/questions/672702/how-to-delete-duplicates-in-mysql-table)

我将纯文本文件中的数据导入 mysql 数据库。现在我发现我有重复的条目，我想删除它们。重复项由不是主键的键标识。请提醒我必须保留其中一件重复的物品。

表 T1 具有三个重复项，例如：

ID(唯一，主键) REAL_ID(char(11))

```
1 '01234567890'
2 '01234567891'
3 '01234567891'
4 '01234567891'
...

```

现在，我用

```
 SELECT ID AS x, COUNT(*) AS y FROM T1 GROUP BY x HAVING y>1; 
```

来识别重复项。结果我

```
+--------+-------------+
| 身份证 | REAL_ID |
+--------+-------------+
| 1 | 01234567891 |
| 2 | 01234567891 |
| 3 | 01234567891 |
+--------+-------------+

```

我什至可以构建我必须删除的 Id 列表：

```
SELECT ID 
FROM T1 
  RIGHT JOIN ( (SELECT ID AS x, COUNT(*) AS y 
                FROM T1 
                GROUP BY x 
                HAVING y>1) AS T2 ) ON (T2.x=T1.REAL_ID) LIMIT 1,100; 
```

结果是

```
+--------+-------------+
| 身份证 | REAL_ID |
+--------+-------------+
| 2 | 01234567890 |
| 3 | 01234567890 |
+--------+-------------+

```

现在，我需要有关如何删除这些条目的帮助。

由于不可能将 DELETE 与子查询结合使用，我试图标记列 REAL_ID 中的所有重复条目，然后使用

```
DELETE FROM T1 WHERE REAL_ID='flag'; 
```

但我不知道如何标记这些条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:28:05.680

你可以这样做：

```
DELETE t
FROM T1 t 
RIGHT JOIN 
( 
   SELECT ID, COUNT(*) AS y 
   FROM T1 
   GROUP BY ID
   HAVING y > 1 
) AS T2 ON T2.ID = t.REAL_ID; 
```

**更新：**请注意，您不能使用`LIMI`或`ORDER BY`从多个表中删除时，引用自[`DELETE`](http://dev.mysql.com/doc/refman/5.0/en/delete.html)：

> 对于多表语法，DELETE 从每个 tbl_name 中删除满足条件的行。在这种情况下，不能使用 ORDER BY 和 LIMIT

试试这个：

```
DELETE t
FROM T1 t 
WHERE REAL_ID IN
( 
  SELECT t1.REAL_ID
  FROM T1 t1
  RIGHT JOIN 
  ( 
     SELECT ID, COUNT(*) AS y 
     FROM T1 
     GROUP BY ID
     HAVING y > 1 
  ) AS T2 ON T2.ID = t.REAL_ID
  WHERE t1.REAL_ID IS NOT NULL
  ORDER BY t2.y DESC
  LIMIT 1, 1000
) 
```

# arrays - 如何在 Yii 中将参数提交到模型数组中

> ID：13840766
> 
> 赞同：0
> 
> 时间：2012-12-12T13:21:27.787
> 
> 标签：arrays, forms, yii, get

我写了一个带有 Yii 内置功能的表格，效果很好。当用户选择任何下拉字段时，可以提交表单。数据使用 GET 方法发布，值在 url 中显示为数组中的键。该数组与表单的模型具有相同的名称。

前任。url/index.php?r=controller/action&Modelname[y-value]=1&Modelname[x-value]=2

问题是，当我想添加一个应该提交一些额外变量的提交按钮时，这些变量是以正常方式提交的，而不是包含在模型数组中。这意味着我不能更改模型的参数，而是发送新值。我想要的是将按钮中定义的参数提交到模型数组中。

前任。url/index.php?r=controller/action&Modelname[y-value]=1&Modelname[x-value]=2 **&x-value=3**

我的按钮代码是：

```
CHtml::submitButton('X-value',array('name'=>'x','params'=>array('x-value'=>3))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:26:40.557

您不能使用给定的属性名称将字段添加到表单中吗？如果您不希望这些值对用户可见，您可以随时将它们添加为表单中的隐藏字段。例如;

```
echo $form->hiddenField($model,'x-value'); 
```

...假设`$model`是您的模型并且`x-value`是模型属性。尽管您似乎已经在提交的值中有一个，但您的表单中`Modelname[x-value]`还没有一个字段吗？`x-value`

# javascript - 通过缓存提高文本绘制性能

> ID：13840767
> 
> 赞同：1
> 
> 时间：2012-12-12T13:21:28.253
> 
> 标签：javascript, html5-canvas

我目前正在使用画布元素为游戏开发 2d 图形引擎。在这个引擎中，各种精灵都有跟随它们的文本标签。我做了一些分析来提高性能，并注意到这个引擎中最大的 FPS 消耗者是我对在每一帧`context.fillText`上`contex.drawText`绘制这些文本标签的调用。我可以理解这是一个性能挂钩，因为光栅化基于矢量的 TTF 字体并不是一项简单的任务。所以我正在寻找一种通过缓存渲染文本来改善这一点的方法。

**我试过的**

我虽然为了加快速度，我可以绘制每个文本标签一次，缓存结果，然后绘制这些缓存的结果。所以我尝试在第一次需要时将每个文本标签绘制到一个不可见的画布上。但为了做到这一点，我需要知道渲染文本的宽度和高度，以便创建具有适当大小的背景画布。我试图用 来`context.measureText`实现它，但不幸的是，许多浏览器并没有完全实现它（Firefox 只返回宽度，而不是高度或其他任何东西）。

我尝试的另一件事是让浏览器 HTML 渲染引擎处理文本缓存。因此，我没有使用画布绘制文本标签，而是使用 创建 HTML`<span>`元素`position:absolute`，将它们添加到`<div>`画布所在的画布中，然后在每一帧中移动它们，以便它们始终位于需要的位置。这种工作在性能方面很有效，但它会导致一大堆其他问题。有些可以解决（捕捉点击事件的文本标签，在画布之外绘制文本），但其他一些则不容易修复（画布无法在文本上绘制）。所以我放弃了这个解决方案。

你有什么想法我还能做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:06:59.450

为了缓存文本，您可以使用带有`visibility: hidden`但不带有的 HTML 元素`display: none`（以便它调整大小以适应内容） - 测量其计算的宽度和高度，并使用它来调整缓存源画布的大小。对于您的 HTML 元素，指定相同的字体（使用`@font-face`）和大小等。

`@font-face`在确保声明中指定的字体已完全加载后，您可能需要执行此操作。`$(document).ready(..)`将*无法*可靠地工作。这样做应该是安全的，只有在加载了包括内容和资源在内的*所有*`$(window).load(..)`内容后才会触发。

 ** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T13:33:27.600

您应该能够将文本渲染*脱机*`setTimeout(...)`，从而有效地让其余的渲染继续顺利进行。*

# maven - 如何避免在远程 Glassfish 中运行的 Arquillian-Tests 的 ClassNotFoundException（嵌入式 Glassfish 工作）？

> ID：13840769
> 
> 赞同：1
> 
> 时间：2012-12-12T13:21:44.963
> 
> 标签：maven, glassfish, dependencies, classpath, jboss-arquillian

我在 Glassfish 环境中使用 Arquillian[1] 对我的代码进行单元测试。

在 glassfish 嵌入式环境中运行时，我已经设置了我的测试以正常工作。但是当我尝试在 remote-Glassfish-environment 中执行测试时，找不到 maven-Dependencies：

```
Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: java.lang.NoClassDefFoundError: Lorg/springframework/data/neo4j/support/Neo4jTemplate; 
```

我的 ShrinkWrap 测试：

```
@Deployment
public static WebArchive createDeployment() {
    return ShrinkWrap.create(WebArchive.class).addPackages(true, "main.java")
            .addAsWebInfResource(EmptyAsset.INSTANCE, ArchivePaths.create("beans.xml"));
} 
```

为了解决 maven 依赖项，我使用了 shrinkwrap-resolver-bom:shrinkwrap-resolver-bom - 在我看来，在远程环境中运行测试时，maven 依赖项似乎不在类路径中。

我已将我的 pom.xml 上传到[http://pastxt.com/P/9400A0KQSC](http://pastxt.com/P/9400A0KQSC)

如何让我的测试在 Glassfish-remote-environment 中运行？

[1] [http://arquillian.org/](http://arquillian.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:44:27.307

在您的 POM 中拥有 ShrinkWrap Resolver BOM 不足以启用 Arquillian 定位并将 Maven 工件添加到您的部署中。Maven BOM（物料清单）只是[相关依赖项的容器](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)。

要使用 BOM，您需要在该`dependencyManagement`部分将 BOM 导入到项目 POm 中，并添加所需的依赖项。要添加 ShrinkWrap Maven 解析器，您需要添加`shrinkwrap-resolver-depchain`测试依赖项。

您需要使用 Maven 解析器来解析您需要的依赖项，然后将解析的工件添加到您的 ShrinkWrap 存档中。有关使用更新的 ShrinkWrap Maven 解析器 (2.x) 的更多详细信息，请参阅此[社区常见问题解答帖子](https://community.jboss.org/wiki/HowToIAddMavenArtifactsToMyShrinkWrapArchives)。请注意，Arquillian BOM (<= 1.0.3.Final) 引入了旧版本的 ShrinkWrap 解析器，因此您需要注意您引入的 ShrinkWrap Maven 解析器的版本。

# c# - 如何在 Razor 的局部视图中获取 HTMLPREFIX

> ID：13840771
> 
> 赞同：2
> 
> 时间：2012-12-12T13:21:56.197
> 
> 标签：c#, javascript, jquery, razor, asp.net-mvc-4

嗨，我需要在局部视图中获取 Html 前缀。

我在渲染部分视图的位置附加了这样的前缀

```
 Html.RenderPartial("Person", Model.Person, new ViewDataDictionary(Html.ViewDataContainer.ViewData)
{
    TemplateInfo = new TemplateInfo { HtmlFieldPrefix = "DelegatePerson"}
}); 
```

现在，当我进入 Person PartialView 时，我需要在这种情况下使用前缀。

```
@Html.TextBoxFor(model => model.CPR, new { @class = "numericTextbox", maxlength = 10, id = "CprField", onkeyup ="CprFieldEdited("[HTMLPrefix]_FieldName");" }) 
```

但是我不知道该怎么做。我已经搜索了很长时间。我希望有人知道如何做到这一点或类似的事情。

**编辑：**

这意味着我应该能够告诉 Javascript 函数 CprFieldEdited 它应该搜索的 html 前缀在这种情况下是“DelegatePerson”

**编辑2：** 似乎不清楚我的意思，所以我会尝试提供更多代码。

主页：

```
 //None relevant Code here
@Scripts.Render("~/bundles/person_search")
//None relevant Code here
        <Body>
    //None relevant Code here
               Html.RenderPartial("Person", Model.Person, new ViewDataDictionary(Html.ViewDataContainer.ViewData)
               {
                   TemplateInfo = new TemplateInfo { HtmlFieldPrefix = "DelegatePerson"}
               });
        //None relevant Code here
               Html.RenderPartial("Person", Model.Person, new ViewDataDictionary(Html.ViewDataContainer.ViewData)
               {
                   TemplateInfo = new TemplateInfo { HtmlFieldPrefix = "EmployerPerson"}
               });
        //None relevant Code here
            </body> 
```

在这种情况下，我有两个相同类型的 Partials 呈现在同一页面上。但是在它们内部我需要告诉Javascript包现在正在使用其中的一个，因为我不能使用它们被用于其他东西的ID我的想法是什么使用带有前缀的Name属性但是正如下一个代码所示我可以'不给 javascript 前缀以区分两个部分

```
 @Html.TextBoxFor(model => model.CPR, new {id = "CprField", onkeyup ="CprFieldEdited("[FieldNameWithPartialPrefix]");" }) 
```

问题是我不能给 CprFieldEdited("[FieldNameWithPartialPrefix]"); javascript "[FieldNameWithPartialPrefix]" 可以是 "DelegatePerson_Fieldname" 或 "EmployerPerson"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:40:36.927

您不需要使用 . 传递前缀`HtmlFieldPrefix`。您可以使用它传递它`ViewBag`（它的工作原理类似于`ViewData`，但更推荐使用）。

做就是了，

```
 @Html.RenderPartial(
     "Person", 
     Model.Person, 
     new ViewDataDictionary()
         {
              { "Custom Prefix", "your_prefix" }
         }); 
```

或者，您可以在部分中定义前缀，

```
@{
    ViewBag.CustomPrefix = "your_prefix";
} 
```

并以任何一种方式访问​​它，只需执行，

```
<a onkeyup="@ViewBag.CustomPrefix"> ... </a> 
```

你可以用`ViewBag`它来传递任何东西`dynamic`。欲了解更多[信息](http://www.codeproject.com/Articles/476967/WhatplusisplusViewData-2cplusViewBagplusandplusTem)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-06-09T07:29:18.200

```
((System.Web.Mvc.ViewDataDictionary)(ViewData)).TemplateInfo.HtmlFieldPrefix 
```

# java - 在 JSoup 中按名称查找字符串值

> ID：13840774
> 
> 赞同：2
> 
> 时间：2012-12-12T13:22:06.383
> 
> 标签：java, html, parsing, jsoup

所以，我在 JSoup 中遇到了问题。

我需要为一些表单输入值解析 HTML 页面，如下所示：

```
<input value="210cf5f0c2db3ac6ac5112881525cfff" data-value="1355317682" type="hidden" name="token" />
<input type="hidden" name="sid" value="18c03bc9nkedyyjmbzgvmkv5tx7yhyw1" />
<input value="" name="redirect" type="hidden" />
<input value="d3edfe5b37608758516833b858b51b63" type="hidden" name="eyhy7xt5v" /> 
```

我需要能够获取每个输入的值，但一次一个。我当前的 Java 代码如下所示：

```
import org.jsoup.Jsoup;
import org.jsoup.helper.Validate;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

import java.io.IOException;

class JSoupTest {
    public static void main(String[] args) throws IOException {
        Document doc = Jsoup.connect("http://url.com/auth").get();
        Elements inputs = doc.select("input");
        for(Element input : inputs) {
            System.out.println(input.attr("name"));
            System.out.println(input.attr("value"));
        }
    }
} 
```

它目前转储了所有输入的名称及其值，但我需要程序只输出某个输入字段的值。

比如，假设我想输出名为“sid”的输入字段的值。我只需要打印那个值，其他的都不需要。

我只需要以某种方式进行这样的选择性打印，我想你可以说。只需打印某个输入字段的值。

有谁知道如何做到这一点？

在 JSoup 文档中，我一直在查看[此页面](http://jsoup.org/cookbook/extracting-data/selector-syntax/)，但找不到所需的内容。

谢谢！

编辑：我刚刚意识到，每次刷新页面时都会随机生成最后一个值的名称。如果除了“隐藏”特征之外没有任何保持不变的值，有什么办法可以抓住它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T19:21:51.597

If I understand you properly the following code does what you want:

```
import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;

public class MyParser {
    public static void main(String args[]) {
        String inputText = 
            "<input value=\"210cf5f0c2db3ac6ac5112881525cfff\" data-value=\"1355317682\" type=\"hidden\" name=\"token\" />"
            + "<input type=\"hidden\" name=\"sid\" value=\"18c03bc9nkedyyjmbzgvmkv5tx7yhyw1\" />"
            + "<input value=\"\" name=\"redirect\" type=\"hidden\" />"
            + "<input value=\"d3edfe5b37608758516833b858b51b63\" type=\"hidden\" name=\"eyhy7xt5v\" />" ;
        Document doc = Jsoup.parseBodyFragment(inputText);
        Element body = doc.body();
        // Grab the value attribute of the INPUT element with a given name attribute
        Element input = body.select("input[name=sid]").first();
        System.out.println(input.attr("value"));
        // Grab the value attribute of the last INPUT element
        Element lastInput = body.select("input").last();
        System.out.println(lastInput.attr("value"));
    }
} 
```

You can select an `input` element with a given value for the `name` attribute using the following syntax:

```
element.select("tag_name[attr_name=value]") 
```

This returns an `Elements` object that contains just one element (because the value of the `name` attribute is unique).

You said that the `input` element with a changing `name` attribute is the the last `input` so you can take advantage of that knowledge by getting the `Elements` object containing all the `input` elements and taking the last of those elements.

# image-processing - 检测身体/面部并去除背景

> ID：13840775
> 
> 赞同：-1
> 
> 时间：2012-12-12T13:22:08.960
> 
> 标签：image-processing

我的客户要求这样做，并且由于我们没有任何图像处理算法的经验（并且也没有兴趣深入研究它），我想我会看看之前是否有过类似的事情。也许是一个框架或类似的东西。

他们想要的是用户给自己拍张照片，然后照片中除了他们自己之外的任何东西都被替换为背景图像。所以他们可以简单地在巴哈马等地创造自己的形象。

我们可以假设每张照片中只有一个人。我们想要的几乎是一个“函数”，它获取一张图像，并返回一个人在图像中的位置的掩码。我一直在谷歌搜索答案，我找到了很多人脸识别框架，但所有这些框架都只是为了实际检测一张脸并给出它的位置。不掩盖整个人。

语？客户端还是服务器端？几乎任何可行的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:34:19.383

你要的是一个非常棘手的问题。鉴于背景可能嘈杂或复杂，甚至与人融为一体。当然 - 在添加背景是平坦的单一颜色并且图像均匀照明的约束后，您可以使用[色度键控](http://en.wikipedia.org/wiki/Chroma_key)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:09:10.113

在我的 Nexus 上，有一个相机功能可以满足您的需求。

它似乎这样做的方式是它首先拍摄不在屏幕上的用户图像并将其保存。然后它再次开始捕获，任何未更改的像素都将替换为新选择的背景。任何不同的像素都被假定为人，并在新捕获中保持原样。

这类似于 anathonline 指出的色度键控，但不是用所需的背景替换所有绿色像素，而是用所需的背景替换所有保持不变的像素。

# matlab - 在matlab中选择一个ROI（圆形和方形）以应用过滤器

> ID：13840777
> 
> 赞同：4
> 
> 时间：2012-12-12T13:22:11.853
> 
> 标签：matlab, geometry, interactive, roi

我正在使用matlab，我想做一个交互式选择，就像你在使用函数roipoly时所做的那样，但我想选择一个圆形或一个正方形。我已经搜索了选择感兴趣区域 (ROI) 的功能，就像您在使用 roipoly 但使用圆形或方形时选择的那样，但我找不到任何东西。

有小费吗？

我已经尝试过使用 ginput。

```
[X, Y]= ginput(2)

xmin=min(X)
xmax=max(X)
ymin=min(Y)
ymax=max(Y) 
```

在这段代码中，我定义了正方形的角（用户使用 ginput 定义了两个点）。但是当我检查图像的点时，它们是错误的。我认为是因为图形的大小在情节上不一样。

选择我想要的 ROI 的最佳方法是使用与 roipoly 类似的函数，但用于圆形和方形，而不是多边形。使用这种类型的功能，我只能使用“ginput”选择图片内部的点，如果用户选择图形之外的任何点，我必须输入错误消息（问题是它们不匹配，我可以选择的点大于图像的大小）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:29:39.803

这里真的有两个问题：

1) 你的 GINPUT 代码有什么问题和 2) 如何编写 roiCircle 或 roiSquare

在回答（1）时，没有错；该代码的行为应如此：

```
imgData = randn(100);
imagesc(imgData );
[X, Y]= ginput(2)

xmin=min(X);
xmax=max(X);
ymin=min(Y);
ymax=max(Y);

squareX = [xmin xmin xmax xmax xmin];
squareY = [ymin ymax ymax ymin ymin];
hold on; 
plot(squareX,squareY); %plot the correct square
hold off; 
```

您可以使用 IMCROP 来获取数据：

```
width = xmax - xmin;
height = ymax - ymin;
imgSelect = imcrop(imgData,[xmin,ymin,width,height]);
figure; imagesc(imgSelect); 
```

至于 (2)（编写 roiCircle 或 roiSquare），以便它们像 roiPoly 一样很好地更新，这些将需要大量（尽管并非不可克服）的 MATLAB GUI 编程。这很容易处理，但不是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-14T05:18:13.867

我设法使用以下技术实现了一个交互式区域选择（在我的例子中是一个圆圈）：

1.  使用内置的 ginput(1) 获取第一个点：

    ```
    [X1, Y1] = ginput(1);
    xp = [X1 Y1]; 
    ```

2.  为圆生成一个句柄：

    ```
    h = plot(X1, Y1, 'r'); 
    ```

3.  设置自定义 MouseMove 事件处理程序以选择第二个点：

    ```
    set(gcf, 'WindowButtonMotionFcn', {@mousemove, h, xp}); 
    ```

4.  在处理程序发挥其魔力时等待用户单击：

    ```
    k = waitforbuttonpress; 
    ```

5.  最后禁用处理程序：

    ```
    set(gcf, 'WindowButtonMotionFcn', ''); 
    ```

事件处理程序如下：

```
function mousemove(object, eventdata, h, xp)
cp = get(gca, 'CurrentPoint');
r = norm([cp(1,1) - bp(1) cp(1,2) - bp(2)]);
theta = 0:.1:2*pi;
xc = r*cos(theta)+bp(1);
yc = r*sin(theta)+bp(2);
set(h, 'XData', xc);
set(h, 'YData', yc);
end 
```

等等。这很好用，并且`r`对调用函数可见，因此您可以使用它。

# php - 如何使用 .htaccess 将所有页面重写为一个简单的 URL？

> ID：13840778
> 
> 赞同：0
> 
> 时间：2012-12-12T13:22:15.913
> 
> 标签：php, apache, .htaccess

我有以下情况。我想指出所有这样的 URL：

```
http://localhost/mypage 
```

对于一个长 URL，就像这样：

```
http://localhost/index.php?&page=mypage 
```

然后在 PHP 中做这样的事情：

```
include 'pages/' . $_GET['page'] . '.php'; 
```

我尝试了以下方法，但出现了一些错误。

```
RewriteRule ^(.+)$ index.php?&page=$1 [NC] 
```

有没有办法在不列出 .htaccess 文件中的所有页面的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:42:50.603

尝试这个：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php?page=$1 [L] 
```

因此，如果您请求**http://example.com/about**，它将被重写为**http://example.com/index.php?page=about**。

我还建议`$_GET['page']`在您的**index.php**脚本中进行一些验证，否则人们将能够导航您的文件系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:27:24.923

```
# This line starts the mod_rewrite module
RewriteEngine on

# If the request is for a file that already exists on the server
RewriteCond %{REQUEST_FILENAME} !-f

# Pass all trafic through the index file (if the requested file doesn't exist)
RewriteRule ^(.*)$ index.php?$1 [L,QSA] 
```

/project/1 将与`$_GET['project'] = 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:28:18.980

你的第一行应该是：

```
RewriteEngine On 
```

然后使用

```
RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 
```

代替

```
RewriteRule ^(.+)$ index.php?&page=$1 [NC] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:29:11.013

这就是你需要的

```
RewriteEngine On
RewriteRule ^([a-z]+)$ index.php?&page=$1 [QSA] 
```

# iphone - 我的单元格在表格视图中重复？

> ID：13840783
> 
> 赞同：1
> 
> 时间：2012-12-12T13:22:19.083
> 
> 标签：iphone, ios, ipad

我有一个表格视图，我在其中加载来自 2 个不同自定义类的单元格。我的代码看起来像这样

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier1 = @"CellIdentifier";
        static NSString *CellIdentifier2 = @"Cell";

        if(messagesarray==nil||[messagesarray count]==0)
        {

        }
        else
        {
            NSMutableDictionary *dicttable=[messagesarray objectAtIndex:indexPath.row];
            NSString *head=[dicttable objectForKey:@"gfgfg"];
            NSString *head1=[dicttable objectForKey:@"gfgfgf"];
            if([type isEqualToString:@"m"])    
            {
                if([head isEqualToString:@"NA"])
                {

                    CustomCell *cell = (CustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier1];
                    if (cell == nil)
                    {
                        cell = [[[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier1] autorelease];
                        cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"white_top_portion.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
                    }
                    cell.selectionStyle = UITableViewCellSelectionStyleNone;
                    cell.nameLabel.text=head;
                    cell.msg.text=head1;
                    [cell.button addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside];     

                    if(icon!=nil)
                    {
                        if(![[ImageCache sharedImageCache] hasImageWithKey:icon])
                        {
                            cell.myImageView.image = [UIImage imageNamed:@"fggtgf.png"];
                            NSArray *myArray = [NSArray arrayWithObjects:cell.myImageView,icon,@"fgfgfg.png",[NSNumber numberWithBool:NO],nil];
                            AppDelegate *appDelegate = (AppDelegate  *)[[UIApplication sharedApplication] delegate];
                            [appDelegate performSelectorInBackground:@selector(updateImageViewInBackground:) withObject:myArray];   
                        }
                        else 
                        {
                            cell.myImageView.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:icon];
                        }
                    }
                    else
                    {
                        cell.myImageView.image = [UIImage imageNamed:@"fgfgfg.png"];  

                    } 

                    cell.label.text=sub;   
                    return cell;
                }
                else
                {
                    Customcellwithimage *cell = (Customcellwithimage *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier2];

                    if (cell == nil)
                    {
                        cell = [[[Customcellwithimage alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier2] autorelease];
                        cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"white_deal_bg.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease];
                    }

                    cell.selectionStyle = UITableViewCellSelectionStyleNone;
                    cell.datelabel1.text=subtitle;
                    cell.nameLabel1.text=head;
                    cell.msg1.text=head1;
                    if(icon!=nil)
                    {
                        if(![[ImageCache sharedImageCache] hasImageWithKey:icon])
                        {
                            cell.myImageView1.image = [UIImage imageNamed:@"fgfgfgf.png"];
                            NSArray *myArray = [NSArray arrayWithObjects:cell.myImageView1,icon,@"fgfgfgf.png",[NSNumber numberWithBool:NO],nil];
                            MFAppDelegate *appDelegate = (MFAppDelegate  *)[[UIApplication sharedApplication] delegate];
                            [appDelegate performSelectorInBackground:@selector(updateImageViewInBackground:) withObject:myArray];   

                        }
                        else 
                        {
                            cell.myImageView1.image = [[ImageCache sharedImageCache] getImagefromCacheOrUrl:icon];
                        }
                    }
                    else
                    {
                        cell.myImageView1.image = [UIImage imageNamed:@"fgfgfgf.png"];  
                    } 

                    cell.cellview1.image=[UIImage imageNamed:@"vf.png"];
                    cell.label1.text=sub;
                    [cell.button1 addTarget:self action:@selector(callAction:) forControlEvents:UIControlEventTouchUpInside]; 
                    cell.bannerview1.image=[UIImage imageNamed:@"vfgf.png"];
                    return cell;
                }   
            }                 
        }  
    } 
```

我的问题是只有数组中的第一个元素在单元格中重复打印（单元格重复），任何人都可以帮助我知道为什么会这样。我有数组计数部分，每个部分只有单行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:33:35.493

如果每个部分只有一行，则`indexPath.row`每次调用此方法时都会为 0。由于行是您用来选择数组元素的行，因此它始终是同一个是合理的。

`indexPath.section`如果要返回`[messagesarray count]`节数和行数，则需要使用1。

# scala - 记录 Scala 2.10 宏

> ID：13840784
> 
> 赞同：72
> 
> 时间：2012-12-12T13:22:22.360
> 
> 标签：scala, macros, documentation, scala-2.10, scala-macros

我将从一个例子开始。`List.fill`这是Scala 2.10 中的 for tuples 作为宏的等价物：

```
import scala.language.experimental.macros
import scala.reflect.macros.Context

object TupleExample {
  def fill[A](arity: Int)(a: A): Product = macro fill_impl[A]

  def fill_impl[A](c: Context)(arity: c.Expr[Int])(a: c.Expr[A]) = {
    import c.universe._

    arity.tree match {
      case Literal(Constant(n: Int)) if n < 23 => c.Expr(
        Apply(
          Select(Ident("Tuple" + n.toString), "apply"),
          List.fill(n)(a.tree)
        )
      )
      case _ => c.abort(
        c.enclosingPosition,
        "Desired arity must be a compile-time constant less than 23!"
      )
    }
  }
} 
```

我们可以按如下方式使用此方法：

```
scala> TupleExample.fill(3)("hello")
res0: (String, String, String) = (hello,hello,hello) 
```

这家伙在几个方面是一只奇怪的鸟。首先，`arity`参数必须是文字整数，因为我们需要在编译时使用它。在以前的 Scala 版本中，方法（据我所知）甚至无法判断其参数之一是否为编译时文字。

其次，`Product`返回类型[是一个谎言](https://stackoverflow.com/a/13673950/334519)——静态返回类型将包括由参数确定的特定数量和元素类型，如上所示。

那么我将如何记录这件事呢？在这一点上，我并不期待 Scaladoc 支持，但我想了解一些约定或最佳实践（不仅仅是确保编译时错误消息清晰），这将使运行到宏方法中——使用它的潜在的奇怪需求——对于 Scala 2.10 库的用户来说并不奇怪。

新宏系统最成熟的演示（例如，[ScalaMock](https://github.com/paulbutcher/ScalaMock)、[Slick以及](https://github.com/slick/slick)[此处](http://scalamacros.org/news/2012/11/05/status-update.html)列出的其他）在方法级别上仍然相对没有文档。任何示例或指针都将受到赞赏，包括来自具有类似宏系统的其他语言的示例或指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:41:19.093

[我认为记录这些的最好方法是使用示例代码，正如 Miles 在他的基于实验性宏的 shapeless 分支](https://github.com/milessabin/shapeless/blob/topic/macro-paradise/examples/src/main/scala/shapeless/examples/monoids.scala)中所做的那样。

# checkstyle - 如何跳过现有代码中的现有 Checkstyle 错误/警告

> ID：13840788
> 
> 赞同：1
> 
> 时间：2012-12-12T13:22:28.817
> 
> 标签：checkstyle

我是 Checkstyle 的新手，想对现有代码实施 checkstyle 标准检查，我想跳过现有的错误/警告并排除那些有错误/警告的相应文件以进行关注检查。因此，如果任何开发人员留下任何新的错误/警告，都应该报告。任何人都可以建议我，我怎样才能达到文件级别并检查 checkstyle 中的特定排除，一个简单的例子将使 grate 对我有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:47:24.840

我有同样的问题，所以我们用 Jenkins+Checkstyle 插件解决了它。你可以[在这里阅读](https://stackoverflow.com/questions/14764804/checkstyle-and-jenkins-check-modified-added-lines-in-svn-commit)

# html - HTML5 视频 - 如果文件不存在，则恢复为 SWF 回退

> ID：13840792
> 
> 赞同：1
> 
> 时间：2012-12-12T13:22:49.183
> 
> 标签：html, flash, video, html5-video

我正在使用以下代码，并希望获得有关此方法的一些建议。我们正在针对 iPad、平板电脑、Mac、iPhone 和 Android 等移动设备优化我们的网站。

我决定最好的方法是先做 HTML5，如果 HTML5 不存在则回退到 Flash。但是它不能正常工作。例如，如果所有 HTML5 视频都不存在，它会显示 mime 错误并且不会退回到 Flash？

```
<video width="294" height="530" loop="" preload="false" autoplay="" id="GCFlashAlt" controls="controls" tabindex="0">
        <source type="video/webm" src="http://cdn.com/718_blacklep/718_blacklep.webm"></source>
        <source type="video/ogg" src="http://cdn.com/718_blacklep/718_blacklep.ogv"></source>
        <source type="video/mp4" src="http://cdn.com/718_blacklep/718_blacklep.mp4"></source>
        <object width="294" height="530" align="middle" id="product2a" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">
                <param value="http://cdn.com/718_blacklep/718_blacklep.swf" name="movie">
                <param value="best" name="quality">
                <param value="#ffffff" name="bgcolor">
                <param value="true" name="play">
                <param value="true" name="loop">
                <param value="transparent" name="wmode">
                <param value="showall" name="scale">
                <param value="true" name="menu">
                <param value="false" name="devicefont">
                <param value="" name="salign">
                <param value="sameDomain" name="allowScriptAccess">
                <!--[if !IE]>-->
                <object width="294" height="530" data="http://cdn.com/718_blacklep/718_blacklep.swf" type="application/x-shockwave-flash">
                        <param value="http://cdn.com/718_blacklep/718_blacklep.swf" name="movie">
                        <param value="best" name="quality">
                        <param value="#ffffff" name="bgcolor">
                        <param value="true" name="play">
                        <param value="true" name="loop">
                        <param value="transparent" name="wmode">
                        <param value="showall" name="scale">
                        <param value="true" name="menu">
                        <param value="false" name="devicefont">
                        <param value="" name="salign">
                        <param value="sameDomain" name="allowScriptAccess">
                        <!--<![endif]--> 

                        <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
        </object>
</video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T15:15:35.577

我建议使用[MediaElementJS](http://mediaelementjs.com/)之类的库来为您处理所有这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:02:22.497

这是我们采用的解决方案。跨浏览器和跨设备兼容。

我们不想使用外部库，尽管 mediaelementsjs 和其他库是不错的选择，但这对我们来说是最好的解决方案。

1 - 检查用户是否有 Flash，如果有，播放视频的 SWF 版本

2 - 如果用户没有 Flash，请检查他们是否启用了 HTML5。

3 - 如果他们有 HTML5，请先播放 mp4（必须支持浏览器播放）

4 - 如果他们有 HTML5 但在 Firefox 或手机上，例如播放`.ogv`

5 - 最后播放失败的 webm

6 - 如果它们没有这些功能，我们只需包含一个空白 div。这会触发网站上的视频播放按钮根本不显示视频功能。

没有 PHP，一个小 jQuery，其余的都是有效的 HTML5。这是我们发现的最佳解决方案，因为它适用于包括 iPad 在内的所有设备。我们还有一个`IF CONDITIONAL`针对旧 Internet Explorer 的缺点——这也有助于 IE 播放。

我们看到的结果非常好，该文件适用于我们拥有的每个客户设备和浏览器。我们使用 GetClicky，他们有一个 API，添加`<video title="video name"`了 HTML5 和 SWF 播放可跟踪。

```
<div class="videobox showorhide" id="videoisonbox">
<object width="294" height="530" align="middle" id="product2a" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000">
        <param value="http://cdn.com/718_blacklep/718_blacklep.swf" name="movie">
        <param value="best" name="quality">
        <param value="#ffffff" name="bgcolor">
        <param value="true" name="play">
        <param value="true" name="loop">
        <param value="transparent" name="wmode">
        <param value="showall" name="scale">
        <param value="true" name="menu">
        <param value="false" name="devicefont">
        <param value="" name="salign">
        <param value="sameDomain" name="allowScriptAccess">
        <!--[if !IE]>-->
        <object width="294" height="530" data="http://cdn.com/718_blacklep/718_blacklep.swf" type="application/x-shockwave-flash">
                <param value="http://cdn.com/718_blacklep/718_blacklep.swf" name="movie">
                <param value="best" name="quality">
                <param value="#ffffff" name="bgcolor">
                <param value="true" name="play">
                <param value="true" name="loop">
                <param value="transparent" name="wmode">
                <param value="showall" name="scale">
                <param value="true" name="menu">
                <param value="false" name="devicefont">
                <param value="" name="salign">
                <param value="sameDomain" name="allowScriptAccess">
                <!--<![endif]-->
                <video title="718 Black Lep Dress" width="294" height="530" loop preload="false" autoplay id="GCFlashAlt" controls tabindex="0">
                        <source type="video/mp4" src="http://cdn.com/718_blacklep/718_blacklep.mp4"></source>
                        <source type="video/ogg" src="http://cdn.com/718_blacklep/718_blacklep.ogv"></source>
                        <source type="video/webm" src="http://cdn.com/718_blacklep/718_blacklep.webm"></source>
                </video>
                <div class="blank" class="enabled disable detect" id="isvideooncheck"><!-- jQuery Update for disabling video --></div>
                <!--[if !IE]>-->
        </object>
        <!--<![endif]-->
</object>
</div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T19:55:34.193

应在服务器端检查是否存在 HTML5 视频文件。例如，如果您在服务器上使用 PHP，您可以使用如下内容：

```
<?php if (file_exists($html5videofile)) { ?>
    <video ...>
        <source ...>
        <source ...>
        <source ...>
        <object ...>
    </video>
<?php } else { ?>
    <object ...>
<?php } ?> 
```

# asp.net-web-api - DotNetOpenAuth 自定义随机数

> ID：13840794
> 
> 赞同：0
> 
> 时间：2012-12-12T13:22:50.783
> 
> 标签：asp.net-web-api, dotnetopenauth

我正在使用该`DotNetOpenAuth` `WebConsumer`对象向 OAuth 1.0a 服务提供商发出令牌请求。我想知道在向服务发送请求时是否可以使用自定义随机数，如果可以，我如何配置消费者以使用自定义随机数生成器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:56:43.940

不，我认为为 OAuth 1.0 消费者自定义随机数没有可扩展性。

# xtk - 将 XTK 中的模型渲染到零件

> ID：13840799
> 
> 赞同：0
> 
> 时间：2012-12-12T13:23:07.600
> 
> 标签：xtk

我很怀疑。将在场景中加载模型并在此对象完全加载后

收费，然后我会开始加载另一个模型意味着那个原因是panos.O的背后

我正在加载多个模型，而我的项目需要花费很多时间才能打开负载。一个例子

我的意思是：

renderer.add（骨骼）；

renderer.add (皮肤);

显示在浏览器初始化项目的代码行中，骨骼和皮肤是

渲染所以开始项目。但是我会用q骨骼在皮肤有后渲染

已经渲染，即，在显示皮肤时，骨骼正在渲染。

我希望你已经给出了我的疑问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:35:51.490

您可以先加载一个模型，然后在第一个模型完成后使用 onShowtime 回调开始加载另一个模型：

```
var r = new X.renderer3D();
r.init();

var bones = new X.mesh();
bones.file = 'bones.vtk';

r.add(bones);

r.render();

r.onShowtime = function() {

 // reset the onShowtime function, since it will be called again after loading the skin
 r.onShowtime = function() {};

 // bones were loaded, now load the skin
 var skin = new X.mesh();
 skin.file = 'skin.vtk';

 r.add(skin);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T11:43:45.880

我遇到了一个错误。当使用 onShowtime 函数时，文档说

一切都将在屏幕上被删除和重绘。这就是我的项目中发生的事情，

例如，在我渲染皮肤后，屏幕被擦除了渲染器骨骼。这个想法是得到

我来渲染皮肤，它显示在显示器上，然后在幕后，在幕后

窗帘 esteje 被渲染的骨头。这是为了让加载我的模型不需要很长时间。

谢谢你！！！

# ruby-on-rails - 如何在一个视图中正确组合登录和注册表单

> ID：13840802
> 
> 赞同：2
> 
> 时间：2012-12-12T13:23:20.813
> 
> 标签：ruby-on-rails, devise

我有这个表格部分：

```
.row
    .span6
        .well
            %h2 Sign in
            = simple_form_for(resource, :as => resource_name, :url => session_path(resource_name), :html => {:class => 'form-vertical' }) do |f|
                = f.input :email, :autofocus => true, :wrapper => :bootstrap_placeholder
                = f.input :password, :wrapper => :bootstrap_placeholder
                = f.input :remember_me, :as => :boolean if devise_mapping.rememberable?
                = f.button :submit, "Sign in", :class => 'btn-primary'
            = render "devise/shared/links"

    .span6
        .well
            %h2 Sign up
            = simple_form_for(resource, :as => resource_name, :url => regi stration_path(resource_name), :html => {:class => 'form-vertical' }) do |f|
                = f.error_notification
                = display_base_errors resource
                = f.input :name, :autofocus => true
                = f.input :email, :required => true
                = f.input :password, :required => true
                = f.input :password_confirmation, :required => true
                = f.button :submit, 'Sign up', :class => 'btn-primary'
            = render "devise/shared/links" 
```

并且它工作正常，但问题来自验证，当我想在不输入任何数据的情况下注册用户时......显示错误消息，但它也突出显示登录表单的用户名和密码字段..有没有办法避免这种验证混淆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:43:47.080

`resource`两种形式都是一样的，所以如果两者都显示错误是正常的。为了防止这种情况，您必须分离您使用的资源。尝试这样的事情。

```
# registrations_controller.rb
def create
  super
  @registration_resource = resource
end

# sessions_controller.rb
def create
  super
  @login_resource = resource
end

# _form.html.slim
# sign up
simple_form_for(@registration_resource || resource_name.to_s.capitalize.constantize.new, :as => resource_name, :url => regi stration_path(resource_name), :html => {:class => 'form-vertical' }) do |f|

# sign in
simple_form_for(@login_resource || resource_name.to_s.capitalize.constantize.new, :as => resource_name, :url => regi stration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| 
```

# .htaccess - 如何去除广告重定向？

> ID：13840807
> 
> 赞同：0
> 
> 时间：2012-12-12T13:23:34.940
> 
> 标签：.htaccess

我正在使用 url 更短的脚本。它有广告/链接规则。

但我不希望短链接重定向到广告链接。在管理面板中没有删除广告支持的选项。请看一下[beurl.in](http://beurl.in)

这是我的 htaccess 文件代码。

```
DirectoryIndex index.php

FileETag none
ServerSignature Off

Options All -Indexes

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteRule ^([0-9a-zA-Z]{1,6})$ links/?to=$1 [L]
RewriteRule ^([0-9]{1,9})/banner/(.*)$ links/?uid=$1&adt=2&url=$2 [L]
RewriteRule ^([0-9]{1,9})/(.*)$ links/?uid=$1&adt=1&url=$2 [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:29:42.043

该页面的商业模式基于他们向您展示的广告。试图颠覆至少更有可能违反他们的服务条款是不道德的（尽管由于链接已关闭而难以检查）。如果您真的想要短网址并且不想要广告，为什么不使用其他提供商，例如[goo.gl](http://goo.gl)呢？他们免费提供相同的服务（即您不通过看广告付费）。

# css - 使超大背景图片居中

> ID：13840808
> 
> 赞同：3
> 
> 时间：2012-12-12T13:23:47.983
> 
> 标签：css, html, parallax

我正在构建一个由 4 个 div 构成的单页网站，一个在另一个之上，每个都有自己的固定背景图像。这些图像比屏幕宽得多，因为我想在各种屏幕尺寸上保持其外观，但是有谁知道如何真正居中背景图像。因此，在小型显示器中，他们将看到图像的中心，而在较大的显示器中，他们将看到图像的相同位置，只是周围更多。就像这个网站有

[http://www.cantilever-chippy.co.uk/](http://www.cantilever-chippy.co.uk/)

调整窗口大小时，背景图像会相应移动。

非常感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-12T13:31:06.457

如果您从链接中检查 css，您会看到解决方案：

```
#images #bg_1 {
  background-image: url(images/bg/1.jpg);
  background-position: 50% 0;
} 
```

和 div：

```
<div class="bg_block" id="bg_1" style="height: 1200px; width: 1055px;"></div> 
```

通过 JavaScript，它们会在每次调整大小时更改 #bg_1 的宽度。

```
window.onresize = function(event) {
    $("#bg_1").css("width", $(window).width());
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T13:33:54.277

这应该工作

```
#bg{ 
   background-image:url(yourURL);
   background-repeat:no-repeat;
   background-attachment:fixed;
   background-position:center; 
} 
```

background-fixed 属性适用于 Firefox 和 Opera。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T13:31:40.013

您正在寻找`background-position`CSS 属性。

[http://www.w3schools.com/cssref/pr_background-position.asp](http://www.w3schools.com/cssref/pr_background-position.asp)

它可以采用像素的绝对偏移量（因此，如果您知道图像的大小和 div 的大小，您可以准确计算出您希望它出现的位置）。或者，您可以传递一个百分比。它也可以采用负数，因此您可以将其从屏幕上向任何方向偏移。

但是，对于您的情况，您可能需要简单的“中心”值。像这样的东西应该工作：

```
/* This should center the background image in the div. */
div.background_image_block {  
  background-position: center center;
} 
```

# magento - 如何在 Magento 的观察者上更新 Grand Total？

> ID：13840813
> 
> 赞同：0
> 
> 时间：2012-12-12T13:24:35.803
> 
> 标签：magento, checkout, observers

我有活动的观察员

> controller_action_predispatch_checkout_onepage_savePayment

我想根据某些条件更改总计。我试过：

> $值 = 100;
> 
> $quote = Mage::getSingleton('checkout/type_onepage')->getQuote();
> 
> $quote->setGrandTotal($value);
> 
> $quote->setTotalsCollectedFlag(false)->collectTotals();
> 
> $quote->保存（）；

或者

> $值 = 100;
> 
> $quote = Mage::getSingleton('checkout/type_onepage')->getQuote();
> 
> $quote->setGrandTotal($value);
> 
> $quote->collectTotals();
> 
> $quote->保存（）；

但它不起作用。有任何想法吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:31:14.680

问题是：

活动结束后`controller_action_predispatch_checkout_onepage_savePayment`还有另一个活动从零开始更新总数，所以我的更改消失了！

# iphone - 解除删除操作时 UITableViewCell 上的删除按钮

> ID：13840822
> 
> 赞同：1
> 
> 时间：2012-12-12T13:25:04.087
> 
> 标签：iphone, ios, cocoa-touch, uitableview

当 UITableView 处于编辑模式时**解除删除操作**时，我遇到了一个奇怪的行为。

如果我滑动删除单元格，删除按钮会立即隐藏。这也是我想要表现的方式。

以下是截图：

**启用删除操作：**

![启用删除操作](../Images/6b7100303ac43ab752d92ddab6219d60.png)

**点击单元格时关闭删除：**

![点击单元格时忽略删除](../Images/1c4e9917d6777845b323636c3639e32a.png)

非常感谢您的关注。

# sql - 使用 XQuery 从 XML 中获取值

> ID：13840824
> 
> 赞同：2
> 
> 时间：2012-12-12T13:25:11.073
> 
> 标签：sql, sql-server, xml, tsql, xquery

我是 T-SQL 和 XQuery 的新手。

我在 DB 中有 XML 列，其结构如下

```
 <GPC xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="...">
  <GP>
    <N>Amount1</N>
    <V i:type="X_AMT">
      <AMT>100001</AMT>
      <X_CODE>Dollar</X_CODE>
    </V>
  </GP>
  <GP>
    <N>Amount2</N>
    <V i:type="X_AMT">
      <AMT>0</AMT>
      <X_CODE />
    </V>
  </GP>
  <GP>
    <N>Amount3</N>
    <V i:type="X_AMT">
      <AMT>100001</AMT>
      <X_CODE>Dollar</X_CODE>
    </V>
  </GP>
  <GP>
    <N>Amount4</N>
    <V i:type="X_AMT">
      <AMT>0</AMT>
      <X_CODE />
    </V>
  </GP>
  <GP>
    <N>Amount5</N>
    <V i:type="X_AMT">
      <AMT>100001</AMT>
      <X_CODE>Dollar</X_CODE>
    </V>
  </GP>
  <GP>
    **<N>NeededAmount</N>**
    <V i:type="Y">
      <DETAILS>
        <REFERENCE>
          <N>**ReferenceName1**</N>
          <OId>111111</OId>
        </REFERENCE>
      </DETAILS>
      <DETAILS>
        <REFERENCE>
          <N>**ReferenceName2**</N>
          <OId>22222</OId>
        </REFERENCE>
      </DETAILS>
    </V>
  </GP>

  ...

  </GPC> 
```

这是我正在使用的 SQL Server 中的查询。Query 只返回一个名称 - Name1。但是有两个名字，可以有 100 个名字，我想得到这些名字。

```
 SELECT v.Content.query(N'declare default element namespace "..."; 
    for $i in (GPC/GP) where ($i/N[1] eq "NeededAmount") return ($i)').value('declare default element namespace "..."; 
    (GP/V/DETAILS/REFERENCE/N)[1]', 'nvarchar(max)') AS NeededName
    FROM DB1.protected.WorkItem as v
    where v.Id = 1111 
```

我的问题是：如何修改它以获取文档中的所有名称？有人能帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:57:16.950

尝试这样的事情：

```
;WITH XMLNAMESPACES(DEFAULT '...')
SELECT 
    Amount = XTbl.GP.value('(N)[1]', 'nvarchar(100)'),
    NeededName = XTbl2.DetRef.value('(N)[1]', 'nvarchar(200)')
FROM 
    Table1 AS t
CROSS APPLY
    t.XmlContent.nodes('/GPC/GP') AS XTbl(GP)
CROSS APPLY
    XTbl.GP.nodes('V/DETAILS/REFERENCE') AS XTbl2(DetRef)
WHERE 
    wi.Id = 1111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:13:05.133

[您需要使用nodes() Transact-SQL XML 数据类型方法](http://msdn.microsoft.com/en-us/library/ms188282.aspx)将 xml“分解”成行。nodes() 方法在 FROM 子句中使用，并为 xml 文档中的每个匹配节点生成 1 行。

这是一个使用存储在变量中的 xml 的示例：

```
 DECLARE @x XML
 SET @x = N'     <GPC xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" >
   <GP>
   <GP>
      <N>Amount5</N>
      <V i:type="X_AMT">
        <AMT>100001</AMT>
        <X_CODE>Dollar</X_CODE>
      </V>
   </GP>
   <GP>
      **<N>NeededAmount</N>**
      <V i:type="Y">
        <DETAILS>
           <REFERENCE>
             <N>**ReferenceName1**</N>
             <OId>111111</OId>
           </REFERENCE>
        </DETAILS>
        <DETAILS>
           <REFERENCE>
             <N>**ReferenceName2**</N>
             <OId>22222</OId>
           </REFERENCE>
        </DETAILS>
      </V>
   </GP>
   </GPC>
 '

 SELECT x.n.query('.') FROM @x.nodes('/GPC/GP/V/DETAILS/REFERENCE/N') AS x (n)
 /* returns 
 <N>**ReferenceName1**</N>
 <N>**ReferenceName2**</N> */ 
```

您还可以使用 CROSS APPLY 来粉碎表中的 xml 列

```
 CREATE TABLE #t (id INT, doc XML)
 go
  DECLARE @x XML
 SET @x = N'     <GPC xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:i="http://www.w3.org/2001/XMLSchema-instance" >
   <GP>
      <N>Amount5</N>
      <V i:type="X_AMT">
        <AMT>100001</AMT>
        <X_CODE>Dollar</X_CODE>
      </V>
   </GP>
   <GP>
      **<N>NeededAmount</N>**
      <V i:type="Y">
        <DETAILS>
           <REFERENCE>
             <N>**ReferenceName1**</N>
             <OId>111111</OId>
           </REFERENCE>
        </DETAILS>
        <DETAILS>
           <REFERENCE>
             <N>**ReferenceName2**</N>
             <OId>22222</OId>
           </REFERENCE>
        </DETAILS>
      </V>
   </GP>
   </GPC>
 '
 INSERT INTO #t (id, doc) VALUES (1, @x)
 INSERT INTO #t (id, doc) VALUES (2, @x)

 SELECT t.id, x.n.query('.') RefName FROM #t t CROSS APPLY doc.nodes('/GPC/GP/V/DETAILS/REFERENCE/N') AS x (n)
 --returns 4 rows, 2 for each document
 /*
 id            RefName
 1     <N>**ReferenceName1**</N>
 1     <N>**ReferenceName2**</N>
 2     <N>**ReferenceName1**</N>
 2     <N>**ReferenceName2**</N> */ 
```

# php - 尝试连接 sql server 数据库

> ID：13840832
> 
> 赞同：0
> 
> 时间：2012-12-12T13:25:38.153
> 
> 标签：php, sql, sql-server

我正在尝试将 sql server 与 php 连接，我正在尝试从数据库中获取信息。现在，这就是我得到的：

```
 try {
    $user = '';
    $pass = '';
    $objDb = new PDO('mysql:host=192.168.10.250;dbname=WEB_POROSIA',
    '$user', '$pass');
    $objDb->exec('SET CHARACTER SET utf8');

    $sql = "SELECT *    
            FROM 'WEB_POROSIA'
           ";
    $statement = $objDb->query($sql);
    $list = $statement->fetchAll(PDO::FETCH_ASSOC); 

    } catch(PDOException $e) {
    echo $e->getMessage();

     } 
```

我收到此错误：

```
SQLSTATE[HY000] [2002] No connection could be made because the target machine actively refused it. 
```

这是我第一次尝试将 php 与 sql server 连接，我不知道这个输出是什么意思，我的意思是我不知道是什么原因造成的！

我正在使用 xampp。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:30:18.660

您似乎正在尝试使用错误的驱动程序进行连接。

对于 Sql Server，您可能希望使用 PDO ODBC 驱动程序，而不是您尝试使用的 mysql 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:00:26.540

您编写的代码尝试连接到 MySQL 数据库而不是 MSSQL 数据库。

你会想做这样的事情：

```
$db_connection = new PDO("dblib:dbname=$db_name;host=$host", $username, $password); 
```

您可以在此处找到更多信息：http: [//grover.open2space.com/content/use-php-and-pdo-connect-ms-sql-server](http://grover.open2space.com/content/use-php-and-pdo-connect-ms-sql-server)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:34:30.737

您需要使用不同的 DBO 驱动程序。检查其他 ODBC 驱动程序，即 PDO。

# ios - 使用 NSURL 和 NSJSON 运行应用程序时出现“NSInvalidArgumentException”

> ID：13840835
> 
> 赞同：1
> 
> 时间：2012-12-12T13:25:45.613
> 
> 标签：ios, json, url, exception

我设计了一个应用程序，它有一个按钮和三个标签。

当按下按钮时，会调用一个 URL。URL 的 JSON 表示形式如下：

```
[
  {
    "_id": "50c87e8a1898044ea1458e4c",
    "value": "10",
    "time": "12:10",
    "date": "12.12.12"
  },
  {
    "_id": "50c87f311898044ea1458e4d",
    "value": "12",
    "time": "13:15",
    "date": "12.12.12"
  }
] 
```

我的应用程序中还有三个标签，可以显示值、时间和日期。

我的应用程序的代码如下：

```
-(IBAction)getrequest:(id)sender
{
    NSURL *url =[NSURL URLWithString:@"http://localhost:3000/lights"];
    NSData* data = [NSData dataWithContentsOfURL:url];
    //fetch the data to the JSON Foundation opject.
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data waitUntilDone:YES];
}

- (void)fetchedData:(NSData *)responseData {
    NSError *e = nil;
    NSMutableArray *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&e];
    NSLog(@"%@", json);
        [self processData:json];
}

-(void)processData:(NSDictionary *) JSONObject{
    NSString        *value = [JSONObject valueForKey:@"value"];
    NSString        *date    = [JSONObject valueForKey:@"date"];
     NSString        *time    = [JSONObject valueForKey:@"time"];

    NSLog(@"value: %@", value);
    NSLog(@"date: %@", date);
    NSLog(@"time: %@", time);

    _value.text = value;
    _date.text = date;
    _time.text = time;

} 
```

代码编译和构建没有任何错误，但是当我按下模拟器中的按钮时，出现如下异常：

```
2012-12-12 14:16:21.115 Sensor_visulization[7956:11303] value: (
    10,
    12
)
2012-12-12 14:16:21.116 Sensor_visulization[7956:11303] date: (
    "12.12.12",
    "12.12.12"
)
2012-12-12 14:16:21.116 Sensor_visulization[7956:11303] time: (
    "12:10",
    "13:15"
)
2012-12-12 14:16:21.116 Sensor_visulization[7956:11303] -[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x7191a30
2012-12-12 14:16:21.117 Sensor_visulization[7956:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI isEqualToString:]: unrecognized selector sent to instance 0x7191a30' 
```

我的 json 解析器有问题吗？

我可以将所有值、时间、日期存储在一个数组中吗？

并在标签上显示数组中的最后一项？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:01:38.233

`valueForKey`当您的`json`对象是字典条目数组时，似乎普遍存在混淆。Midhun 的回答以一种方式解决了这个问题，即只传递一个字典条目`processData`（这是一个合乎逻辑的解决方案，因为您的原始代码声明`NSString *value`明确暗示您希望只传递一个字典条目）。

但是，如果你想为你的字典数组获取所有三个字典键的数组，你会使用你的 original `fetchedData`，并使用`valueForKey`原始`json`对象来返回`NSArray`对象。为此，我建议对您的原始代码进行一些细微修改：

```
- (void)fetchedData:(NSData *)responseData {
    NSError *e = nil;
    NSMutableArray *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&e];
    NSLog(@"%@", json);
    [self processData:json];
}

-(void)processData:(NSDictionary *) JSONObject{

    // get the three array structures

    NSArray *value = [JSONObject valueForKey:@"value"];
    NSArray *date  = [JSONObject valueForKey:@"date"];
    NSArray *time  = [JSONObject valueForKey:@"time"];

    // these log statements demonstrate that value, date, and time are arrays

    NSLog(@"value: %@", value);
    NSLog(@"date:  %@", date);
    NSLog(@"time:  %@", time);

    // now, let's grab the last object from each to populate our controls

    _value.text = [value lastObject];
    _date.text = [date lastObject];
    _time.text = [time lastObject];
} 
```

* * *

顺便说一句，在您的一条评论中，您在括号中提到了想要绘制这些结果的图表。如果是这种情况，我可能会想象您需要将日期和时间组合到`NSDate`对象中。如果您希望它们作为`NSDate`对象，您可以：

```
-(void)processData:(NSDictionary *) JSONObject{

    // get the values

    NSArray *value = [JSONObject valueForKey:@"value"];

    // get the datetimes

    NSMutableArray *datetimes = [NSMutableArray array];
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.dateFormat = @"dd.MM.yy HH:mm";
    formatter.locale = [NSLocale currentLocale];

    for (NSDictionary *dictionary in JSONObject)
    {
        NSString *datetimeString = [NSString stringWithFormat:@"%@ %@", [dictionary objectForKey:@"date"], [dictionary objectForKey:@"time"]];
        NSDate *datetime = [formatter dateFromString:datetimeString];
        [datetimes addObject:datetime];
    }

    NSLog(@"values=%@", values);
    NSLog(@"datetimes=%@", datetimes); 
```

因为您的示例数据具有今天的唯一日期，`12/12/12`所以我无法确定您的日期格式，所以我猜您正在使用`dd.MM.yy`，但显然使用对您的 JSON 数据有意义的任何日期格式字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:44:14.470

`json`是一个你将它作为参数`NSMutableArray`传递给`processData`方法。`NSDictionary`

```
 NSMutableArray *json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&e]; 
```

更改方法调用，如：

```
[self processData:[json objectAtIndex:0]]; 
```

以上将显示第一个元素。如果您需要显示**最后一个元素**，请使用：

```
[self processData:[json objectAtIndex:[json count]-1]]; 
```

# video.js - 使用 video.js 引导不支持 H264 的浏览器闪烁

> ID：13840840
> 
> 赞同：0
> 
> 时间：2012-12-12T13:25:56.573
> 
> 标签：video.js

我正在设置 video.js 并想使用单一视频编码格式 (H264) 以节省空间（在我的情况下它将节省 50% 以上）。当 HTML5 视频不可用时，video.js 回退到 Flash 播放器，但我希望它在 H264 支持也不存在时也回退（例如在 Firefox 中）。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:41:50.213

你不需要做任何事情。这就是将要发生的事情。

例如，它[在这里](http://misterben.me/videojs/mp4.html)工作。你有一个不适合你的 URL 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T16:53:28.463

如果需要，您可以尝试直接检测对该格式的支持 - 尽管我同意，但它应该自动回退到 Flash。

[http://diveintohtml5.info/detect.html#video-formats](http://diveintohtml5.info/detect.html#video-formats)给出了检测对 h264 支持的示例

# android - Build.xml jar.libs.dir

> ID：13840842
> 
> 赞同：1
> 
> 时间：2012-12-12T13:25:57.463
> 
> 标签：android, ant

我试图弄清楚如何将库 jar 链接到我的 android 项目。

我创建了 build.xml

```
android update project -p . 
```

我已经将**ant.properties**定义为

```
jar.libs.dir=lib 
```

我还添加了一个 -pre-build 任务来将一些库复制到目录中：

```
<target name="-pre-build">
  <copy todir="${jar.libs.dir}">
    <fileset 
      dir="absolute-path-from-my-dir" 
      includes="*.jar" />
  </copy>
</target> 
```

这成功了，因为我可以在 ant 输出中看到这一点：

```
-pre-build:
     [copy] Copying 2 files to absolute-path-to-my-lib 
```

但是，我也可以看到：

```
-build-setup:
     [echo] Resolving Build Target for MyAndroidApp...
[gettarget] Project Target:   Android 2.3.3
[gettarget] API level:        10
     [echo] ----------
     [echo] Creating output directories if needed...
     [echo] ----------
     [echo] Resolving Dependencies for MyAndroidApp...
[dependency] Library dependencies:
[dependency] No Libraries
[dependency]
[dependency] ------------------
[dependency] API<=15: Adding annotations.jar to the classpath. 
```

并且 javac 任务失败，因为它找不到库中的类。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:02:27.357

似乎这是解决方案：

[jar.libs.dir 没有被正确覆盖吗？](https://stackoverflow.com/questions/11637852/is-jar-libs-dir-not-being-overridden-properly)

所以这是Android中的一个错误：

[http://code.google.com/p/android/issues/detail?id=33194](http://code.google.com/p/android/issues/detail?id=33194)

# updates - 根据以前的行历史计算列值

> ID：13840849
> 
> 赞同：0
> 
> 时间：2012-12-12T13:26:24.603
> 
> 标签：updates, calculated-columns

您好，我有下表：

```
USE [dm]
GO

/****** Object:  Table [dbo].[Demo]    Script Date: 12/12/2012 08:09:31 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[Demo](
    [File] [nvarchar](50) NULL,
    [version] [nchar](10) NULL,
    [label] [nchar](10) NULL
) ON [PRIMARY]

GO

--option A
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'1', NULL)
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'2', NULL)
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'3', N'A')
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'4', NULL)
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'5', N'B')
GO 
```

我需要创建一个查询或可能的新输出表或视图，如下所示（注意新列 CalcVersion）。知道如何在不使用编程语言的情况下做到这一点吗？

```
File    version    label   CalcVersion
123.doc 1           NULL   A.1
123.doc 2           NULL   A.2
123.doc 3           A      A.3   
123.doc 4           NULL   B.1
123.doc 5           B      B.2 
```

另一种可能的情况是：

```
option B
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'1', N'A')
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'2', NULL)
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'3', NULL)
INSERT INTO [dbo].[Demo]
VALUES (N'123.doc', N'4', N'B') 
```

在这种情况下，结果应该是：

```
File    version   label   CalcVersion
123.doc 1           A      A.1         
123.doc 2           NULL   B.1
123.doc 3           NULL   B.2
123.doc 4           B      B.3 
```

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:31:46.927

我想我去：

```
 UPDATE demo set ver =(
      (SELECT TOP 1 label FROM demo t WHERE t.[file] = pt.[file] 
      and cast(t.[version] as int) > cast(pt.[version] as int) 
            AND t.label is NOT NULL 
       ORDER BY pt.[version] asc)) from demo pt
where pt.label is NULL; 
```

然后将其与等级连接如下：

```
 select *,     ver + '.' + cast(RANK() over (partition by [file] order by version asc) as 
varchar(10)) as ver from demo where label is null; 
```

# c# - iTextSharp 检查 RadioGroup 字段

> ID：13840851
> 
> 赞同：-3
> 
> 时间：2012-12-12T13:26:38.417
> 
> 标签：c#, asp.net, .net, vb.net, itextsharp

我有一个带有无线电组字段的 PDF，我想以编程方式选择该无线电组中的无线电。

任何人都可以帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T14:50:56.037

在 Java 中：http: [//itextpdf.com/examples/iia.php ?id=122](http://itextpdf.com/examples/iia.php?id=122)

在 C# 中：http: [//kuujinbo.info/iTextInAction2Ed/index.aspx ?ch=Chapter06&ex=FillDataSheet](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=FillDataSheet)

就这么简单：

```
form.SetField(key, value); 
```

`key`您的无线电字段的名称在哪里，以及`value`您的无线电组的可能值之一。如果您不知道哪些值是可能的，请查看以下示例：

Java： http: [//itextpdf.com/examples/iia.php ?id=121](http://itextpdf.com/examples/iia.php?id=121)

C#： http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex= [FormInformation](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter06&ex=FormInformation)

```
string[] states = form.GetAppearanceStates(key); 
```

# python - selenium webdriver python：打开chrome浏览器运行测试用例不加载浏览器保存的设置

> ID：13840855
> 
> 赞同：0
> 
> 时间：2012-12-12T13:26:59.300
> 
> 标签：python, selenium, selenium-webdriver

我正在尝试在 Chrome 浏览器中运行 selenium 测试用例。在此之前，我已将 chrome 浏览器文件的默认下载位置设置为 f:/xyz

当 selenium 脚本运行时，单击链接以下载文件 - 它下载到 chrome 的默认位置（c:/documents and settings/downloads），而不是我之前设置的 f:/xyz

如何纠正这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T03:30:20.490

当时是做不到的。[来自http://code.google.com/p/selenium/wiki/ChromeDriver](http://code.google.com/p/selenium/wiki/ChromeDriver)的官方 ChromeDriver Wiki ：

已知问题 ChromeDriver 存在一些已知问题，如下所列：

1.  只能检索设置cookies的名称和值（没有域、路径等）

2.  键入不适用于启用富文本的文档。
3.  **无法指定自定义配置文件**
4.  HTML 5 API 未实现

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:07:18.910

这里的问题很可能是下载位置与特定的用户配置文件相关联，并且 Chrome 驱动程序遵循与 Firefox 驱动程序相同的模式，默认情况下，它每次使用完全干净的用户配置文件的副本已运行，因此 Selenium 永远不会获取您为用户设置的下载位置。在 Firefox 中，解决方案是创建一个自定义的 Firefox 配置文件，然后告诉 Selenium 使用它运行。我敢打赌 Chrome 驱动程序中有一个类似的功能。

根据[文档](http://code.google.com/p/selenium/wiki/ChromeDriver)：

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
capabilities.setCapability("chrome.switches", Arrays.asList("--user-data-dir=/path/to/profile/directory"));
WebDriver driver = new ChromeDriver(capabilities); 
```

是的，那是 Java，但它应该很容易翻译成 Python。另外，请注意文档说有一个关于能够设置自定义配置文件的已知错误。

编辑：

我想我找到了一个对你有用的温和的 hacky 解决方案。

1.  转到包含您正在运行的操作系统上的用户/主文件夹的主文件夹
2.  在SYSTEM用户文件夹下，找到[Chrome用户数据目录](http://www.chromium.org/user-experience/user-data-directory)
3.  打开首选项文件（它是原始文本，因此任何文本编辑器都可以使用）
4.  在“下载”节点下，创建或修改“default_directory”节点为您想要的任何下载位置

请注意，这些步骤假定 Selenium 实际上已在 SYSTEM 用户下至少运行过一次 Chrome。如果没有，您可以手动创建所需的目录，方法是自己在 SYSTEM 用户下运行 Chrome，例如从终端。

# javascript - vbscript“window.onBeforeUnload = Nothing”的javascript等价物是什么

> ID：13840856
> 
> 赞同：1
> 
> 时间：2012-12-12T13:27:01.100
> 
> 标签：javascript, vbscript

```
window.onBeforeUnload = Nothing 
```

上述 vbscript 语句的 JavaScript 等效项是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:27:38.017

```
window.onbeforeunload = null; 
```

应该这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:32:23.120

不应该`window.onBeforeUnload = function() {}`做同样的事情吗？

如果我们将其设置为 null，则会导致 javascript 错误。

# c++ - 关于命名空间、类和范围

> ID：13840867
> 
> 赞同：1
> 
> 时间：2012-12-12T13:27:29.913
> 
> 标签：c++

我有一堂课`NormalCalculator`。在 内`NormalCalculator`，我定义了一个`struct` `GLpoint`.

随着我的项目的进展，我在我的代码中找到了其他地方的用途`GLpoint`，但是我发现`NormalCalculator::GLpoint`每次我希望在课堂`GLpoint struct`之外的解决方案中使用其他地方时都必须编写不整洁和屏幕污染。`NormalCalculator`

有什么方法可以让编译器知道它`GLpoint`存在于 中`NormalCalculator.h`，并让我将其称为`GLpoint`？我很确定应该有办法。

我试过了

```
using NormalCalculator 
```

和

```
using NormalCalculator::GLpoint 
```

正如预期的那样，这些不像`NormalCalculator`类而不是命名空间那样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:34:07.117

您可以使用 typedef。

```
namespace my_ns {
typedef NormalCalculator::GLpoint GLpoint;
} 
```

虽然我真的建议简单地重构代码库。编译器发出的大多数错误消息仍将使用范围限定的完整类型名，而长类型名成为真正的可读性问题。

考虑一下我经常用来打印类型名以调试模板的这段代码：

```
struct Foo
{
  struct Bar {};
};

typedef Foo::Bar ImportedBar;

// refactored bar
struct Bar {};

template <typename> struct print;

int main()
{
  print<ImportedBar> x; // error: aggregate ‘print<Foo::Bar> x’ has incomplete type and cannot be defined
  print<Bar> y; // error: aggregate ‘print<Bar> y’ has incomplete type and cannot be defined
  return 0;
} 
```

第一个版本仍然打印全名。这对您来说可能看起来很小，但考虑一下如果这是 `std::vector`带有模板默认参数的情况会发生什么。突然之间，每个字符都有助于阅读此内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T13:33:16.083

```
typedef NormalCalculator::GLpoint GLpoint; 
```

# php - foreach 和当前

> ID：13840871
> 
> 赞同：2
> 
> 时间：2012-12-12T13:27:34.047
> 
> 标签：php, foreach

```
<?php
$a = array(1, 2, 3, 4, 5);
foreach ($a as $key => $elem) {
    echo "$key = $elem"; echo ' = ';
    var_dump(current($a));\
}
?> 
```

我运行时得到的输出如下：

```
0 = 1 = int(2)

1 = 2 = int(2)

2 = 3 = int(2)

3 = 4 = int(2)

4 = 5 = int(2) 
```

在我看来，这是我应该得到的输出？：

```
0 = 1 = int(1)

1 = 2 = int(2)

2 = 3 = int(3)

3 = 4 = int(4)

4 = 5 = int(5) 
```

我在 $a 上的 for 循环之前执行 current() 并获得 int(1)。因此，似乎是导致它增加的 foreach 循环。但如果是这样，为什么它只做一次呢？

如果我在 for 循环中调用 next() 它会增加，但不会增加。当然 next() 从 int(3) 开始（即 int(2) 之后的值）..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:39:31.693

通过阅读有关 current 的 PHP 文档，您似乎不应该期望 foreach 移动当前指针。

请参阅： http: [//php.net/manual/en/function.current.php](http://php.net/manual/en/function.current.php)

有点令人困惑的是，每个函数确实移动了当前指针。因此，如果您使用 each 而不是 foreach 将数组重写为循环，那么您将获得所需的当前行为。

这是用 each() 重写的示例，它产生了预期的结果：

```
<?php
$a = array(1, 2, 3, 4, 5);
while ( list($key,$elem) = each($a)) {
    echo "$key = $elem"; echo ' = ';
    var_dump(current($a));
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:37:53.407

`current()`使用内部标志（指针），而 foreach 使用它自己的。

如果你想这样做（这有点傻，因为你在 $key 中有密钥）你可以使用[ArrayIterator](http://php.net/ArrayIterator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-13T18:42:43.427

我只是偶然发现了同样的问题，我相信我有一个理论。Foreach 不会按值访问数组元素，它会创建自己的副本。但是，在执行此操作时，它只会将 current() 返回的值增加一次。

要检查这一点：

```
<?php

$a = [0, 1, 2];
    foreach ($a as &$val){ // accessing the array elts by reference this time
    var_dump(current($a));
}

/*this outputs:
int(1)
int(2)
bool(false)*/ 
```

# c# - 使用未知类型的对象调用泛型方法

> ID：13840875
> 
> 赞同：0
> 
> 时间：2012-12-12T13:27:39.243
> 
> 标签：c#, generics, casting

我有这个方法

```
public string DictionaryToString<T, U>(Dictionary<T, U> dict)
{
  var valueStrings = dict.Select(x => x.Key.ToString() + ": " + x.Value.ToString());
  return String.Join("\n", valueStrings);
} 
```

我有这个我想传递给它的对象

```
if ((value !=null) && value.GetType().IsGenericType &&
  value.GetType().GetGenericTypeDefinition() == typeof (Dictionary<,>))
{
   var castValue = value as Dictionary<,>; // this cast does not work
   return DictionaryToString(castValue);
}
else
{
  return value.ToString();
} 
```

我可以在.Net 4.5中使用这样的反射代码

```
var targetMethodInfo = typeof(MyType).GetMethod("DictionaryToString");
var valueTypeArgs = value.GetType().GenericTypeArguments;
var genericMethod = targetMethodInfo.MakeGenericMethod(valueTypeArgs);
var result = genericMethod.Invoke(this, new[] {value });
return result.ToString(); 
```

但`Type.GenericTypeArguments`在 .Net 4.5 中是新的。那么我怎样才能在.Net 4.0 中做到这一点呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:36:32.870

您只调用`ToString`键和值，因此只需让此方法采用`IDictionary`（非泛型），您没有使用任何类型特定于`T`or的东西`U`。

然后，您可以简单地将所有参数转换为`IDictionary`：

```
var d = arg as IDictionary;

if (d != null)
{
    var res = DictionaryToString(d);
} 
```

您可能还需要修改`DictionaryToString`实现：

```
static string DictionaryToString(IDictionary d)
{
    var vals = new List<string>();

    foreach (DictionaryEntry de in d)
    {
        vals.Add(de.Key.ToString() + ": " + de.Value.ToString());
    }

    return String.Join("\n", vals);
} 
```

或者，如果您真的想使用 LINQ，您可以尝试转换为`dynamic`（无法转换为其他任何内容，因为这可能是通用字典 ( `KeyValuePair<>`) 或非通用哈希表 ( `DictionaryEntry`)）：

```
var valueStrings = d.Cast<dynamic>().Select(de => de.Key.ToString() + ": " + de.Value.ToString());
return string.Join("\n", valueStrings); 
```

这基本上是“鸭子类型”的`Key`和`Value`属性的存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:43:24.833

这听起来可能是旧`System.Collections`命名空间的情况：

```
 private static string DictionaryToString(IDictionary dict) {
        if (null == dict) throw new ArgumentNullException("dict");

        var valueStrings = new List<string>();
        foreach (DictionaryEntry item in dict) {
            valueStrings.Add(item.Key + ": " + item.Value);
        }
        return string.Join("\n", valueStrings.ToArray());
    } 

    private static string Test(object value) {

        var dict = value as IDictionary;
        if (dict != null) {
            return DictionaryToString(dict);
        }

        if (value == null) {
            return null;
        }

        return value.ToString();
    }

    private static void Main(string[] args) {

        var aDictionary = new Dictionary<int, string> {
            { 1, "one" },
            { 2, "two" },
            { 3, "three" }
        };

        Console.WriteLine(Test(aDictionary));

        var anotherDictionary = new Dictionary<string, object> {
            { "one", 1 },
            { "two", "2" },
            { "three", new object() }
        };

        Console.WriteLine(Test(anotherDictionary));

        Console.ReadLine();
    } 
```

**推理：**

非泛型`IDictionary`将是键值对的集合，其中键是 an `object`，值是 an `object`。`object`support的所有实例`ToString`，因此集合的所有键和值都可以转换为 a`string`而无需知道它们的具体类型。

这不起作用的原因：

```
var castValue = value as Dictionary<,> 
```

是因为泛型类型`Dictionary<TKey, TValue>`需要 2 个类型参数。没有这些类型参数，集合就不是通用的。`IDictionary`如果您在编译时不知道键或值类型，最好使用非泛型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:31:20.267

GetGenericTypeDefinition 可用于以前的版本[http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition(v=vs.100).aspx)。我认为 MSDN 上的 4.5 页面缺少“其他版本”下拉菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T13:32:08.910

为什么不？

```
if ((value !=null) && value.GetType().IsGenericType &&
       value.GetType().GetGenericTypeDefinition() == typeof (Dictionary<,>))
{
   return DictionaryToString(castValue);
}
else
{
  return value.ToString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T13:35:44.043

您可以`dynamic`在 .NET 4.0 中转换为。事先`typeof(Dictionary<,>)`检查将确保您不会遇到运行时错误。

```
var castValue = value as dynamic;
return DictionaryToString(castValue); 
```

# google-app-engine - 最大限度。单个对象的并行读取数

> ID：13840876
> 
> 赞同：1
> 
> 时间：2012-12-12T13:27:43.553
> 
> 标签：google-app-engine, google-cloud-storage

在 Google Group 中，Mike[1] 写道：

> Google Cloud Storage 确实支持在单个文件中进行并行*读取[...]*

允许多少并行读取（对于单个文件）？我问是因为如果我尝试使用并行请求（Google App Engine Java API）访问单个文件，我的应用程序会引发异常。

也许应用程序抛出异常是因为请求打开超过 30 秒（我现在会检查）。但是我也有必要知道我可以为一个文件发送多少个请求。

[1] [https://groups.google.com/forum/?fromgroups=#!searchin/gs-discussion/concurrent/gs-discussion/5K9rReneQK8/v7QEbSx4cY8J](https://groups.google.com/forum/?fromgroups=#!searchin/gs-discussion/concurrent/gs-discussion/5K9rReneQK8/v7QEbSx4cY8J)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:21:42.503

Google Cloud Storage 对对象的并行请求数量没有硬性限制。来自同一应用程序的并行请求通常用于使用 HTTP Range 标头检索大型对象的部分：

[https://developers.google.com/storage/docs/reference-headers#range](https://developers.google.com/storage/docs/reference-headers#range)

# php - 带有 AND 的 case 语句

> ID：13840879
> 
> 赞同：2
> 
> 时间：2012-12-12T13:27:48.087
> 
> 标签：php, mysql, case

我在查询中使用年龄过滤器，我有多个年龄可供选择，如下所示

18
岁以下 25岁以下
25-34
35-44
45-54
55-64
65 岁以上

我会从mysql中选择关于年龄的行如下

```
select * from users where isactive=1 
AND (DateOfBirth > (CURDATE() - INTERVAL  $Age YEAR) OR $Age = 0) 
```

现在我想添加关于年龄的 case 语句 if $age variable =25-34 以便我可以选择相关

或者任何人都可以告诉我如何在案例中编写和声明，例如

```
case $age
when $age='25' AND (DateOfBirth > (CURDATE() - INTERVAL  $Age YEAR) OR $Age = 0)
end case 
```

这是完整的查询，我在搜索结果时工作得很好，只有年龄过滤器需要上面多个年龄的 case 语句，这里是查询：

`SELECT * FROM user WHERE IsDeleted!=1 AND (IsMale = $Gender OR $Gender = 2)`

`/// AT THIS POINT I NEED to add multple case to filter it by ages (after gender filter)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:33:39.627

这应该可以正常工作：

```
CASE
  WHEN $age ='25' 
       AND 
       (
         ($Age = 0) 
         OR 
         (DateOfBirth > (CURDATE() - INTERVAL  $Age YEAR))
       )
  Then ...
END 
```

# python - Python中findall和括号的使用

> ID：13840883
> 
> 赞同：5
> 
> 时间：2012-12-12T13:28:06.817
> 
> 标签：python, regex

我需要提取符号*之后*`+`或字符串开头的所有字母，如下所示：

```
formula = "X+BC+DAF" 
```

我试过了，我不想看到`+`结果中的标志。我希望只看到`['X', 'B', 'D']`。

```
>>> re.findall("^[A-Z]|[+][A-Z]", formula)
['X', '+B', '+D'] 
```

当我用括号分组时，我得到了这个奇怪的结果：

```
re.findall("^([A-Z])|[+]([A-Z])", formula)
[('X', ''), ('', 'B'), ('', 'D')] 
```

为什么当我尝试分组时它会创建元组？如何直接编写正则表达式以使其返回`['X', 'B', 'D']`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T13:29:55.620

如果正则表达式中有任何捕获组，则[`re.findall`](http://docs.python.org/2/library/re.html#re.findall)仅返回组捕获的值。如果没有组，则返回整个匹配的字符串。

> `re.findall(pattern, string, flags=0)`
> 
> 返回字符串中模式的所有非重叠匹配，作为字符串列表。从左到右扫描字符串，并按找到的顺序返回匹配项。**如果模式中存在一个或多个组，则返回组列表；如果模式有多个组，这将是一个元组列表。**空匹配包含在结果中，除非它们触及另一个匹配的开始。

* * *

> 如何直接编写正则表达式以使其返回 ['X', 'B', 'D'] ？

您可以使用非捕获组，而不是使用捕获组：

```
>>> re.findall(r"(?:^|\+)([A-Z])", formula)
['X', 'B', 'D'] 
```

或者对于这种特定情况，您可以尝试使用单词边界的更简单的解决方案：

```
>>> re.findall(r"\b[A-Z]", formula)
['X', 'B', 'D'] 
```

或者使用`str.split`不使用正则表达式的解决方案：

```
>>> [s[0] for s in formula.split('+')]
['X', 'B', 'D'] 
```

# php - PHPMailer 邮件头

> ID：13840884
> 
> 赞同：0
> 
> 时间：2012-12-12T13:28:07.013
> 
> 标签：php, sendmail, phpmailer

我使用 PHPMailer 发送电子邮件。但由于某种原因，它总是去垃圾邮件箱..

谷歌说这封电子邮件缺少**mailed-by header**。

问题是如何使用 PHPMailer 添加附加标头？

```
current code:
function sendMail($mail, $arr) {
    $mail->AddAddress($arr['toEmail'], $arr['toName']);
    $mail->SetFrom($arr['fromEmail'], $arr['fromName']);
    $mail->AddReplyTo($replyEmail, $replyName);
    $mail->Subject = trim($arr['subject']);
    $mail->addCustomHeader('mailed-by: mydomain.com'); <-- didnt work.
    $mail->MsgHTML( trim($arr['content']) );
    $mail->IsHTML(true); 
    $mail->Send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:37:41.613

也许试试：`$mail->Hostname`根据这个[文档](http://phpmailer.worxware.com/index.php?pg=properties)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-12T13:39:50.430

已经试过了吗？：

```
$mail->Host = "mydomain.com"; 
```

# java - 有没有类似安卓的小规模资源系统？

> ID：13840888
> 
> 赞同：5
> 
> 时间：2012-12-12T13:28:38.000
> 
> 标签：java, android, android-activity, resources, android-resources

我正在编写一个 Android 应用程序，其中有大量变量需要在特定活动中访问（基本上，是一种小型游戏的“数据模型”）。目前，我将它们全部存储在一个巨大的“容器”类中，这样我就可以轻松地引用它们而不会污染我的活动类。例子：

```
public class Model
{
    private int a;
    private String b;
    private float c;

    ...

    public int getA()
    {
        return a;
    }

    public void setA(int a)
    {
        this.a = a;
    }

    public String getB()
    {
        return b;
    }

    public void setB(String b)
    {
        this.b = b;
    }

    public float getC()
    {
        return c;
    }

    public void setC(float c)
    {
        this.c = c;
    }

    ...
} 
```

如您所见，它们属于不同的类型，并且都有 getter 和 setter。但是像这样存储它们变得很麻烦。我还想迭代变量组，但是使用这种扁平的 getter/setter 格式，我真的不能这样做。

我知道 Android 的资源系统，但它似乎不适合这个，因为变量并不意味着是应用程序范围/全局的。它们仅在此特定活动的生命周期内存在，并且在每次活动开始时以编程方式生成。

我正在考虑将它们全部放入一个`Map<String, Object>`结构中，在那里我可以通过字符串键引用每个变量。这将消除对具有大量 getter 和 setter 的容器类的需要，因为我可以在地图上调用`put`或。`get`但是，每当我想从地图中获取值时，我都必须转换为预期的类型。我不喜欢那样的声音。

有人有更好的解决方案吗？有没有类似于 Android 的资源系统可以在更小、更临时的规模上使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T15:30:11.560

您可以为每个活动定义一个自定义 xml 资源文件。这些文件存储在与 /src 文件夹相同级别的 /xml 文件夹中。使用 Resources 类来加载它们。

或者看看这个问题：[Dynamic Resource Loading Android](https://stackoverflow.com/questions/3648942/dynamic-resource-loading-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:32:48.377

我不知道为什么，如果这些是为了对 Activity 的状态进行建模，那么您不只是为每个模型对象定义了实际的类。那将是我的建议。您在这里采用了一种非常类似于 C 的程序方法，只需将它们一起倾倒在一个类中。此外，由于您的代码没有显示静态 getter 和 setter，因此您必须以某种方式创建和访问容器类，不是吗？基于这个小片段并且没有更多上下文，很难给你一个更好的答案。

# php - 循环每一项技能，而不仅仅是其中的几个

> ID：13840893
> 
> 赞同：0
> 
> 时间：2012-12-12T13:28:54.850
> 
> 标签：php, foreach, simplexml, api-eveonline

[我正在尝试循环在 EVE Online ( API Skilltree](https://api.eveonline.com/eve/SkillTree.xml.aspx) )中可以找到的所有技能，但以下代码仅循环通过前 7 个技能组。

```
$skilltree_url = file_get_contents('https://api.eveonline.com/eve/SkillTree.xml.aspx', 0, null, null);
$skilltree = simplexml_load_string($skilltree_url);

foreach($skilltree->result->rowset->row AS $skill) {
    var_dump($skill->rowset->row->attributes()->typeID);
} 
```

我做错了什么？

提前致谢。

**编辑**

这段代码：

```
$xml = simplexml_load_file('https://api.eveonline.com/eve/SkillTree.xml.aspx');
$skilltree = $xml->result->rowset;
foreach($skilltree->row as $skill) {
    var_dump($skill->rowset->row->attributes()->typeID);
} 
```

打印这个：

```
object(SimpleXMLElement)[7]
  string '2403' (length=4)
object(SimpleXMLElement)[6]
  string '3184' (length=4)
object(SimpleXMLElement)[7]
  string '3300' (length=4)
object(SimpleXMLElement)[6]
  string '3319' (length=4)
object(SimpleXMLElement)[7]
  string '3327' (length=4)
object(SimpleXMLElement)[6]
  string '3348' (length=4)
object(SimpleXMLElement)[7]
  string '3355' (length=4)
object(SimpleXMLElement)[6]
  string '3363' (length=4)
object(SimpleXMLElement)[7]
  string '3380' (length=4)
object(SimpleXMLElement)[6]
  string '3392' (length=4)
object(SimpleXMLElement)[7]
  string '3402' (length=4)
object(SimpleXMLElement)[6]
  string '3413' (length=4)
object(SimpleXMLElement)[7]
  string '3426' (length=4)
object(SimpleXMLElement)[6]
  string '3436' (length=4)
object(SimpleXMLElement)[7]
  string '3443' (length=4)
object(SimpleXMLElement)[6]
  string '3449' (length=4)
object(SimpleXMLElement)[7]
  string '3551' (length=4)
object(SimpleXMLElement)[6]
  string '3731' (length=4)
object(SimpleXMLElement)[7]
  string '3755' (length=4)
object(SimpleXMLElement)[6]
  string '3893' (length=4)
object(SimpleXMLElement)[7]
  string '4385' (length=4)
object(SimpleXMLElement)[6]
  string '4411' (length=4)
object(SimpleXMLElement)[7]
  string '9955' (length=4)
object(SimpleXMLElement)[6]
  string '11015' (length=5)
object(SimpleXMLElement)[7]
  string '11075' (length=5)
object(SimpleXMLElement)[6]
  string '11082' (length=5)
object(SimpleXMLElement)[7]
  string '11204' (length=5)
object(SimpleXMLElement)[6]
  string '11207' (length=5)
object(SimpleXMLElement)[7]
  string '11208' (length=5)
object(SimpleXMLElement)[6]
  string '11395' (length=5)
object(SimpleXMLElement)[7]
  string '11433' (length=5)
object(SimpleXMLElement)[6]
  string '11566' (length=5)
object(SimpleXMLElement)[7]
  string '11569' (length=5)
object(SimpleXMLElement)[6]
  string '11579' (length=5)
object(SimpleXMLElement)[7]
  string '11584' (length=5)
object(SimpleXMLElement)[6]
  string '11858' (length=5)
object(SimpleXMLElement)[7]
  string '12092' (length=5)
object(SimpleXMLElement)[6]
  string '12179' (length=5)
object(SimpleXMLElement)[7]
  string '12180' (length=5)
object(SimpleXMLElement)[6]
  string '12201' (length=5)
object(SimpleXMLElement)[7]
  string '12241' (length=5)
object(SimpleXMLElement)[6]
  string '12305' (length=5)
object(SimpleXMLElement)[7]
  string '12365' (length=5)
object(SimpleXMLElement)[6]
  string '12368' (length=5)
object(SimpleXMLElement)[7]
  string '12441' (length=5)
object(SimpleXMLElement)[6]
  string '12484' (length=5)
object(SimpleXMLElement)[7]
  string '12834' (length=5)
object(SimpleXMLElement)[6]
  string '13278' (length=5)
object(SimpleXMLElement)[7]
  string '13279' (length=5)
object(SimpleXMLElement)[6]
  string '16069' (length=5)
object(SimpleXMLElement)[7]
  string '16281' (length=5)
object(SimpleXMLElement)[6]
  string '16591' (length=5)
object(SimpleXMLElement)[7]
  string '16594' (length=5)
object(SimpleXMLElement)[6]
  string '17940' (length=5)
object(SimpleXMLElement)[7]
  string '18025' (length=5)
object(SimpleXMLElement)[6]
  string '18580' (length=5)
object(SimpleXMLElement)[7]
  string '19430' (length=5)
object(SimpleXMLElement)[6]
  string '19759' (length=5)
object(SimpleXMLElement)[7]
  string '20127' (length=5)
object(SimpleXMLElement)[6]
  string '20209' (length=5)
object(SimpleXMLElement)[7]
  string '20327' (length=5)
object(SimpleXMLElement)[6]
  string '20342' (length=5)
object(SimpleXMLElement)[7]
  string '20433' (length=5)
object(SimpleXMLElement)[6]
  string '20494' (length=5)
object(SimpleXMLElement)[7]
  string '20524' (length=5)
object(SimpleXMLElement)[6]
  string '21059' (length=5)
object(SimpleXMLElement)[7]
  string '21071' (length=5)
object(SimpleXMLElement)[6]
  string '21603' (length=5)
object(SimpleXMLElement)[7]
  string '21610' (length=5)
object(SimpleXMLElement)[6]
  string '21666' (length=5)
object(SimpleXMLElement)[7]
  string '21668' (length=5)
object(SimpleXMLElement)[6]
  string '21718' (length=5)
object(SimpleXMLElement)[7]
  string '21802' (length=5)
object(SimpleXMLElement)[6]
  string '21803' (length=5)
object(SimpleXMLElement)[7]
  string '22043' (length=5)
object(SimpleXMLElement)[6]
  string '22172' (length=5)
object(SimpleXMLElement)[7]
  string '22242' (length=5)
object(SimpleXMLElement)[6]
  string '22536' (length=5)
object(SimpleXMLElement)[7]
  string '22541' (length=5)
object(SimpleXMLElement)[6]
  string '22551' (length=5)
object(SimpleXMLElement)[7]
  string '22552' (length=5)
object(SimpleXMLElement)[6]
  string '22578' (length=5)
object(SimpleXMLElement)[7]
  string '22761' (length=5)
object(SimpleXMLElement)[6]
  string '22806' (length=5)
object(SimpleXMLElement)[7]
  string '23069' (length=5)
object(SimpleXMLElement)[6]
  string '23087' (length=5)
object(SimpleXMLElement)[7]
  string '23566' (length=5)
object(SimpleXMLElement)[6]
  string '23950' (length=5)
object(SimpleXMLElement)[7]
  string '24241' (length=5)
object(SimpleXMLElement)[6]
  string '24242' (length=5)
object(SimpleXMLElement)[7]
  string '24268' (length=5)
object(SimpleXMLElement)[6]
  string '24270' (length=5)
object(SimpleXMLElement)[7]
  string '24311' (length=5)
object(SimpleXMLElement)[6]
  string '24562' (length=5)
object(SimpleXMLElement)[7]
  string '24568' (length=5)
object(SimpleXMLElement)[6]
  string '24571' (length=5)
object(SimpleXMLElement)[7]
  string '24606' (length=5)
object(SimpleXMLElement)[6]
  string '24613' (length=5)
object(SimpleXMLElement)[7]
  string '24624' (length=5)
object(SimpleXMLElement)[6]
  string '24625' (length=5)
object(SimpleXMLElement)[7]
  string '24764' (length=5)
object(SimpleXMLElement)[6]
  string '25233' (length=5)
object(SimpleXMLElement)[7]
  string '25530' (length=5)
object(SimpleXMLElement)[6]
  string '25544' (length=5)
object(SimpleXMLElement)[7]
  string '25718' (length=5)
object(SimpleXMLElement)[6]
  string '25739' (length=5)
object(SimpleXMLElement)[7]
  string '25863' (length=5)
object(SimpleXMLElement)[6]
  string '26224' (length=5)
object(SimpleXMLElement)[7]
  string '26252' (length=5)
object(SimpleXMLElement)[6]
  string '27911' (length=5)
object(SimpleXMLElement)[7]
  string '27936' (length=5)
object(SimpleXMLElement)[6]
  string '28073' (length=5)
object(SimpleXMLElement)[7]
  string '28164' (length=5)
object(SimpleXMLElement)[6]
  string '28261' (length=5)
object(SimpleXMLElement)[7]
  string '28373' (length=5)
object(SimpleXMLElement)[6]
  string '28374' (length=5)
object(SimpleXMLElement)[7]
  string '28585' (length=5)
object(SimpleXMLElement)[6]
  string '28604' (length=5)
object(SimpleXMLElement)[7]
  string '28609' (length=5)
object(SimpleXMLElement)[6]
  string '28631' (length=5)
object(SimpleXMLElement)[7]
  string '28656' (length=5)
object(SimpleXMLElement)[6]
  string '28879' (length=5)
object(SimpleXMLElement)[7]
  string '29029' (length=5)
object(SimpleXMLElement)[6]
  string '30324' (length=5)
object(SimpleXMLElement)[7]
  string '30532' (length=5)
object(SimpleXMLElement)[6]
  string '30650' (length=5)
object(SimpleXMLElement)[7]
  string '30788' (length=5)
object(SimpleXMLElement)[6]
  string '32339' (length=5)
object(SimpleXMLElement)[7]
  string '32435' (length=5)
object(SimpleXMLElement)[6]
  string '32797' (length=5)
object(SimpleXMLElement)[7]
  string '32856' (length=5)
object(SimpleXMLElement)[6]
  string '32918' (length=5)
object(SimpleXMLElement)[7]
  string '32999' (length=5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:55:54.390

这应该可以工作，并且更容易使用：

```
$xml = simplexml_load_file('https://api.eveonline.com/eve/SkillTree.xml.aspx');
$skilltree = $xml->result->rowset;
foreach($skilltree->row as $skill) {
    var_dump($skill->rowset->row->attributes()->typeID);
} 
```

编辑：

这应该是您需要的全部内容，其余的属性您应该能够自己弄清楚：

```
$xml = simplexml_load_file('https://api.eveonline.com/eve/SkillTree.xml.aspx');
$skilltree = $xml->result->rowset;
foreach($skilltree->row as $skillgroup) {
    echo 'Group name: ' .$skillgroup->attributes()->groupName .'<br />';
    foreach ($skillgroup->rowset->row as $skill) {
        echo 'Type ID: ' .$skill->attributes()->typeID .'<br />';
        echo 'Type name: ' .$skill->attributes()->typeName .'<br />';
    }
    echo '<br />';
} 
```

# ruby-on-rails - 在子模型 Rails 3 上查询条件

> ID：13840894
> 
> 赞同：0
> 
> 时间：2012-12-12T13:29:00.437
> 
> 标签：ruby-on-rails, ruby, activerecord

我有讨论、响应和用户模型。一个讨论属于一个用户，并且有很多响应。响应属于讨论和用户。用户有很多讨论并且有很多响应。

我想检索 1) 属于用户或 2) 具有属于用户的响应的所有讨论。但我不确定语法。

这可以通过一个查询使用 Rails 3 语法来完成，还是我必须编写自定义 SQL？伪代码：

```
@discussions = current_user.discussions # and current_user.discussions where a response belongs to current_user

class Discussion < ActiveRecord::Base
  belongs_to :author, class_name: 'User', foreign_key: 'user_id'
end

class Response < ActiveRecord::Base
  belongs_to :author, class_name: 'User', foreign_key: 'user_id'
  belongs_to :discussion
end

class User < ActiveRecord::Base
  has_many :discussions
  has_many :responses
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:00:40.363

```
Discussion.includes(:responses)
     .where("discussions.user_id = :uid OR responses.user_id = :uid", uid: user_id) 
```

# awk - Getline 哪些 awk 内置变量可用

> ID：13840897
> 
> 赞同：0
> 
> 时间：2012-12-12T13:29:12.620
> 
> 标签：awk

我们都知道 awk 实用程序中有几个内置变量，例如 - NF、FS、NR 和位置变量，例如 $0 ...。我有一个 awk 脚本，我在其中使用 getline 功能来获取如下命令的输出：

```
 while ( ("ls -l" |& getline) > 0) {
}
 while ( ("ls -l" | getline) > 0) {
}
 while ( ("ls -l" |& getline) > 0) {
}
while ( ("ls -l" |& getline var) > 0) {
} 
```

请让我知道我可以在 while 循环中推断出哪些 AWK 内置变量。我尝试访问 NR，但它总是给我 0？假设我想写如下内容：

```
while ( ("ls -l" |& getline) > 0) {
  if(NR == 1)
  {
      do something .. by parsing data via a Field Separator
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:40:09.247

请参阅[http://awk.freeshell.org/AllAboutGetline](http://awk.freeshell.org/AllAboutGetline)并确保您完全理解它并在尝试使用 getline 之前有很多 awk 经验。您给出的示例几乎肯定不是使用 getline 的好选择。

# actionscript-3 - 想解一些关于垃圾回收的疑惑（AS3.0）

> ID：13840900
> 
> 赞同：0
> 
> 时间：2012-12-12T13:29:25.973
> 
> 标签：actionscript-3

```
package
{
     public class SomeClass
     {
       public var myBtn:Button ; 
       public function SomeClass()
       { 
         myBtn.addEventListener( MouseEvent.CLICK, clickFunction) ;
       }

       function clickFunction(e:Event){

        }

    }

} 
```

主类：

```
 var someClass:SomeClass = new SomeClass(); // step 1 
 addChild(someClass); // step 2 
 removeChild(someClass); // step 3 
 someClass = null  // step 4 
```

在上面，我想完全销毁 someClass 实例，所以在第 4 步中它被分配了空值。

Q1）步骤 4（分配给 null ）是销毁实例的正确方法吗？

Q2）我提到：[http](http://gskinner.com/blog/archives/2006/06/as3_resource_ma.html) ://gskinner.com/blog/archives/2006/06/as3_resource_ma.html对对象使用删除关键字。但我认为 delete 关键字不能用于类实例？那么在这种情况下如何使用它呢？

Q3) SomeClass 中的 myBtn eventListener 会发生什么。在销毁 SomeClass 的实例之前，我是否应该手动添加 removeEventListener。还是会自动销毁？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:20:22.847

您创建的 SomeClass 实例将在不再有任何引用后被垃圾回收。通过将变量设置为 null，它会删除该引用，并且只要没有更多对它的引用， SomeClass 实例就会被垃圾收集。

在上面的代码中，您不需要删除事件侦听器。当一个 SomeClass 实例被收集时，它的所有成员变量都将被收集（除非它们在别处被引用）。*因为按钮*已经添加了事件监听，所以在按钮被收集的时候会被收集。

但是需要注意的是：如果不是`myBtn.addEventListener`您使用`stage.addEventListener`了 ，该阶段将保留对您的回调函数的引用，并且您最终可能会出现内存泄漏。始终删除分配给在您关心侦听器后仍然存在的对象的事件侦听器。

Creynder 的建议很好：删除事件侦听器是一种习惯。但是，只有当事件侦听器的调度程序要挂起但您不希望回调留在内存中时，才真正有必要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T14:51:14.680

1/ 是的。（我假设 someClass 变量是一个实例变量）

2/`delete`不仅删除变量的值，甚至删除变量定义。由于 AS3 中的类通常是密封的，因此它不起作用。即`delete`应该只用于动态创建的成员。`Object`主要是或`Dictionary`实例的“键” 。但显然您可以删除任何标记为`dynamic`using的类的成员定义`delete`。

3/ 是的，总是手动移除事件监听器。您可以在将处理程序注册为侦听器时创建弱引用的事件侦听器，但最好始终确保手动删除事件侦听器，这样更具可读性、清晰性和故障安全性。

我倾向于`destroy`在我的所有类中都有一个方法，实例所有者在清理对某个实例的引用时可以调用该方法。这个destroy方法将注销所有事件监听器，使实例成员无效并进行各种清理。

# datagrid - WPF中DataGrid中的TextSearch

> ID：13840905
> 
> 赞同：1
> 
> 时间：2012-12-12T13:29:43.123
> 
> 标签：datagrid

我无法让 TextSearch 在 DataGrid 中工作。

那里有代码示例吗？有人让它工作吗？

# wordpress - 敏捷上传器 Wordpress 实现

> ID：13840906
> 
> 赞同：6
> 
> 时间：2012-12-12T13:29:50.750
> 
> 标签：wordpress, uploader

我正在尝试实现一个首页 Wordpress 上传器，它使用户可以从 Wordpress 页面上传图像，并在上传之前调整图像大小。我找到了敏捷上传器。上传者是一个表格。

问题是当我单击表单中的提交按钮发送数据时，所有字段都存储在帖子中，但图像没有。

这是我的上传页面的代码：

```
<form id="submitForm" action="<?php echo get_permalink(); ?>" method="post" enctype="multipart/form-data" onsubmit="return ray.ajax()">
<!-- upload photos -->

  <div style="float:left;width:410px; height:246px;">
    <div id="multiple"></div>
  </div>

  <script type="text/javascript">
    jQuery('#multiple').agileUploader({
      formId: 'submitForm',
      flashVars: {
        file_post_var: 'attachment',
        firebug: false,
        form_action: '',
        file_limit: 15,
        max_post_size: (1000 * 1024)
      }
    }); 
  </script>

  </div>   <!-- end - upload photos -->
</form> 
```

和 Wordpress 上传的代码（在同一个文件中）

```
/* upload photos */
if ($post_error == false) {

  /* required files */
  require_once(ABSPATH . "wp-admin" . '/includes/image.php');
  require_once(ABSPATH . "wp-admin" . '/includes/file.php');
  require_once(ABSPATH . "wp-admin" . '/includes/media.php');

  $files = $_FILES['attachment'];

  if ($files) { 

    foreach ($files['name'] as $key => $value) {
      if ($files['name'][$key]) {
        $file = array(
          'name' => $files['name'][$key],
          'type' => $files['type'][$key],
          'tmp_name' => $files['tmp_name'][$key],
          'error' => $files['error'][$key],
          'size' => $files['size'][$key]
        );  
      }

      $_FILES = array("attachment" => $file);
      //$_FILES = array_reverse($_FILES);
      foreach ($_FILES as $file => $array) {                                  
        $attach_id = media_handle_upload( $file, $ad_id, array(), array( 'test_form' => false ) );
        if ($attach_id < 0) { $post_error = true;
      }
    }
  }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T10:01:29.223

您确定图像没有作为“附件”保存到创建的帖子吗？

尝试运行：

```
$attachments = get_posts( array(
'post_type' => 'attachment',
'posts_per_page' => -1,
'post_parent' => $post->ID,
'exclude'     => get_post_thumbnail_id()) 
);
var_dump($attachments); 
```

在您用于查看帖子的模板文件中。如果您对编码不满意，您可以使用插件来显示附件。像这个[“列出附件简码”](http://wordpress.org/plugins/list-attachments-shortcode/)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-20T16:54:53.110

这可能有点简单，可能不是您的问题，但是您`}`在`if ($attach_id < 0) { $post_error = true;`.

这是在您的实际代码中，还是您只是忘记将其放入上面的问题中？

# c++ - 命名管道，选择错误的文件描述符 C++

> ID：13840911
> 
> 赞同：0
> 
> 时间：2012-12-12T13:30:05.303
> 
> 标签：c++, client-server, named-pipes, echo-server

我只想用命名管道编写一个简单的多客户端服务器。我在服务器端遇到问题。当我只有阅读时，一切都很棒。现在，我增加了服务器将消息发送回客户端的可能性 - 现在它根本不工作......

这是我的服务器代码**（请注意，当我删除注释行 /* */ 时，它会从所有客户端读取，它工作得很好但是 - 只读）**。如何强制服务器也写入所有客户端？（这个概念是客户端首先写入发送到服务器客户端fifoname。服务器创建并打开这样的fifo并且可以写入它但是写入部分仍然不想工作......：/）

```
int main (int argc, char *argv[])
{
        int fd_in, fd_out, j, result;
        char buffer[4096];
        const char *myfifo = "./fifo";
        mkfifo(myfifo, 0666 );

        if ((fd_in = open(myfifo, O_RDONLY | O_NONBLOCK)) < 0)
                perror(myfifo);

        printf("Server reads from: %s\n", myfifo);

        for (;;) {

                fd_set fds_r;
                fd_set master;
                FD_ZERO (&fds_r);
                FD_ZERO (&master);
                FD_SET (fd_in, &fds_r);
                master = fds_r;

                if ((result = select(fd_in + 1, &fds_r, NULL, NULL, NULL)) < 0)
                        perror ("select()");

                if (! FD_ISSET(fd_in, &fds_r))
                        continue;
                result = read(fd_in, buffer, 4096);
                printf("FROM CLIENT: %s\n", buffer);

                /*if(startsWith(buffer, "#"))
                {
                    // remove # from message from client
                    string login = removePrefix(buffer);
                    string fifoname = "./fifo";
                    fifoname += login;
                    printf("REGISTERED: %s\n", fifoname.c_str());
                    mkfifo(fifoname.c_str(), 0666);
                    if ((fd_out = open(fifoname.c_str(), O_WRONLY)) < 0)
                            perror(fifoname.c_str());
                    FD_SET (fd_out, &master);

                }
               /* for(j = 0; j <= fd_in; j++) {
                            // send to everyone!
                            if (FD_ISSET(j, &master)) {
                                // except the listener and ourselves
                                if (j != fd_out) {
                                    if (write(j, buffer, sizeof(buffer)) == -1) {
                                        perror("write");
                                    }
                                }
                            }
                        }*/

                memset(buffer, 0, sizeof(buffer));
        }

        fprintf (stderr, "Got EOF!\n");
        close (fd_in);
        return 0;
} 
```

**客户端.cpp**

```
 #include <stdio.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>
#include <string>
#include <string.h>
using namespace std;

int main(int argc, char **argv)
{
   int client_to_server;
   const char *myfifo = "./fifo";

   int server_to_client;
   string f = "./fifo";
   string u(argv[1]);
   f += u;
   const char *myfifo2 = f.c_str();

   char str[BUFSIZ];
   /* write str to the FIFO */
   client_to_server = open(myfifo, O_WRONLY);
   server_to_client = open(myfifo2, O_RDONLY);

   // register message #username
   string reg = "#";
   reg += u;

   printf("Client writes to: %s\n", myfifo);
    printf("Client reads from: %s\n", myfifo2);

   // first write to server, he can now make a fifo called fifo+username
   if(write(client_to_server, reg.c_str(), strlen(reg.c_str())) == -1)
        perror("write:");

   while(1)
    {

   printf("Input message to serwer: ");
   scanf("%s", str);

   if(write(client_to_server, str, sizeof(str))==-1)

   perror("Write:"); //Very crude error check

   if(read(server_to_client,str,sizeof(str))==-1)

   perror("Read:"); // Very crude error check

   printf("...received from the server: %s\n",str);
    }
   close(client_to_server);
   close(server_to_client);

   /* remove the FIFO */

   return 0;
} 
```

**我的输出：**

服务器端：

```
$ ./SERVER 
Server reads from: ./fifo
FROM CLIENT: #username
FROM CLIENT: hello
FROM CLIENT: 
FROM CLIENT: ?
FROM CLIENT: 
FROM CLIENT: huh
FROM CLIENT: 
```

客户端：

```
$ ./CLIENT username
Client writes to: ./fifo
Client reads from: ./fifousername
Input message to serwer: hello
Read:: Bad file descriptor
...received from the server: hello
Input message to serwer: ?
Read:: Bad file descriptor
...received from the server: ?
Input message to serwer: huh
Read:: Bad file descriptor
...received from the server: huh
Input message to serwer: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T13:41:13.170

首先，检查`open`通话中的错误。这很可能解释了您所询问的问题。

我不清楚“消息”应该是什么。我看到它应该以 a 开头`#`，但是服务器应该如何知道它在哪里结束？它总是 4,096 字节吗？

但是你有三个主要问题：

1.  您的代码不应该在任何地方阻塞，但它不会将描述符设置为非阻塞。

2.  您的代码需要 4,096 字节的消息。但是，如果它读取的字节更少，它不会等到它读取其余的字节，而是会破坏消息。（或者它期望的任何消息，它显然可以超过管道可以原子处理的字节数。您需要以某种方式找到消息边界。）

3.  您的代码无法处理部分写入。如果任何客户端的读取速度不够快，它当前会挂起（由于上面的问题 1），但是一旦你解决了这个问题，它就会破坏数据。

您需要每个连接的应用程序接收缓冲区。从连接中读取数据时，将其读入应用程序缓冲区。如果你得到了完整的信息，很好，处理信息。否则，请等到您阅读完其余部分。如果您不使用固定长度的消息，则必须处理读取一条消息的结尾和另一条消息的开头的情况。

您有两种写入策略选择：

1.  使用每个连接的应用程序写入缓冲区。当您向连接发送数据时，如果没有立即发送所有字节，请将剩余的字节保存在应用程序缓冲区中。开始选择该描述符以进行写入和读取。如果您遇到写入命中，请尝试从应用程序缓冲区写入。

2.  仅使用内核缓冲区。如果您获得部分写入，则内核缓冲区已满。断开客户端，因为它无法跟上。

# android-intent - 如何使用按钮的 onClickHandler 切换到其他屏幕（视图）

> ID：13840913
> 
> 赞同：0
> 
> 时间：2012-12-12T13:30:07.300
> 
> 标签：android-intent

如何使用 Button 的 onClickHandler 以最简单的方式切换到不同的页面（视图）？

这是主要活动：

```
package myapp.tabnavui;

import myapp.tabnavui.List1;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

public void startClickHandler(View v) {
    setContent(new Intent(this, Tabs3.class));
}

} 
```

我想让 startClickHandler 使应用程序切换到 Tabs3：

```
package nl.computerhuys.tabnavui;

import android.app.TabActivity;
import android.os.Bundle;
import android.widget.TabHost;
import android.content.Intent;

/**
 * An example of tab content that launches an activity via {@link android.widget.TabHost.TabSpec#setContent(android.content.Intent)}
 */
public class Tabs3 extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        final TabHost tabHost = getTabHost();

        tabHost.addTab(tabHost.newTabSpec("tab1")
                .setIndicator("list")
                .setContent(new Intent(this, List1.class)));

        tabHost.addTab(tabHost.newTabSpec("tab2")
                .setIndicator("photo list")
                .setContent(new Intent(this, List8.class)));

        // This tab sets the intent flag so that it is recreated each time
        // the tab is clicked.
        tabHost.addTab(tabHost.newTabSpec("tab3")
                .setIndicator("destroy")
                .setContent(new Intent(this, Controls2.class)
                        .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)));
    }
} 
```

我该怎么做（针对 Android 4，最低 Android 2.2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:19:59.333

在这里找到它：[在 Android 应用程序中使用 Intent 来显示另一个活动](https://stackoverflow.com/questions/736571/using-intent-in-an-android-application-to-show-another-activity)

代码：

```
public void startClickHandler(View v) {
  Intent intent = new Intent(MainActivity.this, Tabs3.class);
  startActivity(intent);
} 
```

# matlab - 如何在 matlab 输出的颜色栏上放置标题？

> ID：13840921
> 
> 赞同：7
> 
> 时间：2012-12-12T13:30:34.913
> 
> 标签：matlab

我的程序的输出是一个区域图，并且有一个图形的标题但我也想在颜色条上放一个标题。我已经搜索了很多功能，但我无法做到这一点。谁能帮我 ？？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T14:15:07.727

使用颜色栏的句柄输出相对容易做到这一点：

```
imagesc(randn(10));
h = colorbar;
title(h,'my colorbar') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-28T17:24:20.803

除了皮特的出色回答，如果你想在侧面`colorbar`使用标签：

```
[X,Y,Z] = peaks;
figure;
contourf(X,Y,Z,20);
h = colorbar;
ylabel(h,'Side colorbar label'); 
```

# ruby-on-rails - 包括文件红宝石硒

> ID：13840923
> 
> 赞同：1
> 
> 时间：2012-12-12T13:30:37.460
> 
> 标签：ruby-on-rails, ruby, selenium, rspec, selenium-webdriver

我有多个 selenium-webdriver 的 ruby​​ 测试用例，所有文件都共享相同的功能。有没有办法创建一个全局文件并将文件包含到这些测试用例中，而不是一遍又一遍地输入它们

例如 - 我创建一个文件 setup.rb

```
def setup

    @driver = Selenium::WebDriver.for :firefox
    wait = Selenium::WebDriver::Wait.new(:timeout => 10) 
end 
```

然后在我的 test_file.rb 我开始

```
require setup

 setup
 @driver.find_element(:xpath => '//span[text()="войти"]').click 
```

有错误

```
NoMethodError:
       undefined method `find_element' for nil:NilClass 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:48:50.350

将其从实例变量更改为全局变量。让它`$driver`代替，`@driver`你不应该有问题。将其更改为类似..

```
def self_setup

    $driver = Selenium::WebDriver.for :firefox
    wait = Selenium::WebDriver::Wait.new(:timeout => 10) 
end 
```

接着

```
require "./setup.rb"

 setup.setup
 $driver.find_element(:xpath => '//span[text()="войти"]').click 
```

那应该行得通。不过，在查找该 xpath 之前，您可能希望先转到某个页面。setup 只会打开一个新的 firefox webdriver 实例。另外我建议更改 setup.rb 的名称，以便它可以`foo.setup`代替`setup.setup`. 我将 Lib.rb 用于我希望能够定期调用的方法，例如一个是`Lib.signin_admin`

希望这对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T06:52:01.297

作为对您的示例的回应，我认为您忘记包含 setup 模块（您确实将方法定义放在了模块中，对吗？）。此外，提到将驱动程序分配为全局变量（通过使用起始美元符号命名）的注释是一个好主意。所以事情看起来像这样......

安装程序.rb

```
module Setup
  def setup
    $driver = Selenium::WebDriver.for :firefox
    $wait = Selenium::WebDriver::Wait.new(:timeout => 10) 
  end
end 
```

测试文件.rb

```
require 'setup'
class SeleniumTest < Test::Unit::TestCase
  include Setup # Modules need to be included (mixed-in) in order to be used inside classes 

  # Setup is automagically called when using TestUnit

  $driver.get "http://www.yoururl.com"
  $driver.find_element(:xpath => '//span[text()="войти"]').click
end 
```

不利的一面是，对于您创建的每个新模块和文件，您必须要求并包含您要使用的所有新文件和模块。

我发现对我有用的方法是创建一个“test_helper.rb”，并使用一个名为“require_all”的gem，它需要并包含您指定的目录中的所有文件。

我的 test_helper.rb 看起来像这样：

```
require "rubygems"
require "require_all"
require "selenium-webdriver"
require "test-unit"

require_all relative_path("../lib/selenium/")

module TestHelpers
  include Selenium

  def setup

    $driver = Selenium::WebDriver.for :firefox
    ...

  end

  def teardown

    $driver.quit

  end

end 
```

而 test_page.rb 只需要两行：

```
# Line 1: Ensures the test_helper.rb gets loaded from the same directory the test_page.rb resides in
require File.join(File.dirname(__FILE__), 'test_helper') 

class TestPage < Test::Unit::TestCase

  # Line 2: Module needs mixed in to use its methods
  include TestHelpers

  def test_page

    $driver.get "http://www.mysite.com"
    assert $driver.find_element(:css => "div#my_site_logo")

  end

end 
```

# java - 从 IDE 构建时显示动态组件：Java

> ID：13840929
> 
> 赞同：0
> 
> 时间：2012-12-12T13:31:12.527
> 
> 标签：java, swing

当我编写用于在事件上显示文本字段、标签等的代码时，如果我编写整个代码，单击按钮可以正常工作，如果我从 netbeans 拖放任何组件，则它不起作用。

我该如何解决这个问题？

（已更新代码）

* * *

Netbeans 代码

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package maual;

import javax.swing.JLabel;

/**
 *
 * @author chiyaIDE
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        panel = new javax.swing.JPanel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("button");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout panelLayout = new javax.swing.GroupLayout(panel);
        panel.setLayout(panelLayout);
        panelLayout.setHorizontalGroup(
            panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );
        panelLayout.setVerticalGroup(
            panelLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 100, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(117, 117, 117)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jButton1))
                .addContainerGap(183, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(71, 71, 71)
                .addComponent(jButton1)
                .addGap(26, 26, 26)
                .addComponent(panel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(80, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:

        panel.add(new JLabel("Hello"));
        panel.revalidate();
        System.out.println(i++);
    }//GEN-LAST:event_jButton1ActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }
    public static int i;
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButton1;
    private javax.swing.JPanel panel;
    // End of variables declaration//GEN-END:variables
} 
```

* * *

手动代码

```
public static void paste()
{

    frame=new JFrame();
    panel=new JPanel();
    frame.setSize(400,400);
    frame.setVisible(true);

    panel.setSize(400,400);

    Container cp=frame.getContentPane();
    cp.add(panel);

    JButton button=new JButton("Click HERE");
    panel.add(button);

     button.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {

            panel.add(new JLabel("Hello"));
            panel.revalidate();
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:50:29.363

问题出在布局管理器中。我不喜欢 netbeans GUI Designers，我更喜欢自己设计，这也是众多原因之一：

您使用设计器创建一些基本的 GUI。稍后您想将下一个组件添加到其中，但由于布局，它不“可见”。默认为“自由设计”，即 GroupLayout。将其更改为其他适当的图层或为 JLabel 指定位置。

# asp.net - 从另一个页面显示列表框控件 ASP.Net VB.Net

> ID：13840935
> 
> 赞同：-1
> 
> 时间：2012-12-12T13:31:34.340
> 
> 标签：asp.net, vb.net, listbox, master-pages

我需要使用 VB.Net 在 ASP.Net 母版页上的文本框中显示内容页上的列表框的值

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:35:47.167

你可以试试这个

```
Dim txt As Textbox = DirectCast(Master.FindControl("yourTextbox"), Textbox)
txt.text = "your Value here" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:49:46.073

因此，您应该在内容页面上运行此代码。

我假设您在母版页上的文本框不在更新面板或面板等中，那么您需要先参考它。但如果没有，这应该工作....

```
Dim tb As Textbox = DirectCast(Master.FindControl("theNameofYourTextBox"), Textbox)
tb.Text = ListBox.Item.Value (or the equivalent for getting the text value in the listbox) 
```

# mod-rewrite - 为什么我的 .htaccess 规则不起作用？

> ID：13840938
> 
> 赞同：0
> 
> 时间：2012-12-12T13:31:40.673
> 
> 标签：mod-rewrite, url-rewriting

我的**.htaccess**规则存在级联问题。考虑以下：

```
RewriteEngine on

RewriteRule ^product/(.*)$  product.php  [L,QSA]
RewriteRule ^(.*)$          index.php    [L] 
```

有了上面的内容，如果我请求了一个类似**http://example.com/product/product-slug**的 URL ，那么我希望请求被路由到**product.php**。但是，它没有；我的**index.php**脚本被拾起请求。

我会认为第一个`RewriteRule`会被匹配，并且因为它有一个`L`（最后一个）标志，所以不会`RewriteRule`匹配更多的 s，包括底部的“catch-all”一个。

为什么这没有按预期工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:24:16.747

这应该对其进行排序：

```
RewriteRule ^product/(.*)$ product.php [L,QSA]

RewriteCond %{REQUEST_FILENAME} !product.php
RewriteRule ^.*$ index.php [L] 
```

问题是因为规则在不同的集合中，即没有附加条件，它只停止处理当前的规则集（第一个）并跳转到第二个。

希望这一切都解决了:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:41:42.510

也许您的代码中有错字？您在问题中写“http://example.com/products/”，但在您的目标代码中`^product$`，没有 s。

另外，您的第一条规则太严格了。它只会匹配[http://example.com/product/](http://example.com/product/)。您需要在产品之后包含一个通配符以允许它获取产品信息。类似的东西`RewriteRule ^products/(.*)$ product.php [L,QSA]`应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T14:07:16.720

不是因为你把规则放在的顺序吗？下面的将覆盖对它上面的更改。尝试改变它们。

另外，是否需要设置 RewriteBase？您的项目是在实际域上，还是本地存储在服务器根目录的子目录中？

# google-maps - 谷歌地图作为纹理贴图

> ID：13840939
> 
> 赞同：2
> 
> 时间：2012-12-12T13:31:41.357
> 
> 标签：google-maps, 3d, webgl, three.js

没有人考虑过创建谷歌地图的动态纹理吗？例如，我们创建一个简单的平面并为其应用纹理，该纹理将成为 Google 的实际地图（具有所有属性，如拖动、缩放等）。

以某种方式将谷歌地图部署到画布元素，将其作为 Object3D 纹理的地图，将其隐藏并听取其更改（鼠标移动等）并在更改纹理贴图时再次更新它会很好。

没有人已经实现了吗？或者至少有人对如何执行此实现有一些想法？？？可能是一些我不知道的替代方案？

如果我错了，请纠正我，但我认为将 Google Maps 作为插件或什至作为库的一部分包含在 THREE.js 中会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:13:30.310

我确实考虑过这一点，而且我并不孤单。但是，如果您选择这样做，您应该谨慎行事：[https ://developers.google.com/maps/licensing](https://developers.google.com/maps/licensing)

对于学生项目，你可能没问题，但如果你的游戏或房地产公司在发布后 2 小时内收到 C&D 信，请不要感到惊讶 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:16:40.007

似乎这已经完成了。

> Google Maps 团队与 B-Reel 一起制作了 Google Maps Cube Game，您可以在其中帮助一个小蓝球在纽约、东京、巴黎和旧金山（以及其他地方）的街道上导航。当您移动鼠标时，立方体会旋转，球会在街道上滚动，从建筑物上弹起并朝着目标前进。
> 
> 如果不提及 doob 先生的 Three.js 库，任何关于 WebGL 的讨论都是不完整的，这也不例外：Maps Cube 游戏使用 Three.js 进行华丽的渲染。如果您正在考虑在商业环境中进行一些 WebGL 工作，那么 Three.js 是一个非常好的起点；这是一个非常好的库，可以为您省去很多麻烦。

[http://www.playmapscube.com/](http://www.playmapscube.com/)（需要 chrome）。

# c++ - Visual Studio 2012 C++ 标准输出

> ID：13840942
> 
> 赞同：6
> 
> 时间：2012-12-12T13:31:47.317
> 
> 标签：c++, output

编译 Win32 应用程序时 fprintf(stdout/stderr) 在 Visual Studio 中打印到哪里？我一直听到它进入输出，但我看不到它！

在 C++ 中没有控制台窗口的情况下打印到输出日志的标准方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T14:04:33.523

如果您的程序与 /SUBSYSTEM:WINDOWS 链接，除非您分配控制台，否则您将看不到控制台输出。

这是分配控制台选项的代码。使用此方法，您无需更改链接器设置或创建 WinMain。

```
static void OpenConsole()
{
    int outHandle, errHandle, inHandle;
    FILE *outFile, *errFile, *inFile;
    AllocConsole();
    CONSOLE_SCREEN_BUFFER_INFO coninfo;
    GetConsoleScreenBufferInfo(GetStdHandle(STD_OUTPUT_HANDLE), &coninfo);
    coninfo.dwSize.Y = 9999;
    SetConsoleScreenBufferSize(GetStdHandle(STD_OUTPUT_HANDLE), coninfo.dwSize);

    outHandle = _open_osfhandle((long)GetStdHandle(STD_OUTPUT_HANDLE), _O_TEXT);
    errHandle = _open_osfhandle((long)GetStdHandle(STD_ERROR_HANDLE),_O_TEXT);
    inHandle = _open_osfhandle((long)GetStdHandle(STD_INPUT_HANDLE),_O_TEXT );

    outFile = _fdopen(outHandle, "w" );
    errFile = _fdopen(errHandle, "w");
    inFile =  _fdopen(inHandle, "r");

    *stdout = *outFile;
    *stderr = *errFile;
    *stdin = *inFile;

    setvbuf( stdout, NULL, _IONBF, 0 );
    setvbuf( stderr, NULL, _IONBF, 0 );
    setvbuf( stdin, NULL, _IONBF, 0 );

    std::ios::sync_with_stdio();

} 
```

如果您不想直接分配控制台，您还可以通过更改链接器设置的子系统将子系统从 /SUBSYSTEM:WINDOWS 更改为 /SUBSYSTEM:CONSOLE。请记住，当 /SUBSYSTEM:CONSOLE 启用时，gui 仍将像以前一样工作，但 windows 会为您创建一个控制台窗口以及您的应用程序。

在我的 Qt 代码中，这就是所有需要的。但是，当我在 VisualStudio 中尝试 MFC 并通过链接器设置将子系统设置为控制台时。我收到以下错误：

```
1>------ Build started: Project: MFCApplication1, Configuration: Debug Win32 ------
1>  MFCApplication1.cpp
1>msvcrtd.lib(crtexe.obj) : error LNK2019: unresolved external symbol _main referenced in function ___tmainCRTStartup
1>X:\Test\VC.110\MFCTest\MFCApplication1\Debug\MFCApplication1.exe : fatal error LNK1120: 1 unresolved externals 
```

这是由控制台应用程序中的入口点默认为 main() 和 Windows 应用程序中的 WinMain 引起的。为了解决这个问题，我必须在高级链接器设置的入口点设置中添加以下内容：“wWinMainCRTStartup”

在评论中，Ben Voigt 提出了另一种方法。使用 editbin 更改子系统不需要更改入口点。情况确实如此。当子系统构建测试应用程序时，我删除了入口点并将窗口放回原处，然后使用 editbin 使用以下命令更改子系统：

```
X:\Test\VC.110\MFCTest\MFCApplication1\Debug>editbin MFCApplication1.exe /SUBSYSTEM:CONSOLE
Microsoft (R) COFF/PE Editor Version 10.00.40219.01
Copyright (C) Microsoft Corporation.  All rights reserved. 
```

我在控制台中得到了我期望的输出：

```
X:\Test\VC.110\MFCTest\MFCApplication1\Debug>MFCApplication1.exe
Hello from a windows application! 
```

**注意：**使用 editbin 方法，每次更新可执行文件时都需要重新启用它。

最后，一旦你有了控制台 printf 或 std::cout 就可以使用任何一种方法。例如，在我的测试 MFC 应用程序中，我将以下行添加到 CMFCApplication1App 类的构造函数中：

```
std::cout << "Hello from a windows application!" << std::endl; 
```

# nsmutablearray - 从 NSMutableArray 中的 NSMutableDictionary 中删除重复项

> ID：13840945
> 
> 赞同：0
> 
> 时间：2012-12-12T13:31:47.020
> 
> 标签：nsmutablearray, nsmutabledictionary

我有`NSMutableArray`包含对象的书。这些对象是 `NSMutableDictionay`，每个对象是一个键值对 3 个东西，即 id、name、username。假设我有 3 个具有值的对象！

```
 - object1 = id->1, name->Hilal, username->hilalbaig ;
 - object2 = id->2, name->Ali,  username->alibaig ;
 - object3 = id->3, name->Jalal, username->hilalbaig ; 
```

所有这些 object( `NSMutableDictionay`) 都在 array( `NSMutableArray`) 中。

现在我的问题是我想从中删除重复项，因为`object1`两者`object2`都有`username -> hilalbaig`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:32:33.007

使用[Linq to ObjectiveC](https://github.com/ColinEberhardt/LinqToObjectiveC)，您可以删除重复项，如下所示：

```
NSMutableArray* source = // your array of dictionaries
NSArray* uniqueItems = [source distinct:^id(id dictionary) {
    return [dictionary objectForKey:@"username"];
}]; 
```

[distinct](https://github.com/ColinEberhardt/LinqToObjectiveC#distinct)方法从数组中返回不同的项。键选择器块允许您确定如何评估相等性。在上面的示例中，您可以看到如果两个字典具有相同的“用户名”，则它们被视为相等。

# javascript - 添加数组的键值开头

> ID：13840946
> 
> 赞同：2
> 
> 时间：2012-12-12T13:31:54.913
> 
> 标签：javascript

我想在 javascript JSON 数组的开头添加一个键-> 值对，如下所示：

```
var temp = new Array();
temp = {
          ['LABEL_ID': 10, 'LABEL_TYPE': A3],
          ['LABEL_ID': 17, 'LABEL_TYPE': A6]
       } 
```

我想做的事 ：

```
var temp = new Array();
temp = {
          'PAPER': A80 
               ['LABEL_ID': 10, 'LABEL_TYPE': A3],
               ['LABEL_ID': 17, 'LABEL_TYPE': A6]
       } 
```

请你帮助我好吗？

**编辑** 这里是我的代码：

```
// returns paper type from selected grid line
var ppt     = Ext.getCmp('labelType').getValue();

// returns selected grid rows
var rows    = Ext.getCmp('labelGrids').getSelectionModel().getSelection();

// here is my array that I want to add ppt variable value to existing array, then I will convert this to a JSON array
for (var i = 0; i < count; i++)
{
   prints[i] = {'LABEL_ID': rows[i].data.LABEL_ID, 'LABEL_TYPE':rows[i].data.LABEL_TYPE}
} 
```

原因是在数组的开头添加`ppt`值，只是我需要在服务器端记录这条记录。因此，我不想在所有行中重复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T13:54:37.557

好吧，我希望你在你的问题中指的是这个脚本：

为了回答您编辑的问题，一种简单的方法是将其包装在另一个对象中：

```
var temp = new Array();
temp = [
  {"LABEL_ID": 10, "LABEL_TYPE": "A3"},
  {"LABEL_ID": 17, "LABEL_TYPE": "A6"}
       ]
 // wrap temp in another object;

 var obj = {};
 obj.PAPER = A80;
 obj.Data = temp;
 //And convert to json.
 console.log(JSON.stingify(obj)); 
```

输出：

```
{"PAPER":"A80","Data":[{"LABEL_ID":10,"LABEL_TYPE":"A3"},{"LABEL_ID":17,"LABEL_TYPE":"A6"}]} 
```

希望这可以帮助。调用该函数会将所需的属性添加到您的对象中

```
var temp = new Array();
temp = [
  {"LABEL_ID": 10, "LABEL_TYPE": "A3"},
  {"LABEL_ID": 17, "LABEL_TYPE": "A6"}
       ]

  addPaperProperty(temp, 'PAPER', ['AA','BB']);

  function addPaperProperty(currentArray, newPropertyField, newPropertyArr){
    var newArray = [];
    var i=0;
    $(temp).each(function(){
       this[newPropertyField] = newPropertyArr[i++];
      newArray.push(this);
    });
    console.log(newArray);
    return newArray;
  } 
```

结果将是

```
[{LABEL_ID: 10, LABEL_TYPE: "A3", PAPER: "AA"},
{LABEL_ID: 17, LABEL_TYPE: "A6", PAPER: "BB"}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:40:59.837

如果您愿意，我会说这是适合您的方式。

你的 javascript 语法是无效的。您想将“标签”对象添加到您的数组中，并且您要分配`temp`给一个新对象，以覆盖您刚刚创建的数组。

如果要添加到数组中，则必须使用该方法`.push()`

像这样：

```
labelArray.push({'LABEL_ID': '10', 'LABEL_TYPE': 'A3'});
labelArray.push({'LABEL_ID': '17', 'LABEL_TYPE': 'A6'}); 
```

否则，这可能是指向正确方向的指针

```
var labelArray = new Array({'LABEL_ID': 10, 'LABEL_TYPE': A3},
               {'LABEL_ID': 17, 'LABEL_TYPE': A6});
var paper = {

    papertype : A80,
    labels : labelArray

} 
```

但它既不好也不干净，但它对你有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T13:37:44.063

您的对象似乎到处都是无效的：`[ ]`如果您真的希望它是一个数组，则外部括号应该是方括号，而内部括号应该是 curly `{ }`，因为它们是对象。

此外，除非`A3`和`A6`是您之前定义的变量，否则您需要将它们括在撇号中，因为它们是字符串：

```
var temp = [
    {'LABEL_ID': 10, 'LABEL_TYPE': 'A3'},
    {'LABEL_ID': 17, 'LABEL_TYPE': 'A6'}
] 
```

现在，如果你想在你的数组中添加这个属性，你最好这样做：

```
var temp = [
    {'PAPER': 'A80'},
    {'LABEL_ID': 10, 'LABEL_TYPE': 'A3'},
    {'LABEL_ID': 17, 'LABEL_TYPE': 'A6'}
] 
```

或者，制作`temp`一个对象，而不是：

```
var temp = {
    'PAPER':'A80',
    'labels':[
        {'LABEL_ID': 10, 'LABEL_TYPE': 'A3'},
        {'LABEL_ID': 17, 'LABEL_TYPE': 'A6'}
    ]
} 
```

（在对象中，你总是有一个`key:value`关系，在数组中，你永远不会有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T13:34:38.020

这**不是**一个数组。这种变量的类型称为哈希表，因为它定义了键/值对。

实际答案之前的一些要点：

*   键和值都可以是任何类型，但好的做法是将键作为纯字符串。
*   该值可以是任何东西，包括普通数组甚至另一个哈希表。
*   你不能只有一个没有值的键。

因此，为了使您的代码有效，您可以拥有这样的东西：

```
temp = {
    'PAPER': 'A80', 
    'LABELS': [{'LABEL_ID': 10, 'LABEL_TYPE': 'A3'}, 
               {'LABEL_ID': 17, 'LABEL_TYPE': 'A6'}]
}; 
```

这将添加普通的键/值对，然后添加一个值为哈希表数组的键。

要访问特定标签，您可以使用以下代码：

```
var id = temp["LABELS"][1]["LABEL_ID"]; 
```

请记住，JavaScript 区分大小写，因此在键名中大小写很重要，这意味着`temp["paper"]`将返回*undefined*。

[现场测试用例](http://jsfiddle.net/TuJbH/)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-12T13:38:24.030

您好，这是一个有效的 JSON 对象

```
temp = {
      'PAPER': A80, 'LIST' : {
           ['LABEL_ID': 10, 'LABEL_TYPE': A3],
           ['LABEL_ID': 17, 'LABEL_TYPE': A6]
       }
   } 
```

# php - move_uploaded_file() 是否会在 SUCCESSful Move 后自动删除临时上传的文件？

> ID：13840951
> 
> 赞同：5
> 
> 时间：2012-12-12T13:32:20.313
> 
> 标签：php, file-upload, upload

我的问题是：“`move_uploaded_file()`移动成功后是否会自动删除临时上传的文件？”

只是为了摆脱我需要这样做的困惑：

```
// Successful upload
if ( move_uploaded_file($file['tmp_name'], $destination) ) {
  unlink($file['tmp_name']);
  return TRUE;
} else {
  // Upload Failed
  unlink($file['tmp_name']);
  return FALSE;
} 
```

还是根本不需要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T13:36:02.580

您不需要手动`unlink()`临时文件；成功上传后，PHP 会自行清理。该函数称为***移动*_uploaded_file**，而不是***复制*_uploaded_file**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T13:35:33.393

是的，它确实。
[http://php.net/manual/en/function.move-uploaded-file.php](http://php.net/manual/en/function.move-uploaded-file.php)

> 函数说明：该函数检查以确保filename指定的文件是一个有效的上传文件（即是通过PHP的HTTP POST上传机制上传的）。如果文件有效，它将被移动到目的地给定的文件名。
> 
> 如果对上传文件进行的任何操作都可能向用户甚至同一系统上的其他用户泄露其内容，则这种检查尤其重要。

所以我们在这里看到：

如果文件有效，它将被**移动**到目的地给定的文件名。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T13:36:43.793

临时文件被自动删除。您不必手动删除它。`move_uploaded_file`函数也不会删除这个临时文件。

# c# - 将 GridView 导出为 PDF 时出现 ITextSharp 错误

> ID：13840953
> 
> 赞同：0
> 
> 时间：2012-12-12T13:32:28.080
> 
> 标签：c#, gridview, itextsharp, export-to-pdf

我尝试将 a 导出`GridView`为 PDF。它给出了错误：

> 无法将“iTextSharp.text.html.simpleparser.CellWrapper”类型的对象转换为“iTextSharp.text.Paragraph”类型。

它在这里抛出错误

```
htmlparser.Parse(sr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T18:26:49.530

您应该在数据绑定和解析之前禁用排序和分页。

这是代码：

```
Response.ContentType = "application/pdf";

Response.AddHeader("content-disposition","attachment;filename=GridViewExport.pdf");

Response.Cache.SetCacheability(HttpCacheability.NoCache);

StringWriter sw = new StringWriter();

HtmlTextWriter hw = new HtmlTextWriter(sw);

GridView1.AllowPaging = false;     <----

GridView1.AllowSorting = false;    <----

GridView1.DataBind();

GridView1.RenderControl(hw);

StringReader sr = new StringReader(sw.ToString());

Document pdfDoc = new Document(PageSize.A4, 10f,10f,10f,0f);

HTMLWorker htmlparser = new HTMLWorker(pdfDoc);

PdfWriter.GetInstance(pdfDoc, Response.OutputStream);

pdfDoc.Open();

htmlparser.Parse(sr);

pdfDoc.Close();

Response.Write(pdfDoc);

Response.End(); 
```

# c# - 表单身份验证 - 需要在表单身份验证发生后仅执行一次的事件

> ID：13840954
> 
> 赞同：0
> 
> 时间：2012-12-12T13:32:46.930
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, authentication

正如我正在研究的那样`Form Authentication in Asp.Net MVC`，我想知道 - `global.asax`OR 中是否有任何可用的事件，`base controller class`在表单身份验证发生时仅调用一次。（我只想在会话中添加一次并且仅在发生表单身份验证时添加）

我尝试了`OnAuthorization` 课堂活动`AuthorizeCore`。`AuthorizeAttribute`甚至我也尝试过文件`Application_OnAuthenticateRequest`和`Application_AuthorizeRequest`事件`Global.asax`..

但问题是，所有这些事件都会在每个请求上触发，我只想在`authentication`发生时执行一次。

您能否建议我这样做的最佳方法是什么！？

**注意：**身份验证 cookie 由存在于同一域中的另一个 Asp.net MVC 应用程序设置。（而且我正在通过 submain 访问这个应用程序 - 所以我可以访问父应用程序的 auth cookie）。但是，当应用程序 1 发生身份验证时，我想在应用程序 2 中设置一些会话变量。（因为我的应用程序 2 用户现在已经过身份验证，我想在应用程序 2 的会话中添加一些信息）

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T14:54:53.020

当应用程序 1 中发生身份验证时，添加一个额外的 cookie，该 cookie 将触发在应用程序 2 中设置会话变量。在应用程序 2 中的`AuthorizeCore`覆盖中`AuthorizeAttribute`，检查 cookie 的存在。如果存在，请设置会话变量并将其删除。

您也可以考虑将信息添加到 的用户数据部分，`FormsAuthenticationTicket`而不是将其存储在会话中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:55:18.747

您要问的是一个特定于应用程序的事件，并且由于不能简单地定义它的要求和细节，因此没有内置事件来处理它。因此，您必须自己创建它。

由于您使用的是 Forms Auth，因此您确切地知道它们进行了身份验证，但我怀疑您对一种以松散耦合、事件驱动的方式将其与其他模块或组件进行通信的方式感兴趣。我建议您在业务层中定义一个服务接口来代表您的身份验证服务。然后，您可以让需要通知（或被通知）身份验证事件的各种组件直接与身份验证服务对话，而不是尝试通过 ASP.NET 推送。我的回答相当含糊，因为您提供的有关在该事件中需要做什么的信息并不明显。

无论如何，我们可以考虑如何通过 ASP.NET 来推动它。为您的应用程序生成的由 Global.asax.cs 表示的类与任何类一样。您可以想象将自己的事件添加到该类中，并且`IHttpModule`（例如）希望订阅它，只需将方法中的`HttpApplication context`参数`Init`转换为特定类型并像往常一样附加事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:41:55.333

正如您所发现的，身份验证会在每个请求上执行，以验证是否允许给定用户查看给定页面。但是，您将需要在某处定义一个函数，该函数调用`.SetAuthCookie()`以在登录时（通常）对用户进行身份验证。您应该在此函数中调用您的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:01:23.410

据我所知，没有 OnAuthorized 事件。也许在 ASP.NET Forms 中有，但在 MVC 中，事情更加手动且更加灵活。

如果您在默认的 ASP.NET MVC Internet 应用程序项目中，则`AccountController`在 \Controllers\ 文件夹中打开并找到`Login`方法：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model, string returnUrl)
{
    if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
    {
        // Add session data or trigger an event
        return RedirectToLocal(returnUrl);
    } 
```

您应该找到与上述类似的内容。您可以在此处添加额外的会话数据或您希望在用户登录时执行的任何其他一次性代码。

即使您不使用 ASP.NET MVC Internet 应用程序，同样的概念也适用。在某些时候，您将需要一个控制器来处理登录 POST。成功登录后，您将执行代码。

# typo3 - 在放置在文件夹中的页面中显示继承的内容不起作用

> ID：13840957
> 
> 赞同：1
> 
> 时间：2012-12-12T13:33:02.187
> 
> 标签：typo3

我是 TYPO3 (6.0) 的新手，在显示继承的内容元素时遇到问题。我已经使用幻灯片变量设置了模板：

```
temp.content = CONTENT
temp.content {
  table = tt_content
  select.orderBy = sorting
  select.where = colPos = 0
  select.languageField = sys_language_uid
}

temp.content_slide = CONTENT
temp.content_slide {
  table = tt_content
  select.orderBy = sorting
  select.languageField = sys_language_uid
  slide = -1
} 
```

这对于主页下方的页面非常有效，只要它们不包含在文件夹中。当子页面包含在文件夹中时，所有继承的内容元素都不会显示。

所以：主页 > StandardSite1 > StandardSite2

> > 从 MainPage 继承的所有元素都显示在 StandardSites

主页 > 文件夹 > StandardSite3

> > 没有从 MainPage 继承的元素显示在 StandardSite3

任何想法，如何在标准站点中显示 MainPage 的继承内容元素，这些元素包含在文件夹中？

提前致谢，
弗兰克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:36:51.793

我认为这是不可能的，因为您向上滑动根线以收集内容元素。但是，根线在存储文件夹处中断。

# jquery - 获取jQuery中多选的所有选项，包括未选中的选项

> ID：13840959
> 
> 赞同：0
> 
> 时间：2012-12-12T13:33:09.907
> 
> 标签：jquery, multi-select

我已经看到了很多代码片段来检索 jQuery 中多选的选定选项，但是我所见过的所有代码都没有检索多选的所有选项，包括那些没有被选中的选项！

我想要做的是将所有选项放在一个字符串中，用逗号分隔。我有所选元素的代码：

```
var selectedOptions2 = $('#relationslist option:selected');
            var selectedValues2 = $.map(selectedOptions2 ,function(option) 
            {
                return option.value;
            }).join(','); 
```

如何调整它以放入 selectedValues 所有选项，包括未选中的选项？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:39:10.130

您应该能够通过使用选择器`$('#relationslist option');`而不是`$('#relationslist option:selected');`

IE

```
var selectedOptions2 = $('#relationslist option');
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:39:39.220

这行代码执行一个返回所有选定选项的选择器。

```
var selectedOptions2 = $('#relationslist option:selected'); 
```

关键部分是[`:selected`](http://api.jquery.com/selected-selector/)伪选择器，因为它告诉 jQuery 只带回当前选择的那些。如果您想要**所有**选项，只需删除该部分即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T13:44:56.313

你真的很接近 - 只需从选择器中删除 :selected -

[http://jsfiddle.net/EekQZ/1/](http://jsfiddle.net/EekQZ/1/)

```
var selectedOptions2 = $('#relationslist option');             
var selectedValues2 = $.map(selectedOptions2 ,function(option) {
    return option.value;
}).join(','); 
```

# hadoop - oozie 工作流属性中的 XML 特殊字符

> ID：13840960
> 
> 赞同：3
> 
> 时间：2012-12-12T13:33:12.573
> 
> 标签：hadoop, oozie

这是我的 oozie workflow.xml 的片段

```
<property>
   <name>statement</name>                   
   <value>${statement}</value>
</property> 
```

该语句可能包含诸如'>'、'<'等字符。当语句包含'>'（无编码）时，我的作业运行成功，但是如果语句包含'<'，作业将失败并出现错误“JA007: Error on line ：元素的内容必须由格式良好的字符数据或标记组成”

例如 case a: statement = "x>3;y>4" (没有错误) case b: statement = "x>3;y<4" (JA007)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:57:18.707

找到了根本问题。SAXBuilder 可以很好地解析这一段行 "x>2"

但失败，以下行“x<2”除外

">" 、 "<" 都是 xml 特殊字符，理想情况下，行为应该相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:06:56.487

SAX 解析器读取左括号作为子元素标记的开始，而右括号表示元素标记的结束。如果解析器当前不在元素标记内，则右括号可能被认为是合法的，并被接受。

如果你还没有解决这个问题，你想定义如下的语句来 XML 转义左右括号：

```
statement=x&gt;3;y&lt;4 
```

这在属性文件中可以正常工作，但是如果您使用符号从命令行传递变量`-Dkey=value`，那么您需要将参数括在引号中以避免 shell 错误地解释 & 符号：

```
"-Dstatement=x&gt;3;y&lt;4" 
```

# php - 尝试连接到另一个文件中的数据库时无法使用常量

> ID：13840961
> 
> 赞同：5
> 
> 时间：2012-12-12T13:33:12.883
> 
> 标签：php, mysql, database, constants, undefined

我有一个名为 config.php 的文件，我在其中定义了 4 个常量：

```
<?php

define('HOST','localhost');
define('USER','root');
define('PASSWORD','');
define('DATABASE','some_database');

?> 
```

我想做的是在另一个名为 database.php 的 php 文件中使用 request_once 函数调用此脚本，该文件将使用该文件中的常量进行连接

```
<?php
  require_once('config.php');
  $connect = mysql_connect(HOST,USER,PASSWORD);
  $select_db = mysql_select_db(DATABASE);
?> 
```

我得到的是没有定义主机、用户、密码和数据库。这是为什么？这是我用于连接的示例简化代码，但问题的本质在这里。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:35:56.223

PHP 默认不显示未定义常量的通知。因此，如果您使用未定义的常量，PHP 会将其简单地视为字符串。例如，

```
<?php
//define('__TEST__', 'foo');

print __TEST__; //Will print __TEST__ and raise E_NOTICE if it's enabled 
```

如果您取消注释上面的`define()`PHP 将改为打印`foo`并且不会发出通知。

就个人而言，我建议您进行更深入的测试：

0)`error_reporting(E_ALL)`在 config.php 中声明
1) 在包含它之前检查文件是否存在并且可读
2) 在使用它们之前检查常量是否实际定义

最后，它会是这样的：

文件：config.php

```
<?php

error_reporting(E_ALL);

define('HOST','localhost');
define('USER','root');
define('PASSWORD','');
define('DATABASE','some_database'); 
```

文件：dbconnection.php

```
<?php

//require() will produce FATAL error if inclusion fails, so we're OK
require_once('config.php'); 

if ( defined('HOST') && defined('USER') && defined('PASSWORD') && defined('DATABASE') ){

 $connect = mysql_connect(HOST,USER,PASSWORD);
 $select_db = mysql_select_db(DATABASE);

} else {

  trigger_error('Some constants are missing', E_USER_ERROR);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:54:59.280

您可以尝试 Include() 看看它是否有所作为。此外，如果您在本地机器上工作，您可能需要使用：

```
require_once(dirname(__FILE__) . "/config.php"); 
```

您应该查看 MYSQLI 或 PDO，因为 mysql 函数现在已贬值：

```
 define("DB_HOST", "");
 define("DB_USERNAME", "");
 define("DB_PASSWORD", "");
 define("DB_NAME", "");

    $Mysqli = new mysqli(DB_HOST, DB_USERNAME, DB_PASSWORD, DB_NAME);
        if ($Mysqli->connect_errno)
        {
            echo "Failed to connect to MySQL: (" . $Mysqli->connect_errno . ") " . $Mysqli->connect_error;
            $Mysqli->close();
        } 
```

# c# - 如何不让发送者收到它发送的消息？

> ID：13840965
> 
> 赞同：0
> 
> 时间：2012-12-12T13:33:21.783
> 
> 标签：c#, mvvm-light

我的一些班级发送和接收相同类型的消息，我希望他们不要对他们发送的消息做出反应。
我现在看到的唯一方法是发送者`Unregister()`在发送消息之前明确调用，然后在发送消息后再次调用`Register()`。这很好，但它需要相当多的样板代码。如果在收件人列表中找到发件人，如果信使忽略发件人
，那就太好了。`Messenger.SendExceptSender(msg,sender)`

IMessenger 是否以某种方式支持这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:41:45.823

据我所知，这是不可能的。接口和实现都没有为此提供便利，因为他们甚至不知道发送者是谁。

最简单的方法是将发送者作为属性添加到消息中。`Register`这将大大减少样板代码，并且比`Unregister`多线程场景更安全。

您可以像这样注册您的消息：

```
messenger.Register(this, m => {
                                  if(m.Sender == this)
                                      return;
                                  YourMessageHandler(m);
                              } ); 
```

* * *

如果这是您代码中的常见场景，您甚至可以为该属性创建一个接口或基类，并为其处理它`Sender`的扩展方法。`Register``Send`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:40:59.583

您可以在消息中包含令牌，并且在您想要注册的地方也可以在注册例程中包含令牌。

# excel - 根据下拉列表选择隐藏excel中的列

> ID：13840973
> 
> 赞同：0
> 
> 时间：2012-12-12T13:33:39.740
> 
> 标签：excel, show-hide

我想知道是否可以根据使用 excel 选择的下拉列表来隐藏列。例如，假设我有 3 列（C1、C2、C3），并且我有一个包含 2 个值（drop1 和 drop2）的下拉列表。从下拉列表中选择 drop1 时，显示 C1、C2 并隐藏 C3。选择 drop2 时，显示所有列 C1,C2,C3 。有谁知道这在excel中是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:39:00.287

是的，这是可能的（非常简短的回答）。

使用 VBA 在这种情况下，您必须将下拉值链接到任一单元格（并使用 Worksheet_Change 来查看特定单元格是否已获取隐藏列所需的值（在这种情况下，应撤消隐藏） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T13:37:10.003

[这是通过 VBA 隐藏列的示例](http://www.techrepublic.com/forum/questions/42-177201/excel-vba-to-hide-a-column-unhide-it)。您需要编写非常类似的代码。

请注意，我假设当您说“excel”时，您实际上是指在 excel 应用程序中。如果您以编程方式生成 Excel 文件，则可以通过 OpenXML API 轻松使用类似的代码。

# mysql - 修改数据库文件

> ID：13840978
> 
> 赞同：1
> 
> 时间：2012-12-12T13:34:03.107
> 
> 标签：mysql

我有一个客户设计的系统，该表最初不应该在几年内获得超过 10 个演出（可能是 1000 万行）。好吧，他们导入的信息比他们想象的要多得多，并且在一个月内，该表现在已达到 208 个演出（9 亿行）。

我对 MySQL 的经验很少，而对 Microsoft SQL 的经验却更多。MySQL 中是否有任何东西可以让客户端让数据库跨越多个文件，这样运行的查询就不必使用整个表和索引？桌子上有一个字段可以轻松拆分，但我不知道该怎么做。

我要解决的主要问题是从此表中的检索查询。插入根本不是什么大问题，因为它都是由后端服务完成的。我有一个测试系统，其中的表大约有 2 个演出（600 万行），我的查询不到一秒钟。在生产系统上运行相同的查询时，需要 20 秒。我觉得查询做得很好，只是表的大小导致了问题。该表上有一个专门为此查询创建的索引，并且使用 EXPLAIN，它正在使用它。

如果您有任何其他建议/问题，请随时提出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:59:59.170

除了已经提到的分区之外，您可能还需要运行[tune-primer](http://www.day32.com/MySQL/tuning-primer.sh)脚本以确保您的 mysql 配置是最佳的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T13:47:41.723

使用[分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)，尤其是创建表中设置 data_directory 和 index_directory 的部分。

使用这些选项，您可以根据需要将分区放在单独的驱动器上。不过，通常情况下，使用可以在每个查询上使用的键（通常是时间）进行分区就足够了。

# cordova - .live("pageshow"..) 在 Phonegap JQuery Mobile 上不起作用

> ID：13840982
> 
> 赞同：5
> 
> 时间：2012-12-12T13:34:09.957
> 
> 标签：cordova, jquery-mobile

我有以下使用 JQuery Mobile 的代码。这里的重点是我希望在触发“pageshow”事件时执行一些代码。

下面的所有代码都在 Chrome 上运行良好。我可以看到控制台日志。但是，当我将其作为 Phonegap 应用程序的一部分运行时，我从未触发过“pageshow”事件。

已经调查了一段时间，但没有成功。希望有人可以向我解释为什么我的事件丢失了，以及让这个代码在 Phonegap 上运行所需的步骤。

**详细信息.html**

```
<!DOCTYPE html>
<html>
<head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">      </script>
        <link rel="stylesheet" href="css/index.css" />
        <!-- cordova -->
        <script src="cordova-2.2.0.js"></script>
</head>
<body>
    <div data-role="page" id="details_page">
      <a href="places.html" data-transition="slide" data-direction="reverse">Back</a>
      <h3>Hi I am second page</h3>
    </div>

    <script src="js/details.js"></script>

</body>
</html> 
```

**细节.js**

```
$("#details_page").live("pageshow", function() {
    console.log('I am alive! (details.html)');
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T14:09:00.747

您应该使用以下内容

```
$(document).delegate("#details_page", "pageshow", function() {
    console.log("Hello world!");
}); 
```

另请注意，您只能在触发 deviceready 事件后运行代码。

因此，对于设备就绪事件，它会是这样的：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    $(document).delegate("#details_page", "pageshow", function() {
        console.log("Hello world!");
    });
} 
```

希望这会有所帮助，迈克

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T13:55:55.837

您现在可能已经解决了它，但是对于那些像我一样偶然发现的人，这就是我发现要解决的问题。live.() 在 JQuery 1.7 中已被弃用，并从 1.9 开始被删除。使用 on.() 代替。我已将我的（例如）行从：

```
$('#detailsPage').live('pageshow', function(event) { 
```

到：

```
$(document).on('pageshow', '#detailsPage', function(event) { 
```

HTH，皮疹*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:09:53.077

我认为问题可能是您在显示页面后调用 JS。

如果这是你只需要提出的问题

```
<script src="js/details.js"></script> 
```

在头部或“页面”div之前

# c++ - 纹理周围的边框，OpenGL

> ID：13840984
> 
> 赞同：8
> 
> 时间：2012-12-12T13:34:17.083
> 
> 标签：c++, opengl, graphics, textures

这是我用来在我的程序中绘制矩形的代码：

```
glBegin(GL_QUADS);
    glTexCoord2f(0.0f, maxTexCoordHeight);              glVertex2i(pos.x, pos.y + height);
    glTexCoord2f(0.0f, 0.0f);                           glVertex2i(pos.x, pos.y);
    glTexCoord2f(maxTexCoordWidth, 0.0f);               glVertex2i(pos.x + width, pos.y);
    glTexCoord2f(maxTexCoordWidth, maxTexCoordHeight);  glVertex2i(pos.x + width, pos.y + height);
glEnd(); 
```

它只绘制一个具有指定纹理的简单矩形，例如：![在此处输入图像描述](../Images/a7df289341a45f5c26aaadc49a7f3be1.png)

我想问一下是否可以在OpenGL中实现这样的边框效果： ![](../Images/1db044787b1da4df7a2a27f3eee5ea2e.png)

正如您在此图块中看到的那样，只有一个纯蓝色背景，可以单独处理 - 只是自动调整大小的纹理。这可以通过我提供的代码片段轻松实现，但问题在于边框。

如果边框应该是一种颜色，我可以尝试通过`GL_LINES`在纹理周围使用来绘制空的、未填充的矩形，但事实并非如此。

此外，如果瓷砖总是具有固定大小，我可以准备一个与之匹配的纹理，但它们必须易于调整大小，而无需更改我用作纹理的位图文件。

因此，如果基本的 OpenGL 函数无法实现，那么实现这种效果的最有效和/或最容易的方法是什么？

编辑：它必须是 2D 的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T14:10:16.230

这是使用 OpenGL 的 GUI 的经典问题，通常使用 9 单元模式解决。在此，您将效果添加到原始图像（或通过其他 opengl 参数定义）并将渲染的四边形分成九个四边形：三行和三列。

然后，将上下行的高度固定，就像固定左右列的宽度一样。中心四边形被缩放，以便您的对象适合您想要适合的矩形。然后，您只将纹理的边界部分映射到形成外部单元的四边形，同时将纹理的中心映射到中心四边形。

* * *

与评论中所说的相关，您还可以通过将四边形设为 3D 来使用实际的 3D 效果。在这种情况下，没有人强迫您使用透视投影，您可以使用正交投影（2D 模式）。无论如何，OpenGL 总是会进行 3D 计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-04T15:52:58.330

除了 Jonas 的出色回答之外，我还想再添加两个选项。
第一个是让纹理看起来像你想要的正方形。如果您可以在 Photoshop 中完成，则无需花哨的代码；）。
第二个是使您的绘图代码复杂一点。如果您查看图像，您会发现正方形的每个“边坡”都可以用两个三角形绘制。您可以让代码绘制 10 个三角形而不是一个正方形，并为每组两个三角形使用不同的颜色：

```
draw() {
    GLFloat i = <your_inset_here>;

    //top border part, top left triangle
    glColor3f(<color_0>);
    glVertex2f(pos.x, pos.y);
    glVertex2f(pos.x + w, pos.y);
    glVertex2f(pos.x + i, pos.y + i);
    //top border part, bottom right triangle
    glVertex2f(pos.x + w, pos.y);
    glVertex2f(pos.x + w - i, pos.y + i);
    glVertex2f(pos.x + i, pos.y + i);

    //repeat this process with the other coordinates for the other three borders

    // draw the middle square using {(pos.x+i,pos.y+i),(pos.x+w-i,pos.y+i),(pos.x+w-i,pos.y+h-i),(pos.x+i,pos.y+h-i)} as coordinates
} 
```

您可以通过创建一个函数来进一步改进这一点，用给定的坐标和颜色绘制一个不规则形状的四边形，然后调用该函数 5 次。

# eclipse - Eclipse java.lang.NoClassDefFoundError: org/w3c/dom/ElementTraversal

> ID：13840989
> 
> 赞同：15
> 
> 时间：2012-12-12T13:34:32.593
> 
> 标签：eclipse

我正在使用 eclipse juno .. 当我在 eclipse 中打开 javascript 文件时，它返回错误

```
java.lang.NoClassDefFoundError: org/w3c/dom/ElementTraversal
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791) 
```

我怎样才能克服这个..

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-04T12:27:52.493

我在尝试使用 version 时遇到了问题`2.0.2`，但发现当我恢复到 version`1.4.01`并且一切都恢复正常时。

如果您使用的是 Maven：

```
<dependency> 
    <groupId>xml-apis</groupId>
    <artifactId>xml-apis</artifactId>
    <version>1.4.01</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T15:55:45.507

你需要xml-apis。看看这个： http: [//www.coderanch.com/t/534171/XML/org-dom-ElementTraversal](http://www.coderanch.com/t/534171/XML/org-dom-ElementTraversal)

# c++ - 如何避免bad_alloc？

> ID：13840990
> 
> 赞同：2
> 
> 时间：2012-12-12T13:34:31.187
> 
> 标签：c++

如何避免`bad_alloc`下面代码中的错误。它说C调用`abort`函数：

```
terminate called after throwing an instance of 'std::bad_alloc'
  what():  std::bad_alloc
SIGABRT

#include<iostream>
#include<math.h>
#include<conio.h>
using namespace std;
int main()
{
  int n,p,count=0;
  double l,t;
  while(1)
  {
    cin>>n;
    if(n==0)
      break;
    else
    {
      int * arr;
      arr= new  int[n+1];
      for (int i=1; i<=n; i++)
        arr[i]=0;
      for(int i=2;i<=n;i++){
        if(arr[i]==0)
        {   p=i;
          count++;
          for (int j=2;p*j<=n;j++)
          {   
            arr[p*j]=1;
          }
        }

      }
      delete[] arr;
      l=(double(n))/(log(n));
      t=(((count-l))/count)*100;
      if(t<0)
        t=(-1)*t;
      printf("%.1lf\n",t);
    }
    count=0;
  }
  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:51:57.013

虽然可用 RAM 会限制您可以分配的内存量，但您可以通过`try {...} catch(std::bad_alloc& err) {...}`块处理异常本身。一旦你捕捉到`std::bad_alloc`异常，在你重新分配更多内存之前尝试释放一些内存（如果可以的话）。此外，如果您要进行大量小分配，您可能需要查看某种类型的内存池，因为分配和释放小块内存会随着时间的推移在有足够内存的情况下产生内存碎片问题。继续分配块，但没有足够的*连续*内存来进行有效分配。通过拥有自己的池，您可以通过优化小块的分配等来更好地处理碎片问题。

# javascript - 使用 Facebook access_token 登录到 Facebook Javascript sdk，而不使用 facebook 登录弹出窗口

> ID：13840992
> 
> 赞同：0
> 
> 时间：2012-12-12T13:34:35.337
> 
> 标签：javascript, php, facebook, facebook-graph-api, facebook-javascript-sdk

我在我的应用程序中使用 javascript sdk 登录到 facebook。但实际上我不想使用 facebook 登录弹出窗口，否则我想使用我的站点登录屏幕，用户将在其中输入他的 fb 凭据，然后单击与 fb 连接，他将登录到 fb。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:20:48.387

这是不可能的！用户必须通过 facebook 登录（使用该 fb 登录弹出窗口），然后只有他可以继续。查看更多详细信息-

[https://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)

可以使用 FB.getLoginStatus ，但这只有在用户已经使用 facebook 登录时才有效，而且情况并非总是如此，因此应避免使用。

# java - 重用 servlet 生成的图像

> ID：13840994
> 
> 赞同：0
> 
> 时间：2012-12-12T13:34:45.127
> 
> 标签：java, javascript, jquery, html, jakarta-ee

我有一个将变量传递给 servlet 的 JavaScript 函数，servlet 进行一些计算并以图像格式生成结果

```
var x,y,z; 
x="something"; y="something"; z="something";

var image = document.getElementById("finalpic");
image.src ="http://xyz/folder/myservlet1?monthly="+monthly+"&recent="+recent+"&likes="+likes;

 document.body.appendChild(image); 
```

作为回报，servlet 会生成一个被加载的图像，

我需要将此动态图像的 url 用于另一个 javascript 函数来进行需要图像 url 的 ajax/jQuery 调用。

我不想生成两次图像我想使用已经生成的图像 url。

```
FB.api('/me/photos','post', {
    message:'image',
    url:image    
  }, function(response){ 
```

我该怎么做，因为即使我打开生成的图像，它也会再次生成然后显示在选项卡中？如何利用已经生成的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:46:32.943

根据这个链接和我的理解，我觉得缓存servlet结果是一个配置的东西，请求不会再次发送到服务器进行处理。对不起，如果我错了。

[http://docs.oracle.com/cd/E19528-01/819-2634/abxbu/index.html](http://docs.oracle.com/cd/E19528-01/819-2634/abxbu/index.html)

# java - 配置视图未找到异常以显示 404

> ID：13840996
> 
> 赞同：0
> 
> 时间：2012-12-12T13:34:53.030
> 
> 标签：java, spring, spring-mvc, http-status-code-404, tomcat6

在我们的服务器中，我们有一个通用的 servlet 映射

```
 <servlet-mapping>
    <servlet-name>dispatcherServlet</servlet-name>
    <url-pattern>*.do</url-pattern>
  </servlet-mapping> 
```

问题是不是每个 *.do url 都在控制器中配置，因此调用不存在的以 *.do 结尾的 url 会产生 500 错误，而不以 *.do 结尾的相同不存在 url 返回正确的 404

所以我想做的是将 DispatcherServlet 配置为在这种情况下返回 404，或者至少捕获所有这些异常并返回 404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-25T12:37:38.990

在控制器类中添加上述方法。每个将被抛出的异常，甚至是 RuntimeExceptions，都将从这个方法中被捕获。

```
@ResponseStatus(HttpStatus.INTERNAL_SERVER_ERROR)
@ExceptionHandler(Exception.class)
public ModelAndView handleException(Exception ex) {
    Logger.getLogger(GuestNavController.class).error(ex);
    ModelAndView modelAndView = initializeModelAndView("guest/error500");

    return modelAndView;
} 
```

很明显，如果您更改@ExceptionHandler 异常参数和方法参数（它们必须相同），您将能够捕获特定异常。

如果您有多个控制器类，您应该创建一个控制器建议。您可以在源代码中添加上述类。

```
@ControllerAdvice
public class ExceptionManager {
    private final Logger logger = Logger.getLogger(ExceptionManager.class);

    @ResponseStatus(HttpStatus.NOT_FOUND)
    @ExceptionHandler(NoHandlerFoundException.class)
    public ModelAndView handleError404(Exception ex) {
        logger.error("ERROR 404: " + ex.getMessage());

        ModelAndView modelAndView = new ModelAndView();
        modelAndView.setViewName("guest/error404");
        return modelAndView;
    }
} 
```

您可以在此类中添加多个方法。此方法将捕获每个抛出的异常。如果您包含上述两种解决方案，
**请小心。**如果在包含带有 @ExceptionHandler 注释的方法的控制器中引发异常，则该异常将仅由该方法捕获，而不会从外部类捕获。外部类（解决方案 2）将捕获内部方法未捕获的异常（解决方案 1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T07:42:34.980

除了`<error-page/>`在部署描述符中配置一个元素来专门捕获`404`错误或者您没有任何其他选择。`404`如果您使用的是完整的 Web 应用程序容器，例如 glassfish，您还可以选择在容器级别覆盖页面。根据配置[在此处](https://stackoverflow.com/a/7066536/1530938)查找您的选项（servlet 3.0 有一个新选项）

请注意，在 JavaEE 堆栈中没有 a 这样的东西`ViewNotFoundException`（我检查过以绝对确定），因为容器会在第一个提示时跳入并控制它，它提供服务请求的资源的能力可能从根本上出错

作为开发人员，`4XX`系列状态代码通常不受您的控制，因为它们描述了您很可能无法处理（等）或不应处理的错误情况`401-forbidden`，`404-Not found`有点像 java 的运行时异常。

# python - Python 仪器驱动程序

> ID：13840997
> 
> 赞同：9
> 
> 时间：2012-12-12T13:34:56.573
> 
> 标签：python, .net, com, driver, visa

我是一名实验物理学家，也是[Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)的狂热爱好者。

我发现它非常适合数据分析和脚本编写，实际上我还使用它来连接实验室仪器（网络分析仪、示波器、信号分析仪和信号发生器......）。如果存在一个包含仪器驱动程序的好库，我认为 Python 将是我所在领域的[MATLAB的一个非常重要的竞争对手。](http://en.wikipedia.org/wiki/MATLAB)

到目前为止，我一直在使用几种策略来直接从我的[IPython](http://en.wikipedia.org/wiki/IPython)会话中连接它们：

*   使用库 pyVisa，这很好，适用于大多数设备，但有点低级，并且需要额外的编程层来向用户公开有用的功能。

*   我最近能够使用 pythondotnet 使用 IVI-COM 或 .NET 驱动程序（不是[IronPython](http://en.wikipedia.org/wiki/IronPython)，它缺少[NumPy](http://en.wikipedia.org/wiki/NumPy) / [Matplotlib](http://en.wikipedia.org/wiki/Matplotlib) ...库）。这个方案显然是最令人满意的一个，因为IVI驱动程序已经相当高级，而且它们通常由供应商提供，并且来自不同供应商的仪器可以互换。

我的第一个问题是一个相当技术性的问题：我到处读到[COM](http://en.wikipedia.org/wiki/Component_Object_Model)对象集成在 .NET 框架中，并且您可以在 .NET 中直接使用 COM 对象。就我而言，我可以通过导入 comtypes 模块（参见[http://code.activestate.com/recipes/578089-using-iviscope-in](http://code.activestate.com/recipes/578089-using-iviscope-instrument-driver-with-python/)`dotnet` ​​strument-driver- with -python/ ）和`clr`来自 pythondotnet来使用 COM 对象，但我根本不明白如何使用`clr`模块访问那些 COM 对象。有人可以解释 COM 和 .NET 之间的联系吗？

另外，我总是有点困惑，我怎么知道，当我有一个 DLL 文件时，它是否包含一个 .NET 模块，以及我是否可以用 .NET 4.0 版打开它（我是一个完整的这些框架问题的初学者和正确文档的链接会很好）？

第二个问题，更笼统地说，是不是已经有一个模块可以统一地为不同的仪器收集大量的驱动程序？在我看来，我们必须有成千上万的人在同一个问题上工作。

我最近迷上了模块 lantz [http://lantz.glugcen.dc.uba.ar/](http://lantz.glugcen.dc.uba.ar/)。不幸的是，这是在 Python 3.0 中，而我仍在使用 Python 2.7（带有适用于 Windows 的 pythonxy 发行版）。此外，我有点害怕这个项目没有尝试实施 IVI 建议，这将是一个很好的起点。

任何评论或相关信息来源的链接都将受到欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T02:26:00.950

我不能回答你的第一个问题，但我一直在这里对 IVI 标准进行 Python 解释：[https](https://github.com/python-ivi/python-ivi) ://github.com/python-ivi/python-ivi 。~~不幸的是，它也是 Python 3，但它是纯 Python（不导入外部 DLL 文件、COM 或 .NET 对象），因此它可能不是您正在寻找的。但是，优点是这意味着它是跨平台的，应该可以在 Windows 和 Linux 中运行。~~

Python IVI（以及仪器接口 python-vxi11 和 python-usbtmc）已更新为无缝支持 Python 2 和 Python 3。它仍然是纯 Python，因此没有外部二进制依赖项（DLL 文件、COM 或 .NET 对象）它可以在 Windows、Linux 和 Mac OS X 上运行。它甚至可以在[Raspberry Pi](http://en.wikipedia.org/wiki/Raspberry_Pi)上运行。此外，Python IVI 可以使用 PyVISA 访问[National Instruments](https://en.wikipedia.org/wiki/National_Instruments)兼容的硬件。

我称之为解释而不是实现，因为它不能仅仅因为它是 Python 就完全遵循规范。我试图尽可能地遵循规范，但我也尽可能地保持它像 Python 一样。不过，它还不到一年的历史，而我目前是唯一一个在研究它的人，我的乐器种类很少。如果有人愿意提供帮助，我会非常乐意接受捐款。

开箱即用，python-ivi 通过 python-vxi11 模块支持 LAN 上的 VXI-11 协议（我相信与大多数 LXI 仪器兼容）（python-vxi11 也是纯 Python，因此跨平台兼容），串行pySerial（跨平台）的仪器支持，以及 linux-gpib（仅限 Linux）的 GPIB 支持。我还计划包装 PyVISA，以便 python-ivi 能够使用 PyVISA 支持的所有接口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-11T21:34:47.703

我每天使用标准 Python（不是[IronPython或 pythondotnet）中的 COM 类型来控制 IVI 驱动程序。](http://en.wikipedia.org/wiki/IronPython)我从来不需要任何额外的 .NET 绑定。我通常会做这样的事情：

```
from comtypes import client
dmm = client.CreateObject('VTEXDmm.VTEXDmm')
dmm.Initialize('TCPIP::10.20.30.40::INSTR', True, True)
dmm.Measurement.Read(1000) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T23:59:13.830

另一种选择是使用 Tektronix 的 TekVisa。

```
import clr  clr.AddReferenceToFileAndPath('C:\Windows\\assembly\\GAC_32\\TekVISANet\\1.1.1.0__7f19bb2a5a9ae6e8\\TekVISANet.dll')

import TekVISANet
v = TekVISANet.VISA()
v.Open("GPIB0::6::INSTR")
id =v.Write("*IDN?",50)
s = v.Read(50)
print s 
```

# c++ - 使用 boost 或 STL 对 C++ 中的压缩（锁定）容器进行排序

> ID：13840998
> 
> 赞同：47
> 
> 时间：2012-12-12T13:34:57.713
> 
> 标签：c++, algorithm, boost, c++11, std

**我想做的事：**我想对锁定在一起的 2 个、3 个或 N 个向量进行排序，*而不是将它们复制*到一个元组中。也就是说，抛开冗长，例如：

```
vector<int>    v1 = {  1,   2,   3,   4,   5};
vector<double> v2 = { 11,  22,  33,  44,  55};
vector<long>   v3 = {111, 222, 333, 444, 555};

typedef tuple<int&,double&,long&> tup_t;
sort(zip(v1,v2,v3),[](tup_t t1, tup_t t2){ return t1.get<0>() > t2.get<0>(); });

for(auto& t : zip(v1,v2,v3))
  cout << t.get<0>() << " " << t.get<1>() << " " << t.get<2>() << endl; 
```

这应该输出：

```
5 55 555
4 44 444
...
1 11 111 
```

**我现在是怎么做的：**我已经实现了自己的快速排序，其中我传递的第一个数组用于比较，排列应用于所有其他数组。我只是不知道如何为我的问题重用 std::sort （例如提取排列）。

**我尝试过：** [boost::zip_iterator](http://www.boost.org/doc/libs/1_52_0/libs/iterator/doc/zip_iterator.html)和[boost::zip_range](http://www.boost.org/doc/libs/1_52_0/boost/range/combine.hpp)（带有 boost::combine 范围），但 std::sort 和[boost::range::algorithm::sort 都](http://www.boost.org/doc/libs/1_52_0/boost/range/algorithm/sort.hpp)抱怨迭代器/范围是只读的而不是随机访问...

**问题：**如何在锁步（压缩）中对 N 个向量进行排序？这个问题看起来非常通用和普遍，所以我想必须通过一个可能非常复杂的库来简单地解决它，但我就是找不到它......

**备注：**是的，stackoverflow 中有类似的问题，这个问题以不同的形式被问到很多。但是，它们总是以以下答案之一关闭：

*   将您的向量复制到一对/元组中并对该元组进行排序...
*   将向量复制到每个向量一个成员的结构中，并对结构向量进行排序...
*   针对您的特定问题实现您自己的排序功能...
*   使用索引的辅助数组...
*   使用 boost::zip_iterator 没有示例或带有产生不良结果的示例。

**提示：**

*   我在指向Anthony Williams的这篇[论文的](http://www.justsoftwaresolutions.co.uk/articles/pair_iterators.pdf)[boost 邮件列表中找到了这个线程。](http://lists.boost.org/Archives/boost/2004/07/68758.php)虽然这似乎只适用于对，但他们也讨论了一个 TupleIteratorType 但我一直没能找到它。
*   [user673679](https://stackoverflow.com/users/673679/user673679)发现[这篇](https://web.archive.org/web/20160508175724/https://web.stanford.edu/%7Edgleich/notebook/2006/03/sorting_two_arrays_simultaneou.html)文章包含两个容器案例的一个很好的解决方案。它还确定了问题（重点是我的）：

> [...] 根本问题是数组引用的“对”的行为不像他们应该的那样 [...] 我只是决定滥用迭代器的符号并编写一些有效的东西。这实际上涉及编写一个非一致性迭代器，其中*值类型的引用与引用类型不同。*

**答案：** *请参阅下面 interjay 的评论*（这也部分回答了*未来的问题*）：

```
#include "tupleit.hh"
#include <vector>
#include <iostream>
#include <boost/range.hpp>
#include <boost/range/algorithm/sort.hpp>
#include <boost/range/algorithm/for_each.hpp>

template <typename... T>
auto zip(T&... containers)
    -> boost::iterator_range<decltype(iterators::makeTupleIterator(std::begin(containers)...))> {
  return boost::make_iterator_range(iterators::makeTupleIterator(std::begin(containers)...),
                                      iterators::makeTupleIterator(std::end(containers)...));
}

int main() {

  typedef boost::tuple<int&,double&,long&> tup_t;

  std::vector<int>    a = {   1,   2,   3,   4 };
  std::vector<double> b = {  11,  22,  33,  44 };
  std::vector<long>   c = { 111, 222, 333, 444 };

  auto print = [](tup_t t){ std::cout << t.get<0>() << " " << t.get<1>() << " " << t.get<2>() << std::endl; };

  boost::for_each( zip(a, b, c), print);

  boost::sort( zip(a, b, c), [](tup_t i, tup_t j){ return i.get<0>() > j.get<0>(); });

  for ( auto tup : zip(a, b, c) ) print(tup);

  return 0;
} 
```

**未来的问题：**前面的答案适用于序列容器。我们能否让它也适用于*可排序*的容器（例如序列和列表）？这将需要 random_access 和双向 TupleIterators 以及适用于双向迭代器的排序算法。

**更新：**这适用于类似序列的容器的组合。但是，混合列表需要 std::sort 支持 BidirectionalIterators（不支持）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-09-22T15:14:46.587

这是一个基于为标准化而提出的[**range-v3库的工作示例**](https://github.com/ericniebler/range-v3)

```
#include <range/v3/all.hpp>
#include <iostream>

using namespace ranges;

int main() 
{
    std::vector<int> a1{15, 7, 3,  5};
    std::vector<int> a2{ 1, 2, 6, 21};
    sort(view::zip(a1, a2), std::less<>{}, &std::pair<int, int>::first); 
    std::cout << view::all(a1) << '\n';
    std::cout << view::all(a2) << '\n';
} 
```

[**实时示例**](http://coliru.stacked-crooked.com/a/c196695e77659141)（需要具有良好 C++14 支持的最新编译器，而不是 VS 2015）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-19T22:02:01.307

对于两个容器的情况，这里有一个在 gcc 4.4.6 上编译的版本，基于上面提到的论文。在更高版本的 gcc 中，您可以将 boost::tuple 换成 std​​::tuple

```
#include <iostream>
#include <vector>
#include <iterator>
#include <algorithm>

# include <boost/iterator/iterator_facade.hpp>
# include <boost/tuple/tuple.hpp> 

using namespace std;

template <class T, class T2>
struct helper_type {
  typedef boost::tuple<typename iterator_traits<T>::value_type, typename iterator_traits<T2>::value_type> value_type;
  typedef boost::tuple<typename iterator_traits<T>::value_type&, typename iterator_traits<T2>::value_type&> ref_type;
};

template <typename T1, typename T2>
class dual_iterator : public boost::iterator_facade<dual_iterator<T1, T2>,
                                                    typename helper_type<T1, T2>::value_type,
                                                    boost::random_access_traversal_tag,
                                                    typename helper_type<T1, T2>::ref_type> {
public:
   explicit dual_iterator(T1 iter1, T2 iter2) : mIter1(iter1), mIter2(iter2) {}
   typedef typename iterator_traits<T1>::difference_type difference_type;
private:
   void increment() { ++mIter1; ++mIter2; }
   void decrement() { --mIter1; --mIter2; }
   bool equal(dual_iterator const& other) const { return mIter1 == other.mIter1; }
   typename helper_type<T1, T2>::ref_type dereference() const { return (typename helper_type<T1, T2>::ref_type(*mIter1, *mIter2)); }
   difference_type distance_to(dual_iterator const& other) const { return other.mIter1 - mIter1; }
   void advance(difference_type n) { mIter1 += n; mIter2 += n; }

   T1 mIter1;
   T2 mIter2;
   friend class boost::iterator_core_access;
};

template <typename T1, typename T2>
dual_iterator<T1, T2> make_iter(T1 t1, T2 t2) { return dual_iterator<T1, T2>(t1, t2); }

template <class T1, class T2> struct iter_comp {
  typedef typename helper_type<T1, T2>::value_type T;
  bool operator()(const T& t1, const T& t2) { return get<0>(t1) < get<0>(t2); }
};

template <class T1, class T2> iter_comp<T1, T2> make_comp(T1 t1, T2 t2) { return iter_comp<T1, T2>(); }

template<class T> void print(T& items) {
  copy(items.begin(), items.end(), ostream_iterator<typename T::value_type>(cout, " ")); cout << endl;
}

int main() {
  vector<double> nums1 = {3, 2, 1, 0};
  vector<char> nums2 = {'D','C', 'B', 'A'};
  sort(make_iter(nums1.begin(), nums2.begin()), 
       make_iter(nums1.end(), nums2.end()), 
       make_comp(nums1.begin(), nums2.begin()));
  print(nums1);
  print(nums2);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T15:47:35.327

创建一个包含索引 0..N-1 的辅助数组。使用自定义比较器对该数组进行排序，该比较器实际上返回比较您的一个主数组的元素的结果。然后使用排序的辅助阵列以正确的顺序打印出您的主阵列。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T11:07:31.360

很高兴认识一位互联网考古学家！

> 如何在锁步（压缩）中对 N 个向量进行排序？这个问题看起来非常普遍和普遍，所以我想通过一个可能非常复杂的库必须有一个简单的解决方案，但我找不到它。

有时，我以类似的假设进行了同样的寻宝活动......
从未找到宝藏:(

我遵循与您相同的轨迹：

*   通过通常的嫌疑人 boost.iterator/boost.range/boost.fusion/boost.oven 并经过大量的实验和研究后意识到他们无法解决这个特定问题。
*   通过关于 SO 的许多问题，才意识到每个问题都已被关闭，要么答案不正确（例如推荐 boost::zip_iterator，正如你所指出的那样，在这种情况下它不起作用），或者有一些解决方法可以避免心事。
*   浏览了许多博客文章，邮件列表，才意识到没有人真正解决了这个问题，除了......
*   经过大量研究，最终挖掘出 Antonius Wilhelm 的旧法典，他声称已经制作了一个通用解决方案“TupleIterator”并将其锁定在一些存档“tupleit.zip”中。这个历史资料非常稀缺，我仍然不确定这个档案是神话，传说，还是仍然埋在互联网丢失层的某个地方:)

好吧，更严重的是，Anthony Williams 的论文表明这个问题实际上非常困难，所以发现没有像 boost 这样的现有库解决它也就不足为奇了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-30T18:12:20.297

我很高兴地说，在进行了类似的寻宝之后，我找到了解决方案。如果你可以使用 range-v3 是一个好主意，但如果你真的需要一个*迭代器*，HPX 项目[已经创建了一个](https://github.com/STEllAR-GROUP/hpx/blob/master/hpx/util/zip_iterator.hpp)，它可以完美地与 sort 配合使用。

由于疏忽，希望得到修复，它仍然需要您与 HPX 库链接，但这对我来说没关系，因为重点是使用 C++17 并行算法，HPX 提供了一个实现。

```
#include <hpx/util/zip_iterator.hpp>

using zip_it = 
    hpx::util::zip_iterator<std::vector<std::size_t>::iterator,
                            std::vector<std::size_t>::iterator,
                            std::vector<double>::iterator>;

int main() {
    std::vector<std::size_t> rows{3, 2, 1};
    std::vector<std::size_t> cols{1, 2, 3};
    std::vector<double> values{4.0, 5.0, 6.0};

    auto start = hpx::util::make_zip_iterator(rows.begin(), cols.begin(), values.begin());
    auto stop  = hpx::util::make_zip_iterator(rows.end(), cols.end(), values.end());

    std::sort(start, stop);

    for ( int i = 0; i < 3; ++i ) {
        std::cerr << rows[i] << ", " << cols[i] << ", " << values[i] << "\n";
    }
} 
```